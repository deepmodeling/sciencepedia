{"hands_on_practices": [{"introduction": "我们从最基本的概念开始：在得知某一事件发生后计算期望。这个练习使用一个简单的掷硬币游戏提供了一个具体的例子。通过计算在并非所有硬币都为反面的条件下得分的期望值，你将在一个离散且直观的背景下，练习应用条件期望的核心定义。[@problem_id:1291494]", "problem": "一名玩家参加一个简单的嘉年华游戏。游戏内容是同时抛掷三枚不同的、均匀的硬币。玩家在一轮中的得分由正面朝上的硬币数量决定。然而，有一条特殊规则：如果一轮的结果是三枚硬币都背面朝上，则该轮被视为“无效”，并立即重玩。我们关心的是任何非无效轮的期望得分。\n\n设 $X$ 为一次抛掷三枚硬币中正面朝上数量的随机变量。计算在已知该轮不是无效轮（即，观察到至少一个正面）的条件下 $X$ 的期望值。将最终答案表示为精确分数。", "solution": "设 $X$ 表示抛掷三枚独立的均匀硬币时正面朝上的数量。那么 $X$ 服从参数为 $n=3$ 和 $p=\\frac{1}{2}$ 的二项分布。\n\n定义事件 $A=\\{X0\\}$（该轮不是无效轮）。我们要求解 $\\mathbb{E}[X \\mid A]$。\n\n首先使用指示变量计算无条件期望。设 $H_{i}$ 为第 $i$ 枚硬币正面朝上的指示变量。则 $X=\\sum_{i=1}^{3} H_{i}$，根据期望的线性性质，\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{3} \\mathbb{E}[H_{i}]=3 \\cdot \\frac{1}{2}=\\frac{3}{2}.\n$$\n\n接下来计算 $\\mathbb{P}(A)$。补事件 $A^{c}$ 是所有硬币都背面朝上的事件，其概率为\n$$\n\\mathbb{P}(A^{c})=\\left(\\frac{1}{2}\\right)^{3}=\\frac{1}{8},\n$$\n所以\n$$\n\\mathbb{P}(A)=1-\\mathbb{P}(A^{c})=1-\\frac{1}{8}=\\frac{7}{8}.\n$$\n\n使用条件期望的恒等式\n$$\n\\mathbb{E}[X \\mid A]=\\frac{\\mathbb{E}[X \\mathbf{1}_{A}]}{\\mathbb{P}(A)}.\n$$\n由于在 $A^{c}$ 上 $X=0$，我们有 $X=X\\mathbf{1}_A$。因此 $\\mathbb{E}[X]=\\mathbb{E}[X\\mathbf{1}_A]$，所以\n$$\n\\mathbb{E}[X \\mid A]=\\frac{\\mathbb{E}[X]}{\\mathbb{P}(A)}=\\frac{\\frac{3}{2}}{\\frac{7}{8}}=\\frac{12}{7}.\n$$\n\n这就得到了在已知该轮不是无效轮的情况下的期望得分。", "answer": "$$\\boxed{\\frac{12}{7}}$$", "id": "1291494"}, {"introduction": "条件期望常常揭示不同概率分布之间令人惊讶的联系。本练习探讨了一个涉及两个独立泊松过程（例如到达数据服务器的请求）的著名结果。通过计算在给定总请求数的情况下，一个服务器的预期请求数，你将看到条件化如何将一个泊松问题转化为二项分布问题，这是统计建模中的一项强大技术。[@problem_id:1905661]", "problem": "在一个数据中心，两个独立的服务器，服务器A和服务器B，处理传入的请求。在给定的一分钟内，到达服务器A的请求数量，由随机变量 $X_1$ 表示，服从均值为 $\\lambda_1$ 的泊松分布。类似地，在同一分钟内到达服务器B的请求数量，由 $X_2$ 表示，也是一个泊松随机变量，与 $X_1$ 相互独立，其均值为 $\\lambda_2$。\n\n假设在某一分钟结束时，一个监控系统报告说两个服务器总共收到了 $k$ 个请求，其中 $k$ 是一个非负整数。给定此信息，到达服务器A的请求的期望数量是多少？\n\n你的任务是找到条件期望 $E[X_1 | X_1 + X_2 = k]$ 的一个闭式表达式。", "solution": "设 $X_{1} \\sim \\mathrm{Poisson}(\\lambda_{1})$ 和 $X_{2} \\sim \\mathrm{Poisson}(\\lambda_{2})$ 是相互独立的。其联合概率质量函数是\n$$\n\\mathbb{P}(X_{1}=i, X_{2}=j)=\\mathbb{P}(X_{1}=i)\\mathbb{P}(X_{2}=j)=\\exp(-\\lambda_{1})\\frac{\\lambda_{1}^{i}}{i!}\\,\\exp(-\\lambda_{2})\\frac{\\lambda_{2}^{j}}{j!}=\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{\\lambda_{1}^{i}\\lambda_{2}^{j}}{i!\\,j!}.\n$$\n对于 $k \\in \\{0,1,2,\\dots\\}$ 和 $i \\in \\{0,1,\\dots,k\\}$，条件概率是\n$$\n\\mathbb{P}(X_{1}=i \\mid X_{1}+X_{2}=k)=\\frac{\\mathbb{P}(X_{1}=i, X_{2}=k-i)}{\\mathbb{P}(X_{1}+X_{2}=k)}=\\frac{\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{\\lambda_{1}^{i}\\lambda_{2}^{k-i}}{i!\\,(k-i)!}}{\\mathbb{P}(X_{1}+X_{2}=k)}.\n$$\n通过卷积计算分母：\n$$\n\\mathbb{P}(X_{1}+X_{2}=k)=\\sum_{i=0}^{k}\\mathbb{P}(X_{1}=i)\\mathbb{P}(X_{2}=k-i)=\\exp(-(\\lambda_{1}+\\lambda_{2}))\\sum_{i=0}^{k}\\frac{\\lambda_{1}^{i}}{i!}\\frac{\\lambda_{2}^{k-i}}{(k-i)!}.\n$$\n使用二项式系数重写求和：\n$$\n\\sum_{i=0}^{k}\\frac{\\lambda_{1}^{i}}{i!}\\frac{\\lambda_{2}^{k-i}}{(k-i)!}=\\frac{1}{k!}\\sum_{i=0}^{k}\\binom{k}{i}\\lambda_{1}^{i}\\lambda_{2}^{k-i}=\\frac{(\\lambda_{1}+\\lambda_{2})^{k}}{k!}.\n$$\n因此\n$$\n\\mathbb{P}(X_{1}+X_{2}=k)=\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{(\\lambda_{1}+\\lambda_{2})^{k}}{k!}.\n$$\n代回可得\n$$\n\\mathbb{P}(X_{1}=i \\mid X_{1}+X_{2}=k)=\\frac{\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{\\lambda_{1}^{i}\\lambda_{2}^{k-i}}{i!\\,(k-i)!}}{\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{(\\lambda_{1}+\\lambda_{2})^{k}}{k!}}=\\binom{k}{i}\\left(\\frac{\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}\\right)^{i}\\left(\\frac{\\lambda_{2}}{\\lambda_{1}+\\lambda_{2}}\\right)^{k-i}.\n$$\n因此 $X_{1}\\mid (X_{1}+X_{2}=k)$ 服从 $\\mathrm{Binomial}\\left(k,\\frac{\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}\\right)$ 分布。二项随机变量 $Y \\sim \\mathrm{Binomial}(k,p)$ 的期望是 $E[Y]=kp$，所以\n$$\nE[X_{1} \\mid X_{1}+X_{2}=k]=k\\cdot \\frac{\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}=\\frac{k\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}.\n$$", "answer": "$$\\boxed{\\frac{k\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}}$$", "id": "1905661"}, {"introduction": "从离散变量转向连续变量需要将求和变为积分，但条件化的基本逻辑保持不变。本题使用了一个几何设定，即从一个确定区域内均匀随机选择一个点。它提供了推导条件概率密度函数并用其计算条件期望的必要动手实践，有助于为“切片”联合分布建立视觉直觉。[@problem_id:1905673]", "problem": "一个点 $(X, Y)$ 从笛卡尔平面第一象限的区域 $R$ 中被均匀随机地选取。区域 $R$ 由曲线 $y = \\sqrt{x}$ 和 $y = x^3$ 所界定。对于 $0  x  1$，求当随机变量 $X$ 的取值为 $x$ 时，随机变量 $Y$ 的条件期望。您的答案应为一个以 $x$ 表示的闭式解析表达式。", "solution": "该问题要求计算条件期望 $E[Y|X=x]$。\n\n1.  **确定 Y 的条件定义域**：\n    点 $(X,Y)$ 是从由 $y=\\sqrt{x}$ 和 $y=x^3$ 界定的区域 $R$ 中均匀选取的。对于一个在区间 $(0,1)$ 内的固定值 $x$，随机变量 $Y$ 的取值被限制在下边界曲线 $y=x^3$ 和上边界曲线 $y=\\sqrt{x}$ 之间的垂直线段上。因此，给定 $X=x$，$Y$ 的取值范围是 $[x^3, \\sqrt{x}]$。\n\n2.  **确定条件分布**：\n    由于点 $(X,Y)$ 是从整个区域 $R$ 中均匀选取的，给定 $X=x$ 时，$Y$ 的条件分布是在区间 $[x^3, \\sqrt{x}]$ 上的均匀分布。\n\n3.  **计算条件分布的期望**：\n    一个在区间 $[a,b]$ 上均匀分布的随机变量的期望是该区间的中点，即 $\\frac{a+b}{2}$。\n\n4.  **应用到本问题**：\n    在此例中，$a = x^3$，$b = \\sqrt{x}$。因此，$Y$ 在给定 $X=x$ 时的条件期望为：\n    $$\n    E[Y|X=x] = \\frac{x^3 + \\sqrt{x}}{2}\n    $$\n    这可以表示为 $\\frac{x^3 + x^{1/2}}{2}$。", "answer": "$$\\boxed{\\frac{x^{1/2}+x^{3}}{2}}$$", "id": "1905673"}]}
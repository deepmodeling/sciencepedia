{"hands_on_practices": [{"introduction": "理解协方差最直接的方式就是从头开始计算它。本练习提供了一个在机器学习模型评估等领域中常见的情景：两个离散随机变量的联合概率分布。通过逐步计算期望值和协方差，您将巩固对协方差基本定义 $\\text{Cov}(X,Y) = \\mathbb{E}[XY] - \\mathbb{E}[X]\\mathbb{E}[Y]$ 的理解 [@problem_id:1614699]。", "problem": "一位工程师正在分析一个用于检测装配线上故障组件的简单二元分类模型的性能。设 $X$ 是一个离散随机变量，表示一个组件的真实状态，其中当组件为故障时 $X=1$，当组件无故障时 $X=0$。设 $Y$ 是一个离散随机变量，表示模型的预测结果，其中当模型预测组件为故障时 $Y=1$，当模型预测组件无故障时 $Y=0$。\n\n在观察了大量组件后，该工程师确定了这两个变量的联合概率质量函数 $P(X=x, Y=y)$。其概率如下：\n\n-   $P(X=0, Y=0) = 0.65$\n-   $P(X=0, Y=1) = 0.05$\n-   $P(X=1, Y=0) = 0.10$\n-   $P(X=1, Y=1) = 0.20$\n\n计算组件真实状态与模型预测之间的协方差 $\\text{Cov}(X, Y)$。", "solution": "我们使用离散随机变量的协方差定义：\n$$\n\\text{Cov}(X,Y)=\\mathbb{E}[XY]-\\mathbb{E}[X]\\mathbb{E}[Y].\n$$\n根据给定的联合概率质量函数，将小数转换为精确分数：\n$$\nP(X=0,Y=0)=0.65=\\frac{13}{20},\\quad P(X=0,Y=1)=0.05=\\frac{1}{20},\\quad P(X=1,Y=0)=0.10=\\frac{1}{10},\\quad P(X=1,Y=1)=0.20=\\frac{1}{5}.\n$$\n\n首先计算边缘分布。对于 $X$：\n$$\nP(X=1)=P(1,0)+P(1,1)=\\frac{1}{10}+\\frac{1}{5}=\\frac{3}{10},\\quad P(X=0)=1-P(X=1)=1-\\frac{3}{10}=\\frac{7}{10}.\n$$\n对于 $Y$：\n$$\nP(Y=1)=P(0,1)+P(1,1)=\\frac{1}{20}+\\frac{1}{5}=\\frac{1}{4},\\quad P(Y=0)=1-P(Y=1)=1-\\frac{1}{4}=\\frac{3}{4}.\n$$\n\n现在计算期望。由于 $X,Y\\in\\{0,1\\}$，所以 $\\mathbb{E}[X]=P(X=1)$ 且 $\\mathbb{E}[Y]=P(Y=1)$：\n$$\n\\mathbb{E}[X]=\\frac{3}{10},\\qquad \\mathbb{E}[Y]=\\frac{1}{4}.\n$$\n通过联合概率质量函数计算 $\\mathbb{E}[XY]$：\n$$\n\\mathbb{E}[XY]=\\sum_{x\\in\\{0,1\\}}\\sum_{y\\in\\{0,1\\}}xy\\,P(X=x,Y=y)=1\\cdot 1\\cdot P(1,1)=\\frac{1}{5}.\n$$\n\n因此，\n$$\n\\text{Cov}(X,Y)=\\frac{1}{5}-\\left(\\frac{3}{10}\\right)\\left(\\frac{1}{4}\\right)=\\frac{1}{5}-\\frac{3}{40}=\\frac{8}{40}-\\frac{3}{40}=\\frac{5}{40}=\\frac{1}{8}.\n$$", "answer": "$$\\boxed{\\frac{1}{8}}$$", "id": "1614699"}, {"introduction": "相关性有一个与线性关系相关的强大而直观的特性。本练习探讨当一个随机变量是另一个随机变量的完美线性函数时会发生什么。这个思想实验 [@problem_id:1614669] 揭示了为什么相关系数的取值范围被限制在 $-1$ 和 $1$ 之间，以及这些极端值对于变量之间的关系意味着什么。", "problem": "设 $X$ 是一个非退化随机变量。如果一个随机变量的方差严格为正，则称其为非退化的。第二个随机变量 $Y$ 是通过 $X$ 的线性变换构造的，其方程为：\n$$Y = -2X + 5$$\n你的任务是计算随机变量 $X$ 和 $Y$ 之间的皮尔逊相关系数，记为 $\\rho(X, Y)$。最终答案应为一个实数。", "solution": "两个随机变量之间的皮尔逊相关系数定义为\n$$\n\\rho(X,Y)=\\frac{\\operatorname{Cov}(X,Y)}{\\sqrt{\\operatorname{Var}(X)\\operatorname{Var}(Y)}}.\n$$\n给定 $Y=-2X+5$，使用线性性质：\n- 对于任意常数 $a$ 和 $b$，$\\operatorname{Cov}(X,aX+b)=a\\,\\operatorname{Var}(X)$，因为 $\\operatorname{Cov}(X,b)=0$。\n- 对于任意常数 $a$ 和 $b$，$\\operatorname{Var}(aX+b)=a^{2}\\operatorname{Var}(X)$。\n\n当 $a=-2$ 和 $b=5$ 时，我们得到\n$$\n\\operatorname{Cov}(X,Y)=\\operatorname{Cov}(X,-2X+5)=-2\\,\\operatorname{Var}(X),\n$$\n$$\n\\operatorname{Var}(Y)=\\operatorname{Var}(-2X+5)=(-2)^{2}\\operatorname{Var}(X)=4\\,\\operatorname{Var}(X).\n$$\n因此，\n$$\n\\rho(X,Y)=\\frac{-2\\,\\operatorname{Var}(X)}{\\sqrt{\\operatorname{Var}(X)\\cdot 4\\,\\operatorname{Var}(X)^{2}}}=\\frac{-2\\,\\operatorname{Var}(X)}{\\sqrt{4\\,\\operatorname{Var}(X)^{2}}}=\\frac{-2\\,\\operatorname{Var}(X)}{2\\,\\operatorname{Var}(X)}=-1,\n$$\n此处的化简利用了 $\\operatorname{Var}(X)0$（非退化），这确保了分母 $2\\,\\operatorname{Var}(X)0$。", "answer": "$$\\boxed{-1}$$", "id": "1614669"}, {"introduction": "现在，让我们将所学知识应用到一个更综合的问题中，这个问题模拟了真实世界数据分析的场景。我们将基于一个单一的随机过程——掷骰子——来定义两个相关的变量，并从第一性原理出发计算它们的相关性。这个练习 [@problem_id:1614671] 是一个极好的实践机会，它涵盖了从确定概率分布到计算最终相关系数的整个工作流程，将我们学到的所有概念融会贯通。", "problem": "在分析两个随机变量之间的关系时，一个基本概念是它们的相关性。考虑一个标准的、公平的六面骰子。令随机变量 $X$ 代表掷一次该骰子的数值结果。我们定义第二个随机变量 $Y$，它作为结果的一个二元指示器。具体来说，如果掷骰子的结果严格大于3，则 $Y=1$，否则 $Y=0$。\n\n求骰子结果 $X$ 与指示变量 $Y$ 之间的皮尔逊相关系数 $\\rho(X, Y)$。\n\n将您的最终答案表示为单个封闭形式的解析表达式。", "solution": "两个随机变量 $X$ 和 $Y$ 之间的皮尔逊相关系数 $\\rho(X, Y)$ 定义为这两个变量的协方差除以它们标准差的乘积：\n$$ \\rho(X, Y) = \\frac{\\text{Cov}(X, Y)}{\\sigma_X \\sigma_Y} = \\frac{\\text{Cov}(X, Y)}{\\sqrt{\\text{Var}(X)\\text{Var}(Y)}} $$\n协方差由 $\\text{Cov}(X, Y) = E[XY] - E[X]E[Y]$ 给出，而一个随机变量 $Z$ 的方差是 $\\text{Var}(Z) = E[Z^2] - (E[Z])^2$。我们的解题过程将通过计算这些分量来展开。\n\n首先，我们来定义 $X$ 和 $Y$ 的概率分布。\n随机变量 $X$ 代表一个公平六面骰子的结果，所以它的样本空间是 $\\{1, 2, 3, 4, 5, 6\\}$，每个结果的概率为 $P(X=k) = \\frac{1}{6}$，其中 $k \\in \\{1, 2, 3, 4, 5, 6\\}$。\n\n随机变量 $Y$ 是一个指示变量。如果 $X  3$（即 $X \\in \\{4, 5, 6\\}$），则 $Y=1$；如果 $X \\le 3$（即 $X \\in \\{1, 2, 3\\}$），则 $Y=0$。\n$Y=1$ 的概率是 $P(Y=1) = P(X=4) + P(X=5) + P(X=6) = \\frac{1}{6} + \\frac{1}{6} + \\frac{1}{6} = \\frac{3}{6} = \\frac{1}{2}$。\n$Y=0$ 的概率是 $P(Y=0) = 1 - P(Y=1) = 1 - \\frac{1}{2} = \\frac{1}{2}$。\n\n现在，我们计算期望值 $E[X]$ 和 $E[Y]$。\n$$ E[X] = \\sum_{k=1}^{6} k \\cdot P(X=k) = \\frac{1}{6}(1+2+3+4+5+6) = \\frac{21}{6} = \\frac{7}{2} $$\n$$ E[Y] = (0 \\cdot P(Y=0)) + (1 \\cdot P(Y=1)) = 0 \\cdot \\frac{1}{2} + 1 \\cdot \\frac{1}{2} = \\frac{1}{2} $$\n\n接下来，我们计算方差 $\\text{Var}(X)$ 和 $\\text{Var}(Y)$。\n对于 $\\text{Var}(X)$，我们首先需要 $E[X^2]$。\n$$ E[X^2] = \\sum_{k=1}^{6} k^2 \\cdot P(X=k) = \\frac{1}{6}(1^2+2^2+3^2+4^2+5^2+6^2) = \\frac{1}{6}(1+4+9+16+25+36) = \\frac{91}{6} $$\n$$ \\text{Var}(X) = E[X^2] - (E[X])^2 = \\frac{91}{6} - \\left(\\frac{7}{2}\\right)^2 = \\frac{91}{6} - \\frac{49}{4} = \\frac{182 - 147}{12} = \\frac{35}{12} $$\n对于 $\\text{Var}(Y)$，我们首先需要 $E[Y^2]$。由于 $Y$ 只取值0和1，所以 $Y^2=Y$。\n$$ E[Y^2] = E[Y] = \\frac{1}{2} $$\n$$ \\text{Var}(Y) = E[Y^2] - (E[Y])^2 = \\frac{1}{2} - \\left(\\frac{1}{2}\\right)^2 = \\frac{1}{2} - \\frac{1}{4} = \\frac{1}{4} $$\n注意，这是一个参数为 $p=1/2$ 的伯努利试验的方差 $p(1-p)$。\n\n现在，我们计算乘积的期望 $E[XY]$。仅当 $Y=1$ 时，乘积 $XY$ 非零，这发生在 $X \\in \\{4, 5, 6\\}$ 的情况下。\n$$ E[XY] = \\sum_{k=1}^{6} (k \\cdot y_k) P(X=k) $$\n其中 $y_k$ 是在给定 $X=k$ 时 $Y$ 的值。\n$$ E[XY] = \\frac{1}{6}(1\\cdot 0 + 2\\cdot 0 + 3\\cdot 0 + 4\\cdot 1 + 5\\cdot 1 + 6\\cdot 1) = \\frac{1}{6}(0+0+0+4+5+6) = \\frac{15}{6} = \\frac{5}{2} $$\n\n我们现在可以求出协方差 $\\text{Cov}(X, Y)$。\n$$ \\text{Cov}(X, Y) = E[XY] - E[X]E[Y] = \\frac{5}{2} - \\left(\\frac{7}{2}\\right)\\left(\\frac{1}{2}\\right) = \\frac{5}{2} - \\frac{7}{4} = \\frac{10}{4} - \\frac{7}{4} = \\frac{3}{4} $$\n\n最后，我们将协方差和方差代入相关系数的公式中。\n$$ \\rho(X, Y) = \\frac{\\text{Cov}(X, Y)}{\\sqrt{\\text{Var}(X)\\text{Var}(Y)}} = \\frac{3/4}{\\sqrt{(\\frac{35}{12})(\\frac{1}{4})}} = \\frac{3/4}{\\sqrt{\\frac{35}{48}}} $$\n为简化分母，我们注意到 $\\sqrt{48} = \\sqrt{16 \\cdot 3} = 4\\sqrt{3}$。\n$$ \\rho(X, Y) = \\frac{3/4}{\\frac{\\sqrt{35}}{4\\sqrt{3}}} = \\frac{3}{4} \\cdot \\frac{4\\sqrt{3}}{\\sqrt{35}} = \\frac{3\\sqrt{3}}{\\sqrt{35}} $$\n或者，这可以写成 $3\\sqrt{\\frac{3}{35}}$。", "answer": "$$\\boxed{\\frac{3\\sqrt{3}}{\\sqrt{35}}}$$", "id": "1614671"}]}
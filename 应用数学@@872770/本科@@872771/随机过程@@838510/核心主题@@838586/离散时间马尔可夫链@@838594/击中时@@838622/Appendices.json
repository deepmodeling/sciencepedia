{"hands_on_practices": [{"introduction": "理解首达时间最直接的方法之一是通过“一步分析”。这个练习将带你分析一个简化的随机游走模型，该模型常用于模拟从金融到物理学的各种现象。通过建立关于期望步数的线性方程组，你将掌握计算平均首达时间的核心技巧。[@problem_id:1318122]", "problem": "考虑一个软件缺陷的简化模型，其中程序计数器（PC）的位置变得不稳定。PC的状态被建模为它在四个相邻内存地址（标记为0、1、2和3）中的位置。该过程始于PC位于地址1。\n\n在每一步中，如果PC位于中间地址 $i \\in \\{1, 2\\}$，它将以 $p = 2/3$ 的概率跳转到下一个更高的地址 $i+1$，或者以 $1-p = 1/3$ 的概率跳转到下一个更低的地址 $i-1$。内存地址0和3被视为终止状态。如果PC跳转到地址0或3，该过程立即停止。\n\n计算从地址1开始，PC到达终止状态所需的期望跳转次数。将您的最终答案四舍五入到三位有效数字。", "solution": "设系统的状态为内存地址 {0, 1, 2, 3}。设 $E_i$ 为在程序计数器（PC）从地址 $i$ 开始的情况下，到达终止状态所需的期望跳转次数。终止状态为0和3。根据定义，如果过程在一个终止状态开始，它就已经停止，所以所需的跳转次数为0。\n$$E_0 = 0$$\n$$E_3 = 0$$\n\n我们需要求的是 $E_1$。为了求 $E_1$，我们可以为非终止（瞬时）状态 $E_1$ 和 $E_2$ 的期望值建立一个线性方程组。我们使用第一步分析法，该方法以第一步跳转的结果为条件进行分析。从一个状态出发的总期望跳转次数等于1（第一次跳转）加上从新状态出发的未来期望跳转次数。\n\n对于从地址1开始的PC：\n它需要进行一次跳转。以概率 $p=2/3$，它会移动到地址2。从那里开始的*额外*期望跳转次数是 $E_2$。以概率 $1-p=1/3$，它会移动到地址0。从那里开始的*额外*期望跳转次数是 $E_0$。\n因此，我们可以写出 $E_1$ 的方程：\n$$E_1 = 1 + p \\cdot E_2 + (1-p) \\cdot E_0$$\n代入给定值 $p=2/3$ 和边界条件 $E_0=0$：\n$$E_1 = 1 + \\left(\\frac{2}{3}\\right)E_2 + \\left(\\frac{1}{3}\\right)(0)$$\n$$E_1 = 1 + \\frac{2}{3}E_2 \\quad (1)$$\n\n对于从地址2开始的PC：\n它需要进行一次跳转。以概率 $p=2/3$，它会移动到地址3。从那里开始的*额外*期望跳转次数是 $E_3$。以概率 $1-p=1/3$，它会移动到地址1。从那里开始的*额外*期望跳转次数是 $E_1$。\n因此，我们可以写出 $E_2$ 的方程：\n$$E_2 = 1 + p \\cdot E_3 + (1-p) \\cdot E_1$$\n代入给定值 $p=2/3$ 和边界条件 $E_3=0$：\n$$E_2 = 1 + \\left(\\frac{2}{3}\\right)(0) + \\left(\\frac{1}{3}\\right)E_1$$\n$$E_2 = 1 + \\frac{1}{3}E_1 \\quad (2)$$\n\n现在我们得到一个包含两个未知数 $E_1$ 和 $E_2$ 的二元线性方程组：\n1.  $E_1 = 1 + \\frac{2}{3}E_2$\n2.  $E_2 = 1 + \\frac{1}{3}E_1$\n\n我们可以通过代入法解这个方程组。将方程（2）代入方程（1）：\n$$E_1 = 1 + \\frac{2}{3}\\left(1 + \\frac{1}{3}E_1\\right)$$\n$$E_1 = 1 + \\frac{2}{3} + \\frac{2}{9}E_1$$\n现在，我们求解 $E_1$。首先，将包含 $E_1$ 的项合并到一边：\n$$E_1 - \\frac{2}{9}E_1 = 1 + \\frac{2}{3}$$\n$$\\frac{7}{9}E_1 = \\frac{3}{3} + \\frac{2}{3}$$\n$$\\frac{7}{9}E_1 = \\frac{5}{3}$$\n解出 $E_1$：\n$$E_1 = \\frac{5}{3} \\cdot \\frac{9}{7}$$\n$$E_1 = \\frac{45}{21} = \\frac{15}{7}$$\n\n题目要求答案四舍五入到三位有效数字。我们首先将分数转换为小数：\n$$E_1 = \\frac{15}{7} \\approx 2.142857...$$\n四舍五入到三位有效数字得到 2.14。", "answer": "$$\\boxed{2.14}$$", "id": "1318122"}, {"introduction": "随机过程的行为很大程度上取决于其边界条件。在这个问题中，我们将探讨一个带有“反射壁”的随机游走，这与之前问题中的吸收边界形成鲜明对比。通过解决一个二阶差分方程，你将学会如何处理不同类型的边界，并理解它们对期望首达时间的影响。[@problem_id:1306539]", "problem": "一个电子游戏中的角色被困在一个狭窄的一维走廊里。走廊由一系列离散的位置表示，这些位置由整数 $i=0, 1, 2, \\dots, N$ 标记。出口位于位置 $i=0$。角色从位置 $k$ 开始。\n\n在每个时间步，如果角色位于位置 $i$ 且 $0  i  N$，他们会以 $1/2$ 的概率移动到位置 $i-1$，或以 $1/2$ 的概率移动到位置 $i+1$。走廊两端的移动规则如下：\n-   位置 $i=0$ 是出口。一旦角色到达此位置，他们就逃脱了，过程停止。\n-   位置 $i=N$ 是一个带有完全反射墙的死胡同。如果角色试图从位置 $i=N-1$ 向 $N$ 移动，他们会到达 $N$。然而，在接下来的时间步中，他们总是被强制返回到位置 $i=N-1$。这意味着从状态 $N$ 的转移总是在一个时间步后到达状态 $N-1$。\n\n已知走廊由 $N=10$ 定义，角色从初始位置 $k=7$ 开始，计算角色到达位置 $0$ 的出口所需的期望时间步数。", "solution": "设 $T_{i}$ 表示从位置 $i$ 开始到达吸收态 $0$ 所需的期望时间步数。根据全期望定律和马尔可夫性质，对于内部状态 $1 \\leq i \\leq N-1$，期望值满足\n$$\nT_{i} = 1 + \\frac{1}{2} T_{i-1} + \\frac{1}{2} T_{i+1}.\n$$\n整理后得到二阶差分方程\n$$\nT_{i+1} - 2 T_{i} + T_{i-1} = -2 \\quad \\text{for } 1 \\leq i \\leq N-1.\n$$\n边界条件是：\n- 在 $0$ 处吸收：$T_{0} = 0$。\n- 在 $N$ 处完全反射：从 $N$ 出发，过程确定性地在一个时间步内移动到 $N-1$，因此\n$$\nT_{N} = 1 + T_{N-1}.\n$$\n\n为了解此非齐次二阶差分方程，使用二次拟设 $T_{i} = a i^{2} + b i + c$。其二阶差分为 $2a$，因此匹配 $2a = -2$ 可得 $a = -1$。于是\n$$\nT_{i} = - i^{2} + b i + c.\n$$\n应用 $T_{0} = 0$ 得到 $c = 0$，因此\n$$\nT_{i} = - i^{2} + b i.\n$$\n使用反射边界条件 $T_{N} = 1 + T_{N-1}$：\n$$\n- N^{2} + b N = 1 + \\left[-(N-1)^{2} + b (N-1)\\right].\n$$\n化简得，\n$$\n- N^{2} + b N = 1 - (N^{2} - 2N + 1) + bN - b = 2N - b,\n$$\n可得\n$$\nb - 2N = 0 \\quad \\Longrightarrow \\quad b = 2N.\n$$\n因此，对于所有的 $i$，\n$$\nT_{i} = - i^{2} + 2N i = i(2N - i).\n$$\n\n当 $N = 10$ 且起始位置为 $k = 7$ 时，\n$$\nT_{7} = 7(2 \\cdot 10 - 7) = 7 \\cdot 13 = 91.\n$$\n因此，到达出口所需的期望时间步数为 $91$。", "answer": "$$\\boxed{91}$$", "id": "1306539"}, {"introduction": "首达时间的概念不仅限于物理位置上的移动，它也可以应用于等待特定事件序列的发生。这个问题要求我们计算掷骰子时首次出现特定序列（1-2-3）所需的期望次数。你需要定义一个抽象的状态空间来追踪匹配目标的进度，这是一种在模式识别和序列分析中非常强大的方法。[@problem_id:1306556]", "problem": "一个游戏包含重复投掷一顆标准的、公平的六面骰子，直到出现一个特定的由三个连续结果组成的序列。骰子的六个面编号从1到6，每次投掷时，这些数字中的任何一个出现的概率都相等，为 $\\frac{1}{6}$。计算首次观察到序列 1-2-3 所需的期望投掷次数。", "solution": "设目标模式为长度为3的序列 1-2-3。通过最近投掷结果中同时也是目标序列前缀的最长后缀来对此过程建模。定义状态：\n- 状态 $S_{0}$：当前没有匹配（期望的额外投掷次数为 $E_{0}$）。\n- 状态 $S_{1}$：最后一次投掷结果为 $1$（匹配长度为 $1$ 的前缀；期望值为 $E_{1}$）。\n- 状态 $S_{2}$：最后两次投掷结果为 $1,2$（匹配长度为 $2$ 的前缀；期望值为 $E_{2}$）。\n- 状态 $S_{3}$：吸收状态（已看到模式 1-2-3；期望值为 $0$）。\n\n在每一步中，进行一次投掷，然后状态更新。我们使用全期望公式写出第一步方程。\n\n从状态 $S_{0}$ 开始：有 $\\frac{1}{6}$ 的概率投掷结果为 $1$，我们转移到状态 $S_{1}$；有 $\\frac{5}{6}$ 的概率投掷结果不为 $1$，我们停留在状态 $S_{0}$。因此\n$$\nE_{0}=1+\\frac{1}{6}E_{1}+\\frac{5}{6}E_{0}.\n$$\n从状态 $S_{1}$ 开始：投掷结果为 $2$（概率为 $\\frac{1}{6}$）则转移到 $S_{2}$。投掷结果为 $1$（概率为 $\\frac{1}{6}$）则最长匹配后缀仍为 $1$，所以我们停留在 $S_{1}$。投掷结果为 $3,4,5,6$ 中的任意一个（概率为 $\\frac{4}{6}$）会中断匹配并转移到 $S_{0}$。因此\n$$\nE_{1}=1+\\frac{1}{6}E_{2}+\\frac{1}{6}E_{1}+\\frac{4}{6}E_{0}.\n$$\n从状态 $S_{2}$ 开始：投掷结果为 $3$（概率为 $\\frac{1}{6}$）则完成模式并转移到 $S_{3}$（此后贡献为 $0$）。投掷结果为 $1$（概率为 $\\frac{1}{6}$）使得最长匹配后缀为 $1$，因此转移到 $S_{1}$。投掷结果为 $2,4,5,6$ 中的任意一个（概率为 $\\frac{4}{6}$）则转移到 $S_{0}$。所以\n$$\nE_{2}=1+\\frac{1}{6}E_{1}+\\frac{4}{6}E_{0}.\n$$\n\n解这个线性方程组。由第一个方程，\n$$\nE_{0}-\\frac{5}{6}E_{0}=1+\\frac{1}{6}E_{1}\\quad\\Rightarrow\\quad E_{0}=6+E_{1}.\n$$\n由第二个方程，\n$$\nE_{1}-\\frac{1}{6}E_{1}=1+\\frac{1}{6}E_{2}+\\frac{4}{6}E_{0}\\quad\\Rightarrow\\quad 5E_{1}=6+E_{2}+4E_{0}.\n$$\n由第三个方程，\n$$\n6E_{2}=6+E_{1}+4E_{0}.\n$$\n将 $E_{1}=E_{0}-6$ 代入第三个方程得到 $6E_{2}=5E_{0}$，所以 $E_{2}=\\frac{5}{6}E_{0}$。将 $E_{1}=E_{0}-6$ 和 $E_{2}=\\frac{5}{6}E_{0}$ 代入 $5E_{1}=6+E_{2}+4E_{0}$：\n$$\n5(E_{0}-6)=6+\\frac{5}{6}E_{0}+4E_{0}\n\\;\\Rightarrow\\;\n5E_{0}-30=6+\\frac{29}{6}E_{0}\n\\;\\Rightarrow\\;\n30E_{0}-180=36+29E_{0}\n\\;\\Rightarrow\\;\nE_{0}=216.\n$$\n\n因此，首次观察到序列 1-2-3 所需的期望投掷次数是 $216$。", "answer": "$$\\boxed{216}$$", "id": "1306556"}]}
{"hands_on_practices": [{"introduction": "掌握稳态分布计算的第一步是直接应用其基本定义。本练习提供了一个具体的计算机服务器模型，其在不同工作状态（空闲、计算、更新）之间转换。您的任务是将这个系统的文字描述转化为一个生成矩阵 $Q$，然后通过求解线性方程组 $\\pi Q = 0$ 和归一化条件来找出系统处于各个状态的长期概率。这个练习旨在巩固求解稳态分布的核心计算流程。[@problem_id:1333676]", "problem": "考虑一个计算机服务器的简化模型，该服务器可以处于以下三种状态之一：{1: 空闲, 2: 计算, 3: 更新}。服务器根据一个连续时间马尔可夫链在这些状态之间进行转换。\n转换如下：\n- 从“空闲”（状态1），一个新任务到达，导致以 $3\\lambda$ 的速率转换到“计算”（状态2）。\n- 从“空闲”（状态1），系统可以启动自我更新，以 $\\lambda$ 的速率转换到“更新”（状态3）。\n- 从“计算”（状态2），当前任务可以完成，服务器以 $4\\lambda$ 的速率返回到“空闲”（状态1）。\n- 从“计算”（状态2），一个强制性系统补丁可以中断任务，强制以 $\\lambda$ 的速率转换到“更新”（状态3）。\n- 从“更新”（状态3），更新过程完成，服务器总是以 $4\\lambda$ 的速率返回到“空闲”（状态1）。\n没有其他可能的转换。参数 $\\lambda$ 是一个正常数，代表基本转换速率。\n\n假设系统已经运行了很长时间，它达到了一个平稳状态。确定平稳概率分布向量 $\\pi = (\\pi_1, \\pi_2, \\pi_3)$，其中 $\\pi_i$ 是长期来看发现服务器处于状态 $i$ 的概率。", "solution": "设连续时间马尔可夫链的状态空间为 $S = \\{1, 2, 3\\}$，分别对应状态{空闲, 计算, 更新}。平稳分布是一个概率向量 $\\pi = (\\pi_1, \\pi_2, \\pi_3)$，它满足方程 $\\pi Q = \\mathbf{0}$ 和归一化条件 $\\sum_{i=1}^3 \\pi_i = 1$，其中 $Q$ 是该链的生成元矩阵。\n\n首先，我们构造生成元矩阵 $Q$。对于 $i \\neq j$，非对角元素 $q_{ij}$ 是从状态 $i$ 到状态 $j$ 的转移速率 $\\lambda_{ij}$。对角元素 $q_{ii}$ 由 $q_{ii} = -\\sum_{j \\neq i} q_{ij}$ 给出。根据问题描述，转移速率为：\n$q_{12} = 3\\lambda$\n$q_{13} = \\lambda$\n$q_{21} = 4\\lambda$\n$q_{23} = \\lambda$\n$q_{31} = 4\\lambda$\n$q_{32} = 0$ (没有从“更新”到“计算”的转换)\n所有其他未列出的非对角速率均为零。\n\n现在，我们计算对角元素：\n$q_{11} = -(q_{12} + q_{13}) = -(3\\lambda + \\lambda) = -4\\lambda$\n$q_{22} = -(q_{21} + q_{23}) = -(4\\lambda + \\lambda) = -5\\lambda$\n$q_{33} = -(q_{31} + q_{32}) = -(4\\lambda + 0) = -4\\lambda$\n\n因此，生成元矩阵 $Q$ 为：\n$$\nQ = \\begin{pmatrix}\n-4\\lambda  3\\lambda  \\lambda \\\\\n4\\lambda  -5\\lambda  \\lambda \\\\\n4\\lambda  0  -4\\lambda\n\\end{pmatrix}\n$$\n\n条件 $\\pi Q = \\mathbf{0}$ 产生一个线性方程组。由于 $\\lambda  0$，我们可以除以公因子 $\\lambda$。\n$$\n(\\pi_1, \\pi_2, \\pi_3) \\begin{pmatrix}\n-4  3  1 \\\\\n4  -5  1 \\\\\n4  0  -4\n\\end{pmatrix} = (0, 0, 0)\n$$\n这会得到以下对应于每一列的方程：\n1.  $-4\\pi_1 + 4\\pi_2 + 4\\pi_3 = 0$\n2.  $3\\pi_1 - 5\\pi_2 + 0\\pi_3 = 0$\n3.  $\\pi_1 + \\pi_2 - 4\\pi_3 = 0$\n\n这个包含三个未知数的三个方程组是线性相关的。我们可以使用其中任意两个方程以及归一化条件 $\\pi_1 + \\pi_2 + \\pi_3 = 1$。\n\n让我们使用方程(2)：\n$3\\pi_1 - 5\\pi_2 = 0 \\implies 5\\pi_2 = 3\\pi_1 \\implies \\pi_2 = \\frac{3}{5}\\pi_1$。\n\n接下来，让我们通过除以4来简化方程(1)：\n$-\\pi_1 + \\pi_2 + \\pi_3 = 0 \\implies \\pi_3 = \\pi_1 - \\pi_2$。\n现在，用 $\\pi_1$ 的表达式代入 $\\pi_2$：\n$\\pi_3 = \\pi_1 - \\frac{3}{5}\\pi_1 = \\frac{2}{5}\\pi_1$。\n\n我们现在已经将 $\\pi_2$ 和 $\\pi_3$ 都用 $\\pi_1$ 表示了。我们可以使用归一化条件来求解 $\\pi_1$：\n$\\pi_1 + \\pi_2 + \\pi_3 = 1$\n$\\pi_1 + \\frac{3}{5}\\pi_1 + \\frac{2}{5}\\pi_1 = 1$\n所有项乘以5以消去分母：\n$5\\pi_1 + 3\\pi_1 + 2\\pi_1 = 5$\n$10\\pi_1 = 5$\n$\\pi_1 = \\frac{5}{10} = \\frac{1}{2}$。\n\n现在我们可以求出 $\\pi_2$ 和 $\\pi_3$ 的值：\n$\\pi_2 = \\frac{3}{5}\\pi_1 = \\frac{3}{5} \\left(\\frac{1}{2}\\right) = \\frac{3}{10}$。\n$\\pi_3 = \\frac{2}{5}\\pi_1 = \\frac{2}{5} \\left(\\frac{1}{2}\\right) = \\frac{2}{10} = \\frac{1}{5}$。\n\n平稳分布向量为 $\\pi = (\\pi_1, \\pi_2, \\pi_3) = \\left(\\frac{1}{2}, \\frac{3}{10}, \\frac{1}{5}\\right)$。\n我们可以用方程组中的第三个方程来验证这个结果：$\\pi_1 + \\pi_2 - 4\\pi_3 = \\frac{1}{2} + \\frac{3}{10} - 4\\left(\\frac{1}{5}\\right) = \\frac{5}{10} + \\frac{3}{10} - \\frac{8}{10} = 0$，该等式成立。概率之和为 $\\frac{1}{2} + \\frac{3}{10} + \\frac{1}{5} = \\frac{5}{10} + \\frac{3}{10} + \\frac{2}{10} = \\frac{10}{10} = 1$。", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{1}{2}  \\frac{3}{10}  \\frac{1}{5} \\end{pmatrix}}$$", "id": "1333676"}, {"introduction": "许多现实世界中的系统可以被建模为“生灭过程”，其中状态仅代表某个总量的单步增加或减少。本题模拟了服务器上的用户会话数，是生灭过程的一个经典例子。对于这类过程，我们可以利用一个更简洁的方法——细致平衡方程——来求解稳态分布，这通常比直接求解完整的 $\\pi Q=0$ 系统要高效得多。通过这个练习，您将学会识别并利用这种重要的特殊结构。[@problem_id:1333674]", "problem": "考虑一个小型网络服务器的简化模型，该服务器最多可以处理两个并发用户会话。令 $N(t)$ 为时间 $t$ 的活动会话数。因此，会话数的状态空间为 $\\{0, 1, 2\\}$。\n\n新的会话请求以常数速率 $\\lambda  0$ 的泊松过程到达。如果服务器未满负荷（即，$N(t)  2$），则接受传入的请求，活动会话数增加一。如果服务器处于满负荷状态（$N(t) = 2$），任何新的传入请求都将被拒绝，并且对系统没有影响。\n\n每个活动会话的终止都与所有其他会话和新会话的到达相独立。单个会话终止的时间服从速率为 $\\mu  0$ 的指数分布。这意味着，如果有 $n$ 个活动会话，会话终止的总速率为 $n\\mu$。\n\n假设系统已经运行了很长时间并达到了统计平衡，请确定活动会话数的长期概率。令这些概率分别为 $p_0$、$p_1$ 和 $p_2$，对应于有 0、1 和 2 个会话的情况。\n\n您的答案应为行向量 $(p_0, p_1, p_2)$ 的形式，其中每个分量都是用参数 $\\lambda$ 和 $\\mu$ 表示的表达式。", "solution": "我们将 $\\{N(t)\\}$ 建模为状态空间 $\\{0,1,2\\}$ 上的一个连续时间生灭马尔可夫链。出生（到达）率为 $\\lambda_{0}=\\lambda$、$\\lambda_{1}=\\lambda$ 和 $\\lambda_{2}=0$（因满负荷而阻塞）。死亡（服务完成）率为 $\\mu_{1}=\\mu$ 和 $\\mu_{2}=2\\mu$。\n\n在稳态下，对于生灭链，细致平衡成立：\n$$\np_{n}\\lambda_{n}=p_{n+1}\\mu_{n+1}.\n$$\n应用此公式，\n$$\np_{0}\\lambda=p_{1}\\mu \\quad\\Rightarrow\\quad p_{1}=\\frac{\\lambda}{\\mu}\\,p_{0},\n$$\n$$\np_{1}\\lambda=p_{2}\\cdot 2\\mu \\quad\\Rightarrow\\quad p_{2}=\\frac{\\lambda}{2\\mu}\\,p_{1}=\\frac{\\lambda^{2}}{2\\mu^{2}}\\,p_{0}.\n$$\n\n使用归一化条件 $\\sum_{n=0}^{2}p_{n}=1$：\n$$\np_{0}+p_{1}+p_{2}=p_{0}\\left(1+\\frac{\\lambda}{\\mu}+\\frac{\\lambda^{2}}{2\\mu^{2}}\\right)=1,\n$$\n因此\n$$\np_{0}=\\frac{1}{1+\\frac{\\lambda}{\\mu}+\\frac{\\lambda^{2}}{2\\mu^{2}}}=\\frac{2\\mu^{2}}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}}.\n$$\n然后\n$$\np_{1}=\\frac{\\lambda}{\\mu}p_{0}=\\frac{2\\lambda\\mu}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}},\\qquad\np_{2}=\\frac{\\lambda^{2}}{2\\mu^{2}}p_{0}=\\frac{\\lambda^{2}}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}}.\n$$\n\n因此，长期概率向量为\n$$\n\\begin{pmatrix}\n\\frac{2\\mu^{2}}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}} \n\\frac{2\\lambda\\mu}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}} \n\\frac{\\lambda^{2}}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}}\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\\frac{2\\mu^{2}}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}}  \\frac{2\\lambda\\mu}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}}  \\frac{\\lambda^{2}}{2\\mu^{2}+2\\lambda\\mu+\\lambda^{2}}\\end{pmatrix}}$$", "id": "1333674"}, {"introduction": "在掌握了基本方法后，我们来挑战一个更具一般性的问题。真实系统通常包含大量状态，使得对具体数值的求解变得不切实际。本练习模拟了一个数据包在含有 $N$ 个节点的网络中传输的过程，其中 $N$ 可以是任意正整数。这里的关键不再是求解一个特例，而是通过识别并求解平衡方程中的递推关系，从而得出一个关于 $N$ 的通用解析表达式。这种技巧对于分析可扩展系统至关重要。[@problem_id:1333689]", "problem": "考虑一个数据包穿过线性通信网络的简化模型。该网络由一个标记为0的源节点和一系列标记为$1, 2, \\dots, N$的$N$个后续节点组成。数据包在该网络中的位置可以被建模为状态空间$S = \\{0, 1, \\dots, N\\}$上的连续时间马尔可夫链 (CTMC)。\n\n数据包移动的动态特性如下：\n- 从任何满足 $0 \\le i  N$ 的节点 $i$，数据包试图向前移动到下一个节点 $i+1$。此转移以恒定速率 $\\lambda  0$ 发生。\n- 从任何满足 $1 \\le i \\le N$ 的节点 $i$，数据包存在被丢弃的风险。如果被丢弃，数据包会立即从源节点0重新传输。这种“丢弃并返回”事件以恒定速率 $\\mu  0$ 发生。\n- 数据包不能从源节点0被丢弃。一旦数据包到达节点 $N$，它只能被丢弃并返回到节点0。\n\n假设该过程已经运行了很长时间并达到了稳态，确定在最终目的地节点 $N$ 找到该数据包的概率。您的答案应为包含 $N$、$\\lambda$ 和 $\\mu$ 的封闭形式解析表达式。", "solution": "将数据包的位置建模为状态空间 $S=\\{0,1,\\dots,N\\}$ 上的CTMC，其生成元矩阵的元素为：\n- 对于 $i=0$：$q_{0,1}=\\lambda$，$q_{0,0}=-\\lambda$。\n- 对于 $1 \\leq i \\leq N-1$：$q_{i,i+1}=\\lambda$，$q_{i,0}=\\mu$，$q_{i,i}=-(\\lambda+\\mu)$。\n- 对于 $i=N$：$q_{N,0}=\\mu$，$q_{N,N}=-\\mu$。\n\n令 $\\pi_i$ 表示状态 $i$ 的稳态概率。稳态条件要求 $\\pi Q=0$ 且 $\\sum_{i=0}^{N}\\pi_i=1$。写出每个状态的全局平衡方程可得：\n- 对于 $i=0$：流入等于流出，\n$$\n\\mu\\sum_{i=1}^{N}\\pi_i=\\lambda \\pi_0.\n$$\n- 对于 $1 \\leq i \\leq N-1$：进入状态 $i$ 的唯一流入来自 $i-1$，流出则去往 $0$ 和 $i+1$，\n$$\n\\lambda \\pi_{i-1}=(\\lambda+\\mu)\\pi_i.\n$$\n- 对于 $i=N$：唯一流入来自 $N-1$，流出则去往 $0$，\n$$\n\\lambda \\pi_{N-1}=\\mu \\pi_N.\n$$\n\n定义 $r=\\frac{\\lambda}{\\lambda+\\mu}$。对于 $1 \\leq i \\leq N-1$ 的递推关系得出\n$$\n\\pi_i=r^{i}\\pi_0.\n$$\n使用 $i=N$ 的平衡方程，\n$$\n\\pi_N=\\frac{\\lambda}{\\mu}\\pi_{N-1}=\\frac{\\lambda}{\\mu}r^{N-1}\\pi_0.\n$$\n\n使用 $\\sum_{i=0}^{N}\\pi_i=1$进行归一化：\n$$\n1=\\pi_0\\left(\\sum_{i=0}^{N-1}r^{i}+\\frac{\\lambda}{\\mu}r^{N-1}\\right)\n=\\pi_0\\left(\\frac{1-r^{N}}{1-r}+\\frac{\\lambda}{\\mu}r^{N-1}\\right).\n$$\n因为 $1-r=\\frac{\\mu}{\\lambda+\\mu}$ 且 $r=\\frac{\\lambda}{\\lambda+\\mu}$，\n$$\n\\frac{1-r^{N}}{1-r}=\\frac{\\lambda+\\mu}{\\mu}(1-r^{N}),\n$$\n所以\n$$\n1=\\pi_0\\left(\\frac{\\lambda+\\mu}{\\mu}(1-r^{N})+\\frac{\\lambda}{\\mu}r^{N-1}\\right)\n=\\pi_0\\cdot\\frac{\\lambda+\\mu}{\\mu},\n$$\n因为 $-(\\lambda+\\mu)r^{N}+\\lambda r^{N-1}=r^{N-1}\\big(-(\\lambda+\\mu)r+\\lambda\\big)=0$。因此\n$$\n\\pi_0=\\frac{\\mu}{\\lambda+\\mu}.\n$$\n所以\n$$\n\\pi_N=\\frac{\\lambda}{\\mu}r^{N-1}\\pi_0=\\frac{\\lambda}{\\lambda+\\mu}r^{N-1}=r^{N}=\\left(\\frac{\\lambda}{\\lambda+\\mu}\\right)^{N}.\n$$\n这就是在节点 $N$ 的稳态概率。", "answer": "$$\\boxed{\\left(\\frac{\\lambda}{\\lambda+\\mu}\\right)^{N}}$$", "id": "1333689"}]}
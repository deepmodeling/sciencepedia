{"hands_on_practices": [{"introduction": "这个问题是应用可选停止定理（OST）的经典范例，用于计算标准布朗运动首次离开一个区间所花费的期望时间。我们将构造一个鞅 $M_t = B_t^2 - t$，并严格地应用可选停止定理。这个练习的价值不仅在于得到最终答案，更在于学习如何严谨地处理定理的条件，例如验证停时的可积性，这是正确应用该定理的关键。[@problem_id:2989359]", "problem": "令 $\\{B_{t}\\}_{t \\ge 0}$ 为赋流概率空间 $(\\Omega,\\mathcal{F},\\{\\mathcal{F}_{t}\\}_{t \\ge 0},\\mathbb{P})$ 上的一个一维标准布朗运动 (BM)，该空间满足通常条件，且 $B_{0}=0$。对于一个固定的常数 $a0$，定义首次出时（离开开区间 $(-a,a)$ 的时间）为\n$$\n\\tau_{-a,a} \\coloneqq \\inf\\{t \\ge 0 : B_{t} \\notin (-a,a)\\}.\n$$\n仅使用布朗运动的基本性质，包括伊藤公式 (Itô’s formula) 和二次变差 $[B]_{t}=t$，按如下步骤进行：\n- 证明过程 $M_{t} \\coloneqq B_{t}^{2}-t$ 是一个 $\\{\\mathcal{F}_{t}\\}$-鞅。\n- 证明 $\\mathbb{P}(\\tau_{-a,a}  \\infty)=1$。\n- 严谨地证明 $\\tau_{-a,a}$ 的可积性，并通过对有界停时 $\\tau_{-a,a}\\wedge n$（其中 $n\\in\\mathbb{N}$）应用可选停止定理 (OST)，然后令 $n \\to \\infty$ 并证明所有极限步骤的合理性，来计算期望 $\\mathbb{E}[\\tau_{-a,a}]$。\n\n请将您的最终答案表示为关于 $a$ 的闭式解析表达式。不需要数值近似。", "solution": "审查问题陈述的有效性。\n\n### 步骤 1：提取已知条件\n- $\\{B_{t}\\}_{t \\ge 0}$ 是一个一维标准布朗运动 (BM)。\n- 赋流概率空间为 $(\\Omega,\\mathcal{F},\\{\\mathcal{F}_{t}\\}_{t \\ge 0},\\mathbb{P})$，满足通常条件。\n- $B_{0}=0$。\n- $a$ 是一个固定常数，且 $a0$。\n- 首次出时（离开 $(-a,a)$ 的时间）为 $\\tau_{-a,a} \\coloneqq \\inf\\{t \\ge 0 : B_{t} \\notin (-a,a)\\}.$\n- 布朗运动的二次变差为 $[B]_{t}=t$。\n- 任务：\n  1.  使用伊藤公式和 $[B]_{t}=t$ 证明 $M_{t} \\coloneqq B_{t}^{2}-t$ 是一个 $\\{\\mathcal{F}_{t}\\}$-鞅。\n  2.  证明 $\\mathbb{P}(\\tau_{-a,a}  \\infty)=1$。\n  3.  证明 $\\tau_{-a,a}$ 的可积性，并通过对有界停时 $\\tau_{-a,a}\\wedge n$（其中 $n\\in\\mathbb{N}$）应用可选停止定理 (OST)，然后令 $n \\to \\infty$，来计算 $\\mathbb{E}[\\tau_{-a,a}]$。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学依据充分：** 该问题是随机分析中的一个标准练习，涉及布朗运动、鞅和停时的基本性质。所有概念和前提在现代概率论中都是成熟的。\n- **良定的：** 该问题提供了执行所需证明和计算的所有必要定义和条件。任务明确，可得出一个唯一的、明确定义的结果。\n- **客观性：** 该问题以精确的数学语言陈述，没有歧义或主观因素。\n\n### 步骤 3：结论与行动\n问题是有效的。将提供一个完整的解答。\n\n***\n\n我们将按所给顺序解决这三个任务。令 $\\tau = \\tau_{-a,a}$。\n\n**1. 证明 $M_{t} \\coloneqq B_{t}^{2}-t$ 是一个鞅**\n\n要证明 $M_t$ 是关于域流 $\\{\\mathcal{F}_t\\}_{t \\ge 0}$ 的一个鞅，我们必须证明三个性质：\ni. $M_t$ 适应于 $\\{\\mathcal{F}_t\\}$。\nii. $M_t$ 是可积的，即对所有 $t \\ge 0$，有 $\\mathbb{E}[|M_t|]  \\infty$。\niii. 对于所有 $s \\le t$，有 $\\mathbb{E}[M_t | \\mathcal{F}_s] = M_s$。\n\ni. 适应性：由于 $\\{B_t\\}_{t \\ge 0}$ 是一个 $\\{\\mathcal{F}_t\\}$-适应过程，因此对于每个 $t \\ge 0$，$B_t^2$ 也是 $\\mathcal{F}_t$-适应的。函数 $g(t)=t$ 是确定性的，因此也是适应的。所以，它们的差 $M_t = B_t^2 - t$ 是 $\\mathcal{F}_t$-适应的。\n\nii. 可积性：对于任何 $t \\ge 0$，我们有 $\\mathbb{E}[|M_t|] = \\mathbb{E}[|B_t^2 - t|] \\le \\mathbb{E}[B_t^2] + |t|$。由于 $B_t$ 是标准布朗运动，$B_t \\sim N(0, t)$，所以其二阶矩为 $\\mathbb{E}[B_t^2] = \\text{Var}(B_t) + (\\mathbb{E}[B_t])^2 = t + 0^2 = t$。因此，$\\mathbb{E}[|M_t|] \\le t + t = 2t$。对于任何有限的 $t$，$2t  \\infty$，所以 $M_t$ 是可积的。\n\niii. 鞅性质：我们将伊藤公式应用于函数 $f(x) = x^2$ 和过程 $B_t$。我们有 $f'(x) = 2x$ 和 $f''(x) = 2$。伊藤公式表明：\n$$\nf(B_t) - f(B_0) = \\int_0^t f'(B_s) dB_s + \\frac{1}{2} \\int_0^t f''(B_s) d[B]_s\n$$\n代入 $f(x)=x^2$ 及其导数，并使用给定的条件 $B_0=0$ 和 $[B]_t=t$：\n$$\nB_t^2 - B_0^2 = \\int_0^t 2B_s dB_s + \\frac{1}{2} \\int_0^t 2 \\, d[B]_s\n$$\n$$\nB_t^2 - 0 = \\int_0^t 2B_s dB_s + \\int_0^t ds\n$$\n$$\nB_t^2 = 2\\int_0^t B_s dB_s + t\n$$\n整理各项，我们得到 $M_t$ 的表达式：\n$$\nM_t = B_t^2 - t = 2\\int_0^t B_s dB_s\n$$\n右侧是一个伊藤积分。如果被积函数 $H_s$ 是一个适应过程且满足 $\\mathbb{E}[\\int_0^t H_s^2 ds]  \\infty$，那么过程 $X_t = \\int_0^t H_s dB_s$ 是一个鞅。在这里，被积函数是 $H_s = 2B_s$，它是适应的。我们检查平方可积条件：\n$$\n\\mathbb{E}\\left[\\int_0^t (2B_s)^2 ds\\right] = 4 \\int_0^t \\mathbb{E}[B_s^2] ds = 4 \\int_0^t s \\, ds = 4 \\left[\\frac{s^2}{2}\\right]_0^t = 2t^2\n$$\n由于对于所有有限的 $t$，$2t^2  \\infty$，过程 $M_t = 2\\int_0^t B_s dB_s$ 是一个真鞅，而不仅仅是局部鞅。这便完成了 $M_t = B_t^2-t$ 是鞅的证明。\n\n**2. 证明 $\\mathbb{P}(\\tau  \\infty) = 1$**\n\n事件 $\\{\\tau > t\\}$ 是指布朗运动在整个时间区间 $[0,t]$ 内都停留在区间 $(-a,a)$ 内的事件。这意味着在时刻 $t$，其位置必须在 $(-a,a)$ 内。形式上：\n$$\n\\{\\tau > t\\} = \\{\\sup_{0 \\le s \\le t} |B_s|  a\\} \\implies \\{|B_t|  a\\}\n$$\n因此，第一个事件的概率小于或等于第二个事件的概率：\n$$\n\\mathbb{P}(\\tau > t) \\le \\mathbb{P}(|B_t|  a)\n$$\n对于标准布朗运动，$B_t \\sim N(0, t)$，所以 $B_t/\\sqrt{t}$ 是一个标准正态随机变量，$Z \\sim N(0,1)$。\n$$\n\\mathbb{P}(|B_t|  a) = \\mathbb{P}(-a  B_t  a) = \\mathbb{P}\\left(-\\frac{a}{\\sqrt{t}}  \\frac{B_t}{\\sqrt{t}}  \\frac{a}{\\sqrt{t}}\\right) = \\mathbb{P}\\left(|Z|  \\frac{a}{\\sqrt{t}}\\right)\n$$\n当 $t \\to \\infty$ 时，$a/\\sqrt{t} \\to 0$。由于标准正态变量的累积分布函数是连续的，所以 $Z$ 位于一个收缩到一点的区间内的概率为零：\n$$\n\\lim_{t \\to \\infty} \\mathbb{P}\\left(|Z|  \\frac{a}{\\sqrt{t}}\\right) = \\mathbb{P}(|Z| \\le 0) = 0\n$$\n根据夹逼定理，由于 $0 \\le \\mathbb{P}(\\tau > t) \\le \\mathbb{P}(|B_t|  a)$，我们有：\n$$\n\\lim_{t \\to \\infty} \\mathbb{P}(\\tau > t) = 0\n$$\n过程永不离开的事件是 $\\{\\tau = \\infty\\}$。这可以写成一个递减事件序列的交集：$\\{\\tau = \\infty\\} = \\bigcap_{n=1}^\\infty \\{\\tau > n\\}$。根据概率测度对递减事件的连续性：\n$$\n\\mathbb{P}(\\tau = \\infty) = \\mathbb{P}\\left(\\bigcap_{n=1}^\\infty \\{\\tau > n\\}\\right) = \\lim_{n\\to\\infty} \\mathbb{P}(\\tau > n) = 0\n$$\n因此，过程在有限时间内离开的概率是 $\\mathbb{P}(\\tau  \\infty) = 1 - \\mathbb{P}(\\tau = \\infty) = 1$。\n\n**3. $\\mathbb{E}[\\tau]$ 的证明与计算**\n\n我们遵循指定的方法，使用停时序列 $\\tau_n \\coloneqq \\tau \\wedge n$（其中 $n \\in \\mathbb{N}$）。\n\n对于任何 $n \\in \\mathbb{N}$，停时 $\\tau_n$ 的上界为 $n$。我们可以对鞅 $M_t = B_t^2 - t$ 和有界停时 $\\tau_n$ 应用可选停止定理。这给出：\n$$\n\\mathbb{E}[M_{\\tau_n}] = \\mathbb{E}[M_0]\n$$\n由于 $B_0=0$，我们有 $M_0 = B_0^2 - 0 = 0$。所以，$\\mathbb{E}[M_{\\tau_n}] = 0$。\n代入 $M_t$ 的定义，我们得到 $\\mathbb{E}[B_{\\tau_n}^2 - \\tau_n] = 0$。根据期望的线性性质，可得：\n$$\n\\mathbb{E}[\\tau_n] = \\mathbb{E}[B_{\\tau_n}^2]\n$$\n该等式对所有 $n \\in \\mathbb{N}$ 成立。我们现在取 $n \\to \\infty$ 的极限。\n\n考虑左侧 $\\mathbb{E}[\\tau_n]$。随机变量序列 $\\{\\tau_n\\}_{n\\in\\mathbb{N}}$ 是非负且非递减的，因为 $\\tau_n = \\min(\\tau, n) \\le \\min(\\tau, n+1) = \\tau_{n+1}$。如第 2 部分所示，$\\tau  \\infty$ 几乎必然，所以 $\\lim_{n\\to\\infty} \\tau_n = \\tau$ 几乎必然。根据单调收敛定理，我们可以交换极限和期望：\n$$\n\\lim_{n\\to\\infty} \\mathbb{E}[\\tau_n] = \\mathbb{E}[\\lim_{n\\to\\infty} \\tau_n] = \\mathbb{E}[\\tau]\n$$\n这一步也意味着，如果右侧的极限是有限的，那么 $\\mathbb{E}[\\tau]$ 就是有限的，从而证明了 $\\tau$ 的可积性。\n\n考虑右侧 $\\mathbb{E}[B_{\\tau_n}^2]$。我们分析随机变量 $B_{\\tau_n}^2$。\n根据 $\\tau$ 的定义，对于所有 $s  \\tau$，我们有 $|B_s|  a$。\n- 如果一条路径在时刻 $n$ 之前离开（即 $\\tau \\le n$），那么 $\\tau_n = \\tau$。根据布朗路径的连续性，有 $|B_{\\tau_n}| = |B_\\tau| = a$。\n- 如果一条路径在时刻 $n$ 之前没有离开（即 $\\tau > n$），那么 $\\tau_n = n$，并且 $|B_{\\tau_n}| = |B_n|  a$。\n在两种情况下，我们都有 $|B_{\\tau_n}| \\le a$。这意味着随机变量序列 $\\{B_{\\tau_n}^2\\}_{n\\in\\mathbb{N}}$ 被 $a^2$ 一致有界。\n\n当 $n \\to \\infty$ 时，我们有 $\\tau_n \\to \\tau$ 几乎必然。由于布朗运动路径几乎必然是连续的，这意味着 $B_{\\tau_n} \\to B_\\tau$ 几乎必然。因此，$B_{\\tau_n}^2 \\to B_\\tau^2$ 几乎必然。根据在停时的连续性，我们有 $|B_\\tau| = a$ 几乎必然（因为 $\\mathbb{P}(\\tau  \\infty)=1$），所以 $B_\\tau^2 = a^2$ 几乎必然。\n\n我们有一个随机变量序列 $\\{B_{\\tau_n}^2\\}$，它几乎必然收敛于常数 $a^2$，并且被可积随机变量 $a^2$ 控制（因为 $\\mathbb{E}[a^2] = a^2  \\infty$）。根据控制收敛定理（或更具体地说，有界收敛定理），我们可以交换极限和期望：\n$$\n\\lim_{n\\to\\infty} \\mathbb{E}[B_{\\tau_n}^2] = \\mathbb{E}[\\lim_{n\\to\\infty} B_{\\tau_n}^2] = \\mathbb{E}[a^2] = a^2\n$$\n令 $\\mathbb{E}[\\tau_n] = \\mathbb{E}[B_{\\tau_n}^2]$ 等式两边的极限相等：\n$$\n\\mathbb{E}[\\tau] = a^2\n$$\n由于 $a^2$ 是一个有限值，$\\tau$ 的期望是有限的，因此 $\\tau$ 是一个可积随机变量。期望的最终表达式是 $a^2$。", "answer": "$$\n\\boxed{a^{2}}\n$$", "id": "2989359"}, {"introduction": "鞅方法不仅能计算期望值，还能巧妙地用来计算概率。这个问题是经典“赌徒破产问题”的一个变体，它演示了如何为一个离散时间过程构建一个鞅，并利用可选停止定理来计算过程在一个位置（惩罚）之前到达另一个位置（目标）的概率。这个练习的核心是体会寻找和构造“正确”鞅的巧妙思想，这是将理论应用于实践的重要一步。[@problem_id:1298885]", "problem": "考虑一副有 $N$ 张牌的牌堆，其中有一张被特别指定为“目标”牌。在每个时间步，牌堆按照以下程序进行调整：\n1. 从整副 $N$ 张牌中均匀随机地选择一张牌（即，每张牌被选中的概率为 $1/N$）。\n2. 如果选中的是目标牌本身，则将目标牌移动到牌堆顶部（位置 1）。\n3. 如果选中的不是目标牌，且其当前位置在目标牌*之上*，则目标牌向下移动一个位置（例如，从位置 $p$ 移动到 $p+1$）。\n4. 如果选中的不是目标牌，且其当前位置在目标牌*之下*，则目标牌的位置保持不变。\n\n所有其他牌在保持其相对顺序的同时，根据需要进行移动以适应目标牌的移动。位置从 $1$（顶部）到 $N$（底部）编号。\n\n该过程开始时，目标牌位于初始位置 $p_0$。当目标牌的位置首次达到“目标”位置 $k$ 或“惩罚”位置 1 时，过程停止。\n\n给定整数参数满足 $1  p_0  k \\le N$，求目标牌在到达惩罚位置 1 之前到达目标位置 $k$ 的概率。请用 $p_0$ 和 $k$ 的函数表示你的答案。", "solution": "令 $f(p)$ 表示从目标牌在位置 $p$ 开始，过程在到达惩罚位置 $1$ 之前到达目标位置 $k$ 的概率。我们有边界条件 $f(1)=0$ 和 $f(k)=1$。对于 $2 \\leq p \\leq k-1$，我们对随机选牌的结果使用全概率定律进行第一步分析。\n\n从位置 $p$ 开始：\n- 有 $\\frac{1}{N}$ 的概率选中目标牌，它被移动到位置 $1$，导致立即在惩罚位置被吸收，贡献为 $\\frac{1}{N}\\cdot f(1)=0$。\n- 有 $\\frac{p-1}{N}$ 的概率选中一张在目标牌之上的牌，因此目标牌移动到 $p+1$，贡献为 $\\frac{p-1}{N} f(p+1)$。\n- 有 $\\frac{N-p}{N}$ 的概率选中一张在目标牌之下的牌，因此位置保持为 $p$，贡献为 $\\frac{N-p}{N} f(p)$。\n\n因此，对于 $2 \\leq p \\leq k-1$，\n$$\nf(p) \\;=\\; \\frac{p-1}{N} f(p+1) \\;+\\; \\frac{N-p}{N} f(p).\n$$\n整理得，\n$$\nf(p) - \\frac{N-p}{N} f(p) \\;=\\; \\frac{p-1}{N} f(p+1)\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{p}{N} f(p) \\;=\\; \\frac{p-1}{N} f(p+1)\n\\;\\;\\Longrightarrow\\;\\;\np\\, f(p) \\;=\\; (p-1)\\, f(p+1).\n$$\n该递推关系得出\n$$\nf(p+1) \\;=\\; \\frac{p}{p-1}\\, f(p),\n$$\n并且通过归纳法，\n$$\nf(p) \\;=\\; (p-1)\\, f(2), \\quad \\text{for } 2 \\leq p \\leq k.\n$$\n代入边界条件 $f(k)=1$ 得到\n$$\n1 \\;=\\; f(k) \\;=\\; (k-1)\\, f(2) \\;\\;\\Longrightarrow\\;\\; f(2) \\;=\\; \\frac{1}{k-1}.\n$$\n因此，\n$$\nf(p) \\;=\\; \\frac{p-1}{k-1}, \\quad \\text{for } 2 \\leq p \\leq k.\n$$\n对于满足 $1  p_{0}  k$ 的初始位置 $p_{0}$，所求概率为\n$$\nf(p_{0}) \\;=\\; \\frac{p_{0}-1}{k-1}.\n$$", "answer": "$$\\boxed{\\frac{p_{0}-1}{k-1}}$$", "id": "1298885"}, {"introduction": "当随机过程的边界随时间移动时，问题似乎变得复杂。本练习探讨了布朗运动首次触及一个线性移动边界的期望时间，这是一个更具挑战性的场景。解决这个问题的关键技巧在于“变换视角”：通过定义一个新的、带有漂移的布朗运动，我们将移动边界问题转化为了一个我们已经熟悉的、触及固定边界的问题。这个例子展示了在随机过程中，巧妙的变换如何能极大地简化一个看似棘手的问题。[@problem_id:1298873]", "problem": "设 $B_t$ 为从原点出发的标准一维布朗运动，即 $B_0 = 0$。考虑停时 $\\tau$，其定义为过程 $B_t$ 首次触及一个线性移动边界的时刻。该边界由方程 $y(t) = a + bt$ 描述，其中 $a$ 和 $b$ 为实值常数。因此，该停时由 $\\tau = \\inf\\{t \\ge 0 : B_t = a + bt\\}$ 给出。\n\n假设参数满足条件 $a  0$ 和 $b  0$，求该停时的期望值 $E[\\tau]$。最终答案应为一个用 $a$ 和 $b$ 表示的符号表达式。", "solution": "定义 $X_{t} = B_{t} - b t$。则 $X_{t}$ 是一个带常数漂移 $\\mu = -b$ 和单位扩散系数的布朗运动，从 $X_{0} = 0$ 开始，即 $X_{t} = \\mu t + B_{t}$。停时 $\\tau = \\inf\\{t \\ge 0 : B_{t} = a + b t\\}$ 等价于 $X_{t}$ 首次达到常数水平 $a$ 的时刻：\n$$\n\\tau = \\inf\\{t \\ge 0 : X_{t} = a\\}。\n$$\n在给定条件 $a  0$ 和 $b  0$ 下，我们有 $\\mu = -b  0$，因此 $X_{t}$ 漂移至 $+\\infty$ 并在有限时间内几乎必然地达到 $a$。\n\n设 $u(x) = \\mathbb{E}_{x}[\\tau]$ 表示从 $X_{0} = x$ 出发的扩散过程 $X_{t}$ 达到水平 $a$ 的期望首达时，其生成元为\n$$\n\\mathcal{L} f(x) = \\frac{1}{2} f''(x) + \\mu f'(x)。\n$$\n函数 $u$ 满足如下的边值问题\n$$\n\\frac{1}{2} u''(x) + \\mu u'(x) = -1 \\quad \\text{for } x  a,\\qquad u(a) = 0,\n$$\n以及当 $x \\to -\\infty$ 时 $u$ 不呈指数增长的条件。\n\n令 $g(x) = u'(x)$。则\n$$\n\\frac{1}{2} g'(x) + \\mu g(x) = -1 \\quad \\Longleftrightarrow \\quad g'(x) + 2 \\mu g(x) = -2。\n$$\n使用积分因子 $\\exp(2 \\mu x)$，\n$$\n\\frac{d}{dx}\\big(g(x)\\exp(2 \\mu x)\\big) = -2 \\exp(2 \\mu x),\n$$\n积分可得\n$$\ng(x)\\exp(2 \\mu x) = -\\int 2 \\exp(2 \\mu x)\\,dx + C = -\\frac{1}{\\mu}\\exp(2 \\mu x) + C,\n$$\n因此\n$$\nu'(x) = g(x) = -\\frac{1}{\\mu} + C \\exp(-2 \\mu x)。\n$$\n再次积分，\n$$\nu(x) = -\\frac{x}{\\mu} - \\frac{C}{2 \\mu}\\exp(-2 \\mu x) + D。\n$$\n为了在 $\\mu  0$ 且 $x \\to -\\infty$ 时避免指数爆炸，我们必须有 $C=0$。施加边界条件 $u(a) = 0$ 可得\n$$\n0 = -\\frac{a}{\\mu} + D \\quad \\Longrightarrow \\quad D = \\frac{a}{\\mu}。\n$$\n因此，\n$$\nu(0) = \\frac{a}{\\mu}。\n$$\n因为在我们的设定中 $X_{0} = 0$，所求的期望为\n$$\n\\mathbb{E}[\\tau] = u(0) = \\frac{a}{\\mu} = \\frac{a}{-b} = -\\frac{a}{b}。\n$$\n由于 $a  0$ 且 $b  0$，此值为有限正数。", "answer": "$$\\boxed{-\\frac{a}{b}}$$", "id": "1298873"}]}
{"hands_on_practices": [{"introduction": "我们通常使用 M/M/1 模型来根据已知的到达率和服务率预测系统性能。然而，我们也可以反向思考。这个练习将挑战你从一个观察到的性能指标关系中，推导出系统的基本特征——交通强度，从而加深你对这些指标如何相互关联的理解。[@problem_id:1341679]", "problem": "考虑一个单服务器服务设施，例如处理数据包的网络路由器，该设施可以被建模为一个 M/M/1 排队系统。在此模型中，顾客（或数据包）的到达遵循泊松过程，服务时间呈指数分布。该系统在稳态下运行。对该系统的分析揭示了其关键性能指标之间的一个特定关系：整个系统中的长期平均顾客数（包括在队列中等待的和正在接受服务的）恰好是当前正在接受服务的长期平均顾客数的四倍。\n\n根据这一观察，确定该系统的流量强度 $\\rho$ 的值。流量强度是一个无量纲的度量，定义为平均到达率与平均服务率之比。", "solution": "设到达率为 $\\lambda$，服务率为 $\\mu$，流量强度为 $\\rho=\\frac{\\lambda}{\\mu}$，且对于稳态，有 $0 \\le \\rho  1$。在一个 M/M/1 排队模型中，系统中的稳态平均顾客数（队列加服务）为\n$$\nL=\\frac{\\rho}{1-\\rho}.\n$$\n服务器可以处于空闲状态（0个在服务中）或繁忙状态（1个在服务中）。长期平均服务中顾客数等于服务器繁忙的概率。在稳态下，流量平衡意味着 $\\mu \\times \\text{(繁忙时间比例)}=\\lambda$，因此繁忙时间比例为 $\\rho$。因此，长期平均服务中顾客数为\n$$\nL_{\\text{service}}=\\rho.\n$$\n给定的关系表明 $L=4\\,L_{\\text{service}}$，所以\n$$\n\\frac{\\rho}{1-\\rho}=4\\rho.\n$$\n对于 $\\rho>0$，两边同除以 $\\rho$ 得到\n$$\n\\frac{1}{1-\\rho}=4 \\quad \\Longrightarrow \\quad 1=4(1-\\rho)\\quad \\Longrightarrow \\quad 4\\rho=3 \\quad \\Longrightarrow \\quad \\rho=\\frac{3}{4}.\n$$\n（注：$\\rho=0$ 也平凡地满足该方程，但对应于无到达的退化情况；非平凡的稳态解是 $\\rho=\\frac{3}{4}$。）该值满足 $\\rho1$，因此是有效的。", "answer": "$$\\boxed{\\frac{3}{4}}$$", "id": "1341679"}, {"introduction": "在探索了排队系统内部的理论关系之后，让我们将这些概念应用于一个具体场景。这个问题要求你为一个假设的太空港口计算关键性能指标，展示 M/M/1 模型在实践中如何用于容量规划和性能评估。通过这个练习，你将把抽象的公式转化为对现实世界运营（如平均等待时间和排队长度）的可量化预测。[@problem_id:1341740]", "problem": "终端港（Port Terminus）是一个新勘探星系中的一个小型但繁忙的贸易前哨。它拥有一个用于星际货船的单一自动化对接港。对交通日志的分析表明，寻求对接的货船到达过程遵循泊松过程，平均速率为每24小时5艘船。自动化系统引导船只入港、完成货物转移并为下一艘船清空港口所需的时间呈指数分布，该港口平均每24小时能够处理8艘船。\n\n假设系统已经运行了足够长的时间以达到稳态，请确定两个值：在轨道上等待使用对接港的货船的平均数量，以及一艘货船在对接过程开始前在轨道上等待的平均时间。\n\n你应该报告平均货船数量（四舍五入到三位有效数字）和以小时为单位的平均等待时间。", "solution": "到达遵循泊松过程，到达率为每天 $\\lambda=5$ 艘，服务时间呈指数分布，服务率为每天 $\\mu=8$ 艘。这是一个 $M/M/1$ 排队模型。交通强度为 $\\rho=\\frac{\\lambda}{\\mu}=\\frac{5}{8}1$，因此稳态存在。\n\n对于一个 $M/M/1$ 排队模型，队列中的平均数量（不包括正在接受服务的个体）为\n$$\nL_{q}=\\frac{\\rho^{2}}{1-\\rho}=\\frac{\\lambda^{2}}{\\mu(\\mu-\\lambda)}.\n$$\n代入 $\\lambda=\\frac{5}{\\text{天}}$ 和 $\\mu=\\frac{8}{\\text{天}}$，\n$$\nL_{q}=\\frac{\\left(\\frac{5}{8}\\right)^{2}}{1-\\frac{5}{8}}=\\frac{\\frac{25}{64}}{\\frac{3}{8}}=\\frac{25}{24}\\approx 1.041666\\ldots,\n$$\n四舍五入到三位有效数字为 $1.04$。\n\n队列中的平均等待时间为\n$$\nW_{q}=\\frac{L_{q}}{\\lambda}=\\frac{\\rho}{\\mu-\\lambda}.\n$$\n首先使用天作为时间单位，\n$$\nW_{q}=\\frac{\\frac{25}{24}}{5}=\\frac{25}{120}=\\frac{5}{24}\\ \\text{天}.\n$$\n将其乘以 24 小时/天，转换为小时，得到\n$$\nW_{q}=\\frac{5}{24}\\times 24=5\\ \\text{小时}.\n$$\n因此，平均等待数量为 $1.04$（精确到三位有效数字），平均等待时间为 $5$ 小时。", "answer": "$$\\boxed{\\begin{pmatrix}1.04  5\\end{pmatrix}}$$", "id": "1341740"}, {"introduction": "虽然平均队长等平均值很有用，但它们并不能完全描绘系统行为的全貌。一个系统的稳定性和用户体验还取决于其波动性。这个练习将指导你计算系统中顾客数量的方差，为我们提供一个衡量队列波动和可预测性的关键指标。理解方差对于管理服务水平和为潜在的系统拥堵做准备至关重要。[@problem_id:1341742]", "problem": "一家网络服务提供商运营一台服务器来处理传入的应用程序编程接口（API）请求。这些请求根据泊松过程独立到达，平均速率为每秒 $\\lambda$ 个请求。服务器以先到先得的方式一次处理一个请求。处理单个请求所需的时间是一个独立同分布的随机变量，遵循指数分布，平均服务时间为 $1/\\mu$ 秒。\n\n该系统已经运行了很长时间，并已达到统计平衡。只有当服务器处理请求的平均速度快于请求到达的平均速度时，这种稳态才可能存在，这对应于条件 $\\lambda  \\mu$。流量强度是一个衡量服务器利用率的无量纲指标，定义为 $\\rho = \\lambda / \\mu$。\n\n设 $N$ 为稳态下系统中总请求数的随机变量（即正在被服务的请求加上队列中等待的所有请求）。计算 $N$ 的方差。将您的答案表示为仅含流量强度 $\\rho$ 的闭式解析表达式。", "solution": "在稳态且 $\\lambda\\mu$ 的情况下，M/M/1 排队长度过程是一个生灭链，其出生率为 $\\lambda$，死亡率为 $\\mu$。对于平稳概率 $\\pi_{n}=\\Pr\\{N=n\\}$，其细致平衡方程为\n$$\n\\lambda \\pi_{n}=\\mu \\pi_{n+1} \\quad \\text{对所有 } n\\geq 0,\n$$\n由此可得递推关系 $\\pi_{n+1}=\\rho\\,\\pi_{n}$，其中 $\\rho=\\lambda/\\mu$。求解可得 $\\pi_{n}=\\pi_{0}\\rho^{n}$。进行归一化，\n$$\n\\sum_{n=0}^{\\infty}\\pi_{n}=\\pi_{0}\\sum_{n=0}^{\\infty}\\rho^{n}=\\pi_{0}\\frac{1}{1-\\rho}=1 \\quad \\text{对于 } |\\rho|1,\n$$\n因此 $\\pi_{0}=1-\\rho$ 且\n$$\n\\pi_{n}=(1-\\rho)\\rho^{n}, \\quad n=0,1,2,\\ldots.\n$$\n因此 $N$ 服从参数为 $1-\\rho$ 的几何分布，其取值范围为 $\\{0,1,2,\\ldots\\}$。\n\n为了计算矩，使用在 $|x|1$ 时成立的幂级数恒等式：\n$$\n\\sum_{n=0}^{\\infty}x^{n}=\\frac{1}{1-x},\\quad \\sum_{n=0}^{\\infty}n x^{n}=\\frac{x}{(1-x)^{2}},\\quad \\sum_{n=0}^{\\infty}n^{2}x^{n}=\\frac{x(1+x)}{(1-x)^{3}}.\n$$\n因此，\n$$\n\\mathbb{E}[N]=\\sum_{n=0}^{\\infty}n\\,(1-\\rho)\\rho^{n}=(1-\\rho)\\frac{\\rho}{(1-\\rho)^{2}}=\\frac{\\rho}{1-\\rho},\n$$\n以及\n$$\n\\mathbb{E}[N^{2}]=\\sum_{n=0}^{\\infty}n^{2}\\,(1-\\rho)\\rho^{n}=(1-\\rho)\\frac{\\rho(1+\\rho)}{(1-\\rho)^{3}}=\\frac{\\rho(1+\\rho)}{(1-\\rho)^{2}}.\n$$\n因此方差为\n$$\n\\operatorname{Var}(N)=\\mathbb{E}[N^{2}]-(\\mathbb{E}[N])^{2}=\\frac{\\rho(1+\\rho)}{(1-\\rho)^{2}}-\\frac{\\rho^{2}}{(1-\\rho)^{2}}=\\frac{\\rho}{(1-\\rho)^{2}}.\n$$\n该表达式仅取决于流量强度 $\\rho$，且在 $0\\leq \\rho1$ 时有效。", "answer": "$$\\boxed{\\frac{\\rho}{\\left(1-\\rho\\right)^{2}}}$$", "id": "1341742"}]}
{"hands_on_practices": [{"introduction": "粒子滤波器的第一步是预测，即根据系统的动态模型来传播每个粒子。每个粒子都代表一个关于系统状态的假设，我们必须在考虑任何新的测量数据之前，将这些假设向前推进。本练习 [@problem_id:1322969] 模拟了一个坠落物体的这一过程，它将清晰地展示我们如何更新一系列信念，为后续的权重更新做准备。", "problem": "一个航空航天工程团队正在为一种设计用于从高空气球上投放的小型传感器探测器开发一种状态估计算法。他们使用一种涉及多个计算“粒子”的仿真技术，其中每个粒子代表对探测器真实状态的一个假设。探测器的状态由其垂直位置 $y$（向上为正）和垂直速度 $v_y$ 定义。\n\n在时间 $t=0$ 时，系统用一组三个粒子进行初始化。它们的初始状态 $(y_0, v_{y,0})$ 如下：\n- 粒子 1：$(100.0 \\, \\text{m}, 0.5 \\, \\text{m/s})$\n- 粒子 2：$(100.5 \\, \\text{m}, -0.2 \\, \\text{m/s})$\n- 粒子 3：$(99.8 \\, \\text{m}, 0.1 \\, \\text{m/s})$\n\n每个粒子的状态使用一个离散模型随时间向前传播，该模型考虑了重力和小的随机扰动。对于一个时间步长 $\\Delta t$，在时间步 $k$ 的状态 $(y_k, v_{y,k})$ 根据以下方程演变为在时间步 $k+1$ 的状态 $(y_{k+1}, v_{y,k+1})$：\n$$y_{k+1} = y_k + v_{y,k} \\Delta t - \\frac{1}{2} g (\\Delta t)^2 + w_y$$\n$$v_{y,k+1} = v_{y,k} - g \\Delta t + w_v$$\n其中 $g$ 是重力加速度，$w_y$ 和 $w_v$ 是该时间步长的随机扰动。\n\n对于从 $t=0$ 到 $t=\\Delta t=0.1 \\, \\text{s}$ 的第一个时间步长，团队使用常数 $g = 9.81 \\, \\text{m/s}^2$。在此步骤中为每个粒子采样的具体扰动值如下：\n- 对于粒子 1：$(w_y, w_v) = (0.02 \\, \\text{m}, 0.05 \\, \\text{m/s})$\n- 对于粒子 2：$(w_y, w_v) = (-0.01 \\, \\text{m}, -0.03 \\, \\text{m/s})$\n- 对于粒子 3：$(w_y, w_v) = (0.03 \\, \\text{m}, 0.01 \\, \\text{m/s})$\n\n探测器在给定时间的总体位置估计取为所有粒子位置的算术平均值。计算在时间 $t = \\Delta t$ 时的这个平均垂直位置。最终答案以米表示，并四舍五入到四位有效数字。", "solution": "我们使用以下公式在区间 $\\Delta t$ 上传播每个粒子的垂直位置\n$$\ny_{k+1}=y_{k}+v_{y,k}\\,\\Delta t-\\frac{1}{2}g\\,(\\Delta t)^{2}+w_{y}.\n$$\n在此步骤中，$\\Delta t=0.1\\,\\text{s}$ 且 $g=9.81\\,\\text{m/s}^{2}$。所有粒子共有的重力位移项是\n$$\n\\frac{1}{2}g(\\Delta t)^{2}=\\frac{1}{2}\\cdot 9.81\\cdot (0.1)^{2}=0.04905\\,\\text{m}.\n$$\n因此，对于每个粒子 $j$，更新公式变为\n$$\ny_{1}^{(j)}=y_{0}^{(j)}+v_{y,0}^{(j)}\\,(0.1)-0.04905+w_{y}^{(j)}.\n$$\n分别计算：\n$$\n\\begin{aligned}\n\\text{粒子 1:}\\quad y_{1}^{(1)}=100.0+0.5\\cdot 0.1-0.04905+0.02=100.02095\\,\\text{m},\\\\\n\\text{粒子 2:}\\quad y_{1}^{(2)}=100.5+(-0.2)\\cdot 0.1-0.04905-0.01=100.42095\\,\\text{m},\\\\\n\\text{粒子 3:}\\quad y_{1}^{(3)}=99.8+0.1\\cdot 0.1-0.04905+0.03=99.79095\\,\\text{m}.\n\\end{aligned}\n$$\n在 $t=\\Delta t$ 时位置的算术平均值是\n$$\n\\bar{y}_{1}=\\frac{y_{1}^{(1)}+y_{1}^{(2)}+y_{1}^{(3)}}{3}=\\frac{100.02095+100.42095+99.79095}{3}=\\frac{300.23285}{3}=100.077616\\ldots\\,\\text{m}.\n$$\n四舍五入到四位有效数字得到 $100.1\\,\\text{m}$。", "answer": "$$\\boxed{100.1}$$", "id": "1322969"}, {"introduction": "在预测了粒子的新位置后，下一步是根据传感器的实际测量结果来评估这些预测。这一步通过为每个粒子分配一个“重要性权重”来完成，该权重衡量了每个粒子与观测数据的一致性。本练习 [@problem_id:1323002] 专注于权重计算中的关键环节——归一化，它将原始的似然值转化为一个有效的概率分布，为重采样步骤奠定基础。", "problem": "一个移动机器人使用粒子滤波器来估计其在仓库中的位置。在某个特定时间步，处理完一次传感器测量后，该滤波器评估了五个假设位置，这些位置被称为粒子。每个粒子都被赋予一个未归一化的重要性权重，该权重反映了该假设位置对传感器读数的解释程度。这五个标记为1到5的粒子具有以下未归一化的权重：\n- 粒子 1: $w_1 = 0.42$\n- 粒子 2: $w_2 = 0.91$\n- 粒子 3: $w_3 = 0.15$\n- 粒子 4: $w_4 = 0.68$\n- 粒子 5: $w_5 = 0.34$\n\n为了进入滤波器的下一步（重采样），这些权重必须被归一化，使其总和为1。计算这五个粒子中每一个的归一化重要性权重。将您的最终答案以单个行矩阵的形式呈现，其中包含从粒子1到粒子5的五个归一化权重。将最终答案中的每个权重四舍五入到三位有效数字。", "solution": "为了归一化粒子滤波器的权重，需要将每个未归一化的权重除以所有权重的总和，从而使归一化后的权重总和为1。设 $w_{i}$ 为给定的未归一化权重，$\\tilde{w}_{i}$ 为归一化权重。归一化规则如下\n$$\n\\tilde{w}_{i}=\\frac{w_{i}}{\\sum_{j=1}^{5} w_{j}}.\n$$\n首先，计算未归一化权重的总和：\n$$\n\\sum_{j=1}^{5} w_{j}=0.42+0.91+0.15+0.68+0.34=2.50.\n$$\n现在，计算每个归一化权重：\n$$\n\\tilde{w}_{1}=\\frac{0.42}{2.50}=0.168,\\quad\n\\tilde{w}_{2}=\\frac{0.91}{2.50}=0.364,\\quad\n\\tilde{w}_{3}=\\frac{0.15}{2.50}=0.060,\\quad\n\\tilde{w}_{4}=\\frac{0.68}{2.50}=0.272,\\quad\n\\tilde{w}_{5}=\\frac{0.34}{2.50}=0.136.\n$$\n验证它们的总和为1：\n$$\n0.168+0.364+0.060+0.272+0.136=1.000.\n$$\n将每个值四舍五入到三位有效数字，得到\n$$\n0.168, 0.364, 0.0600, 0.272, 0.136.\n$$\n其中 $0.0600$ 写有尾随零以表示三位有效数字。最终答案以行矩阵形式表示为：\n$$\n\\begin{pmatrix}\n0.168  0.364  0.0600  0.272  0.136\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}0.168  0.364  0.0600  0.272  0.136\\end{pmatrix}}$$", "id": "1323002"}, {"introduction": "现在，让我们将预测和加权步骤结合起来，完成一个完整的滤波周期。本练习 [@problem_id:1322990] 不仅能巩固核心算法流程，还将突显粒子滤波器的关键优势之一：处理非标准传感器模型的能力。在这个场景中，你将处理量化的区域数据，这展示了该滤波器在应对简单高斯测量之外的复杂问题时的灵活性。", "problem": "一辆自动驾驶小车沿着一条从 $x=0$ 到 $x=12$ 米的一维轨道移动。其位置由一组五个计算粒子进行监控，这些粒子代表了关于小车真实位置的假设。小车的状态是其一维位置 $x$。\n\n小车的运动通过简单的随机游走模型来建模。粒子在时间 $t$ 的预测位置由其在时间 $t-1$ 的位置加上一个随机位移给出：$x_t^{(\\text{pred})} = x_{t-1} + v_t$。五个粒子在时间 $t=0$ 时的初始位置为：\n$x_0^{(1)} = 1.5$ 米, $x_0^{(2)} = 3.5$ 米, $x_0^{(3)} = 5.0$ 米, $x_0^{(4)} = 7.5$ 米, $x_0^{(5)} = 10.0$ 米。\n\n对于从 $t=0$ 到 $t=1$ 的时间步，每个粒子经历的具体随机位移如下：\n$v_0^{(1)} = +2.0$ 米, $v_0^{(2)} = +1.2$ 米, $v_0^{(3)} = -1.8$ 米, $v_0^{(4)} = -2.5$ 米, $v_0^{(5)} = -3.1$ 米。\n\n轨道上配备了一个低分辨率的区域传感器，该传感器报告小车占据四个区域中的哪一个。这些区域定义如下：\n- 区域 1：$0 \\text{ m} \\le x  3.0 \\text{ m}$\n- 区域 2：$3.0 \\text{ m} \\le x  6.0 \\text{ m}$\n- 区域 3：$6.0 \\text{ m} \\le x  9.0 \\text{ m}$\n- 区域 4：$9.0 \\text{ m} \\le x \\le 12.0 \\text{ m}$\n\n在时间 $t=1$ 时，传感器进行一次测量，并报告小车位于区域 2。\n\n估计算法根据这次测量更新每个粒子的重要性。每个预测的粒子位置 $x_1^{(\\text{pred})}$ 会被赋予一个“存活分数”。如果粒子的位置与测量结果一致（即，落在测量的区域内），则分数为 1，否则为 0。小车位置的最终估计值 $\\hat{x}_1$ 是仅那些获得非零存活分数的粒子位置的算术平均值。\n\n计算小车在时间 $t=1$ 时的估计位置 $\\hat{x}_1$。答案以米为单位，并四舍五入到三位有效数字。", "solution": "运动模型是随机游走，预测方程为 $x_{t}^{(\\text{pred})} = x_{t-1} + v_{t}$。对于 $t=1$，计算每个粒子的预测位置：\n$$\n\\begin{aligned}\nx_{1}^{(\\text{pred},1)} = x_{0}^{(1)} + v_{0}^{(1)} = 1.5 + 2.0 = 3.5,\\\\\nx_{1}^{(\\text{pred},2)} = x_{0}^{(2)} + v_{0}^{(2)} = 3.5 + 1.2 = 4.7,\\\\\nx_{1}^{(\\text{pred},3)} = x_{0}^{(3)} + v_{0}^{(3)} = 5.0 - 1.8 = 3.2,\\\\\nx_{1}^{(\\text{pred},4)} = x_{0}^{(4)} + v_{0}^{(4)} = 7.5 - 2.5 = 5.0,\\\\\nx_{1}^{(\\text{pred},5)} = x_{0}^{(5)} + v_{0}^{(5)} = 10.0 - 3.1 = 6.9.\n\\end{aligned}\n$$\n测量结果表明在区域 2，定义为 $3.0 \\le x  6.0$。与此一致的粒子是那些 $x_{1}^{(\\text{pred})} \\in [3.0, 6.0)$ 的粒子，即 $3.5$、$4.7$、$3.2$ 和 $5.0$。因此，这四个粒子的存活分数为 $1$，而 $6.9$ 的存活分数为 $0$。\n\n估计值是存活下来的预测位置的算术平均值：\n$$\n\\hat{x}_{1} = \\frac{3.5 + 4.7 + 3.2 + 5.0}{4} = \\frac{16.4}{4} = 4.1.\n$$\n四舍五入到三位有效数字得到 $4.10$ 米。", "answer": "$$\\boxed{4.10}$$", "id": "1322990"}]}
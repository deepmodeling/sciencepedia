{"hands_on_practices": [{"introduction": "理解形式文法的第一步是掌握推导的力学过程。最左推导是一种系统地生成字符串的规范化方法，它要求在每一步都替换最左边的非终结符。这个练习 [@problem_id:1362640] 提供了一个具体的机会，让你通过顺序应用产生式规则，一步步构建一个目标字符串，从而巩固对推导过程的基本理解。", "problem": "考虑以下用于生成全括号算术表达式的上下文无关文法 $G$。该文法有一组终结符 $T = \\{ `(`, `)`, `v`, `+`, `*`, `-` \\}$，一组非终结符（或变量）$N = \\{ E, Op \\}$，以及一个开始符号 $S = E$。产生式规则被标记以供参考：\n\n-   $P1: E \\to (E\\ \\mathrm{Op}\\ E)$\n-   $P2: E \\to v$\n-   $P3: \\mathrm{Op} \\to +$\n-   $P4: \\mathrm{Op} \\to *$\n-   $P5: \\mathrm{Op} \\to -$\n\n最左派生是一个规则应用序列，在每一步中，当前字符串中最左边的非终结符会根据其中一条产生式规则被替换。\n\n下列哪个产生式规则标签序列代表了字符串 `(((v+v)*v)-v)` 的正确最左派生？\n\nA. `P1, P2, P5, P1, P2, P4, P1, P2, P3, P2`\n\nB. `P1, P2, P3, P1, P2, P4, P1, P2, P5, P2`\n\nC. `P1, P1, P1, P2, P3, P2, P4, P2, P5, P2`\n\nD. `P1, P1, P1, P2, P5, P2, P4, P2, P3, P2`\n\nE. `P1, P1, P2, P3, P2, P4, P2, P5, P2, P1`", "solution": "给定文法的产生式为：\n$P1: E \\to (E\\ \\mathrm{Op}\\ E)$, $P2: E \\to v$, $P3: \\mathrm{Op} \\to +$, $P4: \\mathrm{Op} \\to *$, $P5: \\mathrm{Op} \\to -$。\n我们必须通过最左派生（即总是展开最左边的非终结符）来生成字符串 `(((v+v)*v)-v)`。\n\n观察目标字符串，其最外层结构为 `(... - v)`，因此第一次展开必须是 $P1$，并且顶层的最终 $\\mathrm{Op}$ 必须是 $-$。这个顶层 $-$ 的左操作数是 `((v+v)*v)`，它本身的形式是 `((v+v) * v)`，而最内层的 `(v+v)` 将其内部的第一个 $\\mathrm{Op}$ 固定为 $+$。\n\n逐步进行最左派生：\n\n开始：$E$\n$$ E \\Rightarrow (E\\ \\mathrm{Op}\\ E) \\quad (\\text{应用 } P1) $$\n$$ \\Rightarrow ((E\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } E \\text{ 应用 } P1) $$\n$$ \\Rightarrow (((E\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } E \\text{ 应用 } P1) $$\n$$ \\Rightarrow (((v\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } E \\text{ 应用 } P2) $$\n$$ \\Rightarrow (((v + E)\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } \\mathrm{Op} \\text{ 应用 } P3) $$\n$$ \\Rightarrow (((v + v)\\ \\mathrm{Op}\\ E)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } E \\text{ 应用 } P2) $$\n$$ \\Rightarrow (((v + v) * E)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } \\mathrm{Op} \\text{ 应用 } P4) $$\n$$ \\Rightarrow (((v + v) * v)\\ \\mathrm{Op}\\ E) \\quad (\\text{对最左边的 } E \\text{ 应用 } P2) $$\n$$ \\Rightarrow (((v + v) * v) - E) \\quad (\\text{对最左边的 } \\mathrm{Op} \\text{ 应用 } P5) $$\n$$ \\Rightarrow (((v + v) * v) - v) \\quad (\\text{对最左边的 } E \\text{ 应用 } P2) $$\n\n所使用的产生式标签序列是\n`P1, P1, P1, P2, P3, P2, P4, P2, P5, P2`,\n与选项 C 匹配。", "answer": "$$\\boxed{C}$$", "id": "1362640"}, {"introduction": "在掌握了如何执行推导之后，下一步是理解推导过程所代表的意义。每一个推导都唯一对应一棵分析树，它揭示了字符串的内在层次结构。这个练习 [@problem_id:1362660] 将推导的线性序列与分析树的高度联系起来，这是一个在分析解析效率和结构复杂性时的关键概念，能帮助你更深入地理解语法结构。", "problem": "在为环境传感器网络设计一种专用通信协议时，数据载荷以二进制字符串的形式进行传输。该协议的一个关键特性是，保留了子字符串 `11` 作为一个高优先级的“注意”信号。为防止数据被误解为该信号，所有由传感器生成的有效数据字符串都禁止包含子字符串 `11`。\n\n该系统的一个形式化模型由一个上下文无关文法 (CFG) 给出，记为 $G$。该文法生成所有有效的、非空的数据字符串的语言。$G$ 的组成部分定义如下：\n\n-   **终结符：** $\\{0, 1\\}$\n-   **非终结符（变量）：** $\\{S, A\\}$\n-   **开始符号：** $S$\n-   **产生式规则：**\n    1.  $S \\to 0S$\n    2.  $S \\to 1A$\n    3.  $S \\to 0$\n    4.  $S \\to 1$\n    5.  $A \\to 0S$\n    6.  $A \\to 0$\n\n你的任务是分析由该文法生成的特定数据字符串 `10010` 的结构。首先，找到该字符串的唯一最左推导。然后，基于此推导，确定其对应的分析树的高度。分析树的高度定义为从根节点到任意叶节点的最长路径上的边数。一个只包含单个节点的树的高度为0。\n\n字符串 `10010` 的分析树的高度是多少？", "solution": "我们要找到使用给定 CFG 对字符串 `10010` 进行的唯一最左推导。最左推导在每一步中总是展开最左边的非终结符。为了使字符串以 $1$ 开始，我们必须从 $S$ 使用产生式 $S \\to 1A$（因为 $S \\to 1$ 会过早终止）。在每个阶段进行最左推导，并匹配下一个所需的终结符，可得：\n$$\n\\begin{align*}\nS \\Rightarrow 1A  (\\text{根据 } S \\to 1A) \\\\\n\\Rightarrow 10S  (\\text{根据 } A \\to 0S) \\\\\n\\Rightarrow 100S  (\\text{根据 } S \\to 0S) \\\\\n\\Rightarrow 1001A  (\\text{根据 } S \\to 1A) \\\\\n\\Rightarrow 10010  (\\text{根据 } A \\to 0)\n\\end{align*}\n$$\n这个最左推导是唯一的，因为在每一步中，要匹配的下一个终结符都唯一确定了所要选择的产生式。\n\n为确定分析树的高度（即从根到叶的最长路径上的边数），我们追踪推导过程中形成最长路径的非终结符序列，该序列最终生成一个终结符：$S \\to A \\to S \\to S \\to A \\to 0$。\n这条最长路径包含的节点链为 $S \\to A \\to S \\to S \\to A \\to 0$。\n计算这条路径上的边数，得到 5 条边：\n1. $S \\to A$ (来自 $S \\to 1A$)\n2. $A \\to S$ (来自 $A \\to 0S$)\n3. $S \\to S$ (来自 $S \\to 0S$)\n4. $S \\to A$ (来自 $S \\to 1A$)\n5. $A \\to 0$ (来自 $A \\to 0$)\n\n不存在更长的路径，因为在生成最后一个终结符之前，每一步推导都沿着所应用产生式中唯一的非终结符子节点进行。因此，分析树的高度为 5。", "answer": "$$\\boxed{5}$$", "id": "1362660"}, {"introduction": "在编译器设计和程序语言理论中，一个至关重要的问题是文法的歧义性。一个无歧义的文法能确保每个句子只有一种解释，而歧义文法则会导致混淆。这个练习 [@problem_id:1362657] 使用一个典型的歧义算术表达式文法，让你探索单个字符串可以产生多少个不同的分析树，从而量化地理解歧义性的后果，并突显出设计无歧义文法的重要性。", "problem": "考虑一个用于解析简单算术表达式的上下文无关文法 $G$。该文法有一个非终结符 $E$（代表表达式），两个代表运算符的终结符 `+` 和 `*`，以及一个代表标识符或数字的终结符 `id`。文法 $G$ 的产生式规则如下：\n\n1.  $E \\to E + E$\n2.  $E \\to E * E$\n3.  $E \\to \\text{id}$\n\n这个文法是二义性的，因为它没有强制任何运算符优先级或结合性。因此，一个字符串可以有多种有效的推导，每种推导都对应一棵不同的解析树。\n\n您的任务是确定字符串 `id+id*id+id*id` 的不同解析树的总数。", "solution": "我们将输入字符串编码为 $a_{1}\\,o_{1}\\,a_{2}\\,o_{2}\\,a_{3}\\,o_{3}\\,a_{4}\\,o_{4}\\,a_{5}$，其中 $a_{i}$ 是 $\\text{id}$ 的五次出现，而 $(o_{1},o_{2},o_{3},o_{4})=(+,*,+,*)$。对于文法 $E \\to E+E \\mid E*E \\mid \\text{id}$，要为此固定词元序列构建一棵解析树，可以在某个运算符位置 $o_{k}$ 处选择一个二元分裂，使其成为根运算符，然后递归地解析左子串 $a_{1}\\,o_{1}\\,\\dots\\,a_{k}$ 和右子串 $a_{k+1}\\,o_{k+1}\\,\\dots,\\,a_{5}$。由于运算符词元的位置是固定的，一旦选择了分裂点 $k$，根部的运算符就被强制为 $o_{k}$；因此，解析树的数量仅取决于对五个操作数进行完全括号化的方式有多少种，而与具体的运算符符号无关。\n\n令 $T(m)$ 为具有 $m$ 个操作数（因此有 $m-1$ 个运算符）的子串的解析树数量。基本情况是 $T(1)=1$。对于 $m \\ge 2$，每个解析都是通过在第 $k$ 个操作数之后选择一个分裂点（其中 $k \\in \\{1,\\dots,m-1\\}$）来获得的，从而得出递推关系\n$$\nT(m)=\\sum_{k=1}^{m-1} T(k)\\,T(m-k).\n$$\n这是卡特兰数（Catalan）的递推关系，所以 $T(m)=C_{m-1}$，其中\n$$\nC_{r}=\\frac{1}{r+1}\\binom{2r}{r}.\n$$\n对于我们的字符串，有 $m=5$ 个操作数，因此不同解析树的数量是\n$$\nT(5)=C_{4}=\\frac{1}{5}\\binom{8}{4}=\\frac{1}{5}\\cdot 70=14.\n$$\n因此，不同解析树的总数为 $14$。", "answer": "$$\\boxed{14}$$", "id": "1362657"}]}
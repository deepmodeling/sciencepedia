{"hands_on_practices": [{"introduction": "图的遍历算法，如广度优先搜索（BFS）和深度优先搜索（DFS），是在连通图中寻找“骨干”或生成树的常用方法。这个练习将帮助你理解任何连通图都可以被看作是一个核心的树结构加上一些额外的“冗余”边。通过区分这两种类型的边，你可以量化任何生成树的基本结构，这是理解图的冗余性和连通性的第一步。", "problem": "考虑一个代表复杂基础设施网络的大型连通无向图 $G$。该图由 $n$ 个节点（枢纽）和 $m$ 条边（连接）组成。为了建立一个核心的、无环的通信骨干网，从一个任意节点开始，在该图上运行诸如广度优先搜索 (BFS) 或深度优先搜索 (DFS) 之类的算法。在连通图上进行此类遍历的输出是一棵生成树。\n\n对于这棵生成的生成树，原始图 $G$ 中的每条边都可以分为两类之一：“树边”，即属于生成树的边；以及“非树边”（根据算法和上下文，也称为后向边、前向边或交叉边），即图 $G$ 中未包含在生成树里的边。\n\n请确定，无论起始节点是什么，也无论使用 BFS 还是 DFS，将会找到的树边数量和非树边数量。请分别用 $n$ 和 $m$ 来表示树边和非树边的数量。", "solution": "设 $G=(V,E)$ 是一个连通无向图，其中 $|V|=n$ 且 $|E|=m$。从任意起始节点运行 BFS 或 DFS 都会构造一棵生成树 $T$，因为：\n- 遍历会访问所有 $n$ 个顶点（因为图是连通的）。\n- 每当首次发现一个新顶点时，恰好有一条边（通向其在遍历中的父节点）被添加到 $T$ 中。\n- 根据构造方法，$T$ 中不会形成环。\n\n在一棵有 $n$ 个顶点的树中，边的数量是 $n-1$。因此，树边的数量是\n$$\n|E_T|=n-1\n$$\n图 $G$ 的边可划分为树边和非树边，所以\n$$\nm=|E|=|E_T|+|E_{\\text{non-tree}}|\n$$\n因此，非树边的数量是\n$$\n|E_{\\text{non-tree}}|=m-|E_T|=m-(n-1)=m-n+1\n$$\n这些数量与起始节点无关，也与使用的是 BFS 还是 DFS 无关，因为任何具有 $n$ 个顶点的生成树都恰好有 $n-1$ 条边。", "answer": "$$\\boxed{\\begin{pmatrix} n-1  m-n+1 \\end{pmatrix}}$$", "id": "1483535"}, {"introduction": "在上一个练习的基础上，我们现在来探讨“非树边”的意义 [@problem_id:1483535]。这些不属于生成树的边揭示了关于图结构的什么信息？这个练习展示了在无向图中，BFS遍历过程中发现的非树边如何明确地指示环的存在。掌握这种基于算法的环检测方法，对于分析网络拓扑和识别冗余路径至关重要。", "problem": "一家名为 “CloudConnect” 的初创公司的网络工程团队正在为其数据中心实施一种新的路由协议。服务器网络被建模为一个连通无向图，其中服务器是顶点，直接的数据链路是边。该协议的一个关键组成部分是一个检查冗余路径的例程，这些冗余路径在图中表现为环。为执行此检查，该协议从一个任意的源服务器启动广度优先搜索 (BFS)。\n\nBFS 算法逐层系统地探索图。它使用一个队列来管理待访问的服务器，为每个服务器设置一个 `visited` 标志来跟踪发现状态，并为每个服务器设置一个 `parent` 指针来重构发现路径（即 `parent[v]` 是首先发现 `v` 的服务器 `u`）。\n\n你的任务是确定一个精确条件，在执行此 BFS 遍历期间遇到该条件时，可以明确地表明网络图中至少包含一个环。\n\n假设 BFS 在一个连通无向图上运行。设 `u` 是当前正在处理的服务器（即刚从队列前端移除的服务器），设 `v` 是根据图的邻接表 `u` 的一个邻居。\n\n以下哪个事件是检测到环的充分必要条件？\n\nA. 在处理服务器 `u` 时，算法发现一个邻居服务器 `v` 已被标记为 `visited`。\n\nB. 在处理服务器 `u` 时，算法发现一个邻居服务器 `v` 已被标记为 `visited`，并且是 `u` 在 BFS 树中的 `parent`。\n\nC. BFS 遍历完成后，`parent` 数组中的节点总数不等于图中的服务器总数。\n\nD. 在处理服务器 `u` 时，算法发现一个邻居服务器 `v` 已被标记为 `visited`，但不是 `u` 在 BFS 树中的 `parent`。\n\nE. BFS 队列变空，但已访问的服务器数量少于图中的服务器总数。", "solution": "我们将网络建模为一个连通无向图，并从某个源点开始运行 BFS。对于 BFS 发现的每个顶点 $w \\neq s$，边 $(\\mathrm{parent}[w], w)$ 属于 BFS 生成树 $T$。结构 $T$ 是该图的一棵生成树（因为图是连通的，BFS 会到达每个顶点），因此 $T$ 中任意两个顶点之间都存在唯一的简单路径。\n\nD 的充分性：假设在处理顶点 $u$ 时，我们检查到一个相邻顶点 $v$，该顶点 $v$ 已被标记为 $\\mathrm{visited}$ 并且 $v \\neq \\mathrm{parent}[u]$。考虑 BFS 生成树 $T$ 中从 $u$到 $v$ 的唯一路径，记为 $P_{T}(u,v)$。由于 $T$ 是一棵树， $P_{T}(u,v)$ 是简单且唯一的。将非树边 $(u,v)$ 添加到 $P_{T}(u,v)$ 中会形成一个简单环：\n$$\n\\text{cycle} = P_{T}(u,v) \\cup \\{(u,v)\\}.\n$$\n因此，遇到一个已访问过且不是 `parent[u]` 的邻居 `v`，可以保证图中存在一个环。\n\nD 的必要性：假设图中包含一个环。设 $T$ 是由 `parent` 指针定义的 BFS 生成树。因为图有环，所以至少存在一条原始边 $e = (a,b)$ 不在 $T$ 中（在相同顶点集上的任何树都不能包含环的所有边）。由于 $T$ 包含了所有顶点，因此在 $T$ 中 $a$ 和 $b$ 之间存在一条唯一的路径。在 BFS 过程中，设 $x$ 是边 $e$ 中较晚被处理的端点，而 $y$ 是另一个端点。当处理 $x$ 时，$y$ 已经被标记为 $\\mathrm{visited}$，并且因为 $e \\notin T$，我们有 $\\mathrm{parent}[x] \\neq y$。当从 $x$ 的邻接表中检查边 $(x,y)$ 时，算法会发现一个邻居 $y$ 已被标记为 $\\mathrm{visited}$ 且不是 $x$ 的 $\\mathrm{parent}$。因此，如果图中存在环，则 D 中的事件必然会发生。\n\n因此，D 是一个充分必要条件。\n\n为什么其他选项是错误的：\n- A 不充分：在任何连通无环图（即树）中，当处理一个顶点 `u` 时，其邻居 `v` = `parent[u]` 已经被访问过，但图中没有环。\n- B 不充分且无信息量：在任何 BFS 树中，对于每个非根顶点，遇到已访问过的父节点是系统性发生的，无论是否存在环。\n- C 不相关：`parent` 数组的大小是一个固定的实现细节；在连通图中，BFS 会访问所有顶点并为所有 $w \\neq s$ 填充 `parent[w]`，无论是否存在环。\n- E 与连通性矛盾：在一个连通图中，BFS 会访问所有顶点，因此队列只有在访问完整个顶点集后才会变空；这个条件不可能成立，也与环的存在与否无关。\n\n因此，精确的充分必要条件是选项 D。", "answer": "$$\\boxed{D}$$", "id": "1354171"}, {"introduction": "现在，我们将把对连通性和组件的理解应用到一个更动态的场景中。我们将分析当图的某些部分被移除时，其连通性会如何变化。这个问题要求你对一个复合图的顶点度数进行计算，根据度数识别并移除特定顶点，然后确定结果图中的连通组件数量。这种分析在网络可靠性研究中至关重要，因为它帮助我们理解节点或链路故障的后果。", "problem": "考虑一个根据以下过程构建的无向图 $G$。首先，从 $m$ 个互不相交的 $n$ 阶完全图 $K_n$ 的副本开始。将这些副本记为 $C_1, C_2, \\dots, C_m$。接着，引入一个新顶点 $v_c$，我们称之为中心顶点。对于每个副本 $C_i$（其中 $i$ 的范围从 $1$ 到 $m$），从该副本中恰好选择一个顶点，记为 $l_i$，并添加一条连接 $l_i$ 与中心顶点 $v_c$ 的边。这样就完成了图 $G$ 的构建。\n\n对于本问题，设参数为 $m=12$ 和 $n=9$。\n\n通过从 $G$ 中同时移除所有度恰好为 9 的顶点以及与这些顶点关联的所有边，形成一个新图 $G'$。\n\n计算最终生成的图 $G'$ 中的连通分量数。", "solution": "我们首先描述所构建的图 $G$ 中顶点的度。每个副本 $C_{i}$ 是一个 $K_{n}$，因此 $C_{i}$ 中的每个顶点在 $C_{i}$ 内部的度为 $n-1$。在每个 $C_{i}$ 中，恰好有一个顶点 $l_{i}$ 额外连接到中心顶点 $v_{c}$，所以：\n- 对于任何引出顶点 $l_{i}$，其在 $G$ 中的度为\n$$\n\\deg(l_{i})=(n-1)+1=n\n$$\n- 对于 $C_{i}$ 中的任何非引出顶点，其在 $G$ 中的度为\n$$\n\\deg(\\text{非引出顶点})=n-1\n$$\n- 中心顶点 $v_{c}$ 与 $m$ 个副本中的每一个中的恰好一个顶点相邻，因此\n$$\n\\deg(v_{c})=m\n$$\n\n给定参数 $m=12$ 和 $n=9$，这些度变为：\n$$\n\\deg(l_{i})=9,\\quad \\deg(\\text{non-leader})=8,\\quad \\deg(v_{c})=12\n$$\n\n图 $G'$ 是通过从 $G$ 中同时移除所有度恰好为 $9$ 的顶点以及与它们关联的所有边而得到的。因此，被移除的恰好是 $m$ 个引出顶点 $l_{1},\\dots,l_{m}$。\n\n考虑这对每个 $C_{i}$ 的影响。从 $K_{n}$ 中移除 $l_{i}$ 后，剩下的是由其余 $n-1$ 个顶点构成的导出子图，即 $K_{n-1}$。因此，移除后，每个 $C_{i}$ 变成了 $K_{n-1}$。当 $n=9$ 时，每个副本变成 $K_{8}$，它是连通的。\n\n中心顶点 $v_{c}$ 失去了所有与之关联的边，因为这些边都与被移除的引出顶点相关联。因此 $v_{c}$ 成为了一个孤立顶点，自己形成一个连通分量。\n\n所以，$G'$ 中连通分量的总数是以下各项之和：\n- 来自 $m$ 个变为 $K_{n-1}$ 的副本的 $m$ 个连通分量，\n- 来自孤立的中心顶点的 $1$ 个额外分量。\n\n因此，连通分量的总数是\n$$\nm+1\n$$\n代入 $m=12$ 得\n$$\n12+1=13\n$$", "answer": "$$\\boxed{13}$$", "id": "1359363"}]}
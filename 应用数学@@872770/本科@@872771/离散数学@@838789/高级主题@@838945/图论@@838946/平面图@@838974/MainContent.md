## 引言
从电路板上的导线布局到城市交通网络的规划，再到[分子结构](@entry_id:140109)的描绘，许多系统都可以被抽象为由点（顶点）和线（边）构成的图。在这些应用中，一个普遍存在的物理限制是：[连接线](@entry_id:196944)不能相互交叉。满足这种“平面可绘制性”的图被称为**[平面图](@entry_id:269787)**，它们是[图论](@entry_id:140799)中一个极其重要且应用广泛的分支。然而，一个图何时才能被无[交叉](@entry_id:147634)地绘制在平面上？这种[平面性](@entry_id:274781)又对其结构施加了哪些内在的数学约束？这些问题构成了我们理解和利用二维空间限制的核心。

本文旨在系统地回答这些问题，带领读者深入平面图的优美世界。我们将分三个章节展开：
- 在**“原理与机制”**中，我们将揭示[平面图](@entry_id:269787)的基石——欧拉公式，并从它出发推导出一系列深刻的结论，学习如何利用它们来分析图的结构和判定非[平面性](@entry_id:274781)。
- 在**“应用与跨学科联系”**中，我们将看到这些抽象的数学原理如何转化为解决实际问题的强大工具，探索平面图在电路设计、化学、地理信息和计算机科学等领域的广泛应用。
- 最后，在**“动手实践”**部分，你将有机会通过解决具体问题来巩固和应用所学知识。

让我们首先深入其核心，探寻支配着所有[平面图](@entry_id:269787)的普适法则。

## 原理与机制

在上一章中，我们介绍了平面图的基本概念。现在，我们将深入探讨其背后的数学原理和核心机制。这些原理不仅优美，而且极为强大，它们构成了我们理解和应用[平面图](@entry_id:269787)的基石。本章的核心是著名的[欧拉公式](@entry_id:176440)，我们将从它出发，推导出一系列深刻的结论，并探索它们在几何、网络设计和理论计算中的应用。

### 欧拉公式：平面图的基石

想象一下，我们将一个**连通的**平面图绘制在一个无限大的平面上。图中的边互不相交，它们将平面分割成了若干个区域。这些由边围成的区域被称为**面 (face)**。其中，有一个区域是无界的，延伸至无穷远，我们称之为**外部面 (outer face)**；其余的都是有界的**内部面 (inner faces)**。

18世纪的数学家 Leonhard Euler 发现，对于任何连通[平面图](@entry_id:269787)，其**顶点 (vertex)** 数量 $v$、**边 (edge)** 数量 $e$ 和**面 (face)** 数量 $f$ 之间存在一个简单而恒定的关系。这个关系被称为**欧拉公式 (Euler's Formula)**：

$v - e + f = 2$

这个公式的非凡之处在于，无论一个连通[平面图](@entry_id:269787)画得多扭曲、多复杂，只要它能被平面地绘制出来，这个等式就必然成立。它揭示了平面图内在的、与具体画法无关的拓扑结构属性。

让我们通过一个具体的例子来感受[欧拉公式](@entry_id:176440)的力量。考虑一个立方体的骨架，它在[图论](@entry_id:140799)中被称为3维[超立方体图](@entry_id:268710) $Q_3$。它的顶点可以用所有长度为3的二进制串来表示，如果两个顶点对应的二[进制](@entry_id:634389)串仅在一位上不同，则它们之间有一条边相连。已知 $Q_3$ 是一个平面图。那么，它的任何[平面嵌入](@entry_id:263159)会形成多少个面呢？[@problem_id:1391492]

首先，我们需要确定 $v$ 和 $e$。
- **顶点数 $v$**：长度为3的二[进制](@entry_id:634389)串共有 $2^3 = 8$ 个（从 000 到 111）。所以，$v = 8$。
- **边数 $e$**：我们可以使用**[握手引理](@entry_id:261183) (Handshaking Lemma)**，即所有[顶点的度](@entry_id:264944)数之和等于边数的两倍 ($\sum \deg(v_i) = 2e$)。对于 $Q_3$ 中的任意一个顶点，例如 "000"，与它相连的顶点是 "100"、"010" 和 "001"，即通过翻转一位得到的串。因此，每个[顶点的度](@entry_id:264944)数都是3。这是一个[3-正则图](@entry_id:261395)。所以，度数之和为 $8 \times 3 = 24$。根据[握手引理](@entry_id:261183)，$2e = 24$，即 $e = 12$。

现在，我们将 $v=8$ 和 $e=12$ 代入[欧拉公式](@entry_id:176440)：
$8 - 12 + f = 2$
$-4 + f = 2$
$f = 6$

因此，任何立方体图的[平面嵌入](@entry_id:263159)都会将平面分割成6个区域。这与我们直观地将立方体展开在纸上所看到的6个“正方形”面（其中一个是外部面）是一致的。

欧拉公式及其相关性质也可以用来分析更复杂的[多面体](@entry_id:637910)结构。例如，考虑一个由20个等边三角形面构成的[凸多面体](@entry_id:170947)，且每个顶点恰好是5条边的汇集点（这正是正二十面体的结构）[@problem_id:1391461]。我们可以利用这些信息来推算其顶点和边的数量。
- 设 $V, E, F$ 分别为顶点、边、面数。我们已知 $F=20$。
- **边与面的关系**：由于每个面都是三角形（有3条边），并且每条边都恰好是两个面的边界，我们可以通过双重计数得到关系 $3F = 2E$。代入 $F=20$，我们得到 $2E = 3 \times 20 = 60$，因此 $E = 30$。
- **边与顶点的关系**：由于每个顶点汇集了5条边，双重计数得到 $5V = 2E$。代入 $E=30$，我们得到 $5V = 60$，因此 $V = 12$。

我们求得了 $V=12, E=30, F=20$。让我们来验证欧拉公式：$V - E + F = 12 - 30 + 20 = 2$。公式完美成立，这再次展示了这些量之间深刻的内在联系。

### 几何解释与推广

欧拉公式的美妙之处在于它超越了简单的平面绘制，与更普适的几何概念紧密相连。

#### 球面上的嵌入与[立体投影](@entry_id:142378)

一个重要的观点是：一个图是[平面图](@entry_id:269787)，当且仅当它可以被无交叉地绘制在一个球面上。在球面上，所有的面都是等价的；没有一个面是特殊的“外部面”。这种视角更加对称和优雅。

那么，球面上的图如何与平面上的图对应起来呢？答案是**[立体投影](@entry_id:142378) (stereographic projection)**。想象一个球体放置在一个平面上，北极点为 $P$。从 $P$ 点发出的光线穿过球面上的任意一点（$P$点除外），都会在平面上投射出一个唯一的影像。这个过程将球面上的图（除$P$点外）一一对应地映射到平面上，形成一个[平面嵌入](@entry_id:263159)。

在这个过程中，包含投影点 $P$ 的那个球面区域，在投影后就变成了平面上的无界外部面。这意味着，我们可以通过选择不同的投影点 $P$ 来指定哪个面成为外部面。[@problem_id:1527504]

让我们以正十二面体的[骨架图](@entry_id:147556)为例。这个图有20个顶点，30条边，以及12个五边形的面。当它被嵌入球面上时：
(a) 如果我们将投影点 $P$ 放在某个五边形面的中心，那么这个面在投影后就成为外部面。它的边界由原来那个五边形的5条边构成。
(b) 如果我们将 $P$ 放在一个顶点上，由于正十二面体的每个顶点是3个五边形面的公共点，这3个面所在的区域就成了包含 $P$ 的区域。在投影后，这3个面合并成外部面。其边界由这3个五边形的所有边，减去那些在内部共享的边（即汇集于 $P$ 点的3条边，每条边被两个面共享）组成。每个五边形贡献 $5-2=3$ 条外部边界边，总共是 $3 \times 3 = 9$ 条边。
(c) 如果我们将 $P$ 放在一条边的中点，这条边是2个五边形面的公共边界。这两个面合并成外部面。其边界由这两个五边形的所有边，减去那条被共享的边组成。总共有 $(5-1) + (5-1) = 8$ 条边。

这个例子清晰地表明，外部面的形态取决于我们的几何视角（即投影点的选择），但图的内在[平面性](@entry_id:274781)及其 $v, e, f$ 的数量关系保持不变。

#### 断开图的[欧拉公式](@entry_id:176440)

标准的[欧拉公式](@entry_id:176440) $v - e + f = 2$ 仅适用于**连通**图。如果一个图由多个互不相连的**[连通分量](@entry_id:141881) (connected components)** 组成，公式需要修正。例如，在设计多芯片模块时，电路布局可能包含多个电气上隔离的子电路。[@problem_id:1527521]

假设一个[平面图](@entry_id:269787)有 $k$ 个连通分量。我们可以对每个分量 $G_i$ (其中 $i=1, \dots, k$) 应用[欧拉公式](@entry_id:176440)，设其顶点、边和面数分别为 $v_i, e_i, f_i$：
$v_i - e_i + f_i = 2$

将这 $k$ 个公式相加，得到：
$(\sum v_i) - (\sum e_i) + (\sum f_i) = 2k$

令 $v = \sum v_i$ 和 $e = \sum e_i$ 为整个图的总顶点数和总边数。关键在于面数如何变化。当我们将这 $k$ 个分量分开考虑时，每个分量都有自己的一个外部面。但当它们被同时绘制在同一个平面上时，这 $k$ 个独立的外部面会合并成一个统一的、包围所有分量的全局外部面。因此，总面数 $f$ 等于所有分量的面数之和减去 $(k-1)$ 次合并（即 $f = (\sum f_i) - (k-1)$）。

反过来，$\sum f_i = f + k - 1$。代入上面的总和公式：
$v - e + (f + k - 1) = 2k$

整理后，我们得到适用于具有 $k$ 个[连通分量](@entry_id:141881)的平面图的**广义[欧拉公式](@entry_id:176440)**：
$v - e + f = k + 1$

当 $k=1$ 时，这个公式就还原为我们熟悉的 $v - e + f = 2$。

### 欧拉公式的推论：判定非平面性的工具

欧拉公式最强大的应用之一是推导出一系列关于平面图边数的上限。这些不等式为我们提供了一种简单而有效的方法来证明某些图**不是**[平面图](@entry_id:269787)。

#### 简单平面图的边数上限

对于一个**[简单图](@entry_id:274882)**（即没有[自环](@entry_id:274670)或重边），如果其顶点数 $v \ge 3$，那么在它的任何[平面嵌入](@entry_id:263159)中，每个面都至少由3条边围成。让我们再次运用[双重计数法](@entry_id:152987)：如果我们把每个面的边界边数相加，得到的总和 $\sum l_i$ (其中 $l_i$ 是面 $i$ 的边数) 必然大于等于 $3f$。同时，因为每条边都恰好是两个面（或一个面的两侧）的边界，所以这个总和也等于 $2e$。

于是我们得到：
$2e = \sum l_i \ge 3f \implies f \le \frac{2e}{3}$

现在，我们将这个关于 $f$ 的不等式代入欧拉公式 $v - e + f = 2$：
$2 = v - e + f \le v - e + \frac{2e}{3}$
$2 \le v - \frac{e}{3}$

整理后，我们得到一个至关重要的不等式，它适用于所有顶点数 $v \ge 3$ 的简单连通平面图：
$e \le 3v - 6$

这个不等式意味着，在一个简单平面图中，边的数量不可能无限增长，它受到了顶点数量的严格限制。例如，一个拥有150个节点的芯片网络，如果要求是平面的，那么它最多只能包含 $e = 3 \times 150 - 6 = 444$ 条连接。[@problem_id:1527501]

#### 二分图的更紧边数上限

如果一个[平面图](@entry_id:269787)还具有**二分图 (bipartite graph)** 的性质（即其顶点可以被分成两个集合，所有边都连接两个集合之间的顶点），我们可以得到一个更强的边数上限。[二分图](@entry_id:262451)的一个基本特征是它们不包含任何**奇数长度的环 (odd cycle)**。因此，在它们的[平面嵌入](@entry_id:263159)中，每个面的边界长度至少为4。

重复之前的推导过程，但使用新的面边界条件：
$2e = \sum l_i \ge 4f \implies f \le \frac{e}{2}$

将这个更紧的界代入欧拉公式：
$2 = v - e + f \le v - e + \frac{e}{2}$
$2 \le v - \frac{e}{2}$

整理后，我们得到适用于连通二分[平面图](@entry_id:269787)的边数上限：
$e \le 2v - 4$

#### 证明非平面性：$K_5$ 与 $K_{3,3}$

这两个不等式是证明一个图非平面性的有力武器。[图论](@entry_id:140799)中有两个著名的[非平面图](@entry_id:268333)：**完全图 $K_5$** (5个顶点，任意两点间都有边) 和**[完全二分图](@entry_id:276229) $K_{3,3}$** (两组各3个顶点，第一组的每个顶点都与第二组的所有顶点相连)。

- **$K_5$ 的非平面性**：$K_5$ 有 $v=5$ 个顶点，边数为 $e = \binom{5}{2} = 10$。代入一般不等式 $e \le 3v - 6$：
$10 \le 3(5) - 6 = 9$
这是错误的。因此，$K_5$ 不可能是[平面图](@entry_id:269787)。

- **$K_{3,3}$ 的非平面性** [@problem_id:1368104]：$K_{3,3}$ 有 $v=6$ 个顶点，边数为 $e=3 \times 3=9$。它是一个二分图。如果我们使用一般不等式 $e \le 3v - 6$，会得到 $9 \le 3(6) - 6 = 12$，这个不等式成立，无法得出结论。然而，我们必须使用为其量身定制的二分图不等式 $e \le 2v - 4$：
$9 \le 2(6) - 4 = 8$
这是错误的。因此，$K_{3,3}$ 不可能是[平面图](@entry_id:269787)。这个例子说明了选择最适用（最紧）的条件的重要性。

#### 量化非平面性：[交叉数](@entry_id:264899)

事实上，$K_5$ 和 $K_{3,3}$ 是所有[非平面图](@entry_id:268333)的“构建模块”，这是著名的**[库拉托夫斯基定理](@entry_id:276059) (Kuratowski's Theorem)** 的核心内容。在实际应用中，如果一个图是非平面的，我们通常想知道它“有多么非平面”。一个度量标准是**[交叉数](@entry_id:264899) (crossing number)**，即在平面上绘制该图所需的最少边[交叉](@entry_id:147634)次数。

我们可以利用 $e \le 3v - 6$ 不等式来估算[交叉数](@entry_id:264899)的下限。[@problem_id:1391510] 考虑完全图 $K_6$，它有 $v=6$ 个顶点和 $e=\binom{6}{2}=15$ 条边。代入不等式，$15 \not\le 3(6)-6=12$，显然不成立。假设我们在绘制 $K_6$ 时产生了 $k$ 个交叉。每个交叉点可以被看作一个新增的“跳线”顶点。在这个过程中，每有一个交叉，我们就移除了两条[交叉](@entry_id:147634)的边，并加入了四条连接到新顶点的新边，净增2条边。

这样，我们得到一个拥有 $v' = v+k = 6+k$ 个顶点和 $e' = e+2k = 15+2k$ 条边的新平面图。这个新图必须满足平面图的边数上限：
$e' \le 3v' - 6$
$15 + 2k \le 3(6+k) - 6$
$15 + 2k \le 18 + 3k - 6$
$15 + 2k \le 12 + 3k$
$3 \le k$

这个计算告诉我们，为了让 $K_6$ 变得平面，我们至少需要3个交叉点。

### 更多结构性结论与应用

平面图的原理不仅限于判定，还能揭示图的更多结构特性。

#### 平面图的[最小度](@entry_id:273557)

[平面图](@entry_id:269787)的边数限制对其[顶点的度](@entry_id:264944)数也有着深刻影响。一个惊人的结论是：**任何简单平面图必定至少有一个度数不大于5的顶点**。[@problem_id:1391518]

证明这个结论的过程巧妙地结合了我们已知的工具。令 $\delta$ 为图中所有顶点的[最小度](@entry_id:273557)数。根据[握手引理](@entry_id:261183)，$\sum \deg(v_i) = 2e$。由于每个[顶点的度](@entry_id:264944)数都至少为 $\delta$，那么度数之和也必然满足 $\sum \deg(v_i) \ge \delta v$。结合起来得到：
$\delta v \le 2e$

我们又知道 $e \le 3v - 6$，所以 $2e \le 6v - 12$。将这两个不等式[串联](@entry_id:141009)起来：
$\delta v \le 2e \le 6v - 12$
$\delta v \le 6v - 12$

假设 $v > 0$，两边同除以 $v$：
$\delta \le 6 - \frac{12}{v}$

因为 $v \ge 3$，$\frac{12}{v}$ 是一个正数，所以 $\delta$ 严格小于6。由于度数必须是整数，这意味着 $\delta \le 5$。这个结论是成立的。它保证了我们总能在任何简单[平面图](@entry_id:269787)中找到一个“连接不多”的顶点。这个性质是著名的**[四色定理](@entry_id:269820)**证明中的关键一步。这个界限是紧的，因为正二十面体图就是一个所有[顶点度数](@entry_id:264944)都恰好为5的[平面图](@entry_id:269787)。

#### 对偶图与地图

平面图的概念与地图绘制有着天然的联系。我们可以将一张地图（例如行政区划图）转换为一个图，这个过程称为**对偶 (duality)**。[@problem_id:1391483]

给定一个地图（即一个平面图 $G$），我们可以构造它的**对偶图 (dual graph)** $G'$，方法如下：
1. 在原图 $G$ 的每一个面（包括外部面）内放置一个新顶点。这些新顶点构成了 $G'$ 的顶点集。
2. 如果原图 $G$ 中有两个面共享一条边 $e$作为边界，那么就在 $G'$ 中连接这两个面对应的新顶点，这条新边跨越 $e$。

例如，一个六个县的地图可以被建模为一个对偶图。每个县成为一个顶点，如果两个县共享边界，则对应的顶点之间连一条边。通过分析这个[对偶图](@entry_id:263734)的属性（如度数、环、连通性），我们可以了解地图的邻接结构。

#### [平面嵌入](@entry_id:263159)的唯一性

最后，一个更深入的问题是：一个给定的[平面图](@entry_id:269787)，它的[平面嵌入](@entry_id:263159)方式是唯一的吗？答案取决于图的**连通度 (connectivity)**。

图的**[顶点连通度](@entry_id:267799)** $\kappa(G)$ 是指移除最少多少个顶点可以使图变得不连通或只剩一个顶点。
- $\kappa(G) \ge 1$ 意味着图是连通的。
- $\kappa(G) \ge 2$ 意味着图没有**[割点](@entry_id:637448) (cut vertex)**，即移除任何单个顶点都不会使图断开。
- $\kappa(G) \ge 3$ 意味着图是**3-连通的**。

**惠特尼[唯一性定理](@entry_id:166861) (Whitney's Uniqueness Theorem)** 指出，一个3-连通的简单[平面图](@entry_id:269787)，其在球面上的嵌入方式本质上是唯一的（最多相差一个镜像反射）。这意味着它的面边界集合是固定的。

反过来，如果一个图存在两种产生不同面集的[平面嵌入](@entry_id:263159)方式，那么它一定不是3-连通的。[@problem_id:1391473] 假设一个网络图 $G$ 是2-连通的（即 $\kappa(G) \ge 2$），但我们发现了它的两种不同的[平面嵌入](@entry_id:263159)。根据[惠特尼定理](@entry_id:271195)，不同的嵌入意味着它不是3-连通的，即 $\kappa(G)  3$。结合这两个条件，我们便可以精确地确定其[顶点连通度](@entry_id:267799)为 $\kappa(G) = 2$。这个定理巧妙地将图的纯组合属性（连通度）与其[几何实现](@entry_id:265700)（嵌入方式）联系在一起。

从一个简单的公式 $v-e+f=2$ 出发，我们不仅能够解决具体的计数问题，还能推导出关于图结构、边数限制、[顶点度数](@entry_id:264944)乃至嵌入唯一性的深刻定理。这些原理和机制共同构成了[平面图理论](@entry_id:275055)的核心，为解决从芯片设计到[网络分析](@entry_id:139553)的各类实际问题提供了坚实的数学基础。
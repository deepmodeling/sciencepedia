{"hands_on_practices": [{"introduction": "理论知识的最佳伴侣是动手实践。要真正掌握 Dijkstra 算法，最有效的方法之一就是亲手模拟它的执行过程。下面的练习将引导你逐一完成算法的每一步，在一个小型的网络图中追踪从源头到所有其他节点的最短路径估计值的变化。通过这个练习 [@problem_id:1363296]，你将对算法的核心机制——迭代选择未访问节点和更新距离（即松弛操作）——建立起直观而深刻的理解。", "problem": "一名网络管理员正在分析一个小型数据中心的路由路径。该网络由六台服务器组成，分别标记为 A、B、C、D、E 和 F。直接连接的服务器之间的延迟（单位：毫秒）由以下无向连接给出：\n- A 到 B：4\n- A 到 C：2\n- B 到 C：5\n- B 到 D：10\n- C 到 E：3\n- D 到 E：4\n- D 到 F：11\n- E 到 F：1\n\n从源服务器 A 运行一个标准的单源最短路径算法，以找出到所有其他服务器的最小延迟路径。该算法维护一个从 A 到每个服务器的当前最短路径估计值数组。最初，A 的估计值为 0，所有其他服务器的估计值为无穷大。该算法在所有未确定的服务器中迭代地确定当前估计值最小的服务器，然后更新其邻居的估计值。\n\n您的任务是追踪此估计值数组的状态。请提供六个数组的序列，其中第 k 个数组显示在第 k 个服务器被确定后各估计值。在您的答案中，请按 (A, B, C, D, E, F) 的顺序列出服务器的估计值。将数组序列表示为一个矩阵，其中每一行对应一个服务器被确定后的估计值状态。使用符号 `\\infty` 表示无穷大的估计值。", "solution": "我们从源点 $A$ 应用 Dijkstra 算法。令 $d(X)$ 表示从 $A$ 到服务器 $X$ 的当前最短距离估计值。初始时，$d(A)=0$ 且 $d(B)=d(C)=d(D)=d(E)=d(F)=\\infty$。在每一步中，从未确定的服务器中选择具有最小 $d(\\cdot)$ 值的服务器进行确定，并对已确定服务器 $u$ 的每个相邻顶点 $v$ 使用 $d(v) \\leftarrow \\min\\{d(v), d(u)+w(u,v)\\}$ 进行松弛操作。\n\n第 1 步：确定 $A$，其 $d(A)=0$。对其邻居进行松弛操作：\n- $d(B) \\leftarrow \\min(\\infty, 0+4)=4$,\n- $d(C) \\leftarrow \\min(\\infty, 0+2)=2$。\n第 1 次确定后的状态 (A,B,C,D,E,F):\n$$\n\\begin{pmatrix}\n0  4  2  \\infty  \\infty  \\infty\n\\end{pmatrix}\n$$\n\n第 2 步：确定 $C$，其 $d(C)=2$。对其邻居进行松弛操作：\n- $d(B) \\leftarrow \\min(4, 2+5)=4$ (无变化)，\n- $d(E) \\leftarrow \\min(\\infty, 2+3)=5$。\n第 2 次确定后的状态：\n$$\n\\begin{pmatrix}\n0  4  2  \\infty  5  \\infty\n\\end{pmatrix}\n$$\n\n第 3 步：确定 $B$，其 $d(B)=4$。对其邻居进行松弛操作：\n- $d(D) \\leftarrow \\min(\\infty, 4+10)=14$。\n第 3 次确定后的状态：\n$$\n\\begin{pmatrix}\n0  4  2  14  5  \\infty\n\\end{pmatrix}\n$$\n\n第 4 步：确定 $E$，其 $d(E)=5$。对其邻居进行松弛操作：\n- $d(D) \\leftarrow \\min(14, 5+4)=9$，\n- $d(F) \\leftarrow \\min(\\infty, 5+1)=6$。\n第 4 次确定后的状态：\n$$\n\\begin{pmatrix}\n0  4  2  9  5  6\n\\end{pmatrix}\n$$\n\n第 5 步：确定 $F$，其 $d(F)=6$。对其邻居进行松弛操作：\n- $d(D) \\leftarrow \\min(9, 6+11)=9$ (无变化)。\n第 5 次确定后的状态：\n$$\n\\begin{pmatrix}\n0  4  2  9  5  6\n\\end{pmatrix}\n$$\n\n第 6 步：确定 $D$，其 $d(D)=9$。没有进一步的改进。\n第 6 次确定后的状态：\n$$\n\\begin{pmatrix}\n0  4  2  9  5  6\n\\end{pmatrix}\n$$\n\n按确定顺序将六个数组作为行收集起来，得到：\n$$\n\\begin{pmatrix}\n0  4  2  \\infty  \\infty  \\infty \\\\\n0  4  2  \\infty  5  \\infty \\\\\n0  4  2  14  5  \\infty \\\\\n0  4  2  9  5  6 \\\\\n0  4  2  9  5  6 \\\\\n0  4  2  9  5  6\n\\end{pmatrix}\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\n0  4  2  \\infty  \\infty  \\infty \\\\\n0  4  2  \\infty  5  \\infty \\\\\n0  4  2  14  5  \\infty \\\\\n0  4  2  9  5  6 \\\\\n0  4  2  9  5  6 \\\\\n0  4  2  9  5  6\n\\end{pmatrix}}$$", "id": "1363296"}, {"introduction": "Dijkstra 算法的强大之处在于其核心思想的普适性，它不仅限于寻找单一权重（如距离或时间）最小的路径。在现实世界的问题中，我们常常需要考虑多个优化目标。这个练习 [@problem_id:1496472] 将向你展示如何通过将路径成本定义为一个有序元组（例如 `(总时间, 中转次数)`）并采用字典序比较，来扩展 Dijkstra 算法，从而解决这类多目标优化问题。这揭示了通过修改成本函数来处理更复杂约束的通用策略。", "problem": "一家名为“Stellar Express”的新兴行星际快递服务公司受委托，负责将一个至关重要的低温冷却望远镜部件从其位于地球（E）的主仓库运送至新建立的火星（M）研究前哨站。该运输网络由几个轨道站和拉格朗日点枢纽组成，可以建模为一个加权有向图，其中节点是地点，边权重代表以天为单位的旅行时间。\n\n主要目标是找到一条总旅行时间尽可能最短的路线。然而，每次在站点之间中转（即穿过图中的一条边）都会引入固定的设备故障风险并产生高昂的程序性成本。因此，作为次要目标，在所有能达到最短总旅行时间的路线中，公司必须选择站点间中转次数最少的那一条。\n\n可用路线及其相应的旅行时间如下：\n- 地球 (E) 到站点 A：3 天\n- 地球 (E) 到站点 B：2 天\n- 地球 (E) 到站点 D：9 天\n- 站点 A 到火星 (M)：5 天\n- 站点 A 到站点 D：4 天\n- 站点 B 到站点 C：3 天\n- 站点 C 到站点 D：1 天\n- 站点 C 到火星 (M)：3 天\n- 站点 D 到火星 (M)：1 天\n\n所有路线均为指定方向的单程路线。你的任务是根据公司的双重标准，确定从地球 (E) 到火星 (M) 的最优路径。\n\n请给出这条最优路径的最短总旅行时间以及对应的中转次数。", "solution": "我们将网络建模为一个有向图，节点为 $E, A, B, C, D, M$，边的旅行时间如题目所给为 $w(u,v)$。主要目标是最小化总时间；次要目标是在所有时间最优的路径中，最小化中转（边）的次数。因此，我们定义从 $E$ 到任意节点 $v$ 的路径成本为一个有序对 $(T(v), K(v))$，其中 $T(v)$ 是总旅行时间，$K(v)$ 是中转次数。我们使用修改版的 Dijkstra 算法，按字典序比较成本对，即 $(t_1, k_1)  (t_2, k_2)$ 当且仅当 $t_1  t_2$ 或 ($t_1 = t_2$ 且 $k_1  k_2$)。\n- **初始化**：$d(E) = (0, 0)$，所有其他节点为 $(\\infty, \\infty)$。\n- **提取 E(0,0)**：更新 $d(A) \\leftarrow (3,1)$，$d(B) \\leftarrow (2,1)$，$d(D) \\leftarrow (9,1)$。\n- **提取 B(2,1)**：更新 $d(C) \\leftarrow (2,1) + (3,1) = (5,2)$。\n- **提取 A(3,1)**：更新 $d(M) \\leftarrow (3,1) + (5,1) = (8,2)$。更新 $d(D) \\leftarrow \\min((9,1), (3,1) + (4,1)) = (7,2)$。\n- **提取 C(5,2)**：更新 $d(D) \\leftarrow \\min((7,2), (5,2) + (1,1)) = (6,3)$。更新 $d(M) \\leftarrow \\min((8,2), (5,2) + (3,1)) = (8,2)$ (无变化)。\n- **提取 D(6,3)**：更新 $d(M) \\leftarrow \\min((8,2), (6,3) + (1,1)) = (7,4)$。\n- **提取 M(7,4)**：算法结束。\n\n最终到达火星 $M$ 的最优成本是 $(7, 4)$，意味着最短总旅行时间为 7 天，需要 4 次中转。对应的路径是 $E \\to B \\to C \\to D \\to M$。", "answer": "$$\\boxed{\\begin{pmatrix}7  4\\end{pmatrix}}$$", "id": "1496472"}, {"introduction": "真实世界的网络（如互联网、交通网络）是动态变化的，边的权重会因为各种因素（如网络升级、交通拥堵）而改变。当图中只有一条边的权重减少时，从头重新运行整个 Dijkstra 算法可能是一种浪费。这个练习 [@problem_id:1496504] 探讨了一种更高效的更新策略：我们如何从该变化点出发，局部地传播这一“好消息”，并只更新受影响的路径。这不仅能加深你对松弛操作本质的理解，也揭示了算法在动态环境下的应用潜力。", "problem": "考虑一个小型企业网络，该网络表示为一个有向图，其中服务器是顶点，网络链接是带权边。边的权重表示通信延迟，单位为毫秒 (ms)。该网络由六个服务器组成：一个源服务器 `S`、一个汇服务器 `T`，以及四个中间服务器 `A`、`B`、`C` 和 `D`。\n\n网络拓扑和初始延迟由以下有向边及其权重定义：\n- (S, A)，权重为 3\n- (S, B)，权重为 5\n- (A, B)，权重为 1\n- (A, C)，权重为 2\n- (B, C)，权重为 2\n- (B, D)，权重为 6\n- (C, D)，权重为 1\n- (C, T)，权重为 8\n- (D, T)，权重为 3\n\n一位网络管理员已经运行了 Dijkstra 算法，找到了从源服务器 `S` 到网络中所有其他服务器的最短路径延迟。结果如下：\n- `d[S] = 0`\n- `d[A] = 3`\n- `d[B] = 4`\n- `d[C] = 5`\n- `d[D] = 6`\n- `d[T] = 9`\n\n现在，假设从服务器 `S` 到服务器 `B` 的网络链接升级为新的光纤电缆，其延迟从 5 毫秒减少到 1 毫秒。\n\n为了更新整个网络的最短路径延迟，可以避免完全重新运行 Dijkstra 算法。取而代之的是，可以使用一种更高效的更新过程，该过程从被修改的边开始传播改进。该过程会识别那些最短路径距离可以被改进的顶点，并顺序地松弛它们的出边。对边 `(x, y)` 的一次松弛操作是检查通过 `x` 是否可以缩短到 `y` 的路径，即评估条件 `d[x] + weight(x, y)  d[y]`。\n\n计算在这个高效更新过程中执行的松弛操作的总次数。你的计数应只包括在因边权重变化而顶点 `B` 的最短路径距离被初次更新*之后*发生的松弛操作。", "solution": "我们从给定的图开始，其初始最短路径距离为 $d[S]=0$、$d[A]=3$、$d[B]=4$、$d[C]=5$、$d[D]=6$、$d[T]=9$。边 $(S,B)$ 的权重从 $5$ 减少到 $1$。对 $(x,y)$ 的一次松弛操作会检查是否有 $d[x]+\\text{weight}(x,y)  d[y]$。更新过程如下：\n1.  **更新 B**：首先，我们更新 $B$ 的距离。新路径 $S \\to B$ 的成本是 1，这小于原来的 $d[B]=4$。所以，我们更新 $d[B] = 1$。\n2.  **传播更新**：由于 $B$ 的距离减少了，我们需要从 $B$ 开始，对所有受影响的顶点进行松弛。我们可以将所有距离被更新的顶点放入一个优先队列中。\n    - **处理 B (d[B]=1)**：\n        - 松弛 (B, C)：$d[B] + w(B,C) = 1+2 = 3  d[C]=5$。更新 $d[C]=3$。 (计数 1)\n        - 松弛 (B, D)：$d[B] + w(B,D) = 1+6 = 7 \\not d[D]=6$。无更新。 (计数 2)\n    - **处理 C (d[C]=3)**：\n        - 松弛 (C, D)：$d[C] + w(C,D) = 3+1 = 4  d[D]=6$。更新 $d[D]=4$。 (计数 3)\n        - 松弛 (C, T)：$d[C] + w(C,T) = 3+8 = 11 \\not d[T]=9$。无更新。 (计数 4)\n    - **处理 D (d[D]=4)**：\n        - 松弛 (D, T)：$d[D] + w(D,T) = 4+3 = 7  d[T]=9$。更新 $d[T]=7$。 (计数 5)\n    - **处理 T (d[T]=7)**：没有出边，传播结束。\n\n总共执行了 5 次松弛操作来传播这一更新。", "answer": "$$\\boxed{5}$$", "id": "1496504"}]}
{"hands_on_practices": [{"introduction": "计算一个复杂系统的期望值听起来可能令人望而生畏。幸运的是，期望的线性性是一个强大的工具，它允许我们将问题分解为更小的、可管理的部分。这个关于计算机网络中“单色”连接的练习 [@problem_id:1369264] 提供了一个完美的场景，通过使用指示变量来应用这一原理，展示了如何通过简单的局部概率来理解复杂的全局属性。", "problem": "考虑一个由 $n$ 个节点组成的简单、完全连接的计算机网络模型，其中 $n \\geq 2$。使用一个完全图 $K_n$ 来表示此网络，其中顶点是节点，边表示每对节点之间的直接通信链路。网络中的每个节点被独立地分配一个状态，“活动的”或“空闲的”，每个状态的概率均为 $\\frac{1}{2}$。如果一条边连接的两个节点处于相同的状态（即，两个都活动的或两个都空闲的），则该边被定义为“单色的”。\n\n求网络中单色边数量的期望值关于 $n$ 的一个封闭形式表达式。", "solution": "设 $K_{n}$ 是一个有 $n$ 个顶点的完全图。边的总数是 $\\binom{n}{2}$。独立地给每个顶点分配两种状态之一，“活动的”或“空闲的”，每种状态的概率为 $\\frac{1}{2}$。\n\n为每条边 $e$ 定义一个指示随机变量 $I_{e}$，如果 $e$ 是单色的（其端点具有相同的状态），则 $I_{e}=1$，否则 $I_{e}=0$。单色边的总数是\n$$\nX=\\sum_{e} I_{e},\n$$\n其中求和遍及所有 $\\binom{n}{2}$ 条边。\n\n对于任意一条固定的边 $e=\\{u,v\\}$，它是单色的概率是\n$$\n\\mathbb{P}(I_{e}=1)=\\mathbb{P}(\\text{$u$ 和 $v$ 都是活动的})+\\mathbb{P}(\\text{$u$ 和 $v$ 都是空闲的})=\\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right)+\\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right)=\\frac{1}{2}.\n$$\n\n使用期望的线性性质，\n$$\n\\mathbb{E}[X]=\\sum_{e} \\mathbb{E}[I_{e}]=\\sum_{e} \\mathbb{P}(I_{e}=1)=\\binom{n}{2}\\cdot \\frac{1}{2}.\n$$\n由于 $\\binom{n}{2}=\\frac{n(n-1)}{2}$，我们得到\n$$\n\\mathbb{E}[X]=\\frac{n(n-1)}{2}\\cdot \\frac{1}{2}=\\frac{n(n-1)}{4}.\n$$", "answer": "$$\\boxed{\\frac{n(n-1)}{4}}$$", "id": "1369264"}, {"introduction": "在掌握了指示变量的基础知识后，我们可以探索更巧妙的应用。有时，直接计算一个事件发生的概率很困难，但计算其补集事件（即它不发生的概率）则要简单得多。这个关于测试伪随机数生成器 [@problem_id:1369273] 的问题就是这种“正难则反”思想的经典范例，它也是著名的“赠券收集问题”的一个热身练习。", "problem": "一位软件工程师正在开发一种新的伪随机数生成器 (PRNG)。该 PRNG 设计用于从集合 $\\{1, 2, \\dots, k\\}$ 中均匀随机地输出一个整数，其中 $k$ 是一个正整数。为了进行基本的验证测试，该工程师调用了生成器 $n$ 次，并记录了输出序列。\n\n假设每次调用生成器都是一个独立事件，请确定在这 $n$ 次输出的序列中，将会观测到的不同整数的期望数量。请将您的答案表示为 $n$ 和 $k$ 的函数。", "solution": "设 $X$ 表示在对 PRNG 进行 $n$ 次独立调用后观测到的不同整数的数量，该 PRNG 从集合 $\\{1,2,\\dots,k\\}$ 中均匀随机地输出 $k$ 个值中的一个。\n\n对于每一个 $j \\in \\{1,2,\\dots,k\\}$，定义指示变量 $I_{j}$ 如下：\n$$\nI_{j} =\n\\begin{cases}\n1,  \\text{如果在 } n \\text{ 次输出中数值 } j \\text{ 至少出现一次},\\\\\n0,  \\text{否则}.\n\\end{cases}\n$$\n那么观测到的不同数值的总数是\n$$\nX = \\sum_{j=1}^{k} I_{j}.\n$$\n根据期望的线性性质，\n$$\n\\mathbb{E}[X] = \\sum_{j=1}^{k} \\mathbb{E}[I_{j}] = \\sum_{j=1}^{k} \\mathbb{P}(I_{j}=1).\n$$\n对于一个固定的 $j$，事件 $I_{j}=1$ 意味着 $j$ 至少出现一次。单次调用不产生 $j$ 的概率是 $1-\\frac{1}{k}$。由于各次调用是独立的，因此在 $n$ 次调用中 $j$ 都不出现的概率是 $\\left(1-\\frac{1}{k}\\right)^{n}$。因此，\n$$\n\\mathbb{P}(I_{j}=1) = 1 - \\left(1-\\frac{1}{k}\\right)^{n}.\n$$\n这个值对于每一个 $j$ 都是相同的，所以\n$$\n\\mathbb{E}[X] = k \\left(1 - \\left(1-\\frac{1}{k}\\right)^{n}\\right).\n$$", "answer": "$$\\boxed{k\\left(1-\\left(1-\\frac{1}{k}\\right)^{n}\\right)}$$", "id": "1369273"}, {"introduction": "虽然期望值告诉我们一个随机过程的平均结果，但它没有揭示结果的波动性或离散程度。为了衡量这种不确定性，我们需要引入方差的概念。这个练习 [@problem_id:1369276] 深入探讨了经典的“赠券收集问题”，指导你通过将整个过程分解为一系列独立的几何分布阶段来计算其方差，从而深刻理解随机过程的可变性。", "problem": "一家软件公司正在部署一种新的机器学习算法。质量保证团队已经确定了 $n$ 个关键且不同的边缘案例，这些案例必须在部署前由自动化测试系统进行验证。在每次测试运行中，系统会模拟一个场景，该场景会精确触发这 $n$ 个边缘案例中的一个。对于任何给定的运行，边缘案例的选择是独立的，并且是从所有 $n$ 种可能性中均匀随机选择的。\n\n令 $T$ 为随机变量，表示直到 $n$ 个不同的边缘案例中的每一个都至少被触发一次所需的总测试运行次数。\n\n求 $T$ 的方差 $\\text{Var}(T)$ 关于 $n$ 的闭式解析表达式。您的表达式可以用求和符号书写。", "solution": "令 $T$ 为观测到所有 $n$ 个不同边缘案例所需的总测试运行次数。我们可以将这个总时间分解为一系列随机变量的和，每个随机变量代表等待每个新边缘案例出现的时间。\n\n令 $T_i$ 为在已经发现 $i-1$ 个不同边缘案例的情况下，找到第 $i$ 个新边缘案例所需的额外测试运行次数。那么总运行次数就是这些等待时间的总和：\n$$T = T_1 + T_2 + \\dots + T_n$$\n第一次运行总会产生一个新的边缘案例，所以 $T_1 = 1$，这是一个确定性常数。\n\n现在，我们来确定当 $i  1$ 时 $T_i$ 的分布。假设我们已经观测到 $i-1$ 个不同的边缘案例。那么还有 $n - (i-1) = n-i+1$ 个新的、未被观测到的边缘案例。由于在任何一次运行中，$n$ 个边缘案例中的每一个被触发的可能性都相等，所以在下一次运行中观测到一个新边缘案例（一次“成功”）的概率是：\n$$p_i = \\frac{n - (i-1)}{n} = \\frac{n-i+1}{n}$$\n随机变量 $T_i$ 表示在成功概率为 $p_i$ 的一系列独立伯努利试验中，获得第一次成功所需的试验次数。这意味着 $T_i$ 服从几何分布，即 $T_i \\sim \\text{Geometric}(p_i)$。\n\n找到下一个新边缘案例的过程与找到之前案例的历史是独立的。因此，随机变量 $T_1, T_2, \\dots, T_n$ 是相互独立的。独立随机变量之和的方差等于它们各自方差之和：\n$$\\text{Var}(T) = \\text{Var}\\left(\\sum_{i=1}^{n} T_i\\right) = \\sum_{i=1}^{n} \\text{Var}(T_i)$$\n服从几何分布 $X \\sim \\text{Geometric}(p)$ 的随机变量的方差由 $\\text{Var}(X) = \\frac{1-p}{p^2}$ 给出。我们将此公式应用于每个 $T_i$ 及其对应的成功概率 $p_i$：\n$$\\text{Var}(T_i) = \\frac{1-p_i}{p_i^2} = \\frac{1 - \\frac{n-i+1}{n}}{\\left(\\frac{n-i+1}{n}\\right)^2}$$\n化简分子：\n$$1 - \\frac{n-i+1}{n} = \\frac{n - (n-i+1)}{n} = \\frac{i-1}{n}$$\n将此代入方差表达式中：\n$$\\text{Var}(T_i) = \\frac{\\frac{i-1}{n}}{\\frac{(n-i+1)^2}{n^2}} = \\frac{i-1}{n} \\cdot \\frac{n^2}{(n-i+1)^2} = \\frac{n(i-1)}{(n-i+1)^2}$$\n注意，当 $i=1$ 时，$\\text{Var}(T_1) = \\frac{n(1-1)}{(n-1+1)^2} = 0$，这是正确的，因为 $T_1$ 是一个常数。\n\n现在我们可以通过将 $\\text{Var}(T_i)$ 从 $i=1$ 到 $n$ 求和来得到总方差：\n$$\\text{Var}(T) = \\sum_{i=1}^{n} \\text{Var}(T_i) = \\sum_{i=1}^{n} \\frac{n(i-1)}{(n-i+1)^2}$$\n为了简化这个求和，我们进行换元。令 $k = n-i+1$。\n- 当 $i=1$ 时，$k = n-1+1=n$。\n- 当 $i=n$ 时，$k = n-n+1=1$。\n- 项 $i-1$ 可以用 $k$ 表示：$i = n-k+1 \\Rightarrow i-1 = n-k$。\n\n将这些代入求和式中，并注意到从 $k=n$ 向下加到 $1$ 与从 $k=1$ 向上加到 $n$ 是相同的：\n$$\\text{Var}(T) = \\sum_{k=1}^{n} \\frac{n(n-k)}{k^2}$$\n我们可以将此求和式拆分为两部分：\n$$\\text{Var}(T) = \\sum_{k=1}^{n} \\left(\\frac{n^2}{k^2} - \\frac{nk}{k^2}\\right) = \\sum_{k=1}^{n} \\frac{n^2}{k^2} - \\sum_{k=1}^{n} \\frac{n}{k}$$\n提出不依赖于求和指标 $k$ 的项：\n$$\\text{Var}(T) = n^2 \\sum_{k=1}^{n} \\frac{1}{k^2} - n \\sum_{k=1}^{n} \\frac{1}{k}$$\n这就是 $T$ 的方差的最终闭式表达式。", "answer": "$$\\boxed{n^{2} \\sum_{k=1}^{n} \\frac{1}{k^{2}} - n \\sum_{k=1}^{n} \\frac{1}{k}}$$", "id": "1369276"}]}
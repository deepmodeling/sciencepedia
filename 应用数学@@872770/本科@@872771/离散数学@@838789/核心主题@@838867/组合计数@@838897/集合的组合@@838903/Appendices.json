{"hands_on_practices": [{"introduction": "在组合计数问题中，我们经常遇到“至少一个”这样的要求。直接计算所有满足条件的情况（例如，恰好有一个，恰好有两个……）可能非常繁琐。一个更巧妙、更高效的策略是使用补集原理：计算总的可能性，然后减去完全不满足条件的情况。这个练习 [@problem_id:1356220] 将向你展示如何运用这一核心技巧来解决一个常见的团队组建问题。", "problem": "一家科技公司的网络安全部门有20名分析师。每位分析师专攻三个领域之一：8名是网络安全专家，7名是应用安全专家，其余5名是密码学专家。现需从这20名分析师中选出4人，组建一个快速反应小组。如果小组中必须至少包含一名密码学专家，可以组成多少个不同的4人小组？", "solution": "我们将小组的组建看作无序的组合问题。分析师总数为$20$人，可分为$5$名密码学专家和$15$名非密码学专家（网络安全和应用安全专家的总和）。\n\n我们需要组建一个包含4人且至少有1名密码学专家的小组。根据补集原理，所求的小组数量等于所有可能的4人小组总数减去不包含任何密码学专家的4人小组数量：\n$$\n\\text{数量}=\\binom{20}{4}-\\binom{15}{4}.\n$$\n使用二项式系数的定义计算每一项：\n$$\n\\binom{20}{4}=\\frac{20!}{4!\\,16!}=\\frac{20\\cdot 19\\cdot 18\\cdot 17}{4\\cdot 3\\cdot 2\\cdot 1}=4845,\n$$\n$$\n\\binom{15}{4}=\\frac{15!}{4!\\,11!}=\\frac{15\\cdot 14\\cdot 13\\cdot 12}{4\\cdot 3\\cdot 2\\cdot 1}=1365.\n$$\n因此，\n$$\n\\binom{20}{4}-\\binom{15}{4}=4845-1365=3480.\n$$", "answer": "$$\\boxed{3480}$$", "id": "1356220"}, {"introduction": "真实世界的问题很少只受单一规则的约束。这个练习将难度提升，要求你处理多个相互交织的限制条件：一个成员是预先选定的，两个成员不能同时在场，并且团队必须包含某个类别的成员。当你处理多个“不希望”发生的事件时，它们之间可能存在重叠，直接减去会导致重复计算。容斥原理为我们提供了一个系统性的方法，来精确地修正这种多重约束下的计数问题 [@problem_id:1356226]。", "problem": "一家科技公司正在为一个新的高优先级项目组建一个特别任务小组。可用员工库中有15人，按其主要技能分为：6名软件开发人员、5名数据科学家和4名项目经理。该任务小组必须有且仅有6名成员，并且必须遵守以下规则：\n\n1.  Alice，一名软件开发人员，是首席架构师，已被预选入队。她必须在任务小组中。\n2.  Bob和Charlie，两名数据科学家，有过不愉快的合作经历，不能同时在任务小组中。可以他们中的一个在团队中，或者两个都不在。\n3.  为确保适当的监督，任务小组必须至少包含一名项目经理。\n\n在这些约束条件下，有多少种不同的员工组合可以组成该任务小组？", "solution": "Alice 已被确定在任务小组中，所以我们必须从其他14名员工中选择剩下的5名成员：5名其他软件开发人员、5名数据科学家（包括Bob和Charlie）和4名项目经理。设 $S$ 是这14人的集合，并设 $T \\subset S$ 且 $|T|=5$。约束条件是：必须至少包含一名项目经理，且Bob和Charlie不能同时被包含在内。\n\n在 $T$ 上定义性质：$P$ 是 $T$ 不包含任何项目经理的事件，$Q$ 是 $T$ 同时包含Bob和Charlie的事件。我们要求的是既不满足 $P$ 也不满足 $Q$ 的 $T$ 的数量，根据容斥原理，这等于\n$$\n\\binom{14}{5}-(|P|+|Q|-|P\\cap Q|).\n$$\n计算每一项：\n- 总集合数：$\\binom{14}{5}$。\n- $|P|$：从10名非项目经理（5名除Alice外的开发人员和5名数据科学家）中选择全部5人，所以 $|P|=\\binom{10}{5}$。\n- $|Q|$：包含Bob和Charlie，然后从剩下的12人中选择3人，所以 $|Q|=\\binom{12}{3}$。\n- $|P\\cap Q|$：包含Bob和Charlie且不包含项目经理，然后从8名非项目经理、非（Bob, Charlie）的员工（5名除Alice外的开发人员和3名其他数据科学家）中选择3人，所以 $|P\\cap Q|=\\binom{8}{3}$。\n\n因此，所求的数量是\n$$\n\\binom{14}{5}-\\binom{10}{5}-\\binom{12}{3}+\\binom{8}{3}.\n$$\n计算二项式系数：\n$$\n\\binom{14}{5}=2002,\\quad \\binom{10}{5}=252,\\quad \\binom{12}{3}=220,\\quad \\binom{8}{3}=56.\n$$\n因此，\n$$\n2002-252-220+56=1586.\n$$\n因此，有 $1586$ 种有效的任务小组组合。", "answer": "$$\\boxed{1586}$$", "id": "1356226"}, {"introduction": "组合问题不仅限于选择成员，有时还涉及他们的相对位置。这个练习引入了一种新的约束类型：邻接限制，特别是在一个圆形排列中。圆形排列的挑战在于其“首尾相连”的特性，这使得直接应用线性排列的公式变得困难。解决此类问题的经典策略 [@problem_id:1356216] 是，先将其简化为一个线性问题来求解，然后专门处理并修正因“环形”而产生的特殊情况。", "problem": "一个新成立的星际联邦要组建一个管理委员会。该联邦由10个成员物种组成，其代表们为进行外交议程而围坐在一张大的圆桌旁。该委员会将由3名不同的代表组成。为确保权力平衡并避免被认为有勾结，制定了一条规则：选入委员会的任意两名代表都不能来自在桌边相邻而坐的物种。根据这条规则，可以组成多少个不同的3人委员会？", "solution": "我们将这10个就座的物种标记为圆上的顶点$1,2,\\dots,10$。我们要求的是集合$\\{1,\\dots,10\\}$中没有两个元素在圆上相邻的3元子集的数量；特别地，$\\{1,10\\}$也被禁止作为相邻元素。\n\n首先将其转换为一个线性问题，然后对环形排列进行修正。考虑路径$1,2,\\dots,10$（一条直线）。在长度为$n$的直线上，没有连续整数的3元子集的数量由下式给出\n$$\n\\binom{n - 3 + 1}{3}=\\binom{n - 2}{3},\n$$\n当$n=10$时，该式变为\n$$\n\\binom{8}{3}.\n$$\n这个公式来自于一个标准的双射：如果$1 \\leq a_{1}  a_{2}  a_{3} \\leq n$且$a_{i+1} \\geq a_{i} + 2$（不连续），定义$b_{i} = a_{i} - (i - 1)$。那么$1 \\leq b_{1}  b_{2}  b_{3} \\leq n - 2$，反之$a_{i} = b_{i} + (i - 1)$，这建立了一个与$\\{1,\\dots,n-2\\}$的3元子集的双射，其数量为$\\binom{n-2}{3}$。\n\n因此，对于$n=10$的线性计数为\n$$\n\\binom{8}{3} = 56.\n$$\n\n现在对$1$和$10$之间的环形邻接关系进行调整。在这$56$个子集中，减去那些同时包含$1$和$10$的子集，因为它们在圆上是相邻的。如果选择了$1$和$10$，那么剩下的第三个元素必须避免与$1$和$10$相邻，所以它不能是$2$或$9$，并且没有其他邻接关系需要考虑，因为它是唯一额外选择的元素。因此它可以是$\\{3,4,5,6,7,8\\}$中的任意一个，得到\n$$\n6\n$$\n个这样的子集。\n\n因此，圆上有效的3人委员会的数量为\n$$\n\\binom{8}{3} - 6 = 56 - 6 = 50.\n$$", "answer": "$$\\boxed{50}$$", "id": "1356216"}]}
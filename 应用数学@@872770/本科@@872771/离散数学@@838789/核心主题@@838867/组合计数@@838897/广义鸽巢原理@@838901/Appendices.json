{"hands_on_practices": [{"introduction": "理论的最佳佐证是实践。广义鸽巢原理不仅是一个抽象的数学概念，更是在计算机科学和工程领域解决实际问题的强大工具。第一个练习 [@problem_id:1409193] 将我们带入现代系统设计的核心——数据库分片。通过这个例子，我们将看到如何利用广义鸽巢原理来预测系统负载，并为确保系统的稳定性和可扩展性提供数学保证。", "problem": "一个大型社交媒体平台利用数据库分片架构来分布其用户数据。该系统由 $S = 16$ 个不同的数据库分片组成，索引从0到15。当一个新用户注册时，他们的账户会被分配一个唯一的正整数作为用户ID。然后，系统根据以下规则将该用户的数据分配到特定的分片：ID为 $U$ 的用户被放置在索引为 $I = U \\pmod S$ 的分片中。\n\n一个工程团队正在分析系统负载。他们需要确定必须创建的新用户账户的最小数量，以保证至少有一个分片将负责存储至少 $C = 10$ 个新用户的数据。这个新用户账户的最小数量是多少？", "solution": "我们根据 $I \\equiv U \\pmod{S}$ 将分配过程建模为把新用户放入 $S$ 个分片中。这将用户划分到模 $S$ 的 $S$ 个剩余类中，因此分析负载问题简化为将 $N$ 个新用户分配到 $S$ 个分片中。\n\n根据鸽巢原理：如果将 $N$ 个物品放入 $S$ 个盒子中，那么某个盒子至少包含 $\\left\\lceil \\frac{N}{S} \\right\\rceil$ 个物品。等价地，为了避免任何单个盒子中有 $C$ 个或更多物品，可以在 $S$ 个盒子中的每个盒子最多放置 $C-1$ 个物品，总共为\n$$\nS(C-1)\n$$\n个物品。因此，如果 $N = S(C-1) + 1$，则可以保证至少有一个分片至少包含 $C$ 个用户。\n\n因此，所需的最小数量是\n$$\nN_{\\min} = S(C-1) + 1.\n$$\n代入 $S = 16$ 和 $C = 10$，\n$$\nN_{\\min} = 16(10 - 1) + 1 = 16 \\cdot 9 + 1 = 144 + 1 = 145.\n$$\n因此，需要 $145$ 个新用户账户才能保证至少有一个分片存储了至少 $10$ 个新用户的数据。", "answer": "$$\\boxed{145}$$", "id": "1409193"}, {"introduction": "接下来，我们将探讨广义鸽巢原理在网络安全领域的应用。在海量的网络数据中识别潜在威胁，是保障信息安全的关键。这个练习 [@problem_id:1409213] 模拟了一个入侵检测系统，它需要通过分析数据包的组合特征来发现异常。与前一个练习不同，这里的“鸽巢”是由多个属性（协议和端口）组合而成的，这要求我们首先精确地定义和计算所有可能的情况，然后才能应用原理来确定触发警报的最小阈值。", "problem": "一个网络入侵检测系统旨在监控到特定服务器的流量。该系统根据两个属性对每个传入的数据包进行分类：使用的通信协议和目标端口号。该系统配置为监控 4 种不同的协议：传输控制协议（TCP）、用户数据报协议（UDP）、互联网控制消息协议（ICMP）和地址解析协议（ARP）。在其分析中，该系统仅关注一组预定义的 10 个特定目标端口号。\n\n如果系统观察到足够数量的数据包在其协议和目标端口号上都相同，它会标记一次潜在的协同扫描攻击。假设有源源不断的数据包流到达服务器。系统必须分析的最少数据包数量是多少，才能保证观察到至少 5 个具有完全相同的协议和目标端口号组合的数据包？", "solution": "每个数据包都按有序对（协议，目标端口）进行分类。不同类别的数量是协议数量与监控端口数量的乘积：\n$$\nm = 4 \\cdot 10 = 40.\n$$\n根据广义鸽巢原理，将 $N$ 个数据包分配到 $m$ 个类别中，可以确保某个类别至少有 $\\lceil N/m \\rceil$ 个数据包。\n\n为了保证某个单一类别中至少有 $5$ 个数据包，我们需要\n$$\n\\left\\lceil \\frac{N}{40} \\right\\rceil \\geq 5.\n$$\n这个不等式成立当且仅当\n$$\n\\frac{N}{40}  4 \\quad \\Longleftrightarrow \\quad N  160.\n$$\n因此，满足此条件的最小整数 $N$ 是\n$$\nN = 161.\n$$\n等价地，我们可以观察到，在 40 个类别中的每一个类别中最多可以有 $4$ 个数据包而不会在任何一个类别中达到 $5$ 个，总计 $4 \\cdot 40 = 160$ 个数据包。下一个数据包，即第 $161$ 个，将迫使某个类别至少包含 $5$ 个数据包。", "answer": "$$\\boxed{161}$$", "id": "1409213"}, {"introduction": "最后一个练习将挑战我们解决一个更贴近工业生产和质量控制的问题。在这个场景 [@problem_id:1407938] 中，我们需要从大规模生产的LED中进行抽样，以确保找到具有特定共同属性的足够样本。这个问题的核心挑战不仅在于应用广义鸽巢原理的公式，更在于如何从问题描述中提炼和定义“鸽巢”——即将连续的数据（如产品寿命）离散化为具体的类别。这锻炼了我们将现实世界问题转化为数学模型，并加以解决的关键能力。", "problem": "一家大型电子制造商生产发光二极管（LED），这些二极管被分为三个不同的质量等级：“优质”、“标准”和“经济”。生产后，每个LED的工作寿命都会经过测试。这些设备的可能寿命范围为10,000小时到14,999小时（含）。出于库存管理的目的，记录的寿命总是向下取整到最接近的100小时的倍数。例如，一个测试寿命为12,345小时的LED和一个测试寿命为12,389小时的LED，都被归类为具有12,300小时的寿命。\n\n一位质量控制经理负责检查一批包含所有三种等级LED的大型混合货物。该经理必须从这批货物中随机抽取多少个LED，才能绝对保证他收集到至少25个具有完全相同的质量等级和相同的分类寿命的LED？", "solution": "设可能的分类寿命集合为10000和14900之间（含）的100的倍数。这是一个等差数列，首项 $a_{1}=10000$，末项 $a_{n}=14900$，公差 $d=100$。此类别的数量为\n$$\nn=\\frac{a_{n}-a_{1}}{d}+1=\\frac{14900-10000}{100}+1=49+1=50.\n$$\n共有三个质量等级。因此，组合类别（等级与分类寿命相结合）的总数为\n$$\n3 \\times 50=150.\n$$\n根据鸽巢原理，为避免任何单个类别中有$25$个LED，在$150$个类别中，每个类别最多可以有$24$个，总计为\n$$\n24 \\times 150=3600\n$$\n个LED。因此，再多抽取一个LED即可保证某个类别中至少包含$25$个LED。所以，所需的最小数量为\n$$\n3600+1=3601.\n$$", "answer": "$$\\boxed{3601}$$", "id": "1407938"}]}
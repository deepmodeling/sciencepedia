{"hands_on_practices": [{"introduction": "Cook-Levin定理的证明是构造性的，它提供了一种将任何非确定性图灵机（NTM）的计算过程转化为布尔可满足性（SAT）问题公式的方法。关键的第一步是编码图灵机配置的基本属性。本练习专注于一个基本约束：确保在任何时刻，每个带单元都只包含一个符号，并展示了如何用合取范式（CNF）来表达这个规则。[@problem_id:1405676]", "problem": "在Cook-Levin定理的证明中，一个多项式时间的非确定性图灵机（TM）的计算被转换成一个布尔可满足性问题。这是通过构造一个合取范式（CNF）的公式 $\\Phi$ 来实现的，该公式是可满足的当且仅当该图灵机接受其输入。\n\n考虑这个构造的一部分，用于一个带字母表为 $\\Gamma = \\{s_0, s_1, s_B\\}$ 的图灵机，其中 $s_B$ 是空白符号。纸带的状态由一组布尔变量 $P_{i,j,s}$ 来描述，其中 $P_{i,j,s}$ 为真当且仅当在时间步 $i$，纸带单元 $j$ 包含符号 $s$。\n\n需要强制执行的一个基本约束是，在任何给定的时间，每个纸带单元必须包含字母表中的恰好一个符号。\n\n对于时间步 $i=5$ 和纸带单元 $j=2$ 的特定实例，设变量为 $A = P_{5,2,s_0}$，$B = P_{5,2,s_1}$ 和 $C = P_{5,2,s_B}$。下列哪个用合取范式（CNF）写成的公式，正确地表达了在时间 5，纸带单元 2 包含集合 $\\{s_0, s_1, s_B\\}$ 中恰好一个符号的约束？\n\nA. $(A \\lor B \\lor C) \\land (\\neg A \\lor \\neg B) \\land (\\neg A \\lor \\neg C) \\land (\\neg B \\lor \\neg C)$\n\nB. $(A \\lor B \\lor C)$\n\nC. $(\\neg A \\lor \\neg B) \\land (\\neg A \\lor \\neg C) \\land (\\neg B \\lor \\neg C)$\n\nD. $(A \\land B \\land C)$\n\nE. $(A \\lor \\neg B) \\land (\\neg A \\lor C) \\land (B \\lor \\neg C)$", "solution": "我们正在使用布尔变量来编码Cook-Levin定理中“在给定时间，每个纸带单元恰好有一个符号”的约束。对于时间步 $i=5$ 和纸带单元 $j=2$，定义\n$$\nA = P_{5,2,s_{0}}, \\quad B = P_{5,2,s_{1}}, \\quad C = P_{5,2,s_{B}}.\n$$\n要求该单元格包含来自 $\\{s_{0},s_{1},s_{B}\\}$ 的恰好一个符号，意味着：\n1) $A,B,C$ 中至少有一个为真。\n2) $A,B,C$ 中至多有一个为真。\n\n“至少一个”部分是单个子句\n$$\nA \\lor B \\lor C.\n$$\n“至多一个”部分禁止任何一对变量同时为真，等价于\n$$\n\\lnot(A \\land B), \\quad \\lnot(A \\land C), \\quad \\lnot(B \\land C),\n$$\n其合取范式（CNF）为\n$$\n(\\lnot A \\lor \\lnot B) \\land (\\lnot A \\lor \\lnot C) \\land (\\lnot B \\lor \\lnot C).\n$$\n将两者结合起来，得到合取范式\n$$\n(A \\lor B \\lor C) \\land (\\lnot A \\lor \\lnot B) \\land (\\lnot A \\lor \\lnot C) \\land (\\lnot B \\lor \\lnot C),\n$$\n这对应于选项 A。\n\n为了确认其他选项不正确：\n- B只包含了“至少一个”的部分，并允许多个符号同时存在。\n- C只包含了“至多一个”的部分，并允许三者都为假。\n- D强制三者都为真，这违反了排他性。\n- E不等价于“恰好一个”；例如，当 $A=\\text{false}$，$B=\\text{false}$，$C=\\text{false}$ 时，E中的每个子句的求值结果为\n$$\nA \\lor \\lnot B = \\text{false} \\lor \\text{true} = \\text{true}, \\quad \\lnot A \\lor C = \\text{true} \\lor \\text{false} = \\text{true}, \\quad B \\lor \\lnot C = \\text{false} \\lor \\text{true} = \\text{true},\n$$\n因此，即使 $A,B,C$ 中没有一个为真，E 也是满足的，这违反了“至少一个”的要求。\n\n因此，正确的合取范式是选项 A。", "answer": "$$\\boxed{A}$$", "id": "1405676"}, {"introduction": "除了静态属性，公式还必须捕捉图灵机计算的动态过程——即它如何从一步演变到下一步。一个关键方面是确保未被磁头扫描的带单元内容保持不变。本练习通过考虑对图灵机移动能力的假设性修改，挑战你对这条“一致性”规则背后逻辑的批判性思考。[@problem_id:1455994]", "problem": "在库克-莱文定理的背景下，对于一个给定的非确定性图灵机 (TM) $M$ 和一个输入串 $w$，我们构造一个布尔可满足性公式 $\\phi_M$。该公式是可满足的，当且仅当 $M$ 在多项式时间界限 $T$ 内接受 $w$。该构造依赖于一个描述了图灵机在每个时间步格局的布尔变量表格。设这些变量为：\n- $H(i, j)$: 为真，如果图灵机的读写头在时间步 $i$ 位于带单元 $j$。\n- $S(i, j, s)$: 为真，如果时间步 $i$ 的带单元 $j$ 包含符号 $s$。\n- $Q(i, q)$: 为真，如果图灵机在时间步 $i$ 处于状态 $q$。\n\n这里，$1 \\le i \\le T$，$1 \\le j \\le T$，$s$ 是带字母表 $\\Gamma$ 中的一个符号，$q$ 是状态集中的一个状态。\n\n整个公式的一部分，我们称之为 $\\phi_{\\text{consistency}}$，确保如果读写头当前不位于某个带单元上，则该单元的内容保持不变。对于一个读写头只能向左 (L) 或向右 (R) 移动的标准图灵机，这个公式是：\n$$ \\phi_{\\text{consistency}} = \\bigwedge_{i=1}^{T-1} \\bigwedge_{j=1}^{T} \\bigwedge_{s \\in \\Gamma} \\left( \\neg H(i, j) \\implies \\left( S(i, j, s) \\iff S(i+1, j, s) \\right) \\right) $$\n\n现在，考虑一个修改后的图灵机，其转移函数允许一个额外的读写头移动选项：“保持不动” (S)。这意味着读写头可以在一个时间步内向左、向右移动，或者不移动。必须如何调整公式 $\\phi_{\\text{consistency}}$ 以正确地为这个修改后的图灵机建模？下面是五个可能的公式。请选择能正确表示这个增强型图灵机的 $\\phi_{\\text{consistency}}$ 的那一个。\n\nA. $ \\bigwedge_{i=1}^{T-1} \\bigwedge_{j=1}^{T} \\bigwedge_{s \\in \\Gamma} \\left( \\neg H(i, j) \\implies \\left( S(i, j, s) \\iff S(i+1, j, s) \\right) \\right) $\n\nB. $ \\bigwedge_{i=1}^{T-1} \\bigwedge_{j=1}^{T} \\bigwedge_{s \\in \\Gamma} \\left( (\\neg H(i, j) \\land \\neg H(i+1, j)) \\implies \\left( S(i, j, s) \\iff S(i+1, j, s) \\right) \\right) $\n\nC. $ \\bigwedge_{i=1}^{T-1} \\bigwedge_{j=1}^{T} \\bigwedge_{s \\in \\Gamma} \\left( \\neg H(i, j) \\implies \\left( S(i, j, s) \\implies S(i+1, j, s) \\right) \\right) $\n\nD. $ \\bigwedge_{i=1}^{T-1} \\bigwedge_{j=1}^{T} \\bigwedge_{s \\in \\Gamma} \\left( (H(i, j) \\land H(i+1, j)) \\implies \\left( S(i, j, s) \\iff S(i+1, j, s) \\right) \\right) $\n\nE. $ \\bigwedge_{i=1}^{T-1} \\bigwedge_{j=1}^{T} \\bigwedge_{s \\in \\Gamma} \\left( (\\neg H(i, j-1) \\land \\neg H(i, j) \\land \\neg H(i, j+1)) \\implies \\left( S(i, j, s) \\iff S(i+1, j, s) \\right) \\right) $", "solution": "我们回顾一下预期的语义：$S(i,j,s)$ 编码了在时间 $i$ 单元 $j$ 上的带符号，$H(i,j)$ 编码了在时间 $i$ 读写头正在扫描单元 $j$。在从时间 $i$ 到 $i+1$ 的单次转移中，唯一可以被写入的带单元是在时间 $i$ 时读写头所在的那个单元。因此，对于任何单元 $j$，如果 $\\neg H(i,j)$ 成立，那么单元 $j$ 的内容在时间 $i$ 和 $i+1$ 之间必须保持不变。这个原则与读写头是向左、向右移动还是保持不动无关；保持不动的可能性只影响读写头在时间 $i+1$ 的位置，而不影响在转移过程中哪个单元可以被写入。因此，正确的一致性约束必须断言：\n$$\n\\forall i \\in \\{1,\\dots,T-1\\},\\ \\forall j \\in \\{1,\\dots,T\\},\\ \\forall s \\in \\Gamma:\\quad \\neg H(i,j) \\implies \\left(S(i,j,s) \\iff S(i+1,j,s)\\right).\n$$\n我们现在来检查这些选项。\n\n选项A正是上述公式：\n$$\n\\bigwedge_{i=1}^{T-1}\\bigwedge_{j=1}^{T}\\bigwedge_{s\\in\\Gamma}\\left(\\neg H(i,j)\\implies\\left(S(i,j,s)\\iff S(i+1,j,s)\\right)\\right),\n$$\n它正确地强制要求一个单元的内容只有在时间 $i$ 读写头位于该单元上时才能改变。即使有保持不动的移动，这一点也仍然正确，因为写入单元 $j$ 的能力取决于 $H(i,j)$，而不是 $H(i+1,j)$。\n\n选项B除了要求 $\\neg H(i,j)$ 之外，还要求 $\\neg H(i+1,j)$：\n$$\n(\\neg H(i,j)\\land \\neg H(i+1,j))\\implies \\left(S(i,j,s)\\iff S(i+1,j,s)\\right).\n$$\n这个约束太弱了：如果读写头在时间 $i$ 不在 $j$ 上，但在时间 $i+1$ 移动到了 $j$ 上，那么单元 $j$ 的内容仍然必须保持不变，然而此时前件为假，等价关系没有被强制执行。\n\n选项C将双向蕴含削弱为单向蕴含：\n$$\n\\neg H(i,j)\\implies \\left(S(i,j,s)\\implies S(i+1,j,s)\\right),\n$$\n这未能阻止在读写头不在 $j$ 上时，（单元内容）从一个不同的符号虚假地变为 $s$。\n\n选项D在 $H(i,j)\\land H(i+1,j)$ 时强制等价：\n$$\n(H(i,j)\\land H(i+1,j))\\implies \\left(S(i,j,s)\\iff S(i+1,j,s)\\right),\n$$\n这是不正确的，因为当读写头保持不动时，它可能合法地写入并改变符号；强制等价会禁止合法的写入操作。\n\n选项E要求在时间 $i$ 读写头不在 $j-1$、$j$ 和 $j+1$ 上：\n$$\n(\\neg H(i,j-1)\\land \\neg H(i,j)\\land \\neg H(i,j+1))\\implies \\left(S(i,j,s)\\iff S(i+1,j,s)\\right),\n$$\n其前件太强，当读写头在邻近单元时（即使该单元应保持不变），它未能强制等价，从而允许了非预期的更改。\n\n因此，对于包含向左、向右和保持不动移动的图灵机，$\\phi_{\\text{consistency}}$ 的正确公式正是选项A，与标准情况相比没有变化。", "answer": "$$\\boxed{A}$$", "id": "1455994"}, {"introduction": "Cook-Levin定理规约的威力在于其通用性；它可以适用于标准单带图灵机之外的各种计算模型。最后一个练习要求你将编码方案推广到一个更复杂的双带图灵机。通过确定如何扩展命题变量集，你将巩固对“公式必须在任何时间点为机器的整个配置提供完整且无歧义的描述”这一概念的理解。[@problem_id:1456015]", "problem": "在计算复杂性理论的背景下，我们常常希望通过证明一个非确定性图灵机 (NTM) 可以用一个命题逻辑公式来表示，从而证明一个问题是NP完全的。这涉及到创建一组命题变量，这些变量能够完全描述该机器在计算的每一步中的格局。\n\n考虑一种特殊类型的NTM，它使用两条独立的、无限的读写带，我们称之为带1和带2。长度为 $n$ 的输入串初始时写在带1上，而带2初始时为空白。该机器的转移函数形式为 $\\delta(q, \\sigma_1, \\sigma_2) \\to \\{(q', \\sigma'_1, \\sigma'_2, D_1, D_2), ...\\}$，其中 $q$ 是当前状态，$\\sigma_1$ 和 $\\sigma_2$ 分别是从带1和带2上读取的符号，在得到的新状态 $q'$ 中，机器写入符号 $\\sigma'_1$ 和 $\\sigma'_2$，并根据方向 $D_1, D_2 \\in \\{\\text{Left, Right}\\}$ 在每条带上移动读写头。保证该机器在 $p(n)$ 步内停机，其中 $p(n)$ 是一个关于 $n$ 的多项式。\n\n对于单带NTM，一个标准的构造使用变量来编码在每个时间步 $t$ 的机器状态 ($Q_{q,t}$)、读写头位置 ($H_{i,t}$) 以及每个带单元中的符号 ($S_{i,\\sigma,t}$)。必须如何扩展这组变量，才能正确并直接地为上述双带NTM的格局建模？\n\nA. 增加第二组读写头位置变量，每条带一个。原始的单组带单元变量就足够了，因为机器的状态决定了哪条带正在被修改。\n\nB. 增加第二组读写头位置变量（每条带一个）和第二组独立的带单元内容变量（每条带一个）。\n\nC. 扩充状态变量以指示活动带，例如 $Q_{q,k,t}$ 其中 $k \\in \\{1, 2\\}$，并扩充读写头位置变量以指示活动带。带单元变量不需要改变。\n\nD. 保持状态变量不变，但创建新的变量类型来编码值对，例如一个变量用于读写头位置对 $(i_1, i_2)$，一个变量用于正在读取的符号对 $(\\sigma_1, \\sigma_2)$。\n\nE. 不需要新类型的变量。两条带可以被建模为一条单一的组合带，并且标准的变量集可以在这条更大的带上使用。", "solution": "核心任务是定义一组命题变量，这组变量能够在一个多项式时间界限 $T=p(n)$ 和一个多项式空间界限 $S=p(n)$ 内，唯一地描述双带非确定性图灵机 (NTM) 在其计算过程中的任意时间步 $t$ 的完整格局。一个完整的格局，也称为瞬时描述 (ID)，必须捕捉关于机器状态的所有信息。\n\n对于指定的双带NTM，在时间 $t$ 的一个格局包括：\n1.  机器的当前状态。\n2.  带1上读写头的位置。\n3.  带2上读写头的位置。\n4.  带1的全部内容。\n5.  带2的全部内容。\n\n我们需要创建命题变量来表示这些组成部分中的每一个。让我们基于标准的单带构造来分析每个组成部分的需求。时间 $t$ 的索引范围是从 $0$ 到 $T$，带位置 $i$ 的索引范围是从 $0$ 到 $S$。\n\n**1. 机器状态：**\n机器有一个单一的有限状态集。在任何时间 $t$，它都精确地处于一个状态。这与单带情况相同。我们可以定义变量：\n$Q_{q,t}$ 为真当且仅当机器在时间 $t$ 处于状态 $q$。变量集的这一部分不发生改变。\n\n**2. 读写头位置：**\n机器有两个独立的读写头，每条带一个。带1上读写头的位置独立于带2上读写头的位置。为了捕捉这一点，我们不能使用单一的一组读写头位置变量。我们需要为每个读写头设置一组变量。\n让我们定义它们如下：\n- $H_{1,i,t}$ 为真当且仅当带1的读写头在时间 $t$ 位于位置 $i$。\n- $H_{2,i,t}$ 为真当且仅当带2的读写头在时间 $t$ 位于位置 $i$。\n因此，我们必须引入第二组不同的读写头位置变量来追踪第二个读写头。\n\n**3. 带内容：**\n这两条带是独立的读写带。带1的内容可以根据转移函数在每一步发生变化，并且独立地，带2的内容也可以改变。单一的一组变量 $S_{i,\\sigma,t}$ 是不足的，因为它无法区分“带1上的单元 $i$ 含有符号 $\\sigma$”和“带2上的单元 $i$ 含有符号 $\\sigma$”。为了正确地为系统建模，我们需要分别追踪每条带的内容。\n我们为带单元内容定义两组变量：\n- $S_{1,i,\\sigma,t}$ 为真当且仅当带1的单元 $i$ 在时间 $t$ 含有符号 $\\sigma$。\n- $S_{2,i,\\sigma,t}$ 为真当且仅当带2的单元 $i$ 在时间 $t$ 含有符号 $\\sigma$。\n这意味着我们还必须引入第二组独立的带单元内容变量。\n\n**结论：**\n为了直接为双带NTM建模，我们必须通过增加一组用于第二个读写头位置的新变量和一组用于第二条带内容的新变量来扩充单带变量集。这对应于选项B。\n\n让我们回顾一下其他选项：\n- **A** 是不正确的，因为带内容是独立演化的。单一的一组单元内容变量无法捕捉两条带上不同的串。\n- **C** 是不正确的，因为NTM有一个单一的中心状态，而不是“每条带一个”状态。转移函数依赖于这个单一状态和来自所有带的符号。\n- **D** 是不正确的，因为命题变量是原子的（它们只是真或假）。它们不能编码像值对这样的复合结构。要表示一个值对，需要一组复杂得多的变量，而这最终将等价于拥有两组独立的变量。\n- **E** 是不正确的，因为它描述的是在单带机上*模拟*多带机的方法。虽然这种模拟是可能的，但问题要求为了构造命题公式而对双带机的格局进行*直接*建模。Cook-Levin定理的证明是基于机器的实际定义来构造公式的，而不是基于对它的模拟。因此，对于直接构造来说，这不是正确的方法。", "answer": "$$\\boxed{B}$$", "id": "1456015"}]}
{"hands_on_practices": [{"introduction": "当我们学习了函数的某个性质后，一个很自然的问题是：这个性质在函数运算下是否保持不变？这个练习将探讨一个常见但错误的直觉——两个双射函数之和是否仍然是双射。通过构建一个简单的反例 [@problem_id:1283997]，我们能深刻体会到在数学中严格验证的重要性，而不是依赖直觉。", "problem": "一个函数 $h: A \\to B$ 如果既是单射（一对一）又是满射（映上），则称其为双射。考虑从实数集到自身的函数，即 $f: \\mathbb{R} \\to \\mathbb{R}$ 和 $g: \\mathbb{R} \\to \\mathbb{R}$。令 $S$ 为陈述：“如果 $f$ 和 $g$ 都是双射，那么它们的和，即函数 $h(x) = f(x) + g(x)$，也是一个双射。”\n\n下列哪一对函数 $(f(x), g(x))$ 为陈述 $S$ 提供了一个有效的反例？\n\nA. $f(x) = x+1, \\quad g(x) = -x+1$\nB. $f(x) = x, \\quad g(x) = x^3$\nC. $f(x) = x^2, \\quad g(x) = -x^2$\nD. $f(x) = 2x, \\quad g(x) = -x$\nE. $f(x) = \\sin(x), \\quad g(x) = x$", "solution": "要找到陈述 $S$ 的一个有效反例，我们需要找到一对满足两个条件的函数 $(f,g)$：\n1. $f: \\mathbb{R} \\to \\mathbb{R}$ 和 $g: \\mathbb{R} \\to \\mathbb{R}$ 都必须是双射。\n2. 和函数 $h(x) = f(x) + g(x)$ 必须不是双射。\n\n我们将根据这两个条件分析每个选项。\n\n**选项 A: $f(x) = x+1, \\quad g(x) = -x+1$**\n\n1.  **检查 $f$ 和 $g$ 是否是双射。**\n    - 函数 $f(x) = x+1$ 是一个斜率为 $1$ 的非零线性函数。它是单射的，因为如果 $f(x_1) = f(x_2)$，那么 $x_1+1 = x_2+1$，这意味着 $x_1=x_2$。它是满射的，因为对于任何 $y \\in \\mathbb{R}$，我们可以找到一个 $x = y-1$ 使得 $f(x) = (y-1)+1 = y$。因此，$f(x)$ 是一个双射。\n    - 函数 $g(x) = -x+1$ 是一个斜率为 $-1$ 的非零线性函数。它是单射的，因为如果 $g(x_1) = g(x_2)$，那么 $-x_1+1 = -x_2+1$，这意味着 $x_1=x_2$。它是满射的，因为对于任何 $y \\in \\mathbb{R}$，我们可以找到一个 $x = 1-y$ 使得 $g(x) = -(1-y)+1 = y$。因此，$g(x)$ 是一个双射。\n    - 条件1满足。\n\n2.  **检查和函数 $h(x)$ 是否是双射。**\n    - 和为 $h(x) = f(x) + g(x) = (x+1) + (-x+1) = 2$。\n    - 函数 $h(x)=2$ 是一个常数函数。它不是单射的，因为对于任意两个不同的实数 $x_1$ 和 $x_2$，$h(x_1) = 2 = h(x_2)$。它也不是满射的，因为它的值域是 $\\{2\\}$，而不是整个 $\\mathbb{R}$。因此，$h(x)$ 不是一个双射。\n    - 条件2满足。\n\n由于两个条件都满足，这对函数是一个有效的反例。\n\n**选项 B: $f(x) = x, \\quad g(x) = x^3$**\n\n1.  **检查 $f$ 和 $g$ 是否是双射。**\n    - $f(x)=x$ 是恒等函数，这是一个众所周知的双射。\n    - $g(x)=x^3$ 是一个双射。它是一个严格递增函数（$g'(x)=3x^2 \\ge 0$，且仅在 $x=0$ 时为 $0$），这使得它是单射的。作为一个奇次多项式，其值域为 $\\mathbb{R}$，使其成为满射。\n    - 条件1满足。\n\n2.  **检查和函数 $h(x)$ 是否是双射。**\n    - 和为 $h(x) = x + x^3$。其导数为 $h'(x) = 1+3x^2$。由于对于所有 $x \\in \\mathbb{R}$，$x^2 \\ge 0$，所以 $h'(x) \\ge 1 > 0$。严格为正的导数意味着函数是严格递增的，这保证了它是单射的。作为一个奇次多项式，其值域是 $\\mathbb{R}$，所以它是满射的。因此，$h(x)$ 是一个双射。\n    - 条件2不满足。这不是一个反例。\n\n**选项 C: $f(x) = x^2, \\quad g(x) = -x^2$**\n\n1.  **检查 $f$ 和 $g$ 是否是双射。**\n    - 函数 $f(x)=x^2$ 不是从 $\\mathbb{R}$ 到 $\\mathbb{R}$ 的双射。它不是单射的，因为 $f(-1) = 1 = f(1)$。它不是满射的，因为它的值域是 $[0, \\infty)$，而不是 $\\mathbb{R}$。\n    - 由于 $f(x)$ 不是双射，条件1不满足。我们无需继续进行。这对函数不可能是反例。\n\n**选项 D: $f(x) = 2x, \\quad g(x) = -x$**\n\n1.  **检查 $f$ 和 $g$ 是否是双射。**\n    - $f(x)=2x$ 和 $g(x)=-x$ 都是具有非零斜率的线性函数，所以它们都是双射（理由与选项A相同）。\n    - 条件1满足。\n\n2.  **检查和函数 $h(x)$ 是否是双射。**\n    - 和为 $h(x) = f(x)+g(x) = 2x + (-x) = x$。\n    - 函数 $h(x)=x$ 是恒等函数，它是一个双射。\n    - 条件2不满足。这不是一个反例。\n\n**选项 E: $f(x) = \\sin(x), \\quad g(x) = x$**\n\n1.  **检查 $f$ 和 $g$ 是否是双射。**\n    - 函数 $f(x) = \\sin(x)$ 不是从 $\\mathbb{R}$ 到 $\\mathbb{R}$ 的双射。它不是单射的，因为它是周期性的（例如，$\\sin(0) = \\sin(2\\pi)$）。它不是满射的，因为它的值域是 $[-1, 1]$，而不是 $\\mathbb{R}$。\n    - 由于 $f(x)$ 不是双射，条件1不满足。这对函数不可能是反例。\n\n**结论**\n只有选项A中的函数对满足反例的两个标准：两个函数都是双射，但它们的和不是。", "answer": "$$\\boxed{A}$$", "id": "1283997"}, {"introduction": "双射的概念不仅适用于数字集合，它在处理如字符串之类的离散结构时也至关重要。这个练习将函数定义域从我们熟悉的实数或整数扩展到由字符组成的字符串集合 [@problem_id:1352245]。通过分析一个在字符串前添加固定字符的简单操作，我们将练习如何在非数值的上下文中严格地检验单射性与满射性。", "problem": "在设计一种数据序列化协议时，消息被表示为给定字母表 $\\Sigma$ 上的有限长度字符串。令 $\\Sigma^*$ 表示所有这类字符串的集合，包括用 $\\epsilon$ 表示的空字符串。保证字母表 $\\Sigma$ 至少包含两个不同的字符。\n\n为了给消息加上版本戳，引入了一个建议的转换函数 $f: \\Sigma^* \\to \\Sigma^*$。该函数接收一个消息 $s \\in \\Sigma^*$，并在其前面附加一个固定的特殊字符 $m \\in \\Sigma$。例如，如果 $\\Sigma = \\{0, 1, \\#\\}$，特殊字符是 $m = \\#$，输入消息是 $s = \\text{\"101\"}$，则转换后的消息是 $f(s) = \\text{\"\\#101\"}$。类似地，如果输入是空字符串 $\\epsilon$，则输出是 $f(\\epsilon) = \\text{\"\\#\"}$。\n\n分析这个转换函数 $f$ 的数学性质。下列哪个陈述准确地描述了函数 $f$？\n\nA. 函数 $f$ 是单射（一对一）但不是满射（映上）。\nB. 函数 $f$ 是满射但不是单射。\nC. 函数 $f$ 是一个双射（即既是单射又是满射）。\nD. 函数 $f$ 既不是单射也不是满射。\nE. $f$ 的单射或满射性质取决于从字母表 $\\Sigma$ 中选择的标记字符 $m$。", "solution": "设 $\\Sigma$ 是一个至少包含两个不同字符的字母表，设 $\\Sigma^*$ 是 $\\Sigma$ 上所有有限字符串（包括 $\\epsilon$）构成的自由幺半群，并固定 $m \\in \\Sigma$。定义 $f:\\Sigma^{*} \\to \\Sigma^{*}$ 为对所有 $s \\in \\Sigma^{*}$，有 $f(s)=ms$。\n\n为了检验单射性，使用其定义：如果对所有 $s_{1},s_{2} \\in \\Sigma^{*}$，由 $f(s_{1})=f(s_{2})$ 能推出 $s_{1}=s_{2}$，则 $f$ 是单射。假设 $f(s_{1})=f(s_{2})$。那么\n$$\nms_{1}=ms_{2}.\n$$\n在自由幺半群 $\\Sigma^*$ 中，由于字符串可以唯一分解为符号，拼接运算满足左消去律：如果两个字符串都以相同的第一个符号 $m$ 开头且相等，那么它们剩余的后缀也必定相等。因此，\n$$\ns_{1}=s_{2}.\n$$\n所以 $f$ 是单射。\n\n为了检验满射性，使用其定义：如果对每一个 $t \\in \\Sigma^{*}$，都存在一个 $s \\in \\Sigma^{*}$ 使得 $f(s)=t$，则 $f$ 是满射。对任意 $s \\in \\Sigma^{*}$，其长度满足\n$$\n|f(s)|=|ms|=|s|+1 \\geq 1.\n$$\n因此 $\\epsilon$ 不在 $f$ 的像中，因为对所有 $s$ 都有 $f(s) \\neq \\epsilon$。因此存在 $t=\\epsilon \\in \\Sigma^{*}$ 没有原像，所以 $f$ 不是满射。等价地，$f$ 的像恰好是子集 $m\\Sigma^{*}=\\{ms : s \\in \\Sigma^{*}\\}$，该子集由以 $m$ 开头的字符串组成，它是 $\\Sigma^*$ 的一个真子集；例如，任取一个 $a \\in \\Sigma$ 且 $a \\neq m$（因为 $\\Sigma$ 至少有两个不同字符，所以这样的 $a$ 存在），那么字符串 $a$ 就不在像中。\n\n这些性质不依赖于 $m \\in \\Sigma$ 的具体选择。因此，正确的描述是 $f$ 是单射但不是满射。", "answer": "$$\\boxed{A}$$", "id": "1352245"}, {"introduction": "双射函数最强大的应用之一是建立不同维度集合之间的一一对应。Cantor配对函数就是一个绝佳的例子，它巧妙地将所有二维网格点 $(x, y)$ 唯一地映射到一维的非负整数上。本练习 [@problem_id:1352278] 将让你亲自操作这个著名的函数，通过求解其逆运算来找到特定ID所对应的坐标，从而直观地感受“降维”映射的威力。", "problem": "在一个理论上的数据存储系统中，使用一个无限的二维网格来存储数据节点。每个节点的位置由其坐标 $(x, y)$ 指定，其中 $x$ 和 $y$ 都是来自集合 $\\mathbb{N}_0 = \\{0, 1, 2, ...\\}$ 的非负整数。为了给这些节点创建一个扁平的一维索引，使用了一个配对函数 $f: \\mathbb{N}_0 \\times \\mathbb{N}_0 \\to \\mathbb{N}_0$。这个函数为每个坐标对 $(x, y)$ 分配一个唯一的整数ID，并确保每个非负整数都精确地对应一个坐标对。该函数定义如下：\n\n$$ f(x, y) = \\frac{1}{2}(x+y)(x+y+1) + y $$\n\n一个特定的数据节点被分配了整数ID 2023。请确定该节点的原始网格坐标 $(x, y)$。将您的答案表示为 $(x, y)$ 的一对整数。", "solution": "我们已知康托配对函数 $f(x,y) = \\frac{1}{2}(x+y)(x+y+1) + y$ 和值 $n=2023$。令 $w = x + y$。那么\n$$\nf(x,y) = T(w) + y,\\quad \\text{其中 } T(w) = \\frac{w(w+1)}{2}.\n$$\n为了求 $f$ 的逆，选择唯一的整数 $w$ 使得\n$$\nT(w) \\le n  T(w+1),\n$$\n然后计算\n$$\ny = n - T(w),\\quad x = w - y.\n$$\n为了找到 $w$，解不等式 $T(w) \\le n$，即\n$$\n\\frac{w(w+1)}{2} \\le n \\quad \\Longleftrightarrow \\quad w^{2} + w - 2n \\le 0.\n$$\n等式 $w^{2} + w - 2n = 0$ 的根为\n$$\nw = \\frac{-1 \\pm \\sqrt{1 + 8n}}{2},\n$$\n并且由于 $w \\ge 0$，我们取\n$$\nw = \\left\\lfloor \\frac{-1 + \\sqrt{1 + 8n}}{2} \\right\\rfloor.\n$$\n对于 $n = 2023$，\n$$\nw = \\left\\lfloor \\frac{-1 + \\sqrt{1 + 8 \\cdot 2023}}{2} \\right\\rfloor = \\left\\lfloor \\frac{-1 + \\sqrt{16185}}{2} \\right\\rfloor.\n$$\n我们检查三角数来确定 $n$ 的范围：\n$$\nT(63) = \\frac{63 \\cdot 64}{2} = 2016,\\quad T(64) = \\frac{64 \\cdot 65}{2} = 2080,\n$$\n所以 $2016 \\le 2023  2080$，因此 $w = 63$。那么\n$$\ny = n - T(w) = 2023 - 2016 = 7,\\quad x = w - y = 63 - 7 = 56.\n$$\n直接验证可得\n$$\nf(56,7) = \\frac{1}{2}(56+7)(56+7+1) + 7 = \\frac{1}{2}\\cdot 63 \\cdot 64 + 7 = 2016 + 7 = 2023,\n$$\n所以坐标为 $(x,y) = (56,7)$。", "answer": "$$\\boxed{(56, 7)}$$", "id": "1352278"}]}
## 引言
小数表示法是我们日常生活中接触最频繁、最直观的实数表示形式。从简单的价格标签到复杂的科学计算，我们无时无刻不在与这些数字序列打交道。然而，在这看似简单的记数系统背后，蕴藏着深刻的数学原理，它将分析学、数论与[集合论](@entry_id:137783)等领域紧密地联系在一起。我们常常凭直觉使用小数，却很少深入思考一串无限的数字是如何精确地定义一个数的，以及这串数字的模式又如何揭示该数的内在本质。本文旨在填补从直观应用到严谨理解之间的鸿沟。

我们将系统地剖析[小数展开](@entry_id:142292)的数学结构，从三个层面逐步深入。在“原理与机制”一章中，我们会将小数形式化为无穷级数，探讨有理数与[循环小数](@entry_id:158845)的必然联系，并介绍用于分析小数位的“小数位移映射”。接着，在“应用与跨学科联系”一章中，我们将展示[小数展开](@entry_id:142292)作为一种强大工具，如何被应用于证明[实数的不可数性](@entry_id:139598)、构造奇特的拓扑空间、分析[函数的连续性](@entry_id:193744)，以及理解[测度论](@entry_id:139744)中的“典型”实数概念。最后，“动手实践”部分将提供一系列练习，帮助您巩固所学理论，并将其应用于解决具体问题。通过本次学习，您将不仅掌握小数表示的计算技巧，更能领会它在现代数学框架中的核心地位和理论价值。

## 原理与机制

在上一章中，我们建立了[实数系](@entry_id:157774)的公理化基础。现在，我们将深入探讨实数的一种具体而直观的表示方法——十[进制](@entry_id:634389)小数表示。这种表示法不仅是我们日常计算的基石，其背后更蕴含着深刻的数学原理，将数论、分析学甚至集合论的观点巧妙地联系在一起。本章将系统地阐述小数表示的原理与机制，揭示数字序列与实数属性之间的内在联系。

### 从数字到数：作为[无穷级数](@entry_id:143366)的[小数展开](@entry_id:142292)

任何一个实数 $x$ 都可以被唯一地分解为一个整数部分 $\lfloor x \rfloor$ 和一个小数部分 $\{x\} \in [0, 1)$。我们关注的[焦点](@entry_id:174388)是这个小数部分，它可以表示为一个由数字 $d_k \in \{0, 1, \dots, 9\}$ 构成的无穷序列所对应的无穷级数：
$$
x = \lfloor x \rfloor + \sum_{k=1}^{\infty} d_k 10^{-k}
$$
这个级数的核心思想是，任何实数都可以被一系列精度不断提高的有理数来逼近。对于任意正整数 $n$，我们可以通过截断上述级数来得到 $x$ 的一个**$n$位[有理逼近](@entry_id:136715)**或称**截断**（truncation）：
$$
x_n = \lfloor x \rfloor + \sum_{k=1}^{n} d_k 10^{-k}
$$
这个 $x_n$ 是一个[有限小数](@entry_id:147458)，因此是一个有理数。例如，对于 $\pi = 3.14159265...$，其截断序列为 $x_1 = 3.1$, $x_2 = 3.14$, $x_3 = 3.141$，等等。直观上，随着 $n$ 的增大，$x_n$ 会越来越接近 $x$。

这个逼近过程的精确度可以通过**[截断误差](@entry_id:140949)** $|x - x_n|$ 来衡量。误差本身可以表示为级数的“尾巴”：
$$
x - x_n = \sum_{k=n+1}^{\infty} d_k 10^{-k}
$$
由于每个数字 $d_k$ 的最大值为 $9$，我们可以为这个误差建立一个普适的、仅依赖于 $n$ 的上界。
$$
|x - x_n| = \sum_{k=n+1}^{\infty} d_k 10^{-k} \le \sum_{k=n+1}^{\infty} 9 \cdot 10^{-k}
$$
这是一个[公比](@entry_id:275383)为 $10^{-1}$ 的几何级数。利用求和公式 $\sum_{j=0}^{\infty} r^j = \frac{1}{1-r}$，我们得到：
$$
\sum_{k=n+1}^{\infty} 9 \cdot 10^{-k} = 9 \cdot 10^{-(n+1)} \sum_{j=0}^{\infty} (10^{-1})^j = 9 \cdot 10^{-(n+1)} \cdot \frac{1}{1 - 10^{-1}} = 9 \cdot 10^{-(n+1)} \cdot \frac{10}{9} = 10^{-n}
$$
因此，我们得到了一个至关重要的不等式：
$$
|x - x_n| \le 10^{-n}
$$
这个上界是“紧”的，意味着我们无法找到一个更小的、对所有实数及其所有合法小数表示都成立的上界。要证明这一点，只需考虑数 $x = 10^{-n}$，它可以表示为 $x = 0.0...010...$，也可以表示为 $x = 0.0...00999...$。对于后一种表示，其前 $n$ 位截断 $x_n = 0$，此时误差恰好达到最大值 $|x - x_n| = 10^{-n}$ [@problem_id:1294295]。

这个误差界限表明，当 $n \to \infty$ 时，$10^{-n} \to 0$，因此 $x_n \to x$。这严谨地证明了任何实数都可以通过其小数截断序列来逼近。这个性质被称为**稠密性**（density）：具有[有限小数](@entry_id:147458)表示的数（即形如 $m/10^k$ 的有理数）在实数集 $\mathbb{R}$ 中是稠密的。这意味着在任何两个不相等的实数之间，我们总能找到一个[有限小数](@entry_id:147458)。

稠密性具有重要的实践意义。例如，在工程或科学计算中，我们总是用[有限小数](@entry_id:147458)来近似无理数。这个[误差界](@entry_id:139888)限告诉我们，需要多少位小数才能达到所需的精度。设想我们需要计算 $\sqrt{7}$ 的一个近似值，要求误差小于 $3 \times 10^{-5}$。我们使用 $\sqrt{7} \approx 2.6457513$。我们所用的近似方法是 $s_k(x) = \frac{\lfloor 10^k x \rfloor}{10^k}$。对于 $x-s_k(x)$，我们有 $0 \le x-s_k(x)  10^{-k}$。
- 当 $k=4$ 时，近似值为 $s_4(\sqrt{7}) = 2.6457$。误差为 $\sqrt{7} - 2.6457 \approx 0.0000513 = 5.13 \times 10^{-5}$，这大于我们要求的 $3 \times 10^{-5}$。
- 当 $k=5$ 时，近似值为 $s_5(\sqrt{7}) = 2.64575$。误差为 $\sqrt{7} - 2.64575 \approx 0.0000013 = 1.3 \times 10^{-6}$，这小于 $3 \times 10^{-5}$。
因此，我们需要至少 $5$ 位小数才能满足精度要求 [@problem_id:1294279]。

更有趣的是，我们可以分析[截断误差](@entry_id:140949)的总和。[截断误差](@entry_id:140949) $e_n = x - x_n$ 可以写成 $e_n = 10^{-n}\{10^n x\}$，其中 $\{y\}$ 表示 $y$ 的小数部分。考虑级数 $S = \sum_{n=1}^{\infty} e_n$。对于一个有理数，如 $x = \frac{13}{37} = 0.\overline{351}$，其小数部分序列 $\{10^n x\}$ 会呈现周期性。具体来说，$\{10^n x\}$ 的值仅取决于 $n \pmod 3$。通过分别计算这三种情况的误差，并将它们表示为一个几何级数求和，可以精确地算出这个误差之和为 $\frac{1963}{36963}$ [@problem_id:2295585]。这展示了[小数展开](@entry_id:142292)的周期性如何影响相关的分析计算。

### 从数到数字：小数位移映射

我们已经看到了如何从一个数字序列构建一个实数。反过来，给定一个实数 $x \in [0, 1)$，我们如何提取它的第 $n$ 个小数位 $d_n$ 呢？

考虑将 $x$ 乘以 $10$。这会将其小数点向右移动一位：
$$
10x = 10 \left( \sum_{k=1}^{\infty} d_k 10^{-k} \right) = d_1 + \sum_{k=2}^{\infty} d_k 10^{-(k-1)} = d_1 + \sum_{j=1}^{\infty} d_{j+1} 10^{-j}
$$
从这个表达式中，我们可以清晰地看到，$10x$ 的整数部分就是第一个小数位 $d_1$，即 $d_1 = \lfloor 10x \rfloor$。而其小数部分 $\{10x\} = 10x - \lfloor 10x \rfloor$ 恰好是 $0.d_2d_3d_4...$。

这个过程启发我们定义一个**小数位移映射**（decimal shift map）$T: [0, 1) \to [0, 1)$：
$$
T(x) = \{10x\} = 10x - \lfloor 10x \rfloor
$$
这个映射的作用是“吃掉”第一个小数位，并将后面的小数位向左移动一位。我们可以重复应用这个映射：
- $T^0(x) = x = 0.d_1d_2d_3...$
- $T^1(x) = T(x) = 0.d_2d_3d_4...$
- $T^2(x) = T(T(x)) = 0.d_3d_4d_5...$
- ...
- $T^{n-1}(x) = 0.d_n d_{n+1} d_{n+2}...$

现在，要找到第 $n$ 个小数位 $d_n$ 就变得非常简单了。$d_n$ 正是 $T^{n-1}(x)$ 的第一个小数位。因此，我们可以得到一个提取任意小数位的通用公式 [@problem_id:2295600]：
$$
d_n = \lfloor 10 \cdot T^{n-1}(x) \rfloor
$$
这个公式优雅地将一个数和它的数字序列联系起来，为我们后续讨论[有理数和无理数](@entry_id:173349)的性质提供了强有力的动态系统视角。

### 有理数与[循环小数](@entry_id:158845)的二分法

小数表示最引人入胜的特性之一是它与数的**有理性**（rationality）之间的深刻联系。一个基本定理表明：

**一个实数是有理数，当且仅当其小数表示是最终循环的。**

“最终循环”（eventually periodic）意味着从某一位开始，数字序列以一个固定的块（循环节）无限重复。这包括**[有限小数](@entry_id:147458)**（terminating decimals），因为它们可以看作是循环节为“0”的[循环小数](@entry_id:158845)（例如 $0.5 = 0.5000...$）。

#### [循环小数](@entry_id:158845)必定是有理数

这个方向的证明是构造性的。任何一个最终[循环小数](@entry_id:158845)都可以表示为 $x = A + B$，其中 $A$ 是[有限小数](@entry_id:147458)（非循环部分），$B$ 是一个纯[循环小数](@entry_id:158845)乘以 $10$ 的某个负幂。
例如，考虑 $x=0.1\overline{36}$。我们可以将其写成 $x = 0.1 + 0.0\overline{36}$。纯循环部分 $y = 0.\overline{36}$ 可以通过几何级数求和得到：
$$
y = 36 \cdot 10^{-2} + 36 \cdot 10^{-4} + 36 \cdot 10^{-6} + \dots = \sum_{k=1}^{\infty} 36 \cdot (10^{-2})^k = 36 \cdot \frac{10^{-2}}{1 - 10^{-2}} = \frac{36}{99} = \frac{4}{11}
$$
于是 $x = \frac{1}{10} + \frac{1}{10} \cdot \frac{4}{11} = \frac{1}{10} \left(1 + \frac{4}{11}\right) = \frac{1}{10} \cdot \frac{15}{11} = \frac{15}{110} = \frac{3}{22}$。这是一个有理数。
这个过程可以推广到任何最终[循环小数](@entry_id:158845)，证明了它们都是有理数 [@problem_id:1294304]。这个代数技巧在具体计算中非常有用，例如，当我们需要处理一个以[循环小数](@entry_id:158845)形式给出的数时，如 $N = 0.1\overline{36}$，将其除以5，我们首先将其转换为分数 $\frac{3}{22}$，然后计算 $M = \frac{3}{22 \cdot 5} = \frac{3}{110}$，再通过长除法得到其小数表示 $0.0\overline{27}$ [@problem_id:2295606]。

#### 有理数必定是[循环小数](@entry_id:158845)

这个方向的证明揭示了循环现象的根源。考虑有理数 $x = p/q$，其中 $p, q$ 是整数且 $q \ne 0$。我们可以通过长除法来计算其小数位。在每一步中，我们将前一步的余[数乘](@entry_id:155971)以10，然后除以 $q$。得到的商是下一个小数位，而新的余数则用于下一步计算。
由于除数是 $q$，任何余数 $r$ 必须满足 $0 \le r  q$。因此，可能的余数只有 $q$ 个：$\{0, 1, 2, ..., q-1\}$。
- 如果在某一步中余数变为 $0$，长除法终止，我们就得到了一个[有限小数](@entry_id:147458)。
- 如果余数永远不为 $0$，那么余数序列 $r_1, r_2, r_3, ...$ 只能在集合 $\{1, 2, ..., q-1\}$ 中取值。根据**[鸽巢原理](@entry_id:268698)**，这个序列中最多在第 $q$ 项就必然会重复出现一个之前出现过的余数。一旦余数重复，后续的商（即小数位）和余数序列也将完全重复，从而形成循环。

从小数位移映射 $T(x)=\{10x\}$ 的角度看，这个过程更加清晰。对于有理数 $x=p/q$，其[轨道](@entry_id:137151)（orbit）中的每个点 $T^n(x) = \{10^n p/q\} = \{ (10^n p \pmod q) / q \}$。由于分子 $10^n p \pmod q$ 只能取有限个值，所以[轨道](@entry_id:137151) $O(x) = \{T^n(x) \mid n \ge 0\}$ 是一个**[有限集](@entry_id:145527)**。一个有限的[轨道](@entry_id:137151)意味着状态会重复，从而导致数字序列的循环。反之，如果一个数的[轨道](@entry_id:137151)是有限的，它也必定是有理数。因此，**一个数是有理数当且仅当它在小数位移映射下的[轨道](@entry_id:137151)是有限的** [@problem_id:2295618]。

### [循环小数](@entry_id:158845)的精细结构

有理数的小数表示的结构（即是否有限、非循环部分的长度、循环节的长度）完全由其最简分数形式 $p/q$ 的分母 $q$ 决定。

#### [有限小数](@entry_id:147458)与[循环小数](@entry_id:158845)的判别

一个有理数 $x=p/q$（最简形式）何时具有[有限小数](@entry_id:147458)表示？当且仅当 $x$ 可以被写成 $m/10^k$ 的形式。这意味着 $p/q = m/10^k$，或者 $p \cdot 10^k = m \cdot q$。由于 $p$ 和 $q$ 互质，根据[欧几里得引理](@entry_id:261512)，这要求 $q$ 必须整除 $10^k = 2^k 5^k$。因此，$q$ 的所有素因子必须是 $2$ 或 $5$ [@problem_id:1294294]。

这个原理可以推广到任意整数基底 $b > 1$。一个有理数 $x=p/q$ 在基底 $b$ 下有有限展开，当且仅当分母 $q$ 的所有素因子也都是基底 $b$ 的素因子 [@problem_id:2295631]。例如，分数 $R = \frac{63}{360} = \frac{7}{40} = \frac{7}{2^3 \cdot 5}$。它的分母的素因子是 $2$ 和 $5$。因此，它在基底 $b$ 下是有限的，当且仅当 $b$ 的素因子同时包含 $2$ 和 $5$。例如，在基底 $b=20=2^2 \cdot 5$ 或 $b=30=2 \cdot 3 \cdot 5$ 下，$R$ 是[有限小数](@entry_id:147458)，但在 $b=12=2^2 \cdot 3$ 下则不是。

更进一步，我们可以问：何时两个不同的基底 $b$ 和 $b'$ 会产生完全相同的[有限小数](@entry_id:147458)集合，即 $F_b = F_{b'}$？这当且仅当 $b$ 和 $b'$ 拥有完全相同的素因[子集](@entry_id:261956)合 [@problem_id:2295632]。例如，$b=10=2 \cdot 5$ 和 $b'=20=2^2 \cdot 5$ 拥有相同的素因[子集](@entry_id:261956)合 $\{2, 5\}$，因此它们会生成完全相同的[有限小数](@entry_id:147458)集合。与此相反，$b=10$ 和 $b'=12=2^2 \cdot 3$ 拥有不同的素因[子集](@entry_id:261956)合（分别为 $\{2, 5\}$ 和 $\{2, 3\}$），因此它们生成的[有限小数](@entry_id:147458)集合是不同的。例如，$1/3$ 在基底12中是[有限小数](@entry_id:147458)（$0.4_{12}$），但在基底10中是无限[循环小数](@entry_id:158845)。

#### 非循环部分与循环节的长度

对于非有限的[循环小数](@entry_id:158845)，其结构由分母 $q$ 中与 $10$ [互质](@entry_id:143119)的部分和不互质的部分共同决定。将分母分解为 $q = 2^a 5^b q'$，其中 $\gcd(q', 10)=1$。
- **非循环部分的长度**（pre-period length）由因子 $2^a 5^b$ 决定。具体来说，其长度为 $m = \max(a, b)$。这是因为我们需要将小[数乘](@entry_id:155971)以 $10^m$ 才能将分母中的 $2$ 和 $5$ 的因子完全“吸收”，从而进入纯循环阶段 [@problem_id:2295618]。
- **循环节的长度**（period length）由与基底互质的因子 $q'$ 决定。对于纯[循环小数](@entry_id:158845)（即 $q$ 与 $10$ 互质），循环节的长度 $L$ 等于 $10$ 在模 $q$ 乘法群中的**阶**（order），记作 $\operatorname{ord}_q(10)$。这是使得 $10^L \equiv 1 \pmod q$ 成立的最小正整数 $L$。根据拉格朗日定理，这个阶必然整除[欧拉函数](@entry_id:634684) $\phi(q)$，因此我们有 $L \le \phi(q) \le q-1$。这个 $q-1$ 就是循环节长度的一个通用上界 [@problem_id:1294247]。

这个数论联系在处理不同基底下的循环节长度时尤为强大。例如，要计算有理数 $p/403$ 在基底 $b_1=5$ 和 $b_2=64$ 下的循环节长度之比，我们只需计算相应的阶。由于 $403=13 \cdot 31$，我们有 $L(b, 403) = \operatorname{lcm}(\operatorname{ord}_{13}(b), \operatorname{ord}_{31}(b))$。通过计算可以得到 $L(5, 403) = \operatorname{lcm}(4, 3) = 12$ 和 $L(64, 403) = \operatorname{lcm}(2, 5) = 10$，因此比值为 $\frac{12}{10} = \frac{6}{5}$ [@problem_id:2295615]。

### 表示的模糊性及其后果

虽然小数表示法非常强大，但它并非完全没有瑕疵。其最主要的“缺陷”是表示的**非唯一性**。我们熟知的例子是 $1 = 0.999...$。这个等式可以通过[几何级数](@entry_id:158490)严格证明：
$$
0.999... = \sum_{k=1}^{\infty} 9 \cdot 10^{-k} = \frac{9 \cdot 10^{-1}}{1 - 10^{-1}} = 1
$$
这种非唯一性现象可以推广。任何一个具有[有限小数](@entry_id:147458)表示的数，都还存在一个以无限个 $9$ 结尾的[等价表示](@entry_id:187047)。形式上，如果一个数可以写成 $x = \sum_{k=1}^N d_k 10^{-k}$ 且 $d_N \neq 0$，那么它也可以写成：
$$
x = \left(\sum_{k=1}^{N-1} d_k 10^{-k}\right) + (d_N-1)10^{-N} + \sum_{k=N+1}^{\infty} 9 \cdot 10^{-k}
$$
这精确地描述了拥有两种不同小数表示的数之间的关系：它们共享一个共同的初始段，直到某一位 $d_N > e_N$，然后必须满足 $d_N = e_N + 1$，且后续位数分别为 $d_k=0$ 和 $e_k=9$ [@problem_id:1294302]。

那么，哪些数拥有**唯一**的小数表示呢？只有那些小数表示既不终止（不以无限个 $0$ 结尾）也不以无限个 $9$ 结尾的数。这包括了两[类数](@entry_id:156164) [@problem_id:2295628]：
1.  **无理数**（Irrational numbers），其小数表示永不循环。
2.  **非有限的循环有理数**（e.g., $1/3 = 0.333...$）。

这种表示的模糊性在比较大小时会带来一些麻烦。简单的逐位比较（字典序比较）可能会出错。例如，比较 $x=0.500...$ 和 $y=0.499...$。虽然 $x=y$，但[字典序](@entry_id:143032)比较会在第一位就判定 $x>y$ [@problem_id:2295620]。一个完整正确的比较算法必须处理这种模糊性。标准的做法是**规范化**：首先将所有以无限个 $9$ 结尾的表示转换为其等价的有限表示，然后再进行字典序比较。这样，每个数都拥有唯一的标准表示（不以无限个 $9$ 结尾），此时[字典序](@entry_id:143032)比较的结果才是正确的。

### 无理数与非循环性

通过有理数与[循环小数](@entry_id:158845)的对应关系，我们得到了一个关于无理数的深刻洞见：
**一个实数是无理数，当且仅当其小数表示是无限且不循环的。**

这个特性不仅是一个描述，更是一个强大的证明工具。要证明一个数是无理数，我们只需证明其小数表示不会最终循环。

一个经典的例子是[刘维尔数](@entry_id:186861)的一种变体，如 $x = \sum_{n=1}^{\infty} 10^{-n!}$。其小数表示为：
$$
x = 0.110001000000000000000001...
$$
其中，数字 '1' 出现在第 $k$ 位当且仅当 $k$ 是一个[阶乘](@entry_id:266637)数（$1!, 2!, 3!, ...$）。两个连续的 '1' 之间（例如在第 $n!$ 位和第 $(n+1)!$ 位之间）有 $(n+1)! - n! - 1 = n \cdot n! - 1$ 个 '0'。随着 $n$ 的增大，连续 '0' 的区块长度可以任意长。如果这个小数是循环的，其循环节长度为 $P$，那么小数中连续 '0' 的长度就不可能超过 $P$。但我们能找到任意长的 '0' 区块，这就产生了矛盾。因此，这个数的小数表示不可能是循环的，故 $x$ 是无理数 [@problem_id:1294264]。

同样的方法可以用来证明由其他规则构造的数是无理数。例如，将所有正整数的平方拼接起来构成的数 $y = 0.1491625364964...$。当考虑 $n=10^k$ 时，其平方 $n^2=10^{2k}$ 会在[小数展开](@entry_id:142292)中贡献一个 '1' 和紧随其后的 $2k$ 个 '0'。由于 $k$ 可以任意大，我们再次得到了任意长度的 '0' 串，从而证明了其非循环性，因此 $y$ 是无理数，不可能是任何有理数的平方 [@problem_id:2295596]。

#### 康托的对角线论证

小数表示的理论最终导向了现代数学中最令人震惊的结果之一：实数是**不可数**（uncountable）的。这意味着我们无法像列举整数或有理数那样，将所有实数列在一个无穷列表里。这一发现由格奥尔格·康托（[Georg Cantor](@entry_id:145998)）通过他著名的**对角线论证**（diagonal argument）提出。

论证的核心思想是[反证法](@entry_id:276604)。假设我们可以将 $[0, 1)$ 区间内的所有实数列成一个无穷列表 $L = (x_1, x_2, x_3, ...)$。例如，假设列表的前几项是 [@problem_id:2295609]：
$x_1 = 0.\underline{1}4159...$
$x_2 = 0.7\underline{1}828...$
$x_3 = 0.44\underline{4}44...$
$x_4 = 0.123\underline{4}5...$
$x_5 = 0.9876\underline{5}...$

康托的绝妙之处在于，他构造了一个新的数 $y = 0.y_1y_2y_3...$，这个数通过设计保证与列表中的任何一个数都不同。构造规则是：$y$ 的第 $k$ 位 $y_k$ 与列表上第 $k$ 个数 $x_k$ 的第 $k$ 位 $d_{k,k}$（即对角线上的数字）不同。一个具体的规则可以是 $y_k = (d_{k,k} + 4) \pmod{10}$。
按照这个规则和上面的例子：
- $y_1 = (d_{1,1} + 4) \pmod{10} = (1+4) \pmod{10} = 5$
- $y_2 = (d_{2,2} + 4) \pmod{10} = (1+4) \pmod{10} = 5$
- $y_3 = (d_{3,3} + 4) \pmod{10} = (4+4) \pmod{10} = 8$
- $y_4 = (d_{4,4} + 4) \pmod{10} = (4+4) \pmod{10} = 8$
- $y_5 = (d_{5,5} + 4) \pmod{10} = (5+4) \pmod{10} = 9$

我们构造的数 $y$ 的开头是 $0.55889...$。现在我们来问：这个数 $y$ 在列表 $L$ 中吗？
- $y$ 不可能是 $x_1$，因为它们的第1位不同 ($y_1=5 \ne d_{1,1}=1$)。
- $y$ 不可能是 $x_2$，因为它们的第2位不同 ($y_2=5 \ne d_{2,2}=1$)。
- ...
- 一般地，$y$ 不可能是任何 $x_k$，因为它们的第 $k$ 位不同 ($y_k \ne d_{k,k}$)。

因此，我们找到了一个不在列表 $L$ 中的数 $y$。但这与我们最初的假设“列表 $L$ 包含了所有实数”相矛盾。唯一的结论是，这样的列表根本不可能存在。实数集的“无穷”比有理数集的“无穷”要“大”得多。有理数集是可数的，而实数集是不可数的。

### 高等视角：数字序列的[生成函数](@entry_id:146702)

我们可以将小数表示与[复分析](@entry_id:167282)联系起来，从而获得更深层次的理解。对于一个数 $x = \sum_{n=1}^\infty d_n 10^{-n}$，我们可以定义其数字序列 $(d_n)$ 的**生成函数**（generating function），这是一个复变函数 [@problem_id:2295588]：
$$
f_x(z) = \sum_{n=1}^{\infty} d_n z^n
$$
这个幂级数在[单位圆盘](@entry_id:172324) $|z|1$ 内收敛。令人惊奇的是，数 $x$ 的有理性与函数 $f_x(z)$ 的有理性是等价的。

**定理：$x \in [0, 1)$ 是有理数，当且仅当其数字生成函数 $f_x(z)$ 是一个有理函数（即两个多项式的商）。**

如果 $x$ 是有理数，其数字序列 $(d_n)$ 是最终循环的。例如 $x=0.12\overline{345}$，其数字序列为 $(1, 2, 3, 4, 5, 3, 4, 5, ...)$。
$$
f_x(z) = 1z^1 + 2z^2 + \sum_{j=0}^{\infty} (3z^{3+3j} + 4z^{4+3j} + 5z^{5+3j})
$$
后面的求和部分可以利用[几何级数公式](@entry_id:159114)：
$$
(3z^3+4z^4+5z^5) \sum_{j=0}^{\infty} (z^3)^j = \frac{3z^3+4z^4+5z^5}{1-z^3}
$$
将非循环部分与循环部分相加并通分，我们得到：
$$
f_x(z) = z+2z^2 + \frac{3z^3+4z^4+5z^5}{1-z^3} = \frac{(z+2z^2)(1-z^3) + 3z^3+4z^4+5z^5}{1-z^3} = \frac{z+2z^2+3z^3+3z^4+3z^5}{1-z^3}
$$
这显然是一个有理函数。这个过程可以推广到任何[循环小数](@entry_id:158845)。

反过来，如果 $f_x(z)$ 是一个有理函数，[组合数学](@entry_id:144343)中的一个经典结果告诉我们，其[幂级数展开](@entry_id:273325)的系数序列 $(d_n)$ 必须满足一个[线性递推关系](@entry_id:273376)。由于数字 $d_n$ 被限制在[有限集](@entry_id:145527)合 $\{0, ..., 9\}$ 中，一个满足[线性递推](@entry_id:751323)的整数序列如果是有界的，那么它必然是最终循环的。这就证明了 $x$ 必定是一个有理数。

这个定理优美地揭示了数本身的代数属性（有理性）与其小数表示的结构属性（循环性），以及其数字序列的分析属性（[生成函数](@entry_id:146702)的有理性）之间的三位一体的深刻联系。
{"hands_on_practices": [{"introduction": "掌握了理论知识后，最好的学习方法就是通过实践来巩固。这个练习将引导你完成一个基本但至关重要的任务：给定一个有向图，识别出其所有强连通分量 (SCC)，并构建其对应的收缩图 [@problem_id:1491380]。这是理解图的宏观结构的第一步，也是应用更复杂算法的基础。", "problem": "考虑一个有向图 $G$，其顶点集为 $V = \\{v_1, v_2, v_3, v_4, v_5\\}$，边集为 $E = \\{(v_1, v_2), (v_2, v_3), (v_3, v_1), (v_1, v_4), (v_4, v_5), (v_2, v_5)\\}$。\n\n有向图的一个强连通分量 (SCC) 是一个极大子图，其中对于子图中的每一对有序顶点 $(u, w)$，都存在一条从 $u$ 到 $w$ 的有向路径。\n\n$G$ 的收缩图，记为 $G^{SCC}$，是一个按如下方式构造的有向图：\n1. $G^{SCC}$ 的每个顶点代表 $G$ 的一个强连通分量。\n2. 在 $G^{SCC}$ 中，从代表 SCC $C_i$ 的顶点到代表 SCC $C_j$ 的顶点（其中 $i \\neq j$）存在一条边，当且仅当在 $G$ 中至少存在一条从 $C_i$ 中的某个顶点到 $C_j$ 中某个顶点的边。\n\n确定收缩图 $G^{SCC}$ 中的总边数。", "solution": "我们首先根据定义来确定 $G$ 的强连通分量 (SCC)：一个子图是强连通的，如果对于其中的每一对有序顶点 $(u,w)$，都存在一条从 $u$ 到 $w$ 的有向路径，并且该子图是满足此性质的极大子图。\n\n考虑顶点 $v_{1}, v_{2}, v_{3}$ 以及边 $(v_{1},v_{2})$、$(v_{2},v_{3})$、$(v_{3},v_{1})$。它们形成了一个有向环，因此对于任意 $u,w \\in \\{v_{1},v_{2},v_{3}\\}$，都存在一条从 $u$ 到 $w$ 的有向路径。因此，\n$$\nC_{1}=\\{v_{1},v_{2},v_{3}\\}\n$$\n是强连通的。它是极大的，因为 $v_{4}$ 和 $v_{5}$ 都无法到达 $v_{1},v_{2},v_{3}$中的任何一个顶点（$v_{5}$ 没有出边，而 $v_{4}$ 只有边 $(v_{4},v_{5})$），所以加入 $v_{4}$ 或 $v_{5}$ 会破坏强连通性。\n\n接下来，考察 $v_{4}$ 和 $v_{5}$。存在一条边 $(v_{4},v_{5})$，所以 $v_{4}$ 可以到达 $v_{5}$，但是既没有从 $v_{5}$ 到 $v_{4}$ 的边，也没有从 $v_{5}$ 到 $v_{4}$ 的路径。并且，$v_{5}$ 没有出边。因此 $\\{v_{4},v_{5}\\}$、$\\{v_{4}\\}\\cup C_{1}$ 和 $\\{v_{5}\\}\\cup C_{1}$ 都不是强连通的。所以，剩余的强连通分量是单点集\n$$\nC_{2}=\\{v_{4}\\}, \\quad C_{3}=\\{v_{5}\\}.\n$$\n\n因此，收缩图的顶点集是\n$$\nV^{SCC}=\\{C_{1},C_{2},C_{3}\\}.\n$$\n\n根据收缩图边的定义，对于 $i \\neq j$，在 $G^{SCC}$ 中存在一条边 $(C_{i},C_{j})$，当且仅当存在 $(u,w) \\in E$ 且 $u \\in C_{i}$ 和 $w \\in C_{j}$。我们检查 $G$ 中所有分量间的边：\n- 从 $C_{1}$ 到 $C_{2}$：存在边 $(v_{1},v_{4})$，所以 $(C_{1},C_{2}) \\in E^{SCC}$。\n- 从 $C_{1}$ 到 $C_{3}$：存在边 $(v_{2},v_{5})$，所以 $(C_{1},C_{3}) \\in E^{SCC}$。\n- 从 $C_{2}$ 到 $C_{3}$：存在边 $(v_{4},v_{5})$，所以 $(C_{2},C_{3}) \\in E^{SCC}$。\n- 没有从 $C_{2}$ 到 $C_{1}$、从 $C_{3}$ 到 $C_{1}$ 或从 $C_{3}$ 到 $C_{2}$ 的边，因为在 $E$ 中不存在这样的边。\n\n因此，\n$$\nE^{SCC}=\\{(C_{1},C_{2}),\\,(C_{1},C_{3}),\\,(C_{2},C_{3})\\},\n$$\n且 $G^{SCC}$ 中的总边数为\n$$\n|E^{SCC}|=3.\n$$", "answer": "$$\\boxed{3}$$", "id": "1491380"}, {"introduction": "在能够从图中构建收缩图之后，让我们来挑战一个“逆向工程”问题。这个练习 [@problem_id:1491379] 要求你设计一个有向图，使其收缩图具有特定的拓扑结构——一个源点和两个汇点。通过这个实践，你将更深刻地理解原始图中各个强连通分量之间的边如何决定收缩图的整体形态和属性。", "problem": "在图论中，一个有向图（digraph）$G$ 由一个顶点集 $V$ 和一个称为边的顶点有序对集合 $E$ 组成。一个有向图的强连通分量（SCC）是一个极大的顶点子集 $C \\subseteq V$，使得对于 $C$ 中的每一对顶点 $u, v \\in C$，都存在一条从 $u$ 到 $v$ 的有向路径，以及一条从 $v$ 到 $u$ 的有向路径。\n\n一个有向图 $G$ 的收缩图 $G_{SCC}$ 是通过将 $G$ 的每个强连通分量收缩成一个单一顶点来构造的新有向图。具体来说，如果 $C_1, C_2, \\dots, C_k$ 是 $G$ 的强连通分量，那么 $G_{SCC}$ 的顶点是 $\\{v_1, v_2, \\dots, v_k\\}$，其中 $v_i$ 对应于 $C_i$。在 $G_{SCC}$ 中存在一条从 $v_i$ 到 $v_j$ 的有向边（对于 $i \\neq j$），当且仅当在原始图 $G$ 中存在一条边 $(u,w)$，其中 $u \\in C_i$ 且 $w \\in C_j$。\n\n考虑一个有向图 $G = (V, E)$，其顶点集 $V = \\{1, 2, 3, 4, 5, 6, 7\\}$。下列哪个边集 $E$ 会产生一个有向图，其收缩图恰好有三个顶点，其中一个顶点是源点（没有入边），另外两个是汇点（没有出边）？\n\nA. $E = \\{(1,2), (2,3), (3,1), (4,5), (5,4), (6,7), (7,6), (1,4), (2,6)\\}$\n\nB. $E = \\{(1,2), (2,3), (3,4), (4,5), (5,6), (6,7), (7,1)\\}$\n\nC. $E = \\{(1,2), (2,3), (3,1), (4,5), (5,4), (6,7), (7,6), (1,4), (4,6)\\}$\n\nD. $E = \\{(1,2), (1,3), (4,5), (5,4), (6,7), (7,6), (2,4), (3,6)\\}$", "solution": "我们需要一个有向图，其收缩图恰好有三个顶点，其中一个是源点（没有来自其他强连通分量的入边），另外两个是汇点（没有指向其他强连通分量的出边）。这要求原始图 $G=(V,E)$ 恰好有三个强连通分量（SCC），并且在这些强连通分量之间，唯一的跨分量边是从一个强连通分量分别指向另外两个，此外没有其他跨分量的边。\n\n通过识别强连通分量和跨分量边来分析每个选项。\n\n选项 A: $E=\\{(1,2),(2,3),(3,1),(4,5),(5,4),(6,7),(7,6),(1,4),(2,6)\\}$.\n- 边 $(1,2),(2,3),(3,1)$ 在 $\\{1,2,3\\}$ 上形成一个有向环，所以 $C_{1}=\\{1,2,3\\}$ 是一个强连通分量。\n- 边 $(4,5),(5,4)$ 形成强连通分量 $C_{2}=\\{4,5\\}$。\n- 边 $(6,7),(7,6)$ 形成强连通分量 $C_{3}=\\{6,7\\}$。\n- 跨分量边：$(1,4)$ 产生 $C_{1}\\to C_{2}$；$(2,6)$ 产生 $C_{1}\\to C_{3}$。没有从 $C_{2}$ 或 $C_{3}$ 指向任何其他强连通分量的边，也没有从其他强连通分量进入 $C_{1}$ 的边。\n- 因此，收缩图 $G_{SCC}$ 有三个分别对应于 $C_{1},C_{2},C_{3}$ 的顶点 $v_{1},v_{2},v_{3}$，以及边 $v_{1}\\to v_{2}$ 和 $v_{1}\\to v_{3}$。那么，$v_{1}$ 的入度为 $0$（一个源点），$v_{2},v_{3}$ 的出度为 $0$（汇点）。这符合要求。\n\n选项 B: $E=\\{(1,2),(2,3),(3,4),(4,5),(5,6),(6,7),(7,1)\\}$.\n- 这些边在所有顶点 $\\{1,2,3,4,5,6,7\\}$ 上形成一个单一的有向环，所以整个图是一个强连通分量。\n- 收缩图有一个顶点，而不是三个。这不符合要求。\n\n选项 C: $E=\\{(1,2),(2,3),(3,1),(4,5),(5,4),(6,7),(7,6),(1,4),(4,6)\\}$.\n- 强连通分量与选项A中相同：$C_{1}=\\{1,2,3\\}$, $C_{2}=\\{4,5\\}$, $C_{3}=\\{6,7\\}$。\n- 跨分量边：$(1,4)$ 产生 $C_{1}\\to C_{2}$；$(4,6)$ 产生 $C_{2}\\to C_{3}$。\n- 收缩图是一条路径 $v_{1}\\to v_{2}\\to v_{3}$，从而产生恰好一个源点（$v_{1}$）和一个汇点（$v_{3}$），而 $v_{2}$ 既不是源点也不是汇点。这不符合需要两个汇点的要求。\n\n选项 D: $E=\\{(1,2),(1,3),(4,5),(5,4),(6,7),(7,6),(2,4),(3,6)\\}$.\n- $(4,5),(5,4)$ 构成强连通分量 $C_{2}=\\{4,5\\}$。\n- $(6,7),(7,6)$ 构成强连通分量 $C_{3}=\\{6,7\\}$。\n- 顶点 $1$ 只有指向 $2$ 和 $3$ 的出边，没有路径返回；因此 $1$ 自成一个强连通分量 $C_{1}=\\{1\\}$。\n- 顶点 $2$ 有一条指向 $4$ 的边，没有路径返回；因此 $2$ 自成一个强连通分量 $C_{4}=\\{2\\}$。\n- 顶点 $3$ 有一条指向 $6$ 的边，没有路径返回；因此 $3$ 自成一个强连通分量 $C_{5}=\\{3\\}$。\n- 因此，共有五个强连通分量，而不是三个。这不符合要求。\n\n只有选项A能产生恰好三个强连通分量，其收缩图有一个源点和两个汇点。", "answer": "$$\\boxed{A}$$", "id": "1491379"}, {"introduction": "收缩图是一种强大的抽象工具，但它在简化图结构的同时也必然会丢失部分信息。这个练习 [@problem_id:1491370] 探讨了收缩图的一个有趣特性：两个结构完全不同（非同构）的有向图，却可能拥有完全相同（同构）的收缩图。解决这个问题将帮助你精确地理解收缩图保留了哪些信息，又忽略了哪些关于强连通分量内部结构或分量间连接数量的细节。", "problem": "在图论中，一个有向图 $G = (V, E)$ 由一个顶点集 $V$ 和一个边集 $E$ 组成，其中每条边是表示有向连接的顶点有序对。\n\n分析有向图结构的一个关键概念是将其分解为强连通分量 (SCCs)。有向图中的两个顶点 $u$ 和 $v$ 是相互可达的，如果存在一条从 $u$ 到 $v$ 的有向路径和一条从 $v$ 到 $u$ 的有向路径。一个 SCC 是一个极大的顶点子集，其中每对顶点都是相互可达的。\n\n一个有向图 $G$ 的收缩图是另一个有向图，我们称之为 $G^{SCC}$，它概括了 $G$ 的强连通分量之间的连接。$G^{SCC}$ 中的每个顶点代表 $G$ 的一个强连通分量。在 $G^{SCC}$ 中，从代表 SCC $S_i$ 的顶点到代表 SCC $S_j$ 的顶点存在一条有向边，当且仅当 $i \\neq j$ 且在原始图 $G$ 中存在一条边 $(u,v)$，其中 $u \\in S_i$ 且 $v \\in S_j$。任何有向图的收缩图总是一个有向无环图 (DAG)。\n\n如果两个有向图 $G_1 = (V_1, E_1)$ 和 $G_2 = (V_2, E_2)$ 的顶点集之间存在一个保持邻接性的一一对应（双射）$f: V_1 \\to V_2$，则称它们是同构的。也就是说，边 $(u, v)$ 在 $E_1$ 中当且仅当边 $(f(u), f(v))$ 在 $E_2$ 中。通俗地讲，同构的图具有相同的结构，只是顶点标签不同。\n\n考虑以下有向图对 $(G_1, G_2)$，其中每个图由其顶点集 $V$ 和边集 $E$ 定义。这些图对中，哪一对包含两个非同构但具有同构收缩图的图？\n\nA.\n$G_1$: $V_1=\\{1, 2, 3, 4\\}$, $E_1=\\{(1,2), (2,3), (3,2), (3,4)\\}$\n$G_2$: $V_2=\\{a, b, c\\}$, $E_2=\\{(a,b), (b,b), (b,c)\\}$\n\nB.\n$G_1$: $V_1=\\{1, 2, 3, 4\\}$, $E_1=\\{(1,2), (2,3), (3,4), (4,1)\\}$\n$G_2$: $V_2=\\{a, b, c, d\\}$, $E_2=\\{(a,c), (c,b), (b,d), (d,a)\\}$\n\nC.\n$G_1$: $V_1=\\{1, 2, 3\\}$, $E_1=\\{(1,2), (2,3)\\}$\n$G_2$: $V_2=\\{a, b, c\\}$, $E_2=\\{(a,b), (b,c), (c,a)\\}$\n\nD.\n$G_1$: $V_1=\\{1, 2, 3, 4\\}$, $E_1=\\{(1,2), (2,1), (3,4), (4,3)\\}$\n$G_2$: $V_2=\\{a, b, c, d\\}$, $E_2=\\{(a,b), (b,c), (c,d), (d,a)\\}$", "solution": "我们检查每一对 $(G_{1},G_{2})$ 来确定两个属性：$G_{1}$ 和 $G_{2}$ 是否同构（要求顶点数相等且存在保持邻接性的双射），以及它们的收缩图 $G_{1}^{SCC}$ 和 $G_{2}^{SCC}$ 是否同构（即，由强连通分量导出的相同 DAG 结构）。\n\n选项 A.\n$G_{1}$ 的顶点集为 $V_{1}=\\{1,2,3,4\\}$，边集为 $E_{1}=\\{(1,2),(2,3),(3,2),(3,4)\\}$。其强连通分量为 $\\{2,3\\}$（因为 $(2,3)$ 和 $(3,2)$ 提供了相互可达性），以及单元素集 $\\{1\\}$ 和 $\\{4\\}$（没有返回到 $1$ 的路径，且 $4$ 没有出边）。因此强连通分量为 $S_{1}=\\{1\\}$, $S_{2}=\\{2,3\\}$, $S_{3}=\\{4\\}$，收缩图的边为 $S_{1}\\to S_{2}$（来自 $(1,2)$）和 $S_{2}\\to S_{3}$（来自 $(3,4)$）。因此，$G_{1}^{SCC}$ 是一个三顶点的有向路径。\n\n$G_{2}$ 的顶点集为 $V_{2}=\\{a,b,c\\}$，边集为 $E_{2}=\\{(a,b),(b,b),(b,c)\\}$。其强连通分量为单元素集 $\\{a\\}$, $\\{b\\}$, $\\{c\\}$（$b$ 上的自环使 $\\{b\\}$ 自身成为一个强连通分量，并且没有涉及 $a$ 或 $c$ 的环）。收缩图的边为 $\\{a\\}\\to\\{b\\}$ 和 $\\{b\\}\\to\\{c\\}$。因此，$G_{2}^{SCC}$ 也是一个三顶点的有向路径。由于 $|V_{1}|=4\\neq 3=|V_{2}|$，$G_{1}$ 和 $G_{2}$ 不是同构的，但 $G_{1}^{SCC}$ 和 $G_{2}^{SCC}$ 是同构的。\n\n选项 B.\n$G_1$ 的边集为 $E_{1}=\\{(1,2),(2,3),(3,4),(4,1)\\}$，这是一个有向 4-环，所以整个顶点集是一个强连通分量；$G_{1}^{SCC}$ 是一个单个顶点。$G_2$ 的边集为 $E_{2}=\\{(a,c),(c,b),(b,d),(d,a)\\}$，这也是一个按 $(a,c,b,d,a)$ 顺序的有向 4-环；因此它也是一个强连通分量，$G_{2}^{SCC}$ 是一个单个顶点。此外，双射 $f(1)=a$, $f(2)=c$, $f(3)=b$, $f(4)=d$ 表明 $G_{1}\\cong G_{2}$。这对图不满足要求，因为原始图是同构的。\n\n选项 C.\n$G_{1}$ 的边集为 $E_{1}=\\{(1,2),(2,3)\\}$，是无环的，所以每个顶点是其自身的强连通分量，$G_{1}^{SCC}$ 是一个三顶点的有向路径。$G_{2}$ 的边集为 $E_{2}=\\{(a,b),(b,c),(c,a)\\}$，是一个有向 3-环，所以它是一个强连通分量，$G_{2}^{SCC}$ 是一个单个顶点。收缩图不同构，所以这对图不满足要求。\n\n选项 D.\n$G_{1}$ 有两个强连通分量 $\\{1,2\\}$ 和 $\\{3,4\\}$（因为 $(1,2)$ 和 $(2,1)$ 形成一对相互可达的顶点，而 $(3,4)$ 和 $(4,3)$ 形成另一对），它们之间没有边；因此 $G_{1}^{SCC}$ 是两个孤立顶点。$G_{2}$ 是一个有向 4-环，是一个强连通分量，所以 $G_{2}^{SCC}$ 是一个单个顶点。收缩图不同构，所以这对图不满足要求。\n\n因此，只有选项 A 包含两个非同构但其收缩图同构的图。", "answer": "$$\\boxed{A}$$", "id": "1491370"}]}
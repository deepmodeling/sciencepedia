{"hands_on_practices": [{"introduction": "要真正掌握一个算法，没有什么比一步步地演练更有效了。第一个练习将引导你在一个简单的欧拉图上，做出 Fleury 算法的初始决策。你的任务是应用避桥规则和任何决胜规则来确定回路的最初几条边，为解决更复杂的问题打下坚实的基础 [@problem_id:1504352]。", "problem": "考虑一个无向图 $G$，其顶点集为 $V = \\{A, B, C, D, E, F, G\\}$，边集为 $E = \\{(A,B), (A,C), (B,C), (B,D), (B,E), (C,D), (C,E), (D,F), (D,G), (F,G)\\}$。已知该图是欧拉图，这意味着它包含一条遍历每条边恰好一次并最终回到起点的路径。\n\n寻找这样一条路径的一种算法是 Fleury 算法。该算法的步骤如下：\n1.  从指定的顶点开始。\n2.  从当前顶点出发，遍历任何一条可用的边。一旦一条边被遍历，它就被视为从图中“移除”，在后续所有步骤中均如此。\n3.  一个关键约束是：除非别无选择，否则绝不遍历剩余图中的 *桥*。桥是一条如果被移除，会导致图的连通分量数增加的边。\n4.  如果在任何步骤中可以选择多条边（即，有多条非桥边，或者所有可用边都是桥），则通过选择通往字母顺序最靠前的顶点的边来打破僵局。\n\n您的任务是，从顶点 $A$ 开始，在图 $G$ 上追踪 Fleury 算法的前三次边遍历。以下哪个序列表示了最先访问的四个顶点？\n\nA. A, B, C, A\nB. A, C, B, D\nC. A, B, C, E\nD. A, B, C, D\nE. A, B, D, F", "solution": "我们被要求从顶点 $A$ 开始，对图 $G=(V, E)$ 应用 Fleury 算法。顶点集为 $V = \\{A, B, C, D, E, F, G\\}$，边集为 $E = \\{(A,B), (A,C), (B,C), (B,D), (B,E), (C,D), (C,E), (D,F), (D,G), (F,G)\\}$。我们需要找出最先访问的四个顶点的序列。\n\n**第 0 步：初始状态**\n当前顶点是 $A$。路径是 $(A)$。图是 $G_0 = G$。\n\n**第 1 步：第一次边遍历**\n我们位于顶点 $A$。可用的边是 $(A,B)$ 和 $(A,C)$。我们必须检查这两条边中是否有当前图 $G_0$ 的桥。\n\n*   **考虑边 $(A,B)$**：如果我们从 $G_0$ 中移除 $(A,B)$，图会变得不连通吗？顶点 $A$ 和 $B$ 仍然通过路径 $A-C-B$ 相连。所以，$(A,B)$ 不是桥。\n*   **考虑边 $(A,C)$**：如果我们从 $G_0$ 中移除 $(A,C)$，顶点 $A$ 和 $C$ 仍然通过路径 $A-B-C$ 相连。所以，$(A,C)$ 不是桥。\n\n由于 $(A,B)$ 和 $(A,C)$ 两个选项都不是桥边，我们使用打破僵局的规则。我们必须选择通往字母顺序最靠前的顶点的边。比较 $B$ 和 $C$，$B$ 在前面。因此，我们遍历边 $(A,B)$。\n\n新的路径是 $(A, B)$。新的图 $G_1$ 是从 $G_0$ 中移除边 $(A,B)$ 后的图。我们当前的顶点是 $B$。\n\n**第 2 步：第二次边遍历**\n我们位于顶点 $B$。与 $B$ 相邻的剩余边是 $(B,C)$、$(B,D)$ 和 $(B,E)$。我们必须检查这些边中是否有当前图 $G_1$ 的桥。\n\n*   **考虑边 $(B,C)$**：在 $G_1$ 中，如果我们移除 $(B,C)$，$B$ 和 $C$ 会变得不连通吗？不会，它们仍然通过路径 $B-E-C$（以及 $B-D-C$）相连。所以，$(B,C)$ 不是 $G_1$ 的桥。\n*   **考虑边 $(B,D)$**：在 $G_1$ 中，如果我们移除 $(B,D)$，$B$ 和 $D$ 会变得不连通吗？不会，它们仍然通过路径 $B-C-D$ 相连。所以，$(B,D)$ 不是 $G_1$ 的桥。\n*   **考虑边 $(B,E)$**：在 $G_1$ 中，如果我们移除 $(B,E)$，$B$ 和 $E$ 会变得不连通吗？不会，它们仍然通过路径 $B-C-E$ 相连。所以，$(B,E)$ 不是 $G_1$ 的桥。\n\n所有三个选项都不是桥边。我们对目标顶点 $C, D, E$ 应用字母顺序的打破僵局规则。$C$ 在最前面。我们遍历边 $(B,C)$。\n\n新的路径是 $(A, B, C)$。新的图 $G_2$ 是从 $G_1$ 中移除边 $(B,C)$ 后的图。我们当前的顶点是 $C$。\n\n**第 3 步：第三次边遍历**\n我们位于顶点 $C$。在 $G_2$ 中与 $C$ 相邻的剩余边是 $(C,A)$、$(C,D)$ 和 $(C,E)$。请注意，边 $(A,B)$ 和 $(B,C)$ 已被移除。\n\n*   **考虑边 $(C,A)$**：在 $G_2$ 中，如果我们移除 $(C,A)$，图会变得不连通吗？从顶点 $A$ 出发的唯一剩余边是 $(A,C)$ 本身。移除它将使顶点 $A$ 与图的其余部分（包含仍然相互连接的顶点 B、C、D、E、F、G）隔离。因此，$(C,A)$ 是 $G_2$ 的一个桥。根据 Fleury 算法，除非别无选择，否则我们不能选择桥。\n*   **考虑边 $(C,D)$**：在 $G_2$ 中，如果我们移除 $(C,D)$，$C$ 和 $D$ 会变得不连通吗？路径 $C-E-B-D$ 在 $G_2$ 中仍然存在。所以，$(C,D)$ 不是桥。\n*   **考虑边 $(C,E)$**：在 $G_2$ 中，如果我们移除 $(C,E)$，$C$ 和 $E$ 会变得不连通吗？路径 $C-D-B-E$ 在 $G_2$ 中仍然存在。所以，$(C,E)$ 不是桥。\n\n我们有两个非桥选项：$(C,D)$ 和 $(C,E)$。我们必须避免桥 $(C,A)$。在非桥选项之间应用打破僵局的规则，我们比较目标顶点 $D$ 和 $E$。按字母顺序，$D$ 在 $E$ 之前。因此，我们遍历边 $(C,D)$。\n\n新的路径是 $(A, B, C, D)$。\n\n最先访问的四个顶点的序列是 $A, B, C, D$。这对应于选项 D。", "answer": "$$\\boxed{D}$$", "id": "1504352"}, {"introduction": "Fleury 算法的核心挑战在于每一步都做出正确的选择，尤其是在寻路后期，当剩余图变得不那么直观时。这个练习将你置于一个更复杂网络上正在进行的欧拉回路之中 [@problem_id:1504396]。通过识别图的当前状态并评估潜在的桥，你将锻炼在压力下应用算法核心规则的关键技能。", "problem": "一个机器人维护无人机负责检查连接一个服务器枢纽网络的所有光纤电缆。该网络由一个连通的无向图 $G$ 表示。无人机必须找到一条欧拉回路，每条电缆恰好遍历一次。网络枢纽是顶点，$V = \\{A, B, C, D, E, F, G, H\\}$，电缆连接是边，$E = \\{(A, B), (A, C), (B, C), (B, D), (B, E), (C, D), (C, F), (D, E), (D, F), (E, G), (E, H), (F, G), (F, H)\\}$。注意，边 $(X, Y)$ 与 $(Y, X)$ 是相同的。\n\n无人机使用弗勒里算法来导航这次遍历。它已经开始其行程，并已经遍历了枢纽序列 $A \\to C \\to B \\to D \\to E$。无人机目前位于枢纽 $E$。\n\n根据弗勒里算法的规则，从枢纽 $E$ 出发的以下连接中，哪些是其遍历下一步的有效选择？选择所有适用的选项。\n\nA. 边 $(E, B)$\nB. 边 $(E, G)$\nC. 边 $(E, H)$\nD. A、B、C 都不是有效选项。\nE. A、B、C 都是有效选项。", "solution": "我们对无人机沿路径 $A \\to C \\to B \\to D \\to E$ 遍历了边之后的剩余图进行建模。根据弗勒里算法，一旦一条边被遍历，它就会被移除。从原始边集中，我们移除 $(A,C)$、$(B,C)$、$(B,D)$ 和 $(D,E)$。剩余的边是\n$$\nE_{\\text{rem}}=\\{(A,B),(B,E),(C,D),(C,F),(D,F),(E,G),(E,H),(F,G),(F,H)\\}.\n$$\n在当前顶点 $E$，可用的邻接边是 $(E,B)$、$(E,G)$ 和 $(E,H)$。\n\n弗勒里的规则是：在每一步中，选择一条不属于当前剩余图的桥的边，除非它是唯一可用的边。如果一条边的移除会增加连通分量的数量，那么它就是一条桥。\n\n- 测试 $(E,B)$：如果我们从 $E_{\\text{rem}}$ 中移除 $(E,B)$，顶点 $B$ 仅通过 $(A,B)$ 与 $A$ 连接，并且从 $\\{A,B\\}$ 到图的其余部分没有路径，因此图分裂成连通分量 $\\{A,B\\}$ 和 $\\{C,D,E,F,G,H\\}$。因此 $(E,B)$ 是一座桥，在存在其他选择时不应选择它。\n\n- 测试 $(E,G)$：如果我们从 $E_{\\text{rem}}$ 中移除 $(E,G)$，仍然存在一条从 $E$ 到 $G$ 的路径，即 $E \\to H \\to F \\to G$，因为 $(E,H)$、$(F,H)$ 和 $(F,G)$ 都在 $E_{\\text{rem}}$ 中。因此 $(E,G)$ 不是桥。\n\n- 测试 $(E,H)$：如果我们从 $E_{\\text{rem}}$ 中移除 $(E,H)$，仍然存在一条从 $E$ 到 $H$ 的路径，即 $E \\to G \\to F \\to H$，因为 $(E,G)$、$(F,G)$ 和 $(F,H)$ 都在 $E_{\\text{rem}}$ 中。因此 $(E,H)$ 不是桥。\n\n由于 $(E,G)$ 和 $(E,H)$ 不是桥，而 $(E,B)$ 是桥，弗勒里算法允许在这一步选择 $(E,G)$ 或 $(E,H)$，但不能选择 $(E,B)$。因此，有效的选项是 B 和 C。", "answer": "$$\\boxed{BC}$$", "id": "1504396"}, {"introduction": "理解一个算法也意味着理解其局限性以及规则背后的原因。最后一个练习是一个思想实验，它探讨了当我们将 Fleury 算法错误地应用于一个没有欧拉回路的图时会发生什么 [@problem_id:1504412]。通过分析这种情况，你将对顶点度数、欧拉路径和算法机制之间的理论联系有更深刻的理解。", "problem": "在图论中，如果一个图存在一条经过每条边恰好一次的迹（trail），则称该图具有欧拉路径。如果存在一条起点和终点相同的这样的迹，则称该图具有欧拉回路。一个著名的结论指出：一个连通图具有欧拉路径的充要条件是它恰有两个奇度顶点，而具有欧拉回路的充要条件是其所有顶点都为偶度。\n\n弗勒里算法（Fleury's algorithm）是一种在已知存在欧拉回路的图中寻找该回路的方法。其规则如下：\n1. 从图中的任意一个顶点开始。\n2. 从当前顶点出发，遍历任意一条关联边，但有一个关键条件：不要遍历一座桥（即移除后会使剩余的图不连通的边），除非没有其他选择。\n3. 一旦一条边被遍历，就将其从图中移除。\n4. 重复此过程，直到没有边可以遍历为止。\n\n一位分析师得到了一个连通图 $G$，已知该图恰有两个奇度顶点，我们称之为 $U$ 和 $V$。$G$ 中的所有其他顶点都为偶度。该分析师误解了该算法的适用条件，并试图应用弗勒里算法，希望找到一条欧拉回路。他错上加错地选择了一个偶度顶点 $W$ 作为起始顶点（因此，$W \\neq U$ 且 $W \\neq V$）。\n\n在这些特定情况下，下列哪个陈述正确地描述了算法的终止状态？\n\nA. 算法将成功遍历图中的每一条边，并终止于其中一个奇度顶点，即 $U$ 或 $V$。\nB. 算法将在遍历一条回路后，返回起始顶点 $W$ 时终止。未遍历的边集将构成一条连接两个奇度顶点 $U$ 和 $V$ 的路径。\nC. 算法将在其中一个奇度顶点（$U$ 或 $V$）处卡住，留下一组未遍历的边，这些边形成一个或多个不连通的环。\nD. 算法将在遍历图中每一条边后，终止于起始顶点 $W$。\nE. 算法将终止于一个非 $W$、$U$ 或 $V$ 的顶点，因为从该顶点出发的所有剩余边都是通向不同连通分量的桥。", "solution": "设 $G$ 是一个恰有两个奇度顶点 $U$ 和 $V$ 的连通图，并设 $W$ 是一个偶度起始顶点，满足 $W \\neq U$ 且 $W \\neq V$。回顾一下欧拉迹的度数奇偶性约束：\n- 任何遍历每条边恰好一次的迹，其端点恰好是图中的奇度顶点。因此，在一个恰有两个奇度顶点 $U$ 和 $V$ 的图中，每条欧拉迹都必须从 $\\{U,V\\}$ 中的一个顶点开始，并在另一个顶点结束。\n\n由此，我们可以立即排除两个选项：\n- 不可能遍历所有边并最终停在 $W$ 点，因为这将构成一条欧拉回路，而欧拉回路存在的充要条件是所有顶点的度数均为偶数。由于 $U$ 和 $V$ 是奇度顶点，这种情况不可能发生。因此选项D是不可能的。\n- 也不可能从 $W$ 开始遍历所有边并最终停在 $U$ 或 $V$ 点，因为欧拉迹必须从一个奇度顶点开始。由于 $W$ 是偶度顶点且 $W \\neq U,V$，因此任何遍历所有边的过程都不能从 $W$ 开始。因此选项A是不可能的。\n\n现在来分析弗勒里算法的规则“除非别无选择，否则不走桥”所带来的影响。考虑算法运行中只遍历非桥边的最长初始段。将这段初始迹记为 $T$。在 $T$ 中的每条边被选取时，它都位于当前（剩余）图的一个环上。移除这样一条边会使其两个端点的度数各减1。由于在一个迹中，每次经过一个中间顶点都会使用一条进入的边和一条离开的边，因此这些中间顶点的度数减少量为偶数。特别地：\n- 沿着 $T$ 行进且尚未经过任何桥时，该迹不可能在非起始顶点处卡住，因为通过非桥边到达的每个中间顶点，在那个时刻，总有另一条非桥边可以离开。因此，这个只包含非桥边的最长段 $T$ 必须是一个从 $W$ 开始并回到 $W$ 的闭合回路。\n\n接下来，从 $G$ 中移除 $T$ 的所有边，得到剩余的子图 $G'$。移除一条回路的所有边会保持每个顶点度数的奇偶性：对于每个顶点 $x$，被移除的关联边数量是偶数，因此 $x$ 在 $G'$ 中的度数 $\\deg(x)$ 与其在 $G$ 中的度数具有相同的奇偶性。因此，$G'$ 中仍然恰有两个奇度顶点，即 $U$ 和 $V$。\n\n一个有限图恰有两个奇度顶点的充要条件是它包含一条以这两个顶点为端点的（非空）迹；等价地，$G'$ 的非空部分必须包含一条连接 $U$ 和 $V$ 的路径。此外，由于在构建 $T$ 的每一步中都未经过桥，因此此时任何未遍历的边都不可能构成一个通过与 $W$ 关联的非桥边连接的闭合回路（因为这样的边在构建 $T$ 的过程中本可以被遍历）。因此，未遍历的边集恰好是一条以 $U$ 和 $V$ 为端点的路径。\n\n因此，在这些情况下：\n- 算法首先在遍历一条回路后返回到 $W$，并且\n- 未遍历的边集构成一条连接 $U$ 和 $V$ 的路径。\n\n这恰好是陈述B的内容，而陈述A、C、D和E与上述的度数奇偶性约束和避桥行为不符。", "answer": "$$\\boxed{B}$$", "id": "1504412"}]}
{"hands_on_practices": [{"introduction": "理解了祖先与后代的定义后，一个很好的练习是将其应用于一个具体的结构中并进行计数。这个问题 [@problem_id:1481062] 要求我们计算在一个简单的有向路径图（如一个简化的区块链模型）中所有祖先-后代关系对的总数。这个练习有助于我们将抽象的图论概念转化为一个具体的组合计数问题，是分析更复杂网络结构的基础。", "problem": "在一个分布式账本系统中，交易按时间顺序记录，形成一个链。考虑一个由 $n$ 个区块组成的链的简化模型，这些区块根据其在链中的顺序被标记为 $B_1, B_2, \\dots, B_n$。这个链的结构可以用一个有向图来表示，其中区块是顶点。对于所有从 $1$ 到 $n-1$ 的 $i$，存在一个从区块 $B_i$ 到区块 $B_{i+1}$ 的有向边，表示 $B_{i+1}$ 紧接着 $B_i$ 被附加。\n\n在这个图中，如果存在从顶点 $B_a$ 到顶点 $B_d$ 的有向路径，我们称区块 $B_a$ 是另一个区块 $B_d$ 的“祖先”。那么，这对 $(B_a, B_d)$ 被称为“祖先-后代对”。一个区块不被认为是其自身的祖先。\n\n你的任务是确定一个由 $n$ 个区块组成的链中，不同祖先-后代对的总数。请用一个关于 $n$ 的单一闭式解析表达式来陈述你的答案。", "solution": "按顺序将区块标记为 $B_{1}, B_{2}, \\dots, B_{n}$，其中对于 $i=1,\\dots,n-1$，存在从 $B_{i}$ 到 $B_{i+1}$ 的有向边。由于这是一个线性链，从区块 $B_a$ 到区块 $B_d$ 存在有向路径的充分必要条件是 $a  d$。因此，问题转化为计算满足 $1 \\le a  d \\le n$ 的整数对 $(a, d)$ 的总数。这等价于从集合 $\\{1, 2, \\dots, n\\}$ 中选择两个不同的数，这样的组合数量为 $\\binom{n}{2} = \\frac{n(n-1)}{2}$。", "answer": "$$\\boxed{\\frac{n(n-1)}{2}}$$", "id": "1481062"}, {"introduction": "在许多网络中，识别不同节点的共同祖先至关重要。这个问题 [@problem_id:1481064] 探讨了一个常见模型——完全二分图中的共同祖先概念。通过分析一个信息从“内容创作者”单向流向“订阅者”的假设网络，你将发现图的特定拓扑结构如何简洁地决定了任意两个“订阅者”都拥有完全相同的祖先集合。", "problem": "考虑一个数字内容平台的简化模型。该平台的用户被划分为两个不相交的集合：一个由“内容创作者”组成的集合 $C$ 和一个由“订阅者”组成的集合 $S$。该平台包含 $m$ 个内容创作者和 $n$ 个订阅者。\n\n信息流被建模为一个有向图，其中从用户 $u$ 到用户 $v$ 的一条边表示来自 $u$ 的内容被传递给 $v$。该平台采用一种特定的架构设计：对于每个内容创作者 $c \\in C$ 和每个订阅者 $s \\in S$，都存在一条从 $c$ 到 $s$ 的有向边。图中不存在其他边（即，创作者之间没有边，订阅者之间没有边，也没有从订阅者到创作者的边）。\n\n在这个图中，如果存在一条从用户 $u$ 到另一个用户 $v$ 的、由一条或多条边组成的有向路径，则 $u$ 被定义为 $v$ 的“祖先”。\n\n假设该平台有 $m=23$ 个内容创作者和 $n=57$ 个订阅者。如果选择任意两个不同的订阅者，他们将有多少个共同的祖先？", "solution": "设图中所有顶点的集合为 $V = C \\cup S$，其中 $C$ 是内容创作者的集合，$S$ 是订阅者的集合。我们已知这些集合的大小为 $|C| = m = 23$ 和 $|S| = n = 57$。集合 $C$ 和 $S$ 是不相交的。\n\n题目定义了这个有向图的边集 $E$。一条边 $(u, v)$ 存在当且仅当 $u \\in C$ 且 $v \\in S$。这描述了一个有向完全二分图，所有边都从划分 $C$ 指向划分 $S$。\n\n题目要求我们找出任意两个不同订阅者的共同祖先数量。我们任意选择两个不同的订阅者 $s_1 \\in S$ 和 $s_2 \\in S$，其中 $s_1 \\neq s_2$。\n\n首先，我们确定单个订阅者（比如 $s_1$）的祖先集合。如果存在一条从 $u$ 到 $s_1$ 的有向路径，则用户 $u$ 是 $s_1$ 的祖先。我们来分析一下这个图中的可能路径。任何路径都必须由通过有向边连接的一系列顶点组成。由于所有的边都是从 $C$ 中的顶点指向 $S$ 中的顶点，所以这个图中的任何路径的最大长度只能是1。如果存在一条直接边 $(u, s_1)$，那么就存在一条从 $u$ 到 $s_1$ 的长度为1的路径。\n\n根据图的结构，一条边 $(u, s_1)$ 存在当且仅当 $u \\in C$。因为该图在这个方向上是一个 *完全* 二分图，所以对于 *每个* 创作者 $c \\in C$，边 $(c, s_1)$ 都存在。因此，集合 $C$ 中的每一个顶点都是 $s_1$ 的祖先。不存在长度大于1的路径，所以我们已经找到了所有的祖先。\n$s_1$ 的祖先集合，记作 $Anc(s_1)$，就是集合 $C$。\n$$Anc(s_1) = \\{u \\in V \\mid \\text{there exists a path from } u \\text{ to } s_1\\} = C$$\n\n同样地，对于第二个不同的订阅者 $s_2$，我们可以确定其祖先集合。用户 $u$ 是 $s_2$ 的祖先，如果存在一条从 $u$ 到 $s_2$ 的路径。这同样要求边 $(u, s_2)$ 存在，而这对于所有 $u \\in C$ 都成立。因此，$s_2$ 的祖先集合也是整个创作者集合 $C$。\n$$Anc(s_2) = C$$\n\n$s_1$ 和 $s_2$ 的共同祖先集合是它们各自祖先集合的交集：\n$$\\text{Common Ancestors} = Anc(s_1) \\cap Anc(s_2) = C \\cap C = C$$\n\n题目要求的是共同祖先的 *数量*，即这个交集的大小。\n$$|\\text{Common Ancestors}| = |C|$$\n\n我们已知内容创作者的数量为 $m = 23$。因此， $|C| = 23$。\n任意一对不同订阅者的共同祖先数量为23。注意，订阅者的数量 $n=57$ 与最终答案无关。", "answer": "$$\\boxed{23}$$", "id": "1481064"}, {"introduction": "在数学和计算机科学中，检验我们直觉的正确性至关重要。这个问题 [@problem_id:1481045] 提出了一个关于有向无环图中祖先与后代出度关系的看似合理的论断，并要求你从一系列选项中找出一个反例。这个练习旨在培养你的批判性思维，让你明白直觉需要通过严格证明来验证，而一个反例就足以推翻一个普适性的论断。", "problem": "在图论中，有向图是由一组顶点和连接它们的边组成的，其中边具有与之相关的方向。有向无环图（DAG）是一种没有有向环的有向图。\n\n在有向无环图中，我们定义以下关系和属性：\n- 如果存在一条从顶点 $u$ 到顶点 $v$ 的有向路径，则称顶点 $u$ 是顶点 $v$ 的**祖先**。顶点 $v$ 则被称为 $u$ 的**后代**。根据此定义，一个顶点不是其自身的祖先。\n- 顶点的**出度**是指从该顶点出发的边的数量。\n\n思考以下论断：“对于任何有向无环图，如果顶点 $u$ 是顶点 $v$ 的祖先，那么 $u$ 的出度必须大于或等于 $v$ 的出度。”\n\n您的任务是确定以下哪个图（由其顶点集 $V$ 和边集 $E$ 描述）可以作为该论断的反例。一条边 $(x, y)$ 表示一条从顶点 $x$到顶点 $y$ 的有向边。\n\nA. $V = \\{A, B, C, D, E\\}$, $E = \\{(A, B), (B, C), (C, D), (C, E)\\}$\nB. $V = \\{A, B, C, D\\}$, $E = \\{(A, B), (A, C), (A, D)\\}$\nC. $V = \\{A, B, C\\}$, $E = \\{(A, B), (B, C), (C, A)\\}$\nD. $V = \\{A, B, C, D\\}$, $E = \\{(A, B), (B, C), (C, D)\\}$\nE. $V = \\{A, B, C, D\\}$, $E = \\{(A, C), (A, D), (B, C), (B, D)\\}$", "solution": "我们需要找到一个违反该论断的有向无环图（DAG）：如果 $u$ 是 $v$ 的祖先，则 $\\deg^{+}(u) \\geq \\deg^{+}(v)$，其中 $\\deg^{+}(x)$ 表示顶点 $x$ 的出度。一个反例必须是一个有向无环图，其中存在某个祖先-后代对 $(u,v)$ 使得 $\\deg^{+}(u)  \\deg^{+}(v)$。\n\n逐一分析每个选项：\n\n选项 A：$V=\\{A,B,C,D,E\\}$, $E=\\{(A,B),(B,C),(C,D),(C,E)\\}$。此图没有有向环，因此它是一个有向无环图。计算出度：\n$$\n\\deg^{+}(A)=1,\\quad \\deg^{+}(B)=1,\\quad \\deg^{+}(C)=2,\\quad \\deg^{+}(D)=0,\\quad \\deg^{+}(E)=0.\n$$\n存在一条有向路径 $A \\to B \\to C$，所以 $A$ 是 $C$ 的祖先。比较它们的出度：\n$$\n\\deg^{+}(A)=1 \\quad \\text{和} \\quad \\deg^{+}(C)=2,\n$$\n因此 $\\deg^{+}(A)  \\deg^{+}(C)$，这与该论断相矛盾。所以，A 是一个反例。\n\n选项 B：$V=\\{A,B,C,D\\}$, $E=\\{(A,B),(A,C),(A,D)\\}$。这是一个有向无环图。出度：\n$$\n\\deg^{+}(A)=3,\\quad \\deg^{+}(B)=0,\\quad \\deg^{+}(C)=0,\\quad \\deg^{+}(D)=0.\n$$\n唯一的祖先-后代关系是 $A$ 是 $B$、$C$ 和 $D$ 的祖先。对于每一个这样的 $v$，\n$$\n\\deg^{+}(A)=3 \\geq 0=\\deg^{+}(v),\n$$\n因此该论断成立；不是一个反例。\n\n选项 C：$V=\\{A,B,C\\}$, $E=\\{(A,B),(B,C),(C,A)\\}$。此图包含一个有向环 $A \\to B \\to C \\to A$，所以它不是一个有向无环图。它不能作为针对有向无环图的论断的反例。\n\n选项 D：$V=\\{A,B,C,D\\}$, $E=\\{(A,B),(B,C),(C,D)\\}$。这是一个有向无环图。出度：\n$$\n\\deg^{+}(A)=1,\\quad \\deg^{+}(B)=1,\\quad \\deg^{+}(C)=1,\\quad \\deg^{+}(D)=0.\n$$\n对于链中的任何祖先-后代对，不等式 $\\deg^{+}(u) \\geq \\deg^{+}(v)$ 都成立（对于非终点后代，两者相等；当 $v=D$ 时，严格大于）。不是一个反例。\n\n选项 E：$V=\\{A,B,C,D\\}$, $E=\\{(A,C),(A,D),(B,C),(B,D)\\}$。这是一个有向无环图。出度：\n$$\n\\deg^{+}(A)=2,\\quad \\deg^{+}(B)=2,\\quad \\deg^{+}(C)=0,\\quad \\deg^{+}(D)=0.\n$$\n祖先是 $A$ 或 $B$，后代是 $C$ 或 $D$。在所有情况下，$\\deg^{+}(u) \\geq \\deg^{+}(v)$ 都成立。不是一个反例。\n\n因此，选项中唯一的反例是 A。", "answer": "$$\\boxed{A}$$", "id": "1481045"}]}
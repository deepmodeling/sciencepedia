{"hands_on_practices": [{"introduction": "有根树的高度与根节点的选择密切相关。本练习将展示，对于同一个基础图，仅通过重新指定根节点，树的高度会发生多么巨大的变化。通过探索最简单的非平凡树结构——路径图——你将确定最大和最小可能的高度，从而对根节点的位置如何决定树的整体形态和深度建立坚实的直觉。[@problem_id:1511842]", "problem": "在图论中，路径图 $P_n$ 是一个有 $n$ 个顶点的图，这些顶点标记为 $v_1, v_2, \\ldots, v_n$，并有 $n-1$ 条边连接所有 $1 \\le i  n$ 的 $v_i$ 和 $v_{i+1}$。任何这样的图都可以通过选择其一个顶点作为根来变成一棵有根树。在有根树中，一个顶点的*深度*是指从根到该顶点的唯一路径上的边数。一棵有根树的*高度*是其所有顶点中的最大深度。\n\n设 $H_{max}(n)$ 是从 $P_n$ 形成的有根树在所有可能的根顶点选择下的最大可能高度。类似地，设 $H_{min}(n)$ 是可能的最小高度。\n\n对于一个有 $n$ 个顶点的路径图，其中 $n \\geq 2$，求和 $S(n) = H_{max}(n) + H_{min}(n)$ 关于 $n$ 的闭式表达式。", "solution": "设路径图为 $P_{n}$，其顶点标记为 $v_{1},\\ldots,v_{n}$。选择一个根 $v_{k}$，其中 $1 \\leq k \\leq n$。在该有根树中，$v_{i}$ 的深度是图距离 $\\operatorname{dist}(v_{i},v_{k})=|i-k|$。因此，以 $v_{k}$ 为根的有根树的高度是\n$$\nh(k)=\\max_{1 \\leq i \\leq n} |i-k|=\\max\\{k-1,\\,n-k\\}.\n$$\n\n为了求 $H_{\\max}(n)$，我们需要对所有 $k$ 最大化 $h(k)$。对于任何 $k$，$k-1$ 和 $n-k$ 都至多为 $n-1$，并且当取 $k=1$ 或 $k=n$ 时，得到 $h(k)=n-1$。因此，\n$$\nH_{\\max}(n)=n-1.\n$$\n\n为了求 $H_{\\min}(n)$，我们需要对所有 $k$ 最小化 $h(k)=\\max\\{k-1,n-k\\}$。设 $a=k-1$ 和 $b=n-k$，所以 $a,b \\geq 0$ 且 $a+b=n-1$。对于任何这样的 $a,b$，\n$$\n\\max\\{a,b\\} \\geq \\frac{a+b}{2}=\\frac{n-1}{2},\n$$\n所以 $\\max\\{a,b\\} \\geq \\left\\lceil\\frac{n-1}{2}\\right\\rceil$。这个下界可以通过选择 $k$ 使得 $a$ 和 $b$ 尽可能相等来达到，即选择中心顶点（如果 $n$ 是奇数）或两个中心顶点之一（如果 $n$ 是偶数）。因此\n$$\nH_{\\min}(n)=\\left\\lceil\\frac{n-1}{2}\\right\\rceil=\\left\\lfloor\\frac{n}{2}\\right\\rfloor.\n$$\n\n因此所求的和为\n$$\nS(n)=H_{\\max}(n)+H_{\\min}(n)=(n-1)+\\left\\lfloor\\frac{n}{2}\\right\\rfloor.\n$$\n等价地，如果 $n$ 是偶数，$S(n)=\\frac{3n}{2}-1$；如果 $n$ 是奇数，$S(n)=\\frac{3(n-1)}{2}$。", "answer": "$$\\boxed{n-1+\\left\\lfloor \\frac{n}{2} \\right\\rfloor}$$", "id": "1511842"}, {"introduction": "在掌握了如何确定高度之后，我们现在可以通过一个经典的概念性问题来检验我们的理解。直觉上，移除树的一部分似乎会使其变小，但移除一个叶节点是否总能降低树的高度呢？这个问题挑战你超越直觉，运用高度的严格定义来分析此操作的后果，揭示了图中全局属性与局部属性之间的重要细微差别。[@problem_id:1511861]", "problem": "在图论中，**树**是一个不含环的连通图。**有根树**是一种树，其中一个特殊的顶点被指定为**根**。这种结构建立了一个父子层次结构。有根树中任意顶点的**深度**是指从根到该顶点的唯一路径上的边数。根本身的深度为0。有根树的**高度**定义为树中所有顶点的最大深度。**叶子**是指没有子节点的顶点。\n\n设 $T$ 是一棵高度为 $h(T) \\ge 1$ 的有根树。从 $T$ 中选择一个叶节点，并移除它以及连接它与其父节点的边，从而形成一棵新树 $T'$。设 $h(T')$ 表示所得树 $T'$ 的高度。\n\n对于*任意*高度 $h(T) \\ge 1$ 的有根树 $T$ 和*任意*选择移除的叶节点，下列哪个陈述正确描述了 $h(T)$ 和 $h(T')$ 之间的关系？\n\nA. $h(T')  h(T)$ 恒成立。\n\nB. $h(T') = h(T) - 1$ 恒成立。\n\nC. $h(T') \\le h(T)$ 恒成立，且 $h(T') = h(T)$ 是可能的。\n\nD. $h(T') = h(T)$ 恒成立。\n\nE. $h(T')$ 可能大于 $h(T)$。", "solution": "设该有根树为 $T$，根为 $r$，高度为 $h(T) \\ge 1$。设 $v$ 是 $T$ 中深度为 $d(v)$ 的一个叶节点，通过移除 $v$ 及其关联的边来形成 $T'$。\n\n首先，注意到从一棵树中移除一个叶节点会得到另一棵树：由于 $v$ 的度为1，删除 $v$ 及其唯一的关联边不会使任何剩余的顶点断开连接，因此 $T'$ 是连通且无环的。\n\n对于任何剩余的顶点 $u \\neq v$，它在 $T'$ 中的深度等于它在 $T$ 中的深度。这是因为 $u$ 的深度是从 $r$ 到 $u$ 的唯一路径的长度。在 $T$ 中，这条路径不可能经过 $v$（除非 $u=v$），因为 $v$ 是一个叶节点，没有后代。因此，对于所有 $u \\in V(T')$，从 $r$ 到 $u$ 在 $T'$ 中的路径与在 $T$ 中的路径是相同的，故\n$$\n\\text{for all } u \\in V(T'), \\quad \\text{depth}_{T'}(u)=\\text{depth}_{T}(u).\n$$\n由此直接得出\n$$\nh(T') \\le h(T).\n$$\n\n我们现在考虑等式或严格不等式何时成立。\n\n- 如果 $d(v)  h(T)$，那么在 $T$ 中至少存在一个深度为 $h(T)$ 的顶点 $w$，并且 $w$ 仍保留在 $T'$ 中，其深度不变。因此\n$$\nh(T') = h(T).\n$$\n\n- 如果 $d(v) = h(T)$，则会出现两种子情况：\n  - 如果存在另一个深度为 $h(T)$ 的顶点 $w \\neq v$，那么该顶点仍然存在并保持了最大深度，所以 $h(T')=h(T)$。\n  - 如果 $v$ 是深度为 $h(T)$ 的唯一顶点，那么所有剩余顶点的深度最多为 $h(T)-1$，因此\n$$\nh(T') = h(T) - 1.\n$$\n\n这些情况表明 $h(T') \\le h(T)$ 恒成立，并且根据所移除的叶节点的选择和 $T$ 的结构，$h(T')=h(T)$ 和 $h(T')=h(T)-1$ 都是可能的。这就证实了选项C是正确的。", "answer": "$$\\boxed{C}$$", "id": "1511861"}, {"introduction": "对树的属性的理解使我们能够解决设计和优化问题。本练习要求你构建一棵树，在满足其顶点数和高度的特定约束下，最大化其叶节点的数量。要解决这个问题，你需要思考高度、内部节点和叶节点之间的关系，在一个受限的环境中实际应用这些核心概念。[@problem_id:1511879]", "problem": "在图论中，有根树是一种有向图，其中除了一个称为根的特殊顶点外，每个顶点都恰好有一条入边，而根没有入边。从顶点 $u$到顶点 $v$的路径是一系列边，使得可以从$u$行进到$v$。有根树中一个顶点的深度是从根到该顶点的唯一路径的长度（边的数量）。有根树的高度定义为树中所有顶点的最大深度。在有根树中，如果一个顶点没有出边（即它没有子节点），则称其为叶子。\n\n考虑一个恰好有10个顶点且高度恰好为4的有根树。这样的树最多可能有多少个叶子？", "solution": "设 $N$ 为顶点总数，$I$ 为内部顶点（出度至少为$1$的顶点）的数量，$L$ 为叶子（出度为$0$的顶点）的数量。在任何有根树中，每个顶点要么是内部顶点，要么是叶子，所以\n$$\nL = N - I.\n$$\n我们已知 $N = 10$ 且高度恰好为 $4$。高度为 $4$ 意味着存在一条从根到某个顶点的长度为 $4$ 的路径。这条路径上深度为 $0,1,2,3$ 的顶点必须各自至少有一个子节点（以使路径得以延续），因此它们是内部顶点。所以，\n$$\nI \\geq 4.\n$$\n要最大化 $L$，我们需要最小化 $I$。下界 $I = 4$ 是可以达到的：取一条长度为 $4$ 的单一路径（深度从 $0$ 到 $4$），它使用了 $5$ 个顶点，其中恰好有 $4$ 个内部顶点（深度为 $0$ 到 $3$）和一个在深度 $4$ 的叶子。剩下的 $N - 5 = 5$ 个顶点可以作为额外的子节点附加到任何一个已有的内部顶点上（例如，附加到根上），这不会产生新的内部顶点，也不会使高度超过 $4$。因此 $I$ 的最小可能值为 $4$。\n\n因此，叶子的最大数量是\n$$\nL_{\\max} = N - I_{\\min} = 10 - 4 = 6.\n$$", "answer": "$$\\boxed{6}$$", "id": "1511879"}]}
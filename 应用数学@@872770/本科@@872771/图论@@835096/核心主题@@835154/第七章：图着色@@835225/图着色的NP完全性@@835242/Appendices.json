{"hands_on_practices": [{"introduction": "本练习将引导你完成一个基础但非常重要的思维过程：问题归约。通过构造一个新图$G'$，我们将展示解决一个稍加修改的问题（在$G'$上进行$(k+1)$-着色）如何等价于解决原问题（在$G$上进行$k$-着色）。这个练习旨在揭示多项式时间归约的核心思想，即如何将一个问题的命运与另一个问题紧密联系起来[@problem_id:1524394]。", "problem": "在计算图论中，一个核心问题是确定图的色数。一个由顶点集 $V$ 和边集 $E$ 组成的图 $G=(V, E)$，如果可以用 $k$ 种可用颜色中的一种为每个顶点着色，使得任意两个相邻顶点颜色都不同，则称该图是 *k-可着色*的。\n\n考虑一个任意图 $G=(V, E)$ 和一个正整数 $k$。一个新图（我们称之为 $G'$）是根据以下过程从 $G$ 构建的：\n1.  创建一个新顶点 $v_{new}$。$G'$ 的顶点集为 $V' = V \\cup \\{v_{new}\\}$。\n2.  $G'$ 的边集由 $G$ 的所有边和连接 $v_{new}$ 到原始集合 $V$ 中每个顶点的新边构成。也就是说，$E' = E \\cup \\{ (v, v_{new}) \\mid v \\in V \\}$。\n\n让我们分析原始图 $G$ 的可着色性与新构建图 $G'$ 的可着色性之间的关系。具体来说，我们感兴趣的是 $G$ 存在 $k$-着色与 $G'$ 存在 $(k+1)$-着色之间的联系。\n\n以下哪个陈述正确地描述了这种关系？\n\nA. $G$ 存在 $k$-着色当且仅当 $G'$ 存在 $(k+1)$-着色。\nB. 若 $G$ 存在 $k$-着色，则 $G'$ 存在 $(k+1)$-着色，但反之不一定成立。\nC. 若 $G'$ 存在 $(k+1)$-着色，则 $G$ 存在 $k$-着色，但反之不一定成立。\nD. 无论 $G$ 是否存在 $k$-着色，$G'$ 都保证存在 $(k+1)$-着色。\nE. $G$ 存在 $k$-着色与 $G'$ 存在 $(k+1)$-着色是完全独立的。", "solution": "为了确定 $G$ 的 $k$-可着色性与 $G'$ 的 $(k+1)$-可着色性之间的正确关系，我们必须证明双向的逻辑蕴涵。让可用颜色集用整数表示。\n\n首先，我们来证明正向蕴涵：**如果 $G$ 存在 $k$-着色，那么 $G'$ 存在 $(k+1)$-着色。**\n\n假设 $G$ 是 $k$-可着色的。这意味着存在一个着色函数 $c: V \\to \\{1, 2, \\dots, k\\}$，使得对于边集 $E$ 中的每一条边 $(u, v)$，都有 $c(u) \\neq c(v)$。\n\n我们需要为 $G'$ 构建一个有效的 $(k+1)$-着色，我们称之为 $c'$。图 $G'$ 的顶点集为 $V' = V \\cup \\{v_{new}\\}$。我们可以如下定义 $c'$：\n- 对于原始集合 $V$ 中的每个顶点 $v$，令 $c'(v) = c(v)$。\n- 对于新顶点 $v_{new}$，令 $c'(v_{new}) = k+1$。\n\n现在，我们必须验证 $c'$ 是一个使用集合 $\\{1, 2, \\dots, k+1\\}$ 中颜色的对 $G'$ 的有效着色。如果任意两个相邻顶点都没有相同的颜色，那么这个着色就是有效的。我们检查 $G'$ 的边集 $E'$ 中的所有边。\n1.  考虑一条原本在 $G$ 中的边 $(u, v)$ (即 $(u, v) \\in E$)。根据我们对 $c'$ 的定义，有 $c'(u) = c(u)$ 和 $c'(v) = c(v)$。由于 $c$ 是对 $G$ 的一个有效 $k$-着色，我们知道 $c(u) \\neq c(v)$。因此，$c'(u) \\neq c'(v)$，所以这个条件得到满足。\n2.  考虑一条形如 $(v, v_{new})$ 的新边，其中 $v \\in V$。根据我们的定义，$c'(v) = c(v)$，所以它的颜色在集合 $\\{1, 2, \\dots, k\\}$ 中。新顶点 $v_{new}$ 的颜色是 $c'(v_{new}) = k+1$。由于 $c'(v) \\leq k$ 且 $c'(v_{new}) = k+1$，可以保证 $c'(v) \\neq c'(v_{new})$。\n\n由于 $G'$ 中的所有边都连接着不同颜色的顶点，所以 $c'$ 是对 $G'$ 的一个有效 $(k+1)$-着色。因此，我们证明了如果 $G$ 是 $k$-可着色的，那么 $G'$ 是 $(k+1)$-可着色的。\n\n接下来，我们来证明反向蕴涵：**如果 $G'$ 存在 $(k+1)$-着色，那么 $G$ 存在 $k$-着色。**\n\n假设 $G'$ 是 $(k+1)$-可着色的。这意味着存在一个着色函数 $c': V' \\to \\{1, 2, \\dots, k+1\\}$，使得对于边集 $E'$ 中的每一条边 $(u', v')$，都有 $c'(u') \\neq c'(v')$。\n\n让我们考察分配给新顶点 $v_{new}$ 的颜色。设这个颜色为 $C_{new} = c'(v_{new})$。根据构造，$v_{new}$ 与 $V$ 中的每个顶点 $v$ 都相邻。因此，对于任何 $v \\in V$，颜色 $c'(v)$ 必須不同于 $C_{new}$。\n这意味着原始集合 $V$ 中的所有顶点都必须使用来自集合 $\\{1, 2, \\dots, k+1\\} \\setminus \\{C_{new}\\}$ 的颜色进行着色。这个可用于 $V$ 的颜色集合恰好包含 $(k+1) - 1 = k$ 种不同的颜色。\n\n现在，我们通过将着色 $c'$ 限制在顶点集 $V$ 上来为原始图 $G$ 定义一个着色 $c$。也就是说，对于每个 $v \\in V$，我们设定 $c(v) = c'(v)$。\n我们需要检查 $c$ 是否为对 $G$ 的一个有效 $k$-着色。\n1.  用于 $c$ 的颜色是集合 $\\{1, 2, \\dots, k+1\\} \\setminus \\{C_{new}\\}$ 的一个子集，该集合的大小为 $k$。所以，$c$ 最多使用 $k$ 种颜色。如有必要，我们可以将它们重新标记为 $\\{1, 2, ..., k\\}$。\n2.  考虑任意一条边 $(u, v) \\in E$。由于 $E$ 是 $E'$ 的一个子集，这条边也存在于 $G'$ 中。因为 $c'$ 是对 $G'$ 的一个有效着色，我们知道 $c'(u) \\neq c'(v)$。根据我们对 $c$ 的定义，这意味着 $c(u) \\neq c(v)$。\n\n由于在着色 $c$ 下，$G$ 中所有相邻顶点都具有不同的颜色，并且 $c$ 最多使用 $k$ 种颜色，所以 $c$ 是对 $G$ 的一个有效 $k$-着色。因此，我们证明了如果 $G'$ 是 $(k+1)$-可着色的，那么 $G$ 是 $k$-可着色的。\n\n由于蕴涵关系在两个方向上都成立（“如果 $G$ 是 $k$-可着色的，那么 $G'$ 是 $(k+1)$-可着色的”以及“如果 $G'$ 是 $(k+1)$-可着色的，那么 $G$ 是 $k$-可着色的”），这两个陈述在逻辑上是等价的。这对应于“当且仅当”的条件。因此，选项 A 是正确的陈述。", "answer": "$$\\boxed{A}$$", "id": "1524394"}, {"introduction": "在证明NP完全性时，构造一个正确的归约是关键一步，但这个过程充满了挑战。本练习提供了一个从“3-集精确覆盖”（X3C）问题到“3-着色”问题的归约尝试，并要求你找出其中的逻辑缺陷。通过批判性地分析这个有瑕疵的构造，你将更深刻地理解一个有效的归约必须满足的严格条件，特别是它如何精确地对源问题的约束进行建模[@problem_id:1524392]。", "problem": "为了证明图3-着色（3-COLORING）问题的NP完全性，可以从一个已知的NP完全问题进行多项式时间归约。本问题探讨了一种从3元集合的精确覆盖（Exact Cover by 3-Sets, X3C）问题出发的可能归约。\n\n3-着色判定问题询问的是，一个给定图 $G$ 的顶点是否可以用最多三种颜色进行着色，使得任意两个相邻的顶点颜色不同。\n\n3元集合的精确覆盖（X3C）判定问题定义如下：给定一个大小为 $3q$ 的全集 $U = \\{u_1, u_2, \\dots, u_{3q}\\}$ 和一个由 $U$ 的3元子集构成的集合族 $S = \\{S_1, S_2, \\dots, S_m\\}$，是否存在一个大小为 $q$ 的子集族 $S' \\subseteq S$，它构成了 $U$ 的一个划分？（这意味着 $S'$ 中的集合两两不交，且它们的并集为 $U$。）\n\n考虑从一个X3C实例 $(U, S)$ 构造一个图 $G$ 的提议方法。该图的设计目的是使其3-可着色当且仅当该X3C实例有解。该构造使用以下组件：\n\n1.  **基础部件 (Base Gadget)**：三个特殊顶点 $v_T, v_F, v_B$ 连接成一个三角形。在任何有效的3-着色中，这三个顶点必须被赋予三种不同的颜色。不失一般性地，我们可以将这些颜色分别标记为真 (True, T)、假 (False, F) 和基准 (Base, B)。\n\n2.  **元素部件 (Element Gadgets)**：对于全集 $U$ 中的每个元素 $u_i \\in U$，创建两个顶点 $x_i$ 和 $\\bar{x}_i$。它们之间通过一条边相连，并且两者也都连接到基准顶点 $v_B$。这种结构在任何有效的3-着色中，都迫使 $x_i$ 和 $\\bar{x}_i$ 的颜色是 (T, F) 的一个排列。\n\n3.  **集合部件 (Set Gadget)**：对于集合族 $S$ 中的每个集合 $S_j = \\{u_a, u_b, u_c\\} \\in S$，提议了一个简单的“选择器”部件。它由一个新顶点 $s_j$ 组成。该顶点通过边连接到三个对应的元素顶点：$(s_j, x_a)$、$(s_j, x_b)$ 和 $(s_j, x_c)$。\n\n其意图是让图的着色方案对应于一个有效的精确覆盖。例如，$s_j$ 顶点的颜色可以指示 $S_j$ 是否在覆盖 $S'$ 中，而 $x_i$ 顶点的颜色可以指示元素 $u_i$ 是否已被覆盖。\n\n然而，这个简单的集合部件存在一个关键的逻辑缺陷，使得该归约无效。以下哪个陈述最好地指出了这个缺陷？\n\nA) 该部件不能确保如果一个集合 $S_j$ 被“选中”，其所有元素 $\\{u_a, u_b, u_c\\}$ 会同时被标记为“已覆盖”。\nB) 该部件未能强制执行 X3C 的“恰好一次”覆盖约束，因为它在某个元素被多个集合覆盖时不会产生着色冲突。\nC) 如果相关的元素顶点 $x_a, x_b, x_c$ 都被赋予相同颜色（例如，全为T或全为F），则该部件是不可着色的。\nD) 该部件限制性太强；对于任何有解的 X3C 实例，其生成的图都是不可着色的。\nE) 该部件的结构依赖于集合恰好有3个元素且无法泛化，而这是有效归约的一个要求。", "solution": "我们分析在颜色标记为 $T$、$F$ 和 $B$ 的3-着色条件下，提议的这些部件所施加的约束。\n\n1) 根据构造，由 $v_{T}, v_{F}, v_{B}$ 构成的基础三角形迫使这三个顶点接受三种不同的颜色，我们将其标记为 $T, F, B$。\n\n2) 对于每个元素 $u_{i} \\in U$，包含顶点 $x_{i}$ 和 $\\bar{x}_{i}$ 的元素部件有边 $(x_{i}, \\bar{x}_{i})$、$(x_{i}, v_{B})$ 和 $(\\bar{x}_{i}, v_{B})$。由于 $v_{B}$ 的颜色是 $B$，所以 $x_{i}$ 和 $\\bar{x}_{i}$ 都不能是 $B$，而边 $(x_{i}, \\bar{x}_{i})$ 迫使 $\\{x_{i}, \\bar{x}_{i}\\}$ 的颜色是 $\\{T, F\\}$ 的一个排列。因此，对于每个 $i$，$x_{i} \\in \\{T, F\\}$ 且 $\\bar{x}_{i}$ 是 $\\{T, F\\}$ 中的另一种颜色。\n\n3) 对于每个集合 $S_{j}=\\{u_{a}, u_{b}, u_{c}\\}$，集合部件引入一个顶点 $s_{j}$，其边为 $(s_{j}, x_{a})$、$(s_{j}, x_{b})$、$(s_{j}, x_{c})$。由于对于 $\\ell \\in \\{a,b,c\\}$，每个 $x_{\\ell}$ 的颜色都在 $\\{T, F\\}$ 中，所以对 $s_{j}$ 的唯一约束是其颜色必须与当前分配给 $x_{a}$、$x_{b}$ 和 $x_{c}$ 的颜色不同。具体来说：\n- 如果 $x_{a}, x_{b}, x_{c}$ 的颜色中同时包含 $T$ 和 $F$，那么 $s_{j}$ 总可以被着色为 $B$。\n- 如果 $x_{a}, x_{b}, x_{c}$ 的颜色都等于 $T$（或都等于 $F$），那么 $s_{j}$ 可以是 $F$ 或 $B$（或分别是 $T$ 或 $B$）。\n因此，该部件永远不会变得不可着色，并且其本身并不强制为 $s_{j}$ 的颜色做出唯一选择。\n\n为了评估这是否编码了 X3C 的精确覆盖约束，我们固定一个约定来解释 $s_{j}$ 的颜色，即“被选中”（例如，取 $s_{j}=T$ 表示 $S_{j}$ 被选中，并解释 $x_{i}=F$ 表示 “$u_{i}$ 被覆盖”）。如果 $s_{j}=T$，那么边 $(s_{j}, x_{a})$、$(s_{j}, x_{b})$、$(s_{j}, x_{c})$ 迫使 $x_{a}, x_{b}, x_{c} \\neq T$，因此 $x_{a}, x_{b}, x_{c}$ 每一个都必须是 $F$；所以一个被选中的集合 $S_{j}$ 确实可以迫使其相邻的 $x$-顶点被着为“已覆盖”的颜色。然而，这个机制并不能阻止共享同一个元素的多个集合被同时选中：如果 $u_{a}$ 同时属于 $S_{j}$ 和 $S_{k}$，那么设置 $x_{a}=F$ 允许 $s_{j}=T$ 和 $s_{k}=T$ 同时成立，而不会产生任何着色冲突，因为 $s_{j}$ 和 $s_{k}$ 互不相邻，它们都只需要与 $x_{a}=F$ 的颜色不同即可。同样的推理也适用于它们的其他邻居。因此，一个元素可以被两个或更多个选中的集合“覆盖”，而不会违反3-可着色性。这违反了 X3C 的“恰好一次”覆盖要求。\n\n因此，关键缺陷在于选择器部件未能强制每个元素被恰好一个选定的集合所覆盖；当与同一个 $x_{i}$ 相邻的多个 $s_{j}$ 都取“选中”颜色时，不会产生着色冲突。\n\n这与陈述 B 相符。为了完整起见，请注意：\n- A 不是核心问题，因为为 $s_{j}$ 选择一个颜色可以迫使其所有三个邻居取互补色，所以“选择即覆盖”可以实现，但这仍然无法保证唯一性。\n- C 是错误的，因为如果 $x_{a}, x_{b}, x_{c}$ 都共享一种颜色（比如 $T$），那么 $s_{j}$ 可以是 $F$ 或 $B$，所以该部件仍然是可着色的。\n- D 是错误的；该部件的约束太弱，而不是限制性太强。\n- E 是不相关的；X3C 本身就使用3元集合。\n\n因此，B 最好地指出了该缺陷。", "answer": "$$\\boxed{B}$$", "id": "1524392"}, {"introduction": "计算复杂性的世界充满了微妙的边界，一个看似微小的改动就可能让问题从“容易”变为“困难”。本练习探讨了这种现象，它将一个著名的“易解”定理（Grötzsch定理）与一个惊人“难解”的扩展问题进行对比。通过这个练习，你将体会到问题定义上的细微差别如何极大地改变其计算复杂度，这是算法设计和计算复杂性理论中的一个核心洞见[@problem_id:1510185]。", "problem": "Grötzsch定理是图论中的一个基本结果，它指出每个无三角形的平面图都是3-可着色的。该定理的标准证明是构造性的，为任何给定的无三角形平面图提供了一个多项式时间算法来找到这样一种3-着色。\n\n考虑一个相关的计算问题，我们称之为“无三角形平面图的3-预着色扩展”（3-PRECOLORING EXTENSION for Triangle-Free Planar Graphs）。该问题的输入包括：\n1.  一个无三角形的平面图 $G=(V, E)$。\n2.  一个顶点子集 $W \\subseteq V$。\n3.  一个正常的局部3-着色 $\\phi: W \\to \\{1, 2, 3\\}$，意味着对于 $W$ 中任意两个相邻的顶点 $u, v$，都有 $\\phi(u) \\neq \\phi(v)$。\n\n问题是是否存在整个图 $G$ 的一个正常3-着色 $c: V \\to \\{1, 2, 3\\}$，它能扩展预着色 $\\phi$，即对于所有 $v \\in W$ 都有 $c(v) = \\phi(v)$。\n\n根据这些信息，以下哪个陈述正确地描述了“从头开始为无三角形平面图寻找一个3-着色”的计算复杂性与上述“3-预着色扩展”问题的复杂性之间的关系？\n\nA. 虽然任何无三角形平面图的3-着色都可以在多项式时间内找到，但这类图的3-预着色扩展问题是NP完全的。\nB. 由于为无三角形平面图寻找3-着色是多项式时间可解的，因此作为其更受约束的版本，3-预着色扩展问题也必须是多项式时间可解的。\nC. 从头开始寻找3-着色问题和无三角形平面图的3-预着色扩展问题都是NP完全的，因为它们都是一般3-着色问题的特例。\nD. 两个问题都是多项式时间可解的。扩展问题的算法是对Grötzsch定理的构造性证明的简单修改，其中算法只需避免使用与预着色顶点冲突的颜色。\nE. 从头开始为无三角形平面图寻找3-着色是NP完全的，而3-预着色扩展问题是多项式时间可解的，因为预着色的顶点指导了着色过程。\n\n选择唯一正确的选项。", "solution": "我们比较无三角形平面图上的两个判定/算法问题。\n\n1. 问题1（从头开始的3-着色）：给定一个无三角形的平面图 $G=(V,E)$，找到一个正常的3-着色 $c:V\\to\\{1,2,3\\}$。\n   根据Grötzsch定理及其构造性证明，存在一个多项式时间算法，可以为任何无三角形平面图 $G$ 输出一个3-着色。因此，其判定版本“$G$ 是否允许3-着色？”对于这类图是在 $\\mathrm{P}$ 中的。\n\n2. 问题2（3-预着色扩展）：输入为 $(G,W,\\phi)$，其中 $G=(V,E)$ 是无三角形平面图，$W\\subseteq V$，且 $\\phi:W\\to\\{1,2,3\\}$ 是一个正常的局部着色。问题是是否存在一个正常的3-着色 $c:V\\to\\{1,2,3\\}$ 使得 $c|_{W}=\\phi$。\n\n   2.1. 属于 $\\mathrm{NP}$：给定一个候选着色 $c$，我们可以在 $|V|$ 的多项式时间内验证 $c$ 是正常的（检查所有边）并且对于所有 $v\\in W$ 都有 $c(v)=\\phi(v)$。因此，该问题在 $\\mathrm{NP}$ 中。\n\n   2.2. 困难性：尽管问题1在这类图上属于 $\\mathrm{P}$，但扩展约束可以编码非平凡的全局一致性。事实上，无三角形平面图的3-预着色扩展问题已知是 $\\mathrm{NP}$-完全的。直观上，从平面可满足性问题进行的归约会构造一些无三角形的平面“小构件”（gadgets），其唯一可行的扩展对应于满足赋值；预着色的顶点通过强制选择颜色来固定变量的真值，而约束则通过无三角形的平面结构传播，同时保持平面性并禁止三角形的出现。因此该问题是 $\\mathrm{NP}$-难的，结合2.1的结论，它是 $\\mathrm{NP}$-完全的。\n\n结论：在无三角形平面图上从头开始寻找一个3-着色是多项式时间可解的，而同一类图上的3-预着色扩展问题是 $\\mathrm{NP}$-完全的。这与选项A相符，并与其他选项矛盾：B和D错误地推断扩展问题具有多项式时间可解性；C和E错误地声称基础问题是 $\\mathrm{NP}$-完全的。", "answer": "$$\\boxed{A}$$", "id": "1510185"}]}
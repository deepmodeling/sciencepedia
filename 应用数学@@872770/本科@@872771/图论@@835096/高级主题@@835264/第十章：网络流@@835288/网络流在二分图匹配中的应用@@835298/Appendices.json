{"hands_on_practices": [{"introduction": "许多现实世界中的资源分配问题都可以简化为二分图匹配模型。这个练习提供了一个经典场景：将学生分配到他们感兴趣的项目中。通过将学生和项目看作二分图的两个顶点集，这个问题就转化为寻找图中的最大匹配，这是一个基础但至关重要的应用，可以帮助你掌握核心概念 ([@problem_id:1481302])。", "problem": "一所大学的计算机科学系正在为其毕业班学生分配毕业设计项目。有五名学生：Alex、Ben、Chloe、David 和 Emily。同时有五个可供选择的项目，编号为 P1、P2、P3、P4 和 P5。每个项目最多只能分配给一名学生，每名学生也最多只能分配到一个项目。\n\n该系希望将尽可能多的学生分配到他们表示感兴趣的项目上。学生们的偏好如下：\n- Alex 对项目 P1 和 P2 感兴趣。\n- Ben 对项目 P1 感兴趣。\n- Chloe 对项目 P2 和 P3 感兴趣。\n- David 对项目 P3 和 P4 感兴趣。\n- Emily 对项目 P3 感兴趣。\n\n最多可以有多少名学生能被分配到他们偏好列表中的项目？", "solution": "我们将此情况建模为一个二分图 $G=(U,V,E)$，其中左部 $U$ 是学生集合，右部 $V$ 是项目集合。具体而言，\n$$\nU=\\{\\text{Alex},\\ \\text{Ben},\\ \\text{Chloe},\\ \\text{David},\\ \\text{Emily}\\},\\quad V=\\{\\text{P1},\\ \\text{P2},\\ \\text{P3},\\ \\text{P4},\\ \\text{P5}\\}.\n$$\n边表示学生表达的兴趣：\n$$\nE=\\{(\\text{Alex},\\text{P1}),(\\text{Alex},\\text{P2}),(\\text{Ben},\\text{P1}),(\\text{Chloe},\\text{P2}),(\\text{Chloe},\\text{P3}),(\\text{David},\\text{P3}),(\\text{David},\\text{P4}),(\\text{Emily},\\text{P3})\\}.\n$$\n一个匹配 $M\\subseteq E$ 将每名学生至多分配给一个项目，并将每个项目至多分配给一名学生。我们寻求最大化 $|M|$。\n\n上界：令 $V'=\\{\\text{projects with at least one incident edge}\\}=\\{\\text{P1},\\text{P2},\\text{P3},\\text{P4}\\}$。由于没有学生对 $\\text{P5}$ 感兴趣，任何匹配都只能使用来自 $V'$ 的项目，因此\n$$\n|M| \\leq |V'| = 4.\n$$\n等价地，根据霍尔定理 (Hall’s theorem)，对于子集 $S=U$，我们有 $N(S)=V'$，其中 $|N(S)|=4$ 而 $|S|=5$。由于 $|N(S)|  |S|$，霍尔条件不满足，因此大小为5的完美匹配是不可能的。\n\n达到该上界的构造：我们给出一个大小为4的匹配：\n$$\nM=\\{(\\text{David},\\text{P4}),\\ (\\text{Emily},\\text{P3}),\\ (\\text{Chloe},\\text{P2}),\\ (\\text{Ben},\\text{P1})\\}.\n$$\n每对都在 $E$ 中，没有学生或项目被重复，且 $|M|=4$。由于4既是上界又能达到，因此最多可以有4名学生被分配到他们偏好列表中的项目。", "answer": "$$\\boxed{4}$$", "id": "1481302"}, {"introduction": "二分图匹配的威力远不止于直接的分配问题。如此处的棋盘多米诺骨牌覆盖问题，它要求我们首先通过巧妙的建模（例如棋盘着色）来揭示其潜在的二分结构。这个练习旨在锻炼你的抽象思维和问题转化能力，将一个看似无关的几何难题转化为一个可解的图论问题 ([@problem_id:1481314])。", "problem": "一个8x8的棋盘经过修改，移除了其中特定的一组方格。每个方格由其行列坐标 `(r, c)` 标识，其中 `1 \\le r, c \\le 8`。所有满足 `r` 为偶数且 `c` 为奇数的方格 `(r, c)` 构成的集合被从棋盘上移除。在棋盘上剩余的方格中，最多可以放置多少个不重叠的多米诺骨牌？单个多米诺骨牌必须恰好覆盖两个通过共享一条公共边而相邻的方格。", "solution": "将 $8 \\times 8$ 的棋盘按奇偶性染色：如果 $r+c$ 为偶数，则将格子 $(r,c)$ 声明为黑色；如果 $r+c$ 为奇数，则声明为白色。任何放置在相邻方格上的多米诺骨牌都会恰好覆盖一个黑色方格和一个白色方格，因为相邻方格的奇偶性相反。\n\n被移除的方格集合是\n$$\nS=\\{(r,c): r \\text{ even},\\, c \\text{ odd}\\}.\n$$\n对于 $(r,c) \\in S$，$r+c$ 是奇数，所以每个被移除的格子都是白色的。最初，棋盘上有32个白色方格和32个黑色方格。被移除的方格数量是\n$$\n|S|=4 \\times 4=16,\n$$\n因为有4个偶数行和4个奇数列。因此，剩余的方格数量是\n$$\n\\text{white}_{\\text{remain}}=32-16=16, \\quad \\text{black}_{\\text{remain}}=32.\n$$\n因为每张多米诺骨牌覆盖一个白色方格和一个黑色方格，所以多米诺骨牌的数量最多是\n$$\n\\min(16,32)=16.\n$$\n\n为了达到16个，可以按如下方式明确地进行密铺。剩余的白色方格恰好是那些 $r$ 为奇数且 $c$ 为偶数的方格。对于每个这样的白色方格 $(r,c)$，放置一个水平方向的多米诺骨牌，覆盖 $(r,c-1)$ 和 $(r,c)$。相邻的方格 $(r,c-1)$ 是黑色的，因为 $(r+c-1)$ 是偶数；它位于棋盘上，因为 $c \\in \\{2,4,6,8\\}$ 意味着 $c-1 \\in \\{1,3,5,7\\}$；并且它没有被移除，因为它的行 $r$ 是奇数。映射 $(r,c) \\mapsto (r,c-1)$ 是单射的，所以这些多米诺骨牌是不相交的。因此，可以放置16个多米诺骨牌。\n\n因此，非重叠多米诺骨牌的最大数量是16。", "answer": "$$\\boxed{16}$$", "id": "1481314"}, {"introduction": "二分图匹配也是解决更复杂优化问题的强大工具。这个任务调度问题引入了依赖关系，可以用有向无环图 (DAG) 来表示。通过应用 Dilworth 定理，寻找完成所有任务所需的最少并行执行线数量，等价于在相关的二分图中寻找最大匹配。这个练习 ([@problem_id:1481321]) 展示了图论中不同概念之间的深刻联系，以及匹配算法在解决复杂调度难题中的应用价值。", "problem": "一个专业实验室的科研团队正在制造一种新型量子处理单元。制造过程被分解为10个不同的任务，标记为A到J。由于所涉及的材料和工艺的性质，某些任务必须在其他任务开始前完成。这些代表直接“必须先行”关系的先决条件依赖关系如下：\n\n*   任务A必须在任务C和D之前完成。\n*   任务B必须在任务D和E之前完成。\n*   任务C必须在任务F和G之前完成。\n*   任务D必须在任务G和H之前完成。\n*   任务E必须在任务H和I之前完成。\n*   任务G必须在任务J之前完成。\n*   任务H必须在任务J之前完成。\n\n该实验室可以并行运行多条生产线。每条生产线可以按顺序一次执行一个任务，只要分配给该生产线的所有任务都遵守了先决顺序。为了优化资源使用，团队想要确定完成所有10个任务所需的并行生产线的绝对最小数量。这个最小数量是多少？", "solution": "将先决条件结构建模为一个有向无环图（DAG），其顶点为 $V=\\{A,B,C,D,E,F,G,H,I,J\\}$，有向边由先决条件关系给出：\n$$\nA\\to C,\\quad A\\to D,\\quad B\\to D,\\quad B\\to E,\\quad C\\to F,\\quad C\\to G,\\quad D\\to G,\\quad D\\to H,\\quad E\\to H,\\quad E\\to I,\\quad G\\to J,\\quad H\\to J.\n$$\n能够以符合先决条件的顺序执行所有任务的并行生产线的最小数量，等于该DAG中最小有向路径覆盖的大小。关于DAG的一个标准定理（Dilworth定理）指出，最小路径覆盖的大小等于\n$$\n|V|-\\nu,\n$$\n其中 $\\nu$ 是在按如下方式构造的二分图中的最大匹配的大小：取 $V$ 的两个副本，称为 $V_{L}$ 和 $V_{R}$，对于DAG中的每条边 $u\\to v$，包含一条二分图的边 $u_{L}\\to v_{R}$。\n\n构造对应于先决条件的二分图的边：\n$$\nA_{L}\\to C_{R},\\ A_{L}\\to D_{R};\\quad B_{L}\\to D_{R},\\ B_{L}\\to E_{R};\\quad C_{L}\\to F_{R},\\ C_{L}\\to G_{R};\n$$\n$$\nD_{L}\\to G_{R},\\ D_{L}\\to H_{R};\\quad E_{L}\\to H_{R},\\ E_{L}\\to I_{R};\\quad G_{L}\\to J_{R};\\quad H_{L}\\to J_{R}.\n$$\n\n$\\nu$ 的上界：根据有限的左侧供应者来划分右侧顶点：\n- $\\{C_{R},D_{R}\\}$ 只能从 $\\{A_{L},B_{L}\\}$ 进行匹配，最多贡献 $2$ 个匹配的右侧顶点。\n- $\\{F_{R},G_{R},H_{R},I_{R}\\}$ 只能从 $\\{C_{L},D_{L},E_{L}\\}$ 进行匹配，最多贡献 $3$ 个匹配的右侧顶点。\n- $\\{J_{R}\\}$ 只能从 $\\{G_{L},H_{L}\\}$ 进行匹配，最多贡献 $1$ 个匹配的右侧顶点。\n因此\n$$\n\\nu\\leq 2+3+1=6.\n$$\n\n$\\nu=6$ 的可达性：选择以下大小为 $6$ 且左右端点两两不同的匹配：\n$$\nA_{L}\\to C_{R},\\quad B_{L}\\to E_{R},\\quad C_{L}\\to F_{R},\\quad D_{L}\\to G_{R},\\quad E_{L}\\to I_{R},\\quad G_{L}\\to J_{R}.\n$$\n因此 $\\nu=6$。\n\n当 $|V|=10$ 时，最小路径覆盖的大小是\n$$\n10-\\nu=10-6=4.\n$$\n例如，一个使用DAG边的大小为 $4$ 的显式路径覆盖是\n$$\nA\\to C\\to F,\\qquad B\\to E\\to I,\\qquad D\\to G\\to J,\\qquad H,\n$$\n它用4条有向路径覆盖了所有10个任务。因此，所需的并行生产线的绝对最小数量是 $4$。", "answer": "$$\\boxed{4}$$", "id": "1481321"}]}
{"hands_on_practices": [{"introduction": "要真正掌握树宽，第一步是能够仔细验证一个给定的树分解是否有效。这个练习提供了一个具体的图和几个候选分解，旨在训练你严格运用树分解的三个定义属性。通过这个练习 [@problem_id:1550977]，你将对顶点覆盖、边覆盖以及至关重要的连通性属性建立起直观的理解。", "problem": "考虑一个无向图 $G = (V, E)$，其顶点集为 $V = \\{1, 2, 3, 4, 5\\}$，边集为 $E = \\{(1, 2), (2, 3), (3, 1), (3, 4), (4, 5), (5, 3)\\}$。\n\n图 $G$ 的一个树分解是一个对 $(T, \\mathcal{X})$，其中 $T$ 是一棵树，$\\mathcal{X} = \\{X_i\\}_{i \\in V(T)}$ 是一个由 $V$ 的子集（称为袋）组成的集合，由 $T$ 的节点索引，满足以下三个性质：\n1.  **顶点覆盖**：所有袋的并集是 $G$ 的整个顶点集。即 $\\bigcup_{i \\in V(T)} X_i = V$。\n2.  **边覆盖**：对于 $E$ 中的每一条边 $(u, v)$，存在至少一个袋 $X_i$ 同时包含 $u$ 和 $v$。\n3.  **连通性**：对于每个顶点 $v \\in V$，其对应袋包含 $v$ 的 $T$ 的节点集合，即 $\\{i \\in V(T) \\mid v \\in X_i\\}$，构成 $T$ 的一个连通子树。\n\n树分解 $(T, \\mathcal{X})$ 的**宽度**定义为 $\\max_{i \\in V(T)} |X_i| - 1$。\n\n以下哪个选项描述了图 $G$ 的一个宽度恰好为 2 的有效树分解？\n\nA. 树 $T$ 有两个节点 $\\{t_1, t_2\\}$，它们之间有一条边。袋是 $X_{t_1} = \\{1, 2, 3\\}$ 和 $X_{t_2} = \\{3, 4\\}$。\n\nB. 树 $T$ 有两个节点 $\\{t_1, t_2\\}$，它们之间有一条边。袋是 $X_{t_1} = \\{1, 2, 4, 5\\}$ 和 $X_{t_2} = \\{3\\}$。\n\nC. 树 $T$ 有两个节点 $\\{t_1, t_2\\}$，它们之间有一条边。袋是 $X_{t_1} = \\{1, 2, 3\\}$ 和 $X_{t_2} = \\{1, 4, 5\\}$。\n\nD. 树 $T$ 有两个节点 $\\{t_1, t_2\\}$，它们之间有一条边。袋是 $X_{t_1} = \\{1, 2, 3\\}$ 和 $X_{t_2} = \\{3, 4, 5\\}$。\n\nE. 树 $T$ 是一条有三个节点的路径 $t_1 - t_2 - t_3$。袋是 $X_{t_1} = \\{1, 2, 3\\}$，$X_{t_2} = \\{1, 5\\}$ 和 $X_{t_3} = \\{3, 4, 5\\}$。", "solution": "设 $G=(V,E)$，其中 $V=\\{1,2,3,4,5\\}$ 且 $E=\\{(1,2),(2,3),(3,1),(3,4),(4,5),(5,3)\\}$。一个树分解 $(T,\\mathcal{X})$ 必须满足：\n1) 顶点覆盖：$\\bigcup_{i\\in V(T)}X_{i}=V$。\n2) 边覆盖：对于每个 $(u,v)\\in E$，存在一个 $i$ 使得 $\\{u,v\\}\\subseteq X_{i}$。\n3) 连通性：对于每个 $v\\in V$，索引集 $\\{i\\in V(T)\\mid v\\in X_{i}\\}$ 在 $T$ 中是连通的。\n宽度为 $\\max_{i\\in V(T)}|X_{i}|-1$；宽度恰好为 $2$ 要求 $\\max_{i}|X_{i}|=3$ 并且满足上述性质。\n\n逐一检查每个选项：\n\nA. $T$ 有两个节点 $t_{1}-t_{2}$，$X_{t_{1}}=\\{1,2,3\\}$，$X_{t_{2}}=\\{3,4\\}$。顶点覆盖给出 $\\{1,2,3,4\\}\\neq V$，因为 $5\\notin X_{t_{1}}\\cup X_{t_{2}}$。因此性质 1 不成立。宽度是 $\\max(3,2)-1=2$，但这个分解是无效的。\n\nB. $X_{t_{1}}=\\{1,2,4,5\\}$，$X_{t_{2}}=\\{3\\}$。宽度是 $\\max(4,1)-1=3\\neq 2$，所以它的宽度不为 $2$。此外，边 $(2,3)$ 没有被任何袋覆盖，所以性质 2 也不成立。\n\nC. $X_{t_{1}}=\\{1,2,3\\}$，$X_{t_{2}}=\\{1,4,5\\}$。宽度是 $\\max(3,3)-1=2$。顶点覆盖成立：$\\{1,2,3\\}\\cup\\{1,4,5\\}=V$。边覆盖对于 $(3,4)$ 和 $(3,5)$ 不成立，因为没有袋包含 $\\{3,4\\}$ 或 $\\{3,5\\}$。因此无效。\n\nD. $X_{t_{1}}=\\{1,2,3\\}$，$X_{t_{2}}=\\{3,4,5\\}$。宽度是 $\\max(3,3)-1=2$。顶点覆盖成立：$\\{1,2,3\\}\\cup\\{3,4,5\\}=V$。边覆盖：\n- $(1,2),(2,3),(3,1)\\subseteq X_{t_{1}}$，\n- $(3,4),(4,5),(5,3)\\subseteq X_{t_{2}}$。\n连通性：对于 $v=1,2$，只有 $t_{1}$ 包含 $v$；对于 $v=4,5$，只有 $t_{2}$ 包含 $v$；对于 $v=3$，$t_{1}$ 和 $t_{2}$ 都包含 $v$，并且 $\\{t_{1},t_{2}\\}$ 在 $T$ 中是连通的。因此，所有三个性质都成立，且宽度为 $2$。\n\nE. $T$ 是 $t_{1}-t_{2}-t_{3}$，$X_{t_{1}}=\\{1,2,3\\}$，$X_{t_{2}}=\\{1,5\\}$，$X_{t_{3}}=\\{3,4,5\\}$。宽度是 $\\max(3,2,3)-1=2$。顶点覆盖和边覆盖都成立。然而，对于 $v=3$，连通性不成立，因为 $3\\in X_{t_{1}}$ 且 $3\\in X_{t_{3}}$ 但 $3\\notin X_{t_{2}}$，所以 $\\{i\\mid 3\\in X_{i}\\}=\\{t_{1},t_{3}\\}$ 在 $T$ 中不是连通的。\n\n因此，在这些选项中，唯一宽度恰好为 $2$ 的有效树分解是 D。", "answer": "$$\\boxed{D}$$", "id": "1550977"}, {"introduction": "仅仅验证分解是不够的，真正的挑战在于找到一个图的“最优”分解，也就是确定其树宽。这项练习将引导你实践计算树宽的标准方法：通过寻找图的结构（例如图的“子式”）来确定下界，并通过构造一个具体的分解来确定上界。这个问题 [@problem_id:1536489] 提供了一个复杂但可控的网络图，让你能够完整地应用这一核心技术。", "problem": "在网络设计领域，理解网络的拓扑复杂性对于开发高效的路由算法至关重要。衡量这种复杂性的一个关键指标是称为树宽的图参数。\n\n图 $G=(V, E)$ 的**树分解**是一个对 $(T, \\mathcal{X})$，其中 $T$ 是一棵树，而 $\\mathcal{X} = \\{X_i \\mid i \\in V(T)\\}$ 是 $V$ 的一个子集族，这些子集被称为“袋”(bag)，满足以下三个性质：\n1.  **覆盖性**：所有袋的并集是 $G$ 的整个顶点集。即 $\\bigcup_{i \\in V(T)} X_i = V$。\n2.  **边映射**：对于每条边 $(u,v) \\in E$，都存在至少一个袋 $X_i \\in \\mathcal{X}$ 同时包含 $u$ 和 $v$。\n3.  **连通性（插值性质）**：对于任意顶点 $v \\in V$，所有包含 $v$ 的袋所对应的树节点集合 $\\{i \\in V(T) \\mid v \\in X_i\\}$ 必须在 $T$ 中导出一个非空的连通子树。\n\n树分解 $(T, \\mathcal{X})$ 的**宽度**定义为其最大袋的大小减一，即 $\\max_{i \\in V(T)} |X_i| - 1$。图 $G$ 的**树宽**，记为 $\\text{tw}(G)$，是 $G$ 所有有效树分解中可能达到的最小宽度。\n\n考虑一个由图 $G$ 表示的通信网络，该图有五个节点，标记为 $\\{v_1, v_2, v_3, v_4, v_5\\}$。其连接（边）如下：\n- 节点 $\\{v_1, v_2, v_3\\}$ 形成一个完全子图（一个三角形）。\n- 节点 $v_4$ 连接到 $v_1$、$v_2$ 和 $v_5$。\n- 节点 $v_5$ 连接到 $v_3$ 和 $v_4$。\n\n这个网络图 $G$ 的树宽是多少？你的最终答案应该是一个整数。", "solution": "我们首先列出给定图 $G$ 在顶点集 $V=\\{v_1,v_2,v_3,v_4,v_5\\}$ 上的边。根据描述：\n- 节点 $\\{v_1, v_2, v_3\\}$ 上的三角形给出了边 $(v_1, v_2), (v_2, v_3), (v_1, v_3)$。\n- 节点 $v_4$ 的连接增加了边 $(v_1, v_4), (v_2, v_4), (v_4, v_5)$。\n- 节点 $v_5$ 的连接增加了边 $(v_3, v_5)$（而 $(v_4, v_5)$ 已被列出）。\n\n因此，边集是\n$$\nE=\\{(v_1, v_2), (v_2, v_3), (v_1, v_3), (v_1, v_4), (v_2, v_4), (v_4, v_5), (v_3, v_5)\\}.\n$$\n\n下界 $\\text{tw}(G) \\geq 3$：我们展示一个 $K_{4}$ 图子式。考虑四个不相交的连通顶点集\n$$\nB_1=\\{v_1\\},\\quad B_2=\\{v_2\\},\\quad B_3=\\{v_3\\},\\quad B_4=\\{v_4,v_5\\}.\n$$\n在图子式的意义下，它们是两两相邻的，因为：\n- $B_1$–$B_2$、$B_1$–$B_3$ 和 $B_2$–$B_3$ 通过边 $(v_1, v_2)$、$(v_1, v_3)$ 和 $(v_2, v_3)$ 相邻。\n- $B_4$–$B_1$ 通过 $(v_1, v_4)$，$B_4$–$B_2$ 通过 $(v_2, v_4)$，以及 $B_4$–$B_3$ 通过 $(v_3, v_5)$ 相邻。\n并且 $B_4$ 是连通的，因为 $(v_4, v_5) \\in E$。因此 $G$ 有一个 $K_{4}$ 图子式，这意味着 $\\text{tw}(G)\\geq \\text{tw}(K_{4})=3$。\n\n上界 $\\text{tw}(G) \\leq 3$：我们构造一个宽度为 $3$ 的有效树分解。设树 $T$ 有两个节点，记为 $a$ 和 $b$，它们之间有一条边。定义袋为\n$$\nX_a=\\{v_1,v_2,v_3,v_4\\},\\qquad X_b=\\{v_3,v_4,v_5\\}.\n$$\n我们验证树分解的性质：\n- 覆盖性：$X_a\\cup X_b=\\{v_1,v_2,v_3,v_4,v_5\\}=V$。\n- 边映射：$G$ 的每条边都包含在某个袋中：\n  - $(v_1, v_2), (v_1, v_3), (v_2, v_3), (v_1, v_4), (v_2, v_4)$ 都在 $X_a$ 中。\n  - $(v_4, v_5)$ 和 $(v_3, v_5)$ 都在 $X_b$ 中。\n- 连通性：包含 $v_1$ 的袋集为 $\\{X_a\\}$，包含 $v_2$ 的为 $\\{X_a\\}$，包含 $v_5$ 的为 $\\{X_b\\}$，而包含 $v_3$ 和 $v_4$ 的为 $\\{X_a,X_b\\}$；在每种情况下，这些袋都导出了 $T$ 的一个连通子树。\n\n这个树分解的宽度是 $\\max\\{|X_a|,|X_b|\\}-1=\\max\\{4,3\\}-1=3$。\n\n结合下界 $\\text{tw}(G)\\geq 3$ 和上界 $\\text{tw}(G)\\leq 3$，我们得出结论 $\\text{tw}(G)=3$。", "answer": "$$\\boxed{3}$$", "id": "1536489"}, {"introduction": "最后，我们将树宽与图论中一个更深层的结构属性联系起来：禁忌子结构。一个图的类别通常可以通过它“禁止”包含哪些结构来定义。这个练习 [@problem_id:1505277] 将探讨树宽较小的图类具有怎样的禁忌结构，并要求你找出其中最简单的“禁忌子式”，从而揭示一个图论中的基本定理，将树宽从一个度量标准提升为一个深刻的结构刻画。", "problem": "在网络设计的研究中，某些图论性质对于确保高效的数据路由和处理至关重要。其中一个性质是树宽，它衡量了一个图的“类树”程度。较低的树宽通常意味着图上的某些复杂计算问题可以被高效地解决。\n\n图 $G = (V, E)$ 的一个“树分解”是一个偶对 $(T, \\{X_i\\}_{i \\in V_T})$，其中 $T = (V_T, E_T)$ 是一棵树，每个 $X_i$ 是 $V$ 的一个子集（称为“袋”），满足以下三个性质：\n1.  所有袋 $X_i$ 的并集等于顶点集 $V$。\n2.  对于 $E$ 中的每条边 $(u,v)$，至少存在一个袋 $X_i$ 同时包含顶点 $u$ 和顶点 $v$。\n3.  对于任意顶点 $v \\in V$，包含 $v$ 的袋集合在 $T$ 中形成一个连通的非空子树。\n\n一个特定树分解的“宽度”定义为 $\\max_i(|X_i| - 1)$，其中 $|X_i|$ 是袋 $X_i$ 中的顶点数。图 $G$ 的“树宽”是 $G$ 的所有有效树分解中可能的最小宽度。\n\n如果图 $H$ 可以通过一系列三种操作从另一个图 $G$ 获得，则称 $H$ 是 $G$ 的一个“子式”：删点（删除顶点）、删边（删除边）和缩边（即移除一条边并将其两个端点合并为一个顶点）。\n\n一个图类有时可以通过其“禁忌子式”来刻画——这是一组图，它们不能作为该类中任何图的子式出现。考虑所有树宽至多为2的图所构成的图类。我们感兴趣的是找出最简单的完全图，记为 $K_n$（一个有 $n$ 个顶点的图，其中每对不同的顶点都由一条边相连），它是这个图类的禁忌子式。\n\n确定对于最小的完全图 $K_n$，使得它保证不是任何树宽至多为2的图的子式的整数 $n$ 的值。", "solution": "令 $\\operatorname{tw}(G)$ 表示图 $G$ 的树宽。\n\n首先，树宽是子式单调的：如果 $H$ 是 $G$ 的一个子式，则 $\\operatorname{tw}(H) \\le \\operatorname{tw}(G)$。这是因为每种子式操作都不会增加树宽。对于删点或删边，给定 $G$ 的一个树分解，从所有袋中移除该顶点或忽略被删除的边，会保持分解的有效性，并且不会增加 $\\max_{i}(|X_{i}|-1)$。对于收缩端点为 $u$ 和 $v$ 的边，可以从 $G$ 的一个分解出发，在所有袋中用一个新顶点替换 $u$ 和 $v$（可能需要先通过不增加宽度的标准调整来确保 $u$ 和 $v$ 共同出现在某个袋中）；这样可以得到收缩后图的一个有效分解，其宽度不会更大。\n\n其次，对于任何图 $G$，如果它包含一个大小为 $r$ 的团，则每个树分解都必须有一个包含所有 $r$ 个顶点的袋。这是因为对于团中的每条边，都必须有一个包含其端点的袋，而连通性性质迫使团的所有顶点都出现在一个共同的袋中。因此，\n$$\n\\operatorname{tw}(G) \\ge r - 1.\n$$\n特别地，对于完全图 $K_{n}$，这给出了 $\\operatorname{tw}(K_{n}) \\ge n - 1$。反之，一个只包含单个袋 $X=V(K_{n})$ 的分解的宽度为 $|X|-1=n-1$，所以\n$$\n\\operatorname{tw}(K_{n}) = n - 1.\n$$\n\n现在假设 $G$ 的树宽 $\\operatorname{tw}(G) \\le 2$。如果 $G$ 有一个 $K_{4}$ 子式，那么根据子式单调性，\n$$\n\\operatorname{tw}(K_{4}) \\le \\operatorname{tw}(G) \\le 2,\n$$\n但由于 $\\operatorname{tw}(K_{4}) = 3$，这是一个矛盾。因此，$K_{4}$ 不是任何树宽至多为2的图的子式。\n\n为了说明其在完全图中的最小性，注意到 $K_{3}$ 的树宽 $\\operatorname{tw}(K_{3}) = 2$，所以树宽至多为2的图可以包含 $K_{3}$ 作为子式（甚至是子图）。因此，从树宽至多为2的图类中被排除作为子式的最小完全图是 $K_{4}$，所求的整数是\n$$\nn=4.\n$$", "answer": "$$\\boxed{4}$$", "id": "1505277"}]}
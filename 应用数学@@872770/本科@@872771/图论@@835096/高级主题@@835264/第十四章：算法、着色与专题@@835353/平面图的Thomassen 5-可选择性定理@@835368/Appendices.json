{"hands_on_practices": [{"introduction": "列表着色的概念是图论中一个引人入胜的扩展。在深入探讨 Thomassen 定理的精妙之处前，我们首先需要确保对列表着色的基本规则有扎实的掌握。下面的练习 [@problem_id:1548864] 提供了一个具体情景，让你通过直接检验来判断一个给定的着色方案是否满足列表约束和邻接约束，这是理解更复杂概念的第一步。", "problem": "在图论中，列表染色是一种特殊的图染色。考虑一个图 $G$，其顶点集为 $V$，边集为 $E$。对于每个顶点 $v \\in V$，设 $L(v)$ 是一个允许使用的颜色列表。一个函数 $c: V \\to \\bigcup_{v \\in V} L(v)$ 是图 $G$ 的一个有效列表染色，如果它满足以下两个条件：\n1. 对于每个顶点 $v \\in V$，分配给它的颜色 $c(v)$ 必须在该顶点的允许颜色列表 $L(v)$ 中，即 $c(v) \\in L(v)$。\n2. 对于每条边 $(u, v) \\in E$，相邻的顶点 $u$ 和 $v$ 必须被分配不同的颜色，即 $c(u) \\neq c(v)$。\n\n现在，考虑一个具有五个顶点的特定图 $G$，其顶点集为 $V = \\{v_{1}, v_{2}, v_{3}, v_{4}, v_{5}\\}$。其边集为 $E = \\{(v_{1}, v_{2}), (v_{2}, v_{3}), (v_{3}, v_{4}), (v_{4}, v_{5}), (v_{5}, v_{1}), (v_{1}, v_{3})\\}$。\n\n每个顶点的允许颜色列表如下：\n- $L(v_{1}) = \\{1, 2, 4\\}$\n- $L(v_{2}) = \\{1, 3, 5\\}$\n- $L(v_{3}) = \\{2, 3, 4\\}$\n- $L(v_{4}) = \\{1, 4, 5\\}$\n- $L(v_{5}) = \\{2, 3, 5\\}$\n\n下面提出了四种可能的染色方案，其中每种染色方案 $c$ 都表示为一个有序元组 $(c(v_{1}), c(v_{2}), c(v_{3}), c(v_{4}), c(v_{5}))$。以下哪一项是图 $G$ 在给定颜色列表下的有效列表染色？\n\nA. $(1, 3, 2, 4, 5)$\nB. $(1, 1, 3, 4, 5)$\nC. $(3, 1, 2, 4, 5)$\nD. $(2, 1, 2, 4, 5)$", "solution": "给定一个图，其顶点集为 $V=\\{v_{1},v_{2},v_{3},v_{4},v_{5}\\}$，边集为 $E=\\{(v_{1},v_{2}), (v_{2},v_{3}), (v_{3},v_{4}), (v_{4},v_{5}), (v_{5},v_{1}), (v_{1},v_{3})\\}$。列表约束为 $L(v_{1})=\\{1,2,4\\}$, $L(v_{2})=\\{1,3,5\\}$, $L(v_{3})=\\{2,3,4\\}$, $L(v_{4})=\\{1,4,5\\}$, $L(v_{5})=\\{2,3,5\\}$。一个有效的列表染色 $c$ 必须满足：(i) 对所有 $v\\in V$，有 $c(v)\\in L(v)$；(ii) 对每条边 $(u,v)\\in E$，有 $c(u)\\neq c(v)$。\n\n检查选项 A：$(1,3,2,4,5)$。\n- 列表成员关系：$1\\in L(v_{1})$, $3\\in L(v_{2})$, $2\\in L(v_{3})$, $4\\in L(v_{4})$, $5\\in L(v_{5})$；全部满足。\n- 边的约束：\n$$c(v_{1})=1\\neq 3=c(v_{2}),\\quad c(v_{2})=3\\neq 2=c(v_{3}),$$\n$$c(v_{3})=2\\neq 4=c(v_{4}),\\quad c(v_{4})=4\\neq 5=c(v_{5}),$$\n$$c(v_{5})=5\\neq 1=c(v_{1}),\\quad c(v_{1})=1\\neq 2=c(v_{3}).$$\n所有边都满足相邻顶点颜色不同。因此选项 A 是有效的。\n\n检查选项 B：$(1,1,3,4,5)$。\n- 列表成员关系：$1\\in L(v_{1})$, $1\\in L(v_{2})$, $3\\in L(v_{3})$, $4\\in L(v_{4})$, $5\\in L(v_{5})$；全部满足。\n- 对于边 $(v_{1},v_{2})$ 的约束：$c(v_{1})=1=c(v_{2})$，这违反了 $c(u)\\neq c(v)$。因此选项 B 是无效的。\n\n检查选项 C：$(3,1,2,4,5)$。\n- 在 $v_{1}$ 处的列表成员关系不满足，因为 $3\\notin L(v_{1})=\\{1,2,4\\}$。因此选项 C 是无效的。\n\n检查选项 D：$(2,1,2,4,5)$。\n- 列表成员关系：$2\\in L(v_{1})$, $1\\in L(v_{2})$, $2\\in L(v_{3})$, $4\\in L(v_{4})$, $5\\in L(v_{5})$；全部满足。\n- 对于边 $(v_{1},v_{3})$ 的约束：$c(v_{1})=2=c(v_{3})$，这违反了 $c(u)\\neq c(v)$。因此选项 D 是无效的。\n\n因此，只有选项 A 同时满足列表成员关系和邻接约束。", "answer": "$$\\boxed{A}$$", "id": "1548864"}, {"introduction": "Thomassen 定理保证了任何平面图都是 5-可选择的，这意味着只要每个顶点的颜色列表至少有 5 种颜色，就一定存在一个有效的列表着色。然而，这个保证的存在性证明并不意味着任何简单的算法都能找到它。这个练习 [@problem_id:1548865] 旨在揭示这一微妙之处：它将展示一个直观的贪心算法在特定情况下如何失败，从而激发我们思考为什么需要更强大的证明和构造方法。", "problem": "考虑一个平面图 $G$，其顶点集为 $V = \\{v_{0}, v_{1}, v_{2}, v_{3}, v_{4}, v_{5}\\}$，边集为 $E = \\{(v_{0}, v_{i}) \\mid i \\in \\{1, 2, 3, 4, 5\\}\\} \\cup \\{(v_{1}, v_{2}), (v_{3}, v_{4})\\}$。\n\n每个顶点 $v \\in V$ 都被赋予一个允许的颜色列表 $L(v)$，具体如下：\n- $L(v_{0}) = \\{1, 2, 3, 4, 5\\}$\n- $L(v_{1}) = \\{1, 6, 7, 8, 9\\}$\n- $L(v_{2}) = \\{1, 2, 6, 7, 8\\}$\n- $L(v_{3}) = \\{3, 6, 7, 8, 9\\}$\n- $L(v_{4}) = \\{3, 4, 6, 7, 8\\}$\n- $L(v_{5}) = \\{5, 6, 7, 8, 9\\}$\n\n一个简单的贪婪着色算法试图找到该图的一个正常着色。该算法按照固定的顺序 $(v_{1}, v_{2}, v_{3}, v_{4}, v_{5}, v_{0})$ 处理顶点。对于此序列中的每个顶点，算法会从其颜色列表中选择一个尚未被其任何已着色邻居使用的最小整数值的颜色进行分配。如果不存在这样的颜色，则该顶点保持未着色，算法继续处理序列中的下一个顶点。\n\n在算法终止后，下列哪个选项正确描述了仍未着色的顶点集合？\n\nA. 算法为所有顶点提供了一个有效的着色。\nB. $\\{v_0\\}$\nC. $\\{v_5\\}$\nD. $\\{v_2, v_4\\}$\nE. $\\{v_0, v_5\\}$", "solution": "我们按照固定的顺序 $(v_{1}, v_{2}, v_{3}, v_{4}, v_{5}, v_{0})$ 应用指定的贪婪算法。对于每个顶点 $v$，算法分配 $L(v)$ 中尚未被任何已着色邻居使用的最小整数。\n\n令 $c(v)$ 表示分配给顶点 $v$ 的颜色。\n\n1) 顶点 $v_{1}$：它的邻居是 $v_{0}$ 和 $v_{2}$，它们都尚未被着色。因此没有限制。从 $L(v_{1})=\\{1,6,7,8,9\\}$ 中，最小的可用颜色是\n$$\nc(v_{1})=1.\n$$\n\n2) 顶点 $v_{2}$：它的邻居是 $v_{0}$ 和 $v_{1}$；在已着色的邻居中，只有 $v_{1}$ 被着色为 $1$。从 $L(v_{2})=\\{1,2,6,7,8\\}$ 中，排除 $1$ 后剩下 $\\{2,6,7,8\\}$，所以最小的可用颜色是\n$$\nc(v_{2})=2.\n$$\n\n3) 顶点 $v_{3}$：它的邻居是 $v_{0}$ 和 $v_{4}$；它们都尚未被着色。从 $L(v_{3})=\\{3,6,7,8,9\\}$ 中，最小的可用颜色是\n$$\nc(v_{3})=3.\n$$\n\n4) 顶点 $v_{4}$：它的邻居是 $v_{0}$ 和 $v_{3}$；在已着色的邻居中，只有 $v_{3}$ 被着色为 $3$。从 $L(v_{4})=\\{3,4,6,7,8\\}$ 中，排除 $3$ 后剩下 $\\{4,6,7,8\\}$，所以最小的可用颜色是\n$$\nc(v_{4})=4.\n$$\n\n5) 顶点 $v_{5}$：它唯一的邻居是 $v_{0}$，该顶点尚未着色。从 $L(v_{5})=\\{5,6,7,8,9\\}$ 中，最小的可用颜色是\n$$\nc(v_{5})=5.\n$$\n\n6) 顶点 $v_{0}$：它的邻居是 $v_{1},v_{2},v_{3},v_{4},v_{5}$，它们现在被着色为\n$$\nc(v_{1})=1,\\quad c(v_{2})=2,\\quad c(v_{3})=3,\\quad c(v_{4})=4,\\quad c(v_{5})=5.\n$$\n从 $L(v_{0})=\\{1,2,3,4,5\\}$ 来看，列表中的每种颜色都已被一个已着色的邻居使用，所以没有可用的颜色给 $v_{0}$。因此 $v_{0}$ 保持未着色。\n\n因此，恰好顶点 $v_{0}$ 保持未着色，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1548865"}, {"introduction": "既然简单的贪心策略并不可靠，我们该如何证明并找到一个有效的 5-列表着色呢？答案隐藏在 Thomassen 定理的归纳证明本身，该证明提供了一个强大的递归算法蓝图。这个练习 [@problem_id:1548857] 将带你深入该证明的核心，让你分析其关键的递归步骤，理解如何通过巧妙地缩小问题规模，同时维持归纳假设，最终构造出整个图的着色方案。", "problem": "在图论中，列表染色是为每个顶点从一个预先指定的允许颜色列表中分配一种颜色的过程。形式上，对于一个图 $G=(V, E)$，列表分配是一个函数 $L$，它将每个顶点 $v \\in V$ 映射到一个颜色列表 $L(v)$。一个 $L$-染色是一个函数 $c: V \\to \\bigcup_{v \\in V} L(v)$，使得对于所有 $v \\in V$ 都有 $c(v) \\in L(v)$，并且对于每条边 $(u,v) \\in E$ 都有 $c(u) \\ne c(v)$。如果对于所有满足 $|L(v)| \\ge k$（对所有 $v \\in V$）的列表分配 $L$，图 $G$ 都存在一个 $L$-染色，则称该图是 $k$-可选的。\n\nCarsten Thomassen 的一个著名结果指出，每个平面图都是 5-可选的。他的归纳证明通过证明一个更强的命题，为找到这样一种染色的递归算法提供了蓝图。\n\n考虑以下算法问题：\n给定一个平面图 $G$，其外边界是一个圈 $C=(v_{1}, v_{2}, \\dots, v_{k})$，以及一个具有以下性质的列表分配 $L$：\n1. 外圈上的两个相邻顶点 $v_{1}$ 和 $v_{2}$ 已用不同颜色预染色。也就是说， $|L(v_{1})|=1$ 和 $|L(v_{2})|=1$，且 $L(v_{1}) \\ne L(v_{2})$。\n2. 外圈 $C$ 上的每个其他顶点 $v$ 的颜色列表至少有3种颜色，即 $|L(v)| \\ge 3$。\n3. 圈 $C$ 内部的每个顶点 $u$（一个内部顶点）的颜色列表至少有5种颜色，即 $|L(u)| \\ge 5$。\n\n该递归算法为 $G$ 寻找一个有效的 $L$-染色。算法的结构取决于对外圈 $C$ 的情况分析。一种情况是 $C$ 有一个弦（连接 $C$ 的两个不相邻顶点的边）。另一种情况是 $C$ 是一个导出圈（它没有弦）。\n\n你的任务是确定第二种情况的正确处理过程，即 $C$ 是一个导出圈。设 $v_{3}$ 是 $C$ 上与 $v_{2}$ 相邻的除 $v_{1}$ 之外的顶点。下列哪个选项正确地描述了处理这种情况的主要递归步骤？\n\nA. 在列表 $L(v_{3})$ 中找出两种不同于分配给 $v_{2}$ 的颜色的颜色，比如说 `a` 和 `b`。形成一个新图 $G' = G - v_{3}$ 和一个新的列表分配 $L'$，其中对于 $v_{3}$ 的每个内部邻点 $u$，其列表更新为 $L'(u) = L(u) \\setminus \\{a, b\\}$。对于 $G'$ 中的所有其他顶点 $w$，$L'(w) = L(w)$。在对 $(G', L')$ 上递归调用算法。\n\nB. 移除顶点 $v_{3}$ 以形成图 $G' = G - v_{3}$。使用原始列表（限制在 $G'$ 的顶点上）在 $G'$ 上递归调用算法。在递归调用返回 $G'$ 的染色后，从 $v_{3}$ 的列表 $L(v_{3})$ 中为其分配一个其任何邻点都未使用的颜色。\n\nC. 立即从 $v_{3}$ 的列表中为其分配一个 $v_{2}$ 未使用的颜色。然后形成图 $G' = G - v_{3}$ 并在 $G'$ 上递归调用算法。对于递归调用，预染色的顶点现在是 $v_{1}$ 和新染色的 $v_{3}$。\n\nD. 找出分配给 $v_{2}$ 的颜色 `c`。形成一个新图 $G' = G-v_{3}$ 和一个新的列表分配 $L'$，其中对于 $v_{3}$ 的每个内部邻点 $u$，其列表更新为 $L'(u) = L(u) \\setminus \\{c\\}$。在对 $(G', L')$ 上递归调用算法。\n\nE. 设 $v_{k}$ 是 $C$ 上与 $v_{1}$ 相邻的除 $v_{2}$ 之外的顶点。在 $L(v_{k})$ 中找出两种 $v_{1}$ 未使用的颜色 `a` 和 `b`。形成一个新图 $G' = G-v_{k}$ 和一个新的列表分配 $L'$，其中 $v_{k}$ 的内部邻点的列表更新为 $L(u) \\setminus \\{a, b\\}$。在 $(G', L')$ 上递归调用算法。", "solution": "我们已知 Thomassen 证明中使用的加强归纳假设：在一个平面图 $G$ 中，其外边界是一个圈 $C=(v_{1},\\dots,v_{k})$，其中 $v_{1},v_{2}$ 已用不同颜色预染色， $C$ 上其余顶点的列表大小至少为 $3$，内部顶点的列表大小至少为 $5$，则存在一个扩展该预染色的 $L$-染色。\n\n我们必须处理 $C$ 是一个导出圈（即没有弦）的情况。设 $v_{3}$ 是 $C$ 上与 $v_{2}$ 相邻且不同于 $v_{1}$ 的顶点。递归步骤必须创建一个更小的实例，该实例仍然满足归纳假设，同时确保在递归调用后可以对 $v_{3}$ 进行染色。\n\n关键事实与约束：\n- $v_{3}$位于 $C$ 上且满足 $|L(v_{3})|\\ge 3$。设 $v_{2}$ 的颜色为 $c$。由于 $L(v_{3})$ 至少有 3 种颜色，因此存在至少两种不同的颜色 $a,b\\in L(v_{3})\\setminus\\{c\\}$。\n- 移除 $v_{3}$ 会形成 $G' = G - v_{3}$。因为 $C$ 是导出圈，删除 $v_{3}$ 会将 $G$ 中原为内部顶点的 $v_{3}$ 的邻点暴露到 $G'$ 的外边界上。因此，这些邻点在 $G'$ 中成为边界顶点。\n\n为了在 $(G',L')$ 上保持归纳假设，我们需要：\n- $G'$ 外边界上的两个预染色顶点保持相邻且颜色不同。这两个顶点仍然是 $v_{1}$ 和 $v_{2}$，所以这一点得以保持。\n- 边界顶点（包括新暴露的 $v_{3}$ 的邻点）在 $L'$ 中的列表大小必须至少为 $3$，而内部顶点的列表大小必须至少为 $5$。\n\n能够强制执行此条件并使得 $v_{3}$ 可被染色的 $L'$ 的构造如下：\n- 选择 $a,b\\in L(v_{3})\\setminus\\{c\\}$ 且 $a\\ne b$。\n- 对于 $G$ 中 $v_{3}$ 的每个内部邻点 $u$，设置 $L'(u)=L(u)\\setminus\\{a,b\\}$。由于 $|L(u)|\\ge 5$，我们有 $|L'(u)|\\ge 3$，这就足够了，因为这些顶点在 $G'$ 中成为边界顶点。\n- 对于所有其他顶点 $w$，设置 $L'(w)=L(w)$；特别是，$v_{1}$ 和 $v_{2}$ 仍然是用不同颜色预染色的。\n\n现在将归纳假设应用于 $(G',L')$ 以获得 $G'$ 的一个 $L'$-染色。在这个染色中：\n- 根据构造，$v_{3}$ 的内部邻点均不使用颜色 $a$ 或 $b$。\n- 用 $a$ 或 $b$ 为 $v_{3}$ 染色时，唯一可能的冲突来自其边界邻点 $v_{2}$ 和 $v_{4}$（其中 $v_{4}$ 是 $C$ 上 $v_{3}$ 的另一个邻点）。我们已经确保了 $a,b\\ne c$（$v_{2}$ 的颜色），所以 $v_{2}$ 不会阻碍使用 $a$ 或 $b$。\n- 在 $v_{4}$ 处，$\\{a,b\\}$ 中至多有一个被使用；因此，$a$ 和 $b$ 中至少有一个仍然可用于 $v_{3}$，从而产生对 $G$ 的一个 $L$-染色的有效扩展。\n\n这与选项 A 完全匹配。其他选项因以下原因而失败：\n- B：移除 $v_{3}$ 而不限制其邻点的列表，无法保证在递归染色后 $L(v_{3})$ 中的任何颜色仍未被所有邻点使用，因此 $v_{3}$ 可能变得无法染色。\n- C：预染色 $v_{3}$ 会破坏归纳假设，因为两个预染色的顶点（$v_{1}$ 和 $v_{3}$）通常不相邻，而归纳假设要求它们相邻。\n- D：仅从 $v_{3}$ 的邻点列表中移除颜色 $c$ 对使得 $v_{3}$ 可染色是无关紧要的（反正 $v_{3}$ 也不能使用 $c$），并且不能保证稍后 $v_{3}$ 会有可用的颜色。\n- E：尽管对称的选择有时可行，但所述过程与对 $v_{3}$ 的特定关注以及标准步骤不符；此外，问题是专门针对 $v_{3}$ 来构建这个步骤的。\n\n因此，正确的主要递归步骤是选项 A。", "answer": "$$\\boxed{A}$$", "id": "1548857"}]}
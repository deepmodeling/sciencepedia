{"hands_on_practices": [{"introduction": "我们将从极值图论中最基本的问题之一开始：一个网络在不形成任何三人小团体（即三角形 $K_3$）的情况下，最多可以有多少条连接？这个问题 [@problem_id:1551512] 以一个工程师社交网络的场景为例，让你亲手应用图兰定理的特例——曼特尔定理 (Mantel's Theorem)。通过解决这个问题，你将发现当图的边数达到这个极限时其必须具备的特定结构，为理解禁止子图问题提供一个具体的切入点。", "problem": "一家科技初创公司有一个由5名软件工程师组成的小团队。为了促进协作，公司鼓励工程师们结对进行代码审查。我们可以将工程师之间的关系建模为一个图，其中每个工程师是一个顶点，如果对应的两位工程师工作风格兼容，则在两个顶点之间连接一条边。公司已经确定，恰好有6对工程师是兼容的。\n\n为了维持一个健康且不拉帮结派的工作环境，公司的人力资源部门有一项严格的政策：任意三名工程师不能全部相互兼容。\n\n根据这些信息，关于这个兼容性网络，以下哪个陈述必然是正确的？\n\nA. 每位工程师拥有相同数量的兼容同事。\n\nB. 存在至少一名工程师与所有其他四名工程师都兼容。\n\nC. 这5名工程师可以被划分为两个非空子组，我们称之为X组和Y组，使得X组中的每一位工程师都与Y组中的每一位工程师兼容，并且在同一子组内的任意两位工程师都不兼容。\n\nD. 这个兼容性网络形成一个单一的闭环，其中每位工程师恰好与另外两位工程师兼容。\n\nE. 在给定的约束条件下，这样的兼容性网络配置是不可能的。", "solution": "将此情况建模为一个简单的无向图 $G$，有 $n=5$ 个顶点和 $e(G)=6$ 条边，并假设 $G$ 是无三角形的（没有 $K_{3}$）。\n\n根据 Mantel 定理，任何具有 $n$ 个顶点的无三角形图最多有\n$$\n\\left\\lfloor \\frac{n^{2}}{4} \\right\\rfloor\n$$\n条边，等号成立当且仅当该图是完全二分图，且其两部分的大小相差最多为 $1$。对于 $n=5$，这个上界是\n$$\n\\left\\lfloor \\frac{5^{2}}{4} \\right\\rfloor=\\left\\lfloor \\frac{25}{4} \\right\\rfloor=6.\n$$\n由于 $e(G)=6$，等号成立，所以 $G$ 必须是部分大小为 $2$ 和 $3$ 的完全二分图，即 $G\\cong K_{2,3}$。在这样的图中，顶点集可以被划分为两个非空部分 $X$ 和 $Y$，其中 $|X|=2$ 和 $|Y|=3$，使得 $X$ 中的每个顶点都与 $Y$ 中的每个顶点相邻，而在 $X$ 或 $Y$ 内部没有边。这正是选项C中所述的性质。\n\n为了验证必要性并排除其他选项：\n- A 是错误的，因为在 $K_{2,3}$ 中，大小为 $2$ 的部分中的顶点的度为 $3$，大小为 $3$ 的部分中的顶点的度为 $2$，所以该图不是正则图。\n- B 是错误的，因为在 $K_{2,3}$ 中的最大度为 $3$，所以没有顶点与所有其他 $4$ 个顶点都相邻。\n- D 是错误的，因为一个单一的 $5$-圈有 $5$ 条边，而不是 $6$ 条。\n- E 是错误的，因为 $K_{2,3}$ 满足约束条件，所以这种配置是可能的。\n\n因此，C 必然是正确的。", "answer": "$$\\boxed{C}$$", "id": "1551512"}, {"introduction": "从三角形扩展到更大的团（clique），我们现在来考虑一个更普遍的问题：如何避免网络中出现更大的完全连通子图。这个练习 [@problem_id:1551484] 提出了一个保障数据中心安全的实际场景，即消除所有由四个服务器组成的“关键风险四边形”（$K_4$）。它挑战你运用图兰定理的全部威力，不仅仅是确定一个存在性界限，而是解决一个优化问题：为了满足安全要求，最少需要断开多少条网络连接？这展示了图兰定理如何为网络设计和风险管理提供精确的量化工具。", "problem": "一家公司正在管理一个拥有9台服务器的安全数据中心。为实现最大冗余和性能，该网络最初配置为一个全连接系统，其中每台服务器都与所有其他服务器有直接的专用通信链路。一次安全审计发现了一个潜在风险：一个“关键风险四元组”被定义为任意一组4台全部相互直接连接的服务器。为减轻此风险，网络管理员必须切断一定数量的通信链路。为了确保网络中不包含任何关键风险四元组，必须切断的通信链路的绝对最小数量是多少？", "solution": "将网络模型化为一个有 $n=9$ 个顶点的简单无向图。最初它是一个 $K_{9}$ 图，拥有\n$$\n\\binom{9}{2}=36\n$$\n条边。一个“关键风险四元组”就是一个 $K_{4}$ 子图。我们寻求需要删除的最少边数，以使得到的图不含 $K_{4}$ 子图。这个数量等于 $K_{9}$ 的总边数减去一个9顶点图在不含 $K_{4}$ 子图的情况下所能拥有的最大边数。\n\n根据 Turán 定理，一个有 $n$ 个顶点且不含 $K_{r+1}$ 子图的图所能拥有的最大边数，由 Turán 图 $T(n, r)$ 达到，这是一个完全 $r$ 部图，其各部分的大小应尽可能相等。对于不含 $K_{4}$ 的情况，设 $r=3$。当 $n$ 能被 $r$ 整除时，边数 $t(n,r)$ 为\n$$\nt(n,r) = \\left(1-\\frac{1}{r}\\right)\\frac{n^{2}}{2}.\n$$\n对于 $n=9, r=3$，\n$$\nt(9,3) = \\left(1-\\frac{1}{3}\\right)\\frac{9^{2}}{2}=\\frac{2}{3}\\cdot\\frac{81}{2}=27.\n$$\n等价地，将9个顶点划分为三个大小为3的部分，并在不同部分之间连接所有边（即图 $K_{3,3,3}$），会产生3对部分，每对部分贡献 $3\\cdot 3=9$ 条边，总共得到 $3 \\times 9 = 27$ 条边。这个图的最大团大小为3，因此它不含 $K_{4}$ 子图。\n\n因此，任何有超过27条边的9顶点图都必然包含一个 $K_{4}$ 子图，而避免 $K_{4}$ 子图的最大边数是27。从36条边开始，为消除所有 $K_{4}$ 子图而需要切断的最少边数是\n$$\n36-27=9.\n$$\n这个界是紧的，因为 $K_{3,3,3}$ 不含 $K_{4}$ 子图。", "answer": "$$\\boxed{9}$$", "id": "1551484"}, {"introduction": "图兰定理保证了足够稠密的图中必定存在一个大的团，但我们如何实际找到它呢？这个练习 [@problem_id:1551490] 将我们从理论带向实践，介绍了一个直接源于图兰定理论文构造性证明的算法。通过手动追踪该算法的执行步骤，你不仅能找到定理所保证的团，还能从程序的角度更深刻地理解定理为何成立。这个练习将抽象的理论证明转化为一种具体可行的计算方法，使其不再神秘。", "problem": "在网络分析领域，识别“团”（clique）是一个基本问题。团是一个节点子集，其中任意两个不同的节点都相邻。一个有 $r$ 个顶点的完全图用 $K_r$ 表示。图兰定理（Turán's theorem）给出了一个关于保证这种结构存在的边数的强大结果。具体来说，任何具有 $n$ 个顶点和超过 $t(n, r-1)$ 条边的图都必须包含一个 $K_r$ 子图。数 $t(n, k)$ 被称为图兰数（Turán number），它是不包含 $K_{k+1}$ 子图的 $n$ 顶点图中所能拥有的最大边数。这个数量由图兰图 $T(n, k)$ 实现，这是一个 $n$ 个顶点的完全 $k$ 部图，其中划分的大小尽可能均衡（任意两个部分的大小差异最多为1）。\n\n图兰定理的一个构造性证明产生以下递归算法，用于在满足边密度条件的图 $G$ 中找到一个 $K_r$。\n\n**算法：`FindClique(G, r)`**\n\n1.  令 `n` 为输入图 `G` 的顶点数，`m` 为边数。令 `r` 为期望的团大小。\n2.  **基本情况：** 如果 $n=r$ 且 $m = \\binom{r}{2}$（即 `G` 是一个完全图），算法返回 `G` 中所有顶点的集合。\n3.  **顶点选择：** 确定图 `G` 中度数最小的顶点 `v`。如果度数相同，则选择整数标签最小的顶点。\n4.  **递归步骤：**\n    a. 令 $G' = G - v$ 为移除 `v` 及其所有关联边后得到的图。\n    b. 如果 $G'$ 中的边数 $|E(G')|$ 大于 $t(n-1, r-1)$，则算法返回递归调用 `FindClique(G', r)` 的结果。\n    c. 否则，令 $S$ 为 `v` 的邻居集合。令 $H=G[S]$ 为由 $S$ 中的顶点诱导的 `G` 的子图。算法返回 $\\{v\\} \\cup \\text{FindClique}(H, r-1)$。\n\n**你的任务：**\n\n考虑一个图 $G$，其顶点集为 $V = \\{1, 2, 3, 4, 5, 6, 7, 8\\}$。该图几乎是一个完全图，仅缺失以下6条边：$\\{1,3\\}, \\{2,3\\}, \\{4,5\\}, \\{4,6\\}, \\{5,6\\}, \\{7,8\\}$。\n\n将 `FindClique` 算法应用于此图 $G$，以找到一个大小为4的团（一个 $K_4$）。算法返回下列哪个顶点集？\n\nA. $\\{1, 2, 4, 7\\}$\n\nB. $\\{1, 2, 6, 8\\}$\n\nC. $\\{3, 4, 5, 6\\}$\n\nD. $\\{1, 2, 3, 4\\}$\n\nE. $\\{4, 5, 7, 8\\}$", "solution": "题目要求我们在给定的图 $G$ 上追踪 `FindClique(G, 4)` 算法的执行过程。\n\n首先，我们来描述输入图 $G$ 的特征。\n顶点集为 $V = \\{1, 2, 3, 4, 5, 6, 7, 8\\}$，所以 $n=8$。\n具有8个顶点的图中可能存在的总边数是 $\\binom{8}{2} = \\frac{8 \\times 7}{2} = 28$。\n题目说明缺失了6条特定的边。因此，$G$ 中的边数是 $m = 28 - 6 = 22$。\n期望的团大小为 $r=4$。\n\n该算法的保证依赖于图兰定理。我们必须检查是否 $m  t(n, r-1)$。在这里，我们需要检查是否 $22  t(8, 3)$。\n为了计算 $t(8, 3)$，我们考虑图兰图 $T(8, 3)$，这是一个8个顶点的完全3部图，其划分尽可能均衡。我们将8个顶点划分为3个部分：$8 = 3+3+2$。\n$T(8, 3)$ 中的边数是完全图 $K_8$ 的边数减去划分内部的边数。\n非边的数量是 $\\binom{3}{2} + \\binom{3}{2} + \\binom{2}{2} = 3 + 3 + 1 = 7$。\n所以，$t(8, 3) = \\binom{8}{2} - 7 = 28 - 7 = 21$。\n由于 $m = 22  21 = t(8, 3)$，该算法保证能找到一个 $K_4$。\n\n让我们逐步执行该算法。\n\n**初始调用：`FindClique(G, 4)`**\n- 输入：图 $G$，其中 $n=8, m=22$。整数 $r=4$。\n- 由于 $n \\neq r$，基本情况不适用。\n- **步骤3：顶点选择。** 我们需要找到度数最小的顶点。让我们计算 $G$ 中所有顶点的度数。一个顶点的度数是 $n-1=7$ 减去其缺失的关联边数。\n  - $d(1)$: 缺失边 $\\{1,3\\}$。$d(1) = 7-1=6$。\n  - $d(2)$: 缺失边 $\\{2,3\\}$。$d(2) = 7-1=6$。\n  - $d(3)$: 缺失边 $\\{1,3\\}, \\{2,3\\}$。$d(3) = 7-2=5$。\n  - $d(4)$: 缺失边 $\\{4,5\\}, \\{4,6\\}$。$d(4) = 7-2=5$。\n  - $d(5)$: 缺失边 $\\{4,5\\}, \\{5,6\\}$。$d(5) = 7-2=5$。\n  - $d(6)$: 缺失边 $\\{4,6\\}, \\{5,6\\}$。$d(6) = 7-2=5$。\n  - $d(7)$: 缺失边 $\\{7,8\\}$。$d(7) = 7-1=6$。\n  - $d(8)$: 缺失边 $\\{7,8\\}$。$d(8) = 7-1=6$。\n  最小度为 $\\delta(G)=5$。具有此度数的顶点是 $\\{3, 4, 5, 6\\}$。根据处理度数相同情况的规则，我们选择标签最小的那个，所以 $v=3$。\n- **步骤4：递归步骤。**\n  - 令 $G' = G-3$。新图有 $n-1=7$ 个顶点。其边数为 $|E(G')| = m - d(3) = 22 - 5 = 17$。\n  - 我们检查条件：$|E(G')|$ 是否大于 $t(7, 3)$？\n    - 为了计算 $t(7, 3)$，我们将7个顶点划分为3个部分：$7=3+2+2$。\n    - $T(7,3)$ 中的非边数为 $\\binom{3}{2} + \\binom{2}{2} + \\binom{2}{2} = 3 + 1 + 1 = 5$。\n    - $t(7, 3) = \\binom{7}{2} - 5 = 21 - 5 = 16$。\n  - 条件是 $17  16$，为真。因此，算法继续调用 `FindClique(G', 4)`。\n\n**递归调用 1: `FindClique(G', 4)`**\n- 输入：图 $G'$，其中 $n=7, m=17$。$r=4$。$V(G') = \\{1,2,4,5,6,7,8\\}$。\n- **步骤3：顶点选择。** 我们计算 $G'$ 中的度数。移除顶点3会使其邻居 $\\{4,5,6,7,8\\}$ 的度数在子图中各减少1。\n  - $d_{G'}(1)=d_G(1)=6$。\n  - $d_{G'}(2)=d_G(2)=6$。\n  - $d_{G'}(4)=d_G(4)-1 = 5-1=4$。\n  - $d_{G'}(5)=d_G(5)-1 = 5-1=4$。\n  - $d_{G'}(6)=d_G(6)-1 = 5-1=4$。\n  - $d_{G'}(7)=d_G(7)-1 = 6-1=5$。\n  - $d_{G'}(8)=d_G(8)-1 = 6-1=5$。\n  $G'$ 中的最小度为4，对应顶点为 $\\{4,5,6\\}$。最小的标签是4，所以我们选择 $v'=4$。\n- **步骤4：递归步骤。**\n  - 令 $G'' = G' - 4$。它有 $7-1=6$ 个顶点。边数为 $|E(G'')| = 17 - d_{G'}(4) = 17-4 = 13$。\n  - 检查条件：$|E(G'')|$ 是否大于 $t(6, 3)$？\n    - $t(6, 3)$：将6划分为 $2+2+2$。非边数：$3 \\times \\binom{2}{2} = 3$。$t(6, 3) = \\binom{6}{2} - 3 = 15 - 3 = 12$。\n  - 条件是 $13  12$，为真。我们调用 `FindClique(G'', 4)`。\n\n**递归调用 2: `FindClique(G'', 4)`**\n- 输入：图 $G''$，其中 $n=6, m=13$。$r=4$。$V(G'') = \\{1,2,5,6,7,8\\}$。\n- **步骤3：顶点选择。** 我们计算 $G''$ 中的度数。移除顶点4会使其在 $G'$ 中的邻居 $\\{1,2,7,8\\}$ 的度数各减少1。\n  - $d_{G''}(1)=d_{G'}(1)-1 = 6-1=5$。\n  - $d_{G''}(2)=d_{G'}(2)-1 = 6-1=5$。\n  - $d_{G''}(5)=d_{G'}(5)=4$。\n  - $d_{G''}(6)=d_{G'}(6)=4$。\n  - $d_{G''}(7)=d_{G'}(7)-1=5-1=4$。\n  - $d_{G''}(8)=d_{G'}(8)-1=5-1=4$。\n  最小度为4，对应顶点为 $\\{5,6,7,8\\}$。最小的标签是5，所以 $v''=5$。\n- **步骤4：递归步骤。**\n  - 令 $G''' = G'' - 5$。它有 $6-1=5$ 个顶点。边数为 $|E(G''')| = 13 - d_{G''}(5) = 13-4 = 9$。\n  - 检查条件：$|E(G''')|$ 是否大于 $t(5, 3)$？\n    - $t(5, 3)$：将5划分为 $2+2+1$。非边数：$\\binom{2}{2}+\\binom{2}{2}+\\binom{1}{2}=1+1+0=2$。$t(5, 3) = \\binom{5}{2}-2 = 10-2=8$。\n  - 条件是 $98$，为真。我们调用 `FindClique(G''', 4)`。\n\n**递归调用 3: `FindClique(G''', 4)`**\n- 输入：图 $G'''$，其中 $n=5, m=9$。$r=4$。$V(G''')=\\{1,2,6,7,8\\}$。\n- **步骤3：顶点选择。** 计算 $G'''$ 中的度数。移除顶点5会使其在 $G''$ 中的邻居 $\\{1,2,7,8\\}$ 的度数各减少1。\n  - $d_{G'''}(1)=d_{G''}(1)-1=5-1=4$。\n  - $d_{G'''}(2)=d_{G''}(2)-1=5-1=4$。\n  - $d_{G'''}(6)=d_{G''}(6)=4$。\n  - $d_{G'''}(7)=d_{G''}(7)-1=4-1=3$。\n  - $d_{G'''}(8)=d_{G''}(8)-1=4-1=3$。\n  最小度为3，对应顶点为 $\\{7,8\\}$。最小的标签是7，所以 $v'''=7$。\n- **步骤4：递归步骤。**\n  - 令 $G'''' = G''' - 7$。它有 $5-1=4$ 个顶点。边数为 $|E(G'''')| = 9 - d_{G'''}(7) = 9-3=6$。\n  - 检查条件：$|E(G'''')|$ 是否大于 $t(4, 3)$？\n    - $t(4, 3)$：将4划分为 $2+1+1$。非边数：$\\binom{2}{2}=1$。$t(4, 3) = \\binom{4}{2}-1 = 6-1=5$。\n  - 条件是 $65$，为真。我们调用 `FindClique(G'''', 4)`。\n\n**递归调用 4: `FindClique(G'''', 4)`**\n- 输入：图 $G''''$，其中 $n=4, m=6$。$r=4$。$V(G'''')=\\{1,2,6,8\\}$。\n- **步骤2：基本情况。** 我们有 $n=4$ 和 $r=4$。我们检查 $m$ 是否等于 $\\binom{4}{2}$。\n  - $\\binom{4}{2} = \\frac{4 \\times 3}{2} = 6$。\n  - 确实，$m=6$。所以 $G''''$ 是一个完全图 $K_4$。\n- 基本情况适用，算法返回顶点集 $V(G'''') = \\{1, 2, 6, 8\\}$。\n\n这个结果随后沿着递归调用链向上传递，并成为初始调用的最终输出。找到的顶点集是 $\\{1, 2, 6, 8\\}$，对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1551490"}]}
{"hands_on_practices": [{"introduction": "掌握了匹配的理论定义后，我们首先通过一个基础练习来巩固概念。这个问题将图匹配的概念置于一个直观的环形网络场景中。通过确定在一个环路中可以同时建立的最大通信链接数，我们实际上是在计算环图 $C_n$ 的最大匹配数 [@problem_id:1520409]。这个练习有助于我们理解图的顶点数如何限制匹配的大小，并锻炼我们通过分类讨论（例如，根据顶点数的奇偶性）来解决图论问题的能力。", "problem": "一家科技公司正在 $n$ 台设备之间部署一个新的点对点通信系统，其中 $n$ 是一个大于或等于 3 的整数。这些设备排列成一个逻辑环形拓扑结构，意味着每台标记为 $d_i$ 的设备只能与其两个直接相邻的设备 $d_{i-1}$ 和 $d_{i+1}$ 直接通信（索引按模 $n$ 计算，因此 $d_{n+1}$ 是 $d_1$，$d_0$ 是 $d_n$）。\n\n当两个相邻设备配对交换一个大数据包时，就建立了一条“通信链路”。当一条链路建立后，所涉及的两台设备被视为“占用”，不能参与任何其他通信链路。目标是最大化整个网络中可同时存在的、不重叠的通信链路数量。\n\n确定一个单一的、封闭形式的表达式，用于表示在任何给定时刻可以活跃的最大通信链路数量，该表达式用 $n$ 表示。您的表达式应对任何整数 $n \\ge 3$ 都有效。", "solution": "首先，我们使用图论来对这个问题进行建模。这 $n$ 台设备可以表示为图 $G$ 的顶点，而相邻设备之间的潜在通信路径可以表示为边。由于设备处于环形拓扑结构中，每个设备都连接到其两个直接相邻的邻居，因此生成的图是一个具有 $n$ 个顶点的循环图，记为 $C_n$。\n\n一组同时存在的、不重叠的通信链路对应于 $C_n$ 中的一个边集，其中任意两条边都不共享一个公共顶点。根据定义，这是图中的一个匹配。问题要求的是这些链路的最大数量，这等价于求 $C_n$ 中最大匹配的大小。最大匹配的大小也称为匹配数，记为 $\\alpha'(G)$。\n\n我们可以通过考虑 $n$ 的奇偶性分两种情况来确定 $\\alpha'(C_n)$ 的值。\n\n情况 1：$n$ 是偶数。\n设 $n = 2k$，其中 $k$ 是某个整数且 $k \\ge 2$（因为 $n \\ge 3$，所以最小的偶数 $n$ 是 4）。设顶点沿环依次标记为 $v_1, v_2, \\dots, v_{2k}$。我们可以通过沿环选择每隔一条边来构建一个匹配。例如，考虑边集 $M = \\{\\{v_1, v_2\\}, \\{v_3, v_4\\}, \\dots, \\{v_{2k-1}, v_{2k}\\}\\}$。在这个集合中，每个顶点 $v_i$ 最多出现在一条边中。例如，$v_2$ 在 $\\{v_1, v_2\\}$ 中，但它的另一个邻居 $v_3$ 与 $v_4$ 配对，而不是与 $v_2$ 配对。这个集合 $M$ 是一个有效的匹配。这个匹配中的边数为 $k$。由于 $n = 2k$，我们有 $k = n/2$。因此，我们找到了一个大小为 $n/2$ 的匹配。\n一个大小为 $m$ 的匹配涉及 $2m$ 个不同的顶点。在任何具有 $n$ 个顶点的图中，任何匹配的大小 $m$ 都必须满足 $2m \\le n$，这意味着 $m \\le n/2$。由于我们已经找到了一个大小为 $n/2$ 的匹配，这必定是一个最大匹配。因此，对于偶数 $n$，$\\alpha'(C_n) = n/2$。\n\n情况 2：$n$ 是奇数。\n设 $n = 2k+1$，其中 $k$ 是某个整数且 $k \\ge 1$（因为 $n \\ge 3$，所以最小的奇数 $n$ 是 3）。设顶点标记为 $v_1, v_2, \\dots, v_{2k+1}$。我们可以尝试用与偶数情况类似的方法构建一个匹配。考虑边集 $M = \\{\\{v_1, v_2\\}, \\{v_3, v_4\\}, \\dots, \\{v_{2k-1}, v_{2k}\\}\\}$。这是一个有效的匹配，其大小为 $k$。所涉及的顶点是 $v_1, \\dots, v_{2k}$。顶点 $v_{2k+1}$ 未被匹配。$v_{2k+1}$ 的邻居是 $v_1$ 和 $v_{2k}$。这两个顶点都已在匹配 $M$ 中被使用（分别在边 $\\{v_1, v_2\\}$ 和 $\\{v_{2k-1}, v_{2k}\\}$ 中），因此不能再向 $M$ 中添加更多的边。\n这个匹配的大小是 $k$。由于 $n = 2k+1$，我们可以将 $k$ 表示为 $k = (n-1)/2$。所以我们找到了一个大小为 $(n-1)/2$ 的匹配。\n和之前一样，对于任何大小为 $m$ 的匹配，我们必须有 $2m \\le n$。对于奇数 $n=2k+1$，这意味着 $2m \\le 2k+1$，即 $m \\le k + 1/2$。由于 $m$ 必须是整数，最大可能的大小是 $m \\le k$。我们已经构建了一个大小为 $k$ 的匹配，所以这是一个最大匹配。因此，对于奇数 $n$，$\\alpha'(C_n) = (n-1)/2$。\n\n最后，我们将两种情况合并为一个单一的封闭形式表达式。\n如果 $n$ 是偶数，$n=2k$，最大大小是 $k = n/2$。\n如果 $n$ 是奇数，$n=2k+1$，最大大小是 $k = (n-1)/2$。\n\n我们可以使用向下取整函数 $\\lfloor x \\rfloor$（它给出小于或等于 $x$ 的最大整数）来紧凑地表示这个结果。\n如果 $n$ 是偶数，$n=2k$，则 $\\lfloor n/2 \\rfloor = \\lfloor 2k/2 \\rfloor = \\lfloor k \\rfloor = k$。这与我们的结果相符。\n如果 $n$ 是奇数，$n=2k+1$，则 $\\lfloor n/2 \\rfloor = \\lfloor (2k+1)/2 \\rfloor = \\lfloor k + 0.5 \\rfloor = k$。这也与我们的结果相符。\n\n因此，对于任何整数 $n \\ge 3$，最大同时通信链路数由表达式 $\\lfloor n/2 \\rfloor$ 给出。", "answer": "$$\\boxed{\\lfloor \\frac{n}{2} \\rfloor}$$", "id": "1520409"}, {"introduction": "知道了什么是最大匹配，一个自然而然的问题是：我们如何找到它？许多寻找最大匹配的算法都基于一个核心思想——增广路径。这个练习 [@problem_id:1520390] 让我们在一个具体的二分图中，从一个非最大匹配出发，亲手寻找一条增广路径。这是一次宝贵的实践，它揭示了如何逐步改进并最终达到最大匹配的算法精髓。", "problem": "在一个分布式计算系统中，一组服务器必须被分配给一组计算任务。该系统的调度程序旨在通过在系统的二分图表示中找到一个最大匹配，来最大化并发运行的任务数量。\n\n设服务器集合为 $A = \\{s_1, s_2, s_3, s_4, s_5\\}$，任务集合为 $B = \\{t_1, t_2, t_3, t_4, t_5\\}$。二分图为 $G = (A \\cup B, E)$，其中一条边 $(s_i, t_j) \\in E$ 表示服务器 $s_i$ 能够执行任务 $t_j$。可能的分配（边）集合由以下给出：\n$E = \\{ (s_1, t_2), (s_1, t_3), (s_2, t_1), (s_2, t_4), (s_3, t_1), (s_3, t_2), (s_4, t_3), (s_4, t_5), (s_5, t_5) \\}$。\n\n调度程序已经找到了一个初始的、非最大的匹配 $M$，它是 $E$ 的一个子集：\n$M = \\{ (s_2, t_1), (s_3, t_2), (s_4, t_3) \\}$。\n\n为了改进当前的分配，调度程序必须找到一条 $M$-增广路径。一条 $M$-增广路径是一条交错路径（其边在 $E \\setminus M$ 和 $M$ 中交替出现），其起点和终点都未被 $M$ 匹配。\n\n请找出从服务器 $s_1$ 开始的最短的 $M$-增广路径。该路径应表示为一个有序的顶点序列。\n\n下列哪个选项表示这条路径？\n\nA. $(s_1, t_2, s_3, t_1, s_2, t_4)$\n\nB. $(s_1, t_3, s_4, t_5)$\n\nC. $(s_5, t_5)$\n\nD. $(s_1, t_2, s_3)$\n\nE. $(s_1, t_2, s_4, t_5)$", "solution": "我们给定一个二分图 $G=(A\\cup B,E)$，其中 $A=\\{s_{1},s_{2},s_{3},s_{4},s_{5}\\}$ 和 $B=\\{t_{1},t_{2},t_{3},t_{4},t_{5}\\}$，边集 $E=\\{(s_{1},t_{2}),(s_{1},t_{3}),(s_{2},t_{1}),(s_{2},t_{4}),(s_{3},t_{1}),(s_{3},t_{2}),(s_{4},t_{3}),(s_{4},t_{5}),(s_{5},t_{5})\\}$，以及一个当前匹配 $M=\\{(s_{2},t_{1}),(s_{3},t_{2}),(s_{4},t_{3})\\}$。一个匹配将 $s_{2}$ 与 $t_{1}$ 配对，$s_{3}$ 与 $t_{2}$ 配对，以及 $s_{4}$ 与 $t_{3}$ 配对。因此，未匹配的服务器是 $s_{1}$ 和 $s_{5}$，未匹配的任务是 $t_{4}$ 和 $t_{5}$。\n\n根据定义，一条 $M$-增广路径是一条交错路径，其边在 $E\\setminus M$ 和 $M$ 之间交替，且起点和终点都是未被 $M$ 匹配的顶点。由于我们必须从 $s_{1}$（未匹配）开始，第一条边必须在 $E\\setminus M$ 中。\n\n从 $s_{1}$ 出发，可用的边是 $(s_{1},t_{2})$ 和 $(s_{1},t_{3})$，它们都在 $E\\setminus M$ 中。这里的每个目标任务都在 $M$ 中被匹配：$t_{2}$ 与 $s_{3}$ 匹配，$t_{3}$ 与 $s_{4}$ 匹配。因此，下一步必须沿着与该任务关联的唯一的 $M$ 中的边进行：\n- 如果我们选择 $(s_{1},t_{3})\\in E\\setminus M$，那么我们必须走 $(t_{3},s_{4})\\in M$。从 $s_{4}$ 出发，我们必须选择一条在 $E\\setminus M$ 中的边；从 $s_{4}$ 出发的可用边是 $(s_{4},t_{3})\\in M$ 和 $(s_{4},t_{5})\\in E\\setminus M$。选择 $(s_{4},t_{5})$ 到达 $t_{5}$，而 $t_{5}$ 是未匹配的。因此，路径\n$$\n(s_{1},t_{3},s_{4},t_{5})\n$$\n是一条 $M$-增广路径，其交替模式为 $E\\setminus M$, $M$, $E\\setminus M$，且端点 $s_{1}$ 和 $t_{5}$ 都是未匹配的。\n\n- 如果我们转而选择 $(s_{1},t_{2})\\in E\\setminus M$，那么我们必须走到 $(t_{2},s_{3})\\in M$。从 $s_{3}$ 出发，唯一的 $E\\setminus M$ 边是 $(s_{3},t_{1})$，而 $t_{1}$ 通过 $(t_{1},s_{2})\\in M$ 与 $s_{2}$ 匹配。从 $s_{2}$ 出发，一条 $E\\setminus M$ 边是 $(s_{2},t_{4})$，到达未匹配的 $t_{4}$。这产生路径\n$$\n(s_{1},t_{2},s_{3},t_{1},s_{2},t_{4}),\n$$\n这也是一条 $M$-增广路径，但边数更多。\n\n在这两者之间，从 $s_{1}$ 开始的最短 $M$-增广路径是 $(s_{1},t_{3},s_{4},t_{5})$，这与选项 B 相符。其他选项无效的原因如下：C 不从 $s_{1}$ 开始；D 的终点不是一个未匹配的顶点，并且没有交替到一个未匹配的端点；E 包含一条不存在的边 $(t_{2},s_{4})$，并且违反了交替规则，因为 $t_{2}$ 是与 $s_{3}$ 匹配，而不是 $s_{4}$。\n\n因此，正确选项是 B。", "answer": "$$\\boxed{B}$$", "id": "1520390"}, {"introduction": "在掌握了基本概念和核心算法之后，我们来挑战一个更综合的问题，它聚焦于一种特殊的匹配——完美匹配。在这个问题中 [@problem_id:1520453]，我们需要计算一个复合图中完美匹配的总数。这个问题极好地展示了图的结构属性（例如桥）如何深刻影响解的形态，并要求我们将匹配理论与组合计数相结合。通过这个练习，你可以体验到解决更复杂图论问题时所需的综合分析能力。", "problem": "在图论中，一个*图*由一个顶点集和一个边集组成，其中每条边连接一对不同的顶点。图中的一个*匹配*是一个边集，其中任意两条边都不共享公共顶点。如果一个匹配覆盖了图中的所有顶点，则称其为*完美匹配*。一个具有 $n$ 个顶点的*完全图*，记作 $K_n$，是一个简单图，其中每对不同的顶点都由一条唯一的边连接。\n\n考虑一个根据以下过程构造的图 $G$：\n1.  从两个不相交的完全图开始：一个图 $G_1$，它是 $K_7$（一个有7个顶点的完全图）的副本，以及一个图 $G_2$，它是 $K_9$（一个有9个顶点的完全图）的副本。\n2.  从 $G_1$ 中任选一个顶点 $v_1$，从 $G_2$ 中任选一个顶点 $v_2$。\n3.  最终的图 $G$ 是通过取 $G_1$ 和 $G_2$ 的顶点和边的并集，并添加一条新的边 $e = (v_1, v_2)$ 而形成的。\n\n计算图 $G$ 中不同完美匹配的总数。", "solution": "我们分析在由 $G_{1}\\cong K_{7}$ 和 $G_{2}\\cong K_{9}$ 并添加一条边 $e=(v_{1},v_{2})$ 构成的图 $G$ 中的完美匹配。\n\n首先，$G$ 中的任何完美匹配都必须使用边 $e$。要理解这一点，假设一个完美匹配不使用 $e$。那么所有匹配的边必须完全位于 $G_{1}$ 和 $G_{2}$ 内部。然而，$G_{1}$ 有 7 个顶点，因此它不可能有完美匹配（完美匹配要求顶点数为偶数）。这个矛盾表明，$G$ 的每个完美匹配都必须包含 $e$。\n\n一旦使用了边 $e$，顶点 $v_{1}$ 和 $v_{2}$ 就被匹配并移除，剩下 $G_{1}-\\{v_{1}\\}\\cong K_{6}$ 和 $G_{2}-\\{v_{2}\\}\\cong K_{8}$。完美匹配的其余边必须分别在 $K_{6}$ 和 $K_{8}$ 中独立地形成完美匹配。因此，$G$ 中完美匹配的总数等于 $K_{6}$ 和 $K_{8}$ 中完美匹配数量的乘积。\n\n在完全图 $K_{2m}$ 中，完美匹配的数量为\n$$\n(2m-1)!!=\\frac{(2m)!}{2^{m} m!}.\n$$\n因此，\n$$\n\\#\\text{PM}(K_{6})=\\frac{6!}{2^{3} 3!}=15,\\qquad \\#\\text{PM}(K_{8})=\\frac{8!}{2^{4} 4!}=105.\n$$\n将两者相乘，$G$ 中完美匹配的总数为\n$$\n15\\times 105=1575.\n$$", "answer": "$$\\boxed{1575}$$", "id": "1520453"}]}
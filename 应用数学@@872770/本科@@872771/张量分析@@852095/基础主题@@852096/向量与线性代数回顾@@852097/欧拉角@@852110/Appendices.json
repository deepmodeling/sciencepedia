{"hands_on_practices": [{"introduction": "旋转矩阵的九个元素并非各自独立，而是由三个欧拉角通过特定的三角函数关系式所确定。本练习将通过一个具体场景，向你展示如何利用旋转矩阵中的单个元素来反解出其中一个欧拉角。这是验证和推导姿态属性的一项基本技能。[@problem_id:2048188]", "problem": "一个机械臂末端执行器的姿态是相对于一个固定的世界坐标系来描述的。该姿态由一组三个欧拉角 $(\\phi, \\theta, \\psi)$ 使用 z-x'-z'' 约定进行参数化。此约定对应于以下旋转序列，用于将世界坐标系与末端执行器坐标系对齐：\n1. 绕世界坐标系的 $z$ 轴旋转角度 $\\phi$。\n2. 绕新生成的中间 $x'$ 轴旋转角度 $\\theta$。\n3. 绕最终的末端执行器的 $z''$ 轴旋转角度 $\\psi$。\n\n从末端执行器坐标系中的点坐标到世界坐标系中同一点坐标的变换，由一个 $3 \\times 3$ 的旋转矩阵 $R$ 表示。一个传感器测量了该矩阵的一个元素，发现第三行第三列的元素 $R_{33}$ 等于 $0.5$。\n\n已知角度 $\\theta$ 被限制在 $0 \\le \\theta \\le \\pi$ 的范围内，那么 $\\theta$ 的值是多少（以弧度为单位）？\n\nA) $\\frac{\\pi}{6}$\n\nB) $\\frac{\\pi}{4}$\n\nC) $\\frac{\\pi}{3}$\n\nD) $\\frac{\\pi}{2}$\n\nE) $\\frac{2\\pi}{3}$", "solution": "对于内旋 $z$-$x'$-$z''$ 欧拉角序列，将末端执行器坐标映射到世界坐标的旋转为\n$$\nR = R_{z}(\\phi)\\,R_{x}(\\theta)\\,R_{z}(\\psi),\n$$\n其中\n$$\nR_{z}(\\phi)=\\begin{pmatrix}\n\\cos\\phi & -\\sin\\phi & 0\\\\\n\\sin\\phi & \\cos\\phi & 0\\\\\n0 & 0 & 1\n\\end{pmatrix},\\quad\nR_{x}(\\theta)=\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & \\cos\\theta & -\\sin\\theta\\\\\n0 & \\sin\\theta & \\cos\\theta\n\\end{pmatrix},\\quad\nR_{z}(\\psi)=\\begin{pmatrix}\n\\cos\\psi & -\\sin\\psi & 0\\\\\n\\sin\\psi & \\cos\\psi & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}.\n$$\n计算 $A=R_{z}(\\phi)R_{x}(\\theta)$：\n$$\nA=\\begin{pmatrix}\n\\cos\\phi & -\\sin\\phi\\cos\\theta & \\sin\\phi\\sin\\theta\\\\\n\\sin\\phi & \\cos\\phi\\cos\\theta & -\\cos\\phi\\sin\\theta\\\\\n0 & \\sin\\theta & \\cos\\theta\n\\end{pmatrix}.\n$$\n于是 $R=A R_{z}(\\psi)$。$R$ 的 $(3,3)$ 元素是 $A$ 的第 3 行与 $R_{z}(\\psi)$ 的第 3 列的点积，得到\n$$\nR_{33}=\\cos\\theta.\n$$\n传感器测得 $R_{33}=\\frac{1}{2}$，所以\n$$\n\\cos\\theta=\\frac{1}{2}.\n$$\n在 $0\\le \\theta \\le \\pi$ 的限制条件下，解为\n$$\n\\theta=\\arccos\\!\\left(\\frac{1}{2}\\right)=\\frac{\\pi}{3}.\n$$\n因此，正确选项是 C。", "answer": "$$\\boxed{C}$$", "id": "2048188"}, {"introduction": "欧拉角虽然直观，但存在一个被称为“万向节死锁”的关键限制，即在特定姿态下会损失一个旋转自由度。本练习通过一个假设的机械故障场景，从数学上清晰地揭示了万向节死锁的成因。你将看到两个独立的旋转是如何合并为一个旋转的，从而对这一重要现象建立起坚实的理解。[@problem_id:1509872]", "problem": "在机器人学和航空航天工程中，刚体的姿态通常使用称为欧拉角的一系列三次旋转来描述。考虑一个由角度 $(\\alpha, \\beta, \\gamma)$ 定义的特定序列，称为 Z-X'-Z'' 内旋。该序列对应于：\n1. 第一次旋转，绕初始 $z$ 轴旋转角度 $\\alpha$。\n2. 第二次旋转，绕新的中间 $x'$ 轴（“交点线”）旋转角度 $\\beta$。\n3. 第三次旋转，绕最终的 $z''$ 轴旋转角度 $\\gamma$。\n\n将矢量坐标从最终的物体坐标系转换到初始的空间坐标系的整体旋转可以用一个旋转矩阵 $R(\\alpha, \\beta, \\gamma)$ 来表示。对于 Z-X'-Z'' 序列，该矩阵由乘积 $R(\\alpha, \\beta, \\gamma) = R_z(\\alpha) R_x(\\beta) R_z(\\gamma)$ 给出，其中 $R_k(\\theta)$ 是绕 $k$ 轴旋转角度 $\\theta$ 的矩阵。绕 $z$ 轴和 $x$ 轴的标准旋转矩阵为：\n$$R_z(\\theta) = \\begin{pmatrix} \\cos\\theta & -\\sin\\theta & 0 \\\\ \\sin\\theta & \\cos\\theta & 0 \\\\ 0 & 0 & 1 \\end{pmatrix}$$\n$$R_x(\\theta) = \\begin{pmatrix} 1 & 0 & 0 \\\\ 0 & \\cos\\theta & -\\sin\\theta \\\\ 0 & \\sin\\theta & \\cos\\theta \\end{pmatrix}$$\n\n一个机械臂被设计为使用这种 Z-X'-Z'' 序列。然而，由于机械故障，第二次旋转的执行器被永久锁定，使得角度 $\\beta$ 固定为 $0$。控制系统仍然可以自由地改变角度 $\\alpha$ 和 $\\gamma$。这种情况导致了一种被称为万向节锁或奇点的现象，此时第一次和第三次旋转不再完全独立。\n\n在 ($\\beta=0$) 这种故障情况下，下列哪个陈述正确地描述了机械臂的最终姿态如何依赖于角度 $\\alpha$ 和 $\\gamma$？\n\nA. 最终姿态仅取决于角度之差 $\\alpha - \\gamma$。\nB. 最终姿态仅取决于角度之和 $\\alpha + \\gamma$。\nC. 最终姿态仅取决于 $\\alpha$，$\\gamma$ 的任何变化都没有影响。\nD. 最终姿态仅取决于 $\\gamma$，$\\alpha$ 的任何变化都没有影响。\nE. 机械臂保持其初始姿态，因为对于任何 $\\alpha$ 和 $\\gamma$，总旋转都等效于单位变换。", "solution": "我们从给定的 Z-X'-Z'' 内旋序列的旋转开始，该旋转表示为绕固定轴的标准旋转矩阵的乘积：\n$$\nR(\\alpha,\\beta,\\gamma)=R_{z}(\\alpha)R_{x}(\\beta)R_{z}(\\gamma).\n$$\n在故障情况下，第二次旋转被锁定在 $\\beta=0$。绕 $x$ 轴旋转零角度的旋转矩阵是单位矩阵：\n$$\nR_{x}(0)=\\begin{pmatrix} 1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & 1 \\end{pmatrix}=I_{3}.\n$$\n因此，\n$$\nR(\\alpha,0,\\gamma)=R_{z}(\\alpha)I_{3}R_{z}(\\gamma)=R_{z}(\\alpha)R_{z}(\\gamma).\n$$\n我们现在显式地将两个绕 $z$ 轴的旋转矩阵相乘。使用\n$$\nR_{z}(\\theta)=\\begin{pmatrix} \\cos\\theta & -\\sin\\theta & 0 \\\\ \\sin\\theta & \\cos\\theta & 0 \\\\ 0 & 0 & 1 \\end{pmatrix},\n$$\n我们计算\n$$\nR_{z}(\\alpha)R_{z}(\\gamma)=\n\\begin{pmatrix}\n\\cos\\alpha & -\\sin\\alpha & 0 \\\\\n\\sin\\alpha & \\cos\\alpha & 0 \\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\n\\cos\\gamma & -\\sin\\gamma & 0 \\\\\n\\sin\\gamma & \\cos\\gamma & 0 \\\\\n0 & 0 & 1\n\\end{pmatrix}.\n$$\n逐项进行矩阵乘法，并使用和角恒等式 $\\cos(\\alpha+\\gamma)=\\cos\\alpha\\cos\\gamma-\\sin\\alpha\\sin\\gamma$ 和 $\\sin(\\alpha+\\gamma)=\\sin\\alpha\\cos\\gamma+\\cos\\alpha\\sin\\gamma$，我们得到\n$$\nR_{z}(\\alpha)R_{z}(\\gamma)=\n\\begin{pmatrix}\n\\cos(\\alpha+\\gamma) & -\\sin(\\alpha+\\gamma) & 0 \\\\\n\\sin(\\alpha+\\gamma) & \\cos(\\alpha+\\gamma) & 0 \\\\\n0 & 0 & 1\n\\end{pmatrix}\n=R_{z}(\\alpha+\\gamma).\n$$\n因此，当 $\\beta=0$ 时，整体变换简化为绕 $z$ 轴旋转角度 $\\alpha+\\gamma$ 的单次旋转。这表明最终姿态仅取决于和 $\\alpha+\\gamma$，这对应于选项 B。这就是万向节锁的表现：第一次和第三次旋转发生在同一个物理轴上，因此不再独立；它们只是简单地相加。", "answer": "$$\\boxed{B}$$", "id": "1509872"}, {"introduction": "理论的最终目的是应用于实践。在控制航天器或机器人的真实场景中，我们常常从传感器获得最终的姿态矩阵，并需要反解出控制系统所使用的欧拉角。本练习将引导你完成一个常见于工程和物理领域的任务：将一个给定的数值旋转矩阵系统地分解为一组特定的欧拉角。[@problem_id:1509853]", "problem": "一艘自主侦察航天器正在深空进行机动。其机载惯性测量单元（IMU）报告了它相对于一个固定惯性参考系的方向。该方向由以下旋转矩阵 $R$ 给出，该矩阵将一个向量的坐标从惯性坐标系转换到航天器的本体坐标系：\n$$\nR = \\begin{pmatrix}\n0.49240 & 0.69895 & 0.52013 \\\\\n-0.64279 & 0.69429 & -0.32371 \\\\\n-0.58682 & -0.17395 & 0.79047\n\\end{pmatrix}\n$$\n航天器的飞行控制系统使用 XZY 顺序的泰特-布莱恩角（Tait-Bryan angle）表示法进行姿态控制。此约定将方向定义为从本体坐标系与惯性坐标系对齐开始的一系列连续三次内旋：\n1.  绕本体 x 轴旋转角度 $\\alpha$。\n2.  绕新的本体 z 轴（第一次旋转后的 z 轴）旋转角度 $\\gamma$。\n3.  绕最新的本体 y 轴（第二次旋转后的 y 轴）旋转角度 $\\beta$。\n\n为确保解的唯一性，角度被限制在以下范围：$-180^\\circ \\le \\alpha \\le 180^\\circ$、$-180^\\circ \\le \\beta \\le 180^\\circ$ 和 $-90^\\circ \\le \\gamma \\le 90^\\circ$。\n\n确定泰特-布莱恩角 $\\alpha$、$\\beta$ 和 $\\gamma$ 的值。请按 $\\alpha$、$\\beta$、$\\gamma$ 的顺序给出您的答案，以度为单位并四舍五入到三位有效数字。", "solution": "我们已知旋转矩阵 $R$，它将一个向量的坐标从惯性坐标系转换到航天器的本体坐标系。旋转顺序是内旋 X-Z-Y，角度分别为 $(\\alpha, \\gamma, \\beta)$。\n\n从本体坐标系到惯性坐标系的旋转矩阵 $R_{b \\to i}$ 是通过依次应用旋转得到的：\n$$\nR_{b \\to i} = R_x(\\alpha) R_z(\\gamma) R_y(\\beta)\n$$\n问题中给出的矩阵 $R$ 是从惯性坐标系到本体坐标系的变换，因此它是 $R_{b \\to i}$ 的逆（即转置）：\n$$\nR = (R_{b \\to i})^{-1} = (R_x(\\alpha) R_z(\\gamma) R_y(\\beta))^T = R_y(\\beta)^T R_z(\\gamma)^T R_x(\\alpha)^T = R_y(-\\beta) R_z(-\\gamma) R_x(-\\alpha)\n$$\n为了简化求解，我们定义一组中间角度 $\\alpha' = -\\alpha$, $\\beta' = -\\beta$, $\\gamma' = -\\gamma$。现在我们的任务是求解 $R = R_y(\\beta') R_z(\\gamma') R_x(\\alpha')$ 中的 $\\alpha', \\beta', \\gamma'$。\n\n展开这个矩阵乘积，并用 $c_{\\alpha'} = \\cos\\alpha'$, $s_{\\alpha'} = \\sin\\alpha'$ 等简写：\n$$\nR = \\begin{pmatrix}\nc_{\\beta'}c_{\\gamma'} & -c_{\\beta'}s_{\\gamma'}c_{\\alpha'} + s_{\\beta'}s_{\\alpha'} & c_{\\beta'}s_{\\gamma'}s_{\\alpha'} + s_{\\beta'}c_{\\alpha'} \\\\\ns_{\\gamma'} & c_{\\gamma'}c_{\\alpha'} & -c_{\\gamma'}s_{\\alpha'} \\\\\n-s_{\\beta'}c_{\\gamma'} & s_{\\beta'}s_{\\gamma'}c_{\\alpha'} + c_{\\beta'}s_{\\alpha'} & -s_{\\beta'}s_{\\gamma'}s_{\\alpha'} + c_{\\beta'}c_{\\alpha'}\n\\end{pmatrix}\n$$\n将上式与给定的数值矩阵 $R$ 进行比较：\n1.  **求解 $\\gamma'$**：从矩阵的 $(2,1)$ 元素入手：\n    $$\n    R_{21} = s_{\\gamma'} = -0.64279\n    $$\n    由于原始约束 $-90^\\circ \\le \\gamma \\le 90^\\circ$，我们有 $-90^\\circ \\le -\\gamma' \\le 90^\\circ$，这意味着 $\\gamma'$ 也在 $[-90^\\circ, 90^\\circ]$ 范围内。因此：\n    $$\n    \\gamma' = \\arcsin(-0.64279) \\approx -40.0^\\circ\n    $$\n    我们可以计算 $\\cos(\\gamma') \\approx \\cos(-40.0^\\circ) \\approx 0.76604$。\n\n2.  **求解 $\\beta'$**：利用第一列的元素 $R_{11}$ 和 $R_{31}$：\n    $$\n    R_{11} = c_{\\beta'}c_{\\gamma'} = 0.49240 \\implies c_{\\beta'} = \\frac{0.49240}{0.76604} \\approx 0.64279\n    $$\n    $$\n    R_{31} = -s_{\\beta'}c_{\\gamma'} = -0.58682 \\implies s_{\\beta'} = -\\frac{-0.58682}{0.76604} \\approx 0.76604\n    $$\n    通过反正切函数 `atan2(s_{\\beta'}, c_{\\beta'})` 可以得到 $\\beta'$。\n    $$\n    \\beta' = \\operatorname{atan2}(0.76604, 0.64279) \\approx 50.0^\\circ\n    $$\n\n3.  **求解 $\\alpha'$**：利用第二行的元素 $R_{22}$ 和 $R_{23}$：\n    $$\n    R_{22} = c_{\\gamma'}c_{\\alpha'} = 0.69429 \\implies c_{\\alpha'} = \\frac{0.69429}{0.76604} \\approx 0.90631\n    $$\n    $$\n    R_{23} = -c_{\\gamma'}s_{\\alpha'} = -0.32371 \\implies s_{\\alpha'} = -\\frac{-0.32371}{0.76604} \\approx 0.42262\n    $$\n    通过反正切函数 `atan2(s_{\\alpha'}, c_{\\alpha'})` 可以得到 $\\alpha'$。\n    $$\n    \\alpha' = \\operatorname{atan2}(0.42262, 0.90631) \\approx 25.0^\\circ\n    $$\n\n4.  **求解最终角度 $\\alpha, \\beta, \\gamma$**：\n    $$\n    \\alpha = -\\alpha' \\approx -25.0^\\circ\n    $$\n    $$\n    \\beta = -\\beta' \\approx -50.0^\\circ\n    $$\n    $$\n    \\gamma = -\\gamma' \\approx 40.0^\\circ\n    $$\n四舍五入到三位有效数字，得到 $\\alpha = -25.0$、$\\beta = -50.0$、$\\gamma = 40.0$。", "answer": "$$\\boxed{\\begin{pmatrix}-25.0 & -50.0 & 40.0\\end{pmatrix}}$$", "id": "1509853"}]}
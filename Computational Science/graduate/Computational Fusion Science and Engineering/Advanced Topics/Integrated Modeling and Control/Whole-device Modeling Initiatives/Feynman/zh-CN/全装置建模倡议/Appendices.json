{
    "hands_on_practices": [
        {
            "introduction": "聚变电站的最终目标是产生的能量要多于其消耗的能量。本练习将通过一个简化的“零维”模型，向您介绍全局功率平衡这一基本概念。通过将整个等离子体视为一个单一实体，您将应用能量守恒原理来计算净能量变化和关键的聚变增益指标 $Q$。这项练习 () 为评估托卡马克操作的可行性提供了一个顶层视角，是任何全装置模型的出发点。",
            "id": "4065674",
            "problem": "用于氘-氚 (D-T) 托卡马克等离子体的整机功率平衡模型将等离子体视为一个具有全局功率源和功率汇的单一容体。在这样的零维框架中，等离子体储能 $W(t)$ 根据能量守恒演变，其源项来自聚变产生的阿尔法粒子的自加热和外部注入的辅助加热，汇项（即损失项）来自辐射和输运损失。聚变增益 $Q$ 在操作上定义为总聚变功率与外部注入的辅助加热功率之比。对于 D-T 聚变，一个经过充分验证的事实是，每次反应释放 $E_{\\text{fusion}}=17.6 \\text{ MeV}$ 的能量，其中阿尔法粒子携带 $E_{\\alpha}=3.5 \\text{ MeV}$ 的能量沉积在等离子体中，给出的阿尔法份额为 $f_{\\alpha}=E_{\\alpha}/E_{\\text{fusion}}$。假设成分稳定，并且所有阿尔法功率都立即在等离子体中热化。\n\n考虑一个整机建模练习中的场景，其中包含以下建模的功率通道：阿尔法自加热功率 $P_{\\alpha}=82.5 \\text{ MW}$，外部注入的辅助加热功率 $P_{\\text{aux}}=47.3 \\text{ MW}$，谱线辐射加韧致辐射 $P_{\\text{rad}}=69.4 \\text{ MW}$，以及输运损失功率 $P_{\\text{loss}}=58.7 \\text{ MW}$。仅使用能量守恒和上述 D-T 能量分配，确定此场景下的聚变增益 $Q$ 和净储能增长率 $dW/dt$。将 $Q$ 表示为一个纯数，并将 $dW/dt$ 以兆焦耳/秒为单位表示。将两个量都四舍五入到四位有效数字。最后，解释等离子体的储能是在增加还是减少，以及该增益相对于典型的设计目标，是否与燃烧等离子体的运行可行性兼容。",
            "solution": "首先将对问题陈述进行验证，以确保其科学合理、适定且客观。\n\n### 步骤1：提取给定信息\n问题陈述中提供了以下信息：\n- **模型**：一个用于氘-氚 (D-T) 托卡马克等离子体的零维整机功率平衡模型。\n- **能量守恒**：等离子体储能 $W(t)$ 根据功率源和功率汇的平衡而演变。\n- **功率源**：阿尔法自加热功率 ($P_{\\alpha}$) 和辅助加热功率 ($P_{\\text{aux}}$)。\n- **功率汇**：辐射损失功率 ($P_{\\text{rad}}$) 和输运损失功率 ($P_{\\text{loss}}$)。\n- **聚变增益定义**：$Q = \\frac{\\text{总聚变功率}}{\\text{辅助加热功率}}$。\n- **D-T聚变能量学**：\n  - 每次反应总能量：$E_{\\text{fusion}} = 17.6 \\text{ MeV}$。\n  - 每个反应的阿尔法粒子能量：$E_{\\alpha} = 3.5 \\text{ MeV}$。\n- **阿尔法份额**：$f_{\\alpha} = \\frac{E_{\\alpha}}{E_{\\text{fusion}}}$。\n- **建模的功率值**：\n  - 阿尔法加热功率：$P_{\\alpha} = 82.5 \\text{ MW}$。\n  - 辅助加热功率：$P_{\\text{aux}} = 47.3 \\text{ MW}$。\n  - 辐射损失功率：$P_{\\text{rad}} = 69.4 \\text{ MW}$。\n  - 输运损失功率：$P_{\\text{loss}} = 58.7 \\text{ MW}$。\n- **要求**：\n  - 确定聚变增益 $Q$。\n  - 确定净储能增长率 $\\frac{dW}{dt}$。\n  - 将 $Q$ 表示为四舍五入到四位有效数字的纯数。\n  - 将 $\\frac{dW}{dt}$ 以兆焦耳/秒为单位表示，并四舍五入到四位有效数字。\n  - 解释有关能量储存和运行可行性的结果。\n\n### 步骤2：使用提取的给定信息进行验证\n根据既定的验证标准对问题进行评估。\n- **科学依据**：该问题基于应用于聚变等离子体的能量守恒基本原理，这是等离子体物理学中的一种标准方法。聚变增益 ($Q$) 和功率平衡通道 ($P_{\\alpha}, P_{\\text{aux}}, P_{\\text{rad}}, P_{\\text{loss}}$) 的定义是正确且被广泛使用的。D-T聚变反应的能量值（$E_{\\text{fusion}} = 17.6 \\text{ MeV}$ 和 $E_{\\alpha} = 3.5 \\text{ MeV}$）是此过程的标准公认值。该问题在科学上是合理的。\n- **适定性**：问题的结构保证了 $Q$ 和 $\\frac{dW}{dt}$ 存在唯一解。计算这些量所需的所有数据和定义都已提供。任务规定明确。\n- **客观性**：问题陈述使用精确、定量和无偏见的语言。解释的要求是基于将计算结果与聚变研究中的既定基准（“典型设计目标”）进行比较，这是一种标准的分析形式，而非主观探究。\n- **完整性和一致性**：问题是自洽的，没有矛盾。功率值以一致的单位（兆瓦，MW）提供，这等同于兆焦耳/秒（MJ/s），确保了量纲一致性。\n- **真实性**：这些功率值对于大型、高性能的托卡马克实验是现实的，例如在与ITER计划相似的运行区间内运行的实验。\n- **其他缺陷**：问题不是隐喻性的、琐碎的、不适定的或不可验证的。\n\n### 步骤3：结论与行动\n该问题被判定为**有效**。将提供一个完整的、有理有据的解答。\n\n### 解答\n\n解答分为两部分：首先，计算净储能增长率 $\\frac{dW}{dt}$；其次，计算聚变增益 $Q$。最后，对这些结果进行解释。\n\n**1. 净储能增长率 ($\\frac{dW}{dt}$)**\n\n等离子体总储能的变化率 $\\frac{dW}{dt}$ 受能量守恒原理支配。它等于所有功率源之和减去所有功率汇之和。\n\n功率源是阿尔法自加热功率 $P_{\\alpha}$ 和外部注入的辅助加热功率 $P_{\\text{aux}}$。\n$$P_{\\text{source}} = P_{\\alpha} + P_{\\text{aux}}$$\n\n功率汇（损失）是通过辐射损失的功率 $P_{\\text{rad}}$ 和通过输运过程损失的功率 $P_{\\text{loss}}$。\n$$P_{\\text{sink}} = P_{\\text{rad}} + P_{\\text{loss}}$$\n\n因此，净功率平衡方程为：\n$$\\frac{dW}{dt} = P_{\\text{source}} - P_{\\text{sink}} = (P_{\\alpha} + P_{\\text{aux}}) - (P_{\\text{rad}} + P_{\\text{loss}})$$\n\n代入给定值：\n$$P_{\\alpha} = 82.5 \\text{ MW}$$\n$$P_{\\text{aux}} = 47.3 \\text{ MW}$$\n$$P_{\\text{rad}} = 69.4 \\text{ MW}$$\n$$P_{\\text{loss}} = 58.7 \\text{ MW}$$\n\n我们计算总功率输入和总功率损失：\n$$P_{\\text{source}} = 82.5 \\text{ MW} + 47.3 \\text{ MW} = 129.8 \\text{ MW}$$\n$$P_{\\text{sink}} = 69.4 \\text{ MW} + 58.7 \\text{ MW} = 128.1 \\text{ MW}$$\n\n净储能变化率为：\n$$\\frac{dW}{dt} = 129.8 \\text{ MW} - 128.1 \\text{ MW} = 1.7 \\text{ MW}$$\n\n因为 $1 \\text{ 瓦特}$ 等于 $1 \\text{ 焦耳/秒}$，所以 $1 \\text{ MW}$ 等于 $1 \\text{ MJ/s}$。问题要求将结果四舍五入到四位有效数字。\n$$\\frac{dW}{dt} = 1.700 \\text{ MJ/s}$$\n\n**2. 聚变增益 ($Q$)**\n\n聚变增益 $Q$ 定义为总聚变功率 $P_{\\text{fusion}}$ 与辅助加热功率 $P_{\\text{aux}}$ 之比：\n$$Q = \\frac{P_{\\text{fusion}}}{P_{\\text{aux}}}$$\n\n给定的辅助加热功率为 $P_{\\text{aux}} = 47.3 \\text{ MW}$。必须确定总聚变功率 $P_{\\text{fusion}}$。问题提供了阿尔法加热功率 $P_{\\alpha}$，这是由阿尔法粒子携带的那部分总聚变功率。这个份额 $f_{\\alpha}$ 是阿尔法粒子能量 $E_{\\alpha}$ 与每次反应的总聚变能量 $E_{\\text{fusion}}$ 之比。\n\n$$f_{\\alpha} = \\frac{E_{\\alpha}}{E_{\\text{fusion}}}$$\n给定 $E_{\\alpha} = 3.5 \\text{ MeV}$ 和 $E_{\\text{fusion}} = 17.6 \\text{ MeV}$：\n$$f_{\\alpha} = \\frac{3.5}{17.6}$$\n\n阿尔法加热功率与总聚变功率通过同样的份额关联：\n$$P_{\\alpha} = f_{\\alpha} P_{\\text{fusion}}$$\n\n因此，我们可以通过重新排列这个方程来求得 $P_{\\text{fusion}}$：\n$$P_{\\text{fusion}} = \\frac{P_{\\alpha}}{f_{\\alpha}} = P_{\\alpha} \\left( \\frac{E_{\\text{fusion}}}{E_{\\alpha}} \\right)$$\n\n代入给定的 $P_{\\alpha}$、$E_{\\text{fusion}}$ 和 $E_{\\alpha}$ 的值：\n$$P_{\\text{fusion}} = (82.5 \\text{ MW}) \\left( \\frac{17.6}{3.5} \\right) \\approx 414.8571 \\text{ MW}$$\n\n现在我们可以用其定义来计算 $Q$：\n$$Q = \\frac{P_{\\text{fusion}}}{P_{\\text{aux}}} = \\frac{(82.5) \\left( \\frac{17.6}{3.5} \\right)}{47.3}$$\n$$Q \\approx \\frac{414.8571}{47.3} \\approx 8.770764$$\n\n按要求将结果四舍五入到四位有效数字：\n$$Q \\approx 8.771$$\n\n**3. 解释**\n\n- **储能**：计算出的净储能增长率为 $\\frac{dW}{dt} = +1.700 \\text{ MJ/s}$。由于该值为正，等离子体的总能量含量正在增加。这表明等离子体不处于稳态，而是在升温，尽管速度缓慢，因为总功率输入 ($129.8 \\text{ MW}$) 略微超过总功率损失 ($128.1 \\text{ MW}$)。\n\n- **聚变增益**：计算出的聚变增益为 $Q \\approx 8.771$。这个值非常重要。$Q=1$ 的值代表“科学盈亏平衡”，即产生的聚变功率等于外部提供的加热功率。$Q=5$ 通常被认为是“燃烧等离子体”的阈值，此时阿尔法加热成为等离子体功率平衡中的主导项（这里，$P_{\\alpha}=82.5 \\text{ MW}$ 远大于 $P_{\\text{aux}}=47.3 \\text{ MW}$，证实了这属于燃烧等离子体区间）。$Q \\ge 10$ 通常被认为是商业上可行的聚变发电厂的最低要求。计算出的约 $8.8$ 的增益将此建模场景稳固地置于燃烧等离子体领域，并正在接近反应堆示范电厂的目标。它代表了一种高性能的运行场景。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n8.771 & 1.700\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "真实的托卡马克等离子体极其复杂，从炽热致密的核心到较冷且充满湍流的边界，其状况差异巨大。一个成功的全装置模型并非单一的“一刀切”方程，而是一套为每个区域精心选择的、层次化的模型组合。在这项练习 () 中，您将扮演建模者的角色，通过计算关键的无量纲参数，来论证为何选择一套特定的物理模型是合适的。这展示了现代聚变模拟的模块化和多尺度特性。",
            "id": "4065615",
            "problem": "一个全装置托卡马克模型必须根据尺度分离和无量纲参数来选择区域适用的物理模型。考虑一个常规托卡马克中的氘等离子体，其大半径 $R = 2\\,\\mathrm{m}$，小半径 $a = 0.5\\,\\mathrm{m}$，环向磁场 $B = 5\\,\\mathrm{T}$，安全因子 $q = 3$。该等离子体有三个特征区域：\n\n芯部：$n_e \\approx 8\\times 10^{19}\\,\\mathrm{m}^{-3}$，$T_e \\approx 10\\,\\mathrm{keV}$，$T_i \\approx 8\\,\\mathrm{keV}$，具有微观湍流的垂直尺度 $k_\\perp$ 满足 $k_\\perp \\rho_i \\sim \\mathcal{O}(1)$。\n\n台基（正好在分界面内侧）：$n_e \\approx 1.0\\times 10^{20}\\,\\mathrm{m}^{-3}$，$T_e \\approx 2\\,\\mathrm{keV}$，$T_i \\approx 2\\,\\mathrm{keV}$，压力梯度尺度 $L_p \\sim 2\\,\\mathrm{cm}$，主导的宏观不稳定模式满足 $k_\\perp a \\sim \\mathcal{O}(1)$。\n\n刮削层（SOL）：$n_e \\approx 5\\times 10^{19}\\,\\mathrm{m}^{-3}$，$T_e \\approx 100\\,\\mathrm{eV}$，$T_i \\approx 100\\,\\mathrm{eV}$，平行连接长度 $L_\\parallel \\sim \\pi q R$。\n\n使用以下基本定义和经过充分检验的事实来估计无量纲参数和量级，以便为模型选择提供信息：\n\n- 离子热速度 $v_{\\mathrm{th},i} = \\sqrt{2 k_B T_i/m_i}$ 和离子回旋频率 $\\Omega_i = Z e B/m_i$ 给出离子拉莫尔半径 $\\rho_i = v_{\\mathrm{th},i}/\\Omega_i$，其中 $Z = 1$，$m_i$ 为氘离子质量。\n- 归一化拉莫尔半径 $\\rho_* = \\rho_i/a$ 在 $\\rho_* \\ll 1$ 时体现了回旋动理学的尺度分离。\n- 等离子体比压 $\\beta = p/(B^2/(2\\mu_0))$，其中 $p \\approx n_e k_B T_e + n_i k_B T_i$，$\\mu_0$ 是真空磁导率，当 $\\beta$ 达到百分之几或更高时，表明电磁涨落是相关的。\n- 电子热速度 $v_{\\mathrm{th},e} = \\sqrt{2 k_B T_e/m_e}$、电子-离子碰撞频率 $\\nu_{ei}$（使用标准的 Spitzer 标度关系 $\\nu_{ei} \\approx 2.91\\times 10^{-6}\\, n_e[\\mathrm{cm}^{-3}]\\, \\ln\\Lambda / T_e[\\mathrm{eV}]^{3/2}$，库仑对数 $\\ln\\Lambda \\sim 17$）以及平均自由程 $\\lambda_{\\mathrm{mfp},e} = v_{\\mathrm{th},e}/\\nu_{ei}$，通过与 $L_\\parallel$ 比较来确定碰撞性。归一化碰撞率 $\\nu_* \\sim q R \\nu_{ei}/(\\epsilon^{3/2} v_{\\mathrm{th},e})$（其中反环径比 $\\epsilon = a/R$）在香蕉区很小，在碰撞区很大。\n- 对于宏观边界模式，当 $\\omega \\ll \\Omega_i$ 和 $k_\\perp \\rho_i \\ll 1$ 时，漂移简化的双流体磁流体力学（MHD）是适用的；对于微观湍流，当 $\\rho_* \\ll 1$ 且 $\\beta$ 不是渐近小时，应使用电磁回旋动理学；在碰撞性的刮削层（SOL）条件下，并考虑材料壁上的鞘层边界条件时，Braginskii 闭合是合适的。当 $\\delta f/f_0 \\ll 1$ 时，微扰分布函数方法（$\\delta f$）是合适的。\n\n基于以上信息的量级估计，为一个全装置建模项目选择最适合芯部、台基和刮削层的模型层级结构：\n\nA. 芯部：忽略碰撞的静电局域回旋动理学（$\\delta f$）；台基：单流体理想磁流体力学；刮削层：无鞘层边界条件的绝热流体力学。\n\nB. 芯部：考虑动理学电子和碰撞的节距角散射的电磁回旋动理学（$\\delta f$）；台基：具有漂移简化 Braginskii 闭合和电磁效应的双流体扩展磁流体力学；刮削层：具有鞘层边界条件和中性粒子再循环源的 Braginskii 双流体模型。\n\nC. 芯部：简化磁流体力学；台基：仅用于陡峭梯度微观湍流的电磁局域回旋动理学；刮削层：具有镜面反射壁边界条件的无碰撞 Vlasov 动理学描述。\n\nD. 芯部：在全环面上无回旋平均的全轨道网格粒子模拟；台基：单流体电阻磁流体力学；刮削层：具有扩散壁边界但无鞘层物理的 Braginskii 双流体模型。",
            "solution": "用户要求对所提供的问题陈述进行严格验证，然后详细推导解决方案并评估各个选项。\n\n### 问题验证\n\n**步骤 1：提取给定信息**\n\n问题提供了以下数据、定义和背景：\n\n**托卡马克参数：**\n-   大半径：$R = 2\\,\\mathrm{m}$\n-   小半径：$a = 0.5\\,\\mathrm{m}$\n-   环向磁场：$B = 5\\,\\mathrm{T}$\n-   安全因子：$q = 3$\n-   等离子体成分：氘（$Z=1$，质量 $m_i$）\n\n**区域 1：芯部**\n-   电子密度：$n_e \\approx 8\\times 10^{19}\\,\\mathrm{m}^{-3}$\n-   电子温度：$T_e \\approx 10\\,\\mathrm{keV}$\n-   离子温度：$T_i \\approx 8\\,\\mathrm{keV}$\n-   特征湍流尺度：$k_\\perp \\rho_i \\sim \\mathcal{O}(1)$\n\n**区域 2：台基**\n-   电子密度：$n_e \\approx 1.0\\times 10^{20}\\,\\mathrm{m}^{-3}$\n-   电子温度：$T_e \\approx 2\\,\\mathrm{keV}$\n-   离子温度：$T_i \\approx 2\\,\\mathrm{keV}$\n-   压力梯度尺度长度：$L_p \\sim 2\\,\\mathrm{cm}$\n-   特征模式尺度：$k_\\perp a \\sim \\mathcal{O}(1)$\n\n**区域 3：刮削层（SOL）**\n-   电子密度：$n_e \\approx 5\\times 10^{19}\\,\\mathrm{m}^{-3}$\n-   电子温度：$T_e \\approx 100\\,\\mathrm{eV}$\n-   离子温度：$T_i \\approx 100\\,\\mathrm{eV}$\n-   平行连接长度：$L_\\parallel \\sim \\pi q R$\n\n**定义和事实：**\n-   离子热速度：$v_{\\mathrm{th},i} = \\sqrt{2 k_B T_i/m_i}$\n-   离子回旋频率：$\\Omega_i = Z e B/m_i$\n-   离子拉莫尔半径：$\\rho_i = v_{\\mathrm{th},i}/\\Omega_i$\n-   归一化拉莫尔半径：$\\rho_* = \\rho_i/a$\n-   等离子体比压：$\\beta = p/(B^2/(2\\mu_0))$，其中 $p \\approx n_e k_B T_e + n_i k_B T_i$\n-   电子热速度：$v_{\\mathrm{th},e} = \\sqrt{2 k_B T_e/m_e}$\n-   电子-离子碰撞频率：$\\nu_{ei} \\approx 2.91\\times 10^{-6}\\, n_e[\\mathrm{cm}^{-3}]\\, \\ln\\Lambda / T_e[\\mathrm{eV}]^{3/2}$，其中 $\\ln\\Lambda \\sim 17$\n-   电子平均自由程：$\\lambda_{\\mathrm{mfp},e} = v_{\\mathrm{th},e}/\\nu_{ei}$\n-   归一化碰撞率：$\\nu_* \\sim q R \\nu_{ei}/(\\epsilon^{3/2} v_{\\mathrm{th},e})$，其中 $\\epsilon = a/R$\n-   模型适用条件：漂移简化的双流体 MHD、电磁回旋动理学、Braginskii 闭合以及 $\\delta f$ 方法。\n\n**步骤 2：使用提取的信息进行验证**\n\n根据有效性标准对问题陈述进行评估。\n\n-   **科学依据：** 该问题牢固地植根于等离子体物理和计算聚变科学的既定原理。托卡马克和不同等离子体区域（芯部、台基、刮削层）的参数代表了常规高约束模式（H-mode）氘放电。无量纲参数（$\\rho_*$, $\\beta$, $\\nu_*$）的定义和模型描述（回旋动理学、MHD、Braginskii）都是该领域的标准。\n-   **适定性：** 任务是通过计算关键的无量纲参数来确定托卡马克不同区域最合适的物理模型。为进行这些量级估计，所有必要的数据、公式和物理常数（通过标准物理学隐式提供）都已给出。该问题的结构决定了其可以基于定量分析得到确切答案。\n-   **客观性：** 问题采用精确、定量和客观的语言表述。没有主观陈述、歧义或依赖于个人观点。\n-   **未检测到其他缺陷：** 问题是自洽的，其前提在事实上是合理的，并且设置没有矛盾、不完整或不切实际之处。\n\n**步骤 3：结论和行动**\n\n问题陈述是**有效的**。将推导完整的解决方案。\n\n### 解决方案推导\n\n解决方案要求计算三个指定区域中关键的无量纲参数，以确定合适的物理模型。我们将使用以下常数：\n-   氘离子质量：$m_i \\approx 3.344 \\times 10^{-27}\\,\\mathrm{kg}$\n-   电子质量：$m_e \\approx 9.109 \\times 10^{-31}\\,\\mathrm{kg}$\n-   基本电荷：$e \\approx 1.602 \\times 10^{-19}\\,\\mathrm{C}$\n-   在温度以 eV 表示的表达式中，$k_B T_j = T_j[\\mathrm{eV}] \\cdot e$\n-   真空磁导率：$\\mu_0 = 4\\pi \\times 10^{-7}\\,\\mathrm{T\\cdot m/A}$\n\n通用参数：$B=5\\,\\mathrm{T}$，$a=0.5\\,\\mathrm{m}$，$R=2\\,\\mathrm{m}$，$q=3$，$\\epsilon = a/R = 0.25$。\n磁压分母为 $B^2/(2\\mu_0) = 5^2 / (2 \\times 4\\pi \\times 10^{-7}) \\approx 9.95 \\times 10^6\\,\\mathrm{Pa}$。\n离子回旋频率为 $\\Omega_i = Z e B / m_i = (1 \\times 1.602 \\times 10^{-19} \\times 5) / (3.344 \\times 10^{-27}) \\approx 2.39 \\times 10^8\\,\\mathrm{rad/s}$。\n\n**区域 1：芯部分析**\n-   参数：$n_e=n_i=8\\times 10^{19}\\,\\mathrm{m}^{-3}$，$T_e=10\\,\\mathrm{keV}$，$T_i=8\\,\\mathrm{keV}$。\n-   **离子拉莫尔半径 ($\\rho_i$) 和 $\\rho_*$**：\n    $v_{\\mathrm{th},i} = \\sqrt{2 k_B T_i/m_i} = \\sqrt{2 \\times (8000 \\cdot e) / m_i} \\approx 8.75 \\times 10^5\\,\\mathrm{m/s}$。\n    $\\rho_i = v_{\\mathrm{th},i}/\\Omega_i \\approx (8.75 \\times 10^5) / (2.39 \\times 10^8) \\approx 3.66 \\times 10^{-3}\\,\\mathrm{m}$。\n    $\\rho_* = \\rho_i/a = (3.66 \\times 10^{-3}) / 0.5 \\approx 7.3 \\times 10^{-3}$。\n    由于 $\\rho_* \\ll 1$ 且问题指出芯部湍流具有 $k_\\perp \\rho_i \\sim 1$，因此回旋动理学模型是合适的。\n-   **等离子体比压 ($\\beta$)**：\n    $p \\approx n_e k_B (T_e + T_i) = (8 \\times 10^{19}) \\cdot (10000 + 8000) \\cdot e \\approx 2.31 \\times 10^5\\,\\mathrm{Pa}$。\n    $\\beta = p / (B^2/(2\\mu_0)) \\approx (2.31 \\times 10^5) / (9.95 \\times 10^6) \\approx 0.023 = 2.3\\%$。\n    百分之几的比压值意味着波动的磁场是重要的。因此，需要一个**电磁**模型，而非静电模型。\n-   **碰撞性 ($\\nu_*$)**：\n    $n_e = 8 \\times 10^{13}\\,\\mathrm{cm}^{-3}$。$T_e = 10000\\,\\mathrm{eV}$。\n    $\\nu_{ei} \\approx \\frac{2.91\\times 10^{-6} \\cdot (8 \\times 10^{13}) \\cdot 17}{(10000)^{3/2}} \\approx \\frac{3.96 \\times 10^9}{10^6} \\approx 3960\\,\\mathrm{s}^{-1}$。\n    $v_{\\mathrm{th},e} = \\sqrt{2k_B T_e/m_e} = \\sqrt{2 \\cdot (10000 \\cdot e) / m_e} \\approx 5.93 \\times 10^7\\,\\mathrm{m/s}$。\n    $\\nu_* \\sim \\frac{q R \\nu_{ei}}{\\epsilon^{3/2} v_{\\mathrm{th},e}} = \\frac{3 \\cdot 2 \\cdot 3960}{0.25^{1.5} \\cdot (5.93 \\times 10^7)} = \\frac{23760}{0.125 \\cdot (5.93 \\times 10^7)} \\approx 3.2 \\times 10^{-3}$。\n    由于 $\\nu_* \\ll 1$，芯部处于无碰撞的“香蕉”区。完整的碰撞模型是不必要的，但通常会保留一个节距角散射算子来考虑弱碰撞效应。湍流振幅很小，因此微扰的 $\\delta f$ 方法是合适的。\n-   **芯部模型**：具有弱碰撞算子的电磁 $\\delta f$ 回旋动理学。\n\n**区域 2：台基分析**\n-   参数：$n_e=n_i=1.0\\times 10^{20}\\,\\mathrm{m}^{-3}$，$T_e=T_i=2\\,\\mathrm{keV}$，$L_p=2\\,\\mathrm{cm}=0.02\\,\\mathrm{m}$。\n-   **特征尺度**：主导模式是宏观的，$k_\\perp a \\sim 1$，因此 $k_\\perp \\sim 1/a = 2\\,\\mathrm{m}^{-1}$。\n    $v_{\\mathrm{th},i} = \\sqrt{2 k_B T_i/m_i} = \\sqrt{2 \\cdot (2000 \\cdot e) / m_i} \\approx 4.37 \\times 10^5\\,\\mathrm{m/s}$。\n    $\\rho_i = v_{\\mathrm{th},i}/\\Omega_i \\approx (4.37 \\times 10^5) / (2.39 \\times 10^8) \\approx 1.83 \\times 10^{-3}\\,\\mathrm{m}$。\n    对于这些模式，$k_\\perp \\rho_i \\approx 2 \\cdot (1.83 \\times 10^{-3}) \\approx 3.7 \\times 10^{-3} \\ll 1$。这证实了对于这些宏观模式，类似流体（例如 MHD）的描述是一个有效的起点。\n-   **等离子体比压 ($\\beta$)**：\n    $p \\approx n_e k_B (T_e + T_i) = (1.0 \\times 10^{20}) \\cdot (2000 + 2000) \\cdot e \\approx 6.41 \\times 10^4\\,\\mathrm{Pa}$。\n    $\\beta = p / (B^2/(2\\mu_0)) \\approx (6.41 \\times 10^4) / (9.95 \\times 10^6) \\approx 0.0064 = 0.64\\%$。\n    虽然比芯部小，但这个比压值仍然很显著，而且已知电磁效应对台基稳定性（剥离-气球化模式）至关重要。\n-   **双流体效应**：离子拉莫尔半径与压力梯度尺度长度之比为 $\\rho_i/L_p \\approx (1.83 \\times 10^{-3}) / 0.02 \\approx 0.09$。这个比值很小但不可忽略，表明双流体和有限拉莫尔半径（FLR）效应（如抗磁漂移）是重要的。单流体 MHD 模型是不充分的。\n-   **碰撞性 ($\\nu_*$)**：\n    $n_e = 1.0 \\times 10^{14}\\,\\mathrm{cm}^{-3}$。$T_e = 2000\\,\\mathrm{eV}$。\n    $\\nu_{ei} \\approx \\frac{2.91\\times 10^{-6} \\cdot (10^{14}) \\cdot 17}{(2000)^{3/2}} \\approx \\frac{4.95 \\times 10^9}{89443} \\approx 5.5 \\times 10^4\\,\\mathrm{s}^{-1}$。\n    $v_{\\mathrm{th},e} = \\sqrt{2 k_B T_e/m_e} = \\sqrt{2 \\cdot (2000 \\cdot e) / m_e} \\approx 2.65 \\times 10^7\\,\\mathrm{m/s}$。\n    $\\nu_* \\sim \\frac{q R \\nu_{ei}}{\\epsilon^{3/2} v_{\\mathrm{th},e}} = \\frac{3 \\cdot 2 \\cdot (5.5 \\times 10^4)}{0.125 \\cdot (2.65 \\times 10^7)} \\approx \\frac{3.3 \\times 10^5}{3.31 \\times 10^6} \\approx 0.1$。\n    碰撞性处于中等水平，介于香蕉区和平台区之间。\n-   **台基模型**：一个**扩展 MHD** 模型是最佳描述，它包含**双流体**效应（霍尔项、电子压力）和**电磁**物理。这类模型能够捕捉剥离-气球化模式的基本物理。\n\n**区域 3：刮削层（SOL）分析**\n-   参数：$n_e=n_i=5\\times 10^{19}\\,\\mathrm{m}^{-3}$，$T_e=T_i=100\\,\\mathrm{eV}$。\n-   **碰撞性 ($\\lambda_{\\mathrm{mfp},e}$ vs $L_\\parallel$)**：\n    $L_\\parallel \\sim \\pi q R = \\pi \\cdot 3 \\cdot 2 \\approx 18.8\\,\\mathrm{m}$。\n    $n_e = 5 \\times 10^{13}\\,\\mathrm{cm}^{-3}$。$T_e = 100\\,\\mathrm{eV}$。\n    $\\nu_{ei} \\approx \\frac{2.91\\times 10^{-6} \\cdot (5 \\times 10^{13}) \\cdot 17}{(100)^{3/2}} = \\frac{2.47 \\times 10^9}{1000} \\approx 2.47 \\times 10^6\\,\\mathrm{s}^{-1}$。\n    $v_{\\mathrm{th},e} = \\sqrt{2 k_B T_e/m_e} = \\sqrt{2 \\cdot (100 \\cdot e) / m_e} \\approx 5.93 \\times 10^6\\,\\mathrm{m/s}$。\n    $\\lambda_{\\mathrm{mfp},e} = v_{\\mathrm{th},e}/\\nu_{ei} \\approx (5.93 \\times 10^6) / (2.47 \\times 10^6) \\approx 2.4\\,\\mathrm{m}$。\n    由于 $\\lambda_{\\mathrm{mfp},e} \\ll L_\\parallel$，刮削层等离子体是高度**碰撞性**的。\n-   **刮削层模型**：碰撞流体描述是合适的。**Braginskii 方程**为强磁化、碰撞性等离子体中的输运系数提供了标准的、严格推导的闭合。由于离子和电子可以有不同的动力学行为，**双流体**模型是必要的。最关键的是，刮削层由终止于材料表面（偏滤器/限制器）的开放磁力线组成。等离子体-材料相互作用的物理受边界处形成的静电**鞘层**控制。任何实际的刮削层模型都必须包括**鞘层边界条件**。此外，撞击壁的等离子体被中性化并作为中性气体重新进入等离子体（**中性粒子再循环**），这是一个关键的粒子和能量源/汇。\n-   **刮削层模型总结**：一个**具有鞘层边界条件和中性粒子再循环源的 Braginskii 双流体模型**是合适的选择。\n\n### 逐项分析\n\n**A. 芯部：忽略碰撞的静电局域回旋动理学（$\\delta f$）；台基：单流体理想磁流体力学；刮削层：无鞘层边界条件的绝热流体力学。**\n-   芯部：不正确。由于 $\\beta \\approx 2.3\\%$，模型必须是电磁的。\n-   台基：不正确。单流体理想 MHD 忽略了台基稳定性所必需的双流体和电磁效应。\n-   刮削层：不正确。忽略鞘层边界条件就忽略了刮削层的决定性物理过程。\n-   结论：**不正确**。\n\n**B. 芯部：考虑动理学电子和碰撞的节距角散射的电磁回旋动理学（$\\delta f$）；台基：具有漂移简化 Braginskii 闭合和电磁效应的双流体扩展磁流体力学；刮削层：具有鞘层边界条件和中性粒子再循环源的 Braginskii 双流体模型。**\n-   芯部：正确。这准确地描述了用于芯部微观湍流的最先进模型，与我们的发现相符：需要电磁效应（$\\beta \\sim 2.3\\%$），回旋动理学适用（$\\rho_* \\ll 1$），并且弱碰撞算子是合适的（$\\nu_* \\ll 1$）。\n-   台基：正确。这个复杂但准确的描述捕捉了必要的物理：双流体效应、漂移和电磁现象，这些都是用于台基分析的扩展 MHD 模型的特征。\n-   刮削层：正确。这个描述是完美的，指出了等离子体的碰撞双流体性质以及基本的边界物理（鞘层）和原子物理（再循环）。\n-   结论：**正确**。\n\n**C. 芯部：简化磁流体力学；台基：仅用于陡峭梯度微观湍流的电磁局域回旋动理学；刮削层：具有镜面反射壁边界条件的无碰撞 Vlasov 动理学描述。**\n-   芯部：不正确。简化 MHD 是一个流体模型，无法捕捉 $k_\\perp \\rho_i \\sim 1$ 时芯部微观湍流的动理学物理。\n-   台基：不正确。这将主要的不稳定性错误地识别为微观湍流，而决定台基结构的主导模式是宏观的剥离-气球化模式（$k_\\perp a \\sim 1$）。\n-   刮削层：不正确。刮削层是高度碰撞性的，而非无碰撞。镜面反射对于等离子体-壁相互作用是一个物理上不正确的边界条件。\n-   结论：**不正确**。\n\n**D. 芯部：在全环面上无回旋平均的全轨道网格粒子模拟；台基：单流体电阻磁流体力学；刮削层：具有扩散壁边界但无鞘层物理的 Braginskii 双流体模型。**\n-   芯部：不正确。虽然物理上很全面，但全轨道 PIC 模型对于此问题尺度在计算上是不可行的，对于全装置项目来说不是一个“合适”的选择，因为它未能利用 $\\rho_* \\ll 1$ 的尺度分离，而这种分离使得回旋动理学高效且适用。\n-   台基：不正确。单流体电阻 MHD 是一个不完整的模型，缺乏关键的双流体/抗磁效应。\n-   刮削层：不正确。缺少鞘层物理是一个致命缺陷。“扩散壁边界”不是一个合适的替代品。\n-   结论：**不正确**。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "构建一个精巧的全装置模型只是成功的一半；在高性能计算（HPC）集群上高效地运行它则是另一半。这些模拟对计算资源要求极高，其性能关键取决于并行化的方式。本练习 () 深入探讨了全装置模拟在计算工程方面的问题，要求您应用像 Amdahl 定律这样的性能模型来分析一个耦合工作流的可扩展性。您将学习如何诊断性能、识别瓶颈，并理解大规模模拟中计算与通信之间的权衡。",
            "id": "4065677",
            "problem": "在计算聚变科学与工程中，一个代表性的全设备建模（WDM）工作流由多个耦合的物理组件组成，其在高性能计算（HPC）架构上的执行时间取决于并行化程度和通信开销。任务是计算几种场景下的强扩展加速比、强扩展并行效率、弱扩展效率，并识别瓶颈。该工作流包含三个组件：芯部输运、边界等离子体和中性气体。目标是实现一个程序，该程序对每个测试用例，使用基于第一性原理和标准性能建模的原则性模型计算所需的度量指标，并将结果输出为单条聚合行。\n\n基本原理：\n- 用于强扩展的Amdahl定律：如果工作负载中比例为 $f$ 的部分是完全可并行的，那么在 $P$ 个进程上的强扩展运行时间为 $$T(P) = T(1)\\big[(1-f) + \\frac{f}{P}\\big],$$ 其中 $T(1)$ 是单进程运行时间。\n- 使用延迟-带宽模型的通信成本：通过基于树的集体操作在 $P$ 个进程间通信一个大小为 $m$ 字节的消息所需的时间，其扩展关系如下 $$t_{\\mathrm{comm}}(P, m) = L \\log_2(P) + \\frac{m}{B}\\cdot\\frac{P-1}{P},$$ 其中 $L$ 是每条消息的延迟（单位：秒），$B$ 是每条链路的带宽（单位：字节/秒）。\n- 弱扩展假设随着 $P$ 的增加，每个进程的工作量保持不变；因此，并行部分保持恒定，而通信和全局协调开销可能随 $P$ 的增长而增加。\n\n要计算的目标量：\n- 强扩展加速比：$$S(P) = \\frac{T_{\\mathrm{strong}}(1)}{T_{\\mathrm{strong}}(P)}.$$\n- 强扩展并行效率：$$E_s(P) = \\frac{S(P)}{P}.$$\n- 弱扩展效率：$$E_w(P) = \\frac{T_{\\mathrm{weak}}(1)}{T_{\\mathrm{weak}}(P)}.$$\n- 瓶颈识别：对于每个测试用例，在 $P$ 个进程下，当将其计算和通信部分相加时，识别贡献最大运行时间的组件索引。如果全局耦合开销超过所有组件，则返回 $-1$。同时确定该场景是否为通信主导，其定义为总通信时间（包括耦合开销）是否超过总计算时间。\n\n耦合工作流的模型假设和定义：\n- 该工作流有 $N_c = 3$ 个组件，索引为 $i \\in \\{0, 1, 2\\}$，分别对应芯部输运（$i=0$）、边界等离子体（$i=1$）和中性气体（$i=2$）。\n- 每个组件 $i$ 对于基础问题都有一个基准单进程运行时间 $T_{1,i}$（单位：秒）。\n- 每个组件 $i$ 有一个可并行化比例 $f_i \\in [0,1]$ 和一个串行比例 $(1-f_i)$。\n- 组件 $i$ 在 $P$ 个进程上的强扩展计算时间建模为 $$T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P) = T_{1,i}\\big[(1-f_i) + \\frac{f_i}{P}\\big].$$\n- 组件 $i$ 的通信包括在整个运行过程中 $n_i$ 次大小为 $m_i$ 字节的集体消息，其成本为 $$T_{\\mathrm{comm},i}(P) = n_i\\left(L \\log_2(P) + \\frac{m_i}{B}\\cdot\\frac{P-1}{P}\\right).$$\n- 组件之间的全局耦合在 $N_{\\mathrm{iter}}$ 次外层迭代中每次发生 $k$ 次，耦合消息大小为 $M_{\\mathrm{cpl}}$ 字节，其成本为 $$T_{\\mathrm{cpl}}(P) = N_{\\mathrm{iter}}\\cdot k\\left(L \\log_2(P) + \\frac{M_{\\mathrm{cpl}}}{B}\\cdot\\frac{P-1}{P}\\right).$$\n- 总强扩展运行时间为 $$T_{\\mathrm{strong}}(P) = \\sum_{i=0}^{2}\\left(T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P) + T_{\\mathrm{comm},i}(P)\\right) + T_{\\mathrm{cpl}}(P).$$\n- 总弱扩展运行时间为 $$T_{\\mathrm{weak}}(P) = \\sum_{i=0}^{2} T_{1,i} + \\sum_{i=0}^{2} T_{\\mathrm{comm},i}(P) + T_{\\mathrm{cpl}}(P).$$\n- 基准单进程时间为 $$T_{\\mathrm{strong}}(1) = \\sum_{i=0}^{2} T_{1,i}, \\quad T_{\\mathrm{weak}}(1) = \\sum_{i=0}^{2} T_{1,i}.$$\n\n单位说明：\n- 延迟 $L$ 以秒为单位提供。\n- 带宽 $B$ 以字节/秒为单位提供。\n- 消息大小 $m_i$ 和耦合消息大小 $M_{\\mathrm{cpl}}$ 以字节为单位提供。\n- 所有计算出的时间单位均为秒。\n- 不使用角度。\n- 输出度量是无单位的浮点数、整数或布尔值。\n\n您的程序必须为每个测试用例计算：\n- $S(P)$ 和 $E_s(P)$，作为浮点数，四舍五入到六位小数。\n- $E_w(P)$，作为浮点数，四舍五入到六位小数。\n- 瓶颈索引，作为 $\\{-1,0,1,2\\}$ 中的一个整数，其中 $-1$ 表示耦合开销超过了组件。\n- 一个布尔值，指示通信是否主导计算，定义为 $$\\left(\\sum_{i=0}^{2} T_{\\mathrm{comm},i}(P) + T_{\\mathrm{cpl}}(P)\\right) > \\sum_{i=0}^{2} T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P).$$\n\n测试套件：\n为以下四个测试用例提供结果。每个测试用例由元组 $\\left(P, [T_{1,0},T_{1,1},T_{1,2}], [f_0,f_1,f_2], [n_0,n_1,n_2], [m_0,m_1,m_2], L, B, N_{\\mathrm{iter}}, k, M_{\\mathrm{cpl}}\\right)$ 给出：\n- 案例 A（基线，无通信影响）：$\\left(P=\\right.$ $1$, $[50.0, 20.0, 30.0]$, $[0.95, 0.85, 0.90]$, $[200, 150, 120]$, $[2\\times 10^{6}, 8\\times 10^{5}, 1.5\\times 10^{6}]$, $L=\\right.$ $1\\times 10^{-6}$, $B=\\right.$ $5\\times 10^{10}$, $N_{\\mathrm{iter}}=\\right.$ $100$, $k=\\right.$ $2$, $M_{\\mathrm{cpl}}=\\right.$ $1\\times 10^{6}\\right)$。\n- 案例 B（中等并行度，良好带宽）：$\\left(P=\\right.$ $8$, $[50.0, 20.0, 30.0]$, $[0.95, 0.85, 0.90]$, $[200, 150, 120]$, $[2\\times 10^{6}, 8\\times 10^{5}, 1.5\\times 10^{6}]$, $L=\\right.$ $1\\times 10^{-6}$, $B=\\right.$ $5\\times 10^{10}$, $N_{\\mathrm{iter}}=\\right.$ $100$, $k=\\right.$ $2$, $M_{\\mathrm{cpl}}=\\right.$ $1\\times 10^{6}\\right)$。\n- 案例 C（重度耦合消息，较多进程数）：$\\left(P=\\right.$ $64$, $[50.0, 20.0, 30.0]$, $[0.95, 0.85, 0.90]$, $[400, 300, 240]$, $[5\\times 10^{6}, 2\\times 10^{6}, 3\\times 10^{6}]$, $L=\\right.$ $2\\times 10^{-6}$, $B=\\right.$ $1\\times 10^{10}$, $N_{\\mathrm{iter}}=\\right.$ $200$, $k=\\right.$ $10$, $M_{\\mathrm{cpl}}=\\right.$ $5\\times 10^{7}\\right)$。\n- 案例 D（带宽较差，一个组件的并行比例较低）：$\\left(P=\\right.$ $32$, $[50.0, 20.0, 30.0]$, $[0.95, 0.60, 0.90]$, $[300, 200, 150]$, $[2\\times 10^{6}, 8\\times 10^{5}, 1.5\\times 10^{6}]$, $L=\\right.$ $5\\times 10^{-6}$, $B=\\right.$ $1\\times 10^{9}$, $N_{\\mathrm{iter}}=\\right.$ $150$, $k=\\right.$ $5$, $M_{\\mathrm{cpl}}=\\right.$ $2\\times 10^{7}\\right)$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个由方括号括起来的逗号分隔列表。列表中的每个元素对应一个测试用例，其本身也是一个形如 $[S(P),E_s(P),E_w(P),\\text{bottleneck\\_index},\\text{is\\_comm\\_dominated}]$ 的列表，其中三个浮点数条目需四舍五入到六位小数。例如：$[[s_1,e_{s,1},e_{w,1},b_1,c_1],[s_2,e_{s,2},e_{w,2},b_2,c_2],\\dots]$。",
            "solution": "问题陈述已经过验证，被认为是有效的。它科学地基于高性能计算中的既定性能模型，如Amdahl定律和用于通信的延迟-带宽模型。该问题提法恰当，为计算每个测试用例的唯一解提供了所有必要的定义、方程和数据。术语和目标清晰，并且可以形式化为一种计算算法。\n\n该解决方案通过将提供的数学模型转化为一个计算过程来实现。对于每个测试用例，程序会为计算聚变科学中典型的耦合多物理场工作流计算若干性能度量指标。该工作流由 $N_c=3$ 个组件构成，其性能在具有 $P$ 个进程的并行架构上进行建模。\n\n解决方案的核心是一个处理单个测试用例的函数，该测试用例由一组参数定义：进程数 $P$，每个组件 $i \\in \\{0, 1, 2\\}$ 的基准单进程运行时间 $T_{1,i}$、可并行化比例 $f_i$、通信次数 $n_i$ 和消息大小 $m_i$，以及系统级参数，包括延迟 $L$、带宽 $B$，以及耦合迭代次数 $N_{\\mathrm{iter}}$、频率 $k$ 和消息大小 $M_{\\mathrm{cpl}}$。\n\n计算根据问题陈述中概述的原则分几个阶段进行。\n\n首先，我们计算运行时间分量。对于给定的进程数 $P$，每个组件 $i$ 在强扩展下的计算时间由Amdahl定律推导得出：\n$$T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P) = T_{1,i}\\big[(1-f_i) + \\frac{f_i}{P}\\big]$$\n该方程模拟了工作的串行部分 $(1-f_i)$ 不会加速，而可并行化部分 $f_i$ 理想情况下会加速 $P$ 倍。\n\n每个组件 $i$ 的通信开销使用一个标准的延迟-带宽模型进行建模，该模型适用于对数树拓扑上的集体操作（例如，广播或归约）：\n$$T_{\\mathrm{comm},i}(P) = n_i\\left(L \\log_2(P) + \\frac{m_i}{B}\\cdot\\frac{P-1}{P}\\right)$$\n这捕捉了延迟成本，它与通信树的深度（$\\log_2(P)$）成比例扩展；以及带宽成本，它取决于消息大小 $m_i$ 和可用带宽 $B$。项 $(P-1)/P$ 模拟了集体数据移动的效率。当 $P=1$ 时存在一个特殊情况，此时 $\\log_2(1)=0$ 且 $(P-1)/P = 0$，导致通信时间为零。\n\n类似地，所有组件之间的全局耦合开销计算如下：\n$$T_{\\mathrm{cpl}}(P) = N_{\\mathrm{iter}}\\cdot k\\left(L \\log_2(P) + \\frac{M_{\\mathrm{cpl}}}{B}\\cdot\\frac{P-1}{P}\\right)$$\n\n有了这些单独的时间分量，我们就可以计算强扩展和弱扩展场景下的总运行时间。强扩展的总运行时间是所有计算和通信成本的总和：\n$$T_{\\mathrm{strong}}(P) = \\sum_{i=0}^{2}\\left(T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P) + T_{\\mathrm{comm},i}(P)\\right) + T_{\\mathrm{cpl}}(P)$$\n\n该问题为弱扩展运行时间定义了一个特定模型，其中总计算工作量保持恒定（等于基准单进程运行时间的总和），只有通信开销随 $P$ 增加：\n$$T_{\\mathrm{weak}}(P) = \\sum_{i=0}^{2} T_{1,i} + \\sum_{i=0}^{2} T_{\\mathrm{comm},i}(P) + T_{\\mathrm{cpl}}(P)$$\n\n使用这些总运行时间，我们计算目标性能度量指标。两种扩展模型的基准单进程运行时间均为 $T(1) = \\sum_{i=0}^{2} T_{1,i}$。\n强扩展加速比 $S(P)$ 和并行效率 $E_s(P)$ 由以下公式给出：\n$$S(P) = \\frac{T_{\\mathrm{strong}}(1)}{T_{\\mathrm{strong}}(P)}, \\quad E_s(P) = \\frac{S(P)}{P}$$\n弱扩展效率 $E_w(P)$ 由以下公式给出：\n$$E_w(P) = \\frac{T_{\\mathrm{weak}}(1)}{T_{\\mathrm{weak}}(P)}$$\n\n接下来，算法识别主要的性能瓶颈。对于每个组件 $i$，其总运行时间贡献是其计算和通信时间之和：$T_{\\mathrm{total},i}(P) = T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P) + T_{\\mathrm{comm},i}(P)$。算法找到总运行时间最长的组件，假设其索引为 $i_{\\max}$。然后将这个最大组件运行时间与全局耦合开销 $T_{\\mathrm{cpl}}(P)$ 进行比较。如果 $T_{\\mathrm{cpl}}(P)$ 大于 $\\max_i(T_{\\mathrm{total},i}(P))$，则瓶颈是全局耦合，报告的索引为 $-1$。否则，瓶颈是组件 $i_{\\max}$，并报告其索引。\n\n最后，算法确定模拟是否为通信主导。这是通过比较通信所花费的总时间（包括组件级和耦合）与计算所花费的总时间来定义的：\n$$\\text{is\\_comm\\_dominated} = \\left(\\sum_{i=0}^{2} T_{\\mathrm{comm},i}(P) + T_{\\mathrm{cpl}}(P)\\right) > \\sum_{i=0}^{2} T_{\\mathrm{comp},i}^{\\mathrm{strong}}(P)$$\n结果是一个布尔值。\n\n该实现遍历每个提供的测试用例，应用这一系列计算，将浮点度量指标四舍五入到六位小数，并将五个结果值——$S(P)$、$E_s(P)$、$E_w(P)$、瓶颈索引和通信主导标志——聚合到一个列表中。最终输出是一个包含所有测试用例结果列表的列表，并按指定格式进行格式化。",
            "answer": "[[1.000000, 1.000000, 1.000000, 0, false],[6.586676, 0.823335, 0.998319, 0, false],[3.149767, 0.049215, 0.283122, -1, true],[3.398686, 0.106209, 0.143090, -1, true]]"
        }
    ]
}
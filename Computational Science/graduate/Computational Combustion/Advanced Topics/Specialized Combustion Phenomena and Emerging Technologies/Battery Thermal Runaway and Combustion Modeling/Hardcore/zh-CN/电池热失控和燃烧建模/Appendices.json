{
    "hands_on_practices": [
        {
            "introduction": "电池热失控的建模始于对单个电芯的能量平衡分析。本练习将引导你应用“集总参数热模型”这一基本工具，从热力学第一定律出发，推导出一个描述电芯温度随时间变化的常微分方程。这个方程精确地刻画了内部化学反应放热与向环境的对流散热之间的动态竞争。通过数值求解该方程，你将能够预测在不同滥用条件下电芯达到热失控临界温度所需的时间，这是评估电池热安全性的关键一步 ()。",
            "id": "4009145",
            "problem": "考虑一个在与热失控起始相关的条件下，被建模为空间均匀的集总热容体的电池单元。基本出发点是集总体的能量守恒（当毕渥数很小时有效），表示为内能的时间变化率等于净热输入。设内能为 $U = \\rho c V T$，其中 $\\rho$ 是密度， $c$ 是比热容， $V$ 是体积， $T$ 是均匀温度。净热输入包括两个部分：由放热反应（如固体电解质界面膜(SEI)分解）引起的体积生热，由阿伦尼乌斯定律表示；以及向温度为 $T_{\\infty}$ 的环境的对流热损失。假设体积生热率为 $q_{\\mathrm{vol}}(T) = Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}}$，其中 $Q_0$ 是一个单位为 $\\mathrm{W/m^3}$ 的常数指前因子，它综合了反应动力学和焓释放，$E_a$ 是活化能，$R$ 是普适气体常数，$q_{\\mathrm{ext}}$ 是一个恒定的外部体积加热项，代表滥用条件（例如，强制加热或短路）。对流热损失通过牛顿冷却定律建模，其中传热系数为 $h$，表面积为 $A$。\n\n从这些定义和守恒声明出发，推导温度 $T(t)$ 的常微分方程，并实施数值积分以确定点火延迟，点火延迟定义为 $T(t)$ 首次达到指定的点火阈值 $T_{\\mathrm{ign}}$ 的时间。如果 $T(t)$ 在指定的最大时间 $t_{\\max}$ 内未达到 $T_{\\mathrm{ign}}$，则返回一个哨兵值 $-1.0$。点火延迟的答案以秒为单位表示。\n\n您的程序必须：\n- 从集总能量平衡以及给定的生热和散热模型出发，构建温度演化方程，不得使用除所述基本定律和定义之外的任何快捷公式。\n- 使用带有事件检测功能的鲁棒初值问题求解器，在 $T(t)$ 达到 $T_{\\mathrm{ign}}$ 时停止计算。\n- 将初始条件视为 $T(0) = T_0$。\n- 确保所有量在整个过程中使用一致的国际单位制（SI单位）。\n- 输出单行内容，包含一个用方括号括起来的逗号分隔列表，其中每个条目是对应测试用例的点火延迟（以秒为单位的浮点数），用 $-1.0$ 表示在 $t_{\\max}$ 内未发生点火。\n\n使用以下参数集测试套件，这些参数集旨在探究不同的工况：\n- 案例1（正常路径，中等冷却，中等外部加热）：$\\rho = 2500 \\ \\mathrm{kg/m^3}$， $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$， $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$， $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$， $h = 12.0 \\ \\mathrm{W/(m^2\\cdot K)}$， $T_{\\infty} = 298.0 \\ \\mathrm{K}$， $T_0 = 300.0 \\ \\mathrm{K}$， $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$， $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$， $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$， $q_{\\mathrm{ext}} = 2.0\\times 10^{5} \\ \\mathrm{W/m^3}$， $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$， $t_{\\max} = 2500.0 \\ \\mathrm{s}$。\n- 案例2（强冷却，较弱的外部加热，可能在 $t_{\\max}$ 内不点火）：$\\rho = 2500 \\ \\mathrm{kg/m^3}$， $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$， $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$， $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$， $h = 60.0 \\ \\mathrm{W/(m^2\\cdot K)}$， $T_{\\infty} = 298.0 \\ \\mathrm{K}$， $T_0 = 300.0 \\ \\mathrm{K}$， $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$， $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$， $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$， $q_{\\mathrm{ext}} = 1.0\\times 10^{5} \\ \\mathrm{W/m^3}$， $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$， $t_{\\max} = 2500.0 \\ \\mathrm{s}$。\n- 案例3（较低环境温度，较高外部加热，较快点火）：$\\rho = 2500 \\ \\mathrm{kg/m^3}$， $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$， $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$， $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$， $h = 20.0 \\ \\mathrm{W/(m^2\\cdot K)}$， $T_{\\infty} = 290.0 \\ \\mathrm{K}$， $T_0 = 300.0 \\ \\mathrm{K}$， $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$， $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$， $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$， $q_{\\mathrm{ext}} = 4.0\\times 10^{5} \\ \\mathrm{W/m^3}$， $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$， $t_{\\max} = 2000.0 \\ \\mathrm{s}$。\n- 案例4（接近阈值的初始温度，快速点火）：$\\rho = 2500 \\ \\mathrm{kg/m^3}$， $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$， $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$， $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$， $h = 12.0 \\ \\mathrm{W/(m^2\\cdot K)}$， $T_{\\infty} = 298.0 \\ \\mathrm{K}$， $T_0 = 440.0 \\ \\mathrm{K}$， $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$， $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$， $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$， $q_{\\mathrm{ext}} = 2.0\\times 10^{5} \\ \\mathrm{W/m^3}$， $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$， $t_{\\max} = 500.0 \\ \\mathrm{s}$。\n\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，$[result_1,result_2,result_3,result_4]$），其中每个 $result_i$ 是相应案例的点火延迟（以秒为单位），如果未在 $t_{\\max}$ 前达到点火温度，则为 $-1.0$。",
            "solution": "该问题要求推导并随后数值求解一个控制集总热容体（代表电池单元）温度的微分方程，以确定其点火延迟。推导从能量守恒基本原理开始。\n\n对于一个集总系统，热力学第一定律指出，其内能的时间变化率 $\\frac{dU}{dt}$ 等于进入系统的净传热速率 $\\dot{Q}_{\\text{net}}$。\n$$\n\\frac{dU}{dt} = \\dot{Q}_{\\text{net}}\n$$\n物体的内能 $U$ 由 $U = \\rho c V T$ 给出，其中 $\\rho$ 是密度， $c$ 是比热容， $V$ 是体积， $T$ 是均匀温度。假设 $\\rho$、 $c$ 和 $V$ 是常数，内能的变化率为：\n$$\n\\frac{dU}{dt} = \\frac{d}{dt}(\\rho c V T) = \\rho c V \\frac{dT}{dt}\n$$\n净热速率 $\\dot{Q}_{\\text{net}}$ 是物体内部产生的热量 $\\dot{Q}_{\\text{gen}}$ 与散失到周围环境的热量的代数和。将热损失定义为正值，我们有 $\\dot{Q}_{\\text{net}} = \\dot{Q}_{\\text{gen}} - \\dot{Q}_{\\text{loss}}$。\n\n总生热率 $\\dot{Q}_{\\text{gen}}$ 是通过将指定的体积生热率 $q_{\\mathrm{vol}}(T)$ 乘以体积 $V$ 得到的。体积生热率是阿伦尼乌斯型化学反应项和恒定外部加热项 $q_{\\mathrm{ext}}$ 的和：\n$$\nq_{\\mathrm{vol}}(T) = Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}}\n$$\n其中 $Q_0$ 是指前因子， $E_a$ 是活化能， $R$ 是普适气体常数。因此，总生热率为：\n$$\n\\dot{Q}_{\\text{gen}} = V \\cdot q_{\\mathrm{vol}}(T) = V \\left( Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}} \\right)\n$$\n散热率 $\\dot{Q}_{\\text{loss}}$ 由牛顿冷却定律描述，该定律指出对流传热的速率与表面积 $A$、传热系数 $h$ 以及物体（$T$）与周围环境（$T_{\\infty}$）之间的温差成正比：\n$$\n\\dot{Q}_{\\text{loss}} = h A (T - T_{\\infty})\n$$\n通过将 $\\frac{dU}{dt}$、 $\\dot{Q}_{\\text{gen}}$ 和 $\\dot{Q}_{\\text{loss}}$ 的表达式代入能量平衡方程，我们得到：\n$$\n\\rho c V \\frac{dT}{dt} = V \\left( Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}} \\right) - h A (T - T_{\\infty})\n$$\n为了构建温度演化的常微分方程（ODE），我们求解导数 $\\frac{dT}{dt}$：\n$$\n\\frac{dT}{dt} = \\frac{1}{\\rho c V} \\left[ V \\left( Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}} \\right) - h A (T - T_{\\infty}) \\right]\n$$\n这个常微分方程以及初始条件 $T(0) = T_0$ 构成了一个初值问题（IVP），描述了电池单元温度随时间的变化。\n\n该初值问题通过数值求解来找到点火延迟，即温度 $T(t)$ 达到点火阈值 $T_{\\mathrm{ign}}$ 所需的时间。我们使用 `scipy.integrate.solve_ivp` 函数，这是一个在Python中解决初值问题的鲁棒工具。该求解器的一个关键特性是其处理事件的能力。事件由一个函数定义，该函数的根标记了一个特定事件的发生。对于本问题，事件函数是 $g(t, T) = T(t) - T_{\\mathrm{ign}}$。我们将求解器配置为检测到 $g(t, T) = 0$ 且斜率为正（即温度升高并穿过 $T_{\\mathrm{ign}}$）时，并于该点终止积分。\n\n积分在时间跨度 $[0, t_{\\max}]$ 内进行。如果检测到点火事件，求解器将返回事件发生的时间，即点火延迟。如果积分完成至 $t_{\\max}$ 而事件未发生，则表明系统要么达到了低于 $T_{\\mathrm{ign}}$ 的稳定热平衡，要么温度上升速率太慢，无法在规定时间内点火。在这种情况下，返回指定的哨兵值 $-1.0$。此过程系统地应用于所提供的四个测试案例中的每一个。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.integrate import solve_ivp\n\ndef solve():\n    \"\"\"\n    Derives and solves the ODE for battery temperature to find ignition delay.\n    \"\"\"\n    \n    # Test cases as provided in the problem statement. Each entry is a dictionary\n    # of parameters for a single simulation run.\n    test_cases = [\n        # Case 1: Moderate cooling, moderate external heating\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 12.0,\n            \"T_inf\": 298.0, \"T0\": 300.0, \"q_ext\": 2.0e5, \"T_ign\": 450.0, \"t_max\": 2500.0\n        },\n        # Case 2: Strong cooling, weaker external heating\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 60.0,\n            \"T_inf\": 298.0, \"T0\": 300.0, \"q_ext\": 1.0e5, \"T_ign\": 450.0, \"t_max\": 2500.0\n        },\n        # Case 3: Lower ambient, higher external heating\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 20.0,\n            \"T_inf\": 290.0, \"T0\": 300.0, \"q_ext\": 4.0e5, \"T_ign\": 450.0, \"t_max\": 2000.0\n        },\n        # Case 4: Near-threshold initial temperature\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 12.0,\n            \"T_inf\": 298.0, \"T0\": 440.0, \"q_ext\": 2.0e5, \"T_ign\": 450.0, \"t_max\": 500.0\n        },\n    ]\n\n    # Global physical constants from the problem description\n    R = 8.314   # Universal gas constant, J/(mol*K)\n    Q0 = 5.0e10 # Pre-exponential factor, W/m^3\n    Ea = 6.0e4  # Activation energy, J/mol\n    \n    results = []\n\n    for case_params in test_cases:\n        # Define the ordinary differential equation for temperature evolution\n        def temperature_ode(t, T_array, params):\n            T = T_array[0]\n            \n            # Unpack parameters for clarity\n            rho, c, V, A, h = params[\"rho\"], params[\"c\"], params[\"V\"], params[\"A\"], params[\"h\"]\n            T_inf, q_ext = params[\"T_inf\"], params[\"q_ext\"]\n            \n            # Rate of volumetric heat generation (W/m^3)\n            # This includes internal Arrhenius-type reaction and external heating\n            q_vol = Q0 * np.exp(-Ea / (R * T)) + q_ext\n            \n            # Total rate of heat generation in the volume (W)\n            q_gen_total = q_vol * V\n            \n            # Total rate of heat loss via convection (W)\n            q_loss_total = h * A * (T - T_inf)\n            \n            # Energy balance: rho * c * V * dT/dt = q_gen_total - q_loss_total\n            dT_dt = (q_gen_total - q_loss_total) / (rho * c * V)\n            \n            return [dT_dt]\n\n        # Define an event to detect when the temperature reaches the ignition threshold\n        def ignition_event(t, T_array, params):\n            return T_array[0] - params[\"T_ign\"]\n        \n        ignition_event.terminal = True # Stop the integration when the event is detected\n        ignition_event.direction = 1   # Trigger only on an increasing temperature profile\n\n        # Solve the initial value problem (IVP)\n        sol = solve_ivp(\n            fun=temperature_ode,\n            t_span=(0, case_params[\"t_max\"]),\n            y0=[case_params[\"T0\"]],\n            method='RK45',  # A standard, robust solver for non-stiff problems\n            events=ignition_event,\n            args=(case_params,), # Pass parameters to the ODE and event functions\n            dense_output=True # Improves accuracy of event location\n        )\n\n        # Process the results of the integration\n        if sol.status == 1 and len(sol.t_events[0])  0:\n            # Status 1 means a terminal event was triggered\n            ignition_time = sol.t_events[0][0]\n            results.append(ignition_time)\n        else:\n            # No ignition event occurred within the t_max time window\n            results.append(-1.0)\n\n    # Print the final results in the specified format\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "当一个电芯发生热失控并喷发出可燃气体时，一个核心的安全问题是：火焰能否在电池模组内部的狭窄通道中持续传播，还是会被熄灭？本练习将带你深入探索“火焰猝熄”现象，即通道壁面的热损失足以抑制燃烧反应。你将通过平衡火焰自身的化学放热与传导至壁面的热损失，推导出一个判断火焰传播与否的临界通道尺寸，即“猝熄距离”。这项实践将基础燃烧理论与电池系统的安全设计（如集成式火焰拦截器）紧密联系起来 ()。",
            "id": "4009192",
            "problem": "考虑在锂离子电池热失控过程中，电解质蒸气-空气混合物通过半间隙为 $d$（全间隙为 $2d$）的狭窄平行板通道排放。假设一个空间一维的预混火焰以层流燃烧速度 $S_L$ 轴向传播到温度为 $T_u$ 的未燃混合物中。通道壁面是等温的，温度为 $T_w$，而绝热已燃气体温度（在没有壁面热损失的情况下）为 $T_b$。物性参数被视为常数，并在一个中间温度下取值，包括密度 $\\rho$、定压比热容 $c_p$ 和导热系数 $\\lambda$。采用以下建模假设和要求。\n\n1) 使用的基本原理和模型封闭：\n- 在火焰静止的坐标系中，稳态、平面预混火焰的能量守恒：单位横截面积上对流通过火焰的净显焓增量等于绝热条件下将实现的反应热释放量减去损失到壁面的热量。\n- 横向上的傅里叶热传导定律，横向温度场由拉普拉斯算子在等温壁面平行板通道中的第一特征模态表示。使用第一模态特征值系数 $c_{\\text{mode}} = \\pi^2/4$ 来模拟窄通道中的特征横向传导强度。\n- 热扩散率定义 $\\alpha = \\lambda / (\\rho c_p)$ 和特征热火焰厚度定义 $\\delta_T = \\alpha / S_L$。\n\n2) 推导目标：\n- 仅从上述基本定律和定义出发，推导出一个关于稳态传播火焰存在与熄火的判据，用临界半间隙 $d_q$ 表示。该推导必须通过平衡跨越火焰的控制体积内的轴向对流显焓输运与通过第一特征模态建模的向壁面横向传导损失，将 $d_q$ 显式地表示为 $S_L$、$\\rho$、$c_p$、$\\lambda$、$T_b$、$T_u$、$T_w$ 和 $c_{\\text{mode}}$ 的函数。您必须选择一个一致的、作为 $T_b$ 和 $T_u$ 函数的代表性火焰区平均温度的定义，并从第一性原理出发证明该选择的合理性。最终判据必须是一个单位为米的 $d_q$ 的封闭形式表达式。\n- 分类规则是：如果 $d \\ge d_q$，则预测火焰传播（返回布尔值True）；否则，预测熄火（返回布尔值False）。\n\n3) 程序要求：\n- 在一个完整的、可运行的程序中实现推导出的 $d_q$ 的显式表达式和分类规则。\n- 对于下面的每个测试用例，计算临界半间隙 $d_q$ 和分类结果。临界半间隙以毫米为单位表示，并四舍五入到三位小数。分类结果必须是布尔值。\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表，列表的每个元素都是 $[d_q\\ \\text{in mm},\\ \\text{boolean}]$ 形式的双元素列表。例如：$[[0.123,\\text{True}],[0.456,\\text{False}],\\ldots]$。\n\n4) 单位和常数：\n- 所有输入均采用国际单位制（SI）：$d$ 的单位是米，$S_L$ 的单位是米/秒，$\\rho$ 的单位是千克/立方米，$c_p$ 的单位是焦耳/千克/开尔文，$\\lambda$ 的单位是瓦/米/开尔文，所有温度单位都是开尔文。\n- 如上所述，使用 $c_{\\text{mode}} = \\pi^2/4$。\n- 角度单位不适用于此问题。\n\n5) 测试套件：\n使用以下五个代表电池排气条件下电解质蒸气混合物的科学上合理的测试用例。对每个用例，应用您推导的表达式和分类规则。\n\n- 用例A（理想情况，宽通道）：$d = 0.001\\ \\text{m}$，$S_L = 0.25\\ \\text{m/s}$，$\\rho = 0.8\\ \\text{kg/m}^3$，$c_p = 1200\\ \\text{J/(kg\\cdot K)}$，$\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$，$T_b = 2100\\ \\text{K}$，$T_u = 500\\ \\text{K}$，$T_w = 400\\ \\text{K}$。\n- 用例B（窄通道，与A相同的混合物）：$d = 0.0001\\ \\text{m}$，$S_L = 0.25\\ \\text{m/s}$，$\\rho = 0.8\\ \\text{kg/m}^3$，$c_p = 1200\\ \\text{J/(kg\\cdot K)}$，$\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$，$T_b = 2100\\ \\text{K}$，$T_u = 500\\ \\text{K}$，$T_w = 400\\ \\text{K}$。\n- 用例C（慢火焰）：$d = 0.0005\\ \\text{m}$，$S_L = 0.08\\ \\text{m/s}$，$\\rho = 0.8\\ \\text{kg/m}^3$，$c_p = 1200\\ \\text{J/(kg\\cdot K)}$，$\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$，$T_b = 2100\\ \\text{K}$，$T_u = 500\\ \\text{K}$，$T_w = 400\\ \\text{K}$。\n- 用例D（热壁减少损失）：$d = 0.00015\\ \\text{m}$，$S_L = 0.25\\ \\text{m/s}$，$\\rho = 0.8\\ \\text{kg/m}^3$，$c_p = 1200\\ \\text{J/(kg\\cdot K)}$，$\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$，$T_b = 2100\\ \\text{K}$，$T_u = 500\\ \\text{K}$，$T_w = 1000\\ \\text{K}$。\n- 用例E（不同的混合物属性）：$d = 0.00025\\ \\text{m}$，$S_L = 0.15\\ \\text{m/s}$，$\\rho = 1.1\\ \\text{kg/m}^3$，$c_p = 1100\\ \\text{J/(kg\\cdot K)}$，$\\lambda = 0.03\\ \\text{W/(m\\cdot K)}$，$T_b = 1900\\ \\text{K}$，$T_u = 450\\ \\text{K}$，$T_w = 350\\ \\text{K}$。\n\n您的程序必须硬编码这五个测试用例，使用您推导的表达式计算所要求的输出，并打印出形如 $[[d_{q,A},\\text{bool}_A],[d_{q,B},\\text{bool}_B],[d_{q,C},\\text{bool}_C],[d_{q,D},\\text{bool}_D],[d_{q,E},\\text{bool}_E]]$ 的单行结果，其中每个 $d_{q,\\cdot}$ 以毫米为单位，四舍五入到三位小数，每个 $\\text{bool}_{\\cdot}$ 是相应的传播分类。",
            "solution": "用户的要求是推导一个在窄平行板通道中火焰传播与熄火的判据，并以编程方式实现。这个问题在科学上是适定（well-posed）的，适合进行严格求解。\n\n### 步骤 1：提取已知条件\n- **几何形状**：半间隙为 $d$ 的平行板通道（全间隙为 $2d$）。\n- **流动**：一维预混火焰以层流燃烧速度 $S_L$ 轴向传播。\n- **温度**：未燃混合物温度 $T_u$，等温壁面温度 $T_w$，绝热已燃气体温度 $T_b$。\n- **物性**：在中间温度下取值的常数：密度 $\\rho$，定压比热容 $c_p$，导热系数 $\\lambda$。\n- **建模假设**：\n    1.  **能量平衡**：稳态、平面、火焰静止坐标系。单位面积净显焓增量 = 单位面积绝热热释放 - 对壁面的热损失。\n    2.  **横向热损失**：通过傅里叶定律建模，横向温度场由拉普拉斯算子的第一特征模态表示。特征值系数 $c_{\\text{mode}} = \\pi^2/4$。\n    3.  **定义**：热扩散率 $\\alpha = \\lambda / (\\rho c_p)$，特征热火焰厚度 $\\delta_T = \\alpha / S_L$。\n- **推导目标**：临界熄火半间隙 $d_q$ 的一个显式、封闭形式的表达式，该表达式是 $S_L$、$\\rho$、$c_p$、$\\lambda$、$T_b$、$T_u$、$T_w$ 和 $c_{\\text{mode}}$ 的函数。\n- **分类规则**：如果 $d \\ge d_q$，火焰传播（True）；如果 $d  d_q$，火焰熄火（False）。\n- **测试用例**：提供了五组参数（$d$、$S_L$、$\\rho$、$c_p$、$\\lambda$、$T_b$、$T_u$、$T_w$）。\n\n### 步骤 2：使用提取的已知条件进行验证\n根据验证标准对问题进行评估：\n- **科学基础**：该问题植根于燃烧理论和传热学的基本原理，特别是控制火焰传播和熄灭的化学热释放和传导热损失之间的平衡。使用全局能量平衡和特征模态近似来分析火焰熄火是分析火焰熄火的标准、成熟的技术。所提供的物理参数对于电解质蒸气燃烧是合理的。\n- **适定性**：问题定义清晰，提供了所有必要的参数、常数和边界条件。目标是基于一套规定的假设推导出一个特定量 $d_q$，从而得到唯一的解。\n- **客观性**：问题以精确、定量和无偏见的科学语言陈述。没有主观因素。\n\n该问题没有任何无效性缺陷。它在科学上是合理的、自洽的，并且是可形式化的。\n\n### 步骤 3：结论与行动\n问题是 **有效的**。继续进行推导和求解。\n\n### 熄火判据的推导\n\n通道中火焰可持续性的问题由化学反应产生的热量与损失给冷壁的热量之间的平衡所决定。只有当生热速率足以克服损失时，稳态火焰才能存在。熄火极限对应于热损失速率等于热生成速率的临界条件。我们使用火焰厚度定义的控制体积内的体积速率来对此平衡进行建模。\n\n我们定义体积生热率 $q_{gen}$ 和体积散热率 $q_{loss}$。那么，熄火条件为 $q_{gen} = q_{loss}$。\n\n1.  **体积生热率 ($q_{gen}$)**：\n    单位通道横截面积上释放的总热量是将温度为 $T_u$ 的未燃气体加热到绝热火焰温度 $T_b$ 所需的热量。在火焰静止坐标系中，质量通量为 $\\rho S_L$。因此，单位面积的热释放率为 $\\rho S_L c_p (T_b - T_u)$。\n    这个热量是在火焰的体积内释放的。我们可以通过将此总热量分布在火焰的特征厚度 $\\delta_T$ 上来近似体积生热率。\n    $$q_{gen} \\approx \\frac{\\rho S_L c_p (T_b - T_u)}{\\delta_T}$$\n    问题给出了热火焰厚度的定义为 $\\delta_T = \\alpha / S_L$，其中 $\\alpha = \\lambda / (\\rho c_p)$ 是热扩散率。代入 $\\delta_T$：\n    $$q_{gen} \\approx \\frac{\\rho S_L c_p (T_b - T_u)}{\\lambda / (\\rho c_p S_L)} = \\frac{(\\rho c_p S_L)^2 (T_b - T_u)}{\\lambda}$$\n\n2.  **体积散热率 ($q_{loss}$)**：\n    热量通过横向（我们称之为 $y$ 方向）的传导从火焰区损失到通道壁面。体积热损失是传导热通量的散度。对于一维轴向火焰，主要的损失项是由于横向传导，即 $\\lambda \\frac{\\partial^2 T}{\\partial y^2}$。\n    问题指导我们使用等温壁面平行板通道的第一特征模态来模拟横向温度分布。这种近似将温度的二阶导数与气体和壁面之间的温差联系起来：\n    $$\\frac{\\partial^2 T}{\\partial y^2} \\approx -\\frac{c_{\\text{mode}}}{d^2} (\\bar{T} - T_w)$$\n    这里，$\\bar{T}$ 是火焰区中气体的代表性平均温度，$c_{\\text{mode}} = \\pi^2/4$ 是给定的半间隙为 $d$ 的通道的第一模态特征值系数。\n    因此，体积散热率为：\n    $$q_{loss} \\approx -\\lambda \\left( -\\frac{c_{\\text{mode}}}{d^2} (\\bar{T} - T_w) \\right) = \\frac{\\lambda c_{\\text{mode}}}{d^2} (\\bar{T} - T_w)$$\n\n3.  **代表性火焰温度 ($\\bar{T}$)**：\n    问题要求为代表性火焰区平均温度 $\\bar{T}$ 提供一个合理的选择。火焰内的温度从 $T_u$ 变化到接近 $T_b$ 的峰值。对于该结构中的平均温度，一个简单且物理上合理的选择是未燃气体和绝热已燃气体温度的算术平均值：\n    $$\\bar{T} = \\frac{T_u + T_b}{2}$$\n    这个选择是合理的，因为它是预热区和反应区（大部分横向热损失发生的区域）平均温度的一阶近似。\n\n4.  **推导临界半间隙 ($d_q$)**：\n    当生热量恰好被热损失所平衡时，达到熄火条件。我们在临界半间隙 $d = d_q$ 处设 $q_{gen} = q_{loss}$：\n    $$\\frac{(\\rho c_p S_L)^2 (T_b - T_u)}{\\lambda} = \\frac{\\lambda c_{\\text{mode}}}{d_q^2} \\left( \\bar{T} - T_w \\right)$$\n    现在，我们求解 $d_q^2$：\n    $$d_q^2 = \\frac{\\lambda^2 c_{\\text{mode}} (\\bar{T} - T_w)}{(\\rho c_p S_L)^2 (T_b - T_u)}$$\n    取平方根得到临界半间隙的表达式：\n    $$d_q = \\sqrt{\\frac{\\lambda^2 c_{\\text{mode}} (\\bar{T} - T_w)}{(\\rho c_p S_L)^2 (T_b - T_u)}} = \\frac{\\lambda}{\\rho c_p S_L} \\sqrt{c_{\\text{mode}} \\frac{\\bar{T} - T_w}{T_b - T_u}}$$\n    代入我们选择的 $\\bar{T}$：\n    $$\\frac{\\bar{T} - T_w}{T_b - T_u} = \\frac{(T_u + T_b)/2 - T_w}{T_b - T_u} = \\frac{T_u + T_b - 2T_w}{2(T_b - T_u)}$$\n    这得出了临界熄火半间隙的最终表达式：\n    $$d_q = \\frac{\\lambda}{\\rho c_p S_L} \\sqrt{c_{\\text{mode}} \\frac{T_b + T_u - 2T_w}{2(T_b - T_u)}}$$\n\n5.  **分类规则**：\n    如果实际的通道半间隙 $d$ 大于或等于临界值 $d_q$，则生热能力超过相对热损失，稳态火焰可以传播。否则，热损失占主导，火焰被熄灭。\n    - 如果 $d \\ge d_q$：火焰传播 (True)。\n    - 如果 $d  d_q$：火焰熄火 (False)。\n\n现在将实施这个推导出的表达式和分类规则来解决测试用例。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the quenching distance for a flame in a parallel-plate channel\n    and determines if propagation or quenching occurs for several test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement. All units are SI.\n    test_cases = [\n        # Case A (happy path, wide channel)\n        {'name': 'A', 'd': 0.001, 'S_L': 0.25, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 400},\n        # Case B (narrow channel, same mixture as A)\n        {'name': 'B', 'd': 0.0001, 'S_L': 0.25, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 400},\n        # Case C (slow flame)\n        {'name': 'C', 'd': 0.0005, 'S_L': 0.08, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 400},\n        # Case D (hot wall reduces losses)\n        {'name': 'D', 'd': 0.00015, 'S_L': 0.25, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 1000},\n        # Case E (different mixture properties)\n        {'name': 'E', 'd': 0.00025, 'S_L': 0.15, 'rho': 1.1, 'c_p': 1100, 'lam': 0.03, 'T_b': 1900, 'T_u': 450, 'T_w': 350},\n    ]\n\n    results_str = []\n    \n    # Constant for the first-mode eigenvalue coefficient\n    c_mode = np.pi**2 / 4\n\n    for case in test_cases:\n        d = case['d']\n        S_L = case['S_L']\n        rho = case['rho']\n        c_p = case['c_p']\n        lam = case['lam']\n        T_b = case['T_b']\n        T_u = case['T_u']\n        T_w = case['T_w']\n\n        # The term inside the square root can be negative if 2*T_w  T_b + T_u,\n        # which would be physically unrealistic for quenching (hot walls supporting combustion).\n        # We assert this is not the case for our inputs.\n        temp_numerator = T_b + T_u - 2 * T_w\n        temp_denominator = 2 * (T_b - T_u)\n        \n        if temp_numerator  0 or temp_denominator = 0:\n            # This scenario is not expected with the given data but handle for robustness.\n            # A negative numerator implies wall heating, not loss, so no quenching.\n            # Thus d_q would be imaginary or zero; practically, flame always propagates.\n            # For this problem, we can assume this case won't be tested.\n            # Let's add a check.\n            if temp_numerator  0:\n               dq = 0 # No quenching due to heat loss\n            else:\n               # This case would mean T_u = T_b, which is non-physical for a flame\n               # and would cause a domain error.\n               # Let's skip to avoid crashing, but this indicates an invalid case.\n               continue\n        else:\n             # Calculate the critical quenching half-gap d_q based on the derived formula:\n             # d_q = (lambda / (rho * c_p * S_L)) * sqrt(c_mode * (T_b + T_u - 2*T_w) / (2 * (T_b - T_u)))\n             pre_factor = lam / (rho * c_p * S_L)\n             sqrt_term = np.sqrt(c_mode * temp_numerator / temp_denominator)\n             dq = pre_factor * sqrt_term\n\n        # Convert d_q from meters to millimeters and round to three decimal places\n        dq_mm = round(dq * 1000, 3)\n\n        # Classification: propagate if d = dq, otherwise quench.\n        propagate = d = dq\n\n        # Format the result string for this case as `[value,Boolean]`\n        results_str.append(f\"[{dq_mm},{propagate}]\")\n\n    # Final print statement in the exact required format: [[...],[...],...]\n    print(f\"[{','.join(results_str)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "热失控最危险的后果是“链式传播”，即单个电芯的失效引发邻近电芯接连发生热失控。本练习将分析尺度提升至系统层面，让你模拟两个相邻电芯之间复杂的热反馈回路。你将构建一个耦合常微分方程组，该模型不仅考虑了每个电芯自身的内部产热和对流冷却，还关键地包含了电芯间的热相互作用，如表面热辐射和火焰加热。通过对这个耦合系统进行数值模拟，你将能够评估在何种条件下局部故障会演变为全局性的链式失效，从而为设计更安全的电池模组布局和热管理策略提供深刻见解 ()。",
            "id": "4009227",
            "problem": "考虑一个简化的双电芯锂离子电池模组，其中一个电芯发生热失控，并可能向相邻电芯发生级联传播。每个电芯被建模为一个等温集总控制质量，具有单一的温度状态变量。该模型使用基本的能量守恒、辐射交换和化学动力学来捕捉反馈回路，其中相邻电芯的辐射加热会增加排气和火焰强度，从而影响热失控是否级联传播。\n\n将使用的假设和基本定律：\n- 控制质量的热力学第一定律： $$C_i \\frac{d T_i}{d t} = \\dot{Q}_{\\text{in},i} - \\dot{Q}_{\\text{out},i} + \\dot{Q}_{\\text{gen},i},$$ 其中 $C_i$ 是电芯 $i$ 的有效热容，单位为 $\\mathrm{J/K}$；$T_i$ 是电芯温度，单位为 $\\mathrm{K}$；$\\dot{Q}_{\\text{in},i}$ 是输入电芯的净外部热量速率，单位为 $\\mathrm{W}$；$\\dot{Q}_{\\text{out},i}$ 是净热损失速率，单位为 $\\mathrm{W}$；$\\dot{Q}_{\\text{gen},i}$ 是内部生热速率，单位为 $\\mathrm{W}$。\n- 用于表面辐射交换的斯特藩-玻尔兹曼定律（含角系数）： $$\\dot{Q}_{\\text{rad},i\\rightarrow j}^{\\text{surf}} = \\sigma \\epsilon F_{ij} A_{\\text{face}}\\left(T_i^4 - T_j^4\\right),$$ 其中 $\\sigma$ 是斯特藩-玻尔兹曼常数（$\\sigma = 5.670374419\\times 10^{-8}\\ \\mathrm{W\\,m^{-2}\\,K^{-4}}$），$\\epsilon$ 是发射率（无量纲），$F_{ij}$ 是角系数（无量纲），$A_{\\text{face}}$ 是辐射面面积，单位为 $\\mathrm{m^2}$。\n- 用于对流损失的牛顿冷却定律： $$\\dot{Q}_{\\text{conv},i} = h_i A_{\\text{face}}\\left(T_i - T_{\\infty}\\right),$$ 其中 $h_i$ 是对流换热系数，单位为 $\\mathrm{W\\,m^{-2}\\,K^{-1}}$，$T_{\\infty}$ 是环境温度，单位为 $\\mathrm{K}$。\n- 排出气体的燃烧释放热量，其速率与排性质流成正比： $$\\dot{Q}_{\\text{comb},i} = \\eta \\,\\text{LHV}\\,\\dot{m}_i,$$ 其中 $\\eta$ 是燃烧效率（无量纲），$\\text{LHV}$ 是低热值，单位为 $\\mathrm{J/kg}$，$\\dot{m}_i$ 是排性质流速率，单位为 $\\mathrm{kg/s}$。该燃烧热的一部分 $\\chi$（无量纲）以热辐射形式发射，可加热相邻电芯： $$\\dot{Q}_{\\text{rad},i\\rightarrow j}^{\\text{flame}} = \\chi\\,\\dot{Q}_{\\text{comb},i}\\,F_{ij}.$$\n- 用于排气起始动力学的阿伦尼乌斯型温度依赖关系： $$\\dot{m}_i = k_0 \\exp\\left(-\\frac{E_a}{R\\,T_i}\\right)\\,H\\!\\left(T_i - T_{\\text{onset}}\\right),$$ 其中 $k_0$ 是指前因子，单位为 $\\mathrm{kg/s}$；$E_a$ 是活化能，单位为 $\\mathrm{J/mol}$；$R$ 是普适气体常数（$R=8.314\\ \\mathrm{J\\,mol^{-1}\\,K^{-1}}$）；$H(\\cdot)$ 是亥维赛德函数；$T_{\\text{onset}}$ 是起始温度，单位为 $\\mathrm{K}$。\n- 与排气成正比的内部放热分解生热： $$\\dot{Q}_{\\text{gen},i} = H_{\\text{decomp}}\\;\\dot{m}_i,$$ 其中 $H_{\\text{decomp}}$ 是比内部分解焓释放量，单位为 $\\mathrm{J/kg}$。\n\n建模细节和参数（请完全按照指定值使用）：\n- 两个标记为 $A$ 和 $B$ 的电芯具有相同的属性。有效热容：$C_A=C_B=1000\\ \\mathrm{J/K}$。发射率：$\\epsilon=0.8$。辐射面面积：$A_{\\text{face}}=0.02\\ \\mathrm{m^2}$。环境温度：$T_{\\infty}=300\\ \\mathrm{K}$。电芯 $A$ 的对流系数：$h_A=15\\ \\mathrm{W\\,m^{-2}\\,K^{-1}}$。电芯 $B$ 的对流系数：$h_B$ 根据测试用例变化（见下文）。角系数 $F_{AB}=F_{BA}$ 根据测试用例变化。初始温度：$T_A(0)=900\\ \\mathrm{K}$，$T_B(0)=300\\ \\mathrm{K}$。\n- 化学-热学参数：燃烧效率 $\\eta=0.9$（无量纲），辐射分数 $\\chi=0.35$（无量纲），低热值 $\\text{LHV}=1.5\\times 10^7\\ \\mathrm{J/kg}$，比分解焓 $H_{\\text{decomp}}=5.0\\times 10^6\\ \\mathrm{J/kg}$，阿伦尼乌斯指前因子 $k_0=0.5\\ \\mathrm{kg/s}$，活化能 $E_a=6.0\\times 10^4\\ \\mathrm{J/mol}$，起始温度 $T_{\\text{onset}}=420\\ \\mathrm{K}$。\n- 时间积分：使用显式前向欧拉时间步进，固定时间步长 $\\Delta t=0.05\\ \\mathrm{s}$，总时长 $t_{\\text{end}}=300\\ \\mathrm{s}$。\n- 辐射交换：表面交换是根据斯特藩-玻尔兹曼定律计算的电芯之间的净交换；每个电芯的火焰辐射仅通过上述定义的角系数作为对另一电芯的外部源。不要在源电芯的内部能量预算中包含火焰辐射项作为损失。\n- 级联传播判据：如果在模拟过程中的任何时间，$(T_B \\ge T_{\\text{runaway}})$ 和 $(\\dot{m}_B \\ge \\dot{m}_{\\text{thr}})$ 两个条件同时连续满足至少 $\\tau_{\\text{sustain}}$ 秒，则认为级联已传播至电芯 $B$。使用 $T_{\\text{runaway}}=500\\ \\mathrm{K}$，$\\dot{m}_{\\text{thr}}=1.0\\times 10^{-4}\\ \\mathrm{kg/s}$，以及 $\\tau_{\\text{sustain}}=2.0\\ \\mathrm{s}$。时间以秒表示，温度以 $\\mathrm{K}$ 表示，能量速率以 $\\mathrm{W}$ 表示，质量流率以 $\\mathrm{kg/s}$ 表示。\n\n任务：\n- 从所给定律推导出 $T_A(t)$ 和 $T_B(t)$ 的耦合常微分方程，并实现显式欧拉积分器以随时间演化温度和排气速率。\n- 使用指定的判据为电芯 $B$ 实现级联检测逻辑。\n\n测试组：\n对以下四组参数集评估模型，每组由 $(F_{AB}, h_B)$ 定义，所有其他参数如上所述：\n- 用例 1：$(F_{AB}=0.7,\\ h_B=15)$。\n- 用例 2：$(F_{AB}=0.3,\\ h_B=30)$。\n- 用例 3：$(F_{AB}=0.9,\\ h_B=10)$。\n- 用例 4：$(F_{AB}=0.05,\\ h_B=20)$。\n\n要求的最终输出格式：\n您的程序应产生单行输出，其中包含一个方括号括起来的逗号分隔列表形式的结果，每个条目是一个布尔值，表示相应测试用例中是否发生级联传播（例如，$[True,False,True,False]$）。所有计算必须使用国际单位制 (SI)，如果出现角度，则必须以弧度为单位。不允许用户输入；程序应自成一体，并且只打印指定的最后一行。",
            "solution": "该问题是有效的，因为它在科学上基于热力学和化学动力学原理，参数和初始条件完整，是一个适定的问题，并且表述客观。它提出了一个标准的计算物理问题，没有任何明显的矛盾、歧义或事实不健全之处。\n\n解决方案涉及推导和数值积分一个包含两个耦合常微分方程 (ODE) 的系统，该系统模拟两个相邻电池电芯 $A$ 和 $B$ 的温度。推导基于热力学第一定律，积分使用显式前向欧拉法进行。\n\n### 1. 控制方程的推导\n\n模型的核心是应用于每个电芯 $i$ 的控制质量的热力学第一定律：\n$$C_i \\frac{d T_i}{d t} = \\dot{Q}_{\\text{in},i} - \\dot{Q}_{\\text{out},i} + \\dot{Q}_{\\text{gen},i}$$\n其中 $i \\in \\{A, B\\}$。我们将根据所提供的物理定律为每个电芯组合热量速率项。\n\n每个电芯的排性质流速率 $\\dot{m}_i$ 是其温度 $T_i$ 的函数：\n$$\\dot{m}_i(T_i) = k_0 \\exp\\left(-\\frac{E_a}{R\\,T_i}\\right)\\,H\\!\\left(T_i - T_{\\text{onset}}\\right)$$\n其中 $H(\\cdot)$ 是亥维赛德阶跃函数。如果 $T_i  T_{\\text{onset}}$，此表达式的值为 $0$。\n\n**电芯 A 的方程：**\n电芯 A 的温度变化率 $\\frac{dT_A}{dt}$ 由热量生成、输入和损失的平衡决定。\n\n-   **内部生热 ($\\dot{Q}_{\\text{gen},A}$):** 放热分解反应产生的热量与排气速率 $\\dot{m}_A$ 成正比。\n    $$\\dot{Q}_{\\text{gen},A} = H_{\\text{decomp}}\\,\\dot{m}_A(T_A)$$\n-   **热量输入 ($\\dot{Q}_{\\text{in},A}$):** 电芯 $A$ 从电芯 $B$ 的火焰接收热量。\n    $$\\dot{Q}_{\\text{in},A} = \\dot{Q}_{\\text{rad},B\\rightarrow A}^{\\text{flame}} = \\chi\\,\\left(\\eta \\,\\text{LHV}\\,\\dot{m}_B(T_B)\\right)\\,F_{BA}$$\n-   **热量输出 ($\\dot{Q}_{\\text{out},A}$):** 电芯 $A$ 通过与环境的对流以及与电芯 $B$ 的净辐射交换损失热量。\n    $$ \\dot{Q}_{\\text{out},A} = \\dot{Q}_{\\text{conv},A} + \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}} $$\n    对流损失由下式给出：\n    $$ \\dot{Q}_{\\text{conv},A} = h_A A_{\\text{face}}\\left(T_A - T_{\\infty}\\right) $$\n    从电芯 $A$ 到电芯 $B$ 的净表面辐射传热为：\n    $$ \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}} = \\sigma \\epsilon F_{AB} A_{\\text{face}}\\left(T_A^4 - T_B^4\\right) $$\n\n将这些项代入第一定律，并除以热容 $C_A$，我们得到 $T_A$ 的常微分方程：\n$$ \\frac{dT_A}{dt} = \\frac{1}{C_A} \\left( H_{\\text{decomp}}\\,\\dot{m}_A(T_A) + \\chi\\,\\eta \\,\\text{LHV}\\,\\dot{m}_B(T_B)\\,F_{BA} - h_A A_{\\text{face}}(T_A - T_{\\infty}) - \\sigma \\epsilon F_{AB} A_{\\text{face}}(T_A^4 - T_B^4) \\right) $$\n\n**电芯 B 的方程：**\n电芯 B 的推导是对称的。\n\n-   **内部生热 ($\\dot{Q}_{\\text{gen},B}$):**\n    $$\\dot{Q}_{\\text{gen},B} = H_{\\text{decomp}}\\,\\dot{m}_B(T_B)$$\n-   **热量输入 ($\\dot{Q}_{\\text{in},B}$):** 电芯 $B$ 从电芯 $A$ 的火焰和电芯 $A$ 的净表面辐射接收热量。从 $B$ 到 $A$ 的净辐射传热为 $\\dot{Q}_{\\text{rad},B\\rightarrow A}^{\\text{net}} = \\sigma \\epsilon F_{BA} A_{\\text{face}}(T_B^4 - T_A^4)$。这等于 $-\\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}}$。因此，B 通过表面辐射从 A 接收的热量为 $+\\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}}$。\n    $$ \\dot{Q}_{\\text{in},B} = \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{flame}} + \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}} = \\chi\\,\\left(\\eta \\,\\text{LHV}\\,\\dot{m}_A(T_A)\\right)\\,F_{AB} + \\sigma \\epsilon F_{AB} A_{\\text{face}}(T_A^4 - T_B^4) $$\n-   **热量输出 ($\\dot{Q}_{\\text{out},B}$):** 电芯 $B$ 仅通过与环境的对流损失热量。\n    $$ \\dot{Q}_{\\text{out},B} = h_B A_{\\text{face}}(T_B - T_{\\infty}) $$\n\n将这些项为电芯 $B$ 组合起来，并除以 $C_B$：\n$$ \\frac{dT_B}{dt} = \\frac{1}{C_B} \\left( H_{\\text{decomp}}\\,\\dot{m}_B(T_B) + \\chi\\,\\eta \\,\\text{LHV}\\,\\dot{m}_A(T_A)\\,F_{AB} - h_B A_{\\text{face}}(T_B - T_{\\infty}) + \\sigma \\epsilon F_{AB} A_{\\text{face}}(T_A^4 - T_B^4) \\right) $$\n鉴于 $F_{AB} = F_{BA}$，这两个方程构成了一个关于 $T_A(t)$ 和 $T_B(t)$ 的耦合系统。\n\n### 2. 数值积分方案\n\n该常微分方程组使用显式前向欧拉法进行数值求解，固定时间步长为 $\\Delta t = 0.05\\ \\mathrm{s}$。给定在时间 $t_n$ 的温度 $T_A^n$ 和 $T_B^n$，在下一个时间步 $t_{n+1} = t_n + \\Delta t$ 的温度计算如下：\n$$ T_A^{n+1} = T_A^n + \\Delta t \\cdot \\frac{dT_A}{dt}\\bigg|_{t_n} $$\n$$ T_B^{n+1} = T_B^n + \\Delta t \\cdot \\frac{dT_B}{dt}\\bigg|_{t_n} $$\n模拟从初始条件 $T_A(0)=900\\ \\mathrm{K}$ 和 $T_B(0)=300\\ \\mathrm{K}$ 开始，总时长为 $t_{\\text{end}} = 300\\ \\mathrm{s}$。\n\n### 3. 级联传播判据\n\n如果电芯 B 的状态连续满足两个条件达到最短持续时间，则认为级联已传播至该电芯。这两个条件是：\n1.  温度超过失控阈值：$T_B \\ge T_{\\text{runaway}}$，其中 $T_{\\text{runaway}} = 500\\ \\mathrm{K}$。\n2.  排气速率超过阈值：$\\dot{m}_B \\ge \\dot{m}_{\\text{thr}}$，其中 $\\dot{m}_{\\text{thr}}=1.0\\times 10^{-4}\\ \\mathrm{kg/s}$。\n\n这些条件必须连续保持至少 $\\tau_{\\text{sustain}} = 2.0\\ \\mathrm{s}$。\n\n在算法上，这是通过在每个时间步结束时检查电芯 B 的条件来实现的。一个计数器跟踪满足条件的连续步数。所需的连续步数是 $N_{\\text{sustain}} = \\text{ceil}(\\tau_{\\text{sustain}} / \\Delta t) = \\text{ceil}(2.0 / 0.05) = 40$。如果在任何一步不满足条件，计数器将重置为零。如果计数器达到 $N_{\\text{sustain}}$，则记录发生一次级联，该测试用例的模拟可以终止。如果在 $t_{\\text{end}}=300\\ \\mathrm{s}$ 内模拟完成而未满足该判据，则没有发生级联。\n\n解决方案程序为四个指定的测试用例中的每一个实现了此逻辑，产生一个布尔值结果，指示是否发生了级联传播。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the battery thermal runaway problem for the specified test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (0.7, 15),  # Case 1: (F_AB, h_B)\n        (0.3, 30),  # Case 2\n        (0.9, 10),  # Case 3\n        (0.05, 20), # Case 4\n    ]\n\n    results = []\n    for case in test_cases:\n        F_AB, h_B = case\n        cascade_occurred = run_simulation(F_AB, h_B)\n        results.append(cascade_occurred)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\ndef run_simulation(F_AB, h_B):\n    \"\"\"\n    Runs a single simulation for a given parameter set (F_AB, h_B).\n\n    Args:\n        F_AB (float): View factor between cells A and B.\n        h_B (float): Convective heat transfer coefficient for cell B.\n\n    Returns:\n        bool: True if cascade propagation occurs, False otherwise.\n    \"\"\"\n    # Constants\n    SIGMA = 5.670374419e-8  # Stefan-Boltzmann constant (W m^-2 K^-4)\n    R = 8.314               # Universal gas constant (J mol^-1 K^-1)\n\n    # Cell parameters\n    C = 1000.0              # Effective heat capacity (J/K)\n    epsilon = 0.8           # Emissivity\n    A_face = 0.02           # Radiating face area (m^2)\n    T_inf = 300.0           # Ambient temperature (K)\n    h_A = 15.0              # Convective coefficient for cell A (W m^-2 K^-1)\n\n    # Chemical-thermal parameters\n    eta = 0.9               # Combustion efficiency\n    LHV = 1.5e7             # Lower heating value (J/kg)\n    chi = 0.35              # Radiative fraction of combustion heat\n    H_decomp = 5.0e6        # Specific internal decomposition enthalpy (J/kg)\n    k0 = 0.5                # Arrhenius pre-exponential factor (kg/s)\n    Ea = 6.0e4              # Activation energy (J/mol)\n    T_onset = 420.0         # Venting onset temperature (K)\n\n    # Time integration parameters\n    dt = 0.05               # Time step (s)\n    t_end = 300.0           # Simulation duration (s)\n\n    # Cascade propagation criterion parameters\n    T_runaway = 500.0       # Runaway temperature threshold (K)\n    m_thr = 1.0e-4          # Mass flow threshold (kg/s)\n    tau_sustain = 2.0       # Sustain duration (s)\n    \n    # Derived from criterion parameters\n    num_sustain_steps = int(tau_sustain / dt)\n\n    # Initial conditions\n    T_A = 900.0\n    T_B = 300.0\n    \n    # State variables for cascade check\n    consecutive_steps_met = 0\n    num_steps = int(t_end / dt)\n\n    for _ in range(num_steps):\n        # Calculate venting rates m_dot at the beginning of the time step\n        m_dot_A = k0 * np.exp(-Ea / (R * T_A)) if T_A = T_onset else 0.0\n        m_dot_B = k0 * np.exp(-Ea / (R * T_B)) if T_B = T_onset else 0.0\n\n        # --- Calculate derivatives dT/dt for both cells ---\n\n        # Shared terms\n        F_BA = F_AB \n        \n        # Cell A derivative\n        Q_gen_A = H_decomp * m_dot_A\n        Q_flame_from_B = chi * (eta * LHV * m_dot_B) * F_BA\n        Q_conv_A = h_A * A_face * (T_A - T_inf)\n        Q_rad_net_A_to_B = SIGMA * epsilon * F_AB * A_face * (T_A**4 - T_B**4)\n        dT_A_dt = (Q_gen_A + Q_flame_from_B - Q_conv_A - Q_rad_net_A_to_B) / C\n\n        # Cell B derivative\n        Q_gen_B = H_decomp * m_dot_B\n        Q_flame_from_A = chi * (eta * LHV * m_dot_A) * F_AB\n        Q_conv_B = h_B * A_face * (T_B - T_inf)\n        # Net radiative transfer to B is the negative of net transfer from B.\n        # dT_B/dt includes +Q_rad_net_A_to_B\n        dT_B_dt = (Q_gen_B + Q_flame_from_A - Q_conv_B + Q_rad_net_A_to_B) / C\n\n        # --- Update temperatures using explicit Forward Euler ---\n        T_A += dT_A_dt * dt\n        T_B += dT_B_dt * dt\n\n        # --- Check for cascade propagation in cell B ---\n        # Recalculate m_dot_B with the new T_B to check the state at the end of the step\n        m_dot_B_new = k0 * np.exp(-Ea / (R * T_B)) if T_B = T_onset else 0.0\n        \n        if T_B = T_runaway and m_dot_B_new = m_thr:\n            consecutive_steps_met += 1\n            if consecutive_steps_met = num_sustain_steps:\n                return True  # Cascade detected, exit simulation for this case\n        else:\n            consecutive_steps_met = 0\n            \n    return False # Simulation finished without cascade\n\nsolve()\n```"
        }
    ]
}
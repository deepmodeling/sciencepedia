## 引言
在[数字系统设计](@article_id:347424)中，创建一个能正常工作的机器只是第一步。下一个，也往往是更具挑战性的目标，是使其高效、紧凑且优雅。这引出了一个根本性问题：给定一个功能正常的[有限状态机](@article_id:323352)，我们如何能找到执行完全相同任务的、最简洁的版本？这便是[摩尔机最小化](@article_id:348597)所要解决的核心问题，它是一种通过消除冗余来优化数字逻辑的强大技术。本文将深入探讨[状态最小化](@article_id:336923)这个优雅的世界。第一部分“原理与机制”将解析[状态等价](@article_id:325040)的核心理论，并逐步讲解用于寻找最小化状态机的[划分算法](@article_id:642246)。我们将探讨状态不可区分的含义，以及这一概念如何帮助我们进行系统性的简化。随后，“应用与跨学科联系”部分将展示这项技术的深远影响，从其在[计算机体系结构](@article_id:353998)和[数字电路设计](@article_id:346728)中的传统领域，延伸到合成生物学等令人惊奇的前沿领域。读完本文，您不仅将理解如何最小化[状态机](@article_id:350510)，还将领会到在任何复杂系统中识别其核心计算本质的普适原理。

## 原理与机制

想象一下，你建造了一台复杂的发条机械，一个由齿轮和杠杆构成的精美装置。在欣赏完自己的杰作后，一个烦人的念头浮现：它能更简单些吗？是否存在冗余的齿轮，即那些与其他部件功能完全相同、可以被合并或移除以使机器更优雅高效的部件？这正是[摩尔机最小化](@article_id:348597)的核心所在。我们在寻找一种内部的对称性，一种机器灵魂深处的冗余，它允许我们构建一个更小、更简单的机器，而从外部看，其行为方式却完全相同。

但两个内部状态“相同”究竟意味着什么？这个问题比你想象的要深刻。我们不能仅凭观察来判断。我们必须理解它们*做*什么。两个状态，我们称之为 $S_a$ 和 $S_b$，被认为是**等价**的，如果无论我们向机器输入何种输入序列，从 $S_a$ 或 $S_b$ 开始所产生的输出序列都是相同的。对于外部观察者来说，它们在任何意义上都是无法区分的。

检查所有可能的输入序列——其数量是无限的——似乎是一项即便不是不可能，也堪称艰巨的任务。这时，一个简单而强大的[算法](@article_id:331821)之美便体现出来。这是一个迭代细化的过程，如同雕塑家雕琢一块大理石，从粗糙的形状开始，逐步揭示内部的精细细节。

### 初步审视：可能性的划分

在我们开始这段无限旅程之前，让我们问一个简单得多的问题。如果两个状态要真正等价，它们必须满足的最基本、最直接的条件是什么？由于[摩尔机](@article_id:323235)的输出*只*取决于其当前状态，两个等价状态至少必须具有**相同的输出**。如果状态 $S_0$ 产生输出 $0$，而状态 $S_2$ 产生输出 $1$，它们绝不可能等价。它们已经未能通过第一个也是最简单的测试 [@problem_id:1962525]。它们可以被立即区分开来。

这个简单的观察是我们整个最小化旅程的起点。我们首先根据输出将机器的所有状态划分成组。所有输出为“0”的状态放入一个桶，所有输出为“1”的状态放入另一个桶，以此类推，对每一种可能的输出都进行划分。这个初始分组被称为**0-等价划分**，记为 $P_0$。例如，如果我们有状态 A、C、E 的输出为 0，状态 B、D、F 的输出为 1，那么我们的初始划分就是 $P_0 = \{\{\text{A, C, E}\}, \{\text{B, D, F}\}\}$ [@problem_id:1962493]。

这第一步有时能一举解决整个问题！考虑一个奇特的机器，其中每个状态都有唯一的输出。当我们应用划分规则时，每个状态都进入了自己的桶。没有任何两个状态是 0-等价的。细化过程在开始前就已结束，我们可以确定地说，该机器已经是最小形式。无需进一步探究 [@problem_id:1942676]。

同样至关重要的是，要看到这种“初步审视”是如何根据机器类型进行调整的。在[摩尔机](@article_id:323235)中，输出是状态的一个静态属性。而对于其“近亲”——**[米利机](@article_id:323448)**（Mealy machine），输出则同时取决于当前状态*和*当前输入。因此，区分的初始测试更为严格。要被分在同一个初始组中，两个[米利机](@article_id:323448)状态必须对*每一个*可能的输入都产生相同的输出。这个定义上的微小差异可能导致完全不同的初始划分，从而走向不同的最小化路径 [@problem_id:1962500]。

### 推论的级联：一个细化的过程

我们有了初始划分 $P_0$。我们知道，任何来自*不同*组的两个状态绝对不等价。但是，聚集在*同一*组内的状态呢？它们都真正等价吗？不一定。它们只通过了第一个、最基本的测试。

现在，巧妙的部分来了。我们引入下一层次的审视。假设状态 $S_a$ 和 $S_b$ 当前在同一个组里。我们检查当给机器一个输入，比如“0”时，会发生什么。$S_a$ 转移到一个后继状态，我们称之为 $S_a'$，而 $S_b$ 转移到 $S_b'$。要使 $S_a$ 和 $S_b$ *保持*等价，它们的后继状态 $S_a'$ 和 $S_b'$ 也必须是等价的。或者，在我们过程的当前阶段，$S_a'$ 和 $S_b'$ 至少必须属于我们当前划分 $P_0$ 中的同一个组。我们必须对所有可能的输入都进行此项检查。

如果对于某个输入，$S_a$ 和 $S_b$ 的后继状态落入了*不同*的组，那么我们就找到了区分它们的方法。它们现在可能有相同的输出，但经过一个输入后，它们的未来走向分化。它们因其可区分的后继状态而“有罪”。因此，它们必须被分到不同的组中。

我们对每个组中的所有状态对重复这个过程。检查完所有内容后，我们将得到一个新的、更精细的划分 $P_1$。然后我们再做一遍。我们检查 $P_1$ 各组中的状态，但这一次，我们要求它们的后继状态落入 $P_1$ 的同一个组中。这可能会导致进一步的分割，产生划分 $P_2$。我们持续进行这种细化——$P_0, P_1, P_2, \dots$——直到完成一整轮后没有任何状态被分割。此时，划分是稳定的。无论我们再应用多少次规则，它都不会改变。

这个最终的稳定划分给出了真正的等价类。最终划分的同一个组内的所有状态都是真正等价的。现在我们可以构建最小化机器了。对于每一组等价状态，我们创建一个新的状态。这个新状态的转移由原始状态的转移决定（所有原始状态都转移到同一个后继状态*组*）。而新状态的输出呢？它就是该组中所有状态从一开始就共享的那个共同输出 [@problem_id:1942688]。

有时，这个细化过程会揭示出机器美妙的、整体性的属性。可能有一整块状态，它们都具有相同的输出，并且碰巧只在它们之间进行转移。它们形成了一个封闭的社会。在这种情况下，无论你提供什么输入，它们都永远不会转移到一个具有不同输出的状态，因此它们永远无法被相互区分。整个区块保持完整，并在最小化机器中合并成一个单一的状态 [@problem_id:1942679]。

### 结构、对称性与周期性

退后一步看，我们可以看到这个抽象[算法](@article_id:331821)如何精妙地反映了[状态机](@article_id:350510)图的物理结构。想象一个由两个完全分离、不相交的子机组成的机器，它们恰好被记录在一张大表中。当我们运行最小化[算法](@article_id:331821)时，这个过程自然会尊重这些边界。来自第一个子机内一对状态的推论将永远只指向该子机内的另一对状态。问题巧妙地分解为两个独立的最小化问题，每个组件一个。该[算法](@article_id:331821)足够智能，能够看穿机器的不连通性 [@problem_id:1942690]。

在具有高度对称性的机器中，结构与等价性之间的这种联系变得更加深刻。考虑一个状态[排列](@article_id:296886)成一个巨大循环的机器，就像钟面上的数字。在这里，[状态等价](@article_id:325040)呈现出一种新的味道：**周期性**。两个状态是等价的，当且仅当从这两个状态开始循环遍历机器时所看到的输出模式是相同的。计算最小状态数的问题转变为寻找输出序列的[基本周期](@article_id:331322)问题。这可以将一个数字逻辑问题转变为一个有趣的数论谜题，将状态机与[最小公倍数](@article_id:301385)（LCM）等概念联系起来 [@problem_id:1942678]。最小化机器就是一个长度为该[基本周期](@article_id:331322)的循环。

### 超越同一性：不可区分性的灵活性

我们整个讨论都基于一个严格的定义：输出必须相同。但在现实的工程世界中，事情往往比较模糊。如果在某些状态和输入下，我们根本“不关心”输出是什么呢？这就导致了**不完全指定机**。

在这里，我们对等价的概念软化为**相容性**。如果不存在任何输入使得两个状态产生冲突的、指定的输出，那么它们就是相容的。如果一个状态输出“1”，而另一个状态的输出是“[无关项](@article_id:344644)”，那没问题——它们没有冲突。最小化[算法](@article_id:331821)大体相同，但结论略有不同。在我们的最终分析中，一对未被标记的状态不再证明严格的等价性，而是这种更灵活的相容性，为实际设计中的优化开辟了更多机会 [@problem_id:1942651]。

我们可以进一步推广这个想法。如果我们作为设计者，决定宣布某些输出对我们的目的来说是“足够好”的呢？想象我们有输出 $\{a, b, c, d\}$，但对于我们的应用来说，$a$ 和 $c$ 之间的差异无关紧要，$b$ 和 $d$ 之间的差异也无关紧要。我们可以在输出上定义一个**广义[等价关系](@article_id:298723)**。最小化[算法](@article_id:331821)以惊人的优雅处理了这种情况。我们只需调整第一步：我们的初始划分 $P_0$ 是通过将那些输出在我们新的、自定义规则下*等价*的状态分组而形成的。从那时起，级联推论的细化机制就和以前完全一样进行 [@problem_id:1370706]。

这揭示了[算法](@article_id:331821)核心的深刻、普适的真理。它不仅仅是一个匹配“0”和“1”的死记硬背的程序，而是一个用于确定**不可区分性**的强大引擎，而我们，作为系统的架构师，有权定义其含义。通过理解这一原理，我们从仅仅遵循一个配方，转变为真正领悟支配[有限状态机](@article_id:323352)世界的对称与信息之舞。
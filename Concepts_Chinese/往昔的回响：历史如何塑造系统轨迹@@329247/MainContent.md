## 引言
我们为什么能预测开关的翻转，却无法预测猫的念头？答案在于系统的一个基本属性：记忆。有些过程，比如开关，是“无记忆的”——它们的未来只取决于现在。而另一些，比如猫，则为其过去所萦绕，其未来轨迹是其整个历史的函数。这种无记忆（马尔可夫）和历史依赖（非马尔可夫）系统之间的区别是现代科学中最重要的概念之一，然而这种“记忆”的起源和含义往往是微妙而深刻的。本文旨在回答一个根本性问题：系统的过去如何塑造其未来？文章将厘清什么构成了系统记忆，它来自何处，以及为什么它并非一个小众奇特现象，而是复杂现实的核心特征。首先，在“原理与机制”一章中，我们将剖析核心概念，探索[滞后现象](@article_id:332240)乃至我们自身的不完全观测等现象如何创造出记忆的幻象或现实。然后，我们将看到如何通过[状态增广](@article_id:301312)这一优雅思想来驯服这种记忆。接下来，“应用与跨学科联系”一章将带领我们游览物理学、生物学和工程学领域，揭示这单一的历史依赖性思想如何解释从蛋白质行为到迷宫中老鼠的导航，再到[自动驾驶](@article_id:334498)汽车的设计等一切事物。

## 原理与机制

想象一下，你正试图预测两个不同“系统”的下一步行动：一个简单的电灯开关和你的宠物猫。对于电灯开关来说，任务非常简单。如果它处于关闭状态，你按下它之后的下一个状态将是开启。它当前的状态——开启或关闭——就是你需要知道的全部信息。今天它被按了多少次的历史完全无关紧要。现在，想想那只猫。如果它现在正舒适地趴在你腿上打呼噜，它下一步会做什么？它可能会继续打呼噜，也可能突然决定你的手是一个可以攻击的玩具。如果你知道它最近的历史，你的预测可能会好一些：它刚吃完饭吗？是不是刚才有巨大的噪音吓到了它？这只猫，和开关不同，似乎有“记忆”。它的未来与其过去紧密相连。

这个简单的区别是所有科学中最基本的分类之一的核心：有[记忆系统](@article_id:336750)和[无记忆系统](@article_id:329018)之间的差异。物理学家和数学家对这种无记忆特性有一个更精确的名称。他们称之为**[马尔可夫性质](@article_id:299921)**，以俄罗斯数学家 Andrey Markov 的名字命名。如果一个过程的未来演化*只*取决于其当前状态，那么这个过程就是**[马尔可夫过程](@article_id:320800)**。过去是无关紧要的；预测未来所需的所有信息都封装在“现在”之中。违反此性质的系统被称为**非马尔可夫系统**——它有记忆。它过去的轨迹萦绕着其未来的脚步。

但这个简单的定义背后隐藏着一个充满美妙微妙的世界。究竟什么构成了“当前状态”？而这种神秘的“记忆”属性又从何而来？当我们顺着这条线索探寻时，我们会发现它连接着从你电脑中的[逻辑门](@article_id:302575)到我们自身基因的动态等一切事物。

### 遗忘的幻觉

乍一看，许多系统似乎是无记忆的。考虑一个雷达系统正在追踪一架无人机。该系统接收[笛卡尔坐标](@article_id:323143) $(x_1(t), x_2(t))$，并为了其内部计算，将它们转换为[极坐标](@article_id:319829) $(r(t), \theta(t))$ [@problem_id:1756723]。让我们分别来看这两个输出。径向距离 $r(t) = \sqrt{x_1(t)^2 + x_2(t)^2}$ 是一个简单的瞬时计算。要知道无人机*现在*离原点的距离，你只需要知道它*现在*的坐标。到 $r(t)$ 的映射是完全无记忆的。

但角度 $\theta(t)$ 呢？你可能会认为那也是一个简单的计算：只需使用反正切函数。但这里有一个陷阱。为了使追踪平滑，系统要求角度 $\theta(t)$ 必须是时间的*连续*函数。想象一下无人机从 $(1, 0)$ 开始，我们可以说 $\theta = 0$。然后它飞了一个完整的圆圈回到了完全相同的位置 $(1, 0)$。瞬时的反正切计算会再次得出 $\theta=0$。但是，为了让角度能够连续追踪无人机的运动，它的值现在必须是 $2\pi$ 弧度（或 $360^\circ$）。如果它再绕一圈，值将是 $4\pi$。要知道角度是 $2\pi$ 而不是 $0$，系统*必须*有无人机所走路径的记忆。对连续性的简单要求迫使系统记住了其整个旋转历史。

这种系统输出依赖于其输入历史的现象称为**[滞后现象](@article_id:332240)**。它随处可见。[施密特触发器](@article_id:345906)是一种常见的电子元件，它是一个绝佳的例子 [@problem_id:1959196]。它就像一个具有两个阈值的“懒惰”电灯开关。要将其置为“关”，输入电压必须升至一个高阈值 $V_{T+}$ 之上。但要将其重新置为“开”，电压必须一直降至一个低阈值 $V_{T-}$ 之下。如果电压介于这两个阈值之间，输出会是什么？它既可以是开也可以是关！唯一知道的方法是问：电压是从上方降到这里的，还是从下方升到这里的？输出取决于其过去。这种历史依赖性正是一个状态的定义，这就是为什么工程师将这个看似简单的设备归类为**[时序电路](@article_id:346313)**——一种有记忆的电路。

这种电子[滞后现象](@article_id:332240)是在像铁这样的材料中看到的更宏大物理现象的微观回响。当你对一块铁施加[磁场](@article_id:313708) $H$ 时，它会被磁化（磁化强度为 $M$）。但如果你随后移除[磁场](@article_id:313708)，铁会保持部分磁化——它变成了一块[永磁体](@article_id:368180)。$M$ 和 $H$ 之间的关系不是一条简单的直线，而是一个环路，即著名的**磁滞回线**。对于同一个 $H$ 值，你可以有非常不同的 $M$ 值，这取决于你施加[磁场](@article_id:313708)的历史。这种根本上的非线性、多值的记忆，是为什么像 Kramers-Kronig 关系这样优雅的材料响应线性理论对此类材料会失效的原因 [@problem_id:1802900]。线性假设对给定输入有单一、唯一的响应，但[滞后现象](@article_id:332240)打破了这一假设。

### 记忆的剖析

如果记忆如此普遍，它从何而来？事实证明，一个系统表现出记忆有几个关键原因。

#### 源于不完全观测的记忆

有时，记忆是一种因未看到全局而产生的错觉。想象一个真正的[马尔可夫过程](@article_id:320800)，在一副四张牌的所有可能[排列](@article_id:296886)方式的空间 $S_4$ 上的[随机游走](@article_id:303058) [@problem_id:730496]。状态是这四张牌的精确顺序。在每一步，我们随机交换两张相邻的牌。这个过程是无记忆的：牌组的下一个构型只取决于当前的构型。

现在，我们不追踪完整的牌组顺序，而只追踪一个数字：即“逆序”的数量，也就是顺序“错误”的牌对的数量。我们称这个数字为 $Y_t$。过程 $Y_t$ 是马尔可夫的吗？事实证明它不是。人们可以找到两种不同的交换历史，它们都导致了一个具有两个逆序的状态（$Y_t = 2$）。然而，从这同一个状态出发，达到三个逆序状态（$Y_{t+1} = 3$）的概率对于这两种历史是不同的。为什么？因为即使逆序的*数量*相同，牌组的底层*构型*却是不同的。通过只观察逆序的数量，我们丢失了信息。过程的历史包含了关于这个隐藏信息的线索，因此历史突然变得与预测未来相关。记忆作为我们所忽略信息产生的幻影而出现。

#### 源于游戏规则的记忆

在其他情况下，记忆被明确地构建在支配系统演化的规则中。一个绝佳的现代例子来自我们使用**[随机梯度下降](@article_id:299582) (SGD)** 训练人工智能模型的方式 [@problem_id:1295270]。在这个过程中，模型的参数 $\theta$ 通过一次向其展示一个数据点来迭代更新。

如果我们通过**[有放回抽样](@article_id:337889)**来选择每个数据点——就像每次从一副牌中抽出一张再放回去——那么在第 $n$ 步选择的数据点完全独立于所有过去的选择。模型的下一个状态 $\theta_n$ 只取决于其当前状态 $\theta_{n-1}$ 和这个新的、独立的随机选择。这个过程是完全马尔可夫的。

但如果我们使用**[无放回抽样](@article_id:340569)**呢？我们将数据集洗牌一次，然后逐一遍历直到用完，然后重新洗牌开始一个新的“周期”。现在，在第 $n$ 步选择的数据点至关重要地取决于在步骤 $1, 2, \dots, n-1$ 中已经使用了哪些点。选择的历史直接约束了未来。这个过程有了记忆，并且是非马尔可夫的。系统演化的规则本身就取决于其过去。

这种明确的历史依赖性可能更加复杂。在现代计算生物学中，基因表达的模型可能假设今天一个基因的[转录](@article_id:361745)速率取决于过去几小时内某些蛋白质的浓度 [@problem_id:2427303]。这可以建模为在过去一个时间窗口内蛋白质浓度函数的积分。系统的“速度”不再由其当前状态决定，而是由其近期过去的加权平均值决定。

也许最极端的例子来自[计算化学](@article_id:303474)中的一种称为**[元动力学](@article_id:355735)**的方法 [@problem_id:2655472]。科学家使用这种技术来模拟分子如何改变形状，例如蛋白质如何折叠。问题在于模拟可能会长时间卡在稳定的构型中。为了加速这一过程，[元动力学](@article_id:355735)被特意设计成具有记忆性。当模拟探索可能形状的景观时，它会留下一串“虚拟山丘”。这条轨迹形成一个[偏置势](@article_id:347784) $V(s,t)$，它实际上是系统曾经到过的所有位置的总和。这个偏置会阻止系统重访旧地，并推动它探索新的、未见的构型。这个过程是极其非马尔可夫的，其记忆不是一个缺陷，而是设计的核心特征！

### 重建秩序：[状态增广](@article_id:301312)的力量

如果这么多重要的系统都有记忆，科学家们究竟是如何对它们进行建模的？难道我们注定要为每一次预测都追踪整个宇宙不断增长的历史吗？幸运的是，有一个极其优雅的出路：如果当前状态不够用，那就把“现在”的范围扩大。这就是**[状态增广](@article_id:301312)**的思想。

让我们回到[无放回抽样](@article_id:340569)的 SGD 例子。参数 $\theta_n$ 的过程是非马尔可夫的。“缺失的信息”是在当前周期中已经使用过的数据点集合。如果我们定义一个包含此信息的新增广状态会怎样？让我们的新状态为 $Y_n = (\theta_n, \text{已用数据点集合})$。现在，$Y_n$ 的过程是马尔可夫的吗？是的！要确定下一个状态 $Y_{n+1}$，我们只需要当前状态 $Y_n$。从 $\theta_n$ 和已用点的集合中，我们可以确定下一个数据点的允许选择，从而确定下一个状态 $Y_{n+1}$ 的[概率分布](@article_id:306824)。记忆并没有消失；它被吸收并编码到一个更丰富、更全面的“现在”的定义中。

这个强大的思想一再出现。在一个其演化依赖于其过去加权平均值的过程中（如带有指数[记忆核](@article_id:315500)的 RNA 速度例子），我们有时可以定义一个[辅助变量](@article_id:329712)来追踪这个[移动平均](@article_id:382390)值。通过将这个变量添加到我们的状态中，增广后的系统就变成了一个简单的、无记忆的[马尔可夫过程](@article_id:320800)，只是在一个更高维度的空间中 [@problem_id:2427303]。同样的原理也适用于一个具有自适应转移规则的过程，其中规则本身由过去的行为决定 [@problem_id:1295261]。通过将定义规则的参数包含为状态的一部分，我们可以再次恢复[马尔可夫性质](@article_id:299921)。

这揭示了一个深刻的真理：我们所感知的“记忆”往往只是我们对系统“状态”的定义不完整的标志。通过巧妙地扩展我们对“现在是什么”的概念，以包含相关的过去回响，我们常常可以驯服非马尔可夫这头猛兽，并用简洁、强大的[马尔可夫动力学](@article_id:381029)语言来描述它。当然，挑战在于这个增广状态有时可能会变得异常庞大，甚至无限维，就像[元动力学](@article_id:355735)的情况一样 [@problem_id:2655472]，但这个原理仍然是现代科学的基石。

### 时钟不是记忆

最后，我们必须做出最后一个关键的区分。一个具有时变规则的系统是一个[有记忆的系统](@article_id:336750)吗？考虑一个微[生物种群](@article_id:378996)，其出生率随着昼夜 24 小时周期而波动，这可能是由外部光源驱动的 [@problem_id:1342696]。下午 3 点出生的概率与凌晨 3 点出生的概率是不同的。游戏规则随着时钟而改变。

这是否意味着这个过程有记忆？不。要预测下一分钟的种群数量，你只需要知道两件事：当前的种群数量和当前的时间。你不需要知道昨天，甚至一小时前的种群数量。这是一个**非时齐[马尔可夫过程](@article_id:320800)**。它是无记忆的，但其规则不是静止的。这与真正的[非马尔可夫过程](@article_id:362183)不同，后者的演化取决于状态的过去*轨迹*，而不仅仅是通用时钟上的[绝对时间](@article_id:328753)。时钟不是记忆。记忆是系统自身独特故事的记录。正是这种对其自身历史的依赖，才使一个系统真正变得有趣、复杂和富有生命力。
## 引言
一个波动的系统在某一特定状态下会停留多长时间？从反应釜中化学物质的浓度到等离子体中的能量，这个关于“逗留时”的问题在整个科学和工程领域都是基础性的。对于可预测的、平滑的系统，答案是直观的：人们可以简单地将处于该状态的概率随时间累加。但是，当系统的路径像水中花粉的舞蹈一样，无限曲折且混乱时，会发生什么呢？在这个布朗运动的世界里，简单的方法失效了，产生了一个悖论：粒子似乎不断地访问一个位置，却又在那里实际花费零时间。

本文直面这一挑战，用一个强大的数学工具解决了这个悖论。它探讨了支配[随机过程](@article_id:333307)如何占据空间的原理，以及允许我们量化这种行为的公式。通过从直观思想到更抽象概念的引导，您将对随机性隐藏的结构有更深的理解。以下各节将引导您完成这段旅程。

## 原理与机制

假设您正在追踪一个随时间波动的量——也许是受限等离子体中的能量，或是反应釜中化学物质的浓度。您可能想知道，在它衰减消失之前，这个量花费在某个[临界阈值](@article_id:370365)之上的总[时间平均](@article_id:331618)是多少。如果这个过程“行为良好”，即其路径相对平滑，那么答案会非常简单。系统在某个状态下花费的[期望](@article_id:311378)总时间，就是它在每个时刻处于该状态的概率之和——或者更精确地说，是积分。您可以这样想：如果在时间 $t=1$ 时，处于阈值之上的概率是 $0.5$，在时间 $t=2$ 时是 $0.2$，这些概率会累加到总的[期望](@article_id:311378)时间预算中。通过对整个持续时间内的这些概率求和，您就得到了花费在阈值之上的平均总时间 [@problem_id:1462859]。这是一个非常直观的想法，一种用于计算体积的[卡瓦列里原理](@article_id:360835)的概率论版本。

但是，当过程不那么“行为良好”时会发生什么呢？如果它描绘的路径根本不平滑，而是无限曲折和混乱呢？这并非某种奇异的数学幻想；它是一粒尘埃在阳光下被无数空气[分子碰撞](@article_id:297785)而舞蹈的真实写照。这就是**布朗运动**的世界。

### 曲折路径的悖论

想象一下尝试为布朗粒子回答同样的问题。粒子在特定位置，比如说 $x=0$ 处，花费了多少时间？布朗粒子的路径是如此不规则，充满了瞬时的曲折，以至于它从未真正在任何地方停留。它在*任何单点*花费的时间，惊人地，是零。粒子无处不在，又无处所在。

这给我们带来了一个悖论。粒子显然在点 $x=0$ *附近*移动。它一次又一次地穿过它，在任何有限的时间区间内穿过无数次。感觉上它一定在那里花费了*一些*时间，或者至少它的存在应该有某种可测量的后果。简单地回答“零”感觉像是我们错过了整个故事。如果粒子从不驻留，我们如何量化它在特定水平上的“存在”呢？

这时，一个深刻的数学思想应运而生：**[局部时](@article_id:373306)**。如果我们无法测量*在*一个点上花费的时间，也许我们可以测量在其周围一个微小邻域内花费的时间，然后看看当我们把这个邻域缩小到零时会发生什么。

### 时间的密度

假设我们想测量在水平 $x$ 处的[局部时](@article_id:373306)。我们可以从测量粒子在一个微小区间 $[x-\varepsilon, x+\varepsilon]$ 内花费的总时间开始。我们称这个时间为 $T_{\varepsilon}$。当然，当我们通过减小 $\varepsilon$ 来收缩这个区间时，这个时间 $T_{\varepsilon}$ 也会趋于零。但巧妙之处在于：我们考察这个时间的*密度*会怎样？也就是说，我们考察在区间内花费的时间与区间长度本身的比值： $\frac{T_{\varepsilon}}{2\varepsilon}$。

事实证明，对于布朗运动，当我们取极限 $\varepsilon \to 0$ 时，这个比值会收敛到一个明确的、非零的值。这个极限就是我们所说的过程在时间 $t$ 前于点 $x$ 处的**[局部时](@article_id:373306)**，记为 $L_t^x$ [@problem_id:2990252] [@problem_id:2982393]。
$$
L_t^x = \lim_{\varepsilon\downarrow 0} \frac{1}{2\varepsilon} \int_0^t \mathbf{1}_{\{|B_s-x| \lt \varepsilon\}}\,ds
$$
注意这意味着什么。[局部时](@article_id:373306)不是传统意义上以秒或小时计量的“时间”。它是一种*密度*。它的单位是时间每单位长度。它告诉我们过程在点 $x$ 附近徘徊的强度。高的局部时意味着粒子在 $x$ 的紧邻区域来回穿梭了很长时间。

这个时间密度的概念揭示了[随机过程](@article_id:333307)理论中最优雅的公式之一：**逗留时公式**。它表明，对于任何合理的函数 $f(x)$，我们有：
$$
\int_0^t f(B_s)\,ds = \int_{-\infty}^{\infty} f(x) L_t^x \,dx
$$
这个公式是连接两个世界的神奇桥梁 [@problem_id:2990252]。左边是关于*时间*的积分。它可能代表总累积成本、信号，或某个依赖于粒子历史位置的其他量。右边是关于*空间*的积分。它说，你可以通过访问空间中的每个点 $x$，检查那里的函数值 $f(x)$，并用局部时 $L_t^x$——即过程在该点的“存在”度量——对其进行加权，来计算出同样的总[累积量](@article_id:313394)。这是一个深刻的[变量替换](@article_id:301827)，从时钟的领域转换到了尺子的领域。

### 作为过程的局部时

到目前为止，我们把[局部时](@article_id:373306) $L_t^x$ 看作一个数字场，每个 $(t, x)$ 对都对应一个数。但我们也可以固定一个水平，比如说 $x=0$，然后观察该水平的局部时 $L_t^0$ 如何随时间 $t$ 演变。它本身是怎样一个过程呢？

另一个优美的数学成果，**[田中公式](@article_id:381260)**，给了我们答案。该公式提供了粒子与点 $x$ 的距离 $|B_t - x|$ 的分解。它指出这个距离由两部分组成：一个纯粹随机的、“曲折”的部分（一个随机积分），以及另一项——而这一项恰好就是局部时 $L_t^x$ [@problem_id:2990252] [@problem_id:2982393]。
$$
|B_t-x| = |B_0-x| + \int_0^t \operatorname{sgn}(B_s-x)\,dB_s + L_t^x
$$
由此我们了解到，对于一个固定的 $x$，[局部时](@article_id:373306) $t \mapsto L_t^x$ 是一个连续的、非减的过程。它就像一个计数器。这个计数器何时跳动呢？[田中公式](@article_id:381260)以及局部时的根本思想，都蕴含了一个关[键性](@article_id:318164)质：**在 $x$ 处的局部时仅当过程位于 $x$ 时才增加** [@problem_id:2982351]。它是一个仅当粒子恰好在门口时才会转动的旋转栅门。如果粒子有一段时间远离 $x$，那么它在 $x$ 处的局部时在此期间保持不变。这也意味着，如果过程在时间 $t$ 之前从未达到水平 $a$，那么它的[局部时](@article_id:373306) $L_t^a$ 必定为零 [@problem_id:2982351]。

为了获得具体的感受，我们甚至可以计算*[期望](@article_id:311378)*[局部时](@article_id:373306)。对于从零开始的布朗运动，在时间 $t$ 前于原点累积的平均[局部时](@article_id:373306)为 $\mathbb{E}[L_t^0] = \sqrt{\frac{2t}{\pi}}$ [@problem_id:2982393]。它随时间的平方根增长，这是[扩散过程](@article_id:349878)的一个标志。

最后，我们不必担心这个“[局部时](@article_id:373306)”是某种定义不清的幻象。尽管不同的数学构造可能会描述它，但理论提供了强有力的唯一性保证。对于任何固定的水平 $a$，过程 $t \mapsto L_t^a$ 本质上是唯一的。更强大的是，存在整个[局部时](@article_id:373306)场 $(t, a) \mapsto L_t^a$ 的一个版本，它是联合连续的——一个平滑演变的景观——并且这个“好的”版本本身是唯一的 [@problem_id:2985713]。

### 统一原理：[二次变分](@article_id:301123)

我们已经看到，[局部时](@article_id:373306)是路径“曲折性”的结果。如果我们能关掉这种曲折性会怎样？考虑两个不同的粒子 $X_t$ 和 $Y_t$，它们的运动由具有不同漂移项但随机扰动来自*完全相同*噪声源（相同的布朗运动 $W_t$）的随机微分方程描述。它们的差 $U_t = X_t - Y_t$ 在水平 $0$ 处的局部时是什么？

每当两个粒子相遇时，我们有 $U_t = X_t - Y_t = 0$。因为它们由相同的噪声驱动，且其[扩散系数](@article_id:307130) $\sigma$ 是连续的，它们在那一刻的随机[抖动](@article_id:326537)是相同的，意味着它们的差的随机部分是 $\sigma(X_t)dW_t - \sigma(Y_t)dW_t = 0$。在它们相遇的瞬间，它们的差 $U_t$ 停止了摆动。它变得局部平滑。一个没有局部摆动的过程无法累积[局部时](@article_id:373306)。因此，$U_t$ 在零点的局部时恒为零：$L_t^0(U) \equiv 0$ [@problem_id:2970992]。这个优美的对比证实了：[局部时](@article_id:373306)是随机性局部强度的直接度量。

这引出了宏大而统一的原理。[随机过程](@article_id:333307)真正的“时钟”不是你手腕上的表（$ds$），而是它自身累积随机性的内在度量。这被称为**[二次变分](@article_id:301123)**，记为 $\langle X \rangle_t$。对于一个过程 $dX_t = \dots + \sigma(X_t)dW_t$，这个随机时钟以 $d\langle X \rangle_t = \sigma(X_t)^2 ds$ 的速率滴答作响。对于[标准布朗运动](@article_id:376156)，$\sigma=1$，所以它的随机时钟与普通时间同步，$d\langle B \rangle_t = ds$。

最一般形式的逗留时公式揭示了这个真相：
$$
\int_0^t f(X_s)\,d\langle X\rangle_s = \int_{-\infty}^{\infty} f(x) L_t^x(X)\,dx
$$
局部时 $L_t^x$ 是逗留测度相对于过程的*随机*时间，而非普通时间的密度 [@problem_id:2982351] [@problem_id:2990252]。这是深层的联系。一个过程在点 $x$ 累积局部时，当且仅当它的[二次变分](@article_id:301123)——它的随机时钟——在过程位于 $x$ 时正在滴答作响。在我们比较的例子中，$U_t$ 的随机时钟在 $U_t=0$ 时停止了，所以那里无法累积[局部时](@article_id:373306)。

这个概念不仅仅是抽象的。它出现在物理模型中，例如，作为限制粒子所需的力。使一个[扩散](@article_id:327616)粒子从边界反射所需的“推力”，与粒子在该边界上累积的[局部时](@article_id:373306)直接相关 [@problem_id:2993562]。从一个关于平均时间的简单直观问题出发，我们已经深入到[随机过程](@article_id:333307)运行的核心，揭示了一个隐藏的结构——局部时——它优雅地量化了它们混沌舞蹈的本质。
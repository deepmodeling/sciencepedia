## 引言
[异步电路](@article_id:348393)在没有中央时钟的情况下运行，提供了一种基于事件处理信息的自然而高效的方式。然而，它们的事件驱动特性使其行为难以描述和设计。这就产生了一个知识鸿沟：我们如何才能系统地将[期望](@article_id:311378)的行为——一个能够记忆、排序动作或解决冲突的系统——转化为可靠的硬件设计？答案在于一种名为流程表的基础设计工具，它像一张精确的地图，描绘了电路的反应逻辑。本文将揭开这一强大概念的神秘面紗，从其最详细的形式——[原始流程表](@article_id:347369)——开始。第一章“原理与机制”将解析流程表的结构，定义状态、转换以及支配它们的基本规则。随后，“应用与跨学科联系”将展示如何应用这些原理来创建现代数字系统的构建模块，从简单的存储器到复杂的通信协议。

## 原理与机制

想象一个没有指挥家的世界，一个交响乐团中每位音乐家都不是看着指挥棒演奏，而是通过聆听邻座的音符来演奏。这就是[异步电路](@article_id:348393)的世界。与它们的同步“表亲”——[同步系统](@article_id:351344)——踏着主时钟的节拍整齐划一地前进不同，异步系统是事件驱动的。它们做出反应、它们进行响应，仅在输入发生变化时才采取行动。这使得它们的行为更难描述，但同时也揭示了一种更自然、更基本的信息处理方式。

要在这个世界中导航，我们需要一张地图。我们的地图不是地理地形图，而是逻辑行为图。它被称为**流程表 (flow table)**。这个看似简单的图表是理解[异步电路](@article_id:348393)工作原理的关键。但在展开这张地图之前，我们必须遵守一条至关重要的规则，一种被称为**基本模式 (fundamental-mode)** 模型的简化方法：输入一次只改变一个，并且在下一次改变到来之前，电路总有足够的时间在一次改变后稳定下来 [@problem_id:1953709]。这条规则避免了多个事件同时发生所带来的混乱，并允许我们逐步推理电路的行为。

### 流程表：反应式世界的地图

流程表看似简单。行代表电路的内部**状态 (states)**——它对过去发生事件的记忆。列代表其外部输入的所有可能组合。在任何行（当前状态）和列（当前输入）的[交叉](@article_id:315017)点，都有一个条目告诉我们两件事：电路将转移到的**下一个状态 (next state)**，以及它将产生的**输出 (output)**。

把它想象成一本奇特魔法建筑的指南。每个房间都是一个状态。每个房间的墙上都有对应不同天气状况（输入）的标志。如果你在‘蓝色房间’（当前状态）并看到‘下雨’标志（输入），指南条目会告诉你：‘去往“绿色房间”（下一个状态）并穿上外套（输出）。’

从一个状态到另一个状态的这种转换过程是异步动态的核心。当电路处于静止状态时，称其处于**稳定状态 (stable state)**。在我们的指南中，这就像一个条目写着：“如果你在蓝色房间并且看到‘晴天’标志，就待在蓝色房间。”在流程表中，我们通过圈出状态或显示下一个状态与当前状态相同来表示这一点。对于任何给定的输入，电路将无限期地保持在这个稳定状态。

但是当输入改变时会发生什么？电路突然进入一个**非稳定状态 (unstable state)**。指南现在指向另一个房间。电路必须遵循这个指令，转换到指定的下一个状态。这个转换可能直接导致一个新的稳定状态，也可能触发一系列内部状态变化，就像穿过一系列走廊，直到最终到达一个新的休息点——一个新的稳定状态——[@problem_id:1953748]。

让我们追踪一段短暂的旅程 [@problem_id:1967909]。假设一个电路在输入为`00`时舒适地停留在状态`S0`，输出 $z$ 为`0`。现在，输入变为`01`。状态`S0`在输入`01`下的流程表条目指向一个新状态`S1`。电路转换到`S1`。我们再次检查表格：对于状态`S1`，输入`01`下的条目是`S1`本身。这是一个稳定状态！旅程结束了。电路已经在`S1`稳定下来，其新的稳定输出是表格为该条件指定的任何值。这种从稳定经过非稳定再到新的稳定的舞蹈，是异步机的基本节奏。

### [原始流程表](@article_id:347369)：最详尽的地图

要开始设计一个电路，我们从最详尽的地图开始：**[原始流程表](@article_id:347369) (primitive flow table)**。这里的“原始 (primitive)”一词意味着基础的或不可简化的。其定义性特征是一条严格的规则：**每一行只能有一个稳定状态** [@problem_id:1911051]。

这意味着每一行都描述了电路生命周期中一个单一、独特的稳定条件。这就像为我们建筑中的每一个休息点都准备了一页独立的、专门的说明。状态‘A’可能是电路在输入为`01`时休息的地方，而状态‘B’是它在输入为`11`时休息的地方。它们在表格中各自占有独立的行。

这条规则带来一个有趣的结果。如果某一行由其在输入`01`下的稳定性来定义，那么我们在输入`10`的列中应该写什么呢？根据我们的[基本模式](@article_id:344550)假设，输入不能在一步之内从`01`变为`10`，因为这需要两个比特同时改变。这种转换是“非法的”。因此，我们无需指定会发生什么。该条目是一个**[无关项](@article_id:344644) (don't care)**，通常用破折号（`--`）标记 [@problem_id:1953709]。我们的地图只是没有为这些禁止的旅程提供路径。

### 捕获历史的艺术：从文字构建表格

这正是这个概念真正美妙之处的体现。流程表不仅仅是一个枯燥的规范；它是一种捕获故事的方式，一首关于行为的逻辑诗篇。我们该如何书写它呢？

让我们从一个简单的例子开始：一个简单的反相器，其输出 $z$ 总是与输入 $x$ 相反，即 $z = \overline{x}$。要构建其[原始流程表](@article_id:347369)，我们问：这个电路需要哪些稳定条件？
- 当输入保持在 $x=0$ 时，输出必须是 $z=1$。这需要一个稳定状态，我们称之为`S0`，它存在于输入为`0`时。
- 当输入保持在 $x=1$ 时，输出必须是 $z=0$。这需要另一个稳定状态，`S1`，它存在于输入为`1`时。
就是这样。我们只需要两个稳定状态就能完全描述这种行为 [@problem_id:1953717]。[原始流程表](@article_id:347369)会显示，从状态`S0`，输入变为`1`会将电路送到`S1`。从`S1`，输入变为`0`会将其送回`S0`。

现在来看一个更微妙的故事。让我们设计一个电路，其输出 $z$ 仅当输入 $x_1$ 为 `1` 且输入 $x_2$ 刚刚从 `0` 变为 `1` 时才变为 `1`。在所有其他时候，$z$ 必须为 `0`。

想一想。输出不仅取决于当前输入，还取决于它们的**历史**。输入组合 $x_1x_2=11$ 必须根据其到达方式产生不同的输出。这就是‘状态’存在的本质：它是电路的记忆。

让我们追踪逻辑来构建表格 [@problem_id:1953720]：
1.  我们需要为所有 $z=0$ 的“平淡”条件设置稳定状态。这为每个输入组合 `00`、`01`、`10` 提供了一个状态，以及当没有特殊事件发生时，为`11`提供了一个状态。到目前为止共有四个状态。
2.  现在，考虑关键事件。电路停留在对应于 $x_1x_2=10$ 的稳定状态（我们称之为状态`S_TEN`）。其输出为 $z=0$。
3.  突然，$x_2$ 从 `0` 翻转到 `1`。现在输入是 $x_1x_2=11$。电路必须产生一个 $z=1$ 的输出。为此，它必须进入一个新状态，我们称之为`S_PULSE`，其定义特征是其输出为`1`。
4.  但是这个 $z=1$ 的输出是瞬时的。如果输入保持为`11`，输出应返回到`0`。这意味着`S_PULSE`不可能是输入为`11`时的稳定状态。它必须是一个瞬态。流程表必须指定，从`S_PULSE`开始，当输入仍为`11`时，电路立即转换到另一个状态，比如`S_ELEVEN`，该状态对于输入`11`是*稳定*的，并且输出为 $z=0$。

你看到其中的精妙之处了吗？为了记住某个特定转换刚刚发生，我们创造了一个临时状态`S_PULSE`，它只存在片刻，用以生成所需的输出，然后才稳定到该输入的正常静止状态。状态不仅仅是一个标签；它是记忆的物理体现。总而言之，这个看似简单的行为需要至少五个不同的状态才能被正确描述。

### 流程表的类型：[摩尔机](@article_id:323235)与[米利机](@article_id:323448)

在填写流程表时，我们可能会注意到两种不同的指定输出的方式。这种区别产生了两种“类型”的状态机。

-   在**摩尔（Moore）机**中，输出仅是当前状态的函数。如果你在‘红色房间’，灯光总是红色的，无论外面的天气如何。在流程表中，这意味着给定行中所有指定的输出条目都是相同的。
-   在**米利（Mealy）机**中，输出取决于当前状态*和*当前输入。在‘红色房间’里，晴天时灯光可能是红色的，但下雨时可能是蓝色的。在流程表中，当同一行内的输出在不同列之间有所不同时，就表示了这一点 [@problem_id:1953714]。

[米利机](@article_id:323448)更通用，可以描述更复杂的行为，例如仅在转换期间产生输出，而不仅仅是在到达新的稳定状态时。这种细微差别至关重要。两个电路在一长串输入序列下可能表现出相同的行为，产生相同的稳定输出，但单次转换可能会揭示它们瞬态的、类似[米利机](@article_id:323448)的输出存在差异，从而证明它们终究不是功能等效的 [@problem_id:1953723]。

### 从原始到精炼

[原始流程表](@article_id:347369)，尽管具有强大的描述能力，但它只是初稿。它是对电路逻辑的完整但往往冗余的描述。如果我们仔细观察边缘检测器示例的表格，我们可能会发现其中几个状态从外部观察者的角度来看是可以互换的。它们具有相同的输出，并且它们的转换会导向等效的未来行为。我们称这样的状态为**相容的 (compatible)** [@problem_id:1911070]。

异步设计的艺术并不止于[原始流程表](@article_id:347369)。下一步是一个优化过程：识别所有相容状态并将它们合并。这将庞大而详细的原始表格压缩成一个更小、更高效的**合并流程表 (merged flow table)** [@problem_id:1911051]。这个合并后的表格就是我们随后用来构建由[逻辑门](@article_id:302575)和[反馈回路](@article_id:337231)组成的实际硬件的依据。

从简单的文字描述到物理电路的旅程是一个翻译和提炼的过程。我们从一个故事开始。我们将这个故事以[原始流程表](@article_id:347369)的原始、详尽的细节捕捉下来。然后，我们通过寻找并合并其冗余来打磨和精简该表。在每一步，我们都对位于计算核心的逻辑、时间和记忆之间错综复杂的舞蹈有了更深的理解。
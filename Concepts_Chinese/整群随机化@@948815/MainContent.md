## 引言
在实验室的理想世界里，研究人员可以精确地分离变量。然而，当研究进入真实世界——学校、医院和社区——个体之间相互关联，干预措施可能会外溢，从而污染结果。这个被称为“干扰”的根本问题，因其违反了稳定单位处理价值假设（SUTVA），威胁到传统实验设计的效度。整群随机化作为一种巧妙而有力的解决方案应运而生，它将随机化的单位从个体转移到了自然形成的群体，即整群。

本文为这一重要的研究方法提供了全面的指南。在第一章“原理与机制”中，我们将剖析整群随机化的核心逻辑，解释其必要性及运作方式。我们还将直面其主要的统计挑战——因“设计效应”导致的[统计功效](@entry_id:197129)损失——并探讨稳健的分析方法。在第二章“应用与跨学科联系”中，我们将遍览此方法不可或缺的各个领域，从社区健康项目和采用阶梯式楔形设计的伦理分阶段推广，到健康公平和人机协作的前沿研究。

## 原理与机制

想象一下，你是一位科学家，想检验一种绝妙的新教学方法。一个经典的实验是，找一大群学生，随机将一半分配到新方法组，另一半分配到旧方法组，然后比较他们的期末考试成绩。简单、巧妙且有效。但如果你的“实验室”是一所真实的学校，有真实的教室、老师和相互交谈的学生，情况会怎样？

### 独立性的幻觉

让我们在一个大型教室里尝试我们的实验。我们告诉老师：“请用新方法教教室左侧的学生，用旧方法教右侧的学生。”会发生什么？老师是人，可能会发现时时刻刻在两种教学风格之间清晰切换很困难。学生们充满好奇，会互相交谈。右侧的学生会听说左侧令人兴奋的新活动。一些“新方法”的魔力可能会外溢到“旧方法”组。反之，老师可能会对“旧方法”组感到过意不去，给予他们额外的关注作为补偿。

用实验设计的语言来说，我们严谨的分组已经被破坏了。分配给一个学生的处理正在影响另一个学生的结局。这被称为**干扰**，它违反了简单实验的一条神圣规则：**稳定单位处理价值假设（SUTVA）**。SUTVA悄然假设每个个体都是一座孤岛，其结局仅取决于其个人接受的处理。在学校、医院和社区这样相互关联的真实世界中，这个假设常常不成立。试图进行一个忽略这些关联的实验，就像试图通过观察一个孤立的H₂O分子来研究水的特性一样——你会错失其之所以为“湿”的本质。[@problem_id:4561324]

这并非一个微不足道的统计问题，而是对我们结论有效性的根本威胁。如果“对照”组受到了干预的污染，我们测得的组间差异将小于真实效应，这可能导致我们放弃一个真正有效的项目。

### 核心思想：随机化群体，而非个人

那么，我们能做什么呢？如果我们无法隔离个体，或许我们可以隔离群体。这就是**整群随机化**背后那个既简单又深刻的想法。我们不再随机化单个学生，而是随机化整个自然形成的群体，即**整群**。我们可以随机化教室，这样一个房间里的每个学生都接受新方法，而另一个房间里的每个学生都接受旧方法。或者我们可以更大胆一些，随机化整个学校。[@problem_id:4578565]

在这种设计中，**随机化单位**是整群（学校），但**分析单位**仍然可以是个人（学生）。我们巧妙地回避了干扰问题。现在，我们完全预期“新方法”学校内的学生会相互影响——事实上，这种社交互动正是干预措施在真实世界中效应的一部分！我们所做的假设是，各个学校之间相距足够远，不会相互影响，这是一个更为合理的假设。

这是一个被称为**部分干扰**的强大概念。我们承认SUTVA在我们的整群*内部*被违反了，但我们设计实验，使得SUTVA在它们*之间*成立。我们将世界 messy、互动的现实容纳在我们的实验单位内部，从而使我们能在它们之间进行清晰的比较。[@problem_id:4578582]

这种方法不仅是一种统计技巧，它还常常与实践和伦理现实相吻合。在医院环境中，让一个护理团队只对他们一半的病人实施新的患者安全方案，将会是混乱且有潜在危险的。通过随机化整个医院病区，我们能以一种实用、安全且对护理干扰更小的方式来评估该政策。这促进了**行善原则**——在最大化益处的同时最小化伤害。[@problem_id:4949515]

### 整群的代价：大数的欺骗性力量

这个巧妙的解决方案似乎好得令人难以置信。然而，正如物理学和生活中常有的情况一样，天下没有免费的午餐。我们为这种便利付出了代价，而其货币是统计信息。

可以这样想：为了解一个国家的民意，你是愿意调查完全随机抽取的1000人，还是愿意调查仅来自十个家庭的1000人？答案是显而易见的。同一家庭的人很可能持有相似的观点，拥有相似的环境和经历。在你与一两个人交谈后，来自同一家庭的每增加一个人，你获得的新信息的边际收益都在递减。

在整群随机试验中也是如此。同一所学校的学生共享老师、资源和一个地方社区。他们的结局是相关的。这种统计上的相似性由**组内相关系数（ICC）**来衡量，用希腊字母$\rho$（rho）表示。如果$\rho = 0$，则整群中的个体与随机的陌生人没有区别。如果$\rho = 1$，他们就是完美的克隆。在现实中，$\rho$通常是一个小的正数，比如0.01或0.05。

你可能认为0.05的相关性微不足道。那你就大错特错了。它的效应会被整群的规模放大。我们付出的代价由**设计效应（DEFF）**来量化，其公式简洁而优美：

$$ DEFF = 1 + (m-1)\rho $$

这里，$m$ 是一个整群中的个体数量。这个公式告诉我们，由于整群效应，我们估计值的方差被放大了多少。换句话说，它告诉我们，为了获得与简单个体层面随机试验相同的[统计功效](@entry_id:197129)，我们的样本量需要大多少倍。

让我们在一个真实场景中看看它的威力。假设一项职业健康研究在18家制造工厂进行，每家工厂有120名工人，总共有2160名参与者。研究发现，压力评分的ICC为$\rho = 0.05$。[@problem_id:4561324] 让我们计算一下设计效应：

$$ DEFF = 1 + (120-1)(0.05) = 1 + (119)(0.05) = 1 + 5.95 = 6.95 $$

结果是惊人的。方差被放大了近7倍。我们的2160名工人并非2160个独立的信息片段。**[有效样本量](@entry_id:271661)**是总样本量除以DEFF：$2160 / 6.95 \approx 311$。从统计角度看，我们这项涉及两千多人的大型研究，其功效仅相当于一个只有311人的简单随机样本。[@problem_id:4561324] [@problem_id:4590306]

这是分析整群随机试验的核心陷阱：如果你忽略整群效应，假装你有2160个独立的观测值，你就极大地高估了你的确定性。你的[标准误](@entry_id:635378)会小得离谱，你的[置信区间](@entry_id:138194)会窄得具有欺骗性，你会报告一个“统计上显著”的发现，而实际上可能什么都没有。你的分析将是无效的。[@problem_id:4578634]

### 拨开迷雾：如何分析整群数据

那么，我们如何进行诚实的分析呢？关键在于始终尊重随机化的单位。既然我们随机化的是整群，我们的推断就必须基于整群*之间*的变异性。主要有两种方法可以做到这一点。

#### 简单、诚实的方法：两阶段分析

最直接的方法是把整群作为我们的分析单位。在第一阶段，我们将每个整群中丰富的个体层面数据压缩成一个单一的汇总度量。这通常是该整群的平均结局——例如，每所学校的平均考试成绩。在第二阶段，我们对这些汇总数据进行分析。由于学校是随机化的，这些学校层面的平均值是独立的观测值。我们现在可以简单地使用标准的[t检验](@entry_id:272234)来比较10所干预学校和10所对照学校。

这种**两阶段分析**因其诚实和稳健性而十分强大。即使我们只有少数几个整群，它也同样有效，并且它对每个整群内部发生的复杂相关性只做了最少的假设。它的[统计功效](@entry_id:197129)正确地基于整群的数量（$J$），而不是个体的数量（$N$）。[@problem_id:4513221]

#### 复杂的方法：[多水平模型](@entry_id:171741)

虽然两阶段分析是诚实的，但它感觉有点浪费——我们扔掉了所有关于个体在每个整群内部如何变化的信息。一种更现代且通常更强大的方法是使用能够直接处理数据层次结构的[统计模型](@entry_id:755400)。像**[多水平模型](@entry_id:171741)**（也称为混合效应模型）或**广义估计方程（GEE）**这样的技术，就像戴上了一副特殊的眼镜。它们允许统计学家同时对一个整群内个体间的变异和整群间的变异进行建模。这些方法正确地考虑了ICC并提供了有效的标准误，同时使用了完整的数据集。[@problem_id:4561324]

### 驾驭真实世界：实用主义、偏倚和时间

真实世界更加混乱，整群随机化的艺术也延伸到处理这些实际挑战。

#### 意向性治疗原则

当一些被分配到新教学方法的学校没有正确实施它时，会发生什么？或者当一些对照学校受到研究的启发，独立采纳了类似的方法时呢？根据*实际*接受干预的情况进行分析似乎很诱人。但这几乎总是一个错误。它打破了随机化的魔力。

正确的做法是根据原始分配进行分析，无论之后发生了什么。这就是**意向性治疗（ITT）**原则。我们是在估计将一所学校分配到干预组这项*政策*的真实世界效应。对于学校董事会或卫生部长来说，这正是他们想要回答的问题：“如果我们推广这个项目，考虑到所有实施过程中的混乱，可能的效果是什么？”ITT分析为这个实用性问题提供了一个无偏的答案。[@problem_id:4603251]

#### 设盲的挑战

许多整群层面的干预措施是无法隐藏的。一个新的课程、一个带有醒目海报的工作场所安全项目，或一个社区范围的健康运动，都无法“设盲”。参与者和临床医生知道他们在哪一组。这就产生了**执行偏倚**（人们因为被观察而改变行为）和**探查偏倚**（结局评估者的判断因知晓干预情况而受到影响）的风险。

虽然我们常常无法对参与者或提供者设盲，但有一个群体我们绝对*必须*设盲：**结局评估者**。批改试卷、裁定病历或测量结局的人，应该完全不知道哪个整群属于哪个组。这是防止我们的测量结果系统性地偏向干预措施的最关键一步。[@problem_id:4573831]

#### 为不断变化的世界而设计：阶梯式楔形设计

最后，如果一项干预措施非常有前景，以至于在整个研究期间不让[对照组](@entry_id:188599)使用它是不道德的，该怎么办？或者，如果政府已经决定向所有人推广一个新项目，而我们只是想在此过程中证明其有效性，该怎么办？

在这里，优美的**阶梯式楔形整群随机试验**就派上用场了。在这种设计中，所有整群都以对照状态开始。然后，每隔一段时间（即“阶梯”），一个随机选择的整群组交叉进入干预状态。如此继续，直到研究结束时，所有整群都接受了干预。

这种设计是大师级的折衷方案。它满足了普遍可及的伦理和政治要求，符合**公正原则**。然而，通过随机化推广的*时机*，它保留了随机试验的科学严谨性。在过程中的每一步，我们都有一些整群在干预组，一些在[对照组](@entry_id:188599)，从而可以进行有效的比较。这是一个诞生于统计优雅与世俗实用主义联姻的设计，是在我们试图改进的系统中进行学习的完美工具。[@problem_id:4578581] [@problem_id:4949515]


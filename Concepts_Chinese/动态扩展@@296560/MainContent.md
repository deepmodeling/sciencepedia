## 引言
在控制理论的世界里，追求简洁性至关重要。然而，一些最强大的策略却涉及一个与直觉相悖的步骤：故意给系统增加复杂性。动态扩展就是这样一种技术，我们通过为系统增加新的动态状态来解决那些原本棘手的控制问题。这种方法填补了控制设计中的一个关键空白，处理了那些不符合许多方法所假定的简洁、控制仿射结构的系统。通过策略性地为输入添加[积分器](@article_id:325289)，我们可以驯服棘手的非线性、绕过控制奇异点，并最终在一个复杂的机器上实现简单、可预测的行为。

本文将全面概述动态扩展，引导您从其基本概念了解其在现实世界中的影响。“原理与机制”一节将解析该技术的核心机理，解释添加[积分器](@article_id:325289)如何增加系统的[相对阶](@article_id:323253)，以及这与[微分](@article_id:319122)平坦性和内部动态等强大概念的关系。随后，“应用与跨学科联系”一节将展示动态扩展在不同领域的多功能性，说明它如何实现[反馈线性化](@article_id:323003)、机器人学中的鲁棒轨迹规划，以及为处理执行器限制和外部扰动提供优雅的解决方案。

## 原理与机制

在简要介绍之后，您可能会留下一个好奇的问题：我们为什么要让一个系统变得*更*复杂呢？人们可能认为，[控制工程](@article_id:310278)就是为了简化。然而，我们即将探索一种强大的技术，它涉及到故意向我们希望控制的系统中添加新的动态部分——即新的状态。这种技术被称为**动态扩展**，乍一看似乎有悖直觉。但正如我们将看到的，通过策略性地增加一点复杂性，我们往往可以揭示系统行为中深邃的简洁性，从而使看似不可能的控制任务变得优雅可解。这有点像一招巧妙的柔道：我们不是正面硬抗系统的棘手特性，而是顺势而为，对其进行扩充，并引导它达到一种极其顺从的状态。

### 驯服不羁的机器

让我们想象一下，您正在尝试控制一台机器，但它的控制方式很奇特。我们许多钟爱的控制策略的蓝图都假设系统是**控制仿射**的，意味着输入 $u$ 以一种简洁、线性的方式出现，就像在 $\dot{x} = f(x) + g(x)u$ 中一样。您推动控制杆 ($u$)，其效果与您的推动成正比。

但如果您的机器构造不同呢？考虑一个假设的系统，其加速度与输入电压的平方成正比：$\dot{x}_2 = \sin(x_1) + u^2$ [@problem_id:2707943]。在这里，输入 $u$ 被纠缠在一个非线性函数 $u^2$ 中。我们用来消除非线性的标准工具失效了。我们不能简单地减去 $u^2$ 项，因为它不是我们可以直接指令的东西。

这时，动态扩展提供了一个巧妙的解决方案。诀窍是停止将 $u$ 视为我们的指令。相反，我们进行一次概念上的转变。假设我们不能直接控制输入 $u$，但我们可以控制它的*变化率*。我们引入一个新的、虚拟的输入，称之为 $w$，并声明 $\dot{u} = w$。现在，我们已经将旧的、有问题的输入 $u$ 提升为状态变量！系统现在由原始状态加上这个新状态 $u$ 来描述，并且它响应我们新的、行为良好的输入 $w$。现在，用状态 $(x_1, x_2, u)$ 和输入 $w$ 表示的系统方程，在 $w$ 上变成了仿射的。我们创建了一个新的、稍大的系统，它对我们的控制理论要“礼貌”得多。

另一个更微妙的问题是，当输入的影响力可能完全消失时。想象一下，当车轮正对前方时，您的汽车方向盘突然失灵。这就是当输入的系数可能变为零时系统中发生的情况。对于一个具有像 $\dot{x}_2 = x_1^2 u$ 这样的动态特性的系统，如果状态 $x_1$ 经过零点，您的输入 $u$ 在那一刻对加速度 $\dot{x}_2$ 完全没有影响 [@problem_id:1575293]。您失去了控制权。在这些点上，系统的**[相对阶](@article_id:323253)**（我们接下来将探讨的一个概念）是病态的（ill-defined）。再次，动态扩展可以成为救星。通过向输入添加一个[积分器](@article_id:325289)链，我们通常可以绕过这个奇异点，确保我们的控制输入总有一条清晰、非零的路径来影响系统输出。

### 添加积分器的艺术

那么，从机理上讲，这个“添加[积分器](@article_id:325289)”到底是什么意思呢？这正是我们上面施展的技巧：定义一个新输入，它是旧输入的时间[导数](@article_id:318324)。如果我们最初的输入是 $u$，我们可以引入一个新状态 $z_1 = u$ 和一个新输入 $v = \dot{u}$。如果这还不够，我们可以再来一次：$z_2 = v$ 和一个新输入 $w = \dot{v}$。我们构建了一个[积分器](@article_id:325289)链。

这一操作最直接、最根本的后果是增加了系统的**[相对阶](@article_id:323253)**。[相对阶](@article_id:323253)，用 $r$ 表示，是[非线性控制](@article_id:323193)中最重要的概念之一。直观地说，它告诉你从输出的角度看，输入在系统中“埋藏”得有多深。它是指在输入 $u$ 最终出现之前，你必须对输出 $y$ 关于时间求导的次数。

例如，如果您的输出是位置 ($y = x$)，输入是力 ($u=F$)，牛顿定律 $m\ddot{x} = F$ 告诉您，必须对位置求导两次才能找到力。这里的[相对阶](@article_id:323253)是 2。

一个优美而普适的法则是：**向输入通道添加一个[理想积分器](@article_id:340372)，会使[相对阶](@article_id:323253)恰好增加一** [@problem_id:2707985]。让我们看看为什么。假设对于一个原始系统，输入 $u$ 首次出现在输出 $y$ 的 $r$ 阶[导数](@article_id:318324)中：
$$
y^{(r)} = \alpha(x) + \beta(x) u
$$
现在，我们进行动态扩展：令 $u$ 为一个新状态，我们的新输入为 $v = \dot{u}$。$r$ 阶[导数](@article_id:318324) $y^{(r)}$ 现在依赖于状态 $u$，但并不依赖于我们的新输入 $v$。为了找到 $v$，我们必须再求导一次：
$$
y^{(r+1)} = \frac{d}{dt}(\alpha(x)) + \frac{d}{dt}(\beta(x)u) = \dots + \beta(x)\dot{u} + \dots = \dots + \beta(x)v + \dots
$$
假设 $\beta(x) \neq 0$，新输入 $v$ 首次出现在 $(r+1)$ 阶[导数](@article_id:318324)中。扩展后系统的[相对阶](@article_id:323253)为 $r' = r+1$。这就是核心机制。我们实际上是将输入对输出的影响延迟了一个积分“步长”。这个简单的过程为我们提供了一个强大的调节旋钮，使我们能够改变系统的基本输入-输出结构。

### 对平坦性的追求：统一的运动视角

我们为什么要增加[相对阶](@article_id:323253)呢？最终的大奖是什么？通常，目标是实现一个被称为**[微分](@article_id:319122)平坦性**的非凡性质。如果一个系统的全部状态和所有输入都可以纯粹地表示为一个特殊输出（**[平坦输出](@article_id:351062)**）及其有限阶时间[导数](@article_id:318324)的函数，那么该系统就是微分平坦的。

考虑一架无人机，其垂直运动由其高度 $z(t)$ 和螺旋桨产生的推力 $T(t)$ 建模。如果我们考虑执行器动态（电机不会瞬时响应），系统有三个状态：高度 $z$、速度 $\dot{z}$ 和当[前推](@article_id:319122)力 $T$。输入是指令推力 $T_c$。事实证明，该系统是[微分](@article_id:319122)平坦的，并且高度 $z(t)$ 是一个[平坦输出](@article_id:351062) [@problem_id:2700575]。如果您给我一个[期望](@article_id:311378)的高度轨迹 $z_{des}(t)$，我可以解析地计算出在每个时刻为了实现该轨迹所必须具备的速度、推力和指令推力。
$$
T_c(t) = m \tau\,\dddot{z}_{des}(t) + m\,\ddot{z}_{des}(t) + m g
$$
这非常强大！控制一个多状态系统的复杂问题被简化为为输出描绘一条平滑曲线这个简单得多的问题。

这与我们之前的讨论的联系在于：一个具有 $n$ 个状态和 $m$ 个输出的系统能够通过[状态反馈](@article_id:311857)（与平坦性密切相关）完全线性化的一个关键条件是，其输出的[相对阶](@article_id:323253)之和必须等于状态维数，即 $\sum_{i=1}^m r_i = n$ [@problem_id:2700584]。如果这个和小于 $n$，系统就存在**内部动态**——即无法通过输出直接观测到的隐藏运动。

动态扩展是我们弥合这一差距的工具。如果一个系统满足 $\sum r_i < n$，我们可以向输入添加 $p$ 个积分器。这将创建一个具有 $n_{ext} = n+p$ 个状态的扩展系统。在有利的情况下，新的[相对阶](@article_id:323253)会增加，使其总和与新的状态维数相匹配：$\sum r'_{i} = n_{ext}$。通过使系统变大，我们使其变得“平坦”。我们构建了一个其全部行为都可以通过规划一条简单的输出轨迹来决定的系统。

### 内部动态的隐藏世界

当然，天下没有免费的午餐。当我们进行动态扩展时，我们必须问：系统的其余部分会发生什么？我们刚才提到的那些“内部动态”又如何呢？

让我们考虑一个已经存在内部动态 ($r < n$) 的系统。当我们应用动态扩展时，我们将状态维数增加到 $n' = n+1$，[相对阶](@article_id:323253)增加到 $r' = r+1$。内部状态的数量由维数与[相对阶](@article_id:323253)之差给出。请注意一个非凡的现象：
$$
n' - r' = (n+1) - (r+1) = n - r
$$
内部动态的维数保持完全不变！此外，可以证明，控制这些内部动态的方程——即所谓的**[零动态](@article_id:323446)**——通常完全不受输入扩展的影响 [@problem_id:2707985] [@problem_id:2758178]。这是一个至关重要的见解：动态扩展以外科手术般的方式修改了输入-输出行为，同时保持了系统固有的、隐藏的动态不受影响。

然而，这并非故事的全部。上述例子代表了纯粹的数学扩展。在现实世界中，动态扩展通常源于对物理组件（如执行器）的建模 [@problem_id:2707959]。在这种情况下，扩展引入了*新的*物理状态。这些新状态的动态成为系统内部动态的一部分。例如，如果我们控制[期望](@article_id:311378)的推力 $\alpha(x)$，但实际推力 $u$ 存在一定延迟，跟踪误差 $z = u - \alpha(x)$ 就成了一个新的内部状态。它的动态 $\dot{z} = -kz$ 必须通过我们的控制设计来使其稳定。我们以必须管理这个新引入的内部模式为代价，获得了一个更易于处理的系统结构。

更微妙的是，这个过程可能充满危险。完全有可能将一个行为良好的系统，通过动态扩展（例如，添加一个测量滤波器），意外地创造出*不稳定的*内部动态 [@problem_id:2758159]。内部[动态稳定](@article_id:323321)的系统称为**[最小相位](@article_id:337314)**系统。如果选择不当，动态扩展可能将一个[最小相位系统](@article_id:331925)转变为一个**非最小相位**系统，使我们背上不稳定的[零动态](@article_id:323446)的包袱。试图对这样的系统进行逆向控制，就像试图将铅笔立在笔尖上——任何微小的扰动都会导致发散。

### 现实检验：噪声、极限与物理定律

动态扩展和平坦性的威力在[前馈控制](@article_id:314088)（轨迹规划）中最为明显，但其实际应用伴随着严重的警示。

最主要的障碍是**噪声放大**。正如我们所见，我们为无人机制定的平坦控制律需要计算高度的二阶和三阶[导数](@article_id:318324)，即 $\ddot{z}$ 和 $\dddot{z}$ [@problem_id:2700575]。在现实世界中，我们对 $z$ 的测量受到[噪声污染](@article_id:367913)。求导过程对高频噪声极为敏感。求一阶[导数](@article_id:318324)会将噪声功率放大 $\omega^2$ 倍（其中 $\omega$ 是频率），二阶[导数](@article_id:318324)放大 $\omega^4$ 倍，三阶[导数](@article_id:318324)放大 $\omega^6$ 倍。试图从带噪信号中实时计算三阶[导数](@article_id:318324)简直是灾难的配方，因为控制指令会被疯狂放大的噪声所淹没。这就是为什么在实践中，我们通过数学方法（例如，使用样条曲线）生成一条*平滑的参考轨迹*，并为其控制的前馈部分*解析地*计算[导数](@article_id:318324)。

其次，控制律中的[高阶导数](@article_id:301325)具有直接的物理意义。$\dddot{z}$ 项是**加加速度 (jerk)**，而 $\ddddot{z}$ 是**加加加速度 (snap)**。我们为无人机设计的控制律直接将指令推力 $T_c$ 与加加速度联系起来，并将其变化率 $\dot{T}_c$ 与加加加速度联系起来 [@problem_id:2700575]。现实世界的执行器有饱和限制（最大推力）[和速率](@article_id:324321)限制（推力变化的速度）。因此，为了生成一个可行的轨迹，我们必须对规划路径的加加速度和加加加速度施加约束，确保我们永远不会要求硬件执行其物理上无法完成的任务。

最后，我们必须认识到，动态扩展是一个强大的工具，但它并非魔法。它无法在无中生有地创造控制权。如果一个系统的输入机制存在根本性的退化，例如像 $u^3$ 这样的输入非线性，其[导数](@article_id:318324)在[工作点](@article_id:352470) $u=0$ 处为零，那么动态扩展无法修复它。输入对系统的线性灵敏度为零，无论你求多少次导，新的扩展输入在那个点的线性灵敏度也同样为零 [@problem_id:2739634]。这个奇异点只是被传递到了[导数](@article_id:318324)链的更上层。这是一个深刻的教训：我们的数学工具可以重塑和重构一个问题，但它们无法违背系统本身的底层物理原理。
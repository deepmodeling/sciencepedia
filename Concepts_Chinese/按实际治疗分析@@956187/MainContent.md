## 引言
在科学研究的理想世界中，随机对照试验（RCT）是确定因果关系的黄金标准。通过将参与者随机分配到不同组别，研究人员创造出平衡、可比的平行世界，以检验干预措施的效果。然而，现实 rarely如此清晰。在任何试验中，一些参与者可能不遵守其分配的治疗方案——他们可能因副作用而停止服药，或者安慰剂组的某人可能会在试验外寻求活性治疗。这种普遍存在的非依从性问题给分析者带来了一个根本性的两难困境：我们应该强迫数据回答什么问题？我们是想知道开出某种治疗方案这项*政策*在考虑到非依从性后的真实世界效果？还是想探寻那些真正接受治疗的人身上，该治疗的“纯粹”生物学效应？

本文深入探讨了源于这一困境的两种分析方法之间的关键区别：稳健的意向治疗（ITT）原则与直观但充满风险的按实际治疗分析。首先，在“原则与机制”部分，我们将剖析这些方法的统计学基础。我们将探讨随机化如何运作，为什么按实际治疗方法会破坏这种设计并引入如混杂和选择偏倚等关键偏倚，以及ITT原则如何为政策问题提供一个诚实的答案。然后，在“应用与跨学科联系”部分，我们将考察这些选择在医学、公共卫生政策和监管科学领域的深远现实影响，展示理解这一统计学选择对于做出影响人类健康的可靠决策是何等重要。

## 原则与机制

想象一下，你是一位科学家，正在为一种革命性的新型心脏药物进行一项大型、昂贵的临床试验。你已经把一切都做得尽善尽美。你召集了数千名志愿者，并通过相当于完美抛硬币的数字方式，将他们中的一半随机分配到接受新药（$Z=1$）的组，另一半分配到接受安慰剂（一种无害的糖丸，$Z=0$）的组。这种随机化行为是现代医学的基石，是一项精妙的科学工程，旨在创造出两组在平均意义上于所有可想象方面都相同的人群——他们的年龄、生活方式、基因构成，甚至他们深夜偷吃冰淇淋的癖好。本质上，你创造了两个平行宇宙。唯一的区别是，在其中一个宇宙里，你引入了开出新药的*政策*。

但现实，一如既往，总是充满混乱。几周后，你注意到药物组（$Z=1$）中的一些人因为副作用停止了服药。与此同时，安慰剂组（$Z=0$）中几个特别焦虑的个体设法从试验外部获得了这种新药。你那原始纯粹的实验，你那两个完美的平行宇宙，现在有了在它们之间来回穿梭的居民。一年后，你得到了结果：一大堆关于谁被*分配*了什么、谁*实际服用*了什么以及谁的健康状况有所改善的数据。现在，难题来了。你试图回答的问题是什么？

### 分析师的两难：两个问题，一个现实

现实世界的这种“混乱”，我们称之为非依从性或不遵从性，迫使我们面临一个关键的岔路口。我们可能想从数据中探寻的，不是一个，而是两个基本问题[@problem_id:4717613]：

1.  **务实问题：** 作为一名公共卫生官员或医生，我是否应该采纳开出这种新药的*政策*？换言之，当我们在社区中引入这种药物时，考虑到有些人不会服用，有些人可能会有副作用，其净效应是什么？

2.  **生物学问题：** 假设一个人*确实按指示服用了*这种药物，其分子对人体的纯粹、未受掺杂的影响是什么？它的真实效力是什么？

这两个都是极其重要的问题。第一个问题为政策和临床指南提供信息；第二个问题则有助于我们对药物机制的基础科学理解。巨大的挑战，也是无数统计学辩论的根源在于，它们要求我们用完全不同的方式审视同一份数据。

### 硬币的圣洁：随机化的力量

让我们从第一个务实的问题开始。最稳健，在许多方面也最优雅的方法是尊重最初的硬币投掷结果。这就是**意向治疗（ITT）**原则：*按随机分配进行分析*。你比较最初被分配到药物组的整个人群与最初被分配到安慰剂组的整个人群，无论谁实际上服用了什么[@problem_id:4603196]。

为什么？因为这样做，你保留了随机化的魔力。你的两个“平行宇宙”保持了完美的平衡。两个组之间平均结果的任何差异，都可以自信地归因于唯一系统性地区分它们的因素：被*分配*到一个治疗策略[@problem_id:4541319]。这种分析为你提供了一个关于该政策真实世界*有效性*的清晰、无偏的估计。

当然，如果药物组中的许多人没有服药，而安慰剂组中的许多人服用了药物，那么观察到的两组之间的差异可能会很小。我们说这种效应被“稀释”了。但这并非分析的缺陷，而是一个特点。这种稀释精确地反映了当你在一个依从性不完美的群体中开出这种药物时所发生的现实。ITT估计量，$\Delta_{\mathrm{ITT}} = \mathbb{E}[Y^{1}] - \mathbb{E}[Y^{0}]$，其中$Y^{z}$是分配$Z=z$下的潜在结果，它为关于政策效果的诚实问题提供了一个诚实的答案[@problem_id:4616199]。

### “常识”的诱惑：按实际治疗的陷阱

那么，第二个问题——关于“纯粹”的生物学效应——又该如何处理呢？直观的、“常识性”的方法是忽略最初的随机分配，简单地根据参与者的实际行为重新分组。我们比较所有*服用过药物*的人（无论他们最初的分配如何）和所有*未服用药物*的人。这被称为**按实际治疗分析**。它看起来简单、直接，而且逻辑上无懈可击。但它几乎总是灾难性地错误。

当你进行按实际治疗分析时，你打破了由抛硬'币创造的美丽对称性。你不再是同类与同类进行比较。想想这些新组是由谁组成的。*实际服用药物*的组现在包括了来自安慰剂组的、可能病情更重因而主动寻求治疗的积极分子，以及来自药物组的、能够很好耐受药物的人。而*未服用药物*的组现在包括了遵从指示的安慰剂组受试者，以及来自药物组的、可能因为严重副作用或感觉好转认为不再需要药物而中途退出的人[@problem_id:4617337]。

这两个组现在在决定结果的那些关键因素——预后、基础健康状况、积极性——方面，已经无可救药地不平衡了。这是一个经典的统计学原罪，称为**适应症混杂**。你主动摧毁了你的随机化实验，把它变成了一个混乱、难以解释的[观察性研究](@entry_id:174507)，充满了所有隐藏的偏倚。即使两组的非依从率完全对称，非依从的*原因*也可能不同，偏倚依然存在[@problem_id:4717613]。

### 洞见幽灵：偏倚如何产生

为了更清楚地看到这种偏倚，我们可以借用计算机科学和流行病学的一个工具：**[有向无环图](@entry_id:164045)（DAG）**。可以把它看作是因果关系的简单地图。

在我们的试验中，随机分配（$Z$）导致一个人实际接受的治疗（$D$）。但一个未被测量的因素，我们称之为潜在的“病情严重程度”（$U$），也影响着某人接受的治疗（$D$）。例如，病情更重的人可能更有动力服用任何提供的药物。药物（$D$）和潜在的病情严重程度（$U$）都直接影响最终的健康结果（$Y$）。

ITT分析寻找的是$Z$对$Y$的总效应。由于随机化确保了$Z$与$U$是断开的，从分配到结果的唯一路径就是我们关心的那条（通过$D$）。这个比较是干净的。

然而，按实际治疗分析是基于$D$来比较组别。它寻找的是$D$对$Y$的效应。问题在于存在一条“后门路径”：$D \leftarrow U \rightarrow Y$。因为病情严重程度（$U$）既导致了治疗选择，也导致了结果，它在两者之间创造了一种虚假的、非因果的关联。由于我们永远无法完美测量“病情严重程度”，我们就无法阻断这条后门路径。按实际治疗的估计值因此被污染了[@problem_id:4933628]。

还有一个更微妙的陷阱。假设你试图更聪明一些，进行**遵循方案**分析，即只比较那些“好”的受试者——药物组中服用了药物的人 vs. 安慰剂组中服用了安慰剂的人。你仍然破坏了随机化。在我们的因果图中，$Z$和$U$都是依从性的原因。一个作为另外两个变量的共同效应的变量被称为**对撞因子**。DAG的一个基本规则是，如果你对一个对撞因子进行控制（即筛选或调整），你会在它的原因之间创造出虚假的关联[@problem_id:4618681] [@problem_id:4802422]。通过只关注“依从者”这个群体，你实际上是在一个对撞因子上进行了条件化，这人为地将随机分配（$Z$）与未测量的病情严重程度（$U$）联系了起来。你实际上在原本没有偏倚的地方*创造*了偏倚。这是一个深刻且反直觉的结果：有时，试图通过限制分析来提高[精确度](@entry_id:143382)，反而会使情况变得更糟。

在[观察性研究](@entry_id:174507)中，这种偏倚的一种特别[隐蔽](@entry_id:196364)的版本是**永生时间偏倚**。如果我们将“治疗组”定义为从他们首次服药的那一刻开始，我们就隐含地让他们在服药前的这段时间里是“永生”的。他们不可能在那段时间内死亡，否则他们就不会被分入治疗组。这从一开始就给了治疗组一个人为的生存优势，这种偏倚可以使一种无效的药物看起来像灵丹妙药[@problem_id:4547883]。

### 重建桥梁：我们能否挽救“真实”效应？

所以，天真的按实际治疗分析是一个雷区。但是，我们还能回答第二个问题——关于药物的真实效力——吗？幸运的是，答案是肯定的。被按实际治疗分析所抛弃的随机化，可以用一种更聪明的方式来使用。

诀窍是使用随机分配$Z$作为**工具变量（IV）**。一个好的工具变量是指某样东西，它能影响你感兴趣的选择（服用药物，$D$），但除了通过该选择之外，没有其他路径能影响到结果（$Y$）。随机化的硬币投掷是一个近乎完美的[工具变量](@entry_id:142324)！它强烈地影响谁会服用药物，但它本身并不会直接使人更健康——除非你相信那枚硬币本身具有治疗能力。这个假设，即[工具变量](@entry_id:142324)仅通过治疗影响结果，被称为**排他性限制**[@problem_id:4616180]。

IV分析的逻辑非常简单。我们有两个关键信息：

1.  对结果的稀释后的ITT效应：$\Delta_Y^{\mathrm{ITT}} = E[Y | Z=1] - E[Y | Z=0]$。
2.  分配对治疗接受度的影响：$\Delta_D = P(D=1 | Z=1) - P(D=1 | Z=0)$。这是行为被分配所改变的人群的净比例——即“依从者”。

因果效应的IV估计值就是这两者之比：
$$
\Delta_Y^{\mathrm{IV}} = \frac{\Delta_Y^{\mathrm{ITT}}}{\Delta_D}
$$
你可以把这看作一个“去模糊”公式。它将稀释后的真实世界效应，按稀释的程度进行放大，从而得到一个仿佛所有人都依从了治疗的效应估计。这个估计量被称为**依从者平均因果效应（CACE）**或**局部平均治疗效应（LATE）**。它是药物真实的生物学效应，但特指于“依从者”这个群体——那些被分配到药物组就会服药、被分配到安慰剂组就不服药的人。它可能不是对所有人的效应，但它是一个对明确定义的因果问题的有效、无偏的回答[@problem_id:4933628] [@problem_id:4616180]。

### 关于诚实与谦逊的最后寄语

从简单的ITT分析到按实际治疗分析的复杂性及其[工具变量](@entry_id:142324)校正的旅程，教会了我们关于科学的深刻一课。最直观的路径并不总是正确的。源于探求“真实”效应愿望的“常识性”按实际治疗方法，直接将我们引向了偏倚的泥潭。

真正的理解来自于尊重实验设计。**意向治疗**原则是[临床试验分析](@entry_id:172914)的基石，因为它是诚实的。它在一个务实的问题上给出了一个稳健的答案，并受到随机化无与伦比的力量的保护。

如果我们希望提出关于效力的更具体问题，我们必须更加精细。像[工具变量](@entry_id:142324)这样的方法允许我们透过非依从性的“迷雾”来估计药物的生物学效应，但这需要仔细的思考和强有力的假设[@problem_id:4616199]。在一个数据日益复杂的世界里，来自电子健康记录和纵向随访的数据需要更先进的技术来处理随时间变化的偏倚[@problem_id:4617337]。

最终，分析方法的选择就是对问题的选择。成为一名优秀的科学家不仅意味着知道如何找到答案，还意味着精确地知道你正在回答什么问题，并对可能潜伏的偏倚保持谦逊。


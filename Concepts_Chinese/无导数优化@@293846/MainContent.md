## 引言
在科学与工程领域的许多最具挑战性的问题中，我们寻求最佳解决方案，却没有一张清晰的地图来指引我们。我们可以衡量我们选择的结果，但缺乏能够指明改进方向的显式公式或梯度。这就是“黑箱”优化的领域，而用于驾驭它的工具箱被称为[无导数优化](@article_id:298124)（Derivative-Free Optimization, DFO）。当处理复杂的模拟、物理实验或复杂的计算模型，且通往最优解的路径被隐藏时，这些方法是不可或缺的。本文旨在解决一个根本性挑战：当我们所能做的只是测试点并比较其结果时，我们如何智能地搜索最佳解决方案？

在接下来的章节中，我们将揭示使这一切成为可能的策略的神秘面纱。首先，在“原理与机制”一章中，我们将探讨DFO的两种主要哲学方法：通过问题空间“摸索”前进的[直接搜索法](@article_id:641817)，以及试图绘制未知地形图的基于模型的方法。然后，在“应用与跨学科联系”一章中，我们将看到这些理论工具的实际应用，了解它们如何被用于调整机器学习模型、设计先进飞机，甚至在从化学到生物学的各个领域中实现科学发现的自动化。

## 原理与机制

想象一下，你身处一片完全黑暗的丘陵地带，任务是找到最低点。你唯一的工具是一个[高度计](@article_id:328590)，它可以告诉你当前位置的高度。你看不到地貌，没有地图，也无法测量脚下地面的坡度。这就是**[黑箱优化](@article_id:297860)**的世界。“黑箱”就是我们这片神秘的地貌，由一个函数 $f(\mathbf{x})$ 表示，其中 $\mathbf{x}$ 是一组参数（你的坐标），而 $f(\mathbf{x})$ 是我们想要最小化的值（你的海拔）。我们可以输入一个 $\mathbf{x}$ 并得到一个 $f(\mathbf{x})$，但我们没有任何公式，没有梯度，也完全没有[导数](@article_id:318324)[@problem_id:2217794]。

你该如何开始呢？也许你会铺设一个网格，并一丝不苟地测量每个网格点的高度。这被称为**[网格搜索](@article_id:640820)**。它简单而彻底，但它隐藏着一个可怕的秘密：一个被称为**维度灾难**的致命缺陷。如果你的地貌只有两个维度（南北和东西），一个包含100个点的 $10 \times 10$ 网格可能看起来很合理。但如果一个制造过程由七个独立参数控制呢？即使是一个粗糙到可笑的网格，每个参数只测试3个值，也需要 $3^7 = 2,187$ 次测量。如果每次测量需要数小时，这不仅是不切实际的，而且是根本不可能的。我们会在完成[网格搜索](@article_id:640820)之前很久就耗尽时间和资源预算[@problem_id:2156629]。

显然，暴力方法注定会失败。我们需要更聪明。我们需要用智慧和策略来驾驭这片黑暗。[无导数优化](@article_id:298124)的原理正是这些策略，它们可以通过两种哲学方法来大致理解：一步一步地摸索前进，或者边走边尝试绘制一幅地形草图。

### 摸索前进：直接搜索的世界

[直接搜索法](@article_id:641817)是最直观的。它们通过进行一系列探索性移动，比较函数值，并朝着看起来最有希望的方向移动来工作。它们不试图建立整个地貌的宏大模型，而只专注于取得局部进展。

#### [单纯形](@article_id:334323)之舞

最著名的直接[搜索算法](@article_id:381964)之一是 **Nelder-Mead 方法**。忘掉单个探索者，想象一个团队，比如在 $n$ 维空间中的 $n+1$ 个探索者。他们组成一个称为**[单纯形](@article_id:334323)**（在二维空间中是三角形，三维空间中是四面体）的几何形状。该[算法](@article_id:331821)以一种优美简洁、如同舞蹈般的逻辑进行。

在每一步，探索者们都会查看他们的[高度计](@article_id:328590)。站在最高点（最差值）的那个被挑出来。然后，团队试图为这个不幸的个体找到一个更好的位置。他们通过将最差点相对于所有其他点的几何中心进行反射来实现这一点。这就像是说：“最低的地面可能在我们最高成员所在位置的相反方向。”

如果这个新的**反射**点不错——比某些点好，但不是绝对最好的——他们就接受它并形成一个新的单纯形。如果它特别好，他们就会变得雄心勃勃，尝试进行**扩张**，在那个有希望的方向上走得更远。如果反射是一个糟糕的移动，他们就会变得谨慎，并执行一次**压缩**，将该点[拉回](@article_id:321220)到群体中。如果一切都失败了，整个团队会执行一次**收缩**操作，将整个单纯形向当前最佳成员收拢，重新集结以进行更集中的搜索。这整个反射、扩张和压缩的序列完全由比较函数值来决定——没有梯度，没有[导数](@article_id:318324)，只有“这个点比那个点高还是低？”[@problem_id:2217794]。

#### 罗盘行走

另一类直接搜索是**[模式搜索](@article_id:638306)**。想象你再次成为孤独的探索者。你站在一个点上，执行一次“探索性移动”。你向北走一步，检查你的高度。然后你回到中心，尝试向东走一步，然后是南，然后是西。这是一种**坐标搜索**，即沿着每个坐标轴进行探测。对于一个 $n$ 维问题，你需要检查 $2n$ 个点：沿着 $n$ 个坐标方向中的每一个向前和向后各走一步[@problem_id:2217777]。如果这些探测中的任何一个找到了一个更低的点，你就移动到那里。

使其成为“模式”搜索的是接下来发生的事情。如果你从点A到点B的移动是成功的，[算法](@article_id:331821)可能会进行一次“模式移动”，这本质上是朝着同一方向的一次大胆飞跃，从B到C，希望能够加速在一个有希望的山谷中前进。Hooke-Jeeves方法是这种策略的一个经典例子[@problem_id:3161528]。

这些直接搜索方法是主力军，但并非万无一失。关于流行的Nelder-Mead方法，一个令人惊讶的事实是，对于某些函数，它并不能保证找到谷底。单纯形可能会变得非常细长，以一种“退化”的方式沿着斜坡滑下，并收敛到一个甚至不是局部最小值的点。该[算法](@article_id:331821)的步骤仅仅缺乏一个“[充分下降](@article_id:353343)”条件，这个条件本可以迫使它在下坡时取得有意义的进展[@problem_id:2217737]。此外，这些方法也无法幸免于我们世界固有的“颗粒感”。在计算机上实现时，它们操作的是浮点数，而浮点数不是连续的。可表示的数字之间的间距不是均匀的。[算法](@article_id:331821)可能会陷入[机器精度](@article_id:350567)的“陷阱”中，在几个点之间[振荡](@article_id:331484)，因为真正的最小值恰好位于它们之间的间隙中，永远无法达到[@problem_id:2215584]。

### 构建地图：代理模型的力量

如果说直接搜索像是在黑暗中摸索，那么[基于模型的优化](@article_id:640097)就像是成为一名制图师。这种方法不是一次只走一步，而是利用你拥有的宝贵的少数几次高度测量值，来绘制一幅廉价、近似的地形图。这张图被称为**[代理模型](@article_id:305860)**。

这个想法非常巧妙：如果真实函数评估成本高昂，那么我们就构建一个廉价的函数来代替它进行优化。我们可以用我们的测量值来拟合一个简单的数学函数——比如一个多项式，或者一个更复杂的机器学习模型，如[随机森林](@article_id:307083)——来作为真实函数的替代品[@problem_id:2156662]。

当然，地图的选择至关重要。一个简单的[线性模型](@article_id:357202)过于僵硬。一个高阶多项式可能完美地拟合你已知的点，但在点与点之间剧烈[振荡](@article_id:331484)，从而误导你。[随机森林](@article_id:307083)模型有一个致命缺陷：它无法预测其已经看到的值范围之外的值，因此它永远无法指向一个比你已发现的最低点还要低的新最小值[@problem_id:2156662]。

#### 信息的几何学

地图的质量关键取决于你选择在*何处*进行测量。这引出了一个深刻而优美的原理。想象一下，你想建立一个形式为 $m(x) = \alpha + \beta x + \gamma x^2$ 的局部[二次模型](@article_id:346491)。这个模型有三个参数：截距 $\alpha$、斜率 $\beta$ 和曲率 $\gamma$。要确定这三个未知数，你需要收集足够的信息。

假设你只有两个点的测量值，比如 $x=0$ 和 $x=\Delta$。你可以画一条穿过它们的直线，但也有无数条抛物线同样穿过这两点。你的曲率 $\gamma$ 是完全不确定的。为了确定曲率，你绝对*必须*在第三个不同的点进行测量，例如在 $x=-\Delta$。在三个几何上“适定”（well-poised）的点上采样，会给你一个非退化的方程组，你可以解这个方程组来找到一个唯一的二次映射。在相同的两个点重复测量可能会减少你高度读数的噪声，但它永远不会告诉你任何关于曲率的新信息。你采样点的*几何*结构决定了你能提取的*信息*[@problem_id:3153321]。

#### 聪明的制图师：[贝叶斯优化](@article_id:323401)

最复杂的基于模型的策略是**[贝叶斯优化](@article_id:323401)**。它接受我们的代理地图只是一个近似值这一事实。它使用一个概率模型，通常是高斯过程，该模型不仅对未知点的高度给出一个单一的预测，还给出一个完整的[概率分布](@article_id:306824)——一个最佳猜测和一种不确定性的度量。

这种不确定性是关键。它允许[算法](@article_id:331821)平衡两种相互竞争的欲望。一方面，它希望通过检查地图当前预测为最低的点来*利用*（exploit）其现有知识。另一方面，它希望通过在地图高度不确定的区域进行测量来*探索*（explore），因为那里可能隐藏着一个惊人深邃的山谷。这种在利用和探索之间的智能权衡，使得[贝叶斯优化](@article_id:323401)如此强大且样本高效，使其能够驾驭[网格搜索](@article_id:640820)会束手无策的高维空间[@problem_id:2156629]。

### 模糊的界线与普适的真理

我们区分了不使用[导数](@article_id:318324)的[直接搜索法](@article_id:641817)和使用[导数](@article_id:318324)的基于梯度的方法。但这条界线比看起来要模糊。如果我们能仅用[高度计](@article_id:328590)给出的函数值来*估计*梯度呢？

我们能做到！从基础微积分我们知道，[导数](@article_id:318324)是斜率的极限。我们可以近似这个斜率。对于一个函数 $f(x)$，当步长 $h$ 非常小时，表达式 $\frac{f(x+h) - f(x-h)}{2h}$ 给出了在 $x$ 点[导数](@article_id:318324)的一个极好的近似值。这被称为**[有限差分](@article_id:347142)**。我们可以对问题的每个维度都这样做，仅用 $2n$ 次函数评估就构建出一个近似的[梯度向量](@article_id:301622)。然后，我们可以将这个“伪梯度”代入标准的[梯度下降](@article_id:306363)[算法](@article_id:331821)中，瞧，我们就得到了一个行为与基于梯度的方法非常相似的无[导数](@article_id:318324)方法[@problem_id:3227735]。这揭示了一种深层次的统一性：这些概念并不像它们看起来那样相互分离，而是同一底层探索地貌信息任务的不同侧面。

这引出了最后一个令人谦卑的问题：是否存在一种最好的[算法](@article_id:331821)？一种能够征服任何黑箱问题的大师级策略？令人惊讶的答案是一个深刻而明确的**不**。优化的**“无免费午餐”（NFL）定理**指出，如果将任意两种[算法](@article_id:331821)在*所有可能*的函数上的性能取平均，它们的表现完全相同。没有一种[算法](@article_id:331821)在普适性上优于简单的[随机搜索](@article_id:641645)[@problem_id:3153357]。

这听起来像是一个毁灭性的结论。但奇妙之处在于：我们永远不必解决“所有可能的问题”。我们只需要解决*我们自己的*问题。而现实世界的问题具有结构。它们可能是平滑的，或具有某种形式的局部性，或以特定方式带有噪声。[无导数优化](@article_id:298124)的艺术和科学不在于找到一个单一的大师级[算法](@article_id:331821)，而在于理解不同策略的原理和机制——[单纯形](@article_id:334323)之舞、罗盘行走、制图师的地图——并选择其假设和行为最符合你试图探索的特定、神秘地貌的隐藏结构的那个。没有免费的午餐，但通过理解菜单，你总能选择一顿适合当前场合的餐食。


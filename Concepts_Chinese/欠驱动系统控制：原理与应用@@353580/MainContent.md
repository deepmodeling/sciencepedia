## 引言
你如何驾驶一辆没有方向盘的汽车，或者让一架无人机在没有侧向推进器的情况下转弯？这正是欠驱动系统（即控制输入数量少于自由度的系统）的核心挑战。虽然它们看似无法被引导，但对其自然动力学的深刻理解却能实现优雅而精确的控制。本文旨在弥合系统物理限制与其[可实现性](@article_id:372641)能之间的知识鸿沟，探索引导复杂系统展现出[期望](@article_id:311378)行为的精妙艺术。我们将开启一段旅程，探索支配这一领域的核心理论。第一章“原理与机制”将揭开李括号、能量整形和[微分](@article_id:319122)平坦等基本概念的神秘面纱。随后的“应用与跨学科联系”一章将把这些理论与现实世界联系起来，揭示它们对机器人学、航空航天工程乃至我们对人类运动理解的影响。

## 原理与机制

想象一下，你要给一辆没有方向盘的汽车做侧方停车。你只能使用油门和刹车来前进和后退。这似乎是不可能的，对吗？你无法直接横向移动到停车位。然而，通过一系列巧妙的前后摆动，你或许真的能一点点挪进去。这正是控制**欠驱动系统**——即独立控制输入数量少于其自由度的系统——的核心挑战与深邃之美。就像那辆没有方向盘的汽车一样，从你手上平衡的一根扫帚到一架精密的四旋翼无人机，数量惊人的系统都是欠驱动的。它们不能被指令随意地向任意方向移动。

然而，我们却能控制它们，而且常常控制得相当优雅和精确。这是如何做到的呢？答案不在于蛮力，而在于对系统自然动力学——其自行漂移、摇摆和下落的趋势——的深刻而优雅的理解。欠驱动控制的艺术是一种温和推动、巧妙计时和精妙操控能量的艺术，旨在引导系统按我们的意愿行事。在本章中，我们将踏上一段旅程，揭示使这一切成为可能的核心原理和机制。

### 撼动山脉的摆动：[李括号](@article_id:640756)与[可控性](@article_id:308821)

让我们从一个经典的教科书例子开始，这个例子在实践中绝不简单：在小车上平衡一根杆子（倒立摆）[@problem_id:2710287]。小车可以水平移动，一根杆子通过枢轴连接在小车上，可以自由摆动。你唯一的控制是你施加在小车上的力 $u$。你有两个自由度——小车的位置 $x$ 和杆子的角度 $\theta$——但只有一个执行器。你如何才能同时控制两者，比如说，将小车移动到特定位置同时保持杆子完全竖直？

如果你只施加一个恒定的力，小车会加速。这是一个直接的、一阶的效应。我们可以用一个[矢量场](@article_id:322515)来表示控制 $u$ 如何影响系统的状态（其位置和速度），我们称之为 $g$。在倒立摆的例子中，$g$ [矢量场](@article_id:322515)本质上是说“一个力 $u$ 导致小车加速”。

但系统也会自行演化。如果你什么都不做（$u=0$），重力会作用在杆子上，任何初始运动都会继续。这种自然的、不受控制的演化由另一个[矢量场](@article_id:322515)描述，即**漂移**[矢量场](@article_id:322515)，我们称之为 $f$。

[非线性控制](@article_id:323193)的关键洞见在于，我们可以通过将控制作用与系统的自然漂移交织在一起来产生新的运动类型。回想那辆没有方向盘的汽车。你不能直接横向移动。但你可以执行一个序列：
1.  向前移动（施加一个控制）。
2.  让汽车自行轻微转动（让它漂移，也许是因为路面不平）。
3.  向后移动（施加反向控制）。
4.  让它漂移回来。

完成这个序列后，你会发现你并没有回到起点。你实现了一个微小的净横向位移！这个“新的”运动方向，既不能通过直接控制也无法通过纯粹漂移获得，在数学上被一个优美而强大的概念所捕捉，这个概念就是**李括号**。

对于两个[矢量场](@article_id:322515)，比如我们的漂移场 $f$ 和控制场 $g$，[李括号](@article_id:640756)写作 $[f, g]$。它代表了通过以下序列产生的无穷小运动：沿着 $f$ 流动一小段时间，然后沿着 $g$，再沿着 $f$ 反向流动，最后沿着 $g$ 反向流动。对于大多数系统，这个序列并不会让你回到起点。产生的净运动方向就是李括号的方向。

在一个极具启发性的例子[@problem_id:2694382]中，我们可以考虑一个平面上的简单系统，它有两个控制器 $u_1$ 和 $u_2$，允许我们沿着两个[矢量场](@article_id:322515) $X_1$ 和 $X_2$ 移动。假设 $X_1$ 让我们沿 $x$ 方向移动，$X_2$ 让我们沿 $y$ 方向移动，但两者都会引起一个小的扭转，即沿 $z$ 方向的运动。如果我们执行四步“停车操作”——一个沿 $X_1$ 的脉冲，然后是 $X_2$，接着是 $-X_1$，最后是 $-X_2$——我们会发现 $x$ 和 $y$ 方向上的一阶运动完全抵消了。我们最终回到了相同的 $(x,y)$ 坐标。但我们产生了一个纯粹沿 $z$ 方向的净运动，这个方向是两个执行器都无法独立产生的。这个运动的大小与[李括号](@article_id:640756) $[X_1, X_2]$ 以及操作持续时间的平方 $\varepsilon^2$ 成正比。

对于倒立摆系统，在竖直静止位置计算的[李括号](@article_id:640756) $[f, g]$ 给出了一个对应于杆子角加速度的矢量[@problem_id:2710287]。这意味着通过对小车施加力并让系统的自然动力学发挥作用，我们确实可以影响杆子的角度。通过反复计算这些括号，我们可以发现所有我们可能移动的方向。如果所有控制[矢量场](@article_id:322515)及其重复李括号的集合能够张成所有可能运动的整个空间，那么系统就被认为是**可控的**。通过巧妙的摆动，我们已经克服了系统的欠驱动性。

### 可能性的艺术：能量整形

另一种同样强大的思考控制的方式是通过能量的视角。每个机械系统都拥有能量，通常分为**动能**（运动的能量）和**势能**（储存的能量，例如在弹簧中或由于重力）。对于一个没有摩擦或外力的系统，总能量是守恒的。

从这个角度看，控制是策略性地增加或减少能量，以引导系统从当前状态到达[期望](@article_id:311378)状态的行为。想象一个在有轮廓的表面上滚动的弹珠。势能最低的状态位于山谷或碗的底部。如果我们想让弹珠最终停在某个特定位置，我们的目标有两个：首先，塑造表面，使[期望](@article_id:311378)位置成为唯一的、最低的点（这就是**能量整形**）；其次，增加摩擦力，使弹珠失去能量并停在底部，而不是永远来回滚动（这就是**[阻尼注入](@article_id:348646)**）。这种理念被称为**[基于无源性的控制](@article_id:343061)**[@problem_id:2704638]。

让我们考虑一个由弹簧连接的两个质量块组成的简单系统，我们只能对第一个质量块施加力[@problem_id:2704631]。

**势能整形：** 我们的目标是使原点（两个质量块都在其平衡位置静止）成为一个稳定平衡点。系统的自然势能为 $$V(q) = \frac{1}{2} k_0 q_1^2 + \frac{1}{2} k (q_1 - q_2)^2$$ 我们可以用控制力来有效地为系统增加势能。然而，由于我们的执行器只作用于第一个质量块，我们只能增加依赖于其坐标 $q_1$ 的能量。如[@problem_id:2704631]所示，我们可以向势能中添加一个类似 $\psi(q_1)$ 的项，例如，改变与第一个质量块相关的“刚度”。这改变了我们能量“碗”的形状。但一个被称为**匹配条件**的基本约束出现了。我们不能任意改变[势能景观](@article_id:304087)。具体来说，我们所做的任何改变都不能要求在未驱动的方向上施加力。在这种情况下，这意味着我们[期望](@article_id:311378)的势能关于未驱动坐标 $q_2$ 的[偏导数](@article_id:306700)必须与原始系统的偏导数相匹配。

**动能整形：** 这是一个更微妙的想法。动能由 $\frac{1}{2} p^\top M^{-1} p$ 给出，其中 $p$ 是动量，$M$ 是惯性矩阵。塑造动能意味着改变系统的惯性矩阵。这就像让弹珠在不同方向上感觉更重或更轻。但在这里，欠驱动施加了更严格的约束。正如在[@problem_id:2704631]中证明的那样，如果我们试图使惯性依赖于*未驱动*坐标（$q_2$）的位置，数学告诉我们这是不可能的。原因在于几何学：一个依赖于构型的惯性矩阵会引发[科里奥利力](@article_id:320500)和离心力。如果这些力出现在一个未驱动的方向上，我们的控制器就无法产生它们，[期望](@article_id:311378)的动力学也就无法实现。[期望](@article_id:311378)的运动几何必须与我们的驱动能力相一致。

然而，能量整形的工具箱里还有更多技巧。在某些情况下，我们可以引入[期望](@article_id:311378)的**陀螺力**[@problem_id:2704599]。这些是特殊的力，就像保持旋转陀螺仪直立的力一样，它们总是垂直于速度。它们不增加或减少能量（$\dot{H}=0$），但它们确实在系统的不同部分之间重新分配能量。通过精心设计这些虚构的能量路由路径，我们有时可以满足匹配条件，并实现原本不可能的动能整形。

**[阻尼注入](@article_id:348646)：** 一旦我们塑造了我们想要的能量碗，我们就需要让系统在底部稳定下来。我们通过注入阻尼来移除能量。一个简单的“无源”控制器可能会施加一个与速度成正比的力，$u = -k_d \dot{q}_1$，其作用类似于摩擦。但我们可以在哪里增加这种摩擦呢？不出所料，只能在执行器能“感觉”到的地方。正如[@problem_id:2704649]中精美展示的那样，我们可以施加阻尼的[速度空间](@article_id:360597)是由我们的执行器“张成”的子空间。这个“可阻尼子空间”可以用一个[投影矩阵](@article_id:314891)来表示。任何纯粹发生在这个子空间正交空间中的运动——在我们的执行器的“盲点”中——都不能被这种简单的控制方案直接阻尼。

### 终极捷径：[微分](@article_id:319122)平坦

李括号和能量整形的方法为控制欠驱动系统提供了强大、通用的工具。但对于一个特殊的、且出人意料地庞大的系统类别，存在一种更直接、更优雅的“作弊码”：**微分平坦**[@problem_id:2737826]。

这个想法近乎神奇。对于一个[微分](@article_id:319122)平坦的系统，我们可以找到一组特殊的输出——**[平坦输出](@article_id:351062)**——使得系统的整个状态（$x$）和所需的控制输入（$u$）都可以从这些[平坦输出](@article_id:351062)及其有限数量的时间[导数](@article_id:318324)中*代数地*确定。不需要对系统复杂的[微分方程](@article_id:327891)进行积分！

最典型的例子是四旋翼无人机[@problem_id:2700625]。它的状态很复杂：三维位置、三维速度、三维姿态和三维角速度。这看起来令人生畏。然而，它是微分平坦的。[平坦输出](@article_id:351062)就是它在空间中的位置 $\mathbf{p}(t)=(x(t), y(t), z(t))$ 和它的偏航角 $\psi(t)$。

让我们看看这是如何工作的。假设我们想让我们的无人机沿着空中一条特定的、平滑的路径飞行，比如一条螺旋线。这意味着我们已经定义了我们[平坦输出](@article_id:351062)的[期望](@article_id:311378)轨迹，$\mathbf{p}_d(t)$ 和 $\psi_d(t)$。找到所需控制的过程是一个简单的、分步的计算：

1.  从[期望](@article_id:311378)路径 $\mathbf{p}_d(t)$，我们可以计算出[期望](@article_id:311378)速度 $\dot{\mathbf{p}}_d(t)$，以及至关重要的[期望](@article_id:311378)加速度 $\mathbf{a}_d(t) = \ddot{\mathbf{p}}_d(t)$。
2.  无人机的牛顿第二定律是 $$m \mathbf{a} = T \mathbf{b}_3 - m g \mathbf{e}_3$$ 其中 $T$ 是推力，$\mathbf{b}_3$ 是无人机螺旋桨指向的方向，$m g \mathbf{e}_3$ 是重力。
3.  为了实现加速度 $\mathbf{a}_d(t)$，总推力矢量 $T \mathbf{b}_3$ 因此必须等于 $m(\mathbf{a}_d(t) + g \mathbf{e}_3)$。我们称这个所需力矢量为 $\mathbf{f}_{\text{req}}$。
4.  所需的推力大小 $T$ 就是这个矢量的长度：$T = \|\mathbf{f}_{\text{req}}\|$。
5.  无人机机体所需的指向 $\mathbf{b}_3$ 就是这个矢量的方向：$\mathbf{b}_3 = \mathbf{f}_{\text{req}} / \|\mathbf{f}_{\text{req}}\|$。
6.  利用这个所需的机体方向 $\mathbf{b}_3$ 和我们[期望](@article_id:311378)的偏航角 $\psi_d(t)$，我们可以完全确定无人机的三维姿态。
7.  通过对这个姿态求时间[导数](@article_id:318324)，我们可以找到必要的角速度和[角加速度](@article_id:356142)，这反过来又告诉我们电机必须产生什么扭矩。

这真是惊人。寻找随时间变化的正确电机指令这个极其困难的问题，被简化为仅仅在空间中画一条平滑的曲线。

当然，天下没有免费的午餐。平坦性的“魔力”有其局限性，这些局限性表现为映射中的**奇异点**。对于四旋翼无人机[@problem_id:2700625]：
-   **零推力：** 如果我们[期望](@article_id:311378)的轨迹要求无人机处于纯粹的自由落体状态（$\mathbf{a}_d = -g \mathbf{e}_3$）怎么办？所需的力矢量 $\mathbf{f}_{\text{req}}$ 变为零。机体方向的公式 $\mathbf{b}_3 = \mathbf{f}_{\text{req}} / \|\mathbf{f}_{\text{req}}\|$ 涉及除以零。这在物理上是合理的：如果无人机不产生任何推力，它的姿态就无关紧要，也无法控制。为了生成可行的轨迹，我们必须确保所需推力始终远离零。
-   **无限扭矩：** 角速度和扭矩的公式涉及位置路径的时间[导数](@article_id:318324)（加加速度 $\dddot{\mathbf{p}}$ 和加加加速度 $\ddddot{\mathbf{p}}$）以及除以推力大小 $T$。如果我们规划的轨迹要求在推力非常低的时刻加速度发生急剧变化（高加加速度），所需的角速度可能会变得巨大，超过无人机的物理能力[@problem_id:2700625, statement D]。

微分平坦并没有消除系统的物理约束；它只是让这些约束更加透明。它允许我们在“简单”的[平坦输出](@article_id:351062)空间中规划轨迹，同时关注其[导数](@article_id:318324)的界限，以确保最终的状态和输入在物理上是可实现的。

### 与不完美共存：现实世界的约束

到目前为止，我们的旅程都假设在一个完美的世界里：无瑕的模型、无限的执行器和完美的测量。现实则要混乱得多。一个真正鲁棒的控制系统必须能够优雅地处理这些不完美之处。

**[执行器饱和](@article_id:338274)与[吸引域](@article_id:351309)：** 真实的电机无法产生无限的力。我们优雅的控制律可能要求100牛顿的推力，但电机可能在10牛顿就达到极限了。这就是**[执行器饱和](@article_id:338274)**。当控制器饱和时，其行为会发生变化，我们推导出的稳定性保证可能不再成立。

这引出了**[吸引域](@article_id:351309) (ROA)** 的概念。对于给定的控制器，ROA 是指系统从该集合中的初始状态出发，保证能收敛到[期望](@article_id:311378)目标的集合。如果你从这个区域之外开始，控制器可能会饱和并失效。

我们如何找到一个安全的操作区域？能量再次提供了一个直观的答案[@problem_id:2738251]。我们可以计算在某个能量水平内，我们未饱和的控制器可能需要的最大控制力。然后，我们找到使这个所需力始终小于执行器物理极限的最大能量水平。这个能量函数的子[水平集](@article_id:311572) $\{ x \mid V(x) \le \rho \}$ 就成为我们可证明的安全[吸引域](@article_id:351309)。任何从这个能量“气泡”内部开始的轨迹，都保证会停留在内部并收敛到目标，而不会使控制器饱和。

**峰值观测器的危险：** 我们还假设我们可以完美地测量系统的每个状态。但通常我们做不到。对于一个我们只能测量位置 $x_1$ 但需要知道速度 $x_2$ 的系统，我们构建一个**观测器**——一个估计隐藏状态的软件模型。

为了快速获得一个好的估计，我们可能会使用一个**[高增益观测器](@article_id:343677)**。但这带来了一个被称为**峰值现象**的危险副作用[@problem_id:2736750]。如果我们的初始猜测是错误的，[高增益观测器](@article_id:343677)会在收敛到真实值之前，在短时间内产生极其巨大的、“峰值”的估计。如果我们的控制器盲目地相信这个瞬态的、疯狂的估计，它将指令一个同样疯狂的控制动作，这可能会使物理系统失稳。

解决方案是鲁棒设计的典范。我们承认观测器初始的不完美。我们可以使用平滑饱和函数来“忽略”不合理的巨大估计，从而保持控制动作有界且安全。我们甚至可以调度观测器的增益，开始时用低增益“温和”地启动它，只有当估计变得更可信时才增加其激进性。

从简单的摆动到[观测器设计](@article_id:327111)的复杂性，欠驱动系统的控制是一个关于优雅和创造力的故事。它告诉我们，控制并不总是关于支配，而是关于与动力学的和谐伙伴关系。通过理解运动的几何学、能量的流动以及我们系统固有的结构，我们可以实现看似不可能的事情，用一种轻巧而智能的触碰来引导复杂的机器。
## 引言
当我们考虑将一个集合中的元素映射到其自身的所有可能方式，然后将这些动作链接在一起时，会发生什么？这个简单的前提催生了一个强大的代数对象：[变换幺半群](@article_id:314057)。对可逆动作的研究引出了群的优雅世界，而包含不可逆的、会丢失信息的函数则创造了一个远为丰富和复杂的景象。本文旨在揭开这一结构的神秘面纱，弥合其抽象定义与实际影响之间的鸿沟。我们将首先深入探讨支配这些[变换的核](@article_id:309928)心原理和机制，探索诸如[幂等元](@article_id:313529)、消去律以及由Green关系提供的深刻序结构等关键概念。随后，我们将见证这些思想在实践中的应用，发现[变换幺半群](@article_id:314057)与计算机科学、数论、图论等不同领域之间令人惊讶的联系。让我们从考察这个多功能代数世界的基本构件开始我们的探索之旅。

## 原理与机制

想象一组简单的机器。每台机器从一个特定的位置集合（比如 $\{1, 2, 3\}$）中取出一个物体，并将其移动到该集合内的另一个位置。一台机器可能会交换位置1和2上的物体。另一台机器可能会无论物体在哪里，都将其移动到位置3。这些机器的世界——即从一个集合到其自身的所有可能函数——正是我们即将探索的。当我们开始将这些机器串联起来，让一台的输出成为下一台的输入时，我们就在执行**[函数复合](@article_id:305307)**。这种将函数链接在一起的简单行为，催生了一个丰富而优美的[代数结构](@article_id:297503)，即**[变换幺半群](@article_id:314057)**。

**[幺半群](@article_id:309656)**是一个简单的概念：它是一个事物（这里是我们的函数）的集合，带有一种组合它们的方式（复合），这种组合方式是满足[结合律](@article_id:311597)的，并且集合中包含一个特殊的“什么都不做”的元素。对于变换而言，这个元素就是**[恒等函数](@article_id:312550)** $id$，它将每个物体都留在其原始位置。它相当于一根能让信号无改变地通过的直导线。结合律，即 $(f \circ g) \circ h = f \circ (g \circ h)$ 这条规则，只是常识的陈述：将三台机器串联起来的总效果，并不取决于你是先组合前两台还是后两台。

### 函数动物园一览

如果我们只局限于完全可逆的函数——那些在不丢失任何物体或留下任何[空位](@article_id:308249)的情况下重新[排列](@article_id:296886)物体的函数——我们会得到一个非常整洁、行为良好的结构，称为**群**。这些[可逆函数](@article_id:304724)就是**[双射](@article_id:298541)**，函数世界中的贵族。但[变换幺半群](@article_id:314057)是一个更加狂野、更加民主的地方。它包含了所有可能的函数，而其中大部分函数的行为并没有那么良好。让我们来认识一些这里的“本地居民”。

首先，我们有终极的信息销毁者：**[常函数](@article_id:312474)**。像 $f(x) = c$（对所有 $x$）这样的函数，是一台无论输入什么都产生完全相同输出 $c$ 的机器。这些函数是[幺半群](@article_id:309656)中的“独裁者”。一旦一个[常函数](@article_id:312474)起作用，链条中后续的任何函数都无法改变最终的结果。这是因为 $(c \circ g)(x) = c(g(x)) = c$，意味着 $c \circ g = c$。用代数语言来说，这些被称为**左零元**。在一个有 $n$ 个元素的集合上，[变换幺半群](@article_id:314057)恰好有 $n$ 个这样的左零元，每个可能的常数输出对应一个。有趣的是，这里没有**右零元**——除了在单元素集合上，没有函数 $f$ 能使得对*所有*可能的 $g$ 都有 $g \circ f = f$ 成立 [@problem_id:1673251]。

接下来，我们遇到**幂等函数**。一个幂等函数是指，如果将它应用两次，得到的结果与应用一次相同：$f \circ f = f$。想象一台将三维物体投影到二维屏幕上的机器。第一次使用时，一个球体变成一个圆形。如果将这个平面的圆形再次送入投影仪，它出来的仍然是同一个圆形。操作已经稳定下来了。幂等函数具有一种非常优雅的内部结构：一个幂等函数的所有可能输出的集合（其**像**），恰好是该函数使其保持不变的所有点的集合（其**不动点**）。对于幂等函数 $f$ 的像中的任何点 $y$，必然有 $f(y) = y$。这一洞见使我们能够系统地构造和计算一个集合上所有的幂等函数。例如，在一个有3个元素的集合上，有10个这样的函数，其中只有一个是恒等映射 [@problem_id:1375103]。

### 当旧规则不再适用

在熟悉的数算术中，我们认为某些规则是理所当然的。例如，如果 $a \times b = a \times c$ 并且 $a$ 不为零，我们可以自信地从两边消去 $a$。这个逻辑在[变换幺半群](@article_id:314057)中还成立吗？

让我们来看看。考虑集合 $\{1, 2\}$ 以及其上的四个函数：[恒等函数](@article_id:312550) $id$、交换函数 $t$、常数1函数 $c_1$ 和常数2函数 $c_2$。现在，我们来看复合 $c_1 \circ id$。这得到的就是 $c_1$。那么 $c_1 \circ t$ 呢？这也得到 $c_1$，因为无论 $t$ 如何[排列](@article_id:296886)输入，$c_1$ 都会将结果映射到1。所以我们有 $c_1 \circ id = c_1 \circ t$，但显然 $id \neq t$。我们不能消去 $c_1$！**消去律**的这种失效，是由于存在非一对一（单射）函数的直接后果。因为 $c_1$ 将1和2都映射到同一个输出，它抹去了信息，而这种信息的丢失使我们无法逆向操作。类似的论证表明，非[满射函数](@article_id:333832)的存在破坏了右消去律 [@problem_id:1819996]。[变换幺半群](@article_id:314057)是一个非消去的世界。

这引导我们对“撤销”函数提出一个更深层次的问题——即逆的概念。函数 $f$ 的**[左逆](@article_id:314231)** $g$ 是一个从左边撤销它的函数：$g \circ f = id$。**[右逆](@article_id:321902)** $h$ 则从右边撤销它：$f \circ h = id$。
*   要使 $g \circ f$ 为[恒等函数](@article_id:312550)，$f$ 必须没有将任何两个不同的输入合并，因为如果它这样做了，$g$ 将无法知道该映射回哪个原始输入。换句话说，拥有[左逆](@article_id:314231)要求 $f$ 是**单射的**。
*   要使 $f \circ h$ 为[恒等函数](@article_id:312550)，它的像必须是整个集合。这意味着 $f$ 必须能够产生所有可能的输出。换句话说，拥有[右逆](@article_id:321902)要求 $f$ 是**满射的**。

在这里，我们偶然发现了有限世界和无限世界之间的一个深刻差异。
在**有限集**上，著名的鸽巢原理告诉我们，一个从集合到其自身的函数是单射的，当且仅当它是满射的。你无法在不重复的情况下将 $n$ 个物品放入 $n$ 个盒子，除非你使用了每一个盒子。这意味着对于[有限集](@article_id:305951)上的函数，拥有[左逆](@article_id:314231)保证了它也拥有[右逆](@article_id:321902)，反之亦然。不存在“单边”[可逆函数](@article_id:304724)；一个函数要么是完全可逆的（[双射](@article_id:298541)），要么根本没有逆 [@problem_id:1806569]。

在**[无限集](@article_id:297614)**上，这种等价性被打破了。考虑自然数集 $\mathbb{N}=\{1, 2, 3, \dots\}$。函数 $f(n) = n+1$ 将每个数向上移动一位。它显然是单射的（没有两个数有相同的后继数），但它不是[满射](@article_id:638955)的（它错过了1）。因此，它有一个[左逆](@article_id:314231)（例如，函数 $g(n)$，当 $n>1$ 时为 $n-1$，当 $n=1$ 时为1），但不可能有[右逆](@article_id:321902)。类似地，函数 $f(n)=2n$ 是单射但非[满射](@article_id:638955)的。这些函数拥有[左逆](@article_id:314231)但没有[右逆](@article_id:321902)，这在有限领域是不可能出现的现象 [@problem_id:1843549]。

### 变换的隐藏秩序

虽然与群相比，[变换幺半群](@article_id:314057)可能看起来混乱，但它受其自身深刻而优雅的原则支配。一个关[键性](@article_id:318164)质是它是一个**正则半群**。这意味着对于*任何*函数 $f$，无论它多么复杂或信息破坏性多强，总存在另一个函数 $g$，使得 $f \circ g \circ f = f$。这个 $g$ 被称为广义逆。

这个方程意味着什么？它告诉我们，我们可以找到一个函数 $g$，作为部分的“撤销”按钮。函数 $g$ 接收 $f$ 的输出，并将它们映射回一些有效的原始输入，这样再次应用 $f$ 就会恢复 $f$ 的原始结果。这保证了一种结构上的韧性；没有哪个函数在[幺半群](@article_id:309656)中会真正“丢失”，因为它总能在一个合适的伙伴的帮助下从自身恢复 [@problem_id:1820039]。

这种潜在的正则性可以通过一种强大的分类方案——**Green关系**——得到最好的理解。这些关系根据其基本结构将[幺半群](@article_id:309656)中的所有函数划分为族或类。其中最重要的两个是L关系和R关系。

*   两个函数 $f$ 和 $g$ 是 **$\mathcal{L}$-相关**的，如果它们可以通过在左边与某些其他[函数复合](@article_id:305307)而相互转换（即，存在 $h, k$ 使得 $h \circ f = g$ 且 $k \circ g = f$）。这个抽象的代数定义有一个惊人简单的转换：$f$ 和 $g$ 是 $\mathcal{L}$-相关的，当且仅当它们有相同的**核**。函数的核是它划分定义域的方式——即哪些输入集被映射到相同的输出。所以，如果两个函数以完全相同的模式“粘合”它们的输入，那么它们就在同一个 $\mathcal{L}$-类中 [@problem_id:1819997]。例如，一个集合上的所有常函数都是 $\mathcal{L}$-相关的，因为它们都具有将每一个输入元素粘合在一起的“泛”核。

*   对偶地，两个函数 $f$ 和 $g$ 是 **$\mathcal{R}$-相关**的，如果它们可以通过在右边复合而相互转换（$f \circ h = g$ 且 $g \circ k = f$）。这里相应的美妙性质是，$f$ 和 $g$ 是 $\mathcal{R}$-相关的，当且仅当它们有相同的**像**。也就是说，它们最终落在完全相同的输出集上，即使它们是从不同的输入到达那里的 [@problem_id:1782997]。

这些关系揭示了[变换幺半群](@article_id:314057)表面上的混乱是一种幻觉。其表象之下隐藏着一种“晶体”般的结构，其中函数根据它们最基本的属性——合并了什么（核）和落在了哪里（像）——被整齐地分类。这是一个完美的例子，展示了数学如何在起初看似任意复杂的世界中发现深刻而优美的秩序。
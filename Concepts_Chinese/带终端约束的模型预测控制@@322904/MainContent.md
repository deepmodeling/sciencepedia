## 引言
[模型预测控制](@article_id:334376)（MPC）已成为管理复杂系统的首选策略，它能够在遵守操作限制的同时优化决策。其运行方式是反复求解一个有限时域优化问题，这是一种功能强大但天生短视的方法。这就提出了一个关键问题：当我们的控制器只能预见有限的未来时，我们如何保证长期的稳定性和性能？答案在于一种强大的理论构造——[终端约束](@article_id:355457)，它提供了避免不良长期后果所需的前瞻性。本文旨在探讨这一关键概念的理论与应用。第一章“原理与机制”将解析[终端约束](@article_id:355457)背后的核心思想，解释它们如何将一个有限时域问题转变为一个具有稳定性和可行性铁证的问题。紧接着，“应用与跨学科联系”一章将展示这些理论保证如何构成先进控制策略的基石，从而使控制器不仅稳定，而且鲁棒、安全且具备经济智能。

## 原理与机制

[模型预测控制](@article_id:334376)的核心是一个深刻的问题，这个问题在从经济学到工程学的许多人类活动领域中都引起了共鸣：我们如何能在视野有限的情况下做出决策，却能对长期的成功充满信心？在每个时刻，MPC控制器都会求解一个优化问题，以找到在有限[预测时域](@article_id:325184) $N$ 内的最佳动作序列。它会精心规划接下来的 $N$ 步，以最小化一个成本——可能是一个目标误差与所耗能量的组合。这个问题可以正式表述为：找到一个输入序列 $(u_0, \dots, u_{N-1})$，使得总成本[函数最小化](@article_id:298829)，例如 $\sum_{k=0}^{N-1} \ell(x_k, u_k) + V_f(x_N)$，同时满足所有游戏规则：[系统动力学](@article_id:309707)、输入限制和[状态约束](@article_id:335313) [@problem_id:2746588]。一旦找到这个最优计划，控制器只应用*第一步*动作 $u_0$。然后，它从新的位置重新评估世界，并再次进行全新的规划。这就是“[滚动时域](@article_id:360798)”策略。

但这引出了一个困扰所有有限时域规划的幽灵：**短视性（myopia）**。一个在未来 $N$ 步内看似绝妙的计划，可能会将系统逼入绝境，使其在第 $N+1$ 步及以后处于一个非常糟糕的状态。想象一下开车时只看前方50英尺。你可能能漂亮地绕过一个坑洼，结果却发现自己正对着一个你没能看到的悬崖边缘。我们如何赋予控制器智慧，以避免这种灾难性的短视行为？

### 强制停止：一个简单但严格的解决方案

或许，确保良好结果的最直接方法就是对最终目标做出极其明确的规定。我们可以向优化问题添加一条非常强的规则：时域终点的状态 $x_N$ *必须* 是我们[期望](@article_id:311378)的目的地，例如原点 ($x_N = 0$) [@problem_id:1579689]。这被称为**终端[等式约束](@article_id:354311)**。它迫使控制器找到一条不仅在过程中表现良好，而且能在预测窗口内完美结束其旅程的路径。

这种方法有一个绝佳的副作用。如果我们将MPC问题的最优成本作为衡量系统“能量”或“不[期望](@article_id:311378)程度”的指标，这个[终端约束](@article_id:355457)能让我们证明该能量在每一步都会减少。为什么呢？因为在时刻 $t$ 找到的在 $N$ 步内到达原点的计划，为时刻 $t+1$ 的控制器提供了一个现成的、可行的（尽管可能不是最优的）计划：只需执行旧计划的尾部，并在最后添加一个零成本的动作以停留在原点。这个候选计划的成本严格小于原始计划的成本，因为我们已经“支付”了第一步的成本。新的最优计划的成本必须至少不高于这个候选计划的成本，因此“能量”保证会减少。这将最优成本变成了**[李雅普诺夫函数](@article_id:337681)**，这是证明控制理论中稳定性的黄金钥匙 [@problem_id:1579689]。

然而，这种严格性是有代价的：**可行性**。在固定的步数内强迫状态归零可能是不可能的。考虑一个简单的系统 $x_{k+1} = x_k + u_k$，其中你每秒最多能推动状态一个单位 ($|u_k| \le 1$)。如果你从位置 $x_0 = 4.2$ 开始，而你的时域只有 $N=4$ 秒，你根本无法到达原点；这个问题是不可行的。你至少需要 $N=5$ 秒的时域才能做到 [@problem_id:2724822]。这揭示了一个基本的权衡：硬[终端约束](@article_id:355457)是稳定性的有力工具，但它会严重缩小控制器能够找到有效计划的初始位置集合，尤其是在短时域的情况下。

### 接力赛：一个更优雅的保证

一种更灵活、更强大的方法是将MPC控制器看作不是完成单场比赛的短跑选手，而是一场无限接力赛中的赛跑者。时刻 $k$ 的控制器不仅要跑好自己的这一棒，还必须确保能在一个好的位置将接力棒交给时刻 $k+1$ 的控制器。这个“好的位置”是状态空间中一个经过特殊设计的区域，称为**[终端集](@article_id:343296)**，我们称之为“安全区” $\mathcal{X}_f$。

是什么让这个区域“安全”？有两点。首先，一旦你进入其中，就存在一个简单的、预先定义的备用计划——**终端控制器** $u=\kappa_f(x)$ ——它保证能让你永远保持在安全区内。这个性质被称为**正不变性** [@problem_id:2884349]。其次，这个备用计划还必须遵守所有系统规则，如输入限制 ($u \in \mathcal{U}$) 和[状态约束](@article_id:335313) ($x \in \mathcal{X}$) [@problem_id:2736421]。因此，MPC的任务被修改了：我们不再要求它到达原点，而只要求其 $N$ 步计划终止于这个“安全区”内的*某个地方*。

这个优雅的想法同时解决了两个问题。

#### 1. 永久可行性：“移位并追加”技巧

第一个保证是我们永远不会用尽选择。如果时刻 $k$ 的控制器找到了一个有效的计划，我们可以确信时刻 $k+1$ 的控制器也一定能找到一个。这被称为**[递归可行性](@article_id:323125)** [@problem_id:1579678]。证明过程非常有建设性。想象你是时刻 $k+1$ 的控制器。要证明存在一个解，你不必找到最优解，只需找到*一个*解。一个候选计划唾手可得：

1.  **移位**：取时刻 $k$ 控制器的最优计划，丢弃其第一步（已经执行）。将该旧计划剩下的 $N-1$ 步作为新计划的前 $N-1$ 步。
2.  **追加**：由于旧计划在安全区 $\mathcal{X}_f$ 内结束，你现在处于其边界上。对于你的最后一步，即第 $N$ 步，只需使用预先定义的、可靠的备用控制器 $u=\kappa_f(x)$。

根据安全区的定义，这个追加的动作保证是有效的（它遵守所有约束），并将使你回到 $\mathcal{X}_f$ 内。因此，你构建了一个完整的、有效的 $N$ 步计划。解总是存在的。接力棒被成功地、永远地传递下去 [@problem_id:2746593] [@problem_id:2884357]。

#### 2. 必然收敛：李雅普诺夫指南针

第二个保证是我们始终在向目标前进。这是通过增加一个**终端成本** $V_f(x)$ 来实现的，它是一个衡量终端状态“好坏”的函数。通常，这是一个二次函数，如 $V_f(x) = x^\top Px$，其作用类似于一个能量场，其中原点是能量最低点 [@problem_id:2724726]。

真正的魔力在于*共同*设计终端成本 $V_f$ 和终端控制器 $\kappa_f(x)$。它们是同一枚硬币的两面。我们必须选择它们，使得在安全区内，使用备用控制器走一步总是会导致终端成本 $V_f$ 下降。此外，$V_f$ 的下降量必须大于你为那一步支付的阶段成本 $\ell(x, \kappa_f(x))$。在数学上，这由一个著名的关系式——**李雅普诺夫不等式**表达：$V_f(A_Kx) - V_f(x) \le -\ell(x, Kx)$，其中 $A_K$ 是在终端控制器 $u=Kx$ 下的系统动力学 [@problem_id:2736353] [@problem_id:2884303]。

当这个条件成立时，我们可以考察 MPC 问题的总成本 $J_N(x)$。通过考虑同样的“移位并追加”候选计划，我们可以证明最优成本在每一步都必须减少：$J_N(x_{k+1})  J_N(x_k)$。总[成本函数](@article_id:299129) $J_N(x)$ 成为我们的李雅普诺夫指南针，总是指向下坡，朝向原点。我们不仅保证在每一步都有一个有效的计划（[递归可行性](@article_id:323125)），而且还能保证收敛到我们的目标（[渐近稳定性](@article_id:310162)）。[终端集](@article_id:343296)和与之匹配的终端成本的组合，为从短期规划中获得长期成功的铁证提供了保证。

### 附带说明：这个精密的机器总是必需的吗？

这种[终端集](@article_id:343296)和成本的机制是理论工程的一个美丽范例，为稳定性提供了鲁棒的充分条件。但它们总是*必需的*吗？令人惊讶的答案是否定的 [@problem_id:2884369]。

自然有时是仁慈的。如果我们控制的系统本身就是固有稳定的，即使是时域为 $N=1$ 的短视MPC也可能工作得很好。优化器会查看成本，意识到无为比有为累积的成本更少，并选择 $u=0$。系统将自行收敛到原点 [@problem_id:2884369]。

更有趣的是，即使对于一个不稳定的系统，如果[预测时域](@article_id:325184) $N$ “足够长”，MPC控制器也可能变得有先见之明。通过看得足够远，它会发现任何短期的贪婪行为都会导致状态爆炸，从而在未来累积巨大的成本。为了在长时域内最小化总成本，控制器自然而然地被迫选择能够稳定系统的动作，即使没有明确的[终端约束](@article_id:355457)告诉它要这样做。

这揭示了控制设计中一个深刻而实际的权衡。人们既可以投入计算资源于一个长的[预测时域](@article_id:325184)，让控制器自行找到稳定性；也可以预先投入分析精力来设计一个[终端集](@article_id:343296)和成本，从而允许一个更短、计算上更易处理的时域，同时保留对性能的严格保证。这种在计算和分析之间的选择，是现代控制艺术中一个反复出现的主题。
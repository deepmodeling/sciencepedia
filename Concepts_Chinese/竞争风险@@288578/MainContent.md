## 引言
在任何[事件发生时间数据](@entry_id:165675)的研究中，无论是追踪患者生存期还是预测机械故障，我们常常面临一个复杂情况：并非所有结局都生而平等。我们关心的事件可能会被另一个完全不同的事件所阻碍。这就是竞争风险的挑战，它是统计学中的一个基本概念，改变了我们解释概率、因果关系和现实世界结果的方式。传统的生存分析方法，如 [Kaplan-Meier](@entry_id:169317) 估计量，在这种情况下常常力不从心。将竞争事件视为简单的“删失”观察——就好像研究对象只是退出了研究——是一个严重错误，可能导致有偏的结论和危险的乐观预测。这里的关键知识差距不仅在于理解*为什么*这是一个问题，更在于*如何*正确地构建问题以获得有意义的答案。

本文为驾驭这一复杂领域提供了清晰的指南。我们将首先探讨竞争风险的核心**原理与机制**，对比有缺陷的方法与两种主要的有效框架：一种用于理解潜在原因（病因学），另一种用于预测现实世界的概率（预后）。随后，在**应用与跨学科联系**部分，我们将看到这些强大的概念如何应用于解决从医学、公共卫生到工程学和人工智能等领域的关键问题。

## 原理与机制

想象一下，你正在追踪一支在火星上执行任务的探测车队。你的主要任务是确定一辆探测车成功完成其五年任务的概率。然而，探测车可能因多种方式发生故障。我们感兴趣的主要事件是电池耗尽，我们称之为“任务结束”。但探测车也可能遭遇灾难性的机械故障，比如轮子陷进深沙里。一个事件（陷车）的发生，永久地阻止了另一个事件（电池在任务结束时自然耗尽）的发生。这就是**竞争风险**的本质：一个事件的发生阻止了我们感兴趣的事件的发生。

理解如何思考这些相互竞争的可能性，是统计学中最微妙也最美丽的挑战之一。一种天真的方法会让你误入歧途，而正确的路径则揭示了关于概率和因果关系的更深层次的真理。

### 简单删失的诱惑

在标准的生存分析中，当一个研究对象因与所研究事件无关的原因离开研究时（例如，他们搬家了或研究经费耗尽），我们称其为**删失**。我们只是停止观察他们，但我们做出了一个关键假设：这种删失是**非信息性的**。这意味着我们假设退出研究的人与留在研究中的人未来发生事件的风险是相同的。

将竞争事件（比如我们的火星探测车被困）视为另一种形式的删失是很有诱惑力的。毕竟，一旦探测车被困，我们就再也无法观察其电池寿命了。那么，为什么不直接将其标记为“删失”然后继续分析呢？这是一个危险的错误。一辆陷在沙里的探测车，其电池耗尽的未来概率恰好为零——它已经从仍然可以完成任务的探测车的“风险集”中被永久移除了。这是终极的**信息性删失**，它打破了像 [Kaplan-Meier](@entry_id:169317) 估计量这类标准方法的基本假设。

如果我们忽略这一区别，将竞争事件视为非信息性删失，我们就会系统性地**高估**我们感兴趣事件的概率。为什么？因为标准方法实际上假装那些经历了竞争事件的个体仍在游戏中，只是从我们的视线中隐藏了。它计算的是在一个竞争风险不存在的假想幻想世界中，我们所关注事件发生的概率。这有时被称为**净风险**。但在现实世界中，探测车可能会被困，实际概率，即**粗风险**，会更低。例如，一个简单的计算可能显示，在一个没有机械故障的世界里，五年内电池耗尽的概率是 18%。但在现实世界中，一些探测车会被困住，观察到电池耗尽的真实机会可能只有 16%。这种天真的方法通过忽视现实世界的风险，夸大了我们的期望[@problem_id:4983946] [@problem_id:5228284] [@problem_id:4546910]。

那么，我们如何才能正确处理呢？事实证明，没有一种唯一正确的方法，而是有两种——每一种都对应一个不同但同样重要的问题。

### 病因学视角：什么是潜在过程？

第一种方法关注潜在的机制。让我们提出一个病因学问题：“考虑到一辆探测车仍在运行，其电池在当前瞬间发生故障的瞬时风险是多少？”这就是**原因别风险**。它是对内在故障过程的一种度量，与其他可能出错的事情隔离开来。可以把它想象成单一故障路径的强度。对于人类而言，这可能是心脏病发作的瞬时风险，与癌症风险分开。

为了模拟某个因素（比如一种新型太阳能电池板）对电池故障原因别风险的影响，我们使用**原因别 Cox 模型**。这个过程出人意料地直接：为了模拟电池故障的风险，我们将所有陷在沙里的探测车在它们被困的时刻视为删失[@problem_id:4550995]。

这听起来就像我们刚刚批评过的天真方法！但关键区别在于：我们现在完全清楚，我们正在估计的量是原因别[风险率](@entry_id:266388)，而不是事件的总概率。我们正在问一个集中的、机械性的问题。这种方法对于研究生物学或物理机制非常强大。某种药物是否降低了[肿瘤进展](@entry_id:193488)的[瞬时速率](@entry_id:182981)？一种新合金是否降低了发动机[金属疲劳](@entry_id:182592)的速率？这些都是关于病因学的问题，而原因别风险是回答它们的正确工具[@problem_id:4576351]。

然而，即使在这里，也潜藏着一个微妙的陷阱。如果我们的新[太阳能电池](@entry_id:138078)板不仅影响电池寿命，还使探测车更重，从而增加了其被困的风险，我们的分析就可能被扭曲。那些装有新电池板且在任务[后期](@entry_id:165003)仍在运行的探测车，是那些*没有*被困的。它们是一个经过筛选的、或许更稳健的子群体。将我们的分析局限于“无事件”的探测车，可能会引入**选择偏倚**，使我们对太阳能电池板单独对电池寿命影响的纯粹因果解释变得复杂[@problem_id:4639120]。

### 预后视角：实际会发生什么？

让我们换个问题。我们不再问关于潜在速率的问题，而是问一个实际的、预后性的问题：“一辆探测车在其五年任务结束时因电池故障而报废的实际概率是多少？”这是现实世界的概率，是我们进行预测和评估总体结果所需要的量。这就是**累积发生函数 (CIF)**。

CIF 的美妙之处体现在一个单一而优雅的思想中。在某个时间点之前因 A 原因失败的概率，是在此之前每个瞬间发生此事的概率之和（或者更正式地说，是积分）。而在特定时刻 $t$ 因 A 原因失败的概率是什么呢？它是两件事的乘积：

1.  到那一刻为止，从*所有*事件（原因 A、原因 B 等）中存活下来的概率，$S(t)$。
2.  恰好在那个时刻因原因 A 失败的瞬时风险，也就是原因别风险，$h_A(t)$。

因此，CIF 是一个美妙的综合体：
$$
F_A(t) = \int_0^t h_A(u) S(u) du
$$
这个方程揭示了竞争风险的深层真理：事件 A 的概率不仅取决于其自身的风险率（$h_A$），还取决于所有竞争事件的[风险率](@entry_id:266388)，因为它们被融入了总生存概率 $S(u)$ 中[@problem_id:4546910]。

这种相互作用导致了一个有趣的悖论。想象一种强效的化疗药物。假设它极大地提高了癌细胞被杀死的[瞬时速率](@entry_id:182981)（对于“治愈”有很高的原因别风险）。然而，这种药物也有严重的毒副作用，增加了因治疗并发症死亡的瞬时速率（对于竞争风险有很高的原因别风险）。完全有可能，由于通过副作用杀死了太多的病人，这种药物反而*降低了*一年内被治愈的总概率。尽管治愈的*过程*更强烈，但能活得足够长久从中受益的人却更少了。更高的瞬时风险可能导致更低的累积概率[@problem_id:4783845]。

### 模拟现实世界：亚分布的巧妙技巧

如果我们想直接对 CIF——即现实世界的概率——进行建模，我们需要一种不同的模型。这就是 **Fine-Gray 模型**发挥作用的地方，它使用了一种巧妙的、反直觉的技巧，涉及一种叫做**亚分布风险**的东西。

为了理解这个技巧，让我们回顾一下“风险集”的概念。对于原因别风险，任何时间的风险集只包括那些仍然存活且无事件的个体。Fine-Gray 模型重新定义了风险集。为了模拟电池故障的概率，它将被困在沙里的探测车*保留在*风险集的分母中[@problem_id:4975279]。

这似乎很奇怪。一辆被困的探测车怎么可能“有风险”发生电池故障呢？它不可能。但是通过将这些“注定失败”的个体保留在分母中，模型正确地“稀释”了电池故障的速率。它承认了电池故障的候选池正在缩小，不仅因为电池故障本身，也因为机械故障。这种数学操作确保了得到的速率——亚分布风险——恰好是直接模拟 CIF 所需的速率[@problem_id:4783845]。

这给了我们两个主要工具：
*   **原因别模型：** 最适合**病因学**研究。它们问“为什么”，并探索一个因素对特定生物或机械路径的直接影响。
*   **Fine-Gray（亚分布）模型：** 最适合**预后**。它们问“如果……会怎样”，并预测在一个充满竞争可能性的世界中一个事件的总概率[@problem_id:4576351] [@problem_id:4639120]。

这两个世界遵循不同的规则。一个暴露因素对原因别风险的影响可能随时间保持不变（恒定的原因别风险比），但对亚分布风险的影响却是时变的。这是因为亚分布风险是所有起作用的原因别过程的复杂混合体[@problem_id:4991154]。最终，没有单一的“正确”模型。只有不同的问题。竞争风险统计学的美妙之处不在于找到一个单一的答案，而在于欣赏通过提出正确问题所带来的清晰。


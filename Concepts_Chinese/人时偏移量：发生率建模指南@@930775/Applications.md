## 应用与跨学科联系

现在我们已经熟悉了人时偏移量的原理，你可能会问：“它有什么用？”这是一个合理的问题。一个物理或统计原理的价值仅在于它所能带来的理解。而在这个案例中，答案是：它的用处大得惊人。这个简单、近乎谦逊的会计技巧——不仅考虑受试者，还考虑*受试者-时间*——是现代定量科学中最悄然强大的思想之一。在一个事物很少整洁有序的世界里，它是解开公平比较之锁的钥匙。让我们踏上一段旅程，看看这一个思想如何在广阔的学科领域中开花结果。

### 公平比较的基石：流行病学与药物安全

想象你是一名科学家，肩负着一项重大的责任：确定一种新的救命药物是否有一种罕见但危险的副作用。你收集了数千名服用新药的人和数千名服用旧标准药物的人的数据。一年后，你发现新药组有$100$个不良事件，而旧药组只有$60$个。看起来新药风险更高，不是吗？

但等一下。如果服用新药的人平均随访时间更短呢？也许是因为研究设计就是这样，或者出于其他任何原因。如果你只比较计数，那就像试图通过看哪辆车开得更远来判断哪辆车更快，而不问每辆车开了多久！问题不是“有多少事件？”，而是“*每单位时间*有多少事件？”

这时，我们的主角——人时偏移量——登场了。通过将每个组中每个人被观察的所有月份或年份加总，我们得到了总的“人年”观察量。然后我们可以计算一个*发生率*：事件数除以总人时。也许新药组在$20,000$人年里有$100$个事件，而旧药组在$25,000$人年里有$60$个事件。

新药的率是 $\frac{100}{20,000} = 0.005$ 事件/人年。
旧药的率是 $\frac{60}{25,000} = 0.0024$ 事件/人年。

现在情况更清楚了！新药的事件*率*实际上更高。通过使用带有对数人时偏移量的泊松[回归模型](@entry_id:163386)，我们可以形式化这个比较，计算发生率比（IRR），甚至为我们的估计值加上[置信区间](@entry_id:138194)来表示我们的不确定性 [@problem_id:4979003]。这项在药物流行病学中的基本应用，是像FDA这样的机构监控你未来可能使用的药物安全性的基石。它确保我们做出公平的比较。

### 构建更丰富的世界：从简单分层到复杂模型

当然，世界很少是简单的A对B的比较。如果我们正在研究职业健康，想知道一种清洁剂是否会导致皮疹怎么办？风险可能取决于剂量：可能存在低、中、高暴露组。同样的原则适用。我们可以使用基于偏移量的模型来估计三个组中每个组的发生率，从而让我们能够看到是否存在剂量-反应关系——即更多的暴露是否会导致更高的皮炎发生率？[@problem_id:4448761]。

我们可以更进一步。我们可以构建一个丰富的、包含许多不同因素的多变量模型。想象一下公共卫生官员正在追踪[流感](@entry_id:190386)样疾病（ILI）。新病例的发生率可能取决于诊所是否接受了干预（如口罩和洗手液）、季节（冬季流感更多）以及社区的社会经济剥夺程度。通过拟合一个单一的泊松回归模型，并为诊所的人口规模（我们的人时！）设置一个偏移量，我们可以同时估计这些因素中每一个的影响 [@problem_id:4804286]。

在这里，偏移量揭示了它更深层的魔力。当模型中包含偏移量时，我们估计的每一个系数都被转换了。代表“干预”的变量的系数不再告诉我们病例*计数*的变化；它告诉我们病例*率*的乘法变化。截距不再是一个基线计数；它是所有其他因素为零时的基线*率*。偏移量从根本上改变了我们所回答问题的性质，将其从“多少？”提升到更深刻的“多频繁？”。

### 时间之箭：处理动态与复发事件

到目前为止，我们都把时间当作一个可以加总和被除的分母。但时间不仅仅是一个分母。如果暴露在研究*期间*发生了变化怎么办？一个人可能在随访的前五年是吸烟者，然后戒烟了。我们该如何处理？

在这里，一个极其优雅的技术——“人时分割”——来帮助我们。这个想法很简单：如果一个人的暴露状态发生变化，我们只需将他们的随访历史切成几段。我们为他们作为吸烟者的时间创建一个“记录”，为他们作为非吸烟者的时间创建一个新记录。这个人现在为两个不同的暴露组贡献了人时。通过对每个人都这样做，我们创建了一个由人时区间组成的新数据集，其中每个区间内的暴露是恒定的。然后——你猜对了——我们可以将我们可靠的带有偏移量的泊松模型应用于这个扩展的数据集 [@problem_id:4837934]。这个简单的技巧使我们能够用同样的基本工具来分析复杂的、随时间变化的暴露。

这种联系非常深刻。这种分割时间并使用泊松模型的方法，在数学上被证明与生存分析中一个非常著名且强大的方法——Cox比例风险模型——是等价的，至少在某些条件下是这样 [@problem_id:4546918]。它揭示了统计学中一种美妙的统一性：两条看似不同的路径通向同一个理解的顶峰。

这种灵活性不止于此。那么复发事件呢，比如哮喘发作？你*第一次*发作的风险可能与你*第二次*或*第三次*发作的风险不同。我们同样可以运用我们的原则。我们可以对一个人的随访时间进行分层。从研究开始到他们第一次发作的时间是“第一次事件的风险人时”。从他们第一次发作后到第二次发作的时间是“后续事件的风险人时”。通过分别对这些不同风险时期的率进行建模，我们可以研究一个因素，比如高粉尘暴露，对引发首次发作和导致复发的影响是否不同 [@problem_id:4632620]。

### 拥抱混乱：从理想模型到真实世界数据

现实生活是混乱的。人是美好而又令人沮丧地复杂的。数据很少符合教科书中原始的假设。当我们的方法遇到现实时会发生什么？

一个常见的难题是“[过度离散](@entry_id:263748)”。有时，事件的聚集程度比简单的、无记忆的泊松过程所暗示的要高。在我们的哮喘例子中，有些人可能就是比其他人更“易于加重”。这导致计数的方差大于均值，违反了泊松模型的一个关键假设。解决方案是使用一个更灵活的模型，比如负二项（NB）回归。其美妙之处在于，N[B模型](@entry_id:159413)仍然使用完全相同的对数人时偏移量来正确地建模率！这个核心思想足够稳健，可以处理这种统计上的复杂性 [@problem_id:4822204]。

一个更大的挑战是人类行为。在随机对照试验（RCT）中，我们将一组分配给新疗法，另一组分配给安慰剂。但如果疗法组的人停止服药，或者安慰剂组的人开始从自己的医生那里服用有效疗法呢？这种情况时有发生。如果我们根据人们*实际*接受的治疗来分析他们（一种“按实际治疗”分析），我们就会破坏保护我们免受偏倚的随机化。

解决方案是强大的**意向性治疗（ITT）**原则：按照他们被随机分配的方式进行分析，无论他们后来做了什么。这给出了*开具该药物这一政策*效果的[无偏估计](@entry_id:756289)。为此，我们比较分配到疗法组的全部人群与分配到安慰剂组的全部人群的事件率。我们如何计算这些率呢，特别是在有复发事件和不同随访时间的情况下？使用计数回归模型（如泊松或NB）和人时偏移量 [@problem_id:4603157]。偏移量是使这种对真实世界试验进行关键、务[实分析](@entry_id:137229)成为可能的引擎。

### 前沿：背景、因果与复杂性

拥有了这样一个多功能的工具，我们可以开始提出一些科学中最深刻的问题。我们不是孤立的个体；我们嵌套在家庭、社区和社会中。你的邮政编码对你健康的影响是否和你的基因编码一样大？

想象一项跨越许多不同社区的疾病研究，每个社区都有不同程度的社会经济剥夺。我们想要区分作为个体吸烟者的影响和生活在贫困地区的*背景*效应。一个分层或[多水平模型](@entry_id:171741)允许我们这样做。它为每个地区包含一个随机效应，以解释聚集性。在这个复杂模型的核心，对于嵌套在各自地区内的每个个体，我们再次使用——带有对数人时偏移量的泊松或N[B模型](@entry_id:159413)来建模他们的事件计数 [@problem_id:4620521]。这个原则可以向上扩展，让我们能够探索健康和疾病的多层次性质。

最后，我们到达了前沿：对因果关系的追求。在观察性研究中，从相关性推断因果关系是出了名的困难，尤其是当暴露和结果之间的关系随时间展开时。一个主要挑战是时变混杂，即一个变量（如疾病严重程度）既是过去治疗的后果，又是未来治疗的原因。标准回归在这里会失败。

进入边际结构模型（MSM），一种来自因果推断的尖端技术。它使用一种称为[逆概率](@entry_id:196307)加权的方法来创建一个“伪人群”，在这个人群中混杂已经被打破。这是一个卓越而复杂的想法。但是在完成了创建权重和构建伪人群的所有复杂工作之后，我们如何分析结果呢？我们如何估计因果发生率比？我们拟合一个加权的负二项回归，并带有……一个对数人时偏移量 [@problem_id:4822266]。

即使在因果推断的最前沿，这个正确核算风险时间的基本原则仍然是不可或缺的分析引擎。从最简单的两组比较到最复杂的因果模型，人时偏移量是一条统一的线索，是一个简单的想法，它让我们能够提出，并常常回答，关于我们周围世界的具有深远重要性的问题。
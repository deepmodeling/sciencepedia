## 应用与跨学科联系

我们已经探索了延迟不敏感设计的原理，看到电路如何在某种意义上感知自身的进度。我们用一种更民主的握手和自定时信号系统取代了全局时钟的僵化节拍。这可能看起来只是一个奇特的现象，一种巧妙的逻辑技巧。但它究竟有何*用途*？这种无时钟哲学开启了哪些新世界？事实证明，其影响是深远的，从最微小的逻辑门波及到现代计算机体系结构中最宏大的挑战。正是在这里，这个思想的真正美妙之处得以展现——不是作为一个抽象概念，而是作为构建更智能、更高效、更鲁棒的计算机器的强大工具。

### 自我思考的构建模块

让我们从最底层开始，从构成处理器的普通组件开始。我们如何构建一个不需要时钟的简单加法器？诀窍，正如我们所见，在于改变我们表示信息的方式。我们不再用单根导线的高电平表示“1”，低电平表示“0”，而是使用一对导线——这种技术称为**[双轨编码](@entry_id:167964)**。一根线变高表示“1”，另一根变高表示“0”，当两根线都为低电平时，值为“空”或“尚未就绪”。

通过这个简单的改变，一个[全加器](@entry_id:178839)单元可以被构造成“输入完备”的。这意味着它的内部逻辑结构保证了和与进位输出只有在所有三个输入——A、B和进位输入——都已到达并有效之后，才会从“空”状态转换到有效状态。电路天生会等待其输入，计算结果，然后通过产生一个有效输出来有效地举手示意：“我完成了！”[@problem_id:1914701]。这个原理不限于简单的加法器。它可以扩展到构建用于高速[超前进位加法器](@entry_id:178092)中更复杂的生成-传播逻辑。此外，我们可以将许多这样的模块的“完成”信号组合起来，为整个模块创建一个分层的完成信号，报告整个多步计算何时完成 [@problem_id:1918226]。我们正在构建的电路不仅在处理数据，而且还在传达它们自己的操作状态。

### 可变时间的自由

这里我们来到了异步设计最优雅的优势之一。[同步电路](@entry_id:172403)是其自身时钟的囚徒。[时钟周期](@entry_id:165839)必须足够长，以容纳电路可能执行的绝对最慢、最坏情况下的操作，即使这种情况极为罕见。这就像一列火车，即使只载着一根羽毛，也必须总是在车站等待它*可能*需要装载一头大象的时间。

[异步电路](@entry_id:169162)摆脱了这种束缚。它们花费的时间恰好是处理特定数据所需的时间。考虑一个专门的加法器，比如用于旧的余三码的加法器，它有时需要根据一个中间进位位进行额外的校正步骤。在同步世界中，每一次加法都必须为这种潜在校正的延迟留出预算。然而，一个自定时电路会自然地适应。如果需要校正，其完成检测逻辑会等待该步骤完成。如果不需要，它会更早地发出完成信号 [@problem_id:1934289]。它以*实际*完成工作的速度运行，而不是以*可能*需要完成的工作的速度运行。

这不仅仅是一个边缘案例；它反映了关于计算的深刻真理。对于许多算法来说，最坏情况路径在统计上是罕见的。一个经典的例子是简单的[行波进位加法器](@entry_id:177994)。最坏情况延迟发生在一个进位必须从最低有效位一直传播或“[行波](@entry_id:185008)”到最高有效位时。[同步设计](@entry_id:163344)必须为其时钟设定这种悲观情景。但这到底多久发生一次？[概率分析](@entry_id:261281)表明，平均而言，进位链会早得多地终止。一个异步[行波进位加法器](@entry_id:177994)天生就利用了这一点。它的平均完成时间可以显著快于其同步表亲所受束缚的最坏情况时间 [@problem_id:1913355]。它本质上是[平均情况分析](@entry_id:634381)的物理体现，通过对其自身数据的统计性质敏感来获得性能优势。

### 系统规模的异步性

从单个算术单元放大来看，这些原理在如何连接大型片上系统（SoC）的不同部分方面找到了强大的应用。例如，在同步和[异步总线](@entry_id:746554)之间的选择涉及一组有趣的工程权衡。

这并非总是一个简单的胜利。[异步总线](@entry_id:746554)的请求-确认握手本身会引入开销。定量比较可能会显示，对于像优先级编码器这样的简单逻辑块，一个精细调校的同步流水线可以实现更高的峰值[吞吐量](@entry_id:271802)，因为它不必为每一次传输都支付[四相握手](@entry_id:165620)的时间代价 [@problem_id:3668804]。

选择也会影响物理设计和成本。为了满足高[吞吐量](@entry_id:271802)要求，一个具有握手延迟的[异步总线](@entry_id:746554)可能需要比高频[同步总线](@entry_id:755739)更宽的数据路径。更宽的总线意味着芯片上需要更多的物理引脚，这直接转化为更高的制造成本 [@problem_id:3683499]。

然而，在某些系统级场景中，异步方法在效率上提供了独特的优势。考虑一个共享的双向总线，不同的设备轮流读写数据。为了防止总线方向从写变为读时发生信号冲突，[同步设计](@entry_id:163344)必须插入一个“总线换向”周期——即不传输数据的空闲周期，浪费了宝贵的时间。异步设计可以通过使用独立的单向路径进行读写来优雅地解决这个问题。这完全消除了换向惩罚，从而导致更高的总线*占用率*，意味着更大比例的时间用于做有用的工作 [@problem_id:3683508]。

### 解决现代计算的危机

也许延迟不敏感设计最激动人心的应用不是优化老问题，而是解决当今计算机体系结构面临的新的、生存性危机。几十年来，设计师依赖于Dennard缩放定律，这是一个奇妙的原理，使得晶体管每一代都变得更小、更快、更节能。那个时代已经结束。我们仍然可以在芯片上封装更多的晶体管，但我们无法同时为它们全部供电而让芯片不熔化。这导致了两个主要挑战：“[功耗](@entry_id:264815)墙”和“[暗硅](@entry_id:748171)”问题。

现代SoC是包含众多模块的庞大系统——处理器、[内存控制器](@entry_id:167560)、无线电——通常需要以不同的速度运行。强迫它们全部随着一个快速的全局时钟节拍前进，[功耗](@entry_id:264815)巨大。一个更实际的方法是**全局异步，局部同步（GALS）**。在这里，每个模块（或“时钟域”）都运行在自己的[局部时](@entry_id:194383)钟上，这些独立的域进行[异步通信](@entry_id:173592)。这通常通过[异步FIFO](@entry_id:171325)缓冲器来完成，它可以在没有共享时钟的情况下安全地在模块之间传递数据。仔细的[功耗](@entry_id:264815)分析表明，这种GALS方法比在整个芯片上[分布](@entry_id:182848)一个庞大、高频的全局时钟树并使用复杂的[时钟门控](@entry_id:170233)方案要节能得多 [@problem_id:1945202]。

这就把我们带到了“[暗硅](@entry_id:748171)”末日。由于整个芯片有固定的功耗上限，我们可以构建一个拥有（比如说）16个核心的处理器，但我们可能只有足够的功率预算来同时“点亮”其中的10个。剩下的6个核心就是“[暗硅](@entry_id:748171)”——功能完好，但因功耗限制而无法使用。这个功耗预算的很大一部分被全局时钟网络消耗了。如果我们能回收那部分功耗呢？

这正是异步设计成为英雄的地方。通过将一些计算岛设计成无时钟的，我们消除了它们对时钟树[功耗](@entry_id:264815)的贡献。从时钟网络节省下来的功率可以用来点亮额外的异步岛。一个混合架构，包含少量用于延迟敏感任务的同步核心和大量用于[吞吐量](@entry_id:271802)导向计算的异步核心，可以在相同的严格[功耗](@entry_id:264815)上限下点亮更多的总核心数，并实现更高的整体性能 [@problem_id:3639280]。这是一个从我们受热限制的硅预算中挤出更多有用计算的绝佳策略。

这些权衡植根于C[MOS晶体管](@entry_id:273779)的基本物理特性。[异步电路](@entry_id:169162)的性能优势来自于利用平均情况延迟和避免同步时钟所需的大量时序裕量。[功耗](@entry_id:264815)优势来自于消除时钟树，这是动态功耗 $P_{dyn} = \alpha C V^{2} f$ 的主要来源。然而，握手逻辑增加了其自身的功耗和面积开销。当我们为了节省功耗而将电源电压（$V$）推得越来越低时，门延迟急剧增加，即使电路不切换时也存在的静态泄漏功耗可能成为一个主要问题。异步设计中额外的握手电路会增加总泄漏，可能会抵消部分动态[功耗](@entry_id:264815)节省，尤其是在近阈值操作中 [@problem_id:3667242]。

从最小的加法器到最大的片上超级计算机，延迟不敏感设计提供了一种丰富而另类的思维方式。它不是万能药，而是一种复杂的工具，它用全局时钟简单、粗暴的规律性换来一种更细致、更具适应性，并且通常更高效的计算形式。在一个受功耗和复杂性限制的世界里，这种无时钟逻辑的永恒思想从未如此适时。
## 引言
在我们组织和理解世界的探索中，我们构建了巨大的知识图谱——即连接实体及其关系的结构化事实库。然而，一个静态的事实集合，无论多么庞大，都无法实现真正的推理和发现。关键的挑战在于将这种符号化知识转化为机器学习模型可以用来推断新连接和泛化模式的格式。本文旨在通过深入研究知识图谱嵌入来弥合这一差距，这是一种将符号化知识映射到几何空间的强大技术。在第一章“原理与机制”中，我们将探讨这种转换的核心思想，追溯基础模型从简单的平移概念到复杂的基于复数的框架的演变。随后，“应用与跨学科联系”一章将展示这些嵌入在现实世界中的影响，展示它们在[药物发现](@entry_id:261243)中的应用、与[深度学习架构](@entry_id:634549)的协同作用，以及在构建跨多个科学领域的智能系统中的作用。

## 原理与机制

科学的核心在于发现事物之间的关系。知识图谱正是这些关系的宏大、结构化的集合，是一个由“(布洛芬, *治疗*, 头痛)”或“(心房, *是...的一部分*, 心脏)”等事实构成的庞大网络。但是，一个由孤立事实组成的知识库并不等同于理解。要真正理解，我们需要一张地图——一种观察知识版图、衡量思想之间距离并导航连接它们路径的方法。知识图谱嵌入就是我们绘制这张地图的方式。其原理既深刻又简单：将抽象的、符号化的事实世界转化为具象的、几何化的点与向量世界。

### 从事实到几何：核心思想

想象一下，我们知识图谱中的每一个概念——每一种药物、每一种疾病、每一个基因——都是广阔多维空间中的一个点。嵌入就是这个点的坐标，一个由数字组成的向量，如 $\mathbf{e} = (e_1, e_2, \dots, e_d)$。其魔力不在于这些点本身，而在于它们所创造的几何结构。我们希望以一种方式排列这些点，使它们的空间关系能反映它们的真实世界关系。

我们图谱中的每一个事实都是一个 $(h, r, t)$ 形式的三元组，由一个**头实体** ($h$)、一个**关系** ($r$) 和一个**尾实体** ($t$) 组成。我们的目标是为每一个元素学习[向量表示](@entry_id:166424)——即嵌入：$\mathbf{h}$、$\mathbf{r}$ 和 $\mathbf{t}$。然后，我们需要一个**[评分函数](@entry_id:175243)**，我们称之为 $s(h, r, t)$，它接收这三个向量并生成一个数值，告诉我们根据我们的几何地图，这个事实有多“ plausible”（可信）。一个真实的、已观察到的事实应该得到高分；一个无意义的事实则应得到低分。这种方法的美妙之处在于，一旦这张地图构建完成，我们就可以通过寻找我们原始知识库中没有的、但得分很高的连接来发现新事实——这个过程被称为[链接预测](@entry_id:262538)。

但是，我们的地图应该遵循什么样的几何规则呢？[评分函数](@entry_id:175243)的选择正是知识图谱嵌入的艺术与科学真正开始的地方。

### 关系即旅程：平移思想

让我们从我们能想到的最直观的想法开始。如果关系只是一段旅程呢？要从代表头实体 $\mathbf{h}$ 的点到达代表尾实体 $\mathbf{t}$ 的点，我们只需沿着代表关系 $\mathbf{r}$ 的向量行进。这给了我们一个极其简洁的方程：

$$
\mathbf{h} + \mathbf{r} \approx \mathbf{t}
$$

这是 **TransE** 模型背后的核心思想，它是基础的平移模型之一 [@4375822]。一个事实 $(h, r, t)$ 的可信度取决于这个方程的成立程度。我们可以将[评分函数](@entry_id:175243)定义为平移后的头实体（$\mathbf{h} + \mathbf{r}$）与尾实体（$\mathbf{t}$）之间距离的负值。一个完美的事实两者之间的距离为零。例如，如果我们的[评分函数](@entry_id:175243)是 $s(h,r,t) = -\|\mathbf{h} + \mathbf{r} - \mathbf{t}\|$，那么距离越小，得分越接近于零，即得分越高。在一个玩具般的二维世界里，如果“药物”的嵌入是 $\mathbf{h}=(1,0)$，“治疗”的嵌入是 $\mathbf{r}=(0,1)$，“疾病”的嵌入是 $\mathbf{t}=(1,1)$，那么平移后的头实体就是 $\mathbf{h}+\mathbf{r} = (1,1)$，与尾实体完全匹配。距离为零，得到满分 [@4846326]。

这个想法强大而优雅。它甚至可以捕捉推理链。如果关系 $r_3$ 是 $r_1$ 和 $r_2$ 的组合，模型通过向量相加就能自然地学习到 $\mathbf{r}_3 \approx \mathbf{r}_1 + \mathbf{r}_2$。

然而，就像物理学中许多优美而简单的思想一样，这个想法在压力之下也会出现问题。如果我们有一个对称关系，比如 `interacts_with`（相互作用），会发生什么？如果蛋白质A与蛋白质B相互作用，那么蛋白质B也必须与蛋白质A相互作用。我们的模型必须同时满足两个条件：$\mathbf{h}_A + \mathbf{r}_{interacts} \approx \mathbf{t}_B$ 和 $\mathbf{h}_B + \mathbf{r}_{interacts} \approx \mathbf{t}_A$。稍作代数运算就会发现，这迫使关系向量几乎为零（$\mathbf{r}_{interacts} \approx \mathbf{0}$），并且两个实体向量几乎相同（$\mathbf{h}_A \approx \mathbf{t}_B$）。这是一场灾难。模型会崩溃，使得关系变得毫无意义，并将两个不同的实体混为一谈 [@4375822] [@4577567]。平移模型也无法处理一对多关系，比如一种药物靶向多种蛋白质；一个关系向量不能同时从一个头实体指向多个不同的尾实体位置 [@5205739]。

### 关系即变换：[双线性](@entry_id:146819)思想

简单的平移旅程限制性太强。也许关系不仅仅是移动，而是更复杂的**变换**。它们不只是移动头实体，而是与之互动，改变其上下文以与尾实体对齐。这引导我们走向一类新的模型：**双[线性模型](@entry_id:178302)**。

我们用乘法代替加法。**DistMult** 模型提出了一个看起来像三向交互的[评分函数](@entry_id:175243)：

$$
s(h,r,t) = \sum_{k=1}^{d} h_k r_k t_k
$$

在这里，分数是三个向量逐元素乘积之和。这个模型有一个有趣的特性。让我们用它来测试我们的老对手——对称关系。如果我们交换头实体和尾实体，分数变为 $s(t,r,h) = \sum_k t_k r_k h_k$。由于实数的乘法是可交换的，分数完全相同！DistMult *本质上*是对称的。它非常适合处理像 `is_married_to`（与...结婚）或 `interacts_with`（相互作用）这样的关系 [@5205739]。

但自然界充满了悖论。在解决了对称性问题的同时，我们又制造了它的反面。对于有方向性的，即**反对称**关系，比如 `is_part_of`（是...的一部分），该怎么办？“心房 *是* 心脏 *的一部分*”是正确的，但“心脏 *是* 心房 *的一部分*”是错误的。由于 DistMult 的[评分函数](@entry_id:175243)在代数上被强制为对称的，它无法区分这两种陈述。它在结构上对方向性是盲目的 [@4846359]。我们陷入了僵局。我们有一个用于旅程的模型，另一个用于对称握手，但我们需要一个统一的框架，能够自行判断一个关系遵循哪种模式。

### 对立的统一：寻找通用模型

寻求一个既能处理对称性又能处理[反对称性](@entry_id:261893)的通用模型，将我们引向了数学中最优美的工具之一：**复数**。通过将我们的几何地图从熟悉的实数空间（$\mathbb{R}^d$）移动到更丰富的复数平面（$\mathbb{C}^d$），我们获得了一个新的自由度。

**ComplEx** 模型正是这样做的。它的[评分函数](@entry_id:175243)看起来与 DistMult 惊人地相似，但有一个关键的转折：

$$
s(h,r,t) = \mathrm{Re}\left(\sum_{k=1}^{d} h_k r_k \overline{t_k}\right)
$$

在这里，嵌入是复数向量，尾实体 $\mathbf{t}$ 的嵌入是共轭的（$\overline{t_k}$）。这个单一的操作——翻转虚部的符号——打破了对称性。现在，$s(h,r,t)$ 不再保证等于 $s(t,r,h)$。模型终于可以学习有向关系了。但对称性呢？如果一个关系是真正对称的，模型可以简单地学习一个纯实数（虚部为零）的关系嵌入 $\mathbf{r}$，ComplEx 就能优雅地退化为对称的 DistMult 模型 [@4577567] [@4846359]。这是一个强大科学模型的标志：它是一个泛化，将更简单的情况作为特例包含在内。

在复数平面内的另一种优雅方法是 **RotatE** 模型。它重新构想了关系，不将其视为交互，而是**旋转**。在这里，尾实体是通过在复数空间中旋转头实体得到的，关系定义了每个维度的旋转角度：$\mathbf{t} \approx \mathbf{h} \circ \mathbf{r}$，其中 $\circ$ 是逐元素乘法，$\mathbf{r}$ 的每个分量都是模为1的复数。[评分函数](@entry_id:175243)再次是负距离，$s(h,r,t) = -\|\mathbf{h} \circ \mathbf{r} - \mathbf{t}\|$。这个模型表现力惊人。它可以捕捉对称性（旋转180度是其自身的逆）、反对称性（任何其他旋转都不是）甚至[组合性](@entry_id:637804)（链接旋转就是将关系向量相乘）[@4577567] [@5205739]。

### 学习地图：有原则地“说谎”的艺术

我们有了这些优美的几何框架，但我们如何教计算机为数百万个实体和关系找到正确的向量坐标呢？这是一个学习问题，由一个简单直观的原则驱动：**真实事实的得分应高于虚假事实**。

我们使用**基于间隔的排序损失**来强制执行这一原则。对于我们数据中的每一个真实事实 $(h, r, t)$，我们要求模型将其得分推高，使其比一个假的或“负面”样本 $(h', r, t')$ 的得分至少高出一个间隔 $\gamma$。总损失是模型每次未能达到此目标时所受惩罚的总和：

$$
\mathcal{L} = \sum \max\big(0, \gamma + s(h', r, t') - s(h, r, t)\big)
$$

这引出了一个有趣的问题：我们从哪里获得虚假事实？我们不能只用任何随机的胡言乱语。模型必须学会区分真实与看似合理的虚假。这就是**[负采样](@entry_id:634675)**的艺术。一个好的策略是通过对真实事实进行轻微破坏来创建负样本，例如，将头实体或尾实体与另一个相同类型的实体交换（例如，用一种药物换成另一种）。这被称为**类型约束[负采样](@entry_id:634675)** [@4577532]。

这个过程必须小心处理。在开放世界假设下，一个事实不在我们的数据库中并不意味着它是假的。为了避免因发现一个新的有效事实而惩罚模型，我们使用**过滤[负采样](@entry_id:634675)**，即在我们生成的“谎言”用于训练之前，我们会对照我们完整的已知事实数据库进行检查，并丢弃任何意外的发现 [@4577532] [@5205701]。为了使模型更加敏锐，我们可以使用**自对抗**技术，迫使它去辨别那些它当前认为最可信的负样本 [@4577532]。

### 从理想地图到混乱现实

我们的旅程从简单的想法走向了复杂的模型。但现实世界总是比我们的理论更混乱。将这些模型应用于像统一医学语言系统（UMLS）这样复杂、大规模的生物医学知识图谱时，揭示了实际的挑战 [@4862378]。

现实世界的图是**异构的**，包含许多不同类型的节点（药物、基因、疾病）和关系 [@4332986]。一个稳健的模型必须能够处理这种多样性。这通常涉及到添加特定类型的编码器，将原始特征——如药物的化学结构或蛋白质的[氨基酸序列](@entry_id:163755)——转换到我们[评分函数](@entry_id:175243)运作的共享几何空间中 [@4290669]。像关系[图卷积网络](@entry_id:194500)（R-GCNs）这样的架构就是为这个目的而明确设计的 [@4332986]。

此外，高维空间的几何结构可能很奇怪。一种被称为**枢纽现象**（hubness）的现象可能会出现，即非常普遍的概念（如“疾病”）成为大量不相关点的最近邻，导致系统性错误。如果我们的训练数据不完整或有偏见——例如，如果像“[尿崩症](@entry_id:167858)”这样的罕见疾病代表性不足——模型可能会将其与更常见的“糖尿病”**混淆**，从而扭曲几何地图并导致不正确的预测 [@4862378]。

幸运的是，这些并非不可逾越的障碍。它们是积极研究的前沿领域。通过用已知的生物学层级约束学习过程，开发标准化技术以减轻枢纽现象，并不断丰富我们的数据，我们可以完善我们的知识地图，使其越来越忠实于它们试图代表的那个错综复杂、美丽而又复杂的现实。


## 引言
[状态空间表示法](@article_id:307564)是现代科学的基石，它为描述和预测动态系统的行为提供了一个强大的数学框架。然而，这些优雅的模型通常代表一个理想化的世界，未能考虑现实世界的复杂性，如持续的外力、[通信延迟](@article_id:324512)或不可测量的内部变量。模型与现实之间的这种差距可能导致性能不佳、持续误差以及对复杂系统的控制能力有限。本文通过引入强大的[状态增广技术](@article_id:638772)来应对这一挑战——这是一种通过扩展系统“状态”的定义来系统性地增强系统模型的方法。这是一种化繁为简的策略。

在接下来的章节中，我们将首先深入探讨[状态增广](@article_id:301312)的**原理与机制**，利用[积分控制](@article_id:326039)这一经典问题来展示增加一个新的[状态变量](@article_id:299238)如何能消除稳态误差，并在系统设计中赋予新的自由度。随后，在**应用与跨学科联系**中，我们将拓宽视野，看这一思想如何作为通用工具服务于不同领域，使系统能够估计未见的力、诊断自身故障，并驾驭[时间延迟](@article_id:330815)和复杂噪声带来的挑战。

## 原理与机制

想象一下，你正在尝试描述一个移动的物体。在任何时刻，你需要知道哪些最基本的信息才能预测其未来路径？如果你知道它的位置和速度，牛顿定律就能告诉你其余的一切。这组基本信息——在这里是位置和速度——就是物理学家和工程师所称的系统**状态**。状态是系统记忆的完整快照。[状态空间表示法](@article_id:307564)作为现代科学的基石，就建立在这个简单的思想之上。它是一组[一阶微分方程](@article_id:323301)，就像一部宇宙规则手册：给定当前状态 $x(t)$ 和任何外部输入 $u(t)$，它就能精确地告诉我们状态如何变化，即 $\dot{x}(t) = Ax(t) + Bu(t)$。

但是，当这些“基本信息”还不够时会发生什么？如果我们的系统需要意识到的不仅仅是其即时状况，那该怎么办？这就是**[状态增广](@article_id:301312)**这一优雅而强大的思想发挥作用的地方。它不仅是解决问题的方法，更是改变我们描述问题本身方式的方法。它关乎丰富我们系统的“记忆”。

### 扩展“状态”的概念

让我们考虑一个实际挑战：为汽车设计巡航控制系统。基本状态可能包括汽车的速度。控制器的任务是施加油门（输入 $u$）以将速度 $y$ 保持在[期望](@article_id:311378)的设定点 $r$。一个简单的控制器可能会查看当前误差 $e(t) = r - y(t)$，并相应地调整油门。在平坦的道路上，这行之有效。但当汽车开始上坡时会发生什么？一个持续的力——重力——现在作用于系统。我们那个只对当前时刻做出反应的简单控制器，可能会满足于一个略低于设定点的速度。它与[山坡](@article_id:379674)抗争，但从未完全取胜。系统存在**稳态误差**。

为什么？因为它的状态，即它的记忆，过于有限。它不记得过去几秒钟内持续累积的、令人烦恼的误差。它没有“我已经落后了一段时间，我真的应该更用力推”这样的概念。

那么，让我们赋予它那种记忆。我们可以创建一个新的状态变量，称之为 $x_i$，它的全部工作就是记住累积的误差。我们将其定义为误差的积分：

$$
x_i(t) = \int_{0}^{t} e(\tau) d\tau = \int_{0}^{t} (r(\tau) - y(\tau)) d\tau
$$

根据微积分基本定理，这个新状态的变化率就是当前误差：$\dot{x}_i(t) = r(t) - y(t)$。现在我们有了一个变量，只要存在正误差它就会增长，存在负误差它就会减小。它是误差历史的记忆。

我们现在可以用这个新的记忆状态 $x_i(t)$ 来“增广”我们原始的状态向量 $x(t)$。我们新的增广[状态向量](@article_id:315019)是 $x_a(t) = \begin{bmatrix} x(t) \\ x_i(t) \end{bmatrix}$。我们名副其实地给我们的系统附加了一块新的记忆。这个新的、更大的系统的动态特性看起来如何？我们只需将方程堆叠起来：

$$
\dot{x}_a(t) = \begin{bmatrix} \dot{x}(t) \\ \dot{x}_i(t) \end{bmatrix} = \begin{bmatrix} Ax(t) + Bu(t) \\ r(t) - y(t) \end{bmatrix}
$$

由于输出是 $y(t) = Cx(t) + Du(t)$，我们可以纯粹用状态 $x(t)$、输入 $u(t)$ 和参考 $r(t)$ 来表示它。通过整理各项，我们得到一个新的、更大的、但仍然完全标准的[状态空间方程](@article_id:330697) [@problem_id:2737738] [@problem_id:2689345]。增广状态的动态形式为：

$$
\dot{x}_a(t) = \underbrace{\begin{bmatrix} A & 0 \\ -C & 0 \end{bmatrix}}_{A_a} x_a(t) + \underbrace{\begin{bmatrix} B \\ -D \end{bmatrix}}_{B_u} u(t) + \underbrace{\begin{bmatrix} 0 \\ 1 \end{bmatrix}}_{B_r} r(t)
$$

看看那个新的系统矩阵 $A_a$ 的优美结构。原始的动态矩阵 $A$ 位于左上角。新的一行 $[-C \ \ 0]$ 代表了新的机制：原始状态 $x$ 现在通过输出 $y=Cx$ 影响积分状态 $x_i$。我们已经将“记住误差”的过程优雅地融入了系统动态的结构之中。

### 更大工具箱的力量

那么，对于我们的二维机械臂，我们现在有了一个更大的三维[状态向量](@article_id:315019) [@problem_id:1614035]。我们获得了什么？我们获得了一个新的杠杆可以拉动，一个新的旋钮可以转动。我们的控制律不再仅仅是 $u(t) = -Kx(t)$。它现在可以依赖于增广状态：

$$
u(t) = -K_a x_a(t) = -Kx(t) - k_i x_i(t)
$$

这个新项 $-k_i x_i(t)$ 就是**积分作用**。想想它做了什么。如果我们的巡航控制系统卡在[设定点](@article_id:314834)以下，误差 $e(t)$ 是正的。积分状态 $x_i(t)$ 不断增长，就像一个正在装水的浴缸。这个不断增长的 $x_i$ 项将控制输入 $u(t)$ 推得越来越高，远超简单[比例控制器](@article_id:334934)所能做的。它会不懈地增加油门，直到汽车回到目标速度，误差变为零。只有到那时，积分状态才停止增长。控制器不再健忘；它变得顽强。

这不仅仅是定性上的改进。通过将状态从 $n$ 维增广到 $n+1$ 维，我们为系统的特征多项式增加了一个新的维度。用控制理论的语言来说，我们有了一个新的**极点**可以配置。对于一个像机械臂关节这样的[二阶系统](@article_id:340246)，增加一个积分器意味着我们现在有三个[闭环极点](@article_id:337789)可以指定，而不仅仅是两个。如果我们希望关节移动到目标角度时响应快速、稳定且无超调，我们可以在[复平面](@article_id:318633)的左半部分选择三个理想的[极点位置](@article_id:335262)，比如说在 $\{-2, -3, -4\}$。然后我们可以求解反馈增益——$k_1, k_2,$ 和我们新的[积分增益](@article_id:338260) $k_i$——的*精确*值，这些值将把极点精确地放置在我们想要的位置 [@problem_id:1601368]。我们获得了一个新的自由度来塑造我们系统的整个动态行为。

这个增加的维度有一个优美的几何解释。二阶系统的行为可以被看作是在一个二维平面（“[相平面](@article_id:347642)”）中的一条轨迹，其中的[平衡点](@article_id:323137)被归类为熟悉的类型，如节点、[鞍点](@article_id:303016)或焦点（螺线点）。通过将系统增广到三阶，我们已将此行为提升到一个三维相空间中。动态特性可以更加丰富；例如，轨迹现在可以在一个平面内螺旋式地趋向一个[平衡点](@article_id:323137)，同时沿着第三个轴被吸引向它。这种行为被称为鞍焦点，在二维中没有直接的对应物。增广从字面上为我们系统生活的世界增加了一个新的维度 [@problem_id:2692937]。

### 超越误差校正：增广作为通用建模工具

故事在这里发生了有趣的转折。增广技术不仅仅是[积分控制](@article_id:326039)的一个技巧。它是一种深刻而通用的策略，用于将复杂、看似难以处理的动态行为，融入到标准状态空间模型的清晰、统一框架中。

考虑在火星上控制一辆探测车的挑战。当你发送一个命令时，在它被执行之前会有一个显著的时间延迟 $\tau$。你的探测车的动态特性不是 $\dot{x}(t) = Ax(t) + Bu(t)$，而是一个**时滞[微分方程](@article_id:327891)**：$\dot{x}(t) = Ax(t) + Bu(t-\tau)$。这[类方程](@article_id:304856)是出了名的难以处理。但什么是时间延迟？它是一个系统，对于你给它的任何输入信号，它会吐出相同的信号，只是在时间上发生了平移。我们可以为延迟本身创建一个近似的数学模型——例如，一个**Padé 近似**。这个近似是一个简单的、标准的 LTI 系统，有它自己的内部状态，我们称之为 $w(t)$。现在，我们可以施展一个宏伟的技巧：我们用延迟模型的状态 $w$ 来增广探测车的状态 $(p, \dot{p})$。新的增广[状态向量](@article_id:315019)变为 $z(t) = [p(t), \dot{p}(t), w(t)]^T$。通过连接这些模型，我们可以推导出一个单一的、更大的、但完全标准的[状态空间方程](@article_id:330697) $\dot{z}(t) = A_{aug}z(t) + B_{aug}u(t)$。我们用一个“更大”的熟悉类型方程换来了一个“困难”类型的方程。我们已经将时间延迟的奇特性吸收到状态本身中 [@problem_id:1573895]。

另一个优美的例子来自于不可测状态的问题。如果我们无法直接看到我们系统的所有状态 $x(t)$ 怎么办？我们可以建立一个软件模型，一个**观测器**，它与真实系统并行运行，并产生状态的*估计值* $\hat{x}(t)$。这个观测器使用系统的输入 $u(t)$ 和输出 $y(t)$ 来不断校正自己的估计。我们现在有两个系统：物理设备和软件观测器。我们如何将它们一起分析？我们进行增广！我们定义一个新的状态向量，由真实状态 $x$ 和[估计误差](@article_id:327597) $\tilde{x} = x - \hat{x}$ 组成。组合后的状态是 $z(t) = \begin{pmatrix} x(t) \\ \tilde{x}(t) \end{pmatrix}$。当我们推[导数](@article_id:318324)学时，一个真正非凡的结构出现了。这个增广系统的动态矩阵是块[三角矩阵](@article_id:640573)：

$$
\mathcal{A} = \begin{pmatrix} A - BK & BK \\ 0 & A - LC \end{pmatrix}
$$

这里，$K$ 是控制增益，$L$ 是[观测器增益](@article_id:331265)。左下角的零块揭示了一些深刻的东西：估计误差 $\tilde{x}$ 的动态不受控制律的影响。整个系统的[特征值](@article_id:315305)就是控制器 ($A-BK$) 的[特征值](@article_id:315305)与观测器 ($A-LC$) 的[特征值](@article_id:315305)的组合。这意味着我们可以像能够测量真实状态一样设计我们的控制器，并且我们可以设计我们的观测器使误差快速衰减，而且我们可以*完全独立*地进行这两项设计。这就是著名的**[分离原理](@article_id:326940)**，现代控制理论的基石，而正是[增广状态空间](@article_id:348676)的视角使其如此清晰明了 [@problem_id:1584793]。

### 一点提醒：增广的局限

这个方法很强大，但不是魔法。它必须结合物理洞察力来应用。我们是否总能为一个能控系统添加一个积分器，并[期望](@article_id:311378)增广后的系统保持能控？答案可能令人惊讶，是否定的。

增广的行为有可能破坏能控性。这发生在一种特定情况下：当原始系统的传递函数在原点 ($s=0$) 处有一个零点时。直观地说，这意味着系统有一个“盲点”。存在某种恒定的（零频率）输入，会产生零输出。因为[积分器](@article_id:325289)通过观察输出误差来工作，如果系统对积分器试图修正的东西是“盲”的，[积分器](@article_id:325289)就变得无用。对于那个特定的动态模式，反馈连接被打破了，增广系统就失去了能控性 [@problem_id:1580384]。

增广的原理也揭示了控制理论优美的对偶性。正如我们可以在输入端用积分器增广系统以改善控制一样，我们可以使用相同的数学机制来分析一个其传感器测量的是输出积分的系统。通过构建一个增广系统，我们可以使用一个略微修改的能观性矩阵来确定原始状态是否可以从这个积分测量中**能观** [@problem_id:1584826]。同一个工具在问题的两端都有效。

归根结底，[状态增广](@article_id:301312)是一个关于创造性重构的故事。我们从一个其“记忆”不足以完成我们任务的系统开始。通过识别需要哪些额外信息——无论是误差的历史、时间延迟的状态，还是估计的误差——我们可以定义新的[状态变量](@article_id:299238)。通过将这些新变量吸收到一个扩展的[状态向量](@article_id:315019)中，我们创建了一个更大但结构上熟悉的系统，我们拥有分析和控制它的工具。这是一个有力的证明，说明在科学和工程中，为问题选择正确的描述方式往往是走向解决方案的最重要一步。
## 引言
在科学研究中，比较两组的黄金标准长期以来一直是传统的假设检验。这种方法旨在寻找差异，其操作方式就像检察官试图证明一种新药或新方法与旧有显著不同。然而，当我们未能发现差异，或者我们的目标是证明相似性时，这种方法让我们处于一个困难的境地。古老的格言“缺乏证据并非不存在的证据”意味着我们不能仅仅因为未能证明两件事物不同就声称它们相同。这就产生了一个关键的空白：我们如何科学地证明一种仿制药在生物上等效于其品牌药，或者一个人工智能诊断工具与人类医生一样可靠？

本文介绍了解决方案：等效性检验，特别是双[单侧检验](@entry_id:170263)（TOST）程序。首先，在“原理与机制”部分，我们将解析 TOST 的逻辑，探讨它如何颠覆举证责任，并利用[置信区间](@entry_id:138194)对“相同性”做出明确的陈述。随后，在“应用与跨学科联系”部分，我们将看到这个强大的方法在不同领域的实际应用，从药理学、心理学到前沿人工智能的验证。

## 原理与机制

### 对“相同性”的追求：一个不同的问题

在科学世界里，我们痴迷于发现差异。新药是否比安慰剂更有效？一种教学方法是否比另一种产生更高的分数？完成这项工作的标准工具是**[假设检验](@entry_id:142556)**，其运作方式很像法庭审判。“被告”是**虚无假设**（$H_0$），通常陈述没有差异、没有效应、没有变化。这是一种纯粹怀疑的立场，即“无罪”的假设。检察官的工作——也就是科学家的工作——是收集足够的证据（数据）来拒绝这一假设，并宣布被告“有罪”，即存在差异。

但是，当我们得到一个“无罪”判决时会发生什么？在法庭上，这并不意味着被告被证明是无辜的；这只意味着没有足够的证据来证明其罪行成立。在统计学中，这是一句经典的箴言：**缺乏证据并非不存在的证据**。未能发现统计上显著的差异并不能证明两件事物是相同的。这可能仅仅意味着我们的实验规模太小，或者我们的测量噪音太大，无法检测到确实存在的差异。

这就导致了一个棘手的情况。考虑一个用于医疗诊断的人工智能系统。我们可能会测试它，并发现其错误率与人类医生相比“没有统计上的显著差异”。那么我们能声称这个人工智能一样好吗？不能。这是一个逻辑上的跳跃。当我们*确实*发现差异时，情况甚至更加令人困惑。想象一下，一项有 40 万参与者的大规模临床试验发现，一种新的降压药比旧药平均多降低 0.01 毫米汞柱的血压，p 值为 $0.00001$。这个结果是极其“统计显著”的，但这个差异在实践中毫无意义。拒绝“无差异”的假设并没有告诉我们这个差异是否重要 [@problem_id:4934494]。

这就是我们必须改变问题的地方。我们不应问“这两样东西有区别吗？”，而是需要一种方式来问“从所有实际应用的角度来看，这两样东西是相同的吗？”这就是**等效性检验**的领域。

### 颠覆举证责任

为了科学地证明一个主张，我们必须设计我们的检验，使得这个主张成为我们试图寻找证据支持的对象。用统计学的语言来说，我们的主张必须是**[备择假设](@entry_id:167270)**（$H_1$）。

如果我们的目标是证明两种方法在实际上是相同的，或“等效的”，我们必须首先定义这意味着什么。我们无法证明真实差异（我们称之为 $\theta$）完全为零。但是我们可以定义一个“等效区间”，即零点周围的一个小范围，在此范围内的任何差异都被认为是临床上或实际上不相关的。我们将这个区间的边界称为 $-\Delta$ 和 $+\Delta$。我们的主张——备择假设——就变成了真实差异位于这个区间*内部*：

$$H_1: -\Delta  \theta  \Delta \quad \text{(差异可以忽略)}$$

这个定义目标的简单行为，迫使我们的初始假设发生了深刻的转变。如果等效性是备择假设，那么虚无假设必须是它的对立面。虚无假设就变成了差异*并非*可以忽略的陈述；它是大的、有意义的。

$$H_0: \theta \le -\Delta \text{ or } \theta \ge \Delta \quad \text{(差异有意义)}$$

想一想这意味着什么。我们完全颠覆了举证责任 [@problem_id:5202167]。我们现在*假设*存在一个有意义的差异，直到我们能收集到足够的证据，无可置疑地证明这个差异实际上是微小且不重要的。我们不再试图证明“有罪”；我们试图证明一种非常特殊的“无罪”：因相似而无罪。这个框架至关重要，从验证一种新的医疗设备与黄金标准的对比，到通过证明不同人口群体之间算法输出的差异微不足道来确保人工智能算法的公平性，都离不开它 [@problem_id:5209601] [@problem_id:5202167]。

### 双[单侧检验](@entry_id:170263)的奥秘

那么，我们如何处理这个新的虚无假设呢？$H_0: |\theta| \ge \Delta$ 是一个复合陈述。它声称差异要么太大（$\theta \ge \Delta$），要么太小（$\theta \le -\Delta$）。要推翻这个主张并证明等效性，我们不能只在一个战线上战斗；我们必须在两个战线上都赢得胜利。我们必须证明差异*没有*太大，*并且*它*没有*太小。

这就是**双单側检验（TOST）**程序背后美妙而简单的逻辑 [@problem_id:4934948]。我们将[问题分解](@entry_id:272624)为两个独立的单侧战斗：

- **战斗1（[上界](@entry_id:274738)）：** 我们检验虚无假设 $H_{0U}: \theta \ge \Delta$ 与[备择假设](@entry_id:167270) $H_{1U}: \theta  \Delta$。我们试图证明差异小于上等效界值。

- **战斗2（下界）：** 我们检验虚无假设 $H_{0L}: \theta \le -\Delta$ 与[备择假设](@entry_id:167270) $H_{1L}: \theta > -\Delta$。我们试图证明差异大于下等效界值。

只有当我们赢得*两场*战斗时，我们才能宣布全面胜利——即等效性成立。我们必须同时拒绝 $H_{0U}$ 和 $H_{0L}$ [@problem_id:3130861] [@problem_id:4821226]。如果我们只在一个检验中成功，我们就不能得出等效的结论。例如，在一个实验室方法比较中，我们可能证明我们的新方法不比旧方法差超过 $\Delta$，但我们可能无法证明它不比旧方法好超过 $\Delta$。在这种情况下，我们展示了非劣效性，但不是等效性 [@problem_id:5209601]。

一个常见的困惑点是如何处理错误率 $\alpha$。如果我们在做两次检验，难道不应该分割 $\alpha$（例如，每次使用 $\alpha/2$）以避免错误率膨胀吗？值得注意的是，对于 TOST，答案是否定的。想象一下，虚无假设区域是一座监狱，而等效区域是外面的自由世界。这座监狱有两堵墙，一堵在 $+\Delta$，一堵在 $-\Delta$。要想逃脱，你必须突破*两堵*墙。如果每堵墙的强度都是 $\alpha$（意味着如果你紧挨着墙，突破它的概率是 $\alpha$），那么你犯 I 类错误（错误地声称等效）的总概率仍然被控制在 $\alpha$，而不是 $2\alpha$。这是因为 $\theta$ 的真实值一次只能靠近一堵墙。监狱的整体强度取决于其单面墙的强度。因此，每个[单侧检验](@entry_id:170263)都在完整的显著性水平 $\alpha$ 下进行 [@problem_id:4778423] [@problem_id:3130861]。

### [置信区间](@entry_id:138194)：一个更直观的视角

进行两次独立的检验可能感觉有点机械。幸运的是，有一种非常直观和可视化的方式来思考完全相同的问题：**[置信区间](@entry_id:138194)（CI）**。[置信区间](@entry_id:138194)根据我们的实验数据，为真实参数 $\theta$ 提供了一个 plausible values 的范围。

TOST 程序在数学上等同于一个简单的检查：我们差异的[置信区间](@entry_id:138194)是否*完全*位于等效区间 $(-\Delta, \Delta)$ 之内？[@problem_id:4514235]

想象一下走钢丝。“安全区”是钢丝上介于 $-\Delta$ 和 $+\Delta$ 之间的部分。你的数据给出了你所在位置的最佳猜测（样本均值），但存在一些不确定性——你可能会摇晃。[置信区间](@entry_id:138194)代表了你摇晃的全部范围。要宣布自己安全（等效），你的整个摇晃范围——[置信区间](@entry_id:138194)的每一小部分——都必须在安全区内。如果你的区间的哪怕一点点尖端悬在了边缘之外，你就无法确定你的安全，也就不能声称等效。

有一个至关重要的细节。与在水平为 $\alpha$ 的两个[单侧检验](@entry_id:170263)相对应的[置信区间](@entry_id:138194)是 $100(1-2\alpha)\%$ [置信区间](@entry_id:138194)。对于标准的 $\alpha = 0.05$，我们必须构建一个 $90\%$ 的 CI，而不是更熟悉的 $95\%$ CI [@problem_id:4821226]。

这种 CI 方法给我们带来了直接而有力的见解。考虑前面提到的降压药的例子。假设等效界值设定为 $\Delta=1$ mmHg，所以等效区间是 $(-1, 1)$。我们的新分析显示差异为 $2$ mmHg。这个差异的 $90\%$ [置信区间](@entry_id:138194)可能是，例如 $[1.18, 2.82]$。这个区间不仅*不*在 $(-1, 1)$ 内，它完全在它*之外*。使用等效性框架，我们不仅未能证明等效性；我们有强有力的证据表明这两者实际上*不等效* [@problem_id:4934494]。这展示了正确构建问题的力量。

### 确定性的代价：统计功效和样本量

证明等效[性比](@entry_id:172643)仅仅未能发现差异是一个更强、更有用的陈述。然而，这种统计上的严谨性是有代价的：它需要更多的证据。这个代价在**统计功效**和**样本量**的概念中看得最清楚。

**统计功效**是检验正确检测到真实效应的能力。对于 TOST 来说，它是指当两个被比较的事物真正等效时（或者至少，真实差异远在界值之内，例如 $\theta=0$），我们能正确得出等效结论的概率 [@problem_id:4202655]。当等效性真实存在时未能证明它，这是一个“II 类错误”，其概率为 $\beta$。因此，统计功效是 $1-\beta$。

什么决定了我们的统计功效？
- **样本量（$n$）：** [统计功效](@entry_id:197129)就像望远镜的分辨能力。更大的样本量就像拥有一个更大的镜片。它减少了我们估计的不确定性（[标准误](@entry_id:635378)），从而缩小了我们[置信区间](@entry_id:138194)的宽度。一个更窄的[置信区间](@entry_id:138194)更有可能完全落在等效界值内，从而增加了我们宣布等效的[统计功效](@entry_id:197129) [@problem_id:3130861]。
- **等效界值（$\Delta$）：** 一个更宽的界值是一个更容易达到的目标。如果我们通过选择一个更小的 $\Delta$ 来使我们对“相同性”的定义更严格，我们将需要更大的统计功效（从而需要更大的样本量）来证明它。
- **数据变异性（$\sigma$）：** 原始数据中较小的“摇晃”会导致更精确的估计和更窄的[置信区间](@entry_id:138194)，从而增加[统计功效](@entry_id:197129)。

因为证明等效性需要从*两侧*框定我们的[置信区间](@entry_id:138194)，所以它通常比证明一个简单的差异更具挑战性。例如，在一个计划评估新的人工智能败血症警报系统的假设研究中，研究人员可能会计算出，要证明新系统优于旧系统，他们每组需要 275 名患者。然而，要证明新系统与旧系统*等效*，他们将需要一个明显更大的样本量，即每组 347 名患者 [@problem_id:5219899]。这就是确定性的代价。这是为了做出一个更强、更明确、通常也更有用的科学声明所需要付出的额外工作。


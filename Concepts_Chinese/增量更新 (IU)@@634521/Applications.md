## 应用与跨学科联系

有一个极简而强大的思想，在几乎所有科学和工程的角落里回响。这和你想要修改一个用乐高积木搭建的结构时的想法是一样的：如果你想改变一小部分，你不会拆掉整个城堡然后从头开始。你会小心翼翼地移开几块积木，然后插入新的。这个原则就是：当一个系统发生微小变化时，你为应对这一变化所做的工作也应该是微小的。在计算世界里，我们称之为**增量更新**。

这不仅仅是为了省事，尽管它的确是一种聪明的懒惰。它关乎认识到宇宙以及我们对宇宙的模型，都具有某种连续性。在一个行为良好的系统中，输入的一个小变化不应该要求付出灾难性的努力来计算新的输出。增量更新的艺术与科学，就在于找到正确的表示方法，正确的数学“语言”，从而使变化变得容易。让我们踏上一段旅程，看看这同一个优美的思想如何穿上不同科学学科的服装。

### 运动中的世界：算法与数据结构

计算机科学的核心是表示和操纵信息。但信息很少是静态的；它是一条流动的河。思考一下定义我们现代世界的庞大连接网络——社交网络、航线图，或是网站之间的链接。如果你在社交网络上交了一个新朋友，或者在两个城市之间增加了一条新航线，我们是否必须重新绘制整个世界的地图来理解新的可能性？

当然不必。想象一下我们有一张单行道的地图，并且我们知道哪些[交叉](@entry_id:147634)口可以从其他[交叉](@entry_id:147634)口到达。这个“可达性地图”被称为图的[传递闭包](@entry_id:262879)。现在，我们从[交叉](@entry_id:147634)口 $a$ 到交叉口 $b$ 修建了一条新路。现在有哪些新的旅程成为可能？任何从某个起点 $i$ 到某个终点 $j$ 的新路径*必须*使用这条新路。这意味着旅程必须是这样的：一条从 $i$ 到 $a$ 的路径，从 $a$ 到 $b$ 的新路，最后是一条从 $b$ 到 $j$ 的路径。要更新我们整个[可达性](@entry_id:271693)地图，我们不需要再次从每个[交叉](@entry_id:147634)口开始探索。我们只需要查阅我们的*旧*地图，看看哪些交叉口已经可以到达 $a$，以及哪些已经可以从 $b$ 到达。新的连接仅仅是这两组集合的组合。这个优雅的洞见将一次大规模的重新计算变成了一次快速而有针对性的查找 ([@problem_id:3279786])。类似的原则也让我们能够在一个可能的任务分配被移除后，高效地修复任务到工人的最优分配，方法是寻找一个局部的“修复”，而不是从头重新解决整个[分配问题](@entry_id:174209) ([@problem_id:1512360])。

这个思想在游戏人工智能的世界里得到了特别优美的体现。计算机是如何下象棋的？它向前看，探索一个浩如烟海的可能走法树。为了高效地比较棋盘位置，它需要为每个状态生成一个独特的“指纹”或哈希值。一个幼稚的哈希方法每次都需要扫描所有64个格子。但在象棋中，一步棋只改变一两个格子的状态。这时，Zobrist 哈希就如神来之笔般出现了 ([@problem_id:3275349])。每个棋子在每个可能的位置上都被分配了一个唯一的随机数。整个棋盘的指纹是棋盘上每个棋子对应数字的[按位异或](@entry_id:269594)（XOR）总和。

当一个棋子移动时，奇迹发生了。假设一个兵从格子 $s_{\text{old}}$ 移动到 $s_{\text{new}}$。新的哈希值以惊人的简洁性计算出来：
$$H_{\text{new}} = H_{\text{old}} \oplus Z[s_{\text{old}}, \text{pawn}] \oplus Z[s_{\text{new}}, \text{pawn}]$$
这里，$\oplus$ 是异或操作。因为异或是其自身的逆运算（$x \oplus x = 0$），所以对旧位置的键进行异或操作有效地将其从哈希中“移除”，而对新位置的键进行异或操作则将其“加入”。计算机无需重新读取整个棋盘，只需执行两次简单的按位操作。正是这种效率，区分了笨拙的对手和国际象棋大师。

### 从流动中学习：统计学与机器学习

我们世界中的大部分数据——从股市行情到气象传感器和社交媒体信息流——并非以整洁、完整的数据集形式出现，而是以连续不断的流的形式到来。我们不可能全部存储下来。那么，我们如何从中学习呢？我们如何计算像[决定系数](@entry_id:142674) $R^2$ 这样的统计量，它衡量模型的预测与数据的拟合程度，而其计算又涉及到*所有*数据点的平均值，包括那些我们早已遗忘的数据点？

答案再次是增量更新。存在一些非凡的[递归公式](@entry_id:160630)，它们允许你仅使用三样东西来更新诸如均值、[方差](@entry_id:200758)以及计算 $R^2$ 所需的平方和等量：该统计量的前一个值、新的数据点，以及当前数据点的计数。每一条新信息都让我们能够完善我们对世界的统计图景，维持一个完美的动态摘要，而无需携带整个数据流的历史记录 ([@problem_id:3186336])。

当我们试图在流数据中寻找动态模式或聚类时，这一点变得更加关键。像 DBSCAN 这样的算法是根据数据点的密度来寻找聚类的。如果我们每次有新数据点到达时都重新运行算法，这个过程会慢得无可救药。增量方法则要微妙得多 ([@problem_id:3114653])。当一个新点出现时，它只影响其紧邻区域的密度。因此，我们只需要更新其邻居的密度计算。此外，在[数据流](@entry_id:748201)中，最近的数据通常比旧数据更具相关性。一个合适的增量算法会融入时间观念，赋予新数据点更多的“权重”，并优雅地让旧数据点的影响衰减。这就是我们构建能够实时适应变化世界学习系统的方式。

### 逐块构建世界：仿真与工程

建模和控制物理世界的挑战是增量思维的另一个沃土。想象一下，编程一个机械臂，使其平滑地通过一系列路径点。这个轨迹可以用一个数学函数——一个穿过所有点的多项式——来描述。现在，假设我们必须实时添加一个新的路径点，也许是为了避开一个新检测到的障碍物。如果我们为多项式选择了错误的数学表示形式，添加一个点将迫使我们从头重新计算整个轨迹。

但如果我们选择得当，使用所谓的[牛顿形式多项式](@entry_id:164482)，奇妙的事情就会发生。[牛顿形式](@entry_id:167022)分层构建多项式，每一项都对应一个路径点。添加一个新的路径点仅仅意味着在表示中增加一层——一个新的系数——而不会干扰任何先前的系数 ([@problem_id:3254750])。这不仅仅是一个计算上的捷径；它深刻地证明了数学语言的选择可以决定一个问题是难是易。

这种高效构建的主题出现在各种尺度的模拟中。为了模拟活细胞内复杂的生物化学反应网络，我们可以使用 Gillespie 算法，它一次处理一个反应。一个幼稚的模拟可能在每一次反应后，都重新评估接下来可能发生的所有上千种反应的概率。增量式的洞见是建立一个“依赖图”，告诉我们哪些[反应速率](@entry_id:139813)受哪些分子种类的影响。当一个反应发生时，它只改变少数几种分子的数量。因此，只需要更新少数其他反应的速率 ([@problem_id:2777208])。这种有针对性的更新使得大规模[随机模拟](@entry_id:168869)在计算上变得可行。

在最高水平的工程领域，如设计飞机或控制电网，我们依赖于复杂的数学模型。通常，我们创建更简单的“降阶模型”以使计算易于处理。这些模型是根据完整、复杂模拟的“快照”构建的。如果我们后来获得一个新的、关键的快照，我们不想扔掉我们简单的模型。相反，我们使用增量 SVD 方法将新信息“折叠”到现有模型中，在不进行完全重建的情况下对其进行改进 ([@problem_id:2591519])。同样，在控制系统中，著名的卡尔曼滤波器使用一个矩阵来表示系统的不确定性。如果我们对系统噪声源的模型稍作改变，线性代数中的一些优雅技巧允许我们通过解决一个更小的相关问题来计算不确定性矩阵的*变化*，而不是从头重新求解整个大型系统 ([@problem_id:3578499])。

### 增量思想的统一性

一个惊人的事实是，同样的思维模式出现在最纯粹的数学和最应用化的物理学中。这说明了我们描述世界的方式在结构上具有深度的统一性。

从纷繁复杂的数据世界退回到纯粹的数论领域。[中国剩余定理](@entry_id:144030)是解决[同余方程组](@entry_id:154048)的经典工具。其解的混合[基数表示法](@entry_id:636584)，或许令人惊讶地，是完全增量的。如果你有一个[同余方程组](@entry_id:154048)的解，并且增加一个新的、互质的[同余](@entry_id:143700)方程，你现有解的系数保持不变。你只需计算一个新的系数来满足新的条件 ([@problem_id:3081339])。这表明增量性不仅仅是一种计算技巧；它是某些数学对象的结构属性。

同样的故事也发生在优化领域。寻找一个复杂问题的“最优”解，就像在一个广阔、多山的地形中寻找最低点。像 Kelley 的切[割平面法](@entry_id:635930)这样的算法，并不试图通过一次巨大的飞跃来找到解。相反，它从一个粗略的地形近似开始，然后迭代地进行精化。在每一步，它生成一个新的“切割”——一个[线性约束](@entry_id:636966)——切掉一块不可能是最优解所在的区域，从而更接近真实解 ([@problem_id:3141065])。整个过程是一趟增量改进的旅程。

也许这种统一性最深刻的例证来自计算物理学的前沿。考虑两种看似不相关的现象：金属晶体的永久弯曲（塑性）和[铁电材料](@entry_id:273847)中极化的转换。前者是关于原子平面相互滑移；后者是关于[电偶极子](@entry_id:186870)的集体重新取向。然而，当用连续介质[热力学](@entry_id:141121)的强大语言来描述时，它们的增量更新方案——即用于模拟其行为的算法本身——揭示了一种深刻且共享的结构。两者都可以从底层的能量和耗散势推导出来，从而得到具有相似数学性质的算法。同时，这种比较也凸显了本质上的差异：金属中的滑移基本上是无界的，而描述畴变体的体积分数则被约束为总和为一。认识到这种差异是设计正确更新算法的关键 ([@problem_id:3552426])。

从更新一个图，到下象棋，到建模一个机器人，到模拟一个活细胞，最后到统一不同的物理定律，增量更新的原理是相同的。它是一种尊重已完成工作的智慧，一种隔离变化的智慧，一种选择让增加新知识成为一种构建而非拆毁行为的语言的智慧。它是将我们科学的织锦联系在一起的那些安静、优美而统一的线索之一。
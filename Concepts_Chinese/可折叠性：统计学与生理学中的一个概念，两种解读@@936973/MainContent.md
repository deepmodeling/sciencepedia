## 引言
“可折叠性”一词在科学界具有两个截然不同但同等重要的含义。对于统计学家而言，它描述了效应度量中一个微妙的数学特性，该特性可能在数据分析中造成明显的悖论。对于医生而言，它指的是血管或气道非常真实的物理性塌陷。本文旨在揭开这两个概念的神秘面纱，解决统计学上的非可折叠性与混杂之间的常见混淆，并阐释人体内发挥作用的类似物理原理。通过探索这两个世界，读者将更深入地理解证据是如何被解释的，以及生理系统是如何运作的。第一部分“原理与机制”将剖析统计学非可折叠性背后的数学原理，并解释为何像优势比这类度量的行为会与直觉相悖。随后，“应用与跨学科联系”部分将把这一抽象概念与现实的医学世界联系起来，探讨生物管道的物理性塌陷如何决定从睡眠[呼吸暂停](@entry_id:149431)到循环性休克的各种病症，最终揭示出一个关于局部背景重要性的共同启示。

## 原理与机制

想象你是一位试图测量某个自然界[基本常数](@entry_id:148774)的物理学家。你会希望，无论你如何设置实验——无论是在温暖还是寒冷的房间，在海平面还是在山顶——在考虑了已知的[环境影响](@entry_id:161306)后，你所测量的[基本常数](@entry_id:148774)都保持不变。我们这些从事医学和公共卫生领域的人也有类似的抱负。当我们问“这种疫苗的效果如何？”或“这种行为的风险有多大？”时，我们正在寻找一种稳定、可靠的效应度量。但在这里，我们遇到了一个有趣的数学难题，它可能导致明显的悖论。理解这一难题的旅程将我们带向了在一个复杂、异质的世界中测量效应的意义核心。这就是**可折叠性**的故事。

### 分层世界：我们为何要分层

假设我们正在一个大型果园里测试一种新肥料。这个果园里混合种植着两种苹果树：'Granny Smith'和'Red Delicious'。我们想知道肥料对苹果产量的影响。这似乎很简单：比较施肥树木与未施肥树木的产量。

但如果这种肥料对Granny Smith效果极佳，而对Red Delicious效果平平呢？又或者，由于偶然或设计，我们施肥的组里有更多的Granny Smith呢？一个简单的总体比较可能会产生误导。为了得到更清晰的画面，我们需要更加小心。我们应该分别考察每个组内的效果：首先，比较施肥与未施肥的Granny Smith；其次，比较施肥与未施肥的Red Delicious。这个将我们的数据分割成更均质子组的过程称为**分层**。我们用来分割的变量——在这个例子中是“苹果品种”——就是我们的分层变量，或协变量。

现在到了关键问题：一旦我们得到了每个分层（每种苹果）内的效应，我们如何将它们结合起来讨论果园的*总体*效应？我们能简单地……求平均值吗？令人惊讶的是，答案是“这取决于你如何测量‘效应’”。

### 线性英雄：一种表现良好的度量

一种直接的效应测量方法是计算**风险差（Risk Difference, RD）**。它回答了这样一个问题：“如果服用该药物，每100人中会有多少*更多*的人康复？”这是一个简单的减法。

让我们来看一个假设的医学研究，类似于[@problem_id:4638381]中描述的研究。一种新药与安慰剂进行对照测试，人群根据基线合并症分为两组，我们称之为低风险组（$C=0$）和高风险组（$C=1$）。

-   在低风险组（$C=0$）中，使用安慰剂出现不良结局的风险为$0.02$，使用药物为$0.10$。这里药物似乎增加了风险。让我们为了一个有益效果重新设想一下情景。假设*未康复*的风险，安慰剂组为$0.10$，药物组为$0.02$。风险差为$0.02 - 0.10 = -0.08$。药物使未康复的风险降低了8个百分点。
-   在高风险组（$C=1$）中，假设未康复的风险，安慰剂组为$0.25$，药物组为$0.13$。风险差为$0.13 - 0.25 = -0.12$。药物使风险降低了12个百分点。

这种药物在两个分层中都有效，但在高风险组中效果更好。那么总体效果是什么？如果人群中60%是低风险，40%是高风险，我们的直觉告诉我们应该计算一个加权平均值：
$$ \text{Overall RD} = (0.60 \times -0.08) + (0.40 \times -0.12) = -0.048 - 0.048 = -0.096 $$
如果我们通过汇集所有数据来计算总体（或**边际**）风险，我们会发现它确实是$-0.096$。数学计算完美吻合[@problem_id:4638381]。[边际效应](@entry_id:634982)是**条件**（分层特异性）效应的简单加权平均。这个优美、直观的属性被称为**可折叠性**。风险差是一个可折叠的度量。它的表现正如我们的直觉所预期的那样。**风险比（Risk Ratio, RR）**也是如此，它衡量风险的相对变化，前提是没有混杂[@problem_id:4616567]。

### 弯曲平均值的悖论

现在，让我们转向一个不同且可能更著名的效应度量：**优势比（Odds Ratio, OR）**。一个事件的**优势（odds）**是它发生的概率除以它不发生的概率。例如，如果一个事件的风险是$0.25$（或四分之一），那么优势是$\frac{0.25}{1-0.25} = \frac{0.25}{0.75} = \frac{1}{3}$。优势比就是治疗组的优势与[对照组](@entry_id:188599)优势的比值。

OR具有绝佳的数学特性，使其成为逻辑回归（现代统计学的主力工具）中的自然参数[@problem_id:4616567]。但它有一个古怪的个性。

让我们想象一个新的情景，这个情景是为了揭示这种古怪特性而构建的，如[@problem_id:4905062]所示。一项治疗在两个分层$z_1$和$z_2$中进行测试。我们仔细测量效应，发现在*两个*分层中，治疗的效果完全相同：它使康复的优势增加了两倍，即变为原来的三倍。也就是说，在分层$z_1$中条件OR是$3.0$，在分层$z_2$中条件OR也是$3.0$。

你猜合并后总人群的总体、边际OR是多少？肯定是$3.0$，对吧？

让我们来算一下。根据问题中给出的具体风险，我们通过在各分层间取平均来计算治疗组和非治疗组人群的边际风险。然后我们计算边际OR。结果不是$3.0$。它大约是$2.33$！[@problem_id:4905062]。

这令人困惑。治疗效果在每一个亚组中都是$3.0$，但当我们审视整个人群时，效果似乎变小了。这种现象被称为**非可折叠性**。优势比是一个非可折叠的度量。它违背了我们关于平均的简单直觉。

### 平均值为何弯曲：非线性的秘密

这是某种统计学的黑魔法吗？完全不是。它是一个基本数学原理的直接结果。风险（$p$）和优势（$p/(1-p)$）之间的关系是**非线性**的。

想一个更简单的非线性函数：求一个数的平方。
我们取数字1和9的平均值，平均值是5。平均值的平方是$5^2 = 25$。
现在我们先对数字求平方，然后取平均值：$1^2 = 1$和$9^2 = 81$。1和81的平均值是41。
注意$25 \neq 41$。平均值的平方不等于平方的平均值。

[优势函数](@entry_id:635295)正是这样。平均风险的优势不等于优势的平均值。
$$ \frac{\text{avg}(p)}{1 - \text{avg}(p)} \neq \text{avg}\left(\frac{p}{1-p}\right) $$
当我们计算边际OR时，我们实际上是在做方程的左边（先平均风险）。当我们思考分层特异性OR的“平均值”时，我们是在想方程的右边。因为函数是非线性的，这两条路径会得出不同的答案。风险差是一个简单的减法，是线性运算，所以它不会受此“悖论”的影响。

### 身份误认：非可折叠性不是混杂

这是最关键的概念飞跃。在统计学入门课上，你可能学到，如果一个“粗略”估计（如我们的边际OR 2.33）不同于一个“校正”估计（我们的条件OR 3.0），那么这种差异是由于**混杂**。混杂因素是同时与暴露和结局相关的因素，它会搅浑水。

但在我们讨论的所有情景中，我们都小心翼翼地设定了*没有混杂*。例如，暴露是随机化的，意味着它是独立于分层变量分配的（[@problem_id:4519161]，[@problem_id:4912950]）。我们看到的差异不是一个需要“校正”的偏倚。

边际OR和条件OR是两个不同但数学上都有效的量。它们回答的是不同的问题。
-   **条件OR**（3.0）回答：“对于一个*特定类型*的个体（例如，一个Granny Smith苹果），治疗在多大程度上改变了他们结局的优势？”这通常被解释为生物学或机制上的效应。
-   **边际OR**（2.33）回答：“如果我们治疗一个*从整个人群中随机抽取的人*，他们结局的优势平均会改变多少？”这是一个群体平均效应。

对于OR来说，它们不相等并非一个缺陷；这是一个基本属性。将非可折叠性与混杂相混淆是在解释统计结果时一个常见且严重的错误[@problem_id:4616567]。

### 悖论何时消退：可折叠性的条件

那么，OR是否总是注定会有这种悖论行为？不完全是。驱动这种现象的非线性有其局限性。在特定条件下，OR会变得可折叠——或非常接近可折叠[@problem_id:4850642]。

两个严格的条件是无关紧要的：要么效应为空（所有分层的OR=1），要么分层变量根本不是一个风险因素（那样的话，为什么还要分层呢？）。

最重要的实际条件是**罕见结局假设**。当一个结局非常罕见时，其概率$p$是一个非常小的数。在这种情况下，$1-p$非常接近1，而优势$p/(1-p)$约等于风险$p$。

这意味着什么？这意味着优势比（优势的比值）成为风险比（风险的比值）的一个非常好的近似。而正如我们前面所见，风险比*是*可折叠的！

因此，对于罕见疾病，OR的非可折叠性要轻微得多。我们可以用具体的数字看到这一点。在一个结局常见的假设情景中，一个条件OR为2.0会缩小到边际OR为1.90。但在一个结局罕见的类似情景中，条件OR为2.0仅缩小到边际OR约1.99[@problem_id:4645552]。这个悖论几乎消失了，尽管它从未完全消失[@problem_id:4519161]。

### 深入探讨：时间维度上的非可折叠性

这个原理超出了简单的优势。考虑生存分析，我们测量治疗对事件发生前时间（如死亡）的影响。这里一个常用的度量是**[风险率](@entry_id:266388)比（Hazard Ratio, HR）**。HR为0.5意味着治疗在任何给定时刻都将事件的瞬时风险减半。

[风险率](@entry_id:266388)比也是非可折叠的，原因非常直观[@problem_id:4578230]。想象我们的人群再次由两组混合而成：“体弱”组和“强健”组。治疗对两组都有相同的*相对*益处，都将其死亡[风险率](@entry_id:266388)减半。

随着时间的推移，在合并的人群中会发生什么？体弱的个体，由于其内在风险率更高，将倾向于更早发生事件并从“风险集”中被移除。这被称为**易感者耗竭**。

其后果是，随着时间的推移，幸存者中强健个体的比例稳步增加。人群的总体边际风险率是体弱组和强健组[风险率](@entry_id:266388)的加权平均。但由于幸存人群的构成在变化，所以权重也在随时间变化！这意味着边际[风险率](@entry_id:266388)比也会随时间变化，并且不会等于恒定的条件HR [@problem_id:4912950]。

理解非可折叠性并不意味着我们应该抛弃像优势比或风险率比这样的度量。它们是强大的工具。这意味着我们必须在解释时更加严谨，认识到“效应是什么？”这个问题可能有不止一个有效答案，这取决于我们是在问一个群体内的个体还是整个人群。它提醒我们，在生物学和医学这个美妙复杂的世界里，求平均值并不总是看起来那么简单。


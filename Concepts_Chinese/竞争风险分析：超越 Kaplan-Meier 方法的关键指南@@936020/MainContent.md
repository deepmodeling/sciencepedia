## 引言
在探索随时间变化的结局（尤其是在医学和生物学领域）的过程中，生存分析是统计研究的基石。几十年来，Kaplan-Meier (KM) 估计量一直是该领域的主力工具，它提供了一种强大的方法，即使在数据不完整的情况下也能估计事件（如患者生存）的概率。然而，这个经典工具依赖于一个关键假设：只存在一个我们感兴趣的事件。当现实更加复杂，当患者面临具有多种可能结局的岔路口时，会发生什么？这就是竞争风险所带来的挑战。在这些情况下应用标准的 KM 方法是一个常见但影响深远的错误，这个错误会系统性地扭曲我们对风险的理解。本文将直面这一关键问题。首先，在“原理与机制”部分，我们将剖析 Kaplan-Meier 方法为何会失败，并介绍处理[竞争风险](@entry_id:173277)的正确数学及直观框架。接着，在“应用与跨学科联系”部分，我们将探讨其深远的现实影响，展示正确的分析对于设计有效的临床试验、构建准确的预测模型以及诚信地传达医学证据是何等重要。

## 原理与机制

为了真正掌握医学和生物学中机遇与时间的交织，我们必须从一个简单的理想化世界开始。想象一下，我们正在观察大量同时点亮的灯泡。我们的问题很简单：一个灯泡在特定时间前烧坏的概率是多少？在这个世界里，灯泡只有一种可能的命运——要么正常工作，要么已经烧坏。

### 单一结局的世界：Kaplan-Meier 方法

如果我们能观察每一个灯泡直到它烧坏为止，答案会很简单：只需计算在给定时间前已失效的灯泡数量，然后除以总数即可。但现实是复杂的。我们可能需要提前结束实验，或者一些灯泡可能被移到我们无法再观察到的另一栋建筑中。这些就是我们所说的**右删失**观测值。我们知道灯泡在某个时间点之前是好的，但我们不知道它的最终命运。

这正是 **Kaplan-Meier (KM) 估计量** 的精妙之处。它是一个杰出的统计工具，即使信息不完整，也能让我们估计生存概率——即事件未发生的几率。该方法仅在事件发生时重新评估生存概率，使用的是在那一精确瞬间仍处于风险中的受试者数量。

要让这个魔法生效，我们必须做出两个关键假设。第一，我们只关心一种类型的事件（灯泡烧坏）。第二，我们失去对灯泡追踪的原因（删失）必须与其烧坏的可能性无关。例如，如果我们只停止追踪那些开始闪烁的灯泡，那将是**信息性删失**，这会破坏该方法的有效性。但如果我们的删失是非信息性的——比如实验在预设日期结束——KM 估计量就能为我们提供一个关于生存时间的无偏图像。在这个简单的世界里，事件发生的风险就是一减去生存概率，即 $1 - \hat{S}(t)$，其中 $\hat{S}(t)$ 是我们在时间 $t$ 的 KM 生存估计值 [@problem_id:4632188]。

### 当命运出现岔路

这个简单的模型很优美，但生活很少如此简单。临床试验中的患者并非只面临单一结局。考虑一项针对儿童肺移植受者的研究。研究人员可能对移植物衰竭的风险感兴趣。但是，一个孩子可能会经历移植物衰竭，也可能在移植物从未衰竭的情况下死于感染。其中一个事件——因感染死亡——的发生，使得另一个事件——移植物衰竭——变得不可能。它们是**竞争风险** [@problem_id:5187623]。

这个岔路口使我们简单的问题复杂化了。我们不再问“发生*一个*事件的风险是多少？”我们问的是，“发生*特定类型*事件的风险是多少？”在一个儿童也可能因其他原因死亡的世界里，他们在五年内经历移植物衰竭的概率是多少？

### 一个诱人但危险的捷径

面对这种新的复杂性，一个诱人的想法出现了：“为什么不直接使用我们可靠的 [Kaplan-Meier](@entry_id:169317) 方法呢？如果我们只关心移植物衰竭，那就把所有其他事件，比如因感染死亡，都当作患者被简单删失处理好了。”

这不仅仅是一个小错误；这是一个深远的概念性错误，会导致系统性的错误答案。一位死于感染的患者并非“失访”。他们经历移植物衰竭的机会并不仅仅是对我们隐藏了；它已经永久地降为了零。将该患者视为删失，就等于假装他们仍然有可能发生移植物衰竭，就像一个因为搬到新城市而被删失的患者一样。这是对非信息性删失假设的根本性违背 [@problem_id:4546910]。这种“朴素的 KM”方法不将被竞争事件影响的个体从风险人群中移除，因此会持续且可预见地**高估**所关注事件的真实风险。

让我们把这一点具体化。想象一项追踪患者两种结局的研究：心肌梗死 (MI) 和非心血管死亡。为简单起见，假设 MI 的瞬时风险（**[风险率](@entry_id:266388)**）恒定为每月 $\lambda_1 = 0.02$，非心血管死亡的风险率恒定为每月 $\lambda_2 = 0.03$。

如果我们朴素地对 MI 使用 KM 方法，我们会忽略 $\lambda_2$ 并将 12 个月的风险计算为 $1 - \exp(-\lambda_1 \times 12) = 1 - \exp(-0.24) \approx 0.213$，即 $21.3\%$。但这个数字并不代表现实。它代表的是在一个非心血管死亡已被神奇地消除的假设宇宙中，发生 MI 的风险 [@problem_id:4639131]。

### 应对挑战的正确工具：累积发生函数

为了在我们真实、复杂的世界中找到真实的概率，我们需要一个新工具：**累积发生函数 (CIF)**。CIF 能够在存在竞争的情况下，正确计算特定事件在某个时间点前发生的概率。

它背后的思想非常直观。要在某个特定时刻 $u$ 经历事件 $k$（比如 MI），必须满足两个条件：
1.  在时间 $u$ 时你必须仍然“在场”，意味着你还没有经历*任何*竞争事件。这个概率就是总体生存概率 $S(u)$。
2.  然后你必须在那个时刻经历事件 $k$。其瞬时率为特定原因的风险率，$\lambda_k(u)$。

事件 $k$ 在时间 $u$ 发生的[概率密度](@entry_id:143866)就是这两者的乘积：$S(u) \lambda_k(u)$。事件 $k$ 在时间 $t$ 之前发生的总累积概率，即我们的 CIF，就是将这个量从研究开始到时间 $t$ 的所有时刻进行求和（或积分）：

$$ F_k(t) = \int_0^t S(u) \lambda_k(u) du $$

请注意这个公式的美妙之处。事件 $k$ 的风险不仅取决于其自身的风险率 $\lambda_k(u)$。它还取决于总体生存率 $S(u)$，而 $S(u)$ 由*所有*竞争事件的[风险率](@entry_id:266388)共同决定 [@problem_id:4546910]。各种结局的命运是相互交织的。

让我们回到 MI 的例子。总[风险率](@entry_id:266388)为 $\lambda_1 + \lambda_2 = 0.05$。在时间 $t$ 的总体生存率为 $S(t) = \exp(-0.05t)$。将此代入 CIF 公式，我们得到 MI 的真实 12 个月风险：

$$ F_1(12) = \frac{\lambda_1}{\lambda_1 + \lambda_2} \left[ 1 - \exp(-(\lambda_1+\lambda_2) \times 12) \right] = \frac{0.02}{0.05} \left[ 1 - \exp(-0.6) \right] \approx 0.180 $$

真实风险为 $18.0\%$。与朴素 KM 估计的 $21.3\%$ 相比，这个有缺陷的方法导致了对风险的显著高估。这并非[恒定风险率](@entry_id:271158)下的偶然现象；该原理在[风险率](@entry_id:266388)随时间变化的更复杂的现实场景中同样适用 [@problem_id:4631625]。

### 统一的视角：多状态模型

这种将受试者在不同状态之间随时间移动的思维方式，可以推广为一个强大的框架，即**多状态模型**。我们可以将患者想象成在“健康”、“患病”和“死亡”等状态之间转换。分析此类系统的主力工具是 **Aalen-Johansen (AJ) 估计量**。它能计算出在给定起始状态 $i$ 的情况下，在时间 $t$ 处于任何状态 $j$ 的完整概率矩阵。

我们刚才讨论的 CIF 仅仅是从“健康”状态转换到特定“死亡”状态的概率。但最优雅的部分在于：如果我们将多状态[模型简化](@entry_id:171175)到最基本的情景——只有“存活”和“死亡”两个状态，且只有一次转换——强大而通用的 Aalen-Johansen 估计量在数学上可以简化为与我们最初的朋友——[Kaplan-Meier](@entry_id:169317) 估计量完全相同 [@problem_id:4921584]。这是科学统一性的一个美妙例证。我们的旧工具没有错；它只是一个更深刻、更普适真理的特例。

### 临床难题：当风险降低时，事件反而增多

理解竞争风险不仅能保护我们免于犯错，还能揭示关于世界的一些迷人且违反直觉的真相。思考这个临床难题。一种新药被开发用于治疗慢性肾病患者。这些患者面临两个主要风险：心血管 (CVD) 死亡和非心血管死亡。

假设这种新药在预防 CVD 死亡方面非常有效，显著降低了其[风险率](@entry_id:266388)。同时，它在降低非心血管死亡的[风险率](@entry_id:266388)方面也有一点益处。你认为五年内死于非心血管原因的患者的*累积发生率*——即总比例——会发生什么变化？

直觉的答案是，既然[风险率](@entry_id:266388)（hazard）降低了，事件的总数也应该减少。但事实可能恰恰相反。因为这种药物在预防 CVD 死亡方面非常有效，许多原本会因心脏病发作而早逝的患者得以存活。通过将他们从一种命运中拯救出来，该药物让他们“留在赛场上”更长时间，从而有更多时间面临另一种命运的风险：非心血管死亡。即使非心血管死亡的[风险率](@entry_id:266388)较低，但由于有更多的人存活并面临这种风险，其累积发生率可能反而高于[对照组](@entry_id:188599) [@problem_id:4956062]。

这种现象强调了**相对风险**（如风险比，衡量瞬时效应）和**绝对风险**（如 CIF，衡量一个群体中事件的总体概率）之间的关键区别。一种治疗可以降低事件的相对风险，但通过改变[竞争风险](@entry_id:173277)的格局，实际上可能增加经历该事件的人数。这不是矛盾；这是具有竞争性结局的系统的基本属性，对于任何试图解读临床研究结果的科学家或医生来说，这是一个至关重要的教训 [@problem_id:4610374]。看到全貌的唯一方法是同时考虑所有竞争事件。


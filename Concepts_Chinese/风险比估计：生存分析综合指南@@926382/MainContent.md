## 引言
从医学到工程学，在诸多领域中，了解一个事件*何时*发生与了解它*是否*会发生同等重要。然而，这种“时间-事件”分析面临一个根本性挑战：我们很少能观察到研究中每个受试者的最终结局，这一问题被称为删失。简单地忽略这些不完整数据会导致有偏倚且不正确的结论。那么，我们如何才能准确地量化和比较随时间展开的风险呢？

本文将介绍为回答这一问题而设计的强大统计学框架。它探讨了风险比的概念——现代生存分析的基石，为比较组间时间-事件结局提供了一个单一、直观的度量。通过这一探索，您将深入理解研究人员如何从复杂、真实的现实世界数据中得出有意义的结论。

本文的探索分为两部分。首先，在**原理与机制**部分，我们将剖析核心的数学思想，从捕捉瞬时风险的风险函数入手，再到用于估计的优雅的 Cox [比例风险模型](@entry_id:171806)。我们还将研究如何处理模型核心假定不成立的情况。其次，在**应用与跨学科联系**部分，我们将看到这些原理的实际应用，遍及临床试验、流行病学研究以及[个性化医疗](@entry_id:152668)的前沿领域，见证风险比如何带来清晰的认知并推动科学发现。我们首先从探索那些让我们能够度量风险脉搏的基础原理开始。

## 原理与机制

为了理解世界，我们不仅常问事件*是否*会发生，也关心它*何时*发生。在医学领域，肿瘤科医生想知道患者癌症复发的时间。工程师需要预测一个关键部件的寿命。社会学家可能会研究一个人找到第一份工作所需的时间。这些都是“时间-事件”问题。但回答这些问题很棘手，因为生活是复杂的。研究会结束，人们会搬走，或者他们身上发生了完全不同的事情。我们很少能看到我们观察的每个人物的最终结局。这种我们知道事件在某个时间点之前没有发生，但之后便失去追踪的现象，被称为**[右删失](@entry_id:164686)**。

我们究竟如何才能从这样不完整的数据中得出有意义的结论？如果我们简单地忽略被删失的个体，我们就会只关注那些发生了事件的人，而他们可能存在系统性差异，从而使我们的结果产生偏倚。如果我们假装事件在我们失去联系的那一刻就发生了，我们就会严重且错误地低估人们能够保持无事件状态的时间 [@problem_id:4980070]。解决方案需要一种更精妙、更强大的方式来思考随时间展开的风险。

### 风险的脉搏：[风险函数](@entry_id:166593)

想象你正在一条险峻的小路上前行。在任何特定时刻，你关心的是眼前的危险——即在你已经走了这么远的情况下，* 바로 지금* 绊倒的风险。这个概念是生存分析的核心，它被一个优美的数学思想所捕捉：**风险函数**，记为 $h(t)$。

风险函数衡量在事件尚未发生的条件下，事件在时间点 $t$ 发生的瞬时可能性。更正式地，它被定义为一个极限：

$$
h(t) = \lim_{\Delta t \to 0} \frac{\Pr(t \le T \lt t+\Delta t \mid T \ge t)}{\Delta t}
$$

让我们来解析一下。$\Pr(t \le T \lt t+\Delta t \mid T \ge t)$ 是指在存活至时间 $t$ 的前提下，事件在一个极小的时间区间 $[t, t+\Delta t)$ 内发生的概率。将这个概率除以区间宽度 $\Delta t$，就把它变成了一个*率*。因此，风险不是一个概率；它是一个瞬时事件发生率，就像风险的“速度计”读数。它的单位是“事件数/每单位时间”（例如，病例数/每人年）。

风险函数为我们提供了一个动态的风险视图。对于某些疾病，风险可能在诊断后立即达到最高，然后下降。对于另一些疾病，风险可能在几十年内都很低，然后随着年龄急剧上升。这种不断演变的“风险脉搏”与我们更熟悉的**生存函数** $S(t)$ 密切相关，生存函数就是指存活超过时间 $t$ 的概率。两者之间存在一种深刻的关系：存活到时间 $t$ 的概率取决于到该时间点为止累积的总风险 [@problem_id:4980070]。

$$
S(t) = \exp\left(-\int_0^t h(u) \,du\right)
$$

这个方程告诉我们，你完成整个旅程的总体机会取决于你一路上所面临的所有微小危险的总和。$\int_0^t h(u) \,du$ 这一项被称为**累积风险**，它代表了从 $0$ 到 $t$ 的时间区间内累积的总风险负担。

### 比较危险：风险比

描述风险是一回事；比较风险是另一回事。这正是**风险比 (HR)** 发挥作用的地方。它是现代医学统计的基石，提供一个单一、强大的数字来概括两组之间风险的差异。

风险比就是两个[风险函数](@entry_id:166593)的比值。假设我们有一个“暴露”组（例如，服用新药的患者，携带特定基因的个体）和一个“非暴露”组。风险比如下：

$$
\text{HR} = \frac{\text{暴露组风险}}{\text{非暴露组风险}} = \frac{h_1(t)}{h_0(t)}
$$

HR 为 $1$ 意味着风险没有差异。HR 大于 $1$ 意味着暴露会增加风险，而 HR 小于 $1$ 意味着暴露具有保护作用。

考虑一个现实世界的例子。在一项关于[阿尔茨海默病](@entry_id:176615)的研究中，研究人员发现，脑部扫描异常人群的诊断事件率为每年每人 $0.04$，而扫描正常人群的诊断事件率为每年每人 $0.02$。假设风险大致恒定，我们可以用这些率来计算风险比：$\text{HR} = 0.04 / 0.02 = 2.00$ [@problem_id:4970752]。其解释非常直接：在任何时间点，脑部扫描异常的个体被诊断为阿尔茨海默病的*瞬时风险*是扫描正常者的*两倍*。

这个概念非常强大，可以用来为复杂的生物学思想赋予量化意义。例如，我们可以将一种新病原体变种的**毒力**定义为，在考虑患者特征后，其导致严重结局（如进入 ICU）的风险比与野生型相比的值 [@problem_id:4602133]。毒力的 HR 为 $1.5$ 意味着新变种使发生严重疾病的瞬时风险增加了 $50 \%$。

### [比例风险模型](@entry_id:171806)：简化的杰作

在看风险比的公式时，一个关键问题出现了：这个比率会随时间变化吗？1972年，David Cox 爵士提出了一个模型，该模型建立在一个简化但非常有效的假定之上：即风险比随时间**恒定**。这就是**比例风险 (PH) 假定**。

**Cox [比例风险模型](@entry_id:171806)**已成为生存分析的主力。它将具有一组协变量（暴露或特征）$X$ 的个体的风险指定为：

$$
h(t \mid X) = h_0(t) \exp(\beta X)
$$

这个优雅的公式分开了两个部分：
1.  **基线风险** $h_0(t)$，是一个假设个体（$X=0$）的风险函数。这个函数可以有任何形状——它可以上升、下降或摆动。模型对它不做任何假定。
2.  $\exp(\beta X)$ 这一项是一个乘数。它代表协变量的*相对*效应。对于单个二元暴露 $X \in \{0, 1\}$，风险比为 $h(t \mid X=1) / h(t \mid X=0) = \exp(\beta)$，这是一个常数。

Cox 模型的精妙之处有两点。首先，它将通常未知且复杂的潜在风险时间过程（$h_0(t)$）与我们通常想要估计的暴露的恒定相对效应（$\exp(\beta)$）分离开来。这使得该模型成为**半参数**模型。其次，借助一种称为**[偏似然](@entry_id:165240)**的统计方法，我们可以在完全不需要知道或估计基线风险 $h_0(t)$ 的情况下，估计出系数 $\beta$（并因此得到风险比）！[@problem_id:4980070]。分析只关注在每个事件发生的确切时刻处于风险中的个体集合，并根据他们的协变量来判断哪一个最有可能发生该事件。

### 当比例风险假定不成立时：灵活模型的作用

但是，如果比例风险假定——即风险比恒定的想法——是错误的呢？如果一种药物的效果起初很强，但随时间减弱怎么办？或者，如果某个风险因素只在生命[后期](@entry_id:165003)才变得危险呢？

Cox 框架的美妙之处在于它可以扩展以处理这些情况。违反 PH 假定并非致命缺陷，反而是在邀请我们建立一个更有趣、更切合实际的模型。

一种强大的方法是允许系数 $\beta$ 成为时间的函数，即 $\beta(t)$。模型变为：

$$
h(t \mid X) = h_0(t) \exp(\beta(t) X)
$$

现在，风险比本身，即 $\text{HR}(t) = \exp(\beta(t))$，可以随时间变化，从而直接对非比例性进行建模 [@problem_id:4991472]。我们甚至可以检验这样做是否有必要。通过检查一种称为 **Schoenfeld 残差**的特殊数据，我们可以创建诊断 PH 假定违规的图。图中平坦的趋势表明标准模型是足够的，而系统性的斜率则表明存在时变效应 [@problem_id:4991472]。

另一种优雅的策略是**分层**，尤其适用于违反 PH 假定的分类变量（如医院网络）。我们不假定所有人都有一个共同的基线风险，而是允许每个分层（每个医院网络）有其自己独特的基线[风险函数](@entry_id:166593) $h_{0s}(t)$。模型变为 $h(t \mid X, S=s) = h_{0s}(t) \exp(\beta X)$。这允许不同分层之间的潜在风险特征完全不同，从而吸收了非比例性，而我们仍然可以估计在所有分层中我们感兴趣的暴露的单一共同效应 $\beta$ [@problem_id:4961542]。

这些模型突显了一个更深层次的原则：选择[统计模型](@entry_id:755400)就是选择我们想如何度量世界。Cox 模型在相对的、乘法尺度上度量效应（风险比）。但其他模型也存在。例如，**Aalen 加性风险模型**的形式为 $h(t \mid X) = b_0(t) + b_1(t) X$。该模型在绝对的、加法尺度上度量效应——量化事件发生率的绝对差异，这在某些公共卫生情境中可能是更具相关性的量 [@problem_id:4640263]。

### 应对现实世界：复杂性与解决方案

任何科学工具的真正考验在于它如何处理现实世界的混乱。生存分析为几个常见挑战配备了巧妙的解决方案。

[观察性研究](@entry_id:174507)中一个有害的问题是**左截断**，也称为延迟进入。想象一项研究，其时间起点是疾病诊断，但患者只有在首次访问专科诊所时才被纳入研究，而这可能是在诊断后数月或数年。从诊断到入组的这段时间对于研究来说是“永生时间”——要被纳入，个体必须存活这么久。如果我们天真地在入组时启动分析时钟并忽略这段时期，就会引入**永生时间偏倚**，使我们的队列看起来比实际更健康 [@problem_id:4829482]。解决方案非常简单，并且内置于 Cox 模型的逻辑中：我们只需正确定义我们的**风险集**。一个个体只有在正式进入研究后的时间段内才被视为“处于风险中”（即包含在[偏似然](@entry_id:165240)计算的分母中）。

另一个关键问题是**竞争风险**的存在。假设我们正在研究癌症死亡的风险。然而，一些患者可能首先死于心脏病发作。心脏病发作是一个竞争风险，因为它阻止了我们感兴趣的事件（癌症死亡）的发生。为了估计癌症的**特定原因风险**，我们必须将心脏病死亡视为删失事件。当竞争事件发生的那一刻，该个体就从癌症结局的风险集中被移除 [@problem_id:4956077]。再次强调，仔细定义谁“处于风险中”是有效分析的关键。

这些关于风险集和时间依赖建模的原则非常通用，以至于它们促成了针对海量数据集的高效研究设计。在**巢式病例对照**和**病例队列**研究中，我们无需分析整个数百万人的队列，而是可以巧妙地在不同时间点从风险集中抽样[对照组](@entry_id:188599)。这使我们能够以更少的花费和精力获得相同的答案，而这一切都建立在我们已经探讨过的风险的基本原则之上 [@problem_id:4574783] [@problem_id:4614279]。

从简单地计算随时间发生的事件数量开始，我们建立了一个复杂而灵活的框架来理解风险。通过关注瞬时风险以及它在不同群体间的比较，即使面对不完整和复杂的数据，我们也能理清治疗、生物标志物和行为的效应。这证明了统计推理的力量，它能在生命事件展开的不确定性中找到清晰的脉络。


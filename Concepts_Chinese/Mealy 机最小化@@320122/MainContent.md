## 引言
在[数字设计](@article_id:351720)和计算的世界里，优雅与效率至关重要。我们构建复杂的系统来执行精密的任务，但其底层蓝图必须尽可能简单和经济。Mealy 机是一种基本的[计算模型](@article_id:313052)，它描述了输出同时依赖于当前状态和即时输入的系统。但是，当一个机器的初始设计比其实际行为所需更为复杂时会发生什么？它可能包含冗余状态——即从外部看功能上无法区分的不同内部配置，这会导致资源浪费和不必要的复杂性。

本文通过探讨 Mealy 机最小化的过程来应对这一关键挑战：这是一门在不改变机器外部行为的情况下，找到其最紧凑、最高效表示形式的艺术和科学。通过系统地识别和合并这些冗余状态，我们可以在性能和经济性上获得显著的提升。本文将引导您完成这个强大的优化过程。在“原理与机制”部分，我们将深入探讨[状态等价](@article_id:325040)的核心理论以及寻找冗余状态的逐步方法。之后，在“应用与跨学科联系”部分，我们将探讨最小化在工程、[系统理论](@article_id:344590)乃至硬件验证等领域的深远影响。

## 原理与机制

### 机器的灵魂：什么是[状态等价](@article_id:325040)？

想象一下，你面对着两台看起来很复杂的咖啡机。一台是复古型号，由闪闪发光的镀铬和玻璃管构成，精美绝伦。另一台是一个光滑、简约的黑匣子，只有一个触摸屏。你注意到它们的菜单选项完全相同。出于好奇，你进行了一项实验。对于你能想到的每一种可能的按键序列，两台机器都会冲泡出完全相同类型、相同温度、相同分量的咖啡。从你作为用户的角度来看，尽管它们的内部构造大相径庭，但它们在功能上是完全相同的。你可以将其中一台换成另一台，而永远不会察觉到差异。

这正是[状态最小化](@article_id:336923)的精髓。一个数字机器由“状态”组成，这些状态就像是其内存的快照。我们最终关心的不是我们给这些状态起的内部标签——$S_0$、$S_1$、$S_2$ 等等，而是机器的外部行为。如果从任意一个状态开始，任何可能的未来输入序列都无法揭示它们产生的输出序列有任何差异，那么这两个状态就被认为是**等价的**。它们是完美的行为双胞胎，我们的目标就是找到这些双胞胎，以便用一个更高效的单一表示来替代它们。

### 第一项测试：匹配输出

我们如何开始寻找这些双胞胎呢？我们从最直接、最明显的测试开始。如果两个状态，我们称之为 $S_i$ 和 $S_j$，是真正等价的，那么它们至少必须对同一个即时问题给出相同的即时答案。如果你提供一个输入‘1’，状态 $S_i$ 输出‘0’，而状态 $S_j$ 输出‘1’，那么游戏就结束了。它们未能通过第一项测试，并且从根本上是不同的。它们的等价性当场就被证伪了 [@problem_id:1962533]。

在 **Mealy 机** 的世界里，输出同时依赖于当前状态和当前输入，这项测试甚至更为全面。我们必须查看给定状态的整行输出。要使两个状态被视为等价的候选者，它们的输出行为必须在*所有*可能的输入上都完全相同。在这个输出特征上的任何不匹配都意味着它们是立即可区分的，我们可以将它们从潜在等价对的列表中划掉 [@problem_id:1942671]。这是一个强大的第一层过滤器。

与此形成对比的是 Moore 机，其输出仅由状态决定。对于 Moore 机，我们只需将共享相同单一输出值的状态分组。而对于 Mealy 机，条件更为严格：只有当状态对每一个可以想象的输入挑战都共享完全相同的*输出响应*时，它们才会被初步分组 [@problem_id:1962500]。

### 依赖链：蕴含的力量

假设我们找到了两个状态 $S_a$ 和 $S_b$，它们通过了我们的第一项测试，拥有相同的输出行。它们等价吗？别急。真正的等价要求它们不仅在一步之内无法区分，而且在*所有时间*里都无法区分。这意味着在我们给它们一个输入后，它们转移到的*新*状态也*必须*是等价的。

想象一下，我们给这两个状态相同的输入 $x$。状态 $S_a$ 转移到一个新状态 $S_c$，而状态 $S_b$ 转移到另一个不同的状态 $S_d$ [@problem_id:1962520]。为了维持 $S_a$ 和 $S_b$ 之间等价的假象，所得到的状态对 $(S_c, S_d)$ 本身也必须是一个等价对。如果 $S_c$ 和 $S_d$ 不等价，那么必然存在某个未来的输入序列可以区分它们。但是，如果我们能够区分 $S_c$ 和 $S_d$，我们就可以用同样的序列来区分我们最初的状态 $S_a$ 和 $S_b$。

这便是问题的核心，优美而富有递归性。初始状态对 $(S_a, S_b)$ 的等价性依赖于，或者说**蕴含**了，它们对于每个输入的“子”状态对的等价性。这创造了一系列我们必须系统地解开的逻辑依赖关系。

### 侦探的图表：一种系统化方法

要追踪每对可能状态的所有这些分支依赖关系，似乎是一项艰巨的任务。这时，我们引入一个极其简单却功能强大的侦探工具：**蕴含表**。

把它想象成一个大网格或侦探的软木板。网格中的每个单元格代表一对唯一状态（比如 $(S_i, S_j)$）的等价性问题。我们不需要一个完整的方形网格；一个三角形的就足够了。问题“$S_i$ 是否等价于 $S_j$？”在逻辑上等同于“$S_j$ 是否等价于 $S_i$？”。等价关系是**对称的**，所以我们只需要检查每对一次 [@problem_id:1942656]。

现在，我们开始调查：

1.  **第一轮排查**：我们将初始输出测试应用于每一对。如果一对 $(S_i, S_j)$ 对于任何输入有不同的输出，我们就在它们的单元格中画一个大‘X’。它们被确认为不等价。

2.  **记录线索**：对于仍然空白的单元格，我们记录它们的依赖关系。如果我们发现 $(S_a, S_b)$ 的等价性蕴含了 $(S_c, S_d)$ 的等价性，我们就在 $(S_a, S_b)$ 的单元格中写下 $(S_c, S_d)$。我们对所有剩余的对和它们所有的蕴含关系都这样做。

有时，我们会很幸运。对于一对 $(S_2, S_4)$，我们可能会发现，对于每个输入，它们不仅产生相同的输出，而且恰好转移到*完全相同*的下一个状态 [@problem_id:1942683]。在这种情况下，它们的等价性不依赖于任何其他对的等价性。它们的单元格保持空白，没有任何依赖关系。它们当场就被证明是等价的！

### 最终裁决：剩下的就是真相

图表准备好后，真正的行动开始了。这就像一连串倒下的多米诺骨牌。我们反复遍历图表，检查我们的工作。在每一轮中，我们查看写下的依赖关系。如果 $(S_a, S_b)$ 的单元格包含依赖关系 $(S_c, S_d)$，而我们看向 $(S_c, S_d)$ 的单元格时发现它现在有了一个‘X’，这意味着 $(S_a, S_b)$ 等价的条件已经被不可挽回地破坏了。因此，我们也必须在 $(S_a, S_b)$ 的单元格中画上一个‘X’。

一个‘X’可以引发连锁反应，将“不等价”传播到整个图表。这个过程何时结束？当我们可以完整地遍历整个图表而没有添加任何一个新的‘X’时，它就终止了 [@problem_id:1942674]。多米诺骨牌已经全部倒下。系统达到了一个稳定的结论。

我们剩下的是什么？一个填满了标记着可区分状态对的‘X’的图表，以及一些原始、未标记的单元格。这些未标记的单元格代表了在每一轮淘汰中都幸存下来的状态对。这意味着它们有相同的输出，并且它们所蕴含的每一个下一状态对也都是幸存者。这些，且仅有这些，才是真正**等价的状态** [@problem_id:1942697]。它们代表了机器本质的、独特的行为，剥离了所有冗余的命名和连线。

### 不仅仅是整理：揭示隐藏属性

你可能会认为这只是数字内务整理中一个绝妙的智力练习，一种在电路设计中节省几个逻辑门的聪明方法。你是对的。但有时，这种简化的过程不仅仅是整理；它还能揭示一些关于机器本身基本性质的深刻东西。

考虑一个有趣的属性，叫做**可[同步](@article_id:339180)性**。如果一个机器存在一个“复位序列”——一个神奇的输入字符串，无论机器从哪个状态开始，都能迫使其进入一个单一的、可预测的状态——那么这个机器就是可[同步](@article_id:339180)的。对于任何你想要可靠控制的系统来说，这是一个非常有用的属性。

现在来看一个令人惊讶的问题。一个机器有可能*没有*复位序列，但其最小化版本*却有*吗？这似乎自相矛盾。移除状态怎么能*创造*出一个新的全局属性呢？

然而，这确实可能发生 [@problem_id:1962485]。想象一个有四个状态 A、B、C 和 D 的机器。假设状态 A 和 B 形成了一种陷阱；如果机器一旦进入一个不确定的状态，即它可能在 A 或 B，那么没有任何输入序列可以解决这种模糊性。该机器是不可[同步](@article_id:339180)的。然而，如果最小化[算法](@article_id:331821)揭示了一个隐藏的真相：所有四个状态——A、B、C 和 D——实际上都是等价的呢？它们的外部行为是相同的。因此，最小化的机器将只有一个单一的状态！而一个只有一个状态的机器，根据定义，总是同步的。

这里发生的事情非同寻常。原始的、臃肿的设计有冗余的状态，这些状态创造了“虚假”的路径和模糊性。这些内部复杂性不属于机器本质的输入-输出行为，但它们掩盖了一个更深、更简单的真相。通过剥离冗余，[状态最小化](@article_id:336923)不仅仅是让机器变小了；它揭示了其真实的、本质的性质——一种在这种情况下完全可预测和可控的性质。这是一个美丽的示范，说明了对简化的追求如何能够带来意想不到的、强大的洞见。
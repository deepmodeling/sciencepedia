## 应用与跨学科联系

在上一章中，我们熟悉了平均因果效应这个优雅而简单的概念。我们想象了一台“如果……会怎样？”的机器，一个可以告诉我们如果当初做出不同选择会发生什么的魔法装置。平均因果效应 (ATE) 仅仅是这两个平行世界——处理世界和控制世界——之间的平[均差](@article_id:298687)异。这是一个美好的想法。但乍一看，它也是一个不可能实现的想法。正如我们所学到的，“[因果推断](@article_id:306490)的基本问题”在于我们永远只能生活在其中一个世界里。我们可以吃药或不吃药；我们永远不能两者都做。

那么，ATE 仅仅是哲学家的梦想吗？是数学上的虚构吗？完全不是！这个想法真正的美妙之处不在于其抽象的定义，而在于它在数十个领域的科学家中激发的非凡创造力。测量不可测量之物、窥探另一个世界的探索，催生了一套卓越的方法工具箱。本章就是穿越这个工具箱的旅程。我们将看到经济学家、医生、生物学家和计算机科学家，每个人都面对着自己独特的难题，如何设计出巧妙的方法，让“如果……会怎样？”的机器成为现实。

### 轻推的力量：当实验不完美时

估计 ACE 最直接的方法，当然是[随机对照试验 (RCT)](@article_id:346404)。为每个人抛硬币。正面，他们得到新药；反面，他们得到安慰剂。因为抛硬币与这个人的任何方面（他们的健康、年龄或态度）都无关，所以两组之间平均结果的任何差异都必须归因于药物。很简单。

但是，当人们不按指令行事时会发生什么？想象一家科技公司正在测试看在线广告 ($D$) 是否会让人们购买更多东西 ($Y$)。他们可以随机将一些用户分配到“重度广告负荷”组 ($Z=1$)，另一些分配到“轻度广告负荷”组 ($Z=0$)。但他们无法强迫人们*看*广告。重度负荷组的一些用户可能有广告拦截器，所以他们从未看到广告 ($D=0$)。相反，轻度负荷组的一些用户可能仍然看到广告并被暴露 ($D=1$)。这被称为“不遵从”，而且无处不在。这会毁了我们的实验吗？

事实证明不会。它只是迫使我们变得更聪明。我们有一个完全随机的“鼓励”——广告负荷分配 $Z$。这是我们的立足点，我们的“工具”。我们无法测量广告对每个人的影响，但我们可以测量它对一个非常特定的群体的影响：“遵从者”。他们是谁？他们是那些如果被分在重度负荷组就*会*看到广告，但如果被分在轻度负荷组就*不会*看到广告的人。他们的行为“遵从”了我们的鼓励。还有“从不接受者”（广告拦截器用户）和“始终接受者”（无论如何都会看到广告的人）。这个实验对这些人的影响是我们无法得知的。[@problem_id:3131804]

通过问一个稍微不同的问题——不是“对每个人的影响是什么？”而是“对那些我们能影响其行为的人的影响是什么？”——我们可以恢复一个因果效应。这个效应被称为**局部平均[处理效应](@article_id:640306) (LATE)**。其逻辑非常简单：我们测量我们的鼓励对结果的总影响（$Z=1$ 和 $Z=0$ 组之间平均购买量的差异），然后将其除以我们的鼓励对处理本身的影响（两组之间实际看到广告的人的比例差异）。结果就是广告暴露的因果效应，但仅限于遵从者。

这种“工具变量”(IV) 方法非常强大。你在研究一种新的治疗性聊天机器人 ($T$) 是否能减少抑郁 ($Y$) 吗？随机*提供*免费使用 ($Z$) 该聊天机器人就是一个工具。一些被提供的人不会使用它，一些没被提供的人可能自己找到了它。但通过比较基于*提供*的结果，我们可以分离出那些*因为*被提供而使用聊天机器人的用户的因果效应 [@problem_id:3106771]。你在评估一个职业导师计划吗？通过抽签决定项目名额 ($Z$) 是一个完美的工具，用于衡量实际接受的指导 ($T$)，让你能够测量它对那些受抽签结果影响的学生的职业成功 ($Y$) 的真实影响 [@problem_id:3106698]。在每种情况下，关键都是一个鼓励但不强迫某种行为的随机“轻推”。

### 以史为鉴：在野外寻找因果关系

随机实验很棒，但我们不能把所有事情都交给抛硬币决定。我们不能随机决定谁住在污染严重的城市，或者哪些国家采取某种经济政策。对于这些宏大的问题，我们必须成为侦探，在数据中寻找隐藏的“自然实验”。

其中一个最优雅的工具是**[双重差分法 (DiD)](@article_id:640310)**。想象一下，一项新的[环境政策](@article_id:379503)在一个州实施，但在其邻近的州没有。我们想知道这项政策的效果。政策实施后简单比较两个州是有误导性的；它们可能一开始就不同。简单地看“处理”州在政策实施前后的情况也是有误导性的；其他事情可能随时间发生了变化，比如全国性的经济衰退。

DiD 方法做了一件很聪明的事：它使用未处理州的变化作为处理州变化的“反事实”。我们计算处理州结果的变化（之后减去之前），然后减去控制州结果的变化（之后减去之前）。我们认为，这两个差异的差异就是政策的因果效应。这依赖于一个关键而优美的假设：“平行趋势”。我们必须相信，在没有该政策的情况下，两个州会以相同的方式变化 [@problem_id:3132933]。我们发现的效应不是整个群体的 ATE，而是**处理组平均[处理效应](@article_id:640306) (ATT)**——即对那些实际经历了该政策的人的效应。

如果我们能将这些想法结合起来呢？如果一项政策不是强制改变，而只是鼓励改变——就像我们在 IV 部分的轻推一样？这种情况时常发生。一项新的政府补贴可能鼓励但不要求公司采用绿色技术。在这里，我们可以实现一个宏大的综合：我们使用 DiD 方法，不是一次，而是两次！首先，我们用它来衡量政策对*结果*的影响（这是简化形式）。其次，我们用它来衡量政策对*处理采纳*的影响（第一阶段）。这两个双重差分估计的比率给了我们局部平均[处理效应](@article_id:640306)——绿色技术对那些因政策激励而采纳它的公司的因果效应 [@problem_id:3115445]。这是一个惊人的例子，展示了因果工具箱中的不同工具如何结合起来解决更复杂的问题。

### 基因彩票：自然的终极随机试验

工具变量方法在一个你可能意想不到的领域找到了其最壮观的应用：基因组学。想一想：所有实验中，最深刻的随机实验是什么？是受孕时基因的洗牌和分配。你从父母那里随机获得一组基因变异。这是大自然自己的彩票。

这一洞见是**[孟德尔随机化](@article_id:307598) (MR)** 的基础。假设我们想知道较高的[胆固醇](@article_id:299918) ($X$) 是否会导致心脏病 ($Y$)。进行一项终身 RCT 是不可能的。但我们知道某些基因变异 ($Z$) 会导致终生胆固醇水平略高。由于这些基因在受孕时是随机分配的，它们在很大程度上与困扰观测研究的无数混杂因素（如饮食、运动或吸烟）无关。你控制[胆固醇](@article_id:299918)的基因并不知道你喜欢慢跑还是吃培根。

因此，这些基因变异可以充当完美的工具！它们是出生时就被分配的“鼓励”。通过比较具有不同基因变异的人[群中心](@article_id:302393)脏病的[发病率](@article_id:351683)，并根据这些变异对[胆固醇](@article_id:299918)的影响程度进行缩放，我们可以估计[胆固醇](@article_id:299918)对心脏病的因果效应。这与市场营销和聊天机器人的例子中的逻辑完全相同，只是应用在了生物学层面 [@problem_id:2404052]。MR 彻底改变了流行病学，使我们能够为数百种疾病和性状从纯粹的相关性中解开因果关系。

### 作为一种语言的因果关系：构建我们的思想

除了提供数字，潜在结果和平均因果效应的框架还为我们提供了一种强大的新*语言*，用于清晰地思考复杂问题。

考虑一位生态学家试图确定建立保护区对当地家庭收入的因果效应。简单比较保护区内外的收入充满了问题。但用 ATE，即 $E[Y(1) - Y(0)]$ 的术语来构建问题，迫使我们变得精确。我们需要哪些假设才能从观测数据中识别出这一点？我们需要假设我们已经测量了所有混杂变量 $\mathbf{X}$（如基线贫困和土地质量），并且在这些变量的条件下，保护区的选址基本上是随机的。我们还必须援引**稳定单元处理值假设 (SUTVA)**，该假设要求一个家庭的结果不依赖于其邻居是否被处理。这立即敲响了警钟：经济溢出效应怎么办，比如在保护区外创造的旅游工作岗位？形式化的因果框架并不能神奇地解决问题，但它精确地阐明了科学论证和不确定性必须存在的地方 [@problem_id:2488384]。

这种清晰度在分子生物学中同样至关重要。我们可以将蛋白质中的单个突变构建为一次“干预”，将生物体的适应性视为“结果”。这使我们能够严谨地定义像上位性这样的概念——即一个突变的效果取决于遗传背景——作为一种因果效应修饰。它还迫使我们面对在受控实验室实验中测量的效应与在复杂自然环境中效应之间的差异。要从实验室推广到自然界，需要关于“可移植性”的额外假设，而因果框架为我们提供了精确陈述这些假设的语言 [@problem_id:2377419]。

### 最后的谦卑警告：平均值的局限性

我们的旅程展示了从因果效应角度思考的巨大力量。但就像任何强大的工具一样，它可能被滥用，我们必须以一个深刻的警示作为结束。我们讨论过的方法——IV、DiD、MR——都估计的是一个*群体*的*平均*效应。它们对任何单个个体都保持沉默。

想象一个法律案件，辩护团队使用一项 MR 研究，该研究表明酗酒的遗传倾向在群体水平上对攻击性有正向因果效应。他们辩称，因为他们的客户有这些基因，所以他对一次攻击行为的罪责减轻了。这是一个危险且在科学上无效的逻辑跳跃。群体平均值无法告诉我们是什么导致了特定个体在特定情况下的行为。这是经典的**生态谬误 (ecological fallacy)**。被告可能是 MR 研究中的“遵从者”，也可能不是。对他的影响可能更大、更小，或为零。该统计数据在个体层面根本不提供信息。

此外，这代表了一个深刻的伦理错误。它将一种概率性的、群体层面的影响与一种确定性的、个体层面的借口混为一谈。它有滑向遗传[本质主义](@article_id:349491)的风险，即将复杂的人类行为和道德责任简化为一种简单的生物脚本。法律罪责建立在诸如意图和情境等复杂概念之上，这些远远超出了[统计平均值](@article_id:314269)所能企及的范畴 [@problem_id:2404056]。

对因果关系的追求是崇高的。它让我们能够理解世界如何运作，设计更好的政策，开发新药。但它并不揭示命运。它赋予我们理解群体的力量，而伴随这种力量而来的是对个体神秘性和复杂性保持谦卑的责任。
## 引言
在数据丰富的时代，一个根本性的挑战随之出现：如何将来自不同来源的信息合成为一个统一的理解。无论是通过基因、蛋白质和电[信号分析](@article_id:330154)单个细胞，还是根据用户的评分和浏览历史预测其品味，我们都面临着数据格式的“巴别塔”困境。解决方案在于机器学习中一个强大的概念：[共享嵌入空间](@article_id:638675)，一个充当通用翻译器的共同[坐标系](@article_id:316753)。本文旨在探讨弥合这些不同数据“语言”以揭示更深层次、统一见解的方法的迫切需求。在接下来的章节中，我们将踏上从理论到实践的旅程。首先，在“原理与机制”一章中，我们将剖析用于构建这些共享空间的基本思想和关键[算法](@article_id:331821)理念——相关性、生成式和对比式。随后，“应用与跨学科联系”将展示这一概念如何彻底改变生物学、[计算机视觉](@article_id:298749)和协作人工智能等领域，证明其作为现代科学真正的“罗塞塔石碑”的作用。让我们从探索使这种翻译成为可能的优雅原理开始。

## 原理与机制

想象一下，你正试图了解一个人对电影的品味。你可以查看他的 DVD 收藏、他喜欢的类型列表、他在流媒体服务上的评分以及他在社交媒体上关注的演员。这些都是不同的“数据集”，是用不同语言描述相同潜在偏好的方式。你如何将它们整合成一幅单一、连贯的图景？你不会只是把这些列表钉在一起。相反，你会尝试建立一个概念性的*地图*，一个“品味空间”，在那里你可以放置这个人和所有的电影。在这张地图上，邻近意味着兼容。一个人会被放置在他喜欢的电影附近。这个简单的想法就是**[共享嵌入空间](@article_id:638675)**的核心：一个旨在表示和比较不同类型信息的通用[坐标系](@article_id:316753)。它是一块数学上的罗塞-塔石碑，让我们能够在看似迥异的语言之间进行翻译。

这个挑战不仅仅适用于电影推荐。在生物学中，一个细胞可以通过它表达的基因（其转录组）、它构建的蛋白质（其蛋白质组）、其 DNA 中活跃的部分（其[表观基因组](@article_id:335702)）甚至其电行为来描述。自然界以多种语言说话。我们作为科学家的任务是学习她的通用语法。[共享嵌入空间](@article_id:638675)提供了实现这一目标的框架，使我们能够提出深刻的问题：我们能否从细胞的[基因预测](@article_id:344296)其功能？我们能否找到与小鼠免疫细胞相对应的人类细胞？我们能否发现健康细胞与患病细胞之间的细微差别？要回答这些问题，我们必须首先学习如何绘制这张地图。

### 通用翻译器：寻找共同基础

让我们回到我们的电影[推荐系统](@article_id:351916)，它提供了一个优美而具体的起点 [@problem_id:3234704]。我们可以将所有用户评分表示为一个巨大的矩阵，其中行是用户，列是电影。大多数条目是空的，因为大多数人没有对大多数电影进行评分。当我们使用像**[奇异值分解 (SVD)](@article_id:351571)** 这样的数学技术将这个大的[稀疏矩阵分解](@article_id:330270)成三个更小、更密集的矩阵时，奇迹就发生了：
$$R_{k} = U_{k} \Sigma_{k} V_{k}^{\top}$$

可以把这看作是将混乱的个体评分提炼成其基本组成部分。矩阵 $U_k$ 可以被看作是用户的新[坐标系](@article_id:316753)，而 $V_k$ 则是电影的[坐标系](@article_id:316753)。[对角矩阵](@article_id:642074) $\Sigma_k$ 包含“[奇异值](@article_id:313319)”，它告诉我们新地图中每个维度的重要性。妙处在于我们可以将这个重要性因子 $\Sigma_k$ 在用户和电影之间进行分配。例如，我们可以通过 $X = U_{k} \Sigma_{k}^{1/2}$ 的行来定义用户在地图上的位置，通过 $Y = V_{k} \Sigma_{k}^{1/2}$ 的行来定义电影的位置。通过这种选择，用户对电影的预测评分就是他们在这个共享地图上向量的[点积](@article_id:309438)，$x_{i}^{\top} y_{j}$。喜欢相似电影的用户会聚集在一起，被相似用户喜欢的电影也会聚集在一起。

这个原则具有极强的通用性。这不仅仅是 50-50 的分配；我们可以将所有的“重要性”缩放因子都分配给用户（$X = U_{k} \Sigma_{k}$，$Y = V_{k}$）或全部都分配给电影（$X = U_{k}$，$Y = V_{k}\Sigma_k$）。事实上，对于任何介于 $0$ 和 $1$ 之间的标量 $\alpha$，选择 $X = U_{k} \Sigma_{k}^{\alpha}$ 和 $Y = V_{k} \Sigma_{k}^{1 - \alpha}$ 都会产生一个有效的地图，其中[点积](@article_id:309438)仍然可以预测评分 [@problem_id:3234704]。偏好的潜在几何结构保持不变；我们只是在改变用户和电影向量的相对“长度”。核心成就是将两种根本不同类型的实体——用户和物品——放入一个单一、有意义的几何空间中。

### 我们为什么需要一张地图：生物数据的巴别塔

当我们面对现代生物学的复杂性时，这种共享地图的想法不仅变得有用，而且至关重要。今天的科学家可以用数量惊人的方式测量单个细胞，创造出所谓的**[多组学](@article_id:308789)**数据集。这些测量是我们对细胞的不同“模态”或“视图”。

我们面临两个主要的整合挑战，可以认为是“垂直”和“水平”整合 [@problem_id:2536445]。

**垂直整合**是关于为同一组细胞堆叠不同层面的信息。我们可能有一组患者的[转录组](@article_id:337720)（$X^{(\mathrm{H,RNA})}$）、蛋白质组（$X^{(\mathrm{H,PROT})}$）和[代谢组](@article_id:310827)（$X^{(\mathrm{H,MET})}$）。这就像有一本用三种不同语言写的书，其中一本书的每一页都对应于其他书的同一页。我们希望将它们一起阅读以理解完整的故事，这个过程遵循生物学本身的信息流，从 DNA到 RNA 再到蛋白质。

另一方面，**水平整合**处理的是整合相同*类型*但来自不同来源的数据。想象一下，我们有来自人类患者的 RNA 数据（$X^{(\mathrm{H,RNA})}$）和来[自感](@article_id:329482)染他们的细菌的 RNA 数据（$X^{(\mathrm{P,RNA})}$） [@problem_id:2536445]。或者，我们有来自小鼠大脑的 RNA 数据，并希望将其与来自人类大脑的 RNA 数据进行比较 [@problem_id:2892402]。这就像有两本关于同一主题、用同一种语言写的书，但作者或时代不同。它们使用相同的词语，但风格、背景和重点都不同。这些数据集之间系统性的、非生物学的差异被称为**[批次效应](@article_id:329563)**。[共享嵌入空间](@article_id:638675)旨在创建一个剥离了这些“口音”的表示，揭示保守的、潜在的生物学信息。

### 如何绘制地图：三种对齐理念

创建[共享嵌入空间](@article_id:638675)是一门数据对齐的艺术。我们选择的策略取决于我们对数据的假设和我们的目标。广义上，这些策略分为三类：早期融合、中间融合和晚期融合。**早期融合**是最简单的：只需将数据集拼接在一起，然后期待最好的结果。由于“维度灾难”和数据尺度的差异，这通常会失败。**晚期融合**是最谨慎的：为每个数据集建立一个独立的模型，然后在最后结合它们的预测。这种方法很稳健，但可能会错过数据类型之间微妙的相互作用 [@problem_id:2536445]。最有趣和最强大的方法位于中间，即**中间融合**，我们在这里构建[共享嵌入空间](@article_id:638675)本身。让我们来探索实现这一目标的三种主要理念。

#### 1. 相关性理念：寻找共享主题

对齐两个数据集最经典的方法之一是**典型相关分析 (CCA)** [@problem_id:2837449] [@problem_id:2892402]。这个想法非常直观。想象一下，你对同一组学生有两套测量数据——比如说，他们在各种文学考试中的分数和他们在各种数学考试中的分数。CCA 不仅仅是平均所有文学分数和所有数学分数。相反，它会问：“文学分数的哪种加权组合与数学分数的某种加权组合*最相关*？”这第一对最大相关的组合成为我们共享空间的第一个维度——它可能代表“通用分析能力”，例如。然后，它寻找与第一个维度不相关的下一对最相关的组合，依此类推。

通过找到这些连续的共享方差轴，CCA 构建了一个新的、更低维度的空间，其中几何形状由两个数据集之间的共同模式定义。这是一种强大的线性方法，用于寻找一个共同的基础，一个两个数据集都在“谈论”的共享主题集。

#### 2. 生成式理念：学习通用编码

第二种更现代的方法是将共享空间视为一个压缩的“编码”，可以从中重新生成原始数据。这就是**[变分自编码器](@article_id:356911) (VAEs)** 的世界。一个标准的[自编码器](@article_id:325228)是一个[神经网络](@article_id:305336)，被训练来执行一个简单的任务：获取一段数据（如一张图片），将其压缩成一小组数字（[嵌入](@article_id:311541)，或称潜码），然后将该编码解压缩回原始图片。[嵌入](@article_id:311541)的质量由重建的质量来评判。

一个**多模态 VAE** 更进一步。它为每种数据类型都有独立的“编码器”网络——一个用于 RNA，一个用于蛋白质，等等。每个[编码器](@article_id:352366)观察其各自的数据，并在[潜空间](@article_id:350962)中提出自己对[细胞状态](@article_id:639295)的“总结”。一个巧妙的机制，如**专家乘积 (PoE)**，然后将这些总结组合成一个单一、统一的潜在表示 [@problem_id:1423377]。PoE 模型就像一个专家委员会：它通过每个“专家”（每个模态的编码器）的置信度来权衡其意见。如果 RNA 数据提供了对细胞在地图上位置的非常精确的估计（一个小的方差），它的投票权就比来自另一个模态的模糊估计要大。从这个单一、联合的潜码中，“解码器”网络被训练来重建*所有*模态的原始数据。通过学习将不同数据类型压缩成单一编码并再次解压，网络被迫学习一个真正共享的、与模态无关的细胞表示。

#### 3. 对比式理念：通过[关联学习](@article_id:300294)

第三种理念也许是最优雅的。它说：“忘掉重建数据吧。我们只学习一张几何上正确的地图。”这就是**[对比学习](@article_id:639980)**的核心思想。它的规则非常简单，通常由**三元组损失**体现 [@problem_id:2705520] [@problem_id:3156158]。

规则是这样的：选择任何一个数据点作为“锚点”。现在选择一个你知道与它相关的“正例”点，以及一个你知道与它无关的“负例”点。[算法](@article_id:331821)的目标仅仅是调整地图，使得锚点和正例之间的距离小于锚点和负例之间的距离，再加上某个安全边际。就是这样。对于[多模态数据](@article_id:639682)，设置是自然的：对于给定的细胞，其 RNA 图谱和蛋白质图谱构成一个“正例”对。其 RNA 图谱和*另一个*细胞的蛋白质图谱构成一个“负例”对。然后，[算法](@article_id:331821)在[嵌入空间](@article_id:641450)中推拉所有的点，直到这种几何关系对数百万个这样的三元组都成立。

一个密切相关的想法是像 **InfoNCE** 这样的“匹配”目标 [@problem_id:3156158]。这将任务构建为一个多项选择题。给定一个细胞的 RNA 图谱，模型必须在一组（一个“批次”）许多其他蛋白质图谱中选出其对应的蛋白质图谱。模型被训练来最大化答对的概率。通过学习通过这个识别测试，网络含蓄地学习了一个共享空间，其中对应的数据点唯一地彼此靠近。

### 优化地图：局部扭曲和生物学锚点

上述方法旨在找到一个单一的、全局的变换来对齐数据集。但如果“[批次效应](@article_id:329563)”不是一个简单的、均匀的失真呢？如果它是一个复杂的、非线性的扭曲呢？为此，我们需要一个更灵活的策略。

**基于锚点的整合**这一优美的思想应运而生 [@problem_id:2752952] [@problem_id:2837420]。第一步是识别“锚点”——来自每个数据集的细胞对，我们高度确信它们代表相同的生物状态。我们通过搜索**相互最近邻 (MNNs)** 来找到这些锚点。逻辑简单而强大：如果数据集 1 中的细胞 A 将数据集 2 中的细胞 B 视为其最近邻，*并且*细胞 B 也回报以同样的方式，将细胞 A 视为其最近邻，我们就找到了一个 MNN 对。这种相互性的要求是一个强大的过滤器，可以剔除由[批次效应](@article_id:329563)引起的虚假匹配。这就像两个人隔着拥挤的房间互相指着对方——这比一个人指着另一个正看向别处的人是更强的连接信号。

一旦我们有了这个高[置信度](@article_id:361655)的锚点网络，我们不只是移动整个数据集。相反，我们为每个锚点对计算一个“校正向量”。然后，对于我们数据集中的任何细胞，它的校正量是来自附近锚点的校正向量的[加权平均](@article_id:304268)值。这在空间中创建了一个平滑、局部、非线性的扭曲，温和地将数据集拉到一起，同时尊重它们的内部结构。这种方法非常稳健，即使某些细胞类型存在于一个数据集中但在另一个数据集中缺失，它也能正确对齐数据集 [@problem_id:2837420]。新的细胞只是找不到任何锚点，因此不会被校正，从而防止它们被人为地强行归入一个已有的细胞类型。

### 指导绘图师：先验知识的力量

一张好的地图不仅在数学上是合理的，它也植根于现实。我们的生物学地图应该尊重我们从数十年研究中已经了解的知识。我们可以通过在学习过程中添加约束和**辅助目标**来强制执行这一点 [@problem_id:2705520]。

例如，在神经科学中，我们知道某些[神经元](@article_id:324093)是兴奋性的，而其他的是抑制性的。我们可以利用这些信息来指导我们的三元组选择：一个兴奋性[神经元](@article_id:324093)和一个抑制性[神经元](@article_id:324093)应该总是构成一个“负例”对。我们还可以向模型添加辅助任务。除了对齐数据的主要目标外，我们还可以要求网络执行一些次要任务，例如从[神经元](@article_id:324093)在[共享嵌入空间](@article_id:638675)中的位置预测其电生理特性或其已知的遗传标记。这迫使地图以一种生物学上有意义的方式组织起来。这就像告诉一个制图师：“你的地图不仅要有正确的距离，还必须把山脉和河流放在正确的位置。”

### 翻译的局限性

尽管这些方法功能强大，但它们并非魔法。它们是模型，而所有模型都有其假设和局限性 [@problem_id:2892402] [@problem_id:2837416]。

首先，存在**过度校正**的危险。一个在强制数据集混合方面过于激进的方法可能会抹去真实的、具有生物学意义的差异，将它们误认为是技术噪声。这在跨物种分析中尤其是一个风险，因为某些细胞类型可能确实是某个物种独有的 [@problem_id:2892402]。

其次，许多方法做出了**简化的假设**。例如，CCA 假设数据中的共享模式之间存在线性关系。如果真实的关系——比如由于进化[分歧](@article_id:372077)——是高度非线性的，线性方法将无法正确捕捉它。

最后，也是最根本的，所有这些方法都依赖于一个**共享的特征空间**。为了比较人类和小鼠的细胞，我们必须首先确定人类中的哪些基因对应于小鼠中的哪些基因（直系同源基因）。如果这个初始映射是错误的，或者这些“对应”基因的功能在数百万年的进化中已经发生了分歧，我们对齐的基础本身就受到了损害 [@problem_id:2837416]。如果用于构建地图的地标实际上并不对应，那么最复杂的对齐[算法](@article_id:331821)也是无用的。

[共享嵌入空间](@article_id:638675)是现代[数据科学](@article_id:300658)中最强大、最具统一性的思想之一。它为我们提供了一种有原则的方法，来寻找不同世界之间隐藏的联系，翻译自然界的多种语言。但与任何强大的工具一样，明智地使用它要求我们不仅要了解它的优点，还要了解它固有的局限性。


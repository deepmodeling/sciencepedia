## 应用与跨学科联系

既然我们已经掌握了状态机的原理和最小化的艺术，你可能会问自己：“这一切都是为了什么？”这是一个合理的问题。这些只是计算机科学家们玩的小巧谜题吗？答案是一个响亮的“不”，我希望你会像我一样觉得这个答案令人愉快。[最小状态机](@article_id:349172)的概念不仅仅是一个理论上的奇珍；它是一个镜头，通过它我们可以理解各种各样惊人的现象，一个出现在最意想不到地方的工具。它的美在于其普适性。一旦你知道如何观察，你就会开始在各处看到状态机。

### 无处不在的[模式匹配](@article_id:298439)器

或许[有限自动机](@article_id:321001)最直接和最广泛的应用是在[模式匹配](@article_id:298439)的艺术中。每当你使用文本编辑器搜索一个单词，或者运行像 `grep` 这样的命令行工具在文件中查找行，甚至当网络服务器解析一个传入的请求时，背后很可能都有一个状态机在辛勤工作。

为什么它们如此擅长这个？想象一下，你想确保一个数据流中永远不包含被禁止的序列 `aaaa`。你会如何检查？你不需要记住你到目前为止看到的整个数据流。你只需要知道：“在数据流的末尾，我刚刚连续看到了多少个 `a`？”如果你刚看到 `b`，计数为零。如果你看到一个 `a`，计数器加一。如果你看到一个 `b`，计数器重置为零。如果计数器达到四，警报就会响起。这个关于尾随 `a` 数量的“记忆”正是完成此任务的最小自动机的状态集。有五个必要的状态：看到零个、一个、两个或三个 `a`（这些都是可接受的状态），以及第五个“警报”状态，一旦进入就无法逃脱，表示已找到被禁止的模式 [@problem_id:1370403]。

这个简单的想法可以漂亮地扩展。假设你是一名[生物信息学](@article_id:307177)家，正在构建一个工具来扫描网页以查找指向[蛋白质数据库](@article_id:373781)（PDB）的链接。你感兴趣的是找到几种变体中的任何一种，比如 `http://pdb.org`、`https://pdb.org`、`http://www.pdb.org` 等等。你可以构建一个单一、高效的自动机，同时搜索所有这些模式。这个最小自动机的结构堪称美妙：它本质上是你正在寻找的字符串的共同前缀构成的一棵树。当自动机读取字符时，它沿着这棵树向下走。一个能够延续多个潜在匹配的字符使其停留在共同路径上，而一个分叉的字符则将其引向特定分支。如果它读到一个不在任何模式中的字符，它会跳回到一个代表它可能已经开始的最长*新*前缀的状态。结果是一个能以极快速度单遍扫描文本而无需回溯的自动机 [@problem_id:2390466]。

这种能力通过**[正则表达式](@article_id:329549)**的语言得以驾驭。当一个程序员编写一个紧凑的模式如 `^[A-Za-z][A-Za-z0-9_]{0,5}$` 来验证数据库中的基因名称时，他们正在提供一个高层次的蓝图 [@problem_id:2390463]。一个特殊的程序，即编译器，会拿这个蓝图，并由此构建出唯一一个完美执行这些规则的最小状态机。它构建的自动机为匹配模式的每个独特“阶段”都设有一个状态：一个“我还没看到任何东西”的状态，一个“我刚看到一个有效的起始字母”的状态，一个“我看到了一个起始字母和另一个字符”的状态，以此类推，直到允许的最大长度，外加一个用于任何违反规则序列的“死亡状态”。每个状态都代表了验证过程中一个必要的区分。

### 组合规则的艺术

世界很少简单到只遵循单一规则。更多时候，我们需要同时满足几个条件。在这里，状态机也提供了一条异常清晰的路径。

想象一个假设的通信协议，其中有效消息必须同时遵守两个规则：每个 `a` 必须紧跟着一个 `b`，并且 `a` 的总数必须是偶数 [@problem_id:1421318]。一个自动机如何检查这个？优雅的解决方案是为每个规则构建两个简单的自动机，并让它们并行运行。第一个自动机跟踪它是否“正在等待一个 `b`”，第二个自动机跟踪到目前为止看到的 `a` 的数量是“偶数”还是“奇数”。组合系统的状态就是单个自动机状态的配对，例如，(“不等待 `b`”, “偶数个 `a`”)。这被称为**乘积构造**。

这个新自动机中的状态数，在最坏的情况下，可能是其组成部分状态数的乘积。如果你将一个有 $n_1$ 个状态的自动机和另一个有 $n_2$ 个状态的自动机组合起来，你最终可能会得到一个有 $n_1 \times n_2$ 个状态的更复杂的自动机 [@problem_id:1413368]。这反映了一个深刻的真理：复杂性是有代价的。然而，在构造之后，我们可以再次应用我们的最小化算法，看看这些组合状态中是否有冗余，有时会得到一个比理论最大值更紧凑的自动机。

这项技术可以实现一些真正令人惊讶的壮举。让我们尝试一些听起来需要复杂算术才能完成的事情：构建一个能识别可被 3 整除的二进制数的自动机。你可能会认为你需要存储整个数字并执行除法。但你不需要！你只需要记住到目前为止读过的数字的值，*模 3*。让我们自动机的状态为 $q_0$、$q_1$ 和 $q_2$，分别对应余数为 0、1 和 2。如果你在状态 $q_r$（当前值是 $r \pmod 3$），并且你读入一个新的比特 $b$（即 0 或 1），新的值是 $2 \times (\text{旧值}) + b$。所以新的余数是 $(2r + b) \pmod 3$。这个简单的规则给了你所有的转移。例如，从状态 $q_1$（余数为 1）开始，读入一个 `0` 会将你带到状态 $q_2$（因为 $(2 \times 1 + 0) \pmod 3 = 2$），读入一个 `1` 会将你带到状态 $q_0$（因为 $(2 \times 1 + 1) \pmod 3 = 0$）。起始状态是 $q_0$（代表空字符串），唯一的接受状态也是 $q_0$。

现在，如果我们想检查一个数是否能被 3 整除*并且*字符串中 `1` 的数量为奇数呢？我们只需将我们的 3 状态可除性检查器与一个 2 状态奇偶性检查器使用乘积构造法结合起来，最终得到一个拥有 $3 \times 2 = 6$ 个状态的最小自动机，它以完美、无记忆的效率执行这项看似复杂的任务 [@problem_id:1444088]。

### 意想不到的世界：生物学与抽象代数

然而，这个想法的真正范围远远超出了计算机和通信。最小状态机是对一个观察序列并根据所见改变其状态的系统的终极抽象。而生物受体，不就是这样一个系统吗？

考虑一个简化模型，其中细胞表面的受体仅在肽（氨基酸链）包含特定基序 `BNA`——一个碱性残基（`B`），后跟一个中性残基（`N`），再后跟一个酸性残基（`A`）——时才与之结合。当肽链一个氨基酸一个氨基酸地呈现给受体时，受体“记住”了什么？我们可以用一个状态机来回答这个问题 [@problem_id:2390477]。

我们之前看到的 Myhill-Nerode 定理的等价类，也就是最小 DFA 的状态，现在具有了具体的生物学意义。
*   一个状态代表“我还没有看到基序的任何部分。”这是受体的静息状态。
*   另一个状态代表“我最后看到的是一个 `B`。”受体现在已准备就绪，等待一个 `N`。
*   第三个状态对应于“我最后看到的是 `BN`。”受体处于“接近结合”的构象，只需要一个 `A` 来完成锁定。
*   最后一个接受状态意味着“我已看到完整的 `BNA` 基序。”受体已经结合了它的目标，之后发生的任何事情都无法改变这个事实。

这个拥有四个状态的最小自动机，是受体记忆的完美模型。它揭示了要执行这个识别任务，受体只需要能够保持四种不同的构象状态。蛋白质折叠和化学的巨大复杂性归结为这个简单的有限状态逻辑。

最后，为了展示这个概念真正的统一力量，让我们冒险进入纯数学的抽象世界。群是具有满足某些性质的乘法规则的元素集合。例如，一个正方形的对称性构成一个包含八个元素的群。我们能构建一个“理解”群结构的自动机吗？

令人惊讶的是，答案是肯定的。考虑正方形的对称群，它可以由一个旋转 `r` 和一个翻转 `f` 生成。我们可以构造一个自动机，其中*状态就是群本身的元素*。起始状态是单位元 `e`。当自动机从输入字符串中读取一个生成元符号，比如 `r`，它会从当前状态 `g` 转移到一个新状态 $g \cdot r$，这仅仅是通过应用群的乘法规则完成的 [@problem_id:1421353]。在读取像 `rfr` 这样的词后，自动机将处于与该词所计算出的群元素相对应的状态。

这将群论的问题转化为了关于自动机的问题。例如，如果我们想找到所有计算结果与翻转 `f` 可交换的元素的词，我们只需将我们状态机中所有这样的元素指定为“接受状态”。问题就简化为找到从起始状态到任何接受状态的所有路径。最终的最小自动机揭示了群的深刻结构特性；其状态数可以对应于一个[子群的指数](@article_id:300499)，将抽象的自动机与代数中的深刻定理联系起来。

从搜索文本到检查算术，从模拟生物分子到探索代数基础，[最小状态机](@article_id:349172)证明了自己是一个具有深刻和统一之美的思想。它教给我们一个基本的教训：在许多复杂的系统中，重要的不是事件的全部、无限的历史，而只是对过去的一个有限的、本质的记忆。科学的艺术往往就是发现那个本质记忆的艺术。
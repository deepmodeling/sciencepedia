## 引言
在科学探究中，我们不断寻求比较不同组间的结局，以理解某种暴露、治疗或行为的效应。一个简单的风险比（RR）为此效应提供了一个直观的度量，但它可能具有很强的误导性。我们比较的组群除了我们感兴趣的暴露因素外，往往在其他方面也存在差异——这个问题被称为混杂——它会扭曲真实的关联。这就带来了一个关键的知识空白：我们如何能在统计学上分离出单个变量的效应，以进行公平的、“同类对同类”的比较？答案在于计算**调整风险比**。

本文为理解和解释这一强大的统计工具提供了一份全面的指南。在第一部分“**原理与机制**”中，我们将探讨调整背后的统计机制。您将了解到为什么直接计算方法可能具有挑战性，[逻辑斯谛回归](@entry_id:136386)和优势比如何提供一种实用的变通方法，以及在解释这些度量时需要考虑的关键注意事项。我们还将深入探讨指导调整变量选择的因果理论。随后，“**应用与跨学科联系**”部分将展示这些概念在现实世界中的应用，从为医学中生死攸关的临床决策提供信息，到在流行病学中塑造大规模的公共卫生策略。我们的探索将从支撑这一基本分析技术的核心原理开始。

## 原理与机制

在我们探求理解世界的过程中，从一种新药的功效到化学品暴露的危险，我们总是在提出比较性的问题。这种治疗是否*降低了*疾病风险？这种行为是否*增加了*不良结局的风险？回答这类问题最自然、最直观的方式是计算**风险比（RR）**，它就是一组的风险除以另一组的风险。RR为2.0意味着风险加倍；RR为0.5意味着风险减半。这是一个极其简单且易于解释的度量。

然而，世界很少如此简单。我们希望比较的两组——比如吸烟者和非吸烟者——往往在许多其他方面也存在差异。平均而言，吸烟者可能比非吸烟者年龄更大，或者有不同的饮食习惯。如果这些其他因素也影响结局（如肺癌），那么直接比较这两个总体的结果就会产生误导，就像比较苹果和橙子一样。我们没有进行公平的比较。这就是**混杂**问题。

为了得到有意义的答案，我们需要提出一个更精细的问题：如果我们能比较两个在*其他所有方面*都相同，仅在我们关心的暴露因素上有所不同的组，那么风险比是多少？这就是**调整风险比**的概念。这是我们试图通过考虑或“调整”其他变量的影响，在统计学上创造一个公平比较的尝试。

### 直接路径及其风险：对数二项回归

那么，我们如何计算这个调整风险比呢？最直接的方法是使用一个以风险比为其自然输出的[统计模型](@entry_id:755400)。**对数二项回归**模型正是为此目的而设计的。它是一种广义线性模型，直接将风险（结局发生的概率）的对数建模为暴露和[混杂变量](@entry_id:199777)的[线性组合](@entry_id:155091) [@problem_id:4952941]。

该模型大致如下：
$$
\ln(P(\text{Outcome})) = \beta_0 + \beta_1 \cdot \text{Exposure} + \beta_2 \cdot \text{Confounder}_1 + \dots
$$

这个模型的美妙之处在于其解释性。因为风险的对数是线性的，所以暴露的系数 $\beta_1$ 正是调整风险比的对数。为了得到调整RR，我们只需计算 $\exp(\beta_1)$。如果 $\exp(\beta_1)$ 为 $0.80$，这意味着在模型中所有其他变量保持不变的情况下，该暴露与风险相对降低 $20\%$ 相关。这正是我们想要的度量。

不幸的是，这条直接路径有一个重大的实际障碍。该模型要求预测的风险，即 $\exp(\beta_0 + \beta_1 \cdot \text{Exposure} + \dots)$，必须总是在0和1之间的一个有效概率。对于某些协变量的组合，特别是当基线风险很高时，指数内的[线性组合](@entry_id:155091)可能会变得过大，模型会试图预测一个大于1的风险——这在数学上是不可能的。这常常导致数值错误，并阻止[模型收敛](@entry_id:634433)到一个解 [@problem_id:4585318]。因此，虽然对数[二项模型](@entry_id:275034)在理论上是理想的，但在实践中可能令人沮丧。

### 便捷的迂回路径：[逻辑斯谛回归](@entry_id:136386)与优势比

这个实际挑战引导我们走上了一条稍微曲折但远为可靠的路径：**[逻辑斯谛回归](@entry_id:136386)**。[逻辑斯谛回归](@entry_id:136386)不直接对风险建模，而是对风险的一种转换形式——**对数优势（log-odds）**进行建模。

什么是优势？一个事件的**优势**是它发生的概率除以它不发生的概率。如果一个事件的概率是 $0.25$（四分之一的机会），那么其优势是 $\frac{0.25}{1-0.25} = \frac{0.25}{0.75} = \frac{1}{3}$（读作“1比3”）。风险被限制在区间 $[0, 1]$ 内，而优势可以从 $0$ 到 $\infty$。优势的对数（logit）可以在所有实数上取值，从 $-\infty$ 到 $+\infty$。这一数学特性使得对数优势成为线性模型的完美、无约束的目标。

[逻辑斯谛回归模型](@entry_id:637047)的形式如下：
$$
\ln\left(\frac{P(\text{Outcome})}{1-P(\text{Outcome})}\right) = \gamma_0 + \gamma_1 \cdot \text{Exposure} + \gamma_2 \cdot \text{Confounder}_1 + \dots
$$

这个模型非常稳健，几乎总能收敛到一个解。它的解释也很优雅。暴露的系数 $\gamma_1$ 是**调整优势比（OR）**的对数。因此，$\exp(\gamma_1)$ 给了我们调整OR，它告诉我们，在模型中其他协变量的条件下，暴露个体的结局*优势*是未暴露个体的多少倍 [@problem_id:4616606] [@problem_id:4833371]。

### 当世界碰撞：比较优势比与风险比

我们已经到达了一个关键的节点。我们想要一个调整风险比，但出于实际原因，我们计算了一个调整优势比。它们是同一回事吗？

答案是：有时近似。当结局罕见时，风险 $P$ 是一个很小的数。因此，$1-P$ 非常接近1，而优势 $\frac{P}{1-P}$ 非常接近风险 $P$。在这种情况下，即所谓的**罕见病假设**，优势比可以很好地近似风险比 [@problem_id:4519915] [@problem_id:4616606]。

然而，当结局常见时，这种近似就完全失效了。让我们考虑一个情景：[逻辑斯谛回归](@entry_id:136386)得出一个暴露的调整优势比为 $3.5$，未暴露个体的基线风险为 $0.18$（或18%）。由于18%并不是一个特别罕见的事件，我们应该持怀疑态度。一个天真的解释可能会认为暴露组的风险是未暴露组的3.5倍。但OR是优势的比值，而不是风险的比值。我们可以使用一个简单的公式将OR转换回确切的RR：
$$
\text{RR} = \frac{\text{OR}}{1 - P_0 + P_0 \cdot \text{OR}}
$$
其中 $P_0$ 是未暴露组的基线风险。代入我们的数字，确切的风险比是 $\frac{3.5}{1 - 0.18 + 0.18 \cdot 3.5} \approx 2.41$。$3.5$的优势比对应着仅为$2.41$的风险比！在这种情况下，将OR用作RR的替代品将导致对效应的大幅高估，约高估了45% [@problem_id:4645536]。作为一般规则，对于有害效应（OR > 1），OR将总是比RR离1更远。对于保护性效应（OR  1），OR将总是比RR更接近0。

### 一个奇特的性质：优势比的不可坍缩性

OR和RR之间的区别甚至更深，揭示了一个奇怪而迷人的数学特性。想象我们进行一项完美的随机试验，因此我们的治疗与任何患者特征（如年龄）之间没有混杂。我们发现在年轻患者中，治疗效应的优势比是 $0.6$，在年长患者中也是 $0.6$。现在，你认为在整个人群中（合并年轻人和老年人），优势比会是多少？逻辑上似乎应该是 $0.6$。

令人惊讶的是，它不会是 $0.6$。它可能，比如说，是 $0.68$ [@problem_id:4158364]。这不是一个错误。这是优势比的一个固有属性，称为**不可坍缩性**。边际（或粗略）优势比不是层特异性优势比的简单加权平均。这是因为OR是比值的比值，当你在具有不同基线风险的组之间取平均时，这种结构不表现出线性行为。相比之下，像风险差这样的度量是**可坍缩的**——[边际效应](@entry_id:634982)总是层特异性效应的加权平均 [@problem_id:4158364]。

这个“奇特”的属性具有深远的意义。当我们在[逻辑斯谛回归模型](@entry_id:637047)中添加一个变量时，我们主要暴露的系数可能会改变。我们通常将这种变化解释为“移除了混杂偏倚”。然而，这种变化的一部分可能仅仅是由于不可坍缩性。调整OR是一个*条件性*度量，描述在特定协变量层内的效应。粗略OR是一个*边际*度量，描述在整个人群中平均的效应。由于不可坍缩性，即使在完全没有混杂的情况下，这两者也是根本不同的度量 [@problem_id:4612641] [@problem_id:4638769]。

### 调整的艺术：模型中应包含哪些变量？

鉴于这些复杂性，我们如何决定“调整”哪些变量？这不仅仅是一个统计学问题，而是一个科学问题，由我们对问题[因果结构](@entry_id:159914)的理解来指导。我们可以使用**[有向无环图](@entry_id:164045)（DAGs）**等工具来可视化这种结构。

DAG帮助我们识别不同类型的变量：
*   **混杂因素**：一个既是暴露又是结局的共同原因的变量（例如，结构 $X \leftarrow Z \rightarrow Y$ 中的 $Z$）。这些变量创建了一条非因果的“后门路径”关联。我们*必须*调整混杂因素以阻断这条路径，从而分离出 $X$ 对 $Y$ 的真实效应。
*   **对撞因子**：一个既是暴露又是结局的共同效应的变量（例如，结构 $X \rightarrow C \leftarrow Y$ 中的 $C$）。对撞因子路径天然是阻断的。如果我们调整对撞因子，我们会反常地*打开*这条非因果路径并引入偏倚，这被称为[对撞偏倚](@entry_id:163186)。因此，我们*绝不能*调整对撞因子 [@problem_id:4616582]。
*   **中介变量**：一个位于暴露和结局之间因果路径上的变量（例如，$X \rightarrow M \rightarrow Y$ 中的 $M$）。是否调整中介变量取决于问题。调整它，你会得到 $X$ 不通过 $M$ 发挥作用的*直接效应*。不调整它，你会得到 $X$ 的*总效应*。

最终，选择一个调整集是一门艺术，需要利用我们的专业知识来区分朋友（混杂因素）和敌人（对撞因子）。目标是通过关闭所有后门路径同时保持所有因果路径开放来估计因果效应，并且我们估计的优势比必须在其条件性质及其与我们通常寻求的风险比的区别的充分认识下进行解释 [@problem_id:4519915]。从简单的比较到经过适当调整的估计，这段旅程证明了统计方法与因果推理之间美妙的相互作用。


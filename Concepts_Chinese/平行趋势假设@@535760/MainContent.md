## 引言
我们如何才能知道一项新政策、一种新疗法或一个社会项目带来的真正影响？要回答这个问题，我们需要解开一个根本性的难题：我们永远无法观察到一个没有实施干预的世界会是什么样子。这种无法观察到的情景，即“反事实”，使得简单的“前后”对比或“并排”分析变得不可靠，因为它们很容易受到其他变化因素的污染。这一知识鸿沟为寻求循证决策的研究人员和政策制定者带来了重大挑战。

为了克服这一难题，社会科学家们开发了[双重差分法](@entry_id:636293)（Difference-in-Differences, DiD），这是一种巧妙的方法，它将处理组随时间的变化与未处理的[控制组](@entry_id:188599)随时间的变化进行比较。然而，DiD的整个逻辑结构都建立在一个单一而强大的理念之上：**平行趋势假设**。这一理念相信，在干预之前，两个组处于相似的轨迹上，并且在没有干预的情况下，它们本会继续保持这种状态。本文旨在阐释这一基础概念，解释其作用、重要性以及我们如何建立对它的信心。在接下来的章节中，我们将探讨该假设背后的原理和用于检验它的侦探工作，然后遍览其在公共卫生、法律和环境科学等领域的广泛应用，揭示这一个统计学理念如何帮助我们理解复杂世界中的因果关系。

## 原理与机制

### 反事实难题：我们如何知晓未曾发生之事？

想象一下，你是一位城市规划师，刚刚为一个我们称之为“T”的社区投入巨资修建了一条新的轻轨（LRT）线路。你希望这种新的便捷交通方式能鼓励居民更多地步行，从而改善公共健康。一年后，你想知道：这个方法奏效了吗？新开通的列车真的增加了人们的身体活动量吗？

这个看似简单的问题背后隐藏着一个巨大的挑战。要真正了解列车的效果，你需要测量T社区*有*列车时的身体活动量，然后，在另一个平行宇宙中，测量*完全相同的社区在完全相同的时间*但*没有*列车时的活动量。这两种情景之间的差异就是真正的因果效应。这第二种无法观察的情景——没有列车的世界——就是科学家所说的**反事实**。它是那条未选择的路，其本质决定了它无法被直接观察到。

那么，我们能做些什么呢？我们可以尝试简单的比较。我们可以测量T社区在LRT建成前后的平均每周身体活动量。假设我们发现活动量每周增加了35分钟。这是列车的效果吗？不一定。在同一年里，也许市政府开展了一场公共健康运动，或者一个异常温和的冬天鼓励了全城的每个人都更积极地活动。一个简单的“前后”对比会错误地将所有这些其他变化归因于列车。[@problem_id:4581751]

或者，我们可以将T社区与一个没有修建LRT线路的类似社区“C”进行比较。列车建成后，我们发现T社区的居民比C社区的更活跃。这种差异是由于列车造成的吗？同样，不一定。也许T社区本来就更有健康意识，或者一开始就有更多的公园。这些预先存在的差异会污染一个简单的“[横截面](@entry_id:143872)”比较。[@problem_id:4581751]

面对无法观察反事实的困境，以及这些简单比较的明显缺陷，我们似乎束手无策。我们究竟如何才能将列车的效果从世界上所有其他噪音中分离出来呢？

### 神来之笔：[双重差分法](@entry_id:636293)

在这里，我们找到了一个优美而巧妙的解决方案，它已成为现代政策评估的基石：**[双重差分法](@entry_id:636293)（Difference-in-Differences, DiD）**。DiD的神奇之处在于，它将两种有缺陷的方法——“前后”对比和“处理-控制”比较——结合起来，使得它们各自的偏误相互抵消。

让我们回到我们的城市。假设我们拥有LRT建成前后T社区（处理组）和C社区（[控制组](@entry_id:188599)）的数据。

*   在没有建车的控制社区C，假设平均每周身体活动量从$95$分钟增加到$115$分钟。变化量是$115 - 95 = 20$分钟。这20分钟的增长是我们对“背景趋势”的估计——即温和的冬天和全市范围的健康运动的综合影响。

*   在接受处理的T社区，活动量从$105$分钟增加到$140$分钟。变化量是$140 - 105 = 35$分钟。

现在是关键一步。T社区增加的35分钟是LRT效果*和*影响了C社区的相同背景趋势的混合体。为了分离出LRT的效果，我们只需减去从[控制组](@entry_id:188599)估计出的背景趋势。这个“差分的差分”是：

$$ \text{Effect} = (\text{Change in Treated Group}) - (\text{Change in Control Group}) $$
$$ \text{Effect} = (140 - 105) - (115 - 95) = 35 - 20 = 15 \text{ minutes per week} $$

这就是我们的DiD估计值。通过使用[控制组](@entry_id:188599)的变化作为处理组反事实趋势的代理，我们剔除了共同冲击，分离出了LRT的影响。我们找到了一种估计未发生之事的方法。[@problem_id:4581751]

### 无形的支柱：平行趋势假设

然而，这个巧妙的技巧依赖于一个深刻而关键的假设。它是支撑整个DiD结构的无形支柱。我们假设，在控制社区（C）中测得的“背景趋势”，可以有效地替代处理社区（T）*在没有*修建列车的情况下*本应经历*的背景趋势。

这就是**平行趋势假设**。

它并不假设两个社区一开始就必须有相同水平的身体活动量。在我们的例子中，它们就没有（$105$分钟对$95$分钟）。它只假设，在没有处理的情况下，它们的结果会平行发展。在视觉上，如果你在图表上绘制它们随时间变化的活动水平，代表两个社区的两条线在干预前应该是平行的。DiD方法衡量的是干预后处理组的线偏离这条平行路径的程度。

用潜在结果的语言来更正式地表述，设$Y_{it}(0)$为组$i$在时间$t$处于“未处理”状态时的结果（例如，身体活动量）。平行趋势假设为：

$$ \mathbb{E}[Y_{T, \text{post}}(0) - Y_{T, \text{pre}}(0)] = \mathbb{E}[Y_{C, \text{post}}(0) - Y_{C, \text{pre}}(0)] $$

这个方程精确地陈述了这样一个思想：处理组的未处理潜在结果的变化，等于[控制组](@entry_id:188599)的未处理潜在结果的变化。正是这个假设，允许我们用可观察到的[控制组](@entry_id:188599)变化来替代不可观察到的处理组反事实变化，从而识别出**处理组的平均[处理效应](@entry_id:636010)（ATT）**。[@problem_id:4776619] [@problem_id:4370351] [@problem_id:4792541] [@problem_id:4550121]

### 侦探工作：我们如何检验一个无法检验的想法

但是，我们如何能对一个关于我们看不见的平行宇宙的假设有信心呢？我们无法证明它，但我们可以像侦探一样，收集线索，看看它是否合理。

**线索一：回顾过去**
最直观的检验是查看干预*之前*的数据。如果在政策变化前的几年里，两个组的趋势是平行的，那么它们之后会继续保持平行的说法就更可信了。在我们的LRT例子中，假设我们有多一年前（$t=-2$）的数据。我们发现从$t=-2$到$t=-1$，T社区的活动量从$100$增加到$105$（变化量为$+5$），而C社区的活动量从$90$增加到$95$（变化量也为$+5$）。干预前的趋势完全相同！这是对我们假设的有力支持证据。[@problem_id:4581751] 绘制所有可用的处理前时期的组平均值是一个基础且不可或缺的诊断步骤。[@problem_id:4550470]

**线索二：安慰剂检验**
一个更正式的检验是“安慰剂”或“[证伪](@entry_id:260896)”检验。想象一下，你有好几年的处理前数据。你可以假装政策的实施时间比实际更早。例如，如果政策于2020年开始，而你有2015-2019年的数据，你可以进行一次DiD分析，假装政策始于2018年。如果平行趋势假设成立，你应该发现什么？什么都没有。估计出的“效应”应该为零。如果你在一个本不应存在效应的地方发现了统计上显著的效应，这就是一个重要警示，说明趋势从一开始就不是平行的。如果安慰剂估计值接近于零，且其[置信区间](@entry_id:138194)包含零，这会增强我们对该方法的信心。[@problem_id:4550470] [@problem_id:4550121]

**线索三：事件研究图**
这是一个结合了前述思想的强大视觉和统计工具。我们不是只得出一个单一的DiD估计值，而是估计处理组和[控制组](@entry_id:188599)在相对于干预日期的*每个时期*的差异。由此产生的图表显示了差异随时间如何演变。在干预前，我们期望这些估计值在统计上与零无异，随机地在零线附近波动。这证实了没有系统性的“前置趋势”。然后，在干预发生时，我们应该看到估计值开始偏离零，揭示政策在时间推移中展开的动态效应。对所有干预前系数进行联合统计检验，可以为它们作为一个整体是否异于零提供一个正式的结论。[@problem_id:4566439]

这些诊断性检查至关重要。发现处理组和[控制组](@entry_id:188599)的结果基线*水平*不同并不违反该假设。但发现它们有不同的处理前*趋势*则是一个严重问题，这表明[控制组](@entry_id:188599)不是一个有效的反事实基准。[@problem_id:4550470]

### 必要的谦逊：检验能告诉我们什么，又不能告诉我们什么

在此我们必须停下来，注入一剂理智上的谦逊，这是所有科学探究所必需的品质。当我们的侦探工作一无所获时——当我们的安慰剂检验和前置趋势系数都为零时——这意味着什么？这是否*证明*了平行趋势假设是正确的？

不。这是一个极其重要的一点。在统计学中，未能找到反对一个假设的证据，并不等同于找到了支持它的证据。问题在于**统计功效**。我们的检验可能只是太弱了——样本量太小，数据噪音太大——以至于无法检测到一个实际存在的、非零的前置趋势。[@problem_id:4626149]

想象一个前置趋势检验，其中估计的趋势差异是$0.8$个单位，但[标准误](@entry_id:635378)很大，为$0.7$。该检验未能发现统计上显著的差异。人们很容易宣告胜利，并说假设成立。但让我们计算一下这个检验的功效。如果潜在的真实趋势差异实际上是$1.0$个单位，这个检验大约只有30%的机会能检测到它！这意味着有70%的可能会犯[第二类错误](@entry_id:173350)——未能发现一个确实存在的违规情况。在低功效的情况下，一个“不显著”的p值并不能让人放心；它是不确定的。[@problem_id:4626149]

这告诉我们，“通过”前置趋势检验并不能给我们声称确定性的许可。它给我们的是一致性、合理性和一定程度的信心，但它并不能消除偏误的可能性。好的科学要求我们承认这些局限性，诚实地报告我们的检验结果，并考虑我们的结论对我们核心假设的潜在、未被发现的违规有多敏感。[@problem_-id:5174979]

平行趋势假设是一个优美、强大的理念，它开启了一种向世界提出因果问题的方法。但它仍然是一个假设，一个关于我们无法看到的世界的陈述。我们为支持它所做的侦探工作增强了我们的论证，但就像任何优秀的侦探一样，我们必须始终意识到我们不知道什么，并对我们结论的确定性保持谦逊。这种在巧妙设计和批判性自我评估之间的不断互动，正是科学之旅的精髓所在。


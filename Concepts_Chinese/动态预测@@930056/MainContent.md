## 引言
从医学到金融，在众多领域中，我们常常依赖预测模型来预报未来结果。然而，传统模型通常是静态的，仅利用某一时间点的信息生成一个固定的预后。这种方法忽略了随着事态发展而持续涌现的新[数据流](@entry_id:748201)，造成了巨大的知识鸿沟，导致预测结果迅速过时。本文旨在通过引入动态预测这一范式来解决此局限性——这是一门构建能够实时学习与适应的模型的科学。我们将首先探讨其核心的“原理与机制”，审视为何预测必须更新，并详细阐述地标模型法和联合模型法的统计学理念。随后，在“应用与跨学科联系”一章中，我们将揭示这些概念如何为不同领域带来革命性变化，从工程学中创建[数字孪生](@entry_id:171650)到医学中提供拯救生命的预报。

## 原理与机制

想象一下，你是一位神经重症监护室的医生。两位患者，我们称之为 Alex 和 Ben，因严重创伤性脑损伤入院。他们所有的初始信息都完全相同：年龄相同，Glasgow 昏迷量表评分相同，CT 扫描结果也相同。一个传统的**静态预测模型**，仅使用这些入院时的数据，会给予他们完全相同的预后——比如说，不良结局的概率为 40%。利用单时间点的快照信息，这是我们所能做到的极限 [@problem_id:4841101]。

但医学并非一张快照，而是一部电影。你对他们进行逐小时的监护。在最初的六个小时里，你注意到了一些有趣的变化。Alex 的颅内压（ICP），即颅骨内的压力，一度飙升至危险的 $30\,\mathrm{mmHg}$ 并持续了三小时，之后才被降至平稳的 $15\,\mathrm{mmHg}$ 并维持了接下来的三小时。而 Ben 的颅内压则在整个六小时内持续稳定在较高的 $22.5\,\mathrm{mmHg}$。值得注意的是，如果你计算这两位患者在此期间的平均颅内压，结果是完全相同的：$22.5\,\mathrm{mmHg}$。

一个依赖简单平均值的模型仍然会将这两位患者视为相同。但作为一名临床医生，你的直觉强烈地告诉你，他们的路径正在分化。Alex 承受了一段极端的、高强度的压力，而 Ben 则经历了一场持续的、低强度的侵袭。哪种情况更糟？这不仅仅是一个学术问题。大脑是一个脆弱的器官，初始创伤后的二次损伤正是由这些生理损害驱动的。重要的不仅仅是压力的*水平*，还有其**强度和持续时间**。真正的损伤是由“生理负荷”总量——或许可以计算为超过临界阈值的累计压力-时间剂量——所造成的。为了捕捉这一点，我们需要一个模型，它不仅是拍一张照片，而是观看整部电影，随着情节的展开而更新其理解。这便是**动态预测**的精髓 [@problem_id:4532150]。

### 幸存者的秘密：为何未来已非昔日模样

动态预测的需求不仅根植于生理学，它本身也是概率论的一个基本原则。让我们从重症监护室转到肿瘤科诊所。一位患者被诊断出患有特定分期的癌症，并被告知其五年生存率为 60%。这个数字是静态预后的基石，由成千上万名过往患者的数据平均计算得出。然而，这个群体内部具有极高的多样性。它既包括那些肿瘤侵袭性强、迅速被疾病夺去生命的个体，也包括那些肿瘤发展缓慢、对治疗反应良好并能存活多年的个体。60% 这个数字仅仅是这个庞大且异质的群体混合结果的体现。

现在，想象一下你在该患者确诊两年后再次见到他。他活了下来。这并非无足轻重的信息，而是一个强有力的新数据点。他幸存这一事实本身就告诉了你一些深刻的东西。他成功度过了风险最高的时期，而在此期间，不幸的是，许多与他同病相怜但病情最具侵袭性的患者未能幸存。在两年这个时间点仍然存活的患者群体，已经不再是确诊时的那个群体了。它被筛选过了。一种**选择效应**已经发生，使得幸存者群体中富集了那些因肿瘤生物学特性或治疗反应而预后更有利的个体。

因此，他们未来三年生存的概率，不再基于最初 60% 的五年生存率。我们必须提出一个新的、有条件的问题：给定一个人已经存活到时间 $s$，他存活到时间 $s+t$ 的概率是多少？在数学上，我们正从计算简单的生存概率 $S(t) = \Pr(T > t)$，转向计算**条件生存概率** $\Pr(T > s+t \mid T > s)$。这个更新后的概率正确地考虑了“已经存活”这一好消息，是动态预后分析的核心。它认识到，对于一个幸存者而言，未来已非昔日模样 [@problem_id:4437819]。

### 窥探未来：两种哲学

我们已经明确了*为何*需要更新预测。但我们究竟*如何*做到这一点，尤其是在面对如每日实验结果或连续生理监测等新数据流时？在统计学界，已出现了两种主要的哲学或策略来应对这一挑战。我们可以将其看作是“实用主义者的地标模型”与“纯粹主义者的联合模型”。[@problem_id:4613163] [@problem_id:5219212]

### 实用主义者的地标模型：时间快照

**地标模型法**（landmarking）直观、强大，且正如其名，非常实用。想象你正在进行一次长途公路旅行。你不会只依赖出发时给出的预计到达时间（ETA）。你可能会决定在特定的“地标”——比如每次停下来加油时——查看你的 GPS。在每一站，GPS 都会重新评估你的位置、前方的交通状况以及你到目前为止的速度，然后给你一个新的、更新后的 ETA。

地标模型法为患者做的正是这件事。我们预先指定一些具有临床意义的时间点，称为**地标**（例如，诊断后 24 小时、7 天、1 个月）。在每个地标时间 $s$，我们做两件事：
1. 我们收集那些仍在“旅途上”的患者群体——即那些仍然存活且仍在研究中的患者。这被称为在时间 $s$ 的**风险集**（risk set）。
2. 针对这个特定群体，我们建立一个全新的预测模型。该模型利用他们迄今为止的旅程信息——他们截至时间 $s$ 的生物标志物和事件的全部历史，记为 $\mathcal{H}_i(s)$——来预测他们在下一个时间窗口内（比如说从 $s$ 到 $s+w$）发生事件的风险。

至关重要的是，历史信息 $\mathcal{H}_i(s)$ 通常被总结为几个有力的特征，例如我们创伤性脑损伤例子中的累计 ICP 负荷，或者癌症生物标志物的最新值和斜率。然后，模型预测条件概率 $P(T_i \le s+w \mid T_i \ge s, \mathcal{H}_i(s))$。这是一系列随时间串联起来的、更新后的静态预测。该方法计算效率高且概念清晰，使其成为动态预测中广泛使用的工具 [@problem_id:4613163] [@problem_id:5219212]。

### 纯粹主义者的联合模型：拥抱完整故事

第二种哲学，即**联合模型法**（joint modeling），更具雄心且更为全面。它不是进行周期性的快照，而是试图理解每位患者旅程的整个潜在故事。把它想象成一位 NASA 工程师在追踪飞往火星的探测器。工程师不仅使用最后已知的位置，他们利用探测器位置的*全部历史*来为其潜在的轨道轨迹建模，同时考虑了[引力](@entry_id:189550)和引擎燃烧的影响。然后他们可以高[置信度](@entry_id:267904)地将此轨迹投射到未来。

联合模型为患者做了类似的事情。它假设我们采集到的那些带有噪声的、[间歇性](@entry_id:275330)的生物标志物测量值（如血液检测）仅仅是一个平滑、连续的潜在生物过程——患者真实的**潜在轨迹**——的反映。联合模型实际上是两个协同工作的模型：
1. 一个**纵向[子模](@entry_id:148922)型**（longitudinal submodel），描述每个个体潜在轨迹随时间变化的形状。例如，它能学习到“这位患者的肿瘤标志物正在呈指数级上升”。
2. 一个**生存子模型**（survival submodel），将发生事件（如死亡或疾病进展）的风险直接与*潜在轨迹的当前值*联系起来。

连接这两个模型并实现个性化预测的“魔法”是一组**共享随机效应**（shared random effects）——这是一小组唯一地刻画每位患者隐藏轨迹的数字（例如，他们的基线水平和变化率）。当一个新的生物标志物测量值到来时，模型运用**[贝叶斯定理](@entry_id:151040)**的优雅逻辑来更新其对这些隐藏特征的信念。它会说：“鉴于这个新的数据点，我现在对这位患者的潜在轨迹有何新的认识？”这个更新后的信念会立即转化为一个更新的风险预测。这是一个真正的、持续学习的系统，它考虑到了我们的测量是有噪声的，以及风险与真实的、未被观测到的疾病过程相关联的事实 [@problem_id:5034706] [@problem_id:5219212]。

### 一个微妙而关键的区别

乍一看，这两种方法似乎在做同样的事情。两者都使用过去的数据来更新未来的预测。但它们在处理不确定性的方式上存在一个微妙而优美的差异。

地标模型法本质上是一种“代入”法。它通常计算生物标志物*最可能*的未来路径，并将这单一路径代入风险方程。相比之下，联合模型拥抱不确定性。因为它拥有患者轨迹的完整[概率模型](@entry_id:265150)，它不仅考虑最可能的未来路径，而是考虑*所有合理的未来路径*，并根据其可能性进行加权。然后，它计算每条路径的风险，并将它们平均起来，得到最终的预测。

这为什么重要？因为我们世界的一个基本属性，可以被一个名为[詹森不等式](@entry_id:144269)（Jensen's inequality）的数学规则巧妙地捕捉到。在许多情况下，尤其是在生物学中，风险并非线性的。变量的一个小变化可能导致风险的巨大变化。在这种情况下，所有可能未来的风险平均值，与平均（最可能）未来的风险，并不相同。通过忽略未来轨迹周围的不确定性，“代入”法有时可能会过于自信。而联合模型通过对这种不确定性进行积分，通常更为稳健和准确。

最终，这两大学派的预测只有在一些微不足道的情况下才会变得相同：即当未来路径没有任何不确定性时（例如，一个以完美精度测量的生物标志物），或者当生物标志物对风险根本没有影响时。在所有其他情况下，它们代表了两种不同的、强大的思考不确定未来的方式——实用主义者的重点更新与纯粹主义者对完整故事的整体整合 [@problem_id:4940047]。两者都超越了静态快照，是巨大的飞跃，使我们能够构建出像它们旨在帮助的患者一样，能够学习、适应和演进的预测。


{"hands_on_practices": [{"introduction": "A core challenge in bilevel optimization arises when the follower has multiple optimal choices, creating uncertainty for the leader. This first exercise [@problem_id:3102843] delves into this foundational concept by asking you to analyze the two main ways of handling this ambiguity: the optimistic and pessimistic formulations. By calculating the best- and worst-case outcomes for the leader, you will quantify the \"inducibility gap\" and gain a deeper appreciation for the subtleties that make bilevel problems unique.", "problem": "Consider a bilevel optimization problem with an upper-level decision variable $x \\in [0,2]$ and a lower-level decision vector $y = (y_{1}, y_{2}) \\in \\mathbb{R}^{2}$. The upper-level objective is to minimize the real-valued function $F(x,y) = (x - 1)^{2} + y_{1} - y_{2}$. The lower-level problem, parameterized by the upper-level decision $x$, is a Linear Programming (LP) problem defined as follows: minimize $y_{1} + y_{2}$ subject to $y_{1} + y_{2} = x$, $0 \\leq y_{1} \\leq 1$, and $0 \\leq y_{2} \\leq 1$. Definitions: In the optimistic bilevel convention, the lower level can select any of its optimal solutions so as to minimize the upper-level objective. In the pessimistic bilevel convention, the lower level can select any of its optimal solutions so as to maximize the upper-level objective. Starting from standard definitions of bilevel optimization and properties of linear programming solutions, determine the optimistic upper-level optimal objective value $F_{\\text{opt}}^{\\star}$ and the pessimistic upper-level optimal objective value $F_{\\text{pess}}^{\\star}$, and then compute the numerical gap $G = F_{\\text{pess}}^{\\star} - F_{\\text{opt}}^{\\star}$. Express the final answer for $G$ as an exact value (no rounding).", "solution": "This is a standard bilevel optimization problem with linear lower-level constraints. The domain of the upper-level variable $x \\in [0,2]$ ensures the feasibility of the lower-level problem. The problem is well-posed and all terms are well-defined, allowing a direct analytical solution.\n\nThe bilevel problem is given by:\nUpper Level:\n$$ \\min_{x, y} F(x, y) = (x - 1)^{2} + y_{1} - y_{2} $$\nsubject to $x \\in [0, 2]$ and $y$ being an optimal solution to the lower-level problem.\n\nLower Level (for a fixed $x$):\n$$ \\min_{y_1, y_2} f(y_1, y_2) = y_{1} + y_{2} $$\nsubject to:\n$$ y_{1} + y_{2} = x $$\n$$ 0 \\leq y_{1} \\leq 1 $$\n$$ 0 \\leq y_{2} \\leq 1 $$\n\nFirst, we analyze the lower-level problem (LLP). For any feasible point $(y_1, y_2)$, the constraint $y_1 + y_2 = x$ dictates that the lower-level objective function $f(y_1, y_2)$ is always equal to $x$. This means that any point $(y_1, y_2)$ that is feasible for the LLP is also an optimal solution to the LLP.\n\nLet $S(x)$ denote the set of optimal solutions to the LLP for a given $x$. This set is identical to the feasible set of the LLP. We can characterize $S(x)$ by expressing the constraints in terms of $y_1$ alone. From $y_1 + y_2 = x$, we have $y_2 = x - y_1$. The box constraints $0 \\leq y_1 \\leq 1$ and $0 \\leq y_2 \\leq 1$ become:\n$1.$ $0 \\leq y_1 \\leq 1$\n$2.$ $0 \\leq x - y_1 \\leq 1 \\implies x - 1 \\leq y_1 \\leq x$\n\nCombining these gives the range for $y_1$:\n$$ \\max(0, x - 1) \\leq y_1 \\leq \\min(1, x) $$\nThe set of optimal lower-level solutions is therefore:\n$$ S(x) = \\{ (y_1, y_2) \\in \\mathbb{R}^2 \\mid y_2 = x - y_1, \\text{ and } \\max(0, x-1) \\leq y_1 \\leq \\min(1, x) \\} $$\nThe domain $x \\in [0, 2]$ ensures this interval for $y_1$ is non-empty. For $x=0$, $y_1=0$, and for $x=2$, $y_1=1$.\n\nThe upper-level objective is $F(x, y) = (x - 1)^{2} + y_{1} - y_{2}$. Substituting $y_2 = x - y_1$, we get:\n$$ F(x, y_1) = (x - 1)^{2} + y_{1} - (x - y_{1}) = (x - 1)^{2} + 2y_{1} - x $$\nThe bilevel problem can now be rewritten by replacing the LLP with the choice of $y_1$ from its feasible range.\n\n**Optimistic Case**\nIn the optimistic convention, for each $x$, the lower level chooses a solution $y \\in S(x)$ that minimizes the upper-level objective $F(x,y)$. The upper-level problem is:\n$$ F_{\\text{opt}}^{\\star} = \\min_{x \\in [0, 2]} \\left( \\min_{y \\in S(x)} F(x, y) \\right) $$\nThe inner minimization is:\n$$ \\min_{y \\in S(x)} F(x, y) = \\min_{y_1} \\left( (x - 1)^{2} + 2y_{1} - x \\right) \\quad \\text{s.t. } y_1 \\in [\\max(0, x-1), \\min(1, x)] $$\nTo minimize this expression with respect to $y_1$, we must choose the smallest possible value of $y_1$, which is $y_1 = \\max(0, x-1)$.\nLet $F_{\\text{opt}}(x)$ be the resulting upper-level objective function:\n$$ F_{\\text{opt}}(x) = (x - 1)^{2} + 2\\max(0, x-1) - x $$\nWe minimize $F_{\\text{opt}}(x)$ over $x \\in [0, 2]$ by cases:\nCase 1: $x \\in [0, 1]$. Here, $x-1 \\leq 0$, so $\\max(0, x-1) = 0$.\n$$ F_{\\text{opt}}(x) = (x - 1)^{2} - x = x^2 - 2x + 1 - x = x^2 - 3x + 1 $$\nThe derivative is $F'_{\\text{opt}}(x) = 2x - 3$. The vertex of this parabola is at $x=3/2$, which is outside $[0, 1]$. Since the parabola opens upward, the minimum on $[0, 1]$ occurs at an endpoint.\n$F_{\\text{opt}}(0) = 1$.\n$F_{\\text{opt}}(1) = 1^2 - 3(1) + 1 = -1$.\nThe minimum over $[0, 1]$ is $-1$.\n\nCase 2: $x \\in (1, 2]$. Here, $x-1 > 0$, so $\\max(0, x-1) = x-1$.\n$$ F_{\\text{opt}}(x) = (x - 1)^{2} + 2(x - 1) - x = x^2 - 2x + 1 + 2x - 2 - x = x^2 - x - 1 $$\nThe derivative is $F'_{\\text{opt}}(x) = 2x - 1$. The vertex is at $x=1/2$, which is outside $(1, 2]$. Since the parabola opens upward, the minimum over $(1, 2]$ is at endpoint $x \\to 1^+$ or $x=2$.\n$\\lim_{x \\to 1^+} F_{\\text{opt}}(x) = 1^2 - 1 - 1 = -1$.\n$F_{\\text{opt}}(2) = 2^2 - 2 - 1 = 1$.\nThe minimum over $(1, 2]$ is $-1$.\n\nCombining both cases, the global minimum of $F_{\\text{opt}}(x)$ on $[0, 2]$ is $-1$, occurring at $x=1$. Thus, $F_{\\text{opt}}^{\\star} = -1$.\n\n**Pessimistic Case**\nIn the pessimistic convention, for each $x$, the lower level chooses a solution $y \\in S(x)$ that maximizes the upper-level objective $F(x,y)$. The upper-level problem is:\n$$ F_{\\text{pess}}^{\\star} = \\min_{x \\in [0, 2]} \\left( \\max_{y \\in S(x)} F(x, y) \\right) $$\nThe inner maximization is:\n$$ \\max_{y \\in S(x)} F(x, y) = \\max_{y_1} \\left( (x - 1)^{2} + 2y_{1} - x \\right) \\quad \\text{s.t. } y_1 \\in [\\max(0, x-1), \\min(1, x)] $$\nTo maximize this expression with respect to $y_1$, we must choose the largest possible value of $y_1$, which is $y_1 = \\min(1, x)$.\nLet $F_{\\text{pess}}(x)$ be the resulting upper-level objective function:\n$$ F_{\\text{pess}}(x) = (x - 1)^{2} + 2\\min(1, x) - x $$\nWe minimize $F_{\\text{pess}}(x)$ over $x \\in [0, 2]$ by cases:\nCase 1: $x \\in [0, 1]$. Here, $\\min(1, x) = x$.\n$$ F_{\\text{pess}}(x) = (x - 1)^{2} + 2x - x = x^2 - 2x + 1 + x = x^2 - x + 1 $$\nThe derivative is $F'_{\\text{pess}}(x) = 2x - 1$. The vertex is at $x=1/2$, which is in $[0, 1]$.\nThe minimum value is $F_{\\text{pess}}(1/2) = (1/2)^2 - 1/2 + 1 = 1/4 - 1/2 + 1 = 3/4$.\n\nCase 2: $x \\in (1, 2]$. Here, $\\min(1, x) = 1$.\n$$ F_{\\text{pess}}(x) = (x - 1)^{2} + 2(1) - x = x^2 - 2x + 1 + 2 - x = x^2 - 3x + 3 $$\nThe derivative is $F'_{\\text{pess}}(x) = 2x - 3$. The vertex is at $x=3/2$, which is in $(1, 2]$.\nThe minimum value is $F_{\\text{pess}}(3/2) = (3/2)^2 - 3(3/2) + 3 = 9/4 - 9/2 + 3 = 9/4 - 18/4 + 12/4 = 3/4$.\n\nCombining both cases, the global minimum of $F_{\\text{pess}}(x)$ on $[0, 2]$ is $3/4$. Thus, $F_{\\text{pess}}^{\\star} = 3/4$.\n\n**Compute the Gap**\nThe numerical gap $G$ is the difference between the pessimistic and optimistic optimal objective values:\n$$ G = F_{\\text{pess}}^{\\star} - F_{\\text{opt}}^{\\star} $$\n$$ G = \\frac{3}{4} - (-1) = \\frac{3}{4} + 1 = \\frac{7}{4} $$\nThe final answer is $7/4$.\n_", "answer": "$$ \\boxed{\\frac{7}{4}} $$", "id": "3102843"}, {"introduction": "Moving from abstract theory to a tangible application, this problem [@problem_id:3102902] situates you as a traffic authority (the leader) setting tolls to influence drivers' (the followers') route choices. The objective is to see how the leader can strategically use pricing to steer the system away from a self-interested \"user equilibrium\" toward a socially optimal state that minimizes total congestion. This exercise demonstrates the power of bilevel optimization as a tool for mechanism design and public policy.", "problem": "Consider a single-origin single-destination traffic network with two parallel links labeled $e \\in \\{1,2\\}$. A fixed demand of $Q=10$ vehicles per unit time must travel from the origin to the destination. Link $e$ carries flow $y_e \\geq 0$ so that $y_1 + y_2 = Q$. The travel time (cost) on link $e$ is given by $c_e(y_e)$, and the planner sets a nonnegative toll $t_e$ on link $e$.\n\nThe lower-level behavior follows Wardrop's first principle of User Equilibrium (UE): among links that carry positive flow, the generalized cost $c_e(y_e) + t_e$ is equal; any unused link has generalized cost not less than that common value. Specifically, the UE flows $y^{*}(t)$ induced by tolls $t=(t_1,t_2)$ satisfy $y_e^{*}(t) \\geq 0$, $y_1^{*}(t)+y_2^{*}(t)=Q$, and, for any $e$ with $y_e^{*}(t)>0$, the generalized cost $c_e(y_e^{*}(t))+t_e$ is equal across such links.\n\nThe upper-level planner chooses $t$ to minimize the total travel cost\n$$\nF(t,y^{*}(t)) = \\sum_{e=1}^{2} y_e^{*}(t)\\,c_e(y_e^{*}(t)).\n$$\n\nSuppose the link cost functions are\n$$\nc_1(y_1) = 10 + y_1, \\qquad c_2(y_2) = 14 + \\frac{1}{2}\\,y_2.\n$$\nAssuming the planner can set tolls $t_1$ and $t_2$, determine the optimal tolls $(t_1^{*},t_2^{*})$ that minimize $F(t,y^{*}(t))$ subject to UE behavior. Provide your final result as exact rational numbers; no rounding is required.", "solution": "This problem is a classic bilevel optimization problem from transportation science, also known as a Stackelberg game or network pricing problem. The leader (planner) sets tolls $(t_1, t_2)$, and the followers (users) react by choosing their routes to establish a User Equilibrium (UE). The planner anticipates this reaction and sets tolls to achieve their own objective: minimizing the total system travel cost. The link cost functions are continuous and strictly increasing, which guarantees a unique User Equilibrium flow for any given set of tolls, and the planner's objective function is also well-defined.\n\nThe optimal strategy for the planner is to set tolls that incentivize the users to collectively produce a flow pattern identical to the System Optimum (SO). The SO flow pattern is the one that minimizes the total travel cost, irrespective of how users might behave without intervention. We proceed by first finding the SO flow, and then determining the tolls required to induce it.\n\n**1. Determine the System Optimal (SO) Flow**\n\nThe SO flow $(y_1^{SO}, y_2^{SO})$ is the flow distribution that minimizes the total system travel cost $F$. The function $F$ is given by:\n$$\nF(y_1, y_2) = y_1 c_1(y_1) + y_2 c_2(y_2) = y_1(10+y_1) + y_2\\left(14+\\frac{1}{2}y_2\\right)\n$$\nUsing the flow conservation constraint $y_2 = 10 - y_1$, we can express $F$ as a function of $y_1$ alone, for $y_1 \\in [0, 10]$:\n$$\nF(y_1) = y_1(10+y_1) + (10-y_1)\\left(14+\\frac{1}{2}(10-y_1)\\right)\n$$\n$$\nF(y_1) = 10y_1 + y_1^2 + (10-y_1)\\left(14+5-\\frac{1}{2}y_1\\right)\n$$\n$$\nF(y_1) = 10y_1 + y_1^2 + (10-y_1)\\left(19-\\frac{1}{2}y_1\\right)\n$$\n$$\nF(y_1) = 10y_1 + y_1^2 + 190 - 5y_1 - 19y_1 + \\frac{1}{2}y_1^2\n$$\n$$\nF(y_1) = \\frac{3}{2}y_1^2 - 14y_1 + 190\n$$\nTo find the minimum of this quadratic function, we take the derivative with respect to $y_1$ and set it to zero:\n$$\n\\frac{dF}{dy_1} = 3y_1 - 14\n$$\nSetting $\\frac{dF}{dy_1} = 0$ gives the optimal flow on link $1$:\n$$\n3y_1^{SO} - 14 = 0 \\implies y_1^{SO} = \\frac{14}{3}\n$$\nThe second derivative $\\frac{d^2F}{dy_1^2} = 3 > 0$, confirming this is a minimum.\nSince $0 < \\frac{14}{3} < 10$, this is a valid interior solution.\nThe corresponding flow on link $2$ is:\n$$\ny_2^{SO} = 10 - y_1^{SO} = 10 - \\frac{14}{3} = \\frac{30-14}{3} = \\frac{16}{3}\n$$\nSo, the System Optimal flow is $(y_1^{SO}, y_2^{SO}) = \\left(\\frac{14}{3}, \\frac{16}{3}\\right)$.\n\n**2. Determine the Optimal Tolls**\n\nThe planner must set tolls $(t_1^*, t_2^*)$ such that the resulting UE flow is identical to the SO flow. For the flow to be $(y_1, y_2) = (\\frac{14}{3}, \\frac{16}{3})$, which is an interior solution (both flows are positive), the UE condition requires that the generalized costs on both links be equal:\n$$\nc_1(y_1^{SO}) + t_1^* = c_2(y_2^{SO}) + t_2^*\n$$\nThe canonical method for setting such tolls is based on the principle of marginal cost pricing. The optimal toll on a link should be equal to the marginal external congestion cost, which is the difference between the marginal social cost ($MSC$) and the private cost ($c_e$) at the SO flow.\nThe total cost on link $e$ is $TC_e(y_e) = y_e c_e(y_e)$. The marginal social cost is $MSC_e(y_e) = \\frac{d}{dy_e}TC_e(y_e)$. The optimal toll is $t_e^* = MSC_e(y_e^{SO}) - c_e(y_e^{SO})$.\n\nUsing the product rule, $MSC_e(y_e) = c_e(y_e) + y_e c_e'(y_e)$. Thus, the toll is given by the simpler formula:\n$$\nt_e^* = y_e^{SO} c_e'(y_e^{SO})\n$$\nWe calculate the derivative of each cost function:\nFor link $1$: $c_1(y_1) = 10 + y_1 \\implies c_1'(y_1) = 1$.\nFor link $2$: $c_2(y_2) = 14 + \\frac{1}{2}y_2 \\implies c_2'(y_2) = \\frac{1}{2}$.\n\nNow we can compute the optimal tolls using the SO flows we found:\nFor link $1$:\n$$\nt_1^* = y_1^{SO} \\cdot c_1'(y_1^{SO}) = \\frac{14}{3} \\cdot 1 = \\frac{14}{3}\n$$\nFor link $2$:\n$$\nt_2^* = y_2^{SO} \\cdot c_2'(y_2^{SO}) = \\frac{16}{3} \\cdot \\frac{1}{2} = \\frac{8}{3}\n$$\nBoth tolls are non-negative, satisfying the problem constraint.\n\nTherefore, the optimal tolls that induce the System Optimum flow are $(t_1^*, t_2^*) = \\left(\\frac{14}{3}, \\frac{8}{3}\\right)$.\n\nLet's verify that these tolls indeed lead to the SO flows as a User Equilibrium. The generalized costs must be equal:\n$$\ng_1 = c_1(y_1^{SO}) + t_1^* = \\left(10 + \\frac{14}{3}\\right) + \\frac{14}{3} = \\frac{30+14+14}{3} = \\frac{58}{3}\n$$\n$$\ng_2 = c_2(y_2^{SO}) + t_2^* = \\left(14 + \\frac{1}{2}\\frac{16}{3}\\right) + \\frac{8}{3} = \\left(14 + \\frac{8}{3}\\right) + \\frac{8}{3} = \\frac{42+8+8}{3} = \\frac{58}{3}\n$$\nSince $g_1 = g_2$, the flows are in equilibrium. This confirms our result.", "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{14}{3} & \\frac{8}{3} \\end{pmatrix}}\n$$", "id": "3102902"}, {"introduction": "Directly solving bilevel optimization problems can be difficult, so they are often reformulated into more tractable single-level problems. This practice [@problem_id:3102923] introduces a powerful strategy known as the penalty method, where the follower's first-order optimality conditions are added to the leader's objective as a squared penalty term. By solving this approximate problem and comparing its solution to the exact bilevel optimum, you will gain practical insight into the effectiveness and potential approximation errors of this widely used technique.", "problem": "Consider the bilevel optimization problem where the upper-level decision variable is $x \\in \\mathbb{R}$ and the lower-level decision variable is $y \\in \\mathbb{R}$. The upper-level objective is $F(x,y) = (x - 1)^{2} + (y - 2)^{2}$. The lower-level problem, parameterized by $x$, is to minimize the strongly convex function $g(y; x) = (y - x)^{2} + y$ with respect to $y$ over $\\mathbb{R}$. The lower-level first-order Karush–Kuhn–Tucker (KKT) stationarity condition (which, for an unconstrained problem, reduces to the condition that the gradient with respect to $y$ vanishes at the minimizer) is given by $\\partial g/\\partial y = 2(y - x) + 1 = 0$.\n\nTasks:\n1. Using only the fundamental definition of a bilevel problem and the first-order optimality condition for unconstrained convex minimization, eliminate the lower level by characterizing the lower-level solution $y^{\\star}(x)$ as a function of $x$, and then solve for the exact bilevel optimizer $(x^{\\star}, y^{\\star})$ and the corresponding optimal upper-level value $F^{\\star} = F(x^{\\star}, y^{\\star})$.\n2. Now consider a single-level penalty formulation in which the upper-level objective penalizes violation of the lower-level KKT residual. Define the KKT residual as $r(x,y) = \\partial g/\\partial y = 2(y - x) + 1$. For a given penalty parameter $\\rho = 1$, solve the penalized problem\n$$\n\\min_{x \\in \\mathbb{R},\\, y \\in \\mathbb{R}} \\;\\; \\Phi_{\\rho}(x,y) \\equiv F(x,y) + \\rho \\, r(x,y)^{2}.\n$$\nCompute the minimizer $(x_{\\rho}, y_{\\rho})$ and evaluate the upper-level objective $F(x_{\\rho}, y_{\\rho})$ at this penalized solution.\n\nFinally, compute the scalar difference \n$\\Delta \\equiv F(x_{\\rho}, y_{\\rho}) - F^{\\star}$,\nand report $\\Delta$ as a single exact value. No rounding is required and no units are involved.", "solution": "This is a well-defined problem in bilevel optimization. The lower-level problem is an unconstrained minimization of a strongly convex function, which guarantees a unique solution. This allows for a direct application of the substitution method to find the exact solution, which can then be compared to the approximate solution from the penalty method.\n\nThe solution proceeds in two parts as requested by the problem statement.\n\nFirst, we solve the bilevel problem. The bilevel optimization problem is given by:\n$$ \\min_{x \\in \\mathbb{R}, y \\in \\mathbb{R}} F(x,y) = (x - 1)^{2} + (y - 2)^{2} $$\n$$ \\text{subject to } y \\in \\arg\\min_{z \\in \\mathbb{R}} g(z; x) = (z - x)^{2} + z $$\nThe lower-level problem is unconstrained and its objective function $g(z; x)$ is strictly convex with respect to $z$ (since $\\frac{\\partial^2 g}{\\partial z^2} = 2 > 0$). Therefore, the unique minimizer $y^{\\star}(x)$ is found by setting the first derivative with respect to the lower-level variable to zero. The problem provides this first-order optimality condition:\n$$ \\frac{\\partial g}{\\partial y} = 2(y - x) + 1 = 0 $$\nSolving for $y$ as a function of $x$ gives the lower-level optimal response, or rational reaction function, $y^{\\star}(x)$:\n$$ 2(y - x) = -1 \\implies y - x = -\\frac{1}{2} \\implies y^{\\star}(x) = x - \\frac{1}{2} $$\nTo solve the upper-level problem, we substitute this expression for $y$ into the upper-level objective function $F(x,y)$, reducing the problem to a single-level optimization problem in terms of $x$ only:\n$$ \\hat{F}(x) = F(x, y^{\\star}(x)) = (x - 1)^{2} + \\left( \\left(x - \\frac{1}{2}\\right) - 2 \\right)^{2} = (x - 1)^{2} + \\left(x - \\frac{5}{2}\\right)^{2} $$\nTo find the optimal value $x^{\\star}$, we minimize $\\hat{F}(x)$ by finding its stationary point. We compute the derivative with respect to $x$ and set it to zero:\n$$ \\frac{d\\hat{F}}{dx} = \\frac{d}{dx} \\left[ (x - 1)^{2} + \\left(x - \\frac{5}{2}\\right)^{2} \\right] = 2(x - 1) + 2\\left(x - \\frac{5}{2}\\right) = 2x - 2 + 2x - 5 = 4x - 7 $$\nSetting the derivative to zero yields:\n$$ 4x - 7 = 0 \\implies x^{\\star} = \\frac{7}{4} $$\nThe second derivative is $\\frac{d^2\\hat{F}}{dx^2} = 4 > 0$, which confirms that $x^{\\star}$ is a minimizer. Now we find the corresponding optimal lower-level variable $y^{\\star}$:\n$$ y^{\\star} = y^{\\star}(x^{\\star}) = \\frac{7}{4} - \\frac{1}{2} = \\frac{7}{4} - \\frac{2}{4} = \\frac{5}{4} $$\nThe bilevel optimizer is $(x^{\\star}, y^{\\star}) = \\left(\\frac{7}{4}, \\frac{5}{4}\\right)$. The corresponding optimal upper-level value is $F^{\\star}$:\n$$ F^{\\star} = F(x^{\\star}, y^{\\star}) = \\left(\\frac{7}{4} - 1\\right)^{2} + \\left(\\frac{5}{4} - 2\\right)^{2} = \\left(\\frac{3}{4}\\right)^{2} + \\left(-\\frac{3}{4}\\right)^{2} = \\frac{9}{16} + \\frac{9}{16} = \\frac{18}{16} = \\frac{9}{8} $$\n\nSecond, we solve the single-level penalized problem. The penalized objective function $\\Phi_{\\rho}(x,y)$ with penalty parameter $\\rho = 1$ is:\n$$ \\Phi_{1}(x,y) = F(x,y) + 1 \\cdot r(x,y)^{2} = (x - 1)^{2} + (y - 2)^{2} + (2(y - x) + 1)^{2} $$\nWe minimize this function with respect to both $x$ and $y$. We find the stationary point by setting the gradient of $\\Phi_{1}(x,y)$ to zero. The partial derivatives are:\n$$ \\frac{\\partial \\Phi_{1}}{\\partial x} = \\frac{\\partial}{\\partial x} \\left[ (x - 1)^{2} + (y - 2)^{2} + (2y - 2x + 1)^{2} \\right] = 2(x - 1) + 2(2y - 2x + 1)(-2) = 2x - 2 - 8y + 8x - 4 = 10x - 8y - 6 $$\n$$ \\frac{\\partial \\Phi_{1}}{\\partial y} = \\frac{\\partial}{\\partial y} \\left[ (x - 1)^{2} + (y - 2)^{2} + (2y - 2x + 1)^{2} \\right] = 2(y - 2) + 2(2y - 2x + 1)(2) = 2y - 4 + 8y - 8x + 4 = 10y - 8x $$\nSetting the partial derivatives to zero gives a system of linear equations for the minimizer $(x_{\\rho}, y_{\\rho})$:\n1. $10x - 8y - 6 = 0 \\implies 5x - 4y = 3$\n2. $10y - 8x = 0 \\implies 10y = 8x \\implies y = \\frac{4}{5}x$\nSubstitute the expression for $y$ from the second equation into the first:\n$$ 5x - 4\\left(\\frac{4}{5}x\\right) = 3 \\implies 5x - \\frac{16}{5}x = 3 \\implies \\frac{25x - 16x}{5} = 3 \\implies \\frac{9}{5}x = 3 $$\nSolving for $x$, we find the penalized solution $x_{\\rho}$:\n$$ x_{\\rho} = 3 \\cdot \\frac{5}{9} = \\frac{15}{9} = \\frac{5}{3} $$\nNow we find the corresponding $y_{\\rho}$:\n$$ y_{\\rho} = \\frac{4}{5} x_{\\rho} = \\frac{4}{5} \\cdot \\frac{5}{3} = \\frac{4}{3} $$\nThe minimizer of the penalized problem is $(x_{\\rho}, y_{\\rho}) = \\left(\\frac{5}{3}, \\frac{4}{3}\\right)$. Next, we evaluate the upper-level objective $F(x,y)$ at this point:\n$$ F(x_{\\rho}, y_{\\rho}) = \\left(\\frac{5}{3} - 1\\right)^{2} + \\left(\\frac{4}{3} - 2\\right)^{2} = \\left(\\frac{2}{3}\\right)^{2} + \\left(-\\frac{2}{3}\\right)^{2} = \\frac{4}{9} + \\frac{4}{9} = \\frac{8}{9} $$\n\nFinally, we compute the required scalar difference $\\Delta$:\n$$ \\Delta = F(x_{\\rho}, y_{\\rho}) - F^{\\star} = \\frac{8}{9} - \\frac{9}{8} $$\nTo compute this, we find a common denominator, which is $72$:\n$$ \\Delta = \\frac{8 \\cdot 8}{9 \\cdot 8} - \\frac{9 \\cdot 9}{8 \\cdot 9} = \\frac{64 - 81}{72} = -\\frac{17}{72} $$\nThe difference is an exact rational number.", "answer": "$$\\boxed{-\\frac{17}{72}}$$", "id": "3102923"}]}
{"hands_on_practices": [{"introduction": "This first practice exercise grounds the abstract definition of total unimodularity in a concrete calculation. You will examine a small constraint matrix from a hypothetical modeling scenario and certify that it is *not* totally unimodular by finding a submatrix whose determinant violates the required $\\{-1, 0, 1\\}$ property. This task sharpens your understanding of the definition and builds intuition for how certain modeling choices, like mixing flow-balance and packing constraints, can break this important structural property.", "problem": "A binary path-selection model on a tiny directed graph is constructed as follows. Consider two nodes labeled $1$ and $2$. The modeling uses two binary decision variables $x_{12}$ and $x_{21}$, where $x_{12}$ indicates selecting the arc from node $1$ to node $2$ and $x_{21}$ indicates selecting the arc from node $2$ to node $1$. The model includes three linear constraints: two node balance constraints and one undirected edge linking constraint. Specifically, the constraints are\n$$\nx_{12} - x_{21} = 0,\\quad -x_{12} + x_{21} = 0,\\quad x_{12} + x_{21} = 1.\n$$\nThese constraints can be written in matrix form $A x = b$ with the $0,\\pm 1$ matrix\n$$\nA=\\begin{pmatrix}\n1 & -1 \\\\\n-1 & 1 \\\\\n1 & 1\n\\end{pmatrix}.\n$$\nTotal Unimodularity (TU) is defined as follows: a matrix $A$ is totally unimodular if the determinant of every square submatrix of $A$ is in the set $\\{-1, 0, 1\\}$. To certify that the matrix $A$ above is not totally unimodular, identify a $2\\times 2$ submatrix of $A$ whose determinant is equal to $2$ and compute its determinant. Then, interpret which modeling choice in the described formulation introduces the specific pattern of coefficients that creates this $2\\times 2$ minor.\n\nReport only the value of the determinant of your chosen submatrix as your final answer. No rounding is required, and no units are involved.", "solution": "The problem requires us to certify that a given matrix $A$ is not totally unimodular (TU) by identifying a $2 \\times 2$ submatrix with a determinant of $2$. We must then provide an interpretation of the modeling choice that leads to this non-unimodular structure.\n\nThe given constraint matrix is:\n$$\nA=\\begin{pmatrix}\n1 & -1 \\\\\n-1 & 1 \\\\\n1 & 1\n\\end{pmatrix}\n$$\nAccording to the definition provided, a matrix is totally unimodular if the determinant of every one of its square submatrices is an element of the set $\\{-1, 0, 1\\}$. To demonstrate that $A$ is not TU, we need to find a square submatrix whose determinant lies outside this set.\n\nThe matrix $A$ has dimensions $3 \\times 2$. The only non-trivial square submatrices are of size $2 \\times 2$. We can form $\\binom{3}{2} = 3$ such submatrices by selecting two out of the three rows. Let us compute the determinant for each of these.\n\n1.  The submatrix formed by selecting rows $1$ and $2$:\n    $$\n    A_{12} = \\begin{pmatrix} 1 & -1 \\\\ -1 & 1 \\end{pmatrix}\n    $$\n    Its determinant is $\\det(A_{12}) = (1)(1) - (-1)(-1) = 1 - 1 = 0$. This value is within the set $\\{-1, 0, 1\\}$.\n\n2.  The submatrix formed by selecting rows $1$ and $3$:\n    $$\n    A_{13} = \\begin{pmatrix} 1 & -1 \\\\ 1 & 1 \\end{pmatrix}\n    $$\n    Its determinant is $\\det(A_{13}) = (1)(1) - (-1)(1) = 1 + 1 = 2$. This value, $2$, is not in $\\{-1, 0, 1\\}$. This submatrix thus certifies that the matrix $A$ is not totally unimodular. This is the submatrix requested by the problem statement.\n\n3.  The submatrix formed by selecting rows $2$ and $3$:\n    $$\n    A_{23} = \\begin{pmatrix} -1 & 1 \\\\ 1 & 1 \\end{pmatrix}\n    $$\n    Its determinant is $\\det(A_{23}) = (-1)(1) - (1)(1) = -1 - 1 = -2$. This determinant also confirms that $A$ is not TU.\n\nAs per the problem's instruction, we select the submatrix formed by rows $1$ and $3$, which has a determinant of $2$.\n\nNext, we interpret the modeling choice responsible for this structure. The rows of matrix $A$ are the coefficient vectors of the three linear constraints:\n-   Row $1$, $[1, -1]$, arises from the first node balance constraint, $x_{12} - x_{21} = 0$.\n-   Row $2$, $[-1, 1]$, arises from the second node balance constraint, $-x_{12} + x_{21} = 0$.\n-   Row $3$, $[1, 1]$, arises from the \"undirected edge linking constraint\", $x_{12} + x_{21} = 1$.\n\nThe submatrix $\\begin{pmatrix} 1 & -1 \\\\ 1 & 1 \\end{pmatrix}$ is constructed from row $1$ and row $3$. Row $1$ represents a typical flow conservation structure, where coefficients are $+1$ and $-1$. Such structures, when isolated, often form TU matrices (specifically, network incidence matrices). Row $3$, however, represents a \"packing\" or \"cardinality\" constraint, where the coefficients are both $+1$.\n\nThe violation of total unimodularity is a direct consequence of combining these two distinct types of constraints. A well-known sufficient condition for a matrix to be TU requires that the rows of any submatrix can be partitioned into two sets such that the sum of entries in one set minus the sum of entries in the other differs by at most $1$ for any column. The submatrix $\\begin{pmatrix} 1 & -1 \\\\ 1 & 1 \\end{pmatrix}$ violates this condition. For its first column, $[1, 1]^T$, the sum of entries is $2$, which cannot be partitioned as required. The specific modeling choice that introduces this non-TU minor is the inclusion of the \"undirected edge linking constraint\" ($x_{12} + x_{21} = 1$) alongside a standard node-balance constraint ($x_{12} - x_{21} = 0$). This combination creates a submatrix with same-signed coefficients in one column ($1$ and $1$) and opposite-signed coefficients in another ($-1$ and $1$), a pattern that frequently breaks total unimodularity.\n\nThe value of the determinant of the chosen submatrix, as computed above, is $2$.", "answer": "$$\\boxed{2}$$", "id": "3192739"}, {"introduction": "Having seen how to disprove total unimodularity, we now explore one of the most important classes of matrices that *are* totally unimodular: the incidence matrices of bipartite graphs. Instead of brute-force checking, this exercise guides you to use combinatorial reasoning based on the graph's structure. By connecting matrix determinants to paths and cycles in the underlying graph, you will develop a deeper, more intuitive understanding of why this property holds and its connection to network structures.", "problem": "Consider the following $0$-$1$ matrix $A \\in \\mathbb{R}^{5 \\times 6}$, which you may interpret as the vertex-edge incidence matrix of a bipartite graph with bipartition $\\{u_{1},u_{2},u_{3}\\}$ and $\\{w_{1},w_{2}\\}$, where each column represents an edge between one $u$-vertex and one $w$-vertex:\n$$\nA \\;=\\;\n\\begin{pmatrix}\n1 & 0 & 0 & 1 & 0 & 0 \\\\\n0 & 1 & 0 & 0 & 1 & 0 \\\\\n0 & 0 & 1 & 0 & 0 & 1 \\\\\n1 & 1 & 1 & 0 & 0 & 0 \\\\\n0 & 0 & 0 & 1 & 1 & 1\n\\end{pmatrix}.\n$$\nThe goal is to reason from first principles and basic combinatorial structure. Begin from the formal definition of the determinant and use only elementary, well-tested facts about bipartite graphs (such as the absence of odd cycles and the interpretation of permutation products as selecting incidences) to argue about the values of all $3 \\times 3$ determinants of submatrices of $A$ without brute-force enumeration. In particular, exploit cycle-versus-path structure to decide when permutation contributions cancel or when a unique contribution remains.\n\nCompute the single number that is the maximum absolute value among all $3 \\times 3$ determinants of submatrices of $A$. Express your final answer as an integer. As a byproduct of your reasoning, briefly indicate how your argument aligns with certifying total unimodularity (TU), that is, the property that every square subdeterminant of $A$ lies in $\\{-1,0,1\\}$. No rounding is required, and no physical units are involved.", "solution": "To find the maximum absolute value of any $3 \\times 3$ subdeterminant, we will argue from first principles that the matrix $A$, being the incidence matrix of a bipartite graph, is totally unimodular (TU). This property means that the determinant of every square submatrix is in the set $\\{-1, 0, 1\\}$, which would imply that the maximum absolute value of any subdeterminant is at most 1. The proof proceeds by induction on the size of the square submatrix, $k \\times k$.\n\n**Base Case ($k=1$):**\nA $1 \\times 1$ submatrix is just a single entry of $A$. Since all entries are either $0$ or $1$, the determinant is in $\\{0, 1\\}$, which is a subset of $\\{-1, 0, 1\\}$.\n\n**Inductive Step:**\nAssume that for any $(k-1) \\times (k-1)$ submatrix $M'$, we have $\\det(M') \\in \\{-1, 0, 1\\}$. We need to show this holds for any $k \\times k$ submatrix $M$.\n\nLet $M$ be a $k \\times k$ submatrix of $A$. Each column of the original matrix $A$ has exactly two $1$s (representing the two vertices of an edge). Therefore, any column of the submatrix $M$ can have zero, one, or two $1$s.\n\n*   **Case 1: $M$ has a column of all zeros.** In this case, $\\det(M) = 0$.\n*   **Case 2: $M$ has a column with exactly one $1$.** Let the $j$-th column of $M$ have a single $1$ at row $i$. We can compute the determinant by cofactor expansion along this column:\n    $$ \\det(M) = (-1)^{i+j} \\cdot 1 \\cdot \\det(M_{ij}) $$\n    where $M_{ij}$ is the $(k-1) \\times (k-1)$ submatrix obtained by removing row $i$ and column $j$. By the inductive hypothesis, $\\det(M_{ij}) \\in \\{-1, 0, 1\\}$. Therefore, $\\det(M) \\in \\{-1, 0, 1\\}$.\n*   **Case 3: Every column of $M$ has exactly two $1$s.** Let the rows of $M$ correspond to a set of vertices $V_M$ and the columns to a set of edges $E_M$. Since $|V_M| = |E_M| = k$ and every edge in $E_M$ has both its endpoints in $V_M$ (as its column has two $1$s), the subgraph induced by $(V_M, E_M)$ has an equal number of vertices and edges. Such a graph must contain at least one cycle.\n    Since the original graph is bipartite, this cycle must be of even length. Let the vertices in the cycle be partitioned by the graph's bipartition into sets $V_U$ and $V_W$. Summing the rows of $M$ corresponding to vertices in $V_U$ and subtracting the sum of the rows corresponding to vertices in $V_W$ results in the zero vector. This is because for any edge (column) within the cycle, it connects one vertex from $V_U$ and one from $V_W$, so its contribution to the sum is $1 - 1 = 0$. For any edge not in the cycle, its column will be zero in this combination of rows. This demonstrates a linear dependency among the rows of $M$. Therefore, $\\det(M)=0$.\n\nThis completes the induction. The determinant of any square submatrix of $A$ is in $\\{-1, 0, 1\\}$. This directly implies that the maximum absolute value of any $3 \\times 3$ subdeterminant is at most $1$.\n\nTo confirm the maximum value is exactly $1$, we need to find one $3 \\times 3$ submatrix with a determinant of $1$ or $-1$. Consider the submatrix formed by rows $\\{1, 2, 4\\}$ (vertices $u_1, u_2, w_1$) and columns $\\{1, 2, 5\\}$ (edges $(u_1,w_1), (u_2,w_1), (u_2,w_2)$).\n$$ M = \\begin{pmatrix} 1 & 0 & 0 \\\\ 0 & 1 & 1 \\\\ 1 & 1 & 0 \\end{pmatrix} $$\nThe determinant is:\n$$ \\det(M) = 1 \\cdot \\det\\begin{pmatrix} 1 & 1 \\\\ 1 & 0 \\end{pmatrix} = 1 \\cdot (1 \\cdot 0 - 1 \\cdot 1) = -1 $$\nThe absolute value is $|-1|=1$. Since we have proven that the absolute value can be no larger than $1$ and we have found an instance where it is exactly $1$, the maximum absolute value is $1$.", "answer": "$$\\boxed{1}$$", "id": "3192779"}, {"introduction": "Why is total unimodularity such a prized property in optimization? This final practice problem provides a compelling answer by demonstrating what happens when it is lost. Starting with a problem that has a core network flow structure (which is known to be totally unimodular), you will add a single side constraint that breaks the property. Your task is to find a fractional basic feasible solution, directly illustrating the crucial implication: without total unimodularity, we can no longer be sure that solving the LP relaxation will yield an integer solution.", "problem": "Consider the following directed graph instance of a resource-constrained shortest path with a single knapsack-type resource. The node set is $V=\\{s,a,b,t\\}$ and the arc set is $E=\\{(s,a),(a,t),(s,b),(b,t),(a,s),(s,t)\\}$. For each arc $e\\in E$, a cost $c_e$ and a resource consumption $r_e$ are given as follows:\n- $(s,a)$ has $c_{sa}=0$ and $r_{sa}=1$;\n- $(a,t)$ has $c_{at}=0$ and $r_{at}=1$;\n- $(s,b)$ has $c_{sb}=1$ and $r_{sb}=0$;\n- $(b,t)$ has $c_{bt}=1$ and $r_{bt}=0$;\n- $(a,s)$ has $c_{as}=5$ and $r_{as}=1$;\n- $(s,t)$ has $c_{st}=4$ and $r_{st}=1$.\nThe resource budget is $B=1$.\n\nFormulate the linear programming (LP) relaxation of the resource-constrained shortest $s$–$t$ path problem with decision variables $x_e\\in[0,1]$ indicating the fraction of arc $e$ used. Use the standard flow-conservation equalities at nodes and a single knapsack inequality $\\sum_{e\\in E} r_e x_e\\le B$, together with $b_s=1$, $b_t=-1$, and $b_a=b_b=0$ for the node balances. Let $A$ denote the coefficient matrix that collects the node-balance equalities and the single resource inequality (treated as an inequality row in the system).\n\nTasks:\n1) Starting from the definition of total unimodularity (TU), explain why the node-arc incidence part of $A$ (without the knapsack row) is totally unimodular, and then show that the full matrix $A$ is not totally unimodular by explicitly exhibiting a square submatrix of $A$ with determinant not in $\\{-1, 0, 1\\}$. Your demonstration must arise from the given instance.\n2) Construct a basic feasible solution (BFS) to the LP relaxation that is fractional (i.e., at least one $x_e$ is strictly between $0$ and $1$), verify feasibility from first principles, and justify why it is basic by identifying a set of active, linearly independent constraints that determine it uniquely.\n3) Compute the objective value $\\sum_{e\\in E} c_e x_e$ of your fractional BFS. Give your answer as an exact value (no rounding).\n\nYour final answer should be the single real number equal to the objective value you computed in Task 3.", "solution": "The problem is well-defined, scientifically grounded in the theory of linear optimization, and contains all necessary information to proceed with a solution.\n\nThe problem asks for an analysis of the linear programming (LP) relaxation of a resource-constrained shortest path problem. Let the decision variables $x_e \\in [0,1]$ represent the flow on each arc $e \\in E$. The variables are ordered as a vector $x = (x_{sa}, x_{at}, x_{sb}, x_{bt}, x_{as}, x_{st})^T$.\n\nThe LP relaxation is formulated as:\nMinimize $Z = \\sum_{e \\in E} c_e x_e = x_{sb} + x_{bt} + 5x_{as} + 4x_{st}$\nSubject to:\n1.  Flow conservation constraints:\n    - Node $s$: $x_{sa} + x_{sb} + x_{st} - x_{as} = 1$\n    - Node $a$: $x_{at} + x_{as} - x_{sa} = 0$\n    - Node $b$: $x_{bt} - x_{sb} = 0$\n    (The constraint for node $t$ is redundant as it is the negative sum of the other three).\n2.  Resource constraint:\n    $\\sum_{e \\in E} r_e x_e = x_{sa} + x_{at} + x_{as} + x_{st} \\le 1$\n3.  Variable bounds:\n    $0 \\le x_e \\le 1$ for all $e \\in E$.\n\nThe coefficient matrix $A$ combines the three independent flow conservation equalities and the one resource inequality. This $4 \\times 6$ matrix is:\n$$\nA = \\begin{pmatrix}\n1 & 0 & 1 & 0 & -1 & 1 \\\\\n-1 & 1 & 0 & 0 & 1 & 0 \\\\\n0 & 0 & -1 & 1 & 0 & 0 \\\\\n1 & 1 & 0 & 0 & 1 & 1\n\\end{pmatrix}\n$$\n\n**Task 1: Total Unimodularity Analysis**\n\nA matrix is totally unimodular (TU) if the determinant of every square submatrix is in the set $\\{-1, 0, 1\\}$.\n\nThe node-arc incidence part of $A$ consists of the first three rows, which we can denote as $A_{\\text{flow}}$. This matrix is known to be totally unimodular. This property stems from its specific structure:\n1.  All entries are $0$, $1$, or $-1$.\n2.  Each column, corresponding to an arc, contains at most two non-zero entries.\n3.  If a column has two non-zero entries, they are $1$ (for the arc's head node) and $-1$ (for the arc's tail node). *Note: The convention can be opposite, but consistency is key.*\nA key theorem states that any matrix with these properties is TU. This implies that if all right-hand sides are integer vectors, all basic feasible solutions of the system $A_{\\text{flow}}x=b$ will be integer-valued.\n\nHowever, the full matrix $A$ includes the resource constraint row and is not totally unimodular. To demonstrate this, we must find a square submatrix of $A$ with a determinant not in $\\{-1, 0, 1\\}$. Let's select the square submatrix $A_{\\text{sub}}$ formed by rows $1, 2, 3, 4$ and columns corresponding to variables $x_{sa}, x_{at}, x_{sb}, x_{as}$.\n$$\nA_{\\text{sub}} = \\begin{pmatrix}\n1 & 0 & 1 & -1 \\\\\n-1 & 1 & 0 & 1 \\\\\n0 & 0 & -1 & 0 \\\\\n1 & 1 & 0 & 1\n\\end{pmatrix}\n$$\nWe compute the determinant of this $4 \\times 4$ matrix by cofactor expansion along the third row, which has the most zeros:\n$$\n\\det(A_{\\text{sub}}) = (-1) \\cdot (-1)^{3+3} \\det \\begin{pmatrix}\n1 & 0 & -1 \\\\\n-1 & 1 & 1 \\\\\n1 & 1 & 1\n\\end{pmatrix}\n$$\nThe determinant of the $3 \\times 3$ minor is:\n$$\n\\det \\begin{pmatrix}\n1 & 0 & -1 \\\\\n-1 & 1 & 1 \\\\\n1 & 1 & 1\n\\end{pmatrix} = 1(1 \\cdot 1 - 1 \\cdot 1) - 0 + (-1)(-1 \\cdot 1 - 1 \\cdot 1) = 1(0) + (-1)(-2) = 2\n$$\nTherefore, the determinant of the submatrix is:\n$$\n\\det(A_{\\text{sub}}) = -1 \\cdot (2) = -2\n$$\nSince the determinant is $-2$, which is not in $\\{-1, 0, 1\\}$, the matrix $A$ is not totally unimodular.\n\n**Task 2: Fractional Basic Feasible Solution (BFS)**\n\nA basic feasible solution is determined by a set of $n$ active, linearly independent constraints, where $n$ is the number of variables ($n=6$). We seek a BFS where at least one variable is fractional. Let's propose the following solution:\n$$\nx = (x_{sa}, x_{at}, x_{sb}, x_{bt}, x_{as}, x_{st}) = (\\frac{1}{2}, \\frac{1}{2}, \\frac{1}{2}, \\frac{1}{2}, 0, 0)\n$$\nFirst, we verify feasibility:\n- Variable bounds: All components of $x$ are in $[0, 1]$. This is satisfied.\n- Flow conservation:\n    - Node $s$: $\\frac{1}{2} + \\frac{1}{2} + 0 - 0 = 1$. (Satisfied)\n    - Node $a$: $\\frac{1}{2} + 0 - \\frac{1}{2} = 0$. (Satisfied)\n    - Node $b$: $\\frac{1}{2} - \\frac{1}{2} = 0$. (Satisfied)\n- Resource constraint: $\\frac{1}{2} + \\frac{1}{2} + 0 + 0 = 1 \\le 1$. (Satisfied and active/tight)\n\nThe solution is feasible and fractional. To justify that it is a basic solution, we must identify $6$ active, linearly independent constraints that uniquely determine this solution. The active constraints are:\n1. $x_{sa} + x_{sb} - x_{as} + x_{st} = 1$\n2. $-x_{sa} + x_{at} + x_{as} = 0$\n3. $-x_{sb} + x_{bt} = 0$\n4. $x_{sa} + x_{at} + x_{as} + x_{st} = 1$ (resource constraint is tight)\n5. $x_{as} = 0$\n6. $x_{st} = 0$\n\nThis is a system of $6$ linear equations in $6$ variables. Let $M$ be the coefficient matrix of this system:\n$$\nM = \\begin{pmatrix}\n1 & 0 & 1 & 0 & -1 & 1 \\\\\n-1 & 1 & 0 & 0 & 1 & 0 \\\\\n0 & 0 & -1 & 1 & 0 & 0 \\\\\n1 & 1 & 0 & 0 & 1 & 1 \\\\\n0 & 0 & 0 & 0 & 1 & 0 \\\\\n0 & 0 & 0 & 0 & 0 & 1\n\\end{pmatrix}\n$$\nThe solution $x$ is basic if and only if this matrix is non-singular, i.e., $\\det(M) \\neq 0$. Due to the structure of the last two rows, the determinant is the determinant of the top-left $4 \\times 4$ block corresponding to the basic variables $x_{sa}, x_{at}, x_{sb}, x_{bt}$:\n$$\n\\det(M) = \\det \\begin{pmatrix}\n1 & 0 & 1 & 0 \\\\\n-1 & 1 & 0 & 0 \\\\\n0 & 0 & -1 & 1 \\\\\n1 & 1 & 0 & 0\n\\end{pmatrix}\n$$\nWe expand along the fourth column:\n$$\n\\det(M) = 1 \\cdot (-1)^{3+4} \\det \\begin{pmatrix}\n1 & 0 & 1 \\\\\n-1 & 1 & 0 \\\\\n1 & 1 & 0\n\\end{pmatrix} = -1 \\cdot \\left(1 \\cdot \\det\\begin{pmatrix}-1 & 1 \\\\ 1 & 1\\end{pmatrix}\\right) = -1 \\cdot (1 \\cdot (-1 - 1)) = -1 \\cdot (-2) = 2\n$$\nSince $\\det(M) = 2 \\neq 0$, the $6$ active constraints are linearly independent. The proposed solution is the unique solution to this system, and is therefore a basic feasible solution.\n\n**Task 3: Objective Value of the Fractional BFS**\n\nThe objective function to minimize is $Z = x_{sb} + x_{bt} + 5x_{as} + 4x_{st}$. We substitute the values from our fractional BFS $x = (1/2, 1/2, 1/2, 1/2, 0, 0)$:\n$$\nZ = \\frac{1}{2} + \\frac{1}{2} + 5(0) + 4(0) = 1\n$$\nThe objective value of this fractional basic feasible solution is $1$.", "answer": "$$\\boxed{1}$$", "id": "3192748"}]}
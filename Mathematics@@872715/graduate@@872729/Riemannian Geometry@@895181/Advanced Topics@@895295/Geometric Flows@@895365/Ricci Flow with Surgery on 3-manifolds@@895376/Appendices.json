{"hands_on_practices": [{"introduction": "To appreciate why surgery is necessary in Ricci flow, one must first understand the singularities it is designed to resolve. The archetypal singularity in three dimensions is the \"neckpinch,\" where a region locally resembling a cylinder $S^2 \\times \\mathbb{R}$ shrinks until its radius vanishes. This foundational exercise guides you through the analysis of a simplified model for this process, allowing you to derive the governing differential equation for the neck's radius and discover its characteristic asymptotic behavior as it collapses. [@problem_id:2988720]", "problem": "Consider a smooth solution $g(t)$ to the Ricci flow $\\partial_{t} g(t) = -2 \\,\\mathrm{Ric}(g(t))$ on a closed $3$-dimensional Riemannian manifold. Suppose that for times $t$ close to a singular time $T$ from below, there is a region diffeomorphic to $S^{2} \\times I$ (where $I$ is an interval) that is well-approximated by a product metric of the form\n$$\ng(t)\\big|_{S^{2} \\times I} = dz^{2} + r(t)^{2}\\, g_{S^{2}},\n$$\nwhere $z$ is the coordinate along $I$, $g_{S^{2}}$ is the round metric of constant sectional curvature $1$ on $S^{2}$, and $r(t)  0$ is a smooth function of time representing the (nearly constant) neck radius in this region. Assume that this neck region evolves under the Ricci flow predominantly by changing the radius $r(t)$, staying close to a cylinder $S^{2}(r(t)) \\times I$ up to errors that are negligible at leading order as $t \\nearrow T$.\n\nUsing only the Ricci flow equation and standard facts about the Ricci tensor of a round sphere of radius $r$ (namely, that the Ricci tensor of $(S^{2}, r^{2} g_{S^{2}})$ equals $\\frac{1}{r^{2}}$ times the metric restricted to the $S^{2}$ directions, and vanishes in the $I$ direction for the product), derive the ordinary differential equation (ODE) for $r(t)$ induced by the flow in this neck region. Then determine the leading-order asymptotic exponent $p$ defined by\n$$\nr(t) \\sim A \\,(T - t)^{p} \\quad \\text{as } t \\nearrow T,\n$$\nwhere $A  0$ is a constant. Provide the value of $p$ as your final answer. No rounding is needed.", "solution": "The problem asks for the derivation of the ordinary differential equation (ODE) governing the radius $r(t)$ of a cylindrical neck region in a 3-manifold evolving under Ricci flow, and for the determination of the asymptotic exponent $p$ describing how this radius shrinks to zero at a singular time $T$.\n\nFirst, we validate the problem statement.\n\n### Step 1: Extract Givens\n- **Ricci Flow Equation**: $\\partial_{t} g(t) = -2 \\,\\mathrm{Ric}(g(t))$\n- **Manifold**: A closed 3-dimensional Riemannian manifold.\n- **Region of Interest**: For $t$ approaching a singular time $T$, there is a region diffeomorphic to $S^{2} \\times I$.\n- **Metric Ansatz**: In this region, the metric is approximated by $g(t) = dz^{2} + r(t)^{2}\\, g_{S^{2}}$. Here, $z$ is the coordinate on the interval $I$, $g_{S^{2}}$ is the round metric on the 2-sphere with constant sectional curvature $1$, and $r(t)  0$ is the time-dependent radius.\n- **Ricci Tensor Information**: For the product metric $dz^2 + r(t)^2 g_{S^2}$, the Ricci tensor is given. Specifically, the Ricci tensor of the spherical part, $(S^2, r(t)^2 g_{S^2})$, is $\\frac{1}{r(t)^2}$ times the metric on the sphere. For the full product metric, the Ricci tensor component in the $z$-direction is zero.\n- **Asymptotic Behavior**: The radius follows the form $r(t) \\sim A \\,(T - t)^{p}$ as $t \\nearrow T$ for some constants $A  0$ and $p$.\n- **Objective**: Derive the ODE for $r(t)$ and find the value of the exponent $p$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientific Groundedness**: The problem describes a neck-pinch singularity, a fundamental concept in the study of Ricci flow, particularly in the context of Hamilton's program and Perelman's proof of the Poincaré conjecture. The model is a standard and well-established local model for a Type I singularity. It is scientifically sound.\n- **Well-Posedness**: The problem provides all necessary information: the evolution equation, the metric form, and key properties of the resulting Ricci tensor. The objective is clearly stated and a unique solution can be determined from the given information.\n- **Objectivity**: The problem is stated in precise mathematical language, free from ambiguity or subjective claims.\n\nThe problem does not exhibit any of the flaws listed in the instructions (e.g., scientific unsoundness, incompleteness, ambiguity). It is a well-posed and standard problem in Riemannian geometry.\n\n### Step 3: Verdict and Action\nThe problem is valid. We proceed to solve it.\n\n### Solution\nThe evolution of the metric $g(t)$ is governed by the Ricci flow equation:\n$$\n\\partial_{t} g(t) = -2 \\,\\mathrm{Ric}(g(t))\n$$\nThe metric in the neck region is given by the ansatz:\n$$\ng(t) = dz^{2} + r(t)^{2}\\, g_{S^{2}}\n$$\nwhere $g_{S^2}$ is a time-independent metric on the 2-sphere. The only time dependence in the metric arises from the scalar function $r(t)$.\n\nFirst, we calculate the left-hand side of the Ricci flow equation, which is the time derivative of the metric tensor $g(t)$.\n$$\n\\partial_{t} g(t) = \\partial_{t} \\left( dz^{2} + r(t)^{2}\\, g_{S^{2}} \\right)\n$$\nSince $dz^2$ and $g_{S^2}$ are independent of time, the derivative acts only on the coefficient $r(t)^2$:\n$$\n\\partial_{t} g(t) = \\frac{d}{dt}(r(t)^{2}) \\,g_{S^{2}} = 2 r(t) \\frac{dr}{dt} \\,g_{S^{2}}\n$$\nThis is a tensor that is zero on vector fields in the $z$-direction and equals $2 r(t) \\dot{r}(t) g_{S^2}$ on vector fields tangent to the $S^2$ factor. Here, $\\dot{r}(t) = \\frac{dr}{dt}$.\n\nNext, we determine the right-hand side of the Ricci flow equation, which involves the Ricci tensor $\\mathrm{Ric}(g(t))$ of the metric $g(t)$. The problem states to use the Ricci tensor for the product metric $dz^2 + r(t)^2 g_{S^2}$. For a product of Riemannian manifolds $(M_1,g_1)$ and $(M_2,g_2)$, the Ricci tensor of the product metric $g_1 \\oplus g_2$ is the direct sum of the individual Ricci tensors, $\\mathrm{Ric}(g_1) \\oplus \\mathrm{Ric}(g_2)$.\n\nIn our case, $(M_1, g_1)$ is the interval $I$ with the flat metric $dz^2$. Any 1-dimensional manifold is Ricci-flat, so $\\mathrm{Ric}(dz^2) = 0$. This corresponds to the $z$-direction component of the Ricci tensor.\n\nThe second part, $(M_2, g_2)$, is the 2-sphere of radius $r(t)$, with metric $g_{S^2_{r(t)}} = r(t)^2 g_{S^2}$. The problem provides the formula for its Ricci tensor: \"the Ricci tensor of $(S^{2}, r^{2} g_{S^{2}})$ equals $\\frac{1}{r^{2}}$ times the metric restricted to the $S^{2}$ directions\". The metric restricted to the $S^2$ directions is $r(t)^2 g_{S^2}$. Thus, the Ricci tensor on the sphere is:\n$$\n\\mathrm{Ric}(r(t)^2 g_{S^2}) = \\frac{1}{r(t)^2} \\left( r(t)^2 g_{S^2} \\right) = g_{S^2}\n$$\nCombining the components, the Ricci tensor of the full product metric $g(t)$ has a block structure: it is zero in the $z$-direction and equals $g_{S^2}$ in the directions tangent to the sphere.\n\nNow, we substitute the expressions for $\\partial_t g(t)$ and $\\mathrm{Ric}(g(t))$ back into the Ricci flow equation.\n$$\n\\partial_{t} g(t) = -2 \\,\\mathrm{Ric}(g(t))\n$$\nConsidering the components of the equation in the $z$-direction, we have $0 = -2(0)$, which is consistent but provides no information.\nConsidering the components in the directions tangent to the $S^2$ factors, we have:\n$$\n2 r(t) \\dot{r}(t) g_{S^2} = -2 g_{S^2}\n$$\nSince $g_{S^2}$ is a non-degenerate metric tensor, we can equate the scalar coefficients on both sides of the equation. This yields the ordinary differential equation for the radius $r(t)$:\n$$\n2 r(t) \\dot{r}(t) = -2\n$$\n$$\nr(t) \\frac{dr}{dt} = -1\n$$\nThis can also be written as $\\frac{1}{2} \\frac{d}{dt}(r(t)^2) = -1$.\nWe solve this ODE by separation of variables or direct integration:\n$$\n\\int r \\,dr = \\int -1 \\,dt\n$$\n$$\n\\frac{1}{2} r(t)^2 = -t + C\n$$\nwhere $C$ is a constant of integration. Thus,\n$$\nr(t)^2 = 2C - 2t\n$$\nThe problem states that $t=T$ is a singular time. In this neck-pinch model, the singularity occurs when the radius of the cylinder shrinks to zero, i.e., $\\lim_{t \\to T} r(t) = 0$. Applying this condition:\n$$\nr(T)^2 = 0 = 2C - 2T\n$$\nThis allows us to determine the integration constant: $2C = 2T$.\nSubstituting this back into the solution for $r(t)^2$:\n$$\nr(t)^2 = 2T - 2t = 2(T-t)\n$$\nSince the radius $r(t)$ must be positive, we take the positive square root:\n$$\nr(t) = \\sqrt{2(T-t)} = \\sqrt{2} \\,(T-t)^{1/2}\n$$\nThe problem specifies the asymptotic behavior of $r(t)$ near the singular time $T$ as:\n$$\nr(t) \\sim A \\,(T - t)^{p}\n$$\nBy comparing our derived solution with this asymptotic form, we can identify the constant $A = \\sqrt{2}$ and the exponent $p$.\n$$\n\\sqrt{2} \\,(T-t)^{1/2} = A \\,(T-t)^p\n$$\nThe exponent is therefore $p = 1/2$.", "answer": "$$\\boxed{\\frac{1}{2}}$$", "id": "2988720"}, {"introduction": "Having established the model for how a neck singularity forms, a critical challenge is to identify these structures within a complex, evolving manifold before the curvature becomes infinite. This practice moves from theory to application by operationalizing the geometric criteria for a \"canonical neck\" into a practical detection algorithm. By implementing a quantitative neck detector based on the spectral properties of the Ricci tensor, you will simulate the decision-making process at the very heart of the Ricci flow with surgery procedure. [@problem_id:2988717]", "problem": "Construct a program that implements a quantitative neck detection criterion for the Ricci flow with surgery on $3$-manifolds, based solely on pointwise spectral data of the Ricci tensor along a candidate axis. The detection must be scale-invariant and justified from first principles. Your program must take the provided test suite of synthetic Ricci data for four cases and return a boolean for each, indicating whether the data satisfies the quantitative neck criterion.\n\nFoundational base and definitions to be used:\n- The Ricci flow is the Partial Differential Equation (PDE) $\\partial_t g(t) = -2 \\operatorname{Ric}(g(t))$ on a Riemannian manifold $(M^3, g(t))$, where $g(t)$ is a time-dependent Riemannian metric and $\\operatorname{Ric}(g)$ is the Ricci curvature tensor.\n- Under metric rescaling $g' = s g$ for $s>0$, all curvature tensors scale by $1/s$, in particular $\\operatorname{Ric}' = \\operatorname{Ric}/s$ and the scalar curvature $R' = R/s$. Therefore the ratios of Ricci eigenvalues to scalar curvature are scale-invariant.\n- On the standard product cylinder $S^2(r) \\times \\mathbb{R}$ with round $S^2$ of radius $r$, the Ricci tensor has eigenvalues $(1/r^2, 1/r^2, 0)$ and scalar curvature $R=2/r^2$. Thus the normalized eigenvalues $(\\lambda_i/R)$ equal $(0, 1/2, 1/2)$, independently of $r$.\n\nQuantitative neck detection criterion to implement:\nGiven a finite sample of $m$ points along a candidate axis, at each sample $i$ you are provided a symmetric $3\\times 3$ Ricci tensor $\\operatorname{Ric}_i$ (in some coordinate basis). Let $\\lambda_{i,1}\\le \\lambda_{i,2}\\le \\lambda_{i,3}$ denote the ordered eigenvalues of $\\operatorname{Ric}_i$, and let $R_i=\\lambda_{i,1}+\\lambda_{i,2}+\\lambda_{i,3}$ denote the scalar curvature at the sample. Define the normalized eigenvalues $\\mu_{i,k}=\\lambda_{i,k}/R_i$ for $k\\in\\{1,2,3\\}$. Declare the sample to be a quantitative neck if and only if all of the following scale-invariant conditions hold simultaneously:\n- Local cylindrical spectrum at every sample: for all $i$,\n  - Nonnegativity and small axial curvature: $0\\le \\mu_{i,1}\\le \\varepsilon$,\n  - Two large, nearly equal spherical directions: $\\lvert \\mu_{i,2}-\\tfrac{1}{2}\\rvert\\le \\varepsilon$ and $\\lvert \\mu_{i,3}-\\tfrac{1}{2}\\rvert\\le \\varepsilon$,\n  - Small anisotropy within the spherical directions: $\\lvert \\mu_{i,3}-\\mu_{i,2}\\rvert\\le \\delta$.\n- Axial uniformity: for each $k\\in\\{1,2,3\\}$, the variation along the axis satisfies $\\max_i \\mu_{i,k}-\\min_i \\mu_{i,k}\\le \\nu$.\n- Controlled scalar curvature variation: the relative variation satisfies $\\dfrac{\\max_i R_i-\\min_i R_i}{\\frac{1}{m}\\sum_i R_i}\\le \\theta$.\n\nUse the following detection thresholds:\n- $\\varepsilon = 0.05$,\n- $\\delta = 0.06$,\n- $\\nu = 0.03$,\n- $\\theta = 0.08$.\n\nTest suite specification:\nEach test case consists of $m=5$ samples, and for each sample you are given the scalar curvature $R_i$ and the normalized eigenvalues $\\mu_{i,1},\\mu_{i,2},\\mu_{i,3}$. The actual Ricci matrices $\\operatorname{Ric}_i$ used by your program must be taken to be diagonal matrices with diagonal entries equal to the eigenvalues $\\lambda_{i,k}:=\\mu_{i,k}R_i$, i.e., $\\operatorname{Ric}_i=\\operatorname{diag}(\\lambda_{i,1},\\lambda_{i,2},\\lambda_{i,3})$.\n\n- Test case $1$ (happy path: a good neck with small variations):\n  - Scalar curvatures $[\\,2.0,\\,2.04,\\,1.96,\\,2.02,\\,1.98\\,]$.\n  - Normalized eigenvalues per sample:\n    - $[\\,0.01,\\,0.495,\\,0.495\\,]$,\n    - $[\\,0.012,\\,0.494,\\,0.494\\,]$,\n    - $[\\,0.011,\\,0.4945,\\,0.4945\\,]$,\n    - $[\\,0.013,\\,0.4935,\\,0.4935\\,]$,\n    - $[\\,0.009,\\,0.4955,\\,0.4955\\,]$.\n\n- Test case $2$ (boundary case: near-threshold variations, still acceptable):\n  - Scalar curvatures $[\\,2.0,\\,2.05,\\,2.0,\\,1.95,\\,2.1\\,]$.\n  - Normalized eigenvalues per sample:\n    - $[\\,0.05,\\,0.49,\\,0.46\\,]$,\n    - $[\\,0.048,\\,0.497,\\,0.455\\,]$,\n    - $[\\,0.051,\\,0.492,\\,0.457\\,]$,\n    - $[\\,0.052,\\,0.493,\\,0.455\\,]$,\n    - $[\\,0.05,\\,0.488,\\,0.462\\,]$.\n\n- Test case $3$ (edge case: nearly round $S^3$-like spectra, should be rejected):\n  - Scalar curvatures $[\\,6.0,\\,5.9,\\,6.1,\\,6.05,\\,5.95\\,]$.\n  - Normalized eigenvalues per sample:\n    - $[\\,0.3333,\\,0.3333,\\,0.3334\\,]$,\n    - $[\\,0.3330,\\,0.3335,\\,0.3335\\,]$,\n    - $[\\,0.3334,\\,0.3333,\\,0.3333\\,]$,\n    - $[\\,0.3333,\\,0.3334,\\,0.3333\\,]$,\n    - $[\\,0.3332,\\,0.3334,\\,0.3334\\,]$.\n\n- Test case $4$ (cap-like region: significant axial curvature and larger scalar variation, should be rejected):\n  - Scalar curvatures $[\\,3.0,\\,3.2,\\,2.8,\\,3.1,\\,2.9\\,]$.\n  - Normalized eigenvalues per sample:\n    - $[\\,0.2,\\,0.4,\\,0.4\\,]$,\n    - $[\\,0.22,\\,0.39,\\,0.39\\,]$,\n    - $[\\,0.18,\\,0.41,\\,0.41\\,]$,\n    - $[\\,0.21,\\,0.395,\\,0.395\\,]$,\n    - $[\\,0.19,\\,0.405,\\,0.405\\,]$.\n\nRequired final output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[\\,\\text{result1},\\text{result2},\\text{result3},\\text{result4}\\,]$). Each result must be a boolean indicating whether the corresponding test case satisfies the quantitative neck criterion.", "solution": "The problem statement has been rigorously validated and is deemed valid. It is scientifically sound, well-posed, and objective. The problem resides squarely within the domain of Riemannian geometry, specifically concerning the analysis of Ricci flow on $3$-manifolds. It asks for the implementation of a quantitative neck detection algorithm, a concept of central importance in the theory of Ricci flow with surgery, as developed by Hamilton and canonized in Perelman's proof of the Poincaré and Geometrization conjectures. The provided data and criteria are sufficient and consistent for a unique solution to be determined, though a minor ambiguity regarding the presentation of test case data will be addressed by adhering strictly to the formal mathematical definitions.\n\nThe core of the problem is to determine if a region of a $3$-manifold, sampled at a finite number of points, geometrically resembles a cylinder of the form $S^2 \\times \\mathbb{R}$. The Ricci flow equation, $\\partial_t g(t) = -2 \\operatorname{Ric}(g(t))$, evolves the metric $g(t)$ in a way that tends to even out curvature. Regions of high positive curvature shrink, and in three dimensions, can form \"neck\" singularities where the manifold locally looks like a shrinking cylinder. To continue the flow past these singularities, one performs surgery, which involves identifying and excising these neck regions. The implemented criterion is a formalization of this identification process.\n\nA key principle is scale-invariance. The geometry of a neck is independent of its absolute size (the radius of the $S^2$ factor). The Ricci tensor $\\operatorname{Ric}$ and scalar curvature $R$ both scale inversely with the metric scaling factor, so their ratio is scale-invariant. The criterion is therefore formulated in terms of the normalized eigenvalues of the Ricci tensor, $\\mu_k = \\lambda_k/R$, where $\\lambda_k$ are the eigenvalues of $\\operatorname{Ric}$ and $R=\\sum \\lambda_k$. For an ideal cylinder $S^2(r) \\times \\mathbb{R}$, the Ricci eigenvalues are $(1/r^2, 1/r^2, 0)$, and the scalar curvature is $R=2/r^2$. The normalized spectrum is thus exactly $(0, 1/2, 1/2)$, independent of the radius $r$. The provided algorithm checks if the sampled region is \"close\" to this ideal cylindrical spectrum in a quantified sense.\n\nThe procedural implementation will follow the three sets of conditions provided.\n\nFirst, it is essential to process the input data correctly. The problem provides, for each sample point $i$, a set of three normalized eigenvalues. The definitions in the criterion rely on the ordered eigenvalues $\\lambda_{i,1}\\le \\lambda_{i,2}\\le \\lambda_{i,3}$ and the corresponding ordered normalized eigenvalues $\\mu_{i,1}\\le \\mu_{i,2}\\le \\mu_{i,3}$ (assuming positive scalar curvature $R_i0$, which is true for all test data). The provided data for the normalized eigenvalues is not always pre-sorted. Therefore, for each sample point $i$, the first step must be to sort the given triplet of values to obtain the ordered set $(\\mu_{i,1}, \\mu_{i,2}, \\mu_{i,3})$.\n\nThe algorithmic validation then proceeds as follows, using the given thresholds $\\varepsilon = 0.05$, $\\delta = 0.06$, $\\nu = 0.03$, and $\\theta = 0.08$:\n\n1.  **Local Cylindrical Spectrum Validation:** This set of conditions must hold for every sample point $i$ from $1$ to $m=5$.\n    - Nonnegativity and small axial curvature: The smallest eigenvalue corresponds to the 'axial' direction of the cylinder, which is flat. This is tested by the condition $0\\le \\mu_{i,1}\\le \\varepsilon$.\n    - Near-spherical spectrum: The other two eigenvalues correspond to the $S^2$ factor, which has positive curvature. For an ideal cylinder, both are $\\frac{1}{2}$. This is tested by checking if both $\\mu_{i,2}$ and $\\mu_{i,3}$ are close to $\\frac{1}{2}$: $\\lvert \\mu_{i,2}-\\tfrac{1}{2}\\rvert\\le \\varepsilon$ and $\\lvert \\mu_{i,3}-\\tfrac{1}{2}\\rvert\\le \\varepsilon$.\n    - Low anisotropy: The two spherical directions should have nearly identical curvature. This is checked with the condition $\\lvert \\mu_{i,3}-\\mu_{i,2}\\rvert\\le \\delta$.\n    If any of these inequalities is violated for any sample point $i$, the entire test case is classified as not being a quantitative neck.\n\n2.  **Axial Uniformity Validation:** A neck is not just a single point with a cylindrical spectrum, but a region extended along an axis. This criterion ensures the spectral properties are uniform along the candidate axis.\n    - For each eigenvalue index $k\\in\\{1,2,3\\}$, the total variation of $\\mu_{i,k}$ across all samples $i=1, \\dots, m$ is computed as $\\max_i \\mu_{i,k}-\\min_i \\mu_{i,k}$.\n    - This variation must be bounded by the threshold $\\nu$. That is, for each $k$, we must have $\\max_i \\mu_{i,k}-\\min_i \\mu_{i,k}\\le \\nu$.\n\n3.  **Controlled Scalar Curvature Variation:** The scalar curvature $R$ is related to the inverse square of the neck's radius. This condition ensures the neck's thickness does not vary excessively along the axis.\n    - The relative variation of the scalar curvature is calculated as $\\dfrac{\\max_i R_i-\\min_i R_i}{\\bar{R}}$, where $\\bar{R} = \\frac{1}{m}\\sum_i R_i$ is the average scalar curvature over the samples.\n    - This relative variation must be bounded by the threshold $\\theta$: $\\dfrac{\\max_i R_i-\\min_i R_i}{\\bar{R}}\\le \\theta$.\n\nA test case is declared a quantitative neck if and only if all three of these multipart conditions are fully satisfied. The program will systematically check each condition for each test case and return a boolean result. Notably, for Test Case 2, the descriptive text (\"still acceptable\") appears to conflict with the provided data when the rules are applied strictly. In such cases, the formal mathematical rules must take precedence over informal descriptions. A strict application of the condition $\\mu_{i,1} \\le \\varepsilon$ with $\\varepsilon=0.05$ causes Test Case 2 to fail, as some of its samples have a smallest normalized eigenvalue greater than $0.05$ (e.g., $0.051$).", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the quantitative neck detection problem for the provided test suite.\n    \"\"\"\n\n    # Define the detection thresholds from the problem statement.\n    epsilon = 0.05\n    delta = 0.06\n    nu = 0.03\n    theta = 0.08\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        {\n            \"R_samples\": [2.0, 2.04, 1.96, 2.02, 1.98],\n            \"mu_samples\": [\n                [0.01, 0.495, 0.495],\n                [0.012, 0.494, 0.494],\n                [0.011, 0.4945, 0.4945],\n                [0.013, 0.4935, 0.4935],\n                [0.009, 0.4955, 0.4955],\n            ]\n        },\n        {\n            \"R_samples\": [2.0, 2.05, 2.0, 1.95, 2.1],\n            \"mu_samples\": [\n                [0.05, 0.49, 0.46],\n                [0.048, 0.497, 0.455],\n                [0.051, 0.492, 0.457],\n                [0.052, 0.493, 0.455],\n                [0.05, 0.488, 0.462],\n            ]\n        },\n        {\n            \"R_samples\": [6.0, 5.9, 6.1, 6.05, 5.95],\n            \"mu_samples\": [\n                [0.3333, 0.3333, 0.3334],\n                [0.3330, 0.3335, 0.3335],\n                [0.3334, 0.3333, 0.3333],\n                [0.3333, 0.3334, 0.3333],\n                [0.3332, 0.3334, 0.3334],\n            ]\n        },\n        {\n            \"R_samples\": [3.0, 3.2, 2.8, 3.1, 2.9],\n            \"mu_samples\": [\n                [0.2, 0.4, 0.4],\n                [0.22, 0.39, 0.39],\n                [0.18, 0.41, 0.41],\n                [0.21, 0.395, 0.395],\n                [0.19, 0.405, 0.405],\n            ]\n        }\n    ]\n\n    results = []\n    for case in test_cases:\n        result = is_quantitative_neck(\n            case[\"R_samples\"],\n            case[\"mu_samples\"],\n            epsilon,\n            delta,\n            nu,\n            theta\n        )\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(lambda x: str(x).lower(), results))}]\")\n\ndef is_quantitative_neck(R_samples, mu_samples, epsilon, delta, nu, theta):\n    \"\"\"\n    Applies the quantitative neck detection criterion to a single test case.\n\n    Args:\n        R_samples (list): List of scalar curvatures for m samples.\n        mu_samples (list of lists): List of lists of normalized eigenvalues for m samples.\n        epsilon (float): Threshold for spectral properties.\n        delta (float): Threshold for anisotropy.\n        nu (float): Threshold for axial uniformity.\n        theta (float): Threshold for scalar curvature variation.\n\n    Returns:\n        bool: True if the case satisfies the neck criterion, False otherwise.\n    \"\"\"\n    R_arr = np.array(R_samples)\n    mu_arr = np.array(mu_samples)\n\n    # The problem definition relies on ordered eigenvalues mu_{i,1} = mu_{i,2} = mu_{i,3}.\n    # We must sort the given eigenvalue data for each sample.\n    sorted_mu = np.sort(mu_arr, axis=1)\n    \n    mu1 = sorted_mu[:, 0]\n    mu2 = sorted_mu[:, 1]\n    mu3 = sorted_mu[:, 2]\n\n    # ========== 1. Local cylindrical spectrum at every sample ==========\n    \n    # Nonnegativity and small axial curvature: 0 = mu_{i,1} = epsilon\n    if not np.all((0 = mu1)  (mu1 = epsilon)):\n        return False\n        \n    # Two large, nearly equal spherical directions\n    # |mu_{i,2} - 1/2| = epsilon and |mu_{i,3} - 1/2| = epsilon\n    if not np.all(np.abs(mu2 - 0.5) = epsilon):\n        return False\n    if not np.all(np.abs(mu3 - 0.5) = epsilon):\n        return False\n        \n    # Small anisotropy within the spherical directions: |mu_{i,3} - mu_{i,2}| = delta\n    if not np.all(np.abs(mu3 - mu2) = delta):\n        return False\n\n    # ========== 2. Axial uniformity ==========\n    \n    # max_i mu_{i,k} - min_i mu_{i,k} = nu for k=1,2,3\n    if (np.max(mu1) - np.min(mu1)) > nu:\n        return False\n    if (np.max(mu2) - np.min(mu2)) > nu:\n        return False\n    if (np.max(mu3) - np.min(mu3)) > nu:\n        return False\n\n    # ========== 3. Controlled scalar curvature variation ==========\n    \n    max_R = np.max(R_arr)\n    min_R = np.min(R_arr)\n    mean_R = np.mean(R_arr)\n    \n    # Avoid division by zero, though not an issue with the given test data.\n    if mean_R == 0:\n        # If mean is 0, max and min must also be 0 for a valid physical state\n        # with non-negative curvature. In this case, variation is 0.\n        if max_R - min_R > 0:\n            return False\n    else:\n        relative_variation = (max_R - min_R) / mean_R\n        if relative_variation > theta:\n            return False\n\n    # If all conditions are met, it is a quantitative neck.\n    return True\n\nif __name__ == \"__main__\":\n    solve()\n```", "id": "2988717"}, {"introduction": "The surgical procedure itself is a masterful blend of topology and geometry, where a diagnosed neck is excised and the resulting boundaries are sealed with standard \"caps.\" This final practice makes the abstract process of surgery tangible by examining its direct geometric consequences. By calculating the net change in the manifold's total volume, you will gain a quantitative understanding of how this procedure alters the global geometry of the space, a crucial step in guiding the manifold toward a simpler structure. [@problem_id:1017572]", "problem": "In the study of Ricci flow on 3-manifolds, a crucial technique for handling singularities is surgical modification of the manifold's geometry. This problem concerns the calculation of the volume change resulting from a standard surgical procedure on a \"neck\" region.\n\nConsider a 3-dimensional Riemannian manifold $(M, g)$ that is topologically a 3-sphere, $S^3$. Suppose that under the Ricci flow, a region known as a \"neck\" has formed. This neck region, $N \\subset M$, is diffeomorphic to $S^2 \\times [-L, L]$ for some half-length $L  0$. The metric on this neck is well-approximated by the product metric $g_N = d\\rho^2 + r_0^2 g_{S^2}$, where $\\rho \\in [-L, L]$ is the coordinate along the neck's length, $r_0$ is the constant radius of the $S^2$ cross-sections, and $g_{S^2}$ is the standard metric on a unit 2-sphere.\n\nA canonical surgery is performed on this neck region. The procedure involves two steps:\n1.  **Excision**: The neck region $N$ is removed from $M$. This leaves a manifold with two boundary components, each being a 2-sphere of radius $r_0$.\n2.  **Capping**: Each of the two spherical boundary components is capped off by gluing in a \"standard cap\". Each cap is a 3-dimensional manifold with boundary, isometric to a hemisphere of a standard 3-sphere of radius $r_0$. The standard metric on a 3-sphere of radius $R$ can be written in hyperspherical coordinates $(\\chi, \\theta, \\phi)$ as $g_{S^3(R)} = R^2(d\\chi^2 + \\sin^2\\chi \\, g_{S^2})$, where $\\chi \\in [0, \\pi]$ and $g_{S^2}$ is the metric on the unit 2-sphere. A hemisphere corresponds to the coordinate range $\\chi \\in [0, \\pi/2]$.\n\nCalculate the total change in the volume of the manifold, $\\Delta V = V_{\\text{final}} - V_{\\text{initial}}$, resulting from this surgery. Express your answer in terms of the neck's half-length $L$ and radius $r_0$.", "solution": "The total change in volume, $\\Delta V$, is the volume of the added parts minus the volume of the removed part. The initial manifold is $M$ and the final manifold is $(M \\setminus N) \\cup (\\text{Cap}_1 \\cup \\text{Cap}_2)$. Thus, the volume change is:\n$$\n\\Delta V = V_{\\text{final}} - V_{\\text{initial}} = V((M \\setminus N) \\cup \\text{Caps}) - V(M) = (V(M) - V(N)) + V(\\text{Caps}) - V(M)\n$$\n$$\n\\Delta V = V(\\text{Caps}) - V(N)\n$$\nwhere $V(\\text{Caps})$ is the total volume of the two added caps and $V(N)$ is the volume of the excised neck. We need to calculate these two volumes.\n\n**1. Volume of the excised neck ($V(N)$)**\n\nThe neck region $N$ is diffeomorphic to $S^2 \\times [-L, L]$, and its metric is given by $g_N = d\\rho^2 + r_0^2 g_{S^2}$. Let $(\\theta, \\phi)$ be the standard spherical coordinates for the unit 2-sphere, so $g_{S^2} = d\\theta^2 + \\sin^2\\theta d\\phi^2$. The metric tensor for the neck in coordinates $(\\rho, \\theta, \\phi)$ is a diagonal matrix with entries $(1, r_0^2, r_0^2 \\sin^2\\theta)$.\n\nThe volume element $dV_N$ is given by $\\sqrt{\\det g_N} \\, d\\rho \\, d\\theta \\, d\\phi$.\n$$\n\\det g_N = 1 \\cdot r_0^2 \\cdot r_0^2 \\sin^2\\theta = r_0^4 \\sin^2\\theta\n$$\n$$\ndV_N = \\sqrt{r_0^4 \\sin^2\\theta} \\, d\\rho \\, d\\theta \\, d\\phi = r_0^2 \\sin\\theta \\, d\\rho \\, d\\theta \\, d\\phi\n$$\nTo find the volume of the neck, we integrate $dV_N$ over the region $N$:\n$$\nV(N) = \\int_{-L}^{L} \\int_0^{2\\pi} \\int_0^{\\pi} r_0^2 \\sin\\theta \\, d\\theta \\, d\\phi \\, d\\rho\n$$\nThe integral over the 2-sphere part is $r_0^2$ times the area of the unit 2-sphere, which is $4\\pi$.\n$$\n\\int_0^{2\\pi} \\int_0^{\\pi} r_0^2 \\sin\\theta \\, d\\theta \\, d\\phi = r_0^2 \\int_0^{2\\pi} [-\\cos\\theta]_0^{\\pi} \\, d\\phi = r_0^2 \\int_0^{2\\pi} 2 \\, d\\phi = 4\\pi r_0^2\n$$\nNow, we integrate along the length of the neck:\n$$\nV(N) = \\int_{-L}^{L} 4\\pi r_0^2 \\, d\\rho = 4\\pi r_0^2 [\\rho]_{-L}^{L} = 4\\pi r_0^2 (L - (-L)) = 8\\pi L r_0^2\n$$\n\n**2. Volume of the added caps ($V(\\text{Caps})$)**\n\nTwo identical caps are added. Each cap is a hemisphere of a 3-sphere of radius $r_0$. Let's first calculate the volume of a single cap, $V_{\\text{cap}}$.\nThe metric on the 3-sphere of radius $r_0$ is $g_{S^3(r_0)} = r_0^2(d\\chi^2 + \\sin^2\\chi \\, g_{S^2})$. In coordinates $(\\chi, \\theta, \\phi)$, the metric tensor is diagonal with entries $(r_0^2, r_0^2 \\sin^2\\chi, r_0^2 \\sin^2\\chi \\sin^2\\theta)$.\n\nThe volume element $dV_{\\text{cap}}$ is:\n$$\n\\det g_{S^3(r_0)} = r_0^2 \\cdot (r_0^2 \\sin^2\\chi) \\cdot (r_0^2 \\sin^2\\chi \\sin^2\\theta) = r_0^6 \\sin^4\\chi \\sin^2\\theta\n$$\n$$\ndV_{\\text{cap}} = \\sqrt{r_0^6 \\sin^4\\chi \\sin^2\\theta} \\, d\\chi \\, d\\theta \\, d\\phi = r_0^3 \\sin^2\\chi \\sin\\theta \\, d\\chi \\, d\\theta \\, d\\phi\n$$\nA hemisphere corresponds to $\\chi \\in [0, \\pi/2]$. We integrate over the volume of one cap:\n$$\nV_{\\text{cap}} = \\int_0^{\\pi/2} \\int_0^{2\\pi} \\int_0^{\\pi} r_0^3 \\sin^2\\chi \\sin\\theta \\, d\\theta \\, d\\phi \\, d\\chi\n$$\nThe integral over $(\\theta, \\phi)$ is over a unit 2-sphere, which gives $4\\pi$.\n$$\nV_{\\text{cap}} = 4\\pi r_0^3 \\int_0^{\\pi/2} \\sin^2\\chi \\, d\\chi\n$$\nWe use the identity $\\sin^2\\chi = \\frac{1 - \\cos(2\\chi)}{2}$:\n$$\n\\int_0^{\\pi/2} \\sin^2\\chi \\, d\\chi = \\int_0^{\\pi/2} \\frac{1 - \\cos(2\\chi)}{2} \\, d\\chi = \\frac{1}{2} \\left[\\chi - \\frac{\\sin(2\\chi)}{2}\\right]_0^{\\pi/2}\n$$\n$$\n= \\frac{1}{2} \\left( \\left(\\frac{\\pi}{2} - \\frac{\\sin(\\pi)}{2}\\right) - (0 - 0) \\right) = \\frac{1}{2} \\cdot \\frac{\\pi}{2} = \\frac{\\pi}{4}\n$$\nSo, the volume of one cap is:\n$$\nV_{\\text{cap}} = 4\\pi r_0^3 \\left(\\frac{\\pi}{4}\\right) = \\pi^2 r_0^3\n$$\nThe total volume of the two added caps is:\n$$\nV(\\text{Caps}) = 2 \\cdot V_{\\text{cap}} = 2\\pi^2 r_0^3\n$$\n\n**3. Total volume change ($\\Delta V$)**\n\nFinally, we compute the total change in volume:\n$$\n\\Delta V = V(\\text{Caps}) - V(N) = 2\\pi^2 r_0^3 - 8\\pi L r_0^2\n$$\nThis expression can be factored as:\n$$\n\\Delta V = 2\\pi r_0^2 (\\pi r_0 - 4L)\n$$", "answer": "$$\n\\boxed{2\\pi^2 r_0^3 - 8\\pi L r_0^2}\n$$", "id": "1017572"}]}
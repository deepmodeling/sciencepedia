{"hands_on_practices": [{"introduction": "The simplest and most direct connection between ideal norms and element norms occurs with principal ideals. For an ideal $(\\alpha)$ generated by a single element $\\alpha \\in \\mathcal{O}_K$, its norm is simply the absolute value of the field norm of its generator, a property that forms a cornerstone of the theory. This exercise [@problem_id:3019799] asks you to derive this relationship from first principles in the context of a quadratic field, providing essential practice in calculating field norms and understanding how they manifest as quadratic forms depending on the chosen basis for the ring of integers.", "problem": "Let $d$ be a fixed squarefree integer with $d \\neq 0$ and $d \\neq 1$, and let $K=\\mathbb{Q}(\\sqrt{d})$ be the quadratic number field with ring of integers $\\mathcal{O}_K$. For integers $a,b$ with not both $a$ and $b$ equal to zero, consider the principal fractional ideal $\\left(a+b\\sqrt{d}\\right)\\mathcal{O}_K \\subset K$. Starting from the definition of the field norm $N_{K/\\mathbb{Q}}(\\alpha)$ of an element $\\alpha \\in K$ as the product of its Galois conjugates, and from the definition of the absolute norm of a nonzero fractional ideal together with the characterization of the ring of integers of quadratic fields, derive a closed-form expression, in terms of $a$, $b$, and $d$, for the absolute norm $N\\!\\left(\\left(a+b\\sqrt{d}\\right)\\mathcal{O}_K\\right)$. Additionally, explain how, when $d \\equiv 1 \\pmod{4}$, this norm can be written as a binary quadratic form in the coordinates of $a+b\\sqrt{d}$ with respect to an integral basis of $\\mathcal{O}_K$, and relate the two expressions. Your final answer must be a single closed-form analytic expression in $a$, $b$, and $d$ for $N\\!\\left(\\left(a+b\\sqrt{d}\\right)\\mathcal{O}_K\\right)$.", "solution": "The problem asks for the absolute norm of the principal fractional ideal $I = (a+b\\sqrt{d})\\mathcal{O}_K$ in the quadratic number field $K = \\mathbb{Q}(\\sqrt{d})$, where $d$ is a squarefree integer not equal to $0$ or $1$, and $a,b$ are integers, not both zero.\n\nFirst, let's establish the necessary definitions and relationships. The field $K = \\mathbb{Q}(\\sqrt{d})$ has degree $2$ over $\\mathbb{Q}$. The Galois group of the extension $K/\\mathbb{Q}$ is of order $2$, containing the identity map and the conjugation automorphism $\\sigma: K \\to K$ defined by $\\sigma(x+y\\sqrt{d}) = x-y\\sqrt{d}$ for any $x, y \\in \\mathbb{Q}$.\n\nThe field norm of an element $\\alpha \\in K$ is defined as the product of its Galois conjugates. For $\\alpha = a+b\\sqrt{d}$, its conjugate is $\\sigma(\\alpha) = a-b\\sqrt{d}$.\nTherefore, the field norm is:\n$$N_{K/\\mathbb{Q}}(\\alpha) = \\alpha \\cdot \\sigma(\\alpha) = (a+b\\sqrt{d})(a-b\\sqrt{d}) = a^2 - (b\\sqrt{d})^2 = a^2 - db^2$$\nSince $a, b, d$ are integers, $N_{K/\\mathbb{Q}}(a+b\\sqrt{d})$ is always an integer.\n\nNext, we address the nature of the ideal $I = (a+b\\sqrt{d})\\mathcal{O}_K$. The problem statement refers to it as a fractional ideal. A fractional ideal is an $\\mathcal{O}_K$-submodule $J$ of $K$ such that there exists a non-zero $c \\in \\mathcal{O}_K$ with $cJ \\subseteq \\mathcal{O}_K$. An integral ideal is a fractional ideal that is a subset of $\\mathcal{O}_K$. A principal fractional ideal generated by $\\alpha \\in K$ is integral if and only if $\\alpha \\in \\mathcal{O}_K$.\n\nLet's determine if the generator $\\alpha = a+b\\sqrt{d}$ is an algebraic integer, i.e., if $\\alpha \\in \\mathcal{O}_K$. An element of a number field is an algebraic integer if and only if its minimal polynomial over $\\mathbb{Q}$ is monic with integer coefficients. The minimal polynomial of $\\alpha = a+b\\sqrt{d}$ (since $b \\neq 0$ implies $\\alpha \\notin \\mathbb{Q}$) is:\n$$m(x) = (x - \\alpha)(x - \\sigma(\\alpha)) = x^2 - (\\alpha + \\sigma(\\alpha))x + \\alpha\\sigma(\\alpha) = x^2 - (2a)x + (a^2-db^2)$$\nSince $a$ and $b$ are integers by hypothesis, the coefficients of this monic polynomial, $-2a$ and $a^2-db^2$, are integers. Thus, $\\alpha=a+b\\sqrt{d}$ is an algebraic integer for any integers $a, b$. This means $\\alpha \\in \\mathcal{O}_K$, and consequently, $I = (a+b\\sqrt{d})\\mathcal{O}_K$ is a principal integral ideal.\n\nThe absolute norm of a non-zero integral ideal $J \\subset \\mathcal{O}_K$ is defined as the cardinality of the quotient ring, $N(J) = |\\mathcal{O}_K / J|$. A fundamental theorem of algebraic number theory states that for a principal integral ideal $J = (\\alpha)$ generated by an element $\\alpha \\in \\mathcal{O}_K$, its norm is equal to the absolute value of the field norm of its generator:\n$$N((\\alpha)) = |N_{K/\\mathbb{Q}}(\\alpha)|$$\nThis can be justified by considering $\\mathcal{O}_K$ as a free $\\mathbb{Z}$-module of rank $2$. The multiplication map $m_\\alpha: \\mathcal{O}_K \\to \\mathcal{O}_K$ defined by $x \\mapsto \\alpha x$ is a $\\mathbb{Z}$-linear endomorphism. Its image is the ideal $(\\alpha)$. The index of the image, $[\\mathcal{O}_K : (\\alpha)]$, which is the norm of the ideal, is given by the absolute value of the determinant of the matrix representing $m_\\alpha$ with respect to any $\\mathbb{Z}$-basis of $\\mathcal{O}_K$. This determinant is, by definition, the field norm $N_{K/\\mathbb{Q}}(\\alpha)$.\n\nCombining these results, the absolute norm of the ideal $I = (a+b\\sqrt{d})\\mathcal{O}_K$ is:\n$$N(I) = |N_{K/\\mathbb{Q}}(a+b\\sqrt{d})| = |a^2 - db^2|$$\nThis expression provides the required closed-form in terms of $a, b,$ and $d$.\n\nThe problem further asks to analyze the case $d \\equiv 1 \\pmod{4}$ and relate this norm to a binary quadratic form with respect to an integral basis. The ring of integers $\\mathcal{O}_K$ has a different integral basis depending on $d \\pmod{4}$.\n\nCase 1: $d \\equiv 2 \\text{ or } 3 \\pmod{4}$.\nThe ring of integers is $\\mathcal{O}_K = \\mathbb{Z}[\\sqrt{d}]$, and a standard integral basis is $\\{1, \\sqrt{d}\\}$. An element $\\gamma \\in \\mathcal{O}_K$ is of the form $x \\cdot 1 + y \\cdot \\sqrt{d}$ with $x, y \\in \\mathbb{Z}$. The norm of such an element is $N_{K/\\mathbb{Q}}(\\gamma) = x^2 - dy^2$. This is a binary quadratic form in the coordinates $(x,y)$. For our element $\\alpha = a+b\\sqrt{d}$, its coordinates in this basis are $(a,b)$, so its norm is directly $a^2 - db^2$.\n\nCase 2: $d \\equiv 1 \\pmod{4}$.\nThe ring of integers is $\\mathcal{O}_K = \\mathbb{Z}\\left[\\frac{1+\\sqrt{d}}{2}\\right]$. A standard integral basis is $\\{1, \\omega\\}$, where $\\omega = \\frac{1+\\sqrt{d}}{2}$.\nAn arbitrary element $\\gamma \\in \\mathcal{O}_K$ has the form $\\gamma = x \\cdot 1 + y \\cdot \\omega$ for unique integers $x,y$. Let's compute its field norm in terms of these coordinates $(x,y)$. The conjugate of $\\omega$ is $\\bar{\\omega} = \\frac{1-\\sqrt{d}}{2}$.\n$$N_{K/\\mathbb{Q}}(\\gamma) = (x+y\\omega)(x+y\\bar{\\omega}) = x^2 + xy(\\omega+\\bar{\\omega}) + y^2(\\omega\\bar{\\omega})$$\nWe have $\\omega+\\bar{\\omega} = \\frac{1+\\sqrt{d}}{2} + \\frac{1-\\sqrt{d}}{2} = 1$, and $\\omega\\bar{\\omega} = \\left(\\frac{1}{2}\\right)^2 - \\left(\\frac{\\sqrt{d}}{2}\\right)^2 = \\frac{1-d}{4}$. Since $d \\equiv 1 \\pmod{4}$, $1-d$ is divisible by $4$, so $\\frac{1-d}{4}$ is an integer.\nThe norm is given by the binary quadratic form:\n$$N_{K/\\mathbb{Q}}(x+y\\omega) = Q(x,y) = x^2 + xy + \\frac{1-d}{4}y^2$$\nNow we relate this to our original element $\\alpha = a+b\\sqrt{d}$ with $a,b \\in \\mathbb{Z}$. We must find its coordinates $(x,y)$ in the basis $\\{1, \\omega\\}$.\n$$a+b\\sqrt{d} = x + y\\left(\\frac{1+\\sqrt{d}}{2}\\right) = \\left(x+\\frac{y}{2}\\right) + \\left(\\frac{y}{2}\\right)\\sqrt{d}$$\nEquating the coefficients of $\\sqrt{d}$ and the rational part:\n$\\frac{y}{2} = b \\implies y = 2b$\n$x+\\frac{y}{2} = a \\implies x+b=a \\implies x = a-b$\nSo the coordinates of $\\alpha=a+b\\sqrt{d}$ in the integral basis $\\{1, \\omega\\}$ are $(x,y) = (a-b, 2b)$. Since $a, b$ are integers, $x,y$ are also integers, which is consistent with $\\alpha \\in \\mathcal{O}_K$.\n\nLet's substitute these coordinates back into the quadratic form $Q(x,y)$:\n$$Q(a-b, 2b) = (a-b)^2 + (a-b)(2b) + \\frac{1-d}{4}(2b)^2$$\n$$= (a^2 - 2ab + b^2) + (2ab - 2b^2) + \\frac{1-d}{4}(4b^2)$$\n$$= a^2 - 2ab + b^2 + 2ab - 2b^2 + (1-d)b^2$$\n$$= a^2 - b^2 + b^2 - db^2$$\n$$= a^2 - db^2$$\nThis confirms that the field norm $N_{K/\\mathbb{Q}}(a+b\\sqrt{d})$ evaluates to $a^2-db^2$, regardless of the basis used for the calculation. The two expressions are identities. The expression $a^2 - db^2$ is the general form of the field norm for an element expressed in the $\\mathbb{Q}$-basis $\\{1, \\sqrt{d}\\}$ of $K$, while the quadratic form $Q(x,y)$ is specific to the integral basis of $\\mathcal{O}_K$ when $d\\equiv 1 \\pmod{4}$. The calculation shows their equivalence for any element $\\alpha \\in \\mathcal{O}_K$.\n\nIn conclusion, for any squarefree integer $d \\neq 0, 1$ and any integers $a, b$ (not both zero), the absolute norm of the principal ideal $(a+b\\sqrt{d})\\mathcal{O}_K$ is $|N_{K/\\mathbb{Q}}(a+b\\sqrt{d})|$. This yields a single expression valid in all cases.", "answer": "$$\\boxed{|a^2-db^2|}$$", "id": "3019799"}, {"introduction": "While the norm of a principal ideal is straightforward to compute, many rings of integers contain non-principal ideals, which are central to understanding the class group. This practice [@problem_id:3019783] challenges you to compute the norm of a famous non-principal ideal in $\\mathbb{Q}(\\sqrt{-5})$ by returning to the fundamental definition of the norm as an index: $N(\\mathfrak{a}) = [\\mathcal{O}_K : \\mathfrak{a}]$. By explicitly characterizing the ideal as a submodule and computing the size of the quotient ring, you will gain hands-on experience with the structure of ideals and verify the crucial multiplicative property of the norm.", "problem": "Let $K=\\mathbb{Q}(\\sqrt{-5})$ and let $\\mathcal{O}_{K}$ denote its ring of integers. Consider the nonprincipal ideal $\\mathfrak{a}=(2,\\,1+\\sqrt{-5})\\subset\\mathcal{O}_{K}$. Using only the foundational definitions that (i) the norm of a nonzero integral ideal $\\mathfrak{b}\\subset\\mathcal{O}_{K}$ is $N(\\mathfrak{b})=[\\mathcal{O}_{K}:\\mathfrak{b}]$, the additive index of $\\mathfrak{b}$ in $\\mathcal{O}_{K}$, and (ii) for a principal ideal $(\\alpha)$, $N((\\alpha))=|N_{K/\\mathbb{Q}}(\\alpha)|$, compute $N(\\mathfrak{a})$ and $N(\\mathfrak{a}^{2})$ by explicit index computations in $\\mathcal{O}_{K}$. Conclude from your computations whether $N(\\mathfrak{a}^{2})$ agrees with $N(\\mathfrak{a})^{2}$, thereby verifying multiplicativity in this case. Provide your final answer as the two values $N(\\mathfrak{a})$ and $N(\\mathfrak{a}^{2})$.", "solution": "The problem is well-posed and grounded in the established principles of algebraic number theory. All definitions and data provided are standard and consistent. We may therefore proceed with a full solution.\n\nThe quadratic field is $K = \\mathbb{Q}(\\sqrt{-5})$. The integer $d=-5$ is square-free and satisfies $-5 \\equiv 3 \\pmod{4}$. Therefore, the ring of integers of $K$ is $\\mathcal{O}_K = \\mathbb{Z}[\\sqrt{-5}]$. As a free $\\mathbb{Z}$-module, $\\mathcal{O}_K$ has the integral basis $\\{1, \\sqrt{-5}\\}$. Thus, any element of $\\mathcal{O}_K$ can be uniquely written as $a+b\\sqrt{-5}$ for integers $a, b \\in \\mathbb{Z}$.\n\nThe ideal in question is $\\mathfrak{a}=(2,\\,1+\\sqrt{-5})$. The problem requires us to compute the norms $N(\\mathfrak{a})$ and $N(\\mathfrak{a}^2)$ by explicitly computing the index of these ideals in $\\mathcal{O}_K$. The norm of a nonzero integral ideal $\\mathfrak{b}$ is defined as $N(\\mathfrak{b}) = [\\mathcal{O}_K:\\mathfrak{b}] = |\\mathcal{O}_K/\\mathfrak{b}|$.\n\nFirst, we compute $N(\\mathfrak{a})$. We must characterize the elements of the ideal $\\mathfrak{a}$. By definition, $\\mathfrak{a}$ consists of all $\\mathcal{O}_K$-linear combinations of its generators, $2$ and $1+\\sqrt{-5}$.\nAn element $\\gamma \\in \\mathfrak{a}$ can be written as:\n$$ \\gamma = \\alpha \\cdot 2 + \\beta \\cdot (1+\\sqrt{-5}) $$\nwhere $\\alpha, \\beta \\in \\mathcal{O}_K$. Let $\\alpha = a_1 + b_1\\sqrt{-5}$ and $\\beta = a_2 + b_2\\sqrt{-5}$ for $a_1,b_1,a_2,b_2 \\in \\mathbb{Z}$.\nA simpler characterization of $\\mathfrak{a}$ as a $\\mathbb{Z}$-module is more direct for computing the index. Let $x+y\\sqrt{-5}$ be an arbitrary element of $\\mathfrak{a}$. Then\n$$ x+y\\sqrt{-5} = (a_1+b_1\\sqrt{-5}) \\cdot 2 + (a_2+b_2\\sqrt{-5})(1+\\sqrt{-5}) $$\n$$ x+y\\sqrt{-5} = (2a_1) + (2b_1)\\sqrt{-5} + (a_2 - 5b_2) + (a_2+b_2)\\sqrt{-5} $$\n$$ x+y\\sqrt{-5} = (2a_1 + a_2 - 5b_2) + (2b_1 + a_2 + b_2)\\sqrt{-5} $$\nComparing the real and imaginary parts (coefficients of $1$ and $\\sqrt{-5}$), we have:\n$$ x = 2a_1 + a_2 - 5b_2 $$\n$$ y = 2b_1 + a_2 + b_2 $$\nConsider the difference $x-y$:\n$$ x-y = (2a_1 + a_2 - 5b_2) - (2b_1 + a_2 + b_2) = 2a_1 - 2b_1 - 6b_2 = 2(a_1 - b_1 - 3b_2) $$\nThis shows that for any element $x+y\\sqrt{-5} \\in \\mathfrak{a}$, the integer coefficients $x$ and $y$ must have the same parity, i.e., $x \\equiv y \\pmod{2}$.\n\nConversely, suppose $x, y \\in \\mathbb{Z}$ satisfy $x \\equiv y \\pmod{2}$. Then $x-y=2k$ for some integer $k$. We can write the element $x+y\\sqrt{-5}$ as:\n$$ x+y\\sqrt{-5} = (x-y) + y(1+\\sqrt{-5}) = 2k + y(1+\\sqrt{-5}) $$\nSince $2 \\in \\mathfrak{a}$ and $1+\\sqrt{-5} \\in \\mathfrak{a}$, any $\\mathcal{O}_K$-linear combination of them is in $\\mathfrak{a}$. In particular, the $\\mathbb{Z}$-linear combination $k \\cdot 2 + y \\cdot (1+\\sqrt{-5})$ is in $\\mathfrak{a}$. Thus, any element $x+y\\sqrt{-5}$ with $x \\equiv y \\pmod{2}$ is in $\\mathfrak{a}$.\nWe have thus characterized the ideal $\\mathfrak{a}$ as a subset of $\\mathcal{O}_K$:\n$$ \\mathfrak{a} = \\{ x+y\\sqrt{-5} \\in \\mathcal{O}_K \\mid x \\equiv y \\pmod{2} \\} $$\nWe can now compute the index $[\\mathcal{O}_K:\\mathfrak{a}]$. The quotient group $\\mathcal{O}_K/\\mathfrak{a}$ consists of cosets $(x+y\\sqrt{-5})+\\mathfrak{a}$. Two elements $x_1+y_1\\sqrt{-5}$ and $x_2+y_2\\sqrt{-5}$ are in the same coset if and only if their difference is in $\\mathfrak{a}$.\n$$ (x_1+y_1\\sqrt{-5}) - (x_2+y_2\\sqrt{-5}) = (x_1-x_2) + (y_1-y_2)\\sqrt{-5} \\in \\mathfrak{a} $$\nThis condition is equivalent to $(x_1-x_2) \\equiv (y_1-y_2) \\pmod{2}$, which can be rewritten as $x_1-y_1 \\equiv x_2-y_2 \\pmod{2}$. This means that a coset is uniquely determined by the value of $(x-y) \\pmod 2$.\nAn element $x+y\\sqrt{-5} \\in \\mathcal{O}_K$ can have $x-y$ be either even or odd.\nIf $x-y$ is even, then $x \\equiv y \\pmod 2$, which means $x+y\\sqrt{-5} \\in \\mathfrak{a}$. This is the identity coset, $\\mathfrak{a}$.\nIf $x-y$ is odd, this corresponds to another coset. For instance, the element $1 = 1+0\\sqrt{-5}$ has $1-0=1$, which is odd. Any other element $x'+y'\\sqrt{-5}$ with $x'-y'$ odd will be in the same coset as $1$, since $(x'-1)+y'\\sqrt{-5}$ will have coefficients satisfying $(x'-1)-y' \\equiv 0 \\pmod 2$.\nThere are exactly two distinct cosets: $\\mathfrak{a}$ and $1+\\mathfrak{a}$. The order of the quotient group is $2$.\nTherefore, $N(\\mathfrak{a}) = [\\mathcal{O}_K:\\mathfrak{a}] = 2$.\n\nNext, we compute $N(\\mathfrak{a}^2)$. First, we must identify the ideal $\\mathfrak{a}^2$.\n$$ \\mathfrak{a}^2 = (2, 1+\\sqrt{-5})(2, 1+\\sqrt{-5}) = (2\\cdot 2, 2(1+\\sqrt{-5}), (1+\\sqrt{-5})^2) $$\nThe generators are $4$, $2+2\\sqrt{-5}$, and $(1+\\sqrt{-5})^2 = 1+2\\sqrt{-5}-5 = -4+2\\sqrt{-5}$.\nSo, $\\mathfrak{a}^2 = (4, 2+2\\sqrt{-5}, -4+2\\sqrt{-5})$.\nLet's show that $\\mathfrak{a}^2$ is the principal ideal $(2)$.\nFirst, we show $\\mathfrak{a}^2 \\subseteq (2)$. Each generator of $\\mathfrak{a}^2$ is a multiple of $2$ in $\\mathcal{O}_K$:\n$4 = 2 \\cdot 2 \\in (2)$\n$2+2\\sqrt{-5} = 2(1+\\sqrt{-5}) \\in (2)$\n$-4+2\\sqrt{-5} = 2(-2+\\sqrt{-5}) \\in (2)$\nSince all generators of $\\mathfrak{a}^2$ lie in $(2)$, the ideal they generate must be contained in $(2)$, i.e., $\\mathfrak{a}^2 \\subseteq (2)$.\n\nNext, we show $(2) \\subseteq \\mathfrak{a}^2$. This requires showing that $2 \\in \\mathfrak{a}^2$. Since $\\mathfrak{a}^2$ is an ideal, it is closed under addition. The elements $4$ and $-4+2\\sqrt{-5}$ are in $\\mathfrak{a}^2$. However, we can use $\\mathbb{Z}$-linear combinations of the generators. The difference of two elements in an ideal is also in the ideal.\nFrom the generators of $\\mathfrak{a}^2$, we know $4 \\in \\mathfrak{a}^2$ and $2+2\\sqrt{-5} \\in \\mathfrak{a}^2$. Also $-4+2\\sqrt{-5} \\in \\mathfrak{a}^2$.\nConsider the element $6 = (1+\\sqrt{-5})(1-\\sqrt{-5}) = 1-(-5) \\in \\mathfrak{a}^2$. Let's prove $6 \\in \\mathfrak{a}^2$.\n$6 = (1+\\sqrt{-5})(1-\\sqrt{-5})$. $1+\\sqrt{-5} \\in \\mathfrak{a}$ and $1-\\sqrt{-5} = (1+\\sqrt{-5}) - 2\\sqrt{-5}$. We note $2\\sqrt{-5} = \\sqrt{-5} \\cdot 2 \\in \\mathfrak{a}$. So $1-\\sqrt{-5} \\in \\mathfrak{a}$. Thus $6 \\in \\mathfrak{a}^2$.\nAs $4 \\in \\mathfrak{a}^2$ and $6 \\in \\mathfrak{a}^2$, their difference $6-4=2$ must be in $\\mathfrak{a}^2$.\nSince $2 \\in \\mathfrak{a}^2$, and $\\mathfrak{a}^2$ is an ideal, any multiple of $2$ by an element of $\\mathcal{O}_K$ is also in $\\mathfrak{a}^2$. This means $(2) \\subseteq \\mathfrak{a}^2$.\nCombining the two inclusions, we conclude that $\\mathfrak{a}^2=(2)$.\n\nNow we compute $N(\\mathfrak{a}^2) = N((2))$ by index computation:\n$$ N((2)) = [\\mathcal{O}_K:(2)] = |\\mathcal{O}_K/2\\mathcal{O}_K| $$\nThe ideal $(2)$ is $2\\mathcal{O}_K = \\{ 2(x+y\\sqrt{-5}) \\mid x,y \\in \\mathbb{Z} \\} = \\{ 2x+2y\\sqrt{-5} \\mid x,y \\in \\mathbb{Z} \\}$.\nAn element $x_1+y_1\\sqrt{-5}$ is congruent to $x_2+y_2\\sqrt{-5}$ modulo $(2)$ if their difference is in $(2)$.\n$$ (x_1-x_2)+(y_1-y_2)\\sqrt{-5} \\in 2\\mathcal{O}_K $$\nThis holds if and only if $x_1-x_2$ and $y_1-y_2$ are both even, i.e., $x_1\\equiv x_2 \\pmod 2$ and $y_1\\equiv y_2 \\pmod 2$.\nA coset representative is determined by the pair of residues $(x \\pmod 2, y \\pmod 2)$. There are $2 \\times 2 = 4$ such pairs: $(0,0), (0,1), (1,0), (1,1)$.\nThese give four distinct cosets, with representatives $0, \\sqrt{-5}, 1, 1+\\sqrt{-5}$.\nThe size of the quotient group $\\mathcal{O}_K/(2)$ is $4$.\nHence, $N(\\mathfrak{a}^2) = 4$.\n\nTo conclude, we compare $N(\\mathfrak{a}^2)$ with $N(\\mathfrak{a})^2$.\nWe found $N(\\mathfrak{a}) = 2$ and $N(\\mathfrak{a}^2) = 4$.\nThus, $N(\\mathfrak{a})^2 = 2^2 = 4 = N(\\mathfrak{a}^2)$.\nThis verifies the multiplicative property of the ideal norm, $N(\\mathfrak{b}\\mathfrak{c})=N(\\mathfrak{b})N(\\mathfrak{c})$, for the specific case $\\mathfrak{b}=\\mathfrak{c}=\\mathfrak{a}$.\n\nThe problem asks for the two values $N(\\mathfrak{a})$ and $N(\\mathfrak{a}^{2})$.\n$N(\\mathfrak{a})=2$.\n$N(\\mathfrak{a}^2)=4$.", "answer": "$$\\boxed{\\begin{pmatrix} 2 & 4 \\end{pmatrix}}$$", "id": "3019783"}, {"introduction": "The concept of the norm can be powerfully generalized by viewing the ring of integers and its ideals as lattices in an $n$-dimensional space. From this geometric perspective, the norm of an ideal simply measures the scaling factor of the volume of its fundamental domain relative to that of $\\mathcal{O}_K$. This exercise [@problem_id:3019796] guides you to formalize this intuition by showing that the norm is the absolute value of the determinant of the change-of-basis matrix. This provides a robust and elegant algorithm for computing the norm of any integral or fractional ideal, bridging abstract algebraic definitions with concrete computational linear algebra.", "problem": "You are given a number field $K$ of degree $n$ over the rational numbers $\\mathbb{Q}$ and its ring of integers $\\mathcal{O}_K$. Let $\\{e_1,\\dots,e_n\\}$ be a fixed $\\mathbb{Z}$-basis of $\\mathcal{O}_K$. Consider a nonzero ideal or fractional ideal $\\mathfrak{a} \\subset K$ with a $\\mathbb{Z}$-basis $\\{v_1,\\dots,v_n\\}$ such that each $v_i$ is expressed as a $\\mathbb{Q}$-linear combination of the $e_j$:\n$$\nv_i \\;=\\; \\sum_{j=1}^n m_{ij}\\, e_j \\quad \\text{with } m_{ij} \\in \\mathbb{Q}.\n$$\nForm the matrix $M = (m_{ij}) \\in \\mathrm{Mat}_{n \\times n}(\\mathbb{Q})$ whose $i$-th row records the coordinates of $v_i$ in the basis $\\{e_j\\}$. Your task is to design and implement an algorithm that computes the ideal norm $N(\\mathfrak{a})$ from the matrix $M$ by interpreting $N(\\mathfrak{a})$ as the covolume ratio of lattices, i.e., as the absolute value of the determinant of the change-of-basis matrix from $\\mathcal{O}_K$ to $\\mathfrak{a}$.\n\nThe algorithm must be derived from the following fundamental base:\n\n- The definition of the ideal norm for a nonzero integral ideal $\\mathfrak{a} \\subset \\mathcal{O}_K$ is $N(\\mathfrak{a}) = \\lvert \\mathcal{O}_K / \\mathfrak{a} \\rvert$, which equals the index $[\\mathcal{O}_K : \\mathfrak{a}]$.\n- The norm extends multiplicatively to fractional ideals by the rule $N(\\mathfrak{a}) = N(\\alpha \\mathfrak{a}) / \\lvert N_{K/\\mathbb{Q}}(\\alpha) \\rvert$ for any $\\alpha \\in K^\\times$ such that $\\alpha \\mathfrak{a} \\subset \\mathcal{O}_K$ (the resulting value is independent of the choice of $\\alpha$).\n- For full-rank $\\mathbb{Z}$-lattices $L,L' \\subset \\mathbb{R}^n$ with bases related by a matrix $M \\in \\mathrm{GL}_n(\\mathbb{Q})$, the index $[L : L']$ for integral lattices equals the absolute value of the determinant $\\lvert \\det(M) \\rvert$, and more generally the covolume ratio $\\mathrm{covol}(L')/\\mathrm{covol}(L)$ equals $\\lvert \\det(M) \\rvert$.\n\nFrom these principles, conclude that for the matrix $M$ expressing the $\\mathbb{Z}$-basis of $\\mathfrak{a}$ in the $\\mathbb{Z}$-basis of $\\mathcal{O}_K$, one has\n$$\nN(\\mathfrak{a}) \\;=\\; \\lvert \\det(M) \\rvert,\n$$\nwith the understanding that if $\\mathfrak{a}$ is an integral ideal then $M$ has integer entries, and if $\\mathfrak{a}$ is a fractional ideal then $M$ may have rational entries, yielding a positive rational norm.\n\nYou must implement the algorithm to compute $\\lvert \\det(M) \\rvert$ exactly using rational arithmetic and report the value $N(\\mathfrak{a})$ as a number. If the value is an integer, output it as an integer; if it is a non-integer rational number, output it as a decimal (floating-point) number.\n\nTest Suite:\nCompute $N(\\mathfrak{a})$ for each of the following matrices $M$, where the ambient degree $n$ equals the matrix size. Each matrix represents the coordinates of a $\\mathbb{Z}$-basis of $\\mathfrak{a}$ in the fixed $\\mathbb{Z}$-basis of $\\mathcal{O}_K$.\n\n- Case $1$ (integral ideal, diagonal scaling in degree $n=2$): \n  $$\n  M = \\begin{pmatrix} 2 & 0 \\\\ 0 & 1 \\end{pmatrix}.\n  $$\n  Expected $N(\\mathfrak{a}) = \\lvert \\det(M) \\rvert = 2$.\n\n- Case $2$ (integral ideal, unimodular change with negative orientation in degree $n=2$):\n  $$\n  M = \\begin{pmatrix} 1 & 1 \\\\ 0 & -1 \\end{pmatrix}.\n  $$\n  Expected $N(\\mathfrak{a}) = \\lvert \\det(M) \\rvert = 1$.\n\n- Case $3$ (principal integral ideal $(d)$ in degree $n=3$ with $d=5$):\n  $$\n  M = 5 \\cdot I_3 = \\begin{pmatrix} 5 & 0 & 0 \\\\ 0 & 5 & 0 \\\\ 0 & 0 & 5 \\end{pmatrix}.\n  $$\n  Expected $N((5)) = \\lvert 5 \\rvert^3 = 125$.\n\n- Case $4$ (fractional ideal in degree $n=2$, rational diagonal matrix):\n  $$\n  M = \\begin{pmatrix} \\tfrac{1}{2} & 0 \\\\ 0 & \\tfrac{3}{2} \\end{pmatrix}.\n  $$\n  Expected $N(\\mathfrak{a}) = \\lvert \\det(M) \\rvert = \\tfrac{3}{4}$, which should be reported as the decimal $0.75$.\n\n- Case $5$ (fractional ideal in degree $n=3$, upper triangular with a negative diagonal entry):\n  $$\n  M = \\begin{pmatrix} \\tfrac{1}{2} & \\tfrac{1}{3} & 0 \\\\ 0 & 2 & \\tfrac{1}{2} \\\\ 0 & 0 & -3 \\end{pmatrix}.\n  $$\n  Expected $N(\\mathfrak{a}) = \\lvert \\det(M) \\rvert = \\lvert \\tfrac{1}{2} \\cdot 2 \\cdot (-3) \\rvert = 3$.\n\nFinal Output Format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, in the order of the test cases $1$ through $5$, for example $[2,1,125,0.75,3]$.", "solution": "The objective is to derive and implement an algorithm to compute the norm $N(\\mathfrak{a})$ of a nonzero ideal or fractional ideal $\\mathfrak{a}$ in a number field $K$. The computation is to be based on the change-of-basis matrix $M$ from a $\\mathbb{Z}$-basis of the ring of integers $\\mathcal{O}_K$ to a $\\mathbb{Z}$-basis of $\\mathfrak{a}$. The derivation will be founded upon the provided principles relating ideal norms to lattice indices and covolumes.\n\nLet $K$ be a number field of degree $n = [K:\\mathbb{Q}]$. Its ring of integers $\\mathcal{O}_K$ is a free $\\mathbb{Z}$-module of rank $n$. Let $\\{e_1, \\dots, e_n\\}$ be a fixed $\\mathbb{Z}$-basis for $\\mathcal{O}_K$. Any nonzero ideal (integral or fractional) $\\mathfrak{a}$ of $K$ is also a free $\\mathbb{Z}$-module of rank $n$. Let $\\{v_1, \\dots, v_n\\}$ be a $\\mathbb{Z}$-basis for $\\mathfrak{a}$. The relationship between these two bases is given by a matrix $M = (m_{ij}) \\in \\mathrm{GL}_n(\\mathbb{Q})$ such that $v_i = \\sum_{j=1}^n m_{ij} e_j$ for $i=1, \\dots, n$. Our goal is to prove that the norm of the ideal, $N(\\mathfrak{a})$, is given by the absolute value of the determinant of this matrix, i.e., $N(\\mathfrak{a}) = \\lvert \\det(M) \\rvert$.\n\nWe proceed by considering two cases: integral ideals and fractional ideals.\n\n**Case 1: Integral Ideals**\n\nLet $\\mathfrak{a}$ be a nonzero integral ideal, so $\\mathfrak{a} \\subseteq \\mathcal{O}_K$. As $\\mathfrak{a}$ is a submodule of $\\mathcal{O}_K$, its basis vectors $\\{v_i\\}$ must be expressible as $\\mathbb{Z}$-linear combinations of the basis vectors $\\{e_j\\}$ of $\\mathcal{O}_K$. This means the matrix $M=(m_{ij})$ has integer entries, i.e., $M \\in \\mathrm{Mat}_{n\\times n}(\\mathbb{Z})$.\n\nAccording to the first principle provided, the norm of an integral ideal $\\mathfrak{a}$ is defined as the size of the quotient ring, $N(\\mathfrak{a}) = \\lvert \\mathcal{O}_K / \\mathfrak{a} \\rvert$. Since both $\\mathcal{O}_K$ and $\\mathfrak{a}$ are free $\\mathbb{Z}$-modules of the same rank $n$, this size is equivalent to the index of $\\mathfrak{a}$ as a subgroup within the additive group of $\\mathcal{O}_K$, written as $[\\mathcal{O}_K : \\mathfrak{a}]$.\n\nWe can view $\\mathcal{O}_K$ and $\\mathfrak{a}$ as full-rank lattices in the $n$-dimensional space spanned by the basis $\\{e_j\\}$. The third principle states that for lattices $L = \\mathcal{O}_K$ and $L' = \\mathfrak{a}$ where the basis of $L'$ is obtained from the basis of $L$ via the matrix $M$, the index $[L:L']$ is given by $\\lvert \\det(M) \\rvert$. This is a standard result from the theory of modules over a principal ideal domain (like $\\mathbb{Z}$).\n\nCombining these principles:\n$$\nN(\\mathfrak{a}) = [\\mathcal{O}_K : \\mathfrak{a}] = \\lvert \\det(M) \\rvert.\n$$\nThis establishes the formula for integral ideals.\n\n**Case 2: Fractional Ideals**\n\nNow, let $\\mathfrak{a}$ be a nonzero fractional ideal. By definition, there exists a nonzero element $c \\in \\mathcal{O}_K$ such that $c\\mathfrak{a}$ is an integral ideal. We can always choose this element to be a positive integer, say $d \\in \\mathbb{Z}^+$, such that $\\mathfrak{b} = d\\mathfrak{a}$ is an integral ideal. The basis of $\\mathfrak{a}$ is $\\{v_1, \\dots, v_n\\}$, given by the matrix $M \\in \\mathrm{Mat}_{n \\times n}(\\mathbb{Q})$. Consequently, a basis for the integral ideal $\\mathfrak{b}$ is $\\{dv_1, \\dots, dv_n\\}$. The change-of-basis matrix from $\\{e_j\\}$ to $\\{dv_i\\}$ is therefore $dM$.\n\nThe second principle provides a rule for extending the norm to fractional ideals: $N(\\mathfrak{a}) = N(\\alpha \\mathfrak{a}) / \\lvert N_{K/\\mathbb{Q}}(\\alpha) \\rvert$ for any $\\alpha \\in K^\\times$ such that $\\alpha\\mathfrak{a}$ is an integral ideal. We choose $\\alpha = d \\in \\mathbb{Z}^+$. Then $\\mathfrak{b} = d\\mathfrak{a}$ is an integral ideal, and the formula gives:\n$$\nN(\\mathfrak{a}) = \\frac{N(\\mathfrak{b})}{\\lvert N_{K/\\mathbb{Q}}(d) \\rvert}.\n$$\nFrom Case 1, we can compute $N(\\mathfrak{b})$. The change-of-basis matrix for $\\mathfrak{b}$ is $dM$. Thus,\n$$\nN(\\mathfrak{b}) = \\lvert \\det(dM) \\rvert = \\lvert d^n \\det(M) \\rvert = d^n \\lvert \\det(M) \\rvert,\n$$\nsince $d$ is a positive integer.\n\nNext, we compute the field norm $N_{K/\\mathbb{Q}}(d)$. The element $d \\in \\mathbb{Z} \\subset K$ acts on $K$ by multiplication. In the basis $\\{e_1, \\dots, e_n\\}$, the map \"multiplication by $d$\" transforms each basis vector $e_j$ to $de_j$. The matrix representation of this linear transformation is the diagonal matrix $dI_n$, where $I_n$ is the $n \\times n$ identity matrix. The field norm is the determinant of this matrix:\n$$\nN_{K/\\mathbb{Q}}(d) = \\det(dI_n) = d^n.\n$$\nSubstituting these results back into the equation for $N(\\mathfrak{a})$:\n$$\nN(\\mathfrak{a}) = \\frac{N(\\mathfrak{b})}{\\lvert N_{K/\\mathbb{Q}}(d) \\rvert} = \\frac{d^n \\lvert \\det(M) \\rvert}{\\lvert d^n \\rvert} = \\lvert \\det(M) \\rvert.\n$$\nThis confirms that the formula $N(\\mathfrak{a}) = \\lvert \\det(M) \\rvert$ holds for fractional ideals as well.\n\n**Algorithmic Design**\n\nThe problem is now reduced to computing the absolute value of the determinant of a given $n \\times n$ matrix $M$ with rational entries. The phrase \"compute... exactly using rational arithmetic\" indicates that floating-point arithmetic, which can introduce precision errors, should be avoided in the calculation.\n\n1.  **Data Representation**: The entries of the matrix $M$ are rational numbers. To preserve exactness, we represent each entry $m_{ij}$ using Python's `fractions.Fraction` class, which is available in the standard library.\n\n2.  **Determinant Calculation**: We must compute the determinant of a matrix whose elements are `Fraction` objects. A standard and efficient algorithm for this is Gaussian elimination. The process involves transforming the matrix into an upper triangular form, whose determinant is simply the product of its diagonal entries.\n    - We create a mutable copy of the input matrix.\n    - We iterate through the columns from $k=0$ to $n-1$, using the element at $(k,k)$ as a pivot to eliminate all entries below it in the same column.\n    - If a pivot at $(k,k)$ is zero, we search for a non-zero element in the same column at a row $i > k$ and swap row $i$ with row $k$. Each row swap negates the determinant. If no non-zero pivot can be found, the determinant is zero.\n    - The row operation of adding a multiple of one row to another ($R_i \\leftarrow R_i - c R_k$) does not change the determinant's value.\n    - After the matrix is in upper triangular form, its determinant is the product of its diagonal elements, multiplied by $-1$ for each row swap performed.\n\n3.  **Final Result Formatting**: The calculated determinant will be a `Fraction` object. We take its absolute value.\n    - If the resulting fraction has a denominator of $1$, it represents an integer. We format it as such.\n    - Otherwise, it is a non-integer rational number, which we format as a floating-point decimal as requested.\n\nThis algorithm guarantees an exact result for any matrix with rational entries, thereby correctly computing the ideal norm $N(\\mathfrak{a})$.", "answer": "```python\nimport numpy as np\nfrom fractions import Fraction\n\ndef determinant_rational(matrix_of_fractions):\n    \"\"\"\n    Computes the determinant of a matrix with Fraction entries using\n    Gaussian elimination. This ensures exact rational arithmetic.\n    \"\"\"\n    n = len(matrix_of_fractions)\n    # Create a mutable copy of the matrix\n    A = [row[:] for row in matrix_of_fractions]\n    \n    sign = 1\n    \n    for k in range(n):\n        # Find a non-zero pivot in column k, starting from row k\n        pivot_row = k\n        while pivot_row < n and A[pivot_row][k] == 0:\n            pivot_row += 1\n        \n        if pivot_row == n:\n            # No pivot found in this column, matrix is singular\n            return Fraction(0)\n        \n        # Swap rows to move the pivot to the diagonal position (k, k)\n        if pivot_row != k:\n            A[k], A[pivot_row] = A[pivot_row], A[k]\n            sign *= -1\n            \n        pivot_element = A[k][k]\n        \n        # Use the pivot to eliminate all entries below it in the same column\n        for i in range(k + 1, n):\n            if A[i][k] == 0:\n                continue\n            \n            # The factor is chosen to make A[i][k] zero\n            factor = A[i][k] / pivot_element\n            # Perform the row operation: R_i <- R_i - factor * R_k\n            for j in range(k, n):\n                A[i][j] -= factor * A[k][j]\n\n    # The determinant of the resulting upper triangular matrix is the product\n    # of its diagonal elements.\n    det = Fraction(sign)\n    for i in range(n):\n        det *= A[i][i]\n        \n    return det\n\ndef solve():\n    \"\"\"\n    Main function to solve the problem for the given test suite.\n    \"\"\"\n    # Define test cases where matrix entries are num/den pairs.\n    test_cases_raw = [\n        # Case 1: M = [[2, 0], [0, 1]]\n        [[(2, 1), (0, 1)],\n         [(0, 1), (1, 1)]],\n        \n        # Case 2: M = [[1, 1], [0, -1]]\n        [[(1, 1), (1, 1)],\n         [(0, 1), (-1, 1)]],\n        \n        # Case 3: M = 5 * I_3\n        [[(5, 1), (0, 1), (0, 1)],\n         [(0, 1), (5, 1), (0, 1)],\n         [(0, 1), (0, 1), (5, 1)]],\n        \n        # Case 4: M = [[1/2, 0], [0, 3/2]]\n        [[(1, 2), (0, 1)],\n         [(0, 1), (3, 2)]],\n        \n        # Case 5: M is upper triangular\n        [[(1, 2), (1, 3), (0, 1)],\n         [(0, 1), (2, 1), (1, 2)],\n         [(0, 1), (0, 1), (-3, 1)]]\n    ]\n\n    # Convert raw test cases into matrices of Fraction objects\n    test_cases = []\n    for raw_matrix in test_cases_raw:\n        matrix = [[Fraction(num, den) for num, den in raw_row] for raw_row in raw_matrix]\n        test_cases.append(matrix)\n\n    results = []\n    for M in test_cases:\n        # The norm N(a) is the absolute value of the determinant of M.\n        det = determinant_rational(M)\n        norm = abs(det)\n        \n        # Format the result as an integer or a float based on its value.\n        if norm.denominator == 1:\n            result = int(norm.numerator)\n        else:\n            result = float(norm)\n        results.append(result)\n\n    # Print the final results in the specified format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "3019796"}]}
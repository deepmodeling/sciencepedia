{"hands_on_practices": [{"introduction": "Understanding first-order logic begins with mastering the mechanics of Tarski's definition of truth. This exercise grounds this abstract definition in a concrete, hands-on task by having you evaluate atomic formulas within a small, finite structure. By systematically enumerating all variable assignments, you will build a solid intuition for how the interpretations of symbols and assignments combine to determine truth values in a given model. [@problem_id:2973056]", "problem": "Consider a finite first-order signature and a concrete finite structure interpreted over it. Let the signature be $\\mathcal{L} = \\{c, d, f^{1}, g^{2}, P^{1}, R^{2}, =\\}$, consisting of two constant symbols $c$ and $d$, one unary function symbol $f$, one binary function symbol $g$, one unary predicate symbol $P$, one binary predicate symbol $R$, and equality. Let the $\\mathcal{L}$-structure $\\mathcal{A}$ have universe $A = \\{0,1,2,3\\}$, and interpret the nonlogical symbols as follows:\n- $c^{\\mathcal{A}} = 1$ and $d^{\\mathcal{A}} = 3$.\n- $f^{\\mathcal{A}}(x) = 2x \\bmod 4$ for $x \\in A$.\n- $g^{\\mathcal{A}}(x,y) = x + y \\bmod 4$ for $(x,y) \\in A^{2}$.\n- $P^{\\mathcal{A}} = \\{0,2\\}$.\n- $R^{\\mathcal{A}} = \\{(x,y) \\in A^{2} \\mid x \\equiv 2y \\pmod{4}\\}$.\n\nWork with the variable set $V = \\{x,y\\}$. For each atomic formula below, evaluate its truth value under every assignment of its free variables, by explicitly enumerating all assignments to those variables up to the relevant arities. The list of atomic formulas is:\n- $P(x)$,\n- $P(y)$,\n- $P(f(x))$,\n- $P\\big(g(x,y)\\big)$,\n- $R(x,y)$,\n- $R\\big(f(x),y\\big)$,\n- $R\\big(x,g(x,y)\\big)$,\n- $x = y$,\n- $f(x) = y$,\n- $g(x,y) = d$,\n- $g\\big(f(x),y\\big) = c$,\n- $P(c)$.\n\nFor each atomic formula, count the number of assignments to its free variables that make it true in $\\mathcal{A}$. For formulas with two free variables, enumerate all $4 \\times 4$ assignments in $A^{2}$; for formulas with one free variable, enumerate all $4$ assignments in $A$; for the ground formula $P(c)$ with no free variables, view its evaluation under the empty assignment as either true or false. Let $N$ denote the total number of satisfying assignments aggregated over all the atomic formulas listed above. Compute $N$ as an exact integer. Express your final answer as an integer with no units.", "solution": "The problem statement has been validated and is deemed a well-posed and self-contained exercise in first-order logic. It is free of scientific, logical, or factual flaws. All necessary components of the signature $\\mathcal{L}$ and the $\\mathcal{L}$-structure $\\mathcal{A}$ are explicitly defined. The task is to evaluate the truth of a list of atomic formulas under all possible assignments, which is a standard procedure in model theory. We shall proceed with the solution.\n\nThe problem specifies a first-order signature $\\mathcal{L} = \\{c, d, f^{1}, g^{2}, P^{1}, R^{2}, =\\}$ and an $\\mathcal{L}$-structure $\\mathcal{A}$ with universe $A = \\{0, 1, 2, 3\\}$. The interpretations are:\n- $c^{\\mathcal{A}} = 1$\n- $d^{\\mathcal{A}} = 3$\n- $f^{\\mathcal{A}}(x) = 2x \\bmod 4$\n- $g^{\\mathcal{A}}(x,y) = x + y \\bmod 4$\n- $P^{\\mathcal{A}} = \\{0, 2\\}$\n- $R^{\\mathcal{A}} = \\{(x,y) \\in A^{2} \\mid x \\equiv 2y \\pmod{4}\\}$\n\nTo facilitate the evaluation, we first compute the explicit interpretations of the functions and predicates over the universe $A$.\n\nThe unary function $f^{\\mathcal{A}}(x)$:\n- $f^{\\mathcal{A}}(0) = 2(0) \\bmod 4 = 0$\n- $f^{\\mathcal{A}}(1) = 2(1) \\bmod 4 = 2$\n- $f^{\\mathcal{A}}(2) = 2(2) \\bmod 4 = 4 \\bmod 4 = 0$\n- $f^{\\mathcal{A}}(3) = 2(3) \\bmod 4 = 6 \\bmod 4 = 2$\n\nThe binary function $g^{\\mathcal{A}}(x,y)$ is addition modulo $4$:\n- This can be represented by the following table, where rows correspond to $y$ and columns to $x$:\n$$\n\\begin{array}{c|cccc}\ng^{\\mathcal{A}}(x,y)  x=0  x=1  x=2  x=3 \\\\\n\\hline\ny=0  0  1  2  3 \\\\\ny=1  1  2  3  0 \\\\\ny=2  2  3  0  1 \\\\\ny=3  3  0  1  2\n\\end{array}\n$$\n\nThe unary predicate $P^{\\mathcal{A}}$ is given as the set $\\{0, 2\\}$. An element $a \\in A$ satisfies $P$ if and only if $a \\in \\{0, 2\\}$.\n\nThe binary predicate $R^{\\mathcal{A}}$ is the set of pairs $(x,y) \\in A^2$ such that $x \\equiv 2y \\pmod{4}$. We identify these pairs:\n- If $y=0$, $2y=0$. The condition is $x \\equiv 0 \\pmod{4}$, so $x=0$. Pair: $(0,0)$.\n- If $y=1$, $2y=2$. The condition is $x \\equiv 2 \\pmod{4}$, so $x=2$. Pair: $(2,1)$.\n- If $y=2$, $2y=4 \\equiv 0$. The condition is $x \\equiv 0 \\pmod{4}$, so $x=0$. Pair: $(0,2)$.\n- If $y=3$, $2y=6 \\equiv 2$. The condition is $x \\equiv 2 \\pmod{4}$, so $x=2$. Pair: $(2,3)$.\nThus, $R^{\\mathcal{A}} = \\{(0,0), (2,1), (0,2), (2,3)\\}$.\n\nWe now evaluate each atomic formula and count the number of satisfying assignments. Let $N_i$ be the count for the $i$-th formula.\n\n1.  $P(x)$: The free variable is $x$. We need to find the number of $x \\in A$ such that $x \\in P^{\\mathcal{A}}$. Since $P^{\\mathcal{A}} = \\{0, 2\\}$, the satisfying assignments are $x=0$ and $x=2$. Thus, $N_1=2$.\n\n2.  $P(y)$: The free variable is $y$. Similar to the previous case, the satisfying assignments are $y=0$ and $y=2$. Thus, $N_2=2$.\n\n3.  $P(f(x))$: The free variable is $x$. We need to find $x \\in A$ such that $f^{\\mathcal{A}}(x) \\in P^{\\mathcal{A}}$.\n    - For $x=0$, $f^{\\mathcal{A}}(0) = 0 \\in P^{\\mathcal{A}}$. True.\n    - For $x=1$, $f^{\\mathcal{A}}(1) = 2 \\in P^{\\mathcal{A}}$. True.\n    - For $x=2$, $f^{\\mathcal{A}}(2) = 0 \\in P^{\\mathcal{A}}$. True.\n    - For $x=3$, $f^{\\mathcal{A}}(3) = 2 \\in P^{\\mathcal{A}}$. True.\n    All $4$ assignments for $x$ make the formula true. Thus, $N_3=4$.\n\n4.  $P(g(x,y))$: The free variables are $x,y$. We need to find the number of pairs $(x,y) \\in A^2$ such that $g^{\\mathcal{A}}(x,y) \\in P^{\\mathcal{A}}$, i.e., $g^{\\mathcal{A}}(x,y)$ is $0$ or $2$. Consulting the table for $g^{\\mathcal{A}}(x,y)$, we find $8$ such pairs: $(0,0), (2,0), (1,1), (3,1), (0,2), (2,2), (1,3), (3,3)$. Thus, $N_4=8$.\n\n5.  $R(x,y)$: The free variables are $x,y$. We need to find the number of pairs $(x,y) \\in A^2$ that are in the set $R^{\\mathcal{A}}$. We have already determined that $R^{\\mathcal{A}} = \\{(0,0), (2,1), (0,2), (2,3)\\}$. There are $4$ such pairs. Thus, $N_5=4$.\n\n6.  $R(f(x),y)$: The free variables are $x,y$. We need pairs $(x,y)$ such that $(f^{\\mathcal{A}}(x), y) \\in R^{\\mathcal{A}}$.\n    - If $x=0$ or $x=2$, $f^{\\mathcal{A}}(x)=0$. We need $(0,y) \\in R^{\\mathcal{A}}$, which holds for $y=0$ and $y=2$. This gives $4$ satisfying assignments: $(0,0), (0,2), (2,0), (2,2)$.\n    - If $x=1$ or $x=3$, $f^{\\mathcal{A}}(x)=2$. We need $(2,y) \\in R^{\\mathcal{A}}$, which holds for $y=1$ and $y=3$. This gives $4$ satisfying assignments: $(1,1), (1,3), (3,1), (3,3)$.\n    In total, there are $4+4=8$ satisfying assignments. Thus, $N_6=8$.\n\n7.  $R(x,g(x,y))$: The free variables are $x,y$. The condition is $(x, g^{\\mathcal{A}}(x,y)) \\in R^{\\mathcal{A}}$. This means $x \\equiv 2 \\cdot g^{\\mathcal{A}}(x,y) \\pmod{4}$. Substituting $g^{\\mathcal{A}}(x,y) = (x+y) \\pmod 4$, the condition becomes $x \\equiv 2(x+y) \\pmod{4}$, which simplifies to $x \\equiv 2x+2y \\pmod{4}$, then to $0 \\equiv x+2y \\pmod 4$, and finally to $x \\equiv -2y \\equiv 2y \\pmod{4}$. This is precisely the condition for $R(x,y)$ to be true. Therefore, the set of satisfying assignments is identical to that of $R(x,y)$. Thus, $N_7=4$.\n\n8.  $x = y$: The free variables are $x,y$. We need pairs $(x,y) \\in A^2$ where the components are equal. These are $(0,0), (1,1), (2,2), (3,3)$. There are $4$ such assignments. Thus, $N_8=4$.\n\n9.  $f(x) = y$: The free variables are $x,y$. We list the pairs $(x,y)$ that satisfy this equation, using our computed values for $f^{\\mathcal{A}}$:\n    - $f^{\\mathcal{A}}(0)=0 \\implies (x,y)=(0,0)$\n    - $f^{\\mathcal{A}}(1)=2 \\implies (x,y)=(1,2)$\n    - $f^{\\mathcal{A}}(2)=0 \\implies (x,y)=(2,0)$\n    - $f^{\\mathcal{A}}(3)=2 \\implies (x,y)=(3,2)$\n    There are $4$ satisfying assignments. Thus, $N_9=4$.\n\n10. $g(x,y) = d$: The free variables are $x,y$. We have $d^{\\mathcal{A}}=3$. The condition is $g^{\\mathcal{A}}(x,y)=3$, or $(x+y) \\pmod 4 = 3$. We inspect the table for $g^{\\mathcal{A}}(x,y)$ and find the pairs where the value is $3$: $(3,0), (2,1), (1,2), (0,3)$. There are $4$ such assignments. Thus, $N_{10}=4$.\n\n11. $g(f(x),y) = c$: The free variables are $x,y$. We have $c^{\\mathcal{A}}=1$. The condition is $g^{\\mathcal{A}}(f^{\\mathcal{A}}(x), y) = 1$, or $(f^{\\mathcal{A}}(x)+y) \\pmod 4 = 1$.\n    - For $x=0$ or $x=2$, $f^{\\mathcal{A}}(x)=0$. We need $(0+y) \\pmod 4 = 1 \\implies y=1$. This gives assignments $(0,1)$ and $(2,1)$.\n    - For $x=1$ or $x=3$, $f^{\\mathcal{A}}(x)=2$. We need $(2+y) \\pmod 4 = 1 \\implies y=3$. This gives assignments $(1,3)$ and $(3,3)$.\n    In total, there are $2+2=4$ satisfying assignments. Thus, $N_{11}=4$.\n\n12. $P(c)$: This is a ground formula (a sentence) with no free variables. Its truth is evaluated under the empty assignment. The formula is true if $c^{\\mathcal{A}} \\in P^{\\mathcal{A}}$. We have $c^{\\mathcal{A}}=1$ and $P^{\\mathcal{A}}=\\{0,2\\}$. Since $1 \\notin \\{0,2\\}$, the formula is false. The number of satisfying assignments is $0$. Thus, $N_{12}=0$.\n\nFinally, we compute the total number of satisfying assignments, $N$, by summing the individual counts:\n$N = N_1 + N_2 + N_3 + N_4 + N_5 + N_6 + N_7 + N_8 + N_9 + N_{10} + N_{11} + N_{12}$\n$N = 2 + 2 + 4 + 8 + 4 + 8 + 4 + 4 + 4 + 4 + 4 + 0$\n$N = 48$", "answer": "$$\\boxed{48}$$", "id": "2973056"}, {"introduction": "Model theory is not just about individual structures, but also about the relationships between them. This practice explores the crucial difference between a substructure, which preserves basic operations, and an elementary substructure, which preserves all first-order truths. Using the familiar structures of the rational and real numbers, you will construct a sentence that witnesses this distinction and apply the Tarski-Vaught criterion to formalize the argument. [@problem_id:2973055]", "problem": "Let $\\mathcal{L}$ be the language of ordered rings $\\{0,1,+,\\cdot,-,\\}$. Consider the $\\mathcal{L}$-structures $\\mathcal{R}=\\langle \\mathbb{R};0,1,+,\\cdot,-,\\rangle$ and $\\mathcal{Q}=\\langle \\mathbb{Q};0,1,+,\\cdot,-,\\rangle$ with the usual interpretations. Starting only from the core definitions of first-order structure, substructure, elementary substructure, and the Tarski–Vaught criterion, do the following:\n\n1. Prove that $\\mathcal{Q}$ is a substructure of $\\mathcal{R}$.\n\n2. Construct an explicit parameter-free $\\mathcal{L}$-sentence $\\varphi$ that is true in $\\mathcal{R}$ but false in $\\mathcal{Q}$, and explain why this $\\varphi$ witnesses the failure of the Tarski–Vaught criterion for the inclusion $\\mathcal{Q}\\subseteq \\mathcal{R}$, thereby showing that $\\mathcal{Q}$ is not an elementary substructure of $\\mathcal{R}$.\n\n3. For sentences in $\\mathcal{L}$ with no free variables and no parameters, define the quantifier rank $qr(\\cdot)$ in the standard way: atomic formulas have quantifier rank $0$, Boolean connectives do not increase quantifier rank, and each quantifier increases quantifier rank by $1$. Determine the minimal possible value of $qr(\\psi)$ among all parameter-free $\\mathcal{L}$-sentences $\\psi$ such that $\\mathcal{R}\\models \\psi$ and $\\mathcal{Q}\\not\\models \\psi$. Your final answer must be a single exact number.", "solution": "Let $\\mathcal{L} = \\{0, 1, +, \\cdot, -, \\}$ be the language of ordered rings, where $0$ and $1$ are constant symbols, $+$ and $\\cdot$ are binary function symbols, $-$ is a unary function symbol (negation), and $$ is a binary relation symbol. The structures are $\\mathcal{R}=\\langle \\mathbb{R};0,1,+,\\cdot,-,\\rangle$ and $\\mathcal{Q}=\\langle \\mathbb{Q};0,1,+,\\cdot,-,\\rangle$ with their standard interpretations.\n\n**1. Prove that $\\mathcal{Q}$ is a substructure of $\\mathcal{R}$.**\n\nFor $\\mathcal{Q}$ to be a substructure of $\\mathcal{R}$ (denoted $\\mathcal{Q} \\subseteq \\mathcal{R}$), four conditions must be met:\ni. The universe of $\\mathcal{Q}$ must be a subset of the universe of $\\mathcal{R}$.\nThe universe of $\\mathcal{Q}$ is the set of rational numbers, $\\mathbb{Q}$. The universe of $\\mathcal{R}$ is the set of real numbers, $\\mathbb{R}$. It is a fundamental fact of mathematics that $\\mathbb{Q} \\subseteq \\mathbb{R}$. This condition holds.\n\nii. For every constant symbol $c \\in \\mathcal{L}$, its interpretation in $\\mathcal{Q}$ must be the same as in $\\mathcal{R}$, i.e., $c^{\\mathcal{Q}} = c^{\\mathcal{R}}$.\nThe constant symbols are $0$ and $1$. Their interpretations are the real numbers $0$ and $1$ in both structures. Since $0 \\in \\mathbb{Q}$ and $1 \\in \\mathbb{Q}$, we have $0^{\\mathcal{Q}} = 0 = 0^{\\mathcal{R}}$ and $1^{\\mathcal{Q}} = 1 = 1^{\\mathcal{R}}$. This condition holds.\n\niii. For every $n$-ary function symbol $f \\in \\mathcal{L}$ and all elements $a_1, \\dots, a_n \\in \\mathbb{Q}$, the interpretation of $f$ in $\\mathcal{Q}$ must be the restriction of the interpretation of $f$ in $\\mathcal{R}$ to $\\mathbb{Q}^n$. That is, $f^{\\mathcal{Q}}(a_1, \\dots, a_n) = f^{\\mathcal{R}}(a_1, \\dots, a_n)$.\nThe function symbols are $+, \\cdot, -$.\n- For addition ($+$): For any $a, b \\in \\mathbb{Q}$, their sum $a+b$ is also in $\\mathbb{Q}$. The operation of addition on $\\mathbb{Q}$ is the same as the operation of addition on $\\mathbb{R}$ restricted to elements of $\\mathbb{Q}$. So, $+^{\\mathcal{Q}}(a,b) = a+b = +^{\\mathcal{R}}(a,b)$.\n- For multiplication ($\\cdot$): For any $a, b \\in \\mathbb{Q}$, their product $a \\cdot b$ is also in $\\mathbb{Q}$. The operation of multiplication on $\\mathbb{Q}$ is the restriction of multiplication on $\\mathbb{R}$. So, $\\cdot^{\\mathcal{Q}}(a,b) = a \\cdot b = \\cdot^{\\mathcal{R}}(a,b)$.\n- For negation ($-$): For any $a \\in \\mathbb{Q}$, its additive inverse $-a$ is also in $\\mathbb{Q}$. The unary negation operation on $\\mathbb{Q}$ is the restriction of negation on $\\mathbb{R}$. So, $-^{\\mathcal{Q}}(a) = -a = -^{\\mathcal{R}}(a)$.\nThis condition holds because $\\mathbb{Q}$ is a subfield of $\\mathbb{R}$, which means it is closed under the field operations, and these operations are the same as those in $\\mathbb{R}$.\n\niv. For every $n$-ary relation symbol $R \\in \\mathcal{L}$ and all elements $a_1, \\dots, a_n \\in \\mathbb{Q}$, the relation $R^{\\mathcal{Q}}(a_1, \\dots, a_n)$ must hold if and only if $R^{\\mathcal{R}}(a_1, \\dots, a_n)$ holds.\nThe only relation symbol is $$. For any $a, b \\in \\mathbb{Q}$, the statement $a  b$ is true in $\\mathbb{Q}$ if and only if it is true in $\\mathbb{R}$. The standard ordering on the rationals is the restriction of the standard ordering on the reals. Thus, $^{\\mathcal{Q}} = ^{\\mathcal{R}} \\cap (\\mathbb{Q} \\times \\mathbb{Q})$. This condition holds.\n\nSince all four conditions are satisfied, $\\mathcal{Q}$ is a substructure of $\\mathcal{R}$.\n\n**2. Construct a sentence $\\varphi$ separating $\\mathcal{R}$ and $\\mathcal{Q}$ and relate it to the Tarski–Vaught criterion.**\n\nThe primary difference between $\\mathbb{R}$ and $\\mathbb{Q}$ that is expressible in first-order logic is the existence of solutions to certain polynomial equations. For example, the number $\\sqrt{2}$ exists in $\\mathbb{R}$ but not in $\\mathbb{Q}$. We can express the existence of $\\sqrt{2}$ with an $\\mathcal{L}$-sentence. The number $2$ can be written as $1+1$.\n\nLet the sentence $\\varphi$ be:\n$$ \\varphi \\equiv \\exists x (x \\cdot x = 1+1) $$\n- In the structure $\\mathcal{R}$: The sentence $\\varphi$ states that there exists a real number $x$ such that $x^2 = 2$. This is true, as we can choose $x = \\sqrt{2}$ or $x = -\\sqrt{2}$, both of which are elements of $\\mathbb{R}$. Thus, $\\mathcal{R} \\models \\varphi$.\n- In the structure $\\mathcal{Q}$: The sentence $\\varphi$ states that there exists a rational number $x$ such that $x^2 = 2$. This is false. A classic proof shows that $\\sqrt{2}$ is an irrational number. Thus, $\\mathcal{Q} \\not\\models \\varphi$.\n\nSince we have found a sentence $\\varphi$ for which $\\mathcal{R} \\models \\varphi$ but $\\mathcal{Q} \\not\\models \\varphi$, the structures are not elementarily equivalent. A necessary condition for $\\mathcal{Q}$ to be an elementary substructure of $\\mathcal{R}$ (denoted $\\mathcal{Q} \\preceq \\mathcal{R}$) is that they are elementarily equivalent. Therefore, $\\mathcal{Q}$ is not an elementary substructure of $\\mathcal{R}$.\n\nNow, we connect this to the Tarski–Vaught criterion. The criterion states that a substructure $\\mathcal{N} \\subseteq \\mathcal{M}$ is an elementary substructure ($\\mathcal{N} \\preceq \\mathcal{M}$) if and only if for every $\\mathcal{L}$-formula $\\psi(y, x_1, \\dots, x_k)$ with free variables shown, and for every choice of parameters $a_1, \\dots, a_k$ from the universe of $\\mathcal{N}$, if there is a witness $b$ in the universe of $\\mathcal{M}$ such that $\\mathcal{M} \\models \\psi(b, a_1, \\dots, a_k)$, then there must exist a witness $c$ in the universe of $\\mathcal{N}$ such that $\\mathcal{N} \\models \\psi(c, a_1, \\dots, a_k)$ (which is equivalent to $\\mathcal{M} \\models \\psi(c, a_1, \\dots, a_k)$ since $\\mathcal{N}$ is a substructure).\n\nLet's apply this criterion to our situation.\n- Let $\\mathcal{M} = \\mathcal{R}$ and $\\mathcal{N} = \\mathcal{Q}$.\n- Consider the formula $\\psi(x) \\equiv (x \\cdot x = 1+1)$. This formula has one free variable, $x$, and no parameters. So the list $(a_1, \\dots, a_k)$ is empty.\n- The premise of the Tarski–Vaught criterion is: is there an element $b \\in \\mathbb{R}$ such that $\\mathcal{R} \\models \\psi(b)$?\n- Yes, as shown before, $b = \\sqrt{2}$ is an element of $\\mathbb{R}$ and $\\mathcal{R} \\models (\\sqrt{2} \\cdot \\sqrt{2} = 1+1)$. The premise is satisfied.\n- The conclusion required by the criterion is: there must exist an element $c \\in \\mathbb{Q}$ such that $\\mathcal{Q} \\models \\psi(c)$, or equivalently, $\\mathcal{R} \\models \\psi(c)$.\n- This conclusion means there must be a rational number $c$ such that $c^2=2$. As established, no such rational number exists.\n- Therefore, the Tarski–Vaught criterion fails for the formula $\\psi(x) = (x \\cdot x = 1+1)$. This failure proves that $\\mathcal{Q}$ is not an elementary substructure of $\\mathcal{R}$. The sentence $\\varphi = \\exists x \\psi(x)$ is precisely the statement that is true in $\\mathcal{R}$ but false in $\\mathcal{Q}$, directly capturing this failure.\n\n**3. Determine the minimal quantifier rank of a separating sentence.**\n\nLet $\\psi$ be a parameter-free $\\mathcal{L}$-sentence such that $\\mathcal{R} \\models \\psi$ and $\\mathcal{Q} \\not\\models \\psi$. We want to find the minimum possible value of $qr(\\psi)$.\n\nFirst, consider the sentence $\\varphi$ from Part 2: $\\varphi \\equiv \\exists x (x \\cdot x = 1+1)$.\n- The subformula $\\chi \\equiv (x \\cdot x = 1+1)$ is an atomic formula. Atomic formulas are formed by equating two terms or by applying a relation symbol to terms. Here, $x \\cdot x$ and $1+1$ are valid terms, and $=$ is the equality relation.\n- By definition, the quantifier rank of an atomic formula is $0$. So, $qr(\\chi) = 0$.\n- The sentence $\\varphi$ is formed by applying one existential quantifier to $\\chi$.\n- By definition, $qr(\\varphi) = qr(\\exists x \\chi) = qr(\\chi) + 1 = 0 + 1 = 1$.\n- Since we have found a sentence of quantifier rank $1$ that separates $\\mathcal{R}$ and $\\mathcal{Q}$, the minimal rank must be less than or equal to $1$.\n\nNext, let's determine if the minimal rank can be $0$.\n- A sentence with quantifier rank $0$ is a quantifier-free sentence. Since it has no free variables, it must be a Boolean combination (using $\\land, \\lor, \\neg$) of atomic sentences.\n- An atomic sentence is an atomic formula with no variables. It must be of the form $t_1 = t_2$ or $t_1  t_2$, where $t_1$ and $t_2$ are variable-free terms.\n- A variable-free term in $\\mathcal{L}$ is constructed from the constant symbols $0$ and $1$ and the function symbols $+, \\cdot, -$. For example, $1+1$, $(1+1) \\cdot (1+1)$, and $-(1)$ are such terms.\n- Any variable-free term $t$ in $\\mathcal{L}$ evaluates to a specific integer. Let's denote the value of term $t$ as $v(t) \\in \\mathbb{Z}$.\n- The interpretation of $t$ in $\\mathcal{Q}$, denoted $t^{\\mathcal{Q}}$, is this integer $v(t)$.\n- The interpretation of $t$ in $\\mathcal{R}$, denoted $t^{\\mathcal{R}}$, is also the same integer $v(t)$. Since $\\mathbb{Z} \\subseteq \\mathbb{Q} \\subseteq \\mathbb{R}$, this value is present in both universes and is identical.\n- Now consider an atomic sentence $t_1=t_2$.\n  - $\\mathcal{Q} \\models (t_1=t_2)$ if and only if $t_1^{\\mathcal{Q}} = t_2^{\\mathcal{Q}}$, which means $v(t_1) = v(t_2)$.\n  - $\\mathcal{R} \\models (t_1=t_2)$ if and only if $t_1^{\\mathcal{R}} = t_2^{\\mathcal{R}}$, which means $v(t_1) = v(t_2)$.\n  - Thus, $\\mathcal{Q} \\models (t_1=t_2) \\iff \\mathcal{R} \\models (t_1=t_2)$.\n- Similarly, for an atomic sentence $t_1  t_2$:\n  - $\\mathcal{Q} \\models (t_1  t_2) \\iff v(t_1)  v(t_2)$.\n  - $\\mathcal{R} \\models (t_1  t_2) \\iff v(t_1)  v(t_2)$.\n  - Thus, $\\mathcal{Q} \\models (t_1  t_2) \\iff \\mathcal{R} \\models (t_1  t_2)$.\n- Every atomic sentence has the same truth value in $\\mathcal{Q}$ and $\\mathcal{R}$. Since the truth value of a Boolean combination of sentences is determined by the truth values of its components, any quantifier-free sentence (rank $0$) must have the same truth value in $\\mathcal{Q}$ and $\\mathcal{R}$.\n- Therefore, no sentence of quantifier rank $0$ can distinguish between $\\mathcal{R}$ and $\\mathcal{Q}$.\n\nThe minimal quantifier rank must be greater than $0$. Since we have found a separating sentence with rank $1$, the minimal possible value for the quantifier rank is $1$.", "answer": "$$\\boxed{1}$$", "id": "2973055"}, {"introduction": "A deep question in model theory is: what can be 'said' about a structure using only its given language? This exercise delves into the concept of definability, revealing a profound connection between a structure's internal symmetries (automorphisms) and the subsets of its domain that can be described by a formula. You will calculate the automorphism group of a finite structure to determine all its parameter-free definable sets, illustrating a core principle of modern logic. [@problem_id:2973032]", "problem": "Let $\\mathcal{L}$ be a first-order language with one binary relation symbol $E$, one unary function symbol $f$, and one unary predicate symbol $P$. Consider the finite $\\mathcal{L}$-structure $\\mathcal{A}$ with domain\n$$D=\\{a_{1},a_{2},a_{3},b_{1},b_{2},b_{3},c\\},$$\ninterpreted as follows:\n- $E^{\\mathcal{A}}$ is an irreflexive, symmetric binary relation whose graph consists of a $3$-cycle on $\\{a_{1},a_{2},a_{3}\\}$, namely $E^{\\mathcal{A}}(a_{1},a_{2})$, $E^{\\mathcal{A}}(a_{2},a_{3})$, $E^{\\mathcal{A}}(a_{3},a_{1})$, and a $3$-path on $\\{b_{1},b_{2},b_{3}\\}$, namely $E^{\\mathcal{A}}(b_{1},b_{2})$ and $E^{\\mathcal{A}}(b_{2},b_{3})$. There are no other $E^{\\mathcal{A}}$-edges, and $c$ is $E^{\\mathcal{A}}$-isolated.\n- $f^{\\mathcal{A}}$ is an involution pairing $a_{i}$ with $b_{i}$ for $i\\in\\{1,2,3\\}$, that is $f^{\\mathcal{A}}(a_{i})=b_{i}$ and $f^{\\mathcal{A}}(b_{i})=a_{i}$, and fixing $c$, i.e., $f^{\\mathcal{A}}(c)=c$.\n- $P^{\\mathcal{A}}$ interprets $P$ as the singleton $\\{c\\}$.\n\nA unary definable set is a subset $S\\subseteq D$ such that there exists a parameter-free first-order $\\mathcal{L}$-formula $\\varphi(x)$ with one free variable for which $S=\\{d\\in D:\\mathcal{A}\\models\\varphi(d)\\}$. Two subsets $S,T\\subseteq D$ are in the same automorphism class if there exists an automorphism $\\sigma\\in\\operatorname{Aut}(\\mathcal{A})$ with $\\sigma[S]=T$.\n\nStarting from the core definitions of first-order structures, interpretations, definability, and automorphisms, and without introducing any constants or parameters, explicitly enumerate all unary definable subsets of $D$ and classify them up to automorphism of $\\mathcal{A}$. Finally, compute the total number of distinct unary definable subsets of $D$. Provide the final count as your answer. No rounding is required.", "solution": "The problem asks for the total number of distinct unary, parameter-free definable subsets of a given finite $\\mathcal{L}$-structure $\\mathcal{A}$. A unary subset $S$ of the domain $D$ is definable without parameters if there exists a first-order formula $\\varphi(x)$ with one free variable $x$, whose non-logical symbols are only from $\\mathcal{L}=\\{E, f, P\\}$, such that $S=\\{d\\in D:\\mathcal{A}\\models\\varphi(d)\\}$.\n\nFor any finite structure, there is a fundamental relationship between its definable sets and its automorphisms. An automorphism of $\\mathcal{A}$ is a bijection $\\sigma: D \\to D$ that preserves the interpretations of all symbols in the language $\\mathcal{L}$. That is, for all $x, y \\in D$:\n1. $(x, y) \\in E^{\\mathcal{A}} \\iff (\\sigma(x), \\sigma(y)) \\in E^{\\mathcal{A}}$\n2. $\\sigma(f^{\\mathcal{A}}(x)) = f^{\\mathcal{A}}(\\sigma(x))$\n3. $x \\in P^{\\mathcal{A}} \\iff \\sigma(x) \\in P^{\\mathcal{A}}$\n\nThe set of all automorphisms of $\\mathcal{A}$, denoted $\\operatorname{Aut}(\\mathcal{A})$, forms a group under composition. This group acts on the domain $D$, partitioning it into disjoint equivalence classes called automorphism orbits. Two elements $d_1, d_2 \\in D$ are in the same orbit if there exists an automorphism $\\sigma \\in \\operatorname{Aut}(\\mathcal{A})$ such that $\\sigma(d_1) = d_2$.\n\nA crucial theorem for finite structures states that the parameter-free definable subsets are precisely the unions of the automorphism orbits. If a set $S$ is definable by a formula $\\varphi(x)$, and $d \\in S$, then for any automorphism $\\sigma$, $\\mathcal{A} \\models \\varphi(d)$ implies $\\mathcal{A} \\models \\varphi(\\sigma(d))$. Thus $\\sigma(d) \\in S$, which means definable sets are closed under automorphisms, and are therefore unions of orbits. Conversely, each orbit in a finite structure is definable without parameters. Consequently, any union of orbits is also definable.\n\nTherefore, to find all unary definable subsets, we must first find all automorphism orbits of $\\mathcal{A}$. The total number of definable subsets will be $2^k$, where $k$ is the number of distinct orbits.\n\nFirst, we determine the automorphism group $\\operatorname{Aut}(\\mathcal{A})$. Let $\\sigma$ be an automorphism.\n- From condition 3, $\\sigma$ must preserve the set $P^{\\mathcal{A}}=\\{c\\}$. This means $\\sigma(c)=c$. The element $c$ must be a fixed point of any automorphism.\n- From condition 1, $\\sigma$ must preserve the relation $E^{\\mathcal{A}}$. The graph of $E^{\\mathcal{A}}$ has three connected components: the singleton $\\{c\\}$, the set $A = \\{a_1, a_2, a_3\\}$ which forms a $3$-cycle, and the set $B = \\{b_1, b_2, b_3\\}$ which forms a $3$-path. An automorphism must map connected components to connected components of the same isomorphism type. Thus, $\\sigma$ must map $A$ to itself and $B$ to itself. So, $\\sigma[A]=A$ and $\\sigma[B]=B$.\n- From condition 2, $\\sigma$ must commute with the function $f^{\\mathcal{A}}$. We know $f^{\\mathcal{A}}(a_i)=b_i$ and $f^{\\mathcal{A}}(b_i)=a_i$ for $i \\in \\{1,2,3\\}$. Let the action of $\\sigma$ on the indices be given by a permutation $\\pi:\\{1,2,3\\} \\to \\{1,2,3\\}$, such that $\\sigma(a_i) = a_{\\pi(i)}$. The condition $\\sigma(f^{\\mathcal{A}}(a_i)) = f^{\\mathcal{A}}(\\sigma(a_i))$ implies $\\sigma(b_i) = f^{\\mathcal{A}}(a_{\\pi(i)}) = b_{\\pi(i)}$. This shows that the permutation $\\pi$ on the indices governs the action of $\\sigma$ on both sets $A$ and $B$.\n\nNow, we find the constraints on the permutation $\\pi$.\n- The map $a_i \\mapsto a_{\\pi(i)}$ must be an automorphism of the $3$-cycle on $A$. The edges are $E^{\\mathcal{A}}(a_1, a_2)$, $E^{\\mathcal{A}}(a_2, a_3)$, $E^{\\mathcal{A}}(a_3, a_1)$. The automorphism group of a $3$-cycle graph is the symmetric group $S_3$ on its vertices. Thus, any permutation $\\pi \\in S_3$ preserves the structure of $E^{\\mathcal{A}}$ on $A$.\n- The map $b_i \\mapsto b_{\\pi(i)}$ must be an automorphism of the $3$-path on $B$. The edges are $E^{\\mathcal{A}}(b_1, b_2)$ and $E^{\\mathcal{A}}(b_2, b_3)$. The vertices $b_1$ and $b_3$ are endpoints (degree $1$), while $b_2$ is the center (degree $2$). An automorphism must preserve degrees, so $\\pi$ must map $\\{1,3\\}$ to $\\{1,3\\}$ and fix $2$. So $\\pi(2)=2$. The only possibilities for $\\pi$ are the identity permutation, $\\pi_{id}$, and the permutation that swaps $1$ and $3$, $\\pi_f = (1 \\ 3)$.\nThe permutation $\\pi$ must satisfy both constraints simultaneously. The set of allowed permutations is the intersection of the automorphism groups of the two index graphs (a 3-cycle and a 3-path). This intersection is $\\{\\pi_{id}, \\pi_f=(1 \\ 3)\\}$.\nThis gives two possible automorphisms for $\\mathcal{A}$:\n1. The identity automorphism, $\\sigma_{id}$, corresponding to $\\pi_{id}$.\n2. The automorphism $\\sigma_f$ corresponding to $\\pi_f = (1 \\ 3)$, defined by:\n   - $\\sigma_f(a_1) = a_3$, $\\sigma_f(a_3) = a_1$, $\\sigma_f(a_2) = a_2$.\n   - $\\sigma_f(b_1) = b_3$, $\\sigma_f(b_3) = b_1$, $\\sigma_f(b_2) = b_2$.\n   - $\\sigma_f(c) = c$.\nThe automorphism group is $\\operatorname{Aut}(\\mathcal{A}) = \\{\\sigma_{id}, \\sigma_f\\}$, a group of order $2$.\n\nNext, we identify the automorphism orbits on $D=\\{a_1,a_2,a_3,b_1,b_2,b_3,c\\}$.\n- Orbit of $c$: $\\sigma_{id}(c)=c$, $\\sigma_f(c)=c$. The orbit is $\\{c\\}$.\n- Orbit of $a_1$: $\\sigma_{id}(a_1)=a_1$, $\\sigma_f(a_1)=a_3$. The orbit is $\\{a_1, a_3\\}$.\n- Orbit of $a_2$: $\\sigma_{id}(a_2)=a_2$, $\\sigma_f(a_2)=a_2$. The orbit is $\\{a_2\\}$.\n- Orbit of $a_3$: $\\sigma_{id}(a_3)=a_3$, $\\sigma_f(a_3)=a_1$. The orbit is $\\{a_1, a_3\\}$.\n- Orbit of $b_1$: $\\sigma_{id}(b_1)=b_1$, $\\sigma_f(b_1)=b_3$. The orbit is $\\{b_1, b_3\\}$.\n- Orbit of $b_2$: $\\sigma_{id}(b_2)=b_2$, $\\sigma_f(b_2)=b_2$. The orbit is $\\{b_2\\}$.\n- Orbit of $b_3$: $\\sigma_{id}(b_3)=b_3$, $\\sigma_f(b_3)=b_1$. The orbit is $\\{b_1, b_3\\}$.\n\nThe distinct orbits (which are the elementary definable sets) are:\n- $O_1 = \\{c\\}$\n- $O_2 = \\{a_2\\}$\n- $O_3 = \\{b_2\\}$\n- $O_4 = \\{a_1, a_3\\}$\n- $O_5 = \\{b_1, b_3\\}$\nThere are $k=5$ automorphism orbits.\n\nThe unary definable subsets of $D$ are all possible unions of these $5$ disjoint orbits. The number of ways to form a union is the number of subsets of the set of orbits $\\{O_1, O_2, O_3, O_4, O_5\\}$. This is $2^5$. The enumerated definable sets are thus the $2^5=32$ sets of the form $\\bigcup_{i \\in I} O_i$ where $I \\subseteq \\{1,2,3,4,5\\}$. For example, the empty set $\\emptyset$ (for $I=\\emptyset$), the orbits themselves (for $|I|=1$), sets like $\\{a_2, b_2\\}$ (for $I=\\{2,3\\}$), and the entire domain $D$ (for $I=\\{1,2,3,4,5\\}$) are all definable.\n\nThe problem also asks to classify these definable sets up to automorphism. Two subsets $S, T \\subseteq D$ are in the same automorphism class if $\\sigma[S]=T$ for some $\\sigma \\in \\operatorname{Aut}(\\mathcal{A})$. Let $S$ be any definable set. Since $S$ is a union of orbits, say $S=\\bigcup_{j \\in J} O_j$, and any automorphism $\\sigma$ maps each orbit to itself (i.e., $\\sigma[O_j]=O_j$), we have $\\sigma[S] = \\sigma[\\bigcup_{j \\in J} O_j] = \\bigcup_{j \\in J} \\sigma[O_j] = \\bigcup_{j \\in J} O_j = S$. This means every definable set is fixed by every automorphism. Therefore, if two definable sets $S$ and $T$ are in the same automorphism class, $S=\\sigma[S]=T$, so they must be the same set. Each of the $32$ definable sets constitutes its own automorphism class.\n\nFinally, we compute the total number of distinct unary definable subsets of $D$. This is the number of possible unions of the $5$ orbits, which is $2^5$.\nTotal number $= 2^5 = 32$.", "answer": "$$\\boxed{32}$$", "id": "2973032"}]}
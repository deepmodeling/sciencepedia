{"hands_on_practices": [{"introduction": "To understand a back-and-forth system, the most direct approach is to see how it can fail. This practice challenges you to think like the \"Spoiler,\" whose goal is to find a finite piece of evidence—a local configuration—that proves two structures are different. By identifying a simple subgraph present in one graph but absent in another, you will gain a concrete intuition for how the Ehrenfeucht-Fraïssé game detects differences expressible in first-order logic. [@problem_id:2969043]", "problem": "Work in the language of simple undirected graphs with a single binary relation symbol $E(x,y)$ interpreted as an irreflexive, symmetric adjacency relation. Recall that the Ehrenfeucht–Fraïssé (EF) game of length $k$ on two structures $\\mathcal{M}$ and $\\mathcal{N}$, denoted $\\mathrm{EF}_k(\\mathcal{M},\\mathcal{N})$, is played by two players, Spoiler and Duplicator, for $k$ rounds. In each round, Spoiler selects one element from either $\\mathcal{M}$ or $\\mathcal{N}$, and Duplicator responds by selecting one element from the other structure. After $k$ rounds, this yields two $k$-tuples $(a_1,\\dots,a_k)\\in \\mathcal{M}^k$ and $(b_1,\\dots,b_k)\\in \\mathcal{N}^k$. Duplicator wins if the map $a_i\\mapsto b_i$ is a partial isomorphism, meaning that for all $i,j\\le k$ one has $E^\\mathcal{M}(a_i,a_j)$ if and only if $E^\\mathcal{N}(b_i,b_j)$; otherwise, Spoiler wins.\n\nIdentify which of the following items correctly specify a pair of graphs $(\\mathcal{M},\\mathcal{N})$ and an integer $k$ for which Spoiler has a winning strategy in $\\mathrm{EF}_k(\\mathcal{M},\\mathcal{N})$ by forcing, within at most $k$ moves, a finite local combinatorial configuration on the pebbled vertices that does not occur in the other graph, so that no size-$k$ partial isomorphism can match it. Select all that apply.\n\nA. Let $\\mathcal{M}$ be the $4$-cycle $C_4$ and $\\mathcal{N}$ be the infinite binary tree $T_2$. For $k=4$, Spoiler wins by creating a $4$-cycle.\n\nB. Let $\\mathcal{M}$ be the triangle $K_3$ and $\\mathcal{N}$ be the $4$-cycle $C_4$. For $k=3$, Spoiler wins by creating a triangle.\n\nC. Let $\\mathcal{M}$ be the disjoint union of two edges $2K_2$ and $\\mathcal{N}$ be the path $P_4$. For $k=2$, Spoiler wins by isolating an induced matching that $P_4$ cannot match.\n\nD. Let $\\mathcal{M}$ be the countable Rado graph $R$ (also called the countably infinite random graph) and $\\mathcal{N}$ be the complete bipartite graph $K_{\\aleph_0,\\aleph_0}$. For $k=3$, Spoiler wins by creating a triangle.\n\nE. Let $\\mathcal{M}=C_{10}$ and $\\mathcal{N}=C_{11}$. For $k=2$, Spoiler wins by exposing the parity of the cycle length.", "solution": "The problem asks to identify which of the given options correctly specify a pair of graphs $(\\mathcal{M},\\mathcal{N})$ and an integer $k$ for which Spoiler has a winning strategy in the Ehrenfeucht–Fraïssé game $\\mathrm{EF}_k(\\mathcal{M},\\mathcal{N})$. A winning strategy for Spoiler exists if and only if the two structures $\\mathcal{M}$ and $\\mathcal{N}$ are not $k$-equivalent, denoted $\\mathcal{M} \\not\\equiv_k \\mathcal{N}$. This means Spoiler can choose a sequence of $k$ vertices in one graph to demonstrate a property that cannot be replicated by Duplicator's choices in the other graph. The property in question is the isomorphism type of the induced subgraph on the $k$ chosen (\"pebbled\") vertices.\n\nLet's analyze each option:\n\n**A. Let $\\mathcal{M}$ be the $4$-cycle $C_4$ and $\\mathcal{N}$ be the infinite binary tree $T_2$. For $k=4$, Spoiler wins by creating a $4$-cycle.**\n\nThe graph $\\mathcal{M}=C_4$ is a cycle on $4$ vertices. The graph $\\mathcal{N}=T_2$ is an infinite tree. A fundamental property of a tree is that it is acyclic. Therefore, $\\mathcal{N}$ does not contain any cycles, including a $4$-cycle.\n\nThe existence of a $4$-cycle can be expressed with a first-order sentence using $4$ variables, for instance: $\\exists x_1 \\exists x_2 \\exists x_3 \\exists x_4 (\\bigwedge_{i \\neq j} x_i \\neq x_j \\land E(x_1, x_2) \\wedge E(x_2, x_3) \\wedge E(x_3, x_4) \\wedge E(x_4, x_1))$. Since this property distinguishes $\\mathcal{M}$ from $\\mathcal{N}$ and uses $4$ variables, Spoiler is guaranteed a winning strategy in $\\mathrm{EF}_4(\\mathcal{M},\\mathcal{N})$.\n\nSpoiler's winning strategy is as follows:\n$1$. Spoiler chooses the vertices of the $4$-cycle in $\\mathcal{M}=C_4$, let's call them $a_1, a_2, a_3, a_4$ in cyclic order.\n$2$. In Round $1$, Spoiler picks $a_1$. Duplicator responds with some vertex $b_1 \\in \\mathcal{N}$.\n$3$. In Round $2$, Spoiler picks $a_2$, a neighbor of $a_1$. Duplicator must respond with a neighbor $b_2$ of $b_1$.\n$4$. In Round $3$, Spoiler picks $a_3$, the neighbor of $a_2$ which is not $a_1$. Duplicator must choose a neighbor $b_3$ of $b_2$ such that $b_3 \\neq b_1$ (since $a_3 \\neq a_1$). At this stage, $(b_1, b_2, b_3)$ is a path of length $2$ in $\\mathcal{N}$.\n$5$. In Round $4$, Spoiler picks $a_4$. This vertex is adjacent to both $a_1$ and $a_3$. Duplicator must find a vertex $b_4$ in $\\mathcal{N}$ that is adjacent to both $b_1$ and $b_3$. The existence of such a $b_4$ would imply a cycle $(b_1, b_2, b_3, b_4, b_1)$ of length $4$ in $\\mathcal{N}$. Since $\\mathcal{N}$ is a tree and has no cycles, no such vertex $b_4$ exists.\nSpoiler wins because Duplicator cannot complete the partial isomorphism. The description of the strategy is accurate.\n\nVerdict for A: **Correct**.\n\n**B. Let $\\mathcal{M}$ be the triangle $K_3$ and $\\mathcal{N}$ be the $4$-cycle $C_4$. For $k=3$, Spoiler wins by creating a triangle.**\n\nThe graph $\\mathcal{M}=K_3$ is a $3$-cycle (triangle). The graph $\\mathcal{N}=C_4$ is a $4$-cycle. $C_4$ is a bipartite graph, which means it contains no cycles of odd length. In particular, $C_4$ is triangle-free.\n\nThe existence of a triangle can be expressed with a sentence using $3$ variables: $\\exists x_1 \\exists x_2 \\exists x_3 (E(x_1, x_2) \\wedge E(x_2, x_3) \\wedge E(x_3, x_1))$. As this property holds in $\\mathcal{M}$ but not in $\\mathcal{N}$, Spoiler has a winning strategy in $\\mathrm{EF}_3(\\mathcal{M},\\mathcal{N})$.\n\nSpoiler's winning strategy involves picking all three vertices of $K_3$, say $a_1, a_2, a_3$.\n$1$. In Round $1$, Spoiler picks $a_1 \\in \\mathcal{M}$. Duplicator picks some $b_1 \\in \\mathcal{N}$.\n$2$. In Round $2$, Spoiler picks $a_2 \\in \\mathcal{M}$. Since $\\mathcal{M}=K_3$, $E(a_1, a_2)$ is true. Duplicator responds with a neighbor $b_2$ of $b_1$.\n$3$. In Round $3$, Spoiler picks $a_3 \\in \\mathcal{M}$. In $K_3$, $a_3$ is adjacent to both $a_1$ and $a_2$. Duplicator must find a vertex $b_3 \\in \\mathcal{N}$ that is adjacent to both $b_1$ and $b_2$. In $C_4$, any pair of adjacent vertices has no common neighbor. Thus, no such $b_3$ exists.\nSpoiler wins. The description of the strategy is accurate.\n\nVerdict for B: **Correct**.\n\n**C. Let $\\mathcal{M}$ be the disjoint union of two edges $2K_2$ and $\\mathcal{N}$ be the path $P_4$. For $k=2$, Spoiler wins by isolating an induced matching that $P_4$ cannot match.**\n\nLet us determine if $\\mathcal{M} \\equiv_2 \\mathcal{N}$. If they are $2$-equivalent, Duplicator wins. The graph $\\mathcal{M}=2K_2$ has $4$ vertices, each of degree $1$. The graph $\\mathcal{N}=P_4$ has $4$ vertices, two of degree $1$ and two of degree $2$.\n\nDuplicator has a winning strategy in $\\mathrm{EF}_2(\\mathcal{M},\\mathcal{N})$. The strategy is to maintain the invariant that vertices of degree $1$ in one graph are mapped to vertices of degree $1$ in the other.\n$1$. Round $1$: Spoiler can start in either graph.\n   - If Spoiler picks a vertex $a_1 \\in \\mathcal{M}$, all vertices have degree $1$. Duplicator picks a degree-$1$ vertex in $\\mathcal{N}$, say $b_1$.\n   - If Spoiler picks a degree-$1$ vertex $a_1 \\in \\mathcal{N}$, Duplicator picks any vertex $b_1 \\in \\mathcal{M}$.\n   - If Spoiler picks a degree-$2$ vertex $a_1 \\in \\mathcal{N}$, Duplicator picks any vertex $b_1 \\in \\mathcal{M}$. Spoiler will win in this case, but let's assume Duplicator plays optimally. A winning strategy for Duplicator only needs to exist.\nLet's analyze Duplicator's best course of action. Duplicator must anticipate Spoiler's moves.\nDuplicator's winning strategy:\n$1$. Round $1$: Let Spoiler pick $a_1$. Duplicator picks $b_1$ such that $\\deg(a_1) = \\deg(b_1)$ is not possible for all choices. Duplicator can try to match local structure. A better approach for Duplicator is simply to respond to Spoiler's choices to preserve the partial isomorphism.\nLet's trace a game where Duplicator tries to win:\n- Round $1$: Spoiler picks $a_1$ in $P_4$, let's say the vertex of degree $2$. Duplicator picks $b_1$ in $2K_2$. All vertices in $2K_2$ have degree $1$.\n- Round $2$: Spoiler picks $a_2$, a neighbor of $a_1$ in $P_4$. Duplicator must pick $b_2$, a neighbor of $b_1$ in $2K_2$. This is possible. The partial map $\\{a_1 \\mapsto b_1, a_2 \\mapsto b_2\\}$ is an isomorphism (it's a single edge in both induced subgraphs). Duplicator has not lost yet.\nThe game ends after $k=2$ rounds. The final map $a_i \\mapsto b_i$ for $i \\in \\{1,2\\}$ must be a partial isomorphism.\nLet's test all of Spoiler's moves for $k=2$:\n$1$. Spoiler picks $a_1$. Duplicator picks $b_1$.\n$2$. Spoiler picks $a_2$.\n   - If $a_1, a_2$ are adjacent: Duplicator must pick $b_2$ adjacent to $b_1$. This is always possible in both graphs provided Duplicator's first choice $b_1$ was not an isolated vertex (neither graph has one).\n   - If $a_1, a_2$ are not adjacent: Duplicator must pick $b_2$ not adjacent to $b_1$. This is also always possible as neither graph is a complete graph.\nIn all cases for a $k=2$ game, Duplicator can ensure the atomic relations (adjacency) between the chosen pairs are the same. Thus, Duplicator has a winning strategy in $\\mathrm{EF}_2(\\mathcal{M},\\mathcal{N})$, and $\\mathcal{M} \\equiv_2 \\mathcal{N}$.\nSpoiler can win in $\\mathrm{EF}_3(\\mathcal{M},\\mathcal{N})$ by picking the three vertices of the path of length $2$ in $P_4$. $2K_2$ has no paths of length $2$. Since the option states $k=2$, it is incorrect. Furthermore, \"isolating an induced matching\" of size $2$ would require pebbling $4$ vertices, which is impossible with $k=2$.\n\nVerdict for C: **Incorrect**.\n\n**D. Let $\\mathcal{M}$ be the countable Rado graph $R$ and $\\mathcal{N}$ be the complete bipartite graph $K_{\\aleph_0,\\aleph_0}$. For $k=3$, Spoiler wins by creating a triangle.**\n\nThe Rado graph $R$ is characterized by the extension property: for any two disjoint finite sets of vertices $U$ and $V$, there exists a vertex $z$ adjacent to all vertices in $U$ and no vertices in $V$. A consequence is that $R$ contains every finite graph as an induced subgraph. In particular, $R$ contains $K_3$ (a triangle).\nThe graph $\\mathcal{N} = K_{\\aleph_0,\\aleph_0}$ is the countably infinite complete bipartite graph. By definition, bipartite graphs are those that do not contain any odd-length cycles. Thus, $\\mathcal{N}$ is triangle-free.\nThe situation is identical in principle to Option B. The existence of a triangle distinguishes the two graphs, and this can be demonstrated with $k=3$ pebbles.\n\nSpoiler's winning strategy:\n$1$. Spoiler plays in $\\mathcal{M}=R$ and picks the three vertices of a triangle, $a_1, a_2, a_3$.\n$2$. Round $1$: Spoiler picks $a_1 \\in R$. Duplicator picks $b_1 \\in \\mathcal{N}$. Let the partitions of $\\mathcal{N}$ be $X$ and $Y$. Let's say $b_1 \\in X$.\n$3$. Round $2$: Spoiler picks $a_2 \\in R$, a neighbor of $a_1$. Duplicator must pick a neighbor $b_2$ of $b_1$. All neighbors of a vertex in $X$ are in $Y$, so $b_2 \\in Y$.\n$4$. Round $3$: Spoiler picks $a_3 \\in R$, which is adjacent to both $a_1$ and $a_2$. Duplicator must find a vertex $b_3 \\in \\mathcal{N}$ adjacent to both $b_1$ and $b_2$. Since $b_1 \\in X$, $b_3$ must be in $Y$. Since $b_2 \\in Y$, $b_3$ must be in $X$. These conditions are contradictory as $X \\cap Y = \\emptyset$. No such $b_3$ exists.\nSpoiler wins. The description of the strategy is accurate.\n\nVerdict for D: **Correct**.\n\n**E. Let $\\mathcal{M}=C_{10}$ and $\\mathcal{N}=C_{11}$. For $k=2$, Spoiler wins by exposing the parity of the cycle length.**\n\nWe need to determine if $C_{10} \\not\\equiv_2 C_{11}$. It is a standard result of EF games that two cycles $C_m$ and $C_n$ are $k$-equivalent if $m, n > 2k-1$. A common version is if $m, n \\ge 2^k$. A more precise version states that Spoiler has a winning strategy in $\\mathrm{EF}_k(C_m, C_n)$ if and only if there is some number $d  2^k$ such that $m$ and $n$ have a different number of induced paths of length $d$. For small $k$, it's easier to use local isomorphism arguments. Another known result is that $C_m \\equiv_k C_n$ if $m,n$ are both greater than $2k$. Here, $k=2$, $2k=4$. Since $m=10 \\ge 4$ and $n=11 \\ge 4$, it follows that $C_{10} \\equiv_2 C_{11}$. This means Duplicator has a winning strategy in $\\mathrm{EF}_2(C_{10}, C_{11})$.\n\nLet's confirm this by outlining Duplicator's strategy.\nIn a $k=2$ game, Spoiler and Duplicator choose a total of two vertices. The only property to check is whether they are adjacent.\n$1$. Round $1$: Spoiler picks a vertex $a_1$ (in $C_{10}$ or $C_{11}$). Since both graphs are vertex-transitive, we can assume $a_1 \\in C_{10}$ without loss of generality. Duplicator picks any vertex $b_1 \\in C_{11}$.\n$2$. Round $2$: Spoiler picks a second vertex $a_2 \\in C_{10}$.\n   - If $a_2$ is adjacent to $a_1$: Duplicator must pick a vertex $b_2 \\in C_{11}$ adjacent to $b_1$. This is possible since every vertex in $C_{11}$ has degree $2$. The map $a_1 \\mapsto b_1, a_2 \\mapsto b_2$ preserves the adjacency relation.\n   - If $a_2$ is not adjacent to $a_1$: Duplicator must pick a vertex $b_2 \\in C_{11}$ not adjacent to $b_1$. This is possible since $C_{11}$ has $11-1-2=8$ such vertices. The map preserves the non-adjacency relation.\nIn either case, Duplicator can make a move such that the resulting map on two vertices is a partial isomorphism. Therefore, Duplicator wins. The statement that Spoiler wins for $k=2$ is false. To distinguish $C_{10}$ from $C_{11}$ (e.g., by $C_{10}$ being bipartite while $C_{11}$ is not), Spoiler needs to exhibit an odd cycle. The shortest odd cycle in $C_{11}$ has length $11$, so Spoiler needs significantly more than $2$ rounds.\n\nVerdict for E: **Incorrect**.\n\nSummary: The correct options are A, B, and D.", "answer": "$$\\boxed{ABD}$$", "id": "2969043"}, {"introduction": "The length of an Ehrenfeucht-Fraïssé game is directly tied to the logical complexity of the properties it can test. This exercise demonstrates that two structures might seem identical in a short game, only for a difference to be revealed when the game is extended. You will explore how increasing the number of rounds from $k$ to $k+1$ grants Spoiler the ability to \"count\" more objects, thereby exposing a difference that was previously invisible. [@problem_id:2969046]", "problem": "Fix a natural number $k \\ge 1$ and consider first-order logic over finite relational languages. Recall that two $\\mathcal{L}$-structures $\\mathcal{A}$ and $\\mathcal{B}$ agree up to quantifier rank $k$ if they satisfy the same $\\mathcal{L}$-sentences of quantifier rank at most $k$, equivalently, if Duplicator has a winning strategy in the $k$-round Ehrenfeucht–Fraïssé game. A back-and-forth system at depth $k$ is a nonempty family of finite partial isomorphisms between $\\mathcal{A}$ and $\\mathcal{B}$ that is closed under extending a domain element by a corresponding codomain element and vice versa, for at most $k$ extension steps.\n\nWhich option correctly exhibits a pair of structures that agree up to quantifier rank $k$ but not up to quantifier rank $k+1$, and correctly identifies the exact configuration that breaks the back-and-forth at depth $k+1$?\n\nA. Language $\\mathcal{L}=\\{P\\}$ with a single unary predicate. Let $\\mathcal{A}_k$ have domain $\\mathbb{N}$ with exactly $k$ elements satisfying $P$, and let $\\mathcal{B}_k$ have domain $\\mathbb{N}$ with exactly $k+1$ elements satisfying $P$. The back-and-forth up to depth $k$ is maintained by always matching elements satisfying $P$ to previously unused elements satisfying $P$ and elements not satisfying $P$ to elements not satisfying $P$, but at depth $k+1$ Spoiler breaks the game by repeatedly selecting distinct elements satisfying $P$ in $\\mathcal{B}_k$, producing one more such element than exists in $\\mathcal{A}_k$.\n\nB. Language $\\mathcal{L}=\\{\\}$ with a single binary relation symbol interpreted as a linear order. Take $\\mathcal{A}=(\\mathbb{Z},)$ and $\\mathcal{B}=(\\mathbb{N},)$. They agree up to quantifier rank $k$ for all $k$, but not at rank $k+1$, because at depth $k+1$ Spoiler can isolate the presence of a least element.\n\nC. Language $\\mathcal{L}=\\{E\\}$ with a single binary relation interpreted as an undirected simple graph. Let $\\mathcal{G}_k$ be the disjoint union of $k$ many $4$-cycles and $\\mathcal{H}_k$ be the disjoint union of $k+1$ many $4$-cycles. They agree up to quantifier rank $k$, but not at rank $k+1$, because at depth $k+1$ Spoiler forces a set of $k+1$ pairwise non-adjacent pebbled vertices in $\\mathcal{H}_k$, which cannot be matched in $\\mathcal{G}_k$.\n\nD. Language $\\mathcal{L}=\\{E,R\\}$ where $E$ is a binary edge relation and $R$ is a unary predicate picking a distinguished root. Let $\\mathcal{T}_{k}$ be the finite rooted full binary tree of height $k$ (all internal nodes have exactly two $E$-successors, the $R$-root is at height $0$, and all leaves are at height $k$), and let $\\mathcal{T}'_{k}$ be obtained from $\\mathcal{T}_{k}$ by modifying exactly one node at height $k-1$ to have only one $E$-successor. They agree up to quantifier rank $k-1$ but not at rank $k$, because Spoiler can descend to that height in $k$ rounds and expose the missing sibling at the last move.", "solution": "The problem asks to identify which of the given options correctly presents a pair of structures, $\\mathcal{A}$ and $\\mathcal{B}$, that are distinguishable in first-order logic at a quantifier rank of $k+1$ but not at rank $k$ (for a general $k \\ge 1$), and correctly describes the winning strategy for Spoiler in the corresponding Ehrenfeucht–Fraïssé game. The condition of agreeing up to quantifier rank $k$ is equivalent to Duplicator having a winning strategy in the $k$-round Ehrenfeucht–Fraïssé game, which in turn is equivalent to the existence of a back-and-forth system of depth $k$. Disagreement at rank $k+1$ means Spoiler has a winning strategy in the $(k+1)$-round game.\n\nWe will now analyze each option.\n\n### Option A\n\n**Structures:** The language is $\\mathcal{L}=\\{P\\}$, containing a single unary predicate symbol $P$. The structures are defined over the domain $\\mathbb{N}$. In structure $\\mathcal{A}_k$, there are exactly $k$ elements satisfying $P$. In structure $\\mathcal{B}_k$, there are exactly $k+1$ elements satisfying $P$. We assume there are infinitely many elements not satisfying $P$ in both structures.\n\n**Claim:** $\\mathcal{A}_k$ and $\\mathcal{B}_k$ agree up to quantifier rank $k$, but not up to quantifier rank $k+1$.\n\n**Analysis of Agreement up to Rank $k$ ($\\mathcal{A}_k \\equiv_k \\mathcal{B}_k$):**\nWe need to show that Duplicator has a winning strategy in the $k$-round Ehrenfeucht–Fraïssé game.\nLet's define Duplicator's strategy. In any round $i \\in \\{1, \\dots, k\\}$, suppose Spoiler picks an element.\n1.  If Spoiler picks $a_i \\in \\mathcal{A}_k$:\n    *   If $P^{\\mathcal{A}_k}(a_i)$ holds and $a_i$ has not been picked before, Duplicator picks an element $b_i \\in \\mathcal{B}_k$ that has not been picked before and for which $P^{\\mathcal{B}_k}(b_i)$ holds. This is possible because at round $i \\le k$, at most $i-1  k$ elements satisfying $P$ have been picked in $\\mathcal{B}_k$, and $\\mathcal{B}_k$ has $k+1$ such elements.\n    *   If $\\neg P^{\\mathcal{A}_k}(a_i)$ holds and $a_i$ is new, Duplicator picks a new element $b_i \\in \\mathcal{B}_k$ for which $\\neg P^{\\mathcal{B}_k}(b_i)$ holds. This is possible as there are infinitely many such elements.\n    *   If $a_i$ is a previously picked element, say $a_j$ (for $ji$), Duplicator picks $b_i = b_j$.\n2.  If Spoiler picks $b_i \\in \\mathcal{B}_k$:\n    *   If $P^{\\mathcal{B}_k}(b_i)$ holds and $b_i$ is new, Duplicator picks a new element $a_i \\in \\mathcal{A}_k$ for which $P^{\\mathcal{A}_k}(a_i)$ holds. This is possible because at round $i \\le k$, at most $i-1  k$ elements satisfying $P$ have been picked in $\\mathcal{A}_k$, and $\\mathcal{A}_k$ has $k$ such elements.\n    *   The other cases are symmetric to the above.\n\nAfter $k$ rounds, a partial map $p = \\{(a_1,b_1), \\dots, (a_k,b_k)\\}$ is constructed. By construction, for any pair $(a,b) \\in p$, $P^{\\mathcal{A}_k}(a)$ holds if and only if $P^{\\mathcal{B}_k}(b)$ holds. Since $P$ is the only predicate, this map is a partial isomorphism. Thus, Duplicator wins the $k$-round game.\n\n**Analysis of Disagreement at Rank $k+1$ ($\\mathcal{A}_k \\not\\equiv_{k+1} \\mathcal{B}_k$):**\nWe need to show Spoiler has a winning strategy in the $(k+1)$-round game. Consider the sentence $\\phi = \\exists x_1 \\dots \\exists x_{k+1} (\\bigwedge_{i=1}^{k+1} P(x_i) \\land \\bigwedge_{1 \\le i  j \\le k+1} x_i \\ne x_j)$. This sentence has quantifier rank $k+1$. $\\mathcal{B}_k \\models \\phi$ because it has $k+1$ elements satisfying $P$. $\\mathcal{A}_k \\models \\neg\\phi$ because it only has $k$ elements satisfying $P$. Since they disagree on a sentence of rank $k+1$, they are not $(k+1)$-equivalent.\n\nSpoiler's winning strategy in the game is as follows: For each round $i \\in \\{1, \\dots, k+1\\}$, Spoiler picks a new element $b_i \\in \\mathcal{B}_k$ such that $P^{\\mathcal{B}_k}(b_i)$ holds. This is possible because there are $k+1$ such elements in $\\mathcal{B}_k$. Duplicator must respond with a unique element $a_i \\in \\mathcal{A}_k$ such that $P^{\\mathcal{A}_k}(a_i)$ holds for each round. For the first $k$ rounds, Duplicator can find such distinct elements $a_1, \\dots, a_k$. However, in round $k+1$, Spoiler picks the $(k+1)$-th element $b_{k+1}$ satisfying $P$ in $\\mathcal{B}_k$. Duplicator must find a corresponding element $a_{k+1}$ in $\\mathcal{A}_k$ that both satisfies $P$ and is distinct from $a_1, \\dots, a_k$. This is impossible, as all $k$ elements satisfying $P$ in $\\mathcal{A}_k$ have already been chosen. Duplicator loses.\n\nThe description of the winning strategy in the option is: \"...at depth $k+1$ Spoiler breaks the game by repeatedly selecting distinct elements satisfying $P$ in $\\mathcal{B}_k$, producing one more such element than exists in $\\mathcal{A}_k$.\" This is a precise and accurate description of the strategy.\n\n**Verdict:** Correct.\n\n### Option B\n\n**Structures:** The language is $\\mathcal{L}=\\{\\}$. The structures are $\\mathcal{A}=(\\mathbb{Z},)$ and $\\mathcal{B}=(\\mathbb{N},)$.\n\n**Claim:** They agree up to quantifier rank $k$ for all $k$, but not at rank $k+1$.\n\n**Analysis:** The claim \"agree up to quantifier rank $k$ for all $k$\" is equivalent to saying the structures are elementarily equivalent, i.e., $\\mathcal{A} \\equiv \\mathcal{B}$. If this were true, they could not disagree at rank $k+1$. The claim is internally contradictory. Furthermore, the claim is false. The structure $(\\mathbb{N},)$ has a least element, whereas $(\\mathbb{Z},)$ does not. The existence of a least element can be expressed by the first-order sentence $\\phi = \\exists x \\forall y(x  y \\lor x=y)$. This sentence has quantifier rank $2$. We have $\\mathcal{B} \\models \\phi$ and $\\mathcal{A} \\models \\neg\\phi$. Therefore, $\\mathcal{A} \\not\\equiv_2 \\mathcal{B}$. The structures do not agree for $k \\ge 2$. The initial premise of the option is factually incorrect.\n\n**Verdict:** Incorrect.\n\n### Option C\n\n**Structures:** The language $\\mathcal{L}=\\{E\\}$ for undirected simple graphs. $\\mathcal{G}_k$ is the disjoint union of $k$ copies of the $4$-cycle graph ($C_4$). $\\mathcal{H}_k$ is the disjoint union of $k+1$ copies of $C_4$.\n\n**Claim:** They agree up to quantifier rank $k$, but not at rank $k+1$. The failure is due to Spoiler forcing a selection of $k+1$ pairwise non-adjacent pebbled vertices in $\\mathcal{H}_k$, which cannot be matched in $\\mathcal{G}_k$.\n\n**Analysis:** The strategy described is for Spoiler to select $k+1$ vertices in $\\mathcal{H}_k$, one from each of its $k+1$ components. Since these vertices are in different components, they are pairwise non-adjacent, forming an independent set of size $k+1$. The option claims this cannot be matched in $\\mathcal{G}_k$. Duplicator must respond by picking $k+1$ vertices in $\\mathcal{G}_k$ that also form an independent set. We need to find the size of the maximum independent set in $\\mathcal{G}_k$, denoted $\\alpha(\\mathcal{G}_k)$. A single $C_4$ has a maximum independent set of size $2$. Since $\\mathcal{G}_k$ is a disjoint union of $k$ copies of $C_4$, its maximum independent set size is $\\alpha(\\mathcal{G}_k) = k \\times \\alpha(C_4) = 2k$. Duplicator can find an independent set of size $k+1$ in $\\mathcal{G}_k$ as long as $k+1 \\le 2k$. This inequality holds for all $k \\ge 1$. Therefore, Duplicator can always match Spoiler's move, and the described strategy fails. The number of rounds required to distinguish structures based on counting components of a certain size is generally much larger than the number of components, as it also depends on the complexity of defining one such component.\n\n**Verdict:** Incorrect.\n\n### Option D\n\n**Structures:** Language $\\mathcal{L}=\\{E,R\\}$, where $E$ is an edge relation and $R$ is a root predicate. $\\mathcal{T}_k$ is a full binary tree of height $k$. $\\mathcal{T}'_k$ is a full binary tree of height $k$ where one node at height $k-1$ has only one child instead of two.\n\n**Claim:** They agree up to quantifier rank $k-1$ but not at rank $k$.\n\n**Analysis:** It is a known result in finite model theory that these specific structures are not $k$-equivalent, i.e., $\\mathcal{T}_k \\not\\equiv_k \\mathcal{T}'_k$. The claim that they agree up to rank $k-1$ is also correct. However, the reasoning provided for the winning strategy must also be correct. The option states: \"Spoiler can descend to that height in $k$ rounds and expose the missing sibling at the last move.\"\n\nLet's analyze this strategy in a $k$-round game. \"Descend... in $k$ rounds\" suggests a sequence of moves along a path. Let's assume Spoiler uses his $k$ moves to pick nodes along the path from the root to the defective node.\nLet the path to the defective node $n'_d$ at height $k-1$ in $\\mathcal{T}'_k$ be $(a'_0, a'_1, \\dots, a'_{k-1}=n'_d)$, where $a'_0$ is the root.\nIf Spoiler uses his $k$ moves to select $a'_0, \\dots, a'_{k-1}$, Duplicator can match these with a path $a_0, \\dots, a_{k-1}$ in $\\mathcal{T}_k$. At the end of $k$ rounds, the set of pebbled pairs is $\\{(a_0,a'_0), \\dots, (a_{k-1},a'_{k-1})\\}$. This set constitutes a partial isomorphism. No contradiction has been revealed. Spoiler has not won. The game is over.\n\nA correct strategy for Spoiler needs to expose the difference in the number of children. To state that a node $x$ has fewer than two children involves quantifiers. For instance, to test that the node $a'_{k-1}$ (which is at distance $k-1$ from the root) has only one child requires establishing its existence and location, and then querying its children. A sentence for this would be roughly: $\\exists x_1 \\dots \\exists x_{k-1} (\\text{Path}(x_0, \\dots, x_{k-1}) \\land \\text{has_one_child}(x_{k-1}))$. The `Path` part requires $k-1$ quantifiers, and `has_one_child` requires at least two more ($\\exists y \\forall z \\dots$). This gives a rank of at least $k+1$.\nA more refined analysis shows that a winning strategy for spoiler requires 3 rounds once the defective node and its counterpart are pebbled: one round to select the first child, a second round to select the second child (which exists in one tree but not the other), and the first move to select the parent node itself. This strategy works in 3 rounds to show $\\mathcal{T}_k \\not\\equiv_3 \\mathcal{T}'_k$ for $k \\ge 2$, by first pebbling the defective node and its counterpart, then their children. This contradicts the claim that $\\mathcal{T}_k \\equiv_{k-1} \\mathcal{T}'_k$ for $k > 3$. Thus, the premises of this option regarding rank are incorrect. The most direct interpretation of \"descend... in $k$ rounds\" describes a losing strategy.\n\n**Verdict:** Incorrect.\n\n### Conclusion\n\nOnly option A provides a correct pair of structures with the specified equivalence properties and a correct description of the winning strategy for Spoiler.", "answer": "$$\\boxed{A}$$", "id": "2969046"}, {"introduction": "We now turn to one of the most profound results illustrated by back-and-forth systems: the distinction between elementary equivalence and isomorphism. This practice presents a classic case where the Duplicator has a winning strategy for any finite number of rounds, yet the two structures are fundamentally different. By analyzing the game between the rational numbers $(\\mathbb{Q},)$ and the real numbers $(\\mathbb{R},)$, you will uncover the limits of first-order logic and see why some properties, like cardinality or completeness, cannot be captured by any finite game. [@problem_id:2969082]", "problem": "Let $M=(\\mathbb{Q},)$ and $N=(\\mathbb{R},)$ in the language of linear orders $\\mathcal{L}=\\{\\}$. Using only the core definitions of dense linear order without endpoints and the rules of the Ehrenfeucht–Fraïssé (EF) game, analyze the EF game of length $k$ between $M$ and $N$. Specifically, starting from the definition of a dense linear order without endpoints and the definition of a partial isomorphism in the EF game, argue whether Duplicator has a winning strategy in $\\mathrm{EF}_{k}(M,N)$ for arbitrary finite $k \\in \\mathbb{N}$. Then, define the indicator function $\\chi:\\mathbb{N}\\to\\{0,1\\}$ by setting $\\chi(k)=1$ if Duplicator has a winning strategy in $\\mathrm{EF}_{k}(M,N)$ and $\\chi(k)=0$ otherwise, and compute the exact value of\n$$\nS \\;=\\; \\sum_{k=1}^{\\infty} 2^{-k}\\,\\chi(k).\n$$\nFinally, explain from first principles why a full back-and-forth leading to an isomorphism fails between $M$ and $N$, despite Duplicator’s success in all finite-length EF games. Your explanation must be grounded in definability and cardinality considerations internal to first-order logic for $\\mathcal{L}=\\{\\}$.", "solution": "The problem asks for a three-part analysis concerning the Ehrenfeucht-Fraïssé (EF) game between the structures $M=(\\mathbb{Q},)$ and $N=(\\mathbb{R},)$. First, we must determine if Duplicator has a winning strategy in the game $\\mathrm{EF}_{k}(M,N)$ for any arbitrary finite $k \\in \\mathbb{N}$. Second, we must compute the sum $S = \\sum_{k=1}^{\\infty} 2^{-k}\\,\\chi(k)$, where $\\chi(k)$ is an indicator function based on Duplicator's success. Third, we must explain why an isomorphism between $M$ and $N$ does not exist despite Duplicator's success in all finite-length games.\n\n**Part 1: Analysis of the $\\mathrm{EF}_{k}(M,N)$ Game**\n\nThe theory of dense linear orders without endpoints (DLO) is defined by the following first-order axioms in the language $\\mathcal{L}=\\{\\}$:\n1.  Irreflexivity: $\\forall x \\, \\neg(x  x)$\n2.  Transitivity: $\\forall x \\forall y \\forall z \\, ((x  y \\land y  z) \\to x  z)$\n3.  Totality (Linearity): $\\forall x \\forall y \\, (x  y \\lor x = y \\lor y  x)$\n4.  Density: $\\forall x \\forall y \\, (x  y \\to \\exists z \\, (x  z \\land z  y))$\n5.  No least element: $\\forall x \\, \\exists y \\, (y  x)$\n6.  No greatest element: $\\forall x \\, \\exists y \\, (x  y)$\n\nBoth structures $M=(\\mathbb{Q},)$ and $N=(\\mathbb{R},)$ are models of this theory.\n\nThe Ehrenfeucht-Fraïssé game $\\mathrm{EF}_{k}(M,N)$ is played by two players, Spoiler and Duplicator, over $k$ rounds. In each round $i \\in \\{1, \\dots, k\\}$, Spoiler chooses an element from either $M$ or $N$, and Duplicator must respond by choosing an element from the other structure. After $k$ rounds, let the chosen elements be $a_1, \\dots, a_k \\in \\mathbb{Q}$ and $b_1, \\dots, b_k \\in \\mathbb{R}$, where $(a_i, b_i)$ is the pair chosen in the round where Spoiler picked from $\\mathbb{Q}$ and Duplicator from $\\mathbb{R}$, or vice-versa.\n\nDuplicator wins the game if the map $f: \\{a_1, \\dots, a_k\\} \\to \\{b_1, \\dots, b_k\\}$ defined by $f(a_i) = b_i$ for all $i$ is a partial isomorphism. In the language $\\mathcal{L}=\\{\\}$, this means that for any pair of indices $i, j \\in \\{1, \\dots, k\\}$, the condition $a_i  a_j$ holds in $M$ if and only if $b_i  b_j$ holds in $N$.\n\nDuplicator has a winning strategy in $\\mathrm{EF}_{k}(M,N)$ for any finite $k \\in \\mathbb{N}$. The strategy is as follows: Duplicator maintains the invariant that after round $i$, the map on the $i$ pairs of chosen elements is a partial isomorphism.\n\nLet's describe the strategy for round $i$ ($1 \\le i \\le k$), assuming the invariant holds for the first $i-1$ rounds. Let the elements chosen so far be $(a_1, \\dots, a_{i-1})$ from $\\mathbb{Q}$ and $(b_1, \\dots, b_{i-1})$ from $\\mathbb{R}$. Let the ordered set of unique values among these be $\\{a'_{1}, \\dots, a'_{m}\\}$ and $\\{b'_{1}, \\dots, b'_{m}\\}$ respectively, where $m  i$. By the invariant, $a'_{j}  a'_{j+1}$ if and only if $b'_{j}  b'_{j+1}$ for all $j \\in \\{1, \\dots, m-1\\}$.\n\nThese points partition their respective number lines into $m+1$ open intervals:\nIn $\\mathbb{Q}$: $(-\\infty, a'_{1})_{\\mathbb{Q}}$, $(a'_{1}, a'_{2})_{\\mathbb{Q}}$, ..., $(a'_{m-1}, a'_{m})_{\\mathbb{Q}}$, $(a'_{m}, \\infty)_{\\mathbb{Q}}$.\nIn $\\mathbb{R}$: $(-\\infty, b'_{1})_{\\mathbb{R}}$, $(b'_{1}, b'_{2})_{\\mathbb{R}}$, ..., $(b'_{m-1}, b'_{m})_{\\mathbb{R}}$, $(b'_{m}, \\infty)_{\\mathbb{R}}$.\n\nNow, in round $i$, suppose Spoiler chooses a new element $a_i \\in \\mathbb{Q}$. There are three possibilities for the location of $a_i$ relative to $\\{a'_{1}, \\dots, a'_{m}\\}$:\n1.  $a_i = a'_j$ for some $j$. Duplicator must choose $b_i = b'_j$. The partial isomorphism is trivially maintained.\n2.  $a_i$ falls into one of the open intervals, say $a_i \\in (a'_{j}, a'_{j+1})_{\\mathbb{Q}}$. Duplicator must choose an element $b_i \\in (b'_{j}, b'_{j+1})_{\\mathbb{R}}$. Because $(\\mathbb{R},)$ is a dense linear order, the interval $(b'_{j}, b'_{j+1})_{\\mathbb{R}}$ is non-empty. Duplicator can pick any element from this interval, for instance, $b_i = (b'_{j} + b'_{j+1})/2$.\n3.  $a_i$ falls into an unbounded interval, say $a_i  a'_{1}$. Duplicator must choose $b_i  b'_{1}$. As $(\\mathbb{R},)$ has no minimum element, such a $b_i$ always exists (e.g., $b_i = b'_{1} - 1$). A similar argument applies if $a_i > a'_{m}$.\n\nA symmetrical argument holds if Spoiler chooses an element $b_i \\in \\mathbb{R}$ first. Duplicator's response $a_i \\in \\mathbb{Q}$ is guaranteed to exist because $(\\mathbb{Q},)$ is also a dense linear order without endpoints.\n\nSince this strategy allows Duplicator to successfully respond to any of Spoiler's moves for $k$ rounds while maintaining the order-isomorphism between the chosen finite subsets, Duplicator has a winning strategy for $\\mathrm{EF}_{k}(M,N)$ for any finite $k \\in \\mathbb{N}$.\n\n**Part 2: Computation of the Sum $S$**\n\nThe indicator function $\\chi(k)$ is defined as $\\chi(k)=1$ if Duplicator has a winning strategy in $\\mathrm{EF}_{k}(M,N)$ and $\\chi(k)=0$ otherwise. From the analysis in Part 1, we have concluded that Duplicator has a winning strategy for all finite $k \\ge 1$. Therefore, $\\chi(k) = 1$ for all $k \\in \\mathbb{N}$ with $k \\ge 1$.\n\nThe sum to be computed is\n$$S \\;=\\; \\sum_{k=1}^{\\infty} 2^{-k}\\,\\chi(k)$$\nSubstituting $\\chi(k) = 1$ for all $k \\ge 1$, we get\n$$S \\;=\\; \\sum_{k=1}^{\\infty} 2^{-k} \\cdot 1 \\;=\\; \\sum_{k=1}^{\\infty} \\left(\\frac{1}{2}\\right)^k$$\nThis is a standard geometric series with first term $a = 1/2$ and common ratio $r = 1/2$. The sum of an infinite geometric series is given by $a / (1-r)$ for $|r|  1$.\n$$S \\;=\\; \\frac{\\frac{1}{2}}{1 - \\frac{1}{2}} \\;=\\; \\frac{\\frac{1}{2}}{\\frac{1}{2}} \\;=\\; 1$$\nThe exact value of the sum is $1$.\n\n**Part 3: Failure of Isomorphism**\n\nThe Ehrenfeucht-Fraïssé theorem states that two structures are elementarily equivalent (i.e., satisfy the same first-order sentences) if and only if Duplicator has a winning strategy in $\\mathrm{EF}_{k}$ for all finite $k \\in \\mathbb{N}$. Our result from Part 1 implies that $M \\equiv N$.\n\nAn isomorphism between $M=(\\mathbb{Q},)$ and $N=(\\mathbb{R},)$ would be a bijective function $f: \\mathbb{Q} \\to \\mathbb{R}$ that is order-preserving, i.e., for all $q_1, q_2 \\in \\mathbb{Q}$, $q_1  q_2 \\iff f(q_1)  f(q_2)$. A \"full back-and-forth\" can refer to a back-and-forth system that allows for the construction of an isomorphism, as in the Cantor back-and-forth theorem for countable structures.\n\nThe fundamental reason for the non-existence of an isomorphism is the difference in cardinality between the two sets. The set of rational numbers $\\mathbb{Q}$ is countable, i.e., $|\\mathbb{Q}| = \\aleph_0$. The set of real numbers $\\mathbb{R}$ is uncountable, with $|\\mathbb{R}| = 2^{\\aleph_0}$. A bijection between two sets can only exist if they have the same cardinality. Since $|\\mathbb{Q}| \\neq |\\mathbb{R}|$, no such bijection exists, and therefore, no isomorphism can exist.\n\nThe problem asks for an explanation grounded in definability within first-order logic. First-order logic, in a countable language like $\\mathcal{L}=\\{\\}$, is not powerful enough to distinguish between all non-isomorphic structures. The success of Duplicator in all finite games demonstrates this limitation. At any finite stage of the game, only a finite number of points have been selected. The density property, which is first-order definable, ensures that Duplicator can always find a suitable point to place in the corresponding interval. The game never \"sees\" the global structure of the number line, only the local relative ordering of a finite set of points.\n\nThe property that distinguishes $\\mathbb{R}$ from $\\mathbb{Q}$ is completeness: every non-empty subset of $\\mathbb{R}$ that is bounded above has a least upper bound (supremum) in $\\mathbb{R}$. This property is not possessed by $\\mathbb{Q}$. For example, the set $A = \\{x \\in \\mathbb{Q} \\mid x^2  2\\}$ is non-empty and bounded above in $\\mathbb{Q}$ (e.g., by $2$), but its supremum, $\\sqrt{2}$, is not in $\\mathbb{Q}$.\n\nThe completeness property cannot be expressed by any sentence in first-order logic. To express it, one would need to quantify over all subsets of the domain, e.g., \"For every subset $S$...\". Quantification over sets is a feature of second-order logic, not first-order logic. Since completeness is not a first-order property, there is no first-order sentence $\\phi$ that is true in $(\\mathbb{R},)$ but false in $(\\mathbb{Q},)$ on account of this difference. This is precisely why they are elementarily equivalent ($M \\equiv N$), and why Duplicator wins all finite EF games.\n\nIn summary, a back-and-forth argument cannot be extended to build an isomorphism because it would imply the existence of a bijection, which is impossible due to the cardinality difference ($|\\mathbb{Q}| = \\aleph_0$ vs. $|\\mathbb{R}| = 2^{\\aleph_0}$). Duplicator's success in all finite games reveals that first-order logic is too weak to detect this cardinality difference or the related second-order property of completeness. The finite game only tests properties expressible by first-order formulas, and with respect to those, $(\\mathbb{Q},)$ and $(\\mathbb{R},)$ are indistinguishable.", "answer": "$$\n\\boxed{1}\n$$", "id": "2969082"}]}
{"hands_on_practices": [{"introduction": "This first practice provides a direct application of Euler's criterion, a cornerstone for determining quadratic residuosity. By computing the Legendre symbol $\\left(\\frac{2}{13}\\right)$ and then verifying the result by explicitly checking for solutions to $x^2 \\equiv 2 \\pmod{13}$, you will solidify your understanding of how the criterion works as a powerful shortcut. This exercise [@problem_id:3084854] bridges the abstract theory with tangible, verifiable results, building a strong foundation for more complex applications.", "problem": "Let $p$ be an odd prime and let $\\left(\\frac{a}{p}\\right)$ denote the Legendre symbol, defined for integers $a$ by $\\left(\\frac{a}{p}\\right)=1$ if $a$ is a quadratic residue modulo $p$ with $p \\nmid a$, $\\left(\\frac{a}{p}\\right)=-1$ if $a$ is a quadratic non-residue modulo $p$ with $p \\nmid a$, and $\\left(\\frac{a}{p}\\right)=0$ if $p \\mid a$. Using only the structure of the multiplicative group $\\left(\\mathbb{Z}/p\\mathbb{Z}\\right)^{\\times}$ and Fermat’s little theorem, apply Euler’s criterion to determine the value of the Legendre symbol $\\left(\\frac{2}{13}\\right)$. Then verify your conclusion by directly analyzing the solvability of the congruence $x^{2}\\equiv 2 \\pmod{13}$ through explicit computation in $\\mathbb{Z}/13\\mathbb{Z}$. Express your final answer as the single value of $\\left(\\frac{2}{13}\\right)$.", "solution": "The problem is well-posed and mathematically sound. We are asked to determine the value of the Legendre symbol $\\left(\\frac{2}{13}\\right)$ using two methods: Euler's criterion and direct computation of quadratic residues.\n\nFirst, we apply Euler's criterion. For an odd prime $p$ and an integer $a$ such that $p \\nmid a$, Euler's criterion states that:\n$$\n\\left(\\frac{a}{p}\\right) \\equiv a^{(p-1)/2} \\pmod{p}\n$$\nIn this problem, we have $p=13$ and $a=2$. Since $13$ is an odd prime and $13 \\nmid 2$, the conditions for Euler's criterion are met. We substitute these values into the formula:\n$$\n\\left(\\frac{2}{13}\\right) \\equiv 2^{(13-1)/2} \\pmod{13}\n$$\nThis simplifies to:\n$$\n\\left(\\frac{2}{13}\\right) \\equiv 2^{12/2} \\pmod{13}\n$$\n$$\n\\left(\\frac{2}{13}\\right) \\equiv 2^{6} \\pmod{13}\n$$\nNow, we compute the value of $2^6$ modulo $13$.\nWe can perform the calculation step-by-step:\n$2^1 \\equiv 2 \\pmod{13}$\n$2^2 \\equiv 4 \\pmod{13}$\n$2^3 \\equiv 8 \\pmod{13}$\n$2^4 = 16 \\equiv 3 \\pmod{13}$\n$2^5 = 2 \\times 2^4 \\equiv 2 \\times 3 \\equiv 6 \\pmod{13}$\n$2^6 = 2 \\times 2^5 \\equiv 2 \\times 6 \\equiv 12 \\pmod{13}$\nAlternatively, $2^6 = 64$. To find the remainder of $64$ when divided by $13$, we can note that $13 \\times 4 = 52$, so $64 = 52 + 12$. Thus, $64 \\equiv 12 \\pmod{13}$.\nSince $12 \\equiv -1 \\pmod{13}$, we have:\n$$\n\\left(\\frac{2}{13}\\right) \\equiv -1 \\pmod{13}\n$$\nThe Legendre symbol $\\left(\\frac{2}{13}\\right)$ can only take values from the set $\\{-1, 1\\}$, because $13 \\nmid 2$. As $1 \\not\\equiv -1 \\pmod{13}$, the congruence uniquely determines the value of the symbol. Therefore, we conclude that $\\left(\\frac{2}{13}\\right) = -1$. This implies that $2$ is a quadratic non-residue modulo $13$.\n\nSecond, as instructed, we verify this conclusion by directly checking the solvability of the congruence $x^2 \\equiv 2 \\pmod{13}$. This requires us to compute the squares of the elements in the multiplicative group $\\left(\\mathbb{Z}/13\\mathbb{Z}\\right)^{\\times}$. The elements are $\\{1, 2, \\dots, 12\\}$. We only need to compute the squares for $x$ from $1$ to $(13-1)/2 = 6$, since $(13-k)^2 \\equiv (-k)^2 \\equiv k^2 \\pmod{13}$.\nThe squares are:\n$1^2 \\equiv 1 \\pmod{13}$\n$2^2 \\equiv 4 \\pmod{13}$\n$3^2 \\equiv 9 \\pmod{13}$\n$4^2 = 16 \\equiv 3 \\pmod{13}$\n$5^2 = 25 = 13 + 12 \\equiv 12 \\pmod{13}$\n$6^2 = 36 = 2 \\times 13 + 10 \\equiv 10 \\pmod{13}$\nThe set of non-zero quadratic residues modulo $13$ is the set of these calculated values: $\\{1, 3, 4, 9, 10, 12\\}$.\nThe integer $2$ is not a member of this set. Therefore, the congruence $x^2 \\equiv 2 \\pmod{13}$ has no integer solution for $x$. This confirms that $2$ is a quadratic non-residue modulo $13$.\n\nBoth methods consistently lead to the same result. The value of the Legendre symbol $\\left(\\frac{2}{13}\\right)$ is $-1$.", "answer": "$$\n\\boxed{-1}\n$$", "id": "3084854"}, {"introduction": "Having mastered the Legendre symbol for prime moduli, we now explore its generalization to composite numbers, the Jacobi symbol. This practice [@problem_id:3084835] demonstrates a crucial subtlety: while the Legendre symbol $\\left(\\frac{a}{p}\\right) = 1$ guarantees that $a$ is a quadratic residue modulo $p$, the same is not true for the Jacobi symbol. By investigating the case for modulus $n=15$, you will uncover why the Jacobi symbol is not a perfect test for quadratic residuosity and gain a deeper appreciation for the role of prime factorization and the Chinese Remainder Theorem.", "problem": "Let $n=15$. For each integer $a$ with $1 \\leq a \\leq 14$ and $\\gcd(a,15)=1$, compute the Jacobi symbol $\\left(\\frac{a}{15}\\right)$ and determine whether $a$ is a quadratic residue modulo $15$ by solving $x^{2} \\equiv a \\pmod{15}$. Your reasoning should begin from fundamental definitions and well-tested facts: the definition of the Legendre symbol for odd primes, Euler's criterion for odd primes, the multiplicativity of the Jacobi symbol with respect to the bottom argument, and the Chinese Remainder Theorem (CRT). Do not assume any property that has not been established from these bases.\n\nLet $F$ be the number of values of $a$ in this range (with $\\gcd(a,15)=1$) for which $\\left(\\frac{a}{15}\\right)=1$ but $a$ is not a quadratic residue modulo $15$. Provide your final answer as the exact integer $F$.", "solution": "The problem is valid as it is mathematically well-posed, scientifically grounded in number theory, and its premises are consistent and complete.\n\nThe problem asks for the number of integers $a$ in the set $S = \\{a \\in \\mathbb{Z} \\mid 1 \\leq a \\leq 14, \\gcd(a,15)=1\\}$ for which the Jacobi symbol $\\left(\\frac{a}{15}\\right)=1$ but $a$ is not a quadratic residue modulo $15$. Let this number be $F$.\n\nFirst, we identify the set $S$. The integers $a$ between $1$ and $14$ that are relatively prime to $15$ are those not divisible by $3$ or $5$. This set is $S = \\{1, 2, 4, 7, 8, 11, 13, 14\\}$.\n\nThe problem requires a solution built from fundamental principles. We begin with the specified definitions and theorems.\nLet $n=15$. Since $15 = 3 \\times 5$, where $3$ and $5$ are distinct odd primes, we can analyze properties modulo $15$ by considering properties modulo $3$ and modulo $5$.\n\n1.  **The Jacobi Symbol**: For an integer $a$ and an odd positive integer $n = p_1 p_2 \\dots p_k$ where the $p_i$ are prime factors (not necessarily distinct), the Jacobi symbol is defined as the product of the corresponding Legendre symbols:\n    $$ \\left(\\frac{a}{n}\\right) = \\left(\\frac{a}{p_1}\\right) \\left(\\frac{a}{p_2}\\right) \\dots \\left(\\frac{a}{p_k}\\right) $$\n    For $n=15$, the Jacobi symbol is $\\left(\\frac{a}{15}\\right) = \\left(\\frac{a}{3}\\right)\\left(\\frac{a}{5}\\right)$.\n\n2.  **Quadratic Residues and the Chinese Remainder Theorem (CRT)**: An integer $a$ is a quadratic residue modulo $15$ if the congruence $x^2 \\equiv a \\pmod{15}$ has a solution. By the Chinese Remainder Theorem, this congruence is equivalent to the system of congruences:\n    $$\n    \\begin{cases}\n    x^2 \\equiv a \\pmod{3} \\\\\n    x^2 \\equiv a \\pmod{5}\n    \\end{cases}\n    $$\n    This system has a solution for $x$ if and only if each individual congruence has a solution. Since $\\gcd(a,15)=1$, we have $\\gcd(a,3)=1$ and $\\gcd(a,5)=1$. An individual congruence $x^2 \\equiv a \\pmod{p}$ (for prime $p$) has a solution if and only if $a$ is a quadratic residue modulo $p$. This is equivalent to the condition that the Legendre symbol $\\left(\\frac{a}{p}\\right)=1$.\n    Therefore, $a$ is a quadratic residue modulo $15$ if and only if $a$ is a quadratic residue modulo $3$ AND $a$ is a quadratic residue modulo $5$. This means:\n    $$ \\left(\\frac{a}{3}\\right) = 1 \\quad \\text{and} \\quad \\left(\\frac{a}{5}\\right) = 1 $$\n\n3.  **Euler's Criterion**: For an odd prime $p$ and an integer $a$ not divisible by $p$, Euler's criterion states that:\n    $$ \\left(\\frac{a}{p}\\right) \\equiv a^{(p-1)/2} \\pmod{p} $$\n\nWe are tasked with finding the number of integers $a \\in S$ such that:\n(i) $\\left(\\frac{a}{15}\\right) = 1$\n(ii) $a$ is not a quadratic residue modulo $15$.\n\nFrom condition (i) and the definition of the Jacobi symbol, we have $\\left(\\frac{a}{3}\\right)\\left(\\frac{a}{5}\\right) = 1$. This equation holds if both Legendre symbols are $1$ or if both are $-1$.\n$$ \\left(\\left(\\frac{a}{3}\\right)=1 \\text{ and } \\left(\\frac{a}{5}\\right)=1\\right) \\quad \\text{or} \\quad \\left(\\left(\\frac{a}{3}\\right)=-1 \\text{ and } \\left(\\frac{a}{5}\\right)=-1\\right) $$\nFrom condition (ii) and our analysis using the CRT, $a$ not being a quadratic residue modulo $15$ means that it is not the case that both $\\left(\\frac{a}{3}\\right)=1$ and $\\left(\\frac{a}{5}\\right)=1$.\n\nCombining these two requirements, the only possibility for an integer $a$ to satisfy both conditions is:\n$$ \\left(\\frac{a}{3}\\right) = -1 \\quad \\text{and} \\quad \\left(\\frac{a}{5}\\right) = -1 $$\n\nNow we translate these conditions on the Legendre symbols into congruence relations for $a$ using Euler's criterion.\nFor $p=3$:\n$\\left(\\frac{a}{3}\\right) = -1 \\iff a^{(3-1)/2} \\equiv a^1 \\equiv -1 \\pmod{3}$. Since $-1 \\equiv 2 \\pmod 3$, this is equivalent to $a \\equiv 2 \\pmod{3}$.\n\nFor $p=5$:\n$\\left(\\frac{a}{5}\\right) = -1 \\iff a^{(5-1)/2} \\equiv a^2 \\equiv -1 \\pmod{5}$. The quadratic residues modulo $5$ are $1^2 \\equiv 1$ and $2^2 \\equiv 4$. The integers that are not quadratic residues (non-residues) are $2$ and $3$. Thus, this is equivalent to $a \\equiv 2 \\pmod{5}$ or $a \\equiv 3 \\pmod{5}$.\n\nWe must find the integers $a \\in S$ that satisfy these congruence conditions. This leads to two systems of congruences:\n\nSystem 1:\n$$\n\\begin{cases}\na \\equiv 2 \\pmod{3} \\\\\na \\equiv 2 \\pmod{5}\n\\end{cases}\n$$\nBy the CRT, there is a unique solution modulo $3 \\times 5 = 15$. By inspection, the solution is $a \\equiv 2 \\pmod{15}$. The only integer in the set $S$ that satisfies this is $a=2$.\nFor $a=2$, we verify: $\\left(\\frac{2}{3}\\right) = -1$ and $\\left(\\frac{2}{5}\\right)=-1$. Thus $\\left(\\frac{2}{15}\\right)=(-1)(-1)=1$, and since $\\left(\\frac{2}{3}\\right) \\neq 1$, $2$ is not a quadratic residue mod $15$. So $a=2$ is one such value.\n\nSystem 2:\n$$\n\\begin{cases}\na \\equiv 2 \\pmod{3} \\\\\na \\equiv 3 \\pmod{5}\n\\end{cases}\n$$\nFrom the first congruence, $a = 3k+2$ for some integer $k$. Substituting this into the second congruence:\n$3k+2 \\equiv 3 \\pmod{5}$\n$3k \\equiv 1 \\pmod{5}$\nTo solve for $k$, we multiply by the modular inverse of $3$ modulo $5$, which is $2$ (since $3 \\times 2 = 6 \\equiv 1 \\pmod{5}$):\n$2 \\times (3k) \\equiv 2 \\times 1 \\pmod{5}$\n$k \\equiv 2 \\pmod{5}$\nSo $k$ can be written as $k=5j+2$ for some integer $j$. Substituting this back into the expression for $a$:\n$a = 3(5j+2)+2 = 15j+6+2 = 15j+8$\nThe solution is $a \\equiv 8 \\pmod{15}$. The only integer in the set $S$ that satisfies this is $a=8$.\nFor $a=8$, we verify: $8 \\equiv 2 \\pmod 3 \\implies \\left(\\frac{8}{3}\\right)=-1$. And $8 \\equiv 3 \\pmod 5 \\implies \\left(\\frac{8}{5}\\right)=-1$. Thus $\\left(\\frac{8}{15}\\right)=(-1)(-1)=1$, and since $\\left(\\frac{8}{3}\\right) \\neq 1$, $8$ is not a quadratic residue mod $15$. So $a=8$ is the second such value.\n\nThe integers in the specified range that satisfy the conditions are $2$ and $8$. There are exactly two such integers.\nTherefore, the number $F$ is $2$.", "answer": "$$\\boxed{2}$$", "id": "3084835"}, {"introduction": "Theoretical tools like Euler's criterion are not just for pencil-and-paper proofs; they form the basis of efficient computational algorithms. This practice [@problem_id:3084857] challenges you to move from theory to implementation by designing an algorithm to compute the Legendre symbol using the repeated squaring method. By analyzing the algorithm's time complexity, you will see how abstract number-theoretic concepts are translated into practical, high-performance code, a cornerstone of modern cryptography and computational mathematics.", "problem": "Let $p$ be an odd prime and let $a$ be any integer. The goal is to derive, from first principles, an algorithm to compute $a^{\\frac{p-1}{2}} \\bmod p$ using repeated squaring and, based on the definition of quadratic residues, determine the Legendre symbol $\\left(\\frac{a}{p}\\right)$, where $\\left(\\frac{a}{p}\\right) \\in \\{-1,0,1\\}$. Begin from the following foundational base:\n- The definition of a quadratic residue modulo $p$: an integer $a$ is a quadratic residue modulo $p$ if there exists an integer $x$ such that $x^2 \\equiv a \\pmod{p}$; otherwise $a$ is a quadratic non-residue modulo $p$.\n- The definition of the Legendre symbol: $\\left(\\frac{a}{p}\\right) = 0$ if $p \\mid a$, $\\left(\\frac{a}{p}\\right) = 1$ if $a$ is a quadratic residue modulo $p$ and $\\gcd(a,p)=1$ (Greatest Common Divisor (GCD)), and $\\left(\\frac{a}{p}\\right) = -1$ if $a$ is a quadratic non-residue modulo $p$.\n- Fermat's little theorem: for any integer $a$ with $\\gcd(a,p)=1$, $a^{p-1} \\equiv 1 \\pmod{p}$.\n\nUsing only these facts, derive why computing $a^{\\frac{p-1}{2}} \\bmod p$ suffices to decide whether $a$ is a quadratic residue modulo $p$, and hence to determine $\\left(\\frac{a}{p}\\right)$. Design an algorithm based on repeated squaring (also known as binary exponentiation) to compute $a^{\\frac{p-1}{2}} \\bmod p$, and explain how to map the output to the value of the Legendre symbol $\\left(\\frac{a}{p}\\right)$. Analyze the time complexity of your algorithm in terms of the bit-length of $p$, that is, in terms of $\\log p$, explicitly giving the number of modular multiplications and the cost model for integer multiplication.\n\nYour program must implement the repeated squaring algorithm for modular exponentiation without relying on any built-in modular exponentiation shortcuts. For each test case, it must:\n- Compute $r \\equiv a^{\\frac{p-1}{2}} \\bmod p$.\n- Output the Legendre symbol value $\\left(\\frac{a}{p}\\right)$ according to the definition, using the computed $r$ and the residue classes modulo $p$.\n\nUse the following test suite, which covers a general case, boundary conditions, and significant edge cases:\n- $(p,a) = (\\,3,\\,2\\,)$,\n- $(p,a) = (\\,3,\\,0\\,)$,\n- $(p,a) = (\\,11,\\,5\\,)$,\n- $(p,a) = (\\,29,\\,7\\,)$,\n- $(p,a) = (\\,13,\\,-1\\,)$,\n- $(p,a) = (\\,101,\\,25\\,)$,\n- $(p,a) = (\\,29,\\,29\\,)$,\n- $(p,a) = (\\,1000000007,\\,2\\,)$.\n\nYour program should produce a single line of output containing the Legendre symbol values for the above test cases as a comma-separated list of integers enclosed in square brackets, in the same order as listed (for example, $[1,0,-1]$). No physical units or angle units are involved, and all outputs are integers.", "solution": "The problem is valid as it is scientifically grounded in number theory, well-posed, and objective. It provides a self-contained set of definitions and theorems (quadratic residues, Legendre symbol, Fermat's Little Theorem) and asks for a derivation of Euler's criterion, the design of an algorithm based on this criterion, a complexity analysis, and a specific implementation for a given set of test cases. All components are mathematically sound and formalizable.\n\n### Theoretical Derivation and Algorithmic Design\n\nThe core task is to justify and implement a method for computing the Legendre symbol $\\left(\\frac{a}{p}\\right)$ for an odd prime $p$ and an integer $a$. The problem requires a derivation based on the fact that the value of the Legendre symbol is congruent to $a^{\\frac{p-1}{2}}$ modulo $p$. This relationship is known as Euler's criterion.\n\nWe will derive this criterion by considering the three possible values of $\\left(\\frac{a}{p}\\right)$: $0$, $1$, and $-1$.\n\n**Case 1: $\\left(\\frac{a}{p}\\right) = 0$**\nBy definition, $\\left(\\frac{a}{p}\\right) = 0$ if and only if $p \\mid a$, which is equivalent to $a \\equiv 0 \\pmod{p}$.\nSince $p$ is an odd prime, $p \\geq 3$, which implies that the exponent $\\frac{p-1}{2}$ is a positive integer.\nTherefore, if $a \\equiv 0 \\pmod{p}$, then $a^{\\frac{p-1}{2}} \\equiv 0^{\\frac{p-1}{2}} \\equiv 0 \\pmod{p}$.\nIn this case, $\\left(\\frac{a}{p}\\right) = 0$ and $a^{\\frac{p-1}{2}} \\equiv 0 \\pmod{p}$. The values match.\n\n**Case 2: $\\left(\\frac{a}{p}\\right) = 1$**\nBy definition, $\\left(\\frac{a}{p}\\right) = 1$ if and only if $a$ is a quadratic residue modulo $p$ and $\\gcd(a,p)=1$.\nThis means there exists an integer $x$ such that $x^2 \\equiv a \\pmod{p}$. Since $\\gcd(a,p)=1$, it must be that $\\gcd(x,p)=1$ as well (if $p \\mid x$, then $p \\mid x^2$, which would imply $p \\mid a$).\nBy Fermat's Little Theorem, since $\\gcd(x,p)=1$, we have $x^{p-1} \\equiv 1 \\pmod{p}$.\nNow we raise $a$ to the power of $\\frac{p-1}{2}$ modulo $p$:\n$$\na^{\\frac{p-1}{2}} \\equiv (x^2)^{\\frac{p-1}{2}} \\equiv x^{2 \\cdot \\frac{p-1}{2}} \\equiv x^{p-1} \\pmod{p}\n$$\nSubstituting $x^{p-1} \\equiv 1 \\pmod{p}$, we get:\n$$\na^{\\frac{p-1}{2}} \\equiv 1 \\pmod{p}\n$$\nIn this case, $\\left(\\frac{a}{p}\\right) = 1$ and $a^{\\frac{p-1}{2}} \\equiv 1 \\pmod{p}$. The values match.\n\n**Case 3: $\\left(\\frac{a}{p}\\right) = -1$**\nBy definition, $\\left(\\frac{a}{p}\\right) = -1$ if and only if $a$ is a quadratic non-residue modulo $p$. This implies $\\gcd(a,p)=1$.\nBy Fermat's Little Theorem, since $\\gcd(a,p)=1$, we have $a^{p-1} \\equiv 1 \\pmod{p}$.\nThis can be rewritten as $a^{p-1} - 1 \\equiv 0 \\pmod{p}$.\nFactoring the left side as a difference of squares gives:\n$$\n(a^{\\frac{p-1}{2}} - 1)(a^{\\frac{p-1}{2}} + 1) \\equiv 0 \\pmod{p}\n$$\nSince $p$ is a prime number, this implies that either $a^{\\frac{p-1}{2}} - 1 \\equiv 0 \\pmod{p}$ or $a^{\\frac{p-1}{2}} + 1 \\equiv 0 \\pmod{p}$.\nThis means $a^{\\frac{p-1}{2}}$ must be congruent to either $1$ or $-1$ modulo $p$.\nFrom Case $2$, we know that if $a$ is a quadratic residue, then $a^{\\frac{p-1}{2}} \\equiv 1 \\pmod{p}$. The set of quadratic residues are the roots of the polynomial congruence $X^{\\frac{p-1}{2}} - 1 \\equiv 0 \\pmod{p}$. By Lagrange's theorem on polynomial congruences, this polynomial has at most $\\frac{p-1}{2}$ roots modulo $p$. It is a known result from group theory (the group of units modulo $p$, $\\mathbb{Z}_p^*$, is cyclic) that there are exactly $\\frac{p-1}{2}$ quadratic residues and $\\frac{p-1}{2}$ quadratic non-residues.\nSince $a$ is a quadratic non-residue in this case, it cannot be a root of $X^{\\frac{p-1}{2}} - 1 \\equiv 0 \\pmod{p}$. Therefore, it cannot be that $a^{\\frac{p-1}{2}} \\equiv 1 \\pmod{p}$.\nThe only remaining possibility is:\n$$\na^{\\frac{p-1}{2}} \\equiv -1 \\pmod{p}\n$$\nIn this case, $\\left(\\frac{a}{p}\\right) = -1$ and $a^{\\frac{p-1}{2}} \\equiv -1 \\pmod{p}$. The values match.\n\n**Conclusion (Euler's Criterion)**\nCombining all three cases, we have established the relationship:\n$$\n\\left(\\frac{a}{p}\\right) \\equiv a^{\\frac{p-1}{2}} \\pmod{p}\n$$\nwhere the result of the exponentiation modulo $p$ is interpreted as $p-1$ for $-1$. This provides a direct computational method for finding the Legendre symbol.\n\n### Algorithm for Modular Exponentiation (Repeated Squaring)\n\nTo compute $r \\equiv a^{\\frac{p-1}{2}} \\pmod{p}$ efficiently, we use the method of repeated squaring (also called binary exponentiation). This algorithm avoids computing the very large intermediate value of $a^{\\frac{p-1}{2}}$ before taking the modulus.\n\nLet the base be $b$, the exponent be $e$, and the modulus be $m$. We want to compute $b^e \\pmod{m}$. The algorithm works by considering the binary representation of the exponent $e = \\sum_{i=0}^{k} c_i 2^i$, where $c_i \\in \\{0, 1\\}$.\nThe computation proceeds as follows:\n1. Initialize a result variable to $1$.\n2. Reduce the base $b$ modulo $m$.\n3. Iterate while the exponent $e > 0$:\n   a. If the current exponent $e$ is odd (i.e., the last bit is $1$), multiply the result by the current base (modulo $m$).\n   b. Square the base (modulo $m$). This prepares the base for the next bit of the exponent (e.g., from $b^{2^i}$ to $b^{2^{i+1}}$).\n   c. Right-shift the exponent by one bit (equivalent to integer division by $2$), effectively processing the bits from least significant to most significant.\n\nFor our problem, $b=a$, $e=\\frac{p-1}{2}$, and $m=p$.\n\n### Mapping to the Legendre Symbol\n\nThe final algorithm is as follows:\n1. Given $a$ and an odd prime $p$. First, reduce $a$ modulo $p$. Let this new value also be $a$. That is, $a \\leftarrow a \\pmod{p}$.\n2. If $a=0$, then $\\left(\\frac{a}{p}\\right)=0$.\n3. If $a \\neq 0$, compute $r = a^{\\frac{p-1}{2}} \\pmod{p}$ using the repeated squaring algorithm described above.\n4. Based on the derivation:\n   - If $r=1$, then $\\left(\\frac{a}{p}\\right)=1$.\n   - If $r=p-1$ (which is $\\equiv -1 \\pmod{p}$), then $\\left(\\frac{a}{p}\\right)=-1$.\n   - For a prime modulus $p$, no other result for $r$ is possible.\n\n### Complexity Analysis\n\nLet $n = \\log_2 p$ be the bit-length of the prime $p$. The exponent is $E = \\frac{p-1}{2}$, which also has a bit-length of approximately $n$.\n\n1.  **Number of Modular Multiplications**: The repeated squaring algorithm has a main loop that iterates as many times as there are bits in the exponent $E$. The number of iterations is $\\lfloor \\log_2 E \\rfloor + 1 \\approx n$. Inside the loop, one modular squaring is always performed. A modular multiplication is performed only if the corresponding bit of the exponent is $1$. In the worst case (all bits are $1$), there are approximately $n$ squarings and $n$ multiplications, for a total of $2n$ modular multiplications. In the best case (one bit is $1$), there are $n$ squarings and $1$ multiplication. Thus, the number of modular multiplications is $O(\\log p)$.\n\n2.  **Cost of Integer Operations**: The numbers involved in the multiplications are all less than $p$, so their bit-length is at most $n = \\lceil \\log_2 p \\rceil$. Let $M(n)$ be the time complexity of multiplying two $n$-bit integers.\n    - Using the standard \"schoolbook\" multiplication algorithm, $M(n) = O(n^2)$.\n    - A modular multiplication $(x \\cdot y) \\pmod p$ involves one integer multiplication (cost $M(n)$) and one integer division with remainder, which has a similar cost, typically also $O(n^2)$ with a simple algorithm. Thus, one modular multiplication costs $O((\\log p)^2)$.\n\n3.  **Total Time Complexity**: The total time complexity is the number of modular multiplications multiplied by the cost of each.\n    $$\n    \\text{Complexity} = O(\\log p) \\times (\\text{Cost of one modular multiplication})\n    $$\n    $$\n    \\text{Complexity} = O(\\log p) \\times O((\\log p)^2) = O((\\log p)^3)\n    $$\n    Using faster integer multiplication algorithms like Karatsuba ($M(n) = O(n^{\\log_2 3})$) would reduce the overall complexity.", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the Legendre symbol for a series of test cases using Euler's criterion\n    and a custom implementation of the repeated squaring algorithm.\n    \"\"\"\n\n    def custom_mod_pow(base, exp, mod):\n        \"\"\"\n        Computes (base^exp) % mod using repeated squaring (binary exponentiation).\n        This implementation is required by the problem statement and does not use\n        the built-in pow(base, exp, mod) function.\n        \"\"\"\n        result = 1\n        base = base % mod\n        while exp > 0:\n            # If exponent is odd, multiply base with result\n            if exp % 2 == 1:\n                result = (result * base) % mod\n            # Exponent must be even now, so we can halve it\n            exp = exp // 2\n            # Square the base\n            base = (base * base) % mod\n        return result\n\n    def legendre_symbol(a, p):\n        \"\"\"\n        Computes the Legendre symbol (a/p) for an odd prime p.\n        (a/p) = 0 if p | a\n        (a/p) = 1 if a is a quadratic residue mod p and p does not divide a.\n        (a/p) = -1 if a is a quadratic non-residue mod p.\n        This is determined by computing a^((p-1)/2) mod p.\n        \"\"\"\n        # The problem statement guarantees p is an odd prime.\n        \n        # Reduce a modulo p. This handles large and negative inputs for a.\n        a = a % p\n        \n        # Case 1: (a/p) = 0 if a is a multiple of p\n        if a == 0:\n            return 0\n        \n        # Case 2 & 3: (a/p) is 1 or -1, determined by Euler's criterion.\n        exponent = (p - 1) // 2\n        result = custom_mod_pow(a, exponent, p)\n        \n        # According to the derived theory, the result must be 1 or p-1 (which is -1 mod p).\n        if result == 1:\n            return 1\n        else:\n            # The result must be p-1\n            return -1\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (3, 2),\n        (3, 0),\n        (11, 5),\n        (29, 7),\n        (13, -1),\n        (101, 25),\n        (29, 29),\n        (1000000007, 2),\n    ]\n\n    results = []\n    for p, a in test_cases:\n        # Main logic to calculate the result for one case goes here.\n        result = legendre_symbol(a, p)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n\n```", "id": "3084857"}]}
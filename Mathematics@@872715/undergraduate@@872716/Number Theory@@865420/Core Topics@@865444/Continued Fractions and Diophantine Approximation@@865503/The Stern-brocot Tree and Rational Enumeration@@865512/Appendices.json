{"hands_on_practices": [{"introduction": "To truly understand the Stern-Brocot tree, the best first step is to build it yourself. This exercise guides you through the direct, hands-on construction of the tree's initial levels using the mediant rule. By generating these fractions, you will gain a concrete feel for how the tree populates itself and verify a remarkable invariant property: for any two adjacent fractions $\\frac{a}{b}$ and $\\frac{c}{d}$, the quantity $ad-bc$ is always equal to $1$. [@problem_id:3093491] This property is the cornerstone of the tree's structure and guarantees that every fraction generated is in its simplest form.", "problem": "Consider the Stern–Brocot tree of reduced rational numbers. Begin with the sentinel fractions $\\frac{1}{0}$ and $\\frac{0}{1}$ written in descending order, and define the mediant of two fractions $\\frac{a}{b}$ and $\\frac{c}{d}$ to be $\\frac{a+c}{b+d}$. In the Stern–Brocot construction, each successive level is obtained by inserting, between every adjacent pair $\\frac{a}{b}$ and $\\frac{c}{d}$ from the previous level, the single mediant $\\frac{a+c}{b+d}$, keeping the sequence in descending order.\n\nFor this problem, define level $0$ to be the row consisting of the two sentinel fractions $\\left(\\frac{1}{0}, \\frac{0}{1}\\right)$. For each integer $n \\geq 1$, define level $n$ by inserting the mediant between each adjacent pair of level $n-1$, with the resulting row still written in descending order.\n\nTasks:\n- Construct explicitly levels $0$, $1$, $2$, $3$, and $4$ of the Stern–Brocot tree in descending order.\n- Using only the definition of mediant and basic properties of integer arithmetic, verify that for every adjacent pair $\\left(\\frac{a}{b}, \\frac{c}{d}\\right)$ appearing in any of these constructed levels with $\\frac{a}{b}  \\frac{c}{d}$, the determinant condition $ad - bc = 1$ holds.\n- Let $S$ be the sum of the quantities $ad - bc$ taken over all adjacent pairs in level $4$. Compute $S$.\n\nExpress your final answer as an exact number. No rounding is required.", "solution": "The problem requires us to construct the initial levels of the Stern-Brocot tree, verify a fundamental property of its adjacent fractions, and compute a sum based on this property. We will address each task in sequence.\n\nThe construction of the Stern–Brocot tree begins with the sentinel fractions $\\frac{1}{0}$ and $\\frac{0}{1}$. Level $n$ is generated from level $n-1$ by inserting the mediant $\\frac{a+c}{b+d}$ between each adjacent pair of fractions $\\frac{a}{b}$ and $\\frac{c}{d}$ from level $n-1$.\n\n**Task 1: Construction of Levels $0$ through $4$**\n\nLevel $0$ is given as the initial pair of sentinels.\nLevel $0$: $\\left( \\frac{1}{0}, \\frac{0}{1} \\right)$\n\nLevel $1$ is formed by inserting the mediant of the pair in level $0$. The mediant of $\\left(\\frac{1}{0}, \\frac{0}{1}\\right)$ is $\\frac{1+0}{0+1} = \\frac{1}{1}$.\nLevel $1$: $\\left( \\frac{1}{0}, \\frac{1}{1}, \\frac{0}{1} \\right)$\n\nLevel $2$ is formed by inserting mediants between the adjacent pairs of level $1$.\nThe pairs are $\\left(\\frac{1}{0}, \\frac{1}{1}\\right)$ and $\\left(\\frac{1}{1}, \\frac{0}{1}\\right)$.\nThe mediant of $\\left(\\frac{1}{0}, \\frac{1}{1}\\right)$ is $\\frac{1+1}{0+1} = \\frac{2}{1}$.\nThe mediant of $\\left(\\frac{1}{1}, \\frac{0}{1}\\right)$ is $\\frac{1+0}{1+1} = \\frac{1}{2}$.\nInserting these in order gives:\nLevel $2$: $\\left( \\frac{1}{0}, \\frac{2}{1}, \\frac{1}{1}, \\frac{1}{2}, \\frac{0}{1} \\right)$\n\nLevel $3$ is formed from the adjacent pairs of level $2$.\nThe pairs and their mediants are:\n$\\left(\\frac{1}{0}, \\frac{2}{1}\\right) \\to \\frac{1+2}{0+1} = \\frac{3}{1}$\n$\\left(\\frac{2}{1}, \\frac{1}{1}\\right) \\to \\frac{2+1}{1+1} = \\frac{3}{2}$\n$\\left(\\frac{1}{1}, \\frac{1}{2}\\right) \\to \\frac{1+1}{1+2} = \\frac{2}{3}$\n$\\left(\\frac{1}{2}, \\frac{0}{1}\\right) \\to \\frac{1+0}{2+1} = \\frac{1}{3}$\nLevel $3$: $\\left( \\frac{1}{0}, \\frac{3}{1}, \\frac{2}{1}, \\frac{3}{2}, \\frac{1}{1}, \\frac{2}{3}, \\frac{1}{2}, \\frac{1}{3}, \\frac{0}{1} \\right)$\n\nLevel $4$ is formed from the adjacent pairs of level $3$.\nThe pairs and their mediants are:\n$\\left(\\frac{1}{0}, \\frac{3}{1}\\right) \\to \\frac{4}{1}$, $\\left(\\frac{3}{1}, \\frac{2}{1}\\right) \\to \\frac{5}{2}$, $\\left(\\frac{2}{1}, \\frac{3}{2}\\right) \\to \\frac{5}{3}$, $\\left(\\frac{3}{2}, \\frac{1}{1}\\right) \\to \\frac{4}{3}$\n$\\left(\\frac{1}{1}, \\frac{2}{3}\\right) \\to \\frac{3}{4}$, $\\left(\\frac{2}{3}, \\frac{1}{2}\\right) \\to \\frac{3}{5}$, $\\left(\\frac{1}{2}, \\frac{1}{3}\\right) \\to \\frac{2}{5}$, $\\left(\\frac{1}{3}, \\frac{0}{1}\\right) \\to \\frac{1}{4}$\nLevel $4$: $\\left( \\frac{1}{0}, \\frac{4}{1}, \\frac{3}{1}, \\frac{5}{2}, \\frac{2}{1}, \\frac{5}{3}, \\frac{3}{2}, \\frac{4}{3}, \\frac{1}{1}, \\frac{3}{4}, \\frac{2}{3}, \\frac{3}{5}, \\frac{1}{2}, \\frac{2}{5}, \\frac{1}{3}, \\frac{1}{4}, \\frac{0}{1} \\right)$\n\n**Task 2: Verification of the Determinant Condition**\n\nWe must verify that for any adjacent pair of fractions $\\left(\\frac{a}{b}, \\frac{c}{d}\\right)$ with $\\frac{a}{b}  \\frac{c}{d}$ in any of the constructed levels, the condition $ad - bc = 1$ holds. We will prove this property holds for all levels by induction on the level number $n$.\n\nLet $P(n)$ be the statement that for any adjacent pair $\\left(\\frac{a}{b}, \\frac{c}{d}\\right)$ in level $n$, $ad - bc = 1$.\n\nBase Case: $n=0$.\nLevel $0$ consists of the single adjacent pair $\\left(\\frac{1}{0}, \\frac{0}{1}\\right)$. Here, $a=1$, $b=0$, $c=0$, and $d=1$.\nThe determinant is $ad - bc = (1)(1) - (0)(0) = 1$.\nThus, $P(0)$ is true.\n\nInductive Step: Assume that $P(k)$ is true for some integer $k \\geq 0$. This means for any adjacent pair $\\left(\\frac{a}{b}, \\frac{c}{d}\\right)$ in level $k$, we have $ad - bc = 1$.\nNow we must show that $P(k+1)$ is true.\nLevel $k+1$ is constructed from level $k$. Any adjacent pair in level $k+1$ is either of the form $\\left(\\frac{a}{b}, \\frac{a+c}{b+d}\\right)$ or $\\left(\\frac{a+c}{b+d}, \\frac{c}{d}\\right)$, where $\\left(\\frac{a}{b}, \\frac{c}{d}\\right)$ was an adjacent pair in level $k$ and $\\frac{a+c}{b+d}$ is their mediant.\n\nCase 1: Consider the pair $\\left(\\frac{a}{b}, \\frac{a+c}{b+d}\\right)$. The new fractions are $\\frac{a'}{b'} = \\frac{a}{b}$ and $\\frac{c'}{d'} = \\frac{a+c}{b+d}$.\nThe determinant is $a'd' - b'c' = a(b+d) - b(a+c) = ab + ad - ab - bc = ad - bc$.\nBy the inductive hypothesis, $ad - bc = 1$. So, $a'd' - b'c' = 1$.\n\nCase 2: Consider the pair $\\left(\\frac{a+c}{b+d}, \\frac{c}{d}\\right)$. The new fractions are $\\frac{a''}{b''} = \\frac{a+c}{b+d}$ and $\\frac{c''}{d''} = \\frac{c}{d}$.\nThe determinant is $a''d'' - b''c'' = (a+c)d - (b+d)c = ad + cd - bc - dc = ad - bc$.\nBy the inductive hypothesis, $ad - bc = 1$. So, $a''d'' - b''c'' = 1$.\n\nIn both cases, any new adjacent pair formed in level $k+1$ satisfies the determinant condition. Since this holds for any pair in level $k$, it holds for all new pairs in level $k+1$.\nTherefore, by the principle of mathematical induction, the property $ad - bc = 1$ is true for all adjacent pairs in all levels $n \\geq 0$ of the Stern–Brocot tree construction. This rigorously verifies the condition for the explicitly constructed levels $0, 1, 2, 3,$ and $4$.\n\n**Task 3: Computation of the Sum $S$**\n\nThe quantity $S$ is defined as the sum of $ad - bc$ taken over all adjacent pairs in level $4$.\nFirst, let's determine the number of adjacent pairs in level $4$.\nLet $T_n$ be the number of fractions in level $n$.\n$T_0 = 2$.\n$T_1 = 3$.\n$T_2 = 5$.\n$T_3 = 9$.\n$T_4 = 17$.\nThe number of fractions in level $n$ is $T_n = 2^n + 1$.\nThe number of adjacent pairs in level $n$ is $T_n - 1$.\nFor level $4$, the number of adjacent pairs is $T_4 - 1 = (2^4 + 1) - 1 = 16$.\n\nFrom Task 2, we have proven that for every adjacent pair $\\left(\\frac{a}{b}, \\frac{c}{d}\\right)$ in any level, the quantity $ad - bc$ is equal to $1$. This holds true for all $16$ adjacent pairs in level $4$.\n\nThe sum $S$ is the sum of these quantities over all adjacent pairs in level $4$.\n$$S = \\sum_{\\text{adjacent pairs in level } 4} (ad - bc)$$\nSince there are $16$ such pairs, and for each pair the value of the term is $1$, the sum is:\n$$S = \\underbrace{1 + 1 + \\dots + 1}_{16 \\text{ times}}$$\n$$S = 16 \\times 1 = 16$$\nThe total sum $S$ is $16$.", "answer": "$$\\boxed{16}$$", "id": "3093491"}, {"introduction": "While constructing the tree level by level is insightful, navigating to a specific fraction using a long path of \"left\" and \"right\" moves can be tedious. This practice introduces a more powerful and elegant computational approach using linear algebra. You will discover that the L and R navigation steps can be represented by multiplication with fixed $2 \\times 2$ matrices, allowing you to compute the fraction at the end of any path by simply multiplying the corresponding matrices. [@problem_id:3093485] This exercise beautifully connects the geometric path-finding on the tree to the algebraic structure of matrices.", "problem": "Consider the Stern-Brocot tree, constructed from the ordered pair of Farey neighbors $0/1$ and $1/0$ by iteratively inserting mediants. For any ordered pair of Farey neighbors $a/b$ and $c/d$ (so that $ad-bc=1$), the mediant is defined by $(a+c)/(b+d)$. A finite word in the alphabet $\\{L,R\\}$ encodes a sequence of left or right decisions relative to the current mediant: the letter $L$ means replace the right neighbor by the current mediant, and the letter $R$ means replace the left neighbor by the current mediant. The fraction represented by a word is the final mediant obtained after processing all letters, starting from the initial neighbors $0/1$ and $1/0$.\n\nStarting from the fundamental definition of the mediant and the invariant $ad-bc=1$ for Farey neighbors, do the following:\n\n1. Derive a $2\\times 2$ matrix formulation that updates the ordered neighbor pair under one left step $L$ and one right step $R$. Represent the current neighbors $a/b$ and $c/d$ as the columns of a matrix $\\begin{pmatrix} a  c \\\\ b  d \\end{pmatrix}$, and express the $L$ and $R$ updates as right-multiplications by fixed $2\\times 2$ matrices with integer entries and determinant $1$.\n\n2. Using your derived matrices and the initial neighbor matrix $\\begin{pmatrix} 0  1 \\\\ 1  0 \\end{pmatrix}$, compute the fraction represented by the word $LRRLLR$.\n\n3. Verify your result by performing the direct mediant iteration dictated by the same word, starting from the initial neighbors $0/1$ and $1/0$.\n\nGive your final answer as a single reduced fraction $p/q$. No rounding is required, and no units are involved.", "solution": "The problem asks for the derivation of matrix representations for steps in the Stern-Brocot tree construction, computation of a specific fraction using this formalism, and verification through direct iteration.\n\nPart 1: Derivation of the matrix formulation.\n\nLet the current ordered pair of neighbors be $a/b$ and $c/d$. We represent this pair as the columns of a $2 \\times 2$ matrix $M = \\begin{pmatrix} a  c \\\\ b  d \\end{pmatrix}$. The mediant is the fraction $m = \\frac{a+c}{b+d}$.\n\nA left step, denoted by $L$, replaces the right neighbor $c/d$ with the mediant $m$. The new pair of neighbors is $(a/b, (a+c)/(b+d))$. The corresponding matrix, $M'$, is:\n$$ M' = \\begin{pmatrix} a  a+c \\\\ b  b+d \\end{pmatrix} $$\nWe seek a matrix $U_L$ such that $M' = M U_L$.\n$$ \\begin{pmatrix} a  a+c \\\\ b  b+d \\end{pmatrix} = \\begin{pmatrix} a  c \\\\ b  d \\end{pmatrix} U_L $$\nBy inspection, the first column of $M'$ is the first column of $M$, and the second column of $M'$ is the sum of the first and second columns of $M$. This transformation is achieved by right-multiplying $M$ by the matrix $U_L = \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix}$.\n$$ \\begin{pmatrix} a  c \\\\ b  d \\end{pmatrix} \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix} = \\begin{pmatrix} a \\cdot 1 + c \\cdot 0  a \\cdot 1 + c \\cdot 1 \\\\ b \\cdot 1 + d \\cdot 0  b \\cdot 1 + d \\cdot 1 \\end{pmatrix} = \\begin{pmatrix} a  a+c \\\\ b  b+d \\end{pmatrix} = M' $$\nThe determinant of $U_L$ is $1 \\cdot 1 - 1 \\cdot 0 = 1$.\n\nA right step, denoted by $R$, replaces the left neighbor $a/b$ with the mediant $m$. The new pair of neighbors is $((a+c)/(b+d), c/d)$. The corresponding matrix, $M''$, is:\n$$ M'' = \\begin{pmatrix} a+c  c \\\\ b+d  d \\end{pmatrix} $$\nWe seek a matrix $U_R$ such that $M'' = M U_R$.\n$$ \\begin{pmatrix} a+c  c \\\\ b+d  d \\end{pmatrix} = \\begin{pmatrix} a  c \\\\ b  d \\end{pmatrix} U_R $$\nHere, the first column of $M''$ is the sum of the columns of $M$, and the second column of $M''$ is the second column of $M$. This is achieved by right-multiplying $M$ by $U_R = \\begin{pmatrix} 1  0 \\\\ 1  1 \\end{pmatrix}$.\n$$ \\begin{pmatrix} a  c \\\\ b  d \\end{pmatrix} \\begin{pmatrix} 1  0 \\\\ 1  1 \\end{pmatrix} = \\begin{pmatrix} a \\cdot 1 + c \\cdot 1  a \\cdot 0 + c \\cdot 1 \\\\ b \\cdot 1 + d \\cdot 1  b \\cdot 0 + d \\cdot 1 \\end{pmatrix} = \\begin{pmatrix} a+c  c \\\\ b+d  d \\end{pmatrix} = M'' $$\nThe determinant of $U_R$ is $1 \\cdot 1 - 0 \\cdot 1 = 1$.\nSo, the matrices for the left and right steps are $U_L = \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix}$ and $U_R = \\begin{pmatrix} 1  0 \\\\ 1  1 \\end{pmatrix}$, respectively.\n\nPart 2: Computation of the fraction for the word $LRRLLR$.\n\nThe initial neighbor pair is $(0/1, 1/0)$, represented by the matrix $M_0 = \\begin{pmatrix} 0  1 \\\\ 1  0 \\end{pmatrix}$.\nThe word $LRRLLR$ corresponds to the sequence of matrix multiplications $U_L, U_R, U_R, U_L, U_L, U_R$. The final neighbor matrix $M_f$ is given by $M_f = M_0 P$, where $P$ is the product of the update matrices:\n$$ P = U_L U_R U_R U_L U_L U_R $$\nLet's compute $P$:\n$ U_L U_R = \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix} \\begin{pmatrix} 1  0 \\\\ 1  1 \\end{pmatrix} = \\begin{pmatrix} 2  1 \\\\ 1  1 \\end{pmatrix} $\n$ (U_L U_R) U_R = \\begin{pmatrix} 2  1 \\\\ 1  1 \\end{pmatrix} \\begin{pmatrix} 1  0 \\\\ 1  1 \\end{pmatrix} = \\begin{pmatrix} 3  1 \\\\ 2  1 \\end{pmatrix} $\n$ (U_L U_R U_R) U_L = \\begin{pmatrix} 3  1 \\\\ 2  1 \\end{pmatrix} \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix} = \\begin{pmatrix} 3  4 \\\\ 2  3 \\end{pmatrix} $\n$ (U_L U_R^2 U_L) U_L = \\begin{pmatrix} 3  4 \\\\ 2  3 \\end{pmatrix} \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix} = \\begin{pmatrix} 3  7 \\\\ 2  5 \\end{pmatrix} $\n$ P = (U_L U_R^2 U_L^2) U_R = \\begin{pmatrix} 3  7 \\\\ 2  5 \\end{pmatrix} \\begin{pmatrix} 1  0 \\\\ 1  1 \\end{pmatrix} = \\begin{pmatrix} 10  7 \\\\ 7  5 \\end{pmatrix} $\nNow, we find the final neighbor matrix $M_f$:\n$$ M_f = M_0 P = \\begin{pmatrix} 0  1 \\\\ 1  0 \\end{pmatrix} \\begin{pmatrix} 10  7 \\\\ 7  5 \\end{pmatrix} = \\begin{pmatrix} 7  5 \\\\ 10  7 \\end{pmatrix} $$\nThe columns of $M_f$ represent the final pair of neighbors, which are $7/10$ and $5/7$.\nThe fraction represented by the word is the mediant of this final pair. Let the final pair be $(a_f/b_f, c_f/d_f)$. The fraction is $\\frac{a_f+c_f}{b_f+d_f}$.\nThe vector $\\begin{pmatrix} p \\\\ q \\end{pmatrix}$ for this fraction can be computed as $M_f \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$.\n$$ \\begin{pmatrix} p \\\\ q \\end{pmatrix} = \\begin{pmatrix} 7  5 \\\\ 10  7 \\end{pmatrix} \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 7+5 \\\\ 10+7 \\end{pmatrix} = \\begin{pmatrix} 12 \\\\ 17 \\end{pmatrix} $$\nThe fraction is $12/17$.\n\nPart 3: Verification by direct mediant iteration.\n\nWe start with the neighbors $(a/b, c/d) = (0/1, 1/0)$. We process the word $LRRLLR$.\n\n1.  Step $L$: The current mediant is $m_1 = \\frac{0+1}{1+0} = 1/1$. The new neighbors are $(0/1, 1/1)$.\n2.  Step $R$: The current mediant is $m_2 = \\frac{0+1}{1+1} = 1/2$. The new neighbors are $(1/2, 1/1)$.\n3.  Step $R$: The current mediant is $m_3 = \\frac{1+1}{2+1} = 2/3$. The new neighbors are $(2/3, 1/1)$.\n4.  Step $L$: The current mediant is $m_4 = \\frac{2+1}{3+1} = 3/4$. The new neighbors are $(2/3, 3/4)$.\n5.  Step $L$: The current mediant is $m_5 = \\frac{2+3}{3+4} = 5/7$. The new neighbors are $(2/3, 5/7)$.\n6.  Step $R$: The current mediant is $m_6 = \\frac{2+5}{3+7} = 7/10$. The new neighbors are $(7/10, 5/7)$.\n\nAfter processing all letters in the word $LRRLLR$, the final pair of neighbors is $(7/10, 5/7)$. This matches the columns of the matrix $M_f$ calculated in Part 2.\nThe problem defines the fraction represented by the word as the \"final mediant obtained after processing all letters\". This means we must compute the mediant of the final neighbor pair obtained after all six steps.\nFinal mediant = $\\frac{7+5}{10+7} = \\frac{12}{17}$.\nThis confirms the result obtained via the matrix method. The fraction $12/17$ is in simplest form as $17$ is a prime number and $12$ is not a multiple of $17$.", "answer": "$$\\boxed{\\frac{12}{17}}$$", "id": "3093485"}, {"introduction": "The beauty of mathematics often lies in unexpected connections between different concepts. This exercise reveals a profound link between the path to a fraction $p/q$ in the Stern-Brocot tree and the steps of the classical Euclidean algorithm applied to the pair $(p,q)$. You will prove that the sequence of subtractions in the algorithm directly translates into the sequence of L/R moves needed to locate the fraction. [@problem_id:3093500] This practice not only provides a surprisingly efficient way to find the \"address\" of any rational number but also showcases the deep structural unity between algorithms for enumeration and for finding greatest common divisors.", "problem": "Let $p/q$ be a positive rational number in lowest terms. The Stern–Brocot tree is built from the two sentinels $0/1$ and $1/0$ by repeatedly replacing a neighboring pair $a/b$ and $c/d$ (with $ad-bc=1$) by inserting their mediant $(a+c)/(b+d)$ between them. For any target $p/q$, starting from the initial bounding pair $0/1$ and $1/0$, the standard Stern–Brocot search moves either left (denoted $L$) or right (denoted $R$) according to whether $p/q$ is less than or greater than the current mediant, until the mediant equals $p/q$. This defines the unique $L/R$ path of $p/q$.\n\nConsider the subtraction-based Euclidean algorithm on the pair $(p,q)$: while $p \\neq q$, if $pq$ replace $(p,q)$ by $(p-q,q)$ and record the symbol $R$; if $qp$ replace $(p,q)$ by $(p,q-p)$ and record the symbol $L$. Stop when $(p,q)=(1,1)$. \n\nTasks:\n1. Prove from first principles (starting from the definition of the Stern–Brocot tree via mediants and the subtraction-based Euclidean algorithm) that the concatenation of the recorded $L/R$ symbols is exactly the unique Stern–Brocot path from $0/1,1/0$ to $p/q$.\n2. Apply this to $p/q=36/25$: run the subtraction-based Euclidean algorithm on $(36,25)$, produce the $L/R$ path, and then form the base-$2$ integer $N$ whose binary expansion is obtained by first writing a leading $1$ and then, in order, writing $0$ for each $L$ and $1$ for each $R$ in your path. Compute $N$ as a decimal integer.\n\nGive your final answer as the exact integer $N$ (no rounding).", "solution": "We begin with core definitions. The Stern–Brocot tree is generated by repeatedly inserting mediants. If $a/b$ and $c/d$ are adjacent fractions (that is, $ad-bc=1$) in increasing order, then their mediant is $(a+c)/(b+d)$, and it lies strictly between $a/b$ and $c/d$. The Stern–Brocot search for a target $p/q$ starts with the bounding neighbors $0/1$ and $1/0$ and iteratively compares $p/q$ with the mediant of the current neighbors. If $p/q$ is less than the mediant, we move left ($L$), replacing the right neighbor by the mediant; if $p/q$ is greater than the mediant, we move right ($R$), replacing the left neighbor by the mediant. This process terminates at $p/q$ in finitely many steps because $p/q$ has a finite simple continued fraction.\n\nWe now show that the $L/R$ symbols recorded by the subtraction-based Euclidean algorithm on $(p,q)$ coincide with the Stern–Brocot search path.\n\nStep 1: A representation lemma and comparison criterion. Suppose $a/b$ and $c/d$ are adjacent fractions with $ad-bc=1$, and $p/q$ is any reduced fraction strictly between them. Then there exist unique positive integers $m,n$ such that\n$$\n\\frac{p}{q}=\\frac{m a+n c}{m b+n d}.\n$$\nUniqueness and positivity follow from the unimodularity condition $ad-bc=1$ and standard properties of the Farey graph; existence follows by solving the linear system\n$$\n\\begin{pmatrix} a  c \\\\ b  d\\end{pmatrix}\\begin{pmatrix} m \\\\ n\\end{pmatrix}=\\begin{pmatrix} p \\\\ q\\end{pmatrix}\n$$\nand using $ad-bc=1$ to see that $\\begin{pmatrix} a  c \\\\ b  d\\end{pmatrix}$ is invertible over the integers with a nonnegative inverse on the cone of positive vectors.\n\nGiven this representation, compare $p/q$ to the mediant $(a+c)/(b+d)$ by considering the sign of\n$$\n\\Delta=\\left(\\frac{m a+n c}{m b+n d}\\right)-\\left(\\frac{a+c}{b+d}\\right)=\\frac{(m a+n c)(b+d)-(m b+n d)(a+c)}{(m b+n d)(b+d)}.\n$$\nThe denominator is positive. The numerator simplifies to\n$$\n(m a+n c)(b+d)-(m b+n d)(a+c)=m(ad-bc)+n(cb-da)=(m-n)(ad-bc)=m-n\n$$\nsince $ad-bc=1$. Therefore,\n$$\n\\frac{p}{q}\\frac{a+c}{b+d}\\iff mn,\\quad \\frac{p}{q}\\frac{a+c}{b+d}\\iff mn.\n$$\n\nStep 2: Inductive correspondence with the subtraction-based Euclidean algorithm. Initialize the bounding neighbors as $a/b=0/1$ and $c/d=1/0$. Any positive reduced $p/q$ admits the representation\n$$\n\\frac{p}{q}=\\frac{m a+n c}{m b+n d}=\\frac{m\\cdot 0+n\\cdot 1}{m\\cdot 1+n\\cdot 0}=\\frac{n}{m}\n$$\nso here $m=q$ and $n=p$.\n\nAt each step of the Stern–Brocot search, we compare $p/q$ to the mediant $(a+c)/(b+d)$ and move right if $p/q$ is larger and left if smaller. By the criterion above, this is equivalent to testing whether $mn$ (move right) or $mn$ (move left). When we move right, the new left neighbor becomes the mediant while the right neighbor is unchanged; the new representation of $p/q$ with respect to the updated neighbors becomes\n$$\n\\frac{p}{q}=\\frac{(m-n)\\,(a)+n\\,(c)}{(m-n)\\,(b)+n\\,(d)},\n$$\nthat is, the coefficient pair $(m,n)$ is updated to $(m-n,n)$. Similarly, when we move left, the new coefficient pair becomes $(m,n-m)$ with neighbors $(a,b)$ unchanged and right neighbor updated to the mediant. These updates are exactly the steps of the subtraction-based Euclidean algorithm on the pair $(m,n)$, where at each step we replace the larger by its difference with the smaller and record the symbol $R$ if $mn$ and $L$ if $nm$.\n\nSince initially $(m,n)=(q,p)$ and the subtraction-based Euclidean algorithm on $(q,p)$ records $R$ when the first entry exceeds the second and $L$ when the second exceeds the first, the recorded symbols agree with the Stern–Brocot decisions. Moreover, the process must terminate when $m=n$, at which point the mediant equals the target fraction, because the representation yields\n$$\n\\frac{p}{q}=\\frac{m a+m c}{m b+m d}=\\frac{a+c}{b+d},\n$$\ni.e., the current mediant equals $p/q$. This proves that the concatenation of the recorded $L/R$ symbols from the subtraction-based Euclidean algorithm on $(p,q)$ is exactly the unique Stern–Brocot path to $p/q$.\n\nStep 3: Apply to $36/25$. Run the subtraction-based Euclidean algorithm on $(36,25)$, recording $R$ when the first entry is larger and $L$ when the second is larger, and stopping at $(1,1)$:\n- $(36,25)$: $3625$, record $R$, update to $(36-25,25)=(11,25)$.\n- $(11,25)$: $2511$, record $L$, update to $(11,25-11)=(11,14)$.\n- $(11,14)$: $1411$, record $L$, update to $(11,14-11)=(11,3)$.\n- $(11,3)$: $113$, record $R$, update to $(11-3,3)=(8,3)$.\n- $(8,3)$: $83$, record $R$, update to $(8-3,3)=(5,3)$.\n- $(5,3)$: $53$, record $R$, update to $(5-3,3)=(2,3)$.\n- $(2,3)$: $32$, record $L$, update to $(2,3-2)=(2,1)$.\n- $(2,1)$: $21$, record $R$, update to $(2-1,1)=(1,1)$.\nStop. The $L/R$ path is\n$$\nR\\,L\\,L\\,R\\,R\\,R\\,L\\,R.\n$$\n\nStep 4: Encode as a base-$2$ integer. Map $L\\mapsto 0$ and $R\\mapsto 1$, and prepend a leading $1$. The resulting binary digits are\n$$\n1\\,\\,1\\,0\\,0\\,1\\,1\\,1\\,0\\,1,\n$$\nwhich is the base-$2$ numeral with value\n$$\nN=1\\cdot 2^{8}+1\\cdot 2^{7}+0\\cdot 2^{6}+0\\cdot 2^{5}+1\\cdot 2^{4}+1\\cdot 2^{3}+1\\cdot 2^{2}+0\\cdot 2^{1}+1\\cdot 2^{0}.\n$$\nCompute:\n$$\nN=256+128+0+0+16+8+4+0+1=413.\n$$\n\nTherefore, the required integer is $N=413$.", "answer": "$$\\boxed{413}$$", "id": "3093500"}]}
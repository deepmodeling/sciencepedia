{"hands_on_practices": [{"introduction": "The classic birthday problem often surprises us with its counter-intuitive results. To begin our exploration, we'll start with the fundamental calculation that underpins this phenomenon. This first exercise [@problem_id:1404644] asks you to calculate the probability of the complementary event—that no two items land in the same spot—which is often a simpler path to finding the probability of a collision.", "problem": "A computer science student is experimenting with a simple hashing function designed to map data keys to a hash table. The hash table has $M=12$ available slots, indexed 0 through 11. The student assumes their hashing function distributes keys uniformly and randomly across these slots, meaning any key has an equal probability of being mapped to any of the 12 slots.\n\nIf the student inserts $N=5$ distinct keys into the initially empty hash table, what is the probability that no two keys are mapped to the same slot (i.e., no collisions occur)?\n\nCalculate your answer as a decimal, and round it to four significant figures.", "solution": "Each key is mapped independently and uniformly to one of $M=12$ slots. For no collisions with $N=5$ distinct keys, the second key must avoid the first key’s slot, the third must avoid the first two, and so on. Thus the probability is the product of conditional probabilities:\n$$\nP=\\frac{12}{12}\\cdot\\frac{11}{12}\\cdot\\frac{10}{12}\\cdot\\frac{9}{12}\\cdot\\frac{8}{12}.\n$$\nSimplifying,\n$$\nP=\\frac{12\\cdot 11\\cdot 10\\cdot 9\\cdot 8}{12^{5}}=\\frac{11\\cdot 10\\cdot 9\\cdot 8}{12^{4}}=\\frac{7920}{20736}=\\frac{55}{144}.\n$$\nAs a decimal rounded to four significant figures,\n$$\nP=\\frac{55}{144}\\approx 0.3819.\n$$", "answer": "$$\\boxed{0.3819}$$", "id": "1404644"}, {"introduction": "One of the most famous aspects of the birthday problem is determining the surprisingly small number of people needed in a group for a shared birthday to be more likely than not. We now shift from calculating the probability for a fixed group size to finding the group size itself. This practice [@problem_id:1404642] challenges you to find this \"collision threshold,\" the minimum number of items required for the probability of at least one collision to exceed $0.5$.", "problem": "A large-scale distributed database system uses a simple hashing scheme to distribute data keys across its servers. There are $N=64$ servers in the cluster. When a new key is added, a hash function is applied to it, and the key is stored on the server indexed by the result of `hash(key) mod N`. Assume that the hash function is ideal, meaning it distributes keys uniformly and randomly across the servers. What is the minimum number of keys that must be inserted into the database such that the probability of at least one \"collision\" (i.e., at least two keys being assigned to the same server) is strictly greater than $0.5$?", "solution": "Let $N=64$ and let $m$ denote the number of inserted keys. Under uniform hashing, the server index for each key is uniformly distributed over $\\{0,1,\\dots,63\\}$, independently of others. The probability that the $m$ keys go to distinct servers (no collision) is, for $m \\leq N$,\n$$\nP_{\\text{no coll}}(m)=\\prod_{i=0}^{m-1}\\frac{N-i}{N}=\\prod_{k=1}^{m-1}\\left(1-\\frac{k}{N}\\right).\n$$\nWe want the smallest $m$ such that the collision probability is strictly greater than $0.5$, i.e., $1-P_{\\text{no coll}}(m)> \\frac{1}{2}$ or equivalently $P_{\\text{no coll}}(m)\\frac{1}{2}$.\n\nFirst, show $P_{\\text{no coll}}(10)\\frac{1}{2}$. Using the Taylor series with remainder for $\\ln(1-x)$ and the fact that, for $x\\in(0,1)$,\n$$\n\\ln(1-x)=-x-\\frac{x^{2}}{2}-\\sum_{n=3}^{\\infty}\\frac{x^{n}}{n}\\leq -x-\\frac{x^{2}}{2},\n$$\nwe obtain\n$$\n\\ln P_{\\text{no coll}}(10)=\\sum_{k=1}^{9}\\ln\\left(1-\\frac{k}{64}\\right)\\leq -\\sum_{k=1}^{9}\\frac{k}{64}-\\frac{1}{2}\\sum_{k=1}^{9}\\left(\\frac{k}{64}\\right)^{2}.\n$$\nCompute the sums exactly:\n$$\n\\sum_{k=1}^{9}\\frac{k}{64}=\\frac{1}{64}\\cdot\\frac{9\\cdot 10}{2}=\\frac{45}{64},\n\\qquad\n\\sum_{k=1}^{9}\\left(\\frac{k}{64}\\right)^{2}=\\frac{1}{64^{2}}\\cdot\\frac{9\\cdot 10\\cdot 19}{6}=\\frac{285}{4096}.\n$$\nHence\n$$\nP_{\\text{no coll}}(10)\\leq \\exp\\!\\left(-\\frac{45}{64}-\\frac{1}{2}\\cdot\\frac{285}{4096}\\right)=\\exp\\!\\left(-\\frac{6045}{8192}\\right).\n$$\nNote that $\\frac{6045}{8192}\\frac{7}{10}$, and\n$$\n\\exp\\!\\left(\\frac{7}{10}\\right)=\\sum_{n=0}^{\\infty}\\frac{\\left(\\frac{7}{10}\\right)^{n}}{n!}1+\\frac{7}{10}+\\frac{\\left(\\frac{7}{10}\\right)^{2}}{2}+\\frac{\\left(\\frac{7}{10}\\right)^{3}}{6}\n=1+\\frac{7}{10}+\\frac{49}{200}+\\frac{343}{6000}=\\frac{12013}{6000}2.\n$$\nTherefore $\\exp\\!\\left(-\\frac{7}{10}\\right)\\frac{1}{2}$ and, by monotonicity of $\\exp$,\n$$\nP_{\\text{no coll}}(10)\\leq \\exp\\!\\left(-\\frac{6045}{8192}\\right)\\exp\\!\\left(-\\frac{7}{10}\\right)\\frac{1}{2}.\n$$\nThus, with $m=10$, the collision probability exceeds $\\frac{1}{2}$.\n\nNext, show $P_{\\text{no coll}}(9)\\frac{1}{2}$. For $m=9$,\n$$\nP_{\\text{no coll}}(9)=\\prod_{k=1}^{8}\\frac{64-k}{64},\n$$\nso\n$$\n2\\,P_{\\text{no coll}}(9)=\\prod_{k=1}^{8}\\frac{2(64-k)}{64}.\n$$\nFor $1\\leq k\\leq 8$, we have $64-k\\geq 5632$, hence $\\frac{2(64-k)}{64}1$. The product of terms each exceeding $1$ is greater than $1$, so\n$$\n2\\,P_{\\text{no coll}}(9)>1 \\quad\\Longrightarrow\\quad P_{\\text{no coll}}(9)>\\frac{1}{2}.\n$$\n\nSince $P_{\\text{no coll}}(m)$ is strictly decreasing in $m$ (each new factor is less than $1$), the smallest $m$ for which $P_{\\text{no coll}}(m)\\frac{1}{2}$, equivalently the probability of at least one collision exceeds $\\frac{1}{2}$, is $m=10$.", "answer": "$$\\boxed{10}$$", "id": "1404642"}, {"introduction": "So far, we have focused on the probability of whether *at least one* collision occurs. A different and equally important question is: on average, how many collisions should we expect? This final exercise [@problem_id:1404678] introduces a powerful technique, the linearity of expectation, to answer this question elegantly without getting bogged down in complex probability distributions.", "problem": "A simplified model for a distributed data storage system involves hashing data files to various storage bins. Suppose a batch of $N=20$ independent data files needs to be stored. The system uses a hashing function that pseudorandomly assigns each file to one of $M=12$ available storage bins. Assume that for any given file, the assignment to any of the $M$ bins is equally likely, and the assignments for different files are mutually independent.\n\nWhen two or more files are assigned to the same bin, it is called a \"collision.\" We are interested in the number of pairs of files that collide. Calculate the expected number of distinct pairs of files that are assigned to the same storage bin.\n\nExpress your answer as an exact fraction in simplest form.", "solution": "Let $N$ be the number of files and $M$ the number of bins. Define indicator variables $X_{ij}$ for each unordered pair of distinct files $\\{i,j\\}$ by $X_{ij}=1$ if files $i$ and $j$ are assigned to the same bin, and $X_{ij}=0$ otherwise. The total number of colliding pairs is $X=\\sum_{1 \\leq i  j \\leq N} X_{ij}$.\n\nBy uniformity and independence of assignments, for any fixed pair $\\{i,j\\}$ the probability that both go to the same bin is $\\frac{1}{M}$, so $\\mathbb{E}[X_{ij}] = \\frac{1}{M}$. Using linearity of expectation,\n$$\n\\mathbb{E}[X] \\;=\\; \\sum_{1 \\leq i  j \\leq N} \\mathbb{E}[X_{ij}] \\;=\\; \\binom{N}{2} \\cdot \\frac{1}{M} \\;=\\; \\frac{N(N-1)}{2M}.\n$$\nSubstitute $N=20$ and $M=12$:\n$$\n\\mathbb{E}[X] \\;=\\; \\frac{20 \\cdot 19}{2 \\cdot 12} \\;=\\; \\frac{380}{24} \\;=\\; \\frac{190}{12} \\;=\\; \\frac{95}{6}.\n$$\nThis is already in simplest form.", "answer": "$$\\boxed{\\frac{95}{6}}$$", "id": "1404678"}]}
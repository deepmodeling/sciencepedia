{"hands_on_practices": [{"introduction": "To appreciate why first-order logic (FOL) is characterized as \"maximal\" in a specific sense, we must first develop an intuition for its expressive limits. The Ehrenfeucht–Fraïssé (EF) game is a wonderfully concrete tool for this purpose, transforming questions of logical definability into a game between two players, Spoiler and Duplicator. This exercise invites you to step into the arena and determine the precise number of rounds where FOL can no longer distinguish between a large connected graph and a disconnected one of the same size, providing a hands-on proof that a property as basic as connectivity is not expressible in FOL [@problem_id:3046177].", "problem": "Let $\\mathcal{L}$ be the language of simple undirected graphs with a single binary relation symbol $E$. For an integer $m \\geq 1$, define two finite $\\mathcal{L}$-structures:\n- $G_{m}$ is the cycle graph with $2^{m+1}$ vertices (every vertex has degree $2$ and the unique simple cycle has length $2^{m+1}$).\n- $H_{m}$ is the disjoint union of two cycle graphs, each with $2^{m}$ vertices (so $H_{m}$ has $2^{m+1}$ vertices in total, split into exactly two connected components).\n\nConsider the $r$-round Ehrenfeucht–Fraïssé (EF) game on the pair $(G_{m},H_{m})$ in the language $\\mathcal{L}$.\n\nUsing only fundamental definitions and properties of first-order logic (FOL), the EF game, and the statements of Compactness and the Löwenheim–Skolem property:\n1. Determine, as an explicit function of $m$, the largest integer $r$ such that Duplicator has a winning strategy in the $r$-round EF game on $(G_{m},H_{m})$.\n2. Justify how this EF-game calculation implies that connectivity of finite graphs is not definable by any single sentence of FOL, and explain how this connects to the maximality of FOL in Lindström’s theorem (that any abstract logic extending FOL and satisfying both Compactness and the Löwenheim–Skolem property cannot define strictly more isomorphism-invariant properties of structures).\n\nYou must provide the exact closed-form expression for the largest such $r$ as your final answer. No rounding is required. The final answer must be a single expression in terms of $m$.", "solution": "The problem asks for two main things: first, to determine the largest integer $r$ for which the Duplicator has a winning strategy in the $r$-round Ehrenfeucht–Fraïssé (EF) game on a pair of graph structures $(G_m, H_m)$, and second, to relate this result to the non-definability of graph connectivity in first-order logic (FOL) and to Lindström's theorem.\n\n### Part 1: Determining the largest $r$\n\nLet us denote the relation \"Duplicator has a winning strategy in the $r$-round EF game on structures $A$ and $B$\" by $A \\equiv_r B$. The problem is to find the maximum integer $r$ such that $G_m \\equiv_r H_m$. This is equivalent to finding the minimum integer $r$ such that $G_m \\not\\equiv_r H_m$, which would be $r_{max}+1$. Spoiler has a winning strategy in the $r$-round game if and only if there exists a sentence $\\Phi$ in the language $\\mathcal{L}$ with quantifier rank at most $r$ such that one of $G_m$ or $H_m$ is a model of $\\Phi$ and the other is not.\n\nFirst, let's analyze the structures.\n- $G_m$ is the cycle graph $C_{2^{m+1}}$. It is a connected graph. The number of vertices is $2^{m+1}$. The distance $d_{G_m}(u,v)$ between any two vertices $u,v$ is well-defined and finite, with a maximum value of $2^{m+1}/2 = 2^m$.\n- $H_m$ is the disjoint union of two cycle graphs, $C_{2^m} \\sqcup C_{2^m}$. It has two connected components. The total number of vertices is $2 \\times 2^m = 2^{m+1}$. If two vertices $u,v$ are in the same component of $H_m$, the maximum distance between them is $2^m/2 = 2^{m-1}$. If they are in different components, there is no path between them, so their distance is infinite.\n\nWe aim to show that the largest $r$ is $m$. This involves two claims:\n1. $G_m \\equiv_m H_m$ (Duplicator wins the $m$-round game).\n2. $G_m \\not\\equiv_{m+1} H_m$ (Spoiler wins the $(m+1)$-round game).\n\n**Claim 2: Spoiler wins the $(m+1)$-round game.**\nTo show that Spoiler wins, we need to construct a sentence $\\Phi$ of quantifier rank $m+1$ that distinguishes $G_m$ from $H_m$.\n\nA key difference between the graphs is that $G_m$ is connected with diameter $2^m$, while any connected component of $H_m$ has diameter $2^{m-1}$. Let us leverage this.\nIt is a standard result in model theory that the property \"$d(x,y) \\le 2^k$\" can be expressed by a formula $\\phi_k(x,y)$ of quantifier rank $k$. These formulas are defined inductively:\n- $\\phi_0(x,y) := (x=y) \\lor E(x,y)$. This has quantifier rank $0$.\n- $\\phi_{k+1}(x,y) := \\exists z (\\phi_k(x,z) \\land \\phi_k(z,y))$. The quantifier rank of $\\phi_{k+1}$ is $qr(\\phi_k) + 1$, so $qr(\\phi_k) = k$.\n\nConsider the sentence $\\theta$:\n$$ \\theta := \\exists x \\forall y (\\phi_m(x,y)) $$\nLet's analyze the quantifier rank of $\\theta$. The formula $\\phi_m(x,y)$ has quantifier rank $m$. The overall sentence $\\theta$ has quantifier rank $m+1$.\n\nNow, let's check whether $\\theta$ distinguishes $G_m$ and $H_m$.\n- **In $G_m$**: The sentence $\\theta$ asserts that there exists a vertex $x$ from which every other vertex $y$ is reachable by a path of length at most $2^m$. In $G_m=C_{2^{m+1}}$, the maximum distance between any two vertices is exactly $2^m$. So, for any vertex $x$, every other vertex $y$ is at a distance $d_{G_m}(x,y) \\le 2^m$. This means $\\phi_m(x,y)$ is true for all $y$. Consequently, $\\forall y (\\phi_m(x,y))$ is true for any choice of $x$. Therefore, $G_m \\models \\theta$.\n\n- **In $H_m$**: The sentence $\\theta$ asserts the same property. Let's take any vertex $x$. This vertex $x$ belongs to one of the two connected components, say $C_A$. Now, let's take any vertex $y$ from the other connected component, $C_B$. Since there is no path between $x$ and $y$, the formula $\\phi_m(x,y)$ is false. Thus, for any choice of $x$, the formula $\\forall y (\\phi_m(x,y))$ is false (because it fails for any $y$ in the other component). Therefore, no such $x$ exists, and $H_m \\not\\models \\theta$.\n\nSince $\\theta$ is a sentence of quantifier rank $m+1$ that is true in $G_m$ and false in $H_m$, the two structures are not $(m+1)$-elementarily equivalent. This implies that Spoiler has a winning strategy in the $(m+1)$-round EF game. Hence, $r_{max} < m+1$.\n\n**Claim 1: Duplicator wins the $m$-round game.**\nThe proof that Duplicator wins the $m$-round game is more involved. It requires showing that Duplicator can maintain a specific invariant for $m$ rounds. The invariant for Duplicator's strategy after $k$ rounds (with $k \\le m$ and chosen pairs $(g_1,h_1), \\dots, (g_k,h_k)$) is that the map $g_i \\mapsto h_i$ is a partial isomorphism and that for any two chosen vertices $g_i, g_j$, their distance properties are \"locally\" preserved. A common such invariant is that for chosen points $g_i, g_j$ and their images $h_i, h_j$, $d(g_i, g_j) = d(h_i, h_j)$ whenever this distance is less than $2^{m-k}$.\nThe essence of the proof is that for $k \\le m$ rounds, the number of constraints $k$ imposed by Spoiler is not large enough to exhaust the possibilities for Duplicator in a graph that is locally a path. The cycle closures happen at scales ($2^m$ and $2^{m+1}$) that are too large to be detected by the game in under $m+1$ rounds. Because Spoiler cannot force Duplicator to \"see\" the entire structure within $m$ rounds, Duplicator can continue to find moves that are locally consistent.\nThus, $G_m \\equiv_m H_m$, which means $r_{max} \\ge m$.\n\nCombining the two claims, the largest integer $r$ such that Duplicator has a winning strategy is $m$.\n\n### Part 2: Implications for Connectivity and Lindström's Theorem\n\n**Non-definability of Connectivity in FOL**\nThe EF-game result provides a direct proof that graph connectivity is not a first-order definable property for the class of finite graphs.\nThe argument proceeds by contradiction:\n1. Assume, for the sake of contradiction, that there exists a single FOL sentence, let's call it $\\Phi_{conn}$, that defines connectivity for finite graphs. This means for any finite graph $G$, $G \\models \\Phi_{conn}$ if and only if $G$ is connected.\n2. Let the quantifier rank of this hypothetical sentence $\\Phi_{conn}$ be $q$.\n3. Now, consider the specific pair of structures $(G_m, H_m)$ from this problem, with $m=q$.\n4. From Part 1, we know that $G_q \\equiv_q H_q$. By the fundamental property of the EF-game, this means that $G_q$ and $H_q$ satisfy exactly the same FOL sentences of quantifier rank up to and including $q$.\n5. Since $qr(\\Phi_{conn}) = q$, it must be that $G_q \\models \\Phi_{conn} \\iff H_q \\models \\Phi_{conn}$.\n6. By its construction, $G_q$ is a cycle graph and is therefore connected. By our assumption about $\\Phi_{conn}$, we must have $G_q \\models \\Phi_{conn}$.\n7. From steps 5 and 6, it follows that we must also have $H_q \\models \\Phi_{conn}$.\n8. However, $H_q$ is, by construction, a disjoint union of two cycles, so it is disconnected. By our assumption about $\\Phi_{conn}$, this means $H_q \\not\\models \\Phi_{conn}$.\n9. We have reached a contradiction: $H_q$ both must and must not satisfy $\\Phi_{conn}$. Therefore, our initial assumption must be false. No such single FOL sentence $\\Phi_{conn}$ can exist.\n\n**Connection to Lindström's Theorem**\nLindström's theorem characterizes FOL as the maximal \"regular\" logic. It states that any abstract logic $\\mathcal{L}'$ that extends the expressive power of FOL and also satisfies two key metalogical properties—the Compactness Theorem and the Downward Löwenheim-Skolem property—must be equivalent in expressive power to FOL.\n\nOur result on connectivity illustrates this principle perfectly:\n1. We have shown that the property of being a connected graph is not definable in FOL.\n2. This means that a hypothetical logic, say $\\mathcal{L}_{conn} = \\text{FOL} + \\{\\text{CONN}\\}$ where CONN is a sentence true only in connected graphs, would be strictly more expressive than FOL.\n3. According to Lindström's theorem, since $\\mathcal{L}_{conn}$ is more expressive than FOL, it must fail to satisfy at least one of the conditions: either the Compactness Theorem or the Downward Löwenheim-Skolem property.\n4. Indeed, one can show that a logic capable of expressing connectivity must violate the Compactness Theorem. Let $d_k(c,d)$ be an FOL formula stating \"there is a path of length at most $k$ between constants $c$ and $d$\". Consider the theory $T = \\{\\text{CONN}\\} \\cup \\{\\neg d_k(c,d) \\mid k \\in \\mathbb{N} \\}$. Any finite subset of $T$ is satisfiable: take a simple path graph with endpoints $c$ and $d$ that is long enough to make the finite set of $\\neg d_k$ formulas true. This graph is connected. However, the entire theory $T$ is unsatisfiable. If a model satisfied $T$, it would be connected (by CONN), so there would have to be a path of some finite length $k_0$ between $c$ and $d$. But this would contradict the sentence $\\neg d_{k_0}(c,d)$ in $T$. This demonstrates a failure of compactness.\n\nIn summary, the EF-game on $(G_m, H_m)$ provides a concrete example of an expressive limitation of FOL. Lindström's theorem universalizes this observation, establishing that this limitation is not an accidental weakness but an essential trade-off: to gain the power to define properties like connectivity, one must sacrifice fundamental and powerful properties like compactness that make FOL so well-behaved.", "answer": "$$ \\boxed{m} $$", "id": "3046177"}, {"introduction": "While the EF game reveals what FOL cannot express, Lindström's theorem is equally about the elegant properties that FOL *does* possess. One such crucial feature is closure under relativization, which governs how the logic behaves when restricted to a definable piece of a structure. This practice explores the formal mechanism of relativization, showing how a statement about a substructure can be systematically translated into a statement about the larger structure, a property essential for the well-behaved nature of FOL [@problem_id:2976150].", "problem": "Let $\\sigma$ be a relational vocabulary and let $\\mathcal{L}$ be a logic on $\\sigma$-structures that is closed under Boolean connectives and under relativization to a new unary predicate symbol. Recall the following fundamental definitions and facts of model theory that you may take as given: (i) given a $\\sigma$-structure $\\mathfrak{M}$ with universe $M$ and a subset $S \\subseteq M$, the induced $\\sigma$-substructure $\\mathfrak{M} \\upharpoonright S$ is the structure with universe $S$ interpreting each relation symbol $R \\in \\sigma$ by the restriction of $R^{\\mathfrak{M}}$ to tuples from $S$; (ii) a subset $S \\subseteq M$ is definable if there is a formula $\\delta(x) \\in \\mathcal{L}$ with one free variable such that $S = \\{ a \\in M : \\mathfrak{M} \\models \\delta(a) \\}$; (iii) for any new unary predicate symbol $U$ not in $\\sigma$, an interpretation $(\\mathfrak{M}, U)$ is a $\\sigma \\cup \\{U\\}$-structure expanding $\\mathfrak{M}$ by a choice of $U^{\\mathfrak{M}} \\subseteq M$.\n\nChoose the option that correctly explains how closure under relativization in $\\mathcal{L}$ enables the transfer of definability from whole structures to definable substructures, and that provides a correct concrete example using a unary predicate symbol $U$.\n\nA. If $\\mathcal{L}$ is closed under relativization, then for every $\\sigma$-formula $\\varphi(\\bar{x}) \\in \\mathcal{L}$ there exists a $\\sigma \\cup \\{U\\}$-formula $\\varphi^{U}(\\bar{x}) \\in \\mathcal{L}$ such that for every $\\sigma$-structure $\\mathfrak{M}$, every $S \\subseteq M$, and every assignment $\\bar{a} \\in S^{|\\bar{x}|}$, one has\n$$\n\\mathfrak{M} \\upharpoonright S \\models \\varphi(\\bar{a}) \\quad \\text{iff} \\quad (\\mathfrak{M}, U^{\\mathfrak{M}} := S) \\models \\varphi^{U}(\\bar{a}).\n$$\nThe map $\\varphi \\mapsto \\varphi^{U}$ is given by restricting quantifiers to $U$: atomic formulas and Boolean combinations are left unchanged, $(\\exists y\\, \\psi)^{U} := \\exists y\\,(U(y) \\wedge \\psi^{U})$ and $(\\forall y\\, \\psi)^{U} := \\forall y\\,(U(y) \\rightarrow \\psi^{U})$. Consequently, if $S$ is definable by a $\\sigma$-formula $\\delta(x)$, the property of $\\mathfrak{M} \\upharpoonright S$ defined by $\\varphi$ is defined in $\\mathfrak{M}$ by the $\\sigma$-formula obtained from $\\varphi^{U}$ by substituting $\\delta$ for $U$. Concrete example: in the graph language $\\sigma = \\{E\\}$ expanded by a unary predicate $R$, let $\\delta(x) := R(x)$ so that $S = \\{a \\in M : R(a)\\}$. For $\\varphi$ saying “there is a triangle,” e.g., \n$$\n\\varphi := \\exists x \\exists y \\exists z \\Big( x \\neq y \\wedge y \\neq z \\wedge z \\neq x \\wedge E(x,y) \\wedge E(y,z) \\wedge E(z,x) \\Big),\n$$\nthe relativization $\\varphi^{U}$ is obtained by inserting $U$-guards in all quantifiers. Replacing $U$ by $R$ yields a $\\sigma \\cup \\{R\\}$-formula that, in any $(\\mathfrak{M},R)$, holds exactly when the induced subgraph on the $R$-vertices contains a triangle.\n\nB. Closure under relativization requires introducing a new relation symbol $R_{U}$ for each relation $R \\in \\sigma$ to represent its restriction to $U$, and only after such an expansion can one express properties of induced substructures; without expanding the signature by all $R_{U}$, the transfer of definability fails even for simple existential formulas.\n\nC. Relativization to a unary predicate $U$ is not available in first-order logic; to speak about a definable substructure one must quantify second-order over $U$, so closure under relativization is a strictly second-order property and cannot be used to transfer definability within first-order contexts.\n\nD. Closure under relativization only ensures that universal sentences are preserved to substructures (by restricting domains), but existential content is lost; hence definability transfers only for $\\forall$-sentences, and there is no general relativization scheme for arbitrary formulas.\n\nE. The correct way to relativize is to leave $\\exists$-quantifiers unchanged and replace only $\\forall y\\, \\psi$ by $\\forall y\\,(U(y) \\rightarrow \\psi)$, while also rewriting every atomic $R(t_{1},\\dots,t_{n})$ as $U(t_{1}) \\wedge \\cdots \\wedge U(t_{n}) \\wedge R(t_{1},\\dots,t_{n})$; this ensures that assignments outside $U$ are excluded and is both necessary and sufficient for transferring definability to definable substructures.", "solution": "The problem asks for the correct explanation of closure under relativization. This property, central to the model theory of first-order logic, provides a systematic way to translate a formula so that it speaks about a substructure.\n\nThe correct procedure for relativizing a formula $\\varphi$ to a unary predicate $U$ (which represents the universe of the substructure) is defined by induction on the structure of $\\varphi$:\n*   **Atomic formulas** like $R(x, y)$ or $x=y$ are left unchanged. The variables are assumed to take values from the substructure, a constraint handled by the quantifiers.\n*   **Boolean connectives** distribute over relativization, e.g., $(\\psi_1 \\land \\psi_2)^U = \\psi_1^U \\land \\psi_2^U$ and $(\\neg \\psi)^U = \\neg (\\psi^U)$.\n*   **Quantifiers** are restricted to the set defined by $U$. An existential quantifier $(\\exists y\\, \\psi)^U$ becomes $\\exists y\\,(U(y) \\wedge \\psi^{U})$, meaning \"there exists an element $y$ in the set $U$ such that...\". A universal quantifier $(\\forall y\\, \\psi)^U$ becomes $\\forall y\\,(U(y) \\rightarrow \\psi^{U})$, meaning \"for all elements $y$ in the set $U$, it is the case that...\".\n\nThis syntactic transformation $\\varphi \\mapsto \\varphi^U$ guarantees that for any structure $\\mathfrak{M}$ and any subset $S \\subseteq M$, a formula $\\varphi(\\bar{a})$ holds in the induced substructure $\\mathfrak{M} \\upharpoonright S$ if and only if the relativized formula $\\varphi^U(\\bar{a})$ holds in the expanded structure $(\\mathfrak{M}, U^{\\mathfrak{M}} := S)$. If the subset $S$ is itself definable by a formula $\\delta(x)$, we can substitute $\\delta$ for $U$ everywhere in $\\varphi^U$ to get a formula in the original language that expresses the same property within the main structure $\\mathfrak{M}$.\n\nLet's evaluate the options based on this:\n\n*   **Option A** correctly states the formal equivalence, provides the correct inductive definitions for relativizing quantifiers, and accurately explains the transfer of definability to a definable substructure. The example of finding a triangle in a subgraph induced by $R$ is also a perfect illustration of the process.\n\n*   **Option B** is incorrect. Relativization does not require creating new relation symbols like $R_U$. The restriction is handled entirely by guarding the quantifiers.\n\n*   **Option C** is incorrect. Relativization is a standard and essential feature of first-order logic. It does not require second-order quantification.\n\n*   **Option D** is incorrect. It confuses relativization with preservation theorems (like the Łoś-Tarski theorem). Relativization is a general syntactic procedure that works for all formulas, not just universal ones. Existential content is correctly preserved, not lost.\n\n*   **Option E** proposes an incorrect relativization scheme. Rewriting atomic formulas and leaving existential quantifiers unguarded leads to incorrect translations. For example, relativizing $\\exists y \\, \\neg P(y)$ with this scheme would yield $\\exists y \\, \\neg(U(y) \\wedge P(y))$, which is equivalent to $\\exists y (\\neg U(y) \\vee \\neg P(y))$. This is satisfied by any element *outside* the substructure's domain, which is not the intended meaning.\n\nTherefore, option A is the only one that provides a complete and correct description.", "answer": "$$\\boxed{A}$$", "id": "2976150"}, {"introduction": "At the heart of Lindström’s theorem lies the Compactness Theorem, a profound principle connecting finite and infinite sets of sentences. Compactness states that if every finite part of a theory has a model, then the entire infinite theory must also have a model. This exercise pulls back the curtain on this powerful theorem by guiding you through the ultraproduct construction, the model-theoretic engine used to prove it, demonstrating how to build a single, often infinite, structure that simultaneously satisfies an infinite collection of properties [@problem_id:2976157].", "problem": "Select the option that correctly and precisely accomplishes all of the following in the context of First-Order logic (FO): defines the ultraproduct of a family of structures using an ultrafilter, states Łoś’s Theorem for FO formulas (not just sentences), and explains, at a level suitable for use in Lindström’s theorem, why Łoś’s Theorem supports the Compactness Theorem for FO.\n\nA. Given a family $\\{\\mathcal{M}_i : i \\in I\\}$ of $\\mathcal{L}$-structures and an ultrafilter $\\mathcal{U}$ on $I$, the ultraproduct $\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U}$ has domain the set of $\\mathcal{U}$-equivalence classes of functions $a : I \\to \\bigsqcup_{i \\in I} M_i$ (with $a(i) \\in M_i$), where $a \\sim b$ iff $\\{ i \\in I : a(i) = b(i) \\} \\in \\mathcal{U}$. For each function symbol $f$ of arity $n$, define $f^{\\prod/\\mathcal{U}}([a_1],\\dots,[a_n]) = [i \\mapsto f^{\\mathcal{M}_i}(a_1(i),\\dots,a_n(i))]$. For each relation symbol $R$ of arity $n$, declare $R^{\\prod/\\mathcal{U}}([a_1],\\dots,[a_n])$ to hold iff $\\{ i \\in I : R^{\\mathcal{M}_i}(a_1(i),\\dots,a_n(i)) \\} \\in \\mathcal{U}$. Łoś’s Theorem: for every FO formula $\\varphi(x_1,\\dots,x_n)$ and $[a_1],\\dots,[a_n]$ in the ultraproduct, $$\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U} \\models \\varphi([a_1],\\dots,[a_n]) \\quad \\text{iff} \\quad \\{ i \\in I : \\mathcal{M}_i \\models \\varphi(a_1(i),\\dots,a_n(i)) \\} \\in \\mathcal{U}.$$ This supports Compactness: given a set $\\Gamma$ of FO sentences with every finite subset satisfiable, index by $I$ the set of finite $\\Delta \\subseteq \\Gamma$ and pick $\\mathcal{M}_\\Delta \\models \\Delta$. Let $\\mathcal{U}$ be an ultrafilter on $I$ extending the filter generated by the cones $X_\\varphi = \\{ \\Delta \\in I : \\varphi \\in \\Delta \\}$ for $\\varphi \\in \\Gamma$. By Łoś’s Theorem, $\\prod_{\\Delta \\in I} \\mathcal{M}_\\Delta / \\mathcal{U} \\models \\Gamma$, proving Compactness. This is a key ingredient in the characterization in Lindström’s theorem that FO is maximal among abstract logics satisfying Compactness and the Downward Löwenheim–Skolem property.\n\nB. The ultraproduct of $\\{\\mathcal{M}_i : i \\in I\\}$ with respect to a filter $\\mathcal{F}$ on $I$ is the Cartesian product $\\prod_{i \\in I} M_i$ with pointwise interpretation of symbols, and Łoś’s Theorem states that for each FO sentence $\\sigma$, $\\prod_{i \\in I} \\mathcal{M}_i \\models \\sigma$ iff $\\{ i \\in I : \\mathcal{M}_i \\models \\sigma \\} \\in \\mathcal{F}$. This shows the Completeness Theorem and therefore implies Compactness, which is the main hypothesis in Lindström’s theorem.\n\nC. The ultraproduct is formed by taking the Cartesian product $\\prod_{i \\in I} M_i$ and interpreting relations and functions coordinatewise, using the cofinite filter to define truth: a formula holds in the ultraproduct iff it holds in $\\mathcal{M}_i$ for all but finitely many $i \\in I$. Łoś’s Theorem holds for sentences but not for formulas with free variables, and this suffices to deduce Compactness by an easy coding argument, which is the primary tool in Lindström’s theorem.\n\nD. An ultraproduct is any substructure of a direct product closed under projections, and Łoś’s Theorem asserts that if each $\\mathcal{M}_i$ satisfies an FO sentence $\\sigma$, then so does the product; this yields the Upward Löwenheim–Skolem Theorem, which in turn implies Compactness and provides the core of Lindström’s theorem.", "solution": "The problem requires selecting the option that correctly defines the ultraproduct construction, states Łoś’s Theorem for first-order formulas, and explains how the theorem is used to prove the Compactness Theorem for first-order logic (FO).\n\nLet's break down the required components and evaluate the options:\n1.  **Ultraproduct Definition**: The ultraproduct $\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U}$ of a family of structures $\\{\\mathcal{M}_i\\}$ over an index set $I$ is built using an ultrafilter $\\mathcal{U}$ on $I$. Its domain is the set of equivalence classes of elements from the Cartesian product $\\prod_{i \\in I} M_i$. Two elements (functions) $a$ and $b$ are equivalent, $a \\sim b$, if the set of indices where they agree, $\\{i \\in I : a(i) = b(i)\\}$, is in the ultrafilter $\\mathcal{U}$. Relations and functions are defined pointwise based on this \"voting\" principle: a relation $R$ holds for a tuple of equivalence classes if the set of indices where $R$ holds for the corresponding components is in $\\mathcal{U}$.\n2.  **Łoś's Theorem**: This is the fundamental theorem of ultraproducts. It states that for any FO formula $\\varphi(x_1, \\ldots, x_n)$, the formula is true of a tuple of elements in the ultraproduct if and only if the set of indices where the formula is true of the corresponding components is in the ultrafilter $\\mathcal{U}$. Crucially, this holds for all formulas, not just sentences.\n3.  **Proof of Compactness**: The ultraproduct construction provides a purely semantic proof of the Compactness Theorem. Given a set of sentences $\\Gamma$ where every finite subset is satisfiable, one constructs a model for the entire set $\\Gamma$. The index set $I$ is taken to be the set of all finite subsets of $\\Gamma$. For each $\\Delta \\in I$, we have a model $\\mathcal{M}_\\Delta$. A filter is constructed on $I$, and by the Ultrafilter Lemma, it is extended to an ultrafilter $\\mathcal{U}$. The ultraproduct of the $\\mathcal{M}_\\Delta$ over this $\\mathcal{U}$ is then shown, via Łoś's Theorem, to be a model of every sentence in $\\Gamma$.\n\nAnalyzing the options:\n*   **Option A** provides a correct and precise definition of the ultraproduct, including the domain, equivalence relation, and interpretation of symbols. It states Łoś's Theorem in its full, correct form for all FO formulas. Finally, it gives a correct and standard outline of the ultraproduct proof of the Compactness Theorem and accurately places it within the context of Lindström's theorem. This option fulfills all requirements.\n*   **Option B** is incorrect. It confuses an ultraproduct with a direct product and an ultrafilter with a general filter. Łoś's Theorem requires an ultrafilter. It also incorrectly links this semantic proof to the syntactic Completeness Theorem.\n*   **Option C** is incorrect. It wrongly restricts the construction to the cofinite filter, which is generally not an ultrafilter. It also makes the false claim that Łoś's Theorem does not hold for formulas with free variables, which is a critical misunderstanding of the theorem.\n*   **Option D** is incorrect. It gives a completely wrong definition of an ultraproduct. It also misstates Łoś's Theorem as a simple one-way preservation property and incorrectly connects the concepts of Upward Löwenheim-Skolem, Compactness, and Lindström's theorem.\n\nTherefore, Option A is the only one that is accurate and complete.", "answer": "$$\\boxed{A}$$", "id": "2976157"}]}
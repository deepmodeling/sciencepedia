{"hands_on_practices": [{"introduction": "The Law of Total Expectation is most clearly understood through two-stage experiments. This problem models a common scenario in manufacturing and quality control where an initial random choice influences subsequent outcomes [@problem_id:1928925]. By conditioning on the first stage—the selection of a bin—we can systematically calculate the expected number of defective items, providing a clear illustration of how the law averages over initial uncertainties.", "problem": "A quality control department at a technology firm stores electronic components from three different suppliers in three separate, large bins. The composition of components in each bin is as follows:\n\n- Bin 1 contains 50 defective components and 50 non-defective components.\n- Bin 2 contains 30 defective components and 90 non-defective components.\n- Bin 3 contains 80 defective components and 20 non-defective components.\n\nAn inspector follows a two-stage sampling procedure. First, the inspector selects one of the three bins at random, with each bin having an equal probability of being chosen. Second, from the selected bin, the inspector draws a sample of 40 components without replacement for testing.\n\nCalculate the expected number of defective components in the inspector's sample. Round your final answer to three significant figures.", "solution": "Let $B \\in \\{1,2,3\\}$ denote the bin selected uniformly at random, so $P(B=i)=\\frac{1}{3}$ for each $i$. Let $X$ be the number of defective components in the sample of size $n=40$. Conditional on choosing bin $i$, the sample follows a hypergeometric model with population size $N_{i}$ and defective count $D_{i}$. A standard property of the hypergeometric distribution (or by linearity of expectation using indicator variables) gives\n$$\n\\mathbb{E}[X \\mid B=i]=n \\cdot \\frac{D_{i}}{N_{i}}.\n$$\nBy the law of total expectation,\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{3} P(B=i)\\,\\mathbb{E}[X \\mid B=i]=\\frac{1}{3}\\sum_{i=1}^{3} n \\cdot \\frac{D_{i}}{N_{i}}=\\frac{n}{3}\\left(\\frac{D_{1}}{N_{1}}+\\frac{D_{2}}{N_{2}}+\\frac{D_{3}}{N_{3}}\\right).\n$$\nFrom the problem data, $(N_{1},D_{1})=(100,50)$, $(N_{2},D_{2})=(120,30)$, and $(N_{3},D_{3})=(100,80)$, with $n=40$. Substituting,\n$$\n\\mathbb{E}[X]=\\frac{40}{3}\\left(\\frac{50}{100}+\\frac{30}{120}+\\frac{80}{100}\\right)=\\frac{40}{3}\\left(\\frac{1}{2}+\\frac{1}{4}+\\frac{4}{5}\\right).\n$$\nCompute the sum inside the parentheses:\n$$\n\\frac{1}{2}+\\frac{1}{4}+\\frac{4}{5}=\\frac{10+5+16}{20}=\\frac{31}{20}.\n$$\nTherefore,\n$$\n\\mathbb{E}[X]=\\frac{40}{3}\\cdot \\frac{31}{20}=\\frac{2}{3}\\cdot 31=\\frac{62}{3}\\approx 20.666\\ldots\n$$\nRounding to three significant figures gives $20.7$.", "answer": "$$\\boxed{20.7}$$", "id": "1928925"}, {"introduction": "Many real-world processes unfold sequentially, but their duration is uncertain. This exercise explores such a scenario in software debugging, where the total effort depends on where a bug is hidden [@problem_id:1400529]. It showcases how the Law of Total Expectation is used to calculate the expected value of a sum with a random number of terms, a crucial skill for modeling stochastic processes in fields from engineering to finance.", "problem": "A software company is debugging a large computational module comprised of $N$ distinct functions, indexed from $1$ to $N$. It is known with certainty that a single critical bug is located in exactly one of these functions.\n\nThe probability that the bug resides in function $i$ is proportional to its complexity, which is given by a positive constant $c_i$. The debugging team employs a sequential testing strategy, where they test the functions in their indexed order, starting with function 1, then function 2, and so on, until the bug is found. The process stops immediately after the function containing the bug has been tested.\n\nThe time required to test function $i$, denoted by the random variable $S_i$, follows an exponential distribution with a known rate parameter $\\lambda_i > 0$. The test times for all functions are mutually independent, and they are also independent of the bug's location.\n\nDerive a symbolic expression for the expected total time, $E[T]$, required to find the bug. Your final expression should be in terms of $N$ and the sets of parameters $\\{c_i\\}_{i=1}^N$ and $\\{\\lambda_i\\}_{i=1}^N$.", "solution": "Let $K$ denote the (random) index of the function that contains the bug. Since the bug is in function $i$ with probability proportional to $c_{i}$, the total weight is $C \\equiv \\sum_{k=1}^{N} c_{k}$ and thus\n$$\n\\mathbb{P}(K=i)=\\frac{c_{i}}{C}, \\quad i=1,\\ldots,N.\n$$\nThe total time to find the bug is the sum of testing times up to and including the bug-containing function:\n$$\nT=\\sum_{j=1}^{K} S_{j}.\n$$\nBy the law of total expectation,\n$$\n\\mathbb{E}[T]=\\mathbb{E}\\!\\left[\\mathbb{E}\\!\\left[T \\mid K\\right]\\right]=\\sum_{i=1}^{N} \\mathbb{P}(K=i)\\,\\mathbb{E}\\!\\left[\\sum_{j=1}^{i} S_{j}\\right].\n$$\nThe testing times $\\{S_{j}\\}_{j=1}^{N}$ are mutually independent and independent of $K$, and each $S_{j}$ is exponential with rate $\\lambda_{j}$, so\n$$\n\\mathbb{E}[S_{j}]=\\frac{1}{\\lambda_{j}}, \\quad j=1,\\ldots,N.\n$$\nTherefore,\n$$\n\\mathbb{E}[T]=\\sum_{i=1}^{N} \\frac{c_{i}}{C}\\sum_{j=1}^{i} \\frac{1}{\\lambda_{j}}.\n$$\nEquivalently, by exchanging the order of summation,\n$$\n\\mathbb{E}[T]=\\frac{1}{C}\\sum_{j=1}^{N} \\frac{1}{\\lambda_{j}} \\sum_{i=j}^{N} c_{i}.\n$$\nEither expression is a valid closed form in terms of $N$, $\\{c_{i}\\}_{i=1}^{N}$, and $\\{\\lambda_{i}\\}_{i=1}^{N}$.", "answer": "$$\\boxed{\\frac{1}{\\sum_{k=1}^{N} c_{k}} \\sum_{i=1}^{N} c_{i} \\sum_{j=1}^{i} \\frac{1}{\\lambda_{j}}}$$", "id": "1400529"}, {"introduction": "This practice moves into more complex territory, demonstrating the power of the Law of Total Expectation in handling multiple layers of randomness. The problem involves a nested random process, where the outcome of one stage becomes the parameter for the next [@problem_id:1400554]. This requires a repeated, or 'towered,' application of the law, allowing us to elegantly dissect the problem and find a final expectation by peeling back the layers of uncertainty one by one.", "problem": "A research agency allocates its annual budget of $L$ dollars by a two-stage randomized process. First, the total budget is partitioned into two sub-budgets at a division point chosen uniformly at random along the interval $[0, L]$. One of these two sub-budgets is then selected with equal probability for a specific research division. This selected sub-budget is then itself partitioned into two final project grants at a second division point chosen uniformly at random along its length.\n\nDetermine the expected value of the smaller of the two final project grants. Express your answer as a closed-form analytic expression in terms of $L$.", "solution": "Let's define the random variables involved in this two-stage process.\n\nLet $L$ be the total initial budget.\nIn the first stage, the budget is partitioned at a point $X_1$, where $X_1$ is a random variable uniformly distributed on $[0, L]$. The probability density function (PDF) of $X_1$ is $f_{X_1}(x_1) = 1/L$ for $x_1 \\in [0, L]$. This creates two sub-budgets of sizes $X_1$ and $L - X_1$.\n\nLet $Y_1$ be the random variable representing the size of the sub-budget selected from these two. Since the selection is made with equal probability, given $X_1 = x_1$, the value of $Y_1$ is $x_1$ with probability $1/2$ or $L-x_1$ with probability $1/2$.\n\nIn the second stage, the selected sub-budget of size $Y_1$ is partitioned. Let's say $Y_1=y_1$. The partition point $X_2$ is chosen uniformly at random from $[0, y_1]$. This creates two final project grants of sizes $X_2$ and $y_1 - X_2$.\n\nLet $S$ be the random variable for the size of the smaller of these two final grants. Our goal is to find the expected value of $S$, i.e., $\\mathbb{E}[S]$.\n\nWe can solve this using the Law of Total Expectation, also known as the tower property, which states that $\\mathbb{E}[S] = \\mathbb{E}[\\mathbb{E}[S|Y_1]]$. We will compute this in two steps: first the inner expectation conditional on $Y_1$, and then the outer expectation.\n\n**Step 1: Compute the inner expectation, $\\mathbb{E}[S|Y_1=y_1]$**\n\nThe inner expectation $\\mathbb{E}[S|Y_1=y_1]$ is the expected value of the smaller piece when a budget of size $y_1$ is split randomly. The random split point $X_2$ is uniformly distributed on $[0, y_1]$, so its PDF is $f_{X_2}(x_2) = 1/y_1$ for $x_2 \\in [0, y_1]$. The smaller piece has size $\\min(X_2, y_1-X_2)$.\n\n$$\\mathbb{E}[S|Y_1=y_1] = \\mathbb{E}[\\min(X_2, y_1-X_2)] = \\int_{0}^{y_1} \\min(x_2, y_1-x_2) f_{X_2}(x_2) dx_2$$\n\nThe term $\\min(x_2, y_1-x_2)$ equals $x_2$ when $x_2 \\le y_1/2$ and $y_1-x_2$ when $x_2 > y_1/2$. We split the integral at $y_1/2$:\n\n$$\\mathbb{E}[S|Y_1=y_1] = \\frac{1}{y_1} \\left( \\int_{0}^{y_1/2} x_2 \\,dx_2 + \\int_{y_1/2}^{y_1} (y_1-x_2) \\,dx_2 \\right)$$\n\nEvaluating the first integral:\n$$\\int_{0}^{y_1/2} x_2 \\,dx_2 = \\left[ \\frac{x_2^2}{2} \\right]_{0}^{y_1/2} = \\frac{(y_1/2)^2}{2} - 0 = \\frac{y_1^2}{8}$$\n\nEvaluating the second integral:\n$$\\int_{y_1/2}^{y_1} (y_1-x_2) \\,dx_2 = \\left[ y_1x_2 - \\frac{x_2^2}{2} \\right]_{y_1/2}^{y_1} = \\left(y_1^2 - \\frac{y_1^2}{2}\\right) - \\left(y_1\\frac{y_1}{2} - \\frac{(y_1/2)^2}{2}\\right) = \\frac{y_1^2}{2} - \\left(\\frac{y_1^2}{2} - \\frac{y_1^2}{8}\\right) = \\frac{y_1^2}{8}$$\n\nSubstituting these back into the expression for the conditional expectation:\n$$\\mathbb{E}[S|Y_1=y_1] = \\frac{1}{y_1} \\left( \\frac{y_1^2}{8} + \\frac{y_1^2}{8} \\right) = \\frac{1}{y_1} \\left( \\frac{2y_1^2}{8} \\right) = \\frac{y_1}{4}$$\n\nSo, we have the general relationship $\\mathbb{E}[S|Y_1] = Y_1/4$.\n\n**Step 2: Compute the outer expectation, $\\mathbb{E}[Y_1/4]$**\n\nNow we can find the overall expectation of $S$:\n$$\\mathbb{E}[S] = \\mathbb{E}[\\mathbb{E}[S|Y_1]] = \\mathbb{E}\\left[\\frac{Y_1}{4}\\right] = \\frac{1}{4} \\mathbb{E}[Y_1]$$\n\nTo find $\\mathbb{E}[Y_1]$, we again use the Law of Total Expectation, this time conditioning on the first split point $X_1$.\n$$\\mathbb{E}[Y_1] = \\mathbb{E}[\\mathbb{E}[Y_1|X_1]]$$\n\nGiven that the first split occurs at $X_1 = x_1$, the two sub-budgets are $x_1$ and $L-x_1$. One is chosen with equal probability ($1/2$). The conditional expectation of the chosen size $Y_1$ is:\n$$\\mathbb{E}[Y_1|X_1=x_1] = x_1 \\cdot \\frac{1}{2} + (L-x_1) \\cdot \\frac{1}{2} = \\frac{x_1 + L - x_1}{2} = \\frac{L}{2}$$\n\nThis result is a constant and does not depend on $x_1$. Now we take the expectation over all possible values of $X_1$:\n$$\\mathbb{E}[Y_1] = \\mathbb{E}\\left[\\frac{L}{2}\\right]$$\n\nSince $L/2$ is a constant, its expectation is just itself:\n$$\\mathbb{E}[Y_1] = \\frac{L}{2}$$\n\n**Step 3: Combine the results**\n\nFinally, substitute the value of $\\mathbb{E}[Y_1]$ back into the expression for $\\mathbb{E}[S]$:\n$$\\mathbb{E}[S] = \\frac{1}{4} \\mathbb{E}[Y_1] = \\frac{1}{4} \\left(\\frac{L}{2}\\right) = \\frac{L}{8}$$\n\nThe expected value of the smaller of the two final project grants is $L/8$.", "answer": "$$\\boxed{\\frac{L}{8}}$$", "id": "1400554"}]}
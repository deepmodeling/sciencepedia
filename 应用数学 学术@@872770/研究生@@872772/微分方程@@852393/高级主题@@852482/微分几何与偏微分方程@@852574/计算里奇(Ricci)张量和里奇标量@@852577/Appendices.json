{"hands_on_practices": [{"introduction": "掌握里奇张量和里奇标量的计算，最好的方法就是通过一个具体的例子从头到尾完整地演算一遍。这个练习将引导你为一个旋转抛物面计算里奇标量 [@problem_id:1076532]。通过这个过程，你将亲手实践如何从度规张量出发，一步步计算克里斯托费尔符号，并最终得到描述曲面内蕴曲率的里奇标量。", "problem": "考虑三维欧几里得空间 $\\mathbb{R}^3$ 中的一个曲面，其由旋转抛物面方程 $z = a(x^2 + y^2)$ 定义，其中 $a$ 是一个正常数。这个二维曲面的几何由诱导度规描述，该度规继承自环境空间的标准欧几里得度规 $ds^2 = dx^2 + dy^2 + dz^2$。\n\n里奇标量 $R$ 是衡量流形内蕴曲率的基本量。它是通过将里奇张量 $R_{\\mu\\nu}$ 与逆度规张量 $g^{\\mu\\nu}$ 进行缩并得到的标量，根据公式 $R = g^{\\mu\\nu} R_{\\mu\\nu}$（使用爱因斯坦求和约定）。里奇张量则由克里斯托费尔符号 $\\Gamma^\\lambda_{\\mu\\nu}$ 及其偏导数构造而成，其公式如下：\n$$\nR_{\\mu\\nu} = \\partial_\\lambda \\Gamma^\\lambda_{\\mu\\nu} - \\partial_\\nu \\Gamma^\\lambda_{\\mu\\lambda} + \\Gamma^\\lambda_{\\lambda\\sigma}\\Gamma^\\sigma_{\\mu\\nu} - \\Gamma^\\sigma_{\\nu\\lambda}\\Gamma^\\lambda_{\\mu\\sigma}\n$$\n第二类克里斯托费尔符号由度规张量 $g_{\\mu\\nu}$ 定义为：\n$$\n\\Gamma^\\lambda_{\\mu\\nu} = \\frac{1}{2} g^{\\lambda\\sigma} (\\partial_\\mu g_{\\nu\\sigma} + \\partial_\\nu g_{\\mu\\sigma} - \\partial_\\sigma g_{\\mu\\nu})\n$$\n\n你的任务是推导该抛物面的里奇标量 $R$。请将你的最终答案表示为径向坐标 $\\rho = \\sqrt{x^2+y^2}$ 的函数。", "solution": "我们用 $(\\rho,\\theta)$ 将抛物面参数化，其中 $x=\\rho\\cos\\theta,\\;y=\\rho\\sin\\theta,\\;z=a\\rho^2$。那么\n$$ds^2 = d\\rho^2+\\rho^2d\\theta^2+(2a\\rho\\,d\\rho)^2\n=(1+4a^2\\rho^2)d\\rho^2+\\rho^2d\\theta^2$$\n所以度规分量为\n$$g_{\\rho\\rho}=A,\\quad g_{\\theta\\theta}=\\rho^2,\\qquad A=1+4a^2\\rho^2.$$\n因此 $g^{\\rho\\rho}=1/A,\\;g^{\\theta\\theta}=1/\\rho^2$。非零的克里斯托费尔符号为\n$$\\Gamma^\\rho_{\\rho\\rho}=\\frac{A'}{2A},\\quad\\Gamma^\\rho_{\\theta\\theta}=-\\frac{\\rho}{A},\\quad\n\\Gamma^\\theta_{\\rho\\theta}=\\frac1\\rho,\\quad A'=\\frac{dA}{d\\rho}=8a^2\\rho.$$\n计算里奇分量（二维情况下）\n\n$$\nR_{\\rho\\rho}=\\frac{4a^2}{A},\\qquad\nR_{\\theta\\theta}=\\frac{4a^2\\rho^2}{A^2},\n$$\n\n与 $g^{ij}$ 进行缩并得到\n\n$$\nR=g^{\\rho\\rho}R_{\\rho\\rho}+g^{\\theta\\theta}R_{\\theta\\theta}\n=\\frac{1}{A}\\frac{4a^2}{A}+\\frac{1}{\\rho^2}\\frac{4a^2\\rho^2}{A^2}\n=\\frac{8a^2}{A^2}\n=\\frac{8a^2}{(1+4a^2\\rho^2)^2}.\n$$", "answer": "$$\\boxed{\\frac{8a^2}{(1+4a^2\\rho^2)^2}}$$", "id": "1076532"}, {"introduction": "在掌握了按部就班的计算方法之后，我们来探索一个更巧妙的途径，它能极大地简化二维曲面上的曲率计算。对于双曲抛物面（马鞍面） [@problem_id:1076518]，我们可以利用其作为二维曲面的特殊性质，即里奇标量 $R$ 与高斯曲率 $K$ 之间的简单关系 $R=2K$。这个练习不仅能让你更快地得到答案，还能加深你对不同曲率度量之间联系的理解。", "problem": "双曲抛物面是一种双直纹曲面，其方程为 $z = xy$。在本题中，我们考虑嵌入在三维欧几里得空间 $\\mathbb{R}^3$ 中的该曲面，其几何由标准欧几里得线元 $ds^2 = dx^2 + dy^2 + dz^2$ 描述。该曲面从环境空间继承了一个度量，称为诱导度量。\n\n使用曲面的自然参数化，坐标为 $(u^1, u^2) = (x, y)$，曲面上的一点可以用向量 $\\mathbf{r}(x, y) = (x, y, xy)$ 来描述。\n\n您的任务是计算此双曲抛物面的里奇标量 $R$，作为坐标 $x$ 和 $y$ 的函数。\n\n此推导所需的黎曼几何标准公式如下：\n- 诱导度量张量：$g_{ij} = \\frac{\\partial \\mathbf{r}}{\\partial u^i} \\cdot \\frac{\\partial \\mathbf{r}}{\\partial u^j}$\n- 第二类克里斯托费尔符号：$\\Gamma^k_{ij} = \\frac{1}{2} g^{kl} (\\partial_i g_{jl} + \\partial_j g_{il} - \\partial_l g_{ij})$，其中 $\\partial_i = \\frac{\\partial}{\\partial u^i}$ 且 $g^{kl}$ 是度量张量的逆。\n- 里奇张量：$R_{ik} = \\partial_j \\Gamma^j_{ik} - \\partial_k \\Gamma^j_{ij} + \\Gamma^p_{ik}\\Gamma^j_{pj} - \\Gamma^p_{ij}\\Gamma^j_{pk}$\n- 里奇标量：$R = g^{ik} R_{ik}$\n\n推导里奇标量 $R(x, y)$ 的表达式。", "solution": "我们用 $(u^1,u^2)=(x,y)$ 和 $\\mathbf r(x,y)=(x,y,xy)$ 对曲面进行参数化。\n\n1. 计算诱导度量\n$$\\frac{\\partial \\mathbf r}{\\partial x}=(1,0,y),\\quad \\frac{\\partial \\mathbf r}{\\partial y}=(0,1,x),$$\n因此\n$$g_{11}=1+y^2,\\quad g_{12}=g_{21}=xy,\\quad g_{22}=1+x^2.$$\n行列式为\n$$\\det g=(1+y^2)(1+x^2)-x^2y^2=1+x^2+y^2.$$\n\n2. 我们不直接计算克里斯托费尔符号，而是利用对于曲面 $z=f(x,y)$ 的一个事实，\n其高斯曲率为\n$$K=\\frac{f_{xx}f_{yy}-f_{xy}^2}{(1+f_x^2+f_y^2)^2}.$$\n这里 $f(x,y)=xy$，所以\n$$f_x=y,\\quad f_y=x,\\quad f_{xx}=0,\\quad f_{yy}=0,\\quad f_{xy}=1.$$\n因此\n$$K=\\frac{0\\cdot0-1^2}{(1+y^2+x^2)^2}=-\\frac{1}{(1+x^2+y^2)^2}.$$\n\n3. 在二维情况下，里奇标量为 $R=2K$，得到\n$$R=-\\frac{2}{(1+x^2+y^2)^2}.$$", "answer": "$$\\boxed{\\,-\\frac{2}{(1+x^2+y^2)^2}\\,}$$", "id": "1076518"}, {"introduction": "在现代物理学和工程学中，许多实际问题的几何结构非常复杂，手动计算里奇张量几乎是不可能的。因此，将理论转化为计算代码是至关重要的一步 [@problem_id:2442518]。本练习要求你将黎曼曲率张量到里奇张量的缩并过程用代码实现，这能让你体会到抽象的张量指标记法如何直接对应于强大的数组运算，从而为解决更复杂的计算问题奠定基础。", "problem": "在计算工程学中，爱因斯坦求和约定提供了一种与坐标无关的方式，通过指标记法来表达张量运算。给定一个度规张量 $g_{ij}$，其逆 $g^{ij}$ 满足 $g^{ik} g_{kj} = \\delta^{i}{}_{j}$，其中 $\\delta^{i}{}_{j}$ 是克罗内克δ (Kronecker delta)。升降指标分别通过与 $g^{ij}$ 和 $g_{ij}$ 进行缩并来完成。一个逆变指标和一个协变指标对的缩并会使张量的阶数减少2，这是从Riemann曲率张量获得Ricci张量的基本运算。\n\n您的任务是编写一个完整的程序，该程序针对一小组测试用例，为一个具有常截面曲率 $K$ 的空间构建全协变Riemann曲率张量 $R_{l i k j}$，然后通过以下步骤计算Ricci张量 $R_{i j}$：\n- 首先，用逆度规 $g^{a l}$ 提升 $R_{l i k j}$ 的第一个协变指标，形成混合指标张量 $R^{a}{}_{i k j}$，由 $R^{a}{}_{i k j} = g^{a l} R_{l i k j}$ 给出，然后\n- 接着，将提升后的第一个指标与第三个协变指标进行缩并，以获得2阶张量 $R_{i j}$。\n\n您必须使用以下经过充分检验的公式，用于计算常曲率空间中某一点的全协变Riemann张量：\n$$\nR_{l i k j} = K \\left( g_{l k} g_{i j} - g_{l j} g_{i k} \\right).\n$$\n仅使用上述基本法则，实现升指标和缩并步骤，从 $R_{l i k j}$ 计算 $R_{i j}$。\n\n对于每个测试用例，将您计算出的 $R_{i j}$ 与常曲率空间的解析表达式进行比较，\n$$\nR_{i j}^{(\\text{expected})} = (n - 1) K \\, g_{i j},\n$$\n其中 $n$ 是空间的维度。报告您计算的 $R_{i j}$ 与 $R_{i j}^{(\\text{expected})}$ 之间的最大绝对差是否小于或等于容差 $\\tau = 10^{-12}$。每个测试用例都会产生一个布尔结果。您的程序必须将所有布尔结果汇总到单行输出中，格式为方括号括起来的逗号分隔列表，例如 $[ \\text{true}, \\text{false} ]$，但需使用确切的Python布尔字面量。\n\n测试套件规格：\n- 测试用例 1 (常规成功路径)：\n  - 维度 $n = 2$。\n  - 度规 $g_{ij} = \\begin{bmatrix} 1  0 \\\\ 0  1 \\end{bmatrix}$。\n  - 曲率 $K = \\dfrac{3}{7}$。\n  - 预期 $R_{i j}^{(\\text{expected})} = (2 - 1) \\cdot \\dfrac{3}{7} \\, g_{i j} = \\dfrac{3}{7} \\, g_{i j}$。\n- 测试用例 2 (非平凡度规，常曲率)：\n  - 维度 $n = 3$。\n  - 度规 $g_{ij} = \\mathrm{diag}(2, 1.5, 0.7) = \\begin{bmatrix} 2  0  0 \\\\ 0  1.5  0 \\\\ 0  0  0.7 \\end{bmatrix}$。\n  - 曲率 $K = \\dfrac{1}{3}$。\n  - 预期 $R_{i j}^{(\\text{expected})} = (3 - 1) \\cdot \\dfrac{1}{3} \\, g_{i j} = \\dfrac{2}{3} \\, g_{i j}$。\n- 测试用例 3 (平直空间边缘情况)：\n  - 维度 $n = 2$。\n  - 度规 $g_{ij} = \\mathrm{diag}(1.7, 0.9) = \\begin{bmatrix} 1.7  0 \\\\ 0  0.9 \\end{bmatrix}$。\n  - 曲率 $K = 0$。\n  - 预期 $R_{i j}^{(\\text{expected})} = (2 - 1) \\cdot 0 \\cdot g_{i j} = 0 \\cdot g_{i j} = \\begin{bmatrix} 0  0 \\\\ 0  0 \\end{bmatrix}$。\n- 测试用例 4 (边界维度 n = 1)：\n  - 维度 $n = 1$。\n  - 度规 $g_{ij} = \\begin{bmatrix} 4.2 \\end{bmatrix}$。\n  - 曲率 $K = 0.8$。\n  - 预期 $R_{i j}^{(\\text{expected})} = (1 - 1) \\cdot 0.8 \\cdot g_{i j} = 0 \\cdot g_{i j} = \\begin{bmatrix} 0 \\end{bmatrix}$。\n\n实现要求：\n- 对于每个测试用例，使用提供的 $g_{i j}$ 和 $K$，通过上述常曲率公式构建 $R_{l i k j}$。\n- 计算 $g^{i j}$ 作为 $g_{i j}$ 的逆。\n- 形成 $R^{a}{}_{i k j} = g^{a l} R_{l i k j}$，然后将提升的指标与第三个指标缩并以产生 $R_{i j}$。\n- 对每个用例，计算 $R_{i j}$ 和 $R_{i j}^{(\\text{expected})}$ 之间逐项的最大绝对差，并返回一个布尔值，指示此差是否小于或等于 $\\tau = 10^{-12}$。\n\n最终输出格式：\n- 您的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表的结果，例如 $[True,False,True,True]$。", "solution": "所提出的问题是计算张量代数中一个定义明确的练习，其基础是微分几何的原理。它在科学上是合理的，内容是自洽的，并且在算法上是可行的。因此，我将提供一个完整的解决方案。\n\n任务是，对于一个具有常截面曲率 $K$ 的空间，从全协变Riemann曲率张量 $R_{likj}$ 计算Ricci张量 $R_{ij}$，并将此计算结果与已知的解析公式进行验证。我们已知空间的维度 $n$、度规张量 $g_{ij}$ 以及曲率 $K$。\n\n过程如下：\n1. 构建4阶Riemann张量 $R_{likj}$。\n2. 计算逆度规张量 $g^{ij}$。\n3. 提升Riemann张量的第一个指标，以获得混合指标张量 $R^{a}{}_{ikj}$。\n4. 对 $R^{a}{}_{ikj}$ 的第一个和第三个指标进行缩并，以获得2阶Ricci张量 $R_{ij}$。\n5. 将计算出的 $R_{ij}$ 与预期的解析结果 $R_{i j}^{(\\text{expected})} = (n-1) K g_{ij}$ 进行比较。\n\n让我们详细说明计算的每一步。我们将用多维数组来表示张量，爱因斯坦求和约定将通过张量缩并来实现，对此 `numpy.einsum` 函数非常适用，因为它提供了从指标记法到计算的直接映射。\n\n**第1步：构建Riemann曲率张量 $R_{l i k j}$**\n问题提供了在常曲率 $K$ 空间中Riemann张量的公式：\n$$\nR_{l i k j} = K \\left( g_{l k} g_{i j} - g_{l j} g_{i k} \\right)\n$$\n在这里，$R_{likj}$ 是一个4阶张量，我们将其表示为一个4维数组。指标 $l, i, k, j$ 的取值范围都是从 $0$ 到 $n-1$。项 $g_{lk}g_{ij}$ 是两个度规张量的外积，可以通过计算机构建。$g_{lj}g_{ik}$ 也是如此。在指标记法中，这是一个直接的复合。使用 `einsum`，我们可以将这两项表示为：\n- $g_{lk} g_{ij} \\rightarrow \\text{`np.einsum('lk,ij-likj', g, g)`}$\n- $g_{lj} g_{ik} \\rightarrow \\text{`np.einsum('lj,ik-likj', g, g)`}$\n然后根据公式组合所得到的4维数组，以产生 $R_{likj}$。\n\n**第2步：计算逆度规张量 $g^{ij}$**\n逆度规张量 $g^{ij}$ 由关系式 $g^{ik} g_{kj} = \\delta^{i}{}_{j}$ 定义，其中 $\\delta^{i}{}_{j}$ 是克罗内克δ。这意味着代表 $g^{ij}$ 的矩阵是代表 $g_{ij}$ 的矩阵的代数逆。这是一个标准的线性代数运算。\n$$\n[g^{ij}] = ([g_{ij}])^{-1}\n$$\n\n**第3步：提升Riemann张量的第一个指标**\n我们要通过使用逆度规提升 $R_{likj}$ 的第一个指标来计算混合张量 $R^{a}{}_{ikj}$。这是对 $R_{likj}$ 第一个指标的缩并：\n$$\nR^{a}{}_{i k j} = g^{a l} R_{l i k j}\n$$\n在爱因斯坦记法中，重复的指标 $l$（一个逆变，一个协变）意味着求和。此操作将 $g^{al}$ 的第二个指标与 $R_{likj}$ 的第一个指标进行缩并。得到的张量具有指标 $(a, i, k, j)$。使用 `einsum`，这个变换表示为：\n- $g^{al} R_{likj} \\rightarrow \\text{`np.einsum('al,likj-aikj', g_inv, R)`}$\n其中 `g_inv` 是 $g^{ij}$ 的数组，`R` 是 $R_{likj}$ 的数组。\n\n**第4步：通过缩并计算Ricci张量 $R_{ij}$**\nRicci张量 $R_{ij}$ 是通过缩并混合Riemann张量 $R^{a}{}_{ikj}$ 的第一个（逆变）和第三个（协变）指标得到的。\n$$\nR_{i j} = R^{k}{}_{i k j}\n$$\n这涉及到对指标 $k$ 进行求和，它同时出现在逆变（第一）和协变（第三）位置上。这将张量的阶数从4降为2，留下自由指标 $i$ 和 $j$。此缩并的 `einsum` 表达式为：\n- $R^{k}{}_{ikj} \\rightarrow \\text{`np.einsum('kikj-ij', R_mixed)`}$\n其中 `R_mixed` 是 $R^{a}{}_{ikj}$ 的数组。\n\n**第5步：验证**\n最后，我们计算常曲率空间的预期Ricci张量，其公式为：\n$$\nR_{i j}^{(\\text{expected})} = (n - 1) K \\, g_{i j}\n$$\n这是度规张量 $g_{ij}$ 的简单标量乘法。\n然后我们计算计算出的Ricci张量和预期的Ricci张量各元素之间的最大绝对差：\n$$\n\\Delta = \\max_{i,j} | R_{ij} - R_{i j}^{(\\text{expected})} |\n$$\n每个测试用例的结果是一个布尔值，如果 $\\Delta \\le \\tau$（其中容差 $\\tau$ 为 $10^{-12}$），则为 `True`，否则为 `False`。\n\n这一系列步骤提供了一种稳健且可验证的方法来计算Ricci张量，并根据理论验证结果。`einsum` 的使用确保了实现忠实于张量指标记法的数学形式体系。对于 $n=1$ 的特殊情况，Riemann张量 $R_{likj}$ 恒等于零，因为 $R_{1111} = K(g_{11}g_{11} - g_{11}g_{11}) = 0$。因此，计算出的Ricci张量 $R_{11}$ 也将为 $0$，这与预期结果 $R_{11}^{(\\text{expected})} = (1-1)Kg_{11} = 0$ 相匹配。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the computational engineering problem of calculating and verifying the Ricci tensor.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # Test case 1: n=2, Euclidean metric\n        {\n            \"n\": 2,\n            \"g\": np.array([[1.0, 0.0], [0.0, 1.0]]),\n            \"K\": 3.0 / 7.0,\n        },\n        # Test case 2: n=3, diagonal metric\n        {\n            \"n\": 3,\n            \"g\": np.array([[2.0, 0.0, 0.0], [0.0, 1.5, 0.0], [0.0, 0.0, 0.7]]),\n            \"K\": 1.0 / 3.0,\n        },\n        # Test case 3: n=2, flat space\n        {\n            \"n\": 2,\n            \"g\": np.array([[1.7, 0.0], [0.0, 0.9]]),\n            \"K\": 0.0,\n        },\n        # Test case 4: n=1, boundary dimension\n        {\n            \"n\": 1,\n            \"g\": np.array([[4.2]]),\n            \"K\": 0.8,\n        },\n    ]\n\n    tolerance = 1e-12\n    results = []\n\n    for case in test_cases:\n        n = case[\"n\"]\n        g = case[\"g\"]\n        K = case[\"K\"]\n\n        # Step 1: Construct the fully covariant Riemann tensor R_likj.\n        # R_likj = K * (g_lk * g_ij - g_lj * g_ik)\n        # The 'einsum' function directly translates index notation to computation.\n        term1 = np.einsum('lk,ij->likj', g, g)\n        term2 = np.einsum('lj,ik->likj', g, g)\n        R_likj = K * (term1 - term2)\n\n        # Step 2: Compute the inverse metric g^ij.\n        # This is the matrix inverse of g_ij.\n        g_inv = np.linalg.inv(g)\n\n        # Step 3: Raise the first index to form the mixed tensor R^a_ikj.\n        # R^a_ikj = g^al * R_likj\n        # This is a contraction over the index 'l'.\n        R_a_ikj = np.einsum('al,likj->aikj', g_inv, R_likj)\n\n        # Step 4: Contract to find the Ricci tensor R_ij.\n        # R_ij = R^k_ikj\n        # This contracts the first ('a', here renamed to 'k') and third ('k') indices.\n        Ricci_computed = np.einsum('kikj->ij', R_a_ikj)\n\n        # Step 5: Compute the expected Ricci tensor for comparison.\n        # R_ij^(expected) = (n - 1) * K * g_ij\n        Ricci_expected = (n - 1) * K * g\n\n        # Step 6: Compare the computed and expected tensors.\n        # Calculate the maximum absolute difference between the two tensors.\n        max_abs_diff = np.max(np.abs(Ricci_computed - Ricci_expected))\n\n        # Check if the difference is within the specified tolerance.\n        is_verified = max_abs_diff = tolerance\n        results.append(is_verified)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "2442518"}]}
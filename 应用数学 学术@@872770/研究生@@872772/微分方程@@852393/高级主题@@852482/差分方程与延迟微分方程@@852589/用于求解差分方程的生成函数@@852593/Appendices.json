{"hands_on_practices": [{"introduction": "生成函数方法在处理包含前面所有项之和的递推关系时，其威力尤为显著。这种看似复杂的求和结构，可以通过生成函数巧妙地转化为简单的代数运算。本练习将引导你解决一个包含累加和的递推关系 [@problem_id:1106530]，通过构建并求解其普通生成函数的代数方程，你将亲身体验到如何将卷积（或求和）形式的关系转化为简单的乘积，从而轻松求得序列的通项公式。", "problem": "一个数列 $\\{a_n\\}_{n=0}^{\\infty}$ 由初值 $a_0$ 和一个对 $n \\ge 1$ 成立的递推关系定义：每一项 $a_n$ 是其前面所有项的和再加上一个常数 $C$。即，\n$$ a_n = C + \\sum_{k=0}^{n-1} a_k, \\quad \\text{for } n \\ge 1. $$\n你的任务是求出通项 $a_n$ 的闭式表达式。为此，你必须首先通过建立并求解一个关于 $G(x)$ 的一阶线性代数方程来确定该数列的普通生成函数 $G(x) = \\sum_{n=0}^{\\infty} a_n x^n$。根据得到的 $G(x)$ 表达式，推导出 $a_n$ 的公式。\n\n对于本题，考虑初值等于常数的特殊情况，即 $a_0 = C$。\n\n求出对所有 $n \\ge 0$ 的 $a_n$ 的表达式。", "solution": "我们定义生成函数\n$$G(x)=\\sum_{n=0}^\\infty a_n x^n.$$ \n将递推式\n$$a_n = C + \\sum_{k=0}^{n-1}a_k,\\quad n\\ge1$$ \n乘以 $x^n$ 并对 $n\\ge1$ 求和：\n$$\\sum_{n=1}^\\infty a_n x^n\n= C\\sum_{n=1}^\\infty x^n\n+\\sum_{n=1}^\\infty\\Bigl(\\sum_{k=0}^{n-1}a_k\\Bigr)x^n.$$\n左边是 $G(x)-a_0=G(x)-C$。右边的第一个和是 $C\\,\\frac{x}{1-x}$。这个二重和可以交换求和次序：\n$$\\sum_{n=1}^\\infty\\sum_{k=0}^{n-1}a_k x^n\n=\\sum_{k=0}^\\infty a_k\\sum_{n=k+1}^\\infty x^n\n=\\frac{x}{1-x}\\sum_{k=0}^\\infty a_k x^k\n=\\frac{x}{1-x}G(x).$$\n因此\n$$(G(x)-C)=C\\frac{x}{1-x}+\\frac{x}{1-x}G(x).$$\n两边同乘以 $1-x$：\n$$(1-x)G(x)-C(1-x)=Cx+xG(x).$$\n整理以分离出 $G(x)$：\n$$G(x)(1-2x)=C\n\\quad\\Longrightarrow\\quad\nG(x)=\\frac{C}{1-2x}.$$\n展开成幂级数可得\n$$G(x)=C\\sum_{n=0}^\\infty(2x)^n\n\\quad\\Longrightarrow\\quad\na_n=C\\,2^n.$$", "answer": "$$\\boxed{C\\,2^n}$$", "id": "1106530"}, {"introduction": "在掌握了基本思想后，我们来处理一个生成函数方法中的“标准”问题：求解常系数线性齐次递推关系 [@problem_id:1106543]。这类问题有一套系统化的解决流程，是运用生成函数技术的核心基本功。通过这个练习，你将完整地实践从建立生成函数方程、求解有理表达式、进行部分分式分解，到最终通过级数展开来确定通项公式的全过程，为解决更复杂的问题打下坚实的基础。", "problem": "考虑一个序列 $\\{v_n\\}_{n \\ge 0}$，它由以下常系数线性齐次递推关系定义：\n$$2v_n - 5v_{n-1} - 3v_{n-2} = 0, \\quad \\text{对于 } n \\ge 2$$\n该序列的初始值为 $v_0 = 0$ 和 $v_1 = 1$。\n\n你的任务是推导通项 $v_n$ 的一个封闭形式表达式。你必须使用普通生成函数的方法。推导过程应明确包括以下步骤：\n1.  定义普通生成函数 $V(x) = \\sum_{n=0}^{\\infty} v_n x^n$。\n2.  从递推关系中推导出 $V(x)$ 的一个有理表达式（多项式的比值）。\n3.  将此有理表达式分解为部分分式。\n4.  利用部分分式展开式，通过将每一项展开为 $x$ 的幂级数来确定 $v_n$ 的显式公式。", "solution": "定义普通生成函数\n$$\nV(x)\\;=\\;\\sum_{n=0}^\\infty v_n\\,x^n.\n$$\n将递推关系 $2v_n-5v_{n-1}-3v_{n-2}=0$ 乘以 $x^n$ 并在 $n\\ge2$ 上求和，得到\n$$\n\\sum_{n=2}^\\infty2v_nx^n-\\sum_{n=2}^\\infty5v_{n-1}x^n-\\sum_{n=2}^\\infty3v_{n-2}x^n=0.\n$$\n注意\n$$\n\\sum_{n=2}^\\infty v_nx^n=V(x)-v_0-v_1x=V(x)-x,\n\\quad\n\\sum_{n=2}^\\infty v_{n-1}x^n\n=x\\sum_{m=1}^\\infty v_mx^m\n=x(V(x)-v_0)=xV(x),\n$$\n$$\n\\sum_{n=2}^\\infty v_{n-2}x^n\n=x^2\\sum_{k=0}^\\infty v_kx^k\n=x^2V(x).\n$$\n因此\n$$\n2\\bigl(V(x)-x\\bigr)-5xV(x)-3x^2V(x)=0\n\\;\\Longrightarrow\\;\nV(x)\\,(2-5x-3x^2)=2x\n\\;\\Longrightarrow\\;\nV(x)=\\frac{2x}{2-5x-3x^2}.\n$$\n分解分母：\n$$\n2-5x-3x^2=(1-3x)(2+x),\n$$\n所以\n$$\nV(x)=\\frac{2x}{(1-3x)(2+x)}\n=\\frac{A}{1-3x}+\\frac{B}{2+x}.\n$$\n去分母：\n$$\n2x=A(2+x)+B(1-3x)\n=(A-3B)x+(2A+B).\n$$\n比较系数：\n$$\nA-3B=2,\\quad2A+B=0\\;\\Longrightarrow\\;A=\\tfrac{2}{7},\\;B=-\\tfrac{4}{7}.\n$$\n于是\n$$\nV(x)\n=\\frac{2/7}{1-3x}-\\frac{4/7}{2+x}\n=\\frac{2}{7}\\sum_{n=0}^\\infty (3x)^n\n-\\frac{2}{7}\\sum_{n=0}^\\infty\\left(-\\frac{x}{2}\\right)^n\n=\\sum_{n=0}^\\infty\\frac{2}{7}\\left(3^n-\\left(-\\frac{1}{2}\\right)^n\\right)x^n.\n$$\n读出系数得到\n$$\nv_n=\\frac{2}{7}\\left(3^n-\\left(-\\frac{1}{2}\\right)^n\\right).\n$$", "answer": "$$\\boxed{\\frac{2}{7}\\left(3^n-\\left(-\\frac{1}{2}\\right)^n\\right)}$$", "id": "1106543"}, {"introduction": "生成函数的工具箱并不仅限于处理代数方程的普通生成函数。本练习将向你介绍一种功能强大的变体——指数生成函数（EGF），它特别适用于处理包含阶乘或与项数 $n$ 相乘的递推关系 [@problem_id:1106527]。你将探索如何利用指数生成函数将一个耦合递推方程组转化为一个关于生成函数的二阶线性常微分方程。这个过程不仅展示了生成函数与微积分的深刻联系，也为你解决更广泛的组合问题提供了新的视角。", "problem": "两个非负整数序列 $a_n$ 和 $b_n$（其中 $n \\ge 0$）由以下耦合递推关系定义：\n$$a_{n+1} = a_n + b_n$$\n$$b_{n+1} = n a_n$$\n初始条件为 $a_0 = 1$ 和 $b_0 = 0$。\n\n一个序列 $\\{s_k\\}_{k=0}^\\infty$ 的指数生成函数 (EGF) 定义为 $S(x) = \\sum_{k=0}^{\\infty} \\frac{s_k}{k!} x^k$。我们关心一个相关的序列 $c_n = b_{n+1}$。\n\n您的任务是推导出序列 $\\{c_n\\}$ 的指数生成函数 $C(x)$ 的闭式表达式。", "solution": "1. 定义指数生成函数\n$$A(x)=\\sum_{n=0}^\\infty\\frac{a_n}{n!}x^n,\\quad B(x)=\\sum_{n=0}^\\infty\\frac{b_n}{n!}x^n.$$\n那么\n$$A'(x)=\\sum_{n=0}^\\infty\\frac{a_{n+1}}{n!}x^n,\\quad B'(x)=\\sum_{n=0}^\\infty\\frac{b_{n+1}}{n!}x^n.$$\n2. 根据递推关系 $a_{n+1}=a_n+b_n$ 和 $b_{n+1}=n\\,a_n$ 我们得到\n$$A'(x)=A(x)+B(x),\\quad B'(x)=x\\,A'(x).$$\n3. 消去 $B(x)$：对 $A'(x)-A(x)=B(x)$ 求导得到\n$$A''(x)-A'(x)=B'(x)=x\\,A'(x)\\;\\Longrightarrow\\;A''(x)=(1+x)A'(x).$$\n4. 令 $U(x)=A'(x)$。那么 $U'/U=1+x$，所以\n$$U(x)=\\exp\\!\\bigl(x+\\tfrac12x^2\\bigr),\\quad U(0)=1.$$\n因此\n$$A'(x)=e^{x+\\frac{x^2}{2}}.$$\n5. 最后，$c_n=b_{n+1}$ 的指数生成函数是\n$$C(x)=\\sum_{n=0}^\\infty\\frac{b_{n+1}}{n!}x^n=B'(x)=x\\,e^{x+\\frac{x^2}{2}}.$$", "answer": "$$\\boxed{x\\,e^{x+\\frac{x^2}{2}}}$$", "id": "1106527"}]}
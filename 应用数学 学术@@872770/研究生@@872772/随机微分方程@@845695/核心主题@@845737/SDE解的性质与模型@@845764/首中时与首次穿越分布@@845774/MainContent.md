## 引言
在随机现象的建模中，一个反复出现的核心问题是：一个系统需要多长时间才能首次达到某个关键状态？这个问题在众多领域都至关重要，从金融资产价格触及预警线，到[化学反应](@entry_id:146973)物浓度达到临界值，再到[生物种群](@entry_id:200266)走向灭绝。描述这一现象的数学工具便是“首达时间”（Hitting Time）或“首过时间”（First Passage Time）。尽管其概念直观，但精确地计算和分析其[概率分布](@entry_id:146404)却是一个深刻且富有挑战性的数学难题，构成了现代[随机过程](@entry_id:159502)理论的一个核心研究方向。

本文旨在为读者提供一个关于首达时间理论及其应用的全面而深入的指南。我们的旅程将分为三个部分。在第一章**“原理与机制”**中，我们将奠定坚实的数学基础，系统介绍首达时间的定义、性质，并深入探讨两种核心的分析[范式](@entry_id:161181)：基于[偏微分方程](@entry_id:141332)的解析方法和基于[测度变换](@entry_id:157887)的概率论方法。随后，在第二章**“应用与交叉学科联系”**中，我们将展示这些抽象理论如何转化为解决真实世界问题的强大工具，通过金融、物理和生物等领域的生动案例，揭示其广泛的适用性。最后，在第三章**“动手实践”**中，你将有机会通过解决一系列精心设计的问题，将所学知识付诸实践，巩固对核心概念的理解。

现在，让我们从构建理论的基石开始，深入探索计算和分析首达时间[分布](@entry_id:182848)的核心原理与机制。

## 原理与机制

在[随机过程](@entry_id:159502)理论中，**[首次穿越时间](@entry_id:271944)（first passage times）** 或 **首达时间（hitting times）** 的概念至关重要。它描述了一个[随机过程](@entry_id:159502)首次到达某个预定状态或区域所需的时间。这一概念在众多科学与工程领域都有着核心应用，例如在金融中模拟资产价格首次触及某个阈值（如违约边界或期权行权价），在化学中描述反应物浓度达到临界水平，或在[种群生态学](@entry_id:142920)中预测一个物种的[灭绝时间](@entry_id:266064)。本章旨在深入阐述计算和分析首达时间[分布](@entry_id:182848)的核心原理与机制。

### 首达时间的基本概念

#### 定义与性质

对于一个定义在滤波概率空间 $(\Omega, \mathcal{F}, (\mathcal{F}_t)_{t \ge 0}, \mathbb{P})$ 上，取值于 $\mathbb{R}^d$ 的[随机过程](@entry_id:159502) $\{X_t\}_{t \ge 0}$，我们首先给出其核心定义。

**定义 1.1 (首达时间)**：给定一个 Borel 集 $A \subset \mathbb{R}^d$，过程 $X_t$ 对集合 $A$ 的**首达时间** $\tau_A$ 定义为：
$$
\tau_A := \inf\{t \ge 0 : X_t \in A\}
$$
其中 $\inf$ 表示下确界。如果对所有 $t \ge 0$，都有 $X_t \notin A$，我们约定 $\tau_A = \infty$。在一维情况下，对于一个水平 $a \in \mathbb{R}$，我们常关心**向上[首次穿越时间](@entry_id:271944)** $\tau_a^+ = \inf\{t \ge 0 : X_t \ge a\}$ 或**向下[首次穿越时间](@entry_id:271944)** $\tau_a^- = \inf\{t \ge 0 : X_t \le a\}$。

一个自然而然的问题是：如果过程的初值 $X_0$ 已经满足了条件，首达时间会是多少？根据定义，集合 $\{t \ge 0 : X_t \in A\}$ 包含了 $t=0$。由于这是一个非负实数集合，其[下确界](@entry_id:140118)必然为 $0$。因此，如果 $X_0=x_0 \in A$，那么 $\tau_A = 0$ [几乎必然](@entry_id:262518)成立 [@problem_id:2978832]。

首达时间最关键的数学性质之一是它通常是一个**[停时](@entry_id:261799)（stopping time）**。一个随机时间 $\tau$ 是关于参考族 $(\mathcal{F}_t)_{t \ge 0}$ 的停时，如果对任意 $t \ge 0$，事件 $\{\tau \le t\}$ 都属于 $\mathcal{F}_t$。直观地讲，这意味着在任何时刻 $t$，我们都能根据截至该时刻的可用信息（即 $\mathcal{F}_t$ 中的信息）来判断事件 $\tau$ 是否已经发生。

**定理 1.1 (首达时间的停时性质)**：若[随机过程](@entry_id:159502) $\{X_t\}_{t \ge 0}$ 的样本[轨道](@entry_id:137151)[几乎必然](@entry_id:262518)连续，且它对一个满足通常条件（即完备且右连续）的参考族 $(\mathcal{F}_t)_{t \ge 0}$ 是适应的，那么对于任何[闭集](@entry_id:136446) $A \subset \mathbb{R}^d$，其首达时间 $\tau_A$ 都是一个 $(\mathcal{F}_t)$-[停时](@entry_id:261799)。

这一性质至关重要，因为它允许我们将强大的[鞅](@entry_id:267779)论工具（如[可选停止定理](@entry_id:267890)）应用于被停在 $\tau_A$ 时刻的过程。样本[轨道](@entry_id:137151)的连续性是此定理成立的一个常用充分条件 [@problem_id:2978832] [@problem_id:2978854]。更普遍地，只要过程是**循序可测（progressively measurable）**的，此结论就成立。然而，如果仅仅假设过程是适应的，而没有[路径正则性](@entry_id:203771)保证，那么首达时间不一定是[停时](@entry_id:261799) [@problem_id:2978832]。

此外，值得注意的是，即使过程从一个点 $a$ 出发，它也可能在任意小的正时间内立即离开并再次返回。对于一个由[随机微分方程](@entry_id:146618)（SDE）驱动的[扩散过程](@entry_id:170696)，如 $dX_t = b(X_t)dt + \sigma(X_t)dW_t$，只要[扩散](@entry_id:141445)系数在起点 $a$ 处不为零（即 $\sigma(a) > 0$），布朗运动项的局部行为将占主导。根据[重对数律](@entry_id:268002)（Law of the Iterated Logarithm），过程几乎必然会在任意小的初始时间间隔内，同时穿越到 $a$ 的上方和下方。这意味着，如果我们定义一个严格的首达时间 $\tau_a^{++} = \inf\{t > 0 : X_t > a\}$，对于从 $X_0=a$ 出发且 $\sigma(a)>0$ 的过程，我们仍然会得到 $\tau_a^{++}=0$（几乎必然），这与包含 $t=0$ 的定义 $\tau_a^+ = \inf\{t \ge 0 : X_t \ge a\}$ 的结果相同 [@problem_id:2978832]。

最后，随机微分方程的**路径唯一性（pathwise uniqueness）**对首达时间有直接影响。路径唯一性保证了对于给定的[布朗运动路径](@entry_id:274361)和初始条件，SDE的[解路径](@entry_id:755046)是唯一的。因此，如果两个过程 $X_t$ 和 $Y_t$ 是同一SDE在相同布朗运动驱动下的解且初值相同，那么它们的路径将[几乎必然](@entry_id:262518)在所有时间上都完全相同。这自然也意味着它们在任意[停时](@entry_id:261799) $\tau_a$ 之前的路径也是相同的 [@problem_id:2978854]。

### 解析方法：首达时间泛函的[微分方程](@entry_id:264184)

研究首达时间[分布](@entry_id:182848)的一个极其强大的[范式](@entry_id:161181)，是通过将其与[偏微分方程](@entry_id:141332)（PDE）或[常微分方程](@entry_id:147024)（ODE）联系起来。这种联系的核心是[随机过程](@entry_id:159502)的**无穷小生成元（infinitesimal generator）**。

#### 无穷小生成元

对于一个由SDE $dX_t = b(X_t)dt + \sigma(X_t)dW_t$ 定义的伊藤扩散过程，其[无穷小生成元](@entry_id:270424) $\mathcal{L}$ 是一个作用于光滑函数 $f$ 的二阶微分算子，它描述了 $f(X_t)$ 的期望瞬时变化率：
$$
\mathcal{L}f(x) = \lim_{h \to 0^+} \frac{\mathbb{E}_x[f(X_h)] - f(x)}{h}
$$
其中 $\mathbb{E}_x[\cdot]$ 表示从 $X_0=x$ 出发的期望。通过[伊藤公式](@entry_id:159684)可以证明，对于一个二次连续可微的函数 $f$，生成元具有如下形式：
$$
\mathcal{L}f(x) = \sum_i b_i(x) \frac{\partial f}{\partial x_i}(x) + \frac{1}{2} \sum_{i,j} (\sigma(x)\sigma(x)^T)_{ij} \frac{\partial^2 f}{\partial x_i \partial x_j}(x)
$$
对于一维过程 $dX_t = b(X_t)dt + \sigma(X_t)dW_t$，生成元简化为：
$$
\mathcal{L}f(x) = b(x)f'(x) + \frac{1}{2}\sigma^2(x)f''(x)
$$

#### [首达概率](@entry_id:276483)

考虑一个[一维扩散](@entry_id:181320)过程 $X_t$ 在区间 $(a,b)$ 内运动，我们想知道从 $x \in (a,b)$ 出发，它会先到达上边界 $b$ 还是下边界 $a$。令 $p(x) = \mathbb{P}_x(\tau_b  \tau_a)$ 为首达上边界的概率。这是一个经典的**[调和函数](@entry_id:746864)（harmonic function）**问题。可以证明，$p(x)$ 满足以下[边值问题](@entry_id:193901)：
$$
\mathcal{L}p(x) = 0, \quad \text{for } x \in (a,b)
$$
边界条件由问题的定义直接给出：如果从 $b$ 出发，则已经到达 $b$，概率为1；如果从 $a$ 出发，则已经到达 $a$，不可能先到达 $b$，概率为0。因此，$p(b)=1$ 且 $p(a)=0$。

作为一个具体的例子，考虑一个[带漂移的布朗运动](@entry_id:275071) $dX_t = \mu dt + \sigma dW_t$，其中 $\mu$ 和 $\sigma0$ 是常数。我们想计算从 $x  a$ 出发，最终能够到达水平 $a$ 的概率，即 $p(x) = \mathbb{P}_x(\tau_a^+  \infty)$。这相当于在 $(-\infty, a)$ 区间内求解 $\mathcal{L}p(x) = 0$，其中 $\mathcal{L} = \mu \frac{d}{dx} + \frac{1}{2}\sigma^2 \frac{d^2}{dx^2}$。边界条件是 $p(a)=1$。另一个边界条件取决于 $x \to -\infty$ 时的行为。通过求解这个[二阶常微分方程](@entry_id:204212)并施加适当的边界条件，可以得到解 [@problem_id:2978832]：
$$
\mathbb{P}_x(\tau_a^+  \infty) =
\begin{cases}
1  \text{if } \mu \ge 0 \\
\exp\left(\frac{2\mu(a-x)}{\sigma^2}\right)  \text{if } \mu  0
\end{cases}
$$
这个结果直观地表明：当漂移为正或零时，[一维扩散](@entry_id:181320)过程是常返的或瞬时到 $+\infty$，因此几乎必然会到达任何更高的水平。当漂移为负时，过程倾向于向 $-\infty$ 移动，因此存在一个不为零的概率永远不会到达 $a$。

这种方法也可以推广到更高维度，特别是对于具有对称性的问题。例如，考虑一个在二维环形域 $D = \{x \in \mathbb{R}^2 : a  |x|  b\}$ 中运动的[扩散过程](@entry_id:170696)，其漂移由一个[径向对称](@entry_id:141658)的势场 $V(x) = \kappa \ln|x|$ 给出。我们想计算过程从半径为 $r$ 的圆周上出发，先撞击内边界（半径为 $a$）还是外边界（半径为 $b$）的概率。利用问题的[旋转对称](@entry_id:137077)性，[首达概率](@entry_id:276483) $u(x)$ 必然只依赖于半径 $r=|x|$，即 $u(x)=p(r)$。通过将生成元方程 $\mathcal{L}u=0$ 转换到极[坐标系](@entry_id:156346)下，原来的[偏微分方程](@entry_id:141332)可以简化为一个关于 $p(r)$ 的[常微分方程](@entry_id:147024)。求解这个ODE并施加边界条件 $p(a)=1$（撞击内边界）和 $p(b)=0$（撞击外边界），就可以得到所求的概率 [@problem_id:2978811]。

### 首达时间的矩和[拉普拉斯变换](@entry_id:159339)

除了[首达概率](@entry_id:276483)，我们通常更关心首达时间本身的[分布](@entry_id:182848)，或者至少是它的某些矩，如[期望值](@entry_id:153208)。解析方法同样为此提供了强大的工具。

#### [费曼-卡茨公式](@entry_id:272429)

描述首达时间[分布](@entry_id:182848)的一个核心工具是计算其**拉普拉斯变换（Laplace transform）**。令 $u(x) = \mathbb{E}_x[e^{-\lambda \tau_A}]$，其中 $\lambda0$ 是一个常数，$\tau_A$ 是首次离开区间 $I$ 的时间。著名的**[费曼-卡茨公式](@entry_id:272429)（Feynman-Kac formula）**指出，$u(x)$ 满足以下[微分方程](@entry_id:264184)：
$$
\mathcal{L}u(x) = \lambda u(x), \quad \text{for } x \in I
$$
这个方程的边界条件取决于过程在边界 $A$ 上的行为。如果过程在到达 $A$ 时停止，那么在边界上 $\tau_A = 0$，因此 $u(x)=e^{-\lambda \cdot 0} = 1$ 对所有 $x \in A$ 成立。此外，还需要在其他边界（可能是无穷远处）施加合适的边界条件，通常是要求解是有界的或趋于零 [@problem_id:2978832] [@problem_id:2978854]。

例如，考虑一个[几何布朗运动](@entry_id:137398)（GBM），$dX_t = \mu X_t dt + \sigma X_t dW_t$，从 $X_0=x \in (0, a)$ 出发。我们想计算首达时间 $\tau_a$ 的[拉普拉斯变换](@entry_id:159339) $u(x) = \mathbb{E}_x[e^{-q\tau_a}]$。该过程的生成元是 $\mathcal{L} = \mu x \frac{d}{dx} + \frac{1}{2}\sigma^2 x^2 \frac{d^2}{dx^2}$。根据[费曼-卡茨公式](@entry_id:272429)，$u(x)$ 满足：
$$
\frac{1}{2}\sigma^2 x^2 u''(x) + \mu x u'(x) - q u(x) = 0, \quad \text{for } x \in (0,a)
$$
这是一个[欧拉-柯西方程](@entry_id:191139)。其边界条件是 $u(a)=1$（在边界上立即到达），以及 $u(x) \to 0$ 当 $x \to 0^+$（因为 $0$ 是一个吸收壁垒，从接近 $0$ 的地方出发，过程极有可能在到达 $a$ 之前被 $0$ 吸收，导致 $\tau_a=\infty$）。通过求解这个[边值问题](@entry_id:193901)，我们可以得到拉普拉斯变换的显式表达式 [@problem_id:2978866]。

#### [期望退出时间](@entry_id:637843)

首达时间的**[期望值](@entry_id:153208)** $v(x) = \mathbb{E}_x[\tau_A]$ 同样满足一个相关的方程。注意到 $\mathbb{E}_x[\tau_A] = -\frac{d}{d\lambda}\mathbb{E}_x[e^{-\lambda \tau_A}]|_{\lambda=0}$。通过对费曼-卡茨方程 $(\mathcal{L} - \lambda)u=0$ 两边关于 $\lambda$ 求导并在 $\lambda=0$ 处取值，可以推导出 $v(x)$ 满足一个泊松型方程：
$$
\mathcal{L}v(x) = -1
$$
对于区间 $(0,L)$ 上的[吸收边界](@entry_id:201489)问题，边界条件是 $v(0)=0$ 和 $v(L)=0$，因为在边界上[退出时间](@entry_id:193122)为零。

对于[一维扩散](@entry_id:181320)，求解这个[二阶常微分方程](@entry_id:204212)的有力工具是**标度函数（scale function）** $s(x)$ 和**速度度量（speed measure）** $m(x)$。标度函数是满足 $\mathcal{L}s(x)=0$ 的一个非平凡解，而速度度量的密度 $m(dx)$ 则与 $\sigma^2(x)$ 和 $s'(x)$ 相关。利用这些工具，可以构造出[期望退出时间](@entry_id:637843)的显式积分表达式。例如，对于从区间 $(0,L)$ 退出的带漂移布朗运动，其[期望退出时间](@entry_id:637843)可以通过这种方法精确计算 [@problem_id:2978836]。

#### 与格林函数的关系

从一个更高等的泛函分析视角来看，求解方程 $(\lambda - \mathcal{L})u = f$ 的问题等价于对函数 $f$ 应用**[预解算子](@entry_id:271964)** $R_\lambda = (\lambda - \mathcal{L})^{-1}$。这个算子的积分核 $G_\lambda(x,y)$ 被称为**格林函数（Green's function）**。
$$
u(x) = R_\lambda f(x) = \int G_\lambda(x,y)f(y)dy
$$
概率解释是 $R_\lambda f(x) = \mathbb{E}_x[\int_0^\tau e^{-\lambda t} f(X_t) dt]$。通过令 $f(x)=1$，我们可以将拉普拉斯变换 $\mathbb{E}_x[e^{-\lambda\tau}]$ 与格林函数联系起来，并由此求解 [@problem_id:2978842]。这为理解[边值问题](@entry_id:193901)提供了一个更深刻的理论背景。

值得注意的是，并非所有首达时间泛函都满足简单的方程 $\mathcal{L}v=0$ 或 $\mathcal{L}v=-1$。例如，对于一个更一般的函数 $g$，泛函 $v(x) = \mathbb{E}_x[g(\tau_a)]$ 通常不满足 $\mathcal{L}v=0$ [@problem_id:2978854]。只有当 $g$ 具有特定形式（如指数函数或线性函数）时，我们才能得到简单的[微分方程](@entry_id:264184)。

### 概率论方法与[渐近分析](@entry_id:160416)

除了基于[微分方程](@entry_id:264184)的解析方法，还有一类纯粹基于概率论工具的强大技术，它们能够提供关于首达时间[分布](@entry_id:182848)的深刻见解。

#### Girsanov 定理与[反射原理](@entry_id:148504)

考虑一个基本问题：对于一个[带漂移的布朗运动](@entry_id:275071) $X_t = \mu t + \sigma W_t$，从 $X_0=0$ 出发，在时间 $T$ 之前到达水平 $a0$ 的概率是多少？即求 $\mathbb{P}(\tau_a \le T)$。

这个问题可以通过一个优美的概率论证来解决 [@problem_id:2978876]。
1.  **[测度变换](@entry_id:157887)**：首先，运用**Cameron-Martin-Girsanov 定理**。通过一个精心选择的 Radon-Nikodym 导数，我们可以定义一个新的[概率测度](@entry_id:190821) $\mathbb{Q}$，使得在 $\mathbb{Q}$ 下，原来的过程 $X_t$ 变成一个无漂移的、经伸缩的标准布朗运动，即 $X_t = \sigma \tilde{W}_t$，其中 $\tilde{W}_t$ 是 $\mathbb{Q}$ 下的标准布朗运动。
2.  **[反射原理](@entry_id:148504)**：在新的测度 $\mathbb{Q}$ 下，问题转化为计算一个标准布朗运动（经伸缩）在时间 $T$ 前到达某个水平的概率。这正是**[反射原理](@entry_id:148504)（reflection principle）** 的用武之地。该原理指出，对于一个标准布朗运动，在时间 $T$ 前达到水平 $b0$ 的概率，等于其在时刻 $T$ 的值大于 $b$ 的概率的两倍。利用这个原理，我们可以计算出在 $\mathbb{Q}$ 下的相应概率。
3.  **测度转换回溯**：最后，利用[测度变换](@entry_id:157887)的 Radon-Nikodym 导数，将在 $\mathbb{Q}$ 下计算出的期望（即概率）转换回原测度 $\mathbb{P}$ 下的概率。

这个方法完全避开了求解 PDE，而是巧妙地运用了[测度变换](@entry_id:157887)和布朗运动的对称性，得出了与解析方法一致的精确解。

#### 生存概率与热核方程

与首达[时间问题](@entry_id:202825)紧密相关的是**生存概率** $S(x,t) = \mathbb{P}_x(\tau  t)$，即过程在时间 $t$ 之前一直保持在某个区域内的概率。这个函数满足**倒向 Kolmogorov 方程**，这是一个与[热传导方程](@entry_id:194763)类似的[偏微分方程](@entry_id:141332)：
$$
\frac{\partial S}{\partial t} = \mathcal{L}S
$$
其初始条件为 $S(x,0)=1$（如果 $x$ 在区域内部），边界条件为 $S(x,t)=0$（如果 $x$ 在[吸收边界](@entry_id:201489)上）。对于[带漂移的布朗运动](@entry_id:275071)在一维半直线上的生存问题，这个 PDE 的解可以通过**[镜像法](@entry_id:163138)（method of images）**求得，这实际上是[反射原理](@entry_id:148504)在 PDE 领域的对应体现 [@problem_id:2978829]。如果在过程中还存在一个固定的“杀戮速率” $q$，即过程在区域内部以泊松速率 $q$ 被终止，那么相应的泛函 $S(x,t) = \mathbb{E}_x[e^{-qt} \mathbf{1}_{\{\tau  t\}}]$ 将满足一个带零阶项的 PDE：$\frac{\partial S}{\partial t} = \mathcal{L}S - qS$ [@problem_id:2978829]。

#### [大偏差理论](@entry_id:273365)与[退出时间](@entry_id:193122)

当 SDE 中的噪声项很小（即 $dX_t^\epsilon = b(X_t^\epsilon)dt + \sqrt{\epsilon}dW_t$ 中 $\epsilon \to 0$）时，过程的轨迹将大概率紧随确定性动力系统 $\dot{x}=b(x)$ 的[轨道](@entry_id:137151)。然而，由于随机扰动，过程终将以一个极小的概率偏离确定性[轨道](@entry_id:137151)，并可能从一个稳定[平衡点](@entry_id:272705)的吸引盆中“逃逸”出去。

**Freidlin-Wentzell [大偏差理论](@entry_id:273365)** 精确地描述了这种稀有事件的概率。该理论指出，从一个吸引盆 $D$ 的首次[退出时间](@entry_id:193122)的[期望值](@entry_id:153208)具有如下指数渐近形式：
$$
\mathbb{E}[\tau_D] \sim \exp(\frac{\Delta V}{\epsilon}) \quad \text{as } \epsilon \to 0
$$
这里的 $\Delta V$ 是所谓的**[准势](@entry_id:196547)垒（quasipotential barrier）**。对于[梯度系统](@entry_id:275982)，即 $b(x) = -\nabla U(x)$，情况大大简化。[准势](@entry_id:196547)垒 $V$ 就等于原势能 $U$（相差一个常数）。而系统逃离[吸引盆](@entry_id:174948)最可能通过的路径是翻越势垒的“最低点”，这个最低点通常是[吸引盆](@entry_id:174948)边界上的一个[鞍点](@entry_id:142576)。因此，势垒高度 $\Delta V$ 就等于该[鞍点](@entry_id:142576)与[吸引盆](@entry_id:174948)底（稳定[平衡点](@entry_id:272705)）之间的[势能](@entry_id:748988)差 [@problem_id:2978874]。计算这个[势能](@entry_id:748988)差，就可以得到平均[退出时间](@entry_id:193122)的领先指数项，这在研究亚稳定态的转变中至关重要。

### 对跳跃-[扩散过程](@entry_id:170696)的推广

[经典扩散](@entry_id:197003)理论主要处理路径连续的过程。然而，许多现实系统会经历突然的、瞬时的跳跃。这些过程可以通过**跳跃-[扩散](@entry_id:141445) SDE**（或称 Itô-Lévy 过程）来建模：
$$
dX_t = \mu dt + \sigma dW_t + dJ_t
$$
其中 $J_t$ 是一个[跳跃过程](@entry_id:180953)，例如[复合泊松过程](@entry_id:140283)。

跳跃的存在从根本上改变了首达[时间问题](@entry_id:202825)的性质。由于过程可以“跳过”一个边界，它在到达边界时可能不会恰好停在边界上，而是会有一个**超射（overshoot）**。这对解析方法的数学结构产生了深远影响。

无穷小生成元现在必须包含一个描述跳跃的非局部项，通常是一个积分算子：
$$
\mathcal{L}f(x) = \text{(漂移与扩散项)} + \lambda \int_{\mathbb{R}} \big(f(x+y)-f(x)\big) \nu(dy)
$$
其中 $\lambda$ 是跳跃强度，$\nu(dy)$ 是跳跃大小的[分布](@entry_id:182848)。因此，之前得到的关于首达时间泛函的[微分方程](@entry_id:264184)现在变成了**偏积分-[微分方程](@entry_id:264184)（[PID](@entry_id:174286)E）**。

例如，对于一个寻求在区间 $(0,b)$ 内的[首达概率](@entry_id:276483)的泛函 $u_q(x) = \mathbb{E}_x[e^{-q\tau_b^+} \mathbf{1}_{\{\tau_b^+  \tau_0^-\}}]$，它满足的方程是 $(\mathcal{L}-q)u_q(x)=0$。由于[积分算子](@entry_id:262332)的非局部性，在计算 $x \in (0,b)$ 处的 $\mathcal{L}u_q(x)$ 时，我们需要知道 $u_q(x+y)$ 的值，而 $x+y$ 很可能落在 $(0,b)$ 之外。因此，简单的[狄利克雷边界条件](@entry_id:173524)（如 $u_q(0)=0, u_q(b)=1$）是不够的。我们必须指定函数在整个[状态空间](@entry_id:177074)中的值。对于这个问题，当 $x \le 0$ 时，$\tau_0^-=0$，所以 $u_q(x)=0$；当 $x \ge b$ 时，$\tau_b^+=0$，所以 $u_q(x)=1$。这些不再是边界点上的条件，而是函数在边界之外的**延拓条件（extension conditions）** [@problem_id:2978809]。解决这类 PIDE 通常比解决 ODE 或 PDE 更具挑战性，但它们是准确描述含[跳跃过程](@entry_id:180953)行为的必要工具。
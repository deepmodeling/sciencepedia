{"hands_on_practices": [{"introduction": "学习任何算法的最好方法都是亲自动手实践。本练习将指导您在一个简单的网络中手动执行 Edmonds-Karp 算法的前两步。通过像计算机一样逐步操作，您将能深入理解该算法的核心机制：如何在残留图中利用广度优先搜索 (BFS) 寻找最短增广路径，并据此更新流。[@problem_id:1540089]", "problem": "一个情报机构正在分析一个由有向图表示的通信网络。节点是特工，有向边代表安全的单向通信信道。每个信道的容量是单位时间内一个数据包。该机构希望确定从源头特工 'HQ' 到目标特工 'Target' 的数据流量。\n\n该网络由以下信道（边）定义：\n- HQ 到 Alpha\n- HQ 到 Bravo\n- Alpha 到 Charlie\n- Alpha 到 Delta\n- Bravo 到 Alpha\n- Bravo 到 Delta\n- Charlie 到 Target\n- Delta 到 Echo\n- Echo 到 Charlie\n- Echo 到 Target\n\n你的任务是使用 Edmonds-Karp 算法分析流量，该算法通过在残留图上进行广度优先搜索（BFS）来寻找增广路径。假设当 BFS 需要在距离源点相同距离的多个节点中选择加入队列时，它会按照字典序（字母顺序）添加它们。\n\n计算在完成前两次路径增广后，从 HQ 到 Target 的总流量。", "solution": "我们将问题建模为一个单位容量的有向网络，并应用 Edmonds-Karp 算法。该算法通过在残留图中进行广度优先搜索（BFS）来重复寻找从源点到汇点的最短增广路径，并按字典序解决距离相等节点的选择冲突。\n\n所有容量均为 $1$，因此对于残留图中的任何简单 $s$–$t$ 路径，其瓶颈（路径上的最小残留容量）为 $1$。我们用 $c_{r}(\\cdot,\\cdot)$ 表示残留容量。\n\n初始残留图与给定图相同。从 HQ 开始执行第一次 BFS：\n- 从队列中的 HQ 开始。从 HQ 出发，残留邻居是 Alpha 和 Bravo；按字母顺序入队：先 Alpha，后 Bravo。设置父节点：$\\text{parent}(\\text{Alpha})=\\text{HQ}$，$\\text{parent}(\\text{Bravo})=\\text{HQ}$。\n- Alpha 出队。其残留邻居是 Charlie 和 Delta；先 Charlie 入队，后 Delta 入队。设置父节点：$\\text{parent}(\\text{Charlie})=\\text{Alpha}$，$\\text{parent}(\\text{Delta})=\\text{Alpha}$。\n- Bravo 出队。其邻居 Alpha 和 Delta 已经被发现；无变化。\n- Charlie 出队。其残留邻居 Target 被发现；设置 $\\text{parent}(\\text{Target})=\\text{Charlie}$ 并停止 BFS。\n\n第一条增广路径是 HQ → Alpha → Charlie → Target。增广量为\n$$\n\\Delta f_{1}=\\min\\{c_{r}(\\text{HQ},\\text{Alpha}),\\,c_{r}(\\text{Alpha},\\text{Charlie}),\\,c_{r}(\\text{Charlie},\\text{Target})\\}=1.\n$$\n沿这些边更新残留图：每条被使用的正向边的残留容量变为 $0$，并创建一条容量为单位值的反向边。\n\n在更新后的残留图上执行第二次 BFS：\n- 从 HQ 出发，只有 Bravo 有正的残留容量；将 Bravo 入队。设置 $\\text{parent}(\\text{Bravo})=\\text{HQ}$。\n- Bravo 出队。其残留邻居是 Alpha 和 Delta；先 Alpha 入队，后 Delta 入队。设置 $\\text{parent}(\\text{Alpha})=\\text{Bravo}$，$\\text{parent}(\\text{Delta})=\\text{Bravo}$。\n- Alpha 出队。其残留邻居包括 Delta（正向）和 HQ（反向），但 Delta 已经被发现，而 HQ 是源点；没有新节点入队。\n- Delta 出队。其残留邻居 Echo 入队。设置 $\\text{parent}(\\text{Echo})=\\text{Delta}$。\n- Echo 出队。其残留邻居是 Charlie 和 Target；先 Charlie 入队，后 Target 入队。发现 Target 后，设置 $\\text{parent}(\\text{Target})=\\text{Echo}$ 并停止 BFS。\n\n第二条增广路径是 HQ → Bravo → Delta → Echo → Target。增广量为\n$$\n\\Delta f_{2}=\\min\\{c_{r}(\\text{HQ},\\text{Bravo}),\\,c_{r}(\\text{Bravo},\\text{Delta}),\\,c_{r}(\\text{Delta},\\text{Echo}),\\,c_{r}(\\text{Echo},\\text{Target})\\}=1.\n$$\n\n完成这两次增广后，从 HQ 到 Target 的总流量值为\n$$\n|f|=\\Delta f_{1}+\\Delta f_{2}=1+1=2.\n$$", "answer": "$$\\boxed{2}$$", "id": "1540089"}, {"introduction": "Edmonds-Karp 算法为何坚持使用广度优先搜索 (BFS) 而不是其他路径搜索方法，例如深度优先搜索 (DFS)？这个选择并非偶然。本练习通过直接比较 BFS 和 DFS 找到的第一条增广路径，清晰地揭示了 Edmonds-Karp 算法选择“最短路径”的策略，这正是其效率保证的关键所在。[@problem_id:1540112]", "problem": "考虑一个表示流网络的有向图，其源点为 `S`，汇点为 `T`。该网络还包括四个中间节点：`A`、`B`、`C` 和 `D`。各边及其对应的整数容量如下：\n- (S, A) 容量为 10\n- (S, C) 容量为 20\n- (S, D) 容量为 10\n- (A, B) 容量为 5\n- (B, T) 容量为 12\n- (C, T) 容量为 15\n- (D, T) 容量为 8\n\n我们希望在初始残差图中（由于初始流量处处为零，它与原图相同）找到从 `S` 到 `T` 的第一条增广路径。我们将比较两种不同的算法来寻找这条路径：\n\n1.  Edmonds-Karp (EK) 算法，该算法使用广度优先搜索 (BFS) 来寻找边数最少的增广路径。\n2.  Ford-Fulkerson (FF) 算法的一个变体，该变体使用深度优先搜索 (DFS) 来寻找增广路径。\n\n对于这两种搜索算法（BFS 和 DFS），当一个节点有多个未访问的邻居节点需要探索时，应按字母顺序访问这些邻居节点。\n\n设 `f_EK` 是通过 Edmonds-Karp 算法找到的第一条增广路径所发送的流量。设 `f_FF_DFS` 是通过使用 DFS 的 Ford-Fulkerson 变体找到的第一条增广路径所发送的流量。\n\n有序对 `(f_EK, f_FF_DFS)` 是什么？\n\nA. (15, 5)\n\nB. (5, 15)\n\nC. (8, 5)\n\nD. (15, 8)\n\nE. (8, 15)", "solution": "问题要求计算由两种不同算法找到的第一条增广路径的流量值：使用广度优先搜索 (BFS) 的 Edmonds-Karp (EK) 算法，以及使用深度优先搜索 (DFS) 的 Ford-Fulkerson (FF) 算法变体。初始流量为零，因此残差图与原图相同。探索中处理平局的规则是按字母顺序访问邻居节点。\n\n首先，我们来确定使用 DFS 的 Ford-Fulkerson 变体的增广路径和流量。\nDFS 算法在回溯前会尽可能深地探索每个分支。\n1.  从源点 `S` 开始搜索。`S` 的邻居是 `A`、`C` 和 `D`。\n2.  根据字母顺序规则，我们首先探索边 `(S, A)`。当前路径是 `S -> A`。\n3.  从节点 `A` 出发，唯一的邻居是 `B`。我们将路径扩展为 `S -> A -> B`。\n4.  从节点 `B` 出发，唯一的邻居是 `T`。我们将路径扩展为 `S -> A -> B -> T`。\n5.  我们到达了汇点 `T`。DFS 找到了一条增广路径：`P_DFS = S -> A -> B -> T`。\n沿此路径可以发送的流量受其瓶颈容量的限制，瓶颈容量是其路径上各边容量的最小值。\n该路径上的容量分别为 `c(S, A) = 10`、`c(A, B) = 5` 和 `c(B, T) = 12`。\n瓶颈容量是 `min(10, 5, 12) = 5`。\n因此，在此 FF-DFS 算法的第一步中增加的流量为 `f_FF_DFS = 5`。\n\n接下来，我们来确定使用 BFS 的 Edmonds-Karp 算法的增广路径和流量。\nBFS 算法逐层探索图，以找到边数最少的路径。\n1.  从源点 `S` 开始搜索。将 `S` 加入队列。队列：`[S]`。\n2.  `S` 出队。按字母顺序探索其邻居：`A`、`C`、`D`。由于它们都未被访问，我们将它们加入队列，并将其前驱节点标记为 `S`。队列：`[A, C, D]`。\n3.  `A` 出队。探索其邻居 `B`。`B` 未被访问，因此我们将其加入队列，并将其前驱节点标记为 `A`。队列：`[C, D, B]`。\n4.  `C` 出队。探索其邻居 `T`。`T` 是汇点且未被访问。我们找到了一条到汇点的路径！BFS 搜索终止，因为它已经找到了边数最少的路径。\n5.  为了找到路径，我们使用前驱节点从 `T` 回溯：`T` 的前驱是 `C`，`C` 的前驱是 `S`。\n找到的路径是 `P_BFS = S -> C -> T`。这条路径有 2 条边，而路径 `S -> A -> B -> T` 有 3 条边。BFS 正确地找到了更短的路径。请注意，路径 `S -> D -> T` 也有 2 条边，但只有在 `C` 出队后继续算法并让 `D` 出队时才能找到该路径。由于从 `C` 探索时就找到了 `T`，搜索便停止了。\n沿此路径可以发送的流量是其瓶颈容量。\n该路径上的容量分别为 `c(S, C) = 20` 和 `c(C, T) = 15`。\n瓶颈容量是 `min(20, 15) = 15`。\n因此，在 Edmonds-Karp 算法的第一步中增加的流量为 `f_EK = 15`。\n\n结合这两个结果，我们得到有序对 `(f_EK, f_FF_DFS) = (15, 5)`。\n将其与给定选项进行比较，我们发现它与选项 A 相匹配。", "answer": "$$\\boxed{A}$$", "id": "1540112"}, {"introduction": "寻找最大流并非总是简单地向网络中“填充”流量。有时，为了达到全局最优，算法需要智能地“撤销”或“重路由”已经存在的流。本练习通过一个精心设计的初始流场景，揭示了 Edmonds-Karp 算法中最巧妙的概念之一：利用残留图中的反向边来寻找更优的增广路径，从而实现流量的重新分配。[@problem_id:1540106]", "problem": "考虑一个由有向图 $G = (V, E)$ 表示的网络流，其中顶点集为 $V = \\{s, t, a, b\\}$。顶点 $s$ 是源点，$t$ 是汇点。该网络有五条有向边，其整数容量如下：\n- $c(s, a) = 20$\n- $c(s, b) = 20$\n- $c(b, a) = 20$\n- $c(a, t) = 20$\n- $c(b, t) = 20$\n\n网络中建立了一个初始的非零流 $f$。该流包含沿路径 $s \\rightarrow b \\rightarrow a \\rightarrow t$ 发送的 20 个单位流量。即，$f(s, b) = 20$，$f(b, a) = 20$ 以及 $f(a, t) = 20$。所有其他边上的流均为零。这个初始流的总流量为 $|f|=20$。\n\n从这个初始流 $f$ 开始，应用 Edmonds-Karp 算法来寻找从 $s$ 到 $t$ 的最大流。该算法的第一步是使用从源点 $s$ 开始的广度优先搜索 (BFS) 在残留图 $G_f$ 中找到一条增广路径。\n\n确定将沿着这条第一条增广路径发送的流量。请用整数表示你的答案。", "solution": "我们对容量图 $(G,c)$ 上的流 $f$ 使用标准的残留网络构造方法。对于每条容量为 $c(u,v)$、当前流量为 $f(u,v)$ 的有向边 $(u,v)\\in E$，残留容量定义如下：\n- 前向残留容量 $r_{f}(u,v) = c(u,v) - f(u,v)$。\n- 反向残留容量 $r_{f}(v,u) = f(u,v)$。\n\n给定的容量和初始流为：\n- $c(s,a)=20$, $f(s,a)=0$。\n- $c(s,b)=20$, $f(s,b)=20$。\n- $c(b,a)=20$, $f(b,a)=20$。\n- $c(a,t)=20$, $f(a,t)=20$。\n- $c(b,t)=20$, $f(b,t)=0$。\n\n计算残留容量：\n- 从 $s$ 出发：$r_{f}(s,a)=20-0=20$，$r_{f}(s,b)=20-20=0$。\n- 从 $a$ 出发：$r_{f}(a,t)=20-20=0$，到 $b$ 的反向残留容量为 $r_{f}(a,b)=f(b,a)=20$；此外 $r_{f}(a,s)=f(s,a)=0$。\n- 从 $b$ 出发：$r_{f}(b,t)=20-0=20$，$r_{f}(b,a)=20-20=0$，到 $s$ 的反向残留容量为 $r_{f}(b,s)=f(s,b)=20$。\n- 从 $t$ 出发：$r_{f}(t,a)=f(a,t)=20$，$r_{f}(t,b)=f(b,t)=0$。\n\nEdmonds-Karp 算法从 $s$ 开始，对具有正残留容量的边运行广度优先搜索 (BFS)。从 $s$ 开始，唯一具有正残留容量的邻居是通过 $s \\rightarrow a$ 到达的 $a$。从 $a$ 出发，唯一具有正容量的出向残留边是通过反向边 $a \\rightarrow b$ 到达 $b$。从 $b$ 出发，有一条到 $t$ 的前向残留边 $b \\rightarrow t$ 具有正容量。因此，BFS找到的最短增广路径是：\n$$\ns \\rightarrow a \\rightarrow b \\rightarrow t.\n$$\n增广量是这条路径上的瓶颈（最小残留容量）：\n$$\n\\Delta = \\min\\{r_{f}(s,a),\\, r_{f}(a,b),\\, r_{f}(b,t)\\} = \\min\\{20,\\, 20,\\, 20\\} = 20.\n$$\n因此，第一条增广路径携带了 $20$ 单位的额外流量。", "answer": "$$\\boxed{20}$$", "id": "1540106"}]}
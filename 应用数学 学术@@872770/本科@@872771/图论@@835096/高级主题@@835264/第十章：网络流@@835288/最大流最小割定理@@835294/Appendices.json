{"hands_on_practices": [{"introduction": "掌握一个理论的最佳方式之一就是亲手验证它。这个练习旨在通过一个具体的小型网络来巩固你对最大流最小割定理的理解。你将通过计算从源点到汇点的最大流量，并独立找出网络的最小割容量，来直接验证这两个值是相等的，从而体验该定理的核心之美。[@problem_id:1408993]", "problem": "考虑一个由有向图表示的小型数据传输网络。该网络有一个源节点 `S`，一个汇点 `T`，以及四个中间路由节点 `A`、`B`、`C` 和 `D`。有向链接及其相应的最大数据承载能力（以任意流量单位计）如下：\n- 从 `S` 到 `A`，容量为 10。\n- 从 `S` 到 `C`，容量为 12。\n- 从 `A` 到 `B`，容量为 7。\n- 从 `A` 到 `D`，容量为 4。\n- 从 `B` 到 `T`，容量为 10。\n- 从 `C` 到 `D`，容量为 9。\n- 从 `D` 到 `B`，容量为 3。\n- 从 `D` 到 `T`，容量为 8。\n\n所有链接都是按指定方向的单向链接。网络中没有其他链接。目标是确定该网络的吞吐量。\n\n计算从源点 `S` 到汇点 `T` 的最大流量值，并计算最小 `S-T` 割的容量。按指定顺序提供这两个整数值：首先是最大流量值，然后是最小割容量。", "solution": "我们应用 Ford–Fulkerson 方法，通过在残留图中寻找增广路来逐步计算最大流。\n\n1.  **增广路径 1:** 选择路径 $S \\to A \\to B \\to T$。路径上的容量分别为 $c(S,A)=10$, $c(A,B)=7$, $c(B,T)=10$。瓶颈容量为 $\\min(10, 7, 10) = 7$。我们沿此路径发送 7 个单位的流量。当前总流量为 7。\n\n2.  **增广路径 2:** 选择路径 $S \\to C \\to D \\to T$。路径上的容量分别为 $c(S,C)=12$, $c(C,D)=9$, $c(D,T)=8$。瓶颈容量为 $\\min(12, 9, 8) = 8$。我们沿此路径发送 8 个单位的流量。当前总流量为 $7 + 8 = 15$。\n\n3.  **增广路径 3:** 在当前的残留图中，我们寻找新的增广路。考虑路径 $S \\to A \\to D \\to B \\to T$。\n    -   边 $(S,A)$ 的残留容量为 $c(S,A) - f(S,A) = 10 - 7 = 3$。\n    -   边 $(A,D)$ 的残留容量为 $c(A,D) - f(A,D) = 4 - 0 = 4$。\n    -   边 $(D,B)$ 的残留容量为 $c(D,B) - f(D,B) = 3 - 0 = 3$。\n    -   边 $(B,T)$ 的残留容量为 $c(B,T) - f(B,T) = 10 - 7 = 3$。\n    瓶颈容量为 $\\min(3, 4, 3, 3) = 3$。我们沿此路径增广 3 个单位的流量。总流量增加到 $15 + 3 = 18$。\n\n此时的流量分配为：\n- $f(S,A) = 7+3=10$\n- $f(S,C) = 8$\n- $f(A,B) = 7$\n- $f(A,D) = 3$\n- $f(B,T) = 7+3=10$\n- $f(C,D) = 8$\n- $f(D,B) = 3$\n- $f(D,T) = 8$\n\n总流出源点的流量为 $f(S,A)+f(S,C) = 10 + 8 = 18$。\n总流入汇点的流量为 $f(B,T)+f(D,T) = 10 + 8 = 18$。\n\n现在，我们需要检查是否存在更多的增广路。在最终的残留图中：\n- 从 $S$ 出发，边 $(S,A)$ 已饱和 ($r(S,A)=0$)，但边 $(S,C)$ 仍有残留容量 ($r(S,C) = 12-8=4$)。因此，节点 $C$ 是从 $S$ 可达的。\n- 从 $C$ 出发，边 $(C,D)$ 仍有残留容量 ($r(C,D) = 9-8=1$)。因此，节点 $D$ 是从 $C$ 可达的。\n- 从 $D$ 出发，由于 $f(A,D)=3$，存在一条后向边 $(D,A)$，其残留容量为 3。因此，节点 $A$ 是从 $D$ 可达的。\n- 所有从可达节点 $\\{S, A, C, D\\}$ 出发到不可达节点 $\\{B, T\\}$ 的前向边都已饱和（$r(A,B)=0, r(D,B)=0, r(D,T)=0$）。\n因此，在残留图中，从 $S$ 不再有路径可达 $T$。这表明当前流量 18 是最大流。\n\n根据最大流最小割定理，此时的最小割由从 $S$ 可达的节点集合 $S'=\\{S,A,C,D\\}$ 和不可达的节点集合 $T'=\\{B,T\\}$ 构成。该割的容量是所有从 $S'$ 指向 $T'$ 的边的容量之和：\n$$\nc(S', T') = c(A,B) + c(D,B) + c(D,T) = 7 + 3 + 8 = 18.\n$$\n最大流量值（18）等于最小割容量（18），这验证了定理。\n\n所以，最大流量为 18，最小割容量为 18。", "answer": "$$\\boxed{\\begin{pmatrix} 18  18 \\end{pmatrix}}$$", "id": "1408993"}, {"introduction": "现实世界中的网络系统很少是静态的；组件可能会发生故障或因维护而被移除。这个练习模拟了一个常见场景：网络中的一条关键链路被断开。通过应用最大流最小割定理，你将学习如何快速评估这种结构性变化对网络整体吞吐量的影响，这对于网络设计和可靠性分析至关重要。[@problem_id:1408932]", "problem": "一家公司的内部数据网络由一台大型机服务器、一个外部网关和三个中间路由节点组成。数据通过该网络从大型机服务器传输到外部网关。组件表示如下：\n- `S`：源大型机服务器\n- `T`：目标外部网关\n- `A`：主路由器\n- `B`：次路由器\n- `C`：应用服务器节点\n\n该网络由具有特定最大数据传输容量的单向光纤链路组成。每个链路的布局和容量（单位：千兆比特每秒，Gbps）如下所述：\n- 从 S 到 A：8 Gbps\n- 从 S 到 B：7 Gbps\n- 从 A 到 B：3 Gbps\n- 从 A 到 C：6 Gbps\n- 从 B 到 C：4 Gbps\n- 从 B 到 T：5 Gbps\n- 从 C 到 T：9 Gbps\n\n网络升级需要临时断开从主路由器 (A) 到次路由器 (B) 的链路。所有其他链路均保持其指定容量正常运行。\n\n计算此更改后从大型机服务器 (S) 到外部网关 (T) 的新的最大可能数据传输速率。以 Gbps 为单位，用整数表示您的答案。", "solution": "我们将网络建模为一个有向图，其中源点为 $S$，汇点为 $T$，中间节点为 $A,B,C$。移除链路 $A \\to B$ 后，剩余的边容量为：\n$c(S,A)=8$, $c(S,B)=7$, $c(A,C)=6$, $c(B,C)=4$, $c(B,T)=5$, $c(C,T)=9$。所有其他边的容量为 0。\n\n根据最大流最小割定理，最大流的值等于最小割的容量。我们可以通过寻找一个最小割来确定最大流。\n\n考虑一个 $S-T$ 割，它将节点划分为两个集合 $S'=\\{S,A\\}$ 和 $T'=\\{B,C,T\\}$。源点 $S \\in S'$ 且汇点 $T \\in T'$。\n这个割的容量是所有从 $S'$ 中的节点指向 $T'$ 中的节点的边的容量之和：\n$$\nc(S', T') = c(S,B) + c(A,C) = 7 + 6 = 13.\n$$\n由于最大流不能超过任何割的容量，我们知道最大流 $|f|_{\\max} \\le 13$。\n\n为了证明 13 确实是最大流，我们需要构造一个值为 13 的可行流 $f$。\n考虑以下流量分配：\n- $f(S,A)=6$ (容量为 8)\n- $f(S,B)=7$ (容量为 7)\n- $f(A,C)=6$ (容量为 6)\n- $f(B,C)=2$ (容量为 4)\n- $f(B,T)=5$ (容量为 5)\n- $f(C,T)=8$ (容量为 9)\n\n我们验证这个流是可行的：\n1.  **容量限制**：所有边的流量均未超过其容量。\n2.  **流量守恒**：\n    -   节点 A：流入 $f(S,A)=6$；流出 $f(A,C)=6$。守恒。\n    -   节点 B：流入 $f(S,B)=7$；流出 $f(B,C)+f(B,T)=2+5=7$。守恒。\n    -   节点 C：流入 $f(A,C)+f(B,C)=6+2=8$；流出 $f(C,T)=8$。守恒。\n\n这个流的总值为从源点流出的净流量：\n$$\n|f| = f(S,A) + f(S,B) = 6 + 7 = 13.\n$$\n或者，流入汇点的净流量：\n$$\n|f| = f(B,T) + f(C,T) = 5 + 8 = 13.\n$$\n\n因为我们找到了一个值为 13 的流和一个容量为 13 的割，根据最大流最小割定理，这个流就是最大流，这个割就是最小割。\n\n因此，断开链路后的最大可能数据传输速率是 13 Gbps。", "answer": "$$\\boxed{13}$$", "id": "1408932"}, {"introduction": "最大流最小割定理告诉我们最大流的值等于最小割的容量，但它并没有规定找到这个流的最有效方法。这个高级练习通过一个精心设计的思想实验，揭示了 Ford-Fulkerson 算法在选择增广路径时不当可能导致的性能问题。请注意，这里描述的寻路方法是为教学目的而设定的假设场景，它旨在强调为什么在算法设计中，明智地选择路径（例如使用最短增广路径）对于保证计算效率至关重要。[@problem_id:1408949]", "problem": "考虑一个用于模拟从源点 `S` 到汇点 `T` 数据传输的带容量有向网络。该网络由四个中间数据枢纽 `U1`、`U2`、`V1` 和 `V2` 组成。连接及其最大数据传输速率（容量）定义如下，其中 `K` 是一个大的整数常量：\n- `(S, U1)`，容量为 `K`\n- `(S, U2)`，容量为 `K`\n- `(U1, V1)`，容量为 `K`\n- `(U2, V2)`，容量为 `K`\n- `(V1, T)`，容量为 `K`\n- `(V2, T)`，容量为 `K`\n- `(V1, V2)`，容量为 `1`\n\n一位分析师正在使用 Ford-Fulkerson 算法的一个特定实现来确定从 `S` 到 `T` 的最大流。该实现使用一种特定的、非最优的增广路径选择策略，我们称之为贪心使用桥（Greedy Bridge-Using, GBU）方法。GBU 方法按以下规则运行：\n\n*   如果在当前残差图中存在包含边 `(V1, V2)` 或边 `(V2, V1)` 的增广路径，算法**必须**选择这样的一条路径。\n\n假设算法从零流开始，并重复应用 GBU 方法来增加流量，直到达到最大流。当 `K = 1989` 时，该算法将执行的流增广总次数是多少？", "solution": "该网络的总最大流显然是 $2K$，可以通过两条不相交的路径 $S \\to U_1 \\to V_1 \\to T$ 和 $S \\to U_2 \\to V_2 \\to T$ 实现，每条路径承载 $K$ 的流量。然而，GBU 策略强制算法优先使用包含“桥”边 $(V_1, V_2)$ 或其反向边 $(V_2, V_1)$ 的路径。\n\n我们分析 GBU 策略下的增广过程：\n1.  **路径选择**：GBU 策略下，有两条可能的增广路径：\n    *   $P_1 = S \\to U_1 \\to V_1 \\to V_2 \\to T$\n    *   $P_2 = S \\to U_2 \\to V_2 \\to V_1 \\to T$ （注意，这条路径使用了 $(V_1, V_2)$ 的反向边）\n    由于桥边 $(V_1, V_2)$ 的容量为 1，这两条路径的瓶颈容量始终为 1。因此，每次增广只会使总流量增加 1。\n\n2.  **“乒乓”效应**：\n    *   **步骤 1**: 初始流为 0。残留图中，路径 $P_1$ 可用。算法选择 $P_1$ 增广 1 单位流量。总流量变为 1，边 $(V_1, V_2)$ 上的流量 $f(V_1, V_2)$ 变为 1。\n    *   **步骤 2**: 现在 $f(V_1, V_2)=1$，因此 $(V_1, V_2)$ 在残留图中饱和。但其反向边 $(V_2, V_1)$ 的残留容量变为 1。路径 $P_2$ 现在可用。算法选择 $P_2$ 增广 1 单位流量。这会“推回”$(V_1, V_2)$ 上的流量，使其变回 0。总流量变为 2。\n    *   **步骤 3**: 现在 $f(V_1, V_2)=0$，情况又回到了步骤 1。算法再次选择 $P_1$。总流量变为 3。\n\n3.  **增广次数计算**：\n    算法在路径 $P_1$ 和 $P_2$ 之间交替，每次增广使总流量增加 1。这个过程会持续进行，直到其中一条主干路径被饱和，导致 GBU 路径不可用。\n    *   路径 $P_1$ 使用了边 $(S, U_1)$, $(U_1, V_1)$, $(V_2, T)$。\n    *   路径 $P_2$ 使用了边 $(S, U_2)$, $(U_2, V_2)$, $(V_1, T)$。\n    这些边的容量均为 $K$。\n\n    令 $n_1$ 和 $n_2$ 分别为沿 $P_1$ 和 $P_2$ 的增广次数。\n    *   当总增广次数为奇数 $2m-1$ 时，我们有 $n_1 = m$ 和 $n_2 = m-1$。\n    *   当总增广次数为偶数 $2m$ 时，我们有 $n_1 = m$ 和 $n_2 = m$。\n\n    这个“乒乓”过程会持续到 $n_1=K$ 或 $n_2=K$ 为止。\n    *   经过 $2K-1$ 次增广后，我们有 $n_1=K$，$n_2=K-1$。此时，边 $(S,U_1)$ 饱和，路径 $P_1$ 在残留图中不再存在。\n    *   根据 GBU 规则，算法检查是否还有包含桥的路径。路径 $P_2$ 仍然存在（因为 $n_2=K-1  K$），所以算法必须选择它。\n    *   第 $2K$ 次增广将沿路径 $P_2$ 进行。之后，$n_2$ 变为 $K$。\n\n4.  **终止条件**：\n    经过 $2K$ 次增广后，我们有 $n_1=K$ 和 $n_2=K$。此时，边 $(S, U_1)$ 和 $(S, U_2)$ 都已饱和。残留图中不再存在任何从 $S$ 出发的路径，因此 GBU 路径 $P_1$ 和 $P_2$ 都不再可用。算法终止。\n\n总的增广次数为 $2K$。\n当 $K=1989$ 时，总增广次数为 $2 \\times 1989 = 3978$。", "answer": "$$\\boxed{3978}$$", "id": "1408949"}]}
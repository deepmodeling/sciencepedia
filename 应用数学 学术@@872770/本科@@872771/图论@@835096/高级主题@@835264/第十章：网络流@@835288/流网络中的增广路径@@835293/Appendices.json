{"hands_on_practices": [{"introduction": "在网络流的世界里，增广路径是我们用来增加总流量的核心工具。在任何给定的流状态下，第一步都是在其对应的残留图中寻找一条从源点到汇点的路径。这个练习将帮助你熟练掌握在一张给定的残留图中识别并数出所有可能的简单增广路径，这是理解和应用Ford-Fulkerson方法的基础。", "problem": "在网络流算法中，残留图 $G_f$ 用于寻找增广路径。该图由一个顶点集 $V$、一个源点 $S \\in V$、一个汇点 $T \\in V$ 和一个有向边集 $E_f$ 组成，其中每条边 $(u, v) \\in E_f$ 都有一个正的残留容量 $c_f(u, v) > 0$。\n\n增广路径是残留图中从源点 $S$到汇点 $T$ 的一条路径。简单增广路径是一条不重复任何顶点的增广路径。\n\n考虑一个特定的残留图，其顶点集为 $V = \\{S, A, B, C, D, T\\}$，源点为 $S$，汇点为 $T$。其有向边和正残留容量如下所示：\n- $(S, A)$，容量为 4\n- $(S, C)$，容量为 5\n- $(A, B)$，容量为 3\n- $(A, D)$，容量为 2\n- $(B, D)$，容量为 6\n- $(B, T)$，容量为 3\n- $(C, A)$，容量为 1\n- $(C, D)$，容量为 2\n- $(D, T)$，容量为 7\n\n你的任务是确定在这个残留图中，从源点 $S$ 到汇点 $T$ 的不同简单增广路径的总数。", "solution": "所有残留容量均为正，因此所有列出的有向边都存在于残留图中。一条简单增广路径就是一条从 $S$到 $T$ 的简单有向路径。该图是无环的，因为边的走向遵循 $S \\to \\{A,C\\}$、$C \\to \\{A,D\\}$、$A \\to \\{B,D\\}$、$B \\to \\{D,T\\}$、$D \\to T$ 的顺序，且不存在反向边或环。因此，简单增广路径的数量等于从 $S$ 到 $T$ 的有向路径的数量。\n\n定义 $P(v)$ 为从顶点 $v$ 到 $T$ 的不同简单路径的数量。在该有向无环图上使用动态规划，以 $P(T)=1$ 为基本情况，我们计算：\n$$\nP(D)=P(T)=1,\n$$\n$$\nP(B)=P(T)+P(D)=1+1=2,\n$$\n$$\nP(A)=P(B)+P(D)=2+1=3,\n$$\n$$\nP(C)=P(A)+P(D)=3+1=4,\n$$\n$$\nP(S)=P(A)+P(C)=3+4=7.\n$$\n因此，有 $7$ 条不同的简单增广路径。显式枚举证实了这一计数：$S\\!-\\!A\\!-\\!B\\!-\\!T$、$S\\!-\\!A\\!-\\!B\\!-\\!D\\!-\\!T$、$S\\!-\\!A\\!-\\!D\\!-\\!T$、$S\\!-\\!C\\!-\\!D\\!-\\!T$、$S\\!-\\!C\\!-\\!A\\!-\\!B\\!-\\!T$、$S\\!-\\!C\\!-\\!A\\!-\\!B\\!-\\!D\\!-\\!T$、$S\\!-\\!C\\!-\\!A\\!-\\!D\\!-\\!T$。", "answer": "$$\\boxed{7}$$", "id": "1482183"}, {"introduction": "增广路径算法的精妙之处不仅在于增加前向流，更在于它能够通过残留图中的“反向边”来重新调整和优化现有的流分配。这种“反悔”机制是算法能够跳出局部最优、达到全局最大流的关键。通过这个练习，你将亲手寻找一条包含反向边的增广路径，并观察它是如何通过减少一条边上的流量，来为整个网络带来更大的总流量增益。", "problem": "考虑一个表示流网络的有向图。该网络中的顶点为 `{s, a, b, t}`，其中 `s` 是源点，`t` 是汇点。网络的边及其整数容量定义如下：\n- 从 `s` 到 `a`，容量为 10\n- 从 `s` 到 `b`，容量为 10\n- 从 `b` 到 `a`，容量为 4\n- 从 `a` 到 `t`，容量为 5\n- 从 `b` 到 `t`，容量为 10\n\n一个初始的、非最大流 `f` 当前正通过该网络。边上的非零流量值为：`f(s, b) = 4`，`f(b, a) = 4`，以及 `f(a, t) = 4`。所有其他边上的流量为零。\n\n你的任务是在对应于流 `f` 的残留网络中，找到一条从 `s` 到 `t` 的增广路径。你必须找到的这条特定的增广路径，在使用它之后，会减少边 `(b, a)` 上的流量。一旦你确定了这条路径及其瓶颈容量，就用它来增广流 `f`。计算从源点 `s`到汇点 `t` 的新总流量值。", "solution": "我们使用残留网络构造法。对于每条容量为 $c(u,v)$、当前流量为 $f(u,v)$ 的有向边 $(u,v)$，其正向残留容量为 $c_{f}(u,v) = c(u,v) - f(u,v)$，其反向残留容量为 $c_{f}(v,u) = f(u,v)$。\n\n给定当前非零流量 $f(s,b) = 4$，$f(b,a) = 4$ 和 $f(a,t) = 4$，残留容量如下：\n- $c_{f}(s,a) = 10 - 0 = 10$ 且 $c_{f}(a,s) = 0$，\n- $c_{f}(s,b) = 10 - 4 = 6$ 且 $c_{f}(b,s) = 4$，\n- $c_{f}(b,a) = 4 - 4 = 0$ 且 $c_{f}(a,b) = 4$，\n- $c_{f}(a,t) = 5 - 4 = 1$ 且 $c_{f}(t,a) = 4$，\n- $c_{f}(b,t) = 10 - 0 = 10$ 且 $c_{f}(t,b) = 0$。\n\n为了减少边 $(b,a)$ 上的流量，增广路径必须使用反向残留弧 $a \\to b$。一条有效的增广路径是\n$$\nP: s \\to a \\to b \\to t.\n$$\n沿路径 $P$ 的瓶颈（增广量）是\n$$\n\\Delta = \\min\\{c_{f}(s,a),\\, c_{f}(a,b),\\, c_{f}(b,t)\\} = \\min\\{10,\\, 4,\\, 10\\} = 4.\n$$\n\n沿路径 $P$ 增广 $\\Delta$ 会如下更新流量：对于正向弧，流量增加 $\\Delta$；对于使用的任何反向残留弧，其对应的原始正向弧上的流量减少 $\\Delta$。\n- 在 $s \\to a$ 上：$f'(s,a) = 0 + 4 = 4$。\n- 在 $a \\to b$ 上（$b \\to a$ 的反向弧）：$f'(b,a) = 4 - 4 = 0$。\n- 在 $b \\to t$ 上：$f'(b,t) = 0 + 4 = 4$。\n所有其他流量保持不变，因此 $f'(s,b) = 4$ 且 $f'(a,t) = 4$。\n\n新的总流量值为\n$$\n|f'| = f'(s,a) + f'(s,b) = 4 + 4 = 8,\n$$\n等价地，\n$$\n|f'| = f'(a,t) + f'(b,t) = 4 + 4 = 8.\n$$", "answer": "$$\\boxed{8}$$", "id": "1482173"}, {"introduction": "理论上，任何一条增广路径都能使总流量增加，但从算法效率的角度看，选择哪条路径至关重要。一个糟糕的选择可能会让你在通往最大流的道路上“绕远路”。这个实践将为你揭示路径选择的策略性影响：你将分析一个场景，其中一个看似合理的初始增广选择，反而导致需要更多次的迭代才能达到最大流。这个例子启发我们思考更优化的路径选择策略，例如Edmonds-Karp算法为何要优先选择最短增广路径。", "problem": "考虑一个流网络，其包含一个源节点 $s$、一个汇节点 $t$ 和两个中间节点 $a$ 和 $b$。该网络由以下有向边及其各自的整数容量组成：\n- 从 $s$ 到 $a$，容量为 50\n- 从 $s$ 到 $b$，容量为 50\n- 从 $a$ 到 $t$，容量为 50\n- 从 $b$ 到 $t$，容量为 50\n- 从 $a$ 到 $b$，容量为 1\n\n一位工程师的任务是使用 Ford-Fulkerson 方法找到从 $s$ 到 $t$ 的最大流。该方法通过在残留图中迭代地寻找增广路径来增加流量。在第一步中，该工程师选择了增广路径 $P = s \\to a \\to b \\to t$。\n\n在沿这条初始路径 $P$ 增广流量后，为达到网络中的最大可能流量，最少还需要多少条*额外的*增广路径？", "solution": "设容量用 $c(u,v)$ 表示。根据最大流最小割定理，最大 $s$–$t$ 流量值等于一个 $s$–$t$ 割的最小容量。考虑以下两个自然的割：\n$$\n\\{s\\}\\,|\\,\\{a,b,t\\}\\quad\\text{with capacity }c(s,a)+c(s,b)=50+50=100,\n$$\n$$\n\\{s,a,b\\}\\,|\\,\\{t\\}\\quad\\text{with capacity }c(a,t)+c(b,t)=50+50=100.\n$$\n因此，最大流量值为\n$$\n|f^{*}|=100.\n$$\n\n工程师首先沿路径 $P_{1}: s\\to a\\to b\\to t$ 进行增广。路径 $P_{1}$ 上的瓶颈是\n$$\n\\Delta_{1}=\\min\\{c(s,a),c(a,b),c(b,t)\\}=\\min\\{50,1,50\\}=1,\n$$\n因此，有 $1$ 单位的流量沿 $P_{1}$ 发送。产生的非零流为 $f(s,a)=1$, $f(a,b)=1$, $f(b,t)=1$，残留容量变为\n$$\nc_{f}(s,a)=49,\\quad c_{f}(s,b)=50,\\quad c_{f}(a,t)=50,\\quad c_{f}(b,t)=49,\\quad c_{f}(a,b)=0,\n$$\n反向残留边为\n$$\nc_{f}(a,s)=1,\\quad c_{f}(b,a)=1,\\quad c_{f}(t,b)=1.\n$$\n\n任何额外的增广都必须遵循此残留图中的一条 $s$–$t$ 路径。可能的简单 $s$–$t$ 残留路径及其瓶颈如下：\n- $s\\to a\\to t$，瓶颈为 $\\min\\{c_{f}(s,a),c_{f}(a,t)\\}=\\min\\{49,50\\}=49$，\n- $s\\to b\\to t$，瓶颈为 $\\min\\{c_{f}(s,b),c_{f}(b,t)\\}=\\min\\{50,49\\}=49$，\n- $s\\to b\\to a\\to t$，瓶颈为 $\\min\\{c_{f}(s,b),c_{f}(b,a),c_{f}(a,t)\\}=\\min\\{50,1,50\\}=1$。\n\n因此，在初始步骤之后，任何单条增广路径的容量最多为 $49$。因此，如果仅使用两条额外的增广路径，可以增加的总额外流量最多为 $49+49=98$，产生的总流量最多为 $1+98=99  100$。因此，至少需要三条额外的增广路径。\n\n为了证明三条就足够了，我们采用以下顺序：\n1. 沿 $P_{2}: s\\to b\\to t$ 增广 $\\Delta_{2}=49$，得到 $f(b,t)=50$ 和 $f(s,b)=49$，因此 $|f|=50$。\n2. 沿 $P_{3}: s\\to a\\to t$ 增广 $\\Delta_{3}=49$，得到 $f(s,a)=50$ 和 $f(a,t)=49$，因此 $|f|=99$。\n3. 沿 $P_{4}: s\\to b\\to a\\to t$ 增广 $\\Delta_{4}=1$，这将使 $f(a,b)$ 减小到 $0$，并使 $f(s,b)$ 增加到 $50$，$f(a,t)$ 增加到 $50$，从而得到\n$$\nf(s,a)=50,\\quad f(s,b)=50,\\quad f(a,t)=50,\\quad f(b,t)=50,\\quad f(a,b)=0,\n$$\n因此总流量为\n$$\n|f|=f(s,a)+f(s,b)=100=|f^{*}|.\n$$\n\n因此，在最初的糟糕选择之后，所需的最小额外增广路径数量为 $3$。", "answer": "$$\\boxed{3}$$", "id": "1482159"}]}
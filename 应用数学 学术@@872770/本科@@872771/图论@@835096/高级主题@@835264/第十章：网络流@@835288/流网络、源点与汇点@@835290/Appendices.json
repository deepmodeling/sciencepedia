{"hands_on_practices": [{"introduction": "在深入研究复杂的网络优化之前，我们必须首先掌握流量网络的基本规则。其中最核心的原则是流量守恒，它规定对于网络中除源点和汇点之外的任何中间节点，流入的总流量必须等于流出的总流量。这个练习将带你亲手验证这一基本原则，通过计算一个中间节点的净流量，来判断给定的流量分配是否符合守恒定律。这不仅是对定义的直接应用，也是诊断和审计网络流量模型有效性的第一步 [@problem_id:1504829]。", "problem": "一家名为 DataStream Inc. 的科技公司正在对其内部服务器网络中的数据流进行审计。该网络被建模为一个有向图，其中服务器是顶点，网络链接是有向边。该公司有一个作为源点 $s$ 的主数据中心，以及一个作为汇点 $t$ 的主备份存档。\n\n该网络由顶点集 $V = \\{s, v_1, v_2, v_3, v_4, t\\}$ 组成。一名实习生测量了网络中每个活动连接 $(u,v)$ 的当前数据流率，记为 $f(u,v)$。流率的单位是太比特每秒 (Tb/s)。记录的流量如下：\n\n- $f(s, v_1) = 12$\n- $f(s, v_2) = 15$\n- $f(v_1, v_2) = 5$\n- $f(v_1, v_3) = 7$\n- $f(v_2, v_3) = 9$\n- $f(v_2, v_4) = 11$\n- $f(v_3, v_4) = 8$\n- $f(v_3, t) = 5$\n- $f(v_4, t) = 18$\n\n对于任何既不是源点也不是汇点的顶点 $v$，流量守恒原则要求流入 $v$ 的总流量必须等于从 $v$ 流出的总流量。顶点 $v$ 的净流量定义为流入 $v$ 的总流量减去从 $v$ 流出的总流量。您的任务是通过计算由顶点 $v_3$ 表示的服务器的净流量来验证实习生的测量结果。\n\n请将 $v_3$ 的净流量以 Tb/s 为单位，表示为一个数字。", "solution": "根据流量守恒原则，一个顶点 $v$（非源点或汇点）的净流量定义为总流入量减去总流出量：\n$$\\text{net}(v) = \\sum_{u} f(u,v) - \\sum_{w} f(v,w).$$\n对于 $v_{3}$，流入的边是 $(v_{1},v_{3})$ 和 $(v_{2},v_{3})$，流出的边是 $(v_{3},v_{4})$ 和 $(v_{3},t)$。因此，\n$$\\text{net}(v_{3}) = f(v_{1},v_{3}) + f(v_{2},v_{3}) - f(v_{3},v_{4}) - f(v_{3},t).$$\n代入给定值：\n$$\\text{net}(v_{3}) = 7 + 9 - 8 - 5 = 16 - 13 = 3.$$\n因此，$v_{3}$ 处的净流量为 $3$ Tb/s；由于此值非零，给定的测量结果在 $v_{3}$ 处违反了流量守恒原则。", "answer": "$$\\boxed{3}$$", "id": "1504829"}, {"introduction": "理解了节点的局部守恒规则后，我们的目光可以投向整个网络的全局性能——最大化从源点到汇点的总吞吐量。这正是流量网络理论的核心优化问题。通过这个练习，你将分析一次网络升级（增加一条新的连接）对最大流量带来的影响。这项实践将让你应用最大流最小割定理等关键概念，来量化网络结构变化所产生的效益，从而体会理论工具在指导现实世界工程决策中的巨大价值 [@problem_id:1504814]。", "problem": "一个数据中心的内部网络被建模为一个有向图，其中节点代表服务器，边代表数据链路。每条链路的容量，以千兆比特每秒（Gbps）为单位，决定了数据的最大传输速率。目标是将数据从指定的源服务器 $s$ 移动到汇服务器 $t$。\n\n当前的网络配置由顶点集 $V = \\{s, a, b, t\\}$ 和以下带各自容量的有向边定义：\n- 一条边 $(s, a)$，容量为 10 Gbps。\n- 一条边 $(a, b)$，容量为 5 Gbps。\n- 一条边 $(b, t)$，容量为 10 Gbps。\n- 一条边 $(s, t)$，容量为 5 Gbps。\n\n为了提高网络的吞吐量，一位工程师建议在源服务器 $s$ 和服务器 $b$ 之间添加一条新的直连链路。这条新链路 $(s, b)$ 的容量指定为 3 Gbps。\n\n计算此修改后，从 $s$ 到 $t$ 的最大流量的增量。以 Gbps 为单位，将你的答案表示为单个数字。", "solution": "我们将网络建模为一个有向图，其边 $(u,v)$ 上的容量函数为 $c(u,v)$。根据最大流最小割定理，最大 $s-t$ 流的值等于所有 $s-t$ 割 $(S,T)$ 中的最小容量，其中 $S \\subset V$ 包含 $s$ 且 $t \\in T = V \\setminus S$。一个割的容量为\n$$\nc(S,T) = \\sum_{u \\in S}\\sum_{v \\in T} c(u,v).\n$$\n\n原始网络（不含 $(s,b)$）：\n- 可能的 $s-t$ 割是通过选择 $S \\subset \\{s,a,b\\}$ 且 $s \\in S$ 来确定的。枚举如下：\n1) $S=\\{s\\}, T=\\{a,b,t\\}$:\n$$\nc(S,T)=c(s,a)+c(s,t)=10+5=15.\n$$\n2) $S=\\{s,a\\}, T=\\{b,t\\}$:\n$$\nc(S,T)=c(a,b)+c(s,t)=5+5=10.\n$$\n3) $S=\\{s,b\\}, T=\\{a,t\\}$:\n$$\nc(S,T)=c(s,a)+c(b,t)+c(s,t)=10+10+5=25.\n$$\n4) $S=\\{s,a,b\\}, T=\\{t\\}$:\n$$\nc(S,T)=c(b,t)+c(s,t)=10+5=15.\n$$\n因此，最小割容量为 $\\min\\{15,10,25,15\\}=10$。所以原始最大流量的值为 $10$。\n\n修改后的网络（添加 $(s,b)$，其容量 $c(s,b)=3$）：\n重新计算相同的割容量，现在在适用的地方包含 $c(s,b)$。\n1) $S=\\{s\\}, T=\\{a,b,t\\}$:\n$$\nc(S,T)=c(s,a)+c(s,b)+c(s,t)=10+3+5=18.\n$$\n2) $S=\\{s,a\\}, T=\\{b,t\\}$:\n$$\nc(S,T)=c(a,b)+c(s,b)+c(s,t)=5+3+5=13.\n$$\n3) $S=\\{s,b\\}, T=\\{a,t\\}$:\n$$\nc(S,T)=c(s,a)+c(b,t)+c(s,t)=10+10+5=25.\n$$\n4) $S=\\{s,a,b\\}, T=\\{t\\}$:\n$$\nc(S,T)=c(b,t)+c(s,t)=10+5=15.\n$$\n因此，新的最小割容量为 $\\min\\{18,13,25,15\\}=13$。所以新的最大流量的值为 $13$。\n\n最大流量的增量是新旧最大流量之差：\n$$\n\\Delta = 13 - 10 = 3.\n$$\n以给定单位衡量，增量为 $3$ Gbps。", "answer": "$$\\boxed{3}$$", "id": "1504814"}, {"introduction": "现实世界中的问题往往比教科书中的标准模型更为复杂，例如，数据可能从多个源头汇集到一个目的地。虽然标准方法是通过添加一个“超级源点”来简化问题，但这个练习要求你采用一种更具挑战性的方法。你需要在不改变网络拓扑结构的前提下，直接调整增广路径算法的初始步骤来处理多源问题。这项任务旨在培养你对算法内在机制的深刻理解，并提升你灵活运用和改造算法以解决非标准问题的能力 [@problem_id:1504817]。", "problem": "一家名为 QuantumLeap Dynamics 的数据物流公司，需要将其冗余存储设施中的一个大型科学数据集传输到一台中央超级计算机进行处理。该公司的网络可以建模为一个有向图，其中节点代表数据中心、路由器和超级计算机，边代表具有特定最大数据传输速率的光纤链路。\n\n该网络由以下节点组成：\n- 两个源数据中心：`DC1` 和 `DC2`。\n- 两个网络路由器：`R1` 和 `R2`。\n- 一台汇点超级计算机：`SC`。\n\n有向链路及其对应的容量（单位：太字节/小时，即 TB/h）如下：\n- `(DC1, R1)`: 10 TB/h\n- `(DC1, R2)`: 5 TB/h\n- `(DC2, R1)`: 6 TB/h\n- `(DC2, R2)`: 8 TB/h\n- `(R1, R2)`: 4 TB/h\n- `(R1, SC)`: 12 TB/h\n- `(R2, SC)`: 9 TB/h\n\n您的任务是确定从两个数据中心（`DC1` 和 `DC2`）合并到超级计算机（`SC`）的最大可能总数据传输速率。\n\n为解决此问题，您必须使用一种基于增广路径的算法，例如 Edmonds-Karp 算法。然而，题目明确禁止修改网络拓扑，例如，禁止添加一个连接到 `DC1` 和 `DC2` 的统一的“超级源”节点。您的方法必须调整算法的路径搜索的初始化过程，以直接处理这两个不同的源点。\n\n请用一个数值表示最大流，单位为 TB/h。", "solution": "问题要求在一个多源单汇网络中求最大流。解决此类问题的标准方法是创建一个“超级源”节点 `S*`，从 `S*` 向每个真实源点（`DC1`、`DC2`）添加容量无限的有向边，然后求解从 `S*` 到汇点 `SC` 的最大流。然而，问题明确禁止对图进行此种修改。\n\n因此，我们必须调整像 Edmonds-Karp 这样的增广路径算法，以处理多个源点。Edmonds-Karp 算法使用广度优先搜索（BFS）在残差图中反复寻找一条最短（以边的数量计）的增广路径，并沿此路径增加流量。所需的调整在于 BFS 的初始化。我们将所有源点（`DC1` 和 `DC2`）加入 BFS 队列的初始状态，而不是从单个源点开始搜索。这实际上是在搜索一条从*任意*源点到汇点的路径。\n\n设流函数为 `f(u, v)`，容量为 `c(u, v)`。从节点 `u` 到 `v` 的残余容量为 `c_f(u, v) = c(u, v) - f(u, v)`。初始时，各处的流均为零，因此残差图与原图相同。总流量为 `F = 0`。\n\n**迭代 1：**\n我们在残差图中搜索一条从 `{DC1, DC2}` 到 `SC` 的增广路径。\n初始化 BFS 队列：`Q = [DC1, DC2]`。\nBFS 将会探索路径。存在两条长度为2的最短路径：`DC1 -> R1 -> SC` 和 `DC1 -> R2 -> SC`。第三条路径 `DC2 -> R1 -> SC` 的长度也为2。算法可以选择任意一条。我们选择 `DC1 -> R1 -> SC`。\n该路径上的残余容量为 `c_f(DC1, R1) = 10` 和 `c_f(R1, SC) = 12`。\n瓶颈容量为 `min(10, 12) = 10`。\n我们将流量增加10。`F = 0 + 10 = 10`。\n更新残余容量：\n- `c_f(DC1, R1)` 减小到 `10 - 10 = 0`。创建一条反向边 `(R1, DC1)`，其容量为 `c_f(R1, DC1) = 10`。\n- `c_f(R1, SC)` 减小到 `12 - 10 = 2`。创建一条反向边 `(SC, R1)`，其容量为 `c_f(SC, R1) = 10`。\n\n**迭代 2：**\n搜索一条新的增广路径。初始化 BFS 队列：`Q = [DC1, DC2]`。\n现在最短的路径是 `DC2 -> R2 -> SC`，长度为2。\n残余容量为 `c_f(DC2, R2) = 8` 和 `c_f(R2, SC) = 9`。\n瓶颈容量为 `min(8, 9) = 8`。\n我们将流量增加8。`F = 10 + 8 = 18`。\n更新残余容量：\n- `c_f(DC2, R2)` 减小到 `8 - 8 = 0`。反向边 `c_f(R2, DC2) = 8`。\n- `c_f(R2, SC)` 减小到 `9 - 8 = 1`。反向边 `c_f(SC, R2) = 8`。\n\n**迭代 3：**\n搜索一条新的增广路径。初始化 BFS 队列：`Q = [DC1, DC2]`。\n一条最短路径是 `DC1 -> R2 -> SC`，长度为2。\n残余容量为 `c_f(DC1, R2) = 5` 和 `c_f(R2, SC) = 1`。\n瓶颈容量为 `min(5, 1) = 1`。\n我们将流量增加1。`F = 18 + 1 = 19`。\n更新残余容量：\n- `c_f(DC1, R2)` 减小到 `5 - 1 = 4`。`c_f(R2, DC1)` 增加到 1。\n- `c_f(R2, SC)` 减小到 `1 - 1 = 0`。`c_f(SC, R2)` 增加到 `8 + 1 = 9`。\n\n**迭代 4：**\n搜索一条新的增广路径。初始化 BFS 队列：`Q = [DC1, DC2]`。\n一条最短路径是 `DC2 -> R1 -> SC`，长度为2。\n残余容量为 `c_f(DC2, R1) = 6` 和 `c_f(R1, SC) = 2`。\n瓶颈容量为 `min(6, 2) = 2`。\n我们将流量增加2。`F = 19 + 2 = 21`。\n更新残余容量：\n- `c_f(DC2, R1)` 减小到 `6 - 2 = 4`。`c_f(R1, DC2)` 变为 2。\n- `c_f(R1, SC)` 减小到 `2 - 2 = 0`。`c_f(SC, R1)` 增加到 `10 + 2 = 12`。\n\n**迭代 5：**\n搜索一条新的增广路径。初始化 BFS 队列：`Q = [DC1, DC2]`。\n让我们追踪从 `{DC1, DC2}` 可达的节点。\n- 从 `DC1`，我们可以到达 `R2`（残余容量为 4）。\n- 从 `DC2`，我们可以到达 `R1`（残余容量为 4）和 `R2`（残余容量为 0，无法使用）。\n- 因此，从源点出发，我们可以到达 `R1` 和 `R2`。\n- 从 `R1`，我们能到达 `SC` 吗？不能，`c_f(R1, SC) = 0`。我们能去其他地方吗？我们可以去 `R2`（`c_f(R1, R2) = 4`）。\n- 从 `R2`，我们能到达 `SC` 吗？不能，`c_f(R2, SC) = 0`。\n- 让我们检查路径 `DC2 -> R1 -> R2`。从 `R2`，我们无法到达 `SC`。所以这条路径不能通往汇点。\nBFS 将会探索可达节点的集合：`{DC1, DC2, R1, R2}`。由于在当前的残差图中，从这些节点中的任何一个都无法到达 `SC`，搜索终止。不再存在增广路径。\n\n算法终止。最大流是所有增广量之和。\n`F_max = 10 + 8 + 1 + 2 = 21`。\n\n这个结果可以通过最大流最小割定理来验证。考虑割 `C = ({DC1, DC2, R1, R2}, {SC})`。这个割将源点与汇点分开。该割的容量是从源侧划分到汇侧划分的所有边的容量之和。\n割的容量(C) = `c(R1, SC) + c(R2, SC) = 12 + 9 = 21`。\n由于我们找到了一个流量为 21 的流和一个容量为 21 的割，根据最大流最小割定理，这必定是最大流。\n\n最大总数据传输速率为 21 TB/h。", "answer": "$$\\boxed{21}$$", "id": "1504817"}]}
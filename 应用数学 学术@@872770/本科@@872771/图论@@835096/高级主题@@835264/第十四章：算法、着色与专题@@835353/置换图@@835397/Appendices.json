{"hands_on_practices": [{"introduction": "将抽象的数学概念应用于解决实际问题是学习图论的关键。这个练习 [@problem_id:1526956] 提供了一个绝佳的例子，它将一个关于网络数据包重排序的实际场景转化为一个置换图模型。通过解决这个问题，你将亲手实践如何根据一个置换构建其对应的图，并运用最大匹配的概念来解决一个优化问题。", "problem": "一个网络路由器使用一个特殊的缓冲区来管理和重排序乱序的数据包。该缓冲区有 $n$ 个位置，标记为 $1, 2, \\dots, n$。在某一给定时刻，缓冲区中数据包的排列由集合 $\\{1, 2, \\dots, n\\}$ 的一个排列 $\\pi$ 描述，其中 $\\pi(i)$ 表示位于缓冲区位置 $i$ 的唯一数据包编号。\n\n该路由器的控制逻辑旨在识别位置的“逆序对”。如果位置 $i$ 处的数据包的序列号大于位置 $j$ 处的数据包的序列号，即 $\\pi(i) > \\pi(j)$，则一对位置 $(i, j)$ (其中 $i  j$) 被归类为一个逆序对。这些逆序对代表了需要被解决的冲突。\n\n为了优化重排序过程，路由器尝试执行一组同时进行的纠正交换。单个纠正交换作用于一个逆序对。如果集合中没有两个交换涉及相同的缓冲区位置，那么这样的一组交换被认为是“无干扰的”。路由器的目标是确定在一个并行步骤中可以执行的无干扰纠正交换的最大数量。\n\n考虑一个大小为 $n=6$ 的缓冲区。数据包排列由排列 $\\pi = (3, 6, 1, 5, 2, 4)$ 给出。可以同时执行的无干扰纠正交换的最大数量是多少？", "solution": "问题要求解对于给定的缓冲区内数据包排列，可以执行的无干扰纠正交换的最大数量。这可以用图论来建模。\n\n首先，我们将问题形式化。缓冲区位置 $\\{1, 2, 3, 4, 5, 6\\}$ 可以表示为图 $G = (V, E)$ 的顶点集 $V$。“逆序对”定义了这个图的边。两个顶点 $i$ 和 $j$ 之间存在一条边，当且仅当它们构成一个逆序对。根据问题陈述，如果 $i  j$ 且 $\\pi(i) > \\pi(j)$，则边 $(i, j)$ 属于边集 $E$。这种构造定义了一个排列图。\n\n一个“无干扰纠正交换的集合”对应于图 $G$ 中的一个边集，其中任意两条边都不共享公共顶点。这正是图论中匹配的定义。因此，寻找“无干扰纠正交换的最大数量”的问题等价于在对应于 $\\pi$ 的排列图 $G$ 中寻找最大匹配的大小。最大匹配的大小也称为图的匹配数，记为 $\\alpha'(G)$。\n\n给定的排列是作用在位置集合 $V = \\{1, 2, 3, 4, 5, 6\\}$ 上的 $\\pi = (3, 6, 1, 5, 2, 4)$。我们需要找出所有满足 $i  j$ 且 $\\pi(i) > \\pi(j)$ 的配对 $(i, j)$。这些配对将构成边集 $E$。\n\n让我们系统地检查所有可能的配对 $(i, j)$，其中 $1 \\le i  j \\le 6$：\n\n- 对于 $i=1$ ($\\pi(1)=3$):\n  - $j=2$: $\\pi(2)=6$。$3  6$。没有边。\n  - $j=3$: $\\pi(3)=1$。$3 > 1$。存在边 $(1, 3)$。\n  - $j=4$: $\\pi(4)=5$。$3  5$。没有边。\n  - $j=5$: $\\pi(5)=2$。$3 > 2$。存在边 $(1, 5)$。\n  - $j=6$: $\\pi(6)=4$。$3  4$。没有边。\n\n- 对于 $i=2$ ($\\pi(2)=6$):\n  - $j=3$: $\\pi(3)=1$。$6 > 1$。存在边 $(2, 3)$。\n  - $j=4$: $\\pi(4)=5$。$6 > 5$。存在边 $(2, 4)$。\n  - $j=5$: $\\pi(5)=2$。$6 > 2$。存在边 $(2, 5)$。\n  - $j=6$: $\\pi(6)=4$。$6 > 4$。存在边 $(2, 6)$。\n\n- 对于 $i=3$ ($\\pi(3)=1$):\n  - 值 $\\pi(3)=1$ 是可能的最小值，所以它不可能大于任何其他的 $\\pi(j)$。没有以 $i=3$ 开始的边。\n\n- 对于 $i=4$ ($\\pi(4)=5$):\n  - $j=5$: $\\pi(5)=2$。$5 > 2$。存在边 $(4, 5)$。\n  - $j=6$: $\\pi(6)=4$。$5 > 4$。存在边 $(4, 6)$。\n\n- 对于 $i=5$ ($\\pi(5)=2$):\n  - $j=6$: $\\pi(6)=4$。$2  4$。没有边。\n\n所以，图 $G$ 的边集是 $E = \\{(1, 3), (1, 5), (2, 3), (2, 4), (2, 5), (2, 6), (4, 5), (4, 6)\\}$。\n\n现在我们需要在这个图中找到最大匹配。匹配是 $E$ 的一个子集，其中任意两条边都不共享顶点。我们可以通过观察或尝试构建一个大的匹配来找到它。\n让我们尝试构建一个匹配：\n\n- 考虑边 $(1, 5)$。顶点 $1$ 和 $5$ 现在被使用了。剩余的可用顶点是 $\\{2, 3, 4, 6\\}$。\n- 从剩余的顶点中，我们寻找一条连接其中两个顶点的边。边 $(2, 3)$ 可行。现在顶点 $2$ 和 $3$ 被使用了。剩余的可用顶点是 $\\{4, 6\\}$。\n- 从剩余的顶点中，我们寻找一条边。边 $(4, 6)$ 在 $E$ 中。\n\n这给了我们一个匹配 $M = \\{(1, 5), (2, 3), (4, 6)\\}$。\n让我们验证这是一个有效的匹配。涉及的顶点是 $\\{1, 5\\}$, $\\{2, 3\\}$ 和 $\\{4, 6\\}$。这六个顶点在各配对中都是不同的，因此没有两条边共享一个顶点。所以，$M$ 是一个有效的匹配。\n\n这个匹配的大小是 $|M| = 3$。\n一个有 $n$ 个顶点的图中的匹配，其最大大小为 $\\lfloor n/2 \\rfloor$。在我们的例子中，$n=6$，所以任何匹配的最大可能大小是 $\\lfloor 6/2 \\rfloor = 3$。\n由于我们已经找到了一个大小为3的匹配，这必定是一个最大匹配。这个特定的匹配也是一个完美匹配，因为它包含了图的所有顶点。\n\n因此，可以同时执行的无干扰纠正交换的最大数量是3。", "answer": "$$\\boxed{3}$$", "id": "1526956"}, {"introduction": "在掌握了如何构建一个置換图之后，一个自然而然的问题是：它的基本结构是怎样的？例如，这个图是连通的吗？这个练习 [@problem_id:1526976] 引导我们深入探讨置换图的连通性，要求我们找出一个置换必须满足的充要条件，以使其对应的图是非连通的。解决这个问题将让你对置换与图结构之间的内在联系有更深刻的理解。", "problem": "设 $\\pi$ 是集合 $\\{1, 2, \\ldots, n\\}$ 的一个排列，其中整数 $n \\ge 2$。一个排列图（permutation graph），记作 $G(\\pi)$，是基于此排列构造的。$G(\\pi)$ 的顶点集是 $V = \\{1, 2, \\ldots, n\\}$。在 $V$ 中，两个不同的顶点 $i$ 和 $j$ 之间存在一条边，当且仅当它们的相对顺序被该排列所反转。形式上，边 $(i, j)$ 存在于图中，当且仅当以下条件成立：\n$$ (i - j)(\\pi^{-1}(i) - \\pi^{-1}(j))  0 $$\n其中 $\\pi^{-1}(k)$ 是数字 $k$ 在排列 $\\pi = (\\pi(1), \\pi(2), \\ldots, \\pi(n))$ 的单行表示法中的位置。\n\n关于排列 $\\pi$ 的下列哪个性质，是其对应的排列图 $G(\\pi)$ 不连通的充要条件？\n\nA. $\\pi$ 是一个对合（involution），即 $\\pi = \\pi^{-1}$。\n\nB. $\\pi$ 是一个错排（derangement），即对所有 $i \\in \\{1, \\ldots, n\\}$ 都有 $\\pi(i) \\neq i$。\n\nC. $\\pi$ 至少固定一个元素，即存在某个 $i \\in \\{1, \\ldots, n\\}$ 使得 $\\pi(i) = i$。\n\nD. 存在一个整数 $k$ 满足 $1 \\le k  n$，使得像集 $\\{\\pi(1), \\pi(2), \\ldots, \\pi(k)\\}$ 等于集合 $\\{1, 2, \\ldots, k\\}$。\n\nE. 排列 $\\pi$ 是反转元素顺序的特定排列，即对所有 $i$ 都有 $\\pi(i) = n - i + 1$。", "solution": "我们来分析选项D。该选项陈述为：存在一个整数 $k$ 满足 $1 \\le k  n$，使得集合 $\\{\\pi(1), \\pi(2), \\ldots, \\pi(k)\\}$ 等于集合 $\\{1, 2, \\ldots, k\\}$。这种排列在组合数学中被称为是“可分解的”。\n\n**充分性（“如果”部分）：**\n假设存在这样一个 $k$。这个条件意味着排列的前 $k$ 个位置被前 $k$ 个整数占据，反之亦然。也就是说，对于任意整数 $i \\le k$，其在排列 $\\pi$ 中的位置 $\\pi^{-1}(i)$ 也必须满足 $\\pi^{-1}(i) \\le k$。同样，对于任意整数 $j > k$，其位置 $\\pi^{-1}(j)$ 必须满足 $\\pi^{-1}(j) > k$。\n现在，考虑图 $G(\\pi)$ 的两个非空顶点子集：$V_1 = \\{1, 2, \\ldots, k\\}$ 和 $V_2 = \\{k+1, \\ldots, n\\}$。\n任取一个顶点 $u \\in V_1$ 和一个顶点 $v \\in V_2$。根据定义，我们有 $u  v$。根据上面的分析，我们有 $\\pi^{-1}(u) \\le k$ 和 $\\pi^{-1}(v) > k$，这意味着 $\\pi^{-1}(u)  \\pi^{-1}(v)$。\n根据题目中给出的边的存在条件，一条边存在当且仅当 $(u - v)(\\pi^{-1}(u) - \\pi^{-1}(v))  0$。\n在我们的情况下，$(u-v)$ 是负数，而 $(\\pi^{-1}(u) - \\pi^{-1}(v))$ 也是负数。因此，它们的乘积是正数。\n这意味着在 $V_1$ 中的任何顶点和 $V_2$ 中的任何顶点之间都不存在边。因此，图 $G(\\pi)$ 被分成了至少两个不相连的组件，所以它是不连通的。\n\n**必要性（“当且仅当”部分）：**\n假设图 $G(\\pi)$ 是不连通的。这意味着顶点集 $V$ 可以被划分为两个非空子集 $A$ 和 $B$，使得 $A$ 和 $B$ 之间没有边。一个置换图是连通的当且仅当其对应的排列是不可分解的（indecomposable）。因此，一个不连通的置换图必须对应一个可分解的排列，这正是选项D所描述的条件。\n\n因此，选项D给出了图不连通的充要条件。\n\n**其他选项分析：**\nA. 对合 $\\pi = \\pi^{-1}$：例如 $\\pi = (2, 1, 4, 3)$ 是对合，但其图是连通的。\nB. 错排：$\\pi = (2, 3, 1)$ 是一个错排，但其图是完全图 $K_3$，是连通的。\nC. 固定点：$\\pi = (1, 3, 2)$ 有固定点1，但 $G(\\pi)$ 是一条路径 $2-3$，是连通的。\nE. 反序排列：$\\pi = (n, \\dots, 1)$ 生成一个完全图 $K_n$，对于 $n \\ge 2$ 是连通的。\n\n因此，D是正确的答案。", "answer": "$$\\boxed{D}$$", "id": "1526976"}, {"introduction": "不同的置换有时可以生成结构相同（即同构）的图。这个练习 [@problem_id:1527015] 探索了这一有趣现象，研究了置换上的一些常见操作（如逆、反转和补）如何影响最终生成的图。通过分析这些变换，你将揭示置换图构造过程中存在的深刻对称性，并理解哪些变换能够保持图的结构不变。", "problem": "设 $S = \\{1, 2, \\dots, n\\}$。$S$ 的一个排列 $\\pi$ 是其元素的一个有序排列，记作序列 $(\\pi_1, \\pi_2, \\dots, \\pi_n)$。排列图 $G(\\pi)$ 是一个无向图，其顶点集为 $V=S$。两个不同的顶点 $i \\in S$ 和 $j \\in S$ 之间存在一条边，当且仅当它们在序列 $\\pi$ 中的相对顺序与其数值顺序相反。也就是说，如果 $(i-j)(\\text{pos}_\\pi(i) - \\text{pos}_\\pi(j))  0$，则边 $\\{i, j\\}$ 存在，其中 $\\text{pos}_\\pi(k)$ 是数字 $k$ 在序列 $\\pi$ 中的位置（从1到n的索引）。\n\n对于一个给定的排列 $\\pi = (\\pi_1, \\dots, \\pi_n)$，我们可以定义几个相关的排列：\n- **逆**排列 $\\pi^{-1}$，是满足对所有 $i \\in \\{1,\\dots,n\\}$ 都有 $\\pi^{-1}(\\pi_i) = i$ 的排列。\n- **逆序**排列 $\\pi^r = (\\pi_n, \\pi_{n-1}, \\dots, \\pi_1)$。\n- **补**排列 $\\pi^c = (n+1-\\pi_1, n+1-\\pi_2, \\dots, n+1-\\pi_n)$。\n\n你的任务是确定以下哪种变换，当应用于一个排列 $\\pi_1$ 以获得一个新的排列 $\\pi_2$ 时，总能得到一个同构图 $G(\\pi_1) \\cong G(\\pi_2)$，同时也允许 $\\pi_1$ 和 $\\pi_2$ 是不同排列的情况。考虑 $n=5$ 的情况。\n\n以下哪种变换 $T: \\pi_1 \\mapsto \\pi_2$ 满足这些标准？\n\nA. $\\pi_2 = \\pi_1^r$ (逆序)\n\nB. $\\pi_2 = \\pi_1^c$ (补)\n\nC. $\\pi_2 = \\pi_1^{-1}$ (逆)\n\nD. $\\pi_2 = (\\pi_1^r)^c$ (逆序补)", "solution": "设 $S=\\{1,2,\\dots,n\\}$，并设 $p(k)=\\text{pos}_{\\pi}(k)$ 为 $k$ 在 $\\pi$ 中的位置。根据定义，对于不同的 $i,j \\in S$，$\\{i,j\\}$ 是 $G(\\pi)$ 的一条边，当且仅当 $(i-j)\\big(p(i)-p(j)\\big)0$。\n\nA. 逆序 $\\pi^{r}$。其位置函数为 $p_{r}(k)=n+1-p(k)$。那么对于不同的 $i,j$，\n$$\n(i-j)\\big(p_{r}(i)-p_{r}(j)\\big)=(i-j)\\big((n+1-p(i))-(n+1-p(j))\\big)=-(i-j)\\big(p(i)-p(j)\\big).\n$$\n因此，$\\{i,j\\}$ 是 $G(\\pi^{r})$ 的一条边，当且仅当它不是 $G(\\pi)$ 的边。因此 $G(\\pi^{r})$ 是 $G(\\pi)$ 的补图，不一定与 $G(\\pi)$ 同构。对于 $n=5$，取 $\\pi=(1,2,3,4,5)$：$G(\\pi)$ 是空图，而 $G(\\pi^{r})$ 是完全图，所以它们不同构。因此A不满足条件。\n\nB. 补 $\\pi^{c}$。设 $p_{c}(k)=\\text{pos}_{\\pi^{c}}(k)$。因为 $\\pi^{c}$ 将 $k$ 放置在 $\\pi$ 中 $n+1-k$ 的位置上，我们有 $p_{c}(k)=p(n+1-k)$。对于不同的 $i,j$，\n$$\n(i-j)\\big(p_{c}(i)-p_{c}(j)\\big)=(i-j)\\big(p(n+1-i)-p(n+1-j)\\big).\n$$\n设 $i'=n+1-i$ 和 $j'=n+1-j$。则 $i'-j'=-(i-j)$ 且\n$$\n(i-j)\\big(p_{c}(i)-p_{c}(j)\\big)=-(i'-j')\\big(p(i')-p(j')\\big).\n$$\n因此 $\\{i,j\\}$ 是 $G(\\pi^{c})$ 的一条边，当且仅当 $\\{i',j'\\}$ 不是 $G(\\pi)$ 的边。因此 $G(\\pi^{c})$ 与 $G(\\pi)$ 的补图同构（通过重标记 $k\\mapsto n+1-k$），不一定与 $G(\\pi)$ 同构。对于 $n=5$，当 $\\pi=(1,2,3,4,5)$ 时，$G(\\pi)$ 是空图，而 $G(\\pi^{c})$ 是完全图，所以它们不同构。因此B不满足条件。\n\nC. 逆 $\\pi^{-1}$。设 $p_{\\text{inv}}(k)=\\text{pos}_{\\pi^{-1}}(k)$。因为 $\\pi^{-1}$ 交换了数值和位置，所以 $p_{\\text{inv}}=p^{-1}$。对于不同的 $a,b$，\n$$\n(a-b)\\big(p_{\\text{inv}}(a)-p_{\\text{inv}}(b)\\big)=(a-b)\\big(p^{-1}(a)-p^{-1}(b)\\big).\n$$\n设 $i=p^{-1}(a)$ 和 $j=p^{-1}(b)$，于是 $a=p(i)$ 和 $b=p(j)$。那么\n$$\n(a-b)\\big(p^{-1}(a)-p^{-1}(b)\\big)=\\big(p(i)-p(j)\\big)\\big(i-j\\big).\n$$\n因此 $\\{a,b\\}$ 是 $G(\\pi^{-1})$ 的一条边，当且仅当 $\\{i,j\\}$ 是 $G(\\pi)$ 的一条边，其中 $i=p^{-1}(a)$ 且 $j=p^{-1}(b)$。该双射 $f:a\\mapsto p^{-1}(a)$ 对于任意 $\\pi$ 都是一个图同构 $G(\\pi^{-1})\\cong G(\\pi)$。存在 $\\pi$ 使得 $\\pi\\neq\\pi^{-1}$（例如，当 $n=5$ 时，$\\pi=(2,3,4,5,1)$），所以C满足标准。\n\nD. 逆序补 $(\\pi^{r})^{c}$。首先 $p_{r}(k)=n+1-p(k)$，然后 $p_{rc}(k)=p_{r}(n+1-k)=n+1-p(n+1-k)$。对于不同的 $i,j$，\n$$\n(i-j)\\big(p_{rc}(i)-p_{rc}(j)\\big)=(i-j)\\Big(\\big(n+1-p(n+1-i)\\big)-\\big(n+1-p(n+1-j)\\big)\\Big)\n$$\n$$\n=(i-j)\\big(p(n+1-j)-p(n+1-i)\\big).\n$$\n令 $i'=n+1-i$ 且 $j'=n+1-j$，所以 $i'-j'=-(i-j)$，我们得到\n$$\n(i-j)\\big(p_{rc}(i)-p_{rc}(j)\\big)=-(i'-j')\\big(p(j')-p(i')\\big)=(i'-j')\\big(p(i')-p(j')\\big).\n$$\n因此 $\\{i,j\\}$ 是 $G\\big((\\pi^{r})^{c}\\big)$ 的一条边，当且仅当 $\\{i',j'\\}$ 是 $G(\\pi)$ 的一条边，其中重标记是固定的 $f(k)=n+1-k$。因此对于任意 $\\pi$，都有 $G\\big((\\pi^{r})^{c}\\big)\\cong G(\\pi)$。存在 $\\pi$ 使得 $\\pi\\neq(\\pi^{r})^{c}$（例如，当 $n=5$ 时，$\\pi=(2,1,3,4,5)$ 得到 $(\\pi^{r})^{c}=(1,2,3,5,4)$），所以D满足标准。\n\n因此，恰好是C和D总能产生同构的排列图，并且在 $n=5$ 的某些情况下允许 $\\pi_{1}\\neq\\pi_{2}$。", "answer": "$$\\boxed{CD}$$", "id": "1527015"}]}
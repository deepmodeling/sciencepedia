{"hands_on_practices": [{"introduction": "锦标赛图的一个基本且引人注目的特性是它们总包含一条哈密顿路径，这为所有参与者提供了一种线性排序。这个练习将指导你应用一个构造性算法，通过逐步将选手加入路径来亲手找到这样一条路径[@problem_id:1511613]。这不仅证明了哈密顿路径的存在性，还让你掌握了从复杂的比赛结果中提取清晰排名序列的实用技能。", "problem": "在一次国际象棋循环赛中，每位棋手都与所有其他棋手对弈恰好一次。比赛没有平局。比赛结果可以建模为一个*竞赛图*，这是一个有向图，其中对于每对不同的顶点$\\{u, v\\}$，有向边$(u,v)$或$(v,u)$中恰好存在一个。一条边$(u,v)$表示棋手$u$击败了棋手$v$。\n\n任何竞赛图的一个有趣性质是它总包含一条*哈密顿路径*——即一条恰好访问每个顶点一次的有向路径。这样一条路径提供了一个所有棋手的完整排名，$(p_1, p_2, \\dots, p_n)$，其中棋手$p_1$击败了$p_2$，$p_2$击败了$p_3$，以此类推。\n\n考虑一个有6名棋手的竞赛，标记为{1, 2, 3, 4, 5, 6}。比赛结果由以下邻接矩阵$A$给出，其中$A_{ij}=1$表示棋手$i$击败了棋手$j$。\n$$\nA = \\begin{pmatrix}\n0  1  1  1  0  1 \\\\\n0  0  1  0  1  0 \\\\\n0  0  0  0  0  1 \\\\\n0  1  1  0  1  0 \\\\\n1  0  1  0  0  0 \\\\\n0  1  0  1  1  0\n\\end{pmatrix}\n$$\n你需要通过应用以下确定性的迭代算法，在这个竞赛图中找到一条哈密顿路径：\n\n**算法：构造性路径查找器**\n从包含$k$个顶点的初始路径$P_k$开始。要将一个新顶点$u$（不在$P_k$中）并入以形成一个包含$k+1$个顶点的路径$P_{k+1}$，请遵循以下步骤。设当前路径为$P_k = (v_1, v_2, \\dots, v_k)$。\n1.  如果棋手$u$击败了棋手$v_1$（即存在边$(u, v_1)$），则通过将$u$放在开头来创建新路径：$P_{k+1} = (u, v_1, v_2, \\dots, v_k)$。\n2.  如果第一种情况不适用，检查棋手$v_k$是否击败了棋手$u$（即存在边$(v_k, u)$）。如果是，则通过将$u$放在末尾来创建新路径：$P_{k+1} = (v_1, v_2, \\dots, v_k, u)$。\n3.  如果前两种情况都不适用，则必然存在一个索引$i$（$1 \\le i  k$），使得棋手$v_i$击败了棋手$u$，并且棋手$u$击败了棋手$v_{i+1}$。找到满足条件的最小索引$i$，并将$u$插入路径中$v_i$和$v_{i+1}$之间：$P_{k+1} = (v_1, \\dots, v_i, u, v_{i+1}, \\dots, v_k)$。\n\n从仅包含顶点1的初始路径开始，按此特定顺序（2, 3, 4, 5, 6）依次应用此算法添加顶点。最终的哈密顿路径是什么？\n\n请将你的答案以行矩阵的形式表示为顶点标签的序列。", "solution": "我们将$A_{ij}=1$解释为一条有向边$(i,j)$，表示棋手$i$击败了棋手$j$。我们应用构造性路径查找器算法，从$P_{1}=(1)$开始，并按顺序插入顶点$2,3,4,5,6$。\n\n将$u=2$插入$P_{1}=(1)$：\n- 情况1：检查$A_{2,1}=1$。根据矩阵$A$，$A_{2,1}=0$，因此此情况不成立。\n- 情况2：检查$A_{1,2}=1$。根据矩阵$A$，$A_{1,2}=1$，因此将$2$附加到末尾。\n因此$P_{2}=(1,2)$。\n\n将$u=3$插入$P_{2}=(1,2)$：\n- 情况1：检查$A_{3,1}=1$。根据矩阵$A$，$A_{3,1}=0$，因此此情况不成立。\n- 情况2：检查$A_{2,3}=1$。根据矩阵$A$，$A_{2,3}=1$，因此将$3$附加到末尾。\n因此$P_{3}=(1,2,3)$。\n\n将$u=4$插入$P_{3}=(1,2,3)$：\n- 情况1：检查$A_{4,1}=1$。根据矩阵$A$，$A_{4,1}=0$，因此此情况不成立。\n- 情况2：检查$A_{3,4}=1$。根据矩阵$A$，$A_{3,4}=0$，因此此情况不成立。\n- 情况3：对于$P_{3}=(v_{1},v_{2},v_{3})=(1,2,3)$，找到满足$A_{v_{i},4}=1$和$A_{4,v_{i+1}}=1$的最小$i$。\n  - 对于$i=1$：$A_{1,4}=1$且$A_{4,2}=1$；两者都成立，因此在$1$和$2$之间插入$4$。\n因此$P_{4}=(1,4,2,3)$。\n\n将$u=5$插入$P_{4}=(1,4,2,3)$：\n- 情况1：检查$A_{5,1}=1$。根据矩阵$A$，$A_{5,1}=1$，因此将$5$前置。\n因此$P_{5}=(5,1,4,2,3)$。\n\n将$u=6$插入$P_{5}=(5,1,4,2,3)$：\n- 情况1：检查$A_{6,5}=1$。根据矩阵$A$，$A_{6,5}=1$，因此将$6$前置。\n因此$P_{6}=(6,5,1,4,2,3)$。\n\n验证$P_{6}$是一条有向路径：我们检查路径上的边是否存在于$A$中：\n$A_{6,5}=1$，$A_{5,1}=1$，$A_{1,4}=1$，$A_{4,2}=1$，以及$A_{2,3}=1$。所有条件都成立，所以这是一条有效的哈密顿路径。\n\n因此，最终的哈密顿路径，以行矩阵表示为$\\begin{pmatrix} 6  5  1  4  2  3 \\end{pmatrix}$。", "answer": "$$\\boxed{\\begin{pmatrix}6  5  1  4  2  3\\end{pmatrix}}$$", "id": "1511613"}, {"introduction": "虽然哈密顿路径提供了一种排名，但它可能无法完全捕捉“实力”的微妙之处。为此，我们引入“王”的概念——一个能通过最多两步击败任何其他选手的顶点。这个练习旨在挑战一个常见的误解，即得分最高（出度最大）的选手就是最强的；你将发现一个选手可以是一个“王”，即使他/她的胜场数并非最多[@problem_id:1516504]，从而揭示了锦标赛中更深层次的支配关系。", "problem": "在图论中，**竞赛图** (tournament) 是一个有向图，它通过为无向完全图中的每条边指定一个方向而得到。也就是说，对于图中每对不同的顶点 $u$ 和 $v$，有向边 $(u,v)$ 和 $(v,u)$ 中恰好存在一条。顶点 $v$ 的**出度** (out-degree) 记为 $d^+(v)$，是从 $v$ 出发的边的数量。\n\n如果从顶点 $k$ 到竞赛图中的其他每个顶点 $v$，都存在一条长度至多为 2 的有向路径，那么顶点 $k$ 被称为**王** (king)。这意味着，要么存在一条边 $(k,v)$（长度为 1 的路径），要么存在一个顶点 $w$ 使得边 $(k,w)$ 和 $(w,v)$ 都存在（长度为 2 的路径）。\n\n考虑定义在顶点集 $V = \\{1, 2, 3, 4\\}$ 上的以下四个竞赛图。一条边 $(u,v)$ 表示顶点 $u$ “击败”顶点 $v$。这些竞赛图中，哪一个包含至少一个顶点，该顶点是王，但其出度不是该竞赛图中的最大出度？\n\nA. 边集: $E_A = \\{(1,2), (1,3), (2,3), (2,4), (3,4), (4,1)\\}$\n\nB. 边集: $E_B = \\{(1,2), (1,3), (1,4), (2,3), (2,4), (3,4)\\}$\n\nC. 边集: $E_C = \\{(1,2), (2,3), (3,1), (1,4), (2,4), (3,4)\\}$\n\nD. 边集: $E_D = \\{(1,2), (1,3), (2,3), (2,4), (4,1), (4,3)\\}$", "solution": "我们通过计算所有 $v \\in \\{1,2,3,4\\}$ 的出度 $d^{+}(v)$，然后检查哪些顶点是王，来分析每个竞赛图。如果对于每个 $v \\neq k$，都存在一条从 $k$ 到 $v$ 的长度至多为 $2$ 的有向路径，则顶点 $k$ 是王。\n\n选项 A: $E_{A}=\\{(1,2),(1,3),(2,3),(2,4),(3,4),(4,1)\\}$。\n计算出度：\n$$\nd^{+}(1)=2,\\quad d^{+}(2)=2,\\quad d^{+}(3)=1,\\quad d^{+}(4)=1.\n$$\n最大出度为 $2$（顶点 $1$ 和 $2$）。\n检查哪些是王：\n- $1$：直接到达 $2,3$，并通过 $1\\to 2\\to 4$ 到达 $4$，所以 $1$ 是王。\n- $2$：直接到达 $3,4$，并通过 $2\\to 4\\to 1$ 到达 $1$，所以 $2$ 是王。\n- $3$：只有 $3\\to 4$；无法在两步内到达 $2$（因为 $(4,2)$ 不存在，所以唯一的两步选项 $3\\to 4\\to 2$ 失败），所以 $3$ 不是王。\n- $4$：直接到达 $1$，并通过 $4\\to 1\\to 2$ 和 $4\\to 1\\to 3$ 到达 $2,3$，所以 $4$ 是王。\n因此 $4$ 是王，其出度 $d^{+}(4)=1$，所以 A 满足条件。\n\n选项 B: $E_{B}=\\{(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)\\}$。\n计算出度：\n$$\nd^{+}(1)=3,\\quad d^{+}(2)=2,\\quad d^{+}(3)=1,\\quad d^{+}(4)=0.\n$$\n这是一个传递竞赛图，其中的边都从标号较小的顶点指向标号较大的顶点。只有 $1$ 能（直接）到达所有其他顶点，所以 $1$ 是唯一的王，且它具有最大出度。因此 B 不满足条件。\n\n选项 C: $E_{C}=\\{(1,2),(2,3),(3,1),(1,4),(2,4),(3,4)\\}$。\n计算出度：\n$$\nd^{+}(1)=2,\\quad d^{+}(2)=2,\\quad d^{+}(3)=2,\\quad d^{+}(4)=0.\n$$\n顶点 $1,2,3$ 都击败 $4$，且它们自身之间形成一个 3-环路，所以 $1,2,3$ 中的每一个都能在两步内到达所有其他顶点（因此都是王），而 $4$ 不是王。所有的王都具有最大出度 $2$，所以 C 不满足条件。\n\n选项 D: $E_{D}=\\{(1,2),(1,3),(2,3),(2,4),(4,1),(4,3)\\}$。\n计算出度：\n$$\nd^{+}(1)=2,\\quad d^{+}(2)=2,\\quad d^{+}(3)=0,\\quad d^{+}(4)=2.\n$$\n检查哪些是王：\n- $1$：直接到达 $2,3$，并通过 $1\\to 2\\to 4$ 到达 $4$，所以 $1$ 是王。\n- $2$：直接到达 $3,4$，并通过 $2\\to 4\\to 1$ 到达 $1$，所以 $2$ 是王。\n- $4$：直接到达 $1,3$，并通过 $4\\to 1\\to 2$ 到达 $2$，所以 $4$ 是王。\n- $3$ 不是王。\n所有的王都具有最大出度 $2$，所以 D 不满足条件。\n\n因此，只有竞赛图 A 包含一个顶点，该顶点是王，但其出度不是最大出度。", "answer": "$$\\boxed{A}$$", "id": "1516504"}, {"introduction": "从路径到环路，我们来探讨更强的结构属性。哈密顿环路的存在意味着锦标赛是强连通的，其中没有绝对的“第一”或“最后”。这个练习像一个逻辑谜题，要求你首先根据一系列规则构建出锦标赛图，然后利用其结构特点来寻找并计算所有可能的哈密顿环路[@problem_id:1550240]。", "problem": "五名选手进行了一场循环赛，他们被标记为 $P_1, P_2, P_3, P_4, P_5$。在这种赛制中，每位选手都与所有其他选手比赛一次，且没有平局。比赛的结果可以用一个有向图来表示，其中从选手 $A$ 到选手 $B$ 的一条边，记作 $(A, B)$，表示“A 击败了 B”。\n\n这场特定比赛的结果由以下规则确定：\n1.  选手 $P_1$ 的唯一一场胜利是战胜了选手 $P_5$。\n2.  选手 $P_5$ 击败了选手 $P_2, P_3,$ 和 $P_4$。\n3.  在集合 $\\{P_2, P_3, P_4\\}$ 中的选手之间的比赛形成了一个有向环，其中 $P_2$ 击败 $P_3$，$P_3$ 击败 $P_4$，而 $P_4$ 击败 $P_2$。\n\n在此背景下，一个哈密顿圈对应一个选手序列 $(A, B, C, D, E, A)$，其中 $A$ 击败 $B$，$B$ 击败 $C$，$C$ 击败 $D$，$D$ 击败 $E$，而 $E$ 击败 $A$，且序列中每位选手恰好出现一次。确定本次比赛中不同哈密顿圈的总数。", "solution": "在本次比赛中，有向边按如下方式确定：\n- 根据规则1，$P_{1}$ 仅击败 $P_{5}$，因此有 $P_{1} \\to P_{5}$ 且 $P_{2},P_{3},P_{4} \\to P_{1}$。\n- 根据规则2，$P_{5} \\to P_{2},P_{3},P_{4}$。\n- 根据规则3，在 $\\{P_{2},P_{3},P_{4}\\}$ 中，我们有一个3-环 $P_{2} \\to P_{3} \\to P_{4} \\to P_{2}$。\n\n在任何哈密顿圈中，每个顶点必须后接一个它击败的顶点，前接一个击败它的顶点。由于 $P_{1}$ 只有一条出边，因此在圈中必须有 $P_{1} \\to P_{5}$ 相邻。另外，由于只有 $P_{1}$ 击败 $P_{5}$，所以 $P_{5}$ 的前驱必定是 $P_{1}$。因此，每个哈密顿圈都具有以下形式\n$$\nX \\to P_{1} \\to P_{5} \\to Y \\to Z \\to X,\n$$\n其中 $\\{X,Y,Z\\}=\\{P_{2},P_{3},P_{4}\\}$。\n\n根据上述规则，边 $X \\to P_{1}$ 和 $P_{5} \\to Y$ 总是存在的。因此，要使该圈成为有向圈，剩余的约束条件是\n$$\nY \\to Z \\quad \\text{and} \\quad Z \\to X\n$$\n这两个关系需要在 $\\{P_{2},P_{3},P_{4}\\}$ 的子赛事图中成立，而该子赛事图恰好是 3-环 $P_{2} \\to P_{3} \\to P_{4} \\to P_{2}$。因此 $(Y,Z,X)$ 必须是沿着这个3-环的一条长度为 $2$ 的有向路径。恰好有 $3$ 条这样的路径：\n$$\n(P_{2} \\to P_{3} \\to P_{4}), \\quad (P_{3} \\to P_{4} \\to P_{2}), \\quad (P_{4} \\to P_{2} \\to P_{3}),\n$$\n从而得到有效的三元组 $(X,Y,Z)$：\n$$\n(P_{4},P_{2},P_{3}), \\quad (P_{2},P_{3},P_{4}), \\quad (P_{3},P_{4},P_{2}).\n$$\n每一个三元组都产生一个唯一的哈密顿圈：\n$$\nP_{4} \\to P_{1} \\to P_{5} \\to P_{2} \\to P_{3} \\to P_{4}, \\quad\nP_{2} \\to P_{1} \\to P_{5} \\to P_{3} \\to P_{4} \\to P_{2}, \\quad\nP_{3} \\to P_{1} \\to P_{5} \\to P_{4} \\to P_{2} \\to P_{3}.\n$$\n\n因为 $P_{1} \\to P_{5}$ 是强制的，并且唯一确定了这两个顶点在任何哈密顿圈中的邻接关系，所以每个有向哈密顿圈都精确地对应于这样一个三元组，因此没有重复计数。因此，不同哈密顿圈的总数是 $3$。", "answer": "$$\\boxed{3}$$", "id": "1550240"}]}
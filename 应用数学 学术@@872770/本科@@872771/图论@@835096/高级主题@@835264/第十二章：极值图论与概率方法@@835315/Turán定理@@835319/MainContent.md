## 引言
在[图论](@entry_id:140799)的广阔天地中，一个基本而深刻的问题是：一个图在满足特定属性（例如，不包含某种结构）的前提下，最多能拥有多少条边？这个问题催生了[极值图论](@entry_id:275134)这一迷人的分支，而[图兰定理](@entry_id:271028)（Turán's Theorem）正是这一领域的奠基之石。它优美地回答了在禁止出现特定大小的“团”（完全子图）时，网络连接数的极限问题，揭示了图的密度与结构之间最本质的联系。

本文旨在系统地介绍[图兰定理](@entry_id:271028)。我们将从以下三个章节展开：

在“原则与机制”中，我们将从最简单的[无三角形图](@entry_id:267894)问题（[曼特尔定理](@entry_id:260839)）入手，逐步推广到一般的[图兰定理](@entry_id:271028)，深入剖析其核心思想和[图兰图](@entry_id:274830)的构造。

在“应用与交叉学科联系”中，我们将探索该定理如何从纯粹的数学理论走向实践，为[网络设计](@entry_id:267673)、[算法分析](@entry_id:264228)、计算复杂性甚至数论等领域提供强有力的工具。

最后，在“动手实践”部分，你将有机会通过解决具体问题，将理论知识转化为解决实际问题的能力。

通过本次学习，你将不仅掌握[图兰定理](@entry_id:271028)本身，更能领会[极值图论](@entry_id:275134)的基本思想，并看到一个核心数学概念如何产生广泛而深远的影响。让我们一同开启这段探索密度与结构奥秘的旅程。

## 原则与机制

在上一章中，我们对图论中的一些基本概念进行了介绍。现在，我们将深入探讨一个迷人且深刻的分支：[极值图论](@entry_id:275134) (Extremal Graph Theory)。这个领域的核心问题可以概括为：在一个具有特定属性的图的集合中，哪一个图的边数最多或最少？本章将聚焦于该领域的一块奠基石——[图兰定理](@entry_id:271028) (Turán's Theorem)，它为一类 foundational 的极值问题提供了完整而优美的解答。

### 一个基本问题：禁止[子图](@entry_id:273342)

想象一下，你正在设计一个网络，无论是社交网络、通信网络还是交通网络。网络的节点是参与者，边是它们之间的连接。通常，我们希望网络有尽可能多的连接以提高效率和鲁棒性。然而，某些局部结构可能是不受欢迎的。例如，在一个社交网络中，我们可能希望避免出现紧密抱团的“三人小团体”，以鼓励更多样化的交流 [@problem_id:1551476]。在竞赛安排中，为了避免出现实力过于集中的对局，组织者可能会规定任意三位选手之间不能形成一个完整的[循环赛](@entry_id:268144) [@problem_id:1551519]。

这些场景都可以抽象为同一个[图论](@entry_id:140799)问题：给定 $n$ 个顶点，如果我们禁止图中出现某种特定的[子图](@entry_id:273342)结构 $H$，那么图中最多可以有多少条边？这个最大边数被称为**[极值](@entry_id:145933)数** (extremal number)，记作 $\operatorname{ex}(n, H)$。

最简单且最自然的被禁[子图](@entry_id:273342)就是一个**三角形**，即三顶点两两相连的**[完全图](@entry_id:266483)** $K_3$。值得注意的是，一个 $K_3$ 在结构上与一个**长度为3的圈** $C_3$ 是完全相同的 [@problem_id:1551476]。因此，禁止 $K_3$ 等价于禁止 $C_3$。这个问题引出了[图兰定理](@entry_id:271028)的第一个，也是最经典的一个特例。

### [曼特尔定理](@entry_id:260839)：[无三角形图](@entry_id:267894)的极限

1907年，Willem Mantel 解决了禁止 $K_3$ 的问题。他证明了任何不包含三角形的 $n$ 顶点图，其边数都不会超过 $\lfloor \frac{n^2}{4} \rfloor$。

**[曼特尔定理](@entry_id:260839) (Mantel's Theorem, 1907):**
对于任意 $n$ 顶点图 $G$，如果 $G$ 是无三角形的 ($K_3$-free)，那么它的边数 $|E(G)|$ 满足：
$$|E(G)| \le \left\lfloor \frac{n^2}{4} \right\rfloor$$

这个上界是紧的，意味着存在图能够达到这个边数。这个达到上界的图被称为**极值图** (extremal graph)。对于禁止 $K_3$ 的问题，[极值](@entry_id:145933)图是一个**完全[二部图](@entry_id:262451)** (complete bipartite graph)，其两个顶点划分的大小应尽可能相等。也就是说，我们将 $n$ 个顶点分成两个集合 $A$ 和 $B$，其中 $|A| = \lfloor \frac{n}{2} \rfloor$ 且 $|B| = \lceil \frac{n}{2} \rceil$。图中任意一个顶点 $u \in A$ 和任意一个顶点 $v \in B$ 之间都有一条边，而 $A$ 内部或 $B$ 内部的顶点之间没有任何边。这样的图记为 $K_{\lfloor n/2 \rfloor, \lceil n/2 \rceil}$。

首先，很容易验证 $K_{\lfloor n/2 \rfloor, \lceil n/2 \rceil}$ 是无三角形的。任何一条路径的长度为2，例如 $v_1 \to u \to v_2$，必然始于一个划分（比如 $A$），经过另一个划分（$B$），再回到原来的划分（$A$）。由于同一划分内部没有边，顶点 $v_1$ 和 $v_2$ 之间不可能有边，因此无法形成三角形。

其次，为什么这种“均衡划分”能使边数最大化？假设我们将 $n$ 个顶点划分为大小为 $a$ 和 $b$ 的两个部分，其中 $a+b=n$。总边数为 $a \times b$。代数知识告诉我们，对于一个固定的和 $n$，两数之积在两数相等或尽可能接近时达到最大值。我们可以通过一个简单的代数变换看到这一点：$ab = a(n-a) = -a^2 + na$。这是一个开口向下的二次函数，其顶点在 $a = \frac{n}{2}$ 处取得。因此，当 $a$ 和 $b$ 的差距最小时，乘积 $ab$ 最大 [@problem_id:1382580]。例如，在一个有100个节点的网络中，采用 $(50, 50)$ 的划分可以得到 $50 \times 50 = 2500$ 条边，而采用 $(25, 75)$ 的划分只能得到 $25 \times 75 = 1875$ 条边。

对于 $n=101$ 个玩家的锦标赛，不允许三人形成[循环赛](@entry_id:268144)，最大比赛场次数就是 $n=101$ 时无 $K_3$ 图的最大边数。根据[曼特尔定理](@entry_id:260839)，这个数是 $\lfloor \frac{101^2}{4} \rfloor = \lfloor \frac{10201}{4} \rfloor = 2550$。这个最大值由完全二部图 $K_{50, 51}$ 实现，其边数为 $50 \times 51 = 2550$ [@problem_id:1551519]。

[曼特尔定理](@entry_id:260839)也回答了其“镜像问题”：至少需要多少条边才能**保证**一个三角形的存在？如果一个图有 $\lfloor \frac{n^2}{4} \rfloor$ 条边时仍可能没有三角形（即极值图本身），那么只需再增加一条边，这个结构就必然被破坏。因此，任何拥有 $\lfloor \frac{n^2}{4} \rfloor + 1$ 条边的 $n$ 顶点图必定包含一个三角形 [@problem_id:1551509]。

我们可以给出一个简洁的证明来巩固这个结论。假设图 $G=(V, E)$ 是无三角形的，其中 $|V|=n, |E|=m$。对于图中任意一条边 $(u, v) \in E$，顶点 $u$ 的邻居集合 $N(u)$ 和顶点 $v$ 的邻居集合 $N(v)$ 必须是不相交的。否则，如果存在一个顶点 $w \in N(u) \cap N(v)$，那么 $\{u, v, w\}$ 将构成一个三角形。因此，对于任意边 $(u,v)$，我们有 $d(u) + d(v) \le n$，其中 $d(x)$ 是顶点 $x$ 的度。

将这个不等式对所有 $m$ 条边求和：
$$ \sum_{(u,v) \in E} (d(u) + d(v)) \le mn $$
左侧的和式可以从每个顶点的角度重新计算。顶点 $v$ 在图中与 $d(v)$ 个邻居相连，因此它会出现在 $d(v)$ 条边的度数和中。每次出现，它都贡献自己的度 $d(v)$。所以，左侧的和等于 $\sum_{v \in V} d(v)^2$。
$$ \sum_{v \in V} d(v)^2 \le mn $$
根据柯西-施瓦茨不等式，我们有 $(\sum d(v))^2 \le n \sum d(v)^2$。又根据[握手引理](@entry_id:261183)，$\sum d(v) = 2m$。将这些结合起来：
$$ (2m)^2 \le n \left(\sum_{v \in V} d(v)^2\right) \le n(mn) = n^2m $$
$$ 4m^2 \le n^2m $$
当 $m > 0$ 时，两边同除以 $m$ 得到 $4m \le n^2$，即 $m \le \frac{n^2}{4}$。由于 $m$ 是整数，所以 $m \le \lfloor \frac{n^2}{4} \rfloor$。

### [图兰定理](@entry_id:271028)：从三角形到完全图

[曼特尔定理](@entry_id:260839)优雅地解决了禁止 $K_3$ 的问题。一个自然的问题是：如果禁止更大的完全图，比如 $K_4$ (四个顶点两两相连)或更一般的 $K_{r+1}$，情况会怎样？1941年，Paul Turán 完美地回答了这个问题，他的结果是整个[极值图论](@entry_id:275134)的开端。

Turán 推广了曼特尔的想法。要构造一个不含 $K_{r+1}$ 且边数尽可能多的图，我们可以将 $n$ 个顶点划分成 $r$ 个部分，并规定只有不同部分的顶点之间才能有边。这样的图被称为**完全 $r$-部图** (complete $r$-partite graph)。根据[鸽巢原理](@entry_id:268698)，任何一个包含 $r+1$ 个顶点的集合，必然至少有两个顶点落在同一个划分中。由于同一划分内部没有边，这两个顶点不相连，因此这个 $r+1$ 顶点的集合无法构成 $K_{r+1}$。所以，任何完全 $r$-部图都是 $K_{r+1}$-free 的 [@problem_id:1551481]。

为了使边数最大化，我们同样需要让这 $r$ 个划分的大小尽可能均衡。道理与二部图的情况完全相同：如果任意两个划分的大小相差2或更多，我们总能通过将一个顶点从较大的划分移动到较小的划分来增加总边数 [@problem_id:1382580] [@problem_id:1551469]。这种最优的、划分最均衡的完全 $r$-部图被称为**[图兰图](@entry_id:274830)** (Turán graph)，记为 $T(n, r)$。

**[图兰图](@entry_id:274830) $T(n, r)$ 的构造:**
要将 $n$ 个顶点划分成 $r$ 个大小尽可能相等的部分，我们可以用 $n$ 除以 $r$：$n = qr + k$，其中 $q$ 是商，$k$ 是余数 ($0 \le k  r$)。那么，划分将由 $k$ 个大小为 $q+1$ 的[部分和](@entry_id:162077) $r-k$ 个大小为 $q$ 的部分组成。

例如，要为一个包含10个服务器的集群设计一个分成3个“区域”的网络，并最大化跨区域连接数，我们实际上是在寻找 $T(10, 3)$ 的划分。这里 $n=10, r=3$。$10 = 3 \times 3 + 1$，所以我们应该有 $1$ 个大小为 $3+1=4$ 的区域和 $2$ 个大小为 $3$ 的区域。最优的区域大小组合是 $(4, 3, 3)$ [@problem_id:1551469]。

另一个例子是 $T(50, 49)$。这里 $n=50, r=49$。$50 = 1 \times 49 + 1$，所以划分由 $1$ 个大小为 $1+1=2$ 的部分和 $48$ 个大小为 $1$ 的部分组成 [@problem_id:1551520]。

现在我们可以陈述图兰的完整定理了。

**[图兰定理](@entry_id:271028) (Turán's Theorem, 1941):**
对于任意整数 $n, r \ge 1$，任何不包含 $K_{r+1}$ 作为子图的 $n$ 顶点[简单图](@entry_id:274882) $G$ 中，边数的最大值由[图兰图](@entry_id:274830) $T(n, r)$ 实现。这个最大边数记为 $t(n, r)$。此外，$T(n, r)$ 是唯一满足此条件的极值图。

### [图兰图](@entry_id:274830)的性质与证明思路

[图兰图](@entry_id:274830)的结构非常规则，这使得我们可以方便地分析其性质。

**度数 (Degrees):** 在[图兰图](@entry_id:274830) $T(n, r)$ 中，一个[顶点的度](@entry_id:264944)数取决于它所在划分的大小。如果一个顶点 $v$ 位于一个大小为 $s$ 的划分中，那么它将与所有不在这个划分中的 $n-s$ 个顶点相连。因此，$\text{deg}(v) = n-s$。在 $T(50, 49)$ 的例子中，我们有一个大小为2的划分和48个大小为1的划分。因此，图中存在2个度为 $50-2=48$ 的顶点和48个度为 $50-1=49$ 的顶点 [@problem_id:1551520]。

**[团数](@entry_id:272714)与[独立数](@entry_id:260943) (Clique and Independence Numbers):**
图 $G$ 的**[团数](@entry_id:272714)** $\omega(G)$ 是 $G$ 中最大完全子图的顶点数。正如我们之前讨论的，在 $T(n, r)$ 中，任何团最多只能从 $r$ 个划分中各取一个顶点，所以 $\omega(T(n, r)) = r$。这直接证明了 $T(n, r)$ 是 $K_{r+1}$-free 的 [@problem_id:1551481]。

图 $G$ 的**[独立数](@entry_id:260943)** $\alpha(G)$ 是指 $G$ 中最大的顶点[子集](@entry_id:261956)，其中任意两顶点之间都没有边。在 $T(n, r)$ 中，任何一个划分内的所有顶点都是互不相连的，因此它们构成一个[独立集](@entry_id:270749)。要找到最大的[独立集](@entry_id:270749)，我们只需找到最大的那个划分。根据 $T(n, r)$ 的构造，最大划分的大小为 $\lceil \frac{n}{r} \rceil$。所以，$\alpha(T(n, r)) = \lceil \frac{n}{r} \rceil$。

这两个概念通过图的**[补图](@entry_id:267681)** ($\overline{G}$) 优美地联系在一起。对于任何图 $G$，它的[独立集](@entry_id:270749)对应其补图 $\overline{G}$ 中的一个团，反之亦然。因此，$\alpha(G) = \omega(\overline{G})$。
$\overline{T(n, r)}$ 的结构是什么？在 $T(n, r)$ 中，边只存在于不同划分之间。因此，在 $\overline{T(n, r)}$ 中，边只存在于相同划分*内部*。这意味着 $\overline{T(n, r)}$ 是 $r$ 个互不相连的[完全图](@entry_id:266483)（团）的不相交并。这些团的大小正好是 $T(n, r)$ 的划分大小。因此，$\overline{T(n, r)}$ 中的[最大团](@entry_id:262975)就是这些团中最大的那个，其大小为 $\lceil \frac{n}{r} \rceil$。这与我们直接计算得到的 $\alpha(T(n, r))$ 完全一致，验证了 $\alpha(T(n,r)) = \omega(\overline{T(n,r)}) = \lceil \frac{n}{r} \rceil$ [@problem_id:1513632]。

**[图兰定理](@entry_id:271028)的证明思路:**
[图兰定理](@entry_id:271028)有多种证明方法，其中一种经典的思路是基于[数学归纳法](@entry_id:138544)。另一个思路则依赖于一个关于[图密度](@entry_id:268958)的引理。这个引理揭示了一个深刻的性质：一个足够稠密的图必然包含一个同样稠密的[子图](@entry_id:273342)。

考虑一个迭代过程：从一个图 $G_n$ 开始，反复移除图中度数最小的顶点，直到剩下 $k$ 个顶点，得到图 $G_k$ [@problem_id:1551501]。可以证明，在这个过程中，图的[边密度](@entry_id:271104)不会下降得太快。具体来说，如果 $G_n$ 有 $n$ 个顶点和 $m$ 条边，那么最终剩下的 $G_k$ 至少有 $m \frac{k(k-1)}{n(n-1)}$ 条边。

这个引理是如何帮助证明[图兰定理](@entry_id:271028)的呢？假设有一个图 $G$ 的边数 $m  t(n, r)$。我们的目标是证明它包含一个 $K_{r+1}$。我们可以利用上述引理，取 $k=r+1$。如果能证明 $m  t(n, r)$ 蕴含着 $e_{r+1}  t(r+1, r) = \binom{r+1}{2} - 1$，那么就意味着 $G$ 中存在一个 $r+1$ 个顶点的子图，其边数多于 $\binom{r+1}{2}-1$，那它只能是 $K_{r+1}$ 本身，边数为 $\binom{r+1}{2}$。通过精细的代数推导，这条证明路径是可行的，它揭示了[图的平均度](@entry_id:270076)和[最小度](@entry_id:273557)在强制[子图](@entry_id:273342)出现中所扮演的关键角色。

### 总结与展望

[图兰定理](@entry_id:271028)是[极值图论](@entry_id:275134)的起点和典范。它精确地刻画了在禁止 $K_{r+1}$ 的条件下，一个图所能容纳的最大边数，并给出了唯一的[极值](@entry_id:145933)图结构——[图兰图](@entry_id:274830) $T(n,r)$。其核心机制在于“均衡划分”原则：将顶点划分为多个[独立集](@entry_id:270749)，并让这些[独立集](@entry_id:270749)的大小尽可能接近，从而最大化它们之间的连接数。

从[曼特尔定理](@entry_id:260839)的简单直观到[图兰定理](@entry_id:271028)的深刻推广，我们看到一个数学思想如何通过抽象和泛化获得更强大的生命力。图兰的工作开启了一个广阔的研究领域，学者们开始探索禁止其他各种子图（如圈、立方体图等）时的极值问题。这些问题往往比禁止完全图要困难得多，但它们共同构成了现代图论中一个充满挑战与美的分支。
{"hands_on_practices": [{"introduction": "分配问题是组合优化领域的基石之一，其应用范围从物流管理延伸至生物学。第一个练习 [@problem_id:1555315] 展示了一个典型场景：将抗体候选株与病毒抗原进行配对。我们的目标是最大化总“收益”（即结合亲和力分数之和），这正是寻找二分图中最大权重完美匹配的直接应用。", "problem": "一个病毒学实验室的研究团队正在开发一组新的抗病毒疗法。他们设计了四种不同的候选抗体，分别表示为 Ab-1、Ab-2、Ab-3 和 Ab-4。他们希望测试这些候选抗体对抗四种不同病毒抗原变体的效力，这些变体分别表示为 Ag-A、Ag-B、Ag-C 和 Ag-D。\n\n对于每一种可能的抗体与抗原的配对，都通过实验确定了一个“结合亲和力分数”。分数越高，表示结合越强、越有效。这些分数总结在下面的亲和力矩阵中，其中行对应于候选抗体，列对应于抗原变体。\n\n$$\n\\begin{array}{c|cccc}\n  \\text{Ag-A}  \\text{Ag-B}  \\text{Ag-C}  \\text{Ag-D} \\\\\n\\hline\n\\text{Ab-1}  15  12  13  10 \\\\\n\\text{Ab-2}  11  14  16  12 \\\\\n\\text{Ab-3}  13  11  15  14 \\\\\n\\text{Ab-4}  10  13  12  11 \\\\\n\\end{array}\n$$\n\n为了简化下一阶段的实验，该团队需要创建一个最优分配，将每个候选抗体与一个且仅一个独特的抗原变体配对。目标是使所选四个配对的结合亲和力分数之和最大化。\n\n在这种最优分配中，可以实现的最大可能总结合亲和力分数是多少？", "solution": "我们将最优配对问题建模为一个分配问题。设抗体由 $i \\in \\{1,2,3,4\\}$ 索引，抗原由 $j \\in \\{1,2,3,4\\}$ 索引。一个分配对应于 $\\{1,2,3,4\\}$ 的一个排列 $\\sigma$，其中抗体 $i$ 与抗原 $\\sigma(i)$ 配对。对于排列 $\\sigma$，总结合亲和力分数为\n$$\nS(\\sigma) = \\sum_{i=1}^{4} a_{i,\\sigma(i)},\n$$\n其中 $a_{ij}$ 是给定的亲和力矩阵中的元素：\n$$\n[a_{ij}] =\n\\begin{pmatrix}\n15  12  13  10\\\\\n11  14  16  12\\\\\n13  11  15  14\\\\\n10  13  12  11\n\\end{pmatrix}.\n$$\n我们计算所有 $4! = 24$ 个排列 $\\sigma$ 的 $S(\\sigma)$ 值：\n$$\n(1,2,3,4):\\; 15+14+15+11=55,\\quad\n(1,2,4,3):\\; 15+14+14+12=55,\n$$\n$$\n(1,3,2,4):\\; 15+16+11+11=53,\\quad\n(1,3,4,2):\\; 15+16+14+13=58,\n$$\n$$\n(1,4,2,3):\\; 15+12+11+12=50,\\quad\n(1,4,3,2):\\; 15+12+15+13=55,\n$$\n$$\n(2,1,3,4):\\; 12+11+15+11=49,\\quad\n(2,1,4,3):\\; 12+11+14+12=49,\n$$\n$$\n(2,3,1,4):\\; 12+16+13+11=52,\\quad\n(2,3,4,1):\\; 12+16+14+10=52,\n$$\n$$\n(2,4,1,3):\\; 12+12+13+12=49,\\quad\n(2,4,3,1):\\; 12+12+15+10=49,\n$$\n$$\n(3,1,2,4):\\; 13+11+11+11=46,\\quad\n(3,1,4,2):\\; 13+11+14+13=51,\n$$\n$$\n(3,2,1,4):\\; 13+14+13+11=51,\\quad\n(3,2,4,1):\\; 13+14+14+10=51,\n$$\n$$\n(3,4,1,2):\\; 13+12+13+13=51,\\quad\n(3,4,2,1):\\; 13+12+11+10=46,\n$$\n$$\n(4,1,2,3):\\; 10+11+11+12=44,\\quad\n(4,1,3,2):\\; 10+11+15+13=49,\n$$\n$$\n(4,2,1,3):\\; 10+14+13+12=49,\\quad\n(4,2,3,1):\\; 10+14+15+10=49,\n$$\n$$\n(4,3,1,2):\\; 10+16+13+13=52,\\quad\n(4,3,2,1):\\; 10+16+11+10=47.\n$$\n这些值中的最大值为 $58$，由排列 $(1,3,4,2)$ 实现，即 Ab-1 与 Ag-A 配对，Ab-2 与 Ag-C 配对，Ab-3 与 Ag-D 配对，以及 Ab-4 与 Ag-B 配对。", "answer": "$$\\boxed{58}$$", "id": "1555315"}, {"introduction": "许多优化问题致力于最大化收益，但同样多的现实世界任务旨在最小化成本。这个练习 [@problem_id:1555349] 将我们的视角转向成本最小化，要求我们将计算任务分配给服务器。通过找出总能耗最低的分配方案，你将解决一个最小权重完美匹配问题，它与前一个最大化任务恰好相对。", "problem": "一个高性能计算集群的数据中心管理员需要将四个专门的计算任务分配给四台不同的服务器。这四台服务器分别名为 Alpha、Beta、Gamma 和 Delta，它们具有不同的硬件架构，导致每个任务的能耗也不同。管理员的目标是创建任务到服务器的一对一分配，以最小化运行所有四个任务的总能耗。这四个任务分别是：量子模拟（QS）、蛋白质折叠模拟（PF）、流体动力学计算（FD）和密码学分析（CA）。\n\n每个任务-服务器配对的预计能耗（单位：千瓦时，kWh）在以下列表中给出。\n- **服务器 Alpha：** QS 10 kWh，PF 12 kWh，FD 19 kWh，CA 11 kWh。\n- **服务器 Beta：** QS 5 kWh，PF 10 kWh，FD 7 kWh，CA 8 kWh。\n- **服务器 Gamma：** QS 12 kWh，PF 14 kWh，FD 13 kWh，CA 11 kWh。\n- **服务器 Delta：** QS 8 kWh，PF 15 kWh，FD 11 kWh，CA 9 kWh。\n\n每台服务器必须正好分配一个任务，每个任务也必须正好在一台服务器上运行。完成所有四个任务的最小可能总能耗是多少？请用 kWh 作答。", "solution": "设服务器集合为 $\\{\\text{Alpha}, \\text{Beta}, \\text{Gamma}, \\text{Delta}\\}$，任务集合为 $\\{\\text{QS}, \\text{PF}, \\text{FD}, \\text{CA}\\}$。令 $C(s,j)$ 表示在服务器 $s$ 上运行任务 $j$ 的能量成本（单位：kWh）。目标是最小化总能量\n$$\nE=\\sum_{s} C\\bigl(s,\\sigma(s)\\bigr),\n$$\n其中 $\\sigma$ 是从服务器到任务的所有一对一分配。由于有四台服务器和四个任务，这等同于检查所有排列组合，但我们可以通过限定运行 QS 的服务器，然后通过直接枚举来解决剩下的 $3\\times 3$ 子问题，从而减少工作量。\n\n情况 1：将 QS 分配给 Beta，因此 $C(\\text{Beta},\\text{QS})=5$。对于 $\\{\\text{Alpha}, \\text{Gamma}, \\text{Delta}\\}$ 和 $\\{\\text{PF}, \\text{FD}, \\text{CA}\\}$ 的剩余子问题，产生以下最小总和：\n- 如果 $\\text{CA}\\to\\text{Delta}$：$12+13+9=34$。\n- 如果 $\\text{CA}\\to\\text{Alpha}$：$14+19+11=44$（如果优化配对则为 $12+13+11=36$），在可行配对中的最小值为如上所述的 $34$。\n因此，剩余的最小总和是 $34$，总计为 $5+34=39$。\n\n具体来说，枚举最佳配对：\n- $\\text{CA}\\to\\text{Delta}$，$\\text{PF}\\to\\text{Alpha}$，$\\text{FD}\\to\\text{Gamma}$ 得到 $12+13+9=34$，因此总计为 $5+34=39$。\n在这种情况下，没有其他配对能改善 $39$。\n\n情况 2：将 QS 分配给 Delta，因此 $C(\\text{Delta},\\text{QS})=8$。对于 $\\{\\text{Alpha}, \\text{Beta}, \\text{Gamma}\\}$ 和 $\\{\\text{PF}, \\text{FD}, \\text{CA}\\}$ 的剩余子问题：\n- 选择 $\\text{FD}\\to\\text{Beta}$，成本为 $7$，然后分配 $\\text{PF}\\to\\text{Alpha}$ 和 $\\text{CA}\\to\\text{Gamma}$，这两项的成本为 $12+11=23$。子问题总和为 $7+23=30$，总计为 $8+30=38$。\n检查此情况下的其他选择：\n- 如果 $\\text{FD}\\to\\text{Beta}$ 但交换另外两个，$7+11+14=32$，总计 $8+32=40$。\n- 如果 $\\text{CA}\\to\\text{Beta}$，最佳的完成方式是 $12+13$，得到 $8+(8+12+13)=41$。\n- 如果 $\\text{PF}\\to\\text{Beta}$，最佳的完成方式是 $11+11$，得到 $8+(10+11+11)=40$。\n因此，这种情况下的最小值是 $38$。\n\n情况 3：将 QS 分配给 Alpha，因此 $C(\\text{Alpha},\\text{QS})=10$。对于 $\\{\\text{Beta}, \\text{Gamma}, \\text{Delta}\\}$ 和 $\\{\\text{PF}, \\text{FD}, \\text{CA}\\}$ 的剩余子问题，最小值可以通过例如 $\\text{FD}\\to\\text{Beta}$，$\\text{PF}\\to\\text{Gamma}$，$\\text{CA}\\to\\text{Delta}$ 的分配得到，子问题总和为 $7+14+9=30$，总计为 $10+30=40$。这种情况下的其他配对不会低于 $40$。\n\n情况 4：将 QS 分配给 Gamma，因此 $C(\\text{Gamma},\\text{QS})=12$。对于 $\\{\\text{Alpha}, \\text{Beta}, \\text{Delta}\\}$ 和 $\\{\\text{PF}, \\text{FD}, \\text{CA}\\}$，选择 $\\text{FD}\\to\\text{Beta}$，$\\text{PF}\\to\\text{Alpha}$，$\\text{CA}\\to\\text{Delta}$，子问题总和为 $7+12+9=28$，总计为 $12+28=40$。在这种情况下，没有其他选择能改善 $40$。\n\n汇总各种情况的最小值，我们得到的总和为 $39$、$38$、$40$ 和 $40$。因此，可能的最小总能耗是\n$$\n\\min\\{39,38,40,40\\}=38.\n$$\n实现 $38$ kWh 的一个最优分配是 $\\text{QS}\\to\\text{Delta}$，$\\text{FD}\\to\\text{Beta}$，$\\text{PF}\\to\\text{Alpha}$，$\\text{CA}\\to\\text{Gamma}$，得到 $8+7+12+11=38$。", "answer": "$$\\boxed{38}$$", "id": "1555349"}, {"introduction": "现实世界的问题常常带有超出基本分配模型的额外复杂性。这个练习 [@problem_id:1555326] 就引入了这样的细节：在一个团队重组情境中，调动员工会产生额外的成本。此问题要求你首先构建一个考虑了这些成本的“有效得分”矩阵，然后解决一个更广义的分配问题，从而展示如何调整核心框架以适应更复杂的约束条件。", "problem": "一家科技公司正在重组其工程部门，该部门由五位核心工程师组成：Evelyn、Frank、Grace、Heidi 和 Ivan。新的结构设有三个项目团队：Apollo 团队（2 个职位）、Boreas 团队（2 个职位）和 Cronos 团队（1 个职位）。这五个可用职位可以表示为 $A_1, A_2, B_1, B_2, C_1$。\n\n每位工程师对于每个团队都有一个“技能匹配度”分数，该分数代表了他们的潜在生产力和贡献。这些分数如下表所示：\n\n| 工程师 | Apollo 团队 | Boreas 团队 | Cronos 团队 |\n|----------|-------------|-------------|--------------|\n| Evelyn   | 25          | 40          | 50           |\n| Frank    | 30          | 35          | 45           |\n| Grace    | 55          | 20          | 30           |\n| Heidi    | 40          | 60          | 35           |\n| Ivan     | 25          | 30          | 70           |\n\n对于被分配到某个团队的工程师，他们对于该团队中任何可用职位的技能匹配度分数都是相同的。\n\n目前，工程师的分配情况如下：\n- Apollo 团队：Evelyn, Frank\n- Boreas 团队：Grace, Heidi\n- Cronos 团队：Ivan\n\n重组要求将所有五位工程师重新分配到五个可用职位上，以组建新的团队。将一名工程师从他们当前的团队调动到另一个团队会产生一笔干扰成本，该成本以扣除 15 分的形式体现。这笔罚分会从该工程师针对新分配职位的技能匹配度分数中扣除。如果一名工程师被分配到一个新职位但仍留在同一团队，则不会产生罚分。\n\n一个新分配方案的总价值是所有五位工程师的有效分数之和，其中，一位工程师的有效分数是他们对所分配团队的技能匹配度减去任何适用的罚分。\n\n你的任务是确定新分配方案可能的最大总价值。", "solution": "设团队为 $A$ (Apollo)、$B$ (Boreas) 和 $C$ (Cronos)。对于每位工程师 $i$ 和每个团队 $T\\in\\{A,B,C\\}$，设 $s_{iT}$ 表示基础技能匹配度分数，并设 $T_{i}^{0}$ 表示工程师 $i$ 当前所在的团队。将工程师 $i$ 分配到团队 $T$ 的有效分数 $e_{iT}$ 为\n$$\ne_{iT}=\\begin{cases}\ns_{iT},  T=T_{i}^{0},\\\\\ns_{iT}-15,  T\\neq T_{i}^{0}.\n\\end{cases}\n$$\n根据数据和当前分配（Evelyn 和 Frank 在 $A$ 队，Grace 和 Heidi 在 $B$ 队，Ivan 在 $C$ 队），有效分数如下：\n- Evelyn: $e_{EA}=25$, $e_{EB}=40-15=25$, $e_{EC}=50-15=35$.\n- Frank: $e_{FA}=30$, $e_{FB}=35-15=20$, $e_{FC}=45-15=30$.\n- Grace: $e_{GA}=55-15=40$, $e_{GB}=20$, $e_{GC}=30-15=15$.\n- Heidi: $e_{HA}=40-15=25$, $e_{HB}=60$, $e_{HC}=35-15=20$.\n- Ivan: $e_{IA}=25-15=10$, $e_{IB}=30-15=15$, $e_{IC}=70$.\n\n我们必须将恰好两名工程师分配到 $A$ 队，两名分配到 $B$ 队，一名分配到 $C$ 队，以使总有效分数最大化。\n\n按分配到 $C$ 队的工程师分情况讨论。\n\n情况 1：$C=\\text{Ivan}$。那么剩下的工程师 $\\{\\text{Evelyn},\\text{Frank},\\text{Grace},\\text{Heidi}\\}$ 必须填补两个 $A$ 队和两个 $B$ 队的空位。他们在 $A$/$B$ 队的有效分数是：\n- Evelyn: $(A,B)=(25,25)$,\n- Frank: $(30,20)$,\n- Grace: $(40,20)$,\n- Heidi: $(25,60)$.\n选择哪两个人去 $A$ 队（其余人去 $B$ 队）；计算每种选择下这四个人的总分：\n- $A=\\{E,F\\}$: $25+30+(20+60)=135$,\n- $A=\\{E,G\\}$: $25+40+(20+60)=145$,\n- $A=\\{E,H\\}$: $25+25+(20+20)=90$,\n- $A=\\{F,G\\}$: $30+40+(25+60)=155$,\n- $A=\\{F,H\\}$: $30+25+(25+20)=100$,\n- $A=\\{G,H\\}$: $40+25+(25+20)=110$.\n这四人的最高分是 $155$，在 $A=\\{\\text{Frank},\\text{Grace}\\}$ 且 $B=\\{\\text{Evelyn},\\text{Heidi}\\}$ 时取得。加上在 $C$ 队的 Ivan，总分为\n$$\n155+e_{IC}=155+70=225.\n$$\n\n情况 2：$C=\\text{Evelyn}$。剩下的 $\\{\\text{Frank},\\text{Grace},\\text{Heidi},\\text{Ivan}\\}$ 在 $(A,B)$ 队的分数为：\n- Frank $(30,20)$, Grace $(40,20)$, Heidi $(25,60)$, Ivan $(10,15)$.\n评估选择两人到 $A$ 队的各种情况：\n- $A=\\{F,G\\}$: $30+40+(60+15)=145$,\n- $A=\\{F,H\\}$: $30+25+(20+15)=90$,\n- $A=\\{F,I\\}$: $30+10+(20+60)=120$,\n- $A=\\{G,H\\}$: $40+25+(20+15)=100$,\n- $A=\\{G,I\\}$: $40+10+(20+60)=130$,\n- $A=\\{H,I\\}$: $25+10+(20+20)=75$.\n这四人的最高分是 $145$。加上 $e_{EC}=35$ 得到的总分是 $180$。\n\n情况 3：$C=\\text{Frank}$。剩下的 $\\{\\text{Evelyn},\\text{Grace},\\text{Heidi},\\text{Ivan}\\}$ 在 $(A,B)$ 队的分数为：\n- Evelyn $(25,25)$, Grace $(40,20)$, Heidi $(25,60)$, Ivan $(10,15)$.\n评估选择两人到 $A$ 队的各种情况：\n- $A=\\{E,G\\}$: $25+40+(60+15)=140$,\n- $A=\\{E,H\\}$: $25+25+(20+15)=85$,\n- $A=\\{E,I\\}$: $25+10+(20+60)=115$,\n- $A=\\{G,H\\}$: $40+25+(25+15)=105$,\n- $A=\\{G,I\\}$: $40+10+(25+60)=135$,\n- $A=\\{H,I\\}$: $25+10+(25+20)=80$.\n这四人的最高分是 $140$。加上 $e_{FC}=30$ 得到的总分是 $170$。\n\n情况 4：$C=\\text{Grace}$。剩下的 $\\{\\text{Evelyn},\\text{Frank},\\text{Heidi},\\text{Ivan}\\}$ 在 $(A,B)$ 队的分数为：\n- Evelyn $(25,25)$, Frank $(30,20)$, Heidi $(25,60)$, Ivan $(10,15)$.\n评估选择两人到 $A$ 队的各种情况：\n- $A=\\{E,F\\}$: $25+30+(60+15)=130$,\n- $A=\\{E,H\\}$: $25+25+(20+15)=85$,\n- $A=\\{E,I\\}$: $25+10+(20+60)=115$,\n- $A=\\{F,H\\}$: $30+25+(25+15)=95$,\n- $A=\\{F,I\\}$: $30+10+(25+60)=125$,\n- $A=\\{H,I\\}$: $25+10+(25+20)=80$.\n这四人的最高分是 $130$。加上 $e_{GC}=15$ 得到的总分是 $145$。\n\n情况 5：$C=\\text{Heidi}$。剩下的 $\\{\\text{Evelyn},\\text{Frank},\\text{Grace},\\text{Ivan}\\}$ 在 $(A,B)$ 队的分数为：\n- Evelyn $(25,25)$, Frank $(30,20)$, Grace $(40,20)$, Ivan $(10,15)$.\n评估选择两人到 $A$ 队的各种情况：\n- $A=\\{E,F\\}$: $25+30+(20+15)=90$,\n- $A=\\{E,G\\}$: $25+40+(20+15)=100$,\n- $A=\\{E,I\\}$: $25+10+(20+20)=75$,\n- $A=\\{F,G\\}$: $30+40+(25+15)=110$,\n- $A=\\{F,I\\}$: $30+10+(25+20)=85$,\n- $A=\\{G,I\\}$: $40+10+(25+20)=95$.\n这四人的最高分是 $110$。加上 $e_{HC}=20$ 得到的总分是 $130$。\n\n比较所有情况，最大总分是 $225$，在 $C=\\text{Ivan}$ 且在剩下的四人中，$A=\\{\\text{Frank},\\text{Grace}\\}$ 且 $B=\\{\\text{Evelyn},\\text{Heidi}\\}$ 时达到。", "answer": "$$\\boxed{225}$$", "id": "1555326"}]}
{"hands_on_practices": [{"introduction": "可比图的一个核心应用是为真实世界中的依赖关系或层级结构建模。本练习提供了一个涉及软件模块开发的实践场景，要求你将一组依赖规则（一个偏序集）转化为相应的可比图。通过这个练习，你将亲手实践从偏序关系构建图的过程，从而巩固可比图的基本定义。[@problem_id:1490535]", "problem": "一个软件工程团队正在开发一个由六个不同模块组成的系统：Alpha、Beta、Gamma、Delta、Epsilon 和 Zeta。开发过程受到一组依赖关系的约束，这些依赖关系定义了一个偏序集 $(S, \\preceq)$，其中 $S = \\{\\text{Alpha, Beta, Gamma, Delta, Epsilon, Zeta}\\}$。关系 $M_1 \\preceq M_2$ 表示模块 $M_1$ 必须在模块 $M_2$ 之前或同时完成。基本依赖关系如下：\n\n- Alpha 是 Beta 和 Gamma 的先决条件。\n- Beta 是 Delta 和 Epsilon 的先决条件。\n- Gamma 是 Epsilon 的先决条件。\n- Delta 是 Zeta 的先决条件。\n- Epsilon 是 Zeta 的先决条件。\n\n完整的依赖关系 $\\preceq$ 是 $S$ 上包含上述所有基本依赖关系，且满足自反性、传递性的最小关系。\n\n为了可视化项目结构，团队决定构建一个*可比图*。在这种图中，顶点是模块，任意两个不同的模块 $M_i$ 和 $M_j$ 之间有一条边，当且仅当它们在偏序集中是可比的——也就是说，如果 $M_1 \\preceq M_2$ 或 $M_2 \\preceq M_1$。\n\n确定此模块集所生成的可比图中的总边数。", "solution": "设 $S=\\{\\text{Alpha},\\text{Beta},\\text{Gamma},\\text{Delta},\\text{Epsilon},\\text{Zeta}\\}$。为简洁起见，记 $A=\\text{Alpha}$，$B=\\text{Beta}$，$G=\\text{Gamma}$，$D=\\text{Delta}$，$E=\\text{Epsilon}$ 和 $Z=\\text{Zeta}$。给定的覆盖关系为\n$$A\\preceq B,\\quad A\\preceq G,\\quad B\\preceq D,\\quad B\\preceq E,\\quad G\\preceq E,\\quad D\\preceq Z,\\quad E\\preceq Z.$$\n通过传递性，我们推导出以下附加关系\n$$A\\preceq D\\ (\\text{通过 }A\\preceq B\\preceq D),\\quad A\\preceq E\\ (\\text{通过 }A\\preceq B\\preceq E\\ \\text{和 }A\\preceq G\\preceq E),$$\n$$B\\preceq Z\\ (\\text{通过 }B\\preceq D\\preceq Z\\ \\text{和 }B\\preceq E\\preceq Z),\\quad G\\preceq Z\\ (\\text{通过 }G\\preceq E\\preceq Z),$$\n$$A\\preceq Z\\ (\\text{通过 }A\\preceq D\\preceq Z\\ \\text{和 }A\\preceq E\\preceq Z).$$\n因此 $Z$ 是最大元，因为对于所有 $X\\in S$ 都有 $X\\preceq Z$。同样，$A$ 在所有其他元素之下：$A\\preceq B,G,D,E,Z$。\n\n为了构建可比图，我们需要找出所有可比的无序对。找出不可比的对会更方便。根据上述关系：\n- $B$ 和 $G$ 是不可比的（没有链能导出 $B\\preceq G$ 或 $G\\preceq B$）。\n- $D$ 和 $E$ 是不可比的（它们都在 $B$ 之后，但彼此之间没有先后关系）。\n- $D$ 和 $G$ 是不可比的（没有链能导出 $D\\preceq G$ 或 $G\\preceq D$）。\n所有其他的对都是可比的，因为：\n- $A$ 与每个元素都可比（$A\\preceq$ 所有元素）。\n- $B$ 与 $A,D,E,Z$ 可比。\n- $G$ 与 $A,E,Z$ 可比。\n- $D$ 与 $A,B,Z$ 可比。\n- $E$ 与 $A,B,G,Z$ 可比。\n- $Z$ 与所有元素都可比。\n\n总共有 $\\binom{6}{2}$ 个无序对，其中正好有 $3$ 个不可比对。因此，可比图中的边数为\n$$\\binom{6}{2}-3=15-3=12.$$\n通过对度数求和并避免重复计数，直接计算可以证实这一点：从 $A$ 出发有 $5$ 条边，从 $B$ 出发增加 $3$ 条（到 $D,E,Z$），从 $G$ 出发增加 $2$ 条（到 $E,Z$），从 $D$ 出发增加 $1$ 条（到 $Z$），从 $E$ 出发增加 $1$ 条（到 $Z$），总计 $5+3+2+1+1=12$。", "answer": "$$\\boxed{12}$$", "id": "1490535"}, {"introduction": "除了从偏序集构建，我们也可以从另一个角度理解可比图：一个图是可比图，当且仅当它的边可以被赋予一个传递方向。本练习将探讨一个常见图——4-环图 ($C_4$)——是否为可比图。通过寻找其传递定向，你将发现传递性规则对图结构施加的关键约束，从而加深对这些定向特性的理解。[@problem_id:1490517]", "problem": "在图论中，一个无向图 $G=(V, E)$ 的 **定向** (orientation) 是通过为 $E$ 中的每条边赋予一个方向而得到的有向图 $D$。如果一个定向 $D$ 满足以下性质，则称其为 **传递的** (transitive)：对于任意三个不同的顶点 $u, v, w \\in V$，如果有向边 $(u, v)$ 和 $(v, w)$ 都存在于 $D$ 中，那么边 $\\{u, w\\}$ 必须存在于原始无向图 $G$ 中，并且在 $D$ 中必须被定向为有向边 $(u, w)$。一个允许至少一个传递定向的图称为可比图 (comparability graph)。\n\n考虑 4-圈图，记为 $C_4$。设其顶点集为 $V = \\{v_1, v_2, v_3, v_4\\}$，其边集为 $E = \\{\\{v_1, v_2\\}, \\{v_2, v_3\\}, \\{v_3, v_4\\}, \\{v_4, v_1\\}\\}$。可以证明 $C_4$ 恰好有两个不同的传递定向。设这两个定向为 $D_1$ 和 $D_2$。\n\n对于每个定向 $D_k$，找出其 **源点** (source vertices) 集合，即入度为零的顶点。设这些集合为 $S_1$ 和 $S_2$，分别对应于 $D_1$ 和 $D_2$。为每个顶点分配一个数值索引，使得顶点 $v_i$ 的索引为 $i$。\n\n计算两个源点集中所有顶点索引的总和。即，计算表达式 $\\left(\\sum_{v \\in S_1} \\text{index}(v)\\right) + \\left(\\sum_{v \\in S_2} \\text{index}(v)\\right)$ 的值。", "solution": "$C_{4}$ 的一个传递定向 $D$ 必须满足：如果 $(u,v)$ 和 $(v,w)$ 是有向边，那么 $\\{u,w\\}$ 必须是 $C_{4}$ 的一条边，并且被定向为 $(u,w)$。在 $C_{4}$ 中，对于圈上任意三个连续的顶点 $v_{i},v_{i+1},v_{i+2}$，$\\{v_{i},v_{i+2}\\}$ 不是一条边。因此，在 $C_{4}$ 的传递定向中，不能出现长度为 2 的有向路径；否则传递性将要求一条不存在的边存在。\n\n在圈上，禁止长度为 2 的有向路径强制要求在每个顶点处，其两条邻接边要么都指向该顶点（入边），要么都从该顶点指出（出边）；否则，一条入边和一条出边将通过该顶点形成一条长度为 2 的有向路径。因此，$C_{4}$ 的顶点必须在圈上交替地成为源点和汇点。这恰好产生两种定向：所有边都从 $\\{v_{1},v_{3}\\}$ 指向 $\\{v_{2},v_{4}\\}$，或者所有边都从 $\\{v_{2},v_{4}\\}$ 指向 $\\{v_{1},v_{3}\\}$。\n\n因此，两个传递定向 $D_{1}$ 和 $D_{2}$ 的源点集分别为 $S_{1}=\\{v_{1},v_{3}\\}$ 和 $S_{2}=\\{v_{2},v_{4}\\}$。使用给定的索引，\n$$\\sum_{v\\in S_{1}}\\text{index}(v)=(1+3)=4,\\qquad \\sum_{v\\in S_{2}}\\text{index}(v)=(2+4)=6.$$\n因此，\n$$\\left(\\sum_{v \\in S_{1}} \\text{index}(v)\\right)+\\left(\\sum_{v \\in S_{2}} \\text{index}(v)\\right)=4+6=10.$$", "answer": "$$\\boxed{10}$$", "id": "1490517"}, {"introduction": "在成功地为一个图定向之后，理解何时无法做到这一点也同样重要。本练习提出了一个经典的反例——5-环图 ($C_5$)，并引导你通过反证法来证明。通过传递约束来推导出逻辑矛盾，这本身是一种强大的解题技巧，同时它也揭示了为何奇环是图成为可比图的根本性障碍。[@problem_id:1490537]", "problem": "一个简单无向图 $G=(V, E)$ 被称为**可比图**（**comparability graph**），如果它的边可以被定向，形成一个**传递的**（**transitive**）有向图 $D=(V, A)$。一个有向图是传递的，如果对于任意三个顶点 $x, y, z \\in V$，有向边（弧）$x \\to y$ 和 $y \\to z$ 的存在蕴含着弧 $x \\to z$ 的存在。该规则的一个重要推论是，如果原始图 $G$ 中不存在边 $\\{x, z\\}$，那么任何有效的定向都不能包含有向路径 $x \\to y \\to z$。\n\n考虑5-圈图 $C_5$，其顶点按循环顺序标记为 $v_1, v_2, v_3, v_4, v_5$。它的边是 $\\{v_1, v_2\\}, \\{v_2, v_3\\}, \\{v_3, v_4\\}, \\{v_4, v_5\\}$ 和 $\\{v_5, v_1\\}$。我们尝试通过做出一个初始选择，将边 $\\{v_1, v_2\\}$ 定向为弧 $v_1 \\to v_2$，来构造 $C_5$ 的一个传递定向。利用传递性的定义来推导这一选择的后果，最终将导致一个逻辑上的矛盾，从而证明 $C_5$ 不是一个可比图。\n\n下列哪个陈述准确地描述了必然会遇到的根本矛盾？\n\nA. 必然会形成一条有向路径 $v_i \\to v_j \\to v_k$，而 $\\{v_i, v_k\\}$ 在 $C_5$ 中不是一条边。\n\nB. 该过程要求同时存在 $v_3 \\to v_4$ 和 $v_4 \\to v_3$。\n\nC. 该过程要求同时存在 $v_5 \\to v_1$ 和 $v_1 \\to v_5$。\n\nD. 唯一可能的定向是一个有向圈 $v_1 \\to v_2 \\to v_3 \\to v_4 \\to v_5 \\to v_1$。\n\nE. 定向可以完成，但得到的有向图不是无圈的。", "solution": "根据定义，无向图 $G=(V,E)$ 的传递定向是将其边定向为一个有向图 $D=(V,A)$，使得只要 $x\\to y$ 和 $y\\to z$ 是 $D$ 中的弧，那么 $x\\to z$ 也必须是 $D$ 中的弧。对无向图的一个推论是：对于 $G$ 中的任何路径 $x-y-z$，如果 $\\{x,z\\}\\notin E$，那么一个传递定向不能包含 $x\\to y\\to z$ 或 $z\\to y\\to x$。\n\n从顶点按循环顺序为 $v_{1},v_{2},v_{3},v_{4},v_{5}$ 的 $C_5$ 开始，并将 $\\{v_{1},v_{2}\\}$ 定向为 $v_{1}\\to v_{2}$。考虑路径 $v_{1}-v_{2}-v_{3}$，其中 $\\{v_{1},v_{3}\\}\\notin E$。为了避免被禁止的模式 $v_{1}\\to v_{2}\\to v_{3}$，我们必须将 $\\{v_{2},v_{3}\\}$ 定向为 $v_{3}\\to v_{2}$。接下来，考虑 $v_{4}-v_{3}-v_{2}$，其中 $\\{v_{4},v_{2}\\}\\notin E$。为了避免 $v_{4}\\to v_{3}\\to v_{2}$，我们必须将 $\\{v_{3},v_{4}\\}$ 定向为 $v_{3}\\to v_{4}$。现在考虑 $v_{5}-v_{1}-v_{2}$，其中 $\\{v_{5},v_{2}\\}\\notin E$。为了避免 $v_{5}\\to v_{1}\\to v_{2}$，我们必须将 $\\{v_{1},v_{5}\\}$ 定向为 $v_{1}\\to v_{5}$。最后，考虑 $v_{5}-v_{4}-v_{3}$，其中 $\\{v_{5},v_{3}\\}\\notin E$ 并且 $\\{v_{3},v_{4}\\}$ 已经被定向为 $v_{3}\\to v_{4}$。为了避免 $v_{3}\\to v_{4}\\to v_{5}$，我们必须将 $\\{v_{4},v_{5}\\}$ 定向为 $v_{5}\\to v_{4}$。\n\n此时，我们有一条有向路径 $v_{1}\\to v_{5}\\to v_{4}$，但是 $\\{v_{1},v_{4}\\}\\notin E$。这正是一种被禁止的构型：一条有向路径 $v_{i}\\to v_{j}\\to v_{k}$，其端点不相邻。等价地，传递性会要求有 $v_{1}\\to v_{4}$，但这是不可能的，因为 $\\{v_{1},v_{4}\\}\\notin E$。因此，这个根本矛盾被选项A准确地描述了。", "answer": "$$\\boxed{A}$$", "id": "1490537"}]}
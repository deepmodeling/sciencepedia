## 引言
[图子式](@entry_id:269769)理论是现代[图论](@entry_id:140799)的一块基石，它通过一系列强大的简化操作，为我们理解和分类复杂的图结构提供了独特的视角。面对无穷无尽的图世界，一个核心问题是：我们能否找到一种系统性的方法来刻画具有某些共同属性的图族？[图子式](@entry_id:269769)理论通过引入“禁子式”的概念，为这个问题提供了深刻而优雅的答案，揭示了图结构背后隐藏的秩序。

本文将带领读者深入探索[图子式](@entry_id:269769)理论的精髓。在“原理与机制”一章中，我们将从删点、删边和关键的[边收缩](@entry_id:265581)操作讲起，建立[图子式](@entry_id:269769)的严格定义，并介绍奠定该理论基础的[Robertson-Seymour定理](@entry_id:272110)。随后，在“应用与跨学科联系”一章中，我们将看到这些抽象的理论如何被用来刻画[平面图](@entry_id:269787)等重要图族，并与图着色、[网络设计](@entry_id:267673)和算法复杂性等领域产生深刻的联系。最后，通过“动手实践”中的练习，您将有机会亲手应用所学知识，巩固对核心概念的理解。

## 原理与机制

在本章中，我们将深入探讨[图子式](@entry_id:269769)理论的核心原理与机制。我们将从定义[图子式](@entry_id:269769)的基本操作开始，逐步揭示这些操作如何共同构建出[图论](@entry_id:140799)中一个深刻而强大的概念。我们将区分[图子式](@entry_id:269769)与[子图](@entry_id:273342)等相关概念，研究子式关系的[传递性](@entry_id:141148)等基本性质，并探讨子式[封闭性质](@entry_id:136899)及其与禁子式表征的联系。最后，我们将介绍[图子式](@entry_id:269769)理论的里程碑式定理，并讨论其在[计算复杂性](@entry_id:204275)方面的启示。

### [图子式](@entry_id:269769)的基本操作

[图子式](@entry_id:269769) (graph minor) 的概念建立在三种[基本图](@entry_id:160617)操作之上：**删点 (vertex deletion)**、**删边 (edge deletion)** 和 **[边收缩](@entry_id:265581) (edge contraction)**。前两种操作直观易懂，而第三种操作——[边收缩](@entry_id:265581)——是子式理论独特之处和强大威力的关键来源。

**删点和删边**：从图 $G$ 中删除一个顶点 $v$ 是指移除 $v$ 及其所有关联的边。删除一条边 $e$ 仅指从图的[边集](@entry_id:267160)中移除 $e$。通过一系列删点和删边操作从图 $G$ 得到的图 $H$ 被称为 $G$ 的一个**[子图](@entry_id:273342) (subgraph)**。显然，任何子图都是其原图的一个子式。

**[边收缩](@entry_id:265581)**：[边收缩](@entry_id:265581)是理解[图子式](@entry_id:269769)的核心。收缩一条边 $e = \{u, v\}$ 意味着将顶点 $u$ 和 $v$ “合并”成一个全新的顶点 $w$。这个新顶点 $w$ 将继承 $u$ 和 $v$ 的所有邻居。也就是说，如果某个顶点 $z$ 在原图中与 $u$ 或 $v$ 相邻（且 $z \neq u, v$），那么在收缩后的图中，$z$ 将与新顶点 $w$ 相邻。

[边收缩](@entry_id:265581)操作会带来一些需要仔细处理的后果。例如，如果原图是**简单图**（即不含重边或自环），收缩操作可能会产生**[多重图](@entry_id:261576)** (multigraph)。这种情况发生在被收缩边的两个端点 $u$ 和 $v$ 拥有一个或多个共同邻居时。考虑一个图 $G$，其顶点集为 $V = \{v_1, v_2, v_3, v_4\}$，[边集](@entry_id:267160)为 $E = \{\{v_1, v_2\}, \{v_1, v_3\}, \{v_2, v_3\}, \{v_3, v_4\}\}$。如果我们收缩边 $\{v_1, v_2\}$，将其合并为新顶点 $w$，那么原有的边 $\{v_1, v_3\}$ 会产生一条新边 $\{w, v_3\}$，同时原有的边 $\{v_2, v_3\}$ 也会产生一条新边 $\{w, v_3\}$。因此，在新图中，$w$ 和 $v_3$ 之间出现了两条平行的边 [@problem_id:1507822]。在简单图的语境下讨论子式时，通常约定将这些新产生的重边合并为一条单一的边。

[边收缩](@entry_id:265581)对图的顶点数和边数有明确的影响。每收缩一条边，图的顶点数减少 1。边数的减少量则取决于被收缩边的两个端点所拥有的共同邻居数量。若端点 $u$ 和 $v$ 的共同邻居数量为 $c = |N(u) \cap N(v)|$，则收缩边 $\{u, v\}$ 会使图的边数减少 $1+c$。其中，“1”代表被收缩的边本身，“c”代表因合并重边而减少的边数 [@problem_id:1507861]。

### 子图、收缩与子式

有了上述操作的定义，我们可以正式定义[图子式](@entry_id:269769)：若图 $H$ 能通过对图 $G$ 进行一系列的删点、删边和[边收缩](@entry_id:265581)操作得到，则称 $H$ 是 $G$ 的一个**子式**。

一个关键的区别在于，子图关系仅涉及删除操作，而子式关系还允许[边收缩](@entry_id:265581)。这意味着每个子图都是一个子式，但反之不然。[边收缩](@entry_id:265581)能够创建出在原图中不存在的邻接关系，从而产生非[子图](@entry_id:273342)的子式。一个经典的例子是，长度为 4 的[圈图](@entry_id:149287) $C_4$ 是一个不含任何三角形（即 $K_3$）作为[子图](@entry_id:273342)的二部图。然而，如果我们收缩 $C_4$ 中的任意一条边，两个原本不相邻的顶点会因为合并而变得相邻，从而形成一个 $K_3$。因此，$K_3$ 是 $C_4$ 的一个子式，但不是其[子图](@entry_id:273342) [@problem_id:1507885]。

我们可以通过一个更具体的例子来感受这些操作的组合效果。考虑三维立方体图 $Q_3$，其顶点为 8 个三位二[进制](@entry_id:634389)串，两顶点间有边当且仅当其二进制表示恰好相差一位。
- **[子图](@entry_id:273342)即子式**：六元环 $C_6$ 是 $Q_3$ 的一个子式，因为它本身就是 $Q_3$ 的一个[子图](@entry_id:273342)（例如，000-001-011-010-110-100-000）。
- **收缩产生新结构**：[完全图](@entry_id:266483) $K_4$ 也是 $Q_3$ 的一个子式。我们可以通过收缩 $Q_3$ 中四条不相交的边（例如 $\{000, 100\}, \{010, 011\}, \{111, 110\}, \{101, 001\}$）来得到 $K_4$。这四组顶点对在收缩后形成四个新顶点，并且可以验证，这四个新顶点之间两两都是相邻的，从而构成了 $K_4$ [@problem_id:1507873]。
- **子式顶点数的限制**：由于子式操作不会增加顶点数量，因此顶点数比 $G$ 多的图不可能是 $G$ 的子式。例如，$C_9$ 有 9 个顶点，而 $Q_3$ 只有 8 个，所以 $C_9$ 不可能是 $Q_3$ 的子式 [@problem_id:1507873]。

除了操作定义，我们还可以用**子式模型 (minor model)** 的角度来理解。$H$ 是 $G$ 的子式，当且仅当在 $G$ 中存在 $|V(H)|$ 个互不相交的、非空的、连通的顶点[子集](@entry_id:261956) $\{V_v\}_{v \in V(H)}$，使得对于 $H$ 中的任意一条边 $\{u, w\}$，在 $G$ 中都存在一条边连接 $V_u$ 和 $V_w$ 中的某个顶点。这组子图 $\{V_v\}$ 就是 $H$ 在 $G$ 中的一个模型。直观上，每个子图 $V_v$ 都可以被“收缩”成 $H$ 中的一个顶点 $v$。

### 子式关系的性质

“是……的子式”这一关系具有一些重要的数学性质，其中最基本的是**传递性 (transitivity)**。如果图 $J$ 是图 $H$ 的子式，而 $H$ 又是图 $G$ 的子式，那么 $J$ 一定是 $G$ 的子式。这是因为从 $G$ 得到 $H$ 的操作序列，可以与从 $H$ 得到 $J$ 的操作序列相连接，形成一个从 $G$ 直接得到 $J$ 的有效操作序列。

这个性质非常有用。例如，已知皮特森图 (Petersen graph) 拥有 $K_5$ 作为其子式。同时，我们知道 $K_4$ 是 $K_5$ 的子式（只需从 $K_5$ 中删除任意一个顶点即可得到）。根据子式关系的传递性，我们可以立即推断出，$K_4$ 也必须是皮特森图的子式。由于 $K_3$ 是 $K_4$ 的子式，我们可以进一步推断出 $K_3$ 也是皮特森图的子式 [@problem_id:1507829]。

[传递性](@entry_id:141148)表明，[图子式](@entry_id:269769)关系在所有有限图的集合上定义了一个**偏序 (partial order)**。这个深刻的结构是[图子式](@entry_id:269769)理论许多核心成果的基石。

### 子式[封闭性质](@entry_id:136899)与禁子式

在图论中，我们常常关心图的某种性质。如果一个图 $G$ 具有性质 $\mathcal{P}$，并且 $G$ 的所有子式也都具有性质 $\mathcal{P}$，那么我们称性质 $\mathcal{P}$ 是**子式封闭的 (minor-closed)**。

一个重要的子式[封闭性质](@entry_id:136899)是**[平面性](@entry_id:274781) (planarity)**。如果一个图是平面的（可以画在平面上且边不[交叉](@entry_id:147634)），那么它的任何子式也一定是平面的。删除操作不会引入交叉，而[边收缩](@entry_id:265581)可以看作是将其端点“拉近”直至重合，同样不会破坏[平面性](@entry_id:274781)。这个性质为我们判断一个图是否为另一个图的子式提供了强大的工具。例如，$K_{3,3}$ 是一个[非平面图](@entry_id:268333)，而立方体图 $Q_3$ 是平面图。由于[平面性](@entry_id:274781)是子式封闭的，任何[平面图](@entry_id:269787)的子式都必须是平面的。因此，我们可以断定 $K_{3,3}$ 不可能是 $Q_3$ 的子式 [@problem_id:1507873]。

然而，并非所有图的性质都是子式封闭的。
- **连通性 (Connectivity)** 就不是子式封闭的。考虑一个[星形图](@entry_id:271558) $K_{1,n}$ ($n \ge 2$)，它显然是连通的。但如果我们执行删点操作，删除其[中心顶点](@entry_id:264579)，得到的图将是 $n$ 个孤立的顶点，这是不连通的。因此，我们找到了一个[连通图](@entry_id:264785)的子式是不连通的例子，证明了连通性不是子式封闭的 [@problem_id:1507813]。
- **二部性 (Bipartiteness)** 也不是子式封闭的。一个图是二部的当且仅当它不包含奇数长度的圈。我们已经看到，$C_4$ 是一个二部图，但通过一次[边收缩](@entry_id:265581)，我们可以得到 $K_3$（一个长度为 3 的[奇圈](@entry_id:271287)），它不是[二部图](@entry_id:262451) [@problem_id:1507875]。

对于任何一个子式封闭的性质 $\mathcal{P}$，我们都可以定义一个**禁子式集 (forbidden minor set)**。这个集合包含了所有不具有性质 $\mathcal{P}$，但其任何真子式（通过至少一次操作得到的子式）都具有性质 $\mathcal{P}$ 的“最小”图。一个图 $G$ 具有性质 $\mathcal{P}$ 当且仅当它不包含禁子式集中的任何一个图作为其子式。例如，[瓦格纳定理](@entry_id:267584) (Wagner's Theorem) 指出，一个图是平面的当且仅当它不以 $K_5$ 或 $K_{3,3}$ 为子式。因此，[平面性](@entry_id:274781)的禁子式集是 $\{K_5, K_{3,3}\}$。

### 细分与拓扑子式

与[图子式](@entry_id:269769)密切相关但又不完全相同的另一个概念是**拓扑子式 (topological minor)**，它基于**图的细分 (graph subdivision)**。一个图 $S$ 是图 $H$ 的一个细分，如果 $S$ 可以通过在 $H$ 的一些边上插入若干个度为 2 的新顶点得到。换句话说，就是将 $H$ 的一些边替换为长度至少为 1 的路径。如果图 $G$ 包含一个同构于 $H$ 的细分的[子图](@entry_id:273342)，我们就称 $H$ 是 $G$ 的一个拓扑子式。

拓扑子式和子式之间存在着一个重要的单向关系：如果 $H$ 是 $G$ 的拓扑子式，那么 $H$ 一定是 $G$ 的子式。证明这个结论的过程清晰地展示了子式操作的威力。假设 $G$ 中包含一个子图 $S$，它是 $H$ 的一个细分。我们可以通过以下步骤从 $G$ 获得 $H$：
1.  **删除**：首先，删除 $G$ 中所有不属于 $S$ 的顶点和边。这是一个合法的子式操作序列，操作后我们得到了图 $S$。
2.  **收缩**：对于 $S$ 中每一条代表 $H$ 原始边的路径，我们沿着这条路径反复进行[边收缩](@entry_id:265581)，直到路径两端的**分支顶点**（即 $H$ 的原始顶点）直接相连。这个过程将每条被细分出来的路径“压缩”回一条单一的边。

完成所有这些收缩后，得到的图正好就是 $H$ [@problem_id:1554466]。因此，包含 $H$-细分是拥有 $H$-子式的一个充分条件。但需要注意的是，反之不成立。存在拥有 $H$-子式但却不包含 $H$-细分的图。

### [图子式](@entry_id:269769)理论的核心定理与计算复杂性

[图子式](@entry_id:269769)理论的巅峰之作是 **Robertson-Seymour 定理**，也称为**[图子式定理](@entry_id:270191) (Graph Minor Theorem)**。该定理指出，在[图子式](@entry_id:269769)关系下，任何无限的[图序列](@entry_id:268488)都必然存在一个图是另一个图的子式。这个定理的一个惊人推论是：对于任何一个子式封闭的图性质，其禁子式集必然是**有限的** [@problem_id:1546363]。

这个结果具有深远的理论意义。它保证了像[平面性](@entry_id:274781)（禁子式集为 $\{K_5, K_{3,3}\}$）或“可嵌入于环面上的图”这类性质，都可以通过有限数量的“障碍物”来刻画。然而，该定理的证明是构造性的，但极其复杂，并且通常不能有效地为给定的性质找出这个有限的禁子式集。

最后，我们来关注[图子式](@entry_id:269769)的计算方面。这其中存在一个看似矛盾但实则和谐的二元性。
- **[一般性](@entry_id:161765)问题**：给定两个图 $G$ 和 $H$，判断 $H$ 是否是 $G$ 的子式。这个问题是 **[NP完全](@entry_id:145638)的**。这意味着对于任意大小的 $G$ 和 $H$，不存在已知的[多项式时间算法](@entry_id:270212)来解决此问题。
- **固定参数问题**：如果我们**固定**图 $H$，然后询问一个输入的图 $G$ 是否包含这个特定的 $H$ 作为子式。这个问题是**[多项式时间](@entry_id:263297)可解的**。Robertson 和 Seymour 证明，对于任何固定的 $H$，都存在一个[时间复杂度](@entry_id:145062)为 $O(|V(G)|^3)$ 的算法来检测 $H$-子式。

这种复杂度的差异解释了为什么在[算法分析](@entry_id:264228)中会出现不同的性能模型。一个旨在解决[一般性](@entry_id:161765)问题的算法，其运行时间必然会随着 $H$ 的规模（例如其顶点数 $k$）呈指数级增长。而一个针对固定 $H$ 的算法，其运行时间中与 $H$ 相关的部分可以被视为一个（可能非常大）的常数，而对输入 $G$ 的规模 $n$ 则是多项式依赖的。这种算法被称为**固定参数可 tractable (FPT)** 的算法 [@problem_id:1507832]。[图子式](@entry_id:269769)理论为这类算法提供了最著名和最深刻的范例之一，展示了理论深度如何转化为算法设计的洞见。
## 引言
在[图论](@entry_id:140799)的广阔天地中，从现有图构造新图是一种基本而强大的研究方法。线图（line graph）变换便是其中一种核心操作，它将原图的边邻接关系转化为一个新图的顶点邻接关系。这种变换揭示了图的深层结构，但同时也引出了一个根本性的问题：这种变换在多大程度上是可逆的？也就是说，如果我们只知道一个图的线图，我们能否唯一地确定原图的结构？

本文旨在系统性地解答这一问题，核心围绕着[图论](@entry_id:140799)中的一个基石性定理——惠特尼[线图同构](@entry_id:275203)定理。该定理为从[线图](@entry_id:264599)反向推断原图提供了坚实的理论保证，同时也指出了其精妙的例外情况和适用边界。

通过本文的学习，您将：在第一章“原理与机制”中，掌握[线图](@entry_id:264599)的定义、性质，并深入理解[惠特尼同构定理](@entry_id:262802)的内容、例外及其证明背后的重构思想；在第二章“应用与跨学科联系”中，探索该定理如何被用于分析具体图结构，并了解其在[有向图](@entry_id:272310)、超图及[拟阵](@entry_id:273122)理论等领域的延伸与联系；最后，在第三章“动手实践”中，通过解决一系列精心设计的问题，将理论知识转化为实践能力。让我们一同开始，揭开[线图](@entry_id:264599)与其根图之间深刻而优美的对偶关系。

## 原理与机制

本章深入探讨线图 (line graph) 的基本原理及其相关的核心定理——[惠特尼同构定理](@entry_id:262802) (Whitney Isomorphism Theorem)。我们将首先精确定义线图的构造方式，然后系统地分析其性质，并最终阐明[惠特尼同构定理](@entry_id:262802)的内容、例外情况及其适用边界。理解该定理不仅有助于我们认识图的内在结构，也为从一种图结构推断另一种图结构提供了理论基础。

### [线图](@entry_id:264599)的定义与基本性质

从一个给定的图，我们可以通过多种方式构造出新的图。其中一种重要的方式是关注原图中边的邻接关系，这种思想引出了**[线图](@entry_id:264599)**的定义。

给定一个[简单图](@entry_id:274882) $G=(V, E)$，其**线图**，记作 $L(G)$，是一个通过以下规则构造的新图：
1.  $L(G)$ 的每个顶点对应于 $G$ 的一条边。
2.  $L(G)$ 中的两个顶点是邻接的，当且仅当它们在 $G$ 中对应的两条边共享一个公共顶点。

从定义可知，线图的顶点集 $V(L(G))$ 与原图的[边集](@entry_id:267160) $E(G)$ 存在[一一对应](@entry_id:143935)关系。因此，[线图](@entry_id:264599)的顶点数等于原图的边数。这是一个最基本的性质。例如，如果一个[简单图](@entry_id:274882) $G$ 有 7 个顶点和 12 条边，那么无论其具体结构如何，它的线图 $L(G)$ 都将有 12 个顶点 [@problem_id:1556056]。

让我们通过一个具体的例子来感受[线图](@entry_id:264599)的构造过程。考虑一个含有 5 个顶点的[路径图](@entry_id:274599) $P_5$，其顶点为 $v_1, v_2, v_3, v_4, v_5$，[边集](@entry_id:267160)为 $E = \{e_1, e_2, e_3, e_4\}$，其中 $e_1=\{v_1, v_2\}$, $e_2=\{v_2, v_3\}$, $e_3=\{v_3, v_4\}$, $e_4=\{v_4, v_5\}$。根据定义，$L(P_5)$ 将有 4 个顶点，分别对应 $e_1, e_2, e_3, e_4$。现在我们确定 $L(P_5)$ 中的邻接关系：
- 边 $e_1$ 和 $e_2$ 共享顶点 $v_2$，因此 $L(P_5)$ 中对应它们的顶点是邻接的。
- 边 $e_2$ 和 $e_3$ 共享顶点 $v_3$，因此 $L(P_5)$ 中对应它们的顶点是邻接的。
- 边 $e_3$ 和 $e_4$ 共享顶点 $v_4$，因此 $L(P_5)$ 中对应它们的顶点是邻接的。
- 其他任意两对边（如 $e_1$ 和 $e_3$）不共享公共顶点，因此它们在 $L(P_5)$ 中对应的顶点不邻接。
将这些邻接关系连接起来，我们发现 $L(P_5)$ 的结构是一个包含 4 个顶点的路径，即 $P_4$ [@problem_id:1556110]。这个例子直观地展示了原图的“边-边”邻接模式如何转化为线图的“点-点”邻接模式。

线图的结构与原图的度密切相关。考虑 $G$ 中的一条边 $e = \{u, v\}$，它对应于 $L(G)$ 中的一个顶点，我们称之为 $v_e$。$v_e$ 在 $L(G)$ 中的度数是多少呢？根据定义，$v_e$ 的邻居是所有与 $e$ 共享端点的边（$e$ 本身除外）所对应的顶点。在 $G$ 中，与 $e$ 共享顶点 $u$ 的边有 $\deg_G(u) - 1$ 条，与 $e$ 共享顶点 $v$ 的边有 $\deg_G(v) - 1$ 条。由于 $G$ 是简单图，没有重边，这两组边是互不相交的。因此，$v_e$ 的度数为这两部分之和：
$$
\deg_{L(G)}(v_e) = (\deg_G(u) - 1) + (\deg_G(v) - 1) = \deg_G(u) + \deg_G(v) - 2
$$
这个公式揭示了原图的局部信息（顶点度）如何转化为线图的局部信息（顶点度）[@problem_id:1556060]。

### 同构关系与线图变换

在图论中，同构是判断两个图结构是否“相同”的根本标准。一个自然的问题是：如果两个图 $G_1$ 和 $G_2$ 是同构的，它们的[线图](@entry_id:264599) $L(G_1)$ 和 $L(G_2)$ 是否也同构？

答案是肯定的。如果 $G_1$ 和 $G_2$ 同构，意味着存在一个保持邻接关系的顶点双射 $f: V(G_1) \to V(G_2)$。这个顶点映射自然地诱导出一个边映射 $g: E(G_1) \to E(G_2)$，定义为 $g(\{u, v\}) = \{f(u), f(v)\}$。由于 $L(G_1)$ 的顶点集是 $E(G_1)$，$L(G_2)$ 的顶点集是 $E(G_2)$，所以 $g$ 也构成了这两个[线图](@entry_id:264599)顶点集之间的一个[双射](@entry_id:138092)。

我们只需验证这个映射 $g$ 是否保持邻接关系。$L(G_1)$中的两个顶点（对应 $G_1$ 中的边 $e_a, e_b$）是邻接的，当且仅当 $e_a$ 和 $e_b$ 在 $G_1$ 中共享一个顶点。由于 $f$ 是同构映射，这种情况发生当且仅当它们在 $G_2$ 中的像 $g(e_a)$ 和 $g(e_b)$ 也共享一个顶点。这正是 $L(G_2)$ 中对应顶点邻接的条件。因此， $g$ 是一个从 $L(G_1)$ 到 $L(G_2)$ 的同构映射，即 $L(G_1) \cong L(G_2)$ [@problem_id:1556058]。

这个结论可以总结为：**同构图必有同构[线图](@entry_id:264599)**。这说明线图变换是一种在[图同构](@entry_id:143072)意义下定义良好的操作。

### [惠特尼同构定理](@entry_id:262802)

真正深刻的问题是上述命题的逆命题：如果两个图的[线图同构](@entry_id:275203)，即 $L(G_1) \cong L(G_2)$，我们是否可以断定原图也同构，即 $G_1 \cong G_2$？这个问题也被称为线图的**唯一性问题**或**逆问题**。

Hassler Whitney 在1932年给出了一个经典而深刻的回答，现在被称为**[惠特尼同构定理](@entry_id:262802)**。其标准形式如下：

**定理 (Whitney Isomorphism Theorem):** 若 $G_1$ 和 $G_2$ 是两个连通的[简单图](@entry_id:274882)，且它们的线图 $L(G_1)$ 和 $L(G_2)$ 是同构的，则 $G_1$ 与 $G_2$ 同构，除非它们是 $\{K_3, K_{1,3}\}$ 这对图。

这个定理非常强大，它表明除了一个特定的例外情况，我们可以从一个连通图的线图唯一地（在同构意义下）确定原图的结构。让我们来仔细剖析这个定理的几个关键组成部分。

#### 连通性条件

定理要求原图 $G_1$ 和 $G_2$ 是**连通**的。如果允许图是断开的，定理就不再成立。例如，考虑图 $G_1 = K_3 \cup K_{1,3}$ 和 $G_2 = K_3 \cup K_3$。因为线图操作可以分配到各个[连通分量](@entry_id:141881)上，我们有 $L(G_1) = L(K_3) \cup L(K_{1,3})$ 和 $L(G_2) = L(K_3) \cup L(K_3)$。稍后我们将看到 $L(K_3) \cong L(K_{1,3})$，因此 $L(G_1) \cong L(G_2)$。然而，$G_1$ 和 $G_2$ 显然不是同构的，因为 $K_3$ 和 $K_{1,3}$ 并不同构。因此，连通性是保证根图唯一性的重要前提。

#### 唯一的例外：$\{K_3, K_{1,3}\}$

定理中最引人注目的部分是存在一个唯一的例外对：**三角图 $K_3$** 和 **爪形图 $K_{1,3}$**。$K_3$ 是三顶点的[完全图](@entry_id:266483)，而 $K_{1,3}$ 是一个[中心顶点](@entry_id:264579)连接三个叶子顶点的[星形图](@entry_id:271558)。让我们来验证为什么它们是例外。

-   对于 $K_3$，它有 3 条边，每两条边都共享一个顶点。因此，它的线图 $L(K_3)$ 有 3 个顶点，且这 3 个顶点两两邻接。这正是 $K_3$ 的结构。所以，$L(K_3) \cong K_3$。
-   对于 $K_{1,3}$，它也有 3 条边，这 3 条边都共享同一个[中心顶点](@entry_id:264579)。因此，在它的线图 $L(K_{1,3})$ 中，对应的 3 个顶点也两两邻接。所以，$L(K_{1,3}) \cong K_3$。

我们发现 $L(K_3) \cong L(K_{1,3}) \cong K_3$ [@problem_id:1556106]。然而，原图 $K_3$ 和 $K_{1,3}$ 显然不同构：$K_3$ 有 3 个顶点且是一个环，而 $K_{1,3}$ 有 4 个顶点且是一棵树。它们有不同的顶点数、度序列和结构属性。这对图的存在证明了“同构线图必有同构原图”这一论断在没有附加条件时是不成立的 [@problem_id:1556086]。这个例外是定理不可或缺的一部分。

由于 $|V(K_3)| = 3$ 和 $|V(K_{1,3})| = 4$，有些版本的定理为了叙述简洁，会增加一个顶点数大于 4 的条件，例如：“若 $G_1, G_2$ 是顶点数大于 4 的连通简单图，则 $L(G_1) \cong L(G_2)$ 蕴含 $G_1 \cong G_2$”。这个条件有效地排除了例外对，但包含例外对的陈述形式更为完整和精确 [@problem_id:1556063]。因此，对于任何顶点数至少为 5 的连通图，其结构完全由其线图唯一确定 [@problem_id:1556095]。

### 重构机制：从线图到根图

[惠特尼同构定理](@entry_id:262802)之所以成立（除例外情况外），是因为线图的结构中编码了足够的信息来恢复原图（称为**根图**）。其核心机制在于**团 (clique)** 的结构。

在原图 $G$ 中，考虑任意一个顶点 $v$。所有与 $v$ 相关联的边构成的集合，我们记为 $E_v$。根据线图的定义， $E_v$ 中的任意两条边都共享顶点 $v$，因此它们在线图 $L(G)$ 中对应的顶点两两邻接。这意味着，$E_v$ 在 $L(G)$ 中诱导出的子图是一个**团**——即一个所有顶点都相互连接的完全[子图](@entry_id:273342)。

这个发现是重构的关键。我们可以通过分析[线图](@entry_id:264599) $H=L(G)$ 的团结构来反向推导出原图 $G$ 的顶点。具体来说，原图 $G$ 的每个顶点 $v$ 都对应于[线图](@entry_id:264599) $H$ 中的一个特定团（即由 $E_v$ 对应的顶点组成的团）。在多数情况下（当 $\deg_G(v) \ge 2$ 时），这些团是**极大团**（maximal cliques），即不能再添加任何一个顶点而保持其为团。

因此，重构过程大致如下：
1.  给定一个线图 $H$，找出其内部所有的特定极大团。
2.  将每一个这样的极大团视为原图 $G$ 的一个顶点。
3.  原图 $G$ 的边（即 $H$ 的顶点）在两个顶点（即两个极大团）之间存在，当且仅当 $H$ 中对应的顶点同时属于这两个极大团。

这个过程揭示了为什么[惠特尼定理](@entry_id:271195)能够成立：原图的顶点结构被“加密”为线图中的团结构。只要这种加密方式是可逆的，我们就能唯一地恢复原图。对于 $\{K_3, K_{1,3}\}$ 这对例外，问题在于 $L(K_3) \cong K_3$ 的团结构过于简单，无法唯一地区分其根图是 $K_3$ 还是 $K_{1,3}$ [@problem_id:1556059]。

### 定理的边界：[多重图](@entry_id:261576)的情况

[惠特尼同构定理](@entry_id:262802)的一个重要前提是图必须是**简单图**，即不允许存在重边（multiple edges）或环（loops）。如果我们将范围扩大到**[多重图](@entry_id:261576)**（允许重边但无环），定理便不再成立。

我们可以构造一个简单的反例。考虑两个图：
-   $G_1 = K_3$，一个简单图。我们已知 $L(G_1) \cong K_3$。
-   $G_2$ 是一个[多重图](@entry_id:261576)，它有两个顶点 $u$ 和 $v$，之间有三条平行的边 $\{e_1, e_2, e_3\}$。

现在我们来构造 $L(G_2)$。它的顶点集是 $\{e_1, e_2, e_3\}$。由于 $e_1, e_2, e_3$ 中的任意两条都共享顶点 $u$ 和 $v$，因此它们在 $L(G_2)$ 中对应的顶点两两邻接。所以，$L(G_2)$ 也是一个三顶点的完全图，即 $L(G_2) \cong K_3$。

我们得到了 $L(G_1) \cong L(G_2)$。但是，$G_1$ 和 $G_2$ 显然不同构：它们甚至有不同数量的顶点。$G_1$ 是一个有 3 个顶点的[简单图](@entry_id:274882)，而 $G_2$ 是一个有 2 个顶点的[多重图](@entry_id:261576)。这个例子清晰地表明，[惠特尼同构定理](@entry_id:262802)的结论不能直接推广到[多重图](@entry_id:261576)的范畴 [@problem_id:1556094]。这强调了在应用图论定理时，严格遵守其前提条件的重要性。
{"hands_on_practices": [{"introduction": "理解中国邮递员问题的最佳方式莫过于通过一个具体的例子来实践。这个练习将核心算法应用于一个直观的场景：优化绘图笔的路径。通过解决这个问题，你将掌握计算最优路线的基本步骤，即识别奇数度顶点并通过寻找最小成本匹配来构建一个欧拉回路。[@problem_id:1538933]", "problem": "一位数据可视化艺术家正在创作一幅网络图，以表示一部新奇幻小说中六个主要角色之间的关系：Alistair、Beatrice、Charles、Diana、Edward 和 Fiona。该艺术家使用一只机器人绘图笔来绘制这些连接。笔可以从任何一个角色的位置开始，必须将每条连接线至少绘制一次，并在完成后返回其起始位置。\n\n需要绘制的连接及其对应的长度如下：\n*   Alistair 和 Beatrice：3 毫米\n*   Alistair 和 Charles：5 毫米\n*   Alistair 和 Diana：4 毫米\n*   Beatrice 和 Charles：2 毫米\n*   Beatrice 和 Edward：7 毫米\n*   Charles 和 Diana：1 毫米\n*   Charles 和 Fiona：6 毫米\n*   Diana 和 Edward：3 毫米\n*   Edward 和 Fiona：8 毫米\n\n计算绘图笔完成此任务必须行进的绝对最小总距离。请以毫米为单位给出答案。", "solution": "将角色建模为顶点 $A$ (Alistair)、$B$ (Beatrice)、$C$ (Charles)、$D$ (Diana)、$E$ (Edward) 和 $F$ (Fiona)，它们之间由给定长度的无向边连接。此任务是无向中国邮递员问题：覆盖每条边至少一次的最小闭合路径的总长度，等于所有边的权重之和，加上通过在奇度顶点之间重复最短路径以使所有顶点度数变为偶数所需的最小额外长度。\n\n首先计算度数：\n$d(A)=3$（到 $B,C,D$ 的边），$d(B)=3$（到 $A,C,E$ 的边），$d(C)=4$（到 $A,B,D,F$ 的边），$d(D)=3$（到 $A,C,E$ 的边），$d(E)=3$（到 $B,D,F$ 的边），$d(F)=2$（到 $C,E$ 的边）。奇度顶点是 $A,B,D,E$。\n\n使用给定的边长计算 $\\{A,B,D,E\\}$ 之间的最短路径距离：\n- $d(A,B)=3$（直接连接），诸如 $A\\text{-}C\\text{-}B$ 的替代路径得出 $5+2=7>3$。\n- $d(A,D)=4$（直接连接），诸如 $A\\text{-}C\\text{-}D$ 的替代路径得出 $5+1=6>4$。\n- $d(A,E)=\\min\\{A\\text{-}D\\text{-}E\\}=4+3=7$；其他路线如 $A\\text{-}B\\text{-}E=3+7=10$ 更长。\n- $d(B,D)=\\min\\{B\\text{-}C\\text{-}D\\}=2+1=3$（比 $B\\text{-}A\\text{-}D=3+4=7$ 短）。\n- $d(B,E)=\\min\\{B\\text{-}C\\text{-}D\\text{-}E\\}=2+1+3=6$（比直接连接的 7 短）。\n- $d(D,E)=3$（直接连接）。\n\n奇度顶点集有三种完美匹配：\n- 将 $(A,B)$ 和 $(D,E)$ 配对，总和为 $3+3=6$。\n- 将 $(A,D)$ 和 $(B,E)$ 配对，总和为 $4+6=10$。\n- 将 $(A,E)$ 和 $(B,D)$ 配对，总和为 $7+3=10$。\n最小配对成本为 $6$。\n\n计算所有边的权重之和：\n$$W(G)=3+5+4+2+7+1+6+3+8=39.$$\n因此，最小闭合路径长度为\n$$L_{\\min}=W(G)+6=39+6=45.$$\n由于长度单位是毫米，因此最小总距离是 $45$ 毫米。", "answer": "$$\\boxed{45}$$", "id": "1538933"}, {"introduction": "在掌握了基本算法之后，让我们来考虑一个更具动态性的场景。现实世界中的网络很少是静态不变的；路径可能会新增或关闭。这个练习探讨了当网络结构发生变化（例如增加了一条新的隧道）时，如何调整最优的邮递员路线。它要求你计算这一变化对总路线长度的影响，从而加深你对图的结构（特别是顶点度数的奇偶性）如何决定最优解的理解。[@problem_id:1538947]", "problem": "一个维护机器人负责检查一个大型地下研究设施中的服务隧道网络，该网络连接着六个标为 A、B、C、D、E 和 F 的交叉点。机器人驻扎在交叉点 A 的一个指定充电中心。一次最佳巡检路线要求机器人至少穿过每条隧道一次，并返回其起始交叉点，同时走过的总距离最短。\n\n现有的隧道网络包括以下连接及其以米为单位的长度：\n- A 到 B：5 米\n- A 到 C：8 米\n- A 到 F：10 米\n- B 到 C：4 米\n- B 到 D：9 米\n- C 到 D：6 米\n- C 到 E：7 米\n- D 到 E：3 米\n- E 到 F：11 米\n\n就在机器人准备开始其预先计算好的最佳路线时，一条新的紧急通道开通了，在交叉点 A 和交叉点 D 之间建立了一条长度为 12 米的直接连接。机器人的路线规划必须更新以包含这条新隧道。\n\n计算由于增加了这条新隧道，机器人最佳巡检路线总长度的最小增量。答案以米为单位表示。", "solution": "将此问题建模为无向图路径巡检（中国邮递员）问题。对于一个连通的无向多重图，最短闭合回路的长度等于所有边的长度之和，加上为了使所有顶点的度数变为偶数而需要重复添加的边的最小总长度。重复添加的边的长度等于奇数度顶点集上的最小权重完美匹配，其中使用最短路径距离作为边的权重。\n\n计算原始图的总边长和奇数度顶点。设 $S_{0}$ 为原始边的长度之和。求和得：\n$$\nS_{0}=5+8+10+4+9+6+7+3+11=63.\n$$\n顶点度数分别为 $\\deg(A)=3$、$\\deg(B)=3$、$\\deg(C)=4$、$\\deg(D)=3$、$\\deg(E)=3$、$\\deg(F)=2$，所以奇数度顶点的集合是 $\\{A,B,D,E\\}$。\n\n计算 $\\{A,B,D,E\\}$ 之间的最短路径距离：\n$$\nd(A,B)=5,\\quad d(A,D)=\\min\\{5+9,\\,8+6\\}=14,\\quad d(A,E)=\\min\\{8+7,\\,5+9+3\\}=15,\n$$\n$$\nd(B,D)=\\min\\{9,\\,4+6\\}=9,\\quad d(B,E)=\\min\\{9+3,\\,4+7\\}=11,\\quad d(D,E)=3.\n$$\n可能的完美匹配及其成本：\n$$\n(A,B)+(D,E):\\ 5+3=8,\\quad (A,D)+(B,E):\\ 14+11=25,\\quad (A,E)+(B,D):\\ 15+9=24.\n$$\n因此，最小重复成本为 $M_{0}=8$，原始最佳路线长度为\n$$\nL_{0}=S_{0}+M_{0}=63+8=71.\n$$\n\n添加长度为 $12$ 的边 $AD$。新的总边长为\n$$\nS_{1}=S_{0}+12=75.\n$$\n度数更新为 $\\deg(A)=4$ 和 $\\deg(D)=4$，奇数度顶点集仅剩下 $\\{B,E\\}$。因此，新的重复成本是更新后的图中 $B$ 和 $E$ 之间的最短路径距离。新增的边没有创造出比以前更短的 $B$–$E$ 路径：\n$$\nd(B,E)=\\min\\{4+7,\\,9+3,\\,5+12+3\\}=11.\n$$\n因此 $M_{1}=11$，新的最佳路线长度为\n$$\nL_{1}=S_{1}+M_{1}=75+11=86.\n$$\n最小总长度的增量为\n$$\n\\Delta=L_{1}-L_{0}=(S_{0}+12+M_{1})-(S_{0}+M_{0})=12+(11-8)=15.\n$$\n因此，最佳巡检路线长度的最小增量为 $15$ 米。", "answer": "$$\\boxed{15}$$", "id": "1538947"}, {"introduction": "最后，我们将通过一个更高级的应用来收尾，这个应用将中国邮递员问题作为一个分析工具。这个问题不再是简单地寻找一条最优路线，而是要求你评估网络中每条路径的“关键性”。通过系统性地移除每条边并重新计算总巡游长度，这个练习展示了中国邮递员问题在物流和网络规划中用于风险评估和识别潜在瓶颈的更广泛用途。[@problem_id:1538950]", "problem": "一家物流公司在一个仓库中运营着一支自主送货机器人队。该仓库的布局可以建模为一个带权无向图 $G=(V, E)$，其中顶点表示关键位置，边表示带有相关长度（权重）的走廊。机器人的巡逻路线是一条遍历每条走廊至少一次的闭合路径。公司旨在找到一条总长度最小的巡逻路线，这正是中国邮递员问题（CPP）的解。\n\n仓库计划进行维护，必须临时关闭一条走廊。您的任务是作为一名规划分析师，确定关闭哪一条走廊对巡逻路线的干扰最大。一条走廊（边）的“关键性”定义为其被移除后，最优 CPP 游览长度的增加量。\n\n考虑以下代表仓库布局的图：\n顶点集为 $V = \\{1, 2, 3, 4, 5, 6\\}$。\n边集 $E$ 及其对应的权重 $w(e)$ 以元组 $(u, v, w)$ 的列表形式给出：\n$E = \\{(1, 2, 3), (1, 3, 10), (1, 4, 10), (2, 3, 3), (2, 5, 8), (3, 4, 2), (3, 5, 4), (4, 6, 5), (5, 6, 1)\\}$.\n\n设 $W(G)$ 为原始图 $G$ 的最优 CPP 游览长度。设 $W(G-e)$ 为从图 $G$ 中移除一条边 $e$ 后的最优 CPP 游览长度。您需要找到使增量 $\\Delta(e) = W(G-e) - W(G)$ 最大化的边 $e^*$。\n\n这个最大可能增量 $\\max_{e \\in E} \\Delta(e)$ 的值是多少？", "solution": "我们在一个带权无向连通图上对中国邮递员问题（CPP）进行建模。对于这样的图，最优闭合邮递员游览长度为\n$$\nW(G) = \\sum_{e \\in E} w(e) + \\min_{\\text{perfect matchings on odd vertices}} \\sum d(u,v),\n$$\n其中 $d(u,v)$ 是奇度顶点 $u$ 和 $v$ 之间的最短路径距离。\n\n首先计算图 $G$ 上的基本量。\n\n1) 所有边的总权重：\n$$\nS=\\sum_{e \\in E} w(e)=3+10+10+3+8+2+4+5+1=46.\n$$\n\n2) 顶点度数：$\\deg(1)=3$, $\\deg(2)=3$, $\\deg(3)=4$, $\\deg(4)=3$, $\\deg(5)=3$, $\\deg(6)=2$。奇度顶点集为 $O=\\{1,2,4,5\\}$。\n\n3) 图 $G$ 中 $O$ 内顶点之间的最短路径距离：\n$d(1,2)=3$, $d(1,3)=6$, $d(1,4)=8$, $d(1,5)=10$, $d(2,3)=3$, $d(2,4)=5$, $d(2,5)=7$, $d(3,4)=2$, $d(3,5)=4$, $d(4,5)=6$。\n$O=\\{1,2,4,5\\}$ 上的最短路径距离为：\n$d(1,2)=3,\\quad d(1,4)=8,\\quad d(1,5)=10,\\quad d(2,4)=5,\\quad d(2,5)=7,\\quad d(4,5)=6.$\n$O$ 上的最小完美匹配成本通过配对 $(1,2)$ 和 $(4,5)$ 实现，成本为 $3+6=9$。因此\n$$\nW(G)=S+9=46+9=55.\n$$\n\n对于移除的每条边 $e=(u,v)$，总权重变为 $S' = S - w(e)$，并且奇度点集因 $u$ 和 $v$ 的奇偶性翻转而改变。新的 CPP 长度为\n$$\nW(G-e)=S' + \\text{MC}_{e},\n$$\n其中 $\\text{MC}_{e}$ 是在新奇度点集上使用 $G-e$ 中的最短路径距离计算的最小匹配成本。因此，增量为\n$$\n\\Delta(e)=W(G-e)-W(G)=(S-w(e)+\\text{MC}_{e})-(S+9)=\\text{MC}_{e}-w(e)-9.\n$$\n\n我们对每条边进行评估。只有当被移除的边影响到相关的最短路径时，才在 $G-e$ 中重新计算距离。\n\n边 $e=(1,2)$，权重 $w=3$：两个端点都是奇度点，所以新的奇度点集是 $\\{4,5\\}$。距离 $d_{G-e}(4,5)=6$（路径 $4\\text{-}3\\text{-}5$ 或 $4\\text{-}6\\text{-}5$ 不使用 $(1,2)$）。因此 $\\text{MC}_{e}=6$ 并且\n$$\n\\Delta(1,2)=6-3-9=-6.\n$$\n\n边 $e=(1,3)$，权重 $w=10$：奇偶性翻转后，奇度点集为 $\\{2,3,4,5\\}$。移除 $(1,3)$ 不会改变这些点之间的距离：\n$$\nd(2,3)=3,\\ d(2,4)=5,\\ d(2,5)=7,\\ d(3,4)=2,\\ d(3,5)=4,\\ d(4,5)=6.\n$$\n每种配对的成本都为 $9$，所以 $\\text{MC}_{e}=9$ 并且\n$$\n\\Delta(1,3)=9-10-9=-10.\n$$\n\n边 $e=(1,4)$，权重 $w=10$：新的奇度点集为 $\\{2,5\\}$。距离 $d_{G-e}(2,5)=7$（路径 $2\\text{-}3\\text{-}5$），所以 $\\text{MC}_{e}=7$ 并且\n$$\n\\Delta(1,4)=7-10-9=-12.\n$$\n\n边 $e=(2,3)$，权重 $w=3$：新的奇度点集为 $\\{1,3,4,5\\}$。移除 $(2,3)$ 会改变一些距离：\n$$\nd(1,3)=10,\\ d(1,4)=10,\\ d(1,5)=11,\\ d(3,4)=2,\\ d(3,5)=4,\\ d(4,5)=6.\n$$\n最小匹配是 $(1,5)$ 和 $(3,4)$，得到 $\\text{MC}_{e}=11+2=13$。因此\n$$\n\\Delta(2,3)=13-3-9=1.\n$$\n\n边 $e=(2,5)$，权重 $w=8$：新的奇度点集为 $\\{1,4\\}$。距离 $d_{G-e}(1,4)=8$（路径 $1\\text{-}2\\text{-}3\\text{-}4$），所以 $\\text{MC}_{e}=8$ 并且\n$$\n\\Delta(2,5)=8-8-9=-9.\n$$\n\n边 $e=(3,4)$，权重 $w=2$：新的奇度点集为 $\\{1,2,3,5\\}$。这些点之间的距离与在 $G$ 中时保持不变：\n$$\nd(1,2)=3,\\ d(1,3)=6,\\ d(1,5)=10,\\ d(2,3)=3,\\ d(2,5)=7,\\ d(3,5)=4.\n$$\n最小匹配是 $(1,2)$ 和 $(3,5)$，成本为 $3+4=7$。因此\n$$\n\\Delta(3,4)=7-2-9=-4.\n$$\n\n边 $e=(3,5)$，权重 $w=4$：新的奇度点集为 $\\{1,2,3,4\\}$。距离不变：\n$$\nd(1,2)=3,\\ d(1,3)=6,\\ d(1,4)=8,\\ d(2,3)=3,\\ d(2,4)=5,\\ d(3,4)=2,\n$$\n所以最小匹配是 $(1,2)$ 和 $(3,4)$，成本为 $3+2=5$。因此\n$$\n\\Delta(3,5)=5-4-9=-8.\n$$\n\n边 $e=(4,6)$，权重 $w=5$：新的奇度点集为 $\\{1,2,5,6\\}$。在 $G-e$ 中的距离：\n$$\nd(1,2)=3,\\ d(1,5)=10,\\ d(1,6)=11,\\ d(2,5)=7,\\ d(2,6)=8,\\ d(5,6)=1.\n$$\n最小匹配是 $(1,2)$ 和 $(5,6)$，成本为 $3+1=4$。因此\n$$\n\\Delta(4,6)=4-5-9=-10.\n$$\n\n边 $e=(5,6)$，权重 $w=1$：新的奇度点集为 $\\{1,2,4,6\\}$。在 $G-e$ 中的距离：\n$$\nd(1,2)=3,\\ d(1,4)=8,\\ d(1,6)=13,\\ d(2,4)=5,\\ d(2,6)=10,\\ d(4,6)=5.\n$$\n最小匹配是 $(1,2)$ 和 $(4,6)$，成本为 $3+5=8$。因此\n$$\n\\Delta(5,6)=8-1-9=-2.\n$$\n\n取所有边中的最大值，我们得到\n$$\n\\max_{e \\in E} \\Delta(e)=1.\n$$", "answer": "$$\\boxed{1}$$", "id": "1538950"}]}
{"hands_on_practices": [{"introduction": "本练习是 Prüfer 序列的一个基本应用，旨在帮助你掌握如何将树中顶点的度等图论属性，直接转化为对相应 Prüfer 序列的约束条件。通过解决这个问题 [@problem_id:1486040]，你将学会利用序列的组合计数来解决看似复杂的图计数问题。", "problem": "在网络拓扑的研究中，树是一种基本结构。一个包含 $n$ 个顶点的带标号的树由一个顶点集合 $V = \\{1, 2, \\dots, n\\}$ 和一个包含 $n-1$ 条连接这些顶点的边的集合组成，使得最终得到的图是连通且无环的。\n\n顶点的度是指与该顶点相连的边的数量。如果一个顶点的度恰好为 1，则称该顶点为叶节点。\n\n考虑包含 $n$ 个顶点的带标号的树，其中 $n \\geq 3$。设 $k$ 为一个满足 $1 \\leq k \\leq n-2$ 的整数。你的任务是找到一个用 $n$ 和 $k$ 表示的通用公式，用于计算同时满足以下两个条件的、包含 $n$ 个顶点的不同带标号的树的总数：\n1.  标号为 '1' 的顶点是叶节点。\n2.  标号为 '2' 的顶点的度恰好为 $k$。", "solution": "使用带标号树的 Prüfer 编码：每个包含 $n$ 个带标号顶点的树都与一个长度为 $n-2$、元素取自集合 $\\{1,2,\\dots,n\\}$ 的序列一一对应。在这种编码中，顶点 $v$ 的度等于 $v$ 在 Prüfer 序列中出现的次数加 1。因此：\n- 顶点 1 是叶节点的条件等价于顶点 1 在 Prüfer 序列中出现 0 次。\n- 顶点 2 的度恰好为 $k$ 的条件等价于顶点 2 在 Prüfer 序列中出现恰好 $k-1$ 次。\n\n我们必须计算在集合 $\\{1,2,\\dots,n\\}$ 上长度为 $(n-2)$ 的序列的数量，这些序列满足：\n- 符号 1 出现恰好 0 次，\n- 符号 2 出现恰好 $k-1$ 次，\n- 剩下的 $n-k-1$ 个位置由来自集合 $\\{3,4,\\dots,n\\}$ 的符号填充。\n\n首先，为 $k-1$ 个 2 选择位置，这有 $\\binom{n-2}{k-1}$ 种方式。剩下的 $n-k-1$ 个位置中的每一个都可以独立地用集合 $\\{3,4,\\dots,n\\}$ 中的任意一个符号填充（共 $n-2$ 个符号），这给出了 $(n-2)^{n-k-1}$ 种可能性。根据该一一对应关系，每个这样的序列都对应一个满足这两个条件的唯一的带标号树。因此，总数为\n$$\n\\binom{n-2}{k-1}(n-2)^{n-k-1}\n$$\n。\n\n作为通过度序列公式的交叉验证，具有度序列 $(d_{1},d_{2},\\dots,d_{n})$（其中 $\\sum d_{i}=2(n-1)$）的带标号树的数量为 $(n-2)!/\\prod_{i=1}^{n}(d_{i}-1)!$。令 $d_{1}=1$，$d_{2}=k$，并对 $i\\geq 3$ 记 $x_{i}=d_{i}-1\\geq 0$，则 $x_{i}$ 的和为 $n-k-1$。对所有这样的 $(x_{3},\\dots,x_{n})$ 求和，可得\n$$\n\\frac{(n-2)!}{(k-1)!}\\sum_{x_{3}+\\cdots+x_{n}=n-k-1}\\frac{1}{\\prod_{i=3}^{n}x_{i}!}\n=\\frac{(n-2)!}{(k-1)!(n-k-1)!}(n-2)^{n-k-1}\n=\\binom{n-2}{k-1}(n-2)^{n-k-1}\n$$\n，这与使用 Prüfer 序列计数得到的结果相匹配。", "answer": "$$\\boxed{\\binom{n-2}{k-1}(n-2)^{\\,n-k-1}}$$", "id": "1486040"}, {"introduction": "在掌握了基本方法后，这个练习将挑战你应用 Prüfer 序列来处理一个更细致的图属性——最大度。这个问题 [@problem_id:1486033] 不仅需要你运用 Prüfer 序列的知识，还需要你先对树的结构进行一番分析，以确定满足条件的图所具备的内在特征。", "problem": "在分散式通信网络的设计中，常使用树形拓扑来确保连通性且无冗余路径。考虑一个由 $n$ 个节点组成的网络，其中每个节点都有不同的标记。一组特殊的网络设计具有“伪中心化”结构。该结构的定义是：连接最多的节点（即度数最高的节点）恰好与另外 $n-2$ 个节点相连。对于任意整数 $n \\ge 5$，求满足此条件的、不同的带标记树形网络的总数。请将您的答案表示为关于 $n$ 的公式。", "solution": "我们考虑顶点集为 $\\{1,2,\\ldots,n\\}$ 的带标记的树，并使用 Prüfer 编码。对于一个有 $n$ 个顶点的带标记的树，其 Prüfer 编码是一个长度为 $n-2$、元素取自 $\\{1,\\ldots,n\\}$ 的序列，并且顶点 $i$ 的度满足\n$$\n\\deg(i)=1+\\text{($i$ 在 Prüfer 序列中出现的次数)}.\n$$\n\n我们要求的是最大度恰好为 $n-2$ 的树。首先，对于 $n\\geq 5$，不可能存在两个不同的度为 $n-2$ 的顶点。实际上，如果两个顶点的度都是 $n-2$，那么所有顶点的度数之和至少为\n$$\n2(n-2)+(n-2)\\cdot 1=3n-6,\n$$\n因为其余 $n-2$ 个顶点的度至少为 $1$。但一个有 $n$ 个顶点的树的总度数为 $2(n-1)$，而对于 $n\\geq 5$ 有 $3n-6>2n-2$，这便导出了矛盾。因此，对于 $n\\geq 5$，有且仅有一个顶点 $v$ 的度为 $n-2$。\n\n在 Prüfer 编码中，$\\deg(v)=n-2$ 意味着 $v$ 恰好出现 $n-3$ 次。由于该序列长度为 $n-2$，剩下的一次出现必须属于另一个顶点 $w$，而所有其他顶点出现 0 次。因此，Prüfer 序列恰好由两个不同的符号组成：$v$ 出现 $n-3$ 次，$w$ 出现一次。反之，任何这样的 Prüfer 序列都会生成一个最大度为 $n-2$ 的树（该最大度由顶点 $v$ 唯一达到）。\n\n计算这些序列的数量：\n- 选择 $v$（度为 $n-2$ 的唯一顶点）：有 $n$ 种选择。\n- 选择 $w\\neq v$（度为 $2$ 的唯一顶点）：有 $n-1$ 种选择。\n- 在长度为 $n-2$ 的 Prüfer 序列中选择 $w$ 唯一出现的位置：有 $n-2$ 种选择。\n\n因此，最大度恰好为 $n-2$ 的带标记树的总数为\n$$\nn(n-1)(n-2).\n$$\n\n此计数对所有满足 $n\\geq 5$ 的整数均有效，符合题目要求。", "answer": "$$\\boxed{n(n-1)(n-2)}$$", "id": "1486033"}, {"introduction": "这个练习提供了一个与 Prüfer 序列不同的视角来解决树的计数问题。你将通过直接的组合推理，而非序列编码，来计算一种被称为“双星图”的特定树拓扑的数量 [@problem_id:1486074]。这有助于展示组合方法的灵活性，并加深你对树结构基本性质（如度与连通性）的理解。", "problem": "一家公司正在设计一个小型、容错的通信网络。该网络由 $n$ 个节点组成，其中 $n \\ge 4$，每个节点由集合 $\\{1, 2, \\dots, n\\}$ 中的唯一标号标识。为确保没有冗余的通信回路，该网络的拓扑结构需要是一棵树。\n\n为了增强弹性和简化路由，设计必须遵守一个特定的架构约束：必须恰好有两个“枢纽”节点，其余的 $n-2$ 个节点必须是“终端”节点。枢纽节点定义为度大于 1 的节点，而终端节点的度恰好为 1。此外，这两个枢纽节点必须通过一条边直接相连。\n\n您的任务是确定满足这些设计标准的、不同的带标号网络拓扑结构的总数。请用一个关于 $n$ 的公式来表示您的答案。", "solution": "设 $n$ 个带标号的顶点为 $\\{1,2,\\dots,n\\}$，其中 $n \\geq 4$。该网络是一棵树，因此所有顶点的度数之和等于 $2(n-1)$。如果恰好有两个顶点的度分别为 $d_1$ 和 $d_2$ 的枢纽节点，其余 $n-2$ 个顶点是度为 1 的终端节点，那么\n$$\nd_{1}+d_{2}+(n-2)\\cdot 1=2(n-1)\\quad\\Rightarrow\\quad d_{1}+d_{2}=n.\n$$\n由于枢纽节点的定义是度大于 1，因此 $d_1$ 和 $d_2$ 均至少为 2。此外，如果两个枢纽节点不相邻，则它们之间的唯一路径将至少包含一个度为 2 的中间顶点，而该顶点也将成为一个枢纽节点，这与恰好有两个枢纽节点的要求相矛盾。因此，这两个枢纽节点必须相邻，并且所有其余的 $n-2$ 个顶点都是直接连接到这两个枢纽节点之一的叶节点。等价地，该拓扑是一个带标号的双星图（bistar），其中枢纽节点通过一条边连接，叶节点被划分到它们之间，每个枢纽节点至少连接一个叶节点。\n\n为计算此类带标号树的数量：\n1. 选择一个由不同枢纽节点组成的有序对 $(u,v)$：有 $n(n-1)$ 种选择。\n2. 从剩下的 $n-2$ 个标号（叶节点）中，选择一个子集 $S$ 连接到 $u$；其补集连接到 $v$。为确保两个枢纽节点的度都大于 1，需排除 $S=\\varnothing$ 和 $S$ 等于全部 $n-2$ 个叶节点的集合这两种情况。因此，有效子集的数量为 $2^{n-2}-2$。\n3. 在这种有序计数中，每个无向带标号拓扑结构都被精确地计算了两次，一次是对于 $(u,v),S$，另一次是对于 $(v,u),S^{c}$。因此，需要除以 2。\n\n不同的带标号拓扑结构的总数为\n$$\n\\frac{n(n-1)}{2}\\left(2^{\\,n-2}-2\\right)\n=\\binom{n}{2}\\left(2^{\\,n-2}-2\\right)\n$$\n。\n这对所有 $n \\geq 4$ 都满足约束条件，因为此时 $n-2 \\geq 2$，所以 $2^{n-2}-2 \\geq 2$，确保了每个枢纽节点至少可以接收一个叶节点。", "answer": "$$\\boxed{\\binom{n}{2}\\left(2^{n-2}-2\\right)}$$", "id": "1486074"}]}
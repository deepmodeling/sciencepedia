## 引言
在科学和工程领域，许多过程都由一系列连续的步骤构成。正如函数可以相互复合一样，线性映射也可以一个接一个地作用，形成一个新的、更复杂的变换。这个过程——[线性映射](@entry_id:185132)的复合——是线性代数中一个既基本又强大的概念，是理解顺序变换的数学基石。然而，如何精确描述这个过程？它遵循哪些代数法则？它与我们熟悉的矩阵乘法有何关联？本文旨在系统性地回答这些问题，为您构建一个关于线性映射复合的完整知识框架。

在接下来的内容中，您将首先学习复合的**原理与机制**，包括其严格定义、线性性质以及与矩阵乘法的深刻联系。随后，我们将探索其在不同领域的**应用与跨学科联系**，从[计算机图形学](@entry_id:148077)中的[几何变换](@entry_id:150649)到[物理学中的对称性](@entry_id:144576)分析，展示其广泛的实用价值。最后，您将通过一系列**动手实践**来巩固所学，将理论知识转化为解决问题的能力。

让我们首先深入探讨复合映射的核心原理与机制。

## 原理与机制

在本章中，我们将深入探讨线性映射的复合（composition）这一核心概念。正如函数可以进行复合一样，线性映射也可以一个接一个地作用，形成一个新的线性映射。这个过程不仅是代数上的一个基本运算，更在[几何变换](@entry_id:150649)、信号处理和许多其他科学领域中扮演着描述连续过程的关键角色。我们将从复合的定义出发，系统地阐述其基本原理、代数性质，及其与[矩阵乘法](@entry_id:156035)和[向量子空间](@entry_id:151815)之间的深刻联系。

### 复合映射的定义与存在性

当我们处理多个[线性映射](@entry_id:185132)时，一个自然的问题是：能否将一个映射的输出作为另一个映射的输入？这个过程就是**线性映射的复合**。

假设有两个[线性映射](@entry_id:185132)，$S: U \to V$ 和 $T: V \to W$。对于 $U$ 中的任意一个向量 $\mathbf{u}$，$S$ 将其映射到 $V$ 中的向量 $S(\mathbf{u})$。由于 $S(\mathbf{u})$ 位于 $V$ 空间中，它也处在映射 $T$ 的定义域内。因此，我们可以将 $T$ 应用于 $S(\mathbf{u})$，得到 $W$ 中的一个向量 $T(S(\mathbf{u}))$。这个将 $\mathbf{u} \in U$ 直接映射到 $T(S(\mathbf{u})) \in W$ 的新映射，就被称为 $S$ 和 $T$ 的**复合映射**，记作 $T \circ S$。

其定义可以形式化地写为：
$$(T \circ S)(\mathbf{u}) = T(S(\mathbf{u}))$$
这个新映射 $T \circ S$ 的定义域是 $U$，陪域是 $W$，即 $T \circ S: U \to W$。

需要特别强调的是，复合映射 $T \circ S$ 能够存在的**关键前提**是**定义域-陪域兼容性**：第一个映射 $S$ 的陪域必须与第二个映射 $T$ 的定义域完全相同。如果这个条件不满足，复合操作就无从谈起。

让我们通过一个例子来阐明这一点。考虑两个[线性映射](@entry_id:185132)，$T: \mathbb{R}^2 \to \mathbb{R}^3$ 和 $S: \mathbb{R}^3 \to \mathbb{R}^3$。我们来分析两种可能的复合顺序：$S \circ T$ 和 $T \circ S$ [@problem_id:1355107]。

对于 $S \circ T$，第一个作用的映射是 $T: \mathbb{R}^2 \to \mathbb{R}^3$。它的陪域是 $\mathbb{R}^3$。第二个作用的映射是 $S: \mathbb{R}^3 \to \mathbb{R}^3$，其定义域也是 $\mathbb{R}^3$。由于 $T$ 的陪域与 $S$ 的定义域匹配，因此复合映射 $S \circ T$ 是**良定义的**，其最终的映射关系为 $S \circ T: \mathbb{R}^2 \to \mathbb{R}^3$。

然而，对于 $T \circ S$，情况就不同了。第一个作用的映射是 $S: \mathbb{R}^3 \to \mathbb{R}^3$，其陪域是 $\mathbb{R}^3$。而第二个作用的映射是 $T: \mathbb{R}^2 \to \mathbb{R}^3$，其定义域是 $\mathbb{R}^2$。由于 $S$ 的陪域 $\mathbb{R}^3$ 与 $T$ 的定义域 $\mathbb{R}^2$ 不匹配，因此复合映射 $T \circ S$ 是**未定义的**。这个简单的例子告诉我们，在考虑复合映射时，必须首先检查其作用顺序和空间兼容性。

### 复合的线性性质

我们已经定义了复合映射，但一个至关重要的问题是：两个线性映射的复合结果是否仍然是一个[线性映射](@entry_id:185132)？答案是肯定的，这是复合运算最有用的性质之一。

**定理：** 若 $S: U \to V$ 和 $T: V \to W$ 均为[线性映射](@entry_id:185132)，则其复合映射 $T \circ S: U \to W$ 也是一个线性映射。

**证明：** 为了证明 $T \circ S$ 是线性的，我们需要验证它是否满足[线性映射](@entry_id:185132)的两个基本条件：可加性和齐次性。对于任意向量 $\mathbf{u}_1, \mathbf{u}_2 \in U$ 和任意标量 $c_1, c_2$，我们考察 $T \circ S$ 对线性组合 $c_1 \mathbf{u}_1 + c_2 \mathbf{u}_2$ 的作用：
$$
\begin{align*}
(T \circ S)(c_1 \mathbf{u}_1 + c_2 \mathbf{u}_2)  &= T(S(c_1 \mathbf{u}_1 + c_2 \mathbf{u}_2))  \text{ (根据复合的定义)} \\
 &= T(c_1 S(\mathbf{u}_1) + c_2 S(\mathbf{u}_2))  \text{ (因为 } S \text{ 是线性的)} \\
 &= c_1 T(S(\mathbf{u}_1)) + c_2 T(S(\mathbf{u}_2))  \text{ (因为 } T \text{ 是线性的)} \\
 &= c_1 (T \circ S)(\mathbf{u}_1) + c_2 (T \circ S)(\mathbf{u}_2)  \text{ (根据复合的定义)}
\end{align*}
$$
上述推导表明，$T \circ S$ 保持了向量的线性组合结构，因此它是一个[线性映射](@entry_id:185132)。

这个性质意味着我们可以通过研究[基向量](@entry_id:199546)在复合映射下的像来完全确定整个映射。例如，考虑一个映射 $S: \mathbb{R}^3 \to \mathbb{R}^2$ 和一个映射 $T: \mathbb{R}^2 \to \mathbb{R}^2$。假设我们知道 $S$ 对 $\mathbb{R}^3$ 标准基的作用，而 $T$ 是一个[几何变换](@entry_id:150649)（例如，逆时针旋转90度后进行2倍缩放）[@problem_id:1355090]。为了计算复合映射 $L = T \circ S$ 对任意向量 $\mathbf{v} = (3, -1, 2)$ 的作用，我们可以分两步：
1.  利用 $S$ 的线性性质计算 $S(\mathbf{v})$。
2.  将得到的结果 $S(\mathbf{v})$ 作为输入，计算 $T(S(\mathbf{v}))$。

这个过程不仅适用于常见的[欧几里得空间](@entry_id:138052)，也适用于更抽象的[向量空间](@entry_id:151108)，比如多项式空间 [@problem_id:1355092]。例如，给定一个从二次多项式空间 $P_2(\mathbb{R})$ 到 $\mathbb{R}^3$ 的映射 $S$，以及一个从 $\mathbb{R}^3$ 到一次多项式空间 $P_1(\mathbb{R})$ 的映射 $T$，我们可以通过代数推导得到复合映射 $T \circ S$ 对任意二次多项式的解析表达式，从而计算出任意输入的结果。

### 复合映射的代数性质

线性映射的复合运算遵循一系列重要的代数法则，这些法则与矩阵乘法中的相应法则有直接的对应关系。

#### 结合律 (Associativity)

复合运算满足**[结合律](@entry_id:151180)**。对于三个可兼容的[线性映射](@entry_id:185132) $R: U \to V$, $S: V \to W$, 和 $T: W \to Z$，我们有：
$$(T \circ S) \circ R = T \circ (S \circ R)$$
这意味着，当有多个映射依次作用时，我们可以任意组合相邻的映射对，而最终结果保持不变。因此，我们可以无歧义地写出 $T \circ S \circ R$。这个性质在实际应用中非常有用，比如在分析一个多级信号处理系统时，我们可以先分析前两个阶段的组合效应，再与第三个阶段结合，或者先分析后两个阶段的组合效应，再应用于第一阶段的输出 [@problem_id:1355078]。

#### 非交换律 (Non-Commutativity)

与普通数的乘法不同，线性映射的复合**不满足交换律**。也就是说，在大多数情况下：
$$T \circ S \neq S \circ T$$
即使两个复合 $T \circ S$ 和 $S \circ T$ 都有定义（例如当 $S$ 和 $T$ 都是从 $V$ 到 $V$ 的自同态时），它们的顺序通常也不能互换。

一个极具说服力的例子来自二维计算机图形学中的[几何变换](@entry_id:150649) [@problem_id:1355097]。考虑 $\mathbb{R}^2$ 上的两个变换：$S$ 是一个水平错切（shear），定义为 $S(x, y) = (x + 2y, y)$；$T$ 是一个逆时针旋转90度。让我们观察对点 $(1, 1)$ 应用这两个变换的不同顺序会产生什么结果。
- **先旋转，后错切 ($S \circ T$)**: 首先对 $(1, 1)$ 进行旋转 $T$，得到 $(-1, 1)$。然后对 $(-1, 1)$ 进行错切 $S$，得到 $(-1 + 2(1), 1) = (1, 1)$。
- **先错切，后旋转 ($T \circ S$)**: 首先对 $(1, 1)$ 进行错切 $S$，得到 $(1 + 2(1), 1) = (3, 1)$。然后对 $(3, 1)$ 进行旋转 $T$，得到 $(-1, 3)$。

显然，$(1, 1) \neq (-1, 3)$。这个例子直观地表明，变换的顺序至关重要。先将一个图形旋转再错切，与先错切再旋转，会得到完全不同的形状。

#### 复合的逆 (Inverse of a Composition)

如果两个[线性映射](@entry_id:185132) $S: V \to V$ 和 $T: V \to V$ 都是可逆的，那么它们的复合 $T \circ S$ 也一定是可逆的。其逆映射是什么呢？这遵循一个被称为“穿脱袜子”的原则：要撤销一系列操作，必须以相反的顺序撤销每一个操作。因此，$(T \circ S)$ 的逆映射是：
$$(T \circ S)^{-1} = S^{-1} \circ T^{-1}$$
我们可以通过验证来证明这一点 [@problem_id:1355103]。一个映射与其逆映射的复合是恒等映射 $I_V$。让我们来验证 $(S^{-1} \circ T^{-1})$ 是否是 $(T \circ S)$ 的逆：
$$ (T \circ S) \circ (S^{-1} \circ T^{-1}) = T \circ (S \circ S^{-1}) \circ T^{-1} = T \circ I_V \circ T^{-1} = T \circ T^{-1} = I_V $$
同理，从另一侧复合也是如此：
$$ (S^{-1} \circ T^{-1}) \circ (T \circ S) = S^{-1} \circ (T^{-1} \circ T) \circ S = S^{-1} \circ I_V \circ S = S^{-1} \circ S = I_V $$
由于从两侧复合都得到了恒等映射，我们确认了 $(T \circ S)^{-1} = S^{-1} \circ T^{-1}$。

### 矩阵表示：从抽象复合到具体乘法

线性代数最强大的工具之一，就是将抽象的[线性映射](@entry_id:185132)用具体的矩阵来表示。复合映射与矩阵之间存在一个极其优美的对应关系。

**定理：** 设 $S: U \to V$ 和 $T: V \to W$ 是[线性映射](@entry_id:185132)。设 $\mathcal{B}_U, \mathcal{B}_V, \mathcal{B}_W$ 分别是 $U, V, W$ 的基。若 $M_S$ 是 $S$ 相对于基 $\mathcal{B}_U, \mathcal{B}_V$ 的矩阵，而 $M_T$ 是 $T$ 相对于基 $\mathcal{B}_V, \mathcal{B}_W$ 的矩阵，则复合映射 $T \circ S$ 相对于基 $\mathcal{B}_U, \mathcal{B}_W$ 的矩阵 $M_{T \circ S}$ 由矩阵乘法给出：
$$ M_{T \circ S} = M_T M_S $$
这个定理将抽象的映射复合操作，转化为了具体的[矩阵乘法](@entry_id:156035)。值得注意的是，矩阵相乘的顺序与映射复合的顺序是一致的。

为了理解这个定理的由来，我们可以从第一性原理出发，构造复合映射的矩阵。一个[线性映射](@entry_id:185132)的矩阵，其各列是该映射作用于定义域[基向量](@entry_id:199546)后，在陪域基下的[坐标向量](@entry_id:153319)。因此，要找到 $M_{T \circ S}$，我们需要计算 $(T \circ S)(\mathbf{u}_i)$，其中 $\mathbf{u}_i$ 是 $U$ 的[基向量](@entry_id:199546)。

考虑一个从 $\mathbb{R}^2$ 到 $2 \times 2$ 矩阵空间 $M_{2 \times 2}$ 的复合映射 $L = T \circ S$，其中 $S: \mathbb{R}^2 \to \mathcal{P}_3$ (三次多项式空间)，$T: \mathcal{P}_3 \to M_{2 \times 2}$ [@problem_id:1355130]。我们可以通过以下步骤直接构建 $L$ 的矩阵：
1.  取 $\mathbb{R}^2$ 的[标准基向量](@entry_id:152417) $\mathbf{e}_1 = \begin{pmatrix} 1 \\ 0 \end{pmatrix}$ 和 $\mathbf{e}_2 = \begin{pmatrix} 0 \\ 1 \end{pmatrix}$。
2.  对每个[基向量](@entry_id:199546)，计算其通过整个复合映射的像。例如，对于 $\mathbf{e}_1$，我们先计算多项式 $S(\mathbf{e}_1)$，然后计算矩阵 $T(S(\mathbf{e}_1)) = L(\mathbf{e}_1)$。
3.  将得到的矩阵 $L(\mathbf{e}_1)$ 和 $L(\mathbf{e}_2)$ 分别表示为 $M_{2 \times 2}$ 标准基下的[坐标向量](@entry_id:153319)。
4.  将这两个[坐标向量](@entry_id:153319)作为列，就构成了 $L$ 的矩阵表示 $M_L$。

这个过程虽然略显繁琐，但它揭示了[矩阵乘法](@entry_id:156035)定义的本质——它正是为了精确描述线性映射的复合而设计的。反之，利用 $M_{T \circ S} = M_T M_S$ 这条规则，我们可以先分别求出 $M_S$ 和 $M_T$ 的矩阵，然后通过[矩阵乘法](@entry_id:156035)直接得到 $M_{T \circ S}$，这在计算上通常更为便捷。例如，在之前提到的多级信号处理问题中 [@problem_id:1355078]，总变换 $L = T \circ S \circ R$ 的矩阵 $M_L$ 可以通过计算矩阵乘积 $M_T M_S M_R$ 得到。由于矩阵乘法满足结合律，我们可以按 $(M_T M_S) M_R$ 或 $M_T (M_S M_R)$ 的[顺序计算](@entry_id:273887)，结果都是一样的。

### 复合映射与[子空间](@entry_id:150286)性质

复合映射的性质与其分量映射的核（kernel）与像（image）等[基本子空间](@entry_id:190076)密切相关。理解这些关系有助于我们更深入地洞察线性变换的结构。

#### 复合与秩 (Composition and Rank)

一个[线性映射](@entry_id:185132)的秩（rank）是其像空间的维度。对于复合映射 $T \circ S$，其像 $\text{Im}(T \circ S)$ 是 $T(\text{Im}(S))$。由于 $T$ 作用于 $\text{Im}(S)$ 这个[子空间](@entry_id:150286)，其产生的像的维度不会超过 $\text{Im}(S)$ 的维度，即 $\text{rank}(T \circ S) \le \text{rank}(S)$。同时，$\text{Im}(T \circ S)$ 也必然是 $T$ 的像空间的一个[子空间](@entry_id:150286)，所以 $\text{rank}(T \circ S) \le \text{rank}(T)$。综合起来，我们得到一个重要的不等式：
$$ \text{rank}(T \circ S) \le \min\{\text{rank}(T), \text{rank}(S)\} $$
这个性质意味着，复合的过程最多只能保持、但绝不会增加变换的“[信息量](@entry_id:272315)”（以秩来衡量）。例如，如果一个映射 $S: \mathbb{R}^3 \to \mathbb{R}^2$ 的秩为1，那么无论后续与任何映射 $T: \mathbb{R}^2 \to \mathbb{R}^3$ 进行复合，得到的复合映射 $L = T \circ S: \mathbb{R}^3 \to \mathbb{R}^3$ 的秩都必然小于等于1 [@problem_id:1355083]。对于一个从三维空间到自身的线性映射，秩小于3意味着它不是满射，因此是不可逆的。这进一步等价于其[矩阵表示](@entry_id:146025)的[行列式](@entry_id:142978)为零。

#### 复合与单射/满射 (Composition and Injectivity/Surjectivity)

映射的[单射](@entry_id:183792)（injective, one-to-one）和满射（surjective, onto）性质在复合下也有明确的传递规律：
- **满射性：** 如果 $S$ 和 $T$ 都是满射的，那么它们的复合 $T \circ S$ 也必定是满射的 [@problem_id:1355116]。证明很简单：对于陪域 $W$ 中的任意向量 $\mathbf{w}$，因为 $T$ 是满射的，所以存在 $\mathbf{v} \in V$ 使得 $T(\mathbf{v})=\mathbf{w}$。又因为 $S$ 是满射的，所以存在 $\mathbf{u} \in U$ 使得 $S(\mathbf{u})=\mathbf{v}$。因此，$ (T \circ S)(\mathbf{u}) = T(S(\mathbf{u})) = T(\mathbf{v}) = \mathbf{w}$，证明 $T \circ S$ 是满射的。
- **[单射性](@entry_id:147722)：** 类似地，如果 $S$ 和 $T$ 都是单射的，那么 $T \circ S$ 也必定是[单射](@entry_id:183792)的。
- **反向推论：** 从复合映射的性质我们也可以推断出其分量映射的性质。
  - 如果 $T \circ S$ 是**[单射](@entry_id:183792)**的，那么第一个映射 $S$ 必须是[单射](@entry_id:183792)的。因为如果 $S$ 不是[单射](@entry_id:183792)的（即存在 $\mathbf{u}_1 \neq \mathbf{u}_2$ 但 $S(\mathbf{u}_1) = S(\mathbf{u}_2)$），那么 $(T \circ S)(\mathbf{u}_1) = T(S(\mathbf{u}_1)) = T(S(\mathbf{u}_2)) = (T \circ S)(\mathbf{u}_2)$，这将与 $T \circ S$ 的[单射性](@entry_id:147722)矛盾。
  - 如果 $T \circ S$ 是**满射**的，那么第二个映射 $T$ 必须是满射的。因为 $T \circ S$ 的像 $T(\text{Im}(S))$ 覆盖了整个 $W$，而 $T(\text{Im}(S))$ 又是 $T$ 的像 $\text{Im}(T)$ 的一个[子集](@entry_id:261956)，所以 $\text{Im}(T)$ 必须也等于 $W$。

#### 复合与核/像 (Composition and Kernel/Image)

复合映射与核、像之间还存在一个非常精妙的关系。考虑这样一种情况：两个非零的[线性映射](@entry_id:185132) $S: U \to V$ 和 $T: V \to W$，它们的复合 $T \circ S$ 却是零映射，即对于所有 $\mathbf{u} \in U$，都有 $(T \circ S)(\mathbf{u}) = \mathbf{0}_W$ [@problem_id:1355132]。

这意味着什么呢？对于任何 $\mathbf{u} \in U$，其像 $S(\mathbf{u})$ 经过 $T$ 的作用后变成了[零向量](@entry_id:156189)。根据核的定义，这意味着 $S(\mathbf{u})$ 必须位于 $T$ 的核空间 $\text{Ker}(T)$ 中。由于这对于任意的 $\mathbf{u} \in U$ 都成立，所以 $S$ 的整个像空间 $\text{Im}(S)$ 都必须被包含在 $T$ 的核空间 $\text{Ker}(T)$ 中。我们得到如下重要关系：
$$ T \circ S = 0 \quad \iff \quad \text{Im}(S) \subseteq \text{Ker}(T) $$
这个关系式为我们提供了一个强大的工具，用[子空间](@entry_id:150286)的包含关系来刻画复合映射何时为零。需要注意的是，这种关系通常是包含关系 $\subseteq$，而非等号 $=$。$\text{Ker}(T)$ 可能比 $\text{Im}(S)$更大，因为 $\text{Ker}(T)$ 中可能包含不属于 $\text{Im}(S)$ 的向量。

通过本章的学习，我们不仅掌握了复合[线性映射](@entry_id:185132)的计算方法，更重要的是，我们理解了它背后的[代数结构](@entry_id:137052)、与[矩阵乘法](@entry_id:156035)的联系，以及它如何影响和被[向量子空间](@entry_id:151815)的性质所决定。这些原理和机制是学习更高级线性代数概念（如[特征值](@entry_id:154894)、[对角化](@entry_id:147016)和[算子理论](@entry_id:139990)）的坚实基础。
{"hands_on_practices": [{"introduction": "要理解PageRank算法，第一步是将一个网页链接网络转化为其对应的数学表示——谷歌矩阵 $G$。这个练习将指导你完成这一基础步骤，包括处理一个重要的细节：如何应对没有出站链接的“悬挂节点”。通过计算从均匀分布开始的第一次迭代，你将亲身体验排名分数是如何根据链接结构演变的。 [@problem_id:1381670]", "problem": "考虑一个由两篇研究论文 P1 和 P2 组成的简化引文网络。其引文结构很简单：论文 P1 引用了论文 P2，但论文 P2 没有引用论文 P1。我们希望通过一步迭代算法来确定这些论文的重要性排名。\n\n在任意步骤 $k$ 时，论文的重要性由一个列向量 $\\mathbf{x}_k = \\begin{pmatrix} r_1 \\\\ r_2 \\end{pmatrix}$ 表示，其中 $r_1$ 和 $r_2$ 分别是 P1 和 P2 的非负重要性得分，满足 $r_1 + r_2 = 1$。排名根据规则 $\\mathbf{x}_{k+1} = G \\mathbf{x}_k$ 进行更新，其中 $G$ 是该网络的“谷歌矩阵”。\n\n矩阵 $G$ 定义为 $G = dS + \\frac{1-d}{n}J$，其组成部分如下：\n-   $n$ 是网络中论文的数量。\n-   $d$ 是一个阻尼因子，给定值为 $d = 0.85$。\n-   $J$ 是一个 $n \\times n$ 的矩阵，其中每个元素都为 1。\n-   $S$ 是调整后的超链接矩阵。它由超链接矩阵 $H$ 构建而来。对于超链接矩阵 $H$，如果论文 $j$ 引用了论文 $i$，则其元素 $H_{ij}$ 为 $1/L_j$，否则为 $0$，其中 $L_j$ 是论文 $j$ 引用的论文总数。为了从 $H$ 创建最终的矩阵 $S$，如果任何论文 $j$ 没有任何引用（即其在 $H$ 中的对应列全为零），则该列将被替换为一个所有元素均为 $1/n$ 的列。\n\n假设初始状态表示均匀的重要性，即每篇论文的初始排名权重相等。计算一次迭代后的重要性向量 $\\mathbf{x}_1$。\n\n将你的答案表示为一个行矩阵，其中包含 $\\mathbf{x}_1$ 的两个分量，以精确分数形式表示。", "solution": "将论文标记为节点 1 (P1) 和 2 (P2)。超链接矩阵 $H$ 的元素 $H_{ij} = 1/L_{j}$（如果论文 $j$ 引用了论文 $i$），否则为 $0$，其中 $L_{j}$ 是论文 $j$ 做出的引用数量。由于 P1 引用了 P2，我们有 $L_{1}=1$ 且 $H_{21}=1$, $H_{11}=0$。由于 P2 没有引用任何论文，$L_{2}=0$ 且 $H$ 的第 2 列全为零：\n$$\nH=\\begin{pmatrix} 0 & 0 \\\\ 1 & 0 \\end{pmatrix}.\n$$\n要构成 $S$，需将任何全零列替换为均匀列 $(1/n)\\mathbf{1}$，其中 $n=2$。因此，第 2 列被替换为 $\\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{2} \\end{pmatrix}$，得到\n$$\nS=\\begin{pmatrix} 0 & \\frac{1}{2} \\\\ 1 & \\frac{1}{2} \\end{pmatrix}.\n$$\n当阻尼因子 $d=0.85=\\frac{17}{20}$ 且 $J$ 是全一矩阵时，谷歌矩阵为\n$$\nG=dS+\\frac{1-d}{n}J=\\frac{17}{20}\\begin{pmatrix} 0 & \\frac{1}{2} \\\\ 1 & \\frac{1}{2} \\end{pmatrix}+\\frac{3}{40}\\begin{pmatrix} 1 & 1 \\\\ 1 & 1 \\end{pmatrix}\n=\\begin{pmatrix} \\frac{3}{40} & \\frac{1}{2} \\\\ \\frac{37}{40} & \\frac{1}{2} \\end{pmatrix}.\n$$\n初始的均匀重要性向量为\n$$\n\\mathbf{x}_{0}=\\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{2} \\end{pmatrix}.\n$$\n应用一次迭代，\n$$\n\\mathbf{x}_{1}=G\\mathbf{x}_{0}=\\begin{pmatrix} \\frac{3}{40} & \\frac{1}{2} \\\\ \\frac{37}{40} & \\frac{1}{2} \\end{pmatrix}\\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{2} \\end{pmatrix}\n=\\begin{pmatrix} \\frac{3}{80}+\\frac{1}{4} \\\\ \\frac{37}{80}+\\frac{1}{4} \\end{pmatrix}\n=\\begin{pmatrix} \\frac{23}{80} \\\\ \\frac{57}{80} \\end{pmatrix}.\n$$\n因此，表示为精确分数的行矩阵，其分量为 $\\frac{23}{80}$ 和 $\\frac{57}{80}$。", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{23}{80} & \\frac{57}{80} \\end{pmatrix}}$$", "id": "1381670"}, {"introduction": "PageRank的迭代过程最终会收敛到一个稳定的排名分布，这个分布就是PageRank向量，即谷歌矩阵对应于特征值 $1$ 的特征向量。这个练习将带你从迭代计算转向直接的解析求解。通过求解一个简单网络中的方程 $G\\mathbf{r} = \\mathbf{r}$，你将学会如何精确地找到最终的稳态排名。 [@problem_id:1381632]", "problem": "考虑一个由两个网页（网页A和网页B）组成的简化互联网模型。这些页面之间的链接结构如下：\n- 网页A有2个出站链接：一个指回网页A，一个指向网页B。\n- 网页B有3个出站链接：一个指向网页A，两个指回网页B。\n\nPageRank算法模拟了用户的行为。给定页面上的用户要么会跟随该页面上的一个随机链接，要么会“瞬移”到整个网络中的一个随机页面。这个过程可以用一个转移矩阵来描述，我们称之为“谷歌矩阵”$G$。\n\n$G$的构建遵循一个特定规则：$G = pS + (1-p)K$。\n这里，$p$是“阻尼因子”，表示用户跟随一个出站链接的概率。给定$p = 17/20$。矩阵$S$是“链接矩阵”，其中元素$S_{ij}$表示仅通过跟随链接从页面$j$导航到页面$i$的概率。如果页面$j$有$k$个出站链接，那么跟随任何从$j$指向$i$的特定链接的概率是$1/k$（如果不存在这样的链接，则为0）。\n矩阵$K$是“瞬移矩阵”，对于一个包含$N$个页面的网络，其每个元素都是$1/N$。它模拟了用户以相等的概率随机跳转到网络中任何页面的情况。这种情况发生的概率为$(1-p)$。\n\n用户长期停留在特定页面上的概率由“PageRank向量”$\\mathbf{r} = \\begin{pmatrix} r_A \\\\ r_B \\end{pmatrix}$给出，其中$r_A$和$r_B$分别是用户停留在网页A和网页B上的概率。该向量代表了系统的稳态，意味着它在过程的一步之后不会改变，即$G\\mathbf{r} = \\mathbf{r}$。PageRank向量的分量之和必须为1，因为它们代表一个概率分布（$r_A + r_B = 1$）。\n\n确定这个双页面网络的PageRank向量$\\mathbf{r}$。请将您的答案表示为元素为精确分数的列向量。", "solution": "令页面按$(A,B)$排序。链接矩阵$S$的元素$S_{ij}$等于从页面$j$跟随链接到页面$i$的概率。由于网页A有两个出站链接（一个到A，一个到B），而网页B有三个出站链接（一个到A，两个到B），我们有\n$$\nS=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{1}{3} \\\\\n\\frac{1}{2} & \\frac{2}{3}\n\\end{pmatrix}.\n$$\n对于$N=2$个页面，瞬移矩阵为\n$$\nK=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{1}{2} \\\\\n\\frac{1}{2} & \\frac{1}{2}\n\\end{pmatrix}.\n$$\n阻尼因子为$p=\\frac{17}{20}$，则谷歌矩阵为\n$$\nG=pS+(1-p)K=\\frac{17}{20}S+\\frac{3}{20}K.\n$$\n计算每个元素：\n$$\nG_{11}=\\frac{17}{20}\\cdot\\frac{1}{2}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{1}{2},\\quad\nG_{12}=\\frac{17}{20}\\cdot\\frac{1}{3}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{17}{60}+\\frac{3}{40}=\\frac{43}{120},\n$$\n$$\nG_{21}=\\frac{17}{20}\\cdot\\frac{1}{2}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{1}{2},\\quad\nG_{22}=\\frac{17}{20}\\cdot\\frac{2}{3}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{34}{60}+\\frac{3}{40}=\\frac{77}{120}.\n$$\n因此\n$$\nG=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{43}{120} \\\\\n\\frac{1}{2} & \\frac{77}{120}\n\\end{pmatrix}.\n$$\n令$\\mathbf{r}=\\begin{pmatrix} r_{A} \\\\ r_{B} \\end{pmatrix}$为PageRank向量，满足$G\\mathbf{r}=\\mathbf{r}$和$r_{A}+r_{B}=1$。根据$G\\mathbf{r}=\\mathbf{r}$的第一个分量，\n$$\nr_{A}=\\frac{1}{2}r_{A}+\\frac{43}{120}r_{B},\n$$\n所以\n$$\nr_{A}-\\frac{1}{2}r_{A}=\\frac{43}{120}r_{B}\\quad\\Rightarrow\\quad \\frac{1}{2}r_{A}=\\frac{43}{120}r_{B}\\quad\\Rightarrow\\quad r_{A}=\\frac{43}{60}r_{B}.\n$$\n使用$r_{A}+r_{B}=1$，\n$$\n\\frac{43}{60}r_{B}+r_{B}=1\\quad\\Rightarrow\\quad \\frac{103}{60}r_{B}=1\\quad\\Rightarrow\\quad r_{B}=\\frac{60}{103},\n$$\n因此\n$$\nr_{A}=\\frac{43}{103}.\n$$\n所以，PageRank向量为\n$$\n\\begin{pmatrix}\n\\frac{43}{103} \\\\\n\\frac{60}{103}\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\\frac{43}{103} \\\\ \\frac{60}{103}\\end{pmatrix}}$$", "id": "1381632"}, {"introduction": "一个没有任何入站链接的网页，其重要性是多少？这个思想实验探讨了PageRank算法的一个核心特征：“随机冲浪者”模型如何确保每个页面都能获得一个基础排名。通过为一个孤立页面的排名推导出一个解析表达式，你将更深刻地理解阻尼因子 $d$ 如何防止排名被困在循环中，并保证整个系统的连通性。 [@problem_id:1381663]", "problem": "PageRank 算法最初被搜索引擎用来对网页进行排名，它提供了一种衡量网络中某个页面相对重要性的方法。该算法基于一个“随机冲浪者”模型。在给定页面上的冲浪者会以概率 $d$（阻尼系数）跟随一个出链，或者以概率 $1-d$“传送”到网络中的一个随机页面。\n\n对于一个包含 $N$ 个页面的网络，页面 $i$ 的稳态 PageRank 值 $p_i$ 可以通过求解一个线性方程组得到。任意页面 $i$ 的 PageRank 控制方程由下式给出：\n$$p_i = \\frac{1-d}{N} + d \\left( \\sum_{j \\in M(i)} \\frac{p_j}{L(j)} + \\frac{P_{\\text{dangling}}}{N} \\right)$$\n在这里，$M(i)$ 是所有直接链接到页面 $i$ 的页面的集合，$L(j)$ 是页面 $j$ 的总出链数，而 $P_{\\text{dangling}}$ 是所有“悬挂页面”的 PageRank 值之和。悬挂页面被定义为没有任何出链的页面。\n\n考虑一个包含 $N$ 个页面的特定网络图，其中 $N > 1$。在这个网络中，有一个特殊的页面，我们称之为 $P_{\\text{iso}}$，它是完全孤立的：它没有任何来自其他页面的入链，也没有任何指向其他页面的出链。此外，给定条件是 $P_{\\text{iso}}$ 是整个网络中*唯一*的悬挂页面。\n\n请推导这个孤立页面 $P_{\\text{iso}}$ 的 PageRank 值 $p_{\\text{iso}}$ 的闭式解析表达式，用页面总数 $N$ 和阻尼系数 $d$ 表示。", "solution": "我们从给定的任意页面 $i$ 的稳态 PageRank 方程开始：\n$$\np_{i} = \\frac{1-d}{N} + d \\left( \\sum_{j \\in M(i)} \\frac{p_{j}}{L(j)} + \\frac{P_{\\text{dangling}}}{N} \\right).\n$$\n对于孤立页面 $P_{\\text{iso}}$，没有入链，所以 $M(P_{\\text{iso}})=\\emptyset$，因此\n$$\n\\sum_{j \\in M(P_{\\text{iso}})} \\frac{p_{j}}{L(j)} = 0.\n$$\n又根据题意，$P_{\\text{iso}}$ 是唯一的悬挂页面，所以所有悬挂页面的 PageRank 总和为\n$$\nP_{\\text{dangling}} = p_{\\text{iso}}.\n$$\n将这些代入 $i = \\text{iso}$ 的 PageRank 方程，得到\n$$\np_{\\text{iso}} = \\frac{1-d}{N} + d \\left( 0 + \\frac{p_{\\text{iso}}}{N} \\right) = \\frac{1-d}{N} + \\frac{d}{N} p_{\\text{iso}}.\n$$\n重新整理以分离出 $p_{\\text{iso}}$，\n$$\np_{\\text{iso}} - \\frac{d}{N} p_{\\text{iso}} = \\frac{1-d}{N},\n$$\n$$\np_{\\text{iso}} \\left( 1 - \\frac{d}{N} \\right) = \\frac{1-d}{N}.\n$$\n两边同除以 $1 - \\frac{d}{N}$，得到闭式表达式\n$$\np_{\\text{iso}} = \\frac{\\frac{1-d}{N}}{1 - \\frac{d}{N}} = \\frac{1-d}{N - d}.\n$$\n该表达式在 $N>1$ 和 $0 \\le d  1$（通常的 PageRank 范围）时有效，这保证了分母为正。", "answer": "$$\\boxed{\\frac{1-d}{N - d}}$$", "id": "1381663"}]}
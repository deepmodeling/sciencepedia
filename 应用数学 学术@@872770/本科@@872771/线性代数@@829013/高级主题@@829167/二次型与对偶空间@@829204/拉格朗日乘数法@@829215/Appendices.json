{"hands_on_practices": [{"introduction": "我们从一个揭示拉格朗日乘数法核心几何直觉的问题开始。这个练习的目标是在一个球面上优化一个线性函数，这个场景清晰地展示了为什么最优点出现在目标函数的梯度与约束函数的梯度平行的位置。通过这个练习 [@problem_id:1370928]，你将对该方法建立起基础的几何和代数理解。", "problem": "在一个简化的机械臂控制系统模型中，机械臂的状态由 $\\mathbb{R}^3$ 中的一个向量 $\\mathbf{s} = (s_1, s_2, s_3)$ 描述。为了保持稳定性，该状态向量必须始终是一个单位向量，即其欧几里得范数为1。系统的能耗由其状态分量的线性函数近似表示，即 $E(\\mathbf{s}) = s_1 + 2s_2 + 3s_3$。为了使机械臂在其最节能的配置下运行，需要找到使该能耗最小化的状态向量 $\\mathbf{s}$。确定这个最优状态向量 $\\mathbf{s}$ 的分量。", "solution": "该问题要求我们找到向量 $\\mathbf{s} = (s_1, s_2, s_3)$，使得函数 $E(s_1, s_2, s_3) = s_1 + 2s_2 + 3s_3$ 在满足一个约束条件的情况下取最小值。约束条件是 $\\mathbf{s}$ 必须是一个单位向量，可以写作 $s_1^2 + s_2^2 + s_3^2 = 1$。这是一个约束优化问题，可以使用拉格朗日乘数法来解决。\n\n首先，我们定义目标函数 $f(s_1, s_2, s_3)$ 和约束函数 $g(s_1, s_2, s_3)$。\n目标函数：$f(s_1, s_2, s_3) = s_1 + 2s_2 + 3s_3$。\n约束函数：$g(s_1, s_2, s_3) = s_1^2 + s_2^2 + s_3^2 - 1 = 0$。\n\n拉格朗日乘数法指出，在极值点，目标函数的梯度必须与约束函数的梯度成正比。即，对于某个标量 $\\lambda$（称为拉格朗日乘数），有 $\\nabla f = \\lambda \\nabla g$。\n\n我们计算 $f$ 和 $g$ 的梯度：\n$f$ 的梯度为：\n$$ \\nabla f = \\left( \\frac{\\partial f}{\\partial s_1}, \\frac{\\partial f}{\\partial s_2}, \\frac{\\partial f}{\\partial s_3} \\right) = (1, 2, 3) $$\n$g$ 的梯度为：\n$$ \\nabla g = \\left( \\frac{\\partial g}{\\partial s_1}, \\frac{\\partial g}{\\partial s_2}, \\frac{\\partial g}{\\partial s_3} \\right) = (2s_1, 2s_2, 2s_3) $$\n\n现在，我们根据 $\\nabla f = \\lambda \\nabla g$ 建立方程组：\n1.  $1 = \\lambda(2s_1)$\n2.  $2 = \\lambda(2s_2)$\n3.  $3 = \\lambda(2s_3)$\n\n我们还有原始的约束方程：\n4.  $s_1^2 + s_2^2 + s_3^2 = 1$\n\n从方程(1)、(2)和(3)，我们可以用 $\\lambda$ 表示 $s_1, s_2$ 和 $s_3$。注意 $\\lambda$ 不能为零，否则会导致像 $1=0$ 这样的矛盾。\n从(1)：$s_1 = \\frac{1}{2\\lambda}$\n从(2)：$s_2 = \\frac{2}{2\\lambda} = \\frac{1}{\\lambda}$\n从(3)：$s_3 = \\frac{3}{2\\lambda}$\n\n接下来，我们将这些表达式代入约束方程(4)：\n$$ \\left(\\frac{1}{2\\lambda}\\right)^2 + \\left(\\frac{1}{\\lambda}\\right)^2 + \\left(\\frac{3}{2\\lambda}\\right)^2 = 1 $$\n$$ \\frac{1}{4\\lambda^2} + \\frac{1}{\\lambda^2} + \\frac{9}{4\\lambda^2} = 1 $$\n为了合并左边的项，我们找到公分母 $4\\lambda^2$：\n$$ \\frac{1}{4\\lambda^2} + \\frac{4}{4\\lambda^2} + \\frac{9}{4\\lambda^2} = 1 $$\n$$ \\frac{1+4+9}{4\\lambda^2} = 1 $$\n$$ \\frac{14}{4\\lambda^2} = 1 $$\n这得到 $4\\lambda^2 = 14$，所以 $\\lambda^2 = \\frac{14}{4} = \\frac{7}{2}$。\n解出 $\\lambda$，我们得到两个可能的值：\n$$ \\lambda = \\pm \\sqrt{\\frac{7}{2}} = \\pm \\frac{\\sqrt{14}}{2} $$\n\n这两个 $\\lambda$ 值对应于两个极值（一个最大值和一个最小值）的候选点。\n\n情况1：$\\lambda = \\frac{\\sqrt{14}}{2}$\n$s_1 = \\frac{1}{2(\\frac{\\sqrt{14}}{2})} = \\frac{1}{\\sqrt{14}} = \\frac{\\sqrt{14}}{14}$\n$s_2 = \\frac{1}{\\frac{\\sqrt{14}}{2}} = \\frac{2}{\\sqrt{14}} = \\frac{2\\sqrt{14}}{14} = \\frac{\\sqrt{14}}{7}$\n$s_3 = \\frac{3}{2(\\frac{\\sqrt{14}}{2})} = \\frac{3}{\\sqrt{14}} = \\frac{3\\sqrt{14}}{14}$\n这给出了向量 $\\mathbf{s}_A = \\left(\\frac{\\sqrt{14}}{14}, \\frac{\\sqrt{14}}{7}, \\frac{3\\sqrt{14}}{14}\\right)$。\n\n情况2：$\\lambda = -\\frac{\\sqrt{14}}{2}$\n$s_1 = \\frac{1}{2(-\\frac{\\sqrt{14}}{2})} = -\\frac{1}{\\sqrt{14}} = -\\frac{\\sqrt{14}}{14}$\n$s_2 = \\frac{1}{-\\frac{\\sqrt{14}}{2}} = -\\frac{2}{\\sqrt{14}} = -\\frac{2\\sqrt{14}}{14} = -\\frac{\\sqrt{14}}{7}$\n$s_3 = \\frac{3}{2(-\\frac{\\sqrt{14}}{2})} = -\\frac{3}{\\sqrt{14}} = -\\frac{3\\sqrt{14}}{14}$\n这给出了向量 $\\mathbf{s}_B = \\left(-\\frac{\\sqrt{14}}{14}, -\\frac{\\sqrt{14}}{7}, -\\frac{3\\sqrt{14}}{14}\\right)$。\n\n为了找出哪个向量使能量 $E(\\mathbf{s}) = s_1 + 2s_2 + 3s_3$ 最小，我们在两个点上计算 $E$ 的值。\n对于 $\\mathbf{s}_A$：\n$E(\\mathbf{s}_A) = \\frac{\\sqrt{14}}{14} + 2\\left(\\frac{2\\sqrt{14}}{14}\\right) + 3\\left(\\frac{3\\sqrt{14}}{14}\\right) = \\frac{\\sqrt{14}}{14}(1+4+9) = \\frac{14\\sqrt{14}}{14} = \\sqrt{14}$。\n\n对于 $\\mathbf{s}_B$：\n$E(\\mathbf{s}_B) = -\\frac{\\sqrt{14}}{14} + 2\\left(-\\frac{2\\sqrt{14}}{14}\\right) + 3\\left(-\\frac{3\\sqrt{14}}{14}\\right) = -\\frac{\\sqrt{14}}{14}(1+4+9) = -\\frac{14\\sqrt{14}}{14} = -\\sqrt{14}$。\n\n比较这两个值，$E(\\mathbf{s}_A) = \\sqrt{14}$ 和 $E(\\mathbf{s}_B) = -\\sqrt{14}$，最小能量是 $-\\sqrt{14}$。这个最小值在状态向量 $\\mathbf{s}_B$ 处取得。\n因此，使能耗最小化的最优状态向量是 $\\mathbf{s} = \\left(-\\frac{\\sqrt{14}}{14}, -\\frac{\\sqrt{14}}{7}, -\\frac{3\\sqrt{14}}{14}\\right)$。", "answer": "$$\\boxed{\\begin{pmatrix} -\\frac{\\sqrt{14}}{14} & -\\frac{\\sqrt{14}}{7} & -\\frac{3\\sqrt{14}}{14} \\end{pmatrix}}$$", "id": "1370928"}, {"introduction": "在掌握了基本的几何原理之后，我们现在将拉格朗日乘数法应用到物理学和工程学中的一个常见问题：能量最小化。这个练习 [@problem_id:1370919] 的任务是为一个被限制在特定平面上的系统寻找势能最低点。它展示了如何处理二次形式的目标函数，这种函数在能量、成本或误差的模型中非常普遍。", "problem": "在一个机器人制造过程中，一个机械臂的末端执行器被约束在一个由方程 $x + 2y - z = 10$ 定义的特定平面上移动。在坐标 $(x, y, z)$ 处维持机械臂位置所需的能量由势能函数 $E(x, y, z) = 2x^2 + y^2 + 3z^2$ 建模，其中系数代表与机械臂执行器刚度相关的权重因子。为了找到该平面上最稳定的静止位置，系统会自然地稳定在势能最小的点。确定这个能量最低点的坐标 $(x, y, z)$。请用三个精确的分数值表示 $x, y, $ 和 $z$。", "solution": "这是一个约束优化问题。我们需要求函数 $f(x, y, z) = 2x^2 + y^2 + 3z^2$ 在约束条件 $g(x, y, z) = x + 2y - z - 10 = 0$ 下的最小值。我们将使用拉格朗日乘数法。\n\n该方法需要找到一个点 $(x, y, z)$ 和一个拉格朗日乘数 $\\lambda$，使得它们满足方程 $\\nabla f(x, y, z) = \\lambda \\nabla g(x, y, z)$ 和约束条件 $g(x, y, z) = 0$。\n\n首先，我们计算函数 $f$ 和约束 $g$ 的梯度。\n$f$ 的梯度是：\n$$ \\nabla f = \\left\\langle \\frac{\\partial f}{\\partial x}, \\frac{\\partial f}{\\partial y}, \\frac{\\partial f}{\\partial z} \\right\\rangle = \\langle 4x, 2y, 6z \\rangle $$\n$g$ 的梯度是：\n$$ \\nabla g = \\left\\langle \\frac{\\partial g}{\\partial x}, \\frac{\\partial g}{\\partial y}, \\frac{\\partial g}{\\partial z} \\right\\rangle = \\langle 1, 2, -1 \\rangle $$\n\n现在，我们根据 $\\nabla f = \\lambda \\nabla g$ 建立方程组：\n1.  $4x = \\lambda (1) \\implies 4x = \\lambda$\n2.  $2y = \\lambda (2) \\implies 2y = 2\\lambda$\n3.  $6z = \\lambda (-1) \\implies 6z = -\\lambda$\n\n从这三个方程中，我们可以用 $\\lambda$ 来表示 $x, y,$ 和 $z$：\n由 (1) 得，$x = \\frac{\\lambda}{4}$。\n由 (2) 得，$y = \\lambda$。\n由 (3) 得，$z = -\\frac{\\lambda}{6}$。\n\n接下来，我们将 $x, y,$ 和 $z$ 的这些表达式代入约束方程 $x + 2y - z = 10$：\n$$ \\left(\\frac{\\lambda}{4}\\right) + 2(\\lambda) - \\left(-\\frac{\\lambda}{6}\\right) = 10 $$\n$$ \\frac{\\lambda}{4} + 2\\lambda + \\frac{\\lambda}{6} = 10 $$\n\n为了解出 $\\lambda$，我们找到分数的公分母，即 12：\n$$ \\frac{3\\lambda}{12} + \\frac{24\\lambda}{12} + \\frac{2\\lambda}{12} = 10 $$\n$$ \\frac{3\\lambda + 24\\lambda + 2\\lambda}{12} = 10 $$\n$$ \\frac{29\\lambda}{12} = 10 $$\n$$ \\lambda = \\frac{10 \\times 12}{29} = \\frac{120}{29} $$\n\n现在我们得到了 $\\lambda$ 的值，可以将其代回到 $x, y,$ 和 $z$ 的表达式中，以求出坐标 $(x, y, z)$：\n$$ x = \\frac{\\lambda}{4} = \\frac{1}{4} \\left(\\frac{120}{29}\\right) = \\frac{30}{29} $$\n$$ y = \\lambda = \\frac{120}{29} $$\n$$ z = -\\frac{\\lambda}{6} = -\\frac{1}{6} \\left(\\frac{120}{29}\\right) = -\\frac{20}{29} $$\n\n因此，平面上能量最小化的点是 $\\left(\\frac{30}{29}, \\frac{120}{29}, -\\frac{20}{29}\\right)$。题目要求用三个精确的分数值表示 $x, y,$ 和 $z$ 作为答案。", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{30}{29} & \\frac{120}{29} & -\\frac{20}{29} \\end{pmatrix}}$$", "id": "1370919"}, {"introduction": "现实世界中的优化问题常常涉及不止一个约束条件。我们最后的这个练习 [@problem_id:1370922] 将演示拉格朗日乘数法如何巧妙地扩展以处理多个同步条件。通过寻找一个同时被约束在球面和平面上的粒子的平衡点，我们学习如何建立并求解一个包含多个乘数的方程组，从而突显该方法的多功能性。", "problem": "一个带电粒子被约束在以原点为中心、单位半径的导电球体表面上运动。一个外部均匀电场对该粒子施加了进一步的约束，迫使它位于由方程 $x + 2y + 3z = 0$ 定义的平面上。该粒子在一个独立的非均匀场中的势能由函数 $U(x, y, z) = -k(x + y)$ 给出，其中 $k$ 是一个正常数。粒子会自然地处于其势能最小的稳定平衡位置。求这个稳定平衡点的笛卡尔坐标 $(x, y, z)$。你的答案应该是一组精确的符号表达式。", "solution": "我们必须在粒子位于单位球面 $x^2+y^2+z^2=1$ 和平面 $x+2y+3z=0$ 的约束条件下，最小化势能 $U(x,y,z)=-k(x+y)$。由于 $k>0$ 是一个正常数，最小化 $U$ 等价于在相同约束条件下最大化 $x+y$。\n\n为这些约束引入拉格朗日乘数 $\\lambda$ 和 $\\mu$，并考虑拉格朗日函数：\n$$ L(x,y,z,\\lambda,\\mu) = x+y - \\lambda(x^2+y^2+z^2-1) - \\mu(x+2y+3z) $$\n驻点条件给出：\n$$ \\frac{\\partial L}{\\partial x} = 1 - 2\\lambda x - \\mu = 0 $$\n$$ \\frac{\\partial L}{\\partial y} = 1 - 2\\lambda y - 2\\mu = 0 $$\n$$ \\frac{\\partial L}{\\partial z} = -2\\lambda z - 3\\mu = 0 $$\n以及约束条件：\n$$ x^2+y^2+z^2=1 $$\n$$ x+2y+3z=0 $$\n从前三个方程可得：\n$$ x = \\frac{1-\\mu}{2\\lambda} $$\n$$ y = \\frac{1-2\\mu}{2\\lambda} $$\n$$ z = \\frac{-3\\mu}{2\\lambda} $$\n代入平面约束 $x+2y+3z=0$ 可得：\n$$ \\frac{(1-\\mu)+2(1-2\\mu)+3(-3\\mu)}{2\\lambda} = 0 \\quad\\Longrightarrow\\quad 3-14\\mu=0 \\quad\\Longrightarrow\\quad \\mu=\\frac{3}{14} $$\n因此：\n$$ x = \\frac{11}{28\\lambda},\\quad y = \\frac{2}{7\\lambda},\\quad z = \\frac{-9}{28\\lambda} $$\n球面约束 $x^2+y^2+z^2=1$ 给出：\n$$ \\frac{121}{784\\lambda^2} + \\frac{4}{49\\lambda^2} + \\frac{81}{784\\lambda^2} = 1 \\quad\\Longrightarrow\\quad \\frac{266}{784\\lambda^2} = 1 \\quad\\Longrightarrow\\quad \\lambda^2 = \\frac{19}{56} $$\n为了使 $x+y$ 最大化，我们选择 $\\lambda$ 的符号，取 $\\lambda>0$。因此，极值点与 $(11,8,-9)$ 成比例，并归一化为单位长度：\n$$ (x,y,z) = \\frac{1}{\\sqrt{11^2+8^2+(-9)^2}} (11,8,-9) = \\frac{1}{\\sqrt{266}} (11,8,-9) $$\n该点位于单位球面上和该平面上（因为 $11+2 \\cdot 8+3 \\cdot (-9)=0$），并且它最大化了 $x+y$，因此在 $k>0$ 的情况下最小化了 $U=-k(x+y)$。常数 $k$ 仅对目标函数进行缩放，不影响最大值点的位置。", "answer": "$$\\boxed{\\begin{pmatrix}\\frac{11}{\\sqrt{266}} & \\frac{8}{\\sqrt{266}} & -\\frac{9}{\\sqrt{266}}\\end{pmatrix}}$$", "id": "1370922"}]}
{"hands_on_practices": [{"introduction": "鞅的许多核心性质源于其增量的特殊结构。本练习将介绍鞅差序列（Martingale Difference Sequence, MDS）这一基本构件，即在给定过去信息下期望为零的随机变量序列。通过验证一个具体的加权随机游走增量序列是否构成MDS [@problem_id:3049353]，你将练习应用鞅差的核心定义，并利用其不相关的关键性质来精确计算部分和的方差。", "problem": "设 $\\left(\\Omega,\\mathcal{F},\\mathbb{P}\\right)$ 是一个概率空间，其上定义了一个独立同分布 (i.i.d.) 的 Rademacher 随机变量序列 $\\left(\\xi_{k}\\right)_{k \\geq 1}$，即对每个 $k \\in \\mathbb{N}$ 都有 $\\mathbb{P}\\!\\left(\\xi_{k}=1\\right)=\\mathbb{P}\\!\\left(\\xi_{k}=-1\\right)=\\frac{1}{2}$。固定一个常数 $r$ 满足 $0  r  1$。定义一个新的随机变量序列 $\\left(D_{k}\\right)_{k \\geq 1}$ 为 $D_{k}:=r^{k-1}\\xi_{k}$。令 $S_{n}:=\\sum_{k=1}^{n}D_{k}$。设 $\\left(\\mathcal{F}_{k}\\right)_{k \\geq 0}$ 是由 $\\left(\\xi_{k}\\right)$ 生成的自然滤波，即 $\\mathcal{F}_{0}=\\{\\emptyset,\\Omega\\}$ 且对 $k \\geq 1$ 有 $\\mathcal{F}_{k}=\\sigma\\!\\left(\\xi_{1},\\dots,\\xi_{k}\\right)$。\n\n- 证明 $\\left(D_{k}\\right)_{k \\geq 1}$ 是关于信息流 $\\left(\\mathcal{F}_{k}\\right)_{k \\geq 0}$ 的鞅差序列 (MDS)。\n- 验证几乎必然有 $|D_k| \\le M$，其中 $M$ 是一个不依赖于 $k$ 的常数。\n- 利用 $\\left(D_{k}\\right)_{k \\geq 1}$ 的 MDS 性质，推导出 $\\mathrm{Var}\\!\\left(S_{n}\\right)$ 的表达式。", "solution": "首先验证问题以确保其是适定的、有科学依据且完整的。所有给定的定义和常数在随机过程理论中都是标准的。任务是具体的、可数学形式化的，且不包含任何矛盾或歧义。关于常数 $r$ 的条件与所需的计算一致。因此，该问题被认为是有效的，下面提供完整解答。\n\n问题要求做三件事：\n1.  证明序列 $\\left(D_{k}\\right)_{k \\geq 1}$ 是关于滤波 $\\left(\\mathcal{F}_{k}\\right)_{k \\geq 0}$ 的鞅差序列 (MDS)。\n2.  验证几乎必然有 $|D_k| \\le M$，其中 $M$ 是一个不依赖于 $k$ 的常数。\n3.  计算方差 $\\mathrm{Var}\\!\\left(S_{n}\\right)$。\n\n我们将按顺序解决每个部分。\n\n一个随机变量序列 $\\left(D_k\\right)_{k \\geq 1}$ 是关于滤波 $\\left(\\mathcal{F}_k\\right)_{k \\geq 0}$ 的鞅差序列，如果它对所有 $k \\ge 1$ 都满足以下三个条件：\n(i) $D_k$ 是 $\\mathcal{F}_k$-可测的。\n(ii) $D_k$ 是可积的，即 $\\mathbb{E}\\!\\left[|D_k|\\right]  \\infty$。\n(iii) $D_k$ 给定过去的条件期望为零，即 $\\mathbb{E}\\!\\left[D_k|\\mathcal{F}_{k-1}\\right] = 0$。\n\n让我们对 $D_{k}=r^{k-1}\\xi_{k}$ 验证这些条件。\n\n(i) **可测性**：滤波定义为 $\\mathcal{F}_{k}=\\sigma\\!\\left(\\xi_{1},\\dots,\\xi_{k}\\right)$。根据定义，随机变量 $\\xi_k$ 关于它所生成的 $\\sigma$-代数 $\\mathcal{F}_k$ 是可测的。由于 $D_k$ 是 $\\xi_k$ 的一个常数倍（即 $D_k = f(\\xi_k)$，其中 $f(x)=r^{k-1}x$），并且 $f$ 是一个 Borel 可测函数，因此 $D_k$ 也是 $\\mathcal{F}_k$-可测的。\n\n(ii) **可积性**：我们计算 $D_k$ 的绝对值的期望：\n$$\n\\mathbb{E}\\!\\left[|D_k|\\right] = \\mathbb{E}\\!\\left[|r^{k-1}\\xi_{k}|\\right]\n$$\n由于 $0  r  1$ 且 $k \\geq 1$，项 $r^{k-1}$ 是一个正常数。随机变量 $\\xi_k$ 取值于 $\\{-1, 1\\}$，所以几乎必然有 $|\\xi_k|=1$。\n$$\n\\mathbb{E}\\!\\left[|D_k|\\right] = \\mathbb{E}\\!\\left[r^{k-1}|\\xi_k|\\right] = r^{k-1}\\mathbb{E}\\!\\left[|\\xi_k|\\right] = r^{k-1}\\mathbb{E}\\!\\left[1\\right] = r^{k-1}\n$$\n由于对任何 $k \\geq 1$，$r^{k-1}$ 都是一个有限实数，因此条件 $\\mathbb{E}\\!\\left[|D_k|\\right]  \\infty$ 成立。\n\n(iii) **鞅差序列条件**：我们必须证明 $\\mathbb{E}\\!\\left[D_k|\\mathcal{F}_{k-1}\\right] = 0$。\n$$\n\\mathbb{E}\\!\\left[D_k|\\mathcal{F}_{k-1}\\right] = \\mathbb{E}\\!\\left[r^{k-1}\\xi_k|\\mathcal{F}_{k-1}\\right]\n$$\n项 $r^{k-1}$ 是一个确定性常数，因此可以从条件期望中提出：\n$$\n\\mathbb{E}\\!\\left[D_k|\\mathcal{F}_{k-1}\\right] = r^{k-1}\\mathbb{E}\\!\\left[\\xi_k|\\mathcal{F}_{k-1}\\right]\n$$\n序列 $\\left(\\xi_i\\right)_{i \\geq 1}$ 是独立的。这意味着 $\\xi_k$ 与随机变量集合 $\\{\\xi_1, \\dots, \\xi_{k-1}\\}$ 独立。因此，$\\xi_k$ 与它们生成的 $\\sigma$-代数 $\\mathcal{F}_{k-1}=\\sigma\\!\\left(\\xi_{1},\\dots,\\xi_{k-1}\\right)$ 独立。条件期望的一个基本性质是，如果一个随机变量 $X$ 与一个 $\\sigma$-代数 $\\mathcal{G}$ 独立，则 $\\mathbb{E}\\!\\left[X|\\mathcal{G}\\right]=\\mathbb{E}\\!\\left[X\\right]$。应用此性质，我们得到：\n$$\n\\mathbb{E}\\!\\left[\\xi_k|\\mathcal{F}_{k-1}\\right] = \\mathbb{E}\\!\\left[\\xi_k\\right]\n$$\nRademacher 随机变量 $\\xi_k$ 的期望为：\n$$\n\\mathbb{E}\\!\\left[\\xi_k\\right] = (-1) \\cdot \\mathbb{P}\\!\\left(\\xi_k=-1\\right) + (1) \\cdot \\mathbb{P}\\!\\left(\\xi_k=1\\right) = (-1)\\cdot\\frac{1}{2} + (1)\\cdot\\frac{1}{2} = 0\n$$\n将此代回，我们得到：\n$$\n\\mathbb{E}\\!\\left[D_k|\\mathcal{F}_{k-1}\\right] = r^{k-1} \\cdot 0 = 0\n$$\n所有三个条件均已满足。因此，$\\left(D_{k}\\right)_{k \\geq 1}$ 是关于 $\\left(\\mathcal{F}_{k}\\right)_{k \\geq 0}$ 的鞅差序列。\n\n接下来，我们验证该差分序列几乎必然有界。我们考虑 $D_k$ 的绝对值：\n$$\n|D_k| = |r^{k-1}\\xi_k| = |r^{k-1}||\\xi_k|\n$$\n由于 $0  r  1$ 且 $k \\geq 1$，我们有 $0  r^{k-1} \\leq r^0 = 1$。并且，我们几乎必然有 $|\\xi_k|=1$。因此，\n$$\n|D_k| = r^{k-1} \\cdot 1 = r^{k-1} \\le 1.\n$$\n我们可以选择常数 $M=1$，它不依赖于 $k$。因此，几乎必然有 $|D_k| \\le 1$。\n\n最后，我们计算 $\\mathrm{Var}(S_n)$。\n鞅差序列的一个关键性质是其项不相关。具体来说，对于 $j  k$：\n$$\n\\mathbb{E}[D_j D_k] = \\mathbb{E}[\\mathbb{E}[D_j D_k | \\mathcal{F}_{k-1}]]\n$$\n由于 $D_j$ 是 $\\mathcal{F}_j$-可测的，且 $j  k$，所以它也是 $\\mathcal{F}_{k-1}$-可测的。因此，我们可以把它从内部期望中提出来：\n$$\n\\mathbb{E}[D_j \\mathbb{E}[D_k | \\mathcal{F}_{k-1}]]\n$$\n由于 $\\left(D_{k}\\right)$ 是一个 MDS，$\\mathbb{E}[D_k | \\mathcal{F}_{k-1}]=0$。因此，$\\mathbb{E}[D_j D_k] = \\mathbb{E}[D_j \\cdot 0] = 0$。\n$S_n$ 的方差是：\n$$\n\\mathrm{Var}(S_n) = \\mathrm{Var}\\left(\\sum_{k=1}^n D_k\\right) = \\sum_{k=1}^n \\mathrm{Var}(D_k) + 2\\sum_{1 \\le j  k \\le n} \\mathrm{Cov}(D_j, D_k)\n$$\n由于对所有 $k$，$\\mathbb{E}[D_k] = \\mathbb{E}[\\mathbb{E}[D_k|\\mathcal{F}_{k-1}]] = \\mathbb{E}[0] = 0$，我们有 $\\mathrm{Cov}(D_j, D_k) = \\mathbb{E}[D_j D_k] - \\mathbb{E}[D_j]\\mathbb{E}[D_k] = 0 - 0 = 0$。因此，方差是各项方差之和：\n$$\n\\mathrm{Var}(S_n) = \\sum_{k=1}^n \\mathrm{Var}(D_k)\n$$\n我们计算 $\\mathrm{Var}(D_k)$：\n$$\n\\mathrm{Var}(D_k) = \\mathbb{E}[D_k^2] - (\\mathbb{E}[D_k])^2 = \\mathbb{E}[D_k^2] - 0^2 = \\mathbb{E}[(r^{k-1}\\xi_k)^2] = \\mathbb{E}[r^{2(k-1)}\\xi_k^2] = r^{2(k-1)}\\mathbb{E}[\\xi_k^2]\n$$\n由于 $\\xi_k$ 取值于 $\\{-1, 1\\}$，$\\xi_k^2=1$。所以 $\\mathbb{E}[\\xi_k^2] = 1$。\n$$\n\\mathrm{Var}(D_k) = r^{2(k-1)}\n$$\n现在我们可以对方差求和：\n$$\n\\mathrm{Var}(S_n) = \\sum_{k=1}^n r^{2(k-1)} = \\sum_{j=0}^{n-1} (r^2)^j\n$$\n这是一个公比为 $r^2$ 的几何级数。由于 $0  r  1$，我们有 $0  r^2  1$。级数的和是：\n$$\n\\mathrm{Var}(S_n) = \\frac{1 - (r^2)^n}{1-r^2} = \\frac{1-r^{2n}}{1-r^2}.\n$$\n这是最终的答案。", "answer": "$$\n\\boxed{\\frac{1-r^{2n}}{1-r^2}}\n$$", "id": "3049353"}, {"introduction": "并非所有随机过程都具有鞅的“公平游戏”特性，但许多过程（如下鞅）内部仍隐藏着一个鞅结构。Doob分解定理为我们提供了精确分离这种结构的方法，它将下鞅分解为一个鞅和一个可预测的增过程。在本练习中 [@problem_id:3049361]，你将对一个离散时间计数过程应用此定理，亲手推导其补偿子，从而深入理解一个过程的“意外”部分（鞅）如何与其可预测的“趋势”部分分离。", "problem": "考虑一个过滤概率空间 $(\\Omega,\\mathcal{F},(\\mathcal{F}_{n})_{n \\geq 0},\\mathbb{P})$。一个离散时间计数过程是一个适应过程 $(N_{n})_{n \\geq 0}$，满足 $N_{0}=0$，取值于 $\\mathbb{Z}_{\\geq 0}$，并且对所有 $n \\geq 1$ 满足 $N_{n}-N_{n-1} \\in \\{0,1\\}$。假设 $(N_{n})_{n \\geq 0}$ 具有条件伯努利增量，其时变成功概率由下式给出\n$$\n\\mathbb{P}\\!\\left(N_{k}-N_{k-1}=1 \\,\\middle|\\, \\mathcal{F}_{k-1}\\right) \\,=\\, \\frac{1}{k+2}, \\quad k \\geq 1,\n$$\n并且滤波 $(\\mathcal{F}_{n})_{n \\geq 0}$ 是 $(N_{n})_{n \\geq 0}$ 的自然滤波。\n\n仅从离散时间下的下鞅、鞅、可料过程（指在时间 $n$ 时是 $\\mathcal{F}_{n-1}$-可测的）的定义，以及离散时间下鞅的 Doob 分解定理出发，完成以下任务：\n\n- 证明 $(N_{n})_{n \\geq 0}$ 是关于 $(\\mathcal{F}_{n})_{n \\geq 0}$ 的一个下鞅。\n- 使用 Doob 分解定理推导唯一的、满足 $A_{0}=0$ 的可料补偿器 $(A_{n})_{n \\geq 0}$，使得 $N_{n}-A_{n}$ 是一个鞅。\n- 从基本原理出发，验证 $(A_{n})_{n \\geq 0}$ 是非递减且可料的。\n\n将你的最终答案表示为仅含 $n$ 的单个显式表达式。如果使用特殊函数，请在推理过程中明确定义它们。你的最终答案必须是单个闭式解析表达式，并且不得包含不等式或等式。", "solution": "首先对问题陈述进行严格的验证过程。\n\n### 第 1 步：提取已知条件\n- **概率空间和滤波**：一个过滤概率空间 $(\\Omega,\\mathcal{F},(\\mathcal{F}_{n})_{n \\geq 0},\\mathbb{P})$。\n- **过程定义**：$(N_{n})_{n \\geq 0}$ 是一个离散时间计数过程。\n- **适应性**：$(N_{n})_{n \\geq 0}$ 对 $(\\mathcal{F}_{n})_{n \\geq 0}$ 是适应的。\n- **初始条件**：$N_{0}=0$。\n- **状态空间**：对所有 $n \\geq 0$，$N_{n} \\in \\mathbb{Z}_{\\geq 0}$。\n- **增量性质**：对所有 $n \\geq 1$，$N_{n}-N_{n-1} \\in \\{0,1\\}$。\n- **条件增量定律**：对 $k \\geq 1$，$\\mathbb{P}\\!\\left(N_{k}-N_{k-1}=1 \\,\\middle|\\, \\mathcal{F}_{k-1}\\right) \\,=\\, \\frac{1}{k+2}$。\n- **滤波说明**：$(\\mathcal{F}_{n})_{n \\geq 0}$ 是 $(N_{n})_{n \\geq 0}$ 的自然滤波，即 $\\mathcal{F}_{n} = \\sigma(N_0, N_1, \\ldots, N_n)$。\n- **任务**：\n    1. 证明 $(N_{n})_{n \\geq 0}$ 是一个下鞅。\n    2. 使用 Doob 分解定理找到唯一的、满足 $A_0=0$ 的可料补偿器 $(A_{n})_{n \\geq 0}$，使得 $N_n - A_n$ 是一个鞅。\n    3. 从基本原理出发，验证 $(A_{n})_{n \\geq 0}$ 是非递减且可料的。\n- **要求输出**：$A_n$ 关于 $n$ 的单个闭式解析表达式。\n\n### 第 2 步：使用提取的已知条件进行验证\n- **科学基础**：该问题在随机过程的标准数学框架内表述，特别是离散时间鞅理论。所使用的所有概念，如计数过程、自然滤波、条件期望和 Doob 分解，都在概率论中有基本且严格的定义。给定的条件概率 $\\frac{1}{k+2}$ 对所有 $k \\ge 1$ 都是一个良定义的概率，因为 $0  \\frac{1}{k+2} \\le \\frac{1}{3}$。前提在科学上和数学上都是合理的。\n- **良定性**：该问题是自洽的，提供了所有必要的定义和条件。其目标是应用一个基本定理（Doob 分解），该定理的存在性和唯一性结果保证了问题的良定结构。问题是明确的，并导向补偿器 $(A_n)$ 的唯一解。\n- **客观性**：该问题以精确、形式化的数学语言陈述，没有任何主观或基于观点的断言。\n\n### 第 3 步：结论与行动\n该问题在数学上是合理的、良定的和客观的。它被判定为**有效**。现在开始求解过程。\n\n### 解答推导\n\n解答根据问题陈述中概述的三个任务进行组织。\n\n**1. 证明 $(N_{n})_{n \\geq 0}$ 是一个下鞅**\n\n一个离散时间过程 $(X_n)_{n \\geq 0}$ 是关于滤波 $(\\mathcal{F}_n)_{n \\geq 0}$ 的下鞅，如果它满足三个条件：\ni. $(X_n)$ 对 $(\\mathcal{F}_n)$ 是适应的，即对所有 $n \\geq 0$，$X_n$ 是 $\\mathcal{F}_n$-可测的。\nii. $(X_n)$ 是可积的，即对所有 $n \\geq 0$，$\\mathbb{E}[|X_n|]  \\infty$。\niii. 对所有 $n \\geq 1$，$\\mathbb{E}[X_n \\,|\\, \\mathcal{F}_{n-1}] \\geq X_{n-1}$。\n\n我们对过程 $(N_n)_{n \\geq 0}$ 验证这些条件。\n\ni. **适应性**：问题陈述指出 $(N_n)_{n \\geq 0}$ 是一个适应过程。这一点也由 $(\\mathcal{F}_n)$ 是 $(N_n)$ 的自然滤波这一事实所保证。\n\nii. **可积性**：对任意 $n \\geq 1$，我们可以写出 $N_n = N_0 + \\sum_{k=1}^n (N_k - N_{k-1})$。因为 $N_0=0$ 且 $N_k - N_{k-1} \\in \\{0,1\\}$，所以有 $0 \\leq N_n \\leq n$。由于 $N_n$ 是一个有界随机变量，其期望是有限的。具体来说，对所有 $n \\geq 0$，$\\mathbb{E}[|N_n|] = \\mathbb{E}[N_n] \\leq n  \\infty$。\n\niii. **下鞅不等式**：我们必须计算对 $n \\geq 1$ 的条件期望 $\\mathbb{E}[N_n \\,|\\, \\mathcal{F}_{n-1}]$。\n这里不需要使用条件期望的塔性质；我们利用线性和 $N_{n-1}$ 是 $\\mathcal{F}_{n-1}$-可测的事实：\n$$ \\mathbb{E}[N_n \\,|\\, \\mathcal{F}_{n-1}] = \\mathbb{E}[N_{n-1} + (N_n - N_{n-1}) \\,|\\, \\mathcal{F}_{n-1}] = N_{n-1} + \\mathbb{E}[N_n - N_{n-1} \\,|\\, \\mathcal{F}_{n-1}] $$\n增量 $N_n - N_{n-1}$ 是一个伯努利随机变量。其条件期望为：\n$$ \\mathbb{E}[N_n - N_{n-1} \\,|\\, \\mathcal{F}_{n-1}] = 1 \\cdot \\mathbb{P}(N_n - N_{n-1} = 1 \\,|\\, \\mathcal{F}_{n-1}) + 0 \\cdot \\mathbb{P}(N_n - N_{n-1} = 0 \\,|\\, \\mathcal{F}_{n-1}) $$\n使用给定的条件概率，\n$$ \\mathbb{E}[N_n - N_{n-1} \\,|\\, \\mathcal{F}_{n-1}] = \\frac{1}{n+2} $$\n将此代回，我们得到：\n$$ \\mathbb{E}[N_n \\,|\\, \\mathcal{F}_{n-1}] = N_{n-1} + \\frac{1}{n+2} $$\n因为 $n \\geq 1$，我们有 $\\frac{1}{n+2} > 0$，这意味着：\n$$ \\mathbb{E}[N_n \\,|\\, \\mathcal{F}_{n-1}] > N_{n-1} $$\n所有三个条件都满足。因此，$(N_n)_{n \\geq 0}$ 是一个关于其自然滤波的（严格）下鞅。\n\n**2. 推导可料补偿器 $(A_n)_{n \\geq 0}$**\n\n离散时间下鞅 $(X_n)_{n \\geq 0}$ 的 Doob 分解定理指出，存在唯一的分解 $X_n = M_n + A_n$（对所有 $n \\geq 0$ 成立），其中：\n- $(M_n)_{n \\geq 0}$ 是一个关于 $(\\mathcal{F}_n)$ 的鞅。\n- $(A_n)_{n \\geq 0}$ 是一个可料、非递减的过程。\n- $A_0$ 被设为一个常数，通常为 $0$。\n\n可料过程 $(A_n)$ 通过以下递推关系构建：\n- $A_0 = 0$。\n- 对 $n \\geq 1$，$A_n - A_{n-1} = \\mathbb{E}[X_n - X_{n-1} \\,|\\, \\mathcal{F}_{n-1}]$。\n\n将此构造应用于下鞅 $(N_n)_{n \\geq 0}$：\n- $A_0 = 0$，按要求。\n- 对 $n \\geq 1$，增量由下式给出：\n$$ A_n - A_{n-1} = \\mathbb{E}[N_n - N_{n-1} \\,|\\, \\mathcal{F}_{n-1}] = \\frac{1}{n+2} $$\n为求得 $A_n$，我们将增量求和：\n$$ A_n = A_0 + \\sum_{k=1}^n (A_k - A_{k-1}) = 0 + \\sum_{k=1}^n \\frac{1}{k+2} $$\n这个和可以用广义调和数表示。第 $m$ 个调和数，一个特殊函数，定义为 $H_m = \\sum_{j=1}^m \\frac{1}{j}$。\n我们可以通过令 $j=k+2$ 来重新索引 $A_n$ 的求和：\n$$ A_n = \\sum_{j=3}^{n+2} \\frac{1}{j} $$\n这个和等价于两个调和数之差：\n$$ A_n = \\left(\\sum_{j=1}^{n+2} \\frac{1}{j}\\right) - \\left(\\sum_{j=1}^{2} \\frac{1}{j}\\right) = H_{n+2} - H_2 $$\n由于 $H_2 = 1 + \\frac{1}{2} = \\frac{3}{2}$，我们得到补偿器的最终表达式：\n$$ A_n = H_{n+2} - \\frac{3}{2} $$\n通过此构造，过程 $M_n = N_n - A_n = N_n - (H_{n+2} - \\frac{3}{2})$ 是一个鞅。\n\n**3. 验证 $(A_n)_{n \\geq 0}$ 的性质**\n\n我们从基本原理出发，验证 $(A_n)$ 是可料且非递减的。\n\n- **可料性**：一个过程 $(C_n)_{n \\geq 0}$ 是可料的，如果对每个 $n \\geq 1$，$C_n$ 是 $\\mathcal{F}_{n-1}$-可测的，且 $C_0$ 是 $\\mathcal{F}_{0}$-可测的（即常数）。\n    - 对 $n=0$，$A_0 = 0$，是一个常数。\n    - 对 $n \\geq 1$，$A_n = \\sum_{k=1}^n \\frac{1}{k+2}$。该值仅依赖于非随机整数 $n$。一个确定性量对于任何 sigma-代数都是可测的。特别地，对任意 $n \\geq 1$，$A_n$ 是一个常数，因此是 $\\mathcal{F}_{n-1}$-可测的。\n    - 因此，$(A_n)_{n \\geq 0}$ 是一个可料过程。\n\n- **非递减性**：一个过程 $(C_n)_{n \\geq 0}$ 是非递减的，如果对所有 $n \\geq 1$，$C_n \\geq C_{n-1}$。\n    - 我们考察增量 $A_n - A_{n-1}$。根据我们的推导，对 $n \\geq 1$：\n    $$ A_n - A_{n-1} = \\frac{1}{n+2} $$\n    - 由于 $n \\geq 1$，分母 $n+2$ 是一个大于或等于 $3$ 的整数。因此，对所有 $n \\geq 1$，$\\frac{1}{n+2} > 0$。\n    - 这意味着对所有 $n \\geq 1$，$A_n > A_{n-1}$。过程 $(A_n)$ 是严格递增的，这满足非递减条件。\n\n所有任务均已完成，$A_n$ 的表达式已推导并验证。", "answer": "$$\n\\boxed{H_{n+2} - \\frac{3}{2}}\n$$", "id": "3049361"}, {"introduction": "鞅理论的威力在于其强大的应用，尤其体现在停时定理（Optional Stopping Theorem）上，它将鞅的期望值与随机停止时刻的值联系起来。这个经典的“赌徒破产”问题 [@problem_id:3049332] 是一个完美的实践场景，你将构造一个鞅来计算赌徒的获胜概率。进一步地，通过构造第二个巧妙的鞅 ($S_{n}^{2} - n$)，你将能够计算出游戏结束的平均时间，这充分展示了鞅方法在解决实际问题中的优雅与高效。", "problem": "考虑一个定义在整数上的简单对称随机游走 $\\{S_{n}\\}_{n \\geq 0}$，其中 $S_{0} = 0$ 且对于 $n \\geq 1$，$S_{n} = \\sum_{k=1}^{n} X_{k}$。这里的增量 $\\{X_{k}\\}_{k \\geq 1}$ 是独立同分布的，满足 $\\mathbb{P}(X_{k} = 1) = \\mathbb{P}(X_{k} = -1) = \\frac{1}{2}$。令 $\\{\\mathcal{F}_{n}\\}_{n \\geq 0}$ 表示 $\\{S_{n}\\}_{n \\geq 0}$ 的自然滤波。我们希望找到一个停时 $T$，使得停时值 $S_{T}$ 服从两点分布 $\\mathbb{P}(S_{T} = 4) = \\frac{3}{7}$ 和 $\\mathbb{P}(S_{T} = -3) = \\frac{4}{7}$。\n\n将停时 $T$ 构造为首次到达集合 $\\{-3, 4\\}$ 的时间，即\n$$\nT := \\inf\\{n \\geq 0 : S_{n} \\in \\{-3, 4\\}\\}.\n$$\n从鞅和停时的核心定义出发，并且只使用关于条件期望和可选停止定理在其标准充分条件下的公认结论，完成以下任务：\n\n1. 证明 $T$ 是关于 $\\{\\mathcal{F}_{n}\\}_{n \\geq 0}$ 的一个停时。\n2. 验证 $\\{S_{n}\\}_{n \\geq 0}$ 是关于 $\\{\\mathcal{F}_{n}\\}_{n \\geq 0}$ 的一个鞅。\n3. 证明对有界停时 $T \\wedge n$ (其中 $a \\wedge b$ 表示 $a$ 和 $b$ 的最小值) 使用可选停止定理是合理的，然后通过适当的极限论证，得出结论 $\\mathbb{E}[S_{T}] = \\mathbb{E}[S_{0}]$。\n4. 使用上一步的结论，推导 $S_{T}$ 的分布，并确认 $\\mathbb{P}(S_{T} = 4) = \\frac{3}{7}$ 和 $\\mathbb{P}(S_{T} = -3) = \\frac{4}{7}$。\n5. 考虑由 $M_{n} := S_{n}^{2} - n$ 定义的过程 $\\{M_{n}\\}_{n \\geq 0}$。证明 $\\{M_{n}\\}_{n \\geq 0}$ 是一个鞅，验证对 $T \\wedge n$ 的可选停止定理适用，并使用控制收敛定理和单调收敛定理来获得 $\\mathbb{E}[T]$ 的闭式表达式。\n\n计算所构造的停时 $T$ 的 $\\mathbb{E}[T]$ 的精确值。不需要四舍五入。将你的最终答案表示为单个实数。", "solution": "该问题按要求分为五个部分进行分析和解决。\n\n### 第1部分：证明 $T$ 是一个停时\n一个取值于 $\\{0, 1, 2, \\dots\\} \\cup \\{\\infty\\}$ 的随机变量 $T$ 是关于滤波 $\\{\\mathcal{F}_{n}\\}_{n \\geq 0}$ 的一个停时，如果对于每个 $n \\geq 0$，事件 $\\{T \\leq n\\}$ 都属于 $\\mathcal{F}_{n}$。该滤波被定义为过程 $\\{S_{n}\\}$ 的自然滤波，即 $\\mathcal{F}_{n} = \\sigma(S_{0}, S_{1}, \\dots, S_{n})$。\n\n停时 $T$ 定义为 $T := \\inf\\{k \\geq 0 : S_{k} \\in \\{-3, 4\\}\\}$。\n事件 $\\{T \\leq n\\}$ 可以写成随机游走在时间 $n$ 或之前到达集合 $\\{-3, 4\\}$ 的事件的并集：\n$$\n\\{T \\leq n\\} = \\bigcup_{k=0}^{n} \\{S_{k} \\in \\{-3, 4\\}\\}.\n$$\n对于任何 $k \\in \\{0, 1, \\dots, n\\}$，事件 $\\{S_{k} \\in \\{-3, 4\\}\\}$ 是两个事件 $\\{S_{k} = -3\\}$ 和 $\\{S_{k} = 4\\}$ 的并集。\n由于根据定义，$S_{k}$ 是一个 $\\mathcal{F}_{k}$-可测的随机变量，因此事件 $\\{S_{k} = -3\\}$ 和 $\\{S_{k} = 4\\}$ 都属于 $\\mathcal{F}_{k}$。\n滤波是非递减的，所以对于任何 $k \\leq n$，有 $\\mathcal{F}_{k} \\subseteq \\mathcal{F}_{n}$。\n因此，对于任何 $k \\leq n$，$\\{S_{k} = -3\\}$ 和 $\\{S_{k} = 4\\}$ 都属于 $\\mathcal{F}_{n}$。\n$\\sigma$-代数中有限个集合的并集也属于该$\\sigma$-代数。因此，对于每个 $k \\in \\{0, \\dots, n\\}$，事件 $\\{S_{k} \\in \\{-3, 4\\}\\}$ 属于 $\\mathcal{F}_{n}$。\n因此，事件 $\\{T \\leq n\\} = \\bigcup_{k=0}^{n} \\{S_{k} \\in \\{-3, 4\\}\\}$ 作为 $\\mathcal{F}_{n}$-可测集的有限并集，其本身也是 $\\mathcal{F}_{n}$-可测的。这对所有 $n \\geq 0$ 成立。\n因此，$T$ 是关于 $\\{\\mathcal{F}_{n}\\}_{n \\geq 0}$ 的一个停时。\n\n### 第2部分：验证 $\\{S_{n}\\}_{n \\geq 0}$ 是一个鞅\n要证明 $\\{S_{n}\\}_{n \\geq 0}$ 是关于 $\\{\\mathcal{F}_{n}\\}_{n \\geq 0}$ 的一个鞅，我们必须验证三个条件：\n1.  对于每个 $n \\geq 0$，$S_{n}$ 是 $\\mathcal{F}_{n}$-可测的。根据自然滤波 $\\mathcal{F}_{n}$ 的定义，这是成立的。\n2.  对于每个 $n \\geq 0$，$\\mathbb{E}[|S_{n}|]  \\infty$。由于 $S_{n} = \\sum_{k=1}^{n} X_{k}$，我们有 $|S_{n}| = |\\sum_{k=1}^{n} X_{k}| \\leq \\sum_{k=1}^{n} |X_{k}|$。因为对于所有 $k$ 都有 $|X_{k}|=1$，所以我们得到 $|S_{n}| \\leq n$。因此，$\\mathbb{E}[|S_{n}|] \\leq \\mathbb{E}[n] = n  \\infty$。\n3.  对于所有 $n \\geq 1$，$\\mathbb{E}[S_{n} | \\mathcal{F}_{n-1}] = S_{n-1}$。\n我们计算条件期望：\n$$\n\\mathbb{E}[S_{n} | \\mathcal{F}_{n-1}] = \\mathbb{E}[S_{n-1} + X_{n} | \\mathcal{F}_{n-1}].\n$$\n根据条件期望的线性性质，上式变为：\n$$\n\\mathbb{E}[S_{n-1} | \\mathcal{F}_{n-1}] + \\mathbb{E}[X_{n} | \\mathcal{F}_{n-1}].\n$$\n由于 $S_{n-1}$ 是 $\\mathcal{F}_{n-1}$-可测的，$\\mathbb{E}[S_{n-1} | \\mathcal{F}_{n-1}] = S_{n-1}$。\n增量 $X_{n}$ 与过去的增量 $\\{X_{1}, \\dots, X_{n-1}\\}$ 无关，因此也与它们生成的 $\\sigma$-代数 $\\mathcal{F}_{n-1} = \\sigma(S_0, \\dots, S_{n-1})$ 无关。所以，$\\mathbb{E}[X_{n} | \\mathcal{F}_{n-1}] = \\mathbb{E}[X_{n}]$。\n$X_{n}$ 的期望为：\n$$\n\\mathbb{E}[X_{n}] = (1) \\cdot \\mathbb{P}(X_{n}=1) + (-1) \\cdot \\mathbb{P}(X_{n}=-1) = 1 \\cdot \\frac{1}{2} - 1 \\cdot \\frac{1}{2} = 0.\n$$\n将这些结果代回，我们得到：\n$$\n\\mathbb{E}[S_{n} | \\mathcal{F}_{n-1}] = S_{n-1} + 0 = S_{n-1}.\n$$\n所有三个条件都满足，所以 $\\{S_{n}\\}_{n \\geq 0}$ 是一个鞅。\n\n### 第3部分：证明使用可选停止定理的合理性\n对于每个 $n \\geq 0$，定义停时 $T_{n} = T \\wedge n = \\min(T, n)$。由于 $T$ 是一个停时而 $n$ 是一个常数，所以 $T_{n}$ 也是一个停时。此外，$T_{n}$ 被 $n$ 所界定，即有界。\n有界停时的可选停止定理指出，如果 $\\{S_{k}\\}$ 是一个鞅，且 $\\tau$ 是一个有界停时，那么 $\\mathbb{E}[S_{\\tau}] = \\mathbb{E}[S_{0}]$。\n将此定理应用于有界停时 $T_{n}$，我们有：\n$$\n\\mathbb{E}[S_{T \\wedge n}] = \\mathbb{E}[S_{0}].\n$$\n因为 $S_{0}=0$，所以对于所有 $n \\geq 0$，我们有 $\\mathbb{E}[S_{T \\wedge n}] = 0$。\n\n要将此结论推广到无界停时 $T$，我们必须证明当 $n \\to \\infty$ 时取极限是合理的。可选停止定理的一个充分条件是停止过程是一致有界的。我们来检验 $S_{T \\wedge n}$ 的这个条件。\n根据 $T$ 的构造，对于任何 $k  T$，游走的位置 $S_{k}$ 严格介于 $-3$ 和 $4$ 之间，即 $-3  S_{k}  4$。\n如果停止发生在时间 $n$ 或之前（即 $T \\leq n$），那么 $S_{T \\wedge n} = S_{T}$，其值为 $-3$ 或 $4$。\n如果停止发生在时间 $n$ 之后（即 $T > n$），那么 $S_{T \\wedge n} = S_{n}$，并且由于 $n  T$，我们有 $-3  S_{n}  4$。\n在所有情况下，对于所有 $n \\geq 0$ 和所有样本路径，都有 $|S_{T \\wedge n}| \\leq 4$。停止过程 $\\{S_{T \\wedge n}\\}_{n \\geq 0}$ 被常数 $4$ 一致有界。\n一维简单对称随机游走是常返的，这意味着它最终会访问任何整数状态。因此，它最终会到达集合 $\\{-3, 4\\}$，这意味着 $\\mathbb{P}(T  \\infty)=1$。\n当 $n \\to \\infty$ 时，$T \\wedge n \\to T$ 几乎必然成立。由于 $S$ 是定义在整数上的函数，这意味着 $S_{T \\wedge n} \\to S_{T}$ 几乎必然成立。\n随机变量序列 $\\{S_{T \\wedge n}\\}_{n \\geq 0}$ 几乎必然收敛于 $S_{T}$，并且其绝对值被 $4$ 一致有界。常数随机变量 $Y=4$ 是可积的。因此，根据控制收敛定理，我们可以交换极限和期望：\n$$\n\\mathbb{E}[S_{T}] = \\mathbb{E}[\\lim_{n \\to \\infty} S_{T \\wedge n}] = \\lim_{n \\to \\infty} \\mathbb{E}[S_{T \\wedge n}].\n$$\n由于对所有 $n$ 都有 $\\mathbb{E}[S_{T \\wedge n}] = 0$，我们得出结论：\n$$\n\\mathbb{E}[S_{T}] = \\lim_{n \\to \\infty} 0 = 0.\n$$\n因此，$\\mathbb{E}[S_{T}] = \\mathbb{E}[S_{0}]$。\n\n### 第4部分：推导 $S_{T}$ 的分布\n随机变量 $S_{T}$ 在集合 $\\{-3, 4\\}$ 中取值。令 $p = \\mathbb{P}(S_{T} = 4)$。那么，因为 $\\mathbb{P}(T  \\infty) = 1$，我们有 $\\mathbb{P}(S_{T} = -3) = 1-p$。\n$S_{T}$ 的期望可以用其分布计算：\n$$\n\\mathbb{E}[S_{T}] = (4) \\cdot \\mathbb{P}(S_{T} = 4) + (-3) \\cdot \\mathbb{P}(S_{T} = -3) = 4p - 3(1-p).\n$$\n从上一步我们知道 $\\mathbb{E}[S_{T}] = 0$。所以我们建立方程：\n$$\n4p - 3(1-p) = 0\n$$\n$$\n4p - 3 + 3p = 0\n$$\n$$\n7p = 3\n$$\n$$\np = \\frac{3}{7}.\n$$\n因此，$\\mathbb{P}(S_{T} = 4) = \\frac{3}{7}$，且 $\\mathbb{P}(S_{T} = -3) = 1 - \\frac{3}{7} = \\frac{4}{7}$。这证实了所期望的分布。\n\n### 第5部分：计算 $\\mathbb{E}[T]$\n首先，我们证明 $M_{n} = S_{n}^{2} - n$ 是一个鞅。\n1.  $M_{n}$ 是 $\\mathcal{F}_{n}$-可测的，因为 $S_{n}$ 是 $\\mathcal{F}_{n}$-可测的，而 $n$ 是一个确定性常数。\n2.  $\\mathbb{E}[|M_{n}|] = \\mathbb{E}[|S_{n}^{2} - n|] \\leq \\mathbb{E}[S_{n}^{2}] + n$。$X_{k}$ 的方差是 $\\mathbb{E}[X_{k}^{2}] - (\\mathbb{E}[X_{k}])^{2} = 1 - 0^{2} = 1$。由于 $X_{k}$ 是独立的，$\\text{Var}(S_{n}) = \\sum_{k=1}^{n}\\text{Var}(X_{k}) = n$。同时 $\\mathbb{E}[S_{n}]=0$。所以，$\\mathbb{E}[S_{n}^{2}] = \\text{Var}(S_{n}) + (\\mathbb{E}[S_{n}])^{2} = n + 0 = n$。因此，$\\mathbb{E}[|M_{n}|] \\leq n + n = 2n  \\infty$。\n3.  我们检验鞅性质：$\\mathbb{E}[M_{n} | \\mathcal{F}_{n-1}] = M_{n-1}$。\n$$\n\\mathbb{E}[M_{n} | \\mathcal{F}_{n-1}] = \\mathbb{E}[S_{n}^{2} - n | \\mathcal{F}_{n-1}] = \\mathbb{E}[S_{n}^{2} | \\mathcal{F}_{n-1}] - n.\n$$\n代入 $S_{n} = S_{n-1} + X_{n}$：\n$$\n\\mathbb{E}[S_{n}^{2} | \\mathcal{F}_{n-1}] = \\mathbb{E}[(S_{n-1} + X_{n})^{2} | \\mathcal{F}_{n-1}] = \\mathbb{E}[S_{n-1}^{2} + 2S_{n-1}X_{n} + X_{n}^{2} | \\mathcal{F}_{n-1}].\n$$\n利用条件期望的线性和性质：\n$$\n\\mathbb{E}[S_{n-1}^{2} | \\mathcal{F}_{n-1}] + 2\\mathbb{E}[S_{n-1}X_{n} | \\mathcal{F}_{n-1}] + \\mathbb{E}[X_{n}^{2} | \\mathcal{F}_{n-1}].\n$$\n- 由于 $S_{n-1}^{2}$ 是 $\\mathcal{F}_{n-1}$-可测的，$\\mathbb{E}[S_{n-1}^{2} | \\mathcal{F}_{n-1}] = S_{n-1}^{2}$。\n- 提取已知量，$\\mathbb{E}[S_{n-1}X_{n} | \\mathcal{F}_{n-1}] = S_{n-1}\\mathbb{E}[X_{n} | \\mathcal{F}_{n-1}] = S_{n-1}\\mathbb{E}[X_{n}] = S_{n-1} \\cdot 0 = 0$。\n- 由于独立性，$\\mathbb{E}[X_{n}^{2} | \\mathcal{F}_{n-1}] = \\mathbb{E}[X_{n}^{2}] = (1)^{2}\\frac{1}{2} + (-1)^{2}\\frac{1}{2} = 1$。\n结合这些结果，我们得到 $\\mathbb{E}[S_{n}^{2} | \\mathcal{F}_{n-1}] = S_{n-1}^{2} + 1$。\n所以，$\\mathbb{E}[M_{n} | \\mathcal{F}_{n-1}] = (S_{n-1}^{2} + 1) - n = S_{n-1}^{2} - (n-1) = M_{n-1}$。\n因此，$\\{M_{n}\\}$ 是一个鞅。\n\n现在，我们将可选停止定理应用于 $M_{n}$ 和有界停时 $T \\wedge n$。\n$$\n\\mathbb{E}[M_{T \\wedge n}] = \\mathbb{E}[M_{0}] = S_{0}^{2} - 0 = 0.\n$$\n这意味着 $\\mathbb{E}[S_{T \\wedge n}^{2} - (T \\wedge n)] = 0$，或者 $\\mathbb{E}[S_{T \\wedge n}^{2}] = \\mathbb{E}[T \\wedge n]$。\n我们需要取 $n \\to \\infty$ 的极限。\n对于右侧，随机变量序列 $\\{T \\wedge n\\}_{n \\geq 0}$ 是非负且非递减的，逐点收敛于 $T$。根据单调收敛定理：\n$$\n\\lim_{n \\to \\infty} \\mathbb{E}[T \\wedge n] = \\mathbb{E}[\\lim_{n \\to \\infty} T \\wedge n] = \\mathbb{E}[T].\n$$\n对于左侧，我们有 $S_{T \\wedge n}^{2} \\to S_{T}^{2}$ 几乎必然。如前所示， $|S_{T \\wedge n}| \\leq 4$，所以 $S_{T \\wedge n}^{2} \\leq 16$。由于常数随机变量 $Y=16$ 是可积的，我们可以使用控制收敛定理：\n$$\n\\lim_{n \\to \\infty} \\mathbb{E}[S_{T \\wedge n}^{2}] = \\mathbb{E}[\\lim_{n \\to \\infty} S_{T \\wedge n}^{2}] = \\mathbb{E}[S_{T}^{2}].\n$$\n令两边的极限相等，我们得到 $\\mathbb{E}[T] = \\mathbb{E}[S_{T}^{2}]$。\n我们现在可以使用第4部分中找到的 $S_{T}$ 的分布来计算 $\\mathbb{E}[S_{T}^{2}]$。随机变量 $S_{T}^{2}$ 以概率 $\\frac{3}{7}$ 取值 $4^{2}=16$，以概率 $\\frac{4}{7}$ 取值 $(-3)^{2}=9$。\n$$\n\\mathbb{E}[S_{T}^{2}] = (16) \\cdot \\mathbb{P}(S_{T} = 4) + (9) \\cdot \\mathbb{P}(S_{T} = -3) = 16 \\cdot \\frac{3}{7} + 9 \\cdot \\frac{4}{7}.\n$$\n$$\n\\mathbb{E}[S_{T}^{2}] = \\frac{48}{7} + \\frac{36}{7} = \\frac{48+36}{7} = \\frac{84}{7} = 12.\n$$\n因此，$\\mathbb{E}[T] = 12$。", "answer": "$$\n\\boxed{12}\n$$", "id": "3049332"}]}
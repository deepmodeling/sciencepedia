## 引言
在[随机过程](@entry_id:159502)的广阔世界中，[局部鞅](@entry_id:186755)是鞅概念的关键推广，它允许我们分析那些在局部表现良好但全局可能不满足[可积性](@entry_id:142415)条件的复杂过程。然而，理解这些过程的核心挑战在于如何量化它们的波动性或“粗糙度”。经典微积分中的变差概念在此失效，这就引出了一个根本性的问题：我们如何为这些路径不平滑的[随机过程](@entry_id:159502)建立一个内在的波动尺度？本文旨在系统性地解答这一问题，核心工具便是“二次变差”。

本文将分为三个章节，引领读者深入探索二次变差的理论与实践。在第一章“**原理与机制**”中，我们将从基本定义出发，揭示二次变差作为唯一补偿过程的深刻数学构造，并探讨其与Dambis-Dubins-Schwarz（DDS）定理的内在联系，理解其为何被誉为过程的“内在时钟”。随后，在第二章“**应用与跨学科联系**”中，我们将二次变差置于[金融数学](@entry_id:143286)等应用领域，分析它在几何布朗运动和OU过程等经典模型中的作用，并阐明其在[Girsanov定理](@entry_id:147068)和多维过程分析中的不变性与[协变](@entry_id:634097)性。最后，在“**动手实践**”部分，读者将通过解决具体问题，将理论知识转化为可操作的计算技能，从而真正掌握这一强大工具。

## 原理与机制

在[随机过程](@entry_id:159502)理论中，[局部鞅](@entry_id:186755)的概念是对经典[鞅](@entry_id:267779)理论的推广，它放宽了对可积性的要求，从而将更广泛的过程纳入了分析框架。这一章中，我们将深入探讨[局部鞅](@entry_id:186755)的一个核心特征——二次变差。二次变差不仅量化了一个过程的“粗糙度”或波动性，还充当了过程的“内在时钟”，揭示了其与标准布朗运动之间的深刻联系。

### [局部鞅](@entry_id:186755)的定义

我们首先需要精确定义什么是**[局部鞅](@entry_id:186755) (local martingale)**。一个适应[随机过程](@entry_id:159502) $M = (M_t)_{t \ge 0}$ 若其在零点的取值为 $M_0 = 0$，则被称为[局部鞅](@entry_id:186755)，前提是存在一个递增的[停时](@entry_id:261799)序列 $(\tau_n)_{n \ge 1}$，该序列几乎必然地（a.s.）收敛于无穷大，即 $\tau_n \uparrow \infty$ a.s.。对于此序列中的每一个 $n$，其相应的停过程 $M^{\tau_n}$（定义为 $M^{\tau_n}_t := M_{t \wedge \tau_n}$）都是一个鞅。[@problem_id:3071609]

这个定义本质上表明，一个[局部鞅](@entry_id:186755)是一个在“局部”上表现为鞅的过程。停时序列 $(\tau_n)$，被称为**局部化序列 (localizing sequence)**，将整个时间轴 $[0, \infty)$ 分割开来。在每个随机区间 $[0, \tau_n]$ 内，过程 $M$ 的行为与一个真正的[鞅](@entry_id:267779)完全相同，特别是其[可积性](@entry_id:142415)得到了保证。然而，当 $t$ 趋于无穷时，[局部鞅](@entry_id:186755)可能不再满足鞅定义中的[可积性](@entry_id:142415)条件 $\mathbb{E}[|M_t|]  \infty$。

任何一个真正的鞅本身就是一个[局部鞅](@entry_id:186755)，我们只需取一个平凡的局部化序列 $\tau_n \equiv \infty$ 即可。[@problem_id:3071609] 然而，反之不成立。一个不是真鞅的[局部鞅](@entry_id:186755)被称为**[严格局部鞅](@entry_id:636161) (strict local martingale)**。这种推广至关重要，因为它使得随机积分等工具能够应用于更广泛的[随机过程](@entry_id:159502)。

### [连续局部鞅](@entry_id:204638)的二次变差

对于路径连续的[局部鞅](@entry_id:186755)，二次变差是一个极其重要的概念。它有两种等价的定义方式，一种是构造性的，另一种是性质性的。

#### 以平方增量之和逼近

直观上，一个过程的二次变差衡量了其路径的“能量”或累积[方差](@entry_id:200758)。对于一个时间区间 $[0, t]$ 的任意分割 $\pi = \{0 = t_0  t_1  \dots  t_n = t\}$，我们可以计算该过程在子区间上的平方增量之和：

$$
Q_t(\pi) = \sum_{i=0}^{n-1} (M_{t_{i+1}} - M_{t_i})^2
$$

对于像布朗运动这样路径“粗糙”的过程，当分割的网格尺寸 $|\pi| = \max_i(t_{i+1} - t_i)$ 趋于零时，这个和将收敛到一个非零的确定性过程。例如，对于标准布朗运动 $B_t$，我们有 $[B]_t = t$。然而，对于一个具有有限变差的连续过程 $A_t$（例如一个[可微函数](@entry_id:144590)），这个和将收敛到零，即 $[A]_t \equiv 0$。[@problem_id:3071611]

这个极限，如果它[依概率收敛](@entry_id:145927)并且与分割序列的选择无关，就被定义为过程 $M$ 在 $t$ 时刻的**二次变差 (quadratic variation)**，记作 $[M]_t$。[@problem_id:3071595]

#### 基于[Doob-Meyer分解](@entry_id:187728)的唯一定义

虽然上述极限逼近的方法很直观，但在数学上更严谨和强大的定义是基于[Doob-Meyer分解](@entry_id:187728)定理。如果 $M$ 是一个[连续局部鞅](@entry_id:204638)，那么 $M^2$ 是一个连续局部子[鞅](@entry_id:267779)。根据[Doob-Meyer分解](@entry_id:187728)定理，任何局部子鞅都可以唯一地分解为一个[局部鞅](@entry_id:186755)和一个可料的、递增的过程之和。

具体而言，对于[连续局部鞅](@entry_id:204638) $M$ (满足 $M_0 = 0$)，存在一个**唯一**的、连续的、递增的、适应的（对于连续过程，适应等价于可料）过程 $[M] = ([M]_t)_{t \ge 0}$，且 $[M]_0 = 0$，使得过程 $M_t^2 - [M]_t$ 是一个[局部鞅](@entry_id:186755)。[@problem_id:3071609] [@problem_id:3071611]

这个过程 $[M]$ 就是 $M$ 的二次变差。这个定义的优越性在于它不依赖于任何特定的分割或极限过程，而是通过一个普适的性质来唯一地确定 $[M]$。[@problem_id:3071610] 这个唯一性是理论的基石，它保证了二次变差是一个內蕴于过程 $M$ 本身的属性。这两种定义是等价的：通过[Doob-Meyer分解](@entry_id:187728)唯一存在的过程，恰好就是平方增量和的极限。[@problem_id:3071610]

#### 二次变差的计算与性质

有了严谨的定义后，我们可以推导出二次变差的一些关键性质和计算方法。

1.  **伊藤积分的二次变差**：如果一个[连续局部鞅](@entry_id:204638) $M$ 是关于标准布朗运动 $B$ 的[伊藤积分](@entry_id:272774)，形式为 $M_t = \int_0^t \sigma_s dB_s$，其中 $\sigma_s$ 是一个有界的、可料的过程，那么其二次变差有一个简洁的表达式：
    $$
    [M]_t = \int_0^t \sigma_s^2 ds
    $$
    这个结果可以通过伊藤公式应用于 $f(M_t) = M_t^2$ 来验证，我们发现 $M_t^2 - \int_0^t \sigma_s^2 ds = 2\int_0^t M_s dM_s$。右侧是一个[随机积分](@entry_id:198356)，因此是一个[局部鞅](@entry_id:186755)，根据 $[M]_t$ 的唯一定义，左侧的非[鞅](@entry_id:267779)部分 $\int_0^t \sigma_s^2 ds$ 必定是 $[M]_t$。[@problem_id:3071595]

2.  **协变差与[极化恒等式](@entry_id:271819)**：对于两个[连续局部鞅](@entry_id:204638) $M$ 和 $N$，我们可以定义它们的**二次[协变差](@entry_id:634097) (quadratic cross-variation)** $[M, N]_t$。它可以通过**[极化恒等式](@entry_id:271819) (polarization identity)** 与二次变差联系起来：
    $$
    [M, N]_t = \frac{1}{2} \left( [M+N]_t - [M]_t - [N]_t \right)
    $$
    这个恒等式非常有用。例如，若 $M_t = \int_0^t \sigma_s dB_s$ 且 $N_t = \int_0^t \tau_s dB_s$，那么 $M_t+N_t = \int_0^t (\sigma_s+\tau_s)dB_s$。利用二次变差的计算公式和[极化恒等式](@entry_id:271819)，我们可得：
    $$
    [M, N]_t = \int_0^t \sigma_s \tau_s ds
    $$
    值得注意的是，二次协变差不一定是递增过程。例如，若 $N_t = -M_t$，则 $[M, N]_t = -[M]_t$ 是一个递减过程。[@problem_id:3071626]

3.  **正交性**：如果两个[连续局部鞅](@entry_id:204638)的二次[协变差](@entry_id:634097)恒为零，即 $[M, N]_t \equiv 0$，则称它们是**正交的 (orthogonal)**。一个重要的结论是，如果 $M$ 和 $N$ 是正交的，那么它们的乘积 $M_t N_t$ 是一个[局部鞅](@entry_id:186755)。[@problem_id:3071626] 这在伊藤[乘积法则](@entry_id:158393)中可以看到：$d(M_t N_t) = M_t dN_t + N_t dM_t + d[M, N]_t$。当 $d[M,N]_t = 0$ 时，乘积的[微分](@entry_id:158718)只包含[局部鞅](@entry_id:186755)项。例如，由两个[相互独立](@entry_id:273670)的布朗运动 $W^{(1)}$ 和 $W^{(2)}$ 生成的随机积分 $\widetilde{M}_t = \int_0^t \sigma_s dW^{(1)}_s$ 和 $\widetilde{N}_t = \int_0^t \tau_s dW^{(2)}_s$ 是正交的，即 $[\widetilde{M}, \widetilde{N}]_t \equiv 0$。[@problem_id:3071626]

4.  **局部化与[停时](@entry_id:261799)**：二次变差的一个关键特性是其**局部性**。即，如果两个过程 $M$ 和 $N$ 在一个停时 $\tau$ 之前是相同的（$M_{t \wedge \tau} = N_{t \wedge \tau}$），那么它们的二次变差在此之前也相同（$[M]_{t \wedge \tau} = [N]_{t \wedge \tau}$）。这使得我们可以通过局部化技术将为有界鞅或平方可积鞅证明的结论推广到一般[连续局部鞅](@entry_id:204638)。具体来说，我们可以构造一个局部化序列 $\tau_n = \inf\{t \ge 0 : |M_t| \ge n\}$。对于每个 $n$，停过程 $M^{\tau_n}$ 是一个有界鞅（因此是平方可积[鞅](@entry_id:267779)）。我们可以为 $M^{\tau_n}$ 定义和计算其二次变差 $[M^{\tau_n}]$。由于局部性，我们有 $[M^{\tau_n}]_t = [M]_{t \wedge \tau_n}$。通过取极限 $n \to \infty$，我们就能一致地定义并分析 $[M]_t$。[@problem_id:3071613] [@problem_id:3071595]

### [Dambis-Dubins-Schwarz定理](@entry_id:198595)：二次变差作为内在时钟

二次变差的深刻含义在**Dambis-Dubins-Schwarz (DDS) 定理**中得到了最完美的体现。该定理指出，任何[连续局部鞅](@entry_id:204638) $M$ (满足 $M_0=0$ 且 $[M]_\infty = \infty$) 都可以通过[时间变换](@entry_id:634205)表示为一个[标准布朗运动](@entry_id:197332)。

具体地，存在一个（可能在扩展的[概率空间](@entry_id:201477)上的）标准布朗运动 $W$，使得：

$$
M_t = W_{[M]_t} \quad \text{a.s. for all } t \ge 0
$$

这个定理揭示了二次变差 $[M]_t$ 的本质：它是 $M$ 的**内在时钟 (intrinsic clock)**。物理时间 $t$ 的流逝对 $M$ 而言可能是不均匀的。在 $\sigma_t$ 较大的时期，$M$ 的波动剧烈，其内在时钟 $[M]_t = \int_0^t \sigma_s^2 ds$ 走得快；反之则走得慢。DDS定理告诉我们，一旦我们用这个内在时鐘 $[M]_t$ 来重新衡量时间，过程 $M$ 的行为就和最简单的[连续鞅](@entry_id:185466)——[标准布朗运动](@entry_id:197332)——完全一样了。[@problem_id:3071622]

这个表示是唯一的（在适当的意义下）。如果 $M_t = W_{A_t}$，其中 $W$ 是[标准布朗运动](@entry_id:197332)，$A_t$ 是一个连续递增的[适应过程](@entry_id:187710)（[时间变换](@entry_id:634205)），那么这个[时间变换](@entry_id:634205)过程 $A_t$ 必然等于 $M$ 的二次变差 $[M]_t$。这是因为标准布朗运动 $W$ 的二次变差是 $[W]_s = s$，所以根据[时间变换](@entry_id:634205)下的二次变差法则，$[M]_t = [W_{A_t}]_t = [W]_{A_t} = A_t$。因此，DDS定理中[时间变换](@entry_id:634205)的唯一性直接蕴含了二次变差的唯一性。[@problem_id:3071603]

需要注意的是，二次变差并不能唯一确定一个鞅。例如，$B_t$ 和 $-B_t$ 都是[连续鞅](@entry_id:185466)，它们的二次变差都是 $[B]_t = [-B]_t = t$，但它们显然是不同的过程。[@problem_id:3071622]

### 对一般Càdlàg[局部鞅](@entry_id:186755)的推广

到目前为止，我们的讨论主要集中在[连续局部鞅](@entry_id:204638)。对于含有跳跃的**càdlàg (右连续[左极限](@entry_id:139055)) [局部鞅](@entry_id:186755)**，二次变差的概念需要扩展。

一个càdlàg过程 $X$ 的二次变差，若存在，仍然可以形式上定义为 $X_t^2 - [X]_t$ 是一个[局部鞅](@entry_id:186755)。对于一般的càdlàg[半鞅](@entry_id:184490)（semimartingale），其二次变差由两部分构成：一部分来自其连续部分的演化，另一部分来自其跳跃。

对于一个càdlàg[局部鞅](@entry_id:186755) $M$，它可以唯一地分解为一个[连续局部鞅](@entry_id:204638)部分 $M^c$ 和一个纯跳跃[局部鞅](@entry_id:186755)部分 $M^d$，$M=M^c+M^d$。这两个部分是正交的，即 $[M^c, M^d]_t \equiv 0$。因此，$M$ 的二次变差是：

$$
[M]_t = [M^c]_t + [M^d]_t
$$

其中 $[M^c]_t$ 是连续部分的二次变差，而纯跳跃部分的二次变差是其平方跳跃的总和：

$$
[M^d]_t = \sum_{0  s \le t} (\Delta M_s)^2
$$

这里 $\Delta M_s = M_s - M_{s-}$ 是 $M$ 在 $s$ 时刻的跳跃。所以，càdlàg[局部鞅](@entry_id:186755)的二次变差的完整表达式为：[@problem_id:3071624]

$$
[M]_t = [M^c]_t + \sum_{0  s \le t} (\Delta M_s)^2
$$

这个表达式清楚地表明，二次变差累积了来自过程连续波动的“能量”和来自其离散跳跃的“能量”。[@problem_id:3071611]

#### 可料二次变差 $\langle M \rangle$

在处理有跳跃的过程时，引入**可料二次变差 (predictable quadratic variation)** 或称**尖括号过程 (angle bracket process)** $\langle M \rangle_t$ 是非常有用的。它被定义为二次变差 $[M]_t$ 的**补偿器 (compensator)** 或**对偶可料投影 (dual predictable projection)**。

这意味着 $\langle M \rangle_t$ 是唯一的**可料的 (predictable)**、递增的过程，使得差值 $[M]_t - \langle M \rangle_t$ 是一个[局部鞅](@entry_id:186755)。[@problem_id:3071604]

-   对于**连续**[局部鞅](@entry_id:186755) $M$，其二次变差 $[M]_t$ 本身就是连续且适应的，因此是可料的。根据唯一性，我们有 $\langle M \rangle_t = [M]_t$。[@problem_id:3071604]
-   对于含有跳跃的**càdlàg**[局部鞅](@entry_id:186755)，$[M]_t$ 通常不是可料的，因为它在 $M$ 发生跳跃的时刻也同时发生跳跃，而这些跳跃时刻不一定是可料的。因此，$\langle M \rangle_t$ 和 $[M]_t$ 通常不相等。$\langle M \rangle_t$ 可以被看作是 $[M]_t$ 的“平滑”或“期望”版本。其跳跃满足 $\Delta \langle M \rangle_t = \mathbb{E}[(\Delta M_t)^2 | \mathcal{F}_{t-}]$，即在 $t$ 时刻之前可知的关于平方跳跃的[条件期望](@entry_id:159140)。[@problem_id:3071604]

综上所述，二次变差是理解[局部鞅](@entry_id:186755)动态的核心工具。无论是在连续还是离散的情况下，它都量化了过程的波动性，并通过DDS定理将其与最基本的[随机过程](@entry_id:159502)——布朗运动——联系起来，为随机微积分的理论和应用提供了坚实的基础。
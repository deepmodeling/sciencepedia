{"hands_on_practices": [{"introduction": "让我们从一个将复杂问题分解为简单部分的经典场景开始。这个练习模拟了一个电视游戏节目，其中的最终奖金取决于一个初始的随机选择，这完美地展示了全期望定律如何通过各个阶段的平均值来计算总体平均值。通过解决这个问题 ([@problem_id:1346853])，你将练习将一个随机实验的样本空间进行划分，并计算加权平均期望值。", "problem": "在一个热门的电视游戏节目中，参赛者首先旋转一个大转盘，以决定他们将玩三个迷你游戏中的哪一个。转盘被分成三个有颜色的扇区。转盘停在红色扇区的概率是 $0.5$，停在蓝色扇区的概率是 $0.3$，停在绿色扇区的概率是 $0.2$。\n\n奖金（以美元计）取决于与扇区相关的迷你游戏：\n- **红色扇区（游戏A）：** 参赛者投掷三枚不同的均匀硬币。每得到一个正面，他们就赢得 $120。\n- **蓝色扇区（游戏B）：** 奖金由一个在区间 $[50, 450]$ 上均匀分布的随机变量决定。\n- **绿色扇区（游戏C）：** 奖金是一个随机变量，遵循平均支出为 $350 的指数分布。\n\n假设一名参赛者只能旋转一次转盘，他们的总期望奖金是多少？用美元表示你的答案，并四舍五入到三位有效数字。", "solution": "设 $W$ 表示参赛者一次旋转的奖金。根据全期望定律，\n$$\n\\mathbb{E}[W]=\\mathbb{P}(\\text{Red})\\,\\mathbb{E}[W\\mid \\text{Red}]+\\mathbb{P}(\\text{Blue})\\,\\mathbb{E}[W\\mid \\text{Blue}]+\\mathbb{P}(\\text{Green})\\,\\mathbb{E}[W\\mid \\text{Green}]。\n$$\n\n红色扇区（游戏A）：设 $X_{i}$ 是第 $i$ 枚均匀硬币（对于 $i\\in\\{1,2,3\\}$）正面朝上的指示变量，因此 $X_{i}\\sim\\text{Bernoulli}\\!\\left(\\frac{1}{2}\\right)$ 且 $\\mathbb{E}[X_{i}]=\\frac{1}{2}$。奖金为 $A=120\\sum_{i=1}^{3}X_{i}$。根据期望的线性性，\n$$\n\\mathbb{E}[A]=120\\sum_{i=1}^{3}\\mathbb{E}[X_{i}]=120\\cdot 3\\cdot \\frac{1}{2}=180。\n$$\n\n蓝色扇区（游戏B）：如果 $B\\sim \\text{Unif}[50,450]$，那么\n$$\n\\mathbb{E}[B]=\\frac{50+450}{2}=250。\n$$\n\n绿色扇区（游戏C）：如果 $C$ 是均值为 $350$ 的指数分布，那么对于 $C\\sim \\text{Exp}(\\lambda)$，使用 $\\mathbb{E}[C]=\\frac{1}{\\lambda}$，我们有\n$$\n\\mathbb{E}[C]=350。\n$$\n\n已知 $\\mathbb{P}(\\text{Red})=0.5$，$\\mathbb{P}(\\text{Blue})=0.3$ 和 $\\mathbb{P}(\\text{Green})=0.2$，总期望奖金为\n$$\n\\mathbb{E}[W]=0.5\\cdot 180+0.3\\cdot 250+0.2\\cdot 350。\n$$\n计算每一项：\n$$\n0.5\\cdot 180=90,\\quad 0.3\\cdot 250=75,\\quad 0.2\\cdot 350=70,\n$$\n所以\n$$\n\\mathbb{E}[W]=90+75+70=235。\n$$\n四舍五入到三位有效数字，结果是 $235$。", "answer": "$$\\boxed{235}$$", "id": "1346853"}, {"introduction": "现在，我们将探讨一个更动态的两阶段过程，这是随机建模中的一种常见结构。在这个问题中 ([@problem_id:1346870])，第一阶段的结果——其本身是一个随机变量——决定了第二阶段中事件的数量。这是一个绝佳的例子，展示了如何使用期望塔性质 $\\mathbb{E}[Y] = \\mathbb{E}[\\mathbb{E}[Y|N]]$ 将期望链式连接起来，这对于处理随机数量的随机变量求和至关重要。", "problem": "一个赌徒参加一个包含两个阶段的嘉年华游戏。在第一阶段，该赌徒抛掷一枚有偏硬币10次。硬币正面朝上的概率是0.6。所获得的正面次数，我们称之为$N$，决定了该赌徒进入第二阶段的游戏轮数。\n\n在第二阶段，对于$N$轮中的每一轮，该赌徒都会获得一笔钱，其金额由掷一个标准的、公平的六面骰子的结果决定。骰子的投掷结果彼此独立，也与硬币的抛掷结果无关。\n\n设赌徒所有轮次的总赢利为$Y$。总赢利的期望值$E[Y]$是多少？\n\n用美元表示你的答案。最终答案应该是一个单一的数值。", "solution": "设$N$为随机变量，表示在10次硬币抛掷中获得正面的次数。设$X_i$为随机变量，表示在第二阶段第$i$轮的支付金额，其中$i=1, 2, \\dots, N$。总赢利$Y$可以表示为$N$轮支付金额的总和：\n$$Y = \\sum_{i=1}^{N} X_i$$\n我们知道，如果$N=0$，则和为空，且$Y=0$。我们希望计算$Y$的期望值，即$E[Y]$。\n\n为了解决这个问题，我们使用全期望定律，也称为重期望法则，该定律表明$E[Y] = E[E[Y|N]]$。我们将分两步计算：首先，计算内部的条件期望$E[Y|N]$；其次，计算外部的期望。\n\n**步骤1：计算条件期望$E[Y|N]$。**\n我们以正面次数为特定值$N=n$为条件。那么总赢利就是$n$次随机支付金额的总和：\n$$E[Y|N=n] = E\\left[\\sum_{i=1}^{n} X_i \\bigg| N=n\\right]$$\n由于骰子的投掷结果$X_i$独立于硬币的抛掷结果（因此也独立于$N$），所以以$N=n$为条件仅决定了求和中的项数。根据期望的线性性质，我们有：\n$$E[Y|N=n] = \\sum_{i=1}^{n} E[X_i]$$\n每一轮的支付金额$X_i$由掷一个公平的六面骰子的结果决定。可能的结果是$\\{1, 2, 3, 4, 5, 6\\}$，每个结果的概率都是$\\frac{1}{6}$。单次支付$X_i$的期望值是：\n$$E[X_i] = 1\\cdot\\frac{1}{6} + 2\\cdot\\frac{1}{6} + 3\\cdot\\frac{1}{6} + 4\\cdot\\frac{1}{6} + 5\\cdot\\frac{1}{6} + 6\\cdot\\frac{1}{6} = \\frac{1+2+3+4+5+6}{6} = \\frac{21}{6} = 3.5$$\n由于所有的$X_i$都是同分布的，因此对于所有的$i$，$E[X_i] = 3.5$。将此结果代回条件期望的表达式中：\n$$E[Y|N=n] = \\sum_{i=1}^{n} 3.5 = 3.5n$$\n这个结果对$N$可以取的任何特定值$n$都成立。因此，我们可以将条件期望表示为随机变量$N$的函数：\n$$E[Y|N] = 3.5N$$\n\n**步骤2：计算外部期望。**\n现在我们对步骤1的结果关于$N$的分布取期望：\n$$E[Y] = E[E[Y|N]] = E[3.5N]$$\n再次使用期望的线性性质，我们可以将常数提出：\n$$E[Y] = 3.5 E[N]$$\n\n**步骤3：计算$N$的期望。**\n随机变量$N$表示抛掷一枚有偏硬币10次得到正面的次数。这些抛掷是独立的试验，每次成功的概率（正面）为$p=0.6$。试验次数为$n=10$。因此，$N$服从二项分布，$N \\sim \\text{Bin}(n=10, p=0.6)$。\n服从二项分布的随机变量的期望值由公式$E[N] = np$给出。\n$$E[N] = 10 \\times 0.6 = 6$$\n\n**步骤4：计算最终答案。**\n最后，我们将$E[N]$的值代入$E[Y]$的表达式中：\n$$E[Y] = 3.5 \\times E[N] = 3.5 \\times 6 = 21$$\n赌徒的期望总赢利是$21$。", "answer": "$$\\boxed{21}$$", "id": "1346870"}, {"introduction": "这最后一个练习题展示了期望塔性质在分析随时间演化系统时的威力。我们将研究一个简单的人口模型，即分支过程，并递归地使用期望塔性质 ([@problem_id:1461117])。这种优雅的方法使我们能够预测未来几代人的预期人口规模，从而简化一个看似复杂的计算，并突显出该性质在迭代过程中的强大作用。", "problem": "考虑一个种群模型，在第 $n=0$ 代时从单个个体开始。设 $Z_n$ 为第 $n$ 代的个体数量，因此我们有 $Z_0=1$。对于任意 $n \\ge 0$，第 $n$ 代中的每个个体独立地产生随机数量的后代，这些后代构成第 $n+1$ 代。单个个体产生的后代数量是一个随机变量，我们称之为 $X$，其概率质量函数由下式给出：\n$$ P(X=0) = \\frac{1}{2}, \\quad P(X=1) = \\frac{1}{4}, \\quad P(X=2) = \\frac{1}{8}, \\quad P(X=3) = \\frac{1}{8} $$\n且对于任何不在 $\\{0, 1, 2, 3\\}$ 中的整数 $k$，$P(X=k)=0$。第 $n+1$ 代的总种群数量 $Z_{n+1}$ 是第 $n$ 代的 $Z_n$ 个个体产生的所有后代数量之和。\n\n计算第三代个体数量的期望值 $E[Z_3]$。你的推导必须结构化，首先求出给定 $Z_2$ 时 $Z_3$ 的条件期望，然后利用这个中间结果来确定 $E[Z_3]$ 的值。\n\n将你的答案表示为最简分数形式。", "solution": "设 $X$ 为单个个体产生的后代数量，其概率质量函数如题所述。其均值为\n$$\n\\mathbb{E}[X]=0 \\cdot \\frac{1}{2}+1 \\cdot \\frac{1}{4}+2 \\cdot \\frac{1}{8}+3 \\cdot \\frac{1}{8}=\\frac{1}{4}+\\frac{2}{8}+\\frac{3}{8}=\\frac{7}{8}.\n$$\n在一个高尔顿-沃森过程中，给定 $Z_{n}$，下一代为 $Z_{n+1}=\\sum_{i=1}^{Z_{n}}X_{n,i}$，其中 $X_{n,i}$ 是 $X$ 的独立同分布副本，并且与 $Z_{n}$ 相互独立。因此，根据期望的线性性质和独立性，\n$$\n\\mathbb{E}[Z_{3}\\mid Z_{2}]=\\sum_{i=1}^{Z_{2}}\\mathbb{E}[X_{2,i}\\mid Z_{2}]=\\sum_{i=1}^{Z_{2}}\\mathbb{E}[X]=Z_{2}\\,\\mathbb{E}[X]=\\frac{7}{8}\\,Z_{2}.\n$$\n使用全期望定律（重期望法则），\n$$\n\\mathbb{E}[Z_{3}]=\\mathbb{E}\\!\\left[\\mathbb{E}[Z_{3}\\mid Z_{2}]\\right]=\\frac{7}{8}\\,\\mathbb{E}[Z_{2}].\n$$\n将同样的推理提前一步应用，\n$$\n\\mathbb{E}[Z_{2}\\mid Z_{1}]=\\frac{7}{8}\\,Z_{1}\\quad\\Rightarrow\\quad \\mathbb{E}[Z_{2}]=\\frac{7}{8}\\,\\mathbb{E}[Z_{1}],\n$$\n并且由于 $Z_{0}=1$，\n$$\n\\mathbb{E}[Z_{1}\\mid Z_{0}]=\\frac{7}{8}\\,Z_{0}=\\frac{7}{8}\\quad\\Rightarrow\\quad \\mathbb{E}[Z_{1}]=\\frac{7}{8}.\n$$\n结合这些结果，\n$$\n\\mathbb{E}[Z_{2}]=\\left(\\frac{7}{8}\\right)^{2},\\qquad \\mathbb{E}[Z_{3}]=\\frac{7}{8}\\,\\mathbb{E}[Z_{2}]=\\left(\\frac{7}{8}\\right)^{3}=\\frac{343}{512}.\n$$", "answer": "$$\\boxed{\\frac{343}{512}}$$", "id": "1461117"}]}
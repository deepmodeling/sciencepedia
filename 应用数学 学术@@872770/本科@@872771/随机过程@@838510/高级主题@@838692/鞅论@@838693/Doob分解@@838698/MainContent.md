## 引言
在探索随机现象的[世界时](@entry_id:275204)，我们常常面临一个核心挑战：如何从看似无序的波动中分辨出潜在的规律或趋势？无论是金融市场的价格变动，还是[生物种群](@entry_id:200266)的繁衍消亡，其演化过程都混合了可预测的驱动力和纯粹的随机扰动。[杜布分解定理](@entry_id:263344)（Doob Decomposition Theorem）是现代[随机过程](@entry_id:159502)理论中的一块基石，它为这一挑战提供了优雅而深刻的数学解答。该定理揭示了任何（适应的、可积的）[随机过程](@entry_id:159502)都内在地包含一种结构，可以被唯一地拆解为一个可预测的“趋势”[部分和](@entry_id:162077)一个不可预测的“噪音”部分。

本文旨在系统地阐释[杜布分解](@entry_id:636236)的理论与实践。通过学习本文，您将能够掌握如何识别并分离[随机过程](@entry_id:159502)中的确定性趋势和纯粹的随机波动。我们将通过三个章节的旅程，带领您深入理解这一强大工具：
*   在“**原理与机制**”中，我们将从基本定义出发，详细介绍[杜布分解](@entry_id:636236)的构造方法，并通过[随机游走](@entry_id:142620)等经典模型来阐明其运作机制。
*   在“**应用与跨学科联系**”中，我们将展示该定理如何应用于金融、经济学、生物学、计算机科学等多个领域，揭示其在解决现实世界问题中的广泛价值。
*   最后，在“**动手实践**”部分，您将通过一系列具体问题来巩固所学知识，亲手进行[杜布分解](@entry_id:636236)，从而加深理解。

让我们一同开始这段旅程，揭开[随机过程](@entry_id:159502)背后的结构之美。

## 原理与机制

在本章中，我们将深入探讨[随机过程](@entry_id:159502)理论中的一个基石性成果——[杜布分解定理](@entry_id:263344) (Doob Decomposition Theorem)。该定理揭示了任何（适应的、可积的）[随机过程](@entry_id:159502)内在的结构，将其唯一地分解为一个可预测的“趋势”部分和一个不可预测的“噪音”部分。这种分解不仅在理论上极为优美，在金融、物理、工程和生物学等领域也具有广泛的应用价值。我们将从基本原理出发，通过一系列精心设计的例子，逐步揭示该定理的构造性方法及其深刻内涵。

### 核心思想：将[随机过程分解](@entry_id:637354)为可预测与不可预测部分

想象一下我们正在观察一个复杂动态系统的演化，例如某种资产的价格、粒子在介质中的运动，或是某种疾病在人群中的传播数量。这些过程随时间随机演变，但其行为并非完全混乱。一部分变化可能源于某种内在的、确定的趋势，而另一部分则来自无法预料的随机扰动。[杜布分解定理](@entry_id:263344)正是对这一直观思想的严格数学刻画。

在深入定理之前，我们首先明确几个核心概念：

*   **滤子 (Filtration)**：一个随时间增长的 $\sigma$-代数序列 $\{\mathcal{F}_n\}_{n \ge 0}$，即 $\mathcal{F}_n \subseteq \mathcal{F}_{n+1}$。在时刻 $n$，$\mathcal{F}_n$ 代表了我们所能获得的所有历史信息。
*   **[适应过程](@entry_id:187710) (Adapted Process)**：一个[随机过程](@entry_id:159502) $\{X_n\}_{n \ge 0}$，如果对于每个 $n$，[随机变量](@entry_id:195330) $X_n$ 都是 $\mathcal{F}_n$-可测的。这意味着在时刻 $n$，$X_n$ 的值是已知的。
*   **[鞅](@entry_id:267779) (Martingale)**：一个适应且可积的过程 $\{M_n\}_{n \ge 0}$，满足对所有 $n \ge 0$，有 $E[M_{n+1} | \mathcal{F}_n] = M_n$。鞅代表了一个“公平游戏”，即在已知所有历史信息的条件下，下一时刻的[期望值](@entry_id:153208)等于当前值。它的变化是完全不可预测的。
*   **[可预测过程](@entry_id:262945) (Predictable Process)**：一个[适应过程](@entry_id:187710) $\{A_n\}_{n \ge 0}$，如果 $A_0$ 是一个常数（通常为0），且对于每个 $n \ge 1$，$A_n$ 都是 $\mathcal{F}_{n-1}$-可测的。这意味着在时刻 $n$ 到来之前，即在时刻 $n-1$ 结束时，$A_n$ 的值就已经完全确定。它代表了过程中的“趋势”或“漂移”。

**[杜布分解定理](@entry_id:263344) (Doob Decomposition Theorem)** 指出：对于任何适应于滤子 $\{\mathcal{F}_n\}_{n \ge 0}$ 且可积（即 $E[|X_n|]  \infty$ 对所有 $n$ 成立）的[随机过程](@entry_id:159502) $\{X_n\}_{n \ge 0}$，都存在一个唯一的分解：
$$
X_n = M_n + A_n, \quad n \ge 0
$$
其中 $\{M_n\}_{n \ge 0}$ 是一个关于滤子 $\{\mathcal{F}_n\}$ 的[鞅](@entry_id:267779)，而 $\{A_n\}_{n \ge 0}$ 是一个关于该滤子的[可预测过程](@entry_id:262945)，且满足初始条件 $A_0 = 0$。通常，为了保持 $X_0 = M_0 + A_0$ 的形式，我们有 $M_0 = X_0$。

### 分解的构造方法

[杜布分解定理](@entry_id:263344)的强大之处在于它不仅保证了分解的存在性和唯一性，还提供了一种明确的构造方法。这种方法的核心在于识别并分离出过程增量中的可预测部分。

对于一个[适应过程](@entry_id:187710) $X_n$，我们考虑其在时刻 $k$ 的增量 $X_k - X_{k-1}$。在拥有时刻 $k-1$ 全部信息 $\mathcal{F}_{k-1}$ 的条件下，我们对这个增量取条件期望，得到 $E[X_k - X_{k-1} | \mathcal{F}_{k-1}]$。这个量代表了基于历史信息对下一时刻增量的“最佳预测”。

[可预测过程](@entry_id:262945) $A_n$ 正是这些“最佳预测”的[累积和](@entry_id:748124)。其增量被定义为：
$$
\Delta A_k := A_k - A_{k-1} = E[X_k - X_{k-1} | \mathcal{F}_{k-1}], \quad k \ge 1
$$
由于条件期望 $E[\cdot | \mathcal{F}_{k-1}]$ 的结果是 $\mathcal{F}_{k-1}$-可测的，所以 $\Delta A_k$ 是 $\mathcal{F}_{k-1}$-可测的。从初始条件 $A_0 = 0$ 出发，我们可以通过累加得到 $A_n$：
$$
A_n = \sum_{k=1}^n \Delta A_k = \sum_{k=1}^n E[X_k - X_{k-1} | \mathcal{F}_{k-1}]
$$
这个 $A_n$ 是之前所有增量 $\Delta A_1, \dots, \Delta A_k$ 的和，而每个 $\Delta A_k$ 都是 $\mathcal{F}_{k-1}$-可测的，因此 $A_n$ 显然是 $\mathcal{F}_{n-1}$-可测的，满足[可预测过程](@entry_id:262945)的定义。

一旦我们确定了可预测部分 $A_n$，鞅部分 $M_n$ 就自然地被定义为原始过程与可预测部分之差：
$$
M_n = X_n - A_n
$$
我们可以验证 $\{M_n\}$ 确实是一个[鞅](@entry_id:267779)。它的增量是：
$$
M_k - M_{k-1} = (X_k - A_k) - (X_{k-1} - A_{k-1}) = (X_k - X_{k-1}) - (A_k - A_{k-1}) = (X_k - X_{k-1}) - E[X_k - X_{k-1} | \mathcal{F}_{k-1}]
$$
这个增量被称为**[鞅](@entry_id:267779)差 (martingale difference)** 或新息 (innovation)，它代表了实际增量与预测增量之间的“意外”或“误差”。对其取关于 $\mathcal{F}_{k-1}$ 的[条件期望](@entry_id:159140)，我们得到：
$$
E[M_k - M_{k-1} | \mathcal{F}_{k-1}] = E[X_k - X_{k-1} | \mathcal{F}_{k-1}] - E[E[X_k - X_{k-1} | \mathcal{F}_{k-1}] | \mathcal{F}_{k-1}]
$$
根据[条件期望](@entry_id:159140)的“[塔性质](@entry_id:273153)”，内层的[条件期望](@entry_id:159140)已经是 $\mathcal{F}_{k-1}$-可测的，所以外层[条件期望](@entry_id:159140)不起作用。因此，上式变为：
$$
E[M_k - M_{k-1} | \mathcal{F}_{k-1}] = E[X_k - X_{k-1} | \mathcal{F}_{k-1}] - E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = 0
$$
这意味着 $E[M_k | \mathcal{F}_{k-1}] = M_{k-1}$，证明了 $\{M_n\}$ 是一个鞅。

### 基本应用：[随机游走](@entry_id:142620)与累积过程

为了具体理解这套机制，我们从最简单的累积过程和[随机游走](@entry_id:142620)开始。

#### 带有确定性漂移的过程

考虑一个简化的资产价格模型 [@problem_id:1397466]。设资产初始价格为 $X_0$，其后每一天的价格由一个确定性日增长量 $\alpha$ 和一个均值为零的随机冲击 $Z_k$ 共同决定。这里 $\{Z_k\}_{k \ge 1}$ 是一系列独立同分布的[随机变量](@entry_id:195330)，满足 $E[Z_k]=0$。价格过程可以表示为：
$$
X_n = X_0 + \sum_{k=1}^n Z_k + n\alpha
$$
这是一个适应于由 $\{Z_k\}$ 生成的自然滤子 $\mathcal{F}_n = \sigma(Z_1, \dots, Z_n)$ 的过程。其增量为 $X_k - X_{k-1} = Z_k + \alpha$。我们计算其条件期望：
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = E[Z_k + \alpha | \mathcal{F}_{k-1}] = E[Z_k | \mathcal{F}_{k-1}] + \alpha
$$
由于 $Z_k$ 独立于 $\mathcal{F}_{k-1}$（包含 $Z_1, \dots, Z_{k-1}$ 的信息），且 $E[Z_k]=0$，我们有 $E[Z_k | \mathcal{F}_{k-1}] = E[Z_k] = 0$。因此，
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = \alpha
$$
这意味着可预测部分的增量是一个常数 $\alpha$。于是，[可预测过程](@entry_id:262945)为：
$$
A_n = \sum_{k=1}^n \alpha = n\alpha
$$
鞅部分则为：
$$
M_n = X_n - A_n = \left(X_0 + \sum_{k=1}^n Z_k + n\alpha\right) - n\alpha = X_0 + \sum_{k=1}^n Z_k
$$
这个分解完美地将资产价格的确定性增长趋势 $A_n = n\alpha$ 和由市场随机性驱动的、均值为零的波动部分 $M_n = X_0 + \sum Z_k$ 分离开来。

#### 有偏[随机游走](@entry_id:142620)

现在考虑一类更普遍的有偏[随机游走](@entry_id:142620)。
一个经典的例子是[计数过程](@entry_id:260664)，如模拟在线广告点击次数 [@problem_id:1397474]。设每次广告展示被点击的概率为 $p$，令 $Y_k=1$ 表示第 $k$ 次展示被点击，$Y_k=0$ 表示未被点击。$Y_k$ 是[独立同分布](@entry_id:169067)的伯努利[随机变量](@entry_id:195330)， $E[Y_k]=p$。总点击次数 $X_n = \sum_{k=1}^n Y_k$。过程增量为 $X_k - X_{k-1} = Y_k$。由于 $Y_k$ 独立于过去的信息 $\mathcal{F}_{k-1}$，
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = E[Y_k] = p
$$
因此，可预测部分是 $A_n = \sum_{k=1}^n p = np$，它代表了 $n$ 次展示后的期望点击数。鞅部分则是 $M_n = X_n - np$，它度量了实际点击数与期望点击数之间的随机偏差。

另一个相关的例子是粒子在一维整数轴上的有偏[随机游走](@entry_id:142620) [@problem_id:1298505]。设粒子每一步向右（+1）的概率为 $p$，向左（-1）的概率为 $1-p$，其中 $p \neq 1/2$。粒子的位置 $S_n = \sum_{i=1}^n Y_i$，其中 $Y_i$ 是表示第 $i$ 步的[随机变量](@entry_id:195330)。每一步的期望是 $E[Y_i] = 1 \cdot p + (-1) \cdot (1-p) = 2p-1$。这个值代表了粒子运动的平均漂移。
对过程 $S_n$ 进行[杜布分解](@entry_id:636236)，其增量为 $S_n - S_{n-1} = Y_n$。
$$
E[S_n - S_{n-1} | \mathcal{F}_{n-1}] = E[Y_n] = 2p-1
$$
可预测部分为 $A_n = \sum_{k=1}^n (2p-1) = n(2p-1)$。这正是 $n$ 步之后粒子位置的[期望值](@entry_id:153208)。
鞅部分为 $M_n = S_n - n(2p-1)$。通过从原始过程中减去其期望漂移，我们得到了一个公平游戏（鞅）。

### 深入探讨：过程的二次变差

到目前为止，我们看到的可预测部分都是确定性的线性函数。当研究[非线性](@entry_id:637147)过程，特别是过程的平方时，情况变得更加有趣。

#### [对称随机游走](@entry_id:273558)的平方

考虑一个简单的[对称随机游走](@entry_id:273558)（SSRW），即上例中 $p=1/2$ 的情况 [@problem_id:1397481]。设 $S_n = \sum_{k=1}^n \xi_k$，其中 $P(\xi_k=1) = P(\xi_k=-1) = 1/2$。我们知道 $S_n$ 本身是一个鞅，因为 $E[\xi_k]=0$。现在我们来分解过程 $X_n = S_n^2$。这是一个次[鞅](@entry_id:267779) (submartingale)，因为它倾向于随时间增长。
增量为 $X_k - X_{k-1} = S_k^2 - S_{k-1}^2 = (S_{k-1}+\xi_k)^2 - S_{k-1}^2 = 2S_{k-1}\xi_k + \xi_k^2$。计算其条件期望：
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = E[2S_{k-1}\xi_k + \xi_k^2 | \mathcal{F}_{k-1}] = 2S_{k-1}E[\xi_k | \mathcal{F}_{k-1}] + E[\xi_k^2 | \mathcal{F}_{k-1}]
$$
由于 $S_{k-1}$ 是 $\mathcal{F}_{k-1}$-可测的，且 $\xi_k$ 独立于 $\mathcal{F}_{k-1}$，我们有 $E[\xi_k | \mathcal{F}_{k-1}] = E[\xi_k] = 0$。同时，$\xi_k^2 = (\pm 1)^2 = 1$ 恒成立，所以 $E[\xi_k^2 | \mathcal{F}_{k-1}] = E[1] = 1$。因此，
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = 2S_{k-1} \cdot 0 + 1 = 1
$$
可预测增量为常数1！这意味着[可预测过程](@entry_id:262945)为 $A_n = \sum_{k=1}^n 1 = n$。
[杜布分解](@entry_id:636236)为 $S_n^2 = (S_n^2 - n) + n$。
这里的鞅部分 $M_n = S_n^2 - n$ 是一个非常著名的[鞅](@entry_id:267779)。可预测部分 $A_n=n$ 捕捉了 $S_n^2$ 的期望增长率。尽管 $S_n$ 本身没有漂移，但其平方的[期望值](@entry_id:153208)会随时间线性增长（$E[S_n^2] = n$），而 $A_n$ 正是这个确定性增长。这个 $A_n$ 被称为鞅 $S_n$ 的**二次变差 (quadratic variation)** 过程。更一般地，对于一个[鞅](@entry_id:267779) $M_n$，其平方 $M_n^2$ 的[杜布分解](@entry_id:636236)中的可预测部分 $A_n = \sum_{k=1}^n E[(M_k - M_{k-1})^2 | \mathcal{F}_{k-1}]$，是其[条件方差](@entry_id:183803)的累积，扮演着核心角色。

这个问题的一个直接推广是考虑一个均值为 $\mu$、[方差](@entry_id:200758)为 $\sigma^2$ 的[随机游走](@entry_id:142620) $S_n = \sum Y_k$ [@problem_id:1397436]。如果我们考察其中心化后的平方过程 $X_n = (S_n - n\mu)^2$，可以令 $Z_k = Y_k - \mu$，则 $E[Z_k]=0, E[Z_k^2]=\sigma^2$。过程变为 $X_n = (\sum Z_k)^2$。与上例完全类似地计算，可得 $E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = \sigma^2$。因此，可预测部分为 $A_n = n\sigma^2$。这再次印证了二次过程的漂移是由增量的[方差](@entry_id:200758)累积而成的。
同样的结果也适用于更一般的情况，例如，当步长为 $\pm c$ 而不是 $\pm 1$ 时 [@problem_id:1397456]，可预测部分则为 $A_n = nc^2$。

### [可预测过程](@entry_id:262945)的本质：依赖于过去

至此，我们遇到的[可预测过程](@entry_id:262945) $A_n$ 都是确定性函数（如 $n\alpha$, $np$, $n\sigma^2$）。然而，“可预测”的真正含义是“在一步之前已知”，而不必是“确定性的”。下面的例子将阐明这一点。

#### 反射[随机游走](@entry_id:142620)

再次考虑[对称随机游走](@entry_id:273558) $S_n$，但这次我们分析其[绝对值](@entry_id:147688)过程 $X_n = |S_n|$ [@problem_id:1397444]。这个过程描述了粒子到原点的距离，它是一个次鞅。
我们来计算其[条件期望](@entry_id:159140)增量 $E[|S_k| - |S_{k-1}| | \mathcal{F}_{k-1}]$。
$$
E[|S_k| | \mathcal{F}_{k-1}] = E[|S_{k-1} + \xi_k| | \mathcal{F}_{k-1}] = \frac{1}{2}|S_{k-1}+1| + \frac{1}{2}|S_{k-1}-1|
$$
这里需要分情况讨论 $S_{k-1}$ 的取值：
*   如果 $S_{k-1} \neq 0$，则 $|S_{k-1}| \ge 1$。不难验证此时 $E[|S_k| | \mathcal{F}_{k-1}] = |S_{k-1}| = X_{k-1}$。
*   如果 $S_{k-1} = 0$，则 $E[|S_k| | \mathcal{F}_{k-1}] = \frac{1}{2}|1| + \frac{1}{2}|-1| = 1$。而此时 $X_{k-1}=|0|=0$。
所以，条件期望增量为：
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = E[|S_k| | \mathcal{F}_{k-1}] - |S_{k-1}| = \begin{cases} 0  \text{if } S_{k-1} \neq 0 \\ 1  \text{if } S_{k-1} = 0 \end{cases}
$$
这个结果可以用[指示函数](@entry_id:186820)简洁地表示为 $\mathbf{1}_{\{S_{k-1}=0\}}$。这意味着，只有当粒子恰好在原点时，它的距离才会有正的期望漂移。
累加这些增量，我们得到[可预测过程](@entry_id:262945)：
$$
A_n = \sum_{k=1}^n \mathbf{1}_{\{S_{k-1}=0\}} = \sum_{j=0}^{n-1} \mathbf{1}_{\{S_j=0\}}
$$
这个过程 $A_n$ 计算了[随机游走](@entry_id:142620)在时刻 $n-1$ 之前访问原点的次数，通常被称为**[局部时](@entry_id:194383) (local time)**。$A_n$ 本身是一个[随机过程](@entry_id:159502)，它的值依赖于游走的具体路径。但由于 $A_n$ 的值在时刻 $n-1$ 就已完全确定，它是一个名副其实的（非确定性）[可预测过程](@entry_id:262945)。这完美地诠释了“可预测”的本质。

#### [马尔可夫链](@entry_id:150828)

[杜布分解](@entry_id:636236)的应用远不止于[随机游走](@entry_id:142620)。考虑一个在状态 $\{0, 1\}$（例如，“失效”和“运行”）之间转换的[马尔可夫链](@entry_id:150828) $X_n$ [@problem_id:1298497]。设从状态0转换到1的概率为 $\alpha$，从1到0为 $\beta$。我们对过程 $X_n$ 本身进行分解。
根据马尔可夫性，$E[X_n | \mathcal{F}_{n-1}] = E[X_n | X_{n-1}]$。
$$
E[X_n | X_{n-1}=i] = P(X_n=1|X_{n-1}=i)
$$
这给出了 $E[X_n | X_{n-1}=0] = \alpha$ 和 $E[X_n | X_{n-1}=1] = 1-\beta$。我们可以将其统一写成依赖于 $X_{n-1}$ 的表达式：
$$
E[X_n | \mathcal{F}_{n-1}] = \alpha(1-X_{n-1}) + (1-\beta)X_{n-1} = \alpha + (1-\alpha-\beta)X_{n-1}
$$
可预测增量为：
$$
\Delta A_n = E[X_n | \mathcal{F}_{n-1}] - X_{n-1} = \alpha - (\alpha+\beta)X_{n-1}
$$
[可预测过程](@entry_id:262945) $A_n$ 是这些增量的累加：
$$
A_n = \sum_{k=1}^n (\alpha - (\alpha+\beta)X_{k-1}) = n\alpha - (\alpha+\beta)\sum_{k=0}^{n-1} X_k
$$
同样，$A_n$ 是一个[随机过程](@entry_id:159502)，但它的值完全由过程在 $n-1$ 时刻之前的历史 $\{X_0, \dots, X_{n-1}\}$ 决定，因此是可预测的。鞅部分则是 $M_n = X_n - A_n$。

### 结构性应用与抽象视角

最后，我们通过两个更抽象的例子来展示[杜布分解](@entry_id:636236)的结构性力量。

#### 延迟过程

设 $\{M_n\}$ 是一个[鞅](@entry_id:267779)。我们构造一个“延迟一步”的新过程 $X_n = M_{n-1}$ ($n \ge 1$)，并设 $X_0 = M_0$ [@problem_id:1397465]。这个过程是适应的，因为 $M_{n-1}$ 在时刻 $n-1$ 就已知了，自然在时刻 $n$ 也已知。我们来分解 $X_n$。
其增量为 $X_k - X_{k-1} = M_{k-1} - M_{k-2}$ (对于 $k \ge 2$) 。计算[条件期望](@entry_id:159140)：
$$
E[X_k - X_{k-1} | \mathcal{F}_{k-1}] = E[M_{k-1} - M_{k-2} | \mathcal{F}_{k-1}]
$$
由于 $M_{k-1}$ 和 $M_{k-2}$ 都是 $\mathcal{F}_{k-1}$-可测的，这个条件期望就等于其自身：$M_{k-1} - M_{k-2}$。
[可预测过程](@entry_id:262945) $A_n$ 是这些增量的和：
$$
A_n = \sum_{k=2}^n (M_{k-1} - M_{k-2}) = (M_1 - M_0) + (M_2 - M_1) + \dots + (M_{n-1} - M_{n-2})
$$
这是一个伸缩求和 (telescoping sum)，结果为 $A_n = M_{n-1} - M_0$。这个过程是 $\mathcal{F}_{n-1}$-可测的，因此是可预测的。
鞅部分为 $Y_n = X_n - A_n = M_{n-1} - (M_{n-1} - M_0) = M_0$。由于 $M_0$ 是一个常数（或者一个 $\mathcal{F}_0$-可测的[随机变量](@entry_id:195330)），过程 $\{M_0, M_0, \dots\}$ 是一个鞅。这个例子揭示了，对于一个延迟过程，其过去的所有演化都被归入了可预测部分，而[鞅](@entry_id:267779)部分则冻结在初始状态。

#### [条件方差](@entry_id:183803)过程

作为本章的收尾，我们探讨一个深刻的结果。设 $Z$ 是一个取值为 $\{-1, 1\}$ 的[随机变量](@entry_id:195330)，并定义鞅 $M_n = E[Z|\mathcal{F}_n]$。我们来分解一个与之相关的过程——[条件方差](@entry_id:183803)过程 $V_n = E[(Z-M_n)^2 | \mathcal{F}_n]$ [@problem_id:1397442]。
首先，我们可以简化 $V_n$。因为 $Z^2=1$ 恒成立，
$$
V_n = E[Z^2 - 2ZM_n + M_n^2 | \mathcal{F}_n] = E[1 | \mathcal{F}_n] - 2M_n E[Z|\mathcal{F}_n] + M_n^2 = 1 - 2M_n^2 + M_n^2 = 1 - M_n^2
$$
所以我们的任务是分解 $V_n = 1-M_n^2$。这等价于分解 $-M_n^2$（常数1不影响分解的动态部分）。我们已经知道，对次鞅 $M_n^2$ 的分解会产生二次变差过程。具体来说，$M_n^2$ 的可预测部分是 $A_{M^2, n} = \sum_{k=1}^n E[(M_k - M_{k-1})^2 | \mathcal{F}_{k-1}]$。
因此，对于 $V_n = 1-M_n^2$，其可预测部分 $A_{V,n}$ 就是 $-A_{M^2, n}$。
$$
A_{V,n} = -\sum_{k=1}^n E[(M_k - M_{k-1})^2 | \mathcal{F}_{k-1}]
$$
这个结果揭示了一个优美的对偶关系：鞅 $M_n$ 的平方的“增长趋势”由其二次变差过程捕获，而该[鞅](@entry_id:267779)所估计的变量 $Z$ 的“剩余不确定性”（即[条件方差](@entry_id:183803)）的“衰减趋势”也由同一个二次变差过程（的负值）所捕获。鞅的每一步随机波动，一方面使其平方的期望增大，另一方面也减少了我们对未来[终值](@entry_id:141018)的不确定性。

通过本章的学习，我们看到[杜布分解](@entry_id:636236)不仅是一个抽象的数学定理，更是一个强大的分析工具。它提供了一个统一的框架，用以剖析各类[随机过程](@entry_id:159502)的内在结构，将其分解为可预测的趋势和不可预测的公平游戏。理解这一分解的原理与机制，是深入学习现代[随机过程](@entry_id:159502)理论与应用的关键一步。
{"hands_on_practices": [{"introduction": "理论通向实践的第一步是应用。这个练习将PASTA性质应用于一个经典的排队论场景：一个多服务器系统。由于顾客的到达过程是泊松过程，我们可以利用PASTA性质，将一个新到达的顾客看到的系统状态等同于系统的长期平均状态，从而简化计算。这个问题 [@problem_id:1323294] 将帮助你掌握PASTA性质最直接的应用。", "problem": "一个小型云服务在一个包含两个相同并行服务器的集群上托管一个应用程序。用户请求被引导至此集群，这些请求的到达可以建模为一个泊松过程，平均速率为 $\\lambda = 120$ 请求/小时。如果有一个空闲服务器，则到达的请求会立即分配给该服务器。如果两个服务器都繁忙，则请求加入一个单一队列中，等待下一个可用的服务器。任何服务器上处理单个请求的服务时间呈指数分布，平均服务时间为 $1/\\mu$，其中 $\\mu = 75$ 请求/小时。系统已运行足够长的时间以达到稳态。\n\n一个到达的请求发现两个服务器都空闲的概率是多少？将您的答案表示为保留三位有效数字的小数。", "solution": "将该系统建模为一个 $M/M/2$ 排队模型，其到达率为 $\\lambda$，每个服务器的服务率为 $\\mu$。根据PASTA（泊松到达看到时间平均值）原理，一个到达的请求发现两个服务器都空闲的概率等于系统中没有请求的稳态概率，记为 $p_{0}$。\n\n对于一个 $c=2$ 的 $M/M/c$ 系统，定义业务负荷 $a=\\lambda/\\mu$ 以及每个服务器的利用率 $\\rho=\\lambda/(c\\mu)=a/c$。稳態下系统为空的概率为\n$$\np_{0}=\\left[\\sum_{n=0}^{c-1}\\frac{a^{n}}{n!}+\\frac{a^{c}}{c!\\,(1-\\rho)}\\right]^{-1}.\n$$\n当 $c=2$ 时，该式变为\n$$\np_{0}=\\left[1+a+\\frac{a^{2}}{2\\,(1-\\rho)}\\right]^{-1}.\n$$\n代入 $\\lambda=120$ 和 $\\mu=75$，可得 $a=\\lambda/\\mu=120/75=1.6$ 和 $\\rho=a/2=0.8$。那么 $1-\\rho=0.2$，并且\n$$\np_{0}=\\left[1+1.6+\\frac{(1.6)^{2}}{2\\cdot 0.2}\\right]^{-1}\n=\\left[1+1.6+\\frac{2.56}{0.4}\\right]^{-1}\n=\\left[1+1.6+6.4\\right]^{-1}\n=\\frac{1}{9}.\n$$\n作为一个保留三位有效数字的小数，结果是 $0.111$。", "answer": "$$\\boxed{0.111}$$", "id": "1323294"}, {"introduction": "PASTA性质为我们提供了顾客到达时系统状态的快照，但其实际威力在于我们可以基于此进行更深入的概率推理。在这个问题中，我们不仅要知道系统在某个状态的概率，还要在一个特定条件下（即服务员正忙）计算队列的状况。这个练习 [@problem_id:1341713] 展示了如何将PASTA的结果与条件概率相结合，解决更具体、更实际的问题。", "problem": "一所大学的技术支持热线由一名工作人员负责运营。寻求帮助的呼叫到达过程很好地服从泊松过程，而处理每个呼叫所需的时间服从指数分布。因此，该系统可以用一个M/M/1排队模型来描述。已知流量强度（定义为平均呼叫到达率与平均服务率之比）为 $\\rho = \\frac{2}{3}$。一名学生在某个随机时间呼叫该热线。已知该学生没有立即得到服务，因为工作人员正在处理之前的呼叫，那么队列中恰好有另一名呼叫者在等待（即等待服务）的概率是多少？请将你的答案以小数形式表示，并四舍五入到三位有效数字。", "solution": "设 $N$ 表示在流量强度为 $\\rho=\\lambda/\\mu$（其中 $0  \\rho  1$）的M/M/1队列中，系统中的稳态数量（正在接受服务的加上等待服务的）。其平稳分布为\n$$\n\\Pr(N=n)=(1-\\rho)\\rho^{n},\\quad n=0,1,2,\\dots\n$$\n由于到达过程是泊松过程，根据PASTA性质，一个到达的学生看到的是时间平均分布。事件“没有立即得到服务”等价于“服务员忙碌”，即 $N\\geq 1$，其发生的概率为\n$$\n\\Pr(N\\geq 1)=1-\\Pr(N=0)=1-(1-\\rho)=\\rho.\n$$\n设 $W$ 为队列中等待的呼叫者数量（不包括正在接受服务的）。那么 $W=k$ 对应于 $N=k+1$。在服务员忙碌的条件下，\n$$\n\\Pr(W=k\\mid N\\geq 1)=\\frac{\\Pr(N=k+1)}{\\Pr(N\\geq 1)}=\\frac{(1-\\rho)\\rho^{k+1}}{\\rho}=(1-\\rho)\\rho^{k},\\quad k=0,1,2,\\dots\n$$\n对于前面恰好有一名呼叫者的情况，取 $k=1$：\n$$\n\\Pr(W=1\\mid N\\geq 1)=(1-\\rho)\\rho.\n$$\n当 $\\rho=\\frac{2}{3}$ 时，\n$$\n(1-\\rho)\\rho=\\left(1-\\frac{2}{3}\\right)\\left(\\frac{2}{3}\\right)=\\frac{1}{3}\\cdot\\frac{2}{3}=\\frac{2}{9}=0.222\\ldots\n$$\n四舍五入到三位有效数字，结果是 $0.222$。", "answer": "$$\\boxed{0.222}$$", "id": "1341713"}, {"introduction": "理解一个理论的适用边界和其本身同样重要。PASTA性质的成立依赖于一个关键前提：到达过程是泊松过程。如果到达率本身取决于系统当前的状态，那么到达事件就不再是“完全随机”地发生在时间轴上的了。这个问题 [@problem_id:1323282] 探讨了这种PASTA不成立的情形，迫使我们区分“到达平均”（arrival average）和“时间平均”（time average）这两个重要概念，从而深化对随机过程观察者偏差的理解。", "problem": "一家软件公司使用缺陷跟踪系统来管理来自用户的报告。由于一种被称为“用户灰心”的现象，新缺陷报告的提交速率取决于当前未解决的缺陷数量 $n$。具体来说，到达过程遵循一个状态依赖的泊松过程，其速率为 $\\lambda_n = \\frac{\\lambda}{n+1}$，其中 $\\lambda$ 是一个表示基础到达率的正数常量。\n一个开发团队负责解决这些缺陷。他们的工作流程被建模为：只要系统中至少有一个缺陷（$n \\ge 1$），缺陷就以恒定的速率 $\\mu$ 被解决。假设系统处于稳态，并且可以作为一个生灭过程进行分析。\n\n设 $L$ 为系统中未解决缺陷的长期时间平均数量。\n设 $L_a$ 为一个新到达的缺陷报告所“看到”的未解决缺陷的平均数量。\n\n确定比率 $R = \\frac{L_a}{L}$。请用参数 $\\rho = \\lambda/\\mu$ 的闭式解析表达式来表示您的答案。", "solution": "将未解决的缺陷数量建模为一个生灭过程，其出生率为 $\\lambda_{n} = \\lambda/(n+1)$，死亡率为 $\\mu_{n} = \\mu$（对于 $n \\ge 1$）以及 $\\mu_{0}=0$。在稳态下，生灭过程的细致平衡方程给出\n$$\n\\pi_{n} \\lambda_{n} = \\pi_{n+1} \\mu \\quad \\Rightarrow \\quad \\pi_{n+1} = \\pi_{n} \\frac{\\lambda_{n}}{\\mu} = \\pi_{n} \\frac{\\lambda}{\\mu} \\frac{1}{n+1} = \\pi_{n} \\frac{\\rho}{n+1},\n$$\n其中 $\\rho = \\lambda/\\mu$。迭代得到，\n$$\n\\pi_{n} = \\pi_{0} \\frac{\\rho^{n}}{n!}.\n$$\n归一化条件 $\\sum_{n=0}^{\\infty} \\pi_{n} = 1$ 得到 $\\pi_{0} = \\exp(-\\rho)$，因此\n$$\n\\pi_{n} = \\exp(-\\rho) \\frac{\\rho^{n}}{n!}.\n$$\n因此，未解决缺陷的长期时间平均数量为\n$$\nL = \\sum_{n=0}^{\\infty} n \\pi_{n} = \\rho.\n$$\n\n设 $\\bar{\\lambda}$ 表示长期平均到达率。根据稳态流量平衡（平均到达等于平均离开），\n$$\n\\bar{\\lambda} = \\sum_{n=0}^{\\infty} \\lambda_{n} \\pi_{n} = \\sum_{n=1}^{\\infty} \\mu \\pi_{n} = \\mu \\left(1 - \\pi_{0}\\right) = \\mu \\left(1 - \\exp(-\\rho)\\right).\n$$\n\n对于状态依赖的泊松到达，任意到达所见状态的分布为\n$$\np^{(a)}_{n} = \\frac{\\lambda_{n} \\pi_{n}}{\\bar{\\lambda}}.\n$$\n因此，一个到达所看到的平均数量为\n$$\nL_{a} = \\sum_{n=0}^{\\infty} n p^{(a)}_{n} = \\frac{1}{\\bar{\\lambda}} \\sum_{n=0}^{\\infty} n \\lambda_{n} \\pi_{n} = \\frac{\\lambda}{\\bar{\\lambda}} \\sum_{n=0}^{\\infty} \\frac{n}{n+1} \\pi_{n}.\n$$\n将 $\\frac{n}{n+1} = 1 - \\frac{1}{n+1}$ 代入以获得\n$$\n\\sum_{n=0}^{\\infty} \\frac{n}{n+1} \\pi_{n} = 1 - \\sum_{n=0}^{\\infty} \\frac{1}{n+1} \\pi_{n}.\n$$\n但是\n$$\n\\sum_{n=0}^{\\infty} \\frac{1}{n+1} \\pi_{n} = \\frac{1}{\\lambda} \\sum_{n=0}^{\\infty} \\lambda_{n} \\pi_{n} = \\frac{\\bar{\\lambda}}{\\lambda}.\n$$\n因此\n$$\nL_{a} = \\frac{\\lambda}{\\bar{\\lambda}} \\left(1 - \\frac{\\bar{\\lambda}}{\\lambda}\\right) = \\frac{\\lambda}{\\bar{\\lambda}} - 1.\n$$\n\n所求的比率为\n$$\nR = \\frac{L_{a}}{L} = \\frac{\\frac{\\lambda}{\\bar{\\lambda}} - 1}{\\rho}.\n$$\n代入 $\\bar{\\lambda} = \\mu \\left(1 - \\exp(-\\rho)\\right)$ 和 $\\rho = \\lambda/\\mu$，\n$$\n\\frac{\\lambda}{\\bar{\\lambda}} = \\frac{\\lambda}{\\mu \\left(1 - \\exp(-\\rho)\\right)} = \\frac{\\rho}{1 - \\exp(-\\rho)},\n$$\n所以\n$$\nR = \\frac{1}{\\rho} \\left(\\frac{\\rho}{1 - \\exp(-\\rho)} - 1\\right) = \\frac{1}{1 - \\exp(-\\rho)} - \\frac{1}{\\rho}.\n$$\n这是一个纯粹用 $\\rho$ 表示的解析表达式。", "answer": "$$\\boxed{\\frac{1}{1 - \\exp(-\\rho)} - \\frac{1}{\\rho}}$$", "id": "1323282"}]}
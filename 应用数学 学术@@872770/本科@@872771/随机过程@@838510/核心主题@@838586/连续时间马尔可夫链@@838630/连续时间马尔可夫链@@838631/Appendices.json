{"hands_on_practices": [{"introduction": "在分析任何连续时间马尔可夫链之前，首要任务是将其动态特性精确地转化为数学语言。生成元矩阵 $Q$ 正是这一过程的核心，它如同系统的“蓝图”，详细记录了所有可能的状态转移及其速率。这个练习将通过一个关于计算机病毒生命周期的直观场景，帮助你掌握如何从文字描述中构建生成元矩阵，这是后续所有分析的基础。[@problem_id:1352656]", "problem": "一个计算机病毒在受感染机器上的生命周期简化模型，被描述为一个连续时间马尔可夫链。该病毒可以处于以下三种状态之一：休眠（状态1）、复制（状态2）或被检测（状态3）。\n\n状态之间的转移由以下速率决定：\n- 一个休眠病毒以每天 $\\lambda$ 的恒定速率被激活并开始复制。\n- 一个复制中的病毒可能以每天 $\\mu$ 的恒定速率再次进入休眠状态，以躲避简单的检测机制。\n- 一个活跃的杀毒扫描程序以每天 $\\sigma_R$ 的恒定速率发现并标记一个复制中的病毒。\n- 扫描程序也可以发现休眠病毒，但速率较低，为每天 $\\sigma_D$ 的恒定速率。\n- 一旦病毒处于“被检测”状态，它就会被隔离，并且不能再改变其状态。\n\n你的任务是为该连续时间马尔可夫链构建生成元矩阵，记为 $Q$。状态应按（1：休眠，2：复制，3：被检测）的顺序排列。将矩阵 $Q$ 作为你的最终答案。", "solution": "我们将病毒生命周期建模为一个连续时间马尔可夫链，其状态按如下顺序排列：1为休眠，2为复制，3为被检测。对于一个连续时间马尔可夫链的生成元矩阵 $Q=\\{q_{ij}\\}$，当 $i\\neq j$ 时，非对角线元素 $q_{ij}$ 是从状态 $i$ 到状态 $j$ 的转移速率，而对角线元素满足 $q_{ii}=-\\sum_{j\\neq i}q_{ij}$，因此每行之和为零。\n\n根据问题描述，非零的转移速率如下：\n- 从休眠（1）到复制（2）：速率为 $\\lambda$，所以 $q_{12}=\\lambda$。\n- 从休眠（1）到被检测（3）：速率为 $\\sigma_{D}$，所以 $q_{13}=\\sigma_{D}$。\n- 从复制（2）到休眠（1）：速率为 $\\mu$，所以 $q_{21}=\\mu$。\n- 从复制（2）到被检测（3）：速率为 $\\sigma_{R}$，所以 $q_{23}=\\sigma_{R}$。\n- 被检测（3）是吸收态，所以没有从状态3出去的转移，这意味着 $q_{31}=0$ 且 $q_{32}=0$。\n\n对每个状态使用公式 $q_{ii}=-\\sum_{j\\neq i}q_{ij}$：\n- 对于状态1：$q_{11}=-(\\lambda+\\sigma_{D})$。\n- 对于状态2：$q_{22}=-(\\mu+\\sigma_{R})$。\n- 对于状态3：$q_{33}=0$。\n\n因此，在指定的状态顺序下，生成元矩阵 $Q$ 为\n$$\nQ=\\begin{pmatrix}\n-(\\lambda+\\sigma_{D})  \\lambda  \\sigma_{D} \\\\\n\\mu  -(\\mu+\\sigma_{R})  \\sigma_{R} \\\\\n0  0  0\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\n-(\\lambda+\\sigma_{D})  \\lambda  \\sigma_{D} \\\\\n\\mu  -(\\mu+\\sigma_{R})  \\sigma_{R} \\\\\n0  0  0\n\\end{pmatrix}}$$", "id": "1352656"}, {"introduction": "连续时间马尔可夫链的一个强大应用是分析系统的“终结”事件，例如设备故障或项目完成。通过定义吸收态，我们可以计算系统从某个初始状态到达这个终点所需的平均时间。这个练习将指导你如何利用生成元矩阵建立并求解一个线性方程组，从而精确预测一个计算单元进入“失效”状态的期望时间，这在可靠性工程和风险评估中至关重要。[@problem_id:1292548]", "problem": "一个用于高频交易系统的专用计算单元可以被建模为处于以下三种状态之一：状态1（`Active`，活跃）、状态2（`Lagging`，延迟）和状态3（`Failed`，失效）。这些状态之间的转移遵循连续时间马尔可夫链的动态。\n\n- 在 `Active` 状态下，该单元以全负荷运行。\n- 在 `Lagging` 状态下，该单元的处理速度下降，但仍可正常工作。\n- 在 `Failed` 状态下，该单元已停止工作，需要手动重置。一旦该单元进入 `Failed` 状态，它将永久保持在该状态。\n\n状态之间的转移率（单位：事件/小时）如下：\n- 从 `Active` 到 `Lagging` 的转移率为 $\\lambda_{12} = 2.0$。\n- 从 `Active` 到 `Failed` 的转移率为 $\\lambda_{13} = 0.1$。\n- 从 `Lagging` 到 `Active` 的转移率为 $\\lambda_{21} = 4.0$。\n- 从 `Lagging` 到 `Failed` 的转移率为 $\\lambda_{23} = 0.5$。\n\n所有其他不同状态之间的转移率均为零。如果该单元从 `Active` 状态开始，那么它进入 `Failed` 状态的期望时间是多少？\n\n答案以小时为单位表示，并四舍五入到三位有效数字。", "solution": "将系统建模为具有状态 $1$ (Active)、$2$ (Lagging) 和 $3$ (Failed) 的连续时间马尔可夫链，其中状态 $3$ 是吸收态。瞬态之间转移的生成元矩阵元素满足，当 $i\\neq j$ 时，$q_{ij}=\\lambda_{ij}$，且 $q_{ii}=-\\sum_{j\\neq i}\\lambda_{ij}$。根据给定的转移率，\n$$\nq_{12}=2.0,\\quad q_{13}=0.1,\\quad q_{21}=4.0,\\quad q_{23}=0.5,\n$$\n所以\n$$\nq_{11}=-(2.0+0.1)=-2.1,\\quad q_{22}=-(4.0+0.5)=-4.5,\\quad q_{33}=0.\n$$\n限制在瞬态 $1$ 和 $2$ 上，子生成元矩阵为\n$$\nQ_{T}=\\begin{pmatrix}\n-2.1  2.0\\\\\n4.0  -4.5\n\\end{pmatrix}.\n$$\n设 $t_{i}$ 为从状态 $i$ 开始，到达吸收态（进入状态 $3$）的期望时间。对于一个连续时间马尔可夫链（CTMC），瞬态的期望吸收时间满足\n$$\nQ_{T}\\begin{pmatrix}t_{1}\\\\ t_{2}\\end{pmatrix}=-\\begin{pmatrix}1\\\\ 1\\end{pmatrix}.\n$$\n因此，\n$$\n\\begin{cases}\n-2.1\\,t_{1}+2.0\\,t_{2}=-1,\\\\\n4.0\\,t_{1}-4.5\\,t_{2}=-1.\n\\end{cases}\n$$\n解此方程组。根据第一个方程，\n$$\n-2.1\\,t_{1}=-1-2.0\\,t_{2}\\quad\\Rightarrow\\quad t_{1}=\\dfrac{1+2.0\\,t_{2}}{2.1}.\n$$\n代入第二个方程：\n$$\n4.0\\left(\\dfrac{1+2.0\\,t_{2}}{2.1}\\right)-4.5\\,t_{2}=-1.\n$$\n为了保持精确计算，将 $2.1=\\dfrac{21}{10}$ 和 $4.5=\\dfrac{9}{2}$ 代入：\n$$\n\\dfrac{40}{21}\\left(1+2t_{2}\\right)-\\dfrac{9}{2}\\,t_{2}=-1\n\\;\\Rightarrow\\;\n\\dfrac{40}{21}+\\left(\\dfrac{80}{21}-\\dfrac{9}{2}\\right)t_{2}=-1.\n$$\n计算 $t_{2}$ 的系数：\n$$\n\\dfrac{80}{21}-\\dfrac{9}{2}=\\dfrac{160}{42}-\\dfrac{189}{42}=-\\dfrac{29}{42},\n$$\n所以\n$$\n\\dfrac{40}{21}-\\dfrac{29}{42}\\,t_{2}=-1\n\\;\\Rightarrow\\;\n-\\dfrac{29}{42}\\,t_{2}=-1-\\dfrac{40}{21}=-\\dfrac{61}{21}.\n$$\n因此，\n$$\nt_{2}=\\left(-\\dfrac{61}{21}\\right)\\left(-\\dfrac{42}{29}\\right)=\\dfrac{61}{21}\\cdot\\dfrac{42}{29}=\\dfrac{122}{29}.\n$$\n反向代入求得 $t_{1}$：\n$$\nt_{1}=\\dfrac{1+2t_{2}}{2.1}=\\dfrac{1+\\dfrac{244}{29}}{\\dfrac{21}{10}}\n=\\dfrac{\\dfrac{273}{29}}{\\dfrac{21}{10}}=\\dfrac{273}{29}\\cdot\\dfrac{10}{21}\n=\\dfrac{130}{29}.\n$$\n由于该单元从 `Active` 状态开始，所求的期望时间为 $t_{1}=\\dfrac{130}{29}\\,\\text{hours}\\approx 4.48275862\\,\\text{hours}$，四舍五入到三位有效数字后为 $4.48$ 小时。", "answer": "$$\\boxed{4.48}$$", "id": "1292548"}, {"introduction": "除了分析性求解，模拟是理解随机过程行为的另一种核心方法，它能让我们直观地“观察”到系统的演化。本练习将带你亲手模拟一个马尔可夫链的样本路径，揭示其内在的随机机制：状态的停留时间服从指数分布，而下一次跳往何处则由转移概率决定。通过逐步计算，你将看到抽象的速率参数如何转化为一条具体、动态的系统状态轨迹。[@problem_id:1292573]", "problem": "一个小型私有云计算节点正在被监控。其状态可以被建模为一个连续时间马尔可夫链。该系统可能处于以下四种状态之一：状态 1 (`Idle`，空闲)、状态 2 (`Processing`，处理中)、状态 3 (`Overloaded`，过载)或状态 4 (`Failed`，故障)。\n\n系统的动态由以下转移率决定：\n- 新任务以速率 $\\lambda$ 到达，导致系统从 `Idle` 状态转移到 `Processing` 状态。如果系统在 `Processing` 状态时有新任务到达，它将转移到 `Overloaded` 状态。\n- 正在运行的任务以速率 $\\mu$ 完成。这将导致系统从 `Processing` 转移到 `Idle` (如果队列中没有任务) 或从 `Overloaded` 转移到 `Processing` (因为排队的任务开始处理)。\n- 节点可能在任何运行状态下发生硬件故障。故障率取决于负载：从 `Idle` 状态的故障率为 $\\delta_1$，从 `Processing` 状态的故障率为 $\\delta_2$，从 `Overloaded` 状态的故障率为 $\\delta_3$。所有故障都会导致系统进入 `Failed` 状态。\n- `Failed` 状态的节点可以被修复，以速率 $\\rho$ 转换回 `Idle` 状态。\n\n为了模拟该系统的一条样本路径，我们使用从 $(0,1)$ 上的均匀分布中抽取的成对随机数 $(u_t, u_s)$。对于一个处于状态 $i$、总离开率为 $q_i$ 的系统，到下一次跳转的时间计算公式为 $\\Delta t = -(1/q_i) \\ln(u_t)$。然后根据 $u_s$ 的值确定下一个状态。\n\n假设系统在时间 $t=0$ 时处于 `Idle` 状态。给定以下速率参数：\n- 任务到达率, $\\lambda = 2.0 \\text{ s}^{-1}$\n- 任务完成率, $\\mu = 3.0 \\text{ s}^{-1}$\n- `Idle` 状态的故障率, $\\delta_1 = 0.1 \\text{ s}^{-1}$\n- `Processing` 状态的故障率, $\\delta_2 = 0.2 \\text{ s}^{-1}$\n- `Overloaded` 状态的故障率, $\\delta_3 = 0.5 \\text{ s}^{-1}$\n- 修复率, $\\rho = 0.4 \\text{ s}^{-1}$\n\n您还获得以下预先排序的均匀分布随机数序列：$(0.35, 0.80, 0.62, 0.25, 0.18, 0.98)$。第一个数用于确定第一次跳转的时间，第二个数用于确定第一次跳转的状态，第三个数用于第二次跳转的时间，第四个数用于第二次跳转的状态，依此类推。\n\n计算第三次跳转发生的时间。答案以秒为单位，保留三位有效数字。", "solution": "我们将该系统建模为具有给定转移率的连续时间马尔可夫链。对于一个总离开率为 $q_{i}$ 的状态，到下一次跳转的时间为 $\\Delta t=-(1/q_{i})\\ln(u_{t})$，并使用 $u_{s}$ 根据与离开率成正比的概率选择下一个状态。\n\n从 `Idle` (状态 1) 出发：以速率 $\\lambda$ 转移到 `Processing` (状态 2)，以速率 $\\delta_{1}$ 转移到 `Failed` (状态 4)。因此\n$$\nq_{1}=\\lambda+\\delta_{1}=2.0+0.1=2.1,\n\\qquad\np_{1\\to 2}=\\frac{\\lambda}{q_{1}}=\\frac{2.0}{2.1}=\\frac{20}{21},\n\\qquad\np_{1\\to 4}=\\frac{\\delta_{1}}{q_{1}}=\\frac{0.1}{2.1}=\\frac{1}{21}.\n$$\n使用 $u_{1}=0.35$ 计算第一次跳转时间：\n$$\n\\Delta t_{1}=-\\frac{1}{q_{1}}\\ln(u_{1})=-\\frac{1}{2.1}\\ln(0.35)\\approx \\frac{1.049822}{2.1}\\approx 0.499915.\n$$\n使用 $u_{2}=0.80$ 进行状态选择，由于 $u_{2} \\le 20/21 \\approx 0.952$，所以下一个状态是 `Processing` (状态 2)。因此第一次跳转发生在 $t_{1}=\\Delta t_{1}\\approx 0.499915$。\n\n从 `Processing` (状态 2) 出发：以速率 $\\mu$ 转移到 `Idle` (状态 1)，以速率 $\\lambda$ 转移到 `Overloaded` (状态 3)，以速率 $\\delta_{2}$ 转移到 `Failed` (状态 4)。因此\n$$\nq_{2}=\\mu+\\lambda+\\delta_{2}=3.0+2.0+0.2=5.2,\n$$\n$$\np_{2\\to 1}=\\frac{\\mu}{q_{2}}=\\frac{3.0}{5.2}=\\frac{15}{26},\\quad\np_{2\\to 3}=\\frac{\\lambda}{q_{2}}=\\frac{2.0}{5.2}=\\frac{5}{13},\\quad\np_{2\\to 4}=\\frac{\\delta_{2}}{q_{2}}=\\frac{0.2}{5.2}=\\frac{1}{26}.\n$$\n使用 $u_{3}=0.62$ 计算第二次跳转的等待时间：\n$$\n\\Delta t_{2}=-\\frac{1}{q_{2}}\\ln(u_{3})=-\\frac{1}{5.2}\\ln(0.62)\\approx \\frac{0.478036}{5.2}\\approx 0.091930.\n$$\n使用 $u_{4}=0.25$ 进行状态选择，由于 $u_{4} \\le 15/26 \\approx 0.577$，所以下一个状态是 `Idle` (状态 1)。因此第二次跳转发生在 $t_{2}=t_{1}+\\Delta t_{2}\\approx 0.499915+0.091930\\approx 0.591845$。\n\n回到 `Idle` (状态 1)，总离开率再次为 $q_{1}=2.1$。使用 $u_{5}=0.18$ 计算第三次跳转的等待时间为\n$$\n\\Delta t_{3}=-\\frac{1}{q_{1}}\\ln(u_{5})=-\\frac{1}{2.1}\\ln(0.18)\\approx \\frac{1.714798}{2.1}\\approx 0.816571.\n$$\n因此，第三次跳转的时间是\n$$\nt_{3}=t_{2}+\\Delta t_{3}\\approx 0.591845+0.816571\\approx 1.408416.\n$$\n保留三位有效数字，第三次跳转发生在 $1.41$ 秒。", "answer": "$$\\boxed{1.41}$$", "id": "1292573"}]}
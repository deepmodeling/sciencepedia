{"hands_on_practices": [{"introduction": "在赌徒破产问题中，第一个也是最基本的问题是“破产的概率是多少？”。本练习将引导你推导出一个通用公式，用于计算在一场赔率不一定均等的博弈中的破产概率。理解这个推导过程是分析任何情景的关键，无论是简单的抛硬币，还是金融和经济学中更复杂的模型。[@problem_id:7899]", "problem": "考虑一个简化的博弈问题，称为赌徒破产问题。一个赌徒开始时拥有 $i$ 个整数单位的初始财富。赌徒与庄家进行一系列的赌局。在每一局中，赌徒下注一个单位。他们以固定的概率 $p$ 赢得一个单位，以概率 $q=1-p$ 输掉一个单位。\n\n赌徒有一个预定目标：达到总财富 $N$ 个单位，其中 $N  i  0$。如果赌徒的财富达到 $N$（成功）或降至 $0$（破产），则游戏结束。设 $P_i$ 表示赌徒从 $i$ 单位财富开始，最终破产的概率。\n\n假设每局获胜的概率不等于失败的概率（即 $p \\neq q$），推导破产概率 $P_i$ 关于其初始财富 $i$、目标财富 $N$、获胜概率 $p$ 和失败概率 $q$ 的一般表达式。", "solution": "我们用 $P_i$ 表示从财富 $i$ 开始最终破产的概率，其中 $P_0=1$ 且 $P_N=0$。在一步中，赌徒的财富以概率 $p$ 变为 $i+1$，以概率 $q=1-p$ 变为 $i-1$，因此递归关系为\n$$\nP_i \\;=\\; p\\,P_{i+1} \\;+\\; q\\,P_{i-1},\\qquad i=1,2,\\dots,N-1.\n$$\n整理成齐次形式：\n$$\np\\,P_{i+1}-P_i+q\\,P_{i-1}=0.\n$$\n假设解的形式为 $P_i=r^i$。特征方程为\n$$\np\\,r^2 - r + q = 0,\n$$\n其根为 $r=1$ 和 $r=\\frac{q}{p}$。因此通解为\n$$\nP_i \\;=\\; A + B\\Bigl(\\tfrac{q}{p}\\Bigr)^{i}.\n$$\n应用边界条件：\n\n$$\nP_0=A+B=1,\n\\qquad\nP_N=A+B\\Bigl(\\tfrac{q}{p}\\Bigr)^{N}=0.\n$$\n\n两式相减可得\n$$\nB\\Bigl(1-\\bigl(\\tfrac{q}{p}\\bigr)^N\\Bigr)=1\n\\;\\Longrightarrow\\;\nB=\\frac{1}{1-(q/p)^N},\n\\quad\nA=1-B=\\frac{-\\,(q/p)^N}{1-(q/p)^N}.\n$$\n因此\n$$\nP_i\n=\\;A + B\\Bigl(\\tfrac{q}{p}\\Bigr)^i\n=\\frac{(q/p)^i - (q/p)^N}{1 - (q/p)^N}.\n$$", "answer": "$$\\boxed{\\frac{\\bigl(\\tfrac{q}{p}\\bigr)^{i}-\\bigl(\\tfrac{q}{p}\\bigr)^{N}}{1-\\bigl(\\tfrac{q}{p}\\bigr)^{N}}}$$", "id": "7899"}, {"introduction": "除了知道破产的几率，了解博弈预期会持续多久也同样重要。我们将从最简单的情况入手：一场公平的博弈，即每轮赢或输的概率相等。本练习将向你展示如何建立并求解博弈的预期局数，最终得出一个出人意料的优雅且对称的结果。[@problem_id:7857]", "problem": "一个赌徒的初始财富为 $i$ 个整数单位的钱。赌徒进行一系列赌局。目标是达到总财富 $N$ 个单位，其中 $N  i  0$。如果赌徒的财富达到 $N$（获胜）或 $0$（破产），则赌局结束。\n\n在每场赌局中，投掷一枚均匀的硬币。如果硬币正面朝上，赌徒赢得 $1$ 个单位。如果硬币反面朝上，赌徒输掉 $1$ 个单位。设 $p$ 为赢得一局的概率，$q$ 为输掉一局的概率。对于一枚均匀的硬币，$p = q = \\frac{1}{2}$。\n\n设 $E_i$ 表示在初始财富为 $i$ 的情况下，直到赌局结束（无论是破产还是达到目标财富 $N$）所进行的赌局的期望次数。\n\n对于 $0  i  N$ 的情况，可以通过考虑下一局的结果，将期望赌局次数 $E_i$ 与相邻状态的期望赌局次数联系起来。经过一局后（总局数增加 $1$），赌徒的财富以概率 $p$ 变为 $i+1$，或以概率 $q$ 变为 $i-1$。因此，从这个新状态开始，期望的*额外*赌局次数分别为 $E_{i+1}$ 或 $E_{i-1}$。这导出了以下递推关系：\n$$E_i = 1 + p E_{i+1} + q E_{i-1}$$\n如果赌徒的财富为 $0$ 或 $N$，赌局已经结束，所以不会再进行更多的赌局。因此，边界条件为 $E_0 = 0$ 和 $E_N = 0$。\n\n推导在均匀硬币的情况下，$E_i$ 关于初始财富 $i$ 和目标财富 $N$ 的表达式。", "solution": "对于一个公平博弈（$p=q=1/2$），递推关系为 $E_i = 1 + \\frac{1}{2} E_{i+1} + \\frac{1}{2} E_{i-1}$。整理后得到 $E_{i+1} - 2E_i + E_{i-1} = -2$。这是一个二阶线性非齐次差分方程。其齐次解为 $E_i^{(h)} = A + Bi$。我们猜测一个特解形式为 $E_i^{(p)} = Ci^2$。代入方程得 $C(i+1)^2 - 2Ci^2 + C(i-1)^2 = -2$，化简得 $2C = -2$，因此 $C=-1$。通解为 $E_i = A + Bi - i^2$。应用边界条件 $E_0 = 0$ 和 $E_N = 0$：从 $E_0=0$ 可得 $A=0$。从 $E_N=0$ 可得 $BN - N^2 = 0$，即 $B=N$。因此，最终解为 $E_i = Ni - i^2 = i(N-i)$。", "answer": "$$\\boxed{i(N - i)}$$", "id": "7857"}, {"introduction": "现在，让我们将对博弈持续时间的理解推广到更常见的“不公平”或有偏见的情景中。这个问题建立在之前练习的基础上，处理了在一场获胜概率不为 $1/2$ 的博弈中预期的交易次数。其推导过程更为复杂，但它将为你提供一套完整的工具，用以分析任何有限的赌徒破产过程的预期持续时间。[@problem_id:1398216]", "problem": "一个高频交易算法性能的简化模型如下。该算法以 $i$ 个单位的初始资本开始一个交易时段，其中 $i$ 是一个整数且 $0  i  N$。其目标是达到 $N$ 个单位的总资本。该算法被编程为在其资本达到目标 $N$ 或降至 0（破产状态）时停止交易。\n\n在每个离散时间步中，该算法执行单次交易。每次交易以恒定概率 $p$ 获得 1 个单位的资本，或以概率 $q = 1-p$ 损失 1 个单位的资本。每次交易的结果都与其他交易相互独立。我们已知该交易策略是“不公平的”，即 $p \\neq 1/2$。\n\n推导该算法在停止前将执行的期望交易次数 $E_i$ 的表达式，已知其初始资本为 $i$ 个单位。用 $i$、$N$、$p$ 和 $q$ 表示你的答案。", "solution": "令 $E_{i}$ 表示从资本 $i$ 开始，在 0 和 $N$ 处有吸收状态时，直到停止的期望交易次数。对于 $1 \\leq i \\leq N-1$，通过第一步分析，我们有\n$$\nE_{i} = 1 + p E_{i+1} + q E_{i-1},\n$$\n边界条件为 $E_{0}=0$ 和 $E_{N}=0$。整理后得到线性非齐次递推关系\n$$\np E_{i+1} - E_{i} + q E_{i-1} = -1.\n$$\n通过尝试 $E_{i}^{(h)} = r^{i}$ 来求解相关的齐次方程 $p E_{i+1}^{(h)} - E_{i}^{(h)} + q E_{i-1}^{(h)} = 0$，得到特征方程\n$$\np r^{2} - r + q = 0.\n$$\n由于 $p+q=1$，根为 $r=1$ 和 $r=q/p$。因此\n$$\nE_{i}^{(h)} = A + B \\left(\\frac{q}{p}\\right)^{i}.\n$$\n对于一个特解，尝试 $E_{i}^{(p)} = C i$。代入得\n$$\np C (i+1) - C i + q C (i-1) = -1 \\quad \\Longrightarrow \\quad C(p-q) = -1,\n$$\n所以\n$$\nC = \\frac{1}{q - p}, \\qquad E_{i}^{(p)} = \\frac{i}{q - p}.\n$$\n因此，通解为\n$$\nE_{i} = A + B \\left(\\frac{q}{p}\\right)^{i} + \\frac{i}{q - p}.\n$$\n应用 $E_{0}=0$ 得到 $A + B = 0$，因此 $A=-B$。应用 $E_{N}=0$ 得到\n$$\n0 = -B + B \\left(\\frac{q}{p}\\right)^{N} + \\frac{N}{q - p},\n$$\n这给出\n$$\nB = \\frac{N}{(q - p)\\left[1 - \\left(\\frac{q}{p}\\right)^{N}\\right]}, \\qquad A = -\\frac{N}{(q - p)\\left[1 - \\left(\\frac{q}{p}\\right)^{N}\\right]}.\n$$\n将 $A$ 和 $B$ 代回，得到\n$$\nE_{i} = \\frac{i}{q - p} + \\frac{N}{q - p} \\cdot \\frac{\\left(\\frac{q}{p}\\right)^{i} - 1}{1 - \\left(\\frac{q}{p}\\right)^{N}} = \\frac{i}{q - p} - \\frac{N}{q - p} \\cdot \\frac{1 - \\left(\\frac{q}{p}\\right)^{i}}{1 - \\left(\\frac{q}{p}\\right)^{N}}.\n$$\n此式在 $p \\neq \\frac{1}{2}$（等价于 $p \\neq q$）时成立，正如不公平性假设所要求的那样。", "answer": "$$\\boxed{\\frac{i}{q - p} - \\frac{N}{q - p}\\,\\frac{1 - \\left(\\frac{q}{p}\\right)^{i}}{1 - \\left(\\frac{q}{p}\\right)^{N}}}$$", "id": "1398216"}]}
## 引言
在研究[马尔可夫链的长期行为](@entry_id:272323)时，一个核心问题是：当一个[随机过程](@entry_id:159502)离开某个状态后，它最终会返回吗？这个问题的答案将状态划分为两种[基本类](@entry_id:158335)型：[常返态](@entry_id:276969)和暂态。理解暂态——那些过程一旦离开就可能永远不再返回的状态——对于预测系统的最终命运至关重要。本文旨在系统性地揭开暂态的神秘面纱，解决如何精确识别并分析这些“一次性”或“临时性”状态的难题。

通过本文的学习，您将首先深入第一章**“原理与机制”**，掌握暂态的两种等价数学定义、核心性质以及在有限和无限状态空间（如[随机游走](@entry_id:142620)）中的判定方法。接着，在第二章**“应用与跨学科联系”**中，您将看到暂态概念如何超越纯数学，在工程可靠性、种群遗传学、网络分析和经济模型等多个领域中发挥关键作用。最后，第三章**“动手实践”**将通过一系列精心设计的问题，帮助您将理论知识付诸实践。让我们从暂态最基本的原理开始，踏上探索[随机过程](@entry_id:159502)终极行为的旅程。

## 原理与机制

在对[马尔可夫链](@entry_id:150828)的[状态空间](@entry_id:177074)进行分类时，一个根本性的问题是：当一个过程离开某个状态后，它最终是否会返回？这个问题的答案将状态分为两大类：**[常返态](@entry_id:276969)（recurrent states）**和**暂态（transient states）**。本章将深入探讨暂态的定义、核心性质及其在不同情境下的判定方法。直观地讲，一个状态是暂态，如果过程一旦离开该状态，存在一个非零的可能性永远不再返回。相反，如果从一个状态出发，过程必然会一次又一次地返回，那么该状态就是常返的。

### 暂态的形式化定义

为了严谨地分析状态的特性，我们需要两个等价的数学定义。这两个定义分别从“返回的概率”和“访问的期望次数”两个角度刻画了暂态的本质。

#### 基于[首次返回概率](@entry_id:275671)的定义

我们可以考虑从状态 $i$ 出发，过程在未来的某个时刻首次返回状态 $i$ 的概率。我们将这个概率记为 $f_{ii}$。

**定义**：一个状态 $i$ 被称为 **暂态**，当且仅当从状态 $i$ 出发，过程在未来有限时间内返回状态 $i$ 的概率严格小于 1。即：
$$
f_{ii} = \mathbb{P}(\text{在 } n \ge 1 \text{ 时刻返回 } i | X_0 = i)  1
$$
如果 $f_{ii} = 1$，则状态 $i$ 是[常返态](@entry_id:276969)。

这个定义的直接推论是，如果一个状态是暂态，那么过程不仅有概率永远不返回，而且每次离开后，都有相同的概率 $1-f_{ii} > 0$ 永远“逃离”。

我们可以通过一个简单的例子来理解这个定义。考虑一个具有状态空间 $S = \{1, 2, 3\}$ 的[马尔可夫链](@entry_id:150828)。从状态 1 出发，系统有 $\frac{1}{4}$ 的概率停留在状态 1，有 $\frac{1}{4}$ 的概率转移到状态 2，有 $\frac{1}{2}$ 的概率转移到状态 3。从状态 2 出发，系统总是转移回状态 1。而状态 3 是一个 **[吸收态](@entry_id:161036)**，一旦进入就永远不会离开。要判断状态 1 是否为暂态，我们需要计算[首次返回概率](@entry_id:275671) $f_{11}$ [@problem_id:1347242]。

利用 **一步分析法**（first-step analysis），我们可以将 $f_{11}$ 的计算分解为基于第一步转移的各种情况：
1.  过程从 1 转移到 1（概率为 $\frac{1}{4}$）。这是一个即时返回，所以从状态 1 出发最终返回 1 的概率贡献是 1。
2.  过程从 1 转移到 2（概率为 $\frac{1}{4}$）。从状态 2 出发，下一步必然返回状态 1，所以从状态 2 出发最终返回 1 的概率是 1。
3.  过程从 1 转移到 3（概率为 $\frac{1}{2}$）。由于状态 3 是[吸收态](@entry_id:161036)，一旦进入，过程将永远无法返回状态 1。因此，从状态 3 出发最终返回 1 的概率是 0。

综合以上情况，[首次返回概率](@entry_id:275671) $f_{11}$ 为：
$$
f_{11} = \frac{1}{4} \cdot 1 + \frac{1}{4} \cdot 1 + \frac{1}{2} \cdot 0 = \frac{1}{2}
$$
因为 $f_{11} = \frac{1}{2}  1$，根据定义，状态 1 是一个暂态。这个例子清晰地表明，存在一条通往“不归路”（即吸收态 3）的“逃逸路径”是导致状态 1 成为暂态的根本原因。

这个思想可以被推广：如果从状态 $i$ 出发，存在一条概率非零的路径可以到达一个状态（或一组状态）$j$，而从 $j$ 不可能再返回 $i$，那么状态 $i$ 必然是暂态 [@problem_id:1288860]。这是因为过程有机会沿着这条“单行道”离开，从而永远不再返回。例如，在一个计算机程序的执行流模型中，如果[状态空间](@entry_id:177074)可以被划分为两个集合 $A$ 和 $B$，其[中程序](@entry_id:751829)可以从 $A$ 中的状态转移到 $B$ 中的状态，但绝不能从 $B$ 返回到 $A$，那么集合 $A$ 中的所有状态都必定是暂态 [@problem_id:1347281]。

#### 基于访问期望次数的定义

另一个判定暂态的强大工具是计算过程访问一个状态的总次数的[期望值](@entry_id:153208)。令 $N_i = \sum_{n=0}^{\infty} \mathbf{1}_{\{X_n=i\}}$ 为过程在无限时间范围内访问状态 $i$ 的总次数（其中 $\mathbf{1}$ 是[指示函数](@entry_id:186820)）。

**定义**：一个状态 $i$ 被称为 **暂态**，当且仅当从状态 $i$ 出发，访问状态 $i$ 的期望总次数是一个有限值。即：
$$
M_i = \mathbb{E}[N_i | X_0 = i] = \sum_{n=0}^{\infty} p_{ii}^{(n)}  \infty
$$
其中 $p_{ii}^{(n)} = \mathbb{P}(X_n = i | X_0 = i)$ 是从 $i$ 出发经过 $n$ 步后回到 $i$ 的概率。如果这个和发散到无穷大，即 $M_i = \infty$，则状态 $i$ 是[常返态](@entry_id:276969)。

这两个定义是等价的。对于一个暂态 $i$，过程每次返回的概率为 $f_{ii}  1$，因此总的返回次数服从一个[几何分布](@entry_id:154371)，其期望是有限的。具体来说，期望访问次数 $M_i$ 和[首次返回概率](@entry_id:275671) $f_{ii}$ 之间存在关系 $M_i = \frac{1}{1 - f_{ii}}$。

这个定义在分析上特别有用。例如，假设一个计算机[文件系统](@entry_id:749324)的状态 `C`，其 $n$ 步返回概率由公式 $p_{C,C}^{(n)} = \frac{6}{(n+1)(n+2)(n+3)}$ 给出。要判断状态 `C` 的性质，我们只需检验级数 $\sum_{n=1}^{\infty} p_{C,C}^{(n)}$ 是否收敛 [@problem_id:1347299]。通过[部分分式分解](@entry_id:159208)和裂项相消法，可以证明该[级数收敛](@entry_id:142638)于 $\frac{1}{2}$。因此，总的期望访问次数为 $M_C = p_{C,C}^{(0)} + \sum_{n=1}^{\infty} p_{C,C}^{(n)} = 1 + \frac{1}{2} = \frac{3}{2}$。由于该值是有限的，状态 `C` 是暂态。这表明，如果返回状态的概率 $p_{ii}^{(n)}$ 随 $n$ 衰减得足够快，那么该状态就是暂态。

### 暂态的核心性质

暂态具有一些非常重要的结构性性质，这些性质极大地简化了在复杂系统中对它们的分辨。

#### 暂态性是一种类性质

在马尔可夫链中，如果状态 $i$ 可以到达状态 $j$（记作 $i \to j$），并且状态 $j$ 也可以到达状态 $i$（记作 $j \to i$），我们就称状态 $i$ 和 $j$ **互通**（communicate），记作 $i \leftrightarrow j$。互通关系是一种等价关系，它将状态空间划分为若干个 **[互通类](@entry_id:267280)**（communicating classes）。

一个关键的定理是：**暂态性（和常返性）是类性质**。也就是说，如果一个[互通类](@entry_id:267280)中的任何一个状态是暂态，那么该类中的所有状态都必须是暂态。

这个性质的直观解释是，如果状态 $i$ 和 $j$ 互通，那么它们就像是同一个“社区”的成员。如果从 $j$ 出发有永远逃离的风险（即 $j$ 是暂态），那么从 $i$ 出发，过程总是有机会访问 $j$，从而也继承了这种永远逃离的风险，因此 $i$ 也必须是暂态。这个结论在分析中非常有用。例如，如果我们通过分析确定某个“错误”状态 $j$ 是暂态的（因为访问它的期望次数是有限的），并且我们知道它与一个“警告”状态 $k$ 互通，那么我们可以立即断定状态 $k$ 也必定是暂态 [@problem_id:1347285]。

#### 有限链中的暂态

对于状态数目有限的[马尔可夫链](@entry_id:150828)，状态的分类变得更加直观。在一个有限的空间里，过程不可能永远“漂泊”在从未访问过的新状态。因此，任何一个状态最终的命运要么是落入一个[常返类](@entry_id:273689)并永远留在那里，要么它本身就是一个暂态，只能被访问有限次。

一个[互通类](@entry_id:267280)如果它是 **[闭集](@entry_id:136446)**（closed set），即一旦进入就无法离开，那么这个类中的所有状态都是常返的。在有限链中，所有[常返态](@entry_id:276969)都必须属于某个闭的[互通类](@entry_id:267280)。反之，任何不属于[闭集](@entry_id:136446)的[互通类](@entry_id:267280)的状态都必然是暂态。

这为我们提供了一个清晰的分类流程：
1.  找到状态空间中所有的[互通类](@entry_id:267280)。
2.  识别哪些[互通类](@entry_id:267280)是[闭集](@entry_id:136446)。这些就是 **[常返类](@entry_id:273689)**。
3.  所有不属于任何[常返类](@entry_id:273689)的状态都构成 **暂态**。

例如，在一个具有状态 $\{1, 2, 3, 4, 5, 6\}$ 的软件执行流模型中，我们可以通过分析转移矩阵来识别类的性质 [@problem_id:1347280]。如果发现 $\{5, 6\}$ 形成一个闭的[互通类](@entry_id:267280)（例如，它们之间可以相互转移，但不能转移到任何其他状态），那么状态 5 和 6 就是[常返态](@entry_id:276969)。如果状态 $\{1, 2\}$ 可以转移到 $\{3, 4\}$，而 $\{3, 4\}$ 又可以转移到 $\{5, 6\}$，那么状态 $\{1, 2, 3, 4\}$ 都是暂态，因为它们最终都有可能进入[常返类](@entry_id:273689) $\{5, 6\}$ 并被“吸收”。

这种结构在包含吸收态的模型中尤为常见。任何可以到达[吸收态](@entry_id:161036)但本身非吸收的状态都必然是暂态。例如，在一个模拟数据包在网络中路由的模型里，如果节点 5 是最终目的地（[吸收态](@entry_id:161036)），那么任何其他可以最终将数据包路由到节点 5 的节点（如节点 1, 2, 3, 4）都必须是暂态 [@problem_id:1347260]。我们可以通过求解一个[线性方程组](@entry_id:148943)来计算从某个暂态出发，最终到达[吸收态](@entry_id:161036)之前，访问另一个暂态的期望次数，这个[期望值](@entry_id:153208)必然是有限的。

同样，在模拟不可逆过程的模型中，例如一个初创公司的发展阶段（从种子期到商业化，最终到项目终结），由于过程总是向[前推](@entry_id:158718)进，不会回到早期阶段，其[状态转移图](@entry_id:175938)构成一个有向无环图（DAG）。在这种结构中，除了最终的吸收态（项目终结），所有中间状态都必然是暂态 [@problem_id:1347249]。

### 无限链中的暂态：[随机游走](@entry_id:142620)

在无限[状态空间](@entry_id:177074)的马尔可夫链中，暂态的出现可能不是因为过程被某个[常返类](@entry_id:273689)“捕获”，而是因为过程“漂移”到无穷远，导致返回起点的概率降低。[随机游走](@entry_id:142620)（random walk）是阐释这一现象的经典模型。

#### 一维[随机游走](@entry_id:142620)

考虑一个粒子在整数格点 $\mathbb{Z}$ 上进行的一维[随机游走](@entry_id:142620)。在每一步，它以概率 $p$向右移动一个单位，以概率 $q=1-p$ 向左移动一个单位。

一个著名的结论是，只有在完全对称的情况下（$p = q = \frac{1}{2}$），这个[随机游走](@entry_id:142620)才是常返的。只要存在任何偏向（$p \neq \frac{1}{2}$），例如在一个受[电场](@entry_id:194326)影响的[半导体](@entry_id:141536)中，[电荷](@entry_id:275494)载流子向一个方向漂移的概率更大（$p > \frac{1}{2}$），那么粒子上的每一个状态都是暂态 [@problem_id:1347269]。

我们可以通过计算返回原点的概率 $f_{00}$ 来证明这一点。利用期望访问次数 $M_0 = \sum_{n=0}^{\infty} p_{00}^{(n)}$ 和关系式 $f_{00} = 1 - 1/M_0$。返回原点需要偶数步，假设为 $2k$ 步，其中必须包含 $k$ 次向右和 $k$ 次向左。因此，$p_{00}^{(2k)} = \binom{2k}{k} (pq)^k$。对该级数求和，可得：
$$
M_0 = \sum_{k=0}^{\infty} \binom{2k}{k} (pq)^k = \frac{1}{\sqrt{1 - 4pq}}
$$
代入 $q=1-p$，我们得到 $1 - 4p(1-p) = (2p-1)^2$。因此，$M_0 = \frac{1}{|2p-1|}$。当 $p \neq \frac{1}{2}$ 时，$M_0$ 是一个有限值，这证明了原点是暂态。[首次返回概率](@entry_id:275671)为：
$$
f_{00} = 1 - \frac{1}{M_0} = 1 - |2p-1|
$$
例如，如果 $p > \frac{1}{2}$，$f_{00} = 1 - (2p-1) = 2(1-p)  1$。这清晰地量化了由于漂移的存在，粒子“迷失”在无穷远处而永不返回的概率。

#### 高维空间中的[随机游走](@entry_id:142620)：Pólya 定理

那么，在没有漂移的[对称随机游走](@entry_id:273558)中，情况又如何呢？令人惊讶的是，维度起到了决定性作用。这就是著名的 **Pólya 定理**：

 在 $d$ 维整数格点 $\mathbb{Z}^d$ 上的简单[对称随机游走](@entry_id:273558)，对于维度 $d=1$ 和 $d=2$ 是常返的，而对于维度 $d \ge 3$ 是暂态的。

这个深刻的结果常被通俗地解释为“醉汉回家”问题：一个在城市街道（二维）上蹒跚的醉汉最终总能找到回家的路，但一个在太空中（三维）漂浮的宇航员却很可能永远迷失。

要理解其数学本质，我们无需复杂的证明，只需考察 $n$ 步后返回原点的概率 $p_{2n}$ 的渐进行为 [@problem_id:1347253]。对于大的 $n$，这个概率近似于：
$$
p_{2n} \approx \left(\frac{d}{\pi n}\right)^{d/2}
$$
一个状态是否暂态，取决于级数 $\sum_{n=1}^{\infty} p_{2n}$ 是否收敛。这个级数的行为与 [p-积分](@entry_id:136518) $\int_{1}^{\infty} x^{-d/2} dx$ 类似。根据[积分判别法](@entry_id:141539)，这个[积分收敛](@entry_id:139742)当且仅当指数 $-d/2  -1$，即 $d/2 > 1$，或 $d > 2$。

因此，当维度 $d=1$ 或 $d=2$ 时，级数 $\sum p_{2n}$ 发散，期望访问次数为无穷大，状态是常返的。而当维度 $d \ge 3$ 时，级数收敛，期望访问次数是有限的，状态是暂态的。这说明在高维空间中，可供粒子“逃逸”的方向实在太多，以至于即使没有外部漂移，它也很难再偶然地回到起点。

综上所述，暂态是马尔可夫链理论中的一个基础概念。无论是通过有限链中的“逃逸路径”进入[常返类](@entry_id:273689)，还是通过无限链中的“向无穷漂移”，暂态都描述了系统中那些最终会被“抛弃”或“遗忘”的状态。理解暂态的原理和判别机制，是分析[随机过程](@entry_id:159502)长期行为的关键一步。
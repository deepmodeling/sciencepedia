{"hands_on_practices": [{"introduction": "许多现实世界的系统都表现出周期性行为，从交通信号灯到生物节律。这个练习 [@problem_id:1367478] 使用一个我们都熟悉的交通灯例子来演示如何将此类系统建模为更新过程。通过确定一个完整周期的持续时间，我们可以运用初等更新定理来计算事件（例如绿灯亮起）的长期发生频率。", "problem": "考虑一个控制单交叉口的先进交通信号灯系统。信号灯以绿、黄、红三个相位循环。绿灯相位的持续时间是一个固定常数 $t_g$，黄灯相位的持续时间是一个固定常数 $t_y$。\n\n为了改善交通流量，红灯相位的持续时间是自适应的。黄灯结束后，系统会等待横向交通出现合适的间隙，然后切换到绿灯。这个等待时间构成了红灯相位的持续时间，它是一个随机变量。我们将连续红灯相位的持续时间（记为 $X_k$，其中 $k=1, 2, 3, \\ldots$）建模为独立同分布的随机变量。每个 $X_k$ 服从平均持续时间为 $\\tau_r$ 的指数分布。\n\n设过程在时间 $t=0$ 时随着第一个绿灯的开始而启动。之后绿灯相继亮起的时刻序列构成了一个更新过程。更新函数 $m(t)$ 给出了在时间间隔 $(0, t]$ 内发生的更新（即绿灯启动）的期望次数。\n\n确定绿灯启动的长期平均速率。换句话说，求极限 $\\lim_{t\\to\\infty} \\frac{m(t)}{t}$。用 $t_g$, $t_y$ 和 $\\tau_r$ 的符号表达式表示你的答案。", "solution": "将更新时刻序列定义为连续绿灯相位的开始时间。设 $Y_{k}$ 表示第 $k$ 次和第 $(k+1)$ 次绿灯启动之间的更新间隔时间。根据问题描述，每个周期包括一个固定的绿灯持续时间 $t_{g}$，一个固定的黄灯持续时间 $t_{y}$，以及一个随机的红灯持续时间 $X_{k}$，其中 $\\{X_{k}\\}_{k\\geq 1}$ 是独立同分布的，服从均值为 $\\tau_{r}$ 的指数分布。因此，\n$$\nY_{k}=t_{g}+t_{y}+X_{k}.\n$$\n因为 $X_{k}$ 是独立同分布的，而 $t_{g},t_{y}$ 是常数，所以 $Y_{k}$ 也是独立同分布的。平均更新间隔时间为\n$$\n\\mu=\\mathbb{E}[Y_{k}]=\\mathbb{E}[t_{g}+t_{y}+X_{k}]=t_{g}+t_{y}+\\mathbb{E}[X_{k}]=t_{g}+t_{y}+\\tau_{r}.\n$$\n设 $m(t)$ 为更新函数，即在 $(0,t]$ 内更新（绿灯启动）的期望次数。根据初等更新定理，对于一个具有独立同分布且均值为 $\\mu$ 的有限更新间隔时间的更新过程，其长期更新率存在且由下式给出\n$$\n\\lim_{t\\to\\infty}\\frac{m(t)}{t}=\\frac{1}{\\mu}.\n$$\n代入 $\\mu=t_{g}+t_{y}+\\tau_{r}$ 可得\n$$\n\\lim_{t\\to\\infty}\\frac{m(t)}{t}=\\frac{1}{t_{g}+t_{y}+\\tau_{r}}.\n$$", "answer": "$$\\boxed{\\frac{1}{t_{g}+t_{y}+\\tau_{r}}}$$", "id": "1367478"}, {"introduction": "更新理论不仅能用于计数事件，还为经济分析提供了强大工具。这个问题 [@problem_id:1310784] 将该框架应用于一个服务器维护的场景，其中每个运行周期都会产生特定成本。你将练习使用更新回报定理来计算长期平均成本，这是在可靠性工程和运营管理中进行决策的一项关键技能。", "problem": "一台专用服务器管理着一个大规模分布式数据库。该服务器的主处理单元容易发生瞬时故障。故障发生后，系统会自动启动一个重启序列以恢复正常运行。\n\n从一次重启完成到下一次瞬时故障发生之间的时间 $T$ 是一个随机变量。这些时间间隔是独立同分布的，服从区间 $[T_{min}, T_{max}]$ 上的连续均匀分布。\n\n每个重启序列需要一段固定的时间 $\\tau_{reboot}$，在此期间服务器处于离线且不工作的状态。每次启动重启会产生固定的计算和能源成本 $C_{reboot}$。此外，在重启期间服务器离线时，会产生相关的停机成本，该成本以每单位时间 $C_{down}$ 的恒定速率累积。\n\n假设系统运行很长一段时间，请确定每单位时间的长期平均成本。您的答案应为一个用参数 $T_{min}, T_{max}, \\tau_{reboot}, C_{reboot}$ 和 $C_{down}$ 表示的闭式解析表达式。", "solution": "将每个运行-重启周期建模如下。设 $T$ 表示一次重启完成到下一次故障发生之间的正常运行时间。已知 $T \\sim \\text{Uniform}[T_{min}, T_{max}]$ 且重启持续时间为常量 $\\tau_{reboot}$，则一个周期的长度为 $L = T + \\tau_{reboot}$。\n\n每个周期产生的成本包括：\n- 固定的重启启动成本 $C_{reboot}$；\n- 重启期间累积的停机成本，其值为在 $\\tau_{reboot}$ 时间内以每单位时间 $C_{down}$ 的速率产生的成本，即 $C_{down}\\,\\tau_{reboot}$。\n\n因此，每个周期的成本为 $C_{reboot} + C_{down}\\,\\tau_{reboot}$。\n\n根据更新回报定理，每单位时间的长期平均成本等于每个周期的期望成本除以期望周期长度：\n$$\n\\text{Average cost rate} \\;=\\; \\frac{\\mathbb{E}[\\text{cost per cycle}]}{\\mathbb{E}[\\text{cycle length}]} \\;=\\; \\frac{C_{reboot} + C_{down}\\,\\tau_{reboot}}{\\mathbb{E}[T] + \\tau_{reboot}}.\n$$\n\n由于 $T \\sim \\text{Uniform}[T_{min}, T_{max}]$，其概率密度函数为\n$$\nf_{T}(t) \\;=\\; \\frac{1}{T_{max} - T_{min}} \\quad \\text{for } t \\in [T_{min}, T_{max}],\n$$\n在其他情况下 $f_{T}(t) = 0$。因此\n$$\n\\mathbb{E}[T] \\;=\\; \\int_{T_{min}}^{T_{max}} t \\, f_{T}(t) \\, dt \\;=\\; \\int_{T_{min}}^{T_{max}} t \\, \\frac{1}{T_{max} - T_{min}} \\, dt \\;=\\; \\frac{1}{T_{max} - T_{min}} \\cdot \\frac{T_{max}^{2} - T_{min}^{2}}{2} \\;=\\; \\frac{T_{min} + T_{max}}{2}.\n$$\n\n将此结果代入平均成本率的公式，得到\n$$\n\\text{Average cost rate} \\;=\\; \\frac{C_{reboot} + C_{down}\\,\\tau_{reboot}}{\\tau_{reboot} + \\frac{T_{min} + T_{max}}{2}}.\n$$\n这就是所求的每单位时间的长期平均成本的闭式表达式。", "answer": "$$\\boxed{\\frac{C_{reboot} + C_{down}\\,\\tau_{reboot}}{\\tau_{reboot} + \\frac{T_{min} + T_{max}}{2}}}$$", "id": "1310784"}, {"introduction": "虽然长期平均值很有用，但有时我们需要知道截至某个特定有限时间内的预期事件数。这个练习 [@problem_id:1367484] 探究了一个离散时间的更新过程，模拟了社交媒体的发帖行为，并要求你推导出精确的更新函数 $m(n)$。其解法揭示了一个惊人地简洁的结果，这源于几何分布独特的无记忆性。", "problem": "考虑一个用户在社交媒体平台上活动的简化模型。时间以离散的天为单位进行度量，索引为 $t=1, 2, 3, \\ldots$。在此模型中，一个“更新事件”对应于用户发布一个新帖子。\n\n连续两次发帖之间的时间间隔，用随机变量 $X_1, X_2, X_3, \\ldots$ 表示，被假定为独立同分布的。每个发帖间隔时间 $X_i$ 服从几何分布，其概率质量函数为：\n$$P(X=k) = p(1-p)^{k-1} \\quad \\text{for } k=1, 2, 3, \\ldots$$\n这里，$p$ 是一个常数，表示自上一次发帖以来，在某一天发新帖的每日概率。$p$ 的取值范围是 $0  p \\le 1$。\n\n第一次发帖的时间是 $S_1 = X_1$，第二次发帖的时间是 $S_2 = X_1 + X_2$，一般地，第 $j$ 次发帖的时间是 $S_j = \\sum_{i=1}^{j} X_i$。\n\n设 $N(n)$ 是从第1天到第 $n$ 天（含）的时间区间内发帖的总数。更新函数 $m(n)$ 定义为到第 $n$ 天为止的期望发帖数，即 $m(n) = E[N(n)]$。\n\n请确定更新函数 $m(n)$ 关于整数 $n$ 和概率 $p$ 的一个简单的闭式表达式。", "solution": "问题要求解更新函数 $m(n) = E[N(n)]$，其中 $N(n)$ 是到时间 $n$ 为止的发帖总数（更新总数）。\n\n我们可以将更新总数 $N(n)$ 表示为指示变量的和。设 $I_k$ 是一个指示变量，如果时间 $k$ 发生了一次更新，则 $I_k=1$，否则 $I_k=0$。那么，到时间 $n$ 为止的更新总数为：\n$$N(n) = \\sum_{k=1}^{n} I_k$$\n根据期望的线性性质，更新函数 $m(n)$可以写成：\n$$m(n) = E[N(n)] = E\\left[\\sum_{k=1}^{n} I_k\\right] = \\sum_{k=1}^{n} E[I_k]$$\n指示变量的期望是它所指示事件的概率。设 $u_k = E[I_k] = P(\\text{在时间 } k \\text{ 发生一次更新})$。那么更新函数就是这些更新概率的和：\n$$m(n) = \\sum_{k=1}^{n} u_k$$\n为了求出 $m(n)$，我们首先需要确定在任意时间 $k \\ge 1$ 的更新概率 $u_k$。\n\n在时间 $k$ 发生更新，意味着要么第一次更新发生在时间 $k$，要么在某个更早的时间 $j  k$ 发生了一次更新，并且下一次更新间隔恰好是 $k-j$。这个关系可以用关于概率 $u_k$ 的离散更新方程来表示。设 $f_k = P(X=k)$ 是更新间隔时间的概率质量函数。该方程为：\n$$u_k = f_k + \\sum_{j=1}^{k-1} u_j f_{k-j}$$\n在我们的情况下，更新间隔时间服从几何分布，其中对于 $k \\ge 1$，$f_k = p(1-p)^{k-1}$。我们可以计算 $u_k$ 的前几个值来寻找规律。\n\n对于 $k=1$：\n$$u_1 = f_1 = p(1-p)^{1-1} = p$$\n对于 $k=2$：\n$$u_2 = f_2 + u_1 f_1 = p(1-p) + (p)(p) = p - p^2 + p^2 = p$$\n对于 $k=3$：\n$$u_3 = f_3 + u_1 f_2 + u_2 f_1 = p(1-p)^2 + (p)(p(1-p)) + (p)(p) = p(1-2p+p^2) + p^2 - p^3 + p^2 = p - 2p^2 + p^3 + 2p^2 - p^3 = p$$\n这个规律表明对于所有 $k \\ge 1$，$u_k=p$。我们可以通过将 $u_j = p$ 代入更新方程的右侧，并证明其结果等于 $p$，来证明这是正确的解。\n\n假设对于所有 $j  k$，$u_j = p$。更新方程中关于 $u_k$ 的右侧变为：\n$$f_k + \\sum_{j=1}^{k-1} p \\cdot f_{k-j} = p(1-p)^{k-1} + p \\sum_{j=1}^{k-1} p(1-p)^{k-j-1}$$\n我们来分析求和项。令求和索引为 $i = k-j$。当 $j$ 从 $1$ 变化到 $k-1$ 时，$i$ 从 $k-1$ 递减到 $1$。\n$$\\sum_{j=1}^{k-1} p(1-p)^{k-j-1} = \\sum_{i=1}^{k-1} p(1-p)^{i-1} = p \\sum_{i=0}^{k-2} (1-p)^{i}$$\n这个和是一个有限几何级数，首项 $a=1$，公比 $r=1-p$，共有 $k-1$ 项。其和为 $\\frac{a(1-r^{k-1})}{1-r}$。\n$$p \\sum_{i=0}^{k-2} (1-p)^{i} = p \\cdot \\frac{1 - (1-p)^{k-1}}{1 - (1-p)} = p \\cdot \\frac{1 - (1-p)^{k-1}}{p} = 1 - (1-p)^{k-1}$$\n将此结果代回 $u_k$ 的表达式中：\n$$u_k = p(1-p)^{k-1} + p \\left( 1 - (1-p)^{k-1} \\right)$$\n$$u_k = p(1-p)^{k-1} + p - p(1-p)^{k-1}$$\n$$u_k = p$$\n因此，我们证明了对于所有 $k \\ge 1$，更新概率 $u_k$ 是一个常数，等于 $p$。这个显著的结果是几何分布无记忆性的一个推论。在任何时间点，发生更新的概率与自上次更新以来经过的时间无关，就是简单的 $p$。\n\n现在我们可以计算更新函数 $m(n)$：\n$$m(n) = \\sum_{k=1}^{n} u_k = \\sum_{k=1}^{n} p$$\n由于 $p$ 是一个常数，这个求和很简单：\n$$m(n) = np$$\n所以，到第 $n$ 天为止的期望发帖数就是 $n$ 与每日发帖概率 $p$ 的乘积。", "answer": "$$\\boxed{np}$$", "id": "1367484"}]}
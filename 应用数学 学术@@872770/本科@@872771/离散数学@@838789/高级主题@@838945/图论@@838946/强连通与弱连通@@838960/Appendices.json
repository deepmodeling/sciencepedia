{"hands_on_practices": [{"introduction": "要掌握强连通性和弱连通性的概念，第一步是能够清晰地辨别它们。这个练习提供了一个极其简单的有向图模型，旨在帮助你巩固这两个基本定义。通过分析这个仅包含三个节点和两条边的网络 [@problem_id:1402294]，你将学会区分“底层无向图是连通的”（弱连通）与“每对顶点之间都存在有向路径”（强连通）这两个核心概念。", "problem": "一个专业化的小型通信网络由三个服务器节点组成：Alpha、Beta 和 Gamma。出于安全原因，该网络中的所有数据链路都是严格单向的。网络拓扑由以下两个连接定义：存在一个从服务器 Gamma 到服务器 Beta 的有向链接，以及另一个从服务器 Beta 到服务器 Alpha 的有向链接。不存在其他数据链路。\n\n为分析此类网络，定义了两种连通性级别：\n- 如果将一个有向网络的所有单向链接都视为双向链接后，任意两个服务器之间都存在连接路径，则该网络被认为是**弱连通**的。\n- 如果从每个服务器到其他每个服务器都存在一条由单向链接构成的有向路径，则该有向网络被认为是**强连通**的。\n\n根据该网络的配置，以下哪个陈述是正确的？\n\nA. 该网络是强连通的。\n\nB. 该网络不是弱连通的。\n\nC. 数据包可以从 Alpha 发送到 Gamma。\n\nD. 数据包有可能从 Gamma 传输到 Alpha。\n\nE. 每个服务器都可以向至少一个其他服务器发送数据包。", "solution": "设该有向网络表示为一个有向图 $G=(V,E)$，其中 $V=\\{\\mathrm{Alpha},\\mathrm{Beta},\\mathrm{Gamma}\\}$ 且 $E=\\{(\\mathrm{Gamma},\\mathrm{Beta}),(\\mathrm{Beta},\\mathrm{Alpha})\\}$。这构成了一个有向路径 $\\mathrm{Gamma}\\to\\mathrm{Beta}\\to\\mathrm{Alpha}$。\n\n为检验弱连通性，将每条有向边替换为无向边。得到的无向边为 $\\{\\mathrm{Gamma},\\mathrm{Beta}\\}$ 和 $\\{\\mathrm{Beta},\\mathrm{Alpha}\\}$，它们将所有三个顶点连接成一条链。因此，其底层的无向图是连通的，所以该有向图是弱连通的。因此，“不是弱连通的”这一陈述是错误的。\n\n为检验强连通性，我们需要对于所有有序对 $(u,v)\\in V\\times V$，都存在一条从 $u$到 $v$ 的有向路径。顶点 $\\mathrm{Alpha}$ 的出度为 $0$，因此不存在从 $\\mathrm{Alpha}$ 到 $\\mathrm{Beta}$ 或 $\\mathrm{Gamma}$ 的有向路径。因此，该图不是强连通的，这使得该陈述是错误的。\n\n对于可达性陈述：不存在从 $\\mathrm{Alpha}$ 到 $\\mathrm{Gamma}$ 的有向路径，所以该陈述是错误的。存在一条从 $\\mathrm{Gamma}$ 到 $\\mathrm{Alpha}$ 的有向路径，由 $(\\mathrm{Gamma},\\mathrm{Beta}),(\\mathrm{Beta},\\mathrm{Alpha})$ 给出，所以该陈述是正确的。最后，并非每个顶点都能向至少一个其他顶点发送数据包，因为 $\\mathrm{Alpha}$ 的出度为 $0$，所以该陈述是错误的。\n\n因此，唯一正确的陈述是数据包可以从 $\\mathrm{Gamma}$ 传输到 $\\mathrm{Alpha}$。", "answer": "$$\\boxed{D}$$", "id": "1402294"}, {"introduction": "在理解了基本定义之后，让我们来探讨如何构建更大的强连通系统。这个问题 [@problem_id:1402298] 模拟了一个常见场景：将两个独立的、本身已是强连通的网络合并成一个统一的强连通网络。通过解决这个问题，你将发现保证整体连通性所需的最小连接数，并理解在组件之间建立双向可达性的重要性。", "problem": "两个独立的、安全的服务器网络，网络A和网络B，正在被合并。每个网络都可以被建模为一个有向图（digraph），其中服务器是顶点，单向数据链路是有向边。网络A中的服务器集合是 $V_A$，网络B中的服务器集合是 $V_B$；这两个集合是不相交的。在每个独立网络内部，可以沿着一系列链路从任何服务器向任何其他服务器发送数据。用图论的术语来说，这意味着网络A的有向图 $G_A = (V_A, E_A)$ 和网络B的有向图 $G_B = (V_B, E_B)$ 都是强连通的。假设 $|V_A| \\ge 1$ 且 $|V_B| \\ge 1$。\n\n一位网络工程师需要在这两个网络之间添加新的单向数据链路（有向边），以形成一个统一的、也是强连通的网络 $G_{total}$。无论原始网络的规模或内部结构如何，为了保证合并后的网络是强连通的，必须添加的新链路的绝对最小数量是多少？\n\nA) 1\n\nB) 2\n\nC) 4\n\nD) 无法用一个固定的数字来保证；数量取决于 $|V_A|$ 和 $|V_B|$。\n\nE) 无法用一个固定的数字来保证；数量取决于 $G_A$ 和 $G_B$ 的具体边结构。", "solution": "设 $G_A=(V_A,E_A)$ 和 $G_B=(V_B,E_B)$ 是两个强连通有向图，且 $V_A \\cap V_B=\\varnothing$。设 $G_{total}$ 是通过添加 $k$ 条端点位于不同集合中的有向边而得到的图。\n\n至少需要两条网络间边的必要性：假设 $k=1$。不失一般性，设添加的唯一一条边是 $(u,v)$，其中 $u \\in V_A$ 且 $v \\in V_B$。那么，不存在从 $V_B$ 到 $V_A$ 的有向边。任何从 $V_B$ 中的顶点到 $V_A$ 中的顶点的有向路径都至少需要一次从 $V_B$ 跨越到 $V_A$，这是不可能的，因为不存在该方向的边。因此 $G_{total}$不可能是强连通的。如果这条唯一的边方向是从 $V_B$ 到 $V_A$，结论同样成立。因此，$k \\ge 2$ 是必要的。\n\n两条网络间边的充分性：任意选择顶点 $a_0,a_1 \\in V_A$ 和 $b_0,b_1 \\in V_B$。添加两条边 $(a_0,b_0)$ 和 $(b_1,a_1)$。为了证明 $G_{total}$ 是强连通的，考虑任意顶点 $x, y$：\n- 如果 $x,y \\in V_A$ 或 $x,y \\in V_B$，则 $G_A$ 或 $G_B$ 原本的强连通性保证了它们之间存在有向路径。\n- 如果 $x \\in V_A$ 且 $y \\in V_B$，由于 $G_A$ 是强连通的，存在一条有向路径 $x \\to a_0$，然后通过添加的边 $(a_0,b_0)$，再接着一条在 $G_B$ 中的有向路径 $b_0 \\to y$。\n- 如果 $x \\in V_B$ 且 $y \\in V_A$，由于 $G_B$ 是强连通的，存在一条有向路径 $x \\to b_1$，然后通过添加的边 $(b_1,a_1)$，再接着一条在 $G_A$ 中的有向路径 $a_1 \\to y$。\n\n因此，两条边，在两个顶点集之间各有一条相反方向的边，保证了 $G_{total}$ 是强连通的。结合必要性和充分性，绝对最小数量是 $2$，这与 $|V_A|$、$|V_B|$ 以及 $G_A$ 和 $G_B$ 的内部边结构无关。", "answer": "$$\\boxed{B}$$", "id": "1402298"}, {"introduction": "现在，让我们将前一个练习中的构建思想扩展到一个更普遍和实际的优化问题上。这个练习 [@problem_id:1402286] 提出了一个典型的工程挑战：如何以最少的成本（即最少的新增边）将一个非循环的、因此不是强连通的系统（有向无环图）转变为一个完全弹性的强连通网络。这个问题将引导你运用强连通分量的概念，并得出一个强大的结论，即所需的最少边数由系统中的“源”组件和“汇”组件的数量决定。", "problem": "在现代云计算架构中，系统通常被设计为一组相互通信的独立微服务。这些服务之间的依赖关系可以建模为一个有向图，其中从服务 `A`到服务 `B` 的一条边表示 `A` 可以向 `B` 发送请求。为了保证稳定性并防止请求链中出现无限循环，新系统的初始依赖图被配置为一个有向无环图 (DAG)。\n\n该系统由十个微服务组成，由顶点集 $V = \\{v_1, v_2, v_3, v_4, v_5, v_6, v_7, v_8, v_9, v_{10}\\}$ 表示。初始的通信信道集合由有向边集 $E = \\{(v_1, v_4), (v_2, v_4), (v_3, v_5), (v_4, v_6), (v_5, v_6), (v_6, v_7), (v_8, v_9)\\}$ 表示。\n\n一项新的运营要求规定，整个系统必须实现“完全弹性”，这在数学上意味着依赖图必须变为强连通的。一个有向图是强连通的，如果对于每一对有序顶点 $(u, v)$，都存在一条从 $u$ 到 $v$ 的有向边路径。为满足此要求，系统架构师必须向图中添加新的通信信道（有向边）。\n\n要使图 $G = (V, E)$ 变为强连通的，至少需要添加多少条新边？", "solution": "我们将微服务通信结构建模为有向图 $G=(V,E)$，其中 $V=\\{v_{1},v_{2},\\ldots,v_{10}\\}$ 且 $E=\\{(v_{1},v_{4}),(v_{2},v_{4}),(v_{3},v_{5}),(v_{4},v_{6}),(v_{5},v_{6}),(v_{6},v_{7}),(v_{8},v_{9})\\}$。给定的图 $G$ 是一个有向无环图，因此每个顶点自身构成一个强连通分量 (SCC)。因此，其收缩图就是 $G$ 本身。\n\n我们计算此有向无环图中每个顶点的入度和出度：\n- $v_{1}$：入度 $0$，出度 $1$（到 $v_{4}$ 的边）。\n- $v_{2}$：入度 $0$，出度 $1$（到 $v_{4}$ 的边）。\n- $v_{3}$：入度 $0$，出度 $1$（到 $v_{5}$ 的边）。\n- $v_{4}$：入度 $2$（来自 $v_{1},v_{2}$），出度 $1$（到 $v_{6}$）。\n- $v_{5}$：入度 $1$（来自 $v_{3}$），出度 $1$（到 $v_{6}$）。\n- $v_{6}$：入度 $2$（来自 $v_{4},v_{5}$），出度 $1$（到 $v_{7}$）。\n- $v_{7}$：入度 $1$（来自 $v_{6}$），出度 $0$。\n- $v_{8}$：入度 $0$，出度 $1$（到 $v_{9}$ 的边）。\n- $v_{9}$：入度 $1$（来自 $v_{8}$），出度 $0$。\n- $v_{10}$：入度 $0$，出度 $0$。\n\n在收缩图中，入度为 $0$ 的强连通分量称为源点，出度为 $0$ 的强连通分量称为汇点。源点的数量为\n$$p=|\\{v_{1},v_{2},v_{3},v_{8},v_{10}\\}|=5,$$\n汇点的数量为\n$$q=|\\{v_{7},v_{9},v_{10}\\}|=3.$$\n\n关于有向图有一个标准结论：如果收缩图有超过一个强连通分量，那么使原图变为强连通所需添加的新边的最小数量 $r$ 为\n$$r=\\max(p,q).$$\n理由是：至少需要 $p$ 条边才能使每个源 SCC 都获得一条入边，且至少需要 $q$ 条边才能使每个汇 SCC 都获得一条出边，因此 $r \\geq \\max(p,q)$。反过来，通过适当地将汇点连接到源点（如有必要，可重用某些汇点或源点），总可以通过添加 $\\max(p,q)$ 条边将所有 SCC 连接成一个大的有向环，因此 $r \\leq \\max(p,q)$。\n\n将此结论应用于当前 $p=5$ 和 $q=3$ 的图，可得\n$$r=\\max(5,3)=5.$$\n\n为了完整起见，一组可以实现强连通性的 5 条添加边的具体示例如下\n$$(v_{7},v_{8}),\\ (v_{9},v_{2}),\\ (v_{6},v_{1}),\\ (v_{8},v_{10}),\\ (v_{10},v_{3})$$\n添加这些边后，任意两个顶点之间都可通过有向路径相互到达。\n\n因此，所需添加的新边的最小数量为 $5$。", "answer": "$$\\boxed{5}$$", "id": "1402286"}]}
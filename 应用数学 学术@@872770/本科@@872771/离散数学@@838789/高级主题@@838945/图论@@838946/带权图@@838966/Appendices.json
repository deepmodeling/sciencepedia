{"hands_on_practices": [{"introduction": "在网络设计中，一个核心挑战是如何用最小的成本连接所有节点。最小生成树 (MST) 算法为此提供了优雅的解决方案。这个练习将让你应用 MST 的概念来分析网络成本如何因技术改进而变化，这是一个在电信和物流等领域常见的实际问题 [@problem_id:1414573]。", "problem": "一家电信公司负责用高速数据电缆连接五个远程研究站，分别命名为Alpha、Bravo、Charlie、Delta和Echo。目标是确保所有站点都相互连接（直接或间接），同时最小化所用电缆的总长度，从而最小化成本。可能的直接连接及其相关成本（单位：千美元）如下：\n\n- Alpha 到 Bravo：10\n- Alpha 到 Charlie：25\n- Alpha 到 Delta：30\n- Bravo 到 Charlie：12\n- Bravo 到 Echo：18\n- Charlie 到 Delta：8\n- Charlie 到 Echo：20\n- Delta 到 Echo：15\n\n最近，定向钻井技术的一项突破使得Alpha和Charlie之间的路线铺设变得容易得多。因此，Alpha到Charlie的连接成本从25千美元降低到了9千美元。所有其他成本保持不变。\n\n计算由于这项技术改进，最低网络成本（单位：千美元）的总减少量。", "solution": "我们需要连接所有五个站点的最低总成本，即最小生成树（MST）的成本。我们使用Kruskal算法：按权重递增排序所有边，并依次添加不形成环的边，直到所有顶点都连接起来。\n\n改进前，各边的权重为：\n- $AB: 10$, $AC: 25$, $AD: 30$, $BC: 12$, $BE: 18$, $CD: 8$, $CE: 20$, $DE: 15$。\n排序后：$CD: 8$, $AB: 10$, $BC: 12$, $DE: 15$, $BE: 18$, $CE: 20$, $AC: 25$, $AD: 30$。\n应用Kruskal算法：\n- 添加 $CD: 8$。\n- 添加 $AB: 10$。\n- 添加 $BC: 12$（连接了连通分量，不形成环）。\n- 是否跳过 $DE: 15$？检查：当前连通分量有 $A,B,C,D$，$E$ 是独立的，所以添加 $DE: 15$ 来连接 $E$。\n最小生成树由边 $CD, AB, BC, DE$ 构成，总成本为\n$$8+10+12+15=45.$$\n\n改进后，$AC$ 的成本降至 $9$；所有其他边保持不变。排序后的列表是 $CD: 8$, $AC: 9$, $AB: 10$, $BC: 12$, $DE: 15$, $BE: 18$, $CE: 20$, $AD: 30$。\n应用Kruskal算法：\n- 添加 $CD: 8$。\n- 添加 $AC: 9$（将 $A$ 与 $\\{C,D\\}$ 合并）。\n- 添加 $AB: 10$（加入 $B$，不形成环）。\n- 添加 $DE: 15$（连接 $E$）。\n最小生成树由边 $CD, AC, AB, DE$ 构成，总成本为\n$$8+9+10+15=42.$$\n\n因此，最低网络成本的总减少量为\n$$45-42=3.$$", "answer": "$$\\boxed{3}$$", "id": "1414573"}, {"introduction": "寻找两个节点之间的最短路径是图论中的一个基本问题。虽然 Dijkstra 算法广为人知，但当图中存在负权重边时，它就不再适用。此练习探讨了一种特殊情况——有向无环图 (DAG)，它允许使用一种高效的动态规划方法来解决带负权重的最短路径问题 [@problem_id:1414557]。", "problem": "一家专业的物流公司设计了一个运输网络，用于在六个标记为 A、B、C、D、E 和 F 的数据中心之间运输高价值货物。该网络由几条单向直达路线组成，每条路线都有一个相关的成本。由于特殊协议和回程运输机会，一些路线的成本为负，代表净利润。该网络保证是无环的，这意味着没有路线会回到先前访问过的数据中心。\n\n可用路线及其成本如下：\n- 从 A 到 B，成本为 4 个单位。\n- 从 A 到 C，成本为 2 个单位。\n- 从 B 到 C，成本为 5 个单位。\n- 从 B 到 D，成本为 10 个单位。\n- 从 C 到 E，成本为 3 个单位。\n- 从 D 到 F，成本为 11 个单位。\n- 从 E 到 D，成本为 4 个单位。\n- 从 E 到 F，成本为 -5 个单位。\n\n你的任务是确定将一个包裹从起始数据中心 A 运输到最终目的地 F 的最低可能总成本。", "solution": "设该有向无环图的顶点为 $V=\\{A,B,C,D,E,F\\}$，带权边为 $(u,v)$，其成本为 $w(u,v)$。我们寻求从 $A$ 到 $F$ 的最小总成本，即找到一条路径 $A \\to \\cdots \\to F$，使其沿途的边成本之和最小。\n\n因为该图是无环的，我们可以通过动态规划，沿着一个拓扑顺序来计算最短路径距离。与给定边一致的一个有效拓扑顺序是 $A,B,C,E,D,F$，因为在此顺序中，所有边都从较早的顶点指向较晚的顶点：\n- $A \\to B$, $A \\to C$,\n- $B \\to C$, $B \\to D$,\n- $C \\to E$,\n- $E \\to D$, $E \\to F$,\n- $D \\to F$.\n\n初始化距离，设 $d(A)=0$，对于 $v \\in \\{B,C,D,E,F\\}$，设 $d(v)=+\\infty$。对于拓扑顺序中的每个顶点，使用以下公式松弛其出边：\n$$\nd(v) \\leftarrow \\min\\{d(v),\\, d(u)+w(u,v)\\} \\quad \\text{对于每条边 } (u,v).\n$$\n\n处理 $A$：\n$$\nd(B)=\\min\\{+\\infty,\\, d(A)+w(A,B)\\}=\\min\\{+\\infty,\\, 0+4\\}=4,\n$$\n$$\nd(C)=\\min\\{+\\infty,\\, d(A)+w(A,C)\\}=\\min\\{+\\infty,\\, 0+2\\}=2.\n$$\n\n处理 $B$：\n$$\nd(C)=\\min\\{2,\\, d(B)+w(B,C)\\}=\\min\\{2,\\, 4+5\\}=\\min\\{2,9\\}=2,\n$$\n$$\nd(D)=\\min\\{+\\infty,\\, d(B)+w(B,D)\\}=\\min\\{+\\infty,\\, 4+10\\}=14.\n$$\n\n处理 $C$：\n$$\nd(E)=\\min\\{+\\infty,\\, d(C)+w(C,E)\\}=\\min\\{+\\infty,\\, 2+3\\}=5.\n$$\n\n处理 $E$：\n$$\nd(D)=\\min\\{14,\\, d(E)+w(E,D)\\}=\\min\\{14,\\, 5+4\\}=\\min\\{14,9\\}=9,\n$$\n$$\nd(F)=\\min\\{+\\infty,\\, d(E)+w(E,F)\\}=\\min\\{+\\infty,\\, 5+(-5)\\}=0.\n$$\n\n处理 $D$：\n$$\nd(F)=\\min\\{0,\\, d(D)+w(D,F)\\}=\\min\\{0,\\, 9+11\\}=\\min{0,20}=0.\n$$\n\n算法终止时，从 $A$ 到 $F$ 的最小总成本是 $d(F)=0$。最优路径可以从松弛操作中读出：$A \\to C \\to E \\to F$，其总成本为\n$$\nw(A,C)+w(C,E)+w(E,F)=2+3+(-5)=0.\n$$\n\n因此，最低可能总成本为 $0$。", "answer": "$$\\boxed{0}$$", "id": "1414557"}, {"introduction": "最短路径问题有时会附带额外的约束条件，这使得标准的寻路算法无法直接应用。这个问题引入了一个有趣的挑战：路径必须包含偶数条边。为了解决这个问题，你需要学习一种强大的技巧，即通过构建一个“状态图”来将约束条件编码到图的结构中，从而将复杂问题转化为标准的最短路径问题 [@problem_id:1414596]。", "problem": "在一个高级时序动力学实验室中，建立了一系列共$N=5$个稳定的时间“锚点”，标记为1到5。这些锚点由一个单向“相位隧道”网络互连。一个名为“探路者”的特制探测器被设计用于在这个网络中导航。\n\n探路者拥有一种称为“宇称电荷”的内在属性，该属性可以处于“偶”或“奇”两种状态之一。探测器从1号锚点出发，初始宇称电荷为“偶”。每当探路者穿过一条相位隧道，其宇称电荷状态就会翻转（从“偶”到“奇”，或从“奇”到“偶”）。为使任务成功，探测器必须以“偶”宇称电荷状态到达其目的地锚点。\n\n从锚点$u$到锚点$v$穿过隧道的能量成本不是恒定的；它取决于探路者在锚点$u$处*进入*隧道时的宇称电荷。具体的能量成本如下：\n\n**以“偶”宇称电荷进入的成本 ($E_{\\text{even}}$):**\n- 隧道 1 到 2: 10 单位\n- 隧道 1 到 3: 100 单位\n- 隧道 2 到 3: 10 单位\n- 隧道 2 到 4: 50 单位\n- 隧道 3 到 5: 100 单位\n- 隧道 4 到 3: 10 单位\n- 隧道 4 到 5: 20 单位\n\n**以“奇”宇称电荷进入的成本 ($E_{\\text{odd}}$):**\n- 隧道 1 到 2: 10 单位\n- 隧道 1 到 3: 5 单位\n- 隧道 2 到 3: 10 单位\n- 隧道 2 到 4: 10 单位\n- 隧道 3 到 5: 10 单位\n- 隧道 4 到 3: 10 单位\n- 隧道 4 到 5: 20 单位\n\n任何未列出的隧道连接都具有无限的能量成本。探测器的任务是从起始锚点1行进到目的地锚点5。\n\n确定探路者成功完成其任务所需的最小总能量成本。将您的答案表示为单个整数。", "solution": "我们通过一个双层有向图来为这种依赖于宇称的成本建模，图中的状态为$(i,p)$，其中$i \\in \\{1,2,3,4,5\\}$是锚点，$p \\in \\{\\text{E}, \\text{O}\\}$是穿过出向隧道前的宇称电荷。穿过任何隧道都会翻转宇称，而所用成本由源点的宇称决定。因此：\n- 从 $(u,\\text{E})$ 到 $(v,\\text{O})$ 的成本是 $E_{\\text{even}}(u \\to v)$。\n- 从 $(u,\\text{O})$ 到 $(v,\\text{E})$ 的成本是 $E_{\\text{odd}}(u \\to v)$。\n\n我们寻求从 $(1,\\text{E})$ 到 $(5,\\text{E})$ 的最小成本路径。令 $d(i,p)$ 表示从 $(1,\\text{E})$ 到 $(i,p)$ 的最小能量成本。初始化 $d(1,\\text{E})=0$，所有其他的 $d=\\infty$。\n\n使用给定的隧道成本，我们像在Dijkstra算法中一样执行松弛操作。\n\n从 $(1,\\text{E})$ 开始初始化：\n- $(1,\\text{E}) \\to (2,\\text{O})$，成本为 $10$：设置 $d(2,\\text{O})=10$。\n- $(1,\\text{E}) \\to (3,\\text{O})$，成本为 $100$：设置 $d(3,\\text{O})=100$。\n\n接下来处理 $(2,\\text{O})$，因为 $10$ 是最小的临时值：\n- 从 $(2,\\text{O})$ 出发使用奇数成本：$2 \\to 3$ 成本为 $10$，得到 $(3,\\text{E})$ 的成本为\n$$\nd(3,\\text{E}) = d(2,\\text{O}) + 10 = 20.\n$$\n- 从 $(2,\\text{O})$ 出发：$2 \\to 4$ 成本为 $10$，得到 $(4,\\text{E})$ 的成本为\n$$\nd(4,\\text{E}) = d(2,\\text{O}) + 10 = 20.\n$$\n\n处理 $(3,\\text{E})$，其成本为 $20$：\n- 从 $(3,\\text{E})$ 出发使用偶数成本：$3 \\to 5$ 成本为 $100$，得到 $(5,\\text{O})$ 的成本为\n$$\nd(5,\\text{O}) = d(3,\\text{E}) + 100 = 120.\n$$\n\n处理 $(4,\\text{E})$，其成本为 $20$：\n- 从 $(4,\\text{E})$ 出发使用偶数成本：$4 \\to 3$ 成本为 $10$，得到 $(3,\\text{O})$ 的成本为\n$$\nd(3,\\text{O}) = \\min\\{100,\\, d(4,\\text{E}) + 10\\} = 30.\n$$\n- 从 $(4,\\text{E})$ 出发：$4 \\to 5$ 成本为 $20$，得到 $(5,\\text{O})$ 的成本为\n$$\nd(5,\\text{O}) = \\min\\{120,\\, d(4,\\text{E}) + 20\\} = 40.\n$$\n\n处理 $(3,\\text{O})$，其成本为 $30$：\n- 从 $(3,\\text{O})$ 出发使用奇数成本：$3 \\to 5$ 成本为 $10$，得到 $(5,\\text{E})$ 的成本为\n$$\nd(5,\\text{E}) = d(3,\\text{O}) + 10 = 40.\n$$\n\n所有剩余未处理的距离都至少为 $40$，因此 $d(5,\\text{E})=40$ 是最优解。\n\n实现该值的一条显式最优路径是\n$$\n1 \\xrightarrow[\\text{even}]{10} 2 \\xrightarrow[\\text{odd}]{10} 4 \\xrightarrow[\\text{even}]{10} 3 \\xrightarrow[\\text{odd}]{10} 5,\n$$\n该路径经过四次穿越（偶数次，因此到达时的宇称为偶），总成本为 $10+10+10+10=40$。不可能有更小的成本：任何有效的任务都必须经过偶数次穿越；唯一的两段路径 $1 \\to 3 \\to 5$ 成本为 $100+10=110$，而唯一一条每段成本都取其最小值 $10$ 的四段路径就是上面那条，成本为 $40$。隧道 $1 \\to 3$ 的 $5$ 单位成本只有在以奇宇称进入时才可用，但由于锚点1没有入向隧道，因此从起点出发无法安排成奇宇称。", "answer": "$$\\boxed{40}$$", "id": "1414596"}]}
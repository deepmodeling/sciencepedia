{"hands_on_practices": [{"introduction": "理论需要通过实践来巩固。第一个练习将挑战你将最短路径算法应用于一个具体场景：驾驶一辆探测车穿越网格。此问题 [@problem_id:1400396] 突出了解决问题的第一步——将现实世界的空间（如网格）建模为我们的算法可以理解的抽象图。请密切注意成本的定义方式，因为这是正确设置问题的关键。", "problem": "一个特制的火星车任务是在一块火星地块上航行，以到达一个指定的勘测地点。该地块被映射为一个 4x4 的单元格网格。火星车从左上角的单元格（坐标为 $(0,0)$）出发，必须到达右下角的单元格（坐标为 $(3,3)$）。在任何单元格中，火星车都可以移动到相邻的单元格（上、下、左、右），前提是它必须保持在网格边界内。\n\n在单元格内运行所需的能量由地形的难度决定。该成本在*进入*单元格时产生。起始单元格 $(0,0)$ 的成本不包含在总路径成本中。网格单元格由行 $i$ 和列 $j$ 索引，记为 $(i,j)$，其中 $i, j \\in \\{0, 1, 2, 3\\}$。进入单元格 $(i,j)$ 的能量成本记为 $C_{ij}$。成本如下：\n第 0 行：$C_{00}=1, C_{01}=8, C_{02}=2, C_{03}=5$。\n第 1 行：$C_{10}=3, C_{11}=4, C_{12}=1, C_{13}=6$。\n第 2 行：$C_{20}=7, C_{21}=2, C_{22}=5, C_{23}=2$。\n第 3 行：$C_{30}=4, C_{31}=9, C_{32}=3, C_{33}=1$。\n\n计算火星车从单元格 $(0,0)$ 行驶到单元格 $(3,3)$ 的最小总能量成本。", "solution": "将网格建模为一个图，其顶点是单元格 $(i,j)$，边连接正交相邻的单元格。从单元格 $u$ 穿过一条边到相邻单元格 $v$ 的成本等于进入 $v$ 的成本，即 $C_{v}$。从 $(0,0)$ 到 $(3,3)$ 的总路径成本等于路径上所有进入的单元格的 $C_{v}$ 之和，不包括初始位置 $(0,0)$ 的成本。所有成本都是非负的，因此 Dijkstra 算法可以得出最小总成本。\n\n定义 $d(i,j)$ 为从 $(0,0)$ 到达 $(i,j)$ 的最小成本，其中 $d(0,0)=0$。对于从一个已确定节点 $(i,j)$ 到其邻居 $(p,q)$ 的任何松弛操作，使用\n$$\nd(p,q) \\leftarrow \\min\\!\\bigl(d(p,q),\\, d(i,j) + C_{pq}\\bigr).\n$$\n\n初始化：\n$$\nd(0,0)=0,\\quad d(1,0)=0+C_{10}=3,\\quad d(0,1)=0+C_{01}=8,\n$$\n所有其他 $d=\\infty$。\n\n确定节点 $(1,0)$，其 $d=3$；松弛其邻居：\n$$\nd(2,0)=\\min(\\infty,3+C_{20})=10,\\quad d(1,1)=\\min(\\infty,3+C_{11})=7.\n$$\n\n确定节点 $(1,1)$，其 $d=7$；松弛其邻居：\n$$\nd(2,1)=\\min(\\infty,7+C_{21})=9,\\quad d(1,2)=\\min(\\infty,7+C_{12})=8,\\quad d(0,1)=\\min(8,7+C_{01})=8.\n$$\n\n确定节点 $(0,1)$，其 $d=8$；松弛其邻居：\n$$\nd(0,2)=\\min(\\infty,8+C_{02})=10.\n$$\n\n确定节点 $(1,2)$，其 $d=8$；松弛其邻居：\n$$\nd(2,2)=\\min(\\infty,8+C_{22})=13,\\quad d(1,3)=\\min(\\infty,8+C_{13})=14,\\quad d(0,2)=\\min(10,8+C_{02})=10.\n$$\n\n确定节点 $(2,1)$，其 $d=9$；松弛其邻居：\n$$\nd(3,1)=\\min(\\infty,9+C_{31})=18,\\quad d(2,0)=\\min(10,9+C_{20})=10,\\quad d(2,2)=\\min(13,9+C_{22})=13.\n$$\n\n确定节点 $(2,0)$，其 $d=10$；松弛其邻居：\n$$\nd(3,0)=\\min(\\infty,10+C_{30})=14,\\quad d(2,1)=\\min(9,10+C_{21})=9.\n$$\n\n确定节点 $(0,2)$，其 $d=10$；松弛其邻居：\n$$\nd(0,3)=\\min(\\infty,10+C_{03})=15,\\quad d(1,2)=\\min(8,10+C_{12})=8.\n$$\n\n确定节点 $(2,2)$，其 $d=13$；松弛其邻居：\n$$\nd(3,2)=\\min(\\infty,13+C_{32})=16,\\quad d(2,3)=\\min(\\infty,13+C_{23})=15.\n$$\n\n确定节点 $(1,3)$，其 $d=14$；邻居无改进。\n\n确定节点 $(3,0)$，其 $d=14$；邻居无改进。\n\n确定节点 $(0,3)$，其 $d=15$；邻居无改进。\n\n确定节点 $(2,3)$，其 $d=15$；松弛其邻居：\n$$\nd(3,3)=\\min(\\infty,15+C_{33})=16.\n$$\n\n确定节点 $(3,2)$，其 $d=16$；松弛其邻居：\n$$\nd(3,3)=\\min(16,16+C_{33})=16.\n$$\n\n最后，确定节点 $(3,3)$，其 $d(3,3)=16$。因此，最小总能量成本为 $16$。一条实现路径是 $(0,0)\\to(1,0)\\to(1,1)\\to(1,2)\\to(2,2)\\to(2,3)\\to(3,3)$，其成本总和为 $3+4+1+5+2+1=16$。", "answer": "$$\\boxed{16}$$", "id": "1400396"}, {"introduction": "现实世界的问题很少孤立存在；它们通常伴随着各种约束条件。下一个练习 [@problem_id:1400390] 介绍了一种常见的情况：某个位置不可用。这个练习将教你一种处理此类约束的强大技巧：修改图模型本身，而不是算法。通过移除封闭的节点及其连接，你可以使用标准的最短路径算法来找到新条件下的最优路线。", "problem": "一所大学校园正在安装一个自主送货机器人网络。该网络可以建模为一个带权的无向图，其中节点是关键位置，边的权重表示位置之间的旅行时间（以分钟为单位）。校园地图已简化为以下位置和直达路径：\n\n- **位置（节点）：**\n  - A: 主实验室\n  - B: 工程大楼\n  - C: 中央食堂\n  - D: 数据中心\n  - E: 学生宿舍\n  - F: 校园图书馆\n\n- **路径与旅行时间（边）：**\n  - 主实验室 (A) 到 工程大楼 (B)：10分钟\n  - 主实验室 (A) 到 中央食堂 (C)：3分钟\n  - 工程大楼 (B) 到 数据中心 (D)：2分钟\n  - 工程大楼 (B) 到 学生宿舍 (E)：20分钟\n  - 中央食堂 (C) 到 数据中心 (D)：4分钟\n  - 中央食堂 (C) 到 学生宿舍 (E)：5分钟\n  - 数据中心 (D) 到 校园图书馆 (F)：8分钟\n  - 学生宿舍 (E) 到 校园图书馆 (F)：6分钟\n\n一个机器人需要从主实验室 (A) 前往校园图书馆 (F)。然而，在送货当天，中央食堂 (C) 以及所有直接通往或来自该食堂的路径都因维修而关闭。在这种限制条件下，机器人完成送货任务所需的最短旅行时间是多少？\n\n请以一个数字作为答案，表示总旅行时间。最终答案以分钟为单位。", "solution": "我们将校园建模为一个带权的无向图。中央食堂节点 $C$ 的关闭移除了节点 $C$ 及其所有关联边 $(A,C)$、$(C,D)$ 和 $(C,E)$。剩余的边是：\n- $(A,B)$，权重为 $10$，\n- $(B,D)$，权重为 $2$，\n- $(B,E)$，权重为 $20$，\n- $(D,F)$，权重为 $8$，\n- $(E,F)$，权重为 $6$。\n\n我们需要在这个简化的图中寻找从 $A$ 到 $F$ 的最短旅行时间。这是一个最短路径问题。使用 Dijkstra 的迭代松弛原理：\n\n初始化距离，$d(A)=0$ 且对于 $X\\in\\{B,D,E,F\\}$，$d(X)=\\infty$。从 $A$ 出发，\n$$\nd(B)=\\min\\{d(B),\\,d(A)+10\\}=\\min\\{\\infty,\\,0+10\\}=10.\n$$\n选择具有最小暂定距离的未访问节点，即 $B$，其 $d(B)=10$。松弛其邻居节点：\n$$\nd(D)=\\min\\{d(D),\\,d(B)+2\\}=\\min\\{\\infty,\\,10+2\\}=12,\n$$\n$$\nd(E)=\\min\\{d(E),\\,d(B)+20\\}=\\min\\{\\infty,\\,10+20\\}=30.\n$$\n接下来选择具有最小暂定距离的节点，即 $D$，其 $d(D)=12$。松弛到 $F$：\n$$\nd(F)=\\min\\{d(F),\\,d(D)+8\\}=\\min\\{\\infty,\\,12+8\\}=20.\n$$\n此时，到 $F$ 的已知最优路径成本为 $20$。为完整起见，考虑经过 $E$ 的路径：从 $B$到 $E$ 得到 $d(E)=30$，然后\n$$\nd(F)\\leq d(E)+6=30+6=36,\n$$\n这比 $20$ 大。因此，最短路径是 $A\\to B\\to D\\to F$，总时间为\n$$\n10+2+8=20.\n$$\n\n因此，在该限制条件下，可能的最短旅行时间是 $20$ 分钟。", "answer": "$$\\boxed{20}$$", "id": "1400390"}, {"introduction": "除了寻找单一的最优路径，最短路径算法也是进行网络分析的强大工具。最后一个更具挑战性的问题 [@problem_id:1400403] 让你扮演一位网络工程师，评估系统的脆弱性。你的任务是识别出网络中“最关键”的单一连接，这展示了如何迭代使用这些算法来进行“假设”分析，以确保网络的稳健性。", "problem": "一家公司正在设计一个连接两个关键数据中心——源服务器 (S) 和终端服务器 (T) ——的容错光纤网络。该网络由若干个路由节点组成，这些节点通过双向光纤链路连接，每条链路都有特定的延迟（时间延迟），以毫秒 (ms) 为单位。工程师需要分析该网络的脆弱性。具体来说，他们希望确定在单条网络链路发生故障时，对延迟的最坏情况影响。\n\n网络拓扑由以下节点和链路定义。节点包括：Source (S)、Terminus (T)、Arcadia (A)、Brookside (B)、Central (C)、Downtown (D)、Eastwood (E)、Fairview (F) 和 Greenfield (G)。\n\n双向链路及其对应的延迟如下：\n- (Source, Arcadia): 5 ms\n- (Arcadia, Brookside): 5 ms\n- (Brookside, Central): 5 ms\n- (Central, Terminus): 5 ms\n- (Arcadia, Downtown): 7 ms\n- (Downtown, Brookside): 7 ms\n- (Brookside, Eastwood): 6 ms\n- (Eastwood, Central): 6 ms\n- (Source, Fairview): 8 ms\n- (Fairview, Greenfield): 8 ms\n- (Greenfield, Terminus): 20 ms\n\n你的任务是找出网络中移除哪条链路会导致源服务器 (S) 和终端服务器 (T) 之间最短路径延迟的最大可能增量。这个最大可能增量是多少？\n\n请用一个整数表示你的最终答案，代表以毫秒 (ms) 为单位的最大延迟增量。", "solution": "设 $G$ 是一个无向加权图，其顶点为 $S,T,A,B,C,D,E,F,G$，边的权重为给定的延迟。定义 $d(S,T)$ 为 $S$ 到 $T$ 的最短路径长度。\n\n首先，计算在完好网络中的 $d(S,T)$。路径 $S \\to A \\to B \\to C \\to T$ 的长度为\n$$5+5+5+5=20.$$\n其他路径：\n- 绕过 $A$–$B$ 的路径：$S \\to A \\to D \\to B \\to C \\to T$ 的长度为 $5+7+7+5+5=29$。\n- 绕过 $B$–$C$ 的路径：$S \\to A \\to B \\to E \\to C \\to T$ 的长度为 $5+5+6+6+5=27$。\n- 使用南部路径：$S \\to F \\to G \\to T$ 的长度为 $8+8+20=36$。\n因此，$d(S,T)=20$，路径为 $S \\to A \\to B \\to C \\to T$。\n\n现在考虑移除每条边 $e$ 的影响，并设 $d_{-e}(S,T)$ 为新的最短路径长度；延迟增量为 $\\Delta_{e}=d_{-e}(S,T)-20$。\n\n1) 移除 $S$–$A$：路径 $S \\to A \\to B \\to C \\to T$ 在起点处中断。从 $S$ 到 $T$ 唯一剩下的路由是 $S \\to F \\to G \\to T$，长度为 $36$。因此，$d_{-SA}(S,T)=36$ 且 $\\Delta_{SA}=36-20=16$。\n\n2) 移除 $A$–$B$：用成本为 $7+7=14$ 的 $A \\to D \\to B$ 替代 $A$–$B$。一条最短的 $S$–$T$ 路径是\n$$S \\to A \\to D \\to B \\to C \\to T,$$\n长度为 $5+7+7+5+5=29$。与经由 $S \\to F \\to G \\to T$ 的路径长度 $36$ 相比，我们得到 $d_{-AB}(S,T)=29$ 且 $\\Delta_{AB}=29-20=9$。\n\n3) 移除 $B$–$C$：用成本为 $6+6=12$ 的 $B \\to E \\to C$ 替代 $B$–$C$。一条最短的 $S$–$T$ 路径是\n$$S \\to A \\to B \\to E \\to C \\to T,$$\n长度为 $5+5+6+6+5=27$。由于 $27  36$，我们得到 $d_{-BC}(S,T)=27$ 且 $\\Delta_{BC}=27-20=7$。\n\n4) 移除 $C$–$T$：从 $C$到 $T$ 的直连链路消失。到达 $T$ 的唯一剩余方式是通过 $G$，产生的路径为\n$$S \\to F \\to G \\to T,$$\n长度为 $36$。任何从 $S$ 进入 $A$–$B$–$C$ 子图，然后再返回 $S$ 前往 $F \\to G \\to T$ 的路由都会超过 $36$。因此，$d_{-CT}(S,T)=36$ 且 $\\Delta_{CT}=36-20=16$。\n\n5) 移除 $A$–$D$：长度为 $20$ 的原始路径 $S \\to A \\to B \\to C \\to T$ 仍然可用，所以 $d_{-AD}(S,T)=20$ 且 $\\Delta_{AD}=0$。\n\n6) 移除 $D$–$B$：长度为 $20$ 的原始路径仍然可用，所以 $d_{-DB}(S,T)=20$ 且 $\\Delta_{DB}=0$。\n\n7) 移除 $B$–$E$：长度为 $20$ 的原始路径仍然可用，所以 $d_{-BE}(S,T)=20$ 且 $\\Delta_{BE}=0$。\n\n8) 移除 $E$–$C$：长度为 $20$ 的原始路径仍然可用，所以 $d_{-EC}(S,T)=20$ 且 $\\Delta_{EC}=0$。\n\n9) 移除 $S$–$F$：长度为 $20$ 的原始路径仍然可用，所以 $d_{-SF}(S,T)=20$ 且 $\\Delta_{SF}=0$。\n\n10) 移除 $F$–$G$：长度为 $20$ 的原始路径仍然可用，所以 $d_{-FG}(S,T)=20$ 且 $\\Delta_{FG}=0$。\n\n11) 移除 $G$–$T$：长度为 $20$ 的原始路径仍然可用，所以 $d_{-GT}(S,T)=20$ 且 $\\Delta_{GT}=0$。\n\n在所有单边移除情况中，最大的延迟增量是\n$$\\max\\{16,9,7,16,0,0,0,0,0,0,0\\}=16.$$\n因此，由于单条链路故障，导致 $S$ 和 $T$ 之间最短路径延迟的最大可能增量是 $16$ ms。", "answer": "$$\\boxed{16}$$", "id": "1400403"}]}
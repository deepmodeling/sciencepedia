{"hands_on_practices": [{"introduction": "广度优先搜索（BFS）的核心在于其逐层遍历机制。本练习将带你亲手模拟这一过程，在一个由邻接矩阵定义的网络中，从指定服务器出发，一步步追踪队列的变化和节点的发现顺序。通过这个实践 [@problem_id:1485198]，你将牢固掌握BFS算法的基本操作，为解决更复杂的问题打下坚实基础。", "problem": "在一个小型的、隔离的数据中心中，一个由8台服务器组成的网络相互连接，服务器的编号为1到8。网络拓扑是双向的，由一个 $8 \\times 8$ 的邻接矩阵 $A$ 表示，其中如果服务器 $i$ 和服务器 $j$ 之间有直接链接，则 $A_{ij} = 1$，否则 $A_{ij} = 0$。矩阵 $A$ 如下所示：\n$$\nA = \\begin{pmatrix}\n0  1  1  1  0  0  0  0 \\\\\n1  0  0  0  0  0  0  0 \\\\\n1  0  0  0  1  1  0  0 \\\\\n1  0  0  0  0  0  0  0 \\\\\n0  0  1  0  0  0  0  1 \\\\\n0  0  1  0  0  0  1  0 \\\\\n0  0  0  0  0  1  0  0 \\\\\n0  0  0  0  1  0  0  0\n\\end{pmatrix}\n$$\n启动一个广播协议，以将一个关键更新从源服务器分发到网络中的所有其他服务器。该协议使用广度优先搜索（BFS）算法来确定服务器被访问的顺序。遍历从服务器3开始。当探索一个服务器的邻居时，如果发现多个未访问过的邻居，它们将按照服务器编号的升序被添加到访问队列中（例如，服务器2会在服务器4之前入队）。\n\n确定在BFS遍历期间，服务器标签按其首次被发现（即标记为“已访问”）的顺序所形成的序列。", "solution": "将对称邻接矩阵 $A$ 所表示的图解释为无向图。从行中读取的邻居集合如下：\n$$\nN(1)=\\{2,3,4\\},\\quad N(2)=\\{1\\},\\quad N(3)=\\{1,5,6\\},\\quad N(4)=\\{1\\}, \\\\\nN(5)=\\{3,8\\},\\quad N(6)=\\{3,7\\},\\quad N(7)=\\{6\\},\\quad N(8)=\\{5\\}.\n$$\n从服务器3开始使用BFS。原则：将起始节点入队并标记为已访问；然后迭代地将一个节点出队，按升序扫描其邻居，并在发现任何未访问过的邻居时立即将其入队（同时将其标记为已访问）。发现的顺序就是节点首次入队的顺序。\n\n初始化：队列 $Q=[\\,]$，已访问序列为空。将3入队并标记为已访问。到目前为止的发现顺序：$3$；队列 $Q=[3]$。\n\n将3出队。其邻居按升序为 $1,5,6$。它们都未被访问，因此按此顺序将它们入队，并在入队时标记为已访问。发现顺序：$3,1,5,6$；队列 $Q=[1,5,6]$。\n\n将1出队。其邻居按升序为 $2,3,4$。其中，3已被访问；依次将2和4入队。发现顺序：$3,1,5,6,2,4$；队列 $Q=[5,6,2,4]$。\n\n将5出队。其邻居为 $3,8$。节点3已被访问；将8入队。发现顺序：$3,1,5,6,2,4,8$；队列 $Q=[6,2,4,8]$。\n\n将6出队。其邻居为 $3,7$。节点3已被访问；将7入队。发现顺序：$3,1,5,6,2,4,8,7$；队列 $Q=[2,4,8,7]$。\n\n将2出队。邻居1已被访问；无变化。队列 $Q=[4,8,7]$。\n\n将4出队。邻居1已被访问；无变化。队列 $Q=[8,7]$。\n\n将8出队。邻居5已被访问；无变化。队列 $Q=[7]$。\n\n将7出队。邻居6已被访问；无变化。队列为空；BFS完成。\n\n因此，首次发现的顺序是 $3,1,5,6,2,4,8,7$。", "answer": "$$\\boxed{\\begin{pmatrix}3  1  5  6  2  4  8  7\\end{pmatrix}}$$", "id": "1485198"}, {"introduction": "广度优先搜索在无权图中最核心的应用是寻找最短路径。这个练习 [@problem_id:1485225] 让你转换角色，从单纯的算法执行者变为路径的验证者。你需要运用BFS的原理来判断一条给定的网络路由是否真的是从起点到终点的最优选择（即最短路径），这有助于你更深刻地理解BFS为何能保证找到最短路径。", "problem": "考虑一个为弹性数据包路由而设计的小型、去中心化的计算机网络。该网络由一组服务器节点组成，数据包可以在任何两个共享直接双向连接的节点之间传输。该网络的结构可以建模为一个无权无向图，其中服务器是顶点，连接是边。\n\n该网络由九个服务器组成，标记为A到I。直接连接如下：\n(A, B), (A, C), (B, D), (B, E), (C, F), (D, G), (E, G), (E, H), (F, I), (G, I), (H, I)\n\n一位网络管理员提议了一条从服务器A发送数据包到服务器I的具体路由。提议的路径是一个服务器序列：A → C → F → I。\n\n你的任务是确定这条提议的路径是否是从A到I的最短路径。\n\n下列哪个陈述是正确的？\n\nA. 给定路径是一条最短路径。\n\nB. 给定路径不是一条最短路径。\n\nC. 服务器A和服务器I之间没有路径。\n\nD. 网络结构不明确，因此无法确定最短路径。", "solution": "将网络建模为一个无权无向图 $G=(V,E)$，其中 $V=\\{A,B,C,D,E,F,G,H,I\\}$，边集 $E$ 由无序对 $\\{\\{A,B\\},\\{A,C\\},\\{B,D\\},\\{B,E\\},\\{C,F\\},\\{D,G\\},\\{E,G\\},\\{E,H\\},\\{F,I\\},\\{G,I\\},\\{H,I\\}\\}$ 给出。在无权图中，路径的长度是它包含的边的数量，而两个顶点之间的最短路径是在所有连接它们的路径中具有最少边数的路径。\n\n从 $A$ 到 $I$ 的提议路径是序列 $(A,C,F,I)$。这是一条有效路径，因为 $\\{A,C\\}\\in E$、$\\{C,F\\}\\in E$ 且 $\\{F,I\\}\\in E$。因此，其长度为 $3$ 条边。\n\n为了确定是否存在更短的路径，我们检查长度为 $1$ 和 $2$ 的可能性：\n1) 当且仅当 $\\{A,I\\}\\in E$ 时，存在长度为 $1$ 的路径。从边集中可知，$\\{A,I\\}\\notin E$，因此不存在长度为 $1$ 的路径。\n2) 长度为 $2$ 的路径形式为 $(A,X,I)$，其中某个 $X\\in V$ 满足 $\\{A,X\\}\\in E$ 和 $\\{X,I\\}\\in E$。令 $N(v)$ 表示 $v$ 的邻居集合。从 $E$ 计算\n$$\nN(A)=\\{B,C\\},\\qquad N(I)=\\{F,G,H\\}.\n$$\n当且仅当 $X\\in N(A)\\cap N(I)$ 时，存在一条两边路径 $(A,X,I)$。因为\n$$\nN(A)\\cap N(I)=\\{B,C\\}\\cap\\{F,G,H\\}=\\varnothing,\n$$\n所以不存在长度为 $2$ 的路径。\n\n因此，从 $A$ 到 $I$ 的每条路径长度至少为 $3$。因为我们已经展示了一条长度为 $3$ 的路径，所以图距离满足\n$$\nd(A,I)=3,\n$$\n因此提议的路径确实是一条最短路径。\n\n因此，正确选项是A。", "answer": "$$\\boxed{A}$$", "id": "1485225"}, {"introduction": "在实际应用中，从A点到B点可能存在多条长度相同的最短路径。此时，系统需要一个明确的规则来做出选择。本练习 [@problem_id:1354134] 引入了一个常见的平局决胜法则——字典序最小——要求你找出符合该规则的唯一最短路径。这展示了如何将BFS的基本框架与特定业务逻辑相结合，解决更精细化的寻路问题。", "problem": "在一个小型的实验性计算机网络中，数据包在节点之间进行路由。该网络拓扑可以建模为一个无权无向图，其中节点是路由器，用大写字母标识，两个节点之间的边表示一条直接的双向通信链路。所有链路的成本均被视为相同，因此“最佳”路径是“跳数”最少的路径（即最短路径）。\n\n该网络由路由器集合 $V = \\{A, B, C, D, E, G\\}$ 组成。直接通信链路由边集合 $E = \\{\\{A, B\\}, \\{A, C\\}, \\{B, D\\}, \\{C, E\\}, \\{D, E\\}, \\{D, G\\}, \\{E, G\\}\\}$ 给出。\n\n当源和目的地之间存在多条最短路径时，路由协议采用一种决胜规则：选择字典序最靠前的路径。一条路径表示为路由器标签的序列，$P_1 = v_1-v_2-\\dots-v_k$，如果它在第一个不同的位置 $i$ 上的路由器 $v_i$ 按字母顺序排在另一条路径 $P_2 = u_1-u_2-\\dots-u_k$ 的路由器 $u_i$ 之前，则称路径 $P_1$ 的字典序小于路径 $P_2$。\n\n请确定一个从路由器 `A` 传输到路由器 `G` 的数据包所走的字典序最靠前的最短路径。\n\n下列哪个选项表示这条路径？\n\nA. A-B-D-G\n\nB. A-C-E-G\n\nC. A-B-D-E-G\n\nD. A-C-E-D-G\n\nE. 从 A 到 G 没有路径。", "solution": "因为该图是无权无向图，从源到目的地的跳数最少的路径可以通过广度优先搜索（BFS）获得。设 $L_{k}$ 表示第 $k$ 个 BFS 层（所有与 $A$ 的距离为 $k$ 的顶点），并设 $d(u,v)$ 表示顶点 $u$ 和 $v$ 之间的跳数距离。\n\n以 $L_{0}=\\{A\\}$ 初始化。$A$ 的邻居是 $B$ 和 $C$，所以\n$$\nL_{1}=\\{B,C\\}.\n$$\n从 $L_{1}$ 开始，探索尚未访问过的新邻居。从 $B$ 我们可以到达 $D$；从 $C$ 我们可以到达 $E$，因此\n$$\nL_{2}=\\{D,E\\}.\n$$\n从 $L_{2}$ 开始，探索尚未访问过的新邻居。从 $D$ 我们可以到达 $G$（以及 $E$，但 $E$ 已被发现），从 $E$ 我们可以到达 $G$（以及 $D$，已被发现）。因此 $G$ 首次出现在\n$$\nL_{3}=\\{G\\},\n$$\n所以最小跳数是\n$$\nd(A,G)=3.\n$$\n\n所有与这些层级一致的、长度为 3 条边的 $A$ 到 $G$ 的最短路径是：\n- $A-B-D-G$，途经 $B \\in L_{1}$ 和 $D \\in L_{2}$，\n- $A-C-E-G$，途经 $C \\in L_{1}$ 和 $E \\in L_{2}$。\n\n不存在从 $A$ 到 $G$ 的 2 边路径，因为 $A$ 的邻居只有 $B$ 和 $C$，而 $\\{B,G\\}$ 和 $\\{C,G\\}$ 都不是边。像 $A-B-D-E-G$ 或 $A-C-E-D-G$ 这样的路径有 4 条边，不是最短路径。\n\n根据决胜规则，在长度相同的最短路径中，我们选择字典序最靠前的那条。比较 $A-B-D-G$ 和 $A-C-E-G$，第一个不同点在第二个顶点：$B$ 与 $C$，而按字母顺序 $B$ 在 $C$ 之前。因此，字典序最靠前的最短路径是 $A-B-D-G$，对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1354134"}]}
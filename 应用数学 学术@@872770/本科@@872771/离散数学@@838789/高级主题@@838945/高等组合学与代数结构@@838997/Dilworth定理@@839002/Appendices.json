{"hands_on_practices": [{"introduction": "让我们从一个直观的例子开始，加深对偏序集、链和反链的理解。这个练习将探讨一个由两个独立组件的配置构成的系统，每个组件有三种状态。通过确定最大反链和最小链划分的大小，你将亲手验证迪尔沃思定理的核心内容：一个有限偏序集的宽度等于其最小链划分的大小。[@problem_id:1363688]", "problem": "考虑一个由两个独立组件（组件1和组件2）组成的系统。每个组件的运行状态可以设置为三个级别之一：低（L）、中（M）或高（H）。系统的一个完整配置由一个有序对 $(s_1, s_2)$ 描述，其中 $s_1$ 是组件1的状态，$s_2$ 是组件2的状态。\n\n所有可能配置的集合构成一个偏序集。这个序是根据状态的自然递进关系定义的，我们定义 L  M  H。一个配置 $C_a = (s_{a1}, s_{a2})$ 被认为‘小于或等于’另一个配置 $C_b = (s_{b1}, s_{b2})$（记作 $C_a \\preceq C_b$），当且仅当根据状态排序，$s_{a1} \\le s_{b1}$ 且 $s_{a2} \\le s_{b2}$。\n\n在这个偏序集中：\n- **链 (chain)** 是配置的一个子集，其中对于子集中的任意两个配置，一个小于或等于另一个。\n- **反链 (antichain)** 是配置的一个子集，其中任意两个不同的配置都不可比（即，对于子集中的任意两个不同配置 $C_x$ 和 $C_y$，既不是 $C_x \\preceq C_y$ 也不是 $C_y \\preceq C_x$）。\n\n您的任务是确定该系统配置偏序集的两个值：\n1. 最大反链的大小（具有最大可能元素数量的反链）。\n2. 最小链划分的大小（将整个配置集划分为最少数量的不相交链的划分）。", "solution": "我们将状态 L, M, H 分别映射为数字 0, 1, 2。一个系统配置 $(s_1, s_2)$ 对应一个有序对 $(i, j)$，其中 $i,j \\in \\{0, 1, 2\\}$。偏序关系为 $(i_1, j_1) \\preceq (i_2, j_2)$ 当且仅当 $i_1 \\le i_2$ 且 $j_1 \\le j_2$。\n\n1.  **求最大反链的大小 ($w(P)$)**：\n    首先，我们构造一个反链来确定宽度的下界。集合 $A = \\{(L,H), (M,M), (H,L)\\}$，即 $\\{(0,2), (1,1), (2,0)\\}$，是一个反链，因为其中任意两个元素都不可比。例如，对于 $(0,2)$ 和 $(1,1)$，有 $0  1$ 但 $2 > 1$。因此，最大反链的大小至少为3，即 $w(P) \\ge 3$。\n\n2.  **求最小链划分的大小 ($\\chi(P)$)**：\n    接下来，我们构造一个链划分来确定宽度的上界。我们可以将所有 9 个配置划分为以下 3 条链：\n    -   $C_1 = \\{(L,L), (M,L), (H,L)\\}$\n    -   $C_2 = \\{(L,M), (M,M), (H,M)\\}$\n    -   $C_3 = \\{(L,H), (M,H), (H,H)\\}$\n    这构成了一个覆盖所有配置的链划分，因此最小链划分的大小 $\\chi(P) \\le 3$。\n\n3.  **结论**:\n    根据迪尔沃思定理，$w(P) = \\chi(P)$。另外，我们总是有 $w(P) \\le \\chi(P)$。\n    结合我们的发现：$3 \\le w(P) \\le \\chi(P) \\le 3$。\n    这证明了最大反链的大小和最小链划分的大小都恰好是 3。因此，题目所要求的两个值都是 3。", "answer": "$$\\boxed{3, 3}$$", "id": "1363688"}, {"introduction": "现在，让我们转向一个更具挑战性的数论背景下的问题。我们将研究由数字 $360$ 的所有正整数因子在整除关系下构成的偏序集。这个问题不仅是一个更复杂的迪尔沃思定理应用，还展示了如何利用组合技巧（如生成函数）来系统地计算偏序集的宽度，这对于无法简单目视检查的大型集合尤其有用。[@problem_id:1363660]", "problem": "一个偏序集（poset）是一个序对 $(S, R)$，其中 $S$ 是一个集合，$R$ 是 $S$ 上的一个二元关系，该关系是自反的、反对称的和传递的。偏序集的一个经典例子是正整数集合与“整除”关系。\n\n如果 $S$ 的一个子集 $C$ 中任意两个不同的元素 $x, y \\in C$，$x$ 与 $y$ 相关或 $y$ 与 $x$ 相关（即 $C$ 中所有元素都相互可比），则称 $C$ 为一个链。一个集合 $S$ 的划分是 $S$ 的一族非空、不相交的子集，这些子集的并集是 $S$。\n\n考虑包含数字 $360$ 所有正整数因子的集合 $D$。设该集合由整除关系排序，记作 $|$，其中 $a|b$ 表示“$a$ 整除 $b$”。这构成了一个偏序集 $(D, |)$。\n\n将集合 $D$ 划分所需的最少链数是多少？", "solution": "我们将 $360$ 分解为 $360=2^{3}\\cdot 3^{2}\\cdot 5^{1}$。每个因子 $d\\in D$ 唯一地对应于一个指数向量 $(i,j,k)$，其中 $0\\leq i\\leq 3$，$0\\leq j\\leq 2$，$0\\leq k\\leq 1$，且 $d=2^{i}3^{j}5^{k}$。整除关系对应于这些指数向量上的积序：$(i,j,k)\\leq (i',j',k')$ 当且仅当 $i\\leq i'$，$j\\leq j'$ 且 $k\\leq k'$。因此，$(D,|)$ 同构于链的积 $C_{4}\\times C_{3}\\times C_{2}$。\n\n根据Dilworth定理，一个有限偏序集划分中的最小链数等于其宽度（最大反链的大小）。因此，我们只需计算 $(D,|)$ 中最大反链的大小。\n\n定义一个秩函数 $r(i,j,k)=i+j+k$。对于任意固定的 $t$，层 $L_{t}=\\{(i,j,k):i+j+k=t\\}$ 是一个反链：如果 $(i,j,k)\\leq (i',j',k')$ 且 $i+j+k=i'+j'+k'$，那么和相等的坐标不等式强制 $(i,j,k)=(i',j',k')$。$L_{t}$ 的大小等于生成函数\n$$\n(1+x+x^{2}+x^{3})(1+x+x^{2})(1+x)\n$$\n中 $x^{t}$ 的系数。\n我们分步计算这个乘积。首先，\n$$\n(1+x+x^{2})(1+x)=1+2x+2x^{2}+x^{3}.\n$$\n然后\n\\begin{align*}\n(1+x+x^{2}+x^{3})(1+2x+2x^{2}+x^{3})\n=1(1+2x+2x^{2}+x^{3})\\\\\n\\quad +x(1+2x+2x^{2}+x^{3})\\\\\n\\quad +x^{2}(1+2x+2x^{2}+x^{3})\\\\\n\\quad +x^{3}(1+2x+2x^{2}+x^{3})\\\\\n=1+3x+5x^{2}+6x^{3}+5x^{4}+3x^{5}+x^{6}.\n\\end{align*}\n因此，各层的大小分别为 $1,3,5,6,5,3,1$，最大值为 $6$。因此，$(D,|)$ 的宽度为 $6$，根据Dilworth定理，划分 $D$ 所需的最小链数为 $6$。", "answer": "$$\\boxed{6}$$", "id": "1363660"}, {"introduction": "最后，我们将迪尔沃思定理应用于一个计算机科学领域的实际问题：软件模块的依赖管理。在这个场景中，“并行工作负载”对应于反链，“构建序列”对应于链（或路径）。通过解决这个问题，你将看到抽象的数学概念如何转化为优化编译过程等实际工程挑战的关键指标，这展示了该定理在有向无环图路径覆盖问题中的强大应用。[@problem_id:1481071]", "problem": "在开发一个复杂的科学软件时，构建系统必须管理不同模块之间的依赖关系。如果模块 `A` 的编译开始之前模块 `B` 必须成功编译，那么我们称模块 `A` 对模块 `B` 有直接依赖关系。这种依赖关系是可传递的：如果 `A` 依赖于 `B`，且 `B` 依赖于 `C`，那么 `A` 也被认为依赖于 `C`。系统保证没有循环依赖。\n\n考虑一个有八个模块的系统：`M1, M2, M3, M4, M5, M6, M7, M8`。直接依赖关系如下：\n- `M2` 依赖于 `M1`\n- `M3` 依赖于 `M1`\n- `M4` 依赖于 `M2`\n- `M4` 依赖于 `M3`\n- `M5` 依赖于 `M3`\n- `M6` 依赖于 `M4`\n- `M7` 依赖于 `M5`\n- `M8` 依赖于 `M6`\n- `M8` 依赖于 `M7`\n\n我们对优化构建过程的两个关键指标感兴趣。\n\n首先，“并行工作负载”是一组模块，其中集合内的任何模块都不（直接或间接）依赖于同一集合中的任何其他模块。这代表了一组原则上可以同时编译的模块。设 `P` 为最大可能并行工作负载的大小。\n\n其次，“构建序列”是一个模块序列 `(m_1, m_2, ..., m_k)`，其中每个模块 `m_{i+1}` 都直接依赖于其前一个模块 `m_i`。为了构建整个系统，我们可以将所有八个模块划分为一组这样的构建序列。设 `C` 是划分并因此包含所有八个模块所需的最少构建序列数量。\n\n计算表达式 `8P + 11C` 的值。", "solution": "将给定的依赖数据解释为一个有向无环图，其顶点是模块，边从先决条件指向依赖模块。这些边是：\n$$\nM1 \\to M2,\\quad M1 \\to M3,\\quad M2 \\to M4,\\quad M3 \\to M4,\\quad M3 \\to M5,\\quad M4 \\to M6,\\quad M5 \\to M7,\\quad M6 \\to M8,\\quad M7 \\to M8.\n$$\n定义一个偏序关系 $x \\prec y$ 当且仅当 $y$ 对 $x$ 存在（可能是传递的）依赖关系。并行工作负载是此偏序集中的一个反链；其最大大小即为宽度 $P$。\n\n为了确定 $P$，我们应用迪尔沃思定理。我们构造一个由 2 条链组成的划分，以证明 $P \\leq 2$：\n- 链划分 $V_1$：$\\{M1, M3, M5, M7, M8\\}$ (其中 $M1 \\prec M3 \\prec M5 \\prec M7 \\prec M8$)\n- 链划分 $V_2$：$\\{M2, M4, M6\\}$ (其中 $M2 \\prec M4 \\prec M6$)\n这两个集合不相交，覆盖了所有八个模块，并且每个集合内的元素构成一个链。因此，最小链划分数 $\\chi(P) \\le 2$。根据迪尔沃思定理，$P = w(P) \\le \\chi(P) \\le 2$。\n同时，存在一个大小为 2 的反链，例如 $\\{M2, M3\\}$（两者互不依赖），所以 $P \\geq 2$。因此\n$$\nP = 2.\n$$\n\n接下来，一个构建序列是沿着直接依赖边的一条有向路径。将所有模块划分为最少数量的此类序列，是在此有向无环图中的最小路径覆盖问题；将此最小值记为 $C$。\n根据图论版本的迪尔沃思定理，一个有向无环图的最小路径覆盖数等于 $|V| - m$，其中 $m$ 是关联二分图中的最大匹配数。不过，对于这个小例子，我们可以通过构造来求解。\n\n我们展示一个包含两个序列的路径覆盖：\n- 路径 1: $(M1, M2, M4, M6, M8)$\n- 路径 2: $(M3, M5, M7)$\n这两条路径是顶点不相交的，并且它们的顶点集合并集为所有8个模块。因此，$C \\le 2$。\n不可能有 $C = 1$，因为一条路径无法同时包含 M2 和 M3（它们不可达）。因此\n$$\nC = 2.\n$$\n\n最后，计算\n$$\n8P + 11C = 8 \\cdot 2 + 11 \\cdot 2 = 16 + 22 = 38.\n$$", "answer": "$$\\boxed{38}$$", "id": "1481071"}]}
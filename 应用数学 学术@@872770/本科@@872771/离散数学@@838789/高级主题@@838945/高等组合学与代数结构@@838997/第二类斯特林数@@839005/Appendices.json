{"hands_on_practices": [{"introduction": "第二类斯特林数 $S(n,k)$ 是组合数学中的一个基本构件。在将其应用于更复杂的问题之前，我们必须首先掌握其计算方法。本练习将引导你使用第二类斯特林数最重要的工具之一——递推关系式——来手动计算一个具体值，从而建立对这些数字增长方式的直观感受。[@problem_id:491243]", "problem": "计算第二类斯特林数 $S(5,3)$。\n第二类斯特林数 $S(n,k)$ 表示将一个包含 $n$ 个不同元素的集合划分为 $k$ 个非空无序子集的方法数。", "solution": "对于 $n, k \\ge 1$，我们使用斯特林数递推关系：\n$$ S(n,k) = k\\,S(n-1,k) + S(n-1,k-1), $$\n初始条件为 $S(0,0)=1$，当 $n>0$ 时 $S(n,0)=0$，当 $k>n$ 时 $S(n,k)=0$。\n\n基础计算得出\n$$ S(1,1)=1,\\quad S(2,1)=1\\cdot S(1,1)+S(1,0)=1,\\quad S(2,2)=2\\cdot S(1,2)+S(1,1)=1. $$\n\n然后\n$$ S(3,2)=2\\,S(2,2)+S(2,1)=2\\cdot1+1=3,\\quad S(3,3)=3\\,S(2,3)+S(2,2)=1. $$\n\n接着\n$$ S(4,2)=2\\,S(3,2)+S(3,1)=2\\cdot3+1=7,\\quad S(4,3)=3\\,S(3,3)+S(3,2)=3\\cdot1+3=6. $$\n\n最后\n$$ S(5,3)=3\\,S(4,3)+S(4,2)=3\\cdot6+7=25. $$", "answer": "$$\\boxed{25}$$", "id": "491243"}, {"introduction": "超越纯粹的计算，第二类斯特林数的真正力量在于其组合意义的巧妙应用。本练习展示了如何通过一个简单的思想实验——将两个必须在一起的元素“融合”成一个单一实体——来解决一个带有约束的划分问题。这个方法不仅优雅，而且深刻地揭示了组合结构之间的等价关系，是组合推理中的一个典型范例。[@problem_id:1402123]", "problem": "一位软件架构师正计划将 $n$ 个不同的软件模块部署到 $k$ 个相同且无法区分的数据中心。部署计划必须满足两个条件：\n1. 每个数据中心必须托管至少一个模块。\n2. 由于紧密耦合，两个特定的模块（我们称之为模块 $M_1$ 和模块 $M_2$）必须放置在同一个数据中心。\n\n令 $S(p, q)$ 表示第二类斯特林数，它代表了将一个包含 $p$ 个不同元素的集合划分为 $q$ 个非空、不可区分的子集的方法数。\n\n找出以 $n$、$k$ 和函数 $S$ 表示的不同部署配置的总数的表达式。假设 $n \\ge 3$ 且 $2 \\le k  n$。", "solution": "我们将部署配置解释为将 $n$ 个不同模块的集合划分为 $k$ 个非空的、不可区分的块（数据中心）。根据第二类斯特林数的定义，在没有约束条件的情况下，这个数量是 $S(n,k)$。\n\n施加约束条件，即模块 $M_{1}$ 和 $M_{2}$ 必须在同一个块中。在以下两者之间构造一个双射：\n- 将 $n$ 个模块划分为 $k$ 个非空、不可区分的块，且 $M_{1}$ 和 $M_{2}$ 在同一个块中的划分集合，与\n- 将 $n-1$ 个对象划分为 $k$ 个非空、不可区分的块的划分集合。\n\n定义一个融合对象 $X=\\{M_{1},M_{2}\\}$。令 $U=\\{M_{1},M_{2},M_{3},\\dots,M_{n}\\}$ 和 $U'=\\{X,M_{3},\\dots,M_{n}\\}$，因此 $|U'|=n-1$。给定任何一个将 $U$ 划分为 $k$ 个非空、不可区分的块，且 $M_{1}$ 和 $M_{2}$ 位于同一个块中的划分，用 $X$ 替换 $\\{M_{1},M_{2}\\}$ 所在的块；所有其他块保持不变。这就产生了一个将 $U'$ 划分为 $k$ 个非空、不可区分的块的划分。\n\n反之，给定任何一个将 $U'$ 划分为 $k$ 个非空、不可区分的块的划分，将其中的 $X$ 扩展回 $M_{1}$ 和 $M_{2}$，从而得到一个将 $U$ 划分为 $k$ 个非空、不可区分的块，且 $M_{1}$ 和 $M_{2}$ 在一起的划分。\n\n这两个映射互为逆映射，因此这两个集合是双射关系。因此，有效的部署配置数量等于将 $n-1$ 个不同对象划分为 $k$ 个非空、不可区分的块的数量，即 $S(n-1,k)$。给定的条件 $2 \\le k  n$ 确保了 $k \\le n-1$，因此在可行域内，$S(n-1,k)$ 是良定义且非零的。\n\n因此，不同部署配置的总数为 $S(n-1,k)$。", "answer": "$$\\boxed{S(n-1,k)}$$", "id": "1402123"}, {"introduction": "当组合问题变得更加复杂时，我们常常需要将多个数学工具结合起来。这个高级练习挑战你处理一个“互斥”约束：某些特定元素必须被分到不同的集合中。解决这个问题的关键在于将第二类斯特林数的知识与强大的容斥原理相结合，展示了如何在更广泛的组合问题中灵活应用这些核心概念。[@problem_id:1402109]", "problem": "在组合数学中，集合 $S$ 的一个划分是将其分解为若干非空、两两不相交的子集（称为块）的方式，且这些块的并集为集合 $S$。例如，$\\{\\{1, 3\\}, \\{2\\}, \\{4, 5\\}\\}$ 是将集合 $\\{1, 2, 3, 4, 5\\}$ 划分为三个块的一个划分。\n\n考虑一个包含 $n=7$ 个不同元素的集合 $S$。我们要将这个集合划分为恰好 $k=5$ 个非空块。然而，这个划分过程受一个特定约束的限制：一个预先选定的、包含 $m=3$ 个元素的子集 $M \\subset S$ 的成员必须被放置在不同的块中。也就是说，子集 $M$ 中的任意两个元素都不能出现在划分的同一个块中。\n\n你的任务是计算这种有效划分的总数。", "solution": "设 $S$ 是一个大小为 $n=7$ 的集合，且 $M \\subset S$ 是一个大小为 $m=3$ 的固定子集。我们要求解将 $S$ 划分为恰好 $k=5$ 个非空块，且 $M$ 的元素位于不同块中的划分数量。\n\n令 $\\left\\{ {n \\atop k} \\right\\}$ 表示第二类斯特林数，即一个包含 $n$ 个元素的集合划分为 $k$ 个非空块的划分数。令 $U$ 为将 $S$ 划分为 $5$ 个块的所有划分的集合，因此 $|U|=\\left\\{ {7 \\atop 5} \\right\\}$。\n\n对于 $M$ 中的每一个无序对 $\\{a,b\\}$，定义事件 $E_{ab}$ 为 $a$ 和 $b$ 位于同一个块中。我们想要的是避免所有这类事件的划分。根据容斥原理，\n$$\n|U \\setminus (E_{12} \\cup E_{13} \\cup E_{23})|\n= |U| - \\sum |E_{ab}| + \\sum |E_{ab} \\cap E_{a'b'}| - |E_{12} \\cap E_{13} \\cap E_{23}|.\n$$\n如果 $M$ 中的特定一对必须在一起，我们可以将这对元素看作一个超元素；这将有效元素数量减少到 $7-1=6$，而块的数量仍为 $5$。因此 $|E_{ab}|=\\left\\{ {6 \\atop 5} \\right\\}$。共有 $3$ 个这样的对。\n\n在 $\\{E_{12},E_{13},E_{23}\\}$ 中，任意两个不同对事件的交集都会迫使 $M$ 的所有三个元素都在同一个块中，这相当于将这三个元素看作一个超元素，将有效元素数量减少到 $7-(3-1)=5$，而块的数量为 $5$。因此 $|E_{ab} \\cap E_{a'b'}|=\\left\\{ {5 \\atop 5} \\right\\}$。共有 $3$ 个这样的双重交集。同样地，三重交集也对应于所有三个元素都在一起的情况，所以 $|E_{12} \\cap E_{13} \\cap E_{23}|=\\left\\{ {5 \\atop 5} \\right\\}$。\n\n因此，\n$$\n\\text{所求数量}\n= \\left\\{ {7 \\atop 5} \\right\\} - 3 \\left\\{ {6 \\atop 5} \\right\\} + 3 \\left\\{ {5 \\atop 5} \\right\\} - \\left\\{ {5 \\atop 5} \\right\\}\n= \\left\\{ {7 \\atop 5} \\right\\} - 3 \\left\\{ {6 \\atop 5} \\right\\} + 2 \\left\\{ {5 \\atop 5} \\right\\}.\n$$\n\n我们现在使用递推关系 $\\left\\{ {n \\atop k} \\right\\} = k \\left\\{ {n-1 \\atop k} \\right\\} + \\left\\{ {n-1 \\atop k-1} \\right\\}$ 和基准值 $\\left\\{ {n \\atop 1} \\right\\} = 1$, $\\left\\{ {n \\atop n} \\right\\} = 1$ 来计算这些斯特林数：\n- $\\left\\{ {5 \\atop 5} \\right\\} = 1$。\n- $\\left\\{ {5 \\atop 4} \\right\\} = 4 \\left\\{ {4 \\atop 4} \\right\\} + \\left\\{ {4 \\atop 3} \\right\\} = 4 \\cdot 1 + 6 = 10$。\n- $\\left\\{ {5 \\atop 3} \\right\\} = 3 \\left\\{ {4 \\atop 3} \\right\\} + \\left\\{ {4 \\atop 2} \\right\\} = 3 \\cdot 6 + 7 = 25$。\n- $\\left\\{ {6 \\atop 5} \\right\\} = 5 \\left\\{ {5 \\atop 5} \\right\\} + \\left\\{ {5 \\atop 4} \\right\\} = 5 \\cdot 1 + 10 = 15$。\n- $\\left\\{ {6 \\atop 4} \\right\\} = 4 \\left\\{ {5 \\atop 4} \\right\\} + \\left\\{ {5 \\atop 3} \\right\\} = 4 \\cdot 10 + 25 = 65$。\n- $\\left\\{ {7 \\atop 5} \\right\\} = 5 \\left\\{ {6 \\atop 5} \\right\\} + \\left\\{ {6 \\atop 4} \\right\\} = 5 \\cdot 15 + 65 = 140$。\n\n代入得，\n$$\n\\text{所求数量} = 140 - 3 \\cdot 15 + 2 \\cdot 1 = 140 - 45 + 2 = 97.\n$$\n因此，有 $97$ 种有效的划分。", "answer": "$$\\boxed{97}$$", "id": "1402109"}]}
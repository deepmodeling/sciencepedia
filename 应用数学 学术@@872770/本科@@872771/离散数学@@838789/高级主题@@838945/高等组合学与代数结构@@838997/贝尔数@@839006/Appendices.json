{"hands_on_practices": [{"introduction": "掌握任何数学序列的第一步都是亲手计算它的初始几项。这个练习将让你直接运用贝尔数最基本的递推关系式，通过计算前几个贝尔数，为理解这些数字的含义打下坚实的基础。通过这个练习 [@problem_id:1351268]，你将熟悉贝尔数是如何从 $B_0$ 开始一步步构建起来的。", "problem": "在数据科学领域，一项基本任务是聚类，它涉及将一组数据点分组。理解此概念的一种方式是将一个集合划分为非空、不相交的子集。将一个包含$n$个不同元素的集合进行划分的总方法数由第$n$个贝尔数给出，记为$B_n$。\n\n按照惯例，空集的贝尔数是$B_0 = 1$。对于$n \\ge 0$，贝尔数可以通过以下递推关系生成：\n$$B_{n+1} = \\sum_{k=0}^{n} \\binom{n}{k} B_k$$\n其中$\\binom{n}{k}$是二项式系数“$n$选$k$”，计算公式为$\\frac{n!}{k!(n-k)!}$。\n\n一位研究人员正在分析这些数在小数据集上的数学性质。考虑序列中的前六个贝尔数：$B_0, B_1, B_2, B_3, B_4, B_5$。\n\n以下哪个选项正确列出了在这个特定序列中找到的所有素数？\n\nA. 只有$B_2$是素数。\n\nB. 只有$B_3$是素数。\n\nC. 只有$B_2$和$B_3$是素数。\n\nD. 只有$B_1$、$B_2$和$B_3$是素数。\n\nE. 只有$B_2$、$B_3$和$B_5$是素数。", "solution": "我们使用给定的递推关系和惯例$B_0=1$：\n$$B_{n+1}=\\sum_{k=0}^{n}\\binom{n}{k}B_{k}。$$\n\n依次计算。\n\n对于$n=0$：\n$$B_{1}=\\sum_{k=0}^{0}\\binom{0}{k}B_{k}=\\binom{0}{0}B_{0}=1\\cdot 1=1。$$\n\n对于$n=1$：\n$$B_{2}=\\sum_{k=0}^{1}\\binom{1}{k}B_{k}=\\binom{1}{0}B_{0}+\\binom{1}{1}B_{1}=1\\cdot 1+1\\cdot 1=2。$$\n\n对于$n=2$：\n$$B_{3}=\\sum_{k=0}^{2}\\binom{2}{k}B_{k}=\\binom{2}{0}B_{0}+\\binom{2}{1}B_{1}+\\binom{2}{2}B_{2}=1\\cdot 1+2\\cdot 1+1\\cdot 2=5。$$\n\n对于$n=3$：\n$$B_{4}=\\sum_{k=0}^{3}\\binom{3}{k}B_{k}=\\binom{3}{0}B_{0}+\\binom{3}{1}B_{1}+\\binom{3}{2}B_{2}+\\binom{3}{3}B_{3}=1\\cdot 1+3\\cdot 1+3\\cdot 2+1\\cdot 5=15。$$\n\n对于$n=4$：\n$$B_{5}=\\sum_{k=0}^{4}\\binom{4}{k}B_{k}=\\binom{4}{0}B_{0}+\\binom{4}{1}B_{1}+\\binom{4}{2}B_{2}+\\binom{4}{3}B_{3}+\\binom{4}{4}B_{4}$$\n$$=1\\cdot 1+4\\cdot 1+6\\cdot 2+4\\cdot 5+1\\cdot 15=52。$$\n\n因此，前六个贝尔数是$B_{0}=1$, $B_{1}=1$, $B_{2}=2$, $B_{3}=5$, $B_{4}=15$, $B_{5}=52$。\n\n根据素数的定义（大于$1$且只有两个正因数的整数），$B_{0}=1$和$B_{1}=1$不是素数；$B_{2}=2$是素数；$B_{3}=5$是素数；$B_{4}=15$是合数；$B_{5}=52$是合数。因此，在$B_{0},B_{1},B_{2},B_{3},B_{4},B_{5}$中，只有$B_{2}$和$B_{3}$是素数，这对应于选项C。", "answer": "$$\\boxed{C}$$", "id": "1351268"}, {"introduction": "在学会了如何计算贝尔数之后，我们可以开始探索如何应用它们来解决带有约束条件的组合问题。这个问题 [@problem_id:1351315] 引入了一个常见的情景：强制某些元素必须分在同一组。解决这个问题将揭示一种优雅的组合技巧，即通过“融合”元素来有效减小集合的规模，从而简化问题。", "problem": "在一个研究所，一个新项目需要从 $n$ 位可用科学家中组建团队。团队的组建必须遵循以下规则：每位科学家必须被分配到且仅分配到一个团队，并且每个团队必须至少有一名成员。团队没有编号或名称，这意味着不同团队构成方式之间的唯一区别在于团队本身的组成。\n\n在这 $n$ 位科学家中，有两位，Dr. Alice 和 Dr. Bob，以其高度协同的合作而闻名。项目负责人规定 Dr. Alice 和 Dr. Bob 必须在同一个团队中。\n\n令 $B_k$ 表示第 $k$ 个贝尔数（Bell number），其定义为将一个包含 $k$ 个不同元素的集合划分为非空、无标签子集的总方式数。找出在给定约束条件下组建项目团队的方式数的公式。请用贝尔数表示你的答案。", "solution": "我们将团队的组建建模为对一个大小为 $n$ 的集合 $S$ 的集合划分，其中团队是划分中的块。Dr. Alice 和 Dr. Bob 必须在同一个团队中的约束意味着他们必须位于划分的同一个块中。\n\n定义集合 $S$ 中的不同元素 $a,b$ 来代表 Dr. Alice 和 Dr. Bob。构建一个新集合\n$$S'=(S\\setminus\\{a,b\\})\\cup\\{c\\},$$\n其中 $c$ 是一个新元素，代表合并后的对 $\\{a,b\\}$。那么 $|S'|=n-1$。\n\n在以下两者之间存在一个双射：\n- $S$ 的划分，其中 $a$ 和 $b$ 位于同一个块中，与\n- $S'$ 的划分。\n\n该双射的构造如下。给定 $S$ 的一个划分 $\\Pi$，其中 $a$ 和 $b$ 在同一个块中，将同时包含 $a$ 和 $b$ 的那个块替换为单个元素 $c$，从而得到 $S'$ 的一个划分 $\\Pi'$。反之，给定 $S'$ 的一个划分 $\\Pi'$，将其块中的 $c$ 替换为对 $\\{a,b\\}$，从而得到 $S$ 的一个划分 $\\Pi$，其中 $a$ 和 $b$ 在一起。这两个映射互为逆映射，因此构成一个双射。\n\n因此，符合条件的团队组建方式数等于一个包含 $n-1$ 个元素的集合的划分数，根据定义，这正是贝尔数 $B_{n-1}$：\n$$ \\text{count} = B_{n-1}. $$\n\n作为通过第二类斯特林数 $S(n,k)$（一个 $n$ 元素集合划分为 $k$ 个非空无标签块的划分数）进行的交叉检验：将 $\\{a,b\\}$ 合并为一个元素后，问题变为对 $n-1$ 个元素进行划分。按定义，这有 $B_{n-1}$ 种方法。我们知道 $B_{n-1} = \\sum_{k=1}^{n-1} S(n-1,k)$。这与双射论证的结果一致。", "answer": "$$\\boxed{B_{n-1}}$$", "id": "1351315"}, {"introduction": "在上一个练习的基础上，我们现在来处理一个更复杂的“分离”约束，这在资源分配或调度问题中很常见。这个实践 [@problem_id:1351303] 演示了如何运用强大的容斥原理来解决问题。它将我们关于总划分数 ($B_n$) 和简单约束划分数 ($B_{n-1}$, $B_{n-2}$) 的知识结合起来，最终找到答案。", "problem": "一个研究所正在将其 $n$ 个不同的研究项目组织成一个或多个非空的、不相交的联合体。一个联合体是一组项目，而将项目安排成联合体的特定方式称为一个划分。将一个包含 $n$ 个元素的集合进行划分的总方法数由第 $n$ 个贝尔数给出，记作 $B_n$。例如，$B_3 = 5$ 因为一个包含3个元素 {1, 2, 3} 的集合可以被划分为5种方式：{{1}, {2}, {3}}、{{1, 2}, {3}}、{{1, 3}, {2}}、{{2, 3}, {1}} 和 {{1, 2, 3}}。\n\n在这 $n$ 个项目中，有三个高度敏感的项目：Project Alpha、Project Beta 和 Project Gamma。为维护知识产权边界，该研究所的政策规定，这三个特定项目中的任意两个都不能被置于同一个联合体中。这意味着 Project Alpha、Project Beta 和 Project Gamma 必须各自属于不同的联合体。\n\n假设 $n \\ge 3$，请找出一个计算允许的划分数量的公式。请用贝尔数（例如 $B_n$、$B_{n-1}$ 等）来表示你的答案。", "solution": "我们要求的是一个 $n$ 元素集合的划分数量，其中三个指定的元素（不妨设为 $A$、$B$ 和 $C$）各自位于不同的块中。令 $B_{n}$ 表示第 $n$ 个贝尔数，即一个 $n$ 元素集合的划分总数。\n\n定义事件：\n- $E_{AB}$：$A$ 和 $B$ 在同一个块中。\n- $E_{AC}$：$A$ 和 $C$ 在同一个块中。\n- $E_{BC}$：$B$ 和 $C$ 在同一个块中。\n\n所求的数量是这些事件均未发生的划分数量。根据容斥原理，\n$$ \\text{所求数量} = B_{n} - (|E_{AB}| + |E_{AC}| + |E_{BC}|) + (|E_{AB} \\cap E_{AC}| + |E_{AB} \\cap E_{BC}| + |E_{AC} \\cap E_{BC}|) - |E_{AB} \\cap E_{AC} \\cap E_{BC}|. $$\n\n我们现在用贝尔数来计算每一项：\n- $|E_{AB}|$：将 $A$ 和 $B$ 合并成一个单一元素；划分的数量变为 $B_{n-1}$。根据对称性，有 $|E_{AB}| = |E_{AC}| = |E_{BC}| = B_{n-1}$，所以单个事件的大小之和为 $3 B_{n-1}$。\n- 任何类似 $E_{AB} \\cap E_{AC}$ 的两两交集都意味着 $A$、$B$ 和 $C$ 必须在同一个块中。将这三个元素合并成一个元素，会得到 $B_{n-2}$ 种划分。共有三个这样的两两交集，所以两两交集的大小之和为 $3 B_{n-2}$。\n- 三个事件的交集 $E_{AB} \\cap E_{AC} \\cap E_{BC}$ 是相同的条件（即三者都在一起），因此其大小为 $B_{n-2}$。\n\n因此，至少有一对指定元素在同一个块中的划分数量为\n$$ 3 B_{n-1} - 3 B_{n-2} + B_{n-2} = 3 B_{n-1} - 2 B_{n-2}. $$\n从总数 $B_{n}$ 中减去这个值，就得到了允许的划分数量：\n$$ B_{n} - \\left(3 B_{n-1} - 2 B_{n-2}\\right) = B_{n} - 3 B_{n-1} + 2 B_{n-2}. $$\n此公式对所有 $n \\geq 3$ 成立。", "answer": "$$\\boxed{B_{n} - 3 B_{n-1} + 2 B_{n-2}}$$", "id": "1351303"}]}
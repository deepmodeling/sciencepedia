{"hands_on_practices": [{"introduction": "在我们尝试优化网络中的流量之前，我们必须首先学会如何验证一个给定的流是否“有效”。一个有效的流必须遵守几条基本规则，其中最核心的一条是“流量守恒”原则。这个原则规定，对于网络中除源点和汇点之外的任何中间节点，流入该节点的总流量必须等于流出该节点的总流量——正如物理世界中的物质守恒一样，任何东西都不会凭空出现或消失。这个练习将让你亲手实践如何检验流量守恒属性，这是理解和分析网络流问题的基本功。", "problem": "在一个小型数据中心，设计了一个网络用于将数据包从源服务器 `s` 路由到汇服务器 `t`。该网络由一个顶点集 $V = \\{s, t, A, B, C, D\\}$ 和一组代表数据通路的有向边组成。一位工程师提出了一种流分布，用函数 $f(u, v)$ 表示，该函数表示每秒从顶点 $u$ 流向顶点 $v$ 的数据包数量。\n\n建议的流值如下：\n- $f(s, A) = 10$\n- $f(s, B) = 12$\n- $f(A, C) = 6$\n- $f(A, D) = 4$\n- $f(B, C) = 7$\n- $f(B, D) = 4$\n- $f(C, t) = 13$\n- $f(D, t) = 8$\n\n为了使流有效，它必须在每个非终端顶点（即，除了源服务器 `s` 和汇服务器 `t` 之外的任何顶点）上满足流量守恒属性。该属性规定，对于任何非终端顶点 `v`，流入 `v` 的总流量必须等于从 `v` 流出的总流量。\n\n以下哪个非终端顶点违反了流量守恒属性？\n\nA. 顶点 A\n\nB. 顶点 B\n\nC. 顶点 C\n\nD. 顶点 D", "solution": "要解决这个问题，我们需要检查每个非终端顶点（A、B、C 和 D）的流量守恒属性。顶点 `v` 的流量守恒属性规定，所有入边的流量总和必须等于所有出边的流量总和。我们将流入顶点 `v` 的总流量表示为 `Flow_in(v)`，将总流出流量表示为 `Flow_out(v)`。\n\n**检查顶点 A：**\n为顶点 A 提供流量的边来自源点 `s`。唯一的入边是 `(s, A)`。\n`Flow_in(A) = f(s, A) = 10`\n\n从顶点 A 流出流量的边通向顶点 C 和 D。出边是 `(A, C)` 和 `(A, D)`。\n`Flow_out(A) = f(A, C) + f(A, D) = 6 + 4 = 10`\n\n因为 `Flow_in(A) = 10` 且 `Flow_out(A) = 10`，所以顶点 A 满足流量守恒属性。\n\n**检查顶点 B：**\n为顶点 B 提供流量的边来自源点 `s`。唯一的入边是 `(s, B)`。\n`Flow_in(B) = f(s, B) = 12`\n\n从顶点 B 流出流量的边通向顶点 C 和 D。出边是 `(B, C)` 和 `(B, D)`。\n`Flow_out(B) = f(B, C) + f(B, D) = 7 + 4 = 11`\n\n因为 `Flow_in(B) = 12` 且 `Flow_out(B) = 11`，总流入流量不等于总流出流量 ($12 \\neq 11$)。因此，顶点 B 违反了流量守恒属性。\n\n**检查顶点 C：**\n为顶点 C 提供流量的边来自顶点 A 和 B。入边是 `(A, C)` 和 `(B, C)`。\n`Flow_in(C) = f(A, C) + f(B, C) = 6 + 7 = 13`\n\n从顶点 C 流出流量的边通向汇点 `t`。唯一的出边是 `(C, t)`。\n`Flow_out(C) = f(C, t) = 13`\n\n因为 `Flow_in(C) = 13` 且 `Flow_out(C) = 13`，所以顶点 C 满足流量守恒属性。\n\n**检查顶点 D：**\n为顶点 D 提供流量的边来自顶点 A 和 B。入边是 `(A, D)` 和 `(B, D)`。\n`Flow_in(D) = f(A, D) + f(B, D) = 4 + 4 = 8`\n\n从顶点 D 流出流量的边通向汇点 `t`。唯一的出边是 `(D, t)`。\n`Flow_out(D) = f(D, t) = 8`\n\n因为 `Flow_in(D) = 8` 且 `Flow_out(D) = 8`，所以顶点 D 满足流量守恒属性。\n\n根据这些计算，唯一违反流量守恒属性的非终端顶点是顶点 B。", "answer": "$$\\boxed{B}$$", "id": "1387800"}, {"introduction": "理解了什么是有效流之后，下一步自然就是学习如何改进它以增加总吞吐量。这正是“增广路径”这一概念发挥作用的地方，它为我们提供了一条从源点到汇点可以推送更多流量的通道。这个练习将引导你执行一次流量增广操作，这不仅涉及到沿着路径增加流量，还可能需要“撤销”或重新分配部分现有流量（在概念上表现为沿着一条边反向推流），从而让你掌握 Ford-Fulkerson 等最大流算法的核心运作机制。", "problem": "考虑一个表示流网络的有向图，其顶点集为 $V = \\{s, u, v, w, t\\}$，其中 $s$ 是源点，$t$ 是汇点。该网络的边及其对应的整数容量 $c(x, y)$ 如下所示：\n- $c(s, u) = 15$\n- $c(s, v) = 12$\n- $c(u, w) = 10$\n- $c(u, t) = 8$\n- $c(v, u) = 5$\n- $c(v, w) = 9$\n- $c(w, t) = 20$\n\n该网络上定义了一个已有的整数值流 $f$。流量非零的边如下：\n- $f(s, u) = 10$\n- $f(s, v) = 8$\n- $f(u, w) = 7$\n- $f(u, t) = 3$\n- $f(v, w) = 8$\n- $f(w, t) = 15$\n\n所有其他边的流量均为 $0$。\n\n现在，考虑有向路径 $P = (s, v, w, u, t)$。沿着路径 $P$ 以可能的最大整数值增广当前流 $f$，以产生一个新流 $f'$。\n\n确定新的流量值 $f'(s, v)$、$f'(v, w)$、$f'(u, w)$ 和 $f'(u, t)$。你的答案应该是一个行矩阵，按指定顺序包含这四个值。", "solution": "我们首先要确定增广路径 $P=(s, v, w, u, t)$ 在残量图中的瓶颈容量。该路径由以下几段组成：\n\n- **$s \\to v$ (前向边):** 残量容量 $c_f(s,v) = c(s,v) - f(s,v) = 12 - 8 = 4$。\n- **$v \\to w$ (前向边):** 残量容量 $c_f(v,w) = c(v,w) - f(v,w) = 9 - 8 = 1$。\n- **$w \\to u$ (后向边):** 此路径段对应原图中的边 $(u,w)$。其残量容量等于该边上的现有流量 $c_f(w,u) = f(u,w) = 7$。\n- **$u \\to t$ (前向边):** 残量容量 $c_f(u,t) = c(u,t) - f(u,t) = 8 - 3 = 5$。\n\n增广路径的瓶颈容量 $\\Delta$ 是路径上所有边的最小残量容量：\n$$ \\Delta = \\min\\{c_f(s,v), c_f(v,w), c_f(w,u), c_f(u,t)\\} = \\min\\{4, 1, 7, 5\\} = 1 $$\n\n现在，我们根据瓶颈容量 $\\Delta = 1$ 来更新流量 $f$，得到新流量 $f'$：\n\n- **$s \\to v$ (前向):** $f'(s,v) = f(s,v) + \\Delta = 8 + 1 = 9$。\n- **$v \\to w$ (前向):** $f'(v,w) = f(v,w) + \\Delta = 8 + 1 = 9$。\n- **$u \\to w$ (对应后向边 $w \\to u$):** $f'(u,w) = f(u,w) - \\Delta = 7 - 1 = 6$。\n- **$u \\to t$ (前向):** $f'(u,t) = f(u,t) + \\Delta = 3 + 1 = 4$。\n\n因此，所求的新流量值为 $f'(s, v)=9$, $f'(v, w)=9$, $f'(u, w)=6$, $f'(u, t)=4$。", "answer": "$$\\boxed{\\begin{pmatrix} 9  9  6  4 \\end{pmatrix}}$$", "id": "1387807"}, {"introduction": "寻找网络中的最大流不是靠随机尝试，而是依赖于系统性的算法。Ford-Fulkerson 算法正是解决这一问题的经典方法，其核心思想是不断地在“残量图”中寻找增广路径，并用它们来逐步增加总流量，直到无法再找到任何增广路径为止。这个练习将让你完整地执行 Ford-Fulkerson 算法的一轮迭代：你需要根据当前流量构建残量图，使用广度优先搜索（BFS）找到一条增广路径，确定瓶颈容量，并最终更新总流量值。这是将前面所有概念融会贯通的综合性实践。", "problem": "一家物流公司管理着一个由有向图表示的配送网络。图中的节点包括一个源仓库 S、一个目的地城市 T 和四个中间转运中心 U, V, W, X。这些节点之间的有向链接代表单向道路，每条道路都有一个以每小时货物单位计量的最大容量。\n\n该网络的结构和容量（从节点 $i$ 到节点 $j$ 的链接的容量记为 $c(i, j)$）如下：\n- $c(S, U) = 10$\n- $c(S, V) = 8$\n- $c(U, V) = 4$\n- $c(U, W) = 7$\n- $c(V, W) = 3$\n- $c(V, X) = 6$\n- $c(W, T) = 9$\n- $c(X, T) = 5$\n任何未列出的链接的容量均为零。\n\n一次交通分析揭示了某些链接上的当前流量 $f(i, j)$：\n- $f(S, U) = 6$\n- $f(U, W) = 6$\n- $f(W, T) = 6$\n- $f(S, V) = 4$\n- $f(V, X) = 4$\n- $f(X, T) = 4$\n所有其他链接上的流量均为零。当前从源点 S 到汇点 T 的总流量为每小时 10 个货物单位。\n\n为了提高吞吐量，您必须执行一次 Ford-Fulkerson 算法的迭代。您的任务是在残差图中找到一条从 S 到 T 的增广路径。为确保路径唯一，您必须使用广度优先搜索 (BFS)，并按字母顺序探索任何给定节点的邻居。基于这条特定的增广路径，从 S 到 T 的新总流量值是多少？\n\n请用一个整数表示您的答案，代表每小时的总流量（以货物单位计）。", "solution": "我们为当前流量构建残差图。对于每条容量为 $c(i,j)$、当前流量为 $f(i,j)$ 的有向链接，其正向残差容量为 $r(i,j)=c(i,j)-f(i,j)$，反向残差容量为 $r(j,i)=f(i,j)$。根据给定的数据：\n- 在 $S \\to U$ 上：$r(S,U)=10-6=4$ 且 $r(U,S)=6$。\n- 在 $S \\to V$ 上：$r(S,V)=8-4=4$ 且 $r(V,S)=4$。\n- 在 $U \\to V$ 上：$r(U,V)=4-0=4$ 且 $r(V,U)=0$。\n- 在 $U \\to W$ 上：$r(U,W)=7-6=1$ 且 $r(W,U)=6$。\n- 在 $V \\to W$ 上：$r(V,W)=3-0=3$ 且 $r(W,V)=0$。\n- 在 $V \\to X$ 上：$r(V,X)=6-4=2$ 且 $r(X,V)=4$。\n- 在 $W \\to T$ 上：$r(W,T)=9-6=3$ 且 $r(T,W)=6$。\n- 在 $X \\to T$ 上：$r(X,T)=5-4=1$ 且 $r(T,X)=4$。\n\n我们在残差图中从 $S$ 开始运行一次广度优先搜索 (BFS)，按字母顺序探索每个节点的邻居。从 $S$ 开始，其具有正残差容量的邻居是 $U$ 和 $V$，按 $U$ 然后 $V$ 的顺序入队。接下来处理 $U$，按字母顺序探索其邻居，我们通过 $U \\to W$ 遇到 $W$（因为 $r(U,W)=1>0$），所以我们将 $W$ 入队。接下来处理 $V$，我们通过 $V \\to X$ 将 $X$ 入队（因为 $r(V,X)=2>0$）。接下来处理 $W$，我们通过 $W \\to T$ 发现 $T$（因为 $r(W,T)=3>0$）。因此，BFS 找到的增广路径是 $S \\to U \\to W \\to T$。\n\n这条路径上的瓶颈残差容量是其路径上各边残差容量的最小值：\n$$\\Delta=\\min\\{r(S,U),\\,r(U,W),\\,r(W,T)\\}=\\min\\{4,\\,1,\\,3\\}=1$$\n通过 $\\Delta$ 进行增广会使总流量增加 $1$，所以新的总流量值为 $|f'|=|f|+\\Delta=10+1=11$。", "answer": "$$\\boxed{11}$$", "id": "1387823"}]}
{"hands_on_practices": [{"introduction": "生成函数最直接也最经典的应用之一是求解线性递推关系。通过将序列编码为幂级数，我们可以将一个离散的、递归的问题转化为一个关于函数代数的问题。这个练习将引导你完成这个转化过程：从一个给定的递推关系出发，构造其生成函数，然后通过代数方法求解该函数，最终得到序列的通项公式，从而解决计数问题 [@problem_id:447846]。", "problem": "考虑由递推关系 $a_0 = 1$，$a_1 = 2$ 以及对于 $n \\geq 2$，$a_n = 3a_{n-1} - 2a_{n-2}$ 定义的序列。确定序列的第七项 $a_7$ 的值。证明你的结果满足该递推关系和初始条件。将最终的数值答案用方框表示。", "solution": "写出递推关系和初始条件：\n$$a_0 = 1,\\quad a_1 = 2,\\quad a_n = 3a_{n-1} - 2a_{n-2}\\quad(n\\ge2).$$\n构造特征方程：\n$$r^2 - 3r + 2 = 0$$\n解出根：\n$$r = \\frac{3\\pm\\sqrt{9-8}}{2} = 2,1$$\n通解为：\n$$a_n = A\\,2^n + B$$\n代入 $n=0$ 和 $n=1$：\n$$A + B = 1,\\quad 2A + B = 2$$\n解出常数：\n$$A = 1,\\quad B = 0$$\n通项公式为：\n$$a_n = 2^n$$\n计算 $n=7$ 时的值：\n$$a_7 = 2^7 = 128$$\n验证递推关系：\n$$3a_{6} - 2a_{5} = 3\\cdot2^6 - 2\\cdot2^5 = 128 = a_7$$", "answer": "$$\\boxed{128}$$", "id": "447846"}, {"introduction": "当处理带标签的（即可区分的）对象的计数问题时，普通生成函数就不再适用，我们需要引入指数生成函数（EGF）。指数生成函数在每一项中都包含了阶乘因子，使其能够正确处理可区分对象的排列问题。这个练习 [@problem_id:1369410] 展示了如何利用指数生成函数及其代数性质，优雅地解决一个带有奇偶性约束的分配问题。", "problem": "一位离散数学课程的教授有 $n$ 个不同的家庭作业题目需要批改。教授需要将这 $n$ 个题目全部分配给四位助教 (TA)：Alex、Beth、Charles 和 Diana。分配方案必须满足以下条件：\n1. Alex 必须被分配奇数个题目。\n2. Beth 也必须被分配奇数个题目。\n3. Charles 可以被分配任意数量的题目（包括零个）。\n4. Diana 可以被分配任意数量的题目（包括零个）。\n\n对于任意整数 $n \\ge 2$，求出分配这 $n$ 个题目的总方法数的封闭形式表达式。", "solution": "设每个分配方案由数量 $(n_{A}, n_{B}, n_{C}, n_{D})$ 指定，其中 $n_{A} + n_{B} + n_{C} + n_{D} = n$，$n_{A}$ 是分配给 Alex 的题目数量，以此类推。我们需要 $n_{A}$ 和 $n_{B}$ 是奇数。\n\n使用奇数指示函数 $I_{\\text{odd}}(m) = \\frac{1 - (-1)^{m}}{2}$。所求的数量为\n$$\n\\sum_{\\text{all assignments}} I_{\\text{odd}}(n_{A})\\, I_{\\text{odd}}(n_{B})\n= \\sum_{\\text{all assignments}} \\frac{1}{4}\\bigl(1 - (-1)^{n_{A}} - (-1)^{n_{B}} + (-1)^{n_{A} + n_{B}}\\bigr).\n$$\n交换求和与线性组合的顺序，\n$$\n\\frac{1}{4}\\left[\\sum 1 \\;-\\; \\sum (-1)^{n_{A}} \\;-\\; \\sum (-1)^{n_{B}} \\;+\\; \\sum (-1)^{n_{A}+n_{B}}\\right].\n$$\n每一项和都可以通过利用 $n$ 个不同题目之间的独立性来计算。对于单个题目，其对 $\\sum 1$ 的贡献是 $4$（可以选择 Alex、Beth、Charles、Diana），因此 $\\sum 1 = 4^{n}$。\n\n对于 $\\sum (-1)^{n_{A}}$，如果一个题目分配给 A，则其贡献为 $-1$；如果分配给 B、C 或 D，则贡献为 $+1$。所以单个题目的和是 $-1 + 1 + 1 + 1 = 2$，得到 $\\sum (-1)^{n_{A}} = 2^{n}$。类似地，$\\sum (-1)^{n_{B}} = 2^{n}$。\n\n对于 $\\sum (-1)^{n_{A} + n_{B}}$，如果一个题目分配给 A 或 B，则其贡献为 $-1$；如果分配给 C 或 D，则贡献为 $+1$。所以单个题目的和是 $-1 - 1 + 1 + 1 = 0$，因此对于 $n \\ge 1$（特别是对于 $n \\ge 2$），$\\sum (-1)^{n_{A} + n_{B}} = 0^{n} = 0$。\n\n因此，有效分配方案的总数为\n$$\n\\frac{1}{4}\\bigl(4^{n} - 2^{n} - 2^{n} + 0\\bigr) \\;=\\; \\frac{1}{4}\\bigl(4^{n} - 2^{n+1}\\bigr) \\;=\\; 4^{\\,n-1} - 2^{\\,n-1}.\n$$\n这个封闭形式适用于所有整数 $n \\ge 2$。", "answer": "$$\\boxed{4^{n-1}-2^{n-1}}$$", "id": "1369410"}, {"introduction": "生成函数的威力远不止于求解递推关系或计数简单排列组合，它还能用来描述和分析复杂的递归结构，例如树、图等。在这个高级练习中，你将看到如何将一个组合结构（带约束的二色根平面树）的递归定义直接转化为一组生成函数的方程组。通过求解这个方程组，我们可以精确地枚举满足条件的结构数量，这展示了生成函数在解析组合学中的核心作用 [@problem_id:447736]。", "problem": "考虑一个组合对象族，称为“受约束的双色有根平面树”。有根平面树是一种带有一个特殊根顶点的树，并且其中每个顶点的子节点是线性有序的。在我们这个特定的树族中，每个顶点被染成红色（R）或蓝色（B）。\n\n这个树族由一个结构性约束定义：红色顶点不能有红色的子节点。然而，蓝色顶点可以有任何颜色（R或B）的子节点。\n\n设 $t_n$ 是恰好有 $n$ 个顶点的不同受约束双色有根平面树的数量。通过为相应的普通生成函数建立并求解方程组，确定 $t_5$ 的数值。", "solution": "定义普通生成函数\n$$R(x)=\\sum_{n\\ge1}r_nx^n,\\quad B(x)=\\sum_{n\\ge1}b_nx^n,\\quad T(x)=R(x)+B(x)=\\sum_{n\\ge1}t_nx^n.$$\n一棵红根树有任意（有序）序列的蓝根子树，因此\n$$R(x)=x\\sum_{k\\ge0}B(x)^k=\\frac{x}{1-B(x)}.$$\n一棵蓝根树有任意颜色子树的任意序列，因此\n$$B(x)=x\\sum_{k\\ge0}T(x)^k=\\frac{x}{1-T(x)},\\quad T(x)=R(x)+B(x).$$\n因此，对于 $n\\ge1$，系数满足\n$$r_n=\\sum_{m=0}^{n-1}\\sum_{\\substack{n_1+\\cdots+n_m=n-1\\\\ n_i\\ge1}}b_{n_1}\\cdots b_{n_m},\\quad\nb_n=\\sum_{m=0}^{n-1}\\sum_{\\substack{i_1+\\cdots+i_m=n-1\\\\i_j\\ge1}}t_{i_1}\\cdots t_{i_m},\\quad t_n=r_n+b_n.$$\n递归计算：\nn=1: $r_1=b_1=1$, $t_1=2$.\nn=2: $r_2=b_1=1$, $b_2=t_1=2$, $t_2=3$.\nn=3: $r_3=b_2+b_1^2=2+1=3$, $b_3=t_2+t_1^2=3+4=7$, $t_3=10$.\nn=4: $r_4=b_3+2b_1b_2+b_1^3=7+4+1=12$, $b_4=t_3+2t_1t_2+t_1^3=10+12+8=30$, $t_4=42$.\nn=5: $r_5=b_4+(b_1b_3+b_2^2+b_3b_1)+3b_1^2b_2+b_1^4=30+18+6+1=55,$\n$$b_5=t_4+(t_1t_3+t_2^2+t_3t_1)+3t_1^2t_2+t_1^4=42+49+36+16=143,\\quad t_5=55+143=198.$$", "answer": "$$\\boxed{198}$$", "id": "447736"}]}
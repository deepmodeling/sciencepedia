{"hands_on_practices": [{"introduction": "这个练习介绍了一种在递推关系中最基础的模式。通过分析一个机器人的简单运动，你将学习如何将一个问题分解为更小的、重叠的子问题，从而得出一个经典的递推关系。这项技能是解决计算机科学和数学中各类计数问题的基础。[@problem_id:1395306]", "problem": "一个自主维护机器人在一条一维轨道上运行，轨道上的位置由非负整数标记：0, 1, 2, 3, ... 机器人从位置0开始。机器人的移动仅限于两种只能前进的移动方式：它可以前进1个单位（称为“一步”），或者前进2个单位（称为“一跳”）。一个“遍历序列”是这些移动的一个特定的有序序列。例如，要到达位置3，机器人可以使用序列（一步，一步，一步），或（一步，一跳），或（一跳，一步）。你的任务是确定机器人可以用来恰好到达目标位置 $n=10$ 的不同遍历序列的总数。", "solution": "设 $a_{n}$ 表示使用大小为1（一步）或2（一跳）的移动到达位置 $n$ 的遍历序列的数量。\n\n基础情况：\n- 要停留在位置0，只有一个序列（空序列），所以 $a_{0}=1$。\n- 要到达位置1，只有一个序列（一步），所以 $a_{1}=1$。\n\n递推关系：\n对于 $n \\geq 2$，最后一步要么是一步（从 $n-1$ 过来），要么是一跳（从 $n-2$ 过来）。这两种情况是不相交的，并且涵盖了所有可能性。因此，\n$$\na_{n}=a_{n-1}+a_{n-2}.\n$$\n\n逐个计算直到 $n=10$：\n$$\n\\begin{aligned}\na_{0} &=1,\\\\\na_{1} &=1,\\\\\na_{2} &=a_{1}+a_{0}=1+1=2,\\\\\na_{3} &=a_{2}+a_{1}=2+1=3,\\\\\na_{4} &=a_{3}+a_{2}=3+2=5,\\\\\na_{5} &=a_{4}+a_{3}=5+3=8,\\\\\na_{6} &=a_{5}+a_{4}=8+5=13,\\\\\na_{7} &=a_{6}+a_{5}=13+8=21,\\\\\na_{8} &=a_{7}+a_{6}=21+13=34,\\\\\na_{9} &=a_{8}+a_{7}=34+21=55,\\\\\na_{10} &=a_{9}+a_{8}=55+34=89.\n\\end{aligned}\n$$\n\n作为组合学的交叉检验，也可以对跳跃次数 $j$ 进行求和。如果有 $j$ 次跳跃和 $n-2j$ 次走步，那么总移动次数为 $n-j$，序列的数量就是为这 $j$ 次跳跃选择位置的方法数：\n$$\na_{n}=\\sum_{j=0}^{\\lfloor n/2 \\rfloor} \\binom{n-j}{j}.\n$$\n对于 $n=10$，\n$$\na_{10}=\\sum_{j=0}^{5} \\binom{10-j}{j}\n=\\binom{10}{0}+\\binom{9}{1}+\\binom{8}{2}+\\binom{7}{3}+\\binom{6}{4}+\\binom{5}{5}\n=1+9+28+35+15+1=89,\n$$\n这与递推结果相符。", "answer": "$$\\boxed{89}$$", "id": "1395306"}, {"introduction": "这个问题挑战你追踪序列中的一个特定属性——奇偶性。你将通过考虑每个新字符如何影响'A'字符出现偶数次这一属性来建立递推关系，这是一种在数字通信和算法设计问题中至关重要的技术。这个练习展示了如何建立耦合的递推关系或求解一个非齐次递推关系。[@problem_id:1395316]", "problem": "在一个数字通信系统中，消息被编码为来自字母表 $\\{A, B, C\\}$ 的字符串。一种特殊的纠错协议关注字符 'A' 出现次数的奇偶性。令 $S_n$ 为长度为 $n$ 且包含偶数个 'A' 的有效消息字符串的数量。例如，当 $n=2$ 时，字符串 'BB'、'BC'、'CB'、'CC' 和 'AA' 是有效的，所以 $S_2 = 5$。求 $S_n$ 对于任意非负整数 $n$ 的封闭形式表达式。", "solution": "我们考虑字母表 $\\{A,B,C\\}$ 上长度为 $n$ 的字符串，并计算其中包含偶数个 $A$ 的字符串数量。令 $S_{n}$ 表示此类字符串的数量，令 $T_{n}$ 表示包含奇数个 $A$ 的字符串数量。显然，字符串的总数是 $3^{n}$，所以我们有恒等式\n$$\nS_{n}+T_{n}=3^{n}.\n$$\n对于每个字符串 $s$，定义其权重为 $w(s)=(-1)^{a(s)}$，其中 $a(s)$ 是 $s$ 中 $A$ 出现的次数。那么，如果 $s$ 有偶数个 $A$，则 $w(s)=+1$；如果 $s$ 有奇数个 $A$，则 $w(s)=-1$。对所有字符串求和可得\n$$\n\\sum_{s} w(s) \\;=\\; S_{n}-T_{n}.\n$$\n这个和可以按位置分解：在每个位置上，对选择求和的贡献对于 $A$ 是 $(-1)$，对于 $B$ 是 $+1$，对于 $C$ 是 $+1$，因此每个位置上的和是 $(-1)+1+1=1$。因此，\n$$\n\\sum_{s} w(s) \\;=\\; 1^{n}=1,\n$$\n这意味着\n$$\nS_{n}-T_{n}=1.\n$$\n联立 $S_{n}+T_{n}=3^{n}$ 和 $S_{n}-T_{n}=1$ 并解出 $S_{n}$，得到\n$$\nS_{n}=\\frac{(S_{n}+T_{n})+(S_{n}-T_{n})}{2}=\\frac{3^{n}+1}{2}.\n$$\n\n等价地，我们可以通过追加一个字符来推导一个递推关系：在一个有效的字符串后追加 $B$ 或 $C$ 会保持偶数奇偶性，得到 $2S_{n}$ 个字符串；在一个奇数奇偶性的字符串（有 $3^{n}-S_{n}$ 个）后追加 $A$ 也会得到偶数奇偶性，所以\n$$\nS_{n+1}=2S_{n}+(3^{n}-S_{n})=S_{n}+3^{n},\n$$\n且 $S_{0}=1$。对此求和可得伸缩级数\n$$\nS_{n}=1+\\sum_{k=0}^{n-1}3^{k}=1+\\frac{3^{n}-1}{2}=\\frac{3^{n}+1}{2},\n$$\n这与上面的结果一致。", "answer": "$$\\boxed{\\frac{3^{n}+1}{2}}$$", "id": "1395316"}, {"introduction": "现在我们从线性递推转向非线性递推，后者是分析层次结构的强大工具。通过计算给表达式加括号的方式数量，你将发现卡特兰数——一个出现在从二叉树到堆栈操作等众多计数问题中的著名序列。这个练习阐明了递推如何能捕捉复杂的、嵌套的组合结构。[@problem_id:1395328]", "problem": "考虑一个作用于变量集合 $\\{v_0, v_1, v_2, \\dots\\}$ 上的非结合二元运算符，记为 `*`。一个涉及此运算符的表达式只有在完全括号化的情况下才是良定义的。例如，对于三个变量，表达式 $v_0 * v_1 * v_2$ 是有歧义的，而 $(v_0 * v_1) * v_2$ 和 $v_0 * (v_1 * v_2)$ 是两个不同的、良定义的表达式。\n\n设 $W(n)$ 是一个函数，用于计算对于 $n \\ge 0$，将 $n+1$ 个变量的乘积 $v_0 * v_1 * \\dots * v_n$ 完全括号化的不同方式的数量。\n\n计算 $W(5)$ 的值。", "solution": "一个 $n+1$ 个变量的完全括号化乘积与一个有 $n$ 个内部节点的满二叉树一一对应（每个内部节点代表一次二元运算符的应用，每个叶节点代表一个变量）。设 $W(n)$ 表示此类结构的数量。最外层的运算将序列分为左块和右块；如果左子树有 $k$ 个内部节点，那么右子树有 $n-1-k$ 个内部节点，其中 $k=0,1,\\dots,n-1$。这就得到了卡特兰递推关系，其初始条件为 $W(0)=1$：\n$$\nW(0)=1,\\quad W(n)=\\sum_{k=0}^{n-1} W(k)\\,W(n-1-k)\\quad \\text{for } n\\ge 1.\n$$\n依次计算：\n$$\nW(1)=W(0)W(0)=1,\n$$\n$$\nW(2)=W(0)W(1)+W(1)W(0)=1+1=2,\n$$\n$$\nW(3)=W(0)W(2)+W(1)W(1)+W(2)W(0)=2+1+2=5,\n$$\n$$\nW(4)=W(0)W(3)+W(1)W(2)+W(2)W(1)+W(3)W(0)=5+2+2+5=14,\n$$\n$$\nW(5)=W(0)W(4)+W(1)W(3)+W(2)W(2)+W(3)W(1)+W(4)W(0)=14+5+4+5+14=42.\n$$\n等价地，$W(n)$ 是第 $n$ 个卡特兰数，其通项公式为\n$$\nW(n)=\\frac{1}{n+1}\\binom{2n}{n},\n$$\n所以\n$$\nW(5)=\\frac{1}{6}\\binom{10}{5}=\\frac{1}{6}\\cdot 252=42,\n$$\n这与递推计算的结果一致。", "answer": "$$\\boxed{42}$$", "id": "1395328"}]}
{"hands_on_practices": [{"introduction": "我们从一个基本问题开始，这个问题的核心是构建一个长度为 $n$ 的序列。通过分析如何从一个有效的长度为 $n-1$ 的序列扩展到长度为 $n$ 的序列，我们可以推导出递推关系。这个问题 [@problem_id:1384944] 演示了如何将简单的约束条件直接转化为一阶线性递推关系，这是建模过程中的基础技能。", "problem": "一个偏远的通信哨所使用一种特殊的信号信标来传输数据。该信标可以闪烁三种不同颜色之一：琥珀色、蓝色或青色。为确保信号易于区分并防止传感器疲劳，该系统受一个基本协议的约束：任何两次连续的闪烁不能是相同的颜色。例如，一个琥珀色-蓝色-琥珀色的序列是有效的，但一个琥珀色-琥珀色-蓝色的序列是无效的。\n\n设 $S_n$ 表示长度为 $n$ 的不同有效信号序列的总数，其中 $n$ 是一个正整数。你的任务是找到 $S_n$ 关于 $n$ 的一个封闭形式表达式。", "solution": "我们将每个长度为 $n$ 的信号序列建模为一个有序的 $n$ 元组，其颜色从对应于琥珀色、蓝色和青色的集合 $\\{A,B,C\\}$ 中选择，并受限于任何两个连续的条目都不相等。\n\n对于第一个位置，有 $3$ 种选择，因为三种颜色中的任何一种都可以使用。对于每个后续位置 $i$（其中 $2 \\leq i \\leq n$），位置 $i$ 的颜色必须与位置 $i-1$ 的颜色不同。因为总共有 $3$ 种颜色，而恰好有 $1$ 种被禁止（即前一个位置的颜色），所以对于每个这样的位置，有 $3-1=2$ 种有效选择。\n\n根据乘法法则，有效序列的总数为\n$$\nS_{n} = 3 \\cdot \\underbrace{2 \\cdot 2 \\cdots 2}_{n-1\\ \\text{factors}} = 3 \\cdot 2^{n-1}.\n$$\n\n等价地，也可以通过递推关系来表示。设 $S_{1} = 3$，因为单次闪烁可以是三种颜色中的任何一种。对于 $n \\geq 2$，每个长度为 $n-1$ 的有效序列都可以通过恰好 $2$ 种方式扩展为长度为 $n$ 的有效序列（选择与最后一个颜色不同的任何颜色），从而得到\n$$\nS_{n} = 2 S_{n-1}.\n$$\n解这个一阶线性递推关系得到\n$$\nS_{n} = S_{1} \\cdot 2^{n-1} = 3 \\cdot 2^{n-1}.\n$$\n\n因此，封闭形式表达式为 $S_{n} = 3 \\cdot 2^{n-1}$。", "answer": "$$\\boxed{3 \\cdot 2^{n-1}}$$", "id": "1384944"}, {"introduction": "并非所有问题都能简化为仅依赖于前一项的模型。在更复杂的情况下，一个状态可以从多个不同的先前状态演变而来。这个问题 [@problem_id:1384939] 探讨了如何通过分析达成最终状态前的最后一步来构建递推关系，这是一种强大且广泛适用的分解问题的技巧。", "problem": "在某个电子游戏中，玩家可以通过三种招式得分：‘快速攻击’得1分，‘重击’得2分，‘特殊招式’得5分。玩家的总分是其所用招式序列得分的总和。招式的顺序是重要的。例如，序列（快速攻击，重击）与序列（重击，快速攻击）是不同的，尽管两者的总分都是3分。求玩家可以使用的、总分恰好为10分的不同招式序列的总数。", "solution": "令$a(n)$表示得分为$n$的、由分值为1、2、5的招式组成的不同有序序列的数量。考虑一个序列的最后一个招式，任何总分为$n$的序列都以得分1、2或5的招式结尾。去掉最后一个招式后，分别会留下一个总分为$n-1$、$n-2$或$n-5$的有效序列。由此可得线性递推关系\n$$\na(n)=a(n-1)+a(n-2)+a(n-5),\n$$\n初始条件为$a(0)=1$（空序列）以及当$n0$时$a(n)=0$。\n\n依次计算：\n$$\na(1)=a(0)+a(-1)+a(-4)=1+0+0=1,\n$$\n$$\na(2)=a(1)+a(0)+a(-3)=1+1+0=2,\n$$\n$$\na(3)=a(2)+a(1)+a(-2)=2+1+0=3,\n$$\n$$\na(4)=a(3)+a(2)+a(-1)=3+2+0=5,\n$$\n$$\na(5)=a(4)+a(3)+a(0)=5+3+1=9,\n$$\n$$\na(6)=a(5)+a(4)+a(1)=9+5+1=15,\n$$\n$$\na(7)=a(6)+a(5)+a(2)=15+9+2=26,\n$$\n$$\na(8)=a(7)+a(6)+a(3)=26+15+3=44,\n$$\n$$\na(9)=a(8)+a(7)+a(4)=44+26+5=75,\n$$\n$$\na(10)=a(9)+a(8)+a(5)=75+44+9=128.\n$$\n因此，总分为10的不同有序序列的总数为$128$。", "answer": "$$\\boxed{128}$$", "id": "1384939"}, {"introduction": "有时，直接为我们感兴趣的量建立递推关系很困难。一个更巧妙的方法是引入一个或多个辅助状态，并建立一个递推关系系统。这个问题 [@problem_id:1384954] 就是一个完美的例子，我们将通过定义具有偶数和奇数个零的字符串数量，来解决一个看似棘手的问题，从而展示基于状态的建模方法的优雅和力量。", "problem": "考虑二进制字符串，即由0和1组成的有限序列。在一种特定的数据传输协议中，如果一个二进制字符串包含偶数个0，则被认为是‘格式良好’的。设 $W_n$ 为长度为 $n$ 的格式良好的二进制字符串的数量。例如，当 $n=3$ 时，字符串'111'、'001'、'010'和'100'是格式良好的，因此 $W_3=4$。\n\n求 $W_n$ 关于 $n$ 的封闭形式表达式，其中 $n$ 为任意大于等于1的整数。", "solution": "我们采用一种基于状态的递推方法来解决此问题，这与本章的核心主题更为契合。\n\n设 $E_n$ 为长度为 $n$ 且含有偶数个0的二进制字符串（即格式良好的字符串，$W_n$）的数量。\n设 $O_n$ 为长度为 $n$ 且含有奇数个0的二进制字符串的数量。\n我们的目标是求 $E_n$。\n\n我们可以通过考察长度为 $n-1$ 的字符串如何扩展到长度为 $n$ 的字符串来建立递推关系。\n一个长度为 $n$ 的字符串可以通过在长度为 $n-1$ 的字符串末尾添加一个'0'或'1'来构成。\n\n- 要得到一个长度为 $n$ 的偶数0字符串（$E_n$）：\n    - 可以在一个长度为 $n-1$ 的偶数0字符串（有 $E_{n-1}$ 个）后添加'1'。\n    - 可以在一个长度为 $n-1$ 的奇数0字符串（有 $O_{n-1}$ 个）后添加'0'。\n    因此，$E_n = E_{n-1} + O_{n-1}$。\n\n- 要得到一个长度为 $n$ 的奇数0字符串（$O_n$）：\n    - 可以在一个长度为 $n-1$ 的奇数0字符串（有 $O_{n-1}$ 个）后添加'1'。\n    - 可以在一个长度为 $n-1$ 的偶数0字符串（有 $E_{n-1}$ 个）后添加'0'。\n    因此，$O_n = E_{n-1} + O_{n-1}$。\n\n同时，长度为 $n$ 的二进制字符串总数是 $2^n$。所以，对于任何 $n \\ge 1$，我们有：\n$$\nE_n + O_n = 2^n\n$$\n将这个关系代入第一个递推式，我们得到：\n$$\nE_n = E_{n-1} + O_{n-1} = 2^{n-1}\n$$\n这个结论对所有 $n \\ge 1$ 成立。由于 $W_n = E_n$，所以 $W_n = 2^{n-1}$。\n\n我们可以用初始条件来验证。对于 $n=1$，字符串'1'有偶数个0（0是偶数），'0'有奇数个0。所以 $W_1 = E_1=1$。我们的公式给出 $W_1 = 2^{1-1} = 1$，吻合。\n\n对于 $n=3$ 的例子，我们的公式给出 $W_3 = 2^{3-1} = 4$，这也与问题描述中的例子相符。", "answer": "$$\\boxed{2^{n-1}}$$", "id": "1384954"}]}
{"hands_on_practices": [{"introduction": "概率方法中最强大的工具之一是期望的线性性。该性质允许我们将一个复杂的随机变量分解为多个简单的指示变量之和来计算其期望值，即便这些变量之间不是独立的。这个练习 [@problem_id:1546148] 在随机图的背景下提供了一个具体的例子，让我们能够计算网络中特定结构（即四元环）的期望数量。", "problem": "一个大规模的去中心化点对点网络被建模为一个随机图。该网络由 $n$ 个不同的节点组成，任意一对不同节点之间以概率 $p$ 建立一条直接的双向通信链路（一条边），其中 $0  p  1$。任何链路的存在与否与所有其他链路无关。\n\n在这个网络中，确保数据完整性和路由效率的一个关键结构是“弹性四元组”。一个弹性四元组被定义为一个由恰好四个不同节点和四条特定边组成的子图，这些边将这四个节点连接成一个长度为四的简单环。例如，给定四个节点 A、B、C 和 D，如果链路 (A,B)、(B,C)、(C,D) 和 (D,A) 都存在，那么就存在一个弹性四元组。这四个节点之间任何其他潜在链路（即“对角”链路 (A,C) 和 (B,D)）的存在与否不影响其被归类为弹性四元组。\n\n给定网络参数 $n$ 和 $p$，确定网络中弹性四元组的期望数量。请用 $n$ 和 $p$ 的闭式解析表达式给出你的答案。", "solution": "设 $G$ 是参数为 $n$ 和 $p$ 的 Erdős–Rényi 随机图。定义 $X$ 为 $G$ 中弹性四元组（简单4-环）的数量。\n\n引入指示变量：对于带标签的顶点集 $\\{1,\\dots,n\\}$ 上的每个无向简单4-环 $C$，令 $I_{C}$ 为指示 $C$ 的所有四条边都在 $G$ 中存在的指示变量。于是\n$$\nX=\\sum_{C} I_{C}.\n$$\n根据期望的线性性，\n$$\n\\mathbb{E}[X]=\\sum_{C} \\mathbb{E}[I_{C}]=\\sum_{C} \\mathbb{P}(I_{C}=1).\n$$\n对于任何固定的4-环 $C$，必须恰好有四条特定的边存在；$G$ 中的所有边都是独立的，并以概率 $p$ 存在，而且这四个顶点之间两条可能的对角线的存在与否不影响分类。因此，\n$$\n\\mathbb{P}(I_{C}=1)=p^{4}.\n$$\n\n剩下的任务是计算 $n$ 个带标签顶点上不同无向4-环的数量。首先选择4个顶点；有 $\\binom{n}{4}$ 种方式。在一个固定的含4个带标签顶点的集合上，不同无向4-环的数量为\n$$\n\\frac{(4-1)!}{2}=3,\n$$\n因为有 $(4-1)!$ 种循环排序，并且我们因翻转对称性而除以 $2$。\n\n因此，候选4-环的总数为\n$$\n3\\binom{n}{4}.\n$$\n将计数与每个环的概率相结合，\n$$\n\\mathbb{E}[X]=\\left(3\\binom{n}{4}\\right)p^{4}.\n$$\n等价地，$\\mathbb{E}[X]=\\frac{n(n-1)(n-2)(n-3)}{8}\\,p^{4}$。", "answer": "$$\\boxed{3\\binom{n}{4}p^{4}}$$", "id": "1546148"}, {"introduction": "在学会计算期望值之后，下一步是理解这种计算如何证明某种期望结构的*存在性*。这个练习 [@problem_id:1485029] 旨在澄清一个关于概率方法的常见误解。通过分析其中的逻辑缺陷，我们可以巩固非构造性证明的核心论点：如果“坏”结构的平均数量小于1，那么必然存在至少一个“好”的配置，其中“坏”结构的数量为零。", "problem": "在一个图论课程中，一个学生正在学习关于拉姆齐数以及用于寻找其下界的概率方法。拉姆齐数 $R(k, t)$ 是最小的整数 $n$，使得对 $n$ 个顶点的完全图 $K_n$ 的边进行任意红蓝二染色，都必然包含一个红色的 $K_k$（一个所有边都为红色的 $k$ 阶完全子图）或一个蓝色的 $K_t$。\n\n该学生试图构建一个论证来寻找对角拉姆齐数 $R(k, k)$ 的一个下界。该学生的论证过程如下：\n\n1.  考虑一个有 $n$ 个顶点的完全图 $K_n$。将其 $\\binom{n}{2}$ 条边中的每一条都独立且均匀随机地染成红色或蓝色，每种颜色的概率为 $\\frac{1}{2}$。\n\n2.  令 $S$ 为任意一个包含 $k$ 个顶点的特定子集。由 $S$ 导出的子图是一个单色 $K_k$ 的概率为 $2 \\cdot \\left(\\frac{1}{2}\\right)^{\\binom{k}{2}} = 2^{1-\\binom{k}{2}}$。\n\n3.  令 $X$ 为染色后图中单色 $K_k$ 子图总数的随机变量。根据期望的线性性，单色 $K_k$ 子图的期望数量为 $E[X] = \\binom{n}{k} 2^{1-\\binom{k}{2}}$。\n\n4.  现在，假设我们选择的 $n$ 和 $k$ 满足 $E[X]  1$。\n\n5.  该学生总结道：“单色 $K_k$ 的期望数量是所有可能染色方案下的平均数量。如果这个平均数小于1，那么每一种染色方案都必然导致图中单色 $K_k$ 的数量少于1。由于这类子图的数量必须是整数，这意味着每种染色方案都必须有零个单色 $K_k$。因此，如果 $\\binom{n}{k} 2^{1-\\binom{k}{2}}  1$，那么 $R(k, k)  n$。”\n\n该学生推理中的主要逻辑缺陷是什么，特别是在步骤5的结论中？\n\nA. 期望值 $E[X]$ 的公式不正确；它不应该是子图数量与概率的乘积。\nB. 期望值 $E[X]$ 是所有可能结果的平均值，而 $E[X]  1$ 并不意味着每个结果都必须为零；它只保证至少有一个结果为零。\nC. 该论证无效，因为像子图数量这样的离散随机变量的期望值必须是整数。因此，$E[X]  1$ 这个条件本身就是一个矛盾。\nD. $R(k, k)  n$ 的结论是不正确的。即使存在没有单色 $K_k$ 的染色方案，这也不能提供关于拉姆齐数的信息。\nE. 学生的论证不成立，因为随机变量 $X$ 不服从均匀分布，而这是此类概率论证的必要条件。", "solution": "我们通过构建包含 $K_n$ 的所有 $2^{\\binom{n}{2}}$ 种红蓝边染色的样本空间，并赋予其均匀分布，来为随机染色建模。对于每个包含 $k$ 个顶点的子集 $S$， $S$ 导出单色 $K_k$ 这一事件的概率为 $2 \\cdot \\left(\\frac{1}{2}\\right)^{\\binom{k}{2}} = 2^{1-\\binom{k}{2}}$。令 $X$ 为单色 $K_k$ 子图的数量；根据期望的线性性，\n$$\nE[X] \\;=\\; \\sum_{S \\in \\binom{[n]}{k}} \\Pr(\\text{$S$ is monochromatic}) \\;=\\; \\binom{n}{k}\\, 2^{\\,1-\\binom{k}{2}}.\n$$\n假设 $E[X]  1$。该学生在步骤5中声称，如果单色 $K_k$ 的平均数量小于1，那么每一种染色方案都必须有少于1个这样的子图，即0个。这是一个逻辑错误：一个关于平均值的界限并不对每个结果施加同样的界限。\n\n形式上，由于 $X \\ge 0$，根据马尔可夫不等式可得\n$$\n\\Pr(X \\ge 1) \\le \\frac{E[X]}{1} = E[X]  1,\n$$\n所以\n$$\n\\Pr(X = 0) = 1 - \\Pr(X \\ge 1) \\ge 1 - E[X]  0.\n$$\n因此，至少存在一种染色方案使得 $X=0$，但并非每一种染色方案都必须有 $X=0$。对于该学生的推理模式，一个简单的反例是：一个随机变量以 $\\frac{3}{4}$ 的概率取值为0，以 $\\frac{1}{4}$ 的概率取值为2，其期望值 $E[X] = \\frac{1}{2}  1$，但并非每个结果都为0。\n\n因此，步骤5中的主要缺陷在于将期望（一个平均值）与对所有结果的普遍保证混为一谈。正确的陈述是，$E[X]  1$ 意味着至少存在一种不含单色 $K_k$ 的染色方案，而不是说每一种染色方案都沒有。这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1485029"}, {"introduction": "概率方法通常只保证了某个组合对象的存在性，但并没有告诉我们如何找到它。条件期望方法则为我们架起了一座从非构造性证明到确定性算法的桥梁。这个练习 [@problem_id:1420467] 将引导你逐步完成经典 MAX-CUT 问题的“去随机化”过程，展示如何通过一系列局部最优决策来确定性地构造出满足特定性质的结构。", "problem": "在计算复杂性理论中，概率方法是一种强大的非构造性工具，用于证明具有特定性质的组合对象的存在性。一种后续技术，称为去随机化，旨在将这种存在性证明转化为一个能够构造该对象的确定性算法。\n\n考虑无向图 $G=(V, E)$ 上的最大割（MAX-CUT）问题，该问题要求将顶点集 $V$ 划分为两个不相交的子集 $S_0$ 和 $S_1$，使得一个端点在 $S_0$ 中而另一个端点在 $S_1$ 中的边的数量最大化。这些边的集合被称为一个割。\n\n让我们分析一个特定的图，其顶点集为 $V = \\{v_1, v_2, v_3, v_4\\}$，边集为 $E = \\{\\{v_1, v_2\\}, \\{v_1, v_3\\}, \\{v_2, v_3\\}, \\{v_2, v_4\\}, \\{v_3, v_4\\}\\}$。\n\n一个简单的最大割随机算法将每个顶点独立且均匀随机地分配到 $S_0$ 或 $S_1$。该方法产生的割的期望大小证明了存在一个至少该大小的割。\n\n我们可以使用条件期望法来去随机化这个过程。我们将按照 $v_1, v_2, v_3, v_4$ 的顺序逐个决定每个顶点的划分。对于每个顶点 $v_k$，在给定所有先前顶点 $v_1, \\dots, v_{k-1}$ 的放置方式的条件下，我们确定性地将其放入能使最终割大小的条件期望最大化的划分（$S_0$ 或 $S_1$）中。如果将 $v_k$ 放入 $S_0$ 或 $S_1$ 产生相同的条件期望，则必须将其放入 $S_0$ 作为平局打破规则。\n\n遵循这个确定性过程，以下哪个选项表示划分 $S_0$ 中的最终顶点集？\n\nA. $\\{v_2, v_3\\}$\nB. $\\{v_1, v_4\\}$\nC. $\\{v_2\\}$\nD. $\\{v_1, v_3, v_4\\}$\nE. $\\{v_1, v_2\\}$", "solution": "设 $X$ 表示最终割的大小。根据期望的线性性，\n$$\n\\mathbb{E}[X\\,|\\,\\text{partial assignment}]=\\sum_{\\{u,w\\}\\in E}\\mathbb{E}[I_{\\{u,w\\}}\\,|\\,\\text{partial assignment}],\n$$\n其中 $I_{\\{u,w\\}}$ 是边 $\\{u,w\\}$ 被割的指示变量。对于任意边，如果其两个端点都尚未分配，或只有一个端点被分配，则 $\\mathbb{E}[I_{\\{u,w\\}}\\,|\\,\\cdot]=\\frac{1}{2}$。如果两个端点都已被分配，则当它们被分在不同部分时贡献为 $1$，否则为 $0$。因此，在放置 $v_{k}$ 时，只有从 $v_{k}$ 到已分配邻居的边会影响条件期望；所有其他边都贡献 $\\frac{1}{2}$，与选择无关。\n\n按照 $v_{1},v_{2},v_{3},v_{4}$ 的顺序处理顶点，并使用将平局归于 $S_{0}$ 的规则。\n\n$v_{1}$ 的步骤：没有先前已分配的顶点。两种选择产生的条件期望相同，因此将 $v_{1}\\in S_{0}$。\n\n$v_{2}$ 的步骤：唯一先前已分配的邻居是 $v_{1}$，它们之间有边 $\\{v_{1},v_{2}\\}\\in E$。\n- 如果 $v_{2}\\in S_{0}$，则 $\\{v_{1},v_{2}\\}$ 贡献 $0$，其他 $4$ 条边各贡献 $\\frac{1}{2}$，所以\n$$\n\\mathbb{E}[X\\,|\\,v_{1}\\in S_{0},v_{2}\\in S_{0}]=0+4\\cdot\\frac{1}{2}=2.\n$$\n- 如果 $v_{2}\\in S_{1}$，则 $\\{v_{1},v_{2}\\}$ 贡献 $1$，其他边各贡献 $\\frac{1}{2}$，所以\n$$\n\\mathbb{E}[X\\,|\\,v_{1}\\in S_{0},v_{2}\\in S_{1}]=1+4\\cdot\\frac{1}{2}=3.\n$$\n因此将 $v_{2}\\in S_{1}$。\n\n$v_{3}$ 的步骤：先前已分配的是 $v_{1}\\in S_{0}$ 和 $v_{2}\\in S_{1}$，相关的边为 $\\{v_{1},v_{3}\\},\\{v_{2},v_{3}\\}\\in E$。\n- 如果 $v_{3}\\in S_{0}$，则 $\\{v_{1},v_{3}\\}$ 贡献 $0$，$\\{v_{2},v_{3}\\}$ 贡献 $1$。边 $\\{v_{2},v_{4}\\},\\{v_{3},v_{4}\\}$ 各贡献 $\\frac{1}{2}$，而 $\\{v_{1},v_{2}\\}$ 已固定贡献为 $1$。因此\n$$\n\\mathbb{E}[X\\,|\\,v_{3}\\in S_{0}]=1+0+1+\\frac{1}{2}+\\frac{1}{2}=3.\n$$\n- 如果 $v_{3}\\in S_{1}$，则 $\\{v_{1},v_{3}\\}$ 贡献 $1$，$\\{v_{2},v_{3}\\}$ 贡献 $0$。连接到 $v_{4}$ 的同样两条边各贡献 $\\frac{1}{2}$，并且 $\\{v_{1},v_{2}\\}=1$，所以\n$$\n\\mathbb{E}[X\\,|\\,v_{3}\\in S_{1}]=1+1+0+\\frac{1}{2}+\\frac{1}{2}=3.\n$$\n出现平局，所以将 $v_{3}\\in S_{0}$。\n\n$v_{4}$ 的步骤：先前已分配的是 $v_{1}\\in S_{0}$， $v_{2}\\in S_{1}$， $v_{3}\\in S_{0}$。相关的边是 $\\{v_{2},v_{4}\\},\\{v_{3},v_{4}\\}\\in E$。\n- 如果 $v_{4}\\in S_{0}$，则 $\\{v_{2},v_{4}\\}$ 贡献 $1$，$\\{v_{3},v_{4}\\}$ 贡献 $0$。已经固定的边的贡献是 $\\{v_{1},v_{2}\\}=1$, $\\{v_{1},v_{3}\\}=0$, $\\{v_{2},v_{3}\\}=1$，所以\n$$\n\\mathbb{E}[X\\,|\\,v_{4}\\in S_{0}]=1+0+1+0+1=3.\n$$\n- 如果 $v_{4}\\in S_{1}$，则 $\\{v_{2},v_{4}\\}$ 贡献 $0$，$\\{v_{3},v_{4}\\}$ 贡献 $1$，三条已固定的边的贡献保持不变，得到\n$$\n\\mathbb{E}[X\\,|\\,v_{4}\\in S_{1}]=1+0+1+0+1=3.\n$$\n出现平局，所以将 $v_{4}\\in S_{0}$。\n\n最终的划分是 $S_{0}=\\{v_{1},v_{3},v_{4}\\}$，这对应于选项 D。", "answer": "$$\\boxed{D}$$", "id": "1420467"}]}
{"hands_on_practices": [{"introduction": "我们将从一个基本练习开始，以巩固你对负二项分布的理解。这个问题要求你为一个具体场景计算概率，这个场景是需要进行特定次数的独立试验才能达到预设成功次数的典型例子。掌握这种计算是理解和应用负二项分布的第一步。[@problem_id:1371878]", "problem": "一艘深空探测器任务是将一组关键的科学数据包传回地球。由于宇宙射线干扰，每个数据包成功传输并收到确认的概率是恒定且独立的，为 $p = 0.82$。如果数据包损坏或未收到其确认，则传输被视为失败。探测器的协议规定，它将重复传输数据包，直到确切地收到 $r = 5$ 个成功的确认为止。\n\n计算探测器为完成任务总共需要传输恰好 $k = 9$ 个数据包的概率。将您的答案表示为一个数值，四舍五入到四位有效数字。", "solution": "每次传输尝试都是一个独立的伯努利试验，成功概率为 $p=0.82$，失败概率为 $q=1-p=0.18$。设 $K$ 为观察到恰好 $r=5$ 次成功确认所需的总传输次数。事件 $\\{K=k\\}$ 发生当且仅当在前 $k-1$ 次试验中恰好有 $r-1$ 次成功，并且第 $k$ 次试验是成功的。根据独立性以及在前 $k-1$ 次试验中 $r-1$ 次成功位置的二项式计数，其概率质量函数是负二项分布形式\n$$\n\\Pr(K=k)=\\binom{k-1}{r-1}p^{r}q^{\\,k-r}, \\quad k=r,r+1,\\ldots\n$$\n代入 $r=5$、$k=9$、$p=0.82$ 和 $q=0.18$ 可得\n$$\n\\Pr(K=9)=\\binom{8}{4}(0.82)^{5}(0.18)^{4}.\n$$\n计算每个因子：\n$$\n\\binom{8}{4}=70,\\quad (0.82)^{5}\\approx 0.3707398432,\\quad (0.18)^{4}=0.00104976.\n$$\n相乘得到\n$$\n\\Pr(K=9)=70\\times 0.3707398432\\times 0.00104976\\approx 0.02724315.\n$$\n将此值四舍五入到四位有效数字，得到 $0.02724$。", "answer": "$$\\boxed{0.02724}$$", "id": "1371878"}, {"introduction": "几何分布是负二项分布在成功次数 $r=1$ 时的特例，它拥有一个独特且强大的“无记忆性”。本练习旨在揭示这一反直觉的特性，即过去的失败并不会影响未来成功的概率。理解无记忆性对于简化许多现实世界中的随机过程模型至关重要。[@problem_id:1371840]", "problem": "一位有抱负的弓箭手正在练习射箭。他在任何一次射击中击中靶心的概率是 $p$，其中 $0  p  1$。每次射击都是一个独立事件。这位弓箭手刚刚完成了一个令人沮丧的序列，即连续 $n$ 次未命中。他并未气馁，决定继续射箭，直到首次成功击中靶心为止。设 $T$ 代表该弓箭手射击的总次数，包括最初的 $n$ 次未命中以及之后直到并包括首次击中靶心的所有射击。\n\n求 $T$ 的期望值，用一个关于 $n$ 和 $p$ 的表达式来表示。", "solution": "设 $T$ 为射击的总次数。根据题意，总次数可以分解为两部分：已经发生的 $n$ 次未命中，以及从第 $n+1$ 次射击开始直到首次击中靶心所需的额外射击次数。\n令 $Y$ 为从第 $n+1$ 次射击开始，为获得首次成功所需的额外射击次数。\n因此，总射击次数 $T$ 可以表示为 $T = n + Y$。\n根据期望的线性性质，$T$ 的期望值为：\n$$E[T] = E[n + Y] = E[n] + E[Y] = n + E[Y]$$\n由于每次射击都是独立的，之前 $n$ 次的失败对未来的结果没有影响。这是几何分布的“无记忆性”。因此，随机变量 $Y$ 服从参数为 $p$ 的几何分布。\n一个成功概率为 $p$ 的几何分布（表示首次成功所需的试验次数）的期望值为 $E[Y] = 1/p$。\n将此结果代入，我们得到总射击次数的期望值：\n$$E[T] = n + \\frac{1}{p}$$", "answer": "$$\\boxed{n+\\frac{1}{p}}$$", "id": "1371840"}, {"introduction": "现实世界中的应用常常涉及多种成功途径。这个最终练习将挑战你为一个复杂的通信协议建模，你需要识别出其中基本的事件循环，并运用条件概率来解决一个实际问题。它展示了如何将重复试验的简单思想应用于分析复杂的系统。[@problem_id:1371865]", "problem": "在分布式网络中，一个源节点 S 必须将一个数据包可靠地传输到一个目标节点 D。网络协议按特定顺序使用两个中间中继节点 A 和 B。该协议按如下方式循环操作：\n\n1.  源节点 S 首先尝试将数据包传输到中继节点 A。此传输成功的概率为 $p_A$。\n2.  如果 S 到 A 的传输成功，节点 A 接着尝试将数据包转发到最终目标节点 D。此 A 到 D 的传输成功的概率为 $p_{AD}$。如果此转发尝试失败，则原始数据包被视为丢失，整个协议从源节点 S 的步骤 1 重新开始。\n3.  如果初始的 S 到 A 传输失败，源节点 S 立即尝试将同一数据包传输到中继节点 B。此 S 到 B 的传输成功的概率为 $p_B$。\n4.  如果 S 到 B 的传输成功，节点 B 接着尝试将数据包转发到目标节点 D，成功概率为 $p_{BD}$。如果此转发尝试失败，则数据包被视为丢失，整个协议从步骤 1 重新开始。\n5.  如果 S 到 A 的尝试和随后的 S 到 B 的尝试均失败，协议也从步骤 1 重新开始。\n\n重新启动和重新尝试的过程将一直持续，直到数据包成功传送到目标节点 D。已知数据包最终被成功传送，其成功传输路径为 S-A-D（即通过中继节点 A 传送）的概率是多少？\n\n请用 $p_A$、$p_B$、$p_{AD}$ 和 $p_{BD}$ 表示您的答案，形式为一个单一的封闭形式符号表达式。", "solution": "让我们从源节点 S 开始，分析协议单次循环的结果。一个循环包含一系列尝试，直到协议成功传送数据包或重置到初始状态。我们可以将单次循环的可能结果分为三个互斥事件：\n\n1.  **通过 A 成功 ($S_A$)**：数据包通过路径 S-A-D 成功传送。这发生在 S 到 A 的传输成功（概率为 $p_A$）并且随后的 A 到 D 的传输也成功（概率为 $p_{AD}$）的情况下。在单次循环中，此事件的概率为：\n    $$P(S_A) = p_A p_{AD}$$\n\n2.  **通过 B 成功 ($S_B$)**：数据包通过路径 S-B-D 成功传送。这发生在 S 到 A 的传输失败（概率为 $1-p_A$），S 到 B 的传输成功（概率为 $p_B$），并且随后的 B 到 D 的传输也成功（概率为 $p_{BD}$）的情况下。在单次循环中，此事件的概率为：\n    $$P(S_B) = (1 - p_A) p_B p_{BD}$$\n\n3.  **重新启动 ($R$)**：循环结束但未成功传送，协议必须重新启动。这发生在所有其他情况下。一个循环中所有结果的总概率必须为 1，因此重新启动的概率为 $P(R) = 1 - P(S_A) - P(S_B)$。我们也可以通过对一个循环内所有失败路径的概率求和来直接计算这个值：\n    *   S 到 A 成功，但 A 到 D 失败：$p_A (1-p_{AD})$\n    *   S 到 A 失败，S 到 B 成功，但 B 到 D 失败：$(1-p_A) p_B (1-p_{BD})$\n    *   S 到 A 失败且 S 到 B 失败：$(1-p_A) (1-p_B)$\n    将这些概率相加得到：\n    $P(R) = p_A(1-p_{AD}) + (1-p_A)p_B(1-p_{BD}) + (1-p_A)(1-p_B)$\n    $P(R) = p_A - p_A p_{AD} + (1-p_A)(p_B - p_B p_{BD} + 1 - p_B)$\n    $P(R) = p_A - p_A p_{AD} + (1-p_A)(1 - p_B p_{BD})$\n    $P(R) = p_A - p_A p_{AD} + 1 - p_B p_{BD} - p_A + p_A p_B p_{BD}$\n    $P(R) = 1 - p_A p_{AD} - p_B p_{BD} + p_A p_B p_{BD}$\n    这个表达式可以因式分解为：\n    $P(R) = 1 - p_A p_{AD} - (1-p_A)p_B p_{BD} = 1 - (P(S_A) + P(S_B))$，这证实了我们的逻辑。\n\n整个过程可以看作是一系列独立的伯努利试验，其中每次试验都是一个循环。如果数据包被传送（事件 $S_A \\cup S_B$），则试验为“成功”；如果协议重新启动（事件 $R$），则试验为“失败”。协议将持续进行直到首次成功。\n\n我们需要求的是在成功传送发生的情况下，成功路径是通过 A 的条件概率。设 $D_A$ 为数据包最终通过 A 传送的事件，设 $D$ 为数据包最终被传送（通过 A 或 B）的事件。我们要求的是 $P(D_A|D)$。\n\n根据条件概率的定义，$P(D_A|D) = \\frac{P(D_A \\cap D)}{P(D)}$。由于 $D_A$ 是 $D$ 的一个子集（通过 A 传送是传送的一种形式），所以 $D_A \\cap D = D_A$。因此我们需要计算 $\\frac{P(D_A)}{P(D)}$。\n\n事件 $D_A$ 发生，如果在 $k$ 次重新启动之后（其中 $k \\ge 0$），有一次 $S_A$ 类型的成功。\n$$P(D_A) = P(S_A) + P(R)P(S_A) + P(R)^2 P(S_A) + \\dots$$\n这是一个首项为 $P(S_A)$，公比为 $P(R)$ 的几何级数。其和为：\n$$P(D_A) = \\frac{P(S_A)}{1 - P(R)}$$\n\n类似地，事件 $D$（成功传送）发生，如果在 $k$ 次重新启动之后，有一次 $S_A$ 或 $S_B$ 类型的成功。\n$$P(D) = P(S_A \\cup S_B) + P(R)P(S_A \\cup S_B) + P(R)^2 P(S_A \\cup S_B) + \\dots$$\n由于 $S_A$ 和 $S_B$ 是互斥的，$P(S_A \\cup S_B) = P(S_A) + P(S_B)$。这个几何级数的和为：\n$$P(D) = \\frac{P(S_A) + P(S_B)}{1 - P(R)}$$\n\n现在我们可以计算所求的条件概率：\n$$P(D_A|D) = \\frac{P(D_A)}{P(D)} = \\frac{\\frac{P(S_A)}{1 - P(R)}}{\\frac{P(S_A) + P(S_B)}{1 - P(R)}} = \\frac{P(S_A)}{P(S_A) + P(S_B)}$$\n\n这个结果很直观：在一个基于试验的过程中，假定一个终止事件已经发生，那么它是一个特定类型的终止事件（$S_A$）的概率，等于该事件的概率除以所有可能终止事件（$S_A$ 或 $S_B$）的总概率。\n\n最后，我们代入 $P(S_A)$ 和 $P(S_B)$ 的表达式：\n$$P(D_A|D) = \\frac{p_A p_{AD}}{p_A p_{AD} + (1 - p_A) p_B p_{BD}}$$\n这就是在数据包被成功传送的条件下，它通过节点 A 传送的概率的最终符号表达式。", "answer": "$$\\boxed{\\frac{p_A p_{AD}}{p_A p_{AD} + (1 - p_A) p_B p_{BD}}}$$", "id": "1371865"}]}
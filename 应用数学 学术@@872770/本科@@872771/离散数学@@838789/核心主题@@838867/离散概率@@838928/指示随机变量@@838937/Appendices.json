{"hands_on_practices": [{"introduction": "我们从一个涉及随机集合形成的基本场景开始。这个练习展示了指示器随机变量在其最简单形式下的威力，即我们独立地分析单个元素的属性。通过逐一考虑每个文档的状态，我们可以轻松计算两个集合之间的预期“分歧”，如果试图分析所有可能的集合对，这项任务将变得非常繁琐。", "problem": "一个大型数字档案馆包含一个由 $n$ 个不同文档组成的主集合 $S$。两位研究人员，Alice 和 Bob，正在独立地从该档案馆中整理他们自己的文档集合。对于主集合 $S$ 中的每个文档，Alice 以概率 $p$ 将其包含在她的集合 $A$ 中。独立地，Bob 也以概率 $p$ 将同一个文档包含在他的集合 $B$ 中，其中 $0  p  1$。\n\n这两位研究人员希望量化他们集合之间的“分歧”。他们将此分歧定义为仅存在于其中一位研究人员的集合中而不在另一位研究人员集合中的文档总数。这等价于他们集合的对称差的大小，记为 $|A \\Delta B|$，其中 $A \\Delta B = (A \\setminus B) \\cup (B \\setminus A)$。\n\n请确定此分歧度量的期望值 $E[|A \\Delta B|]$，并用 $n$ 和 $p$ 表示。", "solution": "设 $S$ 为主集合，其大小为 $|S|=n$。对于每个文档 $i \\in S$，定义指示随机变量\n$$\nX_{i}=\\begin{cases}\n1,  \\text{如果文档 } i \\text{ 在 } A \\Delta B \\text{ 中},\\\\\n0,  \\text{否则}。\n\\end{cases}\n$$\n那么总的分歧大小为\n$$\n|A \\Delta B|=\\sum_{i=1}^{n} X_{i}。\n$$\n根据期望的线性性，\n$$\nE[|A \\Delta B|]=\\sum_{i=1}^{n} E[X_{i}]=n \\cdot E[X_{1}],\n$$\n因为所有的 $X_{i}$ 都是同分布的。\n\n对于一个固定的文档 $i$，$X_{i}=1$ 当且仅当它被 Alice 或 Bob 中的恰好一人选中。由于两位研究人员的选择是独立的，且每人选中文档的概率均为 $p$，\n$$\n\\Pr(X_{i}=1)=\\Pr(\\text{Alice 选中}, \\text{ Bob 未选中})+\\Pr(\\text{Alice 未选中}, \\text{ Bob 选中})\n$$\n$$\n= p(1-p)+(1-p)p=2p(1-p)。\n$$\n因此，\n$$\nE[X_{i}]=2p(1-p),\n$$\n所以\n$$\nE[|A \\Delta B|]=n \\cdot 2p(1-p)=2np(1-p)。\n$$", "answer": "$$\\boxed{2np(1-p)}$$", "id": "1376379"}, {"introduction": "在之前概念的基础上，这个问题探讨了一个无放回抽样的场景。这里的一个关键教训是，即使指示器随机变量不是独立的，期望的线性性质依然成立。这个从一组夫妇中挑选委员会成员的问题 [@problem_id:1366010] 清晰地说明了我们如何可以直接将期望相加，而无需担心事件之间的复杂相关性。", "problem": "一个研究团队正在研究群体动力学，招募了 $n$ 对已婚夫妇，共计 $2n$ 名参与者。为了他们的实验，他们需要从这些人中选出 $k$ 个人组成一个工作小组，其中整数 $n$ 和 $k$ 满足 $n \\ge 1$ 和 $2 \\le k \\le 2n$。选举是均匀随机的，这样每个可能的 $k$ 人小组被选中的概率都相等。推导一个表达式，表示被完全包含在工作小组中的已婚夫妇的期望数量（即夫妇双方都被选中）。用 $n$ 和 $k$ 表示你的答案。", "solution": "设 $2n$ 名参与者由 $n$ 对已婚夫妇组成。对每对夫妇 $i \\in \\{1,2,\\dots,n\\}$，定义指示随机变量 $X_{i}$：如果夫妇 $i$ 的两名成员都被选入规模为 $k$ 的工作小组，则 $X_{i}=1$，否则 $X_{i}=0$。被完全包含的夫妇总数为 $X=\\sum_{i=1}^{n} X_{i}$。根据期望的线性性，\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{n} \\mathbb{E}[X_{i}]=\\sum_{i=1}^{n} \\mathbb{P}(X_{i}=1).\n$$\n因为选择是在所有 $\\binom{2n}{k}$ 个大小为 $k$ 的子集上均匀进行的，所以某对固定夫妇 $i$ 的两名成员都被包含的概率等于从其余 $2n-2$ 人中选择剩下的 $k-2$ 个人的方法数除以 $k$-子集的总数：\n$$\n\\mathbb{P}(X_{i}=1)=\\frac{\\binom{2n-2}{k-2}}{\\binom{2n}{k}}.\n$$\n使用二项式系数的阶乘定义来简化这个比率：\n$$\n\\frac{\\binom{2n-2}{k-2}}{\\binom{2n}{k}}=\\frac{\\frac{(2n-2)!}{(k-2)!(2n-k)!}}{\\frac{(2n)!}{k!(2n-k)!}}=\\frac{(2n-2)! \\, k!}{(k-2)! \\, (2n)!}.\n$$\n使用 $(2n)!=(2n)(2n-1)(2n-2)!$ 和 $k!=k(k-1)(k-2)!$ 可得\n$$\n\\frac{(2n-2)! \\, k!}{(k-2)! \\, (2n)!}=\\frac{k(k-1)}{(2n)(2n-1)}.\n$$\n因此，\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{n} \\frac{k(k-1)}{(2n)(2n-1)}=n \\cdot \\frac{k(k-1)}{(2n)(2n-1)}=\\frac{k(k-1)}{2(2n-1)}.\n$$\n这就是被完全包含在工作小组中的已婚夫妇的期望数量。", "answer": "$$\\boxed{\\frac{k(k-1)}{2(2n-1)}}$$", "id": "1366010"}, {"introduction": "我们最后的练习题通过涉及两个独立的随机过程提升了问题的复杂性。我们将确定两个独立的随机排列在相同位置上同时出现“上升”的预期数量。这个练习 [@problem_id:1365957] 将期望的线性性质与概率独立性的概念结合起来，展示了如何计算独立指示器变量乘积的期望。", "problem": "设 $n$ 是一个整数，满足 $n \\ge 2$。考虑从集合 $\\{1, 2, \\dots, n\\}$ 的所有 $n!$ 个排列中独立且均匀地随机选出的两个排列 $\\pi_1$ 和 $\\pi_2$。\n\n在排列 $\\pi$ 中，索引 $i$ 处的一个*上升*（ascent）定义为满足条件 $\\pi(i)  \\pi(i+1)$。我们关心的是两个排列同时出现上升的索引。\n\n设 $N$ 是一个随机变量，表示使得 $\\pi_1(i)  \\pi_1(i+1)$ 和 $\\pi_2(i)  \\pi_2(i+1)$ 同时成立的索引 $i \\in \\{1, 2, \\dots, n-1\\}$ 的总数。\n\n确定 $N$ 的期望值，记为 $E[N]$。你的答案应该是一个关于 $n$ 的闭式解析表达式。", "solution": "设 $N$ 为随机变量，表示 $\\pi_1$ 和 $\\pi_2$ 同时具有上升的索引 $i \\in \\{1, 2, \\dots, n-1\\}$ 的数量。为了求出 $N$ 的期望值，我们可以使用指示随机变量的方法。\n\n对于每个索引 $i \\in \\{1, 2, \\dots, n-1\\}$，我们定义一个指示随机变量 $I_i$ 如下：\n$$\nI_i = \\begin{cases} 1  \\text{如果 } \\pi_1(i)  \\pi_1(i+1) \\text{ 且 } \\pi_2(i)  \\pi_2(i+1) \\\\ 0  \\text{其他情况} \\end{cases}\n$$\n这类索引的总数 $N$ 可以表示为这些指示变量的和：\n$$\nN = \\sum_{i=1}^{n-1} I_i\n$$\n根据期望的线性性，$N$ 的期望值是这些指示变量期望值的和：\n$$\nE[N] = E\\left[\\sum_{i=1}^{n-1} I_i\\right] = \\sum_{i=1}^{n-1} E[I_i]\n$$\n指示随机变量的期望是它所指示事件的概率。因此，$E[I_i] = P(I_i = 1)$。事件 $I_i=1$ 发生当且仅当 $\\pi_1$ 和 $\\pi_2$ 在索引 $i$ 处都有一个上升。设 $A_i$ 是 $\\pi_1$ 在索引 $i$ 处有上升的事件，而 $B_i$ 是 $\\pi_2$ 在索引 $i$ 处有上升的事件。那么：\n$$\nP(I_i = 1) = P(A_i \\cap B_i)\n$$\n题目说明排列 $\\pi_1$ 和 $\\pi_2$ 是独立选择的。这意味着事件 $A_i$（只依赖于 $\\pi_1$）和事件 $B_i$（只依赖于 $\\pi_2$）是独立事件。因此，我们可以写出：\n$$\nP(A_i \\cap B_i) = P(A_i) P(B_i)\n$$\n现在，我们需要计算对于单个随机排列 $\\pi$，在给定索引 $i$ 处有上升的概率。让我们计算 $P(A_i) = P(\\pi_1(i)  \\pi_1(i+1))$。\n对于一个均匀随机选择的排列 $\\pi$，考虑任意两个不同位置（比如 $j$ 和 $k$）上的值。设这些值为 $\\pi(j)$ 和 $\\pi(k)$。根据对称性，对于任意两个不同的值 $u, v \\in \\{1, \\dots, n\\}$，事件 $\\{\\pi(j), \\pi(k)\\} = \\{u, v\\}$ 是等可能的。一旦这两个值被固定，有两种等可能的方式将它们分配到位置 $j$ 和 $k$：要么 $(\\pi(j), \\pi(k)) = (u,v)$，要么 $(\\pi(j), \\pi(k)) = (v,u)$。如果 $u  v$，一种分配导致 $\\pi(j)  \\pi(k)$，另一种导致 $\\pi(j) > \\pi(k)$。因此，概率 $P(\\pi(j)  \\pi(k))$ 必须等于 $P(\\pi(j) > \\pi(k))$。因为 $\\pi$ 是一个排列，所以 $\\pi(j) \\ne \\pi(k)$，所以这只有两种可能性。因此，每种情况的概率都必须是 $1/2$。\n这个论证适用于任何一对不同的位置，包括相邻的位置 $i$ 和 $i+1$。所以，对于任意 $i \\in \\{1, \\dots, n-1\\}$：\n$$\nP(A_i) = P(\\pi_1(i)  \\pi_1(i+1)) = \\frac{1}{2}\n$$\n因为 $\\pi_2$ 与 $\\pi_1$ 来自相同的排列分布，同样的逻辑也适用：\n$$\nP(B_i) = P(\\pi_2(i)  \\pi_2(i+1)) = \\frac{1}{2}\n$$\n现在我们可以计算指示变量 $I_i$ 的期望：\n$$\nE[I_i] = P(I_i=1) = P(A_i)P(B_i) = \\frac{1}{2} \\times \\frac{1}{2} = \\frac{1}{4}\n$$\n注意到对于所有索引 $i \\in \\{1, \\dots, n-1\\}$，这个概率都是相同的。\n最后，我们可以通过对 $n-1$ 个指示变量的期望求和来找到 $N$ 的期望值：\n$$\nE[N] = \\sum_{i=1}^{n-1} E[I_i] = \\sum_{i=1}^{n-1} \\frac{1}{4}\n$$\n由于求和中有 $n-1$ 项，结果是：\n$$\nE[N] = (n-1) \\times \\frac{1}{4} = \\frac{n-1}{4}\n$$", "answer": "$$\\boxed{\\frac{n-1}{4}}$$", "id": "1365957"}]}
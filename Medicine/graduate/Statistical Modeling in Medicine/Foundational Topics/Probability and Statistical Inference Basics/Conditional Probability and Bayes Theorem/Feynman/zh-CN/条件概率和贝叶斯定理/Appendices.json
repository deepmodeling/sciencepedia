{
    "hands_on_practices": [
        {
            "introduction": "在医学研究中，我们经常会遇到直观感觉与数据分析结果相悖的情况。辛普森悖论就是一个典型的例子，它揭示了当我们将不同组的数据合并分析时，可能出现的关联方向逆转现象。这个练习将通过一个关于败血症治疗的观察性研究案例，让你亲手展示如何通过对混杂变量（如疾病严重程度）进行分层分析，来揭示被掩盖的真实治疗效果，从而强调了在处理观察性数据时审慎应用条件概率的重要性 。",
            "id": "4956904",
            "problem": "一家医院对疑似败血症患者进行了一项观察性队列研究，使用序贯器官衰竭评估（SOFA）评分对基线严重程度进行分层。设 $H$ 表示事件“基线严重程度高”，$L$ 表示事件“基线严重程度低”，由预先指定的 SOFA 阈值确定。设 $T$ 表示事件“患者接受了新的辅助治疗”，$C$ 表示事件“患者未接受辅助治疗”。设 $S$ 表示事件“患者存活至 $30$ 天”。该队列包含以下前瞻性记录并使用标准定义判定的计数：\n\n- 在 $H$ 层（高严重程度层）：$900$ 名接受治疗的患者（$T$），其中 $270$ 人存活（$S$），$630$ 人未存活（$\\neg S$）；以及 $100$ 名未接受治疗的患者（$C$），其中 $20$ 人存活，$80$ 人未存活。\n- 在 $L$ 层（低严重程度层）：$100$ 名接受治疗的患者（$T$），其中 $90$ 人存活，$10$ 人未存活；以及 $900$ 名未接受治疗的患者（$C$），其中 $720$ 人存活，$180$ 人未存活。\n\n根据条件概率和全概率定律的基本定义，严谨地阐述辛普森悖论在观察性医疗数据中对协变量进行条件化意味着什么，并解释为什么按严重程度进行的混杂会导致在跨层汇总时出现方向逆转。使用记录的计数为每个分层和汇总队列构建 $2 \\times 2$ 表，并证明该疗法在每个分层内都是有益的（在 $T$ 条件下的存活率高于在 $C$ 条件下的存活率），但在分层汇总后却显得有害。\n\n然后，仅使用概率公理和核心定义，不借助任何快捷公式，推导后验概率 $P(H \\mid S, T)$，并根据所提供的数据计算其数值。将所有概率表示为小数。将最终数值答案四舍五入至四位有效数字。",
            "solution": "该问题要求使用提供的观察数据阐述和论证辛普森悖论，并推导和计算一个特定的后验概率。分析分两部分进行。\n\n首先，我们来讨论辛普森悖论现象。当在数据的各个子组中观察到的关联或趋势在子组合并后方向发生逆转时，就出现了辛普森悖论。在医学统计中，这通常是由一个与暴露（例如，治疗）和结局（例如，存活）都相关的混杂变量引起的。如果不加以考虑，混杂变量会在汇总（粗略）数据中产生虚假的关联。\n\n在这个问题中，暴露是辅助治疗（事件 $T$ 代表治疗组，$C$ 代表对照组），结局是存活（事件 $S$），潜在的混杂变量是疾病的基线严重程度，分为高严重程度（$H$）和低严重程度（$L$）。如果一个变量是暴露和结局的共同原因，或因其他原因与两者都有关联，并且它不在两者之间的因果路径上，那么它就是一个混杂变量。我们必须验证严重程度是否作为混杂变量。\n\n1.  **严重程度与治疗（暴露）之间的关联：** 我们检查病情较重的患者接受治疗的可能性是更高还是更低。在给定高严重程度下接受治疗的概率是 $P(T \\mid H)$，在给定低严重程度下是 $P(T \\mid L)$。\n    根据数据，高严重程度患者总数为 $N(H) = N(H, T) + N(H, C) = 900 + 100 = 1000$。接受治疗的高严重程度患者人数为 $N(H, T) = 900$。\n    因此，$P(T \\mid H) = \\frac{N(H, T)}{N(H)} = \\frac{900}{1000} = 0.9$。\n    低严重程度患者总数为 $N(L) = N(L, T) + N(L, C) = 100 + 900 = 1000$。接受治疗的低严重程度患者人数为 $N(L, T) = 100$。\n    因此，$P(T \\mid L) = \\frac{N(L, T)}{N(L)} = \\frac{100}{1000} = 0.1$。\n    由于 $P(T \\mid H) = 0.9$ 与 $P(T \\mid L) = 0.1$ 有显著差异，因此严重程度与治疗分配之间存在很强的关联。高严重程度的患者更有可能接受新疗法。这是“适应症混杂”的一个典型例子。\n\n2.  **严重程度与存活（结局）之间的关联：** 我们检查严重程度是否独立地与存活结局相关。我们可以通过比较两个分层中的总存活率 $P(S \\mid H)$ 和 $P(S \\mid L)$ 来评估这一点。\n    高严重程度分层中的存活者人数为 $N(S, H) = N(S, H, T) + N(S, H, C) = 270 + 20 = 290$。\n    因此，$P(S \\mid H) = \\frac{N(S, H)}{N(H)} = \\frac{290}{1000} = 0.29$。\n    低严重程度分层中的存活者人数为 $N(S, L) = N(S, L, T) + N(S, L, C) = 90 + 720 = 810$。\n    因此，$P(S \\mid L) = \\frac{N(S, L)}{N(L)} = \\frac{810}{1000} = 0.81$。\n    由于 $P(S \\mid H) = 0.29$ 远低于 $P(S \\mid L) = 0.81$，基线严重程度是存活的强预测因子。\n\n因为严重程度与治疗选择和存活率都有关，所以它是一个混杂因素。按严重程度混杂可能导致方向逆转，因为治疗组与未治疗组的汇总比较是不公平的。治疗组中不成比例地由高严重程度的患者组成（$1000$ 名治疗患者中有 $900$ 名是高严重程度），他们的预后较差；而未治疗组中不成比例地由低严重程度的患者组成（$1000$ 名未治疗患者中有 $900$ 名是低严重程度），他们的预后较好。这种构成上的不平衡使粗略分析产生偏倚，可能掩盖了真实的治疗效益，甚至逆转其表观方向。\n\n为了证明这一点，我们计算分层特异性和汇总效应。\n\n**分层特异性分析：**\n\n对于高严重程度（$H$）分层，其 $2 \\times 2$ 表如下：\n\\begin{center}\n\\begin{tabular}{|l|c|c|c|}\n\\hline\n\\textbf{高严重程度}  存活 ($S$)  未存活 ($\\neg S$)  总计 \\\\\n\\hline\n治疗组 ($T$)  $270$  $630$  $900$ \\\\\n对照组 ($C$)  $20$  $80$  $100$ \\\\\n\\hline\n总计  $290$  $710$  $1000$ \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n在该分层中，给定治疗条件下的存活条件概率为 $P(S \\mid H, T) = \\frac{N(S, H, T)}{N(H, T)} = \\frac{270}{900} = 0.3$。\n给定无治疗（对照组）条件下的存活条件概率为 $P(S \\mid H, C) = \\frac{N(S, H, C)}{N(H, C)} = \\frac{20}{100} = 0.2$。\n由于 $P(S \\mid H, T) > P(S \\mid H, C)$ ($0.3 > 0.2$)，该疗法对高严重程度患者似乎是有益的。\n\n对于低严重程度（$L$）分层，其 $2 \\times 2$ 表如下：\n\\begin{center}\n\\begin{tabular}{|l|c|c|c|}\n\\hline\n\\textbf{低严重程度}  存活 ($S$)  未存活 ($\\neg S$)  总计 \\\\\n\\hline\n治疗组 ($T$)  $90$  $10$  $100$ \\\\\n对照组 ($C$)  $720$  $180$  $900$ \\\\\n\\hline\n总计  $810$  $190$  $1000$ \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n在该分层中，给定治疗条件下的存活条件概率为 $P(S \\mid L, T) = \\frac{N(S, L, T)}{N(L, T)} = \\frac{90}{100} = 0.9$。\n给定无治疗（对照组）条件下的存活条件概率为 $P(S \\mid L, C) = \\frac{N(S, L, C)}{N(L, C)} = \\frac{720}{900} = 0.8$。\n由于 $P(S \\mid L, T) > P(S \\mid L, C)$ ($0.9 > 0.8$)，该疗法对低严重程度患者似乎也是有益的。\n\n**汇总（粗略）分析：**\n\n我们将两个分层的计数合并，得到汇总的 $2 \\times 2$ 表：\n总治疗患者数：$N(T) = 900+100=1000$。总治疗存活者数：$N(S, T) = 270+90=360$。\n总对照组患者数：$N(C) = 100+900=1000$。总对照组存活者数：$N(S, C) = 20+720=740$。\n汇总表如下：\n\\begin{center}\n\\begin{tabular}{|l|c|c|c|}\n\\hline\n\\textbf{汇总数据}  存活 ($S$)  未存活 ($\\neg S$)  总计 \\\\\n\\hline\n治疗组 ($T$)  $360$  $640$  $1000$ \\\\\n对照组 ($C$)  $740$  $260$  $1000$ \\\\\n\\hline\n总计  $1100$  $900$  $2000$ \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n给定治疗条件下的总存活概率为 $P(S \\mid T) = \\frac{N(S, T)}{N(T)} = \\frac{360}{1000} = 0.36$。\n给定无治疗条件下的总存活概率为 $P(S \\mid C) = \\frac{N(S, C)}{N(C)} = \\frac{740}{1000} = 0.74$。\n在汇总数据中，$P(S \\mid T)  P(S \\mid C)$（$0.36  0.74$），这表明该疗法是有害的。这一结论与分层分析（$0.3 > 0.2$ 和 $0.9 > 0.8$）的结论相反，正是辛普森悖论。控制了混杂因素的分层分析，提供了对疗法效果的正确评估。\n\n现在，我们进行问题的第二部分：推导并计算后验概率 $P(H \\mid S, T)$。这是在已知患者存活并接受了治疗的情况下，其基线严重程度为高的概率。\n\n我们从条件概率的核心定义开始，即对于任意两个事件 $A$ 和 $B$，$P(B)>0$ 时，有 $P(A \\mid B) = \\frac{P(A \\cap B)}{P(B)}$。\n设我们感兴趣的事件为 $A=H$，条件事件为 $B=(S \\cap T)$。我们要求解 $P(H \\mid S \\cap T)$。\n应用该定义：\n$$ P(H \\mid S, T) = \\frac{P(H \\cap S \\cap T)}{P(S \\cap T)} $$\n这些概率可以从提供的计数中估算，其中 $P(\\text{事件}) = \\frac{N(\\text{事件})}{N(\\text{总数})}$。设 $N_{total}$ 为队列中的患者总数，$N_{total}=2000$。\n分子是 $P(H \\cap S \\cap T) = \\frac{N(H, S, T)}{N_{total}}$。\n分母 $P(S \\cap T)$ 是患者存活且接受治疗的联合事件的概率。该事件可以被互斥且穷尽的严重程度分层 $\\{H, L\\}$ 分割。使用全概率定律：\n$$ P(S \\cap T) = P((S \\cap T) \\cap H) + P((S \\cap T) \\cap L) = P(H \\cap S \\cap T) + P(L \\cap S \\cap T) $$\n这可以用计数来表示：\n$$ P(S \\cap T) = \\frac{N(H, S, T)}{N_{total}} + \\frac{N(L, S, T)}{N_{total}} = \\frac{N(H, S, T) + N(L, S, T)}{N_{total}} $$\n将这些表达式代回 $P(H \\mid S, T)$ 的公式中：\n$$ P(H \\mid S, T) = \\frac{\\frac{N(H, S, T)}{N_{total}}}{\\frac{N(H, S, T) + N(L, S, T)}{N_{total}}} $$\n$N_{total}$ 项相互抵消，得到一个直接用计数表示的公式：\n$$ P(H \\mid S, T) = \\frac{N(H, S, T)}{N(H, S, T) + N(L, S, T)} $$\n此推导仅使用了条件概率的定义和全概率定律，符合题目要求。\n\n现在，我们使用提供的计数来计算数值：\n根据问题陈述中关于 $H$ 分层的数据：$N(H, S, T) = 270$。\n根据问题陈述中关于 $L$ 分层的数据：$N(L, S, T) = 90$。\n代入这些值：\n$$ P(H \\mid S, T) = \\frac{270}{270 + 90} = \\frac{270}{360} $$\n化简分数：\n$$ P(H \\mid S, T) = \\frac{27}{36} = \\frac{3 \\times 9}{4 \\times 9} = \\frac{3}{4} $$\n作为小数，这是 $0.75$。问题要求答案表示为四位有效数字。",
            "answer": "$$\\boxed{0.7500}$$"
        },
        {
            "introduction": "贝叶斯定理不仅是理解条件概率的理论基石，更是从数据中学习和更新信念的强大工具。在医学实践中，我们常常需要根据新的临床证据来更新我们对某个参数（如感染率）的估计。本练习将引导你完成一个完整的贝叶斯推断过程：为一个二项分布的似然函数选择一个共轭的贝塔先验分布，并推导出参数的后验分布，最终计算出后验均值 。",
            "id": "5220970",
            "problem": "一家医院部署了一个人工智能（AI）临床决策支持模型，用于从可穿戴设备的体温数据流中标记早期术后感染。在对一个由 $n=157$ 名患者组成的新手术队列进行的24小时监测窗口期内，该系统标记了 $x=41$ 个病例，这些病例后来通过微生物学金标准测试被确认为真实感染。为了更新感染标记模型的参数 $\\theta$（该队列中每位受监测患者的真实感染概率），一位贝叶斯实践者指定了一个反映可信历史数据的贝塔先验分布：$\\theta \\sim \\text{Beta}(\\alpha,\\beta)$，其中 $\\alpha=2.3$ 且 $\\beta=5.7$。该实践者将队列数据建模为 $X \\mid \\theta \\sim \\text{Binomial}(n,\\theta)$。\n\n从概率公理和条件概率的定义出发，通过应用贝叶斯定理，使用二项分布模型的标准概率质量函数和贝塔先验分布的标准概率密度函数，推导出后验分布 $p(\\theta \\mid x)$ 的闭式解。然后，推导出后验均值 $\\mathbb{E}[\\theta \\mid x]$ 的闭式解析表达式，并计算其在给定参数下的数值。\n\n将最终数值答案表示为小数，并四舍五入至四位有效数字。无需单位。",
            "solution": "我们首先陈述用于连续参数 $\\theta$ 和离散数据 $x$ 的贝叶斯定理。该定理源于条件概率的定义，$P(A \\mid B) = \\frac{P(A \\cap B)}{P(B)}$。对于连续和离散随机变量，这种关系用概率密度函数（PDF）和概率质量函数（PMF）表示为：\n$$p(\\theta \\mid x) = \\frac{p(x \\mid \\theta) p(\\theta)}{p(x)}$$\n此处，$p(\\theta \\mid x)$ 是给定数据 $x$ 时 $\\theta$ 的后验概率密度函数，$p(x \\mid \\theta)$ 是给定参数 $\\theta$ 时观察到数据 $x$ 的似然，$p(\\theta)$ 是 $\\theta$ 的先验概率密度函数，而 $p(x)$ 是数据的边际似然（也称为证据），它充当归一化常数。边际似然由积分 $p(x) = \\int p(x \\mid \\theta) p(\\theta) \\, d\\theta$ 给出。\n\n我们也可以用比例关系来表示贝叶斯定理，因为 $p(x)$ 相对于 $\\theta$ 是一个常数：\n$$p(\\theta \\mid x) \\propto p(x \\mid \\theta) p(\\theta)$$\n\n问题指定了似然函数和先验分布。\n似然函数 $p(x \\mid \\theta)$ 由二项分布 $\\text{Binomial}(n, \\theta)$ 的概率质量函数（PMF）给出：\n$$p(x \\mid \\theta) = \\binom{n}{x} \\theta^x (1-\\theta)^{n-x}$$\n对于 $x \\in \\{0, 1, \\dots, n\\}$。\n\n先验分布 $p(\\theta)$ 由贝塔分布 $\\text{Beta}(\\alpha, \\beta)$ 的概率密度函数（PDF）给出：\n$$p(\\theta) = \\frac{\\theta^{\\alpha-1} (1-\\theta)^{\\beta-1}}{B(\\alpha, \\beta)}$$\n对于 $\\theta \\in [0, 1]$。此处，$B(\\alpha, \\beta)$ 是贝塔函数，作为先验分布的归一化常数，定义为 $B(\\alpha, \\beta) = \\frac{\\Gamma(\\alpha)\\Gamma(\\beta)}{\\Gamma(\\alpha+\\beta)}$。\n\n现在我们将似然函数和先验分布结合起来，求后验分布：\n$$p(\\theta \\mid x) \\propto p(x \\mid \\theta) p(\\theta)$$\n$$p(\\theta \\mid x) \\propto \\left[ \\binom{n}{x} \\theta^x (1-\\theta)^{n-x} \\right] \\left[ \\frac{\\theta^{\\alpha-1} (1-\\theta)^{\\beta-1}}{B(\\alpha, \\beta)} \\right]$$\n\n由于我们关心的是后验分布关于 $\\theta$ 的函数形式，我们可以省略所有相对于 $\\theta$ 为常数的项。这些项包括 $\\binom{n}{x}$ 和 $B(\\alpha, \\beta)$。\n$$p(\\theta \\mid x) \\propto \\theta^x (1-\\theta)^{n-x} \\cdot \\theta^{\\alpha-1} (1-\\theta)^{\\beta-1}$$\n合并 $\\theta$ 和 $(1-\\theta)$ 的幂：\n$$p(\\theta \\mid x) \\propto \\theta^{x+\\alpha-1} (1-\\theta)^{n-x+\\beta-1}$$\n\n这个函数形式是贝塔分布的核。我们可以将其识别为一个具有更新参数的贝塔概率密度函数。设后验参数为 $\\alpha' = \\alpha+x$ 和 $\\beta' = \\beta+n-x$。因此，后验分布为：\n$$\\theta \\mid x \\sim \\text{Beta}(\\alpha+x, \\beta+n-x)$$\n后验概率密度函数的闭式表达式为：\n$$p(\\theta \\mid x) = \\frac{\\theta^{(\\alpha+x)-1} (1-\\theta)^{(\\beta+n-x)-1}}{B(\\alpha+x, \\beta+n-x)}$$\n这展示了贝塔先验和二项似然之间的共轭性。\n\n接下来，我们必须推导后验均值 $\\mathbb{E}[\\theta \\mid x]$。服从贝塔分布 $\\text{Beta}(a, b)$ 的随机变量 $Y$ 的期望值由公式 $\\mathbb{E}[Y] = \\frac{a}{a+b}$ 给出。\n将此公式应用于我们的后验分布 $\\theta \\mid x \\sim \\text{Beta}(\\alpha', \\beta')$，我们得到：\n$$\\mathbb{E}[\\theta \\mid x] = \\frac{\\alpha'}{\\alpha'+\\beta'}$$\n代入 $\\alpha'$ 和 $\\beta'$ 的表达式：\n$$\\mathbb{E}[\\theta \\mid x] = \\frac{\\alpha+x}{(\\alpha+x) + (\\beta+n-x)}$$\n化简分母，我们得到后验均值的闭式解析表达式：\n$$\\mathbb{E}[\\theta \\mid x] = \\frac{\\alpha+x}{\\alpha+\\beta+n}$$\n\n最后，我们计算给定参数的数值：$n=157$，$x=41$，$\\alpha=2.3$，以及 $\\beta=5.7$。\n将这些值代入后验均值的表达式：\n$$\\mathbb{E}[\\theta \\mid x] = \\frac{2.3+41}{2.3+5.7+157}$$\n$$\\mathbb{E}[\\theta \\mid x] = \\frac{43.3}{8.0+157}$$\n$$\\mathbb{E}[\\theta \\mid x] = \\frac{43.3}{165.0}$$\n$$ \\mathbb{E}[\\theta \\mid x] \\approx 0.26242424... $$\n题目要求答案四舍五入至四位有效数字。前四位有效数字是 $2$、$6$、$2$ 和 $4$。第五位数字是 $2$，小于 $5$，所以我们向下舍入（即，不改变第四位数字）。\n数值为 $0.2624$。",
            "answer": "$$\\boxed{0.2624}$$"
        },
        {
            "introduction": "除了辛普森悖论所揭示的混杂偏倚，统计悖论还可能源于研究设计本身，尤其是选择偏倚。本练习将通过一个医院入院数据的假想场景，来阐明一种被称为伯克森悖论的现象 。你将计算并比较在普通人群中和仅在入院患者中，风险因素与疾病之间的关联。通过这个练习，你将深刻理解为何在特定子集（如入院患者）上进行条件化，有时会人为地制造出两个本不相关的变量之间的虚假关联。",
            "id": "4956993",
            "problem": "一项基于医院的研究正在调查城市人口中二元风险因素 $R \\in \\{0,1\\}$ 与二元疾病 $D \\in \\{0,1\\}$ 之间的关联，同时认识到可用数据集仅包含入院患者。设 $A \\in \\{0,1\\}$ 表示住院情况。假设在源人群中以下情况为真：\n- 疾病患病率为 $P(D=1)=0.10$，风险因素暴露率为 $P(R=1)=0.30$。\n- 在人群中，风险因素与疾病是独立的，即 $P(R=1,D=1)=P(R=1)P(D=1)$。\n- 住院受 $R$ 和 $D$ 的影响，其机制如下：\n  - $P(A=1 \\mid R=1,D=1)=0.50$，\n  - $P(A=1 \\mid R=1,D=0)=0.10$，\n  - $P(A=1 \\mid R=0,D=1)=0.20$，\n  - $P(A=1 \\mid R=0,D=0)=0.01$。\n\n仅使用条件概率、贝叶斯定理以及比值和比值比的定义，且不使用任何未从这些定义推导出的现成公式，完成以下任务：\n1. 计算当忽略住院情况时，比较 $R=1$ 与 $R=0$ 两组的疾病比值的总体比值比。\n2. 计算在入院（$A=1$）的条件下，比较 $R=1$ 与 $R=0$ 两组的疾病比值的比值比。\n\n按顺序（总体比值比，入院患者比值比）报告你的两个数值答案，保留四位有效数字。",
            "solution": "解答按要求分为两部分。首先，我们计算总体比值比，其次，我们计算以住院为条件的比值比。\n\n事件 $E$ 的比值定义为 $\\text{Odds}(E) = \\frac{P(E)}{1-P(E)} = \\frac{P(E)}{P(E^c)}$。\n比较暴露组（$R=1$）与非暴露组（$R=0$）的疾病 $D$ 的比值比（$OR$）定义为：\n$$OR = \\frac{\\text{Odds}(D=1 \\mid R=1)}{\\text{Odds}(D=1 \\mid R=0)} = \\frac{P(D=1 \\mid R=1) / P(D=0 \\mid R=1)}{P(D=1 \\mid R=0) / P(D=0 \\mid R=0)}$$\n\n**第1部分：总体比值比 ($OR_{\\text{pop}}$)**\n\n在总人群中，风险因素 $R$ 和疾病 $D$ 被陈述为独立的。独立性的一个直接后果是，给定 $R$ 时 $D$ 的条件概率等于 $D$ 的边际概率。\n$$P(D=1 \\mid R=1) = P(D=1) = 0.10$$\n$$P(D=1 \\mid R=0) = P(D=1) = 0.10$$\n由此，我们可以求出各组不患病的概率：\n$$P(D=0 \\mid R=1) = 1 - P(D=1 \\mid R=1) = 1 - 0.10 = 0.90$$\n$$P(D=0 \\mid R=0) = 1 - P(D=1 \\mid R=0) = 1 - 0.10 = 0.90$$\n现在我们计算各组的比值：\n$$\\text{Odds}(D=1 \\mid R=1) = \\frac{P(D=1 \\mid R=1)}{P(D=0 \\mid R=1)} = \\frac{0.10}{0.90} = \\frac{1}{9}$$\n$$\\text{Odds}(D=1 \\mid R=0) = \\frac{P(D=1 \\mid R=0)}{P(D=0 \\mid R=0)} = \\frac{0.10}{0.90} = \\frac{1}{9}$$\n总体比值比是这两个比值的比率：\n$$OR_{\\text{pop}} = \\frac{1/9}{1/9} = 1$$\n比值比为 $1$ 证实了在总人群中风险因素和疾病之间没有关联，这是在独立性假设下预期的结果。\n\n**第2部分：入院患者的比值比 ($OR_{A=1}$)**\n\n我们现在计算以入院（$A=1$）为条件的比值比。此时比值比的公式以 $A=1$ 为条件：\n$$OR_{A=1} = \\frac{\\text{Odds}(D=1 \\mid R=1, A=1)}{\\text{Odds}(D=1 \\mid R=0, A=1)} = \\frac{P(D=1 \\mid R=1, A=1) / P(D=0 \\mid R=1, A=1)}{P(D=1 \\mid R=0, A=1) / P(D=0 \\mid R=0, A=1)}$$\n为了计算所需的条件概率，我们首先需要确定人群中 $R$、$D$ 和 $A$ 的联合概率。\n\n首先，我们利用 $R$ 和 $D$ 的独立性，计算人群中 $r$ 和 $d$ 所有组合的联合概率 $P(R=r, D=d)$。\n-   $P(R=1, D=1) = P(R=1)P(D=1) = 0.30 \\times 0.10 = 0.03$\n-   $P(R=1, D=0) = P(R=1)P(D=0) = 0.30 \\times (1-0.10) = 0.30 \\times 0.90 = 0.27$\n-   $P(R=0, D=1) = P(R=0)P(D=1) = (1-0.30) \\times 0.10 = 0.70 \\times 0.10 = 0.07$\n-   $P(R=0, D=0) = P(R=0)P(D=0) = (1-0.30) \\times (1-0.10) = 0.70 \\times 0.90 = 0.63$\n\n接下来，我们使用公式 $P(A=1, R=r, D=d) = P(A=1 \\mid R=r, D=d) P(R=r, D=d)$ 计算联合概率 $P(A=1, R=r, D=d)$。\n-   $P(A=1, R=1, D=1) = P(A=1 \\mid R=1, D=1) P(R=1, D=1) = 0.50 \\times 0.03 = 0.0150$\n-   $P(A=1, R=1, D=0) = P(A=1 \\mid R=1, D=0) P(R=1, D=0) = 0.10 \\times 0.27 = 0.0270$\n-   $P(A=1, R=0, D=1) = P(A=1 \\mid R=0, D=1) P(R=0, D=1) = 0.20 \\times 0.07 = 0.0140$\n-   $P(A=1, R=0, D=0) = P(A=1 \\mid R=0, D=0) P(R=0, D=0) = 0.01 \\times 0.63 = 0.0063$\n\n现在我们已准备好计算比值比的各项。比值可以直接从这些联合概率计算。注意到对于第一组比值：\n$$\\text{Odds}(D=1 \\mid R=1, A=1) = \\frac{P(D=1 \\mid R=1, A=1)}{P(D=0 \\mid R=1, A=1)} = \\frac{P(D=1, R=1, A=1) / P(R=1, A=1)}{P(D=0, R=1, A=1) / P(R=1, A=1)} = \\frac{P(A=1, R=1, D=1)}{P(A=1, R=1, D=0)}$$\n类似地，对于第二组比值：\n$$\\text{Odds}(D=1 \\mid R=0, A=1) = \\frac{P(A=1, R=0, D=1)}{P(A=1, R=0, D=0)}$$\n代入我们计算出的数字：\n$$\\text{Odds}(D=1 \\mid R=1, A=1) = \\frac{0.0150}{0.0270} = \\frac{15}{27} = \\frac{5}{9}$$\n$$\\text{Odds}(D=1 \\mid R=0, A=1) = \\frac{0.0140}{0.0063} = \\frac{140}{63} = \\frac{20 \\times 7}{9 \\times 7} = \\frac{20}{9}$$\n最后，我们通过计算这两个比值的比率来求出入院患者的比值比：\n$$OR_{A=1} = \\frac{\\text{Odds}(D=1 \\mid R=1, A=1)}{\\text{Odds}(D=1 \\mid R=0, A=1)} = \\frac{5/9}{20/9} = \\frac{5}{20} = \\frac{1}{4} = 0.25$$\n这一结果表明，在入院患者群体中，风险因素与疾病之间存在强烈的负相关关系，尽管它们在总人群中是独立的。这种关联性的反转是选择偏倚的一个典型例子。\n\n两个数值答案，即总体比值比和入院患者比值比，保留四位有效数字后分别为 $1.000$ 和 $0.2500$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 1.000  0.2500 \\end{pmatrix}}\n$$"
        }
    ]
}
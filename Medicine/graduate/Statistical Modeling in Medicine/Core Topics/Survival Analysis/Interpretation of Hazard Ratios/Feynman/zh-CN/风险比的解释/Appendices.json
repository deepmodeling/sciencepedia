{
    "hands_on_practices": [
        {
            "introduction": "风险比（Hazard Ratio, HR）是生存分析中的核心指标，它量化了不同组别间事件发生的瞬时风险差异。本练习将指导您完成一个基础但至关重要的步骤：如何从Cox比例风险模型估计出的回归系数中计算出风险比，并用清晰的临床语言解读其含义。通过这个练习，您将掌握将抽象的统计模型输出转化为具体临床见解的基本技能 。",
            "id": "4968285",
            "problem": "一项随机对照试验（RCT）评估了一种新型抗心律失常药物与标准疗法在预防室性快速性心律失常方面的效果。令 $T$ 表示从随机化到首次经裁定的室性快速性心律失常发生的时间。研究者拟合了一个Cox比例风险模型，其风险函数为 $h(t \\mid \\mathbf{X}) = h_{0}(t) \\exp\\!\\big(\\mathbf{X}^{\\top}\\boldsymbol{\\beta}\\big)$，其中 $\\mathbf{X}$ 包括一个二元治疗指示变量 $X_{\\text{trt}}$（取值为0（对照组）或1（药物组））以及年龄和性别。估计的治疗系数为 $\\hat{\\beta}_{\\text{trt}} = 0.7$。从风险函数的定义（即在时间 $t$ 之前无事件发生的条件下，在时间 $t$ 发生事件的瞬时条件速率）出发，并利用拟合模型的乘法结构，推导在相同年龄和性别下比较 $X_{\\text{trt}}=1$ 与 $X_{\\text{trt}}=0$ 的风险比表达式。然后，使用 $\\hat{\\beta}_{\\text{trt}}$ 计算其数值，并在比例风险假设下，从临床角度将其解释为瞬时乘法效应。将您的数值答案四舍五入到4位有效数字。将最终的风险比表示为一个无单位的纯数。",
            "solution": "该问题要求从Cox比例风险模型中推导风险比（HR）的表达式，进行数值计算，并给出其临床解释。\n\n首先，我们建立理论基础。风险函数 $h(t \\mid \\mathbf{X})$ 表示具有协变量向量 $\\mathbf{X}$ 的个体，在直到时间 $t$ 之前未经历事件的条件下，在时间 $t$ 发生事件的瞬时速率。Cox比例风险模型将此函数指定为：\n$$h(t \\mid \\mathbf{X}) = h_{0}(t) \\exp(\\mathbf{X}^{\\top}\\boldsymbol{\\beta})$$\n在此模型中，$h_{0}(t)$ 是基线风险函数，是一个非负的时间函数，$\\boldsymbol{\\beta}$ 是回归系数的向量。项 $\\exp(\\mathbf{X}^{\\top}\\boldsymbol{\\beta})$ 作为基线风险的乘法标量。\n\n问题指出，协变量向量 $\\mathbf{X}$ 包括一个二元治疗指示变量 $X_{\\text{trt}}$（其中 $X_{\\text{trt}} = 1$ 代表新药，$X_{\\text{trt}} = 0$ 代表标准疗法），以及年龄和性别的协变量。我们用 $\\mathbf{Z}$ 表示年龄和性别的协变量子向量，其对应的系数为 $\\boldsymbol{\\beta}_{\\mathbf{Z}}$。线性预测项 $\\mathbf{X}^{\\top}\\boldsymbol{\\beta}$ 可以展开为：\n$$\\mathbf{X}^{\\top}\\boldsymbol{\\beta} = X_{\\text{trt}}\\beta_{\\text{trt}} + \\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}}$$\n其中 $\\beta_{\\text{trt}}$ 是与治疗指示变量相关的系数。\n\n为了推导治疗组与对照组相比的风险比，我们必须在保持所有其他协变量（年龄和性别，由 $\\mathbf{Z}$ 表示）不变的情况下，计算它们各自风险函数的比率。\n\n对于治疗组中（$X_{\\text{trt}}=1$）具有协变量 $\\mathbf{Z}$ 的个体，其风险函数为：\n$$h(t \\mid X_{\\text{trt}}=1, \\mathbf{Z}) = h_{0}(t) \\exp(1 \\cdot \\beta_{\\text{trt}} + \\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})$$\n对于对照组中（$X_{\\text{trt}}=0$）具有相同协变量 $\\mathbf{Z}$ 的可比个体，其风险函数为：\n$$h(t \\mid X_{\\text{trt}}=0, \\mathbf{Z}) = h_{0}(t) \\exp(0 \\cdot \\beta_{\\text{trt}} + \\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}}) = h_{0}(t) \\exp(\\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})$$\n\n风险比（$HR$）是这两个风险函数的比率：\n$$HR = \\frac{h(t \\mid X_{\\text{trt}}=1, \\mathbf{Z})}{h(t \\mid X_{\\text{trt}}=0, \\mathbf{Z})} = \\frac{h_{0}(t) \\exp(\\beta_{\\text{trt}} + \\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})}{h_{0}(t) \\exp(\\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})}$$\n使用恒等式 $\\exp(a+b) = \\exp(a)\\exp(b)$，我们可以重写分子：\n$$HR = \\frac{h_{0}(t) \\exp(\\beta_{\\text{trt}}) \\exp(\\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})}{h_{0}(t) \\exp(\\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})}$$\n基线风险项 $h_{0}(t)$ 和协变量项 $\\exp(\\mathbf{Z}^{\\top}\\boldsymbol{\\beta}_{\\mathbf{Z}})$ 相抵消，得出推导出的风险比表达式：\n$$HR = \\exp(\\beta_{\\text{trt}})$$\n这个结果展示了Cox模型的一个关键特征：风险比随时间恒定（“比例风险”假设），并且不依赖于其他协变量的值，只要在比较中这些协变量保持不变。\n\n接下来，我们计算HR的数值。问题提供了治疗效应的估计系数 $\\hat{\\beta}_{\\text{trt}} = 0.7$。将此值代入我们推导的表达式，得到估计的风险比 $\\widehat{HR}$：\n$$\\widehat{HR} = \\exp(\\hat{\\beta}_{\\text{trt}}) = \\exp(0.7)$$\n计算此值：\n$$\\exp(0.7) \\approx 2.0137527$$\n按要求四舍五入到4位有效数字，我们得到：\n$$\\widehat{HR} = 2.014$$\n\n最后，我们提供临床解释。风险比为 $2.014$，大于1，这表明与 $X_{\\text{trt}}=0$ 的组（对照组）相比，$X_{\\text{trt}}=1$ 的组（药物组）风险增加。具体来说，在比例风险假设下，在任何给定的时间点，一名接受新型抗心律失常药物且尚未发生室性快速性心律失常的患者，其发生该事件的瞬时风险是接受标准疗法的患者瞬时风险的 $2.014$ 倍，前提是这两名患者的年龄和性别相同。这意味着与标准疗法相比，这种新药具有有害效应，使心律失常的风险增加了大约 $101.4\\%$。这种乘法效应在整个随访期间是恒定的。",
            "answer": "$$\\boxed{2.014}$$"
        },
        {
            "introduction": "在评估一项临床干预的效果时，仅有风险比的点估计值是不够的，我们还必须量化其不确定性。本练习将引导您基于对数风险比的点估计值及其标准误，构建其95%置信区间。掌握这一技能，您将能更全面地评估研究结果的统计显著性和临床相关性，理解真实效应可能存在的范围 。",
            "id": "4968211",
            "problem": "在一项比较新型降压疗法与标准护理的随机临床试验中，使用 Cox 比例风险模型对复合心血管终点事件的发生时间进行建模。设以二元治疗指示变量 $X$ 为条件的风险函数为 $h(t \\mid X) = h_{0}(t)\\exp(\\beta X)$，其中 $X=1$ 表示分配到新疗法组，$X=0$ 表示标准护理组。对数风险系数的最大偏似然估计为 $\\hat{\\beta}=-0.5$，估计的标准误为 $0.2$。\n\n从模型定义和正则性条件下估计量的大样本性质出发，构建一个比较 $X=1$ 与 $X=0$ 的风险比的 $95\\%$ 置信区间。然后，从临床角度解释该区间的下限和上限，明确说明在比例风险假设下，它们对瞬时事件发生率意味着什么。将两个区间界限四舍五入至三位有效数字。将最终的数值区间仅表示为两个数字。",
            "solution": "给出的 Cox 比例风险模型为 $h(t \\mid X) = h_{0}(t)\\exp(\\beta X)$，其中 $h(t \\mid X)$ 是治疗指示变量为 $X$ 的个体在时间 $t$ 的风险函数，$h_{0}(t)$ 是基线风险函数，$\\beta$ 是对数风险比系数。这里，$X=1$ 对应新疗法，$X=0$ 对应标准护理。\n\n用于比较两组的主要关注参数是风险比（HR）。风险比定义为治疗组（$X=1$）的风险与对照组（$X=0$）的风险之比。\n$$\n\\text{HR} = \\frac{h(t \\mid X=1)}{h(t \\mid X=0)} = \\frac{h_{0}(t)\\exp(\\beta \\cdot 1)}{h_{0}(t)\\exp(\\beta \\cdot 0)} = \\frac{h_{0}(t)\\exp(\\beta)}{h_{0}(t) \\cdot 1} = \\exp(\\beta)\n$$\n比例风险假设意味着这个比值 $\\exp(\\beta)$ 在时间 $t$ 上是恒定的。我们已知对数风险比的最大偏似然估计为 $\\hat{\\beta}=-0.5$，其标准误为 $SE(\\hat{\\beta})=0.2$。\n\n该问题要求基于估计量的大样本性质来构建置信区间。在标准正则性条件下，最大偏似然估计量 $\\hat{\\beta}$ 围绕真实参数 $\\beta$ 呈渐近正态分布，其方差可以通过标准误的平方来估计。\n$$\n\\hat{\\beta} \\sim \\mathcal{N}\\left(\\beta, [SE(\\hat{\\beta})]^2\\right)\n$$\n这使我们能够为 $\\beta$ 构建一个置信区间。对数风险比 $\\beta$ 的 $95\\%$ 置信区间由下式给出：\n$$\n\\text{CI}_{95\\%}(\\beta) = \\hat{\\beta} \\pm z_{1-\\alpha/2} \\cdot SE(\\hat{\\beta})\n$$\n对于 $95\\%$ 的置信水平，显著性水平为 $\\alpha=0.05$，所以 $1-\\alpha/2 = 0.975$。来自标准正态分布的临界值为 $z_{0.975} \\approx 1.96$。\n\n代入给定值：\n$$\n\\text{CI}_{95\\%}(\\beta) = -0.5 \\pm 1.96 \\cdot (0.2)\n$$\n$$\n\\text{CI}_{95\\%}(\\beta) = -0.5 \\pm 0.392\n$$\n$\\beta$ 的下限是 $-0.5 - 0.392 = -0.892$。\n$\\beta$ 的上限是 $-0.5 + 0.392 = -0.108$。\n因此，对数风险比的 $95\\%$ 置信区间是 $[-0.892, -0.108]$。\n\n为了找到风险比 $\\text{HR} = \\exp(\\beta)$ 的置信区间，我们对 $\\beta$ 的置信区间的界限取指数。这个变换是有效的，因为指数函数是严格单调递增的。\n$$\n\\text{CI}_{95\\%}(\\text{HR}) = \\left[ \\exp(-0.892), \\exp(-0.108) \\right]\n$$\n现在，我们计算这些界限的数值。\nHR 的下限：$\\exp(-0.892) \\approx 0.409852$\nHR 的上限：$\\exp(-0.108) \\approx 0.897623$\n\n按要求将这些界限四舍五入到三位有效数字：\n下限 $\\approx 0.410$\n上限 $\\approx 0.898$\n\n风险比的 $95\\%$ 置信区间是 $[0.410, 0.898]$。\n\n在比例风险假设下，这些界限的临床术语解释如下：\n\n下限 ($0.410$)：我们有 $95\\%$ 的置信度，真实的风险比至少为 $0.410$。这个值代表了在置信限内最乐观的合理治疗效果。它意味着在随访期间的任何特定时刻，接受新疗法的患者的瞬时事件发生率（风险）可能低至接受标准护理患者的瞬时事件发生率的 $41.0\\%$。这对应于高达 $100\\% \\times (1 - 0.410) = 59.0\\%$ 的风险降低。\n\n上限 ($0.898$)：我们有 $95\\%$ 的置信度，真实的风险比不超过 $0.898$。这个值代表了在置信限内最不乐观的合理治疗效果（但仍有益处）。它意味着在任何特定时刻，接受新疗法的患者的瞬时事件发生率最多是接受标准护理患者的瞬时事件发生率的 $89.8\\%$。这对应于最小的合理风险降低为 $100\\% \\times (1 - 0.898) = 10.2\\%$。\n\n由于整个 $95\\%$ 置信区间 $[0.410, 0.898]$ 都低于 $1.0$，因此结果在 $\\alpha=0.05$ 水平上具有统计学意义，为新疗法在降低复合心血管终点事件风险方面优于标准护理提供了证据。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.410  0.898 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "一个常见的误区是将相对风险（如风险比）与绝对风险混为一谈。此练习通过一个精心设计的思想实验，要求您在两种基线风险截然不同的假想场景下，计算由同一个风险比（$HR=0.6$）带来的绝对风险降低（Absolute Risk Reduction, ARR）。通过具体的计算，您将深刻理解为何恒定的风险比在不同风险水平的人群中可能对应着截然不同的临床获益，这是从统计结果走向临床决策的关键一步 。",
            "id": "4968251",
            "problem": "考虑一项评估慢性病预防性疗法的随机临床试验，该试验在比例风险框架下进行分析。设风险比（HR）是作用于基线风险的恒定乘法因子 $\\,\\theta\\,$，因此对于所有 $\\,t \\geq 0\\,$，治疗组的风险为 $\\,\\theta\\,h_{0}(t)\\,$。假设不存在竞争风险；事件时间是连续的，生存率通过累积风险和生存率之间的标准关系与风险相关联。\n\n使用以下两种科学上合理且不同的基线风险函数，两者都在 $\\,T = 24\\,$ 个月的固定随访期内进行分析，通过计算证明相同的风险比可以产生显著不同的绝对风险降低值：\n\n- 情景 A（指数基线）：$\\,h_{0A}(t) = \\lambda_{A}\\,$，其中 $\\,\\lambda_{A} = 0.005\\,$ 月$^{-1}$，适用于 $\\,0 \\leq t \\leq T\\,$。\n- 情景 B（形状参数 $\\,k=2$ 的威布尔基线）：$\\,h_{0B}(t) = 2\\,\\lambda_{B}\\,t\\,$，适用于 $\\,0 \\leq t \\leq T\\,$，其中 $\\,\\lambda_{B} = \\dfrac{1.6}{T^{2}}\\,,$ 选择此值是为了使对照组在时间 $\\,T\\,$ 时的累积风险达到 $\\,1.6\\,$。\n\n设风险比为 $\\,\\theta = 0.6\\,$（治疗组 vs. 对照组）。仅使用风险、累积风险和生存函数的核心定义，推导在每种情景下，对照组和治疗组在时间 $\\,T\\,$ 的绝对风险，然后分别计算情景 A 和情景 B 的绝对风险降低值 $\\,\\text{ARR} = F_{\\text{control}}(T) - F_{\\text{treatment}}(T)\\,$。最后，计算差值 $\\,\\Delta = \\text{ARR}_{B} - \\text{ARR}_{A}\\,$。\n\n将最终的 $\\,\\Delta\\,$ 表示为小数，并将答案四舍五入到四位有效数字。",
            "solution": "我们首先建立生存分析中的基本关系。\n\n生存函数 $S(t)$ 是指生存超过时间 $t$ 的概率，它通过累积风险函数 $H(t)$ 与风险函数 $h(t)$ 相关联。累积风险是风险函数从时间 0 到 $t$ 的积分：\n$$H(t) = \\int_{0}^{t} h(u) \\, du$$\n生存函数则由下式给出：\n$$S(t) = \\exp(-H(t))$$\n绝对风险，也称为累积发生率函数 $F(t)$，是在时间 $t$ 前发生事件的概率。它是生存函数的补集：\n$$F(t) = 1 - S(t) = 1 - \\exp(-H(t))$$\n该问题在比例风险模型下进行操作，其中治疗组的风险函数 $h_{\\text{treatment}}(t)$ 是对照组基线风险函数 $h_{0}(t)$ 的一个常数倍数 $\\theta$：\n$$h_{\\text{treatment}}(t) = \\theta h_{0}(t)$$\n这种比例关系也适用于累积风险函数：\n$$H_{\\text{treatment}}(t) = \\int_{0}^{t} \\theta h_{0}(u) \\, du = \\theta \\int_{0}^{t} h_{0}(u) \\, du = \\theta H_{0}(t)$$\n在特定时间 $T$ 的绝对风险降低值 (ARR) 是对照组的绝对风险与治疗组的绝对风险之差：\n$$\\text{ARR}(T) = F_{\\text{control}}(T) - F_{\\text{treatment}}(T)$$\n代入风险的表达式，我们得到：\n$$\\text{ARR}(T) = [1 - S_{\\text{control}}(T)] - [1 - S_{\\text{treatment}}(T)] = S_{\\text{treatment}}(T) - S_{\\text{control}}(T)$$\n使用以累积风险表示的生存函数定义：\n$$\\text{ARR}(T) = \\exp(-H_{\\text{treatment}}(T)) - \\exp(-H_{\\text{control}}(T))$$\n最后，利用比例风险关系 $H_{\\text{treatment}}(T) = \\theta H_{0}(T)$，我们得出了 ARR 的通用公式：\n$$\\text{ARR}(T) = \\exp(-\\theta H_{0}(T)) - \\exp(-H_{0}(T))$$\n现在，我们将此框架应用于两个指定的情景，随访期为 $T=24$ 个月，风险比为 $\\theta = 0.6$。\n\n情景 A：指数基线风险\n基线风险函数是恒定的：$h_{0A}(t) = \\lambda_{A}$，其中 $\\lambda_{A} = 0.005$ 月$^{-1}$。\n首先，我们计算在时间 $T$ 时的累积基线风险：\n$$H_{0A}(T) = \\int_{0}^{T} \\lambda_{A} \\, dt = \\lambda_{A} T$$\n代入给定值：\n$$H_{0A}(24) = (0.005) \\times 24 = 0.12$$\n情景 A 的绝对风险降低值 $\\text{ARR}_{A}$ 为：\n$$\\text{ARR}_{A} = \\exp(-\\theta H_{0A}(T)) - \\exp(-H_{0A}(T)) = \\exp(-(0.6)(0.12)) - \\exp(-0.12)$$\n$$\\text{ARR}_{A} = \\exp(-0.072) - \\exp(-0.12)$$\n数值上，$\\exp(-0.072) \\approx 0.9305333$ 且 $\\exp(-0.12) \\approx 0.8869204$。\n$$\\text{ARR}_{A} \\approx 0.9305333 - 0.8869204 = 0.0436129$$\n\n情景 B：威布尔基线风险\n基线风险函数由 $h_{0B}(t) = 2 \\lambda_{B} t$ 给出，形状参数为 $k=2$。率参数为 $\\lambda_{B} = \\frac{1.6}{T^{2}}$。\n首先，我们计算在时间 $T$ 时的累积基线风险：\n$$H_{0B}(T) = \\int_{0}^{T} 2 \\lambda_{B} t \\, dt = 2 \\lambda_{B} \\left[\\frac{t^2}{2}\\right]_{0}^{T} = \\lambda_{B} T^2$$\n代入 $\\lambda_{B}$ 的定义：\n$$H_{0B}(T) = \\left(\\frac{1.6}{T^{2}}\\right) T^2 = 1.6$$\n这验证了问题的设定。\n情景 B 的绝对风险降低值 $\\text{ARR}_{B}$ 为：\n$$\\text{ARR}_{B} = \\exp(-\\theta H_{0B}(T)) - \\exp(-H_{0B}(T)) = \\exp(-(0.6)(1.6)) - \\exp(-1.6)$$\n$$\\text{ARR}_{B} = \\exp(-0.96) - \\exp(-1.6)$$\n数值上，$\\exp(-0.96) \\approx 0.3828929$ 且 $\\exp(-1.6) \\approx 0.2018965$。\n$$\\text{ARR}_{B} \\approx 0.3828929 - 0.2018965 = 0.1809964$$\n\n最终计算：绝对风险降低值的差异\n问题要求计算差值 $\\Delta = \\text{ARR}_{B} - \\text{ARR}_{A}$。\n$$\\Delta = (0.1809964) - (0.0436129) = 0.1373835$$\n将结果四舍五入到四位有效数字得到 $0.1374$。此计算表明，当基线风险较高时（情景 B，对照组风险 $F_{0B}(T) = 1-\\exp(-1.6) \\approx 79.8\\%$），恒定的风险比（$\\theta=0.6$）会产生大得多的绝对风险降低值，而当基线风险较低时（情景 A，对照组风险 $F_{0A}(T) = 1-\\exp(-0.12) \\approx 11.3\\%$）则不然。",
            "answer": "$$\\boxed{0.1374}$$"
        }
    ]
}
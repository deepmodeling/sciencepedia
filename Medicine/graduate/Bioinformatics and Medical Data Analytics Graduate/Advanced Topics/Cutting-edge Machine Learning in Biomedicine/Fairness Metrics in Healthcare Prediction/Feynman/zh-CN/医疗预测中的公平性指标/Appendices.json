{
    "hands_on_practices": [
        {
            "introduction": "在评估医疗预测模型的公平性时，第一步是能够量化不同群体间的表现差异。本练习提供了一个基础但至关重要的实践，要求您从一个临床分类器的原始性能数据（即混淆矩阵）出发，为不同的人口统计学分组计算关键的性能指标。通过这个过程，您将直接掌握如何识别和量化不同公平性指标上的差异，这是进行任何深入公平性分析的基石。",
            "id": "4562365",
            "problem": "一家医院部署了一个二元疾病风险分类器，用于对患者进行分诊以进行早期干预。对于每位患者，令 $Y \\in \\{0,1\\}$ 表示真实疾病状态（$Y=1$ 表示存在疾病，$Y=0$ 表示不存在疾病），令 $\\hat{Y} \\in \\{0,1\\}$ 表示分类器的预测标签（$\\hat{Y}=1$ 表示预测有疾病，$\\hat{Y}=0$ 表示预测无疾病）。在固定的评估期内，两个人口群体（标记为A组和B组）观察到以下混淆矩阵计数：A组的真阳性 ($TP$) $=40$，假阳性 ($FP$) $=10$，真阴性 ($TN$) $=150$，假阴性 ($FN$) $=20$；B组的真阳性 ($TP$) $=30$，假阳性 ($FP$) $=5$，真阴性 ($TN$) $=80$，假阴性 ($FN$) $=35$。\n\n仅使用概率论和频率派估计的核心定义，按以下步骤进行：\n- 对于每个组，定义并计算经验灵敏度（在真实为阳性的病例中预测为阳性的概率）、特异度（在真实为阴性的病例中预测为阴性的概率）、阳性预测值（PPV；在预测为阳性的病例中真实为阳性的概率）和阴性预测值（NPV；在预测为阴性的病例中真实为阴性的概率），以小数形式表示。\n- 将这四个比率中每一个的公平性相关差异量化为A组和B组值之间的绝对差值。\n- 将综合差异指数定义为这四个绝对差值的算术平均值，并进行计算。\n\n将最终的综合差异指数表示为四舍五入到四位有效数字的小数。答案中不允许使用百分号。",
            "solution": "首先验证问题，以确保其具有科学依据、良定性且客观。\n\n### 步骤 1：提取已知条件\n-   **分类器：**二元疾病风险分类器。\n-   **真实状态：**$Y \\in \\{0, 1\\}$，其中 $Y=1$ 表示存在疾病，$Y=0$ 表示不存在疾病。\n-   **预测标签：**$\\hat{Y} \\in \\{0, 1\\}$，其中 $\\hat{Y}=1$ 表示预测有疾病，$\\hat{Y}=0$ 表示预测无疾病。\n-   **人口群体：**A组和B组。\n-   **A组的混淆矩阵计数：**\n    -   真阳性 ($TP_A$): $40$\n    -   假阳性 ($FP_A$): $10$\n    -   真阴性 ($TN_A$): $150$\n    -   假阴性 ($FN_A$): $20$\n-   **B组的混淆矩阵计数：**\n    -   真阳性 ($TP_B$): $30$\n    -   假阳性 ($FP_B$): $5$\n    -   真阴性 ($TN_B$): $80$\n    -   假阴性 ($FN_B$): $35$\n-   **任务：**\n    1.  对于每个组，计算经验灵敏度 ($Sens$)、特异度 ($Spec$)、阳性预测值 ($PPV$) 和阴性预测值 ($NPV$)。\n    2.  将每个指标的差异量化为A组和B组值之间的绝对差值。\n    3.  定义并计算一个综合差异指数，作为四个绝对差值的算术平均值。\n    4.  最终结果应为四舍五入到四位有效数字的小数。\n\n### 步骤 2：使用提取的已知条件进行验证\n-   **科学依据：**该问题牢固地基于统计学和机器学习评估中的标准、基本概念（混淆矩阵、灵敏度、特异度、PPV、NPV）。这些是在医疗数据分析中评估分类器性能和公平性的核心指标。该问题在科学上是合理的。\n-   **良定性：**所有必要的数据（两组的TP、FP、TN、FN计数）都已提供。所需指标的定义是标准的，能够导出一个唯一、稳定且有意义的解。\n-   **客观性：**问题陈述使用精确、定量和无偏见的语言表达。它不含主观论断。\n\n### 步骤 3：结论与行动\n该问题是有效的，因为它是自洽的、科学上合理的和良定的。可以继续求解过程。\n\n### 求解推导\n\n分析首先根据混淆矩阵的各部分来定义四个性能指标。令 $G$ 表示一个组，A或B。\n\n1.  **灵敏度 ($Sens_G$)**：在条件真实存在的情况下，预测为阳性的概率。其估计值为：\n    $$Sens_G = P(\\hat{Y}=1 | Y=1) \\approx \\frac{TP_G}{TP_G + FN_G}$$\n2.  **特异度 ($Spec_G$)**：在条件真实不存在的情况下，预测为阴性的概率。其估计值为：\n    $$Spec_G = P(\\hat{Y}=0 | Y=0) \\approx \\frac{TN_G}{TN_G + FP_G}$$\n3.  **阳性预测值 ($PPV_G$)**：在预测为阳性的情况下，条件真实存在的概率。其估计值为：\n    $$PPV_G = P(Y=1 | \\hat{Y}=1) \\approx \\frac{TP_G}{TP_G + FP_G}$$\n4.  **阴性预测值 ($NPV_G$)**：在预测为阴性的情况下，条件真实不存在的概率。其估计值为：\n    $$NPV_G = P(Y=0 | \\hat{Y}=0) \\approx \\frac{TN_G}{TN_G + FN_G}$$\n\n接下来，我们使用所提供的数据为每个组计算这四个指标。\n\n**对于A组：**\n$TP_A = 40$, $FP_A = 10$, $TN_A = 150$, $FN_A = 20$.\n-   $Sens_A = \\frac{TP_A}{TP_A + FN_A} = \\frac{40}{40 + 20} = \\frac{40}{60} = \\frac{2}{3} \\approx 0.6667$\n-   $Spec_A = \\frac{TN_A}{TN_A + FP_A} = \\frac{150}{150 + 10} = \\frac{150}{160} = \\frac{15}{16} = 0.9375$\n-   $PPV_A = \\frac{TP_A}{TP_A + FP_A} = \\frac{40}{40 + 10} = \\frac{40}{50} = \\frac{4}{5} = 0.8$\n-   $NPV_A = \\frac{TN_A}{TN_A + FN_A} = \\frac{150}{150 + 20} = \\frac{150}{170} = \\frac{15}{17} \\approx 0.8824$\n\n**对于B组：**\n$TP_B = 30$, $FP_B = 5$, $TN_B = 80$, $FN_B = 35$.\n-   $Sens_B = \\frac{TP_B}{TP_B + FN_B} = \\frac{30}{30 + 35} = \\frac{30}{65} = \\frac{6}{13} \\approx 0.4615$\n-   $Spec_B = \\frac{TN_B}{TN_B + FP_B} = \\frac{80}{80 + 5} = \\frac{80}{85} = \\frac{16}{17} \\approx 0.9412$\n-   $PPV_B = \\frac{TP_B}{TP_B + FP_B} = \\frac{30}{30 + 5} = \\frac{30}{35} = \\frac{6}{7} \\approx 0.8571$\n-   $NPV_B = \\frac{TN_B}{TN_B + FN_B} = \\frac{80}{80 + 35} = \\frac{80}{115} = \\frac{16}{23} \\approx 0.6957$\n\n现在，我们计算与公平性相关的差异，定义为两组之间每个指标的绝对差值。\n-   $\\Delta_{Sens} = |Sens_A - Sens_B| = |\\frac{2}{3} - \\frac{6}{13}| = |\\frac{26 - 18}{39}| = \\frac{8}{39} \\approx 0.205128$\n-   $\\Delta_{Spec} = |Spec_A - Spec_B| = |\\frac{15}{16} - \\frac{16}{17}| = |\\frac{255 - 256}{272}| = \\frac{1}{272} \\approx 0.003676$\n-   $\\Delta_{PPV} = |PPV_A - PPV_B| = |\\frac{4}{5} - \\frac{6}{7}| = |\\frac{28 - 30}{35}| = \\frac{2}{35} \\approx 0.057143$\n-   $\\Delta_{NPV} = |NPV_A - NPV_B| = |\\frac{15}{17} - \\frac{16}{23}| = |\\frac{345 - 272}{391}| = \\frac{73}{391} \\approx 0.186701$\n\n最后，我们计算综合差异指数（$I_D$），即这四个绝对差值的算术平均值。\n$$I_D = \\frac{1}{4} (\\Delta_{Sens} + \\Delta_{Spec} + \\Delta_{PPV} + \\Delta_{NPV})$$\n$$I_D \\approx \\frac{1}{4} (0.205128 + 0.003676 + 0.057143 + 0.186701)$$\n$$I_D \\approx \\frac{1}{4} (0.452648)$$\n$$I_D \\approx 0.113162$$\n\n将结果四舍五入到四位有效数字，得到 $0.1132$。",
            "answer": "$$\\boxed{0.1132}$$"
        },
        {
            "introduction": "仅仅计算出性能指标是不够的，理解它们之间复杂的相互作用同样关键。这个练习揭示了算法公平性中的一个核心挑战：即使一个模型在不同群体间实现了均等的性能（例如，相等的真正例率，满足“机会均等”），由于各群体间基础疾病患病率的差异，其预测的可靠性（如阳性预测值）可能仍存在显著不同。通过这个基于贝叶斯定理的推导，您将深刻理解为何满足一项公平性标准并不意味着能自动满足其他标准，以及群体基础比率在其中扮演的关键角色。",
            "id": "4562332",
            "problem": "一个医院系统部署了一个二元临床决策支持模型，用于标记有术后并发症高风险的患者。设真实结果为一个二元变量 $Y \\in \\{0,1\\}$，其中 $Y=1$ 表示在 $30$ 天内出现并发症，设模型的二元警报为 $\\hat{Y} \\in \\{0,1\\}$。两个临床上不同的亚群，A组和B组，其结果的基准率（患病率）不同。假设该模型在两个组中被校准到相同的工作点，从而在各组中产生相同的真阳性率（TPR）和假阳性率（FPR）。具体来说，假设如下：\n- A组患病率（基准率）：$\\pi_A = \\mathbb{P}(Y=1 \\mid \\text{A}) = 0.2$。\n- B组患病率（基准率）：$\\pi_B = \\mathbb{P}(Y=1 \\mid \\text{B}) = 0.4$。\n- 真阳性率（TPR，也称为灵敏度）：$\\mathrm{TPR}_A = \\mathrm{TPR}_B = \\mathbb{P}(\\hat{Y}=1 \\mid Y=1) = 0.85$。\n- 假阳性率（FPR）：$\\mathrm{FPR}_A = \\mathrm{FPR}_B = \\mathbb{P}(\\hat{Y}=1 \\mid Y=0) = 0.15$。\n\n这些设置满足了均等机会（各组间真阳性率相等）的公平性概念。另一个公平性概念，预测均等，要求各组间的阳性预测值（PPV）相等，其中阳性预测值定义为 $\\mathrm{PPV} = \\mathbb{P}(Y=1 \\mid \\hat{Y}=1)$。\n\n仅使用上述基本定义、贝叶斯定理和全概率定律，首先对于一个患病率为 $\\pi$ 的通用组，推导出用 $\\pi$、$\\mathrm{TPR}$ 和 $\\mathrm{FPR}$ 表示的 $\\mathrm{PPV}$ 的通用表达式。然后，使用上面给出的数值为A组和B组评估推导出的表达式，以获得 $\\mathrm{PPV}_A$ 和 $\\mathrm{PPV}_B$。最后，报告数对 $\\left(\\mathrm{PPV}_A, \\mathrm{PPV}_B\\right)$。\n\n将两个值都表示为小数。将你的答案四舍五入到 $4$ 位有效数字。将这对数值报告为单行矩阵。",
            "solution": "在进行解答之前，对问题进行验证。\n\n### 步骤1：提取已知条件\n问题提供了以下定义和数值：\n- 真实结果：$Y \\in \\{0, 1\\}$，其中 $Y=1$ 表示出现并发症。\n- 模型的二元预测：$\\hat{Y} \\in \\{0, 1\\}$，其中 $\\hat{Y}=1$ 是高风险警报。\n- A组患病率：$\\pi_A = \\mathbb{P}(Y=1 \\mid \\text{A}) = 0.2$。\n- B组患病率：$\\pi_B = \\mathbb{P}(Y=1 \\mid \\text{B}) = 0.4$。\n- 两组的真阳性率：$\\mathrm{TPR}_A = \\mathrm{TPR}_B = \\mathbb{P}(\\hat{Y}=1 \\mid Y=1) = 0.85$。\n- 两组的假阳性率：$\\mathrm{FPR}_A = \\mathrm{FPR}_B = \\mathbb{P}(\\hat{Y}=1 \\mid Y=0) = 0.15$。\n- 阳性预测值（PPV）的定义：$\\mathrm{PPV} = \\mathbb{P}(Y=1 \\mid \\hat{Y}=1)$。\n\n### 步骤2：使用提取的已知条件进行验证\n根据验证标准对问题进行评估。\n- **科学依据：** 该问题牢固地植根于概率论、统计学以及分类模型的标准评估，这些是生物信息学和医疗数据分析的核心。TPR、FPR、患病率和PPV的概念是该领域的基本定义。给定的数值对于真实的临床情景是合理的。\n- **适定性：** 这是一个适定问题。它提供了所有必要的信息（两个不同组的患病率、TPR和FPR），并明确定义了要计算的量（每个组的PPV）。推导和后续计算会得出一个唯一、稳定且有意义的解。\n- **客观性：** 问题使用精确、客观的数学语言陈述。它没有歧义、主观性和偏见。\n\n该问题没有表现出验证清单中列出的任何缺陷。这是一个标准且重要的练习，有助于理解分类器性能指标如何与群体基准率相互作用，这是评估算法公平性的一个关键考虑因素。\n\n### 步骤3：结论和行动\n该问题被判定为**有效**。将提供完整的解答。\n\n主要任务是推导阳性预测值（$\\mathrm{PPV}$）的表达式，然后为A和B两个不同的组计算它。\n\n首先，我们为一个患病率为 $\\pi = \\mathbb{P}(Y=1)$，真阳性率为 $\\mathrm{TPR} = \\mathbb{P}(\\hat{Y}=1 \\mid Y=1)$，假阳性率为 $\\mathrm{FPR} = \\mathbb{P}(\\hat{Y}=1 \\mid Y=0)$ 的组推导 $\\mathrm{PPV}$ 的通用表达式。\n\n$\\mathrm{PPV}$ 的定义是在模型预测为阳性结果的条件下，真实结果为阳性的条件概率：\n$$\n\\mathrm{PPV} = \\mathbb{P}(Y=1 \\mid \\hat{Y}=1)\n$$\n使用贝叶斯定理，即 $\\mathbb{P}(A|B) = \\frac{\\mathbb{P}(B|A)\\mathbb{P}(A)}{\\mathbb{P}(B)}$，我们可以将 $\\mathrm{PPV}$ 的表达式重写为：\n$$\n\\mathrm{PPV} = \\frac{\\mathbb{P}(\\hat{Y}=1 \\mid Y=1) \\mathbb{P}(Y=1)}{\\mathbb{P}(\\hat{Y}=1)}\n$$\n分子中的项对应于给定的定义：$\\mathbb{P}(\\hat{Y}=1 \\mid Y=1) = \\mathrm{TPR}$ 和 $\\mathbb{P}(Y=1) = \\pi$。\n分母 $\\mathbb{P}(\\hat{Y}=1)$ 是模型发出警报的总概率。我们可以使用全概率定律，以真实结果 $Y$为条件来展开这一项：\n$$\n\\mathbb{P}(\\hat{Y}=1) = \\mathbb{P}(\\hat{Y}=1 \\mid Y=1)\\mathbb{P}(Y=1) + \\mathbb{P}(\\hat{Y}=1 \\mid Y=0)\\mathbb{P}(Y=0)\n$$\n我们可以将已知量代入这个展开式中。我们有：\n- $\\mathbb{P}(\\hat{Y}=1 \\mid Y=1) = \\mathrm{TPR}$\n- $\\mathbb{P}(Y=1) = \\pi$\n- $\\mathbb{P}(\\hat{Y}=1 \\mid Y=0) = \\mathrm{FPR}$\n- $\\mathbb{P}(Y=0) = 1 - \\mathbb{P}(Y=1) = 1 - \\pi$\n\n将这些代入 $\\mathbb{P}(\\hat{Y}=1)$ 的表达式中，得到：\n$$\n\\mathbb{P}(\\hat{Y}=1) = (\\mathrm{TPR} \\cdot \\pi) + (\\mathrm{FPR} \\cdot (1 - \\pi))\n$$\n现在，我们将这个展开的分母代回到 $\\mathrm{PPV}$ 的贝叶斯定理公式中：\n$$\n\\mathrm{PPV} = \\frac{\\mathrm{TPR} \\cdot \\pi}{(\\mathrm{TPR} \\cdot \\pi) + (\\mathrm{FPR} \\cdot (1 - \\pi))}\n$$\n这就是所要求的，用 $\\pi$、$\\mathrm{TPR}$ 和 $\\mathrm{FPR}$ 表示的 $\\mathrm{PPV}$ 的通用表达式。\n\n接下来，我们使用提供的数值为A组和B组评估此表达式。对于两组，$\\mathrm{TPR} = 0.85$ 且 $\\mathrm{FPR} = 0.15$。\n\n对于A组，患病率为 $\\pi_A = 0.2$。A组的阳性预测值 $\\mathrm{PPV}_A$ 为：\n$$\n\\mathrm{PPV}_A = \\frac{0.85 \\cdot 0.2}{(0.85 \\cdot 0.2) + (0.15 \\cdot (1 - 0.2))}\n$$\n$$\n\\mathrm{PPV}_A = \\frac{0.17}{0.17 + (0.15 \\cdot 0.8)}\n$$\n$$\n\\mathrm{PPV}_A = \\frac{0.17}{0.17 + 0.12}\n$$\n$$\n\\mathrm{PPV}_A = \\frac{0.17}{0.29} \\approx 0.586206...\n$$\n四舍五入到 $4$ 位有效数字，我们得到 $\\mathrm{PPV}_A \\approx 0.5862$。\n\n对于B组，患病率为 $\\pi_B = 0.4$。B组的阳性预测值 $\\mathrm{PPV}_B$ 为：\n$$\n\\mathrm{PPV}_B = \\frac{0.85 \\cdot 0.4}{(0.85 \\cdot 0.4) + (0.15 \\cdot (1 - 0.4))}\n$$\n$$\n\\mathrm{PPV}_B = \\frac{0.34}{0.34 + (0.15 \\cdot 0.6)}\n$$\n$$\n\\mathrm{PPV}_B = \\frac{0.34}{0.34 + 0.09}\n$$\n$$\n\\mathrm{PPV}_B = \\frac{0.34}{0.43} \\approx 0.790697...\n$$\n四舍五入到 $4$ 位有效数字，我们得到 $\\mathrm{PPV}_B \\approx 0.7907$。\n\n最终结果是数值对 $(\\mathrm{PPV}_A, \\mathrm{PPV}_B)$。这个结果表明，即使模型的运行特性（TPR和FPR）在各组间完全相同，由于病症的基础患病率不同，也会导致不同的阳性预测值。因此，满足均等机会（$\\mathrm{TPR}_A = \\mathrm{TPR}_B$）并不能保证预测均等（$\\mathrm{PPV}_A = \\mathrm{PPV}_B$），这是算法公平性研究中的一个关键见解。",
            "answer": "$$\\boxed{\\begin{pmatrix} 0.5862  0.7907 \\end{pmatrix}}$$"
        },
        {
            "introduction": "在识别出性能差异后，下一步通常是采取措施来缓解这些不公平。本练习从分析转向干预，向您展示一种在实践中广泛应用的后期处理技术：为不同群体设置不同的决策阈值。假设模型的风险评分服从高斯分布，您将学习如何通过调整这些阈值来主动实现“机会均等”这一公平性目标，确保模型对不同群体的患者都能提供同等水平的检出能力。",
            "id": "4562360",
            "problem": "一家医院部署了一个连续风险的脓毒症预测模型，该模型为每位患者输出一个实值分数 $S$。令 $Y \\in \\{0,1\\}$ 表示真实的脓毒症状态（$Y=1$ 表示在预测时间窗内发生脓毒症），令 $G \\in \\{\\text{A},\\text{B}\\}$ 表示一个受保护属性，指示两个人口群体。临床策略是在 $S > t_G$ 时进行干预，其中 $t_G$ 是特定于群体的决策阈值。医院采用机会均等的公平性标准：各群体的真阳性率（TPR）必须相等，其中真阳性率（TPR）定义为 $\\mathbb{P}(S>t_G \\mid Y=1,G)$。为确保安全性所需的最低灵敏度，医院进一步规定，每个群体的这个均等化 TPR 必须至少为 $0.8$。\n\n假设存在以下科学上合理的、已在留出临床数据上验证过的分数生成过程：对于群体 $\\text{A}$，$S \\mid (Y=1,G=\\text{A}) \\sim \\mathcal{N}(1,1)$ 且 $S \\mid (Y=0,G=\\text{A}) \\sim \\mathcal{N}(0,1)$；对于群体 $\\text{B}$，$S \\mid (Y=1,G=\\text{B}) \\sim \\mathcal{N}(1.2,1)$ 且 $S \\mid (Y=0,G=\\text{B}) \\sim \\mathcal{N}(0,1)$。此处 $\\mathcal{N}(\\mu,\\sigma^{2})$ 表示均值为 $\\mu$、方差为 $\\sigma^{2}$ 的高斯分布。令 $\\Phi$ 表示标准正态分布的累积分布函数。\n\n仅从 TPR 作为条件概率的定义以及高斯分布的性质（包括其累积分布函数）出发，推导出满足机会均等要求（均等化 TPR 水平为 $0.8$）的决策阈值 $t_{\\text{A}}$ 和 $t_{\\text{B}}$。将最终的数值阈值四舍五入至四位有效数字。无需单位。",
            "solution": "首先验证问题，以确保其科学上合理、适定且客观。\n\n### 步骤 1：提取已知条件\n-   脓毒症风险分数：$S \\in \\mathbb{R}$\n-   真实脓毒症状态：$Y \\in \\{0, 1\\}$\n-   受保护属性（群体）：$G \\in \\{\\text{A}, \\text{B}\\}$\n-   决策规则：如果 $S > t_G$ 则进行干预，其中 $t_G$ 是特定于群体的阈值。\n-   公平性标准：机会均等，定义为各群体的真阳性率（TPR）相等。\n-   TPR 定义：$\\text{TPR}_G = \\mathbb{P}(S > t_G \\mid Y=1, G)$\n-   性能要求：均等化 TPR 必须为 $0.8$。\n-   群体 A 阳性类别的分数分布：$S \\mid (Y=1, G=\\text{A}) \\sim \\mathcal{N}(1, 1)$\n-   群体 A 阴性类别的分数分布：$S \\mid (Y=0, G=\\text{A}) \\sim \\mathcal{N}(0, 1)$\n-   群体 B 阳性类别的分数分布：$S \\mid (Y=1, G=\\text{B}) \\sim \\mathcal{N}(1.2, 1)$\n-   群体 B 阴性类别的分数分布：$S \\mid (Y=0, G=\\text{B}) \\sim \\mathcal{N}(0, 1)$\n-   $\\Phi$ 是标准正态分布 $\\mathcal{N}(0,1)$ 的累积分布函数（CDF）。\n-   任务是求出 $t_{\\text{A}}$ 和 $t_{\\text{B}}$ 的数值，并四舍五入至四位有效数字。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据，属于医学机器学习中算法公平性这一成熟领域。使用高斯分布对分数进行建模是一种标准且有效的简化假设。真阳性率和机会均等的概念是明确定义的统计指标。问题是适定的；它提供了唯一确定阈值 $t_{\\text{A}}$ 和 $t_{\\text{B}}$ 所需的所有信息（分布和目标 TPR）。语言精确客观。关于阴性类别分布的信息对于计算基于 TPR 的阈值是多余的，但不会产生矛盾。问题有效。\n\n### 步骤 3：推导\n目标是为群体 A 和 B 分别找到决策阈值 $t_{\\text{A}}$ 和 $t_{\\text{B}}$，使得它们在 TPR 水平为 $0.8$ 时满足机会均等标准。这意味着我们必须求解 $t_{\\text{A}}$ 和 $t_{\\text{B}}$ 以满足：\n$$\n\\text{TPR}_{\\text{A}} = \\mathbb{P}(S > t_{\\text{A}} \\mid Y=1, G=\\text{A}) = 0.8\n$$\n$$\n\\text{TPR}_{\\text{B}} = \\mathbb{P}(S > t_{\\text{B}} \\mid Y=1, G=\\text{B}) = 0.8\n$$\n\n我们分别推导每个阈值。\n\n**$t_{\\text{A}}$ 的推导：**\n已知群体 A 中脓毒症患者的分数分布为 $S \\mid (Y=1, G=\\text{A}) \\sim \\mathcal{N}(\\mu_{\\text{A},1}=1, \\sigma^2=1)$。标准差为 $\\sigma = \\sqrt{1} = 1$。\n为了计算概率 $\\mathbb{P}(S > t_{\\text{A}})$，我们首先对随机变量 $S$ 进行标准化。令 $Z$ 为一个标准正态随机变量，$Z \\sim \\mathcal{N}(0,1)$。变换如下：\n$$\nZ = \\frac{S - \\mu_{\\text{A},1}}{\\sigma} = \\frac{S-1}{1} = S-1\n$$\n条件 $S > t_{\\text{A}}$ 等价于 $S-1 > t_{\\text{A}}-1$，用 $Z$ 表示即为 $Z > t_{\\text{A}}-1$。\n对 $\\text{TPR}_{\\text{A}}$ 的要求变为：\n$$\n\\mathbb{P}(Z > t_{\\text{A}}-1) = 0.8\n$$\n对于标准正态变量 $Z$，其概率 $\\mathbb{P}(Z>z)$ 与其累积分布函数 $\\Phi(z) = \\mathbb{P}(Z \\le z)$ 的关系为 $\\mathbb{P}(Z>z) = 1 - \\Phi(z)$。\n因此，我们有：\n$$\n1 - \\Phi(t_{\\text{A}}-1) = 0.8\n$$\n求解 $\\Phi(t_{\\text{A}}-1)$：\n$$\n\\Phi(t_{\\text{A}}-1) = 1 - 0.8 = 0.2\n$$\n为了求出 $t_{\\text{A}}-1$ 的值，我们使用标准正态 CDF 的反函数，也称为分位数函数，记为 $\\Phi^{-1}$：\n$$\nt_{\\text{A}}-1 = \\Phi^{-1}(0.2)\n$$\n求解 $t_{\\text{A}}$：\n$$\nt_{\\text{A}} = 1 + \\Phi^{-1}(0.2)\n$$\n根据标准统计表或计算软件，标准正态分布的第 $20$ 百分位数的值为 $\\Phi^{-1}(0.2) \\approx -0.8416212$。\n代入此值：\n$$\nt_{\\text{A}} \\approx 1 + (-0.8416212) = 0.1583788\n$$\n四舍五入至四位有效数字，我们得到 $t_{\\text{A}} = 0.1584$。\n\n**$t_{\\text{B}}$ 的推导：**\n群体 B 的过程是类似的。已知群体 B 中脓毒症患者的分数分布为：$S \\mid (Y=1, G=\\text{B}) \\sim \\mathcal{N}(\\mu_{\\text{B},1}=1.2, \\sigma^2=1)$。标准差同样为 $\\sigma = 1$。\n在此条件下对 $S$ 的标准化为：\n$$\nZ = \\frac{S - \\mu_{\\text{B},1}}{\\sigma} = \\frac{S-1.2}{1} = S-1.2\n$$\n条件 $S > t_{\\text{B}}$ 等价于 $Z > t_{\\text{B}}-1.2$。\n要求 $\\text{TPR}_{\\text{B}} = 0.8$ 变为：\n$$\n\\mathbb{P}(Z > t_{\\text{B}}-1.2) = 0.8\n$$\n使用累积分布函数 $\\Phi$：\n$$\n1 - \\Phi(t_{\\text{B}}-1.2) = 0.8\n$$\n$$\n\\Phi(t_{\\text{B}}-1.2) = 0.2\n$$\n应用反累积分布函数 $\\Phi^{-1}$：\n$$\nt_{\\text{B}}-1.2 = \\Phi^{-1}(0.2)\n$$\n求解 $t_{\\text{B}}$：\n$$\nt_{\\text{B}} = 1.2 + \\Phi^{-1}(0.2)\n$$\n使用相同的数值 $\\Phi^{-1}(0.2) \\approx -0.8416212$：\n$$\nt_{\\text{B}} \\approx 1.2 + (-0.8416212) = 0.3583788\n$$\n四舍五入至四位有效数字，我们得到 $t_{\\text{B}} = 0.3584$。\n\n所需的阈值为 $t_{\\text{A}} \\approx 0.1584$ 和 $t_{\\text{B}} \\approx 0.3584$。需要不同的阈值才能达到相同的 TPR，因为两个群体中阳性类别的基础分数分布的均值不同。",
            "answer": "$$\\boxed{\\begin{pmatrix} 0.1584  0.3584 \\end{pmatrix}}$$"
        }
    ]
}
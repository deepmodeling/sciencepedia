{
    "hands_on_practices": [
        {
            "introduction": "Precise alignment of the endoscope is fundamental to successful robotic surgery, as it directly governs the surgeon's view of the operative field. This exercise challenges you to translate this clinical requirement into a concrete algorithmic solution, bridging the gap between high-level goals and low-level robotic control. By formulating the alignment task as a constrained optimization problem, you will practice applying principles of 3D kinematics and vector analysis to develop a core component of a robotic system's setup and targeting software .",
            "id": "5180621",
            "problem": "You are designing an algorithmic module used in a robotic surgical platform to align a rigid endoscope shaft with an intended target line through a trocar port under the Remote Center of Motion (RCM) constraint. The RCM constraint requires that rotations occur about a fixed point at the port and that translation occurs only along the instrument axis. The goal is to minimize the angular deviation between the endoscope shaft axis and the line from the port to the target while respecting orientation limits and insertion bounds.\n\nModel the system in a fixed Cartesian coordinate frame. Let the port center position be the vector $P \\in \\mathbb{R}^3$, the anatomical target be the vector $T \\in \\mathbb{R}^3$, and define the normalized target direction vector\n$$\nv = \\frac{T - P}{\\|T - P\\|}.\n$$\nParameterize the endoscope shaft unit direction vector $s(\\theta,\\psi)$ using yaw $\\psi$ (rotation about the $z$-axis) and pitch $\\theta$ (rotation about the $y$-axis) from the canonical axis $\\mathbf{e}_x = [1,0,0]^\\top$:\n$$\ns(\\theta,\\psi) = R_z(\\psi)\\, R_y(\\theta)\\, \\mathbf{e}_x,\n$$\nwhere\n$$\nR_y(\\theta) = \\begin{bmatrix}\n\\cos\\theta & 0 & \\sin\\theta \\\\\n0 & 1 & 0 \\\\\n-\\sin\\theta & 0 & \\cos\\theta\n\\end{bmatrix}, \\quad\nR_z(\\psi) = \\begin{bmatrix}\n\\cos\\psi & -\\sin\\psi & 0 \\\\\n\\sin\\psi & \\cos\\psi & 0 \\\\\n0 & 0 & 1\n\\end{bmatrix}.\n$$\nThe angular deviation between $s(\\theta,\\psi)$ and $v$ is\n$$\n\\Delta(\\theta,\\psi) = \\arccos\\big( s(\\theta,\\psi) \\cdot v \\big),\n$$\nwhich must be minimized subject to the orientation bounds\n$$\n\\psi \\in [\\psi_{\\min}, \\psi_{\\max}], \\quad \\theta \\in [\\theta_{\\min}, \\theta_{\\max}],\n$$\nand the insertion length bounds along $s(\\theta,\\psi)$ defined by\n$$\nl \\in [l_{\\min}, l_{\\max}], \\quad l = (T-P)\\cdot s(\\theta,\\psi).\n$$\nFor safety, additionally require the perpendicular miss distance from the target to the instrument axis line through $P$,\n$$\nd_\\perp(\\theta,\\psi,l) = \\left\\| (T-P) - l\\, s(\\theta,\\psi) \\right\\|,\n$$\nto be less than or equal to the tolerance $\\varepsilon_{\\max}$.\n\nStarting only from fundamental vector definitions (dot product, norm, and rotation matrices) and the RCM constraint, derive and implement an algorithm that:\n- selects $\\theta$ and $\\psi$ to minimize $\\Delta(\\theta,\\psi)$ subject to the box constraints on yaw and pitch,\n- selects $l$ to minimize $d_\\perp(\\theta,\\psi,l)$ subject to $l \\in [l_{\\min}, l_{\\max}]$,\n- returns both the minimized angular deviation $\\Delta$ in radians and a boolean feasibility indicator stating whether $d_\\perp \\le \\varepsilon_{\\max}$ under the chosen $(\\theta,\\psi,l)$.\n\nYour program must implement this algorithm and apply it to the following test suite. All angles must be expressed in radians, and all distances must be expressed in meters. In the final output, each test case result must be a list containing the minimized angular deviation and the feasibility boolean. The angular deviation must be rounded to $6$ decimals. The final output must be a single line containing the results as a comma-separated list enclosed in square brackets.\n\nTest suite (each case specifies $(P, T, [\\psi_{\\min}, \\psi_{\\max}], [\\theta_{\\min}, \\theta_{\\max}], [l_{\\min}, l_{\\max}], \\varepsilon_{\\max})$):\n\n- Case $1$: $P=(0,0,0)$, $T=(0.20,\\,0.05,\\,-0.10)$, $[\\psi_{\\min}, \\psi_{\\max}] = [-\\pi/2,\\,\\pi/2]$, $[\\theta_{\\min}, \\theta_{\\max}] = [-\\pi/3,\\,\\pi/3]$, $[l_{\\min}, l_{\\max}] = [0.05,\\,0.30]$, $\\varepsilon_{\\max} = 0.005$.\n- Case $2$: $P=(0,0,0)$, $T=(0.20,\\,0.20,\\,0.00)$, $[\\psi_{\\min}, \\psi_{\\max}] = [-0.2,\\,0.2]$, $[\\theta_{\\min}, \\theta_{\\max}] = [-\\pi/3,\\,\\pi/3]$, $[l_{\\min}, l_{\\max}] = [0.00,\\,0.50]$, $\\varepsilon_{\\max} = 0.01$.\n- Case $3$: $P=(0,0,0)$, $T=(0.10,\\,0.00,\\,0.00)$, $[\\psi_{\\min}, \\psi_{\\max}] = [-\\pi/2,\\,\\pi/2]$, $[\\theta_{\\min}, \\theta_{\\max}] = [-\\pi/3,\\,\\pi/3]$, $[l_{\\min}, l_{\\max}] = [0.15,\\,0.40]$, $\\varepsilon_{\\max} = 0.06$.\n- Case $4$: $P=(0,0,0)$, $T=(-0.10,\\,0.00,\\,0.00)$, $[\\psi_{\\min}, \\psi_{\\max}] = [-\\pi/2,\\,\\pi/2]$, $[\\theta_{\\min}, \\theta_{\\max}] = [-\\pi/3,\\,\\pi/3]$, $[l_{\\min}, l_{\\max}] = [0.05,\\,0.30]$, $\\varepsilon_{\\max} = 0.03$.\n- Case $5$: $P=(0,0,0)$, $T=(0.15,\\,0.00,\\,-0.15)$, $[\\psi_{\\min}, \\psi_{\\max}] = [-\\pi/2,\\,\\pi/2]$, $[\\theta_{\\min}, \\theta_{\\max}] = [-0.2,\\,0.2]$, $[l_{\\min}, l_{\\max}] = [0.00,\\,0.40]$, $\\varepsilon_{\\max} = 0.02$.\n\nFinal output format: a single line printing a list of results, where each result is itself a list $[\\Delta, \\text{feasible}]$ with $\\Delta$ rounded to $6$ decimals in radians, for example, `[[0.000000,True],[0.123456,False],...]`.",
            "solution": "The problem is assessed to be valid. It is scientifically grounded in the principles of robotic kinematics and 3D geometry, is well-posed, objective, and self-contained. The problem statement contains a minor ambiguity in its definitions of insertion length $l$ and perpendicular miss distance $d_\\perp$. Specifically, it defines $l$ as a fixed projection, $l = (T-P)\\cdot s(\\theta,\\psi)$, while also asking the algorithm to \"select $l$\" from an interval $[l_{\\min}, l_{\\max}]$ to minimize $d_\\perp$. Furthermore, it names $d_\\perp(\\theta,\\psi,l) = \\|(T-P) - l s(\\theta,\\psi)\\|$ the \"perpendicular miss distance from the target to the instrument axis line,\" whereas this formula actually represents the Euclidean distance from the instrument tip (at position $P+ls$) to the target $T$. The perpendicular distance from point $T$ to the line is properly given by $\\|(T-P) - ((T-P)\\cdot s)s\\|$. The most consistent interpretation, which resolves these points and aligns with the stated algorithmic tasks, is to follow the sequentially specified optimization objectives. The algorithm must first optimize the pointing direction $(\\theta, \\psi)$, and then, using that optimal direction, optimize the insertion length $l$. This interpretation will be followed.\n\nThe solution is derived in two main steps as dictated by the problem statement.\n\nFirst, we define the constant vectors from the problem's inputs. The port center is $P \\in \\mathbb{R}^3$ and the target is $T \\in \\mathbb{R}^3$. The vector from the port to the target is $U = T-P$, and its normalized direction is $v = \\frac{U}{\\|U\\|}$. The endoscope shaft is a unit vector $s(\\theta, \\psi)$ parameterized by yaw $\\psi$ and pitch $\\theta$:\n$$\ns(\\theta,\\psi) = \\begin{bmatrix} \\cos\\psi \\cos\\theta \\\\ \\sin\\psi \\cos\\theta \\\\ -\\sin\\theta \\end{bmatrix}\n$$\n\nStep I: Minimization of Angular Deviation $\\Delta(\\theta, \\psi)$\n\nThe first objective is to find the angles $(\\theta^*, \\psi^*)$ that minimize the angular deviation $\\Delta(\\theta,\\psi) = \\arccos\\big( s(\\theta,\\psi) \\cdot v \\big)$ subject to the box constraints $\\psi \\in [\\psi_{\\min}, \\psi_{\\max}]$ and $\\theta \\in [\\theta_{\\min}, \\theta_{\\max}]$. Since the $\\arccos$ function is monotonically decreasing on its domain $[-1, 1]$, minimizing $\\Delta(\\theta,\\psi)$ is equivalent to maximizing the dot product $f(\\theta, \\psi) = s(\\theta,\\psi) \\cdot v$.\n\nLet $v = [v_x, v_y, v_z]^\\top$. The dot product is:\n$$\nf(\\theta, \\psi) = v_x \\cos\\psi \\cos\\theta + v_y \\sin\\psi \\cos\\theta - v_z \\sin\\theta\n$$\nWe can regroup terms:\n$$\nf(\\theta, \\psi) = (\\sqrt{v_x^2+v_y^2}) \\left(\\frac{v_x}{\\sqrt{v_x^2+v_y^2}}\\cos\\psi + \\frac{v_y}{\\sqrt{v_x^2+v_y^2}}\\sin\\psi\\right)\\cos\\theta - v_z \\sin\\theta\n$$\nLet $\\psi_{ideal} = \\operatorname{atan2}(v_y, v_x)$. Then $\\cos(\\psi_{ideal}) = \\frac{v_x}{\\sqrt{v_x^2+v_y^2}}$ and $\\sin(\\psi_{ideal}) = \\frac{v_y}{\\sqrt{v_x^2+v_y^2}}$. The function becomes:\n$$\nf(\\theta, \\psi) = \\sqrt{v_x^2+v_y^2} \\cos(\\psi - \\psi_{ideal}) \\cos\\theta - v_z \\sin\\theta\n$$\nTo maximize this function over the rectangular domain, we can find the optimal $\\psi$ and $\\theta$ sequentially. For any given $\\theta$ where $\\cos\\theta > 0$, the term $\\cos(\\psi - \\psi_{ideal})$ must be maximized. This occurs when $|\\psi - \\psi_{ideal}|$ is minimized. Given the constraint $\\psi \\in [\\psi_{\\min}, \\psi_{\\max}]$, the optimal choice $\\psi^*$ is the value in the interval closest to $\\psi_{ideal}$. This is found by clamping $\\psi_{ideal}$ to the interval:\n$$\n\\psi^* = \\text{clip}(\\psi_{ideal}, \\psi_{\\min}, \\psi_{\\max})\n$$\nWith $\\psi^*$ fixed, we then maximize the function of $\\theta$:\n$$\ng(\\theta) = C \\cos\\theta - v_z \\sin\\theta, \\quad \\text{where} \\quad C = \\sqrt{v_x^2+v_y^2} \\cos(\\psi^* - \\psi_{ideal})\n$$\nThis function has the form $A\\cos\\theta + B\\sin\\theta$ and its unconstrained maximum occurs where its derivative is zero. The ideal pitch $\\theta_{temp}$ that maximizes $g(\\theta)$ is given by:\n$$\n\\theta_{temp} = \\operatorname{atan2}(-v_z, C)\n$$\nApplying the constraint $\\theta \\in [\\theta_{\\min}, \\theta_{\\max}]$, the optimal pitch $\\theta^*$ is found by clamping $\\theta_{temp}$ to its interval:\n$$\n\\theta^* = \\text{clip}(\\theta_{temp}, \\theta_{\\min}, \\theta_{\\max})\n$$\nThe pair $(\\theta^*, \\psi^*)$ minimizes the angular deviation. The minimized value is $\\Delta^* = \\arccos(s(\\theta^*, \\psi^*) \\cdot v)$. Let the resulting optimal direction vector be $s^* = s(\\theta^*, \\psi^*)$.\n\nStep II: Minimization of Miss Distance and Feasibility Check\n\nThe second objective is to select an insertion length $l$ from the interval $[l_{\\min}, l_{\\max}]$ to minimize the distance $d_\\perp(l) = \\|(T-P) - l s^*\\| = \\|U - l s^*\\|$. We are finding the point on the line segment defined by $\\{P + l s^* \\mid l \\in [l_{\\min}, l_{\\max}]\\}$ that is closest to the target $T$.\n\nTo minimize the norm $\\|U - l s^*\\|$, we can minimize its square, $h(l) = \\|U - l s^*\\|^2$:\n$$\nh(l) = (U - l s^*) \\cdot (U - l s^*) = \\|U\\|^2 - 2l(U \\cdot s^*) + l^2\\|s^*\\|^2\n$$\nSince $s^*$ is a unit vector, $\\|s^*\\|^2 = 1$. The function $h(l) = l^2 - 2(U \\cdot s^*)l + \\|U\\|^2$ is a parabola in $l$ opening upwards. Its minimum is at the vertex, found by setting the derivative to zero:\n$$\nh'(l) = 2l - 2(U \\cdot s^*) = 0 \\implies l = U \\cdot s^*\n$$\nThis unconstrained optimal length, $l_{ideal} = U \\cdot s^*$, is the scalar projection of the vector $U$ onto the direction $s^*$.\n\nTo satisfy the constraint $l \\in [l_{\\min}, l_{\\max}]$, the optimal insertion length $l^*$ is the value in the interval closest to $l_{ideal}$. This is found by clamping:\n$$\nl^* = \\text{clip}(l_{ideal}, l_{\\min}, l_{\\max})\n$$\nWith this optimal length $l^*$, the minimized distance is $d^*_\\perp = \\|U - l^* s^*\\|$. The feasibility is then determined by checking if this distance is within the specified tolerance:\n$$\n\\text{feasible} = (d^*_\\perp \\le \\varepsilon_{\\max})\n$$\nThe final result for each test case is the list $[\\Delta^*, \\text{feasible}]$, with $\\Delta^*$ rounded to $6$ decimal places.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the robotic endoscope alignment problem for a suite of test cases.\n    The algorithm proceeds in two main steps:\n    1. Minimize angular deviation by finding the optimal yaw (psi) and pitch (theta)\n       angles within their constraints.\n    2. Minimize the tip-to-target distance by finding the optimal insertion length (l)\n       within its constraints.\n    Finally, it checks if the minimized distance meets the feasibility tolerance.\n    \"\"\"\n\n    test_cases = [\n        # Case 1: P=(0,0,0), T=(0.20, 0.05, -0.10), [psi_min, psi_max] = [-pi/2, pi/2], [theta_min, theta_max] = [-pi/3, pi/3], [l_min, l_max] = [0.05, 0.30], eps_max = 0.005.\n        (np.array([0.0, 0.0, 0.0]), np.array([0.20, 0.05, -0.10]), np.array([-np.pi/2, np.pi/2]), np.array([-np.pi/3, np.pi/3]), np.array([0.05, 0.30]), 0.005),\n        # Case 2: P=(0,0,0), T=(0.20, 0.20, 0.00), [psi_min, psi_max] = [-0.2, 0.2], [theta_min, theta_max] = [-pi/3, pi/3], [l_min, l_max] = [0.00, 0.50], eps_max = 0.01.\n        (np.array([0.0, 0.0, 0.0]), np.array([0.20, 0.20, 0.00]), np.array([-0.2, 0.2]), np.array([-np.pi/3, np.pi/3]), np.array([0.00, 0.50]), 0.01),\n        # Case 3: P=(0,0,0), T=(0.10, 0.00, 0.00), [psi_min, psi_max] = [-pi/2, pi/2], [theta_min, theta_max] = [-pi/3, pi/3], [l_min, l_max] = [0.15, 0.40], eps_max = 0.06.\n        (np.array([0.0, 0.0, 0.0]), np.array([0.10, 0.00, 0.00]), np.array([-np.pi/2, np.pi/2]), np.array([-np.pi/3, np.pi/3]), np.array([0.15, 0.40]), 0.06),\n        # Case 4: P=(0,0,0), T=(-0.10, 0.00, 0.00), [psi_min, psi_max] = [-pi/2, pi/2], [theta_min, theta_max] = [-pi/3, pi/3], [l_min, l_max] = [0.05, 0.30], eps_max = 0.03.\n        (np.array([0.0, 0.0, 0.0]), np.array([-0.10, 0.00, 0.00]), np.array([-np.pi/2, np.pi/2]), np.array([-np.pi/3, np.pi/3]), np.array([0.05, 0.30]), 0.03),\n        # Case 5: P=(0,0,0), T=(0.15, 0.00, -0.15), [psi_min, psi_max] = [-pi/2, pi/2], [theta_min, theta_max] = [-0.2, 0.2], [l_min, l_max] = [0.00, 0.40], eps_max = 0.02.\n        (np.array([0.0, 0.0, 0.0]), np.array([0.15, 0.00, -0.15]), np.array([-np.pi/2, np.pi/2]), np.array([-0.2, 0.2]), np.array([0.00, 0.40]), 0.02),\n    ]\n\n    results = []\n    for P, T, psi_bounds, theta_bounds, l_bounds, eps_max in test_cases:\n        \n        U = T - P\n        norm_U = np.linalg.norm(U)\n        if norm_U < 1e-9: # Target is at the port center\n            # Any direction is optimal for angle (Delta=0), any l is optimal for distance (d_perp=0)\n            # Choose simplest values\n            delta = 0.0\n            d_perp = 0.0\n            feasible = d_perp <= eps_max\n            results.append([round(delta, 6), feasible])\n            continue\n            \n        v = U / norm_U\n\n        # Step 1: Minimize Angular Deviation\n        v_x, v_y, v_z = v\n        v_xy_norm = np.linalg.norm(v[:2])\n\n        # Find ideal (unconstrained) angles\n        psi_ideal = np.arctan2(v_y, v_x)\n        \n        # Find constrained optimal psi by clamping\n        psi_star = np.clip(psi_ideal, psi_bounds[0], psi_bounds[1])\n\n        # Find ideal theta for the chosen psi_star\n        C = v_xy_norm * np.cos(psi_star - psi_ideal)\n        theta_temp = np.arctan2(-v_z, C)\n\n        # Find constrained optimal theta by clamping\n        theta_star = np.clip(theta_temp, theta_bounds[0], theta_bounds[1])\n        \n        # Calculate the optimal endoscope direction vector s_star\n        s_star = np.array([\n            np.cos(psi_star) * np.cos(theta_star),\n            np.sin(psi_star) * np.cos(theta_star),\n            -np.sin(theta_star)\n        ])\n        \n        # Calculate the minimized angular deviation\n        # Dot product can be slightly > 1 due to precision; clip to be safe for arccos\n        dot_product = np.clip(np.dot(s_star, v), -1.0, 1.0)\n        delta = np.arccos(dot_product)\n\n        # Step 2: Minimize Miss Distance and Check Feasibility\n        # Find ideal insertion length (projection of U onto s_star)\n        l_ideal = np.dot(U, s_star)\n        \n        # Find constrained optimal l by clamping\n        l_star = np.clip(l_ideal, l_bounds[0], l_bounds[1])\n        \n        # Calculate the minimized distance\n        d_perp = np.linalg.norm(U - l_star * s_star)\n        \n        # Check feasibility\n        feasible = d_perp <= eps_max\n        \n        results.append([round(delta, 6), feasible])\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(str(r) for r in results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "Beyond kinematic precision, a crucial aspect of robotic surgery safety involves managing the physical energies delivered to the patient, such as in electrosurgery. This practice delves into the biophysical principles governing thermal injury, a significant risk associated with monopolar energy devices. By modeling Joule heating and applying the bioheat equation, you will derive a quantitative safety threshold for an electrosurgical return pad, gaining insight into the rigorous engineering analysis required to ensure patient safety .",
            "id": "5180662",
            "problem": "A robotic-assisted systemic surgery case uses monopolar electrosurgery with a large adhesive return electrode pad placed on the patient's thigh during platform setup and docking. The safety team wants to formalize a quantitative threshold for skin injury risk based on current density at the return electrode and determine a minimum contact area that ensures operation within a safe limit. Assume the following scientifically grounded model and parameters:\n\n- The local form of Ohm’s law relates current density to electric field in tissue as $J = \\sigma E$, where $\\sigma$ is the effective electrical conductivity of the tissue-electrode interface. \n- Resistive (Joule) heating per unit volume in tissue is $q_{\\dot{}} = \\sigma E^{2} = \\frac{J^{2}}{\\sigma}$.\n- The tissue temperature dynamics over short durations are governed by energy conservation that, in full form, includes conduction and perfusion terms (the Pennes bioheat equation). Under conditions of short activation times and large electrode contact areas, neglect heat conduction and perfusion over the activation interval to obtain the local adiabatic approximation $ \\rho c \\,\\frac{\\partial T}{\\partial t} \\approx q_{\\dot{}}$, where $\\rho$ is mass density and $c$ is specific heat. \n- The injury criterion is defined by a maximum allowable temperature rise in the superficial tissue layer under the return electrode, $\\Delta T_{\\mathrm{safe}}$.\n\nGiven:\n- Effective conductivity $ \\sigma = 0.6\\,\\mathrm{S/m}$.\n- Tissue density $ \\rho = 1100\\,\\mathrm{kg/m^{3}}$.\n- Tissue specific heat $ c = 3300\\,\\mathrm{J/(kg\\cdot K)}$.\n- Thermal conductivity $ k = 0.5\\,\\mathrm{W/(m\\cdot K)}$.\n- Electrosurgical activation duration $ t_{\\mathrm{on}} = 90\\,\\mathrm{s}$.\n- Allowable temperature rise $ \\Delta T_{\\mathrm{safe}} = 6\\,\\mathrm{K}$, chosen to keep peak temperatures below the threshold for thermal injury in short exposures.\n- Root-mean-square (RMS) return current during activation $ I_{\\mathrm{rms}} = 2.5\\,\\mathrm{A}$.\n\nTasks:\n1. Starting only from the fundamental relations above, derive an analytic expression for the threshold current density $J_{\\mathrm{th}}$ such that the adiabatic temperature rise at $t = t_{\\mathrm{on}}$ equals $\\Delta T_{\\mathrm{safe}}$.\n2. Using the definition of current density $ J = \\frac{I}{A}$ with $I = I_{\\mathrm{rms}}$, determine the minimum contact area $ A_{\\min}$ that ensures $ J \\leq J_{\\mathrm{th}}$ during activation.\n\nJustify the adiabatic assumption by estimating the thermal diffusion length $\\ell_{d} = \\sqrt{\\alpha t_{\\mathrm{on}}}$, where thermal diffusivity $ \\alpha = \\frac{k}{\\rho c}$, and comparing $\\ell_{d}$ to a characteristic electrode half-width of order several centimeters typical for return pads used in robotic surgery. Then compute $J_{\\mathrm{th}}$ in $\\mathrm{A/m^{2}}$ and $A_{\\min}$ in $\\mathrm{m^{2}}$. Round your final numerical answers to four significant figures.",
            "solution": "The problem statement is evaluated to be scientifically grounded, well-posed, and objective. It is based on fundamental principles of thermodynamics and electromagnetism (Joule heating, Ohm's law, and energy conservation) applied to a realistic biomedical engineering scenario. The parameters provided are physically plausible for biological tissue and electrosurgical conditions. The assumptions, such as the adiabatic approximation, are explicitly stated and the problem requires their justification, which is a sign of a well-structured problem. The tasks are clearly defined and solvable using the provided information. Therefore, the problem is valid and a solution will be provided.\n\n### Task 1: Derivation of the Threshold Current Density, $J_{\\mathrm{th}}$\n\nWe begin with the provided adiabatic approximation for the temperature dynamics in the tissue:\n$$ \\rho c \\,\\frac{\\partial T}{\\partial t} \\approx q_{\\dot{}} $$\nwhere $\\rho$ is the tissue density, $c$ is the specific heat, $T$ is the temperature, and $t$ is time. The term $q_{\\dot{}}$ represents the volumetric heat generation rate due to Joule heating, which is given by:\n$$ q_{\\dot{}} = \\frac{J^{2}}{\\sigma} $$\nHere, $J$ is the current density and $\\sigma$ is the electrical conductivity.\n\nSubstituting the expression for $q_{\\dot{}}$ into the heat equation, we get:\n$$ \\rho c \\,\\frac{\\partial T}{\\partial t} = \\frac{J^{2}}{\\sigma} $$\nWe assume the current density $J$ is uniform across the electrode area and constant during the activation time $t_{\\mathrm{on}}$. This allows us to treat the right-hand side as a constant and write the partial derivative as an ordinary derivative:\n$$ \\frac{dT}{dt} = \\frac{J^{2}}{\\rho c \\sigma} $$\nTo find the total temperature rise, $\\Delta T = T(t_{\\mathrm{on}}) - T(0)$, we integrate this equation over the activation interval from $t=0$ to $t=t_{\\mathrm{on}}$:\n$$ \\int_{T(0)}^{T(t_{\\mathrm{on}})} dT = \\int_{0}^{t_{\\mathrm{on}}} \\frac{J^{2}}{\\rho c \\sigma} dt $$\n$$ T(t_{\\mathrm{on}}) - T(0) = \\frac{J^{2}}{\\rho c \\sigma} \\int_{0}^{t_{\\mathrm{on}}} dt $$\n$$ \\Delta T = \\frac{J^{2} t_{\\mathrm{on}}}{\\rho c \\sigma} $$\nThe problem defines a threshold condition where the temperature rise reaches the maximum allowable value, $\\Delta T_{\\mathrm{safe}}$, when the current density is at its threshold value, $J_{\\mathrm{th}}$. Setting $\\Delta T = \\Delta T_{\\mathrm{safe}}$ and $J = J_{\\mathrm{th}}$:\n$$ \\Delta T_{\\mathrm{safe}} = \\frac{J_{\\mathrm{th}}^{2} t_{\\mathrm{on}}}{\\rho c \\sigma} $$\nSolving this equation for $J_{\\mathrm{th}}$ gives the desired analytic expression:\n$$ J_{\\mathrm{th}}^{2} = \\frac{\\rho c \\sigma \\Delta T_{\\mathrm{safe}}}{t_{\\mathrm{on}}} $$\n$$ J_{\\mathrm{th}} = \\sqrt{\\frac{\\rho c \\sigma \\Delta T_{\\mathrm{safe}}}{t_{\\mathrm{on}}}} $$\n\n### Task 2: Determination of the Minimum Contact Area, $A_{\\min}$\n\nThe current density $J$ is defined as the total current $I$ passing through a cross-sectional area $A$:\n$$ J = \\frac{I}{A} $$\nFor safety, the operating current density, calculated using the RMS current $I_{\\mathrm{rms}}$, must not exceed the threshold current density $J_{\\mathrm{th}}$:\n$$ J = \\frac{I_{\\mathrm{rms}}}{A} \\leq J_{\\mathrm{th}} $$\nTo ensure this condition is met, the contact area $A$ must be sufficiently large. The minimum required area, $A_{\\min}$, corresponds to the case where the current density is exactly equal to the threshold value:\n$$ \\frac{I_{\\mathrm{rms}}}{A_{\\min}} = J_{\\mathrm{th}} $$\nSolving for $A_{\\min}$:\n$$ A_{\\min} = \\frac{I_{\\mathrm{rms}}}{J_{\\mathrm{th}}} $$\nSubstituting the expression for $J_{\\mathrm{th}}$ derived in Task 1:\n$$ A_{\\min} = I_{\\mathrm{rms}} \\left( \\sqrt{\\frac{\\rho c \\sigma \\Delta T_{\\mathrm{safe}}}{t_{\\mathrm{on}}}} \\right)^{-1} = I_{\\mathrm{rms}} \\sqrt{\\frac{t_{\\mathrm{on}}}{\\rho c \\sigma \\Delta T_{\\mathrm{safe}}}} $$\n\n### Justification of the Adiabatic Assumption\n\nThe adiabatic assumption neglects heat loss from the heated region due to thermal conduction. This assumption is valid if the timescale of the heating, $t_{\\mathrm{on}}$, is much shorter than the characteristic time for thermal diffusion across the dimensions of the electrode. Equivalently, the thermal diffusion length, $\\ell_d$, which represents how far heat diffuses in time $t_{\\mathrm{on}}$, must be small compared to the characteristic size of the heating area (e.g., the electrode half-width, $L$).\n\nThe thermal diffusion length is given by $\\ell_{d} = \\sqrt{\\alpha t_{\\mathrm{on}}}$, where the thermal diffusivity $\\alpha$ is defined as $\\alpha = \\frac{k}{\\rho c}$. Let's calculate $\\ell_d$ using the given parameters:\n- $k = 0.5\\,\\mathrm{W/(m\\cdot K)}$\n- $\\rho = 1100\\,\\mathrm{kg/m^{3}}$\n- $c = 3300\\,\\mathrm{J/(kg\\cdot K)}$\n- $t_{\\mathrm{on}} = 90\\,\\mathrm{s}$\n\nFirst, we compute the thermal diffusivity $\\alpha$:\n$$ \\alpha = \\frac{k}{\\rho c} = \\frac{0.5\\,\\mathrm{W/(m\\cdot K)}}{(1100\\,\\mathrm{kg/m^{3}}) \\cdot (3300\\,\\mathrm{J/(kg\\cdot K)})} = \\frac{0.5}{3.63 \\times 10^{6}} \\,\\mathrm{m^{2}/s} \\approx 1.3774 \\times 10^{-7}\\,\\mathrm{m^{2}/s} $$\nNow, we compute the thermal diffusion length $\\ell_d$:\n$$ \\ell_d = \\sqrt{\\alpha t_{\\mathrm{on}}} = \\sqrt{(1.3774 \\times 10^{-7}\\,\\mathrm{m^{2}/s}) \\cdot (90\\,\\mathrm{s})} = \\sqrt{1.23966 \\times 10^{-5}\\,\\mathrm{m^{2}}} \\approx 0.00352\\,\\mathrm{m} $$\nThis diffusion length is approximately $3.5\\,\\mathrm{mm}$. A typical return electrode pad has dimensions of several centimeters, for example, $10\\,\\mathrm{cm} \\times 15\\,\\mathrm{cm}$. The characteristic half-width would be on the order of $5\\,\\mathrm{cm}$ to $7.5\\,\\mathrm{cm}$ (i.e., $50\\,\\mathrm{mm}$ to $75\\,\\mathrm{mm}$). Since $\\ell_d \\approx 3.5\\,\\mathrm{mm}$ is much smaller than these dimensions, the heat generated near the center of the pad does not have sufficient time to diffuse to the edges. Therefore, neglecting conduction (the adiabatic approximation) is a reasonable simplification for estimating the peak temperature rise.\n\n### Numerical Computations\n\nWe now compute the numerical values for $J_{\\mathrm{th}}$ and $A_{\\min}$ and round to four significant figures.\n\n**Threshold Current Density ($J_{\\mathrm{th}}$):**\nUsing the derived formula and given values:\n$$ J_{\\mathrm{th}} = \\sqrt{\\frac{(1100\\,\\mathrm{kg/m^{3}}) \\cdot (3300\\,\\mathrm{J/(kg\\cdot K)}) \\cdot (0.6\\,\\mathrm{S/m}) \\cdot (6\\,\\mathrm{K})}{90\\,\\mathrm{s}}} $$\n$$ J_{\\mathrm{th}} = \\sqrt{\\frac{13068000}{90}}\\,\\mathrm{A/m^{2}} = \\sqrt{145200}\\,\\mathrm{A/m^{2}} \\approx 381.05118\\,\\mathrm{A/m^{2}} $$\nRounding to four significant figures:\n$$ J_{\\mathrm{th}} \\approx 381.1\\,\\mathrm{A/m^{2}} $$\n\n**Minimum Contact Area ($A_{\\min}$):**\nUsing the derived formula and the given $I_{\\mathrm{rms}} = 2.5\\,\\mathrm{A}$ and the unrounded value of $J_{\\mathrm{th}}$ for better precision:\n$$ A_{\\min} = \\frac{I_{\\mathrm{rms}}}{J_{\\mathrm{th}}} = \\frac{2.5\\,\\mathrm{A}}{381.05118\\,\\mathrm{A/m^{2}}} \\approx 0.00656073\\,\\mathrm{m^{2}} $$\nRounding to four significant figures:\n$$ A_{\\min} \\approx 0.006561\\,\\mathrm{m^{2}} $$\nThis area corresponds to $65.61\\,\\mathrm{cm^{2}}$, which is a realistic size for a return electrode (e.g., an $8\\,\\mathrm{cm} \\times 8.2\\,\\mathrm{cm}$ pad).",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n381.1 & 0.006561\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "The safety of a complex robotic platform depends not on a single component, but on the reliability of the entire integrated system. This advanced practice introduces you to Fault Tree Analysis (FTA), a top-down, deductive failure analysis used in high-stakes industries to quantify system-level risk. By calculating the overall probability of an adverse event from the failure rates of individual subsystems, you will learn to identify systemic vulnerabilities and appreciate how redundancy and robust design contribute to building a truly safe surgical robot .",
            "id": "5180677",
            "problem": "A robotic surgery platform used in systemic surgery integrates three critical subsystems whose failures can precipitate an adverse event defined as uncontrolled instrument motion with potential contact to critical structures. The subsystems are the power module, the communications module, and the joint encoder/voter module. During a single procedure, the following are known:\n\n- Power module architecture: two power supplies in parallel (primary and backup) with an automatic transfer on demand from the primary to the backup. Each supply has a per-procedure failure probability $p_{P} = 1.5 \\times 10^{-3}$, of which a fraction $\\beta_{P} = 0.02$ is attributed to Common-Cause Failure (CCF) mechanisms. The transfer device has a failure-on-demand probability $t = 4.0 \\times 10^{-3}$.\n- Communications module architecture: two redundant links with per-procedure failure probability $p_{C} = 2.0 \\times 10^{-3}$ per link, of which a fraction $\\beta_{C} = 0.05$ is CCF. A master arbitration controller has an independent per-procedure failure probability $a = 1.0 \\times 10^{-3}$.\n- Joint encoder/voter module architecture: Triple Modular Redundancy (TMR) with three encoders feeding a majority voter. Each encoder has a per-procedure failure probability $p_{J} = 5.0 \\times 10^{-4}$, with Common-Cause Failure fraction $\\beta_{J} = 0.10$. The voter has an independent per-procedure failure probability $v = 8.0 \\times 10^{-4}$.\n\nAssume statistical independence among the three subsystems (power, communications, joint encoder/voter), and independence between controllers and their associated hardware within each subsystem. Within redundant channels, model Common-Cause Failure using the conventional beta-factor partition of failure probability. Use only foundational probability rules (e.g., union, intersection, independence) and well-tested reliability modeling concepts (e.g., beta-factor partition) in your derivation.\n\nDefine the power module top event as the union of “both supplies unavailable” and “primary supply fails and transfer fails on demand.” Define the communications module top event as the union of “both links unavailable” and “arbitration controller fails.” Define the joint encoder/voter module top event as the union of “at least two encoders fail (so the majority is wrong)” and “voter fails.”\n\nThe overall adverse event for the robotic platform occurs if any of the three subsystem top events occurs. Derive from first principles an analytic expression for the overall adverse event probability in terms of the given parameters, then evaluate it numerically using the values above. In your reasoning, identify which subsystem(s) dominantly contribute to the overall risk and why, based on the structure of minimal cut sets and magnitudes of the contributing terms.\n\nReport the final overall adverse event probability for a single procedure as a decimal rounded to four significant figures. No units are required.",
            "solution": "The problem requires the derivation and calculation of the overall adverse event probability for a robotic surgery platform, based on the reliability of its three primary subsystems: power, communications, and joint encoder/voter. The overall adverse event, denoted $AE$, occurs if any of the subsystem top events occur. Let $E_{Power}$, $E_{Comm}$, and $E_{Joint}$ be the top-level failure events for the power, communications, and joint encoder/voter subsystems, respectively. The problem states that these subsystems are statistically independent. Therefore, the probability of the overall adverse event, $P(AE)$, is the probability of the union of these three events:\n\n$$P(AE) = P(E_{Power} \\cup E_{Comm} \\cup E_{Joint})$$\n\nDue to independence, the probability that none of the events occur is the product of their non-occurrence probabilities. The probability of the union is then:\n\n$$P(AE) = 1 - P(\\neg E_{Power} \\cap \\neg E_{Comm} \\cap \\neg E_{Joint}) = 1 - P(\\neg E_{Power})P(\\neg E_{Comm})P(\\neg E_{Joint})$$\n$$P(AE) = 1 - (1 - P(E_{Power}))(1 - P(E_{Comm}))(1 - P(E_{Joint}))$$\n\nLet $P_{Power} = P(E_{Power})$, $P_{Comm} = P(E_{Comm})$, and $P_{Joint} = P(E_{Joint})$. The first step is to derive the failure probability for each subsystem.\n\n**1. Power Module Subsystem ($P_{Power}$)**\n\nThe power module consists of two supplies in parallel and a transfer switch. The top event $E_{Power}$ is defined as the union of two events: $A = (\\text{both supplies unavailable})$ and $B = (\\text{primary supply fails and transfer fails on demand})$.\nLet $p_P = 1.5 \\times 10^{-3}$ be the per-supply failure probability and $\\beta_P = 0.02$ be the common-cause failure (CCF) fraction. The total failure probability $p_P$ is partitioned into an independent failure probability, $p_{PI} = p_P(1-\\beta_P)$, and a common-cause failure probability, $p_{PC} = p_P\\beta_P$. The CCF event leads to the failure of both supplies simultaneously.\nThe event $A$ (\"both supplies unavailable\") occurs if both supplies fail independently or if a CCF event occurs.\n$$P(A) = p_{PI}^2 + p_{PC} = (p_P(1-\\beta_P))^2 + p_P\\beta_P$$\nThe event $B$ is the intersection of primary supply failure (let's call its probability $p_P$) and transfer switch failure ($t = 4.0 \\times 10^{-3}$). These are independent events.\n$$P(B) = p_P \\cdot t$$\nThe overall subsystem failure probability $P_{Power}$ is $P(A \\cup B) = P(A) + P(B) - P(A \\cap B)$. The event $A \\cap B$ is \"(both supplies unavailable) AND (primary fails AND transfer fails)\". Since \"both supplies unavailable\" implies \"primary fails\", this simplifies to \"(both supplies unavailable) AND (transfer fails)\". As the transfer switch is independent of the supplies:\n$$P(A \\cap B) = P(A) \\cdot t = ((p_P(1-\\beta_P))^2 + p_P\\beta_P) \\cdot t$$\nCombining these terms:\n$$P_{Power} = \\left[(p_P(1-\\beta_P))^2 + p_P\\beta_P\\right] + p_P t - \\left[(p_P(1-\\beta_P))^2 + p_P\\beta_P\\right] t$$\nNumerically:\n$p_{PI} = (1.5 \\times 10^{-3})(1 - 0.02) = 1.47 \\times 10^{-3}$\n$p_{PC} = (1.5 \\times 10^{-3})(0.02) = 3.0 \\times 10^{-5}$\n$P(A) = (1.47 \\times 10^{-3})^2 + 3.0 \\times 10^{-5} = 2.1609 \\times 10^{-6} + 3.0 \\times 10^{-5} = 3.21609 \\times 10^{-5}$\n$P(B) = (1.5 \\times 10^{-3})(4.0 \\times 10^{-3}) = 6.0 \\times 10^{-6}$\n$P(A \\cap B) = (3.21609 \\times 10^{-5})(4.0 \\times 10^{-3}) = 1.286436 \\times 10^{-7}$\n$$P_{Power} = 3.21609 \\times 10^{-5} + 6.0 \\times 10^{-6} - 1.286436 \\times 10^{-7} = 3.80322564 \\times 10^{-5}$$\n\n**2. Communications Module Subsystem ($P_{Comm}$)**\n\nThe communications module has two redundant links and a master arbitration controller. The top event $E_{Comm}$ is the union of \"both links unavailable\" ($E_L$) and \"arbitration controller fails\" ($E_a$). These are independent events.\nLet $p_C = 2.0 \\times 10^{-3}$ be the per-link failure probability and $\\beta_C = 0.05$ be the CCF fraction.\nThe probability of both links being unavailable is similar to the power supplies:\n$$P(E_L) = (p_C(1-\\beta_C))^2 + p_C\\beta_C$$\nThe controller has an independent failure probability $a = 1.0 \\times 10^{-3}$, so $P(E_a) = a$.\nThe subsystem failure probability $P_{Comm}$ is $P(E_L \\cup E_a) = P(E_L) + P(E_a) - P(E_L)P(E_a)$.\n$$P_{Comm} = \\left[(p_C(1-\\beta_C))^2 + p_C\\beta_C\\right] + a - \\left[(p_C(1-\\beta_C))^2 + p_C\\beta_C\\right]a$$\nNumerically:\n$p_{CI} = (2.0 \\times 10^{-3})(1 - 0.05) = 1.9 \\times 10^{-3}$\n$p_{CC} = (2.0 \\times 10^{-3})(0.05) = 1.0 \\times 10^{-4}$\n$P(E_L) = (1.9 \\times 10^{-3})^2 + 1.0 \\times 10^{-4} = 3.61 \\times 10^{-6} + 1.0 \\times 10^{-4} = 1.0361 \\times 10^{-4}$\n$$P_{Comm} = 1.0361 \\times 10^{-4} + 1.0 \\times 10^{-3} - (1.0361 \\times 10^{-4})(1.0 \\times 10^{-3})$$\n$$P_{Comm} = 1.10361 \\times 10^{-3} - 1.0361 \\times 10^{-7} = 1.10350639 \\times 10^{-3}$$\n\n**3. Joint Encoder/Voter Module Subsystem ($P_{Joint}$)**\n\nThis module uses Triple Modular Redundancy (TMR) for the encoders, which feed a majority voter. The top event $E_{Joint}$ is the union of \"at least two encoders fail\" ($E_{enc}$) and \"voter fails\" ($E_v$). These are independent events.\nLet $p_J = 5.0 \\times 10^{-4}$ be the per-encoder failure probability and $\\beta_J = 0.10$ the CCF fraction. The probability of independent encoder failure is $p_{JI} = p_J(1-\\beta_J)$. We model the CCF term $p_{JC} = p_J\\beta_J$ as the probability of an event that causes all three encoders to fail.\nThe event $E_{enc}$ occurs if a CCF event happens, or if two encoders fail independently, or if all three fail independently. These are disjoint events under this model.\n$$P(E_{enc}) = p_{JC} + \\binom{3}{2} p_{JI}^2 (1-p_{JI}) + p_{JI}^3$$\nSimplifying, $P(E_{enc}) = p_{JC} + 3p_{JI}^2 - 3p_{JI}^3 + p_{JI}^3 = p_J\\beta_J + 3(p_J(1-\\beta_J))^2 - 2(p_J(1-\\beta_J))^3$.\nThe voter failure probability is $v = 8.0 \\times 10^{-4}$.\nThe subsystem failure probability is $P_{Joint} = P(E_{enc} \\cup E_v) = P(E_{enc}) + v - P(E_{enc})v$.\n$$P_{Joint} = \\left[p_J\\beta_J + 3(p_J(1-\\beta_J))^2 - 2(p_J(1-\\beta_J))^3\\right] + v - \\left[p_J\\beta_J + 3(p_J(1-\\beta_J))^2 - 2(p_J(1-\\beta_J))^3\\right]v$$\nNumerically:\n$p_{JI} = (5.0 \\times 10^{-4})(1 - 0.10) = 4.5 \\times 10^{-4}$\n$p_{JC} = (5.0 \\times 10^{-4})(0.10) = 5.0 \\times 10^{-5}$\n$P(E_{enc}) = 5.0 \\times 10^{-5} + 3(4.5 \\times 10^{-4})^2(1 - 4.5 \\times 10^{-4}) + (4.5 \\times 10^{-4})^3$\n$P(E_{enc}) = 5.0 \\times 10^{-5} + 3(2.025 \\times 10^{-7})(0.99955) + 9.1125 \\times 10^{-11} \\approx 5.0 \\times 10^{-5} + 6.072 \\times 10^{-7} \\approx 5.0607 \\times 10^{-5}$\nA more precise calculation using the simplified formula:\n$P(E_{enc}) = 5.0 \\times 10^{-5} + 3(4.5 \\times 10^{-4})^2 - 2(4.5 \\times 10^{-4})^3 = 5.0 \\times 10^{-5} + 6.075 \\times 10^{-7} - 1.8225 \\times 10^{-10} = 5.0607481775 \\times 10^{-5}$\n$$P_{Joint} = 5.060748 \\times 10^{-5} + 8.0 \\times 10^{-4} - (5.060748 \\times 10^{-5})(8.0 \\times 10^{-4})$$\n$$P_{Joint} = 8.5060748 \\times 10^{-4} - 4.048598 \\times 10^{-8} = 8.50566995 \\times 10^{-4}$$\n\n**4. Overall Adverse Event Probability ($P_{AE}$)**\n\nCombining the subsystem probabilities:\n$P_{AE} = 1 - (1 - P_{Power})(1 - P_{Comm})(1 - P_{Joint})$\n$P_{AE} = 1 - (1 - 3.80322564 \\times 10^{-5})(1 - 1.10350639 \\times 10^{-3})(1 - 8.50566995 \\times 10^{-4})$\n$P_{AE} = 1 - (0.9999619677)(0.9988964936)(0.9991494330)$\n$P_{AE} = 1 - 0.9980088916 = 0.0019911084$\n\nRounding to four significant figures, the overall adverse event probability is $0.001991$.\n\n**Dominant Risk Contributors**\n\nTo identify the dominant contributors, we compare the magnitudes of the subsystem failure probabilities:\n$P_{Power} \\approx 3.80 \\times 10^{-5}$\n$P_{Comm} \\approx 1.10 \\times 10^{-3}$\n$P_{Joint} \\approx 8.51 \\times 10^{-4}$\n\nThe total risk is approximately the sum of these probabilities, $P_{AE} \\approx 1.99 \\times 10^{-3}$. The Communications module and the Joint Encoder/Voter module are the dominant contributors, accounting for roughly $55\\%$ and $43\\%$ of the total risk, respectively. The Power module's contribution is minimal at about $2\\%$.\n\nThe reason for this dominance lies in the subsystem architectures. The minimal cut sets with the highest probabilities dictate the overall system risk.\n- In the Communications module, the redundant links have a combined failure probability $P(E_L) \\approx 1.04 \\times 10^{-4}$. However, the single arbitration controller has a failure probability of $a = 1.0 \\times 10^{-3}$. This single component failure is a minimal cut set and its probability is an order of magnitude larger than the redundant link failure, thus dominating $P_{Comm}$.\n- Similarly, in the Joint module, the TMR encoder system has a failure probability $P(E_{enc}) \\approx 5.06 \\times 10^{-5}$. The single voter has a failure probability $v = 8.0 \\times 10^{-4}$. The voter failure is a minimal cut set that dominates $P_{Joint}$.\n\nIn essence, the reliability of both the Communications and Joint modules is limited not by their redundant components but by their non-redundant series components (the controller and the voter), which act as single points of failure with relatively high failure probabilities.",
            "answer": "$$\\boxed{0.001991}$$"
        }
    ]
}
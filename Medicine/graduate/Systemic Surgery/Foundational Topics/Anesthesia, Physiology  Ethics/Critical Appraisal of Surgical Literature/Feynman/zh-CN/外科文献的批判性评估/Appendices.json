{
    "hands_on_practices": [
        {
            "introduction": "在外科实践中，我们经常依赖诊断性测试来指导治疗决策。然而，一项测试的内在准确性（灵敏度与特异性）并不能完全代表其在特定患者群体中的临床价值。本练习将通过计算阳性预测值（$PPV$）和阴性预测值（$NPV$），帮助您掌握如何结合疾病流行率来评估诊断测试的真实表现，从而做出更明智的临床判断 。",
            "id": "5105983",
            "problem": "一个多学科系统外科服务正在评估一种快速生物标志物检测方法，用于在大型择期腹部手术前确诊或排除隐匿性全身性感染。设$D$表示存在隐匿性全身性感染，$\\overline{D}$表示不存在。设$T^{+}$和$T^{-}$分别表示阳性和阴性检测结果。当与金标准验证时，该检测的灵敏度为$0.85$，特异度为$0.90$。该服务当前的患者群体中，$D$的患病率为$0.10$。仅从灵敏度的核心定义$P(T^{+}\\mid D)$、特异度的核心定义$P(T^{-}\\mid \\overline{D})$和患病率的核心定义$P(D)$出发，推导阳性预测值(PPV)（定义为$P(D\\mid T^{+})$）和阴性预测值(NPV)（定义为$P(\\overline{D}\\mid T^{-})$）的表达式，然后使用给定参数计算它们的数值。将PPV和NPV均表示为小数，并将答案四舍五入到四位有效数字。按顺序提供PPV和NPV的数值。",
            "solution": "该问题要求推导和计算阳性预测值(PPV)和阴性预测值(NPV)。我们已知以下定义和数值：\n-   事件 $D$：存在隐匿性全身性感染。\n-   事件 $\\overline{D}$：不存在隐匿性全身性感染（$D$的补集）。\n-   事件 $T^{+}$：阳性检测结果。\n-   事件 $T^{-}$：阴性检测结果。\n-   灵敏度: $P(T^{+}\\mid D) = 0.85$。\n-   特异度: $P(T^{-}\\mid \\overline{D}) = 0.90$。\n-   患病率: $P(D) = 0.10$。\n\n根据给定的患病率，我们可以确定无该疾病的概率：\n$$P(\\overline{D}) = 1 - P(D) = 1 - 0.10 = 0.90$$\n\n我们也可以使用灵敏度和特异度的定义来表示其他检测结果的概率：\n-   假阴性率是指在疾病存在的情况下检测结果为阴性的概率：$P(T^{-}\\mid D) = 1 - P(T^{+}\\mid D) = 1 - 0.85 = 0.15$。\n-   假阳性率是指在疾病不存在的情况下检测结果为阳性的概率：$P(T^{+}\\mid \\overline{D}) = 1 - P(T^{-}\\mid \\overline{D}) = 1 - 0.90 = 0.10$。\n\n阳性预测值(PPV)定义为在检测结果为阳性的情况下患有该疾病的概率，$P(D\\mid T^{+})$。我们使用贝叶斯定理推导如下：\n$$P(D\\mid T^{+}) = \\frac{P(T^{+}\\mid D) P(D)}{P(T^{+})}$$\n为了求出分母$P(T^{+})$，我们使用全概率定律，通过事件$D$和$\\overline{D}$对样本空间进行划分：\n$$P(T^{+}) = P(T^{+}\\mid D) P(D) + P(T^{+}\\mid \\overline{D}) P(\\overline{D})$$\n将已知关系代入此表达式：\n$$P(T^{+}) = (\\text{灵敏度}) \\times (\\text{患病率}) + (1 - \\text{特异度}) \\times (1 - \\text{患病率})$$\n因此，PPV的完整表达式是：\n$$\\text{PPV} = P(D\\mid T^{+}) = \\frac{P(T^{+}\\mid D) P(D)}{P(T^{+}\\mid D) P(D) + (1 - P(T^{-}\\mid \\overline{D}))(1 - P(D))}$$\n\n阴性预测值(NPV)定义为在检测结果为阴性的情况下不患有该疾病的概率，$P(\\overline{D}\\mid T^{-})$。我们也使用贝叶斯定理推导如下：\n$$P(\\overline{D}\\mid T^{-}) = \\frac{P(T^{-}\\mid \\overline{D}) P(\\overline{D})}{P(T^{-})}$$\n为了求出分母$P(T^{-})$，我们再次使用全概率定律：\n$$P(T^{-}) = P(T^{-}\\mid D) P(D) + P(T^{-}\\mid \\overline{D}) P(\\overline{D})$$\n将已知关系代入此表达式：\n$$P(T^{-}) = (1 - \\text{灵敏度}) \\times (\\text{患病率}) + (\\text{特异度}) \\times (1 - \\text{患病率})$$\n因此，NPV的完整表达式是：\n$$\\text{NPV} = P(\\overline{D}\\mid T^{-}) = \\frac{P(T^{-}\\mid \\overline{D}) (1 - P(D))}{(1 - P(T^{+}\\mid D))P(D) + P(T^{-}\\mid \\overline{D})(1 - P(D))}$$\n\n现在，我们代入给定的数值来计算PPV和NPV。\n对于PPV：\n$$\\text{PPV} = \\frac{(0.85)(0.10)}{(0.85)(0.10) + (1 - 0.90)(1 - 0.10)}$$\n$$\\text{PPV} = \\frac{0.085}{0.085 + (0.10)(0.90)}$$\n$$\\text{PPV} = \\frac{0.085}{0.085 + 0.090}$$\n$$\\text{PPV} = \\frac{0.085}{0.175} \\approx 0.48571428...$$\n四舍五入到四位有效数字，我们得到 $\\text{PPV} = 0.4857$。\n\n对于NPV：\n$$\\text{NPV} = \\frac{(0.90)(1 - 0.10)}{(1 - 0.85)(0.10) + (0.90)(1 - 0.10)}$$\n$$\\text{NPV} = \\frac{(0.90)(0.90)}{(0.15)(0.10) + (0.90)(0.90)}$$\n$$\\text{NPV} = \\frac{0.81}{0.015 + 0.81}$$\n$$\\text{NPV} = \\frac{0.81}{0.825} \\approx 0.98181818...$$\n四舍五入到四位有效数字，我们得到 $\\text{NPV} = 0.9818$。\n\nPPV和NPV的最终数值，四舍五入到四位有效数字后，分别为$0.4857$和$0.9818$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.4857  0.9818\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在向患者解释一项新疗法的潜在获益时，如何量化和沟通其效果至关重要。风险差异（$RD$）、风险比（$RR$）和比值比（$OR$）是衡量治疗效果的三种基本指标，但它们的数学定义和解读方式各有不同。通过本练习，您将学会区分这些关键概念，并理解为何某些指标在医患沟通中更具说服力和直观性 。",
            "id": "5106027",
            "problem": "一项系统性外科手术的多中心随机对照试验（RCT）比较了一种新的围手术期抗菌药物预防方案与标准护理。主要终点是30天切口创面感染。对照组中观察到的感染风险（概率）为 $0.12$，干预组中观察到的风险为 $0.08$。请严格从外科文献批判性评价中使用的风险、比值和组间效应量的核心定义出发，推导并计算干预组相对于对照组的风险差、风险比和比值比。按风险差、风险比、比值比的顺序报告你的三个数值结果。请精确表示您的最终值（可接受分数形式）；无需四舍五入。最后，基于患者沟通和概率性效应量解释的第一性原理，论证这三个指标中哪一个最容易传达给患者，并简要说明理由，将您的推理建立在它们的定义属性而非惯例之上。除了提供的风险数据外，不需要任何外部数据，也不应引入任何其他假设。不涉及角度。单位不适用。最终的数值答案必须不带单位。",
            "solution": "该问题要求推导并计算临床试验中使用的三种基本效应量指标：风险差（$RD$）、风险比（$RR$）和比值比（$OR$）。然后，它要求就哪个指标最容易向患者传达提出一个合理的论证。\n\n首先，我们根据所提供的数据建立核心定义。\n设 $R_I$ 表示干预组中结局（切口创面感染）的风险。\n设 $R_C$ 表示对照组中结局的风险。\n根据问题陈述，我们有：\n$R_I = 0.08$\n$R_C = 0.12$\n\n风险的定义是事件发生的概率。在一个组中，事件*不*发生的概率是 $1 - R$。\n\n比值的定义是事件发生的概率与事件不发生的概率之比。\n干预组的感染比值 $O_I$ 由下式给出：\n$$O_I = \\frac{R_I}{1 - R_I}$$\n对照组的感染比值 $O_C$ 由下式给出：\n$$O_C = \\frac{R_C}{1 - R_C}$$\n\n有了这些定义，我们就可以推导并计算所需的三个指标。为了精确起见，我们将使用给定风险的分数表示法：\n$R_I = 0.08 = \\frac{8}{100} = \\frac{2}{25}$\n$R_C = 0.12 = \\frac{12}{100} = \\frac{3}{25}$\n\n1.  **风险差 (RD)**\n    风险差是两组风险之间的绝对差异。其定义为：\n    $$RD = R_I - R_C$$\n    代入给定值：\n    $$RD = \\frac{2}{25} - \\frac{3}{25} = -\\frac{1}{25}$$\n    这也可以表示为 $-0.04$。负值表示干预组的风险降低。\n\n2.  **风险比 (RR)**\n    风险比，也称为相对风险，是干预组风险与对照组风险之比。其定义为：\n    $$RR = \\frac{R_I}{R_C}$$\n    代入给定值：\n    $$RR = \\frac{2/25}{3/25} = \\frac{2}{3}$$\n    $RR$ 小于1表示干预组的风险降低。\n\n3.  **比值比 (OR)**\n    比值比是干预组中事件的比值与对照组中事件的比值之比。其定义为：\n    $$OR = \\frac{O_I}{O_C} = \\frac{R_I / (1 - R_I)}{R_C / (1 - R_C)}$$\n    首先，我们计算每组的比值：\n    $$O_I = \\frac{2/25}{1 - 2/25} = \\frac{2/25}{23/25} = \\frac{2}{23}$$\n    $$O_C = \\frac{3/25}{1 - 3/25} = \\frac{3/25}{22/25} = \\frac{3}{22}$$\n    现在，我们计算这些比值的比率：\n    $$OR = \\frac{O_I}{O_C} = \\frac{2/23}{3/22} = \\frac{2}{23} \\times \\frac{22}{3} = \\frac{44}{69}$$\n    $OR$ 小于1也表示干预组中结局的比值降低。\n\n三个计算出的值是 $RD = -1/25$，$RR = 2/3$ 和 $OR = 44/69$。\n\n最后，我们必须根据它们的定义属性，论证哪个指标最容易传达给患者。\n\n**风险差 ($RD$)** 代表风险的绝对变化。在本例中，$RD = -0.04$。这可以解释为：“如果100人接受标准治疗，我们预计有12人会发生感染。如果这100人接受新方案，我们预计只有8人会发生感染。这意味着每100人中会减少4个感染者。”这种说法直接源自风险差的定义，非常直观。它提供了一种基于频率的解释，外行很容易理解。它直接回答了患者关于新疗法实际益处的问题。此外，它的倒数，即需治数（$NNT = 1/|RD| = 1/0.04 = 25$），也是一个有力的沟通工具：“我们需要用新方案治疗25名患者，才能额外预防一例感染。”\n\n**风险比 ($RR$)** 代表风险的相对变化。在这里，$RR = 2/3$。这可以传达为：“新方案将感染风险降低了三分之一（$1 - 2/3 = 1/3$）”，或者“使用新方案的感染风险仅为标准护理的三分之二。”虽然百分比和相对变化很常用，但如果没有基线风险（$R_C$）的背景，它们可能会产生误导。对于一个常见事件（如12%的基线风险），33%的风险降低远比对于一个非常罕见的事件（如0.003%的基线风险）更有意义。如果患者听到一个“大”的百分比降幅应用于一个“小”的基线风险，他们可能会高估其益处。\n\n**比值比 ($OR$)**，根据其定义，是最难传达的。“比值”作为概率之比（$p/(1-p)$）的概念并非日常直觉的一部分，并且经常与概率本身相混淆。传达 $OR$ 需要先解释比值，然后再解释两个比值的比率。像“感染的比值降低了 $44/69$ 倍”这样的说法，在数学上是精确的，但对于非统计学专业人士来说，在概念上是晦涩难懂的。尽管 $OR$ 具有理想的数学性质（例如，对称性、在逻辑回归中的应用），但它从风险的直接概念中抽象出来，使其不适合用于患者沟通。\n\n**关于可传达性的结论：**\n基于这些定义属性，**风险差 ($RD$)** 是最容易传达的指标。它的绝对性质允许直接、基于频率的解释（例如，“每100人中减少X个事件”），这种解释既直观，又能在不考虑基线风险的情况下避免因相对指标可能引起的误解。它最直接地回应了患者对其个人预后具体变化的关切。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n-\\frac{1}{25}  \\frac{2}{3}  \\frac{44}{69}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "非劣效性试验证明一种新疗法“不比”标准疗法差，这在评估微创技术等外科创新时非常普遍。然而，这类试验结论的可靠性在很大程度上取决于其样本量是否充足。本练习将引导您从第一性原理出发，推导并计算非劣效性试验所需的样本量，让您深刻理解非劣效性界值（$\\Delta$）、统计功效（power）等关键设计参数如何影响研究结论的有效性 。",
            "id": "5105985",
            "problem": "一个外科团队在系统性外科手术中设计一项随机对照试验（Randomized Controlled Trial (RCT)），旨在证明一种新型微创技术在$30$天内发生二元不良事件的风险方面，与标准开放手术相比具有非劣效性。主要终点是至少发生一次重大并发症（是/否）。设 $p_{c}$ 表示对照组的真实风险，$p_{t}$ 表示试验组的真实风险。非劣效性界值在绝对风险差尺度上预先指定为 $\\Delta$，原假设为 $H_{0}: p_{t} - p_{c} \\ge \\Delta$，备择假设为 $H_{1}: p_{t} - p_{c}  \\Delta$。假设以下设计值，这些值与外科文献中通常评估的保守规划方法一致：\n\n- 对照组风险 $p_{c} = 0.10$。\n- 用于规划的预期试验组风险 $p_{t} = 0.10$（即，预期真实差异 $d = p_{t} - p_{c} = 0$）。\n- 绝对非劣效性界值 $\\Delta = 0.03$。\n- 单侧 I 型错误率 $\\alpha = 0.025$。\n- 检验效能 $1 - \\beta = 0.90$。\n- 每组 $n$ 名参与者的均等分配。\n- 使用不带连续性校正的二项分布大样本正态近似，并忽略失访。\n\n从样本比例的中心极限定理行为以及关于绝对风险差的单侧非劣效性检验的 I 型错误和检验效能的定义出发，在上述假设下，推导每组所需样本量 $n$ 的大样本表达式，并计算其值。报告满足设计目标的每组最小整数 $n$。以整数形式表示您的最终数值答案；不要包含单位。",
            "solution": "目标是推导用于比较两个独立比例 $p_t$（试验组）和 $p_c$（对照组）的单侧非劣效性检验的每组样本量 $n$。\n\n设 $\\hat{p}_t$ 和 $\\hat{p}_c$ 分别为试验组和对照组中观测到的不良事件比例，每组的样本量均为 $n$。绝对风险差的估计量为 $\\hat{d} = \\hat{p}_t - \\hat{p}_c$。根据中心极限定理，对于大的 $n$，$\\hat{p}_t$ 近似服从均值为 $p_t$、方差为 $\\frac{p_t(1-p_t)}{n}$ 的正态分布，$\\hat{p}_c$ 近似服从均值为 $p_c$、方差为 $\\frac{p_c(1-p_c)}{n}$ 的正态分布。由于两个试验组是独立的，它们的差值 $\\hat{d}$ 也近似服从正态分布：\n$$ \\hat{d} \\sim N\\left(p_t - p_c, \\frac{p_t(1-p_t)}{n} + \\frac{p_c(1-p_c)}{n}\\right) $$\n差值的标准误是 $SE(\\hat{d}) = \\sqrt{\\frac{p_t(1-p_t) + p_c(1-p_c)}{n}}$。\n\n非劣效性检验的假设是：\n原假设 $H_0: p_t - p_c \\ge \\Delta$\n备择假设 $H_1: p_t - p_c  \\Delta$\n其中 $\\Delta$ 是非劣效性界值。通过拒绝原假设来确立非劣效性。如果观测到的差异 $\\hat{d}$ 小于某个临界值 $C$（即 $\\hat{d}  C$），检验将拒绝 $H_0$。\n\n样本量计算基于满足两个条件：控制 I 型错误率和达到指定的检验效能。\n\n1.  **I 型错误约束：**\nI 型错误率 $\\alpha$ 是在 $H_0$ 为真时错误地拒绝它的概率。这个概率在原假设的边界处被控制，即 $p_t - p_c = \\Delta$。\n$$ \\alpha = P(\\text{Reject } H_0 | p_t - p_c = \\Delta) = P(\\hat{d}  C | p_t - p_c = \\Delta) $$\n设 $p_{c,0}$ 和 $p_{t,0}$ 为在此边界条件下的比例。给定的设计指定 $p_c = 0.10$ 和 $\\Delta = 0.03$，所以我们使用 $p_{c,0}=0.10$ 和 $p_{t,0} = p_c + \\Delta = 0.10 + 0.03 = 0.13$。在此条件下的标准误是 $SE_0 = \\sqrt{\\frac{p_{t,0}(1-p_{t,0}) + p_{c,0}(1-p_{c,0})}{n}}$。\n对 $\\alpha$ 的概率表达式进行标准化：\n$$ P\\left(\\frac{\\hat{d} - \\Delta}{SE_0}  \\frac{C - \\Delta}{SE_0}\\right) = \\alpha $$\n如果 $z_\\alpha$ 是标准正态分布的上 $\\alpha$-分位数（$P(Z  z_\\alpha) = \\alpha$），那么标准化后的值必须等于 $-z_\\alpha$。\n$$ \\frac{C - \\Delta}{SE_0} = -z_{\\alpha} \\implies C = \\Delta - z_{\\alpha} SE_0 $$\n\n2.  **检验效能约束：**\n检验效能 $1-\\beta$ 是在研究设计的特定备择假设下正确拒绝 $H_0$ 的概率。问题指定这个备择假设对应于预期真实差异 $d = p_t - p_c = 0$。\n$$ 1-\\beta = P(\\text{Reject } H_0 | p_t - p_c = d) = P(\\hat{d}  C | p_t - p_c = d) $$\n设 $p_{c,1}$ 和 $p_{t,1}$ 为在此备择假设下的比例。问题提供 $p_c=0.10$ 和预期 $p_t=0.10$，所以 $p_{c,1}=0.10$ 和 $p_{t,1}=0.10$。在此条件下的标准误是 $SE_1 = \\sqrt{\\frac{p_{t,1}(1-p_{t,1}) + p_{c,1}(1-p_{c,1})}{n}}$。\n对检验效能的概率表达式进行标准化：\n$$ P\\left(\\frac{\\hat{d} - d}{SE_1}  \\frac{C - d}{SE_1}\\right) = 1-\\beta $$\n如果 $z_\\beta$ 是标准正态分布的上 $\\beta$-分位数（$P(Z  z_\\beta) = \\beta$），那么 $P(Z  z_\\beta) = 1-\\beta$。标准化后的值必须等于 $z_{\\beta}$。\n$$ \\frac{C - d}{SE_1} = z_{\\beta} \\implies C = d + z_{\\beta} SE_1 $$\n\n3.  **样本量公式的推导：**\n将临界值 $C$ 的两个表达式相等：\n$$ \\Delta - z_{\\alpha} SE_0 = d + z_{\\beta} SE_1 $$\n$$ \\Delta - d = z_{\\alpha} SE_0 + z_{\\beta} SE_1 $$\n代入标准误的公式：\n$$ \\Delta - d = z_{\\alpha} \\sqrt{\\frac{p_{t,0}(1-p_{t,0}) + p_{c,0}(1-p_{c,0})}{n}} + z_{\\beta} \\sqrt{\\frac{p_{t,1}(1-p_{t,1}) + p_{c,1}(1-p_{c,1})}{n}} $$\n令方差和为 $\\sigma_0^2 = p_{t,0}(1-p_{t,0}) + p_{c,0}(1-p_{c,0})$ 和 $\\sigma_1^2 = p_{t,1}(1-p_{t,1}) + p_{c,1}(1-p_{c,1})$。方程变为：\n$$ \\Delta - d = \\frac{1}{\\sqrt{n}}(z_{\\alpha} \\sigma_0 + z_{\\beta} \\sigma_1) $$\n解出 $n$ 得到每组所需样本量的一般大样本表达式：\n$$ n = \\frac{(z_{\\alpha} \\sigma_0 + z_{\\beta} \\sigma_1)^2}{(\\Delta - d)^2} $$\n\n4.  **数值计算：**\n我们代入给定的设计值：\n- 对照组风险 $p_c = 0.10$。\n- 非劣效性界值 $\\Delta = 0.03$。\n- 用于检验效能计算的预期差异 $d = 0$。\n- 单侧 I 型错误率 $\\alpha = 0.025$，对应的标准正态临界值为 $z_{0.025} \\approx 1.96$。\n- 检验效能 $1-\\beta = 0.90$，所以 II 型错误率 $\\beta = 0.10$。这对应的临界值为 $z_{0.10} \\approx 1.28155$。\n\n我们计算两个方差分量：\n- 对于 $H_0$ 边界情景：$p_{c,0} = 0.10$ 和 $p_{t,0} = 0.10 + 0.03 = 0.13$。\n$$ \\sigma_0^2 = p_{t,0}(1-p_{t,0}) + p_{c,0}(1-p_{c,0}) = 0.13(1-0.13) + 0.10(1-0.10) = 0.13(0.87) + 0.10(0.90) = 0.1131 + 0.09 = 0.2031 $$\n- 对于 $H_1$ 规划情景：$p_{c,1} = 0.10$ 和 $p_{t,1} = 0.10$。\n$$ \\sigma_1^2 = p_{t,1}(1-p_{t,1}) + p_{c,1}(1-p_{c,1}) = 0.10(1-0.10) + 0.10(1-0.10) = 0.09 + 0.09 = 0.18 $$\n\n现在将这些值代入样本量公式：\n$$ n = \\frac{(1.96 \\sqrt{0.2031} + 1.28155 \\sqrt{0.18})^2}{(0.03 - 0)^2} $$\n$$ n = \\frac{(1.96 \\times 0.450666... + 1.28155 \\times 0.424264...)^2}{0.0009} $$\n$$ n = \\frac{(0.883305... + 0.543715...)^2}{0.0009} $$\n$$ n = \\frac{(1.427020...)^2}{0.0009} $$\n$$ n = \\frac{2.036388...}{0.0009} \\approx 2262.653 $$\n由于参与者人数必须是整数，并且必须达到或超过检验效能的要求，计算出的样本量必须向上取整到最近的整数。\n$$ n = \\lceil 2262.653 \\rceil = 2263 $$\n因此，每组所需的最小样本量为 $2263$ 名参与者。",
            "answer": "$$\\boxed{2263}$$"
        }
    ]
}
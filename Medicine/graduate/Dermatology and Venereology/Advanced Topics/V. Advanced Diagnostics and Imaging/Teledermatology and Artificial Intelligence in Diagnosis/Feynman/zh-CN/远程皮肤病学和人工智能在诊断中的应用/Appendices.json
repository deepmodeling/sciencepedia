{
    "hands_on_practices": [
        {
            "introduction": "任何人工智能（AI）诊断工具的有效性都必须通过严格的定量评估来验证。本练习将带您深入了解评估二元分类器性能的基础，这些分类器是远程皮肤病学中用于区分恶性与良性病变的核心工具。通过从混淆矩阵的原始数据（真阳性、假阳性、假阴性和真阴性）出发，您将亲手计算如灵敏度（$Se$）、特异性（$Sp$）、阳性预测值（$PPV$）和$F1$分数等关键性能指标，这些是理解和评判任何AI诊断系统性能的通用语言。",
            "id": "4496240",
            "problem": "一项远程皮肤病学服务集成了一个人工智能（AI）黑色素瘤分类器，用于对皮肤镜图像进行分诊。在一个独立测试集上，记录的混淆矩阵计数为 $TP=95$（真阳性）、$FP=15$（假阳性）、$FN=5$（假阴性）和 $TN=85$（真阴性）。仅从医学二元诊断评估中使用的核心定义出发——即敏感性量化了被正确识别的实际患病者的比例，特异性量化了被正确识别的非患病者的比例，阳性预测值量化了在检测结果为阳性时患病的概率，阴性预测值量化了在检测结果为阴性时不患病的概率，而 $F1$分数是精确率和召回率的调和平均数——请为该测试集推导敏感性 $Se$、特异性 $Sp$、阳性预测值 $PPV$、阴性预测值 $NPV$ 和 $F1$分数 $F1$ 的解析表达式，并使用提供的计数进行评估。将每个结果表示为最简精确分数。以单行矩阵的形式提供您的最终答案，顺序为 $Se$、$Sp$、$PPV$、$NPV$、$F1$。",
            "solution": "该问题要求在给定混淆矩阵计数的情况下，推导并评估一个二元诊断测试的五个标准性能指标。提供的计数为：真阳性 ($TP=95$)、假阳性 ($FP=15$)、假阴性 ($FN=5$) 和真阴性 ($TN=85$)。待确定的指标是敏感性 ($Se$)、特异性 ($Sp$)、阳性预测值 ($PPV$)、阴性预测值 ($NPV$) 和 $F1$分数 ($F1$)。我们将根据每个指标的定义推导其解析表达式，然后使用给定数据进行评估。\n\n首先，我们根据基本计数定义一些复合量。患病受试者总数（实际阳性）是真阳性和假阴性之和：\n$$P = TP + FN$$\n未患病受试者总数（实际阴性）是真阴性和假阳性之和：\n$$N = TN + FP$$\n阳性测试结果总数（预测阳性）是真阳性和假阳性之和：\n$$P_{pred} = TP + FP$$\n阴性测试结果总数（预测阴性）是真阴性和假阴性之和：\n$$N_{pred} = TN + FN$$\n\n现在我们推导每个指标。\n\n1.  **敏感性 ($Se$)**：问题将敏感性定义为被正确识别的实际患病者的比例。这是真阳性与患病受试者总数之比。\n    解析表达式为：\n    $$Se = \\frac{TP}{P} = \\frac{TP}{TP + FN}$$\n    代入给定值：\n    $$Se = \\frac{95}{95 + 5} = \\frac{95}{100}$$\n    化为最简分数形式为：\n    $$Se = \\frac{19}{20}$$\n\n2.  **特异性 ($Sp$)**：问题将特异性定义为被正确识别的非患病者的比例。这是真阴性与未患病受试者总数之比。\n    解析表达式为：\n    $$Sp = \\frac{TN}{N} = \\frac{TN}{TN + FP}$$\n    代入给定值：\n    $$Sp = \\frac{85}{85 + 15} = \\frac{85}{100}$$\n    化为最简分数形式为：\n    $$Sp = \\frac{17}{20}$$\n\n3.  **阳性预测值 ($PPV$)**：问题将阳性预测值定义为在检测结果为阳性时患病的概率。这是真阳性与阳性测试结果总数之比。\n    解析表达式为：\n    $$PPV = \\frac{TP}{P_{pred}} = \\frac{TP}{TP + FP}$$\n    代入给定值：\n    $$PPV = \\frac{95}{95 + 15} = \\frac{95}{110}$$\n    化为最简分数形式为：\n    $$PPV = \\frac{19}{22}$$\n\n4.  **阴性预测值 ($NPV$)**：问题将阴性预测值定义为在检测结果为阴性时不患病的概率。这是真阴性与阴性测试结果总数之比。\n    解析表达式为：\n    $$NPV = \\frac{TN}{N_{pred}} = \\frac{TN}{TN + FN}$$\n    代入给定值：\n    $$NPV = \\frac{85}{85 + 5} = \\frac{85}{90}$$\n    化为最简分数形式为：\n    $$NPV = \\frac{17}{18}$$\n\n5.  **F1分数 ($F1$)**：问题将 $F1$分数定义为精确率和召回率的调和平均数。按照标准惯例，“召回率”是敏感性 ($Se$) 的另一个术语，“精确率”是阳性预测值 ($PPV$) 的另一个术语。两个数 $a$ 和 $b$ 的调和平均数是 $H = \\frac{2ab}{a+b}$。\n    因此，$F1$分数为：\n    $$F1 = \\frac{2 \\times PPV \\times Se}{PPV + Se}$$\n    我们可以代入 $Se$ 和 $PPV$ 的解析表达式，以基本计数项推导出一个公式：\n    $$F1 = \\frac{2 \\left( \\frac{TP}{TP+FP} \\right) \\left( \\frac{TP}{TP+FN} \\right)}{\\frac{TP}{TP+FP} + \\frac{TP}{TP+FN}}$$\n    通过通分和化简，该表达式可简化为：\n    $$F1 = \\frac{2TP}{2TP + FP + FN}$$\n    使用此表达式进行计算很直接。代入给定值：\n    $$F1 = \\frac{2 \\times 95}{2 \\times 95 + 15 + 5} = \\frac{190}{190 + 20} = \\frac{190}{210}$$\n    化为最简分数形式为：\n    $$F1 = \\frac{19}{21}$$\n\n这五个评估指标以最简精确分数表示为：$Se = \\frac{19}{20}$，$Sp = \\frac{17}{20}$，$PPV = \\frac{19}{22}$，$NPV = \\frac{17}{18}$ 和 $F1 = \\frac{19}{21}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{19}{20}  \\frac{17}{20}  \\frac{19}{22}  \\frac{17}{18}  \\frac{19}{21}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "了解一个AI模型的固有性能（如灵敏度和特异性）是第一步，但更关键的是如何将这些指标应用于具体的临床情境中。本练习将演示如何利用贝叶斯推断，将AI分类器的性能与特定患者群体的疾病先验概率（患病率）相结合，从而计算出阳性检测结果后的后验概率。通过掌握似然比（Likelihood Ratio）这一强大工具，您将学会如何将抽象的性能数据转化为对临床决策有直接指导意义的个体化风险评估。",
            "id": "4496218",
            "problem": "一个远程皮肤病分诊服务部署了一个人工智能（AI）分类器，用于分析远程提交的皮肤镜图像，以进行黑色素瘤风险分层。在此背景下，考虑对类似于初级保健转诊人群进行黑色素瘤与非黑色素瘤的二元分类。分类器的诊断性能由灵敏度和特异度来概括，并使用贝叶斯推断在分类器输出阳性结果后更新疾病概率。\n\n从灵敏度 $Se$ 是条件概率 $P(\\text{positive} \\mid \\text{melanoma})$ 且特异度 $Sp$ 是条件概率 $P(\\text{negative} \\mid \\text{no melanoma})$ 的基本定义出发，并根据久经考验的贝叶斯定理优势比形式（即后验优势比等于先验优势比乘以观测结果的似然比），从 $Se$ 和 $Sp$ 推导出阳性似然比，然后计算在AI结果为阳性后的黑色素瘤后验优势比和后验概率。\n\n假设灵敏度 $Se=0.92$，特异度 $Sp=0.88$，以及黑色素瘤的检验前（先验）概率 $p=0.10$。仅使用这些输入数据以及上述基本定义和事实，确定：\n- 阳性似然比，\n- 在AI结果为阳性时的后验优势比，\n- 在AI结果为阳性时的黑色素瘤后验概率。\n\n以精确值（不进行四舍五入）表示最终结果。不包含单位。按以上列出的顺序回答这三个量。",
            "solution": "题目要求计算三个量：阳性似然比（$LR+$）、在检测结果为阳性时的黑色素瘤后验优势比，以及在检测结果为阳性时的黑色素瘤后验概率。给定以下数值：\n- 灵敏度, $Se = P(\\text{positive} \\mid \\text{melanoma}) = 0.92$\n- 特异度, $Sp = P(\\text{negative} \\mid \\text{no melanoma}) = 0.88$\n- 检验前（先验）概率, $p = P(\\text{melanoma}) = 0.10$\n\n令 $M$ 表示患者患有黑色素瘤的事件，$M^c$ 表示患者未患黑色素瘤的事件。令 $T^+$ 表示AI分类器结果为阳性的事件，$T^-$ 表示结果为阴性的事件。\n给定信息可以写为：\n- $Se = P(T^+ \\mid M) = 0.92$\n- $Sp = P(T^- \\mid M^c) = 0.88$\n- $p = P(M) = 0.10$。由此，未患黑色素瘤的先验概率为 $P(M^c) = 1 - P(M) = 1 - 0.10 = 0.90$。\n\n**1. 阳性似然比（$LR+$）的推导与计算**\n\n阳性似然比 $LR+$ 定义为患病个体中检测结果为阳性的概率与未患病个体中检测结果为阳性的概率之比。\n$$LR+ = \\frac{P(T^+ \\mid M)}{P(T^+ \\mid M^c)}$$\n分子是灵敏度 $Se$，给定值为 $0.92$。\n$$P(T^+ \\mid M) = Se = 0.92$$\n分母 $P(T^+ \\mid M^c)$ 是假阳性概率。我们已知特异度 $Sp = P(T^- \\mid M^c)$。由于检测结果只能是阳性或阴性，对于非黑色素瘤组，这些条件概率之和必须为 $1$。\n$$P(T^+ \\mid M^c) + P(T^- \\mid M^c) = 1$$\n因此，我们可以计算出假阳性率：\n$$P(T^+ \\mid M^c) = 1 - P(T^- \\mid M^c) = 1 - Sp$$\n代入给定的 $Sp$ 值：\n$$P(T^+ \\mid M^c) = 1 - 0.88 = 0.12$$\n现在，我们可以计算阳性似然比：\n$$LR+ = \\frac{Se}{1 - Sp} = \\frac{0.92}{0.12} = \\frac{92}{12}$$\n将分子和分母同除以它们的最大公约数 $4$ 来简化分数：\n$$LR+ = \\frac{23}{3}$$\n\n**2. 后验优势比的计算**\n\n题目指出，后验优势比是通过将先验优势比乘以似然比来计算的。首先，我们必须计算黑色素瘤的先验优势比。先验优势比是患有该疾病的先验概率与未患该疾病的先验概率之比。\n$$\\text{Prior Odds} = \\frac{P(M)}{P(M^c)} = \\frac{p}{1-p}$$\n使用给定的先验概率 $p=0.10$：\n$$\\text{Prior Odds} = \\frac{0.10}{1 - 0.10} = \\frac{0.10}{0.90} = \\frac{1}{9}$$\n现在，我们对阳性检测结果应用贝叶斯定理的优势比形式：\n$$\\text{Posterior Odds} = \\text{Prior Odds} \\times LR+$$\n代入我们已经计算出的值：\n$$\\text{Posterior Odds} = \\frac{1}{9} \\times \\frac{23}{3} = \\frac{23}{27}$$\n这便是在AI结果为阳性时患有黑色素瘤的后验优势比。\n\n**3. 后验概率的计算**\n\n最后一步是将后验优势比转换回概率。令后验概率为 $p_{post} = P(M \\mid T^+)$。后验优势比定义为后验概率与其补集之比：\n$$\\text{Posterior Odds} = \\frac{P(M \\mid T^+)}{P(M^c \\mid T^+)} = \\frac{p_{post}}{1 - p_{post}}$$\n我们已经求得后验优势比为 $\\frac{23}{27}$。我们可以建立方程并求解 $p_{post}$：\n$$\\frac{p_{post}}{1 - p_{post}} = \\frac{23}{27}$$\n$$27 \\cdot p_{post} = 23(1 - p_{post})$$\n$$27 \\cdot p_{post} = 23 - 23 \\cdot p_{post}$$\n$$27 \\cdot p_{post} + 23 \\cdot p_{post} = 23$$\n$$50 \\cdot p_{post} = 23$$\n$$p_{post} = \\frac{23}{50}$$\n或者，可以使用将优势比（$O$）转换为概率（$P$）的通用公式：$P = \\frac{O}{1+O}$。\n$$p_{post} = \\frac{\\text{Posterior Odds}}{1 + \\text{Posterior Odds}} = \\frac{23/27}{1 + 23/27} = \\frac{23/27}{(27/27) + (23/27)} = \\frac{23/27}{50/27} = \\frac{23}{50}$$\n这便是在AI结果为阳性时患有黑色素瘤的后验概率。其小数值为 $0.46$。\n\n所要求的三个量按顺序为：\n- 阳性似然比: $\\frac{23}{3}$\n- 后验优势比: $\\frac{23}{27}$\n- 后验概率: $\\frac{23}{50}$",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{23}{3}  \\frac{23}{27}  \\frac{23}{50} \\end{pmatrix}}$$"
        },
        {
            "introduction": "人工智能在皮肤病学中的应用远不止于良恶性分类，它在量化疾病严重程度方面同样扮演着重要角色，例如通过精确分割和测量病变区域。本练习将您的视野从分类任务扩展到图像分割任务，介绍用于评估分割准确性的核心指标——戴斯系数（Dice coefficient）。您将通过计算戴斯系数来量化AI分割结果与皮肤科医生手动标注的“金标准”之间的一致性，并进一步探讨该数值对于远程监测银屑病等疾病的临床意义。",
            "id": "4496220",
            "problem": "一个远程皮肤病学服务部署了一套人工智能 (AI) 系统，用于从智能手机照片中分割银屑病斑块，以辅助评估银屑病面积和严重程度指数 (PASI)。对于单张图像，该系统的二元分割输出与皮肤科医生的手动标注进行比较。混淆矩阵的条目定义如下：真阳性 ($TP$) 是被正确分割的斑块像素，假阳性 ($FP$) 是被分割为斑块的非斑块像素，而假阴性 ($FN$) 是分割过程中遗漏的斑块像素。假设系统得出 $TP=800$，$FP=200$，以及 $FN=100$。\n\n请从两个掩码之间基于集合的重叠定义出发，推导出 Dice 系数作为 $TP$、$FP$ 和 $FN$ 函数的公式，然后计算其在此案例下的精确值。请将 Dice 系数表示为精确的分数。最后，基于 PASI 面积成分的基本属性以及分割重叠在面积估计中的作用，简要解释计算出的 Dice 值对于远程护理中面积估计可靠性的临床意义。\n\n您的最终数值答案必须是 Dice 系数，以未经四舍五入的精确分数表示。无需单位。",
            "solution": "解答按要求分为三部分：推导 Dice 系数公式，根据给定数据计算其值，以及进行临床解释。\n\n**1. Dice 系数公式的推导**\n\nDice 系数，也称为 Sørensen–Dice 系数，是一种用于衡量两个样本相似性的统计量。在图像分割的背景下，它衡量预测的分割掩码与真实标签掩码之间的重叠程度。\n\n设 $A$ 为人工智能 (AI) 系统分割为斑块的像素集合（预测集），设 $B$ 为皮肤科医生手动标注为斑块的像素集合（真实标签集）。\n\nDice 系数 $D$ 根据这些集合定义为它们交集大小的两倍除以它们大小之和：\n$$D = \\frac{2 |A \\cap B|}{|A| + |B|}$$\n其中 $|S|$ 表示集合 $S$ 的基数（元素数量）。\n\n我们可以使用像素级别二元分类的标准混淆矩阵术语来表示基数 $|A \\cap B|$、$|A|$ 和 $|B|$：真阳性 ($TP$)、假阳性 ($FP$) 和假阴性 ($FN$)。\n\n-   集合的交集 $|A \\cap B|$ 代表同时存在于预测掩码和真实标签掩码中的像素数量。根据定义，这些是被正确识别为斑块的像素，对应于真阳性的数量。因此：\n    $$|A \\cap B| = TP$$\n\n-   预测集的大小 $|A|$ 是 AI 分类为斑块的总像素数。这包括被正确识别为斑块的像素 ($TP$) 和被错误识别为斑块的像素（即被分类为斑块的非斑块像素），也就是假阳性 ($FP$)。因此：\n    $$|A| = TP + FP$$\n\n-   真实标签集的大小 $|B|$ 是实际上是斑块的总像素数。这包括被正确识别为斑块的像素 ($TP$) 和 AI 未能识别出的实际斑块像素，也就是假阴性 ($FN$)。因此：\n    $$|B| = TP + FN$$\n\n将这些表达式代入 Dice 系数的基于集合的定义中，得到以 $TP$、$FP$ 和 $FN$ 表示的公式：\n$$D = \\frac{2 (TP)}{(TP + FP) + (TP + FN)}$$\n$$D = \\frac{2 TP}{2 TP + FP + FN}$$\n这就是推导出的 Dice 系数公式。\n\n**2. Dice 系数的计算**\n\n问题提供了 AI 系统在单张图像上性能的以下数值：\n-   $TP = 800$\n-   $FP = 200$\n-   $FN = 100$\n\n我们将这些值代入推导出的公式中：\n$$D = \\frac{2 \\times 800}{2 \\times 800 + 200 + 100}$$\n进行算术运算：\n$$D = \\frac{1600}{1600 + 200 + 100}$$\n$$D = \\frac{1600}{1900}$$\n为了将其表示为最简的精确分数，我们将分子和分母除以它们的最大公约数，即 $100$：\n$$D = \\frac{16}{19}$$\n\n**3. 临床解释**\n\n银屑病面积和严重程度指数 (PASI) 是一个综合评分，其中包括对受银屑病影响的体表面积的评估。在远程皮肤病学环境中，这个面积是通过照片中分割出的斑块区域来估计的。因此，面积估计的可靠性关键取决于分割算法的准确性。\n\nDice 系数量化了 AI 分割与临床真实标签之间的空间重叠度。值为 $1$ 表示完美重叠，值为 $0$ 表示没有重叠。计算出的 Dice 系数 $\\frac{16}{19} \\approx 0.842$ 表明 AI 与皮肤科医生之间存在高度的一致性。\n\n这个高值表明 AI 系统在估计斑块面积方面基本可靠。然而，它并非完美。基础指标揭示了一种特定的偏差：真实标签掩码的面积是 $|B| = TP + FN = 800 + 100 = 900$ 像素，而 AI 预测掩码的面积是 $|A| = TP + FP = 800 + 200 = 1000$ 像素。由于 $FP > FN$，该系统倾向于高估斑块面积。这种高估虽然在整体高度重叠的背景下相对较小，但可能导致 PASI 面积评分略微偏高。对于远程患者监测而言，临床决策可能受 PASI 评分趋势的指导，因此，理解这种系统性偏差对于临床医生正确解读 AI 辅助的测量结果并做出明智的治疗调整至关重要。Dice 系数为这种分割质量提供了一个单一、稳健的总结性指标，这对于建立对 AI 工具在远程护理中实用性的信任是基础性的。",
            "answer": "$$\\boxed{\\frac{16}{19}}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Screening tools are essential for identifying individuals who may have a substance use disorder, but a positive test is not a definitive diagnosis. This exercise explores the concept of Positive Predictive Value ($PPV$), a crucial metric that helps clinicians understand the true probability of a disease given a positive test result. By applying Bayes' theorem to a realistic clinical scenario, you will learn how prevalence impacts test interpretation and why it is critical for communicating risk accurately to patients.",
            "id": "4981484",
            "problem": "A primary care clinic implements a new screening questionnaire for substance use disorder (SUD). In this population, the prior probability (prevalence) of SUD is $\\pi = 0.05$. The screening test has sensitivity $0.85$ and specificity $0.90$. Using Bayes' theorem and the core definitions of sensitivity, specificity, and prevalence, derive from first principles the positive predictive value (PPV), defined as $PPV = P(\\text{SUD} \\mid \\text{Test positive})$, and then compute its numerical value for this setting. Express your final answer as a decimal and round to four significant figures. Do not use a percent sign.",
            "solution": "To compute the positive predictive value (PPV), we start from the definitions and Bayes' theorem.\n\nLet $D$ denote the event that a patient has substance use disorder (SUD), and let $T+$ denote a positive test result.\n\nCore definitions:\n- Sensitivity is $P(T+ \\mid D)$.\n- Specificity is $P(T- \\mid \\neg D)$.\n- Prevalence is $P(D) = \\pi$.\n\nWe seek $PPV = P(D \\mid T+)$.\n\nBy Bayes' theorem,\n$$\nP(D \\mid T+) = \\frac{P(T+ \\mid D)\\,P(D)}{P(T+)}.\n$$\n\nThe total probability of a positive test result $P(T+)$ can be expressed using the law of total probability:\n$$\nP(T+) = P(T+ \\mid D)\\,P(D) + P(T+ \\mid \\neg D)\\,P(\\neg D).\n$$\n\nWe use specificity to relate $P(T+ \\mid \\neg D)$ to known quantities. Since specificity $= P(T- \\mid \\neg D)$, we have\n$$\nP(T+ \\mid \\neg D) = 1 - P(T- \\mid \\neg D) = 1 - \\text{specificity}.\n$$\n\nSubstitute these into the expression for $P(D \\mid T+)$:\n$$\nP(D \\mid T+) = \\frac{P(T+ \\mid D)\\,P(D)}{P(T+ \\mid D)\\,P(D) + P(T+ \\mid \\neg D)\\,P(\\neg D)} = \\frac{(\\text{sensitivity})\\,\\pi}{(\\text{sensitivity})\\,\\pi + (1 - \\text{specificity})\\,(1 - \\pi)}.\n$$\n\nNow substitute the given values:\n- Sensitivity $= 0.85$,\n- Specificity $= 0.90$,\n- Prevalence $\\pi = 0.05$.\n\nCompute the numerator:\n$$\n(\\text{sensitivity})\\,\\pi = 0.85 \\times 0.05 = 0.0425.\n$$\n\nCompute the false positive rate:\n$$\n1 - \\text{specificity} = 1 - 0.90 = 0.10.\n$$\n\nCompute $(1 - \\pi)$:\n$$\n1 - \\pi = 1 - 0.05 = 0.95.\n$$\n\nCompute the denominator:\n$$\n(\\text{sensitivity})\\,\\pi + (1 - \\text{specificity})\\,(1 - \\pi) = 0.0425 + 0.10 \\times 0.95 = 0.0425 + 0.095 = 0.1375.\n$$\n\nTherefore,\n$$\nPPV = \\frac{0.0425}{0.1375} = 0.3090909\\ldots\n$$\n\nRounded to four significant figures, the PPV is $0.3091$.",
            "answer": "$$\\boxed{0.3091}$$"
        },
        {
            "introduction": "Matching a patient to the correct level of care is a fundamental component of effective addiction treatment, guided by principles of safety and using the least restrictive environment possible. This practice challenges you to translate the complex, multidimensional framework of the American Society of Addiction Medicine (ASAM) criteria into a structured decision algorithm. You will see how formalizing clinical judgment helps ensure that patient placement is consistent, evidence-based, and tailored to individual needs across various domains of life and function.",
            "id": "4981485",
            "problem": "You are asked to design and implement a deterministic decision algorithm that maps American Society of Addiction Medicine (ASAM) multidimensional assessment results to a recommended level of care. The algorithm must operate on six severity scores corresponding to the ASAM dimensions, each scored on an ordinal scale from $0$ (no problem/risk) to $4$ (severe, imminent risk):\n\n- $D_1$: Acute intoxication and/or withdrawal potential.\n- $D_2$: Biomedical conditions and complications.\n- $D_3$: Emotional, behavioral, or cognitive conditions and complications.\n- $D_4$: Readiness to change.\n- $D_5$: Relapse, continued use, or continued problem potential.\n- $D_6$: Recovery and living environment.\n\nLet the input vector be $\\mathbf{s} = (s_1, s_2, s_3, s_4, s_5, s_6)$ with $s_i \\in \\{0,1,2,3,4\\}$. The algorithm must output a single integer $\\ell \\in \\{0,1,2,3,4\\}$ encoding the recommended level of care as follows (coarse categories aligned with ASAM levels): $0$ for early intervention (Level $0.5$), $1$ for outpatient (Level $1$), $2$ for intensive outpatient or partial hospitalization (Level $2$), $3$ for residential or medically monitored inpatient (Level $3$), and $4$ for medically managed inpatient (Level $4$).\n\nFundamental base and design principles you must use:\n- Monotonicity of risk and need: higher $s_i$ signifies greater severity and need for structure/supervision; recommended care $\\ell$ must be nondecreasing in each $s_i$.\n- Patient safety and least restrictive setting: choose the minimal $\\ell$ that satisfies safety and support requirements implied by the severity profile.\n- Multi-criteria dominance: when multiple constraints apply, the required $\\ell$ is the maximum lower bound required by any applicable constraint, except when an exact level is required by a safety override.\n\nDefine the following medically grounded threshold constraints that your algorithm must enforce. These thresholds represent clear clinical cutoffs per dimension that imply lower bounds on $\\ell$:\n\nSafety override (medical):\n- If $s_1 \\ge 4$ or $s_2 \\ge 4$, then $\\ell = 4$.\n\nMedical monitoring thresholds:\n- If $s_1 = 3$ or $s_2 = 3$, then $\\ell \\ge 3$.\n- If $s_1 = 2$ or $s_2 = 2$, then $\\ell \\ge 2$.\n\nPsychiatric containment thresholds (environment contingent):\n- If $s_3 \\ge 3$ and $s_6 \\ge 2$, then $\\ell \\ge 3$.\n- If $s_3 = 2$ and $s_6 \\ge 2$, then $\\ell \\ge 2$.\n\nMotivational structure thresholds (contingent on risk context):\n- If $s_4 = 4$ and $\\max(s_5, s_6) \\ge 2$, then $\\ell \\ge 3$.\n- If $s_4 = 3$ and $\\max(s_5, s_6) \\ge 2$, then $\\ell \\ge 2$.\n\nRelapse risk thresholds (environment contingent):\n- If $s_5 \\ge 3$ and $s_6 \\ge 2$, then $\\ell \\ge 3$.\n- If $s_5 = 2$ and $s_6 \\ge 2$, then $\\ell \\ge 2$.\n\nEnvironmental risk alone (without psychiatric or relapse comorbidity):\n- If $s_6 \\ge 3$ and $\\max(s_3, s_5) \\le 1$, then $\\ell \\ge 2$.\n\nEarly intervention boundary:\n- If $\\max(s_1, s_2, s_3, s_4, s_5, s_6) \\le 1$, then $\\ell = 0$.\n\nBaseline outpatient if no other threshold raises the level:\n- Otherwise, if none of the above constraints enforce $\\ell \\ge 2$ or higher and not early intervention, set $\\ell = 1$.\n\nAlgorithmic requirement:\n- Your program must compute the minimal $\\ell$ consistent with all applicable lower bounds, applying the safety override first, then taking the maximum of all lower bounds implied by the other constraints. Ensure $\\ell \\in \\{0,1,2,3,4\\}$.\n\nTest suite:\nFor each of the following input vectors $\\mathbf{s}$, compute the corresponding $\\ell$ and aggregate results as specified below.\n\n- Case $1$: $\\mathbf{s} = (1,1,0,1,1,1)$\n- Case $2$: $\\mathbf{s} = (1,0,1,2,1,1)$\n- Case $3$: $\\mathbf{s} = (1,1,1,2,2,2)$\n- Case $4$: $\\mathbf{s} = (1,1,3,2,1,2)$\n- Case $5$: $\\mathbf{s} = (4,1,1,1,1,1)$\n- Case $6$: $\\mathbf{s} = (3,1,1,1,1,1)$\n- Case $7$: $\\mathbf{s} = (1,1,1,4,3,2)$\n- Case $8$: $\\mathbf{s} = (1,1,1,1,1,3)$\n- Case $9$: $\\mathbf{s} = (2,1,1,1,1,1)$\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., `[r_1,r_2,\\dots,r_9]`), where each $r_i$ is the integer $\\ell$ for the corresponding test case in the exact order provided above. No additional text should be printed.",
            "solution": "Let the input vector be $\\mathbf{s} = (s_1, s_2, s_3, s_4, s_5, s_6)$. The algorithm determines the level of care $\\ell$ by implementing the provided rules in a hierarchical fashion.\n\n**Step 1: Check for Absolute Overrides**\n\nThe algorithm first evaluates rules that dictate a specific level of care, overriding all other considerations.\n\n1.  **Safety Override**: If $s_1 \\ge 4$ or $s_2 \\ge 4$, imminent medical risk requires the highest level of care. The algorithm immediately returns $\\ell = 4$.\n2.  **Early Intervention Boundary**: If all severity scores are minimal ($\\max(\\mathbf{s}) \\le 1$), the case corresponds to early intervention. The algorithm returns $\\ell = 0$.\n\n**Step 2: Determine Minimum Required Level from Lower-Bound Constraints**\n\nIf neither absolute override is met, the algorithm calculates the minimum required level based on the remaining constraints. It initializes a minimum level, $\\ell_{min} = 0$, and updates it by taking the maximum of its current value and any new lower bound triggered by the rules. This ensures the final level meets the most stringent requirement.\n\nThe rules are evaluated as follows:\n*   **Medical Monitoring**: If $s_1=3$ or $s_2=3$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$. Else if $s_1=2$ or $s_2=2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n*   **Psychiatric Containment**: If $s_3 \\ge 3$ and $s_6 \\ge 2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$. Else if $s_3=2$ and $s_6 \\ge 2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n*   **Motivational Structure**: If $s_4 = 4$ and $\\max(s_5, s_6) \\ge 2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$. Else if $s_4=3$ and $\\max(s_5, s_6) \\ge 2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n*   **Relapse Risk**: If $s_5 \\ge 3$ and $s_6 \\ge 2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$. Else if $s_5=2$ and $s_6 \\ge 2$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n*   **Environmental Risk Alone**: If $s_6 \\ge 3$ and $\\max(s_3, s_5) \\le 1$, set $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n\n**Step 3: Apply Baseline Rule and Finalize**\n\nAfter evaluating all lower-bound constraints:\n*   If $\\ell_{min}$ is greater than 0, this value is the final recommended level, $\\ell = \\ell_{min}$.\n*   If $\\ell_{min}$ remains 0, it means no specific risk thresholds for higher care were met. Since the early intervention case was already handled, the patient defaults to the baseline outpatient level, $\\ell = 1$.\n\nThis logic is implemented in the following Python code.\n\n```python\nimport numpy as np\n\ndef determine_level_of_care(s: tuple[int, ...]) - int:\n    \"\"\"\n    Computes the ASAM level of care based on a 6-dimensional severity vector.\n\n    Args:\n        s: A tuple of 6 integers (s1, s2, s3, s4, s5, s6), where each\n           score is on an ordinal scale from 0 to 4.\n\n    Returns:\n        An integer l from 0 to 4 representing the recommended level of care.\n    \"\"\"\n    s1, s2, s3, s4, s5, s6 = s\n\n    # Step 1: Check for Absolute Overrides\n    if s1 = 4 or s2 = 4:\n        return 4\n    if np.max(s) = 1:\n        return 0\n\n    # Step 2: Determine Minimum Required Level from Lower-Bound Constraints\n    min_level = 0\n\n    # Medical monitoring thresholds\n    if s1 == 3 or s2 == 3:\n        min_level = max(min_level, 3)\n    elif s1 == 2 or s2 == 2:\n        min_level = max(min_level, 2)\n\n    # Psychiatric containment thresholds\n    if s3 = 3 and s6 = 2:\n        min_level = max(min_level, 3)\n    elif s3 == 2 and s6 = 2:\n        min_level = max(min_level, 2)\n\n    # Motivational structure thresholds\n    if s4 == 4 and max(s5, s6) = 2:\n        min_level = max(min_level, 3)\n    elif s4 == 3 and max(s5, s6) = 2:\n        min_level = max(min_level, 2)\n\n    # Relapse risk thresholds\n    if s5 = 3 and s6 = 2:\n        min_level = max(min_level, 3)\n    elif s5 == 2 and s6 = 2:\n        min_level = max(min_level, 2)\n\n    # Environmental risk alone\n    if s6 = 3 and max(s3, s5) = 1:\n        min_level = max(min_level, 2)\n\n    # Step 3: Apply Baseline Rule and Finalize\n    if min_level == 0:\n        return 1\n    else:\n        return min_level\n```",
            "answer": "`[0,1,2,3,4,3,3,2,2]`"
        },
        {
            "introduction": "The safe management of withdrawal from substances like benzodiazepines often involves a gradual reduction, or taper, of medication to minimize discomfort and medical risks. This problem provides a hands-on application of mathematical modeling to clinical pharmacology, asking you to design a proportional diazepam taper schedule. By deriving the dose over time from first principles, you will gain insight into how quantitative reasoning directly informs the creation of safe, patient-specific detoxification protocols.",
            "id": "4981472",
            "problem": "A medically supervised benzodiazepine taper is planned for a patient on a stable daily dose of diazepam of $40$ mg. The taper plan follows a proportional reduction model consistent with harm reduction and stepped care: at the start of each new week, the daily dose is reduced by a fixed fraction of the current daily dose and then kept constant for that week. Specifically, the plan reduces the dose by $10$% of the current dose at each weekly step. Assume discrete weekly adjustments with no intraweek variation.\n\nStarting from the definition of a proportional reduction process in discrete time and without invoking any pre-memorized taper formulas, derive a symbolic expression for the daily dose after $n$ full weeks as a function of $n$. Then determine the smallest integer number of whole weeks required for the daily dose to become strictly less than $5$ mg. Express your final answer as an integer number of weeks.",
            "solution": "Let $D_n$ represent the daily dose of diazepam for the week following the $n$-th weekly reduction. The indexing begins at $n=0$, where $D_0$ is the initial, untapered dose.\nThe initial dose is given as $D_0 = 40$ mg.\nThe reduction fraction is $r = 10\\% = 0.1$.\n\nThe problem states that at each weekly step, the dose is reduced by a fixed fraction of the current dose. This can be formulated as a recurrence relation. The dose for week $n+1$, $D_{n+1}$, is the dose from the previous week, $D_n$, minus a reduction of $r D_n$.\n\n$$\nD_{n+1} = D_n - r D_n = D_n(1 - r)\n$$\n\nThis relation defines a discrete-time proportional reduction process. To derive the symbolic expression for $D_n$ as a function of $n$, we can unroll the recurrence from first principles:\n\nThe dose for week $0$ (the initial state) is $D_0$.\nThe dose for week $1$, after one reduction, is:\n$$\nD_1 = D_0(1 - r)\n$$\nThe dose for week $2$, after the second reduction, is:\n$$\nD_2 = D_1(1 - r) = [D_0(1 - r)](1 - r) = D_0(1 - r)^2\n$$\nThe dose for week $3$, after the third reduction, is:\n$$\nD_3 = D_2(1 - r) = [D_0(1 - r)^2](1 - r) = D_0(1 - r)^3\n$$\nThe pattern reveals the general formula for the dose after $n$ full weeks:\n$$\nD_n = D_0(1 - r)^n\n$$\nThis is the required symbolic expression for the daily dose as a function of $n$.\n\nNext, we must determine the smallest integer number of weeks, $n$, for the daily dose to become strictly less than $5$ mg. We must solve the following inequality for the smallest integer $n$:\n$$\nD_n  5\n$$\nSubstituting the derived expression for $D_n$ and the given values $D_0 = 40$ and $r = 0.1$:\n$$\n40(1 - 0.1)^n  5\n$$\n$$\n40(0.9)^n  5\n$$\nTo solve for $n$, we first isolate the exponential term:\n$$\n(0.9)^n  \\frac{5}{40} = \\frac{1}{8}\n$$\nTo solve for the exponent $n$, we apply the natural logarithm ($\\ln$) to both sides. Since $\\ln(x)$ is a strictly increasing function, the direction of the inequality is preserved:\n$$\n\\ln\\left((0.9)^n\\right)  \\ln\\left(\\frac{1}{8}\\right)\n$$\nUsing the logarithm property $\\ln(a^b) = b \\ln(a)$:\n$$\nn \\ln(0.9)  -\\ln(8)\n$$\nWe must now isolate $n$ by dividing by $\\ln(0.9)$. Since $0  0.9  1$, its natural logarithm is negative. Dividing an inequality by a negative number reverses the direction of the inequality symbol:\n$$\nn  \\frac{-\\ln(8)}{\\ln(0.9)}\n$$\nThis can be rewritten as:\n$$\nn  \\frac{\\ln(8)}{-\\ln(0.9)} = \\frac{\\ln(8)}{\\ln(1/0.9)}\n$$\nWe evaluate this expression numerically:\n$$\nn  \\frac{2.07944...}{0.10536...} \\approx 19.735\n$$\nSince $n$ must be an integer representing the number of whole weeks, and $n$ must be strictly greater than $19.735$, the smallest integer that satisfies this condition is $n=20$.\n\nTo verify, we check the dose at week $n=19$ and week $n=20$:\nFor $n=19$: $D_{19} = 40(0.9)^{19} \\approx 40(0.135085) \\approx 5.4034$ mg. This is not less than $5$ mg.\nFor $n=20$: $D_{20} = 40(0.9)^{20} \\approx 40(0.121577) \\approx 4.8631$ mg. This is less than $5$ mg.\n\nTherefore, the smallest integer number of whole weeks required is $20$.",
            "answer": "$$\n\\boxed{20}\n$$"
        }
    ]
}
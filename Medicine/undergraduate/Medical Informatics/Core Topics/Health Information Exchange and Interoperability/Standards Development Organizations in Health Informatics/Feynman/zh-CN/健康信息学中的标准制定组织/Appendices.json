{
    "hands_on_practices": [
        {
            "introduction": "本节的第一个实践练习触及了医疗信息学的核心问题：患者安全。我们将分析一个场景，其中一个结构有效的信息由于携带了语义不正确的数据，可能导致危险的临床决策。通过亲手进行单位换算，您将量化这种风险，并理解为何由 Regenstrief Institute (LOINC)、UCUM 和 HL7 International 等标准制定组织所开发的标准协同工作，对于防止此类错误至关重要。",
            "id": "4856731",
            "problem": "一家医院部署了一条临床决策支持 (CDS) 规则，当最近的血清钾水平至少为 $6.5$ $mmol/L$ 时，该规则会触发紧急高钾血症治疗。从基本原则出发，语义互操作性要求系统间交换的数据不仅要符合预期的结构，还要保留其含义，包括正确的单位、值类型和概念标识。仅有结构有效性表明消息满足语法约束（例如，字段存在和数据类型），但不能保证附加到定量观察值的单位对于所测量的概念在临床上是适当的。\n\n一个外部实验室发送了一条关于血清钾的“第七级健康信息国际标准 (Health Level Seven International, HL7)”的“快速医疗互操作性资源 (Fast Healthcare Interoperability Resources, FHIR)”观察 (Observation) 报告。`Observation.code` 是一个“逻辑观察标识符命名和编码系统 (Logical Observation Identifiers Names and Codes, LOINC)”术语，代表“血清/血浆中钾的物质的量浓度”，其语义上定义为每单位体积的摩尔数。`Observation.valueQuantity` 携带的数值为 $19.6$，单位字符串为“$mg/dL$”，并且由于字段填充正确，该消息通过了结构验证。临床决策支持系统期望的单位是“$mmol/L$”。\n\n假设钾的摩尔质量为 $M = 39.10$ $g/mol$，并回顾 $1$ $dL = 0.1$ $L$。仅使用物质的量的基本定义和单位换算，分析接受具有语义不一致单位的结构有效观察报告是否会导致不安全的决策，并确定来自公认标准制定组织的哪种基于标准的约束能最直接地防止这种风险。\n\n哪个选项既通过第一性原理的单位换算正确地证明了不安全的决策，又指出了应该强制执行的基于标准的缓解措施？\n\nA. 证明将 $19.6$ “$mg/dL$” 解释为 $19.6$ “$mmol/L$” 会错误地满足高钾血症阈值 $19.6 \\ge 6.5$，而正确的换算将钾浓度置于接近 $5.0$ “$mmol/L$” 的水平，低于阈值；然后要求使用“计量单位统一编码 (Unified Code for Units of Measure, UCUM)”进行单位编码，并通过 HL7 FHIR 配置文件约束强制 LOINC 属性“物质的量浓度”与 UCUM 单位“$mmol/L$”之间的兼容性。\n\nB. 用“医学临床术语系统化命名法 (Systematized Nomenclature of Medicine Clinical Terms, SNOMED CT)”概念（如“高钾血症”）替换定量实验室结果，移除数值单位和值；这可以防止不匹配，从而提高安全性。\n\nC. 使用“医学数字成像与通信 (Digital Imaging and Communications in Medicine, DICOM)”元数据规则验证消息，以确保成像单位的一致性，这将推广到实验室化学观察并防止这种不匹配。\n\nD. 依赖 HL7 第 2 版结构一致性配置文件，以确保 OBX 段包含数值和单位字段；仅靠结构有效性将确保下游 CDS 中的语义正确性。\n\nE. 使用 RxNorm 编码来标准化钾的概念及其单位，因为 RxNorm 提供了适用于临床实验室测量的标准化标识符和剂型。",
            "solution": "首先对问题陈述进行验证。\n\n### 步骤 1：提取已知信息\n- 临床决策支持 (CDS) 规则触发条件：血清钾 $\\ge 6.5$ $mmol/L$。\n- 收到的消息：第七级健康信息国际标准 (HL7) 快速医疗互操作性资源 (FHIR) 观察 (Observation) 报告。\n- 观察代码 (`Observation.code`)：逻辑观察标识符命名和编码系统 (LOINC) 术语，代表“血清/血浆中钾的物质的量浓度”。\n- 观察值 (`Observation.valueQuantity`)：数值为 $19.6$，单位字符串为“$mg/dL$”。\n- 消息验证状态：通过结构验证。\n- CDS 期望的单位：“$mmol/L$”。\n- 钾 (K) 的摩尔质量：$M = 39.10$ $g/mol$。\n- 体积换算因子：$1$ $dL = 0.1$ $L$。\n\n### 步骤 2：使用提取的已知信息进行验证\n问题在科学和技术上是合理的。它提出了一个健康信息学中关于语义互操作性的现实且关键的场景。所提供的数据一致且足以进行定量分析。\n\n- **科学基础**：该问题基于化学的基本原理（涉及摩尔质量的单位换算）以及医学信息学中的既定概念（HL7 FHIR、LOINC、UCUM、互操作性）。钾的摩尔质量值是准确的。高钾血症的临床阈值是符合实际的。\n- **适定性**：该问题是适定的。它提供了所有必要的定量数据（$19.6$ $mg/dL$、$M=39.10$ $g/mol$、$1$ $dL = 0.1$ $L$）和一个明确的临床阈值（$6.5$ $mmol/L$），以明确地确定单位不匹配的后果。问题要求对安全风险进行定量论证，并确定正确的基于标准的缓解措施，这是一个可解决且有意义的任务。\n- **客观性**：该问题以客观、精确的语言陈述。它定义了其术语（例如，结构有效性与语义有效性），并避免了主观或含糊的措辞。\n\n### 步骤 3：结论与行动\n问题有效。将推导完整解答。\n\n### 推导与分析\n\n核心任务是将接收到的钾浓度从质量浓度单位 ($mg/dL$) 转换为物质的量浓度单位 ($mmol/L$)，以便与 CDS 阈值进行正确比较。\n\n设给定浓度为 $C_{given} = 19.6$ $mg/dL$。\n钾的摩尔质量为 $M = 39.10$ $g/mol$。\n\n首先，将质量单位从毫克 ($mg$) 转换为克 ($g$)，以与摩尔质量的单位兼容。\n$$ 1 \\, g = 1000 \\, mg $$\n所以，质量为 $19.6 \\, mg = 19.6 \\times 10^{-3} \\, g$。\n\n接下来，使用摩尔质量将此质量转换为物质的量（单位为摩尔，$mol$）。\n$$ \\text{物质的量 (摩尔)} = \\frac{\\text{质量}}{\\text{摩尔质量}} = \\frac{19.6 \\times 10^{-3} \\, g}{39.10 \\, g/mol} $$\n物质的量的目标单位是毫摩尔 ($mmol$)。\n$$ 1 \\, mol = 1000 \\, mmol $$\n所以，物质的量（单位为毫摩尔）为：\n$$ \\text{量} = \\left( \\frac{19.6 \\times 10^{-3} \\, g}{39.10 \\, g/mol} \\right) \\times 1000 \\, \\frac{mmol}{mol} = \\frac{19.6}{39.10} \\, mmol $$\n\n现在，将体积单位从分升 ($dL$) 转换为升 ($L$)。\n$$ 1 \\, dL = 0.1 \\, L $$\n\n最后，将这些结合起来，计算出以 $mmol/L$ 为单位的浓度。\n$$ C_{correct} = \\frac{\\text{以 } mmol \\text{ 为单位的量}}{\\text{以 } L \\text{ 为单位的体积}} = \\frac{\\frac{19.6}{39.10} \\, mmol}{0.1 \\, L} = \\frac{19.6}{39.10 \\times 0.1} \\, \\frac{mmol}{L} = \\frac{19.6}{3.910} \\, \\frac{mmol}{L} $$\n$$ C_{correct} \\approx 5.0128 \\, mmol/L $$\n与输入值 $19.6$ 保持一致，四舍五入到三位有效数字，浓度为 $5.01$ $mmol/L$。\n\n**不安全决策分析：**\n1.  **错误解释（不安全操作）：** 如果 CDS 系统忽略了“$mg/dL$”单位，错误地假设数值 $19.6$ 的单位是“$mmol/L$”，它将评估条件 $19.6 \\ge 6.5$。这个条件为真，因此 CDS 会错误地触发紧急高钾血症治疗。对一个钾水平约为 $5.0$ $mmol/L$ 的患者进行此类治疗在医学上是不适当的，且可能有害，可能诱发危险的低钾血症。\n2.  **正确解释（安全操作）：** 正确转换后的值为 $\\approx 5.01$ $mmol/L$。CDS 评估 $5.01 \\ge 6.5$。这个条件为假。警报不会被触发，这是正确的临床决策，因为这个钾水平并非紧急危重。\n\n这证实了接受结构上有效但语义上不一致的观察报告会导致危险的临床决策。因此，答案的第一部分得到了证明。\n\n**基于标准的缓解措施识别：**\n根本原因在于概念代码（用于*物质的量浓度*的 LOINC）与所表达的计量单位（$mg/dL$，一个*质量浓度*单位）之间的语义冲突。最直接的基于标准的缓解措施是强制执行这种语义一致性。\n\n- **计量单位统一编码 (Unified Code for Units of Measure, UCUM)：** 该标准为单位提供了无歧义的代码（例如，`[mg]/dL`、`mmol/L`）。使用 UCUM 代码代替自由文本的单位字符串（如“$mg/dL$”）是第一步。\n- **HL7 FHIR 配置文件：** FHIR 配置文件是针对特定用例对基础 FHIR 资源（如 Observation）的一组约束。配置文件可用于强制规定，对于给定的 LOINC 代码，`Observation.valueQuantity` 必须使用来自特定 UCUM 代码子集的单位。在这种情况下，配置文件会要求，如果 `Observation.code` 是一个以“物质的量浓度”属性定义的 LOINC 术语，则单位必须是有效的物质的量浓度 UCUM 单位（例如 `mmol/L`、`umol/L`）。这将导致不正确的消息在更深层次的语义验证步骤中被接收系统拒绝。\n\n### 逐项分析\n\n**A. 证明将 $19.6$ “$mg/dL$” 解释为 $19.6$ “$mmol/L$” 会错误地满足高钾血症阈值 $19.6 \\ge 6.5$，而正确的换算将钾浓度置于接近 $5.0$ “$mmol/L$” 的水平，低于阈值；然后要求使用“计量单位统一编码 (UCUM)”进行单位编码，并通过 HL7 FHIR 配置文件约束强制 LOINC 属性“物质的量浓度”与 UCUM 单位“$mmol/L$”之间的兼容性。**\n- 定量分析是正确的。如上推导，$19.6$ $mg/dL$ 约等于 $5.01$ $mmol/L$。误解单位会导致评估 $19.6 \\ge 6.5$（为真），而正确的评估是 $5.01 \\ge 6.5$（为假）。\n- 提议的缓解措施是最准确和直接的基于标准的解决方案。它正确地指出了 UCUM（用于无歧义的单位）、LOINC（用于概念）和 HL7 FHIR 配置文件（作为连接它们的强制执行机制）的作用。\n- **结论：正确。**\n\n**B. 用“医学临床术语系统化命名法 (SNOMED CT)”概念（如“高钾血症”）替换定量实验室结果，移除数值单位和值；这可以防止不匹配，从而提高安全性。**\n- 这种方法丢弃了精确的定量信息，而这些信息对于分级临床决策至关重要。钾水平为 $5.6$ $mmol/L$ 和 $7.6$ $mmol/L$ 可能都属于“高钾血症”，但它们需要截然不同的临床反应。这代表了信息的重大损失。此外，这只是转移了问题，因为发送系统现在必须解释数值以分配定性代码，并使用其自己可能不同的阈值。\n- **结论：不正确。**\n\n**C. 使用“医学数字成像与通信 (DICOM)”元数据规则验证消息，以确保成像单位的一致性，这将推广到实验室化学观察并防止这种不匹配。**\n- DICOM 是关于医疗*图像*及相关信息的国际标准。它不用于实验室结果，后者通常使用 HL7 标准（如 V2 或 FHIR）进行交换。将 DICOM 规则应用于 HL7 FHIR 消息在技术上是不恰当且无意义的。\n- **结论：不正确。**\n\n**D. 依赖 HL7 第 2 版结构一致性配置文件，以确保 OBX 段包含数值和单位字段；仅靠结构有效性将确保下游 CDS 中的语义正确性。**\n- 问题明确指出，消息*已经通过了*结构验证（即，它具有必需的字段和正确的数据类型）。问题的核心在于，结构有效性不足以保证语义正确性。该选项的核心主张“仅靠结构有效性将确保语义正确性”与问题的前提直接矛盾。\n- **结论：不正确。**\n\n**E. 使用 RxNorm 编码来标准化钾的概念及其单位，因为 RxNorm 提供了适用于临床实验室测量的标准化标识符和剂型。**\n- RxNorm 是关于临床*药物*和药品的术语标准。它用于规范化药物成分、强度和剂型等概念。它不是用于标识实验室分析物的正确标准；那是 LOINC 的作用。“剂型”在 RxNorm 中不适用于实验室测试的计量单位。\n- **结论：不正确。**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "为了实现有效的互操作性，本地临床数据必须准确地映射到标准术语集，例如由 SNOMED International 开发的 SNOMED CT。本练习让您扮演信息学家的角色，评估一个将本地诊断术语映射到 SNOMED CT 的工具。您将运用精确率 (precision)、召回率 (recall) 和 $F_1$ 分数这些基本指标来量化评估一个术语映射模块的性能，这是数据集成项目中的一项核心技能。",
            "id": "4856628",
            "problem": "一个医院信息系统使用本地定义的诊断接口术语，这些术语必须映射到医学系统命名法—临床术语（Systematized Nomenclature of Medicine—Clinical Terms, SNOMED CT）以支持互操作性。为了评估一个术语映射模块，一组本地诊断条目已经由两名独立的临床术语学家进行标注，并通过裁决为每个条目生成了一个SNOMED CT概念标识符的金标准集。对于每个条目，映射器会输出一组预测的SNOMED CT概念标识符。一个预测概念只有当它出现在对应条目的金标准集中时，才被计为正确；任何未出现在金标准集中的预测概念应被计为不正确；任何存在于金标准集中但未被预测的概念应被计为漏掉。评估是在所有条目的所有概念实例上进行微观平均（micro-averaged）。\n\n评估样本包括以下案例（每个案例列出了本地术语、金标准集和映射器的预测集）：\n\n- 案例 $1$：本地术语 “HTN.”。金标准 $\\{38341003\\}$。预测 $\\{38341003\\}$。\n- 案例 $2$：本地术语 “Type II DM.”。金标准 $\\{44054006\\}$。预测 $\\{44054006\\}$。\n- 案例 $3$：本地术语 “Asthma, mild persistent.”。金标准 $\\{370218001\\}$。预测 $\\{195967001\\}$。\n- 案例 $4$：本地术语 “Appendicitis.”。金标准 $\\{74400008\\}$。预测 $\\{74400008\\}$。\n- 案例 $5$：本地术语 “CHF.”。金标准 $\\{42343007\\}$。预测 $\\{42343007\\}$。\n- 案例 $6$：本地术语 “CAD.”。金标准 $\\{53741008\\}$。预测 $\\{53741008\\}$。\n- 案例 $7$：本地术语 “Pneumonia.”。金标准 $\\{233604007\\}$。预测 $\\{233604007, 386661006\\}$。\n- 案例 $8$：本地术语 “Flu.”。金标准 $\\{6142004\\}$。预测 $\\{6142004\\}$。\n- 案例 $9$：本地术语 “No diagnosis given.”。金标准 $\\varnothing$。预测 $\\{162864005\\}$。\n- 案例 $10$：本地术语 “Type 2 DM with neuropathy.”。金标准 $\\{44054006, 399090003\\}$。预测 $\\{44054006\\}$。\n\n使用信息检索评估和临床术语映射的核心定义，计算该映射在微观平均下的精确率（precision）、召回率（recall）和 $F_1$ 分数。仅以一个无单位的最简分数形式报告 $F_1$ 分数。不要四舍五入；将结果精确表示为分数。",
            "solution": "首先对问题进行严格的验证过程。\n\n### 步骤 1：提取已知条件\n-   **任务**：计算术语映射模块的精确率、召回率和 $F_1$ 分数。\n-   **评估方法**：在所有条目的所有概念实例上进行微观平均。\n-   **定义**：\n    -   如果一个预测概念出现在金标准集中，则为正确（真正例，TP）。\n    -   如果一个预测概念未出现在金标准集中，则为不正确（假正例，FP）。\n    -   金标准中存在但未被预测的概念为漏掉（假反例，FN）。\n-   **数据样本（10个案例）**：\n    -   案例 $1$：金标准 $G_1 = \\{38341003\\}$，预测 $P_1 = \\{38341003\\}$。\n    -   案例 $2$：金标准 $G_2 = \\{44054006\\}$，预测 $P_2 = \\{44054006\\}$。\n    -   案例 $3$：金标准 $G_3 = \\{370218001\\}$，预测 $P_3 = \\{195967001\\}$。\n    -   案例 $4$：金标准 $G_4 = \\{74400008\\}$，预测 $P_4 = \\{74400008\\}$。\n    -   案例 $5$：金标准 $G_5 = \\{42343007\\}$，预测 $P_5 = \\{42343007\\}$。\n    -   案例 $6$：金标准 $G_6 = \\{53741008\\}$，预测 $P_6 = \\{53741008\\}$。\n    -   案例 $7$：金标准 $G_7 = \\{233604007\\}$，预测 $P_7 = \\{233604007, 386661006\\}$。\n    -   案例 $8$：金标准 $G_8 = \\{6142004\\}$，预测 $P_8 = \\{6142004\\}$。\n    -   案例 $9$：金标准 $G_9 = \\varnothing$，预测 $P_9 = \\{162864005\\}$。\n    -   案例 $10$：金标准 $G_{10} = \\{44054006, 399090003\\}$，预测 $P_{10} = \\{44054006\\}$。\n-   **要求输出**：以单个最简分数形式表示的 $F_1$ 分数。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据，提法得当且客观。它设置在医学信息学和信息检索的标准背景下。SNOMED CT、精确率、召回率、$F_1$ 分数和微观平均的使用都是该领域的标准且适当的方法。所提供的数据是完整的、无歧义的且内部一致的，从而可以得出一个唯一且有意义的解。没有违反任何科学原则，除了明确提供的定义外，不需要任何额外假设。该问题并非微不足道、隐喻性或主观性的。\n\n### 步骤 3：结论与行动\n该问题被判定为**有效**。将推导解决方案。\n\n评估指标基于真正例（$TP$）、假正例（$FP$）和假反例（$FN$）的计数。对于给定的案例 $i$，其金标准集为 $G_i$，预测集为 $P_i$，这些计数定义如下：\n-   真正例（$TP_i$）：正确预测的概念数量。$TP_i = |G_i \\cap P_i|$。\n-   假正例（$FP_i$）：错误预测的概念数量。$FP_i = |P_i \\setminus G_i| = |P_i| - |G_i \\cap P_i|$。\n-   假反例（$FN_i$）：漏掉的概念数量。$FN_i = |G_i \\setminus P_i| = |G_i| - |G_i \\cap P_i|$。\n\n问题指定了微观平均，这要求在计算最终指标之前，对所有 $N=10$ 个案例的这些计数进行求和。\n$$TP_{total} = \\sum_{i=1}^{N} TP_i$$\n$$FP_{total} = \\sum_{i=1}^{N} FP_i$$\n$$FN_{total} = \\sum_{i=1}^{N} FN_i$$\n\n我们现在为每个案例计算 $TP_i$、$FP_i$ 和 $FN_i$：\n-   案例 $1$：$G_1=\\{38341003\\}$，$P_1=\\{38341003\\}$。$|G_1|=1, |P_1|=1, |G_1 \\cap P_1|=1$。\n    $TP_1 = 1$，$FP_1 = 1-1=0$，$FN_1 = 1-1=0$。\n-   案例 $2$：$G_2=\\{44054006\\}$，$P_2=\\{44054006\\}$。$|G_2|=1, |P_2|=1, |G_2 \\cap P_2|=1$。\n    $TP_2 = 1$，$FP_2 = 1-1=0$，$FN_2 = 1-1=0$。\n-   案例 $3$：$G_3=\\{370218001\\}$，$P_3=\\{195967001\\}$。$|G_3|=1, |P_3|=1, |G_3 \\cap P_3|=0$。\n    $TP_3 = 0$，$FP_3 = 1-0=1$，$FN_3 = 1-0=1$。\n-   案例 $4$：$G_4=\\{74400008\\}$，$P_4=\\{74400008\\}$。$|G_4|=1, |P_4|=1, |G_4 \\cap P_4|=1$。\n    $TP_4 = 1$，$FP_4 = 1-1=0$，$FN_4 = 1-1=0$。\n-   案例 $5$：$G_5=\\{42343007\\}$，$P_5=\\{42343007\\}$。$|G_5|=1, |P_5|=1, |G_5 \\cap P_5|=1$。\n    $TP_5 = 1$，$FP_5 = 1-1=0$，$FN_5 = 1-1=0$。\n-   案例 $6$：$G_6=\\{53741008\\}$，$P_6=\\{53741008\\}$。$|G_6|=1, |P_6|=1, |G_6 \\cap P_6|=1$。\n    $TP_6 = 1$，$FP_6 = 1-1=0$，$FN_6 = 1-1=0$。\n-   案例 $7$：$G_7=\\{233604007\\}$，$P_7=\\{233604007, 386661006\\}$。$|G_7|=1, |P_7|=2, |G_7 \\cap P_7|=1$。\n    $TP_7 = 1$，$FP_7 = 2-1=1$，$FN_7 = 1-1=0$。\n-   案例 $8$：$G_8=\\{6142004\\}$，$P_8=\\{6142004\\}$。$|G_8|=1, |P_8|=1, |G_8 \\cap P_8|=1$。\n    $TP_8 = 1$，$FP_8 = 1-1=0$，$FN_8 = 1-1=0$。\n-   案例 $9$：$G_9=\\varnothing$，$P_9=\\{162864005\\}$。$|G_9|=0, |P_9|=1, |G_9 \\cap P_9|=0$。\n    $TP_9 = 0$，$FP_9 = 1-0=1$，$FN_9 = 0-0=0$。\n-   案例 $10$：$G_{10}=\\{44054006, 399090003\\}$，$P_{10}=\\{44054006\\}$。$|G_{10}|=2, |P_{10}|=1, |G_{10} \\cap P_{10}|=1$。\n    $TP_{10} = 1$，$FP_{10} = 1-1=0$，$FN_{10} = 2-1=1$。\n\n现在，我们将这些计数相加：\n$$TP_{total} = 1+1+0+1+1+1+1+1+0+1 = 8$$\n$$FP_{total} = 0+0+1+0+0+0+1+0+1+0 = 3$$\n$$FN_{total} = 0+0+1+0+0+0+0+0+0+1 = 2$$\n\n根据总计数，我们计算微观平均的精确率（$P$）和召回率（$R$）：\n$$P = \\frac{TP_{total}}{TP_{total} + FP_{total}} = \\frac{8}{8+3} = \\frac{8}{11}$$\n$$R = \\frac{TP_{total}}{TP_{total} + FN_{total}} = \\frac{8}{8+2} = \\frac{8}{10} = \\frac{4}{5}$$\n\n$F_1$ 分数是精确率和召回率的调和平均数，定义为：\n$$F_1 = 2 \\cdot \\frac{P \\cdot R}{P+R}$$\n代入 $P$ 和 $R$ 的值：\n$$F_1 = 2 \\cdot \\frac{\\frac{8}{11} \\cdot \\frac{4}{5}}{\\frac{8}{11} + \\frac{4}{5}} = 2 \\cdot \\frac{\\frac{32}{55}}{\\frac{8 \\cdot 5 + 4 \\cdot 11}{55}} = 2 \\cdot \\frac{\\frac{32}{55}}{\\frac{40+44}{55}} = 2 \\cdot \\frac{\\frac{32}{55}}{\\frac{84}{55}} = 2 \\cdot \\frac{32}{84} = \\frac{64}{84}$$\n或者，$F_1$ 分数可以直接从总计数计算得出：\n$$F_1 = \\frac{2 \\cdot TP_{total}}{2 \\cdot TP_{total} + FP_{total} + FN_{total}}$$\n$$F_1 = \\frac{2 \\cdot 8}{2 \\cdot 8 + 3 + 2} = \\frac{16}{16 + 5} = \\frac{16}{21}$$\n分数 $\\frac{64}{84}$ 通过分子分母同除以最大公约数 $4$ 可以化简为 $\\frac{16}{21}$。数字 $16$ 是 $2^4$，$21$ 是 $3 \\cdot 7$，因此它们没有共同的因子，该分数已是最简形式。",
            "answer": "$$\\boxed{\\frac{16}{21}}$$"
        },
        {
            "introduction": "医疗信息标准并非一成不变，它们会随着临床知识的进步而发展。最后一个实践练习探讨了一个关键挑战：当像 SNOMED CT 这样的底层术语集发生变化时，如何保持临床逻辑的稳定性和可复现性。通过一个真实的场景，您将理解为什么将规则明确绑定到特定的代码系统版本（这是 HL7 所倡导的一项原则）对于临床决策支持系统的长期安全和可靠性是必不可少的。",
            "id": "4856709",
            "problem": "一家医院使用 Health Level Seven International (HL7) 的 Fast Healthcare Interoperability Resources (FHIR) 来实施临床决策支持。规则是：如果患者的诊断属于代表“2型糖尿病”的 ValueSet（值集），并且最近的糖化血红蛋白（Hemoglobin A1c）值等于或高于一个阈值，则触发糖尿病护理路径。该术语体系栈使用了 SNOMED International 的 Systematized Nomenclature of Medicine—Clinical Terms (SNOMED CT)、Regenstrief Institute 的 Logical Observation Identifiers Names and Codes (LOINC) 以及 National Library of Medicine (NLM) 的 RxNorm。请考虑以下形式化描述。\n\n定义和假设：\n- CodeSystem（代码系统）是一个带版本的概念全集。令 $C_t$ 表示在发布时间 $t$ 的代码及其语义的集合，该集合由维护 CodeSystem 的标准制定组织（例如，SNOMED International 负责 SNOMED CT）确定。通常，如果 $t_1 \\neq t_2$，则 $C_{t_1} \\neq C_{t_2}$，因为代码可以被添加、停用、重新定义或重新分类。\n- ValueSet（值集）$V$ 是使用 SNOMED CT 的层次结构标准进行内涵式定义的：“包含所有作为‘2型糖尿病’SNOMED CT 概念后代的代码”，并将该父概念表示为 $p$。在时间 $t$ 将 $V$ 针对 CodeSystem 状态进行展开，得到的是一个枚举集合 $E_t(V) \\subseteq C_t$，这是术语服务器将内涵式定义应用于 $C_t$ 时返回的结果。\n- 临床规则将患者数据映射到一个决策。设最新的糖化血红蛋白为 $h$（一个用 LOINC 编码的实验室结果），诊断代码为 $d$。将规则定义为函数 $f(d,h) = 1$（触发），如果 $d \\in E_t(V)$ 且 $h \\ge \\theta$；否则 $f(d,h) = 0$（不触发），其中 $\\theta$ 是一个固定阈值（例如，2型糖尿病标准使用 $\\theta = 6.5\\%$，并且在本问题中此阈值被视为常数）。\n- 业界普遍认为，ValueSet 的展开同时依赖于 ValueSet 的内涵式标准和 CodeSystem 的版本（例如 HL7 FHIR 术语服务规范、SNOMED CT 概念模型演进、RxNorm 每月发布、LOINC 每半年发布）。没有提供捷径公式；所有推理都必须遵循这些核心定义。\n\n构建以下科学上合理的场景：\n- 在时间 $t_1$，SNOMED CT 层次结构中包含一个概念 $d^\\ast$，代表“伴有周围血管病的2型糖尿病”，并且 $d^\\ast$ 是 $p$ 的一个后代。因此 $d^\\ast \\in E_{t_1}(V)$。\n- 在之后的某个时间 $t_2$，SNOMED International 由于概念模型的修订而重构了层次结构，使得 $d^\\ast$ 被重新分类到一个更通用的“伴有周围血管病的糖尿病”节点下。在这个新结构中，$d^\\ast$ 不再是 $p$ 的后代。因此 $d^\\ast \\notin E_{t_2}(V)$，即使 $V$ 的内涵式标准保持不变。\n- 考虑一个诊断为 $d^\\ast$ 且糖化血红蛋白为 $h = 7.0\\%$ 的患者。在展开 $E_{t_1}(V)$ 的情况下，规则得出 $f(d^\\ast, 7.0\\%) = 1$；而在展开 $E_{t_2}(V)$ 的情况下，规则得出 $f(d^\\ast, 7.0\\%) = 0$。\n\n问题：\n鉴于上述场景以及标准制定组织在维护不断演进的 CodeSystem 中的作用，哪个选项最能体现为保证规则的临床解释在不同环境和时间下保持稳定所必需的控制措施？\n\nA. 通过包含 CodeSystem 的规范标识符和显式版本（例如，“SNOMED CT 国际版，版本 $t_1$”）将 ValueSet 绑定到特定的 CodeSystem 版本，以便 $E_t(V)$ 是针对一个固定的 $C_{t_1}$ 计算的；可选择性地持久化展开的元数据。这确保了 $E_{t_1}(V)$ 在任何地方展开时都是相同的，从而稳定了 $f(d,h)$。\n\nB. 在运行时仅使用代码的人类可读显示字符串，忽略 CodeSystem 版本；由于字符串在视觉上是稳定的，$E_t(V)$ 不会改变，$f(d,h)$ 也将保持稳定。\n\nC. 依赖标准制定组织的向后兼容性保证；后代关系很少改变，因此在没有版本控制的情况下，展开实际上是稳定的。\n\nD. 缓存任何环境中计算的首次展开，并无限期地重用它，而不记录 CodeSystem 版本；这可以防止 $E_t(V)$ 发生变化，从而稳定 $f(d,h)$。\n\nE. 只引用 CodeSystem 的对象标识符（OID）（例如，SNOMED CT 的 OID）而不带版本；OID 是全局唯一的，因此针对 ValueSet 的展开将随时间推移而保持稳定。",
            "solution": "### 问题验证\n\n**第一步：提取已知信息**\n\n- **CodeSystem 定义**：CodeSystem 是一个带版本的概念全集。$C_t$ 表示在发布时间 $t$ 的代码及其语义的集合。对于 $t_1 \\neq t_2$，通常 $C_{t_1} \\neq C_{t_2}$。\n- **ValueSet 定义**：ValueSet $V$ 是使用 SNOMED CT 层次结构标准进行内涵式定义的：“包含所有作为‘2型糖尿病’SNOMED CT 概念后代的代码”，该父概念表示为 $p$。\n- **ValueSet 展开**：在时间 $t$ 将 $V$ 针对 CodeSystem 状态进行展开，得到的是一个枚举集合 $E_t(V) \\subseteq C_t$。\n- **临床规则定义**：函数 $f(d,h)$ 将患者数据（诊断代码 $d$，最新的糖化血红蛋白 $h$）映射到一个决策。规则定义为：如果 $d \\in E_t(V)$ 且 $h \\ge \\theta$，则 $f(d,h) = 1$；否则 $f(d,h) = 0$。\n- **阈值**：$\\theta$ 是一个固定阈值，示例值为 $\\theta = 6.5\\%$。\n- **基本前提**：ValueSet 的展开同时依赖于 ValueSet 的内涵式标准和 CodeSystem 的版本。\n- **场景**：\n    1. 在时间 $t_1$，一个概念 $d^\\ast$（“伴有周围血管病的2型糖尿病”）是 $p$ 的一个后代。因此，$d^\\ast \\in E_{t_1}(V)$。\n    2. 在之后的某个时间 $t_2$，SNOMED CT 层次结构被重构。概念 $d^\\ast$ 不再是 $p$ 的后代。因此，$d^\\ast \\notin E_{t_2}(V)$。\n    3. 对于一个诊断为 $d^\\ast$ 且糖化血红蛋白为 $h = 7.0\\%$ 的患者，规则的输出取决于展开时间：\n        - 使用展开 $E_{t_1}(V)$，条件 $d^\\ast \\in E_{t_1}(V)$ 且 $7.0\\% \\ge 6.5\\%$ 为真，所以 $f(d^\\ast, 7.0\\%) = 1$。\n        - 使用展开 $E_{t_2}(V)$，条件 $d^\\ast \\in E_{t_2}(V)$ 为假，所以 $f(d^\\ast, 7.0\\%) = 0$。\n- **问题**：哪个选项最能体现为保证规则的临床解释在不同环境和时间下保持稳定所必需的控制措施？\n\n**第二步：使用提取的已知信息进行验证**\n\n根据验证标准对问题陈述进行评估。\n\n- **科学依据**：该问题基于医学信息学的既定原则，特别是 Health Level Seven International (HL7) 在其 Fast Healthcare Interoperability Resources (FHIR) 规范中定义的术语服务。标准制定组织（SDO）如 SNOMED International、Regenstrief Institute 和 National Library of Medicine (NLM) 的角色被准确地描绘。所描述的现象——由于 CodeSystem（如 SNOMED CT）的新版本导致 ValueSet 展开发生变化——是该领域一个众所周知且至关重要的问题，通常被称为“语义漂移”或“术语版本控制问题”。\n- **适定性**：该问题是适定的。它为所有组件（$C_t, V, E_t(V), f(d,h)$）提供了清晰、形式化的定义，提出了一个具体且明确的场景来说明一个特定的失败点，并要求对此失败提出解决方案。期望得到一个关于术语管理最佳实践的唯一且有意义的答案。\n- **客观性**：语言精确、技术性强，没有主观或基于观点的陈述。陈述“业界普遍认为，ValueSet 的展开同时依赖于……CodeSystem 的版本”是一个事实性陈述，反映了健康信息学标准界的共识。\n\n该问题没有表现出任何无效性缺陷：\n1.  **科学或事实不健全**：在健康信息学领域内，其前提在事实上是健全的。\n2.  **不可形式化或不相关**：该问题已被部分形式化，并与主题直接相关。\n3.  **不完整或矛盾的设置**：设置是完整的且自洽的。\n4.  **不切实际或不可行**：一个 SNOMED CT 概念在新版本中被重新指定父概念的场景是现实的。\n5.  **不适定或结构不良**：术语定义明确，问题清晰。\n6.  **伪深刻、琐碎或同义反复**：该问题解决了在实现可互操作和可复现的临床决策支持中一个真实且不容忽视的挑战。\n7.  **超出科学可验证性**：所提出的解决方案可以根据已发布的标准和信息学中已建立的最佳实践进行验证。\n\n**第三步：结论和行动**\n\n问题陈述是**有效的**。将继续进行求解。\n\n### 基于原则的推导\n\n问题的核心是临床规则的输出随时间推移而出现的不稳定性。该规则被定义为函数 $f(d,h)$，但所提供的场景表明，其评估依赖于第三个隐式参数：用于 ValueSet 展开的 CodeSystem 版本的时间 $t$。让我们通过将规则定义为 $f_t(d,h)$ 来明确这一点，如果 $d \\in E_t(V)$ 且 $h \\ge \\theta$，则其值为 $1$，否则为 $0$。\n\n该场景显示：\n- $f_{t_1}(d^\\ast, 7.0\\%) = 1$ 因为 $d^\\ast \\in E_{t_1}(V)$。\n- $f_{t_2}(d^\\ast, 7.0\\%) = 0$ 因为 $d^\\ast \\notin E_{t_2}(V)$。\n\n这种可变性意味着同一份患者记录可能因规则执行的时间和地点不同而导致不同的临床操作。这在临床上是不可接受的，并会破坏安全性、可复现性和互操作性。\n\n为了“保证规则的临床解释保持稳定”，我们必须消除对执行时间 $t$ 的依赖。这意味着我们必须确保在规则逻辑中使用的集合 $E_t(V)$ 在所有环境和所有时间都是相同的。\n\n展开 $E_t(V)$ 是两个输入的函数：ValueSet $V$ 的内涵式定义和 CodeSystem $C_t$ 的状态。问题陈述中指出 $V$ 的内涵式定义（“$p$ 的后代”）保持不变。因此，$E_t(V)$ 的可变性完全是由 CodeSystem 版本 $C_{t_1}$ 和 $C_{t_2}$ 之间的变化引起的。\n\n确保展开 $E(V)$ 稳定且可复现的唯一方法是将 CodeSystem 固定到一个特定的、不可变的版本。如果规则的编写意图是使用在时间 $t_1$ 存在的层次结构，那么任何执行该规则的系统都必须被指示去针对 $C_{t_1}$ 进行展开。这通过将 ValueSet 定义显式绑定到 CodeSystem 的特定版本标识符来实现。这使得展开成为确定性的：任何兼容的术语服务器，在被要求针对指定的 CodeSystem 版本展开 $V$ 时，都将返回完全相同的代码集 $E_{t_1}(V)$。这消除了时间上的模糊性，并稳定了函数 $f(d,h)$。\n\n### 逐项分析\n\n**A. 通过包含 CodeSystem 的规范标识符和显式版本（例如，“SNOMED CT 国际版，版本 $t_1$”）将 ValueSet 绑定到特定的 CodeSystem 版本，以便 $E_t(V)$ 是针对一个固定的 $C_{t_1}$ 计算的；可选择性地持久化展开的元数据。这确保了 $E_{t_1}(V)$ 在任何地方展开时都是相同的，从而稳定了 $f(d,h)$。**\n该选项直接实现了从第一性原理推导出的控制措施。通过将 ValueSet 绑定到一个显式的 CodeSystem 版本（例如，在 FHIR 中通过版本 URI 标识），展开 $E_t(V)$ 就不再依赖于执行环境的上下文，而是被固定为 $E_{t_1}(V)$。这确保了每个评估该规则的系统都会为该 ValueSet 计算出相同的成员资格，从而为 $f(d,h)$ 产生一个稳定且可复现的结果。这是实现术语一致性的标准最佳实践，正如在 HL7 FHIR `ValueSet` 资源等工件中规定的那样。\n**结论：正确。**\n\n**B. 在运行时仅使用代码的人类可读显示字符串，忽略 CodeSystem 版本；由于字符串在视觉上是稳定的，$E_t(V)$ 不会改变，$f(d,h)$ 也将保持稳定。**\n这种方法存在根本性缺陷。首先，人类可读的字符串既不保证唯一也不保证不可变；SDO 可能会也确实会更改它们。其次，更关键的是，ValueSet $V$ 是基于层次关系（“$p$ 的后代”）进行内涵式定义的。这种关系是 CodeSystem 概念模型的一个形式属性，不能仅从显示字符串中计算出来。基于字符串执行逻辑是脆弱且在语义上不正确的。\n**结论：不正确。**\n\n**C. 依赖标准制定组织的向后兼容性保证；后代关系很少改变，因此在没有版本控制的情况下，展开实际上是稳定的。**\n这种说法在事实上是不正确的，并且与问题本身给出的有效场景相矛盾。像 SNOMED CT 这样的 CodeSystem 的演进涉及完善概念模型，这明确包括改变层次关系（重新指定概念的父级）以提高临床准确性。SDO 不保证此类关系将保持静态。依赖于一个毫无根据的稳定性假设并非一种控制机制，反而会导致所描述的问题。\n**结论：不正确。**\n\n**D. 缓存任何环境中计算的首次展开，并无限期地重用它，而不记录 CodeSystem 版本；这可以防止 $E_t(V)$ 发生变化，从而稳定 $f(d,h)$。**\n这种方法引入了不可复现性。“首次展开”是一个任意事件。一个开发中的系统可能会针对版本 $C_{t_1}$ 计算它，而另一家医院的生产系统可能会针对版本 $C_{t_2}$ 计算其“首次”展开。这将导致跨环境的、不一致的缓存展开。如果不记录生成缓存所依据的版本，缓存的代码集就是一个没有可验证来源的“黑匣子”，使其无法审计或复现。这是一种不安全且不受控制的做法。\n**结论：不正确。**\n\n**E. 只引用 CodeSystem 的对象标识符（OID）（例如，SNOMED CT 的 OID）而不带版本；OID 是全局唯一的，因此针对 ValueSet 的展开将随时间推移而保持稳定。**\n一个 OID（或在像 FHIR 这样的现代标准中的规范 URL）标识了一个 CodeSystem（例如，“SNOMED CT”），但它本身并不指定该系统的*版本*。仅使用 OID 是指示针对 SNOMED CT 的“某个”版本来展开 ValueSet——通常是环境中可用的最新版本。正如问题所示，使用不同版本（$C_{t_1}$ vs. $C_{t_2}$）会产生不同的结果。因此，不带版本地引用 CodeSystem 正是不稳定性的根源，而不是其解决方案。\n**结论：不正确。**",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
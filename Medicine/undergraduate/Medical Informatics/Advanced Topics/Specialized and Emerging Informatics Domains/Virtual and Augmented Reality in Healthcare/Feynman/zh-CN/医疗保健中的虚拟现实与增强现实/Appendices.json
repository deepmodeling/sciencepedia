{
    "hands_on_practices": [
        {
            "introduction": "在医疗虚拟现实（VR）和增强现实（AR）应用中，无论是进行精细的手术模拟还是观察复杂的解剖结构，显示器的视觉保真度都至关重要。本练习将引导你从第一性原理出发，量化头戴式显示器的核心性能指标——角分辨率。通过这个计算，你将理解硬件规格（如像素间距和光学设计）如何直接转化为用户感知的图像细节水平，这是评估任何医疗VR/AR系统可用性的基础。 ",
            "id": "4863089",
            "problem": "一个医疗培训系统使用头戴式显示器（HMD）来提供虚拟现实（VR）手术模拟。为了对感知细节进行推理，假设一个简单的几何眼模型：一个平坦的矩形微型显示器，其有效水平宽度在眼睛处形成一个水平视场（FOV），眼睛的入瞳位于距显示器固定的顶点距离处。水平视场是有效显示宽度围绕眼睛光轴所对的视角。像素排列在具有恒定像素间距的均匀网格上。仅使用三角几何和视角的定义，从第一性原理推导每个像素的平均水平角张度（即，在有效宽度上每个像素的平均水平角分辨率）的表达式，单位为角分。然后，针对 $10\\,\\mu\\text{m}$ 的像素间距、$40\\,\\text{mm}$ 的显示器到眼睛的顶点距离以及 $100^{\\circ}$ 的水平视场，计算该表达式的值。\n\n假设：\n- 微型显示器是平坦的，并以光轴为中心。\n- 像素以恒定的间距紧密排列，并完全跨越产生所述视场的有效宽度。\n- 水平视场等于在给定顶点距离处，显示器的有效宽度所对的视角。\n\n计算每个像素的平均水平角分辨率的最终数值，并以角分表示。将您的答案四舍五入到三位有效数字。",
            "solution": "用户提供了一个需要解决的问题。根据说明，第一步是验证问题陈述。\n\n### 第1步：提取已知条件\n从问题陈述中逐字提取的已知条件如下：\n-   **模型**：一个带有平坦矩形微型显示器的简单几何眼模型。\n-   **像素间距**：$p = 10 \\, \\mu\\text{m}$。\n-   **顶点距离**：$d = 40 \\, \\text{mm}$。\n-   **水平视场**：$\\theta_{\\text{FOV}} = 100^{\\circ}$。\n-   **目标量**：每个像素的平均水平角张度，单位为角分。\n-   **假设**：\n    1.  微型显示器是平坦的，并以光轴为中心。\n    2.  像素以恒定的间距紧密排列，并完全跨越产生所述视场的有效宽度。\n    3.  水平视场等于在给定顶点距离处，显示器的有效宽度所对的视角。\n-   **任务要求**：\n    1.  使用三角几何从第一性原理推导每个像素的平均水平角张度的表达式。\n    2.  针对给定的数值计算该表达式的值。\n    3.  将最终数值答案四舍五入到三位有效数字。\n\n### 第2步：使用提取的已知条件进行验证\n根据验证标准对问题进行评估：\n-   **科学性**：该问题基于基础几何光学。从固定距离观看平面屏幕的模型是分析头戴式显示器时使用的标准一阶近似。物理量（像素间距、顶点距离、视场）在当前技术的可实现范围内。角分辨率和视场的概念是显示工程和视觉感知的基本概念。\n-   **适定性**：该问题是适定的。它提供了所有必要的数据（$p$、$d$、$\\theta_{\\text{FOV}}$）和一组清晰的假设来定义这些量之间的几何关系。目标是推导一个特定的物理量然后计算其值，这是物理或工程问题的标准结构。存在唯一解。\n-   **客观性**：语言精确、量化，没有主观或含糊的术语。假设被明确陈述，没有留下误解的余地。\n\n该问题没有表现出任何已定义的缺陷：\n1.  **科学或事实不准确**：没有违反科学原理。\n2.  **不可形式化或不相关**：该问题很容易使用几何学进行形式化。\n3.  **不完整或矛盾的设置**：设置是完整的且自洽的。\n4.  **不切实际或不可行**：参数在物理上是合理的。\n5.  **不适定或结构不良**：问题结构良好，并能导向唯一解。\n6.  **故作高深、琐碎或同义反复**：问题需要进行非平凡的推导和计算。\n7.  **超出科学可验证范围**：推导和结果在数学上是可验证的。\n\n### 第3步：结论与行动\n问题是**有效的**。将提供一个合理的解答。\n\n### 解答推导\n问题要求计算每个像素的平均水平角张度。这个量我们记为 $\\alpha_{\\text{avg}}$，定义为总水平视场除以水平方向上的像素总数。\n$$\n\\alpha_{\\text{avg}} = \\frac{\\theta_{\\text{FOV}}}{N}\n$$\n其中 $\\theta_{\\text{FOV}}$ 是水平视场，$N$ 是显示器水平宽度上的像素数量。\n\n我们的第一个任务是找到 $N$ 的表达式。像素数量是显示器的总有效水平宽度 $W$ 除以像素间距 $p$。\n$$\nN = \\frac{W}{p}\n$$\n问题要求我们将宽度 $W$ 与视场 $\\theta_{\\text{FOV}}$ 和顶点距离 $d$ 联系起来。我们使用所提供的几何模型。显示器是平坦的，以光轴为中心，眼睛的入瞳距显示器距离为 $d$。这形成了一个以眼睛为顶点、显示器宽度 $W$ 为底、距离 $d$ 为高的等腰三角形。\n\n这个几何结构可以通过考虑由高 $d$ 将等腰三角形二等分而形成的两个直角三角形之一来分析。每个直角三角形具有：\n-   眼睛处的角度为 $\\frac{\\theta_{\\text{FOV}}}{2}$。\n-   长度为 $\\frac{W}{2}$ 的对边。\n-   长度为 $d$ 的邻边。\n\n根据直角三角形中正切函数的定义：\n$$\n\\tan\\left(\\frac{\\theta_{\\text{FOV}}}{2}\\right) = \\frac{\\text{对边}}{\\text{邻边}} = \\frac{W/2}{d}\n$$\n我们可以解出显示器宽度 $W$：\n$$\nW = 2d \\tan\\left(\\frac{\\theta_{\\text{FOV}}}{2}\\right)\n$$\n现在我们可以通过代入 $W$ 的这个表达式来找到水平像素的总数 $N$：\n$$\nN = \\frac{W}{p} = \\frac{2d \\tan\\left(\\frac{\\theta_{\\text{FOV}}}{2}\\right)}{p}\n$$\n最后，我们将 $N$ 的这个表达式代入我们最初对每个像素的平均角张度 $\\alpha_{\\text{avg}}$ 的定义中：\n$$\n\\alpha_{\\text{avg}} = \\frac{\\theta_{\\text{FOV}}}{N} = \\frac{\\theta_{\\text{FOV}}}{\\frac{2d \\tan\\left(\\frac{\\theta_{\\text{FOV}}}{2}\\right)}{p}}\n$$\n这简化为所需的表达式：\n$$\n\\alpha_{\\text{avg}} = \\frac{p \\cdot \\theta_{\\text{FOV}}}{2d \\tan\\left(\\frac{\\theta_{\\text{FOV}}}{2}\\right)}\n$$\n这个表达式给出了一个像素的平均角大小。请注意，$\\alpha_{\\text{avg}}$ 的单位将与分子中 $\\theta_{\\text{FOV}}$ 使用的单位相同，因为比率 $p/d$ 是无量纲的，三角函数也是无量纲的。\n\n### 数值计算\n我们被给予以下数值：\n-   $p = 10 \\, \\mu\\text{m} = 10 \\times 10^{-6} \\, \\text{m}$\n-   $d = 40 \\, \\text{mm} = 40 \\times 10^{-3} \\, \\text{m}$\n-   $\\theta_{\\text{FOV}} = 100^{\\circ}$\n\n首先，我们计算正切函数的半角：\n$$\n\\frac{\\theta_{\\text{FOV}}}{2} = \\frac{100^{\\circ}}{2} = 50^{\\circ}\n$$\n现在，我们将这些值代入推导出的表达式中。我们将首先以度为单位计算 $\\alpha_{\\text{avg}}$。\n$$\n\\alpha_{\\text{avg}}[\\text{度}] = \\frac{(10 \\times 10^{-6} \\, \\text{m}) \\cdot 100^{\\circ}}{2 \\cdot (40 \\times 10^{-3} \\, \\text{m}) \\tan(50^{\\circ})}\n$$\n$$\n\\alpha_{\\text{avg}}[\\text{度}] = \\frac{10^{-3}}{8 \\times 10^{-2} \\tan(50^{\\circ})} = \\frac{1}{80 \\tan(50^{\\circ})}\n$$\n使用值 $\\tan(50^{\\circ}) \\approx 1.19175359$：\n$$\n\\alpha_{\\text{avg}}[\\text{度}] \\approx \\frac{1}{80 \\cdot 1.19175359} \\approx \\frac{1}{95.340287} \\approx 0.01048873^{\\circ}\n$$\n问题要求答案以角分表示。我们使用转换因子 $1^{\\circ} = 60 \\, \\text{角分}$。\n$$\n\\alpha_{\\text{avg}}[\\text{角分}] = \\alpha_{\\text{avg}}[\\text{度}] \\times 60\n$$\n$$\n\\alpha_{\\text{avg}}[\\text{角分}] \\approx 0.01048873 \\times 60 \\approx 0.6293238 \\, \\text{角分}\n$$\n最后，我们按要求将结果四舍五入到三位有效数字。\n$$\n\\alpha_{\\text{avg}} \\approx 0.629 \\, \\text{角分}\n$$\n这个值代表单个像素在眼睛处所对的平均角度。作为参考，人眼的视敏度通常被认为是大约 $1$ 角分，因此这个分辨率在理想条件下接近人类感知的极限，尽管略微粗糙一些。",
            "answer": "$$\\boxed{0.629}$$"
        },
        {
            "introduction": "在增强现实手术导航中，系统的核心功能是将预先从计算机断层扫描（CT）或磁共振成像（MRI）中分割出的三维解剖结构模型准确地叠加到术中视频上，这个模型的准确性直接关系到手术的安全性和有效性。本练习将让你扮演医学信息学家的角色，使用集合论的基本定义来计算和评估分割算法的性能。你将学会区分精确率（Precision）和召回率（Recall）等关键指标，并解释它们在临床场景下的具体含义和对患者安全的影响。 ",
            "id": "4863080",
            "problem": "一个增强现实（AR）手术引导系统将分割出的解剖结构——左肾包膜——叠加到实时腹腔镜视频上，以辅助外科医生在部分肾切除术中保持安全边界。在医学信息学流程中，分割掩码表示为体素的二元集合。设预测的 AR 分割掩码为集合 $P$，基准真相掩码（由专家放射科医生根据术前计算机断层扫描手动整理）为集合 $G$。对于一个特定病例，通过体积分析观察到以下情况：\n- 预测的掩码包含 $|P| = 110{,}000$个体素。\n- 基准真相掩码包含 $|G| = 120{,}000$个体素。\n- 两者交集包含 $|P \\cap G| = 100{,}000$个体素。\n\n使用分割的二元分类计数的集合论基本定义，其中真阳性是重叠的体素，假阳性是预测中但不在基准真相中的体素，假阴性是基准真相中但未被预测的体素，计算该叠加的以下分割性能指标：\n- Dice 系数，\n- Jaccard 指数，\n- 精确率，\n- 召回率。\n\n将每个指标表示为 0 到 1 之间的无单位小数，并将结果四舍五入至四位有效数字。在最终答案中，按 Dice、Jaccard、精确率、召回率的顺序报告这四个指标。此外，在你的推理中，从核心定义出发，而不是使用快捷公式或预先记忆的结果，来解释这些值对于 AR 叠加的安全性和可用性的临床相关性。",
            "solution": "在尝试提供解决方案之前，对问题进行验证。\n\n### 步骤 1：提取已知信息\n- 预测的 AR 分割掩码是集合 $P$。\n- 基准真相掩码是集合 $G$。\n- 预测掩码的大小为 $|P| = 110,000$个体素。\n- 基准真相掩码的大小为 $|G| = 120,000$个体素。\n- 两个掩码交集的大小为 $|P \\cap G| = 100,000$个体素。\n- 分类计数的定义：\n  - 真阳性 ($TP$)：重叠的体素。\n  - 假阳性 ($FP$)：在预测中但不在基准真相中的体素。\n  - 假阴性 ($FN$)：在基准真相中但未被预测的体素。\n- 要求计算：Dice 系数、Jaccard 指数、精确率和召回率。\n- 输出格式：四舍五入至四位有效数字的小数，按 Dice、Jaccard、精确率、召回率的顺序报告。\n\n### 步骤 2：使用提取的已知信息进行验证\n该问题具有科学依据，提法得当且客观。它利用了集合论中标准的、形式化定义的感念，并将其应用于医学图像分析领域，这是医学信息学的核心组成部分。所提供的数据内部一致；交集的大小 $|P \\cap G| = 100,000$ 正确地小于或等于单个集合的大小 $|P| = 110,000$ 和 $|G| = 120,000$。问题是完整的，因为它提供了计算所要求指标的所有必要数据。对于解剖子结构的高分辨率医学扫描而言，体素计数是符合实际的。不存在歧义、矛盾或违反科学原则之处。\n\n### 步骤 3：结论与行动\n问题有效。将提供解决方案。\n\n### 解决方案推导\n\n该问题要求基于集合论原理计算分割掩码的四个性能指标。我们首先使用给定的集合 $P$（预测）和 $G$（基准真相）来形式化真阳性（$TP$）、假阳性（$FP$）和假阴性（$FN$）的定义。\n\n**真阳性**（$TP$）是正确识别为肾包膜一部分的体素。这些是同时存在于预测掩码 $P$ 和基准真相掩码 $G$ 中的体素。因此，真阳性的数量是两个集合交集的基数。\n$$TP = |P \\cap G|$$\n使用给定数据，我们有：\n$$TP = 100,000$$\n\n**假阳性**（$FP$）是错误识别为肾包膜一部分的体素。这些是存在于预测掩码 $P$ 中但不存在于基准真相掩码 $G$ 中的体素。这对应于集合差 $P \\setminus G$。假阳性的数量是这个集合差的基数，可以计算为：\n$$FP = |P \\setminus G| = |P| - |P \\cap G|$$\n代入给定值：\n$$FP = 110,000 - 100,000 = 10,000$$\n\n**假阴性**（$FN$）是属于肾包膜但被分割算法遗漏的体素。这些是存在于基准真相掩码 $G$ 中但不存在于预测掩码 $P$ 中的体素。这对应于集合差 $G \\setminus P$。假阴性的数量是这个集合差的基数：\n$$FN = |G \\setminus P| = |G| - |P \\cap G|$$\n代入给定值：\n$$FN = 120,000 - 100,000 = 20,000$$\n\n在确定了这些基本量之后，我们现在可以定义和计算每个所需的指标。\n\n**1. Dice 系数（Sørensen–Dice 指数）**\nDice 系数是衡量两个集合空间重叠度的指标。它定义为交集大小的两倍除以两个集合大小之和。\n$$Dice = \\frac{2 |P \\cap G|}{|P| + |G|}$$\n用 $TP$、$FP$ 和 $FN$ 表示，我们可以将 $|P| = TP + FP$ 和 $|G| = TP + FN$ 代入。代入后得到：\n$$Dice = \\frac{2 TP}{(TP + FP) + (TP + FN)} = \\frac{2 TP}{2 TP + FP + FN}$$\n使用给定的基数：\n$$Dice = \\frac{2 \\times 100,000}{110,000 + 120,000} = \\frac{200,000}{230,000} = \\frac{20}{23}$$\n作为四舍五入到四位有效数字的小数：\n$$Dice \\approx 0.869565... \\approx 0.8696$$\n\n**2. Jaccard 指数（交并比, IoU）**\nJaccard 指数是另一个衡量集合相似度的指标，定义为交集的大小除以并集的大小。\n$$Jaccard = \\frac{|P \\cap G|}{|P \\cup G|}$$\n并集的基数由容斥原理给出：$|P \\cup G| = |P| + |G| - |P \\cap G|$。\n用 $TP$、$FP$ 和 $FN$ 表示，并集 $|P \\cup G|$ 代表至少在一个掩码中被标记的所有体素，即 $TP + FP + FN$。\n$$Jaccard = \\frac{TP}{TP + FP + FN}$$\n使用计算出的值：\n$$Jaccard = \\frac{100,000}{100,000 + 10,000 + 20,000} = \\frac{100,000}{130,000} = \\frac{10}{13}$$\n作为四舍五入到四位有效数字的小数：\n$$Jaccard \\approx 0.769230... \\approx 0.7692$$\n\n**3. 精确率（阳性预测值）**\n精确率回答了这样一个问题：“在系统预测为目标组织的所有体素中，有多大比例实际上是目标组织？” 它是真阳性与预测阳性总数的比率。预测阳性的总数是预测集的大小，即 $|P|$。\n$$Precision = \\frac{TP}{|P|} = \\frac{TP}{TP + FP}$$\n使用计算出的值：\n$$Precision = \\frac{100,000}{110,000} = \\frac{10}{11}$$\n作为四舍五入到四位有效数字的小数：\n$$Precision \\approx 0.909090... \\approx 0.9091$$\n\n**4. 召回率（灵敏度，真阳性率）**\n召回率回答了这样一个问题：“在所有真正是目标组织的体素中，系统正确识别了多大比例？” 它是真阳性与实际阳性总数的比率。实际阳性的总数是基准真相集的大小，即 $|G|$。\n$$Recall = \\frac{TP}{|G|} = \\frac{TP}{TP + FN}$$\n使用计算出的值：\n$$Recall = \\frac{100,000}{120,000} = \\frac{10}{12} = \\frac{5}{6}$$\n作为四舍五入到四位有效数字的小数：\n$$Recall \\approx 0.833333... \\approx 0.8333$$\n\n### 指标的临床相关性\n\n- **Dice ($0.8696$) 和 Jaccard ($0.7692$)：** 这些指标给出了叠加层几何精度的整体感觉。约 0.87 的 Dice 分数表明空间重叠度良好至优秀。对于 AR 手术引导系统来说，这对外科医生的信任度和可用性至关重要。低分将意味着叠加层形状不佳或未对准，使其变得无用甚至危险。\n- **精确率 ($0.9091$)：** 这是一个关键的安全指标。高精确率意味着 AR 叠加层的假阳性率较低 ($FP=10,000$)。当系统高亮显示一个区域时，外科医生可以确信（在这种情况下为 $90.91\\%$）它确实是目标组织。这最大限度地降低了对可能被错误包含在叠加层中的健康非目标结构造成医源性损伤的风险。\n- **召回率 ($0.8333$)：** 该指标与叠加层的完整性有关。$0.8333$ 的召回率意味着系统成功识别了 $83.33\\%$ 的真实肾包膜，但遗漏了 $16.67\\%$（$FN=20,000$个体素）。对于部分肾切除术而言，其关键目标之一是最大限度地保留健康的肾组织，这些假阴性非常重要。外科医生依赖叠加层，可能会在比预期更靠近实际肾脏的位置进行切割，因为他们相信在叠加层缺失的区域有安全边界。这可能会损害手术的肾单位保留目标。\n\n总而言之，该 AR 系统相当精确，降低了在目标之外切割的风险，但其召回率表明它并非完全完整，从而产生了切除时过于靠近真实边界的风险。高 Dice 系数表明它总体上是一个非常有用的引导工具，但外科医生必须始终意识到它可能无法完全代表解剖结构的全貌。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.8696  0.7692  0.9091  0.8333 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "拥有精确的解剖模型后，增强现实系统面临的下一个挑战是如何将其与真实世界精确对齐，这一过程称为“注册”（Registration）。注册的精度是AR手术导航的生命线，任何微小的偏差都可能导致错误的引导，从而危及手术结果。本练习将带你深入计算机视觉的核心，通过计算“重投影误差”（Reprojection Error）来量化相机位姿估计的准确性，这是评估和校准AR跟踪系统的黄金标准方法。 ",
            "id": "4863100",
            "problem": "一个用于增强现实（AR）叠加的手术导航系统依赖于一个已校准的单目相机来配准附着在患者身上的基准标记点。在一个验证步骤中，给定相机的外参姿态估计和内参，并采集了检测到的基准点的二维图像坐标。假设采用无镜头畸变的标准针孔相机模型，计算所有对应点的均方根（RMS）重投影误差。\n\n使用以下数据：\n\n- 相机内参（单位：像素）：$f_x = 1200$, $f_y = 1200$, $c_x = 640$, $c_y = 360$。\n- 相机位姿（从世界坐标系到相机坐标系的旋转和平移）：\n$$\nR = \\begin{pmatrix}\n0  -1  0 \\\\\n1  \\phantom{-}0  0 \\\\\n0  \\phantom{-}0  1\n\\end{pmatrix}, \\quad\nt = \\begin{pmatrix}\n0.02 \\\\\n-0.01 \\\\\n0.50\n\\end{pmatrix} \\text{ 米。}\n$$\n- 三维基准世界点（单位：米）：\n$\\mathbf{X}_1 = (0.10, 0.00, 0.00)$,\n$\\mathbf{X}_2 = (0.00, 0.10, 0.00)$,\n$\\mathbf{X}_3 = (-0.10, 0.00, 0.00)$,\n$\\mathbf{X}_4 = (0.00, -0.10, 0.00)$。\n- 检测到的二维图像坐标（单位：像素）：\n$\\mathbf{u}_1^{\\text{meas}} = (690, 575)$,\n$\\mathbf{u}_2^{\\text{meas}} = (447, 338)$,\n$\\mathbf{u}_3^{\\text{meas}} = (685, 100)$,\n$\\mathbf{u}_4^{\\text{meas}} = (931, 334)$。\n\n采用以下基于标准相机几何的定义。通过 $\\mathbf{X}_c = R \\mathbf{X}_w + t$ 将每个三维世界点 $\\mathbf{X}_w$ 变换到相机坐标系。然后使用归一化坐标 $(x_n, y_n) = (X_c/Z_c, Y_c/Z_c)$ 和像素坐标 $(u, v) = (f_x x_n + c_x, f_y y_n + c_y)$ 投影到图像平面。对于每个对应点，将重投影误差定义为投影像素坐标与测量像素坐标之间的欧几里得距离（以像素为单位）。$N$ 个对应点的均方根重投影误差是平方欧几里得距离均值的平方根。\n\n使用上述数据计算均方根重投影误差。最终答案以像素为单位表示，并四舍五入到四位有效数字。",
            "solution": "首先根据既定标准对问题进行验证。\n\n### 步骤 1：提取已知条件\n\n- 相机内参（单位：像素）：$f_x = 1200$, $f_y = 1200$, $c_x = 640$, $c_y = 360$。\n- 相机位姿（从世界坐标系到相机坐标系的旋转和平移）：\n$$\nR = \\begin{pmatrix}\n0  -1  0 \\\\\n1  \\phantom{-}0  0 \\\\\n0  \\phantom{-}0  1\n\\end{pmatrix}, \\quad\nt = \\begin{pmatrix}\n0.02 \\\\\n-0.01 \\\\\n0.50\n\\end{pmatrix} \\text{ 米。}\n$$\n- 三维基准世界点（单位：米）：\n$\\mathbf{X}_1 = (0.10, 0.00, 0.00)$,\n$\\mathbf{X}_2 = (0.00, 0.10, 0.00)$,\n$\\mathbf{X}_3 = (-0.10, 0.00, 0.00)$,\n$\\mathbf{X}_4 = (0.00, -0.10, 0.00)$。\n- 检测到的二维图像坐标（单位：像素）：\n$\\mathbf{u}_1^{\\text{meas}} = (690, 575)$,\n$\\mathbf{u}_2^{\\text{meas}} = (447, 338)$,\n$\\mathbf{u}_3^{\\text{meas}} = (685, 100)$,\n$\\mathbf{u}_4^{\\text{meas}} = (931, 334)$。\n- 定义：\n  - 世界坐标到相机坐标的变换：$\\mathbf{X}_c = R \\mathbf{X}_w + t$。\n  - 投影到归一化图像坐标：$(x_n, y_n) = (X_c/Z_c, Y_c/Z_c)$。\n  - 投影到像素坐标：$(u, v) = (f_x x_n + c_x, f_y y_n + c_y)$。\n  - 重投影误差：投影坐标与测量坐标之间的欧几里得距离。\n  - 均方根重投影误差：$E_{RMS} = \\sqrt{\\frac{1}{N} \\sum_{i=1}^{N} ||\\mathbf{u}_i^{\\text{proj}} - \\mathbf{u}_i^{\\text{meas}}||^2}$。\n\n### 步骤 2：使用提取的已知条件进行验证\n\n- **科学依据**：该问题基于标准针孔相机模型，这是计算机视觉和摄影测量学中一个基本且广泛使用的原理。变换和投影方程在该领域是正确且标准的。所提供的相机内参、位姿和点坐标值在物理上是合理的。基于增强现实的手术导航背景是医疗信息学中一个有效且重要的应用领域。\n- **适定性**：该问题提供了一套完整的数据和一组清晰、无歧义的指令来计算单个数值。所有变量都有定义，目标明确。存在唯一解，并可以通过遵循指定程序确定。\n- **客观性**：该问题使用精确、定量和无偏见的语言进行陈述。没有主观或基于意见的陈述。\n\n该问题没有表现出验证标准中列出的任何缺陷（例如，科学上不健全、不完整、不明确）。\n\n### 步骤 3：结论与行动\n\n问题陈述有效。将提供完整解答。\n\n均方根（RMS）重投影误差的计算方法是：使用给定的相机模型和外参将每个三维世界点投影到图像平面上，然后将这些投影坐标与测量的坐标进行比较。\n\n对于每个世界点 $\\mathbf{X}_w = (X_w, Y_w, Z_w)^T$，投影过程包括两个步骤：\n1.  使用旋转矩阵 $R$ 和平移向量 $t$ 将点从世界坐标变换到相机坐标 $\\mathbf{X}_c = (X_c, Y_c, Z_c)^T$：\n    $$ \\mathbf{X}_c = R \\mathbf{X}_w + t $$\n2.  使用相机内参 $f_x, f_y, c_x, c_y$ 将点从相机坐标投影到像素坐标 $\\mathbf{u}^{\\text{proj}} = (u, v)^T$：\n    $$ u = f_x \\frac{X_c}{Z_c} + c_x $$\n    $$ v = f_y \\frac{Y_c}{Z_c} + c_y $$\n\n第 $i$ 个点的重投影误差平方是投影点 $\\mathbf{u}_i^{\\text{proj}} = (u_i, v_i)^T$ 与测量点 $\\mathbf{u}_i^{\\text{meas}} = (u_i^{\\text{meas}}, v_i^{\\text{meas}})^T$ 之间的欧几里得距离的平方：\n$$ e_i^2 = ||\\mathbf{u}_i^{\\text{proj}} - \\mathbf{u}_i^{\\text{meas}}||^2 = (u_i - u_i^{\\text{meas}})^2 + (v_i - v_i^{\\text{meas}})^2 $$\n\n对于 $N$ 个点，均方根重投影误差为：\n$$ E_{\\text{RMS}} = \\sqrt{\\frac{1}{N} \\sum_{i=1}^{N} e_i^2} $$\n\n我们现在对 $N=4$ 个基准点中的每一个应用此过程。\n\n**点 1:** $\\mathbf{X}_1 = (0.10, 0.00, 0.00)^T$\n- 相机坐标：\n$$ \\mathbf{X}_{c,1} = \\begin{pmatrix} 0  -1  0 \\\\ 1  0  0 \\\\ 0  0  1 \\end{pmatrix} \\begin{pmatrix} 0.10 \\\\ 0.00 \\\\ 0.00 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 0.10 \\\\ 0 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} 0.02 \\\\ 0.09 \\\\ 0.50 \\end{pmatrix} $$\n- 投影像素坐标：\n$u_1 = 1200 \\times \\frac{0.02}{0.50} + 640 = 1200 \\times 0.04 + 640 = 48 + 640 = 688$\n$v_1 = 1200 \\times \\frac{0.09}{0.50} + 360 = 1200 \\times 0.18 + 360 = 216 + 360 = 576$\n所以，$\\mathbf{u}_1^{\\text{proj}} = (688, 576)$。\n- 误差平方：$\\mathbf{u}_1^{\\text{meas}} = (690, 575)$\n$e_1^2 = (688 - 690)^2 + (576 - 575)^2 = (-2)^2 + 1^2 = 4 + 1 = 5$\n\n**点 2:** $\\mathbf{X}_2 = (0.00, 0.10, 0.00)^T$\n- 相机坐标：\n$$ \\mathbf{X}_{c,2} = \\begin{pmatrix} 0  -1  0 \\\\ 1  0  0 \\\\ 0  0  1 \\end{pmatrix} \\begin{pmatrix} 0.00 \\\\ 0.10 \\\\ 0.00 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} -0.10 \\\\ 0 \\\\ 0 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} -0.08 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} $$\n- 投影像素坐标：\n$u_2 = 1200 \\times \\frac{-0.08}{0.50} + 640 = 1200 \\times (-0.16) + 640 = -192 + 640 = 448$\n$v_2 = 1200 \\times \\frac{-0.01}{0.50} + 360 = 1200 \\times (-0.02) + 360 = -24 + 360 = 336$\n所以，$\\mathbf{u}_2^{\\text{proj}} = (448, 336)$。\n- 误差平方：$\\mathbf{u}_2^{\\text{meas}} = (447, 338)$\n$e_2^2 = (448 - 447)^2 + (336 - 338)^2 = 1^2 + (-2)^2 = 1 + 4 = 5$\n\n**点 3:** $\\mathbf{X}_3 = (-0.10, 0.00, 0.00)^T$\n- 相机坐标：\n$$ \\mathbf{X}_{c,3} = \\begin{pmatrix} 0  -1  0 \\\\ 1  0  0 \\\\ 0  0  1 \\end{pmatrix} \\begin{pmatrix} -0.10 \\\\ 0.00 \\\\ 0.00 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ -0.10 \\\\ 0 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} 0.02 \\\\ -0.11 \\\\ 0.50 \\end{pmatrix} $$\n- 投影像素坐标：\n$u_3 = 1200 \\times \\frac{0.02}{0.50} + 640 = 1200 \\times 0.04 + 640 = 48 + 640 = 688$\n$v_3 = 1200 \\times \\frac{-0.11}{0.50} + 360 = 1200 \\times (-0.22) + 360 = -264 + 360 = 96$\n所以，$\\mathbf{u}_3^{\\text{proj}} = (688, 96)$。\n- 误差平方：$\\mathbf{u}_3^{\\text{meas}} = (685, 100)$\n$e_3^2 = (688 - 685)^2 + (96 - 100)^2 = 3^2 + (-4)^2 = 9 + 16 = 25$\n\n**点 4:** $\\mathbf{X}_4 = (0.00, -0.10, 0.00)^T$\n- 相机坐标：\n$$ \\mathbf{X}_{c,4} = \\begin{pmatrix} 0  -1  0 \\\\ 1  0  0 \\\\ 0  0  1 \\end{pmatrix} \\begin{pmatrix} 0.00 \\\\ -0.10 \\\\ 0.00 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} 0.10 \\\\ 0 \\\\ 0 \\end{pmatrix} + \\begin{pmatrix} 0.02 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} = \\begin{pmatrix} 0.12 \\\\ -0.01 \\\\ 0.50 \\end{pmatrix} $$\n- 投影像素坐标：\n$u_4 = 1200 \\times \\frac{0.12}{0.50} + 640 = 1200 \\times 0.24 + 640 = 288 + 640 = 928$\n$v_4 = 1200 \\times \\frac{-0.01}{0.50} + 360 = 1200 \\times (-0.02) + 360 = -24 + 360 = 336$\n所以，$\\mathbf{u}_4^{\\text{proj}} = (928, 336)$。\n- 误差平方：$\\mathbf{u}_4^{\\text{meas}} = (931, 334)$\n$e_4^2 = (928 - 931)^2 + (336 - 334)^2 = (-3)^2 + 2^2 = 9 + 4 = 13$\n\n最后，我们计算均方根重投影误差：\n- 误差平方和：\n$$ \\sum_{i=1}^{4} e_i^2 = e_1^2 + e_2^2 + e_3^2 + e_4^2 = 5 + 5 + 25 + 13 = 48 $$\n- 均方误差 (MSE)：\n$$ \\text{MSE} = \\frac{1}{4} \\sum_{i=1}^{4} e_i^2 = \\frac{48}{4} = 12 $$\n- 均方根 (RMS) 误差：\n$$ E_{\\text{RMS}} = \\sqrt{\\text{MSE}} = \\sqrt{12} $$\n为了提供数值答案，我们计算该值并四舍五入到四位有效数字。\n$$ E_{\\text{RMS}} = \\sqrt{12} \\approx 3.4641016... $$\n四舍五入到四位有效数字得到 $3.464$。单位是像素。",
            "answer": "$$\\boxed{3.464}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Evaluating a predictive model for fairness often begins with a group fairness audit. This involves comparing the model's performance across different demographic groups to check for systematic disparities. The exercise below  introduces one of the most important criteria, **Equalized Odds**, which requires that a model has equal true positive rates and false positive rates for all groups. By working directly with confusion matrix data from a hypothetical sepsis prediction model, you will calculate these key performance metrics and determine if the model meets this crucial fairness standard.",
            "id": "4390084",
            "problem": "A hospital deploys a binary predictive model to flag patients at triage in the Emergency Department (ED) for urgent sepsis workup. To audit algorithmic fairness across two demographic groups under consideration, analysts compile confusion matrices from a representative evaluation cohort. For Group A, the confusion matrix counts are $\\text{TP}=80$, $\\text{FP}=20$, $\\text{FN}=40$, $\\text{TN}=860$. For Group B, the counts are $\\text{TP}=60$, $\\text{FP}=15$, $\\text{FN}=30$, $\\text{TN}=895$. Using standard classification metric definitions grounded in the confusion matrix, compute the true positive rate (TPR), false positive rate (FPR), and positive predictive value (PPV) for each group. Then, assess the equalized odds criterion, which requires equality of both the true positive rate and the false positive rate across the groups, and indicate whether it holds for this model.\n\nProvide your final results as unitless proportions (no percentage sign), rounded to four significant figures. Report your final answer as a single row matrix in the order $(\\text{TPR}_{A}, \\text{FPR}_{A}, \\text{PPV}_{A}, \\text{TPR}_{B}, \\text{FPR}_{B}, \\text{PPV}_{B}, I)$, where $I$ is $1$ if equalized odds holds and $0$ otherwise.",
            "solution": "The problem statement is first validated for scientific soundness, objectivity, and completeness.\n\n**Step 1: Extract Givens**\n-   For Group A, the confusion matrix counts are: True Positives ($\\text{TP}_A$) = $80$, False Positives ($\\text{FP}_A$) = $20$, False Negatives ($\\text{FN}_A$) = $40$, True Negatives ($\\text{TN}_A$) = $860$.\n-   For Group B, the confusion matrix counts are: True Positives ($\\text{TP}_B$) = $60$, False Positives ($\\text{FP}_B$) = $15$, False Negatives ($\\text{FN}_B$) = $30$, True Negatives ($\\text{TN}_B$) = $895$.\n-   Metrics to compute: True Positive Rate (TPR), False Positive Rate (FPR), and Positive Predictive Value (PPV) for each group.\n-   Fairness criterion to assess: Equalized odds, which requires equality of both TPR and FPR across groups.\n-   Output format: A row matrix $(\\text{TPR}_{A}, \\text{FPR}_{A}, \\text{PPV}_{A}, \\text{TPR}_{B}, \\text{FPR}_{B}, \\text{PPV}_{B}, I)$, where $I$ is an indicator variable ($1$ if equalized odds holds, $0$ otherwise).\n-   Rounding: Final proportions are to be rounded to four significant figures.\n\n**Step 2: Validate Using Extracted Givens**\n-   **Scientifically Grounded**: The problem is based on standard, well-defined metrics from the field of machine learning and classification model evaluation (confusion matrix, TPR, FPR, PPV) and the established fairness criterion of equalized odds. The context of a clinical predictive model is a standard application area in health systems science. The problem is scientifically valid.\n-   **Well-Posed**: The problem provides all necessary data and clear definitions to compute the required metrics and make the requested assessment. The existence of a unique, stable solution is guaranteed.\n-   **Objective**: The problem is stated using precise, quantitative, and unbiased language.\n\n**Step 3: Verdict and Action**\nThe problem is valid. It is self-contained, scientifically grounded, and well-posed. A solution will be computed.\n\nThe required metrics are defined as follows:\n-   True Positive Rate (TPR), or Sensitivity: The proportion of actual positives that are correctly identified.\n$$ \\text{TPR} = \\frac{\\text{TP}}{\\text{TP} + \\text{FN}} $$\n-   False Positive Rate (FPR), or Fall-out: The proportion of actual negatives that are incorrectly identified as positive.\n$$ \\text{FPR} = \\frac{\\text{FP}}{\\text{FP} + \\text{TN}} $$\n-   Positive Predictive Value (PPV), or Precision: The proportion of positive predictions that are actually correct.\n$$ \\text{PPV} = \\frac{\\text{TP}}{\\text{TP} + \\text{FP}} $$\n\nWe now compute these metrics for each group using the provided data.\n\n**For Group A:**\n-   $\\text{TP}_A = 80$, $\\text{FP}_A = 20$, $\\text{FN}_A = 40$, $\\text{TN}_A = 860$.\n-   The number of actual positives is $\\text{TP}_A + \\text{FN}_A = 80 + 40 = 120$.\n-   The number of actual negatives is $\\text{FP}_A + \\text{TN}_A = 20 + 860 = 880$.\n-   The number of predicted positives is $\\text{TP}_A + \\text{FP}_A = 80 + 20 = 100$.\n\nThe metrics are calculated as:\n$$ \\text{TPR}_A = \\frac{80}{80 + 40} = \\frac{80}{120} = \\frac{2}{3} \\approx 0.66666... $$\nRounding to four significant figures, $\\text{TPR}_A = 0.6667$.\n\n$$ \\text{FPR}_A = \\frac{20}{20 + 860} = \\frac{20}{880} = \\frac{1}{44} \\approx 0.022727... $$\nRounding to four significant figures, $\\text{FPR}_A = 0.02273$.\n\n$$ \\text{PPV}_A = \\frac{80}{80 + 20} = \\frac{80}{100} = 0.8 $$\nExpressed with four significant figures, $\\text{PPV}_A = 0.8000$.\n\n**For Group B:**\n-   $\\text{TP}_B = 60$, $\\text{FP}_B = 15$, $\\text{FN}_B = 30$, $\\text{TN}_B = 895$.\n-   The number of actual positives is $\\text{TP}_B + \\text{FN}_B = 60 + 30 = 90$.\n-   The number of actual negatives is $\\text{FP}_B + \\text{TN}_B = 15 + 895 = 910$.\n-   The number of predicted positives is $\\text{TP}_B + \\text{FP}_B = 60 + 15 = 75$.\n\nThe metrics are calculated as:\n$$ \\text{TPR}_B = \\frac{60}{60 + 30} = \\frac{60}{90} = \\frac{2}{3} \\approx 0.66666... $$\nRounding to four significant figures, $\\text{TPR}_B = 0.6667$.\n\n$$ \\text{FPR}_B = \\frac{15}{15 + 895} = \\frac{15}{910} = \\frac{3}{182} \\approx 0.0164835... $$\nRounding to four significant figures, $\\text{FPR}_B = 0.01648$.\n\n$$ \\text{PPV}_B = \\frac{60}{60 + 15} = \\frac{60}{75} = \\frac{4}{5} = 0.8 $$\nExpressed with four significant figures, $\\text{PPV}_B = 0.8000$.\n\n**Assessment of Equalized Odds:**\nThe equalized odds criterion requires that the model satisfies both $\\text{TPR}_A = \\text{TPR}_B$ and $\\text{FPR}_A = \\text{FPR}_B$.\n-   Comparing TPRs: $\\text{TPR}_A = 0.6667$ and $\\text{TPR}_B = 0.6667$. The true positive rates are equal (within the specified precision).\n-   Comparing FPRs: $\\text{FPR}_A = 0.02273$ and $\\text{FPR}_B = 0.01648$. The false positive rates are not equal.\n\nSince the false positive rates are unequal, the equalized odds criterion is not satisfied. Therefore, the indicator variable $I$ is $0$.\n\nThe final results are assembled into the required row matrix format: $(\\text{TPR}_{A}, \\text{FPR}_{A}, \\text{PPV}_{A}, \\text{TPR}_{B}, \\text{FPR}_{B}, \\text{PPV}_{B}, I)$.\nThe values are $(0.6667, 0.02273, 0.8000, 0.6667, 0.01648, 0.8000, 0)$.",
            "answer": "$$ \\boxed{\\begin{pmatrix} 0.6667 & 0.02273 & 0.8000 & 0.6667 & 0.01648 & 0.8000 & 0 \\end{pmatrix}} $$"
        },
        {
            "introduction": "While group fairness metrics are essential, they don't guarantee that similar individuals are treated similarly. This is the core principle of **individual fairness**. The following practice  operationalizes this idea using a formal mathematical constraint known as the Lipschitz condition. You will learn how to measure the 'distance' between two patients based on their clinical features and then use this distance to calculate the maximum allowable difference in their risk scores, providing a quantitative tool to guard against arbitrary individual-level discrimination.",
            "id": "4390112",
            "problem": "A health system is deploying a predictive analytics model that estimates $30$-day hospital readmission risk from Electronic Health Record (EHR) data. The governance committee has adopted an individual fairness requirement formalized by a Lipschitz condition: for any two patients represented in a standardized feature space with metric distance $d$, the absolute prediction difference must satisfy the bound $\\lvert f(\\mathbf{x}) - f(\\mathbf{x}') \\rvert \\leq L\\, d(\\mathbf{x}, \\mathbf{x}')$, where $L$ is a fixed Lipschitz fairness constant.\n\nFeatures are standardized by $z$-scoring: for each raw feature $x_{j}$, $z_{j} = (x_{j} - \\mu_{j}) / \\sigma_{j}$, where $\\mu_{j}$ is the empirical mean and $\\sigma_{j}$ is the empirical standard deviation computed on the training population. The metric $d(\\mathbf{x}, \\mathbf{x}')$ is the Euclidean distance in this standardized space.\n\nConsider two patients, A and B, described by three clinically relevant features: age (years), Charlson Comorbidity Index (CCI, unitless score), and count of prior-year admissions (unitless count). The population parameters for standardization are $\\sigma_{\\text{age}} = 10$, $\\sigma_{\\text{CCI}} = 2$, and $\\sigma_{\\text{adm}} = 1$, with corresponding means $\\mu_{\\text{age}} = 50$, $\\mu_{\\text{CCI}} = 4$, and $\\mu_{\\text{adm}} = 2$. Patient A has age $60$, CCI $6$, and prior-year admissions $3$. Patient B has age $40$, CCI $2$, and prior-year admissions $2$. The model’s predicted $30$-day readmission risks are $f(\\mathbf{x}_{A}) = 0.62$ and $f(\\mathbf{x}_{B}) = 0.25$. The governance committee fixed the Lipschitz fairness constant at $L = 0.10$.\n\nUsing the core definitions of $z$-score standardization and Euclidean distance, and the formal Lipschitz individual fairness condition, derive the maximum allowable absolute prediction difference between these two patients and determine whether the model’s outputs violate the fairness bound. Your final reported answer must be the single numerical value of the maximum allowable difference $L\\, d(\\mathbf{x}_{A}, \\mathbf{x}_{B})$ expressed as a decimal. If rounding is needed, round your answer to four significant figures. Do not include any units in your final answer.",
            "solution": "The problem requires the calculation of the maximum allowable absolute prediction difference between two patients, A and B, based on a Lipschitz individual fairness constraint. It also asks for a determination of whether the model's predictions violate this constraint. The final answer must be a single numerical value representing this maximum allowable difference.\n\nThe fairness condition is formalized as a Lipschitz condition: $\\lvert f(\\mathbf{x}) - f(\\mathbf{x}') \\rvert \\leq L\\, d(\\mathbf{x}, \\mathbf{x}')$, where $f(\\mathbf{x})$ is the model's predicted risk, $L$ is the Lipschitz fairness constant, and $d(\\mathbf{x}, \\mathbf{x}')$ is the Euclidean distance between patient feature vectors in a standardized space.\n\nThe first step is to transform the raw feature vectors for Patient A and Patient B into the standardized $z$-score space. The standardization formula for each feature $j$ is $z_{j} = \\frac{x_{j} - \\mu_{j}}{\\sigma_{j}}$. The feature vectors consist of (age, Charlson Comorbidity Index, prior-year admissions).\n\nThe raw features for Patient A are $(\\text{age}, \\text{CCI}, \\text{adm}) = (60, 6, 3)$. The population parameters for standardization are given as $\\mu_{\\text{age}} = 50$ and $\\sigma_{\\text{age}} = 10$; $\\mu_{\\text{CCI}} = 4$ and $\\sigma_{\\text{CCI}} = 2$; $\\mu_{\\text{adm}} = 2$ and $\\sigma_{\\text{adm}} = 1$. The standardized vector for Patient A, $\\mathbf{z}_{A}$, is calculated as:\n$$z_{A, \\text{age}} = \\frac{60 - 50}{10} = \\frac{10}{10} = 1$$\n$$z_{A, \\text{CCI}} = \\frac{6 - 4}{2} = \\frac{2}{2} = 1$$\n$$z_{A, \\text{adm}} = \\frac{3 - 2}{1} = \\frac{1}{1} = 1$$\nThus, the standardized feature vector for Patient A is $\\mathbf{z}_{A} = (1, 1, 1)$.\n\nThe raw features for Patient B are $(\\text{age}, \\text{CCI}, \\text{adm}) = (40, 2, 2)$. Using the same population parameters, the standardized vector for Patient B, $\\mathbf{z}_{B}$, is:\n$$z_{B, \\text{age}} = \\frac{40 - 50}{10} = \\frac{-10}{10} = -1$$\n$$z_{B, \\text{CCI}} = \\frac{2 - 4}{2} = \\frac{-2}{2} = -1$$\n$$z_{B, \\text{adm}} = \\frac{2 - 2}{1} = \\frac{0}{1} = 0$$\nThus, the standardized feature vector for Patient B is $\\mathbf{z}_{B} = (-1, -1, 0)$.\n\nNext, we compute the Euclidean distance $d(\\mathbf{z}_{A}, \\mathbf{z}_{B})$ between the two standardized vectors. The formula for Euclidean distance in a $3$-dimensional space is $d(\\mathbf{u}, \\mathbf{v}) = \\sqrt{(u_1 - v_1)^2 + (u_2 - v_2)^2 + (u_3 - v_3)^2}$.\n$$d(\\mathbf{z}_{A}, \\mathbf{z}_{B}) = \\sqrt{(z_{A, \\text{age}} - z_{B, \\text{age}})^2 + (z_{A, \\text{CCI}} - z_{B, \\text{CCI}})^2 + (z_{A, \\text{adm}} - z_{B, \\text{adm}})^2}$$\nSubstituting the calculated $z$-scores:\n$$d(\\mathbf{z}_{A}, \\mathbf{z}_{B}) = \\sqrt{(1 - (-1))^2 + (1 - (-1))^2 + (1 - 0)^2}$$\n$$d(\\mathbf{z}_{A}, \\mathbf{z}_{B}) = \\sqrt{2^2 + 2^2 + 1^2}$$\n$$d(\\mathbf{z}_{A}, \\mathbf{z}_{B}) = \\sqrt{4 + 4 + 1} = \\sqrt{9} = 3$$\nThe distance between the patients in the standardized feature space is exactly $3$.\n\nThe maximum allowable absolute prediction difference is given by the term $L\\, d(\\mathbf{z}_{A}, \\mathbf{z}_{B})$. The Lipschitz fairness constant is fixed at $L = 0.10$.\n$$ \\text{Maximum allowable difference} = L \\times d(\\mathbf{z}_{A}, \\mathbf{z}_{B}) = 0.10 \\times 3 = 0.30 $$\nThis is the value requested for the final answer. The problem asks to express this as a decimal, and if rounding is needed, to four significant figures. The result $0.3$ is exact. To adhere to the implied precision standard by this instruction, we express this as $0.3000$, which has four significant figures.\n\nTo complete the full analysis requested by the prompt, we check if the model's actual predictions violate this fairness bound. The model's predictions are $f(\\mathbf{x}_{A}) = 0.62$ and $f(\\mathbf{x}_{B}) = 0.25$.\nThe actual absolute difference in predictions is:\n$$ \\lvert f(\\mathbf{x}_{A}) - f(\\mathbf{x}_{B}) \\rvert = |0.62 - 0.25| = 0.37 $$\nWe compare the actual difference ($0.37$) with the maximum allowable difference ($0.30$):\n$$0.37 > 0.30$$\nSince the actual difference is greater than the maximum allowable difference, the model's outputs for these two patients violate the defined fairness requirement.\n\nThe problem, however, asks only for the single numerical value of the maximum allowable difference, $L\\, d(\\mathbf{x}_{A}, \\mathbf{x}_{B})$.",
            "answer": "$$\\boxed{0.3000}$$"
        },
        {
            "introduction": "Statistical fairness metrics like Equalized Odds describe correlations in the data, but they may not capture the underlying causal drivers of disparity. The final exercise  presents a thought experiment to explore this critical distinction and introduce the concept of **counterfactual fairness**. By analyzing a simple structural causal model, you will uncover a scenario where a model appears fair by statistical measures but is profoundly unfair from a causal perspective. This practice highlights why understanding the 'why' behind a prediction is just as important as observing 'what' the prediction is.",
            "id": "4390089",
            "problem": "A hospital deploys a predictive analytics system to triage suspected sepsis cases in the emergency department. Consider a stylized structural causal model with a binary protected attribute $A \\in \\{0,1\\}$ (for example, membership in a socially disadvantaged group), a binary latent physiological susceptibility $U \\in \\{0,1\\}$, a binary mediator biomarker $M \\in \\{0,1\\}$, a binary true clinical state $Y \\in \\{0,1\\}$ indicating whether the patient will require intensive care, and a binary risk score decision $R \\in \\{0,1\\}$ where $R=1$ triggers intensive resources. The system is defined by the following data-generating process:\n- $A \\sim \\operatorname{Bernoulli}(1/2)$ and $U \\sim \\operatorname{Bernoulli}(1/2)$ independently.\n- $M = A \\oplus U$, where $\\oplus$ denotes exclusive OR (addition modulo $2$).\n- $Y = M$.\n- $R = M$.\n\nYou may assume standard causal semantics of structural causal models and interventions. Use the following core definitions as the fundamental base:\n- Equalized odds (EO): a predictor $R$ satisfies equalized odds with respect to a protected attribute $A$ and outcome $Y$ if $R \\perp A \\mid Y$, equivalently, $\\Pr(R=1 \\mid Y=y, A=0) = \\Pr(R=1 \\mid Y=y, A=1)$ for each $y \\in \\{0,1\\}$.\n- Counterfactual fairness (CF): a predictor $R$ is counterfactually fair if for each individual with latent background variables held fixed, $R(A \\leftarrow a, \\text{background}) = R(A \\leftarrow a', \\text{background})$ for all $a,a' \\in \\{0,1\\}$.\n\nTasks:\n1. Using the observational distribution implied by the model above, determine whether equalized odds holds by computing $\\Pr(R=1 \\mid Y=y, A=a)$ for each $y \\in \\{0,1\\}$ and each $a \\in \\{0,1\\}$. Explain your reasoning from the model specification and fundamental definitions only.\n2. Define the counterfactual unfairness rate as the probability that the decision would change under a counterfactual intervention on the protected attribute while holding the latent susceptibility $U$ fixed:\n$$\n\\operatorname{CFU} \\equiv \\Pr\\!\\big(R(A \\leftarrow 0, U) \\neq R(A \\leftarrow 1, U)\\big).\n$$\nCompute $\\operatorname{CFU}$ under the model above.\n\nGive your final answer as the single real-valued number equal to $\\operatorname{CFU}$. Express it as a decimal or a fraction, without a percentage sign. No rounding is required.",
            "solution": "The problem statement is first validated against the required criteria.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n-   **Model:** A structural causal model (SCM).\n-   **Variables:**\n    -   $A \\in \\{0,1\\}$: binary protected attribute.\n    -   $U \\in \\{0,1\\}$: binary latent physiological susceptibility.\n    -   $M \\in \\{0,1\\}$: binary mediator biomarker.\n    -   $Y \\in \\{0,1\\}$: binary true clinical state.\n    -   $R \\in \\{0,1\\}$: binary risk score decision.\n-   **SCM Equations (Data-Generating Process):**\n    -   $A \\sim \\operatorname{Bernoulli}(1/2)$.\n    -   $U \\sim \\operatorname{Bernoulli}(1/2)$.\n    -   $A$ and $U$ are statistically independent.\n    -   $M = A \\oplus U$, where $\\oplus$ is addition modulo $2$ (XOR).\n    -   $Y = M$.\n    -   $R = M$.\n-   **Core Definitions:**\n    -   **Equalized Odds (EO):** A predictor $R$ satisfies equalized odds with respect to a protected attribute $A$ and outcome $Y$ if $R \\perp A \\mid Y$, which is equivalent to $\\Pr(R=1 \\mid Y=y, A=0) = \\Pr(R=1 \\mid Y=y, A=1)$ for each $y \\in \\{0,1\\}$.\n    -   **Counterfactual Fairness (CF):** A predictor $R$ is counterfactually fair if for each individual with latent background variables held fixed, $R(A \\leftarrow a, \\text{background}) = R(A \\leftarrow a', \\text{background})$ for all $a,a' \\in \\{0,1\\}$.\n-   **Tasks:**\n    -   1. Determine if equalized odds holds by computing $\\Pr(R=1 \\mid Y=y, A=a)$ for all $y, a$.\n    -   2. Compute the Counterfactual Unfairness rate, defined as $\\operatorname{CFU} \\equiv \\Pr(R(A \\leftarrow 0, U) \\neq R(A \\leftarrow 1, U))$.\n-   **Final Answer Requirement:** The numerical value of $\\operatorname{CFU}$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is a well-defined mathematical exercise in the field of causal inference and algorithmic fairness.\n-   **Scientifically Grounded:** The concepts of Structural Causal Models, equalized odds, and counterfactual fairness are standard and formally defined within statistics, computer science, and related fields. The model is a stylized but legitimate mathematical construct. It does not violate any scientific or mathematical principles.\n-   **Well-Posed:** The data-generating process is fully specified. The probabilities are computable, and the questions asked have unique, derivable answers.\n-   **Objective:** The problem is stated in precise, formal mathematical language, free of subjective or ambiguous terms.\n-   **Conclusion:** The problem is complete, consistent, and logically sound. It is not ill-posed, trivial, or based on false premises.\n\n**Step 3: Verdict and Action**\nThe problem is deemed **valid**. A solution will be provided.\n\n### Solution\n\nThe solution proceeds by addressing the two tasks in order.\n\n**Task 1: Evaluation of Equalized Odds**\n\nThe criterion for equalized odds is $\\Pr(R=1 \\mid Y=y, A=0) = \\Pr(R=1 \\mid Y=y, A=1)$ for $y \\in \\{0,1\\}$. We must compute these conditional probabilities from the specified structural causal model.\n\nFrom the SCM, the structural equations for the outcome $Y$ and the decision $R$ are given as $Y = M$ and $R = M$, where $M = A \\oplus U$. An immediate consequence of these definitions is that $R = Y$. This means the predictor $R$ is perfectly accurate with respect to the true clinical state $Y$. We can now evaluate the conditional probabilities.\n\nFirst, consider the case where the true outcome is positive, $y=1$. We need to compare $\\Pr(R=1 \\mid Y=1, A=0)$ and $\\Pr(R=1 \\mid Y=1, A=1)$.\nSince $R=Y$, the expression $\\Pr(R=1 \\mid Y=1, A=a)$ simplifies to $\\Pr(Y=1 \\mid Y=1, A=a)$. By the definition of conditional probability, for any event $E$ with $\\Pr(E) > 0$, $\\Pr(E \\mid E) = 1$. Thus, $\\Pr(Y=1 \\mid Y=1, A=a) = 1$, provided the conditioning event $\\{Y=1, A=a\\}$ has a non-zero probability. Let's verify this.\nThe probability of $\\{Y=1, A=0\\}$ is:\n$$ \\Pr(Y=1, A=0) = \\Pr(M=1, A=0) = \\Pr(A \\oplus U = 1, A=0) $$\nGiven $A=0$, the condition $A \\oplus U = 1$ becomes $0 \\oplus U = 1$, which implies $U=1$. Since $A$ and $U$ are independent:\n$$ \\Pr(U=1, A=0) = \\Pr(U=1)\\Pr(A=0) = \\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right) = \\frac{1}{4} > 0 $$\nThe probability of $\\{Y=1, A=1\\}$ is:\n$$ \\Pr(Y=1, A=1) = \\Pr(M=1, A=1) = \\Pr(A \\oplus U = 1, A=1) $$\nGiven $A=1$, the condition $A \\oplus U = 1$ becomes $1 \\oplus U = 1$, which implies $U=0$.\n$$ \\Pr(U=0, A=1) = \\Pr(U=0)\\Pr(A=1) = \\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right) = \\frac{1}{4} > 0 $$\nSince both conditioning events have positive probability, the conditional probabilities are well-defined and equal to $1$.\n$$ \\Pr(R=1 \\mid Y=1, A=0) = 1 = \\Pr(R=1 \\mid Y=1, A=1) $$\nThis is the equality of true positive rates across groups.\n\nNext, consider the case where the true outcome is negative, $y=0$. We need to compare $\\Pr(R=1 \\mid Y=0, A=0)$ and $\\Pr(R=1 \\mid Y=0, A=1)$.\nSince $R=Y$, the expression $\\Pr(R=1 \\mid Y=0, A=a)$ is equivalent to $\\Pr(Y=1 \\mid Y=0, A=a)$. This is the probability of two mutually exclusive events, which is $0$, provided the conditioning event has non-zero probability. Let's verify this.\nThe probability of $\\{Y=0, A=0\\}$ requires $A \\oplus U = 0$ with $A=0$, which implies $U=0$.\n$$ \\Pr(Y=0, A=0) = \\Pr(U=0, A=0) = \\Pr(U=0)\\Pr(A=0) = \\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right) = \\frac{1}{4} > 0 $$\nThe probability of $\\{Y=0, A=1\\}$ requires $A \\oplus U = 0$ with $A=1$, which implies $U=1$.\n$$ \\Pr(Y=0, A=1) = \\Pr(U=1, A=1) = \\Pr(U=1)\\Pr(A=1) = \\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right) = \\frac{1}{4} > 0 $$\nBoth conditioning events have positive probability, so the conditional probabilities are well-defined and equal to $0$.\n$$ \\Pr(R=1 \\mid Y=0, A=0) = 0 = \\Pr(R=1 \\mid Y=0, A=1) $$\nThis is the equality of false positive rates across groups.\n\nSince the equalities hold for both $y=1$ and $y=0$, the predictor $R$ **satisfies equalized odds**.\n\n**Task 2: Computation of Counterfactual Unfairness (CFU)**\n\nThe Counterfactual Unfairness rate is defined as $\\operatorname{CFU} \\equiv \\Pr(R(A \\leftarrow 0, U) \\neq R(A \\leftarrow 1, U))$. The probability is over the distribution of the exogenous latent variable $U$.\n\nThe SCM specifies the decision $R$ as a function of $A$ and $U$: $R = M = A \\oplus U$.\nTo find the counterfactual quantities, we use the mechanism of intervention on the SCM.\nThe counterfactual $R(A \\leftarrow 0, U)$ is the value of $R$ that would have been observed had $A$ been set to $0$, for a given realization of $U$. We substitute $A=0$ into the structural equation for $R$:\n$$ R(A \\leftarrow 0, U) = 0 \\oplus U = U $$\nThe counterfactual $R(A \\leftarrow 1, U)$ is the value of $R$ that would have been observed had $A$ been set to $1$, for the same realization of $U$:\n$$ R(A \\leftarrow 1, U) = 1 \\oplus U $$\nFor a binary variable $U$, the expression $1 \\oplus U$ is equivalent to logical negation, or $1-U$.\n\nNow we substitute these expressions into the definition of $\\operatorname{CFU}$:\n$$ \\operatorname{CFU} = \\Pr\\big(U \\neq (1 \\oplus U)\\big) = \\Pr(U \\neq 1-U) $$\nWe evaluate the truth of the event $U \\neq 1-U$ for each possible value of the random variable $U$.\n-   Case 1: $U=0$. The inequality becomes $0 \\neq 1-0$, which simplifies to $0 \\neq 1$. This is a true statement.\n-   Case 2: $U=1$. The inequality becomes $1 \\neq 1-1$, which simplifies to $1 \\neq 0$. This is also a true statement.\n\nThe inequality $U \\neq 1-U$ holds for all possible outcomes of the random variable $U$. Therefore, the event $\\{R(A \\leftarrow 0, U) \\neq R(A \\leftarrow 1, U)\\}$ is a certain event. The probability of a certain event is $1$.\n$$ \\operatorname{CFU} = 1 $$\nThis result signifies that for every individual in the population (defined by their latent susceptibility $U$), changing their protected attribute $A$ from $0$ to $1$ (or vice-versa) will always change the decision $R$. The model is thus maximally unfair from a counterfactual perspective, despite satisfying the statistical fairness criterion of equalized odds.",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}
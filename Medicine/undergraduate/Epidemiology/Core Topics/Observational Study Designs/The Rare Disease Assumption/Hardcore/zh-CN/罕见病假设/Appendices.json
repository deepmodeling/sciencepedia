{
    "hands_on_practices": [
        {
            "introduction": "在病例对照研究中，比值比（$OR$）常被用作风险比（$RR$）的近似估计，但这依赖于“罕见病假设”。第一个练习将通过一个直接的动手计算来检验这一近似的极限。通过一个疾病并非极其罕见的场景，你将量化近似带来的误差，并对何时这一近似成立（或不成立）建立起直观的认识。",
            "id": "4645537",
            "problem": "考虑一项前瞻性队列研究，该研究旨在评估一种被怀疑会增加某种疾病风险的暴露因素。设非暴露组的累积发病率（风险）为 $p_0$，相对风险 (RR) 定义为 $\\text{RR} = p_1 / p_0$，其中 $p_1$ 是暴露组的风险。风险为 $p$ 的组的比值定义为 $p/(1-p)$，暴露组与非暴露组之间的比值比 (OR) 是暴露组的比值与非暴露组的比值之比。“罕见病假设”假定当 $p$ 很小时，比值 $p/(1-p)$ 可以很好地用 $p$ 来近似，这是一阶近似 $\\text{OR} \\approx \\text{RR}$ 的基础。\n\n仅使用这些基本定义，对于 $p_0 = 0.05$ 和 $\\text{RR} = 3$：\n\n- 根据比值和比值比的定义，计算精确的 $\\text{OR}$。\n- 将比值比的一阶罕见病近似值取为 $\\text{RR}$，并计算此近似值与精确值之间的相对误差，定义为\n$$\\text{relative error} = \\frac{|\\text{approx} - \\text{exact}|}{|\\text{exact}|}。$$\n- 将最终数值答案四舍五入至四位有效数字，并以小数形式表示（无单位）。\n- 根据您计算出的相对误差的大小，简要说明罕见病假设在这种情况下是否合理。\n\n不要使用任何关于 $\\text{OR}$ 和 $\\text{RR}$ 之间关系的预先推导的捷径；从所提供的定义中推导任何需要的表达式。",
            "solution": "该问题要求计算精确的比值比 ($\\text{OR}$)、罕见病近似 ($\\text{OR} \\approx \\text{RR}$) 的相对误差，并判断在给定条件下该近似是否合理。\n\n提供的定义和数值如下：\n- 非暴露组的累积发病率（风险）：$p_0 = 0.05$。\n- 相对风险：$\\text{RR} = 3$。\n- 相对风险的定义：$\\text{RR} = \\frac{p_1}{p_0}$，其中 $p_1$ 是暴露组的风险。\n- 风险为 $p$ 的组的比值：$\\frac{p}{1-p}$。\n- 比值比：$\\text{OR} = \\frac{\\text{odds}_{\\text{exposed}}}{\\text{odds}_{\\text{unexposed}}}$。\n\n首先，我们使用相对风险的定义来确定暴露组的风险 $p_1$：\n$$p_1 = \\text{RR} \\times p_0$$\n代入给定值：\n$$p_1 = 3 \\times 0.05 = 0.15$$\n\n接下来，我们使用比值的定义 $\\frac{p}{1-p}$ 来计算非暴露组和暴露组的比值。\n\n对于非暴露组，比值为：\n$$\\text{odds}_0 = \\frac{p_0}{1-p_0} = \\frac{0.05}{1-0.05} = \\frac{0.05}{0.95}$$\n\n对于暴露组，比值为：\n$$\\text{odds}_1 = \\frac{p_1}{1-p_1} = \\frac{0.15}{1-0.15} = \\frac{0.15}{0.85}$$\n\n现在，我们计算精确的比值比 $\\text{OR}$，即这些比值的比率：\n$$\\text{OR}_{\\text{exact}} = \\frac{\\text{odds}_1}{\\text{odds}_0} = \\frac{0.15/0.85}{0.05/0.95}$$\n重新整理表达式以求解：\n$$\\text{OR}_{\\text{exact}} = \\frac{0.15}{0.85} \\times \\frac{0.95}{0.05} = \\frac{0.1425}{0.0425}$$\n这可以通过消除小数来简化：\n$$\\text{OR}_{\\text{exact}} = \\frac{1425}{425} = \\frac{57 \\times 25}{17 \\times 25} = \\frac{57}{17}$$\n\n问题陈述，比值比的一阶罕见病近似就是相对风险本身。因此：\n$$\\text{OR}_{\\text{approx}} = \\text{RR} = 3$$\n\n我们被要求使用以下公式计算此近似值与精确值之间的相对误差：\n$$\\text{relative error} = \\frac{|\\text{approx} - \\text{exact}|}{|\\text{exact}|}$$\n代入 $\\text{OR}_{\\text{approx}}$ 和 $\\text{OR}_{\\text{exact}}$ 的值：\n$$\\text{relative error} = \\frac{|3 - \\frac{57}{17}|}{|\\frac{57}{17}|}$$\n为了计算分子，我们找到一个共同的分母：\n$$3 - \\frac{57}{17} = \\frac{3 \\times 17}{17} - \\frac{57}{17} = \\frac{51 - 57}{17} = -\\frac{6}{17}$$\n现在，我们将此结果代回相对误差公式：\n$$\\text{relative error} = \\frac{|-\\frac{6}{17}|}{\\frac{57}{17}} = \\frac{\\frac{6}{17}}{\\frac{57}{17}} = \\frac{6}{57}$$\n简化分数：\n$$\\text{relative error} = \\frac{6 \\div 3}{57 \\div 3} = \\frac{2}{19}$$\n要将其表示为四舍五入到四位有效数字的小数：\n$$\\frac{2}{19} \\approx 0.10526315...$$\n四舍五入到四位有效数字得到 $0.1053$。\n\n最后，我们必须评估罕见病假设是否合理。相对误差为 $0.1053$ 相当于 $10.53\\%$ 的误差。这是一个显著的差异。该近似值 ($\\text{RR}=3$) 比真实的比值比 ($\\text{OR} = \\frac{57}{17} \\approx 3.353$) 低估了超过 $10\\%$。其根本原因是基线风险 $p_0=0.05$ 不够小，不足以很好地满足“罕见病”条件 ($p \\ll 1$)，特别是当与一个强效应 ($\\text{RR}=3$) 结合时，该效应将暴露组的风险提高到 $p_1=0.15$。在许多科学和临床背景下，这种量级的潜在误差是不可接受的。因此，在这种情况下，罕见病假设是不合理的。",
            "answer": "$$\\boxed{0.1053}$$"
        },
        {
            "introduction": "在我们初步计算的基础上，这个练习将对“罕见病假设”进行更系统的分析。你将首先推导风险比（$RR$）、比值比（$OR$）与基线疾病风险（$p_0$）之间的精确数学关系，然后利用该公式探究当疾病变得越来越常见时，$RR$ 和 $OR$ 之间的偏差是如何变化的。这个练习不仅让你理解近似可能失效，更让你精确地掌握它是*如何*失效的。",
            "id": "4645560",
            "problem": "一项病例对照研究估计，某二元暴露与一种罕见病之间的关联的比值比 (OR) 为 $\\text{OR}=2.5$。一个外部队列提供了非暴露组的基线风险 $\\{p_0\\}=\\{0.01,\\,0.05,\\,0.10,\\,0.20\\}$。仅从风险、比值、比值比和风险比的核心定义以及标准代数出发，执行以下操作：\n\n1. 令 $p_0=\\Pr(D=1\\mid E=0)$ 且 $p_1=\\Pr(D=1\\mid E=1)$。使用比值、比值比和风险比的定义，将精确的风险比 $\\text{RR}$ 表示为 $\\text{OR}$ 和 $p_0$ 的函数，而不引入这些定义之外的任何额外假设。然后，对于 $\\text{OR}=2.5$ 和 $\\{0.01,\\,0.05,\\,0.10,\\,0.20\\}$ 中的每一个 $p_0$ 值，计算 $\\text{RR}$。\n\n2. 将罕见病近似 $\\text{RR}\\approx \\text{OR}$ 的偏差定义为绝对相对偏差 $\\delta(p_0)=\\left|\\text{RR}-\\text{OR}\\right|/\\text{OR}$。为 $\\{0.01,\\,0.05,\\,0.10,\\,0.20\\}$ 中的每一个 $p_0$ 值计算 $\\delta(p_0)$。\n\n作为最终答案，报告按 $p_0=0.01,\\,0.05,\\,0.10,\\,0.20$ 排序的 $\\delta(p_0)$ 值的行向量。将每个条目表示为小数，并将答案四舍五入到 $4$ 位有效数字。",
            "solution": "严格遵循所提供的定义来展开解答。\n\n**1. 以比值比 ($\\text{OR}$) 和基线风险 ($p_0$) 推导风险比 ($\\text{RR}$)**\n\n首先，我们陈述核心定义：\n- 非暴露组的风险：$p_0 = \\Pr(D=1 \\mid E=0)$。\n- 暴露组的风险：$p_1 = \\Pr(D=1 \\mid E=1)$。\n\n各组中的疾病比值是患病概率与不患病概率之比。\n- 非暴露组的比值：$\\text{odds}_0 = \\frac{\\Pr(D=1 \\mid E=0)}{\\Pr(D=0 \\mid E=0)} = \\frac{p_0}{1 - p_0}$。\n- 暴露组的比值：$\\text{odds}_1 = \\frac{\\Pr(D=1 \\mid E=1)}{\\Pr(D=0 \\mid E=1)} = \\frac{p_1}{1 - p_1}$。\n\n比值比 ($\\text{OR}$) 是暴露组比值与非暴露组比值之比：\n$$ \\text{OR} = \\frac{\\text{odds}_1}{\\text{odds}_0} = \\frac{p_1 / (1 - p_1)}{p_0 / (1 - p_0)} $$\n风险比 ($\\text{RR}$) 是暴露组风险与非暴露组风险之比：\n$$ \\text{RR} = \\frac{p_1}{p_0} $$\n我们的目标是将 $\\text{RR}$ 表示为 $\\text{OR}$ 和 $p_0$ 的函数。为此，我们必须消去 $p_1$。根据 $\\text{RR}$ 的定义，我们可以写出 $p_1 = \\text{RR} \\cdot p_0$。我们将此代入 $\\text{OR}$ 的方程中：\n$$ \\text{OR} = \\frac{(\\text{RR} \\cdot p_0) / (1 - \\text{RR} \\cdot p_0)}{p_0 / (1 - p_0)} $$\n现在，我们进行代数运算来求解 $\\text{RR}$。\n$$ \\text{OR} = \\frac{\\text{RR} \\cdot p_0}{1 - \\text{RR} \\cdot p_0} \\cdot \\frac{1 - p_0}{p_0} $$\n假设 $p_0 \\neq 0$，则 $p_0$ 项被消去：\n$$ \\text{OR} = \\text{RR} \\cdot \\frac{1 - p_0}{1 - \\text{RR} \\cdot p_0} $$\n两边同乘以 $(1 - \\text{RR} \\cdot p_0)$：\n$$ \\text{OR} \\cdot (1 - \\text{RR} \\cdot p_0) = \\text{RR} \\cdot (1 - p_0) $$\n展开各项：\n$$ \\text{OR} - \\text{OR} \\cdot \\text{RR} \\cdot p_0 = \\text{RR} - \\text{RR} \\cdot p_0 $$\n将所有包含 $\\text{RR}$ 的项归到等式的一边：\n$$ \\text{OR} = \\text{RR} - \\text{RR} \\cdot p_0 + \\text{OR} \\cdot \\text{RR} \\cdot p_0 $$\n提出公因子 $\\text{RR}$：\n$$ \\text{OR} = \\text{RR} \\cdot (1 - p_0 + \\text{OR} \\cdot p_0) $$\n$$ \\text{OR} = \\text{RR} \\cdot (1 + p_0(\\text{OR} - 1)) $$\n最后，分离出 $\\text{RR}$ 得到精确关系式：\n$$ \\text{RR} = \\frac{\\text{OR}}{1 + p_0(\\text{OR} - 1)} $$\n这就完成了任务 1 的第一部分。现在，我们对 $\\text{OR} = 2.5$ 和给定的 $p_0$ 值计算 $\\text{RR}$。表达式变为：\n$$ \\text{RR} = \\frac{2.5}{1 + 1.5 p_0} $$\n对于每个 $p_0$：\n- 如果 $p_0 = 0.01$：$\\text{RR} = \\frac{2.5}{1 + 1.5(0.01)} = \\frac{2.5}{1.015} \\approx 2.46305$\n- 如果 $p_0 = 0.05$：$\\text{RR} = \\frac{2.5}{1 + 1.5(0.05)} = \\frac{2.5}{1.075} \\approx 2.32558$\n- 如果 $p_0 = 0.10$：$\\text{RR} = \\frac{2.5}{1 + 1.5(0.10)} = \\frac{2.5}{1.15} \\approx 2.17391$\n- 如果 $p_0 = 0.20$：$\\text{RR} = \\frac{2.5}{1 + 1.5(0.20)} = \\frac{2.5}{1.30} \\approx 1.92308$\n\n**2. 计算绝对相对偏差 $\\delta(p_0)$**\n\n偏差定义为 $\\delta(p_0) = \\frac{|\\text{RR} - \\text{OR}|}{\\text{OR}}$。\n我们可以将 $\\text{RR}$ 的表达式代入此定义。由于我们有 $\\text{OR} = 2.5 > 1$ 且 $p_0 \\ge 0$，分母 $1 + p_0(\\text{OR} - 1) \\ge 1$。这意味着 $\\text{RR} \\le \\text{OR}$，所以绝对值 $|\\text{RR} - \\text{OR}|$ 可以简化为 $\\text{OR} - \\text{RR}$。\n$$ \\delta(p_0) = \\frac{\\text{OR} - \\text{RR}}{\\text{OR}} = 1 - \\frac{\\text{RR}}{\\text{OR}} $$\n代入 $\\text{RR}$ 的表达式：\n$$ \\delta(p_0) = 1 - \\frac{1}{\\text{OR}} \\left( \\frac{\\text{OR}}{1 + p_0(\\text{OR} - 1)} \\right) = 1 - \\frac{1}{1 + p_0(\\text{OR} - 1)} $$\n通过通分简化此表达式：\n$$ \\delta(p_0) = \\frac{1 + p_0(\\text{OR} - 1) - 1}{1 + p_0(\\text{OR} - 1)} = \\frac{p_0(\\text{OR} - 1)}{1 + p_0(\\text{OR} - 1)} $$\n这个简化的公式表明，偏差随着 $p_0$ 的增加而增加，这与罕见病假设的原理是一致的。\n\n现在，我们对 $\\text{OR} = 2.5$ 和给定的 $p_0$ 值计算 $\\delta(p_0)$：\n$$ \\delta(p_0) = \\frac{p_0(2.5 - 1)}{1 + p_0(2.5 - 1)} = \\frac{1.5 p_0}{1 + 1.5 p_0} $$\n- 对于 $p_0 = 0.01$：\n  $\\delta(0.01) = \\frac{1.5(0.01)}{1 + 1.5(0.01)} = \\frac{0.015}{1.015} \\approx 0.014778325$\n- 对于 $p_0 = 0.05$：\n  $\\delta(0.05) = \\frac{1.5(0.05)}{1 + 1.5(0.05)} = \\frac{0.075}{1.075} \\approx 0.069767442$\n- 对于 $p_0 = 0.10$：\n  $\\delta(0.10) = \\frac{1.5(0.10)}{1 + 1.5(0.10)} = \\frac{0.15}{1.15} \\approx 0.130434783$\n- 对于 $p_0 = 0.20$：\n  $\\delta(0.20) = \\frac{1.5(0.20)}{1 + 1.5(0.20)} = \\frac{0.30}{1.30} \\approx 0.230769231$\n\n最后，我们按照最终答案的要求，将这些结果四舍五入到 $4$ 位有效数字。\n- $\\delta(0.01) \\approx 0.01478$\n- $\\delta(0.05) \\approx 0.06977$\n- $\\delta(0.10) \\approx 0.1304$\n- $\\delta(0.20) \\approx 0.2308$\n\n将这些值格式化为行向量作为最终答案。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.01478 & 0.06977 & 0.1304 & 0.2308\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "“罕见病假设”的影响不仅限于简单的患病率，还延伸到具有时间维度的研究，如队列研究。这个高级练习将探讨在固定随访期内，瞬时风险比（$HR$）、累积风险比（$RR$）和累积比值比（$OR$）之间的关系。你将看到，即使 $HR$ 恒定，较长的随访时间也可能导致较高的累积发病率，从而使得 $OR$ 成为 $RR$ 的一个糟糕的替代指标。",
            "id": "4645531",
            "problem": "考虑一项比较两个组的队列研究：一个暴露组和一个非暴露组。假设每组的事件发生时间遵循具有比例风险的恒定风险率模型，因此暴露组的风险率是非暴露组风险率的一个恒定倍数。设非暴露组的风险率为 $h_{U}(t) = \\lambda$，暴露组的风险率为 $h_{E}(t) = c \\lambda$，其中 $c$ 是恒定的风险比。该队列被随访一个固定的时间 $T$，仅在 $T$ 时刻发生非信息性删失，且无竞争风险。\n\n仅使用基本定义，按以下步骤进行：\n- 从风险函数 $h(t)$ 的定义及其与生存函数 $S(t)$ 的关系出发，推导出恒定风险率下的生存函数。\n- 使用此结果推导每组在时间 $T$ 时的累积发生率（风险）。\n- 严格定义风险比 (HR)、相对风险 (RR) 和优势比 (OR)，并计算在时间 $T$ 时的 RR 和 OR。\n\n构建一个风险比 (HR) 恒定但到时间 $T$ 时的累积发生率不罕见的情景：取 $\\lambda = 0.1$ 每年，$c = 2$，$T = 5$ 年。在此情景下，计算在时间 $T$ 时的比值 $\\dfrac{\\text{OR}}{\\text{RR}}$。将最终答案四舍五入到四位有效数字。将最终值表示为无单位的纯数。",
            "solution": "问题陈述经验证有效。它在科学上基于生存分析和流行病学的原理，提法得当，有足够的信息得到唯一解，并且陈述客观。该问题要求在恒定风险率模型下，严格推导不同关联度量（风险比、相对风险、优势比）之间的关系，这是一个标准且重要的话题。\n\n我们首先按照要求的结构化推导进行。\n\n首先，我们从风险函数 $h(t)$ 推导生存函数 $S(t)$。风险函数定义为在存活至时间 $t$ 的条件下，在时间 $t$ 的瞬时失效率。数学上，\n$$h(t) = \\lim_{\\Delta t \\to 0} \\frac{P(t \\le T_{event} < t+\\Delta t | T_{event} \\ge t)}{\\Delta t}$$\n其中 $T_{event}$ 是事件发生的时间。风险函数通过关系式 $h(t) = \\frac{f(t)}{S(t)}$ 与概率密度函数 $f(t)$ 和生存函数 $S(t) = P(T_{event} > t)$ 相关。由于 $f(t) = -\\frac{dS(t)}{dt}$，我们可以写出：\n$$h(t) = -\\frac{1}{S(t)}\\frac{dS(t)}{dt} = -\\frac{d}{dt}\\ln(S(t))$$\n为了求出给定风险率下的生存函数，我们将此表达式从 $0$ 积分到 $t$：\n$$\\int_0^t h(u) \\, du = -\\int_0^t \\frac{d}{du}\\ln(S(u)) \\, du = -[\\ln(S(u))]_0^t = -(\\ln(S(t)) - \\ln(S(0)))$$\n根据定义，存活超过时间 $0$ 的概率为 $1$，因此 $S(0) = 1$ 且 $\\ln(S(0)) = 0$。这可以简化为：\n$$\\int_0^t h(u) \\, du = -\\ln(S(t))$$\n因此，生存函数由下式给出：\n$$S(t) = \\exp\\left(-\\int_0^t h(u) \\, du\\right)$$\n对于恒定风险率模型，其中 $h(t) = \\lambda$，积分为 $\\int_0^t \\lambda \\, du = \\lambda t$。因此，生存函数为：\n$$S(t) = \\exp(-\\lambda t)$$\n\n接下来，我们推导到时间 $T$ 时的累积发生率（风险）。风险 $R(T)$ 是事件在时间 $T$ 前发生的概率，它与存活超过时间 $T$ 的概率互补。\n$$R(T) = P(T_{event} \\le T) = 1 - S(T)$$\n对于风险率为 $h_U(t) = \\lambda$ 的非暴露组，其生存函数为 $S_U(T) = \\exp(-\\lambda T)$。风险为：\n$$R_U = 1 - S_U(T) = 1 - \\exp(-\\lambda T)$$\n对于风险率为 $h_E(t) = c\\lambda$ 的暴露组，其生存函数为 $S_E(T) = \\exp(-c\\lambda T)$。风险为：\n$$R_E = 1 - S_E(T) = 1 - \\exp(-c\\lambda T)$$\n使用给定参数 $\\lambda = 0.1$，$c = 2$ 和 $T = 5$，风险分别为 $R_U = 1 - \\exp(-0.1 \\times 5) = 1 - \\exp(-0.5) \\approx 0.3935$ 和 $R_E = 1 - \\exp(-2 \\times 0.1 \\times 5) = 1 - \\exp(-1) \\approx 0.6321$。这些值不小，证实了“非罕见”累积发生率的情景。\n\n现在，我们定义在时间 $T$ 时的关联度量。\n风险比 ($HR$) 是风险函数的比值：\n$$HR = \\frac{h_E(t)}{h_U(t)} = \\frac{c\\lambda}{\\lambda} = c$$\n相对风险 ($RR$) 是累积发生率（风险）的比值：\n$$RR = \\frac{R_E}{R_U} = \\frac{1 - \\exp(-c\\lambda T)}{1 - \\exp(-\\lambda T)}$$\n优势比 ($OR$) 是两组中事件优势的比值。概率为 $p$ 的事件的优势是 $\\frac{p}{1-p}$。\n$$OR = \\frac{\\text{Odds}_E}{\\text{Odds}_U} = \\frac{R_E / (1-R_E)}{R_U / (1-R_U)}$$\n由于 $1-R_E = S_E(T)$ 且 $1-R_U = S_U(T)$，我们可以写出：\n$$OR = \\frac{R_E \\cdot (1-R_U)}{R_U \\cdot (1-R_E)} = \\frac{R_E \\cdot S_U(T)}{R_U \\cdot S_E(T)}$$\n\n最后一步是计算比值 $\\frac{\\text{OR}}{\\text{RR}}$。\n$$\\frac{\\text{OR}}{\\text{RR}} = \\frac{R_E \\cdot S_U(T) / (R_U \\cdot S_E(T))}{R_E / R_U} = \\frac{R_E \\cdot S_U(T)}{R_U \\cdot S_E(T)} \\cdot \\frac{R_U}{R_E} = \\frac{S_U(T)}{S_E(T)}$$\n这给出了三种关联度量之间的一个简单而优美的关系：$OR = RR \\cdot \\frac{S_U(T)}{S_E(T)}$。\n代入生存函数的表达式：\n$$\\frac{\\text{OR}}{\\text{RR}} = \\frac{\\exp(-\\lambda T)}{\\exp(-c\\lambda T)} = \\exp(-\\lambda T - (-c\\lambda T)) = \\exp(c\\lambda T - \\lambda T) = \\exp((c-1)\\lambda T)$$\n这个最终表达式将优势比和相对风险之间的差异直接与风险比 ($c$) 和累积基线风险 ($\\lambda T$) 联系起来。\n\n我们现在计算给定情景下的数值：$\\lambda = 0.1 \\, \\text{年}^{-1}$，$c=2$，$T=5 \\, \\text{年}$。\n$$\\frac{\\text{OR}}{\\text{RR}} = \\exp((2-1) \\times 0.1 \\times 5) = \\exp(1 \\times 0.5) = \\exp(0.5)$$\n$\\exp(0.5)$ 的值约为 $1.64872127...$。\n四舍五入到四位有效数字，我们得到 $1.649$。",
            "answer": "$$\\boxed{1.649}$$"
        }
    ]
}
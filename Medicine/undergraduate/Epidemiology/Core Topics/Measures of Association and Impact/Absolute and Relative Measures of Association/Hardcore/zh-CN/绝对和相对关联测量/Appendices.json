{
    "hands_on_practices": [
        {
            "introduction": "掌握流行病学中的关联性测量，首先要从计算基本指标开始。风险比（RR）是衡量暴露与结局之间关联强度的核心相对指标。本练习将指导您完成一个基本但至关重要的任务：基于队列研究数据，计算风险比的点估计值及其置信区间，您将学习到为何在计算置信区间时需要使用对数转换，这对于正确理解和报告关联强度至关重要。",
            "id": "4569995",
            "problem": "一项队列研究对两组实验室工作人员进行了为期 $1$ 年的跟踪，以评估新发的刺激性接触性皮炎。在溶剂暴露组中，$n_{1} = 6400$ 名工人中有 $a = 128$ 例新发病例。在未暴露组中，$n_{0} = 4800$ 名工人中有 $c = 60$ 例新发病例。\n\n仅使用基本定义和大样本推理，完成以下任务：\n1. 从第一性原理出发，定义各组的风险和风险比（RR），然后首先在自然对数尺度上进行计算，再转换回原始乘法尺度，从而构建风险比的近似 $95\\%$ 置信区间（CI）。\n2. 利用您所构建的区间的结构，解释为什么自然对数（ln）尺度在映射回原始尺度时，对于乘法效应会产生对称的不确定性。\n\n数值计算点估计值和 $95\\%$ 置信区间。将风险比和每个置信限四舍五入至四位有效数字。最终数值结果不使用百分号表示。您的最终答案必须依次呈现风险比、置信下限和置信上限。",
            "solution": "所述问题具有科学依据，提法明确，客观，并包含得出唯一且有意义解所需的所有信息。这是流行病学和生物统计学入门中的一个标准问题。因此，有必要提供完整的解答。\n\n### 第1部分：第一性原理、定义和置信区间构建\n\n从第一性原理出发，**风险**定义为在指定时间段内，在期初处于风险中的人群中发生新事件（例如，疾病发作）的概率。\n\n设 $R_1$ 为暴露组（溶剂暴露工人）的风险，$R_0$ 为未暴露组的风险。这些风险的点估计值，记为 $\\hat{R}_1$ 和 $\\hat{R}_0$，由样本数据计算得出：\n-   $a = 128$ 是暴露组中的新发病例数。\n-   $n_1 = 6400$ 是暴露组的总人数。\n-   $c = 60$ 是未暴露组中的新发病例数。\n-   $n_0 = 4800$ 是未暴露组的总人数。\n\n暴露组的估计风险为：\n$$ \\hat{R}_1 = \\frac{a}{n_1} $$\n未暴露组的估计风险为：\n$$ \\hat{R}_0 = \\frac{c}{n_0} $$\n**风险比（RR）**是一种相对关联度量，用于比较暴露组与未暴露组的风险。其定义为：\n$$ RR = \\frac{R_1}{R_0} $$\n风险比的点估计值 $\\widehat{RR}$ 使用风险的样本估计值计算：\n$$ \\widehat{RR} = \\frac{\\hat{R}_1}{\\hat{R}_0} = \\frac{a/n_1}{c/n_0} $$\n对于大样本，$\\widehat{RR}$ 的抽样分布是偏态的。然而，风险比的自然对数 $\\ln(\\widehat{RR})$ 的抽样分布近似于正态分布。因此，我们在对数尺度上构建置信区间，然后通过取幂将置信限转换回原始尺度。\n\n$\\ln(\\widehat{RR})$ 的方差是使用德尔塔方法从单个风险估计的方差推导出来的。对于队列研究，$\\ln(\\widehat{RR})$ 的估计方差由下式给出：\n$$ \\widehat{\\text{Var}}(\\ln(\\widehat{RR})) = \\frac{1-\\hat{R}_1}{a} + \\frac{1-\\hat{R}_0}{c} = \\frac{1 - a/n_1}{a} + \\frac{1-c/n_0}{c} $$\n这可以重写为：\n$$ \\widehat{\\text{Var}}(\\ln(\\widehat{RR})) = \\frac{1}{a} - \\frac{1}{n_1} + \\frac{1}{c} - \\frac{1}{n_0} $$\n标准误 $\\widehat{SE}(\\ln(\\widehat{RR}))$ 是方差的平方根：\n$$ \\widehat{SE}(\\ln(\\widehat{RR})) = \\sqrt{\\frac{1}{a} - \\frac{1}{n_1} + \\frac{1}{c} - \\frac{1}{n_0}} $$\n一个用于 $\\ln(RR)$ 的 $(1-\\alpha) \\times 100\\%$ 置信区间（CI）构建如下：\n$$ \\ln(\\widehat{RR}) \\pm Z_{1-\\alpha/2} \\times \\widehat{SE}(\\ln(\\widehat{RR})) $$\n对于 $95\\%$ 的置信区间，$\\alpha=0.05$，来自标准正态分布的临界值为 $Z_{1-0.05/2} = Z_{0.975} \\approx 1.96$。\n\n$\\ln(RR)$ 的 $95\\%$ 置信区间的限值为：\n-   对数尺度下限：$L_{\\ln} = \\ln(\\widehat{RR}) - 1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR}))$\n-   对数尺度上限：$U_{\\ln} = \\ln(\\widehat{RR}) + 1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR}))$\n\n为了获得风险比 $RR$ 的 $95\\%$ 置信区间，我们对这些限值取幂：\n-   置信下限 (LCL): $LCL = \\exp(L_{\\ln}) = \\exp\\left( \\ln(\\widehat{RR}) - 1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR})) \\right) = \\widehat{RR} \\times \\exp\\left( -1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR})) \\right)$\n-   置信上限 (UCL): $UCL = \\exp(U_{\\ln}) = \\exp\\left( \\ln(\\widehat{RR}) + 1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR})) \\right) = \\widehat{RR} \\times \\exp\\left( 1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR})) \\right)$\n\n### 第2部分：对数尺度转换与对称性解释\n\n对于像 RR 这样的比值度量，使用自然对数尺度构建置信区间至关重要。在对数尺度上，置信区间 $[\\ln(\\widehat{RR}) - E, \\ln(\\widehat{RR}) + E]$（其中 $E = 1.96 \\times \\widehat{SE}(\\ln(\\widehat{RR}))$）在构建上是对称的。误差范围 $E$ 是从点估计值 $\\ln(\\widehat{RR})$ 加上和减去的。\n\n当我们通过取幂将此区间转换回原始风险比尺度时，限值变为 $[\\exp(\\ln(\\widehat{RR}) - E), \\exp(\\ln(\\widehat{RR}) + E)]$。利用指数函数的性质，该区间为 $[\\widehat{RR} \\cdot e^{-E}, \\widehat{RR} \\cdot e^{E}]$，可以写成 $[\\widehat{RR} / e^E, \\widehat{RR} \\cdot e^E]$。\n\n在原始尺度上，该区间围绕 $\\widehat{RR}$ 并非算术对称。点估计值到上限的距离是 $\\widehat{RR} \\cdot e^E - \\widehat{RR} = \\widehat{RR}(e^E - 1)$，而点估计值到下限的距离是 $\\widehat{RR} - \\widehat{RR} \\cdot e^{-E} = \\widehat{RR}(1 - e^{-E})$。因为对于任何 $E > 0$，$e^E - 1 \\neq 1 - e^{-E}$，所以该区间是算术不对称的。\n\n然而，该区间在乘法（或比率）尺度上是对称的。上限是通过将点估计值乘以一个因子 $e^E$ 得到的，而下限是通过将点估计值除以相同的因子 $e^E$ 得到的。即：\n$$ \\frac{UCL}{\\widehat{RR}} = e^E \\quad \\text{and} \\quad \\frac{\\widehat{RR}}{LCL} = e^E $$\n这种乘法对称性在概念上适用于比值度量，因为它意味着不确定性与估计值的大小成正比。此外，这种结构确保了风险比（必须为非负值）的置信区间永远不会包含负值。点估计值 $\\widehat{RR}$ 是置信限的几何平均数，即 $\\widehat{RR} = \\sqrt{LCL \\times UCL}$，而不是算术平均数。\n\n### 数值计算\n\n给定数据：$a=128$, $n_1=6400$, $c=60$, $n_0=4800$。\n\n1.  **计算风险估计值：**\n    $$ \\hat{R}_1 = \\frac{128}{6400} = 0.02 $$\n    $$ \\hat{R}_0 = \\frac{60}{4800} = 0.0125 $$\n\n2.  **计算RR的点估计值：**\n    $$ \\widehat{RR} = \\frac{0.02}{0.0125} = 1.6 $$\n\n3.  **计算$\\ln(\\widehat{RR})$的标准误：**\n    $$ \\widehat{SE}(\\ln(\\widehat{RR})) = \\sqrt{\\frac{1}{128} - \\frac{1}{6400} + \\frac{1}{60} - \\frac{1}{4800}} $$\n    $$ \\widehat{SE}(\\ln(\\widehat{RR})) = \\sqrt{0.0078125 - 0.00015625 + 0.0166666\\overline{6} - 0.0002083\\overline{3}} $$\n    $$ \\widehat{SE}(\\ln(\\widehat{RR})) = \\sqrt{0.00765625 + 0.0164583\\overline{3}} $$\n    $$ \\widehat{SE}(\\ln(\\widehat{RR})) = \\sqrt{0.02411458\\overline{3}} \\approx 0.155288706 $$\n\n4.  **在对数尺度上构建95%置信区间：**\n    $$ \\ln(\\widehat{RR}) = \\ln(1.6) \\approx 0.470003629 $$\n    误差范围 $E = 1.96 \\times 0.155288706 \\approx 0.304365864$。\n    $$ L_{\\ln} = 0.470003629 - 0.304365864 = 0.165637765 $$\n    $$ U_{\\ln} = 0.470003629 + 0.304365864 = 0.774369493 $$\n\n5.  **将置信区间转换回原始尺度：**\n    $$ LCL = \\exp(0.165637765) \\approx 1.180145 $$\n    $$ UCL = \\exp(0.774369493) \\approx 2.169190 $$\n\n6.  **四舍五入至四位有效数字：**\n    -   风险比 ($\\widehat{RR}$): $1.600$\n    -   置信下限 (LCL): $1.180$\n    -   置信上限 (UCL): $2.169$\n\n最终结果为风险比 $1.600$，$95\\%$ 置信区间为 ($1.180$, $2.169$)。由于该区间不包含零假设值 $1.0$，因此在 $\\alpha=0.05$ 的水平上，观察到的关联具有统计学意义。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1.600  1.180  2.169\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在掌握了基本计算之后，我们需要培养批判性思维，以识别和解释数据中可能出现的悖论。有时，直接汇总数据得出的结论可能与在不同亚组中观察到的趋势完全相反，这种现象被称为“辛普森悖论”。本练习提供了一个典型案例，旨在训练您识别这种关联方向的逆转，并深入探讨其背后的根本原因——混杂，而非关联指标的数学特性（即不可折叠性）。",
            "id": "4570002",
            "problem": "一项队列研究调查了在二元基线风险因素 $S$ 的两个分层中，暴露 $E$ 是否会降低不良结局 $Y$ 的风险（可解释为高基线风险的转诊医院 $S=H$ 与低基线风险的社区诊所 $S=L$ 这样的情境）。该研究报告了以下计数（病例为结局 $Y=1$ 的个体）：\n\n- 分层 $S=H$：\n  - 暴露组 ($E=1$)：$n=900$，病例 $=180$，非病例 $=720$。\n  - 非暴露组 ($E=0$)：$n=100$，病例 $=40$，非病例 $=60$。\n- 分层 $S=L$：\n  - 暴露组 ($E=1$)：$n=100$，病例 $=5$，非病例 $=95$。\n  - 非暴露组 ($E=0$)：$n=900$，病例 $=90$，非病例 $=810$。\n\n仅使用核心定义，计算每个分层内的分层特定风险比（risk ratio (RR)）以及合并分层后的边际（粗略）风险比。然后确定关联是否存在逆转，并判断该现象更应归因于 $S$ 的混杂效应还是风险比的不可合并性。\n\n哪个选项最能描述这种数值模式及其正确解释？\n\nA. 各分层特定的 $RR$ 均为 $0.50$，而粗略 $RR$ 约为 $1.42$；这是由 $S$ 的混杂效应驱动的辛普森悖论，而非不可合并性所致。\n\nB. 各分层特定的 $RR$ 均为 $0.50$，而粗略 $RR$ 约为 $1.42$；发生这种情况是因为风险比是不可合并的。\n\nC. 分层特定和粗略的 $RR$ 均相等（约 $0.50$）；不存在辛普森悖论和混杂效应。\n\nD. 两个分层中的分层特定 $RR$ 均超过 $1$，但粗略 $RR$ 小于 $1$；这种逆转是由 $S$ 的混杂效应引起的。\n\nE. 风险比不可能发生方向逆转；这种逆转只发生在优势比上，因此所描述的模式对于风险比是不可能的。",
            "solution": "用户希望我验证问题陈述，如果有效，则解决问题并评估给定的选项。\n\n### 步骤1：提取已知信息\n问题提供了一项队列研究的数据，该研究调查暴露 $E$ 和结局 $Y$ 之间的关系，并按基线风险因素 $S$ 进行分层：\n\n- **分层 $S=H$（高风险）：**\n  - 暴露组 ($E=1$)：总受试者 $n_{1H}=900$，病例 ($Y=1$) $a_H=180$，非病例 ($Y=0$) $b_H=720$。\n  - 非暴露组 ($E=0$)：总受试者 $n_{0H}=100$，病例 ($Y=1$) $c_H=40$，非病例 ($Y=0$) $d_H=60$。\n\n- **分层 $S=L$（低风险）：**\n  - 暴露组 ($E=1$)：总受试者 $n_{1L}=100$，病例 ($Y=1$) $a_L=5$，非病例 ($Y=0$) $b_L=95$。\n  - 非暴露组 ($E=0$)：总受试者 $n_{0L}=900$，病例 ($Y=1$) $c_L=90$，非病例 ($Y=0$) $d_L=810$。\n\n任务是计算分层特定和粗略的风险比（RRs），识别任何关联逆转（辛普森悖论），并将该现象归因于混杂效应或不可合并性。\n\n### 步骤2：使用提取的已知信息进行验证\n1.  **科学或事实不健全性：** 该问题使用了标准的流行病学概念：队列研究、风险、风险比、分层、混杂和辛普森悖论。这个设置是用于说明这些原则的经典教科书示例。没有科学或事实上的错误。\n2.  **不可形式化或不相关：** 该问题是流行病学中的一个可量化、可形式化的练习，直接关系到关联的绝对和相对测量。\n3.  **不完整或矛盾的设置：** 提供的数据是完整的且内部一致。\n    - 对于分层 $S=H$，暴露组：$180 + 720 = 900$。这与总数 $n_{1H}=900$ 相符。\n    - 对于分层 $S=H$，非暴露组：$40 + 60 = 100$。这与总数 $n_{0H}=100$ 相符。\n    - 对于分层 $S=L$，暴露组：$5 + 95 = 100$。这与总数 $n_{1L}=100$ 相符。\n    - 对于分层 $S=L$，非暴露组：$90 + 810 = 900$。这与总数 $n_{0L}=900$ 相符。\n    数据是充分的且不矛盾。\n4.  **不切实际或不可行：** 参与者数量和事件计数是假设的，但在大型流行病学研究的背景下是完全合理的。\n5.  **不适定或结构不良：** 该问题是适定的。风险和风险比的定义是标准的，数据允许进行唯一的计算。问题是精确的。\n6.  **伪深刻、琐碎或同义反复：** 该问题并不琐碎；它需要仔细计算并正确理解混杂和不可合并性之间的区别，这是流行病学中的一个关键概念。\n\n### 步骤3：结论和行动\n问题陈述是**有效的**。现在将继续解决过程。\n\n### 求解推导\n\n分析需要计算分层特定的风险比和粗略风险比。\n\n**1. 定义**\n- 结局的风险是指一组中经历该结局的个体所占的比例。对于一个大小为 $n$、有 $k$ 个病例的组，风险为 $R = k/n$。\n- 风险比 ($RR$) 是暴露组的风险 ($R_1$) 与非暴露组的风险 ($R_0$) 之比：\n  $$RR = \\frac{R_1}{R_0} = \\frac{P(Y=1|E=1)}{P(Y=1|E=0)}$$\n\n**2. 分层特定风险比**\n\n- **对于分层 $S=H$（高风险）：**\n  - 暴露组 ($E=1$) 的风险：$R_{1H} = \\frac{180}{900} = 0.20$。\n  - 非暴露组 ($E=0$) 的风险：$R_{0H} = \\frac{40}{100} = 0.40$。\n  - 分层特定风险比：\n    $$RR_H = \\frac{R_{1H}}{R_{0H}} = \\frac{0.20}{0.40} = 0.50$$\n\n- **对于分层 $S=L$（低风险）：**\n  - 暴露组 ($E=1$) 的风险：$R_{1L} = \\frac{5}{100} = 0.05$。\n  - 非暴露组 ($E=0$) 的风险：$R_{0L} = \\frac{90}{900} = 0.10$。\n  - 分层特定风险比：\n    $$RR_L = \\frac{R_{1L}}{R_{0L}} = \\frac{0.05}{0.10} = 0.50$$\n\n在每个分层内，暴露似乎具有保护作用，将风险降低了 $50\\%$。分层特定的风险比是同质的（相等的），即 $RR_H = RR_L = 0.50$。\n\n**3. 边际（粗略）风险比**\n\n要计算粗略 $RR$，我们必须首先合并两个分层的数据。\n\n- **总暴露组 ($E=1$)：**\n  - 总受试者：$n_1 = n_{1H} + n_{1L} = 900 + 100 = 1000$。\n  - 总病例数：$a = a_H + a_L = 180 + 5 = 185$。\n  - 暴露组的边际风险：$R_1 = \\frac{a}{n_1} = \\frac{185}{1000} = 0.185$。\n\n- **总非暴露组 ($E=0$)：**\n  - 总受试者：$n_0 = n_{0H} + n_{0L} = 100 + 900 = 1000$。\n  - 总病例数：$c = c_H + c_L = 40 + 90 = 130$。\n  - 非暴露组的边际风险：$R_0 = \\frac{c}{n_0} = \\frac{130}{1000} = 0.130$。\n\n- **粗略风险比：**\n  $$RR_{crude} = \\frac{R_1}{R_0} = \\frac{0.185}{0.130} \\approx 1.42307...$$\n粗略 $RR$ 约为 $1.42$。\n\n**4. 解释：混杂效应与不可合并性**\n\n我们观察到关联的逆转：分层特定的 $RR$ 为 $0.50$（保护性），而粗略 $RR$ 约为 $1.42$（有害性）。这种现象被称为**辛普森悖论**。任务是确定这是由于混杂效应还是不可合并性。\n\n- **混杂效应：** 如果一个变量 $S$ 同时与暴露 $E$ 和结局 $Y$（独立于 $E$）相关，并且不在从 $E$到 $Y$ 的因果路径上，那么它就是一个混杂因素。\n  - **$S$ 和 $E$ 之间的关联**：\n    - 在分层 $H$ 中暴露的比例：$P(E=1|S=H) = \\frac{900}{900+100} = \\frac{900}{1000} = 0.9$。\n    - 在分层 $L$ 中暴露的比例：$P(E=1|S=L) = \\frac{100}{100+900} = \\frac{100}{1000} = 0.1$。\n    - 由于 $P(E=1|S=H) \\neq P(E=1|S=L)$，$S$ 与 $E$ 强相关。\n  - **$S$ 和 $Y$ 之间的关联（在非暴露组中）**：\n    - 在分层 $H$ 中的风险（非暴露组）：$P(Y=1|S=H, E=0) = \\frac{40}{100} = 0.4$。\n    - 在分层 $L$ 中的风险（非暴露组）：$P(Y=1|S=L, E=0) = \\frac{90}{900} = 0.1$。\n    - 由于 $P(Y=1|S=H, E=0) \\neq P(Y=1|S=L, E=0)$，$S$ 是 $Y$ 的一个风险因素。\n  - 变量 $S$ 是一个基线风险因素，所以它不在因果路径上。\n  - 由于所有条件都满足，**$S$ 是一个混杂因素**。粗略（边际）关联被扭曲了，因为暴露组不成比例地由高风险个体组成（$90\\%$ 的暴露者在分层 $H$ 中），而非暴露组不成比例地由低风险个体组成（$90\\%$ 的非暴露者在分层 $L$ 中）。这在粗略分析中产生了一种虚假的有害关联。\n\n- **可合并性：** 这是效应度量的一个数学属性。如果粗略度量是分层特定度量的加权平均值，则该度量是可合并的。更正式地说，如果对于一个恒定的分层特定度量，当且仅当分层变量与暴露不相关时，粗略度量将等于该共同值，则该度量是可合并的。\n  - **风险比 ($RR$) 是一个可合并的度量**。当分层特定的 $RR$ 是恒定的（如此处：$0.50$）时，这个共同值与粗略 $RR$ 之间的任何差异都必须归因于混杂效应（即，分层变量与暴露之间的关联）。\n  - **优势比 ($OR$) 是不可合并的**。对于 $OR$，即使在没有混杂效应的情况下，粗略度量也可能与共同的分层特定度量不同，这仅仅是该度量非线性的数学结果。\n\n在这个问题中，度量是风险比。因为 $RR$ 是可合并的，所以观察到的调整后 ($0.50$) 和粗略 (≈ $1.42$) 值之间的差异完全归因于 $S$ 的混杂效应。这不是不可合并性的问题。\n\n### 逐项分析\n\n- **A. 各分层特定的 $RR$ 均为 $0.50$，而粗略 $RR$ 约为 $1.42$；这是由 $S$ 的混杂效应驱动的辛普森悖论，而非不可合并性所致。**\n  - 我们的计算证实了分层特定的 $RR$ 为 $0.50$，粗略 $RR$ 约为 $1.42$。\n  - 效应方向的逆转确实是辛普森悖论。\n  - 我们的分析表明 $S$ 是一个强混杂因素。\n  - 这种差异是由于混杂效应，因为风险比是一个可合并的度量。它不是由不可合并性引起的这一说法是正确的。\n  - **结论：正确。**\n\n- **B. 各分层特定的 $RR$ 均为 $0.50$，而粗略 $RR$ 约为 $1.42$；发生这种情况是因为风险比是不可合并的。**\n  - 数值是正确的。\n  - 解释不正确。风险比是可合并的，不是不可合并的。该现象是由混杂效应引起的。\n  - **结论：不正确。**\n\n- **C. 分层特定和粗略的 $RR$ 均相等（约 $0.50$）；不存在辛普森悖论和混杂效应。**\n  - 这在事实上是不正确的。我们的计算表明粗略 $RR$ 约为 $1.42$，不等于 $0.50$。\n  - **结论：不正确。**\n\n- **D. 两个分层中的分层特定 $RR$ 均超过 $1$，但粗略 $RR$ 小于 $1$；这种逆转是由 $S$ 的混杂效应引起的。**\n  - 这将数值模式说反了。分层特定的 $RR$ 是 $0.50$（小于 $1$），而粗略 $RR$ 约为 $1.42$（大于 $1$）。\n  - **结论：不正确。**\n\n- **E. 风险比不可能发生方向逆转；这种逆转只发生在优势比上，因此所描述的模式对于风险比是不可能的。**\n  - 这是一个错误的说法。辛普森悖论，包括关联方向的完全逆转，可以发生在风险比、风险差和优势比上。我们刚刚为风险比证明了这一点。\n  - **结论：不正确。**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "真实世界的数据分析往往是复杂的，需要我们综合运用多种测量指标和调整方法。本综合练习将前两个练习的技能融会贯通，要求您处理一个包含混杂因素（年龄）的队列研究数据。您将计算包括风险差（RD）、风险比（RR）和比值比（OR）在内的多种关联指标，并比较它们的粗略值与分层值。通过采用直接标准化法进行校正，本练习旨在让您亲身体验如何量化和校正混杂，并理解不同关联测量指标（绝对与相对）在揭示效应修饰现象时的不同视角。",
            "id": "4569991",
            "problem": "对一个制造业工人的队列进行了为期$1$年的随访，以评估暴露于溶剂$Y$与新发哮喘之间的关联。入组按年龄分层：第$1$层（$18$–$39$岁）和第$2$层（$40$–$65$岁）。在每个层内，工人被分为暴露组（$E$）或未暴露组（$U$），并确定了新发哮喘病例。研究观察到以下计数：\n\n- 第$1$层：暴露组$E$：$600$名工人，其中$60$例新发病例；未暴露组$U$：$400$名工人，其中$20$例新发病例。\n- 第$2$层：暴露组$E$：$400$名工人，其中$160$例新发病例；未暴露组$U$：$600$名工人，其中$120$例新发病例。\n\n仅使用风险、比值、风险绝对差、风险比和比值比的核心定义，以及分层和直接标准化的原则，执行以下操作：\n\n- 计算暴露组和未暴露组的层特异性风险。\n- 计算层特异性的绝对度量（风险差；RD）和相对度量（风险比；RR，以及比值比；OR）。\n- 计算暴露组和未暴露组的粗略（未分层）风险，以及粗略的RD、RR和OR。\n- 使用外部标准年龄分布，其中第$1$层的权重$w_{1}=0.50$，第$2$层的权重$w_{2}=0.50$，计算暴露组和未暴露组的直接标准化风险，以及直接标准化的RD和RR。\n- 使用与跨层逆方差加权一致的分层估计量计算调整后的OR。\n\n然后，基于计算出的量，根据加权和标准化在分层下的运作方式，诊断粗略度量和调整后度量在不同尺度（RD vs RR vs OR）之间任何差异的来源，将解释与上述定义明确联系起来。\n\n最后，仅报告使用给定外部标准权重计算的直接标准化风险比。将您的答案四舍五入到四位有效数字，并以小数形式表示（不要使用百分号）。",
            "solution": "该问题要求计算几种关联度量，并分析粗略估计值与调整后估计值之间的关系。我们首先定义核心量，然后继续对每个层、粗略数据和标准化数据进行计算。\n\n设$A$为一组中新发病例（事件）的数量，$N$为个体总数。未发生事件的个体数为$B = N - A$。让下标$E$和$U$分别表示暴露组和未暴露组。让下标$i$表示层，其中$i \\in \\{1, 2\\}$。\n\n基本定义如下：\n- 风险 (Risk): $R = \\frac{A}{N}$\n- 比值 (Odds): $Odds = \\frac{A}{B} = \\frac{R}{1-R}$\n- 风险差 (Risk Difference, RD): $RD = R_E - R_U$\n- 风险比 (Risk Ratio, RR): $RR = \\frac{R_E}{R_U}$\n- 比值比 (Odds Ratio, OR): $OR = \\frac{A_E/B_E}{A_U/B_U} = \\frac{A_E B_U}{B_E A_U}$\n\n问题提供的数据如下：\n- 第$1$层（$18$–$39$岁）：\n  - 暴露组：$A_{E1} = 60$, $N_{E1} = 600$。因此，$B_{E1} = 600 - 60 = 540$。\n  - 未暴露组：$A_{U1} = 20$, $N_{U1} = 400$。因此，$B_{U1} = 400 - 20 = 380$。\n  - 第$1$层总计：$N_1 = 600 + 400 = 1000$。\n- 第$2$层（$40$–$65$岁）：\n  - 暴露组：$A_{E2} = 160$, $N_{E2} = 400$。因此，$B_{E2} = 400 - 160 = 240$。\n  - 未暴露组：$A_{U2} = 120$, $N_{U2} = 600$。因此，$B_{U2} = 600 - 120 = 480$。\n  - 第$2$层总计：$N_2 = 400 + 600 = 1000$。\n- 外部标准权重：$w_1 = 0.50$, $w_2 = 0.50$。\n\n首先，我们计算层特异性度量。\n\n对于第$1$层：\n- 暴露组风险：$R_{E1} = \\frac{A_{E1}}{N_{E1}} = \\frac{60}{600} = 0.10$\n- 未暴露组风险：$R_{U1} = \\frac{A_{U1}}{N_{U1}} = \\frac{20}{400} = 0.05$\n- 层特异性风险差：$RD_1 = R_{E1} - R_{U1} = 0.10 - 0.05 = 0.05$\n- 层特异性风险比：$RR_1 = \\frac{R_{E1}}{R_{U1}} = \\frac{0.10}{0.05} = 2.0$\n- 层特异性比值比：$OR_1 = \\frac{A_{E1} B_{U1}}{B_{E1} A_{U1}} = \\frac{60 \\times 380}{540 \\times 20} = \\frac{22800}{10800} \\approx 2.111$\n\n对于第$2$层：\n- 暴露组风险：$R_{E2} = \\frac{A_{E2}}{N_{E2}} = \\frac{160}{400} = 0.40$\n- 未暴露组风险：$R_{U2} = \\frac{A_{U2}}{N_{U2}} = \\frac{120}{600} = 0.20$\n- 层特异性风险差：$RD_2 = R_{E2} - R_{U2} = 0.40 - 0.20 = 0.20$\n- 层特异性风险比：$RR_2 = \\frac{R_{E2}}{R_{U2}} = \\frac{0.40}{0.20} = 2.0$\n- 层特异性比值比：$OR_2 = \\frac{A_{E2} B_{U2}}{B_{E2} A_{U2}} = \\frac{160 \\times 480}{240 \\times 120} = \\frac{76800}{28800} \\approx 2.667$\n\n其次，我们通过将数据合并成一个单一的$2 \\times 2$表格来计算粗略（未分层）度量。\n- 总暴露组：$A_E = A_{E1} + A_{E2} = 60 + 160 = 220$; $N_E = N_{E1} + N_{E2} = 600 + 400 = 1000$。因此，$B_E = 1000 - 220 = 780$。\n- 总未暴露组：$A_U = A_{U1} + A_{U2} = 20 + 120 = 140$; $N_U = N_{U1} + N_{U2} = 400 + 600 = 1000$。因此，$B_U = 1000 - 140 = 860$。\n\n- 暴露组的粗略风险：$R_{E,crude} = \\frac{A_E}{N_E} = \\frac{220}{1000} = 0.22$\n- 未暴露组的粗略风险：$R_{U,crude} = \\frac{A_U}{N_U} = \\frac{140}{1000} = 0.14$\n- 粗略风险差：$RD_{crude} = R_{E,crude} - R_{U,crude} = 0.22 - 0.14 = 0.08$\n- 粗略风险比：$RR_{crude} = \\frac{R_{E,crude}}{R_{U,crude}} = \\frac{0.22}{0.14} \\approx 1.571$\n- 粗略比值比：$OR_{crude} = \\frac{A_E B_U}{B_E A_U} = \\frac{220 \\times 860}{780 \\times 140} = \\frac{189200}{109200} \\approx 1.733$\n\n第三，我们使用外部权重$w_1=0.50$和$w_2=0.50$来计算直接标准化的度量。\n- 暴露组的标准化风险：$R_{E,adj} = \\sum_{i=1}^{2} w_i R_{Ei} = w_1 R_{E1} + w_2 R_{E2} = (0.50 \\times 0.10) + (0.50 \\times 0.40) = 0.05 + 0.20 = 0.25$\n- 未暴露组的标准化风险：$R_{U,adj} = \\sum_{i=1}^{2} w_i R_{Ui} = w_1 R_{U1} + w_2 R_{U2} = (0.50 \\times 0.05) + (0.50 \\times 0.20) = 0.025 + 0.10 = 0.125$\n- 标准化风险差：$RD_{adj} = R_{E,adj} - R_{U,adj} = 0.25 - 0.125 = 0.125$\n- 标准化风险比：$RR_{adj} = \\frac{R_{E,adj}}{R_{U,adj}} = \\frac{0.25}{0.125} = 2.0$\n\n第四，我们使用Mantel-Haenszel (M-H) 估计量来计算调整后的比值比。\n$$OR_{MH} = \\frac{\\sum_{i=1}^{2} \\frac{A_{Ei} B_{Ui}}{N_i}}{\\sum_{i=1}^{2} \\frac{B_{Ei} A_{Ui}}{N_i}} = \\frac{\\frac{60 \\times 380}{1000} + \\frac{160 \\times 480}{1000}}{\\frac{540 \\times 20}{1000} + \\frac{240 \\times 120}{1000}} = \\frac{22.8 + 76.8}{10.8 + 28.8} = \\frac{99.6}{39.6} \\approx 2.515$$\n\n最后，我们分析差异的来源。\n粗略风险比 $RR_{crude} \\approx 1.57$ 与调整后风险比 $RR_{adj} = 2.0$ 有显著差异。这种差异是由于年龄的混杂作用。要存在混杂作用，该变量（年龄）必须与暴露（溶剂Y）和结局（哮喘）都有关联。\n$1$. 年龄与暴露之间的关联：在较年轻的层（$1$）中，暴露工人的比例为$600/1000 = 0.60$，但在较年长的层（$2$）中仅为$400/1000 = 0.40$。因此，年龄与暴露相关。\n$2$. 年龄与结局之间的关联：在未暴露组中（背景风险），年轻层的哮喘风险为$0.05$，而年长层为$0.20$。因此，年龄是哮喘的一个风险因素。\n由于年龄与暴露和结局均相关，因此它是一个混杂因素。在这种情况下，年轻工人（基线风险较低）更可能暴露，而年长工人（基线风险较高）更可能未暴露。这种不平衡扭曲了粗略比较，使粗略RR偏向于无效值$1$。粗略RR ($1.57$) 是对真实关联 ($2.0$) 的低估。\n\n该问题还展示了效应度量修饰（交互作用）。\n- 在风险比（乘法）尺度上，效应是一致的：$RR_1 = 2.0$ 且 $RR_2 = 2.0$。RR不存在效应修饰。\n- 在风险差（加法）尺度上，效应是不一致的：$RD_1 = 0.05$ 而 $RD_2 = 0.20$。这表明，在年长层中，由于暴露导致的风险绝对增加值是年轻层的四倍。\n- 在比值比尺度上，效应也是不一致的：$OR_1 \\approx 2.11$ 而 $OR_2 \\approx 2.67$。\n\n这种RR恒定但RD和OR变化的模式，是当基线风险（$R_U$）在各层间变化时，这些度量定义的数学结果。具体来说，$RD_i = RR_i \\cdot R_{Ui} - R_{Ui} = (RR_i - 1)R_{Ui}$。由于$RR_i$是常数（$RR=2$）且$R_{Ui}$随年龄增加而增加，所以$RD_i$也必须增加。同样地，$OR_i = RR_i \\frac{1-R_{Ui}}{1-R_{Ei}} = RR \\frac{1-R_{Ui}}{1-RR \\cdot R_{Ui}}$。由于$R_{Ui}$变化，所以$OR_i$也必须变化。\n\n加权和标准化可以校正混杂。粗略RR是层特异性风险加权平均值的比值，其中暴露组和未暴露组的权重不同，反映了混杂的研究人群结构：\n$$RR_{crude} = \\frac{ ( N_{E1}/N_E ) R_{E1} + ( N_{E2}/N_E ) R_{E2} }{ ( N_{U1}/N_U ) R_{U1} + ( N_{U2}/N_U ) R_{U2} } = \\frac{ (0.6) R_{E1} + (0.4) R_{E2} }{ (0.4) R_{U1} + (0.6) R_{U2} } \\approx 1.57$$\n直接标准化将一组共同的权重（$w_1=0.5, w_2=0.5$）应用于暴露组和未暴露组的层特异性风险，为具有该标准年龄分布的假设人群创建一个汇总度量。这消除了混杂。\n$$RR_{adj} = \\frac{ w_1 R_{E1} + w_2 R_{E2} }{ w_1 R_{U1} + w_2 R_{U2} } = \\frac{ 0.5 R_{E1} + 0.5 R_{E2} }{ 0.5 R_{U1} + 0.5 R_{U2} }$$\n因为在RR尺度上没有效应修饰（$R_{E1} = 2.0 \\cdot R_{U1}$ 且 $R_{E2} = 2.0 \\cdot R_{U2}$），这可以简化为：\n$$RR_{adj} = \\frac{ 0.5 (2.0 \\cdot R_{U1}) + 0.5 (2.0 \\cdot R_{U2}) }{ 0.5 R_{U1} + 0.5 R_{U2} } = \\frac{ 2.0 (0.5 R_{U1} + 0.5 R_{U2}) }{ 0.5 R_{U1} + 0.5 R_{U2} } = 2.0$$\n调整后的RD（$0.125$）和调整后的OR（$2.52$）也是汇总度量，代表各自层特异性值的加权平均值。由于在这些尺度上存在效应修饰，它们的值取决于所选的加权方案（例如，RD的标准人群，OR的M-H权重），并代表一个平均效应，这掩盖了层间的差异。\n\n最后的问题要求的是直接标准化风险比，我们已计算出其恰好为$2.0$。四舍五入到四位有效数字得到$2.000$。",
            "answer": "$$\\boxed{2.000}$$"
        }
    ]
}
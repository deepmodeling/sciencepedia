{
    "hands_on_practices": [
        {
            "introduction": "The best way to truly grasp the Kaplan-Meier estimator is to construct one from scratch. This first exercise guides you through the foundational product-limit formula, where the overall survival probability is calculated as a product of conditional probabilities at each event time. By working through this small, hypothetical dataset, you will practice the essential skills of building a life table, identifying the number of individuals at risk ($n_i$) and the number of events ($d_i$), and correctly handling censored data, including a scenario with tied event and censoring times .",
            "id": "4806038",
            "problem": "A randomized clinical study follows $n=5$ independent patients under right-censoring. For patient $i$, let $T_i$ denote the true event time and $C_i$ denote the censoring time, and define the observed pair $(Y_i,\\delta_i)$ by $Y_i=\\min\\{T_i,C_i\\}$ and $\\delta_i=\\mathbf{1}\\{T_i \\leq C_i\\}$. Assume non-informative right-censoring, meaning the event time is independent of the censoring time and censoring does not alter the distribution of $T_i$. The observed data are $(Y_i,\\delta_i)$ equal to $(2,1)$, $(4,0)$, $(4,1)$, $(6,1)$, $(7,0)$.\n\nStarting from the definition of the survival function $S(t)=\\mathbb{P}(T>t)$ and the principle that the survival function can be expressed as a product of conditional survival probabilities across observed event times under independent right-censoring, derive the nonparametric estimator of $S(t)$ based on the risk set and event counts at each distinct observed event time. In the presence of ties between event and censoring times, treat events as occurring before censorings at the same time when forming the at-risk counts.\n\nCompute the estimated survival $\\hat{S}(t)$ at each distinct event time present in the dataset, and report the values in increasing order of the event times $t=2$, $t=4$, and $t=6$. Provide exact values as fractions with no rounding.",
            "solution": "The survival function, $S(t)$, is defined as the probability that the event time $T$ is greater than some time $t$:\n$$S(t) = \\mathbb{P}(T > t)$$\nThe Kaplan-Meier method provides a non-parametric estimate of this function from observed data that may be censored. The core principle is to express the survival function as a product of conditional probabilities over the observed event times.\n\nLet $t_{(1)}  t_{(2)}  \\dots  t_{(k)}$ be the $k$ distinct event times observed in the sample. The probability of surviving past a time $t$, where $t_{(j)} \\le t  t_{(j+1)}$, is equivalent to the probability of surviving past the last observed event time, $t_{(j)}$. This can be expressed using the chain rule of probability:\n$$\nS(t) = \\mathbb{P}(T > t_{(j)}) = \\mathbb{P}(T > t_{(1)} \\text{ and } T > t_{(2)} \\text{ and } \\dots \\text{ and } T > t_{(j)})\n$$\n$$\nS(t) = \\mathbb{P}(T > t_{(1)}) \\times \\mathbb{P}(T > t_{(2)} | T > t_{(1)}) \\times \\dots \\times \\mathbb{P}(T > t_{(j)} | T > t_{(j-1)})\n$$\nThis can be written in product form as:\n$$S(t) = \\prod_{i: t_{(i)} \\le t} \\mathbb{P}(T > t_{(i)} | T > t_{(i-1)}), \\quad \\text{with } t_{(0)} = 0$$\nEach term $\\mathbb{P}(T > t_{(i)} | T > t_{(i-1)})$ is the conditional probability of surviving past time $t_{(i)}$, given survival up to that point. This can be rewritten as $1 - \\mathbb{P}(T = t_{(i)} | T \\ge t_{(i)})$, where the latter term is the conditional probability of an event at $t_{(i)}$, i.e., the hazard at that time.\n\nUnder the assumption of non-informative censoring, we can estimate this conditional probability from the data. We define the following quantities for each distinct event time $t_{(i)}$:\n- The risk set, $R(t_{(i)})$, is the set of all individuals who are still under observation just prior to time $t_{(i)}$.\n- The number at risk, $n_i$, is the size of the risk set, $n_i = |R(t_{(i)})| = |\\{j: Y_j \\ge t_{(i)}\\}|$.\n- The number of events, $d_i$, is the number of individuals who experience the event at time $t_{(i)}$, $d_i = |\\{j: Y_j = t_{(i)}, \\delta_j = 1\\}|$.\n\nThe estimate for the conditional probability of an event at $t_{(i)}$ is the proportion $\\frac{d_i}{n_i}$. Consequently, the estimated conditional probability of surviving past $t_{(i)}$ is $1 - \\frac{d_i}{n_i}$.\n\nSubstituting these estimates into the product form gives the Kaplan-Meier product-limit estimator for the survival function:\n$$\\hat{S}(t) = \\prod_{i: t_{(i)} \\le t} \\left(1 - \\frac{d_i}{n_i}\\right)$$\nBy convention, $\\hat{S}(0) = 1$. The survival function estimate is a step function that is constant between event times and changes value only at the observed event times.\n\nNow, we apply this to the given data. The total number of patients is $n=5$. The observed data pairs $(Y_i, \\delta_i)$ are $(2,1), (4,0), (4,1), (6,1), (7,0)$.\nThe distinct observed times are $2, 4, 6, 7$. The event times (where $\\delta_i=1$) are $t=2, 4, 6$.\n\nWe construct a life table to organize the calculation:\n\n**1. Time interval $t \\in [0, 2)$**\nThe initial number of patients at risk is $n=5$. No events have occurred.\n$\\hat{S}(t) = 1$ for $t  2$.\n\n**2. First event time, $t=2$**\n- The number of individuals at risk just before time $t=2$ is $n_2 = 5$. All patients are still in the study.\n- The number of events at $t=2$ is $d_2 = 1$.\n- The conditional survival probability is $1 - \\frac{d_2}{n_2} = 1 - \\frac{1}{5} = \\frac{4}{5}$.\n- The estimated survival function at $t=2$ is $\\hat{S}(2) = \\hat{S}(0) \\times \\left(1 - \\frac{d_2}{n_2}\\right) = 1 \\times \\frac{4}{5} = \\frac{4}{5}$.\n- After this time point, $1$ patient has had an event. The number of patients remaining at risk is $5 - 1 = 4$.\n\n**3. Second event time, $t=4$**\n- At time $t=4$, there is one event $(4,1)$ and one censoring $(4,0)$.\n- The number of individuals at risk just before time $t=4$ includes all those with observed times $Y_i \\ge 4$. These are the patients with data $(4,0), (4,1), (6,1), (7,0)$. Thus, the number at risk is $n_4 = 4$.\n- The number of events at $t=4$ is $d_4 = 1$.\n- Per the problem's tie-breaking rule, the event is processed before the censoring. The risk set $n_4=4$ correctly includes both individuals.\n- The conditional survival probability is $1 - \\frac{d_4}{n_4} = 1 - \\frac{1}{4} = \\frac{3}{4}$.\n- The estimated survival function at $t=4$ is $\\hat{S}(4) = \\hat{S}(2) \\times \\left(1 - \\frac{d_4}{n_4}\\right) = \\frac{4}{5} \\times \\frac{3}{4} = \\frac{3}{5}$.\n- After this time point, $1$ patient has had an event and $1$ has been censored. The number of patients remaining at risk is an initial $4$ minus $1$ event and $1$ censoring, leaving $4 - 1 - 1 = 2$.\n\n**4. Third event time, $t=6$**\n- The number of individuals at risk just before time $t=6$ includes those with observed times $Y_i \\ge 6$. These are the patients with data $(6,1)$ and $(7,0)$. Thus, the number at risk is $n_6 = 2$.\n- The number of events at $t=6$ is $d_6 = 1$.\n- The conditional survival probability is $1 - \\frac{d_6}{n_6} = 1 - \\frac{1}{2} = \\frac{1}{2}$.\n- The estimated survival function at $t=6$ is $\\hat{S}(6) = \\hat{S}(4) \\times \\left(1 - \\frac{d_6}{n_6}\\right) = \\frac{3}{5} \\times \\frac{1}{2} = \\frac{3}{10}$.\n- After this time point, $1$ patient has had an event. The number remaining is $2 - 1 = 1$.\n\nThe final observation is a censoring at $t=7$. The survival estimate does not change at a censoring time, so $\\hat{S}(t) = \\frac{3}{10}$ for all $t \\ge 6$.\n\nThe requested values are the estimated survival probabilities at the distinct event times $t=2, 4, 6$.\n- $\\hat{S}(2) = \\frac{4}{5}$\n- $\\hat{S}(4) = \\frac{3}{5}$\n- $\\hat{S}(6) = \\frac{3}{10}$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{4}{5}  \\frac{3}{5}  \\frac{3}{10}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Having built a basic curve, we now reinforce the core calculation with a more detailed dataset involving numerous censored observations. This practice emphasizes how censoring reduces the size of the risk set for subsequent time points without directly causing a drop in the survival probability itself. Completing this exercise will solidify your understanding of why the Kaplan-Meier curve is a step function and how to use it to find the survival probability at any point in time, including times that fall between observed events .",
            "id": "4921641",
            "problem": "A clinical follow-up study records right-censored survival times for a cohort under the standard non-informative right-censoring assumption. For each subject $i$, the observed time is $t_{i}$ (in months) and the indicator $\\delta_{i}$ equals $1$ if an event (failure) is observed at $t_{i}$ and equals $0$ if the subject is right-censored at $t_{i}$. The $n=12$ observed pairs $(t_{i}, \\delta_{i})$ are, sorted by increasing $t_{i}$:\n- Subject $1$: $(t_{1}=2,\\ \\delta_{1}=1)$\n- Subject $2$: $(t_{2}=3,\\ \\delta_{2}=1)$\n- Subject $3$: $(t_{3}=4,\\ \\delta_{3}=0)$\n- Subject $4$: $(t_{4}=5,\\ \\delta_{4}=0)$\n- Subject $5$: $(t_{5}=6,\\ \\delta_{5}=0)$\n- Subject $6$: $(t_{6}=8,\\ \\delta_{6}=1)$\n- Subject $7$: $(t_{7}=10,\\ \\delta_{7}=0)$\n- Subject $8$: $(t_{8}=12,\\ \\delta_{8}=1)$\n- Subject $9$: $(t_{9}=14,\\ \\delta_{9}=0)$\n- Subject $10$: $(t_{10}=18,\\ \\delta_{10}=0)$\n- Subject $11$: $(t_{11}=20,\\ \\delta_{11}=1)$\n- Subject $12$: $(t_{12}=24,\\ \\delta_{12}=0)$\n\nStarting from the fundamental definition of the survival function $S(t)=\\Pr(T>t)$ and the interpretation of survival as a product of successive conditional survival probabilities over event times, determine the Kaplan–Meier estimated survival probability $\\hat{S}(t)$ evaluated at $t^{*}=15$ months using the information above. In your derivation, account for how right-censoring modifies the size of the risk set without directly changing the survival level until the next observed event time, and explain why the estimate remains constant across intervals with only censorings.\n\nExpress your final numerical answer for $\\hat{S}(15)$ as a decimal rounded to four significant figures. Do not use a percentage sign; report a pure number without units. Time is measured in months, but the requested survival probability is dimensionless.",
            "solution": "The survival function, $S(t)$, is defined as the probability that the true time to an event, $T$, is greater than some specified time $t$.\n$$ S(t) = \\Pr(T > t) $$\nThe Kaplan-Meier estimator, $\\hat{S}(t)$, is a non-parametric method to estimate $S(t)$ from time-to-event data that includes right-censored observations. The fundamental principle is to express the survival probability at time $t$ as a product of conditional probabilities of surviving through a sequence of intervals defined by the observed event times.\n\nLet the distinct event times observed in the data be $t_{(1)}  t_{(2)}  \\dots  t_{(J)}$. The survival function at a time $t$ such that $t_{(k)} \\le t  t_{(k+1)}$ can be written as:\n$$ S(t) = \\Pr(T > t_{(k)}) = \\Pr(T > t_{(1)}) \\times \\Pr(T > t_{(2)} | T > t_{(1)}) \\times \\dots \\times \\Pr(T > t_{(k)} | T > t_{(k-1)}) $$\nThe Kaplan-Meier method estimates each of these conditional probabilities from the data. The probability of surviving past an event time $t_{(j)}$, given that a subject was at risk just prior to $t_{(j)}$, is estimated as the ratio of those who survived past $t_{(j)}$ to those who were at risk at $t_{(j)}$.\n$$ \\widehat{\\Pr}(T > t_{(j)} | T \\ge t_{(j)}) = \\frac{n_j - d_j}{n_j} $$\nHere, $n_j$ is the number of subjects in the risk set (i.e., those who are alive and under observation) just before time $t_{(j)}$, and $d_j$ is the number of subjects who experience the event at time $t_{(j)}$.\n\nThe Kaplan-Meier estimator for the survival function is the product of these estimated conditional probabilities up to time $t$:\n$$ \\hat{S}(t) = \\prod_{j: t_{(j)} \\le t} \\left(1 - \\frac{d_j}{n_j}\\right) $$\nBy convention, $\\hat{S}(0) = 1$. The estimate $\\hat{S}(t)$ is a right-continuous step function. It remains constant between event times and only decreases at the times when one or more events are observed.\n\nRight-censored observations play a critical role in defining the risk set $n_j$. A subject censored at time $t_c$ is known to have survived at least until $t_c$. Therefore, this subject is included in the risk set $n_j$ for all event times $t_{(j)} \\le t_c$. For any event time $t_{(k)} > t_c$, this censored subject is no longer under observation and is thus excluded from the risk set $n_k$. The act of censoring at time $t_c$ does not, by itself, cause a change in the estimated survival probability $\\hat{S}(t)$. It only reduces the number of individuals at risk for subsequent event times, thereby affecting the denominators of later terms in the product formula. This is why $\\hat{S}(t)$ remains constant across intervals that contain only censored observations.\n\nWe now apply this procedure to the given data. The distinct event times are $t=2, 3, 8, 12, 20$. We will calculate $\\hat{S}(t)$ at each of these times.\n\n**Time $t=0$:**\nThe initial number of subjects is $n=12$.\n$\\hat{S}(0) = 1$.\n\n**Event at $t_{(1)} = 2$:**\n- The number of subjects at risk just before $t=2$ is $n_1 = 12$.\n- The number of events at $t=2$ is $d_1 = 1$.\n- The survival probability for $t \\in [2, 3)$ is:\n$$ \\hat{S}(t) = \\hat{S}(0) \\times \\left(1 - \\frac{d_1}{n_1}\\right) = 1 \\times \\left(1 - \\frac{1}{12}\\right) = \\frac{11}{12} $$\n\n**Event at $t_{(2)} = 3$:**\n- Before this time, one subject had an event at $t=2$. The number at risk for the event at $t=3$ is $n_2 = 12 - 1 = 11$.\n- The number of events at $t=3$ is $d_2 = 1$.\n- At times $t=4, 5, 6$, there are three censorings. These subjects are considered at risk at $t=3$ but will be removed from the risk set for the next event.\n- The survival probability for $t \\in [3, 8)$ is:\n$$ \\hat{S}(t) = \\hat{S}(2) \\times \\left(1 - \\frac{d_2}{n_2}\\right) = \\frac{11}{12} \\times \\left(1 - \\frac{1}{11}\\right) = \\frac{11}{12} \\times \\frac{10}{11} = \\frac{10}{12} = \\frac{5}{6} $$\n\n**Event at $t_{(3)} = 8$:**\n- To find the risk set $n_3$, we count the number of subjects with observed times $t_i \\ge 8$. The observations are at times $8, 10, 12, 14, 18, 20, 24$, which corresponds to $7$ subjects. So, $n_3 = 7$.\n- The number of events at $t=8$ is $d_3 = 1$.\n- The survival probability for $t \\in [8, 12)$ is:\n$$ \\hat{S}(t) = \\hat{S}(3) \\times \\left(1 - \\frac{d_3}{n_3}\\right) = \\frac{5}{6} \\times \\left(1 - \\frac{1}{7}\\right) = \\frac{5}{6} \\times \\frac{6}{7} = \\frac{5}{7} $$\n\n**Event at $t_{(4)} = 12$:**\n- The risk set $n_4$ consists of subjects with $t_i \\ge 12$. The observations are at times $12, 14, 18, 20, 24$, corresponding to $5$ subjects. So, $n_4 = 5$.\n- The number of events at $t=12$ is $d_4 = 1$.\n- The survival probability for $t \\in [12, 20)$ is:\n$$ \\hat{S}(t) = \\hat{S}(8) \\times \\left(1 - \\frac{d_4}{n_4}\\right) = \\frac{5}{7} \\times \\left(1 - \\frac{1}{5}\\right) = \\frac{5}{7} \\times \\frac{4}{5} = \\frac{4}{7} $$\n\nWe are asked to find the value of $\\hat{S}(t^{*})$ for $t^{*}=15$ months. The time $t^{*}=15$ falls within the interval $[12, 20)$. Since the Kaplan-Meier estimate is a step function that is constant between event times, the survival probability at $t=15$ is the same as the value established at the last event time, $t=12$.\n$$ \\hat{S}(15) = \\hat{S}(12) = \\frac{4}{7} $$\n\nFinally, we express this fraction as a decimal rounded to four significant figures.\n$$ \\hat{S}(15) = \\frac{4}{7} \\approx 0.57142857... $$\nRounding to four significant figures gives $0.5714$.\n\nA summary of the calculation is provided in the table below:\n| Time ($t_i$) | At Risk ($n_j$) | Events ($d_j$) | Censored ($c_j$) | Conditional Survival ($1 - d_j/n_j$) | $\\hat{S}(t_i)$ |\n|--------------|-----------------|----------------|------------------|---------------------------------------|----------------|\n| $0$          | $12$            | $0$            | $0$              | -                                     | $1.0000$       |\n| $2$          | $12$            | $1$            | $0$              | $1 - 1/12 = 11/12$                    | $11/12 \\approx 0.9167$ |\n| $3$          | $11$            | $1$            | $0$              | $1 - 1/11 = 10/11$                    | $(11/12)(10/11) = 10/12 \\approx 0.8333$ |\n| $4$          | $10$            | $0$            | $1$              | -                                     | $10/12$        |\n| $5$          | $9$             | $0$            | $1$              | -                                     | $10/12$        |\n| $6$          | $8$             | $0$            | $1$              | -                                     | $10/12$        |\n| $8$          | $7$             | $1$            | $0$              | $1 - 1/7 = 6/7$                       | $(10/12)(6/7) = 5/7 \\approx 0.7143$ |\n| $10$         | $6$             | $0$            | $1$              | -                                     | $5/7$          |\n| $12$         | $5$             | $1$            | $0$              | $1 - 1/5 = 4/5$                       | $(5/7)(4/5) = 4/7 \\approx 0.5714$ |\n| $14$         | $4$             | $0$            | $1$              | -                                     | $4/7$          |\n| $18$         | $3$             | $0$            | $1$              | -                                     | $4/7$          |\n| $20$         | $2$             | $1$            | $0$              | $1 - 1/2 = 1/2$                       | $(4/7)(1/2) = 2/7 \\approx 0.2857$ |\n| $24$         | $1$             | $0$            | $1$              | -                                     | $2/7$          |\n\nThe value at $t=15$ is $\\hat{S}(12)$, which is $4/7$.",
            "answer": "$$\\boxed{0.5714}$$"
        },
        {
            "introduction": "In many real-world applications, estimating a single survival curve is only the beginning; the ultimate goal is often to compare survival experiences between two or more groups, such as a treatment and a control group. This final practice advances from estimation to hypothesis testing by introducing the log-rank test, a cornerstone non-parametric method for comparing survival distributions. You will apply the life-table framework to calculate the observed and expected number of events for a group under the null hypothesis of no difference, culminating in the calculation of the test statistic itself .",
            "id": "4805978",
            "problem": "A clinical survival study compares two treatment groups using the Kaplan–Meier (KM) framework for right-censored data and the log-rank test for comparing survivor functions. For Group A, the observed time and event indicator pairs are $(Y,\\delta)$ equal to $(1,1)$, $(3,1)$, $(4,0)$; for Group B, the pairs are $(2,1)$, $(3,0)$, $(5,1)$. Here, $Y$ is the observed time and $\\delta$ equals $1$ for an event and $0$ for a right-censoring. Assume non-informative right-censoring, independent groups, and that at any calendar time $t$, individuals censored at time $t$ are considered at risk at the instant just prior to $t$ for the purpose of risk set formation. Distinct event times are those times $t$ at which at least one event occurs in either group.\n\nStarting from the fundamental definition that, under the null hypothesis of equal hazard functions between groups, the allocation of events at each distinct event time among the risk sets is governed by the hypergeometric law conditional on the total number of events at that time, do the following:\n\n- Determine the risk set counts in each group immediately prior to each distinct event time.\n- At each distinct event time, compute the observed minus expected number of events in Group A under the null hypothesis, where the expectation is taken with respect to the conditional hypergeometric allocation given the total number of events at that time.\n- Aggregate these contributions across all distinct event times and compute the corresponding log-rank test statistic using the appropriate variance obtained from the conditional hypergeometric variability across event times.\n\nProvide your final test statistic as an exact value without rounding. Do not report intermediate steps in the final answer. The final answer must be a single real number with no units.",
            "solution": "The log-rank test statistic is constructed by summing the observed minus expected number of events across all distinct event times and standardizing by the sum of the variances. Let Group A be the reference group. We will calculate the contributions at each distinct event time.\n\nThe data provided are:\n- Group A ($N_A=3$): $(1,1), (3,1), (4,0)$\n- Group B ($N_B=3$): $(2,1), (3,0), (5,1)$\n\nThe distinct event times are the times at which $\\delta=1$. These are $t=1$ and $t=3$ from Group A, and $t=2$ and $t=5$ from Group B. The ordered distinct event times are $t_{(1)}=1$, $t_{(2)}=2$, $t_{(3)}=3$, and $t_{(4)}=5$.\n\nLet $d_{Aj}$ be the observed number of events in Group A at time $t_{(j)}$, $n_{Aj}$ be the number of subjects at risk in Group A just prior to $t_{(j)}$, and $d_j$ and $n_j$ be the corresponding totals for both groups. Under the null hypothesis, the expected number of events in Group A at $t_{(j)}$ is $E_{Aj} = d_j \\frac{n_{Aj}}{n_j}$. The variance of $d_{Aj}$ is $V_j = \\frac{n_{Aj} n_{Bj} d_j (n_j-d_j)}{n_j^2(n_j-1)}$.\n\nWe proceed step-by-step for each event time.\n\n**Event time $t_{(1)}=1$:**\n- Subjects at risk just prior to $t=1$: All subjects are at risk.\n  - Group A: $n_{A1} = 3$\n  - Group B: $n_{B1} = 3$\n  - Total: $n_1 = n_{A1} + n_{B1} = 6$\n- Observed events at $t=1$: The subject $(1,1)$ from Group A has an event.\n  - Group A: $d_{A1} = 1$\n  - Group B: $d_{B1} = 0$\n  - Total: $d_1 = d_{A1} + d_{B1} = 1$\n- Expected events in Group A: $E_{A1} = d_1 \\frac{n_{A1}}{n_1} = 1 \\times \\frac{3}{6} = \\frac{1}{2}$.\n- Contribution to Observed minus Expected: $O_{A1} - E_{A1} = 1 - \\frac{1}{2} = \\frac{1}{2}$.\n- Contribution to Variance: $V_1 = \\frac{n_{A1} n_{B1} d_1 (n_1 - d_1)}{n_1^2 (n_1-1)} = \\frac{3 \\times 3 \\times 1 \\times (6-1)}{6^2 \\times (6-1)} = \\frac{9 \\times 5}{36 \\times 5} = \\frac{9}{36} = \\frac{1}{4}$.\n\n**Event time $t_{(2)}=2$:**\n- Subjects at risk just prior to $t=2$: The subject $(1,1)$ from A is no longer at risk.\n  - Group A: $n_{A2} = 2$ (subjects for $t=3,4$)\n  - Group B: $n_{B2} = 3$ (subjects for $t=2,3,5$)\n  - Total: $n_2 = n_{A2} + n_{B2} = 5$\n- Observed events at $t=2$: The subject $(2,1)$ from Group B has an event.\n  - Group A: $d_{A2} = 0$\n  - Group B: $d_{B2} = 1$\n  - Total: $d_2 = d_{A2} + d_{B2} = 1$\n- Expected events in Group A: $E_{A2} = d_2 \\frac{n_{A2}}{n_2} = 1 \\times \\frac{2}{5} = \\frac{2}{5}$.\n- Contribution to Observed minus Expected: $O_{A2} - E_{A2} = 0 - \\frac{2}{5} = -\\frac{2}{5}$.\n- Contribution to Variance: $V_2 = \\frac{n_{A2} n_{B2} d_2 (n_2 - d_2)}{n_2^2 (n_2-1)} = \\frac{2 \\times 3 \\times 1 \\times (5-1)}{5^2 \\times (5-1)} = \\frac{6 \\times 4}{25 \\times 4} = \\frac{6}{25}$.\n\n**Event time $t_{(3)}=3$:**\n- Subjects at risk just prior to $t=3$: Subject $(2,1)$ from B is no longer at risk.\n  - Group A: $n_{A3} = 2$ (subjects for $t=3,4$)\n  - Group B: $n_{B3} = 2$ (subjects for $t=3,5$)\n  - Total: $n_3 = n_{A3} + n_{B3} = 4$\n- Observed events at $t=3$: The subject $(3,1)$ from Group A has an event. The subject $(3,0)$ from Group B is censored, but does not contribute to the event count $d_j$.\n  - Group A: $d_{A3} = 1$\n  - Group B: $d_{B3} = 0$\n  - Total: $d_3 = d_{A3} + d_{B3} = 1$\n- Expected events in Group A: $E_{A3} = d_3 \\frac{n_{A3}}{n_3} = 1 \\times \\frac{2}{4} = \\frac{1}{2}$.\n- Contribution to Observed minus Expected: $O_{A3} - E_{A3} = 1 - \\frac{1}{2} = \\frac{1}{2}$.\n- Contribution to Variance: $V_3 = \\frac{n_{A3} n_{B3} d_3 (n_3 - d_3)}{n_3^2 (n_3-1)} = \\frac{2 \\times 2 \\times 1 \\times (4-1)}{4^2 \\times (4-1)} = \\frac{4 \\times 3}{16 \\times 3} = \\frac{4}{16} = \\frac{1}{4}$.\n\n**Event time $t_{(4)}=5$:**\n- Subjects at risk just prior to $t=5$: At $t=3$, subject $(3,1)$ from A had an event and $(3,0)$ from B was censored. At $t=4$, subject $(4,0)$ from A was censored.\n  - Group A: $n_{A4} = 0$\n  - Group B: $n_{B4} = 1$ (subject for $t=5$)\n  - Total: $n_4 = n_{A4} + n_{B4} = 1$\n- Observed events at $t=5$: The subject $(5,1)$ from Group B has an event.\n  - Group A: $d_{A4} = 0$\n  - Group B: $d_{B4} = 1$\n  - Total: $d_4 = d_{A4} + d_{B4} = 1$\n- Expected events in Group A: $E_{A4} = d_4 \\frac{n_{A4}}{n_4} = 1 \\times \\frac{0}{1} = 0$.\n- Contribution to Observed minus Expected: $O_{A4} - E_{A4} = 0 - 0 = 0$.\n- Contribution to Variance: $V_4 = 0$. When a risk set has only one member ($n_j=1$), there is no uncertainty in allocation, so the variance is $0$. Alternatively, the formula has $n_{A4}=0$ in the numerator, making the expression zero. The term $(n_j-1)$ in the denominator is also zero, but the contribution is taken to be zero by convention and from first principles.\n\n**Aggregation and Test Statistic Calculation:**\nThe numerator of the log-rank statistic is the square of the sum of the \"Observed minus Expected\" contributions.\n$$ (O-E)_{\\text{total}} = \\sum_{j=1}^{4} (d_{Aj} - E_{Aj}) = \\frac{1}{2} - \\frac{2}{5} + \\frac{1}{2} + 0 = 1 - \\frac{2}{5} = \\frac{3}{5} $$\nThe denominator is the sum of the variances.\n$$ V_{\\text{total}} = \\sum_{j=1}^{4} V_j = \\frac{1}{4} + \\frac{6}{25} + \\frac{1}{4} + 0 = \\frac{1}{2} + \\frac{6}{25} = \\frac{25}{50} + \\frac{12}{50} = \\frac{37}{50} $$\nThe log-rank test statistic, which follows a chi-squared distribution with $1$ degree of freedom under $H_0$, is:\n$$ \\chi^2 = \\frac{((O-E)_{\\text{total}})^2}{V_{\\text{total}}} = \\frac{(\\frac{3}{5})^2}{\\frac{37}{50}} = \\frac{\\frac{9}{25}}{\\frac{37}{50}} = \\frac{9}{25} \\times \\frac{50}{37} = \\frac{9 \\times 2}{37} = \\frac{18}{37} $$\nThe final test statistic is an exact value.",
            "answer": "$$\\boxed{\\frac{18}{37}}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "To compare radiomic features across different scans or patients, we must first ensure that voxel intensities are on a common scale. This exercise tackles the most fundamental method of intensity normalization: linear scaling, often called min-max normalization. By deriving the normalization function from the basic principles of an affine transformation, you will gain a foundational understanding of how to map arbitrary intensity ranges to a standardized interval like $[0, 1]$, a crucial first step in many radiomics pipelines. ",
            "id": "4545720",
            "problem": "In a radiomics pipeline, intensity normalization aims to remove scanner-dependent scaling by mapping voxel intensities within a region of interest (ROI) to a standardized range. Consider a single-channel medical image where the smallest and largest voxel intensities observed within the ROI are $I_{\\min}=50$ and $I_{\\max}=350$, respectively. Assume that the normalization mapping is affine (i.e., a linear transformation with an offset), strictly monotonic, and constrained so that $I_{\\min}$ maps to $0$ and $I_{\\max}$ maps to $1$. Starting from these constraints and the definition of an affine transformation, derive the explicit normalization function that maps any intensity $I$ in the ROI to the interval $[0,1]$. Then use this function to compute the normalized values for the intensity set $I=\\{50,200,350\\}$. Provide the three normalized values as your final answer. No rounding is required, and your answer should be unitless.",
            "solution": "The normalization function, $f(I)$, is stated to be an affine transformation. An affine transformation in one dimension has the general form:\n$$f(I) = aI + b$$\nwhere $a$ and $b$ are constants that define the scaling and offset, respectively. To find these constants, we use the two constraints provided in the problem statement.\n\nConstraint 1: The minimum intensity $I_{\\min}$ maps to $0$.\n$$f(I_{\\min}) = a I_{\\min} + b = 0 \\quad (1)$$\n\nConstraint 2: The maximum intensity $I_{\\max}$ maps to $1$.\n$$f(I_{\\max}) = a I_{\\max} + b = 1 \\quad (2)$$\n\nWe have a system of two linear equations with two unknowns, $a$ and $b$. We can solve this system by subtracting equation (1) from equation (2):\n$$(a I_{\\max} + b) - (a I_{\\min} + b) = 1 - 0$$\n$$a I_{\\max} - a I_{\\min} = 1$$\n$$a (I_{\\max} - I_{\\min}) = 1$$\nSolving for the scaling factor $a$:\n$$a = \\frac{1}{I_{\\max} - I_{\\min}}$$\nThe condition that the mapping is strictly monotonic requires the slope $a$ to be non-zero. Since $I_{\\max} \\neq I_{\\min}$ (as $350 \\neq 50$), this condition is met. Specifically, because $I_{\\max} > I_{\\min}$, we have $a > 0$, so the function is strictly monotonically increasing.\n\nNow, we can solve for the offset $b$ by substituting the expression for $a$ back into equation (1):\n$$\\left(\\frac{1}{I_{\\max} - I_{\\min}}\\right) I_{\\min} + b = 0$$\n$$b = - \\frac{I_{\\min}}{I_{\\max} - I_{\\min}}$$\n\nSubstituting the expressions for $a$ and $b$ back into the general affine form $f(I) = aI + b$, we obtain the explicit normalization function:\n$$f(I) = \\left(\\frac{1}{I_{\\max} - I_{\\min}}\\right) I - \\frac{I_{\\min}}{I_{\\max} - I_{\\min}}$$\nThis can be simplified into the standard form for min-max normalization:\n$$f(I) = \\frac{I - I_{\\min}}{I_{\\max} - I_{\\min}}$$\n\nNow, we substitute the given numerical values for $I_{\\min}$ and $I_{\\max}$ into this derived function. We have $I_{\\min} = 50$ and $I_{\\max} = 350$.\n$$f(I) = \\frac{I - 50}{350 - 50} = \\frac{I - 50}{300}$$\n\nFinally, we apply this function to the specified set of intensity values $I=\\{50, 200, 350\\}$.\n\n1.  For $I = 50$:\n    $$f(50) = \\frac{50 - 50}{300} = \\frac{0}{300} = 0$$\n\n2.  For $I = 200$:\n    $$f(200) = \\frac{200 - 50}{300} = \\frac{150}{300} = \\frac{1}{2} = 0.5$$\n\n3.  For $I = 350$:\n    $$f(350) = \\frac{350 - 50}{300} = \\frac{300}{300} = 1$$\n\nThe set of normalized values for the intensities $\\{50, 200, 350\\}$ is $\\{0, 0.5, 1\\}$. These values are exact and require no rounding.",
            "answer": "$$\\boxed{\\begin{pmatrix} 0 & 0.5 & 1 \\end{pmatrix}}$$"
        },
        {
            "introduction": "Once intensities are normalized, many radiomic features require the data to be discretized, or grouped into a finite number of bins. This practice focuses on a common technique called fixed-bin-number discretization, which partitions the intensity range into equal-width intervals. Calculating the bin width and determining the correct bin for a given intensity value are essential skills for preparing data for texture analysis and other advanced feature extraction methods. ",
            "id": "4545791",
            "problem": "A radiomics pipeline begins by normalizing voxel intensities from a medical image, such as Computed Tomography (CT), to a predefined range. Consider a single region-of-interest where intensities have already been linearly normalized to lie within the closed interval $\\left[I_{\\min}, I_{\\max}\\right]$ with $I_{\\min}=10$ and $I_{\\max}=210$ (dimensionless normalized intensity units). The next step applies gray-level discretization using a fixed number of bins. In the fixed-bin-number scheme, the interval $\\left[I_{\\min}, I_{\\max}\\right]$ is partitioned into $N$ equal-width bins, here with $N=16$. Bin edges are lower-inclusive and upper-exclusive for all but the highest-intensity bin, which includes the upper bound $I_{\\max}$. Bin labels increase sequentially from $1$ for the lowest-intensity bin to $N$ for the highest-intensity bin. Starting only from these foundational definitions, determine the bin width $\\Delta$ and the bin label assigned to a voxel whose normalized intensity is $I=75$. Express both values as exact numbers, with no rounding required, and report the bin width $\\Delta$ in the same dimensionless normalized intensity units.",
            "solution": "The two quantities to be determined are the bin width, denoted by $\\Delta$, and the bin label for a specific intensity value.\n\nFirst, we calculate the bin width, $\\Delta$. The total range of the normalized intensity values is given by the difference between the maximum and minimum intensities, $I_{\\max} - I_{\\min}$. This range is to be partitioned into $N$ bins of equal width. The formula for the bin width $\\Delta$ is therefore:\n$$\n\\Delta = \\frac{I_{\\max} - I_{\\min}}{N}\n$$\nThe problem provides the following values: $I_{\\min} = 10$, $I_{\\max} = 210$, and the number of bins $N = 16$. Substituting these values into the formula yields:\n$$\n\\Delta = \\frac{210 - 10}{16} = \\frac{200}{16}\n$$\nThis fraction simplifies to:\n$$\n\\Delta = \\frac{100}{8} = \\frac{50}{4} = \\frac{25}{2} = 12.5\n$$\nThe bin width $\\Delta$ is exactly $12.5$ in dimensionless normalized intensity units.\n\nNext, we determine the bin label for a voxel with a normalized intensity of $I = 75$. The bins are labeled sequentially starting from $1$. The $k$-th bin (where $k$ is the bin label) corresponds to a specific intensity interval. Based on the problem description, the bins are lower-inclusive and upper-exclusive, except for the final bin. For any bin $k \\in \\{1, 2, \\dots, N-1\\}$, the intensity interval it covers is:\n$$\n\\left[ I_{\\min} + (k-1)\\Delta, I_{\\min} + k\\Delta \\right)\n$$\nThe final bin, with label $N=16$, covers the interval $\\left[ I_{\\min} + (N-1)\\Delta, I_{\\max} \\right]$ to ensure the upper bound $I_{\\max}$ is included.\n\nTo find the bin label $k$ for the intensity $I = 75$, we must find the integer $k$ that satisfies the condition for bin membership. Since $I = 75$ is not equal to $I_{\\max} = 210$, we use the general condition:\n$$\nI_{\\min} + (k-1)\\Delta \\le I < I_{\\min} + k\\Delta\n$$\nWe can solve for $k$ by first subtracting $I_{\\min}$ from all parts of the inequality:\n$$\n(k-1)\\Delta \\le I - I_{\\min} < k\\Delta\n$$\nSince $\\Delta > 0$, we can divide by $\\Delta$ without changing the direction of the inequalities:\n$$\nk-1 \\le \\frac{I - I_{\\min}}{\\Delta} < k\n$$\nThis shows that $k-1$ is the greatest integer less than or equal to the value of the expression $\\frac{I - I_{\\min}}{\\Delta}$. This is precisely the definition of the floor function, $\\lfloor \\cdot \\rfloor$. Thus, we can write:\n$$\nk-1 = \\left\\lfloor \\frac{I - I_{\\min}}{\\Delta} \\right\\rfloor\n$$\nThe bin label $k$ is therefore given by the formula:\n$$\nk = \\left\\lfloor \\frac{I - I_{\\min}}{\\Delta} \\right\\rfloor + 1\n$$\nWe now substitute the known values: $I = 75$, $I_{\\min} = 10$, and the calculated bin width $\\Delta = 12.5$.\n$$\nk = \\left\\lfloor \\frac{75 - 10}{12.5} \\right\\rfloor + 1\n$$\nFirst, we evaluate the argument of the floor function:\n$$\n\\frac{65}{12.5} = \\frac{130}{25} = \\frac{26}{5} = 5.2\n$$\nNow, substitute this result back into the equation for $k$:\n$$\nk = \\lfloor 5.2 \\rfloor + 1 = 5 + 1 = 6\n$$\nThe bin label assigned to an intensity of $I=75$ is $6$.\n\nTo verify, we can explicitly define the boundaries of the first few bins:\nBin 1: $[10, 10 + 12.5) = [10, 22.5)$\nBin 2: $[22.5, 22.5 + 12.5) = [22.5, 35)$\nBin 3: $[35, 35 + 12.5) = [35, 47.5)$\nBin 4: $[47.5, 47.5 + 12.5) = [47.5, 60)$\nBin 5: $[60, 60 + 12.5) = [60, 72.5)$\nBin 6: $[72.5, 72.5 + 12.5) = [72.5, 85)$\nThe intensity value $I = 75$ clearly falls within the interval $[72.5, 85)$, which corresponds to bin label $6$. The calculation is confirmed to be correct.\n\nThe requested values are the bin width $\\Delta$ and the bin label for $I=75$.\nBin width $\\Delta = 12.5$.\nBin label is $6$.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 12.5 & 6 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "Real-world medical images often contain intensity values outside the range of clinical interest, such as those from air or bone in a soft-tissue analysis. These outliers can distort the results of standard normalization. This exercise introduces a practical, two-step workflow that first uses intensity clipping to handle these extreme values and then applies min-max normalization, demonstrating a more robust approach to preparing image data for reliable feature extraction. ",
            "id": "4545736",
            "problem": "In a radiomics workflow, preprocessing commonly includes intensity clipping followed by linear normalization to a standard range to reduce inter-scan variability and improve feature stability. Consider Computed Tomography (CT) voxel intensities measured in Hounsfield units (HU) from a small region of interest: $\\{-100, 0, 50, 1000, 120\\}$. Assume that, for soft-tissue analysis, intensities are clipped to the range $[0, 200]$ HU to remove out-of-range values, and then linearly normalized to the interval $[0, 1]$ using the minimum and maximum of the clipped values. Perform this two-step preprocessing (first clipping to $[0, 200]$, then minâ€“max normalization to $[0, 1]$ computed from the clipped set) and report the normalized intensities corresponding to the original five voxels in their original order as a single row vector. Express the final normalized values as exact fractions wherever applicable, with no rounding and no units in the final numerical answer.",
            "solution": "The problem requires performing a two-step preprocessing procedure on a given set of CT voxel intensities. Let the initial set of intensities be $\\{-100, 0, 50, 1000, 120\\}$.\n\n**Step 1: Intensity Clipping**\nThe first step is to clip the intensities to the specified range of $[0, 200]$ HU. This operation ensures that any value below $0$ is set to $0$, any value above $200$ is set to $200$, and any value already within the range $[0, 200]$ remains unchanged. We apply this to each element:\n\n-   For $-100$: the clipped value is $0$.\n-   For $0$: the clipped value is $0$.\n-   For $50$: the clipped value is $50$.\n-   For $1000$: the clipped value is $200$.\n-   For $120$: the clipped value is $120$.\n\nThe resulting set of clipped intensities is $\\{0, 0, 50, 200, 120\\}$.\n\n**Step 2: Min-Max Normalization**\nThe second step is to linearly normalize the clipped values to the interval $[0, 1]$. The min-max normalization formula for a value $v_{clip}$ is:\n$$ v_{norm} = \\frac{v_{clip} - v_{min, clip}}{v_{max, clip} - v_{min, clip}} $$\nwhere $v_{min, clip}$ and $v_{max, clip}$ are the minimum and maximum values of the clipped set. First, we find these values:\n-   $v_{min, clip} = \\min(\\{0, 0, 50, 200, 120\\}) = 0$.\n-   $v_{max, clip} = \\max(\\{0, 0, 50, 200, 120\\}) = 200$.\n\nSubstituting these into the normalization formula gives the specific transformation for our clipped data:\n$$ v_{norm} = \\frac{v_{clip} - 0}{200 - 0} = \\frac{v_{clip}}{200} $$\nNow, we apply this transformation to each element of the clipped set in its original order:\n\n-   For the first value, $0$: $v_{1,norm} = \\frac{0}{200} = 0$.\n-   For the second value, $0$: $v_{2,norm} = \\frac{0}{200} = 0$.\n-   For the third value, $50$: $v_{3,norm} = \\frac{50}{200} = \\frac{1}{4}$.\n-   For the fourth value, $200$: $v_{4,norm} = \\frac{200}{200} = 1$.\n-   For the fifth value, $120$: $v_{5,norm} = \\frac{120}{200} = \\frac{12}{20} = \\frac{3}{5}$.\n\nThe final vector of normalized intensities is $\\begin{pmatrix} 0 & 0 & \\frac{1}{4} & 1 & \\frac{3}{5} \\end{pmatrix}$. This vector represents the preprocessed intensities as exact fractions, as required.",
            "answer": "$$\\boxed{\\begin{pmatrix} 0 & 0 & \\frac{1}{4} & 1 & \\frac{3}{5} \\end{pmatrix}}$$"
        }
    ]
}
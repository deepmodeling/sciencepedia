## 引言
在[模拟电子学](@entry_id:273848)中，创建一个稳定、恒定的[电流源](@entry_id:275668)是无数高性能电路的一项基本要求。然而，简单的单晶体管[电流源](@entry_id:275668)并非完美，它们会受到[沟道长度调制](@entry_id:264103)等效应的影响，导致其输出电流随电压而变化。这一限制，通过有限的输出电阻来量化，妨碍了放大器和数据转换器等电路的精度。那么，我们如何才能设计出一个更接近理想状态、无论外部条件如何变化都能抵抗电流变化的电流源呢？

本文将深入探讨级联电流镜，一个针对此问题的优雅而强大的解决方案。首先，在“原理与机制”一节中，我们将剖析堆叠两个晶体管如何产生“屏蔽”效应以倍增[输出电阻](@entry_id:276800)，探讨由此带来的与电压裕度之间的权衡，并研究巧妙的“宽摆幅”变体如何缓解这种折衷。随后，在“应用与跨学科联系”一节中，我们将看到这项基本技术如何被应用于构建[高增益放大器](@entry_id:274020)、设计卓越的运算放大器、[稳定电压基准](@entry_id:267453)，乃至其理论上的优雅如何转化为芯片版图的物理几何结构。

## 原理与机制

在我们理解电子世界的旅程中，我们常常需要一种非常稳定的东西：一个无论连接到什么负载都能提供恒定电流的源。想象一根花园水管，无论它是向开阔的空中喷水，还是试图将水推过一个狭窄的喷嘴，它每分钟都能精确地输送一加仑的水。在电子学中，这就是**电流源**的工作，它是几乎所有模拟电路（从放大器到[数模转换器](@entry_id:267281)）的基本构建模块。

一个简单的方法是使用单个晶体管。我们可以将其栅极电压设置为一个固定值，并期望它能提供稳定的电流。但自然是微妙的。流过一个真实晶体管，例如金属氧化物半导体[场效应晶体管](@entry_id:1124930)（MOSFET），的电流并非完全恒定。它对两端的电压有轻微、几乎难以察觉的依赖性。这种现象被称为**[沟道长度调制](@entry_id:264103)**，有点像我们的花园水管，如果喷嘴处的[压力下降](@entry_id:151380)，它会多流出一点水。对于双极结型晶体管（BJT），类似的现象称为**厄利效应** 。我们用一个名为**[输出电阻](@entry_id:276800)**的参数来量化这种不完美性，表示为 $r_o$。一个完美的电流源将具有无限大的[输出电阻](@entry_id:276800)；无论输出电压如何变化，它都能抵抗任何电流的变化。我们简单的晶体管，其有限的 $r_o$，是一个好的开始，但对于高精度应用，我们需要做得更好得多。

### 级联的屏蔽技巧

我们如何对抗这种恼人的沟道长度调制？我们如何让我们的电流源表现得好像其[输出电阻](@entry_id:276800)近乎无限大？答案在于一个极其优雅且强大的思想：**级联**（cascode）配置。

这个想法很简单：我们在我们原来的定义电流的晶体管之上再堆叠一个相同的晶体管。我们称底部的为 $M_1$，顶部的为 $M_2$。输出现在从堆栈的顶部，即 $M_2$ 的漏极获取。乍一看，这似乎只是使事情复杂化了。但顶部的晶体管 $M_2$ 扮演着一个深刻的角色：它充当了一个电压**屏障**。

可以这样想。底部晶体管 $M_1$ 的工作是设定电流。当其两端电压 $V_{DS1}$ 保持完全稳定时，它能最好地完成这项工作。顶部晶体管 $M_2$ 的工作是吸收来自输出端的所有电压波动，并阻止它们到达 $M_1$。想象一下 $M_2$ 是一名警惕的卫兵，站在混乱的外部世界（变化的输出电压）和 $M_1$ 安静、稳定的圣殿之间。

当 $M_2$ 漏极的输出电压发生变化时，$M_2$ 会调整自身的[压降](@entry_id:199916)来补偿。它利用自身的特性来使其源极（也是 $M_1$ 的漏极）的电压保持非常稳定。由于 $M_1$ 两端的电压现在被屏蔽于外部世界，其电流（之前易受[沟道长度调制](@entry_id:264103)影响）变得异常恒定。级联电路并没有消除沟道长度调制；它只是通过稳定主晶体管周围的条件使其变得无害。

### 深入探究：电阻倍增的魔力

这种屏蔽效应可以用数学之美来描述。为了看到改进有多么显著，我们可以使用[小信号模型](@entry_id:270703)，它告诉我们电路对微小变化的响应。对于单个晶体管，[输出电阻](@entry_id:276800)就是其自身的本征电阻 $r_{o1}$。

现在考虑级联电路。我们从顶部晶体管 $M_2$ 的漏极向里看。让我们追踪一个微小变化的路径。输出端的任何电压变化不仅要与 $M_2$ 自身的输出电阻 $r_{o2}$ 抗衡，还要与其有源特性抗衡。顶部晶体管 $M_2$ 会作用以抵抗其源极的变化。这种“反击”正是其[跨导](@entry_id:274251) $g_{m2}$ 的本质。

详细的分析（如  中所示）揭示了一个惊人的结果。这个双晶体管堆栈的总输出电阻不仅仅是各个电阻之和。它大约是：

$R_{out} \approx g_{m2} r_{o1} r_{o2}$

让我们停下来欣赏一下。$g_m r_o$ 这一项是单个晶体管的本征[电压增益](@entry_id:266814)，这个数值通常在20到100的范围内。级联配置将底部晶体管 $r_{o1}$ 的电阻乘以顶部晶体管 $g_{m2}r_{o2}$ 的整个[本征增益](@entry_id:1133298)！我们将一个不大的电阻放大了一个巨大的倍数。这种“电阻倍增”是级联电路强大功能的秘密所在。如果一个简单的[电流镜](@entry_id:264819)的输出电阻是 $50 \, \text{k}\Omega$，那么一个级联版本的[输出电阻](@entry_id:276800)可以轻松超过 $5 \, \text{M}\Omega$，这是一百倍的改进  。这正是那种让电路设计成为一门迷人艺术的巧妙技巧。

### 完美的代价：电压裕度

正如在物理学和工程学中常见的那样，没有免费的午餐。输出电阻的惊人增加是有代价的：**电压顺从性**，或者我们常说的**电压裕度**。

要使晶体管作为电流源正常工作，它必须处于其“饱和”区。这要求其两端有特定的最小[压降](@entry_id:199916)，对于MOSFET，称为**过驱动电压** $V_{ov}$；对于BJT，称为**饱和电压** $V_{CE(sat)}$。单晶体管电流源只需要一个这样的[压降](@entry_id:199916)。但我们的级联电路有两个串联堆叠的晶体管。为了让整个堆栈正常工作，我们必须提供足够的总电压来满足*两个*晶体管的最低要求 。

在最低限度下，级联堆栈两端所需的总电压是每个晶体管最小值的总和，约为 $2V_{ov}$。这意味着我们电流源的输出电压不能低于这个值。这个“损失”的电压范围减少了其所在电路的工作窗口，或称“摆幅”。在一个电池电压不断缩小、低功耗电子产品日益普及的世界里，每一伏特的零头都很重要。高[输出电阻](@entry_id:276800)和可用电压裕度之间的这种权衡是模[拟设](@entry_id:184384)计中的一个核心挑战。

### 设计更好的折衷方案：宽摆幅级联

这就把我们带到了故事的下一章。工程师们面对这种权衡，提出了一个简单的问题：我们能做得更好吗？我们能否在不付出如此高的电压裕度代价的情况下，获得级联电路宏伟的[输出电阻](@entry_id:276800)？答案，源于独创性，便是**宽摆幅级联**。

简单的“自偏置”级联电路的问题在于其偏置方案效率低下。在这种设计中，级联晶体管的栅极电压通常由一个简单的二[极管](@entry_id:909477)连接堆栈产生，这迫使中间节点——即底部晶体管的漏极——的电压为一个完整的 $V_{GS} = V_{th} + V_{ov}$。但为了保持底部晶体管饱和，它只需要一个 $V_{ov}$ 的最小电压。额外的阈值电压 $V_{th}$ 是被浪费的裕度 。

宽摆幅级联电路采用了一种更智能的偏置方案。它使用一个专门的电路为级联栅极产生一个精确的偏置电压。这个电压被精心设计来完美地完成一件事：将底部晶体管漏极的电压保持在饱和所需的绝对最小值，即 $V_{ov}$ 。不多也不少。

结果是，整个堆栈所需的最小输出电压恰好变为 $2V_{ov}$，这是理论上的下限。与标准级联电路所需的 $V_{th} + 2V_{ov}$ 相比，我们收回了整整一个阈值电压的裕度！。这使得设计师能够构建可以在更低电源电压下工作的高性能电路，这是现代电子学中的一个关键优势。

### 微妙的现实与意想不到的美

级联电路的优雅甚至延伸到其更微妙、更现实的行为中。例如，在一个构建在共同衬底上的NMOS级联电路中，顶部晶体管的源极端“悬浮”在某个高于地的电压上。这会产生一个非零的源极-体电压，从而触发**体效应**，微弱地增加了晶体管的阈值电压。虽然在电流镜的参考侧这是一个静态且可预测的效应，但在输出侧它可能更有害。输出电压的微小波动可以反馈到中间节点，调制体效应并略微降低电流镜的精度 。这提醒我们，在现实世界中，每个组件都以微妙的方式相互关联。

但也许级联电路最美妙、最令人惊讶的特性出现在高频时。人们可能认为晶体管及其[寄生电容](@entry_id:270891)就是电阻和电容而已。但是当它们以级联方式排列时，它们会共同创造出完全意想不到的东西。

想象一个在输出端快速上升的电压。这个变化的电压通过顶部晶体管的栅-漏[寄生电容](@entry_id:270891)推动一个微小的电流。这个电流被注入到两个晶体管之间非常敏感的内部节点。顶部晶体管看到其源极电压上升，部分地被“关断”，主动地抵抗来自输出的电流流动。这种对电流*变化*的抵抗正是**电感**的定义。

令人惊讶的是，在高频下，级联电流源——一个由硅制成，没有任何线圈的电路——开始表现得像一个电感！这可能导致谐振，使输出阻抗在特定频率上达到峰值，这种现象被称为“电感峰化” 。这是一个深刻的例证，说明了简单的元件在巧妙的结构中组合时，可以产生复杂和涌现的行为。正是在发现这些隐藏的联系和意想不到的转变中，我们找到了物理学在工程世界中发挥作用的真正美丽和统一。


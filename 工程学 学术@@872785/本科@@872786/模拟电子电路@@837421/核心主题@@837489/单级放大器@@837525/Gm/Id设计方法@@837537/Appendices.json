{"hands_on_practices": [{"introduction": "本练习将重点介绍$g_m/I_D$方法中最基本的一项技能：确定单个晶体管的物理尺寸。我们将从所需跨导($g_m$)和功耗预算($I_D$)等顶层规格出发，计算出必要的沟道宽度($W$)，以将晶体管设置在期望的工作点。此练习[@problem_id:1308221]为设计更复杂的电路奠定了基础。", "problem": "一位模拟电路设计师的任务是使用 NMOS 晶体管设计一个共源放大器。该晶体管采用一种专门的低功耗工艺技术制造。对于该工艺，大量的特性分析表明，对于工作在饱和区的晶体管，其跨导效率 ($g_m/I_D$) 与定义为 $I_{norm} = I_D / (W/L)$ 的归一化电流密度之间的关系，可以通过以下方程精确建模：\n$$\n\\left(\\frac{g_m}{I_D}\\right)^2 = \\frac{2 k'_n}{I_{norm}}\n$$\n其中 $k'_n$ 是工艺跨导参数，$W$ 是晶体管沟道宽度，$L$ 是沟道长度。\n\n该放大器级的设计指标如下：\n- 所需的跨导必须为 $g_m = 1.25 \\text{ mS}$。\n- 由功率预算设定的静态漏极电流为 $I_D = 250.0 \\text{ µA}$。\n- 工艺跨导参数为 $k'_n = 320.0 \\text{ µA/V}^2$。\n- 为了获得理想的输出电阻，晶体管的制造沟道长度必须为 $L = 500 \\text{ nm}$。\n\n你的任务是计算满足所有给定设计约束的 NMOS 晶体管所需的物理沟道宽度 $W$。请以微米 (µm) 为单位表示最终答案，并四舍五入到三位有效数字。", "solution": "给定的跨导效率与归一化电流密度之间的关系式为\n$$\n\\left(\\frac{g_m}{I_D}\\right)^{2}=\\frac{2k'_{n}}{I_{\\text{norm}}}=\\frac{2k'_{n}}{I_{D}/(W/L)}=\\frac{2k'_{n}}{I_{D}}\\frac{W}{L}\n$$\n求解 $W$ 可得\n$$\nW=\\left(\\frac{g_m}{I_D}\\right)^{2}\\frac{I_{D}L}{2k'_{n}}=\\frac{g_m^{2}L}{2k'_{n}I_{D}}\n$$\n使用一致的国际单位制（SI）单位代入指定的值：$g_m = 1.25 \\times 10^{-3} \\text{ S}$，$I_D = 2.50 \\times 10^{-4} \\text{ A}$，$k'_n = 3.20 \\times 10^{-4} \\text{ A/V}^2$，以及 $L = 5.00 \\times 10^{-7} \\text{ m}$。则\n$$\nW=\\frac{(1.25 \\times 10^{-3})^2 \\times (5.00 \\times 10^{-7})}{2 \\times (3.20 \\times 10^{-4}) \\times (2.50 \\times 10^{-4})} = \\frac{1.5625 \\times 10^{-6} \\times 5.00 \\times 10^{-7}}{1.60 \\times 10^{-7}} = \\frac{7.8125 \\times 10^{-13}}{1.60 \\times 10^{-7}} = 4.8828125 \\times 10^{-6} \\text{ m}\n$$\n转换为微米单位可得 $W = 4.8828125 \\text{ µm}$，保留三位有效数字为 $4.88 \\text{ µm}$。", "answer": "$$\\boxed{4.88}$$", "id": "1308221"}, {"introduction": "在单晶体管尺寸设计的基础上，本练习将探讨电流镜的设计，这是模拟电路中无处不在的基本构建模块。我们将看到，如何通过为两个晶体管强制设定相同的$g_m/I_D$值来确保它们共享相同的过驱动电压，这是实现精确电流缩放的关键。此练习[@problem_id:1308240]展示了该方法如何简化多晶体管电路的设计和匹配过程。", "problem": "一位模拟电路设计师正在创建一个基本构建模块：一个使用两个n沟道金属氧化物半导体场效应晶体管（MOSFETs），M1和M2的简单电流镜。M1是参考晶体管，M2是输出晶体管。两个晶体管的栅极端连接在一起，它们的源极端都连接到地。参考晶体管M1采用二极管连接方式，其栅极与漏极相连。\n\n设计规格如下：\n- 参考电流 $I_{REF} = 25.0 \\text{ µA}$ 流过M1。\n- 该电流镜必须从M2的漏极产生 $I_{OUT} = 100.0 \\text{ µA}$ 的输出电流。\n- 两个晶体管都必须工作在饱和区，并且其跨导效率 $g_m/I_D$ 被设计为恰好 $10.0 \\text{ V}^{-1}$。\n- 制造工艺为NMOS器件提供的工艺跨导参数为 $k'_n = \\mu_n C_{ox} = 200.0 \\text{ µA/V}^2$。\n- 为确保良好的匹配性，两个晶体管都采用固定的沟道长度 $L = 0.500 \\text{ µm}$ 制造。\n- 在本次计算中，您可以忽略沟道长度调制效应（即，假设晶体管的输出电阻为无穷大）。\n\n计算晶体管M1所需的沟道宽度 $W_1$ 和晶体管M2所需的沟道宽度 $W_2$。将您的答案 $W_1$ 和 $W_2$ 以微米（µm）为单位表示，并四舍五入到三位有效数字。以有序对 $(W_1, W_2)$ 的形式给出您的最终答案。", "solution": "对于忽略了沟道长度调制的长沟道饱和区NMOS，其漏极电流由下式给出\n$$\nI_{D}=\\frac{1}{2}k'_{n}\\frac{W}{L}\\left(V_{GS}-V_{T}\\right)^{2}=\\frac{1}{2}k'_{n}\\frac{W}{L}V_{\\text{ov}}^{2},\n$$\n其跨导为\n$$\ng_{m}=\\frac{\\partial I_{D}}{\\partial V_{GS}}=k'_{n}\\frac{W}{L}V_{\\text{ov}}=\\frac{2I_{D}}{V_{\\text{ov}}}\n$$\n因此，跨导效率为\n$$\n\\frac{g_{m}}{I_{D}}=\\frac{2}{V_{\\text{ov}}}\\;\\Rightarrow\\;V_{\\text{ov}}=\\frac{2}{g_{m}/I_{D}}\n$$\n根据指定的 $g_m/I_D = 10.0 \\text{ V}^{-1}$，两个晶体管的过驱动电压均为\n$$\nV_{\\text{ov}}=\\frac{2}{10.0}=0.200 \\text{ V}\n$$\n对电流方程求解 $W/L$，\n$$\n\\frac{W}{L}=\\frac{2I_{D}}{k'_{n}V_{\\text{ov}}^{2}}\n$$\n当 $k'_{n}=200.0 \\text{ µA/V}^{2}$，$V_{\\text{ov}}^{2}=(0.200)^2 = 0.040 \\text{ V}^2$ 且 $L=0.500 \\text{ µm}$ 时，我们得到对于M1（$I_{D}=I_{\\text{REF}}=25.0 \\text{ µA}$）\n$$\n\\frac{W_{1}}{L}=\\frac{2\\times 25.0}{200.0\\times 0.040}= \\frac{50.0}{8.00}=6.25,\\quad\nW_{1}=L\\left(\\frac{W_{1}}{L}\\right)=0.500\\times 6.25=3.125 \\text{ µm}\n$$\n对于M2（$I_{D}=I_{\\text{OUT}}=100.0 \\text{ µA}$），\n$$\n\\frac{W_{2}}{L}=\\frac{2\\times 100.0}{200.0\\times 0.040}=\\frac{200.0}{8.00}=25.0,\\quad\nW_{2}=L\\left(\\frac{W_{2}}{L}\\right)=0.500\\times 25.0=12.5 \\text{ µm}\n$$\n四舍五入到三位有效数字，得到 $W_{1}=3.13 \\text{ µm}$ 和 $W_{2}=12.5 \\text{ µm}$。作为一致性检查，$W_{2}/W_{1}=4$，这与在相同 $V_{\\text{ov}}$ 下的电流比 $I_{\\text{OUT}}/I_{\\text{REF}}=4$ 相匹配。", "answer": "$$\\boxed{\\begin{pmatrix}3.13  12.5\\end{pmatrix}}$$", "id": "1308240"}, {"introduction": "最后的这个练习将从简单的尺寸确定转向使用$g_m/I_D$框架进行系统级优化。我们将分析一个共源共栅放大器，其中不同的晶体管具有相互冲突的设计需求，并评估电压增益和输出电压摆幅之间的设计权衡。此问题[@problem_id:1308234]突显了$g_m/I_D$方法在做出明智的设计决策以同时满足多个性能指标方面的真正威力。", "problem": "一位模拟电路设计师的任务是设计一个高性能NMOS共源共栅放大器。该放大器由两个相同的NMOS晶体管构成，一个输入晶体管 $M_1$ 和一个共源共栅晶体管 $M_2$。该设计必须采用具有以下参数的工艺实现：电子迁移率乘以氧化层电容 $\\mu_n C_{ox} = 200 \\text{ µA/V}^2$，两个晶体管的阈值电压均为 $V_{THn} = 0.4 \\text{ V}$，沟道长度调制参数均为 $\\lambda_n = 0.2 \\text{ V}^{-1}$。\n\n该放大器的工作电源电压为 $V_{DD} = 1.8 \\text{ V}$，并以 $I_D = 100 \\text{ µA}$ 的漏极电流进行偏置。共源共栅晶体管 $M_2$ 的栅极连接到一个稳定的直流偏置电压 $V_{bias} = 1.2 \\text{ V}$。\n\n设计必须满足两项关键性能要求：\n1.  小信号直流电压增益 $|A_v|$ 必须至少为 $650 \\text{ V/V}$。\n2.  输出电压摆幅必须至少为 $1.0 \\text{ V}$，其定义为能使$M_1$和$M_2$都保持在饱和区的输出电压范围。\n\n设计师正在考虑基于输入晶体管$M_1$和共源共栅晶体管$M_2$的跨导效率 ($g_m/I_D$) 的四种可能的设计选择。参数对 $((g_m/I_D)_1, (g_m/I_D)_2)$ 的选择如下所列。\n\n- A: $(5.0 \\text{ V}^{-1}, 5.0 \\text{ V}^{-1})$\n- B: $(10.0 \\text{ V}^{-1}, 3.34 \\text{ V}^{-1})$\n- C: $(3.34 \\text{ V}^{-1}, 10.0 \\text{ V}^{-1})$\n- D: $(2.0 \\text{ V}^{-1}, 15.0 \\text{ V}^{-1})$\n\n从以下设计选择中，选出满足所有规格的一项。如果有多个选项有效，选择能为输入晶体管$M_1$带来更高跨导$g_{m1}$的那一项。", "solution": "问题要求我们评估一个共源共栅放大器的四种设计选择，并选出满足所有规格要求的一项，决胜规则是基于输入晶体管的跨导 $g_{m1}$。我们将 $(g_m/I_D)_1$ 记为 $x$，将 $(g_m/I_D)_2$ 记为 $y$。我们需要根据给定的要求推导出对 $x$ 和 $y$ 的约束条件。\n\n**1. 增益约束**\n\n共源共栅放大器的小信号直流电压增益由 $A_v = -g_{m1} R_{out}$ 给出，其中 $R_{out}$ 是共源共栅级的输出电阻。输出电阻约等于 $R_{out} \\approx g_{m2}r_{o2}r_{o1}$，其中 $g_m$ 是跨导，$r_o$ 是晶体管的本征输出电阻。\n\n首先，计算本征输出电阻 $r_o$：\n$r_o = \\frac{1}{\\lambda_n I_D}$。因为两个晶体管的 $\\lambda_n = 0.2 \\text{ V}^{-1}$ 且 $I_D = 100 \\text{ µA} = 10^{-4} \\text{ A}$，所以 $r_{o1} = r_{o2} = r_o$。\n$r_o = \\frac{1}{0.2 \\text{ V}^{-1} \\times 10^{-4} \\text{ A}} = 50 \\times 10^3 \\Omega = 50 \\text{ k}\\Omega$。\n\n增益的幅度为 $|A_v| \\approx g_{m1} g_{m2} r_{o1} r_{o2}$。要求是 $|A_v| \\ge 650$。\n$g_{m1} g_{m2} (50 \\times 10^3 \\Omega)^2 \\ge 650$\n$g_{m1} g_{m2} (2.5 \\times 10^9 \\Omega^2) \\ge 650$\n$g_{m1} g_{m2} \\ge \\frac{650}{2.5 \\times 10^9} = 2.6 \\times 10^{-7} \\text{ (A/V)}^2$。\n\n我们可以用 $g_m/I_D$ 来表示 $g_m$：$g_m = (g_m/I_D) \\times I_D$。\n$g_{m1} = x \\cdot I_D = x \\cdot 10^{-4} \\text{ A}$\n$g_{m2} = y \\cdot I_D = y \\cdot 10^{-4} \\text{ A}$\n\n将这些代入增益不等式中：\n$(x \\cdot 10^{-4})(y \\cdot 10^{-4}) \\ge 2.6 \\times 10^{-7}$\n$xy \\cdot 10^{-8} \\ge 2.6 \\times 10^{-7}$\n$xy \\ge 26$。这是我们的第一个约束条件。\n\n**2. 摆幅和偏置约束**\n\n输出电压摆幅受限于使两个晶体管都保持在饱和区所需的条件。\n最小输出电压 $V_{out,min}$ 由两个晶体管的过驱动电压之和决定。为使两个晶体管都处于饱和区，$M_1$ 的漏极电压必须至少为 $V_{OV1}$，$M_2$ 的漏源电压必须至少为 $V_{OV2}$。这导致：\n$V_{out,min} = V_{OV1} + V_{OV2}$。\n\n当由理想电流源作为负载时，最大输出电压 $V_{out,max}$ 为 $V_{DD}$。\n输出电压摆幅为 $V_{swing} = V_{out,max} - V_{out,min} = V_{DD} - (V_{OV1} + V_{OV2})$。\n要求是 $V_{swing} \\ge 1.0 \\text{ V}$。\n$1.8 \\text{ V} - (V_{OV1} + V_{OV2}) \\ge 1.0 \\text{ V}$\n$V_{OV1} + V_{OV2} \\le 0.8 \\text{ V}$。\n\n过驱动电压 $V_{OV}$ 与 $g_m/I_D$ 的关系为 $V_{OV} = \\frac{2}{g_m/I_D}$。\n所以，$\\frac{2}{x} + \\frac{2}{y} \\le 0.8 \\text{ V}$，化简为 $\\frac{1}{x} + \\frac{1}{y} \\le 0.4$。这是我们的第二个约束条件。\n\n还有一个偏置约束。为了使共源共栅结构正常工作，中间节点电压 $V_X$（$M_1$的漏极，$M_2$的源极）必须在一个有效范围内。$M_1$ 必须处于饱和区，所以其漏极电压必须大于其栅源电压与阈值电压之差，即 $V_{DS1} > V_{GS1} - V_{THn} = V_{OV1}$。因此，$V_X \\ge V_{OV1}$。此外，$M_2$ 必须有足以使其导通的栅源电压，$V_{GS2} > V_{THn}$。$V_{GS2} = V_{bias} - V_X$。所以，$V_{bias} - V_X > V_{THn}$，这意味着 $V_X  V_{bias} - V_{THn}$。结合这些条件，我们需要 $V_{OV1} \\le V_X  V_{bias} - V_{THn}$。存在有效偏置点的一个必要条件是 $V_{OV1}  V_{bias} - V_{THn}$。\n$V_{bias} - V_{THn} = 1.2 \\text{ V} - 0.4 \\text{ V} = 0.8 \\text{ V}$。\n所以，$V_{OV1}  0.8 \\text{ V}$，这意味着 $\\frac{2}{x}  0.8 \\implies x > \\frac{2}{0.8} = 2.5$。这是我们的第三个约束条件。\n\n对 $((g_m/I_D)_1, (g_m/I_D)_2) = (x, y)$ 的约束条件总结如下：\n1.  $xy \\ge 26$\n2.  $\\frac{1}{x} + \\frac{1}{y} \\le 0.4$\n3.  $x > 2.5$\n\n**3. 评估选项**\n\n让我们根据这三个约束条件来检查每个选项。\n\n- **A: $(x, y) = (5.0, 5.0)$**\n  1. 增益: $xy = 5.0 \\times 5.0 = 25$。这小于26。**不满足。**\n- **B: $(x, y) = (10.0, 3.34)$**\n  1. 增益: $xy = 10.0 \\times 3.34 = 33.4$。这大于26。**满足。**\n  2. 摆幅/偏置: $\\frac{1}{10.0} + \\frac{1}{3.34} = 0.1 + 0.2994... = 0.3994...$。这小于或等于0.4。**满足。**\n  3. M1偏置: $x = 10.0$。这大于2.5。**满足。**\n这个选项是一个有效的设计。\n- **C: $(x, y) = (3.34, 10.0)$**\n  1. 增益: $xy = 3.34 \\times 10.0 = 33.4$。这大于26。**满足。**\n  2. 摆幅/偏置: $\\frac{1}{3.34} + \\frac{1}{10.0} = 0.2994... + 0.1 = 0.3994...$。这小于或等于0.4。**满足。**\n  3. M1偏置: $x = 3.34$。这大于2.5。**满足。**\n这个选项也是一个有效的设计。\n- **D: $(x, y) = (2.0, 15.0)$**\n  1. 增益: $xy = 2.0 \\times 15.0 = 30$。这大于26。满足。\n  2. 摆幅/偏置: $\\frac{1}{2.0} + \\frac{1}{15.0} = 0.5 + 0.066... = 0.566...$。这大于0.4。**不满足。**\n  3. M1偏置: $x = 2.0$。这不大于2.5。**不满足。**\n该选项在两项上不满足要求。\n\n**4. 决胜规则**\n\n选项B和C都满足主要规格。我们现在必须应用决胜规则：“选择能为输入晶体管$M_1$带来更高跨导$g_{m1}$的那一项。”\n由于 $g_{m1} = (g_m/I_D)_1 \\times I_D = x \\cdot I_D$，更高的 $g_{m1}$ 对应于更大的 $x$ 值。\n- 对于选项B，$x = (g_m/I_D)_1 = 10.0 \\text{ V}^{-1}$。\n- 对于选项C，$x = (g_m/I_D)_1 = 3.34 \\text{ V}^{-1}$。\n\n比较两者，选项B为输入晶体管$M_1$提供了明显更高的跨导。因此，根据问题的标准，选项B是正确的选择。", "answer": "$$\\boxed{B}$$", "id": "1308234"}]}
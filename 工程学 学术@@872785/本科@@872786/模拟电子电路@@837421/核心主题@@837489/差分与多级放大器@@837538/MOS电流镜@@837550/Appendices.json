{"hands_on_practices": [{"introduction": "掌握MOS电流镜的第一步是理解参考电流如何设定关键的控制电压。这项练习将侧重于计算由参考侧建立的公共栅源电压 $V_{GS}$，这是分析任何电流镜电路所需的一项基本技能。通过这个计算，你将深入理解电流镜的核心工作机制。[@problem_id:1317779]", "problem": "在集成电路的偏置网络设计中，使用一个简单电流镜来提供一个稳定的参考。该电流镜由两个相同的N沟道金属氧化物半导体（NMOS）晶体管 M1 和 M2 组成。晶体管 M1 是二极管连接的，意味着其栅极和漏极端子直接连接在一起。这个公共节点由一个精密参考电流源供电。晶体管 M2 的栅极连接到 M1 的栅极，两个晶体管的源极都接地。\n\n一个 $I_{REF} = 150 \\, \\mu\\text{A}$ 的参考电流被注入 M1 的漏极。这两个晶体管完全匹配，其工艺参数为：工艺跨导参数 $k'_n = 200 \\, \\mu\\text{A/V}^2$，阈值电压 $V_{th} = 0.70 \\, \\text{V}$，宽高比 $(W/L) = 8$。在此分析中，假设两个晶体管都工作在饱和区，并且可以忽略沟道长度调制效应（即，假设 $\\lambda = 0$）。\n\n计算为两个晶体管建立的公共栅源电压 $V_{GS}$。答案以伏特（V）为单位，并四舍五入到三位有效数字。", "solution": "因为 M1 是二极管连接的，所以 $V_{DS1} = V_{GS}$，并且在 $V_{th} \\ge 0$ 的情况下，饱和条件 $V_{DS} \\ge V_{GS} - V_{th}$ 得到满足。忽略沟道长度调制效应，NMOS 饱和电流方程为\n$$\nI_{D} = \\frac{1}{2} k'_{n} \\frac{W}{L} (V_{GS} - V_{th})^{2}.\n$$\n将流经 M1 的参考电流 $I_{REF}$ 设为 $I_{D1} = I_{REF}$，然后求解 $V_{GS}$：\n$$\nV_{GS} - V_{th} = \\sqrt{\\frac{2 I_{REF}}{k'_{n} (W/L)}}, \\quad \\Rightarrow \\quad V_{GS} = V_{th} + \\sqrt{\\frac{2 I_{REF}}{k'_{n} (W/L)}}.\n$$\n代入给定值：\n$$\nk'_{n} \\left(\\frac{W}{L}\\right) = 200 \\times 10^{-6} \\cdot 8 = 1.6 \\times 10^{-3} \\text{ A/V}^{2},\n$$\n$$\n\\frac{2 I_{REF}}{k'_{n} (W/L)} = \\frac{2 \\cdot 150 \\times 10^{-6}}{1.6 \\times 10^{-3}} = 0.1875 \\text{ V}^{2},\n$$\n$$\nV_{GS} = 0.70 + \\sqrt{0.1875} = 0.70 + \\sqrt{\\frac{3}{16}} = 0.70 + \\frac{\\sqrt{3}}{4} \\approx 1.1330127.\n$$\n四舍五入到三位有效数字，得到 $V_{GS} \\approx 1.13 \\, \\text{V}$。由于 M2 共享相同的栅极和源极节点，因此它建立的 $V_{GS}$ 也相同。", "answer": "$$\\boxed{1.13}$$", "id": "1317779"}, {"introduction": "理想电流镜的输出电流仅通过晶体管的宽长比进行缩放，但真实世界中的效应使这一关系变得复杂。本练习要求你在考虑沟道长度调制效应的情况下，设计一个特定的电流比。沟道长度调制是一种重要的非理想效应，它会导致输出电流随输出电压而变化，是精确设计中必须考虑的因素。[@problem_id:1317760]", "problem": "一位模拟电路设计师正在使用两个N沟道金属氧化物半导体（NMOS）晶体管 $M_1$ 和 $M_2$ 实现一个基本电流镜，它们由相同的工艺制造。在电流镜配置中，$M_1$ 是二极管连接的（其栅极和漏极连接在一起），并由一个参考电流 $I_{REF}$ 供电。$M_1$ 和 $M_2$ 的栅极端子连接到同一个节点，它们的源极都接地。流过 $M_2$ 漏极的电流是输出电流 $I_{OUT}$。\n\n设计规格和工艺参数如下：\n- 参考电流, $I_{REF} = 100 \\, \\mu\\text{A}$\n- 工艺跨导参数, $k'_{n} = 200 \\, \\mu\\text{A/V}^2$\n- 阈值电压, $V_{th} = 0.5 \\, \\text{V}$\n- 沟道长度调制参数, $\\lambda = 0.05 \\, \\text{V}^{-1}$\n- 参考晶体管 $M_1$ 的宽高比, $(W/L)_1 = 10$\n- 输出晶体管 $M_2$ 的漏极连接到一个维持恒定电压 $V_{D2} = 1.8 \\, \\text{V}$ 的负载上。\n\n设计目标是使输出电流为参考电流的一半，即 $I_{OUT} = 0.5 I_{REF}$。假设两个晶体管都工作在饱和区，计算晶体管 $M_2$ 所需的宽高比 $(W/L)_2$。将你的答案表示为一个无量纲数，并四舍五入到三位有效数字。", "solution": "本题要求我们在考虑沟道长度调制效应的情况下，计算NMOS电流镜中输出晶体管 $M_2$ 的宽高比 $(W/L)_2$。\n\n首先，我们写出工作在饱和区的NMOS晶体管的漏极电流方程，包括沟道长度调制效应：\n$$I_D = \\frac{1}{2} k'_{n} \\frac{W}{L} (V_{GS} - V_{th})^2 (1 + \\lambda V_{DS})$$\n栅源电压 $V_{GS}$ 对两个晶体管是共用的，并由参考晶体管 $M_1$ 设定。对于晶体管 $M_1$，漏极电流为 $I_{D1} = I_{REF}$，并且由于它是二极管连接的，其漏源电压等于其栅源电压，即 $V_{DS1} = V_{GS}$。\n\n因此，$I_{REF}$ 的完整方程为：\n$$I_{REF} = \\frac{1}{2} k'_{n} (W/L)_1 (V_{GS} - V_{th})^2 (1 + \\lambda V_{GS})$$\n直接求解该方程以得到 $V_{GS}$ 将涉及解一个三次多项式。在入门分析中，一个标准且足够精确的方法是首先忽略 $(1 + \\lambda V_{GS})$ 项来计算 $V_{GS}$ 的近似值，因为 $\\lambda$ 通常很小。\n\n所以，我们首先使用简化方程找到一个近似的 $V_{GS}$：\n$$I_{REF} \\approx \\frac{1}{2} k'_{n} (W/L)_1 (V_{GS} - V_{th})^2$$\n代入给定值：\n$$100 \\times 10^{-6} \\text{ A} = \\frac{1}{2} (200 \\times 10^{-6} \\text{ A/V}^2) (10) (V_{GS} - 0.5 \\text{ V})^2$$\n$$100 \\times 10^{-6} = (1000 \\times 10^{-6}) (V_{GS} - 0.5)^2$$\n$$(V_{GS} - 0.5)^2 = \\frac{100 \\times 10^{-6}}{1000 \\times 10^{-6}} = 0.1$$\n对两边取平方根（并选择正根，因为晶体管要导通，$V_{GS}$ 必须大于 $V_{th}$）：\n$$V_{GS} - 0.5 = \\sqrt{0.1} \\approx 0.31623 \\text{ V}$$\n$$V_{GS} \\approx 0.5 + 0.31623 = 0.81623 \\text{ V}$$\n我们应该检查两个晶体管是否都处于饱和区。过驱动电压为 $V_{OV} = V_{GS} - V_{th} \\approx 0.31623$ V。对于 $M_1$，$V_{DS1} = V_{GS} \\approx 0.81623 \\text{ V}$。由于 $V_{DS1} > V_{OV}$，$M_1$ 处于饱和区。对于 $M_2$，$V_{DS2} = V_{D2} = 1.8 \\text{ V}$。由于 $V_{DS2} > V_{OV}$，$M_2$ 也处于饱和区。\n\n现在我们可以使用这个计算出的 $V_{GS}$ 值，为两个晶体管写出包含沟道长度调制项的完整电流方程。\n对于 $M_1$：\n$$I_{REF} = \\frac{1}{2} k'_{n} (W/L)_1 (V_{GS} - V_{th})^2 (1 + \\lambda V_{GS})$$\n对于 $M_2$，漏极电流是 $I_{OUT}$，漏源电压是 $V_{DS2} = V_{D2} = 1.8 \\text{ V}$：\n$$I_{OUT} = \\frac{1}{2} k'_{n} (W/L)_2 (V_{GS} - V_{th})^2 (1 + \\lambda V_{D2})$$\n为了找到两个电流及其宽高比之间的关系，我们取 $I_{OUT}$ 与 $I_{REF}$ 的比值：\n$$\\frac{I_{OUT}}{I_{REF}} = \\frac{\\frac{1}{2} k'_{n} (W/L)_2 (V_{GS} - V_{th})^2 (1 + \\lambda V_{D2})}{\\frac{1}{2} k'_{n} (W/L)_1 (V_{GS} - V_{th})^2 (1 + \\lambda V_{GS})}$$\n公共项 $\\frac{1}{2} k'_{n} (V_{GS} - V_{th})^2$ 消去，剩下：\n$$\\frac{I_{OUT}}{I_{REF}} = \\frac{(W/L)_2}{(W/L)_1} \\frac{1 + \\lambda V_{D2}}{1 + \\lambda V_{GS}}$$\n我们需要求解 $(W/L)_2$：\n$$(W/L)_2 = (W/L)_1 \\left( \\frac{I_{OUT}}{I_{REF}} \\right) \\left( \\frac{1 + \\lambda V_{GS}}{1 + \\lambda V_{D2}} \\right)$$\n现在我们将已知值代入此表达式：$(W/L)_1 = 10$，$I_{OUT}/I_{REF} = 0.5$，$\\lambda = 0.05 \\text{ V}^{-1}$，$V_{GS} \\approx 0.81623 \\text{ V}$，以及 $V_{D2} = 1.8 \\text{ V}$。\n$$(W/L)_2 = 10 \\times 0.5 \\times \\frac{1 + (0.05)(0.81623)}{1 + (0.05)(1.8)}$$\n$$(W/L)_2 = 5 \\times \\frac{1 + 0.0408115}{1 + 0.09}$$\n$$(W/L)_2 = 5 \\times \\frac{1.0408115}{1.09}$$\n$$(W/L)_2 = 5 \\times 0.9548729...$$\n$$(W/L)_2 = 4.77436...$$\n根据题目要求，将结果四舍五入到三位有效数字：\n$$(W/L)_2 \\approx 4.77$$", "answer": "$$\\boxed{4.77}$$", "id": "1317760"}, {"introduction": "电流镜仅在有限的输出电压范围内才能正常工作，这个范围被称为其“输出顺从范围”（compliance range）。最后的这项练习将探讨当输出电压过低时会发生什么，这种情况会迫使输出晶体管脱离饱和区，进入线性区（或三极管区）。理解并确定这个工作范围的边界对于稳健的电路设计至关重要。[@problem_id:1317772]", "problem": "一个简单的电流镜电路由两个N沟道金属氧化物半导体（NMOS）晶体管构成，分别表示为$M_1$和$M_2$。两个晶体管的栅极连接在一起，它们的源极都接地。参考晶体管$M_1$的漏极连接到其栅极，该节点由参考电流$I_{REF}$供电。输出电流$I_{OUT}$从输出晶体管$M_2$的漏极引出。\n\n晶体管的特性参数如下：\n-   阈值电压：$V_{th} = 0.50 \\, \\text{V}$\n-   工艺跨导参数：$k'_n = 200 \\, \\mu\\text{A/V}^2$\n-   $M_1$的宽高比：$(W/L)_1 = 10$\n-   $M_2$的宽高比：$(W/L)_2 = 20$\n-   参考电流：$I_{REF} = 90 \\, \\mu\\text{A}$\n\n电流镜的输出连接到一个负载，该负载将$M_2$的漏极电压固定在$V_{OUT} = 0.20 \\, \\text{V}$。在此分析中，您必须假设两个晶体管的沟道长度调制效应可以忽略不计。\n\n计算输出电流$I_{OUT}$的值。答案以微安（$\\mu\\text{A}$）为单位，并四舍五入到三位有效数字。", "solution": "题目要求计算一个NMOS电流镜在输出电压指定情况下的输出电流$I_{OUT}$。我们需要确定每个晶体管的工作区域，以便使用正确的电流-电压方程。\n\n首先，我们分析参考晶体管$M_1$。$M_1$的漏极和栅极相连，这意味着其漏源电压等于其栅源电压，即$V_{DS1} = V_{GS1}$。晶体管工作在饱和区的条件是$V_{DS} \\ge V_{GS} - V_{th}$。对于$M_1$，这个条件变为$V_{GS1} \\ge V_{GS1} - V_{th}$，简化为$0 \\ge -V_{th}$。由于阈值电压$V_{th}$是正值（$0.50 \\text{ V}$），这个条件总是满足的。因此，$M_1$工作在饱和区。\n\nNMOS晶体管在饱和区的漏极电流（忽略沟道长度调制效应）由下式给出：\n$$I_D = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right) (V_{GS} - V_{th})^2$$\n对于$M_1$，其漏极电流是参考电流，$I_{D1} = I_{REF}$。我们可以用这个公式来求栅源电压$V_{GS1}$。\n$$I_{REF} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_1 (V_{GS1} - V_{th})^2$$\n重新整理方程以求解$V_{GS1}$：\n$$V_{GS1} = V_{th} + \\sqrt{\\frac{2 I_{REF}}{k'_n (W/L)_1}}$$\n代入给定值：\n$I_{REF} = 90 \\, \\mu\\text{A} = 90 \\times 10^{-6} \\text{ A}$\n$k'_n = 200 \\, \\mu\\text{A/V}^2 = 200 \\times 10^{-6} \\text{ A/V}^2$\n$(W/L)_1 = 10$\n$V_{th} = 0.50 \\text{ V}$\n$$V_{GS1} = 0.50 + \\sqrt{\\frac{2 \\times 90 \\times 10^{-6}}{200 \\times 10^{-6} \\times 10}} = 0.50 + \\sqrt{\\frac{180 \\times 10^{-6}}{2000 \\times 10^{-6}}}$$\n$$V_{GS1} = 0.50 + \\sqrt{0.09} = 0.50 + 0.30 = 0.80 \\text{ V}$$\n\n由于$M_1$和$M_2$的栅极相连，它们的栅源电压相等：$V_{GS2} = V_{GS1} = 0.80 \\text{ V}$。\n\n现在，我们来确定输出晶体管$M_2$的工作区域。我们需要比较其漏源电压$V_{DS2}$和其过驱动电压$V_{OV2} = V_{GS2} - V_{th}$。\n$V_{OV2} = 0.80 \\text{ V} - 0.50 \\text{ V} = 0.30 \\text{ V}$。\n题目中指出输出电压为$V_{OUT} = 0.20 \\text{ V}$，这对应于$M_2$的漏源电压，所以$V_{DS2} = 0.20 \\text{ V}$。\n\n$M_2$处于饱和区的条件是$V_{DS2} \\ge V_{GS2} - V_{th}$，或$V_{DS2} \\ge V_{OV2}$。\n在这里，我们有$0.20 \\text{ V}  0.30 \\text{ V}$。由于$V_{DS2}  V_{OV2}$，晶体管$M_2$不在饱和区。它工作在线性区或三极管区。\n\nNMOS晶体管在三极管区的漏极电流由下式给出：\n$$I_D = k'_n \\left(\\frac{W}{L}\\right) \\left[ (V_{GS} - V_{th})V_{DS} - \\frac{1}{2}V_{DS}^2 \\right]$$\n输出电流$I_{OUT}$是$M_2$的漏极电流，所以$I_{OUT} = I_{D2}$。我们可以使用$M_2$的已知值来计算它：\n$k'_n = 200 \\times 10^{-6} \\text{ A/V}^2$\n$(W/L)_2 = 20$\n$V_{GS2} = 0.80 \\text{ V}$\n$V_{th} = 0.50 \\text{ V}$\n$V_{DS2} = 0.20 \\text{ V}$\n$$I_{OUT} = (200 \\times 10^{-6}) \\times 20 \\times \\left[ (0.80 - 0.50)(0.20) - \\frac{1}{2}(0.20)^2 \\right]$$\n$$I_{OUT} = (4000 \\times 10^{-6}) \\times \\left[ (0.30)(0.20) - \\frac{1}{2}(0.04) \\right]$$\n$$I_{OUT} = (4.0 \\times 10^{-3}) \\times \\left[ 0.060 - 0.020 \\right]$$\n$$I_{OUT} = (4.0 \\times 10^{-3}) \\times [0.040]$$\n$$I_{OUT} = 0.160 \\times 10^{-3} \\text{ A}$$\n为了以微安（$\\mu\\text{A}$）表示答案，我们乘以$10^6$：\n$$I_{OUT} = 0.160 \\times 10^{-3} \\times 10^6 \\, \\mu\\text{A} = 160 \\, \\mu\\text{A}$$\n结果是$160 \\, \\mu\\text{A}$。题目要求答案四舍五入到三位有效数字。数字160正好有三位有效数字。", "answer": "$$\\boxed{160}$$", "id": "1317772"}]}
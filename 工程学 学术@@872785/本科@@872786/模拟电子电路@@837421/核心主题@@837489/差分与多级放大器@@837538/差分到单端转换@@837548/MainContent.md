## 引言
在现代[模拟电子学](@entry_id:273848)的世界里，信号以多种形式存在，而有效地处理和转换这些信号是高性能[电路设计](@entry_id:261622)的核心。其中，差分转单端转换是一项至关重要的基础技术。[差分信号](@entry_id:260727)因其卓越的抗噪声能力而被广泛应用于信号链的前端，但许多后续电路或系统却需要一个以地为参考的单端信号。这就带来了一个根本性的问题：我们如何才能在不损失信号信息、不牺牲[前期](@entry_id:170157)[噪声抑制](@entry_id:276557)成果的前提下，完成这种信号格式的转换？简单地舍弃[差分信号](@entry_id:260727)的一半不仅会损失增益，更会破坏整个差分架构的设计初衷。

本文旨在系统性地解决这一知识鸿沟。我们将带领读者深入探索差分转单端转换的精髓，从基本概念到高级应用。在接下来的内容中，你将学到：

- **第一章：原理与机制** 将深入剖析实现转换的核心电路拓扑，包括基础的电阻负载方法和[集成电路](@entry_id:265543)中占主导地位的[有源负载](@entry_id:262691)技术，并量化分析它们的增益、[共模抑制](@entry_id:265391)能力和关键性能权衡。
- **第二章：应用与跨学科连接** 将展示这些原理如何在[运算放大器](@entry_id:263966)、精密仪器、[生物医学工程](@entry_id:268134)乃至[纳米物理学](@entry_id:142247)等广阔领域中发挥关键作用，连接理论与现实世界的工程挑战。
- **第三章：动手实践** 将通过一系列精选的计算问题，巩固你对电路偏置、增益分析和性能指[标量化](@entry_id:634761)的理解，将理论知识转化为可操作的设计技能。

现在，让我们从第一章开始，揭开差分转单端转换的 **原理与机制**。

## 原理与机制

本章将深入探讨将[差分信号](@entry_id:260727)转换为单端信号的核心原理与电路机制。继前一章介绍其重要性之后，我们将系统地分析实现这种转换的不同电路拓扑，评估其性能，并揭示设计过程中固有的[基本权](@entry_id:200855)衡。

### [差分信号](@entry_id:260727)与[共模信号](@entry_id:264851)的基本概念

在分析[差分放大器](@entry_id:272747)时，将输入信号分解为两种理想分量是一种强大而普遍的分析工具。考虑施加于[差分对](@entry_id:266000)两个输入端 $v_1$ 和 $v_2$ 上的信号，我们可以定义 **差分模式输入信号 (differential-mode input signal)** $v_{id}$ 和 **共模模式输入信号 (common-mode input signal)** $v_{ic}$。

差分模式信号是两个输入电压之差：
$$v_{id}(t) = v_1(t) - v_2(t)$$

而共模模式信号则是两个输入电压的平均值：
$$v_{ic}(t) = \frac{1}{2}(v_1(t) + v_2(t))$$

必须强调的是，$v_{id}$ 和 $v_{ic}$ 是用于[电路分析](@entry_id:261116)的数学抽象，而非在电路中某个特定物理节点上可以直接测量的电压 [@problem_id:1297493]。[差分放大器](@entry_id:272747)的核心设计目标正是为了高度放大[差分信号](@entry_id:260727) $v_{id}$，同时极力抑制或“拒绝”[共模信号](@entry_id:264851) $v_{ic}$。这种特性使得[差分放大器](@entry_id:272747)对耦合到两个输入的噪声（例如电源噪声或电磁干扰）具有很强的免疫力，因为这些噪声通常表现为[共模信号](@entry_id:264851)。

物理上，一个纯[共模信号](@entry_id:264851)可以通过将两个输入端连接在一起，并由同一个电压源驱动来实现，此时 $v_1 = v_2$，因此 $v_{id} = 0$ 且 $v_{ic} = v_1$。相反，一个纯[差分信号](@entry_id:260727)则通过施加大小相等、[极性相](@entry_id:161819)反的信号来实现，例如 $v_1 = v_{id}/2$ 和 $v_2 = -v_{id}/2$，此时 $v_{ic} = 0$。电路的输出，无论是差分的（取两个输出端之差）还是单端的（取任一输出端对地的电压），都是对这两种输入模式响应的叠加。

### 差分到单端转换的必要性

[差分放大器](@entry_id:272747)因其卓越的[共模抑制](@entry_id:265391)能力而常被用作[多级放大器](@entry_id:267358)的输入级。其输出通常也是差分的，即两个输出节点（例如BJT的集电极或MOSFET的漏极）的电压相对于一个共模直流电平，呈现出大小相等、相位相反的变化。然而，许多后续电路级或外部负载，如[功率放大器](@entry_id:274132)、[模数转换器](@entry_id:271548)（[ADC](@entry_id:186514)）或同轴电缆驱动的仪器，本质上是 **单端 (single-ended)** 的。这意味着它们需要一个相对于系统地（Ground）的单一电压信号作为输入。

这就引出了一个至关重要的问题：为什么我们不能简单地只取差分输出的一端，而忽略另一端呢？ [@problem_id:1297506] 这个问题揭示了差分到单端转换器的根本存在理由。如果我们仅将差分输出之一（例如 $v_{out1}$）连接到单端负载，我们不仅会损失一半的信号摆幅（因为完整的信号信息存在于 $v_{out1} - v_{out2}$ 中），更严重的是，任何未经完全抑制的输出[共模信号](@entry_id:264851)（由于电路不完美）也会被一并传递给下一级。这将完全破坏使用[差分对](@entry_id:266000)来抑制噪声的初衷。

因此，一个专门的 **差分到单端转换器 (differential-to-single-ended converter)** 变得不可或缺。其核心任务是：接收两个差分输出信号 $v_{out1}$ 和 $v_{out2}$，生成一个与它们的差值 ($v_{out1} - v_{out2}$) 成正比、且以系统地为参考的单一输出电压 $v_{out,se}$。在完成这一格式转换的同时，该电路必须继续抑制共模分量 $(v_{out1} + v_{out2})/2$，从而将第一级差分放大的[共模抑制](@entry_id:265391)优势完整地保留下来，并为单端负载提供兼容的信号格式。

### 电阻负载转换器：一种基本实现

最简单的差分到单端转换器结构是一个带有电阻负载的[差分对](@entry_id:266000)，其中输出信号仅从其中一个输出节点获取。

#### 增益分析

考虑一个由两个匹配的晶体管（BJT或MOSFET）组成的[差分对](@entry_id:266000)，其集电极或漏极通过匹配的[负载电阻](@entry_id:267991) $R_C$ (或 $R_D$) 接到电源 $V_{CC}$ (或 $V_{DD}$)。我们从其中一个晶体管，例如 $Q_2$ 或 $M_2$ 的集电极/漏极获取单端输出 $v_{out}$。

当施加一个小的差分输入电压 $v_{id}$ 时，由于对称性，该电压近似平分到两个晶体管的基极-发射极结或栅极-源极结上，但[极性相](@entry_id:161819)反。即 $v_{be1} = v_{id}/2$ 和 $v_{be2} = -v_{id}/2$。这导致了两个支路中产生大小相等、方向相反的小信号电流：
$$i_{c1} = g_m v_{be1} = g_m \frac{v_{id}}{2}$$
$$i_{c2} = g_m v_{be2} = -g_m \frac{v_{id}}{2}$$
其中 $g_m$ 是晶体管的跨导。

单端输出电压 $v_{out}$ 是在 $Q_2$ 的集电极上测得的。它是流经[负载电阻](@entry_id:267991) $R_C$ 的小信号电流 $i_{c2}$ 引起的电压变化。由于 $i_{c2}$ 定义为流入集电极的电流，而输出电压是相对于电源（交流地）的节点电压，因此：
$$v_{out} = -i_{c2} R_C = - \left( -g_m \frac{v_{id}}{2} \right) R_C = \frac{1}{2} g_m R_C v_{id}$$

因此，差分到单端的[电压增益](@entry_id:266814)为：
$$A_{d-se} = \frac{v_{out}}{v_{id}} = \frac{1}{2} g_m R_C$$

这个结果直观地表明，由于我们只取了一个输出，我们只获得了一半的信号电流，因此增益是差分输出增益 ($g_m R_C$) 的一半。

例如，对于一个[BJT差分对](@entry_id:273108)，其[偏置电流](@entry_id:260952) $I_{EE} = 0.800 \text{ mA}$，负载电阻 $R_C = 12.0 \text{ k}\Omega$，[热电压](@entry_id:267086) $V_T = 25.0 \text{ mV}$。每个晶体管的静态集电极电流为 $I_C = I_{EE}/2 = 0.400 \text{ mA}$，跨导为 $g_m = I_C / V_T = 16 \text{ mA/V}$。对于一个 $v_{id} = 4.00 \text{ mV}$ 的输入，单端输出电压将是 $v_{out} = \frac{1}{2} (16 \times 10^{-3}) (12 \times 10^3) (4 \times 10^{-3}) = 0.384 \text{ V} = 384 \text{ mV}$ [@problem_id:1297500]。

类似地，对于一个[MOSFET差分对](@entry_id:276786)，其[跨导](@entry_id:274251) $g_m = 1.8 \text{ mA/V}$，负载电阻 $R_D = 6.0 \text{ k}\Omega$，其差分到单端增益的幅度为 $|A_{d-se}| = \frac{g_m R_D}{2} = \frac{(1.8 \times 10^{-3})(6.0 \times 10^3)}{2} = 5.4$ [@problem_id:1297501]。

#### 性能限制：[共模增益](@entry_id:263356)

电阻负载转换器的一个主要缺点在于其[共模抑制](@entry_id:265391)性能。理想情况下，[共模增益](@entry_id:263356) $A_{cm}$ 应为零。然而，这依赖于一个理想的[尾电流源](@entry_id:262705)，即具有无限大的输出电阻。在实际电路中，[尾电流源](@entry_id:262705)的输出电阻 $R_{SS}$ 是有限的。

当施加一个共模输入 $v_{in,cm}$ 时，由于对称性，两个晶体管行为一致。有限的 $R_{SS}$ 使得公共发射极/源极节点电压 $v_s$ 不再是地，而是会随着 $v_{in,cm}$ 变化。通过[小信号分析](@entry_id:263462)可以推导出，此时的 **[共模增益](@entry_id:263356) (common-mode gain)** 为 [@problem_id:1297478]：
$$A_{cm} = \frac{v_{out}}{v_{in,cm}} = -\frac{g_{m} R_{D}}{1 + 2 g_{m} R_{SS}}$$

这个表达式揭示了一个关键点：为了获得较低的[共模增益](@entry_id:263356)（即良好的[共模抑制](@entry_id:265391)），分母必须远大于分子。这意味着 $2 g_m R_{SS}$ 必须远大于1，即[尾电流源](@entry_id:262705)的[输出电阻](@entry_id:276800) $R_{SS}$ 必须非常大。在理想情况下，$R_{SS} \to \infty$，则 $A_{cm} \to 0$。这个关系量化了[尾电流源](@entry_id:262705)质量对电路[共模抑制](@entry_id:265391)能力的关键影响。

### [有源负载](@entry_id:262691)转换器：集成电路的标准方法

在现代集成电路（IC）设计中，电阻负载由于占用芯片面积大、提供的增益有限等缺点，已很少被使用。取而代之的是 **[有源负载](@entry_id:262691) (active load)**，即使用晶体管构成的[电流源](@entry_id:275668)作为负载。对于差分到单端转换，最常见的[有源负载](@entry_id:262691)是 **[电流镜](@entry_id:264819) (current mirror)**。

#### [有源负载](@entry_id:262691)的动机与转换机制

使用P[MOS电流镜](@entry_id:273667)作为N[MOS差分对](@entry_id:272034)的负载，不仅提供了比电阻更高的动态负载阻抗，从而实现更高的[电压增益](@entry_id:266814)，更重要的是，它以一种巧妙的方式完成了差分到单端的转换。

电路的典型结构是：NMOS输入对 $M_1, M_2$，其漏极分别连接到PMOS负载 $M_3, M_4$ 的漏极。$M_3$ 和 $M_4$ 构成一个[电流镜](@entry_id:264819)，$M_3$ 是二极管连接（栅漏相连），其栅极同时控制 $M_4$。单端输出 $v_{out}$ 从 $M_2$ 和 $M_4$ 的公共漏极节点取出。

[电流镜](@entry_id:264819)的核心功能在于，它感知流经 $M_1$ 的信号电流 $i_{d1}$，并“镜像”或复制一个相同的电流 $i_{d4}$ 从电源“推”向输出节点。与此同时，输入晶体管 $M_2$ 则从输出节点“拉”走其自身的信号电流 $i_{d2}$。因此，流入输出节点总负载阻抗的净电流 $i_{out}$ 是这两个电流的叠加 [@problem_id:1297525]：
$$i_{out} = i_{d4} - i_{d2}$$
在一个理想的单位增益[电流镜](@entry_id:264819)中，$i_{d4} = i_{d1}$。因此：
$$i_{out} = i_{d1} - i_{d2}$$

回忆差分输入时，$i_{d1} = g_m(v_{id}/2)$ 和 $i_{d2} = -g_m(v_{id}/2)$。代入上式得到：
$$i_{out} = g_m \frac{v_{id}}{2} - \left(-g_m \frac{v_{id}}{2}\right) = g_m v_{id}$$

这个结果极为重要：[有源负载](@entry_id:262691)通过[电流镜](@entry_id:264819)操作，自动地将两个支路的差分电流信号在单一输出节点上相减，并合成为一个正比于 $v_{id}$ 的净输出电流。它不仅没有像电阻负载那样丢弃一半的信号，反而将两个支路的信号有效地结合起来，实现了完整的差分到单端转换。

#### 小信号增益分析

输出电压 $v_{out}$ 就是这个净输出电流 $i_{out}$ 乘以输出节点的总[小信号电阻](@entry_id:267564) $R_{out}$：
$$v_{out} = i_{out} \cdot R_{out} = (g_m v_{id}) \cdot R_{out}$$

[输出电阻](@entry_id:276800) $R_{out}$ 是从输出节点看进去的总电阻，它等于N[MOS晶体管](@entry_id:273779) $M_2$ 的[输出电阻](@entry_id:276800) $r_{on}$ 与PMOS负载晶体管 $M_4$ 的输出电阻 $r_{op}$ 的并联 [@problem_id:1297516]：
$$R_{out} = r_{on} \parallel r_{op} = \frac{r_{on} r_{op}}{r_{on} + r_{op}}$$

因此，[有源负载](@entry_id:262691)差分到单端转换器的电压增益为：
$$A_v = \frac{v_{out}}{v_{id}} = g_{mn} (r_{on} \parallel r_{op})$$
其中 $g_{mn}$ 是输入N[MOS晶体管](@entry_id:273779)的[跨导](@entry_id:274251)。

例如，对于一个MOSFET[有源负载放大器](@entry_id:265889)，其尾电流 $I_{SS} = 200 \mu\text{A}$，NMOS的 $k'_n(W/L)_n = 2 \text{ mS/V}$，[Early电压](@entry_id:265482) $|V_{An}| = 20 \text{ V}$，PMOS的[Early电压](@entry_id:265482) $|V_{Ap}| = 15 \text{ V}$。我们可以计算出[静态电流](@entry_id:275067) $I_D = 100 \mu\text{A}$，[跨导](@entry_id:274251) $g_m \approx 0.632 \text{ mA/V}$，输出电阻 $r_{on} = 200 \text{ k}\Omega$，$r_{op} = 150 \text{ k}\Omega$。并联输出电阻 $R_{out} \approx 85.7 \text{ k}\Omega$。最终的增益幅度为 $A_d = g_m R_{out} \approx 0.632 \times 85.7 \approx 54.2$ [@problem_id:1297533]。

#### 与电阻负载的性能对比

[有源负载](@entry_id:262691)相对于电阻负载的核心优势在于其能提供极高的输出阻抗，从而获得更高的电压增益。晶体管的输出电阻 $r_o$ 通常在几十千欧到几兆欧的范围内，远大于集成电路工艺中能够实现的合理尺寸的电阻值。

通过对比两种结构的输出电阻可以清晰地看到这一点 [@problem_id:1297492]。对于电阻负载（配置A），[输出电阻](@entry_id:276800)为 $R_{out,A} = R_C \parallel r_{o2}$，其值上限为 $R_C$。对于[有源负载](@entry_id:262691)（配置B），输出电阻为 $R_{out,B} = r_{o2} \parallel r_{o4}$。由于 $r_{o4}$ 通常与 $r_{o2}$ 在同一[数量级](@entry_id:264888)，且远大于 $R_C$，因此 $R_{out,B}$ 通常远大于 $R_{out,A}$。这意味着在相同的[偏置电流](@entry_id:260952)和跨导下，[有源负载](@entry_id:262691)可以实现高得多的电压增益。

### 高级考量与性能权衡

在掌握了基本原理之后，设计师还需面对更深层次的[性能优化](@entry_id:753341)与权衡。

#### 高增益技术：共源共栅（Cascode）负载

为了进一步提升增益，可以采用 **共源共栅（Cascode）[电流镜](@entry_id:264819)** 作为[有源负载](@entry_id:262691)。[Cascode结构](@entry_id:273974)通过在原[电流镜](@entry_id:264819)晶体管上堆叠一个额外的晶体管，极大地提高了[电流镜](@entry_id:264819)的输出电阻。这使得总的输出电阻 $R_{out}$ 大幅增加，从而使电压增益 $A_v$ 成比例地提高。

然而，这种增益的提升并非没有代价。[Cascode结构](@entry_id:273974)引入了额外的晶体管堆叠在电源和输出节点之间，这要求更大的电压 " headroom"（[裕度](@entry_id:274835)）来保证所有晶体管都工作在饱和区。具体来说，简单[电流镜](@entry_id:264819)负载下，输出电压的上限约为 $V_{DD} - V_{OV,P}$（其中 $V_{OV,P}$ 是PMOS负载的[过驱动电压](@entry_id:272139)）。而在Cascode负载下，输出电压上限降低到约 $V_{DD} - (V_{OV,P1} + V_{OV,P2})$。这就压缩了可用的 **[输出电压摆幅](@entry_id:263071) (output voltage swing)**。因此，在Cascode负载和简单[电流镜](@entry_id:264819)负载之间的选择，体现了 **增益与[输出摆幅](@entry_id:260991)之间的经典权衡** [@problem_id:1297513]。

#### 大信号行为：[压摆率](@entry_id:272061)

除了小信号增益，电路的大信号瞬态响应也至关重要，其关键指标是 **压摆率 (Slew Rate)**。压摆率定义为当输入为大的阶跃信号时，输出电压的最大变化速率 $|dv_{out}/dt|_{max}$。

当一个大的差分输入信号施加到放大器时，[差分对](@entry_id:266000)的一个晶体管完全导通，而另一个则完全截止。这导致全部的尾电流 $I_{SS}$ 被“ steering”（导向）到其中一个支路。在[有源负载](@entry_id:262691)转换器中，输出节点连接到一个负载电容 $C_L$（包括后续级的[输入电容](@entry_id:272919)和[寄生电容](@entry_id:270891)）。对该电容充电或放电的最大可用电流就是尾电流 $I_{SS}$。

当所有电流流经 $Q_1$ 时，[电流镜](@entry_id:264819)将 $I_{SS}$ 注入输出节点，对 $C_L$ 充电，此时 $dv_{out}/dt = I_{SS}/C_L$。当所有电流流经 $Q_2$ 时，[电流镜](@entry_id:264819)提供零电流，而 $Q_2$ 将 $I_{SS}$ 从输出节点拉走，对 $C_L$ 放电，此时 $dv_{out}/dt = -I_{SS}/C_L$。因此，电路的压摆率由尾电流和负载电容共同决定 [@problem_id:1297520]：
$$SR = \left|\frac{dv_{out}}{dt}\right|_{max} = \frac{I_{SS}}{C_L}$$

这个关系式表明，为了获得更高的[压摆率](@entry_id:272061)（即更快的瞬态响应），需要增大[偏置电流](@entry_id:260952) $I_{SS}$ 或减小负载电容 $C_L$。然而，增大 $I_{SS}$ 会增加功耗，这又是一个重要的设计权衡。
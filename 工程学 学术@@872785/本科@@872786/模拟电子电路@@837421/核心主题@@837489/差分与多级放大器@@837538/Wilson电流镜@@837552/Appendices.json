{"hands_on_practices": [{"introduction": "电流镜的主要功能是产生一个稳定且可预测的电流。第一个练习将引导你完成一个基本的设计过程：计算所需的参考电阻（$R_{ref}$），以建立一个目标输出电流（$I_{out}$）。这个练习将电流之间的理论关系与一个实际的设计参数联系起来，是使用任何电流镜电路的第一步。[@problem_id:1342141]", "problem": "一位电子工程师正在为一个低功耗集成电路中的放大器级设计一个精密偏置电路。该设计利用一个 Wilson 电流镜来产生一个稳定的输出电流 $I_{out}$。该电路由三个 NPN 型双极结型晶体管 (BJT) 构成，并假设它们是完美匹配的。\n\n该电流镜由 $V_{CC} = 5.00 \\text{ V}$ 的电源电压供电。对于所使用的 Wilson 电流镜的特定拓扑结构，详细分析给出了以下关系式，假设晶体管工作在正向有源区，并且厄利效应 (Early effect) 可以忽略不计：\n\n1.  流过参考电阻 $R_{ref}$ 的参考电流 $I_{REF}$ 与期望的输出电流 $I_{out}$ 之间的关系由以下方程给出：\n    $$I_{REF} = I_{out} \\left(1 + \\frac{2}{\\beta(\\beta + 1)}\\right)$$\n    其中 $\\beta$ 是晶体管的共发射极电流增益。\n\n2.  参考节点（$R_{ref}$ 连接到晶体管网络的点）的直流电压稳定在两倍的基极-发射极导通电压，即 $V_{REF} = 2V_{BE,on}$。\n\n设计要求一个稳定的输出电流 $I_{out} = 100.0 \\text{ } \\mu \\text{A}$。匹配的晶体管的电流增益为 $\\beta = 100$，其基极-发射极导通电压为 $V_{BE,on} = 0.700 \\text{ V}$。\n\n计算为达到指定的输出电流所需的参考电阻 $R_{ref}$ 的值。以千欧姆 ($\\text{k}\\Omega$) 为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "我们已知 Wilson 电流镜的关系式：\n- 参考电流与输出电流的关系：\n$$I_{REF} = I_{out}\\left(1 + \\frac{2}{\\beta(\\beta + 1)}\\right)$$\n- 参考节点电压：\n$$V_{REF} = 2V_{BE,on}$$\n假设参考电阻 $R_{ref}$ 连接在 $V_{CC}$ 和参考节点之间，根据欧姆定律可得：\n$$R_{ref} = \\frac{V_{CC} - V_{REF}}{I_{REF}}$$\n代入 $V_{REF}$ 和 $I_{REF}$：\n$$R_{ref} = \\frac{V_{CC} - 2V_{BE,on}}{I_{out}\\left(1 + \\frac{2}{\\beta(\\beta + 1)}\\right)}$$\n代入给定值 $V_{CC} = 5.00\\text{ V}$，$V_{BE,on} = 0.700\\text{ V}$，$I_{out} = 100.0\\ \\mu\\text{A}$ 和 $\\beta = 100$：\n$$V_{CC} - 2V_{BE,on} = 5.00 - 2(0.700) = 3.600\\text{ V}$$\n$$1 + \\frac{2}{\\beta(\\beta + 1)} = 1 + \\frac{2}{100\\cdot 101} = 1 + \\frac{1}{5050} = \\frac{5051}{5050}$$\n因此，\n$$R_{ref} = \\frac{3.600\\text{ V}}{100.0\\ \\mu\\text{A}\\cdot \\frac{5051}{5050}} = \\frac{3.600\\text{ V}}{100.0\\ \\mu\\text{A}}\\cdot \\frac{5050}{5051}$$\n计算基本比率：\n$$\\frac{3.600\\text{ V}}{100.0\\ \\mu\\text{A}} = 36.000\\ \\text{k}\\Omega$$\n所以，\n$$R_{ref} = 36.000\\ \\text{k}\\Omega \\times \\frac{5050}{5051} \\approx 35.9929\\ \\text{k}\\Omega$$\n根据要求四舍五入到三位有效数字，得到 $36.0\\ \\text{k}\\Omega$。", "answer": "$$\\boxed{36.0}$$", "id": "1342141"}, {"introduction": "现实世界中的电路可能会出现故障，因此理解电路在非理想情况下的行为至关重要。这个练习模拟了一个常见的制造缺陷——短路，并挑战你推断其后果。通过分析电路行为的变化，你将更深刻地理解原始设计中每个元件的具体作用，从而培养诊断和解决问题的能力。[@problem_id:1342145]", "problem": "一个电流导向电路由三个相同的 NPN 型双极结型晶体管 (BJT) 构建，标记为 Q1、Q2 和 Q3。预期的配置如下：\n\n- Q1 和 Q3 的发射极接地。\n- 一个参考电流源向一个输入节点提供电流 $I_{REF}$。\n- 晶体管 Q2 采用二极管接法，其集电极和基极短接在一起。Q2 的集电极连接到正电源电压 $V_{CC}$。\n- Q2 的公共基极-集电极节点连接到 Q1 和 Q3 的基极。\n- Q2 的发射极连接到 Q3 的集电极。这个连接点也用作参考电流 $I_{REF}$ 的输入节点。\n- 输出电流 $I_{OUT}$ 从 Q1 的集电极引出。\n\n在制造过程中，出现了一个故障：晶体管 Q2 被一根简单的导线完全取代，这根导线将原本用于 Q2 集电极的焊盘与原本用于 Q2 发射极的焊盘短接。所有其他连接保持如前所述。\n\n假设所有晶体管都相同，并在正向放大区工作，其正向电流增益 $\\beta = 100$，参考电流为 $I_{REF} = 2.00$ mA，计算故障电路中的新输出电流 $I_{OUT}$。厄利效应可以忽略不计。\n\n以毫安 (mA) 为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "当 Q2 被移除，并被一根短路其集电极焊盘（也连接到 Q1 和 Q3 的公共基极节点）和其发射极焊盘（连接到 Q3 的集电极和 $I_{REF}$ 输入节点）的导线替代后，该故障实际上是将 Q1 和 Q3 的基极连接到了 Q3 的集电极以及 $I_{REF}$ 节点。因此 Q3 变为二极管接法 ($V_{CB3}=0$)，参考电流 $I_{REF}$ 供给：\n- Q3 的集电极，电流为 $I_{C3}$，\n- Q3 的基极，电流为 $I_{B3}$，\n- Q1 的基极，电流为 $I_{B1}$。\n\n假设工作在正向放大区，且晶体管相同，厄利效应可以忽略不计：\n- 任何晶体管的集电极电流和基极电流都满足 $I_{C}=\\beta I_{B}$。\n- 相同的晶体管，其基极短接且发射极电位相同，具有相等的 $V_{BE}$，因此具有相等的集电极电流。所以，\n$$\nI_{C1}=I_{C3}\\equiv I.\n$$\n根据 $I_{C}=\\beta I_{B}$，基极电流为\n$$\nI_{B1}=\\frac{I_{C1}}{\\beta}=\\frac{I}{\\beta},\\qquad I_{B3}=\\frac{I_{C3}}{\\beta}=\\frac{I}{\\beta}.\n$$\n在注入 $I_{REF}$ 的节点处（该节点连接到 Q1 和 Q3 的基极以及 Q3 的集电极）应用基尔霍夫电流定律 (KCL)，输入电流 $I_{REF}$ 等于三个输出电流之和：\n$$\nI_{REF}=I_{C3}+I_{B1}+I_{B3}=I\\left(1+\\frac{2}{\\beta}\\right).\n$$\n解出 $I$ 可得\n$$\nI=\\frac{\\beta}{\\beta+2}\\,I_{REF}.\n$$\n输出电流从 Q1 的集电极引出，所以\n$$\nI_{OUT}=I_{C1}=I=\\frac{\\beta}{\\beta+2}\\,I_{REF}.\n$$\n代入 $\\beta=100$ 和 $I_{REF}=2.00\\ \\text{mA}$，\n$$\nI_{OUT}=\\frac{100}{100+2}\\times 2.00=\\frac{200}{102}\\ \\text{mA}\\approx 1.960784\\ \\text{mA}.\n$$\n四舍五入到三位有效数字，结果为 1.96 mA。", "answer": "$$\\boxed{1.96}$$", "id": "1342145"}, {"introduction": "威尔逊电流镜的真正精妙之处不仅在于其精确的电流复制能力，更在于它能作为一个近乎理想的电流源。本练习将深入探讨小信号分析，通过计算其输出电阻（$R_{out}$）来量化这一“优越性”。掌握这种分析方法将揭示为何这种拓扑结构在高性能模拟电路中备受青睐。[@problem_id:1333859]", "problem": "一位工程师正在使用威尔逊 (Wilson) 电流镜拓扑结构设计一个精密电流源。该电路由三个完全匹配的、标记为 Q1、Q2 和 Q3 的 NPN 型双极结型晶体管 (BJT) 构成。每个晶体管的小信号跨导为 $g_m$，小信号输出电阻为有限值 $r_o$。\n\n电路配置如下：\n- Q1 和 Q2 的发射极接地。\n- Q1 采用二极管连接方式，其集电极与基极相连。一个参考电流源连接到该节点。\n- Q2 的基极连接到 Q1 的基极。\n- Q3 堆叠在 Q2 之上，即 Q3 的发射极连接到 Q2 的集电极。\n- Q3 的基极连接到 Q1 和 Q2 的公共基极节点。\n- 输出电流从 Q3 的集电极取出。\n\n假设晶体管的电流增益 $\\beta$ 为无穷大，求从 Q3 集电极看进去的电流镜小信号输出电阻 $R_{out}$。请用 $g_m$ 和 $r_o$ 将答案表示为单个闭式解析表达式。", "solution": "我们使用电流增益无穷大的 BJT 的小信号混合-pi 模型。设所有三个晶体管都是匹配的，其跨导为 $g_{m}$，输出电阻为 $r_{o}$。定义 $g_{o} \\equiv \\frac{1}{r_{o}}$。\n\n节点标记如下：\n- 节点 $B$：Q1、Q2、Q3 的公共基极节点以及 Q1 的集电极（二极管连接）。\n- 节点 $X$：Q2 的集电极和 Q3 的发射极。\n- 节点 $Y$：Q3 的集电极（输出节点）。\n- 地：Q1 和 Q2 的发射极。\n\n小信号元件：\n- Q1（二极管连接）从节点 $B$ 到地呈现的导纳为 $g_{m}+g_{o}$，因为其小信号电流为 $i_{1}=(g_{m}+g_{o})v_{b}$。\n- Q2 有一个从 $X$ 到地的受控电流源，值为 $g_{m}v_{b}$，以及一个从 $X$ 到地的电阻 $r_{o}$（电导为 $g_{o}$）。\n- Q3 有一个从 $Y$ 到 $X$ 的受控电流源，值为 $g_{m}(v_{b}-v_{x})$，以及一个从 $Y$ 到 $X$ 的电阻 $r_{o}$（电导为 $g_{o}$）。\n\n我们通过在节点 $Y$ 施加一个测试电压 $v_{y}$（相对于地），解出从节点 $Y$ 流入网络的相应电流 $i_{y}$，然后利用 $R_{out}=\\frac{v_{y}}{i_{y}}$ 来求得在 $Y$ 处看到的 $R_{out}$。\n\n首先，确定 $v_{b}$。由于 $\\beta$ 无穷大，基极电流为零；连接到节点 $B$ 的唯一元件是 Q1（接地）。由于受控源不会向 $B$ 注入电流，所以没有通过 Q2 或 Q3 连接到 $B$ 的小信号激励。因此，在节点 $B$ 应用 KCL 可得\n$$\n(g_{m}+g_{o})v_{b}=0 \\;\\;\\Rightarrow\\;\\; v_{b}=0.\n$$\n\n接着，在节点 $X$ 列出 KCL 方程。离开节点 $X$ 的电流之和必须为零（$X$ 处没有独立源）：\n- 流经 Q2 的 $r_{o}$ 到地的电流：$g_{o}v_{x}$。\n- 流经 Q2 的 $g_{m}$ 源到地的电流：$g_{m}v_{b}$。\n- 流经 Q3 的 $r_{o}$ 到 $Y$ 的电流：$g_{o}(v_{x}-v_{y})$。\n- 流经 Q3 的 $g_{m}$ 源（方向从 $Y$ 到 $X$）：经此源离开 $X$ 的电流为 $-g_{m}(v_{b}-v_{x})$。\n\n于是\n$$\ng_{o}v_{x}+g_{m}v_{b}+g_{o}(v_{x}-v_{y})-g_{m}(v_{b}-v_{x})=0.\n$$\n当 $v_{b}=0$ 时，上式简化为\n$$\n(2g_{o}+g_{m})v_{x}=g_{o}v_{y} \\;\\;\\Rightarrow\\;\\; v_{x}=\\frac{g_{o}}{2g_{o}+g_{m}}\\,v_{y}.\n$$\n\n现在计算从节点 $Y$ 流入网络的测试电流 $i_{y}$。从 $Y$ 流向网络的电流为：\n- 流经 Q3 的 $r_{o}$ 到 $X$ 的电流：$g_{o}(v_{y}-v_{x})$。\n- 流经 Q3 的 $g_{m}$ 源从 $Y$ 到 $X$ 的电流：$g_{m}(v_{b}-v_{x})$。\n\n因此，使用 $v_{b}=0$，\n$$\ni_{y}=g_{o}(v_{y}-v_{x})-g_{m}v_{x}.\n$$\n代入 $v_{x}=\\alpha v_{y}$，其中 $\\alpha=\\frac{g_{o}}{2g_{o}+g_{m}}$：\n$$\ni_{y}=\\left[g_{o}(1-\\alpha)-g_{m}\\alpha\\right]v_{y}.\n$$\n计算 $1-\\alpha=\\frac{g_{o}+g_{m}}{2g_{o}+g_{m}}$，所以\n$$\ng_{o}(1-\\alpha)-g_{m}\\alpha=\\frac{g_{o}(g_{o}+g_{m})-g_{m}g_{o}}{2g_{o}+g_{m}}=\\frac{g_{o}^{2}}{2g_{o}+g_{m}}.\n$$\n因此\n$$\ni_{y}=\\frac{g_{o}^{2}}{2g_{o}+g_{m}}\\,v_{y}\n\\quad\\Rightarrow\\quad\nR_{out}=\\frac{v_{y}}{i_{y}}=\\frac{2g_{o}+g_{m}}{g_{o}^{2}}=g_{m}r_{o}^{2}+2r_{o}.\n$$\n\n这就是从 Q3 集电极看进去的闭式小信号输出电阻。", "answer": "$$\\boxed{g_{m}r_{o}^{2}+2r_{o}}$$", "id": "1333859"}]}
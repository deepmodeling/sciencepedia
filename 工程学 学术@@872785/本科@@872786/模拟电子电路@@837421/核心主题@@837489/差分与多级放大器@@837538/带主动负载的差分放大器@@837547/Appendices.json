{"hands_on_practices": [{"introduction": "任何放大器性能的基础都源于其直流偏置。第一个练习将重点计算差分对中的静态电流，该电流由一个电流镜尾电流源设定。通过掌握这一点，你将理解如何建立决定放大器所有其他特性的精确工作点。", "problem": "考虑一个带有源负载的金属-氧化物-半导体场效应晶体管（MOSFET）差分放大器电路。该放大器由一个尾电流源偏置，该尾电流源由一个NMOS电流镜实现。该电流镜由一个参考晶体管 $M_{REF}$ 和一个尾晶体管 $M_3$ 组成。\n\n一个恒定的参考电流 $I_{REF}$ 提供给晶体管 $M_{REF}$，该晶体管是二极管连接的（即其栅极连接到其漏极）。尾晶体管 $M_3$ 的栅极连接到 $M_{REF}$ 的栅极，它们的源极连接到同一个低电位轨。$M_3$ 的漏极向差分对提供总尾电流 $I_{SS}$。\n\n差分对本身由两个完全匹配的NMOS晶体管 $M_1$ 和 $M_2$ 组成，它们的源极共同连接到 $M_3$ 的漏极。对于本题，放大器工作在静态状态，其中 $M_1$ 和 $M_2$ 的栅极端子偏置在相同的直流电压下，导致差分输入信号为零。\n\n给定以下参数：\n- 参考电流，$I_{REF} = 30.0$ µA。\n- 参考晶体管的宽高比，$(W/L)_{REF} = 10$。\n- 尾晶体管的宽高比，$(W/L)_3 = 35$。\n\n假设所有晶体管都工作在饱和区，并且所有晶体管的沟道长度调制效应可以忽略不计。\n\n计算流经差分对晶体管之一（例如，$I_{D1}$）的静态漏极电流。以微安（µA）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "题目要求计算MOSFET差分对中一个晶体管（$M_1$ 或 $M_2$）的静态漏极电流。该电路处于静态状态，意味着差分输入电压为零（$v_{G1} = v_{G2}$）。\n\n首先，我们必须确定由晶体管 $M_3$ 提供的尾电流 $I_{SS}$。晶体管 $M_3$ 和参考晶体管 $M_{REF}$ 构成一个电流镜。电流 $I_{REF}$ 流过二极管连接的 $M_{REF}$，在其上建立一个栅源电压 $V_{GS}$。由于 $M_3$ 的栅极连接到 $M_{REF}$ 的栅极，并且它们的源极也连接在一起，所以两个晶体管共享相同的 $V_{GS}$。\n\nMOSFET在饱和区的漏极电流（忽略沟道长度调制效应）由下式给出：\n$$\nI_D = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right) (V_{GS} - V_{th})^2\n$$\n其中 $k'_n$ 是工艺跨导参数，$W/L$ 是宽高比，$V_{GS}$ 是栅源电压，$V_{th}$ 是阈值电压。\n\n对于由 $M_{REF}$ 和 $M_3$ 形成的电流镜：\n参考电流是 $M_{REF}$ 的漏极电流：\n$$\nI_{REF} = I_{D,REF} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_{REF} (V_{GS} - V_{th})^2\n$$\n尾电流是 $M_3$ 的漏极电流：\n$$\nI_{SS} = I_{D3} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_3 (V_{GS} - V_{th})^2\n$$\n由于两个晶体管的 $k'_n$、$V_{GS}$ 和 $V_{th}$ 相同，我们可以求出它们漏极电流的比值：\n$$\n\\frac{I_{SS}}{I_{REF}} = \\frac{\\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_3 (V_{GS} - V_{th})^2}{\\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_{REF} (V_{GS} - V_{th})^2} = \\frac{(W/L)_3}{(W/L)_{REF}}\n$$\n这给出了简单电流镜的基本关系。尾电流 $I_{SS}$ 是参考电流 $I_{REF}$ 的一个缩放版本。\n\n现在我们可以使用给定参数计算 $I_{SS}$ 的值：\n$I_{REF} = 30.0$ µA\n$(W/L)_{REF} = 10$\n$(W/L)_3 = 35$\n\n$$\nI_{SS} = I_{REF} \\times \\frac{(W/L)_3}{(W/L)_{REF}} = 30.0 \\text{ µA} \\times \\frac{35}{10} = 30.0 \\text{ µA} \\times 3.5 = 105 \\text{ µA}\n$$\n接下来，我们考虑差分对本身，它由晶体管 $M_1$ 和 $M_2$ 组成。它们的漏极电流之和必须等于由 $M_3$ 提供的尾电流：\n$$\nI_{D1} + I_{D2} = I_{SS}\n$$\n题目指出，差分对晶体管 $M_1$ 和 $M_2$ 是完全匹配的，并且在零差分输入电压（$v_{G1} = v_{G2}$）下工作于静态状态。由于这种对称性，尾电流 $I_{SS}$ 必须在两个晶体管之间平分。\n因此：\n$$\nI_{D1} = I_{D2} = \\frac{I_{SS}}{2}\n$$\n代入计算出的 $I_{SS}$ 值：\n$$\nI_{D1} = \\frac{105 \\text{ µA}}{2} = 52.5 \\text{ µA}\n$$\n题目要求以微安（µA）为单位表示其中一个晶体管的静态漏极电流，并四舍五入到三位有效数字。我们计算出的值为 $52.5$ µA，它已经是正确的单位并且有三位有效数字。", "answer": "$$\\boxed{52.5}$$", "id": "1297270"}, {"introduction": "除了静态条件，放大器的速度也是一个关键的性能指标。本练习通过要求你计算建立时间，连接了直流分析和动态响应之间的鸿沟。你将把放大器建模为单极点系统，学习在 [@problem_id:1297270] 中确定的偏置和器件参数如何共同决定其瞬态行为。", "problem": "一位集成电路设计师正在表征一个基本构建模块的瞬态响应：一个差分放大器。该放大器由四个金属-氧化物-半导体场效应晶体管 (MOSFET) 以标准配置构成。一个n沟道MOSFET (NMOS) 差分对 (M1, M2) 构成输入级，一个p沟道MOSFET (PMOS) 电流镜 (M3, M4) 作为有源负载。单端输出取自 M2 的漏极，该漏极连接到 M4 的漏极。整个电路由一个理想的尾电流源 $I_{SS}$ 偏置，其大小为 $200\\ \\mu\\text{A}$。所有晶体管都工作在饱和区。\n\n由制造工艺和偏置条件决定的相关小信号器件参数如下：\n- 对于NMOS晶体管 (M1, M2)：沟道长度调制参数为 $\\lambda_n = 0.05\\ \\text{V}^{-1}$。\n- 对于PMOS晶体管 (M3, M4)：沟道长度调制参数为 $\\lambda_p = 0.04\\ \\text{V}^{-1}$。\n\n输出节点的总寄生电容，包括来自晶体管和互连线的贡献，被确定为 $C_L = 1.0\\ \\text{pF}$。\n\n在时间 $t=0$ 时，一个小的差分阶跃电压施加到输入端，导致输出电压发生变化。为了分析放大器的速度，将其响应建模为单极点系统。计算 1% 建立时间，定义为施加阶跃输入后，输出电压达到并保持在其最终值的 1% 以内所需的时间。\n\n以纳秒 (ns) 为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "将输出节点建模为具有时间常数 $\\tau = R_{\\text{out}} C_{L}$ 的单极点系统。对于一阶阶跃响应，误差以 $\\exp(-t/\\tau)$ 的形式衰减，因此建立到最终值 1%（即 0.01）范围内的​​时间 $t_{1\\%}$ 满足 $\\exp(-t_{1\\%}/\\tau) = 0.01$，因此\n$$\nt_{1\\%} = \\tau \\ln(100) \\approx 4.605 \\tau\n$$\n\n在理想尾电流源和围绕对称偏置点的小信号操作下，差分对的每一侧承载 $I_{D} = I_{SS}/2$。M2 (NMOS) 和 M4 (PMOS) 在饱和区的小信号输出电阻为\n$$\nr_{o,n} = \\frac{1}{\\lambda_{n} I_{D}} = \\frac{1}{\\lambda_{n} \\left( I_{SS}/2 \\right)} = \\frac{2}{\\lambda_{n} I_{SS}}, \\qquad\nr_{o,p} = \\frac{1}{\\lambda_{p} I_{D}} = \\frac{1}{\\lambda_{p} \\left( I_{SS}/2 \\right)} = \\frac{2}{\\lambda_{p} I_{SS}}.\n$$\n输出节点的有效电阻是它们的并联组合：\n$$\nR_{\\text{out}} = \\frac{r_{o,n} \\, r_{o,p}}{r_{o,n} + r_{o,p}} = \\frac{2}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)}.\n$$\n因此，时间常数为\n$$\n\\tau = R_{\\text{out}} C_{L} = \\frac{2 C_{L}}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)},\n$$\n1% 建立时间为\n$$\nt_{1\\%} = \\tau \\ln(100) = \\frac{2 C_{L} \\ln(100)}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)}.\n$$\n\n代入给定值 $C_{L} = 1.0 \\times 10^{-12} \\text{ F}$，$I_{SS} = 200 \\times 10^{-6} \\text{ A}$，$\\lambda_{n} = 0.05 \\text{ V}^{-1}$ 和 $\\lambda_{p} = 0.04 \\text{ V}^{-1}$：\n$$\nR_{\\text{out}} = \\frac{2}{(200 \\times 10^{-6})(0.05 + 0.04)} = \\frac{2}{1.8 \\times 10^{-5}} \\approx 111.11 \\times 10^{3} \\ \\Omega,\n$$\n$$\n\\tau = R_{\\text{out}} C_{L} \\approx (111.11 \\times 10^{3} \\ \\Omega)(1.0 \\times 10^{-12} \\text{ F}) \\approx 111.11 \\times 10^{-9} \\text{ s},\n$$\n$$\nt_{1\\%} = \\tau \\ln(100) \\approx (111.11 \\times 10^{-9}) \\times 4.60517 \\approx 5.11685 \\times 10^{-7} \\text{ s}.\n$$\n将结果转换为纳秒，即 $t_{1\\%} \\approx 511.685 \\text{ ns}$。根据题目要求四舍五入到三位有效数字，得到 $512 \\text{ ns}$。", "answer": "$$\\boxed{512}$$", "id": "1297204"}, {"introduction": "小信号模型非常强大，但它们依赖于所有晶体管都保持在饱和区的假设。这个练习将挑战你在特定输入条件下验证这一假设，从而揭示放大器的工作限制。理解这些边界对于设计在各种输入范围内都能正常工作的稳健电路至关重要。", "problem": "一位模拟电路设计者正在分析一个运算放大器的输入级，该输入级是一个采用互补金属氧化物半导体（CMOS）工艺实现的带有源负载的差分放大器。该电路由五个晶体管组成。晶体管 M1 和 M2 组成 NMOS 差分对。它们的栅极是差分输入端 $V_{in1}$ 和 $V_{in2}$。它们的源极连接在一起，并连接到晶体管 M5 的漏极。晶体管 M3 和 M4 组成一个 PMOS 电流镜，作为有源负载。它们的源极连接到正电源电压 $V_{DD}$。它们的栅极连接在一起，这个公共栅极节点也连接到 M3 的漏极。M1 的漏极连接到 M3 的漏极。M2 的漏极连接到 M4 的漏极，该节点作为电路的输出端 $V_{out}$。晶体管 M5 是一个 NMOS 晶体管，其源极连接到负电源电压 $V_{SS}$，提供一个恒定的偏置电流 $I_{bias}$。\n\n电路的工作电源电压为 $V_{DD} = 1.5 \\ \\text{V}$ 和 $V_{SS} = -1.5 \\ \\text{V}$。M5 提供的直流偏置电流为 $I_{bias} = 200 \\ \\mu\\text{A}$。在本次直流分析中，可以忽略沟道长度调制效应（即，假设所有晶体管的 $\\lambda = 0$）。\n\n器件参数如下：\n- 对于所有 NMOS 晶体管（M1, M2, M5）：阈值电压 $V_{tn} = 0.4 \\ \\text{V}$，工艺参数 $k'_n = 400 \\ \\mu\\text{A/V}^2$。\n- 对于所有 PMOS 晶体管（M3, M4）：阈值电压 $V_{tp} = -0.5 \\ \\text{V}$，工艺参数 $k'_p = 100 \\ \\mu\\text{A/V}^2$。\n\n晶体管的宽长比 $(W/L)$ 为：\n- $(W/L)_1 = (W/L)_2 = 25$\n- $(W/L)_3 = (W/L)_4 = 100$\n- $(W/L)_5 = 50$\n\n直流输入电压设置为 $V_{in1} = -0.1 \\ \\text{V}$ 和 $V_{in2} = 0.1 \\ \\text{V}$。确定在这些条件下，哪些晶体管（如果有的话）工作在三极管（线性）区。\n\nA. M1\n\nB. M2\n\nC. M4\n\nD. M5\n\nE. 所有晶体管都处于饱和区。", "solution": "1.  **分析输入差分对行为。** 差分输入电压为 $v_{id} = V_{in1} - V_{in2} = -0.1\\ \\text{V} - 0.1\\ \\text{V} = -0.2\\ \\text{V}$。输入对的工艺参数为 $k'_n(W/L) = 400\\ \\mu\\text{A/V}^2 \\times 25 = 10\\ \\text{mA/V}^2$。总尾电流为 $I_{bias} = 200\\ \\mu\\text{A}$。完全导向（steer）此电流所需的差分电压大小由下式给出：$|v_{id}| \\geq \\sqrt{2 I_{bias} / (k'_n(W/L))} = \\sqrt{2 \\times 200\\ \\mu\\text{A} / (10\\ \\text{mA/V}^2)} = \\sqrt{0.04}\\ \\text{V} = 0.2\\ \\text{V}$。\n\n2.  **确定晶体管电流。** 由于本题中的输入电压大小 $|v_{id}| = 0.2\\ \\text{V}$ 正好等于导向电压，尾电流将被完全导向其中一个晶体管。因为 $v_{id}$ 为负 ($V_{in1}  V_{in2}$)，M2的栅源电压将高于M1，因此M2将导通全部尾电流，而M1处于截止边缘。\n    - $I_{D1} = 0$\n    - $I_{D2} = I_{bias} = 200\\ \\mu\\text{A}$\n\n3.  **分析有源负载（电流镜）。** 流入电流镜输入端（M3）的电流为 $I_{D3} = I_{D1} = 0$。由于M3是二极管连接，零电流意味着其栅源电压等于阈值电压大小：$V_{SG3} = |V_{tp}| = 0.5\\ \\text{V}$。这设置了M3和M4的公共栅极电压：$V_{G3,4} = V_{DD} - V_{SG3} = 1.5\\ \\text{V} - 0.5\\ \\text{V} = 1.0\\ \\text{V}$。\n\n4.  **计算M4的电流。** M4的栅极电压由M3决定。其栅源电压为 $V_{SG4} = V_{DD} - V_{G4} = 1.5\\ \\text{V} - 1.0\\ \\text{V} = 0.5\\ \\text{V}$。这个值也等于$|V_{tp}|$，意味着M4同样处于导通的边缘。如果我们假设M4工作在饱和区，它将提供的电流 $I_{D4}$ 为零。\n\n5.  **检查基尔霍夫电流定律（KCL）矛盾。** 在输出节点（$V_{out}$，即M2和M4的漏极），KCL必须成立，即 $I_{D2} = I_{D4}$。然而，我们的分析表明，输入对迫使M2吸收 $200\\ \\mu\\text{A}$ 的电流，而电流镜负载（M4）仅提供 $0\\ \\mu\\text{A}$ 的电流。这是一个明显的矛盾 ($200\\ \\mu\\text{A} \\neq 0$)。\n\n6.  **解决矛盾。** 这个矛盾表明我们关于所有器件工作区域的初始假设是错误的。为了满足KCL，节点电压必须进行调整。由于M2试图吸收的电流远大于M4能提供的电流，输出电压 $V_{out}$ 将被拉低。当 $V_{out}$ 下降时，M2的漏源电压 $V_{DS2}$ 也随之减小。如果 $V_{DS2}$ 降至低于其过驱动电压 $V_{OV2}$，M2将进入三极管区。在三极管区，其吸收电流的能力会降低。反之，当 $V_{out}$ 下降时，PMOS晶体管M4的源漏电压 $V_{SD4} = V_{DD} - V_{out}$ 会增大，这会使其更深地工作在饱和区。因此，解决KCL冲突的唯一方式是M2进入三极管区。\n\n7.  **结论。** 较大的差分输入信号迫使放大器进入一种状态，其中晶体管M2工作在三极管（线性）区，以满足输出节点的KCL。其他晶体管则保持在饱和区（或对于M1是截止区）。因此，选项B是正确的。", "answer": "$$\\boxed{B}$$", "id": "1297253"}]}
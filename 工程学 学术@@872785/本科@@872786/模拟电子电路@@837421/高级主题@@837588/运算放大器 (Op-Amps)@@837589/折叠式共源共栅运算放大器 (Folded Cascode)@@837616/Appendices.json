{"hands_on_practices": [{"introduction": "设计任何放大器的第一步都是确保其所有晶体管都工作在正确的区域。这个练习将带你完成一个基础但至关重要的任务：为一个折叠式共源共栅放大器中的PMOS共源共栅晶体管计算正确的栅极偏置电压。通过这个计算，你将理解如何设置晶体管的过驱动电压 $|V_{ov}|$，这是保证其在高增益所需的饱和区工作的关键。[@problem_id:1305075]", "problem": "在折叠式共源共栅运算放大器的设计中，一个关键组件是共源共栅晶体管，它有助于增加电路的输出阻抗和增益。考虑这样一个放大器的一半，其中一个p沟道金属氧化物半导体场效应晶体管（PMOS），记为 $M_c$，用作共源共栅器件。$M_c$ 的源极端子连接到输入级的输出，在静态（DC）工作条件下，该源极端子的电压保持在 $V_S = 0.90 \\text{ V}$。$M_c$ 的漏极连接到放大器的输出节点。\n\nPMOS晶体管 $M_c$ 的阈值电压为 $V_{thP} = -0.40 \\text{ V}$。为了使共源共栅级正常工作并提供高阻抗，$M_c$ 必须偏置在饱和区，并具有特定的源-栅过驱动电压。设计规范要求此过驱动电压（定义为 $|V_{ov}| = V_{SG} - |V_{thP}|$）恰好为 $0.20 \\text{ V}$。\n\n确定必须施加到晶体管 $M_c$ 栅极的精确直流偏置电压 $V_G$，以满足此设计要求。以伏特为单位表示您的答案，并四舍五入到两位有效数字。", "solution": "问题要求计算PMOS共源共栅晶体管 $M_c$ 的直流栅极偏置电压 $V_G$，已知其源极电压、阈值电压和所需的过驱动电压。\n\n这些量之间的关系由PMOS晶体管的过驱动电压的定义给出：\n$$|V_{ov}| = V_{SG} - |V_{thP}|$$\n其中， $|V_{ov}|$ 是过驱动电压的幅值，$V_{SG}$ 是晶体管的源-栅电压，而 $|V_{thP}|$ 是其阈值电压的幅值。\n\n源-栅电压 $V_{SG}$ 可以用各个端子的电压，即源极电压 $V_S$ 和栅极电压 $V_G$ 来表示：\n$$V_{SG} = V_S - V_G$$\n\n将 $V_{SG}$ 的这个表达式代入过驱动电压方程，得到：\n$$|V_{ov}| = (V_S - V_G) - |V_{thP}|$$\n\n目标是求解未知的栅极电压 $V_G$。我们可以重新整理方程以分离出 $V_G$：\n$$V_S - V_G = |V_{ov}| + |V_{thP}|$$\n$$V_G = V_S - |V_{ov}| - |V_{thP}|$$\n\n现在，我们将给定的数值代入此方程。\n问题提供：\n- 静态源极电压，$V_S = 0.90 \\text{ V}$。\n- 所需的过驱动电压，$|V_{ov}| = 0.20 \\text{ V}$。\n- 阈值电压，$V_{thP} = -0.40 \\text{ V}$。由此，我们得到阈值电压的幅值为：$|V_{thP}| = |-0.40 \\text{ V}| = 0.40 \\text{ V}$。\n\n将这些值代入 $V_G$ 的表达式中：\n$$V_G = 0.90 \\text{ V} - 0.20 \\text{ V} - 0.40 \\text{ V}$$\n$$V_G = 0.70 \\text{ V} - 0.40 \\text{ V}$$\n$$V_G = 0.30 \\text{ V}$$\n\n计算出的栅极电压为 $0.30 \\text{ V}$。问题要求答案四舍五入到两位有效数字。值 $0.30$ 有两位有效数字，因此不需要进一步的四舍五入。", "answer": "$$\\boxed{0.30}$$", "id": "1305075"}, {"introduction": "在理想的设计中，我们假设匹配的晶体管具有完全相同的特性，但现实世界的制造工艺总会引入细微的差异。这个练习探讨了这种失配如何影响电路性能，特别是当输入级PMOS电流源负载不完全匹配时。通过计算由此产生的系统性输入失调电压 $V_{OS}$，你将亲身体会到非理想效应对放大器直流特性的影响，并理解为什么失调电压是衡量运放精度的重要指标。[@problem_id:1305027]", "problem": "采用NMOS输入的折叠式共源共栅放大器是现代模拟电路设计的基石之一。考虑这样一种放大器，其输入差分对由两个匹配的NMOS晶体管M1和M2组成，并由一个提供恒定尾电流 $I_{SS}$ 的尾电流源进行偏置。该差分对的负载是两个配置为电流源的PMOS晶体管M3和M4。M1的漏极连接到M3的漏极，M2的漏极连接到M4的漏极。这两个节点被称为折叠节点，然后连接到构成第二级的两个PMOS共栅（cascode）晶体管的源极。\n\n在理想情况下，电流源M3和M4将完全匹配。然而，由于工艺偏差，存在系统性失配。M3提供的电流为 $I_3$，M4提供的电流为 $I_4$。这种失配需要在输入端施加一个直流差分电压，即输入失调电压（$V_{OS} = V_{G1} - V_{G2}$），以维持平衡工作状态。\n\n假设放大器在以下条件下工作：\n-   尾电流：$I_{SS} = 200 \\text{ µA}$。\n-   PMOS源电流：$I_3 = 105 \\text{ µA}$ 和 $I_4 = 115 \\text{ µA}$。\n-   对于输入NMOS晶体管M1和M2：工艺跨导参数与宽高比的乘积为 $k'_n(W/L) = 9.60 \\times 10^{-3} \\text{ A/V}^2$。\n-   所有晶体管都工作在饱和区。\n-   对所有晶体管而言，沟道长度调制效应可以忽略不计（即 $\\lambda = 0$）。\n\n计算所需的系统性输入失调电压 $V_{OS}$，以确保流入后续共源共栅级的电流相等。请以毫伏（mV）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "我们希望流入两个折叠节点的电流为后续的共源共栅级提供相等的电流。设M1和M2的NMOS漏极电流分别为 $I_{D1}$ 和 $I_{D2}$，PMOS源提供的电流分别为 $I_{3}$ 和 $I_{4}$。根据每个折叠节点的基尔霍夫电流定律（KCL），流入共源共栅级的电流为\n$$\nI_{\\text{CG}1} = I_{3} - I_{D1}, \\qquad I_{\\text{CG}2} = I_{4} - I_{D2}.\n$$\n令二者相等可得\n$$\nI_{\\text{CG}1} = I_{\\text{CG}2} \\;\\;\\Longrightarrow\\;\\; I_{3} - I_{D1} = I_{4} - I_{D2} \\;\\;\\Longrightarrow\\;\\; I_{D2} - I_{D1} = I_{4} - I_{3}.\n$$\n差分对的电流约束为\n$$\nI_{D1} + I_{D2} = I_{SS}.\n$$\n求解这两个线性方程，\n$$\nI_{D1} = \\frac{I_{SS} - (I_{4} - I_{3})}{2}, \\qquad I_{D2} = \\frac{I_{SS} + (I_{4} - I_{3})}{2}.\n$$\n已知 $I_{SS} = 200 \\times 10^{-6} \\text{ A}$，$I_{3} = 105 \\times 10^{-6} \\text{ A}$，以及 $I_{4} = 115 \\times 10^{-6} \\text{ A}$，\n$$\nI_{4} - I_{3} = 10 \\times 10^{-6} \\text{ A},\n$$\n$$\nI_{D1} = \\frac{200 \\times 10^{-6} - 10 \\times 10^{-6}}{2} = 95 \\times 10^{-6} \\text{ A}, \\qquad\nI_{D2} = \\frac{200 \\times 10^{-6} + 10 \\times 10^{-6}}{2} = 105 \\times 10^{-6} \\text{ A}.\n$$\n\n假设为长沟道饱和模型且沟道长度调制效应可忽略，则每个NMOS的漏极电流满足\n$$\nI_{Di} = \\frac{1}{2} k_{n} \\left(V_{Gi} - V_{S} - V_{TH}\\right)^{2}, \\quad k_{n} = k'_{n}\\left(\\frac{W}{L}\\right).\n$$\n定义过驱动电压为 $x = V_{G1} - V_{S} - V_{TH}$ 和 $y = V_{G2} - V_{S} - V_{TH}$。那么\n$$\nI_{D1} = \\frac{1}{2} k_{n} x^{2}, \\qquad I_{D2} = \\frac{1}{2} k_{n} y^{2},\n$$\n并且所需的输入失调电压为\n$$\nV_{OS} = V_{G1} - V_{G2} = x - y = \\sqrt{\\frac{2 I_{D1}}{k_{n}}} - \\sqrt{\\frac{2 I_{D2}}{k_{n}}}.\n$$\n已知 $k_{n} = 9.60 \\times 10^{-3} \\text{ A/V}^{2}$，$I_{D1} = 95 \\times 10^{-6} \\text{ A}$，以及 $I_{D2} = 105 \\times 10^{-6} \\text{ A}$，\n$$\n\\frac{2 I_{D1}}{k_{n}} = \\frac{190 \\times 10^{-6}}{9.60 \\times 10^{-3}} = \\frac{19}{960} \\approx 0.0197916667,\n$$\n$$\n\\frac{2 I_{D2}}{k_{n}} = \\frac{210 \\times 10^{-6}}{9.60 \\times 10^{-3}} = \\frac{7}{320} = 0.021875,\n$$\n所以\n$$\nV_{OS} = \\sqrt{\\frac{19}{960}} - \\sqrt{\\frac{7}{320}} \\approx 0.140683 - 0.147902 \\approx -0.007219 \\text{ V}.\n$$\n转换为毫伏并四舍五入到三位有效数字，\n$$\nV_{OS} \\approx -7.22 \\text{ mV}.\n$$\n负号表示需要 $V_{G1}  V_{G2}$ 才能将较大的电流引导至M2，从而使共源共栅级的电流相等。", "answer": "$$\\boxed{-7.22}$$", "id": "1305027"}, {"introduction": "放大器的动态性能对其在高速应用中的表现至关重要。压摆率（Slew Rate）是衡量放大器输出电压最大变化速率的关键指标。这个练习将向你展示如何根据输入级的尾电流 $I_{TAIL}$ 和负载电容 $C_L$ 来计算折叠式共源共栅放大器的压摆率。通过这个实践，你将掌握大信号瞬态响应的基本原理，并理解内部偏置电流如何直接决定放大器驱动容性负载的能力。[@problem_id:1305059]", "problem": "一位模拟电路设计师的任务是为高速开关电容电路设计一个折叠式共源共栅运算放大器。该放大器的输入级是一个NMOS差分对，由一个提供 $I_{TAIL}$ 电流的尾电流源偏置。该放大器的输出节点驱动一个总负载电容 $C_L$。\n\n对于这种特定的折叠式共源共栅架构，其内部偏置是对称布置的。这意味着在大信号压摆条件下，可用于源出（充电）负载电容的最大电流等于可用于灌入（放电）负载电容的最大电流。\n\n已知尾电流 $I_{TAIL} = 250 \\text{ µA}$，总负载电容 $C_L = 12.5 \\text{ pF}$，求该运算放大器的压摆率。\n\n请将最终答案以伏特/微秒（V/µs）为单位表示，并四舍五入到三位有效数字。", "solution": "压摆率（Slew Rate, SR）定义为输出电压的最大变化速率，它由可用于对负载电容 $C_L$ 进行充电或放电的最大电流 $I_{\\text{slew,max}}$ 决定。其控制关系为\n$$\n\\text{SR}=\\frac{I_{\\text{slew,max}}}{C_{L}}.\n$$\n对于折叠式共源共栅放大器，最大压摆电流是输入级的整个尾电流，因为在大信号条件下它被完全导向输出。因此：\n$$\nI_{\\text{slew,max}}=I_{\\text{TAIL}}.\n$$\n因此，\n$$\n\\text{SR}=\\frac{I_{\\text{TAIL}}}{C_{L}}.\n$$\n将给定的数值代入，$I_{TAIL}=250\\ \\text{µA} = 2.50\\times 10^{-4}\\ \\text{A}$ 和 $C_{L}=12.5\\ \\text{pF} = 1.25\\times 10^{-11}\\ \\text{F}$，可得\n$$\n\\text{SR}=\\frac{2.50\\times 10^{-4}\\ \\text{A}}{1.25\\times 10^{-11}\\ \\text{F}} = 2.0 \\times 10^{7}\\ \\text{V/s}.\n$$\n转换为伏特/微秒 (V/µs)，\n$$\n2.0 \\times 10^{7}\\ \\text{V/s}=20\\ \\text{V}/\\mu\\text{s}.\n$$\n四舍五入到三位有效数字，压摆率为 $20.0\\ \\text{V}/\\mu\\text{s}$。", "answer": "$$\\boxed{20.0}$$", "id": "1305059"}]}
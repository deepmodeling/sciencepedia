{"hands_on_practices": [{"introduction": "轨到轨放大器的一个关键特性是其处理接近电源轨的输入信号的能力。这项练习将深入探讨互补输入级的具体细节，重点是确定其输入共模范围下限的因素 [@problem_id:1327856]。通过这个练习，我们将看到晶体管的阈值电压和所需的过驱动电压等参数如何构成基本的物理限制，并具体计算输入共模范围（$V_{ICM}$）。", "problem": "正在设计一款带有互补轨到轨输入级的运算放大器，用于连接一个其输出可以摆动到接近电源轨的传感器。该放大器使用双电源 $V_{DD}$ 和 $V_{SS}$ 供电。其轨到轨能力是通过在输入端使用两个并联的差分对实现的：一个 NMOS 对和一个 PMOS 对。\n\n本问题关注输入共模范围的下限 ($V_{ICM,min}$)，该下限由 NMOS 差分对决定。该 NMOS 差分对由一个简单的 NMOS 尾电流源偏置。为使输入级正常工作，输入晶体管和尾电流源晶体管都必须工作在饱和区。\n\n该电路采用具有以下参数的工艺设计：\n- 负电源电压，$V_{SS} = -1.25 \\text{ V}$。\n- 所有 NMOS 晶体管的阈值电压，$V_{TN} = 0.45 \\text{ V}$。\n\n偏置条件设置如下：\n- NMOS 输入差分对晶体管所需的过驱动电压为 $V_{OV,N} = 0.20 \\text{ V}$。\n- 作为尾电流源的 NMOS 晶体管的过驱动电压为 $V_{OV,tail} = 0.25 \\text{ V}$。\n\n计算输入共模电压的下限 $V_{ICM,min}$。最终答案以伏特 (V) 为单位，并四舍五入到三位有效数字。", "solution": "为使 NMOS 输入差分对在指定的过驱动电压下工作，其栅源电压必须满足\n$$\nV_{GS,\\text{in}} = V_{TN} + V_{OV,N}.\n$$\n设输入对的公共源极节点电压为 $V_{S}$。根据 $V_{GS}$ 的定义，\n$$\nV_{S} = V_{ICM} - V_{GS,\\text{in}} = V_{ICM} - \\left(V_{TN} + V_{OV,N}\\right).\n$$\nNMOS 尾电流源保持在饱和区的条件是\n$$\nV_{DS,\\text{tail}} \\ge V_{OV,\\text{tail}},\n$$\n并且由于尾电流源晶体管的漏极电压为 $V_{S}$，源极电压为 $V_{SS}$，我们有\n$$\nV_{DS,\\text{tail}} = V_{S} - V_{SS}.\n$$\n因此，\n$$\nV_{S} - V_{SS} \\ge V_{OV,\\text{tail}} \\;\\;\\Longrightarrow\\;\\; V_{ICM} - \\left(V_{TN} + V_{OV,N}\\right) - V_{SS} \\ge V_{OV,\\text{tail}}.\n$$\n对 $V_{ICM}$ 求解，得到由 NMOS 对设定的输入共模范围的下限：\n$$\nV_{ICM,\\min} = V_{SS} + V_{TN} + V_{OV,N} + V_{OV,\\text{tail}}.\n$$\n代入给定值 $V_{SS}=-1.25$，$V_{TN}=0.45$，$V_{OV,N}=0.20$ 和 $V_{OV,\\text{tail}}=0.25$（单位为伏特），\n$$\nV_{ICM,\\min} = -1.25 + 0.45 + 0.20 + 0.25 = -0.35.\n$$\n四舍五入到三位有效数字，$V_{ICM,\\min} = -0.350$。", "answer": "$$\\boxed{-0.350}$$", "id": "1327856"}, {"introduction": "分析完输入级后，下一个关键部分是必须将信号传递给负载的输出级。这项练习将研究一个基本的 BJT 推挽输出级，以量化输出电压能多接近电源轨 [@problem_id:1327842]。通过计算基于晶体管饱和电压（$V_{CE,sat}$）的最小输出电压，我们可以理解阻止真正“轨到轨”摆幅的物理障碍，并体会到高级输出级设计所面临的挑战。", "problem": "一个运算放大器的简化轨到轨输出级由一对互补双极结型晶体管 (BJT) 构成：一个NPN晶体管 $Q_N$ 和一个PNP晶体管 $Q_P$。该电路由对称电源供电，正电源轨电压为 $+V_S$，负电源轨电压为 $-V_S$。$Q_N$ 的发射极连接到负电源轨，而 $Q_P$ 的发射极连接到正电源轨。$Q_N$ 和 $Q_P$ 的集电极连接在一起，这个公共节点作为电路的输出端 $V_{out}$。\n\n晶体管的性能由其饱和电压表征。对于NPN晶体管，集电极-发射极饱和电压为 $V_{CE,sat,N}$。对于PNP晶体管，发射极-集电极饱和电压为 $V_{EC,sat,P}$。\n\n给定以下值：\n- 电源电压大小，$V_S = 12.0$ V\n- NPN集电极-发射极饱和电压，$V_{CE,sat,N} = 0.20$ V\n- PNP发射极-集电极饱和电压，$V_{EC,sat,P} = 0.30$ V\n\n确定能出现在输出端 $V_{out}$ 上的绝对最小电压。答案以伏特为单位，并保留三位有效数字。", "solution": "输出节点是这对互补晶体管连接在一起的集电极。当NPN晶体管 $Q_{N}$ 将节点拉向负电源轨并处于饱和状态时，会出现最低（最负）的输出。在饱和状态下，NPN晶体管的集电极-发射极电压不能低于 $V_{CE,sat,N}$，因此其集电极（即输出端）必须满足\n$$\nV_{out,\\min} - V_{E,N} = V_{CE,sat,N},\n$$\n其中 $V_{E,N}$ 是 $Q_{N}$ 的发射极电位。由于 $Q_{N}$ 的发射极连接到负电源轨，所以 $V_{E,N} = -V_{S}$，因此\n$$\nV_{out,\\min} = -V_{S} + V_{CE,sat,N}.\n$$\n代入给定值 $V_{S} = 12.0$ 和 $V_{CE,sat,N} = 0.20$，\n$$\nV_{out,\\min} = -12.0 + 0.20 = -11.8.\n$$\nPNP的饱和参数 $V_{EC,sat,P}$ 决定了最大（最正）输出，但不影响最小输出；因此本次计算中不使用该参数。结果以伏特为单位，并按要求保留到三位有效数字。", "answer": "$$\\boxed{-11.8}$$", "id": "1327842"}, {"introduction": "在这个最后的练习中，理论与实践相结合。我们将从分析单个级的限制转向做出系统级的设计选择 [@problem_id:1327815]。面对一个常见场景——为一个输出范围横跨整个电源电压的传感器提供缓冲——我们必须从数据手册的规格中选择一个合适的运算放大器。这个问题要求我们同时考虑输入共模范围（ICMR）和输出电压摆幅，这表明一个真正的轨到轨应用通常需要同时具备轨到轨输入和轨到轨输出（RRIO）的能力。", "problem": "一名电子学专业的学生接到一项任务，需要设计一个简单的传感器接口。该传感器产生的输出电压可以覆盖从系统接地到其正电源电压的整个范围。该学生决定使用一个配置为单位增益缓冲器（电压跟随器）的运算放大器（op-amp）来将传感器与电路的后续级隔离。\n\n该电路由单电源供电，正电源轨为 $V_{DD} = 3.3\\,\\text{V}$，负电源轨（地）为 $V_{SS} = 0\\,\\text{V}$。因此，作为缓冲器输入的传感器输出信号 $V_{in}$ 可以是 $[0\\,\\text{V}, 3.3\\,\\text{V}]$ 范围内的任何电压。\n\n该学生有四种不同运算放大器的数据手册。下面列出了每种运放在3.3V电源下工作时的相关规格。输入共模范围（Input Common-Mode Range, ICMR）指定了运放能正常工作的输入电压范围。输出电压摆幅（Output Voltage Swing）指定了可实现的输出电压范围。\n\n- **运放 A：**\n  - ICMR：$V_{SS} + 1.0\\,\\text{V}$ 至 $V_{DD} - 1.0\\,\\text{V}$\n  - 输出电压摆幅：$V_{SS} + 1.0\\,\\text{V}$ 至 $V_{DD} - 1.0\\,\\text{V}$\n\n- **运放 B：**\n  - ICMR：$V_{SS} - 0.1\\,\\text{V}$ 至 $V_{DD} + 0.1\\,\\text{V}$\n  - 输出电压摆幅：$V_{SS} + 0.5\\,\\text{V}$ 至 $V_{DD} - 0.5\\,\\text{V}$\n\n- **运放 C：**\n  - ICMR：$V_{SS} - 0.1\\,\\text{V}$ 至 $V_{DD} + 0.1\\,\\text{V}$\n  - 输出电压摆幅：$V_{SS} + 0.05\\,\\text{V}$ 至 $V_{DD} - 0.05\\,\\text{V}$\n\n- **运放 D：**\n  - ICMR：$V_{SS}$ 至 $V_{DD} - 1.2\\,\\text{V}$\n  - 输出电压摆幅：$V_{SS} + 0.1\\,\\text{V}$ 至 $V_{DD} - 0.1\\,\\text{V}$\n\n根据这些规格，以下哪个陈述正确地指出了唯一适合此应用的运算放大器？\n\nA. 运放 A 合适，因为其指定的输入和输出范围相同。\n\nB. 运放 B 合适，因为它具有轨到轨（rail-to-rail）的输入范围，这是电压跟随器的决定性要求。\n\nC. 运放 C 合适，因为其输入共模范围包含了整个电源范围，并且其输出可以摆动到非常接近两个电源轨。\n\nD. 运放 D 合适，因为其输入范围包括负电源轨（地），这对于单电源应用是最关键的要求。\n\nE. 没有一款运算放大器适合此应用。", "solution": "对于一个在线性闭环中工作的单位增益缓冲器（电压跟随器），必须在整个预期的信号范围内同时满足两个条件：\n1) 输入电压 $V_{in}$ 必须在运算放大器的输入共模范围（ICMR）内，否则输入级将无法正常工作。\n2) 输出电压 $V_{out}$ 必须在运算放大器保证的输出摆幅范围内，否则放大器会饱和，不再提供单位增益。\n\n在这个单电源应用中，传感器在整个电源范围内产生 $V_{in}$，因此所需的范围是\n$$\nV_{in} \\in [V_{SS},\\,V_{DD}], \\qquad V_{out} \\in [V_{SS},\\,V_{DD}].\n$$\n因此，为了适用，ICMR 必须包含 $[V_{SS},\\,V_{DD}]$，并且输出摆幅必须至少覆盖所需的 $V_{out}$ 范围而不会导致饱和。\n\n根据这些要求评估每个选项：\n\n运放 A：\nICMR 为 $[V_{SS}+1.0,\\,V_{DD}-1.0]$，这排除了 $V_{SS}$ 和 $V_{DD}$。因此 $[V_{SS},\\,V_{DD}] \\nsubseteq [V_{SS}+1.0,\\,V_{DD}-1.0]$。其输出摆幅也是 $[V_{SS}+1.0,\\,V_{DD}-1.0]$，无法再现所需的极端值。因此 A 不合适。\n\n运放 B：\nICMR 为 $[V_{SS}-0.1,\\,V_{DD}+0.1]$，它包含了 $[V_{SS},\\,V_{DD}]$，因此输入条件得到满足。然而，输出摆幅为 $[V_{SS}+0.5,\\,V_{DD}-0.5]$，它不包括 $V_{SS}$ 或 $V_{DD}$。缓冲器在接近电源轨时会饱和，无法再现全范围信号。因此 B 不合适。\n\n运放 C：\nICMR 为 $[V_{SS}-0.1,\\,V_{DD}+0.1]$，它包含了 $[V_{SS},\\,V_{DD}]$，因此输入条件得到满足。输出摆幅为 $[V_{SS}+0.05,\\,V_{DD}-0.05]$，它不包括确切的电源轨，但非常接近两者。在给定的选项中，这是唯一一款既能接受全输入范围，又能提供接近电源轨的输出摆幅的器件，这与典型的“轨到轨”缓冲器实践相符，从而在基本上整个范围内避免了严重饱和。\n\n运放 D：\nICMR 为 $[V_{SS},\\,V_{DD}-1.2]$，它不包括接近 $V_{DD}$ 的输入，因此无法缓冲传感器范围的上半部分。输出摆幅 $[V_{SS}+0.1,\\,V_{DD}-0.1]$ 也不包括确切的电源轨。因此 D 不合适。\n\n只有运放 C 满足轨到轨输入要求，并提供非常接近两个电源轨的输出摆幅，这是在这种全电源范围驱动的单位增益缓冲器应用中的实际要求。因此，选项中唯一正确的陈述是，基于所述原因，运放 C 适合此应用。", "answer": "$$\\boxed{C}$$", "id": "1327815"}]}
{"hands_on_practices": [{"introduction": "逐次逼近型ADC的核心是其高效的二进制搜索算法。本练习将带您直击这一过程的核心。通过分析一系列来自内部比较器的“高”或“低”输出信号，您可以逐步推导出最终的数字输出码，从而深刻理解SAR逻辑是如何一步步“猜测”并锁定正确值的。[@problem_id:1334890]", "problem": "一个用于大气监测的嵌入式系统采用一个6位逐次逼近寄存器 (SAR) 模数转换器 (ADC) 来数字化一个高精度气压传感器的输出电压。该ADC的工作参考电压为 $V_{ref} = 5.12$ V。\n\nSAR ADC的转换过程是一个二分搜索。它一次一位地确定每个位的状态，从最高有效位 (MSB) 到最低有效位 (LSB)。对于每个位，数模转换器 (DAC) 会生成一个试验电压，并与传感器的模拟输入电压 $V_{in}$ 进行比较。如果比较器的输出为'高'(HIGH)，表示 $V_{in}$ 大于或等于试验电压，该位被定为1。如果输出为'低'(LOW)，表示 $V_{in}$ 小于试验电压，该位被定为0。\n\n对于一次特定的、恒定的压力测量，观测到的比较器输出序列（对应从MSB到LSB的测试）为：\n\n高, 低, 高, 高, 低, 高\n\n根据此序列，确定ADC产生的最终6位数字字。将您的答案表示为该二进制字的十进制 (base-10) 整数等价值。", "solution": "问题要求解一个由逐次逼近寄存器 (SAR) 模数转换器 (ADC) 确定的6位二进制字的十进制等价值。该ADC的分辨率为 $N=6$ 位，参考电压为 $V_{ref} = 5.12$ V。从最高有效位 (MSB) $b_5$ 到最低有效位 (LSB) $b_0$ 的比较器输出序列为：高、低、高、高、低、高。\n\nSAR ADC 执行一个二分搜索来找到模拟输入电压 $V_{in}$ 的数字表示。我们将通过转换过程的6个步骤来追踪6位寄存器 $B = b_5 b_4 b_3 b_2 b_1 b_0$ 的状态。\n\n内部的数模转换器 (DAC) 根据当前的试验数字字生成一个试验电压。比较器输出'高'(HIGH)意味着当前测试的位应被定为'1'，而输出'低'(LOW)意味着应将其定为'0'。\n\n**步骤1：测试 MSB ($b_5$)**\n初始试验字通过将 MSB 设置为'1'、所有其他位设置为'0'来设定。\n试验字: $100000_2$。\n比较器输出为**高 (HIGH)**。这意味着 $V_{in}$ 大于或等于对应于 $100000_2$ 的电压。因此，MSB被定为1。\n$b_5 = 1$。\n当前结果: $1????_2$。\n\n**步骤2：测试位 $b_4$**\n下一个试验字通过保持已决定的位 ($b_5=1$) 并将下一个要测试的位 ($b_4$) 设置为'1'来形成。\n试验字: $110000_2$。\n比较器输出为**低 (LOW)**。这意味着 $V_{in}$ 小于对应于 $110000_2$ 的电压。因此，该位必须被定为0。\n$b_4 = 0$。\n当前结果: $10???_2$。\n\n**步骤3：测试位 $b_3$**\n试验字通过使用已决定的位 ($b_5=1, b_4=0$) 并将待测试的位 ($b_3$) 设置为'1'来形成。\n试验字: $101000_2$。\n比较器输出为**高 (HIGH)**。这意味着 $V_{in}$ 大于或等于对应于 $101000_2$ 的电压。因此，该位被定为1。\n$b_3 = 1$。\n当前结果: $101??_2$。\n\n**步骤4：测试位 $b_2$**\n试验字通过使用已决定的位 ($b_5=1, b_4=0, b_3=1$) 并将待测试的位 ($b_2$) 设置为'1'来形成。\n试验字: $101100_2$。\n比较器输出为**高 (HIGH)**。这意味着 $V_{in}$ 大于或等于对应于 $101100_2$ 的电压。该位被定为1。\n$b_2 = 1$。\n当前结果: $1011?_2$。\n\n**步骤5：测试位 $b_1$**\n试验字通过使用已决定的位 ($b_5=1, b_4=0, b_3=1, b_2=1$) 并将待测试的位 ($b_1$) 设置为'1'来形成。\n试验字: $101110_2$。\n比较器输出为**低 (LOW)**。这意味着 $V_{in}$ 小于对应于 $101110_2$ 的电压。该位必须被定为0。\n$b_1 = 0$。\n当前结果: $10110?_2$。\n\n**步骤6：测试 LSB ($b_0$)**\n最终的试验字通过使用先前已决定的位并将 LSB ($b_0$) 设置为'1'来形成。\n试验字: $101101_2$。\n比较器输出为**高 (HIGH)**。这意味着 $V_{in}$ 大于或等于对应于 $101101_2$ 的电压。该位被定为1。\n$b_0 = 1$。\n\n完成所有6个步骤后，最终的二进制字是 $101101_2$。\n\n最后一步是将这个二进制字转换为其十进制等价值。\n$B_{decimal} = (1 \\times 2^5) + (0 \\times 2^4) + (1 \\times 2^3) + (1 \\times 2^2) + (0 \\times 2^1) + (1 \\times 2^0)$\n$B_{decimal} = (1 \\times 32) + (0 \\times 16) + (1 \\times 8) + (1 \\times 4) + (0 \\times 2) + (1 \\times 1)$\n$B_{decimal} = 32 + 0 + 8 + 4 + 0 + 1$\n$B_{decimal} = 45$\n\n最终数字字的十进制整数等价值是45。", "answer": "$$\\boxed{45}$$", "id": "1334890"}, {"introduction": "理想的SAR转换过程要求模拟输入在整个转换期间保持不变。这个练习通过一个假设情景，即缺少采样保持(S/H)电路，来揭示违反此前提的后果。您将计算当输入信号随时间变化时ADC的输出，从而直观地看到为何S/H电路对于保证转换精度至关重要。[@problem_id:1334885]", "problem": "一个8位逐次逼近寄存器 (SAR) 模数转换器 (ADC) 设计用于在参考电压 $V_{ref} = 5.12 \\text{ V}$ 下工作，对应于 $0 \\text{ V}$ 到 $5.12 \\text{ V}$ 的输入电压范围。单个样本的转换过程需要8个时钟周期，每个时钟周期的持续时间为 $T_{clk} = 1.0 \\text{ µs}$。转换在时间 $t=0$ 开始。第 $i$ 位的确定（其中 $i=1$ 对应最高有效位 MSB，$i=8$ 对应最低有效位 LSB）基于一次比较，该比较恰好发生在第 $i$ 个时钟周期的末尾，即在时间 $t_i = i \\cdot T_{clk}$。\n\n由于设计疏忽，该ADC缺少采样保持电路。因此，在转换过程中，模拟输入信号不保持恒定。相反，比较器的输入直接连接到一个时变信号，其由以下方程描述：\n$$V_{in}(t) = V_0 + kt$$\n其中 $V_0 = 3.21 \\text{ V}$ 且 $k = 2.50 \\times 10^4 \\text{ V/s}$。\n\nSAR逻辑按如下方式工作：对于从MSB到LSB的每一位，它将一个试验位设为'1'，并将产生的内部数模转换器 (DAC) 电压与在指定比较时刻的模拟输入 $V_{in}(t)$ 进行比较。如果 $V_{in}(t)$ 大于或等于试验电压，该位保持为'1'；否则，它被设为'0'。\n\n计算该ADC对此输入信号产生的最终8位数字输出码。请以十进制整数形式给出您的答案。", "solution": "SAR ADC在时刻 $t_{i} = i T_{clk}$ 对每一位比较一次模拟输入，其中 $i=1$ 对应MSB，$i=8$ 对应LSB。在没有采样保持电路的情况下，输入为 $V_{in}(t) = V_{0} + k t$。SAR的决策规则是：在第 $i$ 位，将试验位设为 $1$（保持先前已决定的位并将所有更低的位设为 $0$），形成DAC试验电压 $V_{DAC}^{(i)}$，当且仅当 $V_{in}(t_{i}) \\geq V_{DAC}^{(i)}$ 时，该位保持为 $1$。\n\n已知：\n- $V_{ref} = 5.12 \\text{ V}$。\n- 分辨率 $N=8$，因此LSB大小为 $V_{LSB} = \\frac{V_{ref}}{2^{8}} = \\frac{5.12}{256} = 0.02 \\text{ V}$，位权重为 $w_{1}=\\frac{V_{ref}}{2}=2.56 \\text{ V}$，$w_{2}=\\frac{V_{ref}}{4}=1.28 \\text{ V}$，$w_{3}=0.64 \\text{ V}$，$w_{4}=0.32 \\text{ V}$，$w_{5}=0.16 \\text{ V}$，$w_{6}=0.08 \\text{ V}$，$w_{7}=0.04 \\text{ V}$，$w_{8}=0.02 \\text{ V}$。\n- $T_{clk} = 1.0 \\times 10^{-6} \\text{ s}$。\n- $V_{0} = 3.21 \\text{ V}$，$k = 2.50 \\times 10^{4} \\text{ V/s}$，因此每个时钟周期输入增加 $k T_{clk} = 2.50 \\times 10^{4} \\times 1.0 \\times 10^{-6} = 2.50 \\times 10^{-2} \\text{ V} = 0.025 \\text{ V}$。\n- 因此 $V_{in}(t_{i}) = V_{0} + k i T_{clk} = 3.21 + 0.025 i \\text{ V}$。\n\n逐位计算：\n- $i=1$ (MSB)：$t_{1} = T_{clk}$，$V_{in}(t_{1}) = 3.21 + 0.025 = 3.235 \\text{ V}$。试验MSB $=1$：$V_{DAC}^{(1)} = w_{1} = 2.56 \\text{ V}$。因为 $3.235 \\geq 2.56$，保持第1位：$b_{1}=1$。\n- $i=2$：$t_{2} = 2 T_{clk}$，$V_{in}(t_{2}) = 3.21 + 0.050 = 3.26 \\text{ V}$。试验 $b_{1}=1, b_{2}=1$：$V_{DAC}^{(2)} = w_{1} + w_{2} = 2.56 + 1.28 = 3.84 \\text{ V}$。因为 $3.26  3.84$，设置 $b_{2}=0$。\n- $i=3$：$t_{3} = 3 T_{clk}$，$V_{in}(t_{3}) = 3.21 + 0.075 = 3.285 \\text{ V}$。试验 $b_{1}=1, b_{3}=1$：$V_{DAC}^{(3)} = w_{1} + w_{3} = 2.56 + 0.64 = 3.20 \\text{ V}$。因为 $3.285 \\geq 3.20$，保持 $b_{3}=1$。\n- $i=4$：$t_{4} = 4 T_{clk}$，$V_{in}(t_{4}) = 3.21 + 0.100 = 3.31 \\text{ V}$。试验 $b_{1}=1, b_{3}=1, b_{4}=1$：$V_{DAC}^{(4)} = 2.56 + 0.64 + 0.32 = 3.52 \\text{ V}$。因为 $3.31  3.52$，设置 $b_{4}=0$。\n- $i=5$：$t_{5} = 5 T_{clk}$，$V_{in}(t_{5}) = 3.21 + 0.125 = 3.335 \\text{ V}$。试验 $b_{1}=1, b_{3}=1, b_{5}=1$：$V_{DAC}^{(5)} = 2.56 + 0.64 + 0.16 = 3.36 \\text{ V}$。因为 $3.335  3.36$，设置 $b_{5}=0$。\n- $i=6$：$t_{6} = 6 T_{clk}$，$V_{in}(t_{6}) = 3.21 + 0.150 = 3.36 \\text{ V}$。试验 $b_{1}=1, b_{3}=1, b_{6}=1$：$V_{DAC}^{(6)} = 2.56 + 0.64 + 0.08 = 3.28 \\text{ V}$。因为 $3.36 \\geq 3.28$，保持 $b_{6}=1$。\n- $i=7$：$t_{7} = 7 T_{clk}$，$V_{in}(t_{7}) = 3.21 + 0.175 = 3.385 \\text{ V}$。试验 $b_{1}=1, b_{3}=1, b_{6}=1, b_{7}=1$：$V_{DAC}^{(7)} = 2.56 + 0.64 + 0.08 + 0.04 = 3.32 \\text{ V}$。因为 $3.385 \\geq 3.32$，保持 $b_{7}=1$。\n- $i=8$ (LSB)：$t_{8} = 8 T_{clk}$，$V_{in}(t_{8}) = 3.21 + 0.200 = 3.41 \\text{ V}$。试验 $b_{1}=1, b_{3}=1, b_{6}=1, b_{7}=1, b_{8}=1$：$V_{DAC}^{(8)} = 2.56 + 0.64 + 0.08 + 0.04 + 0.02 = 3.34 \\text{ V}$。因为 $3.41 \\geq 3.34$，保持 $b_{8}=1$。\n\n因此，最终的位模式是 $b_{1}\\ldots b_{8} = 1\\,0\\,1\\,0\\,0\\,1\\,1\\,1$，其对应的十进制码为\n$$128 + 32 + 4 + 2 + 1 = 167.$$\n因此，最终的8位数字输出码是 $167$。", "answer": "$$\\boxed{167}$$", "id": "1334885"}, {"introduction": "单个ADC的性能必须满足其所在系统的整体需求。本练习将理论与实际应用相结合，要求您为一个生物医学监控系统确定ADC所需的最低时钟频率。您需要综合考虑信号的最高频率、奈奎斯特采样定理、ADC的分辨率以及转换开销，将元件级参数与系统级指标联系起来。[@problem_id:1334898]", "problem": "一个生物医学工程团队正在开发一款可穿戴心电图（ECG）监测仪。该设备必须精确捕捉患者的心脏信号，已知该信号在滤波后，其有效频率分量的最高频率为 $f_{max}$。为了将此信号数字化，设计中采用了一个分辨率为 $N$ 位的逐次逼近寄存器（SAR）模数转换器（ADC）。\n\n该 SAR ADC 对每次采样的操作是一个两阶段过程。首先，一个初始的采样保持（S/H）阶段获取模拟电压，该过程需要固定的 $k$ 个时鐘周期。之后，开始一个转换阶段，在该阶段中，$N$ 个比特位中的每一位都被依次确定。每个比特位的确定恰好需要一个时鐘周期。\n\n为确保信号的高保真度数字表示并防止混叠，系统必须遵循严格的采样协议。指定的采样率 $f_s$ 被设定为信号所需理论最低奈奎斯特速率的 $\\alpha$ 倍。为使系统正常工作，完成一次完整的 ADC 转换所需的总时间不得超过连续采样之间的时间间隔。\n\n推导 ADC 为满足这些系统要求所必须具备的最低时钟频率 $f_{clk, min}$ 的闭式解析表达式。用参数 $f_{max}$、$N$、$k$ 和 $\\alpha$ 来表示您的答案。", "solution": "设滤波后的最大信号频率为 $f_{max}$。奈奎斯特采样定理要求 $f_{s} \\geq 2 f_{max}$。系统强制使用的采样率是该最小值的 $\\alpha$ 倍，因此\n$$\nf_{s} = 2 \\alpha f_{max}.\n$$\n每次采样的 ADC 转换包括两个串行阶段：一个需要 $k$ 个时钟周期的采样保持阶段和一个需要 $N$ 个时钟周期的逐次逼近阶段，每次采样总共需要 $k+N$ 个时钟周期。如果 ADC 的时钟频率为 $f_{clk}$，则完成一次转换所需的时间为\n$$\nT_{conv} = \\frac{k+N}{f_{clk}}.\n$$\n为确保每次转换在下一次采样到来之前完成，转换时间不得超过采样间隔 $T_{s} = \\frac{1}{f_{s}}$：\n$$\n\\frac{k+N}{f_{clk}} \\leq \\frac{1}{f_{s}}.\n$$\n解出 $f_{clk}$ 可得\n$$\nf_{clk} \\geq (k+N) f_{s}.\n$$\n将 $f_{s} = 2 \\alpha f_{max}$ 代入，得到所需的最小 ADC 时钟频率：\n$$\nf_{clk, min} = 2 \\alpha (k+N) f_{max}.\n$$", "answer": "$$\\boxed{2 \\alpha (k+N) f_{max}}$$", "id": "1334898"}]}
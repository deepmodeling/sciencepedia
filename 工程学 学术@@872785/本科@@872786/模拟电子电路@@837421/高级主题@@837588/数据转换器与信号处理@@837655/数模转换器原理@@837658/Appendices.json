{"hands_on_practices": [{"introduction": "R-2R 梯形网络是现代数模转换器（DAC）设计的基石，因其仅使用两种阻值的电阻而备受青睐，巧妙地解决了其他架构中元件值跨度大、难以匹配的问题。本练习将引导你分析 R-2R 梯形网络的核心工作原理 [@problem_id:1298338]。通过运用戴维南定理和节点分析，你将亲身体会数字比特是如何通过精巧的电压分配，被精确地转换为模拟电压的。", "problem": "R-2R梯形网络是一种用于数模转换（DAC）的简单而有效的电路。考虑一个设计用于产生输出电压的4位R-2R梯形网络。该电路的结构如下：\n\n一条主水平线由一系列电阻值为$R$的电阻构成，连接着一系列节点。设节点从左到右依次标记为$N_3, N_2, N_1, N_0$。输出电压$V_{out}$是最左侧节点$N_3$的电压。从每个节点$N_i$（其中$i=3, 2, 1, 0$）引出一个值为$2R$的垂直分流电阻，连接到相应的数字电压输入$V_{b_i}$。对于每个位$b_i$，如果该位为‘1’，则输入电压为$V_{b_i} = V_{REF}$；如果该位为‘0’，则输入电压为$V_{b_i} = 0$ V（接地）。最右侧的节点$N_0$还有一个值为$2R$的终端电阻接地。\n\n数字位的排序方式是，$b_3$为最高有效位（MSB），$b_0$为最低有效位（LSB）。\n\n当数字输入码为`0101`（即$b_3=0, b_2=1, b_1=0, b_0=1$）时，确定输出节点$V_{out}$处的戴维南等效电压。将您的答案表示为关于参考电压$V_{REF}$的符号表达式。", "solution": "输出节点的戴维南等效电压等于$N_3$处的开路节点电压。我们通过在两个相等电阻$2R$连接到两个理想电压源的节点上应用基尔霍夫电流定律，来递归地分析R-2R梯形网络。对于一个通过相等电阻$2R$连接到电压$V_1$和$V_2$的节点，其节点电压$V$满足\n$$\n\\frac{V - V_{1}}{2R} + \\frac{V - V_{2}}{2R} = 0 \\;\\;\\Rightarrow\\;\\; V = \\frac{V_{1} + V_{2}}{2}.\n$$\n从右侧开始，终端是一个接到地的$2R$电阻，因此其电压为$0$。在$N_0$处，节点通过$2R$电阻连接到$V_{b_{0}}$，并通过$2R$电阻连接到$0$，因此\n$$\nV_{N_{0}} = \\frac{V_{b_{0}} + 0}{2} = \\frac{V_{b_{0}}}{2}.\n$$\n$N_1$右侧的子网络等效于一个电压为$V_{N_0}$的电压源，其串联电阻为$2R$，所以在$N_1$处（通过$2R$连接到$V_{b_1}$，并通过$2R$连接到$V_{N_0}$），\n$$\nV_{N_{1}} = \\frac{V_{b_{1}} + V_{N_{0}}}{2}.\n$$\n同样地，在$N_2$处，\n$$\nV_{N_{2}} = \\frac{V_{b_{2}} + V_{N_{1}}}{2},\n$$\n以及在$N_3$处（输出端），\n$$\nV_{out} = V_{N_{3}} = \\frac{V_{b_{3}} + V_{N_{2}}}{2}.\n$$\n对于输入码$0101$，我们有$V_{b_{3}} = 0$，$V_{b_{2}} = V_{REF}$，$V_{b_{1}} = 0$，$V_{b_{0}} = V_{REF}$。逐步代入：\n$$\nV_{N_{0}} = \\frac{V_{REF}}{2},\\quad\nV_{N_{1}} = \\frac{0 + V_{REF}/2}{2} = \\frac{V_{REF}}{4},\\quad\nV_{N_{2}} = \\frac{V_{REF} + V_{REF}/4}{2} = \\frac{5}{8}V_{REF},\n$$\n$$\nV_{out} = \\frac{0 + (5/8)V_{REF}}{2} = \\frac{5}{16}V_{REF}.\n$$\n因此，输出节点的戴维南等效电压为$\\frac{5}{16}V_{REF}$。", "answer": "$$\\boxed{\\frac{5}{16}V_{REF}}$$", "id": "1298338"}, {"introduction": "二进制加权电阻 DAC 在概念上非常直观，但它也为我们揭示了理想理论与实际工程应用之间的差距。本练习将要求你分析一个关键电阻上微小的制造误差对输出造成的影响 [@problem_id:1298342]。通过计算由此产生的输出误差，你将更深刻地理解为何元件精度在此类设计中至关重要，以及为何像 R-2R 梯形网络这样的替代方案在实际中更受欢迎。", "problem": "一个4位二进制加权电阻数模转换器（DAC）采用理想运算放大器和反相加法器配置构建。该DAC设计用于转换一个表示为 $b_3 b_2 b_1 b_0$ 的4位数字字，其中 $b_3$ 是最高有效位（MSB），$b_0$ 是最低有效位（LSB）。\n\n输入电阻的理想设计值根据位的权重进行加权：MSB（$b_3$）对应的电阻为 $R_{MSB} = R$，下一个是 $R_2 = 2R$，接着是 $R_1 = 4R$，而LSB（$b_0$）对应的电阻为 $R_{LSB} = 8R$。运算放大器的反馈电阻表示为 $R_f$。该DAC使用一个恒定的参考电压 $-V_{ref}$。任何一位的数字输入为'1'时，其对应的电阻连接到此参考电压；而输入为'0'时，则连接到地（0 V）。理想设计要求，在仅LSB为1的输入（`0001`）下，模拟输出电压为 $V_{out,LSB} = \\frac{V_{ref}}{16}$。\n\n在一次质量控制检查中发现，某批次的DAC中，与MSB对应的电阻 $R_{MSB}$ 存在系统性制造误差，导致其实际值比其理想设计值 $R$ 高出5.00%。所有其他电阻，包括反馈电阻，均假定为完美的理想值。\n\n对于特定的数字输入 `1000`，计算由这一个有故障的电阻引起的模拟输出电压的百分比误差的绝对值。百分比误差定义为实际电压与理想电压之间的绝对差值除以理想电压。请将最终答案表示为一个四舍五入到三位有效数字的小数值。例如，2.5%的误差应写作0.025。", "solution": "问题要求计算在一个4位DAC中，当最高有效位（MSB）电阻存在容差误差时，对于数字输入`1000`，输出电压的百分比误差。\n\n首先，我们确定反馈电阻 $R_f$ 和基础电阻 $R$ 之间的关系。反相加法器运算放大器配置的输出电压由每个输入支路的电流叠加给出：\n$$V_{out} = -R_f \\sum_{i=0}^{3} I_i$$\n其中 $I_i$ 是来自与位 $b_i$ 对应的支路的电流。该支路输入端的电压为 $V_i = -b_i V_{ref}$。电流为 $I_i = \\frac{V_i}{R_i} = \\frac{-b_i V_{ref}}{R_i}$。\n因此，输出电压的通用表达式为：\n$$V_{out} = -R_f \\sum_{i=0}^{3} \\frac{-b_i V_{ref}}{R_i} = R_f V_{ref} \\left( \\frac{b_3}{R_{MSB}} + \\frac{b_2}{R_2} + \\frac{b_1}{R_1} + \\frac{b_0}{R_{LSB}} \\right)$$\n代入给定的电阻值（$R_{MSB}=R, R_2=2R, R_1=4R, R_{LSB}=8R$）：\n$$V_{out} = R_f V_{ref} \\left( \\frac{b_3}{R} + \\frac{b_2}{2R} + \\frac{b_1}{4R} + \\frac{b_0}{8R} \\right)$$\n题目给定，对于仅LSB为1的输入 `0001`（即 $b_0=1$，所有其他位为0），理想输出电压为 $V_{out,LSB} = \\frac{V_{ref}}{16}$。使用我们推导的公式：\n$$V_{out,LSB} = R_f V_{ref} \\left( \\frac{1}{8R} \\right) = \\frac{R_f V_{ref}}{8R}$$\n将此结果与给定条件相等：\n$$\\frac{R_f V_{ref}}{8R} = \\frac{V_{ref}}{16}$$\n求解 $R_f$，我们得到：\n$$R_f = \\frac{8R}{16} = \\frac{R}{2}$$\n\n接下来，我们计算数字输入 `1000` 时的理想输出电压 $V_{out,ideal}$。对于此输入，$b_3=1$ 且 $b_2=b_1=b_0=0$。\n使用通用公式，并代入 $R_f = R/2$：\n$$V_{out,ideal} = \\frac{R}{2} V_{ref} \\left( \\frac{1}{R} + 0 + 0 + 0 \\right) = \\frac{R V_{ref}}{2R} = \\frac{V_{ref}}{2}$$\n\n现在，我们考虑有故障的MSB电阻，计算实际输出电压 $V_{out,actual}$。题目指出，MSB电阻的实际阻值（我们称之为 $R'_{MSB}$）比其理想值 $R$ 高出5.00%。\n$$R'_{MSB} = R \\times (1 + 0.0500) = 1.05 R$$\n对于输入 `1000`，输出电压仅取决于MSB输入支路。所有其他电阻值都是理想的，但由于它们对应的位是0，因此它们对输出没有贡献。\n$$V_{out,actual} = -R_f \\left( \\frac{-V_{ref}}{R'_{MSB}} \\right) = \\frac{R_f V_{ref}}{R'_{MSB}}$$\n代入 $R_f = R/2$ 和 $R'_{MSB} = 1.05 R$ 的值：\n$$V_{out,actual} = \\frac{(R/2) V_{ref}}{1.05 R} = \\frac{V_{ref}}{2 \\times 1.05} = \\frac{V_{ref}}{2.10}$$\n\n最后，我们计算百分比误差的绝对值，其定义为 $\\frac{|V_{out,actual} - V_{out,ideal}|}{|V_{out,ideal}|}$。\n$$\\text{Error} = \\frac{\\left| \\frac{V_{ref}}{2.10} - \\frac{V_{ref}}{2} \\right|}{\\left| \\frac{V_{ref}}{2} \\right|}$$\n$V_{ref}$ 项在分子和分母中被消去：\n$$\\text{Error} = \\frac{\\left| \\frac{1}{2.10} - \\frac{1}{2} \\right|}{\\frac{1}{2}} = 2 \\left| \\frac{1}{2.10} - \\frac{1}{2} \\right| = \\left| \\frac{2}{2.10} - 1 \\right|$$\n这可以简化为：\n$$\\text{Error} = \\left| \\frac{1}{1.05} - 1 \\right| = \\left| \\frac{1 - 1.05}{1.05} \\right| = \\left| \\frac{-0.05}{1.05} \\right| = \\frac{0.05}{1.05}$$\n计算数值：\n$$\\text{Error} = \\frac{5}{105} = \\frac{1}{21} \\approx 0.0476190476...$$\n题目要求答案四舍五入到三位有效数字。\n$$\\text{Error} \\approx 0.0476$$", "answer": "$$\\boxed{0.0476}$$", "id": "1298342"}, {"introduction": "我们如何判断一个 DAC 的性能是否优良？在实际应用中，工程师依赖一系列关键性能指标，而微分非线性（DNL）是其中最重要的指标之一。本练习将带你从理论设计走向实际表征，要求你根据一组假设的测量数据计算 DNL [@problem_id:1298359]。这个实践对于理解如何量化 DAC 在相邻数字码之间的步进精度、诊断其潜在的性能问题至关重要。", "problem": "一名电子学学生受命表征一个定制的3位数模转换器 (DAC)。该DAC设计工作时的参考电压为 $V_{ref} = 5.00 \\text{ V}$。该学生应用了从000到111的所有可能的数字输入码，并测量了相应的模拟输出电压。这些测量的结果汇总在下表中。\n\n| 数字输入码 | 测量的输出电压 ($V_{out,meas}$) [V] |\n|:------------------:|:------------------------------------------:|\n| 000                | 0.000                                      |\n| 001                | 0.610                                      |\n| 010                | 1.245                                      |\n| 011                | 1.905                                      |\n| 100                | 2.280                                      |\n| 101                | 3.140                                      |\n| 110                | 3.760                                      |\n| 111                | 4.355                                      |\n\nDAC的关键性能指标之一是其微分非线性 (DNL)，它量化了相邻数字码之间步阶大小的偏差。计算从数字输入码011转换到100时的DNL。\n\n以最低有效位 (LSB) 为单位表示您的答案。将您的最终答案四舍五入到三位有效数字。", "solution": "问题要求计算数字码011和100之间转换时的微分非线性 (DNL)。对于给定的数字码 $k$，DNL是衡量在该码转换时产生的实际模拟步阶与理想步阶大小偏差的量度。理想步阶大小定义为一个最低有效位 (LSB) 的电压。\n\n首先，我们必须计算一个LSB对应的理想电压。对于一个 $N$ 位DAC，其参考电压为 $V_{ref}$，理想的LSB电压 $V_{LSB}$ 由下式给出：\n$$V_{LSB} = \\frac{V_{ref}}{2^N}$$\n给定 $N=3$ 位和 $V_{ref} = 5.00 \\text{ V}$，我们有：\n$$V_{LSB} = \\frac{5.00 \\text{ V}}{2^3} = \\frac{5.00 \\text{ V}}{8} = 0.625 \\text{ V}$$\n\n接下来，我们确定相关的转换。问题指定了从码011到100的转换。在十进制表示中，这是从码 $k-1=3$ 到码 $k=4$ 的转换。\n\n在码 $k$ 处的DNL公式为：\n$$DNL(k) = \\frac{V_{out,meas}(k) - V_{out,meas}(k-1)}{V_{LSB}} - 1$$\n这里，$V_{out,meas}(k)$ 是数字码 $k$ 的测量输出电压，而 $V_{out,meas}(k-1)$ 是前一个码的测量输出电压。\n\n从提供的数据表中，我们提取码3 (011) 和码4 (100) 的测量电压：\n$$V_{out,meas}(3) = 1.905 \\text{ V}$$\n$$V_{out,meas}(4) = 2.280 \\text{ V}$$\n\n现在，我们计算这次转换的实际电压步阶 $\\Delta V_{actual}$：\n$$\\Delta V_{actual} = V_{out,meas}(4) - V_{out,meas}(3) = 2.280 \\text{ V} - 1.905 \\text{ V} = 0.375 \\text{ V}$$\n\n最后，我们将实际步阶和理想LSB电压代入DNL公式。结果将是一个无量纲比率，代表以LSB为单位的DNL。\n$$DNL(4) = \\frac{\\Delta V_{actual}}{V_{LSB}} - 1 = \\frac{0.375 \\text{ V}}{0.625 \\text{ V}} - 1$$\n$$DNL(4) = 0.6 - 1 = -0.4$$\n\n问题要求答案四舍五入到三位有效数字。计算出的值恰好是-0.4，可以写成-0.400以显示三位有效数字。", "answer": "$$\\boxed{-0.400}$$", "id": "1298359"}]}
{"hands_on_practices": [{"introduction": "在设计任何电子系统时，首要步骤是理解其基本构成和规模。对于闪速ADC而言，其并行架构的标志性特征是其组件数量会随着分辨率的增加而指数级增长。这个练习 [@problem_id:1304638] 将帮助你掌握计算闪速ADC核心组件（比较器和电阻）数量的基本方法，从而直观地理解其在速度和复杂度之间的权衡。", "problem": "一位电子工程师正在为数字示波器设计一个高速数据采集模块。该设计的一个关键组件是闪速模数转换器 (ADC)，因其极高的采样率而被选中。闪速ADC架构通过将输入模拟电压与一组唯一的参考电压同时进行比较来工作。这些参考电压由一个精密电阻梯网络生成，所有比较器的输出被送入一个优先编码器以生成最终的二进制代码。\n\n示波器的设计规格要求其垂直分辨率相当于一个5位ADC的分辨率。为了估算所需的电路复杂度和元件数量，工程师需要确定核心模拟构建模块的数量。假设这是一个理想的闪速ADC架构，这个5位系统所需的比较器总数和分压梯中的电阻总数之和是多少？", "solution": "问题要求计算一个5位闪速ADC中两个关键组件的总数：比较器和分压梯中的电阻。我们将分别计算每个组件的数量，然后将它们相加。\n\n首先，我们来分析一个 $n$ 位闪速ADC的一般架构。一个 $n$ 位ADC旨在将模拟输入量化为 $2^n$ 个离散的数字电平。\n\n闪速ADC的核心由一系列比较器组成。每个比较器检查输入模拟电压 $V_{in}$ 是高于还是低于一个特定的参考电压 $V_{ref,i}$。为了区分 $2^n$ 个不同的电平，我们需要定义它们之间的边界。存在 $2^n - 1$ 个这样的边界。例如，对于一个2位ADC（$n=2$），有 $2^2 = 4$ 个电平（例如，00, 01, 10, 11）。为了定义这四个区域，我们需要三个阈值电压，这又需要三个比较器。推广到 $n$ 位分辨率，比较器的数量 $N_{comp}$ 由下式给出：\n$$N_{comp} = 2^n - 1$$\n\n接下来，我们考虑电阻梯网络。该网络的目的是为比较器生成所需的 $2^n - 1$ 个唯一参考电压。最常见的实现方式是使用一系列相同的电阻，连接在主参考电压 $V_{ref}$ 和地之间。一个由 $k$ 个相同电阻组成的链条在其间将有 $k-1$ 个节点（抽头），提供 $k-1$ 个不同的电压电平。因此，为了获得比较器所需的 $2^n - 1$ 个参考电压，电阻梯必须总共由 $N_{res}$ 个电阻组成，其中：\n$$N_{res} = 2^n$$\n这种由 $2^n$ 个电阻组成的配置，可以创建出所需的 $2^n-1$ 个中间电压抽头。\n\n在这个具体问题中，ADC的分辨率为5位，所以我们设 $n=5$。\n\n现在我们可以计算比较器的数量：\n$$N_{comp} = 2^5 - 1 = 32 - 1 = 31$$\n\n以及电阻梯中电阻的数量：\n$$N_{res} = 2^5 = 32$$\n\n问题要求的是比较器总数和电阻总数之和。设此和为 $N_{total}$。\n$$N_{total} = N_{comp} + N_{res}$$\n代入计算出的值：\n$$N_{total} = 31 + 32 = 63$$\n\n因此，所需的比较器和电阻数量之和为63。", "answer": "$$\\boxed{63}$$", "id": "1304638"}, {"introduction": "了解了闪速ADC的架构规模后，下一步是追踪其内部的信号转换过程。这个练习 [@problem_id:1304617] 模拟了一个理想闪速ADC在特定输入电压下的完整工作流程。通过精确计算电阻分压梯产生的参考电压，并应用理想比较器的判决逻辑，你将亲身体验一个模拟电压值如何一步步被映射为最终的数字输出码。", "problem": "一个理想的 2 位闪速模数转换器 (ADC) 由一个电阻梯、一组比较器和一个优先编码器构成。该电阻梯由四个相同的电阻串联在一个参考电压 $V_{ref}$ 上组成。该电阻梯网络为三个理想比较器提供参考电压。一个未知的模拟输入电压 $V_{in}$ 同时施加到所有三个比较器的同相输入端，而来自电阻梯的参考电压则连接到反相输入端。\n\n一个理想比较器的定义是：如果其同相输入端的电压严格大于其反相输入端的电压，则输出数字 '1'；否则，输出 '0'。优先编码器将比较器输出的模式转换为一个 2 位二进制数 $B_1B_0$，其中 $B_1$ 是最高有效位。编码器的逻辑如下：如果输出 '1' 的最高编号比较器是比较器 $k$（其中 $k \\in \\{1, 2, 3\\}$），则输出为 $k$ 的二进制表示。如果没有比较器输出 '1'，则输出为 00。\n\n如果一个恒定的输入电压 $V_{in} = \\frac{1}{2}V_{ref}$ 施加到该 ADC，产生的 2 位数字输出 $B_1B_0$ 是什么？\n\nA. 00\n\nB. 01\n\nC. 10\n\nD. 11\n\nE. 输出不确定。", "solution": "问题要求计算在特定输入电压下，一个理想闪速 ADC 的 2 位数字输出。我们必须首先确定比较器的阈值电压，然后评估它们的输出，以找到最终编码的二进制值。\n\n**步骤 1：确定比较器的阈值电压。**\n一个 2 位闪速 ADC 需要 $2^n - 1 = 2^2 - 1 = 3$ 个比较器，我们可以根据阈值从低到高将它们标记为 $C_1, C_2, C_3$。电阻梯由 $2^n = 4$ 个相同的电阻组成，每个电阻的阻值为 $R$。这些电阻在参考电压 $V_{ref}$ 上形成一个分压器。电阻梯的总电阻为 $4R$。\n\n比较器的参考电压从电阻之间的节点引出。这些电压连接到比较器的反相(-)输入端。\n第一个比较器的参考电压 $V_{ref,1}$ 是从地线算起的第一个电阻之后取得的：\n$$V_{ref,1} = V_{ref} \\times \\frac{R}{4R} = \\frac{1}{4}V_{ref}$$\n\n第二个比较器的参考电压 $V_{ref,2}$ 是从地线算起的第二个电阻之后取得的：\n$$V_{ref,2} = V_{ref} \\times \\frac{R + R}{4R} = \\frac{2R}{4R} = \\frac{1}{2}V_{ref}$$\n\n第三个比较器的参考电压 $V_{ref,3}$ 是从地线算起的第三个电阻之后取得的：\n$$V_{ref,3} = V_{ref} \\times \\frac{R + R + R}{4R} = \\frac{3R}{4R} = \\frac{3}{4}V_{ref}$$\n\n**步骤 2：评估每个比较器的输出。**\n模拟输入电压 $V_{in} = \\frac{1}{2}V_{ref}$ 被施加到所有三个比较器的同相(+)输入端。根据问题定义，如果比较器的同相输入严格大于其反相输入（$V_{in}  V_{ref,k}$），则输出 '1'，否则输出 '0'。\n\n- **比较器 $C_1$**：\n  同相输入为 $V_{in} = \\frac{1}{2}V_{ref}$。\n  反相输入为 $V_{ref,1} = \\frac{1}{4}V_{ref}$。\n  由于 $\\frac{1}{2}V_{ref}  \\frac{1}{4}V_{ref}$，条件 $V_{in}  V_{ref,1}$ 成立。因此，$C_1$ 的输出为 1。\n\n- **比较器 $C_2$**：\n  同相输入为 $V_{in} = \\frac{1}{2}V_{ref}$。\n  反相输入为 $V_{ref,2} = \\frac{1}{2}V_{ref}$。\n  由于 $V_{in}$ 并不*严格*大于 $V_{ref,2}$（它们相等），条件不成立。因此，$C_2$ 的输出为 0。\n\n- **比较器 $C_3$**：\n  同相输入为 $V_{in} = \\frac{1}{2}V_{ref}$。\n  反相输入为 $V_{ref,3} = \\frac{3}{4}V_{ref}$。\n  由于 $\\frac{1}{2}V_{ref}$ 不大于 $\\frac{3}{4}V_{ref}$，条件 $V_{in}  V_{ref,3}$ 不成立。因此，$C_3$ 的输出为 0。\n\n比较器输出的状态为 $(C_3, C_2, C_1) = (0, 0, 1)$。\n\n**步骤 3：确定优先编码器的输出。**\n优先编码器将比较器输出作为输入，并提供一个对应于处于活动状态（输出 '1'）的最高编号比较器的二进制代码。\n\n编码器的输入为 $C_1=1, C_2=0, C_3=0$。\n最高编号的活动比较器是 $C_1$。\n问题说明，如果最高活动比较器是 $C_k$，则输出为 $k$ 的二进制表示。在这里，$k=1$。\n1 的 2 位二进制表示是 01。\n\n因此，最终的数字输出 $B_1B_0$ 是 01。这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1304617"}, {"introduction": "理论模型是理想的，但现实世界的元器件总存在制造误差。这个练习 [@problem_id:1304637] 将我们从理想理论带入实际工程问题，探讨一个常见的制造缺陷——电阻值偏差——如何影响ADC的线性度。通过计算积分非线性（INL），我们可以量化这种物理缺陷所引入的误差，这是评估和设计高性能数据转换器的关键技能。", "problem": "一个4位闪速模数转换器（ADC）使用一个串联电阻梯来产生其内部参考电压。该电阻梯由16个电阻组成，从接地端向上标记为 $R_1, R_2, ..., R_{16}$，连接在接地参考（0 V）和主参考电压 $V_{ref}$ 之间。电阻 $R_1$ 的一端接地，电阻 $R_{16}$ 的另一端连接到 $V_{ref}$。共有15个比较器，第 $k$ 个比较器（其中 $k \\in \\{1, 2, ..., 15\\}$）的阈值电压从电阻 $R_k$ 顶端的节点（即电阻 $R_k$ 和 $R_{k+1}$ 之间的节点）引出。\n\n理想情况下，所有电阻都具有相同的标称电阻 $R$。然而，由于制造缺陷，其中一个电阻 $R_8$ 的实际电阻为 $R(1+\\delta)$，其中 $\\delta = 0.05$（+5%的偏差）。所有其他15个电阻的电阻值均为其标称电阻 $R$。\n\n向数字码 $k$ 转换的积分非线性（INL）定义为实际比较器阈值电压（$V_{k,actual}$）与其理想值（$V_{k,ideal}$）之间的偏差，以最低有效位（LSB）为单位进行测量。第 $k$ 个比较器的理想阈值定义为 $V_{k,ideal} = k \\cdot V_{LSB}$，其中一个LSB的电压为 $V_{LSB} = V_{ref} / 16$。\n\n计算此ADC的最差情况下的INL，即INL的最大绝对值 $\\max_{k \\in \\{1, ..., 15\\}} |INL(k)|$。请以LSB为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "在一个连接于接地和 $V_{ref}$ 之间且无负载的串联电阻梯中，$R_k$ 顶端（$R_k$ 和 $R_{k+1}$ 之间）的节点电压由下式给出\n$$\nV_{k,actual} = V_{ref}\\,\\frac{\\sum_{i=1}^{k} R_{i}}{\\sum_{i=1}^{16} R_{i}}.\n$$\n当除 $R_{8} = R(1+\\delta)$ 外的所有电阻标称值均为 $R$ 时，总电阻为\n$$\nR_{\\text{tot}} = \\sum_{i=1}^{16} R_{i} = R(16+\\delta).\n$$\n到 $k$ 为止的部分和为\n$$\n\\sum_{i=1}^{k} R_{i} =\n\\begin{cases}\nkR,   k \\leq 7,\\\\\nR(k+\\delta),   k \\geq 8.\n\\end{cases}\n$$\n因此，实际阈值为\n$$\nV_{k,actual} =\n\\begin{cases}\nV_{ref}\\,\\dfrac{k}{16+\\delta},   k \\leq 7,\\\\[6pt]\nV_{ref}\\,\\dfrac{k+\\delta}{16+\\delta},   k \\geq 8.\n\\end{cases}\n$$\n理想阈值为 $V_{k,ideal} = k\\,V_{LSB}$，其中 $V_{LSB} = V_{ref}/16$，因此以LSB为单位的INL为\n$$\nINL(k) = \\frac{V_{k,actual} - V_{k,ideal}}{V_{LSB}}.\n$$\n因此，\n$$\nINL(k) =\n\\begin{cases}\n\\dfrac{16k}{16+\\delta} - k = -\\,\\dfrac{k\\,\\delta}{16+\\delta},   k \\leq 7,\\\\[8pt]\n\\dfrac{16(k+\\delta)}{16+\\delta} - k = \\dfrac{\\delta\\,(16-k)}{16+\\delta},   k \\geq 8.\n\\end{cases}\n$$\n对于 $k \\leq 7$， $|INL(k)| = \\dfrac{k\\,\\delta}{16+\\delta}$ 随 $k$ 增大而增大，在 $k=7$ 时达到最大值。对于 $k \\geq 8$， $|INL(k)| = \\dfrac{\\delta\\,(16-k)}{16+\\delta}$ 随 $k$ 增大而减小，在 $k=8$ 时达到最大值。比较这两个最大值，\n$$\n\\max_{k \\in \\{1,\\dots,15\\}} |INL(k)| = \\frac{8\\,\\delta}{16+\\delta}.\n$$\n代入 $\\delta = 0.05$，\n$$\n\\max |INL| = \\frac{8 \\times 0.05}{16 + 0.05} = \\frac{0.4}{16.05} = \\frac{8}{321} \\approx 0.0249 \\text{ LSB}.\n$$\n四舍五入到三位有效数字，最差情况下的INL为 $0.0249$ LSB。", "answer": "$$\\boxed{0.0249}$$", "id": "1304637"}]}
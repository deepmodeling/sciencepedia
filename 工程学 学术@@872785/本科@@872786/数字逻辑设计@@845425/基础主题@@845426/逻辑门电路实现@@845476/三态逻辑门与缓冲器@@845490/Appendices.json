{"hands_on_practices": [{"introduction": "三态缓冲区的核心价值在于它们能够允许多个设备共享同一条数据线，而不会相互干扰。本练习将指导你利用三态缓冲器构建一个简单的“可编程反相器”，这是一个基础但功能强大的逻辑元件。通过这个实践，你将学会如何通过控制信号，在两个不同的数据源之间进行选择，从而为理解更复杂的总线系统打下基础。", "problem": "在数字逻辑设计中，三态缓冲器是创建共享数据总线的关键组件。你的任务是设计一个简单的“可编程反相器”或可配置逻辑元件。该电路必须有一个单比特数据输入 `A`，一个单比特控制输入 `C`，以及一个单比特输出 `Y`。该电路的行为定义如下：\n- 当控制输入 `C` 为逻辑 `0` 时，输出 `Y` 必须等于数据输入 `A`（即 `Y = A`）。\n- 当控制输入 `C` 为逻辑 `1` 时，输出 `Y` 必须是数据输入 `A` 的逻辑反（即 `Y = \\text{NOT}(A)`）。\n\n你可以使用标准的非门（反相器）和高电平有效的三态缓冲器。一个高电平有效的三态缓冲器有一个数据输入 `D`，一个使能输入 `E`，和一个输出 `Q`。其行为是：如果 `E=1`，则 `Q=D`；如果 `E=0`，则输出 `Q` 处于高阻态（断开状态）。当两个三态缓冲器的输出连接在一起时，任何时候都只应使能一个缓冲器，以避免总线竞争。\n\n以下哪个电路描述正确地实现了所需的可编程反相器？\n\nA. 输入 `A` 连接到三态缓冲器 Buffer 1 的数据输入端。输入 `A` 也连接到一个非门，该非门的输出连接到第二个三态缓冲器 Buffer 2 的数据输入端。控制输入 `C` 连接到 Buffer 2 的使能输入端。控制输入 `C` 也连接到第二个非门，其输出连接到 Buffer 1 的使能输入端。Buffer 1 和 Buffer 2 的输出连接在一起形成输出 `Y`。\n\nB. 输入 `A` 连接到三态缓冲器 Buffer 1 的数据输入端。输入 `A` 也连接到一个非门，该非门的输出连接到第二个三态缓冲器 Buffer 2 的数据输入端。控制输入 `C` 连接到 Buffer 1 的使能输入端。控制输入 `C` 也连接到第二个非门，其输出连接到 Buffer 2 的使能输入端。Buffer 1 和 Buffer 2 的输出连接在一起形成输出 `Y`。\n\nC. 输入 `A` 连接到三态缓冲器 Buffer 1 的数据输入端。输入 `A` 也连接到一个非门，该非门的输出连接到第二个三态缓冲器 Buffer 2 的数据输入端。控制输入 `C` 连接到 Buffer 1 和 Buffer 2 两者的使能输入端。Buffer 1 和 Buffer 2 的输出连接在一起形成输出 `Y`。\n\nD. 输入 `A` 连接到三态缓冲器 Buffer 1 的数据输入端。控制输入 `C` 连接到一个非门，其输出连接到 Buffer 1 的使能输入端。Buffer 1 的输出是最终输出 `Y`。该电路不使用第二个缓冲器。", "solution": "我们需要一个可配置函数，它有一个数据输入 $A$、一个控制输入 $C$ 和一个输出 $Y$，满足：\n- 如果 $C=0$，则 $Y=A$。\n- 如果 $C=1$，则 $Y=\\overline{A}$。\n\n这等价于一个2选1多路选择器，使用选择信号 $C$ 在 $A$ 和 $\\overline{A}$ 之间进行选择，可以用布尔代数表示为\n$$\nY = (\\overline{C} \\land A) \\lor (C \\land \\overline{A}).\n$$\n\n一个高电平有效的三态缓冲器在 $E=1$ 时产生 $Q=D$，在 $E=0$ 时 $Q$ 呈高阻态。如果两个这样的缓冲器共享一个输出节点，节点的值等于唯一被使能的缓冲器的数据；两个缓冲器绝不能同时被使能。\n\n为了使用两个共享输出的三态缓冲器实现 $Y=(\\overline{C} \\land A) \\lor (C \\land \\overline{A})$：\n- 使用 Buffer 1，数据为 $D_{1}=A$，使能为 $E_{1}=\\overline{C}$。\n- 使用 Buffer 2，数据为 $D_{2}=\\overline{A}$，使能为 $E_{2}=C$。\n- 将它们的输出连接在一起形成 $Y$。\n\n于是：\n- 如果 $C=0$，$E_{1}=1$ 且 $E_{2}=0$，因此只有 Buffer 1 驱动输出，$Y=A$。\n- 如果 $C=1$，$E_{1}=0$ 且 $E_{2}=1$，因此只有 Buffer 2 驱动输出，$Y=\\overline{A}$。\n- 两个缓冲器永远不会同时被使能，因此不会发生总线竞争。\n\n现在来评估各个选项：\n\nA. $D_{1}=A$，$D_{2}=\\overline{A}$，$E_{2}=C$，$E_{1}=\\overline{C}$，输出相连。这完全实现了上述配置，因此它产生 $Y=(\\overline{C} \\land A) \\lor (C \\land \\overline{A})$，符合所需行为。\n\nB. $D_{1}=A$，$D_{2}=\\overline{A}$，$E_{1}=C$，$E_{2}=\\overline{C}$。这会产生 $Y=(C \\land A) \\lor (\\overline{C} \\land \\overline{A})$，它等于 $A$ 和 $C$ 的同或（XNOR），而不是所需的功能（例如，当 $C=1$ 时，它得到 $Y=A$ 而不是 $\\overline{A}$），所以这是不正确的。\n\nC. 两个使能端都连接到 $C$。当 $C=1$ 时，两个缓冲器都驱动矛盾的值（$A$ 和 $\\overline{A}$），导致总线竞争；当 $C=0$ 时，两者都被禁用，此时 $Y$ 呈高阻态，而不是 $A$。不正确。\n\nD. 单个缓冲器，其 $D_{1}=A$ 且 $E_{1}=\\overline{C}$。那么当 $C=0$ 时 $Y=A$，当 $C=1$ 时 $Y$ 呈高阻态，而不是 $\\overline{A}$。不正确。\n\n因此，只有选项 A 正确地实现了所需的可编程反相器，既无竞争又功能正确。", "answer": "$$\\boxed{A}$$", "id": "1973043"}, {"introduction": "在学会了如何正确使用三态缓冲器来构建共享总线后，我们必须了解一个关键的错误模式：总线冲突。当两个或多个驱动器试图同时向总线写入不同逻辑电平时，就会发生这种情况。本练习将分析一个导致总线冲突的假设场景，并探讨其在逻辑层面上的结果，从而强调了设计精确控制逻辑的重要性。", "problem": "一个简单的微处理器系统中的共享数据线由两个三态缓冲器（缓冲器A和缓冲器B）驱动。两个缓冲器的输出连接在一起，形成数据线 `DATA_BUS`。\n\n- 缓冲器A有一个数据输入 $D_A$ 和一个高电平有效使能输入 $E_A$。当 $E_A=1$ 时，其输出为有效状态且等于 $D_A$。\n- 缓冲器B有一个数据输入 $D_B$ 和一个低电平有效使能输入 $E_B$。当 $E_B=0$ 时，其输出为有效状态且等于 $D_B$。\n\n当缓冲器的输出不是有效状态时，它处于高阻态，逻辑上表示为 'Z'。如果连接到总线的所有缓冲器都处于高阻态，则总线本身也被认为是处于高阻态 'Z'。如果两个或多个有效状态的缓冲器试图将总线驱动到不同的逻辑电平（例如，一个驱动为 '1'，另一个驱动为 '0'），总线将进入总线冲突状态。这个无效状态在逻辑上表示为 'X'。\n\n在某一特定时刻，缓冲器的输入信号如下：\n$D_A = 1$\n$E_A = 1$\n$D_B = 0$\n$E_B = 0$\n\n根据这些输入，判断 `DATA_BUS` 的最终逻辑状态。\n\nA. 0\n\nB. 1\n\nC. Z\n\nD. X", "solution": "根据三态缓冲器的定义：\n- 当 $E_{A}=1$ 时，缓冲器A处于有效状态，并将其输出驱动为等于 $D_{A}$。\n- 当 $E_{B}=0$ 时，缓冲器B处于有效状态，并将其输出驱动为等于 $D_{B}$。\n\n给定输入：\n$$D_{A}=1,\\quad E_{A}=1,\\quad D_{B}=0,\\quad E_{B}=0.$$\n\n首先，判断每个缓冲器的输出状态：\n- 因为 $E_{A}=1$，缓冲器A被使能，并将 $D_{A}=1$ 驱动到总线上。\n- 因为 $E_{B}=0$，缓冲器B被使能，并将 $D_{B}=0$ 驱动到总线上。\n\n因此，两个缓冲器同时处于有效状态，但逻辑电平相互冲突：\n$$\\text{缓冲器A驱动 }1,\\quad \\text{缓冲器B驱动 }0.$$\n\n当两个有效的驱动器试图在共享总线上强制输出不同的逻辑电平时，总线进入冲突状态，表示为无效状态 $X$。因此，`DATA_BUS` 的最终逻辑状态是 $X$，这对应于选项 D。", "answer": "$$\\boxed{D}$$", "id": "1973099"}, {"introduction": "数字逻辑中的抽象概念往往在物理世界中有具体的表现。本练习将理论与实践相结合，探讨一个常见的硬件调试场景，其中一个异常的电压读数揭示了总线冲突的物理症状[@problem_id:1973099]。通过分析这个案例，你将更深刻地理解为什么总线冲突不仅是一个逻辑错误，更是一个会产生实际物理后果的问题。", "problem": "一位系统设计师正在调试一个定制的嵌入式系统。该系统包含一个中央处理器（CPU）和几个通过共享数据总线进行通信的外围设备。每个设备都通过各自的一组三态缓冲器连接到总线上。三态缓冲器是一种数字逻辑门，具有一个数据输入端、一个数据输出端和一个使能输入端。当被使能时，缓冲器将其数据输入端的逻辑电平传递到其数据输出端。当被禁用时，数据输出端进入高阻抗（Hi-Z）状态，从而在电气上将其与总线断开。系统的逻辑电路由一个表示为 $V_{CC}$ 的电源电压供电，并以地（GND, 0 V）为参考。在正常操作中，一个控制单元确保在任何给定时间只有一个设备的缓冲器被使能，以向总线写入数据。\n\n在一次诊断测试中，系统本应处于空闲状态，所有设备的缓冲器都应被禁用。然而，设计师使用一个高阻抗数字万用表测量其中一条总线线路的电压，观察到一个稳定在约 $V_{CC}/2$ 的读数。这是一个无效的逻辑电平，表明存在故障。\n\n以下哪种情况是导致总线线路上出现这一特定电压读数的最可能和最直接的电气原因？\n\nA. 至少有两个连接到总线线路的三态缓冲器同时被使能，其中一个试图将线路驱动到逻辑高电平，而另一个试图将其驱动到逻辑低电平。\n\nB. 恰好有一个连接到线路的缓冲器被使能，但其内部逻辑发生故障，导致它输出一个中间电压。\n\nC. 所有连接到线路的缓冲器都按预期被正确禁用，并处于高阻抗状态。\n\nD. 总线线路出现了电阻性故障，形成了一个到 $V_{CC}$ 电源轨的中等电阻短路。\n\nE. 一个连接到线路的缓冲器永久性地卡在使能状态，而所有其他缓冲器都按预期被正确禁用。", "solution": "我们用简单的电路原理来对测量结果和每种情景进行建模。\n\n高阻抗数字万用表近似于一个开路，因此它测量的是总线线路的开路节点电压。因此，读数反映的是连接到总线的内部等效网络，而不是万用表负载效应造成的人为结果。\n\n一个稳定在 $V_{CC}/2$ 附近的中间轨电压值意味着，从该节点到两个电源轨同时存在两条有限且大致相当的导电通路，形成了一个有效的电阻分压器。在三态总线上发生这种情况的典型方式是总线竞争：一个被使能的缓冲器驱动高电平，而另一个被使能的缓冲器驱动低电平。\n\n将这两个相互竞争的输出建模为戴维南等效电源：\n- 驱动高电平的缓冲器看作一个电压为 $V_{CC}$、输出电阻为 $R_{H}$（上拉导通电阻）的电源。\n- 驱动低电平的缓冲器看作一个电压为 $0$、输出电阻为 $R_{L}$（下拉导通电阻）的电源。\n\n当两者都被使能时，根据基尔霍夫电流定律（KCL），总线节点电压 $V$ 满足：\n$$(V - V_{CC})\\frac{1}{R_{H}} + \\frac{V}{R_{L}} = 0.$$\n求解 $V$ 可得\n$$V = V_{CC}\\frac{R_{L}}{R_{H}+R_{L}}.$$\n当 $R_{H} \\approx R_{L}$（对于对称的 CMOS 驱动器来说是典型情况）时，可得出\n$$V \\approx \\frac{V_{CC}}{2},$$\n这与观测到的稳定的中间轨读数相符。此外，由于两个驱动器的阻抗都很低，该电压值是稳定的（尽管这意味着存在显著的直通电流）。\n\n现在我们来评估其他选项：\n- 恰好一个被使能的缓冲器因内部故障产生一个中间直流电平（选项 B）对于 CMOS 数字输出来说是不典型的，因为除非有外部负载，CMOS 输出通常会饱和到接近电源轨的电平；这种故障的可能性较小，也不是产生稳定 $V_{CC}/2$ 电平的直接、标准机制。\n- 所有缓冲器都被禁用（选项 C）会使总线处于浮空状态。一个浮空节点用高阻抗万用表测量时，不会有一个明确定义的、稳定的中间轨电平；任何读数都是偶然的，并且通常不稳定。\n- 仅存在到 $V_{CC}$ 的电阻性故障（选项 D）会将节点电压拉向 $V_{CC}$；要得到 $V_{CC}/2$，还需要一条到 GND 的相当的电阻通路，而这一点并未说明。\n- 单个缓冲器卡在使能状态（选项 E）会将其输出坚定地驱动到高电平或低电平，而不是中间轨电平，除非存在与之竞争的通路。\n\n因此，导致读数稳定在 $V_{CC}/2$ 附近的最可能和最直接的电气原因是两个缓冲器同时被使能，一个驱动高电平，一个驱动低电平。\n\n因此，正确选项是 A。", "answer": "$$\\boxed{A}$$", "id": "1973096"}]}
{"hands_on_practices": [{"introduction": "在动态数字电路中，电荷共享是一个影响节点电压和逻辑状态的关键物理现象。本练习 [@problem_id:1922264] 通过一个连接两个电容的理想化模型，来揭示电荷守恒的基本原理。掌握这一概念对于分析动态逻辑门和存储单元至关重要，因为传输门常被用于隔离或连接这些电路中的存储节点。", "problem": "在数字电路设计中，电荷共享是一种关键现象，会影响动态逻辑节点的状态。考虑一个此类场景的简化模型。一个存储节点，由理想电容器 $C_1$ 表示，被充电至逻辑高电平电源电压 $V_{DD}$。附近的悬空互连线，可以建模为第二个理想电容器 $C_2$，初始时完全放电，即其电压为 0 V。两个电容器是相同的，因此 $C_1 = C_2 = C$。\n\n一个近乎理想的互补金属氧化物半导体（CMOS）传输门连接在这两个电容器之间。在时间 $t=0$ 时，先前关闭的传输门被打开，形成一条导电通路。假设在初始设置后，由两个电容器和传输门组成的系统与任何其他电源或接地连接完全隔离。\n\n当经过足够长的时间，系统达到稳定的静电平衡后，两个电容器上的最终电压 $V_f$ 是多少？\n\nA. $V_{DD}$\n\nB. $0.75 V_{DD}$\n\nC. $0.5 V_{DD}$\n\nD. $0.25 V_{DD}$\n\nE. $0$", "solution": "这个双电容系统在设置后是隔离的，并且传输门被假定为近乎理想的，因此当它打开时，它提供了一条导电通路，而不会增加或移除净电荷。忽略寄生效应和电荷注入，隔离系统中的总电荷是守恒的。\n\n设 $C_{1}=C$ 上的初始电压为 $V_{1}(0)=V_{DD}$，$C_{2}=C$ 上的初始电压为 $V_{2}(0)=0$。初始电荷（相对于地）为：\n$$\nQ_{1,i}=C V_{1}(0)=C V_{DD}, \\quad Q_{2,i}=C V_{2}(0)=0.\n$$\n因此，总初始电荷为：\n$$\nQ_{\\text{tot},i}=Q_{1,i}+Q_{2,i}=C V_{DD}.\n$$\n\n当开关打开并经过足够的时间后，两个顶部节点均衡到一个共同的最终电压 $V_{f}$。最终电荷为：\n$$\nQ_{1,f}=C V_{f}, \\quad Q_{2,f}=C V_{f},\n$$\n所以总最终电荷为：\n$$\nQ_{\\text{tot},f}=Q_{1,f}+Q_{2,f}=2 C V_{f}.\n$$\n\n根据电荷守恒定律 $Q_{\\text{tot},f}=Q_{\\text{tot},i}$，可得：\n$$\n2 C V_{f}=C V_{DD} \\quad \\Rightarrow \\quad V_{f}=\\frac{V_{DD}}{2}.\n$$\n\n等效地，使用两个初始电压分别为 $V_{1}$ 和 $V_{2}$ 的电容器的通用电荷共享公式，\n$$\nV_{f}=\\frac{C_{1} V_{1}+C_{2} V_{2}}{C_{1}+C_{2}},\n$$\n代入 $C_{1}=C_{2}=C$、$V_{1}=V_{DD}$ 和 $V_{2}=0$ 可得出 $V_{f}=V_{DD}/2$。因此，正确选项是 C。", "answer": "$$\\boxed{C}$$", "id": "1922264"}, {"introduction": "要深刻理解CMOS传输门的优势，一个有效方法是分析其在故障模式下的行为。本练习 [@problem_id:1922274] 探讨了一种常见的“开路”故障，旨在阐明NMOS和PMOS晶体管各自的作用。通过分析在传输逻辑“1”时缺少PMOS通路所带来的后果，你将理解“阈值电压损失”这一关键概念，并体会到为何并联结构对于实现全幅电压摆动至关重要。", "problem": "一个互补金属氧化物半导体（CMOS）传输门被设计用于在输入节点`IN`和输出节点`OUT`之间传输信号。该传输门由一个N型金属氧化物半导体（NMOS）晶体管和一个P型金属氧化物半导体（PMOS）晶体管并联构成。该传输门由施加到NMOS晶体管栅极的信号`C`及其施加到PMOS晶体管栅极的互补信号`C_bar`控制。\n\n该电路的工作电源电压为$V_{DD}$，接地参考为$0$ V。逻辑'1'电平定义为$V_{DD}$，逻辑'0'电平定义为$0$ V。NMOS具有正阈值电压$V_{Tn}$，PMOS具有负阈值电压$V_{Tp}$。\n\n考虑一种情况，传输门意图处于“导通”状态，即控制信号`C`为逻辑'1'（$V_{DD}$），`C_bar`为逻辑'0'（$0$ V）。一个稳定的逻辑'1'信号施加到输入端`IN`，因此$V_{IN} = V_{DD}$。然而，一个制造缺陷导致PMOS晶体管发生“断路故障”，使其在电气上等同于永久性开路。\n\n假设输出节点`OUT`的初始电压为$0$ V，并且连接到一个不吸取电流的负载上，请确定`OUT`处的最终稳态电压。在此分析中，可以忽略体效应。请用所提供的参数（$V_{DD}$, $V_{Tn}$, $V_{Tp}$）以符号表达式的形式给出你的答案。", "solution": "PMOS发生断路故障，因此它是一个开路，不能导通。因此，从`IN`到`OUT`的传输路径仅通过NMOS，其栅极由$C=V_{DD}$驱动，且$V_{IN}=V_{DD}$。\n\n对于NMOS，电位较低的端子作为源极。由于$V_{IN}=V_{DD}$且$V_{OUT}$从$0$开始，在整个充电过程中我们有$V_{OUT} \\leq V_{IN}$，因此NMOS的源极实际上是`OUT`节点。那么NMOS的栅源电压为\n$$\nV_{GS}=V_{G}-V_{S}=V_{DD}-V_{OUT}.\n$$\n当$V_{GS} \\geq V_{Tn}$时NMOS导通，当$V_{GS}$下降到$V_{Tn}$时停止导通。在`OUT`端没有负载电流的情况下，当沟道刚好关断时达到稳态，即\n$$\nV_{DD}-V_{OUT}=V_{Tn}.\n$$\n求解$V_{OUT}$可得\n$$\nV_{OUT}=V_{DD}-V_{Tn}.\n$$\n体效应被忽略，所以$V_{Tn}$是恒定的，发生断路故障的PMOS不起作用；$V_{Tp}$不出现在结果中。因此，最终的稳态输出电压是$V_{DD}-V_{Tn}$。", "answer": "$$\\boxed{V_{DD}-V_{Tn}}$$", "id": "1922274"}, {"introduction": "掌握了单个传输门的物理行为之后，下一步是将其作为构建模块来设计更复杂的逻辑功能。本练习 [@problem_id:1922235] 要求你分析一个由多个传输门构成的电路，该电路实现了数据交换的功能。通过这个实践，你将学会如何将传输门视为理想的逻辑开关，并用它们来构建像多路选择器和条件交换器这样的基本数字组件。", "problem": "一个数字电路被设计用作一个条件数据交换器。它有两个数据输入 `A` 和 `B`，一个控制输入 `SWAP`，以及两个数据输出 `X` 和 `Y`。该电路由四个标记为 `TG1`、`TG2`、`TG3` 和 `TG4` 的互补金属氧化物半导体 (CMOS) 传输门 (TG) 构成。\n\n一个 CMOS 传输门的行为由两个互补的控制输入 `C` 和 `C_bar` 定义。当 `C=1` 且 `C_bar=0` 时，传输门作为闭合开关，双向传输信号。当 `C=0` 且 `C_bar=1` 时，它作为断开开关（高阻态）。控制信号 `SWAP` 及其反相信号 `NOT SWAP` 用于驱动这些传输门。\n\n电路的接线如下：\n- **对于输出 X：**\n  - `TG1` 将数据输入 `A` 连接到数据输出 `X`。其控制输入为 `C = NOT SWAP` 和 `C_bar = SWAP`。\n  - `TG2` 将数据输入 `B` 连接到数据输出 `X`。其控制输入为 `C = SWAP` 和 `C_bar = NOT SWAP`。\n- **对于输出 Y：**\n  - `TG3` 将数据输入 `B` 连接到数据输出 `Y`。其控制输入为 `C = NOT SWAP` 和 `C_bar = SWAP`。\n  - `TG4` 将数据输入 `A` 连接到数据输出 `Y`。其控制输入为 `C = SWAP` 和 `C_bar = NOT SWAP`。\n\n给定稳态逻辑电平 `A=1`、`B=0` 和 `SWAP=1`，确定输出 `X` 和 `Y` 的最终逻辑电平。\n\nA. `X=1, Y=0`\n\nB. `X=0, Y=1`\n\nC. `X=1, Y=1`\n\nD. `X=0, Y=0`\n\nE. 两个输出都处于高阻态。", "solution": "当互补控制输入满足 $C=1$ 和 $C_{\\text{bar}}=0$ 时，CMOS 传输门导通（闭合开关），当 $C=0$ 和 $C_{\\text{bar}}=1$ 时，它断开（高阻态）。令 $S$ 表示控制输入 $\\text{SWAP}$，$\\overline{S}$ 表示其反相信号。输出实现了多路复用功能：\n$$\nX=\\overline{S}\\cdot A+S\\cdot B,\\qquad Y=\\overline{S}\\cdot B+S\\cdot A.\n$$\n给定 $A=1$，$B=0$，$S=1$，我们得到 $\\overline{S}=0$。代入表达式中：\n$$\nX=0\\cdot 1+1\\cdot 0=0,\\qquad Y=0\\cdot 0+1\\cdot 1=1.\n$$\n等效地，评估每个传输门：\n- 连接到 $X$ 的 TG1 的控制输入为 $C=\\overline{S}=0$，$C_{\\text{bar}}=S=1$；它处于断开状态，因此 $A$ 不驱动 $X$。\n- 连接到 $X$ 的 TG2 的控制输入为 $C=S=1$，$C_{\\text{bar}}=\\overline{S}=0$；它处于闭合状态，因此 $X=B=0$。\n- 连接到 $Y$ 的 TG3 的控制输入为 $C=\\overline{S}=0$，$C_{\\text{bar}}=S=1$；它处于断开状态，因此 $B$ 不驱动 $Y$。\n- 连接到 $Y$ 的 TG4 的控制输入为 $C=S=1$，$C_{\\text{bar}}=\\overline{S}=0$；它处于闭合状态，因此 $Y=A=1$。\n\n因此，$X=0$ 且 $Y=1$，对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1922235"}]}
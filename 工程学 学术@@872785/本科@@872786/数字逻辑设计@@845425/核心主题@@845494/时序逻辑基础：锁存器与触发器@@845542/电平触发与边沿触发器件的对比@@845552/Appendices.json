{"hands_on_practices": [{"introduction": "掌握电平触发和边沿触发器件之间差异的最佳方式，莫过于观察它们在实际信号下的响应。本练习提供了一个动手实践的机会，让您在相同的时钟和数据输入下，并排追踪D型锁存器与D型触发器的输出波形[@problem_id:1944295]。通过这种直观的对比，可以清晰地揭示锁存器在特定电平下的“透明”特性，以及触发器仅在时钟边沿进行“快照”的核心行为，从而为理解更复杂的时序电路打下坚实的基础。", "problem": "在一个数字逻辑电路中，您正在分析两种基本类型的时序存储元件：一个上升沿触发的D触发器和一个高电平敏感的D锁存器。触发器的输出表示为 $Q_F$，锁存器的输出表示为 $Q_L$。两个器件共享相同的数据输入 $D$ 和相同的时钟输入 $CLK$。\n\n假设在时间 $t=0$ 时，输出 $Q_F$ 和 $Q_L$ 都处于其初始低电平状态（逻辑0）。在整个时间间隔 $0 \\leq t  12$ 内（以任意时间单位计），输入信号 $D$ 和 $CLK$ 的行为如下所述。当值为1时，逻辑信号被视为“高”，当值为0时，被视为“低”。\n\n时钟信号 $CLK(t)$ 是周期性的，其波形如下：\n- 在 $0 \\leq t  2$、$4 \\leq t  6$ 和 $8 \\leq t  10$ 时，$CLK$ 为低电平。\n- 在 $2 \\leq t  4$、$6 \\leq t  8$ 和 $10 \\leq t  12$ 时，$CLK$ 为高电平。\n\n数据信号 $D(t)$ 的波形如下：\n- 在 $0 \\leq t  3$ 时，$D$ 为高电平。\n- 在 $3 \\leq t  5$ 时，$D$ 为低电平。\n- 在 $5 \\leq t  7$ 时，$D$ 为高电平。\n- 在 $7 \\leq t  9$ 时，$D$ 为低电平。\n- 在 $9 \\leq t  11$ 时，$D$ 为高电平。\n- 在 $11 \\leq t  12$ 时，$D$ 为低电平。\n\n根据这些信息，选择正确描述在时间间隔 $0 \\leq t  12$ 内两个输出 $Q_F(t)$ 和 $Q_L(t)$ 行为的选项。\n\nA. 在 $0 \\leq t  2$ 内 $Q_F$ 为低电平，在 $2 \\leq t  12$ 内为高电平。在 $0 \\leq t  2$ 内 $Q_L$ 为低电平，在 $2 \\leq t  12$ 内为高电平。\n\nB. 在整个时间间隔 $0 \\leq t  12$ 内 $Q_F$ 为低电平。$Q_L$ 在时间间隔 $2 \\leq t  3$、$6 \\leq t  7$ 和 $10 \\leq t  11$ 上为高电平，在其他时间为低电平。\n\nC. 在 $0 \\leq t  2$ 内 $Q_F$ 为低电平，在 $2 \\leq t  12$ 内为高电平。$Q_L$ 在时间间隔 $2 \\leq t  3$、$6 \\leq t  7$ 和 $10 \\leq t  11$ 上为高电平，在其他时间为低电平。\n\nD. 在 $0 \\leq t  2$ 内 $Q_L$ 为低电平，在 $2 \\leq t  12$ 内为高电平。$Q_F$ 在时间间隔 $2 \\leq t  3$、$6 \\leq t  7$ 和 $10 \\leq t  11$ 上为高电平，在其他时间为低电平。", "solution": "为解决此问题，我们必须根据提供的时钟（$CLK$）和数据（$D$）输入波形，分别分析一个上升沿触发的D触发器和一个高电平敏感的D锁存器的行为。两个输出 $Q_F$ 和 $Q_L$ 初始均为低电平 (0)。\n\n**上升沿触发的D触发器 ($Q_F$) 的分析**\n\n一个上升沿触发的D触发器仅在时钟信号 $CLK$ 从低电平转换到高电平（一个上升沿）的精确时刻，将其输出 $Q_F$ 更新为数据输入 $D$ 的值。在所有其他时间，其输出保持不变。\n\n首先，我们确定 $CLK$ 信号上升沿的时间。根据描述，上升沿发生在 $t=2$、$t=6$ 和 $t=10$。\n\n让我们按时间顺序分析 $Q_F$ 的状态：\n- **初始状态：** 对于 $0 \\leq t  2$，$Q_F$ 处于其初始低电平状态。$Q_F = 0$。\n- **在 $t=2$ 时（第一个上升沿）：** 我们检查此时 $D$ 的值。在时间间隔 $0 \\leq t  3$ 内，$D$ 为高电平 (1)。因此，在 $t=2$ 时，$D=1$。触发器的输出 $Q_F$ 更新以匹配 $D$，因此 $Q_F$ 变为高电平 (1)。\n- **时间间隔 $2 \\leq t  6$：** 在 $t=2$ 的上升沿之后，$Q_F$ 保持其值 1 直到下一个上升沿。在此期间 $D$ 的变化不影响 $Q_F$。所以，$Q_F = 1$。\n- **在 $t=6$ 时（第二个上升沿）：** 我们检查在 $t=6$ 时 $D$ 的值。在时间间隔 $5 \\leq t  7$ 内，$D$ 为高电平 (1)。因此，在 $t=6$ 时，$D=1$。输出 $Q_F$ 更新以匹配 $D$。由于 $Q_F$ 已经是 1，它保持为 1。\n- **时间间隔 $6 \\leq t  10$：** $Q_F$ 保持其值 1 直到下一个上升沿。所以，$Q_F = 1$。\n- **在 $t=10$ 时（第三个上升沿）：** 我们检查在 $t=10$ 时 $D$ 的值。在时间间隔 $9 \\leq t  11$ 内，$D$ 为高电平 (1)。因此，在 $t=10$ 时，$D=1$。输出 $Q_F$ 更新以匹配 $D$ 并保持为 1。\n- **时间间隔 $10 \\leq t  12$：** $Q_F$ 保持其值 1。所以，$Q_F = 1$。\n\n**$Q_F$ 的总结**：输出 $Q_F$ 在时间间隔 $0 \\leq t  2$ 内为低电平，并在 $t=2$ 时变为高电平。然后在观察区间的其余时间内保持高电平，即在 $2 \\leq t  12$ 内。\n\n**高电平敏感的D锁存器 ($Q_L$) 的分析**\n\n高电平敏感的D锁存器有两种工作模式：\n1.  **透明模式：** 当 $CLK$ 为高电平时，锁存器是“透明的”，意味着其输出 $Q_L$ 持续跟随数据输入 $D$。所以，$Q_L(t) = D(t)$。\n2.  **保持模式：** 当 $CLK$ 为低电平时，锁存器是“关闭的”，并保持在 $CLK$ 信号从高电平转换到低电平之前 $D$ 的最后一个值。\n\n让我们按时间顺序分析 $Q_L$ 的状态：\n- **时间间隔 $0 \\leq t  2$：** $CLK$ 为低电平。锁存器处于保持模式。它保持其初始值，即低电平 (0)。所以，$Q_L = 0$。\n- **时间间隔 $2 \\leq t  4$：** $CLK$ 为高电平。锁存器是透明的。$Q_L$ 跟随 $D$。\n    - 对于 $2 \\leq t  3$，$D$ 为高电平。因此，$Q_L = 1$。\n    - 对于 $3 \\leq t  4$，$D$ 为低电平。因此，$Q_L = 0$。\n- **时间间隔 $4 \\leq t  6$：** $CLK$ 为低电平。在 $t=4$ 时，锁存器进入保持模式。它保持 $t=4$ 之前的 $Q_L$ 的最后一个值。在 $t \\to 4^-$ 时，$Q_L$ 为 0。所以，在这个时间间隔内，$Q_L = 0$。\n- **时间间隔 $6 \\leq t  8$：** $CLK$ 为高电平。锁存器再次变为透明。$Q_L$ 跟随 $D$。\n    - 对于 $6 \\leq t  7$，$D$ 为高电平。因此，$Q_L = 1$。\n    - 对于 $7 \\leq t  8$，$D$ 为低电平。因此，$Q_L = 0$。\n- **时间间隔 $8 \\leq t  10$：** $CLK$ 为低电平。锁存器保持 $t \\to 8^-$ 时的值，即 0。所以，$Q_L = 0$。\n- **时间间隔 $10 \\leq t  12$：** $CLK$ 为高电平。锁存器是透明的。$Q_L$ 跟随 $D$。\n    - 对于 $10 \\leq t  11$，$D$ 为高电平。因此，$Q_L = 1$。\n    - 对于 $11 \\leq t  12$，$D$ 为低电平。因此，$Q_L = 0$。\n\n**$Q_L$ 的总结**：输出 $Q_L$ 仅当 $CLK$ 为高电平 *且* $D$ 为高电平时才为高电平。这发生在时间间隔 $2 \\leq t  3$、$6 \\leq t  7$ 和 $10 \\leq t  11$ 上。在时间间隔 $0 \\leq t  12$ 内的所有其他时间，$Q_L$ 为低电平。\n\n**结论**\n\n将我们推导出的波形与选项进行比较：\n- 在 $0 \\leq t  2$ 内 $Q_F$ 为低电平，在 $2 \\leq t  12$ 内为高电平。\n- $Q_L$ 在时间间隔 $2 \\leq t  3$、$6 \\leq t  7$ 和 $10 \\leq t  11$ 上为高电平，在其他时间为低电平。\n\n这与选项 C 中的描述相符。", "answer": "$$\\boxed{C}$$", "id": "1944295"}, {"introduction": "理解了D型器件的基本行为后，我们进一步探讨不同类型触发器在设计上的演进和优劣。此问题通过对比门控SR锁存器和JK触发器在$S=1, R=1$与$J=1, K=1$输入下的行为，揭示了一个关键的设计问题[@problem_id:1944250]。通过这个练习，您将理解为什么SR锁存器的“禁用状态”会导致不确定的输出（竞争冒险），而JK触发器的“翻转”功能则解决了这一问题，体现了时序逻辑器件为追求稳定性和可预测性而进行的设计演化。", "problem": "在数字逻辑设计中，理解时序电路在不同输入条件下的行为至关重要。考虑两种常见的存储元件：门控置位-复位（SR）锁存器和正边沿触发的JK触发器。\n\n门控SR锁存器是电平触发的。其输出仅当时钟输入CLK为逻辑1时才能改变。其行为由输入S（置位）和R（复位）定义。\nJK触发器是正边沿触发的。其输出仅当时钟输入CLK从逻辑0转换到逻辑1的精确瞬间才能改变。其行为由输入J和K定义。\n\n两个器件都被初始化为复位状态，其主输出Q为逻辑0。然后，它们都接收到相同的单个时钟脉冲。该脉冲从逻辑0开始，上升到逻辑1，在逻辑1上保持时长 $T_{pulse}$，然后回落到逻辑0。\n\n在整个过程中，SR锁存器的输入保持恒定在 $S=1$ 和 $R=1$。同时，JK触发器的输入保持恒定在 $J=1$ 和 $K=1$。\n\n下列哪个陈述准确描述了时钟脉冲结束后，SR锁存器输出 $Q_{SR}$ 的行为以及JK触发器输出 $Q_{JK}$ 的最终状态？\n\nA. 时钟为高电平时，$Q_{SR}$ 稳定地转换到1。最终状态为 $Q_{JK} = 1$。\n\nB. 时钟为高电平时，$Q_{SR}$ 稳定地转换到0。最终状态为 $Q_{JK} = 0$。\n\nC. 在时钟的下降沿，$Q_{SR}$ 进入不稳定的竞争状态，使其最终状态不可预测。最终状态为 $Q_{JK} = 1$。\n\nD. 在时钟的下降沿，$Q_{SR}$ 进入不稳定的竞争状态，使其最终状态不可预测。最终状态为 $Q_{JK} = 0$。\n\nE. 时钟为高电平时，$Q_{SR}$ 稳定地转换到1。最终状态为 $Q_{JK} = 0$。", "solution": "给定两个时序器件，初始条件为 $Q_{SR}=0$ 和 $Q_{JK}=0$，并施加一个单个时钟脉冲，该脉冲从逻辑 $0$ 上升到逻辑 $1$，在高电平上保持时长 $T_{pulse}$，然后回落到逻辑 $0$。在整个脉冲期间，SR锁存器的输入为 $S=1$ 和 $R=1$，JK触发器的输入为 $J=1$ 和 $K=1$。\n\n对于门控SR锁存器：\n- 该器件是电平触发的，因此其内部锁存器仅在 $CLK=1$ 时才被使能。在使能期间施加 $S=1$ 和 $R=1$，对于高电平有效的SR锁存器，这使其处于禁止状态。这会同时对交叉耦合对的置位和复位进行断言，在 $CLK=1$ 期间将两个内部节点驱动到非互补状态。这不是一个有效的存储状态。\n- 当时钟从 $1$ 下降到 $0$ 时，门控电路会同时禁用S和R（两个有效输入在同一瞬间变为 $0$）。在这个下降沿，内部的交叉耦合对从强制状态中释放出来，由于置位和复位的对称同时撤销，两个交叉耦合的门之间会发生竞争。因此，下降沿之后的最终锁存状态是不可预测的，取决于内部的偏斜和延迟。因此，在时钟的下降沿，$Q_{SR}$ 进入不稳定的竞争状态，使其最终状态不确定。\n\n对于正边沿触发的JK触发器：\n- 该器件仅在 $CLK$ 的上升沿瞬间改变输出。当 $J=1$ 和 $K=1$ 时，其特性行为是在上升沿翻转。因此，在上升沿，\n$$\nQ_{JK}(t_{r}^{+})=\\overline{Q_{JK}(t_{r}^{-})}=1,\n$$\n因为 $Q_{JK}$ 被初始化为 $0$。对于正边沿触发的触发器，在边沿之间和下降沿时，输出不会改变。因此，脉冲完成后，最终状态为 $Q_{JK}=1$。\n\n结合这两个结果，正确的描述是SR锁存器在下降沿进入不稳定的竞争状态（最终状态不可预测），而JK触发器最终状态为 $Q_{JK}=1$。", "answer": "$$\\boxed{C}$$", "id": "1944250"}, {"introduction": "从理想的逻辑功能转向实际的物理实现，时序分析是数字电路设计中至关重要的一环。本练习将您置于一个真实的工程场景中：诊断并修复一个触发器间的保持时间违例[@problem_id:1944249]。通过计算所需的缓冲延迟，并进一步分析将接收端换成锁存器后的时序裕量，这个实践将理论知识与工程应用紧密结合。它强调了在高速电路中，对触发和锁存机制的时序特性（如建立时间、保持时间和时钟偏斜）进行精确计算，对于保证系统可靠性的决定性作用。", "problem": "一个同步数字电路由一个发送寄存器REG1和一个接收寄存器REG2组成，它们通过一个组合逻辑块连接。两个寄存器都由相同的信号$CLK$驱动，其周期为$T_{clk} = 10.0$ ns，占空比为50%。\n\n各组件的时序参数如下：\n- REG1（上升沿触发的D触发器）：\n  - 最小“时钟到Q”延迟，$t_{c-q(\\text{min})} = 0.8$ ns。\n- 组合逻辑：\n  - 最小传播延迟，$t_{comb(\\text{min})} = 0.5$ ns。\n- 时钟偏斜 ($t_{skew} = t_{\\text{clk at REG2}} - t_{\\text{clk at REG1}}$):\n  - $t_{skew} = -0.5$ ns（时钟沿到达REG2的时间比到达REG1的早）。\n\n**A部分：** 最初，REG2是一个与REG1相同的上升沿触发D触发器。其保持时间要求为$t_{\\text{hold,FF}} = 2.0$ ns。在REG2的输入端检测到保持时间违例。为解决此问题，需要在组合逻辑路径中插入延迟缓冲器。计算这些缓冲器必须引入的最小总延迟$t_{buffer}$，以解决保持时间违例。\n\n**B部分：** 现在，考虑一个设计修改，其中触发器REG2被替换为一个高电平有效（高电平透明）的D锁存器L2。该锁存器的保持时间要求为$t_{\\text{hold,L}} = 1.2$ ns，这是相对于时钟$CLK$的*下降沿*定义的。对于这种新配置（REG1 -> 逻辑 -> L2），计算L2输入端的保持时间裕量。保持时间裕量定义为实际数据到达间隔与锁存沿所需的数据间隔之间的差值。正裕量表示满足保持时间约束。\n\n将$t_{buffer}$（来自A部分）和保持时间裕量（来自B部分）的答案以行矩阵中的一对值的形式给出。两个值都以纳秒为单位，并四舍五入到两位有效数字。", "solution": "对于从一个发送端上升沿触发的触发器（REG1）到一个接收元件的同步路径，保持时间约束使用最小延迟和捕获元件的时钟沿时间。当时钟偏斜定义为 $t_{\\text{skew}} = t_{\\text{clk at REG2}} - t_{\\text{clk at REG1}}$ 时，接收端触发器的保持时间条件为\n$$\nt_{\\text{c-q(min)}} + t_{\\text{comb(min)}} + t_{\\text{buffer}} \\geq t_{\\text{hold,FF}} + t_{\\text{skew}}.\n$$\n代入A部分的给定值，\n$$\nt_{\\text{c-q(min)}} = 0.8,\\quad t_{\\text{comb(min)}} = 0.5,\\quad t_{\\text{hold,FF}} = 2.0,\\quad t_{\\text{skew}} = -0.5,\n$$\n我们得到\n$$\n0.8 + 0.5 + t_{\\text{buffer}} \\geq 2.0 - 0.5 \\;\\Rightarrow\\; 1.3 + t_{\\text{buffer}} \\geq 1.5 \\;\\Rightarrow\\; t_{\\text{buffer}} \\geq 0.2.\n$$\n因此，解决保持时间违例所需的最小总插入缓冲器延迟为 $t_{\\text{buffer}} = 0.20$（四舍五入到两位有效数字）。\n\n对于B部分，REG2被一个高电平有效的锁存器L2所取代，其保持时间是相对于其时钟的下降沿来定义的。在占空比为$50\\%$且周期为$T_{\\text{clk}} = 10.0$的情况下，高电平相位为$T_{\\text{clk}}/2 = 5.0$。因为偏斜为$t_{\\text{skew}} = -0.5$，所以相对于REG1在$t=0$时的发送沿，L2处的上升沿（也就是透明期的开始）发生在时间$t = t_{\\text{skew}} = -0.5$，而L2处的下降沿（锁存器关闭）发生在\n$$\nt_{\\text{fall,L2}} = t_{\\text{skew}} + \\frac{T_{\\text{clk}}}{2} = -0.5 + 5.0 = 4.5.\n$$\n由REG1在$t=0$时发出的最早数据到达L2的时间为\n$$\nt_{\\text{arr,min}} = t_{\\text{c-q(min)}} + t_{\\text{comb(min)}} = 0.8 + 0.5 = 1.3,\n$$\n这在$t_{\\text{fall,L2}}$之前，因此不影响下降沿之后的保持时间间隔。L2输入端的下一次数据转换发生在下一次于$t = T_{\\text{clk}}$时的发送，到达时间为\n$$\nt_{\\text{next,min}} = T_{\\text{clk}} + t_{\\text{c-q(min)}} + t_{\\text{comb(min)}} = 10.0 + 1.3 = 11.3.\n$$\n因此，L2下降沿与随后的第一次数据转换之间的实际间隔为\n$$\n\\Delta t_{\\text{actual}} = t_{\\text{next,min}} - t_{\\text{fall,L2}} = 11.3 - 4.5 = 6.8.\n$$\n所需的间隔是锁存器保持时间$t_{\\text{hold,L}} = 1.2$。因此，保持时间裕量为\n$$\n\\text{margin} = \\Delta t_{\\text{actual}} - t_{\\text{hold,L}} = 6.8 - 1.2 = 5.6.\n$$\n将两个结果四舍五入到两位有效数字，得到$t_{\\text{buffer}} = 0.20$和保持时间裕量$= 5.6$，单位为纳秒。", "answer": "$$\\boxed{\\begin{pmatrix}0.20 & 5.6\\end{pmatrix}}$$", "id": "1944249"}]}
{"hands_on_practices": [{"introduction": "本次实践触及了硬件效率的核心问题，即如何将一个标准加法器改造为专用的减法器。它将促使你应用补码运算法则 $A - B = A + \\overline{B} + 1$，以确定完成转换所需的最少逻辑门。这个练习搭建了从算术理论到实际电路设计的桥梁。", "problem": "你是一名初级数字设计工程师，任务是创建一个专用的硬件模块。你可以使用一个标准的4位并行加法器集成电路（IC）。该IC接收两个4位二进制数 $A = A_3A_2A_1A_0$ 和 $B = B_3B_2B_1B_0$ 以及一个单位的进位输入 $C_{in}$ 作为输入。它产生一个4位的和 $S = S_3S_2S_1S_0$ 和一个最终的进位输出 $C_{out}$。\n\n你的目标是设计一个电路，*专门*用于执行4位二进制减法 $A - B$，将 $A$ 和 $B$ 视为无符号整数，并以2的补码形式产生结果。这个新电路必须使用所提供的4位加法器IC作为其核心组件。\n\n为了实现这一点，你需要添加外部逻辑电路。假设加法器的初始进位输入 $C_{in}$ 可以永久连接到逻辑高电平（1）或逻辑低电平（0）源，而无需额外的门电路，那么完成这个专用减法器电路所需的最少标准逻辑门的类型和数量是多少？\n\nA. 四个与门\n\nB. 四个或门\n\nC. 四个非门\n\nD. 四个异或门\n\nE. 四个同或门\n\nF. 不需要额外的门电路。", "solution": "我们需要一个电路，该电路总是计算无符号数 $A$ 和 $B$ 的减法 $A-B$，并使用一个标准的4位并行加法器IC以2的补码形式表示结果。对于n位字，众所周知的2的补码减法恒等式是\n$$\nA - B = A + (\\text{two's complement of }B) = A + \\overline{B} + 1,\n$$\n其中 $\\overline{B}$ 表示 $B$ 的按位取反。写作 $B=B_{3}B_{2}B_{1}B_{0}$，这意味着 $\\overline{B}=\\overline{B_{3}}\\ \\overline{B_{2}}\\ \\overline{B_{1}}\\ \\overline{B_{0}}$，其中每个位都独立取反。\n\n一个4位加法器计算\n$$\nS = A + B + C_{in}\n$$\n在4位上进行运算，并产生一个最终进位 $C_{out}$。为了使用加法器强制执行减法 $A-B$，我们将 $A$ 送入加法器的 $A$ 输入端，将 $\\overline{B}$ 送入其 $B$ 输入端，并设置\n$$\nC_{in} = 1.\n$$\n然后加法器执行\n$$\nS = A + \\overline{B} + 1 = A - B\n$$\n在4位上进行2的补码算术运算，正如所要求的那样。\n\n为了从 $B$ 生成 $\\overline{B}$，每个位 $B_{i}$ 都必须独立取反：\n$$\n\\overline{B_{i}} = \\neg B_{i}, \\quad i \\in \\{0,1,2,3\\}.\n$$\n这需要每个位一个反相器，即总共需要四个非门。假设初始进位输入可以不通过门电路直接连接到逻辑高电平，因此 $C_{in}$ 不需要额外的门电路。\n\n最小性论证：四个独立的输入位 $B_{i}$ 中的每一个都必须被取反以实现 $\\overline{B}$。任何标准的实现都需要每个位至少一个门电路来实现反相。非门是提供反相功能的唯一的单输入标准门电路；诸如与常数1进行异或运算或与常数0进行同或运算的替代方案也需要每个位一个门电路，并且并不比四个非门更少或更简单。因此，所需的最少标准逻辑门的类型和数量是四个非门。\n\n因此，正确的选项是四个非门。", "answer": "$$\\boxed{C}$$", "id": "1915341"}, {"introduction": "在建立了基本设计之后，让我们深入其内部，观察它如何运作。本练习将引导你逐步追踪一个减法运算，在加法器的每个阶段计算和与进位。通过这种手动模拟，你将具体地掌握抽象的补码算法如何在电路内部物理执行 [@problem_id:1915341]。", "problem": "一个数字电路被设计用于执行4位二进制减法。该电路通过一系列四个级联的全加器（FA）级来计算操作 $A - B$，这些级从最低有效位（LSB）的 $i=0$ 索引到最高有效位（MSB）的 $i=3$。减法 $A - B$ 通过计算 $A$ 与 $B$ 的补码之和来实现。\n\n该结构的运行方式如下：\n- 设两个4位输入数为 $A = A_3A_2A_1A_0$ 和 $B = B_3B_2B_1B_0$。\n- 对于每一级 $i$，全加器接收三个输入：$X_i$、$Y_i$ 和一个进位输入 $C_i$。它产生两个输出：一个和位 $S_i$ 和一个进位输出位 $C_{i+1}$。\n- 为执行减法，第 $i$ 个全加器的输入设置为：$X_i = A_i$ 和 $Y_i = \\overline{B_i}$（$B_i$ 的按位逻辑非）。\n- 第一级（$i=0$）的进位输入固定为 $C_0 = 1$。对于所有后续级，进位输入 $C_i$ 是前一级（$i-1$）的进位输出。\n\n你的任务是针对具体的十进制运算 $5 - 7$ 追踪该电路的内部状态。确定四个全加器级中每一级的和位（$S_i$）和进位输出位（$C_{i+1}$）的二进制值。\n\n请以一个包含八个二进制值的单行矩阵形式提供你的答案，顺序为 $(S_0, C_1, S_1, C_2, S_2, C_3, S_3, C_4)$。", "solution": "我们使用补码来实现减法：通过四个级联的全加器计算 $A+\\overline{B}+1$，其中 $X_{i}=A_{i}$，$Y_{i}=\\overline{B_{i}}$，且 $C_{0}=1$。对于每个全加器，其和与进位输出由下式给出\n$$\nS_{i}=X_{i}\\oplus Y_{i}\\oplus C_{i},\\qquad C_{i+1}=X_{i}Y_{i}+C_{i}\\left(X_{i}\\oplus Y_{i}\\right),\n$$\n其中 $\\oplus$ 是异或（XOR），并置在布尔代数中表示与（AND）。\n\n将操作数表示为4位二进制：\n$$\nA=5=0101\\;\\Rightarrow\\;(A_{3},A_{2},A_{1},A_{0})=(0,1,0,1),\n$$\n$$\nB=7=0111\\;\\Rightarrow\\;(B_{3},B_{2},B_{1},B_{0})=(0,1,1,1).\n$$\n因此，$\\overline{B}$ 按位取反为\n$$\n(\\overline{B_{3}},\\overline{B_{2}},\\overline{B_{1}},\\overline{B_{0}})=(1,0,0,0),\n$$\n所以 $Y_{3}=1$，$Y_{2}=0$，$Y_{1}=0$，$Y_{0}=0$，且 $C_{0}=1$。\n\n第 $i=0$ 级（LSB）：$X_{0}=A_{0}=1$，$Y_{0}=\\overline{B_{0}}=0$，$C_{0}=1$。\n$$\nS_{0}=1\\oplus 0\\oplus 1=0,\\qquad C_{1}=1\\cdot 0+1\\cdot(1\\oplus 0)=0+1=1.\n$$\n\n第 $i=1$ 级：$X_{1}=A_{1}=0$，$Y_{1}=\\overline{B_{1}}=0$，$C_{1}=1$。\n$$\nS_{1}=0\\oplus 0\\oplus 1=1,\\qquad C_{2}=0\\cdot 0+1\\cdot(0\\oplus 0)=0+0=0.\n$$\n\n第 $i=2$ 级：$X_{2}=A_{2}=1$，$Y_{2}=\\overline{B_{2}}=0$，$C_{2}=0$。\n$$\nS_{2}=1\\oplus 0\\oplus 0=1,\\qquad C_{3}=1\\cdot 0+0\\cdot(1\\oplus 0)=0+0=0.\n$$\n\n第 $i=3$ 级（MSB）：$X_{3}=A_{3}=0$，$Y_{3}=\\overline{B_{3}}=1$，$C_{3}=0$。\n$$\nS_{3}=0\\oplus 1\\oplus 0=1,\\qquad C_{4}=0\\cdot 1+0\\cdot(0\\oplus 1)=0+0=0.\n$$\n\n按要求的顺序 $(S_{0},C_{1},S_{1},C_{2},S_{2},C_{3},S_{3},C_{4})$ 收集结果，得到\n$$\n(0,1,1,0,1,0,1,0).\n$$\n这对应于4位补码结果 $S_{3}S_{2}S_{1}S_{0}=1110$ 且 $C_{4}=0$，即为 $-2$，与 $5-7$ 的结果相符。", "answer": "$$\\boxed{\\begin{pmatrix}0  1  1  0  1  0  1  0\\end{pmatrix}}$$", "id": "1915331"}, {"introduction": "减法器电路的输出不仅包括数值结果，还包括关键的状态标志。这最后一个实践聚焦于在执行无符号数减法时，如何解读最终的进位输出位。理解这一位的意义至关重要，因为它使我们能够判断操作数之间的大小关系（$A \\ge B$ 或 $A \\lt B$）并正确解释结果。", "problem": "一个数字电路被设计用于执行两个4位无符号二进制数 $A$ 和 $B$ 的减法运算 $A - B$。该减法通过一个4位并行加法器来实现，该加法器计算和 $S = A + (\\text{2's complement of } B)$。该硬件实现通过以下方式计算 $A-B$：将 $A$ 的各位输入到加法器的第一组输入端，将 $B$ 的各位取反（即 $B$ 的反码）输入到第二组输入端，并将加法器的初始进位输入 $C_{in}$ 设置为 1。加法器随后产生一个4位的和 $S_3S_2S_1S_0$ 和一个最终的进位输出位 $C_4$。\n\n考虑输入为 $A = 1001_2$ 和 $B = 1100_2$ 的具体情况。加法器产生的最终进位输出位 $C_4$ 的值是多少？该值对于原始数 $A$ 和 $B$ 的大小关系意味着什么？\n\nA. $C_4 = 0$，表示 $A \\geq B$ 且结果 $S$ 是真实的正值。\n\nB. $C_4 = 0$，表示 $A  B$ 且结果 $S$ 是负数，以2的补码形式表示。\n\nC. $C_4 = 1$，表示 $A \\geq B$ 且结果 $S$ 是真实的正值。\n\nD. $C_4 = 1$，表示 $A  B$ 且结果 $S$ 是负数，以2的补码形式表示。\n\nE. $C_4 = 1$，表示运算期间发生了算术溢出。", "solution": "4位减法 $A - B$ 通过一个并行加法器计算 $S = A + \\overline{B} + 1$ 来实现，其中 $\\overline{B}$ 是 $B$ 的反码，初始进位输入为 $c_{0}=1$。对于 $A=1001_{2}$ 和 $B=1100_{2}$，我们有 $\\overline{B}=0011_{2}$。\n\n对每一位 $i \\in \\{0,1,2,3\\}$ 使用全加器关系式：\n- 和：$s_{i} = a_{i} \\oplus \\overline{b_{i}} \\oplus c_{i}$，\n- 进位：$c_{i+1} = a_{i}\\overline{b_{i}} + \\overline{b_{i}}c_{i} + a_{i}c_{i}$，\n其中 $c_{0}=1$。\n\n位 0：$a_{0}=1$, $\\overline{b_{0}}=1$, $c_{0}=1$。\n$$s_{0} = 1 \\oplus 1 \\oplus 1 = 1, \\quad c_{1} = 1\\cdot 1 + 1\\cdot 1 + 1\\cdot 1 = 1.$$\n\n位 1：$a_{1}=0$, $\\overline{b_{1}}=1$, $c_{1}=1$。\n$$s_{1} = 0 \\oplus 1 \\oplus 1 = 0, \\quad c_{2} = 0\\cdot 1 + 1\\cdot 1 + 0\\cdot 1 = 1.$$\n\n位 2：$a_{2}=0$, $\\overline{b_{2}}=0$, $c_{2}=1$。\n$$s_{2} = 0 \\oplus 0 \\oplus 1 = 1, \\quad c_{3} = 0\\cdot 0 + 0\\cdot 1 + 0\\cdot 1 = 0.$$\n\n位 3：$a_{3}=1$, $\\overline{b_{3}}=0$, $c_{3}=0$。\n$$s_{3} = 1 \\oplus 0 \\oplus 0 = 1, \\quad c_{4} = 1\\cdot 0 + 0\\cdot 0 + 1\\cdot 0 = 0.$$\n\n因此 $S = s_{3}s_{2}s_{1}s_{0} = 1101_{2}$ 且最终进位输出为 $C_{4}=c_{4}=0$。在这种针对无符号数的减法方案中，$C_{4}=1$ 表示 $A \\geq B$（无借位），而 $C_{4}=0$ 表示 $A  B$（发生借位），此时 $S$ 以2的补码形式表示一个负数结果。由于此处的 $C_{4}=0$，它表示 $A  B$ 且 $S$ 是以2的补码形式表示的负数（事实上，$1101_{2}$ 表示 $-3$，这与 $9-12$ 的结果一致）。", "answer": "$$\\boxed{B}$$", "id": "1915353"}]}
{"hands_on_practices": [{"introduction": "BCD 加法器是数字系统中处理十进制算术的核心部件，常见于计算器和数字时钟。本练习将引导你完成一个完整的 BCD 加法过程，包括初步二进制求和与后续的条件校正。通过这个基础计算 [@problem_id:1911970]，你将掌握 BCD 加法器处理十进制运算的基本原理。", "problem": "一位二进制编码的十进制 (BCD) 加法器是一种为十进制算术设计的数字电路。它接收两个4位输入A和B（每个输入代表一个0到9的十进制数字）以及一个1位的输入进位$C_{in}$。该电路产生一个4位的BCD和输出$S$，以及一个1位的输出进位$C_{out}$。\n\n该加法器的操作分两个阶段进行。在第一阶段，对输入A、B和$C_{in}$执行标准的4位二进制加法。这会产生一个4位的中间和$S'$和一个1位的中间进位$C'_{out}$。在第二阶段，如果结果在BCD码中是无效的，则进行修正。当中间和$S'$大于9（即$> 1001_2$），或者中间进位$C'_{out}$为1时，满足修正条件。如果满足此条件，则将二进制数6（即$0110_2$）加到中间和$S'$上。第二次加法得到的4位结果成为最终的和$S$，而这次加法产生的进位成为最终的输出进位$C_{out}$。如果不需要修正，则最终的和$S$就是$S'$，最终的输出进位$C_{out}$为0。\n\n考虑一个实例，其中BCD输入A代表十进制数字8，BCD输入B代表十进制数字5，输入的进位$C_{in}$为1。请确定该加法器的最终5位输出，该输出是通过将最终的1位输出进位（$C_{out}$）作为最高有效位（MSB）与4位的BCD和（$S$）连接而形成的。请将这个5位结果以二进制字符串的形式表示。", "solution": "输入为$A=8 \\Rightarrow A=1000_2$，$B=5 \\Rightarrow B=0101_2$，以及$C_{in}=1 \\Rightarrow 1_2$。第一阶段执行4位二进制加法：\n$$\nS' = A + B + C_{in} = 1000_2 + 0101_2 + 1_2\n$$\n计算中间和：\n$$\n1000_2 + 0101_2 = 1101_2\n$$\n然后加上输入进位：\n$$\nS' = 1101_2 + 1_2 = 1110_2\n$$\n该4位二进制加法没有产生溢出，因此中间进位$C'_{out} = 0$。\n\nBCD修正条件要求在$C'_{out}=1$或$S' > 1001_2$时进行修正。此处$S' = 1110_2 > 1001_2$，因此需要进行修正。将$0110_2$加到$S'$上：\n$$\nS' + 0110_2 = 1110_2 + 0110_2 = 1\\,0100_2\n$$\n因此，最终的输出进位和和是\n$$\nC_{out} = 1, \\quad S = 0100_2\n$$\n将$C_{out}$作为最高有效位与4位的和$S$连接，得到5位输出$1\\,0100_2$，即二进制字符串$10100$。", "answer": "$$\\boxed{10100}$$", "id": "1911970"}, {"introduction": "掌握 BCD 加法的关键不仅在于知道如何校正，还在于理解何时进行校正。本练习通过一个假想的故障加法器情景 [@problem_id:1911921]，来检验你对校正逻辑的理解。通过分析错误操作导致的结果，你将能更深刻地体会到“加 6”校正步骤的触发条件为何至关重要。", "problem": "一位十进制二进制编码 (BCD) 加法器是一种数字电路，设计用于对以4位二进制格式表示的十进制数字进行算术运算。十进制数字0到9的BCD表示法使用二进制等价值$0000_2$到$1001_2$。一个标准的BCD加法器分两个阶段工作。首先，它使用一个4位二进制加法器来计算两个BCD输入的初始和。其次，一个修正阶段会检查这个初始和是否为无效的BCD码（即一个大于9的值，二进制为$1001_2$），或者4位二进制加法器的最高有效位是否产生了进位。如果任一条件为真，则将修正值6（二进制为$0110_2$）加到初始和上，以产生正确的BCD结果。\n\n考虑一个有故障的BCD加法器，其修正逻辑被错误地触发。当将十进制数字4与十进制数字4相加时，该加法器正确地计算出初始的二进制和。然而，由于故障，电路接着将修正值$0110_2$加到这个和上，而对于这个特定的运算，通常是不会执行这一步的。\n\n假设这次最终的错误加法产生的任何进位输出都被忽略，那么这个有故障的加法器输出的最终4位二进制字对应的十进制值是多少？", "solution": "一个十进制数字$4$的BCD码是$0100_2$。用4位二进制加法器将$4$和$4$相加，得到的初始和为\n$$S_0=0100_2+0100_2=1000_2,$$\n这等于十进制的$8$。\n\n由于故障，即使不应该加，修正值$K=0110_2$还是被加上了。错误的最终和为\n$$S=S_0+K=1000_2+0110_2=1110_2.$$\n\n此次加法产生的任何进位输出都应被忽略；在这种情况下，最高有效位之外没有进位输出，所以最终的4位字是$1110_2$。\n\n将这个4位字解释为一个无符号二进制数，得到\n$$V=1\\cdot 2^{3}+1\\cdot 2^{2}+1\\cdot 2^{1}+0\\cdot 2^{0}=8+4+2+0=14.$$\n因此，最终4位二进制字对应的十进制值为$14$。", "answer": "$$\\boxed{14}$$", "id": "1911921"}, {"introduction": "掌握了 BCD 加法器的“做什么”和“何时做”之后，我们进入到“如何做”的层面——即电路的实际设计。本练习 [@problem_id:1911900] 要求你将“和数大于9或产生进位时加6”这一抽象规则，转化为具体的布尔逻辑表达式。完成这项设计任务，意味着你将算法思想与硬件实现联系起来，这是数字逻辑设计的核心技能。", "problem": "一位数字系统工程师的任务是设计一个1位数二进制编码的十进制（BCD）加法器。一个标准的BCD数字是一个4位二进制数，表示从0到9的十进制数字。该加法器必须接收两个4位BCD输入，$A = A_3A_2A_1A_0$和$B = B_3B_2B_1B_0$，并产生一个5位BCD输出，表示它们的和，该和由1位进位输出$C_{out}$和一个4位和$S = S_3S_2S_1S_0$表示。\n\n所提出的架构包括三个阶段：\n1.  一个4位二进制加法器接收输入$A$和$B$，产生一个4位二进制和$Z = Z_3Z_2Z_1Z_0$和一个进位输出$K$。\n2.  一个您必须设计的自定义组合逻辑电路，它接收4位和$Z$和进位输出$K$作为其输入。它生成一个4位的“修正向量”$M = M_3M_2M_1M_0$。该向量的目的是为了将二进制和转换为正确的BCD格式。\n3.  第二个4位二进制加法器将中间和$Z$与修正向量$M$相加。第二次加法得到的4位结果是最终的BCD和$S$，其进位输出是最终的进位$C_{out}$。\n\n您的任务是确定修正向量的四位$M_3, M_2, M_1,$和$M_0$的最小乘积和（SOP）布尔表达式。这些表达式应以中间和的各位$Z_3, Z_2, Z_1, Z_0$和中间进位$K$来表示。作为您的最终答案，请按$M_3, M_2, M_1,$和$M_0$的顺序，将得到的四个表达式作为一个复合答案提供。", "solution": "令第一个4位加法器产生中间的4位二进制和$Z = Z_3Z_2Z_1Z_0$和进位输出$K$。解释其数值，原始的二进制和为\n$$\nN = \\operatorname{val}(A) + \\operatorname{val}(B) = 16K + \\operatorname{val}(Z).\n$$\n为了得到有效的BCD结果，当原始二进制和超过9时，或者当第一个加法器有溢出时，必须进行+6的修正（即加上$0110_2$）。因此，定义修正条件$C$为\n$$\nC=1 \\quad \\text{iff} \\quad K=1 \\ \\text{or} \\ \\operatorname{val}(Z) > 9.\n$$\n条件$\\operatorname{val}(Z) > 9$对$Z \\in \\{1010,1011,1100,1101,1110,1111\\}$成立，这可以紧凑地检测为\n$$\n\\operatorname{val}(Z)>9 \\iff Z_3=1 \\ \\text{and} \\ (Z_2=1 \\ \\text{or} \\ Z_1=1),\n$$\n即，\n$$\n\\operatorname{val}(Z)>9 \\iff Z_3(Z_2+Z_1)=Z_3Z_2+Z_3Z_1.\n$$\n因此，修正条件$C$的一个最小乘积和表达式是\n$$\nC = K + Z_3Z_2 + Z_3Z_1.\n$$\n当$C=1$时，我们必须加上$0110_2$；当$C=0$时，我们加上$0000_2$。因此，修正向量的各位是\n$$\nM_3=0,\\quad M_2=C,\\quad M_1=C,\\quad M_0=0,\n$$\n代入$C$后，得到最小SOP形式\n$$\nM_3=0,\\qquad M_2=K+Z_3Z_2+Z_3Z_1,\\qquad M_1=K+Z_3Z_2+Z_3Z_1,\\qquad M_0=0.\n$$\n这些是最小的，因为$Z_3(Z_2+Z_1)$是$\\operatorname{val}(Z)>9$的最小检测器，并且包含单文字项$K$对于覆盖第一个加法器的所有溢出情况是必要且充分的。", "answer": "$$\\boxed{\\begin{pmatrix}0 & K+Z_{3}Z_{2}+Z_{3}Z_{1} & K+Z_{3}Z_{2}+Z_{3}Z_{1} & 0\\end{pmatrix}}$$", "id": "1911900"}]}
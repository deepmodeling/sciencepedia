{"hands_on_practices": [{"introduction": "在处理竞争冒险问题时，第一步是学会识别它们。本练习将引导你分析一个标准的“积之和”(SOP)电路，并精确定位导致静态1型冒险的特定输入变化，从而将抽象的布尔函数与电路中可能出现的物理毛刺联系起来。通过这个练习，你将学会如何从逻辑表达式中预见潜在的可靠性问题 [@problem_id:1964038]。", "problem": "一个组合逻辑电路被构建用于实现一个三变量布尔函数 $F(A, B, C)$。该函数由其最小项之和定义为 $F(A, B, C) = \\sum m(2, 3, 5, 7)$。该电路由逻辑门实现，对应于为此函数推导出的最简与或式 (SOP) 表达式。\n\n由于门电路内部的物理传播延迟，该电路容易出现逻辑冒险。具体来说，我们关心的是静态1冒险，它发生于当单个输入变量改变时，函数的输出在理论上应保持逻辑1不变，但却瞬间下降到0的情况。\n\n在下述单变量输入转换中，哪一个可能在该电路实现中引起静态1冒险？\n\nA. 输入状态从 $(A,B,C) = (0,1,0)$ 到 $(A,B,C) = (0,1,1)$ 的转换。\n\nB. 输入状态从 $(A,B,C) = (1,0,1)$ 到 $(A,B,C) = (1,1,1)$ 的转换。\n\nC. 输入状态从 $(A,B,C) = (0,1,1)$ 到 $(A,B,C) = (1,1,1)$ 的转换。\n\nD. 输入状态从 $(A,B,C) = (0,0,0)$ 到 $(A,B,C) = (1,0,0)$ 的转换。\n\nE. 输入状态从 $(A,B,C) = (1,1,0)$ 到 $(A,B,C) = (1,1,1)$ 的转换。", "solution": "给定三变量布尔函数的规范最小项之和形式：\n$$\nF(A,B,C)=\\sum m(2,3,5,7).\n$$\n使用标准最小项索引，其中 $(A,B,C)$ 作为索引的二进制表示，这些最小项对应于：\n$$\nm(2)=\\bar{A}B\\bar{C},\\quad m(3)=\\bar{A}BC,\\quad m(5)=A\\bar{B}C,\\quad m(7)=ABC.\n$$\n因此，规范与或式为\n$$\nF=\\bar{A}B\\bar{C}+\\bar{A}BC+A\\bar{B}C+ABC.\n$$\n我们通过布尔代数化简，将仅在一个文字上不同的项配对：\n- 合并 $\\bar{A}B\\bar{C}$ 和 $\\bar{A}BC$：\n$$\n\\bar{A}B\\bar{C}+\\bar{A}BC=\\bar{A}B(\\bar{C}+C)=\\bar{A}B.\n$$\n- 合并 $A\\bar{B}C$ 和 $ABC$：\n$$\nA\\bar{B}C+ABC=AC(\\bar{B}+B)=AC.\n$$\n因此，最简与或式为\n$$\nF=\\bar{A}B+AC.\n$$\n\n在与或式 (SOP) 实现中，当函数对于两个仅相差一个变量的输入状态其输出理论上都为 $1$ 时，如果这两个状态被不同的乘积项（与门）所覆盖，就可能发生静态1冒险。由于传播延迟不相等，在单变量转换期间，一个乘积项的输出可能在另一个乘积项的输出上升之前下降，导致或门的输出瞬间降为 $0$。共识定理指出了可以覆盖此类冒险的共识项；对于 $F=\\bar{A}B+AC$，共识项是 $BC$，因为\n$$\n\\text{consensus}(\\bar{A}B,AC)=BC.\n$$\n该项的缺失表明，当 $A$ 在 $B=C=1$ 的条件下翻转时，存在潜在的静态1冒险。\n\n我们现在评估每个选项：\n\n- 选项 A：$(A,B,C)$ 从 $(0,1,0)$ 转换到 $(0,1,1)$。最小项 $010$ 和 $011$ 的输出都为 $1$，并且都被单个乘积项 $\\bar{A}B$（不依赖于 $C$）所覆盖。因此，在此转换期间，$\\bar{A}B$ 对应的与门保持有效状态，不会发生静态1冒险。\n\n- 选项 B：$(A,B,C)$ 从 $(1,0,1)$ 转换到 $(1,1,1)$。最小项 $101$ 和 $111$ 的输出都为 $1$，并且都被单个乘积项 $AC$（不依赖于 $B$）所覆盖。因此，不会发生静态1冒险。\n\n- 选项 C：$(A,B,C)$ 从 $(0,1,1)$ 转换到 $(1,1,1)$。最小项 $011$ 和 $111$ 的输出都为 $1$，但 $011$ 被 $\\bar{A}B$ 覆盖，而 $111$ 被 $AC$ 覆盖。这是两个不同的乘积项，并且共识项 $BC$ 不存在于最简与或式中。在保持 $B=C=1$ 不变而 $A$ 切换时，理想输出为 $F=\\bar{A}+A=1$，但在双门实现中，$\\bar{A}B$ 项的输出可能在 $AC$ 项的输出上升之前下降（反之亦然），从而产生静态1冒险。因此，这种转换可能引起静态1冒险。\n\n- 选项 D：$(A,B,C)$ 从 $(0,0,0)$ 转换到 $(1,0,0)$。最小项 $000$ 和 $100$ 的输出 $F$ 都为 $0$，所以这不是一个静态1条件，与静态1冒险无关。\n\n- 选项 E：$(A,B,C)$ 从 $(1,1,0)$ 转换到 $(1,1,1)$。初始状态 $110$ 的输出 $F=0$，最终状态 $111$ 的输出 $F=1$，因此输出不是保持为 $1$，这不是一个静态1场景。\n\n因此，在最简与或式实现中，唯一可能引起静态1冒险的转换是选项 C。", "answer": "$$\\boxed{C}$$", "id": "1964038"}, {"introduction": "在识别出冒险之后，下一个关键技能便是消除它。本练习将向你展示消除静态1型冒险最常用的方法：通过添加一个逻辑上的冗余项（共识项）来覆盖冒险的转换过程。通过解决这个以安全阀门控制为背景的实际问题，你将掌握如何加固数字电路，使其在关键应用中对瞬态故障更具鲁棒性 [@problem_id:1963989]。", "problem": "一个组合逻辑电路被设计用于控制一个安全阀。该电路的输出 $Y$ 由三个传感器输入 $A$、$B$ 和 $C$ 决定。所实现的逻辑函数由布尔表达式 $Y = A B' + B C$ 给出。在这个数字系统中，每个逻辑门和反相器都具有非零的传播延迟。\n\n考虑一个特定的操作场景，其中输入初始稳定在 $(A, B, C) = (1, 1, 1)$。随后，输入 $B$ 从 $1$ 变为 $0$，而输入 $A$ 和 $C$ 保持为 $1$。由于产生 $B'$ 的反相器的传播延迟，输出 $Y$ 在此转换期间可能会短暂且错误地降至 $0$，然后才恢复到其正确的稳态值 $1$。这种瞬态脉冲对于安全系统是不可接受的。\n\n为确保输出 $Y$ 在此特定输入转换期间保持稳定在 $1$，可以向原始表达式中“或”上一个额外的乘积项。下列哪个乘积项添加到该函数中后，将消除这种不希望出现的瞬态行为？\n\nA. $A'C$\n\nB. $B'C'$\n\nC. $AC$\n\nD. $A B$\n\nE. $A'B'$", "solution": "我们从给定的布尔函数 $Y=A B' + B C$ 开始，其中所有门都具有非零的传播延迟。我们关心的特定转换是输入从 $(A,B,C)=(1,1,1)$ 变为 $(A,B,C)=(1,0,1)$，其中 $A$ 和 $C$ 保持为 $1$，而 $B$ 从 $1$ 降为 $0$。\n\n步骤1：评估端点处的稳态值。\n- 在 $(A,B,C)=(1,1,1)$ 时，各项为 $A B'=1\\cdot 0=0$ 和 $B C=1\\cdot 1=1$，所以 $Y=1$。\n- 在 $(A,B,C)=(1,0,1)$ 时，各项为 $A B'=1\\cdot 1=1$ 和 $B C=0\\cdot 1=0$，所以 $Y=1$。\n\n步骤2：识别由传播延迟引起的瞬态冒险。\n假设产生 $B'$ 的反相器有延迟。当 $B$ 从 $1$ 转换到 $0$ 时，在变化之后会有一个瞬间，此时 $B=0$ 已经传播到 $B C$ 项（使得 $B C=0$），但 $B'$ 尚未变为高电平（所以 $B'=0$），这使得 $A B'=0$。因此，在此期间 $Y=0$，这是一个静态1型冒险。\n\n步骤3：确定消除冒险的多余（共识）项。\n根据共识定理，对于形如 $x y + y' z$ 的项，其共识项是 $x z$，添加该项不会改变稳态逻辑函数：\n$$\nx y + y' z + x z = x y + y' z.\n$$\n令 $x=A$，$y=B'$，$z=C$。则 $x y = A B'$ 且 $y' z = (B')' C = B C$。共识项为\n$$\nx z = A C.\n$$\n添加 $A C$ 项可以覆盖 $A=1$ 和 $C=1$ 的输入邻域，无论 $B$ 的瞬时值或反相器输出 $B'$ 的状态如何，从而防止输出在转换期间下降。\n\n步骤4：验证 $A C$ 在整个转换过程中保持 $Y=1$。\n在 $A=1$ 和 $C=1$ 保持不变的情况下，添加的项 $A C$ 在 $B$ 转换的整个期间都为 $1$。因此，即使由于延迟导致 $A B'$ 和 $B C$ 两项都瞬时为 $0$，输出 $Y = A B' + B C + A C$ 仍然保持为 $1$。\n\n步骤5：在给定条件 $A=1, C=1$ 下通过求值排除不正确的选项。\n- $A' C$: 当 $A=1$ 时，其值为 $0$，因此不能保护输出。\n- $B' C'$: 当 $C=1$ 时，其值为 $0$，因此不能保护输出。\n- $A B$: 仅当 $B=1$ 时为 $1$；在 $B$ 降为 $0$ 后立即失效，因此在关键区间内不能保护输出。\n- $A' B'$: 当 $A=1$ 时，其值为 $0$，因此不能保护输出。\n\n因此，要添加的正确乘积项是 $A C$，对应选项 C。", "answer": "$$\\boxed{C}$$", "id": "1963989"}, {"introduction": "为了更深入地理解竞争冒险的物理影响，我们需要从定性分析转向定量计算。本练习将挑战你通过分析不同逻辑路径上的门延迟，来精确计算由于竞争冒险所产生的瞬态毛刺脉冲的持续时间。这个过程不仅能加深你对冒险成因（即不等的传播延迟）的理解，还能让你体会到时序分析在高速数字系统设计中的重要性 [@problem_id:1964034]。", "problem": "一个数字控制系统使用三个二进制输入，$X$、$Y$ 和 $Z$，来生成一个单路输出信号，$F$。该电路由基本逻辑门实现，其行为由布尔表达式 $F = XY + X'Z$ 描述。电路中使用的逻辑门的传播延迟如下：\n- 非门 (NOT gate)：$\\tau_{NOT} = 3$ ns\n- 2输入与门 (AND gate)：$\\tau_{AND} = 2$ ns\n- 2输入或门 (OR gate)：$\\tau_{OR} = 2$ ns\n\n假设电路一直处于稳定状态，其输入 $Y$ 和 $Z$ 保持在逻辑1。在时间 $t=0$ 时，输入 $X$ 从逻辑1切换到逻辑0。由于电路路径中不同的传播延迟，输出 $F$ 可能会暂时偏离其预期的稳态值，从而产生一个瞬态脉冲。\n\n计算这个瞬态脉冲的持续时间。答案以纳秒为单位表示。", "solution": "给定 $F=XY+X'Z$，其中 $Y=1$ 和 $Z=1$ 保持不变，初始和最终的稳态值为：\n- 当 $t0$ 且 $X=1$ 时：$XY=1$，$X'Z=0$，因此 $F=1$。\n- 当 $X$ 切换到 $0$ 后，在 $t\\to\\infty$ 时：$XY=0$，$X'=1$，$X'Z=1$，因此 $F=1$。\n\n因此，由于从 $X$ 到或门输入的路径延迟不相等，当 $X$ 从 $1$ 转换到 $0$ 时，输出存在潜在的静态1冒险。\n\n定义中间信号：\n- $A=XY$ (上方的与门路径)，\n- $B=X'Z$ (下方的非门-与门路径)。\n\n传播延迟：\n- 非门 (NOT)：$\\tau_{NOT}$，\n- 与门 (AND)：$\\tau_{AND}$，\n- 或门 (OR)：$\\tau_{OR}$。\n\n在 $t=0$ 时，$X$ 从 $1\\to 0$ 切换。或门输入发生变化的时间是：\n- 经过与门延迟后，$A$ 从 $1\\to 0$ 下降：\n$$\nt_{A\\downarrow}=\\tau_{AND}。\n$$\n- 经过串联的非门和与门延迟后，$B$ 从 $0\\to 1$ 上升：\n$$\nt_{B\\uparrow}=\\tau_{NOT}+\\tau_{AND}。\n$$\n\n因此，两个或门输入均为 $0$ 的时间区间为\n$$\n\\Delta t_{\\text{inputs}}=t_{B\\uparrow}-t_{A\\downarrow}=(\\tau_{NOT}+\\tau_{AND})-\\tau_{AND}=\\tau_{NOT}。\n$$\n\n或门的输出在输入变化后经过一个额外的延迟 $\\tau_{OR}$ 才发生转换：\n- 输出在 $t_{fall}=t_{A\\downarrow}+\\tau_{OR}=\\tau_{AND}+\\tau_{OR}$ 时下降。\n- 输出在 $t_{rise}=t_{B\\uparrow}+\\tau_{OR}=\\tau_{NOT}+\\tau_{AND}+\\tau_{OR}$ 时上升。\n\n因此，输出端的瞬态低电平脉冲宽度为\n$$\nt_{rise}-t_{fall}=(\\tau_{NOT}+\\tau_{AND}+\\tau_{OR})-(\\tau_{AND}+\\tau_{OR})=\\tau_{NOT}。\n$$\n\n代入给定值 $\\tau_{NOT}=3$ ns，得到脉冲持续时间为 $3$ ns。因为 $\\Delta t_{\\text{inputs}}=\\tau_{NOT}=3$ ns 超过了 $\\tau_{OR}=2$ ns，所以或门不会滤除这个脉冲，它会以相同的宽度出现在输出端。\n*在 $t=0$ 之前，$X=1$。所以 $F=1\\cdot Y + 0\\cdot Z = Y$。\n*在 $t\\to\\infty$，$X=0$。所以 $F=0\\cdot Y + 1\\cdot Z = Z$。\n*因为 $Y=1$ 且 $Z=1$，所以稳态输出在转换前后均为1。这是一个静态1冒险的情况。\n*路径1（上半部分）：输入 $X$ 经过一个与门。该与门的输出从1变为0。此变化到达或门的时间点为 $t_1 = \\tau_{AND}$。\n*路径2（下半部分）：输入 $X$ 经过一个非门，然后经过一个与门。该与门的输出从0变为1。此变化到达或门的时间点为 $t_2 = \\tau_{NOT} + \\tau_{AND}$。\n*在 $t_1$ 时刻，或门的第一个输入变为0。在 $t_2$ 时刻，或门的第二个输入变为1。在时间区间 $(t_1, t_2)$ 内，或门的两个输入都为0。\n*因此，或门的输出会在 $t_1 + \\tau_{OR}$ 时刻变为0，在 $t_2 + \\tau_{OR}$ 时刻变回1。\n*脉冲的持续时间是 $(t_2 + \\tau_{OR}) - (t_1 + \\tau_{OR}) = t_2 - t_1 = (\\tau_{NOT} + \\tau_{AND}) - \\tau_{AND} = \\tau_{NOT}$。\n*代入数值：脉冲持续时间 = $3$ ns。", "answer": "$$\\boxed{3}$$", "id": "1964034"}]}
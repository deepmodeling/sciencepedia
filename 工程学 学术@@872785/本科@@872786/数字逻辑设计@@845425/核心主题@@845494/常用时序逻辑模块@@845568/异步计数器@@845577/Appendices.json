{"hands_on_practices": [{"introduction": "一个标准的 $n$ 位异步计数器可以自然地从 $0$ 计数到 $2^n-1$。但在实际应用中，我们常常需要计数器在一个自定义的数值范围（即自定义“模数”）内循环。本练习将引导你通过一种常用技术——异步清零——来实现一个截断序列计数器，这是数字逻辑设计中一项非常实用的基本技能。", "problem": "一个4位二进制波纹加法计数器由四个触发器构成。触发器的输出表示为 $Q_3, Q_2, Q_1, Q_0$，其中 $Q_3$ 是最高有效位 (MSB)，$Q_0$ 是最低有效位 (LSB)。该计数器设计为从状态 $Q_3Q_2Q_1Q_0 = 0000$ 开始，按递增顺序循环遍历二进制状态。\n\n为了修改计数器的自然序列，增加了一个双输入与门。该与门的输入端连接到计数器输出 $Q_3$ 和 $Q_1$。与门的输出端连接到所有四个触发器的全局异步清零（CLEAR）输入端。CLEAR 输入端上的高电平信号会立即将所有触发器的输出强制为 0（即计数器状态变为 $0000$），而无论时钟信号如何。\n\n假设计数器从状态 $0000$ 开始并接收时钟信号，这个修改后的计数器的模是多少？模定义为计数器在重复之前所经历的唯一稳定状态的数量。", "solution": "设自然的4位波纹加法计数器序列是从 $0000$ 到 $1111$ 的二进制状态递增序列。定义异步清零信号为\n$$\nC = Q_{3} Q_{1}.\n$$\n根据设计，每当 $C=1$ 时，全局 CLEAR 输入端被置为高电平，并立即将所有触发器输出强制为 $0000$，这与时钟无关。\n\n条件 $C=1$ 仅在 $Q_{3}=1$ 且 $Q_{1}=1$ 的状态下成立，即对于状态集合 $\\{1x1x\\}$，也就是 $1010$、$1011$、$1110$ 和 $1111$。从 $0000$ 开始向上计数，首次满足此条件是在达到状态 $1010$ 时。\n\n因为 CLEAR 是异步且高电平有效的，所以状态 $1010$ 不会作为稳定状态持续存在；当达到 $1010$ 时，计数器会立即被强制复位到 $0000$。因此，每个周期中的稳定状态恰好是\n$$\n0000, 0001, 0010, 0011, 0100, 0101, 0110, 0111, 1000, 1001,\n$$\n在此之后，计数器试图进入 $1010$ 状态，但会立即被清零回到 $0000$。\n\n因此，模等于重复前访问的唯一稳定状态的数量，即\n$$\n10.\n$$", "answer": "$$\\boxed{10}$$", "id": "1909926"}, {"introduction": "异步计数器最显著的缺点是其固有的传播延迟。由于时钟信号需要像涟漪一样逐级通过每个触发器，计数器在状态转换期间会短暂地进入不正确的中间状态，这被称为“毛刺”或“竞争冒险”。本练习将让你亲手计算这种瞬态错误状态的持续时间，从而具体地理解这种关键的时序风险。", "problem": "一个3位异步纹波减法计数器由负边沿触发的JK触发器构成。输出表示为 $Q_2Q_1Q_0$，其中 $Q_0$ 是最低有效位 (LSB)。在此实现中，每个触发器（LSB除外）的时钟输入由前一个触发器的反相输出 $\\bar{Q}$ 驱动。所有触发器的J和K输入都连接到高电平信号，使其在每个触发时钟沿翻转。一个周期性时钟信号被施加到LSB触发器的时钟输入端。每个触发器从其时钟的触发沿到其输出变化都有一个相同的传播延迟，即 $t_{pd} = 12 \\text{ ns}$。\n\n考虑计数器从稳定状态 $Q_2Q_1Q_0 = 100$ 变为减法计数序列中下一个稳定状态的特定转换过程。在此转换期间，由于纹波效应，计数器可能会短暂地经过其他二进制状态。这些瞬态被认为是错误的。\n\n计算在这一次转换事件中，计数器显示错误状态（即除初始状态 $100$ 或最终状态 $011$ 之外的任何状态）的总持续时间。答案以纳秒为单位表示。", "solution": "因为每个触发器都是负边沿触发，并且第 $i$ 级 ($i \\geq 1$) 的时钟由第 $i-1$ 级的 $\\bar{Q}$ 驱动，所以第 $i$ 级在 $\\bar{Q}_{i-1}$ 的下降沿翻转，这发生在 $Q_{i-1}$ 发生 $0 \\to 1$ 转换时。当 $J=K=1$ 时，每个触发器在其触发时钟沿翻转。假设到达LSB的外部时钟下降沿发生在 $t=0$ 时刻。\n\n初始稳定状态为 $Q_{2}Q_{1}Q_{0}=100$。\n\n纹波过程中的时序和状态：\n- 在 $t=0$ 时，时钟下降沿到达LSB。经过一个传播延迟 $t_{pd}$ 后，LSB在 $t=t_{pd}$ 时翻转：$Q_{0}: 0 \\to 1$。状态变为 $101$。同时，$\\bar{Q}_{0}$ 发生 $1 \\to 0$ 的变化，这对中间触发器的时钟来说是一个下降沿。\n- 中间触发器在其时钟下降沿之后再经过一个 $t_{pd}$ 响应，因此在 $t=2t_{pd}$ 时它翻转：$Q_{1}: 0 \\to 1$。状态变为 $111$。同时，$\\bar{Q}_{1}$ 发生 $1 \\to 0$ 的变化，这对MSB触发器的时钟来说是一个下降沿。\n- MSB再经过一个 $t_{pd}$ 后响应，因此在 $t=3t_{pd}$ 时它翻转：$Q_{2}: 1 \\to 0$。状态变为 $011$，这是减法计数的最终稳定状态。\n\n因此，计数器从 $t=t_{pd}$ 时的第一次变化（状态 $101$）开始显示错误状态，直到在 $t=3t_{pd}$ 时达到最终正确状态（状态 $011$）。总的错误持续时间是\n$$\nT_{\\text{incorrect}} = 3t_{pd} - t_{pd} = 2t_{pd}.\n$$\n当 $t_{pd} = 12\\ \\text{ns}$ 时，\n$$\nT_{\\text{incorrect}} = 2 \\times 12 = 24.\n$$", "answer": "$$\\boxed{24}$$", "id": "1909968"}, {"introduction": "真正掌握异步计数器原理的标志是能够分析任何连接方式的电路，而不仅仅是标准设计。本练习提供了一个“接线错误”的计数器，这是一个绝佳的挑战，要求你仔细追踪信号的流动，并预测一个陌生电路的行为。通过解决这个问题，你将极大地提高自己的电路分析与诊断能力。", "problem": "考虑一个由三个下降沿触发的T型触发器（记为 FF$_0$、FF$_1$ 和 FF$_2$）设计的3位异步计数器。每个触发器的T输入端永久连接到高电平（二进制'1'）。计数器的状态由二进制数 $Q_2 Q_1 Q_0$ 表示，其中 $Q_0$ 是最低有效位 (LSB)，对应于 FF$_0$ 的输出，$Q_1$ 对应于 FF$_1$ 的输出，$Q_2$ 对应于 FF$_2$ 的输出。\n\n在一个标准的3位行波计数器中，外部时钟信号 (`CLK`) 驱动 FF$_0$，输出 $Q_0$ 驱动 FF$_1$，输出 $Q_1$ 驱动 FF$_2$。然而，这个特定的计数器接线错误。时钟连接如下：\n- 外部时钟信号 `CLK` 连接到 FF$_0$ 的时钟输入端。\n- 输出 $Q_2$ 连接到 FF$_1$ 的时钟输入端。\n- 输出 $Q_0$ 连接到 FF$_2$ 的时钟输入端。\n\n假设计数器从状态 $(Q_2, Q_1, Q_0) = (0, 0, 0)$ 开始，并由一个连续的时钟脉冲序列驱动，那么该计数器显示的重复十进制值序列是什么？\n\nA. $0 \\to 1 \\to 4 \\to 5 \\to 2 \\to 3 \\to 6 \\to 7 \\to 0 \\dots$\n\nB. $0 \\to 1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6 \\to 7 \\to 0 \\dots$\n\nC. $0 \\to 7 \\to 6 \\to 5 \\to 4 \\to 3 \\to 2 \\to 1 \\to 0 \\dots$\n\nD. $0 \\to 1 \\to 0 \\to 1 \\to 0 \\dots$\n\nE. $0 \\to 7 \\to 6 \\to 3 \\to 2 \\to 5 \\to 4 \\to 1 \\to 0 \\dots$", "solution": "一个 $T=1$ 的下降沿触发T型触发器，在其时钟输入的每个下降沿都会翻转其输出。根据给定的错误接线：\n- FF$_0$（输出 $Q_{0}$）在 $\\mathrm{CLK}$ 的每个下降沿翻转。\n- FF$_2$（输出 $Q_{2}$）在 $Q_{0}$ 的每个下降沿翻转。\n- FF$_1$（输出 $Q_{1}$）在 $Q_{2}$ 的每个下降沿翻转。\n\n设 $\\mathrm{CLK}$ 下降沿之前的状态为 $(q_{2},q_{1},q_{0})$，所有产生的行波稳定后的状态为 $(q_{2}^{+},q_{1}^{+},q_{0}^{+})$。那么：\n$$q_{0}^{+}=\\overline{q_{0}},$$\n$$q_{2}^{+}=\\begin{cases}\n\\overline{q_{2}},  \\text{如果 } q_{0}=1 \\text{（此时 } q_{0}:1\\to 0\\text{ 产生下降沿）}\\\\\nq_{2},  \\text{如果 } q_{0}=0\n\\end{cases},$$\n$$q_{1}^{+}=\\begin{cases}\n\\overline{q_{1}},  \\text{如果 } q_{0}=1 \\text{ 且 } q_{2}=1 \\text{（此时 } q_{2}:1\\to 0\\text{ 下降）}\\\\\nq_{1},  \\text{否则}\n\\end{cases}.$$\n\n从 $(Q_{2},Q_{1},Q_{0})=(0,0,0)$ 开始：\n- 第1个下降沿：$q_{0}$ 上升 $(0\\to 1)$，因此 $q_{2}$ 不变，$q_{1}$ 不变。状态为 $(0,0,1)$，十进制为 $1$。\n- 第2个下降沿：$q_{0}$ 下降 $(1\\to 0)$，因此 $q_{2}$ 翻转 $0\\to 1$（上升），故 $q_{1}$ 不变。状态为 $(1,0,0)$，十进制为 $4$。\n- 第3个下降沿：$q_{0}$ 上升，$q_{2}$ 不变，$q_{1}$ 不变。状态为 $(1,0,1)$，十进制为 $5$。\n- 第4个下降沿：$q_{0}$ 下降，因此 $q_{2}$ 翻转 $1\\to 0$（下降），这会使 $q_{1}$ 翻转 $0\\to 1$。状态为 $(0,1,0)$，十进制为 $2$。\n- 第5个下降沿：$q_{0}$ 上升，无其他变化。状态为 $(0,1,1)$，十进制为 $3$。\n- 第6个下降沿：$q_{0}$ 下降，因此 $q_{2}$ 翻转 $0\\to 1$（上升），$q_{1}$ 不变。状态为 $(1,1,0)$，十进制为 $6$。\n- 第7个下降沿：$q_{0}$ 上升，无其他变化。状态为 $(1,1,1)$，十进制为 $7$。\n- 第8个下降沿：$q_{0}$ 下降，因此 $q_{2}$ 翻转 $1\\to 0$（下降），这会使 $q_{1}$ 翻转 $1\\to 0$。状态为 $(0,0,0)$，十进制为 $0$。\n\n因此，重复序列为 $0\\to 1\\to 4\\to 5\\to 2\\to 3\\to 6\\to 7\\to 0\\to \\dots$，这对应于选项A。", "answer": "$$\\boxed{A}$$", "id": "1909963"}]}
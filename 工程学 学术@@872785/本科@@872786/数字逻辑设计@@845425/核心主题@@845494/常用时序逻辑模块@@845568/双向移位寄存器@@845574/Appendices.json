{"hands_on_practices": [{"introduction": "要精通双向移位寄存器，第一步是亲手追踪数据在其内部的流动。通过模拟寄存器的状态变化，我们可以建立对移位操作核心机制的直观理解。下面的练习 [@problem_id:1913058] 提供了一个具体场景，让你实践在一个4位寄存器中执行一系列的右移和左移操作，并观察其最终状态。", "problem": "一个4位双向移位寄存器存有二进制值 `1011`。这些位被标记为 `Q_3 Q_2 Q_1 Q_0`，其中 `Q_3` 是最高有效位 (MSB)，`Q_0` 是最低有效位 (LSB)。该寄存器经历一个包含三个时钟脉冲的序列。操作如下：\n1.  在第一个时钟脉冲时，执行一次右移操作。\n2.  在第二个时钟脉冲时，执行一次左移操作。\n3.  在第三个时钟脉冲时，再执行一次左移操作。\n\n对于右移操作，串行输入被送入最高有效位 (`Q_3`)，且对于 `i = 3, 2, 1`，`Q_i` 的内容被传输到 `Q_{i-1}`。对于左移操作，串行输入被送入最低有效位 (`Q_0`)，且对于 `i = 0, 1, 2`，`Q_i` 的内容被传输到 `Q_{i+1}`。对于所有操作，串行输入均为常数逻辑 `0`。\n\n确定经过这三个操作序列后，寄存器中存储的4位二进制值。将您的答案表示为一个4位二进制字符串。", "solution": "设第 $k$ 个时钟脉冲后的寄存器状态表示为 $Q_{3}^{(k)}Q_{2}^{(k)}Q_{1}^{(k)}Q_{0}^{(k)}$，初始状态为 $Q_{3}^{(0)}Q_{2}^{(0)}Q_{1}^{(0)}Q_{0}^{(0)}=1011$。所有操作的串行输入均为 $0$。\n\n对于右移操作，更新规则为：\n$$\nQ_{3}^{+}=0,\\quad Q_{2}^{+}=Q_{3},\\quad Q_{1}^{+}=Q_{2},\\quad Q_{0}^{+}=Q_{1}.\n$$\n将此规则应用于初始状态，得到第一个脉冲后的状态：\n$$\nQ_{3}^{(1)}=0,\\quad Q_{2}^{(1)}=1,\\quad Q_{1}^{(1)}=0,\\quad Q_{0}^{(1)}=1 \\;\\Rightarrow\\; Q^{(1)}=0101.\n$$\n\n对于左移操作，更新规则为：\n$$\nQ_{3}^{+}=Q_{2},\\quad Q_{2}^{+}=Q_{1},\\quad Q_{1}^{+}=Q_{0},\\quad Q_{0}^{+}=0.\n$$\n将此规则应用于 $Q^{(1)}=0101$，得到第二个脉冲后的状态：\n$$\nQ_{3}^{(2)}=Q_{2}^{(1)}=1,\\quad Q_{2}^{(2)}=Q_{1}^{(1)}=0,\\quad Q_{1}^{(2)}=Q_{0}^{(1)}=1,\\quad Q_{0}^{(2)}=0 \\;\\Rightarrow\\; Q^{(2)}=1010.\n$$\n\n对 $Q^{(2)}=1010$ 应用第二次左移操作，得到第三个脉冲后的状态：\n$$\nQ_{3}^{(3)}=Q_{2}^{(2)}=0,\\quad Q_{2}^{(3)}=Q_{1}^{(2)}=1,\\quad Q_{1}^{(3)}=Q_{0}^{(2)}=0,\\quad Q_{0}^{(3)}=0 \\;\\Rightarrow\\; Q^{(3)}=0100.\n$$\n\n因此，经过这三个操作后，寄存器中存储的4位值为 $0100$。", "answer": "$$\\boxed{0100}$$", "id": "1913058"}, {"introduction": "在数字电路设计中，理解正常工作原理与诊断故障同样重要。当一个系统表现出异常行为时，工程师必须能够推断出问题的根源。这个练习 [@problem_id:1913069] 模拟了一个常见的故障诊断场景：给定一个初始状态和一次操作后观察到的错误结果，你需要通过比较预期行为与实际行为来定位出故障的硬件单元。", "problem": "一个4位双向移位寄存器由D型触发器构成。该寄存器的状态由四位$Q_3Q_2Q_1Q_0$表示，其中$Q_3$是最高有效位 (MSB)。该寄存器具有模式控制功能，可以配置为左移或右移操作。左移操作的串行数据输入表示为$S_L$。\n\n该寄存器被初始化为状态`1010`。然后，它被配置为执行左移操作，并且串行输入$S_L$保持在恒定的逻辑`1`。在施加一个时钟脉冲后，观测到寄存器的新状态为`1101`。\n\n假设时钟信号、模式选择逻辑和串行输入线都功能正常，并且四个触发器中至多有一个存在故障，请确定哪个触发器发生了故障。\n\nA. 存储$Q_0$的触发器。\n\nB. 存储$Q_1$的触发器。\n\nC. 存储$Q_2$的触发器。\n\nD. 存储$Q_3$的触发器。", "solution": "在一个状态由$Q_{3}Q_{2}Q_{1}Q_{0}$表示的4位双向移位寄存器中，对于左移操作，一个时钟脉冲的位传输方程为\n$$\nQ_{3}^{+}=Q_{2},\\quad Q_{2}^{+}=Q_{1},\\quad Q_{1}^{+}=Q_{0},\\quad Q_{0}^{+}=S_{L},\n$$\n其中上标$+$表示时钟作用后的次态，$S_{L}$是从$Q_{0}$端输入的左移串行数据。\n\n给定初始状态$Q_{3}Q_{2}Q_{1}Q_{0}=1010$且$S_{L}=1$，预期的次态计算如下\n$$\nQ_{3}^{+}=Q_{2}=0,\\quad Q_{2}^{+}=Q_{1}=1,\\quad Q_{1}^{+}=Q_{0}=0,\\quad Q_{0}^{+}=S_{L}=1,\n$$\n所以正确的次态应为$0101$。\n\n观测到的次态为$1101$。与预期的$0101$逐位比较：\n- $Q_{3}^{+}$不匹配：预期为$0$，观测为$1$。\n- $Q_{2}^{+}$匹配：预期为$1$，观测为$1$。\n- $Q_{1}^{+}$匹配：预期为$0$，观测为$0$。\n- $Q_{0}^{+}$匹配：预期为$1$，观测为$1$。\n\n\n在时钟、模式选择逻辑和串行输入线均正常，且至多只有一个触发器故障的假设下，唯一符合的故障是在存储$Q_{3}$的触发器中。因为$Q_{3}^{+}$本应等于已知的$Q_{2}$当前正确值$0$，但它却变成了$1$。其他三个触发器的行为与预期的左移操作一致，因此可以排除它们是唯一错误源的可能性。\n\n因此，发生故障的触发器是存储$Q_{3}$的那个。", "answer": "$$\\boxed{D}$$", "id": "1913069"}, {"introduction": "移位操作不仅是硬件层面的位移动，其背后也蕴含着深刻的数学结构。将一种操作用另一种等效的操作序列来实现，是算法优化和底层编程中的常见技巧。这个练习 [@problem_id:1913042] 挑战你跳出单一操作的思维定式，探索在一个8位寄存器中，左循环移位和右循环移位之间的等价关系，从而揭示它们在模算术下的内在联系。", "problem": "一个数字信号处理器的核心功能依赖于一个8位寄存器，我们称之为 `R`。寄存器 `R` 被设计用于执行各种位操作。寄存器的状态可以表示为一个位向量 $(R_7, R_6, R_5, R_4, R_3, R_2, R_1, R_0)$，其中 $R_7$ 是最高有效位。\n\n由于一个特定的硬件故障，寄存器的大部分指令已经失效。唯一仍然可用的指令是 `ROR`，它执行一次**循环右移**。一次 `ROR` 操作将初始状态 $(R_7, R_6, \\dots, R_1, R_0)$ 转换为新状态 $(R_0, R_7, R_6, \\dots, R_2, R_1)$。\n\n你的任务是实现等效于一次3位的**循环左移**的操作。一次循环左移 (`ROL`) 被定义为将初始状态 $(R_7, R_6, \\dots, R_1, R_0)$ 转换为 $(R_6, R_5, \\dots, R_0, R_7)$。因此，一次3位的循环左移等效于执行三次 `ROL` 操作。\n\n确定需要执行连续 `ROR` 操作的最少次数，以在寄存器 `R` 中产生与3位循环左移完全相同的最终状态。", "solution": "设寄存器宽度为 $N=8$，索引位置为 $j\\in\\{0,1,\\dots,7\\}$。我们规定，一次循环右移 $\\mathrm{ROR}$ 将每一位进行映射，使得位置 $j$ 上的新位来自于原先位置 $(j+1) \\bmod 8$ 上的旧位；而一次循环左移 $\\mathrm{ROL}$ 将位置 $j$ 上的新位映射自原先位置 $(j-1) \\bmod 8$ 上的旧位。\n\n将这些映射分别应用 $n$ 次和 $k$ 次，可得：\n$$\n\\mathrm{ROR}^{n}:\\quad R_{j}^{\\text{new}}=R_{(j+n)\\bmod 8}^{\\text{old}},\\qquad\n\\mathrm{ROL}^{k}:\\quad R_{j}^{\\text{new}}=R_{(j-k)\\bmod 8}^{\\text{old}}.\n$$\n为仅使用 $\\mathrm{ROR}$ 来复现 $\\mathrm{ROL}^{k}$，我们需要对于所有的 $j$ 满足：\n$$\n(j-k)\\equiv (j+n)\\pmod{8}\\quad\\text{for all }j,\n$$\n这可以简化为：\n$$\nn\\equiv -k \\equiv 8-k \\pmod{8}.\n$$\n对于 $k=3$（即3位左移），任何形式为 $n=8m+5$ 的 $n$ 都可以仅使用 $\\mathrm{ROR}$ 产生相同的最终状态。满足条件的最小非负整数 $n$ 是\n$$\nn=5.\n$$\n因此，在8位寄存器上，为匹配一次3位的 `ROL` 操作，所需连续 `ROR` 操作的最小次数是 $5$。", "answer": "$$\\boxed{5}$$", "id": "1913042"}]}
{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。要真正掌握同步加减计数器，最好的方法就是亲手设计一个。本练习将引导你设计一个与标准二进制序列不同的3位格雷码加减计数器。这类计数器在旋转编码器等应用中至关重要，因为其单比特翻转特性可以避免状态转换时的误判。通过这个练习，你将实践从状态转换图到推导D触发器激励方程的完整设计流程。[@problem_id:1966203]", "problem": "一个用于旋转轴编码器的数字控制系统需要一个可以跟踪轴位置的同步3位计数器。计数器的状态由三位 $Q_2, Q_1, Q_0$ 表示。该系统必须按标准3位格雷码序列进行循环。一个方向控制输入 `DIR` 决定了计数方向：当 `DIR`=0 时，计数器向前（向上）循环；当 `DIR`=1 时，向后（向下）循环。所有状态转换都与时钟信号的上升沿同步。\n\n标准3位格雷码序列为：000, 001, 011, 010, 110, 111, 101, 100。\n\n该计数器将使用三个D型触发器（D-FFs）实现，其输入 $D_2, D_1, D_0$ 对应于状态位 $Q_2, Q_1, Q_0$。您的任务是确定输入 $D_2, D_1,$ 和 $D_0$ 的正确组合逻辑方程组，这些方程是当前状态 ($Q_2, Q_1, Q_0$) 和方向输入 `DIR` 的函数。\n\n在下面的选项中，撇号（例如，$A'$）表示非（NOT）运算，并置（例如，$AB$）表示与（AND）运算，加号（$+$）表示或（OR）运算，$\\oplus$ 表示异或（XOR）运算，XNOR 表示同或（XNOR）运算。\n\n下列哪组方程正确地描述了D-FF输入的逻辑？\n\nA.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\text{ XNOR } Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nB.\n$D_2 = Q_2 Q_0 + DIR Q_1 Q_0' + DIR' Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\text{ XNOR } Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nC.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\oplus Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\oplus Q_1$\n\nD.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 + Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nE.\n$D_2 = Q_2 \\oplus Q_1$\n$D_1 = Q_1 \\oplus Q_0$\n$D_0 = Q_0' + DIR$", "solution": "我们需要设计一个同步3位可逆格雷码计数器，其计数序列为 000, 001, 011, 010, 110, 111, 101, 100，并使用三个输入为 $D_{2},D_{1},D_{0}$ 的D-FF实现。方向输入 $DIR$ 选择下一状态：当 $DIR=0$ 时，向前（向上）计数；当 $DIR=1$ 时，向后（向下）计数。所有转换必须是格雷码相邻的（只有一位发生变化）。\n\n首先，写出每个现态 $(Q_{2},Q_{1},Q_{0})$ 的次态映射。\n- 当 $DIR=0$ (向上计数)时：\n$(000)\\to(001)$, $(001)\\to(011)$, $(011)\\to(010)$, $(010)\\to(110)$, $(110)\\to(111)$, $(111)\\to(101)$, $(101)\\to(100)$, $(100)\\to(000)$.\n- 当 $DIR=1$ (向下计数)时：\n$(000)\\to(100)$, $(001)\\to(000)$, $(011)\\to(001)$, $(010)\\to(011)$, $(110)\\to(010)$, $(111)\\to(110)$, $(101)\\to(111)$, $(100)\\to(101)$.\n\n根据这些映射，推导每个次态位。\n\n1) $D_{0}$ 的推导。\n汇总每个 $(Q_{2},Q_{1})$ 组合的次态 $Q_{0}^{+}$，可以发现 $Q_{0}^{+}$ 与 $Q_{0}$ 无关，并且满足以下奇偶关系\n$$\nQ_{0}^{+}=\\overline{DIR \\oplus Q_{2} \\oplus Q_{1}}=(DIR \\oplus Q_{2})\\ \\text{XNOR}\\ Q_{1}.\n$$\n因此，\n$$\nD_{0}=(DIR \\oplus Q_{2})\\ \\text{XNOR}\\ Q_{1}.\n$$\n\n2) $D_{1}$ 的推导。\n观察状态转换：\n- 当 $Q_{0}=0$ 时，对于两个方向，$Q_{1}^{+}=Q_{1}$（因为只有 $Q_{0}$ 或 $Q_{2}$ 可能翻转）。\n- 当 $Q_{0}=1$ 时，$Q_{1}^{+}$ 取决于 $DIR$ 和 $Q_{2}$，关系为 $Q_{1}^{+}=(DIR\\ \\text{XNOR}\\ Q_{2})$（这可以通过上述映射中所有 $Q_{0}=1$ 的四种情况进行验证）。\n使用 $Q_{0}$ 进行多路选择来组合：\n$$\nD_{1}=Q_{1}Q_{0}'+(DIR\\ \\text{XNOR}\\ Q_{2})\\,Q_{0}.\n$$\n\n3) $D_{2}$ 的推导。\n观察状态转换：\n- 当 $Q_{0}=1$ 时，对于两个方向，$Q_{2}^{+}=Q_{2}$（只有 $Q_{0}$ 或 $Q_{1}$ 翻转）。\n- 当 $Q_{0}=0$ 时，$Q_{2}^{+}$ 取决于 $DIR$ 和 $Q_{1}$，关系为 $Q_{2}^{+}=Q_{1}\\oplus DIR$（已对所有四种 $Q_{0}=0$ 的情况进行检查）。\n使用 $Q_{0}$ 进行多路选择来组合：\n$$\nD_{2}=Q_{2}Q_{0}+(Q_{1}\\oplus DIR)\\,Q_{0}'=Q_{2}Q_{0}+DIR'Q_{1}Q_{0}'+DIR\\,Q_{1}'Q_{0}'.\n$$\n\n与选项进行比较：\n- $D_{2}=Q_{2}Q_{0}+DIR'Q_{1}Q_{0}'+DIR\\,Q_{1}'Q_{0}'$,\n- $D_{1}=Q_{1}Q_{0}'+(DIR\\ \\text{XNOR}\\ Q_{2})\\,Q_{0}$,\n- $D_{0}=(DIR \\oplus Q_{2})\\ \\text{XNOR}\\ Q_{1}$,\n这与选项A完全匹配。\n\n因此，正确选项是A。", "answer": "$$\\boxed{A}$$", "id": "1966203"}, {"introduction": "在实际应用中，计数器的功能常常需要超越简单的递增或递减。这个练习引入了一个更复杂的场景：设计一个带有特殊“保持”状态的BCD（二进制编码的十进制）计数器。你需要修改标准的BCD计数序列，使其在达到特定计数值时暂停，这在需要进行定时或等待操作的控制系统中是一种常见需求。此任务不仅能加深你对JK触发器激励表的理解，还能让你学会如何在设计中实现非线性的状态转移。[@problem_id:1966209]", "problem": "一个专用的数字控制器需要一个具有特殊计数序列的4位同步计数器。该计数器将使用JK触发器进行设计。计数器的四个输出位表示为 $Q_3, Q_2, Q_1, Q_0$，其中 $Q_3$ 是最高有效位 (MSB)。该计数器用作二进制编码的十进制 (BCD) 计数器，计数序列从 0 (0000) 到 9 (1001)。\n\n计数器的方向由单根输入线 $M$ 控制。当 $M=1$ 时，计数器递增（向上计数）；当 $M=0$ 时，计数器递减（向下计数）。计数序列在两个方向上都循环（即，向上计数时从 9 到 0，向下计数时从 0 到 9）。\n\n特殊行为如下：当达到计数值五 (0101) 时，无论计数方向如何，计数器都必须保持此状态 (0101) 一个额外的时钟周期，然后才进入其序列中的下一个状态。对于所有其他计数值，它在每个时钟脉冲下正常转换。任何BCD无效状态（1010到1111）在设计中都可以作为无关项处理。\n\nJK触发器由其特征方程 $Q_{next} = J \\cdot Q' + K' \\cdot Q$ 定义。\n\n您的任务是确定对应于最高有效位 $Q_3$ 的JK触发器的 $J_3$ 输入的简化积之和 (SOP) 布尔表达式。最终表达式应为控制输入 $M$ 和计数器状态输出 $Q_3, Q_2, Q_1, Q_0$ 的函数。", "solution": "我们使用特征方程为 $Q_{\\text{next}}=J Q' + K' Q$ 的JK触发器。由此，单位元 $Q$ 的JK激励条件为：\n- 对于 $0 \\to 0$：$J=0$（且 $K$ 为无关项）。\n- 对于 $0 \\to 1$：$J=1$（且 $K$ 为无关项）。\n- 对于 $1 \\to 0$：$K=1$（且 $J$ 为无关项）。\n- 对于 $1 \\to 1$：$K=0$（且 $J$ 为无关项）。\n\n因此，对于最高有效位 $Q_{3}$，输入 $J_{3}$ 必须为 $1$ 的情况，仅当当前状态/输入组合使得 $Q_{3}$ 产生 $0 \\to 1$ 的转换时。\n\n有效的BCD状态为 $0000$ 到 $1001$。当 $M=1$ 时计数器向上计数，当 $M=0$ 时向下计数，具有循环功能，并且无论方向如何，在 $0101$ 状态保持一个额外的时钟周期。因此，有效状态的次态映射如下：\n- 对于 $M=1$ (向上): $0 \\to 1$, $1 \\to 2$, $2 \\to 3$, $3 \\to 4$, $4 \\to 5$, $5 \\to 5$ (保持), $6 \\to 7$, $7 \\to 8$, $8 \\to 9$, $9 \\to 0$。\n- 对于 $M=0$ (向下): $0 \\to 9$, $1 \\to 0$, $2 \\to 1$, $3 \\to 2$, $4 \\to 3$, $5 \\to 5$ (保持), $6 \\to 5$, $7 \\to 6$, $8 \\to 7$, $9 \\to 8$。\n\n位 $Q_{3}$ 在状态 $0000$ 到 $0111$ 时等于 $0$，在状态 $1000$ 和 $1001$ 时等于 $1$。因此，$Q_{3}$ 仅在以下当前状态/输入情况下执行 $0 \\to 1$ 的转换：\n- 对于 $M=1$：从状态 $0111$ 到 $1000$，即 $M=1$ 且 $(Q_{3},Q_{2},Q_{1},Q_{0})=(0,1,1,1)$。\n- 对于 $M=0$：从状态 $0000$ 到 $1001$ (向下循环)，即 $M=0$ 且 $(Q_{3},Q_{2},Q_{1},Q_{0})=(0,0,0,0)$。\n\n所有其他有效的当前状态/输入组合对于 $Q_{3}$ 产生 $0 \\to 0$、 $1 \\to 0$ 或 $1 \\to 1$ 的转换，对于这些情况，$J_{3}$ 要么是 $0$（在 $0 \\to 0$ 的情况下），要么是无关项（当 $Q_{3}=1$ 时）。BCD无效状态 $1010$ 到 $1111$ 被指定为无关项，并且在任何情况下，它们都有 $Q_{3}=1$，所以 $J_{3}$ 在那里也是一个无关项。\n\n因此，$J_{3}$ 的最小积之和表达式是对应于这两个 $0 \\to 1$ 转换的两个最小项之和：\n$$\nJ_{3} \\;=\\; M\\,Q_{3}'\\,Q_{2}\\,Q_{1}\\,Q_{0}\\;+\\;M'\\,Q_{3}'\\,Q_{2}'\\,Q_{1}'\\,Q_{0}'.\n$$\n这个表达式已经是简化的，并且符合SOP形式。", "answer": "$$\\boxed{M\\,Q_{3}'\\,Q_{2}\\,Q_{1}\\,Q_{0}\\;+\\;M'\\,Q_{3}'\\,Q_{2}'\\,Q_{1}'\\,Q_{0}'}$$", "id": "1966209"}, {"introduction": "设计电路是一回事，而分析和调试出乎意料的行为则是工程师必备的另一项关键技能。这个练习模拟了一个在现实中可能发生的硬件接线错误，并要求你预测这个错误对计数器行为的最终影响。通过追踪这个“故障”计数器的状态序列，你将深刻体会到组合逻辑的微小改变如何导致序列表现出截然不同的行为模式，从而增强你的故障排查能力。[@problem_id:1966237]", "problem": "一个3位同步计数器由三个JK触发器构成。计数器的状态由输出 $Q_2Q_1Q_0$ 表示，其中 $Q_2$ 是最高有效位（MSB），$Q_0$ 是最低有效位（LSB）。该计数器被设计为一个标准的二进制递增计数器，其正确的JK触发器输入逻辑为：\n$J_0 = 1, K_0 = 1$\n$J_1 = Q_0, K_1 = Q_0$\n$J_2 = Q_1Q_0, K_2 = Q_1Q_0$\n\n然而，由于一个接线错误，为最高有效位触发器（FF2）提供逻辑信号的与门（AND gate）的输入被错误地连接了。与门的输入没有连接到 $Q_1$ 和 $Q_0$，而是连接到了 $Q_1'$（中间触发器的反相输出）和 $Q_0$。因此，FF2的输入逻辑变为 $J_2=K_2=Q_1'Q_0$。FF1和FF0的逻辑保持原始设计。\n\n假设计数器从状态 $Q_2Q_1Q_0 = 000$ 开始，确定这个有故障的计数器将循环经历的状态序列（用十进制表示）。该序列从0开始，并在一个状态重复之前结束。\n\nA. 0, 1, 2, 3, 4, 5, 6, 7\n\nB. 0, 1, 6, 7, 4, 5, 2, 3\n\nC. 0, 7, 6, 5, 4, 3, 2, 1\n\nD. 0, 1, 3, 2, 6, 7, 5, 4\n\nE. 0, 1, 2, 4, 5, 6, 7, 3", "solution": "一个输入为 $J=K=T$ 的JK触发器作为一个由 $T$ 控制的翻转器，其下一状态关系为 $Q^{+} = Q \\oplus T$。对于给定的3位同步计数器，翻转信号为：\n- FF0：$T_{0}=1 \\implies Q_{0}^{+}=\\overline{Q_{0}}$。\n- FF1：$T_{1}=Q_{0} \\implies Q_{1}^{+}=Q_{1} \\oplus Q_{0}$。\n- FF2 (故障)：$T_{2}=\\overline{Q_{1}}\\,Q_{0} \\implies Q_{2}^{+}=Q_{2} \\oplus (\\overline{Q_{1}}\\,Q_{0})$。\n\n从 $Q_{2}Q_{1}Q_{0}=000$ 开始，计算同步的下一状态：\n1) $000 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=0\\oplus 0=0,\\ Q_{2}^{+}=0\\oplus(1\\cdot 0)=0 \\Rightarrow 001$ (十进制 1)。\n2) $001 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=0\\oplus 1=1,\\ Q_{2}^{+}=0\\oplus(1\\cdot 1)=1 \\Rightarrow 110$ (十进制 6)。\n3) $110 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=1\\oplus 0=1,\\ Q_{2}^{+}=1\\oplus(0\\cdot 0)=1 \\Rightarrow 111$ (十进制 7)。\n4) $111 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=1\\oplus 1=0,\\ Q_{2}^{+}=1\\oplus(0\\cdot 1)=1 \\Rightarrow 100$ (十进制 4)。\n5) $100 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=0\\oplus 0=0,\\ Q_{2}^{+}=1\\oplus(1\\cdot 0)=1 \\Rightarrow 101$ (十进制 5)。\n6) $101 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=0\\oplus 1=1,\\ Q_{2}^{+}=1\\oplus(1\\cdot 1)=0 \\Rightarrow 010$ (十进制 2)。\n7) $010 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=1\\oplus 0=1,\\ Q_{2}^{+}=0\\oplus(0\\cdot 0)=0 \\Rightarrow 011$ (十进制 3)。\n8) $011 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=1\\oplus 1=0,\\ Q_{2}^{+}=0\\oplus(0\\cdot 1)=0 \\Rightarrow 000$ (十进制 0)，返回到起始状态。\n\n因此，十进制序列为 $0, 1, 6, 7, 4, 5, 2, 3$，与选项B匹配。", "answer": "$$\\boxed{B}$$", "id": "1966237"}]}
{"hands_on_practices": [{"introduction": "我们从最基本的同步时序路径开始：一个寄存器通过一个组合逻辑块将自己的输出反馈回输入端。这个练习 [@problem_id:1946454] 建立了计算最小同步时钟周期的基础公式，该周期由时钟到Q输出的延迟、逻辑延迟和建立时间之和决定。掌握这项计算是理解任何同步电路性能极限的第一步。", "problem": "一个高速通信系统中的专用数据加扰模块是围绕一个同步反馈回路构建的。该回路由一个D型触发器（DFF）和一个组合逻辑块组成。DFF的输出连接到组合逻辑块的输入，而该逻辑块的输出则反馈回同一DFF的D输入端。整个电路由一个单一、理想的时钟信号驱动。\n\n各组件的时序特性如下：\n- DFF的时钟到Q端延迟为 $T_{cq} = 65 \\text{ ps}$。\n- 通过组合逻辑块的传播延迟为 $T_{comb} = 750 \\text{ ps}$。\n- DFF所需的建立时间为 $T_{su} = 85 \\text{ ps}$。\n- DFF所需的保持时间为 $T_{hold} = 40 \\text{ ps}$。\n\n假设保持时间约束得到满足，计算能确保电路可靠运行且不发生任何建立时间违例的最小可能时钟周期。以纳秒（ns）为单位表示您的最终答案，并四舍五入至三位有效数字。", "solution": "我们考虑一个单寄存器同步回路，其中从DFF输出端发出的数据必须在下一个有效时钟沿到来之前，传播通过组合逻辑并到达DFF输入端，以满足建立时间要求。在理想时钟且无偏斜或抖动的情况下，保证可靠运行的建立时间约束由以下公式给出：\n$$\nT_{clk,min} \\geq T_{cq} + T_{comb} + T_{su}\n$$\n代入给定的皮秒值：\n$$\nT_{clk,min} = 65\\,\\text{ps} + 750\\,\\text{ps} + 85\\,\\text{ps} = 900\\,\\text{ps}.\n$$\n转换为纳秒：\n$$\n900\\,\\text{ps} = 0.900\\,\\text{ns}.\n$$\n题目说明保持时间约束已满足，因此它不会对最小周期产生进一步的限制。因此，避免建立时间违例的最小可能时钟周期为 $0.900\\,\\text{ns}$，四舍五入至三位有效数字。", "answer": "$$\\boxed{0.900}$$", "id": "1946454"}, {"introduction": "现实世界中的电路很少是理想的；时钟信号到达时间的差异，即时钟偏斜（clock skew），会显著影响电路性能。这个实践问题 [@problem_id:1946392] 将时钟偏斜引入我们的时序分析，展示了它如何修正建立时间约束。你将学到“有益的”偏斜实际上可以提高最大工作频率，这是高性能设计中的一个关键概念。", "problem": "一位设计工程师正在分析一个用于高速信号处理的定制专用集成电路（ASIC）流水线级中的一条关键路径。该路径由一个源寄存器、一个组合逻辑块和一个目标寄存器组成，所有这些都由同一个系统时钟驱动。这些组件的时序参数已被表征如下：\n\n- 源寄存器中任意触发器的时钟到Q延迟（$T_{cq}$）为 250 ps。\n- 通过组合逻辑块的最大传播延迟（$T_{pd}$）为 180 ps。\n- 目标寄存器中触发器所需的建立时间（$T_{su}$）为 60 ps。\n\n由于芯片上的布线差异，两个寄存器之间存在时钟偏斜（$T_{skew}$）。时钟信号到达目标寄存器时钟输入的时间比到达源寄存器时钟输入的时间晚 20 ps。\n\n假设这些是唯一的时序约束，确定该流水线级的最大可能工作频率。将您的答案以千兆赫兹（GHz）为单位表示，并四舍五入到三位有效数字。", "solution": "对于一个包含源寄存器、组合逻辑和目标寄存器的同步流水线级，在存在时钟偏斜的情况下，跨越单个周期的建立时间约束是通过对齐数据到达时间和下一个捕获时钟沿来推导的。\n\n假设源端的启动时钟沿发生在时间零点。数据到达目标输入端的时间为：\n$$\nt_{\\text{arr}}=T_{cq}+T_{pd}.\n$$\n目标端的下一个捕获时钟沿到达时间为：\n$$\nt_{\\text{cap}}=T_{\\text{clk}}+T_{\\text{skew}},\n$$\n其中，如果目标时钟比源时钟晚到达，则 $T_{\\text{skew}}$ 为正值。建立时间约束要求：\n$$\nt_{\\text{arr}}+T_{su}\\leq t_{\\text{cap}},\n$$\n由此可得：\n$$\nT_{cq}+T_{pd}+T_{su}\\leq T_{\\text{clk}}+T_{\\text{skew}}.\n$$\n因此，允许的最小周期为：\n$$\nT_{\\text{clk,min}}=T_{cq}+T_{pd}+T_{su}-T_{\\text{skew}}.\n$$\n代入给定值（单位为皮秒）：\n$$\nT_{\\text{clk,min}}=250+180+60-20=470\\ \\text{ps}.\n$$\n最大工作频率是最小周期的倒数：\n$$\nf_{\\max}=\\frac{1}{T_{\\text{clk,min}}}=\\frac{1}{470\\times 10^{-12}\\ \\text{s}}=\\frac{1}{0.470\\ \\text{ns}}\\approx 2.12766\\ \\text{GHz}.\n$$\n四舍五入到三位有效数字：\n$$\nf_{\\max}=2.13\\ \\text{GHz}.\n$$", "answer": "$$\\boxed{2.13}$$", "id": "1946392"}, {"introduction": "组合逻辑的延迟并非总是一个固定的值，它可能根据输入数据而变化。这个进阶练习 [@problem_id:1946430] 要求你分析一个常见的数字电路元件——行波进位加法器的时序。通过确定最坏情况下的进位传播路径，你将计算出真正的最大组合逻辑延迟（$T_{comb,max}$），并学会如何在数据相关的电路中找到关键路径。", "problem": "一位工程师正在设计一个同步数字信号处理核心，该核心严重依赖一个16位流水线加法器。该加法器计算两个16位输入 `A` 和 `B` 的和 `S = A + B`。该流水线结构由保存 `A` 和 `B` 的输入寄存器、组合加法器逻辑以及捕获和 `S` 的输出寄存器组成。寄存器的时间参数为：时钟到Q延迟 $T_{cq} = 0.2$ ns，建立时间 $T_{su} = 0.3$ ns。\n\n该加法器本身是一个行波进位加法器，由16个全加器（FA）单元串联而成。通过加法器的延迟是数据相关的。对位于比特位置 `i` 的单个FA单元的详细分析提供了以下时序特性，其中所有时间都相对于组合逻辑评估周期的开始（即输入寄存器稳定后）：\n\n- 进入第一个FA单元的进位 `C_0` 的到达时间为 `t=0`，因为它接地。\n- 进位输出 `C_{i+1}` 的到达时间取决于输入 `A_i` 和 `B_i`：\n    1. 如果 `A_i = B_i`（即产生或终止进位），则进位输出 `C_{i+1}` 的确定与进位输入 `C_i` 无关。其值在 `0.5` ns 时稳定。\n    2. 如果 `A_i \\ne B_i`（即传播进位），则进位输出 `C_{i+1}` 取决于进位输入 `C_i`。其到达时间为 `T_{C_{i+1}} = T_{C_i} + 0.6` ns，其中 `T_{C_i}` 是 `C_i` 的到达时间。\n- 和位 `S_i` 的到达时间取决于进位输入 `C_i`。其到达时间为 `T_{S_i} = T_{C_i} + 1.0` ns。\n\n为确保在所有条件下都能正确操作，电路的时钟频率必须能够适应最长的可能组合逻辑延迟。对于任何可能的16位输入操作数对，保证该加法器不出现时序违规的绝对最大时钟频率是多少？\n\n请以MHz为单位表示您的最终答案，并四舍五入到三位有效数字。", "solution": "对于一个由输入寄存器、组合逻辑和输出寄存器组成的同步流水线级，时钟周期必须满足\n$$\nT_{\\text{clk}} \\ge T_{cq} + T_{\\text{comb,max}} + T_{su}.\n$$\n在这里，组合逻辑是一个16位行波进位加法器。为加法器给出的时间是相对于组合评估的开始（即在输入寄存器稳定之后），因此寄存器到寄存器的时间必须将寄存器延迟加到加法器的最坏情况内部延迟上。\n\n每个全加器单元的进位时序为：\n- 如果 $A_{i} = B_{i}$，则 $C_{i+1}$ 与 $C_{i}$ 无关，并在 $0.5$ ns 到达。\n- 如果 $A_{i} \\ne B_{i}$，则 $C_{i+1}$ 从 $C_{i}$ 传播，满足\n$$\nT_{C_{i+1}} = T_{C_{i}} + 0.6 \\text{ ns}.\n$$\n此外，和的时序为\n$$\nT_{S_{i}} = T_{C_{i}} + 1.0 \\text{ ns}.\n$$\n当 $C_{0}$ 在时间 $0$ 固定时，最晚到达的和位发生在进位在到达该位之前传播了最大数量的级数时。对于位 $i$，最坏的情况是所有较低的位 $0$ 到 $i-1$ 都处于传播模式，从而得到\n$$\nT_{C_{i}} = i \\times 0.6 \\text{ ns}.\n$$\n因此，最坏情况下的和到达时间是在最高有效位 $i=15$ 处：\n$$\nT_{S_{15}} = T_{C_{15}} + 1.0 = 15 \\times 0.6 + 1.0 = 9.0 + 1.0 = 10.0 \\text{ ns}.\n$$\n因此，最大组合延迟为 $T_{\\text{comb,max}} = 10.0$ ns。包括寄存器延迟，\n$$\nT_{\\text{clk,min}} = T_{cq} + T_{\\text{comb,max}} + T_{su} = 0.2 + 10.0 + 0.3 = 10.5 \\text{ ns}.\n$$\n因此，最大时钟频率为\n$$\nf_{\\max} = \\frac{1}{T_{\\text{clk,min}}} = \\frac{1}{10.5 \\times 10^{-9}} \\text{ Hz} = \\frac{10^{9}}{10.5} \\text{ Hz} = \\frac{10^{3}}{10.5} \\text{ MHz} \\approx 95.238 \\text{ MHz}.\n$$\n四舍五入到三位有效数字，结果是 $95.2$ MHz。", "answer": "$$\\boxed{95.2}$$", "id": "1946430"}]}
{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。对于一个给定的布尔函数，通常存在多种电路实现方式。尽管这些电路在逻辑功能上是等效的，但它们的时序性能（即速度）可能存在巨大差异。本练习 [@problem_id:1925797] 将通过分析实现同一逻辑功能的两个不同电路，来帮助你理解电路结构对关键路径延迟的直接影响，并掌握基本的静态时序分析方法。", "problem": "一位数字逻辑设计师的任务是实现布尔函数 $F(A, B, C) = A'B + AC$。现有两种不同的门级电路设计方案。你的任务是确定哪个电路的关键路径延迟更短，假设所有主输入（A、B 和 C）在时间 $t=0$ 时均可用。\n\n可用门电路的传播延迟如下：\n- 非门：15 ps\n- 两输入与门：25 ps\n- 两输入或门：30 ps\n- 三输入或门：40 ps\n\n两种电路设计的内部连接描述如下：\n\n**电路 1：**\n- 一个反相器接收输入 A 以生成信号 S1。\n- 一个两输入与门 (G1) 接收信号 S1 和输入 B 以生成信号 S2。\n- 一个两输入与门 (G2) 接收输入 A 和 C 以生成信号 S3。\n- 一个两输入或门接收信号 S2 和 S3 以产生最终输出 F。\n\n**电路 2：**\n- 一个反相器接收输入 A 以生成信号 T1。\n- 一个反相器接收输入 B 以生成信号 T2。\n- 一个反相器接收输入 C 以生成信号 T3。\n- 一个两输入与门 (G3) 接收输入 A 和信号 T3 以生成信号 T4。\n- 一个两输入与门 (G4) 接收信号 T1 和 T2 以生成信号 T5。\n- 一个两输入与门 (G5) 接收信号 T2 和 T3 以生成信号 T6。\n- 一个三输入或门接收信号 T4、T5 和 T6 以生成信号 T7。\n- 一个反相器接收信号 T7 以产生最终输出 F。\n\n下列哪个陈述是正确的？\n\nA. 电路 1 的关键路径延迟更短。\n\nB. 电路 2 的关键路径延迟更短。\n\nC. 两个电路的关键路径延迟相同。\n\nD. 根据给定的传播延迟无法确定关系。", "solution": "我们根据门电路的输出到达时间等于其输入到达时间的最大值加上该门电路的传播延迟这一原理来确定关键路径延迟。对于任何门电路，用符号表示为：\n$$\nt_{\\text{out}}=\\max_{i}\\{t_{\\text{in},i}\\}+d_{\\text{gate}}.\n$$\n所有主输入的到达时间为 $t=0$。\n\n电路 1：\n- A 上的反相器：$t(S1)=0+15=15$。\n- 作用于 $S1$ 和 $B$ 的与门 $G1$：输入的到达时间分别为 $15$ 和 $0$，所以 $t(S2)=\\max\\{15,0\\}+25=40$。\n- 作用于 $A$ 和 $C$ 的与门 $G2$：输入的到达时间分别为 $0$ 和 $0$，所以 $t(S3)=\\max\\{0,0\\}+25=25$。\n- 作用于 $S2$ 和 $S3$ 的或门（两输入）：输入的到达时间分别为 $40$ 和 $25$，所以 $t(F)=\\max\\{40,25\\}+30=70$。\n因此，电路 1 的关键路径延迟为 $70$ ps。\n\n电路 2：\n- 反相器：$t(T1)=15$，$t(T2)=15$，$t(T3)=15$。\n- 作用于 $A$ 和 $T3$ 的与门 $G3$：输入的到达时间分别为 $0$ 和 $15$，所以 $t(T4)=\\max\\{0,15\\}+25=40$。\n- 作用于 $T1$ 和 $T2$ 的与门 $G4$：输入的到达时间分别为 $15$ 和 $15$，所以 $t(T5)=\\max\\{15,15\\}+25=40$。\n- 作用于 $T2$ 和 $T3$ 的与门 $G5$：输入的到达时间分别为 $15$ 和 $15$，所以 $t(T6)=\\max\\{15,15\\}+25=40$。\n- 作用于 $T4$、$T5$、$T6$ 的或门（三输入）：所有输入的到达时间均为 $40$，所以 $t(T7)=\\max\\{40,40,40\\}+40=80$。\n- 产生 $F$ 的反相器：$t(F)=80+15=95$。\n因此，电路 2 的关键路径延迟为 $95$ ps。\n\n比较：$70  95$，所以电路 1 的关键路径延迟更短。因此，陈述 A 是正确的。", "answer": "$$\\boxed{A}$$", "id": "1925797"}, {"introduction": "在初步分析中，我们常假设门延迟是固定值，但这在现实世界中是一种简化。实际上，一个逻辑门的延迟会受到其负载的影响，也就是它需要驱动的后续逻辑门输入的数量（称为扇出）。本练习 [@problem_id:1925776] 引入了一个更贴近实际的延迟模型，其中传播延迟是扇出的函数，这将促使你更深入地分析电路拓扑结构以准确评估其性能。", "problem": "考虑一个由一组基本逻辑门构成的组合数字逻辑电路。该电路有四个主输入（标记为A、B、C和D）和一个主输出（标记为Z）。假设所有主输入在时间 $t=0$ 时均可用。电路内部的互连和逻辑门描述如下：\n\n*   **G1**：一个非门，其输入为主输入A。\n*   **G2**：一个双输入与门，其输入为主输入B和C。\n*   **G3**：一个双输入或门，其输入为主输入C和D。\n*   **G4**：一个双输入与门，其输入连接到门G1和门G2的输出。\n*   **G5**：一个双输入或门，其输入连接到门G2和门G3的输出。\n*   **G6**：一个双输入与门，其输入连接到门G4和门G5的输出。该门的输出即为主输出Z。\n\n电路中每个门的传播延迟 $t_{pd}$ 取决于其扇出。扇出定义为一个门的输出所驱动的后续门输入的数量。该延迟使用以下公式计算：\n$$t_{pd} = t_{base} + k \\times (\\text{fan-out})$$\n\n每种门类型的基本延迟 ($t_{base}$) 和负载相关因子 ($k$) 如下：\n*   非门的基本延迟，$t_{base,NOT} = 0.5$ ns\n*   与门的基本延迟，$t_{base,AND} = 0.8$ ns\n*   或门的基本延迟，$t_{base,OR} = 1.0$ ns\n*   负载相关延迟因子，$k = 0.2$ ns/扇出单元\n\n连接到主输出Z被视为零负载，意味着它对门G6的扇出没有贡献。\n\n计算该电路的关键路径延迟。以纳秒（ns）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "我们要求解从主输入到主输出的关键路径延迟。每个门的传播延迟都与负载相关：\n$$t_{pd} = t_{base} + k \\times (\\text{fan-out}),$$\n一个门的输出在其最晚到达的输入信号到达后，再加上自身的传播延迟才变为有效：\n$$t_{\\text{out}} = \\max_{i}(t_{\\text{in},i}) + t_{pd}.$$\n\n首先，根据描述的互连确定每个门的扇出：\n- G1仅驱动G4，因此G1的扇出为$1$。\n- G2驱动G4和G5，因此G2的扇出为$2$。\n- G3仅驱动G5，因此G3的扇出为$1$。\n- G4仅驱动G6，因此G4的扇出为$1$。\n- G5仅驱动G6，因此G5的扇出为$1$。\n- G6仅驱动主输出Z，该输出为零负载，因此G6的扇出为$0$。\n\n使用 $t_{base,NOT}=0.5$ ns，$t_{base,AND}=0.8$ ns，$t_{base,OR}=1.0$ ns 以及 $k=0.2$ ns/扇出单元，计算每个门的传播延迟：\n$$t_{pd}(G1)=0.5+0.2\\times 1=0.7\\ \\text{ns},$$\n$$t_{pd}(G2)=0.8+0.2\\times 2=1.2\\ \\text{ns},$$\n$$t_{pd}(G3)=1.0+0.2\\times 1=1.2\\ \\text{ns},$$\n$$t_{pd}(G4)=0.8+0.2\\times 1=1.0\\ \\text{ns},$$\n$$t_{pd}(G5)=1.0+0.2\\times 1=1.2\\ \\text{ns},$$\n$$t_{pd}(G6)=0.8+0.2\\times 0=0.8\\ \\text{ns}.$$\n\n所有主输入在 $t=0$ 时均可用，因此输出到达时间为：\n- G1输出：$t(G1)=0+0.7=0.7$ ns。\n- G2输出：$t(G2)=\\max(0,0)+1.2=1.2$ ns。\n- G3输出：$t(G3)=\\max(0,0)+1.2=1.2$ ns。\n- G4输出：输入为在$0.7$ ns到达的G1和在$1.2$ ns到达的G2，因此\n$$t(G4)=\\max(0.7,1.2)+1.0=2.2\\ \\text{ns}.$$\n- G5输出：输入为在$1.2$ ns到达的G2和在$1.2$ ns到达的G3，因此\n$$t(G5)=\\max(1.2,1.2)+1.2=2.4\\ \\text{ns}.$$\n- Z（G6的输出）：输入为在$2.2$ ns到达的G4和在$2.4$ ns到达的G5，因此\n$$t(Z)=\\max(2.2,2.4)+0.8=3.2\\ \\text{ns}.$$\n\n因此，关键路径延迟为$3.2$ ns。最长路径为 G2-G5-G6 或 G3-G5-G6；两者都得出$3.2$ ns的延迟。四舍五入到三位有效数字，关键路径延迟为$3.20$ ns。", "answer": "$$\\boxed{3.20}$$", "id": "1925776"}, {"introduction": "关键路径并非一成不变的静态属性。在实际设计中，由于制造工艺偏差或工作条件变化，单个逻辑门的延迟可能会发生改变，这可能导致电路的瓶颈从一条路径转移到另一条。本练习 [@problem_id:1925801] 模拟了这样一个场景，通过改变一个门的延迟，你将观察到关键路径是如何动态变化的，从而深刻理解全面时序分析对于确保电路稳健性的重要性。", "problem": "考虑一个由若干逻辑门构成的组合逻辑电路。该电路有四个主输入，标记为 `I1`、`I2`、`I3` 和 `I4`，以及一个最终输出 `Z`。这些逻辑门的互连方式如下：\n-   门 `G1` 是一个双输入与门，其输入为 `I1` 和 `I2`。\n-   门 `G2` 是一个双输入或门，其输入为 `I3` 和 `I4`。\n-   门 `G3` 是一个非门，其输入为 `I3`。\n-   门 `G4` 是一个三输入与非门。其输入连接到门 `G1`、`G2` 和 `G3` 的输出。\n-   门 `G5` 是一个双输入异或门。其输入连接到门 `G1` 和 `G2` 的输出。\n-   门 `G6` 是一个双输入与门。其输入连接到门 `G4` 和 `G5` 的输出。该门的输出是电路的最终输出 `Z`。\n\n假设所有主输入（`I1`、`I2`、`I3`、`I4`）在时间 $t=0$ 时可用且稳定。每种类型逻辑门的传播延迟如下：\n-   非门：8 皮秒 (ps)\n-   双输入与门：15 ps\n-   双输入或门：17 ps\n-   三输入与非门：22 ps\n-   双输入异或门：28 ps\n\n首先，确定电路的初始关键路径延迟 $T_{crit, initial}$。然后，假设一个制造缺陷导致双输入异或门（`G5`）的传播延迟加倍，而所有其他门的延迟保持不变。计算修改后电路的新关键路径延迟 $T_{crit, new}$。\n\n请将您的答案表示为一个数值对 $[T_{crit, initial}, T_{crit, new}]$，其中两个值均以皮秒 (ps) 为单位。", "solution": "我们通过计算每个门输出的到达时间来确定关键路径延迟，其原理是一个门的输出只有在其最晚到达的输入加上该门的传播延迟之后才能稳定。设主输入在零时刻可用，因此 $A_{I1}=A_{I2}=A_{I3}=A_{I4}=0$。设门延迟为 $d_{\\text{NOT}}=8$、$d_{\\text{AND2}}=15$、$d_{\\text{OR2}}=17$、$d_{\\text{NAND3}}=22$ 和 $d_{\\text{XOR2}}=28$，单位均为皮秒。\n\n计算初始电路的到达时间：\n$$A_{G1}=\\max(A_{I1},A_{I2})+d_{\\text{AND2}}=\\max(0,0)+15=15,$$\n$$A_{G2}=\\max(A_{I3},A_{I4})+d_{\\text{OR2}}=\\max(0,0)+17=17,$$\n$$A_{G3}=A_{I3}+d_{\\text{NOT}}=0+8=8,$$\n$$A_{G4}=\\max(A_{G1},A_{G2},A_{G3})+d_{\\text{NAND3}}=\\max(15,17,8)+22=39,$$\n$$A_{G5}=\\max(A_{G1},A_{G2})+d_{\\text{XOR2}}=\\max(15,17)+28=45,$$\n$$A_{G6}=\\max(A_{G4},A_{G5})+d_{\\text{AND2}}=\\max(39,45)+15=60.$$\n因此，$T_{\\text{crit, initial}}=60$。\n\n当异或门的延迟加倍时，$d'_{\\text{XOR2}}=2\\,d_{\\text{XOR2}}=56$，所有其他延迟不变。重新计算受影响节点的到达时间：\n$$A'_{G5}=\\max(15,17)+56=73,$$\n$$A'_{G6}=\\max(39,73)+15=88.$$\n因此，$T_{\\text{crit, new}}=88$。", "answer": "$$\\boxed{\\begin{pmatrix}60  88\\end{pmatrix}}$$", "id": "1925801"}]}
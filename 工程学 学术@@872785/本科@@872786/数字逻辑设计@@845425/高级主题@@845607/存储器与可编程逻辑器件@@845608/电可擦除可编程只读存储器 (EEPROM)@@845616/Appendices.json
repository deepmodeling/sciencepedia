{"hands_on_practices": [{"introduction": "要与存储设备进行交互，首要任务是能够精确定位其中的每一个数据存储单元。这个基础练习将引导你探索存储器容量与其所需地址线数量之间的根本关系。掌握这一计算是设计任何存储器接口的第一步，它构成了处理器与存储芯片之间通信的基础 [@problem_id:1932063]。", "problem": "一位数字系统工程师的任务是将一个非易失性存储模块集成到一个新的嵌入式系统中。所选的组件是一个电可擦除可编程只读存储器（EEPROM）芯片，其存储组织结构为 4K x 8。这个标记表明该存储阵列包含 4K 个独立的存储位置，称为“字”，每个字能够存储 8 比特的数据。在数字存储系统的寻址中，前缀 'K' 代表乘数 $1024$。为了使处理器能够读取或写入某个特定的字，它必须向 EEPROM 的地址输入引脚提供一个唯一的二进制地址。确定地址总线必须具备的最少地址线数量，以便能够唯一地指定该 EEPROM 芯片内每一个不同的字位置。", "solution": "存储器的组织结构为 $4\\text{K} \\times 8$，这意味着有 $N$ 个不同的字位置，其中\n$$\nN = 4 \\times \\text{K} = 4 \\times 1024\n$$\n使用定义 $\\text{K} = 1024 = 2^{10}$，这变为\n$$\nN = 4 \\times 2^{10} = 2^{2} \\times 2^{10} = 2^{12}\n$$\n在二进制寻址的存储器中，$n$ 条地址线可以唯一选择 $2^{n}$ 个位置。所需的最小 $n$ 满足\n$$\n2^{n} \\geq N \\quad \\Longrightarrow \\quad n \\geq \\log_{2}(N)\n$$\n因此，地址线的最小数量是\n$$\nn_{\\min} = \\lceil \\log_{2}(N) \\rceil = \\lceil \\log_{2}(2^{12}) \\rceil = 12\n$$\n$4\\text{K} \\times 8$ 中的 $8$ 指的是每个字的数据宽度，它不影响地址线的数量。", "answer": "$$\\boxed{12}$$", "id": "1932063"}, {"introduction": "在了解了如何为存储单元寻址之后，我们必须进一步掌握执行读写操作所需的控制信号时序。时序图是理解和调试数字系统动态行为的关键工具。本练习通过分析一个简化的写入周期时序图，帮助你识别出有效写入操作发生的精确时间窗口，这是确保数据能被正确写入存储器的核心技能 [@problem_id:1932062]。", "problem": "一位工程师正在分析一个并行电可擦除可编程只读存储器（EEPROM）芯片的字节写入周期。在几个离散的时间点，记录了控制信号以及数据/地址总线的状态。相关信号包括片选（$\\overline{CE}$）、写使能（$\\overline{WE}$）、地址总线和数据总线。对于低电平有效信号$\\overline{CE}$或$\\overline{WE}$，“低”电平状态表示信号被置为有效。总线状态在驱动特定值时描述为“有效”，在不驱动时描述为“高阻态”（High-Z）。\n\n假设地址和数据总线的所有建立时间和保持时间要求都由所提供的时间序满足，那么对存储器阵列的写入操作会根据控制信号的状态被锁存。事件序列如下，时间 $t$ 以纳秒（ns）为单位：\n\n-   在 $t = 0$ ns 时，$\\overline{CE}$ 为高电平，$\\overline{WE}$ 为高电平，地址总线为高阻态，数据总线为高阻态。\n-   在 $t = 15$ ns 时，地址总线变为有效。\n-   在 $t = 25$ ns 时，$\\overline{CE}$ 转换为低电平。\n-   在 $t = 35$ ns 时，数据总线变为有效。\n-   在 $t = 50$ ns 时，$\\overline{WE}$ 转换为低电平。\n-   在 $t = 110$ ns 时，$\\overline{WE}$ 转换为高电平。\n-   在 $t = 120$ ns 时，$\\overline{CE}$ 转换为高电平。\n-   在 $t = 130$ ns 时，地址总线转换为高阻态。\n-   在 $t = 140$ ns 时，数据总线转换为高阻态。\n\n有效写入操作定义为芯片被选中且写入命令被同时置为有效的时期。请确定此有效写入周期的开始时间和结束时间。您的答案应包含两个整数值，分别代表开始时间和结束时间。答案请以纳秒（ns）为单位表示。", "solution": "一个有效的写入周期要求芯片被选中并且写入命令同时被置为有效。对于低电平有效的控制信号，有效状态对应于低电平。\n\n根据时间线：\n- $\\overline{CE}$ 在 $t=25$ 时变为低电平，在 $t=120$ 时返回高电平，因此芯片在 $t \\in [25,120)$ 时间段内被选中。\n- $\\overline{WE}$ 在 $t=50$ 时变为低电平，在 $t=110$ 时返回高电平，因此写入命令在 $t \\in [50,110)$ 时间段内被置为有效。\n\n有效写入周期是这两个区间的交集：\n$$[25,120) \\cap [50,110) = [50,110)$$\n\n因此，有效写入从 $t=50$ 开始，到 $t=110$ 结束。", "answer": "$$\\boxed{\\begin{pmatrix}50  110\\end{pmatrix}}$$", "id": "1932062"}, {"introduction": "现代非易失性存储器（如 EEPROM 和闪存）虽然功能强大，但其物理存储单元的擦写寿命有限。因此，仅仅理解单次读写操作是不够的，我们还必须考虑如何进行长期、可靠的管理。这个高级实践将视角从单次操作提升到系统层面，探讨了控制器为延长存储器寿命和保证数据完整性所采用的关键技术，例如磨损均衡和逻辑到物理地址的映射 [@problem_id:1932023]。", "problem": "一个存储控制器正在被设计用于一个基于电可擦可编程只读存储器 (EEPROM) 阵列的高可靠性存储系统。该控制器必须实现两个关键功能：一个预测性磨损均衡方案和使用单比特纠错、双比特检错 (SECDED) 码的数据完整性校验。\n\n该系统的规格如下：\n*   用户可用的逻辑地址空间为 4 Mebibytes (MiB)，其中 1 MiB = $2^{20}$ 字节。\n*   EEPROM 阵列的物理容量比逻辑地址空间大 25%，以支持磨损均衡（这被称为冗余配置）。\n*   逻辑和物理内存都以 4 Kibibytes (KiB) 的块为单位进行组织，其中 1 KiB = $2^{10}$ 字节。数据以这些块为单位进行写入和擦除。\n*   每个物理块的 EEPROM 单元具有 100,000 次写入/擦除周期的耐久性。\n*   为保证数据完整性，控制器对数据应用 SECDED 码。该码对块内存储的每个 64 位数据字进行计算。生成的校验位与数据字一起存储在 EEPROM 中。\n\n为了管理磨损均衡，控制器使用动态地址重映射。这需要两个数据结构，它们被维护在控制器内部集成的专用高速静态随机存取存储器 (SRAM) 中：\n1.  一个逻辑到物理 (L2P) 映射表：该表将用户视角的每个逻辑块地址转换为 EEPROM 阵列中的物理块地址。\n2.  一个写入次数跟踪器：该结构为每个物理块存储一个整数计数器，用于跟踪其被写入的次数。\n\n假设控制器使用实现这两个磨损均衡数据结构所需的最少 SRAM，计算此专用 SRAM 的总大小。请以比特为单位表示您的答案。", "solution": "问题要求计算用于存储磨损均衡元数据的专用静态随机存取存储器 (SRAM) 的最小总大小。该元数据由两部分组成：逻辑到物理 (L2P) 映射表和写入次数跟踪器。我们将分别计算每个部分所需的大小，然后将它们相加。\n\n首先，让我们确定系统中的逻辑块和物理块的数量。给定的总逻辑地址空间为 $S_{log} = 4 \\text{ MiB}$，块大小为 $S_{block} = 4 \\text{ KiB}$。我们使用提供的定义（1 MiB = $2^{20}$ 字节，1 KiB = $2^{10}$ 字节）将它们转换为字节。\n逻辑块的数量 $L$ 是总逻辑大小与块大小的比值：\n$$L = \\frac{S_{log}}{S_{block}} = \\frac{4 \\times 2^{20} \\text{ 字节}}{4 \\times 2^{10} \\text{ 字节}} = 2^{10} = 1024$$\n因此，有 1024 个逻辑块。\n\n物理容量比逻辑容量大 25%。因此，物理块的数量 $P$ 比逻辑块的数量大 25%：\n$$P = L \\times (1 + 0.25) = 1024 \\times 1.25 = 1280$$\n因此，EEPROM 阵列中有 1280 个物理块。\n\n接下来，我们计算 L2P 映射表的大小。该表需要为每个逻辑块提供一个条目，以存储其对应的物理块地址。\n*   表中的条目数 = 逻辑块数 = $L = 1024$。\n*   每个条目必须存储一个指向 1280 个物理块之一的指针。唯一寻址 $P$ 个项目所需的比特数是 $\\lceil \\log_{2}(P) \\rceil$。\n*   每个条目的大小 = $\\lceil \\log_{2}(1280) \\rceil$。\n由于 $2^{10} = 1024$ 且 $2^{11} = 2048$，我们需要 11 个比特来寻址 1280 个物理块中的任意一个。\n*   每个条目的大小 = 11 比特。\nL2P 映射表的总大小 $M_{L2P}$ 是条目数与每个条目大小的乘积：\n$$M_{L2P} = 1024 \\times 11 \\text{ 比特} = 11264 \\text{ 比特}$$\n\n现在，我们计算写入次数跟踪器的大小。该结构必须为每个物理块维护一个计数器。\n*   计数器数量 = 物理块数量 = $P = 1280$。\n*   每个计数器必须能够计数到 EEPROM 的最大耐久性，即 $W_{max} = 100,000$ 个周期。存储计数 $W_{max}$ 所需的比特数是 $\\lceil \\log_{2}(W_{max} + 1) \\rceil$，或者如果我们从 0 计数到 $W_{max}-1$，更简单地是 $\\lceil \\log_{2}(W_{max}) \\rceil$。对于大的 $W_{max}$，它们通常是相同的。我们使用 $\\lceil \\log_{2}(W_{max}) \\rceil$。\n*   每个计数器的大小 = $\\lceil \\log_{2}(100,000) \\rceil$。\n我们可以计算 $\\log_{2}(10^5) = 5 \\log_{2}(10) \\approx 5 \\times 3.3219 = 16.6096$。\n该值的上取整是 $\\lceil 16.6096 \\rceil = 17$。因此，每个计数器需要 17 个比特。\n*   每个计数器的大小 = 17 比特。\n写入次数跟踪器的总大小 $M_{WC}$ 是计数器数量与每个计数器大小的乘积：\n$$M_{WC} = 1280 \\times 17 \\text{ 比特} = 21760 \\text{ 比特}$$\n\n最后，专用 SRAM 的最小总大小 $M_{SRAM}$ 是这两个数据结构大小的总和。\n$$M_{SRAM} = M_{L2P} + M_{WC} = 11264 \\text{ 比特} + 21760 \\text{ 比特} = 33024 \\text{ 比特}$$\n\n请注意，关于单比特纠错、双比特检错 (SECDED) 码和 64 位字长的信息对于此计算不是必需的。SECDED 校验位与它们所保护的数据一起存储在主 EEPROM 阵列中，而不是存储在用于磨损均衡管理的专用 SRAM 中。此信息描述了控制器功能的一部分，但不会影响映射和跟踪结构的大小。", "answer": "$$\\boxed{33024}$$", "id": "1932023"}]}
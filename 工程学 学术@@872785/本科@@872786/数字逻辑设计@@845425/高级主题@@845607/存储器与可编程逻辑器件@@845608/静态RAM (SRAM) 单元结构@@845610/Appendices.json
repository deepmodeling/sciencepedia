{"hands_on_practices": [{"introduction": "本节的第一个练习将探讨SRAM单元如何保持其数据的基本原理。通过分析一个上拉晶体管失效的假设性故障，我们可以更深入地了解构成存储单元核心的交叉耦合反相器结构。这个思想实验有助于我们巩固对静态存储单元双稳态特性的理解 ([@problem_id:1963488])。", "problem": "一个标准的六晶体管（6T）静态随机存取存储器（SRAM）单元由两个交叉耦合的互补金属氧化物半导体（CMOS）反相器和两个访问晶体管构成。设两个内部存储节点表示为 $Q$ 和 $\\bar{Q}$。驱动节点 $Q$ 的第一个反相器由一个 PMOS 上拉晶体管 $M_{P1}$ 和一个 NMOS 下拉晶体管 $M_{N1}$ 组成。该第一个反相器的输入连接到节点 $\\bar{Q}$。驱动节点 $\\bar{Q}$ 的第二个反相器由一个 PMOS 上拉晶体管 $M_{P2}$ 和一个 NMOS 下拉晶体管 $M_{N2}$ 组成。该第二个反相器的输入连接到节点 $Q$。当 PMOS 晶体管（$M_{P1}$、$M_{P2}$）激活时，它们将各自的输出节点连接到电源电压 $V_{DD}$，而当 NMOS 下拉晶体管（$M_{N1}$、$M_{N2}$）激活时，它们将各自的输出节点连接到地（GND）。两个由字线（WL）控制的 NMOS 访问晶体管用于读/写操作，但在本场景中处于非活动状态（WL 保持在低电压）。\n\n考虑一个故障情况，其中第一个反相器的上拉 PMOS 晶体管 $M_{P1}$ 永久性固定开路。这意味着无论其栅极电压如何，$M_{P1}$ 都永远不能导通电流。单元中的所有其他晶体管功能正常。当单元上电时，它最终会在没有任何外部写入操作的情况下稳定到一个单一、稳定的逻辑状态。下列哪个陈述准确地描述了这个故障 SRAM 单元的最终状态？\n\nA. 该单元将稳定地存储逻辑 '0'（$Q$ 为低电平且 $\\bar{Q}$ 为高电平的状态）。\n\nB. 该单元将稳定地存储逻辑 '1'（$Q$ 为高电平且 $\\bar{Q}$ 为低电平的状态）。\n\nC. 该单元的状态将是不确定的，因为节点 $Q$ 的电压将浮动到一个中间电平。\n\nD. 该单元将成为一个环形振荡器，$Q$ 和 $\\bar{Q}$ 处的电压会持续振荡。\n\nE. 该单元将同时存储逻辑 '0' 和 '1'，从而产生一条从 $V_{DD}$ 到 GND 的静态短路路径。", "solution": "设节点电压为 $V_{Q}$ 和 $V_{\\bar{Q}}$，电源电压为 $V_{DD}$，地电平为 $0$。由于字线为低电平，访问晶体管关闭，因此没有到数据线的导通。固定开路故障意味着 $M_{P1}$ 在所有偏置下提供的电流恒为零，即 $I_{P1} \\equiv 0$。导通条件为：\n- 对于 NMOS，如果 $V_{GS} \\ge V_{TN}$ 则导通。\n- 对于 PMOS，如果 $V_{SG} \\ge |V_{TP}|$ 则导通。\n\n直流稳态要求节点电压恒定，因此电容电流消失，并且每个节点的电压必须由至少一条与晶体管状态一致的导通路径来强制维持；在存在漏电的情况下，一个纯粹浮空的节点在稳态下无法维持在一个非平凡的值。\n\n考虑候选的稳态。\n\n情况 1：$V_{Q} \\approx 0$， $V_{\\bar{Q}} \\approx V_{DD}$。那么对于反相器 1：输入为 $V_{\\bar{Q}} \\approx V_{DD}$，因此 $V_{GS,N1} = V_{\\bar{Q}} \\approx V_{DD} \\ge V_{TN}$，所以 $M_{N1}$ 导通，并提供一条将 $Q$ 下拉至 $0$ 的导通路径。由于 $M_{P1}$ 固定开路，没有上拉路径，但这并非必要，因为 $M_{N1}$ 主动地将 $V_{Q}$ 强制维持在约 $0$。对于反相器 2：输入为 $V_{Q} \\approx 0$，因此 $V_{GS,N2} \\approx 0  V_{TN}$，所以 $M_{N2}$ 关闭，而 $V_{SG,P2} = V_{DD} - 0 = V_{DD} \\ge |V_{TP}|$，所以 $M_{P2}$ 导通并将 $\\bar{Q}$ 上拉至 $V_{DD}$。在单个反相器中，没有从 $V_{DD}$ 到地的路径，因为在反相器 1 中只有 NMOS 导通，在反相器 2 中只有 PMOS 导通。这是一个自洽、稳定的不动点。\n\n情况 2：$V_{Q} \\approx V_{DD}$， $V_{\\bar{Q}} \\approx 0$。对于反相器 2：当 $V_{Q} \\approx V_{DD}$ 时，$V_{GS,N2} \\approx V_{DD} \\ge V_{TN}$，所以 $M_{N2}$ 导通，$M_{P2}$ 关闭，$\\bar{Q}$ 被下拉至地，这与假设一致。对于反相器 1：当 $V_{\\bar{Q}} \\approx 0$ 时，$V_{GS,N1} \\approx 0  V_{TN}$，所以 $M_{N1}$ 关闭，而 $M_{P1}$ 固定开路，$I_{P1} \\equiv 0$。因此，节点 $Q$ 没有直流上拉路径也没有直流下拉路径；它是浮空的。直流稳态要求 $dV_{Q}/dt = 0$ 且节点电压由导通路径强制维持，这在这里是不可能的。任何导致 $V_{Q}$ 下降到低于 $M_{N2}$ 阈值的漏电流都将关闭 $M_{N2}$，之后 $M_{P2}$ 导通并将 $V_{\\bar{Q}}$ 驱动至 $V_{DD}$，接着这会使 $M_{N1}$ 导通并将 $V_{Q}$ 驱动至 $0$，最终收敛到情况 1。因此情况 2 不是一个稳定的吸引子。\n\n通过排除法，唯一的稳定状态是 $V_{Q} \\approx 0$，$V_{\\bar{Q}} \\approx V_{DD}$，即该单元在 $Q$ 处存储逻辑 '0'，在 $\\bar{Q}$ 处存储逻辑 '1'。这就排除了其他选项：状态不是不确定的（C），不是振荡的（D）（因为没有交替导通的有源环路增益来维持振荡），也不是静态短路（E）（因为在稳定状态下，每个反相器只有一个器件导通，没有直接的 $V_{DD}$ 到 GND 的路径）。\n\n因此，正确选项是 A。", "answer": "$$\\boxed{A}$$", "id": "1963488"}, {"introduction": "SRAM设计中的一个关键挑战是确保读取数据时不会意外地翻转存储的位。本练习将研究晶体管物理特性（特别是其阈值电压 $V_{th}$）的变化如何影响单元的读取稳定性 ([@problem_id:1963478])。通过这个练习，你将接触到“读取裕度”这一关键概念，并理解器件参数对电路性能的直接影响。", "problem": "一个标准的六晶体管（6T）静态随机存取存储器（SRAM）单元是许多高速存储系统的基本构建模块。它由两个交叉耦合的CMOS反相器和两个N沟道金属氧化物半导体（NMOS）访问晶体管组成。每个反相器由一个上拉P沟道金属氧化物半导体（PMOS）晶体管和一个下拉NMOS晶体管构成。只要供电，该单元就会保持其状态（逻辑'0'或'1'）。\n\n考虑这样一种情况：制造过程中的一个缺陷导致反相器内的下拉NMOS晶体管的阈值电压 $V_{th}$ 显著高于其预期的设计值。PMOS晶体管和NMOS访问晶体管不受影响。\n\n单元的“读稳定性”是指其在读操作期间保持所存数据的能力。读操作包括将两条位线预充电至高电源电压 $V_{DD}$，然后激活字线，从而开启访问晶体管。\n\n假设某个SRAM单元存储了逻辑'0'（意味着其内部存储节点之一处于0 V），这个特定的制造缺陷对该单元性能最直接和最显著的影响是什么？\n\nA. 该单元的读稳定性显著提高。\n\nB. 该单元在空闲（保持）状态下的静态功耗增加。\n\nC. 该单元的保持稳定性（在未被访问时保持数据的能力）下降。\n\nD. 该单元的读稳定性显著下降，使其在读取过程中更容易发生状态翻转。\n\nE. 向当前存储'0'的单元中写入逻辑'1'所需的时间增加。", "solution": "一个6T SRAM单元由两个交叉耦合的反相器和两个NMOS访问晶体管组成。考虑该单元在一个内部节点存储逻辑'0'，在读取期间将此节点电压表示为 $V_{x}$（初始值接近 $0$），而互补节点电压接近 $V_{DD}$。在读取期间，两条位线都被预充电至 $V_{DD}$，字线被置为 $V_{DD}$，从而开启连接到 $V_{x}$ 节点的NMOS访问晶体管。这会在以下两者之间产生竞争：\n- 试图将 $V_{x}$ 拉向 $V_{DD}$ 的访问NMOS，以及\n- 连接到 $V_{x}$ 节点、试图将 $V_{x}$ 拉向 $0$ 的反相器下拉NMOS。\n\n设访问NMOS的参数为 $k_{ax}$，阈值为 $V_{th,ax}$；下拉NMOS的参数为 $k_{pd}$，阈值为 $V_{th,pd}$。当位线电压为 $V_{DD}$ 且字线电压为 $V_{DD}$ 时，访问NMOS工作在饱和区，其电流为\n$$\nI_{ax}(V_{x})=\\frac{1}{2}k_{ax}\\left(V_{DD}-V_{x}-V_{th,ax}\\right)^{2}.\n$$\n下拉NMOS（栅极为 $V_{DD}$，源极为地，漏极为 $V_{x}$）在典型的读干扰电压下工作在线性区，其电流为\n$$\nI_{pd}(V_{x},V_{th,pd})=k_{pd}\\left[\\left(V_{DD}-V_{th,pd}\\right)V_{x}-\\frac{V_{x}^{2}}{2}\\right].\n$$\n在读取存储的'0'时，受干扰节点 $V_{x}$ 的电压由电流平衡决定\n$$\nI_{ax}(V_{x})=I_{pd}(V_{x},V_{th,pd}).\n$$\n定义 $F(V_{x},V_{th,pd}) \\equiv I_{ax}(V_{x})-I_{pd}(V_{x},V_{th,pd})=0$。为了确定当 $V_{th,pd}$ 增加时 $V_{x}$ 如何变化，我们进行隐式微分：\n$$\n\\frac{\\partial F}{\\partial V_{x}}\\,dV_{x}+\\frac{\\partial F}{\\partial V_{th,pd}}\\,dV_{th,pd}=0\n\\quad\\Rightarrow\\quad\n\\frac{dV_{x}}{dV_{th,pd}}=-\\frac{\\frac{\\partial F}{\\partial V_{th,pd}}}{\\frac{\\partial F}{\\partial V_{x}}}.\n$$\n计算偏导数：\n$$\n\\frac{\\partial F}{\\partial V_{th,pd}}=-\\frac{\\partial I_{pd}}{\\partial V_{th,pd}}=k_{pd}V_{x}0,\n$$\n$$\n\\frac{\\partial I_{ax}}{\\partial V_{x}}=-k_{ax}\\left(V_{DD}-V_{x}-V_{th,ax}\\right),\\quad\n\\frac{\\partial I_{pd}}{\\partial V_{x}}=k_{pd}\\left(V_{DD}-V_{th,pd}-V_{x}\\right),\n$$\n因此\n$$\n\\frac{\\partial F}{\\partial V_{x}}=\\frac{\\partial I_{ax}}{\\partial V_{x}}-\\frac{\\partial I_{pd}}{\\partial V_{x}}\n=-k_{ax}\\left(V_{DD}-V_{x}-V_{th,ax}\\right)-k_{pd}\\left(V_{DD}-V_{th,pd}-V_{x}\\right)  0.\n$$\n因此，\n$$\n\\frac{dV_{x}}{dV_{th,pd}}=-\\frac{k_{pd}V_{x}}{\\frac{\\partial F}{\\partial V_{x}}}0.\n$$\n$V_{th,pd}$ 的增加必然会导致在读取存储的'0'时，受干扰节点电压 $V_{x}$ 增加。如果 $V_{x}$ 超过了对侧反相器的开关阈值，单元就会翻转。因此，提高 $V_{th,pd}$ 会削弱下拉器件，减小有效单元比 $\\frac{\\beta_{pd}}{\\beta_{ax}}$，增加读干扰下的 $V_{x}$ 值，并使单元更容易发生读翻转。这是当下拉晶体管被削弱时，6T SRAM中读稳定性的典型退化情况。\n\n其他选项与这些机制不符：保持状态下的静态功耗不会增加（访问晶体管关闭，且较高的 $V_{th,pd}$ 会减少漏电流），保持稳定性不是此缺陷的主要受害者，而将'1'写入'0'节点实际上因为下拉能力变弱而更容易，而不是变慢。\n\n因此，最直接和最显著的后果是读稳定性下降。", "answer": "$$\\boxed{D}$$", "id": "1963478"}, {"introduction": "除了简单的存储和非破坏性读取之外，我们还可以利用访问机制来有意地改变单元的状态。最后一个练习将挑战你像电路设计者一样思考，设计一个特定的时序序列来强制覆盖存储的数据 ([@problem_id:1963484])。这展示了对存储单元和位线之间相互作用的深刻理解。", "problem": "考虑一个标准的六晶体管（6T）静态随机存取存储器（SRAM）单元。该单元由两个交叉耦合的CMOS反相器组成一个双稳态锁存器，以及两个用于访问的n沟道金属氧化物半导体（nMOS）传输门晶体管。第一个反相器，其输出节点为Q，输入节点为QB，由一个p沟道MOS（pMOS）上拉晶体管（PU1）和一个nMOS下拉晶体管（PD1）构成。第二个反相器，其输出节点为QB，输入节点为Q，由一个pMOS上拉晶体管（PU2）和一个nMOS下拉晶体管（PD2）构成。对该单元的访问由连接到两个传输门晶体管栅极的字线（WL）控制。第一个传输门（PG1）将位线（BL）连接到内部节点Q，第二个传输门（PG2）将其互补的位线反（BLB）连接到内部节点QB。高电源电压为$V_{DD}$，低电源电压为地（GND）。\n\n在此单元中，逻辑'1'定义为节点Q处于$V_{DD}$且节点QB处于GND的状态。逻辑'0'定义为Q处于GND且QB处于$V_{DD}$的状态。该单元的设计使得nMOS传输门晶体管（PG1, PG2）比pMOS上拉晶体管（PU1, PU2）“更强”（即具有更低的导通电阻）。\n\n初始时，该单元存储逻辑'1'。您的任务是确定在WL、BL和BLB线上正确的操作序列，以执行一次“破坏性读出”。破坏性读出被定义为一种操作，其开始类似于标准的读周期，但被有意地操纵，以在操作结束时强制将单元翻转到逻辑'0'状态。\n\n以下哪个序列正确地实现了这种破坏性读出操作？\n\nA. 将BL设置为GND，BLB设置为$V_{DD}$。将WL置为有效（升至$V_{DD}$）。将WL置为无效（降至GND）。\n\nB. 将BL和BLB都预充电到$V_{DD}$。将WL置为有效。感测BL和BLB上的电压差。将WL置为无效。\n\nC. 将BL和BLB都预充电到$V_{DD}$。将WL置为有效。在WL保持有效期间，将BLB驱动至GND。将WL置为无效。\n\nD. 将BL和BLB都预充电到$V_{DD}$。将WL置为有效。在WL保持有效期间，将BL驱动至GND。将WL置为无效。\n\nE. 将BL和BLB都预充电到$V_{DD}$。将WL置为有效。将WL置为无效。在WL置为无效后，将BL驱动至GND。", "solution": "我们从6T SRAM单元初始存储逻辑‘1’开始，因此$Q=V_{DD}$且$QB=0$。当$WL=V_{DD}$时，两个访问晶体管PG1和PG2（nMOS）分别将BL连接到$Q$，将BLB连接到$QB$。上拉晶体管PU1和PU2是pMOS，下拉晶体管PD1和PD2是nMOS。“传输门比上拉晶体管强”这一条件，就导通电阻而言，意味着$R_{on,PG}R_{on,PU}$，或者就电流而言，在可比较的栅/漏偏置下，访问器件可以源出/灌入比pMOS上拉晶体管更大的电流。此外，一个nMOS传输晶体管能传输一个强的零和一个降级的(弱的)一。\n\n一次标准的读出操作开始时，将两条位线都预充电到$V_{DD}$，然后将WL置为有效，这样单元会通过其下拉晶体管和传输门，对连接到内部零节点的位线进行微弱放电，从而产生一个小的电压差，然后在内部节点电压越过反相器翻转点之前将WL置为无效。该序列对应于选项B，并且是非破坏性的。\n\n根据定义，一次破坏性读出必须像标准读出一样开始（将BL和BLB都预充电到$V_{DD}$，将WL置为有效），但随后在WL保持有效期间操纵位线，以强制锁存器从$Q=V_{DD}$，$QB=0$翻转到$Q=0$，$QB=V_{DD}$。\n\n为了从$Q=V_{DD}$开始翻转单元，我们必须将Q强制拉低到由PU1和PD1构成的反相器的开关阈值$V_{M1}$以下。象征性地，当$WL=V_{DD}$时，节点$Q$通过PG1连接到BL。如果在WL为高电平期间将BL主动驱动到GND，那么在准静态条件下，节点$Q$的节点方程为\n$$\nI_{PG1}(V_{G}=V_{DD},V_{S}=V_{BL}=0,V_{D}=V_{Q}) + I_{PU1}(V_{S}=V_{DD},V_{D}=V_{Q},V_{G}=V_{QB}) = 0,\n$$\n其中电流方向定义为流入节点$Q$。因为nMOS传输晶体管能传输一个强的零，并且$R_{on,PG1}R_{on,PU1}$，所以等效的分压会强烈地将$Q$拉向0，使得$V_{Q}$远低于$V_{M1}$。当$V_{Q}V_{M1}$时，交叉耦合反相器的作用导致QB上升：PD1关断，PU2导通，因此\n$$\nV_{Q} \\downarrow \\implies \\text{PU2 on, PD2 off} \\implies V_{QB} \\uparrow \\rightarrow V_{DD}.\n$$\n同时，随着$V_{QB}$的上升，PU1更彻底地关断，而PD1导通，从而加强了$Q$向下的转变。一旦锁存器越过其亚稳态点，它会再生式地稳定到新的稳定状态$Q=0$，$QB=V_{DD}$。在将WL置为无效后，该单元将保留这个翻转后的值。因此，在类似读出的预充电之后，在WL有效期间主动将BL驱动到GND，会产生一次写入‘0’的破坏性读出。\n\n现在我们根据这个机制来验证每个选项：\n\n- 选项 D：将BL和BLB都预充电到$V_{DD}$；将WL置为有效；在WL保持有效期间，将BL驱动至GND；将WL置为无效。这与上述推导相符：PG1将BL连接到$Q$，在WL为高电平期间将BL驱动到GND，由于$R_{on,PG1}R_{on,PU1}$，会将$Q$拉低到$V_{M1}$以下，从而将单元翻转到$Q=0$，$QB=V_{DD}$。这是一次对初始‘1’的破坏性读出。\n\n- 选项 C：预充电到$V_{DD}$；将WL置为有效；在WL保持有效期间，将BLB驱动至GND；将WL置为无效。这里PG2将BLB连接到$QB$，而$QB$已经为0。将BLB驱动到GND会加强$QB=0$的状态（nMOS能传输强的零），但不会拉低$Q$。锁存器保持在‘1’状态；没有发生破坏性翻转。\n\n- 选项 B：这是标准的非破坏性读出：两条线都预充电，将WL置为有效，感测微小的电压差，将WL置为无效。没有故意的强制操作，所以不会翻转。\n\n- 选项 A：在将WL置为有效之前就将BL驱动到GND并将BLB驱动到$V_{DD}$，这是一个直接的写‘0’操作，而不是一个“开始类似于标准的读周期”的操作（因为没有先进行对称预充电）。虽然这会翻转单元，但它不满足要求。\n\n- 选项 E：在将BL驱动到GND之前就将WL置为无效，会隔离内部节点；当PG1关闭时，改变BL不能影响$Q$，因此不会发生翻转。\n\n因此，唯一一个既像标准读出一样开始，又通过在WL有效期间操纵连接到初始高电平节点的位线来故意将单元强制翻转为逻辑‘0’的序列是选项D。", "answer": "$$\\boxed{D}$$", "id": "1963484"}]}
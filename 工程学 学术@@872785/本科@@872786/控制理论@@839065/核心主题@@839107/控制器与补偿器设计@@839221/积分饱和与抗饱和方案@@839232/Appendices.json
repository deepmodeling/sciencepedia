{"hands_on_practices": [{"introduction": "积分饱和虽然是一个常见问题，但并非在所有情况下都会导致系统性能严重下降。本练习旨在培养一种工程直觉：判断何时必须采用抗饱和策略，以及在何种工况下，即使没有专门的抗饱和措施，系统也能表现得足够好。通过分析不同的操作场景，我们可以更深刻地理解控制器性能与其工作环境之间的紧密联系。[@problem_id:1580948]", "problem": "考虑一个过程控制系统，该系统使用比例-积分（PI）控制器来调节一个物理量，例如化学反应器的温度。控制器的输出信号决定了执行器（如加热元件）所提供的功率。该执行器受到物理限制并表现出饱和现象；其输出不能低于最小值（例如0%功率）或高于最大值（例如100%功率）。该控制系统在实现时没有任何特定的抗饱和补偿方案。\n\n积分饱和（Integrator windup）是一种现象，当设定点发生较大变化时，可能导致控制器在执行器饱和期间，其积分项累积一个很大的值。这个累积的值可能导致大的超调和不良的性能。\n\n在下列哪种操作条件下，尽管没有抗饱和机制，该PI控制系统的性能最有可能被认为是足够的？\n\nA. 系统需要频繁地执行其设定点的大幅度、快速的阶跃变化，例如，从一个低的待机温度移动到一个高的操作温度。\n\nB. 系统任务是跟踪一个振幅大且振荡快的目标信号。\n\nC. 控制器的比例增益 $K_p$ 被设置得非常大以确保快速响应，而积分增益 $K_i$ 保持在标称值。\n\nD. 系统主要在调节模式下运行，其主要任务是在存在小的、不频繁的负载扰动的情况下，维持一个恒定的设定点。\n\nE. 执行器的饱和限制被配置得非常窄，并且接近控制器在稳态操作下的典型输出值。", "solution": "设设定点表示为 $r(t)$，过程输出表示为 $y(t)$，控制误差表示为 $e(t)=r(t)-y(t)$。饱和前的PI控制器输出为\n$$\nu_{c}(t)=K_{p}e(t)+K_{i}\\int_{0}^{t} e(\\tau)\\,d\\tau.\n$$\n执行器施加饱和后的控制信号\n$$\nu(t)=\\operatorname{sat}\\big(u_{c}(t)\\big),\n$$\n其饱和限制为 $u_{\\min}\\leq u(t)\\leq u_{\\max}$。在没有抗饱和措施的实现中，积分器根据下式演变\n$$\n\\frac{d}{dt}\\left(\\int_{0}^{t} e(\\tau)\\,d\\tau\\right)=e(t),\n$$\n无论 $u_{c}(t)$ 是否在 $[u_{\\min},u_{\\max}]$ 范围内。当 $u_{c}(t)$ 在一个不容忽视的时间段内超过饱和边界，而 $e(t)$ 保持非零符号时，就会发生积分饱和，导致积分项 $K_{i}\\int e$ 增长，并在误差变号后产生超调和缓慢的恢复。\n\n没有抗饱和措施时，要有足够的性能，要求控制器大部分时间在非饱和状态下运行，即，\n$$\nu_{\\min}\\leq K_{p}e(t)+K_{i}\\int_{0}^{t} e(\\tau)\\,d\\tau \\leq u_{\\max}\n$$\n对于几乎所有的 $t$ 都成立，这样积分项就能保持有界，并且在饱和期间不会累积。\n\n评估每个选项：\n\nA. 设定点的大幅度、快速的阶跃变化使得 $|e(t)|$ 初始值很大，因此 $|u_{c}(t)|$ 经常超出 $[u_{\\min},u_{\\max}]$ 的范围。在饱和期间，$\\int e$ 沿着误差的方向增长，产生饱和和超调。性能通常不足。\n\nB. 一个快速、大振幅的目标信号会反复驱动 $u_{c}(t)$ 超出饱和限制，在饱和期间反复累积积分作用，导致严重的饱和、失真和滞后。性能不足。\n\nC. 极大的 $K_{p}$ 使得即使对于很小的 $|e(t)|$，$u_{c}(t)$ 也会饱和。在饱和状态下，积分器继续对 $e(t)$ 进行积分，增加了饱和的可能性和严重性。性能不足。\n\nD. 在具有恒定设定点和小的、不频繁的负载扰动的调节操作中，$|e(t)|$ 通常很小，并且 $u_{c}(t)$ 在大部分时间内保持在 $[u_{\\min},u_{\\max}]$ 范围内。因此，积分器在饱和期间不会显著累积，因为饱和现象很少发生或持续时间很短，即使没有抗饱和措施也能产生可接受的性能。\n\nE. 靠近标称操作输出的狭窄饱和限制即使对于中等误差也会导致频繁饱和，增加了饱和风险并降低了性能。\n\n因此，最有可能在没有抗饱和措施的情况下产生足够性能的操作条件是具有小的、不频繁扰动的调节模式。", "answer": "$$\\boxed{D}$$", "id": "1580948"}, {"introduction": "当我们确定系统需要抗饱和补偿后，下一个问题便是“如何实现？”。反馈校正（Back-calculation）是最经典和有效的抗饱和方法之一。本练习将带你从概念走向实践，要求你将反馈校正的逻辑转化为精确的数学模型，从而掌握该技术的核心实现原理。[@problem_id:1580959]", "problem": "一位控制系统工程师正在为一种高精度机器人执行器设计一个反馈控制器。该控制器是比例-积分 (PI) 型。系统的误差信号，记为 $e(t)$，是控制器的输入。控制器的理想无约束输出 $u(t)$ 是一个比例项和一个积分项的和。积分部分由一个内部状态变量 $x_i(t)$ 管理，它代表了随时间累积的误差。该积分状态的动态特性由以下微分方程给出：\n$$ \\frac{dx_i}{dt} = K_i e(t) $$\n其中 $K_i$ 是积分增益。理想的控制器输出则计算为 $u(t) = K_p e(t) + x_i(t)$，其中 $K_p$ 是比例增益。\n\n一个主要的现实约束是，物理执行器无法产生任意大小的输出。其输出记为 $v(t)$，被限制在一个特定范围 $[V_{min}, V_{max}]$ 内。这种行为通过一个饱和函数来建模：\n$$ v(t) = \\text{sat}(u(t)) = \\begin{cases} V_{max}  \\text{if } u(t)  V_{max} \\\\ u(t)  \\text{if } V_{min} \\le u(t) \\le V_{max} \\\\ V_{min}  \\text{if } u(t)  V_{min} \\end{cases} $$\n当饱和发生时，即当 $u(t) \\ne v(t)$ 时，标准积分器会继续累积误差，这种现象被称为积分饱和（integrator windup），它会导致大的超调和系统性能不佳。\n\n为了缓解这个问题，工程师决定实施一种反向计算抗饱和方案。该方案通过创建一个反馈回路来工作，该回路检测理想控制器输出 $u(t)$ 和实际饱和输出 $v(t)$ 之间的差异。这个差异，通常被称为饱和误差，然后被用来创建一个校正项，从积分器的输入中减去。该校正项与饱和误差成正比，其增益常数为 $K_t  0$，称为跟踪增益或抗饱和增益。\n\n根据这种反向计算抗饱和修改的描述，下列哪个微分方程正确地表示了积分器状态 $x_i(t)$ 的新动态特性？\n\nA. $\\frac{dx_i}{dt} = K_i e(t) - K_t (u(t) - v(t))$\n\nB. $\\frac{dx_i}{dt} = K_i e(t) + K_t (u(t) - v(t))$\n\nC. $\\frac{dx_i}{dt} = K_i \\left( e(t) - K_t (u(t) - v(t)) \\right)$\n\nD. $\\frac{dx_i}{dt} = K_i e(t) - K_t u(t)$\n\nE. $\\frac{dx_i}{dt} = K_i e(t) - K_t (K_p e(t) - v(t))$", "solution": "原始的 PI 控制器使用积分器状态 $x_{i}(t)$，其动态特性为\n$$\n\\frac{dx_{i}}{dt} = K_{i} e(t),\n$$\n理想控制信号为 $u(t) = K_{p} e(t) + x_{i}(t)$。执行器输出被饱和为 $v(t) = \\text{sat}(u(t))$，因此饱和误差是理想输出与实际输出之间的差值：\n$$\nu(t) - v(t).\n$$\n在反向计算抗饱和方法中，此饱和误差通过一个跟踪增益 $K_{t}  0$ 反馈到积分器的输入端，并且如题所述，校正项从积分器的输入中减去。积分器的输入（状态方程的右侧）最初是 $K_{i} e(t)$。将与饱和误差成正比的校正项减去后，修正后的积分器输入变为\n$$\nK_{i} e(t) - K_{t} \\big(u(t) - v(t)\\big).\n$$\n因此，新的积分器动态特性为\n$$\n\\frac{dx_{i}}{dt} = K_{i} e(t) - K_{t} \\big(u(t) - v(t)\\big).\n$$\n这与选项 A 相符。符号对于缓解饱和是正确的：如果 $u(t)  v(t)$（正饱和误差），校正项会减小 $\\frac{dx_{i}}{dt}$ 以抵抗饱和；如果 $u(t)  v(t)$，它会适当地增大 $\\frac{dx_{i}}{dt}$。选项 B 和 D 的符号不正确或忽略了 $v(t)$，选项 C 错误地将校正路径用 $K_{i}$ 而不是独立的 $K_{t}$ 进行缩放，而选项 E 错误地用 $K_{p} e(t)$ 替代 $u(t)$，忽略了 $x_{i}(t)$。", "answer": "$$\\boxed{A}$$", "id": "1580959"}, {"introduction": "为了完全理解抗饱和策略的必要性，量化其缺失所带来的负面影响是一种极为有力的方式。本练习通过一个温控系统的具体案例，模拟了由于设定值大幅变化而导致的严重积分饱和现象。通过亲手计算控制器从饱和状态恢复所需的“解饱和时间”，你将直观地感受到积分饱和是如何降低系统响应速度并导致性能问题的。[@problem_id:1580921]", "problem": "一个热室的温度 $T(t)$（单位为摄氏度）由一个控制系统调节。该热室相对于环境的温度动态特性由以下一阶微分方程描述：\n$$ \\tau \\frac{d(T(t)-T_{amb})}{dt} + (T(t)-T_{amb}) = K_p u_{sat}(t) $$\n其中，$T_{amb} = 25\\,^{\\circ}\\text{C}$ 是恒定的环境温度，$\\tau = 200$ s 是热时间常数，$K_p = 1.0\\,^{\\circ}\\text{C}/\\text{W}$ 是过程增益，$u_{sat}(t)$ 是加热器提供的功率（单位为瓦特）。\n\n使用一个比例-积分 (PI) 控制器来调节加热器的功率。控制器的指令信号 $u_c(t)$ 计算如下：\n$$ u_c(t) = K_c e(t) + x_I(t) $$\n其中 $e(t) = T_{sp}(t) - T(t)$ 是设定点 $T_{sp}(t)$ 与测量温度 $T(t)$ 之间的误差。控制器增益为 $K_c = 2.0\\,\\text{W}/^{\\circ}\\text{C}$。代表累积误差的积分状态 $x_I(t)$ 按以下方式演变：\n$$ \\frac{dx_I}{dt} = \\frac{K_c}{T_i} e(t) $$\n积分时间常数为 $T_i = 50$ s。\n\n加热器是一个只能提供热量的电阻元件，并具有最大输出功率。因此，实际供应的功率 $u_{sat}(t)$ 与控制器指令的关系为 $u_{sat}(t) = \\max(0, \\min(u_c(t), U_{max}))$，其中 $U_{max} = 75$ W。\n\n控制序列如下：\n1.  最初，在 $t0$ 时，系统处于稳态，设定点等于环境温度，$T_{sp} = T_{amb}$。\n2.  在 $t=0$ 时，设定点阶跃上升至 $T_{sp} = 150\\,^{\\circ}\\text{C}$。系统响应，加热器功率立即饱和于其最大值 $U_{max}$。\n3.  系统继续演变，直到热室温度 $T(t)$ 达到其从初始值向最大加热功率下的新稳态温度总变化的 99.0%。设此时刻为 $t_1$。\n4.  恰在时刻 $t_1$，设定点瞬间返回到 $T_{sp} = 25\\,^{\\circ}\\text{C}$。尽管这会产生一个很大的负误差，但由于积分状态 $x_I(t)$ 中累积了很大的值，加热器在一段时间内仍保持在 $U_{max}$ 饱和状态。\n\n计算从时刻 $t_1$ 开始，控制器指令 $u_c(t)$ 保持在饱和极限 $U_{max}$ 或以上所持续的时间 $\\Delta t$。这段持续时间是控制器从其饱和状态“解除”所需的时间。以秒为单位表示你的答案，并四舍五入到四位有效数字。", "solution": "令 $y(t) \\equiv T(t)-T_{amb}$，则被控对象动态特性为\n$$\n\\tau \\frac{dy}{dt}+y = K_{p}\\,u_{sat}(t).\n$$\n对于 $t0$，$T_{sp}=T_{amb}$ 且在稳态下 $y(0)=0$, $u_{sat}(0)=0$。由于 $e=T_{sp}-T$，$u_{c}=K_{c}e+x_{I}$，$\\dot{x}_{I}=(K_{c}/T_{i})e$，一个一致的稳态应有 $e(0)=0$，$x_{I}(0)=0$。\n\n在 $t=0$ 时，$T_{sp}$ 阶跃至 $T_{sp,1}=150$，因此 $e(0^{+})=150-25=125$，$u_{c}(0^{+})=K_{c}e(0^{+})=2\\cdot 125=250\\geq U_{max}$，所以对于 $t\\in[0,t_{1}]$，$u_{sat}=U_{max}$。在恒定输入 $u_{sat}=U_{max}$ 下，被控对象的解为\n$$\ny(t)=y_{ss}\\bigl(1-\\exp(-t/\\tau)\\bigr),\\quad y_{ss}\\equiv K_{p}U_{max}.\n$$\n$y$ 达到总变化量 0.99 的时刻 $t_{1}$ 满足\n$$\ny(t_{1})=0.99\\,y_{ss}\\;\\Longrightarrow\\;1-\\exp(-t_{1}/\\tau)=0.99\\;\\Longrightarrow\\;\\exp(-t_{1}/\\tau)=0.01,\n$$\n所以\n$$\nt_{1}=\\tau\\ln(100).\n$$\n在 $t\\in[0,t_{1}]$ 期间，误差为\n$$\ne_{1}(t)=T_{sp,1}-T(t)=\\bigl(T_{sp,1}-T_{amb}\\bigr)-y(t)=\\bigl(T_{sp,1}-T_{amb}-y_{ss}\\bigr)+y_{ss}\\exp(-t/\\tau).\n$$\n在 $t_{1}$ 时的积分状态为\n$$\nx_{I}(t_{1})=x_{I}(0)+\\frac{K_{c}}{T_{i}}\\int_{0}^{t_{1}}e_{1}(t)\\,dt\n=\\frac{K_{c}}{T_{i}}\\left[\\bigl(T_{sp,1}-T_{amb}-y_{ss}\\bigr)t_{1}+y_{ss}\\tau\\bigl(1-\\exp(-t_{1}/\\tau)\\bigr)\\right].\n$$\n使用 $\\exp(-t_{1}/\\tau)=0.01$ 和 $1-\\exp(-t_{1}/\\tau)=0.99$，\n$$\nx_{I}(t_{1})=\\frac{K_{c}}{T_{i}}\\left[\\bigl(T_{sp,1}-T_{amb}-y_{ss}\\bigr)\\tau\\ln(100)+0.99\\,y_{ss}\\tau\\right].\n$$\n\n在 $t=t_{1}$ 时，设定点返回到 $T_{sp,2}=T_{amb}$，因此对于 $t\\geq t_{1}$，定义 $s\\equiv t-t_{1}$。当 $u_{c}\\geq U_{max}$ 时，执行器保持在 $u_{sat}=U_{max}$ 的饱和状态，因此被控对象在恒定输入 $U_{max}$ 下继续演变：\n$$\ny(t)=y_{ss}-\\bigl(y_{ss}-y(t_{1})\\bigr)\\exp(-s/\\tau)=y_{ss}\\left[1-0.01\\,\\exp(-s/\\tau)\\right].\n$$\n因此，在新设定点 $T_{sp,2}=T_{amb}$ 下，\n$$\ne_{2}(s)=T_{sp,2}-T(t)= -\\,y(t)=-y_{ss}+0.01\\,y_{ss}\\exp(-s/\\tau).\n$$\n积分项演变为\n$$\nx_{I}(t)=x_{I}(t_{1})+\\frac{K_{c}}{T_{i}}\\int_{0}^{s}e_{2}(\\xi)\\,d\\xi\n=x_{I}(t_{1})+\\frac{K_{c}}{T_{i}}\\left[-y_{ss}s+0.01\\,y_{ss}\\tau\\bigl(1-\\exp(-s/\\tau)\\bigr)\\right].\n$$\n因此，对于 $s\\geq 0$ 且处于高位饱和状态时，指令控制信号为\n$$\nu_{c}(s)=K_{c}e_{2}(s)+x_{I}(t)\n=x_{I}(t_{1})-K_{c}y_{ss}+\\frac{K_{c}}{T_{i}}\\bigl(0.01\\,y_{ss}\\tau\\bigr)-\\frac{K_{c}}{T_{i}}y_{ss}\\,s\n+K_{c}\\cdot 0.01\\,y_{ss}\\left[1-\\frac{\\tau}{T_{i}}\\right]\\exp(-s/\\tau).\n$$\n当 $s=\\Delta t$ 首次满足 $u_{c}(\\Delta t)=U_{max}$ 时，系统脱离饱和状态。根据给定的数值 $K_{p}=1$, $U_{max}=75$, $\\tau=200$, $K_{c}=2$, $T_{i}=50$, $T_{amb}=25$, $T_{sp,1}=150$，我们有 $y_{ss}=75$ 且 $t_{1}=200\\ln(100)$。计算常数值，\n$$\nx_{I}(t_{1})=\\frac{2}{50}\\left[(125-75)\\cdot 200\\ln(100)+0.99\\cdot 75\\cdot 200\\right]\\approx 2436.0680742,\n$$\n指令信号简化为\n$$\nu_{c}(s)=2292.0680742-3\\,s-4.5\\,\\exp(-s/200).\n$$\n令 $u_{c}(\\Delta t)=U_{max}=75$ 得到标量方程\n$$\n3\\,\\Delta t+4.5\\,\\exp(-\\Delta t/200)=2217.0680742.\n$$\n求解此方程得到\n$$\n\\Delta t\\approx 738.9854\\ \\text{s},\n$$\n四舍五入到四位有效数字后，结果是\n$$\n\\Delta t=739.0\\ \\text{s}.\n$$", "answer": "$$\\boxed{739.0}$$", "id": "1580921"}]}
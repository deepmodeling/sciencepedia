{"hands_on_practices": [{"introduction": "在设计任何模型参考自适应控制器之前，首要任务是建立误差动力学模型。这个模型精确描述了我们系统的实际输出与期望的参考模型输出之间的差异。通过本练习，你将推导这个关键的误差方程，为后续设计能够消除此误差的自适应律奠定数学基础。[@problem_id:1591821]", "problem": "考虑一个简单的一阶动力系统，通常称为“被控对象”(plant)，其行为由以下微分方程描述：\n$$ \\dot{y}_p(t) = -a_p y_p(t) + b_p u(t) $$\n其中，$y_p(t)$ 是被控对象的输出，$u(t)$ 是控制输入，$a_p$ 和 $b_p$ 是代表被控对象特性的正的常数。\n\n目标是使被控对象的输出 $y_p(t)$ 跟随一个稳定的“参考模型”的输出 $y_m(t)$，该参考模型定义为：\n$$ \\dot{y}_m(t) = -a_m y_m(t) + b_m r(t) $$\n在此方程中，$y_m(t)$ 是期望的模型输出，$r(t)$ 是一个有界参考信号，$a_m$ 和 $b_m$ 是已知的正的常数。\n\n为实现此目标，我们采用一个线性反馈控制器，其控制输入 $u(t)$ 由下式给出：\n$$ u(t) = \\theta_1 y_p(t) + \\theta_2 r(t) $$\n参数 $\\theta_1$ 和 $\\theta_2$ 是恒定的控制器增益。\n\n跟踪误差 $e(t)$ 定义为被控对象输出与参考模型输出之差：\n$$ e(t) = y_p(t) - y_m(t) $$\n\n该跟踪误差的动态可以表示为 $\\dot{e}(t) = F$ 形式的一阶常微分方程。您的任务是求出 $F$ 的表达式。请用跟踪误差 $e(t)$、参考模型输出 $y_m(t)$、参考信号 $r(t)$ 以及常数参数（$a_p, b_p, a_m, b_m, \\theta_1, \\theta_2$）来表示您的答案。为简化起见，您可以在最终表达式中省略显式的时间依赖关系 $(t)$。", "solution": "我们从被控对象、模型、控制律和跟踪误差的定义开始：\n- 被控对象：$\\dot{y}_{p}=-a_{p}y_{p}+b_{p}u$。\n- 模型：$\\dot{y}_{m}=-a_{m}y_{m}+b_{m}r$。\n- 控制：$u=\\theta_{1}y_{p}+\\theta_{2}r$。\n- 误差：$e=y_{p}-y_{m}$。\n\n对误差求导以获得其动态：\n$$\n\\dot{e}=\\dot{y}_{p}-\\dot{y}_{m}.\n$$\n代入被控对象和模型的动态：\n$$\n\\dot{e}=\\left(-a_{p}y_{p}+b_{p}u\\right)-\\left(-a_{m}y_{m}+b_{m}r\\right).\n$$\n代入控制输入 $u=\\theta_{1}y_{p}+\\theta_{2}r$：\n$$\n\\dot{e}=-a_{p}y_{p}+b_{p}\\left(\\theta_{1}y_{p}+\\theta_{2}r\\right)+a_{m}y_{m}-b_{m}r.\n$$\n整理各项：\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)y_{p}+a_{m}y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\n使用 $y_{p}=e+y_{m}$ 将 $y_{p}$ 表示为 $e$ 和 $y_{m}$ 的形式：\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)\\left(e+y_{m}\\right)+a_{m}y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\n展开并合并同类项：\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(-a_{p}+b_{p}\\theta_{1}+a_{m}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\n因此，误差动态 $\\dot{e}=F$ 具有\n$$\nF=\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(a_{m}-a_{p}+b_{p}\\theta_{1}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$", "answer": "$$\\boxed{\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(a_{m}-a_{p}+b_{p}\\theta_{1}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r}$$", "id": "1591821"}, {"introduction": "建立了误差模型之后，接下来的核心问题是：当系统参数未知时，如何系统地调整控制器以减小误差？本练习将引导你应用经典的MIT规则，这是一种基于梯度下降的方法，用于推导参数的更新法则。通过这种方法，控制器能够在线学习并调整自身，以使系统行为逼近参考模型。[@problem_id:1591815]", "problem": "考虑一个用于控制小型四轴无人机垂直速度 $v(t)$ 的简化模型。该无人机的垂直动力学由以下一阶线性微分方程描述：\n$$ \\frac{dv(t)}{dt} = b u(t) $$\n其中，$u(t)$ 是由机载计算机生成的控制输入，$b$ 是“控制有效性”参数。参数 $b$ 是正数，但其确切值未知，并且可能因电池放电或大气密度变化等因素而变化。\n\n为确保性能一致，采用了一个模型参考自适应控制器 (MRAC)。无人机的期望行为由一个稳定的参考模型指定，其传递函数描述为：\n$$ G_m(s) = \\frac{V_m(s)}{V_c(s)} = \\frac{b_m}{s+a_m} $$\n在此，$v_m(t)$ 是期望的模型输出速度，$v_c(t)$ 是参考指令速度，$a_m  0$ 和 $b_m  0$ 是已知的固定设计参数。\n\n为实现完美模型跟踪，自适应控制律的结构如下：\n$$ u(t) = \\frac{1}{\\hat{b}(t)} \\left( b_m v_c(t) - a_m v(t) \\right) $$\n其中 $\\hat{b}(t)$ 是未知参数 $b$ 的在线估计值。\n\n为了更新此估计值，控制器使用 Massachusetts Institute of Technology (MIT) 规则，其目标是最小化成本函数 $J(\\hat{b}) = \\frac{1}{2} e(t)^2$，其中 $e(t) = v(t) - v_m(t)$ 是跟踪误差。MIT 规则的一般形式为 $\\frac{d\\hat{b}}{dt} = -\\gamma \\frac{\\partial J}{\\partial \\hat{b}}$，其中 $\\gamma  0$ 是一个常数自适应增益。\n\n由此产生的更新律可以写成 $\\frac{d\\hat{b}}{dt} = \\gamma e(t)\\phi(t)$ 的形式，其中 $\\phi(t)$ 是通过一个线性时不变滤波器 $W(s)$ 对控制输入 $u(t)$ 进行滤波而生成的信号。也就是说，当输入为 $u(t)$ 时，$\\phi(t)$ 是滤波器 $W(s)$ 的输出。\n\n确定该灵敏度滤波器 $W(s)$ 的传递函数。用给定参数表示你的答案。", "solution": "令 $\\theta \\triangleq \\hat{b}$。受控对象和控制律为\n$$\\dot{v}(t) = b\\,u(t), \\qquad u(t) = \\frac{1}{\\theta}\\left(b_{m}v_{c}(t) - a_{m}v(t)\\right)。$$\n因此，用 $\\theta$ 表示的闭环动力学为\n$$\\dot{v}(t) = \\frac{b}{\\theta}\\,b_{m}v_{c}(t) - \\frac{b}{\\theta}\\,a_{m}v(t)。$$\n定义灵敏度 $S(t) \\triangleq \\frac{\\partial v(t)}{\\partial \\theta}$。对闭环方程关于 $\\theta$ 求导（其中 $b$ 和 $v_{c}$ 与 $\\theta$ 无关）可得\n$$\\dot{S}(t) = -\\frac{b\\,b_{m}}{\\theta^{2}}\\,v_{c}(t) + \\frac{b\\,a_{m}}{\\theta^{2}}\\,v(t) - \\frac{b\\,a_{m}}{\\theta}\\,S(t)。$$\n使用来自 $u(t)$ 的控制恒等式，\n$$b_{m}v_{c}(t) - a_{m}v(t) = \\theta\\,u(t) \\quad \\Longrightarrow \\quad a_{m}v(t) - b_{m}v_{c}(t) = -\\theta\\,u(t),$$\n灵敏度动力学变为\n$$\\dot{S}(t) + \\frac{b\\,a_{m}}{\\theta}\\,S(t) = -\\frac{b}{\\theta}\\,u(t)。$$\n进行拉普拉斯变换（初始灵敏度为零）可得\n$$S(s) = -\\frac{\\frac{b}{\\theta}}{s + \\frac{b\\,a_{m}}{\\theta}}\\,U(s)。$$\n根据 MIT 规则 $ \\dot{\\theta} = -\\gamma\\,\\frac{\\partial J}{\\partial \\theta} = -\\gamma\\,e\\,\\frac{\\partial e}{\\partial \\theta} $ 以及 $e = v - v_{m}$，我们有 $\\frac{\\partial e}{\\partial \\theta} = S$。将更新律写作 $\\dot{\\theta} = \\gamma\\,e\\,\\phi$ 意味着 $\\phi = -S$，因此从 $u$ 到 $\\phi$ 的滤波器是\n$$\\Phi(s) = \\frac{\\frac{b}{\\theta}}{s + \\frac{b\\,a_{m}}{\\theta}}\\,U(s)。$$\n在理想参数 $\\theta = b$（即完美模型跟踪点）下的标准 MRAC 匹配条件下，该式简化为\n$$\\Phi(s) = \\frac{1}{s + a_{m}}\\,U(s)。$$\n因此，灵敏度滤波器的传递函数是\n$$W(s) = \\frac{1}{s + a_{m}}.$$\n如此所需，这仅取决于已知的设计参数 $a_{m}$。", "answer": "$$\\boxed{\\frac{1}{s+a_{m}}}$$", "id": "1591815"}, {"introduction": "理论模型总是对复杂现实的简化。本练习探讨了一个至关重要的实际问题：现实世界中普遍存在的未建模高频动态。你将分析这些被忽略的动态如何引入额外的相移，从而可能违反MRAC稳定性理论中的严格正实（Strictly Positive Real, SPR）条件，并最终揭示控制器在实际应用中可能失稳的根本原因。[@problem_id:1591826]", "problem": "一位航空航天工程师正在为卫星的姿态控制推进器开发一个模型参考自适应控制 (MRAC) 系统。该推进器从输入指令到扭矩输出的动态响应的初始简化模型是一个一阶系统，其传递函数为 $G_{p,nom}(s) = \\frac{K}{s+a}$，其中 $K$ 是一个正增益。\n\n在硬件在环测试期间，发现存在未建模的高频动态特性，例如阀门驱动延迟。这些动态特性可以有效地用一个快速极点来近似，从而得到一个更精确的、真实的被控对象传递函数：\n$$G_{p,true}(s) = \\frac{K}{s+a} \\cdot \\frac{p}{s+p}$$\n这里，$p$ 是一个远大于 $a$ 的正的常数，$p \\gg a$，代表位于 $s=-p$ 的高频极点。\n\n为了使所选 MRAC 架构的稳定性证明成立，要求被控对象的传递函数是严格正实 (Strictly Positive Real, SPR) 的。如果一个传递函数 $H(s)$ 对于所有频率 $\\omega \\ge 0$ 的奈奎斯特图都保持在复平面的右半平面，则该传递函数被认为是 SPR 的。对于像 $G_{p,true}(s)$ 这样的最小相位系统，这等效于其相角 $\\angle H(j\\omega)$ 严格保持在 $-90^\\circ$ 和 $+90^\\circ$ 之间。\n\n未建模的动态特性引入了随频率增加而增大的相位滞后，这可能导致 SPR 条件被违反。确定临界角频率 $\\omega_c$，在该频率下，真实被控对象的相角 $\\angle G_{p,true}(j\\omega)$ 首次达到 SPR 区域的边界，即 $-90^\\circ$。这个频率指出了一个阈值，超过该阈值，未建模的动态特性将从根本上挑战控制器的稳定性假设。\n\n在计算中使用以下参数：$a = 15.0 \\text{ rad/s}$ 和 $p = 250 \\text{ rad/s}$。增益 $K$ 是一个正的常数，但其值不是必需的。\n\n将临界角频率 $\\omega_c$ 的最终答案以 rad/s 为单位表示，并四舍五入到三位有效数字。", "solution": "真实的被控对象传递函数由下式给出\n$$\nG_{p,\\text{true}}(s)=\\frac{K}{s+a}\\cdot\\frac{p}{s+p}=\\frac{Kp}{(s+a)(s+p)}.\n$$\n在虚轴上 $s=j\\omega$ 处求值，其频率响应为\n$$\nG_{p,\\text{true}}(j\\omega)=\\frac{Kp}{(j\\omega+a)(j\\omega+p)}.\n$$\n由于 $K0$ 且 $p0$，分子贡献的相角为零。分母中的每个因子，对于 $\\alpha0$，其相角为 $\\arg(j\\omega+\\alpha)=\\arctan\\!\\left(\\frac{\\omega}{\\alpha}\\right)$，因此总相角为\n$$\n\\angle G_{p,\\text{true}}(j\\omega)=-\\arctan\\!\\left(\\frac{\\omega}{a}\\right)-\\arctan\\!\\left(\\frac{\\omega}{p}\\right).\n$$\n当相角等于 $-\\frac{\\pi}{2}$ 时，达到 SPR 边界，因此我们设\n$$\n\\arctan\\!\\left(\\frac{\\omega}{a}\\right)+\\arctan\\!\\left(\\frac{\\omega}{p}\\right)=\\frac{\\pi}{2}.\n$$\n令 $x=\\frac{\\omega}{a}$ 和 $y=\\frac{\\omega}{p}$。使用正切和角公式，\n$$\n\\tan\\big(\\arctan x+\\arctan y\\big)=\\frac{x+y}{1-xy}.\n$$\n为了使左侧等于 $\\tan\\!\\left(\\frac{\\pi}{2}\\right)$，在 $x,y0$ 的条件下，分母必须为零，从而得到\n$$\n1-xy=0\\quad\\Longrightarrow\\quad xy=1.\n$$\n代回可得\n$$\n\\frac{\\omega}{a}\\cdot\\frac{\\omega}{p}=1\\;\\;\\Longrightarrow\\;\\;\\omega^{2}=ap\\;\\;\\Longrightarrow\\;\\;\\omega_{c}=\\sqrt{ap}.\n$$\n当 $a=15.0 \\text{ rad/s}$ 且 $p=250 \\text{ rad/s}$ 时，\n$$\n\\omega_{c}=\\sqrt{15.0\\times 250}=\\sqrt{3750}\\approx 61.237\\;\\text{rad/s}.\n$$\n四舍五入到三位有效数字，临界角频率为 $61.2$ rad/s。", "answer": "$$\\boxed{61.2}$$", "id": "1591826"}]}
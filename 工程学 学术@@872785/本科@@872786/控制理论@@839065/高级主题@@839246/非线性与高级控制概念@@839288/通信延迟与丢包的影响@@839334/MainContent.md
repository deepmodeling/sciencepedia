## 引言
随着网络技术的普及，控制系统正越来越多地通过通信信道连接传感器、控制器与执行器，构成了所谓的[网络化控制系统](@entry_id:271631)（NCS）。这种架构带来了前所未有的灵活性和远程操作能力，但也引入了新的、严峻的挑战：不完美的通信。通信延迟和[数据包丢失](@entry_id:269936)（[丢包](@entry_id:269936)）是其中最普遍的两个问题，它们可能严重降低系统性能，甚至导致灾难性的失稳。然而，这些影响并非无法捉摸。理解并量化其效应，是设计可靠、高效的[现代控制系统](@entry_id:269478)的关键前提。

本文旨在系统性地揭示通信延迟与[丢包](@entry_id:269936)背后的控制理论原理。我们将分为三个章节，带领读者从理论基础走向工程实践。在“原理与机制”一章中，我们将深入探讨延迟如何通过引入[相位滞后](@entry_id:172443)破坏稳定性，以及[丢包](@entry_id:269936)如何从根本上改变系统的动态方程。接着，在“应用与跨学科联系”一章中，我们会将这些理论应用于机器人遥操作、工业[过程控制](@entry_id:271184)等实际场景，并探索其与信息论、[分布式系统](@entry_id:268208)等领域的深刻关联。最后，“动手实践”部分将提供一系列计算练习，帮助您巩固所学知识。现在，让我们从探究这些网络缺陷的内在原理开始。

## 原理与机制

在[网络化控制系统](@entry_id:271631)（NCS）中，通信信道引入的非理想因素是影响系统性能和稳定性的核心挑战。其中，时间延迟和[数据包丢失](@entry_id:269936)（简称[丢包](@entry_id:269936)）是最为普遍和关键的两种现象。本章将深入探讨这两种现象的内在原理和作用机制，阐明它们如何从根本上改变系统的动态行为，并介绍用于分析这些影响的核心理论方法。

### 延时的基本模型及其在控制回路中的位置

在[连续时间系统](@entry_id:276553)中，一个恒定的时间延迟 $\tau$ 通常被建模为一个[传递函数](@entry_id:273897)，即**延时算子** $D(s) = \exp(-s\tau)$。这个算子在时域中的作用是将输入信号 $u(t)$ 变换为输出信号 $y(t) = u(t-\tau)$。在复杂的网络环境中，延迟可能并非恒定，而是在一个区间内变化，即 $\tau(t) \in [\tau_{\min}, \tau_{\max}]$。对于这类**时变延时**，进行保守的[稳定性分析](@entry_id:144077)至关重要，通常会考虑“最坏情况”下的延时，即能引入最大相位滞后的 $\tau_{\max}$ [@problem_id:1573875]。

一个常见的问题是，延时环节在控制回路中的具体位置是否会影响系统的稳定性。例如，考虑一个前向通道为 $G(s)$、反馈通道为 $H(s)$ 的标准负反馈系统。将延时算子 $D(s)$ 放置在前向通道（构成 $G(s)D(s)$）或反馈通道（构成 $H(s)D(s)$），是否会产生不同的稳定性结果？

答案是否定的。系统的稳定性由其[闭环极点](@entry_id:274094)决定，而[闭环极点](@entry_id:274094)是特征方程的根。
- 在第一种配置中（延时在前向通道），特征方程为 $1 + G(s)D(s)H(s) = 0$。
- 在第二种配置中（延时在反馈通道），特征方程为 $1 + G(s)H(s)D(s) = 0$。

由于[传递函数](@entry_id:273897)的乘法满足交换律，这两个方程是完全相同的。因此，闭环[系统的[极](@entry_id:261618)点位置](@entry_id:271565)与延时在环路内的具体位置无关，仅与**环路总延时**有关。这意味着，无论是执行器延时、传感器延时还是控制器计算延时，只要它们发生在同一个[反馈回路](@entry_id:273536)中，就可以将它们合并为一个总的等效延时进行[稳定性分析](@entry_id:144077) [@problem_id:1573904]。

### 延时的根本影响：相位滞后与不稳定性

时间延迟对控制系统的根本影响在于它引入了**[相位滞后](@entry_id:172443)**（phase lag），却不改变信号的幅值。根据[欧拉公式](@entry_id:176440)，延时算子在[频域](@entry_id:160070)中可以表示为 $\exp(-j\omega\tau) = \cos(\omega\tau) - j\sin(\omega\tau)$。它的幅值为 $|\exp(-j\omega\tau)| = \sqrt{\cos^2(\omega\tau) + \sin^2(\omega\tau)} = 1$，而其相位为 $\arg(\exp(-j\omega\tau)) = -\omega\tau$。

这个相位滞后与频率 $\omega$ 成正比，意味着频率越高，相位滞后越严重。在[反馈控制](@entry_id:272052)中，当环路总相位达到 $-180^\circ$（或 $-\pi$ [弧度](@entry_id:171693)）时，负反馈就转变成了正反馈。如果此时的环路增益大于或等于1，系统就会变得不稳定。由于延时引入的相位滞后随频率无限增长，任何有延时的实际[反馈系统](@entry_id:268816)，在足够高的频率下，其相位最终都会越过 $-180^\circ$ 的临界线。这预示着，只要增益足够大，带延时的系统几乎总会变得不稳定。

让我们通过一个经典的例子来阐明这一原理。考虑一个通过[网络控制](@entry_id:275222)的机器人执行器，其[角速度](@entry_id:192539)动态可被简化为一个纯[积分器](@entry_id:261578)模型 $G_p(s) = A/s$，其中 $A$ 为正实数增益。我们使用一个[比例控制器](@entry_id:271237)（增益为 $K > 0$），并在[反馈回路](@entry_id:273536)中存在一个恒定延时 $\tau > 0$。该系统的[开环传递函数](@entry_id:276280)为：
$$ L(s) = \frac{AK}{s} \exp(-s\tau) $$
系统的特征方程为 $1 + L(s) = 0$，即 $s + AK \exp(-s\tau) = 0$。

为了找到稳定性的边界，我们考察是否存在纯虚数根 $s = j\omega_c$（其中 $\omega_c$ 为穿越频率）。代入[特征方程](@entry_id:265849)可得：
$$ j\omega_c + AK \exp(-j\omega_c\tau) = 0 $$
$$ j\omega_c + AK(\cos(\omega_c\tau) - j\sin(\omega_c\tau)) = 0 $$
分离实部和虚部，我们得到两个方程：
$$ \text{实部: } AK \cos(\omega_c\tau) = 0 $$
$$ \text{虚部: } \omega_c - AK \sin(\omega_c\tau) = 0 $$
由于 $A, K > 0$，实部方程要求 $\cos(\omega_c\tau) = 0$。这表明 $\omega_c\tau = \frac{\pi}{2} + n\pi$ 对于某个整数 $n$。为找到导致不稳定的最小增益和频率，我们考虑最小的正频率，即 $n=0$ 时的情况，此时 $\omega_c\tau = \frac{\pi}{2}$。在这种情况下，$\sin(\omega_c\tau) = \sin(\pi/2) = 1$。

将这些结果代入虚部方程，得到 $\omega_c - AK(1) = 0$，即 $\omega_c = AK$。联立 $\omega_c\tau = \frac{\pi}{2}$，我们可以解出系统达到[临界稳定](@entry_id:147657)时的增益和频率：
$$ \omega_c = \frac{\pi}{2\tau} $$
$$ K_{\max} = \frac{\omega_c}{A} = \frac{\pi}{2A\tau} $$
这个结果 [@problem_id:1573925] 揭示了一个深刻的结论：对于这个看似简单的系统，存在一个**[最大稳定增益](@entry_id:262066)** $K_{\max}$。只要[比例增益](@entry_id:272008) $K$ 超过这个值，系统就会变得不稳定，并以频率 $\omega_c$ 开始[振荡](@entry_id:267781)。更重要的是，这个最大增益与延时 $\tau$ 成反比——延时越大，系统能容忍的增益就越小。

这一分析也揭示了延时对系统**性能**的根本限制。在控制理论中，系统的响应速度通常与**增益穿越频率**（gain crossover frequency, $\omega_{gc}$）相关，该频率定义为开环幅值 $|L(j\omega_{gc})|=1$ 时的频率。对于我们这个例子， $|L(j\omega_{gc})| = \frac{AK}{\omega_{gc}} = 1$，所以 $\omega_{gc} = AK$。系统在[临界稳定](@entry_id:147657)时，其增益穿越频率恰好为 $\omega_c = \frac{\pi}{2\tau}$。这意味着，对于该系统结构，无论如何调节增益，其闭[环带](@entry_id:163678)宽都无法超越这个由延时决定的理论上限 [@problem_id:1573903]。

### 延时与控制器结构的相互作用

延时的失稳效应会与控制器不同部分产生复杂的相互作用。一个尤其值得关注的例子是**[微分](@entry_id:158718)（Derivative, D）控制**。直观上，[微分](@entry_id:158718)作用能够[预测误差](@entry_id:753692)趋势，提供阻尼，从而改善系统响应。然而，在存在测量延时的情况下，过大的[微分](@entry_id:158718)增益反而会急剧恶化稳定性。

考虑一个[PD控制器](@entry_id:266904) $C(s) = K_p + K_d s$。[微分](@entry_id:158718)环节 $K_d s$ 的增益 $|K_d j\omega| = K_d \omega$ 随频率线性增长。当系统中存在测量延时 $\tau$ 时，我们来分析高频下的开环行为。在高频区，[控制器增益](@entry_id:262009)由[微分](@entry_id:158718)项主导，即 $C(j\omega) \approx K_d j\omega$。假设被控对象 $G_p(s)$ 在高频下表现为一个一阶[滚降](@entry_id:273187)特性，如 $G_p(s) = \frac{K}{T_p s + 1}$，那么在高频下 $G_p(j\omega) \approx \frac{K}{T_p j\omega}$。

此时，不包含延时的[开环传递函数](@entry_id:276280) $C(s)G_p(s)$ 在高频下的近似值为：
$$ C(j\omega)G_p(j\omega) \approx (K_d j\omega) \left(\frac{K}{T_p j\omega}\right) = \frac{K K_d}{T_p} $$
这是一个常数。现在，我们引入延时环节 $\exp(-j\omega\tau)$。完整的[开环传递函数](@entry_id:276280)在高频下近似为 $L(j\omega) \approx \frac{K K_d}{T_p} \exp(-j\omega\tau)$。其幅值 $|L(j\omega)| \approx \frac{K K_d}{T_p}$ 是一个不随频率衰减的常数，而其相位 $\arg(L(j\omega)) \approx -\omega\tau$ 持续下降。

这意味着，无论我们考察多高的频率，系统总增益都不会衰减到零以下。同时，由于[相位滞后](@entry_id:172443) $-\omega\tau$ 不断增加，必然存在一个频率 $\omega_{\pi} = \pi/\tau$，使得相位达到 $-180^\circ$。在这一点，如果开环幅值 $|L(j\omega_{\pi})| \ge 1$，系统就会不稳定。由于这个幅值与 $K_d$ 成正比，只要[微分](@entry_id:158718)增益 $K_d$ 被设置得足够大，使得 $\frac{K K_d}{T_p} \ge 1$，系统就必然失稳 [@problem_id:1573874]。这解释了在有测量延时的系统中，盲目增大[微分](@entry_id:158718)增益以期获得更快响应为何是一种危险的操作。

### 高级稳定性现象：稳定性切换

通常我们认为增加延时会降低系统的稳定性。然而，对于某些系统，延时与稳定性之间的关系更为复杂。随着延时 $\tau$ 的增加，系统可能会在稳定与不稳定之间来回切换，这种现象被称为**稳定性切换**（stability switching）。

考虑一个由[比例控制器](@entry_id:271237)（增益 $K$）和一个带延时 $\tau$ 的[反馈回路](@entry_id:273536)控制的无阻尼振荡器 $P(s) = \frac{1}{s^2 + \omega_0^2}$。这种情况可能出现在控制一个具有明显[谐振峰](@entry_id:271281)的机械结构时。系统的[特征方程](@entry_id:265849)为：
$$ s^2 + \omega_0^2 + K \exp(-s\tau) = 0 $$
我们再次通过寻找纯虚根 $s = j\omega$ 来确定稳定性的边界。代入可得：
$$ (j\omega)^2 + \omega_0^2 + K \exp(-j\omega\tau) = 0 $$
$$ -\omega^2 + \omega_0^2 + K(\cos(\omega\tau) - j\sin(\omega\tau)) = 0 $$
分离实部和虚部：
$$ \text{实部: } -\omega^2 + \omega_0^2 + K\cos(\omega\tau) = 0 $$
$$ \text{虚部: } -K\sin(\omega\tau) = 0 $$
虚部方程给出 $\sin(\omega\tau)=0$，这意味着 $\omega\tau = m\pi$，其中 $m$ 是正整数。因此，$\cos(\omega\tau) = \cos(m\pi) = (-1)^m$。

将此结果代入实部方程，我们得到穿越频率 $\omega$ 必须满足：
$$ \omega^2 = \omega_0^2 + K(-1)^m $$
这个方程是关键。它表明，只有当右侧为正时，才可能存在实数解 $\omega$。假设我们固定增益 $K$，并给定系统的固有频率 $\omega_0$（例如，$\omega_0=4.00$ rad/s, $K=7.00$）。
- 如果 $m$ 是奇数，$m=1, 3, 5, \dots$，则 $\omega^2 = \omega_0^2 - K = 16 - 7 = 9$，因此 $\omega=3$ rad/s。对应的临界延时值为 $\tau_m = \frac{m\pi}{\omega} = \frac{m\pi}{3}$。
- 如果 $m$ 是偶数，$m=2, 4, 6, \dots$，则 $\omega^2 = \omega_0^2 + K = 16 + 7 = 23$，因此 $\omega=\sqrt{23}$ rad/s。对应的临界延时值为 $\tau_m = \frac{m\pi}{\omega} = \frac{m\pi}{\sqrt{23}}$。

将这些临界延时值按大小排序，我们可以得到一个序列，例如 $\tau_1 = \pi/3 \approx 1.05$ s，$\tau_2 = 2\pi/\sqrt{23} \approx 1.31$ s，等等 [@problem_id:1573896]。每当延时 $\tau$ 穿过这些临界值时，一对[闭环极点](@entry_id:274094)就会穿越[虚轴](@entry_id:262618)，导致系统稳定性的改变。对于 $\tau=0$，系统是稳定的。随着 $\tau$ 从零开始增加，系统在 $\tau_1$ 处首次失稳，但在 $\tau_2$ 处又可能重新变得稳定。这种[稳定区域](@entry_id:166035)和不稳定区域交替出现的现象，凸显了延时对动态系统影响的复杂性，简单地认为“延时越长越不稳定”在某些情况下是不准确的。

### 用于[状态空间分析](@entry_id:266177)的延时建模

前面的分析主要基于[频域](@entry_id:160070)和[传递函数](@entry_id:273897)。然而，现代控制理论大多建立在状态空间模型之上。一个包含延时的系统，如 $\dot{x}(t) = Ax(t) + Bu(t-\tau)$，是一个**[时滞微分方程](@entry_id:264784)**（Delay-Differential Equation, DDE），其状态在理论上是无限维的，因为要确定当前的状态演化，需要知道过去一段时间内的输入历史。这给标准的[状态空间分析](@entry_id:266177)工具（如[极点配置](@entry_id:155523)、LQR设计）带来了困难。

为了克服这一难题，一种常用方法是使用有理函数来近似延时算子 $\exp(-s\tau)$，从而将无限维系统转化为一个更高阶的有限维[线性时不变](@entry_id:276287)（LTI）系统。**[帕德近似](@entry_id:268838)**（Padé approximation）是实现此目的的有效工具。$n$阶[帕德近似](@entry_id:268838)用一个分子和分母均为$n$次多项式的有理函数来逼近 $\exp(-s\tau)$。

例如，一阶[帕德近似](@entry_id:268838)为：
$$ \exp(-s\tau) \approx \frac{1 - s\tau/2}{1 + s\tau/2} = \frac{2/\tau - s}{2/\tau + s} $$
考虑一个带有输入延时的弹簧-质量-阻尼系统，其[运动方程](@entry_id:170720)为 $m\ddot{p}(t) + c\dot{p}(t) + kp(t) = u(t-\tau)$。如果直接使用[帕德近似](@entry_id:268838)，令延迟输入 $u_d(s) = \exp(-s\tau)u(s)$，则 $u_d(s) \approx \frac{2/\tau - s}{2/\tau + s} u(s)$。这个表达式中包含输入信号的[微分](@entry_id:158718)项 $s u(s)$，在实践中应尽量避免。

一个更稳健的方法是为[帕德近似](@entry_id:268838)本身构建一个[状态空间实现](@entry_id:166670)。对于输入 $u(t)$ 和近似的延迟输出 $u_d(t)$，一阶[帕德近似](@entry_id:268838)可以表示为：
$$ u_d(t) \approx \frac{4}{\tau}w(t) - u(t) $$
其中，内部状态 $w(t)$ 的动态为：
$$ \dot{w}(t) = -\frac{2}{\tau}w(t) + u(t) $$
现在，我们可以构建一个**[增广状态空间](@entry_id:169453)模型**。原始系统的状态为 $x_1 = p$ 和 $x_2 = \dot{p}$。我们将近似器的状态 $w$ 加入，形成增广[状态向量](@entry_id:154607) $\mathbf{z}(t) = [p(t), \dot{p}(t), w(t)]^T$。系统的动态[方程组](@entry_id:193238)变为：
1. $\dot{x}_1(t) = x_2(t)$
2. $\dot{x}_2(t) = -\frac{k}{m}x_1(t) - \frac{c}{m}x_2(t) + \frac{1}{m}u_d(t) = -\frac{k}{m}x_1(t) - \frac{c}{m}x_2(t) + \frac{1}{m}(\frac{4}{\tau}w(t) - u(t))$
3. $\dot{w}(t) = -\frac{2}{\tau}w(t) + u(t)$

将这些方程写成标准的矩阵形式 $\dot{\mathbf{z}}(t) = \mathbf{A}_{aug}\mathbf{z}(t) + \mathbf{B}_{aug}u(t)$，我们得到增广[系统矩阵](@entry_id:172230) [@problem_id:1573895]：
$$ \mathbf{A}_{aug} = \begin{pmatrix} 0  1  0 \\ -\frac{k}{m}  -\frac{c}{m}  \frac{4}{m\tau} \\ 0  0  -\frac{2}{\tau} \end{pmatrix}, \quad \mathbf{B}_{aug} = \begin{pmatrix} 0 \\ -1/m \\ 1 \end{pmatrix} $$
通过这种方法，我们将一个无限维的DDE系统转化为了一个更高维（本例中为3维）的[LTI系统](@entry_id:271946)。这个近似模型虽然只在低频段精确，但它允许我们使用所有标准[LTI系统分析](@entry_id:266777)和设计的工具，为处理带延时的控制问题提供了一个强有力的工程近似途径。

### [丢包](@entry_id:269936)的建模与分析

与连续的[信号延迟](@entry_id:261518)不同，[丢包](@entry_id:269936)是一种离散事件，它意味着在某个时刻，预期的信息（如控制指令或传感器读数）完全丢失。分析[丢包](@entry_id:269936)影响的关键在于对“丢失”后系统行为的假设。一种常见的[容错](@entry_id:142190)机制是**零阶保持**（Zero-Order Hold），即执行器或控制器在未收到新数据时，继续使用上一个成功接收到的数据。

我们将[丢包](@entry_id:269936)[过程建模](@entry_id:183557)为一个**[随机过程](@entry_id:159502)**。假设每个数据包的传输是独立的，并且在每个时刻 $k$，数据包成功到达的概率为 $1-p$，丢失的概率为 $p$。这个过程可以用一个伯努利[随机变量](@entry_id:195330)序列 $\gamma_k$ 来描述，其中 $\gamma_k=1$ 表示成功接收，$\gamma_k=0$ 表示[丢包](@entry_id:269936)。

#### 对系统动态的影响：期望行为分析

随机[丢包](@entry_id:269936)会如何影响系统的整体动态？考虑一个[一阶离散时间系统](@entry_id:265160) $x_{k+1} = ax_k + bu_k$，其中控制输入 $u_k$ 通过不可靠网络传输。执行器采用零阶保持策略，即实际施加的输入 $v_k$ 遵循规则：如果 $u_k$ 成功接收，则 $v_k = u_k$；否则，$v_k = v_{k-1}$。

由于 $v_k$ 的值是随机的，系统的状态 $x_k$ 也成为一个[随机过程](@entry_id:159502)。直接分析 $x_k$ 的每一个可能轨迹是困难的，但我们可以分析其**期望**（均值）行为 $\bar{x}_k = E[x_k]$。实际施加的输入 $v_k$ 可以表示为 $v_k = \gamma_k u_k + (1-\gamma_k)v_{k-1}$。取期望可得：
$$ E[v_k] = E[\gamma_k]u_k + (1-E[\gamma_k])E[v_{k-1}] = (1-p)u_k + pE[v_{k-1}] $$
系统状态的[期望值](@entry_id:153208)为 $\bar{x}_{k+1} = a\bar{x}_k + bE[v_k]$。利用这个关系，我们可以将 $E[v_k]$ 和 $E[v_{k-1}]$ 用 $\bar{x}$ 的序列来表示，经过代数推导，可以得到一个描述期望状态演化的确定性[差分方程](@entry_id:262177) [@problem_id:1573922]：
$$ \bar{x}_{k+1} = (a+p)\bar{x}_k - pa\bar{x}_{k-1} + b(1-p)u_k $$
这个结果非常重要。它表明，一个原本是一阶的系统，在存在随机[丢包](@entry_id:269936)和零阶保持策略的情况下，其**期望动态**变成了一个**二阶**系统。[丢包](@entry_id:269936)概率 $p$ 直接作为系数出现在新的动态方程中，影响着系统的极点（即特征根）和稳定性。这意味着随机[丢包](@entry_id:269936)不仅仅是引入噪声，它从根本上改变了系统平均行为的“骨架”。

值得注意的是，[随机过程](@entry_id:159502)的期望行为与任何一次确定的实现（sample path）可能存在差异。例如，以概率 $p=0.2$ 随机[丢包](@entry_id:269936)，和每5个包确定性地丢掉1个（平均[丢包](@entry_id:269936)率也是0.2），两者的系统状态演化是不同的。随机模型下的期望状态 $\bar{x}_k$ 是对所有可能[丢包](@entry_id:269936)序列的加权平均，而周期性[丢包](@entry_id:269936)模型下的状态 $x_k$ 则是该特定模式下的确定性响应 [@problem_id:1573936]。

#### 对状态估计的影响：[均方稳定性](@entry_id:165904)

[丢包](@entry_id:269936)不仅影响控制执行，也严重影响依赖于测量的[状态估计](@entry_id:169668)。考虑一个使用龙伯格（Luenberger）观测器来估计系统状态的场景。观测器在每个时刻 $k$ 接收测量值 $y_k$，但这个测量值可能会因为[丢包](@entry_id:269936)而丢失。

假设一个简单的离散系统 $x_{k+1} = ax_k$ 和测量 $y_k = x_k$。观测器的[更新方程](@entry_id:264802)通常为 $\hat{x}_{k+1} = a\hat{x}_k + L(y_k - \hat{x}_k)$。在存在[丢包](@entry_id:269936)的情况下，只有当测量包 $\gamma_k=1$ 时，校正项才能被应用。因此，[更新方程](@entry_id:264802)变为：
$$ \hat{x}_{k+1} = a\hat{x}_k + \gamma_k L(y_k - \hat{x}_k) $$
其中 $L$ 是[观测器增益](@entry_id:267562)。我们关心的是估计误差 $e_k = x_k - \hat{x}_k$ 的行为。误差动态可以推导为：
$$ e_{k+1} = x_{k+1} - \hat{x}_{k+1} = ax_k - (a\hat{x}_k + \gamma_k L(x_k - \hat{x}_k)) = (a - \gamma_k L)e_k $$
由于 $\gamma_k$ 是一个[随机变量](@entry_id:195330)，误差 $e_k$ 也是一个[随机过程](@entry_id:159502)。仅仅要求误差的期望 $E[e_k]$ 收敛到零是不够的，因为误差的[方差](@entry_id:200758)可能很大。一个更强的、在工程实践中更有意义的稳定性概念是**[均方稳定性](@entry_id:165904)**（Mean-Square Stability），即要求误差的二阶矩（均方值）收敛到零：$\lim_{k \to \infty} E[e_k^2] = 0$。

从误差动态方程 $e_{k+1} = (a - \gamma_k L)e_k$ 出发，两边平方后取期望，我们得到：
$$ E[e_{k+1}^2] = E[(a - \gamma_k L)^2 e_k^2] $$
由于在时刻 $k$ 的[丢包](@entry_id:269936)事件 $\gamma_k$ 与过去的误差 $e_k$ 是独立的，我们可以分离期望：
$$ E[e_{k+1}^2] = E[(a - \gamma_k L)^2] E[e_k^2] $$
要使 $E[e_k^2]$ 收敛到零，其收缩因子必须小于1，即 $E[(a - \gamma_k L)^2]  1$。

利用 $\gamma_k$ 是[伯努利分布](@entry_id:266933)的特性（取值为1的概率为 $p_{succ}$，取值为0的概率为 $1-p_{succ}$，这里我们用 $p_{succ}$ 代表成功概率以示清晰），我们可以展开这个期望：
$$ E[(a - \gamma_k L)^2] = p_{succ} \cdot (a-L)^2 + (1-p_{succ}) \cdot (a-0 \cdot L)^2 = p_{succ}(a-L)^2 + (1-p_{succ})a^2 $$
我们的目标是，对于给定的系统参数 $a$ 和[丢包](@entry_id:269936)概率 $1-p_{succ}$，是否存在一个[观测器增益](@entry_id:267562) $L$ 使得上式小于1。通过对上式关于 $L$ 求导并令其为零，可以找到使该表达式最小化的最优增益 $L^* = a$。将最优增益代回，得到该表达式的最小值为 $(1-p_{succ})a^2$。

因此，只有当这个最小值小于1时，才可能通过选择合适的增益 $L$ 来实现均方稳定，即：
$$ (1-p_{succ})a^2  1 \quad \Leftrightarrow \quad |a|  \frac{1}{\sqrt{1-p_{succ}}} $$
这个不等式 [@problem_id:1573897] 精辟地揭示了[系统可观测性](@entry_id:266228)与[网络可靠性](@entry_id:261559)之间的定量关系。它表明，即使一个开环系统本身是不稳定的（即 $|a|>1$），只要不稳定程度 $|a|$ 没有超过由[丢包](@entry_id:269936)率决定的上限 $1/\sqrt{1-p_{succ}}$，我们仍然可以通过设计观测器来稳定地估计其状态。反之，如果系统本身的不稳定性过于剧烈，或者网络[丢包](@entry_id:269936)率太高，那么无论如何设计线性观测器，都无法保证估计误差在均方意义下收敛。
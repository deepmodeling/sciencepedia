{"hands_on_practices": [{"introduction": "这项练习将球量-偏量分解直接应用于一个给定的应力状态。通过计算静水压力和主偏应力，你将练习分解的基本操作并验证其核心性质，这对于应用依赖于偏应力的塑性理论至关重要。[@problem_id:2911224]", "problem": "在小应变塑性理论中，一个各向同性金属由 Prandtl–Reuss 关系与 Levy–Mises 流动法则共同建模，该材料遵循偏应力第二不变量（J2）塑性理论。柯西应力张量 $\\boldsymbol{\\sigma}$ 可进行加法分解，分解为一个球形（静水）部分和一个偏量部分，即 $\\boldsymbol{\\sigma} = p\\,\\boldsymbol{I} + \\boldsymbol{s}$，其中 $p = \\tfrac{1}{3}\\operatorname{tr}(\\boldsymbol{\\sigma})$ 且 $\\operatorname{tr}(\\boldsymbol{s})=0$。从这些核心定义出发，仅利用二阶张量的迹、特征值和不变量的线性代数性质，推导主偏应力 $s_i$ 用主柯西应力 $\\sigma_i$ 表示的形式，并证明 $s_1 + s_2 + s_3 = 0$。然后，对于主应力为 $(\\sigma_1,\\sigma_2,\\sigma_3) = (200,100,50)\\,\\mathrm{MPa}$ 的应力状态，明确计算主偏应力 $(s_1,s_2,s_3)$。\n\n以 $\\mathrm{MPa}$ 为单位，将最终的三元组 $(s_1,s_2,s_3)$ 以精确分数形式报告；不要四舍五入。最终答案必须以单行矩阵的形式呈现。", "solution": "问题陈述经过审查，被认为是有效的。它具有科学依据、适定、客观，并包含推导所需量的所有必要信息。这是一个连续介质力学中的标准练习，具体涉及柯西应力张量的分解。\n\n分析从柯西应力张量 $\\boldsymbol{\\sigma}$ 的基本加法分解开始，它被分解为一个球形（静水）部分和一个偏量部分。此关系由下式给出：\n$$\n\\boldsymbol{\\sigma} = p\\,\\boldsymbol{I} + \\boldsymbol{s}\n$$\n其中 $\\boldsymbol{s}$ 是偏应力张量，$\\boldsymbol{I}$ 是二阶单位张量，$p$ 是静水压力。静水压力 $p$ 定义为应力张量迹的三分之一：\n$$\np = \\frac{1}{3}\\operatorname{tr}(\\boldsymbol{\\sigma})\n$$\n张量的迹是一个不变量，意味着它与坐标系无关。在任何坐标系中，$\\operatorname{tr}(\\boldsymbol{\\sigma}) = \\sigma_{11} + \\sigma_{22} + \\sigma_{33}$。在主坐标系中，应力张量的非对角分量为零，对角分量为主应力 $\\sigma_1$、$\\sigma_2$ 和 $\\sigma_3$。因此，迹是主应力之和：\n$$\n\\operatorname{tr}(\\boldsymbol{\\sigma}) = \\sigma_1 + \\sigma_2 + \\sigma_3\n$$\n将此式代入静水压力的定义中，得到：\n$$\np = \\frac{1}{3}(\\sigma_1 + \\sigma_2 + \\sigma_3)\n$$\n这个量 $p$ 也被称为平均应力。\n\n为了求得偏应力张量 $\\boldsymbol{s}$，我们重新整理初始的分解式：\n$$\n\\boldsymbol{s} = \\boldsymbol{\\sigma} - p\\,\\boldsymbol{I}\n$$\n对于各向同性材料，应力张量 $\\boldsymbol{\\sigma}$ 和偏应力张量 $\\boldsymbol{s}$ 的主方向是共轴的。因此，我们可以在主坐标系中写出这个张量方程，其中 $\\boldsymbol{\\sigma}$ 和 $\\boldsymbol{s}$ 分别由它们的主值 $(s_1, s_2, s_3)$ 和 $(\\sigma_1, \\sigma_2, \\sigma_3)$ 构成的对角矩阵表示。该张量方程变成了一组关于主分量的三个标量方程：\n$$\ns_1 = \\sigma_1 - p\n$$\n$$\ns_2 = \\sigma_2 - p\n$$\n$$\ns_3 = \\sigma_3 - p\n$$\n这就是主偏应力 $s_i$ 用主柯西应力 $\\sigma_i$ 和平均应力 $p$ 表示的一般形式。用 $\\sigma_i$ 的表达式替换 $p$，得到显式形式：\n$$\ns_1 = \\sigma_1 - \\frac{1}{3}(\\sigma_1 + \\sigma_2 + \\sigma_3) = \\frac{2\\sigma_1 - \\sigma_2 - \\sigma_3}{3}\n$$\n$$\ns_2 = \\sigma_2 - \\frac{1}{3}(\\sigma_1 + \\sigma_2 + \\sigma_3) = \\frac{2\\sigma_2 - \\sigma_1 - \\sigma_3}{3}\n$$\n$$\ns_3 = \\sigma_3 - \\frac{1}{3}(\\sigma_1 + \\sigma_2 + \\sigma_3) = \\frac{2\\sigma_3 - \\sigma_1 - \\sigma_2}{3}\n$$\n这就完成了推导的第一部分。\n\n接下来，我们必须证明主偏应力之和为零。这等价于证明偏应力张量的第一不变量（迹）为零，即 $\\operatorname{tr}(\\boldsymbol{s}) = s_1 + s_2 + s_3 = 0$。使用关系式 $s_i = \\sigma_i - p$，我们将主偏应力相加：\n$$\ns_1 + s_2 + s_3 = (\\sigma_1 - p) + (\\sigma_2 - p) + (\\sigma_3 - p)\n$$\n$$\ns_1 + s_2 + s_3 = (\\sigma_1 + \\sigma_2 + \\sigma_3) - 3p\n$$\n现在，我们代入 $p$ 的定义：\n$$\ns_1 + s_2 + s_3 = (\\sigma_1 + \\sigma_2 + \\sigma_3) - 3 \\left( \\frac{1}{3}(\\sigma_1 + \\sigma_2 + \\sigma_3) \\right)\n$$\n$$\ns_1 + s_2 + s_3 = (\\sigma_1 + \\sigma_2 + \\sigma_3) - (\\sigma_1 + \\sigma_2 + \\sigma_3) = 0\n$$\n证明完成。这个结果是偏应力张的一个定义性属性。\n\n最后，我们将这些结果应用于给定的特定应力状态。主柯西应力为 $(\\sigma_1, \\sigma_2, \\sigma_3) = (200, 100, 50)\\,\\mathrm{MPa}$。\n首先，我们计算静水压力 $p$：\n$$\np = \\frac{1}{3}(200 + 100 + 50)\\,\\mathrm{MPa} = \\frac{350}{3}\\,\\mathrm{MPa}\n$$\n现在我们计算主偏应力 $s_i = \\sigma_i - p$。题目要求使用精确分数。\n$$\ns_1 = 200 - \\frac{350}{3} = \\frac{600}{3} - \\frac{350}{3} = \\frac{250}{3}\\,\\mathrm{MPa}\n$$\n$$\ns_2 = 100 - \\frac{350}{3} = \\frac{300}{3} - \\frac{350}{3} = -\\frac{50}{3}\\,\\mathrm{MPa}\n$$\n$$\ns_3 = 50 - \\frac{350}{3} = \\frac{150}{3} - \\frac{350}{3} = -\\frac{200}{3}\\,\\mathrm{MPa}\n$$\n作为验证，我们检查它们的和是否为零：\n$$\ns_1 + s_2 + s_3 = \\frac{250}{3} - \\frac{50}{3} - \\frac{200}{3} = \\frac{250 - 50 - 200}{3} = \\frac{0}{3} = 0\n$$\n计算结果是一致的。所得的主偏应力为 $(\\frac{250}{3}, -\\frac{50}{3}, -\\frac{200}{3})\\,\\mathrm{MPa}$。", "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{250}{3} & -\\frac{50}{3} & -\\frac{200}{3} \\end{pmatrix}}\n$$", "id": "2911224"}, {"introduction": "从手动计算到自动化计算，这项练习要求你将张量分解实现为一个通用算法。通过编写代码并进行严格的数值检验，你将学会如何将理论概念转化为现代固体力学中稳健的计算工具。[@problem_id:2686692]", "problem": "给定三维实二阶张量的向量空间，该空间等同于实 $3 \\times 3$ 矩阵空间。在该空间上定义 Frobenius 内积 $A : B = \\operatorname{tr}(A^{\\mathsf{T}} B)$，其中 $\\operatorname{tr}(\\cdot)$ 表示迹，$(\\cdot)^{\\mathsf{T}}$ 表示转置。在连续介质力学（固体力学）中，将一个普遍的二阶张量分解为一个球形（静水压）部分和一个偏（等容）部分是基本操作。球形子空间是集合 $\\mathcal{S} = \\{ s I \\mid s \\in \\mathbb{R} \\}$，其中 $I$ 是 $3 \\times 3$ 单位矩阵；偏子空间是集合 $\\mathcal{D} = \\{ A \\in \\mathbb{R}^{3 \\times 3} \\mid \\operatorname{tr}(A) = 0 \\}$。此分解必须基于线性代数和固体力学不变量的第一性原理，而非使用简便公式。\n\n任务。从 Frobenius 内积以及子空间 $\\mathcal{S}$ 和 $\\mathcal{D}$ 的定义出发，通过正交投影论证，推导一个算法，该算法对于任意 $3 \\times 3$ 实张量 $A$，计算其偏部分 $\\operatorname{dev}(A) \\in \\mathcal{D}$ 和球形部分 $\\operatorname{sph}(A) \\in \\mathcal{S}$。然后，在一个程序中实现该算法，程序需要：\n- 定义一个函数，对于一个普遍的 $3 \\times 3$ 实张量 $A$，返回其偏部分 $\\operatorname{dev}(A)$。\n- 定义一个函数，对于一个普遍的 $3 \\times 3$ 实张量 $A$，返回其球形部分 $\\operatorname{sph}(A)$。\n- 对于下面的每个测试用例，计算残差：\n  - $r_1(A) = \\left|\\operatorname{tr}\\big(\\operatorname{dev}(A)\\big)\\right|$，\n  - $r_2(A) = \\left\\| A - \\operatorname{dev}(A) - \\operatorname{sph}(A) \\right\\|_F$，其中 $\\|\\cdot\\|_F$ 表示 Frobenius 范数。\n- 使用一个与机器精度和输入大小成比例的容差：\n  - 设 $\\varepsilon$ 为 IEEE $754$ 双精度的机器 epsilon，并定义 $\\tau(A) = c \\, \\varepsilon \\, \\max\\!\\big(1, \\|A\\|_F\\big)$，其中 $c = 100$。\n- 对每个测试用例，生成一个布尔值，指示 $r_1(A) \\le \\tau(A)$ 和 $r_2(A) \\le \\tau(A)$ 这两个检查是否都成立。\n\n测试套件。使用以下七个 $3 \\times 3$ 实矩阵（每个指定的条目都是一个实标量）：\n- 案例 1（零张量）：$A_1 = \\begin{bmatrix} 0 & 0 & 0 \\\\ 0 & 0 & 0 \\\\ 0 & 0 & 0 \\end{bmatrix}$。\n- 案例 2（纯球形）：$A_2 = \\begin{bmatrix} 5.5 & 0 & 0 \\\\ 0 & 5.5 & 0 \\\\ 0 & 0 & 5.5 \\end{bmatrix}$。\n- 案例 3（纯偏对角）：$A_3 = \\begin{bmatrix} 2 & 0 & 0 \\\\ 0 & -1 & 0 \\\\ 0 & 0 & -1 \\end{bmatrix}$。\n- 案例 4（一般对称）：$A_4 = \\begin{bmatrix} 3.2 & 1.1 & -0.7 \\\\ 1.1 & -4.5 & 2.3 \\\\ -0.7 & 2.3 & 0.8 \\end{bmatrix}$。\n- 案例 5（一般非对称）：$A_5 = \\begin{bmatrix} 0.3 & -1.2 & 4 \\\\ 2.5 & 5.1 & -3.3 \\\\ -0.9 & 7.7 & 2.2 \\end{bmatrix}$。\n- 案例 6（大数值近似球形）：$A_6 = \\begin{bmatrix} 10^{8} + 2 & 10^{-4} & 0 \\\\ 10^{-4} & 10^{8} - 1 & 2 \\cdot 10^{-4} \\\\ 0 & 2 \\cdot 10^{-4} & 10^{8} - 1 \\end{bmatrix}$。\n- 案例 7（小数值近似偏）：$A_7 = \\begin{bmatrix} 10^{-12} & 2 \\cdot 10^{-13} & -3 \\cdot 10^{-13} \\\\ -2 \\cdot 10^{-13} & -5 \\cdot 10^{-13} & 4 \\cdot 10^{-13} \\\\ 1 \\cdot 10^{-13} & 6 \\cdot 10^{-13} & -5 \\cdot 10^{-13} \\end{bmatrix}$。\n\n最终输出格式。您的程序应生成单行输出，包含一个 Python 风格的 7 个布尔值的列表，每个布尔值对应一个测试用例，按给定顺序排列。如果该用例的两个检查都通过，则布尔值为 $\\texttt{True}$，否则为 $\\texttt{False}$。该行必须严格遵循 $[\\texttt{b}_1,\\texttt{b}_2,\\dots,\\texttt{b}_7]$ 的格式，无任何额外文本。\n\n无需读取任何输入。不涉及角度或物理单位。所有计算都应以双精度进行。", "solution": "问题陈述经评估是有效的。它在科学上基于线性代数和连续介质力学的原理，信息完备，问题良定，并以客观的数学语言表述。因此，我们可以着手求解。\n\n该问题要求推导并实现一个算法，用于将一个普遍的二阶张量 $A \\in \\mathbb{R}^{3 \\times 3}$ 分解为其球形部分 $\\operatorname{sph}(A)$ 和偏部分 $\\operatorname{dev}(A)$。该分解必须在配备了 Frobenius 内积 $A : B = \\operatorname{tr}(A^{\\mathsf{T}} B)$ 的 $3 \\times 3$ 实矩阵向量空间内，利用正交投影论证从第一性原理推导得出。\n\n一个普遍的张量 $A$ 将被唯一地分解为和式 $A = A_s + A_d$，其中 $A_s = \\operatorname{sph}(A)$ 属于球形子空间 $\\mathcal{S} = \\{ s I \\mid s \\in \\mathbb{R} \\}$，$A_d = \\operatorname{dev}(A)$ 属于偏子空间 $\\mathcal{D} = \\{ M \\in \\mathbb{R}^{3 \\times 3} \\mid \\operatorname{tr}(M) = 0 \\}$。这种分解是一种正交分解，意味着子空间 $\\mathcal{S}$ 和 $\\mathcal{D}$ 在向量空间 $V = \\mathbb{R}^{3 \\times 3}$ 中必须是正交补。\n\n首先，我们必须验证 $\\mathcal{S}$ 和 $\\mathcal{D}$ 是正交子空间。设 $A_s$ 是 $\\mathcal{S}$ 的任意元素，$A_d$ 是 $\\mathcal{D}$ 的任意元素。根据定义，我们可以写出 $A_s = sI$，其中 $s \\in \\mathbb{R}$ 是某个标量，$I$ 是 $3 \\times 3$ 单位矩阵。同样根据定义，$\\operatorname{tr}(A_d) = 0$。它们的 Frobenius 内积为：\n$$\nA_s : A_d = \\operatorname{tr}(A_s^{\\mathsf{T}} A_d) = \\operatorname{tr}((sI)^{\\mathsf{T}} A_d) = \\operatorname{tr}(sI A_d) = s \\operatorname{tr}(A_d)\n$$\n由于 $\\operatorname{tr}(A_d) = 0$，内积为 $A_s : A_d = s \\cdot 0 = 0$。这证实了 $\\mathcal{S}$ 中的每个元素都与 $\\mathcal{D}$ 中的每个元素正交，因此这两个子空间是正交的，即 $\\mathcal{S} \\perp \\mathcal{D}$。\n\n接下来，我们证明 $V = \\mathcal{S} \\oplus \\mathcal{D}$。向量空间 $V = \\mathbb{R}^{3 \\times 3}$ 的维度是 $\\dim(V) = 3 \\times 3 = 9$。球形子空间 $\\mathcal{S}$ 由单个非零张量 $I$ 张成，因此其维度为 $\\dim(\\mathcal{S}) = 1$。偏子空间 $\\mathcal{D}$ 是线性映射（泛函）$\\operatorname{tr}: V \\to \\mathbb{R}$ 的核。根据秩-零度定理，$\\dim(V) = \\dim(\\operatorname{ker}(\\operatorname{tr})) + \\dim(\\operatorname{im}(\\operatorname{tr}))$。由于迹可以取任何实数值，迹算子的像是整个 $\\mathbb{R}$，所以 $\\dim(\\operatorname{im}(\\operatorname{tr})) = 1$。因此，$\\dim(\\mathcal{D}) = \\dim(\\operatorname{ker}(\\operatorname{tr})) = \\dim(V) - 1 = 9 - 1 = 8$。由于 $\\dim(\\mathcal{S}) + \\dim(\\mathcal{D}) = 1 + 8 = 9 = \\dim(V)$ 且子空间是正交的，它们是正交补，并且 $V$ 可以表示为它们的直和。这保证了任何张量 $A \\in V$ 都具有唯一的正交分解 $A = A_s + A_d$。\n\n分量 $A_s = \\operatorname{sph}(A)$ 是 $A$ 在子空间 $\\mathcal{S}$ 上的正交投影。为了计算这个投影，我们首先为 $\\mathcal{S}$ 构建一个标准正交基。$\\mathcal{S}$ 的一个基是 $\\{I\\}$。我们相对于 Frobenius 范数 $\\|\\cdot\\|_F$ 对这个基向量进行归一化。$I$ 的范数平方是：\n$$\n\\|I\\|_F^2 = I : I = \\operatorname{tr}(I^{\\mathsf{T}} I) = \\operatorname{tr}(I^2) = \\operatorname{tr}(I) = 1+1+1 = 3\n$$\n因此，$\\|I\\|_F = \\sqrt{3}$。$\\mathcal{S}$ 的一个标准正交基是 $\\{E_s\\}$，其中 $E_s = \\frac{1}{\\sqrt{3}}I$。$A$ 在 $\\mathcal{S}$ 上的正交投影由下式给出：\n$$\n\\operatorname{sph}(A) = \\operatorname{proj}_{\\mathcal{S}}(A) = (A : E_s) E_s = \\left(A : \\frac{1}{\\sqrt{3}}I\\right) \\frac{1}{\\sqrt{3}}I = \\frac{1}{3} (A : I) I\n$$\n内积 $A:I$ 计算如下：\n$$\nA : I = \\operatorname{tr}(A^{\\mathsf{T}} I) = \\operatorname{tr}(A^{\\mathsf{T}}) = \\operatorname{tr}(A)\n$$\n代入此结果，得到张量球形部分的公式：\n$$\n\\operatorname{sph}(A) = \\frac{1}{3} \\operatorname{tr}(A) I\n$$\n系数 $\\frac{1}{3} \\operatorname{tr}(A)$ 是平均法向分量，在应力张量中通常与静水压力相关。\n\n由于 $A = \\operatorname{sph}(A) + \\operatorname{dev}(A)$ 且分解是正交的，偏部分 $\\operatorname{dev}(A)$ 就是简单的剩余部分：\n$$\n\\operatorname{dev}(A) = A - \\operatorname{sph}(A) = A - \\frac{1}{3} \\operatorname{tr}(A) I\n$$\n$\\operatorname{dev}(A)$ 是 $A$ 在子空间 $\\mathcal{D}$ 上的正交投影。我们必须通过检查其迹是否为零来验证此结果确实属于 $\\mathcal{D}$：\n$$\n\\operatorname{tr}(\\operatorname{dev}(A)) = \\operatorname{tr}\\left(A - \\frac{1}{3} \\operatorname{tr}(A) I\\right) = \\operatorname{tr}(A) - \\operatorname{tr}\\left(\\frac{1}{3} \\operatorname{tr}(A) I\\right)\n$$\n利用迹算子的线性性质：\n$$\n\\operatorname{tr}(\\operatorname{dev}(A)) = \\operatorname{tr}(A) - \\frac{1}{3} \\operatorname{tr}(A) \\operatorname{tr}(I) = \\operatorname{tr}(A) - \\frac{1}{3} \\operatorname{tr}(A) \\cdot 3 = \\operatorname{tr}(A) - \\operatorname{tr}(A) = 0\n$$\n推导完成，且与第一性原理一致。\n\n用于实现的算法如下：\n1.  对于给定的 $3 \\times 3$ 张量 $A$，计算其迹 $\\operatorname{tr}(A)$。\n2.  球形部分为 $\\operatorname{sph}(A) = (\\frac{1}{3} \\operatorname{tr}(A)) I$。\n3.  偏部分为 $\\operatorname{dev}(A) = A - \\operatorname{sph}(A)$。\n4.  计算残差 $r_1(A)$ 和 $r_2(A)$，以在一个与机器精度和输入张量范数成比例的数值容差 $\\tau(A)$ 内，验证性质 $\\operatorname{tr}(\\operatorname{dev}(A)) = 0$ 和 $A = \\operatorname{sph}(A) + \\operatorname{dev}(A)$。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the tensor decomposition problem for a suite of test cases.\n    \"\"\"\n\n    # Define the 3x3 identity matrix.\n    I = np.identity(3)\n\n    # Machine epsilon for IEEE 754 double precision.\n    eps = np.finfo(float).eps\n\n    def sph(A):\n        \"\"\"\n        Computes the spherical part of a 3x3 tensor A.\n        sph(A) = (1/3) * tr(A) * I\n        \"\"\"\n        if not isinstance(A, np.ndarray) or A.shape != (3, 3):\n            raise TypeError(\"Input must be a 3x3 numpy array.\")\n        \n        trace_A = np.trace(A)\n        return (trace_A / 3.0) * I\n\n    def dev(A):\n        \"\"\"\n        Computes the deviatoric part of a 3x3 tensor A.\n        dev(A) = A - sph(A)\n        \"\"\"\n        if not isinstance(A, np.ndarray) or A.shape != (3, 3):\n            raise TypeError(\"Input must be a 3x3 numpy array.\")\n\n        return A - sph(A)\n\n    test_cases = [\n        # Case 1 (zero tensor)\n        np.array([[0.0, 0.0, 0.0], [0.0, 0.0, 0.0], [0.0, 0.0, 0.0]]),\n        # Case 2 (purely spherical)\n        np.array([[5.5, 0.0, 0.0], [0.0, 5.5, 0.0], [0.0, 0.0, 5.5]]),\n        # Case 3 (purely deviatoric diagonal)\n        np.array([[2.0, 0.0, 0.0], [0.0, -1.0, 0.0], [0.0, 0.0, -1.0]]),\n        # Case 4 (general symmetric)\n        np.array([[3.2, 1.1, -0.7], [1.1, -4.5, 2.3], [-0.7, 2.3, 0.8]]),\n        # Case 5 (general non-symmetric)\n        np.array([[0.3, -1.2, 4.0], [2.5, 5.1, -3.3], [-0.9, 7.7, 2.2]]),\n        # Case 6 (large magnitude nearly spherical)\n        np.array([[1e8 + 2.0, 1e-4, 0.0], [1e-4, 1e8 - 1.0, 2e-4], [0.0, 2e-4, 1e8 - 1.0]]),\n        # Case 7 (small magnitude nearly deviatoric)\n        np.array([[1e-12, 2e-13, -3e-13], [-2e-13, -5e-13, 4e-13], [1e-13, 6e-13, -5e-13]])\n    ]\n\n    results = []\n    for A in test_cases:\n        # Compute spherical and deviatoric parts.\n        A_sph = sph(A)\n        A_dev = dev(A)\n        \n        # Calculate the tolerance tau(A) = c * eps * max(1, ||A||_F).\n        c = 100.0\n        norm_A_F = np.linalg.norm(A, 'fro')\n        tau = c * eps * np.maximum(1.0, norm_A_F)\n\n        # Calculate residuals.\n        # r1(A) = |tr(dev(A))|\n        r1 = np.abs(np.trace(A_dev))\n        \n        # r2(A) = ||A - dev(A) - sph(A)||_F\n        # This residual checks the self-consistency of the decomposition.\n        # Due to how dev(A) is defined, A - dev(A) - sph(A) = A - (A - sph(A)) - sph(A) = 0.\n        # The numerical error will be extremely small, related to floating-point representation.\n        residual_matrix = A - A_dev - A_sph\n        r2 = np.linalg.norm(residual_matrix, 'fro')\n\n        # Check if both residuals are within the tolerance.\n        check1 = r1 = tau\n        check2 = r2 = tau\n        \n        results.append(check1 and check2)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, [r.item() for r in results]))}]\".replace(\"True\", \"True\").replace(\"False\", \"False\"))\n\nsolve()\n```", "id": "2686692"}, {"introduction": "在计算力学中，对称张量常以Voigt向量表示。这项练习将引导你构建一个$6 \\times 6$的偏量投影矩阵，它直接作用于这些Voigt向量，从而将抽象的张量运算转化为有限元分析等应用中的高效矩阵计算。[@problem_id:2686705]", "problem": "设 $\\mathbf{A}$ 为 $\\mathbb{R}^{3 \\times 3}$ 中的一个对称二阶张量。球量-偏量分解将 $\\mathbf{A}$ 分解为其球量部分和偏量部分。偏量部分是 $\\mathbf{A}$ 的无迹分量。使用工程 Voigt 记法，该记法通过以下方式将对称张量 $\\mathbf{A}$ 映射到一个向量 $\\mathbf{a} \\in \\mathbb{R}^{6}$：\n$$\n\\mathbf{a} = \\begin{bmatrix} A_{11} \\\\ A_{22} \\\\ A_{33} \\\\ 2A_{23} \\\\ 2A_{13} \\\\ 2A_{12} \\end{bmatrix}.\n$$\n构建偏量投影算子 $\\mathbb{P}^{\\text{dev}}$ 的 $6 \\times 6$ 矩阵，使得对于任意具有 Voigt 向量 $\\mathbf{a}$ 的对称张量 $\\mathbf{A}$，其偏量部分的 Voigt 向量为 $\\mathbf{a}^{\\text{dev}} = \\mathbb{P}^{\\text{dev}} \\mathbf{a}$。你的构建应仅基于以下基本定义：\n- $\\mathbf{A}$ 的迹为 $\\mathrm{tr}(\\mathbf{A}) = A_{11} + A_{22} + A_{33}$。\n- 偏量部分的定义为 $\\mathrm{dev}(\\mathbf{A}) = \\mathbf{A} - \\dfrac{1}{3}\\mathrm{tr}(\\mathbf{A})\\,\\mathbf{I}$，其中 $\\mathbf{I}$ 是单位张量。\n不要使用任何关于 $\\mathbb{P}^{\\text{dev}}$ 的预先推导的公式。\n\n构建 $\\mathbb{P}^{\\text{dev}}$ 后，请数值验证其幂等性和对称性，并验证其在几个对称张量上的作用。使用上述工程 Voigt 映射，并在 $3 \\times 3$ 张量及其 $6$ 维向量表示之间进行一致的来回转换。\n\n对矩阵和张量使用 Frobenius 范数，对向量使用欧几里得范数。所有容差必须视为无量纲阈值。\n\n你的程序必须实现以下测试套件，并对每个项目使用指定的数值容差返回一个布尔结果：\n\n- 测试 1 (幂等性): 验证 $\\|\\mathbb{P}^{\\text{dev}}\\mathbb{P}^{\\text{dev}} - \\mathbb{P}^{\\text{dev}}\\|_F \\le \\varepsilon_{\\text{mat}}$，其中 $\\varepsilon_{\\text{mat}} = 10^{-12}$。\n\n- 测试 2 (对称性): 验证 $\\|\\mathbb{P}^{\\text{dev}} - (\\mathbb{P}^{\\text{dev}})^{\\mathsf{T}}\\|_F \\le \\varepsilon_{\\text{mat}}$，其中 $\\varepsilon_{\\text{mat}} = 10^{-12}$。\n\n- 测试 3 (随机对称张量的无迹性): 通过取具有独立标准正态分布元素的 $\\mathbf{R}$ 并设置 $\\mathbf{A} = (\\mathbf{R} + \\mathbf{R}^{\\mathsf{T}})/2$ 来生成 $N = 10$ 个随机对称张量。对每个张量，通过 $\\mathbb{P}^{\\text{dev}}$ 计算 $\\mathbf{A}^{\\text{dev}}$，将其转换回 $3 \\times 3$ 张量，并验证 $N$ 个样本中 $|\\mathrm{tr}(\\mathbf{A}^{\\text{dev}})|$ 的最大值小于 $\\varepsilon_{\\text{tr}} = 10^{-10}$。使用固定的随机种子 $s = 7$。\n\n- 测试 4 (纯球量输入): 对于 $\\mathbf{A} = p\\,\\mathbf{I}$ 且 $p = 3.7$，验证 $\\|\\mathbf{a}^{\\text{dev}}\\|_2 \\le \\varepsilon_{\\text{vec}} = 10^{-12}$。\n\n- 测试 5 (纯偏量输入，法向分量): 对于 $\\mathbf{A} = \\mathrm{diag}(2,-1,-1)$，验证 $\\|\\mathbf{a}^{\\text{dev}} - \\mathbf{a}\\|_2 \\le \\varepsilon_{\\text{vec}}$，其中 $\\varepsilon_{\\text{vec}} = 10^{-12}$。\n\n- 测试 6 (纯剪切输入): 对于一个仅含剪切的张量，其中 $A_{12} = A_{21} = \\gamma/2$ 且所有其他分量为零，$\\gamma = 1.234$，验证 $\\|\\mathbf{a}^{\\text{dev}} - \\mathbf{a}\\|_2 \\le \\varepsilon_{\\text{vec}}$，其中 $\\varepsilon_{\\text{vec}} = 10^{-12}$。\n\n- 测试 7 (在随机对称张量上与定义的一致性): 使用种子 $s = 123$，按照测试 3 的方式生成一个随机对称张量 $\\mathbf{A}$，并验证从 $\\mathbf{a}^{\\text{dev}} = \\mathbb{P}^{\\text{dev}}\\mathbf{a}$ 获得的 $3 \\times 3$ 张量在 Frobenius 范数容差 $\\varepsilon_{\\text{ten}} = 10^{-12}$ 内与 $\\mathrm{dev}(\\mathbf{A}) = \\mathbf{A} - \\dfrac{1}{3}\\mathrm{tr}(\\mathbf{A})\\,\\mathbf{I}$ 相匹配。\n\n你的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，\"[result1,result2,result3,result4,result5,result6,result7]\"），每个结果是按顺序对应上述测试的布尔值。", "solution": "该问题要求在 $6 \\times 6$ Voigt 表示下，仅基于基本定义构建偏量投影矩阵 $\\mathbb{P}^{\\text{dev}}$，然后进行一系列数值验证。\n\n此任务的基础在于，将对称张量 $\\mathbf{A} \\in \\mathbb{R}^{3 \\times 3}$ 的分量与其偏量部分 $\\mathbf{A}^{\\text{dev}}$ 关联起来，然后将这种关系转换到指定的工程 Voigt 记法中。\n\n一个对称张量 $\\mathbf{A}$ 由其分量给出：\n$$\n\\mathbf{A} = \\begin{bmatrix} A_{11}  A_{12}  A_{13} \\\\ A_{21}  A_{22}  A_{23} \\\\ A_{31}  A_{32}  A_{33} \\end{bmatrix}, \\quad \\text{其中 } A_{ij} = A_{ji}.\n$$\n问题将其在工程 Voigt 记法中的表示定义为一个向量 $\\mathbf{a} \\in \\mathbb{R}^6$：\n$$\n\\mathbf{a} = \\begin{bmatrix} a_1 \\\\ a_2 \\\\ a_3 \\\\ a_4 \\\\ a_5 \\\\ a_6 \\end{bmatrix} = \\begin{bmatrix} A_{11} \\\\ A_{22} \\\\ A_{33} \\\\ 2A_{23} \\\\ 2A_{13} \\\\ 2A_{12} \\end{bmatrix}.\n$$\n$\\mathbf{A}$ 的偏量部分定义为 $\\mathbf{A}^{\\text{dev}} = \\mathbf{A} - \\frac{1}{3}\\mathrm{tr}(\\mathbf{A})\\,\\mathbf{I}$，其中 $\\mathbf{I}$ 是二阶单位张量，且 $\\mathrm{tr}(\\mathbf{A}) = A_{11} + A_{22} + A_{33}$。这可以使用克罗内克（Kronecker）$\\delta$ 符号 $\\delta_{ij}$ 按分量写出：\n$$\nA_{ij}^{\\text{dev}} = A_{ij} - \\frac{1}{3}\\left(A_{11} + A_{22} + A_{33}\\right)\\delta_{ij}.\n$$\n我们的目标是找到矩阵 $\\mathbb{P}^{\\text{dev}}$，使得 $\\mathbf{a}^{\\text{dev}} = \\mathbb{P}^{\\text{dev}}\\mathbf{a}$，其中 $\\mathbf{a}^{\\text{dev}}$ 是 $\\mathbf{A}^{\\text{dev}}$ 的 Voigt 表示。\n\n我们通过将 $\\mathbf{a}^{\\text{dev}}$ 的每个分量（记为 $a_k^{\\text{dev}}$）用 $\\mathbf{a}$ 的分量（记为 $a_k$）表示来推导该矩阵。\n\n首先，考虑法向分量（$k=1, 2, 3$）：\n$\\mathbf{a}^{\\text{dev}}$ 的第一个分量是 $a_1^{\\text{dev}} = A_{11}^{\\text{dev}}$。使用 $i=j=1$ 的定义：\n$$\nA_{11}^{\\text{dev}} = A_{11} - \\frac{1}{3}\\left(A_{11} + A_{22} + A_{33}\\right)\\delta_{11} = A_{11} - \\frac{1}{3}\\left(A_{11} + A_{22} + A_{33}\\right).\n$$\n代入 Voigt 分量 $a_1=A_{11}$、$a_2=A_{22}$ 和 $a_3=A_{33}$：\n$$\na_1^{\\text{dev}} = a_1 - \\frac{1}{3}\\left(a_1 + a_2 + a_3\\right) = \\frac{2}{3}a_1 - \\frac{1}{3}a_2 - \\frac{1}{3}a_3.\n$$\n根据对称性，$a_2^{\\text{dev}} = A_{22}^{\\text{dev}}$ 和 $a_3^{\\text{dev}} = A_{33}^{\\text{dev}}$ 的表达式是类似的：\n$$\na_2^{\\text{dev}} = a_2 - \\frac{1}{3}\\left(a_1 + a_2 + a_3\\right) = -\\frac{1}{3}a_1 + \\frac{2}{3}a_2 - \\frac{1}{3}a_3.\n$$\n$$\na_3^{\\text{dev}} = a_3 - \\frac{1}{3}\\left(a_1 + a_2 + a_3\\right) = -\\frac{1}{3}a_1 - \\frac{1}{3}a_2 + \\frac{2}{3}a_3.\n$$\n这三个方程定义了矩阵 $\\mathbb{P}^{\\text{dev}}$ 的前三行。具体来说，它们确定了左上角的 $3 \\times 3$ 子块，而与剪切分量（$a_4, a_5, a_6$）的耦合为零。\n\n接下来，考虑剪切分量（$k=4, 5, 6$）：\n$\\mathbf{a}^{\\text{dev}}$ 的第四个分量是 $a_4^{\\text{dev}} = 2A_{23}^{\\text{dev}}$。使用 $i=2, j=3$ 的定义：\n$$\nA_{23}^{\\text{dev}} = A_{23} - \\frac{1}{3}\\left(A_{11} + A_{22} + A_{33}\\right)\\delta_{23}.\n$$\n由于 $i \\neq j$，克罗内克 $\\delta_{23}=0$。因此，$A_{23}^{\\text{dev}} = A_{23}$。\n那么 Voigt 分量为：\n$a_4^{\\text{dev}} = 2A_{23}^{\\text{dev}} = 2A_{23}$。\n根据原始 Voigt 向量的定义，$a_4 = 2A_{23}$。因此，\n$$\na_4^{\\text{dev}} = a_4.\n$$\n类似地，对于 $a_5^{\\text{dev}} = 2A_{13}^{\\text{dev}}$ 和 $a_6^{\\text{dev}} = 2A_{12}^{\\text{dev}}$，我们得到：\n$$\na_5^{\\text{dev}} = a_5.\n$$\n$$\na_6^{\\text{dev}} = a_6.\n$$\n这三个方程表明 Voigt 向量的剪切分量不受偏量投影的影响。这意味着从法向分量（$a_1, a_2, a_3$）到剪切分量（$a_4, a_5, a_6$）没有耦合，并且对剪切分量的变换就是单位变换。\n\n综合这些结果，线性变换 $\\mathbf{a}^{\\text{dev}} = \\mathbb{P}^{\\text{dev}}\\mathbf{a}$ 由矩阵 $\\mathbb{P}^{\\text{dev}}$ 描述：\n$$\n\\begin{bmatrix}\na_1^{\\text{dev}} \\\\\na_2^{\\text{dev}} \\\\\na_3^{\\text{dev}} \\\\\na_4^{\\text{dev}} \\\\\na_5^{\\text{dev}} \\\\\na_6^{\\text{dev}}\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n 2/3  -1/3  -1/3  0  0  0 \\\\\n-1/3   2/3  -1/3  0  0  0 \\\\\n-1/3  -1/3   2/3  0  0  0 \\\\\n 0  0  0  1  0  0 \\\\\n 0  0  0  0  1  0 \\\\\n 0  0  0  0  0  1\n\\end{bmatrix}\n\\begin{bmatrix}\na_1 \\\\\na_2 \\\\\na_3 \\\\\na_4 \\\\\na_5 \\\\\na_6\n\\end{bmatrix}.\n$$\n这就是在工程 Voigt 记法下，严格从给定定义推导出的偏量投影算子 $\\mathbb{P}^{\\text{dev}}$ 的显式矩阵。该矩阵将被实现并接受指定的数值测试，以验证其性质和正确性。这些测试将需要辅助函数，以根据给定的映射在 $3 \\times 3$ 张量表示和 $6 \\times 1$ Voigt 向量表示之间进行转换。数值验证确认了该投影算子的理论性质，例如幂等性（$\\mathbb{P}\\mathbb{P}=\\mathbb{P}$）和对称性（$\\mathbb{P}=\\mathbb{P}^{\\mathsf{T}}$），以及其在各种类型张量上的正确作用。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Constructs the deviatoric projector matrix and performs a suite of numerical tests.\n    \"\"\"\n    \n    # Construct the deviatoric projector matrix P_dev\n    P_dev = np.zeros((6, 6))\n    \n    # Upper-left 3x3 block for normal components\n    P_dev[0:3, 0:3] = (1.0 / 3.0) * np.array([\n        [ 2.0, -1.0, -1.0],\n        [-1.0,  2.0, -1.0],\n        [-1.0, -1.0,  2.0]\n    ])\n    \n    # Lower-right 3x3 block for shear components\n    P_dev[3:6, 3:6] = np.identity(3)\n\n    # Tolerances\n    eps_mat = 1e-12\n    eps_tr = 1e-10\n    eps_vec = 1e-12\n    eps_ten = 1e-12\n\n    # Helper functions for Voigt mapping\n    def to_voigt(tensor_A):\n        \"\"\"Converts a 3x3 symmetric tensor to a 6-element Voigt vector.\"\"\"\n        return np.array([\n            tensor_A[0, 0],\n            tensor_A[1, 1],\n            tensor_A[2, 2],\n            2 * tensor_A[1, 2],\n            2 * tensor_A[0, 2],\n            2 * tensor_A[0, 1]\n        ])\n\n    def from_voigt(vector_a):\n        \"\"\"Converts a 6-element Voigt vector to a 3x3 symmetric tensor.\"\"\"\n        tensor_A = np.zeros((3, 3))\n        tensor_A[0, 0] = vector_a[0]\n        tensor_A[1, 1] = vector_a[1]\n        tensor_A[2, 2] = vector_a[2]\n        tensor_A[1, 2] = tensor_A[2, 1] = vector_a[3] / 2.0\n        tensor_A[0, 2] = tensor_A[2, 0] = vector_a[4] / 2.0\n        tensor_A[0, 1] = tensor_A[1, 0] = vector_a[5] / 2.0\n        return tensor_A\n\n    results = []\n\n    # Test 1 (Idempotency)\n    P_dev_squared = P_dev @ P_dev\n    norm_idempotency = np.linalg.norm(P_dev_squared - P_dev, 'fro')\n    results.append(norm_idempotency = eps_mat)\n\n    # Test 2 (Symmetry)\n    norm_symmetry = np.linalg.norm(P_dev - P_dev.T, 'fro')\n    results.append(norm_symmetry = eps_mat)\n\n    # Test 3 (Tracelessness on random symmetric tensors)\n    seed = 7\n    rng = np.random.default_rng(seed)\n    N = 10\n    max_trace = 0.0\n    for _ in range(N):\n        R = rng.standard_normal((3, 3))\n        A = (R + R.T) / 2.0\n        a = to_voigt(A)\n        a_dev = P_dev @ a\n        A_dev = from_voigt(a_dev)\n        max_trace = max(max_trace, abs(np.trace(A_dev)))\n    results.append(max_trace = eps_tr)\n\n    # Test 4 (Purely spherical input)\n    p = 3.7\n    A = p * np.identity(3)\n    a = to_voigt(A)\n    a_dev = P_dev @ a\n    norm_spherical = np.linalg.norm(a_dev)\n    results.append(norm_spherical = eps_vec)\n\n    # Test 5 (Pure deviatoric input, normal components)\n    A = np.diag([2.0, -1.0, -1.0])\n    a = to_voigt(A)\n    a_dev = P_dev @ a\n    norm_pure_dev_normal = np.linalg.norm(a_dev - a)\n    results.append(norm_pure_dev_normal = eps_vec)\n\n    # Test 6 (Pure shear input)\n    gamma = 1.234\n    A = np.zeros((3, 3))\n    A[0, 1] = A[1, 0] = gamma / 2.0\n    a = to_voigt(A)\n    a_dev = P_dev @ a\n    norm_pure_shear = np.linalg.norm(a_dev - a)\n    results.append(norm_pure_shear = eps_vec)\n\n    # Test 7 (Agreement with the definition on a random symmetric tensor)\n    seed_agreement = 123\n    rng_agreement = np.random.default_rng(seed_agreement)\n    R = rng_agreement.standard_normal((3, 3))\n    A = (R + R.T) / 2.0\n    \n    # Method 1: Projector\n    a = to_voigt(A)\n    a_dev_proj = P_dev @ a\n    A_dev_proj = from_voigt(a_dev_proj)\n    \n    # Method 2: Definition\n    A_dev_def = A - (np.trace(A) / 3.0) * np.identity(3)\n    \n    norm_agreement = np.linalg.norm(A_dev_proj - A_dev_def, 'fro')\n    results.append(norm_agreement = eps_ten)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, [r.item() for r in results]))}]\".replace(\"True\", \"True\").replace(\"False\", \"False\"))\n\nsolve()\n```", "id": "2686705"}]}
{"hands_on_practices": [{"introduction": "相图不仅是定性描述材料相变的“地图”，更是强大的定量分析工具。本练习将聚焦于其最核心的定量应用——杠杆定律。通过简单的质量守恒推导，我们可以精确计算出在两相区中各相的相对含量，这对于预测材料的最终性能至关重要。[@problem_id:2529826]", "problem": "一种总成分为 $0.10\\,\\mathrm{wt}\\,\\%$ 碳的钢，在 $700\\,^{\\circ}\\mathrm{C}$ 下进行等温处理，处于亚稳的铁-渗碳体平衡状态（石墨的形成被抑制）。在此温度下，碳在铁素体（表示为 $\\alpha$）中的平衡溶解度为 $0.02\\,\\mathrm{wt}\\,\\%$，渗碳体（表示为 $\\theta$，其中 $\\theta \\equiv \\mathrm{Fe}_{3}\\mathrm{C}$）的碳含量为 $6.67\\,\\mathrm{wt}\\,\\%$。假设体系中只存在 $\\alpha$ 和 $\\theta$ 两相，并且该体系是封闭的，因此总碳量守恒。\n\n对于这种钢，在 $700\\,^{\\circ}\\mathrm{C}$ 下，请从二元两相平衡的基本原理出发，利用质量平衡确定铁素体和渗碳体的平衡质量分数 $f_{\\alpha}$ 和 $f_{\\theta}$。\n\n将最终答案表示为一个无单位的行向量 $\\bigl[f_{\\alpha},\\,f_{\\theta}\\bigr]$，并将每个数值四舍五入到四位有效数字。", "solution": "首先必须验证问题陈述的科学合理性和完整性。\n\n步骤 1：提取已知条件。\n提供了以下数据：\n-   钢的总碳成分，$C_{0} = 0.10\\,\\mathrm{wt}\\,\\%$。\n-   等温保持温度，$T = 700\\,^{\\circ}\\mathrm{C}$。\n-   体系处于亚稳的铁-渗碳体平衡状态。\n-   铁素体($\\alpha$)中的平衡碳含量，$C_{\\alpha} = 0.02\\,\\mathrm{wt}\\,\\%$。\n-   渗碳体($\\theta$, $\\mathrm{Fe}_{3}\\mathrm{C}$)中的平衡碳含量，$C_{\\theta} = 6.67\\,\\mathrm{wt}\\,\\%$。\n-   仅有的相是铁素体($\\alpha$)和渗碳体($\\theta$)。\n-   体系是封闭的。\n-   目标是确定铁素体($f_{\\alpha}$)和渗碳体($f_{\\theta}$)的平衡质量分数。\n\n步骤 2：使用提取的已知条件进行验证。\n该问题具有科学依据。它描述了物理冶金学中的一个标准情景，具体来说，是将质量平衡原理（杠杆定律）应用于二元相图。温度 $T = 700\\,^{\\circ}\\mathrm{C}$ 低于共析温度（$727\\,^{\\circ}\\mathrm{C}$），总成分 $C_{0} = 0.10\\,\\mathrm{wt}\\,\\%$ 介于碳在铁素体中的溶解度极限（$C_{\\alpha}$）和渗碳体的成分（$C_{\\theta}$）之间。这正确地将该合金定位在 Fe-Fe3C 相图的 $\\alpha + \\theta$ 两相区内。给定的各相成分是标准值。该问题提法得当、客观，并包含足够的信息以获得唯一解。\n\n步骤 3：结论与行动。\n该问题有效。将按要求从基本原理出发推导解答。\n\n推导过程始于考虑合金的总质量 $m_{total}$。该质量分布在存在的两相——铁素体($\\alpha$)和渗碳体($\\theta$)之间。设它们的质量分别为 $m_{\\alpha}$ 和 $m_{\\theta}$。各相的质量分数定义为：\n$$\nf_{\\alpha} = \\frac{m_{\\alpha}}{m_{total}} \\quad \\text{and} \\quad f_{\\theta} = \\frac{m_{\\theta}}{m_{total}}\n$$\n由于在一个封闭系统中仅存在这两相，根据质量守恒定律，它们的质量之和等于总质量：\n$$\nm_{\\alpha} + m_{\\theta} = m_{total}\n$$\n两边同除以 $m_{total}$，得到质量分数之间的第一个基本关系式：\n$$\nf_{\\alpha} + f_{\\theta} = 1\n$$\n这是总质量平衡方程。\n\n接下来，我们建立碳组分的质量平衡。合金中碳的总质量是总碳浓度 $C_{0}$ 与总质量 $m_{total}$ 的乘积。这部分碳的总质量分布在铁素体和渗碳体两相中。铁素体相中的碳质量为 $C_{\\alpha} m_{\\alpha}$，渗碳体相中的碳质量为 $C_{\\theta} m_{\\theta}$。碳组分的守恒要求：\n$$\n\\text{碳的总质量} = (\\text{$\\alpha$ 相中碳的质量}) + (\\text{$\\theta$ 相中碳的质量})\n$$\n代入各项的表达式（为求形式上的正确性，将 wt$\\%$ 值视为分数，尽管 $1/100$ 的因子会消掉）：\n$$\nC_{0} \\cdot m_{total} = C_{\\alpha} \\cdot m_{\\alpha} + C_{\\theta} \\cdot m_{\\theta}\n$$\n将整个方程两边同除以总质量 $m_{total}$：\n$$\nC_{0} = C_{\\alpha} \\frac{m_{\\alpha}}{m_{total}} + C_{\\theta} \\frac{m_{\\theta}}{m_{total}}\n$$\n代入质量分数的定义，我们得到第二个基本关系式：\n$$\nC_{0} = C_{\\alpha} f_{\\alpha} + C_{\\theta} f_{\\theta}\n$$\n这是组分质量平衡方程。\n\n现在我们得到了一个包含两个未知数 $f_{\\alpha}$ 和 $f_{\\theta}$ 的二元线性方程组：\n1.  $f_{\\alpha} + f_{\\theta} = 1$\n2.  $C_{\\alpha} f_{\\alpha} + C_{\\theta} f_{\\theta} = C_{0}$\n\n根据方程(1)，我们将 $f_{\\theta}$ 用 $f_{\\alpha}$ 表示：$f_{\\theta} = 1 - f_{\\alpha}$。将其代入方程(2)：\n$$\nC_{0} = C_{\\alpha} f_{\\alpha} + C_{\\theta} (1 - f_{\\alpha})\n$$\n$$\nC_{0} = C_{\\alpha} f_{\\alpha} + C_{\\theta} - C_{\\theta} f_{\\alpha}\n$$\n$$\nC_{0} - C_{\\theta} = f_{\\alpha} (C_{\\alpha} - C_{\\theta})\n$$\n解出 $f_{\\alpha}$ 可得杠杆定律表达式：\n$$\nf_{\\alpha} = \\frac{C_{0} - C_{\\theta}}{C_{\\alpha} - C_{\\theta}} = \\frac{C_{\\theta} - C_{0}}{C_{\\theta} - C_{\\alpha}}\n$$\n为了求得 $f_{\\theta}$，我们使用关系式 $f_{\\theta} = 1 - f_{\\alpha}$。\n$$\nf_{\\theta} = 1 - \\frac{C_{\\theta} - C_{0}}{C_{\\theta} - C_{\\alpha}} = \\frac{(C_{\\theta} - C_{\\alpha}) - (C_{\\theta} - C_{0})}{C_{\\theta} - C_{\\alpha}} = \\frac{C_{0} - C_{\\alpha}}{C_{\\theta} - C_{\\alpha}}\n$$\n这验证了标准的杠杆定律公式。\n\n现在，我们将给定的数值代入这些表达式中：\n$C_{0} = 0.10$\n$C_{\\alpha} = 0.02$\n$C_{\\theta} = 6.67$\n\n铁素体的质量分数 $f_{\\alpha}$ 为：\n$$\nf_{\\alpha} = \\frac{6.67 - 0.10}{6.67 - 0.02} = \\frac{6.57}{6.65} \\approx 0.9879699...\n$$\n渗碳体的质量分数 $f_{\\theta}$ 为：\n$$\nf_{\\theta} = \\frac{0.10 - 0.02}{6.67 - 0.02} = \\frac{0.08}{6.65} \\approx 0.0120300...\n$$\n作为检验，$f_{\\alpha} + f_{\\theta} \\approx 0.9879699 + 0.0120300 = 0.9999999 \\approx 1$，这是正确的。\n\n问题要求将每个数值四舍五入到四位有效数字。\n对于 $f_{\\alpha} = 0.9879699...$，前四位有效数字是 $9$、$8$、$7$ 和 $9$。第五位数字是 $6$ ($\\ge 5$)，所以我们将最后一位有效数字向上取整。因此，$f_{\\alpha}$ 四舍五入为 $0.9880$。\n对于 $f_{\\theta} = 0.0120300...$，小数点后的前导零不是有效数字。前四位有效数字是 $1$、$2$、$0$ 和 $3$。第五位数字是 $0$ ($ 5$)，所以我们不向上取整。因此，$f_{\\theta}$ 四舍五入为 $0.01203$。\n\n最终答案是这些四舍五入后质量分数的行向量。", "answer": "$$\n\\boxed{\\begin{bmatrix} 0.9880  0.01203 \\end{bmatrix}}\n$$", "id": "2529826"}, {"introduction": "我们常见的相图通常是在恒定压力（如一个大气压）下绘制的二维截面。这个练习将带领我们探索当压力等外部条件改变时，相界线发生移动背后的热力学原理。通过推导和应用克拉佩龙方程，您将把相图上的线条与吉布斯自由能（$G$）、体积（$V$）和熵（$S$）的变化联系起来，从而获得对相平衡更深刻、更多维度的理解。[@problem_id:2529800]", "problem": "在铁碳体系的共析成分下，不变反应 $\\gamma \\rightarrow \\alpha + \\mathrm{Fe}_3\\mathrm{C}$ 在环境压力下的共析温度发生。考虑在环境压力附近该三相平衡的一个小邻域，在该邻域内热力学响应函数可被视为与压力无关。设在共析温度下，对于反应 $\\gamma \\rightarrow \\alpha + \\mathrm{Fe}_3\\mathrm{C}$，（每摩尔共析成分的母相奥氏体）的摩尔变化量为 $\\Delta V = -3.30 \\times 10^{-8}\\,\\text{m}^3\\,\\text{mol}^{-1}$ 和 $\\Delta S = -3.00\\,\\text{J}\\,\\text{mol}^{-1}\\,\\text{K}^{-1}$，其中 $\\Delta V$ 和 $\\Delta S$ 定义为产物值减去反应物值。假设在所关心的压力区间内，这些值近似恒定。\n\n仅从吉布斯自由能微分式 $dG = V\\,dP - S\\,dT$ 和多相平衡条件出发，推导出决定压力-温度平面上共析不变线斜率 $dT/dP$ 的关系式。然后，计算每千巴压力变化引起的共析温度变化量，以 $\\text{K}\\,\\text{kbar}^{-1}$ 为单位，并给出其数值。使用 $1\\,\\text{bar} = 10^5\\,\\text{Pa}$ 和 $1\\,\\text{kbar} = 10^8\\,\\text{Pa}$。将最终数值结果四舍五入至三位有效数字。\n\n最后，给定确定共析温度的典型实验能力为 $\\pm 1.0\\,\\text{K}$ 的不确定度，以及可控的最小压力增量为 $0.50\\,\\text{kbar}$，请解释在单个增量下，预测的温度变化是否能被实验检测到。你的解释不会被数值评分，但必须在逻辑上与你的推导和计算保持一致。", "solution": "首先对问题进行验证。\n\n步骤1：提取已知条件。\n- 系统：铁碳，共析成分。\n- 不变反应：在共析温度和环境压力下的 $\\gamma \\rightarrow \\alpha + \\mathrm{Fe}_3\\mathrm{C}$。\n- 基本微分式：$dG = V\\,dP - S\\,dT$。\n- 平衡条件：多相平衡。\n- 摩尔体积变化量：$\\Delta V = -3.30 \\times 10^{-8}\\,\\text{m}^3\\,\\text{mol}^{-1}$（对于该反应，定义为产物减去反应物）。\n- 摩尔熵变：$\\Delta S = -3.00\\,\\text{J}\\,\\text{mol}^{-1}\\,\\text{K}^{-1}$（对于该反应，定义为产物减去反应物）。\n- 假设：在所关心的压力区间内 $\\Delta V$ 和 $\\Delta S$ 为常数；在环境压力附近的小邻域内，热力学响应函数被视为与压力无关。\n- 单位换算：$1\\,\\text{bar} = 10^5\\,\\text{Pa}$；$1\\,\\text{kbar} = 10^8\\,\\text{Pa}$。\n- 要求输出1（推导）：共析不变线斜率 $dT/dP$ 的关系式。\n- 要求输出2（计算）：以 $\\text{K}\\,\\text{kbar}^{-1}$ 为单位的每千巴共析温度变化量的数值，四舍五入至三位有效数字。\n- 要求输出3（解释）：在温度测量不确定度为 $\\pm 1.0\\,\\text{K}$ 的情况下，评估压力增量为 $0.50\\,\\text{kbar}$ 时温度变化的可实验检测性。\n\n步骤2：使用提取的已知条件进行验证。\n该问题具有科学依据，植根于经典的材料热力学和相变理论。铁碳体系中的共析反应是材料科学中的一个典型例子。所要求的推导是克拉佩龙方程的推导，这是一个基本的热力学关系式。该问题提法明确，为得到唯一解提供了所有必要的数据（$\\Delta V, \\Delta S$）和常数。语言客观、精确。所提供的数据对于固态相变是物理上现实的。该问题是自洽且一致的。\n\n步骤3：结论与行动。\n问题有效。将提供解答。\n\n该问题要求推导共析温度对压力的依赖关系，这是一个不变反应。沿着代表该三相平衡的P-T线上的任意一点，母相奥氏体（$\\gamma$）的摩尔吉布斯自由能必须等于产物混合物（$\\alpha + \\mathrm{Fe}_3\\mathrm{C}$）的总吉布斯自由能。设 $G_{\\gamma}$ 为 $\\gamma$ 相的摩尔吉布斯自由能，$G_{prod}$ 为由一摩尔 $\\gamma$ 相形成的产物的吉布斯自由能。平衡条件为：\n$$G_{\\gamma}(P, T) = G_{prod}(P, T)$$\n为使该平衡沿相界得以维持，任何无穷小的变化 $dP$ 和 $dT$ 都必须保持此等式成立。因此，吉布斯自由能的全微分必须相等：\n$$dG_{\\gamma} = dG_{prod}$$\n吉布斯自由能微分的基本热力学关系式为 $dG = V\\,dP - S\\,dT$。将此应用于反应物和产物集合，得到：\n$$V_{\\gamma}\\,dP - S_{\\gamma}\\,dT = V_{prod}\\,dP - S_{prod}\\,dT$$\n此处，$V$ 和 $S$ 分别代表相应组分（反应物或产物集合）的摩尔体积和摩尔熵。重新整理该方程，将含 $dP$ 和 $dT$ 的项分组：\n$$(S_{prod} - S_{\\gamma})\\,dT = (V_{prod} - V_{\\gamma})\\,dP$$\n问题将反应的摩尔熵变和体积变化定义为 $\\Delta S = S_{prod} - S_{\\gamma}$ 和 $\\Delta V = V_{prod} - V_{\\gamma}$。代入这些定义，得到：\n$$\\Delta S \\,dT = \\Delta V \\,dP$$\n这可以重新整理，以求得P-T平面上共析线的斜率，这即是所求的关系式：\n$$\\frac{dT}{dP} = \\frac{\\Delta V}{\\Delta S}$$\n这是适用于此不变反应的广义克拉佩龙方程。\n\n接下来，我们计算该斜率的数值。提供的数据为：\n$\\Delta V = -3.30 \\times 10^{-8}\\,\\text{m}^3\\,\\text{mol}^{-1}$\n$\\Delta S = -3.00\\,\\text{J}\\,\\text{mol}^{-1}\\,\\text{K}^{-1}$\n\n将这些值代入推导出的关系式：\n$$\\frac{dT}{dP} = \\frac{-3.30 \\times 10^{-8}\\,\\text{m}^3\\,\\text{mol}^{-1}}{-3.00\\,\\text{J}\\,\\text{mol}^{-1}\\,\\text{K}^{-1}} = 1.10 \\times 10^{-8}\\,\\frac{\\text{m}^3\\cdot\\text{K}}{\\text{J}}$$\n为将其表示为所需的单位 $\\text{K}\\,\\text{kbar}^{-1}$，需要进行单位换算。压力单位帕斯卡（$\\text{Pa}$）通过 $1\\,\\text{J} = 1\\,\\text{Pa}\\cdot\\text{m}^3$ 与焦耳（$\\text{J}$）和立方米（$\\text{m}^3$）相关联。因此，计算出的斜率的单位是：\n$$\\frac{\\text{m}^3\\cdot\\text{K}}{\\text{J}} = \\frac{\\text{m}^3\\cdot\\text{K}}{\\text{Pa}\\cdot\\text{m}^3} = \\frac{\\text{K}}{\\text{Pa}}$$\n所以，斜率为 $\\frac{dT}{dP} = 1.10 \\times 10^{-8}\\,\\text{K}\\,\\text{Pa}^{-1}$。\n我们已知 $1\\,\\text{kbar} = 10^8\\,\\text{Pa}$。我们可以用它来转换单位：\n$$\\frac{dT}{dP} = \\left( 1.10 \\times 10^{-8}\\,\\frac{\\text{K}}{\\text{Pa}} \\right) \\times \\left( \\frac{10^8\\,\\text{Pa}}{1\\,\\text{kbar}} \\right)$$\n$$\\frac{dT}{dP} = 1.10 \\times (10^{-8} \\times 10^8)\\,\\frac{\\text{K}}{\\text{kbar}} = 1.10\\,\\text{K}\\,\\text{kbar}^{-1}$$\n共析温度变化的数值，精确到三位有效数字，为 $1.10\\,\\text{K}\\,\\text{kbar}^{-1}$。\n\n最后，必须讨论实验可检测性的问题。最小可控压力增量为 $\\Delta P_{min} = 0.50\\,\\text{kbar}$。对于此压力增量，预期的温度变化 $\\Delta T_{predicted}$ 可用推导出的斜率计算得出：\n$$\\Delta T_{predicted} = \\left( \\frac{dT}{dP} \\right) \\times \\Delta P_{min} = (1.10\\,\\text{K}\\,\\text{kbar}^{-1}) \\times (0.50\\,\\text{kbar}) = 0.55\\,\\text{K}$$\n温度测量的实验不确定度为 $\\delta T = \\pm 1.0\\,\\text{K}$。只有当一个效应的量级显著大于测量不确定度时，它才被认为是可被实验检测到的。在本例中，预测的 $0.55\\,\\text{K}$ 的温度变化小于 $\\pm 1.0\\,\\text{K}$ 的不确定度。由于随机误差，单次测量可能得出一个与原始温度值无法区分的结果。因此，在给定的实验能力下，对于 $0.50\\,\\text{kbar}$ 的单个压力增量，所预测的 $0.55\\,\\text{K}$ 的温度变化无法被可靠地检测到。要观察到这一效应，就需要一个更大的压力变化以产生超过测量不确定度的温度变化，或者，需要提高温度测量装置的精度。", "answer": "$$\\boxed{1.10}$$", "id": "2529800"}, {"introduction": "本章的最后一个练习是一项综合性挑战，旨在连接理论与现代计算实践。您将不再仅仅是*使用*相图，而是要从最基本的吉布斯自由能（$G$）模型出发来*构建*相图。通过实现一个基于公切线构造的计算流程，您将亲身体验相图是如何通过计算生成的——这是现代材料设计中计算相图（CALPHAD）方法的核心。[@problem_id:2529770]", "problem": "给定铁-碳系统在固定压力下各相的每摩尔原子的摩尔吉布斯能的可微模型 $G^\\phi(x,T)$，其中 $x \\in (0,1)$ 是碳的原子分数，$T$ 是以开尔文 (K) 为单位的绝对温度。考虑的相有铁素体 ($\\alpha$)、奥氏体 ($\\gamma$) 和渗碳体 ($\\theta$)。假设渗碳体 ($\\theta$) 是一个成分固定在 $x^\\theta = 0.25$ 的化学计量相 (即 $\\text{Fe}_3\\text{C}$)，而铁素体 ($\\alpha$) 和奥氏体 ($\\gamma$) 是置换固溶体，其自由能由以下带有理想构型熵项的、类似 Redlich–Kister 的正规溶体模型描述：\n$$\nG^\\phi(x,T) = G_0^\\phi(T) + h_\\phi\\, x + R T \\left[x \\ln x + (1-x)\\ln(1-x)\\right] + \\Omega_\\phi\\, x(1-x),\n$$\n其中 $\\phi \\in \\{\\alpha,\\gamma\\}$ 且 $x \\in (0,1)$。化学计量相渗碳体的自由能为\n$$\nG^\\theta(T) = A_\\theta + B_\\theta T,\n$$\n仅在 $x^\\theta = 0.25$ 处有定义。取普适气体常数 $R = 8.314\\ \\text{J}\\,\\text{mol}^{-1}\\,\\text{K}^{-1}$。\n\n使用以下参数值 (所有能量单位均为 $\\text{J}\\,\\text{mol}^{-1}$)：\n- 铁素体 ($\\alpha$)：$G_0^\\alpha(T) = 0$, $h_\\alpha = 40000$, $\\Omega_\\alpha = 20000$，有效成分范围 $x \\in [10^{-6}, 0.02]$。\n- 奥氏体 ($\\gamma$)：$G_0^\\gamma(T) = 3000 - 5.0\\,T$, $h_\\gamma = 15000$, $\\Omega_\\gamma = 8000$，有效成分范围 $x \\in [10^{-6}, 0.15]$。\n- 渗碳体 ($\\theta$)：在 $x^\\theta = 0.25$ 时，$G^\\theta(T) = -12000 - 4.0\\,T$。\n\n在固定的温度 $T$ 和总成分 $x_0 \\in (0,1)$下，平衡态是在满足质量守恒的条件下使总摩尔吉布斯能最小化的状态。对于单相候选 $\\phi$，如果 $x_0$ 位于 $\\phi$ 的有效范围内，其能量为 $G^\\phi(x_0,T)$。对于端点成分为 $x^\\phi$ 和 $x^\\psi$ 的两相候选 $(\\phi,\\psi)$，其能量为杠杆插值\n$$\nG^{\\phi\\!+\\!\\psi}(x_0,T) = f_\\phi G^\\phi(x^\\phi,T) + f_\\psi G^\\psi(x^\\psi,T),\n$$\n其中 $f_\\phi + f_\\psi = 1$ 且 $f_\\phi = \\dfrac{x^\\psi - x_0}{x^\\psi - x^\\phi}$, $f_\\psi = \\dfrac{x_0 - x^\\phi}{x^\\psi - x^\\phi}$，条件是 $x_0 \\in [x^\\phi,x^\\psi]$。两相的端点必须满足由化学势相等和相平衡导出的连接线（公切线）条件。对于两个固溶体相 $\\phi$ 和 $\\psi$，通过在 $G^\\phi(x,T)$ 和 $G^\\psi(x,T)$ 之间进行公切线构造来确定连接线端点 $x^\\phi$ 和 $x^\\psi$。对于一个固溶体相 $\\phi$ 和位于 $x^\\theta$ 的化学计量相渗碳体 $\\theta$，在 $G^\\phi(x,T)$ 上确定唯一的切点 $x^\\phi$，使其切线穿过点 $\\left(x^\\theta,G^\\theta(T)\\right)$。如果某个相组合无法找到有效的两相连接线，则舍弃该相组合。\n\n您的任务是开发一个算法流程，对于每个测试用例 $(T, x_0)$，该流程能够：(i) 在 $\\{\\alpha,\\gamma,\\theta\\}$ 中枚举所有可能的单相和两相候选；(ii) 通过公切线条件确定两相连接线；(iii) 当 $x_0$ 位于连接线端点之间时，应用杠杆定则计算相分数；(iv) 选择具有最低总摩尔吉布斯能的候选。将平衡相分数报告为有序三元组 $\\left[f_\\alpha, f_\\gamma, f_\\theta\\right]$，其中每个 $f_\\phi \\in [0,1]$ 且 $\\sum f_\\phi = 1$，并约定不存在的相其分数为 0。\n\n所有计算中，$T$ 必须使用开尔文 (K)，$x$ 和 $x_0$ 为原子分数（无量纲），能量单位为 $\\text{J}\\,\\text{mol}^{-1}$。最终数值结果必须四舍五入到六位小数。\n\n用于评估您程序的测试套件：\n- 用例 1：$T = 1000$, $x_0 = 0.015$.\n- 用例 2：$T = 800$, $x_0 = 0.040$.\n- 用例 3：$T = 1200$, $x_0 = 0.050$.\n- 用例 4：$T = 900$, $x_0 = 10^{-6}$.\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含一个用方括号括起的逗号分隔列表，列表中的每个元素本身是按 $\\left[f_\\alpha, f_\\gamma, f_\\theta\\right]$ 顺序排列的三元素列表。例如，四个用例的有效输出形式为\n$$\n\\left[\\left[f_{\\alpha,1}, f_{\\gamma,1}, f_{\\theta,1}\\right],\\left[f_{\\alpha,2}, f_{\\gamma,2}, f_{\\theta,2}\\right],\\left[f_{\\alpha,3}, f_{\\gamma,3}, f_{\\theta,3}\\right],\\left[f_{\\alpha,4}, f_{\\gamma,4}, f_{\\theta,4}\\right]\\right],\n$$\n以单行打印，每个浮点数四舍五入到六位小数，无任何附加文本。", "solution": "该问题要求基于给定的三种相——铁素体 ($\\alpha$)、奥氏体 ($\\gamma$) 和渗碳体 ($\\theta$)——的吉布斯自由能热力学模型，来确定铁-碳体系中的平衡相分数。在给定温度 $T$ 和总碳成分 $x_0$ 下，平衡态对应于使总摩尔吉布斯能最小化的相或相混合物。这是计算热力学中的一个经典问题，通过构造所有可能相的吉布斯能曲线的下凸包来求解。\n\n对于每个给定的测试用例 $(T, x_0)$，求解过程按以下算法步骤进行：\n\n**1. 定义热力学模型**\n\n首先，我们为每个相 $\\phi \\in \\{\\alpha, \\gamma, \\theta\\}$ 实现给定的摩尔吉布斯能 $G^\\phi(x, T)$ 的数学模型。\n对于固溶体相铁素体 ($\\alpha$) 和奥氏体 ($\\gamma$)，模型为正规溶体类型：\n$$\nG^\\phi(x,T) = G_0^\\phi(T) + h_\\phi x + R T \\left[x \\ln x + (1-x)\\ln(1-x)\\right] + \\Omega_\\phi x(1-x)\n$$\n组元的化学势与吉布斯能的导数相关。用于寻找两相平衡成分的公切线构造法依赖于这些导数。$G^\\phi$ 对摩尔分数 $x$ 的一阶导数为：\n$$\n\\frac{\\partial G^\\phi}{\\partial x} = h_\\phi + R T \\ln\\left(\\frac{x}{1-x}\\right) + \\Omega_\\phi (1-2x)\n$$\n对于化学计量相渗碳体 ($\\theta$)，在固定成分 $x^\\theta = 0.25$ 下，吉布斯能是温度的线性函数：\n$$\nG^\\theta(T) = A_\\theta + B_\\theta T\n$$\n所有参数 ($h_\\phi, \\Omega_\\phi, A_\\theta, B_\\theta$) 和相成分范围均如问题描述中所给出。普适气体常数为 $R = 8.314\\ \\text{J}\\,\\text{mol}^{-1}\\,\\text{K}^{-1}$。\n\n**2. 确定潜在的平衡相混合物（候选）**\n\n系统可能的平衡态有：\n- 单相 $\\alpha$\n- 单相 $\\gamma$\n- 两相混合物 $\\alpha + \\gamma$\n- 两相混合物 $\\alpha + \\theta$\n- 两相混合物 $\\gamma + \\theta$\n单相 $\\theta$ 态仅在 $x_0 = 0.25$ 时可能出现，但这不在测试用例中。三相平衡仅在特定温度下存在（例如，共析温度），它是通过两相平衡线的交点找到的，而不是在一定条件范围内作为主要候选来考虑。\n\n**3. 确定两相连接线**\n\n对于每个温度 $T$，我们必须首先确定所有可能的两相混合物的平衡成分（连接线端点）。这通过应用公切线构造法来完成。\n\n- **对于两个固溶体相（$\\alpha$ 和 $\\gamma$）：**公切线条件等价于两相中两种组元（Fe 和 C）的化学势相等。这会产生一个关于两个未知成分 $x^\\alpha$ 和 $x^\\gamma$ 的非线性方程组：\n    $$\n    \\frac{\\partial G^\\alpha}{\\partial x}(x^\\alpha, T) = \\frac{\\partial G^\\gamma}{\\partial x}(x^\\gamma, T)\n    $$\n    $$\n    G^\\alpha(x^\\alpha, T) - x^\\alpha \\frac{\\partial G^\\alpha}{\\partial x}(x^\\alpha, T) = G^\\gamma(x^\\gamma, T) - x^\\gamma \\frac{\\partial G^\\gamma}{\\partial x}(x^\\gamma, T)\n    $$\n    该方程组使用求根算法（例如 `scipy.optimize.root`）进行数值求解。一个解是有效的，仅当其得到的成分 $x^\\alpha$ 和 $x^\\gamma$ 落在它们各自定义的稳定域内。\n\n- **对于一个固溶体相（$\\phi$）和一个化学计量相（$\\theta$）：**平衡成分 $x^\\phi$ 是通过在 $G^\\phi(x,T)$ 曲线上找到一个点，使得该点的切线穿过点 $(x^\\theta, G^\\theta(T))$ 来确定的。这导出了一个关于 $x^\\phi$ 的单非线性方程：\n    $$\n    \\frac{G^\\phi(x^\\phi, T) - G^\\theta(T)}{x^\\phi - x^\\theta} = \\frac{\\partial G^\\phi}{\\partial x}(x^\\phi, T)\n    $$\n    此方程使用标量求根器（如 `scipy.optimize.root_scalar`）对 $x^\\phi$ 进行数值求解。同样，解必须位于相 $\\phi$ 的有效成分范围内。\n\n**4. 为每个候选计算吉布斯能和相分数**\n\n对于给定的 $(T, x_0)$，我们为所有有效的候选计算吉布斯能。\n\n- **单相候选（$\\phi$）：**如果 $x_0$ 在相 $\\phi$ 的成分范围内，这是一个有效候选。其能量为 $G_{total} = G^\\phi(x_0, T)$，相分数为平凡解（例如，对于 $\\alpha$ 相是 $[1, 0, 0]$）。\n\n- **两相候选（$\\phi+\\psi$）：**如果 $x_0$ 位于平衡连接线成分 $x^\\phi$ 和 $x^\\psi$ 之间，这是一个有效候选。相分数 $f_\\phi$ 和 $f_\\psi$ 由杠杆定则确定：\n    $$\n    f_\\phi = \\frac{x^\\psi - x_0}{x^\\psi - x^\\phi}, \\quad f_\\psi = \\frac{x_0 - x^\\phi}{x^\\psi - x^\\phi}\n    $$\n    混合物的总摩尔吉布斯能是端点能量的线性组合：\n    $$\n    G_{total} = f_\\phi G^\\phi(x^\\phi, T) + f_\\psi G^\\psi(x^\\psi, T)\n    $$\n\n**5. 确定平衡态**\n\n在计算了 $(T, x_0)$ 下所有有效候选的吉布斯能之后，具有最低吉布斯能的那个就是真实的平衡态。其对应的相分数作为该测试用例的解被报告。对所有测试用例重复此过程。最终输出的数值结果需四舍五入到六位小数。\n```python\nimport numpy as np\nfrom scipy.optimize import root, root_scalar\n\ndef solve():\n    \"\"\"\n    Main solver function to compute equilibrium phase fractions for the given test cases.\n    \"\"\"\n    # Define physical and model constants\n    R = 8.314  # J/mol-K\n\n    # Ferrite (alpha) parameters\n    H_ALPHA = 40000.0\n    OMEGA_ALPHA = 20000.0\n    X_ALPHA_MIN, X_ALPHA_MAX = 1e-6, 0.02\n\n    # Austenite (gamma) parameters\n    H_GAMMA = 15000.0\n    OMEGA_GAMMA = 8000.0\n    def G0_GAMMA(T): return 3000.0 - 5.0 * T\n    X_GAMMA_MIN, X_GAMMA_MAX = 1e-6, 0.15\n\n    # Cementite (theta) parameters\n    def G_THETA(T): return -12000.0 - 4.0 * T\n    X_THETA = 0.25\n\n    # Helper functions for Gibbs energy calculation\n    def g_entropy_term(x, T):\n        x = np.clip(x, 1e-12, 1 - 1e-12)\n        return R * T * (x * np.log(x) + (1 - x) * np.log(1 - x))\n\n    def g_alpha(x, T):\n        return H_ALPHA * x + g_entropy_term(x, T) + OMEGA_ALPHA * x * (1 - x)\n\n    def dg_alpha_dx(x, T):\n        x = np.clip(x, 1e-12, 1 - 1e-12)\n        return H_ALPHA + R * T * np.log(x / (1 - x)) + OMEGA_ALPHA * (1 - 2 * x)\n\n    def g_gamma(x, T):\n        return G0_GAMMA(T) + H_GAMMA * x + g_entropy_term(x, T) + OMEGA_GAMMA * x * (1 - x)\n\n    def dg_gamma_dx(x, T):\n        x = np.clip(x, 1e-12, 1 - 1e-12)\n        return H_GAMMA + R * T * np.log(x / (1 - x)) + OMEGA_GAMMA * (1 - 2 * x)\n\n    # --- Tie-line Solvers ---\n    \n    def solve_alpha_gamma_tie_line(T):\n        def equations(vars):\n            x_a, x_g = vars\n            if not (X_ALPHA_MIN*0.9 = x_a = X_ALPHA_MAX*1.1 and X_GAMMA_MIN*0.9 = x_g = X_GAMMA_MAX*1.1):\n                return [1e6, 1e6]\n            dG_a = dg_alpha_dx(x_a, T)\n            dG_g = dg_gamma_dx(x_g, T)\n            eq1 = dG_a - dG_g\n            mu_Fe_a = g_alpha(x_a, T) - x_a * dG_a\n            mu_Fe_g = g_gamma(x_g, T) - x_g * dG_g\n            eq2 = mu_Fe_a - mu_Fe_g\n            return [eq1, eq2]\n\n        sol = root(equations, [0.01, 0.05], method='hybr', options={'xtol': 1e-9})\n        if sol.success:\n            x_a, x_g = sol.x\n            if X_ALPHA_MIN = x_a = X_ALPHA_MAX and X_GAMMA_MIN = x_g = X_GAMMA_MAX and x_a  x_g:\n                return x_a, x_g\n        return None, None\n\n    def solve_alpha_theta_tie_point(T):\n        def equation(x_a):\n            return g_alpha(x_a, T) - G_THETA(T) - (x_a - X_THETA) * dg_alpha_dx(x_a, T)\n        try:\n            sol = root_scalar(equation, bracket=[X_ALPHA_MIN, X_ALPHA_MAX], xtol=1e-9)\n            if sol.converged:\n                return sol.root\n        except ValueError:\n            pass\n        return None\n\n    def solve_gamma_theta_tie_point(T):\n        def equation(x_g):\n            return g_gamma(x_g, T) - G_THETA(T) - (x_g - X_THETA) * dg_gamma_dx(x_g, T)\n        try:\n            sol = root_scalar(equation, bracket=[X_GAMMA_MIN, X_GAMMA_MAX], xtol=1e-9)\n            if sol.converged:\n                return sol.root\n        except ValueError:\n            pass\n        return None\n\n    def solve_case(T, x0):\n        # Pre-calculate tie-lines for the given temperature\n        xa_ag, xg_ag = solve_alpha_gamma_tie_line(T)\n        xa_at = solve_alpha_theta_tie_point(T)\n        xg_gt = solve_gamma_theta_tie_point(T)\n\n        candidates = []\n\n        # 1. Single-phase alpha\n        if X_ALPHA_MIN = x0 = X_ALPHA_MAX:\n            energy = g_alpha(x0, T)\n            candidates.append({'energy': energy, 'fractions': [1.0, 0.0, 0.0]})\n\n        # 2. Single-phase gamma\n        if X_GAMMA_MIN = x0 = X_GAMMA_MAX:\n            energy = g_gamma(x0, T)\n            candidates.append({'energy': energy, 'fractions': [0.0, 1.0, 0.0]})\n\n        # 3. Two-phase alpha+gamma\n        if xa_ag is not None and xg_ag is not None and xa_ag = x0 = xg_ag:\n            f_alpha = (xg_ag - x0) / (xg_ag - xa_ag)\n            f_gamma = 1.0 - f_alpha\n            energy = f_alpha * g_alpha(xa_ag, T) + f_gamma * g_gamma(xg_ag, T)\n            candidates.append({'energy': energy, 'fractions': [f_alpha, f_gamma, 0.0]})\n\n        # 4. Two-phase alpha+theta\n        if xa_at is not None and xa_at = x0 = X_THETA:\n            f_alpha = (X_THETA - x0) / (X_THETA - xa_at)\n            f_theta = 1.0 - f_alpha\n            energy = f_alpha * g_alpha(xa_at, T) + f_theta * G_THETA(T)\n            candidates.append({'energy': energy, 'fractions': [f_alpha, 0.0, f_theta]})\n\n        # 5. Two-phase gamma+theta\n        if xg_gt is not None and xg_gt = x0 = X_THETA:\n            f_gamma = (X_THETA - x0) / (X_THETA - xg_gt)\n            f_theta = 1.0 - f_gamma\n            energy = f_gamma * g_gamma(xg_gt, T) + f_theta * G_THETA(T)\n            candidates.append({'energy': energy, 'fractions': [0.0, f_gamma, f_theta]})\n\n        if not candidates:\n             raise ValueError(f\"No valid equilibrium state found for T={T}, x0={x0}\")\n\n        best_candidate = min(candidates, key=lambda c: c['energy'])\n        return best_candidate['fractions']\n\n    test_cases = [\n        (1000, 0.015),\n        (800, 0.040),\n        (1200, 0.050),\n        (900, 1e-6),\n    ]\n\n    results = []\n    for T, x0 in test_cases:\n        fractions = solve_case(T, x0)\n        results.append(fractions)\n\n    # Format output string\n    outer_parts = []\n    for res in results:\n        inner_parts = [f\"{v:.6f}\" for v in res]\n        outer_parts.append(f\"[{','.join(inner_parts)}]\")\n    return f\"[{','.join(outer_parts)}]\"\n\n# The final output is generated by running the code.\n# print(solve())\n```", "answer": "[[0.252033,0.747967,0.000000],[0.875323,0.000000,0.124677],[0.000000,1.000000,0.000000],[1.000000,0.000000,0.000000]]", "id": "2529770"}]}
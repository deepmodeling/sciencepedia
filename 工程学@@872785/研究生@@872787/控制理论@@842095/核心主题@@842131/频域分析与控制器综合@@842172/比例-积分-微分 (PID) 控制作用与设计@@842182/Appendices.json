{"hands_on_practices": [{"introduction": "在设计任何控制系统时，首要且最关键的一步是确保其稳定性。本练习提供了一项基础实践，旨在确定保证闭环系统稳定的PID控制器增益范围。通过应用劳斯-赫尔维茨（Routh-Hurwitz）稳定性判据，你将从数学上划定控制器参数 $K_p$、$K_i$ 和 $K_d$ 的“安全”工作区域，即稳定域。[@problem_id:2734751]", "problem": "考虑一个连续时间、线性时不变的单位负反馈回路，其中被控对象由严格真传递函数 $G(s) = \\dfrac{1}{s(s+1)}$ 给出，控制器为理想的比例-积分-微分 (PID) 控制器 $C(s) = K_p + \\dfrac{K_i}{s} + K_d s$，其增益 $K_p$、$K_i$ 和 $K_d$ 均为无量纲。从闭环特征方程的定义和劳斯-赫尔维茨稳定性判据出发，推导使所有闭环极点严格位于复平面开左半平面的关于 $(K_p, K_i, K_d)$ 的充分必要条件。\n\n在推导过程中，请使用 $1 + C(s)G(s) = 0$ 显式地构建特征多项式，然后应用劳斯-赫尔维茨稳定性判据，以获得在 $(K_p, K_i, K_d)$ 空间中定义稳定域的不等式。解释每个不等式是如何从劳斯-赫尔维茨阵列中产生的，以及为什么在当前情况下这些条件是稳定性的充分必要条件。\n\n在以不等式形式推导出完整区域后，将通过等式将三个增益耦合起来的非平凡稳定性边界曲面 $K_i = f(K_p, K_d)$ 的解析表达式作为最终答案。最终答案仅提供此边界表达式，并以精确的符号形式表示。", "solution": "该问题要求推导单位负反馈控制系统的稳定性条件。这是经典控制理论中的一个标准流程，其基础是使用劳斯-赫尔维茨稳定性判据对闭环特征方程进行分析。\n\n该系统由一个传递函数为 $G(s) = \\dfrac{1}{s(s+1)}$ 的被控对象和一个比例-积分-微分 (PID) 控制器 $C(s) = K_p + \\dfrac{K_i}{s} + K_d s$ 组成。单位负反馈系统的闭环传递函数由 $T(s) = \\dfrac{C(s)G(s)}{1 + C(s)G(s)}$ 给出。系统的稳定性由闭环极点的位置决定，这些极点是特征方程 $1 + C(s)G(s) = 0$ 的根。\n\n首先，我们建立特征方程。开环传递函数 $L(s)$ 是控制器和被控对象传递函数的乘积：\n$$L(s) = C(s)G(s) = \\left( K_p + \\frac{K_i}{s} + K_d s \\right) \\left( \\frac{1}{s(s+1)} \\right)$$\n为简化计算，我们为控制器各项通分：\n$$C(s) = \\frac{K_p s + K_i + K_d s^2}{s}$$\n因此，开环传递函数为：\n$$L(s) = \\left( \\frac{K_d s^2 + K_p s + K_i}{s} \\right) \\left( \\frac{1}{s(s+1)} \\right) = \\frac{K_d s^2 + K_p s + K_i}{s^2(s+1)}$$\n特征方程为 $1 + L(s) = 0$：\n$$1 + \\frac{K_d s^2 + K_p s + K_i}{s^2(s+1)} = 0$$\n为了得到特征多项式，我们消去分母：\n$$s^2(s+1) + K_d s^2 + K_p s + K_i = 0$$\n$$s^3 + s^2 + K_d s^2 + K_p s + K_i = 0$$\n按 $s$ 的幂次对各项进行分组，我们得到三阶特征多项式 $P(s)$：\n$$P(s) = s^3 + (1+K_d)s^2 + K_p s + K_i = 0$$\n该多项式的系数为：\n$a_3 = 1$\n$a_2 = 1+K_d$\n$a_1 = K_p$\n$a_0 = K_i$\n\n为使系统稳定，$P(s)$ 的所有根必须严格位于复平面的开左半平面。劳斯-赫尔维茨判据为此提供了充分必要条件。该判据要求根据多项式系数构建劳斯阵列。对于一个三阶多项式，其阵列为：\n\n$$\n\\begin{array}{c|cc}\ns^3  a_3  a_1 \\\\\ns^2  a_2  a_0 \\\\\ns^1  b_1  0 \\\\\ns^0  c_1  0\n\\end{array}\n$$\n\n代入我们的系数：\n$$\n\\begin{array}{c|cc}\ns^3  1  K_p \\\\\ns^2  1+K_d  K_i \\\\\ns^1  b_1  0 \\\\\ns^0  c_1  0\n\\end{array}\n$$\n\n元素 $b_1$ 和 $c_1$ 的计算如下：\n$$b_1 = \\frac{a_2 a_1 - a_3 a_0}{a_2} = \\frac{(1+K_d)K_p - (1)K_i}{1+K_d}$$\n$$c_1 = \\frac{b_1 a_0 - a_2(0)}{b_1} = a_0 = K_i$$\n\n劳斯-赫尔维茨判据指出，多项式在右半平面的根的数量等于劳斯阵列第一列中符号改变的次数。对于严格稳定，右半平面内不能有根，虚轴上也不能有根。此条件的充分必要条件是阵列第一列中的所有元素都具有相同的符号。由于第一个元素 $a_3=1$ 是正数，因此第一列中所有后续元素也必须是正数。\n\n第一列的元素是 $1$、$1+K_d$、$b_1$ 和 $K_i$。这为系统稳定带来以下不等式组：\n1. $1+K_d > 0$\n2. $b_1 = \\dfrac{(1+K_d)K_p - K_i}{1+K_d} > 0$\n3. $K_i > 0$\n\n我们来分析每个条件：\n由条件(1)：$K_d > -1$。这确保了 $s^2$ 的系数为正。这是一个稳定性的必要条件，因为对于一个稳定系统，所有多项式系数都必须为正。\n\n由条件(3)：$K_i > 0$。这确保了多项式的常数项为正，这也是一个必要条件。从物理上讲，这意味着需要一个非零的积分作用，并且其符号必须为正，才能正确地抵消该被控对象的稳态误差。\n\n由条件(2)：由于我们已经从第一个条件中要求 $1+K_d > 0$，因此 $b_1 > 0$ 的不等式简化为其分子为正：\n$$(1+K_d)K_p - K_i > 0 \\implies K_i  K_p(1+K_d)$$\n这个不等式耦合了所有三个 PID 增益，定义了主要的稳定性边界。请注意，要使此不等式成立，鉴于 $K_i > 0$ 和 $1+K_d > 0$，则必须有 $K_p(1+K_d) > K_i > 0$，这意味着 $K_p > 0$。因此，条件 $K_p > 0$ 是隐含要求的，这与所有多项式系数必须为正的必要条件相一致。\n\n总而言之，闭环系统严格稳定的充分必要条件是同时满足以下三个不等式：\n$$K_d > -1$$\n$$K_i > 0$$\n$$K_p(1+K_d) > K_i$$\n这些条件在三维参数空间 $(K_p, K_i, K_d)$ 中定义了一个开区域。劳斯-赫尔维茨判据是关于根相对于虚轴位置的完备测试，因此这些条件是充分且必要的。\n\n这个稳定域的边界是当这些严格不等式之一变为等式时。界定稳定区域的曲面是：\n- $K_d = -1$ (一个平面)\n- $K_i = 0$ (一个平面)\n- $K_i = K_p(1+K_d)$ (一个曲面)\n\n问题要求的是耦合三个增益的非平凡稳定性边界曲面 $K_i = f(K_p, K_d)$。这对应于第三个条件变为等式，使得 $s^1$ 行的元素 $b_1$ 等于零。当 $b_1=0$ 时，系统在虚轴上存在根，标志着临界稳定，即不稳定的临界点。这是振荡失稳开始的边界。此边界的解析表达式直接从第三个不等式推导得出：\n$$K_i = K_p(1+K_d)$$\n这就是所要求的函数 $f(K_p, K_d)$。", "answer": "$$\\boxed{K_p(1+K_d)}$$", "id": "2734751"}, {"introduction": "在确保稳定性之后，控制设计的核心目标是实现期望的性能，例如快速响应且无不必要的超调。本问题介绍了一种实用的技术——设定值预滤波，用以塑造系统对指令变化的响应。你将学习如何基于系统带宽进行近似计算，设计一个满足特定上升时间要求同时保持平滑、单调响应的滤波器。[@problem_id:2734712]", "problem": "考虑一个单位反馈单输入单输出回路，其中参考信号 $r(t)$ 在进入反馈求和点之前，首先通过一个一阶设定点预滤波器 $F(s)$。该回路包含一个受比例-积分-微分 (PID) 补偿器驱动的被控对象 $G(s)$，该补偿器的微分项带有一个标准的一阶滚降，\n$$\nC(s) \\;=\\; K_{p} \\;+\\; \\frac{K_{i}}{s} \\;+\\; \\frac{K_{d}\\,s}{1 + \\frac{s}{\\omega_{d}}}.\n$$\n被控对象为\n$$\nG(s) \\;=\\; \\frac{3}{(s+1)(s+5)}.\n$$\n当整定值为 $K_{p}=8$，$K_{i}=20$，$K_{d}=0.6$ 和 $\\omega_{d}=80\\,\\text{rad/s}$ 时，闭环补灵敏度\n$$\nT_{0}(s) \\;=\\; \\frac{C(s)G(s)}{1 + C(s)G(s)}\n$$\n（经此处未复现的独立分析验证）是内部稳定的，具有非负的脉冲响应，并满足幅值条件\n$$\n0.99 \\;\\le\\; \\bigl|T_{0}(\\mathrm{j}\\omega)\\bigr| \\;\\le\\; 1.01\\quad\\text{for all }\\omega\\in[0,15]\\ \\text{rad/s},\n$$\n且 $\\bigl|T_{0}(\\mathrm{j}\\omega)\\bigr|$ 在 $\\omega>15\\,\\text{rad/s}$ 时滚降。预滤波器被限定为严格真的一阶低通滤波器\n$$\nF(s) \\;=\\; \\frac{1}{\\tau_{f}\\,s + 1},\n$$\n其中时间常数 $\\tau_{f}>0$ 未知，有待设计。\n\n在时间 $t=0$ 时施加一个单位阶跃参考信号 $r(t)$。仅使用线性时不变系统的一阶原理（微分方程、拉普拉斯变换以及标准稳定性和极限定理），确定预滤波器时间常数 $\\tau_{f}$ 的值，使得输出 $y(t)$ 的 10%–90% 上升时间等于 $t_{r}=0.18\\,\\text{s}$，同时保证 $y(t)$ 的响应是单调的（无超调）。\n\n你可以使用上述关于 $T_{0}(s)$ 的已知事实，但必须从基本原理出发对你的设计进行论证。将你的最终答案表示为 $\\tau_{f}$ 的数值（单位为秒），四舍五入到四位有效数字。最终的方框答案中不要包含单位。", "solution": "用户提供的问题是有效的，因为它在控制理论方面有科学依据，问题提法恰当，并包含充分、一致的信息以获得唯一解。\n\n目标是找到预滤波器时间常数 $\\tau_f$，使得单位阶跃响应的 10%–90% 上升时间为 $t_r = 0.18\\,\\text{s}$，同时确保响应是单调的。\n\n首先，我们建立从参考输入 $r(t)$ 到被控对象输出 $y(t)$ 的总传递函数。参考信号 $r(t)$ 经过 $F(s)$ 滤波，产生 $R'(s) = F(s)R(s)$。该信号进入单位反馈回路。输出 $Y(s)$ 由下式给出：\n$$\nY(s) = \\frac{C(s)G(s)}{1 + C(s)G(s)} R'(s)\n$$\n根据定义，不带预滤波器的闭环补灵敏度函数为 $T_0(s) = \\frac{C(s)G(s)}{1 + C(s)G(s)}$。代入该式和 $R'(s)$，得到：\n$$\nY(s) = T_0(s) F(s) R(s)\n$$\n因此，从 $r(t)$ 到 $y(t)$ 的总传递函数为 $T(s) = \\frac{Y(s)}{R(s)} = T_0(s) F(s)$。\n\n接下来，我们处理输出响应 $y(t)$ 必须是单调（无超调）的约束条件。输入是一个单位阶跃信号，$r(t) = u(t)$，其中 $u(t)$ 是亥维赛德阶跃函数。一个线性时不变 (LTI) 系统的阶跃响应是单调的充分条件是，其脉冲响应 $t(t) = \\mathcal{L}^{-1}\\{T(s)\\}$ 对于所有 $t \\ge 0$ 都是非负的。\n总脉冲响应是组成系统脉冲响应的卷积：\n$$\nt(t) = \\mathcal{L}^{-1}\\{T_0(s) F(s)\\} = t_0(t) * f(t)\n$$\n其中 $t_0(t) = \\mathcal{L}^{-1}\\{T_0(s)\\}$ 且 $f(t) = \\mathcal{L}^{-1}\\{F(s)\\}$。\n预滤波器为 $F(s) = \\frac{1}{\\tau_f s + 1}$，其中 $\\tau_f > 0$。其脉冲响应为：\n$$\nf(t) = \\mathcal{L}^{-1}\\left\\{\\frac{1}{\\tau_f s + 1}\\right\\} = \\frac{1}{\\tau_f} \\exp\\left(-\\frac{t}{\\tau_f}\\right), \\quad t \\ge 0\n$$\n由于 $\\tau_f > 0$，$f(t)$ 在 $t \\ge 0$ 时是严格为正的。问题陈述明确指出，内回路的脉冲响应 $t_0(t)$ 是非负的。两个非负函数的卷积本身也是一个非负函数。因此，$t(t) = t_0(t) * f(t) \\ge 0$ 对于所有 $t \\ge 0$ 均成立。这保证了阶跃响应 $y(t) = \\int_0^t t(\\lambda) d\\lambda$ 是一个时间的非递减函数，这意味着它是单调的且没有超调。因此，对于任何 $\\tau_f > 0$ 的选择，单调性约束都得到满足。\n\n问题现在简化为找到实现指定上升时间的 $\\tau_f$ 值。阶跃响应的终值可以使用终值定理求得：\n$$\ny_{ss} = \\lim_{t \\to \\infty} y(t) = \\lim_{s \\to 0} s Y(s) = \\lim_{s \\to 0} s \\left( T(s) \\frac{1}{s} \\right) = \\lim_{s \\to 0} T(s) = T(0)\n$$\n控制器 $C(s)$ 有一个积分项 $\\frac{K_i}{s}$，其中 $K_i=20 \\neq 0$，这意味着 $\\lim_{s \\to 0} |C(s)| = \\infty$。被控对象在直流（DC）下的增益为 $G(0) = \\frac{3}{(0+1)(0+5)} = \\frac{3}{5} \\neq 0$。因此，当 $s \\to 0$ 时，环路增益 $L(s) = C(s)G(s)$ 趋近于无穷大。这意味着：\n$$\nT_0(0) = \\lim_{s \\to 0} \\frac{L(s)}{1 + L(s)} = 1\n$$\n预滤波器在直流下的增益为 $F(0) = \\frac{1}{\\tau_f(0) + 1} = 1$。总直流增益为 $T(0) = T_0(0)F(0) = 1$。单位阶跃响应的终值为 $1$。10%–90% 上升时间是区间 $t_{90} - t_{10}$，其中 $y(t_{10})=0.1$ 且 $y(t_{90})=0.9$。\n\n为了求解 $\\tau_f$，我们利用关于 $T_0(s)$ 的给定信息。我们被告知，对于角频率 $\\omega \\in [0, 15]\\,\\text{rad/s}$，$|T_0(\\mathrm{j}\\omega)|$ 约等于 $1$。这表明内回路系统 $T_0(s)$ 的带宽至少为 $15\\,\\text{rad/s}$，并且对于频率内容低于该带宽的信号，其作用几乎相当于一个纯增益 $1$。预滤波器 $F(s)$ 是一个一阶低通滤波器，其转角频率为 $\\omega_c = 1/\\tau_f$。如果我们设计的 $\\tau_f$ 使得该转角频率位于 $T_0(s)$ 频率响应的平坦区域内（即 $1/\\tau_f \\ll 15\\,\\text{rad/s}$），那么来自预滤波器的极点 $s = -1/\\tau_f$ 将成为主导极点，整个系统的动态特性将主要由预滤波器决定。\n在这种主导极点近似下，我们可以通过近似 $T_0(s) \\approx 1$ 来分析系统。总传递函数变为：\n$$\nT(s) \\approx F(s) = \\frac{1}{\\tau_f s + 1}\n$$\n系统被近似为一个时间常数为 $\\tau_f$ 的一阶系统。这个近似系统的单位阶跃响应是：\n$$\ny(t) \\approx 1 - \\exp\\left(-\\frac{t}{\\tau_f}\\right)\n$$\n我们现在可以计算这个一阶响应的 10%–90% 上升时间。设 $t_{10}$ 是 $y(t_{10}) = 0.1$ 的时间，$t_{90}$ 是 $y(t_{90}) = 0.9$ 的时间。\n$$\n0.1 = 1 - \\exp\\left(-\\frac{t_{10}}{\\tau_f}\\right) \\implies \\exp\\left(-\\frac{t_{10}}{\\tau_f}\\right) = 0.9 \\implies t_{10} = -\\tau_f \\ln(0.9)\n$$\n$$\n0.9 = 1 - \\exp\\left(-\\frac{t_{90}}{\\tau_f}\\right) \\implies \\exp\\left(-\\frac{t_{90}}{\\tau_f}\\right) = 0.1 \\implies t_{90} = -\\tau_f \\ln(0.1)\n$$\n上升时间 $t_r$ 是差值 $t_{90} - t_{10}$：\n$$\nt_r = t_{90} - t_{10} = \\left(-\\tau_f \\ln(0.1)\\right) - \\left(-\\tau_f \\ln(0.9)\\right) = \\tau_f \\left(\\ln(0.9) - \\ln(0.1)\\right)\n$$\n利用对数的性质，这可以简化为：\n$$\nt_r = \\tau_f \\ln\\left(\\frac{0.9}{0.1}\\right) = \\tau_f \\ln(9)\n$$\n问题指定了期望的上升时间为 $t_r = 0.18\\,\\text{s}$。我们现在可以求解 $\\tau_f$：\n$$\n0.18 = \\tau_f \\ln(9)\n$$\n$$\n\\tau_f = \\frac{0.18}{\\ln(9)}\n$$\n对该表达式进行数值计算：\n$$\n\\tau_f \\approx \\frac{0.18}{2.197224577...} \\approx 0.081921359... \\,\\text{s}\n$$\n预滤波器的转角频率为 $\\omega_c = 1/\\tau_f \\approx 1/0.08192 \\approx 12.2\\,\\text{rad/s}$。该频率在 $[0, 15]\\,\\text{rad/s}$ 的范围内，在此范围内 $|T_0(\\mathrm{j}\\omega)|$ 被指出介于 $0.99$ 和 $1.01$ 之间。因此，主导极点近似是合理的，因为预滤波器显著减慢了系统，并且其动态特性发生在内回路 $T_0(s)$ 表现为近乎完美的增益 $1$ 的频率范围内。\n\n按要求将 $\\tau_f$ 的结果四舍五入到四位有效数字，得到 $0.08192$。", "answer": "$$\n\\boxed{0.08192}\n$$", "id": "2734712"}, {"introduction": "理论上的控制设计最终必须在数字硬件上实现，而有限的计算精度可能会引入非预期的行为。这项高级练习探讨了两种常见的离散PID实现方式（位置式与速度式）之间的实际差异。你将分析量化误差的传播方式，并确定为确保两种算法在数值上等效所需的最小位深度，这在​​高完整性控制系统的设计中是至关重要的考量。[@problem_id:2734742]", "problem": "一个数字控制器为一个单输入单输出采样数据系统实现了一个比例-积分-微分 (PID) 补偿器。考虑了两种离散时间实现方式：\n\n- 位置形式：在采样索引 $k \\in \\mathbb{Z}$ 处的控制指令为\n$$u[k] = \\mathrm{sat}\\!\\left( u_{\\mathrm{unsat}}[k] \\right), \\quad u_{\\mathrm{unsat}}[k] = Q_{b}\\!\\left( K_{p}\\,e[k] + I[k] + D[k] \\right),$$\n其中积分更新为\n$$I[k] = Q_{b}\\!\\left( I[k-1] + K_{i}\\,T\\,e[k] \\right),$$\n且微分项通过后向差分实现\n$$D[k] = Q_{b}\\!\\left( K_{d}\\,\\frac{e[k]-e[k-1]}{T} \\right)。$$\n\n- 速度形式：增量指令为\n$$\\Delta u[k] = Q_{b}\\!\\left( K_{p}\\,(e[k]-e[k-1]) + K_{i}\\,T\\,e[k] + K_{d}\\,\\frac{e[k] - 2\\,e[k-1] + e[k-2]}{T} \\right),$$\n控制指令为\n$$u[k] = \\mathrm{sat}\\!\\left( Q_{b}\\!\\left( u[k-1] + \\Delta u[k] \\right) \\right)。$$\n\n此处，$e[k]$ 是跟踪误差，$T$ 是采样周期，$\\mathrm{sat}(\\cdot)$ 是具有对称限制 $\\pm U_{\\max}$ 的执行器饱和，而 $Q_{b}(\\cdot)$ 是一个定点舍入运算符，它将数值舍入到最接近的最低有效步长 $S = 2^{-b}$ 的倍数。被控对象使得闭环操作满足以下条件：\n\n- 传感器在分辨率为 $r = 2^{-8}$ 的均匀网格上提供 $e[k]$，即对于所有 $k$，$e[k] \\in r\\,\\mathbb{Z}$。\n- 执行器饱和边界为 $\\pm U_{\\max}$，其中 $U_{\\max}  0$ 是给定的，但在数值上不需要。\n- 在所考虑的操作下，对于所有 $k$，未饱和的控制信号满足 $|u_{\\mathrm{unsat}}[k]|  U_{\\max}$，因此 $\\mathrm{sat}(\\cdot)$ 的作用等同于恒等函数。\n- 所有乘法都以实数算术精确计算，然后如式中所写由 $Q_{b}(\\cdot)$ 进行一次舍入；加法在明确显示的位置由 $Q_{b}(\\cdot)$ 进行舍入。\n- 初始条件对齐：$u[-1] = 0$，$I[-1] = 0$，$e[-1] = 0$ 和 $e[-2] = 0$。\n\n离散时间比例-积分-微分 (PID) 增益和采样周期为\n$$K_{p} = \\frac{13}{16}, \\quad K_{i} = \\frac{3}{64}, \\quad K_{d} = \\frac{5}{128}, \\quad T = \\frac{1}{32}。$$\n\n仅从采样信号、有限精度量化和所述离散时间PID更新的核心定义出发，确定小数位数 $b$ 的最小整数值，使得对于任何保持操作不饱和的序列 $e[k] \\in r\\,\\mathbb{Z}$，在给定的舍入模型下，位置形式和速度形式的实现能在每个采样点上产生完全相同（逐位相同）的序列 $u[k]$。将你的答案报告为一个整数（无单位）。", "solution": "用户希望找到所需的小数位数 $b$ 的最小整数值，以使比例-积分-微分 (PID) 控制器的位置形式和速度形式实现产生相同的输出序列 $u[k]$。\n\n### 步骤1：问题验证\n\n根据验证标准对问题陈述进行分析。\n- **已知条件提取**：\n  - 位置形式： $u_P[k] = \\mathrm{sat}(Q_{b}( K_{p}\\,e[k] + I[k] + D[k] ))$，其中 $I[k] = Q_{b}( I[k-1] + K_{i}\\,T\\,e[k] )$ 且 $D[k] = Q_{b}( K_{d}\\,(e[k]-e[k-1])/T )$。\n  - 速度形式： $u_V[k] = \\mathrm{sat}( Q_{b}( u[k-1] + \\Delta u[k] ) )$，其中 $\\Delta u[k] = Q_{b}( K_{p}\\,(e[k]-e[k-1]) + K_{i}\\,T\\,e[k] + K_{d}\\,(e[k] - 2\\,e[k-1] + e[k-2])/T )$。\n  - 参数： $K_{p} = \\frac{13}{16}$，$K_{i} = \\frac{3}{64}$，$K_{d} = \\frac{5}{128}$，$T = \\frac{1}{32}$。\n  - 量化：$Q_{b}(\\cdot)$ 将数值舍入到最接近的 $S = 2^{-b}$ 的倍数。误差信号 $e[k]$ 是 $r=2^{-8}$ 的倍数，因此对于某个整数 $n_k$，$e[k] = n_k r = n_k 2^{-8}$。\n  - 条件：初始条件为零 ($u[-1]=0, I[-1]=0, e[-1]=0, e[-2]=0$)。饱和不被激活，因此 $\\mathrm{sat}(x) = x$。\n\n- **验证结论**：\n  - 该问题在科学上基于数字控制理论和定点算术，这是工程学中的一个标准课题。\n  - 问题提法清晰、客观、自洽，并提供了所有必要的参数和方程。\n  - 该问题并非无足轻重；它需要仔细分析量化误差在两种计算结构中如何以不同方式传播。\n  - 该问题是有效的。\n\n### 步骤2：求解推导\n\n目标是找到最小整数 $b$，使得对于任何有效的误差序列 $e[k]$，两种形式的输出都相同，即对所有 $k \\ge 0$ 都有 $u_P[k] = u_V[k]$。由于饱和不被激活，我们可以忽略 $\\mathrm{sat}(\\cdot)$ 运算符。\n\n首先，我们分析速度形式。输出更新为 $u_V[k] = Q_b( u_V[k-1] + \\Delta u_V[k] )$。\n增量 $\\Delta u_V[k]$ 是量化器 $Q_b$ 的输出，因此它是最低有效步长 $S = 2^{-b}$ 的整数倍。\n初始条件是 $u_V[-1]=0$。通过归纳法，$u_V[k-1]$ 始终是 $S$ 的倍数。\n因此，和 $u_V[k-1] + \\Delta u_V[k]$ 也是 $S$ 的倍数。作用于 $S$ 的倍数的量化器 $Q_b$ 是恒等函数。\n所以，对于速度形式，更新简化为 $u_V[k] = u_V[k-1] + \\Delta u_V[k]$。这是一个纯粹的累加：$u_V[k] = u_V[-1] + \\sum_{j=0}^{k} \\Delta u_V[j] = \\sum_{j=0}^{k} \\Delta u_V[j]$。\n\n为了使两种形式相同，我们必须对所有 $k \\ge 0$ 都有 $u_P[k] = u_V[k]$。在初始条件 $u_P[-1] = u_V[-1] = 0$ 的情况下，这等价于要求对所有 $k \\ge 0$，增量都相同：\n$$u_P[k] - u_P[k-1] = u_V[k] - u_V[k-1] = \\Delta u_V[k]$$\n主要的挑战在于 $u_P[k]$ 不是一个简单的和，而是在每一步都从量化后的状态变量 $I[k]$ 和 $D[k]$ 重新计算。条件 $u_P[k] - u_P[k-1] = \\Delta u_V[k]$ 必须对任何序列 $e[k]$（即对任何整数序列 $n_k$）都成立。\n\n两种形式等价的一个充分条件是所有量化操作都引入零误差。这意味着每个 $Q_b(\\cdot)$ 函数调用的参数都已经是量化步长 $S = 2^{-b}$ 的整数倍。如果这个条件成立，那么算术运算就变得精确（在定点网格内），两种形式的等价性就简化为它们的理想情况下的代数等价性。\n\n让我们找出作为 $Q_b(\\cdot)$ 运算符参数的所有值，并确定 $b$ 满足什么条件才能使这些值成为 $S=2^{-b}$ 的倍数。误差信号是 $e[k] = n_k 2^{-8}$，其中 $n_k \\in \\mathbb{Z}$。\n\n1.  **积分项参数**：\n    $K_{i}\\,T\\,e[k] = \\left(\\frac{3}{64}\\right) \\left(\\frac{1}{32}\\right) (n_k 2^{-8}) = \\frac{3}{2^6 \\cdot 2^5} n_k 2^{-8} = 3 n_k 2^{-19}$。\n    为了使其对于任何整数 $n_k$ 都是 $2^{-b}$ 的整数倍，当 $n_k=1$ 时的值，即 $3 \\cdot 2^{-19}$，必须是 $2^{-b}$ 的整数倍。这要求对于某个整数 $m$ 有 $3 \\cdot 2^{-19} = m \\cdot 2^{-b}$。这意味着 $m = 3 \\cdot 2^{b-19}$，如果 $b-19 \\ge 0$，$m$ 就是一个整数，所以 $b \\ge 19$。\n\n2.  **微分项参数**：\n    $K_{d}\\,\\frac{e[k]-e[k-1]}{T} = \\frac{5/128}{1/32} (n_k-n_{k-1})2^{-8} = \\frac{5 \\cdot 32}{128} (n_k-n_{k-1})2^{-8} = \\frac{5}{4}(n_k-n_{k-1})2^{-8} = 5(n_k-n_{k-1})2^{-10}$。\n    为了使其对于任何整数 $n_k, n_{k-1}$ 都是 $2^{-b}$ 的倍数，值 $5 \\cdot 2^{-10}$ 必须是 $2^{-b}$ 的倍数。这要求 $m = 5 \\cdot 2^{b-10}$ 是一个整数，如果 $b-10 \\ge 0$，这是成立的，所以 $b \\ge 10$。\n\n3.  **速度增量参数**：这是来自比例、积分和微分作用的三个分量的和。\n    - P项： $K_{p}(e[k]-e[k-1]) = \\frac{13}{16}(n_k-n_{k-1})2^{-8} = 13(n_k-n_{k-1})2^{-12}$。\n    - I项： $K_i T e[k] = 3 n_k 2^{-19}$。\n    - D项： $K_d \\frac{e[k]-2e[k-1]+e[k-2]}{T} = 5(n_k-2n_{k-1}+n_{k-2})2^{-10}$。\n    为了分析这个和，我们找到一个公分母。分母中 2 的最高次幂是 $2^{19}$。\n    和 = $13(n_k-n_{k-1})2^7 \\cdot 2^{-19} + 3n_k \\cdot 2^{-19} + 5(n_k-2n_{k-1}+n_{k-2})2^9 \\cdot 2^{-19}$。\n    和 = $[1664(n_k-n_{k-1}) + 3n_k + 2560(n_k-2n_{k-1}+n_{k-2})] \\cdot 2^{-19}$。\n    由于方括号中的系数是整数，整个和是 $2^{-19}$ 的整数倍。为了使其对于任何 $e[k]$ 都是 $2^{-b}$ 的倍数，我们需要 $b \\ge 19$。\n\n4.  **位置形式输出参数**：这是 `arg`$_P[k] = K_p e[k] + I[k] + D[k]$。如果 $b \\ge 19$，则满足 (1) 和 (2) 的条件，因此作用于 `I` 和 `D` 项的 $Q_b$ 是恒等函数。\n    $I[k] = \\sum_{j=0}^{k} K_i T e[j] = (\\sum_{j=0}^{k} 3n_j) 2^{-19}$。\n    $D[k] = K_d \\frac{e[k]-e[k-1]}{T} = 5(n_k-n_{k-1})2^{-10}$。\n    位置形式中最终 $Q_b$ 的参数是：\n    `arg`$_P[k] = 13n_k 2^{-12} + (\\sum 3n_j) 2^{-19} + 5(n_k-n_{k-1})2^{-10}$。\n    将其表示为 $2^{-19}$ 的倍数： `arg`$_P[k] = [1664 n_k + 3\\sum n_j + 2560(n_k-n_{k-1})] \\cdot 2^{-19}$。\n    括号中的项是整数。因此，`arg`$_P[k]$ 是 $2^{-19}$ 的整数倍。为了使其成为 $2^{-b}$ 的倍数，我们需要 $b \\ge 19$。\n\n所有四个条件都要求 $b \\ge 19$ 以便“零误差”情况成立。让我们整合一下当设置 $b \\ge 19$ 时的结论：\n- 所有 $Q_b$ 运算符的所有参数都是 $2^{-b}$ 的整数倍。\n- 这意味着对于所有内部计算，$Q_b(x) = x$。\n- 位置形式变为 $u_P[k] = u_{ideal}[k]$，其中 $u_{ideal}[k]$ 是理想的、无限精度的输出。\n- 速度形式变为 $u_V[k] = \\sum_{j=0}^k \\Delta u_{ideal}[j] = u_{ideal}[k] - u_{ideal}[-1]$。由于初始条件导致 $u_{ideal}[-1]=0$，我们有 $u_V[k] = u_{ideal}[k]$。\n- 因此，对于 $b \\ge 19$，我们有 $u_P[k] = u_V[k] = u_{ideal}[k]$。\n\n这证明了 $b=19$ 是一个充分条件。为了证明它是最小值，我们必须证明任何 $b  19$ 的情况都会失败。\n如果 $b=18$，项 $K_i T e[k] = 3n_k 2^{-19} = 1.5 n_k 2^{-18}$。当 $n_k=1$ 时，这不是 $S=2^{-18}$ 的倍数。在计算 $I[k]$ 时会引入一个舍入误差。对于某个误差序列 $e[k]$，这个误差可以传播并导致两种形式之间出现差异。虽然特定的简单序列可能由于偶然的抵消而不会揭示这种差异，但问题要求对*任何*序列都等价。确保这一点的最稳健方法是在源头防止舍入误差。\n限制因素是项 $K_i T e[k]$，它要求 $b \\ge 19$。因此，$b$ 的最小整数值是 19。", "answer": "$$\\boxed{19}$$", "id": "2734742"}]}
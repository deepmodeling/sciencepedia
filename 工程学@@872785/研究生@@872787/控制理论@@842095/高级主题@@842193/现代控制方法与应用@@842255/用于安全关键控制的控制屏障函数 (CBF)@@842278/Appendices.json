{"hands_on_practices": [{"introduction": "本节的第一个实践练习至关重要。它将引导您体验控制屏障函数（CBF）的核心机制：如何将一个高层次的安全性需求，转化为一个对控制输入的具体、可解的约束。通过从第一性原理出发解决这个线性系统的例子，您将清晰地理解李导数条件如何分离出控制变量，并定义所有保证安全的允许控制行为的集合 [@problem_id:2695281]。", "problem": "考虑线性控制仿射系统 $\\dot{x} = A x + B u$，其状态为 $x \\in \\mathbb{R}^{2}$，控制为标量 $u \\in \\mathbb{R}$。安全集由线性函数 $h(x) = c^{\\top} x + d$ 的超水平集定义，即 $\\mathcal{S} = \\{ x \\in \\mathbb{R}^{2} \\mid h(x) \\ge 0 \\}$。通过要求 $h$ 沿轨迹的导数在当前状态 $x$ 满足 $\\dot{h}(x,u) + \\gamma h(x) \\ge 0$，来施加一个带有指数率参数 $\\gamma  0$ 的控制屏障函数 (CBF) 条件。这是标准指数 CBF 条件，在可行时确保 $\\mathcal{S}$ 的前向不变性。\n\n从李导数的基本定义和上述不等式出发（不假设任何闭式结果），推导满足 CBF 不等式的容许控制输入集，针对特定的系统和屏障数据\n$$\nA = \\begin{pmatrix} 0  1 \\\\ -2  -3 \\end{pmatrix}, \\quad\nB = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}, \\quad\nc = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}, \\quad\nd = 1,\n$$\n在状态\n$$\nx = \\begin{pmatrix} 1 \\\\ -2 \\end{pmatrix}\n$$\n处求值。\n假设存在硬输入边界 $|u| \\le U_{\\max}$，其中 $U_{\\max} = 3$。您的任务是计算同时满足 CBF 不等式 $\\dot{h}(x,u) + \\gamma h(x) \\ge 0$ 和输入边界 $|u| \\le U_{\\max}$ 的容许控制 $u$ 的区间，并以 $\\gamma$ 的函数形式明确表示为区间端点。\n\n此外，请从基本不等式和给定数据出发，分析容许区间如何依赖于 $\\gamma$（当 $\\gamma$ 变化时的单调性和可行性）；在推导过程中提供一个逻辑严谨的定性描述。\n\n请以一个 $1 \\times 2$ 行向量的形式给出您的最终答案，其中包含容许区间的下端点和上端点，表示为关于 $\\gamma$ 的闭式解析表达式。不需要进行数值四舍五入，也不需要单位。不要以不等式或方程作为最终答案；仅按指定格式提供区间端点。", "solution": "该问题要求推导一个受控制屏障函数 (CBF) 约束和执行器限制的线性控制仿射系统的容许控制区间。推导必须从第一性原理出发。\n\n系统动力学由 $\\dot{x} = Ax + Bu$ 给出，其中 $x \\in \\mathbb{R}^{2}$ 且 $u \\in \\mathbb{R}$。安全集定义为 $\\mathcal{S} = \\{ x \\in \\mathbb{R}^{2} \\mid h(x) \\ge 0 \\}$，其中屏障函数为 $h(x) = c^{\\top}x + d$。安全条件通过指数 CBF 不等式强制执行：\n$$\n\\dot{h}(x,u) + \\gamma h(x) \\ge 0\n$$\n其中 $\\gamma  0$ 是给定的速率参数。沿系统轨迹的 $h(x)$ 的时间导数 $\\dot{h}(x,u)$ 由链式法则给出：$\\dot{h}(x,u) = \\frac{\\partial h}{\\partial x} \\dot{x}$。对于一个控制仿射系统，这展开为：\n$$\n\\dot{h}(x,u) = \\frac{\\partial h}{\\partial x} (Ax + Bu) = \\frac{\\partial h}{\\partial x}Ax + \\frac{\\partial h}{\\partial x}Bu\n$$\n这些项是 $h$ 关于系统漂移和控制向量场的李导数，记为 $L_f h(x) = \\frac{\\partial h}{\\partial x}Ax$ 和 $L_g h(x) = \\frac{\\partial h}{\\partial x}B$。因此，CBF 不等式可以写为：\n$$\nL_f h(x) + L_g h(x) u + \\gamma h(x) \\ge 0\n$$\n我们必须首先使用提供的数据计算每一项：\n$$\nA = \\begin{pmatrix} 0  1 \\\\ -2  -3 \\end{pmatrix}, \\quad\nB = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}, \\quad\nc = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}, \\quad\nd = 1\n$$\n屏障函数是 $h(x) = c^{\\top}x + d = \\begin{pmatrix} 0  1 \\end{pmatrix} \\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix} + 1 = x_2 + 1$。\n$h(x)$ 的梯度是常数：$\\frac{\\partial h}{\\partial x} = \\nabla h(x)^{\\top} = c^{\\top} = \\begin{pmatrix} 0  1 \\end{pmatrix}$。\n\n现在我们计算李导数项：\n$L_f h(x) = c^{\\top} A x = \\begin{pmatrix} 0  1 \\end{pmatrix} \\begin{pmatrix} 0  1 \\\\ -2  -3 \\end{pmatrix} x = \\begin{pmatrix} -2  -3 \\end{pmatrix} \\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix} = -2x_1 - 3x_2$。\n$L_g h(x) = c^{\\top} B = \\begin{pmatrix} 0  1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} = 1$。\n\n问题要求在特定状态 $x = \\begin{pmatrix} 1 \\\\ -2 \\end{pmatrix}$ 处进行评估。我们在此状态下计算 $h(x)$ 和 $L_f h(x)$ 的值：\n$h(\\begin{pmatrix} 1 \\\\ -2 \\end{pmatrix}) = (-2) + 1 = -1$。\n$L_f h(\\begin{pmatrix} 1 \\\\ -2 \\end{pmatrix}) = -2(1) - 3(-2) = -2 + 6 = 4$。\n$L_g h(x)$ 的值是常数，等于 1。\n\n将这些数值代入 CBF 不等式：\n$$\n4 + (1)u + \\gamma(-1) \\ge 0\n$$\n$$\n4 + u - \\gamma \\ge 0\n$$\n求解控制输入 $u$，我们得到由 CBF 条件施加的约束：\n$$\nu \\ge \\gamma - 4\n$$\n这个不等式定义了确保系统状态以至少为指定的指数率 $\\gamma$ 向安全区域 $\\mathcal{S}$ 移动的控制集合。\n\n除了 CBF 约束外，控制输入还受到执行器限制 $|u| \\le U_{\\max}$，其中 $U_{\\max} = 3$。这对应于闭区间：\n$$\n-3 \\le u \\le 3\n$$\n容许控制输入的集合必须同时满足这两个约束。因此，我们求这两个集合的交集：\n$$\n\\{ u \\in \\mathbb{R} \\mid u \\ge \\gamma - 4 \\} \\cap \\{ u \\in \\mathbb{R} \\mid -3 \\le u \\le 3 \\}\n$$\n由此产生的 $u$ 的容许区间为 $[\\max(-3, \\gamma-4), 3]$。\n为使该区间非空，下界必须小于或等于上界：$\\max(-3, \\gamma-4) \\le 3$。当且仅当 $\\gamma - 4 \\le 3$ 时，此式成立，可简化为 $\\gamma \\le 7$。由于给定 $\\gamma  0$，因此对于任何 $\\gamma \\in (0, 7]$，该问题都是可行的。\n\n现在，我们分析这个容许区间对参数 $\\gamma$ 的依赖性。\nCBF 所需的控制下界 $u_{min, CBF} = \\gamma - 4$ 随 $\\gamma$ 线性增加。这是因为更大的 $\\gamma$ 指定了更严格的安全要求（向安全集收敛的速度更快），这需要更强的控制作用。\n$u$ 的容许区间是 $[\\max(-3, \\gamma-4), 3]$。\n- 如果 $0  \\gamma \\le 1$，则 $\\gamma - 4 \\le -3$。在这种情况下，CBF 约束比执行器的下限更宽松。区间的下界是 $\\max(-3, \\gamma-4) = -3$。容许区间是 $[-3, 3]$，意味着全部控制权限都可用。\n- 如果 $1  \\gamma \\le 7$，则 $\\gamma - 4  -3$。CBF 约束成为活动的下界。容许区间是 $[\\gamma-4, 3]$。当 $\\gamma$ 在此范围内增加时，下界 $\\gamma-4$ 增加，而区间的长度，即 $3 - (\\gamma-4) = 7-\\gamma$，会缩小。这说明了权衡关系：更严格的安全性（更高的 $\\gamma$）会减少控制自由度。\n- 在可行性极限 $\\gamma = 7$ 时，区间退化为单点 $[3, 3]$，迫使唯一的控制选择为 $u=3$。\n- 如果 $\\gamma  7$，条件 $u \\ge \\gamma - 4$ 无法被任何 $u \\in [-3, 3]$ 满足，因此容许集为空，安全目标不可行。\n\n对于可行的情况，容许区间的端点表示为 $\\gamma$ 的函数为：\n下端点：$u_{min} = \\max(\\gamma-4, -3)$\n上端点：$u_{max} = 3$\n\n这些表达式构成了区间端点的闭式解析表示。", "answer": "$$\n\\boxed{\\begin{pmatrix} \\max(\\gamma-4, -3)  3 \\end{pmatrix}}\n$$", "id": "2695281"}, {"introduction": "对于一个给定的安全集，可以用无穷多个不同的屏障函数来表示。这个练习探讨了CBF设计中一个关键而微妙的方面：屏障函数 $h(x)$ 本身的选择并非无足轻重。您将看到，代表同一安全区域的两个不同函数，其在边界上的梯度大小可能不同，而这直接影响到最终安全约束的“强度”以及控制器的行为 [@problem_id:2695290]。", "problem": "考虑一个状态为 $x \\in \\mathbb{R}^{2}$ 的平面系统，其圆形安全集为 $C = \\{ x \\in \\mathbb{R}^{2} : \\|x\\| \\le R \\}$，其中半径 $R  0$ 为一固定值。根据控制障碍函数 (CBF) 的定义，如果一个连续可微函数 $h : \\mathbb{R}^{2} \\to \\mathbb{R}$ 满足 $C = \\{ x : h(x) \\ge 0 \\}$ 且其边界 $\\partial C$ 与 $\\{ x : h(x) = 0 \\}$ 重合，则该函数表示安全集 $C$。从这个定义和标准多变量微积分（梯度、链式法则）出发，完成以下任务：\n\n1) 构造两个表示同一安全集 $C$ 的 $C^{1}$ 障碍函数 $h_{1}$ 和 $h_{2}$：\n- 令 $h_{1}(x) = R^{2} - \\|x\\|^{2}$。\n- 令 $h_{2}(x) = \\exp\\!\\big(\\alpha\\,(R^{2} - \\|x\\|^{2})\\big) - 1$，其中 $\\alpha = \\frac{5}{2}$。\n\n从基本原理出发，验证 $h_{1}$ 和 $h_{2}$ 都表示同一个安全集 $C$。\n\n2) 计算梯度 $\\nabla h_{1}(x)$ 和 $\\nabla h_{2}(x)$，并在边界点 $x_{b} = \\begin{pmatrix} R \\\\ 0 \\end{pmatrix} \\in \\partial C$ 处计算它们的值。\n\n3) 定义标量比率\n$$\n\\rho \\;=\\; \\frac{\\|\\nabla h_{2}(x_{b})\\|}{\\|\\nabla h_{1}(x_{b})\\|}.\n$$\n对于给定的 $\\alpha = \\frac{5}{2}$，精确计算 $\\rho$。将最终答案报告为一个不进行四舍五入的实数。", "solution": "解答按要求分三部分进行。设状态向量为 $x = \\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix}$，因此其范数的平方为 $\\|x\\|^{2} = x_{1}^{2} + x_{2}^{2}$。\n\n**第1部分：安全集表示的验证**\n\n首先，考虑 $h_{1}(x) = R^{2} - \\|x\\|^{2}$。该函数是关于 $x$ 各分量的多项式，因此是无限次可微的 ($C^{\\infty}$)，这满足 $C^{1}$ 的要求。\n条件 $h_{1}(x) \\ge 0$ 等价于 $R^{2} - \\|x\\|^{2} \\ge 0$，可简化为 $R^{2} \\ge \\|x\\|^{2}$。由于 $R$ 和 $\\|x\\|$ 都是非负的，这等价于 $R \\ge \\|x\\|$，这正是安全集 $C$ 的定义。因此，$\\{x : h_{1}(x) \\ge 0\\} = C$。\n条件 $h_{1}(x) = 0$ 等价于 $R^{2} - \\|x\\|^{2} = 0$，即 $\\|x\\| = R$。这是边界 $\\partial C$ 的定义。因此，$\\{x : h_{1}(x) = 0\\} = \\partial C$。\n函数 $h_{1}(x)$ 正确地表示了安全集 $C$。\n\n接下来，考虑 $h_{2}(x) = \\exp(\\alpha(R^{2} - \\|x\\|^{2})) - 1$，其中 $\\alpha = \\frac{5}{2}$。指数函数的自变量是一个多项式，指数函数本身是 $C^{\\infty}$ 的。$C^{\\infty}$ 函数的复合和求和仍然是 $C^{\\infty}$ 的，所以 $h_{2}(x)$ 是 $C^{\\infty}$ 的，因此也是 $C^{1}$ 的。\n条件 $h_{2}(x) \\ge 0$ 等价于 $\\exp(\\alpha(R^{2} - \\|x\\|^{2})) - 1 \\ge 0$，即 $\\exp(\\alpha(R^{2} - \\|x\\|^{2})) \\ge 1$。\n由于自然对数函数是严格递增的，对两边取对数会保持不等式不变：$\\ln(\\exp(\\alpha(R^{2} - \\|x\\|^{2}))) \\ge \\ln(1)$，得到 $\\alpha(R^{2} - \\|x\\|^{2}) \\ge 0$。\n鉴于 $\\alpha = \\frac{5}{2}  0$，该不等式成立当且仅当 $R^{2} - \\|x\\|^{2} \\ge 0$，这与 $h_{1}(x)$ 的条件相同。如前所示，这定义了集合 $C$。\n条件 $h_{2}(x) = 0$ 等价于 $\\exp(\\alpha(R^{2} - \\|x\\|^{2})) = 1$。这意味着 $\\alpha(R^{2} - \\|x\\|^{2}) = 0$。由于 $\\alpha \\ne 0$，这要求 $R^{2} - \\|x\\|^{2} = 0$，这定义了边界 $\\partial C$。\n函数 $h_{2}(x)$ 也正确地表示了同一个安全集 $C$。\n\n**第2部分：梯度计算**\n\n首先，我们计算 $h_{1}(x) = R^{2} - (x_{1}^{2} + x_{2}^{2})$ 的梯度。\n$$\n\\nabla h_{1}(x) = \\begin{pmatrix} \\frac{\\partial h_{1}}{\\partial x_{1}} \\\\ \\frac{\\partial h_{1}}{\\partial x_{2}} \\end{pmatrix} = \\begin{pmatrix} -2x_{1} \\\\ -2x_{2} \\end{pmatrix} = -2x\n$$\n在边界点 $x_{b} = \\begin{pmatrix} R \\\\ 0 \\end{pmatrix}$ 处，梯度为：\n$$\n\\nabla h_{1}(x_{b}) = -2 \\begin{pmatrix} R \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} -2R \\\\ 0 \\end{pmatrix}\n$$\n\n接下来，我们计算 $h_{2}(x)$ 的梯度。我们观察到 $h_{2}(x)$ 可以写成 $h_{1}(x)$ 的函数：$h_{2}(x) = \\exp(\\alpha h_{1}(x)) - 1$。\n使用链式法则，其梯度为：\n$$\n\\nabla h_{2}(x) = \\nabla \\left( \\exp(\\alpha h_{1}(x)) - 1 \\right) = \\exp(\\alpha h_{1}(x)) \\cdot \\nabla(\\alpha h_{1}(x)) = \\alpha \\exp(\\alpha h_{1}(x)) \\nabla h_{1}(x)\n$$\n我们在点 $x_{b}$ 处计算该表达式的值。首先，我们计算 $h_{1}(x_{b})$：\n$$\nh_{1}(x_{b}) = R^{2} - \\|x_{b}\\|^{2} = R^{2} - \\left( R^{2} + 0^{2} \\right) = 0\n$$\n将此代入 $\\nabla h_{2}(x)$ 的表达式中：\n$$\n\\nabla h_{2}(x_{b}) = \\alpha \\exp(\\alpha \\cdot 0) \\nabla h_{1}(x_{b}) = \\alpha \\exp(0) \\nabla h_{1}(x_{b}) = \\alpha \\cdot 1 \\cdot \\nabla h_{1}(x_{b}) = \\alpha \\nabla h_{1}(x_{b})\n$$\n代入 $\\nabla h_{1}(x_{b})$ 的值和 $\\alpha = \\frac{5}{2}$：\n$$\n\\nabla h_{2}(x_{b}) = \\frac{5}{2} \\begin{pmatrix} -2R \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} -5R \\\\ 0 \\end{pmatrix}\n$$\n\n**第3部分：比率计算**\n\n比率 $\\rho$ 定义为 $\\rho = \\frac{\\|\\nabla h_{2}(x_{b})\\|}{\\|\\nabla h_{1}(x_{b})\\|}$。\n首先，我们计算在 $x_{b}$ 处的梯度范数。\n$$\n\\|\\nabla h_{1}(x_{b})\\| = \\left\\| \\begin{pmatrix} -2R \\\\ 0 \\end{pmatrix} \\right\\| = \\sqrt{(-2R)^{2} + 0^{2}} = \\sqrt{4R^{2}} = 2R\n$$\n注意，我们使用 $|2R| = 2R$ 是因为问题指明了 $R  0$。\n$$\n\\|\\nabla h_{2}(x_{b})\\| = \\left\\| \\begin{pmatrix} -5R \\\\ 0 \\end{pmatrix} \\right\\| = \\sqrt{(-5R)^{2} + 0^{2}} = \\sqrt{25R^{2}} = 5R\n$$\n或者，使用第2部分中的关系：\n$$\n\\|\\nabla h_{2}(x_{b})\\| = \\|\\alpha \\nabla h_{1}(x_{b})\\| = |\\alpha| \\|\\nabla h_{1}(x_{b})\\|\n$$\n由于 $\\alpha = \\frac{5}{2}  0$，我们有 $|\\alpha| = \\alpha$。\n现在，我们计算比率 $\\rho$：\n$$\n\\rho = \\frac{\\|\\nabla h_{2}(x_{b})\\|}{\\|\\nabla h_{1}(x_{b})\\|} = \\frac{\\alpha \\|\\nabla h_{1}(x_{b})\\|}{\\|\\nabla h_{1}(x_{b})\\|}\n$$\n由于 $R  0$，$\\nabla h_{1}(x_{b})$ 不是零向量，其范数 $\\|\\nabla h_{1}(x_{b})\\| = 2R$ 非零。因此，我们可以消去范数：\n$$\n\\rho = \\alpha\n$$\n代入给定的值 $\\alpha = \\frac{5}{2}$：\n$$\n\\rho = \\frac{5}{2} = 2.5\n$$\n这个结果表明，虽然不同的障碍函数可以表示同一个安全集，但它们在边界上的梯度大小可能不同。这个大小在 CBF 约束的构建中至关重要，因此 $h(x)$ 的选择直接影响最终的安全控制律。", "answer": "$$\\boxed{2.5}$$", "id": "2695290"}, {"introduction": "尽管CBF理论是在连续时间内建立的，但控制器是在数字硬件上以离散的采样间隔实现的。本练习旨在解决在采样数据系统中确保安全性的关键问题，因为离散化误差可能导致在采样点之间违反约束。您将推导出一个“紧缩”项来增强CBF约束的鲁棒性，从而即使在离散化之后也能为系统安全提供形式化的保证 [@problem_id:2695318]。", "problem": "考虑一个控制仿射系统，其状态为 $x \\in \\mathbb{R}^{n}$，输入为 $u \\in \\mathbb{R}^{m}$，由 $\\dot{x} = f(x) + g(x) u$ 控制，其中 $f$ 和 $g$ 是局部利普希茨向量场。设 $h: \\mathbb{R}^{n} \\to \\mathbb{R}$ 是一个连续可微的控制屏障函数，它定义了安全集 $\\mathcal{C} = \\{ x \\in \\mathbb{R}^{n} : h(x) \\ge 0 \\}$。通过不等式 $\\dot{h}(x,u) + \\alpha(h(x)) \\ge 0$ 来施加一个连续时间安全条件，其中 $\\alpha$ 是一个扩展 $\\mathcal{K}$ 类函数。控制器以零阶保持 (ZOH) 方式进行数字实现，采样周期为 $\\Delta  0$，并且在每个采样时刻 $t_{k}$，一个二次规划 (QP) 会强制执行瞬时约束 $\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) \\ge \\eta(\\Delta)$，其中某个收紧项 $\\eta(\\Delta)$ 有待确定，而 $x_{k} = x(t_{k})$ 且 $u_{k}$ 在 $[t_{k}, t_{k+1})$ 上保持恒定，其中 $t_{k+1} = t_{k} + \\Delta$。\n\n为了分析离散化效应，使用应用于复合函数 $t \\mapsto h(x(t))$ 的前向欧拉法的局部截断误差界作为基本依据：存在一个已知常数 $K \\ge 0$，使得对于所有 $k$ 和所有在包含 $\\mathcal{C}$ 的紧致前向不变集中的容许对 $(x_{k}, u_{k})$，单步误差满足\n$$\n\\left| h(x(t_{k+1})) - h(x(t_{k})) - \\Delta \\, \\dot{h}(x_{k},u_{k}) \\right| \\le \\frac{1}{2} K \\Delta^{2}.\n$$\n假设您希望保证的离散时间安全代理条件为\n$$\nh(x(t_{k+1})) - h(x(t_{k})) + \\Delta \\, \\alpha(h(x(t_{k}))) \\ge 0\n$$\n对于每个时间步和每个容许对 $(x_{k}, u_{k})$。\n\n从这些原则和事实出发，分析当 $\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) \\ge 0$ 在采样瞬间成立时，离散化误差如何可能违反离散时间安全代理条件，并推导出最小的收紧项 $\\eta^{\\star}(\\Delta)$，当该项用于采样时间 QP 约束 $\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) \\ge \\eta(\\Delta)$ 时，足以保证上述离散时间安全代理条件对所有步都成立。\n\n您的最终答案必须是仅用 $K$ 和 $\\Delta$ 表示的 $\\eta^{\\star}(\\Delta)$ 的单个闭式表达式。最终答案中不要包含任何不等式。", "solution": "目标是推导出最小的充分收紧项 $\\eta^{\\star}(\\Delta)$，使得在每个采样瞬间 $t_{k}$ 强制执行约束\n$$\n\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) \\ge \\eta^{\\star}(\\Delta)\n$$\n能保证离散时间安全代理条件\n$$\nh(x(t_{k+1})) - h(x(t_{k})) + \\Delta \\, \\alpha(h(x_{k})) \\ge 0\n$$\n对所有步 $k$ 都成立。此处，$x_{k}$ 表示 $x(t_{k})$，$u_{k}$ 是在 $[t_{k}, t_{k+1})$ 上施加的控制输入。\n\n分析的核心在于所给定的单步误差界，它通过区间开始时刻的导数将两个连续采样瞬间的状态联系起来。不等式\n$$\n\\left| h(x(t_{k+1})) - h(x_{k}) - \\Delta \\, \\dot{h}(x_{k},u_{k}) \\right| \\le \\frac{1}{2} K \\Delta^{2}\n$$\n等价于以下一对不等式：\n$$\n-\\frac{1}{2} K \\Delta^{2} \\le h(x(t_{k+1})) - h(x_{k}) - \\Delta \\, \\dot{h}(x_{k},u_{k}) \\le \\frac{1}{2} K \\Delta^{2}\n$$\n其中 $\\dot{h}(x_{k},u_{k}) = \\frac{\\partial h}{\\partial x}(x_k) \\cdot (f(x_k) + g(x_k)u_k)$。\n\n为满足目标安全代理条件，我们必须确保 $h(x(t_{k+1}))$ 足够大。因此，我们必须考虑最坏情况，这对应于 $h(x(t_{k+1}))$ 的下界。从上述复合不等式的左侧，我们可以建立 $h(x(t))$ 单步演化的一个下界：\n$$\nh(x(t_{k+1})) - h(x_{k}) \\ge \\Delta \\, \\dot{h}(x_{k},u_{k}) - \\frac{1}{2} K \\Delta^{2}\n$$\n这个不等式为单个采样周期内 $h$ 的变化提供了一个保证的下界。\n\n期望的离散时间安全代理条件是：\n$$\nh(x(t_{k+1})) - h(x_{k}) + \\Delta \\, \\alpha(h(x_{k})) \\ge 0\n$$\n为保证该条件成立，我们可以用项 $h(x(t_{k+1})) - h(x_{k})$ 的下界来替换它。这会得出一个更强的充分条件：\n$$\n\\left( \\Delta \\, \\dot{h}(x_{k},u_{k}) - \\frac{1}{2} K \\Delta^{2} \\right) + \\Delta \\, \\alpha(h(x_{k})) \\ge 0\n$$\n这个新不等式是一个充分条件，必须通过选择 $u_k$ 来满足，以保证离散时间安全性。现在我们必须将此条件重排为 QP 约束的形式，以确定所需的收紧项 $\\eta(\\Delta)$。\n\n两边同时加上 $\\frac{1}{2} K \\Delta^{2}$ 得到：\n$$\n\\Delta \\, \\dot{h}(x_{k},u_{k}) + \\Delta \\, \\alpha(h(x_{k})) \\ge \\frac{1}{2} K \\Delta^{2}\n$$\n由于采样周期 $\\Delta$ 是严格正的 ($\\Delta  0$)，我们可以用 $\\Delta$ 除以整个不等式而不改变不等号的方向：\n$$\n\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) \\ge \\frac{1}{2} K \\Delta\n$$\n这恰好是采样时间 QP 所强制执行的约束形式，即 $\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) \\ge \\eta(\\Delta)$。通过直接比较，我们发现设置 $\\eta(\\Delta) = \\frac{1}{2} K \\Delta$ 提供了一个充分条件。\n\n问题要求的是*最小的*此类充分项，$\\eta^{\\star}(\\Delta)$。推导表明任何 $\\eta(\\Delta) \\ge \\frac{1}{2} K \\Delta$ 都是充分的。局部截断误差的界是紧的，意味着存在系统动力学和状态，使得误差项 $h(x(t_{k+1})) - h(x_{k}) - \\Delta \\, \\dot{h}(x_{k},u_{k})$ 可以任意接近 $-\\frac{1}{2} K \\Delta^{2}$。在这种最坏情况下，如果我们选择 $\\eta(\\Delta)  \\frac{1}{2} K \\Delta$，就有可能选择一个控制量 $u_k$ 使得 $\\dot{h}(x_{k},u_{k}) + \\alpha(h(x_{k})) = \\eta(\\Delta)$。这将导致\n$$\n\\Delta \\, \\dot{h}(x_{k},u_{k}) + \\Delta \\, \\alpha(h(x_{k})) = \\Delta \\, \\eta(\\Delta)  \\frac{1}{2} K \\Delta^{2}\n$$\n这不足以保证安全性。因此，在此分析框架内，条件 $\\eta(\\Delta) \\ge \\frac{1}{2} K \\Delta$ 不仅是充分的，而且是必要的。满足此条件的最小值是等式成立时。\n\n因此，最小的充分收紧项是：\n$$\n\\eta^{\\star}(\\Delta) = \\frac{1}{2} K \\Delta\n$$", "answer": "$$\n\\boxed{\\frac{1}{2} K \\Delta}\n$$", "id": "2695318"}]}
## 应用与[交叉](@entry_id:147634)学科联系

在前面的章节中，我们已经建立了[模型预测控制](@entry_id:146965)（MPC）稳定性和[递归可行性](@entry_id:167169)的核心原理，主要集中在标称、无约束或简单约束的[线性系统](@entry_id:147850)上。这些原理，包括[终端约束](@entry_id:176488)集、终端代价和[李雅普诺夫稳定性](@entry_id:147734)论证，构成了MPC理论的基石。然而，现实世界的控制问题很少如此纯粹。它们充满了不确定性、[非线性](@entry_id:637147)、复杂的系统架构和计算上的限制。

本章的目标是展示MPC理论框架的强大功能和灵活性，探讨如何将前述章节的核心原理进行扩展、调整和整合，以解决更加多样化和具有挑战性的现实世界问题。我们将不再重复教学核心概念，而是演示它们在各种应用和[交叉](@entry_id:147634)学科背景下的效用。我们的探索将涵盖三个主要领域：首先，我们将研究如何使MPC具备鲁棒性，以应对外部干扰、测量噪声和[模型不确定性](@entry_id:265539)；其次，我们将拓宽MPC的应用范围，从传统的设定点跟踪扩展到经济优化，并处理具有时滞和混合逻辑等复杂动态的系统；最后，我们将探讨理论与实践之间的桥梁，解决由在线计算和网络化实现所带来的挑战。通过这些例子，读者将深刻理解MPC不仅仅是一个理论工具，更是一个适用于跨学科工程和科学领域复杂决策与控制问题的通用框架。

### 在不确定性下的鲁棒性

现实世界的系统很少能与它们的数学模型[完美匹配](@entry_id:273916)。不确定性是普遍存在的，它可能源于外部环境的不可预测干扰、传感器测量的噪声，或是系统模型本身的参数未知或时变。一个成功的控制策略必须能够在这种不确定性下保证安全（满足约束）和性能（实现控制目标）。本节将探讨几种主流的[鲁棒MPC](@entry_id:174393)设计方法。

#### 应对有界干扰：管道MPC与最小-最大化MPC

最常见的不确定性来源之一是持续存在的、有界的外部干扰和过程噪声。对于形如 $x_{k+1} = A x_k + B u_k + w_k$ 的系统，其中干扰 $w_k$ 属于一个已知的[紧集](@entry_id:147575) $\mathcal{W}$，我们必须保证在所有可能的干扰序列下，状态 $x_k$ 和输入 $u_k$ 始终保持在各自的约束集 $\mathcal{X}$ 和 $\mathcal{U}$ 内。

一种强大而广泛应用的方法是**基于管道的MPC（Tube-based MPC）**。其核心思想是将实际系统状态 $x_k$ 分解为一个标称状态 $z_k$ 和一个误差状态 $e_k = x_k - z_k$ 的和。[控制器设计](@entry_id:274982)也相应地分为两部分：一个标称MPC控制器计算标称输入序列 $v_k$，而一个辅助的线性反馈律 $u_k = v_k + K e_k$ 则用于[主动抑制](@entry_id:191436)误差。通过这种设计，误差动态被分离出来，形如 $e_{k+1} = (A+BK)e_k + w_k$。为了确保误差始终被约束在一个可控范围内，我们为误差动态设计一个鲁棒正不变（RPI）集 $\mathcal{E}$。该集合具有这样的性质：一旦误差 $e_k$ 进入 $\mathcal{E}$，那么在所有未来时刻，对于任何可能的干扰 $w_k \in \mathcal{W}$，误差 $e_{k+1}$ 都将保持在 $\mathcal{E}$ 内部。这个性质可以通过条件 $ (A+BK)\mathcal{E} \oplus \mathcal{W} \subseteq \mathcal{E} $ 来保证，其中 $\oplus$ 表示[闵可夫斯基和](@entry_id:176841)。一旦找到了这样的误差管道 $\mathcal{E}$，我们就可以通过**约束收紧**来保证鲁棒的[约束满足](@entry_id:275212)。具体而言，标称MPC控制器在规划时，其[状态和](@entry_id:193625)输入需要满足更严格的约束：$z_k \in \mathcal{X} \ominus \mathcal{E}$ 且 $v_k \in \mathcal{U} \ominus K\mathcal{E}$，其中 $\ominus$ 是庞特里亚金差。这样，即使在最坏情况下，实际状态 $x_k = z_k + e_k$ 和输入 $u_k = v_k + K e_k$ 也绝不会超出原始的约束集 $\mathcal{X}$ 和 $\mathcal{U}$。[递归可行性](@entry_id:167169)和稳定性则通过在标称问题中应用标准的[终端约束](@entry_id:176488)集和终端代价来保证。[@problem_id:2746566]

另一种处理有界干扰的直接方法是**最小-最大化MPC（Min-Max MPC）**。这种方法在哲学上更为直接，它将控制问题明确表述为一个二人[零和博弈](@entry_id:262375)问题。在每个时刻 $k$，控制器试图寻找一个输入序列，以最小化在**最坏情况**（即最大化代价）下的未来干扰序列所产生的总代价。其[优化问题](@entry_id:266749)形式为：
$$ \min_{u_{0:N-1}} \max_{w_{0:N-1} \in \mathcal{W}^N} \left( \sum_{i=0}^{N-1} \ell(x_i, u_i) + V_f(x_N) \right) $$
关键在于，约束 $x_i \in \mathcal{X}$ 和 $x_N \in \mathcal{X}_f$ 必须对**所有**可能的干扰序列 $w_{0:N-1}$ 成立。如果一个[优化问题](@entry_id:266749)在当前状态 $x_k$ 下有解，则称其为鲁棒可行的。[递归可行性](@entry_id:167169)和稳定性同样依赖于精心设计的终端代价 $V_f$ 和[终端约束](@entry_id:176488)集 $\mathcal{X}_f$，它们必须满足鲁棒的李雅普诺夫递减条件和鲁棒[不变性](@entry_id:140168)。虽然最小-最大化MPC在概念上清晰地体现了鲁棒性，但求解这种嵌套的[优化问题](@entry_id:266749)通常计算量巨大，使其在实际应用中不如管道MPC常见。[@problem_id:2746618]

这些[鲁棒控制](@entry_id:260994)策略的稳定性可以被置于一个更广泛的理论框架下，即**[输入到状态稳定性](@entry_id:166511)（Input-to-State Stability, ISS）**。ISS理论为分析存在外部输入的[非线性系统的稳定性](@entry_id:264568)提供了精确的语言。对于一个受控于MPC的闭环系统 $x_{k+1} = F(x_k, w_k)$，如果其是ISS的，那么状态的范数 $\|x_k\|$ 可以被一个衰减项和一个与干扰大小相关的增益项所界定：
$$ \|x_k\| \le \beta(\|x_0\|, k) + \gamma\left(\sup_{0 \le i  k} \|w_i\|\right) $$
其中 $\beta$ 是一个 $\mathcal{KL}$ [类函数](@entry_id:146970)（表示暂态响应的衰减），而 $\gamma$ 是一个 $\mathcal{K}$ 类函数（表示对干扰的渐近增益）。ISS的李雅普诺夫表征为，存在一个李雅普诺夫函数 $V(x)$，其沿系统轨迹的变化满足不等式：
$$ V(x_{k+1}) - V(x_k) \le -\alpha(\|x_k\|) + \sigma(\|w_k\|) $$
其中 $\alpha$ 和 $\sigma$ 是 $\mathcal{K}$ [类函数](@entry_id:146970)。这个不等式清晰地表明，当干扰 $w_k$ 为零时，系统是[渐近稳定](@entry_id:168077)的；当存在有界干扰时，状态最终会收敛到一个由干扰界限决定的邻域内。对于[鲁棒MPC](@entry_id:174393)，其最[优值函数](@entry_id:173036)通常可以被证明是一个ISS[李雅普诺夫函数](@entry_id:273986)，从而为系统提供了关于实际稳定（practical stability）的保证。[@problem_id:2746598]

#### 应对状态未知：基于观测器的MPC

在许多实际应用中，系统的完整状态 $x_k$ 无法被直接测量，我们只能得到部分或带有噪声的输出 $y_k = C x_k + v_k$。在这种情况下，必须首先设计一个[状态估计器](@entry_id:272846)（或观测器）来重构系统状态。一个常见的选择是龙贝格观测器：
$$ \hat{x}_{k+1} = A \hat{x}_k + B u_k + L(y_k - C \hat{x}_k) $$
其中 $\hat{x}_k$ 是估计状态， $L$ 是[观测器增益](@entry_id:267562)矩阵。此时，不确定性不仅来自过程噪声 $w_k$，还来自测量噪声 $v_k$。

我们可以将管道MPC的思想扩展到这种[输出反馈](@entry_id:271838)场景。定义估计误差为 $e_k = x_k - \hat{x}_k$。其动态演化为：
$$ e_{k+1} = (A - LC)e_k + w_k - Lv_k $$
这个误差动态本身就是一个受有界复合干扰 $d_k = w_k - Lv_k$ 驱动的[线性系统](@entry_id:147850)。如果选择的增益 $L$ 使得矩阵 $A-LC$ 是稳定的（其所有[特征值](@entry_id:154894)都在[单位圆](@entry_id:267290)内），我们就可以为这个误差系统构建一个鲁棒正不变（RPI）集 $\mathcal{E}_e$。这个集合是包含所有可能估计误差的“管道”。例如，如果 $F = A-LC$ 稳定，且[复合扰动](@entry_id:187885)集为 $\mathcal{D} = \mathcal{W} \oplus (-L\mathcal{V})$，那么最小RPI集可以被构造为无穷[闵可夫斯基和](@entry_id:176841) $\mathcal{E}_e = \bigoplus_{i=0}^{\infty} F^i \mathcal{D}$。或者，也可以构造一个包含它的椭球[不变集](@entry_id:275226)。一旦有了 $\mathcal{E}_e$，MPC控制器就基于估计状态 $\hat{x}_k$ 进行规划，但其约束必须被收紧以容纳[估计误差](@entry_id:263890)，即规划的状态必须满足 $\hat{x}_k \in \mathcal{X} \ominus \mathcal{E}_e$。[@problem_id:2746616]

[观测器增益](@entry_id:267562) $L$ 的选择在这里变得至关重要，因为它揭示了一个核心的工程权衡。一方面，一个“激进”的增益（即 $A-LC$ 的极点离原点很近）可以使[估计误差](@entry_id:263890)快速收敛。另一方面，从误差动态 $e_{k+1} = (A - LC)e_k + w_k - Lv_k$ 可以看出，增益 $L$ 直接放大了[测量噪声](@entry_id:275238) $v_k$ 对估计误差的影响。因此，存在一个内在的权衡：提高估计带宽会增强对[测量噪声](@entry_id:275238)的敏感性。这个权衡直接体现在[不变集](@entry_id:275226) $\mathcal{E}_e$ 的大小上。对于一个标量系统，误差管道的半径 $r_e(L)$ 可以表示为：
$$ r_e(L) = \frac{\bar{w} + |L|\bar{v}}{1 - |a - Lc|} $$
其中 $\bar{w}$ 和 $\bar{v}$ 是噪声界限。为了获得更大的MPC可行域（即更小的约束收紧量 $r_e(L)$），我们需要最小化这个半径。这个表达式清楚地显示，选择 $L$ 以最小化收缩因子 $|a-Lc|$ （即最大化分母）可能会因为增大了 $|L|$ 而导致分子变大。因此，最优的[观测器增益](@entry_id:267562) $L$ 并非总是选择最快的收敛速度，而是需要在[收敛速度](@entry_id:636873)和噪声放大之间找到一个最佳[平衡点](@entry_id:272705)。这个选择直接决定了MPC控制器可操作的有效状态空间的大小。[@problem_id:2746629]

#### 应对模型未知：自适应MPC

更进一步的挑战是当系统模型 $x_{k+1} = A(\theta)x_k + B(\theta)u_k$ 本身包含未知参数 $\theta$ 时。自适应MPC旨在通过[在线学习](@entry_id:637955)参数来应对这种[结构化不确定性](@entry_id:164510)。一个典型的自适应MPC方案会结合一个在线参数估计器和一个[鲁棒MPC](@entry_id:174393)控制器。

在每个时刻 $k$，估计器会根据历史数据更新对参数 $\theta$ 的估计，通常提供一个[点估计](@entry_id:174544) $\hat{\theta}_k$ 和一个包含[真值](@entry_id:636547) $\theta$ 的置信集 $\Theta_k$。控制器的设计则可以巧妙地借鉴管道MPC的框架。控制器基于使用[点估计](@entry_id:174544) $\hat{\theta}_k$ 的“确定性等效”模型进行标称规划。然而，由[参数不确定性](@entry_id:264387) $\theta \in \Theta_k$ 引起的模型失配会产生一个额外的“干扰”项。具体来说，误差动态可以写为：
$$ e_{k+1} = (A(\theta)+B(\theta)K)e_k + \left[ (A(\theta)-A(\hat{\theta}_k))\bar{x}_k + (B(\theta)-B(\hat{\theta}_k))\bar{u}_k \right] $$
其中方括号中的项是由参数误差引起的，其大小取决于置信集 $\Theta_k$ 的尺寸和标称轨迹 $(\bar{x}_k, \bar{u}_k)$ 的大小。我们可以为这个参数依赖的误差动态构建一个鲁棒的误差管道 $\mathcal{Z}_k$。这个管道的大小会随着置信集 $\Theta_k$ 的缩小而缩小。控制器在规划时使用基于 $\mathcal{Z}_k$ 收紧的约束。[递归可行性](@entry_id:167169)和稳定性则需要更强的鲁棒终端成分，例如，[终端约束](@entry_id:176488)集和终端代价必须对置信集 $\Theta_k$ 中的所有参数都有效。随着时间的推移，估计器会提供越来越精确的参数估计（即 $\Theta_k$ 变小），这使得误差管道 $\mathcal{Z}_k$ 和约束收紧量都随之减小，从而扩大了可行域并提升了控制性能。这种设计优美地集成了[在线学习](@entry_id:637955)和鲁棒控制，实现了在保证安全的前提下逐步提升性能。[@problem_id:2746586]

### 拓宽控制目标与系统类别

传统的MPC主要用于将系统状态调节到某个期望的[平衡点](@entry_id:272705)。然而，MPC的预测和优化框架使其能够处理更广泛的控制目标和更复杂的系统动态。

#### 超越跟踪：[经济模型预测控制](@entry_id:174671)（eMPC）

在许多工业过程中，目标并非简单地维持一个恒定的设定点，而是优化某个经济指标，例如最大化产量、最小化能耗或最大化利润。**[经济模型预测控制](@entry_id:174671)（eMPC）**应运而生，它直接将描述经济性能的通用函数 $\ell(x,u)$ 作为其阶段代价，而不是使用与设定点误差相关的二次型代价函数。这个经济[代价函数](@entry_id:138681) $\ell(x,u)$ 通常不是正定的，甚至可能在期望的[工作点](@entry_id:173374)不是最小值。例如，最小化单位产品的能耗可能导致系统在某个非零的生产速率下运行，而不是停留在原点。[@problem_id:2701652]

eMPC的这种通用性带来了新的稳定性分析挑战，因为代价函数本身不再能充当李雅普诺夫函数。证明eMPC稳定性的关键在于**耗散理论**。如果系统关于某个供给率 $s(x,u) = \ell(x,u) - \ell(x_s, u_s)$ 是**严格耗散**的，那么就存在一个储存函数 $\lambda(x)$ 和一个正定函数 $\alpha(\cdot)$ 使得：
$$ \ell(x,u) - \ell(x_s, u_s) + \lambda(f(x,u)) - \lambda(x) \ge \alpha(\|(x,u)-(x_s,u_s)\|) $$
其中 $(x_s, u_s)$ 是经济最优的[稳态](@entry_id:182458)点。这个不等式允许我们定义一个“旋转后”的阶段代价 $\ell_r(x,u) = \ell(x,u) - \ell(x_s, u_s) + \lambda(x) - \lambda(f(x,u))$，这个新的[代价函数](@entry_id:138681)是关于最优[稳态](@entry_id:182458)点正定的。因此，基于这个旋转代价的eMP[C值](@entry_id:272975)函数可以被证明是一个李雅普诺夫函数，从而保证了系统会收敛到经济上最优的运行点。[@problem_id:2701669]

严格[耗散性](@entry_id:162959)还引出了一个重要的现象，即**“长收费亭”性质（Turnpike Property）**。该性质指出，对于一个具有足够长时域的eMPC问题，最优的状态轨迹会尽快地从初始状态移动到经济最优[稳态](@entry_id:182458) $(x_s, u_s)$ 附近，并在绝大部分时间内保持在该邻域内，直到接近时域末端时才离开以满足[终端约束](@entry_id:176488)。耗散理论可以用来量化这一现象：轨迹远离最优[稳态](@entry_id:182458) $\epsilon$ 范围的步数 $M_{\epsilon}$ 是有界的，其[上界](@entry_id:274738)与最优总成本和无穷时域最优成本之间的差值（即次优性差距）成正比：
$$ M_{\epsilon} \le \frac{\Delta_{N}(x_{0}) + \lambda(x_{s}) - \lambda(x_{0})}{\alpha(\epsilon)} $$
这个性质为eMPC的性能提供了深刻的见解，并解释了为什么有限时域的优化能够在长时间尺度上实现接近最优的经济表现。[@problem_id:2746621]

#### 处理复杂动态：时滞与混合系统

许多物理和化学过程固有地包含**输入时滞**，即控制输入 $u_k$ 的影响需要经过 $d$ 个时间步后才能体现在系统状态上，形如 $x_{k+1} = A x_k + B u_{k-d}$。处理这种系统的经典方法是**[状态增广](@entry_id:140869)**。我们可以定义一个增广[状态向量](@entry_id:154607)，它不仅包含当前的物理状态 $x_k$，还包含了正在“管道中”传输的未来输入序列。例如，一个合适的增广状态是：
$$ z_k = \begin{bmatrix} x_k \\ u_{k-1} \\ \vdots \\ u_{k-d} \end{bmatrix} $$
通过这个定义，原先的[时滞系统](@entry_id:262890)可以被精确地转化为一个更高维度的、无时滞的标准线性系统 $z_{k+1} = A_a z_k + B_a u_k$。一旦完成了这种转化，我们就可以直接应用前述章节中为标准[线性系统](@entry_id:147850)建立的所有MPC设计方法，包括[终端约束](@entry_id:176488)集和终端代价的构造，来保证增广系统的[递归可行性](@entry_id:167169)和[渐近稳定性](@entry_id:149743)。关键在于，[终端约束](@entry_id:176488)和终端代价必须施加在整个增广状态 $z_k$ 上，而不仅仅是物理状态 $x_k$ 上，以确保整个系统的状态（包括输入队列）都能稳定下来。[@problem_id:2746604]

另一类复杂系统是**[混合系统](@entry_id:271183)**，它们同时包含连续动态和离散的逻辑切换。例如，一个系统的动态方程可能会根据一个离散的“模式”变量 $i_k$ 而改变：$x_{k+1} = A_{i_k} x_k + B_{i_k} u_k + c_{i_k}$。当模式 $i_k$ 也是一个决策变量时，MPC问题就变成了**[混合整数规划](@entry_id:173755)（MIP）**问题，因为我们需要同时优化连续的输入 $u_k$ 和离散的模式选择 $i_k$。混合整数MPC在理论上面临一个严峻的挑战：由于模式切换的离散性，系统的可行域是多个[多胞体](@entry_id:635589)的并集，这是一个非凸集。这破坏了用于证明[递归可行性](@entry_id:167169)的标准“平移”论证。例如，在 $k$ 时刻计算出的最优模式序列的“尾部”，不一定是从 $k+1$ 时刻的实际状态出发的一个可行模式序列。

为了恢复[递归可行性](@entry_id:167169)的保证，一种有效但保守的策略是**限制预测模式**。我们可以选择一个“安全”的模式 $\bar{\imath}$，并强制MPC控制器在整个[预测时域](@entry_id:261473)内都使用这个固定的模式。如果这个安全模式本身存在一个鲁棒的终端控制器和不变的[终端集](@entry_id:163892) $\mathcal{X}_f$，那么这个固定模式的MPC问题就退化为一个标准的凸[优化问题](@entry_id:266749)。对于这个问题，我们可以使用标准的“平移并追加终端控制律”的方法来构造下一时刻的[可行解](@entry_id:634783)，从而严格保证[递归可行性](@entry_id:167169)。虽然这种方法牺牲了自由切换模式所能带来的潜在性能提升，但它提供了一种在复杂[混合系统](@entry_id:271183)中确保安全性和稳定性的可靠途径。[@problem_id:2746574]

### 连接理论与实践：计算与网络化挑战

将MPC理论付诸实践，意味着要面对有限的计算时间和不完美的通信网络。本节关注如何调整MPC框架以适应这些实际限制。

#### 次优[MPC的稳定性](@entry_id:172566)

求解MPC[优化问题](@entry_id:266749)，尤其是在线求解[非线性](@entry_id:637147)或混合整数问题，可能非常耗时。在快速动态系统中，可用的计算时间可能不足以找到每一步的真正最优解。因此，我们往往只能满足于一个**次优解**。这引发了一个关键问题：如果控制器每一步都基于一个次优的决策，整个闭环系统还能保持稳定吗？

答案是肯定的，但这需要对次优性进行量化，并可能对系统或控制器提出更严格的要求。一种常见的模型是**乘性次优性**，即求解器返回的代价 $\hat{J}_N(x_k)$ 最多比真正最优代价 $V_N^\star(x_k)$ 差一个因子 $\kappa \ge 1$，即 $\hat{J}_N(x_k) \le \kappa V_N^\star(x_k)$。在这种情况下，标准的李雅普诺夫递减不等式会被放宽为一个包含增益项的形式：
$$ V_N^\star(x_{k+1}) - V_N^\star(x_k) \le - \ell(x_k, \hat{u}_0) + (\kappa-1)V_N^\star(x_k) $$
为了保证稳定性，负定项 $-\ell(x_k, \hat{u}_0)$ 必须能“战胜”可能为正的项 $(\kappa-1)V_N^\star(x_k)$。这可以通过一个**成本可控性**假设来实现，即最优成本 $V_N^\star(x_k)$ 可以被当前阶段成本 $\ell(x_k, \hat{u}_0)$ 的一个倍数所上界，例如 $V_N^\star(x_k) \le \gamma \ell(x_k, \hat{u}_0)$。结合这两个不等式，我们得到一个修正后的递减条件：
$$ V_N^\star(x_{k+1}) - V_N^\star(x_k) \le -\left(1 - \gamma(\kappa-1)\right) \ell(x_k, \hat{u}_0) $$
只要次优因子 $\kappa$ 足够接近1（具体来说，$\kappa  1 + 1/\gamma$），括号内的系数就为正，从而保证了李雅普诺夫函数的递减和系统的[渐近稳定性](@entry_id:149743)。这为实时系统中的MPC应用提供了坚实的理论基础，表明即使[在线优化](@entry_id:636729)不完美，只要误差在一定范围内，稳定性依然可以得到保证。[@problem_id:2746573]

#### 网络化与[分布](@entry_id:182848)式MPC

对于由大量子系统构成的**大规模网络化系统**，一个集中式的MPC控制器（即单个决策者收集所有信息并为所有子系统计算控制输入）在计算和通信上都是不可行的。这催生了**[分布](@entry_id:182848)式[模型预测控制](@entry_id:146965)（dMPC）**的发展。根据信息结构和协调机制的不同，dMPC可以分为几类：
- **分散式MPC (Decentralized MPC)**：这是最简单的形式，每个子系统都基于纯粹的本地信息进行决策，完全忽略耦合项或将其视为未知干扰。这种方法[通信开销](@entry_id:636355)为零，但由于缺乏协调，系统性能和稳定性可能会因强耦合而严重下降。
- **[分布](@entry_id:182848)式MPC (Distributed MPC)**：在这种架构中，子系统（或称为智能体）通过一个通信网络相互通信。它们迭代地交换信息（如预测轨迹或对偶变量），以协调它们的决策，从而共同解决耦合的动态或约束。像交替方向乘子法（[ADMM](@entry_id:163024)）这样的算法是实现这种对等协调的有力工具。
- **分层式MPC (Hierarchical MPC)**：这种架构引入了一个或多个层级的协调。一个高层协调器基于一个简化的全局模型做出宏观决策（如设定目标、分配资源或定价），并将这些指令下达给底层局部控制器。底层控制器在遵循[上层](@entry_id:198114)指令的前提下优化自身行为，并将执行结果或资源需求反馈给[上层](@entry_id:198114)。这种结构适用于具有天然层级特征的系统，如电网或供应链。[@problem_id:2701637]

在[分布](@entry_id:182848)式MPC的实现中，一个核心挑战是如何在有限的迭代次数内保证所做决策的安全性（可行性）。以**[ADMM](@entry_id:163024)**为例，该算法通过引入辅助的一致性变量和对偶变量，将一个大的、耦合的[优化问题](@entry_id:266749)分解为多个可以并行求解的局部子问题。然而，ADMM的中间迭代解通常不满足全局耦合约束。如果在迭代未完全收敛时就必须做出控制决策，直接应用中间解可能会导致约束违反。

一个严谨的解决方案是将这个问题视为一种鲁棒控制问题，其中“不确定性”来自于算法的未收敛。我们可以通过预先分析ADMM的收敛性质来得到一个关于“次优性”或“残差”的上界。然后，在设计局部MPC问题时，使用**约束收紧**来为这种不确定性预留“安全[裕度](@entry_id:274835)”。同时，控制器需要一个运行时检查机制：只有当[ADMM](@entry_id:163024)迭代的残差足够小，能够被预留的裕度所吸收时，才应用新的计算结果；否则，为了保证安全，控制器应回退到一个已知的安全策略，例如，应用前一时刻计算出的[可行解](@entry_id:634783)的“尾部”。结合标准的[终端约束](@entry_id:176488)集，这种“鲁棒化”的[分布](@entry_id:182848)式算法可以严格保证每一步的决策都满足原始的硬约束，并且整个闭环系统是递归可行的。[@problem_id:2746596] 在一个具有耦合约束 $\sum C_i u_i \le \bar{c}$ 的分层式eMPC中，上层协调器可以通过更新该约束的对偶变量（价格信号）来进行协调，而下层则最小化其本地经济成本加上由价格信号加权后的耦合项。这构成了分层MPC的一个有效协调机制。[@problem_id:2701637]

最后，[网络化控制系统](@entry_id:271631)本身也引入了通信不完美性，如**[数据包丢失](@entry_id:269936)**。考虑一个执行器依赖网络传输MPC计算的控制序列的场景。如果[数据包丢失](@entry_id:269936)，执行器可能会在一段时间内处于“开环”状态，只能执行本地缓存的旧控制计划。这种开环操作期间，系统状态可能会偏离预期的标称轨迹。我们可以分析在最坏的干扰情况下，状态误差在 $m$ 个连续[丢包](@entry_id:269936)期间的增长情况。例如，对于开环不稳定的系统 $x_{k+1}=ax_k+w_k$（$|a|1$），误差会指数增长。通过将这个最坏情况下的误差增长量与[鲁棒MPC](@entry_id:174393)管道的半径进行比较，我们可以计算出系统能够容忍的最大连续[丢包](@entry_id:269936)数 $m_{\max}$。如果实际的[丢包](@entry_id:269936)序列长度始终不超过 $m_{\max}$，那么即使存在通信中断，系统的状态误差也始终不会“[溢出](@entry_id:172355)”预先设计的管道，从而保证了系统的安全性和稳定性。这种分析为设计具有通信[服务质量](@entry_id:753918)（QoS）意识的控制系统提供了定量指导。[@problem_id:2746617]
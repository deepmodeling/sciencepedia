{"hands_on_practices": [{"introduction": "我们从PID中的“P”（比例）项开始。比例控制是最直观的控制方式，但它有其固有的局限性。通过这个练习，你将分析一个比例控制器在面对恒定扰动（例如由重力引起的负载）时的表现，并计算由此产生的稳态误差[@problem_id:1603305]。理解这一局限性是认识到积分“I”项在实现高精度控制中为何如此关键的第一步。", "problem": "一个用于光学显微镜的精密定位系统使用直流（DC）电机来移动样本台。该系统设计用于将样本台保持在一个固定的参考位置。电机施加的转矩与产生的电机轴角位置之间的关系由传递函数 $G(s) = \\frac{K}{s(\\tau s + 1)}$ 建模，其中 $s$ 是复频域变量，$K$ 是电机的速度常数，$\\tau$ 是其机械时间常数。\n\n一个增益为 $K_p$ 的比例控制器，表示为 $C(s) = K_p$，在一个单位负反馈回路中实现，以调节电机的位置。控制器的输出是给电机的转矩指令。\n\n在操作过程中，发现整个装置处于一个轻微的、意外的斜坡上。这导致一个恒定的重力负载，在电机轴上施加一个大小为 $T_d$ 的有效扰动转矩。该扰动被建模为与来自控制器的转矩指令相加。\n\n假设闭环系统是稳定的，并且所有参数（$K, \\tau, K_p, T_d$）都是正常数，确定由这个恒定扰动转矩引起的电机轴角位置的稳态误差。您的答案应该是一个用给定参数表示的符号表达式。", "solution": "令 $R(s)$ 为参考位置的拉普拉斯变换，$Y(s)$ 为实际电机位置的拉普拉斯变换，$E(s) = R(s) - Y(s)$ 为误差的拉普拉斯变换。该系统设置在一个单位负反馈结构中。控制器为 $C(s) = K_p$，被控对象为 $G(s) = \\frac{K}{s(\\tau s + 1)}$。\n\n问题陈述中提到，有一个扰动转矩 $D(s)$ 加在控制器的输出上。被控对象的总转矩输入是控制器输出 $U_c(s)$ 和扰动转矩 $D(s)$ 的和。\n控制器输出与误差的关系为 $U_c(s) = C(s)E(s)$。\n被控对象的输出与总输入转矩的关系为 $Y(s) = G(s)[U_c(s) + D(s)]$。\n\n代入 $U_c(s)$ 的表达式，我们得到：\n$$Y(s) = G(s)[C(s)E(s) + D(s)]$$\n现在，代入误差的定义 $E(s) = R(s) - Y(s)$：\n$$Y(s) = G(s)[C(s)(R(s) - Y(s)) + D(s)]$$\n我们想要求出由扰动引起的误差。为了分离出这种效应，我们可以将参考输入设为零，$R(s) = 0$。这是因为系统是线性的，我们可以使用叠加原理。当 $R(s)=0$ 时，误差为 $E(s) = 0 - Y(s) = -Y(s)$。方程变为：\n$$Y(s) = G(s)[-C(s)Y(s) + D(s)]$$\n我们现在可以解出 $Y(s)$ 关于 $D(s)$ 的表达式：\n$$Y(s) = -G(s)C(s)Y(s) + G(s)D(s)$$\n$$Y(s) + G(s)C(s)Y(s) = G(s)D(s)$$\n$$Y(s)[1 + G(s)C(s)] = G(s)D(s)$$\n$$Y(s) = \\frac{G(s)}{1 + G(s)C(s)} D(s)$$\n由扰动引起的误差为 $E_d(s) = -Y(s)$：\n$$E_d(s) = -\\frac{G(s)}{1 + G(s)C(s)} D(s)$$\n问题陈述中提到，扰动是一个大小为 $T_d$ 的恒定转矩。在拉普拉斯域中，一个大小为 $T_d$ 的常数（或阶跃函数）表示为 $D(s) = \\frac{T_d}{s}$。\n将此代入误差表达式：\n$$E_d(s) = -\\frac{G(s)}{1 + G(s)C(s)} \\frac{T_d}{s}$$\n为了求稳态误差 $e_{ss}$，我们使用终值定理（FVT），该定理表明 $e_{ss} = \\lim_{t \\to \\infty} e(t) = \\lim_{s \\to 0} s E_d(s)$。终值定理适用，因为问题陈述中说明了闭环系统是稳定的。（闭环系统的极点是特征方程 $1 + G(s)C(s) = 0$ 的根，即 $1 + \\frac{K_p K}{s(\\tau s + 1)} = 0 \\implies \\tau s^2 + s + K_p K = 0$。由于 $\\tau, K_p, K$ 都是正数，根具有负实部，从而证实了系统的稳定性）。\n\n应用终值定理：\n$$e_{ss} = \\lim_{s \\to 0} s E_d(s) = \\lim_{s \\to 0} s \\left( -\\frac{G(s)}{1 + G(s)C(s)} \\frac{T_d}{s} \\right)$$\n$$e_{ss} = -T_d \\lim_{s \\to 0} \\frac{G(s)}{1 + G(s)C(s)}$$\n现在，我们代入 $G(s)$ 和 $C(s)$ 的表达式：\n$$e_{ss} = -T_d \\lim_{s \\to 0} \\frac{\\frac{K}{s(\\tau s + 1)}}{1 + K_p \\frac{K}{s(\\tau s + 1)}}$$\n为了简化分数，我们将分子和分母同乘以 $s(\\tau s + 1)$：\n$$e_{ss} = -T_d \\lim_{s \\to 0} \\frac{K}{s(\\tau s + 1) + K_p K}$$\n现在我们可以通过代入 $s=0$ 来计算极限：\n$$e_{ss} = -T_d \\frac{K}{0(\\tau \\cdot 0 + 1) + K_p K}$$\n$$e_{ss} = -T_d \\frac{K}{0 + K_p K}$$\n$$e_{ss} = -T_d \\frac{K}{K_p K}$$\n假设 $K \\neq 0$，它可以被消去：\n$$e_{ss} = -\\frac{T_d}{K_p}$$\n这就是由恒定扰动转矩引起的角位置稳态误差。", "answer": "$$\\boxed{-\\frac{T_d}{K_p}}$$", "id": "1603305"}, {"introduction": "PID控制器的整定既是一门艺术，也是一门科学。当你试图让系统响应更“积极”时，不当的增益设置很容易导致系统不稳定。这个练习模拟了一个常见的整定场景：过度增加某个控制器增益导致系统产生持续振荡[@problem_id:1603249]。通过分析系统的最终行为，你将学会如何诊断可能是哪个增益参数导致了问题，这是控制工程师必备的一项关键诊断技能。", "problem": "一名工程专业的学生正在设计一个比例-积分-微分 (PID) 控制器，用于维持一架小型四轴无人机的高度。该控制器根据期望设定点高度与机载传感器测量的高度之间的误差来调整电机推力。\n\n该学生遵循一个常见的整定步骤：\n1.  最初，只启用增益为 $K_p$ 的比例项（P控制器）。学生观察到，当指令设定一个新的高度时，无人机飞向该高度，但最终稳定在一个略低于设定点的高度，表现出稳态误差。\n2.  接下来，学生启用增益为 $K_i$ 的积分项（PI控制器）以消除稳态误差。现在，无人机成功达到了设定点高度。然而，响应有些振荡，会超调目标值并在几次振荡后稳定下来。\n3.  为了使响应更快、更具侵略性，学生显著增加了一个控制器增益。在此更改后，通过从稳定悬停状态给无人机一个向下的轻微推动来进行测试。无人机现在的响应是在目标高度附近以恒定振幅和固定周期无限振荡。这种行为表明系统已变为临界稳定状态。\n\n根据这最后的观察，以下哪项最可能是导致持续振荡的原因？\n\nA. 比例增益 ($K_p$) 过高。\n\nB. 积分增益 ($K_i$) 过高。\n\nC. 微分增益 ($K_d$) 过高。\n\nD. 无人机的电机没有足够的功率来使其稳定。\n\nE. 比例增益 ($K_p$) 过低。", "solution": "我们考虑在悬停点附近线性化的无人机高度动力学。设垂直位置为 $z(t)$，控制输入（围绕悬停点的增量推力）为 $u(t)$。在悬停点附近，一个标准的小信号模型是\n$$m \\ddot{z}(t) + b \\dot{z}(t) = u(t),$$\n其中 $m$ 是质量，$b$ 代表粘性阻尼/空气动力阻力和执行器阻力。在零初始条件下进行拉普拉斯变换，得到受控对象的传递函数\n$$G(s) = \\frac{Z(s)}{U(s)} = \\frac{1}{m s^{2} + b s}.$$\n一个 PID 控制器是\n$$C(s) = K_{p} + \\frac{K_{i}}{s} + K_{d} s,$$\n作用于误差 $e(t) = z_{\\text{ref}}(t) - z(t)$，因此有 $U(s) = C(s) E(s)$ 和 $E(s) = Z_{\\text{ref}}(s) - Z(s)$。单位反馈下的闭环特征方程为\n$$1 + C(s) G(s) = 0 \\quad \\Longleftrightarrow \\quad 1 + \\frac{K_{p} + \\frac{K_{i}}{s} + K_{d} s}{m s^{2} + b s} = 0.$$\n乘以 $m s^{2} + b s$ 然后再乘以 $s$ 以消除分母，得到三次特征多项式\n$$m s^{3} + (b + K_{d}) s^{2} + K_{p} s + K_{i} = 0.$$\n令 $a_{3} = m$，$a_{2} = b + K_{d}$，$a_{1} = K_{p}$，$a_{0} = K_{i}$。对于三次方程 $a_{3} s^{3} + a_{2} s^{2} + a_{1} s + a_{0} = 0$ 的劳斯-赫尔维茨稳定性条件是\n$$a_{3} > 0,\\quad a_{2} > 0,\\quad a_{1} > 0,\\quad a_{0} > 0,\\quad \\text{and} \\quad a_{2} a_{1} > a_{3} a_{0}.$$\n用增益表示，当 $m$ 和 $b$ 为正时，稳定性要求\n$$K_{p} > 0,\\quad K_{i} > 0,\\quad K_{d} > -b,\\quad \\text{and} \\quad (b + K_{d}) K_{p} > m K_{i}.$$\n具有持续振荡（等幅正弦波）的临界稳定性发生在劳斯表 $s^{1}$ 行变为零的边界上，即\n$$(b + K_{d}) K_{p} = m K_{i},$$\n这会产生一对纯虚的闭环极点。由 $s^{2}$ 行得到的辅助方程 $(b + K_{d}) s^{2} + K_{i} = 0$ 显示了振荡频率\n$$\\omega = \\sqrt{\\frac{K_{i}}{b + K_{d}}}.$$\n解释观察到的行为：仅使用比例作用时，在恒定扰动（悬停时的重力偏移）下，预期会出现稳态误差，因为 P 控制器无法消除恒定扰动；加入积分作用消除了这个误差，但积分作用通常会减小相位裕度并引入超调和振荡，正如观察到的那样。最后的测试表明，在通过显著增加一个增益使控制器变得“更快、更具侵略性”之后，一个小扰动导致了恒定振幅和固定周期的持续振荡，即闭环系统处于不稳定的边缘（临界稳定）。\n\n从经典控制和奈奎斯特/根轨迹的观点来看，增加比例增益 $K_p$ 会增加环路增益，减小相位裕度，并且在一个临界“极限增益”$K_u$时，产生具有明确周期的持续振荡。这正是 Ziegler-Nichols 极限增益法：当其他项在相位超前中不占主导地位时，过大的 $K_p$ 会将奈奎斯特轨迹推向 $-1$ 点，从而在虚轴上产生一对闭环极点，并在小扰动后产生等幅振荡。相比之下，大的微分增益 $K_d$ 会增加相位超前，通常会增加阻尼，从而抑制此类振荡；而过大的积分增益 $K_i$ 会使 PI 回路失稳，但学生所述的“使响应更快、更具侵略性”的意图，最一致（也最常见）的实现方式是增加 $K_p$，这是进入临界稳定、持续振荡状态的标准原因。电机功率不足不会产生小信号的持续振荡；它会限制可達到的加速度/高度，而不会将极点置于虚轴上。低的 $K_p$ 会导致响应迟缓、校正不足的行为，而不是持续振荡。\n\n因此，在激进的重新整定后，产生持续振荡的最可能原因是比例增益 $K_p$ 增加得过多，将环路推向其极限增益和临界稳定状态。", "answer": "$$\\boxed{A}$$", "id": "1603249"}, {"introduction": "微分“D”项能够显著改善系统的响应速度和阻尼特性，但其在标准教科书中的实现方式带有一个显著的实践陷阱。这个问题将带你探索所谓的“微分冲击”（derivative kick）现象[@problem_id:1603260]。你将看到，设定值的突变如何导致控制器输出一个理论上无穷大的瞬间脉冲，从而理解为何在实际应用中，工程师们常采用改进的PID结构来避免这一问题。", "problem": "一个工业电炉由比例-积分-微分 (PID) 控制器进行调节。控制器的输出 $u(t)$ 表示供给加热元件的功率。控制作用由以下标准PID方程确定：\n$$u(t) = K_p e(t) + K_i \\int_0^t e(\\tau)d\\tau + K_d \\frac{de(t)}{dt}$$\n其中 $e(t) = r(t) - y(t)$ 是误差信号。此处，$r(t)$ 是期望的温度设定值，$y(t)$ 是测量的炉温，而 $K_p$、$K_i$ 和 $K_d$ 分别是常数比例、积分和微分增益。\n\n最初，对于所有时间 $t  t_0$，系统处于理想稳态，炉温与设定值完全匹配，均为恒定值 $T_1$。在时间 $t = t_0$ 时，操作员突然将设定值更改为一个新的恒定值 $T_2$。\n\n设定值的这种突然变化，导致控制器的微分项 $u_d(t) = K_d \\frac{de(t)}{dt}$ 产生一个瞬时的、理论上无限大的脉冲。这被称为“微分冲击”。在数学上，这个脉冲被建模为狄拉克δ函数 $\\delta(t-t_0)$。在时间 $t_0$ 附近，微分项 $u_d(t)$ 的表达式将包含一个形如 $M \\cdot \\delta(t-t_0)$ 的项，其中 $M$ 是一个常数。$M$ 的值被定义为微分冲击的幅度。\n\n假设由于其热惯性，炉温 $y(t)$ 是时间的连续函数，请确定此微分冲击的幅度 $M$。请用给定的参数 $K_d$、$T_1$ 和 $T_2$ 将你的答案表示为一个解析表达式。", "solution": "PID控制器的微分项由下式给出：\n$$u_d(t) = K_d \\frac{de(t)}{dt}$$\n其中误差信号 $e(t) = r(t) - y(t)$。\n\n我们需要计算误差信号的时间导数：\n$$\\frac{de(t)}{dt} = \\frac{d}{dt}(r(t) - y(t)) = \\frac{dr(t)}{dt} - \\frac{dy(t)}{dt}$$\n设定值 $r(t)$ 在时间 $t=t_0$ 时从 $T_1$ 阶跃变为 $T_2$。我们可以用单位阶跃函数 $H(t-t_0)$ 来表示这个变化：\n$$r(t) = T_1 + (T_2 - T_1)H(t-t_0)$$\n对时间求导，利用单位阶跃函数的导数是狄拉克δ函数 $\\delta(t-t_0)$ 的性质，我们得到：\n$$\\frac{dr(t)}{dt} = (T_2 - T_1)\\delta(t-t_0)$$\n问题中假设炉温 $y(t)$ 是一个连续函数。这意味着它的导数 $\\frac{dy(t)}{dt}$ 不会包含任何δ函数（即脉冲）。在 $t=t_0$ 时刻，$\\frac{dy(t)}{dt}$ 是有界的。\n\n因此，误差的导数中的脉冲项完全来自于设定值的导数：\n$$\\frac{de(t)}{dt} = (T_2 - T_1)\\delta(t-t_0) - \\frac{dy(t)}{dt}$$\n将此代入微分项的表达式中：\n$$u_d(t) = K_d \\left( (T_2 - T_1)\\delta(t-t_0) - \\frac{dy(t)}{dt} \\right)$$\n$$u_d(t) = K_d(T_2 - T_1)\\delta(t-t_0) - K_d\\frac{dy(t)}{dt}$$\n微分冲击被建模为 $M \\cdot \\delta(t-t_0)$。通过比较，我们可以确定脉冲的幅度 $M$ 是 $\\delta(t-t_0)$ 的系数。\n因此，微分冲击的幅度为：\n$$M = K_d(T_2 - T_1)$$", "answer": "$$\\boxed{K_{d}\\left(T_{2}-T_{1}\\right)}$$", "id": "1603260"}]}
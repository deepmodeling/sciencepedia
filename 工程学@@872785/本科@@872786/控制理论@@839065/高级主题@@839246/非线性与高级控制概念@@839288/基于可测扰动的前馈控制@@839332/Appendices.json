{"hands_on_practices": [{"introduction": "本章的第一个练习将介绍最基础的前馈控制形式：静态前馈控制。该练习旨在完全消除扰动的长期或稳态影响，是理解更复杂前馈策略的基础。通过一个常见的工业实例——热处理室，我们将探讨如何通过一个简单的增益来精确抵消可测量扰动所带来的稳态误差。[@problem_id:1574107]", "problem": "一个高精度热处理室用于固化复合材料。室内的温度（其拉普拉斯变换为 $T(s)$）通过调节供给加热元件的功率 $P(s)$ 来控制。过程动态由以下传递函数建模：\n$$G_p(s) = \\frac{T(s)}{P(s)} = \\frac{K_p}{(\\tau_1 s + 1)(\\tau_2 s + 1)}$$\n其中 $K_p$ 是过程增益，$\\tau_1$ 和 $\\tau_2$ 是过程时间常数。\n\n一个对系统造成显著且可测量的扰动是为插入样品而周期性地打开检修门，这会导致热量损失。此扰动（由信号 $D(s)$ 表示）对室温的影响由以下扰动传递函数描述：\n$$G_d(s) = \\frac{T(s)}{D(s)} = \\frac{-K_d}{\\tau_d s + 1}$$\n其中 $K_d$ 是扰动增益，$\\tau_d$ 是扰动时间常数。所有常数 $K_p, K_d, \\tau_1, \\tau_2, \\tau_d$ 均为正实数。\n\n为了抵消因开门导致的热量下降，而不等待主比例-积分-微分（PID）控制器的反馈校正，我们实施了一个前馈控制方案。该方案利用对扰动 $D(s)$ 的测量来对加热器功率进行主动调节。该调节量由一个具有恒定增益 $K_{ff}$ 的简单静态前馈控制器确定。发送到加热器的总功率指令是主控制器输出与前馈控制器输出之和，其中后者由 $P_{ff}(s) = K_{ff} D(s)$ 给出。\n\n请确定静态前馈增益 $K_{ff}$ 的解析表达式，该增益在理论上需要能够完全抵消由持续扰动（例如，门被无限期地保持打开）引起的稳态温度变化。请用给定参数表示您的答案。", "solution": "目标是确定静态前馈增益 $K_{ff}$，以确保由持续扰动引起的稳态温度变化为零。总的温度变化 $T_{total}(s)$ 是由扰动直接引起的变化和由前馈控制作用引起的变化之和。\n\n扰动 $D(s)$ 对温度 $T(s)$ 的直接影响由扰动传递函数 $G_d(s)$ 给出：\n$$T_{direct}(s) = G_d(s) D(s)$$\n\n前馈控制器产生一个功率调节量 $P_{ff}(s) = K_{ff} D(s)$。这个功率调节量通过过程传递函数 $G_p(s)$ 影响温度：\n$$T_{ff}(s) = G_p(s) P_{ff}(s) = G_p(s) K_{ff} D(s)$$\n\n由于扰动和前馈补偿引起的总温度变化是这两个效应之和：\n$$T_{total}(s) = T_{direct}(s) + T_{ff}(s) = G_d(s) D(s) + G_p(s) K_{ff} D(s)$$\n我们可以提出因子 $D(s)$，以找到从扰动到温度的总传递函数：\n$$\\frac{T_{total}(s)}{D(s)} = G_d(s) + G_p(s) K_{ff}$$\n\n我们关心的是对持续扰动的稳态响应。持续扰动可以建模为一个幅度为 $d_0$ 的阶跃输入，因此其拉普拉斯变换为 $D(s) = \\frac{d_0}{s}$。\n\n终值定理允许我们通过计算 $\\lim_{t \\to \\infty} T(t) = \\lim_{s \\to 0} s T(s)$，从时域信号 $T(t)$ 的拉普拉斯变换 $T(s)$ 中求出其稳态值。\n\n应用终值定理来求稳态温度变化 $T_{ss}$：\n$$T_{ss} = \\lim_{s \\to 0} s T_{total}(s) = \\lim_{s \\to 0} s \\left( G_d(s) + G_p(s) K_{ff} \\right) D(s)$$\n代入 $D(s) = \\frac{d_0}{s}$：\n$$T_{ss} = \\lim_{s \\to 0} s \\left( G_d(s) + G_p(s) K_{ff} \\right) \\frac{d_0}{s}$$\n$s$ 项相互抵消：\n$$T_{ss} = d_0 \\lim_{s \\to 0} \\left( G_d(s) + G_p(s) K_{ff} \\right)$$\n$$T_{ss} = d_0 \\left( \\lim_{s \\to 0} G_d(s) + \\left(\\lim_{s \\to 0} G_p(s)\\right) K_{ff} \\right)$$\n\n项 $\\lim_{s \\to 0} G(s)$ 是稳定传递函数 $G(s)$ 的稳态增益或直流增益，我们可以将其表示为 $G(0)$。因此，表达式变为：\n$$T_{ss} = d_0 \\left( G_d(0) + G_p(0) K_{ff} \\right)$$\n\n为了实现完美的稳态抵消，我们需要 $T_{ss} = 0$。由于扰动幅度 $d_0$ 非零，这意味着：\n$$G_d(0) + G_p(0) K_{ff} = 0$$\n求解 $K_{ff}$：\n$$K_{ff} = - \\frac{G_d(0)}{G_p(0)}$$\n\n现在，我们必须计算给定传递函数的直流增益。\n对于过程传递函数：\n$$G_p(s) = \\frac{K_p}{(\\tau_1 s + 1)(\\tau_2 s + 1)}$$\n$$G_p(0) = \\lim_{s \\to 0} \\frac{K_p}{(\\tau_1 s + 1)(\\tau_2 s + 1)} = \\frac{K_p}{(\\tau_1 \\cdot 0 + 1)(\\tau_2 \\cdot 0 + 1)} = \\frac{K_p}{1 \\cdot 1} = K_p$$\n\n对于扰动传递函数：\n$$G_d(s) = \\frac{-K_d}{\\tau_d s + 1}$$\n$$G_d(0) = \\lim_{s \\to 0} \\frac{-K_d}{\\tau_d s + 1} = \\frac{-K_d}{\\tau_d \\cdot 0 + 1} = -K_d$$\n\n最后，我们将这些直流增益代入 $K_{ff}$ 的表达式中：\n$$K_{ff} = - \\frac{-K_d}{K_p}$$\n$$K_{ff} = \\frac{K_d}{K_p}$$\n这就是所需的静态前馈增益。", "answer": "$$\\boxed{\\frac{K_d}{K_p}}$$", "id": "1574107"}, {"introduction": "虽然理想的前馈控制器在理论上可以完美消除扰动，但在实际工程中，它们并非总是可以物理实现的。本练习将引入一个关键的现实挑战：非最小相位系统。通过一个悬挂负载的四旋翼无人机的例子，您将学习到为何理想的解决方案可能导致系统不稳定，以及如何设计一个实用、稳定的控制器，同时仍能实现有效的扰动抑制。[@problem_id:1575797]", "problem": "一架四旋翼飞行器用于运输通过缆绳悬挂的敏感载荷。为了抵消大气扰动的影响，该四旋翼飞行器配备了一个风速计，用于实时测量横向阵风。目标是设计一个前馈控制器，利用该风力数据来主动稳定载荷。\n\n令 $\\theta(t)$ 为载荷偏离垂直方向的摆动角，这是需要最小化的系统输出。控制输入 $u(t)$ 是指令给四旋翼飞行器的横向加速度。测得的扰动 $d(t)$ 是横向风速。假设所有初始条件均为零。\n\n系统动力学由拉普拉斯域中的以下线性化传递函数描述：\n\n1.  从四旋翼飞行器的指令加速度 $U(s) = \\mathcal{L}\\{u(t)\\}$ 到载荷摆动角 $\\Theta(s) = \\mathcal{L}\\{\\theta(t)\\}$ 的过程传递函数 $G_p(s)$ 由下式给出：\n    $$G_p(s) = \\frac{K_p (1 - T_z s)}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2}$$\n    该模型捕捉了基本的类摆动力学特性，并包含一个非最小相位零点，这是此类欠驱动空中操作系统的一个特点。\n\n2.  从风速扰动 $D(s) = \\mathcal{L}\\{d(t)\\}$ 到载荷摆动角 $\\Theta(s)$ 的扰动传递函数 $G_d(s)$ 由下式给出：\n    $$G_d(s) = \\frac{K_d}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2}$$\n\n这里，$K_p$、$K_d$、$T_z$、$\\zeta$ 和 $\\omega_n$ 都是表示系统物理参数的正实数常量。\n\n您的任务是确定一个稳定且正常（proper）的前馈控制器 $G_{ff}(s)$ 的传递函数，该控制器以测得的扰动 $D(s)$ 为输入，生成控制信号 $U(s)$。该控制器的设计应旨在最小化阵风对载荷摆动角的影响。请提供 $G_{ff}(s)$ 关于给定参数的解析表达式。", "solution": "在零初始条件下，使用拉普拉斯变换，载荷角度满足：\n$$\n\\Theta(s)=G_{p}(s)\\,U(s)+G_{d}(s)\\,D(s)\n$$\n如果前馈控制器使用测得的扰动作为 $U(s)=G_{ff}(s)\\,D(s)$，则闭环扰动到输出的映射变为：\n$$\n\\frac{\\Theta(s)}{D(s)}=G_{p}(s)\\,G_{ff}(s)+G_{d}(s)\n$$\n理想的扰动抵消条件是：\n$$\nG_{p}(s)\\,G_{ff}^{\\text{ideal}}(s)+G_{d}(s)=0\n\\quad\\Rightarrow\\quad\nG_{ff}^{\\text{ideal}}(s)=-\\frac{G_{d}(s)}{G_{p}(s)}\n$$\n使用给定的传递函数：\n$$\nG_{p}(s)=\\frac{K_{p}\\left(1-T_{z}s\\right)}{s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}},\n\\qquad\nG_{d}(s)=\\frac{K_{d}}{s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}}\n$$\n得到：\n$$\nG_{ff}^{\\text{ideal}}(s)=-\\frac{K_{d}}{K_{p}\\left(1-T_{z}s\\right)}\n$$\n因为 $T_{z}>0$，因子 $\\left(1-T_{z}s\\right)^{-1}$ 在右半平面 $s=1/T_{z}$ 处有一个极点，所以 $G_{ff}^{\\text{ideal}}(s)$ 是不稳定的，因此无法实现。\n\n为了获得一个稳定且正常的近似，该近似在避免对非最小相位零点求逆的同时保留了低频扰动抑制能力，用其稳定镜像替换该不稳定因子，即：\n$$\n\\frac{1}{1-T_{z}s}\\;\\leadsto\\;\\frac{1}{1+T_{z}s}\n$$\n因此，选择稳定、正常的前馈控制器：\n$$\nG_{ff}(s)=-\\frac{K_{d}}{K_{p}\\left(1+T_{z}s\\right)}\n$$\n该控制器是严格正常的（strictly proper），并且在 $s=-1/T_{z}$ 处有一个单极点，因此是稳定的。得到的残余扰动到输出的映射是：\n$$\nG_{p}(s)G_{ff}(s)+G_{d}(s)\n=\n\\frac{K_{d}}{s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}}\n\\left[\n1-\\frac{1-T_{z}s}{1+T_{z}s}\n\\right]\n=\n\\frac{2K_{d}T_{z}s}{\\left(1+T_{z}s\\right)\\left(s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}\\right)}\n$$\n该式在 $s=0$ 时为零，确保了对稳态（低频）风分量的抵消，同时保持了稳定性和正常性。", "answer": "$$\\boxed{-\\dfrac{K_{d}}{K_{p}\\left(1+T_{z}s\\right)}}$$", "id": "1575797"}, {"introduction": "真实的工业系统通常具有多个相互关联的输入和输出。本章的最后一个练习将前馈控制的概念扩展到这些多变量（MIMO）系统。通过一个双区快速热处理系统的例子，本练习将演示如何设计一个能够考虑系统不同部分之间耦合效应的控制器，从而在多变量环境中有效地抑制扰动。[@problem_id:1575780]", "problem": "一个简化的双区快速热处理（RTP）系统用于半导体晶圆制造。每个区域的温度由一个专用加热器控制。设 $T_1(t)$ 和 $T_2(t)$ 分别为区域1和区域2的温度，设 $P_1(t)$ 和 $P_2(t)$ 为供给相应加热器的功率。该系统受到由冷却气流波动引起的可测量热扰动 $d_1(t)$ 和 $d_2(t)$。\n\n在拉普拉斯域中，系统动态可以用一个多输入多输出（MIMO）模型来描述：\n$$\n\\mathbf{T}(s) = \\mathbf{G}_p(s) \\mathbf{P}(s) + \\mathbf{G}_d(s) \\mathbf{d}(s)\n$$\n其中 $\\mathbf{T}(s) = \\begin{pmatrix} T_1(s) \\\\ T_2(s) \\end{pmatrix}$，$\\mathbf{P}(s) = \\begin{pmatrix} P_1(s) \\\\ P_2(s) \\end{pmatrix}$ 和 $\\mathbf{d}(s) = \\begin{pmatrix} d_1(s) \\\\ d_2(s) \\end{pmatrix}$ 分别是温度、加热器功率和扰动的拉普拉斯变换的列向量。\n\n包含区域间热耦合的被控对象传递函数矩阵 $\\mathbf{G}_p(s)$ 和扰动传递函数矩阵 $\\mathbf{G}_d(s)$ 由下式给出：\n$$\n\\mathbf{G}_p(s) = \\frac{1}{s+1} \\begin{pmatrix} 2  1 \\\\ 1  2 \\end{pmatrix}\n$$\n$$\n\\mathbf{G}_d(s) = \\frac{1}{s+2} \\begin{pmatrix} 1  0 \\\\ 0  1 \\end{pmatrix}\n$$\n\n为了抵消扰动的影响，需要设计一个由传递函数矩阵 $\\mathbf{G}_f(s)$ 表示的前馈控制器。该控制器根据控制律 $\\mathbf{P}(s) = \\mathbf{G}_f(s) \\mathbf{d}(s)$，基于测量的扰动来调节加热器功率。\n\n确定前馈控制器矩阵 $\\mathbf{G}_f(s)$ 的解析表达式，该控制器提供完全的扰动抑制，即在零初始条件和零参考温度的假设下，对于任何非零扰动向量 $\\mathbf{d}(s)$，温度向量 $\\mathbf{T}(s)$ 恒等于零。", "solution": "我们从拉普拉斯域中给定的MIMO被控对象和扰动模型开始：\n$$\n\\mathbf{T}(s) = \\mathbf{G}_{p}(s)\\mathbf{P}(s) + \\mathbf{G}_{d}(s)\\mathbf{d}(s)\n$$\n以及前馈控制律：\n$$\n\\mathbf{P}(s) = \\mathbf{G}_{f}(s)\\mathbf{d}(s)\n$$\n将控制律代入被控对象方程得到：\n$$\n\\mathbf{T}(s) = \\left(\\mathbf{G}_{p}(s)\\mathbf{G}_{f}(s) + \\mathbf{G}_{d}(s)\\right)\\mathbf{d}(s)\n$$\n对于任何扰动向量 $\\mathbf{d}(s)$，要实现完全扰动抑制，需要：\n$$\n\\mathbf{G}_{p}(s)\\mathbf{G}_{f}(s) + \\mathbf{G}_{d}(s) = \\mathbf{0}\n$$\n这意味着，假设 $\\mathbf{G}_{p}(s)$ 是可逆的：\n$$\n\\mathbf{G}_{f}(s) = -\\mathbf{G}_{p}(s)^{-1}\\mathbf{G}_{d}(s)\n$$\n给定：\n$$\n\\mathbf{G}_{p}(s) = \\frac{1}{s+1}\\begin{pmatrix} 2  1 \\\\ 1  2 \\end{pmatrix}, \\quad\n\\mathbf{G}_{d}(s) = \\frac{1}{s+2}\\begin{pmatrix} 1  0 \\\\ 0  1 \\end{pmatrix}\n$$\n我们计算 $\\mathbf{G}_{p}(s)^{-1}$。令 $\\mathbf{M} = \\begin{pmatrix} 2  1 \\\\ 1  2 \\end{pmatrix}$。那么：\n$$\n\\mathbf{G}_{p}(s) = \\frac{1}{s+1}\\mathbf{M} \\quad \\Rightarrow \\quad \\mathbf{G}_{p}(s)^{-1} = (s+1)\\mathbf{M}^{-1}\n$$\n$\\mathbf{M}$ 的行列式是 $\\det(\\mathbf{M}) = 4 - 1 = 3$，其逆矩阵是：\n$$\n\\mathbf{M}^{-1} = \\frac{1}{3}\\begin{pmatrix} 2  -1 \\\\ -1  2 \\end{pmatrix}\n$$\n因此：\n$$\n\\mathbf{G}_{p}(s)^{-1} = \\frac{s+1}{3}\\begin{pmatrix} 2  -1 \\\\ -1  2 \\end{pmatrix}\n$$\n乘以 $\\mathbf{G}_{d}(s)$ 得到：\n$$\n\\mathbf{G}_{p}(s)^{-1}\\mathbf{G}_{d}(s) = \\frac{s+1}{3}\\begin{pmatrix} 2  -1 \\\\ -1  2 \\end{pmatrix}\\cdot \\frac{1}{s+2}\\begin{pmatrix} 1  0 \\\\ 0  1 \\end{pmatrix}\n= \\frac{s+1}{3(s+2)}\\begin{pmatrix} 2  -1 \\\\ -1  2 \\end{pmatrix}\n$$\n因此，实现完全扰动抑制的前馈控制器是：\n$$\n\\mathbf{G}_{f}(s) = -\\frac{s+1}{3(s+2)}\\begin{pmatrix} 2  -1 \\\\ -1  2 \\end{pmatrix}\n= \\begin{pmatrix}\n-\\frac{2(s+1)}{3(s+2)}  \\frac{s+1}{3(s+2)} \\\\\n\\frac{s+1}{3(s+2)}  -\\frac{2(s+1)}{3(s+2)}\n\\end{pmatrix}\n$$\n将这个 $\\mathbf{G}_{f}(s)$ 代入 $\\mathbf{T}(s) = \\left(\\mathbf{G}_{p}(s)\\mathbf{G}_{f}(s) + \\mathbf{G}_{d}(s)\\right)\\mathbf{d}(s)$ 得到零矩阵乘以 $\\mathbf{d}(s)$，从而确保在所述假设下，对于任何 $\\mathbf{d}(s)$ 都有 $\\mathbf{T}(s) \\equiv \\mathbf{0}$。", "answer": "$$\\boxed{\\begin{pmatrix}\n-\\frac{2(s+1)}{3(s+2)}  \\frac{s+1}{3(s+2)} \\\\\n\\frac{s+1}{3(s+2)}  -\\frac{2(s+1)}{3(s+2)}\n\\end{pmatrix}}$$", "id": "1575780"}]}
{"hands_on_practices": [{"introduction": "本练习将引导你分析一个典型的串级控制系统的稳态性能。通过计算主控制变量的稳态误差 ([@problem_id:1561686])，你将学会如何将内环的闭环特性与外环相结合，从而预测整个系统的最终控制精度。这个基本分析对于评估一个控制策略能否在只有比例控制器的情况下消除持续偏差至关重要。", "problem": "设计一个串级控制系统来调节化学反应器的温度。主（或外）回路控制反应器温度，副（或内）回路控制围绕反应器的加热夹套的温度。\n\n该系统的动态特性由以下一阶传递函数建模：\n- 主过程，表示夹套温度与反应器温度之间的关系，由 $G_{p1}(s) = \\frac{K_1}{\\tau_1 s + 1}$ 给出，其中过程增益 $K_1 = 0.75$，时间常数 $\\tau_1 = 12$ 分钟。\n- 副过程，表示控制器输出（例如，蒸汽阀门位置）与夹套温度之间的关系，由 $G_{p2}(s) = \\frac{K_2}{\\tau_2 s + 1}$ 给出，其中过程增益 $K_2 = 1.5$，时间常数 $\\tau_2 = 3$ 分钟。\n\n两个控制器均为纯比例控制器：\n- 主控制器传递函数为 $G_{c1}(s) = K_{c1}$，其增益为 $K_{c1} = 2.0$。\n- 副控制器传递函数为 $G_{c2}(s) = K_{c2}$，其增益为 $K_{c2} = 5.0$。\n\n在此配置中，主控制器 $G_{c1}(s)$ 的输出作为副回路的设定值。\n\n假设系统初始处于稳态，对主变量（反应器温度）的设定值施加一个单位阶跃变化。计算主变量的新稳态偏移量。偏移量定义为稳态下设定值与测量的过程变量之间的差值。\n\n将您的答案表示为一个数值，四舍五入到三位有效数字。", "solution": "我们将反应器温度表示为 $y_{1}$，夹套温度表示为 $y_{2}$。内（副）回路跟踪其设定值 $r_{2}$，外（主）回路跟踪反应器设定值 $r_{1}$。各环节如下：\n- 主过程: $G_{p1}(s)=\\frac{K_{1}}{\\tau_{1}s+1}$，\n- 副过程: $G_{p2}(s)=\\frac{K_{2}}{\\tau_{2}s+1}$，\n- 主控制器: $G_{c1}(s)=K_{c1}$，\n- 副控制器: $G_{c2}(s)=K_{c2}$。\n\n对于内回路，在 $y_{2}$ 上采用单位反馈，从 $r_{2}$ 到 $y_{2}$ 的闭环传递函数为\n$$\nT_{2}(s)=\\frac{G_{c2}(s)G_{p2}(s)}{1+G_{c2}(s)G_{p2}(s)}.\n$$\n在稳态下，我们使用静态增益（令 $s=0$），因此 $G_{p1}(0)=K_{1}$，$G_{p2}(0)=K_{2}$，且\n$$\nT_{2}(0)=\\frac{K_{c2}K_{2}}{1+K_{c2}K_{2}}.\n$$\n\n外回路的关系为\n$$\ny_{2}=T_{2}(s)\\,r_{2},\\quad y_{1}=G_{p1}(s)\\,y_{2},\\quad r_{2}=G_{c1}(s)\\,(r_{1}-y_{1}).\n$$\n合并并在稳态下求值得到\n$$\ny_{1}=K_{1}\\,T_{2}(0)\\,K_{c1}\\,(r_{1}-y_{1}).\n$$\n整理得，\n$$\ny_{1}\\bigl[1+K_{c1}K_{1}T_{2}(0)\\bigr]=K_{c1}K_{1}T_{2}(0)\\,r_{1},\n$$\n因此，从 $r_{1}$ 到 $y_{1}$ 的稳态闭环增益为\n$$\n\\frac{y_{1,\\mathrm{ss}}}{r_{1}}=\\frac{A}{1+A},\\quad \\text{其中 } A=K_{c1}K_{1}T_{2}(0)=K_{c1}K_{1}\\,\\frac{K_{c2}K_{2}}{1+K_{c2}K_{2}}.\n$$\n对于 $r_{1}$ 的单位阶跃输入，稳态偏移量（误差）为\n$$\ne_{\\mathrm{ss}}=r_{1}-y_{1,\\mathrm{ss}}=1-\\frac{A}{1+A}=\\frac{1}{1+A}.\n$$\n\n代入给定的增益 $K_{1}=0.75$，$K_{2}=1.5$，$K_{c1}=2.0$，$K_{c2}=5.0$：\n$$\nK_{c2}K_{2}=5.0\\times 1.5=7.5=\\frac{15}{2},\\quad T_{2}(0)=\\frac{7.5}{1+7.5}=\\frac{15/2}{17/2}=\\frac{15}{17},\n$$\n$$\nA=K_{c1}K_{1}T_{2}(0)=2.0\\times 0.75\\times \\frac{15}{17}=\\frac{3}{2}\\times \\frac{15}{17}=\\frac{45}{34},\n$$\n$$\ne_{\\mathrm{ss}}=\\frac{1}{1+\\frac{45}{34}}=\\frac{34}{79}\\approx 0.430379746.\n$$\n四舍五入到三位有效数字，稳态偏移量为 $0.430$。\n\n请注意，时间常数 $\\tau_{1}$ 和 $\\tau_{2}$ 不影响稳态偏移量；只有直流增益对稳态行为有影响。", "answer": "$$\\boxed{0.430}$$", "id": "1561686"}, {"introduction": "在掌握了系统分析之后，下一步自然是控制器设计。本练习将带你进入串级控制设计的核心环节——内环整定 ([@problem_id:1561689])，它要求你运用频率响应法（如Bode图）来为一个具体的加热夹套过程设计一个PI控制器。一个响应迅速且稳定的内环是整个串级系统成功的关键，因为它能抢在扰动影响主过程之前就将其抑制，这项练习将让你亲身体验这一关键的设计过程。", "problem": "在某化学处理厂中，采用级联控制策略来调节连续搅拌釜反应器（CSTR）中反应混合物的温度。该系统的内回路控制反应器加热夹套的温度。该次级过程的动态行为，即加热器功率输入与夹套温度之间的关系，由传递函数 $G_{p2}(s)$ 建模。\n\n次级过程由以下公式描述：\n$$G_{p2}(s) = \\frac{K_p e^{-\\theta s}}{(\\tau_1 s + 1)(\\tau_2 s + 1)}$$\n其中过程增益为 $K_p = 2.0$（单位为 K/kW），时间常数为 $\\tau_1 = 5.0$ s 和 $\\tau_2 = 1.0$ s，并存在一个 $\\theta = 0.5$ s 的传输延迟。\n\n需要为该内回路设计一个比例-积分（PI）控制器。该控制器具有标准形式：\n$$G_{c2}(s) = K_c \\left(1 + \\frac{1}{\\tau_I s}\\right)$$\n\n您的任务是确定控制器参数，即比例增益 $K_c$ 和积分时间常数 $\\tau_I$，使得内开环系统 $G_{OL,2}(s) = G_{c2}(s)G_{p2}(s)$ 的增益交越频率为 $\\omega_{gc} = 0.5 \\text{ rad/s}$，相位裕度为 $60^\\circ$。\n\n请用数值表示您对参数对 $(K_c, \\tau_I)$ 的答案。$\\tau_I$ 的值必须以秒为单位。将两个值四舍五入到三位有效数字。", "solution": "内回路开环传递函数为\n$$G_{OL,2}(s)=G_{c2}(s)G_{p2}(s)=K_{c}\\left(1+\\frac{1}{\\tau_{I}s}\\right)\\frac{K_{p}\\exp(-\\theta s)}{(\\tau_{1}s+1)(\\tau_{2}s+1)}.$$\n在期望的增益交越频率 $\\omega_{gc}$ 处，波特（Bode）设计条件为：\n- 幅值条件：$\\left|G_{OL,2}(j\\omega_{gc})\\right|=1$。\n- 对应相位裕度 $\\text{PM}$ 的相位条件：$\\arg\\{G_{OL,2}(j\\omega_{gc})\\}=-\\pi+\\text{PM}$。\n\n写出在 $\\omega=\\omega_{gc}$ 处的频率响应：\n$$G_{p2}(j\\omega)=\\frac{K_{p}\\exp(-j\\omega\\theta)}{(1+j\\omega\\tau_{1})(1+j\\omega\\tau_{2})},\\quad G_{c2}(j\\omega)=K_{c}\\left(1+\\frac{1}{j\\omega\\tau_{I}}\\right)=K_{c}\\frac{1+j\\omega\\tau_{I}}{j\\omega\\tau_{I}}.$$\n\n因此，\n- 控制器幅值和相位：\n$$|G_{c2}(j\\omega)|=K_{c}\\frac{\\sqrt{1+(\\omega\\tau_{I})^{2}}}{\\omega\\tau_{I}},\\qquad \\arg\\{G_{c2}(j\\omega)\\}=\\arctan(\\omega\\tau_{I})-\\frac{\\pi}{2}.$$\n- 对象幅值和相位：\n$$|G_{p2}(j\\omega)|=\\frac{K_{p}}{\\sqrt{(1+(\\omega\\tau_{1})^{2})(1+(\\omega\\tau_{2})^{2})}},$$\n$$\\arg\\{G_{p2}(j\\omega)\\}=-\\arctan(\\omega\\tau_{1})-\\arctan(\\omega\\tau_{2})-\\omega\\theta.$$\n\n在 $\\omega=\\omega_{gc}$ 处的相位设计：\n$$\\arctan(\\omega_{gc}\\tau_{I})-\\frac{\\pi}{2}-\\arctan(\\omega_{gc}\\tau_{1})-\\arctan(\\omega_{gc}\\tau_{2})-\\omega_{gc}\\theta=-\\pi+\\text{PM}.$$\n当 $\\text{PM}=\\pi/3$ 时，该式变为\n$$\\arctan(\\omega_{gc}\\tau_{I})=\\frac{\\pi}{2}+\\arctan(\\omega_{gc}\\tau_{1})+\\arctan(\\omega_{gc}\\tau_{2})+\\omega_{gc}\\theta-\\frac{2\\pi}{3}.$$\n\n代入给定值 $K_{p}=2$, $\\tau_{1}=5$, $\\tau_{2}=1$, $\\theta=0.5$ 和 $\\omega_{gc}=0.5$：\n$$\\arctan(0.5\\,\\tau_{I})=\\frac{\\pi}{2}+\\arctan(0.5\\times 5)+\\arctan(0.5\\times 1)+0.5\\times 0.5-\\frac{2\\pi}{3}.$$\n对右侧进行数值计算：\n$$\\arctan(2.5)\\approx 1.1902899497,\\quad \\arctan(0.5)\\approx 0.4636476090,\\quad 0.5\\times 0.5=0.25,$$\n$$\\Rightarrow \\arctan(0.5\\,\\tau_{I})\\approx 1.5707963268+1.1902899497+0.4636476090+0.25-\\frac{2\\pi}{3}\\approx 1.3803387831.$$\n因此\n$$0.5\\,\\tau_{I}=\\tan(1.3803387831)\\;\\Rightarrow\\;\\tau_{I}=\\frac{2\\tan(1.3803387831)}{1}\\approx 10.374\\ \\text{s}.$$\n\n在 $\\omega=\\omega_{gc}$ 处的幅值设计：\n$$\\left|G_{OL,2}(j\\omega_{gc})\\right|=K_{c}\\,\\frac{\\sqrt{1+(0.5\\,\\tau_{I})^{2}}}{0.5\\,\\tau_{I}}\\cdot \\frac{K_{p}}{\\sqrt{(1+(0.5\\tau_{1})^{2})(1+(0.5\\tau_{2})^{2})}}=1.$$\n当 $\\tau_{I}\\approx 10.374$ 时，我们有 $0.5\\,\\tau_{I}\\approx 5.187$，所以\n$$\\frac{\\sqrt{1+(0.5\\,\\tau_{I})^{2}}}{0.5\\,\\tau_{I}}\\approx \\frac{\\sqrt{1+5.187^{2}}}{5.187}\\approx 1.0184.$$\n此外，\n$$\\sqrt{(1+(0.5\\tau_{1})^{2})(1+(0.5\\tau_{2})^{2})}=\\sqrt{(1+2.5^{2})(1+0.5^{2})}=\\sqrt{7.25\\times 1.25}=\\sqrt{9.0625}\\approx 3.0104,$$\n所以\n$$|G_{p2}(j\\omega_{gc})|=\\frac{K_{p}}{3.0104}=\\frac{2}{3.0104}\\approx 0.6649.$$\n因此\n$$K_{c}=\\frac{1}{\\left(\\frac{\\sqrt{1+(0.5\\,\\tau_{I})^{2}}}{0.5\\,\\tau_{I}}\\right)\\left(\\frac{K_{p}}{\\sqrt{(1+(0.5\\tau_{1})^{2})(1+(0.5\\tau_{2})^{2})}}\\right)}\\approx \\frac{1}{1.0184\\times 0.6649}\\approx 1.48.$$\n\n四舍五入到三位有效数字：\n$$K_{c}\\approx 1.48,\\qquad \\tau_{I}\\approx 10.4\\ \\text{s}.$$", "answer": "$$\\boxed{\\begin{pmatrix}1.48 & 10.4\\end{pmatrix}}$$", "id": "1561689"}, {"introduction": "控制工程师的职责不仅限于理想情况下的计算和设计，更要能预见和理解系统在真实故障下的行为。本练习是一个思想实验 ([@problem_id:1561723])，探讨了当内环的测量传感器发生故障并提供一个恒定读数时，系统会发生什么。通过分析在这种“失明”状态下控制器的行为（特别是积分环节的作用），你将深刻理解复杂控制结构潜在的风险，并认识到故障模式分析对于设计安全、可靠的系统是何等重要。", "problem": "在一个化工厂中，一个串级控制系统被用于调节一个进行放热反应的连续搅拌釜反应器（CSTR）的温度。主控制回路的目标是将反应器的内部温度（主过程变量）维持在 350 K 的恒定设定点。主控制器是一个比例-积分（PI）控制器，它通过调节次级控制回路的设定点来实现这一目标。\n\n次级控制回路的目的是管理围绕反应器的夹套中的加热/冷却流体的温度。这个次级控制器也是一个 PI 控制器，它根据主控制器提供的设定点来操纵一个蒸汽阀门，以控制夹套温度（次过程变量）。两个控制器都配置为“正作用”模式，这意味着测量误差的增加会导致控制器输出信号的增加。\n\n假设系统稳定运行，反应器温度处于其 350 K 的设定点。突然，夹套中的温度传感器发生故障。它停止测量实际的夹套温度，而是向次级控制器传输一个 340 K 的恒定不变的信号。在正常稳态条件下，主控制器发送给次级控制器的设定点通常在 365 K 左右。\n\n下列哪个陈述最能描述在该传感器故障后，反应器内部温度最可能出现的长期行为？\n\nA. 反应器温度将稳定在一个新的、远低于其 350 K 设定点的恒定值。\n\nB. 由于主控制器补偿了故障，反应器温度将精确地稳定在其 350 K 的设定点。\n\nC. 反应器温度将开始围绕其 350 K 的设定点以恒定振幅振荡。\n\nD. 系统将变得无响应，反应器温度将固定在 350 K。\n\nE. 反应器温度将持续上升，可能导致热失控，直到安全系统介入。", "solution": "令反应器温度为 $T_{r}$（主过程变量），夹套温度为 $T_{j}$（次过程变量），主设定点为 $\\text{SP}_{1}=350\\,\\text{K}$，次设定点为 $\\text{SP}_{2}$（主控制器的输出），故障后的次级测量值为 $\\text{PV}_{2}=340\\,\\text{K}$（故障后为常数）。两个控制器都是正作用 PI 控制器。\n\n对于每个 PI 控制器，其控制律为\n$$\nu(t)=K_{p} e(t)+K_{i}\\int_{0}^{t} e(\\tau)\\,d\\tau,\n$$\n其中误差定义为 $e=\\text{SP}-\\text{PV}$。正作用意味着如果 $e$ 增加，那么 $u$ 也增加。\n\n次级传感器故障后，次级回路的误差为\n$$\ne_{2}=\\text{SP}_{2}-\\text{PV}_{2}=\\text{SP}_{2}-340.\n$$\n在正常稳态下，$\\text{SP}_{2}\\approx 365$，因此 $e_{2}>0$ 是一个正的常数。因此，次级 PI 控制器的输出演变为\n$$\nu_{2}(t)=K_{p2} e_{2}+K_{i2}\\int_{0}^{t} e_{2}\\,d\\tau=K_{p2}(\\text{SP}_{2}-340)+K_{i2}(\\text{SP}_{2}-340)\\,t+u_{2}(0),\n$$\n并且将驱动到其上饱和极限 $u_{\\max}$（蒸汽阀门全开），因为在测量值卡住的情况下，$e_{2}$ 保持非零。当蒸汽阀门全开时，实际的夹套温度 $T_{j}$ 会远高于其正常工作值。\n\n反应器的能量平衡（集总参数、示意性）为\n$$\nC V \\frac{dT_{r}}{dt}=q_{\\text{gen}}(T_{r})-U A\\,(T_{r}-T_{j})-\\dot{m} c_{p}\\,(T_{r}-T_{\\text{in}}),\n$$\n其中 $q_{\\text{gen}}(T_{r})$ 是放热量，它随 $T_{r}$ 的增加而增加，近似遵循阿伦尼乌斯（Arrhenius）依赖关系（例如，一个与 $\\exp\\!\\left(-\\frac{E}{R T_{r}}\\right)$ 成正比的速率常数乘以一个放热焓项），因此当 $T_{r}$ 增加时，$q_{\\text{gen}}$ 也增加。由于 $u_{2}=u_{\\max}$ 导致 $T_{j}$ 被驱动得很高，项 $-U A\\,(T_{r}-T_{j})$ 变为正的加热项 $U A\\,(T_{j}-T_{r})$，向反应器加热。因此，夹套提供了净加热，同时放热反应随温度升高而加速，形成一个强烈的正反馈，将 $T_{r}$ 推高。\n\n主控制器计算 $e_{1}=\\text{SP}_{1}-T_{r}=350-T_{r}$。当 $T_{r}$ 上升到 350 以上时，$e_{1}  0$，并且（正作用 PI）主控制器输出 $\\text{SP}_{2}$ 将被向下驱动。如果 $\\text{SP}_{2}$ 降至 340 以下，那么 $e_{2}=\\text{SP}_{2}-340  0$，次级控制器原则上会减小蒸汽阀门的开度。然而，由于次级测量值卡住，并且次级 PI 控制器已经积分了一个大的正误差，由于积分饱和（integrator windup）和执行器限制，次级输出将在很长一段时间内保持在饱和上限 $u_{\\max}$。因此，即使主控制器试图降低 $\\text{SP}_{2}$，夹套仍然继续提供最大加热，所以实际操纵的热量输入并未遵循主控制器的指令。\n\n鉴于放热反应（其 $q_{\\text{gen}}(T_{r})$ 随 $T_{r}$ 增加而增加）与一个实际上锁定在最大加热状态的夹套相结合，反应器温度 $T_{r}$ 将持续上升。主控制器无法直接关闭蒸汽阀门，因为它只是向一个现已“失明”的次级回路发出设定点；由于内回路饱和在高位，整个串级系统失去了调节热量输入的能力。因此，最可能的长期行为是 $T_{r}$ 持续上升，趋向于热失控，直到安全联锁系统介入。\n\n在给定的选项中，这对应于选项 E。", "answer": "$$\\boxed{E}$$", "id": "1561723"}]}
{"hands_on_practices": [{"introduction": "理论学习之后，最好的巩固方式就是实践。让我们从一个基础的例子开始，模拟一个数字控制器中的减法操作。这个练习将引导你将十进制数转换为二进制补码形式，并执行基本的减法运算，这是理解计算机如何处理负数的关键第一步。[@problem_id:1915013]", "problem": "一个专门的数字控制器用于管理一个小型化学反应器中的液位。该控制器的内存寄存器是一个5位有符号整数寄存器，用于跟踪相对于设定点的净体积变化。所有有符号数均使用二进制补码系统表示。在操作开始时，该寄存器被清零。在操作过程中，一个传感器首先报告了相当于十进制值9的体积增加。控制器记录下这个值。随后，一个泵移除了相当于十进制值15的液体体积，控制器通过执行减法操作来更新寄存器。\n\n经过这一系列操作后，寄存器中存储的最终5位二进制值是什么？", "solution": "一个5位二进制补码寄存器表示的有符号整数范围是\n$$[-2^{4},\\,2^{4}-1]=[-16,\\,15].$$\n寄存器的初始值为\n$$R_{0}=0.$$\n记录了十进制9的增加后，\n$$R_{1}=9,$$\n其5位二进制补码表示为\n$$9 \\to 01001_2.$$\n泵移除了15，因此控制器执行减法操作：\n$$R_{2}=R_{1}-15=9-15=-6.$$\n要将$-6$编码为5位二进制补码，先取$+6$为$00110_2$，然后取反加一：\n$$00110_2 \\xrightarrow{\\text{invert}} 11001_2 \\xrightarrow{+1} 11010_2.$$\n或者，也可以通过加上$15$的二进制补码来执行减法：\n$$+15=01111_2 \\;\\Rightarrow\\; -15=10001_2,$$\n$$01001_2+10001_2=11010_2.$$\n作为模运算检验，$-6 \\equiv 2^{5}-6=26$，而$26$的二进制是$11010_2$。因此，最终存储的5位值为\n$$11010_2.$$", "answer": "$$\\boxed{11010}$$", "id": "1915013"}, {"introduction": "在定长运算中，一个常见的问题是算术溢出，即运算结果超出了系统所能表示的范围。这个练习将带你探讨这种情况，通过计算一个可能导致溢出的减法，你将学会如何识别溢出条件。理解和检测溢出对于设计可靠的数字系统至关重要。[@problem_id:1914994]", "problem": "一个假设的8位微处理器有一个简化的算术逻辑单元（ALU），该ALU对6位有符号整数进行算术运算。这些数字以2的补码格式表示。该ALU的任务是执行减法运算 `$R1 - R2`，其中寄存器R1中的十进制值为16，寄存器R2中的十进制值为-20。该运算通过计算R1与R2的2的补码之和来执行。\n\n你的任务是确定此运算的6位二进制结果（即存储在目标寄存器中的值），并判断是否发生算术溢出。如果算术运算的真实结果无法在6位2的补码表示范围内表示，则称发生溢出。\n\n以下哪个选项正确地说明了最终的6位二进制结果和溢出状态？\n\nA. 结果：$100100_2$，溢出：是\n\nB. 结果：$100100_2$，溢出：否\n\nC. 结果：$111100_2$，溢出：否\n\nD. 结果：$100011_2$，溢出：是\n\nE. 结果：$010000_2$，溢出：否", "solution": "在6位2的补码中，可表示的范围是从 $-2^{5}$ 到 $2^{5}-1$，即从 $-32$ 到 $31$。减法通过与2的补码相加来实现：$R1 - R2 = R1 + (\\text{two's complement of }R2)$。\n\n首先对操作数进行编码：\n- $R1=16$ 的6位形式为 $010000_{2}$。\n- 要编码 $R2=-20$，从 $+20=010100_{2}$ 开始，取反得到 $101011_{2}$，然后加 $1$ 得到 $101100_{2}$。因此 $R2=-20$ 为 $101100_{2}$。\n\n计算 $R2$ 位模式的2的补码以形成 $-R2=+20$：\n$$\\text{two's complement}(101100_{2})=010100_{2}。$$\n\n现在执行加法：\n$$010000_{2}+010100_{2}=100100_{2}。$$\n\n结果解释与溢出判断：\n- 真实的算术结果是 $16-(-20)=36$，这超出了6位2的补码表示范围 $[-32,31]$，因此发生溢出。\n- 另一种判断方法是，两个正操作数（$010000_{2}$ 和 $010100_{2}$）相加产生了一个符号位为 $1$ 的结果（$100100_{2}$），这符合加法的2的补码溢出条件。\n\n因此，存储的6位结果是 $100100_{2}$，并且标记了溢出。这与选项A相符。", "answer": "$$\\boxed{A}$$", "id": "1914994"}, {"introduction": "掌握了减法和溢出检测后，让我们从分析转向设计。这个练习要求你反向思考：为确保一个特定的减法运算能够无误地执行，我们需要一个多宽的系统？通过确定所需的最小位数，你将能更深入地理解数据表示范围与硬件设计之间的实际联系。[@problem_id:1914964]", "problem": "一位数字系统工程师正在设计一个具有定宽架构的专用处理器。该处理器必须执行的一个关键操作是有符号整数减法。该工程师正在分析一个特定的测试用例：从十进制值 $A=50$ 中减去十进制值 $B=80$。该减法采用二进制补码方法实现，其中操作 $A-B$ 计算为 $A + (\\text{2's complement of } B)$。为确保操作正确，所选的位宽 $n$ 必须足够大，以便能够表示初始操作数（$A$ 和 $B$）以及减法的最终结果，并且在计算过程中不会发生数据丢失或溢出。对于这个特定操作，所需的最小整数值 $n$ 是多少？", "solution": "我们需要一个位宽 $n$，使得二进制补码减法 $A-B$ 中涉及的所有值都可以无溢出地表示。该操作实现为 $A + (\\text{2's complement of } B)$，因此，必须能在 $n$ 位二进制补码中表示的值有 $A=50$，$B=80$，$B$ 的二进制补码（即 $-80$），以及结果 $A-B=50-80=-30$。\n\n在 $n$ 位二进制补码中，可表示的范围是\n$$\n-2^{n-1} \\le x \\le 2^{n-1}-1.\n$$\n因此，约束条件是：\n- 对于 $A=50$：$50 \\le 2^{n-1}-1$。\n- 对于 $B=80$：$80 \\le 2^{n-1}-1$。\n- 对于 $-80$：$-80 \\ge -2^{n-1}$，这等价于 $2^{n-1} \\ge 80$。\n- 对于结果 $-30$：$-30 \\ge -2^{n-1}$ 且 $-30 \\le 2^{n-1}-1$（如果上述更强的界限成立，此条件自动满足）。\n\n结合最严格的正数侧要求和负数侧要求，我们得到\n$$\n2^{n-1} \\ge 81.\n$$\n为找到满足此条件的最小整数 $n$，注意到 $2^{6}=64  81$ 且 $2^{7}=128 \\ge 81$，因此最小的 $n-1$ 是 $7$，所以\n$$\nn=8.\n$$\n当 $n=8$ 时，可表示的范围是 $-128$ 到 $127$，这个范围包含了 $50$，$80$，$-80$ 和 $-30$，从而确保在计算 $50 + (-80)$ 时不会发生溢出。", "answer": "$$\\boxed{8}$$", "id": "1914964"}]}
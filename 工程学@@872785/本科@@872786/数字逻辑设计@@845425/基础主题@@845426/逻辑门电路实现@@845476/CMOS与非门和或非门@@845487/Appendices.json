{"hands_on_practices": [{"introduction": "理论布尔代数和物理电路设计之间存在重要差异。在实际工程中，我们常常需要利用现有的逻辑门（例如，一个三输入与非门）来实现输入更少的功能（例如，一个两输入与非门）。本练习将探讨处理CMOS逻辑门中未使用输入的正确方法，这不仅是一个逻辑简化问题，更是一个关乎电路可靠性和功耗的关键实践。通过分析不同的处理方式[@problem_id:1921961]，你将学会为什么某些看似可行的方法在物理层面是不可靠甚至有害的。", "problem": "一位数字系统工程师的任务是使用一个已有的、采用互补金属氧化物半导体（CMOS）技术制造的三输入与非门来实现一个双输入与非逻辑功能。该三输入门的输入表示为 A、B 和 C，其输出为 Y。目标是使用输入 A 和 B 实现双输入功能，这意味着未使用的输入 C 必须被适当地端接，以确保电路的输出为 $Y = \\overline{A \\cdot B}$。\n\n以下是处理未使用输入 C 的五种建议方法。在此背景下，VDD 代表对应于逻辑高电平（'1'）的正电源电压，VSS 代表对应于逻辑低电平（'0'）的接地参考。\n\n以下哪些方法是有效的，可以正确且可靠地配置三输入与非门使其作为双输入与非门工作？\n\nA. 将输入 C 断开（悬空）。\nB. 将输入 C 连接到 VSS。\nC. 将输入 C 连接到 VDD。\nD. 将输入 C 连接到输入 A。\nE. 将输入 C 连接到输出 Y。\n\n选择所有正确选项。", "solution": "一个三输入与非门实现了布尔函数\n$$\nY=\\overline{A B C}.\n$$\n我们希望将其配置为使用输入 $A$ 和 $B$ 的双输入与非门，即实现\n$$\nY=\\overline{A B}.\n$$\n我们使用布尔代数和 CMOS 的考量来分析每种处理未使用输入 $C$ 的建议方法。\n\n首先，回顾将要明确使用的标准布尔恒等式：\n- 与 1 的恒等律：$X \\cdot 1 = X$。\n- 与 0 的零律：$X \\cdot 0 = 0$。\n- 幂等律：$X \\cdot X = X$。\n\n选项 A：将输入 $C$ 悬空。\n在 CMOS 中，一个未连接的门输入具有非常高的阻抗，并呈现一个易受漏电和噪声拾取影响的容性节点。其逻辑电平变得不确定，这使得 $Y=\\overline{A B C}$ 不可预测且不可靠。此外，悬空输入可能导致静态电流增加和虚假开关。因此，将 $C$ 悬空不能正确或可靠地实现 $Y=\\overline{A B}$。\n\n选项 B：将输入 $C$ 连接到 $VSS$（逻辑 $0$）。\n将 $C=0$ 代入 $Y=\\overline{A B C}$ 得到\n$$\nY=\\overline{A B \\cdot 0}=\\overline{0}=1,\n$$\n这是一个与 $A$ 和 $B$ 无关的常数 $1$，通常不等于 $\\overline{A B}$。因此，这没有实现双输入与非门。\n\n选项 C：将输入 $C$ 连接到 $VDD$（逻辑 $1$）。\n将 $C=1$ 代入 $Y=\\overline{A B C}$ 得到\n$$\nY=\\overline{A B \\cdot 1}=\\overline{A B},\n$$\n这与期望的双输入与非门功能相匹配。在 CMOS 的晶体管级别，将 C 接高电平会导通 C 输入的 NMOS（因此在 $A=B=1$ 时不会阻止下拉）并关断 C 输入的 PMOS（使得 A 和 B 的 PMOS 并联，在 A 或 B 至少有一个为 0 时提供上拉），与正确的与非门行为一致。这是有效且可靠的。\n\n选项 D：将输入 $C$ 连接到输入 $A$。\n将 $C=A$ 代入 $Y=\\overline{A B C}$ 得到\n$$\nY=\\overline{A B A}=\\overline{(A A) B}=\\overline{A B},\n$$\n使用幂等律 $A A = A$。因此，这也精确地实现了双输入与非门。这是有效且可靠的。\n\n选项 E：将输入 $C$ 连接到输出 $Y$。\n这引入了函数方程\n$$\nY=\\overline{A B Y}.\n$$\n考虑 $A B$ 的两种情况：\n- 如果 $A B=0$，则 $Y=\\overline{0 \\cdot Y}=\\overline{0}=1$，这与 $\\overline{A B}=1$ 一致。\n- 如果 $A B=1$，则 $Y=\\overline{1 \\cdot Y}=\\overline{Y}$，这没有布尔不动点，因为它要求 $Y=\\overline{Y}$。在真实的 CMOS 电路中，这形成了一个单位反馈的反相器，它没有稳定的静态工作点；它可能会振荡或进入亚稳态。因此，这种配置不正确也不可靠。\n\n综上所述，有效的方法是选项 C 和选项 D。", "answer": "$$\\boxed{CD}$$", "id": "1921961"}, {"introduction": "一个可靠的数字系统不仅需要正确工作，还需要在出现制造缺陷或故障时其行为是可预测的。本练习将带你深入CMOS或非门的晶体管级结构，通过分析一个“卡断”故障，来理解其对逻辑门功能的影响。这个实践将帮助你掌握分析上拉网络(PUN)和下拉网络(PDN)行为的技能，并引入数字电路中一个重要的状态——高阻态($Z$) [@problem_id:1921991]。", "problem": "在数字电子学中，故障分析对于设计鲁棒的电路至关重要。考虑一个标准的双输入互补金属氧化物半导体（CMOS）或非门。该门由一个上拉网络（PUN）和一个下拉网络（PDN）构成。PUN由两个串联的P型MOSFET（PMOS）组成，连接在电源（VDD，代表逻辑'1'）和输出Y之间。PDN由两个并联的N型MOSFET（NMOS）组成，连接在输出Y和地（VSS，代表逻辑'0'）之间。该门的两个输入标记为A和B。每个输入控制PUN中的一个PMOS晶体管和PDN中的一个NMOS晶体管。\n\n- 当栅极输入为逻辑'0'时，PMOS晶体管导通（ON），当栅极输入为逻辑'1'时，PMOS晶体管截止（OFF）。\n- 当栅极输入为逻辑'1'时，NMOS晶体管导通（ON），当栅极输入为逻辑'0'时，NMOS晶体管截止（OFF）。\n\n现在，假设发生了一个制造缺陷。栅极连接到输入B的串联PMOS晶体管永久性地“开路固定”（stuck-open）。这意味着无论输入B的逻辑电平如何，它都表现为一个断开的开关，不能导电。其他三个晶体管（连接到A的PMOS和两个NMOS晶体管）功能正常。\n\n确定对于输入A和B的所有四种可能的二进制组合，输出Y的逻辑状态。一个既未连接到VDD也未连接到VSS的输出被称为处于高阻态，我们用符号'Z'表示。\n\n对于输入序列(A=0, B=0), (A=0, B=1), (A=1, B=0)和(A=1, B=1)，以下哪个选项正确表示了输出Y的序列？\n\nA. (1, 0, 0, 0)\nB. (Z, 0, 0, 0)\nC. (1, Z, 0, 0)\nD. (Z, 0, Z, 0)\nE. (1, 1, 1, 0)", "solution": "问题要求分析一个有故障的双输入CMOS或非门的输出行为。一个标准的双输入或非门的结构包括一个上拉网络（PUN），其中有两个串联的PMOS晶体管（我们称之为 $P_A$ 和 $P_B$），以及一个下拉网络（PDN），其中有两个并联的NMOS晶体管（$N_A$ 和 $N_B$）。输出Y取自PUN和PDN之间的节点。故障是PMOS晶体管 $P_B$（由输入B控制）“开路固定”，意味着它始终不导通。\n\n我们将对四种可能的输入组合（A, B）逐一分析PUN和PDN的状态。\n\n**情况1：A = 0, B = 0**\n*   **上拉网络（PUN）：** PUN由 $P_A$ 和 $P_B$ 串联组成。\n    *   输入A为'0'，这会使 $P_A$ 导通。\n    *   输入B为'0'。正常情况下，这会使 $P_B$ 导通。然而，$P_B$ 是开路固定的。\n    *   由于 $P_A$ 和 $P_B$ 串联，从VDD到输出Y的完整通路需要两者都导通。因为 $P_B$ 是开路固定的，所以该通路被断开。因此，PUN是截止的，不会将输出连接到VDD（逻辑'1'）。\n*   **下拉网络（PDN）：** PDN由 $N_A$ 和 $N_B$ 并联组成。\n    *   输入A为'0'，这会使 $N_A$ 截止。\n    *   输入B为'0'，这会使 $N_B$ 截止。\n    *   由于到VSS（地）的两条并联通路都是断开的，PDN是截止的，不会将输出连接到VSS（逻辑'0'）。\n*   **输出Y：** 由于PUN和PDN都截止，输出Y既没有连接到VDD也没有连接到VSS。它处于浮空或高阻态。\n    *   因此，对于(A=0, B=0)，Y = Z。\n\n**情况2：A = 0, B = 1**\n*   **上拉网络（PUN）：**\n    *   输入A为'0'，这会使 $P_A$ 导通。\n    *   输入B为'1'，正常情况下会使 $P_B$ 截止。该晶体管也是开路固定的，所以它保持不导通。\n    *   到VDD的串联通路被 $P_B$ 断开。PUN是截止的。\n*   **下拉网络（PDN）：**\n    *   输入A为'0'，这会使 $N_A$ 截止。\n    *   输入B为'1'，这会使 $N_B$ 导通。\n    *   由于 $N_A$ 和 $N_B$ 是并联的，通过 $N_B$ 的通路将输出Y连接到VSS。PDN是导通的。\n*   **输出Y：** PDN将输出下拉到VSS。\n    *   因此，对于(A=0, B=1)，Y = 0。\n\n**情况3：A = 1, B = 0**\n*   **上拉网络（PUN）：**\n    *   输入A为'1'，这会使 $P_A$ 截止。\n    *   到VDD的串联通路由于 $P_A$ 截止而被断开（即使 $P_B$ 工作正常也是如此）。PUN是截止的。\n*   **下拉网络（PDN）：**\n    *   输入A为'1'，这会使 $N_A$ 导通。\n    *   输入B为'0'，这会使 $N_B$ 截止。\n    *   由于 $N_A$ 和 $N_B$ 是并联的，通过 $N_A$ 的通路将输出Y连接到VSS。PDN是导通的。\n*   **输出Y：** PDN将输出下拉到VSS。\n    *   因此，对于(A=1, B=0)，Y = 0。\n\n**情况4：A = 1, B = 1**\n*   **上拉网络（PUN）：**\n    *   输入A为'1'，这会使 $P_A$ 截止。\n    *   输入B为'1'，这会使 $P_B$ 截止（并且它也是开路固定的）。\n    *   到VDD的串联通路被断开。PUN是截止的。\n*   **下拉网络（PDN）：**\n    *   输入A为'1'，这会使 $N_A$ 导通。\n    *   输入B为'1'，这会使 $N_B$ 导通。\n    *   两条并联通路都将输出Y连接到VSS。PDN是导通的。\n*   **输出Y：** PDN将输出下拉到VSS。\n    *   因此，对于(A=1, B=1)，Y = 0。\n\n**结果总结：**\n对于输入组合(0,0), (0,1), (1,0)和(1,1)，输出Y的序列是(Z, 0, 0, 0)。\n将此序列与给定选项进行比较：\nA. (1, 0, 0, 0) - 这是一个功能正常的或非门的行为。\nB. (Z, 0, 0, 0) - 这与我们推导出的结果相符。\nC. (1, Z, 0, 0) - 错误。\nD. (Z, 0, Z, 0) - 错误。\nE. (1, 1, 1, 0) - 错误。\n\n因此，正确选项是B。", "answer": "$$\\boxed{B}$$", "id": "1921991"}, {"introduction": "从定性分析转向定量设计是数字集成电路设计的关键一步。逻辑门的开关阈值电压($V_M$)是决定其噪声容限和时序性能的核心参数。本练习将向你展示如何通过调整PMOS和NMOS晶体管的尺寸比来精确地设置一个对称的开关阈值[@problem_id:1921976]。这个过程是实现高性能、高可靠性CMOS逻辑单元的基础，它将逻辑功能需求与底层的半导体物理特性紧密联系起来。", "problem": "一位数字电路设计师的任务是创建一个三输入互补金属氧化物半导体（CMOS）或非门。为了获得最佳的噪声容限和可预测的时序，该逻辑门的逻辑阈值（也称为开关阈值电压，$V_M$）必须精确地设置在电源电压的一半，即 $V_M = V_{DD}/2$。为实现这一目标，必须在 PMOS 和 NMOS 晶体管之间实现特定的尺寸比。\n\n为了分析此阈值，假设或非门的三个输入都连接在一起。晶体管在电源电压 $V_{DD}$ 下工作，并具有对称的阈值电压：NMOS 的阈值电压为 $V_{tn}$，PMOS 的阈值电压为 $V_{tp}$，使得 $V_{tn} = -V_{tp} = V_{T}$，其中 $V_T$ 是一个正常数。设计中的所有 NMOS 晶体管共享相同的宽长比 $(W/L)_n$，同样，所有 PMOS 晶体管共享相同的宽长比 $(W/L)_p$。\n\n制造工艺产生的电子迁移率 $\\mu_n$ 和空穴迁移率 $\\mu_p$ 之间的关系由表达式 $\\mu_n = 2.7 \\mu_p$ 给出。您可以假设单位面积的氧化物电容 $C_{ox}$ 对于两种类型的晶体管是相同的。对于此一阶分析，忽略沟道长度调制和体效应。\n\n确定为实现对称开关阈值所需的尺寸比，定义为 $r = (W/L)_p / (W/L)_n$。将您的最终答案表示为一个四舍五入到三位有效数字的数值。", "solution": "当三个输入都连接在一起时，用于直流分析的三输入或非门可以简化为：\n- 一个由三个相同的并联 NMOS 晶体管组成的下拉网络。\n- 一个由三个相同的串联 PMOS 晶体管组成的上拉网络。\n\n在开关阈值点，定义为 $V_{in}=V_{out}=V_{M}$，该点的静态条件是上拉电流和下拉电流相等：\n$$I_{p}(V_{in}=V_{M},V_{out}=V_{M})=I_{n}(V_{in}=V_{M},V_{out}=V_{M}).$$\n\n使用饱和区的长沟道平方律模型，并忽略沟道长度调制和体效应：\n- 对于单个 NMOS，当 $V_{in}=V_{M}$，源极接地，漏极在 $V_{out}=V_{M}$ 时，$V_{GS}=V_{M}$ 且 $V_{DS}=V_{M}$。饱和条件 $V_{DS}\\geq V_{GS}-V_{T}$ 变为 $V_{M}\\geq V_{M}-V_{T}$，这对 $V_{T}\\geq 0$ 成立，因此每个 NMOS 都处于饱和区。一个 NMOS 支路的电流为\n$$I_{n,\\text{single}}=\\frac{1}{2}\\mu_{n}C_{ox}(W/L)_{n}(V_{M}-V_{T})^{2}.$$\n由于有三个相同的支路并联，总下拉电流为\n$$I_{n,\\text{tot}}=3\\cdot \\frac{1}{2}\\mu_{n}C_{ox}(W/L)_{n}(V_{M}-V_{T})^{2}.$$\n\n- 对于 PMOS 网络，有三个相同的器件串联，且所有栅极电压均为 $V_{M}$。一种一阶设计近似方法是将串联堆叠视为一个等效的单个器件，其跨导参数会因串联器件的数量而减小（串联沟道电阻相加）。因此，等效因子为 $K_{p,\\text{eff}}=K_{p}/3$，其中 $K_{p}=\\frac{1}{2}\\mu_{p}C_{ox}(W/L)_{p}$。在开关阈值附近，PMOS 器件工作在饱和区，相对于 $V_{DD}$ 的单个 PMOS 的过驱动电压为 $V_{SG}-V_{T}=(V_{DD}-V_{M})-V_{T}$。因此，总上拉电流可近似为\n$$I_{p,\\text{tot}}=\\frac{1}{3}\\cdot \\frac{1}{2}\\mu_{p}C_{ox}(W/L)_{p}\\bigl((V_{DD}-V_{M})-V_{T}\\bigr)^{2}.$$\n\n对于对称开关阈值 $V_{M}=V_{DD}/2$ 和对称阈值电压 $V_{tn}=V_{T}$ 及 $|V_{tp}|=V_{T}$，NMOS 和 PMOS 的过驱动电压相等：\n$$(V_{M}-V_{T})=\\left(\\frac{V_{DD}}{2}-V_{T}\\right),\\qquad (V_{DD}-V_{M})-V_{T}=\\left(\\frac{V_{DD}}{2}-V_{T}\\right).$$\n令 $I_{p,\\text{tot}}=I_{n,\\text{tot}}$，可得\n$$\\frac{1}{3}\\cdot \\frac{1}{2}\\mu_{p}C_{ox}(W/L)_{p}\\left(\\frac{V_{DD}}{2}-V_{T}\\right)^{2}\n=3\\cdot \\frac{1}{2}\\mu_{n}C_{ox}(W/L)_{n}\\left(\\frac{V_{DD}}{2}-V_{T}\\right)^{2}.$$\n消去公因式 $\\frac{1}{2}C_{ox}\\left(\\frac{V_{DD}}{2}-V_{T}\\right)^{2}$，得到\n$$\\frac{1}{3}\\mu_{p}(W/L)_{p}=3\\,\\mu_{n}(W/L)_{n}.$$\n求解所需的尺寸比 $r=(W/L)_{p}/(W/L)_{n}$，得到\n$$r=9\\,\\frac{\\mu_{n}}{\\mu_{p}}.$$\n已知 $\\mu_{n}=2.7\\,\\mu_{p}$，我们得到\n$$r=9\\times 2.7=24.3.$$\n计算结果四舍五入到三位有效数字为 $24.3$。", "answer": "$$\\boxed{24.3}$$", "id": "1921976"}]}
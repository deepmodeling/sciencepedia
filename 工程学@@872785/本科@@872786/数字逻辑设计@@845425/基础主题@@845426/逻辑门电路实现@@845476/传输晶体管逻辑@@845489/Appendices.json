{"hands_on_practices": [{"introduction": "理解数字电路要从晶体管层面开始。第一个练习邀请你追踪一个常见电路——由传输门构建的异或门——中的逻辑流。通过确定在给定输入下哪些晶体管处于导通状态，你将具体理解这些基本开关是如何协同工作以执行逻辑运算的。[@problem_id:1952009]", "problem": "在数字逻辑设计中，传输晶体管逻辑（pass-transistor logic, PTL）是一种使用晶体管作为开关在节点之间传递信号来实现逻辑门的方法。考虑一个双输入异或门 `Y = A XOR B` 的特定PTL实现，该实现由两个互补金属氧化物半导体（Complementary Metal-Oxide-Semiconductor, CMOS）传输门（transmission gates, TGs）构成。\n\n其基本开关元件是n沟道金属氧化物半导体（n-channel Metal-Oxide-Semiconductor, NMOS）和p沟道金属氧化物半导体（p-channel Metal-Oxide-Semiconductor, PMOS）晶体管。为了进行此数字分析，我们假设：\n- 当NMOS晶体管的栅极端处于高逻辑电平（`1`）时，它处于“导通”（conducting）状态；当其栅极端处于低逻辑电平（`0`）时，它处于“截止”（non-conducting）状态。\n- 当PMOS晶体管的栅极端处于低逻辑电平（`0`）时，它处于“导通”（conducting）状态；当其栅极端处于高逻辑电平（`1`）时，它处于“截止”（non-conducting）状态。\n\n一个传输门（TG）由一个NMOS晶体管和一个PMOS晶体管并联而成。NMOS的栅极连接到控制信号 `C`，而PMOS的栅极连接到互补的控制信号 $\\bar{C}$。仅当 `C=1`（因此 $\\bar{C}=0$）时，该传输门才处于“导通”状态（将其输入信号传递到其输出）。\n\n所讨论的异或门构造如下：\n- **传输门1 (TG1):** 由一个NMOS晶体管 `N1` 和一个PMOS晶体管 `P1` 组成。TG1的输入连接到信号 $\\bar{B}$（`B`的逻辑非）。`N1` 的栅极由信号 `A` 控制，`P1` 的栅极由信号 $\\bar{A}$ 控制。\n- **传输门2 (TG2):** 由一个NMOS晶体管 `N2` 和一个PMOS晶体管 `P2` 组成。TG2的输入连接到信号 `B`。`N2` 的栅极由信号 $\\bar{A}$ 控制，`P2` 的栅极由信号 `A` 控制。\n- **输出:** TG1和TG2的输出连接在一起，形成最终的门输出 `Y`。\n\n对于输入组合 `A=1` 和 `B=0`，请确定处于“导通”（conducting）状态的所有晶体管的完整集合。\n\nA. {N1, P1}\nB. {N2, P2}\nC. {N1, P2}\nD. {N2, P1}\nE. {N1, N2, P1, P2}\nF. {} (空集)", "solution": "我们已知有两个传输门（TGs），由并联的NMOS和PMOS晶体管组成。根据假设：\n- NMOS导通当且仅当其栅极为逻辑 $1$。\n- PMOS导通当且仅当其栅极为逻辑 $0$。\n\n一个由信号 $C$ 控制的传输门，其NMOS栅极连接到 $C$，PMOS栅极连接到 $\\bar{C}$。只有当 $C=1$ 且 $\\bar{C}=0$ 时，该传输门才导通，这使其内部的NMOS和PMOS都导通。\n\n根据给定的异或门具体实现：\n- TG1的输入是 $\\bar{B}$，其 $N1$ 栅极由 $A$ 驱动，$P1$ 栅极由 $\\bar{A}$ 驱动。因此TG1由 $A$ 控制。\n- TG2的输入是 $B$，其 $N2$ 栅极由 $\\bar{A}$ 驱动，$P2$ 栅极由 $A$ 驱动。因此TG2由 $\\bar{A}$ 控制。\n\n对于输入组合 $A=1$ 和 $B=0$，计算其反相信号的值：\n- $A=1 \\implies \\bar{A}=0$。\n- $B=0 \\implies \\bar{B}=1$。\n\n确定导通/截止状态：\n- TG1：$N1$ 栅极 $=A=1 \\implies N1$ 导通。$P1$ 栅极 $=\\bar{A}=0 \\implies P1$ 导通。因此TG1导通。\n- TG2：$N2$ 栅极 $=\\bar{A}=0 \\implies N2$ 截止。$P2$ 栅极 $=A=1 \\implies P2$ 截止。因此TG2截止。\n\n因此，对于 $A=1$，$B=0$ 的情况，导通晶体管的完整集合是 $\\{N1, P1\\}$，这对应于选项A。\n\n（可选的逻辑功能一致性检查：当TG1导通，传递 $\\bar{B}=1$，而TG2截止时，输出 $Y=1$，这与 $A \\oplus B = 1 \\oplus 0 = 1$ 相匹配；这证实了我们对控制信号的解读是正确的。）", "answer": "$$\\boxed{A}$$", "id": "1952009"}, {"introduction": "当你能够追踪信号路径后，下一步就是确定整个电路的宏观功能。这个练习要求你分析一个由NMOS传输晶体管构成的网络，并推导出其等效的布尔逻辑表达式。这项技能对于验证电路的正确性和理解现有设计至关重要。[@problem_id:1952042]", "problem": "考虑一个由理想的N沟道金属氧化物半导体（NMOS）晶体管构成的数字逻辑电路，这些晶体管作为完美的开关工作。当NMOS晶体管的栅极处于高逻辑电平（'1'）时，它会导通，并使信号从其漏极传输到源极。相反，当其栅极处于低逻辑电平（'0'）时，它不导通，形成开路。\n\n该电路有四个主逻辑输入，分别表示为 A、B、C 和 D，以及一个单一输出 F。电路的配置如下：\n\n1.  第一个晶体管 T1，其栅极连接到输入 B，漏极连接到输入 A，源极连接到一个中间节点 N1。\n2.  第二个晶体管 T2，其栅极连接到输入 B 的逻辑反相（表示为 B'），漏极连接到输入 C，源极也连接到中间节点 N1。\n3.  第三个晶体管 T3，其栅极连接到输入 D，漏极连接到中间节点 N1，源极连接到最终输出 F。\n\n假设如果输出 F 没有被任何路径主动驱动为 '1' 或 '0'（即，它处于高阻抗或“浮动”状态），则应将其视为逻辑 '0'。\n\n根据此描述，确定表示该电路行为的布尔逻辑函数 F(A, B, C, D)。从以下选项中选择正确的表达式。在选项中，乘法表示逻辑与运算，加法表示逻辑或运算，而撇号（例如 B'）表示逻辑非运算。\n\nA. `F = (A B' + C B) D`\nB. `F = A B + C B' + D`\nC. `F = (A + D) B + (C + D) B'`\nD. `F = A D + C D`\nE. `F = (A B + C B') D`", "solution": "一个理想的NMOS晶体管作为一个完美的双向开关，当其栅极为逻辑$1$时闭合（从漏极到源极，反之亦然，均导通），当其栅极为逻辑$0$时断开（不导通）。题目还指出，任何浮动输出都解释为逻辑$0$。\n\n- 对于形成节点$N1$的T1和T2：\n  - T1的栅极为$B$，因此当$B=1$时，它导通并将$A$连接到$N1$。\n  - T2的栅极为$B'$，因此当$B=0$时，它导通并将$C$连接到$N1$。\n  - 对于任何固定的$B$，T1或T2中恰好有一个导通，所以$N1$是一个二选一多路选择器，当$B=1$时选择$A$，当$B=0$时选择$C$。因此，\n$$\nN1 = A B + C B'.\n$$\n\n- 对于以$D$为栅极，控制$N1$到$F$的T3：\n  - 当$D=1$时，T3导通并将$N1$传递到$F$，所以$F=N1$。\n  - 当$D=0$时，T3断开，$F$处于浮动状态，根据假设，这被视为$0$。\n  - 因此，\n$$\nF = N1 \\, D.\n$$\n\n代入$N1$的表达式可得\n$$\nF = (A B + C B') D,\n$$\n这与选项E相匹配。", "answer": "$$\\boxed{E}$$", "id": "1952042"}, {"introduction": "对于设计师来说，最终目标不仅是分析，更是创造。最后一个练习将带你进入综合设计的领域，你需要为一个给定的逻辑函数设计出面积效率最高的传输晶体管逻辑电路。你将学习如何策略性地选择控制信号，并应用设计原则来最小化晶体管数量，这是集成电路设计中的一个关键目标。[@problem_id:1952038]", "problem": "一名数字电路设计师的任务是为一个专用处理单元实现布尔函数 $F(A, B, C) = \\bar{A}B + AC$，该单元的首要考虑是最小化芯片面积。设计师需要通过策略性地选择其中一个输入变量（$A$、$B$ 或 $C$）作为传输晶体管的控制信号集，而其余变量则作为待传输的信号，来确定面积效率最高的实现方式。\n\n允许使用两种实现风格：\n1.  **仅NMOS逻辑**：每条信号路径由单个NMOS晶体管进行开关。晶体管的栅极接收控制信号。\n2.  **互补传输门 (TG) 逻辑**：每条信号路径由一个TG进行开关，TG由一个NMOS和一个PMOS晶体管并联而成。NMOS和PMOS晶体管的栅极分别由一个控制信号及其补码驱动。\n\n对于此设计，可以假设所有主输入变量（$A, B, C$）及其补码（$\\bar{A}, \\bar{B}, \\bar{C}$）都可用，且不产生额外的晶体管成本。一个PTL实现被认为是可行的，当且仅当待传输的信号是主输入变量本身，或者是恒定的逻辑电平‘0’(GND)或‘1’(VDD)。目标是找到所需晶体管的绝对最小数量。\n\n确定在这些约束条件下实现函数 $F$ 所需的最小晶体管数量。", "solution": "从给定函数开始：\n$$F(A,B,C)=\\bar{A}B+AC.$$\n对变量 $A$ 使用香农展开：\n$$F=A\\cdot F\\big|_{A=1}+\\bar{A}\\cdot F\\big|_{A=0}.$$\n通过直接代入计算余因子：\n$$F\\big|_{A=1}=\\bar{1}\\,B+1\\cdot C=0\\cdot B+C=C,$$\n$$F\\big|_{A=0}=\\bar{0}\\,B+0\\cdot C=1\\cdot B+0=B.$$\n因此，\n$$F=A\\cdot C+\\bar{A}\\cdot B.$$\n这正是一个由 $A$ 控制的 $2{:}1$ 多路选择器，其数据输入为 $C$（当 $A=1$ 时）和 $B$（当 $A=0$ 时）。$B$ 和 $C$ 都是主输入变量，满足了只有主输入或常量才能被传输的约束条件。\n\n传输晶体管逻辑的实现：\n\n- 仅NMOS的PTL：用两个NMOS传输晶体管实现多路选择器的两个分支：\n  - 一个NMOS晶体管在其栅极接收到 $A$ 时将 $C$ 传输到输出。\n  - 一个NMOS晶体管在其栅极接收到 $\\bar{A}$ 时将 $B$ 传输到输出。\n  由于 $\\bar{A}$ 可用且无成本，这恰好使用了 $2$ 个晶体管。\n\n- 传输门PTL：每个分支使用一个由 $A$ 和 $\\bar{A}$ 控制的TG（一个NMOS与一个PMOS并联）。两个分支需要 $2$ 个TG，即 $4$ 个晶体管。\n\n下界论证：因为当 $A=1$ 时 $F$ 等于 $C$，当 $A=0$ 时 $F$ 等于 $B$，所以输出必须能选择性地连接到两个独立的源（$B$ 和 $C$）。每个从源到输出的路径至少需要一个受控开关，因此至少需要 $2$ 个开关器件。使用 $2$ 个晶体管的仅NMOS实现方式达到了这个下界，在所述约束条件下实现了绝对最小的晶体管数量。\n\n因此，所需的最小晶体管数量是 $2$。", "answer": "$$\\boxed{2}$$", "id": "1952038"}]}
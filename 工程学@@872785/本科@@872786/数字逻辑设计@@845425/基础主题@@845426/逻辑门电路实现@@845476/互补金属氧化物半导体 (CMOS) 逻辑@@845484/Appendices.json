{"hands_on_practices": [{"introduction": "CMOS反相器是数字逻辑的基石。为了在整个芯片上获得可预测且可靠的时序，确保逻辑门的上升和下降时间均衡至关重要。本练习[@problem_id:1924064]将指导您如何通过计算必要的晶体管尺寸来实现这种对称性，其关键在于理解并平衡PMOS和NMOS晶体管的驱动能力。", "problem": "一位数字电路设计工程师正在为一个标准单元库表征一种新的制造工艺。最基本的逻辑门——反相器，是使用互补金属氧化物半导体（CMOS）拓扑结构构建的。该反相器由一个n型金属氧化物半导体（NMOS）晶体管和一个p型金属氧化物半导体（PMOS）晶体管组成。为了在复杂的数字系统中实现可预测的时序，反相器表现出对称的时间响应至关重要，这意味着其输出上升时间等于其输出下降时间。\n\n假设新的制造工艺具有以下参数：\n- NMOS沟道中的电子迁移率为 $\\mu_n = 520 \\text{ cm}^2/(\\text{V}\\cdot\\text{s})$。\n- PMOS沟道中的空穴迁移率为 $\\mu_p = 200 \\text{ cm}^2/(\\text{V}\\cdot\\text{s})$。\n- 两个晶体管都设计有相同的最小沟道长度 $L$。\n- 两个晶体管都具有相同的单位面积栅极氧化层电容 $C_{ox}$。\n- 两个晶体管的阈值电压绝对值相同，即 $|V_{th,p}| = V_{th,n}$。\n\n为了实现对称的上升和下降时间，晶体管的沟道宽度 $W_p$ 和 $W_n$ 必须进行适当的尺寸调整。确定所需的尺寸比，该尺寸比定义为PMOS沟道宽度与NMOS沟道宽度的比值（$W_p / W_n$）。\n\n你的答案应为一个实数，并四舍五入到三位有效数字。", "solution": "对于驱动相同电容性负载的CMOS反相器，要实现对称的上升和下降时间，其有效上拉和下拉驱动强度必须相等，以使平均充电和放电电流相匹配。使用长沟道MOSFET在饱和区的平方律模型，漏极电流的大小为：\n$$\nI_{D}=\\frac{1}{2}\\mu C_{ox}\\frac{W}{L}(V_{ov})^{2}\n$$\n其中 $V_{ov}=V_{GS}-V_{th}$ 是过驱动电压。在 $|V_{th,p}|=V_{th,n}$、沟道长度 $L$ 和 $C_{ox}$ 相同，并且目标是实现一个对称的开关点，从而使上拉和下拉的相关 $V_{ov}$ 可比的条件下，均衡有效电导可简化为匹配跨导参数：\n$$\n\\mu_{p}C_{ox}\\frac{W_{p}}{L}=\\mu_{n}C_{ox}\\frac{W_{n}}{L}\n$$\n消去公共因子 $C_{ox}$ 和 $L$ 得：\n$$\n\\frac{W_{p}}{W_{n}}=\\frac{\\mu_{n}}{\\mu_{p}}\n$$\n代入给定的迁移率：\n$$\n\\frac{W_{p}}{W_{n}}=\\frac{520}{200}=2.60\n$$\n四舍五入到三位有效数字。", "answer": "$$\\boxed{2.60}$$", "id": "1924064"}, {"introduction": "在掌握了基本逻辑门后，我们将它们组合起来构建更复杂的电路。一个逻辑门内部晶体管的物理布局会显著影响其开关速度。这个实践问题[@problem_id:1924059]探讨了一种针对NAND门的常见时序优化技术，它展示了当一个输入信号比其他信号更晚到达时，如何通过策略性地放置“关键路径”上的晶体管来最小化传播延迟。", "problem": "在一个定制互补金属氧化物半导体（CMOS）集成电路的设计中，需要一个三输入与非门。该门电路实现逻辑功能 $Y = \\overline{A \\cdot B \\cdot C}$。其标准实现由一个包含三个并联P沟道金属氧化物半导体（PMOS）晶体管的上拉网络和一个包含三个串联N沟道金属氧化物半导体（NMOS）晶体管的下拉网络组成。\n\n设下拉网络中的三个串联NMOS晶体管分别表示为 $N_1$、$N_2$ 和 $N_3$。晶体管 $N_1$ 连接在输出节点 $Y$ 和一个内部节点 $n_a$ 之间。晶体管 $N_2$ 连接在节点 $n_a$ 和第二个内部节点 $n_b$ 之间。晶体管 $N_3$ 连接在节点 $n_b$ 和地之间。每个晶体管的栅极将连接到输入信号 $A$、$B$ 或 $C$ 中的一个。\n\n由于芯片上的布线延迟，已知输入信号 $C$ 是“关键”或“迟滞到达”的信号。也就是说，在输出必须从高电平转换到低电平（这要求 $A=B=C=1$）的情况下，信号 $A$ 和 $B$ 会在信号 $C$ 从“0”转换到“1”之前很久就稳定在逻辑“1”值。为了优化电路性能，必须最小化这个高到低传播延迟 $t_{pHL}$。\n\n将迟滞到达的信号 $C$ 分配给其中一个NMOS晶体管的栅极，以下哪种分配方式能获得最小的传播延迟 $t_{pHL}$？\n\nA. 将信号 $C$ 连接到 $N_1$ 的栅极。\n\nB. 将信号 $C$ 连接到 $N_2$ 的栅极。\n\nC. 将信号 $C$ 连接到 $N_3$ 的栅极。\n\nD. 将信号 $C$ 分配给任何一个晶体管都会产生相同的传播延迟。", "solution": "CMOS与非门的高到低传播延迟 $t_{pHL}$ 主要由通过NMOS下拉路径对输出负载电容放电所需的时间决定，该路径仅在所选串联路径上的所有三个NMOS器件都导通时才变为导通状态。在给定条件下，$A$ 和 $B$ 提早稳定在逻辑“1”，而 $C$ 是迟滞到达的 $0\\to 1$ 转换信号。因此，放电开始的瞬间取决于哪个NMOS晶体管接收信号 $C$；该瞬间的内部节点电压以及哪些电容初始被充电，共同决定了有效负载，从而决定了 $t_{pHL}$。\n\n将NMOS堆栈建模为三个串联电阻 $R_{1}, R_{2}, R_{3}$（分别对应 $N_{1}, N_{2}, N_{3}$）和三个到地的并联电容：输出节点 $Y$ 处的 $C_{Y}$，节点 $n_{a}$ 处的 $C_{a}$，以及节点 $n_{b}$ 处的 $C_{b}$。下降沿转换的延迟可以通过RC树（Elmore）模型近似为一系列正项的和，这些项与路径首次导通瞬间初始处于 $V_{DD}$ 电压的电容成正比。任何在该瞬间已经处于 $0$ 电压的内部节点都不会增加放电负载，因为它不经历电压变化。\n\n考虑 $C$ 的三种可能分配：\n\n1) $C$ 连接到 $N_{1}$（顶部器件）。在 $C$ 到达之前，$A$ 和 $B$ 已经打开了下面两个器件。因此，$n_{a}$ 和 $n_{b}$ 通过到地的导通路径被保持在接近 $0$ 的电平，而 $Y$ 被PMOS网络保持在 $V_{DD}$。当 $C$ 打开 $N_{1}$ 时，放电开始，此时 $n_{a}$ 和 $n_{b}$ 已经处于低电平。因此，只需要对 $C_{Y}$ 放电。与此条件一致的Elmore形式表达式为：\n$$\nt_{pHL}^{(N_{1})}\\approx \\beta_{Y}C_{Y}\n$$\n其中 $\\beta_{Y}0$ 由串联下拉电阻决定；关键的是，没有来自 $C_{a}$ 或 $C_{b}$ 的额外正项，因为这些节点初始电平为 $0$。\n\n2) $C$ 连接到 $N_{2}$（中间器件）。在 $C$ 到达之前，顶部器件和底部器件是导通的，因此 $Y$ 和 $n_{a}$ 通过从 $Y$ 向下到 $n_{a}$ 的连接被充电至 $V_{DD}$，而 $n_{b}$ 通过底部的到地路径被保持在 $0$ 电平。当 $C$ 打开 $N_{2}$ 时，$C_{Y}$ 和 $C_{a}$ 都必须放电。延迟的形式则为：\n$$\nt_{pHL}^{(N_{2})}\\approx \\beta_{Y}C_{Y}+\\beta_{a}C_{a}\n$$\n其中 $\\beta_{a}0$ 是由于对 $n_{a}$ 放电的电阻路径以及该放电电流通过 $Y$ 所见的串联路径的耦合效应。\n\n3) $C$ 连接到 $N_{3}$（底部器件）。在 $C$ 到达之前，顶部两个器件是导通的，因此 $Y$、$n_{a}$ 和 $n_{b}$ 都被充电至 $V_{DD}$。当 $C$ 打开 $N_{3}$ 时，所有三个电容都必须放电，得到：\n$$\nt_{pHL}^{(N_{3})}\\approx \\beta_{Y}C_{Y}+\\beta_{a}C_{a}+\\beta_{b}C_{b}\n$$\n其中 $\\beta_{b}0$。\n\n由于乘以 $C_{Y}$、$C_{a}$ 和 $C_{b}$ 的所有系数都是正的，并且 $C_{a}, C_{b} > 0$，可以明确地得出 $t_{pHL}^{(N_{1})}  t_{pHL}^{(N_{2})}  t_{pHL}^{(N_{3})}$。因此，将迟滞到达的信号 $C$ 分配给最靠近输出节点的晶体管 $N_1$ 会产生最小的传播延迟。", "answer": "$$\\boxed{A}$$", "id": "1924059"}, {"introduction": "现在，我们将注意力从时序性能转向功耗——这是现代电路设计中，尤其是对于移动和物联网设备而言，另一个至关重要的约束。设计精良的CMOS电路其功耗主要来自动态功耗，即在逻辑状态发生转换时消耗的能量。本练习[@problem_id:1924098]提供了一个实际场景，让您亲手计算单个逻辑门的动态功耗，这是估算整个数字系统功耗预算的一项基本技能。", "problem": "一位工程师的任务是为一个用于物联网（IoT）设备的定制设计的低功耗微控制器估算功率预算。该设计中的一个关键组件是一个互补金属氧化物半导体（CMOS）反相器，用于缓冲一个时钟门控信号。该微控制器的工作电源电压 $V_{DD}$ 为 1.8 V，并由一个频率 $f_{clk}$ 为 24 MHz 的系统时钟驱动。该反相器驱动的总负载电容 $C_L$ 为 35 fF，其中包括下一级逻辑电路的输入电容和寄生布线电容。\n\n通过仿真确定，该反相器输出端的信号平均每 5 个时钟周期发生一次从低到高的转换（即从逻辑'0'到逻辑'1'）。假设动态功率是此门电路功耗的唯一主要来源，计算该反相器消耗的平均动态功率。\n\n将您的最终答案以微瓦（$\\mu$W）为单位表示，并四舍五入到三位有效数字。", "solution": "对于一个CMOS反相器，每次输出从低到高转换时从电源汲取的动态能量为：\n$$\nE_{\\text{LH}} = C_{L} V_{DD}^{2}\n$$\n如果每个时钟周期的平均低到高转换次数为 $\\alpha$，时钟频率为 $f_{clk}$，那么平均动态功率为：\n$$\nP_{\\text{dyn}} = \\alpha\\, C_{L} V_{DD}^{2} f_{clk}\n$$\n此处，输出每 $5$ 个时钟周期发生一次从低到高的转换，所以 $\\alpha = \\frac{1}{5}$。代入给定值 $C_{L} = 35 \\times 10^{-15}\\ \\text{F}$，$V_{DD} = 1.8\\ \\text{V}$ 和 $f_{clk} = 24 \\times 10^{6}\\ \\text{Hz}$：\n$$\nP_{\\text{dyn}} = \\frac{1}{5} \\left(35 \\times 10^{-15}\\right) \\left(1.8\\right)^{2} \\left(24 \\times 10^{6}\\right)\n$$\n分步计算：\n$$\n(1.8)^{2} = 3.24\n$$\n$$\n35 \\times 3.24 \\times 24 = 2721.6\n$$\n$$\n10^{-15} \\times 10^{6} = 10^{-9}\n$$\n因此\n$$\nP_{\\text{dyn}} = \\frac{2721.6}{5} \\times 10^{-9}\\ \\text{W} = 544.32 \\times 10^{-9}\\ \\text{W} = 5.4432 \\times 10^{-7}\\ \\text{W}\n$$\n转换为微瓦（其中 $1\\ \\text{微瓦} = 10^{-6}\\ \\text{W}$）得到：\n$$\nP_{\\text{dyn}} = 0.54432\\ \\text{微瓦}\n$$\n四舍五入到三位有效数字，结果是 $0.544$。", "answer": "$$\\boxed{0.544}$$", "id": "1924098"}]}
{"hands_on_practices": [{"introduction": "异或门独特的代数性质使其在算法中有巧妙的应用。本练习将通过经典的“异或交换”算法，展示如何仅用三个异或门交换两个变量的值，而无需临时存储。完成此练习有助于你深入理解异或运算的自反性 ($A \\oplus A = 0$) 和结合律等核心属性。[@problem_id:1967657]", "problem": "数字信号处理器中的一个专门的数据加扰单元对两条标记为 $A$ 和 $B$ 的1位数据线进行操作。这些数据线上的初始逻辑值分别用 $A_0$ 和 $B_0$ 表示。该单元使用2输入异或 (XOR) 门执行一个固定的三步操作序列。每次操作后，在下一次操作开始之前，指定的数据线会用新值更新。操作顺序如下：\n\n1.  $A$ 线上的值被替换为对 $A$ 和 $B$ 的当前值应用异或操作的结果。\n2.  $B$ 线上的值被替换为对 $A$ 和 $B$ 的当前值应用异或操作的结果。\n3.  $A$ 线上的值被替换为对 $A$ 和 $B$ 的当前值应用异或操作的结果。\n\n设经过此三步序列后，$A$ 和 $B$ 线上的最终逻辑值为 $A_f$ 和 $B_f$。请确定用初始值 $A_0$ 和 $B_0$ 表示的 $A_f$ 和 $B_f$ 的表达式。你的答案应以一行两个表达式的形式呈现，按顺序分别代表 $A$ 和 $B$ 的最终值。", "solution": "设逻辑异或运算用符号 $\\oplus$ 表示。我们将追踪数据线 $A$ 和 $B$ 在整个三步序列中的状态。我们将使用的异或运算的关键性质如下：\n- 交换律：$X \\oplus Y = Y \\oplus X$\n- 结合律：$(X \\oplus Y) \\oplus Z = X \\oplus (Y \\oplus Z)$\n- 单位元：$X \\oplus 0 = X$\n- 自逆性：$X \\oplus X = 0$\n\n设系统状态由值对 $(A, B)$ 表示。\n\n**初始状态：**\n数据线上的初始值为 $(A_0, B_0)$。\n\n**步骤 1：**\n操作是将 $A$ 线上的值替换为 $A \\oplus B$。\n当前值为 $A = A_0$ 和 $B = B_0$。\n$A$ 线的新值为 $A_1 = A_0 \\oplus B_0$。\n$B$ 线上的值在此步骤中保持不变。\n因此，步骤 1 之后的状态是 $(A_1, B_1) = (A_0 \\oplus B_0, B_0)$。\n\n**步骤 2：**\n操作是将 $B$ 线上的值替换为 $A \\oplus B$。\n当前值是步骤 1 结束时的值：$A = A_1 = A_0 \\oplus B_0$ 和 $B = B_1 = B_0$。\n$B$ 线的新值为 $B_2 = A_1 \\oplus B_1$。\n代入 $A_1$ 和 $B_1$ 的表达式：\n$$B_2 = (A_0 \\oplus B_0) \\oplus B_0$$\n使用异或的结合律：\n$$B_2 = A_0 \\oplus (B_0 \\oplus B_0)$$\n使用自逆性，$B_0 \\oplus B_0 = 0$：\n$$B_2 = A_0 \\oplus 0$$\n使用单位元性质，$A_0 \\oplus 0 = A_0$：\n$$B_2 = A_0$$\n$A$ 线上的值在此步骤中保持不变，因此 $A_2 = A_1 = A_0 \\oplus B_0$。\n步骤 2 之后的状态是 $(A_2, B_2) = (A_0 \\oplus B_0, A_0)$。\n\n**步骤 3：**\n操作是将 $A$ 线上的值替换为 $A \\oplus B$。\n当前值是步骤 2 结束时的值：$A = A_2 = A_0 \\oplus B_0$ 和 $B = B_2 = A_0$。\n$A$ 线的新值是最终值 $A_f = A_2 \\oplus B_2$。\n代入 $A_2$ 和 $B_2$ 的表达式：\n$$A_f = (A_0 \\oplus B_0) \\oplus A_0$$\n使用异或的交换律：\n$$A_f = (B_0 \\oplus A_0) \\oplus A_0$$\n使用异或的结合律：\n$$A_f = B_0 \\oplus (A_0 \\oplus A_0)$$\n使用自逆性，$A_0 \\oplus A_0 = 0$：\n$$A_f = B_0 \\oplus 0$$\n使用单位元性质，$B_0 \\oplus 0 = B_0$：\n$$A_f = B_0$$\n$B$ 线上的值在此步骤中保持不变，因此最终值为 $B_f = B_2 = A_0$。\n\n**最终状态：**\n数据线上的最终值为 $(A_f, B_f) = (B_0, A_0)$。这表明，所述的操作序列成功地交换了两条数据线的初始值，而没有使用任何临时存储元件。题目要求按顺序给出 $A$ 和 $B$ 的最终值的表达式。\n\n$A$ 的最终值：$A_f = B_0$\n$B$ 的最终值：$B_f = A_0$", "answer": "$$\\boxed{\\begin{pmatrix} B_0  A_0 \\end{pmatrix}}$$", "id": "1967657"}, {"introduction": "掌握了基本性质后，我们来挑战一个实际的电路设计问题。本练习要求在严格的资源限制下，用异或门为核心构建一个计算3位二进制数补码的算术电路。这会让你体会到异或门在二进制加法和求补运算中的关键作用，是连接理论与硬件实践的桥梁。[@problem_id:1967645]", "problem": "一名电气工程专业的学生正在资源受限的条件下设计一个紧凑型算术逻辑单元（ALU）。其任务是创建一个电路，计算一个3位二进制数 $B = b_2b_1b_0$ 的二补数，其中 $b_2$ 是最高有效位。\n\n由于元件库的严格限制，该设计必须使用一组特定的逻辑门来实现：恰好两个2输入异或（XOR）门，以及恰好一个其他的2输入基本逻辑门。电路的输出是二补数结果的各个比特位 $S = s_2s_1s_0$。\n\n下列哪一个基本逻辑门是该设计中必须使用的唯一附加门？\n\nA. AND\n\nB. OR\n\nC. NAND\n\nD. NOR\n\nE. XNOR", "solution": "设3位输入为 $B=b_{2}b_{1}b_{0}$，其二补数输出为 $S=s_{2}s_{1}s_{0}$。二补数的定义为\n$$\nS=\\overline{B}+1.\n$$\n我们可以通过对 $\\overline{B}$ 加1的行波加法来逐位实现。\n\n对第0位：设 $x_{0}=\\overline{b_{0}}$ 且初始进位 $c_{0}=1$。则\n$$\ns_{0}=x_{0}\\oplus c_{0}=\\overline{b_{0}}\\oplus 1=b_{0},\\quad c_{1}=x_{0}\\land c_{0}=\\overline{b_{0}}.\n$$\n\n对第1位：设 $x_{1}=\\overline{b_{1}}$。则\n$$\ns_{1}=x_{1}\\oplus c_{1}=\\overline{b_{1}}\\oplus\\overline{b_{0}}=b_{1}\\oplus b_{0},\n$$\n这里使用了恒等式 $\\overline{u}\\oplus\\overline{v}=u\\oplus v$。产生的进位是\n$$\nc_{2}=x_{1}\\land c_{1}=\\overline{b_{1}}\\land\\overline{b_{0}}.\n$$\n\n对第2位：设 $x_{2}=\\overline{b_{2}}$。则\n$$\ns_{2}=x_{2}\\oplus c_{2}=\\overline{b_{2}}\\oplus\\left(\\overline{b_{1}}\\land\\overline{b_{0}}\\right).\n$$\n定义 $t=b_{1}\\lor b_{0}$。根据德摩根定律，$\\overline{b_{1}}\\land\\overline{b_{0}}=\\overline{t}$。再次使用恒等式 $\\overline{u}\\oplus\\overline{v}=u\\oplus v$，\n$$\ns_{2}=\\overline{b_{2}}\\oplus\\overline{t}=b_{2}\\oplus t=b_{2}\\oplus(b_{1}\\lor b_{0}).\n$$\n\n因此，所需的输出表达式为\n$$\ns_{0}=b_{0},\\quad s_{1}=b_{1}\\oplus b_{0},\\quad s_{2}=b_{2}\\oplus(b_{1}\\lor b_{0}).\n$$\n一个使用恰好两个2输入XOR门和一个其他2输入基本逻辑门来实现这些输出的电路可以设计如下：\n- 使用一个XOR门计算 $s_{1}=b_{1}\\oplus b_{0}$。\n- 使用一个OR门生成 $t=b_{1}\\lor b_{0}$。\n- 使用第二个XOR门计算 $s_{2}=b_{2}\\oplus t$。\n- 直接将 $b_0$ 连接到输出 $s_0$。\n\n在所有选项中，只有OR门可以直接提供计算 $s_{2}$ 所需的 $b_{1}\\lor b_{0}$，而无需额外的反相器或XOR门。AND、NAND和NOR门需要反相器或额外的XOR门才能得到 $b_{1}\\lor b_{0}$，而XNOR门只有在 $b_{1},b_{0}$ 的NOR运算结果也可用时才有用，但这在给定约束下无法实现。\n\n因此，那个唯一的附加门必须是OR门。", "answer": "$$\\boxed{B}$$", "id": "1967645"}, {"introduction": "理想逻辑门在现实中不存在，所有门电路都具有传播延迟。本练习将分析一个包含异或门的电路在存在延迟时的动态行为，探讨其如何对信号变化做出反应。通过解决这个问题，你将理解信号竞争是如何产生“毛刺”(glitch)的，这是所有数字设计师都必须面对的关键时序问题。[@problem_id:1967650]", "problem": "考虑一个用于检测输入信号变化的数字电路。该电路由一个双输入异或门（XOR）和一个非门（反相器）组成。一个表示为 `A` 的输入信号直接连接到异或门的第一个输入端。这个相同的信号 `A` 也被送入非门的输入端。非门的输出随后连接到异或门的第二个输入端。电路的最终输出 `Y` 取自异或门的输出。\n\n这些逻辑门是非理想的。非门具有一个特性传播延迟 `t_{pd,INV}`，这意味着其输出在其输入发生跳变后 `t_{pd,INV}` 秒发生跳变。类似地，异或门有一个传播延迟 `t_{pd,XOR}`。为简单起见，假设每个门的从低到高和从高到低的跳变具有相同的传播延迟。\n\n输入信号 `A` 是一个频率为 `f`、占空比为 50% 的周期性方波。您可以假设方波的周期远大于门的传播延迟（即 `1/f \\gg t_{pd,INV}` 和 `1/f \\gg t_{pd,XOR}`），因此一次跳变引起的瞬态效应在下一次跳变开始之前已完全消失。\n\n确定输出信号 `Y` 的占空比。占空比定义为在一个完整周期内信号处于逻辑高电平的时间所占的比例。请用给定的参数将您的答案表示为单个闭式解析表达式。", "solution": "问题要求计算特定电路配置下输出信号 `Y` 的占空比。电路输出 `Y` 是 `A \\oplus \\text{NOT}(A)` 的结果，其中非门和异或门都存在传播延迟。\n\n让我们通过追踪信号随时间的变化来分析电路的行为。我们可以分析输入信号 `A` 对单个上升沿和单个下降沿的响应。设输入信号 `A` 的周期为 `T = 1/f`。由于占空比为 50%，信号在高电平的时间为 `T/2`，在低电平的时间为 `T/2`。\n\n**1. 对 `A` 的上升沿进行分析：**\n\n假设输入信号 `A` 在时间 `t=0` 时从逻辑 0（低电平）跳变到逻辑 1（高电平）。\n设异或门的两个输入为 `X_1` 和 `X_2`。\n- `X_1` 直接连接到 `A`。因此，`X_1` 在 `t=0` 时从 0 跳变到 1。\n- `X_2` 是非门的输出，其输入是 `A`。在 `t=0` 之前，`A` 是 0，所以非门的输出 `X_2` 是 1。当 `A` 在 `t=0` 时从 0 跳变到 1，非门的输出将在其传播延迟 `t_{pd,INV}` 之后从 1 跳变到 0。因此，`X_2` 在 `t = t_{pd,INV}` 时从 1 跳变到 0。\n\n现在，我们来观察异或门的输入对 `(X_1, X_2)` 随时间的变化：\n- 对于 `t  0`：`(X_1, X_2) = (0, 1)`。异或运算 `0 \\oplus 1` 的结果是 1。\n- 对于 `0 \\le t  t_{pd,INV}`：`X_1` 已经变为 1，但 `X_2` 尚未改变。输入为 `(X_1, X_2) = (1, 1)`。异或运算 `1 \\oplus 1` 的结果是 0。\n- 对于 `t \\ge t_{pd,INV}`：`X_2` 现已跳变到 0。输入为 `(X_1, X_2) = (1, 0)`。异或运算 `1 \\oplus 0` 的结果是 1。\n\n异或门的输出 `Y` 将在其自身的传播延迟 `t_{pd,XOR}` 之后反映这些变化。\n- 对于 `t  t_{pd,XOR}`：输出 `Y` 保持其初始状态，对应于输入 `(0, 1)`，所以 `Y=1`。\n- 在 `t = t_{pd,XOR}` 时：在 `t=0` 时异或门输入的变化（从 `(0,1)` 到 `(1,1)`）传播到输出。输出 `Y` 从 1 跳变到 0。\n- 在 `t = t_{pd,INV} + t_{pd,XOR}` 时：在 `t=t_{pd,INV}` 时异或门输入的变化（从 `(1,1)` 到 `(1,0)`）传播到输出。输出 `Y` 从 0 跳变回 1。\n\n这个分析表明，对于 `A` 的每一个上升沿，输出 `Y` 都会产生一个暂时的低电平脉冲，通常称为毛刺（glitch）。这个低电平脉冲的持续时间是 `Y` 下降沿和上升沿跳变之间的时间差：`\\Delta t_{low,1} = (t_{pd,INV} + t_{pd,XOR}) - t_{pd,XOR} = t_{pd,INV}`。\n\n**2. 对 `A` 的下降沿进行分析：**\n\n输入方波的占空比为 50%，所以 `A` 在 `t = T/2` 时从 1 跳变到 0。\n- `X_1 = A` 在 `t = T/2` 时从 1 跳变到 0。\n- 非门的输入从 1 跳变到 0。其输出 `X_2` 将在延迟 `t_{pd,INV}` 之后从 0 跳变到 1。因此，`X_2` 在 `t = T/2 + t_{pd,INV}` 时从 0 跳变到 1。\n\n我们来观察这次跳变前后输入对 `(X_1, X_2)` 的情况：\n- 对于 `t_{pd,INV} \\le t  T/2`：根据前面对上升沿的分析，输入稳定在 `(1, 0)`。异或运算 `1 \\oplus 0` 的结果是 1。\n- 对于 `T/2 \\le t  T/2 + t_{pd,INV}`：`X_1` 已经变为 0，但 `X_2` 仍然是 0。输入为 `(X_1, X_2) = (0, 0)`。异或运算 `0 \\oplus 0` 的结果是 0。\n- 对于 `t \\ge T/2 + t_{pd,INV}`：`X_2` 现已跳变到 1。输入为 `(X_1, X_2) = (0, 1)`。异或运算 `0 \\oplus 1` 的结果是 1。\n\n同样，输出 `Y` 在 `t_{pd,XOR}` 的延迟后反映这些变化。\n- 在 `t = T/2 + t_{pd,XOR}` 时：`t=T/2` 时异或门输入的变化传播出去，`Y` 从 1 跳变到 0。\n- 在 `t = T/2 + t_{pd,INV} + t_{pd,XOR}` 时：`t=T/2 + t_{pd,INV}` 时的变化传播出去，`Y` 从 0 跳变回 1。\n\n因此，对于 `A` 的每一个下降沿，输出 `Y` 处都会产生另一个低电平脉冲。这第二个脉冲的持续时间是 `\\Delta t_{low,2} = (T/2 + t_{pd,INV} + t_{pd,XOR}) - (T/2 + t_{pd,XOR}) = t_{pd,INV}`。\n\n**3. 占空比计算：**\n\n在输入信号 `A` 的一个完整周期 `T` 内，有一个上升沿和一个下降沿。每个边沿在输出 `Y` 处产生一个持续时间为 `t_{pd,INV}` 的低电平脉冲。因此，在一个周期内，输出 `Y` 处于低电平的总时间是：\n`t_{low,total} = \\Delta t_{low,1} + \\Delta t_{low,2} = t_{pd,INV} + t_{pd,INV} = 2 t_{pd,INV}`。\n\n输出信号 `Y` 的总周期与输入信号相同，为 `T`。在一个周期内，输出 `Y` 处于高电平的时间是：\n`t_{high} = T - t_{low,total} = T - 2 t_{pd,INV}`。\n\n占空比定义为信号处于高电平的时间所占的比例：\n`\\text{Duty Cycle} = \\frac{t_{high}}{T} = \\frac{T - 2 t_{pd,INV}}{T} = 1 - \\frac{2 t_{pd,INV}}{T}`。\n\n问题给出了输入信号的频率 `f`，并且我们知道 `T = 1/f`。将此代入占空比的表达式中：\n`\\text{Duty Cycle} = 1 - \\frac{2 t_{pd,INV}}{1/f} = 1 - 2 f t_{pd,INV}`。\n\n请注意，异或门的传播延迟 `t_{pd,XOR}` 会影响脉冲出现的时间（它将整个输出波形在时间上平移），但它不影响脉冲的持续时间，因此也不影响输出信号的占空比。\n\n信号 `Y` 占空比的最终表达式是 `1 - 2 f t_{pd,INV}`。", "answer": "$$\\boxed{1 - 2 f t_{pd,INV}}$$", "id": "1967650"}]}
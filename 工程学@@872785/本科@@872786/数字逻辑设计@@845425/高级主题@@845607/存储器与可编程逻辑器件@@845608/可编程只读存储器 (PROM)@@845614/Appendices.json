{"hands_on_practices": [{"introduction": "这个练习展示了可编程只读存储器（PROM）作为实现组合逻辑的通用工具的基本功能。我们可以将函数的真值表直接编程到PROM中，而无需使用逻辑门设计电路。本练习将指导您实现一个模3计算器，这个任务突显了如何将任何任意的输入-输出映射，通过将PROM视为一个预先计算好的查找表来实现。[@problem_id:1955500]", "problem": "一个数字系统需要一个组合逻辑电路，该电路计算一个3位无符号二进制数 $N$ 模3的值。该功能将使用单个可编程只读存储器 (PROM) 来实现。输入数的三个比特，记为 $B_2B_1B_0$ (其中 $B_2$ 是最高有效位)，直接连接到 PROM 的地址线上。存储在每个地址位置的数据必须是结果 $R = N \\pmod 3$ 的无符号二进制表示。\n\nPROM 的总大小描述为 $2^A \\times W$，其中 $A$ 是地址线的数量，$W$ 是数据输出字的宽度（以比特为单位）。对于此应用，$A$ 和 $W$ 都应选择所需的最小值。\n\n以下哪个选项正确指定了必须分别存储在 PROM 地址 0 到 7 的数据字序列？\n\nA. `00, 01, 00, 01, 00, 01, 00, 01`\n\nB. `00, 01, 10, 11, 00, 01, 10, 11`\n\nC. `00, 01, 10, 00, 01, 10, 00, 01`\n\nD. `01, 10, 00, 01, 10, 00, 01, 00`\n\nE. `00, 01, 00, 10, 00, 01, 10, 01`", "solution": "设3位无符号输入为 $N = B_{2}2^{2} + B_{1}2^{1} + B_{0}$，其中 $B_{i} \\in \\{0,1\\}$ 且 $B_{2}$ 为最高有效位。PROM 的地址线由 $B_{2}B_{1}B_{0}$ 直接驱动，因此地址为 $a=N$。因此所需的地址数量为 $2^{A}=2^{3}$，所以 $A=3$。\n\n要求的输出为 $R=N \\bmod 3$。由于 $R \\in \\{0,1,2\\}$，最小数据宽度 $W$ 必须满足 $2^{W} \\geq 3$，所以 $W=2$。我们在地址 $a=N$ 处存储 $R$ 的2位无符号表示。\n\n计算 $N=0$ 到 $N=7$ 时的 $R$ 值：\n- $N=0 \\Rightarrow R=0 \\Rightarrow 00$\n- $N=1 \\Rightarrow R=1 \\Rightarrow 01$\n- $N=2 \\Rightarrow R=2 \\Rightarrow 10$\n- $N=3 \\Rightarrow R=0 \\Rightarrow 00$\n- $N=4 \\Rightarrow R=1 \\Rightarrow 01$\n- $N=5 \\Rightarrow R=2 \\Rightarrow 10$\n- $N=6 \\Rightarrow R=0 \\Rightarrow 00$\n- $N=7 \\Rightarrow R=1 \\Rightarrow 01$\n\n因此，地址 $0$ 到 $7$ 的序列是 $00, 01, 10, 00, 01, 10, 00, 01$，这对应于选项 C。", "answer": "$$\\boxed{C}$$", "id": "1955500"}, {"introduction": "在将PROM视为逻辑实现工具的概念基础上，下一个练习将探讨其在创建自定义算术电路中的应用。您将对一个PROM进行编程，使其作为一个3位数字的平方器，这在数字信号处理和图形学中是常见的需求。这个问题强调了输入值（地址）、输出值（存储的数据）与存储器的物理限制（如有限的输出数据宽度）之间的关键关系。[@problem_id:1955541]", "problem": "一个数字系统需要一个能计算3位无符号整数平方的组件。这将使用一个具有8个存储单元和4位数据字长（一个 $8 \\times 4$ PROM）的可编程只读存储器（PROM）来实现。3位的输入数字用作PROM的地址，而4位的输出数据字即为所需的结果。\n每个存储地址要编程写入的值是该地址十进制等价值的平方。如果计算出的平方值需要超过4位来表示（即，值大于或等于16），则存储的值必须是将完整的二进制表示截断为其最低4位的结果。\n将存储在PROM中的八个4位字均视为无符号整数，这八个整数值的总和是多少？", "solution": "3位地址 $a$ 的取值范围是集合 $\\{0,1,2,3,4,5,6,7\\}$。在每个地址上，PROM存储的是该地址的平方值截断为最低4位的结果。提取一个整数 $x$ 的最低4位等价于对 $x$ 取模16，因此地址 $a$ 处存储的值为\n$$\nv(a)=a^{2}\\bmod 16.\n$$\n对每个地址计算 $v(a)$：\n$$\n\\begin{aligned}\na=0:\\quad 0^{2}=0\\;\\Rightarrow\\;v(0)=0,\\\\\na=1:\\quad 1^{2}=1\\;\\Rightarrow\\;v(1)=1,\\\\\na=2:\\quad 2^{2}=4\\;\\Rightarrow\\;v(2)=4,\\\\\na=3:\\quad 3^{2}=9\\;\\Rightarrow\\;v(3)=9,\\\\\na=4:\\quad 4^{2}=16\\equiv 0\\;(\\bmod 16)\\;\\Rightarrow\\;v(4)=0,\\\\\na=5:\\quad 5^{2}=25\\equiv 9\\;(\\bmod 16)\\;\\Rightarrow\\;v(5)=9,\\\\\na=6:\\quad 6^{2}=36\\equiv 4\\;(\\bmod 16)\\;\\Rightarrow\\;v(6)=4,\\\\\na=7:\\quad 7^{2}=49\\equiv 1\\;(\\bmod 16)\\;\\Rightarrow\\;v(7)=1.\n\\end{aligned}\n$$\n将每个4位字视为一个无符号整数，所求的总和是\n$$\nS=\\sum_{a=0}^{7}v(a)=0+1+4+9+0+9+4+1=(0+0)+(1+1)+(4+4)+(9+9)=0+2+8+18=28.\n$$", "answer": "$$\\boxed{28}$$", "id": "1955541"}, {"introduction": "这最后一个练习挑战您去实现一个更复杂且广泛使用的功能：位数统计器（population counter），它计算输入中设置为1的比特数。您将使用一个稍大尺寸的PROM，并探索如何使用校验和来有效验证全部编程内容。这个练习不仅加强了您将函数映射到PROM的能力，还鼓励您分析性地思考存储在内存中数据的整体属性。[@problem_id:1955511]", "problem": "在一个高通量数据分析流水线中，一个专门的硬件组件被设计用于对4位数据块（也称为半字节）执行汉明重量（population count）计算。汉明重量是指数据二进制表示中值为 '1' 的比特数。该组件使用可编程只读存储器（PROM）实现。\n\nPROM有4条地址线，$A_3, A_2, A_1, A_0$，用于接收4位的半字节数据。它有3条数据输出线，$D_2, D_1, D_0$。对于任何给定的输入地址，PROM被编程为在其数据线上输出一个3位二进制数，该数对应于输入地址的汉明重量。例如，如果输入地址是 `0110`（十进制为6），其汉明重量为2，因此PROM应输出 `010`。\n\n为了验证PROM所编程内容的完整性，需要计算一个诊断校验和。该校验和是存储器中所有16个三位数据字的十进制整数等价值之和。计算此诊断校验和的值。", "solution": "设输入地址位为 $a_{3},a_{2},a_{1},a_{0} \\in \\{0,1\\}$。对于每个地址，PROM输出其汉明重量的3位二进制表示。该汉明重量的值为\n$$\ns(a_{3},a_{2},a_{1},a_{0})=a_{3}+a_{2}+a_{1}+a_{0}.\n$$\n诊断校验和 $S$ 是这16个地址对应的十进制数值的总和：\n$$\nS=\\sum_{(a_{3},a_{2},a_{1},a_{0})\\in\\{0,1\\}^{4}} \\left(a_{3}+a_{2}+a_{1}+a_{0}\\right).\n$$\n交换求和顺序可得\n$$\nS=\\sum_{j=0}^{3}\\ \\sum_{(a_{3},a_{2},a_{1},a_{0})\\in\\{0,1\\}^{4}} a_{j}.\n$$\n对于任何固定的比特位置 $j$，16个地址中恰好有一半的地址其 $a_{j}=1$，因此\n$$\n\\sum_{(a_{3},a_{2},a_{1},a_{0})\\in\\{0,1\\}^{4}} a_{j}=8.\n$$\n所以，\n$$\nS=4 \\times 8=32.\n$$\n等价地，按汉明重量 $k$ 对输入进行分组可得 $S=\\sum_{k=0}^{4} k \\binom{4}{k}$，并使用二项式恒等式 $\\sum_{k=0}^{n} k \\binom{n}{k}=n 2^{n-1}$，当 $n=4$ 时，得出 $S=4 \\cdot 2^{3}=32$，这与直接计数法的结果一致。", "answer": "$$\\boxed{32}$$", "id": "1955511"}]}
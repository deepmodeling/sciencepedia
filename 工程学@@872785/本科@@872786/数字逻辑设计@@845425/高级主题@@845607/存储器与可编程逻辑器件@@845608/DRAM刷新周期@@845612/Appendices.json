{"hands_on_practices": [{"introduction": "动态随机存取存储器（DRAM）为了防止数据丢失，必须在规定的时间内刷新其所有存储单元行。这个总刷新周期（$t_{REFI}$）是DRAM控制器设计的核心参数。本练习将通过一个分布式刷新方案的场景，帮助你掌握根据每行刷新间隔和总行数计算 $t_{REFI}$ 的基本方法 [@problem_id:1930727]。", "problem": "一位计算机工程专业的学生正在为一种使用特定类型动态随机存取存储器（DRAM）的专用嵌入式系统设计内存控制器。该DRAM芯片的数据手册规定，它共有8192行，并且所有行都必须刷新以防止数据丢失。该学生设计的控制器实现了一种分布式刷新机制，其中单个行刷新命令以恒定的时间间隔发出。一次行刷新操作的开始与下一次操作的开始之间的时间间隔被指定为 $7.8$ 微秒。\n\n计算总刷新间隔 $t_{REFI}$，它表示在任何给定行必须被刷新之前所允许经过的最长时间。这对应于控制器将DRAM芯片中的每一行精确刷新一次所需的总时间。答案以毫秒（ms）为单位表示，并四舍五入到三位有效数字。", "solution": "该DRAM有 $N_{\\text{rows}}=8192$ 行，控制器以 $t_{\\text{row}}=7.8$ 微秒的恒定起始间隔发出单行刷新命令。对于分布式刷新，刷新所有行一次所需的时间（即总刷新间隔）是行数乘以每行的刷新间隔：\n$$\nt_{\\text{REFI}}=N_{\\text{rows}} \\cdot t_{\\text{row}}=8192 \\times 7.8 \\text{ 微秒}。\n$$\n明确地计算乘积：\n$$\n8192 \\times 7.8=\\frac{78}{10} \\times 8192=\\frac{78 \\cdot 8192}{10}=\\frac{638976}{10}=63897.6 \\text{ 微秒}。\n$$\n使用 $1 \\text{ 毫秒}=1000 \\text{ 微秒}$ 将微秒转换为毫秒：\n$$\nt_{\\text{REFI}}=\\frac{63897.6}{1000}=63.8976 \\text{ 毫秒}。\n$$\n四舍五入到三位有效数字：\n$$\nt_{\\text{REFI}}=63.9 \\text{ 毫秒}。\n$$", "answer": "$$\\boxed{63.9}$$", "id": "1930727"}, {"introduction": "理解了基本的刷新时序后，量化其对系统性能的影响至关重要，这通常通过“刷新开销”来衡量。刷新开销并非固定不变，它会受到工作温度等外部因素的影响，因为高温会加剧电容泄漏，迫使刷新更加频繁。通过此练习 [@problem_id:1930741]，你将计算在更严苛的环境下刷新开销如何变化，从而体会现实世界中的工程权衡。", "problem": "一个工业控制系统利用动态随机存取存储器（DRAM）模块来存储操作数据。DRAM中的存储单元必须定期刷新以防止数据丢失。此刷新过程会使存储器暂时无法进行读或写操作，从而产生开销。刷新开销定义为存储器因执行刷新操作而繁忙的时间占总时间的比例。\n\n在标准操作条件下，该DRAM模块的规格如下：\n- 需要刷新的总行数：8192 行\n- 单行刷新周期所需时间（$t_{RFC}$）：350 ns\n- 任何给定行的刷新之间的标准最大间隔，也称为刷新间隔（$t_{REFI}$）：64 ms\n\n由于操作环境的变化，控制系统周围的环境温度显著升高。这种升高的温度增加了DRAM电容器的漏电率，迫使刷新间隔（$t_{REFI}$）减半以确保数据完整性。DRAM的所有其他时序参数，例如$t_{RFC}$，保持不变。\n\n计算在高温环境下运行的DRAM模块的新刷新开销。将答案表示为十进制数值，并四舍五入到三位有效数字。", "solution": "刷新开销是DRAM因刷新而不可用的时间所占的比例。如果 $N$ 行必须在总刷新窗口 $T$ 内刷新，并且每次刷新操作使DRAM在 $t_{RFC}$ 时间内不可用，那么开销为\n$$\nO=\\frac{N\\,t_{RFC}}{T}.\n$$\n在标准条件下，$N=8192$ 且 $T=64 \\times 10^{-3} \\text{ s}$。当刷新间隔 $t_{REFI}$ 减半时，刷新所有行的时间窗口也减半，因此新的窗口为 $T'=\\frac{T}{2}=32 \\times 10^{-3} \\text{ s}$。在 $t_{RFC}$ 不变的情况下，新的开销为\n$$\nO'=\\frac{N\\,t_{RFC}}{T'}=\\frac{8192 \\cdot \\left(350 \\times 10^{-9} \\text{ s}\\right)}{32 \\times 10^{-3} \\text{ s}}.\n$$\n分步计算：\n$$\n8192 \\cdot 350=2,867,200,\\quad 2,867,200 \\times 10^{-9} \\text{ s}=2.8672 \\times 10^{-3} \\text{ s},\n$$\n因此\n$$\nO'=\\frac{2.8672 \\times 10^{-3}}{32 \\times 10^{-3}}=\\frac{2.8672}{32}=0.0896.\n$$\n四舍五入到三位有效数字，结果为 $0.0896$。", "answer": "$$\\boxed{0.0896}$$", "id": "1930741"}, {"introduction": "为了应对刷新开销带来的性能挑战，现代DRAM采用了多存储体（multi-bank）架构，这为性能优化提供了可能。一种高级策略是“交错刷新”，即在不同时间刷新不同的存储体，以确保总有部分存储体可供处理器访问。这项练习 [@problem_id:1930761] 要求你设计一个交错刷新调度方案，在满足刷新要求的同时，最大化内存的可用性。", "problem": "一个高性能计算系统使用一个专用的动态随机存取存储器 (DRAM) 模块。该模块包含 $N_B$ 个独立的存储体。为保持数据完整性，内存控制器必须定期刷新每个存储体。向一个存储体发出的单个刷新命令会使其在 $t_{RFC}$ 的持续时间内无法用于任何其他操作。\n\n内存控制器采用一种“固定交错”刷新策略。它以 $t_{sep}$ 的固定时间间隔，按顺序向存储体（存储体0, 存储体1, ..., 存储体 $N_B-1$）发出刷新命令。\n\n为确保系统响应能力，设计上施加了一个关键约束：在任何时刻，因正在进行的刷新而同时不可用的存储体数量不得超过 $k_{max}$，其中 $k_{max}$ 是一个满足 $1 \\le k_{max} \\le N_B$ 的整数。\n\n控制器被配置为使用仍能满足此约束的最小可能 $t_{sep}$ 值，以便尽快完成对所有存储体的刷新序列。\n\n假设第一个刷新命令（针对存储体0）在时间 $t=0$ 发出，请确定直到最后一个存储体（存储体 $N_B-1$）完成其刷新周期所经过的总时间。这个总时长代表了在指定策略下刷新所有存储体所需的最短时间。\n\n在您的计算中使用以下值：\n- 存储体总数, $N_B = 16$。\n- 单个存储体刷新周期时间, $t_{RFC} = 350 \\text{ ns}$。\n- 最大并发刷新存储体数, $k_{max} = 4$。\n\n您的答案请以纳秒 (ns) 为单位表示，并四舍五入到三位有效数字。", "solution": "每次刷新会占用一个存储体，持续一个时长为 $t_{RFC}$ 的连续区间。在一个每隔 $t_{sep}$ 发送命令的固定交错调度中，任何时刻重叠的活动刷新数量，等于长度为 $t_{RFC}$ 的区间数量，这些区间的起始时间相隔 $t_{sep}$ 并覆盖了该时刻。对于一个周期性的流，最大重叠数量为\n$$\n\\left\\lceil \\frac{t_{RFC}}{t_{sep}} \\right\\rceil.\n$$\n约束要求该最大值不超过 $k_{max}$，因此\n$$\n\\left\\lceil \\frac{t_{RFC}}{t_{sep}} \\right\\rceil \\le k_{max}.\n$$\n为了最小化总时间，控制器选择满足该约束的最小 $t_{sep}$。将向上取整结果保持在 $k_{max}$ 的最小间隔是\n$$\nt_{sep,\\min} = \\frac{t_{RFC}}{k_{max}}.\n$$\n对于 $N_{B}$ 个存储体，最后一个命令（针对存储体 $N_{B}-1$）在时间 $(N_{B}-1)t_{sep,\\min}$ 发出，并再经过 $t_{RFC}$ 的时间后完成。因此，完成所有刷新所需的总时间为\n$$\nT_{\\text{total}} = (N_{B}-1)\\,t_{sep,\\min} + t_{RFC} = (N_{B}-1)\\frac{t_{RFC}}{k_{max}} + t_{RFC}.\n$$\n代入给定值 $N_{B}=16$，$t_{RFC}=350\\ \\text{ns}$ 和 $k_{max}=4$ 可得\n$$\nt_{sep,\\min} = \\frac{350\\ \\text{ns}}{4} = 87.5\\ \\text{ns},\n$$\n$$\nT_{\\text{total}} = 15 \\times 87.5\\ \\text{ns} + 350\\ \\text{ns} = 1662.5\\ \\text{ns}.\n$$\n四舍五入到三位有效数字，结果为 $1.66 \\times 10^{3}\\ \\text{ns}$，因此以纳秒为单位报告的数值是 $1.66 \\times 10^{3}$。", "answer": "$$\\boxed{1.66 \\times 10^{3}}$$", "id": "1930761"}]}
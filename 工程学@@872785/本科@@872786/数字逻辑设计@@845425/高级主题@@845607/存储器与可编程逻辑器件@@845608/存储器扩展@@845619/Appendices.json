{"hands_on_practices": [{"introduction": "将较小的存储芯片组合成一个更大、更复杂的存储系统，是数字系统设计中的一项核心技能。我们的第一个实践练习将引导你完成一个完整的设计过程，你需要通过计算所需的芯片数量、确定合适的译码器以及划分地址总线，来构建一个满足特定容量和字长要求的新存储器。这项练习将为你后续更复杂的内存设计打下坚实的基础 [@problem_id:1947017]。", "problem": "一位数字系统工程师的任务是为一款定制的微控制器设计一个内存模块。目标内存系统的容量必须为 $128\\text{K}$ 字，每个字为 16 位宽（即 $128\\text{K} \\times 16$ 的组织结构）。该工程师只能使用大量 $32\\text{K} \\times 8$ 的随机存取存储器 (RAM) 芯片。\n\n系统的地址总线表示为 $A_{N-1}, \\dots, A_0$，其中 $N$ 是完整的 $128\\text{K} \\times 16$ 内存系统所需的地址线总数。为了实现这一设计，需要一个地址译码器来为内存阵列生成片选信号。\n\n以下哪个选项正确说明了所需 RAM 芯片的总数、所需译码器的尺寸（形式为 $m \\times n$，其中 $m$ 是输入线数量， $n$ 是输出线数量），以及用于译码器输入和用于单个芯片地址输入的系统地址线的划分？\n\nA. 总芯片数：8；译码器：$2 \\times 4$；译码器输入：$A_{1}, A_{0}$；芯片地址输入：$A_{16}, \\dots, A_{2}$\n\nB. 总芯片数：4；译码器：$2 \\times 4$；译码器输入：$A_{16}, A_{15}$；芯片地址输入：$A_{14}, \\dots, A_{0}$\n\nC. 总芯片数：8；译码器：$2 \\times 4$；译码器输入：$A_{16}, A_{15}$；芯片地址输入：$A_{14}, \\dots, A_{0}$\n\nD. 总芯片数：8；译码器：$3 \\times 8$；译码器输入：$A_{16}, A_{15}, A_{14}$；芯片地址输入：$A_{13}, \\dots, A_{0}$\n\nE. 总芯片数：16；译码器：$4 \\times 16$；译码器输入：$A_{16}, \\dots, A_{13}$；芯片地址输入：$A_{12}, \\dots, A_{0}$", "solution": "我们首先确定目标内存所需的地址线总数。$128\\text{K}$ 字的组织结构意味着可寻址位置的数量为\n$$128 \\times 1024 = 2^{17},$$\n因此地址线的总数是 $N=17$，即系统总线为 $A_{16},\\dots,A_{0}$。\n\n每个可用的 RAM 芯片是 $32\\text{K} \\times 8$ 的，即\n$$32 \\times 1024 = 2^{15} \\text{ locations},$$\n因此每个芯片需要 $15$ 个地址输入。\n\n为了用 8 位宽的芯片实现 16 位的字宽，我们将两个 8 位芯片并联，组成每个寻址块，这样它们的数据输出共同构成一个 16 位的字。因此，为达到所需宽度而需要的芯片数量是\n$$\\frac{16}{8}=2.$$\n\n为了用每个提供 $32\\text{K}$ 字的芯片达到 $128\\text{K}$ 字的所需深度，我们需要\n$$\\frac{128\\text{K}}{32\\text{K}}=4$$\n个深度块（bank）。因此，芯片总数为\n$$\\text{chips} = 2 \\times 4 = 8.$$\n\n在这 4 个 bank 中进行选择需要一个有 4 个输出的译码器，即一个 $2 \\times 4$ 译码器。最高的两条地址线用于选择 bank，所以译码器输入是 $A_{16}$ 和 $A_{15}$。剩下的 $15$ 条地址线连接到每个芯片的地址输入端：\n$$\\text{Chip address inputs}: A_{14},\\dots,A_{0}.$$\n每个译码器输出使能一个 bank，而在一个 bank 内部，两个芯片（构成 16 位宽度）共享同一个片选信号。\n\n与选项比较：\n- 总芯片数 $=8$，译码器 $2 \\times 4$，译码器输入 $A_{16},A_{15}$，以及芯片地址输入 $A_{14},\\dots,A_{0}$ 与选项 C 完全匹配。其他选项要么使用了错误的芯片数量、错误的译码器尺寸，要么将错误的地址线分配给译码器与芯片输入。\n\n因此，正确选项是 C。", "answer": "$$\\boxed{C}$$", "id": "1947017"}, {"introduction": "在确定了存储系统的整体架构后，下一个关键步骤是理解其内存映射。这个练习将帮助你把逻辑设计转化为具体的地址布局，让你能够精确计算出每个存储芯片在连续地址空间中所占据的十六进制范围。掌握这项技能对于软件开发和系统调试至关重要 [@problem_id:1946953]。", "problem": "一位嵌入式系统工程师正在通过组合四个独立的随机存取存储器（RAM）芯片来设计一个存储系统。每个芯片的容量为 $4\\text{K} \\times 8$ 位。在此上下文中，‘K’ 代表乘数 $2^{10}$。因此，每个芯片提供 $4 \\times 2^{10}$ 个可寻址的存储单元，每个单元存储 8 位数据。\n\n这四个芯片被映射到一个单一、连续的地址空间中，以形成一个更大的内存模块。内存起始于十六进制地址 $0000\\text{H}$。芯片按顺序排列，因此芯片 1 的地址空间紧跟着芯片 2，然后是芯片 3，最后是芯片 4。\n\n确定第二个芯片（芯片 2）所占用的地址范围的起始和结束十六进制地址。请将您的答案表示为一对四位十六进制数，分别代表起始地址和结束地址。在您的最终答案中，请勿包含任何基数指示符（如‘H’或‘0x’）。", "solution": "每个 RAM 芯片的容量为 $4\\text{K} \\times 8$ 位，其中 $\\text{K} = 2^{10}$。因此，每个芯片的可寻址单元数量为\n$$\n4 \\times 2^{10} = 2^{2} \\times 2^{10} = 2^{12}.\n$$\n数据宽度（8 位）不改变可寻址单元的数量。\n\n内存从基地址 $0000$（十六进制）开始连续映射，芯片 1 占用的地址范围是从 $0$ 到 $2^{12} - 1$（含）。一般地，对于芯片索引 $i \\in \\{1,2,3,4\\}$，起始地址和结束地址为\n$$\nA_{\\text{start}}(i) = (i-1)\\cdot 2^{12}, \\quad A_{\\text{end}}(i) = i \\cdot 2^{12} - 1.\n$$\n对于芯片 2，有 $i=2$，所以\n$$\nA_{\\text{start}}(2) = 1 \\cdot 2^{12} = 2^{12}, \\quad A_{\\text{end}}(2) = 2 \\cdot 2^{12} - 1 = 2^{13} - 1.\n$$\n由于 $2^{12} = 16^{3}$，其十六进制表示为 $1000$。同样地，$2^{13} = 2 \\cdot 16^{3} = 2000$（十六进制），因此 $2^{13} - 1$ 是 $1\\text{FFF}$（十六进制）。因此，芯片 2 的十六进制地址范围是从 $1000$ 到 $1\\text{FFF}$。", "answer": "$$\\boxed{\\begin{pmatrix}1000  1FFF\\end{pmatrix}}$$", "id": "1946953"}, {"introduction": "理论设计与实际工程之间的一大区别在于诊断和排除故障。最后一个练习将带你从理想设计转向故障分析，探讨一个常见的芯片选择逻辑错误会带来怎样的后果。通过分析这个有缺陷的配置，你将学到“地址混叠”（aliasing）这一关键概念，并学会如何识别地址空间中的未映射区域 [@problem_id:1946957]。", "problem": "一位数字系统工程师的任务是为微处理器扩展内存，该微处理器具有一个16位地址总线（从$A_{15}$到$A_0$）和一个8位数据总线。目标是使用三个可用的$16\\text{K} \\times 8$随机存取存储器（RAM）芯片，创建总共$48\\text{K} \\times 8$的内存容量。该工程师使用一个标准的$2$线-到-$4$线译码器来生成片选信号。该译码器有两个选择输入$S_1$和$S_0$，以及四个低电平有效输出$\\bar{Y}_0, \\bar{Y}_1, \\bar{Y}_2, \\bar{Y}_3$。\n\n连接方式如下：\n- 微处理器的地址线$A_{15}$和$A_{14}$分别连接到译码器的选择输入$S_1$和$S_0$。\n- 微处理器的地址线$A_{13}$到$A_0$并联到所有三个RAM芯片的地址输入端。\n- 8位数据总线并联到所有三个RAM芯片的数据I/O引脚。\n- 由于一个接线错误，译码器的输出$\\bar{Y}_0$连接到了RAM芯片1和RAM芯片3的低电平有效片选（$\\overline{CS}$）引脚。\n- 译码器的输出$\\bar{Y}_1$连接到了RAM芯片2的$\\overline{CS}$引脚。\n- 译码器的输出$\\bar{Y}_2$和$\\bar{Y}_3$未连接。\n\n给定此错误配置，分析整个16位地址空间（从$0000_{16}$到$FFFF_{16}$）的最终内存映射。以下哪个陈述准确地描述了结果？\n\nA. 三个芯片被连续映射且无重叠，芯片1在$0000_{16}-3FFF_{16}$，芯片2在$4000_{16}-7FFF_{16}$，芯片3在$8000_{16}-BFFF_{16}$。\n\nB. 芯片1映射到$0000_{16}-3FFF_{16}$，芯片2映射到$4000_{16}-7FFF_{16}$。芯片3无法访问，地址空间$8000_{16}$到$FFFF_{16}$未被映射。\n\nC. 芯片1和芯片3在地址范围$0000_{16}-3FFF_{16}$上产生地址重叠。芯片2映射到范围$4000_{16}-7FFF_{16}$。地址空间$8000_{16}$到$FFFF_{16}$未被映射。\n\nD. 系统有三个独立的$16\\text{K}$内存块。芯片1在$0000_{16}-3FFF_{16}$，芯片2在$4000_{16}-7FFF_{16}$，芯片3在$C000_{16}-FFFF_{16}$。\n\nE. 所有三个RAM芯片都产生地址重叠，并响应相同的地址范围$0000_{16}-3FFF_{16}$。地址空间$4000_{16}$到$FFFF_{16}$未被映射。", "solution": "一个16位地址总线提供$2^{16}$个不同的字节地址。每个$16\\text{K} \\times 8$的RAM有$2^{14}$个地址，因此选择三个芯片中的一个需要对两个最高有效地址位$A_{15}$和$A_{14}$进行译码，而较低的位$A_{13}$到$A_0$则提供芯片内的$2^{14}$个偏移地址。\n\n一个标准的、具有低电平有效输出的$2$线-到-$4$线译码器遵循以下选择逻辑：对于$(S_{1},S_{0})=(0,0)$，$\\bar{Y}_{0}=0$且$\\bar{Y}_{1}=\\bar{Y}_{2}=\\bar{Y}_{3}=1$；对于$(0,1)$，$\\bar{Y}_{1}=0$而其他输出为$1$；对于$(1,0)$，$\\bar{Y}_{2}=0$而其他输出为$1$；对于$(1,1)$，$\\bar{Y}_{3}=0$而其他输出为$1$。由于$S_{1}=A_{15}$且$S_{0}=A_{14}$，$(A_{15},A_{14})$的四种组合将地址空间划分为四个连续的$2^{14}$字节块，每个块内的地址由$A_{13}\\dots A_{0}$决定。\n\n鉴于以下连接：\n- $\\bar{Y}_{0}$ 连接到芯片1和芯片3的低电平有效片选。\n- $\\bar{Y}_{1}$ 连接到芯片2的低电平有效片选。\n- $\\bar{Y}_{2}$ 和 $\\bar{Y}_{3}$ 未被使用。\n\n分析每种高位地址选择的情况：\n1) 对于$(A_{15},A_{14})=(0,0)$，$\\bar{Y}_{0}=0$且$\\bar{Y}_{1}=\\bar{Y}_{2}=\\bar{Y}_{3}=1$。因此，芯片1和芯片3由于都接收到相同的低电平有效信号$\\bar{Y}_{0}$而被同时选中。每个芯片内被访问的偏移地址由并联提供的相同地址线$A_{13}\\dots A_{0}$决定。因此，两个芯片都响应相同的地址子范围$A_{13}\\dots A_{0}\\in[0,2^{14}-1]$，这对应于地址范围$0000_{16}$到$3FFF_{16}$。这导致芯片1和芯片3在该整个范围内产生地址重叠。\n\n2) 对于$(A_{15},A_{14})=(0,1)$，$\\bar{Y}_{1}=0$且其他输出为$1$。因此只有芯片2被选中。较低的14条地址线同样覆盖了$A_{13}\\dots A_{0}\\in[0,2^{14}-1]$的范围，将此选择映射到$4000_{16}$至$7FFF_{16}$的地址范围。\n\n3) 对于$(A_{15},A_{14})=(1,0)$，$\\bar{Y}_{2}=0$但$\\bar{Y}_{2}$未连接，因此没有RAM芯片被选中。整个$8000_{16}$到$BFFF_{16}$的地址块未被映射。\n\n4) 对于$(A_{15},A_{14})=(1,1)$，$\\bar{Y}_{3}=0$但$\\bar{Y}_{3}$未连接，因此没有RAM芯片被选中。整个$C000_{16}$到$FFFF_{16}$的地址块未被映射。\n\n因此，芯片1和芯片3在$0000_{16}$到$3FFF_{16}$的范围上地址重叠，芯片2被正确映射到$4000_{16}$到$7FFF_{16}$，而$8000_{16}$到$FFFF_{16}$的范围未被映射。这与选项C完全相符。", "answer": "$$\\boxed{C}$$", "id": "1946957"}]}
{"hands_on_practices": [{"introduction": "多级逻辑优化的核心是代数因式分解，但优化的路径并非只有一条。本练习将通过对同一个布尔函数采用两种不同的因式分解策略，来展示分解顺序如何影响最终电路的成本（以文字量计算），从而揭示逻辑优化的启发式本质。通过比较不同策略的结果，你将学会评估不同优化决策的直接影响。[@problem_id:1948290]", "problem": "在数字电路设计中，多级逻辑优化是一种用于降低电路复杂度和成本的技术。一个常见的成本度量标准是文字量。文字是布尔表达式中变量或其补变量的单次出现。表达式的文字量是所有文字的总和。例如，表达式 $F = a'b + c$ 有3个文字（$a'$、$b$ 和 $c$）。\n\n考虑一个以积之和形式给出的四变量布尔函数：\n$$F(w, x, y, z) = wx + wy + wz + xyz$$\n你的任务是探索两种不同的因式分解路径，以创建该函数的两种不同的多级形式，并比较它们的文字量。\n\n路径1：从原始函数 $F$ 开始，通过从所有包含变量 $w$ 的项中提取公因子 $w$，创建一个新表达式 $F_1$。\n\n路径2：再次从原始函数 $F$ 开始，通过从所有包含变量 $x$ 的项中提取公因子 $x$，创建一个新表达式 $F_2$。\n\n确定所得表达式 $F_1$ 的文字量和所得表达式 $F_2$ 的文字量。你的最终答案应该是一对整数，按此特定顺序分别代表 $F_1$ 和 $F_2$ 的文字量。", "solution": "给定的布尔函数为积之和形式：\n$$F(w,x,y,z)=wx+wy+wz+xyz.$$\n文字是表达式中变量或其补变量的任意一次出现。多级表达式的文字量是在整个因式分解形式中文字出现的总次数。\n\n路径1：从所有出现 $w$ 的项中提取公因子 $w$。使用分配律 $ab+ac=a(b+c)$，\n$$wx+wy+wz = w(x+y+z).$$\n因此，\n$$F_{1}=w(x+y+z)+xyz.$$\n$F_{1}$ 的文字量：\n- 在 $w(x+y+z)$ 中，$w$ 出现1次，括号内的 $x,y,z$ 各出现1次，共计 $1+3=4$ 个文字。\n- 在 $xyz$ 中有3个文字。\n$F_{1}$ 的总文字量为：$4+3=7$。\n\n路径2：从所有出现 $x$ 的项中提取公因子 $x$。在原始函数 $F$ 中，$x$ 出现在 $wx$ 和 $xyz$ 中。使用 $ab+ac=a(b+c)$，\n$$wx+xyz = x(w+yz).$$\n因此，\n$$F_{2}=wy+wz+x(w+yz).$$\n$F_{2}$ 的文字量：\n- $wy$ 包含2个文字。\n- $wz$ 包含2个文字。\n- 在 $x(w+yz)$ 中，$x$ 出现1次，括号内 $w$ 包含1个文字，$yz$ 包含2个文字，小计为 $1+1+2=4$ 个文字。\n$F_{2}$ 的总文字量为：$2+2+4=8$。\n\n因此，按顺序，$F_1$ 的文字量为7，$F_2$ 的文字量为8。", "answer": "$$\\boxed{\\begin{pmatrix} 7  8 \\end{pmatrix}}$$", "id": "1948290"}, {"introduction": "理论上的文字量最小化只是第一步，实际的电路设计必须考虑可用硬件资源的限制。这个练习模拟了一个更真实的场景，你需要在受限的门库（仅有2输入和3输入门）下，通过提取公共子表达式来最小化总的门输入数。通过这个练习，你将体会到多级优化在降低实际硬件成本方面的巨大潜力。[@problem_id:1948263]", "problem": "您是一名逻辑设计工程师，任务是为一个特定的现场可编程门阵列（FPGA）架构优化一个数字电路。该电路实现了一个八变量（A, B, C, D, E, G, H, I）的布尔函数 $F$，其初始积之和形式如下：\n\n$$F(A, B, C, D, E, G, H, I) = ABC'D + ABGHI + EGHI + EC'D$$\n\n您的工艺库受到限制，仅提供2输入和3输入的与门，以及2输入和3输入的或门。主输入变量以其真值（例如 A）和反相（例如 A'）两种形式提供；因此，在您的分析中不应包含反相器（非门）的成本。\n\n主要优化目标是最小化电路的总门输入数。总门输入数定义为实现中所使用的每个门的输入数量之和。对于任何需要超过3个输入（例如4输入与门）的逻辑运算，必须将其分解为可用2输入和3输入门的级联。这种分解必须以最小化该特定运算所需门数量的方式进行，这可以通过优先使用3输入门来实现。\n\n考虑以下三种基于代数因式分解的优化策略：\n- **策略 I**：提取公因子表达式 $X = C'D$。\n- **策略 II**：提取公因子表达式 $Y = GHI$。\n- **策略 III**：同时提取公因子表达式 $X = C'D$ 和 $Y = GHI$，然后对结果表达式进行第二级因式分解。\n\n哪种策略能得到最优电路（即最低的总门输入数），该数值是多少？\n\nA. 策略 I，总门输入数为 23。\n\nB. 策略 II，总门输入数为 20。\n\nC. 未优化的两级电路已是最优，总门输入数为 25。\n\nD. 策略 III，总门输入数为 15。\n\nE. 策略 III，总门输入数为 13。", "solution": "给定 $F(A,B,C,D,E,G,H,I)=ABC'D+ABGHI+EGHI+EC'D$，只允许使用2输入和3输入的与/或门，且反相器成本不计。对于任何输入数 $k>3$ 的 $k$ 输入与/或门，我们通过尽可能多地使用3输入门来分解以最小化门数量，从而得出以下最小门输入数：\n- $2$输入与/或门：$2$\n- $3$输入与/或门：$3$\n- $4$输入与/或门：$3+2=5$\n- $5$输入与/或门：$3+2+2=7$\n\n基准（未优化的两级SOP）：\n- $ABC'D$: $4$输入与门 $\\rightarrow 5$\n- $ABGHI$: $5$输入与门 $\\rightarrow 7$\n- $EGHI$: $4$输入与门 $\\rightarrow 5$\n- $EC'D$: $3$输入与门 $\\rightarrow 3$\n- 将四个乘积项求或：$4$输入或门 $\\rightarrow 5$\n总计：$5+7+5+3+5=25$。\n\n策略 I (提取因子 $X=C'D$):\n代数因式分解：\n$$F=X(AB+E)+ABGHI+EGHI.$$\n实现：\n- $X=C'D$: $2$输入与门 $\\rightarrow 2$\n- $AB$: $2$输入与门 $\\rightarrow 2$\n- $(AB)+E$: $2$输入或门 $\\rightarrow 2$\n- $X(AB+E)$: $2$输入与门 $\\rightarrow 2$\n- $ABGHI$: $5$输入与门 $\\rightarrow 7$\n- $EGHI$: $4$输入与门 $\\rightarrow 5$\n- 将三项求或：$3$输入或门 $\\rightarrow 3$\n总计：$2+2+2+2+7+5+3=23$。\n\n策略 II (提取因子 $Y=GHI$):\n代数因式分解：\n$$F=ABY+EY+ABC'D+EC'D=Y(AB+E)+ABC'D+EC'D.$$\n实现：\n- $Y=GHI$: $3$输入与门 $\\rightarrow 3$\n- $AB$: $2$输入与门 $\\rightarrow 2$\n- $(AB)+E$: $2$输入或门 $\\rightarrow 2$\n- $Y(AB+E)$: $2$输入与门 $\\rightarrow 2$\n- $ABC'D$: $4$输入与门 $\\rightarrow 5$\n- $EC'D$: $3$输入与门 $\\rightarrow 3$\n- 将三项求或：$3$输入或门 $\\rightarrow 3$\n总计：$3+2+2+2+5+3+3=20$。\n\n策略 III (同时提取因子 $X=C'D$ 和 $Y=GHI$，然后进行第二级因式分解):\n首先因式分解：\n$$F=X(AB+E)+Y(AB+E)=(AB+E)(X+Y).$$\n实现：\n- $AB$: $2$输入与门 $\\rightarrow 2$\n- $(AB)+E$: $2$输入或门 $\\rightarrow 2$\n- $X=C'D$: $2$输入与门 $\\rightarrow 2$\n- $Y=GHI$: $3$输入与门 $\\rightarrow 3$\n- $X+Y$: $2$输入或门 $\\rightarrow 2$\n- $(AB+E)(X+Y)$: $2$输入与门 $\\rightarrow 2$\n总计：$2+2+2+3+2+2=13$。\n\n比较总数：基准为 $25$，策略 I 为 $23$，策略 II 为 $20$，策略 III 为 $13$。最优的策略是策略 III，总门输入数为 $13$。", "answer": "$$\\boxed{E}$$", "id": "1948263"}, {"introduction": "在数字电路设计中，面积和速度（延迟）之间存在着永恒的权衡。一个为最小化面积而高度优化的电路，其关键路径的延迟可能会变得过长而无法接受。本练习将引导你亲身体验这一挑战：首先通过因式分解来减少面积，然后分析并重构所产生的关键路径，以满足严格的时序要求。[@problem_id:1948269]", "problem": "在数字逻辑综合中，电路面积（与门和输入的数量有关）和电路速度（传播延迟）之间存在一个关键的权衡。多级逻辑优化通常涉及对布尔表达式进行因式分解以减少面积，但这有时会增加关键路径的延迟。\n\n考虑一个由五个变量 $a, b, c, d, x$ 组成的布尔函数 $F$，其初始形式为积之和（SOP）形式，定义如下：\n$F(a, b, c, d, x) = a'b'c + a'b'd + cx$\n\n对于所有计算，请使用以下约定和一个简化的延迟模型：\n- 布尔运算表示为：和 `+` 代表“或”，并置（例如，$xy$）代表“与”，撇号 `'` 代表“非”。\n- 任何具有任意数量输入的初级逻辑门（与门、或门、非门）都具有一个单位的统一传播延迟，$\\tau$。\n- 所有主输入变量及其补码（例如，$a$ 和 $a'$）被认为在时间 $t=0$ 时可用。\n\n您的任务是通过以下两个步骤为高性能重新综合此函数：\n1. 首先，对 $F$ 的初始 SOP 表达式应用代数因式分解，创建一个等效表达式 $F_{\\text{factored}}$，该表达式使文字总数最少。\n2. 步骤1中的因式分解过程创建了一条新的关键路径，增加了整体电路延迟。从您的表达式 $F_{\\text{factored}}$ 开始，重构逻辑网络以创建一个最终表达式 $F_{\\text{optimized}}$，使得从任何主输入到输出 $F$ 的最大信号传播延迟不超过 $2\\tau$。请注意，您的重构应仅修改位于 $F_{\\text{factored}}$ 网络关键延迟路径上的逻辑。\n\n提供 $F_{\\text{optimized}}$ 的最终表达式。", "solution": "我们从给定的SOP开始：\n$$F(a,b,c,d,x)=a'b'c+a'b'd+cx.$$\n\n步骤1（代数因式分解以最小化文字数）：\n对前两项应用分配律 $ABC+ABD=AB(C+D)$：\n$$F=a'b'(c+d)+cx.$$\n文字数比较：\n- 原始SOP：$a'b'c$ 有 $3$ 个文字，$a'b'd$ 有 $3$ 个文字，$cx$ 有 $2$ 个文字，总计 $8$ 个。\n- 因式分解形式：$a'b'(c+d)$ 贡献了 $a',b',c,d$ 共 $4$ 个文字，$cx$ 贡献了 $2$ 个，总计 $6$ 个。\n因此 $F_{\\text{factored}}=a'b'(c+d)+cx$ 最小化了文字总数。\n\n在给定模型下对 $F_{\\text{factored}}$ 进行延迟分析（任何扇入数的与/或/非门延迟为 $\\tau$，所有输入及其补码在 $t=0$ 时可用）：\n- 用一个与门计算 $a'b'$：在 $t=\\tau$ 时准备就绪。\n- 用一个或门计算 $(c+d)$：在 $t=\\tau$ 时准备就绪。\n- 将它们进行“与”运算形成 $a'b'(c+d)$：在 $t=2\\tau$ 时准备就绪。\n- 用一个与门计算 $cx$：在 $t=\\tau$ 时准备就绪。\n- 最后的“或”运算结合 $a'b'(c+d)$ 和 $cx$：在 $a,b,c,d$ 路径上于 $t=3\\tau$ 时准备就绪，在 $x$ 路径上于 $t=2\\tau$ 时准备就绪。\n因此，通过 $a,b,c,d$ 输入经由 $a'b'(c+d)$ 的关键路径延迟为 $3\\tau$。\n\n步骤2（仅重构关键路径上的逻辑以实现最大延迟不超过 $2\\tau$）：\n关键子网络是为最终的“或”门提供输入的因式分解项 $a'b'(c+d)$。为了减小深度，将此项展开回两个乘积项，以便所有乘积项都馈入一个最终的“或”门（一个两级SOP），同时保持非关键分支 $cx$ 不变：\n$$a'b'(c+d)=a'b'c+a'b'd.$$\n因此\n$$F_{\\text{optimized}}=a'b'c+a'b'd+cx.$$\n$F_{\\text{optimized}}$ 的延迟分析：\n- 每个乘积项（$a'b'c$、$a'b'd$、$cx$）都由一个与门根据在 $t=0$ 时可用的主输入计算得出，因此每个乘积项在 $t=\\tau$ 时准备就绪。\n- 一个最终的（三输入）或门在 $t=2\\tau$ 时产生 $F$。\n因此，从任何主输入到 $F$ 的最大传播延迟为 $2\\tau$，符合要求。只有原始关键路径上的逻辑（$a'b'(c+d)$ 和最终的或门）被修改了；$cx$ 分支保持不变。", "answer": "$$\\boxed{a'b'c+a'b'd+cx}$$", "id": "1948269"}]}
{"hands_on_practices": [{"introduction": "在连接不同逻辑家族的器件时，首要步骤是验证它们的电压电平是否兼容。噪声容限 ($N_{M}$) 是衡量数字电路可靠性的关键指标，它表示电路能容忍多少噪声而不出错。本练习将通过一个典型案例 [@problem_id:1943189]，计算一个标准TTL输出直接驱动一个CMOS输入时的高电平噪声容限，揭示为何这种直接连接在实践中是不可靠的。", "problem": "在数字系统设计中，连接不同逻辑家族的组件需要仔细考虑其电压特性，以确保可靠运行。一位设计师正尝试将一个标准晶体管-晶体管逻辑（TTL）门的输出连接到一个高速CMOS（HCMOS）门的输入。两个逻辑家族都使用+5 V的共同电源供电。\n\n根据制造商的数据手册，相关的电压参数如下：\n\n对于标准TTL输出门：\n- 最小高电平输出电压 ($V_{OH,min}$): 2.4 V\n- 最大低电平输出电压 ($V_{OL,max}$): 0.4 V\n\n对于HCMOS输入门：\n- 最小高电平输入电压 ($V_{IH,min}$): 3.5 V\n- 最大低电平输入电压 ($V_{IL,max}$): 1.0 V\n\n计算这个TTL到HCMOS接口的高电平噪声容限 $N_{MH}$。请以伏特为单位表示你的答案。", "solution": "驱动逻辑家族与接收逻辑家族之间的高电平噪声容限，在最坏情况下，定义为驱动器保证的最小高电平输出电压与接收器要求的最小高电平输入电压之间的差值。因此，\n$$\nN_{MH} = V_{OH,\\min}(\\text{driver}) - V_{IH,\\min}(\\text{receiver}).\n$$\n在这里，驱动器是标准TTL门，接收器是HCMOS门。代入给定的值，\n$$\nN_{MH} = 2.4 - 3.5 = -1.1.\n$$\n负值表示TTL的高电平不满足HCMOS的高电平输入要求，这意味着该接口在高电平上没有有效的噪声容限。", "answer": "$$\\boxed{-1.1}$$", "id": "1943189"}, {"introduction": "除了电压兼容性，电流驱动能力是接口设计中另一个必须考虑的关键因素。一个逻辑门的输出能够驱动的同类逻辑门输入数量被称为“扇出”，这个概念同样适用于不同逻辑家族之间的连接。本练习 [@problem_id:1943182] 旨在计算一个CMOS输出能安全驱动多少个TTL输入，你将需要同时考虑高电平（拉电流）和低电平（灌电流）两种情况，并找出真正的限制因素。", "problem": "一名工程专业的学生接到一项任务，需要设计一个数字接口，用于将一个使用高速互补金属氧化物半导体 (HC-CMOS) 逻辑的现代微控制器，连接到一个使用旧式晶体管-晶体管逻辑 (TTL) 架构的旧实验室设备。为确保可靠运行，该学生必须计算单个 HC-CMOS 输出引脚可以驱动的旧式 TTL 输入的最大数量，这个概念被称为扇出。\n\n制造商的数据手册提供了以下电流规格。\n\n对于单个 HC-CMOS 输出引脚：\n- 在高逻辑状态时可提供的最大电流（拉电流）：$I_{OH_{max}} = 4.0 \\, \\text{mA}$\n- 在低逻辑状态时可吸收的最大电流（灌电流）：$I_{OL_{max}} = 6.0 \\, \\text{mA}$\n\n对于单个旧式 TTL 输入引脚：\n- 输入处于高逻辑状态时，从驱动器吸取的电流：$I_{IH} = 50 \\, \\mu\\text{A}$\n- 输入处于低逻辑状态时，向驱动器提供的电流：$I_{IL} = 1.8 \\, \\text{mA}$\n\n假设两种逻辑家族的高逻辑状态和低逻辑状态的电压水平是兼容的。单个 HC-CMOS 输出引脚能够安全可靠地驱动的旧式 TTL 输入的最大整数数量是多少？", "solution": "为确保可靠运行，必须同时满足高电平状态的拉电流要求和低电平状态的灌电流要求。设 $N$ 为一个 HC-CMOS 输出驱动的 TTL 输入数量。扇出由两个约束中更严格的一个决定：\n- 高电平状态（源）约束：HC-CMOS 输出必须提供所有 TTL 输入高电平电流的总和，所以\n$$\nN \\leq \\frac{I_{OH_{\\max}}}{I_{IH}}.\n$$\n- 低电平状态（汇）约束：HC-CMOS 输出必须吸收所有 TTL 输入低电平电流的总和，所以\n$$\nN \\leq \\frac{I_{OL_{\\max}}}{I_{IL}}.\n$$\n因此，允许的最大整数扇出为\n$$\nN_{\\max}=\\left\\lfloor \\min\\!\\left(\\frac{I_{OH_{\\max}}}{I_{IH}},\\,\\frac{I_{OL_{\\max}}}{I_{IL}}\\right) \\right\\rfloor.\n$$\n代入给定的最坏情况下的电流值：\n$$\n\\frac{I_{OH_{\\max}}}{I_{IH}}=\\frac{4.0\\times 10^{-3}}{50\\times 10^{-6}}=80,\n$$\n$$\n\\frac{I_{OL_{\\max}}}{I_{IL}}=\\frac{6.0\\times 10^{-3}}{1.8\\times 10^{-3}}=\\frac{10}{3}\\approx 3.33\\ldots.\n$$\n取最小值，然后向下取整，得到\n$$\nN_{\\max}=\\left\\lfloor \\min\\!\\left(80,\\,\\frac{10}{3}\\right) \\right\\rfloor=\\left\\lfloor \\frac{10}{3} \\right\\rfloor=3.\n$$\n因此，低电平状态的灌电流要求是限制因素，该 HC-CMOS 输出最多可以安全可靠地驱动三个旧式 TTL 输入。", "answer": "$$\\boxed{3}$$", "id": "1943182"}, {"introduction": "理解了电压和电流不兼容的核心问题后，我们现在转向一个更具挑战性的实践设计任务。本练习 [@problem_id:1943207] 将指导你设计一个常见且高效的解决方案，用于连接不同电源电压的设备：基于MOSFET的双向电平转换器。你需要根据给定的多重约束条件选择合适的元件参数，这真实地模拟了工程设计中的决策过程。", "problem": "您的任务是设计一个简单的双向电平转换器，用于连接一个现代3.3V互补金属氧化物半导体（CMOS）微控制器的一个I/O引脚与一个旧式5V晶体管-晶体管逻辑（TTL）器件的一个I/O引脚。提议的电路由一个N沟道增强型金属氧化物半导体场效应晶体管（MOSFET）和两个上拉电阻 $R_1$ 和 $R_2$ 组成。电阻 $R_1$ 将3.3V I/O线连接到3.3V电源（$V_{DD1}$），电阻 $R_2$ 将5V I/O线连接到5V电源（$V_{DD2}$）。MOSFET的源极连接到3.3V I/O线，其漏极连接到5V I/O线，其栅极直接连接到3.3V电源。\n\n该电路必须在以下直流规格下正常工作：\n\n**器件规格：**\n*   **3.3V CMOS微控制器：**\n    *   电源电压, $V_{DD1} = 3.3 \\text{ V}$\n    *   最小输入高电压, $V_{IH,CMOS} = 2.0 \\text{ V}$\n*   **5V TTL器件：**\n    *   电源电压, $V_{DD2} = 5.0 \\text{ V}$\n    *   最大输入低电压, $V_{IL,TTL} = 0.8 \\text{ V}$\n    *   最小输入高电压, $V_{IH,TTL} = 2.0 \\text{ V}$\n    *   最大输出低电压, $V_{OL,TTL} = 0.5 \\text{ V}$，当吸收最大电流 $I_{OL,TTL} = 8.0 \\text{ mA}$ 时。\n*   **N沟道MOSFET：**\n    *   阈值电压, $V_{GS(th)} = 1.5 \\text{ V}$\n    *   导通态漏源电阻, $R_{DS(on)} = 10 \\text{ }\\Omega$ (在 $V_{GS} = 3.3 \\text{ V}$ 时)。\n*   **系统漏电：**\n    *   假设每条I/O线处于高阻输入状态时，最坏情况下的总输入漏电流为 $I_{leak} = 50 \\text{ }\\mu\\text{A}$。\n\n为使该接口可靠工作，您必须为上拉电阻 $R_1$ 和 $R_2$ 选择合适的值。以下哪对 $(R_1, R_2)$ 是满足所有给定约束条件的有效设计选择？\n\nA. $(R_1, R_2) = (4.7 \\text{ k}\\Omega, 10 \\text{ k}\\Omega)$\n\nB. $(R_1, R_2) = (220 \\text{ }\\Omega, 10 \\text{ k}\\Omega)$\n\nC. $(R_1, R_2) = (4.7 \\text{ k}\\Omega, 47 \\text{ }\\Omega)$\n\nD. $(R_1, R_2) = (33 \\text{ k}\\Omega, 10 \\text{ k}\\Omega)$\n\nE. $(R_1, R_2) = (4.7 \\text{ k}\\Omega, 82 \\text{ k}\\Omega)$", "solution": "我们分析栅极连接到较低电源的标准双向NMOS电平转换器。为保证直流正确性，我们需满足以下条件：\n- 每个被上拉的输入端抵抗漏电流所需的高电平裕度。\n- 当3.3V侧驱动为低电平时，5V TTL输入端的低电平，需考虑MOSFET的 $R_{DS(on)}$。\n- 当5V TTL输出驱动为低电平时，其最大灌电流，需考虑两个上拉电阻和MOSFET的 $R_{DS(on)}$。\n\n所有计算均使用欧姆定律和给定的直流规格。\n\n1) 考虑漏电流的高电平约束\n当一条线作为输入（高阻态）时，最坏情况下的对地漏电流 $I_{leak}$ 会在上拉电阻上产生电压降。为满足输入高电平要求，需满足\n$$\nV_{DD} - I_{leak} R \\geq V_{IH} \\quad \\Longrightarrow \\quad R \\leq \\frac{V_{DD} - V_{IH}}{I_{leak}}.\n$$\n- 在3.3V CMOS侧：\n$$\nR_{1} \\leq \\frac{3.3 - 2.0}{50 \\times 10^{-6}} = 2.6 \\times 10^{4} \\text{ }\\Omega = 26 \\text{ k}\\Omega.\n$$\n- 在5V TTL侧：\n$$\nR_{2} \\leq \\frac{5.0 - 2.0}{50 \\times 10^{-6}} = 6.0 \\times 10^{4} \\text{ }\\Omega = 60 \\text{ k}\\Omega.\n$$\n因此，任何 $R_{1} > 26 \\text{ k}\\Omega$ 或 $R_{2} > 60 \\text{ k}\\Omega$ 的选项都不满足要求。这排除了D（因为 $R_{1}=33 \\text{ k}\\Omega$）和E（因为 $R_{2}=82 \\text{ k}\\Omega$）。\n\n2) 当3.3V侧驱动为低电平时，TTL输入为低电平\n假设3.3V输出强驱动到地，MOSFET导通，其 $R_{DS(on)} = 10 \\text{ }\\Omega$。5V侧节点（TTL输入）的电压 $V_{L2}$ 由通过 $R_{2}$ 的电流和MOSFET的导通电阻决定：\n$$\nI = \\frac{5 - V_{L2}}{R_{2}}, \\quad V_{L2} = I \\, R_{DS(on)}.\n$$\n消去 $I$ 得到\n$$\nV_{L2} = \\frac{5 \\, R_{DS(on)}}{R_{2} + R_{DS(on)}}.\n$$\n要求 $V_{L2} \\leq V_{IL,TTL} = 0.8$:\n$$\n\\frac{5 \\, R_{DS(on)}}{R_{2} + R_{DS(on)}} \\leq 0.8\n\\;\\Longrightarrow\\;\nR_{2} \\geq \\frac{5 \\, R_{DS(on)}}{0.8} - R_{DS(on)} = 5.25 \\, R_{DS(on)}.\n$$\n当 $R_{DS(on)} = 10 \\text{ }\\Omega$ 时，可得 $R_{2} \\geq 52.5 \\text{ }\\Omega$。因此，$R_{2} = 47 \\text{ }\\Omega$（选项C）违反了 $V_{IL,TTL}$ 的要求；所有其他候选选项都满足此条件。\n\n3) TTL输出驱动为低电平时吸收两个上拉电阻的电流\n当5V TTL输出驱动为低电平时，如果我们依赖其 $V_{OL,TTL} \\leq 0.5 \\text{ V}$ 的保证，那么它被迫吸收的电流不能超过 $I_{OL,TTL} = 8 \\text{ mA}$。在最坏情况下 $V_{d} = V_{OL,TTL} = 0.5$, 电流为：\n- 来自5V上拉电阻的电流：\n$$\nI_{2} = \\frac{5.0 - 0.5}{R_{2}} = \\frac{4.5}{R_{2}}.\n$$\n- 来自3.3V上拉电阻并流经MOSFET的电流：\n设 $I_{1}$ 为来自 $R_{1}$ 的电流。3.3V侧节点电压为 $V_{s} = V_{d} + I_{1} R_{DS(on)}$，且\n$$\nI_{1} = \\frac{3.3 - V_{s}}{R_{1}} = \\frac{3.3 - \\left(V_{d} + I_{1} R_{DS(on)}\\right)}{R_{1}}\n\\;\\Longrightarrow\\;\nI_{1} = \\frac{3.3 - V_{d}}{R_{1} + R_{DS(on)}} = \\frac{2.8}{R_{1} + 10}.\n$$\n总灌电流为\n$$\nI_{tot} = I_{1} + I_{2} = \\frac{2.8}{R_{1} + 10} + \\frac{4.5}{R_{2}}.\n$$\n施加约束 $I_{tot} \\leq 8 \\times 10^{-3}$。\n\n评估各候选选项：\n- A: $R_{1} = 4.7 \\text{ k}\\Omega$, $R_{2} = 10 \\text{ k}\\Omega$:\n$$\nI_{1} = \\frac{2.8}{4700 + 10} \\approx 5.94 \\times 10^{-4}, \\quad\nI_{2} = \\frac{4.5}{10000} = 4.5 \\times 10^{-4},\n$$\n$$\nI_{tot} \\approx 1.04 \\times 10^{-3} \\leq 8 \\times 10^{-3} \\quad \\text{(通过)}.\n$$\n- B: $R_{1} = 220 \\text{ }\\Omega$, $R_{2} = 10 \\text{ k}\\Omega$:\n$$\nI_{1} = \\frac{2.8}{220 + 10} = \\frac{2.8}{230} \\approx 1.217 \\times 10^{-2} > 8 \\times 10^{-3} \\quad \\text{(不通过)}.\n$$\n- C: $R_{2} = 47 \\text{ }\\Omega$ 在步骤2中已不满足低电平条件，并且\n$$\nI_{2} = \\frac{4.5}{47} \\approx 9.57 \\times 10^{-2} \\quad \\text{(远高于 8} \\times 10^{-3}\\text{)}.\n$$\n- D: $R_{1}$ 违反步骤1中的漏电流约束（即使 $I_{tot}$ 会很小）。\n- E: $R_{2}$ 违反步骤1中的漏电流约束（即使 $I_{tot}$ 会很小）。\n\n综合所有约束条件，只有选项A满足：\n- $R_{1} \\leq 26 \\text{ k}\\Omega$ 且 $R_{2} \\leq 60 \\text{ k}\\Omega$ (漏电流高电平)。\n- $R_{2} \\geq 52.5 \\text{ }\\Omega$ (3.3V侧驱动为低电平时TTL输入为低电平)。\n- $\\frac{2.8}{R_{1} + 10} + \\frac{4.5}{R_{2}} \\leq 8 \\times 10^{-3}$ (TTL输出低电平灌电流限制)。\n\n因此，有效的设计选择是选项A。", "answer": "$$\\boxed{A}$$", "id": "1943207"}]}
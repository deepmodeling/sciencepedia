{"hands_on_practices": [{"introduction": "异步电路综合的第一步通常是从描述系统行为的原始流程表开始。为了得到一个更经济、更高效的实现，我们需要通过合并功能上等效或兼容的状态来减少状态数量。这个练习将引导你完成状态合并过程，这是简化电路复杂性的关键优化步骤，通过识别和组合那些具有相同输出且其后续状态也相互兼容的状态，为后续的状态分配和逻辑实现奠定基础 [@problem_id:1911361]。", "problem": "一个异步时序电路被设计用于控制一个专门的两阶段身份验证令牌。该电路有一个来自电容传感器的单一输入 `x`（`x=0` 表示无触摸，`x=1` 表示触摸），以及一个单一输出 `Z`，用于激活内部过程的不同阶段。电路的行为由以下原始流程表描述，该表是根据系统在基本模式下运行的要求推导出来的（一次只有一个输入发生变化，且电路必须在下一次输入变化前达到稳定状态）。该表列出了每个现态和输入条件下的次态，以及与每个现态相关联的摩尔型输出 `Z`。\n\n**原始流程表：**\n| 现态 | 次态 (输入 `x`) | 输出 |\n|---|---|---|\n| | `x=0` | `x=1` | `Z` |\n| A | (A) | B | 0 |\n| B | C | (B) | 0 |\n| C | A | D | 0 |\n| D | E | (D) | 1 |\n| E | A | F | 0 |\n| F | C | (F) | 1 |\n\n*注：稳定状态用括号表示，例如 (A)。*\n\n为了高效地实现这一逻辑，需要通过合并相容状态来减少状态变量的数量。你的任务是找出给定原始流程表的所有最大相容状态集。最大相容集是指一个不为任何其他相容集的真子集的相容状态集合。\n\n以下哪个选项正确列出了所有的最大相容集？\n\nA. {A, C}, {B, E}\n\nB. {C, E}, {D, F}\n\nC. {A, B}, {D, F}, {E}\n\nD. {A, B, C}, {E, F}\n\nE. 没有状态可以合并。", "solution": "我们使用摩尔型异步原始流程表相容性的标准定义：两个状态相容，如果 (i) 它们的输出相等，并且 (ii) 对于每个输入值，它们对应的次态要么相等，要么本身是相容的。括号内的条目表示稳定状态，并简单地给出了一个等于现态的确定次态。\n\n从表中可知，各状态的输出为：$A:0$，$B:0$，$C:0$，$D:1$，$E:0$，$F:1$。因此，只有输出相等的状态才可能相容。这将候选状态划分为 $\\{A,B,C,E\\}$ 和 $\\{D,F\\}$ 两组。\n\n检查 $\\{D,F\\}$ 中的候选状态对：\n- 状态对 $\\{D,F\\}$：当 $x=0$ 时，$D \\to E$ 且 $F \\to C$，因此要求 $\\{E,C\\}$ 相容。当 $x=1$ 时，$D \\to D$ 且 $F \\to F$，这要求 $\\{D,F\\}$ 自身相容。因此，$\\{D,F\\}$ 相容当且仅当 $\\{C,E\\}$ 相容。\n\n检查 $\\{A,B,C,E\\}$ 中的候选状态对：\n- 状态对 $\\{C,E\\}$：当 $x=0$ 时，$C \\to A$ 且 $E \\to A$（相等，没问题）。当 $x=1$ 时，$C \\to D$ 且 $E \\to F$，这要求 $\\{D,F\\}$ 相容。因此，$\\{C,E\\}$ 相容当且仅当 $\\{D,F\\}$ 相容。\n\n这两个条件构成了一个没有矛盾的一致相互依赖关系，因此 $\\{C,E\\}$ 和 $\\{D,F\\}$ 都可以被声明为相容的。\n\n现在验证 $\\{A,B,C,E\\}$ 中没有其他相容的状态对：\n- 状态对 $\\{A,C\\}$：当 $x=1$ 时，$A \\to B$ 且 $C \\to D$；由于 $B$ 的输出为 $0$，$D$ 的输出为 $1$，所以 $\\{B,D\\}$ 不相容，因此 $\\{A,C\\}$ 不相容。\n- 状态对 $\\{A,B\\}$：当 $x=0$ 时，$A \\to A$ 且 $B \\to C$，要求 $\\{A,C\\}$ 相容，而 $\\{A,C\\}$ 不相容；因此 $\\{A,B\\}$ 不相容。\n- 状态对 $\\{A,E\\}$：当 $x=1$ 时，$A \\to B$ 且 $E \\to F$，要求 $\\{B,F\\}$ 相容，而它们由于输出不匹配而不相容；因此 $\\{A,E\\}$ 不相容。\n- 状态对 $\\{B,C\\}$：当 $x=0$ 时，$B \\to C$ 且 $C \\to A$，要求 $\\{C,A\\}$ 相容，而 $\\{C,A\\}$ 不相容；因此 $\\{B,C\\}$ 不相容。\n- 状态对 $\\{B,E\\}$：当 $x=0$ 时，$B \\to C$ 且 $E \\to A$，要求 $\\{C,A\\}$ 相容，而 $\\{C,A\\}$ 不相容；因此 $\\{B,E\\}$ 不相容。\n\n因此，唯一相容的非平凡状态对是 $\\{C,E\\}$ 和 $\\{D,F\\}$。它们不能被扩大：$\\{C,E\\}$ 不能包含 $A$ 或 $B$（两者都不相容），而 $\\{D,F\\}$ 由于输出冲突，不能包含任何输出为 $0$ 的状态。因此，最大相容集恰好是 $\\{C,E\\}$ 和 $\\{D,F\\}$，这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1911361"}, {"introduction": "在确定了最终的状态集之后，异步电路设计面临的核心挑战是如何为这些状态分配二进制代码，以避免“竞争”现象。当状态转换需要改变多个状态变量时，由于门电路延迟的微小差异，电路可能会进入一个意料之外的中间状态，甚至稳定在一个错误的状态，这被称为“关键竞争”。这个练习旨在通过寻找一个无竞争的状态分配，让你掌握确保电路可靠运行的关键技术，即确保任何直接转换的两个状态之间的编码汉明距离为 1 [@problem_id:1911369]。", "problem": "一个异步时序电路有两个二进制输入 $x_1$ 和 $x_2$，以及三个内部状态 A、B 和 C。其行为由下面的合并流程表描述，其中条目表示下一个状态，括号内的状态是稳定状态。破折号 `-` 表示“无关”条件。\n\n**合并流程表:**\n| 现态 | 输入 ($x_1x_2$) | | | |\n| :---: | :---: | :---: | :---: | :---: |\n| | **00** | **01** | **11** | **10** |\n| **A** | (A) | B | (A) | B |\n| **B** | A | (B) | C | (B) |\n| **C** | - | B | (C) | B |\n\n为了实现该电路，你需要选择一个避免关键竞争的状态分配方案。以下哪个使用三个状态变量的分配方案是无竞争的？\n\nA. A=000, B=001, C=010\n\nB. A=001, B=011, C=111\n\nC. A=100, B=010, C=001\n\nD. A=010, B=111, C=101", "solution": "我们在基本模式下工作：一次只有一个输入改变，且改变只在电路处于稳定状态时发生。一个无竞争的分配要求，任何两个因单个输入变化而发生转换的状态，其二进制编码必须仅相差一位，也就是说，它们的汉明距离等于 $1$。\n\n从合并流程表中，稳定单元格是：\n- 状态 $A$ 在输入 $00$ 和 $11$ 时是稳定的。\n- 状态 $B$ 在输入 $01$ 和 $10$ 时是稳定的。\n- 状态 $C$ 在输入 $11$ 时是稳定的。\n\n通过从一个稳定单元格改变一个输入位，列举出稳定状态之间的所有单输入转换：\n- 从输入 $00$ 时的 $A$：$00 \\to 01$ 产生下一个状态 $B$，所以 $A \\to B$。\n- 从输入 $11$ 时的 $A$：$11 \\to 01$ 产生下一个状态 $B$，所以 $A \\to B$。\n- 从输入 $01$ 时的 $B$：$01 \\to 00$ 产生下一个状态 $A$，所以 $B \\to A$；且 $01 \\to 11$ 产生下一个状态 $C$，所以 $B \\to C$。\n- 从输入 $10$ 时的 $B$：$10 \\to 00$ 产生下一个状态 $A$，所以 $B \\to A$；且 $10 \\to 11$ 产生下一个状态 $C$，所以 $B \\to C$。\n- 从输入 $11$ 时的 $C$：$11 \\to 01$ 产生下一个状态 $B$，所以 $C \\to B$。\n\n因此，所需相邻状态对的集合是 $\\{(A,B),(B,C)\\}$（及其反向转换）。为了避免关键竞争，任何有效的分配都必须满足\n$$\nd_{H}(A,B)=1 \\quad \\text{and} \\quad d_{H}(B,C)=1,\n$$\n其中 $d_{H}$ 表示汉明距离。对于 $d_{H}(A,C)$ 没有要求，因为在单输入变化下，$A$ 和 $C$ 之间没有直接转换。\n\n评估每个提议的三变量分配方案：\n\n- 选项 A: $A=000$, $B=001$, $C=010$。\n  $d_{H}(A,B)=1$; $d_{H}(B,C)=2$。不满足要求，因为 $B \\leftrightarrow C$ 必须相邻。\n\n- 选项 B: $A=001$, $B=011$, $C=111$。\n  $d_{H}(A,B)=1$; $d_{H}(B,C)=1$。满足两个邻接要求。$d_{H}(A,C)=2$ 是可接受的。\n\n- 选项 C: $A=100$, $B=010$, $C=001$。\n  $d_{H}(A,B)=2$。不满足要求，因为 $A \\leftrightarrow B$ 必须相邻。\n\n- 选项 D: $A=010$, $B=111$, $C=101$。\n  $d_{H}(A,B)=2$。不满足要求，因为 $A \\leftrightarrow B$ 必须相邻。\n\n因此，只有选项 B 确保所有指定的转换都是无竞争的。", "answer": "$$\\boxed{B}$$", "id": "1911369"}, {"introduction": "一旦确定了无竞争的状态分配方案，综合过程的最后一步就是将抽象的状态转换关系转化为具体的逻辑门电路。这需要为每个状态变量推导出次态逻辑表达式，这些表达式将决定电路在给定当前状态和输入下的下一个状态。这个练习将带你实践这一过程，使用一种常见的“独热码”状态分配方法来推导次态逻辑函数，从而将设计蓝图最终转化为可实现的硬件描述 [@problem_id:1911359]。", "problem": "一个异步时序电路被设计用作一个简单的内存总线仲裁器。该仲裁器管理两个处理器P1和P2对共享内存资源的访问。该电路有两个输入，$R_{1}$和$R_{2}$，它们分别是来自P1和P2的请求线（$R_i = 1$表示有请求，$R_i = 0$表示无请求）。该电路工作在基本模式下，意味着每次只有一个输入信号可以改变。\n\n该电路有三个不同的内部状态，在下面的合并流程表中进行了描述。状态A是空闲状态，此时没有处理器被授予访问权限。状态B授予P1访问权限，状态C授予P2访问权限。一旦授予权限，该权限将一直保持，直到相应的处理器放弃其请求。稳定状态用括号表示。\n\n| 现态 | 输入（$R_{1}R_{2}$）对应的次态 |\n| :---: | :---: | :---: | :---: | :---: |\n| | **00** | **01** | **10** | **11** |\n| **A** | (A) | C | B | - |\n| **B** | A | - | (B) | (B) |\n| **C** | A | (C) | - | (C) |\n\n为了综合该电路，使用独热码（one-hot）状态分配，包含三个状态变量，$y_{1}, y_{2}, y_{3}$。分配如下：\n- 状态A: ($y_{1}y_{2}y_{3}$) = 100\n- 状态B: ($y_{1}y_{2}y_{3}$) = 010\n- 状态C: ($y_{1}y_{2}y_{3}$) = 001\n\n设$Y_{1}, Y_{2}, Y_{3}$分别为状态变量$y_{1}, y_{2}, y_{3}$的次态函数。确定实现此逻辑所需的$Y_{1}, Y_{2},$和$Y_{3}$的简化积之和（SOP）表达式。在表达式中，使用撇号（'）表示非（NOT）运算（例如，$R_{1}'$）。\n\nA. $Y_{1} = R_{1}'R_{2}' + y_{1}R_{1}R_{2}$; $Y_{2} = y_{1}R_{1}R_{2}' + y_{2}(R_{1} + R_{2})$; $Y_{3} = y_{1}R_{1}'R_{2} + y_{3}(R_{1} + R_{2})$\n\nB. $Y_{1} = R_{1}'R_{2}' + y_{1}R_{1}R_{2}$; $Y_{2} = y_{1}R_{1}'R_{2} + y_{2}(R_{1} + R_{2})$; $Y_{3} = y_{1}R_{1}R_{2}' + y_{3}(R_{1} + R_{2})$\n\nC. $Y_{1} = R_{1}'R_{2}'$; $Y_{2} = y_{1}R_{1}R_{2}'$; $Y_{3} = y_{1}R_{1}'R_{2}$\n\nD. $Y_{1} = y_{1} + R_{1}'R_{2}'$; $Y_{2} = y_{2} + y_{1}R_{1}R_{2}'$; $Y_{3} = y_{3} + y_{1}R_{1}'R_{2}$\n\nE. $Y_{1} = R_{1}'R_{2}' + y_{1}R_{1}R_{2}$; $Y_{2} = y_{1}R_{1}R_{2}' + y_{2}R_{1}'R_{2}'$; $Y_{3} = y_{1}R_{1}'R_{2} + y_{3}R_{1}'R_{2}'$", "solution": "我们使用独热码状态分配：状态A对应$y_{1}=1$（且$y_{2}=y_{3}=0$），状态B对应$y_{2}=1$，状态C对应$y_{3}=1$。对于流程表中指定次态为由$y_{i}=1$编码的状态的那些现态和输入的组合，次态函数$Y_{i}$的值恰好为$1$。合并流程表中的破折号被视为无关项，并可在异步综合中用于无冒险覆盖。\n\n$Y_{1}$（次态A）的推导：\n根据流程表，次态为A的情况有：\n- 行 A，输入 $00$: $(A,00)\\to(A)$\n- 行 B，输入 $00$: $(B,00)\\to A$\n- 行 C，输入 $00$: $(C,00)\\to A$\n因此，\n$$\nY_{1}=y_{1}R_{1}'R_{2}'+y_{2}R_{1}'R_{2}'+y_{3}R_{1}'R_{2}'=R_{1}'R_{2}'(y_{1}+y_{2}+y_{3}).\n$$\n在独热码约束下（在有效操作中$y_{1},y_{2},y_{3}$只有一个为1），这可以简化为\n$$\nY_{1}=R_{1}'R_{2}'.\n$$\n为了利用无关项（条目 $(A,11)$ 是破折号）来提高抗冒险能力，我们可以在输入为 $11$ 时为状态 A 添加冗余的自循环项 $y_{1}R_{1}R_{2}$，这不会改变正确的操作。因此，一个有效的简化SOP是\n$$\nY_{1}=R_{1}'R_{2}'+y_{1}R_{1}R_{2}.\n$$\n\n$Y_{2}$（次态B）的推导：\n根据流程表，次态为B的情况有：\n- 行 A，输入 $10$: $(A,10)\\to B$\n- 行 B，输入 $10$: $(B,10)\\to(B)$\n- 行 B，输入 $11$: $(B,11)\\to(B)$\n因此，\n$$\nY_{2}=y_{1}R_{1}R_{2}'+y_{2}R_{1}R_{2}'+y_{2}R_{1}R_{2}\n= y_{1}R_{1}R_{2}'+y_{2}R_{1}(R_{2}'+R_{2})\n= y_{1}R_{1}R_{2}'+y_{2}R_{1}.\n$$\n为了实现异步无冒险，我们可以利用无关项（例如，$(B,01)$ 是破折号）进行扩展，从而确保在 $10$、$11$ 和 $01$ 之间的单个输入变化期间，$Y_{2}$ 保持为高电平。用更大的蕴含项 $y_{2}(R_{1}+R_{2})$ 替换 $y_{2}R_{1}$ 可以确保 $Y_{2}$ 在这些转换过程中保持为1：\n$$\nY_{2}=y_{1}R_{1}R_{2}'+y_{2}(R_{1}+R_{2}).\n$$\n\n$Y_{3}$（次态C）的推导：\n通过对称性，根据流程表，次态为C的情况有：\n- 行 A，输入 $01$: $(A,01)\\to C$\n- 行 C，输入 $01$: $(C,01)\\to(C)$\n- 行 C，输入 $11$: $(C,11)\\to(C)$\n因此，\n$$\nY_{3}=y_{1}R_{1}'R_{2}+y_{3}R_{1}'R_{2}+y_{3}R_{1}R_{2}\n= y_{1}R_{1}'R_{2}+y_{3}R_{2}.\n$$\n同样，为了实现无冒险操作，我们利用无关项（例如，$(C,10)$ 是破折号）进行扩展，以确保在 $01$、$11$ 和 $10$ 之间的单个输入变化期间，$Y_{3}$ 保持为高电平，从而得到\n$$\nY_{3}=y_{1}R_{1}'R_{2}+y_{3}(R_{1}+R_{2}).\n$$\n\n综合以上结果，与合并流程表和无冒险异步实现一致的简化SOP表达式为：\n$$\nY_{1}=R_{1}'R_{2}'+y_{1}R_{1}R_{2},\\quad\nY_{2}=y_{1}R_{1}R_{2}'+y_{2}(R_{1}+R_{2}),\\quad\nY_{3}=y_{1}R_{1}'R_{2}+y_{3}(R_{1}+R_{2}).\n$$\n这些与选项A匹配。", "answer": "$$\\boxed{A}$$", "id": "1911359"}]}
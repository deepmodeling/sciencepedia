{"hands_on_practices": [{"introduction": "基本型险象的根源在于电路的状态转移路径。我们首先从异步时序电路最核心的设计蓝图——原始流程表——开始。通过分析状态转换，我们可以学会识别出那种因单个输入变化而引发多次内部状态跳转的特征序列，这正是基本型险象的明确信号。[@problem_id:1933665]", "problem": "一个异步时序电路通过一个原始流程表来描述。该电路有两个输入 $x_1$ 和 $x_2$，以及四个内部状态，分别命名为 S1、S2、S3 和 S4。表中的每个状态行都恰好有一个稳定状态，在该状态下，次态与现态相同。其行为由以下次态转换定义：\n\n对于现态 S1，其稳定状态在输入 $x_1x_2=00$ 处：\n- 如果 $x_1x_2=01$，次态为 S2。\n- 如果 $x_1x_2=11$，次态为 S3。\n- 如果 $x_1x_2=10$，次态为 S2。\n\n对于现态 S2，其稳定状态在输入 $x_1x_2=01$ 处：\n- 如果 $x_1x_2=00$，次态为 S1。\n- 如果 $x_1x_2=11$，次态为 S3。\n- 如果 $x_1x_2=10$，次态为 S4。\n\n对于现态 S3，其稳定状态在输入 $x_1x_2=11$ 处：\n- 如果 $x_1x_2=00$，次态为 S1。\n- 如果 $x_1x_2=01$，次态为 S2。\n- 如果 $x_1x_2=10$，次态为 S4。\n\n对于现态 S4，其稳定状态在输入 $x_1x_2=10$ 处：\n- 如果 $x_1x_2=00$，次态为 S1。\n- 如果 $x_1x_2=01$，次态为 S2。\n- 如果 $x_1x_2=11$，次态为 S3。\n\n本质冒险是异步电路中由传输延迟引起的潜在故障，其中单个输入变化可能导致电路进入一个不正确的最终状态。根据所提供的流程表，本质冒险可能由以下哪个事件引起？\n\nA. 从 S1 行的稳定状态开始，输入变量 $x_1$ 发生变化。\n\nB. 从 S1 行的稳定状态开始，输入变量 $x_2$ 发生变化。\n\nC. 从 S2 行的稳定状态开始，输入变量 $x_1$ 发生变化。\n\nD. 从 S3 行的稳定状态开始，输入变量 $x_2$ 发生变化。\n\nE. 从 S4 行的稳定状态开始，输入变量 $x_1$ 发生变化。", "solution": "基本模式异步操作假设一次只有一个输入变量发生变化，并且从任何稳定状态开始，电路将遍历由原始流程表确定的次态序列，直到达到与新输入值相关联的唯一稳定状态。设从输入列到其唯一稳定行的映射为\n$$\nf(00)=\\text{S1},\\quad f(01)=\\text{S2},\\quad f(11)=\\text{S3},\\quad f(10)=\\text{S4}.\n$$\n对于给定的现态行 $R$ 和输入 $u$，用 $N(R,u)$ 表示流程表中的次态条目。对于从行 $R$ 的一个稳定状态开始的单个输入变化 $u$，避免本质冒险的一个必要条件是单步条件\n$$\nN(R,u)=f(u),\n$$\n意味着输入变化后达到的第一个次态已经是该输入的最终稳定行。如果 $N(R,u)\\neq f(u)$，电路必须响应一个输入变化而经历两次或更多的内部状态转换，而来自该输入的不等路径延迟可能会产生本质冒险。\n\n使用给定的流程表：\n\n- 选项 A：从输入为 $00$ 的 S1 行的稳定状态开始，改变 $x_{1}$，使得 $00\\to 10$。最终的稳定行必须是 $f(10)=\\text{S4}$。从表中可知，$N(\\text{S1},10)=\\text{S2}\\neq \\text{S4}$，因此在固定输入 $10$ 下，轨迹为 $\\text{S1}\\to \\text{S2}\\to \\text{S4}$，需要两次内部转换。这违反了单步条件，并且容易受到本质冒险的影响。\n\n- 选项 B：从 $00$ 处的 S1 开始，改变 $x_{2}$，使得 $00\\to 01$。最终的稳定行是 $f(01)=\\text{S2}$，并且 $N(\\text{S1},01)=\\text{S2}=f(01)$，因此这是一个单步转换，没有本质冒险的风险。\n\n- 选项 C：从 $01$ 处的 S2 开始，改变 $x_{1}$，使得 $01\\to 11$。最终的稳定行是 $f(11)=\\text{S3}$，并且 $N(\\text{S2},11)=\\text{S3}=f(11)$，因此是单步转换，无本质冒险。\n\n- 选项 D：从 $11$ 处的 S3 开始，改变 $x_{2}$，使得 $11\\to 10$。最终的稳定行是 $f(10)=\\text{S4}$，并且 $N(\\text{S3},10)=\\text{S4}=f(10)$，因此是单步转换，无本质冒险。\n\n- 选项 E：从 $10$ 处的 S4 开始，改变 $x_{1}$，使得 $10\\to 00$。最终的稳定行是 $f(00)=\\text{S1}$，并且 $N(\\text{S4},00)=\\text{S1}=f(00)$，因此是单步转换，无本质冒险。\n\n因此，只有选项 A 中的事件可能导致本质冒险。", "answer": "$$\\boxed{A}$$", "id": "1933665"}, {"introduction": "识别出险象之后，下一步是理解其物理本质：信号之间的竞争。本练习将我们从抽象的流程表带入到具有实际延迟的门级电路实现中。你需要进行定量分析，计算出不同信号路径的传播时间，从而确定导致电路失效的精确时序条件。[@problem_id:1933656]", "problem": "设计了一个异步时序电路，它有一个主输入 `x` 和一个状态变量 `y`。该电路的次态方程为 `Y = x'y + x`。该电路使用分立逻辑门实现如下：一个反相器门 (INV) 生成 `x'` 信号，一个双输入与门 (G1) 实现 `x'y` 项，一个双输入或门 (G2) 根据 `x'y` 和 `x` 项产生最终输出 `Y`。输出 `Y` 通过反馈路径连接回状态变量输入 `y`。\n\n各组件的传播延迟规定如下：\n- 与门 (G1) 和或门 (G2) 的传播延迟均为 `T_g = 1.2` ns。\n- 反相器门 (INV) 的传播延迟是一个未知值 `T_inv`。\n- 逻辑元件之间任何单根导线互连（例如，从引脚到门，或从门到门）的信号传播延迟为 `T_w = 0.3` ns。\n- 从 G2 的输出 `Y` 返回到 G1 的 `y` 输入处的反馈路径的总传播延迟为 `T_fb = 5.0` ns。\n\n电路初始处于对应于 `x=1` 和 `y=1` 的稳定状态。在时间 `t=0` 时，主输入 `x` 从 `1` 转换到 `0`。已知此转换容易受到本质冒险的影响，这可能导致电路暂时出现毛刺并稳定在不正确的最终状态。为保证正确运行，传播延迟必须满足一个特定的不等式。\n\n计算为确保电路正确运行并避免此本质冒险，反相器允许的最大传播延迟 `T_inv`。以纳秒 (ns) 为单位表示您的答案，并四舍五入到两位有效数字。", "solution": "异步次态函数为 $Y = x'y + x$。初始时 $x=1$ 且 $y=1$，因此 $Y=1$。在 $t=0$ 时，`x` 发生 $1 \\rightarrow 0$ 的转换。\n\n从 `x` 到或门输入 (G2) 有两条路径：\n- 直接路径到 G2：从 `x` 到 G2 的输入导线贡献了 $T_{w}$，然后是或门延迟 $T_{g}$。因此，由 `x` 引起的 `Y` 下降发生在\n$$\nt_{Y,\\text{fall}} = T_{w} + T_{g}.\n$$\n- 反相/乘积路径 $x \\rightarrow \\text{INV} \\rightarrow \\text{G1} \\rightarrow \\text{G2}$：延迟包括从 `x` 到 INV 输入导线的 $T_{w}$，反相器延迟 $T_{\\text{inv}}$，从 INV 到 G1 输入导线的 $T_{w}$，与门延迟 $T_{g}$，从 G1 到 G2 输入导线的 $T_{w}$，以及或门延迟 $T_{g}$。由于 G1 处的 `y` 在任何反馈到达之前都保持为 `1`，因此通过乘积项使 `Y` 上升的时间为\n$$\nt_{Y,\\text{rise}} = T_{w} + T_{\\text{inv}} + T_{w} + T_{g} + T_{w} + T_{g} = 3T_{w} + T_{\\text{inv}} + 2T_{g}.\n$$\n\n`Y` 处由 $x:1 \\rightarrow 0$ 转换产生的临时低电平脉冲宽度为\n$$\nW = t_{Y,\\text{rise}} - t_{Y,\\text{fall}} = \\left(3T_{w} + T_{\\text{inv}} + 2T_{g}\\right) - \\left(T_{w} + T_{g}\\right) = 2T_{w} + T_{\\text{inv}} + T_{g}.\n$$\n\n为避免本质冒险，此低电平脉冲必须不能在 `Y` 恢复高电平之前通过反馈传播并破坏 G1 的 `y` 输入。因此，必要的条件是\n$$\nW  T_{\\text{fb}} \\quad \\Rightarrow \\quad 2T_{w} + T_{\\text{inv}} + T_{g}  T_{\\text{fb}}.\n$$\n求解反相器延迟可得\n$$\nT_{\\text{inv}}  T_{\\text{fb}} - \\left(2T_{w} + T_{g}\\right).\n$$\n\n代入给定值 $T_{g} = 1.2\\ \\text{ns}$，$T_{w} = 0.3\\ \\text{ns}$ 和 $T_{\\text{fb}} = 5.0\\ \\text{ns}$，\n$$\nT_{\\text{inv,max}} = 5.0 - \\left(2 \\cdot 0.3 + 1.2\\right) = 5.0 - 1.8 = 3.2\\ \\text{ns}.\n$$\n四舍五入到两位有效数字，允许的最大反相器延迟为 $3.2$。", "answer": "$$\\boxed{3.2}$$", "id": "1933656"}, {"introduction": "在学会识别和分析基本型险象后，关键的最后一步是掌握如何消除它。这个练习聚焦于最常见的解决方案：通过在关键路径上策略性地插入延迟，确保状态变量的反馈信号能够在这场时序竞赛中“胜出”。这不仅能修正电路，更深化了我们对异步设计中时序控制重要性的理解。[@problem_id:1933669]", "problem": "一个异步时序电路被设计用于控制一个系统，该系统基于两个外部输入 $x_1$ 和 $x_2$。该电路有一个单状态变量 $y$。电路的下一个状态，记为 $Y$，由当前状态 $y$ 和输入根据以下布尔逻辑方程确定：\n\n$$Y = x_1' y + x_1 x_2$$\n\n此处，$x_1'$ 代表 $x_1$ 的逻辑非。电路使用基本逻辑门（与门、或门、非门）实现，输出 $Y$ 被反馈连接到输入 $y$ 以形成状态保持环路。\n\n让我们定义物理实现中的关键信号路径和节点：\n- 项 $x_1'$ 由一个非门生成。\n- 项 $x_1' y$ 由一个双输入与门生成。\n- 项 $x_1 x_2$ 由另一个双输入与门生成。\n- 最终输出 $Y$ 由一个双输入或门生成，该或门将两个与门的输出作为其输入。\n- “反馈路径”是从输出 $Y$ 回到电路状态变量 $y$ 输入端的连接。\n\n系统初始处于稳定状态 $(x_1, x_2, y) = (1, 1, 1)$。此设计中存在一个本质冒险。当输入 $x_1$ 从 1 变为 0 而 $x_2$ 保持为 1 不变时，该冒险会显现。这种特定的竞争条件可能导致电路转换到一个不正确的最终稳定状态。\n\n为了解决这个冒险，必须在电路中的一个关键位置插入一个缓冲器（它会引入延迟）。缓冲器的目的是通过控制相对信号时序来确保发生正确的状态转换。\n\n应将缓冲器放置在以下哪个位置以消除本质冒险？\n\nA. 在外部输入线 $x_1$ 上，在其分叉为非门和项 $x_1 x_2$ 的与门供电之前。\n\nB. 在外部输入线 $x_2$ 上。\n\nC. 在连接电路输出 $Y$ 到状态变量输入 $y$ 的反馈路径上。\n\nD. 在连接非门（用于 $x_1'$）输出到其相应与门输入的导线上。\n\nE. 在连接项 $x_1 x_2$ 的与门输出到最终或门输入的导线上。", "solution": "给定异步网络，其下一个状态为\n$$Y=x_{1}'y+x_{1}x_{2},$$\n从所述工作点 $(x_{1},x_{2},y)=(1,1,1)$ 开始。在 $x_{2}=1$ 保持不变的情况下，布尔函数简化为\n$$Y=x_{1}'y+x_{1}.$$\n因此：\n- 当 $x_{1}=1$ 时，无论 $y$ 为何值，$Y=1$。\n- 当 $x_{1}=0$ 时，$Y=y$。\n\n因此，在预期的转换 $x_{1}:1\\to 0$（其中 $x_{2}=1$ 和 $y=1$）下，正确的最终稳定状态应保持为 $y=1$，因为当 $x_{1}=0$ 时，我们有 $Y=y=1$。\n\n现在分析已实现的门电路网络中的冒险机制。设门延迟为：\n- 生成 $x_{1}'$ 的反相器延迟 $d_{\\text{INV}}$，\n- 项 $x_{1}'y$ 的与门延迟 $d_{\\text{A1}}$，\n- 项 $x_{1}x_{2}$ 的与门延迟 $d_{\\text{A2}}$，\n- 形成 $Y$ 的或门延迟 $d_{\\text{OR}}$。\n\n最初，当 $x_{1}=1$ 和 $x_{2}=1$ 时，项 $x_{1}x_{2}$ 等于 $1$，项 $x_{1}'y$ 等于 $0$，所以 $Y=1$ 由 $x_{1}x_{2}$ 路径维持。当 $x_{1}$ 从 $1\\to 0$ 下降时，两个或门输入按如下方式演变：\n- 项 $x_{1}x_{2}$ 在 $x_{1}$ 变化后，经过 $d_{\\text{A2}}$ 的延迟，从 $1$ 下降到 $0$。\n- 项 $x_{1}'y$ 仅在反相器及其与门响应后，即经过 $d_{\\text{INV}}+d_{\\text{A1}}$ 的延迟后，才从 $0$ 上升到 $1$，前提是在此期间该与门的输入 $y$ 保持为 $1$。\n\n因此，或门输出可以下降的最早时间是\n$$t_{\\downarrow Y}=d_{\\text{A2}}+d_{\\text{OR}},$$\n而由于 $x_{1}'y$ 路径，它可以上升的最早时间是\n$$t_{\\uparrow Y}=d_{\\text{INV}}+d_{\\text{A1}}+d_{\\text{OR}}.$$\n如果 $d_{\\text{A2}}  d_{\\text{INV}}+d_{\\text{A1}}$，则 $t_{\\downarrow Y}  t_{\\uparrow Y}$，这会在 $Y$ 处产生一个暂时的低电平毛刺。如果这个毛刺通过反馈路径传播并过早地将状态变量 $y$ 更新为 0，电路将进入一个错误的稳定状态。这是由输入路径的变化（通过反相器）与状态反馈路径之间的竞争引起的，即本质冒险。\n为了消除这种竞争，必须确保反馈路径的延迟大于输入路径完成逻辑计算所需的时间。最直接的方法是在反馈路径（从 $Y$ 到 $y$）上插入一个缓冲器来增加其延迟。这可以保证在状态变量 $y$ 更新之前，输出 $Y$ 已经稳定到其正确的新值。因此，选项 C 是正确的。", "answer": "$$\\boxed{C}$$", "id": "1933669"}]}
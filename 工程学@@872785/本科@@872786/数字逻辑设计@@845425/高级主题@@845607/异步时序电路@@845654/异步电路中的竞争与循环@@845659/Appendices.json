{"hands_on_practices": [{"introduction": "理解异步电路的第一步是学会识别潜在的故障点。本练习将通过一个流程表，引导你分析状态转换，并识别出由于信号延迟不确定性而可能导致电路进入错误稳定状态的关键竞争。这是分析异步电路稳定性的基本功。[@problem_id:1956353]", "problem": "一个异步时序电路由下方的流表描述。该电路有两个状态变量 $y_1$ 和 $y_2$，以及一个单一输入变量 $x$。表中的条目表示在给定当前状态 ($y_1 y_2$) 和输入 $x$ 下的次态 ($Y_1 Y_2$)。当次态与当前状态相同时 ($Y_1 Y_2 = y_1 y_2$)，出现稳定状态。\n\n考虑这样一种情况，由于关键竞争条件，电路可能会稳定在两个不同的稳定状态之一，$S_A$ (由 $y_1y_2 = 10$ 表示) 或 $S_B$ (由 $y_1y_2 = 11$ 表示)。关键竞争发生在单个输入变化导致两个或多个状态变量改变，并且最终达到的稳定状态取决于内部信号的相对传播延迟。\n\n**流表：**\n\n| 当前状态 ($y_1 y_2$) | $x=0$ 时的次态 ($Y_1 Y_2$) | $x=1$ 时的次态 ($Y_1 Y_2$) |\n|:-------------------------:|:--------------------------------:|:--------------------------------:|\n| 00                        | 00                               | 11                               |\n| 01                        | 01                               | 11                               |\n| 11                        | 10                               | 11                               |\n| 10                        | 00                               | 10                               |\n\n以下哪个转换描述了可能导致这种关键竞争，并最终达到稳定状态 $S_A$ 或 $S_B$ 的特定场景？\n\nA. 电路处于对应于 $y_1y_2 = 00$ 的稳定状态，输入 $x$ 从 0 变为 1。\n\nB. 电路处于对应于 $y_1y_2 = 11$ 的稳定状态，输入 $x$ 从 1 变为 0。\n\nC. 电路处于对应于 $y_1y_2 = 01$ 的稳定状态，输入 $x$ 从 0 变为 1。\n\nD. 电路处于对应于 $y_1y_2 = 10$ 的稳定状态，输入 $x$ 从 1 变为 0。", "solution": "异步时序电路中的关键竞争，是指当单个输入变化引起两个或多个状态变量同时改变，从而因内部延迟不等，可能导致不同的中间状态序列，并可能达到不同的最终稳定状态。\n\n从流表中，确定每个当前状态和输入的稳定性以及变化的位数：\n- 对于 $y_{1}y_{2}=00$：如果 $x=0$，则 $Y_{1}Y_{2}=00$（稳定）；如果 $x=1$，则 $Y_{1}Y_{2}=11$（两位都改变）。\n- 对于 $y_{1}y_{2}=01$：如果 $x=0$，则 $Y_{1}Y_{2}=01$（稳定）；如果 $x=1$，则 $Y_{1}Y_{2}=11$（一位改变）。\n- 对于 $y_{1}y_{2}=11$：如果 $x=1$，则 $Y_{1}Y_{2}=11$（稳定）；如果 $x=0$，则 $Y_{1}Y_{2}=10$（一位改变）。\n- 对于 $y_{1}y_{2}=10$：如果 $x=1$，则 $Y_{1}Y_{2}=10$（稳定）；如果 $x=0$，则 $Y_{1}Y_{2}=00$（一位改变）。\n\n关键竞争只可能在单个输入变化要求两位状态改变的情况下发生。唯一这样的情况是当电路处于 $y_{1}y_{2}=00$ 且 $x$ 从 $0$ 变为 $1$ 时，因为 $Y_{1}Y_{2}$ 变为 $11$。由于延迟不相等，电路可能会经过不同的中间状态：\n- 如果 $y_{2}$ 先改变，序列是 $00 \\to 01$。在状态 $01$ 且 $x=1$ 时，次态是 $11$，然后 $11$ 对于 $x=1$ 是稳定的，得到 $S_{B}$。\n- 如果 $y_{1}$ 先改变，序列是 $00 \\to 10$。在状态 $10$ 且 $x=1$ 时，次态是 $10$，这对于 $x=1$ 已经是稳定的，得到 $S_{A}$。\n\n因此，从 $y_{1}y_{2}=00$ 开始，伴随输入变化 $x:0 \\to 1$，可能会根据相对延迟导致 $S_{A}$ 或 $S_{B}$，这正是所描述的关键竞争。其他选项只涉及一位变化，因此不会产生这种不确定性。", "answer": "$$\\boxed{A}$$", "id": "1956353"}, {"introduction": "关键竞争并非凭空出现，它们往往源于设计决策。本练习展示了如何为同一个逻辑功能选择不同的二进制状态编码，以及这种选择如何直接影响电路的可靠性。通过比较两种状态分配方案，你将亲身体会到，一个糟糕的选择会如何引入关键竞争，而一个好的设计则可以避免它。[@problem_id:1956347]", "problem": "一个异步时序电路正在被设计用于管理一个简单的机器人任务。该电路的行为由一个原始流程表定义。该系统有四个内部状态（A、B、C、D）和两个二进制输入（$x_1, x_2$），这些输入对应于传感器读数。电路的稳定性和转换描述如下：\n\n- **状态 A：**当输入为 $x_1x_2=00$ 时，电路在状态 A 稳定。如果输入变为 01，下一个状态是 B。如果输入变为 11，下一个状态是 C。如果输入变为 10，下一个状态是 D。\n- **状态 B：**当输入为 $x_1x_2=01$ 时，电路在状态 B 稳定。如果输入变为 00，下一个状态是 A。如果输入变为 11，下一个状态是 C。如果输入变为 10，下一个状态是 D。\n- **状态 C：**当输入为 $x_1x_2=11$ 时，电路在状态 C 稳定。如果输入变为 00，下一个状态是 A。如果输入变为 01，下一个状态是 B。如果输入变为 10，下一个状态是 D。\n- **状态 D：**当输入为 $x_1x_2=10$ 时，电路在状态 D 稳定。如果输入变为 00，下一个状态是 A。如果输入变为 01，系统保持在稳定的状态 D。如果输入变为 11，下一个状态是 C。\n\n提出了两种状态分配方案，使用两个状态变量 $y_1$ 和 $y_2$。\n\n**分配方案 I：**\n- A: $y_1y_2 = 00$\n- B: $y_1y_2 = 01$\n- C: $y_1y_2 = 11$\n- D: $y_1y_2 = 10$\n\n**分配方案 II：**\n- A: $y_1y_2 = 00$\n- B: $y_1y_2 = 11$\n- C: $y_1y_2 = 01$\n- D: $y_1y_2 = 10$\n\n其中一种分配方案是有缺陷的，因为它在至少一个可能的转换中引入了临界竞争，从而可能导致错误的行为。你的任务是确定导致这种临界竞争的具体条件。以下哪项描述了导致临界竞争的转换？\n\nA. 分配方案 I，从输入为 00 时的稳定状态 A 开始，当输入变为 11 时。\n\nB. 分配方案 II，从输入为 11 时的稳定状态 C 开始，当输入变为 00 时。\n\nC. 分配方案 II，从输入为 00 时的稳定状态 A 开始，当输入变为 01 时。\n\nD. 分配方案 I，从输入为 01 时的稳定状态 B 开始，当输入变为 10 时。\n\nE. 两种分配方案都没有临界竞争。", "solution": "我们通过检查任何允许的转换是否强制两个状态变量同时改变（两位代码改变）来分析异步状态分配中的临界竞争。如果是这样，电路可能会经过一个中间分配的状态代码，如果在给定输入下，该中间状态可以稳定到一个不同于预定下一状态的稳定状态，就会发生临界竞争。\n\n根据原始流程表，在每种输入下，从每个稳定状态出发的预定下一状态是：\n- 从 A（在 $x_{1}x_{2}=00$ 时稳定）：到 B（对于 01），到 C（对于 11），到 D（对于 10）。\n- 从 B（在 $x_{1}x_{2}=01$ 时稳定）：到 A（对于 00），到 C（对于 11），到 D（对于 10）。\n- 从 C（在 $x_{1}x_{2}=11$ 时稳定）：到 A（对于 00），到 B（对于 01），到 D（对于 10）。\n- 从 D（在 $x_{1}x_{2}=10$ 时稳定）：到 A（对于 00），到 D（对于 01，稳定），到 C（对于 11）。\n\n分配方案 I：$A=00$, $B=01$, $C=11$, $D=10$。\n- 选项 A：从输入 00 时的状态 A 到输入 11，预定转换是 $A\\to C$，代码变化为 $00\\to 11$（两位）。可能的中间代码是 $00\\to 01$（B）或 $00\\to 10$（D）。在输入 11 下，流程表给出 $B\\to C$ 和 $D\\to C$。两条路径都指向 C，所以这里没有临界竞争。\n- 选项 D：从输入 01 时的状态 B 到输入 10，预定转换是 $B\\to D$，代码变化为 $01\\to 10$（两位）。中间代码是 $01\\to 00$（A）或 $01\\to 11$（C）。在输入 10 下，流程表给出 $A\\to D$ 和 $C\\to D$。两条路径都指向 D，所以这里没有临界竞争。\n因此，对于所列情况，分配方案 I 没有临界竞争。\n\n分配方案 II：$A=00$, $B=11$, $C=01$, $D=10$。\n- 选项 B：从输入 11 时的状态 C 到输入 00，预定转换是 $C\\to A$，代码变化为 $01\\to 00$（一位）。这不是竞争。\n- 选项 C：从输入 00 时的状态 A 到输入 01，预定转换是 $A\\to B$，代码变化为 $00\\to 11$（两位）。可能的中间代码是 $00\\to 01$（C）或 $00\\to 10$（D）。在输入 01 下，流程表给出 $C\\to B$，但 $D\\to D$（稳定）。因此，根据哪个状态变量先改变，电路可能前进到预定的 B，也可能被困在 D。这是一个临界竞争。\n因此，导致临界竞争的具体条件是分配方案 II，从输入为 00 时的稳定状态 A 开始，当输入变为 01 时。\n\n因此，正确选项是 C。", "answer": "$$\\boxed{C}$$", "id": "1956347"}, {"introduction": "在识别出关键竞争后，下一步就是解决它。本练习将从分析转向设计，要求你修正一个存在缺陷的电路。你将学习一种标准的竞争消除技术：通过引入一个额外的中间状态，来引导状态转换沿着一条确定的、无竞争的路径进行，从而确保电路的正确行为。[@problem_id:1956335]", "problem": "考虑一个工作在基本模式下的异步时序电路，其状态转换由输入电平的变化触发。该电路有两个状态变量 $y_1$ 和 $y_2$，以及一个单一输入 $x$。其行为由以下流程表定义，该表显示了对于现态 $(y_1 y_2)$ 和输入 $x$ 的每种组合所对应的次态 $(Y_1 Y_2)$。\n\n| 现态 ($y_1 y_2$) | 次态 ($Y_1 Y_2$) |\n|---|---|\n| | **x=0** | **x=1** |\n| 00 | 00 | 00 |\n| 01 | 01 | 10 |\n| 11 | 01 | 11 |\n| 10 | 00 | 10 |\n\n在此流程表中，当次态 $(Y_1 Y_2)$ 与现态 $(y_1 y_2)$ 相同时，该条目代表一个稳定状态。例如，对于现态 `00` 和输入 `x=0`，次态是 `00`，因此电路是稳定的。所有其他条目则代表不稳定状态，会导致进一步的转换。\n\n此设计中存在一个临界竞争条件。具体来说，当电路在输入 $x=0$ 时处于稳定状态 $(y_1, y_2) = (0, 1)$，输入变为 $x=1$ 会引发一个需要两个状态变量同时改变的转换。由于门延迟和线延迟的不可预测性，电路最终可能会进入一个不正确的稳定状态。\n\n您的任务是消除这个临界竞争。为此，您必须修改流程表，以创建一个确定的、无竞争的转换路径，该路径利用编码为 $(y_1, y_2) = (1, 1)$ 的状态作为一个临时的、不稳定的中间状态。\n\n请提供流程表中完成此任务的两个修改后的次态条目。请将您的答案表示为一个行矩阵 `[entry_A, entry_B]`，其中 `entry_A` 是 (现态=`01`，输入=`1`) 的新次态 $(Y_1 Y_2)$，而 `entry_B` 是 (现态=`11`，输入=`1`) 的新次态 $(Y_1 Y_2)$。两个条目都必须表示为两位二进制数。", "solution": "我们分析给定的工作在基本模式下的异步时序电路。该流程表指定了在单个输入 $x$ 下，两个状态变量 $y_{1}$ 和 $y_{2}$ 的次态行为。当次态 $(Y_{1}Y_{2})$ 等于现态 $(y_{1}y_{2})$ 时，出现稳定状态。\n\n从表中可知，对于 $(y_{1}y_{2},x)=(01,1)$ 的条目是 $10$。$01$ 和 $10$ 之间的汉明距离是\n$$\nd_{H}(01,10)=2,\n$$\n这意味着两个状态变量都必须改变，由于任意的相对延迟，这会在异步实现中产生临界竞争。\n\n为了消除临界竞争，同时保持预期的外部映射（即在现态 $01$ 时，输入从 $x=0$ 变为 $x=1$ 最终应导致稳定状态 $10$），我们按照要求强制执行一个单比特步进序列，该序列使用 $(11)$ 作为一个临时的、不稳定的中间状态。因此，我们修改：\n- 将 $(01,1)$ 的次态修改为 $11$，使得\n$$\nd_{H}(01,11)=1,\n$$\n- 并将 $(11,1)$ 的次态修改为 $10$，使得\n$$\nd_{H}(11,10)=1.\n$$\n\n通过这两处修改，在 $x=1$ 下的转换变为 $01 \\rightarrow 11 \\rightarrow 10$，这是无竞争的，因为每一步只改变一个状态变量。在 $(10,1)$ 处的最终稳定状态与原始规范保持不变，而 $(11,1)$ 则按预期成为了一个不稳定的中间状态。\n\n因此，所需的修改条目是：\n- (现态 $=01$，输入 $=1$) 的条目：$11$，\n- (现态 $=11$，输入 $=1$) 的条目：$10$。", "answer": "$$\\boxed{\\begin{pmatrix} 11  10 \\end{pmatrix}}$$", "id": "1956335"}]}
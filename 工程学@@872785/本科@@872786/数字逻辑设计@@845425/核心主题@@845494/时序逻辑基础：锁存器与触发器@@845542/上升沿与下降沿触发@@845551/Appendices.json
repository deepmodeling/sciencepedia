{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。要真正掌握边沿触发的工作原理，最有效的方法之一是分析一个将其输出反馈到输入的触发器。这个练习将向您展示如何用一个D型触发器构建一个简单的二分频电路，这是数字系统中一个非常基本的时序控制模块。[@problem_id:1952876]", "problem": "一个数字电路由一个理想的下降沿触发的 D 型触发器构成。该触发器有一个数据输入端 (D)、一个时钟输入端 (CLK)、一个标准输出端 (Q) 和一个反相输出端 ($\\bar{Q}$)。电路的配置方式为：将反相输出端 $\\bar{Q}$ 直接连接回数据输入端 D。\n\n一个周期性的方波信号被施加到 CLK 输入端。该时钟信号的频率恒为 $f_{CLK} = 150 \\text{ MHz}$。\n\n假设在 $t=0$ 时刻，即第一个时钟信号下降沿到来之前，输出端 Q 处于逻辑低电平状态 (Q=0)。确定在输出端 Q 上观测到的信号频率。\n\n请以兆赫兹 (MHz) 为单位表示您的答案。", "solution": "一个下降沿触发的 D 型触发器在每个时钟的下降沿根据数据输入端 $D$ 在该边沿到来之前的值来更新其输出 $Q$：\n$$Q(t^{+})=D(t^{-}).$$\n根据给定的接线方式 $D=\\bar{Q}$，在每个下降沿，我们有\n$$Q(t^{+})=\\bar{Q}(t^{-}),$$\n因此，该触发器在每个时钟下降沿都会翻转状态。\n\n设下降沿发生在时刻 $t_{n}$，其间隔为时钟周期 $T_{CLK}$，其中\n$$T_{CLK}=\\frac{1}{f_{CLK}}.$$\n定义 $Q_{n}=Q(t_{n}^{-})$。更新规则变为\n$$Q_{n+1}=\\bar{Q}_{n}.$$\n因此，$Q$ 在每个下降沿都会改变状态，即每隔一个 $T_{CLK}$ 间隔改变一次。一个完整的 $Q$ 波形周期需要两次翻转，因此输出周期为\n$$T_{Q}=2T_{CLK}.$$\n所以输出频率为\n$$f_{Q}=\\frac{1}{T_{Q}}=\\frac{1}{2T_{CLK}}=\\frac{f_{CLK}}{2}.$$\n当 $f_{CLK}=150\\ \\text{MHz}$ 时，\n$$f_{Q}=\\frac{150\\ \\text{MHz}}{2}=75\\ \\text{MHz}.$$\n因为要求的单位是兆赫兹，所以数值为 $75$。", "answer": "$$\\boxed{75}$$", "id": "1952876"}, {"introduction": "在数字系统中，数据经常需要在不同的时序模块之间传递。此练习探讨了一个由正边沿和负边沿触发器级联而成的数据采样器，这种结构常用于解决时序问题。通过分析这个电路，您将理解如何在单个时钟周期内利用不同的时钟边沿来安全地捕获和传输数据。[@problem_id:1952889]", "problem": "一个最小的数字数据采样器由两个D型触发器FF1和FF2串联而成。该电路由一个周期性的时钟信号`CLK`驱动，并处理一个单一的数据输入流`D_in`。\n\n具体的连接和属性如下：\n- FF1是一个**上升沿触发**的D型触发器。其数据输入D连接到`D_in`，其输出为`Q1`。\n- FF2是一个**下降沿触发**的D型触发器。其数据输入D连接到第一个触发器的输出`Q1`，其输出为`Q2`。\n\n时钟信号`CLK`的周期为10纳秒（ns）。它初始时为逻辑0。在每个周期中，时钟在5 ns内为逻辑1，在5 ns内为逻辑0。第一次从0到1的转换（上升沿）发生在时间`t = 5` ns。\n\n数据输入`D_in`随时间变化的行为描述如下：\n- `D_in`初始时为逻辑0。\n- 在`t = 4` ns时，`D_in`从逻辑0转换为逻辑1。\n- 在`t = 13` ns时，`D_in`从逻辑1转换为逻辑0。\n- 在`t = 22` ns时，`D_in`从逻辑0转换为逻辑1，并在观测的剩余时间内保持为逻辑1。\n\n初始时，在时间`t = 0`，两个触发器输出`Q1`和`Q2`均为逻辑0。假设触发器是理想的，意味着传播延迟以及建立和保持时间可以忽略不计。\n\n在时间点`t = 10` ns、`t = 20` ns和`t = 30` ns之后立即测量，输出对`(Q1, Q2)`的逻辑状态序列是什么？\n\nA. `(1, 0), (0, 1), (1, 0)`\n\nB. `(1, 1), (0, 0), (1, 1)`\n\nC. `(1, 1), (1, 1), (1, 1)`\n\nD. `(0, 0), (1, 1), (0, 0)`\n\nE. `(1, 0), (1, 0), (1, 0)`", "solution": "使用的原理：\n- 一个上升沿触发的D型触发器在时钟的每个上升沿采样其输入$D$，并在传播延迟可忽略的情况下，在该沿之后立即更新其输出$Q$。\n- 一个下降沿触发的D型触发器在时钟的每个下降沿采样其输入$D$，并在传播延迟可忽略的情况下，在该沿之后立即更新其输出$Q$。\n\n已知：\n- 时钟周期为$10\\,\\text{ns}$，高电平持续$5\\,\\text{ns}$，低电平持续$5\\,\\text{ns}$。由于时钟初始为低电平，对于整数$k\\geq 0$，上升沿发生在$t=5+10k\\,\\text{ns}$，下降沿发生在$t=10+10k\\,\\text{ns}$。\n- $D_{\\text{in}}$的转换：在$t=4\\,\\text{ns}$时$0\\to 1$，在$t=13\\,\\text{ns}$时$1\\to 0$，在$t=22\\,\\text{ns}$时$0\\to 1$并此后保持为$1$。\n- $t=0$时的初始条件：$Q_{1}=0$, $Q_{2}=0$。\n\n逐边沿演化过程：\n1) 在$t=5\\,\\text{ns}$（第一个上升沿）时，FF1采样$D_{\\text{in}}$。由于在$t\\geq 4\\,\\text{ns}$到$t=13\\,\\text{ns}$之间，$D_{\\text{in}}=1$，因此FF1在$t=5\\,\\text{ns}$之后立即更新为$Q_{1}=1$。FF2在上升沿不改变，所以$Q_{2}=0$。因此在$t=5\\,\\text{ns}$之后：$(Q_{1},Q_{2})=(1,0)$。\n\n2) 在$t=10\\,\\text{ns}$（第一个下降沿）时，FF2采样FF1的输出。由于FF1只在上升沿更新，并且其最后一次更新是在$t=5\\,\\text{ns}$时变为$Q_{1}=1$，且在$t=10\\,\\text{ns}$之前没有其他上升沿，所以在$t=10\\,\\text{ns}$时我们有$Q_{1}=1$。因此，FF2在$t=10\\,\\text{ns}$之后立即更新为$Q_{2}=1$。因此，在$t=10\\,\\text{ns}$之后立即得到的输出对是$(Q_{1},Q_{2})=(1,1)$。\n\n3) 在$t=13\\,\\text{ns}$时，$D_{\\text{in}}$下降到$0$。\n\n4) 在$t=15\\,\\text{ns}$（第二个上升沿）时，FF1采样到$D_{\\text{in}}=0$并在$t=15\\,\\text{ns}$之后立即更新为$Q_{1}=0$。此时$Q_{2}$保持为$1$。\n\n5) 在$t=20\\,\\text{ns}$（第二个下降沿）时，FF2采样$Q_{1}$。由于$Q_{1}$在$t=15\\,\\text{ns}$时被设置为$0$，并且在$t=20\\,\\text{ns}$之前没有再次改变，因此FF2在$t=20\\,\\text{ns}$之后立即更新为$Q_{2}=0$。因此，在$t=20\\,\\text{ns}$之后立即得到的输出对是$(Q_{1},Q_{2})=(0,0)$。\n\n6) 在$t=22\\,\\text{ns}$时，$D_{\\text{in}}$上升到$1$并此后保持为$1$。\n\n7) 在$t=25\\,\\text{ns}$（第三个上升沿）时，FF1采样到$D_{\\text{in}}=1$并在$t=25\\,\\text{ns}$之后立即更新为$Q_{1}=1$。此时$Q_{2}$保持为$0$。\n\n8) 在$t=30\\,\\text{ns}$（第三个下降沿）时，FF2采样到$Q_{1}=1$并在$t=30\\,\\text{ns}$之后立即更新为$Q_{2}=1$。因此，在$t=30\\,\\text{ns}$之后立即得到的输出对是$(Q_{1},Q_{2})=(1,1)$。\n\n将$t=10\\,\\text{ns}$、$t=20\\,\\text{ns}$和$t=30\\,\\text{ns}$之后立即采集的样本收集起来，得到$(1,1)$, $(0,0)$, $(1,1)$，这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1952889"}, {"introduction": "这个最终的练习融合了前面学到的所有技能，要求您分析一个更复杂的混合信号电路。该电路不仅包含不同类型（D型和T型）和不同触发方式（正边沿和负边沿）的触发器，还在其中一个触发器的输入端加入了组合逻辑。这要求您在正确的时钟边沿精确地计算逻辑门的输出，从而确定电路的下一个状态。[@problem_id:1952940]", "problem": "一个同步数字电路由两个触发器、一个数据输入线 $X$ 和一个时钟信号 CLK 构建而成。第一个触发器 FF_A 是一个正边沿触发的 D 型触发器，其输出为 $Q_A$。第二个触发器 FF_B 是一个负边沿触发的 T 型触发器，其输出为 $Q_B$。\n\n电路的接线方式如下：FF_A 的输入（记为 $D_A$）直接连接到外部输入 $X$。FF_B 的输入（记为 $T_B$）由一个逻辑与门的输出驱动，该与门的输入是 $X$ 和 $Q_A$。也就是说，$T_B = X \\land Q_A$。\n\n在时间 $t=0$ 时，在任何时钟跳变之前，电路处于初始状态，两个输出均为低电平，即 $Q_A=0$ 和 $Q_B=0$。然后施加一个周期性的方波时钟信号。在最初的五个完整时钟周期内，外部输入 $X$ 的值在每个周期内保持恒定，其序列为 `1, 0, 1, 1, 0`。\n\n计算在第五个负时钟边沿之后，两位状态 $(Q_B, Q_A)$ 的十进制整数等价值，其中 $Q_B$ 是最高有效位。", "solution": "我们根据两个触发器的标准边沿触发更新规则和给定的接线方式来对其行为进行建模。\n\n对于 FF_A（正边沿触发的 D 型触发器），在每个正边沿，输出更新为边沿前瞬间的 D 输入值：\n$$\nQ_{A}^{+} = D_{A} = X.\n$$\n在正边沿之间，$Q_{A}$ 不会改变。\n\n对于 FF_B（负边沿触发的 T 型触发器），在每个负边沿，当且仅当 $T_{B}=1$ 时，输出翻转。等价地，\n$$\nQ_{B}^{+} = Q_{B} \\oplus T_{B}, \\quad \\text{其中} \\quad T_{B} = X \\land Q_{A}.\n$$\n\n输入 $X$ 在每个完整时钟周期内保持恒定，其序列为 $X_{1}=1$, $X_{2}=0$, $X_{3}=1$, $X_{4}=1$, $X_{5}=0$。我们定义一个周期从一个正边沿到下一个正边沿。因此，在周期 $k$ 内，首先有一个正边沿（更新 $Q_{A}$），然后有一个负边沿（可能翻转 $Q_{B}$）。由于 $Q_{A}$ 在正边沿更新为 $Q_{A}=X_{k}$，并且 $X$ 在周期内是恒定的，所以在同一周期随后的负边沿，我们有\n$$\nT_{B} = X_{k} \\land Q_{A} = X_{k} \\land X_{k} = X_{k}.\n$$\n因此，在周期 $k$ 的负边沿，$Q_{B}$ 在 $X_{k}=1$ 时翻转，在 $X_{k}=0$ 时保持不变。\n\n从 $t=0$ 时的初始状态 $(Q_{B},Q_{A})=(0,0)$ 开始，我们逐个周期进行分析：\n\n周期 $1$ ($X_{1}=1$):\n- 正边沿: $Q_{A} \\leftarrow 1$。\n- 负边沿: $T_{B}=1$，所以 $Q_{B}$ 从 $0$ 翻转到 $1$。\n第一个负边沿后的状态: $(Q_{B},Q_{A})=(1,1)$。\n\n周期 $2$ ($X_{2}=0$):\n- 正边沿: $Q_{A} \\leftarrow 0$。\n- 负边沿: $T_{B}=0$，所以 $Q_{B}$ 保持为 $1$。\n第二个负边沿后的状态: $(Q_{B},Q_{A})=(1,0)$。\n\n周期 $3$ ($X_{3}=1$):\n- 正边沿: $Q_{A} \\leftarrow 1$。\n- 负边沿: $T_{B}=1$，所以 $Q_{B}$ 从 $1$ 翻转到 $0$。\n第三个负边沿后的状态: $(Q_{B},Q_{A})=(0,1)$。\n\n周期 $4$ ($X_{4}=1$):\n- 正边沿: $Q_{A} \\leftarrow 1$ (无变化)。\n- 负边沿: $T_{B}=1$，所以 $Q_{B}$ 从 $0$ 翻转到 $1$。\n第四个负边沿后的状态: $(Q_{B},Q_{A})=(1,1)$。\n\n周期 $5$ ($X_{5}=0$):\n- 正边沿: $Q_{A} \\leftarrow 0$。\n- 负边沿: $T_{B}=0$，所以 $Q_{B}$ 保持为 $1$。\n第五个负边沿之后瞬间的状态: $(Q_{B},Q_{A})=(1,0)$。\n\n将 $(Q_{B},Q_{A})$ 解释为一个两位二进制数，其中 $Q_{B}$ 是最高有效位，其十进制整数值为\n$$\n2 \\cdot Q_{B} + Q_{A} = 2 \\cdot 1 + 0 = 2.\n$$", "answer": "$$\\boxed{2}$$", "id": "1952940"}]}
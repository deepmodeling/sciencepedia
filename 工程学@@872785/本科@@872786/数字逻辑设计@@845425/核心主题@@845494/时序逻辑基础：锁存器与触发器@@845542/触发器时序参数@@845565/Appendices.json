{"hands_on_practices": [{"introduction": "在数字系统设计中，一个核心目标是最大化电路的工作速度。本练习将指导你计算一个简单同步电路的绝对速度极限，即最小允许时钟周期。这个计算是性能分析的基础，它由建立时间（setup time）约束决定，是确保电路能在目标频率下可靠工作的第一步。[@problem_id:1937219]", "problem": "一位数字系统工程师正在设计一个定制处理器内的关键数据流水线。该流水线阶段由两个边沿触发寄存器REG1和REG2组成，它们由一个共同的系统时钟驱动。在REG1的输出和REG2的输入之间，有一个组合逻辑块。为了使电路正常工作，从REG1发出的数据信号必须在下一个时钟脉冲到达之前，传播通过该逻辑并在REG2的输入端稳定下来，以满足建立时间的要求。\n\n组件的时序特性如下：\n- 两个寄存器的时钟输入到数据输出的传播延迟为 $t_{cq} = 45.2 \\text{ ps}$。\n- 两个寄存器的数据输入的建立时间要求为 $t_{su} = 35.8 \\text{ ps}$。\n- 通过组合逻辑块中任意路径的最大传播延迟为 $t_{logic} = 211.5 \\text{ ps}$。\n\n在本次分析中可以忽略时钟偏斜和抖动。\n\n计算该电路正常工作所需的最小周期 $T_{min}$。答案以皮秒（ps）为单位表示，并四舍五入到三位有效数字。", "solution": "对于从发送寄存器（REG1）到捕获寄存器（REG2）的单周期路径，建立时间约束要求下一个时钟周期至少是发送寄存器的时钟到输出延迟、最大组合逻辑延迟和捕获寄存器的建立时间之和。在忽略时钟偏斜和抖动的情况下，建立时间约束为\n$$\nT_{\\min} \\geq t_{cq} + t_{\\text{logic}} + t_{su}.\n$$\n代入给定值，\n$$\nT_{\\min} \\geq 45.2 \\text{ ps} + 211.5 \\text{ ps} + 35.8 \\text{ ps}.\n$$\n计算总和，\n$$\nT_{\\min} \\geq 292.5 \\text{ ps}.\n$$\n四舍五入到三位有效数字得出\n$$\nT_{\\min} = 293 \\text{ ps}.\n$$\n由于题目要求最终答案以皮秒为单位，并指定只提供该单位下的数值，因此最终的数值结果是293。", "answer": "$$\\boxed{293}$$", "id": "1937219"}, {"introduction": "在确定了电路的最高工作速度之后，我们还必须保证其运行的可靠性。本练习将焦点从速度（建立时间）转移到数据的稳定性（保持时间）。通过分析一个时序图，你将学习如何直观地识别保持时间违例——这是一种关键的失效模式，即数据在时钟有效沿之后变化得过快。这个练习将为理解保持时间的重要性打下坚实的概念基础。[@problem_id:1937247]", "problem": "一位数字系统工程师正在为一个新的处理器设计验证一条关键数据路径的时序。分析的重点是一个上升沿触发的D型触发器。该触发器的指定建立时间为 $t_{su} = 2.0 \\text{ ns}$，保持时间为 $t_h = 3.0 \\text{ ns}$。系统时钟是一个周期性信号，其上升沿出现在 $t = 10 \\text{ ns}, 30 \\text{ ns}, 50 \\text{ ns}, 70 \\text{ ns}$ 等时刻。一条仿真迹线提供了触发器D输入端的数据信号改变其逻辑电平的确切时刻。最初稳定的数据信号在以下时刻发生跳变：$t = 8 \\text{ ns}$，$t = 31 \\text{ ns}$，$t = 45 \\text{ ns}$ 和 $t = 74 \\text{ ns}$。\n\n如果数据输入在有效时钟沿之后的保持时间窗口内改变状态，就会发生保持时间违规。在下列哪个时钟沿发生了保持时间违规？\n\nA. 在 $t = 10 \\text{ ns}$ 处的上升时钟沿。\nB. 在 $t = 30 \\text{ ns}$ 处的上升时钟沿。\nC. 在 $t = 50 \\text{ ns}$ 处的上升时钟沿。\nD. 在 $t = 70 \\text{ ns}$ 处的上升时钟沿。\nE. 在任何指定的时钟沿都没有发生保持时间违规。", "solution": "保持时间要求规定，在时钟有效沿（此处为上升沿）到达后，数据输入（D）必须保持稳定至少 $t_h = 3.0 \\text{ ns}$。换言之，对于一个在时间 $t_c$ 发生的时钟沿，数据在时间区间 $[t_c, t_c + t_h]$ 内不能改变。如果数据跳变时间 $t_D$ 满足 $t_c  t_D \\le t_c + t_h$，则发生保持时间违例。让我们逐一检查每个时钟沿：\n1. **时钟沿在 $t = 10 \\text{ ns}$**: 保持时间窗口为 $[10 \\text{ ns}, 13 \\text{ ns}]$。数据在 $t = 8 \\text{ ns}$ 和 $t = 31 \\text{ ns}$ 发生跳变。这两个时间点都不在此窗口内。因此，没有发生违例。\n2. **时钟沿在 $t = 30 \\text{ ns}$**: 保持时间窗口为 $[30 \\text{ ns}, 33 \\text{ ns}]$。数据在 $t = 31 \\text{ ns}$ 发生跳变。由于 $30  31 \\le 33$，数据在保持窗口内发生了变化。因此，**发生了保持时间违例**。\n3. **时钟沿在 $t = 50 \\text{ ns}$**: 保持时间窗口为 $[50 \\text{ ns}, 53 \\text{ ns}]$。数据在 $t = 45 \\text{ ns}$ 和 $t = 74 \\text{ ns}$ 发生跳变。这两个时间点都不在此窗口内。因此，没有发生违例。\n4. **时钟沿在 $t = 70 \\text{ ns}$**: 保持时间窗口为 $[70 \\text{ ns}, 73 \\text{ ns}]$。数据在 $t = 74 \\text{ ns}$ 发生跳变。这个时间点不在此窗口内。因此，没有发生违例。\n因此，保持时间违例仅在 $t = 30 \\text{ ns}$ 处的时钟沿发生。", "answer": "$$\\boxed{B}$$", "id": "1937247"}, {"introduction": "在建立了保持时间违例的概念之后，最后的这个练习将引入一个量化可靠性的度量：保持时间裕量（hold slack）。你将不再仅仅判断违例是否发生，而是要精确计算出满足保持时间要求的时序余量。一个正的裕量值表示设计是稳健的，这使得该计算成为专业时序验证流程中的关键一环。[@problem_id:1937246]", "problem": "一个工程团队正在为深空探测器设计一个关键数据记录系统。该系统包含一个源寄存器和一个目标寄存器之间的数据路径，两者由一个组合逻辑块分隔。两个寄存器都由同一个主时钟控制。为使系统正常工作，它必须满足特定的时序约束，包括保持时间要求，尤其是在导致信号传播最快的最坏情况温度条件下。\n\n该路径中组件的时序参数已被表征如下：\n- 源寄存器的最小 clock-to-Q 传播延迟（$t_{cq,min}$）为 150 ps。\n- 目标寄存器的保持时间要求（$t_h$）为 200 ps。\n- 寄存器之间组合逻辑块的最小传播延迟（$t_{comb,min}$）为 500 ps。\n\n保持时间裕量（Hold slack）定义为超出保持时间要求的时间量。它的计算方法是数据到达目标寄存器输入端的最早时间与时钟沿后数据必须保持稳定的时间之间的差值。正值表示设计安全，而负值表示存在保持时间违例。\n\n计算该数据路径的保持时间裕量。答案以皮秒（ps）表示。", "solution": "问题要求计算同步数字电路中的保持时间裕量。保持时间约束确保触发器输入端的数据在有效时钟沿到达后的一段特定时间内（即保持时间 $t_h$）保持稳定。如果前一级的新数据到达过快，在目标触发器有足够时间可靠地锁存当前数据之前就覆盖了它，就会发生保持时间违例。\n\n让我们分析保持条件的时序。我们需要考虑信号从源寄存器输出端传播到目标寄存器输入端的最快可能路径。这条“快路径”决定了*下一个*数据值到达目标寄存器输入端的最早可能时间。\n\n信号从源寄存器的时钟输入端传播到目标寄存器的数据输入端所花费的总时间，是源寄存器的最小 clock-to-Q 延迟与组合逻辑的最小传播延迟之和。这就是最早数据到达时间 $t_{arrival,min}$。\n\n$$t_{arrival,min} = t_{cq,min} + t_{comb,min}$$\n\n保持时间约束要求这个最早到达时间必须大于或等于目标触发器的保持时间要求。旧数据必须在时钟沿之后在目标触发器的输入端保持稳定 $t_h$ 的时长。新数据在 $t_{arrival,min}$ 到达，它不能在这个保持窗口关闭之前到达。因此，满足保持时间的条件是：\n\n$$t_{arrival,min} \\ge t_h$$\n\n保持时间裕量（$Slack_{hold}$）是满足此条件的余量。它是实际最早数据到达时间与所需保持时间之间的差值。\n\n$$Slack_{hold} = t_{arrival,min} - t_h$$\n\n代入 $t_{arrival,min}$ 的表达式，我们得到保持时间裕量的公式：\n\n$$Slack_{hold} = (t_{cq,min} + t_{comb,min}) - t_h$$\n\n现在，我们可以将给定的数值代入此方程：\n- $t_{cq,min} = 150 \\text{ ps}$\n- $t_{comb,min} = 500 \\text{ ps}$\n- $t_h = 200 \\text{ ps}$\n\n$$Slack_{hold} = (150 \\text{ ps} + 500 \\text{ ps}) - 200 \\text{ ps}$$\n$$Slack_{hold} = 650 \\text{ ps} - 200 \\text{ ps}$$\n$$Slack_{hold} = 450 \\text{ ps}$$\n\n计算出的保持时间裕量为 450 ps。由于该值为正，说明设计满足保持时间要求，且有充裕的余量。", "answer": "$$\\boxed{450}$$", "id": "1937246"}]}
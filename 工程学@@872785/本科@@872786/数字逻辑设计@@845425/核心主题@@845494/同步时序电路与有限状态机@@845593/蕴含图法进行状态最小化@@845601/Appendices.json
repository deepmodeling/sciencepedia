{"hands_on_practices": [{"introduction": "为了在数字电路设计中实现效率和成本效益，状态最小化是一个关键的优化步骤。本练习将指导您完成一个典型的Mealy型有限状态机的状态最小化过程，从给定的状态表出发，系统地应用划分法（或等效的蕴含图法），以确定等价状态并找到最小状态数。这是一个掌握状态最小化核心算法的基础实践 [@problem_id:1942648]。", "problem": "一个数字时序电路控制器由下表所示的米利型有限状态机的状态转换表描述。该机器有一个输入 $x$ 和一个输出 $z$。状态标记为 A、B、C、D、E、F 和 G。在制造之前，需要一个优化步骤，通过最小化机器描述中的状态数量来减少逻辑门的数量。\n\n| 现态 (PS) | 当 $x=0$ 时的次态 (NS) | 当 $x=1$ 时的次态 (NS) | 当 $x=0$ 时的输出 ($z$) | 当 $x=1$ 时的输出 ($z$) |\n|:------------------:|:----------------------------:|:----------------------------:|:-----------------------:|:-----------------------:|\n|         A          |               E              |               C              |            0            |            1            |\n|         B          |               C              |               A              |            0            |            1            |\n|         C          |               F              |               B              |            1            |            0            |\n|         D          |               G              |               F              |            0            |            1            |\n|         E          |               B              |               D              |            1            |            1            |\n|         F          |               E              |               G              |            0            |            1            |\n|         G          |               A              |               D              |            1            |            0            |\n\n确定与此表描述的机器等价的最小状态机中的状态数。", "solution": "设该米利机由次态函数 $\\delta$ 和输出函数 $\\lambda$ 描述。如果对于每个输入字符串 $w \\in \\{0,1\\}^{*}$，从状态 $p$ 和 $q$ 开始在 $w$ 下产生的输出序列是相同的，则两个状态 $p$ 和 $q$ 是等价的。用于米利机的标准划分细化算法如下。\n\n首先，通过将对每个输入符号具有相同输出行为的状态进行分组，形成初始划分 $P_{0}$。从表中可知，输出对 $(\\lambda(s,0),\\lambda(s,1))$ 为：\n- $A:(0,1)$, $B:(0,1)$, $D:(0,1)$, $F:(0,1)$,\n- $C:(1,0)$, $G:(1,0)$,\n- $E:(1,1)$.\n因此，\n$$\nP_{0}=\\big\\{\\{A,B,D,F\\},\\{C,G\\},\\{E\\}\\big\\}.\n$$\n\n通过分裂那些在输入 0 和 1 下其状态具有不同目标块对的任何块来细化 $P_{0}$。设 $P_{0}$ 的块表示为 $X=\\{A,B,D,F\\}$，$Y=\\{C,G\\}$ 和 $Z=\\{E\\}$。对于每个状态 $s$，计算其签名\n$$\n\\sigma_{P_{0}}(s)=\\big([\\delta(s,0)]_{P_{0}},[\\delta(s,1)]_{P_{0}}\\big),\n$$\n其中 $[\\cdot]_{P_{0}}$ 表示包含所指示的次态的 $P_{0}$ 的块。\n\n使用给定的转换表：\n- $A$：$\\delta(A,0)=E\\in Z$，$\\delta(A,1)=C\\in Y$，所以 $\\sigma_{P_{0}}(A)=(Z,Y)$。\n- $B$：$\\delta(B,0)=C\\in Y$，$\\delta(B,1)=A\\in X$，所以 $\\sigma_{P_{0}}(B)=(Y,X)$。\n- $D$：$\\delta(D,0)=G\\in Y$，$\\delta(D,1)=F\\in X$，所以 $\\sigma_{P_{0}}(D)=(Y,X)$。\n- $F$：$\\delta(F,0)=E\\in Z$，$\\delta(F,1)=G\\in Y$，所以 $\\sigma_{P_{0}}(F)=(Z,Y)$。\n- $C$：$\\delta(C,0)=F\\in X$，$\\delta(C,1)=B\\in X$，所以 $\\sigma_{P_{0}}(C)=(X,X)$。\n- $G$：$\\delta(G,0)=A\\in X$，$\\delta(G,1)=D\\in X$，所以 $\\sigma_{P_{0}}(G)=(X,X)$。\n- $E$：$\\delta(E,0)=B\\in X$，$\\delta(E,1)=D\\in X$，所以 $\\sigma_{P_{0}}(E)=(X,X)$，但由于输出不同，$E$ 已经是一个单元素块。\n\n因此 $X$ 分裂成两个块 $\\{A,F\\}$ 和 $\\{B,D\\}$，而 $Y$ 和 $Z$ 保持不变。细化后的划分为\n$$\nP_{1}=\\big\\{\\{A,F\\},\\{B,D\\},\\{C,G\\},\\{E\\}\\big\\}.\n$$\n\n再次使用 $P_{1}$ 进行细化。将块表示为 $X_{1}=\\{A,F\\}$，$X_{2}=\\{B,D\\}$，$Y=\\{C,G\\}$，$Z=\\{E\\}$。计算\n$$\n\\sigma_{P_{1}}(s)=\\big([\\delta(s,0)]_{P_{1}},[\\delta(s,1)]_{P_{1}}\\big).\n$$\n从表中：\n- $A$：$(Z,Y)$；$F$：$(Z,Y)$，所以 $A$ 和 $F$ 保持在一起。\n- $B$：$(Y,X_{1})$；$D$：$(Y,X_{1})$，所以 $B$ 和 $D$ 保持在一起。\n- $C$：$(X_{1},X_{2})$；$G$：$(X_{1},X_{2})$，所以 $C$ 和 $G$ 保持在一起。\n- $E$：$(X_{2},X_{2})$，一个单元素块。\n\n没有进一步的分裂发生，所以 $P_{1}$ 是稳定的，并且是最小划分。因此，最小等价米利机的状态数等于 $P_{1}$ 中块的数量，即 4。", "answer": "$$\\boxed{4}$$", "id": "1942648"}, {"introduction": "蕴含图法的精髓在于其迭代过程，即不相容性会像多米诺骨牌一样在图中传播。这个练习旨在揭示这一动态过程，通过分析一个特殊设计的状态机，您将观察到一个初始的不相容对如何经过多轮传递，最终揭示所有不可合并的状态 [@problem_id:1942703]。这有助于您深入理解算法为何需要多次迭代才能达到稳定状态。", "problem": "一位数字系统工程师正在分析一个由下述状态表指定的 Mealy 型有限状态机 (FSM)。该机器有五个状态 $\\{S_0, S_1, S_2, S_3, S_4\\}$，一个二进制输入 $X$，以及一个二进制输出 $Z$。该工程师怀疑此状态表的特定结构是为了对状态最小化算法进行压力测试而设计的。\n\n状态表如下：\n\n| 现态 | 次态, $X=0$ | 次态, $X=1$ | 输出 $Z$, $X=0$ | 输出 $Z$, $X=1$ |\n|:-------------:|:-----------------:|:-----------------:|:-------------------:|:-------------------:|\n|     $S_0$     |       $S_0$       |       $S_1$       |          0          |          0          |\n|     $S_1$     |       $S_0$       |       $S_2$       |          0          |          0          |\n|     $S_2$     |       $S_0$       |       $S_3$       |          0          |          0          |\n|     $S_3$     |       $S_0$       |       $S_4$       |          0          |          0          |\n|     $S_4$     |       $S_0$       |       $S_0$       |          1          |          0          |\n\n您的任务是使用蕴含表法分析此 FSM 以进行状态最小化。如果状态是 0-可区分的（对于相同的输入有不同的输出），或者它们蕴含了一对已知为不等价的状态，则这些状态被认为是不等价的。寻找所有不等价状态对的过程包括一个初始遍，用于识别 0-可区分对，然后是后续遍，通过蕴含表传播不等价性，直到在完整的一遍中无法找到新的不等价对。\n\n确定在识别所有 0-可区分对的初始遍*之后*，蕴含表达到稳定状态所需的传播遍数。", "solution": "我们分析这个 Mealy FSM，它具有状态 $\\{S_{0},S_{1},S_{2},S_{3},S_{4}\\}$，一个输入 $X \\in \\{0,1\\}$，和一个输出 $Z \\in \\{0,1\\}$。其转换和输出行为如下：\n- 当 $X=0$ 时：对于所有 $i$，$\\delta(S_{i},0)=S_{0}$，对于 $S_{0},S_{1},S_{2},S_{3}$，输出 $Z=0$，而对于 $S_{4}$，输出 $Z=1$。\n- 当 $X=1$ 时：$\\delta(S_{0},1)=S_{1}$, $\\delta(S_{1},1)=S_{2}$, $\\delta(S_{2},1)=S_{3}$, $\\delta(S_{3},1)=S_{4}$, $\\delta(S_{4},1)=S_{0}$，且对于所有状态，输出 $Z=0$。\n\n步骤 1 (0-可区分性的初始遍)：\n- 在输入 $X=1$ 时，所有输出均为 $0$，因此在 $X=1$ 上没有状态对是 0-可区分的。\n- 在输入 $X=0$ 时，仅在 $S_{4}$ 状态下输出 $Z=1$，而在 $S_{0},S_{1},S_{2},S_{3}$ 状态下输出 $Z=0$。因此，每个状态对 $(S_{4},S_{i})$（其中 $i \\in \\{0,1,2,3\\}$）都是立即不等价的。没有其他状态对是 0-可区分的。\n\n因此，在初始遍之后，标记为不等价的状态对是 $(S_{4},S_{0})$、$(S_{4},S_{1})$、$(S_{4},S_{2})$、$(S_{4},S_{3})$。\n\n剩余状态对的传播设置：\n在 $\\{S_{0},S_{1},S_{2},S_{3}\\}$ 中剩余的未标记状态对是\n$$(S_{1},S_{0}),\\ (S_{2},S_{0}),\\ (S_{2},S_{1}),\\ (S_{3},S_{0}),\\ (S_{3},S_{1}),\\ (S_{3},S_{2}).$$\n对于这些状态对：\n- 当 $X=0$ 时，次态对总是 $(S_{0},S_{0})$，这不施加任何约束（平凡等价）。\n- 当 $X=1$ 时，我们得到以下蕴含关系：\n$$(S_{1},S_{0}) \\Rightarrow (S_{2},S_{1}),$$\n$$(S_{2},S_{0}) \\Rightarrow (S_{3},S_{1}),$$\n$$(S_{2},S_{1}) \\Rightarrow (S_{3},S_{2}),$$\n$$(S_{3},S_{0}) \\Rightarrow (S_{4},S_{1}),$$\n$$(S_{3},S_{1}) \\Rightarrow (S_{4},S_{2}),$$\n$$(S_{3},S_{2}) \\Rightarrow (S_{4},S_{3}).$$\n在这里，$(S_{4},S_{1})$、$(S_{4},S_{2})$ 和 $(S_{4},S_{3})$ 在初始遍中已经被确定为不等价。\n\n初始遍后的传播遍：\n- 第 1 遍：任何直接蕴含一个已标记对的状态对都变得不等价。因此，$(S_{3},S_{0})$、$(S_{3},S_{1})$ 和 $(S_{3},S_{2})$ 分别由于蕴含了 $(S_{4},S_{1})$、$(S_{4},S_{2})$ 和 $(S_{4},S_{3})$ 而变得不等价。\n- 第 2 遍：使用第 1 遍中新标记的对，$(S_{2},S_{1}) \\Rightarrow (S_{3},S_{2})$ 和 $(S_{2},S_{0}) \\Rightarrow (S_{3},S_{1})$ 现在蕴含了不等价对，因此 $(S_{2},S_{1})$ 和 $(S_{2},S_{0})$ 变得不等价。\n- 第 3 遍：最后，$(S_{1},S_{0}) \\Rightarrow (S_{2},S_{1})$，并且由于 $(S_{2},S_{1})$ 在第 2 遍中被标记为不等价，$(S_{1},S_{0})$ 在第 3 遍中变得不等价。\n\n在第 3 遍之后，所有状态对都被标记为不等价，不会再有进一步的变化。因此，蕴含表在初始 0-可区分性遍之后，经过 3 次传播遍后达到稳定。", "answer": "$$\\boxed{3}$$", "id": "1942703"}, {"introduction": "在实际工程中，许多设计的某些状态转移或输出是无关紧要的，这便引出了非完全指定有限状态机。对于这类状态机，我们使用“相容性”而非“等价性”的概念，而相容性不具备传递性。本练习通过一个具体的例子 [@problem_id:1942681] 展示了这一重要特性，即状态 $S_a$ 与 $S_b$ 相容，$S_b$ 与 $S_c$ 相容，但 $S_a$ 与 $S_c$ 却不相容，这对于正确最小化非完全指定电路至关重要。", "problem": "在分析不完全指定有限状态机 (FSM) 时，状态兼容性的概念对于状态最小化至关重要。两个状态 $S_i$ 和 $S_j$ 被定义为兼容的，如果对于每个可能的输入序列，当从状态 $S_i$ 或 $S_j$ 开始时，只要输出被指定，机器就会产生相同的输出序列。这种关系的一个关键方面是它不一定具有传递性。也就是说，可能存在状态 $S_a$ 与状态 $S_b$ 兼容，且状态 $S_b$ 与状态 $S_c$ 兼容，而状态 $S_a$ 与状态 $S_c$ 不兼容的情况。\n\n考虑下述状态表所定义的不完全指定 Mealy 型有限状态机。该机器有状态 $S_0, S_1, \\dots, S_5$，一个二进制输入 $x$ 和一个二进制输出 $z$。在表中，“PS”是现态，“NS”是次态，“–”表示“无关”输出。\n\n| 现态 (PS) | 输入 $x=0$ 时的次态和输出 ($z$) | 输入 $x=1$ 时的次态和输出 ($z$) |\n|:------------------:|:----------------------------------:|:----------------------------------:|\n|        $S_0$       |               $S_3, 0$               |               $S_4, 0$               |\n|        $S_1$       |               $S_3, –$               |               $S_4, –$               |\n|        $S_2$       |               $S_5, 1$               |               $S_4, 0$               |\n|        $S_3$       |               $S_0, 0$               |               $S_0, 1$               |\n|        $S_4$       |               $S_0, –$               |               $S_0, –$               |\n|        $S_5$       |               $S_0, 0$               |               $S_0, 1$               |\n\n找出一个由不同状态索引组成的有序三元组 $(a, b, c)$，使得状态对 $(S_a, S_b)$ 兼容，状态对 $(S_b, S_c)$ 兼容，但状态对 $(S_a, S_c)$ 不兼容。将你的答案表示为索引的有序三元组 $(a, b, c)$，形式为一个行矩阵。", "solution": "我们使用不完全指定 Mealy 机的标准兼容性归纳定义：两个状态 $S_{i}$ 和 $S_{j}$ 是兼容的，如果对于每个输入符号，它们的输出要么都已指定且相等，要么至少有一个未指定，并且在该输入下达到的相应次态对本身也是兼容的（或相同的），从而确保对所有输入序列的一致性。\n\n首先，建立递归所需的辅助兼容性：\n- 状态对 $(S_{3},S_{5})$：对于 $x=0$，两者都产生输出 $0$ 并转移到 $S_{0}$；对于 $x=1$，两者都产生输出 $1$ 并转移到 $S_{0}$。因此 $(S_{3},S_{5})$ 是兼容的。\n\n现在检查所需的三个状态对，以展示非传递性。\n\n1) 状态对 $(S_{0},S_{1})$：\n- 对于 $x=0$，输出分别为 $0$（来自 $S_{0}$）和未指定（来自 $S_{1}$）；次态均为 $S_{3}$，因此没有冲突，递归条件自然满足。\n- 对于 $x=1$，输出分别为 $0$（来自 $S_{0}$）和未指定（来自 $S_{1}$）；次态均为 $S_{4}$，同样没有冲突，递归条件自然满足。\n因此 $(S_{0},S_{1})$ 是兼容的。\n\n2) 状态对 $(S_{1},S_{2})$：\n- 对于 $x=0$，输出分别为未指定（来自 $S_{1}$）和 $1$（来自 $S_{2}$）；次态为 $S_{3}$ 和 $S_{5}$。我们已经确定 $(S_{3},S_{5})$ 是兼容的，所以这个输入不会引起冲突。\n- 对于 $x=1$，输出分别为未指定（来自 $S_{1}$）和 $0$（来自 $S_{2}$）；次态均为 $S_{4}$，因此没有冲突，递归条件自然满足。\n因此 $(S_{1},S_{2})$ 是兼容的。\n\n3) 状态对 $(S_{0},S_{2})$：\n- 对于 $x=0$，输出分别为 $0$（来自 $S_{0}$）和 $1$（来自 $S_{2}$），两者都已指定但不相等。因此 $(S_{0},S_{2})$ 立即被判定为不兼容。\n\n因此，取 $a=0, b=1, c=2$，我们得到 $(S_{a},S_{b})$ 兼容，$(S_{b},S_{c})$ 兼容，但 $(S_{a},S_{c})$ 不兼容，这证明了非传递性。索引的有序三元组是行矩阵 $(0,1,2)$。", "answer": "$$\\boxed{\\begin{pmatrix}0  1  2\\end{pmatrix}}$$", "id": "1942681"}]}
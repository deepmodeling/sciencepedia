{"hands_on_practices": [{"introduction": "我们从一个基本但至关重要的概念开始：记忆。状态机的核心功能之一就是记住过去的信息。这个练习 [@problem_id:1938276] 要求你设计一个“边沿检测器”，它能在输入信号发生变化时发出信号。这个简单的任务完美地展示了如何用一个状态位来存储关于前一个输入的“记忆”，这是时序逻辑的基石。", "problem": "需要一个数字电路来监控单比特串行数据线，该数据线由输入变量 $X$ 表示。当输入比特 $X$ 的值与前一个时钟周期的值相比发生变化时，该电路必须产生一个高电平输出 $Z=1$，且仅持续一个时钟周期。如果输入比特 $X$ 与前一个周期的值保持相同，则输出 $Z$ 必须为低电平 $Z=0$。这种行为是“边缘检测器”的典型特征。\n\n您的任务是设计一个 Mealy 型有限状态机（FSM）来实现这个逻辑。该 FSM 将使用一个 D 型触发器构建。FSM 的状态由状态变量 $S$ 表示，它是该 D 型触发器的输出。触发器的输入表示为 $D$。\n\n请确定触发器输入 $D$ 和机器输出 $Z$ 作为机器当前状态 $S$ 和输入 $X$ 的函数的最小布尔逻辑表达式。您的答案应从以下选项中选择。\n\n令状态 $S=0$ 对应于前一个输入为 0，状态 $S=1$ 对应于前一个输入为 1。使用符号 $\\oplus$ 表示异或（XOR）运算。\n\nA. $D = X$; $Z = S \\oplus X$\n\nB. $D = S$; $Z = S \\oplus X$\n\nC. $D = X$; $Z = \\overline{(S \\oplus X)}$\n\nD. $D = S \\oplus X$; $Z = X$\n\nE. $D = \\overline{X}$; $Z = S$", "solution": "我们用一个状态为 $S$ 的 D 型触发器来构建 FSM 模型。根据题目定义，$S$ 编码了前一个输入值：如果上一个输入比特是 $0$，则 $S=0$；如果是 $1$，则 $S=1$。因此，在每个时钟周期，下一个状态必须更新为当前输入，以便在下一个周期它仍然代表前一个输入。对于 D 型触发器，有 $S^{+}=D$。因此，下一个状态等于当前输入的要求是\n$$\nS^{+}=X \\quad \\Rightarrow \\quad D=X.\n$$\n输出 $Z$ 必须在当前输入与前一个输入不同时为高电平，否则为低电平。由于 $S$ 是前一个输入，这个条件是\n$$\nZ=1 \\;\\text{当且仅当}\\; X \\neq S.\n$$\n这正是异或关系，所以\n$$\nZ=S \\oplus X.\n$$\n\n为了通过显式的状态-输入情况进行验证，对于每一对 $(S,X)$，我们要求：\n$$\n(S,X)=(0,0)\\;\\Rightarrow\\; Z=0,\\; S^{+}=0; \\quad\n(S,X)=(0,1)\\;\\Rightarrow\\; Z=1,\\; S^{+}=1;\\\\\n(S,X)=(1,0)\\;\\Rightarrow\\; Z=1,\\; S^{+}=0; \\quad\n(S,X)=(1,1)\\;\\Rightarrow\\; Z=0,\\; S^{+}=1.\n$$\n这些映射到\n$$\nZ=\\overline{S}X+S\\overline{X}=S \\oplus X, \\quad S^{+}=X \\Rightarrow D=X.\n$$\n因此，最小布尔表达式为 $D=X$ 和 $Z=S \\oplus X$，这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1938276"}, {"introduction": "在记忆概念的基础上，我们可以设计 FSM 来识别输入流中的特定模式。在这个问题中 [@problem_id:1938249]，你将合成一个 Mealy 型状态机来检测序列 ‘11’。这个练习将演示状态如何代表寻找目标模式的“进度”，这是数字通信和数据处理中的一项基本技术。", "problem": "需要一个简单的数字电路来监控串行数据线上的特定错误模式。该电路有一个单同步串行输入，记为 $X$，和一个单输出 $Z$。\n\n该电路必须设计为Mealy型有限状态机（FSM）。其功能是在检测到输入序列 '11' 时，产生一个持续一个时钟周期的输出 $Z=1$。检测必须考虑重叠序列。对于所有其他输入条件，输出 $Z$ 必须为 $0$。例如，如果输入流 $X$ 是 `0101110`，相应的输出流 $Z$ 应该是 `0000110`。\n\n您的任务是使用单个D型触发器来合成这个FSM。触发器的状态由变量 $Q$ 表示。使用状态分配，其中 $Q=0$ 对应于初始状态（即尚未检测到目标序列的任何部分的状态），而 $Q=1$ 对应于检测到单个 '1' 后的状态。\n\n确定触发器的D输入（记为 $D$）和机器输出 $Z$ 的最简积之和（SOP）布尔表达式。两个表达式都应该用输入 $X$ 和状态变量 $Q$ 来表示。\n\n将您得到的 $D$ 和 $Z$ 的两个最终表达式表示为一个行矩阵。矩阵的第一个元素应该是D输入（$D$）的表达式，第二个元素应该是输出（$Z$）的表达式。", "solution": "我们设计一个Mealy FSM，它有一个状态位 $Q$ 和输入 $X$，用于检测可重叠的模式“11”。状态分配如下：\n- $Q=0$：没有相关历史（前面没有 $1$），\n- $Q=1$：恰好看到一个前导 $1$（上一个输入是 $1$）。\n\n对于Mealy机，输出 $Z$ 取决于当前状态 $Q$ 和当前输入 $X$，次态 $Q^{+}$ 由D输入给出：$D=Q^{+}=f(Q,X)$。\n\n根据检测要求确定状态转换和输出：\n- 从 $Q=0$ 出发：\n  - 如果 $X=0$：保持在 $Q^{+}=0$；未检测到，所以 $Z=0$。\n  - 如果 $X=1$：转移到 $Q^{+}=1$（我们已经看到了一个 $1$）；尚未检测到，所以 $Z=0$。\n- 从 $Q=1$ 出发：\n  - 如果 $X=0$：中断连续的1，因此转到 $Q^{+}=0$；$Z=0$。\n  - 如果 $X=1$：此时检测到“11”；输出 $Z=1$ 恰好一个周期，并且为了处理重叠，我们应保持能够检测下一个“11”，因此保持 $Q^{+}=1$（最后一个输入仍然是 $1$）。\n\n收集次态值可得到 $D=Q^{+}$ 的真值表：\n- $(Q,X)=(0,0)\\Rightarrow D=0$,\n- $(Q,X)=(0,1)\\Rightarrow D=1$,\n- $(Q,X)=(1,0)\\Rightarrow D=0$,\n- $(Q,X)=(1,1)\\Rightarrow D=1$.\n\n因此，当且仅当 $X=1$ 时，$D=1$，这与 $Q$ 无关。以积之和（SOP）形式，最小项为 $\\overline{Q}X$ 和 $QX$，所以\n$$D=\\overline{Q}X+QX=X.$$\n\n对于Mealy输出，$Z=1$ 仅当 $(Q,X)=(1,1)$ 时成立；否则 $Z=0$。因此，最简积之和（SOP）为\n$$Z=QX.$$\n\n这些表达式满足示例 $X=0101110\\mapsto Z=0000110$，因为对于序列`111`，$Z=QX$会在第二个和第三个`1`处产生输出`1`。", "answer": "$$\\boxed{\\begin{pmatrix} X  QX \\end{pmatrix}}$$", "id": "1938249"}, {"introduction": "FSM 的能力远不止简单的模式匹配，它们还可以执行复杂的数据处理任务。这个更高级的练习 [@problem_id:1938304] 向你提出挑战：设计一个电路，检查一个4位二进制数是否能被3整除。你将看到基于移位寄存器的状态如何维持一个输入历史的“滑动窗口”，以及如何巧妙地将数学性质转化为高效的逻辑电路。", "problem": "您的任务是设计一个同步时序电路，具体来说是一个米利（Mealy）型有限状态机（FSM），它每次处理一位串行二进制输入流。当且仅当接收到的最后四位构成一个可以被 3 整除的二进制数时，FSM 的输出 `Z` 应为 `1`。否则，输出 `Z` 应为 `0`。该二进制数由最近接收的位作为最低有效位（LSB）构成。例如，如果当前时刻结束的输入流是 `...1100`，则四位数是 `1100_2 = 12`，它可以被 3 整除，所以输出应为 `1`。\n\n该 FSM 将使用三个 D 触发器来实现。FSM 的状态由这些触发器的输出定义，表示为 `y_2`、`y_1` 和 `y_0`。状态 `(y_2, y_1, y_0)` 被定义为表示在当前输入位 `x` 之前接收的三个输入位。具体来说，`y_2` 是三个周期前接收的位，`y_1` 是两个周期前接收的位，`y_0` 是一个周期前接收的位。\n\n设 `D_2`、`D_1` 和 `D_0` 是分别产生输出 `y_2`、`y_1` 和 `y_0` 的 D 触发器的输入。您的任务是确定 `D_2`、`D_1`、`D_0` 和输出 `Z` 的正确最小化布尔逻辑方程组，它们是当前状态 `(y_2, y_1, y_0)` 和当前输入 `x` 的函数。\n\n以下哪组方程正确描述了综合后的 FSM？在下面的选项中，`\\land` 表示逻辑与，`\\lor` 表示逻辑或，`\\oplus` 表示异或，`\\overline{A}` 表示 `A` 的非。\n\nA.\n$D_2 = y_1$\n$D_1 = y_0$\n$D_0 = x$\n$Z = \\overline{((y_2 \\land y_0) \\oplus (y_1 \\land x))} \\land \\overline{((y_2 \\oplus y_0) \\oplus (y_1 \\oplus x))}$\n\nB.\n$D_2 = y_1$\n$D_1 = y_0$\n$D_0 = x$\n$Z = (\\overline{y_2} \\land y_1 \\land y_0) \\lor (y_2 \\land y_1 \\land \\overline{y_0})$\n\nC.\n$D_2 = y_1$\n$D_1 = y_0$\n$D_0 = x$\n$Z = \\overline{(y_2 \\oplus y_1 \\oplus y_0 \\oplus x)}$\n\nD.\n$D_2 = y_1$\n$D_1 = y_0$\n$D_0 = x$\n$Z = \\overline{(y_2 \\oplus y_0)} \\land \\overline{(y_1 \\oplus x)}$", "solution": "该问题要求设计一个米利型 FSM，用于检测最后四个输入位是否构成一个能被 3 整除的数。该电路有一个单输入 `x` 和一个单输出 `Z`。它使用三个 D 触发器，其输出 `y_2, y_1, y_0` 用于存储状态。\n\n首先，我们确定状态转换逻辑。在任何时刻 `t`，状态 `(y_2, y_1, y_0)` 由输入序列 `x_{t-3}, x_{t-2}, x_{t-1}` 定义。当前输入是 `x_t`。在下一个时钟沿之后，在时刻 `t+1`，状态需要表示输入 `x_{t-2}, x_{t-1}, x_t`。\n新的状态 `(Y_2, Y_1, Y_0)` 将是：\n$Y_2 = x_{t-2}$，也就是当前的 `y_1`。\n$Y_1 = x_{t-1}$，也就是当前的 `y_0`。\n$Y_0 = x_t$，也就是当前的输入 `x`。\n\nD 触发器的输入（`D_2, D_1, D_0`）决定了下一个状态。对于 D 触发器，下一个状态等于 D 输入。因此，D 输入的表达式为：\n$D_2 = Y_2 = y_1$\n$D_1 = Y_1 = y_0$\n$D_0 = Y_0 = x$\n这描述了一个 3 位移位寄存器，新的输入 `x` 被移入。选择题中的所有四个選項都正确地指出了这个状态转换逻辑。区别在于 `Z` 的输出逻辑。\n\n接下来，我们推导输出 `Z` 的逻辑。该 FSM 是一个米利机，所以输出 `Z` 是当前状态 `(y_2, y_1, y_0)` 和当前输入 `x` 的函数。所考虑的四位是前三位（状态）和当前位。按照从旧到新的时间顺序，序列是 `y_2, y_1, y_0, x`。问题陈述 `x` 是最低有效位（LSB）。因此，4位二进制数 `N` 表示为 $N = (y_2y_1y_0x)_2$。\n这对应于十进制值 $N = 8y_2 + 4y_1 + 2y_0 + x$。\n\n数论中一个众所周知的性质指出，一个二进制数能被 3 整除，当且仅当其各位的交替和能被 3 整除。对于一个 4 位数 $b_3 b_2 b_1 b_0$，这个条件是 $(b_0 - b_1 + b_2 - b_3)$ 能被 3 整除。\n在我们的例子中，这些位是 $b_3=y_2$, $b_2=y_1$, $b_1=y_0$ 和 $b_0=x$。\n所以，能被 3 整除的条件是和 $S = (x - y_0 + y_1 - y_2)$ 能被 3 整除。这可以重写为 $S = (x + y_1) - (y_0 + y_2)$。\n由于每个变量都是一个单独的位（0或1），项 $(x + y_1)$ 的值可以是 0、1 或 2。同样，$(y_0 + y_2)$ 的值也可以是 0、1 或 2。\n因此，差 `S` 的范围可以从 $(0 - 2) = -2$ 到 $(2 - 0) = 2$。在 [-2, 2] 范围内唯一能被 3 整除的整数是 0。\n因此，输出 `Z` 为 1 的条件简化为 $S=0$，这意味着：\n$$(x + y_1) - (y_0 + y_2) = 0 \\implies x + y_1 = y_0 + y_2$$\n\n我们需要将这个算術等式表示为布尔逻辑方程。设 $A = y_0 + y_2$ 且 $B = x + y_1$。我们需要 $A=B$。我们可以将其视为比较两个 2 位数，其中和以二进制表示。\n让我们用两位来表示和 `A`，一个和位 `A_0` 和一个进位 `A_1`。\n$A_1 = y_0 \\land y_2$ （仅当两者都为 1 时，进位为 1）\n$A_0 = y_0 \\oplus y_2$ （和位）\n类似地，对于 `B`：\n$B_1 = x \\land y_1$\n$B_0 = x \\oplus y_1$\n\n为了使两个和相等（$A=B$），它们的二进制表示必须相同。这意味着进位和和位都必须匹配：\n$A_1 = B_1$ 并且 $A_0 = B_0$。\n等式条件 $A_1 = B_1$ 可以使用 XNOR 逻辑写为 $\\overline{(A_1 \\oplus B_1)}$。\n等式条件 $A_0 = B_0$ 可以写为 $\\overline{(A_0 \\oplus B_0)}$。\n所以，`Z` 的最终表达式是：\n$Z = \\overline{(A_1 \\oplus B_1)} \\land \\overline{(A_0 \\oplus B_0)}$\n\n代入 $A_1, B_1, A_0, B_0$ 的表达式：\n$Z = \\overline{((y_0 \\land y_2) \\oplus (x \\land y_1))} \\land \\overline{((y_0 \\oplus y_2) \\oplus (x \\oplus y_1))}$\n由于 AND 和 XOR 满足交换律，这等价于：\n$Z = \\overline{((y_2 \\land y_0) \\oplus (y_1 \\land x))} \\land \\overline{((y_2 \\oplus y_0) \\oplus (y_1 \\oplus x))}$\n\n这个表达式与选项 A 中提供的 `Z` 的表达式相匹配。\n\n让我们简要分析一下其他选项：\n- 选项 B 给出了一个类似摩尔（Moore）型的输出，它只依赖于状态，这对于米利机是不正确的，因为米利机的输出必须依赖于当前输入 `x` 来评估第4位。\n- 选项 C 检查四位的偶校验 $(\\overline{y_2 \\oplus y_1 \\oplus y_0 \\oplus x})$。虽然所有能被 3 整除的 4 位数都具有偶校验性，但并非所有具有偶校验性的数都能被 3 整除（例如，$0101_2=5$）。所以这是不正确的。\n- 选项 D 检查 4 位数是否为回文数（$y_2=y_0$ 且 $y_1=x$）。这个条件不正确。例如，数字 3（二进制为 `0011`）能被 3 整除，但它不是一个回文数。因此，这个条件不是必要条件，不能作为正确的判据。\n因此，正确的方程组在选项 A 中给出。", "answer": "$$\\boxed{A}$$", "id": "1938304"}]}
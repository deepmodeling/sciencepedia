{"hands_on_practices": [{"introduction": "本练习旨在巩固您对移位寄存器基本操作的理解。通过追踪一个具有动态串行输入的双向移位寄存器的状态变化，您将能够掌握其核心的逐拍（cycle-by-cycle）行为。这项技能对于设计和调试任何使用移位寄存器的数字系统都至关重要 [@problem_id:1958084]。", "problem": "一个专用的4位同步双向移位寄存器被设计用于一个信号处理应用。寄存器的位表示为 $Q_3, Q_2, Q_1, Q_0$，其中 $Q_3$ 是最高有效位（MSB），$Q_0$ 是最低有效位（LSB）。寄存器初始并行加载二进制值 `1100`。\n\n寄存器的行为在每个时钟周期内遵循以下规则：\n\n1.  **右移操作**：寄存器的内容向右移动一个位置。位 $Q_3$ 被串行输入 $SI_R$ 替代，$Q_2$ 被原来的 $Q_3$ 替代，$Q_1$ 被原来的 $Q_2$ 替代，$Q_0$ 被原来的 $Q_1$ 替代。右移的串行输入 $SI_R$ 由移位*前*寄存器的状态根据逻辑表达式 $SI_R = Q_2 \\oplus Q_1$ 决定，其中 $\\oplus$ 表示异或运算。\n\n2.  **左移操作**：寄存器的内容向左移动一个位置。位 $Q_0$ 被串行输入 $SI_L$ 替代，$Q_1$ 被原来的 $Q_0$ 替代，$Q_2$ 被原来的 $Q_1$ 替代，$Q_3$ 被原来的 $Q_2$ 替代。左移的串行输入 $SI_L$ 由移位*前*寄存器的状态根据逻辑表达式 $SI_L = \\neg Q_3$ 决定，其中 $\\neg$ 表示逻辑非运算。\n\n一系列操作被应用于该寄存器，每个操作对应一个时钟脉冲。操作序列如下：\n- 时钟脉冲 1：右移\n- 时钟脉冲 2：右移\n- 时钟脉冲 3：左移\n\n在第三个时钟脉冲之后，寄存器的最终二进制内容（表示为序列 $Q_3Q_2Q_1Q_0$）是什么？\n\nA. `0011`\n\nB. `0110`\n\nC. `1100`\n\nD. `1110`\n\nE. `1111`", "solution": "这个4位寄存器的位是 $Q_{3}$ (MSB) 到 $Q_{0}$ (LSB)，初始加载为 $Q_{3}Q_{2}Q_{1}Q_{0}=1100$，所以 $Q_{3}=1$，$Q_{2}=1$，$Q_{1}=0$，$Q_{0}=0$。\n\n时钟脉冲 1 (右移)：串行输入根据移位前的状态计算得出：$SI_{R}=Q_{2}\\oplus Q_{1}$。对于初始状态，$SI_{R}=1\\oplus 0=1$。右移更新规则给出\n$$\nQ_{3}\\leftarrow SI_{R}=1,\\quad Q_{2}\\leftarrow \\text{原 }Q_{3}=1,\\quad Q_{1}\\leftarrow \\text{原 }Q_{2}=1,\\quad Q_{0}\\leftarrow \\text{原 }Q_{1}=0,\n$$\n因此在此脉冲后，$Q_{3}Q_{2}Q_{1}Q_{0}=1110$。\n\n时钟脉冲 2 (右移)：现在根据当前状态 $1110$ 计算 $SI_{R}$：$SI_{R}=Q_{2}\\oplus Q_{1}=1\\oplus 1=0$。应用右移更新：\n$$\nQ_{3}\\leftarrow 0,\\quad Q_{2}\\leftarrow \\text{原 }Q_{3}=1,\\quad Q_{1}\\leftarrow \\text{原 }Q_{2}=1,\\quad Q_{0}\\leftarrow \\text{原 }Q_{1}=1,\n$$\n得到 $Q_{3}Q_{2}Q_{1}Q_{0}=0111$。\n\n时钟脉冲 3 (左移)：串行输入是 $SI_{L}=\\neg Q_{3}$，根据移位前的状态 $0111$ 计算得出，所以 $SI_{L}=\\neg 0=1$。应用左移更新：\n$$\nQ_{3}\\leftarrow \\text{原 }Q_{2}=1,\\quad Q_{2}\\leftarrow \\text{原 }Q_{1}=1,\\quad Q_{1}\\leftarrow \\text{原 }Q_{0}=1,\\quad Q_{0}\\leftarrow SI_{L}=1,\n$$\n给出最终状态 $Q_{3}Q_{2}Q_{1}Q_{0}=1111$，对应选项 E。", "answer": "$$\\boxed{E}$$", "id": "1958084"}, {"introduction": "这个练习展示了如何通过一个简单的修改——将输出反馈回输入——将一个标准的移位寄存器转变为一个环形计数器。这种配置在生成定时信号和控制序列方面非常有用，它揭示了基本逻辑单元如何通过巧妙的连接实现特定的功能。通过解决这个问题 [@problem_id:1959699]，您将理解移位寄存器在序列生成中的应用。", "problem": "一个数字系统采用了一个$N$位串行输入、串行输出 (SISO) 移位寄存器。该寄存器由一个包含$N$个触发器的链组成，其中一个触发器的输出作为下一个触发器的输入。该寄存器被配置为一个右移寄存器，这意味着在每个有效时钟沿，位置$i$（对于$i=1, 2, ..., N-1$）上的位会移动到位置$i+1$。一个新的位被加载到位置1（指定为最高有效位MSB），而来自位置$N$（最低有效位LSB）的位作为串行输出被移出。\n\n在一个具体的应用中，该寄存器有$N=12$位。它被初始加载了二进制模式`110100101110`，其中最左边的位是MSB。接着，通过将来自LSB（位置12）的串行输出永久连接回MSB（位置1）的串行输入，实现了一个反馈回路。\n\n在此修改之后，系统时钟运行了$k=987$个周期。在第987个时钟周期完成后，下列哪个12位二进制字符串（从MSB到LSB）表示了寄存器的状态？\n\nA. `110110100101`\n\nB. `100101110110`\n\nC. `101101001011`\n\nD. `110100101110`\n\nE. `111110100101`", "solution": "一个将LSB反馈到MSB的右移寄存器，在每个时钟周期对整个$N$位字执行一次循环右移。设初始的$12$位状态表示为$S^{(0)}$。经过$k$个时钟周期后，其状态是初始字向右循环移动$k \\bmod 12$个位置的结果，因为该映射是周期性的，周期为$N=12$：\n$$\nk \\equiv r \\pmod{12} \\;\\;\\Rightarrow\\;\\; S^{(k)}=\\text{RotateRight}\\big(S^{(0)},\\, r\\big).\n$$\n计算余数：\n$$\n987 = 12 \\cdot 82 + 3 \\;\\;\\Rightarrow\\;\\; 987 \\equiv 3 \\pmod{12}.\n$$\n因此，经过$987$个周期后寄存器的状态是初始字向右循环移动$3$个位置的结果。初始字为110100101110；其最后三位是110，前九位是110100101，因此向右循环移动三位得到\n$$\n\\text{RotateRight}\\big(110100101110,\\,3\\big) = 110\\,110100101 = 110110100101,\n$$\n这与选项A匹配。", "answer": "$$\\boxed{A}$$", "id": "1959699"}, {"introduction": "本练习将挑战您将移位寄存器应用于一个更复杂的系统：二进制乘法器。通过模拟经典的“加法-移位”算法，您将看到移位寄存器如何与算术单元协同工作，以执行核心计算任务。这个问题 [@problem_id:1908895] 揭示了移位寄存器在构建计算机算术逻辑单元（ALU）等复杂电路中的关键作用。", "problem": "考虑一个用于将两个4位无符号二进制数相乘的数字电路。该乘法器使用加法和移位算法实现，包含以下组件：\n- 寄存器`M`：一个4位寄存器，用于保存不变的被乘数。\n- 寄存器`A`：一个4位累加器，初始化为`0000`。\n- 寄存器`Q`：一个4位移位寄存器，初始加载乘数。\n- 寄存器`C`：一个1位进位寄存器，初始化为`0`。\n\n乘法过程是同步的，由时钟控制。在每个时钟周期，会发生以下微操作序列：\n1.  检查寄存器`Q`的最低有效位，记为`Q_0`。\n2.  如果`Q_0`为`1`，则将被乘数`M`加到累加器`A`上。4位结果存回`A`，加法的进位输出存储在进位寄存器`C`中。如果`Q_0`为`0`，则`A`和`C`保持不变。\n3.  由`C`、`A`和`Q`（按`C:A:Q`顺序）组成的9位组合寄存器向右移一位。来自`C`的位移入`A`的最高有效位（`A_3`），`A`的最低有效位（`A_0`）移入`Q`的最高有效位（`Q_3`），而`Q`的最低有效位（`Q_0`）被丢弃。\n4.  移位后，进位寄存器`C`被重置为`0`，为下一个周期可能的加法做准备。\n\n假设被乘数寄存器`M`加载了值`1101`，乘数寄存器`Q`加载了`1011`。在第一个时钟周期之前，系统初始化为`A = 0000`和`C = 0`。\n\n确定系统在完成整整三个时钟周期后寄存器`A`和`Q`的内容。将您的答案表示为一个8位二进制字符串，该字符串是寄存器`A`的内容后跟寄存器`Q`的内容的拼接。例如，如果在某个时刻`A = 0001`且`Q = 1010`，则相应的字符串将是`00011010`。", "solution": "我们使用 $M=1101$，初始 $A=0000$，$Q=1011$ 和 $C=0$ 来模拟指定的加法和移位乘法，共进行三个周期。在每个周期：\n- 如果 $Q_{0}=1$，计算4位和 $A \\leftarrow A+M$，并将进位输出到 $C$；如果 $Q_{0}=0$，则 $A$ 和 $C$ 保持不变。\n- 对9位的 $C:A:Q$ 执行右移操作：\n  $$A_{3} \\leftarrow C,\\quad A_{2} \\leftarrow A_{3},\\quad A_{1} \\leftarrow A_{2},\\quad A_{0} \\leftarrow A_{1},$$\n  $$Q_{3} \\leftarrow A_{0}\\ \\text{(old)},\\quad Q_{2} \\leftarrow Q_{3},\\quad Q_{1} \\leftarrow Q_{2},\\quad Q_{0} \\leftarrow Q_{1},$$\n  然后重置 $C \\leftarrow 0$。\n\n周期 1：\n- $Q_{0}=1$，所以将 $M$ 加到 $A$：\n  $$A \\leftarrow 0000+1101=1101,\\quad C \\leftarrow 0.$$\n- 右移 $C:A:Q = 0:1101:1011$：\n  $$A \\leftarrow 0110,\\quad Q \\leftarrow 1101,\\quad C \\leftarrow 0.$$\n\n周期 2：\n- $Q_{0}=1$，所以将 $M$ 加到 $A$：\n  $$A \\leftarrow 0110+1101=0011,\\quad C \\leftarrow 1.$$\n- 右移 $C:A:Q = 1:0011:1101$：\n  $$A \\leftarrow 1001,\\quad Q \\leftarrow 1110,\\quad C \\leftarrow 0.$$\n\n周期 3：\n- $Q_{0}=0$，所以不进行加法：\n  $$A \\leftarrow 1001,\\quad C \\leftarrow 0.$$\n- 右移 $C:A:Q = 0:1001:1110$：\n  $$A \\leftarrow 0100,\\quad Q \\leftarrow 1111,\\quad C \\leftarrow 0.$$\n\n在整整三个完整时钟周期后，内容为 $A=0100$ 和 $Q=1111$，因此所要求的8位字符串（$A$后跟$Q$的拼接）是 $01001111$。", "answer": "$$\\boxed{01001111}$$", "id": "1908895"}]}
{"hands_on_practices": [{"introduction": "理解同步计数器的理想工作状态是第一步，但分析其在故障情况下的行为同样重要。本练习将挑战你分析当一个关键逻辑门发生故障时的后果。通过追踪一个带有“固定为0”故障的计数器的行为，你将锻炼自己的诊断能力，并更深刻地理解内部逻辑如何决定最终的计数序列。[@problem_id:1965398]", "problem": "一个4位同步二进制加法计数器由四个T型触发器构成。触发器的输出记为 $Q_3, Q_2, Q_1, Q_0$，其中 $Q_3$ 是最高有效位 (MSB)，$Q_0$ 是最低有效位 (LSB)。该计数器被设计为在时钟信号的上升沿递增。触发器的翻转输入 ($T$) 由以下逻辑驱动，其中 `·` 代表逻辑与运算：\n\n$T_0 = 1$\n$T_1 = Q_0$\n$T_2 = Q_1 \\cdot Q_0$\n$T_3 = Q_2 \\cdot Q_1 \\cdot Q_0$\n\n电路中出现了一个故障：为 $T_3$ 输入生成信号的三输入与门发生故障。其输出永久固定在逻辑0电平。假设计数器被初始化为状态0000，然后施加一个连续的时钟信号。\n\n以下哪个选项正确地描述了该计数器现在将呈现的十进制值的重复序列？\n\nA. 0, 1, 2, 3, 4, 5, 6, 7\n\nB. 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15\n\nC. 0, 1, 2, 3\n\nD. 8, 9, 10, 11, 12, 13, 14, 15\n\nE. 计数器永久停留在状态7（二进制0111）。", "solution": "一个T型触发器遵循以下次态关系\n$$\nQ^{+} = T \\oplus Q,\n$$\n其中 $\\oplus$ 表示异或。对于给定的同步计数器，预期的翻转输入为\n$$\nT_{0} = 1,\\quad T_{1} = Q_{0},\\quad T_{2} = Q_{1}\\,Q_{0},\\quad T_{3} = Q_{2}\\,Q_{1}\\,Q_{0}.\n$$\n在存在故障的情况下，驱动 $T_{3}$ 的三输入与门固定在逻辑 $0$，因此实际的输入为\n$$\nT_{0} = 1,\\quad T_{1} = Q_{0},\\quad T_{2} = Q_{1}\\,Q_{0},\\quad T_{3} = 0.\n$$\n因此，按位的次态方程为\n$$\nQ_{0}^{+} = 1 \\oplus Q_{0} = \\bar{Q}_{0},\\quad\nQ_{1}^{+} = Q_{0} \\oplus Q_{1},\\quad\nQ_{2}^{+} = (Q_{1}\\,Q_{0}) \\oplus Q_{2},\\quad\nQ_{3}^{+} = 0 \\oplus Q_{3} = Q_{3}.\n$$\n因此 $Q_{3}$ 从不改变。由于计数器初始化为 $Q_{3}Q_{2}Q_{1}Q_{0} = 0000$，因此在所有后续时间里，$Q_{3}=0$。低三位实现了一个标准的3位同步加法计数器，因为 $T_{0}=1$，$T_{1}=Q_{0}$，以及 $T_{2}=Q_{1}Q_{0}$。\n\n从 $Q_{3}Q_{2}Q_{1}Q_{0} = 0000$ 开始，在每个上升沿应用更新方程：\n- 从 $0000$：$Q_{0}$ 翻转为 $1$，$Q_{1}$ 和 $Q_{2}$ 保持，$Q_{3}$ 保持 $\\Rightarrow 0001$。\n- 从 $0001$：$Q_{0}$ 翻转为 $0$；因为 $Q_{0}=1$，$Q_{1}$ 翻转；因为 $Q_{1}Q_{0}=0$，$Q_{2}$ 保持；$Q_{3}$ 保持 $\\Rightarrow 0010$。\n- 从 $0010$：$Q_{0}$ 翻转为 $1$；因为 $Q_{0}=0$，$Q_{1}$ 保持；因为 $Q_{1}Q_{0}=0$，$Q_{2}$ 保持；$Q_{3}$ 保持 $\\Rightarrow 0011$。\n- 从 $0011$：$Q_{0}$ 翻转为 $0$；因为 $Q_{0}=1$，$Q_{1}$ 翻转；因为 $Q_{1}Q_{0}=1$，$Q_{2}$ 翻转；$Q_{3}$ 保持 $\\Rightarrow 0100$。\n\n以这种方式继续，低三位向上计数经过 $0101$、$0110$、$0111$，然后在下一个边沿回绕到 $0000$（因为当处于 $0111$ 时，$Q_{0}$、$Q_{1}$ 和 $Q_{2}$ 都会翻转），而 $Q_{3}$ 在整个过程中保持为 $0$。因此，4位状态在 $0000, 0001, \\dots, 0111$ 之间重复循环，对应于十进制值\n$$\n0, 1, 2, 3, 4, 5, 6, 7 \\text{ （重复）}.\n$$\n这与选项A相符。", "answer": "$$\\boxed{A}$$", "id": "1965398"}, {"introduction": "在现实世界中，数字电路的运行速度是有限的。本练习将带你从纯粹的逻辑功能转向物理时序约束，要求你计算一个同步计数器的最高工作频率。你将学习如何识别设计的“关键路径”，并应用基本的时序参数来评估计数器的性能极限。[@problem_id:1965452]", "problem": "一位数字系统工程师的任务是为一个物理实验设计一个高精度事件计时器模块。该模块的核心是一个5位同步二进制加法计数器。该计数器使用T型触发器和标准的2输入与门实现。所有触发器共享一个共同的时钟信号。\n\n在此设计中，第$n$个触发器（其中$n=0$对应最低有效位）的翻转输入（$T_n$）由所有前面触发器的输出（$Q_i$）的逻辑与驱动。即，对于$n>0$，$T_n = Q_{n-1} \\cdot Q_{n-2} \\cdot \\ldots \\cdot Q_0$。对于第一个触发器，输入为$T_0 = 1$（逻辑高电平）。任何所需的多输入与运算都是通过串联级联2输入与门来构建的。例如，运算$A \\cdot B \\cdot C$实现为$(A \\cdot B) \\cdot C$。\n\n所用组件具有以下时序特性：\n- 任何触发器从时钟边沿到稳定输出的传播延迟为 $t_{p-ff} = 12$ ns。\n- 建立时间，即触发器的数据输入在触发时钟边沿之前必须保持稳定的时间，为 $t_{su} = 3$ ns。\n- 任何2输入与门的传播延迟为 $t_{p-and} = 5$ ns。\n\n计算此5位计数器的最大可能工作频率。答案以兆赫兹（MHz）表示，并四舍五入到三位有效数字。", "solution": "我们使用两个寄存器之间的同步时序（建立）约束：\n$$\nT_{\\text{clk}} \\ge t_{p\\text{-ff}} + t_{p\\text{-logic}} + t_{su}.\n$$\n此处，$t_{p\\text{-logic}}$ 是驱动目标触发器输入的组合逻辑的最坏情况传播延迟。\n\n在这个5位计数器中，对于$n>0$，位$n$的翻转输入是$T_{n} = Q_{n-1} \\cdot Q_{n-2} \\cdots Q_{0}$，通过级联2输入与门实现。一个由2输入与门构建的$m$输入与门需要$(m-1)$级。因此，对于位$n$，2输入与门的级数为$(n-1)$，因为$T_{n}$有$n$个输入。\n\n枚举如下：\n- $T_{1} = Q_{0}$：$0$个与门，\n- $T_{2} = Q_{1}\\cdot Q_{0}$：$1$个与门，\n- $T_{3} = Q_{2}\\cdot Q_{1}\\cdot Q_{0}$：$2$个与门，\n- $T_{4} = Q_{3}\\cdot Q_{2}\\cdot Q_{1}\\cdot Q_{0}$：$3$个与门。\n\n因此，关键路径是到$T_{4}$的路径，有$3$个级联的与门。最坏情况下的数据路径延迟是\n$$\nt_{p\\text{-path}} = t_{p\\text{-ff}} + 3\\,t_{p\\text{-and}}.\n$$\n应用建立时间约束以求得最大时钟频率：\n$$\nT_{\\min} = t_{p\\text{-ff}} + 3\\,t_{p\\text{-and}} + t_{su}.\n$$\n代入给定值，\n$$\nT_{\\min} = 12\\ \\text{ns} + 3 \\times 5\\ \\text{ns} + 3\\ \\text{ns} = 30\\ \\text{ns}.\n$$\n因此，\n$$\nf_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{30\\times 10^{-9}\\ \\text{s}} = \\frac{10^{9}}{30}\\ \\text{Hz} = \\frac{10^{3}}{30}\\ \\text{MHz} \\approx 33.3\\ \\text{MHz},\n$$\n四舍五入到三位有效数字。", "answer": "$$\\boxed{33.3}$$", "id": "1965452"}, {"introduction": "掌握了分析现有计数器的方法后，我们现在转向从零开始设计一个计数器。本练习将指导你使用基本的SR触发器，为同步计数器推导出其所需的“激励逻辑”。你将学习如何将期望的计数序列转化为精确的布尔表达式，从而实现对状态元件的精确控制，这是时序逻辑综合的基础。[@problem_id:1965408]", "problem": "一位数字系统工程师的任务是为一个小型、资源受限的工业控制器创建一个组件。该设计需要一个3位同步二进制加法计数器，它能按顺序从状态 0 (二进制 000) 循环到 7 (二进制 111)，然后再回绕到 0。该工程师被限制只能使用置位-复位 (SR) 触发器作为状态存储元件。这三个触发器由其输出 $Q_2, Q_1, Q_0$ 指定，其中 $Q_2$ 是最高有效位 (MSB)，$Q_0$ 是最低有效位 (LSB)。\n\n您的任务是确定该计数器激励逻辑的一整套最小积之和 (SOP) 布尔表达式。这些表达式将用现态变量 $Q_2, Q_1, Q_0$ 来定义三个 SR 触发器的输入 $S_2, R_2, S_1, R_1, S_0, R_0$。一个关键的设计约束是，在任何状态下，任何触发器的禁止输入条件 $S=1, R=1$ 都绝不能出现。\n\n在下面的选项中，并列表示逻辑与运算，`+` 符号表示逻辑或运算，撇号 (例如, $Q'$) 表示逻辑非运算。\n\n选择正确提供所有六个最小SOP表达式的选项。\n\nA.\n$S_2 = Q_1 Q_0, \\quad R_2 = Q_1 Q_0$\n$S_1 = Q_0, \\quad R_1 = Q_0$\n$S_0 = 1, \\quad R_0 = 1$\n\nB.\n$S_2 = Q_2' Q_1 Q_0, \\quad R_2 = Q_2 Q_1 Q_0$\n$S_1 = Q_1' Q_0, \\quad R_1 = Q_1 Q_0$\n$S_0 = Q_0', \\quad R_0 = Q_0$\n\nC.\n$S_2 = Q_2 Q_1 Q_0, \\quad R_2 = Q_2' Q_1 Q_0$\n$S_1 = Q_1 Q_0, \\quad R_1 = Q_1' Q_0$\n$S_0 = Q_0, \\quad R_0 = Q_0'$\n\nD.\n$S_2 = Q_1 Q_0, \\quad R_2 = Q_2 Q_1$\n$S_1 = Q_1' Q_0, \\quad R_1 = Q_1$\n$S_0 = Q_0', \\quad R_0 = Q_0$", "solution": "我们使用 SR 触发器设计一个3位同步加法计数器，其现态变量为 $Q_{2}, Q_{1}, Q_{0}$，次态变量为 $Q_{2}^{+}, Q_{1}^{+}, Q_{0}^{+}$。对于一个现态为 $Q$、次态为 $Q^{+}$ 的 SR 触发器，为避免禁止输入 $S=1, R=1$ 并实现所需的转换，其激励方程为\n$$\nS = Q' Q^{+}, \\quad R = Q \\, (Q^{+})'.\n$$\n\n对于一个二进制加法计数器：\n- 最低有效位在每个时钟周期翻转，所以 $Q_{0}^{+} = Q_{0}'$。\n- 中间位在 $Q_{0} = 1$ 时翻转，所以 $Q_{1}^{+} = Q_{1} \\oplus Q_{0} = Q_{1}' Q_{0} + Q_{1} Q_{0}'$。\n- 最高有效位在 $Q_{1} Q_{0} = 1$ 时翻转，所以 $Q_{2}^{+} = Q_{2} \\oplus (Q_{1} Q_{0}) = Q_{2}' (Q_{1} Q_{0}) + Q_{2} (Q_{1} Q_{0})'$。\n\n将 SR 激励公式逐位应用。\n\n对于 $Q_{0}$：\n$$\nS_{0} = Q_{0}' Q_{0}^{+} = Q_{0}' \\cdot Q_{0}' = Q_{0}', \\quad\nR_{0} = Q_{0} \\, (Q_{0}^{+})' = Q_{0} \\cdot (Q_{0}')' = Q_{0}.\n$$\n\n对于 $Q_{1}$：\n$$\nS_{1} = Q_{1}' Q_{1}^{+} = Q_{1}' (Q_{1}' Q_{0} + Q_{1} Q_{0}') = Q_{1}' Q_{0},\n$$\n$$\nR_{1} = Q_{1} \\, (Q_{1}^{+})' = Q_{1} \\, (Q_{1} \\oplus Q_{0})' = Q_{1} (Q_{1} Q_{0} + Q_{1}' Q_{0}') = Q_{1} Q_{0}.\n$$\n\n对于 $Q_{2}$：\n$$\nS_{2} = Q_{2}' Q_{2}^{+} = Q_{2}' \\big(Q_{2}' (Q_{1} Q_{0}) + Q_{2} (Q_{1} Q_{0})'\\big) = Q_{2}' Q_{1} Q_{0},\n$$\n$$\nR_{2} = Q_{2} \\, (Q_{2}^{+})' = Q_{2} \\, (Q_{2} \\oplus (Q_{1} Q_{0}))' = Q_{2} \\big(Q_{2} (Q_{1} Q_{0}) + Q_{2}' (Q_{1} Q_{0})'\\big) = Q_{2} Q_{1} Q_{0}.\n$$\n\n每对 $(S_{i}, R_{i})$ 都是最小SOP形式，并且绝不会出现 $S=R=1$ 的情况：\n- $(S_{0}, R_{0}) = (Q_{0}', Q_{0})$ 是互补的，因此绝不会同时为 1。\n- $(S_{1}, R_{1}) = (Q_{1}' Q_{0}, Q_{1} Q_{0})$ 不能同时为 1。\n- $(S_{2}, R_{2}) = (Q_{2}' Q_{1} Q_{0}, Q_{2} Q_{1} Q_{0})$ 不能同时为 1。\n\n这些表达式与选项 B 中的完全匹配。", "answer": "$$\\boxed{B}$$", "id": "1965408"}]}
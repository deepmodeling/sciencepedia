{"hands_on_practices": [{"introduction": "我们从一个基础但至关重要的练习开始，以巩固对异步（或“纹波”）级联计数器的理解。在这种设计中，一个计数器的输出翻转会触发下一个计数器，形成一个连锁反应。通过追踪一系列时钟脉冲后的最终状态，这个练习可以帮助您直观地了解总计数值是如何在级联的各个阶段之间传递和分配的。[@problem_id:1919471]", "problem": "一个数字定时电路由两个级联的二进制加法计数器——计数器A和计数器B——构成。计数器A是一个模4计数器，有两条输出线$Q_{A1}Q_{A0}$，其中$Q_{A1}$是最高有效位。计数器B是一个模8计数器，有三条输出线$Q_{B2}Q_{B1}Q_{B0}$，其中$Q_{B2}$是最高有效位。\n\n该系统配置为一个异步计数器：一个主时钟信号连接到计数器A的输入端。计数器B由计数器A的最高有效位输出（即$Q_{A1}$）的下降沿触发。\n\n在操作开始时（$t=0$），施加一个全局复位信号，将两个计数器的初始状态都设置为0。这意味着所有五条输出线（$Q_{B2}Q_{B1}Q_{B0}$和$Q_{A1}Q_{A0}$）都处于逻辑0电平。\n\n复位后，向计数器A的主时钟输入端施加恰好40个时钟脉冲。请确定在这40个脉冲结束后，系统的组合二进制状态。请以一个5位二进制数的形式提供答案，其中计数器B的位在左侧（最高有效位），计数器A的位在右侧（最低有效位），格式为$Q_{B2}Q_{B1}Q_{B0}Q_{A1}Q_{A0}$。", "solution": "问题要求计算一个级联计数器系统在40个时钟脉冲后的最终状态。该系统由一个模4计数器（计数器A）和一个由其输出触发的模8计数器（计数器B）组成。我们需要分别确定每个计数器的最终状态，然后将它们组合起来。\n\n首先，我们分析计数器A。它是一个模4计数器，这意味着它会循环经历四个状态（0, 1, 2, 3），然后重复。它在接收到来自主时钟的$N$个脉冲后的状态由$N$除以4的余数决定。\n计数器A的状态$S_A$计算如下：\n$$S_A = N \\pmod{4}$$\n已知施加了$N=40$个脉冲：\n$$S_A = 40 \\pmod{4} = 0$$\n所以，计数器A的最终状态是0。在2位二进制表示（$Q_{A1}Q_{A0}$）中，这个状态是`00`。\n\n接下来，我们分析计数器B。它是一个模8计数器，但它不是由主时钟触发的。相反，它是由计数器A的最高有效位（$Q_{A1}$）的下降沿触发的。对于一个2位二进制加法计数器（模4），其状态为`00`、`01`、`10`、`11`。最高有效位$Q_{A1}$遵循`0, 0, 1, 1, 0, 0, 1, 1, ...`的模式。当$Q_{A1}$从1转换回0时，会发生一个下降沿。这恰好发生在计数器A从状态`11`（十进制3）变回状态`00`（十进制0）时。这个事件，称为回零，在计数器A的每个完整周期中发生一次。\n由于计数器A是模4计数器，它每4个主时钟脉冲完成一个完整周期。因此，计数器B接收到的时钟脉冲数（我们称之为$N_B$）是主脉冲总数$N$除以4的整数部分。\n$$N_B = \\left\\lfloor \\frac{N}{4} \\right\\rfloor$$\n代入$N=40$：\n$$N_B = \\left\\lfloor \\frac{40}{4} \\right\\rfloor = 10$$\n所以，计数器B接收到10个时钟脉冲。\n\n现在我们可以确定计数器B的最终状态。它是一个模8计数器，所以在$N_B$个脉冲后其状态$S_B$为：\n$$S_B = N_B \\pmod{8}$$\n当$N_B=10$时：\n$$S_B = 10 \\pmod{8} = 2$$\n计数器B的最终状态是2。在3位二进制表示（$Q_{B2}Q_{B1}Q_{B0}$）中，这个状态是`010`。\n\n最后，我们将两个计数器的状态组合起来得到整个系统的状态。问题指定了格式为$Q_{B2}Q_{B1}Q_{B0}Q_{A1}Q_{A0}$。我们将$S_B$的二进制表示与$S_A$的二进制表示连接起来。\n计数器B的状态（$S_B=2$）：`010`\n计数器A的状态（$S_A=0$）：`00`\n组合状态 = $Q_{B2}Q_{B1}Q_{B0}Q_{A1}Q_{A0}$ = `01000`。\n\n或者，我们可以考虑系统的总模数，即各个模数的乘积：$M_{total} = 4 \\times 8 = 32$。该系统表现为一个模32计数器。40个脉冲后的总计数值为 $40 \\pmod{32} = 8$。十进制数8的5位二进制表示确实是`01000`，这证实了我们的结果。", "answer": "$$\\boxed{01000}$$", "id": "1919471"}, {"introduction": "在掌握了分析方法之后，让我们转向一个更具创造性的设计挑战。这个练习要求您利用一组给定的计数器模块，构建一个具有最大可能计数范围的新计数器。这项任务不仅考验您对级联原理的理解，更锻炼您综合运用同步使能逻辑，以实现计数器模数组合的理论最大值，这是从分析到系统综合的关键一步。[@problem_id:1919487]", "problem": "一位数字系统工程师的任务是创建一个分频器，其整数分频比 $M$ 尽可能大，且严格小于200。可用的组件是一组固定的同步计数器集成电路：两个相同的 MOD-5 计数器和一个 MOD-7 计数器。同步 MOD-N 计数器是一种从 0 计数到 $N-1$ 的设备，它有用于时钟信号和计数使能的输入，以及指示其当前计数值的输出。您可以使用这些计数器的任何配置，无论是级联、并行还是混合拓扑，并通过任何所需的组合逻辑门（例如，与门、或门、非门）互连，以控制它们的时钟或使能输入。最终设计必须作为一个单一的连续计数器工作，这意味着其整体状态必须在重复序列之前，循环经历一个由 $M$ 个不同状态组成的唯一序列。所能实现的 $M$ 的最大可能值是多少？", "solution": "令两个 MOD-5 计数器的状态为 $x \\in \\{0,1,2,3,4\\}$ 和 $y \\in \\{0,1,2,3,4\\}$，MOD-7 计数器的状态为 $z \\in \\{0,1,2,3,4,5,6\\}$。组合系统的状态是三元组 $(x,y,z)$。由于唯一的存储元件是这三个计数器，所以不同组合状态的总数最多是各个模数的乘积。因此，\n$$\nM \\leq 5 \\cdot 5 \\cdot 7 = 175.\n$$\n因此 $M \\leq 175$ 是一个严格的上限。\n\n接下来需要证明，通过适当的同步互连可以实现 $M=175$，从而使整个系统形成一个长度为 $175$ 的单一循环。\n\n按如下方式构建一个混合基数级联。令最低有效位计数器 $x$ 在每个时钟周期都使能（因此它在每个输入时钟上进行模 $5$ 计数）。当且仅当该时钟周期 $x=4$ 时，使能计数器 $y$；当且仅当该时钟周期 $x=4$ 且 $y=4$ 时，使能计数器 $z$。这些使能条件可以通过相等检测组合逻辑来实现。所有计数器都是同步的，因此它们的下一个状态是在每个时钟边沿根据当前状态 $(x,y,z)$ 并发计算的。\n\n定义状态索引\n$$\ns \\triangleq x + 5y + 25z,\n$$\n其取值范围为 $\\{0,1,\\ldots,174\\}$。我们证明在每个时钟滴答时，$s$ 都会模 $175$ 递增 $1$。分情况讨论：\n\n1) 如果 $x4$，则 $x^{+}=x+1$, $y^{+}=y$, $z^{+}=z$，因此\n$$\ns^{+}=(x+1)+5y+25z=s+1.\n$$\n\n2) 如果 $x=4$ 且 $y4$，则 $x^{+}=0$, $y^{+}=y+1$, $z^{+}=z$，因此\n$$\ns^{+}=0+5(y+1)+25z=(4+5y+25z)+1=s+1.\n$$\n\n3) 如果 $x=4$, $y=4$ 且 $z6$，则 $x^{+}=0$, $y^{+}=0$, $z^{+}=z+1$，因此\n$$\ns^{+}=0+0+25(z+1)=(4+5(4)+25z)+1=s+1.\n$$\n\n4) 如果 $x=4$, $y=4$, $z=6$，则 $x^{+}=0$, $y^{+}=0$, $z^{+}=0$，因此\n$$\ns^{+}=0=(174+1) \\bmod 175=(s+1) \\bmod 175.\n$$\n\n因此在所有情况下，\n$$\ns^{+} \\equiv s+1 \\pmod{175},\n$$\n所以状态序列是一个单一循环，覆盖了所有 $175$ 个不同的值，然后重复。这实现了 $M=175$，满足了上限，因此在给定约束下是最大的。由于 $175200$，所以 $M$ 的最大可能值为 $175$。", "answer": "$$\\boxed{175}$$", "id": "1919487"}, {"introduction": "现实世界的数字设计充满了挑战，其中之一就是诊断由接线错误引起的意外行为。本练习模拟了一个经典的故障场景：一个同步级联计数器因错误的接线而连接到了一个异步清零输入。通过分析这种故障如何改变计数器的行为，您将深刻体会到同步时钟信号与异步控制信号之间相互作用的微妙之处，并理解精确接线在确保电路按预期工作中的至关重要性。[@problem_id:1919542]", "problem": "在一个数字设计实验室中，一名学生打算通过级联两个相同的4位同步二进制加法计数器（名为 C1 和 C2）来创建一个8位同步二进制计数器。C1 用于计算四个低位比特，C2 用于计算四个高位比特。\n\n每个4位计数器具有以下特性：\n- 一个时钟输入 `CLK`。计数器在 `CLK` 信号的每个上升沿将其值加一。\n- 一个高电平有效的异步清零输入 `CLR`。当 `CLR` 为高电平（逻辑1）时，计数器的4位输出被立即异步地强制为 `0000`。当 `CLR` 为低电平（逻辑0）时，计数器正常工作。\n- 一个4位输出 `Q[3:0]`，代表从0（`0000`）到15（`1111`）的当前计数值。\n- 一个高电平有效的终端计数输出 `TC`。当且仅当计数器的状态 `Q[3:0רוב]` 为 `1111` 时，`TC` 输出为高电平（逻辑1）。否则，`TC` 为低电平（逻辑0）。\n\n学生犯了一个接线错误。系统按如下方式组装：\n- 一个单一的、共用的时钟信号连接到 C1 和 C2 的 `CLK` 输入端。\n- 低位计数器 C1 的 `CLR` 输入端永久接地（逻辑0）。\n- C1 的 `TC` 输出端被错误地连接到高位计数器 C2 的 `CLR` 输入端。\n- 在时间 $t=0$ 时，两个计数器都被初始化为状态 `0000`。\n\n经过一个初始启动状态序列后，组合的8位系统进入一个稳定的、重复的状态周期。这个稳定周期的长度（即唯一状态的数量）是多少？\n\nA. 15\n\nB. 16\n\nC. 31\n\nD. 240\n\nE. 256", "solution": "为了确定稳定周期的长度，我们分析组合状态 $(C2, C1)$ 在每个时钟上升沿之后的变化，其中 $C1$ 是低4位计数器， $C2$ 是高4位计数器。\n\n1.  **C1 的行为**: C1 的 `CLR` 输入接地，因此它作为一个标准的 MOD-16 同步计数器工作，在每个时钟上升沿其值加一。其状态序列为 $0, 1, 2, \\dots, 14, 15, 0, 1, \\dots$。\n\n2.  **C2 的行为**: C2 的行为受到其异步 `CLR` 输入的控制，该输入连接到 C1 的 `TC` 输出。根据定义，`TC` 仅在 $C1=15$ (`1111`) 时为高电平。由于 `CLR` 是异步且高电平有效的，这意味着只要 $C1$ 的状态是15， $C2$ 就会被立即强制并保持在状态0。\n\n3.  **状态追踪**: 让我们追踪组合状态 $(C2, C1)$ 的序列，以找到重复的周期。\n    *   **步骤 A**: 假设系统处于状态 $(H, 14)$。在下一个时钟上升沿：\n        *   C1 从14加一变为15。\n        *   C2 从 $H$ 加一变为 $H+1$。\n        *   然而，一旦 C1 的状态变为15（在其内部传播延迟之后），其 `TC` 输出变为高电平。此信号会传播到 C2 的 `CLR` 输入，异步地将 C2 强制清零。\n        *   因此，在此次时钟事件稳定后的最终状态为 $(0, 15)$。\n\n    *   **步骤 B**: 系统现在处于状态 $(0, 15)$。由于 $C1=15$，C2 正被 `CLR` 信号保持在0。在下一个时钟上升沿：\n        *   C1 从15加一变为0。\n        *   同时，C2 试图从其当前值（被强制的0）加一变为1。\n        *   由于 C1 的新状态是0，其 `TC` 输出立即变为低电平，解除了对 C2 的清零。C2 成功地完成了到状态1的转换。\n        *   因此，新的稳定状态是 $(1, 0)$。\n\n    *   **步骤 C**: 从状态 $(1, 0)$ 开始，C1 的 `TC` 输出保持低电平，直到 C1 再次达到14。在此期间，C1 和 C2 都作为正常的同步计数器运行。系统将按如下方式演进：\n        *   $(1, 0) \\to (2, 1)$\n        *   $(2, 1) \\to (3, 2)$\n        *   ...\n        *   $(14, 13) \\to (15, 14)$\n\n4.  **确定周期**: 将以上步骤连接起来，我们得到一个完整的状态周期：\n    *   从状态 $(15, 14)$ 开始，下一个状态是 $(0, 15)$ （根据步骤A）。\n    *   从状态 $(0, 15)$ 开始，下一个状态是 $(1, 0)$ （根据步骤B）。\n    *   然后系统遍历状态 $(2, 1), (3, 2), \\dots, (15, 14)$ （根据步骤C）。\n    *   这个稳定周期为：$(1, 0) \\to (2, 1) \\to \\dots \\to (15, 14) \\to (0, 15) \\to (1, 0)$。\n\n5.  **计算周期长度**: 让我们计算这个周期中的唯一状态数。\n    *   序列 $(1, 0), (2, 1), \\dots, (15, 14)$ 包含了15个唯一的状态。\n    *   再加上状态 $(0, 15)$。\n    *   总周期长度为 $15 + 1 = 16$ 个状态。\n\n因此，稳定周期的长度是16。这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1919542"}]}
{"hands_on_practices": [{"introduction": "本练习旨在巩固环形计数器的基本工作原理。通过在特定时间点计算电路的状态 [@problem_id:1971061]，您将加深对状态转换如何与时钟脉冲同步的理解，这是分析任何时序电路所需的一项基本技能。", "problem": "正在设计一个用于一组三个实验性发光二极管（LED）的顺序控制电路。该电路的核心是一个3位环形计数器，由三个正边沿触发的D型触发器构成。触发器的输出表示为 $(Q_2, Q_1, Q_0)$，其相应的输入为 $(D_2, D_1, D_0)$。\n\n这些触发器相互连接以形成一种特定的循环移位模式。连接方式如下：第2级的输出 $Q_2$ 连接到第0级的输入 ($D_0$)；第1级的输出 $Q_1$ 连接到第2级的输入 ($D_2$)；第0级的输出 $Q_0$ 连接到第1级的输入 ($D_1$)。\n\n该计数器由一个频率为 $1.0$ MHz 的稳定时钟驱动。在时间 $t=0$ 时，系统被异步初始化到状态 $(Q_2, Q_1, Q_0) = (1, 0, 0)$。一个周期性的时钟信号驱动该计数器，其第一个正（上升）边沿出现在 $t=1.0$ 微秒，随后的上升边沿以由时钟频率决定的固定间隔出现。\n\n确定在 $t = 4.2$ 微秒这个精确时刻，计数器的二进制状态，表示为字符串 $Q_2Q_1Q_0$。", "solution": "三个正边沿触发的D型触发器按 $D_{0}=Q_{2}$、$D_{2}=Q_{1}$ 和 $D_{1}=Q_{0}$ 的方式互连。在每个时钟上升沿，下一个状态等于当前的输入，因此状态更新方程为\n$$\n(Q_{2}^{+},\\,Q_{1}^{+},\\,Q_{0}^{+})=(D_{2},\\,D_{1},\\,D_{0})=(Q_{1},\\,Q_{0},\\,Q_{2}),\n$$\n这是对三元组 $(Q_{2},Q_{1},Q_{0})$ 的一次右旋。\n\n时钟频率为 $f=1.0\\times 10^{6}$ 赫兹，因此时钟周期为\n$$\nT=\\frac{1}{f}=\\frac{1}{1.0\\times 10^{6}\\ \\text{s}}=1.0\\times 10^{-6}\\ \\text{s}.\n$$\n上升沿出现在 $t=kT$ 的时刻，其中 $k$ 为 $\\ge 1$ 的整数。到时间 $t$ 为止已经发生的上升沿次数为\n$$\nN(t)=\\left\\lfloor \\frac{t}{T}\\right\\rfloor.\n$$\n在 $t=4.2\\times 10^{-6}$ 秒时，我们有 $\\frac{t}{T}=4.2$，因此 $N(t)=4$。因为触发器是正边沿触发的，所以状态仅在上升沿改变，并在其间保持不变。因此，在 $t=4.2\\times 10^{-6}$ 秒时的状态，是从初始状态经过恰好 $4$ 次循环移位后的状态。\n\n在 $t=0$ 时异步初始化为 $(Q_{2},Q_{1},Q_{0})=(1,0,0)$，连续的循环移位给出\n$$\nR^{1}:(1,0,0)\\mapsto(0,0,1),\\quad\nR^{2}:(0,0,1)\\mapsto(0,1,0),\\quad\nR^{3}:(0,1,0)\\mapsto(1,0,0),\\quad\nR^{4}:(1,0,0)\\mapsto(0,0,1).\n$$\n因此，在 $t=4.0\\times 10^{-6}$ 秒的上升沿之后，直到下一个上升沿（在 $t=5.0\\times 10^{-6}$ 秒）之前的所有时间里，状态均为 $(Q_{2},Q_{1},Q_{0})=(0,0,1)$。因此，在 $t=4.2$ 微秒时，二进制字符串 $Q_{2}Q_{1}Q_{0}$ 是 $001$。", "answer": "$$\\boxed{001}$$", "id": "1971061"}, {"introduction": "标准的环形计数器存在一个严重缺陷：它可能会陷入一个全零的无效状态而无法自行恢复。本练习 [@problem_id:1971060] 将挑战您使用简单的组合逻辑来设计一个自校正机制，这是创建可靠数字系统的一项关键技能，也展示了如何超越理想模型以解决实际的设计约束问题。", "problem": "一个4位同步环形计数器由四个D型触发器构成，分别记作 $FF_3, FF_2, FF_1, FF_0$。这些触发器的输出分别为 $Q_3, Q_2, Q_1, Q_0$，代表计数器的状态。在正常工作情况下，计数器在状态序列 $1000 \\rightarrow 0100 \\rightarrow 0010 \\rightarrow 0001$ 中循环并重复。然而，由于瞬态毛刺，计数器可能会进入一个无效的“锁定”状态，此时 $Q_3Q_2Q_1Q_0 = 0000$。在这种状态下，一个标准的环形计数器会无限期地锁定在 $0000$ 状态。\n\n为防止这种情况，必须添加一个自校正机制。设计要求是使用一个包含一个4输入或非门的组合逻辑。该逻辑必须修改触发器的输入（$D_3, D_2, D_1, D_0$），使得如果当前状态是无效状态 $0000$，则下一个时钟周期的状态将变为 $1000$。对于所有有效的环形计数器状态，必须保持正常的序列。\n\n设4输入或非门的输出定义为 $Y = \\text{NOR}(Q_3, Q_2, Q_1, Q_0)$。下列哪组布尔方程正确描述了这个自校正环形计数器的触发器输入？\n\nA. $D_3 = Q_0 + Y; \\quad D_2 = Q_3 \\cdot \\overline{Y}; \\quad D_1 = Q_2 \\cdot \\overline{Y}; \\quad D_0 = Q_1 \\cdot \\overline{Y}$\nB. $D_3 = \\overline{Q_0}; \\quad D_2 = Q_3; \\quad D_1 = Q_2; \\quad D_0 = Q_1$\nC. $D_3 = Q_0 \\cdot \\overline{Y}; \\quad D_2 = Q_3 \\cdot \\overline{Y}; \\quad D_1 = Q_2 \\cdot \\overline{Y}; \\quad D_0 = Q_1 + Y$\nD. $D_3 = Q_0 + Y; \\quad D_2 = Q_3 \\cdot Y; \\quad D_1 = Q_2 \\cdot Y; \\quad D_0 = Q_1 \\cdot Y$", "solution": "目标是设计一个自校正的4位环形计数器。该电路必须满足两个条件：\n1.  **正常工作：** 对于有效状态（`1000`, `0100`, `0010`, `0001`），它必须像一个标准的环形计数器一样工作。标准环形计数器的输入逻辑是 $D_3 = Q_0$, $D_2 = Q_3$, $D_1 = Q_2$ 和 $D_0 = Q_1$。\n2.  **校正：** 如果计数器处于无效状态 `0000`，其下一个状态必须是 `1000`。这意味着当当前状态为 $Q_3Q_2Q_1Q_0 = 0000$ 时，触发器的输入必须是 $D_3D_2D_1D_0 = 1000$。\n\n我们使用一个4输入或非门来检测无效状态。设其输出为 $Y$。\n$$Y = \\text{NOR}(Q_3, Q_2, Q_1, Q_0) = \\overline{Q_3 + Q_2 + Q_1 + Q_0}$$\n当且仅当所有输入都为 $0$ 时，即当状态为 $Q_3Q_2Q_1Q_0 = 0000$ 时，输出 $Y$ 将为 $1$。对于任何其他状态，包括所有有效的环形计数器状态（它们是“独热”编码，意味着只有一个位是1），或非门的至少一个输入将为1，使其输出 $Y=0$。\n所以，$Y=1$ 表示无效状态，而 $Y=0$ 表示任何其他状态（包括所有有效状态）。因此，$\\overline{Y}$ 对于任何有效状态为 $1$，对于无效状态为 $0$。\n\n我们可以用一个通用公式来表示每个D输入的逻辑，该公式结合了正常逻辑和校正逻辑：\n$$D_i = (\\text{正常逻辑}_i \\cdot \\overline{Y}) + (\\text{校正逻辑}_i \\cdot Y)$$\n这种结构确保了当 $Y=0$（正常工作）时，校正逻辑被禁用；当 $Y=1$（无效状态）时，正常逻辑被禁用。\n\n让我们推导每个触发器输入的方程。\n\n**对于 $D_3$:**\n- 正常逻辑: $D_{3, \\text{normal}} = Q_0$。\n- 校正逻辑: 为使下一个状态为 `1000`，我们需要 $D_3=1$。所以，$D_{3, \\text{correct}} = 1$。\n- 组合逻辑: $D_3 = (Q_0 \\cdot \\overline{Y}) + (1 \\cdot Y) = Q_0\\overline{Y} + Y$。\n使用布尔代数恒等式 $A + \\overline{A}B = A+B$，我们可以简化这个表达式。设 $A=Y$ 且 $B=Q_0$。\n那么 $Y + \\overline{Y}Q_0 = Y + Q_0$。\n所以，$D_3$ 的最终方程是 $D_3 = Q_0 + Y$。\n\n**对于 $D_2$:**\n- 正常逻辑: $D_{2, \\text{normal}} = Q_3$。\n- 校正逻辑: 为使下一个状态为 `1000`，我们需要 $D_2=0$。所以，$D_{2, \\text{correct}} = 0$。\n- 组合逻辑: $D_2 = (Q_3 \\cdot \\overline{Y}) + (0 \\cdot Y) = Q_3\\overline{Y}$。\n\n**对于 $D_1$:**\n- 正常逻辑: $D_{1, \\text{normal}} = Q_2$。\n- 校正逻辑: 为使下一个状态为 `1000`，我们需要 $D_1=0$。所以，$D_{1, \\text{correct}} = 0$。\n- 组合逻辑: $D_1 = (Q_2 \\cdot \\overline{Y}) + (0 \\cdot Y) = Q_2\\overline{Y}$。\n\n**对于 $D_0$:**\n- 正常逻辑: $D_{0, \\text{normal}} = Q_1$。\n- 校正逻辑: 为使下一个状态为 `1000`，我们需要 $D_0=0$。所以，$D_{0, \\text{correct}} = 0$。\n- 组合逻辑: $D_0 = (Q_1 \\cdot \\overline{Y}) + (0 \\cdot Y) = Q_1\\overline{Y}$。\n\n让我们总结推导出的方程：\n- $D_3 = Q_0 + Y$\n- $D_2 = Q_3 \\cdot \\overline{Y}$\n- $D_1 = Q_2 \\cdot \\overline{Y}$\n- $D_0 = Q_1 \\cdot \\overline{Y}$\n\n这组方程与选项A相匹配。", "answer": "$$\\boxed{A}$$", "id": "1971060"}, {"introduction": "在实际操作中，电路可能由于接线错误等原因而无法按预期工作。最后一个练习将让您扮演故障排查员的角色；通过追踪一个有故障的计数器的状态序列 [@problem_id:1971111]，您将学会预测常见实现错误的后果，这是掌握数字逻辑调试的关键一步。", "problem": "一个4位同步时序电路由四个D型触发器（D-FF）构成，标记为FF0、FF1、FF2和FF3，其对应的输出为$Q_0, Q_1, Q_2, \\text{和 } Q_3$。电路的状态由比特串$Q_0Q_1Q_2Q_3$表示。该电路设计为一个标准的环形计数器，其中每个触发器的输出连接到下一个触发器的输入，最后一个触发器的输出反馈到第一个触发器的输入。标准的连接方式是$D_1=Q_0$，$D_2=Q_1$，$D_3=Q_2$以及$D_0=Q_3$。\n\n然而，由于一个接线错误，第一个触发器的输入$D_0$被无意中连接到了第三个触发器的输出$Q_2$，而不是正确的输出$Q_3$。所有其他连接（$D_1=Q_0, D_2=Q_1, D_3=Q_2$）都是正确的。\n\n在第一个时钟脉冲到来之前，该寄存器被初始化为状态$1000$（即$Q_0=1, Q_1=0, Q_2=0, Q_3=0$）。施加一系列时钟脉冲后，产生的状态序列会是什么？从下面的选项中找出正确的序列，其中每个箭头表示一个时钟脉冲后的状态转换。\n\nA. $1000 \\rightarrow 0100 \\rightarrow 0010 \\rightarrow 1001 \\rightarrow \\dots$\nB. $1000 \\rightarrow 0100 \\rightarrow 0010 \\rightarrow 0001 \\rightarrow \\dots$\nC. $1000 \\rightarrow 0100 \\rightarrow 1010 \\rightarrow 0101 \\rightarrow \\dots$\nD. $1000 \\rightarrow 0001 \\rightarrow 0010 \\rightarrow 0100 \\rightarrow \\dots$\nE. $1000 \\rightarrow 0000 \\rightarrow 0000 \\rightarrow 0000 \\rightarrow \\dots$", "solution": "对于D型触发器，同步下一状态关系为$Q_{i}^{+}=D_{i}$，在时钟沿进行求值。根据给定的（错误）连接$D_{1}=Q_{0}$、$D_{2}=Q_{1}$、$D_{3}=Q_{2}$和$D_{0}=Q_{2}$，下一状态方程为\n$$\nQ_{0}^{+}=Q_{2},\\quad Q_{1}^{+}=Q_{0},\\quad Q_{2}^{+}=Q_{1},\\quad Q_{3}^{+}=Q_{2}.\n$$\n因此，状态转换映射为\n$$\n(Q_{0},Q_{1},Q_{2},Q_{3})\\mapsto(Q_{2},Q_{0},Q_{1},Q_{2}).\n$$\n从初始状态$1000$（即$Q_{0}=1$、$Q_{1}=0$、$Q_{2}=0$、$Q_{3}=0$）开始，计算后续状态：\n- 从$1000$：$Q_{0}^{+}=0$，$Q_{1}^{+}=1$，$Q_{2}^{+}=0$，$Q_{3}^{+}=0$，得到$0100$。\n- 从$0100$：$Q_{0}^{+}=0$，$Q_{1}^{+}=0$，$Q_{2}^{+}=1$，$Q_{3}^{+}=0$，得到$0010$。\n- 从$0010$：$Q_{0}^{+}=1$，$Q_{1}^{+}=0$，$Q_{2}^{+}=0$，$Q_{3}^{+}=1$，得到$1001$。\n- 从$1001$：$Q_{0}^{+}=0$，$Q_{1}^{+}=1$，$Q_{2}^{+}=0$，$Q_{3}^{+}=0$，得到$0100$（并且序列重复为$0100 \\rightarrow 0010 \\rightarrow 1001 \\rightarrow 0100 \\rightarrow \\dots$）。\n\n因此，从给定的初始状态开始，得到的状态序列是\n$$\n1000 \\rightarrow 0100 \\rightarrow 0010 \\rightarrow 1001 \\rightarrow \\dots\n$$\n这与选项A相匹配。", "answer": "$$\\boxed{A}$$", "id": "1971111"}]}
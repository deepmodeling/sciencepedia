{"hands_on_practices": [{"introduction": "要真正掌握带并行加载功能的计数器，第一步是能够准确地追踪其行为。本练习将通过一个具体时序下的2位计数器，帮助你巩固对 `Load` 信号如何优先于常规计数操作的理解。通过逐个时钟周期地分析，你将亲身体验计数器状态是如何在加载和计数两种模式之间切换的。[@problem_id:1925182]", "problem": "一个数字系统包含一个具有并行加载功能的2位同步二进制加法计数器。计数器的状态由输出 $Q_1Q_0$ 表示。该计数器有两个数据输入 $D_1$ 和 $D_0$，以及一个高电平有效的同步加载使能信号 `Load`。计数器的行为由系统时钟信号 `CLK` 上升沿之前的 `Load` 信号决定：\n\n- 如果 `Load` 为高电平（逻辑1），在 `CLK` 的下一个上升沿，计数器会从数据输入加载值，使得新状态变为 $Q_1Q_0 = D_1D_0$。\n- 如果 `Load` 为低电平（逻辑0），在 `CLK` 的下一个上升沿，计数器会将其当前值加一。计数序列为 00, 01, 10, 11，然后回绕到 00。\n\n计数器初始状态为 $Q_1Q_0 = 00$。系统经历一个包含六个时钟上升沿的序列。在每个对应的时钟沿之前，`Load` 信号和数据输入 $D_1D_0$ 的值保持稳定如下：\n\n- 时钟沿 1 之前：`Load` = 1, $D_1D_0$ = 10\n- 时钟沿 2 之前：`Load` = 0\n- 时钟沿 3 之前：`Load` = 0\n- 时钟沿 4 之前：`Load` = 1, $D_1D_0$ = 01\n- 时钟沿 5 之前：`Load` = 0\n- 时钟沿 6 之前：`Load` = 0\n\n在第6个时钟上升沿之后，计数器的二进制状态 $Q_1Q_0$ 是什么？\n\nA. 00\n\nB. 01\n\nC. 10\n\nD. 11", "solution": "定义每个时钟上升沿的同步更新规则：\n$$\n(Q_1Q_0)^{+} =\n\\begin{cases}\nD_1D_0,  & \\text{如果 Load}=1, \\\\\n(Q_1Q_0)+1 \\pmod{4}, & \\text{如果 Load}=0,\n\\end{cases}\n$$\n其中 $(Q_1Q_0)$ 被解释为一个2位二进制数，结果写为一个2位二进制状态。\n\n初始状态为 $Q_1Q_0=00$。\n\n时钟沿 1：Load $=1$, $D_1D_0=10$。因此，\n$$\n(Q_1Q_0)^{+} = D_1D_0 = 10.\n$$\n新状态：$10$。\n\n时钟沿 2：Load $=0$。因此，\n$$\n10 \\to 11.\n$$\n新状态：$11$。\n\n时钟沿 3：Load $=0$。因此，\n$$\n11 \\to 00 \\quad (\\text{回绕})。\n$$\n新状态：$00$。\n\n时钟沿 4：Load $=1$, $D_1D_0=01$。因此，\n$$\n(Q_1Q_0)^{+} = D_1D_0 = 01.\n$$\n新状态：$01$。\n\n时钟沿 5：Load $=0$。因此，\n$$\n01 \\to 10.\n$$\n新状态：$10$。\n\n时钟沿 6：Load $=0$。因此，\n$$\n10 \\to 11.\n$$\n第六个时钟沿之后的新状态：$11$，对应选项D。", "answer": "$$\\boxed{D}$$", "id": "1925182"}, {"introduction": "并行加载功能不仅限于为计数器预设一个初始值。这个练习将展示其更强大的用途：实现任意的状态跳转，从而将一个标准计数器转变为一个可编程的状态机。你需要将一个算术函数 $(2 \\cdot Q_{val} + 3) \\pmod{16}$ 转换为具体的组合逻辑电路，这是数字系统设计中一项至关重要的技能。[@problem_id:1925204]", "problem": "一个专用的4位同步计数器正在被设计，用作加密模块中的状态生成器。该计数器的状态由4位向量 $Q = [Q_3, Q_2, Q_1, Q_0]$ 表示，其中 $Q_3$ 是最高有效位。该计数器有一个同步控制输入 `UPDATE`。\n\n计数器的行为定义如下：\n- 如果 `UPDATE` 信号为低电平 (0)，电路表现为标准的同步二进制加法计数器，在每个有效时钟沿上其状态递增，即 $Q_{next} = (Q_{current} + 1) \\pmod{16}$。\n- 如果 `UPDATE` 信号为高电平 (1)，计数器在下一个有效时钟沿执行并行加载操作。要加载的数据由4位向量 $D = [D_3, D_2, D_1, D_0]$ 表示，是当前状态 $Q$ 的一个函数。该函数由算术表达式 $D = (2 \\cdot Q_{val} + 3) \\pmod{16}$ 给出，其中 $Q_{val}$ 是当前状态 $Q$ 的十进制值。\n\n您的任务是确定并行加载路径所需的组合逻辑。具体来说，就是根据当前状态位 $Q_3, Q_2, Q_1,$ 和 $Q_0$，求出加载数据最高有效位 $D_3$ 的最小化“积之和”（SOP）布尔表达式。在您的表达式中，使用 `+` 表示“或”运算，乘法（并列）表示“与”运算，上划线表示“非”运算（例如 $\\overline{A}$）。", "solution": "问题要求为生成并行加载输入位 $D_3$ 的逻辑电路提供最小化的“积之和”（SOP）表达式。加载值 $D$ 由算术函数 $D = (2 \\cdot Q_{val} + 3) \\pmod{16}$ 定义，其中 $Q_{val}$ 是4位状态 $Q = [Q_3, Q_2, Q_1, Q_0]$ 的十进制表示。\n\n首先，我们从位级分析这个算术函数。状态 $Q$ 是一个4位二进制数。\n在二进制中，运算 $2 \\cdot Q_{val}$ 等效于对 $Q$ 的位进行逻辑左移。\n如果 $Q = Q_3Q_2Q_1Q_0$，则1位左移会得到5位二进制数 $Q_3Q_2Q_1Q_00$。\n\n该运算是模16的，这意味着我们只关心结果的低4位。当我们执行左移时，最高有效位 $Q_3$ 会被移出4位的范围。\n因此，$2 \\cdot Q_{val} \\pmod{16}$ 由4位二进制数 $Q_2Q_1Q_00$ 表示。\n\n接下来，我们必须将结果加上3。十进制值3在4位二进制中表示为 $0011$。\n因此，完整的运算 $D = (2 \\cdot Q_{val} + 3) \\pmod{16}$ 可以通过一个4位二进制加法来实现：\n$$\n\\begin{array}{ccccc}\n   Q_2 & Q_1 & Q_0 & 0 \\\\\n+  0 & 0 & 1 & 1 \\\\\n\\hline\n   D_3 & D_2 & D_1 & D_0 \\\\\n\\end{array}\n$$\n模16运算意味着从最高有效位位置产生的任何进位都将被舍弃。\n\n现在我们可以使用每个位位置 $i$ 上的全加器方程来推导每个输出位 $D_i$ 的逻辑：\n$S_i = A_i \\oplus B_i \\oplus C_{in,i}$\n$C_{out,i} = A_i B_i + A_i C_{in,i} + B_i C_{in,i}$\n\n设相加的两个数为 $A = Q_2Q_1Q_00$ 和 $B = 0011$。\n加法器的输入位是：\n$A_3=Q_2, A_2=Q_1, A_1=Q_0, A_0=0$\n$B_3=0, B_2=0, B_1=1, B_0=1$\n设 $C_i$ 为第 $i$ 级的进位输入。初始进位输入 $C_0$ 为0。\n\n**位 0：**\n$D_0 = A_0 \\oplus B_0 \\oplus C_0 = 0 \\oplus 1 \\oplus 0 = 1$\n$C_1 = A_0 B_0 + A_0 C_0 + B_0 C_0 = (0 \\cdot 1) + (0 \\cdot 0) + (1 \\cdot 0) = 0$\n\n**位 1：**\n$D_1 = A_1 \\oplus B_1 \\oplus C_1 = Q_0 \\oplus 1 \\oplus 0 = \\overline{Q_0}$\n$C_2 = A_1 B_1 + A_1 C_1 + B_1 C_1 = (Q_0 \\cdot 1) + (Q_0 \\cdot 0) + (1 \\cdot 0) = Q_0$\n\n**位 2：**\n$D_2 = A_2 \\oplus B_2 \\oplus C_2 = Q_1 \\oplus 0 \\oplus Q_0 = Q_1 \\oplus Q_0$\n$C_3 = A_2 B_2 + A_2 C_2 + B_2 C_2 = (Q_1 \\cdot 0) + (Q_1 \\cdot Q_0) + (0 \\cdot Q_0) = Q_1 Q_0$\n\n**位 3 (所需输出)：**\n$D_3 = A_3 \\oplus B_3 \\oplus C_3 = Q_2 \\oplus 0 \\oplus (Q_1 Q_0) = Q_2 \\oplus (Q_1 Q_0)$\n\n问题要求 $D_3$ 的最小化“积之和”（SOP）表达式。我们展开异或表达式：\n$D_3 = Q_2 \\oplus (Q_1 Q_0)$\n使用异或的定义，$X \\oplus Y = X\\overline{Y} + \\overline{X}Y$：\n$D_3 = Q_2 \\overline{(Q_1 Q_0)} + \\overline{Q_2} (Q_1 Q_0)$\n对第一项应用德摩根定律，$\\overline{(Q_1 Q_0)} = \\overline{Q_1} + \\overline{Q_0}$：\n$D_3 = Q_2 (\\overline{Q_1} + \\overline{Q_0}) + \\overline{Q_2} Q_1 Q_0$\n分配 $Q_2$ 后得到最终的SOP表达式：\n$D_3 = Q_2 \\overline{Q_1} + Q_2 \\overline{Q_0} + \\overline{Q_2} Q_1 Q_0$\n\n此表达式是最小化的SOP形式。值得注意的是，输入 $Q_3$ 不影响任何 $D$ 位的计算，这是模16系统中逻辑左移的直接结果。\n\n为完整起见，其他位的SOP表达式如下：\n$D_0 = 1$\n$D_1 = \\overline{Q_0}$\n$D_2 = Q_1 \\overline{Q_0} + \\overline{Q_1} Q_0$\n\n问题明确要求的是 $D_3$ 的表达式。", "answer": "$$\\boxed{Q_2 \\overline{Q_1} + Q_2 \\overline{Q_0} + \\overline{Q_2} Q_1 Q_0}$$", "id": "1925204"}, {"introduction": "本练习是一个综合性的设计挑战，要求你构建一个多功能计数器，其行为由多个具有明确优先级的控制信号决定。你需要整合加载、保持、递增和递减等多种操作，这模拟了真实世界中集成电路的设计过程。完成此项任务将检验你根据一系列规格要求，综合出复杂布尔表达式的能力。[@problem_id:1925209]", "problem": "您的任务是为一个定制的4位同步计数器设计控制逻辑。该计数器的状态由四位表示，$Q_3, Q_2, Q_1, Q_0$，其中 $Q_0$ 是最低有效位。该计数器由D型触发器构成，这意味着在下一个时钟周期，每个位 $Q_i$ 的值由相应输入 $D_i$ 的逻辑电平决定。\n\n该计数器必须支持由三个高电平有效控制信号决定的几种操作：`L`（加载）、`E`（使能）和 `U`（向上/向下方向）。这些操作的优先级如下：\n\n1.  **并行加载（最高优先级）：** 如果 `L` 为高电平 (1)，计数器会忽略所有其他控制信号。在下一个有效时钟沿，计数器的状态 $Q_3Q_2Q_1Q_0$ 将被加载为来自四个并行数据输入 $P_3, P_2, P_1, P_0$ 的值。\n2.  **保持状态：** 如果 `L` 为低电平 (0) 且 `E` 为低电平 (0)，计数器保持其当前状态。\n3.  **计数（最低优先级）：** 如果 `L` 为低电平 (0) 且 `E` 为高电平 (1)，计数器执行计数操作。计数方向由 `U` 信号决定：\n    *   如果 `U=1`，计数器将其值递增（向上计数）。例如，状态 `0101` 变为 `0110`。\n    *   如果 `U=0`，计数器将其值递减（向下计数）。例如，状态 `0101` 变为 `0100`。\n    计数操作包括回绕行为（例如，从 `1111` 向上计数时，下一个状态是 `0000`；从 `0000` 向下计数时，下一个状态是 `1111`）。\n\n您的任务是推导与状态位 $Q_2$ 对应的触发器的输入 $D_2$ 的完整布尔逻辑表达式。请以“积之和”的形式给出您的答案。该表达式应根据状态位 $Q_2, Q_1, Q_0$、并行输入 $P_2$ 以及控制信号 $L, E, U$ 来构建。", "solution": "令 $D_{2}$ 表示产生 $Q_{2}$ 的触发器的下一状态输入。具有优先级的控制行为如下：\n1) 如果 $L=1$，并行加载将覆盖所有其他操作，因此 $D_{2}=P_{2}$。\n2) 如果 $L=0$ 且 $E=0$，计数器保持其状态，因此 $D_{2}=Q_{2}$。\n3) 如果 $L=0$ 且 $E=1$，计数器进行计数。对于向上计数，当来自较低位的进位存在时，即当 $Q_{1}Q_{0}=1$ 时，位 $Q_{2}$ 翻转。因此，对于向上计数，\n$$\nD_{2}=\\;Q_{2}\\oplus(Q_{1}Q_{0}) \\;=\\; Q_{2}\\overline{Q_{1}Q_{0}}+\\overline{Q_{2}}\\,Q_{1}Q_{0}\n\\;=\\; Q_{2}\\overline{Q_{1}}+Q_{2}\\overline{Q_{0}}+\\overline{Q_{2}}\\,Q_{1}Q_{0}.\n$$\n对于向下计数，当来自较低位的借位存在时，即当 $\\overline{Q_{1}}\\overline{Q_{0}}=1$ 时，位 $Q_{2}$ 翻转。因此，对于向下计数，\n$$\nD_{2}=\\;Q_{2}\\oplus(\\overline{Q_{1}}\\overline{Q_{0}}) \\;=\\; Q_{2}\\,\\overline{\\overline{Q_{1}}\\overline{Q_{0}}}+\\overline{Q_{2}}\\,\\overline{Q_{1}}\\overline{Q_{0}}\n\\;=\\; Q_{2}(Q_{1}+Q_{0})+\\overline{Q_{2}}\\,\\overline{Q_{1}}\\overline{Q_{0}}\n\\;=\\; Q_{2}Q_{1}+Q_{2}Q_{0}+\\overline{Q_{2}}\\,\\overline{Q_{1}}\\overline{Q_{0}}.\n$$\n在 $L=0$ 和 $E=1$ 时使用 $U$ 来选择方向，并结合 $L$ 的优先级，完整的逻辑是\n$$\nD_{2}=L\\,P_{2}+\\overline{L}\\,\\overline{E}\\,Q_{2}+\\overline{L}\\,E\\Big[U\\big(Q_{2}\\overline{Q_{1}}+Q_{2}\\overline{Q_{0}}+\\overline{Q_{2}}\\,Q_{1}Q_{0}\\big)+\\overline{U}\\big(Q_{2}Q_{1}+Q_{2}Q_{0}+\\overline{Q_{2}}\\,\\overline{Q_{1}}\\overline{Q_{0}}\\big)\\Big].\n$$\n展开为显式的积之和形式可得\n$$\nD_{2}\n= L P_{2}\n+ \\overline{L}\\,\\overline{E}\\,Q_{2}\n+ \\overline{L}\\,E\\,U\\,Q_{2}\\,\\overline{Q_{1}}\n+ \\overline{L}\\,E\\,U\\,Q_{2}\\,\\overline{Q_{0}}\n+ \\overline{L}\\,E\\,U\\,\\overline{Q_{2}}\\,Q_{1}\\,Q_{0}\n+ \\overline{L}\\,E\\,\\overline{U}\\,Q_{2}\\,Q_{1}\n+ \\overline{L}\\,E\\,\\overline{U}\\,Q_{2}\\,Q_{0}\n+ \\overline{L}\\,E\\,\\overline{U}\\,\\overline{Q_{2}}\\,\\overline{Q_{1}}\\,\\overline{Q_{0}}.\n$$\n这就是根据 $Q_{2},Q_{1},Q_{0},P_{2},L,E,U$ 且具有正确优先级行为的所要求的积之和表达式。", "answer": "$$\\boxed{L P_{2}+\\overline{L}\\,\\overline{E}\\,Q_{2}+\\overline{L}\\,E\\,U\\,Q_{2}\\,\\overline{Q_{1}}+\\overline{L}\\,E\\,U\\,Q_{2}\\,\\overline{Q_{0}}+\\overline{L}\\,E\\,U\\,\\overline{Q_{2}}\\,Q_{1}\\,Q_{0}+\\overline{L}\\,E\\,\\overline{U}\\,Q_{2}\\,Q_{1}+\\overline{L}\\,E\\,\\overline{U}\\,Q_{2}\\,Q_{0}+\\overline{L}\\,E\\,\\overline{U}\\,\\overline{Q_{2}}\\,\\overline{Q_{1}}\\,\\overline{Q_{0}}}$$", "id": "1925209"}]}
{"hands_on_practices": [{"introduction": "这项练习将聚焦于并行输入并行输出（PIPO）寄存器的两个最基本操作：并行加载数据和保持现有数据。通过在变化的控制信号下，追踪寄存器在连续时钟周期中的状态，你将对其核心行为建立坚实的理解。本次练习是后续更复杂应用的基础。[@problem_id:1950446]", "problem": "一个4位同步数字寄存器有一个4位并行数据输入 $D = D_3D_2D_1D_0$ 和一个4位并行输出 $Q = Q_3Q_2Q_1Q_0$。寄存器的状态在时钟信号的上升沿更新。寄存器的行为由一个名为 `LOAD` 的信号控制。寄存器的下一个状态，记为 $Q_{next}$，由当前状态 $Q_{current}$ 和输入数据 $D$ 决定，如下所示：\n- 如果 `LOAD` 为高电平（逻辑1），寄存器在下一个时钟沿执行并行加载操作：$Q_{next} = D$。\n- 如果 `LOAD` 为低电平（逻辑0），寄存器在下一个时钟沿保持其当前值：$Q_{next} = Q_{current}$。\n\n考虑以下事件序列：\n1. 最初，在任何时钟脉冲之前，寄存器的输出为 $Q = 1011_2$。\n2. 并行数据输入保持恒定在 $D = 1101_2$。\n3. `LOAD` 信号在第一个时钟周期内设置为高电平，然后在第二个时钟周期内设置为低电平。\n4. 系统被时钟触发两次。\n\n在第二个时钟脉冲之后，输出 $Q$ 的4位二进制值是多少？请以4位二进制字符串（例如，1001）的形式表示你的答案。", "solution": "我们根据指定的控制方式对每个时钟上升沿的同步寄存器更新进行建模：\n- 如果LOAD为高电平，则在下一个上升沿 $Q_{next} = D$。\n- 如果LOAD为低电平，则在下一个上升沿 $Q_{next} = Q_{current}$（保持）。\n\n令 $Q^{(k)}$ 表示第 $k$ 个时钟脉冲后寄存器的输出。任何时钟脉冲之前的初始条件由下式给出\n$$\nQ^{(0)} = 1011_{2}.\n$$\n输入数据是恒定的，\n$$\nD = 1101_{2}.\n$$\n在第一个时钟周期内，LOAD为高电平。因此，在第一个上升沿，\n$$\nQ^{(1)} = Q_{next} = D = 1101_{2}.\n$$\n在第二个时钟周期内，LOAD为低电平。因此，在第二个上升沿，寄存器保持其当前值：\n$$\nQ^{(2)} = Q_{next} = Q_{current} = Q^{(1)} = 1101_{2}.\n$$\n因此，在第二个时钟脉冲之后，输出为 $1101$。", "answer": "$$\\boxed{1101}$$", "id": "1950446"}, {"introduction": "在了解了PIPO寄存器是*如何*工作之后，下一个练习将挑战你思考它*为什么*要这样设计。通过分析一个常见的设计约束——单一的全局`LOAD`信号——你将探索标准PIPO寄存器的架构局限性。这个概念性问题对于理解数字设计中的权衡以及高级功能为何需要更复杂的控制逻辑至关重要。[@problem_id:1950439]", "problem": "一位数字系统工程师正在为一个控制系统设计一个专用的4位数据缓冲器。一个标准的4位并行输入、并行输出（PIPO）寄存器可供使用。该PIPO寄存器由四个边沿触发的D型触发器构成，有四个并行数据输入（$D_3, D_2, D_1, D_0$）和四个并行数据输出（$Q_3, Q_2, Q_1, Q_0$）。所有四个触发器都连接到一个公共时钟（CLK）信号。该寄存器的加载行为由一条对所有触发器同样公共的高电平有效加载使能（LOAD）控制线来管理。当LOAD被置位（逻辑高电平）时，并行输入端的数据在下一个有效时钟沿被加载到触发器中。当LOAD无效（逻辑低电平）时，触发器会保持其当前存储的值，忽略输入。\n\n设计规范要求一个“选择性更新”操作。在此操作期间，缓冲器的两个最高有效位（MSB），即对应输出$Q_3$和$Q_2$的位，必须用来自其各自输入$D_3$和$D_2$的新值进行更新。同时，两个最低有效位（LSB），即对应输出$Q_1$和$Q_0$的位，必须保持其当前存储的值，不受输入$D_1$和$D_0$上任何数据的影响。工程师尝试使用前述的单个标准PIPO寄存器来实现此功能。\n\n下列哪个陈述正确地指出了使用单个标准PIPO寄存器的这种实现方式无法实现所需选择性更新的根本原因？请选择唯一最佳答案。\n\nA. 公共时钟信号迫使所有触发器在每个有效沿改变其状态，从而无法保持任何位。\n\nB. LSB和MSB的触发器传播延迟固有不同，导致竞争条件，从而破坏数据。\n\nC. PIPO寄存器只能串行加载数据；它不能并行更新多个位。\n\nD. 单个共享的LOAD使能信号全局作用于所有触发器，从而无法在同一时钟周期内混合执行加载和保持操作。\n\nE. D型触发器无法保持其先前的状态，在时钟作用下总是将D输入传递到Q输出。", "solution": "设公共加载使能为 $L$，公共时钟为 CLK，并考虑每个位 $i \\in \\{3,2,1,0\\}$，其输入为 $D_{i}$，输出为 $Q_{i}$。对于带有同步加载使能的标准边沿触发D型触发器，每个位的次态函数由相同的使能信号 $L$ 控制：\n$$\nQ_{i}^{+} = L D_{i} + \\overline{L}\\, Q_{i}.\n$$\n这个布尔关系表明，当 $L=1$（LOAD置位）时，次态等于输入（$Q_{i}^{+}=D_{i}$）；当 $L=0$（LOAD无效）时，次态等于现态（$Q_{i}^{+}=Q_{i}$），即保持。\n\n由于在单个PIPO寄存器中，相同的 $L$ 对所有四个触发器都是公共的，因此在给定的时钟沿，所有位的转换都由 $L$ 的单个值全局决定：\n- 如果 $L=1$，则对于所有 $i \\in \\{3,2,1,0\\}$，$Q_{i}^{+}=D_{i}$，因此所有四位都加载。\n- 如果 $L=0$，则对于所有 $i \\in \\{3,2,1,0\\}$，$Q_{i}^{+}=Q_{i}$，因此所有四位都保持。\n\n所需的选择性更新要求在同一时钟沿上，$Q_{3}$ 和 $Q_{2}$ 必须加载（$Q_{3}^{+}=D_{3}$ 和 $Q_{2}^{+}=D_{2}$），而同时 $Q_{1}$ 和 $Q_{0}$ 必须保持（$Q_{1}^{+}=Q_{1}$ 和 $Q_{0}^{+}=Q_{0}$）。根据上述方程，实现 $Q_{3}^{+}=D_{3}$ 和 $Q_{2}^{+}=D_{2}$ 需要 $L=1$，但实现 $Q_{1}^{+}=Q_{1}$ 和 $Q_{0}^{+}=Q_{0}$ 需要 $L=0$。一个单一、共享的 $L$ 不能在同一时钟沿上同时为 $1$ 和 $0$。因此，使用一个标准的PIPO寄存器和一条单一的全局LOAD线，不可能在同一周期内实现加载和保持的混合操作。\n\n评估选项：\n- A 是不正确的，因为当同步加载路径被禁用时，边沿触发的D型触发器确实会保持状态；仅时钟本身不会强制状态改变。\n- B 是不正确的；传播延迟差异并不是导致在使用单一全局使能信号时无法实现选择性更新的根本原因。\n- C 是不正确的；PIPO寄存器本身就支持并行加载。\n- D 是正确的；单个共享的LOAD使能信号全局作用，阻止了在同一时钟沿内混合加载/保持行为。\n- E 是不正确的；当输入路径未被同步使能信号选通时，D型触发器可以保持其先前的状态。\n\n因此，根本原因在于单个LOAD信号的全局性。", "answer": "$$\\boxed{D}$$", "id": "1950439"}, {"introduction": "在加载和保持概念的基础上，这项练习引入了“移位”功能，这是许多并行输入并行输出（PIPO）移位寄存器的一个关键特性。你将分析一个结合了并行加载操作和随后的右移操作的场景。这展示了这些组件在数据处理、串行化和流水线等应用中的多功能性。[@problem_id:1950481]", "problem": "考虑一个5位同步数字设备，称为并行输入并行输出 (PIPO) 移位寄存器。该寄存器由五个触发器组成，其输出标记为 $Q_4$ (最高有效位) 到 $Q_0$ (最低有效位)。该设备由一个时钟信号 (`CLK`) 和一个高电平有效加载使能信号 (`LOAD`) 控制。所有状态变化都在 `CLK` 信号的上升沿发生。\n\n该设备有两种由 `LOAD` 信号决定的工作模式：\n1.  **加载模式 (Load Mode):** 当 `LOAD` 为高电平 (1) 时，在下一个时钟上升沿，并行输入线 $D_4D_3D_2D_1D_0$ 上的二进制数据被加载到寄存器中，使得 $Q_i$ 取值为 $D_i$。\n2.  **移位模式 (Shift Mode):** 当 `LOAD` 为低电平 (0) 时，在下一个时钟上升沿，寄存器执行右移操作。在此模式下，串行输入 (`SI`) 的值被移入 $Q_4$ 位置，原在 $Q_4$ 的值被移到 $Q_3$，原在 $Q_3$ 的值被移到 $Q_2$，以此类推。原在 $Q_0$ 的值被移出。\n\n一个特定的操作序列被应用于该寄存器。在第一个时钟上升沿，并行输入为 $D = 10110$ 且 `LOAD` 信号为高电平。对于所有后续的时钟上升沿（第二个、第三个、第四个等），`LOAD` 信号保持低电平，并且串行输入 `SI` 恒定保持为逻辑1。\n\n在第四个时钟上升沿之后，寄存器输出的二进制值 $Q_4Q_3Q_2Q_1Q_0$ 是多少？\n\nA. 11110\n\nB. 11101\n\nC. 00010\n\nD. 01101\n\nE. 10110", "solution": "一个5位PIPO寄存器根据控制输入在每个时钟上升沿更新其状态。用 $Q_{i}[n]$ 表示第 $n$ 个上升沿之后 $Q_{i}$ 的值。\n\n在加载周期（LOAD为高电平）中，更新法则是\n$$\nQ_{i}[n]=D_{i}.\n$$\n在右移周期（LOAD为低电平）中，同步状态更新方程为\n$$\nQ_{4}[n]=\\text{SI},\\quad Q_{3}[n]=Q_{4}[n-1],\\quad Q_{2}[n]=Q_{3}[n-1],\\quad Q_{1}[n]=Q_{2}[n-1],\\quad Q_{0}[n]=Q_{1}[n-1].\n$$\n\n第一个上升沿 (LOAD 为高电平, $D=10110$):\n$$\nQ_{4}Q_{3}Q_{2}Q_{1}Q_{0}[1]=10110.\n$$\n\n第二个上升沿 (LOAD 为低电平, $\\text{SI}=1$):\n$$\nQ_{4}[2]=1,\\ Q_{3}[2]=Q_{4}[1]=1,\\ Q_{2}[2]=Q_{3}[1]=0,\\ Q_{1}[2]=Q_{2}[1]=1,\\ Q_{0}[2]=Q_{1}[1]=1,\n$$\n所以\n$$\nQ_{4}Q_{3}Q_{2}Q_{1}Q_{0}[2]=11011.\n$$\n\n第三个上升沿 (LOAD 为低电平, $\\text{SI}=1$):\n$$\nQ_{4}[3]=1,\\ Q_{3}[3]=Q_{4}[2]=1,\\ Q_{2}[3]=Q_{3}[2]=1,\\ Q_{1}[3]=Q_{2}[2]=0,\\ Q_{0}[3]=Q_{1}[2]=1,\n$$\n所以\n$$\nQ_{4}Q_{3}Q_{2}Q_{1}Q_{0}[3]=11101.\n$$\n\n第四个上升沿 (LOAD 为低电平, $\\text{SI}=1$):\n$$\nQ_{4}[4]=1,\\ Q_{3}[4]=Q_{4}[3]=1,\\ Q_{2}[4]=Q_{3}[3]=1,\\ Q_{1}[4]=Q_{2}[3]=1,\\ Q_{0}[4]=Q_{1}[3]=0,\n$$\n所以\n$$\nQ_{4}Q_{3}Q_{2}Q_{1}Q_{0}[4]=11110.\n$$\n\n因此，在第四个时钟上升沿之后，寄存器中的值为 $11110$，对应选项A。", "answer": "$$\\boxed{A}$$", "id": "1950481"}]}
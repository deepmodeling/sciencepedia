{"hands_on_practices": [{"introduction": "这项练习是数字设计技能的一项基本考验。它将布尔代数理论与物理实现联系起来，旨在仅用与非门（NAND）这种通用逻辑门来构建一个完整的全减器，同时产生差值 $D$ 和借位输出 $B_{out}$。这是一个巩固基本原理的经典问题，能够加深你对逻辑功能通用性的理解。[@problem_id:1939071]", "problem": "全减器是一种基本的组合逻辑电路，用于执行三个比特的减法运算。它有三个输入：被减数位 $A$、减数位 $B$ 以及来自前一个较低有效位的输入借位 $B_{in}$。它产生两个输出：差值位 $D$ 和用于下一个较高有效位的输出借位 $B_{out}$。其关系由算术运算 $A - B - B_{in}$ 决定，结果是一个由数对 ($B_{out}$, $D$) 表示的两位二进制数。例如，如果 $A=0$，$B=1$，$B_{in}=1$，那么 $0 - 1 - 1 = -2$，在这种二进制表示法中，即为 $B_{out}=1$ 和 $D=0$。\n\n你的任务是设计一个电路，该电路仅使用双输入与非门来实现一个全减器。假设你有无限供应的这种门电路。确定构建一个能从输入 $A$、$B$ 和 $B_{in}$ 正确生成差值位 $D$ 和输出借位 $B_{out}$ 的全减器电路所需的最少双输入与非门数量。", "solution": "我们寻求一个仅使用双输入与非门实现的全减器，其输入为 $A$、$B$、$B_{in}$，输出为 $D$ 和 $B_{out}$。算术关系为 $A - B - B_{in}$，得到差值位 $D$ 和输出借位 $B_{out}$。\n\n首先，写出规范的布尔表达式：\n- 差值位是三个输入的奇校验：\n$$D = A \\oplus B \\oplus B_{in}$$\n- 一个标准的、用于与非门实现的借位表达式是：\n$$B_{out} = \\bar{A}B + B_{in}\\overline{(A \\oplus B)}$$\n为了高效地用与非门实现，我们将先计算一次 $X_1 = A \\oplus B$，并复用其内部的与非门信号，用一个额外的与非门来实现 $B_{out}$。\n\n使用最少的4个与非门结构来实现 $X_1 = A \\oplus B$。定义中间的与非门节点：\n$N_1 = \\overline{AB}$, $N_2 = \\overline{A N_1}$, $N_3 = \\overline{B N_1}$, $X_1 = \\overline{N_2 N_3}$。\n可以通过布尔代数验证，$N_2 = \\bar{A}+B$ 和 $N_3=A+\\bar{B}$，并且 $X_1 = A \\oplus B$ 符合要求。\n\n接下来，使用相同的4与非门模式计算 $D = X_1 \\oplus B_{in}$，引入中间节点：\n$S_1=\\overline{X_1 B_{in}}$, $S_2=\\overline{X_1 S_1}$, $S_3=\\overline{B_{in}S_1}$, $D=\\overline{S_2 S_3}$。\n根据同样的推理，$D = X_1 \\oplus B_{in} = A \\oplus B \\oplus B_{in}$。\n\n现在使用已有的与非门节点来表示 $B_{out}$。从第一个异或模块中，我们有 $N_3=A+\\bar{B}$，所以 $\\overline{N_3}=\\bar{A}B$。从第二个异或模块中，我们有 $S_3 = \\overline{B_{in}S_1} = \\overline{B_{in}(\\overline{X_1 B_{in}})} = \\bar{B_{in}} + X_1 B_{in} = \\bar{B_{in}} + X_1$。因此 $\\overline{S_3}=B_{in}\\overline{X_1} = B_{in}\\overline{(A \\oplus B)}$。\n利用这两个事实，我们可以用一个与非门实现 $B_{out}$：\n$B_{out} = \\bar{A}B + B_{in}\\overline{(A \\oplus B)} = \\overline{N_3} + \\overline{S_3} = \\overline{N_3 S_3}$。\n因此，$B_{out}$ 可通过一个以 $N_3$ 和 $S_3$ 为输入的最终双输入与非门获得。\n\n门电路数量总结：\n- $X_1 = A \\oplus B$ 使用 $4$ 个与非门。\n- $D = X_1 \\oplus B_{in}$ 使用 $4$ 个与非门。\n- $B_{out}=\\overline{N_3 S_3}$ 使用 $1$ 个额外的与非门，复用了两个异或网络中的 $N_3$ 和 $S_3$。\n\n双输入与非门的总数为 $4+4+1=9$。一个下界论证：一个双输入异或门至少需要 $4$ 个双输入与非门，因此计算 $D=(A\\oplus B)\\oplus B_{in}$ 至少需要 $8$ 个与非门。由于 $B_{out}$ 与这两个异或网络中的任何一个中间节点都不完全相同，因此至少需要再多一个双输入与非门来构成它。因此，$9$ 是最小值，上述结构实现了这个最小值。", "answer": "$$\\boxed{9}$$", "id": "1939071"}, {"introduction": "在实际设计中，工程师们通常使用像多路选择器（MUX）这样的标准组件，而不是从单个逻辑门开始搭建。这项练习要求你将全减器的借位输出逻辑 $B_{out}$ 映射到一个4对1多路选择器上，这是一种常见且高效的设计技巧。通过这个练习，你将学会如何根据选择信号 $A$ 和 $B$ 来配置数据输入，从而用功能模块实现复杂的逻辑。[@problem_id:1939069]", "problem": "在一个数字逻辑设计实验中，你的任务是使用一组有限的组件来实现一个特定的布尔函数。你的目标是实现一个全减器的借位输出 ($B_{out}$) 逻辑。全减器计算操作 $A - B - B_{in}$，其中 $A$ 是被减数位，$B$ 是减数位，$B_{in}$ 是来自前一个、较低有效位的级的借位输入位。全减器的输出是差值位 $D$ 和借位输出位 $B_{out}$。\n\n你可用的硬件仅限于一个 4-1 多路复用器，没有其他逻辑门（如与门、或门或非门）。该多路复用器有四个数据输入 ($I_0, I_1, I_2, I_3$)、两条选择线 ($S_1, S_0$) 和一个输出 $Y$。\n\n对于这个实现，主输入 $A$ 和 $B$ 分别连接到选择线 $S_1$ 和 $S_0$。你的任务是确定连接到数据输入 $I_0, I_1, I_2,$ 和 $I_3$ 的正确信号，以便在多路复用器的输出 $Y$ 处正确地生成 $B_{out}$ 函数。这些数据输入唯一可用的信号是逻辑电平 '0' (低电平/地)、逻辑电平 '1' (高电平/Vcc) 以及主输入信号 $B_{in}$。\n\n下列哪个有序元组 $(I_0, I_1, I_2, I_3)$ 表示了 4-1 多路复用器数据输入的正确连接方式？\n\nA. $(B_{in}, B_{in}, 0, 1)$\nB. $(0, B_{in}, B_{in}, 1)$\nC. $(B_{in}, 1, 0, B_{in})$\nD. $(1, 0, B_{in}, B_{in})$\nE. $(0, 1, 1, B_{in})$", "solution": "我们要用一个选择线为 $S_1=A$ 和 $S_0=B$ 的 4-1 多路复用器来表示全减器的借位输出函数 $B_{out}$，该函数用 $A$、$B$ 和 $B_{in}$ 表示。全减器借位的标准布尔表达式为\n$$\nB_{out}=\\overline{A}(B+B_{in})+BB_{in}=\\overline{A}B+\\overline{A}B_{in}+BB_{in}.\n$$\n当 $(S_1, S_0)$ 分别为 $(0,0),(0,1),(1,0),(1,1)$ 时，4-1 多路复用器分别输出 $I_0, I_1, I_2, I_3$。在 $S_1=A$ 和 $S_0=B$ 的情况下，我们对每一组固定的 $(A,B)$ 值计算 $B_{out}$，以确定所需的数据输入信号（作为 $B_{in}$ 的函数）：\n$$\n\\begin{aligned}\nA=0, B=0:\\quad B_{out}=\\overline{0}(0+B_{in})+0\\cdot B_{in}=1\\cdot B_{in}+0=B_{in}\\ \\Rightarrow\\ I_0=B_{in},\\\\\nA=0, B=1:\\quad B_{out}=\\overline{0}(1+B_{in})+1\\cdot B_{in}=1+ B_{in}=1\\ \\Rightarrow\\ I_1=1,\\\\\nA=1, B=0:\\quad B_{out}=\\overline{1}(0+B_{in})+0\\cdot B_{in}=0+0=0\\ \\Rightarrow\\ I_2=0,\\\\\nA=1, B=1:\\quad B_{out}=\\overline{1}(1+B_{in})+1\\cdot B_{in}=0+B_{in}=B_{in}\\ \\Rightarrow\\ I_3=B_{in}.\n\\end{aligned}\n$$\n因此，正确的有序元组是 $(I_0, I_1, I_2, I_3)=(B_{in}, 1, 0, B_{in})$，这对应于选项 C。", "answer": "$$\\boxed{C}$$", "id": "1939069"}, {"introduction": "单个全减器只是一个构建模块，将它们串联起来就构成了行波借位减法器。这项练习将我们的思维从单个模块扩展到一个 $n$ 比特系统，其中性能至关重要。你将分析输入数 $A$ 和 $B$ 之间的何种关系会导致借位信号逐级传递，从而产生最长的传播延迟，这是设计和评估高速算术电路性能的一项关键技能。[@problem_id:1939084]", "problem": "在数字逻辑设计中，一个$n$位行波借位减法器是由$n$个全减器级联构成的。单个全减器级（索引为$i$）有三个输入：被减数位$A_i$、减数位$B_i$以及来自前一级的输入借位$B_{in,i}$。它产生两个输出：差值位$D_i$和输出借位$B_{out,i}$，后者作为下一级的输入借位，即$B_{in,i+1} = B_{out,i}$。对于整个$n$位运算，被减数为$A = A_{n-1}A_{n-2}...A_0$，减数为$B = B_{n-1}B_{n-2}...B_0$，且最低有效位级（第0级）的初始输入借位$B_{in,0}$保持为0。\n\n该减法器的总体速度受限于借位信号在级联电路中的传播。计算最终输出借位$B_{out,n-1}$的最坏情况延迟场景发生在借位信号必须顺序传播通过最大数量的级数时。当每一级$i$（从$i=0$到$n-1$）的输出借位都直接依赖于其输入借位$B_{in,i}$时，就形成了这条最大传播路径。\n\n下列$n$位被减数$A$和$n$位减数$B$之间的哪种关系能确保对所有$n$级都满足这种最坏情况传播条件？\n\nA. $A$和$B$的各位都相同，即对于所有$i \\in \\{0, ..., n-1\\}$，都有$A_i = B_i$。\nB. $A$的各位是$B$各位的逻辑反相，即对于所有$i \\in \\{0, ..., n-1\\}$，都有$A_i = \\overline{B_i}$。\nC. 被减数$A$为零（对所有$i$，$A_i=0$），减数$B$为最大无符号值（对所有$i$，$B_i=1$）。\nD. 被减数$A$是减数$B$的二的补码。", "solution": "要解决这个问题，我们必须首先建立单个全减器级$i$的输出借位信号$B_{out,i}$的逻辑表达式。如果$A_i - B_i - B_{in,i}$的计算结果为负，则输出借位位置位（等于1）。这在以下情况下发生：\n1.  $A_i=0, B_i=0, B_{in,i}=1$\n2.  $A_i=0, B_i=1, B_{in,i}=0$\n3.  $A_i=0, B_i=1, B_{in,i}=1$\n4.  $A_i=1, B_i=1, B_{in,i}=1$\n\n根据这些条件，我们可以写出$B_{out,i}$的积之和表达式：\n$$B_{out,i} = \\overline{A_i}\\overline{B_i}B_{in,i} + \\overline{A_i}B_i\\overline{B_{in,i}} + \\overline{A_i}B_iB_{in,i} + A_iB_iB_{in,i}$$\n\n这个表达式可以被简化。让我们将包含$B_{in,i}$的项分组：\n$$B_{out,i} = \\overline{A_i}B_i\\overline{B_{in,i}} + (\\overline{A_i}\\overline{B_i} + \\overline{A_i}B_i + A_iB_i)B_{in,i}$$\n简化$B_{in,i}$的系数：\n$$(\\overline{A_i}\\overline{B_i} + \\overline{A_i}B_i + A_iB_i) = (\\overline{A_i}(\\overline{B_i} + B_i) + A_iB_i) = (\\overline{A_i} \\cdot 1 + A_iB_i) = \\overline{A_i} + A_iB_i$$\n使用吸收律 $X+ \\overline{X}Y = X+Y$，我们得到 $\\overline{A_i} + B_i$。\n所以$B_{out,i}$的表达式为：\n$$B_{out,i} = \\overline{A_i}B_i\\overline{B_{in,i}} + (\\overline{A_i} + B_i)B_{in,i}$$\n这种形式不是标准形式。一个更具洞察力的形式是“生成-传播”模型。让我们重新推导它。初始表达式为 $B_{out,i} = \\overline{A_i}\\overline{B_i}B_{in,i} + \\overline{A_i}B_i\\overline{B_{in,i}} + \\overline{A_i}B_iB_{in,i} + A_iB_iB_{in,i}$。\n让我们通过合并项来简化：\n$$B_{out,i} = \\overline{A_i}B_i(\\overline{B_{in,i}} + B_{in,i}) + \\overline{A_i}\\overline{B_i}B_{in,i} + A_iB_iB_{in,i}$$\n$$B_{out,i} = \\overline{A_i}B_i + (\\overline{A_i}\\overline{B_i} + A_iB_i)B_{in,i}$$\n项 $\\overline{A_i}\\overline{B_i} + A_iB_i$ 是XNOR（同或）的逻辑表达式，即XOR（异或）的非：$\\overline{A_i \\oplus B_i}$。\n因此，我们可以将输出借位方程写为：\n$$B_{out,i} = \\overline{A_i}B_i + \\overline{(A_i \\oplus B_i)}B_{in,i}$$\n\n这个方程是标准的生成-传播形式，$B_{out,i} = g_i + p_i B_{in,i}$，其中：\n-   $g_i = \\overline{A_i}B_i$ 是“借位生成”项。如果 $g_i=1$，则该级内部会生成一个输出借位，而与输入借位无关。这在 $A_i=0$ 和 $B_i=1$ 时发生。\n-   $p_i = \\overline{A_i \\oplus B_i}$ 是“借位传播”项。如果 $p_i=1$，则输出借位 $B_{out,i}$ 将等于输入借位 $B_{in,i}$（假设 $g_i=0$）。这在 $A_i=B_i$ 时发生。\n\n问题指出，最坏情况延迟场景发生在每一级的输出借位 $B_{out,i}$ 依赖于其输入借位 $B_{in,i}$ 时。为了使 $B_{out,i}$ 依赖于 $B_{in,i}$，电路必须处于“传播”模式。这意味着传播项 $p_i$ 必须为1，且生成项 $g_i$ 必须为0（否则，如果 $g_i=1$，则 $B_{out,i}=1$ 而与 $B_{in,i}$ 无关）。\n\n让我们分析这些条件：\n1.  我们需要该级进行传播，所以 $p_i = 1$。\n    $$p_i = \\overline{A_i \\oplus B_i} = 1 \\implies A_i \\oplus B_i = 0$$\n    这仅在 $A_i = B_i$ 时为真。\n\n2.  我们需要该级本身不产生借位，所以 $g_i = 0$。\n    $$g_i = \\overline{A_i}B_i = 0$$\n    此条件排除了 $(A_i, B_i) = (0, 1)$ 的情况。\n\n现在，让我们看看第一个条件（$A_i=B_i$）是否足以满足这两个要求。\n如果 $A_i=B_i$，则数对 $(A_i, B_i)$ 有两种可能：$(0,0)$ 或 $(1,1)$。\n-   如果 $(A_i, B_i) = (0,0)$：$p_i = \\overline{0 \\oplus 0} = 1$。生成项为 $g_i = \\overline{0} \\cdot 0 = 0$。\n-   如果 $(A_i, B_i) = (1,1)$：$p_i = \\overline{1 \\oplus 1} = 1$。生成项为 $g_i = \\overline{1} \\cdot 1 = 0$。\n\n在 $A_i=B_i$ 的两种情况下，我们都得到 $p_i=1$ 和 $g_i=0$。\n将这些值代入借位方程：\n$$B_{out,i} = g_i + p_i B_{in,i} = 0 + 1 \\cdot B_{in,i} = B_{in,i}$$\n这表明如果 $A_i=B_i$，该级的输出借位与其输入借位完全相同。这就是借位传播的定义。\n\n问题要求此条件在行波借位减法器的所有$n$级（从$i=0$到$i=n-1$）都成立，以形成最长的可能传播链。因此，关系必须是：\n$$A_i = B_i \\text{ 对于所有 } i \\in \\{0, ..., n-1\\}$$\n这意味着$n$位数$A$必须与$n$位数$B$完全相同。这对应于选项A。", "answer": "$$\\boxed{A}$$", "id": "1939084"}]}
{"hands_on_practices": [{"introduction": "本节的第一个练习旨在解决数字设计中的一个基本问题：资源规划。当手头只有小型元件，但需要构建一个大型逻辑电路时，我们如何系统地计算所需元件的数量？通过这个练习，你将学会如何分层计算构建一个大型多路选择器所需的小型多路选择器总数，这是设计可扩展系统的关键技能。[@problem_id:1920031]", "problem": "一位数字系统工程师的任务是设计一个需要具有1024个数据输入的单个大型多路复用器（MUX）的电路。零件库存中唯一可用的组件是足够数量的8选1 MUX。为了实现所需的1024选1功能，工程师必须通过级联可用的8选1 MUX来构建一个多级电路。这涉及到将一级MUX的输出用作下一级的输入，如此持续直到产生一个最终输出。计算构建这个1024选1 MUX所需的8选1 MUX的总数。", "solution": "问题要求计算构建一个1024选1多路复用器（MUX）所需的8选1 MUX的总数。这可以通过逐级考虑级联MUX的结构来解决。\n\n**第一级：**\n主要目标是处理1024个初始数据输入。由于每个可用的MUX都是8选1 MUX，它可以接收8个输入并选择一个输出。为了容纳所有1024个输入，我们将它们分成8个一组。这第一级所需的MUX数量是总输入数除以每个MUX的输入数。\n第一级的MUX数量 = $\\frac{1024}{8} = 128$。\n这第一级的128个MUX产生128个输出，每个MUX一个。\n\n**第二级：**\n来自第一级的128个输出现在成为电路第二级的输入。我们需要从这128个信号中选择一个。我们再次使用8选1 MUX。这一级所需的MUX数量是输入数（128）除以8。\n第二级的MUX数量 = $\\frac{128}{8} = 16$。\n这第二级的16个MUX产生16个输出。\n\n**第三级：**\n来自第二级的16个输出是第三级的输入。我们需要从这16个信号中选择一个。所需的MUX数量是通过将这16个输入分成8个一组来计算的。由于16不能被8整除，我们需要对除法结果取上整。\n第三级的MUX数量 = $\\lceil \\frac{16}{8} \\rceil = \\lceil 2 \\rceil = 2$。\n这两个MUX将产生2个输出。第一个MUX将处理输入1到8，第二个MUX将处理输入9到16。第二个MUX上未使用的输入通常被连接到逻辑低电平或高电平值，但这并不改变所需MUX器件的数量。\n\n**第四级：**\n来自第三级的2个输出是最终选择级的输入。我们需要从这两个信号中选择一个，以产生1024选1 MUX的最终单个输出。我们必须使用一个8选1 MUX来完成这项任务，因为它是唯一可用的组件。\n第四级的MUX数量 = $\\lceil \\frac{2}{8} \\rceil = \\lceil 0.25 \\rceil = 1$。\n这个最终的MUX将接收2个输入并产生单个最终输出。\n\n**MUX总数：**\n8选1 MUX的总数是所有级别中使用的MUX数量之和。\nMUX总数 = (第一级的MUX数) + (第二级的MUX数) + (第三级的MUX数) + (第四级的MUX数)\nMUX总数 = $128 + 16 + 2 + 1 = 147$。\n\n因此，总共需要147个8选1 MUX。", "answer": "$$\\boxed{147}$$", "id": "1920031"}, {"introduction": "现在我们知道了如何搭建一个大型多路选择器，接下来让我们深入其内部工作原理。这个练习将引导你根据给定的选择线输入，追踪信号在级联结构中的完整路径。通过这个过程，你将清晰地看到不同的选择位是如何控制级联的不同层级的，这是掌握级联结构背后逻辑的关键。[@problem_id:1920039]", "problem": "在一门数字系统设计课程中，一名学生需要通过级联更小的、现成的4选1 MUX组件来创建一个16选1多路复用器（MUX）。整个电路有16个数据输入（表示为$D_0, D_1, \\dots, D_{15}$）和一个单一输出$Y$。选择操作由一个4位二进制数控制，该数由选择线$S_3S_2S_1S_0$表示，其中$S_3$是最高有效位。\n\n该设计分两级实现。第一级由四个4选1 MUX组成，分别标记为MUX-0、MUX-1、MUX-2和MUX-3。第二级由一个4选1 MUX组成，标记为MUX-FINAL。\n\n接线配置如下：\n- 两个最低有效选择线$S_1$和$S_0$连接到所有四个第一级MUX（MUX-0、MUX-1、MUX-2和MUX-3）的选择输入端。对于任何一个4选1 MUX，选择位$s_1s_0$（其中$s_1$是较高位）选择输入$I_k$，其中$k$是$s_1s_0$的十进制值。\n- 数据输入$D_0, D_1, D_2, D_3$分别连接到MUX-0的输入端$I_0, I_1, I_2, I_3$。\n- 数据输入$D_4, D_5, D_6, D_7$分别连接到MUX-1的输入端$I_0, I_1, I_2, I_3$。\n- 数据输入$D_8, D_9, D_{10}, D_{11}$分别连接到MUX-2的输入端$I_0, I_1, I_2, I_3$。\n- 数据输入$D_{12}, D_{13}, D_{14}, D_{15}$分别连接到MUX-3的输入端$I_0, I_1, I_2, I_3$。\n- MUX-0、MUX-1、MUX-2和MUX-3的输出端分别连接到MUX-FINAL的输入端$I_0, I_1, I_2, I_3$。\n- 两个最高有效选择线$S_3$和$S_2$连接到MUX-FINAL的选择输入端，其中$S_3$是较高位。\n\n如果全局选择线设置为$S_3S_2S_1S_0 = 1011$，那么被传递到最终输出$Y$的数据输入线$D_i$的整数索引$i$是多少？", "solution": "一个带有选择位$s_{1}$（MSB）和$s_{0}$的4选1 MUX选择输入$I_{k}$，其中$k$是$s_{1}s_{0}$的十进制值，即$k=2s_{1}+s_{0}$。在这个两级级联结构中，第二级MUX（MUX-FINAL）使用$S_{3}$（MSB）和$S_{2}$来选择转发哪个第一级MUX的输出。因此，MUX-FINAL所选的组索引是\n$$\nk_{\\text{final}}=2S_{3}+S_{2}.\n$$\n每个第一级MUX使用$S_{1}$（MSB）和$S_{0}$来选择其四个输入中的一个，因此在所选组内的索引是\n$$\nk_{\\text{inner}}=2S_{1}+S_{0}.\n$$\n因为这些组对应于四条数据线的连续块，所以最终选择的数据索引是\n$$\ni=4\\,k_{\\text{final}}+k_{\\text{inner}}=4\\left(2S_{3}+S_{2}\\right)+\\left(2S_{1}+S_{0}\\right)=8S_{3}+4S_{2}+2S_{1}+S_{0}.\n$$\n当$S_{3}S_{2}S_{1}S_{0}=1011$时，我们有$S_{3}=1$，$S_{2}=0$，$S_{1}=1$，$S_{0}=1$，因此\n$$\ni=8\\cdot 1+4\\cdot 0+2\\cdot 1+1=11.\n$$\n等价地，$S_{3}S_{2}=10$在MUX-FINAL处选择了MUX-2，而$S_{1}S_{0}=11$在MUX-2内部选择了输入$I_{3}$，它就是$D_{11}$。", "answer": "$$\\boxed{11}$$", "id": "1920039"}, {"introduction": "在现实世界的电路中，制造缺陷时有发生。最后一个练习将我们带入一个故障排查场景：一个关键的布线错误导致两条选择线被互换。通过分析这个有缺陷的电路，你将从设计者的视角转换到测试工程师的视角，从而更深刻地理解每条选择线在多路选择器功能中扮演的精确角色。[@problem_id:1920059]", "problem": "一位数字系统工程师正在设计一个 8-to-1 多路复用器（MUX）。一个标准的 8-to-1 MUX 有八个数据输入（表示为 $D_0, D_1, \\dots, D_7$）和三条外部选择线（$S_2, S_1, S_0$），其中 $S_2$ 是最高有效位。单个输出 $Y$ 等于数据输入 $D_i$，其中索引 $i$ 是由二进制数 $S_2S_1S_0$ 表示的整数值。例如，如果选择线为 $(S_2, S_1, S_0) = (1, 0, 1)$，则输出为 $Y=D_5$。\n\n该工程师通过以标准的三级树形结构级联七个 2-to-1 MUX 来实现该设备。为了正确操作，该结构要求选择线进行如下连接：\n- 第一级（最接近数据输入端）的四个 MUX 全部由最低有效位 $S_0$ 控制。\n- 第二级的两个 MUX 由中间位 $S_1$ 控制。\n- 最后一级（产生输出 $Y$）的单个 MUX 由最高有效位 $S_2$ 控制。\n\n然而，由于制造缺陷，发生了接线错误。最高有效位 ($S_2$) 和最低有效位 ($S_0$) 的外部选择线在连接到级联的 MUX 结构之前被交换了。中间选择线 $S_1$ 的连接保持正确。\n\n由于这个故障，多路复用器不再按预期功能工作。所选数据输入的索引（我们称之为 $i'$）现在是外部选择线 $S_2, S_1, S_0$ 的一个新函数。你的任务是确定这个新关系。将错误的索引 $i'$ 表示为一个仅包含 $S_2, S_1$ 和 $S_0$ 的算术表达式。在此表达式中，将选择线变量视为值为 0 或 1 的整数。", "solution": "题目要求在发生特定接线故障后，将被选中的数据输入 $D_{i'}$ 的新索引 $i'$ 表示为外部选择线 $S_2, S_1, S_0$ 的函数。\n\n首先，我们来确定正确的功能和结构。在一个正确接线的 8-to-1 MUX 中，所选输入 $D_i$ 的索引 $i$ 由选择线 $S_2S_1S_0$ 的二进制值决定。这可以写成一个算术表达式：\n$i = 4S_2 + 2S_1 + S_0$。\n\n该结构是一个由 2-to-1 MUX构成的三级树。让我们根据控制每一级的选择线来追踪信号路径。\n- **第 3 级（最终输出级）：** 这个单独的 MUX 决定了原始输入的哪一半被通过。在正确的设计中，它由 $S_2$ 控制。$S_2=0$ 的值会从下半部分（$D_0$ 到 $D_3$）选择，而 $S_2=1$ 会从上半部分（$D_4$ 到 $D_7$）选择。这个决定为索引 $i$ 贡献了最高有效位（即‘4’位）。\n- **第 2 级（中间级）：** 这两个 MUX 由 $S_1$ 控制。在由第 3 级选定的每一半内部，这一级会选择一对输入。例如，如果选择了下半部分，$S_1=0$ 会选择来自 $(D_0, D_1)$ 的路径，而 $S_1=1$ 会选择来自 $(D_2, D_3)$ 的路径。这个决定为索引 $i$ 贡献了中间位（即‘2’位）。\n- **第 1 级（输入级）：** 这四个 MUX 由 $S_0$ 控制。这一级在两个单独的输入之间做出最终选择（例如，$D_0$ 或 $D_1$）。这个决定为索引 $i$ 贡献了最低有效位（即‘1’位）。\n\n现在，我们来分析有故障的电路。外部选择线是 $S_2, S_1, S_0$。由于接线交换，控制 MUX 各级的内部选择线如下：\n- 第 1 级的选择线，本应是 $S_0$，现在接收到外部信号 $S_2$。\n- 第 2 级的选择线，本应是 $S_1$，正确地接收到外部信号 $S_1$。\n- 第 3 级的选择线，本应是 $S_2$，现在接收到外部信号 $S_0$。\n\n我们现在可以通过分析每条外部选择线对最终索引值的贡献来确定新的选中索引 $i'$。\n\n- **外部线 $S_0$ 的贡献：** 外部线 $S_0$ 现在连接到第 3 级单个 MUX 的选择输入。该 MUX 在输入的下半部分（$D_0$ 到 $D_3$）和上半部分（$D_4$ 到 $D_7$）之间进行选择。因此，$S_0$ 现在决定了索引 $i'$ 的最高有效位。$S_0=0$ 的值会从 $\\{0,1,2,3\\}$ 中选择一个索引，而 $S_0=1$ 会从 $\\{4,5,6,7\\}$ 中选择一个索引。这为 $i'$ 的总值贡献了 $4S_0$。\n\n- **外部线 $S_1$ 的贡献：** 外部线 $S_1$ 正确连接到第 2 级 MUX 的选择输入。这一级仍然决定索引的中间位。例如，在组 $\\{0,1,2,3\\}$ 内，$S_1=0$ 的值会从 $\\{0,1\\}$ 中选择，而 $S_1=1$ 会从 $\\{2,3\\}$ 中选择。这为 $i'$ 的总值贡献了 $2S_1$。\n\n- **外部线 $S_2$ 的贡献：** 外部线 $S_2$ 现在连接到第 1 级 MUX 的选择输入。这一级从一对输入中选择最终的输入（例如，$D_0$ vs $D_1$）。因此，$S_2$ 现在决定了索引 $i'$ 的最低有效位。$S_2=0$ 的值会选择一对中的第一个输入（例如，从对 $(D_0, D_1)$ 中选择 $D_0$），而 $S_2=1$ 会选择第二个（例如，$D_1$）。这为 $i'$ 的总值贡献了 $1S_2$。\n\n为了找到新的索引 $i'$，我们将这些贡献相加。新的索引由一个二进制数构成，其最高有效位是 $S_0$，中间位是 $S_1$，最低有效位是 $S_2$。\n\n因此，新索引 $i'$ 的算术表达式为：\n$i' = 4S_0 + 2S_1 + S_2$。", "answer": "$$\\boxed{4S_0 + 2S_1 + S_2}$$", "id": "1920059"}]}
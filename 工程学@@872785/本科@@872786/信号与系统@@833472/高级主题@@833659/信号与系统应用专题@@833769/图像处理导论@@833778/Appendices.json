{"hands_on_practices": [{"introduction": "图像增强是数字图像处理中的一个核心任务，旨在改善图像的视觉质量或为后续分析突出某些特征。直方图均衡化是一种强大且广泛使用的对比度增强技术。该方法通过重新分布像素的亮度值，使其在整个可用亮度范围内更均匀地分布，从而扩展图像的动态范围。[@problem_id:1729821] 这个练习将通过一个简化的场景，让您亲手计算直方图均衡化的变换过程，从而深入理解其背后的核心原理——累积分布函数（CDF）的应用。", "problem": "一台专业的天文成像传感器用于捕捉一幅遥远星云的单色图像。由于星际气体的特性以及传感器的特定滤光片，所捕捉到的8位灰度图像由仅具有三种不同强度值（50、120和210）的像素组成。一幅8位图像可以表示 $L=256$ 个强度级别，从0（黑色）到255（白色）。\n\n该图像总共有 1,048,576 个像素。统计分析揭示了以下分布：\n- 262,144 个像素的强度值为 50。\n- 524,288 个像素的强度值为 120。\n- 262,144 个像素的强度值为 210。\n\n为了改善视觉对比度，对该图像应用了标准的直方图均衡化算法。每个原始像素强度值 $v$ 到新强度值 $v'$ 的变换由以下公式给出：\n$$v' = \\text{floor}((L-1) \\times \\text{CDF}(v))$$\n此处，`floor(x)` 是将 $x$ 向下舍入到最接近整数的函数，$L=256$ 是强度级别的数量，而 $\\text{CDF}(v)$ 是图像像素强度在级别 $v$ 处的累积分布函数（Cumulative Distribution Function）。$\\text{CDF}(v)$ 定义为所有小于或等于 $v$ 的强度级别的概率之和。\n\n确定将分别替换原始强度值50、120和210的新强度值。请按此特定顺序，将您的答案以一组三个整数值的形式呈现。", "solution": "一幅8位图像有 $L=256$ 个强度级别，因此直方图均衡化映射为\n$$v'=\\lfloor (L-1)\\,\\text{CDF}(v)\\rfloor=\\lfloor 255\\,\\text{CDF}(v)\\rfloor.$$\n设 $N=1{,}048{,}576$ 为像素总数。三个现有强度的概率为\n$$p(50)=\\frac{262{,}144}{1{,}048{,}576}=\\frac{2^{18}}{2^{20}}=\\frac{1}{4},\\quad p(120)=\\frac{524{,}288}{1{,}048{,}576}=\\frac{2^{19}}{2^{20}}=\\frac{1}{2},\\quad p(210)=\\frac{262{,}144}{1{,}048{,}576}=\\frac{1}{4}.$$\n在这些级别上的累积分布函数为\n$$\\text{CDF}(50)=\\frac{1}{4},\\quad \\text{CDF}(120)=\\frac{1}{4}+\\frac{1}{2}=\\frac{3}{4},\\quad \\text{CDF}(210)=\\frac{1}{4}+\\frac{1}{2}+\\frac{1}{4}=1.$$\n应用该映射，\n$$v'(50)=\\left\\lfloor 255\\cdot \\frac{1}{4}\\right\\rfloor=\\left\\lfloor \\frac{255}{4}\\right\\rfloor=\\left\\lfloor 63.75\\right\\rfloor=63,$$\n$$v'(120)=\\left\\lfloor 255\\cdot \\frac{3}{4}\\right\\rfloor=\\left\\lfloor \\frac{765}{4}\\right\\rfloor=\\left\\lfloor 191.25\\right\\rfloor=191,$$\n$$v'(210)=\\left\\lfloor 255\\cdot 1\\right\\rfloor=255.$$\n因此，原始强度 $50,120,210$ 分别映射到 $63,191,255$。", "answer": "$$\\boxed{\\begin{pmatrix}63 & 191 & 255\\end{pmatrix}}$$", "id": "1729821"}, {"introduction": "除了改善图像的整体外观，我们常常更关心如何从图像中提取有意义的结构信息，例如物体的边界。边缘检测是实现这一目标的基本步骤，它通过识别图像中亮度值发生急剧变化的位置来定位边缘。这种操作通常通过空间滤波完成，即用一个称为“核”的小矩阵与图像进行卷积。[@problem_id:1729803] 本练习将带您使用经典的 Sobel 算子，在一个理想的垂直边缘图像块上计算梯度，直观地展示如何通过计算局部差异来量化和定位边缘。", "problem": "在一个基本的数字图像处理系统中，一个设计用于检测垂直边缘的算法会分析图像的一个小区域。该区域由一个 $3 \\times 3$ 的像素强度值矩阵表示，记为 $I$。正在考虑的特定图像块代表一个完美的垂直边缘，其表示如下：\n$$\nI = \\begin{pmatrix}\n50 & 200 & 200 \\\\\n50 & 200 & 200 \\\\\n50 & 200 & 200\n\\end{pmatrix}\n$$\n该算法估计此图像块中心的水平方向梯度（这对应于垂直边缘的强度）。它通过使用一个预定义的 $3 \\times 3$ 核 $G_x$ 来实现，该核如下所示：\n$$\nG_x = \\begin{pmatrix}\n-1 & 0 & 1 \\\\\n-2 & 0 & 2 \\\\\n-1 & 0 & 1\n\\end{pmatrix}\n$$\n梯度估计值 $g$ 是通过计算核矩阵 $G_x$ 和图像块矩阵 $I$ 的元素级乘积之和得到的。计算该梯度估计值 $g$ 的值。", "solution": "该算法通过计算核与图像块之间的元素级乘积之和，来计算图像块中心的水平梯度估计值。将 $G_{x}$ 和 $I$ 的元素记为 $G_{x}(i,j)$ 和 $I(i,j)$，其中 $i,j \\in \\{1,2,3\\}$。估计值为\n$$\ng=\\sum_{i=1}^{3}\\sum_{j=1}^{3} G_{x}(i,j)\\,I(i,j).\n$$\n逐项计算：\n$$\ng = (-1)(50) + 0(200) + 1(200) + (-2)(50) + 0(200) + 2(200) + (-1)(50) + 0(200) + 1(200).\n$$\n简化各项乘积并求和：\n$$\ng = -50 + 0 + 200 - 100 + 0 + 400 - 50 + 0 + 200 = 600.\n$$\n因此，梯度估计值为 $g=600$。", "answer": "$$\\boxed{600}$$", "id": "1729803"}, {"introduction": "在掌握了空间滤波（如边缘检测）的基本概念后，一个现实世界中的关键问题便是计算效率。对于高分辨率图像或实时视频处理，即使是简单的卷积操作也可能变得非常耗时。幸运的是，许多常用的滤波器（如高斯滤波器）具有一种称为“可分离性”的宝贵特性。[@problem_id:1729802] 这个练习将引导您量化使用可分离滤波器相对于直接二维卷积所带来的计算性能提升，揭示了算法优化在图像处理工程实践中的重要性。", "problem": "在数字图像处理中，二维卷积是一种基本操作，用于模糊、锐化和边缘检测等任务。该操作涉及将一个称为核或滤波器的小矩阵在图像上滑动。输出图像中每个像素的值是核与输入图像中相应像素邻域的逐元素乘积之和。\n\n考虑一个大小为 $K \\times K$ 的通用方形核。对于直接二维卷积，计算单个输出像素所需的乘法运算次数为 $K^2$。\n\n某些核，例如高斯核，是“可分离的”。一个可分离的 $K \\times K$ 核允许将二维卷积分解为两个连续的一维卷积。首先，使用一个 $1 \\times K$ 的行向量滤波器进行一维卷积，然后对结果使用一个 $K \\times 1$ 的列向量滤波器进行第二次一维卷积。对于这种可分离方法，每个输出像素的总乘法次数是两个一维卷积步骤所需乘法次数的总和。\n\n假设一位工程师正在实现一个图像处理流水线，并且必须应用一个可以由 $7 \\times 7$ 核很好地近似的高斯滤波器。为了决定是否实现更复杂的可分离卷积算法，该工程师希望量化其性能优势。计算计算节省因子，其定义为直接二维卷积每像素的乘法次数与可分离实现每像素的乘法次数之比。\n\n将最终答案四舍五入至三位有效数字。", "solution": "使用 $K \\times K$ 核的直接二维卷积，每个输出像素需要 $K^{2}$ 次乘法：\n$$\nM_{\\text{direct}}=K^{2}.\n$$\n对于可分离核，二维卷积通过两次一维卷积来执行：一次使用 $1 \\times K$ 滤波器，另一次使用 $K \\times 1$ 滤波器。每次一维卷积每个输出像素需要 $K$ 次乘法，因此总次数为\n$$\nM_{\\text{sep}}=K+K=2K.\n$$\n计算节省因子是该比率\n$$\nS=\\frac{M_{\\text{direct}}}{M_{\\text{sep}}}=\\frac{K^{2}}{2K}=\\frac{K}{2}.\n$$\n对于 $K=7$，\n$$\nS=\\frac{7}{2}=3.5.\n$$\n四舍五入到三位有效数字，得到 $3.50$。", "answer": "$$\\boxed{3.50}$$", "id": "1729802"}]}
{"hands_on_practices": [{"introduction": "掌握数模转换器（DAC）的第一步是理解如何根据给定的数字输入计算其模拟输出电压。这个练习是一个基础性的实践，它将反相加法放大器的原理应用到二进制加权电阻网络中，帮助你巩固对数字编码、参考电压和模拟输出之间关系的理解 [@problem_id:1282973]。", "problem": "一位工程师正在使用一个4位二进制加权电阻数模转换器（DAC）设计一个简单的波形发生器。该DAC是围绕一个处于反相加法器配置下的理想运算放大器构建的。数字输入是一个4位字，表示为 $d_3d_2d_1d_0$，其中 $d_3$ 是最高有效位（MSB），$d_0$ 是最低有效位（LSB）。连接到MSB输入（$d_3$）的电阻的阻值为 $R$。后续的电阻是二进制加权的，使得位 $d_i$ 对应的电阻的阻值为 $2^{3-i}R$。运算放大器的反馈电阻 $R_f$ 被设置为等于基准电阻 $R$，即 $R_f = R$。数字输入控制开关。数字'1'将相应的电阻连接到参考电压 $V_{ref}$，而数字'0'将其连接到地（0 V）。参考电压为 $V_{ref} = 2.56$ V。如果数字输入字是1010，得到的模拟输出电压 $V_{out}$ 是多少？请以伏特（V）为单位给出答案。", "solution": "对于一个理想的反相加法放大器，其反相输入端处于虚地状态，因此流经输入电阻的电流之和等于流经反馈电阻的电流。在求和节点处使用欧姆定律和基尔霍夫电流定律（KCL），我们有\n$$\n\\frac{-V_{out}}{R_{f}}=\\sum_{i=0}^{3}\\frac{V_{i}}{R_{i}},\n$$\n因此\n$$\nV_{out}=-R_{f}\\sum_{i=0}^{3}\\frac{V_{i}}{R_{i}}.\n$$\n每个输入电压为 $V_{i}=d_{i}V_{ref}$，输入电阻为 $R_{i}=2^{3-i}R$，且 $R_{f}=R$。因此，\n$$\nV_{out}=-R\\sum_{i=0}^{3}\\frac{d_{i}V_{ref}}{2^{3-i}R}=-V_{ref}\\sum_{i=0}^{3}\\frac{d_{i}}{2^{3-i}}.\n$$\n对于输入字 $d_{3}d_{2}d_{1}d_{0}=1010$，该和的计算结果为\n$$\n\\sum_{i=0}^{3}\\frac{d_{i}}{2^{3-i}}=\\frac{1}{2^{0}}+\\frac{0}{2^{1}}+\\frac{1}{2^{2}}+\\frac{0}{2^{3}}=1+\\frac{1}{4}=\\frac{5}{4}.\n$$\n因此，\n$$\nV_{out}=-V_{ref}\\cdot\\frac{5}{4}.\n$$\n代入 $V_{ref}=2.56$，\n$$\nV_{out}=-2.56\\cdot\\frac{5}{4}=-3.2.\n$$", "answer": "$$\\boxed{-3.2}$$", "id": "1282973"}, {"introduction": "在掌握了基本计算之后，我们将转向更实际的设计问题。一个DAC的实用性取决于其分辨率，即其产生足够精细电压步长的能力。这项练习将挑战你从一个具体的系统性能要求（例如角度分辨率）出发，反向推算出DAC所需的最少位数，这是工程师在电路设计中经常遇到的核心任务 [@problem_id:1282904]。", "problem": "一套定制的激光扫描系统使用一个 $n$ 位二进制加权电阻数模转换器 (DAC) 来控制反射镜的角度位置。该 DAC 的参考电压为 $V_{ref} = 8.00 \\text{ V}$。DAC 的满量程 (FSR) 电压被定义为等于此参考电压，即 $V_{FSR} = V_{ref}$。反射镜的角度位置 $\\alpha$ 与 DAC 的输出电压 $V_{out}$ 成线性比例。系统经过校准，使得等于 FSR 电压的理想输出电压 ($V_{out} = V_{FSR}$) 对应于相对于零位置的最大角度 $\\alpha_{max} = 1.50^\\circ$。为了使扫描仪在光学实验中按要求工作，角度的最小增量变化（角分辨率）不得超过 $0.0040^\\circ$。\n\n确定该 DAC 必须具有的最小整数位数 $n$，以满足此设计规范。", "solution": "反射镜角度与 DAC 输出电压成线性比例，因此 DAC 的一个码值变化会产生一个成比例的角度变化。对于一个理想的单极性 $n$ 位 DAC，其码值从 $0$ 到 $2^{n}-1$ 覆盖整个满量程范围 $V_{FSR}$，其理想电压步长 (1 LSB) 为\n$$\n\\Delta V=\\frac{V_{FSR}}{2^{n}-1}.\n$$\n因为 $\\alpha$ 与 $V_{out}$ 成正比，并且 $V_{out}=V_{FSR}$ 对应于 $\\alpha_{max}$，所以每个码值的角度步长为\n$$\n\\Delta \\alpha=\\frac{\\alpha_{max}}{V_{FSR}}\\Delta V=\\frac{\\alpha_{max}}{2^{n}-1}.\n$$\n为了满足所要求的角分辨率，我们必须有\n$$\n\\Delta \\alpha \\le \\alpha_{req} \\quad \\Longrightarrow \\quad \\frac{\\alpha_{max}}{2^{n}-1}\\le \\alpha_{req}.\n$$\n求解 $n$ 可得\n$$\n2^{n}-1 \\ge \\frac{\\alpha_{max}}{\\alpha_{req}}.\n$$\n当 $\\alpha_{max}=1.50$ 且 $\\alpha_{req}=0.0040$ 时（单位抵消），\n$$\n\\frac{\\alpha_{max}}{\\alpha_{req}}=\\frac{1.50}{0.0040}=375,\n$$\n所以\n$$\n2^{n}-1 \\ge 375 \\quad \\Longrightarrow \\quad 2^{n}\\ge 376.\n$$\n满足此条件的最小整数 $n$ 是 $n=9$，因为 $2^8 = 256  376$ 且 $2^9 = 512 \\ge 376$。", "answer": "$$\\boxed{9}$$", "id": "1282904"}, {"introduction": "理想模型是理解概念的起点，但现实世界的电路总会存在不完美之处。工程师需要使用特定指标来量化这些不完美所带来的影响。本练习模拟了一个制造缺陷，并要求你计算差分非线性（DNL），这是一个衡量实际步长与理想步长偏差的关键性能指标。通过分析这个有缺陷的DAC，你将深入理解元件故障如何影响DAC的传递特性 [@problem_id:1282910]。", "problem": "考虑一个4位二进制加权电阻数模转换器（DAC），它由一个理想运算放大器以反相加法器配置实现。数字输入字表示为 $(b_3 b_2 b_1 b_0)_2$，其中 $b_3$ 是最高有效位（MSB）。对应于位 $b_3, b_2, b_1,$ 和 $b_0$ 的输入电阻分别为 $R, 2R, 4R,$ 和 $8R$。反馈电阻为 $R_f = R/2$。逻辑'1'电平对应于电压 $V_{ref}$，逻辑'0'电平对应于地（0 V）。\n\n一个制造缺陷导致对应于位 $b_1$ 的输入电阻开路。对于这个有故障的DAC，我们使用微分非线性（DNL）指标来分析其性能。从数字码 $D$ 到 $D+1$ 转换的DNL定义为：\n$$DNL(D) = \\frac{V_{out}(D+1) - V_{out}(D)}{V_{LSB, ideal}} - 1$$\n其中 $V_{out}(D)$ 是故障DAC在数字输入为 $D$ 时的输出电压，而 $V_{LSB, ideal}$ 是在*理想、无故障*的同一DAC中对应于一个最低有效位（LSB）的电压变化。\n\n计算在所有从整数码 $D$ 到 $D+1$ 的可能转换中（$D$ 从 0 到 14），DNL的最大绝对值 $\\max|DNL(D)|$。", "solution": "对于一个理想的反相加法器，其对应于 $(b_{3},b_{2},b_{1},b_{0})$ 的输入电阻为 $R,2R,4R,8R$，反馈电阻为 $R_{f}=R/2$，其输出为\n$$\nV_{\\text{out,ideal}}(D)=-\\frac{R_{f}}{R}V_{\\text{ref}}\\left(b_{3}+\\frac{b_{2}}{2}+\\frac{b_{1}}{4}+\\frac{b_{0}}{8}\\right)\n=-\\frac{V_{\\text{ref}}}{2}\\left(b_{3}+\\frac{b_{2}}{2}+\\frac{b_{1}}{4}+\\frac{b_{0}}{8}\\right).\n$$\n由于 $D=b_{3}2^{3}+b_{2}2^{2}+b_{1}2^{1}+b_{0}2^{0}$，我们有\n$$\nb_{3}+\\frac{b_{2}}{2}+\\frac{b_{1}}{4}+\\frac{b_{0}}{8}=\\frac{D}{8},\n$$\n所以\n$$\nV_{\\text{out,ideal}}(D)=-\\frac{V_{\\text{ref}}}{16}D.\n$$\n因此，理想的单码步长是一个有符号的常数，\n$$\nV_{LSB,\\text{ideal}}=V_{\\text{out,ideal}}(D+1)-V_{\\text{out,ideal}}(D)=-\\frac{V_{\\text{ref}}}{16}.\n$$\n\n当对应于 $b_{1}$ 的输入电阻开路时，该 $b_{1}$ 支路没有电流贡献，所以故障输出为\n$$\nV_{\\text{out}}(D)=-\\frac{V_{\\text{ref}}}{2}\\left(b_{3}+\\frac{b_{2}}{2}+\\frac{b_{0}}{8}\\right),\n$$\n并且步长 $s(D)\\equiv V_{\\text{out}}(D+1)-V_{\\text{out}}(D)$ 由当 $D$ 增加到 $D+1$ 时 $b_{3},b_{2},b_{0}$ 中哪些位翻转决定（$b_{1}$ 的翻转无关紧要）。\n\n对 $D\\to D+1$ 的转换进行分类：\n- 如果 $D$ 是偶数，那么 $b_{0}:0\\to 1$ 且没有进位；只有 $b_{0}$ 翻转。因此\n$$\ns(D)=-\\frac{V_{\\text{ref}}}{2}\\left(\\frac{1}{8}\\right)=-\\frac{V_{\\text{ref}}}{16}.\n$$\n- 如果 $D$ 是奇数且 $b_{1}=0$，那么 $b_{0}:1\\to 0$ 并向 $b_{1}$ 进位（$b_{1}:0\\to 1$，被忽略），没有更进一步的进位。只有 $b_{0}$ 有贡献：\n$$\ns(D)=+\\frac{V_{\\text{ref}}}{16}.\n$$\n- 如果 $D$ 是奇数且 $b_{1}=1$，$b_{2}=0$ （模式 $\\cdots 0\\,1\\,1$），那么 $b_{0}:1\\to 0$, $b_{1}:1\\to 0$ 并向 $b_{2}$ 进位（$b_{2}:0\\to 1$）。有贡献的翻转是 $b_{0}:+V_{\\text{ref}}/16$ 和 $b_{2}:-V_{\\text{ref}}/4$，得到\n$$\ns(D)=\\frac{V_{\\text{ref}}}{16}-\\frac{V_{\\text{ref}}}{4}=-\\frac{3V_{\\text{ref}}}{16}.\n$$\n- 如果 $D$ 是奇数且 $b_{1}=1$，$b_{2}=1$ （在范围内，$D=7$ 时的模式 $0111$），那么 $b_{0}:1\\to 0$, $b_{1}:1\\to 0$, $b_{2}:1\\to 0$ 并向 $b_{3}$ 进位（$b_{3}:0\\to 1$）。有贡献的翻转是 $b_{0}:+V_{\\text{ref}}/16$, $b_{2}:+V_{\\text{ref}}/4$, $b_{3}:-V_{\\text{ref}}/2$，所以\n$$\ns(D)=\\frac{V_{\\text{ref}}}{16}+\\frac{V_{\\text{ref}}}{4}-\\frac{V_{\\text{ref}}}{2}=-\\frac{3V_{\\text{ref}}}{16}.\n$$\n\n因此，对于所有的 $D=0,\\ldots,14$，故障步长值为\n$$\ns(D)\\in\\left\\{-\\frac{V_{\\text{ref}}}{16},\\;+\\frac{V_{\\text{ref}}}{16},\\;-\\frac{3V_{\\text{ref}}}{16}\\right\\}.\n$$\n使用给定的定义\n$$\nDNL(D)=\\frac{s(D)}{V_{LSB,\\text{ideal}}}-1=\\frac{s(D)}{-V_{\\text{ref}}/16}-1,\n$$\n我们得到三种可能的DNL值：\n$$\n\\begin{aligned}\ns(D)=-\\frac{V_{\\text{ref}}}{16}\\;\\Rightarrow\\;DNL(D)=1-1=0,\\\\\ns(D)=+\\frac{V_{\\text{ref}}}{16}\\;\\Rightarrow\\;DNL(D)=-1-1=-2,\\\\\ns(D)=-\\frac{3V_{\\text{ref}}}{16}\\;\\Rightarrow\\;DNL(D)=3-1=2.\n\\end{aligned}\n$$\n因此，在所有转换中的最大绝对值为\n$$\n\\max_{D\\in\\{0,\\ldots,14\\}}|DNL(D)|=2.\n$$", "answer": "$$\\boxed{2}$$", "id": "1282910"}]}
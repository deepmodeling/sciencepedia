{"hands_on_practices": [{"introduction": "在分析任何电子电路的信号响应之前，首先必须确定其直流工作点。这个练习将引导您计算吉尔伯特单元在无输入信号（即静态）时的输出电压。通过这个计算，您将掌握电流如何在多级差分对中分配，并理解建立正确偏置对于电路功能的重要性。", "problem": "考虑一个由六个相同的双极结型晶体管（BJT）构成的吉尔伯特单元乘法器电路，标记为$Q_1$至$Q_6$。该电路的结构如下：\n\n一个由晶体管$Q_1$和$Q_2$组成的下差分对，其发射极连接在一起，并连接到一个吸收总电流 $I_{EE}$ 的恒流源。\n\n$Q_1$的集电极连接到上差分对($Q_3$, $Q_4$)的共同发射极，作为其电流源。类似地，$Q_2$的集电极连接到另一个上差分对($Q_5$, $Q_6$)的共同发射极，作为其电流源。\n\n输出由上层晶体管的集电极交叉耦合形成。$Q_3$和$Q_5$的集电极连接在一起，形成一个输出节点。$Q_4$和$Q_6$的集电极连接在一起，形成第二个输出节点。一个阻值为 $R_C$ 的负载电阻从正电源电压 $V_{CC}$ 连接到两个输出节点中的每一个。\n\n假设所有晶体管都工作在正向有源区，并且它们的基极电流可以忽略不计。\n\n电路处于静态直流状态，此时两个差分输入信号均为零。这种设置意味着$Q_1$和$Q_2$的基极电压相同，$Q_3$和$Q_4$的基极电压相同，以及$Q_5$和$Q_6$的基极电压相同。\n\n确定任一输出节点的静态直流电压。请用 $V_{CC}$、$I_{EE}$ 和 $R_C$ 表示您的答案，形式为一个单一的闭式解析表达式。", "solution": "目标是求出吉尔伯特单元输出节点的静态直流电压。静态状态意味着所有差分输入均为零。\n\n步骤1：分析下差分对（$Q_1$和$Q_2$）。\n晶体管$Q_1$和$Q_2$组成一个差分对，它们的发射极连接到一个吸收总电流为 $I_{EE}$ 的电流源。由于晶体管是相同的，并且它们的基极电压也相同（静态条件），尾电流 $I_{EE}$ 在它们之间均等分配。题目给定基极电流可以忽略，因此集电极电流 $I_C$ 约等于发射极电流 $I_E$。\n因此，$Q_1$和$Q_2$的集电极电流为：\n$$I_{C1} = I_{C2} = \\frac{I_{EE}}{2}$$\n\n步骤2：分析上差分对（$Q_3$, $Q_4$）和（$Q_5$, $Q_6$）。\n$Q_1$的集电极电流 $I_{C1}$ 作为上差分对（$Q_3$, $Q_4$）的尾电流。在静态状态下，$Q_3$和$Q_4$的基极电压相同。由于这些晶体管也是相同的，电流 $I_{C1}$ 在它们之间均等分配。\n$$I_{C3} = I_{C4} = \\frac{I_{C1}}{2} = \\frac{1}{2} \\left( \\frac{I_{EE}}{2} \\right) = \\frac{I_{EE}}{4}$$\n\n类似地，$Q_2$的集电极电流 $I_{C2}$ 作为上差分对（$Q_5$, $Q_6$）的尾电流。由于它们的基极电压在静态状态下相同，电流 $I_{C2}$ 在它们之间均等分配。\n$$I_{C5} = I_{C6} = \\frac{I_{C2}}{2} = \\frac{1}{2} \\left( \\frac{I_{EE}}{2} \\right) = \\frac{I_{EE}}{4}$$\n\n步骤3：计算每个输出节点的总电流。\n第一个输出节点是$Q_3$和$Q_5$集电极的共同连接点。从晶体管流入该节点的总电流是它们集电极电流之和。我们将此电流称为 $I_{out1}$。\n$$I_{out1} = I_{C3} + I_{C5} = \\frac{I_{EE}}{4} + \\frac{I_{EE}}{4} = \\frac{I_{EE}}{2}$$\n\n第二个输出节点是$Q_4$和$Q_6$集电极的共同连接点。从晶体管流入该节点的总电流是它们集电极电流之和。我们将此电流称为 $I_{out2}$。\n$$I_{out2} = I_{C4} + I_{C6} = \\frac{I_{EE}}{4} + \\frac{I_{EE}}{4} = \\frac{I_{EE}}{2}$$\n正如预期的那样，在静态状态下，通过每个负载电阻从电源汲取的直流电流是相同的。\n\n步骤4：确定静态输出电压。\n每个输出节点的电压由其各自负载电阻 $R_C$ 上的电压降决定。我们将静态输出电压表示为 $V_{C,out}$。利用欧姆定律和基尔霍夫电压定律，我们可以从电源电压 $V_{CC}$ 开始，减去电阻 $R_C$ 上的电压降，从而写出任一输出节点的电压。\n对于第一个输出节点：\n$$V_{C,out} = V_{CC} - I_{out1} \\cdot R_C$$\n代入 $I_{out1}$ 的表达式：\n$$V_{C,out} = V_{CC} - \\left( \\frac{I_{EE}}{2} \\right) R_C$$\n\n由于 $I_{out1} = I_{out2}$，第二个输出节点的电压是相同的。因此，任一输出节点的静态直流电压为：\n$$V_{C,out} = V_{CC} - \\frac{I_{EE} R_C}{2}$$", "answer": "$$\\boxed{V_{CC} - \\frac{I_{EE} R_{C}}{2}}$$", "id": "1307943"}, {"introduction": "吉尔伯特单元的核心是一个差分放大器，其传递函数本质上是非线性的。然而，在小信号输入下，我们可以将其近似为线性，这对于模拟乘法至关重要。这个练习探讨了如何界定这个“线性区”的范围 [@problem_id:1307959]，帮助您理解线性近似的有效边界以及电路从放大器转变为非线性元件的临界点。", "problem": "吉尔伯特单元是模拟集成电路中的一个基本构建模块，常被用作模拟乘法器或平衡调制器。其工作原理依赖于一个核心的双极结型晶体管（BJT）差分放大对。\n\n考虑一个吉尔伯特单元的输入级，它由两个相同的BJT组成的差分对构成，并由一个大小为 $I_{EE}$ 的恒定尾电流源偏置。一个差分电压 $v_{id}$ 被施加在两个晶体管的基极之间。假设晶体管工作在正向放大区且具有高电流增益，差分输出电流 $\\Delta I_C$（即两个集电极电流之差）由以下关系式给出：\n$$ \\Delta I_C = I_{EE} \\tanh\\left(\\frac{v_{id}}{2V_T}\\right) $$\n其中 $V_T$ 是热电压。\n\n对于小输入电压，电路的响应近似线性。我们可以通过考察电路在零输入时的跨导来精确定义这个线性区的边界。在 $v_{id} = 0$ 处传输特性的切线是一条由 $y(v_{id}) = G_{m0} \\cdot v_{id}$ 描述的直线，其中 $G_{m0}$ 是在 $v_{id}=0$ 时的小信号跨导。有效的线性输入范围通常通过找出该切线与差分输出电流的饱和电平相交时的输入电压幅值 $|v_{id}|_{max}$ 来定义。\n\n确定这个定义了线性工作范围的差分输入电压的最大幅值 $|v_{id}|_{max}$。请用热电压 $V_T$ 来表示你的答案。", "solution": "我们从差分对给定的传输特性开始：\n$$\n\\Delta I_{C} = I_{EE}\\tanh\\!\\left(\\frac{v_{id}}{2V_{T}}\\right)\n$$\n零输入时的小信号跨导定义为传输特性在 $v_{id}=0$ 处的斜率：\n$$\nG_{m0}=\\left.\\frac{d\\,\\Delta I_{C}}{dv_{id}}\\right|_{v_{id}=0}\n$$\n使用链式法则和恒等式 $\\frac{d}{dx}\\tanh(x)=1-\\tanh^{2}(x)$ 进行微分：\n$$\n\\frac{d\\,\\Delta I_{C}}{dv_{id}}=I_{EE}\\left(1-\\tanh^{2}\\!\\left(\\frac{v_{id}}{2V_{T}}\\right)\\right)\\cdot\\frac{1}{2V_{T}}\n$$\n在 $v_{id}=0$ 处求值，此时 $\\tanh(0)=0$，得到\n$$\nG_{m0}=I_{EE}\\cdot\\frac{1}{2V_{T}}=\\frac{I_{EE}}{2V_{T}}\n$$\n因此，原点处的切线为\n$$\ny(v_{id})=G_{m0}\\,v_{id}=\\frac{I_{EE}}{2V_{T}}\\,v_{id}\n$$\n差分输出电流的饱和电平是当 $|v_{id}|\\to\\infty$ 时 $\\Delta I_{C}$ 的渐近值，即 $|\\Delta I_{C}|_{\\text{sat}}=I_{EE}$。通过将切线的幅值设为等于此饱和电平，可以得到有效的线性输入范围：\n$$\n\\left|y(v_{id})\\right|=I_{EE}\\;\\;\\Rightarrow\\;\\;\\frac{I_{EE}}{2V_{T}}\\,|v_{id}|=I_{EE}\n$$\n求解输入电压的最大幅值得到\n$$\n|v_{id}|_{\\max}=\\frac{I_{EE}}{I_{EE}/(2V_{T})}=2V_{T}\n$$\n因此，定义线性范围的差分输入电压的最大幅值为 $2V_{T}$。", "answer": "$$\\boxed{2V_{T}}$$", "id": "1307959"}, {"introduction": "理想电路模型是学习的起点，但真实世界的元件总存在不匹配。这个问题将带您分析由于负载电阻的微小失配而导致的直流输出失调电压 [@problem_id:1307931]。通过这个练习，您将认识到元件不匹配如何影响电路的性能，并学会量化这种非理想效应对精密模拟电路（如乘法器）的影响。", "problem": "双极结型晶体管 (BJT) 吉尔伯特单元乘法器是一种基本的模拟电路模块。其核心结构由三个差分对组成。一个由晶体管 $Q_1$ 和 $Q_2$ 组成的下层差分对，其发射极连接到一个恒定的直流 (DC) 电流源，该电流源吸收总电流 $I_{EE}$。$Q_1$ 的集电极为上层差分对 ($Q_3$, $Q_4$) 提供尾电流，而 $Q_2$ 的集电极为另一个上层差分对 ($Q_5$, $Q_6$) 提供尾电流。上层晶体管的基极交叉连接，$Q_3$ 和 $Q_5$ 的基极连接在一起，$Q_4$ 和 $Q_6$ 的基极连接在一起，以形成第二个差分输入。电路的差分输出从集电极获取。$Q_3$ 和 $Q_5$ 的集电极连接到负载电阻 $R_{C1}$，$Q_4$ 和 $Q_6$ 的集电极连接到负载电阻 $R_{C2}$。\n\n假设所有晶体管都完全相同，工作在正向有源区，基极电流可忽略不计，且厄利电压为无穷大。热电压为 $V_T$。在一次特定测试中，两个差分输入电压均设置为零伏。理想情况下，如果元件完全匹配，差分输出电压也应为零。然而，在实践中，负载电阻会存在微小的失配。电阻的标称值为 $R_C$，但它们的实际值为 $R_{C1} = R_C + \\frac{\\Delta R_C}{2}$ 和 $R_{C2} = R_C - \\frac{\\Delta R_C}{2}$。\n\n计算由该电阻失配引起的直流差分输出失调电压，定义为 $V_{OS} = V_{out1} - V_{out2}$。请用 $I_{EE}$、$R_C$ 和相对失配 $\\frac{\\Delta R_C}{R_C}$ 来表示你的答案的符号表达式。", "solution": "我们使用指数型差分对电流分配定律。对于一个尾电流为 $I_{\\text{tail}}$、差分输入为 $v_{d}$ 的 BJT 差分对，其集电极电流为\n$$\nI_{C+}=\\frac{I_{\\text{tail}}}{2}\\left(1+\\tanh\\!\\left(\\frac{v_{d}}{2V_{T}}\\right)\\right),\\quad\nI_{C-}=\\frac{I_{\\text{tail}}}{2}\\left(1-\\tanh\\!\\left(\\frac{v_{d}}{2V_{T}}\\right)\\right).\n$$\n当 $v_{d}=0$ 时，电流被相等分配：\n$$\nI_{C+}=I_{C-}=\\frac{I_{\\text{tail}}}{2}.\n$$\n\n下层差分对：输入 $v_{d1}=0$，总电流为 $I_{EE}$，两个集电极（为两个上层差分对供电）承载相等的尾电流\n$$\nI_{T1}=I_{T2}=\\frac{I_{EE}}{2}.\n$$\n\n上层差分对：第二个输入也为零，因此每个上层差分对都将其各自的尾电流均分。对于尾电流为 $I_{T1}$ 的差分对 $(Q_{3},Q_{4})$，\n$$\ni_{3}=i_{4}=\\frac{I_{T1}}{2}.\n$$\n对于尾电流为 $I_{T2}$ 的差分对 $(Q_{5},Q_{6})$，\n$$\ni_{5}=i_{6}=\\frac{I_{T2}}{2}.\n$$\n\n流入负载电阻的输出电流是每个输出节点的电流之和：\n$$\nI_{\\text{out1}}=i_{3}+i_{5}=\\frac{I_{T1}}{2}+\\frac{I_{T2}}{2}=\\frac{I_{T1}+I_{T2}}{2}=\\frac{I_{EE}}{2},\n$$\n$$\nI_{\\text{out2}}=i_{4}+i_{6}=\\frac{I_{T1}}{2}+\\frac{I_{T2}}{2}=\\frac{I_{EE}}{2}.\n$$\n\n设负载电阻 $R_{C1}$ 和 $R_{C2}$ 从电源节点 $V_{CC}$ 连接到输出端。根据欧姆定律，直流输出电压为\n$$\nV_{\\text{out1}}=V_{CC}-I_{\\text{out1}}R_{C1},\\qquad V_{\\text{out2}}=V_{CC}-I_{\\text{out2}}R_{C2}.\n$$\n因此，差分输出失调电压为\n$$\nV_{OS}=V_{\\text{out1}}-V_{\\text{out2}}=-I_{\\text{out1}}R_{C1}+I_{\\text{out2}}R_{C2}.\n$$\n由于 $I_{\\text{out1}}=I_{\\text{out2}}=\\frac{I_{EE}}{2}$，\n$$\nV_{OS}=-\\frac{I_{EE}}{2}\\left(R_{C1}-R_{C2}\\right).\n$$\n\n考虑到电阻失配 $R_{C1}=R_{C}+\\frac{\\Delta R_{C}}{2}$ 和 $R_{C2}=R_{C}-\\frac{\\Delta R_{C}}{2}$，它们的差值为\n$$\nR_{C1}-R_{C2}=\\Delta R_{C}.\n$$\n因此，\n$$\nV_{OS}=-\\frac{I_{EE}}{2}\\,\\Delta R_{C}.\n$$\n用相对失配 $\\frac{\\Delta R_{C}}{R_{C}}$ 表示，\n$$\nV_{OS}=-\\frac{I_{EE}R_{C}}{2}\\left(\\frac{\\Delta R_{C}}{R_{C}}\\right).\n$$\n热电压 $V_{T}$ 不影响结果，因为两个差分输入均为零，导致电流均分，这与 $V_{T}$ 无关。", "answer": "$$\\boxed{-\\frac{I_{EE}R_{C}}{2}\\left(\\frac{\\Delta R_{C}}{R_{C}}\\right)}$$", "id": "1307931"}]}
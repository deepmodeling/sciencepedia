{"hands_on_practices": [{"introduction": "计算环路增益是分析反馈放大器稳定性的核心技能。我们的第一个练习从最基本的反馈电路——电压跟随器——开始。通过分析这个简单的配置，我们可以清晰地理解前向增益 $A$ 和反馈系数 $\\beta$ 是如何共同构成环路增益 $T$ 的，为后续更复杂的分析奠定坚实的基础。这个问题 [@problem_id:1315750] 将帮助您掌握直接识别 $A$ 和 $\\beta$ 的基本方法。", "problem": "电压跟随器（也称为单位增益缓冲器）是使用非理想运算放大器（op-amp）构建的。输入电压信号连接到同相输入端。运算放大器的输出直接连接到其反相输入端，形成一个反馈路径。该运算放大器的特点是具有一个有限、实数且恒定的开环增益 $A_0$，其输出电压 $v_{out}$ 与差分输入电压 $v_d = v_+ - v_-$ 之间的关系由表达式 $v_{out} = A_0 v_d$ 给出，其中 $v_+$ 和 $v_-$ 分别是同相和反相输入端的电压。\n\n该电路可以使用负反馈系统的标准模型进行分析。在此模型中，运算放大器构成前向通路，其增益为 $A$。反馈网络处理输出信号以产生一个反馈信号，其反馈系数为 $\\beta$。系统的环路增益，记为 $T$，定义为前向通路增益与反馈系数的乘积。\n\n求此电压跟随器电路的环路增益 $T$。请用 $A_0$ 表示您的答案。", "solution": "问题要求解一个由开环增益为有限值 $A_0$ 的运算放大器搭建的电压跟随器电路的环路增益 $T$。环路增益定义为前向通路增益 $A$ 和反馈系数 $\\beta$ 的乘积。\n$$T = A \\beta$$\n\n首先，我们确定前向通路增益 $A$。反馈系统的前向通路是由运算放大器本身构成的。根据题意，该运算放大器具有一个有限的开环增益 $A_0$。因此，前向通路增益为：\n$$A = A_0$$\n\n接下来，我们需要确定反馈系数 $\\beta$。反馈系数是反馈信号与输出信号的比值。反馈网络将运算放大器的输出连接回放大级的输入端。在这种电压跟随器配置中，电压为 $v_{out}$ 的输出端直接连接到接收反馈信号的反相输入端。我们称反相输入端的电压为 $v_f$。\n$$v_f = v_-$$\n\n由于是直接连接（一根导线），反相输入端的电压与输出电压相同。\n$$v_- = v_{out}$$\n因此，反馈信号等于输出信号：\n$$v_f = v_{out}$$\n\n反馈系数 $\\beta$ 由关系式 $v_f = \\beta v_{out}$ 定义。将此定义与我们得到的 $v_f = v_{out}$ 进行比较，我们可以写出：\n$$\\beta v_{out} = 1 \\cdot v_{out}$$\n这意味着反馈系数为：\n$$\\beta = 1$$\n这个结果很直观，因为整个输出信号（其100%）被反馈回输入端。\n\n最后，我们可以通过将前向增益 $A$ 乘以反馈系数 $\\beta$ 来计算环路增益 $T$。\n$$T = A \\beta = (A_0)(1)$$\n$$T = A_0$$\n\n因此，电压跟随器电路的环路增益等于运算放大器的开环增益。", "answer": "$$\\boxed{A_{0}}$$", "id": "1315750"}, {"introduction": "在具有多个反馈路径或复杂连接的电路中，直接识别 $A$ 和 $\\beta$ 可能会变得困难。这个练习 [@problem_id:1315718] 介绍了一种更通用且强大的技术：断开环路并施加测试信号。该方法使我们能够直接计算信号在环路中传播一周的总增益，这对于分析如此处所示的同时包含正负反馈的复杂电路至关重要。", "problem": "一个电子电路由一个理想运算放大器（op-amp）和四个电阻器构成：$R_i$、$R_f$、$R_1$ 和 $R_2$。该电路配置有从运放输出端引出的两条反馈路径。\n\n负反馈路径由一个电阻 $R_f$ 构成，它将运放的输出端连接到其反相输入端。一个电阻 $R_i$ 将这个相同的反相输入端连接到地。\n\n正反馈路径由一个电阻 $R_1$ 构成，它将运放的输出端连接到其同相输入端。一个电阻 $R_2$ 将这个相同的同相输入端连接到地。\n\n该系统的环路增益 $T$ 将通过一个特定的方法来确定。理论上断开运放输出端与正反馈电阻 $R_1$ 之间的连接。一个测试电压 $V_{\\text{test}}$ 被施加到电阻 $R_1$ 原本连接到输出端的那一端。环路增益 $T$ 定义为比值 $V_{\\text{return}}/V_{\\text{test}}$，其中 $V_{\\text{return}}$ 是运放输出端得到的电压。\n\n求出该环路增益 $T$ 的符号表达式。", "solution": "我们使用理想运放来分析这个断环测试。理想运放的假设是：输入阻抗无穷大（因此输入电流为零），并且在有负反馈的线性工作区，两个输入端满足 $v_{-}=v_{+}$。\n\n在运放输出端与 $R_{1}$ 之间的连接被断开后，一个测试源 $V_{\\text{test}}$ 被施加到 $R_{1}$ 的自由端。同相输入节点（其电压记为 $v_{+}$）通过 $R_{1}$ 连接到 $V_{\\text{test}}$，通过 $R_{2}$ 连接到地，并且没有电流流入运放的输入端。在 $v_{+}$ 节点应用基尔霍夫电流定律（KCL），得到：\n\n$$\n\\frac{v_{+}-V_{\\text{test}}}{R_{1}}+\\frac{v_{+}}{R_{2}}=0\n$$\n\n求解 $v_{+}$，可得：\n\n$$\nv_{+}\\left(\\frac{1}{R_{1}}+\\frac{1}{R_{2}}\\right)=\\frac{V_{\\text{test}}}{R_{1}} \\implies v_{+}=V_{\\text{test}}\\frac{R_{2}}{R_{1}+R_{2}}\n$$\n\n反相输入节点（电压为 $v_{-}$）通过 $R_{f}$ 连接到输出 $V_{\\text{return}}$，通过 $R_{i}$ 连接到地，且没有电流流入运放的输入端。在 $v_{-}$ 节点根据 KCL，可得：\n\n$$\n\\frac{V_{\\text{return}}-v_{-}}{R_{f}}=\\frac{v_{-}}{R_{i}}\n$$\n\n在理想负反馈工作条件下，$v_{-}=v_{+}$，所以代入 $v_{-}=v_{+}$ 并求解 $V_{\\text{return}}$ 可得：\n\n$$\nV_{\\text{return}}=v_{+}\\left(1+\\frac{R_{f}}{R_{i}}\\right)\n$$\n\n结合这两个关系式，得到环路增益：\n\n$$\nT=\\frac{V_{\\text{return}}}{V_{\\text{test}}}\n=\\left(\\frac{v_{+}}{V_{\\text{test}}}\\right)\\left(\\frac{V_{\\text{return}}}{v_{+}}\\right)\n=\\frac{R_{2}}{R_{1}+R_{2}}\\left(1+\\frac{R_{f}}{R_{i}}\\right)\n$$", "answer": "$$\\boxed{\\frac{R_{2}}{R_{1}+R_{2}}\\left(1+\\frac{R_{f}}{R_{i}}\\right)}$$", "id": "1315718"}, {"introduction": "环路增益通常不是一个固定的数值，它会随着信号频率的变化而变化，这一点对于理解电路的稳定性至关重要。最后一个练习 [@problem_id:1315727] 探讨了一个专门用于产生振荡的电路——环形振荡器，并要求推导其频率相关的环路增益 $L(j\\omega)$。通过解决这个问题，您将看到环路增益的幅度和相位随频率的变化如何决定电路的行为，为理解振荡的巴克豪森准则（Barkhausen criterion）铺平了道路。", "problem": "三级环形振荡器是现代数字和混合信号集成电路中的基本构建模块。它通过将三个相同的反相放大器级联成一个闭环来构建。对于本问题，考虑一个由三个相同的互补金属氧化物半导体（CMOS）反相器级构成的环形振荡器。\n\n在直流偏置点（反相器的输入和输出电压相等）附近进行小信号分析时，每一级可以用以下参数来表征：\n- 一个有效的小信号跨导，$g_m$，它代表了NMOS和PMOS晶体管的综合效应。\n- 一个NMOS沟道电阻，$r_{on}$。\n- 一个PMOS沟道电阻，$r_{op}$。\n- 一个总有效负载电容，$C_L$，存在于每个反相器的输出节点上。该电容包括驱动级的寄生电容和下一级的输入栅极电容。\n\n单个反相器级的小信号输出电阻，$R_{out}$，是$r_{on}$和$r_{op}$的并联组合。\n\n您的任务是推导整个三级振荡器的频率相关环路增益 $L(j\\omega)$ 的完整解析表达式。您的最终表达式应以角频率 $\\omega$、虚数单位 $j$ 以及给定的物理参数 $g_m$、$r_{on}$、$r_{op}$ 和 $C_L$ 来表示。", "solution": "我们将每个CMOS反相器在其工作点建模为一个线性小信号级，具有：\n- 一个输出节点通过并联的NMOS和PMOS沟道电阻连接到交流地，因此小信号输出电阻为 $R_{out} = r_{on} \\parallel r_{op} = \\left( \\frac{1}{r_{on}} + \\frac{1}{r_{op}} \\right)^{-1} = \\frac{r_{on} r_{op}}{r_{on} + r_{op}}$。\n- 一个从输出节点到地的负载电容 $C_{L}$。\n- 一个受控电流源，用于模拟反相器的跨导作用，其值为 $g_{m} v_{in}$，方向从输出节点到地（因此 $v_{in}$ 的增加会增加下拉电流并减小 $v_{out}$）。\n\n在输出节点上写出KCL方程，以流向地的电流为正，得到：\n\n$$\n\\frac{v_{out}}{R_{out}} + C_{L} \\frac{d v_{out}}{dt} + g_{m} v_{in} = 0\n$$\n\n进行拉普拉斯变换并定义 $A(s) \\equiv \\frac{V_{out}(s)}{V_{in}(s)}$，我们得到：\n\n$$\n\\left( \\frac{1}{R_{out}} + s C_{L} \\right) V_{out}(s) + g_{m} V_{in}(s) = 0\n\\quad \\Longrightarrow \\quad\nA(s) = - \\frac{g_{m}}{\\frac{1}{R_{out}} + s C_{L}} = - \\frac{g_{m} R_{out}}{1 + s R_{out} C_{L}}\n$$\n\n对于一个由三个相同反相器组成的三级环形振荡器，环路增益是三级增益的乘积：\n\n$$\nL(s) = \\left[ A(s) \\right]^{3} = - \\frac{\\left( g_{m} R_{out} \\right)^{3}}{\\left( 1 + s R_{out} C_{L} \\right)^{3}}\n$$\n\n代入 $s = j \\omega$ 和 $R_{out} = \\frac{r_{on} r_{op}}{r_{on} + r_{op}}$，得到：\n\n$$\nL(j \\omega) = - \\frac{\\left( g_{m} \\frac{r_{on} r_{op}}{r_{on} + r_{op}} \\right)^{3}}{\\left( 1 + j \\omega C_{L} \\frac{r_{on} r_{op}}{r_{on} + r_{op}} \\right)^{3}}\n$$\n\n该表达式完全由 $g_{m}$、$r_{on}$、$r_{op}$、$C_{L}$、$\\omega$ 和 $j$ 表示，符合要求。", "answer": "$$\\boxed{-\\frac{\\left(g_{m}\\,\\frac{r_{on} r_{op}}{r_{on}+r_{op}}\\right)^{3}}{\\left(1+j\\omega C_{L}\\,\\frac{r_{on} r_{op}}{r_{on}+r_{op}}\\right)^{3}}}$$", "id": "1315727"}]}
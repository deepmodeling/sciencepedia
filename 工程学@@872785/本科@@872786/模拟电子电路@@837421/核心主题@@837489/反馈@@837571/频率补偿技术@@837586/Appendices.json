{"hands_on_practices": [{"introduction": "主极点补偿是稳定多级放大器的基石。通过利用米勒效应有意地制造一个低频极点，我们可以确保放大器的增益在其他极点开始影响相位裕度之前平滑地滚降。这个练习 [@problem_id:1305751] 提供了一个基础计算，将期望的极点频率与所需的米勒电容值联系起来。", "problem": "一位工程师正在为音频应用设计一个两级放大器。为确保其在反馈回路中的稳定性，必须对其开环频率响应进行调整。该放大器可以建模为两个级联的电压放大级。\n\n第一级具有跨导 $g_{m1} = 1.5 \\, \\text{mA/V}$ 和输出电阻 $R_1 = 200 \\, \\text{k}\\Omega$。第一级输出节点上的总固有寄生电容为 $C_1 = 0.5 \\, \\text{pF}$。\n\n第二级具有跨导 $g_{m2} = 10 \\, \\text{mA/V}$ 和输出电阻 $R_2 = 50 \\, \\text{k}\\Omega$。第二级的输入连接到第一级的输出。\n\n为了控制放大器的频率响应，在第二级的输入和输出之间连接了一个补偿电容 $C_c$。该技术旨在放大器的开环传递函数中，在频率 $f_{pd} = 100 \\, \\text{Hz}$ 处创建一个单一的主极点。\n\n假设第二级的增益很大，计算补偿电容 $C_c$ 的必要值。将您的答案以皮法（pF）为单位表示，并四舍五入到三位有效数字。", "solution": "补偿电容连接在第二级的输入和输出之间，在第一级输出端（即第二级输入端）产生一个米勒倍增电容。设第二级的小信号电压增益用 $A_{2}$ 表示。在第二级增益较大且第二级输入电阻较高的情况下，米勒效应使得第一级输出端的有效电容为\n$$\nC_{\\text{eff}} = C_{1} + C_{c}(1 + A_{2}).\n$$\n主极点由第一级的输出电阻 $R_{1}$ 和该节点上的总电容决定。极点频率为\n$$\nf_{pd} = \\frac{1}{2\\pi R_{1} C_{\\text{eff}}} = \\frac{1}{2\\pi R_{1}\\left(C_{1} + C_{c}(1 + A_{2})\\right)}.\n$$\n求解 $C_{c}$ 可得\n$$\nC_{c} = \\frac{\\frac{1}{2\\pi R_{1} f_{pd}} - C_{1}}{1 + A_{2}}.\n$$\n对于给定的第二级，其电压增益（的幅度）近似为\n$$\nA_{2} \\approx g_{m2} R_{2}.\n$$\n代入数值，\n$$\nA_{2} = (10\\times 10^{-3})\\,(50\\times 10^{3}) = 500,\n$$\n$$\n\\frac{1}{2\\pi R_{1} f_{pd}} = \\frac{1}{2\\pi \\cdot (200\\times 10^{3}) \\cdot 100} = \\frac{1}{4\\pi \\times 10^{7}} \\approx 7.9577471546\\times 10^{-9}\\ \\text{F},\n$$\n因此\n$$\nC_{c} = \\frac{7.9577471546\\times 10^{-9} - 0.5\\times 10^{-12}}{1 + 500}\\ \\text{F}\n= \\frac{7.9572471546\\times 10^{-9}}{501}\\ \\text{F}\n\\approx 1.588272885\\times 10^{-11}\\ \\text{F}.\n$$\n转换为皮法，\n$$\nC_{c} \\approx 15.88272885\\ \\text{pF}.\n$$\n四舍五入到三位有效数字，\n$$\nC_{c} \\approx 15.9\\ \\text{pF}.\n$$", "answer": "$$\\boxed{15.9}$$", "id": "1305751"}, {"introduction": "在掌握了基本原理之后，下一步是为特定的稳定性目标进行设计，例如相位裕度。这个练习 [@problem_id:1305749] 不再仅仅是设置一个极点，而是要求您计算实现60度相位裕度（一个常见的行业标准）所需的补偿电容。它突显了设计中的权衡，迫使我们不仅要考虑极点，还要考虑米勒补偿引入的、会降低性能的右半平面（RHP）零点。", "problem": "考虑一个简化的两级运算跨导放大器 (OTA) 模型，该模型设计用作电容式传感器的单位增益缓冲器。OTA 的第一级具有跨导 $g_{m1}$ 和输出电阻 $R_{o1}$。第二级具有跨导 $g_{m2}$ 和输出电阻 $R_{o2}$。为确保稳定工作，一个补偿电容 $C_c$ 连接在第一级的输出和第二级的输出之间。该放大器驱动一个总负载电容 $C_L$，其中包括传感器的电容。\n\n给定以下器件和负载参数：\n- 第一级跨导，$g_{m1} = 1.20 \\text{ mA/V}$\n- 第二级跨导，$g_{m2} = 15.0 \\text{ mA/V}$\n- 第一级输出电阻，$R_{o1} = 250 \\text{ k}\\Omega$\n- 第二级输出电阻，$R_{o2} = 50.0 \\text{ k}\\Omega$\n- 负载电容，$C_L = 12.0 \\text{ pF}$\n\n计算为实现恰好 60 度的相位裕度所需的补偿电容 $C_c$ 的值。在您的分析中，假设极点分离效应占主导地位，并且电路中所有其他寄生电容均可忽略不计。您的答案以皮法 (pF) 为单位，并四舍五入到三位有效数字。", "solution": "该问题要求计算在单位增益反馈配置下，为两级 OTA 实现 60 度相位裕度 (PM) 所需的米勒补偿电容 $C_c$ 的值。\n\n首先，我们确定经过补偿的两级 OTA 的关键频率相关特性。开环传递函数 $A(s)$ 有一个主极点 $\\omega_{p1}$、一个次主极点 $\\omega_{p2}$ 和一个右半平面 (RHP) 零点 $\\omega_z$。\n\n补偿后放大器的单位增益频率 $\\omega_t$ 由第一级的跨导 $g_{m1}$ 和补偿电容 $C_c$ 决定。\n$$ \\omega_t = \\frac{g_{m1}}{C_c} $$\n\n次主极点 $\\omega_{p2}$ 主要由第二级的跨导 $g_{m2}$ 和负载电容 $C_L$ 决定。在标准的极点分离近似下，并假设 $C_c$ 不远小于 $C_L$，其位置近似为：\n$$ \\omega_{p2} \\approx \\frac{g_{m2}}{C_L} $$\n\n补偿电容 $C_c$ 在第二级的输入和输出之间创建了一个前馈路径，从而引入了一个 RHP 零点 $\\omega_z$，由下式给出：\n$$ \\omega_z = \\frac{g_{m2}}{C_c} $$\n\n相位裕度定义在单位增益频率 $\\omega_t$ 处。它由 $PM = 180^\\circ + \\angle A(j\\omega_t)$ 给出，其中 $\\angle A(j\\omega_t)$ 是开环传递函数在 $\\omega = \\omega_t$ 时的相位。相位是来自极点和零点的贡献之和：\n$$ \\angle A(j\\omega_t) = -\\arctan\\left(\\frac{\\omega_t}{\\omega_{p1}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n注意 RHP 零点相位贡献的负号。在一个正确补偿的运算放大器中，主极点 $\\omega_{p1}$ 被放置在远低于 $\\omega_t$ 的频率上，因此 $\\omega_t \\gg \\omega_{p1}$。这意味着在 $\\omega_t$ 处，主极点的相位贡献约为 $-90^\\circ$。\n$$ \\arctan\\left(\\frac{\\omega_t}{\\omega_{p1}}\\right) \\approx 90^\\circ $$\n将此代入相位裕度方程：\n$$ PM \\approx 180^\\circ - 90^\\circ - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n$$ PM \\approx 90^\\circ - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n我们已知所需的相位裕度为 $60^\\circ$。\n$$ 60^\\circ = 90^\\circ - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n$$ \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) + \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) = 30^\\circ $$\n现在我们用电路参数表示比率 $\\omega_t/\\omega_{p2}$ 和 $\\omega_t/\\omega_z$。\n$$ \\frac{\\omega_t}{\\omega_{p2}} = \\frac{g_{m1}/C_c}{g_{m2}/C_L} = \\frac{g_{m1}C_L}{g_{m2}C_c} $$\n$$ \\frac{\\omega_t}{\\omega_z} = \\frac{g_{m1}/C_c}{g_{m2}/C_c} = \\frac{g_{m1}}{g_{m2}} $$\n将这些代入我们的相位方程：\n$$ \\arctan\\left(\\frac{g_{m1}C_L}{g_{m2}C_c}\\right) + \\arctan\\left(\\frac{g_{m1}}{g_{m2}}\\right) = 30^\\circ $$\n现在我们可以代入给定的数值。首先，我们计算只涉及跨导的项。\n$$ \\frac{g_{m1}}{g_{m2}} = \\frac{1.20 \\text{ mA/V}}{15.0 \\text{ mA/V}} = 0.0800 $$\nRHP 零点的相位贡献为：\n$$ \\arctan(0.0800) \\approx 4.5739^\\circ $$\n现在将此代回相位方程：\n$$ \\arctan\\left(\\frac{g_{m1}C_L}{g_{m2}C_c}\\right) + 4.5739^\\circ = 30^\\circ $$\n$$ \\arctan\\left(\\frac{g_{m1}C_L}{g_{m2}C_c}\\right) = 30^\\circ - 4.5739^\\circ = 25.4261^\\circ $$\n现在我们可以求解反正切函数的自变量：\n$$ \\frac{g_{m1}C_L}{g_{m2}C_c} = \\tan(25.4261^\\circ) \\approx 0.47543 $$\n最后，我们求解 $C_c$：\n$$ C_c = \\frac{g_{m1}C_L}{g_{m2} \\times 0.47543} = \\left(\\frac{g_{m1}}{g_{m2}}\\right) \\frac{C_L}{0.47543} $$\n代入已知值：\n$$ C_c = (0.0800) \\frac{12.0 \\text{ pF}}{0.47543} \\approx 2.01935 \\text{ pF} $$\n题目要求答案四舍五入到三位有效数字。\n$$ C_c \\approx 2.02 \\text{ pF} $$\n此计算不需要 $R_{o1}$ 和 $R_{o2}$ 的值，因为它们主要决定直流增益和主极点的确切位置，而在使用 $\\omega_t$、$\\omega_{p2}$、$\\omega_z$ 和相位裕度之间的关系时，这些值不是直接必需的。", "answer": "$$\\boxed{2.02}$$", "id": "1305749"}, {"introduction": "高级电路设计的一个关键方面是解决基本技术的局限性。米勒补偿引入的右半平面（RHP）零点会限制放大器的速度和稳定性。这个实践问题 [@problem_id:1305737] 展示了一个巧妙的解决方案：在米勒电容上串联一个“调零电阻”。您将计算出将这个麻烦的零点移动到无穷远处所需的精确电阻值，从而有效消除其对相位裕度的影响。", "problem": "一位工程师正在设计一个两级CMOS运算放大器。该放大器的第二级被建模为一个跨导级，其跨导为$g_{m2}$，输出电阻为$R_{o2}$。为确保在宽负载范围内的稳定性，一个米勒补偿电容$C_C$被连接在该第二级的输入和输出节点之间。这种补偿方法的一个已知副作用是在放大器的传递函数中产生一个右半平面（RHP）零点，这会降低相位裕度。\n\n为了解决这个问题，一个零点消除电阻$R_z$与补偿电容$C_C$串联放置。可以选择该电阻的值来改变零点的位置。你的任务是找到$R_z$的特定值，该值能将RHP零点移动到无穷大频率，从而消除其对放大器性能的影响。\n\n第二级的参数如下：\n- 跨导，$g_{m2} = 400 \\text{ } \\mu\\text{A/V}$\n- 输出电阻，$R_{o2} = 150 \\text{ k}\\Omega$\n- 补偿电容，$C_C = 3 \\text{ pF}$\n\n计算所需的零点消除电阻$R_z$的值。请用千欧姆（k$\\Omega$）表示你的答案。", "solution": "问题要求计算一个零点消除电阻$R_z$的值，该电阻通过将两级放大器中的右半平面（RHP）零点移动到无穷大来消除它。该零点是由通过米勒补偿网络的前馈通路引入的。\n\n让我们分析第二级的小信号模型。设$v_x$为第二级的输入电压，$v_{out}$为输出电压。第二级由一个跨导为$g_{m2}$的压控电流源和一个输出电阻$R_{o2}$组成。补偿网络由电容$C_C$与电阻$R_z$串联组成，连接在节点$v_x$和$v_{out}$之间。\n\n串联补偿网络在s域中的阻抗由下式给出：\n$$ Z_C(s) = R_z + \\frac{1}{sC_C} $$\n\n传递函数的零点是指在有限输入电压$v_x$下，输出电压$v_{out}$变为零的频率。为了找到这些零点，我们可以分析输出节点的电流。输出节点的总电流是来自受控源的电流（$I_{gm2}$）、流过补偿网络的电流（$I_C$）以及流过输出电阻$R_{o2}$和负载的任何电流之和。\n在输出节点$v_{out}$应用基尔霍夫电流定律（KCL），我们得到：\n$$ g_{m2}v_x + \\frac{v_{out}}{R_{o2}} + I_{load} + \\frac{v_{out} - v_x}{Z_C(s)} = 0 $$\n其中$I_{load}$是流入连接到输出端的负载的电流。\n\n为了找到传递函数$A_v(s) = v_{out}(s)/v_x(s)$的零点，我们寻找使$v_{out}(s_z) = 0$而$v_x(s_z) \\neq 0$的$s$值（记为$s_z$）。在KCL方程中令$v_{out} = 0$可以显著简化方程。注意，当$v_{out}=0$时，流过$R_{o2}$和负载的电流也变为零。\nKCL方程变为：\n$$ g_{m2}v_x + \\frac{0 - v_x}{Z_C(s)} = 0 $$\n由于我们寻找的是$v_x \\neq 0$的解，我们可以将方程两边同除以$v_x$：\n$$ g_{m2} - \\frac{1}{Z_C(s)} = 0 $$\n这个方程定义了零点的频率$s = s_z$。\n$$ g_{m2} = \\frac{1}{Z_C(s_z)} $$\n现在，我们代入$Z_C(s)$的表达式：\n$$ g_{m2} = \\frac{1}{R_z + \\frac{1}{s_z C_C}} $$\n现在我们可以解出零点$s_z$：\n$$ R_z + \\frac{1}{s_z C_C} = \\frac{1}{g_{m2}} $$\n$$ \\frac{1}{s_z C_C} = \\frac{1}{g_{m2}} - R_z $$\n$$ \\frac{1}{s_z C_C} = \\frac{1 - g_{m2}R_z}{g_{m2}} $$\n$$ s_z = \\frac{g_{m2}}{C_C(1 - g_{m2}R_z)} $$\n这个表达式给出了s平面中零点的位置。问题要求我们找到将此零点移动到无穷大频率（$s_z \\to \\infty$）的$R_z$值。要使$s_z$的表达式趋于无穷大，其分母必须趨于零。\n$$ 1 - g_{m2}R_z = 0 $$\n求解$R_z$得到零点消除电阻的值：\n$$ R_z = \\frac{1}{g_{m2}} $$\n注意，这个值只取决于第二级的跨导$g_{m2}$，而与$C_C$、$R_{o2}$或负载无关。\n\n现在，我们可以代入给定的$g_{m2}$数值：\n$$ g_{m2} = 400 \\text{ } \\mu\\text{A/V} = 400 \\times 10^{-6} \\text{ S} $$\n$$ R_z = \\frac{1}{400 \\times 10^{-6} \\text{ S}} = \\frac{1}{0.0004} \\text{ }\\Omega = 2500 \\text{ }\\Omega $$\n问题要求答案以千欧姆（k$\\Omega$）表示。\n$$ R_z = 2500 \\text{ }\\Omega = 2.5 \\text{ k}\\Omega $$", "answer": "$$\\boxed{2.5}$$", "id": "1305737"}]}
{"hands_on_practices": [{"introduction": "理论上，一个理想的电流镜可以完美地复制参考电流，实现1:1的传输比。然而，在实际电路中，晶体管的有限电流增益（$\\beta$）是引入误差的主要因素之一。这个练习将引导你分析这种误差，并计算在考虑有限 $\\beta$ 值时，基本电流镜的实际电流传输比，这对于理解简单电流镜的性能局限至关重要。", "problem": "在模拟集成电路的设计中，一个简单的电流镜被用来产生稳定的偏置电流。该电流镜由两个相同的双极结型晶体管（BJT）组成，分别标记为$Q_{REF}$和$Q_{OUT}$。晶体管的配置如下：\n1. 两个晶体管的发射极都连接到地参考。\n2. 晶体管$Q_{REF}$是*二极管连接*的，这意味着其集电极和基极端子短接在一起。\n3. $Q_{OUT}$的基极连接到$Q_{REF}$的基极。\n4. 一个参考电流源向$Q_{REF}$的集电极和基极的公共节点提供电流$I_{REF}$。\n5. 输出电流$I_{OUT}$是从$Q_{OUT}$的集电极流出的电流。\n\n假设两个晶体管完全匹配，工作在正向有源区，并且具有相同的、有限的共发射极电流增益 $\\beta = 50$。可以忽略厄利效应。\n\n计算电流传输比$I_{OUT}/I_{REF}$的值。将您的答案表示为一个四舍五入到三位有效数字的数值。", "solution": "给定两个匹配的BJT构成一个简单的电流镜，其发射极接地，$Q_{REF}$为二极管连接（集电极-基极短路），一个参考电流源为$Q_{REF}$的公共集电极-基极节点供电，因此两个晶体管具有相同的基极-发射极电压。忽略厄利效应并假设工作在正向有源区，具有相等$V_{BE}$的匹配器件具有相等的集电极电流：\n$$\nI_{C1} = I_{C2} \\equiv I \\, .\n$$\n每个晶体管都具有有限的共发射极增益$\\beta$，因此每个晶体管的基极电流为\n$$\nI_{B1} = \\frac{I_{C1}}{\\beta} = \\frac{I}{\\beta}, \\quad I_{B2} = \\frac{I_{C2}}{\\beta} = \\frac{I}{\\beta} \\, .\n$$\n在参考节点（$Q_{REF}$的集电极-基极节点）应用KCL。参考源电流$I_{REF}$必须提供：\n- $Q_{REF}$的集电极电流，$I_{C1} = I$，\n- $Q_{REF}$的基极电流，$I_{B1} = I/\\beta$，\n- $Q_{OUT}$的基极电流，$I_{B2} = I/\\beta$。\n因此，\n$$\nI_{REF} = I + \\frac{I}{\\beta} + \\frac{I}{\\beta} = I\\left(1 + \\frac{2}{\\beta}\\right) \\, .\n$$\n将输出集电极电流$I_{OUT} = I$用$I_{REF}$表示，求解得到电流传输比\n$$\n\\frac{I_{OUT}}{I_{REF}} = \\frac{I}{I_{REF}} = \\frac{1}{1 + \\frac{2}{\\beta}} = \\frac{\\beta}{\\beta + 2} \\, .\n$$\n代入 $\\beta = 50$，\n$$\n\\frac{I_{OUT}}{I_{REF}} = \\frac{50}{52} = \\frac{25}{26} \\approx 0.961538\\ldots\n$$\n四舍五入到三位有效数字，结果为$0.962$。", "answer": "$$\\boxed{0.962}$$", "id": "1283651"}, {"introduction": "在成功地复制出一个电流后，下一个实际问题是：这个电流源在什么条件下才能正常工作？本练习探讨了输出电压顺从范围的概念，即在输出晶体管进入饱和区、不再作为恒流源工作之前，所能驱动的最大负载电阻。理解这个限制对于将电流镜集成到更复杂的电路中至关重要。", "problem": "考虑一个由两个相同的NPN型双极结型晶体管（BJT）Q1和Q2构成的简单电流镜电路。该电路的配置如下：Q1和Q2的基极连接在一起，它们的发射极都接地。参考晶体管Q1的集电极连接到其自身的基极。一个参考电阻$R_{REF}$连接在正电源电压$V_{CC}$和Q1的集电极之间。\n\n一个由电阻$R_L$代表的负载连接在输出晶体管Q2的集电极和同一个正电源电压$V_{CC}$之间。\n\n两个晶体管完全匹配，并且在正向有源区工作时，具有恒定的基极-发射极电压$V_{BE(on)}$。当晶体管的集电极-发射极电压降至$V_{CE(sat)}$时，认为晶体管进入饱和区。您可以假设晶体管的电流增益$\\beta$足够大，因此基极电流可以忽略不计。厄利效应也应忽略不计。\n\n确定负载电阻$R_{L,max}$的最大可能值，在此值下输出晶体管Q2保持在正向有源区。请用$V_{CC}$、$R_{REF}$、$V_{BE(on)}$和$V_{CE(sat)}$表示您的答案，形式为一个单一的闭式解析表达式。", "solution": "Q1和Q2的基极连接在一起，它们的发射极接地。由于Q1的集电极与其基极相连，当Q1工作在正向有源区时，基极/集电极节点的电压被固定为$V_{BE(on)}$（相对于地）。忽略基极电流，根据欧姆定律，流过参考电阻的电流因此为\n$$\nI_{REF}=\\frac{V_{CC}-V_{BE(on)}}{R_{REF}}.\n$$\n在晶体管完全匹配且忽略厄利效应的情况下，输出晶体管Q2在正向有源区会镜像这个电流，因此其集电极电流为\n$$\nI_{O}=I_{REF}=\\frac{V_{CC}-V_{BE(on)}}{R_{REF}}.\n$$\nQ2的集电极通过$R_{L}$连接到$V_{CC}$，所以其集电极电压为\n$$\nV_{C2}=V_{CC}-I_{O}R_{L}.\n$$\n只要$V_{CE2}\\geq V_{CE(sat)}$，Q2就保持在正向有源区工作。由于发射极接地，因此$V_{CE2}=V_{C2}$，正向有源区的边界发生在\n$$\nV_{CC}-I_{O}R_{L,\\max}=V_{CE(sat)}.\n$$\n求解$R_{L,\\max}$可得\n$$\nR_{L,\\max}=\\frac{V_{CC}-V_{CE(sat)}}{I_{O}}.\n$$\n代入$I_{O}=I_{REF}=(V_{CC}-V_{BE(on)})/R_{REF}$可得到闭式表达式\n$$\nR_{L,\\max}=R_{REF}\\,\\frac{V_{CC}-V_{CE(sat)}}{V_{CC}-V_{BE(on)}}.\n$$\n这个结果假设Q1本身保持在正向有源区工作，当$V_{BE(on)}>V_{CE(sat)}$时该条件得到满足，这与所述的器件行为一致。", "answer": "$$\\boxed{R_{REF}\\,\\frac{V_{CC}-V_{CE(sat)}}{V_{CC}-V_{BE(on)}}}$$", "id": "1283598"}, {"introduction": "对于需要产生远小于参考电流的输出电流的场景，简单的电流镜可能并不适用。这个问题介绍了一种巧妙的改进电路——Widlar电流源，它通过在输出晶体管的发射极加入一个电阻，来建立参考电流和输出电流之间的对数关系。通过这个练习[@problem_id:1283657]，你将学会如何设计一个具有特定非单位电流比的电流镜，这是集成电路设计中的一项常见任务。", "problem": "一位工程师正在使用Widlar电流源配置为集成放大器设计一个小电流偏置源。该电路由两个标记为 $Q_1$ 和 $Q_2$ 的匹配NPN型双极结型晶体管（BJT）组成。两个晶体管的基极连接在一起。参考晶体管 $Q_1$ 的集电极连接到其基极，形成一个类似二极管的元件。一个已知的参考电流 $I_{REF} = 1.00 \\text{ mA}$ 流入 $Q_1$ 的集电极。输出电流 $I_{OUT}$ 是第二个晶体管 $Q_2$ 的集电极电流。为了产生一个小的输出电流，一个电阻 $R_E$ 与 $Q_2$ 的发射极串联，并将其接地。$Q_1$ 的发射极直接接地。\n\n假设两个晶体管都工作在正向有源区，此时的温度下的热电压为 $V_T = 25.0 \\text{ mV}$。这两个晶体管是相同的，并且具有非常高的共发射极电流增益 $\\beta$，这使你可以假设集电极电流等于发射极电流（$I_C = I_E$），并且基极电流可以忽略不计。\n\n计算产生 $I_{OUT} = 20.0\\,\\mathrm{\\mu A}$ 的输出电流所需发射极电阻 $R_E$ 的值。你的答案应以千欧姆（k$\\Omega$）为单位，并四舍五入到三位有效数字。", "solution": "因为两个BJT是相同的，并且在可忽略基极电流的正向有源区工作，我们对每个器件使用指数I-V关系 $I_{C} = I_{S} \\exp(V_{BE}/V_{T})$。令公共基极电压为 $V_{B}$。对于$Q_{1}$（发射极接地），$V_{BE1} = V_{B}$ 并且\n$$\nI_{REF} = I_{S} \\exp\\!\\left(\\frac{V_{BE1}}{V_{T}}\\right) = I_{S} \\exp\\!\\left(\\frac{V_{B}}{V_{T}}\\right).\n$$\n对于$Q_{2}$，发射极电压为 $V_{E2} = I_{OUT} R_{E}$ （使用 $I_{E} \\approx I_{C}$），因此 $V_{BE2} = V_{B} - V_{E2}$ 并且\n$$\nI_{OUT} = I_{S} \\exp\\!\\left(\\frac{V_{BE2}}{V_{T}}\\right) = I_{S} \\exp\\!\\left(\\frac{V_{B} - I_{OUT} R_{E}}{V_{T}}\\right).\n$$\n两式相除可以消去 $I_{S}$ 和 $V_{B}$：\n$$\n\\frac{I_{OUT}}{I_{REF}} = \\exp\\!\\left(\\frac{V_{BE2} - V_{BE1}}{V_{T}}\\right) = \\exp\\!\\left(-\\frac{I_{OUT} R_{E}}{V_{T}}\\right).\n$$\n取自然对数并解出 $R_{E}$ 可得\n$$\n\\ln\\!\\left(\\frac{I_{OUT}}{I_{REF}}\\right) = -\\frac{I_{OUT} R_{E}}{V_{T}}\n\\;\\;\\Rightarrow\\;\\;\nR_{E} = \\frac{V_{T}}{I_{OUT}} \\ln\\!\\left(\\frac{I_{REF}}{I_{OUT}}\\right).\n$$\n将给定值 $V_{T} = 25.0 \\times 10^{-3}\\,\\mathrm{V}$、$I_{REF} = 1.00 \\times 10^{-3}\\,\\mathrm{A}$ 和 $I_{OUT} = 20.0 \\times 10^{-6}\\,\\mathrm{A}$（以国际单位制单位）代入，可得\n$$\nR_{E} = \\frac{25.0 \\times 10^{-3}\\,\\mathrm{V}}{20.0 \\times 10^{-6}\\,\\mathrm{A}} \\ln(50) = 1250 \\,\\ln(50)\\,\\Omega \\approx 4890.0\\,\\Omega = 4.890\\,\\mathrm{k\\Omega}.\n$$\n以千欧姆为单位，四舍五入到三位有效数字：", "answer": "$$\\boxed{4.89}$$", "id": "1283657"}]}
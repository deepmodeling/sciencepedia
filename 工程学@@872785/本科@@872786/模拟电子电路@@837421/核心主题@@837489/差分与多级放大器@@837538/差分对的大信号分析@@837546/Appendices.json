{"hands_on_practices": [{"introduction": "差分对的核心功能是根据差分输入电压，在两个晶体管之间“引导”恒定的尾电流。这个练习将通过计算一个具体的例子，即让95%的尾电流流过其中一个晶体管所需的输入电压，来量化这种电流分配关系。掌握这种计算是理解差分放大器大信号非线性特性的第一步[@problem_id:1314131]。", "problem": "模拟集成电路中的一个基本构建模块是差分对。考虑一个由两个相同的n沟道金属氧化物半导体场效应晶体管（MOSFET）M1和M2构建的此类电路。M1和M2的源极连接在一起，并由一个理想的恒流源偏置，该恒流源吸收一个尾电流 $I_{SS}$。这两个晶体管被设计为在饱和区工作，其行为由漏极电流的平方律模型精确描述，$I_D = \\frac{1}{2} k'_n \\frac{W}{L} (V_{GS} - V_{th})^2$，其中沟道长度调制效应可以忽略不计。M1和M2的栅极作为差分输入，其栅极电压分别为 $v_{g1}$ 和 $v_{g2}$。\n\n该电路具有以下参数：\n- 尾电流, $I_{SS} = 200 \\ \\mu\\text{A}$\n- 工艺跨导参数, $k'_n = 100 \\ \\mu\\text{A/V}^2$\n- 晶体管宽高比, $W/L = 20$\n\n确定所需正差分输入电压 $v_{id} = v_{g1} - v_{g2}$，使得晶体管M1的漏极电流 $i_{D1}$ 等于总尾电流 $I_{SS}$ 的95%。\n\n请将最终答案以毫伏（mV）为单位表示，并四舍五入到三位有效数字。", "solution": "题目要求计算差分输入电压 $v_{id}$，该电压使得MOSFET差分对的漏极电流产生特定的不平衡。我们已知尾电流 $I_{SS}$、工艺跨导参数 $k'_n$ 和宽高比 $W/L$。晶体管M1和M2是相同的，并且工作在饱和区。\n\n首先，根据所提供的平方律模型，写出漏极电流 $i_{D1}$ 和 $i_{D2}$ 的控制方程：\n$$i_{D1} = \\frac{1}{2} k_n (v_{GS1} - V_{th})^2$$\n$$i_{D2} = \\frac{1}{2} k_n (v_{GS2} - V_{th})^2$$\n其中 $k_n = k'_n \\frac{W}{L}$ 是晶体管跨导参数，$v_{GS1}$ 和 $v_{GS2}$ 分别是M1和M2的栅源电压，$V_{th}$ 是阈值电压。\n\n两个漏极电流之和必须等于电流源提供的尾电流：\n$$i_{D1} + i_{D2} = I_{SS}$$\n\n差分输入电压 $v_{id}$ 定义为栅极电压之差：\n$$v_{id} = v_{g1} - v_{g2}$$\n由于两个晶体管的源极连接到同一个节点（我们称其电压为 $v_s$），我们可以将栅源电压表示为 $v_{GS1} = v_{g1} - v_s$ 和 $v_{GS2} = v_{g2} - v_s$。因此，差分输入电压可以写成栅源电压之差：\n$$v_{id} = (v_{g1} - v_s) - (v_{g2} - v_s) = v_{GS1} - v_{GS2}$$\n\n为了求出 $v_{id}$，我们首先需要用漏极电流来表示 $v_{GS1}$ 和 $v_{GS2}$。从漏极电流方程中，我们可以解出栅源电压（假设 $v_{GS} > V_{th}$）：\n$$v_{GS1} = V_{th} + \\sqrt{\\frac{2 i_{D1}}{k_n}}$$\n$$v_{GS2} = V_{th} + \\sqrt{\\frac{2 i_{D2}}{k_n}}$$\n\n现在，我们将这些表达式代入 $v_{id}$ 的表达式中：\n$$v_{id} = \\left(V_{th} + \\sqrt{\\frac{2 i_{D1}}{k_n}}\\right) - \\left(V_{th} + \\sqrt{\\frac{2 i_{D2}}{k_n}}\\right)$$\n阈值电压 $V_{th}$ 被消掉了：\n$$v_{id} = \\sqrt{\\frac{2}{k_n}} \\left(\\sqrt{i_{D1}} - \\sqrt{i_{D2}}\\right)$$\n\n题目说明 $i_{D1}$ 是 $I_{SS}$ 的95%：\n$$i_{D1} = 0.95 I_{SS}$$\n根据电流求和规则，我们可以求出 $i_{D2}$：\n$$i_{D2} = I_{SS} - i_{D1} = I_{SS} - 0.95 I_{SS} = 0.05 I_{SS}$$\n\n将 $i_{D1}$ 和 $i_{D2}$ 的这些表达式代回 $v_{id}$ 的方程中：\n$$v_{id} = \\sqrt{\\frac{2}{k_n}} \\left(\\sqrt{0.95 I_{SS}} - \\sqrt{0.05 I_{SS}}\\right)$$\n我们可以提出因子 $\\sqrt{I_{SS}}$：\n$$v_{id} = \\sqrt{\\frac{2 I_{SS}}{k_n}} \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n\n现在，我们可以代入题目中提供的数值。首先，计算跨导参数 $k_n$：\n$$k_n = k'_n \\frac{W}{L} = (100 \\ \\mu\\text{A/V}^2) \\times 20 = 2000 \\ \\mu\\text{A/V}^2 = 2.0 \\times 10^{-3} \\ \\text{A/V}^2$$\n尾电流为 $I_{SS} = 200 \\ \\mu\\text{A} = 2.0 \\times 10^{-4} \\ \\text{A}$。\n\n将这些值代入 $v_{id}$ 的方程中：\n$$v_{id} = \\sqrt{\\frac{2 \\times (2.0 \\times 10^{-4} \\ \\text{A})}{2.0 \\times 10^{-3} \\ \\text{A/V}^2}} \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n$$v_{id} = \\sqrt{\\frac{4.0 \\times 10^{-4}}{2.0 \\times 10^{-3}}} \\ \\text{V} \\cdot \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n$$v_{id} = \\sqrt{0.2} \\ \\text{V} \\cdot \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n\n现在，我们计算各项的数值：\n$$\\sqrt{0.2} \\approx 0.44721$$\n$$\\sqrt{0.95} \\approx 0.97468$$\n$$\\sqrt{0.05} \\approx 0.22361$$\n\n$$v_{id} \\approx 0.44721 \\times (0.97468 - 0.22361) \\ \\text{V}$$\n$$v_{id} \\approx 0.44721 \\times 0.75107 \\ \\text{V}$$\n$$v_{id} \\approx 0.33591 \\ \\text{V}$$\n\n题目要求答案以毫伏（mV）为单位。\n$$v_{id} \\approx 335.91 \\ \\text{mV}$$\n四舍五入到三位有效数字，我们得到：\n$$v_{id} \\approx 336 \\ \\text{mV}$$", "answer": "$$\\boxed{336}$$", "id": "1314131"}, {"introduction": "在理想情况下，当差分输入为零时，输出也应为零。然而，实际电路中元器件的失配会打破这种平衡。本练习探讨了一个常见问题：即使晶体管本身完美匹配，仅仅是负载电阻的微小差异，也会在零输入下产生不希望的直流输出失调电压[@problem_id:1314125]。通过这个计算，你将亲身体会到在精密模拟电路设计中，元器件匹配为何至关重要。", "problem": "一位设计工程师正在分析一个由两个 n 沟道金属氧化物半导体场效应晶体管 (MOSFET) M1 和 M2 构成的简单差分放大器级。该电路设计用于一个灵敏的传感器接口，但一个已知的制造缺陷引入了不平衡。\n\n电路参数如下：\n- 两个 MOSFET M1 和 M2 在其他方面是完全匹配的。它们共享相同的工艺跨导参数 $k_n = 4.0 \\text{ mA/V}^2$ 和阈值电压 $V_{tn} = 0.50 \\text{ V}$。\n- 使用正电源电压 $V_{DD} = 3.0 \\text{ V}$。\n- M1 的漏极通过电阻 $R_{D1}$ 连接到 $V_{DD}$，M2 的漏极通过电阻 $R_{D2}$ 连接到 $V_{DD}$。\n- 两个漏极电阻的标称设计值为 $R_D = 5.0 \\text{ k}\\Omega$。然而，由于制造缺陷，$R_{D1}$ 的值为其精确的标称值，而 $R_{D2}$ 比标称值大 10%。\n- 两个晶体管的公共源极端连接到一个理想的直流电流源，该电流源吸收的总电流为 $I_{SS} = 1.0 \\text{ mA}$。\n- 两个晶体管的栅极连接在一起并连接到一个公共的直流输入电压，导致差分输入电压为零，$v_{id} = v_{g1} - v_{g2} = 0$。\n- 假设两个晶体管都工作在饱和区，并且沟道长度调制效应可以忽略 ($\\lambda = 0$)。\n\n计算由此产生的直流差分输出电压，定义为 $v_{od} = v_{o1} - v_{o2}$，其中 $v_{o1}$ 和 $v_{o2}$ 分别是 M1 和 M2 漏极的直流电压。以伏特 (V) 为单位表示答案，并四舍五入到三位有效数字。", "solution": "问题要求计算具有不匹配漏极电阻的 MOSFET 差分对的直流差分输出电压 $v_{od} = v_{o1} - v_{o2}$。\n\n步骤1：分析漏极电流。\n给定的差分输入电压为零，$v_{id} = v_{g1} - v_{g2} = 0$。这意味着栅极电压相等，$v_{g1} = v_{g2}$。两个晶体管 M1 和 M2 共享一个公共源极连接，因此它们的源极端处于相同的电位 $v_s$。因此，它们的栅源电压是相同的：\n$$v_{gs1} = v_{g1} - v_s = v_{g2} - v_s = v_{gs2}$$\n问题陈述晶体管是完美匹配的，意味着它们具有相同的跨导参数 $k_n$ 和阈值电压 $V_{tn}$。由于假设它们处于饱和区，每个晶体管的漏极电流 $i_d$ 由平方律模型给出：\n$$i_d = \\frac{1}{2} k_n (v_{gs} - V_{tn})^2$$\n因为 $v_{gs1} = v_{gs2}$ 且晶体管参数相同，所以它们的漏极电流也必须相等：\n$$i_{d1} = i_{d2}$$\n\n步骤2：在公共源极节点应用基尔霍夫电流定律 (KCL)。\n理想的尾电流源 $I_{SS}$ 吸收两个漏极电流之和：\n$$I_{SS} = i_{d1} + i_{d2}$$\n将 $i_{d1} = i_{d2}$ 代入 KCL 方程，我们得到：\n$$I_{SS} = i_{d1} + i_{d1} = 2i_{d1}$$\n$$i_{d1} = i_{d2} = \\frac{I_{SS}}{2}$$\n给定 $I_{SS} = 1.0 \\text{ mA}$，每个晶体管的漏极电流为：\n$$i_{d1} = i_{d2} = \\frac{1.0 \\text{ mA}}{2} = 0.5 \\text{ mA}$$\n\n步骤3：计算漏极电阻的值。\n标称电阻为 $R_D = 5.0 \\text{ k}\\Omega$。\n电阻 $R_{D1}$ 的值为其标称值：\n$$R_{D1} = 5.0 \\text{ k}\\Omega$$\n电阻 $R_{D2}$ 比标称值大 10%：\n$$R_{D2} = R_D \\times (1 + 0.10) = 5.0 \\text{ k}\\Omega \\times 1.10 = 5.5 \\text{ k}\\Omega$$\n\n步骤4：计算漏极处的各个直流输出电压。\n输出电压 $v_{o1}$ 和 $v_{o2}$ 是漏极电压，可以通过从电源电压 $V_{DD}$ 中减去各自漏极电阻上的电压降来计算。\n对于第一个输出，$v_{o1}$：\n$$v_{o1} = V_{DD} - i_{d1} R_{D1}$$\n代入已知值：$V_{DD} = 3.0 \\text{ V}$，$i_{d1} = 0.5 \\text{ mA} = 0.5 \\times 10^{-3} \\text{ A}$，以及 $R_{D1} = 5.0 \\text{ k}\\Omega = 5.0 \\times 10^3 \\text{ }\\Omega$。\n$$v_{o1} = 3.0 \\text{ V} - (0.5 \\times 10^{-3} \\text{ A}) \\times (5.0 \\times 10^3 \\text{ }\\Omega) = 3.0 \\text{ V} - 2.5 \\text{ V} = 0.5 \\text{ V}$$\n对于第二个输出，$v_{o2}$：\n$$v_{o2} = V_{DD} - i_{d2} R_{D2}$$\n代入已知值：$V_{DD} = 3.0 \\text{ V}$，$i_{d2} = 0.5 \\text{ mA} = 0.5 \\times 10^{-3} \\text{ A}$，以及 $R_{D2} = 5.5 \\text{ k}\\Omega = 5.5 \\times 10^3 \\text{ }\\Omega$。\n$$v_{o2} = 3.0 \\text{ V} - (0.5 \\times 10^{-3} \\text{ A}) \\times (5.5 \\times 10^3 \\text{ }\\Omega) = 3.0 \\text{ V} - 2.75 \\text{ V} = 0.25 \\text{ V}$$\n\n步骤5：计算差分输出电压。\n差分输出电压 $v_{od}$ 是 $v_{o1}$ 和 $v_{o2}$ 之间的差值：\n$$v_{od} = v_{o1} - v_{o2}$$\n$$v_{od} = 0.5 \\text{ V} - 0.25 \\text{ V} = 0.25 \\text{ V}$$\n\n或者，我们可以先用符号表示 $v_{od}$：\n$$v_{od} = (V_{DD} - i_{d1} R_{D1}) - (V_{DD} - i_{d2} R_{D2})$$\n由于 $i_{d1} = i_{d2} = I_{SS}/2$：\n$$v_{od} = i_{d2} R_{D2} - i_{d1} R_{D1} = \\frac{I_{SS}}{2} (R_{D2} - R_{D1})$$\n$$v_{od} = \\frac{1.0 \\text{ mA}}{2} (5.5 \\text{ k}\\Omega - 5.0 \\text{ k}\\Omega) = 0.5 \\text{ mA} \\times 0.5 \\text{ k}\\Omega = 0.25 \\text{ V}$$\n\n计算值为 $0.25 \\text{ V}$。四舍五入到三位有效数字，我们得到 $0.250 \\text{ V}$。", "answer": "$$\\boxed{0.250}$$", "id": "1314125"}, {"introduction": "为了系统地评估和比较不同放大器的性能，工程师们通常会将各种非理想因素等效为一个统一的指标，即“输入参考失调电压” ($V_{OS}$)。这个练习将带你分析一种更复杂的失配情况：源极负反馈电阻的失配，并推导出它所引起的输入参考失调电压[@problem_id:1314180]。这个概念不仅是评估放大器精度的核心指标，也是理解更高级电路设计和补偿技术的基础。", "problem": "考虑一个金属-氧化物-半导体场效应晶体管（MOSFET）差分放大器。该放大器由两个相同的 n 沟道 MOSFET $M_1$ 和 $M_2$ 组成，由一个大小为 $I_{SS}$ 的恒定尾电流源偏置。电路配置了源极负反馈，其中一个电阻 $R_{S1}$ 连接到 $M_1$ 的源极，另一个电阻 $R_{S2}$ 连接到 $M_2$ 的源极。两个电阻的另一端连接在一起，并接到尾电流源，该电流源将电流吸入负电源。每个晶体管的漏极通过相同的负载电阻 $R_D$ 连接到正电源电压 $V_{DD}$。晶体管的栅极端子 $G_1$ 和 $G_2$ 作为放大器的差分输入。\n\n假设两个 MOSFET 完全匹配，并工作在饱和区。然而，由于制造公差，源极负反馈电阻存在失配。标称电阻为 $R_S$，但实际值为 $R_{S1} = R_S$ 和 $R_{S2} = R_S(1+\\delta)$，其中 $\\delta$ 是分数失配。\n\n输入参考失调电压 $V_{OS}$ 定义为使差分输出电压 ($v_{D1} - v_{D2}$) 精确为零所需的静态差分输入电压 ($v_{G1} - v_{G2}$)。\n\n推导输入参考失调电压 $V_{OS}$ 关于尾电流 $I_{SS}$、标称源极电阻 $R_S$ 和分数失配 $\\delta$ 的闭式解析表达式。", "solution": "输入参考失调电压 $V_{OS}$ 是指当差分输出电压为零时，所需的差分输入电压 $v_{G1} - v_{G2}$。\n\n1.  **平衡条件**：由于两个漏极的负载电阻 $R_D$ 相同，要使差分输出电压 $v_{D1} - v_{D2}$ 为零，两个支路的漏极电流必须相等。\n    $$i_{1} = i_{2}$$\n    根据基尔霍夫电流定律，两个电流之和必须等于尾电流 $I_{SS}$，因此：\n    $$i_{1} = i_{2} = \\frac{I_{SS}}{2}$$\n\n2.  **晶体管工作状态**：题目指出两个MOSFET $M_1$ 和 $M_2$ 是完全匹配的。当它们的漏极电流相等时（$i_1 = i_2$），并且它们都工作在饱和区，其栅-源电压 $V_{GS}$ 必然相等。\n    $$V_{GS1} = V_{GS2}$$\n\n3.  **节点电压分析**：我们将栅-源电压用节点电压表示。设两个晶体管的栅极电压分别为 $v_{G1}$ 和 $v_{G2}$。设两个源极电阻 $R_{S1}$ 和 $R_{S2}$ 连接的公共节点电压为 $V_P$。那么，$M_1$ 和 $M_2$ 的源极节点电压分别为：\n    $$v_{S1, node} = V_P + i_1 R_{S1}$$\n    $$v_{S2, node} = V_P + i_2 R_{S2}$$\n    因此，栅-源电压可以写为：\n    $$V_{GS1} = v_{G1} - v_{S1, node} = v_{G1} - (V_P + i_1 R_{S1})$$\n    $$V_{GS2} = v_{G2} - v_{S2, node} = v_{G2} - (V_P + i_2 R_{S2})$$\n\n4.  **推导失调电压**：将 $V_{GS1} = V_{GS2}$ 的条件代入：\n    $$v_{G1} - (V_P + i_1 R_{S1}) = v_{G2} - (V_P + i_2 R_{S2})$$\n    公共节点电压 $V_P$ 被消去：\n    $$v_{G1} - i_1 R_{S1} = v_{G2} - i_2 R_{S2}$$\n    整理得到差分输入电压，即输入参考失调电压 $V_{OS}$：\n    $$V_{OS} \\equiv v_{G1} - v_{G2} = i_1 R_{S1} - i_2 R_{S2}$$\n    \n5.  **代入参数**：将平衡条件 $i_1 = i_2 = I_{SS}/2$ 和电阻失配 $R_{S1} = R_S$, $R_{S2} = R_S(1+\\delta)$ 代入上式：\n    $$V_{OS} = \\frac{I_{SS}}{2} R_S - \\frac{I_{SS}}{2} R_S(1+\\delta)$$\n    $$V_{OS} = \\frac{I_{SS}}{2} R_S - \\left(\\frac{I_{SS}}{2} R_S + \\frac{I_{SS}}{2} R_S \\delta\\right)$$\n    $$V_{OS} = -\\frac{I_{SS}R_S\\delta}{2}$$\n\n这个表达式表明，输入失调电压与尾电流、标称源极电阻以及电阻失配成正比。例如，如果 $R_{S2}$ 比 $R_{S1}$ 大（即 $\\delta > 0$），$V_{OS}$ 为负值，这意味着必须施加一个负的差分电压（即 $v_{G2} > v_{G1}$）来补偿电阻失配，从而使输出恢复平衡。", "answer": "$$\\boxed{-\\frac{I_{SS}R_{S}\\delta}{2}}$$", "id": "1314180"}]}
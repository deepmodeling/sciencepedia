{"hands_on_practices": [{"introduction": "P沟道MOSFET的一个基本但至关重要的应用是源极跟随器（或共漏极）电路。该电路以其高输入阻抗和接近单位的电压增益而闻名，常用作电压缓冲器或电平转换器。在本练习中[@problem_id:1323366]，我们将分析一个用作电平转换器的源极跟随器，重点是推导其小信号电压增益，并理解体效应等实际因素如何影响其性能。", "problem": "考虑一个由单个p沟道增强型金属氧化物半导体场效应晶体管 (PMOS)（记为 $M_1$）构建的电平转换电路。$M_1$ 的漏极接地 (0 V)。$M_1$ 的源极连接到一个电阻 $R_S$，该电阻的另一端连接到负直流电源电压。晶体管的体（衬底）也接地。输入是一个小信号交流电压 $v_{in}$，施加到 $M_1$ 的栅极。输出 $v_{out}$ 从 $M_1$ 的源极取出。\n\n在小信号分析中，该晶体管由其跨导 $g_m$、本征输出电阻 $r_o$ 和体效应跨导 $g_{mb}$ 来表征，其中体效应跨导考虑了源极到体电压的影响。\n\n确定电路的输入阻抗 $Z_{in}$ 及其小信号电压增益 $A_v = v_{out}/v_{in}$。将对 $(Z_{in}, A_v)$ 的答案用给定参数表示，形式为一个 $1 \\times 2$ 的行矩阵的符号表达式。", "solution": "令小信号栅极、源极、漏极和体电压分别用 $v_{g}$、$v_{s}$、$v_{d}$ 和 $v_{b}$ 表示。在交流小信号分析中，直流电源视为交流地，因此 $v_{d}=0$（漏极接地），负电源是交流地（$R_S$ 的下端是交流地），且 $v_{b}=0$（体接地）。输入为 $v_{in}=v_{g}$，输出为 $v_{out}=v_{s}$。\n\n使用混合-$\\pi$小信号模型，其中：\n- 漏极和源极之间有一个电阻 $r_{o}$。\n- 从漏极到源极有一个受控电流源，其值为 $i_{d}=g_{m}v_{gs}+g_{mb}v_{bs}$，其中 $v_{gs}=v_{g}-v_{s}$ 且 $v_{bs}=v_{b}-v_{s}$。\n\n输入阻抗。在此模型中，MOS栅极不汲取直流或低频小信号电流（不包括栅极漏电流或电容），因此 $i_{in}=0$，所以\n$$\nZ_{in}=\\frac{v_{in}}{i_{in}}=\\infty.\n$$\n\n电压增益。在源极节点上应用基尔霍夫电流定律 (KCL)。从源极节点流向交流地的电流分别通过 $R_S$ 和 $r_o$，大小分别为 $v_{s}/R_{S}$ 和 $v_{s}/r_{o}$。受控电流源将 $i_d$ 从漏极（地）注入源极节点，其中\n$$\ni_{d}=g_{m}v_{gs}+g_{mb}v_{bs}=g_{m}(v_{g}-v_{s})+g_{mb}(0-v_{s})=g_{m}v_{g}-(g_{m}+g_{mb})v_{s}.\n$$\n源极节点的KCL方程为\n$$\n\\frac{v_{s}}{R_{S}}+\\frac{v_{s}}{r_{o}}=i_{d}=g_{m}v_{g}-(g_{m}+g_{mb})v_{s}.\n$$\n重新整理以合并 $v_s$ 项：\n$$\n\\left(\\frac{1}{R_{S}}+\\frac{1}{r_{o}}+g_{m}+g_{mb}\\right)v_{s}=g_{m}v_{g}.\n$$\n因此，小信号增益为\n$$\nA_{v}=\\frac{v_{out}}{v_{in}}=\\frac{v_{s}}{v_{g}}=\\frac{g_{m}}{g_{m}+g_{mb}+\\frac{1}{R_{S}}+\\frac{1}{r_{o}}}.\n$$\n因此，所求的对是\n$$\n\\left(Z_{in},\\,A_{v}\\right)=\\left(\\infty,\\,\\frac{g_{m}}{g_{m}+g_{mb}+\\frac{1}{R_{S}}+\\frac{1}{r_{o}}}\\right).\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\\infty  \\dfrac{g_{m}}{g_{m}+g_{mb}+\\dfrac{1}{R_{S}}+\\dfrac{1}{r_{o}}}\\end{pmatrix}}$$", "id": "1323366"}, {"introduction": "在高性能模拟电路中，高电压增益是许多应用的核心要求。为了实现这一点，放大器通常使用有源负载来提供比无源电阻器高得多的动态电阻。本练习[@problem_id:1323378]探讨了一个采用级联（cascode）有源负载的共源放大器，你将通过分析发现这种组合如何极大地提升输出阻抗，从而实现卓越的电压增益。", "problem": "考虑一个使用金属氧化物半导体场效应晶体管 (MOSFET) 构建的放大级。该放大级旨在实现高电压增益。\n\n主要放大器件是一个 p 沟道增强型 MOSFET，记为 $M_1$。其源极连接到正电源电压 $V_{DD}$。其栅极作为输入端口，接收叠加在直流偏置上的小信号电压 $v_{in}$。其漏极是放大器的输出端口，提供信号 $v_{out}$。\n\n该放大器的有源负载实现为一个 cascode 电流源，它提供高动态输出电阻。该负载由两个 n 沟道增强型 MOSFET 构建，分别记为 $M_2$ 和 $M_3$。晶体管 $M_2$ 的漏极连接到输出节点（即 $M_1$ 的漏极）。$M_2$ 的栅极连接到一个稳定的直流偏置电压 $V_{B1}$。$M_2$ 的源极连接到 $M_3$ 的漏极。晶体管 $M_3$ 的源极接地，其栅极连接到第二个稳定的直流偏置电压 $V_{B2}$。所有 n 沟道晶体管的衬底端均接地。\n\n假设所有晶体管都偏置在饱和区工作。每个晶体管 $M_i$（其中 $i=1, 2, 3$）的相关小信号参数是其跨导 $g_{mi}$ 和其有限输出电阻 $r_{oi}$。由于晶体管 $M_2$ 的源极未连接到其衬底，它会受到体效应的影响，这引入了一个体效应跨导 $g_{mb2}$。\n\n你的任务是推导该放大级的总小信号电压增益 $A_v = v_{out} / v_{in}$ 的单个闭式解析表达式。你的最终表达式应使用给定的小信号参数表示：$g_{m1}, r_{o1}, g_{m2}, r_{o2}, g_{m3}, r_{o3}$ 和 $g_{mb2}$。", "solution": "将所有直流偏置源，包括 $V_{DD}$、$V_{B1}$ 和 $V_{B2}$，视作交流地。对 $M_i$ 使用参数为 $g_{mi}$ 和 $r_{oi}$ 的小信号混合-$\\pi$ 模型，并因体效应为 $M_2$ 包含 $g_{mb2}$。设输出节点为 $v_{x} \\equiv v_{out}$，$M_2$ 和 $M_3$ 之间的内部节点为 $v_{y}$。$M_2$ 和 $M_3$ 的栅极处于交流地。\n\n对于源极处于交流地的 p 沟道器件 $M_1$，从源极到漏极的受控源为 $g_{m1} v_{sg1}$；因此，由于 $M_1$ 的跨导而离开节点 $v_x$ 的电流为 $-g_{m1} v_{sg1} = g_{m1} v_{in}$，因为 $v_{sg1} = -v_{in}$。流经 $r_{o1}$ 并离开节点 $v_x$ 的电流为 $v_{x}/r_{o1}$。\n\n对于 $M_2$ (nMOS)，其中 $v_{gs2} = -v_{y}$，$v_{bs2} = -v_{y}$，以及 $v_{ds2} = v_{x} - v_{y}$，从漏极到源极的电流（离开节点 $v_x$）为\n$$\ni_{d2} = g_{m2} v_{gs2} + g_{mb2} v_{bs2} + \\frac{v_{ds2}}{r_{o2}} = -(g_{m2} + g_{mb2}) v_{y} + \\frac{v_{x} - v_{y}}{r_{o2}}.\n$$\n对于 $M_3$ (nMOS)，其中 $v_{gs3} = 0$ 且 $v_{ds3} = v_{y}$，离开节点 $v_y$ 的电流为 $v_{y}/r_{o3}$。\n\n在节点 $v_x$ 处列出 KCL 方程（流出电流之和为零）：\n$$\ng_{m1} v_{in} + \\frac{v_{x}}{r_{o1}} - (g_{m2} + g_{mb2}) v_{y} + \\frac{v_{x} - v_{y}}{r_{o2}} = 0,\n$$\n整理后得到\n$$\n\\left( \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} \\right) v_{x} + \\left( -\\frac{1}{r_{o2}} - g_{m2} - g_{mb2} \\right) v_{y} + g_{m1} v_{in} = 0.\n$$\n在节点 $v_y$ 处列出 KCL 方程（流出电流之和为零）。从源极到漏极经由 $M_2$ 离开的电流是 $i_{d2}$ 的负值：\n$$\n(g_{m2} + g_{mb2}) v_{y} - \\frac{v_{x} - v_{y}}{r_{o2}} + \\frac{v_{y}}{r_{o3}} = 0,\n$$\n简化为\n$$\n-\\frac{1}{r_{o2}} v_{x} + \\left( g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}} \\right) v_{y} = 0.\n$$\n求解 $v_y$ 关于 $v_x$ 的表达式：\n$$\nv_{y} = \\frac{ \\frac{1}{r_{o2}} }{ g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}} } \\, v_{x}.\n$$\n将此代入节点 $v_x$ 的 KCL 方程：\n$$\n\\left( \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} \\right) v_{x} - \\left( \\frac{1}{r_{o2}} + g_{m2} + g_{mb2} \\right) \\frac{ \\frac{1}{r_{o2}} }{ g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}} } v_{x} + g_{m1} v_{in} = 0.\n$$\n定义 $A \\equiv g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}}$。$v_x$ 的系数简化为\n$$\n\\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} - \\left( \\frac{1}{r_{o2}} + g_{m2} + g_{mb2} \\right) \\frac{ \\frac{1}{r_{o2}} }{ A }\n= \\frac{1}{r_{o1}} + \\frac{ \\frac{1}{r_{o2}} \\frac{1}{r_{o3}} }{ A }.\n$$\n因此\n$$\n\\left[ \\frac{1}{r_{o1}} + \\frac{ \\frac{1}{r_{o2}} \\frac{1}{r_{o3}} }{ g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}} } \\right] v_{x} + g_{m1} v_{in} = 0,\n$$\n所以\n$$\n\\frac{v_{out}}{v_{in}} = \\frac{v_{x}}{v_{in}} = - \\frac{ g_{m1} }{ \\frac{1}{r_{o1}} + \\frac{ \\frac{1}{r_{o2}} \\frac{1}{r_{o3}} }{ g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}} } }.\n$$\n认识到负载网络的输出电阻是\n$$\nR_{\\text{load}} = \\frac{ g_{m2} + g_{mb2} + \\frac{1}{r_{o2}} + \\frac{1}{r_{o3}} }{ \\frac{1}{r_{o2}} \\frac{1}{r_{o3}} } = r_{o2} + r_{o3} + (g_{m2} + g_{mb2}) r_{o2} r_{o3},\n$$\n总增益可以写成一个不含并联符号的单一闭式形式：\n$$\nA_{v} = - g_{m1} \\frac{ r_{o1} \\left[ r_{o2} + r_{o3} + (g_{m2} + g_{mb2}) r_{o2} r_{o3} \\right] }{ r_{o1} + r_{o2} + r_{o3} + (g_{m2} + g_{mb2}) r_{o2} r_{o3} }.\n$$\n该表达式在所述小信号模型下是精确的，并包含了体效应的贡献 $g_{mb2}$。", "answer": "$$\\boxed{-g_{m1}\\frac{r_{o1}\\left[r_{o2}+r_{o3}+\\left(g_{m2}+g_{mb2}\\right)r_{o2}r_{o3}\\right]}{r_{o1}+r_{o2}+r_{o3}+\\left(g_{m2}+g_{mb2}\\right)r_{o2}r_{o3}}}$$", "id": "1323378"}, {"introduction": "模拟集成电路设计的一大挑战是如何在芯片上实现电感器，因为它们通常体积庞大。一个巧妙的解决方案是使用有源电路来模拟电感行为，而回旋器（gyrator）就是实现这一目标的关键电路。在这个实践中[@problem_id:1323383]，你将分析一个仅由两个PMOS晶体管和一个电容构成的回旋器，并推导出它如何等效为一个电感，这展示了晶体管在电路综合中的强大能力。", "problem": "回旋器是现代模拟集成电路设计中的一个关键电路，它允许使用小型片上元件（如晶体管和电容器）来模拟一个大的电感器。考虑一个由两个p沟道增强型MOSFET（PMOS）（标记为M1和M2）以及一个电容器C构成的回旋器电路。\n\n电路配置如下：\n- 晶体管M1被设置为源极跟随器。其漏极连接到主电源电压$V_{DD}$。其栅极作为整个电路的主要输入端。其源极连接到一个内部节点，我们称之为节点X。\n- 晶体管M2被设置为共源放大器。其源极连接到$V_{DD}$。其栅极连接到节点X。其漏极连接回M1的栅极，即电路的输入端。\n- 一个电容为C的电容器连接在节点X和电源电压$V_{DD}$之间。\n- 输入阻抗$Z_{in}$定义在电路的输入端（M1的栅极），在该处，小信号测试电压$v_{in}$产生小信号输入电流$i_{in}$。\n\n假设两个晶体管都被偏置在饱和区工作。设M1和M2的跨导分别为$g_{m1}$和$g_{m2}$。在本分析中，您必须忽略两个器件的体效应和沟道长度调制效应（即，假设晶体管输出电阻$r_o$为无穷大）。\n\n基于此配置，电路的输入阻抗模拟了一个电阻与一个电感串联的阻抗。请确定该电路在其输入端呈现的等效电感$L_{eq}$的符号表达式。", "solution": "设M1的栅极（也是M2的漏极）处的小信号输入电压为$v_{in}$，节点X处的小信号电压为$v_{x}$。电源节点$V_{DD}$是交流地。如题所述，两个器件的栅极不吸取电流，且$r_{o}\\to\\infty$。\n\n对于PMOS，小信号跨导产生的从源极到漏极的沟道电流等于$i_{sd} = g_{m} v_{sg}$，其中$v_{sg} = v_{s} - v_{g}$。将此应用于M1（源极在节点X，栅极在输入端，漏极在交流地），离开节点X并流经M1的小信号电流为\n$$\ni_{M1} = g_{m1}(v_{x} - v_{in}).\n$$\n从节点X流向地的电容器电流为\n$$\ni_{C} = s C\\, v_{x}.\n$$\n根据基尔霍夫电流定律（离开节点X的电流之和为零，因为没有其他元件连接到节点X），\n$$\ns C\\, v_{x} + g_{m1}(v_{x} - v_{in}) = 0,\n$$\n这得出\n$$\nv_{x} = \\frac{g_{m1}}{s C + g_{m1}}\\, v_{in}.\n$$\n\n输入电流是M2的漏极电流（漏极在输入节点，源极在交流地，栅极在节点X）。对于PMOS，源极到漏极的电流是$i_{sd2} = g_{m2} v_{sg2} = g_{m2}(0 - v_{x}) = - g_{m2} v_{x}$。漏极到源极的电流，即离开输入节点流入M2的电流，是$i_{d2} = -i_{sd2} = g_{m2} v_{x}$。因此，\n$$\ni_{in} = g_{m2} v_{x} = g_{m2}\\,\\frac{g_{m1}}{s C + g_{m1}}\\, v_{in}.\n$$\n因此，输入导纳和阻抗分别为\n$$\nY_{in} = \\frac{i_{in}}{v_{in}} = \\frac{g_{m1} g_{m2}}{s C + g_{m1}}, \n\\qquad\nZ_{in} = \\frac{s C + g_{m1}}{g_{m1} g_{m2}} = \\frac{1}{g_{m2}} + s\\,\\frac{C}{g_{m1} g_{m2}}.\n$$\n这是一个电阻和一个电感串联组合的阻抗，其等效电感为\n$$\nL_{eq} = \\frac{C}{g_{m1} g_{m2}}.\n$$", "answer": "$$\\boxed{\\frac{C}{g_{m1} g_{m2}}}$$", "id": "1323383"}]}
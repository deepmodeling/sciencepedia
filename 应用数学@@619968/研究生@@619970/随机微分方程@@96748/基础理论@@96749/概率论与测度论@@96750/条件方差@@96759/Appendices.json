{"hands_on_practices": [{"introduction": "这个练习直接应用了条件方差的定义。我们从一个简单的连续均匀分布开始，并引入一个条件，你的任务是首先推导出新的条件概率分布，然后用它来计算均值和方差。通过这个过程，你将巩固条件方差最基本的计算方法，即先确定条件分布，再利用标准方差公式 $\\text{Var}(T | A) = \\mathbb{E}[T^2 | A] - (\\mathbb{E}[T | A])^2$ 进行求解。[@problem_id:1351943]", "problem": "在一个简化的网络路由系统模型中，一个数据包到达缓冲区的到达时间被视为一个连续随机变量 $T$。该到达时间在 $0$ 到 $10$ 毫秒 (ms) 的区间上均匀分布。一个网络监控工具在时间 $t = 7$ ms 轮询缓冲区，并报告该数据包尚未到达。在已知此信息的情况下，数据包到达时间 $T$ 的方差是多少？请以 $\\text{ms}^2$ 为单位，用精确分数或小数表示你的答案。", "solution": "设 $T$ 在 $[0,10]$ 上均匀分布，因此其概率密度函数为 $f_{T}(t)=\\frac{1}{10}$（对于 $0 \\leq t \\leq 10$），其他情况下为 $0$。数据包在 $t=7$ 时尚未到达的信息对应于事件 $A=\\{T>7\\}$。该事件的概率为\n$$\nP(A)=\\int_{7}^{10}\\frac{1}{10}\\,dt=\\frac{10-7}{10}=\\frac{3}{10}.\n$$\n给定 $A$ 时 $T$ 的条件密度为\n$$\nf_{T|A}(t)=\\frac{f_{T}(t)}{P(A)}=\\frac{\\frac{1}{10}}{\\frac{3}{10}}=\\frac{1}{3}, \\quad 7 \\leq t \\leq 10,\n$$\n其他情况下为 $0$。因此 $T|A$ 在 $[7,10]$ 上均匀分布。\n\n计算条件均值：\n$$\n\\mathbb{E}[T\\,|\\,A]=\\int_{7}^{10} t \\cdot \\frac{1}{3}\\,dt=\\frac{1}{3}\\left[\\frac{t^{2}}{2}\\right]_{7}^{10}=\\frac{1}{3}\\cdot\\frac{100-49}{2}=\\frac{1}{3}\\cdot\\frac{51}{2}=\\frac{17}{2}.\n$$\n计算条件二阶矩：\n$$\n\\mathbb{E}[T^{2}\\,|\\,A]=\\int_{7}^{10} t^{2} \\cdot \\frac{1}{3}\\,dt=\\frac{1}{3}\\left[\\frac{t^{3}}{3}\\right]_{7}^{10}=\\frac{1}{9}(1000-343)=\\frac{657}{9}=73.\n$$\n因此，条件方差为\n$$\n\\operatorname{Var}(T\\,|\\,A)=\\mathbb{E}[T^{2}\\,|\\,A]-\\left(\\mathbb{E}[T\\,|\\,A]\\right)^{2}=73-\\left(\\frac{17}{2}\\right)^{2}=73-\\frac{289}{4}=\\frac{292-289}{4}=\\frac{3}{4}.\n$$\n因此，在数据包到 $7$ ms 时仍未到达的条件下，其到达时间的方差为 $\\frac{3}{4}$ $\\text{ms}^{2}$。", "answer": "$$\\boxed{\\frac{3}{4}}$$", "id": "1351943"}, {"introduction": "现在我们来看一个更复杂的场景，它涉及一个两阶段随机实验，这是应用全方差公式的绝佳情境。这个强大的定理，$\\operatorname{Var}(Y) = \\mathbb{E}[\\operatorname{Var}(Y \\mid X)] + \\operatorname{Var}(\\mathbb{E}[Y \\mid X])$，使我们能够将一个变量的总方差分解为两部分：条件方差的期望，以及条件期望的方差。这个问题将展示该公式如何巧妙地求出总方差，而无需显式地计算变量 $Y$ 的边缘分布，从而突显其在处理分层模型中的威力。[@problem_id:1292256]", "problem": "考虑一个两阶段的随机实验。在第一阶段，一个随机变量 $X$ 从区间 $[-1, 1]$ 上的连续均匀分布中生成。在第二阶段，以结果 $X=x$ 为条件，第二个随机变量 $Y$ 从均值为 $x$、方差为 $x^2 + 1$ 的正态分布中生成。\n\n确定随机变量 $Y$ 的总方差，记为 $\\text{Var}(Y)$。\n\n请用一个单一的闭式解析表达式给出你的答案，该表达式可以是一个分数。", "solution": "设 $X \\sim \\text{Uniform}([-1,1])$，因此其密度函数为 $f_{X}(x) = \\frac{1}{2}$，其中 $x \\in [-1,1]$。计算其前两阶矩：\n$$\n\\mathbb{E}[X] = \\int_{-1}^{1} x \\cdot \\frac{1}{2} \\, dx = 0,\n$$\n$$\n\\mathbb{E}[X^{2}] = \\int_{-1}^{1} x^{2} \\cdot \\frac{1}{2} \\, dx = \\frac{1}{2} \\left[ \\frac{x^{3}}{3} \\right]_{-1}^{1} = \\frac{1}{2} \\cdot \\frac{2}{3} = \\frac{1}{3}.\n$$\n因此，\n$$\n\\operatorname{Var}(X) = \\mathbb{E}[X^{2}] - (\\mathbb{E}[X])^{2} = \\frac{1}{3}.\n$$\n在 $X=x$ 的条件下，我们有 $Y|X=x \\sim \\mathcal{N}(x, x^{2}+1)$，所以\n$$\n\\mathbb{E}[Y \\mid X] = X, \\qquad \\operatorname{Var}(Y \\mid X) = X^{2} + 1.\n$$\n根据全方差公式，\n$$\n\\operatorname{Var}(Y) = \\mathbb{E}[\\operatorname{Var}(Y \\mid X)] + \\operatorname{Var}(\\mathbb{E}[Y \\mid X]).\n$$\n计算每一项：\n$$\n\\mathbb{E}[\\operatorname{Var}(Y \\mid X)] = \\mathbb{E}[X^{2} + 1] = \\mathbb{E}[X^{2}] + 1 = \\frac{1}{3} + 1 = \\frac{4}{3},\n$$\n$$\n\\operatorname{Var}(\\mathbb{E}[Y \\mid X]) = \\operatorname{Var}(X) = \\frac{1}{3}.\n$$\n因此，\n$$\n\\operatorname{Var}(Y) = \\frac{4}{3} + \\frac{1}{3} = \\frac{5}{3}.\n$$", "answer": "$$\\boxed{\\frac{5}{3}}$$", "id": "1292256"}, {"introduction": "最后一个实践问题将条件方差置于贝叶斯推断和信号处理的背景下。我们将计算在观测到一个带噪信号后，关于原始发送信号的剩余不确定性。这个练习阐明了一个关键概念：观测数据 $X=x$ 如何更新我们的知识并减少我们对未知参数 $\\mu$ 的不确定性（方差），从而将条件方差与统计学习和滤波理论的核心思想联系起来。[@problem_id:1351903]", "problem": "在一个二进制通信系统中，发送器发送一个信号电平 $\\mu$，该电平从集合 $\\{-1, 1\\}$ 中随机选取。这两个电平是等可能的，即 $P(\\mu = 1) = P(\\mu = -1) = 1/2$。该信号受到加性噪声的干扰，噪声被建模为一个随机变量 $N$，它服从均值为0、方差为1的标准正态分布。接收器测量到的最终信号为 $X = \\mu + N$。一位工程师在接收端观测到一个具体值 $X=x$。基于这个观测值，该工程师想要量化他们对于最初发送的是哪个信号电平 $\\mu$ 的剩余不确定性。\n\n作为这种不确定性的度量，请计算在观测到 $X = x$ 的条件下，原始信号 $\\mu$ 的方差。也就是说，找出 $\\text{Var}(\\mu | X = x)$ 的表达式。\n\n你的答案应该是一个用 $x$ 表示的闭式解析表达式。", "solution": "我们给定一个二进制输入 $\\mu \\in \\{-1,1\\}$，其概率为 $P(\\mu=1)=P(\\mu=-1)=\\frac{1}{2}$，一个与 $\\mu$ 独立的加性噪声 $N \\sim \\mathcal{N}(0,1)$，以及观测值 $X=\\mu+N$。对于一个已实现的观测值 $X=x$，我们要求解 $\\text{Var}(\\mu \\mid X=x)$。\n\n根据贝叶斯法则，\n$$\nP(\\mu=1 \\mid X=x)=\\frac{f_{X \\mid \\mu}(x \\mid 1) P(\\mu=1)}{f_{X \\mid \\mu}(x \\mid 1) P(\\mu=1)+f_{X \\mid \\mu}(x \\mid -1) P(\\mu=-1)}.\n$$\n由于在给定 $\\mu=m$ 的条件下，$X$ 是均值为 $m$、方差为1的高斯分布，其密度函数为\n$$\nf_{X \\mid \\mu}(x \\mid m)=\\frac{1}{\\sqrt{2\\pi}} \\exp\\!\\left(-\\frac{(x-m)^{2}}{2}\\right).\n$$\n使用 $P(\\mu=1)=P(\\mu=-1)=\\frac{1}{2}$ 并消去公共因子，我们得到\n$$\nP(\\mu=1 \\mid X=x)=\\frac{\\exp\\!\\left(-\\frac{(x-1)^{2}}{2}\\right)}{\\exp\\!\\left(-\\frac{(x-1)^{2}}{2}\\right)+\\exp\\!\\left(-\\frac{(x+1)^{2}}{2}\\right)}.\n$$\n化简指数部分：\n$$\n-\\frac{(x-1)^{2}}{2}=-\\frac{x^{2}}{2}+x-\\frac{1}{2}, \n\\quad\n-\\frac{(x+1)^{2}}{2}=-\\frac{x^{2}}{2}-x-\\frac{1}{2}.\n$$\n分子和分母同乘以 $\\exp\\!\\left(\\frac{x^{2}}{2}+\\frac{1}{2}\\right)$，得到\n$$\nP(\\mu=1 \\mid X=x)=\\frac{\\exp(x)}{\\exp(x)+\\exp(-x)}=\\frac{1}{1+\\exp(-2x)}.\n$$\n因此，\n$$\nP(\\mu=-1 \\mid X=x)=1-P(\\mu=1 \\mid X=x)=\\frac{1}{1+\\exp(2x)}.\n$$\n条件均值为\n$$\n\\mathbb{E}[\\mu \\mid X=x]=(+1)P(\\mu=1 \\mid X=x)+(-1)P(\\mu=-1 \\mid X=x)\n=2P(\\mu=1 \\mid X=x)-1=\\tanh(x),\n$$\n因为\n$$\n2\\left(\\frac{1}{1+\\exp(-2x)}\\right)-1=\\frac{1-\\exp(-2x)}{1+\\exp(-2x)}=\\tanh(x).\n$$\n接下来，使用公式 $\\text{Var}(\\mu \\mid X=x)=\\mathbb{E}[\\mu^{2} \\mid X=x]-\\big(\\mathbb{E}[\\mu \\mid X=x]\\big)^{2}$。因为 $\\mu \\in \\{-1,1\\}$，我们确定地有 $\\mu^{2}=1$，因此 $\\mathbb{E}[\\mu^{2} \\mid X=x]=1$。所以，\n$$\n\\text{Var}(\\mu \\mid X=x)=1-\\tanh^{2}(x)=\\frac{1}{\\cosh^{2}(x)}.\n$$\n这两种形式都是用 $x$ 表示的等价的闭式表达式。", "answer": "$$\\boxed{1-\\tanh^{2}(x)}$$", "id": "1351903"}]}
{"hands_on_practices": [{"introduction": "要运用四元数来描述旋转，首先必须熟练掌握其基本代数运算。本练习将引导你实践四元数的乘法、共轭和范数计算，这些是构建更复杂变换（如连续旋转）的基石。通过这个练习，你将巩固对四元数基本性质的理解。[@problem_id:1534848]", "problem": "在计算力学和计算机图形学中，四元数被用于表示物体的旋转和朝向。一个四元数 $q$ 是形如 $q = q_0 + q_1 \\mathbf{i} + q_2 \\mathbf{j} + q_3 \\mathbf{k}$ 的元素，其中 $q_0, q_1, q_2, q_3$ 是实数，而 $\\mathbf{i}, \\mathbf{j}, \\mathbf{k}$ 是基本的四元数单位。这些单位遵循乘法法则：$\\mathbf{i}^2 = \\mathbf{j}^2 = \\mathbf{k}^2 = \\mathbf{ijk} = -1$。\n\n考虑代表两个连续操作的两个四元数：\n$$p = 1 + 2\\mathbf{i} - \\mathbf{j} + 3\\mathbf{k}$$\n$$q = 4 - 3\\mathbf{i} + 2\\mathbf{j} - \\mathbf{k}$$\n组合操作由四元数积 $r=pq$ 表示。\n\n确定结果四元数 $r$ 的共轭 $r^*$ 和范数 $\\|r\\|$。\n\n将您的答案表示为一个单行矩阵，其中按以下顺序包含五个元素：共轭四元数 $r^* = r_0^* + r_1^*\\mathbf{i} + r_2^*\\mathbf{j} + r_3^*\\mathbf{k}$ 的四个系数 $(r_0^*, r_1^*, r_2^*, r_3^*)$，以及范数 $\\|r\\|$。例如，如果您计算出 $r^* = A + B\\mathbf{i} + C\\mathbf{j} + D\\mathbf{k}$ 且 $\\|r\\| = E$，您的答案应为矩阵 $\\begin{pmatrix} A & B & C & D & E \\end{pmatrix}$。", "solution": "我们使用标准的四元数乘法，其单位满足 $\\mathbf{i}^{2}=\\mathbf{j}^{2}=\\mathbf{k}^{2}=\\mathbf{ijk}=-1$ 以及关系式 $\\mathbf{i}\\mathbf{j}=\\mathbf{k}$，$\\mathbf{j}\\mathbf{k}=\\mathbf{i}$，$\\mathbf{k}\\mathbf{i}=\\mathbf{j}$，且反向乘积取负。\n\n记 $p= p_{0}+p_{1}\\mathbf{i}+p_{2}\\mathbf{j}+p_{3}\\mathbf{k}$ 和 $q= q_{0}+q_{1}\\mathbf{i}+q_{2}\\mathbf{j}+q_{3}\\mathbf{k}$，其中\n$p_{0}=1$, $p_{1}=2$, $p_{2}=-1$, $p_{3}=3$，以及 $q_{0}=4$, $q_{1}=-3$, $q_{2}=2$, $q_{3}=-1$。\n\n乘积 $r=pq$ 的分量为\n$$\n\\begin{aligned}\nr_{0} &= p_{0}q_{0}-p_{1}q_{1}-p_{2}q_{2}-p_{3}q_{3},\\\\\nr_{1} &= p_{0}q_{1}+p_{1}q_{0}+p_{2}q_{3}-p_{3}q_{2},\\\\\nr_{2} &= p_{0}q_{2}-p_{1}q_{3}+p_{2}q_{0}+p_{3}q_{1},\\\\\nr_{3} &= p_{0}q_{3}+p_{1}q_{2}-p_{2}q_{1}+p_{3}q_{0}.\n\\end{aligned}\n$$\n代入给定值，\n$$\n\\begin{aligned}\nr_{0} &= 1\\cdot 4 - 2\\cdot(-3) - (-1)\\cdot 2 - 3\\cdot(-1) = 4+6+2+3=15,\\\\\nr_{1} &= 1\\cdot(-3) + 2\\cdot 4 + (-1)\\cdot(-1) - 3\\cdot 2 = -3+8+1-6=0,\\\\\nr_{2} &= 1\\cdot 2 - 2\\cdot(-1) + (-1)\\cdot 4 + 3\\cdot(-3) = 2+2-4-9=-9,\\\\\nr_{3} &= 1\\cdot(-1) + 2\\cdot 2 - (-1)\\cdot(-3) + 3\\cdot 4 = -1+4-3+12=12.\n\\end{aligned}\n$$\n因此 $r=15+0\\,\\mathbf{i}-9\\,\\mathbf{j}+12\\,\\mathbf{k}$。\n\n四元数 $a+b\\mathbf{i}+c\\mathbf{j}+d\\mathbf{k}$ 的共轭是 $a-b\\mathbf{i}-c\\mathbf{j}-d\\mathbf{k}$。因此\n$$\nr^{*}=15-0\\,\\mathbf{i}+9\\,\\mathbf{j}-12\\,\\mathbf{k}.\n$$\n\n范数为 $\\|r\\|=\\sqrt{r_{0}^{2}+r_{1}^{2}+r_{2}^{2}+r_{3}^{2}}$。所以，\n$$\n\\|r\\|=\\sqrt{15^{2}+0^{2}+(-9)^{2}+12^{2}}=\\sqrt{225+81+144}=\\sqrt{450}=15\\sqrt{2}.\n$$\n同样地，利用四元数范数的乘法性质 $\\|r\\|=\\|p\\|\\|q\\|$，其中 $\\|p\\|^{2}=1^{2}+2^{2}+(-1)^{2}+3^{2}=15$ 且 $\\|q\\|^{2}=4^{2}+(-3)^{2}+2^{2}+(-1)^{2}=30$，得出 $\\|r\\|=\\sqrt{15\\cdot 30}=15\\sqrt{2}$，这与直接计算的结果一致。\n\n因此，所求的行矩阵是 $\\begin{pmatrix} 15 & 0 & 9 & -12 & 15\\sqrt{2} \\end{pmatrix}$。", "answer": "$$\\boxed{\\begin{pmatrix} 15 & 0 & 9 & -12 & 15\\sqrt{2} \\end{pmatrix}}$$", "id": "1534848"}, {"introduction": "掌握了基本运算后，我们可以开始解决四元数代数方程。这个练习要求你求解一个形如 $ax=b$ 的线性方程，这在非交换代数中是一个典型问题。为了解决它，你需要计算一个四元数的逆，这一技巧在机器人运动学和刚体动力学中用于“撤销”或反转一个旋转时至关重要。[@problem_id:1534832]", "problem": "在作为描述三维空间中旋转基础的四元数代数中，我们经常遇到线性方程。一个四元数 $q$ 是形如 $q = w + x\\mathbf{i} + y\\mathbf{j} + z\\mathbf{k}$ 的元素，其中 $w, x, y, z$ 是实数，四元数单位 $\\mathbf{i}, \\mathbf{j}, \\mathbf{k}$ 满足关系 $\\mathbf{i}^2 = \\mathbf{j}^2 = \\mathbf{k}^2 = \\mathbf{ijk} = -1$。\n\n考虑方程 $ax = b$，其中 $a$ 和 $b$ 是给定的非零四元数，$x$ 是未知的四元数。与实数不同，四元数乘法不满足交换律，因此乘法顺序至关重要。\n\n给定四元数 $a = 1 + \\mathbf{i} + \\mathbf{j} + \\mathbf{k}$ 和 $b = 4 + 2\\mathbf{i} + 2\\mathbf{k}$，请确定满足方程 $ax=b$ 的唯一四元数 $x$。\n\n你的最终答案应该是 $x$ 的一个表达式，其形式为 $w + x\\mathbf{i} + y\\mathbf{j} + z\\mathbf{k}$。", "solution": "我们要解关于 $x$ 的方程 $a x = b$，其中 $a = 1 + \\mathbf{i} + \\mathbf{j} + \\mathbf{k}$ 且 $b = 4 + 2\\mathbf{i} + 2\\mathbf{k}$。对于非零四元数，左乘 $a$ 是可逆的，唯一解为 $x = a^{-1} b$，其中非零四元数 $q$ 的逆是 $q^{-1} = q^{*} / |q|^{2}$，$q^{*}$ 是四元数共轭，$|q|^{2}$ 是其模长的平方。\n\n计算 $a$ 的共轭和模长：\n$$\na^{*} = 1 - \\mathbf{i} - \\mathbf{j} - \\mathbf{k}, \\quad |a|^{2} = 1^{2} + 1^{2} + 1^{2} + 1^{2} = 4.\n$$\n因此\n$$\na^{-1} = \\frac{a^{*}}{|a|^{2}} = \\frac{1 - \\mathbf{i} - \\mathbf{j} - \\mathbf{k}}{4},\n\\quad\\text{所以}\\quad\nx = a^{-1} b = \\frac{1}{4}\\,(1 - \\mathbf{i} - \\mathbf{j} - \\mathbf{k})(4 + 2\\mathbf{i} + 2\\mathbf{k}).\n$$\n\n使用 $\\mathbf{i}^{2} = \\mathbf{j}^{2} = \\mathbf{k}^{2} = -1$，$\\mathbf{ij} = \\mathbf{k}$，$\\mathbf{jk} = \\mathbf{i}$，$\\mathbf{ki} = \\mathbf{j}$ 和反交换关系展开乘积：\n$$\n(1 - \\mathbf{i} - \\mathbf{j} - \\mathbf{k})(4 + 2\\mathbf{i} + 2\\mathbf{k})\n= 1\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) + (-\\mathbf{i})\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) + (-\\mathbf{j})\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) + (-\\mathbf{k})\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}).\n$$\n计算每一项：\n$$\n1\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) = 4 + 2\\mathbf{i} + 2\\mathbf{k},\n$$\n$$\n(-\\mathbf{i})\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) = -4\\mathbf{i} - 2\\mathbf{i}^{2} - 2\\mathbf{i}\\mathbf{k} = -4\\mathbf{i} + 2 + 2\\mathbf{j},\n$$\n$$\n(-\\mathbf{j})\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) = -4\\mathbf{j} - 2\\mathbf{j}\\mathbf{i} - 2\\mathbf{j}\\mathbf{k} = -4\\mathbf{j} + 2\\mathbf{k} - 2\\mathbf{i},\n$$\n$$\n(-\\mathbf{k})\\cdot(4 + 2\\mathbf{i} + 2\\mathbf{k}) = -4\\mathbf{k} - 2\\mathbf{k}\\mathbf{i} - 2\\mathbf{k}^{2} = -4\\mathbf{k} - 2\\mathbf{j} + 2.\n$$\n将这些项相加，得到\n$$\n8 - 4\\mathbf{i} - 4\\mathbf{j} + 0\\mathbf{k}.\n$$\n因此，\n$$\nx = \\frac{1}{4}\\,(8 - 4\\mathbf{i} - 4\\mathbf{j} + 0\\mathbf{k}) = 2 - \\mathbf{i} - \\mathbf{j} + 0\\mathbf{k}.\n$$\n\n直接检验可确认 $(1 + \\mathbf{i} + \\mathbf{j} + \\mathbf{k})(2 - \\mathbf{i} - \\mathbf{j} + 0\\mathbf{k}) = 4 + 2\\mathbf{i} + 2\\mathbf{k} = b$，因此这个 $x$ 是方程 $a x = b$ 的唯一解。", "answer": "$$\\boxed{2 - \\mathbf{i} - \\mathbf{j} + 0\\mathbf{k}}$$", "id": "1534832"}, {"introduction": "现在，我们将理论付诸实践，直接应用四元数来旋转一个三维向量。这个练习的核心是“三明治”乘积 $p_{v'} = q p_v q^*$，这是四元数表示旋转的标志性公式。通过计算一个向量在经过四元数变换后的新坐标，你将亲身体验到抽象的四元数代数如何优雅地在三维空间中实现几何旋转。[@problem_id:1534811]", "problem": "在计算机图形学和航空航天工程等领域，四元数提供了一种高效且无歧义的方法来表示三维空间中的方向和旋转。一个向量 $\\vec{v} = v_x \\mathbf{i} + v_y \\mathbf{j} + v_z \\mathbf{k}$ 可以表示为一个“纯”四元数（即标量部分为零的四元数），形式为 $p_v = 0 + v_x \\mathbf{i} + v_y \\mathbf{j} + v_z \\mathbf{k}$。\n\n该向量通过一个一般四元数 $q = w + x\\mathbf{i} + y\\mathbf{j} + z\\mathbf{k}$ 的变换由夹积描述：\n$$ p_{v'} = q p_v q^* $$\n此处，$p_{v'}$ 是对应于新向量 $\\vec{v'}$ 的纯四元数，而 $q^* = w - x\\mathbf{i} - y\\mathbf{j} - z\\mathbf{k}$ 是 $q$ 的共轭。四元数基元的乘法遵循以下基本法则：$\\mathbf{i}^2 = \\mathbf{j}^2 = \\mathbf{k}^2 = -1$，以及 $\\mathbf{i}\\mathbf{j} = \\mathbf{k}$，$\\mathbf{j}\\mathbf{k} = \\mathbf{i}$，$\\mathbf{k}\\mathbf{i} = \\mathbf{j}$，这也意味着 $\\mathbf{j}\\mathbf{i} = -\\mathbf{k}$，$\\mathbf{k}\\mathbf{j} = -\\mathbf{i}$，以及 $\\mathbf{i}\\mathbf{k} = -\\mathbf{j}$。\n\n考虑四元数 $q = 2 + 2\\mathbf{k}$ 和初始向量 $\\vec{v} = 3\\mathbf{i}$。计算变换后向量 $\\vec{v'}$ 的分量。将你的答案表示为行矩阵 $\\begin{pmatrix} v'_x & v'_y & v'_z \\end{pmatrix}$。", "solution": "我们将向量 $\\vec{v}=3\\mathbf{i}$ 表示为纯四元数 $p_{v}=3\\mathbf{i}$。给定的四元数是 $q=2+2\\mathbf{k}$，其共轭为 $q^{*}=2-2\\mathbf{k}$。变换后的纯四元数通过夹积 $p_{v'}=q\\,p_{v}\\,q^{*}$ 计算。\n\n首先计算 $q\\,p_{v}$：\n$$\nq\\,p_{v}=(2+2\\mathbf{k})(3\\mathbf{i})=2\\cdot 3\\mathbf{i}+2\\mathbf{k}\\cdot 3\\mathbf{i}=6\\mathbf{i}+6(\\mathbf{k}\\mathbf{i})=6\\mathbf{i}+6\\mathbf{j},\n$$\n使用了 $\\mathbf{k}\\mathbf{i}=\\mathbf{j}$。\n\n接下来在右侧乘以 $q^{*}$：\n$$\np_{v'}=(6\\mathbf{i}+6\\mathbf{j})(2-2\\mathbf{k})=(6\\mathbf{i}+6\\mathbf{j})\\cdot 2+(6\\mathbf{i}+6\\mathbf{j})(-2\\mathbf{k})\n=12\\mathbf{i}+12\\mathbf{j}-12(\\mathbf{i}\\mathbf{k})-12(\\mathbf{j}\\mathbf{k}).\n$$\n使用 $\\mathbf{i}\\mathbf{k}=-\\mathbf{j}$ 和 $\\mathbf{j}\\mathbf{k}=\\mathbf{i}$，我们得到\n$$\np_{v'}=12\\mathbf{i}+12\\mathbf{j}-12(-\\mathbf{j})-12(\\mathbf{i})\n=12\\mathbf{i}+12\\mathbf{j}+12\\mathbf{j}-12\\mathbf{i}=24\\mathbf{j}.\n$$\n\n因此，变换后的纯四元数是 $p_{v'}=24\\mathbf{j}$。对应的变换后向量是 $\\vec{v'}=(0, 24, 0)$，其分量为 $\\begin{pmatrix}0 & 24 & 0\\end{pmatrix}$。（注意：由于 $q$ 不是单位四元数，$q\\,p_{v}\\,q^{*}$ 会将旋转后的向量缩放 $|q|^{2}$ 倍；此处 $|q|^{2}=8$，因此将 $3\\mathbf{i}$ 对应的向量绕 $\\mathbf{k}$ 轴旋转 $\\frac{\\pi}{2}$ 得到 $3\\mathbf{j}$ 对应的向量，然后缩放至 $24\\mathbf{j}$ 对应的向量。）", "answer": "$$\\boxed{\\begin{pmatrix} 0 & 24 & 0 \\end{pmatrix}}$$", "id": "1534811"}]}
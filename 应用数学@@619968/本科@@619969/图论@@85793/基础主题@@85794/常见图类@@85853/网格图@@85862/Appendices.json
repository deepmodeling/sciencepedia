{"hands_on_practices": [{"introduction": "在分析网格图之前，我们需要一种精确描述其结构的方法。本练习将通过构建一个小型网格图 $G_{2,4}$ 的邻接表，帮助你将抽象的图定义转化为具体的数据表示，从而牢固掌握网格图的邻接关系。[@problem_id:1509949]", "problem": "在图论中，一个 $m \\times n$ 网格图，记为 $G_{m,n}$，是一个图，其顶点集 $V$ 可以与整数坐标对 $(i,j)$ 的集合等同，其中 $0 \\le i < m$ 且 $0 \\le j < n$。两个顶点 $(i,j)$ 和 $(i',j')$ 之间存在一条边，当且仅当它们在网格中相邻，这意味着它们的曼哈顿距离为 1，即 $|i - i'| + |j - j'| = 1$。\n\n邻接表是表示图的一种常用方法。对于每个顶点，它存储其相邻顶点的列表。\n\n你的任务是确定网格图 $G_{2,4}$ 的正确邻接表表示法。该表示法必须遵循以下特定的格式化规则：\n1.  该表示法是一个单一的文本字符串。\n2.  每个顶点的邻接表以 `(i,j):[neighbor1, neighbor2, ...]` 的格式给出。\n3.  这8个顶点中每个顶点的条目都按照顶点坐标的字典序呈现。例如，$(0,1)$ 的条目在 $(0,0)$ 之后，但在 $(1,0)$ 之前。\n4.  各条目之间用一个分号后跟一个空格（`; `）分隔。\n5.  在每个列表中，相邻顶点也必须按字典序排序。\n\n以下哪个选项表示了 $G_{2,4}$ 的正确邻接表？\n\nA. `(0,0):[(0,1),(1,0)]; (0,1):[(0,0),(0,2),(1,1)]; (0,2):[(0,1),(0,3),(1,2)]; (0,3):[(0,2),(1,3)]; (1,0):[(0,0),(1,1)]; (1,1):[(0,1),(1,0),(1,2)]; (1,2):[(0,2),(1,1),(1,3)]; (1,3):[(0,3),(1,2)]`\n\nB. `(0,0):[(0,1),(1,0)]; (0,1):[(0,0),(0,2)]; (0,2):[(0,1),(0,3),(1,2)]; (0,3):[(0,2),(1,3)]; (1,0):[(0,0),(1,1)]; (1,1):[(1,0),(1,2)]; (1,2):[(0,2),(1,1),(1,3)]; (1,3):[(0,3),(1,2)]`\n\nC. `(0,0):[(0,1),(1,0),(1,1)]; (0,1):[(0,0),(0,2),(1,1)]; (0,2):[(0,1),(0,3),(1,2)]; (0,3):[(0,2),(1,3)]; (1,0):[(0,0),(1,1)]; (1,1):[(0,0),(0,1),(1,0),(1,2)]; (1,2):[(0,2),(1,1),(1,3)]; (1,3):[(0,3),(1,2)]`\n\nD. `(0,0):[(0,1),(1,0)]; (0,1):[(0,0),(1,1)]; (1,0):[(0,0),(1,1),(2,0)]; (1,1):[(0,1),(1,0),(2,1)]; (2,0):[(1,0),(2,1),(3,0)]; (2,1):[(1,1),(2,0),(3,1)]; (3,0):[(2,0),(3,1)]; (3,1):[(2,1),(3,0)]`\n\nE. `(0,0):[(0,1),(0,3),(1,0)]; (0,1):[(0,0),(0,2),(1,1)]; (0,2):[(0,1),(0,3),(1,2)]; (0,3):[(0,0),(0,2),(1,3)]; (1,0):[(0,0),(1,1),(1,3)]; (1,1):[(0,1),(1,0),(1,2)]; (1,2):[(0,2),(1,1),(1,3)]; (1,3):[(0,3),(1,0),(1,2)]`", "solution": "根据定义，$G_{2,4}$ 的顶点集按字典序为 $V=\\{(i,j)\\,:\\,0\\leq i<2,\\ 0\\leq j<4\\}=\\{(0,0),(0,1),(0,2),(0,3),(1,0),(1,1),(1,2),(1,3)\\}$。两个顶点 $(i,j)$ 和 $(i',j')$ 相邻，当且仅当它们的曼哈顿距离为 $|i-i'|+|j-j'|=1$。\n\n我们确定每个顶点的邻居：\n- 对于 $(0,0)$：候选邻居是 $(0,1)$（因为 $|0-0|+|0-1|=1$）和 $(1,0)$（因为 $|0-1|+|0-0|=1$）。在索引边界内没有其他顶点满足该条件。因此，邻居是 $(0,1)$ 和 $(1,0)$，按字典序排序后为 $[(0,1), (1,0)]$。\n- 对于 $(0,1)$：候选邻居是纵向上的 $(0,0)$ 和 $(0,2)$，以及横向上的 $(1,1)$，它们的曼哈顿距离都为 1。因此，邻居是 $[(0,0),(0,2),(1,1)]$。\n- 对于 $(0,2)$：候选邻居是纵向上的 $(0,1)$ 和 $(0,3)$，以及横向上的 $(1,2)$。因此，邻居是 $[(0,1),(0,3),(1,2)]$。\n- 对于 $(0,3)$：候选邻居是纵向上的 $(0,2)$ 和横向上的 $(1,3)$。因此，邻居是 $[(0,2),(1,3)]$。\n- 对于 $(1,0)$：候选邻居是横向上的 $(0,0)$ 和纵向上的 $(1,1)$。因此，邻居是 $[(0,0),(1,1)]$。\n- 对于 $(1,1)$：候选邻居是横向上的 $(0,1)$ 以及纵向上的 $(1,0)$ 和 $(1,2)$。因此，邻居是 $[(0,1),(1,0),(1,2)]$。\n- 对于 $(1,2)$：候选邻居是横向上的 $(0,2)$ 以及纵向上的 $(1,1)$ 和 $(1,3)$。因此，邻居是 $[(0,2),(1,1),(1,3)]$。\n- 对于 $(1,3)$：候选邻居是横向上的 $(0,3)$ 和纵向上的 $(1,2)$。因此，邻居是 $[(0,3),(1,2)]$。\n\n将各顶点的条目按其坐标的字典序排列，并将每个邻居列表也按字典序排序，组合起来可得：\n(0,0):[(0,1),(1,0)]; (0,1):[(0,0),(0,2),(1,1)]; (0,2):[(0,1),(0,3),(1,2)]; (0,3):[(0,2),(1,3)]; (1,0):[(0,0),(1,1)]; (1,1):[(0,1),(1,0),(1,2)]; (1,2):[(0,2),(1,1),(1,3)]; (1,3):[(0,3),(1,2)]，这与选项A匹配。其他选项或者遗漏了必需的邻居，或者包含了不相邻的对角线顶点，或者使用了错误的网格尺寸，或者添加了环绕边，因此它们是不正确的。", "answer": "$$\\boxed{A}$$", "id": "1509949"}, {"introduction": "许多现实世界的问题可以被建模为在图中寻找一条特殊的路径，例如机器人一次性巡查所有通道。本练习将探讨应用于网格图的欧拉路径概念，即走过每条边恰好一次的路径，这需要你运用图论基本定理，通过分析顶点的度来确定存在这种路径的条件。[@problem_id:1509922]", "problem": "一个机器人保安被设计用于在一个现代化的单层研究设施的走廊网络中巡逻。走廊的布局形成一个完美的矩形网格。这个网格可以被建模为一个图 $G_{m,n}$，其中走廊的交叉口是顶点，走廊本身是边。该网格有 $m$ 行和 $n$ 列的交叉口，其中 $m$ 和 $n$ 是正整数。\n\n为了完成一次完整的安全巡查，机器人必须沿着每一条走廊恰好行进一次。机器人可以从任意交叉口开始，并在任意交叉口结束（起点和终点不必相同）。你的任务是确定网格的维度 $m$ 和 $n$ 满足什么条件时，这样的巡逻是可能的。\n\n以下关于正整数 $m$ 和 $n$ 的哪个条件，正确且完整地描述了网格图 $G_{m,n}$ 允许进行此类巡逻的所有情况？\n\nA. 维度之积 $mn$ 是一个偶数。\n\nB. 维度 $m$ 和 $n$ 都是偶数。\n\nC. 至少有一个维度 $m$ 或 $n$ 小于或等于 2。\n\nD. 维度 $m$ 和 $n$ 都是奇数。\n\nE. 至少有一个维度是 1，或者维度对 $\\{m, n\\}$ 是 $\\{2, 2\\}$ 或 $\\{2, 3\\}$ 中的一个。", "solution": "我们将走廊建模为无向网格图 $G_{m,n}$，它有 $m$ 行和 $n$ 列的顶点，水平和垂直相邻的顶点之间有边相连。一次恰好使用每条边一次的遍历称为欧拉迹。对于一个无向图，存在欧拉迹的充分必要条件是该图恰好有 0 个或 2 个奇数度的顶点。\n\n计算 $G_{m,n}$ 中顶点的度：\n- 内部顶点的度为 $4$ (偶数)。\n- 角顶点的度为 $2$ (偶数)。\n- 非角的边界顶点的度为 $3$ (奇数)。\n\n当 $m,n \\geq 2$ 时，奇数度顶点的数量等于非角边界顶点的数量：\n$$\n\\text{奇数度顶点数} = 2(n-2) + 2(m-2) = 2(m+n-4).\n$$\n为了存在欧拉迹，我们需要 $2(m+n-4) \\in \\{0,2\\}$。\n\n解方程 $2(m+n-4)=0$ 得 $m+n=4$。在 $m,n \\geq 2$ 的条件下，唯一可能性是 $(m,n)=(2,2)$。\n解方程 $2(m+n-4)=2$ 得 $m+n=5$。在 $m,n \\geq 2$ 的条件下，可能性是 $(m,n)=(2,3)$ 或 $(3,2)$。\n\n现在处理至少有一个维度等于 $1$ 的情况。如果 $\\min(m,n)=1$，该网格是一个有 $\\max(m,n)$ 个顶点的简单路径：当 $\\max(m,n)\\geq 2$ 时，它有两个度为 1 的顶点（奇数），因此存在一条欧拉迹；当 $m=n=1$ 时，它没有奇数度顶点，因此存在一个欧拉回路。在所有至少一个维度等于 1 的情况下，都存在欧拉迹。\n\n如果 $m,n \\geq 3$，那么 $2(m+n-4) \\geq 4$，所以至少有四个奇数度顶点，不存在欧拉迹。\n\n因此，存在欧拉迹的充分必要条件是，至少有一个维度是 1，或者维度对 $\\{m,n\\}$ 是 $\\{2,2\\}$ 或 $\\{2,3\\}$。这与选项 E 相符，并排除了所有其他选项。", "answer": "$$\\boxed{E}$$", "id": "1509922"}, {"introduction": "网格图是组合计数问题的天然试验场，在路径规划等领域有广泛应用。本练习将带你处理一个经典问题：计算网格中两点间的最短路径数量，并通过移除一个顶点来增加挑战，这需要你巧妙地运用组合学中的容斥原理来找到答案。[@problem_id:1509946]", "problem": "设网格图 $G_{m,n}$ 定义在顶点集 $V = \\{(i,j) \\in \\mathbb{Z}^2 \\mid 1 \\le i \\le m, 1 \\le j \\le n\\}$ 上。两个顶点 $(i_1, j_1)$ 和 $(i_2, j_2)$ 由一条边连接，当且仅当 $|i_1 - i_2| + |j_1 - j_2| = 1$。\n\n考虑特定的网格图 $G_{10,12}$。从该图中移除坐标为 $(4,5)$ 的一个内部顶点，得到一个新图 $G'$。如果一个顶点 $(i,j)$ 满足 $1 < i < 10$ 和 $1 < j < 12$，则它被定义为内部顶点。\n\n确定在修改后的图 $G'$ 中，从顶点 $(1,1)$ 到顶点 $(10,12)$ 的最短路径的数量。", "solution": "在网格 $G_{10,12}$ 中，从 $(1,1)$ 到 $(10,12)$ 的最短路径长度是曼哈顿距离\n$$\n(10-1) + (12-1) = 9 + 11 = 20,\n$$\n因此，任何最短路径都由恰好 $9$ 步增加 $i$ 和 $11$ 步增加 $j$ 组成。在未修改的网格中，最短路径的总数是包含 $9$ 步某类型和 $11$ 步另一类型的 $20$ 步序列的数量，即\n$$\n\\binom{20}{9}\n$$。\n在修改后的图 $G'$ 中，顶点 $(4,5)$ 被移除，所以我们必须排除经过 $(4,5)$ 的最短路径。任何经过 $(4,5)$ 的最短路径必定是一条从 $(1,1)$ 到 $(4,5)$ 的最短路径和一条从 $(4,5)$ 到 $(10,12)$ 的最短路径的拼接，因为\n$$\n|(4-1)| + |(5-1)| = 3 + 4 = 7, \\quad |(10-4)| + |(12-5)| = 6 + 7 = 13, \\quad 7 + 13 = 20.\n$$\n从 $(1,1)$ 到 $(4,5)$ 的最短路径数量是\n$$\n\\binom{7}{3}\n$$，\n而从 $(4,5)$ 到 $(10,12)$ 的最短路径数量是\n$$\n\\binom{13}{6}\n$$。\n因此，在 $G'$ 中的最短路径数量是\n$$\n\\binom{20}{9} - \\binom{7}{3}\\binom{13}{6}\n$$。\n计算得，\n$$\n\\binom{20}{9} = 167960, \\quad \\binom{7}{3} = 35, \\quad \\binom{13}{6} = 1716,\n$$\n所以\n$$\n167960 - 35 \\times 1716 = 167960 - 60060 = 107900\n$$。", "answer": "$$\\boxed{107900}$$", "id": "1509946"}]}
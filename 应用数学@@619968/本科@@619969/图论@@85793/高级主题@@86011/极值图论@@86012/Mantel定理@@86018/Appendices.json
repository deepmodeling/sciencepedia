{"hands_on_practices": [{"introduction": "曼特尔定理在网络设计和社交结构分析中有着直接的应用。这个练习将你置于一个需要构建一个无冲突通信网络的情境中，这里的“冲突”被定义为三方相互连接形成的“三角关系”。通过解决这个问题 [@problem_id:1524970]，你将直接应用曼特尔定理来确定在避免$K_3$子图的条件下，一个网络可以拥有的最大连接数。这不仅是对定理的简单计算，更是对极值图论核心思想的一次实践：一个图的边数达到何种密度时，必然会产生特定的局部结构？", "problem": "一家科技初创公司有一个由6名软件开发人员组成的团队。为了鼓励开放沟通和快速解决问题，该公司希望在每对开发人员之间建立一个直接的双向消息通道网络。这个网络可以被建模为一个简单图，其中每个开发人员是一个顶点，每个消息通道是一条边。\n\nCEO在阅读了关于团队动力学的资料后，担心会形成排外的小“三人组”。为了防止这种情况，公司实施了一项政策：对于任意三个不同的开发人员组成的小组，禁止他们之间同时存在所有三个可能的两两配对的消息通道。换句话说，如果开发人员A可以给B发消息，B可以给C发消息，C可以给A发消息，那么这种安排是不允许的。\n\n在这一限制下，这6名开发人员之间最多可以建立多少个直接消息通道？", "solution": "设 $G$ 是一个有 $n$ 个顶点、$m$ 条边且无三角形的简单图。用 $d(v)$ 表示顶点 $v$ 的度。对于任意边 $uv \\in E(G)$，无三角形的条件意味着 $N(u) \\cap N(v) = \\varnothing$，其中 $N(x)$ 表示 $x$ 的邻居集合。由于 $u \\in N(v)$ 且 $v \\in N(u)$，我们有 $|N(u)| + |N(v)| = |N(u) \\cup N(v)| \\leq n$，因此对于每一条边 $uv$，\n$$\nd(u) + d(v) \\leq n.\n$$\n将这个不等式对所有边求和可得\n$$\n\\sum_{uv \\in E(G)} \\big(d(u) + d(v)\\big) \\leq m n.\n$$\n左边等于 $\\sum_{v} d(v)^{2}$，因为每个顶点 $v$ 出现在 $d(v)$ 个边的加和项中，每次贡献 $d(v)$：\n$$\n\\sum_{uv \\in E(G)} \\big(d(u) + d(v)\\big) = \\sum_{v} d(v)^{2}.\n$$\n因此，\n$$\n\\sum_{v} d(v)^{2} \\leq m n.\n$$\n根据 Cauchy–Schwarz 不等式，\n$$\n\\left(\\sum_{v} d(v)\\right)^{2} \\leq n \\sum_{v} d(v)^{2}.\n$$\n由于 $\\sum_{v} d(v) = 2m$，我们得到\n$$\n4 m^{2} \\leq n \\sum_{v} d(v)^{2} \\leq n \\cdot m n = m n^{2}.\n$$\n如果 $m=0$，这个界是平凡的。否则，消去 $m$ 可得\n$$\n4 m \\leq n^{2} \\quad \\Rightarrow \\quad m \\leq \\frac{n^{2}}{4}.\n$$\n由于 $m$ 是一个整数，这给出\n$$\nm \\leq \\left\\lfloor \\frac{n^{2}}{4} \\right\\rfloor.\n$$\n对于 $n=6$，这个界是\n$$\n\\left\\lfloor \\frac{6^{2}}{4} \\right\\rfloor = \\left\\lfloor \\frac{36}{4} \\right\\rfloor = 9.\n$$\n这个界是紧的：完全二分图 $K_{3,3}$ 是无三角形的，并且有 $3 \\cdot 3 = 9$ 条边。因此，消息通道的最大可能数量是 $9$。", "answer": "$$\\boxed{9}$$", "id": "1524970"}, {"introduction": "理解一个极值问题的答案固然重要，但探索其解的结构为何最优则更为深刻。图兰图 $T(n, 2)$ 是不含三角形的 $n$ 阶图中边数最多的图，但它的这种最优性有多“稳定”呢？此练习 [@problem_id:1519862] 引导我们思考，当我们向这个已经达到边数极限的图 $T(n, 2)$ 中添加一条新边时，会不可避免地产生多少个新的三角形。通过分析这个问题，你将更深入地理解完全二分图的结构特性，以及为何这种划分是避免奇圈（尤其是三角形）的关键。", "problem": "在图论中，一个三角形是一个由三个顶点组成的完全子图，通常记作 $K_3$。如果一个图不包含任何此类子图，则称其为无三角形图。对于整数 $n \\geq 2$，图兰图 $T(n, 2)$ 是一个特定的 $n$ 顶点图，其构造如下：$n$ 个顶点的集合被划分为两个不相交的子集 $V_1$ 和 $V_2$，其大小尽可能相等，即 $|V_1| = \\lfloor n/2 \\rfloor$ 且 $|V_2| = \\lceil n/2 \\rceil$。当且仅当两个顶点属于不同的子集时，它们之间才有一条边相连。所得到的图 $T(n,2)$ 是无三角形的。\n\n考虑一个新图 $G$，它是在 $T(n, 2)$ 的基础上恰好添加一条边而形成的。由于 $T(n,2)$ 是无三角形的，因此 $G$ 中的任何三角形都必须是由这条新增的边所创造的“新”三角形。根据新边连接的是哪两个顶点，新三角形的数量可能会有所不同。\n\n假设 $n \\geq 3$，确定添加这条边所能产生的最少新三角形数量。请用一个关于 $n$ 的单一闭式表达式给出你的答案。", "solution": "设 $T(n,2)$ 为一个完全二分图，其二分划为 $(V_{1},V_{2})$，其中 $|V_{1}|=\\lfloor n/2 \\rfloor$ 且 $|V_{2}|=\\lceil n/2 \\rceil$。根据构造，$T(n,2)$ 的所有边都在 $V_1$ 和 $V_2$ 之间，而两个部内部均无边，因此它是无三角形的。\n\n添加一条新边得到 $G$ 时，不可能引入新的跨部边，因为二分划的任意两个跨部顶点对都已经是相邻的。因此，新边必须连接同一部内的两个顶点，即对于某个 $i \\in \\{1,2\\}$，有 $u,v \\in V_{i}$。\n\n在任何图中，包含给定边 $uv$ 的三角形数量等于 $u$ 和 $v$ 的公共邻点数量。在 $T(n,2)$ 中，如果 $u,v \\in V_{i}$，那么另一部 $V_{3-i}$ 中的每个顶点 $w$ 都与 $u$ 和 $v$ 相邻，而 $V_{i}$ 中的任何顶点（除了 $u$ 和 $v$ 之间的新边）都不与 $u$ 或 $v$ 相邻。因此，在 $V_{i}$ 内部添加边 $uv$ 所产生的三角形数量恰好是\n$$\n|V_{3-i}|.\n$$\n\n因此：\n- 如果新边添加在 $V_1$ 内部，新产生的三角形数量为 $|V_{2}|=\\lceil n/2 \\rceil$。\n- 如果新边添加在 $V_2$ 内部，新产生的三角形数量为 $|V_{1}|=\\lfloor n/2 \\rfloor$。\n\n为了使新产生的三角形数量最少，我们选择在较大的部内添加边，这样另一部（其顶点数即为三角形数）的大小就尽可能小。当 $n \\geq 3$ 时，较大的部的大小至少为 2，所以这个选择是可行的。因此，可能产生的最少新三角形数量是\n$$\n\\min\\{\\lfloor \\frac{n}{2} \\rfloor, \\lceil \\frac{n}{2} \\rceil\\}=\\lfloor \\frac{n}{2} \\rfloor.\n$$", "answer": "$$\\boxed{\\left\\lfloor \\frac{n}{2} \\right\\rfloor}$$", "id": "1519862"}, {"introduction": "在理论上知道最大连接数是一回事，但在实践中如何构建这样的网络又是另一回事。这个练习 [@problem_id:1519849] 将图论与算法设计联系起来，让你分析一个常见的“贪心算法”在构建无三角形网络时的表现。通过模拟这个算法的决策过程，并将其结果与曼特尔定理给出的理论最优值进行比较，你将亲身体会到局部最优选择不一定能导向全局最优解。这对于理解算法的性能和局限性是一个极具启发性的实践。", "problem": "一位系统管理员的任务是在7台服务器（标记为 $S_1, S_2, S_3, S_4, S_5, S_6,$ 和 $S_7$）之间建立一个直接通信网络。由于路由协议中的硬件限制，任意三台服务器都不能相互连接，这意味着代表该网络的图不能包含任何三角形（长度为3的环）。\n\n管理员决定使用一种简单的贪心算法来添加连接（边）。该算法的流程如下：所有可能的服务器对 $(S_i, S_j)$（其中 $i < j$）都按照其下标的字典序被依次考虑。这意味着首先考虑服务器对 $(S_1, S_2)$，然后是 $(S_1, S_3)$，...，直到 $(S_1, S_7)$，接着是 $(S_2, S_3)$、$(S_2, S_4)$ 等，最后是服务器对 $(S_6, S_7)$。对于每个被考虑的服务器对，当且仅当添加连接不会与任何已建立的连接形成三角形时，该连接才会被建立。\n\n计算在一个包含7台服务器的任意无三角形网络中可能的最大连接数，与管理员的特定贪心算法实际建立的连接数之间的差值。", "solution": "我们需要求出在一个7个顶点的无三角形图中可能的最大边数，以及由指定的贪心算法产生的边数，然后计算它们的差。\n\n根据 Mantel 定理（Turán 定理在禁止三角形情况下的特例），任何一个有 $n$ 个顶点的无三角形图最多有\n$$\n\\left\\lfloor \\frac{n^{2}}{4} \\right\\rfloor\n$$\n条边，当且仅当该图是部集大小尽可能相等的完全二分图时取等。对于 $n=7$，\n$$\nm_{\\max}=\\left\\lfloor \\frac{7^{2}}{4} \\right\\rfloor=\\left\\lfloor \\frac{49}{4} \\right\\rfloor=12,\n$$\n此时图为 $K_{3,4}$。\n\n接下来，我们模拟在顶点标签 $S_{1},\\dots,S_{7}$ 上按字典序执行的贪心算法。首先考虑服务器对 $(S_{1},S_{j})$，其中 $j=2,\\dots,7$。在考虑 $(S_{1},S_{j})$ 时，只有当存在某个 $k$ 使得 $(S_{1},S_{k})$ 和 $(S_{j},S_{k})$ 两条边都已存在时，添加这条边才会形成三角形。然而，对于每一个这样的 $j$，所有满足 $k<j$ 的边 $(S_{j},S_{k})$ 都尚未被考虑，因为所有第一个下标为1的服务器对都在第一个下标至少为2的任何服务器对之前被处理。因此，在这些步骤中不可能形成三角形，所有边 $(S_{1},S_{j})$（其中 $j=2,\\dots,7$）都会被添加。这会产生一个星形图 $K_{1,6}$，其边数为\n$$\nm_{\\text{greedy}}=6\n$$\n条。\n\n在完成这些添加之后，对于任何满足 $2 \\leq i < j \\leq 7$ 的服务器对 $(S_{i},S_{j})$，边 $(S_{1},S_{i})$ 和 $(S_{1},S_{j})$ 都已存在，因此添加边 $(S_{i},S_{j})$ 将会形成三角形 $S_{1}S_{i}S_{j}$。因此，所有这样的服务器对都会被拒绝。最终的贪心图仍然是 $K_{1,6}$，有 $6$ 条边。\n\n因此，所求的差值为\n$$\nm_{\\max}-m_{\\text{greedy}}=12-6=6.\n$$", "answer": "$$\\boxed{6}$$", "id": "1519849"}]}
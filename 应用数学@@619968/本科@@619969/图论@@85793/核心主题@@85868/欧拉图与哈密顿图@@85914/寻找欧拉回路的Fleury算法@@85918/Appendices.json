{"hands_on_practices": [{"introduction": "学习任何算法的最好方法就是亲手实践。下面的练习将引导你从头开始，在一个给定的欧拉图中逐步执行 Fleury 算法 [@problem_id:1504352]。这个练习的目的是让你熟悉算法的基本流程，包括如何根据规则选择边，尤其是在面对多个非桥边选择时。", "problem": "考虑一个无向图 $G$，其顶点集为 $V = \\{A, B, C, D, E, F, G\\}$，边集为 $E = \\{(A,B), (A,C), (B,C), (B,D), (B,E), (C,D), (C,E), (D,F), (D,G), (F,G)\\}$。已知该图是欧拉图，这意味着它包含一条路径，该路径恰好访问每条边一次，并最终回到起始顶点。\n\n找到这样一条路径的一种算法是 Fleury 算法。该算法的步骤如下：\n1.  从一个指定的顶点开始。\n2.  从当前顶点出发，遍历任何可用的边。一旦一条边被遍历，它在所有后续步骤中都将被视为从图中“移除”。\n3.  一个关键的约束是：除非别无选择，否则绝不遍历余下子图中的*桥*。桥是指移除后会导致图的连通分量数量增加的边。\n4.  如果在任何步骤中可以选择多条边（即，存在多条非桥边，或所有可用边都是桥），则通过选择通向字母顺序最靠前的顶点的边来打破僵局。\n\n你的任务是，从顶点 $A$ 开始，在图 $G$上追踪 Fleury 算法的前三次边遍历。以下哪个序列代表了最先访问的四个顶点？\n\nA. A, B, C, A\n\nB. A, C, B, D\n\nC. A, B, C, E\n\nD. A, B, C, D\n\nE. A, B, D, F", "solution": "我们被要求从顶点 $A$ 开始，对图 $G=(V, E)$ 应用 Fleury 算法。顶点集为 $V = \\{A, B, C, D, E, F, G\\}$，边集为 $E = \\{(A,B), (A,C), (B,C), (B,D), (B,E), (C,D), (C,E), (D,F), (D,G), (F,G)\\}$。我们需要找到最先访问的四个顶点的序列。\n\n**步骤 0：初始状态**\n当前顶点是 $A$。路径是 $(A)$。图是 $G_0 = G$。\n\n**步骤 1：第一次边遍历**\n我们位于顶点 $A$。可用的边是 $(A,B)$ 和 $(A,C)$。我们必须检查这两条边中是否有任何一条是当前图 $G_0$ 的桥。\n\n*   **考虑边 $(A,B)$**：如果我们从 $G_0$ 中移除 $(A,B)$，图会变得不连通吗？顶点 $A$ 和 $B$ 仍然通过路径 $A-C-B$ 相连。所以，$(A,B)$ 不是桥。\n*   **考虑边 $(A,C)$**：如果我们从 $G_0$ 中移除 $(A,C)$，顶点 $A$ 和 $C$ 仍然通过路径 $A-B-C$ 相连。所以，$(A,C)$ 不是桥。\n\n由于 $(A,B)$ 和 $(A,C)$ 这两个选择都不是桥边，我们使用打破僵局的规则。我们必须选择通向字母顺序最靠前的顶点的边。比较 $B$ 和 $C$，$B$ 排在前面。因此，我们遍历边 $(A,B)$。\n\n新路径是 $(A, B)$。新图 $G_1$ 是从 $G_0$ 中移除了边 $(A,B)$ 后的图。我们当前的顶点是 $B$。\n\n**步骤 2：第二次边遍历**\n我们位于顶点 $B$。与 $B$ 相邻的剩余边是 $(B,C)$、$(B,D)$ 和 $(B,E)$。我们必须检查这些边中是否有任何一条是当前图 $G_1$ 的桥。\n\n*   **考虑边 $(B,C)$**：在 $G_1$ 中，如果我们移除 $(B,C)$，顶点 $B$ 和 $C$ 会断开连接吗？不会，它们仍然通过路径 $B-E-C$（以及 $B-D-C$）相连。所以，$(B,C)$ 不是 $G_1$ 的桥。\n*   **考虑边 $(B,D)$**：在 $G_1$ 中，如果我们移除 $(B,D)$，顶点 $B$ 和 $D$ 会断开连接吗？不会，它们仍然通过路径 $B-C-D$ 相连。所以，$(B,D)$ 不是 $G_1$ 的桥。\n*   **考虑边 $(B,E)$**：在 $G_1$ 中，如果我们移除 $(B,E)$，顶点 $B$ 和 $E$ 会断开连接吗？不会，它们仍然通过路径 $B-C-E$ 相连。所以，$(B,E)$ 不是 $G_1$ 的桥。\n\n所有三个选择都不是桥边。我们对目标顶点 $C, D, E$ 应用字母顺序的打破僵局规则。$C$ 排在最前面。我们遍历边 $(B,C)$。\n\n新路径是 $(A, B, C)$。新图 $G_2$ 是从 $G_1$ 中移除了边 $(B,C)$ 后的图。我们当前的顶点是 $C$。\n\n**步骤 3：第三次边遍历**\n我们位于顶点 $C$。在 $G_2$ 中与 $C$ 相邻的剩余边是 $(C,A)$、$(C,D)$ 和 $(C,E)$。注意，边 $(A,B)$ 和 $(B,C)$ 已被移除。\n\n*   **考虑边 $(C,A)$**：在 $G_2$ 中，如果我们移除 $(C,A)$，图会变得不连通吗？从顶点 $A$ 出发的唯一剩余边就是 $(A,C)$ 本身。移除它将使顶点 $A$ 与图的其余部分（包含仍然相互连接的顶点 B、C、D、E、F、G）隔离。因此，$(C,A)$ 是 $G_2$ 的一个桥。根据 Fleury 算法，除非别无选择，否则我们不能选择桥。\n*   **考虑边 $(C,D)$**：在 $G_2$ 中，如果我们移除 $(C,D)$，顶点 $C$ 和 $D$ 会断开连接吗？路径 $C-E-B-D$ 在 $G_2$ 中仍然存在。所以，$(C,D)$ 不是桥。\n*   **考虑边 $(C,E)$**：在 $G_2$ 中，如果我们移除 $(C,E)$，顶点 $C$ 和 $E$ 会断开连接吗？路径 $C-D-B-E$ 在 $G_2$ 中仍然存在。所以，$(C,E)$ 不是桥。\n\n我们有两个非桥的选择：$(C,D)$ 和 $(C,E)$。我们必须避开桥 $(C,A)$。在非桥选项之间应用打破僵局的规则，我们比较目标顶点 $D$ 和 $E$。$D$ 在字母表中的顺序先于 $E$。因此，我们遍历边 $(C,D)$。\n\n新路径是 $(A, B, C, D)$。\n\n最先访问的四个顶点的序列是 $A, B, C, D$。这对应于选项 D。", "answer": "$$\\boxed{D}$$", "id": "1504352"}, {"introduction": "Fleury 算法的核心，也是其最具挑战性的一步，是判断一条边是否为“桥”。这个决定至关重要，因为它能确保我们不会过早地将图分割，从而导致无法完成整个回路 [@problem_id:1504375]。这个练习让你聚焦于这一关键决策过程，通过在算法执行中途分析“剩余图”，来评估从当前顶点出发的每条潜在路径的有效性。", "problem": "一个连通图中的欧拉回路是一条恰好遍历每条边一次的回路。Fleury 算法是寻找这种回路的一种经典方法。该算法的一个关键步骤是选择下一条边的规则：从当前顶点出发，不应遍历剩余图（仅由未遍历的边组成的图）中的“桥”边，除非没有其他选择。如果移除一条边会增加图中连通分量的数量，那么这条边就被定义为桥。\n\n考虑一个无向图 $G$，其顶点集为 $V = \\{A, B, C, D, E\\}$，边集为 $E = \\{(A, B), (A, C), (B, C), (C, D), (C, E), (D, E)\\}$。一位分析员正在使用 Fleury 算法在图 $G$ 中寻找一条欧拉回路。该过程从顶点 $A$ 开始，目前已经遍历的路径是 $A \\rightarrow B \\rightarrow C$。现在的当前顶点是 $C$。\n\n为了决定从顶点 $C$ 出发要遍历的下一条边，分析员必须检查在剩余图中，哪些可用的未遍历边是桥。要确定一条未遍历的边 $(u, v)$ 是否是桥，必须将其从剩余边的图中暂时移除，然后检查 $u$ 和 $v$ 是否仍然连通。这个连通性检查可以使用图遍历算法，如广度优先搜索（BFS）或深度优先搜索（DFS）来执行。\n\n根据这个过程，以下哪个选项正确地指出了根据 Fleury 算法，所有可以从顶点 $C$ 作为下一步选择的有效边？\n\nA. 仅边 $(C, A)$\n\nB. 仅边 $(C, D)$\n\nC. 仅边 $(C, E)$\n\nD. 边 $(C, A)$ 和 $(C, D)$\n\nE. 边 $(C, D)$ 和 $(C, E)$\n\nF. 所有三条边 $(C, A)$、$(C, D)$ 和 $(C, E)$ 都是有效选择。", "solution": "我们给定一个连通无向图，其顶点集为 $V=\\{A,B,C,D,E\\}$，边集为 $E=\\{(A,B),(A,C),(B,C),(C,D),(C,E),(D,E)\\}$。目前已经遍历的路径是 $A\\rightarrow B\\rightarrow C$，因此已遍历的边是 $\\{(A,B),(B,C)\\}$。用于 Fleury 决策的剩余图 $G'$ 由未遍历的边组成：\n$$\nE'=\\{(A,C),(C,D),(C,E),(D,E)\\}.\n$$\n从当前顶点 $C$ 出发，在 $G'$ 中的可用边是 $(C,A)$、$(C,D)$ 和 $(C,E)$。根据 Fleury 的规则，我们必须避免选择 $G'$ 的桥，除非它是唯一可用的边。$G'$ 的一条边 $(u,v)$ 是桥，如果移除它会增加 $G'$ 的连通分量数量，或者等价地说，如果移除它之后 $u$ 和 $v$ 之间没有路径。\n\n测试 $(C,A)$：从 $E'$ 中移除 $(C,A)$，得到\n$$\nE'\\setminus\\{(C,A)\\}=\\{(C,D),(C,E),(D,E)\\}.\n$$\n在这个图中，从 $A$ 到 $C$ 没有路径（顶点 $A$ 是孤立的），所以 $(C,A)$ 是一个桥。\n\n测试 $(C,D)$：从 $E'$ 中移除 $(C,D)$，得到\n$$\nE'\\setminus\\{(C,D)\\}=\\{(A,C),(C,E),(D,E)\\}.\n$$\n在这个图中，存在一条路径 $C\\rightarrow E\\rightarrow D$，所以 $C$ 和 $D$ 保持连通；因此 $(C,D)$ 不是桥。\n\n测试 $(C,E)$：从 $E'$ 中移除 $(C,E)$，得到\n$$\nE'\\setminus\\{(C,E)\\}=\\{(A,C),(C,D),(D,E)\\}.\n$$\n在这个图中，存在一条路径 $C\\rightarrow D\\rightarrow E$，所以 $C$ 和 $E$ 保持连通；因此 $(C,E)$ 不是桥。\n\n因此，从 $C$ 出发不违反 Fleury 规则的有效下一条边是 $(C,D)$ 和 $(C,E)$，这对应于选项 E。", "answer": "$$\\boxed{E}$$", "id": "1504375"}, {"introduction": "理解一个算法不仅要知其然，更要知其所以然。如果我们把 Fleury 算法应用在一个不满足其前提条件的图上会发生什么？这个思想实验 [@problem_id:1504412] 探讨了当图只有一条欧拉路径（而非欧拉回路）时算法的行为。通过解决这个问题，你将更深刻地理解算法的适用边界以及它与图的顶点度数奇偶性之间的根本联系。", "problem": "在图论中，如果一个图中存在一条经过每条边恰好一次的迹（trail），则称该图具有一条欧拉路径（Eulerian path）。如果存在这样一条起点和终点相同的迹，则称该图具有一个欧拉回路（Eulerian circuit）。一个著名的结论指出：一个连通图具有欧拉路径的充要条件是它恰好有两个奇度（odd degree）顶点，而具有欧拉回路的充要条件是其所有顶点都为偶度（even degree）。\n\n弗勒里算法（Fleury's algorithm）是一种在已知存在欧拉回路的图中寻找该回路的方法。其规则如下：\n1. 从图中的任意一个顶点开始。\n2. 从当前顶点出发，遍历任意一条关联边，但有一个关键条件：不要遍历一座桥（bridge）（即移除该边会使剩余的图不连通），除非别无选择。\n3. 一旦一条边被遍历，就认为它已从图中移除。\n4. 重复此过程，直到没有边可以遍历为止。\n\n一位分析师拿到了一个连通图 $G$，已知该图恰有两个奇度顶点，我们称之为 $U$ 和 $V$。$G$ 中所有其他顶点都是偶度。该分析师误解了算法的适用条件，并试图应用弗勒里算法来寻找一条欧拉回路。他选择了一个偶度顶点 $W$ 作为起始顶点（因此 $W \\neq U$ 且 $W \\neq V$），这使得他的错误更加严重。\n\n在这些特定情况下，下列哪个陈述正确描述了算法的终止状态？\n\nA. 算法将成功遍历图中的每一条边，并终止于其中一个奇度顶点，$U$ 或 $V$。\n\nB. 算法将在遍历一个回路后返回起始顶点 $W$ 并终止。未被遍历的边的集合将构成一条连接两个奇度顶点 $U$ 和 $V$ 的路径。\n\nC. 算法将卡在其中一个奇度顶点，$U$ 或 $V$，留下一组未被遍历的边，这些边形成一个或多个不连通的圈。\n\nD. 算法将在遍历完图中的每一条边后，终止于起始顶点 $W$。\n\nE. 算法将终止于一个非 $W$、$U$ 或 $V$ 的顶点，因为从该顶点出发的所有剩余边都是通往独立连通分支的桥。", "solution": "设 $G$ 是一个连通图，恰有两个奇度顶点 $U$ 和 $V$。设 $W$ 是一个偶度起始顶点，且 $W \\neq U$ 和 $W \\neq V$。回顾欧拉迹的奇偶性（parity）约束：\n- 任何遍历每条边恰好一次的迹，其端点恰好是图中的奇度顶点。因此，在一个恰有两个奇度顶点 $U$ 和 $V$ 的图中，每一条欧拉迹都必须从 $\\{U,V\\}$ 中的一个顶点开始，并在另一个顶点结束。\n\n由此，可以立即排除两种情况：\n- 不可能遍历所有边并最终回到 $W$，因为那将构成一个欧拉回路，而欧拉回路存在的充要条件是所有顶点的度均为偶数。由于 $U$ 和 $V$ 是奇度顶点，这种情况不可能发生。因此选项 D 是不可能的。\n- 同样，也不可能从 $W$ 开始遍历所有边并最终止于 $U$ 或 $V$，因为欧拉迹必须从一个奇度顶点开始。由于 $W$ 是偶度顶点且 $W \\neq U,V$，所以任何遍历所有边的过程都不能从 $W$ 开始。因此选项 A 是不可能的。\n\n现在来分析弗勒里算法的规则“除非别无选择，否则不走桥”的效果。考虑算法运行的这样一个最长初始阶段：其中只遍历了非桥边。将这条初始的迹记为 $T$。在 $T$ 中的每条边被选择的时刻，它都位于当前（剩余）图中的一个圈（cycle）上。移除这样一条边会使其两个端点的度各减少1，并且由于沿着一个圈访问的每个顶点，其进入和离开的次数相同，因此每个此类顶点的总度数减少量是一个偶数。特别地：\n- 沿着 $T$ 行进，在遇到任何桥之前，迹不可能在非起始顶点处卡住，因为通过非桥边到达的每个中间顶点，在那一刻总有另一条非桥边可以离开。因此，这个最长的只包含非桥边的路径段 $T$ 必然是一个从 $W$ 开始并回到 $W$ 的闭合回路（closed circuit）。\n\n接下来，从 $G$ 中移除 $T$ 的所有边，得到剩余的子图 $G'$。移除一个回路的边会保持每个顶点度的奇偶性：对于每个顶点 $x$，被移除的关联边数量是偶数，因此 $x$ 在 $G'$ 中的度 $\\deg(x)$ 的奇偶性与在 $G$ 中相同。因此，$G'$ 仍然恰好有两个奇度顶点，即 $U$ 和 $V$。\n\n一个有限图恰好有两个奇度顶点的充要条件是它包含一条以这两个顶点为端点的（非空）迹；等价地，$G'$ 的非空部分必须包含一条 $U$–$V$ 路径。此外，因为在选择 $T$ 的每一步都未选择桥，所以此时任何未被遍历的边都不可能包含通过一条与 $W$ 关联的非桥边连接起来的闭合回路（因为这样的边在构造 $T$ 的过程中本应是可选的）。因此，$G'$ 中未被遍历的边的集合恰好是一条以 $U$ 和 $V$ 为端点的路径。\n\n因此，在这些情况下：\n- 算法首先在遍历一个回路后返回到 $W$，并且\n- 未被遍历的边的集合构成一条连接 $U$ 和 $V$ 的路径。\n\n这恰好是陈述 B 的内容，而陈述 A、C、D 和 E 与上述奇偶性约束和避桥行为不符。", "answer": "$$\\boxed{B}$$", "id": "1504412"}]}
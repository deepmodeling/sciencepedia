{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。本节的第一个练习将带你进入一个常见的管理场景：公司内部的预算调配。这个问题的核心在于检验一个给定的资源分配网络是否可行。通过解决这个问题，你会发现，即使总体供给与需求完全相等（即所有部门的盈余总和等于赤字总和），网络中的局部容量限制（即“瓶颈”）也可能导致无法实现一个完全满足所有需求的分配方案 [@problem_id:1488576]。这个练习将锻炼你识别系统瓶颈、判断可行性的关键能力。", "problem": "科技公司 Innovate Inc. 正在进行季度预算审查。公司由五个关键部门组成：研发部（R&D）、市场部（Marketing）、销售部（Sales）、人力资源部（HR）和运营部（Operations）。由于近期的项目成果和运营成本，一些部门出现了预算盈余，而另一些部门则出现了赤字。为了在内部平衡账目，首席财务官希望将资金从有盈余的部门转移，以弥补其他部门的赤字。\n\n各部门的财务状况如下（正值表示盈余，负值表示赤字），单位均为千预算单位：\n-   研发部（R&D）：-40\n-   市场部（Marketing）：-25\n-   销售部（Sales）：+50\n-   人力资源部（HR）：-15\n-   运营部（Operations）：+30\n\n然而，内部规定限制了部门之间的资金转移。允许的单向转移渠道及其最大转移容量（单位：千预算单位）如下：\n-   销售部可以向市场部（最多30）和研发部（最多20）转移资金。\n-   运营部可以向研发部（最多20）和人力资源部（最多10）转移资金。\n-   人力资源部可以向市场部（最多5）转移资金。\n\n一个预算分配方案被认为是可行的，当且仅当所有部门的赤字都能通过来自盈余部门的调拨资金完全弥补，并且遵守所有转移容量限制。关于此预算分配情景，以下哪个陈述是正确的？\n\nA. 存在一个可行的预算分配方案，可以完全弥补所有赤字。\nB. 不可能实现可行的分配方案，因为总预算盈余大于总预算赤字。\nC. 不可能实现可行的分配方案，因为转移渠道的容量不足，导致最小的总未满足赤字为5,000预算单位。\nD. 不可能实现可行的分配方案，因为转移渠道的容量不足，导致最小的总未满足赤字为10,000预算单位。\nE. 一个可行的分配方案必然是可能的，因为总预算盈余与总预算赤字完全相等。", "solution": "我们将此问题建模为一个带容量的转运网络，其中盈余部门为供应点，赤字部门为需求点。我们如下标记各部门：销售部（S）、运营部（O）、研发部（R）、市场部（M）和人力资源部（H）。供应量和需求量（单位：千）如下：\n- 供应量：$s_{S} = 50$, $s_{O} = 30$。\n- 需求量：$d_{R} = 40$, $d_{M} = 25$, $d_{H} = 15$。\n\n有向转移渠道及其容量为：\n$$u_{S,M} = 30,\\quad u_{S,R} = 20,\\quad u_{O,R} = 20,\\quad u_{O,H} = 10,\\quad u_{H,M} = 5.$$\n\n令 $f_{i,j} \\geq 0$ 表示从 $i$ 到 $j$ 的流量，所有列出的弧都满足容量约束 $f_{i,j} \\leq u_{i,j}$。净流量平衡约束为：\n- 对于供应节点，总流出量不能超过供应量：\n$$f_{S,M} + f_{S,R} \\leq 50,\\qquad f_{O,R} + f_{O,H} \\leq 30.$$\n- 对于需求节点，净流入量等于该节点被弥补的赤字量：\n$$x_{R} = f_{S,R} + f_{O,R} \\leq 40,\\qquad x_{M} = f_{S,M} + f_{H,M} \\leq 25,\\qquad x_{H} = f_{O,H} - f_{H,M} \\leq 15,$$\n其中 $f_{H,M} \\leq 5$。\n\n一个完全可行的分配方案要求同时满足 $x_{R} = 40$，$x_{M} = 25$ 和 $x_{H} = 15$。\n\nHR部门的关键不可行界限：\nHR部门只有一条来自运营部的输入弧，其容量为 $u_{O,H} = 10$。由于HR部门也有一条指向市场部的输出弧，HR的净流入量满足\n$$x_{H} = f_{O,H} - f_{H,M} \\leq f_{O,H} \\leq 10.$$\n因此 $x_{H} \\leq 10 < 15$，所以在任何分配方案中，HR部门的赤字至少有 $15 - x_{H} \\geq 5$ 个单位无法被满足。因此，一个完全可行的分配方案是不可能的。\n\n界限的紧密性（可达性）：\n选择流量\n$$f_{S,R} = 20,\\quad f_{O,R} = 20,\\quad f_{S,M} = 25,\\quad f_{O,H} = 10,\\quad f_{H,M} = 0.$$\n这些流量满足所有容量约束。它们可以弥补 $x_{R} = 40$（研发部完全满足）、$x_{M} = 25$（市场部完全满足）和 $x_{H} = 10$（人力资源部短缺 $15 - 10 = 5$）。由于存在 $u_{O,H} = 10$ 的瓶颈，没有其他重新分配方案能使 $x_{H}$ 超过10。因此，最小总未满足赤字恰好是5千个单位。\n\n由于总盈余等于总赤字，选项B是错误的。总额的完全匹配并不能保证在渠道容量限制下的可行性，所以选项E是错误的。正确的陈述是容量不足，且最小总未满足赤字为5,000预算单位，即选项C。", "answer": "$$\\boxed{C}$$", "id": "1488576"}, {"introduction": "在许多现实世界的物流或网络规划中，我们不仅关心流量的上限（容量），还必须满足某些下限要求，例如为了保证路线的盈利性或合同义务。这个问题引入了带有需求下界 $l(u, v)$ 的循环流模型 [@problem_id:1488617]。你的任务是判断是否存在一个“稳态”的运输方案，使得在满足每个节点流量守恒（流入等于流出）的同时，每条路径的运输量都精确地落在其最小和最大允许值之间。这让你从简单的最大流问题，迈向更复杂也更贴近实际的约束满足问题。", "problem": "一家名为“A-to-D Express”的物流公司在四个主要配送中心之间运营一个货运网络：Atlanta (A)、Boston (B)、Chicago (C) 和 Denver (D)。为保持盈利能力，某些运输路线有必须承运的最低货运量要求，而所有路线都有最大运力限制。公司需要确定是否存在一个可行的稳态运输计划，在该计划中，每个配送中心的总流入货运量等于总流出货运量。\n\n网络路线及其约束定义如下，所有货运量单位为千吨/周：\n\n*   Atlanta 到 Boston：最小 2，最大 5\n*   Atlanta 到 Chicago：最小 1，最大 4\n*   Boston 到 Chicago：最小 0，最大 3\n*   Boston 到 Denver：最小 3，最大 6\n*   Chicago 到 Denver：最小 2，最大 5\n*   Denver 到 Atlanta：最小 4，最大 8\n\n基于这些约束，是否可能设计一个运输计划，该计划遵守所有路线的最小和最大货运量，并在每个中心都保持货物流量守恒？请从以下选项中选择最准确的陈述。\n\nA. 不，不存在可行的计划。\nB. 是的，存在可行的计划，且所有路线上的总最小需求流量为 10 千吨/周。\nC. 是的，存在可行的计划，且所有路线上的总最小需求流量为 12 千吨/周。\nD. 只有在增加从 Denver (D) 到 Atlanta (A) 路线的运力时，才可能存在可行的计划。", "solution": "设每条有向路线上的流量由变量 $x_{AB}, x_{AC}, x_{BC}, x_{BD}, x_{CD}, x_{DA}$ （单位为千吨/周）表示，且满足以下边界条件：\n$$2 \\leq x_{AB} \\leq 5,\\quad 1 \\leq x_{AC} \\leq 4,\\quad 0 \\leq x_{BC} \\leq 3,$$\n$$3 \\leq x_{BD} \\leq 6,\\quad 2 \\leq x_{CD} \\leq 5,\\quad 4 \\leq x_{DA} \\leq 8.$$\n每个节点的流量守恒要求：\n- 在 $A$：流入量 $x_{DA}$ 等于流出量 $x_{AB}+x_{AC}$，因此 $x_{DA}=x_{AB}+x_{AC}$。\n- 在 $B$：流入量 $x_{AB}$ 等于流出量 $x_{BC}+x_{BD}$，因此 $x_{AB}=x_{BC}+x_{BD}$。\n- 在 $C$：流入量 $x_{AC}+x_{BC}$ 等于流出量 $x_{CD}$，因此 $x_{AC}+x_{BC}=x_{CD}$。\n- 在 $D$：流入量 $x_{BD}+x_{CD}$ 等于流出量 $x_{DA}$，此方程可由前三个方程自动得出。\n\n使用 $x_{BC}=x_{AB}-x_{BD}$，$x_{CD}=x_{AC}+x_{BC}=x_{AC}+x_{AB}-x_{BD}$ 和 $x_{DA}=x_{AB}+x_{AC}$ 消去因变量，边界条件对自变量 $x_{AB}, x_{AC}, x_{BD}$ 施加了以下约束：\n- 从 $0 \\leq x_{BC} \\leq 3$ 可得：$0 \\leq x_{AB}-x_{BD} \\leq 3$，即 $x_{BD} \\leq x_{AB} \\leq x_{BD}+3$。\n- 从 $2 \\leq x_{CD} \\leq 5$ 可得：$2 \\leq x_{AC}+x_{AB}-x_{BD} \\leq 5$。\n- 从 $4 \\leq x_{DA} \\leq 8$ 可得：$4 \\leq x_{AB}+x_{AC} \\leq 8$。\n- 以及原始的单个变量边界：$2 \\leq x_{AB} \\leq 5$, $1 \\leq x_{AC} \\leq 4$, $3 \\leq x_{BD} \\leq 6$。\n\n满足所有约束的一个可行选择是：\n$$x_{BD}=3,\\quad x_{AB}=3,\\quad x_{AC}=2.$$\n这意味着\n$$x_{BC}=x_{AB}-x_{BD}=0,\\quad x_{CD}=x_{AC}+x_{BC}=2,\\quad x_{DA}=x_{AB}+x_{AC}=5.$$\n检查所有边界条件：\n$$x_{AB}=3 \\in [2,5],\\quad x_{AC}=2 \\in [1,4],\\quad x_{BC}=0 \\in [0,3],$$\n$$x_{BD}=3 \\in [3,6],\\quad x_{CD}=2 \\in [2,5],\\quad x_{DA}=5 \\in [4,8].$$\n检查流量守恒：\n- 在 $A$：$x_{DA}=5$ 等于 $x_{AB}+x_{AC}=3+2=5$。\n- 在 $B$：$x_{AB}=3$ 等于 $x_{BC}+x_{BD}=0+3=3$。\n- 在 $C$：$x_{AC}+x_{BC}=2+0=2$ 等于 $x_{CD}=2$。\n- 在 $D$：$x_{BD}+x_{CD}=3+2=5$ 等于 $x_{DA}=5$。\n\n因此，存在一个可行的稳态运输计划。\n\n所有路线上的最小需求货运量总和是各个下界之和：\n$$2+1+0+3+2+4=12.$$\n因此，正确的陈述是存在可行的计划，且所有路线上的总最小需求流量为 12 千吨/周。选项 B 的值 10 是不正确的，而选项 A 和 D 是错误的，因为我们给出了一个可行的解，而无需改变任何运力。", "answer": "$$\\boxed{C}$$", "id": "1488617"}, {"introduction": "当我们发现一个网络无法满足所有需求时，下一个逻辑步骤是什么？是放弃，还是诊断并修复它？这个练习将引导你扮演网络优化者的角色。面对一个已被证实为不可行的物流网络，你的任务不再是简单地回答“是”或“否”，而是要运用最大流-最小割定理的深刻见解，精确定位导致系统失效的“最薄弱环节” [@problem_id:1488582]。通过计算流量缺口并识别最小割，你将能够量化解决问题所需的最小成本——即确定需要对哪条线路进行多大的最小容量升级，才能使整个网络恢复可行性。这充分展示了网络流理论在系统诊断与优化中的强大威力。", "problem": "一个物流网络被建模为一个有向图 $G=(V, E)$，其中顶点集合 $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$ 代表六个仓库。每个仓库 $v_i$ 都有一个相关的整数需求 $d(v_i)$。正需求表示该仓库的物品净需求量，而负需求表示净供应量。需求量如下：\n$d(v_1) = -15$，$d(v_2) = -10$，$d(v_3) = 0$，$d(v_4) = 8$，$d(v_5) = 12$，以及 $d(v_6) = 5$。\n\n这些仓库由单向运输路线连接，表示为集合 $E$ 中的有向边。每条边 $(u, v)$ 都有一个整数容量 $c(u, v)$，表示单位时间内可运输的最大物品数量。网络路线及其容量如下：\n$c(v_1, v_3) = 10$\n$c(v_1, v_4) = 8$\n$c(v_2, v_3) = 7$\n$c(v_2, v_5) = 5$\n$c(v_3, v_5) = 10$\n$c(v_3, v_6) = 4$\n$c(v_4, v_5) = 3$\n\n当一个流满足所有容量约束，且流入每个仓库 $v_i$ 的净流量等于其需求 $d(v_i)$ 时，该流被认为是可行的。在当前容量下，不存在可行流。公司计划升级上述七条路线中某一条的容量，以实现一个可行流。\n\n确定为使可行循环流成为可能，单个边的容量必须增加的最小整数值。", "solution": "这个问题要求为使带需求的循环流变得可行，单个边所需的最小容量增量。首先，我们必须检查可行循环流的必要条件，即所有需求之和为零。在本例中，$\\sum_{i=1}^{6} d(v_i) = -15 - 10 + 0 + 8 + 12 + 5 = 0$。该条件得到满足。\n\n带需求的循环流的可行性可以通过将问题转化为一个标准的最大流问题来确定。我们构建一个带有超源点 $s$ 和超汇点 $t$ 的新图 $G'$。\n1. 对于每个具有负需求 $d(v) < 0$ 的顶点 $v$（供应节点），我们添加一条从 $s$ 到 $v$ 的边，其容量为 $-d(v)$。\n   - 边 $(s, v_1)$，容量 $c(s, v_1) = -d(v_1) = 15$。\n   - 边 $(s, v_2)$，容量 $c(s, v_2) = -d(v_2) = 10$。\n2. 对于每个具有正需求 $d(v) > 0$ 的顶点 $v$（需求节点），我们添加一条从 $v$ 到 $t$ 的边，其容量为 $d(v)$。\n   - 边 $(v_4, t)$，容量 $c(v_4, t) = d(v_4) = 8$。\n   - 边 $(v_5, t)$，容量 $c(v_5, t) = d(v_5) = 12$。\n   - 边 $(v_6, t)$，容量 $c(v_6, t) = d(v_6) = 5$。\n3. 所有原始边 $(u, v)$ 及其容量 $c(u, v)$ 都在 $G'$ 中保留。\n\n当且仅当新图 $G'$ 中从 $s$ 到 $t$ 的最大流等于总需求 $D = \\sum_{v | d(v)>0} d(v)$ 时，原始图 $G$ 中存在可行循环流。\n总需求为 $D = 8 + 12 + 5 = 25$。\n\n我们现在使用 Ford-Fulkerson 算法，通过寻找增广路径来计算 $G'$ 中从 $s$ 到 $t$ 的最大流。我们在剩余图中寻找从 $s$ 到 $t$ 的路径，并沿其增加流量。\n\n1.  增广路径：$s \\rightarrow v_1 \\rightarrow v_4 \\rightarrow t$。\n    瓶颈容量为 $\\min(c(s, v_1), c(v_1, v_4), c(v_4, t)) = \\min(15, 8, 8) = 8$。\n    我们发送 8 单位的流量。总流量 = 8。\n    剩余容量：$c_f(s,v_1)=7$, $c_f(v_1,v_4)=0$, $c_f(v_4,t)=0$。\n\n2.  增广路径：$s \\rightarrow v_1 \\rightarrow v_3 \\rightarrow v_5 \\rightarrow t$。\n    瓶颈容量为 $\\min(c_f(s, v_1), c(v_1, v_3), c(v_3, v_5), c(v_5, t)) = \\min(7, 10, 10, 12) = 7$。\n    我们发送 7 单位的流量。总流量 = $8 + 7 = 15$。\n    剩余容量：$c_f(s,v_1)=0$, $c_f(v_1,v_3)=3$, $c_f(v_3,v_5)=3$, $c_f(v_5,t)=5$。\n\n3.  增广路径：$s \\rightarrow v_2 \\rightarrow v_5 \\rightarrow t$。\n    瓶颈容量为 $\\min(c(s, v_2), c(v_2, v_5), c_f(v_5, t)) = \\min(10, 5, 5) = 5$。\n    我们发送 5 单位的流量。总流量 = $15 + 5 = 20$。\n    剩余容量：$c_f(s,v_2)=5$, $c_f(v_2,v_5)=0$, $c_f(v_5,t)=0$。\n\n4.  增广路径：$s \\rightarrow v_2 \\rightarrow v_3 \\rightarrow v_6 \\rightarrow t$。\n    瓶颈容量为 $\\min(c_f(s, v_2), c(v_2, v_3), c(v_3, v_6), c(v_6, t)) = \\min(5, 7, 4, 5) = 4$。\n    我们发送 4 单位的流量。总流量 = $20 + 4 = 24$。\n    剩余容量：$c_f(s,v_2)=1$, $c_f(v_2,v_3)=3$, $c_f(v_3,v_6)=0$, $c_f(v_6,t)=1$。\n\n在这些增广之后，我们检查剩余图中是否还存在从 $s$ 到 $t$ 的路径。从顶点 $s$ 可达 $v_2$（剩余容量 1）。从 $v_2$ 可达 $v_3$（剩余容量 3）。从 $v_3$ 可达 $v_1$（通过反向边）和 $v_5$（剩余容量 3）。从 $v_5$ 出发，所有前向路径都已饱和（例如，$(v_5, t)$ 的剩余容量为 0）。因此，不再存在从 $s$ 到 $t$ 的路径。\n\n最大流为 $F_{max} = 24$。由于 $F_{max} = 24 < D = 25$，该循环流确实是不可行的。流量差额为 $\\Delta = D - F_{max} = 25 - 24 = 1$。\n\n为了使循环流变得可行，我们必须将最大流至少增加 $\\Delta = 1$。根据最大流最小割定理，最大流等于最小割的容量。只有增加横跨最小割（从源点侧到汇点侧）的边的容量，才能增加最大流。\n\n我们来找出这个最小割。源点侧划分 $S$ 包含最终剩余图中所有从 $s$ 可达的顶点。\n- $s \\in S$。\n- 存在路径 $s \\rightarrow v_2$，所以 $v_2 \\in S$。\n- 存在路径 $s \\rightarrow v_2 \\rightarrow v_3$，所以 $v_3 \\in S$。\n- 从 $v_3$，我们可以到达 $v_1$ 和 $v_5$。所以 $v_1, v_5 \\in S$。\n- 没有其他顶点可从 $s$ 到达。\n所以，最小割划分为 $S = \\{s, v_1, v_2, v_3, v_5\\}$ 和 $T = V' \\setminus S = \\{v_4, v_6, t\\}$。\n\n割 $C(S,T)$ 的容量是 $G'$ 中所有满足 $u \\in S$ 和 $v \\in T$ 的边 $(u,v)$ 的容量之和。\n- 边 $(v_1, v_4)$：$v_1 \\in S, v_4 \\in T$。容量 = $c(v_1, v_4) = 8$。\n- 边 $(v_3, v_6)$：$v_3 \\in S, v_6 \\in T$。容量 = $c(v_3, v_6) = 4$。\n- 边 $(v_5, t)$：$v_5 \\in S, t \\in T$。容量 = $c(v_5, t) = 12$。\n注意：$(v_4, v_5)$ 是一条从 $T$ 到 $S$ 的边，不计入割的容量。\n最小割的容量为 $8 + 4 + 12 = 24$，这与我们计算出的最大流结果一致。\n\n要将最大流从 24 增加到 25，我们必须将此最小割的容量增加 1。这可以通过增加割中某条前向边（$(v_1, v_4)$、$(v_3, v_6)$ 或 $(v_5, t)$）的容量来实现。\n问题要求对原始网络中的单条边进行升级。此割中来自原始网络的边是 $(v_1, v_4)$ 和 $(v_3, v_6)$。\n\n将这些原始边中任意一条的容量增加一个量 $\\delta$，最小割的容量就会增加 $\\delta$。为了弥补 $\\Delta=1$ 的流量差额，我们需要将这样一条边的容量增加至少 1。因此，所需的最小整数增量为 1。例如，将 $c(v_1, v_4)$ 从 8 增加到 9 会使新的最小割容量变为 $9+4+12=25$，从而允许一个可行流。", "answer": "$$\\boxed{1}$$", "id": "1488582"}]}
{"hands_on_practices": [{"introduction": "让我们从一个直观的练习开始，以巩固您对源和汇的理解。这个练习 [@problem_id:1533638] 建立在一个网格图上，它模拟了一个所有街道都为单行道的城市街区。通过分析这个高度结构化的有向无环图（DAG），您将练习如何通过检查顶点的入度（$d^-(v)$）和出度（$d^+(v)$）来系统地识别源和汇。", "problem": "考虑一个有向图 $G$，它代表一个城市中的单行道网格。顶点集合 $V$ 是一个 $m \\times n$ 的交叉口网格，其中 $m$ 和 $n$ 是大于 1 的整数。每个顶点由一个坐标对 $(i, j)$ 表示，其中 $1 \\le i \\le m$ 且 $1 \\le j \\le n$。整数 $i$ 代表行（大道），$j$ 代表列（街道）。\n\n该图的有向边定义如下：对于任意顶点 $(i, j)$，如果 $1 \\le j < n$，则存在一条从 $(i, j)$ 到 $(i, j+1)$ 的有向边；如果 $1 \\le i < m$，则存在一条从 $(i, j)$ 到 $(i+1, j)$ 的有向边。这种结构确保了网格上所有的交通流向“右”或“下”，使其成为一个有向无环图（DAG）。\n\n在有向无环图中，**源点** 是指没有入边（入度为 0）的顶点，**汇点** 是指没有出边（出度为 0）的顶点。\n\n以下哪个陈述准确地描述了此网格图 $G$ 中源点和汇点的数量？\n\nA. 该图有单个源点和单个汇点。\nB. 该图有 $m$ 个源点和 $n$ 个汇点。\nC. 该图有 $n$ 个源点和 $m$ 个汇点。\nD. 该图有单个源点和 $n$ 个汇点。\nE. 该图有 $m$ 个源点和单个汇点。", "solution": "根据有向边的定义：\n- 从任何 $(i,j)$ 到 $(i,j+1)$ 的边存在，当且仅当 $j<n$。\n- 从任何 $(i,j)$ 到 $(i+1,j)$ 的边存在，当且仅当 $i<m$。\n\n指向 $(i,j)$ 的入边只能来自：\n- $(i,j-1)$，当且仅当 $j>1$ (因为那时存在一条从 $(i,j-1)$ 到 $(i,j)$ 的边)，\n- $(i-1,j)$，当且仅当 $i>1$ (因为那时存在一条从 $(i-1,j)$ 到 $(i,j)$ 的边)。\n\n因此，一个顶点的入度为 $0$，当且仅当 $i=1$ 且 $j=1$。因此，唯一的源点是 $(1,1)$。\n\n从 $(i,j)$ 指出的出边存在，指向：\n- $(i,j+1)$，当且仅当 $j<n$，\n- $(i+1,j)$，当且仅当 $i<m$。\n\n因此，一个顶点的出度为 $0$，当且仅当 $i=m$ 且 $j=n$。因此，唯一的汇点是 $(m,n)$。\n\n所以该图有单个源点和单个汇点，这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1533638"}, {"introduction": "掌握了基本定义后，下一步是挑战一些看似合理但实际上可能错误的直觉。这个练习 [@problem_id:1533666] 要求您评估一个关于有向无环图中源和汇数量的普遍猜想。通过寻找一个反例，您将学会批判性地思考图的属性，并加深对源和汇数量关系并非总是相等的理解。", "problem": "一个有向图 $G$ 由一个顶点集 $V$ 和一个边集 $E$ 定义，其中每条边是一个顶点有序对 $(u,v)$，表示一个从顶点 $u$ 到顶点 $v$ 的有向连接。一个顶点的入度是其入边的数量，出度是其出边的数量。\n\n在此背景下，我们定义以下术语：\n- **源点 (source)** 是入度为 0 的顶点。\n- **汇点 (sink)** 是出度为 0 的顶点。\n- **有向无环图 (DAG)** 是不包含有向环的有向图（即，不存在一条由边构成的路径，其起点和终点是同一个顶点）。\n\n考虑以下论断：“对于任何非空有向无环图，其源点的数量总是等于汇点的数量。”\n\n你的任务是确定下列哪个由顶点集 $V$ 和边集 $E$ 描述的图，可以作为该论断的一个反例。\n\nA. $V = \\{1, 2, 3\\}$, $E = \\{(1, 2), (1, 3)\\}$\nB. $V = \\{1, 2, 3\\}$, $E = \\{(1, 2), (2, 3)\\}$\nC. $V = \\{1, 2, 3\\}$, $E = \\{(1, 2), (2, 3), (3, 1)\\}$\nD. $V = \\{1, 2, 3, 4\\}$, $E = \\{(1, 3), (1, 4), (2, 3), (2, 4)\\}$", "solution": "我们逐一检验每个选项，以找出一个非空有向无环图（DAG），其中源点（入度为零的顶点）的数量不等于汇点（出度为零的顶点）的数量。对于每个图，我们计算其入度和出度，验证其无环性，并比较源点和汇点的数量。\n\n选项 A：$V=\\{1,2,3\\}$, $E=\\{(1,2),(1,3)\\}$。各顶点的度为：$d^{-}(1)=0$ 且 $d^{+}(1)=2$（有边指向 $2$ 和 $3$），$d^{-}(2)=1$ 且 $d^{+}(2)=0$（只有来自 $1$ 的入边），$d^{-}(3)=1$ 且 $d^{+}(3)=0$（只有来自 $1$ 的入边）。源点集为 $\\{1\\}$（数量为 $1$），汇点集为 $\\{2,3\\}$（数量为 $2$）。图中没有有向环，因为所有边都从 $1$ 指向 $\\{2,3\\}$，而 $2$ 和 $3$ 都没有出边。因此，这是一个源点数量不等于汇点数量的非空有向无环图，所以它是一个反例。\n\n选项 B：$V=\\{1,2,3\\}$, $E=\\{(1,2),(2,3)\\}$。各顶点的度为：$d^{-}(1)=0$，$d^{+}(1)=1$；$d^{-}(2)=1$，$d^{+}(2)=1$；$d^{-}(3)=1$，$d^{+}(3)=0$。源点集为 $\\{1\\}$（数量为 $1$），汇点集为 $\\{3\\}$（数量为 $1$）。这是一个有向无环图（一条有向路径），且源点和汇点数量相等，因此不是反例。\n\n选项 C：$V=\\{1,2,3\\}$, $E=\\{(1,2),(2,3),(3,1)\\}$。该图包含有向环 $1 \\to 2 \\to 3 \\to 1$，所以它不是有向无环图，因此不能作为针对有向无环图的论断的反例。\n\n选项 D：$V=\\{1,2,3,4\\}$, $E=\\{(1,3),(1,4),(2,3),(2,4)\\}$。各顶点的度为：$d^{-}(1)=0$，$d^{+}(1)=2$；$d^{-}(2)=0$，$d^{+}(2)=2$；$d^{-}(3)=2$，$d^{+}(3)=0$；$d^{-}(4)=2$，$d^{+}(4)=0$。源点集为 $\\{1,2\\}$（数量为 $2$），汇点集为 $\\{3,4\\}$（数量为 $2$）。图中没有有向环，因为所有边都从 $\\{1,2\\}$ 指向 $\\{3,4\\}$，所以它是一个源点和汇点数量相等的有向无环图，不是反例。\n\n因此，在所有选项中，唯一有效的反例是 A。", "answer": "$$\\boxed{A}$$", "id": "1533666"}, {"introduction": "理论最终要应用于实践。这个练习 [@problem_id:1533678] 将源和汇的概念置于一个真实的场景中：管理软件库之间的依赖关系。通过使用在计算机科学中广泛应用的邻接表表示法，您将把抽象的图论概念转化为解决实际工程问题的具体步骤。", "problem": "CodeWeavers Inc. 管理着一个复杂的内部软件库生态系统。这些库之间的关系被建模为一个有向无环图 (DAG)，其中，一条从库 `u` 指向库 `v` 的有向边，记作 `(u, v)`，表示库 `u` 是库 `v` 的一个直接依赖项。该公司需要识别出所有的“顶层”库，这些库被定义为不为系统中任何其他库提供依赖的库。用图论的术语来说，这些库是依赖关系图中的汇点 (sink vertices)。\n\n这个依赖关系图的结构，包含12个用整数0到11标记的库，以邻接表的形式给出。在这种表示方法中，`Adj[i]` 是依赖于库 `i` 的库的列表。\n\n- `Adj[0] = [1, 4]`\n- `Adj[1] = [2, 3]`\n- `Adj[2] = []`\n- `Adj[3] = [5]`\n- `Adj[4] = [5]`\n- `Adj[5] = [6]`\n- `Adj[6] = []`\n- `Adj[7] = [8, 9]`\n- `Adj[8] = [10]`\n- `Adj[9] = [10]`\n- `Adj[10] = [11]`\n- `Adj[11] = []`\n\n你的任务是找出所有的顶层库（汇点）。将你的答案表示为一个按升序排列的顶点ID的行矩阵。", "solution": "我们将这些库建模为一个有向无环图 $G=(V,E)$，其中 $V=\\{0,1,\\dots,11\\}$。一条有向边 $(u,v)\\in E$ 表示 $u$ 是 $v$ 的一个直接依赖项。给出的邻接表 `Adj[i]` 列出了所有满足 $(i,v)\\in E$ 的顶点 $v$。\n\n顶层库（汇点）是指那些不作为任何其他库的依赖项的顶点。用图论的术语来说，一个汇点是出度为零的顶点 $v\\in V$。令 $d^{+}(v)$ 表示 $v$ 的出度。那么，$v$ 是一个汇点当且仅当 $d^{+}(v)=0$，这等价于 $\\mathrm{Adj}[v]$ 是一个空列表。\n\n我们检查每个顶点的邻接表：\n- $\\mathrm{Adj}[0]=[1,4]\\neq\\emptyset\\Rightarrow d^{+}(0)>0$。\n- $\\mathrm{Adj}[1]=[2,3]\\neq\\emptyset\\Rightarrow d^{+}(1)>0$。\n- $\\mathrm{Adj}[2]=[\\ ]=\\emptyset\\Rightarrow d^{+}(2)=0$ (汇点)。\n- $\\mathrm{Adj}[3]=[5]\\neq\\emptyset\\Rightarrow d^{+}(3)>0$。\n- $\\mathrm{Adj}[4]=[5]\\neq\\emptyset\\Rightarrow d^{+}(4)>0$。\n- $\\mathrm{Adj}[5]=[6]\\neq\\emptyset\\Rightarrow d^{+}(5)>0$。\n- $\\mathrm{Adj}[6]=[\\ ]=\\emptyset\\Rightarrow d^{+}(6)=0$ (汇点)。\n- $\\mathrm{Adj}[7]=[8,9]\\neq\\emptyset\\Rightarrow d^{+}(7)>0$。\n- $\\mathrm{Adj}[8]=[10]\\neq\\emptyset\\Rightarrow d^{+}(8)>0$。\n- $\\mathrm{Adj}[9]=[10]\\neq\\emptyset\\Rightarrow d^{+}(9)>0$。\n- $\\mathrm{Adj}[10]=[11]\\neq\\emptyset\\Rightarrow d^{+}(10)>0$。\n- $\\mathrm{Adj}[11]=[\\ ]=\\emptyset\\Rightarrow d^{+}(11)=0$ (汇点)。\n\n因此，汇点是 $2$、$6$ 和 $11$。按升序排列，行矩阵为 $\\begin{pmatrix}2 & 6 & 11\\end{pmatrix}$。", "answer": "$$\\boxed{\\begin{pmatrix}2 & 6 & 11\\end{pmatrix}}$$", "id": "1533678"}]}
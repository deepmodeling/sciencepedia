{"hands_on_practices": [{"introduction": "霍尔婚配定理为判断二分图中是否存在完美匹配提供了简洁而有力的准则。要真正掌握霍尔条件，最好的方法就是通过具体例子亲手检验它。本练习 [@problem_id:1510723] 提供了一个清晰的“助教分配课程”场景，要求你通过检查顶点子集，找出违反霍尔条件的“问题”集合，即满足 $|A| > |N(A)|$ 的集合，从而将抽象的数学不等式与实际问题联系起来。", "problem": "计算机科学系正在为四名学生助教（TA）（用集合 $U = \\{T_1, T_2, T_3, T_4\\}$ 表示）分配四门可用的本科课程（用集合 $V = \\{C_1, C_2, C_3, C_4\\}$ 表示）。每位助教必须刚好被分配到一门不同的课程。分配受限于助教的任教资格。每位助教有资格教授的课程列表如下：\n*   $T_1$ 有资格教授 $C_1$。\n*   $T_2$ 有资格教授 $C_1$ 和 $C_2$。\n*   $T_3$ 有资格教授 $C_2$。\n*   $T_4$ 有资格教授 $C_3$ 和 $C_4$。\n\n这个场景可以被建模为一个二分图 $G = (U \\cup V, E)$，其中，如果助教 $T_i$ 有资格教授课程 $C_j$，则存在一条边 $(T_i, C_j)$。一个有效的分配对应于一个覆盖 $U$ 中所有顶点的匹配。\n\n根据霍尔婚姻定理，这样的匹配存在的充要条件是，对于助教的任意子集 $A \\subseteq U$，$A$ 中的助教数量小于或等于他们全体有资格教授的不同课程的数量。也就是说，$|A| \\le |N(A)|$，其中 $N(A)$ 是 $A$ 中顶点的邻集。一个违反此条件（即 $|A| > |N(A)|$）的子集 $A$ 会使一个完整的分配无法实现。\n\n下列哪组助教代表了一个违反霍尔条件的子集 $A \\subseteq U$？\n\nA. $\\{T_1, T_4\\}$\n\nB. $\\{T_2, T_3, T_4\\}$\n\nC. $\\{T_1, T_2, T_3\\}$\n\nD. $\\{T_1, T_2, T_4\\}$\n\nE. 对所有助教的有效分配是可能的，因此不存在这样的子集。", "solution": "我们将此情况建模为一个二分图 $G=(U \\cup V,E)$，其中 $U=\\{T_{1},T_{2},T_{3},T_{4}\\}$ 且 $V=\\{C_{1},C_{2},C_{3},C_{4}\\}$，边代表任教资格：\n$$\nT_{1}\\to\\{C_{1}\\},\\quad T_{2}\\to\\{C_{1},C_{2}\\},\\quad T_{3}\\to\\{C_{2}\\},\\quad T_{4}\\to\\{C_{3},C_{4}\\}.\n$$\n根据霍尔婚姻定理，一个覆盖 $U$ 的匹配存在的充要条件是，对于任意子集 $A\\subseteq U$，都有 $|A|\\leq |N(A)|$，其中 $N(A)$ 是 $A$ 的邻集。当 $|A|>|N(A)|$ 时，就违反了该条件。\n\n我们通过计算 $N(A)$ 并比较 $|A|$ 和 $|N(A)|$ 的大小来检验每个选项。\n\n对于 $A=\\{T_{1},T_{4}\\}$：\n$N(A)=\\{C_{1}\\}\\cup\\{C_{3},C_{4}\\}=\\{C_{1},C_{3},C_{4}\\}, \\quad |A|=2, \\quad |N(A)|=3, \\quad 2\\le 3 \\text{ (不违反)}$。\n\n对于 $A=\\{T_{2},T_{3},T_{4}\\}$：\n$N(A)=\\{C_{1},C_{2}\\}\\cup\\{C_{2}\\}\\cup\\{C_{3},C_{4}\\}=\\{C_{1},C_{2},C_{3},C_{4}\\}, \\quad |A|=3, \\quad |N(A)|=4, \\quad 3\\le 4 \\text{ (不违反)}$。\n\n对于 $A=\\{T_{1},T_{2},T_{3}\\}$：\n$N(A)=\\{C_{1}\\}\\cup\\{C_{1},C_{2}\\}\\cup\\{C_{2}\\}=\\{C_{1},C_{2}\\}, \\quad |A|=3, \\quad |N(A)|=2, \\quad 3>2 \\text{ (违反)}$。\n\n对于 $A=\\{T_{1},T_{2},T_{4}\\}$：\n$N(A)=\\{C_{1}\\}\\cup\\{C_{1},C_{2}\\}\\cup\\{C_{3},C_{4}\\}=\\{C_{1},C_{2},C_{3},C_{4}\\}, \\quad |A|=3, \\quad |N(A)|=4, \\quad 3\\le 4 \\text{ (不违反)}$。\n\n因此，选项中唯一违反霍尔条件的子集是 $\\{T_{1},T_{2},T_{3}\\}$，对应于选项 C。这也解释了为什么一个完整的分配是不可能的：三位助教合在一起只有两门课程可供选择。", "answer": "$$\\boxed{C}$$", "id": "1510723"}, {"introduction": "仅仅知道一个图不满足霍尔条件是不够的，我们还希望量化它“差了多少”。为此，我们引入“亏量”（deficiency）这一核心概念，其定义为 $\\text{def}(S) = |S| - |N(S)|$。在此练习 [@problem_id:1510763] 中，你将为一个给定的二分图计算其最大亏量，这需要你系统地评估不同子集的亏量，从而精确地衡量该图距离存在完美匹配的差距。", "problem": "在二分图匹配的背景下，对于二分图 $G = (X \\cup Y, E)$ 中顶点划分 $X$ 的一个子集 $S$，其亏量定义为 $\\text{def}(S) = |S| - |N(S)|$，其中 $N(S)$ 是 $S$ 的邻域（即 $Y$ 中所有与 $S$ 中至少一个顶点相邻的顶点的集合）。图 $G$ 相对于划分 $X$ 的亏量，记作 $\\mathrm{def}(G, X)$，是 $X$ 的所有非空子集 $S$ 的亏量中的最大值。一个图不满足 Hall 条件当且仅当其亏量大于零。\n\n考虑一个具有以下结构的简单二分图 $G = (X \\cup Y, E)$：\n顶点划分为 $X = \\{x_1, x_2, x_3, x_4\\}$ 和 $Y = \\{y_1, y_2, y_3\\}$。\n边集 $E$ 的构造如下：\n- 由 $X$ 中的顶点 $\\{x_1, x_2, x_3\\}$ 和 $Y$ 中的顶点 $\\{y_1, y_2\\}$ 诱导的子图是一个完全二分图。\n- 顶点 $x_4$ 与顶点 $y_2$ 和 $y_3$ 相连。\n\n计算图 $G$ 相对于划分 $X$ 的亏量，即求 $\\mathrm{def}(G, X)$。", "solution": "我们使用定义 $\\text{def}(S)=|S|-|N(S)|$（对于非空子集 $S\\subseteq X$）以及 $\\mathrm{def}(G,X)=\\max_{S\\subseteq X,\\,S\\neq\\emptyset}\\text{def}(S)$。\n\n根据图的构造：\n- 顶点 $x_{1},x_{2},x_{3}$ 的邻点集均为 $\\{y_{1},y_{2}\\}$。\n- 顶点 $x_{4}$ 的邻点集为 $\\{y_{2},y_{3}\\}$。\n\n因此，对于任意非空子集 $S\\subseteq X$：\n1) 如果 $S\\subseteq\\{x_{1},x_{2},x_{3}\\}$，则 $N(S)=\\{y_{1},y_{2}\\}$，因此 $|N(S)|=2$ 且 $\\text{def}(S)=|S|-2$。当 $|S|$ 取遍 $\\{1,2,3\\}$ 时，其最大值为 $\\text{def}(S)=1$，于 $|S|=3$ 时（即 $S=\\{x_{1},x_{2},x_{3}\\}$）取得。\n2) 如果 $S=\\{x_{4}\\}$，则 $N(S)=\\{y_{2},y_{3}\\}$，因此 $|N(S)|=2$ 且 $\\text{def}(S)=1-2=-1$。\n3) 如果 $S=\\{x_{4}\\}\\cup T$，其中 $T$ 为 $\\{x_{1},x_{2},x_{3}\\}$ 的非空子集，则 $N(S)=\\{y_{1},y_{2},y_{3}\\}$，因此 $|N(S)|=3$ 且 $\\text{def}(S)=|T|+1-3=|T|-2$。当 $|T|$ 取遍 $\\{1,2,3\\}$ 时，其最大值为 $\\text{def}(S)=1$，于 $|T|=3$ 时（即 $S=X$）取得。\n\n综上，在所有非空子集 $S\\subseteq X$ 中取最大值，可得 $\\mathrm{def}(G,X)=1$。", "answer": "$$\\boxed{1}$$", "id": "1510763"}, {"introduction": "亏量概念的深刻之处在于它与最大匹配的大小紧密相连，具体关系为 $\\max_{S \\subseteq X} \\text{def}(S) = |X| - |M|$。这个练习 [@problem_id:1510756] 将引导你探索一个构造性的方法，该方法源于这一定理的证明，能够准确地找出导致最大亏量的关键子集。通过追踪从一个未匹配顶点出发的 $M$-交错路径，你将亲身体验如何将亏量、最大匹配和图的结构联系起来，从而深化对匹配理论核心思想的理解。", "problem": "在二分图的研究中，霍尔婚配定理（Hall's Marriage Theorem）提供了一个存在覆盖某个划分中所有顶点的匹配的条件。该定理的一个推广引出了亏量（deficiency）的概念。对于一个二分图 $G=(X \\cup Y, E)$ 和一个顶点子集 $S \\subseteq X$，S的邻域是 $N(S) = \\{y \\in Y \\mid \\exists x \\in S, (x, y) \\in E\\}$，S的亏量定义为 $\\text{def}(S) = |S| - |N(S)|$。在X的所有子集中，最大亏量与最大匹配 $M$ 的大小通过以下等式相关联：$\\max_{S \\subseteq X} \\text{def}(S) = |X| - |M|$。\n\n在证明该关系的过程中，一个关键的构造是确定一个能够达到此最大亏量的特定集合 $S_H \\subseteq X$。该集合的构造方法如下：首先，确定 $X$ 中所有未被匹配 $M$ 覆盖的顶点集合，记为 $U_X$。然后，找到图中所有可以从 $U_X$ 中任意顶点通过一条 $M$-交错路径到达的顶点集合 $Z$（这些顶点可以来自 $X$ 或 $Y$）。一条 $M$-交错路径是指其边在不属于 $M$ 和属于 $M$ 之间交替的路径。根据定义，从 $U_X$ 中的顶点出发的路径的第一条边必须不属于 $M$。集合 $S_H$ 则由 $Z$ 和 $X$ 的交集给出，即 $S_H = Z \\cap X$。\n\n考虑一个二分图，其划分为 $X = \\{x_1, x_2, x_3, x_4, x_5, x_6\\}$ 和 $Y = \\{y_1, y_2, y_3, y_4, y_5, y_6\\}$。其边集为 $E = \\{(x_1, y_1), (x_2, y_1), (x_3, y_1), (x_4, y_1), (x_4, y_2), (x_5, y_3), (x_6, y_4)\\}$。\n\n该图的一个最大匹配 $M$ 由 $M = \\{(x_1, y_1), (x_4, y_2), (x_5, y_3), (x_6, y_4)\\}$ 给出。\n\n按照上述步骤，确定规范集 $S_H = Z \\cap X$。以下哪个集合是 $S_H$？\n\nA. $\\{x_1, x_2, x_3\\}$\n\nB. $\\{x_2, x_3\\}$\n\nC. $\\{x_1, x_4, x_5, x_6\\}$\n\nD. $\\{x_2, x_3, x_4\\}$\n\nE. $\\{x_1, x_2, x_3, x_4\\}$", "solution": "问题要求我们为给定的二分图 $G=(X \\cup Y, E)$ 和一个最大匹配 $M$ 找到一个特定的集合 $S_H \\subseteq X$。该集合 $S_H$ 被定义为 $Z \\cap X$，其中 $Z$ 是从 $X$ 中任意一个 $M$-未匹配顶点出发，通过一条 $M$-交错路径可以到达的所有顶点的集合。\n\n给定的图的组成部分如下：\n- 划分 $X = \\{x_1, x_2, x_3, x_4, x_5, x_6\\}$\n- 划分 $Y = \\{y_1, y_2, y_3, y_4, y_5, y_6\\}$\n- 边集 $E = \\{(x_1, y_1), (x_2, y_1), (x_3, y_1), (x_4, y_1), (x_4, y_2), (x_5, y_3), (x_6, y_4)\\}$\n- 最大匹配 $M = \\{(x_1, y_1), (x_4, y_2), (x_5, y_3), (x_6, y_4)\\}$\n\n求解过程包括三个主要步骤：\n1.  确定 $X$ 中 $M$-未匹配顶点的集合 $U_X$。\n2.  构造从 $U_X$ 出发通过 $M$-交错路径可达的所有顶点的集合 $Z$。\n3.  通过取 $Z$ 和 $X$ 的交集来确定 $S_H$。\n\n**步骤 1：确定 X 中 M-未匹配顶点的集合 ($U_X$)**\n\n$X$ 中的顶点集合是 $\\{x_1, x_2, x_3, x_4, x_5, x_6\\}$。属于匹配 $M$ 的 $X$ 中的顶点是 $\\{x_1, x_4, x_5, x_6\\}$。通过计算集合差，我们找到 $X$ 中的未匹配顶点：\n$$U_X = X \\setminus \\{x_1, x_4, x_5, x_6\\} = \\{x_2, x_3\\}$$\n\n**步骤 2：构造可达顶点的集合 Z**\n\n我们将通过探索从 $U_X = \\{x_2, x_3\\}$ 中的顶点开始的路径来构建集合 $Z$。从 $U_X$ 中的顶点开始的 $M$-交错路径必须以一条不在 $M$ 中的边开始。搜索可达顶点的过程可以迭代执行，类似于广度优先搜索，在 $Y$ 和 $X$ 的顶点层之间交替进行。\n\n- **初始化：** 搜索从未匹配的顶点集开始。令 $Z_0 = U_X = \\{x_2, x_3\\}$。我们将目前找到的所有可达顶点的集合初始化为 $Z = Z_0$。\n\n- **第一轮迭代 (从 $X \\to Y$)：** 我们寻找可以从当前可达的 $X$ 中顶点（即 $Z \\cap X = \\{x_2, x_3\\}$）通过使用**不**在 $M$ 中的边到达的 $Y$ 中的顶点。\n    - 从 $x_2$ 出发：唯一的边是 $(x_2, y_1)$。这条边不在 $M$ 中。因此，$y_1$ 是可达的。\n    - 从 $x_3$ 出发：唯一的边是 $(x_3, y_1)$。这条边不在 $M$ 中。因此，再次发现 $y_1$ 是可达的。\n    - 新到达的 $Y$ 中的顶点是 $\\{y_1\\}$。我们将它们添加到集合 $Z$ 中。\n    - 现在 $Z$ 是 $\\{x_2, x_3, y_1\\}$。\n\n- **第二轮迭代 (从 $Y \\to X$)：** 我们寻找可以从新发现的 $Y$ 中顶点（即 $\\{y_1\\}$）通过使用**在** $M$ 中的边到达的 $X$ 中的顶点。\n    - 从 $y_1$ 出发：与 $y_1$ 相连的 $X$ 中的顶点是 $x_1, x_2, x_3, x_4$。我们检查这些边中有哪些在 $M$ 中。\n    - 边 $(x_1, y_1)$ 在 $M$ 中。因此，我们可以从 $y_1$ 到达 $x_1$。路径形式如 $x_2 \\to y_1 \\leftarrow x_1$。\n    - 边 $(x_2, y_1)$ 不在 $M$ 中。\n    - 边 $(x_3, y_1)$ 不在 $M$ 中。\n    - 边 $(x_4, y_1)$ 不在 $M$ 中。\n    - 唯一新到达的 $X$ 中的顶点是 $\\{x_1\\}$。我们将其添加到集合 $Z$ 中。\n    - 现在 $Z$ 是 $\\{x_1, x_2, x_3, y_1\\}$。\n\n- **第三轮迭代 (从 $X \\to Y$)：** 我们寻找可以从最新的 $X$ 中顶点（即 $\\{x_1\\}$）通过使用**不**在 $M$ 中的边到达的 $Y$ 中的顶点。\n    - 从 $x_1$ 出发：唯一的边是 $(x_1, y_1)$。这条边在 $M$ 中，所以我们不能用它来从 $x_1$ 延伸交错路径。\n    - 没有新的顶点被到达。\n\n由于没有新的顶点可以添加到 $Z$，过程终止。所有可达顶点的最终集合是：\n$$Z = \\{x_1, x_2, x_3, y_1\\}$$\n\n**步骤 3：确定集合 $S_H$**\n\n集合 $S_H$ 定义为可达顶点集合 $Z$ 与划分 $X$ 的交集。\n$$S_H = Z \\cap X = \\{x_1, x_2, x_3, y_1\\} \\cap \\{x_1, x_2, x_3, x_4, x_5, x_6\\}$$\n$$S_H = \\{x_1, x_2, x_3\\}$$\n\n这对应于选项 A。\n\n作为最后的检验，我们来计算该集合 $S_H$ 的亏量。\n- $S_H = \\{x_1, x_2, x_3\\}$，所以 $|S_H| = 3$。\n- $S_H$ 的邻域是 $N(S_H) = N(\\{x_1, x_2, x_3\\})$。从这些顶点出发的边是 $(x_1, y_1), (x_2, y_1), (x_3, y_1)$。它们都指向 $y_1$。所以 $N(S_H) = \\{y_1\\}$，且 $|N(S_H)|=1$。\n- 亏量为 $\\text{def}(S_H) = |S_H| - |N(S_H)| = 3 - 1 = 2$。\n- 理论上的最大亏量是 $|X| - |M| = 6 - 4 = 2$。\n- 我们构造的集合 $S_H$ 确实达到了最大亏量，这证实了我们结果的正确性。", "answer": "$$\\boxed{A}$$", "id": "1510756"}]}
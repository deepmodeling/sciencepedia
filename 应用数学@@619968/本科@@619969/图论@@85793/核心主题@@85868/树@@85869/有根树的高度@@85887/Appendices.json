{"hands_on_practices": [{"introduction": "“树高”的概念不仅是图论中的一个抽象定义，它在现实世界中有着广泛的应用。例如，公司的组织结构、计算机的文件系统都可以被建模为有根树。这个练习将带你进入一个具体的场景——分析一个公司的层级结构，通过将汇报关系转化为有根树，你将亲手计算其高度，从而直观地理解树高在实际问题中的意义。[@problem_id:1511850]", "problem": "一家公司的组织结构由一系列直接汇报关系定义。每位员工都恰好向一位经理汇报，但首席执行官（CEO）例外，他不向任何人汇报。我们将员工的“层级”定义为其上方汇报链中，直至CEO所经过的经理人数。CEO位于层级0，其直接下属位于层级1，以此类推。整个结构的“高度”定义为所有员工中的最大层级。\n\n员工由唯一的字母标识。完整的直接汇报关系集合，表示为`(经理, 员工)`对，如下所示：\n(A, B), (A, C), (A, D), (B, E), (B, F), (C, G), (D, H), (D, I), (D, J), (F, K), (G, L), (G, M), (I, N), (N, O).\n\n已知员工'A'是CEO，请确定该组织结构的高度。", "solution": "将汇报关系解释为一个以A（CEO）为根的有根树。对于任意员工 $v$，将其层级函数 $\\ell(v)$ 定义为从A到 $v$ 的唯一路径上的边数。结构的高度 $H$ 为 $H=\\max_{v}\\ell(v)$。\n\n等价地，通过以下递推关系定义子树高度函数 $h(v)$：\n$$\nh(v)=\\begin{cases}\n0, & \\text{如果 $v$ 是叶节点（没有直接下属）},\\\\\n1+\\max\\limits_{w\\in \\text{children}(v)} h(w), & \\text{否则}。\n\\end{cases}\n$$\n那么总高度为 $H=h(A)$。\n\n根据给定的关系对，子节点集合如下：\n$$\n\\text{children}(A)=\\{B,C,D\\},\\quad \\text{children}(B)=\\{E,F\\},\\quad \\text{children}(C)=\\{G\\},\\quad \\text{children}(D)=\\{H,I,J\\},\n$$\n$$\n\\text{children}(F)=\\{K\\},\\quad \\text{children}(G)=\\{L,M\\},\\quad \\text{children}(I)=\\{N\\},\\quad \\text{children}(N)=\\{O\\}.\n$$\n叶节点为 $\\{E,H,J,K,L,M,O\\}$，因此\n$$\nh(E)=h(H)=h(J)=h(K)=h(L)=h(M)=h(O)=0.\n$$\n自底向上计算：\n$$\nh(F)=1+\\max\\{h(K)\\}=1,\\quad h(B)=1+\\max\\{h(E),h(F)\\}=1+\\max\\{0,1\\}=2,\n$$\n$$\nh(G)=1+\\max\\{h(L),h(M)\\}=1,\\quad h(C)=1+h(G)=2,\n$$\n$$\nh(N)=1+h(O)=1,\\quad h(I)=1+h(N)=2,\n$$\n$$\nh(D)=1+\\max\\{h(H),h(I),h(J)\\}=1+\\max\\{0,2,0\\}=3,\n$$\n$$\nh(A)=1+\\max\\{h(B),h(C),h(D)\\}=1+\\max\\{2,2,3\\}=4.\n$$\n因此，该组织结构的高度（所有员工中的最大层级）为 $4$，由员工 $O$ 在层级 $4$ 达到，其汇报链为 $A\\to D\\to I\\to N\\to O$。", "answer": "$$\\boxed{4}$$", "id": "1511850"}, {"introduction": "在上一个练习中，根节点是预先给定的。然而，对于一个给定的无根树，我们可以选择任何一个顶点作为根，而不同的选择可能会产生截然不同的树高。这个练习将通过最简单的树结构——路径图 $P_n$——来让你探索根的选择对树高的影响，通过寻找最大和最小可能的树高，你将深化对树高与根节点位置之间关系的理解。[@problem_id:1511842]", "problem": "在图论中，路图 $P_n$ 是一个有 $n$ 个顶点的图，其顶点标记为 $v_1, v_2, \\ldots, v_n$，并有 $n-1$ 条边连接 $v_i$ 与 $v_{i+1}$（对于所有 $1 \\le i < n$）。通过选择其中一个顶点作为根，任何这样的图都可以变成一棵有根树。在有根树中，一个顶点的*深度*是指从根到该顶点的唯一路径上的边数。一棵有根树的*高度*是其所有顶点中的最大深度。\n\n设 $H_{max}(n)$ 为在所有可能的根顶点选择下，由 $P_n$ 构成的有根树可能的最大高度。类似地，设 $H_{min}(n)$ 为可能的最小高度。\n\n对于一个有 $n$ 个顶点（其中 $n \\geq 2$）的路图，请找到和 $S(n) = H_{max}(n) + H_{min}(n)$ 关于 $n$ 的闭式表达式。", "solution": "设路图为 $P_{n}$，其顶点标记为 $v_{1},\\ldots,v_{n}$。选择一个根 $v_{k}$，其中 $1 \\leq k \\leq n$。在此有根树中，顶点 $v_{i}$ 的深度是图距离 $\\operatorname{dist}(v_{i},v_{k})=|i-k|$。因此，以 $v_{k}$ 为根的有根树的高度为\n$$\nh(k)=\\max_{1 \\leq i \\leq n} |i-k|=\\max\\{k-1,\\,n-k\\}.\n$$\n\n为了求得 $H_{\\max}(n)$，我们需要对 $k$ 最大化 $h(k)$。对于任何 $k$，$k-1$ 和 $n-k$ 都至多为 $n-1$，并且当取 $k=1$ 或 $k=n$ 时，可得 $h(k)=n-1$。因此，\n$$\nH_{\\max}(n)=n-1.\n$$\n\n为了求得 $H_{\\min}(n)$，我们需要对 $k$ 最小化 $h(k)=\\max\\{k-1,n-k\\}$。设 $a=k-1$ 且 $b=n-k$，那么 $a,b \\geq 0$ 且 $a+b=n-1$。对于任何这样的 $a,b$，\n$$\n\\max\\{a,b\\} \\geq \\frac{a+b}{2}=\\frac{n-1}{2},\n$$\n所以 $\\max\\{a,b\\} \\geq \\left\\lceil\\frac{n-1}{2}\\right\\rceil$。这个下界可以通过选择 $k$ 使得 $a$ 和 $b$ 尽可能相等来达到，即选择中心顶点（若 $n$ 为奇数）或两个中心顶点之一（若 $n$ 为偶数）。因此\n$$\nH_{\\min}(n)=\\left\\lceil\\frac{n-1}{2}\\right\\rceil=\\left\\lfloor\\frac{n}{2}\\right\\rfloor.\n$$\n\n因此，所求的和为\n$$\nS(n)=H_{\\max}(n)+H_{\\min}(n)=(n-1)+\\left\\lfloor\\frac{n}{2}\\right\\rfloor.\n$$\n等价地，若 $n$ 为偶数，$S(n)=\\frac{3n}{2}-1$；若 $n$ 为奇数，$S(n)=\\frac{3(n-1)}{2}$。", "answer": "$$\\boxed{n-1+\\left\\lfloor \\frac{n}{2} \\right\\rfloor}$$", "id": "1511842"}, {"introduction": "掌握了计算和分析树高的方法后，我们可以提出一个更深入的“假设性”问题：对树的结构进行微小的改动会如何影响其整体性质？这个练习挑战你的直觉，探讨移除一个叶节点是否总会降低树的高度 $h(T)$。通过分析这个问题，你将学会严谨地思考图的性质变化，并培养构造反例来检验猜想的重要技能。[@problem_id:1511861]", "problem": "在图论中，**树**是一个不包含环的连通图。**有根树**是一种树，其中一个特殊的顶点被指定为**根**。这种结构建立了一种父子层次关系。在有根树中，任何一个顶点的**深度**是指从根到该顶点的唯一路径上的边数。根本身的深度为0。有根树的**高度**被定义为树中所有顶点的最大深度。**叶子**是没有子节点的顶点。\n\n设 $T$ 是一棵高度为 $h(T) \\ge 1$ 的有根树。通过从 $T$ 中选择一个叶节点，并移除它及其连接到其父节点的关联边，形成一棵新树 $T'$。设 $h(T')$ 表示所得树 $T'$ 的高度。\n\n对于*任何*高度 $h(T) \\ge 1$ 的有根树 $T$ 和*任何*被移除的叶子的选择，以下哪个陈述正确描述了 $h(T)$ 和 $h(T')$ 之间的关系？\n\nA. $h(T') < h(T)$ 总是成立。\n\nB. $h(T') = h(T) - 1$ 总是成立。\n\nC. $h(T') \\le h(T)$ 总是成立，并且 $h(T') = h(T)$ 是可能的。\n\nD. $h(T') = h(T)$ 总是成立。\n\nE. $h(T')$ 可能大于 $h(T)$。", "solution": "设有根树用 $T$ 表示，其根为 $r$，高度为 $h(T) \\ge 1$。设 $v$ 是 $T$ 的一个叶子，其深度为 $d(v)$，通过移除 $v$ 及其关联边形成 $T'$。\n\n首先，观察到从树中移除一个叶子会得到另一棵树：因为 $v$ 的度为1，删除 $v$ 及其唯一的关联边不会断开任何剩余的顶点，所以 $T'$ 是连通且无环的。\n\n对于任何剩余的顶点 $u \\neq v$，其在 $T'$ 中的深度等于其在 $T$ 中的深度。这是因为 $u$ 的深度是从 $r$ 到 $u$ 的唯一路径的长度。在 $T$ 中，该路径不能经过 $v$（除非 $u=v$），因为 $v$ 是一个叶子，没有后代。因此，对于所有 $u \\in V(T')$，从 $r$ 到 $u$ 在 $T'$ 中的路径与在 $T$ 中的路径是相同的，因此\n$$\n\\text{for all } u \\in V(T'), \\quad \\text{depth}_{T'}(u)=\\text{depth}_{T}(u).\n$$\n很容易得出\n$$\nh(T') \\le h(T).\n$$\n\n我们现在考虑等式或严格不等式何时发生。\n\n- 如果 $d(v) < h(T)$，那么在 $T$ 中至少存在一个深度为 $h(T)$ 的顶点 $w$，并且 $w$ 仍留在 $T'$ 中，其深度不变。因此\n$$\nh(T') = h(T).\n$$\n\n- 如果 $d(v) = h(T)$，那么会出现两种子情况：\n  - 如果存在另一个深度为 $h(T)$ 的顶点 $w \\neq v$，那么该顶点仍然存在并保持了最大深度，所以 $h(T')=h(T)$。\n  - 如果 $v$ 是唯一深度为 $h(T)$ 的顶点，那么所有剩余顶点的深度最多为 $h(T)-1$，因此\n$$\nh(T') = h(T) - 1.\n$$\n\n这些情况表明，$h(T') \\le h(T)$ 总是成立，并且 $h(T')=h(T)$ 和 $h(T')=h(T)-1$ 都是可能的，这取决于被移除的叶子的选择以及 $T$ 的结构。具体来说，$h(T') > h(T)$ 是不可能的，并且 $h(T')=h(T)-1$ 或严格的 $h(T')<h(T)$ 并非总是成立。\n\n因此，在这些选项中，正确的陈述是：$h(T') \\le h(T)$ 总是成立，并且 $h(T') = h(T)$ 是可能的。", "answer": "$$\\boxed{C}$$", "id": "1511861"}]}
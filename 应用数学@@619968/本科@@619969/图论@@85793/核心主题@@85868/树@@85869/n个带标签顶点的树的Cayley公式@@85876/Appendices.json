{"hands_on_practices": [{"introduction": "理论的生命力在于实践。本节将通过一系列精心设计的练习，帮助你熟练掌握计数标记树的核心工具——Prüfer 序列。第一个练习将直接检验你对顶点度与 Prüfer 序列构成之间基本关系的理解，这是将理论转化为解决问题能力的关键一步。这个问题模拟了在网络设计中，一些节点（例如，一个简单的终端或一个具有特定连接能力的集线器）具有预定义角色的情景。[@problem_id:1486040]", "problem": "在网络拓扑学的研究中，树是一种基本结构。一个有 $n$ 个顶点的带标记的树包含一个顶点集 $V = \\{1, 2, \\dots, n\\}$ 和一个由 $n-1$ 条边组成的集合，这些边连接这些顶点，使得最终的图是连通且无环的。\n\n一个顶点的度是与它相关联的边的数量。如果一个顶点的度恰好为1，则称其为叶节点。\n\n考虑有 $n$ 个顶点的带标记的树，其中 $n \\geq 3$。设 $k$ 为一个满足 $1 \\leq k \\leq n-2$ 的整数。您的任务是找到一个用 $n$ 和 $k$ 表示的通用公式，用于计算满足以下两个条件的 $n$ 顶点带标记树的总数：\n1.  标记为“1”的顶点是叶节点。\n2.  标记为“2”的顶点的度恰好为 $k$。", "solution": "使用带标记树的 Prüfer 编码：每个有 $n$ 个带标记顶点的树都与一个在字母表 $\\{1,2,\\dots,n\\}$ 上长度为 $n-2$ 的序列一一对应。在这种编码中，顶点 $v$ 的度等于 $v$ 在 Prüfer 序列中出现的次数加1。因此：\n- 顶点1是叶节点的条件等价于顶点1在 Prüfer 序列中出现0次。\n- 顶点2的度恰好为 $k$ 的条件等价于顶点2在 Prüfer 序列中出现恰好 $k-1$ 次。\n\n我们必须计算在字母表 $\\{1,2,\\dots,n\\}$ 上长度为 $(n-2)$ 的序列中，满足以下条件的序列数量：\n- 符号1恰好出现0次，\n- 符号2恰好出现 $k-1$ 次，\n- 剩下的 $n-k-1$ 个位置由来自 $\\{3,4,\\dots,n\\}$ 的符号填充。\n\n首先，为 $k-1$ 个2选择位置，有 $\\binom{n-2}{k-1}$ 种方式。剩下的 $n-k-1$ 个位置中的每一个都可以独立地用 $\\{3,4,\\dots,n\\}$ 中的任意一个符号（共 $n-2$ 个符号）填充，这给出了 $(n-2)^{n-k-1}$ 种可能性。根据这种一一对应关系，每个这样的序列都对应一个满足这两个条件的唯一的带标记树。因此，总数为\n$$\n\\binom{n-2}{k-1}(n-2)^{n-k-1}.\n$$\n\n作为一种通过度序列公式的交叉检验，具有度序列 $(d_{1},d_{2},\\dots,d_{n})$（其中 $\\sum d_{i}=2(n-1)$）的带标记树的数量是 $(n-2)!/\\prod_{i=1}^{n}(d_{i}-1)!$。设 $d_{1}=1$，$d_{2}=k$，并对于 $i\\geq 3$ 写成 $x_{i}=d_{i}-1\\geq 0$，则所有的 $x_{i}$ 之和为 $n-k-1$。对所有这样的 $(x_{3},\\dots,x_{n})$ 求和可得\n$$\n\\frac{(n-2)!}{(k-1)!}\\sum_{x_{3}+\\cdots+x_{n}=n-k-1}\\frac{1}{\\prod_{i=3}^{n}x_{i}!}\n=\\frac{(n-2)!}{(k-1)!(n-k-1)!}(n-2)^{n-k-1}\n=\\binom{n-2}{k-1}(n-2)^{n-k-1},\n$$\n这与通过 Prüfer 序列计算出的数量相符。", "answer": "$$\\boxed{\\binom{n-2}{k-1}(n-2)^{\\,n-k-1}}$$", "id": "1486040"}, {"introduction": "在掌握了如何处理特定顶点的度约束后，我们来挑战一个更具全局性的问题。这个练习要求我们考虑整个图的一个整体属性——最大度，而不是单个顶点的性质。这需要你对 Prüfer 序列有一个更宏观的认识，并能从图的全局特性推断出序列的结构，从而进一步提升你的组合推理能力。[@problem_id:1486033]", "problem": "在去中心化通信网络的设计中，通常使用树形拓扑来确保连通性且没有冗余路径。考虑一个由 $n$ 个节点组成的网络，其中每个节点都有唯一的标签。一组特定的网络设计具有“伪中心化”结构的特征。该结构的定义是，连接最多的节点（度最高的节点）恰好与其他 $n-2$ 个节点相连。对于任何整数 $n \\ge 5$，确定满足此条件的带标签树状网络的不同总数。将您的答案表示为关于 $n$ 的公式。", "solution": "我们处理顶点集为 $\\{1,2,\\ldots,n\\}$ 的带标签的树，并使用 Prüfer 编码。对于一个有 $n$ 个顶点的带标签的树，其 Prüfer 编码是一个长度为 $n-2$ 的序列，其元素取自 $\\{1,\\ldots,n\\}$，并且顶点 $i$ 的度满足\n$$\n\\deg(i)=1+\\text{（$i$ 在 Prüfer 序列中出现的次数）}。\n$$\n\n我们要寻找最大度恰好为 $n-2$ 的树。首先，对于 $n\\geq 5$，不可能有两个不同的顶点其度为 $n-2$。事实上，如果两个顶点的度都是 $n-2$，那么度的总和至少为\n$$\n2(n-2)+(n-2)\\cdot 1=3n-6,\n$$\n因为其他 $n-2$ 个顶点的度至少为 $1$。但一个有 $n$ 个顶点的树的总度数为 $2(n-1)$，而对于 $n\\geq 5$ 有 $3n-6>2n-2$，这便产生了一个矛盾。因此，对于 $n\\geq 5$，存在一个唯一的度为 $n-2$ 的顶点 $v$。\n\n在 Prüfer 编码中，$\\deg(v)=n-2$ 意味着 $v$ 恰好出现 $n-3$ 次。由于序列的长度是 $n-2$，剩下的 1 次出现必须属于恰好另一个顶点 $w$，而所有其他顶点则出现 0 次。因此，Prüfer 序列恰好由两个不同的符号组成：$v$ 出现 $n-3$ 次，$w$ 出现一次。反之，任何这样的 Prüfer 序列都会生成一棵最大度为 $n-2$ 的树（该最大度由唯一的顶点 $v$ 达到）。\n\n对这些序列进行计数：\n- 选择 $v$（度为 $n-2$ 的唯一顶点）：有 $n$ 种选择。\n- 选择 $w\\neq v$（度为 $2$ 的唯一顶点）：有 $n-1$ 种选择。\n- 在长度为 $n-2$ 的 Prüfer 序列中选择 $w$ 单次出现的位置：有 $n-2$ 种选择。\n\n因此，最大度恰好为 $n-2$ 的带标签树的总数为\n$$\nn(n-1)(n-2).\n$$\n\n根据题目要求，此计数对所有整数 $n\\geq 5$ 均有效。", "answer": "$$\\boxed{n(n-1)(n-2)}$$", "id": "1486033"}, {"introduction": "最后，让我们转换一下解题思路。有时，直接计算满足特定条件的对象数量很困难，但计算“反面”——即不满足条件的对象数量——却相对容易。本练习将引导你使用容斥原理这一强大的组合策略：从总数中减去包含“禁止”结构的树的数量，这不仅巩固了你对凯莱公式的理解，也展示了其推广形式在解决复杂约束问题时的威力。[@problem_id:1486060]", "problem": "考虑一个包含 $n$ 个不同带标号顶点的集合 $V = \\{v_1, v_2, \\dots, v_n\\}$，其中 $n \\ge 3$。在这些顶点上的一棵树是一个无向图，它连通所有顶点且不包含任何圈。在这 $n$ 个带标号顶点上可以形成的不同树的总数由 Cayley 公式给出，为 $n^{n-2}$。\n\n你的任务是求出顶点集 $V$ 上的带标号树的数量，要求这些树不同时包含边 $\\{v_1, v_2\\}$ 和边 $\\{v_1, v_3\\}$。\n\n请用 $n$ 表示该数量的封闭形式表达式。", "solution": "我们从 Cayley 公式开始：$n$ 个不同带标号顶点上的带标号树的总数为 $n^{n-2}$。\n\n我们必须减去同时包含边 $\\{v_{1},v_{2}\\}$ 和 $\\{v_{1},v_{3}\\}$ 的树的数量。考虑一个由这两条边组成的固定森林 $F$。它的连通分量是：\n- 一个在顶点集 $\\{v_{1},v_{2},v_{3}\\}$ 上的大小为 3 的连通分量（一棵有 2 条边的树），\n- 以及 $n-3$ 个孤立顶点，每个都是一个大小为 1 的连通分量。\n\n因此，森林 $F$ 有 $k=n-2$ 个连通分量，其大小分别为 $s_{1}=3$ 和 $s_{2}=\\dots=s_{k}=1$。\n\nCayley 公式的一个标准推广（可通过收缩和加权的 Prüfer/Cayley 恒等式得到）指出，在 $n$ 个顶点上，包含一个固定森林 $F$（其连通分量大小为 $s_{1},\\dots,s_{k}$）的带标号树的数量为\n$$\nn^{k-2}\\prod_{i=1}^{k}s_{i}.\n$$\n将此公式应用于 $F$，得到同时包含 $\\{v_{1},v_{2}\\}$ 和 $\\{v_{1},v_{3}\\}$ 两条边的树的数量为\n$$\nn^{(n-2)-2}\\cdot 3=n^{n-4}\\cdot 3=3n^{n-4}.\n$$\n\n因此，不同时包含这两条边的带标号树的数量为\n$$\nn^{n-2}-3n^{n-4}.\n$$", "answer": "$$\\boxed{n^{\\,n-2}-3\\,n^{\\,n-4}}$$", "id": "1486060"}]}
{"hands_on_practices": [{"introduction": "我们从一个基本但极具启发性的场景开始。一个网络如果已经是一个树状结构（即，无环路且全连接），那么它本身就是唯一的生成树。本练习探讨了当我们在这样的基础之上增加一条冗余连接时会发生什么 [@problem_id:1492624]。通过分析这个只包含一个环路的图，你可以亲手验证生成树的数量与环路长度之间的直接关系，这为理解更复杂图中生成树的计数问题奠定了坚实的基础。", "problem": "考虑一个网络，其模型为一个有 $n$ 个顶点的树 $T$，其中 $n \\geq 3$。为了提高网络的弹性，在两个不同的顶点 $u$ 和 $v$ 之间建立了一条冗余通信链路，而这两个顶点在原树 $T$ 中并不直接相邻。在树 $T$ 中，连接 $u$ 和 $v$ 的唯一路径恰好由 $k$ 条边组成，其中 $k$ 是一个整数且 $k \\geq 2$。设 $G$ 是代表增强后网络的新图，它通过在 $T$ 中添加边 $(u, v)$ 而形成。$G$ 的一个生成树对应于该网络的一个最小全连接操作状态。求图 $G$ 中不同生成树的总数。", "solution": "设 $T$ 是一个有 $n$ 个顶点的树，所以其边数为 $|E(T)|=n-1$。添加边 $(u,v)$，其中在 $T$ 中连接 $u$ 与 $v$ 的唯一路径恰有 $k$ 条边，且 $k\\geq 2$。设 $G$ 为所得到的图。那么 $|E(G)|=n$，且 $G$ 恰好有一个圈，即\n$$\nC = \\text{(the $u$–$v$ path in $T$)} \\cup \\{(u,v)\\},\n$$\n这个圈包含路径上的 $k$ 条边以及新添加的边，因此其长度为 $|C|=k+1$。\n\n一个有 $n$ 个顶点的生成树恰有 $n-1$ 条边。由于 $G$ 有 $n$ 条边，因此 $G$ 的任何生成树都必须通过从 $G$ 中删除恰好一条边来获得。为了使得到的子图保持连通（即成为一棵树），被删除的边必须位于一个圈上；删除一个桥会使图不连通。\n\n在 $G$ 中，唯一的圈是 $C$。不在 $C$ 中的每条边都是一个桥：如果 $e\\notin C$，那么 $e$ 位于 $T$ 中 $u$–$v$ 路径之外，因此移除 $e$ 会将 $T$ 分割成两个连通分量 $A$ 和 $B$。添加的边 $(u,v)$ 完全位于包含 $u$–$v$ 路径的那个连通分量之内，因此无法重新连接 $A$ 和 $B$。所以 $e$ 在 $G$ 中也是一个桥，删除 $e$ 不可能得到一个生成树。\n\n反之，从 $C$ 中删除任意一条边都会破坏唯一的圈，并留下一个有 $n-1$ 条边的连通图，因此它是一个生成树。这样的选择恰好有 $|C|=k+1$ 种（即 $u$–$v$ 路径上的 $k$ 条边和添加的边 $(u,v)$），且每次删除都会得到一个不同的生成树。\n\n因此，$G$ 的不同生成树的总数是\n$$\nk+1\n$$。", "answer": "$$\\boxed{k+1}$$", "id": "1492624"}, {"introduction": "在处理了单环图之后，我们转向一个结构上更丰富的例子：完全图 $K_4$。直接枚举一个高度连接图的生成树可能非常繁琐，幸运的是，Cayley 公式为我们提供了一个强大的工具来计算完全图 $K_n$ 的生成树总数 [@problem_id:1492580]。这个练习不仅让你应用这个著名的公式，还引导你思考一个更深层次的问题：在所有这些带标签 (labeled) 的生成树中，有多少种不同的结构（非同构）形态？通过分解 $K_4$ 的生成树，你将获得对图的对称性和分类的宝贵洞察。", "problem": "在图论中，一个*图*由一个顶点集合和一组连接顶点对的边集合组成。顶点被认为是不同的且带有标记的。一个具有 $n$ 个顶点的*完全图*，记作 $K_n$，是这样一个图，其中每一对不同的顶点都由一条唯一的边连接。*树*是一个没有环的连通图。图 $G$ 的一个*生成树*是 $G$ 的一个子图，它是一棵树并且包含 $G$ 的所有顶点。\n\n如果两个图 $G_1$ 和 $G_2$ 的顶点集之间存在一个保持邻接性的一一对应，则它们是*同构*的。这意味着我们可以通过重新标记 $G_1$ 的顶点来得到 $G_2$。\n\n考虑具有四个顶点的完全图 $K_4$。它的生成树可以根据其结构进行分类。在四个顶点上有两种重要的树结构：\n1. *路图* $P_4$，它有两个度为 1 的顶点和两个度为 2 的顶点。\n2. *星形图* $S_4$ (也称为 $K_{1,3}$)，它有一个度为 3 的中心顶点，连接到另外三个度均为 1 的顶点。\n\n令 $N_P$ 为 $K_4$ 中与 $P_4$ 同构的不同生成树的数量。\n令 $N_S$ 为 $K_4$ 中与 $S_4$ 同构的不同生成树的数量。\n\n计算乘积 $N_P \\times N_S$。", "solution": "我们考虑 $K_{4}$ 的有标记生成树。根据 Cayley 公式，在 $n$ 个有标记顶点上的有标记生成树的数量为 $n^{n-2}$。代入 $n=4$ 得\n$$\n4^{4-2}=4^{2}=16\n$$，\n因此 $K_{4}$ 共有 $16$ 棵有标记生成树。\n\n一棵生成树要么与星形图 $S_{4}$ 同构，要么与路图 $P_{4}$ 同构，因为在同构意义下，这是四个顶点上仅有的两种树结构。\n\n为了计算与 $S_{4}$ 同构的数量 $N_{S}$，我们选择那个唯一的度为 $3$ 的中心顶点。在这 4 个有标记的顶点中有 4 种选择中心顶点的方式，一旦中心顶点确定，所有的边也就确定了。因此\n$$\nN_{S}=4\n$$。\n\n为了计算与 $P_{4}$ 同构的数量 $N_{P}$，我们可以使用两种等价的论证方法。首先，由于每棵生成树要么是路图，要么是星形图，所以\n$$\nN_{P}=16-N_{S}=16-4=12\n$$。\n或者，一个在 4 个顶点上的有标记路图是由这 4 个不同标记沿路径的排列所决定的，但要除去反向排列的重复计数，得到\n$$\nN_{P}=\\frac{4!}{2}=12\n$$。\n\n因此，所求的乘积是\n$$\nN_{P}\\times N_{S}=12\\times 4=48\n$$。", "answer": "$$\\boxed{48}$$", "id": "1492580"}, {"introduction": "我们已经掌握了如何计算完美连接网络 ($K_n$) 的生成树数量。然而，在现实世界中，网络很少是“完美”的。本练习模拟了一个更实际的场景：一个完全网络由于故障失去了一条连接 [@problem_id:1492636]。这个问题引导我们使用一个非常通用的图论技巧——删边-缩边原理 (deletion-contraction principle)，将一个新问题（计算 $K_n - e$ 的生成树）转化为我们已经知道如何解决的问题。通过这个练习，你将学会如何系统地分解问题，并利用已知结果来解决未知问题，这是理论研究和工程应用中的一项核心技能。", "problem": "考虑一个由 $n$ 台计算机服务器组成的网络，其中最初每台服务器都通过一条唯一的直接通信链路连接到所有其他服务器。此配置对应于一个 $n$ 个节点上的完全网络。一个“生成子网络”是一个保持所有服务器连接的最小链路集合，这意味着任意两台服务器之间都存在一条路径，但从该集合中移除任何一条链路都会将网络断开成两个或多个连通分量。由于故障，两台不同服务器之间的一条特定通信链路被永久切断。对于一个由 $n$ 台服务器构成的网络（其中 $n \\ge 3$），请确定使用剩余可用链路可以形成多少个不同的生成子网络。请将您的答案表示为 $n$ 的函数。", "solution": "让我们将问题转化为图论的语言。最初由 $n$ 台服务器组成的网络，其中每台服务器都与其他所有服务器相连，这是一个包含 $n$ 个顶点的完全图 $K_n$。所述的“生成子网络”是该图的一个生成树。问题陈述有一条链路被切断，这对应于从 $K_n$ 中移除一条边，我们称之为 $e$。我们需要求解的是所得图 $G = K_n - e$ 的生成树数量。令 $\\tau(H)$ 表示图 $H$ 的生成树数量。我们要求解的是 $\\tau(K_n - e)$。\n\n在一组 $n$ 个带标签的顶点上，生成树的总数即为完全图 $K_n$ 的生成树数量。根据 Cayley 公式，这个数量是：\n$$ \\tau(K_n) = n^{n-2} $$\n\n$K_n$ 的所有生成树的集合可以划分为两个不相交的集合：\n1. 不包含边 $e$ 的 $K_n$ 的生成树集合。\n2. 包含边 $e$ 的 $K_n$ 的生成树集合。\n\n第一个集合中生成树的数量恰好是 $\\tau(K_n - e)$，也就是我们要求解的量。我们将第二个集合中生成树的数量表示为 $\\tau_e(K_n)$。于是，我们有以下关系：\n$$ \\tau(K_n) = \\tau(K_n - e) + \\tau_e(K_n) $$\n整理此式可得：\n$$ \\tau(K_n - e) = \\tau(K_n) - \\tau_e(K_n) = n^{n-2} - \\tau_e(K_n) $$\n因此，我们的任务简化为求 $K_n$ 中包含特定边 $e$ 的生成树数量。\n\n图论中一个已知的结论指出，图 $H$ 中包含特定边 $e$ 的生成树数量，等于通过收缩边 $e$ 形成的图 $H/e$ 的生成树数量。因此，\n$$ \\tau_e(K_n) = \\tau(K_n/e) $$\n设要收缩的边为 $e=(u,v)$。图 $K_n/e$ 有 $n-1$ 个顶点。其中一个顶点，我们称之为 $w$，是由 $u$ 和 $v$ 合并而成的。另外 $n-2$ 个顶点是 $K_n$ 中除 $u$ 和 $v$ 之外的原始顶点。\n\n我们来分析多重图 $K_n/e$ 的结构：\n- 未参与收缩的 $n-2$ 个顶点彼此全部相连，形成一个完全图 $K_{n-2}$。\n- 对于这 $n-2$ 个顶点集合中的任意一个顶点 $x$，它在 $K_n$ 中原本与 $u$ 和 $v$ 都相连。收缩后，这两条边 $(x,u)$ 和 $(x,v)$ 变成了连接 $x$ 和新顶点 $w$ 的两条平行边。\n\n所以，$K_n/e$ 是一个有 $n-1$ 个顶点的多重图。我们可以使用同样适用于多重图的矩阵树定理来求其生成树的数量。我们为 $K_n/e$ 构建拉普拉斯矩阵 $L$。设顶点索引为 $v_1, \\dots, v_{n-2}$，收缩后的顶点为 $v_{n-1} = w$。\n\n对于 $i \\in \\{1, \\dots, n-2\\}$，顶点 $v_i$ 的度为：它与（$K_{n-2}$ 子图中的）其他 $n-3$ 个顶点各有条边相连，并与 $w$ 有两条平行边相连。所以，$\\deg(v_i) = (n-3) + 2 = n-1$。\n顶点 $w$ 的度为：它与另外 $n-2$ 个顶点中的每一个都有两条平行边相连。所以，$\\deg(w) = 2(n-2)$。\n\n大小为 $(n-1) \\times (n-1)$ 的拉普拉斯矩阵 $L$ 定义为 $L = D - A$，其中 $D$ 是顶点度的对角矩阵，$A$ 是邻接矩阵。对于多重图，$A_{ij}$ 是顶点 $i$ 和 $j$ 之间的边数。\n- 对角线元素：对于 $i=1, \\dots, n-2$，$L_{ii} = \\deg(v_i) = n-1$。$L_{n-1, n-1} = \\deg(w) = 2(n-2)$。\n- 非对角线元素：对于 $i,j \\in \\{1, \\dots, n-2\\}$ 且 $i \\neq j$，$L_{ij} = -1$。对于 $i \\in \\{1, \\dots, n-2\\}$，$L_{i, n-1} = -2$（因为有两条平行边）。\n\n生成树的数量 $\\tau(K_n/e)$ 是 $L$ 的任意一个代数余子式。最方便的计算方法是计算对应于顶点 $w$ 的代数余子式，即通过移除 $L$ 的最后一行和最后一列。我们将得到的 $(n-2) \\times (n-2)$ 矩阵称为 $L^*$。\n$$ L^*_{ij} = \\begin{cases} n-1 & \\text{if } i=j \\\\ -1 & \\text{if } i \\neq j \\end{cases} \\quad \\text{for } i,j \\in \\{1, \\dots, n-2\\} $$\n该矩阵可以写作 $L^* = (n-1)I - (J-I) = nI - J$，其中 $I$ 是 $(n-2) \\times (n-2)$ 的单位矩阵，$J$ 是 $(n-2) \\times (n-2)$ 的全一矩阵。\n\n一个大小为 $m \\times m$、形式为 $aI+bJ$ 的矩阵的行列式是 $(a+mb)a^{m-1}$。在这里，我们的矩阵是 $nI - J$，因此 $a=n, b=-1, m=n-2$。其行列式为：\n$$ \\det(L^*) = (n - (n-2))n^{(n-2)-1} = 2n^{n-3} $$\n因此，包含边 $e$ 的生成树数量为：\n$$ \\tau_e(K_n) = \\tau(K_n/e) = \\det(L^*) = 2n^{n-3} $$\n\n最后，我们可以计算出 $K_n-e$ 中的生成树数量：\n$$ \\tau(K_n - e) = n^{n-2} - \\tau_e(K_n) = n^{n-2} - 2n^{n-3} $$\n提取公因式 $n^{n-3}$，我们得到：\n$$ \\tau(K_n - e) = n^{n-3}(n-2) $$\n这就是在一条链路被切断后，可能形成的不同生成子网络的总数。", "answer": "$$\\boxed{(n-2)n^{n-3}}$$", "id": "1492636"}]}
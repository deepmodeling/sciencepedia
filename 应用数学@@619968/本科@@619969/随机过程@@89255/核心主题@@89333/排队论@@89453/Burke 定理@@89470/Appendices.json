{"hands_on_practices": [{"introduction": "伯克定理的核心思想是，一个稳定的 $M/M/1$ 队列的离去过程本身也是一个泊松过程。本练习将通过直接计算两个连续离去事件之间的时间间隔的概率分布，来动手验证这一定理的关键结论。这有助于加深对泊松过程与其指数分布间隔时间之间内在联系的理解 [@problem_id:1286973]。", "problem": "一个网络路由器被建模为单服务台排队系统，通常称为 M/M/1 队列。到达的数据包流服从泊松过程，其平均到达率为常数 $\\lambda$。路由器处理并转发单个数据包所需的时间服从指数分布，平均服务时间为 $1/\\mu$。系统处于稳态，该状态在到达率严格小于服务率（$\\lambda < \\mu$）时得以维持。路由器的缓冲区容量可视为无限大。设随机变量 $T$ 表示从路由器离去的第三个数据包与第四个数据包之间的时间间隔。求 $T$ 的概率密度函数 (PDF) $f_T(t)$，其中 $t \\ge 0$。", "solution": "我们将路由器建模为处于稳态的 M/M/1 队列，其到达率为 $\\lambda$，服务率为 $\\mu$，且 $\\lambda < \\mu$。设 $D$ 表示两个连续离去事件之间的间隔时间。我们关心的变量 $T$ 是第三个和第四个数据包离去之间的时间间隔，这恰好是一个离去间隔时间。根据离去过程的平稳性，$T$ 的分布与 $D$ 的分布相同。\n\n我们直接推导 $D$ 的分布律。考虑一次离去事件刚发生后的系统状态。设 $\\rho = \\lambda / \\mu$。系统在一次离去后变为空的概率为 $1 - \\rho$，而至少有一个数据包在等待的概率为 $\\rho$。这是 M/M/1 队列的一个标准稳态性质，可以通过时间可逆性或细致平衡来证明。\n\n对离去后的系统状态进行条件分析：\n\n1) 如果系统非空（概率为 $\\rho$），则下一次离去将在一个服务时间之后发生，该服务时间服从速率为 $\\mu$ 的指数分布，因此 $D \\sim \\mathrm{Exp}(\\mu)$。\n\n2) 如果系统为空（概率为 $1 - \\rho$），则下一次离去将在下一个到达所需的时间加上其随后的服务时间之后发生。到达间隔时间服从速率为 $\\lambda$ 的指数分布，服务时间服从速率为 $\\mu$ 的指数分布，且两者相互独立。因此，在这种情况下，$D$ 是两个独立的、速率分别为 $\\lambda$ 和 $\\mu$ 的指数随机变量之和。\n\n设 $L_{D}(s) = \\mathbb{E}[\\exp(-sD)]$ 是 $D$ 的拉普拉斯变换。根据全期望定律以及在系统为空情况下的独立性，我们有：\n$$\nL_{D}(s) = \\rho \\cdot \\frac{\\mu}{\\mu + s} + (1 - \\rho) \\cdot \\frac{\\lambda}{\\lambda + s} \\cdot \\frac{\\mu}{\\mu + s}.\n$$\n代入 $\\rho = \\lambda / \\mu$ 并化简：\n$$\nL_{D}(s) = \\frac{\\lambda}{\\mu + s} + \\left(1 - \\frac{\\lambda}{\\mu}\\right) \\cdot \\frac{\\lambda}{\\lambda + s} \\cdot \\frac{\\mu}{\\mu + s}\n= \\frac{\\lambda}{\\mu + s} + \\frac{(\\mu - \\lambda)\\lambda}{(\\lambda + s)(\\mu + s)}.\n$$\n通分得到：\n$$\nL_{D}(s) = \\frac{\\lambda(\\lambda + s) + (\\mu - \\lambda)\\lambda}{(\\lambda + s)(\\mu + s)}\n= \\frac{\\lambda s + \\mu \\lambda}{(\\lambda + s)(\\mu + s)}\n= \\frac{\\lambda(\\mu + s)}{(\\lambda + s)(\\mu + s)}\n= \\frac{\\lambda}{\\lambda + s}.\n$$\n这是速率为 $\\lambda$ 的指数分布的拉普拉斯变换。因此，$D \\sim \\mathrm{Exp}(\\lambda)$。根据 Burke 定理，这与以下事实相符：稳态 M/M/1 队列的离去过程是一个速率为 $\\lambda$ 的泊松过程，其离去间隔时间是相互独立的，且服从速率为 $\\lambda$ 的指数分布。\n\n由于 $T$ 是一个离去间隔时间，因此 $T \\sim \\mathrm{Exp}(\\lambda)$。因此，对于 $t \\ge 0$，其概率密度函数为\n$$\nf_{T}(t) = \\lambda \\exp(-\\lambda t).\n$$", "answer": "$$\\boxed{\\lambda \\exp(-\\lambda t)}$$", "id": "1286973"}, {"introduction": "理解了离去过程的性质后，一个自然而然的问题是：当一个顾客离去时，系统处于什么状态？本练习将我们的视角从离去流本身转移到离去发生的精确瞬间。通过计算一个顾客离去后系统恰好变为空的概率，你将深入理解与伯克定理密切相关的时间可逆性思想，并一窥著名的“PASTA（泊松到达看到时间平均）”原则在离去时刻的对应现象 [@problem_id:1286959]。", "problem": "考虑一个单服务器网络路由器的简化模型。数据包根据泊松过程到达此路由器，平均速率为每秒 $\\lambda$ 个数据包。该路由器一次只能处理一个数据包，处理单个数据包所需的时间是一个随机变量，服从均值为 $1/\\mu$ 秒的指数分布。因此，平均服务速率为每秒 $\\mu$ 个数据包。路由器有一个无限容量的缓冲区，用于在繁忙时存放到达的数据包。系统在稳定的稳态条件下运行，这意味着到达速率严格小于服务速率（$\\lambda < \\mu$）。\n\n一位观察者在一个已处理的数据包离开路由器的精确瞬间对系统进行监控。问，在这一确切时刻，路由器系统（包括其服务器和缓冲区）完全为空的概率是多少？\n\n请用到达速率 $\\lambda$ 和服务速率 $\\mu$ 表示您的答案，形式为一个闭式解析表达式。", "solution": "将路由器建模为一个 $M/M/1$ 生灭过程，其到达速率为 $\\lambda$，服务速率为 $\\mu$，且系统稳定，即 $\\lambda<\\mu$。令 $\\rho=\\lambda/\\mu$。系统中数量 $N$ 的平稳分布由标准的 $M/M/1$ 结果给出\n$$\n\\pi_{n}=\\mathbb{P}\\{N=n\\}=(1-\\rho)\\rho^{n},\\quad n\\geq 0.\n$$\n考虑在某个离去时刻的观察。令 $N^{-}$ 表示紧邻一次离去前的系统中数量，$N^{+}$ 表示紧邻其后的数量。离去只会从状态 $n\\geq 1$ 发生。在一个随机选择的离去时刻，观察到系统在离去前处于状态 $n$ 的概率，正比于系统处于状态 $n$ 的平稳概率与从该状态的离去速率（$\\mu$）的乘积。因此，根据与速率成比例的(庞姆)加权，\n$$\n\\mathbb{P}\\{N^{-}=n\\}=\\frac{\\pi_{n}\\mu}{\\sum_{k=1}^{\\infty}\\pi_{k}\\mu}=\\frac{\\pi_{n}}{1-\\pi_{0}},\\quad n\\geq 1,\n$$\n因为 $\\sum_{k=1}^{\\infty}\\pi_{k}=1-\\pi_{0}$。离去后的状态满足 $N^{+}=N^{-}-1$，因此系统在离去后立即变为空的事件是 $\\{N^{+}=0\\}=\\{N^{-}=1\\}$。因此\n$$\n\\mathbb{P}\\{N^{+}=0\\}=\\mathbb{P}\\{N^{-}=1\\}=\\frac{\\pi_{1}}{1-\\pi_{0}}.\n$$\n使用 $\\pi_{0}=1-\\rho$ 和 $\\pi_{1}=(1-\\rho)\\rho$，我们得到\n$$\n\\mathbb{P}\\{N^{+}=0\\}=\\frac{(1-\\rho)\\rho}{\\rho}=1-\\rho=1-\\frac{\\lambda}{\\mu}.\n$$\n这就是所求的，在紧随一次离去后的瞬间系统为空的概率。", "answer": "$$\\boxed{1-\\frac{\\lambda}{\\mu}}$$", "id": "1286959"}, {"introduction": "理论结果的真正价值在于其应用。本练习将你置于一个实际的工程情境中，你需要像一位分析师一样，面对一个参数未知的“黑箱”系统。你的任务是综合运用伯克定理来解释离去数据，并结合系统逗留时间方差的知识，最终推断出系统的核心运行参数——业务强度 $\\rho$。这个挑战突显了如何利用理论模型从有限的观测数据中提取深刻见解 [@problem_id:1286967]。", "problem": "一位分析师的任务是描述一个黑盒系统的特征，该系统作为一个处于稳态的稳定 M/M/1 队列运行。该系统具有未知的恒定到达率 $\\lambda$ 和未知的恒定服务率 $\\mu$。分析师唯一可用的数据来自两个独立的实验。\n\n在第一个实验中，记录了一个长序列的离去时间戳。从这个序列中，计算出离去间隔时间 $T_i$。这些离去间隔时间的样本均值为 $\\overline{T} = 0.50$ 秒。\n\n在第二个实验中，采用了一种先进的追踪方法，可以追踪单个“顾客”通过系统的过程。该实验可以直接估计顾客逗留时间（顾客在系统中从到达至离去所花费的总时间）的方差。估计的逗留时间方差为 $Var(S) = 4.00$ 平方秒。\n\n利用 M/M/1 队列的性质，包括 Burke 定理对离去过程的推论，确定系统的交通强度 $\\rho = \\lambda/\\mu$。", "solution": "设稳定的 M/M/1 队列的到达率为 $\\lambda$，服务率为 $\\mu$，且 $\\rho=\\lambda/\\mu\\in(0,1)$。\n\n第一个实验（离去过程和 Burke 定理）：\n- 根据 Burke 定理，在稳态下，M/M/1 队列的离去过程是一个泊松过程，其速率 $\\lambda$ 与到达过程相同。因此，离去间隔时间 $T_{i}$ 是独立同分布的，服从速率为 $\\lambda$ 的指数分布，其均值为 $\\mathbb{E}[T]=\\frac{1}{\\lambda}$。\n- 给定的长期样本均值为 $\\overline{T}=0.50$ 秒，所以\n$$\n\\mathbb{E}[T]=\\frac{1}{\\lambda}=0.50 \\quad \\Longrightarrow \\quad \\lambda=2.\n$$\n\n第二个实验（逗留时间方差）：\n- 在 M/M/1 队列中，服务时间 $G$ 服从速率为 $\\mu$ 的指数分布，所以其拉普拉斯-斯蒂尔切斯变换为 $G^{*}(s)=\\frac{\\mu}{\\mu+s}$。\n- 对于 M/G/1 队列，排队等待时间 $W_{q}$（不包括服务时间）的拉普拉斯-斯蒂尔切斯变换为\n$$\nW_{q}^{*}(s)=\\frac{(1-\\rho)s}{s-\\lambda\\left(1-G^{*}(s)\\right)}.\n$$\n- 代入 $G^{*}(s)=\\frac{\\mu}{\\mu+s}$ 和 $\\rho=\\frac{\\lambda}{\\mu}$ 可得\n$$\nW_{q}^{*}(s)=\\frac{(1-\\rho)s}{s-\\lambda\\left(1-\\frac{\\mu}{\\mu+s}\\right)}\n=\\frac{(1-\\rho)s}{s-\\lambda\\frac{s}{\\mu+s}}\n=\\frac{(1-\\rho)(\\mu+s)}{\\mu+s-\\lambda}.\n$$\n使用 $1-\\rho=\\frac{\\mu-\\lambda}{\\mu}$，我们得到\n$$\nW_{q}^{*}(s)=\\frac{\\mu-\\lambda}{\\mu}\\cdot\\frac{\\mu+s}{\\mu+s-\\lambda}.\n$$\n- 逗留时间 $S$（系统中的总时间）为 $S=W_{q}+G$，在 M/M/1 的情况下 $W_{q}$ 与 $G$ 相互独立，所以其变换为\n$$\nS^{*}(s)=W_{q}^{*}(s)\\,G^{*}(s)\n=\\left(\\frac{\\mu-\\lambda}{\\mu}\\cdot\\frac{\\mu+s}{\\mu+s-\\lambda}\\right)\\left(\\frac{\\mu}{\\mu+s}\\right)\n=\\frac{\\mu-\\lambda}{\\mu+s-\\lambda}\n=\\frac{\\mu-\\lambda}{(\\mu-\\lambda)+s}.\n$$\n这是速率为 $\\mu-\\lambda$ 的指数分布的拉普拉斯-斯蒂尔切斯变换。因此\n$$\nS\\sim \\text{Exp}(\\mu-\\lambda),\\qquad \\mathbb{E}[S]=\\frac{1}{\\mu-\\lambda},\\qquad \\operatorname{Var}(S)=\\frac{1}{(\\mu-\\lambda)^{2}}.\n$$\n- 实验给出 $\\operatorname{Var}(S)=4.00$，因此\n$$\n\\frac{1}{(\\mu-\\lambda)^{2}}=4.00 \\quad \\Longrightarrow \\quad (\\mu-\\lambda)^{2}=\\frac{1}{4} \\quad \\Longrightarrow \\quad \\mu-\\lambda=\\frac{1}{2},\n$$\n其中我们取正根，因为稳定性要求 $\\mu>\\lambda$。\n\n结合第一个实验得到的 $\\lambda=2$，\n$$\n\\mu=\\lambda+\\frac{1}{2}=2+\\frac{1}{2}=\\frac{5}{2}.\n$$\n因此交通强度为\n$$\n\\rho=\\frac{\\lambda}{\\mu}=\\frac{2}{\\frac{5}{2}}=\\frac{4}{5}.\n$$", "answer": "$$\\boxed{\\frac{4}{5}}$$", "id": "1286967"}]}
{"hands_on_practices": [{"introduction": "掌握了 M/M/S 模型的核心概念后，我们通过一个实际场景来应用这些知识。这个练习将带你计算一个多服务台系统的关键性能指标——平均排队长度 $L_q$。通过这类计算，管理者可以量化系统的拥堵程度，为资源配置决策提供数据支持。[@problem_id:1342382]", "problem": "一所大学的中央IT服务台在高峰时段（即学期第一周）有四名技术支持专家值班。寻求帮助的学生到达过程服从泊松过程，平均到达率为每小时15名学生。专家解决一名学生问题所需的时间服从指数分布，每位专家平均每小时能解决4个问题。该系统可以建模为一个M/M/s排队系统。假设队列的容量实际上是无限的，计算在队列中等待专家有空的平均学生人数。\n\n将最终答案四舍五入到三位有效数字。", "solution": "我们将该系统建模为一个M/M/s排队模型，其到达率为$\\lambda$，每个服务台的服务率为$\\mu$，服务台数量为$s$。已知$\\lambda=15$人/小时，$\\mu=4$人/小时，以及$s=4$。\n\n系统强度为$\\rho=\\frac{\\lambda}{s\\mu}$，提供的负载为$a=\\frac{\\lambda}{\\mu}$。为保证系统稳定，需要满足$\\rho1$，该条件成立，因为\n$$\n\\rho=\\frac{15}{4\\cdot 4}=\\frac{15}{16}.\n$$\n\n对于一个M/M/s排队模型，系统空闲的概率为\n$$\nP_{0}=\\left[\\sum_{n=0}^{s-1}\\frac{a^{n}}{n!}+\\frac{a^{s}}{s!}\\cdot\\frac{1}{1-\\rho}\\right]^{-1},\n$$\n而爱尔朗C等待概率为\n$$\nP_{\\text{wait}}=\\frac{a^{s}}{s!\\,(1-\\rho)}\\,P_{0}.\n$$\n平均队长（在队列中等待，不包括正在接受服务的）为\n$$\nL_{q}=P_{\\text{wait}}\\cdot\\frac{\\rho}{1-\\rho}.\n$$\n\n使用$a=\\frac{\\lambda}{\\mu}=\\frac{15}{4}$和$s=4$计算各组成部分：\n$$\n\\sum_{n=0}^{3}\\frac{a^{n}}{n!}=1+\\frac{15}{4}+\\frac{\\left(\\frac{15}{4}\\right)^{2}}{2}+\\frac{\\left(\\frac{15}{4}\\right)^{3}}{6}\n=\\frac{2633}{128},\n$$\n$$\n\\frac{a^{4}}{4!}\\cdot\\frac{1}{1-\\rho}=\\frac{\\left(\\frac{15}{4}\\right)^{4}}{24}\\cdot\\frac{1}{1-\\frac{15}{16}}\n=\\frac{50625}{256}\\cdot\\frac{1}{24}\\cdot 16=\\frac{16875}{128}.\n$$\n因此，\n$$\nP_{0}=\\left(\\frac{2633}{128}+\\frac{16875}{128}\\right)^{-1}=\\left(\\frac{19508}{128}\\right)^{-1}=\\left(\\frac{4877}{32}\\right)^{-1}=\\frac{32}{4877}.\n$$\n接着\n$$\nP_{\\text{wait}}=\\frac{\\frac{a^{4}}{4!}}{1-\\rho}\\,P_{0}\n=\\frac{16875}{128}\\cdot\\frac{32}{4877}=\\frac{16875}{19508}.\n$$\n最后，\n$$\nL_{q}=P_{\\text{wait}}\\cdot\\frac{\\rho}{1-\\rho}\n=\\frac{16875}{19508}\\cdot\\frac{\\frac{15}{16}}{\\frac{1}{16}}\n=\\frac{16875}{19508}\\cdot 15=\\frac{253125}{19508}\\approx 12.9754.\n$$\n四舍五入到三位有效数字，得到$13.0$。", "answer": "$$\\boxed{13.0}$$", "id": "1342382"}, {"introduction": "排队系统设计中一个经典的问题是：我们应该使用一个高速服务台，还是多个速度较慢但总容量相同的服务台？这个问题超越了简单的数值计算，引导我们探索不同系统架构的利弊。通过分析系统的“空闲概率” $P_0$，我们可以深入理解资源池化对系统效率的影响。[@problem_id:1342361]", "problem": "一家名为“QuantumLeap AI”的云计算公司管理来自客户的传入数据处理作业。这些作业根据泊松过程到达，平均速率为每小时 $\\lambda$ 个作业。处理单个作业所需的时间呈指数分布。\n\n该公司正在评估两种不同的服务器配置来处理工作负载：\n\n*   **配置 A（单服务器）：** 采用一台高性能服务器。该服务器能以平均每小时 $2\\mu$ 个作业的速率处理作业。\n*   **配置 B（双服务器）：** 采用两台并行运行的标准服务器。每台服务器能以平均每小时 $\\mu$ 个作业的速率处理作业。一个新到达的作业会立即分配给任何可用的服务器。如果两台服务器都繁忙，该作业将进入一个单一的公共队列。\n\n为使任一系统保持稳定，总到达速率必须小于总处理能力，即 $\\lambda  2\\mu$。令系统的整体利用率定义为总到达速率与总服务速率之比，即 $\\rho = \\frac{\\lambda}{2\\mu}$。\n\n计算配置 A 中系统为空（即队列中没有作业且没有作业正在被处理）的概率与配置 B 中系统为空的概率之比。请用含 $\\rho$ 的符号表达式表示你的最终答案。", "solution": "到达是速率为 $\\lambda$ 的泊松过程，服务时间是指数分布的，因此两种配置都是处于稳态的生灭过程。\n\n配置 A 是一个服务速率为 $2\\mu$ 的 $M/M/1$ 队列。对于一个到达速率为 $\\lambda$、服务速率为 $\\mu_{s}$ 的 $M/M/1$ 系统，系统中没有作业的稳态概率为 $P_{0} = 1 - \\lambda/\\mu_{s}$（使用标准的 $M/M/1$ 平稳分布）。当 $\\mu_{s} = 2\\mu$ 且 $\\rho = \\lambda/(2\\mu)$ 时，可得\n$$\nP_{0}^{(A)} = 1 - \\frac{\\lambda}{2\\mu} = 1 - \\rho.\n$$\n\n配置 B 是一个 $M/M/2$ 队列，包含两台服务器，每台的服务速率为 $\\mu$。对于一个有 $c$ 台服务器、到达速率为 $\\lambda$、每台服务器服务速率为 $\\mu$ 的 $M/M/c$ 系统，定义 $\\alpha = \\lambda/\\mu$ 和 $\\rho = \\lambda/(c\\mu)$，系统中没有作业的稳态概率为\n$$\nP_{0} = \\left[\\sum_{n=0}^{c-1}\\frac{\\alpha^{n}}{n!} + \\frac{\\alpha^{c}}{c!}\\cdot\\frac{1}{1 - \\rho}\\right]^{-1}.\n$$\n对于 $c=2$，我们有 $\\alpha = \\lambda/\\mu = 2\\rho$，因此\n$$\nP_{0}^{(B)} = \\left[1 + \\alpha + \\frac{\\alpha^{2}}{2}\\cdot\\frac{1}{1 - \\rho}\\right]^{-1}\n= \\left[1 + 2\\rho + \\frac{4\\rho^{2}}{2}\\cdot\\frac{1}{1 - \\rho}\\right]^{-1}\n= \\left[1 + 2\\rho + \\frac{2\\rho^{2}}{1 - \\rho}\\right]^{-1}.\n$$\n\n所求的比率为\n$$\n\\frac{P_{0}^{(A)}}{P_{0}^{(B)}} = (1 - \\rho)\\left[1 + 2\\rho + \\frac{2\\rho^{2}}{1 - \\rho}\\right]\n= (1 - \\rho)(1 + 2\\rho) + 2\\rho^{2}\n= (1 + 2\\rho - \\rho - 2\\rho^{2}) + 2\\rho^{2}\n= 1 + \\rho.\n$$", "answer": "$$\\boxed{1+\\rho}$$", "id": "1342361"}, {"introduction": "平均等待时间等指标固然重要，但它们无法完全刻画顾客的个体体验。这个更深入的练习将挑战我们对系统概率特性的理解，去计算一个已经需要排队的顾客，其“等待时间”超过其“服务时间”的概率。这种分析对于理解服务质量和系统的不确定性至关重要。[@problem_id:1342360]", "problem": "一个大型数据处理中心作为一个排队系统运行，该系统有 $s$ 个相同的并行服务器。计算任务按照泊松过程到达该中心，平均到达率为 $\\lambda$。每个服务器一次处理一个任务，任何任务的服务时间是一个指数分布的随机变量，其均值为 $1/\\mu$。该系统被建模为 M/M/s 排队，并处于稳定的稳态运行，这要求流量强度 $\\frac{\\lambda}{s\\mu}$ 小于 1。\n\n考虑一个在所有 $s$ 个服务器都繁忙的时刻到达的任务。该任务被放入一个单一的先入先出队列中等待服务。确定该任务在队列中的等待时间严格大于其自身后续服务时间的概率。\n\n请用服务器数量 $s$、平均到达率 $\\lambda$ 和每个服务器的平均服务率 $\\mu$ 的符号表达式给出你的答案。", "solution": "设流量强度为 $\\rho = \\frac{\\lambda}{s\\mu}$，其中 $\\rho  1$。根据 PASTA 原则，一个到达的任务看到的是系统的时间平稳状态。以所有 $s$ 个服务器都繁忙为条件，意味着到达时系统中的任务数 $N$ 满足 $N \\ge s$。记 $q = N - s \\ge 0$ 为在其前面排队的任务数量。\n\n给定 $q$，在被标记任务的整个等待时间内，所有 $s$ 个服务器都保持繁忙（因为至少有 $q$ 个其他排队任务加上被标记的任务），因此服务完成构成一个速率为 $s\\mu$ 的泊松过程。被标记任务在 $q+1$ 次服务完成后开始接受服务。因此，队列中的等待时间\n$$\nW \\mid q \\sim \\text{Erlang}(k=q+1,\\ \\text{rate}=s\\mu),\n$$\n其拉普拉斯变换为\n$$\n\\mathbb{E}\\!\\left[\\exp(-\\theta W)\\mid q\\right] = \\left(\\frac{s\\mu}{s\\mu+\\theta}\\right)^{q+1},\\quad \\theta \\ge 0.\n$$\n该任务自身的服务时间 $S$ 服从速率为 $\\mu$ 的指数分布，且独立于 $W$ 和 $q$。对于任何独立于 $S\\sim \\text{Exp}(\\mu)$ 的非负 $W$，\n$$\n\\mathbb{P}(WS) = \\int_{0}^{\\infty} \\mathbb{P}(Wt)\\,\\mu \\exp(-\\mu t)\\,dt = 1 - \\mathbb{E}\\!\\left[\\exp(-\\mu W)\\right].\n$$\n因此，以 $q$ 为条件，\n$$\n\\mathbb{P}(WS\\mid q) = 1 - \\left(\\frac{s\\mu}{s\\mu+\\mu}\\right)^{q+1} = 1 - \\left(\\frac{s}{s+1}\\right)^{q+1}.\n$$\n\n接下来，我们在所有服务器都繁忙的条件下对 $q$ 求平均。在稳态 M/M/$s$ 分布中，对于 $n \\ge s$，\n$$\n\\mathbb{P}(N=n) = \\mathbb{P}(N=s)\\,\\rho^{\\,n-s},\n$$\n因此以 $N \\ge s$ 为条件得到一个几何分布：\n$$\n\\mathbb{P}(q=k \\mid N \\ge s) = (1-\\rho)\\,\\rho^{k},\\quad k=0,1,2,\\ldots.\n$$\n因此，\n$$\n\\mathbb{P}(WS \\mid N \\ge s)\n= \\sum_{k=0}^{\\infty} \\left[1 - \\left(\\frac{s}{s+1}\\right)^{k+1}\\right](1-\\rho)\\rho^{k}\n= 1 - (1-\\rho)\\sum_{k=0}^{\\infty} \\left(\\frac{s}{s+1}\\right)^{k+1}\\rho^{k}.\n$$\n令 $a = \\frac{s}{s+1}$。该和为几何级数：\n$$\n\\sum_{k=0}^{\\infty} a^{k+1}\\rho^{k} = \\frac{a}{1-a\\rho},\\quad \\text{with } a\\rho = \\frac{s}{s+1}\\cdot\\frac{\\lambda}{s\\mu} = \\frac{\\lambda}{(s+1)\\mu}.\n$$\n因此，\n$$\n\\mathbb{P}(WS \\mid N \\ge s) = 1 - \\frac{(1-\\rho)a}{1-a\\rho}\n= 1 - \\frac{\\left(1-\\frac{\\lambda}{s\\mu}\\right)\\frac{s}{s+1}}{1-\\frac{\\lambda}{(s+1)\\mu}}.\n$$\n化简得，\n$$\n\\frac{\\left(1-\\frac{\\lambda}{s\\mu}\\right)\\frac{s}{s+1}}{1-\\frac{\\lambda}{(s+1)\\mu}}\n= \\frac{\\frac{s}{s+1} - \\frac{\\lambda}{\\mu(s+1)}}{1 - \\frac{\\lambda}{(s+1)\\mu}}\n= \\frac{\\frac{s\\mu - \\lambda}{\\mu(s+1)}}{\\frac{(s+1)\\mu - \\lambda}{(s+1)\\mu}}\n= \\frac{s\\mu - \\lambda}{(s+1)\\mu - \\lambda}.\n$$\n所以，\n$$\n\\mathbb{P}(WS \\mid N \\ge s) = 1 - \\frac{smu - \\lambda}{(s+1)\\mu - \\lambda}\n= \\frac{\\mu}{(s+1)\\mu - \\lambda}.\n$$\n这就是所求的概率。", "answer": "$$\\boxed{\\frac{\\mu}{(s+1)\\mu - \\lambda}}$$", "id": "1342360"}]}
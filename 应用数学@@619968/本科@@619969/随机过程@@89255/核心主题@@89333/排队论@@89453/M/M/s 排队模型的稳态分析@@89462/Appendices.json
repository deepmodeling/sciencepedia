{"hands_on_practices": [{"introduction": "M/M/s 模型是分析多服务台排队系统的强大工具。本练习将通过一个常见的自动化洗车场景，引导你计算顾客的平均排队等待时间 ($W_q$)。这不仅是应用 M/M/s 模型公式的基础实践，更是理解服务系统效率关键指标的第一步。[@problem_id:1334655]", "problem": "自动化洗车设施“SparkleDrive”的管理层正在评估其在周末高峰时段的运营效率。该设施运营着两个相同的并行洗车位。在一个典型的周六，车辆独立到达，遵循泊松过程，平均到达率为每小时24辆车。单个洗车位完成一次完整洗车周期所需的时间服从指数分布，每辆车的平均服务时间为4分钟。当两个洗车位均被占用时到达的车辆，会形成一个单一队列，并按先到先得的原则接受服务。\n\n假设系统已达到稳态，计算一辆车在能够进入其中一个洗车位之前，在队列中等待的平均时间。\n\n你的答案应以分钟为单位，并四舍五入到三位有效数字。", "solution": "将系统建模为服务规则为先到先得的 $M/M/2$ 排队模型。到达过程为泊松过程，到达率 $\\lambda=24$ 辆/小时。每个服务台的服务时间服从指数分布，平均服务时间为 $4$ 分钟 $=\\frac{4}{60}$ 小时，因此每个服务台的服务率为 $\\mu=\\frac{1}{4/60}=15$ 辆/小时。有 $s=2$ 个相同的服务台。\n\n系统强度为 $\\rho=\\frac{\\lambda}{s\\mu}=\\frac{24}{2\\cdot 15}=\\frac{4}{5}<1$，因此稳态存在。定义 $a=\\frac{\\lambda}{\\mu}=\\frac{24}{15}=\\frac{8}{5}$。\n\n对于一个 $M/M/s$ 排队模型，系统为空的稳态概率为\n$$\nP_{0}=\\left[\\sum_{n=0}^{s-1}\\frac{a^{n}}{n!}+\\frac{a^{s}}{s!}\\cdot\\frac{1}{1-\\rho}\\right]^{-1}.\n$$\n当 $s=2$ 时，可得\n$$\n\\sum_{n=0}^{1}\\frac{a^{n}}{n!}=1+a=1+\\frac{8}{5}=\\frac{13}{5},\\quad\n\\frac{a^{2}}{2}\\cdot\\frac{1}{1-\\rho}=\\frac{\\left(\\frac{8}{5}\\right)^{2}}{2}\\cdot\\frac{1}{1-\\frac{4}{5}}=\\frac{\\frac{64}{25}}{2}\\cdot 5=\\frac{32}{25}\\cdot 5=\\frac{32}{5}.\n$$\n因此方括号内的和为 $\\frac{13}{5}+\\frac{32}{5}=\\frac{45}{5}=9$，所以 $P_{0}=\\frac{1}{9}$。\n\n爱尔朗 C (延迟) 概率为\n$$\nP_{\\text{wait}}=\\frac{a^{s}}{s!}\\cdot\\frac{1}{1-\\rho}\\cdot P_{0}=\\frac{\\left(\\frac{8}{5}\\right)^{2}}{2}\\cdot 5\\cdot \\frac{1}{9}=\\frac{32}{45}.\n$$\n在队列中的平均等待时间为\n$$\nW_{q}=P_{\\text{wait}}\\cdot \\frac{1}{s\\mu-\\lambda}.\n$$\n这里 $s\\mu-\\lambda=2\\cdot 15-24=6$ 辆/小时，所以\n$$\nW_{q}=\\frac{32}{45}\\cdot \\frac{1}{6}=\\frac{16}{135}\\ \\text{hours}.\n$$\n转换为分钟可得\n$$\nW_{q}=\\frac{16}{135}\\cdot 60=\\frac{64}{9}\\ \\text{minutes}\\approx 7.111\\ldots\\ \\text{minutes}.\n$$\n四舍五入到三位有效数字，结果是 $7.11$ 分钟。", "answer": "$$\\boxed{7.11}$$", "id": "1334655"}, {"introduction": "排队论不仅用于分析现有系统，更在系统设计中发挥着关键作用。本练习探讨了两种常见的队列配置——“共享队列”与“独立队列”，并要求你比较它们的平均等待时间。通过这个案例，你将亲手证明资源池化 (resource pooling) 在提高服务效率方面的巨大优势，这是排队系统设计中的一个核心思想。[@problem_id:1334632]", "problem": "一家公司正在设计一款新型电动汽车（EV）充电站，该充电站将配备两个相同的快速充电端口。正在考虑两种主要的排队配置方案。\n\n方案A：“混合队列”，为两个充电端口形成一个单一队列。队首的车辆会前往第一个可用的充电端口。\n\n方案B：“专用队列”，充电站被分为两个相同且独立的子站。每个子站有一个充电端口和自己的专用队列。到达的驾驶员必须选择两个队列之一，并且不允许在队列之间切换。\n\n假设车辆根据总速率为 $\\lambda$ 的泊松过程到达充电站。在任一端口为一辆车充电所需的时间服从速率为 $\\mu$ 的指数分布。对于方案B，假设到达的车辆均匀分布在两个队列之间，因此每个专用队列的到达率为 $\\lambda/2$。为使系统稳定，要求 $\\lambda < 2\\mu$。\n\n令 $W_{q,A}$ 为在混合队列配置中一辆车在队列中等待的平均时间，令 $W_{q,B}$ 为在专用队列配置中一辆车在队列中等待的平均时间。\n\n求比率 $\\frac{W_{q,B}}{W_{q,A}}$。请用系统总交通强度 $\\rho = \\frac{\\lambda}{2\\mu}$ 的解析表达式来表示你的答案。", "solution": "设总到达过程为速率是 $\\lambda$ 的泊松过程，每个服务台的服务时间服从速率为 $\\mu$ 的指数分布，并定义系统总交通强度为 $\\rho = \\frac{\\lambda}{2\\mu}$，由于稳定性要求 $\\lambda < 2\\mu$，该强度满足 $\\rho \\in (0,1)$。\n\n方案B（专用队列）由两个独立的 $M/M/1$ 队列组成，每个队列的到达率为 $\\lambda' = \\frac{\\lambda}{2}$，服务率为 $\\mu$。每个队列的利用率为\n$$\n\\rho = \\frac{\\lambda'}{\\mu} = \\frac{\\lambda}{2\\mu}.\n$$\n对于一个 $M/M/1$ 队列，队列中的平均等待数量为 $L_{q} = \\frac{\\rho^{2}}{1 - \\rho}$。根据队列中的利特尔法则， $W_{q,B} = \\frac{L_{q}}{\\lambda'}$，其中 $\\lambda' = \\rho \\mu$，因此\n$$\nW_{q,B} = \\frac{\\rho^{2}}{1 - \\rho} \\cdot \\frac{1}{\\rho \\mu} = \\frac{\\rho}{\\mu(1 - \\rho)}.\n$$\n\n方案A（混合队列）是一个 $M/M/2$ 系统，其总到达率为 $\\lambda$，有两个服务率为 $\\mu$ 的服务台。令 $c=2$ 并定义 $x = \\frac{\\lambda}{\\mu} = 2\\rho$。对于 $M/M/c$ 系统，归一化常数 $p_{0}$ 为\n$$\np_{0} = \\left[\\sum_{n=0}^{c-1} \\frac{x^{n}}{n!} + \\frac{x^{c}}{c!}\\cdot \\frac{1}{1 - \\rho}\\right]^{-1}.\n$$\n对于 $c=2$，这变为\n$$\np_{0} = \\left[1 + x + \\frac{x^{2}}{2}\\cdot \\frac{1}{1 - \\rho}\\right]^{-1}.\n$$\n代入 $x = 2\\rho$ 可得\n$$\np_{0} = \\left[1 + 2\\rho + \\frac{(2\\rho)^{2}}{2}\\cdot \\frac{1}{1 - \\rho}\\right]^{-1}\n= \\left[1 + 2\\rho + \\frac{2\\rho^{2}}{1 - \\rho}\\right]^{-1}.\n$$\n使用公分母 $1 - \\rho$ 合并各项：\n$$\n1 + 2\\rho + \\frac{2\\rho^{2}}{1 - \\rho}\n= \\frac{(1 - \\rho)(1 + 2\\rho) + 2\\rho^{2}}{1 - \\rho}\n= \\frac{1 + \\rho}{1 - \\rho},\n$$\n所以\n$$\np_{0} = \\frac{1 - \\rho}{1 + \\rho}.\n$$\n$M/M/2$ 的爱尔朗C（延迟）概率为\n$$\nP_{\\text{wait}} = \\frac{x^{2}}{2!}\\cdot \\frac{1}{1 - \\rho}\\, p_{0}\n= \\frac{2\\rho^{2}}{1 - \\rho}\\cdot \\frac{1 - \\rho}{1 + \\rho}\n= \\frac{2\\rho^{2}}{1 + \\rho}.\n$$\n对于 $M/M/c$ 系统，队列中的平均等待时间为\n$$\nW_{q,A} = \\frac{P_{\\text{wait}}}{c\\mu - \\lambda} = \\frac{P_{\\text{wait}}}{2\\mu - \\lambda}\n= \\frac{\\frac{2\\rho^{2}}{1 + \\rho}}{2\\mu(1 - \\rho)}\n= \\frac{\\rho^{2}}{\\mu(1 - \\rho^{2})}.\n$$\n\n现在构建比率：\n$$\n\\frac{W_{q,B}}{W_{q,A}} = \\frac{\\frac{\\rho}{\\mu(1 - \\rho)}}{\\frac{\\rho^{2}}{\\mu(1 - \\rho^{2})}}\n= \\frac{\\rho}{1 - \\rho}\\cdot \\frac{1 - \\rho^{2}}{\\rho^{2}}\n= \\frac{\\rho}{1 - \\rho}\\cdot \\frac{(1 - \\rho)(1 + \\rho)}{\\rho^{2}}\n= \\frac{1 + \\rho}{\\rho}.\n$$\n因此，用 $\\rho = \\frac{\\lambda}{2\\mu}$ 表示，所求的比率为 $\\frac{1 + \\rho}{\\rho}$。", "answer": "$$\\boxed{\\frac{1+\\rho}{\\rho}}$$", "id": "1334632"}, {"introduction": "了解系统的平均性能固然重要，但分析其在特定状态下的行为也同样关键，尤其是在高负载时。本练习要求你计算当所有服务器都处于繁忙状态时，系统中任务总数的条件期望值。这有助于我们更深入地理解系统拥塞时的动态特性，为实时监控和资源管理提供理论依据。[@problem_id:1334640]", "problem": "一个云计算提供商运营着一项服务，该服务中，传入的数据处理任务由一个由相同服务器组成的集群处理。该系统可以建模为一个 M/M/s 排队。任务以泊松过程到达，平均速率为每小时 $\\lambda$ 个任务。在任意一台服务器上处理单个任务所需的时间服从指数分布，其均值为 $1/\\mu$ 小时。该集群由 $s$ 台相同的服务器组成。如果一个任务到达时所有服务器都处于繁忙状态，它将进入一个单一的 FIFO (先进先出) 队列，该队列在所有实际应用中均可视为具有无限容量。\n\n已知该系统在稳态下运行，这要求定义为 $\\rho = \\frac{\\lambda}{s\\mu}$ 的流量强度小于 1。一个监控工具被配置为当系统中的任务数量大于或等于 $s$ 时，触发“所有服务器繁忙”警报。\n\n您的任务是，在此“所有服务器繁忙”警报处于激活状态的条件下，计算任意时刻系统中的任务总数（即正在处理的任务数加上在队列中等待的任务数）的期望值。请用参数 $\\lambda$、$\\mu$ 和 $s$ 给定此条件期望的闭式解析表达式。", "solution": "令 $N$ 表示 M/M/$s$ 系统中的稳态任务数。该系统是一个生灭过程，在每个状态下的出生率为 $\\lambda$，在状态 $n$ 下的死亡率为 $\\min\\{n,s\\}\\mu$。其稳态概率 $\\{P_{n}\\}$ 满足标准的 M/M/$s$ 形式：\n$$\nP_{n}=\n\\begin{cases}\n\\dfrac{a^{n}}{n!}P_{0}, & 0 \\leq n \\leq s-1,\\\\[6pt]\n\\dfrac{a^{s}}{s!}\\rho^{\\,n-s}P_{0}, & n \\geq s,\n\\end{cases}\n$$\n其中 $a=\\dfrac{\\lambda}{\\mu}$ 且 $\\rho=\\dfrac{\\lambda}{s\\mu}$，并满足 $\\rho<1$。归一化常数 $P_{0}$ 由下式定义\n$$\nP_{0}^{-1}=\\sum_{k=0}^{s-1}\\frac{a^{k}}{k!}+\\frac{a^{s}}{s!}\\frac{1}{1-\\rho}.\n$$\n\n题目要求计算条件期望 $\\mathbb{E}[N \\mid N\\geq s]$。首先计算尾概率\n$$\n\\mathbb{P}(N\\geq s)=\\sum_{n=s}^{\\infty}P_{n}=\\frac{a^{s}}{s!}P_{0}\\sum_{m=0}^{\\infty}\\rho^{m}=\\frac{a^{s}}{s!}P_{0}\\cdot\\frac{1}{1-\\rho}.\n$$\n因此，对于 $n\\geq s$，\n$$\n\\mathbb{P}(N=n \\mid N\\geq s)=\\frac{P_{n}}{\\mathbb{P}(N\\geq s)}=\\frac{\\left(\\dfrac{a^{s}}{s!}\\rho^{\\,n-s}P_{0}\\right)}{\\left(\\dfrac{a^{s}}{s!}P_{0}\\cdot\\dfrac{1}{1-\\rho}\\right)}=(1-\\rho)\\rho^{\\,n-s}.\n$$\n所以，在 $N\\geq s$ 的条件下，随机变量 $N$ 服从移位几何分布：记 $M := N-s \\in \\{0,1,2,\\dots\\}$，\n$$\n\\mathbb{P}(M=m \\mid N\\geq s)=(1-\\rho)\\rho^{m},\\quad m\\geq 0,\n$$\n从而有\n$$\n\\mathbb{E}[M \\mid N\\geq s]=\\sum_{m=0}^{\\infty}m(1-\\rho)\\rho^{m}=(1-\\rho)\\cdot\\frac{\\rho}{(1-\\rho)^{2}}=\\frac{\\rho}{1-\\rho}.\n$$\n由此可得\n$$\n\\mathbb{E}[N \\mid N\\geq s]=s+\\mathbb{E}[M \\mid N\\geq s]=s+\\frac{\\rho}{1-\\rho}.\n$$\n使用 $\\rho=\\dfrac{\\lambda}{s\\mu}$ 将此表达式用 $\\lambda$、$\\mu$ 和 $s$ 重写，可得\n$$\n\\mathbb{E}[N \\mid N\\geq s]=s+\\frac{\\dfrac{\\lambda}{s\\mu}}{1-\\dfrac{\\lambda}{s\\mu}}=s+\\frac{\\lambda}{s\\mu-\\lambda}.\n$$\n该表达式在稳定性条件 $\\rho<1$（即 $\\lambda<s\\mu$）下有效。", "answer": "$$\\boxed{s+\\frac{\\lambda}{s\\mu-\\lambda}}$$", "id": "1334640"}]}
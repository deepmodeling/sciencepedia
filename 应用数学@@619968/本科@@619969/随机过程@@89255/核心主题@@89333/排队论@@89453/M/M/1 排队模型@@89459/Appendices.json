{"hands_on_practices": [{"introduction": "让我们通过检验对 M/M/1 模型核心指标的概念性理解来开始我们的实践。这个练习 [@problem_id:1341679] 提出了一个场景，其中我们知道系统中顾客总数与正在接受服务的顾客数之间的关系。通过从这一观察结果反向推导，我们可以得出系统的流量强度 $\\rho$，从而加深我们对这些关键性能指标真正含义的理解。", "problem": "考虑一个单服务台服务设施，例如处理数据包的网络路由器，该设施可以建模为一个M/M/1排队系统。在此模型中，顾客（或数据包）的到达遵循泊松过程，服务时间呈指数分布。该系统在稳态下运行。对该系统的分析揭示了其关键性能指标之间的一个特定关系：发现在整个系统中（包括在队列中等待的和正在被服务的）的长期平均顾客数，恰好是当前正在接受服务的长期平均顾客数的四倍。\n\n根据这一观察，确定该系统的业务强度 $\\rho$ 的值。业务强度是一个无量纲的度量，定义为平均到达率与平均服务率之比。", "solution": "设到达率为 $\\lambda$，服务率为 $\\mu$，业务强度为 $\\rho=\\frac{\\lambda}{\\mu}$，且对于稳态有 $0 \\le \\rho  1$。在一个M/M/1排队系统中，系统中的稳态平均顾客数（队列加服务）为\n$$\nL=\\frac{\\rho}{1-\\rho}。\n$$\n服务台可以处于空闲（0个在服务中）或繁忙（1个在服务中）状态。服务中的长期平均顾客数等于服务台繁忙的概率。在稳态下，流量平衡意味着 $\\mu \\times \\text{(繁忙时间的比例)}=\\lambda$，因此繁忙时间的比例为 $\\rho$。由此，服务中的长期平均顾客数为\n$$\nL_{\\text{service}}=\\rho。\n$$\n给定的关系表明 $L=4\\,L_{\\text{service}}$，所以\n$$\n\\frac{\\rho}{1-\\rho}=4\\rho。\n$$\n当 $\\rho0$ 时，两边同除以 $\\rho$ 得到\n$$\n\\frac{1}{1-\\rho}=4 \\quad \\Longrightarrow \\quad 1=4(1-\\rho)\\quad \\Longrightarrow \\quad 4\\rho=3 \\quad \\Longrightarrow \\quad \\rho=\\frac{3}{4}。\n$$\n（注意：$\\rho=0$ 也能平凡地满足该方程，但它对应于退化的无到达情况；非平凡的稳态解是 $\\rho=\\frac{3}{4}$。）此值满足 $\\rho1$，因此是有效的。", "answer": "$$\\boxed{\\frac{3}{4}}$$", "id": "1341679"}, {"introduction": "现在，让我们将知识应用于一个具体的场景。这个实践问题 [@problem_id:1341740] 要求我们分析一个星际港口的对接舱，这是一个经典的排队情形。通过使用给定的到达率和服务率，并应用标准的 M/M/1 公式，我们可以计算出平均排队长度和平均等待时间等具体指标，从而锻炼我们解决实际问题的能力。", "problem": "特米纳斯港是一个新勘定星系中的小型但繁忙的贸易前哨。它拥有一个用于星际货船的自动化对接舱。对交通日志的分析表明，寻求停靠的货船到达过程服从泊松过程，平均到达率为每天5艘船。自动化系统引导船只进入对接舱、完成货物转运并为下一艘船清空对接舱所需的时间服从指数分布，该对接舱平均每天能处理8艘船。\n\n假设该系统已运行足够长的时间以达到稳态，请确定两个值：在轨道上等待使用对接舱的货船的平均数量，以及一艘货船在对接过程开始前在轨道上等待的平均时间。\n\n您应报告平均数量的货船（结果保留三位有效数字），以及以小时为单位的平均等待时间。", "solution": "到达过程服从泊松过程，到达率为 $\\lambda=5$ 艘/天，服务时间服从指数分布，服务率为 $\\mu=8$ 艘/天。这是一个 $M/M/1$ 排队模型。交通强度为 $\\rho=\\frac{\\lambda}{\\mu}=\\frac{5}{8}1$，因此系统存在稳态。\n\n对于一个 $M/M/1$ 排队模型，队列中的平均数量（不包括正在接受服务的那个）为：\n$$\nL_{q}=\\frac{\\rho^{2}}{1-\\rho}=\\frac{\\lambda^{2}}{\\mu(\\mu-\\lambda)}.\n$$\n代入 $\\lambda=5$ 和 $\\mu=8$，\n$$\nL_{q}=\\frac{\\left(\\frac{5}{8}\\right)^{2}}{1-\\frac{5}{8}}=\\frac{\\frac{25}{64}}{\\frac{3}{8}}=\\frac{25}{24}\\approx 1.041666\\ldots,\n$$\n四舍五入到三位有效数字为 $1.04$。\n\n队列中的平均等待时间为：\n$$\nW_{q}=\\frac{L_{q}}{\\lambda}=\\frac{\\rho}{\\mu-\\lambda}.\n$$\n首先以天为时间单位，\n$$\nW_{q}=\\frac{\\frac{25}{24}}{5}=\\frac{25}{120}=\\frac{5}{24}\\text{ 天}.\n$$\n乘以 $24$ 小时/天将其转换为小时，得到\n$$\nW_{q}=\\frac{5}{24}\\times 24=5\\text{ 小时}.\n$$\n因此，平均等待数量为 $1.04$（保留三位有效数字），平均等待时间为 $5$ 小时。", "answer": "$$\\boxed{\\begin{pmatrix}1.04  5\\end{pmatrix}}$$", "id": "1341740"}, {"introduction": "为了深化我们的分析，我们将超越平均值，探索系统的可变性。这最后一个练习 [@problem_id:1341742] 要求我们推导系统中顾客数量的方差。这个实践至关重要，因为它展示了如何直接利用底层的稳态概率分布，不仅理解系统的“平均”行为，还洞察队列的波动性和可预测性。", "problem": "一家网络服务提供商运营一台服务器，用于处理传入的应用程序编程接口（API）请求。这些请求根据泊松过程独立到达，平均速率为每秒 $\\lambda$ 个请求。服务器以先到先得的方式逐一处理请求。处理单个请求所需的时间是一个独立同分布的随机变量，服从平均服务时间为 $1/\\mu$ 秒的指数分布。\n\n系统已长时间运行，并达到了统计平衡状态。仅当服务器处理请求的平均速度快于请求到达的平均速度时，系统才能达到此稳态，这对应于条件 $\\lambda  \\mu$。流量强度是衡量服务器利用率的一个无量纲指标，定义为 $\\rho = \\lambda / \\mu$。\n\n在稳态下，设 $N$ 是代表系统中请求总数（即正在服务的请求加上队列中所有等待的请求）的随机变量。计算 $N$ 的方差。请将答案表示为仅包含流量强度 $\\rho$ 的闭式解析表达式。", "solution": "在 $\\lambda\\mu$ 的稳态条件下，M/M/1 排队系统的队长过程是一个生灭链，其出生率为 $\\lambda$，死亡率为 $\\mu$。平稳概率 $\\pi_{n}=\\Pr\\{N=n\\}$ 的细致平衡方程为\n$$\n\\lambda \\pi_{n}=\\mu \\pi_{n+1} \\quad \\text{for all } n\\geq 0,\n$$\n由此可得递推关系 $\\pi_{n+1}=\\rho\\,\\pi_{n}$，其中 $\\rho=\\lambda/\\mu$。求解该递推关系，可得 $\\pi_{n}=\\pi_{0}\\rho^{n}$。通过归一化，\n$$\n\\sum_{n=0}^{\\infty}\\pi_{n}=\\pi_{0}\\sum_{n=0}^{\\infty}\\rho^{n}=\\pi_{0}\\frac{1}{1-\\rho}=1 \\quad \\text{for } |\\rho|1,\n$$\n可得 $\\pi_{0}=1-\\rho$，因此\n$$\n\\pi_{n}=(1-\\rho)\\rho^{n}, \\quad n=0,1,2,\\ldots.\n$$\n因此，$N$ 服从定义在集合 $\\{0,1,2,\\ldots\\}$ 上、参数为 $1-\\rho$ 的几何分布。\n\n为计算其矩，我们使用当 $|x|1$ 时成立的下列幂级数恒等式：\n$$\n\\sum_{n=0}^{\\infty}x^{n}=\\frac{1}{1-x},\\quad \\sum_{n=0}^{\\infty}n x^{n}=\\frac{x}{(1-x)^{2}},\\quad \\sum_{n=0}^{\\infty}n^{2}x^{n}=\\frac{x(1+x)}{(1-x)^{3}}.\n$$\n于是，\n$$\n\\mathbb{E}[N]=\\sum_{n=0}^{\\infty}n\\,(1-\\rho)\\rho^{n}=(1-\\rho)\\frac{\\rho}{(1-\\rho)^{2}}=\\frac{\\rho}{1-\\rho},\n$$\n以及\n$$\n\\mathbb{E}[N^{2}]=\\sum_{n=0}^{\\infty}n^{2}\\,(1-\\rho)\\rho^{n}=(1-\\rho)\\frac{\\rho(1+\\rho)}{(1-\\rho)^{3}}=\\frac{\\rho(1+\\rho)}{(1-\\rho)^{2}}.\n$$\n因此，方差为\n$$\n\\operatorname{Var}(N)=\\mathbb{E}[N^{2}]-(\\mathbb{E}[N])^{2}=\\frac{\\rho(1+\\rho)}{(1-\\rho)^{2}}-\\frac{\\rho^{2}}{(1-\\rho)^{2}}=\\frac{\\rho}{(1-\\rho)^{2}}.\n$$\n此表达式仅与流量强度 $\\rho$ 有关，并且在 $0\\leq \\rho1$ 的条件下成立。", "answer": "$$\\boxed{\\frac{\\rho}{\\left(1-\\rho\\right)^{2}}}$$", "id": "1341742"}]}
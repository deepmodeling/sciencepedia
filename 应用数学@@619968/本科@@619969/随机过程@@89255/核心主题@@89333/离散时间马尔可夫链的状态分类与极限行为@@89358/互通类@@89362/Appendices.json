{"hands_on_practices": [{"introduction": "我们从一个基础练习开始，这个练习将连通类的抽象概念与图中连通性的直观概念联系起来。通过分析一个在两个独立图组件上的随机游走，你将看到状态空间如何根据哪些状态可以相互到达而自然地划分。这个问题 [@problem_id:1329629] 有助于为你建立一个关于什么是连通类的强大视觉和概念基础。", "problem": "考虑一个由有限无向图 $G$ 上的随机游走定义的离散时间马尔可夫链。图 $G$ 有一个包含六个顶点的集合，标记为 $V = \\{1, 2, 3, 4, 5, 6\\}$。该图的边构成了两个完全分离的3顶点环（三角形）。第一个三角形连接顶点 $\\{1, 2, 3\\}$，第二个三角形连接顶点 $\\{4, 5, 6\\}$。图中没有其他边。\n\n该过程从 $V$ 中的某个顶点开始。在每个时间步，如果游走位于某个顶点，它会移动到其相邻的邻居之一。每个邻居被选择的概率相等。马尔可夫链的状态空间是顶点集合 $V$。\n\n下列哪个选项正确地描述了状态空间 $V$ 分解成的互通类？\n\nA. $\\{\\{1, 2, 3, 4, 5, 6\\}\\}$\n\nB. $\\{\\{1, 2\\}, \\{3, 4\\}, \\{5, 6\\}\\}$\n\nC. $\\{\\{1, 2, 3\\}, \\{4, 5, 6\\}\\}$\n\nD. $\\{\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}, \\{5\\}, \\{6\\}\\}$\n\nE. $\\{\\{1, 4\\}, \\{2, 5\\}, \\{3, 6\\}\\}$", "solution": "问题要求我们确定图上定义的马尔可夫链的互通类。该链的状态空间是顶点集合 $S = V = \\{1, 2, 3, 4, 5, 6\\}$。\n\n首先，我们回顾一下与互通类相关的定义。\n马尔可夫链中的两个状态 $i$ 和 $j$ 被称为互通，记作 $i \\leftrightarrow j$，如果可以在有限步内从状态 $i$ 到达状态 $j$，并且也可以在有限步内从状态 $j$ 到达状态 $i$。\n数学上，$i \\leftrightarrow j$ 当且仅当状态 $j$ 可从状态 $i$ 到达（$i \\to j$），并且状态 $i$ 可从状态 $j$ 到达（$j \\to i$）。\n如果从 $i$ 出发，在某个步数 $n \\ge 0$ 内到达 $j$ 的概率大于零，则称状态 $j$ 可从 $i$ 到达。对于无权图上的随机游走，这等价于存在一条从顶点 $i$ 到顶点 $j$ 的由顶点和边组成的路径。\n\n互通是一种等价关系，这意味着它是自反的（$i \\leftrightarrow i$），对称的（$i \\leftrightarrow j \\implies j \\leftrightarrow i$）和传递的（$i \\leftrightarrow j$ 且 $j \\leftrightarrow k \\implies i \\leftrightarrow k$）。这种关系将状态空间划分为不相交的等价类，这些等价类被称为互通类。\n\n我们来分析图 $G$ 的结构。它由两个不连通的组件构成。\n组件1：一个由顶点 $\\{1, 2, 3\\}$ 组成的三角形。其边为 $(1, 2)$、$(2, 3)$ 和 $(3, 1)$。\n组件2：一个由顶点 $\\{4, 5, 6\\}$ 组成的三角形。其边为 $(4, 5)$、$(5, 6)$ 和 $(6, 4)$。\n在 $\\{1, 2, 3\\}$ 中的任何顶点与 $\\{4, 5, 6\\}$ 中的任何顶点之间没有边相连。\n\n随机游走只能在相邻顶点之间移动。因此，要使状态 $j$ 能从状态 $i$ 到达，图中必须有一条连接顶点 $i$ 和顶点 $j$ 的路径。\n\n我们考虑第一个组件，即顶点 $\\{1, 2, 3\\}$。\n- 状态2是否可从状态1到达（$1 \\to 2$）？是的，因为存在从1到2的边。转移概率 $p_{12} > 0$。\n- 状态1是否可从状态2到达（$2 \\to 1$）？是的，因为存在从2到1的边。转移概率 $p_{21} > 0$。\n由于 $1 \\to 2$ 和 $2 \\to 1$，我们有 $1 \\leftrightarrow 2$。\n- 类似地，对于状态2和3，存在边 $(2, 3)$，所以 $2 \\to 3$ 且 $3 \\to 2$。因此，$2 \\leftrightarrow 3$。\n- 对于状态1和3，存在边 $(1, 3)$，所以 $1 \\to 3$ 且 $3 \\to 1$。因此，$1 \\leftrightarrow 3$。\n根据互通关系的传递性（因为 $1 \\leftrightarrow 2$ 且 $2 \\leftrightarrow 3$，所以 $1 \\leftrightarrow 3$），集合 $\\{1, 2, 3\\}$ 中的所有顶点都相互互通。因此，$\\{1, 2, 3\\}$ 构成一个单独的互通类。\n\n现在，我们考虑第二个组件，即顶点 $\\{4, 5, 6\\}$。\n- 使用与上面相同的逻辑，边 $(4, 5)$、$(5, 6)$ 和 $(6, 4)$ 的存在意味着这个集合内的所有顶点都是相互可达的。\n- $4 \\leftrightarrow 5$，$5 \\leftrightarrow 6$ 和 $6 \\leftrightarrow 4$。\n- 因此，集合 $\\{4, 5, 6\\}$ 中的所有顶点都相互互通，构成另一个单独的互通类。\n\n最后，我们考虑一个来自第一个组件的状态和一个来自第二个组件的状态，例如状态1和状态4。\n- 状态4是否可从状态1到达（$1 \\to 4$）？要让游走从顶点1到顶点4，图中必须有一条连接它们的边路径。根据问题描述，这两个三角形是不相交的，这意味着在集合 $\\{1, 2, 3\\}$ 和集合 $\\{4, 5, 6\\}$ 之间没有边。\n- 因此，从1到4没有路径。从状态1开始，到达状态4的概率为零。所以，$1 \\not\\to 4$。\n- 既然状态4从状态1不可达，那么状态1和4就不互通。同样的逻辑适用于任何顶点对 $(i, j)$，其中 $i \\in \\{1, 2, 3\\}$ 且 $j \\in \\{4, 5, 6\\}$。\n\n总之，状态空间 $S = \\{1, 2, 3, 4, 5, 6\\}$ 被划分为两个互通类：$C_1 = \\{1, 2, 3\\}$ 和 $C_2 = \\{4, 5, 6\\}$。所有互通类的集合是 $\\{\\{1, 2, 3\\}, \\{4, 5, 6\\}\\}$。\n\n将此结果与给定选项进行比较：\nA. $\\{\\{1, 2, 3, 4, 5, 6\\}\\}$ - 错误。这意味着图是连通的。\nB. $\\{\\{1, 2\\}, \\{3, 4\\}, \\{5, 6\\}\\}$ - 错误。\nC. $\\{\\{1, 2, 3\\}, \\{4, 5, 6\\}\\}$ - 正确。\nD. $\\{\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}, \\{5\\}, \\{6\\}\\}$ - 错误。这意味着没有状态与其他任何状态互通，这是错误的。\nE. $\\{\\{1, 4\\}, \\{2, 5\\}, \\{3, 6\\}\\}$ - 错误。这混合了来自两个不连通组件的顶点。", "answer": "$$\\boxed{C}$$", "id": "1329629"}, {"introduction": "从简单的图结构转向由特定操作规则定义的系统，下一个练习将探讨一部电梯的运动。在这里，状态之间的转移能力可能不是对称的，这迫使我们更仔细地应用“连通”的定义。这个练习 [@problem_id:1289775] 的价值在于训练你如何剖析一个系统的转移规则，以揭示其可能不那么直观的潜在类别结构。", "problem": "一部四层楼建筑中的电梯按照一个固定的概率程序运行。系统的状态是电梯当前停留的离散楼层数，状态空间为 $S = \\{1, 2, 3, 4\\}$。电梯下一个停靠点的转移规则定义如下：\n\n- 如果电梯在1楼，它的下一个停靠点总是3楼。\n- 如果电梯在2楼，它以0.5的概率停在1楼，或以0.5的概率停在4楼。\n- 如果电梯在3楼，它的下一个停靠点总是1楼。\n- 如果电梯在4楼，它的下一个停靠点总是2楼。\n\n这个系统可以被建模为一个马尔可夫链，其中状态是楼层数。找出该马尔可夫链的所有互通类。\n\nA. $\\{1, 2, 3, 4\\}$\n\nB. $\\{1, 3\\}$ 和 $\\{2, 4\\}$\n\nC. $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$\n\nD. $\\{1, 2\\}$ 和 $\\{3, 4\\}$\n\nE. $\\{1, 2, 3\\}$ 和 $\\{4\\}$", "solution": "为了找到互通类，我们需要确定状态空间 $S = \\{1, 2, 3, 4\\}$ 中的哪些状态是相互可达的。两个状态 $i$ 和 $j$ 互通（记作 $i \\leftrightarrow j$）是指，既可以从 $i$ 到达 $j$，也可以从 $j$ 到达 $i$。互通类是基于这种相互可达关系划分出的等价类。\n\n让我们根据给定的转移规则来分析状态之间的可达性：\n\n1.  **分析状态1和3：**\n    *   从状态1出发，电梯总是移动到状态3（$1 \\to 3$）。\n    *   从状态3出发，电梯总是移动到状态1（$3 \\to 1$）。\n    *   因为可以从1到3，也可以从3到1，所以状态1和3互通（$1 \\leftrightarrow 3$）。\n    *   从状态1或3出发，电梯永远不会移动到状态2或4。因此，状态1和3不与状态2或4互通。\n    *   这表明 $\\{1, 3\\}$ 形成了一个互通类。这是一个闭集，因为一旦进入，就无法离开。\n\n2.  **分析状态2和4：**\n    *   从状态2出发，电梯可以移动到状态4（$2 \\to 4$）。\n    *   从状态4出发，电梯总是移动到状态2（$4 \\to 2$）。\n    *   因为可以从2到4，也可以从4到2，所以状态2和4互通（$2 \\leftrightarrow 4$）。\n\n3.  **分析不同组之间的关系：**\n    *   我们已经知道 $\\{1, 3\\}$ 是一个独立的类。现在我们需要检查 $\\{2, 4\\}$ 是否与其他状态互通。\n    *   从状态2出发，电梯可以移动到状态1（$2 \\to 1$）。\n    *   但是，正如我们在第1步中发现的，一旦电梯到达状态1，它就永远被困在 $\\{1, 3\\}$ 的循环中，无法返回到状态2或4。因此，状态1无法到达状态2（$1 \\not\\to 2$）。\n    *   由于从1无法返回2，所以状态1和2不互通。\n    *   同理，虽然可以从4到达1（路径为 $4 \\to 2 \\to 1$），但无法从1返回4。所以状态1和4也不互通。\n\n**结论：**\n互通关系是一种等价关系，它将整个状态空间划分为不相交的子集。根据我们的分析：\n- 状态1和3相互互通，且不与任何其他状态互通。\n- 状态2和4相互互通，且不与任何其他状态互通。\n\n因此，该马尔可夫链的状态空间被划分为两个互通类：$\\{1, 3\\}$ 和 $\\{2, 4\\}$。\n\n将此结果与选项进行比较，选项B是正确的。", "answer": "$$\\boxed{B}$$", "id": "1289775"}, {"introduction": "我们的最后一个练习将复杂性提升到一个状态空间巨大的系统，在这种系统中，追踪单个路径是不切实际的。这个问题引入了一种强大的分析技巧：寻找不变量。通过识别一个在所有转移过程中都保持不变的系统属性，你可以巧妙地将整个状态空间划分为其基本的连通类 [@problem_id:714681]。", "problem": "考虑一个由 $N$ 个相互连接的双态组件构成的系统，其中 $N \\ge 2$ 是一个整数。系统的状态由一个二进制向量 $s = (s_1, s_2, \\dots, s_N) \\in \\{0, 1\\}^N$ 描述，其中 $s_i$ 是第 $i$ 个组件的状态。该系统根据一个随机过程以离散时间步进行演化。\n\n在每个时间步，从所有可能的配对中均匀随机地选择一对不同的组件 $\\{i, j\\}$，其中 $1 \\le i < j \\le N$。然后，这两个被选中组件的状态 $s_i$ 和 $s_j$ 被翻转（即 $s_i \\to 1-s_i$ 和 $s_j \\to 1-s_j$）。这个过程在状态空间 $S = \\{0, 1\\}^N$ 上定义了一个时齐马尔可夫链。\n\n马尔可夫链的一个互通类是一个极大状态集，使得对于该集合中的任意两个状态 $u, v$，$v$ 可从 $u$ 到达，且 $u$ 可从 $v$ 到达。\n\n确定该马尔可夫链的互通类总数。", "solution": "为了确定互通类的数量，我们分析转移规则对状态向量的影响。关键在于寻找一个在所有转移下都保持不变的量（不变量）。\n\n1.  **分析单步转移的影响：**\n    一个转移操作包括选择两个不同的索引 $i$ 和 $j$，并翻转对应的比特位 $s_i$ 和 $s_j$。让我们考虑这一操作对状态向量中“1”的总数（即汉明权重）的影响。\n    令 $w(s) = \\sum_{k=1}^N s_k$ 为状态 $s$ 的汉明权重。\n    有三种可能的情况：\n    *   **情况 A：** $s_i=0$ 且 $s_j=0$。翻转后变为 $s'_i=1, s'_j=1$。权重的变化是 $+2$。\n    *   **情况 B：** $s_i=1$ 且 $s_j=1$。翻转后变为 $s'_i=0, s'_j=0$。权重的变化是 $-2$。\n    *   **情况 C：** $s_i=0, s_j=1$ 或 $s_i=1, s_j=0$。翻转后变为 $s'_i=1, s'_j=0$ 或 $s'_i=0, s'_j=1$。权重的变化是 $0$。\n\n2.  **识别不变量：**\n    在所有三种情况下，汉明权重的变化量（$+2, -2, 0$）都是一个偶数。这意味着，一次转移操作不会改变汉明权重的奇偶性。如果一个状态的汉明权重是偶数，那么经过任意次转移后，它到达的所有状态的汉明权重也必须是偶数。同样，如果一个状态的汉明权重是奇数，它将永远停留在汉明权重为奇数的状态集合中。\n    因此，汉明权重的奇偶性（$w(s) \\pmod 2$）是一个不变量。\n\n3.  **划分状态空间：**\n    这个不变量将整个状态空间 $S = \\{0, 1\\}^N$ 划分为两个互不连通的子集：\n    *   $C_{even} = \\{s \\in S \\mid w(s) \\text{ 是偶数}\\}$\n    *   $C_{odd} = \\{s \\in S \\mid w(s) \\text{ 是奇数}\\}$\n    由于无法从 $C_{even}$ 中的状态转移到 $C_{odd}$ 中的状态（反之亦然），所以至少存在两个互通类。\n\n4.  **证明每个子集内部是连通的：**\n    现在我们需要证明 $C_{even}$ 和 $C_{odd}$ 各自构成一个单独的互通类。也就是说，在每个子集内部，任何两个状态都是相互可达的。\n    让我们以 $C_{even}$ 为例。取任意两个状态 $u, v \\in C_{even}$。要证明 $u \\leftrightarrow v$，我们只需证明可以从 $u$ 通过一系列合法的翻转操作到达 $v$（因为操作是可逆的，所以反向路径也存在）。\n    考虑两个状态不同的比特位置集合。状态 $u$ 和 $v$ 不同的比特数等于它们之间的汉明距离 $d_H(u,v)$。有一个已知的关系：$d_H(u,v) \\equiv w(u) - w(v) \\pmod 2$。由于 $u, v$ 的汉明权重都是偶数，它们的差也是偶数，所以 $d_H(u,v)$ 是一个偶数。\n    假设 $u$ 和 $v$ 在 $2k$ 个位置上不同，记这些位置为 $\\{p_1, p_2, \\dots, p_{2k}\\}$。我们可以通过 $k$ 次成对翻转将 $u$ 变换为 $v$：\n    *   第一步：翻转 $(s_{p_1}, s_{p_2})$。\n    *   第二步：翻转 $(s_{p_3}, s_{p_4})$。\n    *   ...\n    *   第 $k$ 步：翻转 $(s_{p_{2k-1}}, s_{p_{2k}})$。\n    每次操作都是一个合法的转移。经过这 $k$ 步之后，状态 $u$ 就变成了状态 $v$。因此，$C_{even}$ 中的任何两个状态都是相互可达的，所以 $C_{even}$ 是一个互通类。\n    完全相同的论证也适用于 $C_{odd}$。\n\n5.  **结论：**\n    状态空间被精确地划分为两个互通类：一个是所有具有偶数个“1”的状态集合，另一个是所有具有奇数个“1”的状态集合。\n    因此，该马尔可夫链总共有2个互通类。", "answer": "$$\\boxed{2}$$", "id": "714681"}]}
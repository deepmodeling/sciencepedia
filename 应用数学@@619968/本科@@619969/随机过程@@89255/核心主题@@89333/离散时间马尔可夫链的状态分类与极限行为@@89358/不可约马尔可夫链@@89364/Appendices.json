{"hands_on_practices": [{"introduction": "理论是马尔可夫链分析的根基，但真正的理解来自于实践。下面的练习将帮助你运用对称性的思想，以一种优雅的方式求解平稳分布。这个问题 [@problem_id:1312387] 描述了一个在环形结构上的随机游走，与其直接构建并求解线性方程组，不如先观察系统的内在对称性，这能为你提供一个更为深刻且快捷的解题思路。", "problem": "一个粒子在一组标记为 $S = \\{0, 1, 2, 3, 4\\}$ 的五个状态上进行随机游走。这些状态排列成一个环。在每个时间步，如果粒子处于状态 $i$，它以概率 $p$ 移动到状态 $(i+1) \\pmod 5$，并以概率 $q = 1-p$ 移动到状态 $(i-1) \\pmod 5$。参数 $p$ 是一个常数，满足 $0 < p < 1$。这个过程在状态空间 $S$ 上定义了一个离散时间马尔可夫链。假设该链拥有唯一的平稳分布 $\\pi = (\\pi_0, \\pi_1, \\pi_2, \\pi_3, \\pi_4)$，这个分布是什么？将你的答案表示为一个行向量。", "solution": "设 $\\pi = (\\pi_0, \\pi_1, \\pi_2, \\pi_3, \\pi_4)$ 是该马尔可夫链的平稳分布。根据定义，平稳分布必须满足方程 $\\pi = \\pi P$，其中 $P$ 是该链的转移概率矩阵。这可以按分量写成：\n$$ \\pi_j = \\sum_{i \\in S} \\pi_i P_{ij} \\quad \\text{for } j \\in S $$\n这里，$P_{ij}$ 是从状态 $i$ 转移到状态 $j$ 的概率。根据问题描述，唯一的非零转移是到相邻状态。对于任何状态 $j$，粒子只能从状态 $(j-1) \\pmod 5$ 或状态 $(j+1) \\pmod 5$ 到达 $j$。\n\n从 $(j-1) \\pmod 5$ 到 $j$ 的转移是正向（顺时针）的一步，因此其概率为 $p$。于是，$P_{(j-1)\\pmod 5, j} = p$。\n从 $(j+1) \\pmod 5$ 到 $j$ 的转移是负向（逆时针）的一步，因此其概率为 $q=1-p$。于是，$P_{(j+1)\\pmod 5, j} = q$。\n\n因此，状态 $j$ 的平衡方程为：\n$$ \\pi_j = \\pi_{(j-1)\\pmod 5} P_{(j-1)\\pmod 5, j} + \\pi_{(j+1)\\pmod 5} P_{(j+1)\\pmod 5, j} $$\n$$ \\pi_j = \\pi_{(j-1)\\pmod 5} \\cdot p + \\pi_{(j+1)\\pmod 5} \\cdot q $$\n这给了我们一个包含五个线性方程的方程组：\n$$ \\pi_0 = p \\cdot \\pi_4 + q \\cdot \\pi_1 $$\n$$ \\pi_1 = p \\cdot \\pi_0 + q \\cdot \\pi_2 $$\n$$ \\pi_2 = p \\cdot \\pi_1 + q \\cdot \\pi_3 $$\n$$ \\pi_3 = p \\cdot \\pi_2 + q \\cdot \\pi_4 $$\n$$ \\pi_4 = p \\cdot \\pi_3 + q \\cdot \\pi_0 $$\n除了这五个方程，所有概率之和必须为一：\n$$ \\sum_{i=0}^{4} \\pi_i = \\pi_0 + \\pi_1 + \\pi_2 + \\pi_3 + \\pi_4 = 1 $$\n虽然这个方程组可以通过代数方法求解，但通过对称性论证可以得到一个更优雅的解法。状态空间的结构和转移规则是旋转对称的。从任何状态 $i$ 观察到的动力学行为与从任何其他状态 $j$ 观察到的动力学行为是相同的，除了状态的重新标记。例如，从状态 0 转移到状态 1 ($p$) 和 4 ($q$) 的概率与从状态 1 转移到状态 2 ($p$) 和 0 ($q$) 的概率相同，依此类推。过程的这种对称性意味着，长期来看，处于任何特定状态的概率对于所有状态都必须是相同的。\n因此，在平稳分布中，我们必须有：\n$$ \\pi_0 = \\pi_1 = \\pi_2 = \\pi_3 = \\pi_4 $$\n让我们将这个共同的概率表示为 $c$。因此，对于所有 $i \\in \\{0, 1, 2, 3, 4\\}$，都有 $\\pi_i = c$。\n使用所有概率之和必须为 1 的归一化条件：\n$$ \\pi_0 + \\pi_1 + \\pi_2 + \\pi_3 + \\pi_4 = c + c + c + c + c = 5c = 1 $$\n解出 $c$，我们得到 $c = \\frac{1}{5}$。\n因此，所提出的平稳分布是 $\\pi = (\\frac{1}{5}, \\frac{1}{5}, \\frac{1}{5}, \\frac{1}{5}, \\frac{1}{5})$。\n\n我们可以通过将此解代入任意状态 $j$ 的一般平衡方程来验证：\n$$ \\pi_j = p \\cdot \\pi_{(j-1)\\pmod 5} + q \\cdot \\pi_{(j+1)\\pmod 5} $$\n将所有 $i$ 的 $\\pi_i = 1/5$ 代入：\n$$ \\frac{1}{5} \\stackrel{?}{=} p \\cdot \\frac{1}{5} + q \\cdot \\frac{1}{5} $$\n$$ \\frac{1}{5} \\stackrel{?}{=} \\frac{1}{5} (p + q) $$\n根据定义，$q = 1-p$，所以 $p+q = p + (1-p) = 1$。\n$$ \\frac{1}{5} = \\frac{1}{5} \\cdot 1 $$\n方程成立。由于这个验证对任何状态 $j$ 都有效，所以均匀分布确实是正确的平稳分布。值得注意的是，最终的分布与偏置参数 $p$ 无关。问题陈述保证了平稳分布的存在性和唯一性，这与有限、不可约马尔可夫链的性质是一致的（只要 $0 < p < 1$，不可约性就得到保证）。", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{1}{5} & \\frac{1}{5} & \\frac{1}{5} & \\frac{1}{5} & \\frac{1}{5} \\end{pmatrix}}$$", "id": "1312387"}, {"introduction": "除了长期的平均行为，不可约马尔可夫链的另一个关键特性是其状态的周期性。这个练习 [@problem_id:1312357] 通过一个确定性的巡逻机器人模型，让你直接计算一个状态的周期。通过确定机器人返回某一区域所有可能的时间步长，你可以应用周期的定义——返回时间集合的最大公约数——来加深对这一重要概念的理解。", "problem": "一个安保机器人被编程用于巡逻三个不同的区域：区域 A、区域 B 和区域 C。机器人的移动是确定性的，并以离散的时间步进行。其日程安排如下：\n- 如果它在时间步 $t$ 位于区域 A，那么在时间步 $t+1$ 它将位于区域 B。\n- 如果它在时间步 $t$ 位于区域 B，那么在时间步 $t+1$ 它将位于区域 C。\n- 如果它在时间步 $t$ 位于区域 C，那么在时间步 $t+1$ 它将位于区域 A。\n机器人不能停留在同一区域，也不能移动到协议规定之外的任何其他区域。\n\n假设机器人在时间 $t=0$ 时从区域 A 出发。设集合 $\\mathcal{T}$ 包含所有机器人回到区域 A 的时间步 $t > 0$。求集合 $\\mathcal{T}$ 中所有整数的最大公约数。", "solution": "将此运动建模为区域集合上的一个循环排列。定义一个映射 $f$ 为 $f(A)=B$，$f(B)=C$，以及 $f(C)=A$。那么机器人在时间 $t$ 的位置是 $f^{t}(A)$，其中 $f^{t}$ 表示 $f$ 的 $t$ 次复合。\n\n计算连续迭代的结果：\n$$\nf^{1}(A)=B,\\quad f^{2}(A)=C,\\quad f^{3}(A)=A.\n$$\n因此 $f$ 是一个3-循环，其阶为3，所以\n$$\nf^{t+3}(A)=f^{t}(A)\\quad\\text{for all integers }t\\geq 0.\n$$\n因此，机器人回到区域 A 当且仅当 $3$ 整除 $t$。于是\n$$\n\\mathcal{T}=\\{t\\in \\mathbb{Z}_{>0}: 3\\mid t\\}=\\{3k: k\\in \\mathbb{Z}_{>0}\\}.\n$$\n$\\mathcal{T}$ 中的所有元素都是 $3$ 的倍数，所以 $3$ 是一个公约数。如果 $d$ 是 $\\mathcal{T}$ 中所有元素的任意一个公约数，那么 $d$ 必定也整除 $\\mathcal{T}$ 中的最小正元素 $3$，因此 $d\\mid 3$。因此，最大公约数是\n$$\n\\gcd(\\mathcal{T})=\\gcd(3,6,9,\\dots)=3.\n$$", "answer": "$$\\boxed{3}$$", "id": "1312357"}, {"introduction": "将理论应用于实际场景是检验学习成果的最佳方式。这个练习 [@problem_id:1312364] 模拟了一个数据中心服务器的三种工作状态，要求你计算其长期处于“运行”状态的概率。你需要从问题描述中提炼出转移概率矩阵，并求解平稳分布方程 $\\pi = \\pi P$，这是分析任何马尔可夫链模型的必备核心技能。", "problem": "数据中心的一台专用服务器在一个离散时间模型下运行，其状态在每个小时结束时进行评估。该服务器可能处于以下三种状态之一：运行中（正积极处理任务）、待机（空闲但准备好接收任务）或故障（已崩溃并等待修复）。\n\n根据大量的日志数据，确定了以下的一小时转移概率：\n- 如果服务器处于运行中状态，它有 0.2 的概率转移到待机状态（任务完成），有 0.1 的概率转移到故障状态（硬件/软件错误）。\n- 如果服务器处于待机状态，它有 0.6 的概率变为运行中状态（分配了新任务），有 0.1 的概率转移到故障状态（例如，电源故障）。\n- 如果服务器处于故障状态，它有 0.8 的概率在一小时内被修复并返回到待机状态。故障服务器修复后不可能直接变为运行中状态；它必须首先经过待机状态。\n\n任何未指定的转移都意味着服务器在该小时内保持其当前状态。假设服务器连续运行了很长一段时间，那么它处于运行中状态的时间在长期来看占多大比例？将您的答案表示为保留三位有效数字的小数。", "solution": "将服务器建模为一个离散时间、有限状态的马尔可夫链，其状态为运行中 ($O$)、待机 ($S$) 和故障 ($F$)。根据“未指定的转移意味着保持当前状态”的规则，一步转移概率如下：\n- 从 $O$ 出发：$P_{OO}=1-0.2-0.1=0.7$, $P_{OS}=0.2$, $P_{OF}=0.1$。\n- 从 $S$ 出发：$P_{SO}=0.6$, $P_{SS}=1-0.6-0.1=0.3$, $P_{SF}=0.1$。\n- 从 $F$ 出发：$P_{FS}=0.8$, $P_{FF}=1-0.8=0.2$, $P_{FO}=0$。\n\n按状态顺序 $(O,S,F)$，转移矩阵为\n$$\nP=\\begin{pmatrix}\n0.7 & 0.2 & 0.1\\\\\n0.6 & 0.3 & 0.1\\\\\n0 & 0.8 & 0.2\n\\end{pmatrix}.\n$$\n设平稳分布为 $\\pi=(\\pi_{O},\\pi_{S},\\pi_{F})$，满足 $\\pi=\\pi P$ 和 $\\pi_{O}+\\pi_{S}+\\pi_{F}=1$。平衡方程为\n$$\n\\pi_{O}=0.7\\pi_{O}+0.6\\pi_{S}+0\\cdot\\pi_{F},\\quad\n\\pi_{S}=0.2\\pi_{O}+0.3\\pi_{S}+0.8\\pi_{F},\\quad\n\\pi_{F}=0.1\\pi_{O}+0.1\\pi_{S}+0.2\\pi_{F}.\n$$\n由第一个方程可得，\n$$\n\\pi_{O}-0.7\\pi_{O}-0.6\\pi_{S}=0\\;\\Rightarrow\\;0.3\\pi_{O}=0.6\\pi_{S}\\;\\Rightarrow\\;\\pi_{O}=2\\pi_{S}.\n$$\n由第三个方程可得，\n$$\n\\pi_{F}-0.2\\pi_{F}=0.1\\pi_{O}+0.1\\pi_{S}\\;\\Rightarrow\\;0.8\\pi_{F}=0.1(\\pi_{O}+\\pi_{S})\\;\\Rightarrow\\;\\pi_{F}=\\frac{1}{8}(\\pi_{O}+\\pi_{S}).\n$$\n将 $\\pi_{O}=2\\pi_{S}$ 代入可得\n$$\n\\pi_{F}=\\frac{1}{8}(2\\pi_{S}+\\pi_{S})=\\frac{3}{8}\\pi_{S}.\n$$\n使用归一化条件 $\\pi_{O}+\\pi_{S}+\\pi_{F}=1$：\n$$\n2\\pi_{S}+\\pi_{S}+\\frac{3}{8}\\pi_{S}=1\\;\\Rightarrow\\;3\\pi_{S}+\\frac{3}{8}\\pi_{S}=\\frac{27}{8}\\pi_{S}=1\\;\\Rightarrow\\;\\pi_{S}=\\frac{8}{27}.\n$$\n则\n$$\n\\pi_{O}=2\\pi_{S}=\\frac{16}{27},\\qquad \\pi_{F}=\\frac{3}{8}\\pi_{S}=\\frac{1}{9}.\n$$\n因此，长期来看处于运行中状态的时间比例是 $\\pi_{O}=\\frac{16}{27}\\approx 0.59259\\ldots$，保留三位有效数字为 $0.593$。", "answer": "$$\\boxed{0.593}$$", "id": "1312364"}]}
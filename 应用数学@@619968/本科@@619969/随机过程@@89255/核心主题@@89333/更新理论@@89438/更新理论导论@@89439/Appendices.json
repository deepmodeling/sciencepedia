{"hands_on_practices": [{"introduction": "更新过程的核心思想之一是理解重复事件的长期频率。这个练习通过一个交通信号灯的简化模型，让我们实践基本更新定理。通过计算一个完整周期的平均时长，我们可以直接确定绿灯信号启动的长期平均速率，这是理解更新过程长期行为的基石。[@problem_id:1367478]", "problem": "考虑一个控制单一交叉路口的先进交通信号灯系统。信号灯以绿、黄、红三个阶段循环。绿灯阶段的持续时间是一个固定常数$t_g$，黄灯阶段的持续时间是一个固定常数$t_y$。\n\n为改善交通流量，红灯阶段的持续时间是自适应的。黄灯结束后，系统会等待横向交通出现合适的间隙后，再切换到绿灯。这段等待时间构成了红灯阶段的持续时间，它是一个随机变量。我们把连续红灯阶段的持续时间（对于$k=1, 2, 3, \\ldots$记为$X_k$）建模为独立同分布的随机变量。每个$X_k$服从平均持续时间为$\\tau_r$的指数分布。\n\n设过程在$t=0$时刻随第一次绿灯亮起而开始。之后绿灯相继亮起的时刻序列构成一个更新过程。更新函数$m(t)$给出了在时间间隔$(0, t]$内已发生的更新（即绿灯亮起）的期望次数。\n\n确定绿灯亮起的长期平均速率。换言之，求极限$\\lim_{t\\to\\infty} \\frac{m(t)}{t}$。请用包含$t_g$、$t_y$和$\\tau_r$的符号表达式表示你的答案。", "solution": "将连续绿灯阶段的开始时刻定义为更新时刻序列。设$Y_{k}$表示第$k$次和第$(k+1)$次绿灯亮起之间的更新间隔时间。根据问题描述，每个周期由一个固定的绿灯持续时间$t_{g}$、一个固定的黄灯持续时间$t_{y}$和一个随机的红灯持续时间$X_{k}$组成，其中$\\{X_{k}\\}_{k\\geq 1}$是独立同分布的，服从均值为$\\tau_{r}$的指数分布。因此，\n$$\nY_{k}=t_{g}+t_{y}+X_{k}.\n$$\n因为$X_{k}$是独立同分布的，且$t_{g},t_{y}$是常数，所以$Y_{k}$也是独立同分布的。平均更新间隔时间为\n$$\n\\mu=\\mathbb{E}[Y_{k}]=\\mathbb{E}[t_{g}+t_{y}+X_{k}]=t_{g}+t_{y}+\\mathbb{E}[X_{k}]=t_{g}+t_{y}+\\tau_{r}.\n$$\n设$m(t)$为更新函数，即在$(0,t]$内更新（绿灯亮起）的期望次数。根据基本更新定理，对于一个更新间隔时间独立同分布且具有有限均值$\\mu$的更新过程，其长期更新速率存在，并由下式给出\n$$\n\\lim_{t\\to\\infty}\\frac{m(t)}{t}=\\frac{1}{\\mu}.\n$$\n代入$\\mu=t_{g}+t_{y}+\\tau_{r}$可得\n$$\n\\lim_{t\\to\\infty}\\frac{m(t)}{t}=\\frac{1}{t_{g}+t_{y}+\\tau_{r}}.\n$$", "answer": "$$\\boxed{\\frac{1}{t_{g}+t_{y}+\\tau_{r}}}$$", "id": "1367478"}, {"introduction": "在许多现实世界的系统中，我们不仅关心事件发生的频率，还关心与每个事件周期相关的成本或收益。此练习将我们的分析从单纯的事件频率扩展到经济效益，引入了更新回报定理来计算单位时间的长期平均成本。通过分析服务器的故障与重启周期，我们学会了如何将理论应用于实际的系统维护和成本管理问题中。[@problem_id:1310784]", "problem": "一台专用服务器管理着一个大规模分布式数据库。该服务器的主处理单元容易发生瞬时故障。故障发生后，系统会自动启动重启序列以恢复正常运行。\n\n从一次重启完成到下一次瞬时故障发生之间的时间 $T$ 是一个随机变量。这些时间间隔是独立同分布的，服从区间 $[T_{min}, T_{max}]$ 上的连续均匀分布。\n\n每个重启序列需要固定的时间 $\\tau_{reboot}$，在此期间服务器处于离线和非生产状态。启动重启会产生固定的计算和能源成本 $C_{reboot}$。此外，在重启期间服务器离线时，会产生相关的停机成本，该成本以每单位时间 $C_{down}$ 的恒定速率累积。\n\n假设系统运行时间很长，请确定每单位时间的长期平均成本。你的答案应该是一个用参数 $T_{min}, T_{max}, \\tau_{reboot}, C_{reboot}$ 和 $C_{down}$ 表示的闭式解析表达式。", "solution": "我们将一个更新周期定义为从一次重启完成开始，到下一次重启完成结束。一个周期由两部分组成：服务器正常运行时间和重启时间。设 $T$ 表示从一次重启完成到下一次故障发生之间的正常运行时间。已知 $T \\sim \\text{Uniform}[T_{min}, T_{max}]$。重启持续时间是一个常量 $\\tau_{reboot}$。因此，一个完整周期的长度为 $L = T + \\tau_{reboot}$。\n\n每个周期产生的成本包括两个部分：\n1.  固定的重启启动成本 $C_{reboot}$。\n2.  重启期间累积的停机成本。该成本以每单位时间 $C_{down}$ 的速率累积 $\\tau_{reboot}$ 时间，总额为 $C_{down} \\cdot \\tau_{reboot}$。\n\n因此，每个周期的总成本为 $C_{cycle} = C_{reboot} + C_{down} \\cdot \\tau_{reboot}$。这是一个常数。\n\n根据更新回报定理，每单位时间的长期平均成本等于每个周期的期望成本除以期望周期长度：\n$$\n\\text{长期平均成本率} \\;=\\; \\frac{\\mathbb{E}[\\text{单周期成本}]}{\\mathbb{E}[\\text{周期长度}]} \\;=\\; \\frac{\\mathbb{E}[C_{reboot} + C_{down}\\,\\tau_{reboot}]}{\\mathbb{E}[T + \\tau_{reboot}]} \\;=\\; \\frac{C_{reboot} + C_{down}\\,\\tau_{reboot}}{\\mathbb{E}[T] + \\tau_{reboot}}.\n$$\n我们只需要计算 $\\mathbb{E}[T]$。由于 $T$ 服从 $[T_{min}, T_{max}]$ 上的均匀分布，其概率密度函数为\n$$\nf_{T}(t) \\;=\\; \\frac{1}{T_{max} - T_{min}} \\quad \\text{对于 } t \\in [T_{min}, T_{max}],\n$$\n在其他情况下 $f_{T}(t) = 0$。因此，$T$ 的期望值为\n$$\n\\mathbb{E}[T] \\;=\\; \\int_{T_{min}}^{T_{max}} t \\, f_{T}(t) \\, dt \\;=\\; \\int_{T_{min}}^{T_{max}} t \\cdot \\frac{1}{T_{max} - T_{min}} \\, dt \\;=\\; \\frac{1}{T_{max} - T_{min}} \\left[ \\frac{t^2}{2} \\right]_{T_{min}}^{T_{max}} \\;=\\; \\frac{1}{T_{max} - T_{min}} \\cdot \\frac{T_{max}^{2} - T_{min}^{2}}{2} \\;=\\; \\frac{T_{min} + T_{max}}{2}.\n$$\n将此结果代入长期平均成本率的公式中，可得\n$$\n\\text{长期平均成本率} \\;=\\; \\frac{C_{reboot} + C_{down}\\,\\tau_{reboot}}{\\frac{T_{min} + T_{max}}{2} + \\tau_{reboot}}.\n$$\n这就是所求的每单位时间的长期平均成本的闭式解析表达式。", "answer": "$$\\boxed{\\frac{C_{reboot} + C_{down}\\,\\tau_{reboot}}{\\tau_{reboot} + \\frac{T_{min} + T_{max}}{2}}}$$", "id": "1310784"}, {"introduction": "虽然我们经常关注长期平均值，但在某些特殊情况下，我们可以推导出在任意时间 $n$ 内发生事件的期望次数 $m(n)$ 的精确表达式。这个练习探讨了当事件间隔时间服从几何分布时的离散时间更新过程。你会发现，由于几何分布的“无记忆性”，更新函数 $m(n)$ 的形式异常简洁，这深刻揭示了无记忆性在随机过程建模中的独特作用。[@problem_id:1367484]", "problem": "考虑一个社交媒体平台用户活动的简化模型。时间以离散的天数计量，索引为 $t=1, 2, 3, \\ldots$。在此模型中，一个“更新事件”对应于用户发布一个新帖子。\n\n连续发帖之间的时间间隔，用随机变量 $X_1, X_2, X_3, \\ldots$ 表示，被假定为独立同分布。每个帖间时间 $X_i$ 服从几何分布，其概率质量函数由下式给出：\n$$P(X=k) = p(1-p)^{k-1} \\quad \\text{for } k=1, 2, 3, \\ldots$$\n此处，$p$ 是一个常数，表示自上一次发帖以来，在没有任何发帖的情况下，每日发帖的概率。$p$ 的取值范围是 $0 < p \\le 1$。\n\n第一次发帖的时间是 $S_1 = X_1$，第二次发帖的时间是 $S_2 = X_1 + X_2$，通常第 $j$ 次发帖的时间是 $S_j = \\sum_{i=1}^{j} X_i$。\n\n设 $N(n)$ 为从第1天到第 $n$ 天（含）的时间区间内发布的帖子总数。更新函数 $m(n)$ 定义为到第 $n$ 天为止的期望发帖数，即 $m(n) = E[N(n)]$。\n\n求出更新函数 $m(n)$ 关于整数 $n$ 和概率 $p$ 的简单闭式表达式。", "solution": "问题要求解更新函数 $m(n) = E[N(n)]$，其中 $N(n)$ 是到时间 $n$ 为止的总发帖数（更新数）。\n\n我们可以将总更新数 $N(n)$ 表示为指示变量的和。设 $I_k$ 为一个指示变量，当时间 $k$ 发生更新时，$I_k=1$；否则 $I_k=0$。那么，到时间 $n$ 为止的总更新数由下式给出：\n$$N(n) = \\sum_{k=1}^{n} I_k$$\n根据期望的线性性，更新函数 $m(n)$ 可写为：\n$$m(n) = E[N(n)] = E\\left[\\sum_{k=1}^{n} I_k\\right] = \\sum_{k=1}^{n} E[I_k]$$\n指示变量的期望是它所指示事件的概率。令 $u_k = E[I_k] = P(\\text{在时间 } k \\text{ 发生一次更新})$。那么更新函数就是这些更新概率的和：\n$$m(n) = \\sum_{k=1}^{n} u_k$$\n为了求得 $m(n)$，我们首先需要确定在任意时间 $k \\ge 1$ 的更新概率 $u_k$。\n\n在时间 $k$ 发生更新，意味着要么第一次更新发生在时间 $k$，要么在某个更早的时间 $j < k$ 发生了更新，且下一个更新间隔恰好是 $k-j$。这个关系可以用关于概率 $u_k$ 的离散更新方程来表示。设 $f_k = P(X=k)$ 为更新间隔时间的概率质量函数。该方程为：\n$$u_k = f_k + \\sum_{j=1}^{k-1} u_j f_{k-j}$$\n在我们的问题中，更新间隔时间服从几何分布，其中 $f_k = p(1-p)^{k-1}$ (对于 $k \\ge 1$）。我们可以计算 $u_k$ 的前几个值来寻找规律。\n\n对于 $k=1$：\n$$u_1 = f_1 = p(1-p)^{1-1} = p$$\n对于 $k=2$：\n$$u_2 = f_2 + u_1 f_1 = p(1-p) + (p)(p) = p - p^2 + p^2 = p$$\n对于 $k=3$：\n$$u_3 = f_3 + u_1 f_2 + u_2 f_1 = p(1-p)^2 + (p)(p(1-p)) + (p)(p) = p(1-2p+p^2) + p^2 - p^3 + p^2 = p - 2p^2 + p^3 + 2p^2 - p^3 = p$$\n这个规律表明，对于所有 $k \\ge 1$，$u_k=p$。我们可以通过数学归纳法证明这一点。假设对于所有 $j < k$，$u_j = p$。更新方程中关于 $u_k$ 的右侧变为：\n$$f_k + \\sum_{j=1}^{k-1} p \\cdot f_{k-j} = p(1-p)^{k-1} + p \\sum_{j=1}^{k-1} p(1-p)^{k-j-1}$$\n我们来分析求和项。设求和索引为 $i = k-j$。当 $j$ 从 $1$ 取到 $k-1$ 时，$i$ 从 $k-1$ 降到 $1$。\n$$\\sum_{j=1}^{k-1} p(1-p)^{k-j-1} = \\sum_{i=1}^{k-1} p(1-p)^{i-1} = p \\sum_{i=0}^{k-2} (1-p)^{i}$$\n这个和是一个有限几何级数，首项 $a=1$，公比 $r=1-p$，共有 $k-1$ 项。其和为 $\\frac{a(1-r^{k-1})}{1-r}$。\n$$p \\sum_{i=0}^{k-2} (1-p)^{i} = p \\cdot \\frac{1 - (1-p)^{k-1}}{1 - (1-p)} = p \\cdot \\frac{1 - (1-p)^{k-1}}{p} = 1 - (1-p)^{k-1}$$\n将此结果代回到 $u_k$ 的表达式中：\n$$u_k = p(1-p)^{k-1} + p \\left( 1 - (1-p)^{k-1} \\right)$$\n$$u_k = p(1-p)^{k-1} + p - p(1-p)^{k-1}$$\n$$u_k = p$$\n因此，我们证明了对于所有 $k \\ge 1$，更新概率 $u_k$ 是一个常数，恒等于 $p$。这个显著的结果是几何分布无记忆性的推论。在任何时间点，发生更新的概率与自上次更新以来所经过的时间无关，这个概率就是 $p$。\n\n现在我们可以计算更新函数 $m(n)$：\n$$m(n) = \\sum_{k=1}^{n} u_k = \\sum_{k=1}^{n} p$$\n由于 $p$ 是一个常数，这个求和很简单：\n$$m(n) = np$$\n所以，到第 $n$ 天为止的期望发帖数就是 $n$ 与每日发帖概率 $p$ 的乘积。", "answer": "$$\\boxed{np}$$", "id": "1367484"}]}
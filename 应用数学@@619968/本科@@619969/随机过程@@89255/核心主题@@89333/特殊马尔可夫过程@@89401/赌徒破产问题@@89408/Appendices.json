{"hands_on_practices": [{"introduction": "我们实践的第一步是推导赌徒破产问题中最重要的一个量：最终破产的概率。这个练习将引导你处理最一般的情形，即游戏可能是不公平的 ($p \\neq q$)。通过建立一个递归关系并求解它，你将掌握分析这类随机过程的核心方法，并得出一个在金融风险评估到种群动态等多个领域都有广泛应用的公式。[@problem_id:7899]", "problem": "考虑一个简化的博弈游戏，称为赌徒破产问题。一个赌徒开始时拥有 $i$ 个整数单位的初始财富。赌徒与庄家进行一系列的博弈。在每一轮中，赌徒下注一个单位。他们以恒定的概率 $p$ 赢得一个单位，以概率 $q=1-p$ 输掉一个单位。\n\n赌徒有一个预设的目标：达到总财富 $N$ 个单位，其中 $N  i  0$。如果赌徒的财富达到 $N$（成功）或降至 $0$（破产），游戏结束。设 $P_i$ 表示在初始财富为 $i$ 个单位的情况下，赌徒最终破产的概率。\n\n假设每轮获胜的概率不等于失败的概率（即 $p \\neq q$），推导破产概率 $P_i$ 的通用表达式，该表达式是初始财富 $i$、目标财富 $N$、获胜概率 $p$ 和失败概率 $q$ 的函数。", "solution": "我们用 $P_i$ 表示从财富 $i$ 开始最终破产的概率，其中 $P_0=1$ 和 $P_N=0$。在一步中，赌徒以概率 $p$ 移动到 $i+1$，以概率 $q=1-p$ 移动到 $i-1$，因此递推关系为\n$$\nP_i \\;=\\; p\\,P_{i+1} \\;+\\; q\\,P_{i-1},\\qquad i=1,2,\\dots,N-1.\n$$\n重新整理为齐次形式：\n$$\np\\,P_{i+1}-P_i+q\\,P_{i-1}=0.\n$$\n假设一个形式为 $P_i=r^i$ 的解。其特征方程为\n$$\np\\,r^2 - r + q = 0,\n$$\n其根为 $r=1$ 和 $r=\\frac{q}{p}$。因此，通解为\n$$\nP_i \\;=\\; A + B\\Bigl(\\tfrac{q}{p}\\Bigr)^{i}.\n$$\n应用边界条件：\n\n$$\nP_0=A+B=1,\n\\qquad\nP_N=A+B\\Bigl(\\tfrac{q}{p}\\Bigr)^{N}=0.\n$$\n\n两式相减得到\n$$\nB\\Bigl(1-\\bigl(\\tfrac{q}{p}\\bigr)^N\\Bigr)=1\n\\;\\Longrightarrow\\;\nB=\\frac{1}{1-(q/p)^N},\n\\quad\nA=1-B=\\frac{-\\,(q/p)^N}{1-(q/p)^N}.\n$$\n因此\n$$\nP_i\n=\\;A + B\\Bigl(\\tfrac{q}{p}\\Bigr)^i\n=\\frac{(q/p)^i - (q/p)^N}{1 - (q/p)^N}.\n$$", "answer": "$$\\boxed{\\frac{\\bigl(\\tfrac{q}{p}\\bigr)^{i}-\\bigl(\\tfrac{q}{p}\\bigr)^{N}}{1-\\bigl(\\tfrac{q}{p}\\bigr)^{N}}}$$", "id": "7899"}, {"introduction": "在知道了破产的概率之后，另一个自然而然的问题是：“这场游戏预期会持续多久？” 这个练习将聚焦于公平游戏 ($p = 1/2$) 的特殊情况，来计算游戏结束前的预期游戏次数。你将看到，通过求解一个非齐次差分方程，我们可以得出一个形式优美且直观的答案，这不仅加深了你对随机过程时间维度的理解，也锻炼了求解递归关系的重要数学技巧。[@problem_id:7857]", "problem": "一个赌徒的初始资本为 $i$ 个整数单位的钱。赌徒进行一系列赌局。目标是使总资本达到 $N$ 单位，其中 $N  i  0$。如果赌徒的资本达到 $N$（获胜）或 $0$（破产），则赌局结束。\n\n在每局中，抛掷一枚均匀硬币。如果硬币正面朝上，赌徒赢得 $1$ 单位；如果背面朝上，赌徒输掉 $1$ 单位。设 $p$ 为赢得一局的概率，$q$ 为输掉一局的概率。对于均匀硬币，有 $p = q = \\frac{1}{2}$。\n\n设 $E_i$ 表示在赌徒初始资本为 $i$ 的情况下，直到赌局结束（无论是因破产还是达到目标资本 $N$），所进行的期望局数。\n\n对于 $0  i  N$，通过考虑下一局的结果，期望局数 $E_i$ 可以与从相邻状态开始的期望局数建立关系。一局赌局之后（总局数增加 1），赌徒的资本以概率 $p$ 变为 $i+1$，或以概率 $q$ 变为 $i-1$。因此，从这个新状态开始的期望*额外*局数分别为 $E_{i+1}$ 或 $E_{i-1}$。这导出了以下递推关系：\n$$E_i = 1 + p E_{i+1} + q E_{i-1}$$\n如果赌徒的资本为 $0$ 或 $N$，赌局已经结束，所以不再进行任何赌局。因此，边界条件为 $E_0 = 0$ 和 $E_N = 0$。\n\n请针对均匀硬币的情况，推导出用初始资本 $i$ 和目标资本 $N$ 表示 $E_i$ 的表达式。", "solution": "对于 $0iN$，我们从一步公平赌局中得到递推关系：\n$$E_i = 1 + \\tfrac12 E_{i+1} + \\tfrac12 E_{i-1}.$$\n两边乘以 2：\n$$2E_i = 2 + E_{i+1} + E_{i-1}\n\\quad\\Longrightarrow\\quad\nE_{i+1}-2E_i+E_{i-1} = -2.$$\n齐次解是\n$$E_i^{(h)} = A + Bi.$$\n一个形如 $Ci^2$ 的特解代入方程，可得 $C((i+1)^2 - 2i^2 + (i-1)^2) = -2$。化简得 $2C=-2$，即 $C=-1$。\n因此，通解为\n$$E_i = A + Bi - i^2.$$\n应用边界条件 $E_0=0$ 和 $E_N=0$：\n$$E_0 = A = 0,\\qquad E_N = BN - N^2 = 0\\;\\Rightarrow\\;B=N.$$\n因此\n$$E_i = N i - i^2 = i\\,(N - i).$$", "answer": "$$\\boxed{i(N - i)}$$", "id": "7857"}, {"introduction": "理论的价值在于应用。这个练习将赌徒破产模型置于一个更具现实感的商业竞争场景中：两家初创公司争夺市场生存。通过分别计算在“中性”市场（公平游戏）和“挑战性”市场（不公平游戏）中运营的公司的破产概率，你将能够量化分析一个微小的不利因素 ($p  1/2$) 会如何显著增加失败的风险。这个问题旨在检验你综合运用前述知识解决实际问题的能力。[@problem_id:1398204]", "problem": "两家相互竞争的科技初创公司 Alpha 和 Beta 正在寻求融资。这个过程可以被建模为一系列离散的回合。在每一回合中，一家初创公司的资本要么增加要么减少一个固定金额 $\\Delta C = \\$100,000$。两家公司都以 $C_0 = \\$200,000$ 的初始资本开始，并旨在达到 $C_f = \\$1,000,000$ 的目标融资金额。如果一家初创公司的资本降至零，它就被视为破产并退出市场。\n\n初创公司 Alpha 在一个“中性”市场环境中运营，在任何给定回合中其资本增加 $\\Delta C$ 的概率为 $p_A = 1/2$。然而，初创公司 Beta 面临一个更具“挑战性”的市场，在该市场中，其资本在一回合中增加 $\\Delta C$ 的概率仅为 $p_B = 1/3$。\n\n计算初创公司 Beta 的破产概率与初创公司 Alpha 的破产概率之比。将您的答案表示为最简精确分数形式。", "solution": "设一回合中资本变化量为 $\\Delta C$。定义步长为 $s=\\Delta C$ 并以 $s$ 为单位来度量资本。则吸收壁位于 $0$ 和 $N$ 处，其中\n$$\nN=\\frac{C_{f}}{s}=\\frac{1{,}000{,}000}{100{,}000}=10,\n$$\n且初始状态为\n$$\ni=\\frac{C_{0}}{s}=\\frac{200{,}000}{100{,}000}=2.\n$$\n\n对于一个在 $0$ 和 $N$ 处有吸收态的一维随机游走，设 $u_{i}$ 为从状态 $i$ 出发最终破产（在到达 $N$ 之前到达 $0$）的概率。其标准差分方程为\n$$\nu_{i}=q\\,u_{i-1}+p\\,u_{i+1}, \\quad 1\\leq i\\leq N-1,\n$$\n边界条件为 $u_{0}=1$ 和 $u_{N}=0$，其中 $p$ 是向上移动一步的概率，$q=1-p$ 是向下移动一步的概率。\n\n初创公司 Alpha（中性市场）有 $p_{A}=\\frac{1}{2}$ 和 $q_{A}=\\frac{1}{2}$。差分方程变为\n$$\nu_{i}=\\frac{1}{2}u_{i-1}+\\frac{1}{2}u_{i+1},\n$$\n整理后可得 $u_{i+1}-2u_{i}+u_{i-1}=0$。其通解是线性的，$u_{i}=A+Bi$。应用 $u_{0}=1$ 得到 $A=1$，应用 $u_{N}=0$ 得到 $1+BN=0$，因此 $B=-\\frac{1}{N}$。所以，\n$$\nu_{i}^{(A)}=1-\\frac{i}{N}.\n$$\n代入 $i=2$ 和 $N=10$，\n$$\nu_{2}^{(A)}=1-\\frac{2}{10}=\\frac{8}{10}=\\frac{4}{5}.\n$$\n\n初创公司 Beta（挑战性市场）有 $p_{B}=\\frac{1}{3}$ 和 $q_{B}=\\frac{2}{3}$。其差分方程为\n$$\nu_{i}=q_{B}\\,u_{i-1}+p_{B}\\,u_{i+1},\n$$\n等价于 $p_{B}u_{i+1}-u_{i}+q_{B}u_{i-1}=0$。寻求 $u_{i}=r^{i}$ 形式的解，可得到特征方程\n$$\np_{B}r^{2}-r+q_{B}=0.\n$$\n其根为 $r=1$ 和 $r=\\frac{q_{B}}{p_{B}}$。因此通解为\n$$\nu_{i}=A+B\\left(\\frac{q_{B}}{p_{B}}\\right)^{i}.\n$$\n应用 $u_{0}=1$ 和 $u_{N}=0$：\n$$\nA+B=1,\\quad A+B\\left(\\frac{q_{B}}{p_{B}}\\right)^{N}=0.\n$$\n求解 $A,B$ 可得\n$$\nu_{i}^{(B)}=\\frac{\\left(\\frac{q_{B}}{p_{B}}\\right)^{i}-\\left(\\frac{q_{B}}{p_{B}}\\right)^{N}}{1-\\left(\\frac{q_{B}}{p_{B}}\\right)^{N}}.\n$$\n当 $p_{B}=\\frac{1}{3}$，$q_{B}=\\frac{2}{3}$ 时，我们有 $\\frac{q_{B}}{p_{B}}=2$，所以对于 $i=2$，$N=10$，\n$$\nu_{2}^{(B)}=\\frac{2^{2}-2^{10}}{1-2^{10}}=\\frac{4-1024}{1-1024}=\\frac{1020}{1023}=\\frac{340}{341}.\n$$\n\n所求的破产概率之比为\n$$\n\\frac{u_{2}^{(B)}}{u_{2}^{(A)}}=\\frac{\\frac{340}{341}}{\\frac{4}{5}}=\\frac{340}{341}\\cdot\\frac{5}{4}=\\frac{1700}{1364}=\\frac{425}{341}.\n$$", "answer": "$$\\boxed{\\frac{425}{341}}$$", "id": "1398204"}]}
{"hands_on_practices": [{"introduction": "让我们从一个经典场景开始我们的动手实践：优惠券收集者问题。通过分析随时间收集到的独特物品数量，我们可以直接应用鞅和下鞅的定义。这个练习将帮助你理解“漂移”的概念，以及为什么一些看似“公平”的过程会系统性地趋于增加。[@problem_id:1310304]", "problem": "考虑一个瓮，其中包含$N$个球，球上标有从$1$到$N$的唯一编号，其中$N \\ge 2$。我们从这个瓮中进行一系列的抽取。在每个离散时间步$n = 1, 2, 3, \\dots$，我们抽取一个球，记录其编号，然后将其放回瓮中。令$X_n$为在第$n$步抽到的球上的编号。抽样序列$\\{X_n\\}_{n \\ge 1}$由独立同分布的随机变量组成，每个球的编号被抽到的概率为$1/N$。\n\n令$C_n$为表示在前$n$次抽取中观察到的不同球编号数量的随机变量。即，$C_n = |\\{X_1, X_2, \\dots, X_n\\}|$。我们定义$C_0 = 0$。令$\\mathcal{F}_n = \\sigma(X_1, \\dots, X_n)$（对于$n \\ge 1$）是由抽样序列生成的自然信息流，其中$\\mathcal{F}_0 = \\{\\emptyset, \\Omega\\}$是平凡$\\sigma$-代数。\n\n下列哪个陈述正确地描述了随机过程$\\{C_n\\}_{n \\ge 0}$关于信息流$\\{\\mathcal{F}_n\\}_{n \\ge 0}$的性质？\n\nA. $\\{C_n\\}_{n \\ge 0}$是一个鞅。\n\nB. $\\{C_n\\}_{n \\ge 0}$是一个下鞅，但不是鞅。\n\nC. $\\{C_n\\}_{n \\ge 0}$是一个上鞅，但不是鞅。\n\nD. 该过程既不是鞅，也不是下鞅，也不是上鞅。", "solution": "我们首先验证$\\{C_{n}\\}_{n \\ge 0}$是关于$\\{\\mathcal{F}_{n}\\}_{n \\ge 0}$的适应过程和可积过程。对每个$n$，$C_{n}$是$(X_{1},\\dots,X_{n})$的可测函数，因此是$\\mathcal{F}_{n}$-可测的。此外，几乎必然地有$0 \\le C_{n} \\le N$，所以$C_{n}$是可积的。\n\n定义指示变量\n$$\nI_{n+1}=\\mathbf{1}\\{X_{n+1} \\notin \\{X_{1},\\dots,X_{n}\\}\\}。\n$$\n根据定义，在$n+1$次抽取后，不同值的数量增加$1$，当且仅当第$(n+1)$次抽到的值是之前未见过的新值。因此，\n$$\nC_{n+1}=C_{n}+I_{n+1}。\n$$\n以$\\mathcal{F}_{n}$为条件。令$S_{n}=\\{X_{1},\\dots,X_{n}\\}$表示到时间$n$为止观察到的值的集合，因此$|S_{n}|=C_{n}$。因为$X_{n+1}$独立于$\\mathcal{F}_{n}$且在$\\{1,\\dots,N\\}$上均匀分布，所以$X_{n+1}$是新值的条件概率是尚未出现的值所占的比例：\n$$\n\\mathbb{P}(I_{n+1}=1 \\mid \\mathcal{F}_{n})=\\mathbb{P}(X_{n+1}\\notin S_{n} \\mid \\mathcal{F}_{n})=\\frac{N-C_{n}}{N}。\n$$\n取条件期望，得到\n$$\n\\mathbb{E}[C_{n+1}\\mid \\mathcal{F}_{n}]\n=\\mathbb{E}[C_{n}+I_{n+1}\\mid \\mathcal{F}_{n}]\n=C_{n}+\\mathbb{E}[I_{n+1}\\mid \\mathcal{F}_{n}]\n=C_{n}+\\frac{N-C_{n}}{N}\n=1+\\left(1-\\frac{1}{N}\\right)C_{n}。\n$$\n因此，\n$$\n\\mathbb{E}[C_{n+1}\\mid \\mathcal{F}_{n}]-C_{n}=\\frac{N-C_{n}}{N}\\ge 0，\n$$\n等号成立当且仅当$C_{n}=N$。所以，$\\{C_{n}\\}$是一个下鞅。它不是一个鞅，因为在事件$\\{C_{n}<N\\}$（对于有限的$n$，该事件的概率为正）上，有\n$$\n\\mathbb{E}[C_{n+1}\\mid \\mathcal{F}_{n}]>C_{n}。\n$$\n它不是一个上鞅，因为几乎必然地有$\\mathbb{E}[C_{n+1}\\mid \\mathcal{F}_{n}]\\ge C_{n}$，且在$\\{C_{n}<N\\}$上为严格不等式。\n\n因此，正确的选项是$\\{C_{n}\\}_{n \\ge 0}$是一个下鞅但不是鞅。", "answer": "$$\\boxed{B}$$", "id": "1310304"}, {"introduction": "并非所有随机过程都是鞅，但许多过程可以被转化为鞅。这个练习通过要求你找到一个“补偿”过程来使一个有偏的游戏变得公平，从而引入了强大的杜布分解思想。这个练习对于理解如何从一个随机过程中分离出可预测的漂移和随机波动至关重要。[@problem_id:1310309]", "problem": "一位赌徒的初始财富为 $W_0 > 0$。在每个离散时间步 $n=1, 2, 3, \\dots$，该赌徒进行一场基于投掷一枚均匀六面骰子的游戏。设 $W_{n-1}$ 表示该赌徒在第 $n$ 次投掷前的财富。游戏规则如下：\n\n- 如果骰子点数为1或2（概率为 $1/3$），赌徒的财富减半，因此其新财富为 $W_n = \\frac{1}{2}W_{n-1}$。\n- 如果骰子点数为3、4、5或6（概率为 $2/3$），赌徒的财富增加一个比例 $\\alpha = 1/2$，因此其新财富为 $W_n = (1 + 1/2)W_{n-1} = \\frac{3}{2}W_{n-1}$。\n\n设 $(\\mathcal{F}_n)_{n \\geq 0}$ 是由骰子投掷序列生成的自然信息流，其中 $\\mathcal{F}_0$ 是平凡σ-代数。财富过程 $(W_n)_{n \\geq 0}$ 关于此信息流不是一个鞅。\n\n你的任务是找到唯一一个“补偿”过程 $(A_n)_{n \\geq 0}$，该过程在特定意义上使得整个游戏变得公平。找到一个可预测过程 $A_n$，满足 $A_0=0$，使得由 $M_n = W_n - A_n$ 定义的新过程是关于信息流 $(\\mathcal{F}_n)_{n \\geq 0}$ 的一个鞅。如果对于每个 $n \\geq 1$，$A_n$ 的值在时间 $n-1$ 时是已知的（即 $A_n$ 是 $\\mathcal{F}_{n-1}$-可测的），则称过程 $(A_n)$ 是可预测的。\n\n请给出 $A_n$ 对于 $n \\geq 1$ 的闭式表达式。你的答案应该用财富过程的历史，即 $W_0, W_1, \\dots, W_{n-1}$ 来表示。", "solution": "题目要求我们找到一个可预测过程 $A_n$ 且满足 $A_0=0$，使得 $M_n = W_n - A_n$ 是关于信息流 $(\\mathcal{F}_n)_{n \\geq 0}$ 的一个鞅。\n\n根据鞅的定义，对于所有 $n \\geq 1$，过程 $M_n$ 必须满足 $E[M_n | \\mathcal{F}_{n-1}] = M_{n-1}$。\n\n让我们将 $M_n$ 的定义代入此方程：\n$$\nE[W_n - A_n | \\mathcal{F}_{n-1}] = W_{n-1} - A_{n-1}\n$$\n\n利用条件期望的线性性质，我们可以将左边的项分开：\n$$\nE[W_n | \\mathcal{F}_{n-1}] - E[A_n | \\mathcal{F}_{n-1}] = W_{n-1} - A_{n-1}\n$$\n\n过程 $A_n$ 被定义为是可预测的。这意味着对于任何 $n \\ge 1$，$A_n$ 都是 $\\mathcal{F}_{n-1}$-可测的。一个相对于某个σ-代数可测的变量，在对该σ-代数取条件期望时可被视为常数。因此，$E[A_n | \\mathcal{F}_{n-1}] = A_n$。\n\n将此结果代回我们的方程，我们得到：\n$$\nE[W_n | \\mathcal{F}_{n-1}] - A_n = W_{n-1} - A_{n-1}\n$$\n\n我们可以重新整理这个方程，以找到 $A_n$ 的一个递推关系：\n$$\nA_n - A_{n-1} = E[W_n | \\mathcal{F}_{n-1}] - W_{n-1}\n$$\n\n现在，我们需要计算 $E[W_n | \\mathcal{F}_{n-1}]$。时刻 $n$ 的财富 $W_n$ 取决于时刻 $n-1$ 的财富 $W_{n-1}$ 以及第 $n$ 次投掷骰子的结果。在时刻 $n-1$，$W_{n-1}$ 的值是已知的，因此它是 $\\mathcal{F}_{n-1}$-可测的，可以从条件期望中提出来。\n\n设 $X_n$ 为第 $n$ 次投掷骰子的结果。过程 $W_n$ 可以写成 $W_n = W_{n-1} \\cdot f(X_n)$，其中 $f(X_n)$ 是乘法因子。\n当 $X_n \\in \\{1, 2\\}$ 时，因子 $f(X_n)$ 为 $\\frac{1}{2}$；当 $X_n \\in \\{3, 4, 5, 6\\}$ 时，为 $\\frac{3}{2}$。\n\n所以，我们有：\n$$\nE[W_n | \\mathcal{F}_{n-1}] = E[W_{n-1} \\cdot f(X_n) | \\mathcal{F}_{n-1}] = W_{n-1} E[f(X_n) | \\mathcal{F}_{n-1}]\n$$\n\n由于每次投掷骰子是独立的，第 $n$ 次投掷的结果 $X_n$ 与过去的投掷 $(X_1, \\dots, X_{n-1})$ 相互独立，因此也与信息流 $\\mathcal{F}_{n-1}$ 独立。所以，$f(X_n)$ 的条件期望就是它的无条件期望：\n$$\nE[f(X_n) | \\mathcal{F}_{n-1}] = E[f(X_n)]\n$$\n\n我们可以利用各种结果的概率来计算 $E[f(X_n)]$：\n$$\nE[f(X_n)] = P(X_n \\in \\{1, 2\\}) \\cdot \\left(\\frac{1}{2}\\right) + P(X_n \\in \\{3, 4, 5, 6\\}) \\cdot \\left(\\frac{3}{2}\\right)\n$$\n$$\nE[f(X_n)] = \\left(\\frac{2}{6}\\right) \\cdot \\left(\\frac{1}{2}\\right) + \\left(\\frac{4}{6}\\right) \\cdot \\left(\\frac{3}{2}\\right) = \\left(\\frac{1}{3}\\right) \\cdot \\left(\\frac{1}{2}\\right) + \\left(\\frac{2}{3}\\right) \\cdot \\left(\\frac{3}{2}\\right)\n$$\n$$\nE[f(X_n)] = \\frac{1}{6} + 1 = \\frac{7}{6}\n$$\n\n所以，$W_n$ 的条件期望是：\n$$\nE[W_n | \\mathcal{F}_{n-1}] = W_{n-1} \\cdot \\frac{7}{6}\n$$\n（这证实了 $W_n$ 是一个下鞅，因为 $E[W_n | \\mathcal{F}_{n-1}] > W_{n-1}$。)\n\n现在我们将此结果代回到 $A_n$ 的递推关系中：\n$$\nA_n - A_{n-1} = \\frac{7}{6}W_{n-1} - W_{n-1} = \\frac{1}{6}W_{n-1}\n$$\n\n这就得到了过程 $A_n$ 的增量。为了求得 $A_n$ 本身，我们可以将其写成从 $A_0$ 开始的其增量之和。\n$$\nA_n = A_0 + \\sum_{k=1}^{n} (A_k - A_{k-1})\n$$\n\n给定条件为 $A_0=0$。代入增量的表达式：\n$$\nA_n = 0 + \\sum_{k=1}^{n} \\left(\\frac{1}{6}W_{k-1}\\right)\n$$\n\n这个和式可以通过改变求和指标来重写。令 $j=k-1$。当 $k=1$ 时，$j=0$。当 $k=n$ 时，$j=n-1$。\n$$\nA_n = \\frac{1}{6} \\sum_{j=0}^{n-1} W_j\n$$\n按照惯例，将哑指标 $j$ 替换回 $k$，得到补偿过程的最终表达式：\n$$\nA_n = \\frac{1}{6} \\sum_{k=0}^{n-1} W_k\n$$\n$A_n$ 的这个表达式只依赖于 $W_0, W_1, \\ldots, W_{n-1}$，而这些在时间 $n-1$ 时都是已知的，从而证实了 $A_n$ 是一个可预测过程。", "answer": "$$\\boxed{\\frac{1}{6}\\sum_{k=0}^{n-1} W_k}$$", "id": "1310309"}, {"introduction": "鞅不仅限于简单的位置或财富过程，它们可以由随机过程更复杂的函数构造而成。在这个练习中，你将通过添加一个精心选择的补偿项，探索如何从简单随机游走的多项式中创建一个鞅。这项实践提升了你在处理条件期望时的代数技巧，并揭示了鞅与随机积分之间更深层次的联系。[@problem_id:1310328]", "problem": "考虑一个在整数上的简单对称随机游走 $\\{S_n\\}_{n \\ge 0}$。该游走从 $S_0 = 0$ 开始，并根据 $S_n = \\sum_{i=1}^{n} Y_i$（对于 $n \\ge 1$）演变，其中 $\\{Y_i\\}_{i \\ge 1}$ 是一个独立同分布的随机变量序列，其概率分布为 $P(Y_i = 1) = P(Y_i = -1) = 1/2$。\n\n令 $\\mathcal{F}_n = \\sigma(Y_1, \\dots, Y_n)$ 为表示直至时间 $n$ 的游走历史的自然信息流。一个随机过程 $\\{X_n\\}_{n \\ge 0}$ 是关于此信息流的鞅，如果它适应于 $\\mathcal{F}_n$，对所有 $n$ 都有 $E[|X_n|] < \\infty$，并且满足条件 $E[X_{n+1} | \\mathcal{F}_n] = X_n$。\n\n现在，考虑一个由 $M_n = S_n^3 - a n S_n$ 定义的新过程 $\\{M_n\\}_{n \\ge 0}$，其中 $a$ 是一个实常数。确定常数 $a$ 的具体值，使得 $\\{M_n\\}$ 成为关于信息流 $\\{\\mathcal{F}_n\\}$ 的鞅。", "solution": "我们寻求常数 $a$ 使得 $M_{n} = S_{n}^{3} - a n S_{n}$ 是关于 $\\{\\mathcal{F}_{n}\\}$ 的一个鞅。鞅条件要求对所有 $n$ 均有 $E[M_{n+1} \\mid \\mathcal{F}_{n}] = M_{n}$。由于 $S_{n+1} = S_{n} + Y_{n+1}$，其中 $Y_{n+1}$ 独立于 $\\mathcal{F}_{n}$，均值为零，并且对称地满足 $P(Y_{n+1}=1)=P(Y_{n+1}=-1)=\\frac{1}{2}$，我们使用以下事实：\n- $E[Y_{n+1} \\mid \\mathcal{F}_{n}] = 0$，\n- $E[Y_{n+1}^{2} \\mid \\mathcal{F}_{n}] = 1$，\n- $E[Y_{n+1}^{3} \\mid \\mathcal{F}_{n}] = 0$，\n并且 $S_{n}$ 是 $\\mathcal{F}_{n}$-可测的。\n\n计算条件期望：\n$$\nM_{n+1} = S_{n+1}^{3} - a (n+1) S_{n+1} = (S_{n} + Y_{n+1})^{3} - a (n+1) (S_{n} + Y_{n+1}).\n$$\n使用二项式定理展开立方项：\n$$\n(S_{n} + Y_{n+1})^{3} = S_{n}^{3} + 3 S_{n}^{2} Y_{n+1} + 3 S_{n} Y_{n+1}^{2} + Y_{n+1}^{3}.\n$$\n逐项取关于 $\\mathcal{F}_{n}$ 的条件期望，利用独立性和上面列出的矩：\n$$\nE[S_{n+1}^{3} \\mid \\mathcal{F}_{n}] = S_{n}^{3} + 3 S_{n}^{2} E[Y_{n+1} \\mid \\mathcal{F}_{n}] + 3 S_{n} E[Y_{n+1}^{2} \\mid \\mathcal{F}_{n}] + E[Y_{n+1}^{3} \\mid \\mathcal{F}_{n}] = S_{n}^{3} + 3 S_{n}.\n$$\n此外，\n$$\nE[S_{n+1} \\mid \\mathcal{F}_{n}] = E[S_{n} + Y_{n+1} \\mid \\mathcal{F}_{n}] = S_{n} + E[Y_{n+1} \\mid \\mathcal{F}_{n}] = S_{n}.\n$$\n因此，\n$$\nE[M_{n+1} \\mid \\mathcal{F}_{n}] = E[S_{n+1}^{3} \\mid \\mathcal{F}_{n}] - a (n+1) E[S_{n+1} \\mid \\mathcal{F}_{n}] = (S_{n}^{3} + 3 S_{n}) - a (n+1) S_{n}.\n$$\n对于鞅条件，将其设为等于 $M_{n} = S_{n}^{3} - a n S_{n}$：\n$$\nS_{n}^{3} + 3 S_{n} - a (n+1) S_{n} = S_{n}^{3} - a n S_{n}.\n$$\n消去 $S_{n}^{3}$ 并重新整理：\n$$\n3 S_{n} - a (n+1) S_{n} = - a n S_{n}.\n$$\n两边同时加上 $a (n+1) S_{n}$：\n$$\n3 S_{n} = a S_{n}.\n$$\n该恒等式必须对 $S_{n}$ 以正概率取到的所有值都成立，因此它迫使\n$$\na = 3.\n$$\n该过程是适应的，因为 $M_{n}$ 是 $S_{n}$ 的函数；并且是可积的，因为 $|S_{n}| \\leq n$ 意味着 $|S_{n}^{3}| \\leq n^{3}$ 和 $|n S_{n}| \\leq n^{2}$，这保证了 $E[|M_{n}|] < \\infty$。所以，当 $a=3$ 时，$\\{M_{n}\\}$ 是一个鞅。", "answer": "$$\\boxed{3}$$", "id": "1310328"}]}
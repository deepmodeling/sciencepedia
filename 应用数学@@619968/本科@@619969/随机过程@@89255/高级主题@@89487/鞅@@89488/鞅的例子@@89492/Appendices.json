{"hands_on_practices": [{"introduction": "随机游走是一个基础概念，但其位置的平方 $S_n^2$ 会随时间系统性地增长，产生一种漂移。第一个练习将挑战你量化这种漂移，并引入一个确定性的“补偿”项，从而将一个有偏的过程转变为一个真正的鞅 [@problem_id:1299933]。掌握这种“补偿过程”的技术是构建公平模型（尤其是在量化金融中）的基石。", "problem": "一位量化分析师正在为一种投机性资产开发一个简单模型。该模型假设资产价格从零开始，即 $S_0 = 0$。在每一天 $i$ 结束时，价格会变动一个量 $X_i$。第 $n$ 天结束时的总价格由这些每日变动量的总和给出，$S_n = \\sum_{i=1}^{n} X_i$。每日变动量 $X_1, X_2, \\ldots$ 是独立同分布的随机变量。市场被假设是无偏的，意味着每日变动的期望值为零，$E[X_i] = 0$。每日波动率是恒定的，每日变动的方差为 $\\text{Var}(X_i) = \\sigma^2$，其中 $\\sigma^2$ 是一个正常数。\n\n该分析师考虑一种衍生工具，其在第 $n$ 天结束时的价值由 $V_n = S_n^2 - cn$ 给出，其中 $c$ 是一笔恒定的每日费用。分析师希望设定费用 $c$，使该工具成为一个“公平博弈”。公平博弈的定义是：给定截至今天（包括今天）的所有信息，该工具明天的期望值等于其今天的价值。在数学上，这个条件表示为 $E[V_{n+1} \\mid S_0, S_1, \\dots, S_n] = V_n$，对所有 $n \\ge 0$ 成立。\n\n确定使该工具成为公平博弈的恒定费用 $c$ 的值。用给定的参数表示你的答案。", "solution": "问题要求解出常数 $c$ 的值，使得过程 $V_n = S_n^2 - cn$ 满足“公平博弈”条件 $E[V_{n+1} \\mid S_0, S_1, \\dots, S_n] = V_n$。设在时间 $n$ 可用的信息，即历史 $(S_0, S_1, \\dots, S_n)$，用 $\\mathcal{F}_n$ 表示。该条件可写为 $E[V_{n+1} \\mid \\mathcal{F}_n] = V_n$。\n\n我们首先用时间 $n$ 的量和新的随机变动量 $X_{n+1}$ 来表示 $V_{n+1}$。\n根据定义，$V_{n+1} = S_{n+1}^2 - c(n+1)$。\n在时间 $n+1$ 的价格是 $S_{n+1} = S_n + X_{n+1}$。\n将此代入 $V_{n+1}$ 的表达式中：\n$$V_{n+1} = (S_n + X_{n+1})^2 - c(n+1)$$\n展开平方项：\n$$V_{n+1} = S_n^2 + 2S_n X_{n+1} + X_{n+1}^2 - c(n+1)$$\n\n现在，我们对 $V_{n+1}$ 取关于信息 $\\mathcal{F}_n$ 的条件期望：\n$$E[V_{n+1} \\mid \\mathcal{F}_n] = E[S_n^2 + 2S_n X_{n+1} + X_{n+1}^2 - c(n+1) \\mid \\mathcal{F}_n]$$\n\n利用条件期望的线性性质，我们可以将其分解为几个项：\n$$E[V_{n+1} \\mid \\mathcal{F}_n] = E[S_n^2 \\mid \\mathcal{F}_n] + E[2S_n X_{n+1} \\mid \\mathcal{F}_n] + E[X_{n+1}^2 \\mid \\mathcal{F}_n] - E[c(n+1) \\mid \\mathcal{F}_n]$$\n\n让我们逐项计算：\n1.  $S_n$ 在时间 $n$ 是已知的，因此它是 $\\mathcal{F}_n$-可测的。这意味着 $E[S_n^2 \\mid \\mathcal{F}_n] = S_n^2$。类似地，常数项 $c(n+1)$ 也是已知的，所以 $E[c(n+1) \\mid \\mathcal{F}_n] = c(n+1)$。\n\n2.  对于项 $E[2S_n X_{n+1} \\mid \\mathcal{F}_n]$，我们可以将已知因子 $2S_n$ 从条件期望中提出（“提出已知项”）：\n    $$E[2S_n X_{n+1} \\mid \\mathcal{F}_n] = 2S_n E[X_{n+1} \\mid \\mathcal{F}_n]$$\n    由于随机变量 $X_{n+1}$ 独立于过去的历史 $\\mathcal{F}_n$，其条件期望就是它的无条件期望：$E[X_{n+1} \\mid \\mathcal{F}_n] = E[X_{n+1}]$。\n    问题中说明了对所有 $i$ 都有 $E[X_i] = 0$。因此，$E[X_{n+1}] = 0$。\n    所以，这一项变为 $2S_n \\times 0 = 0$。\n\n3.  对于项 $E[X_{n+1}^2 \\mid \\mathcal{F}_n]$，由于 $X_{n+1}$ 独立于 $\\mathcal{F}_n$，我们有 $E[X_{n+1}^2 \\mid \\mathcal{F}_n] = E[X_{n+1}^2]$。\n    我们已知方差 $\\text{Var}(X_{n+1}) = \\sigma^2$ 和均值 $E[X_{n+1}] = 0$。方差的定义是 $\\text{Var}(X_{n+1}) = E[X_{n+1}^2] - (E[X_{n+1}])^2$。\n    代入已知值：\n    $$\\sigma^2 = E[X_{n+1}^2] - (0)^2$$\n    因此，$E[X_{n+1}^2] = \\sigma^2$。\n\n将这些结果代回 $E[V_{n+1} \\mid \\mathcal{F}_n]$ 的方程中：\n$$E[V_{n+1} \\mid \\mathcal{F}_n] = S_n^2 + 0 + \\sigma^2 - c(n+1)$$\n$$E[V_{n+1} \\mid \\mathcal{F}_n] = S_n^2 + \\sigma^2 - cn - c$$\n\n现在我们应用公平博弈条件 $E[V_{n+1} \\mid \\mathcal{F}_n] = V_n$。我们知道 $V_n = S_n^2 - cn$。\n令两个表达式相等：\n$$S_n^2 + \\sigma^2 - cn - c = S_n^2 - cn$$\n\n我们可以消去方程两边的 $S_n^2$ 和 $-cn$ 项：\n$$\\sigma^2 - c = 0$$\n解出 $c$，我们得到：\n$$c = \\sigma^2$$\n\n因此，要使该工具成为一个公平博弈，每日费用 $c$ 必须等于每日价格变动的方差 $\\sigma^2$。", "answer": "$$\\boxed{\\sigma^{2}}$$", "id": "1299933"}, {"introduction": "超越加性模型，自然界和金融领域的许多过程（如投资回报或种群动态）表现出乘性增长。这个练习介绍指数鞅的概念，其中过程由一系列随机变量的乘积定义 [@problem_id:1299939]。你将探索如何通过在每一步应用一个恒定的缩放因子来精确抵消预期的乘性增长，从而从一个指数增长或衰减的过程中构建一个公平博弈。", "problem": "考虑一个由正的、独立同分布 (i.i.d.) 的随机变量构成的序列 $\\{X_k\\}_{k \\ge 1}$。这些随机变量的共同均值为 $E[X_k] = \\mu$，其中 $\\mu$ 是一个正数常量且 $\\mu \\neq 1$。\n\n设一个新的随机过程 $\\{M_n\\}_{n \\ge 0}$ 定义如下：\n$M_0 = 1$\n$M_n = c^n \\prod_{k=1}^{n} X_k$ for $n \\ge 1$\n\n这里，$c$ 是一个非零的实数常量。该过程 $\\{M_n\\}$ 是相对于自然信息流 $\\mathcal{F}_n = \\sigma(X_1, \\dots, X_n)$ 来考虑的，这个信息流是由序列中前 $n$ 个变量所生成的信息。\n\n确定常量 $c$ 的具体值，使得过程 $\\{M_n\\}_{n \\ge 0}$ 是一个关于信息流 $\\{\\mathcal{F}_n\\}_{n \\ge 0}$ 的鞅。用 $\\mu$ 来表示你的答案。", "solution": "我们需要 $\\{M_{n}\\}$ 是一个关于 $\\{\\mathcal{F}_{n}\\}$ 的鞅。一个过程是鞅必须满足三个条件：可积性 ($\\mathbb{E}[|M_{n}|] < \\infty$)，可测性 ($M_{n}$ 关于 $\\mathcal{F}_{n}$ 可测)，以及关键的鞅性质 $\\mathbb{E}[M_{n} \\mid \\mathcal{F}_{n-1}] = M_{n-1}$ 对所有 $n \\geq 1$ 成立。\n\n1.  **可测性**: $M_{n} = c^{n}\\prod_{k=1}^{n}X_{k}$ 是随机变量 $(X_{1},\\dots,X_{n})$ 的函数，因此它关于这些变量生成的信息流 $\\mathcal{F}_{n}$ 是可测的。该条件由构造可知成立。\n2.  **可积性**: 利用独立性和正性，我们可以计算期望值：\n    $$\n    \\mathbb{E}[|M_{n}|] = \\mathbb{E}[M_{n}] = c^{n}\\,\\mathbb{E}\\!\\left[\\prod_{k=1}^{n}X_{k}\\right] = c^{n}\\prod_{k=1}^{n}\\mathbb{E}[X_{k}] = (c\\mu)^{n}\n    $$\n    对于任何有限的 $c$ 和有限的 $\\mu$，这个值都是有限的。\n3.  **鞅性质**: 我们计算条件期望。利用 $M_n = M_{n-1} \\cdot c \\cdot X_n$ 的关系以及 $M_{n-1}$ 相对于 $\\mathcal{F}_{n-1}$ 是已知的（可测的）这一事实：\n    $$\n    \\mathbb{E}[M_{n} \\mid \\mathcal{F}_{n-1}] = \\mathbb{E}[M_{n-1} \\cdot c \\cdot X_n \\mid \\mathcal{F}_{n-1}] = M_{n-1} \\cdot c \\cdot \\mathbb{E}[X_n \\mid \\mathcal{F}_{n-1}]\n    $$\n    因为 $\\{X_k\\}$ 是独立同分布序列，所以 $X_n$ 独立于过去的信息 $\\mathcal{F}_{n-1} = \\sigma(X_1, \\dots, X_{n-1})$。因此，$\\mathbb{E}[X_n \\mid \\mathcal{F}_{n-1}] = \\mathbb{E}[X_n] = \\mu$。\n    代入上式，我们得到：\n    $$\n    \\mathbb{E}[M_{n} \\mid \\mathcal{F}_{n-1}] = M_{n-1} \\cdot c \\cdot \\mu\n    $$\n    为了满足鞅的条件 $\\mathbb{E}[M_{n} \\mid \\mathcal{F}_{n-1}] = M_{n-1}$，我们必须有：\n    $$\n    M_{n-1} \\cdot c \\cdot \\mu = M_{n-1}\n    $$\n    因为 $X_k$ 是正的，所以 $M_{n-1}$ 几乎必然为正。因此我们可以安全地将 $M_{n-1}$ 从等式两边消去，得到：\n    $$\n    c \\cdot \\mu = 1\n    $$\n    解出 $c$：\n    $$\n    c = \\frac{1}{\\mu}\n    $$\n    这个选择确保了 $\\{M_{n}\\}$ 是一个鞅。给定的条件 $\\mu \\neq 1$ 只是为了强调这不是一个平凡的情况（如果 $\\mu=1$，则 $c=1$），但我们的推导对所有正的 $\\mu$ 都有效。", "answer": "$$\\boxed{\\frac{1}{\\mu}}$$", "id": "1299939"}, {"introduction": "我们最后的练习将视角从分析转向设计，要求你通过设计系统规则来实现一个期望的属性。你不再是检验一个给定过程是否为鞅，而是需要确定一个随机游走的特定转移概率，使其位置的倒数 $1/X_n$ 成为一个公平博弈 [@problem_id:1299908]。这个问题通过将抽象的鞅条件与底层随机过程的具体、局部动态联系起来，加深了你的理解。", "problem": "一个粒子在正整数集 $\\mathbb{Z}^+ = \\{1, 2, 3, \\dots\\}$ 上进行随机游走。设 $X_n$ 表示粒子在时间步 $n$ 的位置，对于所有 $n \\ge 0$，$X_n$ 都是一个正整数。移动规则定义如下：从任意状态 $k > 1$ 出发，粒子以概率 $p_k$ 跳转到状态 $k+1$，或以概率 $1-p_k$ 跳转到状态 $k-1$。从状态 $k=1$ 出发的移动受到限制，以确保粒子的位置始终保持在 $\\mathbb{Z}^+$ 内。\n\n设过程 $\\{M_n\\}_{n\\geq 0}$ 由粒子位置的倒数定义，即 $M_n = 1/X_n$。我们感兴趣的是，在何种特定条件下，$\\{M_n\\}$ 会成为一个关于该游走生成的自然滤子 $\\mathcal{F}_n = \\sigma(X_0, X_1, \\dots, X_n)$ 的鞅。\n\n确定对于所有整数 $k > 1$，能确保 $\\{M_n\\}$ 是一个鞅的转移概率 $p_k$（作为 $k$ 的函数）。", "solution": "我们要求 $\\{M_{n}\\}$ 对所有 $n$ 满足鞅性质 $E[M_{n+1} \\mid \\mathcal{F}_{n}] = M_{n}$。由于 $\\{X_{n}\\}$ 是一个时齐马尔可夫链且 $M_{n} = 1/X_{n}$，鞅条件简化为如下的调和函数条件\n$$\nE\\!\\left[\\frac{1}{X_{n+1}} \\,\\middle|\\, X_{n}=k\\right] = \\frac{1}{k}.\n$$\n对于 $k>1$，转移概率为 $P(X_{n+1}=k+1 \\mid X_{n}=k)=p_{k}$ 和 $P(X_{n+1}=k-1 \\mid X_{n}=k)=1-p_{k}$。因此，条件期望为：\n$$\nE\\!\\left[\\frac{1}{X_{n+1}} \\,\\middle|\\, X_{n}=k\\right] = p_{k}\\cdot \\frac{1}{k+1} + (1-p_{k})\\cdot \\frac{1}{k-1}.\n$$\n应用鞅条件可得\n$$\np_{k}\\cdot \\frac{1}{k+1} + (1-p_{k})\\cdot \\frac{1}{k-1} = \\frac{1}{k}.\n$$\n我们现在需要解出 $p_{k}$：\n$$\np_{k}\\!\\left(\\frac{1}{k+1} - \\frac{1}{k-1}\\right) + \\frac{1}{k-1} = \\frac{1}{k}\n$$\n$$\np_{k}\\!\\left(\\frac{(k-1) - (k+1)}{(k+1)(k-1)}\\right) = \\frac{1}{k} - \\frac{1}{k-1}\n$$\n$$\np_{k}\\!\\left(\\frac{-2}{k^{2}-1}\\right) = \\frac{(k-1) - k}{k(k-1)} = -\\frac{1}{k(k-1)}\n$$\n$$\np_{k} = \\frac{-\\frac{1}{k(k-1)}}{-\\frac{2}{k^{2}-1}} = \\frac{1}{k(k-1)} \\cdot \\frac{k^2-1}{2} = \\frac{1}{k(k-1)} \\cdot \\frac{(k-1)(k+1)}{2} = \\frac{k+1}{2k}.\n$$\n因此，对于所有 $k>1$，选择\n$$\np_{k} = \\frac{k+1}{2k}\n$$\n可确保 $\\{M_{n}\\}$ 是一个鞅。该问题不要求我们定义 $k=1$ 处的行为，因为它不影响当 $k>1$ 时 $p_k$ 的形式。", "answer": "$$\\boxed{\\frac{k+1}{2k}}$$", "id": "1299908"}]}
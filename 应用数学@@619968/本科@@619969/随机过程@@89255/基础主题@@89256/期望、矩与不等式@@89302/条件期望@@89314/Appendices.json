{"hands_on_practices": [{"introduction": "我们将从一个涉及离散随机变量的经典问题开始。在许多现实世界的场景中，例如模拟数据中心的服务器请求，我们经常处理独立的泊松过程。这个练习将探讨一个有趣的问题：当我们知道两个独立过程事件的总和时，我们如何更新对其中一个过程的期望？这个问题揭示了条件期望的一个强大应用，它将泊松分布和二项分布联系在了一起，展示了在获得部分信息后如何重新分配概率权重。[@problem_id:1905661]", "problem": "在一个数据中心，两个独立的服务器，服务器A和服务器B，处理传入的请求。在给定的一分钟内，到达服务器A的请求数量，用随机变量 $X_1$ 表示，服从均值为 $\\lambda_1$ 的泊松分布。类似地，在同一分钟内到达服务器B的请求数量，用 $X_2$ 表示，也是一个泊松随机变量，与 $X_1$ 独立，其均值为 $\\lambda_2$。\n\n假设在某一分钟结束时，一个监控系统报告说两个服务器总共收到了 $k$ 个请求，其中 $k$ 是一个非负整数。给定此信息，到达服务器A的期望请求数是多少？\n\n你的任务是求出条件期望 $E[X_1 | X_1 + X_2 = k]$ 的一个闭式表达式。", "solution": "设 $X_{1} \\sim \\mathrm{Poisson}(\\lambda_{1})$ 和 $X_{2} \\sim \\mathrm{Poisson}(\\lambda_{2})$ 相互独立。联合概率质量函数为\n$$\n\\mathbb{P}(X_{1}=i, X_{2}=j)=\\mathbb{P}(X_{1}=i)\\mathbb{P}(X_{2}=j)=\\exp(-\\lambda_{1})\\frac{\\lambda_{1}^{i}}{i!}\\,\\exp(-\\lambda_{2})\\frac{\\lambda_{2}^{j}}{j!}=\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{\\lambda_{1}^{i}\\lambda_{2}^{j}}{i!\\,j!}.\n$$\n对于 $k \\in \\{0,1,2,\\dots\\}$ 和 $i \\in \\{0,1,\\dots,k\\}$，条件概率为\n$$\n\\mathbb{P}(X_{1}=i \\mid X_{1}+X_{2}=k)=\\frac{\\mathbb{P}(X_{1}=i, X_{2}=k-i)}{\\mathbb{P}(X_{1}+X_{2}=k)}=\\frac{\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{\\lambda_{1}^{i}\\lambda_{2}^{k-i}}{i!\\,(k-i)!}}{\\mathbb{P}(X_{1}+X_{2}=k)}.\n$$\n通过卷积计算分母：\n$$\n\\mathbb{P}(X_{1}+X_{2}=k)=\\sum_{i=0}^{k}\\mathbb{P}(X_{1}=i)\\mathbb{P}(X_{2}=k-i)=\\exp(-(\\lambda_{1}+\\lambda_{2}))\\sum_{i=0}^{k}\\frac{\\lambda_{1}^{i}}{i!}\\frac{\\lambda_{2}^{k-i}}{(k-i)!}.\n$$\n使用二项式系数重写求和：\n$$\n\\sum_{i=0}^{k}\\frac{\\lambda_{1}^{i}}{i!}\\frac{\\lambda_{2}^{k-i}}{(k-i)!}=\\frac{1}{k!}\\sum_{i=0}^{k}\\binom{k}{i}\\lambda_{1}^{i}\\lambda_{2}^{k-i}=\\frac{(\\lambda_{1}+\\lambda_{2})^{k}}{k!}.\n$$\n因此\n$$\n\\mathbb{P}(X_{1}+X_{2}=k)=\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{(\\lambda_{1}+\\lambda_{2})^{k}}{k!}.\n$$\n代回可得\n$$\n\\mathbb{P}(X_{1}=i \\mid X_{1}+X_{2}=k)=\\frac{\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{\\lambda_{1}^{i}\\lambda_{2}^{k-i}}{i!\\,(k-i)!}}{\\exp(-(\\lambda_{1}+\\lambda_{2}))\\frac{(\\lambda_{1}+\\lambda_{2})^{k}}{k!}}=\\binom{k}{i}\\left(\\frac{\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}\\right)^{i}\\left(\\frac{\\lambda_{2}}{\\lambda_{1}+\\lambda_{2}}\\right)^{k-i}.\n$$\n因此给定 $(X_{1}+X_{2}=k)$ 时，$X_{1}$ 服从 $\\mathrm{Binomial}\\left(k,\\frac{\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}\\right)$ 分布。一个二项随机变量 $Y \\sim \\mathrm{Binomial}(k,p)$ 的期望是 $E[Y]=kp$，所以\n$$\nE[X_{1} \\mid X_{1}+X_{2}=k]=k\\cdot \\frac{\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}=\\frac{k\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}.\n$$", "answer": "$$\\boxed{\\frac{k\\lambda_{1}}{\\lambda_{1}+\\lambda_{2}}}$$", "id": "1905661"}, {"introduction": "在处理了离散情况之后，我们现在转向连续随机变量。这个练习将条件期望的概念应用到一个几何情境中，其中一个点在由曲线界定的二维区域内均匀随机选择。通过计算给定一个坐标值 $X=x$ 时另一个坐标 $Y$ 的期望，我们能直观地理解条件期望是如何通过在联合分布上进行“切片”来运作的，这是处理多维概率模型的关键技能。[@problem_id:1905673]", "problem": "在笛卡尔平面的第一象限中，从区域 $R$ 内均匀随机地选择一个点 $(X, Y)$。区域 $R$ 由曲线 $y = \\sqrt{x}$ 和 $y = x^3$ 所围成。求在随机变量 $X$ 取值为 $x$（其中 $0 < x < 1$）的条件下，随机变量 $Y$ 的条件期望。答案应为一个关于 $x$ 的闭式解析表达式。", "solution": "在第一象限中，由 $y=\\sqrt{x}$ 和 $y=x^{3}$ 所围成的区域 $R$ 的交点满足 $\\sqrt{x}=x^{3}$，解得 $x=x^{6}$，所以 $x=0$ 或 $x=1$。对于 $0<x<1$，在固定的 $x$ 处，垂直截面的范围是从 $y_{\\ell}=x^{3}$ 到 $y_{u}=\\sqrt{x}$，且 $y_{u}>y_{\\ell}$。\n\n由于 $(X,Y)$ 在 $R$ 上服从均匀分布，其联合概率密度为\n$$\nf_{X,Y}(x,y)=\\frac{1}{|R|} \\quad \\text{for } (x,y)\\in R,\n$$\n其中 $|R|$ 是 $R$ 的面积。对于 $0<x<1$，$X$ 的边际概率密度为\n$$\nf_{X}(x)=\\int_{y=x^{3}}^{\\sqrt{x}} \\frac{1}{|R|}\\,dy=\\frac{\\sqrt{x}-x^{3}}{|R|}.\n$$\n因此，对于 $0<x<1$，给定 $X=x$ 时 $Y$ 的条件概率密度为\n$$\nf_{Y\\mid X}(y\\mid x)=\\frac{f_{X,Y}(x,y)}{f_{X}(x)}=\\frac{1/|R|}{(\\sqrt{x}-x^{3})/|R|}=\\frac{1}{\\sqrt{x}-x^{3}}, \\quad x^{3}\\leq y\\leq \\sqrt{x}.\n$$\n所以，条件期望为\n$$\n\\mathbb{E}[Y\\mid X=x]=\\int_{x^{3}}^{\\sqrt{x}} y\\,f_{Y\\mid X}(y\\mid x)\\,dy=\\int_{x^{3}}^{\\sqrt{x}} \\frac{y}{\\sqrt{x}-x^{3}}\\,dy.\n$$\n计算此积分，\n$$\n\\mathbb{E}[Y\\mid X=x]=\\left.\\frac{y^{2}}{2(\\sqrt{x}-x^{3})}\\right|_{y=x^{3}}^{y=\\sqrt{x}}=\\frac{(\\sqrt{x})^{2}-(x^{3})^{2}}{2(\\sqrt{x}-x^{3})}=\\frac{x-x^{6}}{2(\\sqrt{x}-x^{3})}.\n$$\n为化简该式，注意到 $x-x^{6}=x(1-x^{5})$ 且 $\\sqrt{x}-x^{3}=x^{1/2}(1-x^{5/2})$。设 $z=x^{5/2}$，则\n$$\n\\frac{x-x^{6}}{2(\\sqrt{x}-x^{3})}=\\frac{x(1-z^{2})}{2x^{1/2}(1-z)}=\\frac{x^{1/2}}{2}(1+z)=\\frac{1}{2}\\left(x^{1/2}+x^{3}\\right).\n$$\n因此，对 $0<x<1$，\n$$\n\\mathbb{E}[Y\\mid X=x]=\\frac{x^{1/2}+x^{3}}{2}.\n$$", "answer": "$$\\boxed{\\frac{x^{1/2}+x^{3}}{2}}$$", "id": "1905673"}, {"introduction": "最后的练习将我们的注意力转移到随机过程和序列试验上。我们以一个模拟数字通信中数据包传输的场景为例，其中每次传输成功的概率为 $p$。这个问题要求我们在已知第一次尝试失败的条件下，计算达到首次成功所需的总期望次数，这将揭示几何分布的一个基本性质——无记忆性（memorylessness），它极大地简化了看似复杂的计算。[@problem_id:1905638]", "problem": "在一个简化的数字通信信道模型中，数据包从发送方逐一传输到接收方。由于信道中的噪声，每个数据包被正确接收的独立概率为 $p$。传输过程持续进行，直到一个数据包被成功接收为止。\n\n假设已知第一个传输的数据包未被正确接收。计算为实现首次正确接收所必须发送的数据包的总数的期望值。请用包含 $p$ 的单个闭式解析表达式来表示你的答案，其中 $0 < p < 1$。", "solution": "令 $T$ 表示直到首次正确接收所发送的数据包总数。数据包的传输是成功概率为 $p$ 的独立伯努利试验，因此 $T$ 是一个几何随机变量，其概率分布为\n$$\n\\mathbb{P}(T=k)=(1-p)^{k-1}p,\\quad k\\in\\{1,2,3,\\dots\\},\n$$\n且其无条件期望为 $\\mathbb{E}[T]=\\frac{1}{p}$。\n\n我们已知第一个数据包传输失败。令 $F$ 表示第一个数据包未被正确接收的事件，即 $F=\\{T\\geq 2\\}$，其概率为 $\\mathbb{P}(F)=1-p$。根据独立伯努利试验的无记忆性，在事件 $F$ 发生的条件下，第一次失败后的过程会以相同的成功概率 $p$ 重新开始。因此，在事件 $F$ 发生的条件下，总数可以写成\n$$\nT=1+T',\n$$\n其中 $T'$ 是参数为 $p$ 的几何随机变量，且与第一次试验独立。求期望可得\n$$\n\\mathbb{E}[T\\,|\\,F]=1+\\mathbb{E}[T']=1+\\frac{1}{p}.\n$$\n\n为了完整起见，同样的结果也可以通过直接求和得出。使用\n$$\n\\mathbb{P}(T=k\\,|\\,F)=\\frac{\\mathbb{P}(T=k)}{\\mathbb{P}(F)}=\\frac{(1-p)^{k-1}p}{1-p}\\quad \\text{for }k\\geq 2,\n$$\n我们有\n$$\n\\mathbb{E}[T\\,|\\,F]=\\sum_{k=2}^{\\infty}k\\,\\mathbb{P}(T=k\\,|\\,F)\n=\\frac{p}{1-p}\\sum_{k=2}^{\\infty}k(1-p)^{k-1}.\n$$\n令 $q=1-p$，其中 $0<q<1$。使用通过对几何级数求导得到的恒等式，\n$$\n\\sum_{k=1}^{\\infty}k q^{k-1}=\\frac{1}{(1-q)^{2}}=\\frac{1}{p^{2}},\n$$\n我们得到\n$$\n\\sum_{k=2}^{\\infty}k q^{k-1}=\\frac{1}{p^{2}}-1.\n$$\n因此\n$$\n\\mathbb{E}[T\\,|\\,F]=\\frac{p}{1-p}\\left(\\frac{1}{p^{2}}-1\\right)\n=\\frac{p}{1-p}\\cdot\\frac{1-p^{2}}{p^{2}}\n=\\frac{p}{1-p}\\cdot\\frac{(1-p)(1+p)}{p^{2}}\n=\\frac{1+p}{p}=1+\\frac{1}{p}.\n$$\n\n因此，在第一个数据包未被正确接收的条件下，必须发送的数据包总数的期望值为 $1+\\frac{1}{p}$。", "answer": "$$\\boxed{1+\\frac{1}{p}}$$", "id": "1905638"}]}
{"hands_on_practices": [{"introduction": "让我们通过一个直观的例子来热身。期望塔性质最直接的应用之一，就是将一个复杂的问题分解为几个互斥的、更简单的场景。这个练习将带你进入一个游戏节目的世界，通过计算参赛者的总期望奖金，你将亲身体验如何使用全期望定律（Law of Total Expectation），通过加权平均不同情况下的期望值来解决问题。[@problem_id:1346853]", "problem": "在一个热门的电视游戏节目中，参赛者首先旋转一个大转盘来决定他们将要玩的三个小游戏中的哪一个。转盘被分成三个颜色的扇区。转盘停在红色扇区的概率是 $0.5$，停在蓝色扇区的概率是 $0.3$，停在绿色扇区的概率是 $0.2$。\n\n奖金（以美元计）取决于与扇区相关的小游戏：\n- **红色扇区（游戏 A）：** 参赛者投掷三枚不同的均匀硬币。每得到一个正面，他们就赢得 $120。\n- **蓝色扇区（游戏 B）：** 奖金由一个在区间 $[50, 450]$ 上服从均匀分布的随机变量确定。\n- **绿色扇区（游戏 C）：** 奖金是一个服从指数分布的随机变量，其已知平均奖金为 $350。\n\n假设一名参赛者恰好旋转一次转盘，他们的总期望奖金是多少？请用美元表示你的答案，并四舍五入到三位有效数字。", "solution": "令 $W$ 表示参赛者一次旋转的奖金。根据全期望定律，\n$$\n\\mathbb{E}[W]=\\mathbb{P}(\\text{Red})\\,\\mathbb{E}[W\\mid \\text{Red}]+\\mathbb{P}(\\text{Blue})\\,\\mathbb{E}[W\\mid \\text{Blue}]+\\mathbb{P}(\\text{Green})\\,\\mathbb{E}[W\\mid \\text{Green}}.\n$$\n\n红色扇区（游戏 A）：令 $X_{i}$ 表示第 $i$ 枚均匀硬币（对于 $i\\in\\{1,2,3\\}$）掷出正面的指示变量，因此 $X_{i}\\sim\\text{Bernoulli}\\!\\left(\\frac{1}{2}\\right)$ 且 $\\mathbb{E}[X_{i}]=\\frac{1}{2}$。奖金为 $A=120\\sum_{i=1}^{3}X_{i}$。根据期望的线性性，\n$$\n\\mathbb{E}[A]=120\\sum_{i=1}^{3}\\mathbb{E}[X_{i}]=120\\cdot 3\\cdot \\frac{1}{2}=180.\n$$\n\n蓝色扇区（游戏 B）：若 $B\\sim \\text{Unif}[50,450]$，则\n$$\n\\mathbb{E}[B]=\\frac{50+450}{2}=250.\n$$\n\n绿色扇区（游戏 C）：若 $C$ 是均值为 $350$ 的指数分布，则对于 $C\\sim \\text{Exp}(\\lambda)$，使用 $\\mathbb{E}[C]=\\frac{1}{\\lambda}$，可得\n$$\n\\mathbb{E}[C]=350.\n$$\n\n已知 $\\mathbb{P}(\\text{Red})=0.5$、$\\mathbb{P}(\\text{Blue})=0.3$ 和 $\\mathbb{P}(\\text{Green})=0.2$，则总期望奖金为\n$$\n\\mathbb{E}[W]=0.5\\cdot 180+0.3\\cdot 250+0.2\\cdot 350.\n$$\n计算每一项：\n$$\n0.5\\cdot 180=90,\\quad 0.3\\cdot 250=75,\\quad 0.2\\cdot 350=70,\n$$\n所以\n$$\n\\mathbb{E}[W]=90+75+70=235.\n$$\n四舍五入到三位有效数字，结果为 $235$。", "answer": "$$\\boxed{235}$$", "id": "1346853"}, {"introduction": "在掌握了基本的分情况讨论之后，让我们来挑战一个更进一步的场景：如果用于划分条件的变量本身就是一个随机数，我们该如何处理？这个问题引入了一个两阶段的博弈过程，其中第二阶段的重复次数是随机的。通过解决这个问题，你将学会如何处理形如 $Y = \\sum_{i=1}^{N} X_i$ 的随机和问题，并真正理解期望塔性质 $\\mathbb{E}[Y] = \\mathbb{E}[\\mathbb{E}[Y|N]]$ 的强大之处，即对一个以随机变量 $N$ 为条件的期望再次求期望。[@problem_id:1346870]", "problem": "一个玩家参加一个分为两个阶段的嘉年华游戏。在第一阶段，玩家投掷一枚有偏硬币10次。硬币正面朝上的概率是0.6。获得的正面次数（我们称之为 $N$）决定了玩家进入第二阶段的轮数。\n\n在第二阶段，对于 $N$ 轮中的每一轮，玩家都会获得一笔钱，金额由投掷一个标准的、公平的六面骰子的结果决定。骰子的投掷结果彼此独立，也与硬币的投掷结果无关。\n\n设玩家从所有轮次中获得的总奖金为 $Y$。期望总奖金 $\\mathbb{E}[Y]$ 是多少？\n\n以美元表示你的答案。最终答案应为单个数值。", "solution": "设 $N$ 为表示在10次掷硬币中获得的正面次数的随机变量。设 $X_i$ 为表示在第二阶段第 $i$ 轮中获得的报酬的随机变量，其中 $i=1, 2, \\dots, N$。总奖金 $Y$ 可以表示为 $N$ 轮报酬的总和：\n$$Y = \\sum_{i=1}^{N} X_i$$\n我们知道，如果 $N=0$，则和为空，且 $Y=0$。我们希望计算 $Y$ 的期望值，即 $\\mathbb{E}[Y]$。\n\n为了解决这个问题，我们使用全期望定律（也称为塔性质），该定律指出 $\\mathbb{E}[Y] = \\mathbb{E}[\\mathbb{E}[Y|N]]$。我们将分两步计算：首先，计算内部的条件期望 $\\mathbb{E}[Y|N]$，然后计算外部的期望。\n\n**第一步：计算条件期望 $\\mathbb{E}[Y|N]$。**\n我们以正面次数为特定值 $N=n$ 的事件为条件。总奖金则是 $n$ 次随机报酬的总和：\n$$\\mathbb{E}[Y|N=n] = \\mathbb{E}\\left[\\sum_{i=1}^{n} X_i \\bigg| N=n\\right]$$\n由于骰子的投掷结果 $X_i$ 与掷硬币的结果（因此与 $N$）独立，因此以 $N=n$ 为条件只决定了求和中的项数。根据期望的线性性，我们有：\n$$\\mathbb{E}[Y|N=n] = \\sum_{i=1}^{n} \\mathbb{E}[X_i]$$\n每一轮的报酬 $X_i$ 由投掷一个公平的六面骰子决定。可能的结果是 $\\{1, 2, 3, 4, 5, 6\\}$，每个结果的概率都是 $\\frac{1}{6}$。单次报酬 $X_i$ 的期望值是：\n$$\\mathbb{E}[X_i] = 1\\cdot\\frac{1}{6} + 2\\cdot\\frac{1}{6} + 3\\cdot\\frac{1}{6} + 4\\cdot\\frac{1}{6} + 5\\cdot\\frac{1}{6} + 6\\cdot\\frac{1}{6} = \\frac{1+2+3+4+5+6}{6} = \\frac{21}{6} = 3.5$$\n由于所有的 $X_i$ 都是同分布的，所以对于所有的 $i$，$E[X_i] = 3.5$。将此代回条件期望的表达式中：\n$$\\mathbb{E}[Y|N=n] = \\sum_{i=1}^{n} 3.5 = 3.5n$$\n这个结果对 $N$ 可以取的任何特定值 $n$ 都成立。因此，我们可以将条件期望表示为随机变量 $N$ 的函数：\n$$\\mathbb{E}[Y|N] = 3.5N$$\n\n**第二步：计算外部期望。**\n现在我们对第一步的结果关于 $N$ 的分布取期望：\n$$\\mathbb{E}[Y] = \\mathbb{E}[\\mathbb{E}[Y|N]] = \\mathbb{E}[3.5N]$$\n再次使用期望的线性性，我们可以将常数提出来：\n$$\\mathbb{E}[Y] = 3.5 \\mathbb{E}[N]$$\n\n**第三步：计算 $N$ 的期望。**\n随机变量 $N$ 表示在10次掷有偏硬币中得到正面的次数。这些投掷是独立的试验，每次成功的概率（正面）为 $p=0.6$。试验次数为 $n=10$。因此，$N$ 服从二项分布，$N \\sim \\text{Bin}(n=10, p=0.6)$。\n服从二项分布的随机变量的期望值由公式 $\\mathbb{E}[N] = np$ 给出。\n$$\\mathbb{E}[N] = 10 \\times 0.6 = 6$$\n\n**第四步：计算最终答案。**\n最后，我们将 $\\mathbb{E}[N]$ 的值代入我们关于 $\\mathbb{E}[Y]$ 的表达式中：\n$$\\mathbb{E}[Y] = 3.5 \\times \\mathbb{E}[N] = 3.5 \\times 6 = 21$$\n玩家的期望总奖金是$21$。", "answer": "$$\\boxed{21}$$", "id": "1346870"}, {"introduction": "期望塔性质在分析随时间演化的动态系统（即随机过程）时尤为关键。这个练习将介绍一个经典的Galton-Watson分支过程模型，模拟种群的繁衍。你的任务是预测未来第三代种群的期望数量 $\\mathbb{E}[Z_3]$。通过逐代向后递推（从第三代到第二代，再到第一代），你将深刻体会到期望“塔”的迭代思想，见证这一性质在预测随机过程长期行为中的核心作用。[@problem_id:1461117]", "problem": "考虑一个种群模型，在第 $n=0$ 代时始于单个个体。令 $Z_n$ 为第 $n$ 代的个体数量，因此给定 $Z_0=1$。对于任意 $n \\ge 0$，第 $n$ 代中的每个个体独立地产生随机数量的后代，这些后代构成第 $n+1$ 代。单个个体产生的后代数量是一个随机变量，我们称之为 $X$，其概率质量函数由下式给出：\n$$ P(X=0) = \\frac{1}{2}, \\quad P(X=1) = \\frac{1}{4}, \\quad P(X=2) = \\frac{1}{8}, \\quad P(X=3) = \\frac{1}{8} $$\n且对于任何不在 $\\{0, 1, 2, 3\\}$ 中的整数 $k$，$P(X=k)=0$。第 $n+1$ 代的总种群数 $Z_{n+1}$ 是第 $n$ 代的 $Z_n$ 个个体所产生的所有后代的总和。\n\n计算第三代个体的期望数量 $\\mathbb{E}[Z_3]$。你的推导过程必须遵循以下结构：首先求出在给定 $Z_2$ 的条件下 $Z_3$ 的条件期望，然后利用这个中间结果来确定 $\\mathbb{E}[Z_3]$ 的值。\n\n将你的答案表示为最简分数形式。", "solution": "设 $X$ 为单个个体的后代数，其概率质量函数已给出。它的均值为\n$$\n\\mathbb{E}[X]=0 \\cdot \\frac{1}{2}+1 \\cdot \\frac{1}{4}+2 \\cdot \\frac{1}{8}+3 \\cdot \\frac{1}{8}=\\frac{1}{4}+\\frac{2}{8}+\\frac{3}{8}=\\frac{7}{8}.\n$$\n在一个高尔顿-沃森过程中，给定 $Z_{n}$，下一代为 $Z_{n+1}=\\sum_{i=1}^{Z_{n}}X_{n,i}$，其中 $X_{n,i}$ 是 $X$ 的独立同分布副本，并且独立于 $Z_{n}$。因此，根据期望的线性和独立性，\n$$\n\\mathbb{E}[Z_{3}\\mid Z_{2}]=\\sum_{i=1}^{Z_{2}}\\mathbb{E}[X_{2,i}\\mid Z_{2}]=\\sum_{i=1}^{Z_{2}}\\mathbb{E}[X]=Z_{2}\\,\\mathbb{E}[X]=\\frac{7}{8}\\,Z_{2}.\n$$\n使用全期望定律（塔性质），\n$$\n\\mathbb{E}[Z_{3}]=\\mathbb{E}\\!\\left[\\mathbb{E}[Z_{3}\\mid Z_{2}]\\right]=\\frac{7}{8}\\,\\mathbb{E}[Z_{2}].\n$$\n将相同的推理提前一步应用，\n$$\n\\mathbb{E}[Z_{2}\\mid Z_{1}]=\\frac{7}{8}\\,Z_{1}\\quad\\Rightarrow\\quad \\mathbb{E}[Z_{2}]=\\frac{7}{8}\\,\\mathbb{E}[Z_{1}],\n$$\n并且有 $Z_{0}=1$，\n$$\n\\mathbb{E}[Z_{1}\\mid Z_{0}]=\\frac{7}{8}\\,Z_{0}=\\frac{7}{8}\\quad\\Rightarrow\\quad \\mathbb{E}[Z_{1}]=\\frac{7}{8}.\n$$\n综合这些结果，\n$$\n\\mathbb{E}[Z_{2}]=\\left(\\frac{7}{8}\\right)^{2},\\qquad \\mathbb{E}[Z_{3}]=\\frac{7}{8}\\,\\mathbb{E}[Z_{2}]=\\left(\\frac{7}{8}\\right)^{3}=\\frac{343}{512}.\n$$", "answer": "$$\\boxed{\\frac{343}{512}}$$", "id": "1461117"}]}
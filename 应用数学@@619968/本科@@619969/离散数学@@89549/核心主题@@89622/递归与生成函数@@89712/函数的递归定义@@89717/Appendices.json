{"hands_on_practices": [{"introduction": "让我们从一个经典问题开始，它完美地诠释了递归思想的核心。通过分析一个机器人的移动选项，我们可以学习如何用到达先前位置的方法数来定义到达目标位置的方法总数。这个练习 [@problem_id:1395306] 是一个绝佳的切入点，能帮助你理解如何从一组简单的规则中构建起一个递推关系。", "problem": "一个自主维护机器人在一维轨道上运行，轨道上的位置由非负整数标记：0, 1, 2, 3, ... 机器人从位置 0 开始。机器人的移动仅限于两种前进方式：它可以将其位置前进1个单位（称为“步”），或者前进2个单位（称为“跳”）。一个“行进序列”是这些移动的一个特定有序序列。例如，要到达位置 3，机器人可以使用序列（步，步，步）、（步，跳）或（跳，步）。你的任务是确定机器人恰好到达目标位置 $n=10$ 所能使用的不同行进序列的总数。", "solution": "设 $a_{n}$ 表示使用大小为1（步）或大小为2（跳）的移动方式到达位置 $n$ 的行进序列数量。\n\n初始条件：\n- 要停在位置0，只有一种序列（空序列），所以 $a_{0}=1$。\n- 要到达位置1，只有一种序列（一步），所以 $a_{1}=1$。\n\n递推关系：\n对于 $n \\geq 2$，最后一次移动要么是一步（从 $n-1$ 处走来），要么是一次跳跃（从 $n-2$ 处跳来）。这两种情况是互斥的，并且涵盖了所有可能性。因此，\n$$\na_{n}=a_{n-1}+a_{n-2}.\n$$\n\n依次计算直到 $n=10$：\n$$\n\\begin{aligned}\na_{0}&=1,\\\\\na_{1}&=1,\\\\\na_{2}&=a_{1}+a_{0}=1+1=2,\\\\\na_{3}&=a_{2}+a_{1}=2+1=3,\\\\\na_{4}&=a_{3}+a_{2}=3+2=5,\\\\\na_{5}&=a_{4}+a_{3}=5+3=8,\\\\\na_{6}&=a_{5}+a_{4}=8+5=13,\\\\\na_{7}&=a_{6}+a_{5}=13+8=21,\\\\\na_{8}&=a_{7}+a_{6}=21+13=34,\\\\\na_{9}&=a_{8}+a_{7}=34+21=55,\\\\\na_{10}&=a_{9}+a_{8}=55+34=89.\n\\end{aligned}\n$$\n\n作为一种组合学验证，我们也可以对跳跃的次数 $j$ 进行求和。如果有 $j$ 次跳跃和 $n-2j$ 步，那么总的移动次数是 $n-j$，序列的数量就是为 $j$ 次跳跃选择位置的方法数：\n$$\na_{n}=\\sum_{j=0}^{\\lfloor n/2 \\rfloor} \\binom{n-j}{j}.\n$$\n对于 $n=10$，\n$$\na_{10}=\\sum_{j=0}^{5} \\binom{10-j}{j}\n=\\binom{10}{0}+\\binom{9}{1}+\\binom{8}{2}+\\binom{7}{3}+\\binom{6}{4}+\\binom{5}{5}\n=1+9+28+35+15+1=89,\n$$\n这与递推关系得到的结果相符。", "answer": "$$\\boxed{89}$$", "id": "1395306"}, {"introduction": "接下来的练习将超越单一序列，探索具有相互依赖状态的问题。当对具有特定属性（例如，某个字符出现偶数次）的字符串进行计数时，同时追踪其互补状态的计数通常非常有用。这个问题 [@problem_id:1395316] 将引导你建立一个递推关系系统，并求解它以得出一个优美的封闭形式表达式。", "problem": "在一个数字通信系统中，消息被编码为由字母表 $\\{A, B, C\\}$ 中的字符组成的字符串。一种特殊的检错协议关注字符 'A' 出现次数的奇偶性。设 $S_n$ 为长度为 $n$ 且包含偶数个 'A' 的有效消息字符串的数量。例如，当 $n=2$ 时，字符串 'BB', 'BC', 'CB', 'CC', 和 'AA' 是合法的，因此 $S_2 = 5$。求对于任意非负整数 $n$，$S_n$ 的一个封闭形式表达式。", "solution": "我们考虑字母表 $\\{A,B,C\\}$ 上长度为 $n$ 的字符串，并计算其中包含偶数个 $A$ 的字符串数量。设 $S_{n}$ 表示这类字符串的数量，并设 $T_{n}$ 表示包含奇数个 $A$ 的字符串的数量。显然，字符串总数为 $3^{n}$，因此我们有恒等式\n$$\nS_{n}+T_{n}=3^{n}.\n$$\n对每个字符串 $s$，定义其权重为 $w(s)=(-1)^{a(s)}$，其中 $a(s)$ 是 $s$ 中 $A$ 出现的次数。那么，如果 $s$ 含有偶数个 $A$，则 $w(s)=+1$；如果 $s$ 含有奇数个 $A$，则 $w(s)=-1$。对所有字符串求和可得\n$$\n\\sum_{s} w(s) \\;=\\; S_{n}-T_{n}.\n$$\n这个和可以按位置分解：在每个位置上，选择 $A$ 对求和的贡献是 $(-1)$，选择 $B$ 是 $+1$，选择 $C$ 是 $+1$，因此每个位置上的和是 $(-1)+1+1=1$。因此，\n$$\n\\sum_{s} w(s) \\;=\\; 1^{n}=1,\n$$\n这意味着\n$$\nS_{n}-T_{n}=1.\n$$\n联立 $S_{n}+T_{n}=3^{n}$ 和 $S_{n}-T_{n}=1$，求解 $S_{n}$ 可得\n$$\nS_{n}=\\frac{(S_{n}+T_{n})+(S_{n}-T_{n})}{2}=\\frac{3^{n}+1}{2}.\n$$\n\n等价地，我们可以通过追加一个字符来推导出一个递推关系：将 $B$ 或 $C$ 追加到一个有效字符串后，其偶性得以保持，这给出了 $2S_{n}$ 个字符串；而将 $A$ 追加到一个奇偶性为奇的字符串（有 $3^{n}-S_{n}$ 个）后，也会得到偶性，因此\n$$\nS_{n+1}=2S_{n}+(3^{n}-S_{n})=S_{n}+3^{n},\n$$\n初始条件为 $S_{0}=1$。对此求和，经裂项相消可得\n$$\nS_{n}=1+\\sum_{k=0}^{n-1}3^{k}=1+\\frac{3^{n}-1}{2}=\\frac{3^{n}+1}{2},\n$$\n这与上面的结果相符。", "answer": "$$\\boxed{\\frac{3^{n}+1}{2}}$$", "id": "1395316"}, {"introduction": "我们最后的练习将深入探讨结构本身的递归性质，这是计算机科学中的一个常见主题。通过思考一个运算序列如何在其主运算符处被分解，我们可以定义有效组合的总数。这个问题 [@problem_id:1395328] 通过一个非线性递推关系引入了著名的卡塔兰数，展示了递归在计算像二叉树这样复杂组合对象时的强大威力。", "problem": "考虑一个作用于变量集合 $\\{v_0, v_1, v_2, \\dots\\}$ 上的非结合二元运算符，记为 `*`。一个包含该运算符的表达式只有在完全括号化的情况下才是明确定义的。例如，对于三个变量，表达式 $v_0 * v_1 * v_2$ 是有歧义的，但 $(v_0 * v_1) * v_2$ 和 $v_0 * (v_1 * v_2)$ 是两个不同的、明确定义的表达式。\n\n设 $W(n)$ 为对 $n+1$ 个变量 $v_0 * v_1 * \\dots * v_n$ 的乘积进行完全括号化的不同方式的数量，其中 $n \\ge 0$。\n\n计算 $W(5)$ 的值。", "solution": "一个对 $n+1$ 个变量的完全括号化的乘积与一棵有 $n$ 个内部节点的满二叉树一一对应（每个内部节点代表一次二元运算符的应用，每个叶子节点代表一个变量）。设 $W(n)$ 表示这种结构的数量。最外层的运算将序列分成左右两部分；如果左子树有 $k$ 个内部节点，那么右子树有 $n-1-k$ 个内部节点，其中 $k=0,1,\\dots,n-1$。这就得到了卡塔兰递推关系，其初始条件为 $W(0)=1$：\n$$\nW(0)=1,\\quad W(n)=\\sum_{k=0}^{n-1} W(k)\\,W(n-1-k)\\quad \\text{for } n\\ge 1.\n$$\n逐次计算：\n$$\nW(1)=W(0)W(0)=1,\n$$\n$$\nW(2)=W(0)W(1)+W(1)W(0)=1+1=2,\n$$\n$$\nW(3)=W(0)W(2)+W(1)W(1)+W(2)W(0)=2+1+2=5,\n$$\n$$\nW(4)=W(0)W(3)+W(1)W(2)+W(2)W(1)+W(3)W(0)=5+2+2+5=14,\n$$\n$$\nW(5)=W(0)W(4)+W(1)W(3)+W(2)W(2)+W(3)W(1)+W(4)W(0)=14+5+4+5+14=42.\n$$\n等价地，$W(n)$ 是第 $n$ 个卡塔兰数，其通项公式为\n$$\nW(n)=\\frac{1}{n+1}\\binom{2n}{n},\n$$\n所以\n$$\nW(5)=\\frac{1}{6}\\binom{10}{5}=\\frac{1}{6}\\cdot 252=42,\n$$\n与递推计算的结果一致。", "answer": "$$\\boxed{42}$$", "id": "1395328"}]}
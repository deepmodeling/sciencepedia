{"hands_on_practices": [{"introduction": "我们从一个基础问题开始，它完美地展示了递推关系建模的核心思想。这个问题要求我们构建一个长度为 $n$ 的有效序列，其中每个元素都受其前一个元素的限制。通过思考如何从一个长度为 $n-1$ 的有效序列扩展到长度为 $n$ 的序列，我们可以直接建立一个简单的递推关系，从而揭示这类约束问题的指数增长特性。[@problem_id:1384944]", "problem": "一个远程通信哨站使用一个特殊的信号信标来传输数据。该信标可以闪烁三种不同颜色之一：琥珀色（Amber）、蓝色（Blue）或青色（Cyan）。为了确保信号易于区分并防止传感器疲劳，该系统受一个基本协议的约束：任意两次连续的闪烁不能是相同的颜色。例如，一个琥珀色-蓝色-琥珀色的序列是有效的，但一个琥珀色-琥珀色-蓝色的序列是无效的。\n\n设 $S_n$ 表示长度为 $n$ 的不同有效信号序列的总数，其中 $n$ 是一个正整数。你的任务是找出 $S_n$ 关于 $n$ 的闭式表达式。", "solution": "我们将每个长度为 $n$ 的信号序列建模为一个有序 $n$ 元组，其颜色从对应于琥珀色、蓝色和青色的集合 $\\{A,B,C\\}$ 中选取，并满足任意两个连续条目不相等的约束条件。\n\n对于第一个位置，有 $3$ 种选择，因为三种颜色中的任何一种都可以使用。对于每个后续位置 $i$（其中 $2 \\leq i \\leq n$），位置 $i$ 的颜色必须与位置 $i-1$ 的颜色不同。由于总共有 $3$ 种颜色，并且恰好有 $1$ 种被禁止（即紧邻的前一个颜色），因此对于每个这样的位置，都有 $3-1=2$ 种有效的选择。\n\n根据乘法法则，有效序列的总数为\n$$\nS_{n} = 3 \\cdot \\underbrace{2 \\cdot 2 \\cdots 2}_{n-1\\ \\text{个因子}} = 3 \\cdot 2^{n-1}.\n$$\n\n等价地，也可以通过递推关系来表达。设 $S_{1} = 3$，因为单次闪烁可以是三种颜色中的任意一种。当 $n \\geq 2$ 时，每个长度为 $n-1$ 的有效序列都可以通过 $2$ 种方式扩展为一个长度为 $n$ 的有效序列（选择与最后一个颜色不同的任意一种颜色），从而得到\n$$\nS_{n} = 2 S_{n-1}.\n$$\n解此一阶线性递推关系可得\n$$\nS_{n} = S_{1} \\cdot 2^{n-1} = 3 \\cdot 2^{n-1}.\n$$\n\n因此，闭式表达式为 $S_{n} = 3 \\cdot 2^{n-1}$。", "answer": "$$\\boxed{3 \\cdot 2^{n-1}}$$", "id": "1384944"}, {"introduction": "在掌握了基本递推模型后，我们来挑战一个更复杂的情景。在这个练习中，达到一个目标总和 $n$ 的方式取决于构成该总和的最后一个元素。这种“向后看”的思路是解决许多组合问题的关键，它引导我们通过将问题分解为几个更小的、相互排斥的子问题来构建递推关系。[@problem_id:1384939]", "problem": "在某款电子游戏中，玩家可以通过三种招式得分：“快速攻击”得 1 分，“重击”得 2 分，以及“特殊招式”得 5 分。玩家的总分是其所用招式序列的得分总和。招式的顺序是重要的。例如，序列（快速攻击，重击）与序列（重击，快速攻击）是不同的，尽管两者的总分都是 3 分。求玩家为了获得恰好 10 分的总分，可以使用的不同招式序列的总数。", "solution": "令 $a(n)$ 表示得分为 $n$ 的不同有序招式序列的数量，其中允许的招式分值为 $1$、$2$ 和 $5$。考虑一个序列中的最后一个招式，任何总分为 $n$ 的序列都以分值为 $1$、$2$ 或 $5$ 的招式结尾。去掉这最后一个招式后，会分别留下一个总分为 $n-1$、$n-2$ 或 $n-5$ 的有效序列。这给出了线性递推关系\n$$\na(n)=a(n-1)+a(n-2)+a(n-5),\n$$\n初始条件为 $a(0)=1$（空序列）以及当 $n<0$ 时 $a(n)=0$。\n\n依次计算：\n$$\na(1)=a(0)+a(-1)+a(-4)=1+0+0=1,\n$$\n$$\na(2)=a(1)+a(0)+a(-3)=1+1+0=2,\n$$\n$$\na(3)=a(2)+a(1)+a(-2)=2+1+0=3,\n$$\n$$\na(4)=a(3)+a(2)+a(-1)=3+2+0=5,\n$$\n$$\na(5)=a(4)+a(3)+a(0)=5+3+1=9,\n$$\n$$\na(6)=a(5)+a(4)+a(1)=9+5+1=15,\n$$\n$$\na(7)=a(6)+a(5)+a(2)=15+9+2=26,\n$$\n$$\na(8)=a(7)+a(6)+a(3)=26+15+3=44,\n$$\n$$\na(9)=a(8)+a(7)+a(4)=44+26+5=75,\n$$\n$$\na(10)=a(9)+a(8)+a(5)=75+44+9=128.\n$$\n因此，总分为 $10$ 的不同有序序列的总数为 $128$。", "answer": "$$\\boxed{128}$$", "id": "1384939"}, {"introduction": "当问题的约束变得依赖于状态时，单个递推关系可能不足以描述整个系统。这个练习引入了一种更强大的技术：构造递推关系系统。通过为序列的不同结尾（或状态）定义不同的计数器，我们可以精确地对包含“禁止子串”等复杂规则的系统进行建模，这展示了状态变量在组合建模中的威力。[@problem_id:1384925]", "problem": "一个数字通信系统将信息编码为从字母表 {0, 1, 2} 中抽取的符号序列。接收器中的一个特定硬件限制，导致其在遇到子序列 '12' 时会发生故障。因此，为了信息能够成功传输，其对应的符号序列必须不包含 '12' 作为连续子串。\n\n确定长度为 $n=5$ 的有效序列的总数。", "solution": "我们计算在字母表 $\\{0,1,2\\}$ 上，长度为 $n$ 且避免连续子串 $12$ 的序列的数量。该约束仅限制在符号 $1$ 之后不能立即选择 $2$。只需追踪最后一个符号是否为 $1$ 即可。\n\n定义：\n- $s_{n}$: 长度为 $n$ 且以 $1$ 结尾的有效序列的数量，\n- $t_{n}$: 长度为 $n$ 且以不等于 $1$ 的符号（即 $0$ 或 $2$）结尾的有效序列的数量，\n- $f_{n} = s_{n} + t_{n}$: 长度为 $n$ 的有效序列的总数。\n\n从长度 $n$ 到 $n+1$ 的转移：\n- 对于一个计入 $s_{n}$ 的序列（最后一个符号是 $1$），下一个符号可以是 $0$ 或 $1$（但不能是 $2$）。于是\n$$\ns_{n+1} \\leftarrow s_{n} \\text{（选择 1）}, \\quad t_{n+1} \\leftarrow s_{n} \\text{（选择 0）}。\n$$\n- 对于一个计入 $t_{n}$ 的序列（最后一个符号是 $0$ 或 $2$），下一个符号可以是 $0$、$1$ 或 $2$。选择 $1$ 会得到计入 $s_{n+1}$ 的序列，而选择 $0$ 或 $2$ 会得到计入 $t_{n+1}$ 的序列。于是\n$$\ns_{n+1} \\leftarrow t_{n} \\text{（选择 1）}, \\quad t_{n+1} \\leftarrow 2 t_{n} \\text{（选择 0 或 2）}。\n$$\n\n因此，递推关系和初始条件为：\n$$\ns_{n+1} = s_{n} + t_{n}, \\quad t_{n+1} = s_{n} + 2 t_{n}, \\quad s_{1} = 1, \\quad t_{1} = 2, \\quad f_{n} = s_{n} + t_{n}.\n$$\n\n迭代计算至 $n=5$：\n$$\n\\begin{aligned}\nn=1:&\\quad s_{1}=1,\\quad t_{1}=2,\\quad f_{1}=3.\\\\\nn=2:&\\quad s_{2}=s_{1}+t_{1}=1+2=3,\\quad t_{2}=s_{1}+2t_{1}=1+4=5,\\quad f_{2}=3+5=8.\\\\\nn=3:&\\quad s_{3}=s_{2}+t_{2}=3+5=8,\\quad t_{3}=s_{2}+2t_{2}=3+10=13,\\quad f_{3}=8+13=21.\\\\\nn=4:&\\quad s_{4}=s_{3}+t_{3}=8+13=21,\\quad t_{4}=s_{3}+2t_{3}=8+26=34,\\quad f_{4}=21+34=55.\\\\\nn=5:&\\quad s_{5}=s_{4}+t_{4}=21+34=55,\\quad t_{5}=s_{4}+2t_{4}=21+68=89,\\quad f_{5}=55+89=144.\n\\end{aligned}\n$$\n\n因此，长度为 $5$ 的有效序列数量为 $f_{5}=144$。", "answer": "$$\\boxed{144}$$", "id": "1384925"}]}
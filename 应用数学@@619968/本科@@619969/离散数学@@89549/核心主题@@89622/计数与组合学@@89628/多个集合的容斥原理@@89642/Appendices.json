{"hands_on_practices": [{"introduction": "我们的第一个练习是容斥原理在数论中的一个经典应用。我们将计算具有特定性质的整数数量，这让我们能够纯粹地专注于应用三个集合的容斥公式。这个练习将帮助你巩固如何识别集合及其各种交集，并处理集合之间存在的非独立关系（例如，所有四次方数都是平方数）。[@problem_id:1409760]", "problem": "考虑从 1 到 1,000,000（含）的整数集合。如果一个整数是完全平方数、或完全立方数、或完全四次方数，则它被定义为“幂数”。计算在此范围内不同的幂数的总数。", "solution": "令 $S$ 为 $\\{1,2,\\ldots,10^{6}\\}$ 中完全平方数的集合，$C$ 为完全立方数的集合，$F$ 为完全四次方数的集合。不同幂数的总数是集合 $|S \\cup C \\cup F|$ 的基数，可以通过容斥原理计算：\n$$\n|S \\cup C \\cup F| = |S| + |C| + |F| - |S \\cap C| - |S \\cap F| - |C \\cap F| + |S \\cap C \\cap F|.\n$$\n每一项的值由满足 $n^{k} \\leq 10^{6}$ 的最大整数 $n$ 决定，其中 $k$ 是相关的指数：\n- 平方数：$|S| = \\left\\lfloor \\sqrt{10^{6}} \\right\\rfloor = 1000$。\n- 立方数：$|C| = \\left\\lfloor (10^{6})^{1/3} \\right\\rfloor = 100$。\n- 四次方数：$|F| = \\left\\lfloor (10^{6})^{1/4} \\right\\rfloor = 31$。\n\n交集对应于公共幂，其指数等于所涉及指数的最小公倍数：\n- 平方数和立方数（六次方数）：$|S \\cap C| = \\left\\lfloor (10^{6})^{1/6} \\right\\rfloor = 10$。\n- 平方数和四次方数：由于每个四次方数都是平方数，所以 $|S \\cap F| = |F| = 31$。\n- 立方数和四次方数（十二次方数）：$|C \\cap F| = \\left\\lfloor (10^{6})^{1/12} \\right\\rfloor = \\left\\lfloor 10^{1/2} \\right\\rfloor = 3$。\n- 三者交集（也是十二次方数）：$|S \\cap C \\cap F| = \\left\\lfloor (10^{6})^{1/12} \\right\\rfloor = 3$。\n\n代入容斥原理公式：\n$$\n|S \\cup C \\cup F| = 1000 + 100 + 31 - 10 - 31 - 3 + 3 = 1090.\n$$", "answer": "$$\\boxed{1090}$$", "id": "1409760"}, {"introduction": "接下来，我们将把该原理应用到一个常见的组合学场景中：分配不同的物品。这个问题要求你将分配任务看作是函数，并根据哪些接收者被“排除”来定义性质。这是一个很好的例子，说明了容斥原理如何通过系统地减去多算的部分来解决初看之下似乎很复杂的问题。[@problem_id:1409737]", "problem": "在一家软件开发公司，一个质量保证团队由四名工程师组成：Alice、Bob、Carol和Dave。有 10 个新的、不同的软件模块必须分配给这些工程师进行测试。每个模块只能分配给一名工程师，而每位工程师可以被分配任意数量的模块，包括零个。团队负责人需要计算有多少种可能的分配方案，使得三位高级工程师——Alice、Bob 或 Carol——中至少有一人没有收到任何测试模块。Dave 是一名初级工程师，不包含在这一特定条件中。根据此标准，确定分配这 10 个不同模块的总方法数。", "solution": "我们将 10 个不同的模块分配给四名标记的工程师 Alice (A)、Bob (B)、Carol (C) 和 Dave (D) 的每一种分配方式建模。每个模块独立地选择四名工程师中的一名，因此总分配数为 $4^{10}$，不过我们将直接计算满足条件的分配数。\n\n设 $E_{A}$ 为 Alice 未收到任何模块的事件，$E_{B}$ 为 Bob 未收到任何模块的事件，$E_{C}$ 为 Carol 未收到任何模块的事件。我们需要计算 $|E_{A} \\cup E_{B} \\cup E_{C}|$ 中的分配数量。\n\n我们应用容斥原理：\n$$\n|E_{A} \\cup E_{B} \\cup E_{C}| = |E_{A}| + |E_{B}| + |E_{C}| - |E_{A} \\cap E_{B}| - |E_{A} \\cap E_{C}| - |E_{B} \\cap E_{C}| + |E_{A} \\cap E_{B} \\cap E_{C}|.\n$$\n\n通过计算每个模块的选择数量来计算每一项：\n- 如果 Alice 未收到任何模块，则每个模块可以分配给 $\\{B,C,D\\}$ 中的一个，得到 $|E_{A}| = 3^{10}$。类似地， $|E_{B}| = 3^{10}$ 和 $|E_{C}| = 3^{10}$。\n- 如果 Alice 和 Bob 均未收到任何模块，则每个模块可以分配给 $\\{C,D\\}$ 中的一个，得到 $|E_{A} \\cap E_{B}| = 2^{10}$。类似地， $|E_{A} \\cap E_{C}| = 2^{10}$ 和 $|E_{B} \\cap E_{C}| = 2^{10}$。\n- 如果 Alice、Bob 和 Carol 均未收到任何模块，则每个模块都必须分配给 Dave，得到 $|E_{A} \\cap E_{B} \\cap E_{C}| = 1^{10} = 1$。\n\n代入容斥原理公式：\n$$\n|E_{A} \\cup E_{B} \\cup E_{C}| = 3 \\cdot 3^{10} - 3 \\cdot 2^{10} + 1 = 3^{11} - 3 \\cdot 2^{10} + 1.\n$$\n\n这就是 Alice、Bob 或 Carol 中至少有一人未收到任何模块，而对 Dave 没有限制的总分配数。", "answer": "$$\\boxed{3^{11}-3\\cdot 2^{10}+1}$$", "id": "1409737"}, {"introduction": "我们最后的练习题深入探讨了具有复杂约束条件的排列问题。与简单情况不同，这里的条件以一种非对称的方式重叠（例如，数字 $2$ 同时出现在第一个和第二个条件中），这要求对交集进行仔细分析。解决这个问题将磨练你处理复杂依赖关系的能力，并展示容斥原理的真正威力与灵活性。[@problem_id:1409717]", "problem": "一家公司正在开发一种新的高安全性键盘系统。一个访问代码由数字 $\\{1, 2, 3, 4, 5, 6, 7, 8\\}$ 的一个排列组成。集合 $S$ 的一个排列是从 $S$ 到自身的双射函数，这意味着 $S$ 中的每个元素在序列中恰好出现一次。例如，$(3, 1, 4, 2, 5, 6, 7, 8)$ 就是一个有效的排列。\n\n在一次安全审计中，发现了一个漏洞。如果输入的代码满足以下至少一个条件，系统就容易受到旁道攻击：\n1. 代码的第一个数字是 1 或 2。\n2. 代码的第二个数字是 2 或 3。\n3. 代码的第三个数字是 3 或 4。\n\n任何满足一个或多个这些条件的代码都被归类为“不安全”。你的任务是确定不安全代码的总数。", "solution": "设 $S=\\{1,2,3,4,5,6,7,8\\}$ 并考虑 $S$ 的所有排列。代码的总数是 $8!$。定义事件：\n- $A$：第一个数字是 $1$ 或 $2$，\n- $B$：第二个数字是 $2$ 或 $3$，\n- $C$：第三个数字是 $3$ 或 $4$。\n\n我们通过容斥原理来求解不安全代码的数量 $|A \\cup B \\cup C|$：\n$$\n|A \\cup B \\cup C|=|A|+|B|+|C|-|A \\cap B|-|A \\cap C|-|B \\cap C|+|A \\cap B \\cap C|.\n$$\n\n计算每一项：\n- $|A|=2 \\cdot 7!$ 因为第一个数字可以是 $1$ 或 $2$，剩下的 $7$ 个数字可以任意排列。\n- $|B|=2 \\cdot 7!$ 且 $|C|=2 \\cdot 7!$，对于第二和第三个位置的推理相同。\n\n对于交集：\n- $|A \\cap B|$：数字不同的有序对$(\\text{第一位},\\text{第二位})$可以是 $(1,2)$, $(1,3)$, $(2,3)$，给出 $3$ 种选择，然后剩下位置有 $6!$ 种排列，所以 $|A \\cap B|=3 \\cdot 6!$。\n- $|A \\cap C|$：$(\\text{第一位},\\text{第三位})$可以是 $(1,3)$, $(1,4)$, $(2,3)$, $(2,4)$，产生 $4$ 种选择，剩下位置有 $6!$ 种排列，所以 $|A \\cap C|=4 \\cdot 6!$。\n- $|B \\cap C|$：$(\\text{第二位},\\text{第三位})$可以是 $(2,3)$, $(2,4)$, $(3,4)$，给出 $3$ 种选择和 $6!$ 种排列，所以 $|B \\cap C|=3 \\cdot 6!$。\n- $|A \\cap B \\cap C|$：从集合中选出数字不同的有效三元组$(\\text{第一位},\\text{第二位},\\text{第三位})$可以是 $(1,2,3)$, $(1,2,4)$, $(1,3,4)$, $(2,3,4)$，给出 $4$ 种选择，剩下位置有 $5!$ 种排列，所以 $|A \\cap B \\cap C|=4 \\cdot 5!$。\n\n代入容斥原理公式：\n$$\n|A \\cup B \\cup C|=6 \\cdot 7!- (3+4+3) \\cdot 6! + 4 \\cdot 5! = 6 \\cdot 7! - 10 \\cdot 6! + 4 \\cdot 5!.\n$$\n提取因子 $5!$：\n$$\n|A \\cup B \\cup C|=6 \\cdot 42 \\cdot 5! - 10 \\cdot 6 \\cdot 5! + 4 \\cdot 5! = (252 - 60 + 4) \\cdot 5! = 196 \\cdot 5!.\n$$\n计算 $5!=120$ 得出 $196 \\times 120 = 23520$。因此，不安全代码的数量是 23520。", "answer": "$$\\boxed{23520}$$", "id": "1409717"}]}
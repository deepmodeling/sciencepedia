{"hands_on_practices": [{"introduction": "这个练习将广义鸽巢原理应用于一个经典的计算机科学问题：分布式数据库中的负载均衡。通过将用户建模为“鸽子”，将数据库分片建模为“鸽巢”，你可以确定为保证至少一个分片达到特定容量所需的最小用户数。这个实践展示了该原理如何为预测最坏情况和确保系统稳定性提供一个强有力的工具。[@problem_id:1409193]", "problem": "一个大型社交媒体平台采用数据库分片架构来分布其用户数据。该系统由 $S = 16$ 个不同的数据库分片组成，其索引从0到15。当一个新用户注册时，其账户会被分配一个唯一的正整数作为用户ID。系统随后会根据以下规则将该用户的数据分配到一个特定的分片：ID为 $U$ 的用户被放入索引为 $I = U \\pmod S$ 的分片中。\n\n一个工程团队正在分析系统负载。他们需要确定必须创建的新用户账户的最小数量，以保证至少有一个分片将负责存储至少 $C = 10$ 名新用户的数据。这个新用户账户的最小数量是多少？", "solution": "我们将该分配建模为根据 $I \\equiv U \\pmod{S}$ 将新用户放入 $S$ 个分片的过程。这会将用户划分到模 $S$ 的 $S$ 个剩余类中，因此分析负载就简化为将 $N$ 个新用户分配到 $S$ 个分片中的问题。\n\n根据鸽巢原理：如果将 $N$ 个物品放入 $S$ 个盒子中，那么至少有一个盒子包含至少 $\\left\\lceil \\frac{N}{S} \\right\\rceil$ 个物品。等价地，为避免任何一个盒子中有 $C$ 个或更多物品，可以在 $S$ 个盒子中的每个盒子内最多放置 $C-1$ 个物品，总计为\n$S(C-1)$\n个物品。因此，如果 $N = S(C-1) + 1$，那么就保证了至少有一个分片包含至少 $C$ 个用户。\n\n因此，所需的最小数量为\n$$\nN_{\\min} = S(C-1) + 1.\n$$\n代入 $S = 16$ 和 $C = 10$ 得，\n$$\nN_{\\min} = 16(10 - 1) + 1 = 16 \\cdot 9 + 1 = 144 + 1 = 145.\n$$\n因此，需要 $145$ 个新用户账户才能保证至少有一个分片存储了至少 $10$ 名新用户的数据。", "answer": "$$\\boxed{145}$$", "id": "1409193"}, {"introduction": "现实世界中的物体通常具有多个属性，应用鸽巢原理需要我们考虑所有可能的组合。这个问题挑战你首先通过组合制造的LED的两种不同特性——质量等级和分类寿命——来定义“鸽巢”。这个练习将磨练你在应用广义鸽巢原理以找到一个保证性结果之前，系统地识别和计算分类的技能。[@problem_id:1407938]", "problem": "一家大型电子制造商生产发光二极管（LED），这些LED被分为三个不同的质量等级：“优质”、“标准”和“经济”。生产后，每个LED的工作寿命都会经过测试。这些设备可能的寿命范围从10,000小时到14,999小时（含两端）。出于库存管理的目的，记录的寿命总是向下取整到最接近的100小时的倍数。例如，一个测试寿命为12,345小时的LED和一个寿命为12,389小时的LED，都会被归类为具有12,300小时的寿命。\n\n一位质量控制经理负责检查一批包含所有三个等级LED的大型混合货物。该经理必须从这批货物中随机抽取多少个LED，才能绝对保证他们收集到至少25个具有完全相同的质量等级和相同的归类寿命的LED？", "solution": "设可能的归类寿命集合为10000到14900之间（含两端）100的倍数。这是一个等差数列，其首项为 $a_{1}=10000$，末项为 $a_{n}=14900$，公差为 $d=100$。此类寿命类别的数量为\n$$\nn=\\frac{a_{n}-a_{1}}{d}+1=\\frac{14900-10000}{100}+1=49+1=50.\n$$\n共有三个质量等级。因此，不同的组合类别（等级与归类寿命相结合）的数量为\n$$\n3 \\times 50=150.\n$$\n根据鸽巢原理，为避免任何单个类别中有$25$个LED，在$150$个类别中的每个类别中最多可以有$24$个，总计为\n$24 \\times 150=3600$\n个LED。因此，再多抽取一个LED，就能保证某个类别中至少包含$25$个LED。所以，所需的最小数量是\n$$\n3600+1=3601.\n$$", "answer": "$$\\boxed{3601}$$", "id": "1407938"}, {"introduction": "广义鸽巢原理不仅限于对有形物体进行计数；它是在抽象数学中证明存在性的基本工具。这个问题将该原理扩展到图论领域，你将分析具有特定约束的图中顶点的度。通过将顶点视为“鸽子”，将其可能的度视为“鸽巢”，你可以揭示一个关于图的某种必然存在的结构性规律。[@problem_id:1407930]", "problem": "简单图是一种无向图，它不含自环（连接顶点自身的边）和重边（连接同一对顶点的多条边）。在这种图中，一个顶点的度是与它关联的边的数量。\n\n考虑一个有26个顶点的简单图。该图的设计受限于一个条件：每个顶点的度都必须是5到15之间（含）的整数。\n\n假设存在这样的图，那么保证至少有多少个顶点具有相同的度？你的答案应该是一个整数。", "solution": "设 $G$ 是一个有 $n=26$ 个顶点的简单图，其所有顶点的度都限制在集合 $\\{5,6,\\dots,15\\}$ 中，该集合有 $11$ 个不同的度值。\n\n根据鸽巢原理，如果将26个顶点分配到11个可能的度值中，那么至少有\n$$\n\\left\\lceil \\frac{26}{11} \\right\\rceil = 3\n$$\n个顶点必须具有相同的度。因此，在任何这样的图中，至少有3个顶点具有相同的度。\n\n为了证明这个界是紧的（即不能保证有4个），我们只需构造一个包含26个顶点的可图度序列，其度值仅在 $\\{5,\\dots,15\\}$ 范围内，且没有一个度出现的次数超过3次。\n\n考虑一个按非递增顺序排列的度数多重集：\n$$\n15,15,\\;\n14,14,\\;\n13,13,13,\\;\n12,12,\\;\n11,11,11,\\;\n10,10,\\;\n9,9,\\;\n8,8,8,\\;\n7,7,\\;\n6,6,6,\\;\n5,5.\n$$\n在这里，度 $6,8,11,13$ 各出现3次，度 $5,7,9,10,12,14,15$ 各出现2次。这总共有 $4\\cdot 3 + 7\\cdot 2 = 26$ 个顶点，并且每个度都在 $[5,15]$ 区间内。奇度顶点的数量为 $(3+3) + (2+2+2+2) = 14$，是偶数，因此满足握手引理的奇偶性条件。度数和为\n$$\n2(5+7+9+10+12+14+15)+3(6+8+11+13)=144+114=258,\n$$\n是偶数，符合要求。\n\n我们现在使用 Erdős–Gallai 定理来验证这个序列是可图的。设该序列为 $d_{1}\\geq d_{2}\\geq \\dots \\geq d_{26}$，其值为所列出的值，并令\n$$\nH(k)=\\sum_{i=1}^{k} d_{i},\\qquad T(k)=\\sum_{i=k+1}^{26} \\min(d_{i},k).\n$$\nErdős–Gallai 定理指出，该序列是可图的，当且仅当对于每一个 $k\\in\\{1,\\dots,26\\}$，\n$$\n\\sum_{i=1}^{k} d_{i} \\leq k(k-1) + \\sum_{i=k+1}^{26} \\min(d_{i},k),\n$$\n即，\n$$\nH(k) \\leq k(k-1)+T(k).\n$$\n我们从显示的序列中计算前缀和 $H(k)$：\n$$\n\\begin{aligned}\n&H(1)=15,\\;H(2)=30,\\;H(3)=44,\\;H(4)=58,\\;H(5)=71,\\;H(6)=84,\\;H(7)=97,\\;H(8)=109,\\;H(9)=121,\\\\\n&H(10)=132,\\;H(11)=143,\\;H(12)=154,\\;H(13)=164,\\;H(14)=174,\\;H(15)=183,\\;H(16)=192,\\;H(17)=200,\\\\\n&H(18)=208,\\;H(19)=216,\\;H(20)=223,\\;H(21)=230,\\;H(22)=236,\\;H(23)=242,\\;H(24)=248,\\;H(25)=253,\\;H(26)=258.\n\\end{aligned}\n$$\n我们如下计算 $T(k)$：\n- 对于 $k\\leq 5$，由于所有尾部度数都至少为 $5\\geq k$，我们有 $T(k)=k(26-k)$，所以\n$$\nk=1:\\;R=25,\\quad k=2:\\;R=50,\\quad k=3:\\;R=75,\\quad k=4:\\;R=100,\\quad k=5:\\;R=125,\n$$\n其中 $R=k(k-1)+T(k)=25k$。在每种情况下，$H(k)\\leq R$ 都成立： $15\\leq 25$, $30\\leq 50$, $44\\leq 75$, $58\\leq 100$, $71\\leq 125$。\n- 对于 $6\\leq k\\leq 15$，写出\n$$\nT(k)=k(26-k)-\\sum_{i=k+1}^{26} (k-d_{i})_{+},\n$$\n其中 $(x)_{+}=\\max(x,0)$；修正项只计算来自小于 $k$ 的尾部度数的贡献。对每个 $k$ 使用尾部构成：\n$$\n\\begin{aligned}\nk=6:&\\; \\text{只有度为5的项有贡献：}2\\cdot(6-5)=2,\\;\\;T=6\\cdot 20 - 2=118,\\;\\;R=30+118=148,\\;\\;H(6)=84\\leq 148;\\\\\nk=7:&\\; \\text{度为5,6的项：}2\\cdot 2 + 3\\cdot 1=7,\\;\\;T=7\\cdot 19 - 7=126,\\;\\;R=42+126=168,\\;\\;H(7)=97\\leq 168;\\\\\nk=8:&\\; \\text{度为5,6,7的项：}2\\cdot 3 + 3\\cdot 2 + 2\\cdot 1=14,\\;\\;T=8\\cdot 18 - 14=130,\\;\\;R=56+130=186,\\;\\;H(8)=109\\leq 186;\\\\\nk=9:&\\; \\text{度为5,6,7,8的项：}2\\cdot 4 + 3\\cdot 3 + 2\\cdot 2 + 3\\cdot 1=24,\\;\\;T=9\\cdot 17 - 24=129,\\;\\;R=72+129=201,\\;\\;H(9)=121\\leq 201;\\\\\nk=10:&\\; \\text{度为5,6,7,8,9的项：}2\\cdot 5 + 3\\cdot 4 + 2\\cdot 3 + 3\\cdot 2 + 2\\cdot 1=36,\\\\\n&\\;T=10\\cdot 16 - 36=124,\\;\\;R=90+124=214,\\;\\;H(10)=132\\leq 214;\\\\\nk=11:&\\; \\text{度为5,6,7,8,9,10的项：}2\\cdot 6 + 3\\cdot 5 + 2\\cdot 4 + 3\\cdot 3 + 2\\cdot 2 + 2\\cdot 1=50,\\\\\n&\\;T=11\\cdot 15 - 50=115,\\;\\;R=110+115=225,\\;\\;H(11)=143\\leq 225;\\\\\nk=12:&\\; \\text{度为5,6,7,8,9,10的项：}2\\cdot 7 + 3\\cdot 6 + 2\\cdot 5 + 3\\cdot 4 + 2\\cdot 3 + 2\\cdot 2=64,\\\\\n&\\;T=12\\cdot 14 - 64=104,\\;\\;R=132+104=236,\\;\\;H(12)=154\\leq 236.\n\\end{aligned}\n$$\n- 对于 $k\\geq 13$，所有尾部度数最多为 $15$，而对于 $k\\geq 15$，对于所有尾部项，显然有 $\\min(d_{i},k)=d_{i}$。事实上，对于所列出的 $k=13,14$，尾部不包含超过 $k$ 的项，所以 $T(k)=\\sum_{i=k+1}^{26} d_{i}=258-H(k)$。因此对于 $k\\in\\{13,14,\\dots,26\\}$，\n$$\nR=k(k-1)+T(k)=k(k-1)+258-H(k),\n$$\n我们验证：\n$$\n\\begin{aligned}\n&k=13:\\;R=156+94=250,\\;\\;H(13)=164\\leq 250;\\\\\n&k=14:\\;R=182+84=266,\\;\\;H(14)=174\\leq 266;\\\\\n&k=15:\\;R=210+75=285,\\;\\;H(15)=183\\leq 285;\\\\\n&k=16:\\;R=240+66=306,\\;\\;H(16)=192\\leq 306;\\\\\n&k=17:\\;R=272+58=330,\\;\\;H(17)=200\\leq 330;\\\\\n&k=18:\\;R=306+50=356,\\;\\;H(18)=208\\leq 356;\\\\\n&k=19:\\;R=342+42=384,\\;\\;H(19)=216\\leq 384;\\\\\n&k=20:\\;R=380+35=415,\\;\\;H(20)=223\\leq 415;\\\\\n&k=21:\\;R=420+28=448,\\;\\;H(21)=230\\leq 448;\\\\\n&k=22:\\;R=462+22=484,\\;\\;H(22)=236\\leq 484;\\\\\n&k=23:\\;R=506+16=522,\\;\\;H(23)=242\\leq 522;\\\\\n&k=24:\\;R=552+10=562,\\;\\;H(24)=248\\leq 562;\\\\\n&k=25:\\;R=600+5=605,\\;\\;H(25)=253\\leq 605;\\\\\n&k=26:\\;R=650+0=650,\\;\\;H(26)=258\\leq 650.\n\\end{aligned}\n$$\n\n所有 Erdős–Gallai 不等式均成立，所以该度序列是可图的。在这个实现中，没有一个度出现的次数超过3次。因此，所有度的重数最多为3是可能的，从而不能保证有4个顶点具有相同的度。\n\n结合鸽巢原理得到的下界3和这个紧的例子，保证具有相同度的顶点的最小数量恰好是3。", "answer": "$$\\boxed{3}$$", "id": "1407930"}]}
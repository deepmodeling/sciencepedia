{"hands_on_practices": [{"introduction": "这个入门练习将介绍概率分析中的一项基石技术：期望的线性性。我们将通过使用指示变量将一个初看起来很复杂的问题——计算网络中同色边的数量——分解成可管理的部分。这个练习将展示总和的期望值等于期望值的总和，无论这些变量是否独立，这是一个极其强大的性质。[@problem_id:1369264]", "problem": "考虑一个由 $n$ 个节点组成的简单全连接计算机网络模型，其中 $n \\geq 2$。使用一个完全图 $K_n$ 来表示这个网络，其中顶点是节点，边表示每对节点之间的直接通信链路。网络中的每个节点被独立地分配一个状态，即“活动”或“空闲”，每个状态的概率均为 $\\frac{1}{2}$。如果网络中的一条边所连接的两个节点处于相同的状态（即，都处于活动状态或都处于空闲状态），则该边被定义为“单色的”。\n\n确定网络中单色边数量的期望值，并用 $n$ 表示成一个闭式表达式。", "solution": "设 $K_{n}$ 是一个有 $n$ 个顶点的完全图。边的总数为 $\\binom{n}{2}$。为每个顶点独立地分配两种状态之一，“活动”或“空闲”，每种状态的概率均为 $\\frac{1}{2}$。\n\n对每条边 $e$ 定义指示随机变量 $I_{e}$，如果 $e$ 是单色的（其端点处于相同状态），则 $I_{e}=1$，否则 $I_{e}=0$。单色边的总数 $X$ 为\n$$\nX=\\sum_{e} I_{e},\n$$\n其中求和遍历所有 $\\binom{n}{2}$ 条边。\n\n对于任意一条固定的边 $e=\\{u,v\\}$，其为单色的概率是\n$$\n\\mathbb{P}(I_{e}=1)=\\mathbb{P}(\\text{$u$ 和 $v$ 都是活动状态})+\\mathbb{P}(\\text{$u$ 和 $v$ 都是空闲状态})=\\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right)+\\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right)=\\frac{1}{2}.\n$$\n\n根据期望的线性性质，\n$$\n\\mathbb{E}[X]=\\sum_{e} \\mathbb{E}[I_{e}]=\\sum_{e} \\mathbb{P}(I_{e}=1)=\\binom{n}{2}\\cdot \\frac{1}{2}.\n$$\n由于 $\\binom{n}{2}=\\frac{n(n-1)}{2}$，我们得到\n$$\n\\mathbb{E}[X]=\\frac{n(n-1)}{2}\\cdot \\frac{1}{2}=\\frac{n(n-1)}{4}.\n$$", "answer": "$$\\boxed{\\frac{n(n-1)}{4}}$$", "id": "1369264"}, {"introduction": "在期望值概念的基础上，本练习将进一步探讨方差，它量化了随机变量的“离散程度”。我们将分析著名的“优惠券收集者问题”（在此设定为一个软件测试场景），不仅要确定完成任务的平均时间，还要计算这个时间的变化程度。这个问题完美地展示了如何将一个复杂过程分解为一系列独立的几何随机变量，从而直接计算出期望和方差。[@problem_id:1369276]", "problem": "一家软件公司正在部署一种新的机器学习算法。质量保证团队已经确定了 $n$ 个关键且不同的边界情况，这些情况必须在部署前由自动化测试系统进行验证。在每次测试运行中，系统会模拟一个场景，该场景会精确触发这 $n$ 个边界情况中的一个。对于任何给定的运行，边界情况的选择是独立的，并且是从所有 $n$ 种可能性中均匀随机选择的。\n\n设 $T$ 为一个随机变量，表示直到 $n$ 个不同的边界情况中的每一个都至少被触发一次所需的总测试运行次数。\n\n求 $T$ 的方差（记作 $\\text{Var}(T)$）关于 $n$ 的封闭形式解析表达式。你的表达式可以用求和符号来表示。", "solution": "设 $T$ 为观测到所有 $n$ 个不同边界情况所需的总测试运行次数。我们可以将这个总时间分解为一系列随机变量之和，每个随机变量代表等待每个新边界情况出现的时间。\n\n设 $T_i$ 为在已经发现 $i-1$ 个不同边界情况的条件下，找到第 $i$ 个新边界情况所需的额外测试运行次数。那么，总运行次数就是这些等待时间之和：\n$$T = T_1 + T_2 + \\dots + T_n$$\n第一次运行总是会得到一个新的边界情况，所以 $T_1 = 1$，这是一个确定性常数。\n\n现在，我们来确定当 $i > 1$ 时 $T_i$ 的分布。假设我们已经观测到了 $i-1$ 个不同的边界情况。那么还有 $n - (i-1) = n-i+1$ 个新的、未被观测到的边界情况。由于在任何一次运行中， $n$ 个边界情况中的每一个被触发的可能性都相同，所以在下一次运行中观测到一个新边界情况（一次“成功”）的概率是：\n$$p_i = \\frac{n - (i-1)}{n} = \\frac{n-i+1}{n}$$\n随机变量 $T_i$ 表示在成功概率为 $p_i$ 的一系列独立伯努利试验中，获得第一次成功所需的试验次数。这意味着 $T_i$ 服从几何分布，即 $T_i \\sim \\text{Geometric}(p_i)$。\n\n寻找下一个新边界情况的过程与之前寻找边界情况的历史是独立的。因此，随机变量 $T_1, T_2, \\dots, T_n$ 是相互独立的。独立随机变量之和的方差等于它们各自方差之和：\n$$\\text{Var}(T) = \\text{Var}\\left(\\sum_{i=1}^{n} T_i\\right) = \\sum_{i=1}^{n} \\text{Var}(T_i)$$\n一个服从几何分布 $X \\sim \\text{Geometric}(p)$ 的随机变量的方差由公式 $\\text{Var}(X) = \\frac{1-p}{p^2}$ 给出。我们将此公式应用于每个 $T_i$ 及其对应的成功概率 $p_i$：\n$$\\text{Var}(T_i) = \\frac{1-p_i}{p_i^2} = \\frac{1 - \\frac{n-i+1}{n}}{\\left(\\frac{n-i+1}{n}\\right)^2}$$\n简化分子：\n$$1 - \\frac{n-i+1}{n} = \\frac{n - (n-i+1)}{n} = \\frac{i-1}{n}$$\n将此代回方差表达式中：\n$$\\text{Var}(T_i) = \\frac{\\frac{i-1}{n}}{\\frac{(n-i+1)^2}{n^2}} = \\frac{i-1}{n} \\cdot \\frac{n^2}{(n-i+1)^2} = \\frac{n(i-1)}{(n-i+1)^2}$$\n注意当 $i=1$ 时，$\\text{Var}(T_1) = \\frac{n(1-1)}{(n-1+1)^2} = 0$，这是正确的，因为 $T_1$ 是一个常数。\n\n现在我们通过对 $\\text{Var}(T_i)$ 从 $i=1$ 到 $n$ 求和来得到总方差：\n$$\\text{Var}(T) = \\sum_{i=1}^{n} \\text{Var}(T_i) = \\sum_{i=1}^{n} \\frac{n(i-1)}{(n-i+1)^2}$$\n为了简化这个求和，我们进行一次换元。令 $k = n-i+1$。\n- 当 $i=1$ 时，$k = n-1+1=n$。\n- 当 $i=n$ 时，$k = n-n+1=1$。\n- 项 $i-1$ 可以用 $k$ 来表示：$i = n-k+1 \\Rightarrow i-1 = n-k$。\n\n将这些代入求和式中，并注意到从 $k=n$ 向下加到 $1$ 与从 $k=1$ 向上加到 $n$ 是相同的：\n$$\\text{Var}(T) = \\sum_{k=1}^{n} \\frac{n(n-k)}{k^2}$$\n我们可以将这个求和式拆分为两部分：\n$$\\text{Var}(T) = \\sum_{k=1}^{n} \\left(\\frac{n^2}{k^2} - \\frac{nk}{k^2}\\right) = \\sum_{k=1}^{n} \\frac{n^2}{k^2} - \\sum_{k=1}^{n} \\frac{n}{k}$$\n将不依赖于求和指标 $k$ 的项提取出来：\n$$\\text{Var}(T) = n^2 \\sum_{k=1}^{n} \\frac{1}{k^2} - n \\sum_{k=1}^{n} \\frac{1}{k}$$\n这就是 $T$ 的方差的最终封闭形式表达式。", "answer": "$$\\boxed{n^{2} \\sum_{k=1}^{n} \\frac{1}{k^{2}} - n \\sum_{k=1}^{n} \\frac{1}{k}}$$", "id": "1369276"}, {"introduction": "我们最后的练习将面对一个更高级、更现实的场景：计算一堆*相关*随机变量之和的方差。与前一个问题不同，这里的各个组成部分是相互关联的，这引入了协方差这一关键概念。通过分析一个特定的 2-SAT 公式中被满足的子句数量，你将学习如何应用方差的完整求和公式，即 $\\text{Var}(\\sum X_i) = \\sum \\text{Var}(X_i) + 2\\sum_{i<j} \\text{Cov}(X_i, X_j)$，并考虑变量之间的相互作用。这项技能在精确建模各组件相互影响的系统时是不可或缺的。[@problem_id:1369279]", "problem": "考虑一组 $n$ 个布尔变量 $x_1, x_2, \\dots, x_n$，其中 $n \\geq 3$。一个真值赋值是通过独立地为每个变量 $x_i$ 以 $1/2$ 的等概率设置为“真”或“假”来选择的。一个文字定义为一个变量 $x_i$ 或其否定 $\\neg x_i$。\n\n我们构造一个由 $m=n$ 个子句的逻辑与组成的布尔公式。每个子句是两个文字的逻辑或。具体来说，子句定义如下：\n- 对于从 $1$ 到 $n-1$ 的每个 $i$，子句为 $C_i = (x_i \\lor \\neg x_{i+1})$。\n- 最后一个子句是 $C_n = (x_n \\lor \\neg x_1)$。\n\n令 $X$ 为随机选择的真值赋值下被满足的子句总数的随机变量。确定 $X$ 的方差，记为 $\\text{Var}(X)$，并将其表示为关于 $n$ 的表达式。", "solution": "令 $I_{i}$ 为子句 $C_{i}$ 被满足的指示变量。那么 $X=\\sum_{i=1}^{n} I_{i}$。我们使用\n$$\n\\text{Var}(X)=\\sum_{i=1}^{n} \\text{Var}(I_{i})+2\\sum_{1 \\leq i<j \\leq n} \\text{Cov}(I_{i},I_{j}).\n$$\n\n每个子句 $C_{i}=(x_{i}\\lor \\neg x_{i+1})$ 仅在 $(x_{i},x_{i+1})=(0,1)$ 时为假。由于变量是独立且公平的，\n$$\n\\mathbb{P}(C_{i}\\ \\text{is satisfied})=1-\\mathbb{P}(x_{i}=0,x_{i+1}=1)=1-\\frac{1}{4}=\\frac{3}{4}.\n$$\n因此\n$$\n\\mathbb{E}[I_{i}]=\\frac{3}{4},\\qquad \\text{Var}(I_{i})=\\frac{3}{4}\\left(1-\\frac{3}{4}\\right)=\\frac{3}{16}.\n$$\n\n对于子句不共享变量的 $i$ 和 $j$（即，在模 $n$ 意义下，$j\\notin\\{i-1,i+1\\}$），指示变量 $I_{i}$ 和 $I_{j}$ 依赖于不相交的独立变量集，因此它们是独立的，并且\n$$\n\\text{Cov}(I_{i},I_{j})=0.\n$$\n\n剩下的任务是计算 $\\text{Cov}(I_{i},I_{i+1})$。令 $a=x_{i}$，$b=x_{i+1}$ 和 $c=x_{i+2}$。那么 $I_{i}=1$ 除非 $(a,b)=(0,1)$，并且 $I_{i+1}=1$ 除非 $(b,c)=(0,1)$。这两个坏事件 $(a=0,b=1)$ 和 $(b=0,c=1)$ 是不相交的，因为它们分别要求 $b=1$ 和 $b=0$。因此，\n$$\n\\mathbb{P}(I_{i}=1,\\ I_{i+1}=1)=1-\\mathbb{P}(a=0,b=1)-\\mathbb{P}(b=0,c=1)=1-\\frac{1}{4}-\\frac{1}{4}=\\frac{1}{2}.\n$$\n于是，\n$$\n\\mathbb{E}[I_{i}I_{i+1}]=\\frac{1}{2},\\qquad \\text{Cov}(I_{i},I_{i+1})=\\mathbb{E}[I_{i}I_{i+1}]-\\mathbb{E}[I_{i}]\\mathbb{E}[I_{i+1}]=\\frac{1}{2}-\\left(\\frac{3}{4}\\right)^{2}=-\\frac{1}{16}.\n$$\n\n在这个环上，恰好有 $n$ 个相邻对贡献了此协方差：$(1,2),(2,3),\\dots,(n-1,n),(n,1)$。所以，\n$$\n\\text{Var}(X)=n\\cdot \\frac{3}{16}+2\\cdot n\\left(-\\frac{1}{16}\\right)=\\frac{3n}{16}-\\frac{2n}{16}=\\frac{n}{16}.\n$$", "answer": "$$\\boxed{\\frac{n}{16}}$$", "id": "1369279"}]}
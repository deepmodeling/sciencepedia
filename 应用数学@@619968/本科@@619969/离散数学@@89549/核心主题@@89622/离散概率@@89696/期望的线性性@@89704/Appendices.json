{"hands_on_practices": [{"introduction": "这个练习是探索期望线性性质的绝佳起点。我们将一个看似复杂的问题——计算环形项链上特定模式的期望数量——分解为一系列简单的、可管理的独立事件。通过为每个潜在的“扣环”定义一个指示器变量，我们可以利用期望的线性性质，即使这些事件本身并不完全独立 [@problem_id:1381835]。这个方法展示了如何将一个宏观的计数问题转化为对微观概率的求和。", "problem": "一条圆形项链由 $n$ 颗珠子构成，其中 $n$ 是一个大于或等于 2 的整数。珠子被排列成一个圆环。对于项链上的 $n$ 个位置中的每一个，都独立地选择一颗珠子。任何一颗珠子是黑色的概率为 $p$，是白色的概率为 $1-p$。一个特殊装饰，称为“扣环”，由一对相邻的珠子形成，即当顺时针方向观察项链时，一颗黑色珠子紧跟着一颗白色珠子。确定项链上扣环的期望数量。你的答案应该是一个关于 $n$ 和 $p$ 的解析表达式。", "solution": "将项链上的 $n$ 个位置按顺时针顺序标记为 $1,2,\\dots,n$，并将索引 $n+1$ 解释为 $1$，以考虑其环形结构。为每一对相邻的珠子定义指示随机变量：\n$$\nX_{i}=\\begin{cases}\n1 & \\text{如果位置 } i \\text{ 是黑色且位置 } i+1 \\text{ 是白色},\\\\\n0 & \\text{否则},\n\\end{cases}\n$$\n其中 $i=1,2,\\dots,n$。那么，扣环的总数是\n$$\nX=\\sum_{i=1}^{n}X_{i}.\n$$\n根据期望的线性性，\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{n}\\mathbb{E}[X_{i}].\n$$\n对于每个 $i$，利用珠子颜色选择的独立性，\n$$\n\\mathbb{E}[X_{i}]=\\mathbb{P}(X_{i}=1)=\\mathbb{P}(i \\text{ 处为黑色且 } i+1 \\text{ 处为白色})=\\mathbb{P}(i \\text{ 处为黑色})\\,\\mathbb{P}(i+1 \\text{ 处为白色})=p(1-p).\n$$\n因此，\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{n}p(1-p)=n\\,p(1-p).\n$$", "answer": "$$\\boxed{n\\,p\\left(1-p\\right)}$$", "id": "1381835"}, {"introduction": "在这个实践中，我们提升了难度，来处理一个随机排列中的模式问题。直接计算一个元素成为“局部最大值”的概率似乎很困难，因为它取决于其邻居。然而，通过一个巧妙的对称性论证，我们可以极大地简化问题 [@problem_id:1381841]。这个练习旨在培养一种重要的思维方式：在看似随机的结构中发现并利用其固有的对称性来简化概率计算，同时也要注意处理边界条件的细微差别。", "problem": "考虑一个序列 $a_1, a_2, \\ldots, a_n$，它由整数集合 $\\{1, 2, \\ldots, n\\}$ 的一个随机排列构成，其中 $n$ 是一个满足 $n \\ge 2$ 的整数。在这样的一个排列中，这 $n$ 个整数的每一种可能的排序都是等可能的。\n\n序列中的一个元素 $a_i$ 根据其位置 $i$ 的下列规则被定义为一个“局部最大值”：\n- 对于 $i=1$，如果 $a_1 > a_2$，则 $a_1$ 是一个局部最大值。\n- 对于 $i=n$，如果 $a_n > a_{n-1}$，则 $a_n$ 是一个局部最大值。\n- 对于 $1 < i < n$，如果 $a_i > a_{i-1}$ 且 $a_i > a_{i+1}$，则 $a_i$ 是一个局部最大值。\n\n求出在这样一个随机排列中局部最大值的期望数量。答案应为一个关于 $n$ 的符号表达式。", "solution": "设 $S$ 为该随机排列中局部最大值的总数。对 $i \\in \\{1,2,\\ldots,n\\}$ 定义指示变量 $X_{i}$：如果 $a_{i}$ 是一个局部最大值（根据给定的位置规则），则设 $X_{i}=1$，否则设 $X_{i}=0$。那么\n$$\nS=\\sum_{i=1}^{n} X_{i}.\n$$\n根据期望的线性性，\n$$\n\\mathbb{E}[S]=\\sum_{i=1}^{n} \\mathbb{E}[X_{i}]=\\sum_{i=1}^{n} \\mathbb{P}(a_{i}\\text{ is a local maximum}).\n$$\n\n对于端点：\n- 在 $i=1$ 处，$a_{1}$ 是一个局部最大值当且仅当 $a_{1}>a_{2}$。由于 $a_1$ 和 $a_2$ 这两个值的大小关系是等可能的，因此\n$$\n\\mathbb{P}(a_{1}\\text{ is a local maximum})=\\frac{1}{2}.\n$$\n- 类似地，在 $i=n$ 处，$a_{n}$ 是一个局部最大值当且仅当 $a_{n}>a_{n-1}$，得到\n$$\n\\mathbb{P}(a_{n}\\text{ is a local maximum})=\\frac{1}{2}.\n$$\n\n对于内部位置 $1<i<n$，考虑三元组 $(a_{i-1},a_{i},a_{i+1})$。在一个随机排列中，这三个值的相对顺序在 $3!$ 种可能的排序上是均匀分布的，并且根据对称性，这三个元素中的任何一个都以相同的可能性成为三者中的最大值。事件“$a_{i}$ 是一个局部最大值”正是事件“$a_{i}$ 大于 $a_{i-1}$ 和 $a_{i+1}$”，即 $a_{i}$ 是该三元组中的最大值。因此，\n$$\n\\mathbb{P}(a_{i}\\text{ is a local maximum})=\\frac{1}{3}\\quad\\text{for all }i\\text{ with }1<i<n.\n$$\n\n将这些贡献相加，\n$$\n\\mathbb{E}[S]=\\left(\\frac{1}{2}+\\frac{1}{2}\\right)+(n-2)\\cdot\\frac{1}{3}=1+\\frac{n-2}{3}=\\frac{n+1}{3}.\n$$", "answer": "$$\\boxed{\\frac{n+1}{3}}$$", "id": "1381841"}, {"introduction": "这个场景模拟了现实世界中（如数据中心网络恢复）可能遇到的复杂随机配对问题。与前面的练习不同，这里的每个配对选择都会影响所有其他可能的配对，形成一个复杂的依赖网络。这个练习的价值在于展示期望线性性质的强大之处：即使在事件之间存在全局依赖性的情况下，我们仍然可以通过聚焦于单个事件的期望来解决整个问题 [@problem_id:1381819]。这是一种在组合结构中绕过复杂依赖计算的优雅策略。", "problem": "在一个大型数据中心，一次灾难性的网络交换机故障导致一个集群中的所有 $2n$ 个节点失去了其指定连接。这些节点由 $n$ 台专用服务器和 $n$ 台专用客户端组成。启动了一项紧急恢复协议，该协议试图通过将 $2n$ 个节点随机划分为 $n$ 个不同的通信对来恢复连通性。将 $2n$ 个节点划分为 $n$ 对的每一种可能的分区都是等可能的。\n\n如果一台服务器与另一台服务器配对，或者一台客户端与另一台客户端配对，就会发生“类型不匹配”错误。对于预期的客户端-服务器架构，这样的配对是无法工作的。\n\n出现类型不匹配错误的配对的期望数量是多少？请用关于 $n$ 的闭式解析表达式表示你的答案。", "solution": "设这 $2n$ 个节点由一个包含 $n$ 台服务器的集合 $S$ 和一个包含 $n$ 台客户端的集合 $C$ 组成。从所有分区中均匀地选择一个将节点划分为 $n$ 个无序对的随机分区（一个随机完美匹配）。\n\n对于集合 $S$ 中的每一台服务器 $i \\in S$，定义指示变量 $I_{i}$：如果服务器 $i$ 与另一台服务器配对，则 $I_i$ 等于 $1$，否则等于 $0$。服务器 $i$ 的配对伙伴是从剩下的 $2n-1$ 个节点中均匀选择的，其中有 $n-1$ 台是服务器。因此，\n$$\n\\mathbb{P}(I_{i}=1)=\\frac{n-1}{2n-1}.\n$$\n根据期望的线性性，\n$$\n\\mathbb{E}\\left[\\sum_{i \\in S} I_{i}\\right]=\\sum_{i \\in S} \\mathbb{E}[I_{i}]=n \\cdot \\frac{n-1}{2n-1}.\n$$\n和 $\\sum_{i \\in S} I_{i}$ 将每个服务器-服务器对计算了两次（该配对中的每台服务器各计算一次）。因此，服务器-服务器对的期望数量，记为 $\\mathbb{E}[\\text{SS}]$，是\n$$\n\\mathbb{E}[\\text{SS}]=\\frac{1}{2} \\cdot n \\cdot \\frac{n-1}{2n-1}=\\frac{n(n-1)}{2(2n-1)}.\n$$\n根据对称性，客户端-客户端对的期望数量 $\\mathbb{E}[\\text{CC}]$ 是相同的：\n$$\n\\mathbb{E}[\\text{CC}]=\\frac{n(n-1)}{2(2n-1)}.\n$$\n类型不匹配配对的总数是 $M=\\text{SS}+\\text{CC}$，因此根据期望的线性性，\n$$\n\\mathbb{E}[M]=\\mathbb{E}[\\text{SS}]+\\mathbb{E}[\\text{CC}]=\\frac{n(n-1)}{2(2n-1)}+\\frac{n(n-1)}{2(2n-1)}=\\frac{n(n-1)}{2n-1}.\n$$\n因此，出现类型不匹配错误的配对的期望数量是 $\\frac{n(n-1)}{2n-1}$。", "answer": "$$\\boxed{\\frac{n(n-1)}{2n-1}}$$", "id": "1381819"}]}
{"hands_on_practices": [{"introduction": "在我们开始最大化网络中的流量之前，我们必须能够验证一个给定的流量是否有效。这个练习聚焦于一个核心原则：流量守恒。该原则规定，对于网络中的任何中间节点，流入的流量必须等于流出的流量。掌握这一检验方法是理解和调试流算法的第一步。[@problem_id:1387800]", "problem": "在一个小型数据中心，一个网络被设计用于将数据包从源服务器 $s$ 路由到汇服务器 $t$。该网络由一个顶点集合 $V = \\{s, t, A, B, C, D\\}$ 和一组代表数据通路的有向边组成。一位工程师提出了一个流分布，由函数 $f(u, v)$ 表示，该函数表示每秒从顶点 $u$ 流向顶点 $v$ 的数据包数量。\n\n提出的流量值如下：\n- $f(s, A) = 10$\n- $f(s, B) = 12$\n- $f(A, C) = 6$\n- $f(A, D) = 4$\n- $f(B, C) = 7$\n- $f(B, D) = 4$\n- $f(C, t) = 13$\n- $f(D, t) = 8$\n\n一个流若要有效，必须在每个非终端顶点（即除了源点 $s$ 和汇点 $t$ 之外的任何顶点）上满足流量守恒性质。该性质规定，对于任何非终端顶点 $v$，流入 $v$ 的总流量必须等于流出 $v$ 的总流量。\n\n以下哪个非终端顶点违反了流量守恒性质？\n\nA. 顶点 A\nB. 顶点 B\nC. 顶点 C\nD. 顶点 D", "solution": "为了解决这个问题，我们需要检查每个非终端顶点：A、B、C 和 D 的流量守恒性质。顶点 $v$ 的流量守恒性质规定，所有入边的流量总和必须等于所有出边的流量总和。让我们将流入顶点 $v$ 的总流量表示为 $Flow_{in}(v)$，流出总流量表示为 $Flow_{out}(v)$。\n\n**检查顶点 A：**\n流入顶点 A 的边来自源点 $s$。唯一的入边是 $(s, A)$。\n$Flow_{in}(A) = f(s, A) = 10$\n\n从顶点 A 流出的边去往顶点 C 和 D。出边是 $(A, C)$ 和 $(A, D)$。\n$Flow_{out}(A) = f(A, C) + f(A, D) = 6 + 4 = 10$\n\n由于 $Flow_{in}(A) = 10$ 且 $Flow_{out}(A) = 10$，顶点 A 满足流量守恒性质。\n\n**检查顶点 B：**\n流入顶点 B 的边来自源点 $s$。唯一的入边是 $(s, B)$。\n$Flow_{in}(B) = f(s, B) = 12$\n\n从顶点 B 流出的边去往顶点 C 和 D。出边是 $(B, C)$ 和 $(B, D)$。\n$Flow_{out}(B) = f(B, C) + f(B, D) = 7 + 4 = 11$\n\n由于 $Flow_{in}(B) = 12$ 且 $Flow_{out}(B) = 11$，总流入流量不等于总流出流量 ($12 \\neq 11$)。因此，顶点 B 违反了流量守恒性质。\n\n**检查顶点 C：**\n流入顶点 C 的边来自顶点 A 和 B。入边是 $(A, C)$ 和 $(B, C)$。\n$Flow_{in}(C) = f(A, C) + f(B, C) = 6 + 7 = 13$\n\n从顶点 C 流出的边去往汇点 $t$。唯一的出边是 $(C, t)$。\n$Flow_{out}(C) = f(C, t) = 13$\n\n由于 $Flow_{in}(C) = 13$ 且 $Flow_{out}(C) = 13$，顶点 C 满足流量守恒性质。\n\n**检查顶点 D：**\n流入顶点 D 的边来自顶点 A 和 B。入边是 $(A, D)$ 和 $(B, D)$。\n$Flow_{in}(D) = f(A, D) + f(B, D) = 4 + 4 = 8$\n\n从顶点 D 流出的边去往汇点 $t$。唯一的出边是 $(D, t)$。\n$Flow_{out}(D) = f(D, t) = 8$\n\n由于 $Flow_{in}(D) = 8$ 且 $Flow_{out}(D) = 8$，顶点 D 满足流量守恒性质。\n\n根据这些计算，唯一违反流量守恒性质的非终端顶点是顶点 B。", "answer": "$$\\boxed{B}$$", "id": "1387800"}, {"introduction": "增加网络总流量的关键是找到从源点到汇点有剩余容量的路径。这个练习将重点放在“推动”更多流量沿给定路径流动的关键机械步骤上，并引入了残留容量以及如何处理前向和后向边的重要概念。通过这个练习，你将亲身体验增强流量的核心操作。[@problem_id:1387807]", "problem": "考虑一个代表流网络的有向图，其顶点集为 $V = \\{s, u, v, w, t\\}$，其中 $s$ 是源点，$t$ 是汇点。该网络的边及其对应的整数容量 $c(x, y)$ 如下所示：\n- $c(s, u) = 15$\n- $c(s, v) = 12$\n- $c(u, w) = 10$\n- $c(u, t) = 8$\n- $c(v, u) = 5$\n- $c(v, w) = 9$\n- $c(w, t) = 20$\n\n一个已有的整数值流 $f$ 定义在该网络上。流量非零的边如下：\n- $f(s, u) = 10$\n- $f(s, v) = 8$\n- $f(u, w) = 7$\n- $f(u, t) = 3$\n- $f(v, w) = 8$\n- $f(w, t) = 15$\n\n所有其他边的流量为 $0$。\n\n现在，考虑有向路径 $P = (s, v, w, u, t)$。沿着该路径 $P$ 使用最大的可能整数值来增广当前流 $f$，以产生一个新的流 $f'$。\n\n确定新的流值 $f'(s, v)$、$f'(v, w)$、$f'(u, w)$ 和 $f'(u, t)$。你的答案应该是一个包含这四个值并按指定顺序排列的行矩阵。", "solution": "我们在残余网络中进行计算。对于任意边 $(x,y)$，正向残余容量为 $r(x,y)=c(x,y)-f(x,y)$，而反向残余边 $(y,x)$ 的容量为 $r(y,x)=f(x,y)$。\n\n给定的增广路径是 $P=(s,v,w,u,t)$，它在残余网络中对应于边 $s \\to v$ (正向)，$v \\to w$ (正向)，$w \\to u$ ($u \\to w$ 的反向) 和 $u \\to t$ (正向)。计算沿着路径 $P$ 的残余容量：\n$$\nr(s,v)=c(s,v)-f(s,v)=12-8=4, \\quad r(v,w)=c(v,w)-f(v,w)=9-8=1,\n$$\n$$\nr(w,u)=f(u,w)=7, \\quad r(u,t)=c(u,t)-f(u,t)=8-3=5.\n$$\n瓶颈增广量是该路径上的最小残余容量：\n$$\n\\Delta=\\min\\{4,1,7,5\\}=1.\n$$\n更新流量：对于路径 $P$ 上的每条正向边 $(x,y)$，设置 $f'(x,y)=f(x,y)+\\Delta$；对于反向步骤 $w \\to u$，将对应的正向流减去 $\\Delta$，即 $f'(u,w)=f(u,w)-\\Delta$。因此，\n$$\nf'(s,v)=8+1=9, \\quad f'(v,w)=8+1=9, \\quad f'(u,w)=7-1=6, \\quad f'(u,t)=3+1=4.\n$$\n所有更新后的流量都满足容量限制且保持非负，因此这是一个有效的增广流。", "answer": "$$\\boxed{\\begin{pmatrix} 9 & 9 & 6 & 4 \\end{pmatrix}}$$", "id": "1387807"}, {"introduction": "现在让我们将这些概念结合起来。本练习模拟了著名的 Ford-Fulkerson 算法的一次完整迭代。你不仅需要增强流量，还需要首先在残留网络中找到一条合适的增广路径。这会让你对如何系统地将流量增加到其最大值有一个完整的认识。[@problem_id:1387823]", "problem": "一家物流公司管理一个由有向图表示的分销网络。图中的节点包括一个源仓库 (S)、一个目的地城市 (T) 和四个中间中转枢纽 (U, V, W, X)。这些节点之间的有向边代表单行路，每条边都有一个以小时货运单位计量的最大容量。\n\n该网络的结构和容量（从节点 $i$ 到节点 $j$ 的边的容量记为 $c(i, j)$）如下：\n- $c(S, U) = 10$\n- $c(S, V) = 8$\n- $c(U, V) = 4$\n- $c(U, W) = 7$\n- $c(V, W) = 3$\n- $c(V, X) = 6$\n- $c(W, T) = 9$\n- $c(X, T) = 5$\n任何未列出的边的容量均为零。\n\n一次流量分析揭示了当前某些边上的流量 $f(i, j)$：\n- $f(S, U) = 6$\n- $f(U, W) = 6$\n- $f(W, T) = 6$\n- $f(S, V) = 4$\n- $f(V, X) = 4$\n- $f(X, T) = 4$\n所有其他边上的流量均为零。当前从源点 S 到汇点 T 的总流量为每小时 10 个货运单位。\n\n为了增加吞吐量，您必须执行一次 Ford-Fulkerson 算法的迭代。您的任务是在残差图中找到一条从 S 到 T 的增广路径。为确保路径唯一，您必须使用广度优先搜索 (BFS)，并按字母顺序探索任一节点的邻居节点。基于这条特定的增广路径，从 S 到 T 的新总流量值是多少？\n\n请用一个整数表示您的答案，代表以小时货运单位计量的总流量。", "solution": "我们根据当前流量构建残差图。对于每条容量为 $c(i,j)$、当前流量为 $f(i,j)$ 的有向边，其正向残差容量为 $r(i,j)=c(i,j)-f(i,j)$，反向残差容量为 $r(j,i)=f(i,j)$。根据给定数据：\n- 在 $S \\to U$ 上：$r(S,U)=10-6=4$ 且 $r(U,S)=6$。\n- 在 $S \\to V$ 上：$r(S,V)=8-4=4$ 且 $r(V,S)=4$。\n- 在 $U \\to V$ 上：$r(U,V)=4-0=4$ 且 $r(V,U)=0$。\n- 在 $U \\to W$ 上：$r(U,W)=7-6=1$ 且 $r(W,U)=6$。\n- 在 $V \\to W$ 上：$r(V,W)=3-0=3$ 且 $r(W,V)=0$。\n- 在 $V \\to X$ 上：$r(V,X)=6-4=2$ 且 $r(X,V)=4$。\n- 在 $W \\to T$ 上：$r(W,T)=9-6=3$ 且 $r(T,W)=6$。\n- 在 $X \\to T$ 上：$r(X,T)=5-4=1$ 且 $r(T,X)=4$。\n\n我们在残差图中从 $S$ 开始运行一次 BFS，按字母顺序探索每个节点的邻居节点。从 $S$ 开始，其残差为正的邻居是 $U$ 和 $V$，按 $U$ 然后 $V$ 的顺序入队。接着处理 $U$，按字母顺序探索其邻居，我们通过 $U \\to W$ 找到了 $W$，因为 $r(U,W)=1>0$，所以我们将 $W$ 入队。接着处理 $V$，我们通过 $V \\to X$ 将 $X$ 入队，因为 $r(V,X)=2>0$。接着处理 $W$，我们通过 $W \\to T$ 发现了 $T$，因为 $r(W,T)=3>0$。因此，BFS 找到的增广路径是 $S \\to U \\to W \\to T$。\n\n这条路径上的瓶颈残差容量是其上各边残差容量的最小值：\n$$\\Delta=\\min\\{r(S,U),\\,r(U,W),\\,r(W,T)\\}=\\min\\{4,\\,1,\\,3\\}=1.$$\n通过 $\\Delta$ 进行增广会使总流量增加 $1$，所以新的总流量值为\n$$|f'|=|f|+\\Delta=10+1=11.$$", "answer": "$$\\boxed{11}$$", "id": "1387823"}]}
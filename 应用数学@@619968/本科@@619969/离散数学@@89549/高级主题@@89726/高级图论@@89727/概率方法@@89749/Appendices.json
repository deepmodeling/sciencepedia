{"hands_on_practices": [{"introduction": "概率方法的一个核心技术是利用期望的线性性。这个工具使我们能够轻松计算随机对象中特定结构的期望数量，这通常是证明其存在的关键第一步。通过这个练习 [@problem_id:1546148]，你将通过定义指示随机变量，来计算随机图中4-圈（$C_4$）的期望数量，这是一个在网络分析中很重要的结构。", "problem": "一个大规模的去中心化点对点网络被建模为一个随机图。该网络由 $n$ 个不同节点组成，任意一对不同节点之间以概率 $p$ 建立一条直接的双向通信链路（一条边），其中 $0 < p < 1$。任何链路的存在与否都与所有其他链路无关。\n\n在这个网络中，一个用于确保数据完整性和路由效率的关键结构是“弹性四方体”。弹性四方体被定义为一个由恰好四个不同节点和连接这些节点的四条特定边组成的子图，这些边构成了一个长度为四的简单环。例如，给定四个节点A、B、C和D，如果链路(A,B)、(B,C)、(C,D)和(D,A)都存在，则存在一个弹性四方体。这四个节点之间任何其他潜在链路（即“对角线”链路(A,C)和(B,D)）的存在与否不影响其作为弹性四方体的分类。\n\n给定网络参数 $n$ 和 $p$，求网络中弹性四方体的期望数量。以 $n$ 和 $p$ 的闭式解析表达式给出你的答案。", "solution": "令 $G$ 为参数是 $n$ 和 $p$ 的 Erd\\H{o}s–R\\'enyi 随机图。定义 $X$ 为 $G$ 中弹性四方体（简单4-环）的数量。\n\n引入指示变量：对于带标签的顶点集 $\\{1,\\dots,n\\}$ 上的每个无向简单4-环 $C$，令 $I_{C}$ 为指示 $C$ 的所有四条边都在 $G$ 中存在的指示变量。则\n$$\nX=\\sum_{C} I_{C}.\n$$\n根据期望的线性性，\n$$\n\\mathbb{E}[X]=\\sum_{C} \\mathbb{E}[I_{C}]=\\sum_{C} \\mathbb{P}(I_{C}=1).\n$$\n对于任何固定的4-环 $C$，必须有四条特定的边存在；$G$ 中的所有边都是独立的，并以概率 $p$ 存在，并且相同四个顶点之间的两条可能对角线的存在与否不影响分类。因此，\n$$\n\\mathbb{P}(I_{C}=1)=p^{4}.\n$$\n\n剩下的问题是计算 $n$ 个带标签的顶点上不同无向4-环的数量。首先选择4个顶点；有 $\\binom{n}{4}$ 种方式。在一个固定的4个带标签顶点的集合上，不同无向4-环的数量为\n$$\n\\frac{(4-1)!}{2}=3,\n$$\n因为有 $(4-1)!$ 种循环排序，并且由于反转对称性，我们除以 $2$。\n\n因此，候选4-环的总数为\n$$\n3\\binom{n}{4}.\n$$\n将计数与每个环的概率相结合，\n$$\n\\mathbb{E}[X]=\\left(3\\binom{n}{4}\\right)p^{4}.\n$$\n等价地，$\\mathbb{E}[X]=\\frac{n(n-1)(n-2)(n-3)}{8}\\,p^{4}$。", "answer": "$$\\boxed{3\\binom{n}{4}p^{4}}$$", "id": "1546148"}, {"introduction": "概率方法最令人称奇的一点是其非构造性的证明能力：它能证明一个具有特定性质的对象存在，却不告诉你如何找到它。这种证明的核心逻辑是，如果“坏”结构（我们不希望看到的结构）的期望数量小于1，那么必然存在至少一个实例，其中“坏”结构的数量为零。这个练习 [@problem_id:1485029] 旨在澄清一个关于此逻辑的常见误解，帮助你巩固对概率方法存在性证明的深刻理解。", "problem": "在一门图论课程中，一个学生正在学习拉姆齐数以及用于寻找其下界的概率方法。拉姆齐数$R(k, t)$是这样一个最小整数$n$，使得对$n$个顶点的完全图$K_n$的边进行任意红蓝二染色，都必然包含一个红色的$K_k$（一个大小为$k$且所有边都为红色的完全子图）或一个蓝色的$K_t$。\n\n该学生试图构建一个论证来寻找对角拉姆齐数$R(k, k)$的下界。该学生的论证过程如下：\n\n1.  考虑一个有$n$个顶点的完全图$K_n$。对其 $\\binom{n}{2}$ 条边中的每一条都独立且均匀随机地染成红色或蓝色，每种颜色的概率为 $\\frac{1}{2}$。\n\n2.  设$S$是任意一个包含$k$个顶点的特定子集。由$S$诱导的子图是单色$K_k$的概率为 $2 \\cdot \\left(\\frac{1}{2}\\right)^{\\binom{k}{2}} = 2^{1-\\binom{k}{2}}$。\n\n3.  设$X$为染色中单色$K_k$子图总数的随机变量。根据期望的线性性，单色$K_k$子图的期望数为 $E[X] = \\binom{n}{k} 2^{1-\\binom{k}{2}}$。\n\n4.  现在，假设我们选择的$n$和$k$使得$E[X] < 1$。\n\n5.  学生得出结论：“单色$K_k$的期望数是所有可能染色方案下的平均数。如果这个平均值小于1，那么每一种染色方案都必须导致图中单色$K_k$的数量少于1。由于这类子图的数量必须是整数，这意味着每种染色方案都必须有0个单色$K_k$。因此，如果 $\\binom{n}{k} 2^{1-\\binom{k}{2}} < 1$，那么 $R(k, k) > n$。”\n\n在该学生的推理中，特别是在第五步的结论中，其主要逻辑缺陷是什么？\n\nA. 期望值$E[X]$的公式不正确；它不应该是子图数量与概率的乘积。\n\nB. 期望$E[X]$是所有结果的平均值，而$E[X] < 1$并不意味着每个结果都必须为零；它只保证至少有一个结果为零。\n\nC. 该论证无效，因为像子图数量这样的离散随机变量的期望值必须是整数。因此，条件$E[X] < 1$是一个矛盾。\n\nD. 关于$R(k, k) > n$的结论是不正确的。即使存在没有单色$K_k$的染色方案，这也不提供关于拉姆齐数的信息。\n\nE. 学生的论证不成立，因为随机变量$X$不服从均匀分布，而这是此类概率论证的必要条件。", "solution": "我们通过使用均匀分布，将$K_n$的所有$2^{\\binom{n}{2}}$种红蓝边染色的集合作为样本空间，来为随机染色建模。对于每个顶点的$k$-子集$S$，事件“$S$诱导一个单色$K_k$”的概率为$2 \\cdot \\left(\\frac{1}{2}\\right)^{\\binom{k}{2}} = 2^{1-\\binom{k}{2}}$。设$X$是单色$K_k$子图的数量；根据期望的线性性，\n$$\nE[X] \\;=\\; \\sum_{S \\in \\binom{[n]}{k}} \\Pr(\\text{$S$ is monochromatic}) \\;=\\; \\binom{n}{k}\\, 2^{\\,1-\\binom{k}{2}}.\n$$\n假设$E[X] < 1$。学生的第五步声称，如果单色$K_k$的平均数小于1，则每种染色方案都必须有少于1个这样的子图，即0个。这是一个逻辑错误：一个平均值的界限并不能对每个结果施加逐点的界限。\n\n形式上，由于$X \\ge 0$，马尔可夫不等式给出\n$$\n\\Pr(X \\ge 1) \\le \\frac{E[X]}{1} = E[X] < 1,\n$$\n所以\n$$\n\\Pr(X = 0) = 1 - \\Pr(X \\ge 1) \\ge 1 - E[X] > 0.\n$$\n因此，至少存在一种染色方案使得$X=0$，但“每种染色方案都必须使得$X=0$”这个说法是错误的。对于该学生的推理模式，一个简单的反例是：一个随机变量以概率$\\frac{3}{4}$取值为0，以概率$\\frac{1}{4}$取值为2，其期望$E[X] = \\frac{1}{2} < 1$，然而并非每个结果都为0。\n\n因此，第五步中的主要缺陷在于将期望（一个平均值）与对所有结果的普遍保证混为一谈。正确的陈述是，$E[X] < 1$意味着至少存在一种不含单色$K_k$的染色方案，而不是每种染色方案都不含。这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1485029"}, {"introduction": "虽然非构造性证明很强大，但在计算机科学和工程领域，我们通常需要一个明确的算法来构造出所需的对象。这就是“去随机化”（derandomization）技术发挥作用的地方，它将一个概率性的存在性证明转化为一个确定性的构造算法。这个练习 [@problem_id:1420467] 将引导你亲手实践“条件期望法”（method of conditional expectations），这是一种经典的去随机化技术，用它来确定性地解决图论中的最大割（MAX-CUT）问题。", "problem": "在计算复杂性理论中，概率方法是一种强大的非构造性工具，用于证明具有某些性质的组合对象的存在性。一种称为去随机化的后续技术，旨在将这种存在性证明转化为构造该对象的确定性算法。\n\n考虑无向图 $G=(V, E)$ 上的最大割（MAX-CUT）问题，该问题要求将顶点集 $V$ 划分为两个不相交的子集 $S_0$ 和 $S_1$，使得一个端点在 $S_0$ 中而另一个端点在 $S_1$ 中的边的数量最大化。这样的边集称为一个割。\n\n我们来分析一个具体的图，其顶点集为 $V = \\{v_1, v_2, v_3, v_4\\}$，边集为 $E = \\{\\{v_1, v_2\\}, \\{v_1, v_3\\}, \\{v_2, v_3\\}, \\{v_2, v_4\\}, \\{v_3, v_4\\}\\}$。\n\n一种简单的 MAX-CUT 随机算法将每个顶点独立且均匀随机地分配到 $S_0$ 或 $S_1$。该方法产生的割的期望大小证明了存在一个至少有该大小的割。\n\n我们可以使用条件期望法来对该过程进行去随机化。我们将按 $v_1, v_2, v_3, v_4$ 的顺序，逐一决定每个顶点的划分。对于每个顶点 $v_k$，我们确定性地将其放入能使最终割大小的条件期望最大化的划分（$S_0$ 或 $S_1$）中，该条件期望是基于所有先前顶点 $v_1, \\dots, v_{k-1}$ 的放置位置给出的。如果将 $v_k$ 放入 $S_0$ 或 $S_1$ 产生相同的条件期望，则必须根据平局决胜规则将其放入 $S_0$。\n\n遵循这个确定性程序，以下哪个选项代表了划分 $S_0$ 中最终的顶点集合？\n\nA. $\\{v_2, v_3\\}$\n\nB. $\\{v_1, v_4\\}$\n\nC. $\\{v_2\\}$\n\nD. $\\{v_1, v_3, v_4\\}$\n\nE. $\\{v_1, v_2\\}$", "solution": "设 $X$ 表示最终割的大小。根据期望的线性性，\n$$\n\\mathbb{E}[X\\,|\\,\\text{partial assignment}]=\\sum_{\\{u,w\\}\\in E}\\mathbb{E}[I_{\\{u,w\\}}\\,|\\,\\text{partial assignment}],\n$$\n其中 $I_{\\{u,w\\}}$ 是边 $\\{u,w\\}$ 被切割的指示函数。对于任何边，如果其两个端点都尚未分配，或者只有一个端点被分配，则 $\\mathbb{E}[I_{\\{u,w\\}}\\,|\\,\\cdot]=\\frac{1}{2}$。如果两个端点都已被分配，那么当它们被放置在不同的部分时，其贡献为 $1$，否则为 $0$。因此，在放置 $v_k$ 时，只有从 $v_k$ 连接到已分配邻居的边会影响条件期望；所有其他边的贡献都是 $\\frac{1}{2}$，与选择无关。\n\n按照 $v_{1},v_{2},v_{3},v_{4}$ 的顺序处理顶点，并使用放入 $S_{0}$ 的平局决胜规则。\n\n处理 $v_{1}$ 的步骤：没有先前已分配的顶点。两种选择产生相同的条件期望，因此将 $v_{1}\\in S_{0}$。\n\n处理 $v_{2}$ 的步骤：唯一先前已分配的邻居是 $v_{1}$，存在边 $\\{v_{1},v_{2}\\}\\in E$。\n- 如果 $v_{2}\\in S_{0}$，则 $\\{v_{1},v_{2}\\}$ 贡献为 $0$，其他 $4$ 条边各贡献 $\\frac{1}{2}$，因此\n$$\n\\mathbb{E}[X\\,|\\,v_{1}\\in S_{0},v_{2}\\in S_{0}]=0+4\\cdot\\frac{1}{2}=2.\n$$\n- 如果 $v_{2}\\in S_{1}$，则 $\\{v_{1},v_{2}\\}$ 贡献为 $1$，其他边各贡献 $\\frac{1}{2}$，因此\n$$\n\\mathbb{E}[X\\,|\\,v_{1}\\in S_{0},v_{2}\\in S_{1}]=1+4\\cdot\\frac{1}{2}=3.\n$$\n因此将 $v_{2}\\in S_{1}$。\n\n处理 $v_{3}$ 的步骤：先前已分配的顶点是 $v_{1}\\in S_{0}$ 和 $v_{2}\\in S_{1}$，存在边 $\\{v_{1},v_{3}\\},\\{v_{2},v_{3}\\}\\in E$。\n- 如果 $v_{3}\\in S_{0}$，则 $\\{v_{1},v_{3}\\}$ 的贡献为 $0$，$\\{v_{2},v_{3}\\}$ 的贡献为 $1$。边 $\\{v_{2},v_{4}\\},\\{v_{3},v_{4}\\}$ 各贡献 $\\frac{1}{2}$，而 $\\{v_{1},v_{2}\\}$ 已固定为 $1$。因此\n$$\n\\mathbb{E}[X\\,|\\,v_{3}\\in S_{0}]=1+0+1+\\frac{1}{2}+\\frac{1}{2}=3.\n$$\n- 如果 $v_{3}\\in S_{1}$，则 $\\{v_{1},v_{3}\\}$ 的贡献为 $1$，$\\{v_{2},v_{3}\\}$ 的贡献为 $0$。连接到 $v_{4}$ 的同样两条边各贡献 $\\frac{1}{2}$，且 $\\{v_{1},v_{2}\\}=1$，因此\n$$\n\\mathbb{E}[X\\,|\\,v_{3}\\in S_{1}]=1+1+0+\\frac{1}{2}+\\frac{1}{2}=3.\n$$\n平局，所以将 $v_{3}\\in S_{0}$。\n\n处理 $v_{4}$ 的步骤：先前已分配的顶点是 $v_{1}\\in S_{0}$，$v_{2}\\in S_{1}$，$v_{3}\\in S_{0}$。相关的边是 $\\{v_{2},v_{4}\\},\\{v_{3},v_{4}\\}\\in E$。\n- 如果 $v_{4}\\in S_{0}$，则 $\\{v_{2},v_{4}\\}$ 的贡献为 $1$，$\\{v_{3},v_{4}\\}$ 的贡献为 $0$。已固定的边为 $\\{v_{1},v_{2}\\}=1$, $\\{v_{1},v_{3}\\}=0$, $\\{v_{2},v_{3}\\}=1$，因此\n$$\n\\mathbb{E}[X\\,|\\,v_{4}\\in S_{0}]=1+0+1+1+0=3.\n$$\n- 如果 $v_{4}\\in S_{1}$，则 $\\{v_{2},v_{4}\\}$ 的贡献为 $0$，$\\{v_{3},v_{4}\\}$ 的贡献为 $1$，而三条已固定的边保持不变，得出\n$$\n\\mathbb{E}[X\\,|\\,v_{4}\\in S_{1}]=1+0+1+0+1=3.\n$$\n平局，所以将 $v_{4}\\in S_{0}$。\n\n最终的划分有 $S_{0}=\\{v_{1},v_{3},v_{4}\\}$，对应选项 D。", "answer": "$$\\boxed{D}$$", "id": "1420467"}]}
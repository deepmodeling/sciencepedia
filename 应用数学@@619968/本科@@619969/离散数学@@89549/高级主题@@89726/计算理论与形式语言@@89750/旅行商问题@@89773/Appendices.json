{"hands_on_practices": [{"introduction": "这个练习将为你提供解决旅行商问题 (TSP) 的基础经验。通过手动计算一个小型城市网络中的所有可能路线，你将直接面对这个问题的组合爆炸特性，并对寻找“最优”路线的含义有一个具体的理解。这个过程虽然对大型问题不切实际，但却是理解问题核心难度的重要第一步。[@problem_id:1411155]", "problem": "一个遥远月球上的行星漫游车接到了一个地质调查任务。漫游车从其基站出发，必须访问三个不同的兴趣点：一个水晶构造、一个休眠火山口和一个撞击坑。在每个地点恰好访问一次后，它必须返回基站以完成其巡回。\n\n任务规划师已经计算出在任意两个地点（基站和三个兴趣点）之间直接行进所需的能量。我们将这些地点表示为 B（基站）、C（水晶构造）、V（休眠火山口）和 I（撞击坑）。行进的能量成本是对称的（即，从 A 到 B 的成本与从 B 到 A 的成本相同），具体如下：\n\n-   B 和 C 之间的行进需要 14 个能量单位。\n-   B 和 V 之间的行进需要 11 个能量单位。\n-   B 和 I 之间的行进需要 20 个能量单位。\n-   C 和 V 之间的行进需要 9 个能量单位。\n-   C 和 I 之间的行进需要 17 个能量单位。\n-   V 和 I 之间的行进需要 13 个能量单位。\n\n你的任务是确定漫游车最节能的路线。漫游车从基站出发，访问其他三个地点各一次，然后返回基站，完成一次巡回的最低总能量成本是多少？请用能量单位表示你的最终答案。", "solution": "将漫游车的任务建模为在一个具有顶点 $\\{B,C,V,I\\}$ 和对称边权重 $d(X,Y)=d(Y,X)$ 的完全无向加权图上寻找一个最小能量的哈密顿回路（旅行商问题巡回）。给定的成对能量成本为：\n$$d(B,C)=14,\\quad d(B,V)=11,\\quad d(B,I)=20,\\quad d(C,V)=9,\\quad d(C,I)=17,\\quad d(V,I)=13.$$\n\n一次巡回从 $B$ 开始，访问 $C$、$V$ 和 $I$ 各一次，然后返回到 $B$。在起点固定且具有无向对称性（反向的成本相同）的情况下，需要检查的不同巡回数量为 $\\frac{(n-1)!}{2}$，其中 $n=4$，因此为 $\\frac{3!}{2}=3$。枚举并计算每条路线的总能量：\n\n路线 $1$：$B \\to C \\to V \\to I \\to B$,\n$$E_{1}=d(B,C)+d(C,V)+d(V,I)+d(I,B)=14+9+13+20=56.$$\n\n路线 $2$：$B \\to C \\to I \\to V \\to B$,\n$$E_{2}=d(B,C)+d(C,I)+d(I,V)+d(V,B)=14+17+13+11=55.$$\n\n路线 $3$：$B \\to V \\to C \\to I \\to B$,\n$$E_{3}=d(B,V)+d(V,C)+d(C,I)+d(I,B)=11+9+17+20=57.$$\n\n$\\{E_{1},E_{2},E_{3}\\}$ 中的最小值为 $55$，由路线 $B \\to C \\to I \\to V \\to B$（或其反向路线 $B \\to V \\to I \\to C \\to B$）实现。", "answer": "$$\\boxed{55}$$", "id": "1411155"}, {"introduction": "由于对大规模问题进行穷举搜索是不现实的，我们常常采用启发式算法 (heuristics) 这种“经验法则”来快速找到好的解。本练习将介绍一种直观的启发式算法——最近邻算法，这是一种贪婪策略。你将通过计算来评估其解的质量，并与真实的最优解进行比较，从而深刻体会算法设计中速度与精度之间的权衡。[@problem_id:1411136]", "problem": "一家物流公司正在使用自动驾驶无人机优化其配送路线。在一次测试运行中，一架无人机需要访问一组四个地点，分别标记为 P、Q、R 和 S。无人机的起始基地位于地点 P。这四个地点在二维平面中的笛卡尔坐标以任意距离单位给出，如下所示：\n- P: (0, 0)\n- Q: (6, 0)\n- R: (12, 0)\n- S: (3, 2)\n\n任意两点之间的行进距离是标准的欧几里得距离。无人机被编程使用一种简单的“最近邻贪心算法”来确定其路径。该算法的工作方式如下：从当前位置开始，无人机总是前往最近的未访问过的地点。这个过程会一直重复，直到所有地点都被访问过，之后无人机返回其起始基地 P。如果到最近的未访问地点的距离出现平局，无人机被编程为选择按字母顺序排在前面的地点 (P < Q < R < S)。\n\n设 $L_{greedy}$ 是该算法从 P 开始生成的回路的总长度。设 $L_{opt}$ 是访问所有四个地点并返回 P 的绝对最短可能回路的长度。\n\n计算性能比 $\\frac{L_{greedy}}{L_{opt}}$。将您的最终答案四舍五入到四位有效数字。", "solution": "点 $A(x_{1},y_{1})$ 和点 $B(x_{2},y_{2})$ 之间的欧几里得距离是\n$$\nd(A,B)=\\sqrt{(x_{2}-x_{1})^{2}+(y_{2}-y_{1})^{2}}.\n$$\n计算所需距离：\n$$\nd(P,Q)=\\sqrt{(6-0)^{2}+(0-0)^{2}}=6,\\quad d(P,R)=\\sqrt{(12-0)^{2}}=12,\\quad d(P,S)=\\sqrt{(3-0)^{2}+(2-0)^{2}}=\\sqrt{13},\n$$\n$$\nd(S,Q)=\\sqrt{(6-3)^{2}+(0-2)^{2}}=\\sqrt{13},\\quad d(S,R)=\\sqrt{(12-3)^{2}+(0-2)^{2}}=\\sqrt{85},\\quad d(Q,R)=\\sqrt{(12-6)^{2}}=6.\n$$\n\n从 P 开始的最近邻贪心算法：\n- 从 P 出发：最近的未访问点是 S，因为 $\\sqrt{13}<6<12$，所以路径为 $P\\to S$。\n- 从 S 出发：在未访问点 $\\{Q,R\\}$ 中，最近的是 Q，因为 $\\sqrt{13}<\\sqrt{85}$，所以路径为 $S\\to Q$。\n- 从 Q 出发：只剩下 R，所以路径为 $Q\\to R$。\n- 返回 P：$R\\to P$。\n\n因此，\n$$\nL_{greedy}=d(P,S)+d(S,Q)+d(Q,R)+d(R,P)=\\sqrt{13}+\\sqrt{13}+6+12=18+2\\sqrt{13}.\n$$\n\n为了找到 $L_{opt}$，评估所有从 P 出发并返回到 P 的回路：\n$$\n\\begin{aligned}\nP\\to Q\\to R\\to S\\to P &: 6+6+\\sqrt{85}+\\sqrt{13}=12+\\sqrt{85}+\\sqrt{13},\\\\\nP\\to Q\\to S\\to R\\to P &: 6+\\sqrt{13}+\\sqrt{85}+12=18+\\sqrt{13}+\\sqrt{85},\\\\\nP\\to R\\to Q\\to S\\to P &: 12+6+\\sqrt{13}+\\sqrt{13}=18+2\\sqrt{13},\\\\\nP\\to R\\to S\\to Q\\to P &: 12+\\sqrt{85}+\\sqrt{13}+6=18+\\sqrt{85}+\\sqrt{13},\\\\\nP\\to S\\to Q\\to R\\to P &: \\sqrt{13}+\\sqrt{13}+6+12=18+2\\sqrt{13},\\\\\nP\\to S\\to R\\to Q\\to P &: \\sqrt{13}+\\sqrt{85}+6+6=12+\\sqrt{85}+\\sqrt{13}.\n\\end{aligned}\n$$\n最小值为\n$$\nL_{opt}=12+\\sqrt{85}+\\sqrt{13}.\n$$\n\n因此，性能比为\n$$\n\\frac{L_{greedy}}{L_{opt}}=\\frac{18+2\\sqrt{13}}{12+\\sqrt{85}+\\sqrt{13}}.\n$$\n使用 $\\sqrt{13}\\approx 3.605551275$ 和 $\\sqrt{85}\\approx 9.219544457$ 可得\n$$\nL_{greedy}\\approx 25.211102551,\\quad L_{opt}\\approx 24.825095733,\\quad \\frac{L_{greedy}}{L_{opt}}\\approx 1.015549056,\n$$\n四舍五入到四位有效数字为 $1.016$。", "answer": "$$\\boxed{1.016}$$", "id": "1411136"}, {"introduction": "为了给更复杂的 TSP 实例找到可证明的最优解，我们可以使用整数线性规划 (Integer Linear Programming) 对问题进行建模。这项进阶练习将引导你应用 Miller-Tucker-Zemlin (MTZ) 约束，这是一种防止在解中出现非法“子回路”的关键技术。通过这个实践，你将搭建起从抽象问题到其在现代优化求解器中实际应用的桥梁。[@problem_id:1411103]", "problem": "对于一个包含 $n$ 个城市的集合 $V = \\{1, 2, \\dots, n\\}$ 的旅行商问题 (TSP)，其整数规划模型通常首先定义二元变量 $x_{ij}$，其中，如果路线直接从城市 $i$ 前往城市 $j$，则 $x_{ij} = 1$，否则 $x_{ij} = 0$。基本的分配约束，即对所有 $j \\in V$ 都有 $\\sum_{i \\in V, i \\neq j} x_{ij} = 1$ 以及对所有 $i \\in V$ 都有 $\\sum_{j \\in V, j \\neq i} x_{ij} = 1$，确保了每个城市都只被进入一次且只被离开一次。然而，仅凭这些约束并不能防止形成不相连的子回路。\n\n为了强制形成一个单一的、连通的回路，一种常见的方法是 Miller-Tucker-Zemlin (MTZ) 模型。该模型为 $i \\in \\{2, 3, \\dots, n\\}$ 引入了一组辅助连续变量 $u_i$。对于一个从指定的出发点（城市1）开始并结束的回路，这些 $u_i$ 变量可以被解释为城市 $i$ 在被访问城市序列中的位置。\n\n考虑一个有4个城市的TSP问题，城市集合为 $V = \\{1, 2, 3, 4\\}$，其中城市1是出发点。辅助变量为 $u_2, u_3, u_4$。以下哪个选项代表了为保证此特定问题只有一个单一回路所需的完整且正确的 MTZ 约束集？\n\nA.\n$u_2 - u_3 + 3x_{23} \\le 2$\n$u_2 - u_4 + 3x_{24} \\le 2$\n$u_3 - u_2 + 3x_{32} \\le 2$\n$u_3 - u_4 + 3x_{34} \\le 2$\n$u_4 - u_2 + 3x_{42} \\le 2$\n$u_4 - u_3 + 3x_{43} \\le 2$\n以及对 $i \\in \\{2, 3, 4\\}$，有 $1 \\le u_i \\le 3$。\n\nB.\n$u_2 - u_3 + 3x_{23} \\le 2$\n$u_3 - u_4 + 3x_{34} \\le 2$\n$u_4 - u_2 + 3x_{42} \\le 2$\n以及对 $i \\in \\{2, 3, 4\\}$，有 $1 \\le u_i \\le 3$。\n\nC.\n$u_2 - u_3 + 4x_{23} \\le 3$\n$u_2 - u_4 + 4x_{24} \\le 3$\n$u_3 - u_2 + 4x_{32} \\le 3$\n$u_3 - u_4 + 4x_{34} \\le 3$\n$u_4 - u_2 + 4x_{42} \\le 3$\n$u_4 - u_3 + 4x_{43} \\le 3$\n以及对 $i \\in \\{2, 3, 4\\}$，有 $1 \\le u_i \\le 4$。\n\nD.\n$u_2 - u_3 + 3x_{23} \\le 2$\n$u_2 - u_4 + 3x_{24} \\le 2$\n$u_3 - u_2 + 3x_{32} \\le 2$\n$u_3 - u_4 + 3x_{34} \\le 2$\n$u_4 - u_2 + 3x_{42} \\le 2$\n$u_4 - u_3 + 3x_{43} \\le 2$\n以及对 $i \\in \\{1, 2, 3, 4\\}$，有 $1 \\le u_i \\le 4$。\n\nE.\n对所有 $i,j \\in \\{1, 2, 3, 4\\}$, $i \\neq j$，有 $u_i - u_j + 3x_{ij} \\le 2$。\n以及对 $i \\in \\{1, 2, 3, 4\\}$，有 $1 \\le u_i \\le 3$。", "solution": "我们回顾一下，对于一个有 $n$ 个城市和指定出发点（城市1）的TSP问题，标准的 Miller-Tucker-Zemlin (MTZ) 子回路消除约束如下。为 $i \\in \\{2,3,\\dots,n\\}$ 引入辅助连续变量 $u_{i}$，其界限代表了每个非出发点城市的访问位置。一种常见且正确的 MTZ 形式是：\n- 界限：对所有 $i \\in \\{2,3,\\dots,n\\}$，\n$$\n1 \\le u_{i} \\le n-1.\n$$\n- 成对 MTZ 不等式：对所有 $i,j \\in \\{2,3,\\dots,n\\}$ 且 $i \\neq j$，\n$$\nu_{i} - u_{j} + (n-1)\\,x_{ij} \\le n-2.\n$$\n\n理由：\n- 如果 $x_{ij} = 1$，则 $u_{i} - u_{j} \\le -1$，即 $u_{i} \\le u_{j} - 1$，这强制了沿选定弧的顺序一致性，从而禁止了非出发点节点之间形成子回路。\n- 如果 $x_{ij} = 0$，不等式变为 $u_{i} - u_{j} \\le n-2$，考虑到 $1 \\le u_{i} \\le n-1$ 和 $1 \\le u_{j} \\le n-1$，这个不等式是冗余的，因为可能的最大差值为 $(n-1) - 1 = n-2$。\n\n将其具体化到 $n=4$ 且出发点为城市1的情况，我们定义 $u_{2}, u_{3}, u_{4}$ 并得到：\n- 界限：\n$$\n1 \\le u_{i} \\le 3 \\quad \\text{for } i \\in \\{2,3,4\\}.\n$$\n- 对所有有序对 $(i,j)$（其中 $i,j \\in \\{2,3,4\\}, i \\neq j$）的 MTZ 不等式：\n$$\nu_{i} - u_{j} + 3\\,x_{ij} \\le 2.\n$$\n\n枚举这些配对，得到以下六个不等式：\n$$\nu_{2} - u_{3} + 3x_{23} \\le 2,\\quad\nu_{2} - u_{4} + 3x_{24} \\le 2,\\quad\nu_{3} - u_{2} + 3x_{32} \\le 2,\n$$\n$$\nu_{3} - u_{4} + 3x_{34} \\le 2,\\quad\nu_{4} - u_{2} + 3x_{42} \\le 2,\\quad\nu_{4} - u_{3} + 3x_{43} \\le 2,\n$$\n以及对 $i \\in \\{2,3,4\\}$ 的 $1 \\le u_{i} \\le 3$。\n\n与选项比较：\n- 选项A完全匹配我们为 $n=4$ 推导出的 MTZ 形式。\n- 选项B不完整（省略了几个必需的 $(i,j)$ 配对）。\n- 选项C使用了备选的系数4和右侧项3，但错误地将 $u_{2},u_{3},u_{4}$ 的上界设置为4而不是3，这与标准的位置解释 $1 \\le u_{i} \\le n-1$ 不符。\n- 选项D错误地对 $u_{1}$ 设置了界限（在此变体中，$u_{1}$ 不属于 MTZ 变量），并使用了上界4。\n- 选项E错误地将城市1包含在 MTZ 不等式中，并且也对 $u_{1}$ 进行了界定，这两者都不是针对固定出发点的标准 MTZ 构建方法的一部分。\n\n因此，针对此特定问题的完整且正确的约束集由选项A给出。", "answer": "$$\\boxed{A}$$", "id": "1411103"}]}
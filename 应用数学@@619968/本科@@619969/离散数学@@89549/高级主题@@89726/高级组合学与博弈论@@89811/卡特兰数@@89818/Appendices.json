{"hands_on_practices": [{"introduction": "这个练习将我们带入一个看似纯粹的几何谜题：如何用矩形完美地铺满一个阶梯形状。这个问题的精妙之处在于，其解决方案揭示了卡特兰数的内在结构。通过剖析这个具体的组合问题，你将亲手推导出定义卡特兰数的核心递推关系 $C_n = \\sum_{k=1}^{n} C_{k-1}C_{n-k}$，深刻体会到将复杂结构分解为更小的自相似子问题是组合数学中的一项关键策略。[@problem_id:1355213]", "problem": "在一个新的集成电路设计中，一个专门的存储区域被构造成“阶梯状多格骨牌”的形状。一个大小为 $n$ 的阶梯状多格骨牌是由单位正方形在网格上排列形成的二维图形。它由 $n$ 列正方形组成，从左到右索引为 $i=1, 2, \\dots, n$。对每个 $i$，第 $i$ 列的高度为 $i$ 个单位正方形。\n\n为了优化制造过程，这整个阶梯状区域必须被完美地剖分（无重叠、无间隙）成恰好 $n$ 个矩形块。这些矩形块的边必须与网格轴对齐。\n\n确定将一个大小为 $n=10$ 的阶梯状多格骨牌进行此类剖分的总方法数。", "solution": "设 $S_{n}$ 是列高为 $1,2,\\dots,n$ 的阶梯状多格骨牌。任何包含在 $S_{n}$ 内的轴对齐矩形，其左上角必定位于一个对角线单元格。确实，如果一个矩形的左上角位于 $(a,b)$（第 $a$ 列，从底部数第 $b$ 行），那么要使整个上边缘都位于 $S_{n}$ 内，第 $b$ 行必须存在于第 $a$ 列中，这要求 $b \\leq a$。并且，第 $b$ 行最左边的单元格位于第 $b$ 列，这迫使 $a=b$。因此，每个矩形都有一个位于 $(t,t)$（对于某个 $t \\in \\{1,\\dots,n\\}$）的唯一左上角，并且，在任何剖分为 $n$ 个矩形的方案中，每个对角线单元格上恰好有一个矩形。\n\n设 $T(n)$ 是将 $S_{n}$ 剖分为恰好 $n$ 个矩形的此类剖分方法的数量，并为空图形设定 $T(0)=1$。在任一剖分中，考虑那些与底行相接的矩形。在这些矩形中，取其左上角索引 $k$ 最大的那个；它的左上角是 $(k,k)$，并且由于它与底行相接，其高度为 $k$，且占据了从第 $k$ 列到某个第 $m \\geq k$ 列的底部线段。这个矩形的左边缘和上边缘所形成的边界，将剩余的单元格分成了两个不相交的阶梯状区域：一个与 $S_{k-1}$ 同构的左上区域，以及一个与 $S_{n-k}$ 同构的右下区域。任何矩形都不能跨越这个分离边界，因为每个矩形都锚定在其左上角的对角线单元格上，而该单元格必须完全位于一侧。因此，对这两个区域的剖分选择是独立的，从而得到递推关系\n$$\nT(n)=\\sum_{k=1}^{n} T(k-1)\\,T(n-k), \\quad T(0)=1,\\;T(1)=1.\n$$\n这是卡特兰递推关系，所以 $T(n)=C_{n}$，其中\n$$\nC_{n}=\\frac{1}{n+1}\\binom{2n}{n}.\n$$\n对于 $n=10$，\n$$\nT(10)=C_{10}=\\frac{1}{11}\\binom{20}{10}=16796.\n$$\n因此，剖分的总数是 $16796$。", "answer": "$$\\boxed{16796}$$", "id": "1355213"}, {"introduction": "接下来，我们从几何铺砖转向卡特兰数的一个更经典的应用场景：格路计数。问题中描述的“脆弱状态”巧妙地对应了那些穿过特定边界的“坏”路径，也就是不符合条件的戴克路径（Dyck paths）。这个练习旨在让你掌握一个强大而优美的组合工具——反射原理。通过它，你将学会一种重要的计数思想：当直接计算符合条件的案例很困难时，我们可以先计算不符合条件的案例，然后用总数减去它，从而得到最终答案。[@problem_id:1355212]", "problem": "在一个分布式数据存储系统中，使用一种特定协议来确保冗余性和容错性。该协议涉及一个由 $2n$ 个操作组成的序列，其中包含恰好 $n$ 个“主写入”(P) 操作和 $n$ 个“次写入”(S) 操作，这些操作按顺序执行。\n\n设 $N_P(k)$ 和 $N_S(k)$ 分别表示在序列中第 $k$ 个操作完成之后（对于 $1 \\le k \\le 2n$），主写入和次写入操作的累计数量。\n\n如果对于 $1 \\le k \\le 2n$ 范围内的任何 $k$，满足条件 $N_S(k)  N_P(k)$，则定义系统进入“脆弱状态”。\n\n确定长度为 $2n$ 的、会使系统至少进入一次脆弱状态的不同操作序列的数量。以关于 $n$ 的闭式解析表达式给出你的答案。", "solution": "将每个操作序列解释为一条长度为 $2n$ 的格路，其中 P 操作为向上步，S 操作为向下步，并定义部分和 $X_{k} = N_{P}(k) - N_{S}(k)$，对于 $1 \\leq k \\leq 2n$。由于序列中恰好有 $n$ 个 P 和 $n$ 个 S，因此序列在 $X_{2n} = 0$ 处结束。系统进入脆弱状态当且仅当存在 $k$ 使得 $X_{k}  0$。\n\n为计算至少进入一次脆弱状态的序列数量，我们使用反射原理。对于任何首次在时刻 $t$ 满足 $X_{t} = -1$ 的序列，通过交换该前缀中的 P 和 S 来反射长度为 $t$ 的前缀。此反射将时刻 $t$ 的前缀和从 $-1$ 映射到 $+1$，而保持其余步骤不变。因此，最终的和从 $0$ 增加到 $2$，所以反射后的序列有 $n+1$ 个 P 和 $n-1$ 个 S。这种构造是在至少进入一次脆弱状态的序列与长度为 $2n$ 且包含 $n+1$ 个 P 和 $n-1$ 个 S 的序列之间建立了一个双射。\n\n因此，脆弱序列的数量等于在这样一个不平衡序列中选择 P 操作位置的方法数：\n$$\n\\binom{2n}{n+1}.\n$$\n根据二项式系数的对称性和一个标准恒等式，这等于\n$$\n\\binom{2n}{n-1} = \\frac{n}{n+1}\\binom{2n}{n}.\n$$\n这些等价的闭式中的任何一个都给出了所求的数量。", "answer": "$$\\boxed{\\binom{2n}{n-1}}$$", "id": "1355212"}, {"introduction": "生成函数是将整个无穷序列压缩进一个紧凑函数的强大代数工具。在常规问题中，我们通常从序列出发构造其生成函数，但这个练习将反其道而行之。你将从已知的卡特兰数生成函数 $c(z) = \\frac{1-\\sqrt{1-4z}}{2z}$ 的封闭形式出发，运用分析学的工具来揭示序列本身的内在性质，特别是它的增长速度。这个练习将为你展示组合学与复分析之间的深刻联系：函数在复平面上的“奇点”位置决定了其展开系数的渐近行为。[@problem_id:2258797]", "problem": "在组合数学中，Catalan数（记作$C_n$，其中$n \\ge 0$）是一个在各种计数问题中出现的自然数序列。第$n$个Catalan数由公式 $C_n = \\frac{1}{n+1}\\binom{2n}{n}$ 给出。Catalan数的普通生成函数是幂级数 $c(z) = \\sum_{n=0}^\\infty C_n z^n$。\n\n可以证明，该幂级数在复平面的一个区域内有闭式解析延拓，由以下函数给出：\n$$f(z) = \\frac{1 - \\sqrt{1 - 4z}}{2z}$$\n其中$\\sqrt{\\cdot}$表示平方根函数的主分支，其支割线沿负实轴。确定幂级数$c(z)$的收敛半径。\n\n请用精确分数表示你的答案。", "solution": "我们已知普通生成函数 $c(z)=\\sum_{n=0}^{\\infty}C_{n}z^{n}$ 及其解析延拓\n$$\nf(z)=\\frac{1-\\sqrt{1-4z}}{2z},\n$$\n其中$\\sqrt{\\cdot}$表示主分支，其自变量的支割线沿负实轴。由于$f$是$c$在$z=0$附近的解析延拓，幂级数$c(z)$的收敛半径$R$等于从$0$到$f$的最近奇点的距离。\n\n我们分析$f$的奇点：\n\n1) 分母表明在$z=0$处可能存在一个奇点。然而，\n$$\n\\lim_{z\\to 0}\\frac{1-\\sqrt{1-4z}}{2z}=\\lim_{z\\to 0}\\frac{\\frac{d}{dz}\\left(1-\\sqrt{1-4z}\\right)}{2}=\\lim_{z\\to 0}\\frac{2}{2\\sqrt{1-4z}}=1,\n$$\n因此$z=0$是一个可去奇点，不影响收敛半径。\n\n2) 不可去奇点来自平方根$\\sqrt{1-4z}$。主平方根在其自变量等于$0$时有一个支点，在自变量平面上沿负实轴有一条支割线。设$w=1-4z$，支点在$w=0$处，这对应于\n$$\n1-4z=0 \\quad \\Longrightarrow \\quad z=\\frac{1}{4}.\n$$\n通过$z=(1-w)/4$，支割线$\\{w\\in \\mathbb{R}: w\\le 0\\}$映射到$\\{z\\in \\mathbb{R}: z\\ge \\frac{1}{4}\\}$。因此，$f$在射线$[\\,\\frac{1}{4},+\\infty)$上不是解析的，离$0$最近的奇点在$z=\\frac{1}{4}$处。\n\n根据一般原理，以$0$为中心的幂级数的收敛半径等于从$0$到其解析延拓的最近奇点的距离（等价于Cauchy–Hadamard定理），我们得到\n$$\nR=\\left|\\,\\frac{1}{4}\\,\\right|=\\frac{1}{4}.\n$$\n因此，$c(z)$的收敛半径是$\\frac{1}{4}$。", "answer": "$$\\boxed{\\frac{1}{4}}$$", "id": "2258797"}]}
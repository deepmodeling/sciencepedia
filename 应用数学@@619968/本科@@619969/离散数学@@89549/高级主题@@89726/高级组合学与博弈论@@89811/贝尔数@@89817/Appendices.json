{"hands_on_practices": [{"introduction": "要真正掌握贝尔数，最好的方法就是亲手计算。这个练习将指导你使用贝尔数的递归关系式 $B_{n+1} = \\sum_{k=0}^{n} \\binom{n}{k} B_k$ 来计算序列中的前几个数。通过这个基础计算，你不仅能熟悉贝尔数的增长速度，还能对其数值特性，例如是否为质数，有一个直观的认识 [@problem_id:1351268]。", "problem": "在数据科学领域，一项基本任务是聚类，它涉及对一组数据点进行分组。一种理解此概念的方法是，将一个集合划分为若干非空、不相交的子集。将一个包含 $n$ 个不同元素的集合进行划分的总方法数由第 $n$ 个贝尔数给出，记为 $B_n$。\n\n按照惯例，空集的贝尔数为 $B_0 = 1$。对于 $n \\ge 0$，贝尔数可以通过以下递推关系生成：\n$$B_{n+1} = \\sum_{k=0}^{n} \\binom{n}{k} B_k$$\n其中 $\\binom{n}{k}$ 是二项式系数“n 选 k”，计算公式为 $\\frac{n!}{k!(n-k)!}$。\n\n一位研究人员正在分析这些数在小数据集上的数学性质。考虑序列中的前六个贝尔数：$B_0, B_1, B_2, B_3, B_4, B_5$。\n\n下列哪个选项正确列出了在这个特定序列中找到的所有素数？\n\nA. 只有 $B_2$ 是素数。\n\nB. 只有 $B_3$ 是素数。\n\nC. 只有 $B_2$ 和 $B_3$ 是素数。\n\nD. 只有 $B_1$、$B_2$ 和 $B_3$ 是素数。\n\nE. 只有 $B_2$、$B_3$ 和 $B_5$ 是素数。", "solution": "我们使用给定的递推关系和惯例 $B_{0}=1$：\n$$B_{n+1}=\\sum_{k=0}^{n}\\binom{n}{k}B_{k}.$$\n\n依次计算。\n\n对于 $n=0$：\n$$B_{1}=\\sum_{k=0}^{0}\\binom{0}{k}B_{k}=\\binom{0}{0}B_{0}=1\\cdot 1=1.$$\n\n对于 $n=1$：\n$$B_{2}=\\sum_{k=0}^{1}\\binom{1}{k}B_{k}=\\binom{1}{0}B_{0}+\\binom{1}{1}B_{1}=1\\cdot 1+1\\cdot 1=2.$$\n\n对于 $n=2$：\n$$B_{3}=\\sum_{k=0}^{2}\\binom{2}{k}B_{k}=\\binom{2}{0}B_{0}+\\binom{2}{1}B_{1}+\\binom{2}{2}B_{2}=1\\cdot 1+2\\cdot 1+1\\cdot 2=5.$$\n\n对于 $n=3$：\n$$B_{4}=\\sum_{k=0}^{3}\\binom{3}{k}B_{k}=\\binom{3}{0}B_{0}+\\binom{3}{1}B_{1}+\\binom{3}{2}B_{2}+\\binom{3}{3}B_{3}=1\\cdot 1+3\\cdot 1+3\\cdot 2+1\\cdot 5=15.$$\n\n对于 $n=4$：\n$$B_{5}=\\sum_{k=0}^{4}\\binom{4}{k}B_{k}=\\binom{4}{0}B_{0}+\\binom{4}{1}B_{1}+\\binom{4}{2}B_{2}+\\binom{4}{3}B_{3}+\\binom{4}{4}B_{4}$$\n$$=1\\cdot 1+4\\cdot 1+6\\cdot 2+4\\cdot 5+1\\cdot 15=52.$$\n\n因此，前六个贝尔数是 $B_{0}=1$，$B_{1}=1$，$B_{2}=2$，$B_{3}=5$，$B_{4}=15$，$B_{5}=52$。\n\n根据素数的定义（大于1且恰好有两个正因数的整数），$B_{0}=1$ 和 $B_{1}=1$ 不是素数；$B_{2}=2$ 是素数；$B_{3}=5$ 是素数；$B_{4}=15$ 是合数；$B_{5}=52$ 是合数。因此，在 $B_{0},B_{1},B_{2},B_{3},B_{4},B_{5}$ 中，仅有的素数是 $B_{2}$ 和 $B_{3}$，这对应于选项C。", "answer": "$$\\boxed{C}$$", "id": "1351268"}, {"introduction": "组合计数问题常常涉及特定约束，而贝尔数提供了一个优雅的框架来解决它们。这个练习提出了一个经典情景：如果集合中的某些元素必须始终在一起，我们该如何计数？通过解决这个问题，你将学会一种强大的思维技巧——将受约束的元素“融合”成一个单一实体，从而将复杂问题简化为更低阶的贝尔数问题，即 $B_{n-1}$ [@problem_id:1351315]。", "problem": "在一个研究所中，一个新项目需要从 $n$ 名可用的科学家中组建团队。团队的组建必须遵循以下规则：每位科学家必须被分配到且仅分配到一个团队，并且每个团队必须至少有一名成员。这些团队没有编号或命名，这意味着不同团队组建方式之间的唯一区别在于团队本身的构成。\n\n在这 $n$ 位科学家中，有两位，Dr. Alice 和 Dr. Bob，以其高度协同的合作而闻名。项目负责人规定 Dr. Alice 和 Dr. Bob 必须在同一个团队中。\n\n令 $B_k$ 表示第 $k$ 个贝尔数 (Bell number)，定义为将一个包含 $k$ 个不同元素的集合划分为非空、无标签子集的总方式数。找出在给定约束条件下组建项目团队的方式数。请用贝尔数表示你的答案。", "solution": "我们将团队的组建建模为对一个大小为 $n$ 的集合 $S$ 的集合划分，其中团队是该划分的块。Dr. Alice 和 Dr. Bob 必须在同一个团队中的约束意味着他们必须位于划分的同一个块中。\n\n为了计算满足此条件的划分数量，我们可以采用一种组合技巧：将 Dr. Alice 和 Dr. Bob 视为一个不可分割的单一实体。这样，我们有效地将问题简化为对一个更小的集合进行划分。\n\n考虑一个由 $n-1$ 个元素组成的新集合，其中一个元素代表“Alice-Bob对”，其余 $n-2$ 个元素是剩下的科学家。对这个包含 $n-1$ 个元素的集合进行的任何划分，都将“Alice-Bob对”作为一个整体分配到一个团队中。这与原始问题中将 Alice 和 Bob 放在同一个团队的每一种方式都一一对应。\n\n因此，满足给定约束条件的团队组建方式总数，等于对一个包含 $n-1$ 个元素的集合进行划分的方式总数。根据定义，这个数字正是第 $n-1$ 个贝尔数，$B_{n-1}$。\n$$\n\\text{方式数} = B_{n-1}\n$$\n这个方法通过将受约束的元素合并，将问题简化为一个标准的、阶数更低的贝尔数问题，体现了组合推理的优雅之处。", "answer": "$$\\boxed{B_{n-1}}$$", "id": "1351315"}, {"introduction": "在掌握了“元素必须在一起”的技巧后，我们来挑战一个更复杂但同样常见的情景：“某些元素必须分开”。这个问题要求我们运用容斥原理，这是一种在组合数学中至关重要的通用工具。你会发现，上一个练习 [@problem_id:1351315] 中学到的思想将成为解决这个更高级问题的关键组成部分，帮助我们系统地减去不符合条件的划分方式 [@problem_id:1351303]。", "problem": "一个研究所正在将其 $n$ 个不同的研究项目组织成一个或多个非空、不重叠的联盟。一个联盟是一组项目，而将项目安排成联盟的特定方式称为一个划分。将一个包含 $n$ 个元素的集合进行划分的总方法数由第 $n$ 个贝尔数（Bell number）给出，记作 $B_n$。例如，$B_3 = 5$，因为一个包含3个项目 {1, 2, 3} 的集合可以以5种方式进行划分：{{1}, {2}, {3}}，{{1, 2}, {3}}，{{1, 3}, {2}}，{{2, 3}, {1}} 和 {{1, 2, 3}}。\n\n在这 $n$ 个项目中，有三个高度敏感的项目：Project Alpha、Project Beta 和 Project Gamma。为保护知识产权边界，该研究所的政策规定，这三个特定项目中的任意两个都不能被置于同一个联盟中。这意味着 Project Alpha、Project Beta 和 Project Gamma 必须各自属于不同的联盟。\n\n假设 $n \\ge 3$，求允许的划分数量的公式。请用贝尔数（例如 $B_n$、$B_{n-1}$ 等）来表示你的答案。", "solution": "我们要求解一个包含 $n$ 个元素的集合的划分数量，其中三个指定的元素（例如 $A$、$B$ 和 $C$）各自位于不同的区块中。设 $B_{n}$ 表示第 $n$ 个贝尔数，即一个 $n$ 元素集合的划分总数。\n\n我们要从总划分数中减去所有不符合条件的划分数。不符合条件的划分是指至少有一对指定元素（$A, B, C$）在同一个区块中。我们可以使用容斥原理来计算这些不符合条件的划分数量。\n\n设事件：\n- $E_{AB}$：$A$ 和 $B$ 在同一个区块中。\n- $E_{AC}$：$A$ 和 $C$ 在同一个区块中。\n- $E_{BC}$：$B$ 和 $C$ 在同一个区块中。\n\n我们想计算的“不符合条件的”划分数量为 $|E_{AB} \\cup E_{AC} \\cup E_{BC}|$。根据容斥原理：\n$$\n|E_{AB} \\cup E_{AC} \\cup E_{BC}| = \\left(|E_{AB}| + |E_{AC}| + |E_{BC}|\\right) - \\left(|E_{AB} \\cap E_{AC}| + |E_{AB} \\cap E_{BC}| + |E_{AC} \\cap E_{BC}|\\right) + |E_{AB} \\cap E_{AC} \\cap E_{BC}|\n$$\n\n现在我们用贝尔数来计算每一项的大小：\n- $|E_{AB}|$：要计算 $A$ 和 $B$ 在同一个区块中的划分数，我们将它们视为一个单一元素。问题就变成了对 $n-1$ 个元素进行划分，其数量为 $B_{n-1}$。根据对称性，有 $|E_{AB}| = |E_{AC}| = |E_{BC}| = B_{n-1}$。因此，第一项的和是 $3 B_{n-1}$。\n- $|E_{AB} \\cap E_{AC}|$：这个交集代表 $A$ 和 $B$ 在一起，并且 $A$ 和 $C$ 也在同一个区块。这意味着 $A$、$B$ 和 $C$ 必须全部在同一个区块中。我们将这三个元素合并成一个单一元素，问题就变成了对 $n-2$ 个元素进行划分，其数量为 $B_{n-2}$。同样，所有成对交集的大小都是 $B_{n-2}$。因此，第二项的和是 $3 B_{n-2}$。\n- $|E_{AB} \\cap E_{AC} \\cap E_{BC}|$：这个三重交集也表示 $A$、$B$、$C$ 都在同一个区块中，因此其大小为 $B_{n-2}$。\n\n将这些值代入容斥原理公式，得到不符合条件的划分总数为：\n$$\n3 B_{n-1} - 3 B_{n-2} + B_{n-2} = 3 B_{n-1} - 2 B_{n-2}\n$$\n所求的允许划分数量，是总划分数 $B_{n}$ 减去不符合条件的划分数：\n$$\n\\text{允许的划分数量} = B_{n} - (3 B_{n-1} - 2 B_{n-2}) = B_{n} - 3 B_{n-1} + 2 B_{n-2}.\n$$\n这个公式对所有 $n \\geq 3$ 成立。", "answer": "$$\\boxed{B_{n} - 3 B_{n-1} + 2 B_{n-2}}$$", "id": "1351303"}]}
{"hands_on_practices": [{"introduction": "掌握约束变量和自由变量之间区别的第一步是进行细致、系统性的分析。本练习将引导你检查公式中每个变量的具体出现情况，这是准确解释逻辑陈述的一项基本技能。通过使用下标来标记每次出现，这个问题鼓励你采用精确的、循序渐进的方法。[@problem_id:1353845]", "problem": "考虑以下一阶逻辑的良构公式，其中 $P, Q,$ 和 $R$ 是谓词符号。为了区分变量的不同出现，每个变量都被赋予了一个唯一的下标。\n\n$$( \\forall x . P(x_1, y_2) ) \\rightarrow ( \\exists y . ( Q(y_3, z_4) \\land R(x_5, y_6) ) )$$\n\n一个变量在公式中的一次出现被称为*约束的* (bound)，如果它位于量化该变量的量词（$\\forall$ 或 $\\exists$）的*辖域* (scope) 内。如果一次出现不是约束的，则它是*自由的* (free)。量词的辖域是该量词所应用的子公式。\n\n下列哪个集合包含且仅包含上述公式中所有自由的带编号变量的出现？\n\nA. $\\{x_1, y_3, y_6\\}$\n\nB. $\\{y_2, z_4, x_5\\}$\n\nC. $\\{z_4, x_5\\}$\n\nD. $\\{y_2, y_3, y_6\\}$\n\nE. $\\{x_1, x_5\\}$\n\nF. $\\{y_2, z_4\\}$", "solution": "我们分析该公式\n$$\n( \\forall x . P(x_{1}, y_{2}) ) \\rightarrow ( \\exists y . ( Q(y_{3}, z_{4}) \\land R(x_{5}, y_{6}) ) ).\n$$\n根据定义，量词的辖域是它所管辖的子公式。量词 $\\forall x$ 的辖域恰好是 $P(x_{1}, y_{2})$，所以它约束了 $P(x_{1}, y_{2})$ 中变量 $x$ 的每一次出现。量词 $\\exists y$ 的辖域恰好是 $Q(y_{3}, z_{4}) \\land R(x_{5}, y_{6})$，所以它约束了该合取式中变量 $y$ 的每一次出现。下标表示不同的出现，但约束是由其基础变量符号决定的。\n\n我们现在对每次带编号的出现进行分类：\n- $x_{1}$ 出现在 $P(x_{1}, y_{2})$ 中，位于 $\\forall x$ 的辖域内，因此 $x_{1}$ 是约束的。\n- $y_{2}$ 出现在 $P(x_{1}, y_{2})$ 中，但左侧辖域内没有针对 $y$ 的量词；$\\exists y$ 在右侧，其约束作用不会跨越蕴含符号。因此 $y_{2}$ 是自由的。\n- $y_{3}$ 出现在 $Q(y_{3}, z_{4})$ 中，位于 $\\exists y$ 的辖域内，因此 $y_{3}$ 是约束的。\n- $z_{4}$ 出现在 $Q(y_{3}, z_{4})$ 中，位于 $\\exists y$ 的辖域内，但该量词并不约束 $z$；公式中没有任何地方有量化 $z$ 的量词。因此 $z_{4}$ 是自由的。\n- $x_{5}$ 出现在右侧的 $R(x_{5}, y_{6})$ 中；它不在 $\\forall x$ 的辖域内（该辖域仅限于蕴含式的左侧），也没有其他量化 $x$ 的量词。因此 $x_{5}$ 是自由的。\n- $y_{6}$ 出现在 $R(x_{5}, y_{6})$ 中，位于 $\\exists y$ 的辖域内，因此 $y_{6}$ 是约束的。\n\n因此，自由的出现恰好是 $\\{y_{2}, z_{4}, x_{5}\\}$，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1353845"}, {"introduction": "一旦你能够识别单个变量的出现，下一步就是从整体上理解公式。这个练习挑战你确定一个复杂逻辑表达式的完整自由变量集，这实际上定义了公式的“公共接口”。正确解析运算符的优先级和每个量词的有限作用域是解决这个问题的关键。[@problem_id:1353789]", "problem": "在软件工程领域，形式化方法使用谓词逻辑来规约和验证系统属性。一个逻辑公式可以描述一个所需的状态或行为，其变量对应于系统参数或状态变量。如果一个变量位于引用它的量词（例如全称量词 $\\forall$，“对所有”，或存在量词 $\\exists$，“存在”）的作用域内，则该变量被认为是“约束的”。如果一个变量不是约束的，则它是“自由的”。自由变量代表外部参数，必须为这些参数赋值，公式才能有具体的真/假值。\n\n考虑以下逻辑公式，该公式旨在使用谓词 $P$、$Q$、$R$ 和 $S$ 规约一个系统的复杂属性：\n$$\n(\\forall x (P(x) \\rightarrow Q(y))) \\land (\\exists y R(y)) \\rightarrow S(y, z)\n$$\n假设按照标准的运算符优先级，其中 $\\rightarrow$ 是主联结词，请确定此公式中自由变量的完整集合。\n\nA. $\\{z\\}$\n\nB. $\\{y, z\\}$\n\nC. $\\{x, y, z\\}$\n\nD. $\\emptyset$ (空集)\n\nE. $\\{y\\}$", "solution": "我们首先确定主联结词。根据给定的优先级，该公式的结构为\n$$\n\\bigl[(\\forall x\\,(P(x)\\rightarrow Q(y))) \\land (\\exists y\\,R(y))\\bigr] \\rightarrow S(y,z).\n$$\n令前件为\n$$\nA \\equiv (\\forall x\\,(P(x)\\rightarrow Q(y))) \\land (\\exists y\\,R(y)).\n$$\n我们确定每个部分中的自由变量。\n\n1) 在 $\\forall x\\,(P(x)\\rightarrow Q(y))$ 中，量词 $\\forall x$ 约束了 $(P(x)\\rightarrow Q(y))$ 中 $x$ 的所有出现。$Q(y)$ 中出现的 $y$ 不在该子公式中任何 $y$ 量词的作用域内，因此 $y$ 在这里是自由的。\n\n2) 在 $\\exists y\\,R(y)$ 中，量词 $\\exists y$ 约束了 $R(y)$ 中 $y$ 的所有出现。这里没有自由变量。\n\n3) 对于合取式 $A = \\phi \\land \\psi$，合取联结词不约束变量，A 的自由变量集合是其合取项自由变量集合的并集。根据 (1) 和 (2)，A 有一个自由变量 $y$，没有其他自由变量。因此，A 的自由变量集合是 $\\{y\\}$。\n\n4) 在后件 $S(y,z)$ 中，没有量词；因此在这个子公式中，$y$ 和 $z$ 都是自由的。\n\n5) 对于蕴含式 $A \\rightarrow S(y,z)$，蕴含联结词不约束变量，所以整个公式的自由变量集合是 A 的自由变量集和 $S(y,z)$ 的自由变量集的并集，即 $\\{y\\} \\cup \\{y,z\\} = \\{y,z\\}$。\n\n因此，自由变量的完整集合是 $\\{y,z\\}$，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1353789"}, {"introduction": "在形式逻辑和计算机科学中，清晰性至关重要。虽然一个变量在公式中同时以自由和约束两种身份出现时，该公式在技术上是有效的，但这被认为是一种不良实践，因为它可能导致错误。本练习从分析转向主动重写，要求你通过重命名一个约束变量来找到一个逻辑上等价但更清晰的公式——这是一种被称为α-变换（alpha-conversion）的常见且重要的技术。[@problem_id:1353838]", "problem": "在一阶逻辑的研究中，一个变量在公式中的出现被分为*约束的*或*自由的*。如果一个变量的出现位于以该变量命名的量词（例如 $\\forall$ 或 $\\exists$）的辖域内，那么它的这次出现就是约束的。如果一个变量的出现不是约束的，那么它就是自由的。例如，在公式 $\\forall x P(x, y)$ 中，$x$ 的出现是约束的，而 $y$ 的出现是自由的。\n\n在形式逻辑中，一种良好实践是，在书写公式时，任何给定的变量要么总是约束的，要么总是自由的，而不能在同一个公式中既有约束出现又有自由出现。这可以避免逻辑代换过程中的歧义和潜在错误。\n\n考虑以下合式公式：\n$$(\\forall x \\, \\exists y \\, P(x, y)) \\land Q(y)$$\n在这个公式中，子公式 $P(x, y)$ 中的变量 $y$ 被存在量词 $\\exists y$ 约束。然而，子公式 $Q(y)$ 中的变量 $y$ 是自由的，因为它在量词的辖域之外。\n\n你的任务是从以下选项中选择一个与给定公式逻辑等价的公式，但它经过重写，解决了变量 $y$ 的这种双重角色问题。\n\nA. $(\\forall x \\, \\exists z \\, P(x, z)) \\land Q(y)$\n\nB. $\\forall x \\, \\exists y \\, (P(x, y) \\land Q(y))$\n\nC. $(\\forall x \\, \\exists y \\, P(x, y)) \\land Q(z)$\n\nD. $\\forall x \\, ((\\exists y \\, P(x, y)) \\land Q(y))$\n\nE. $(\\forall x \\, \\exists y \\, P(x, y)) \\land (\\exists y \\, Q(y))$", "solution": "我们从给定的合式公式开始：\n$$(\\forall x \\, \\exists y \\, P(x,y)) \\land Q(y).$$\n在这个公式中，$P(x,y)$ 内部 $y$ 的出现被量词 $\\exists y$ 约束，而 $Q(y)$ 内部 $y$ 的出现是自由的。任务是找到一个逻辑等价的公式，以避免 $y$ 的这种双重角色。\n\n一个标准的逻辑法则是约束变量的α-换名：如果变量 $z$ 的出现方式不会导致变量捕获，那么用一个新鲜变量替换一个约束变量，所得公式与原公式逻辑等价。形式上，对于任何公式 $\\varphi(y)$，其中 $z$ 不在会被捕获的位置上自由出现，我们有：\n$$\\exists y \\, \\varphi(y) \\equiv \\exists z \\, \\varphi(z), \\quad \\forall x \\, \\psi(x) \\equiv \\forall u \\, \\psi(u).$$\n将此法则应用于子公式 $\\forall x \\, \\exists y \\, P(x,y)$，我们可以将约束变量 $y$ 重命名为一个新鲜变量 $z$ 而不改变其逻辑内容：\n$$\\forall x \\, \\exists y \\, P(x,y) \\equiv \\forall x \\, \\exists z \\, P(x,z).$$\n因此，\n$$(\\forall x \\, \\exists y \\, P(x,y)) \\land Q(y) \\equiv (\\forall x \\, \\exists z \\, P(x,z)) \\land Q(y).$$\n这就解决了 $y$ 的双重角色问题，因为现在 $y$ 只作为自由变量出现（在 $Q(y)$ 中），而 $z$ 只作为约束变量出现（在 $P(x,z)$ 中）。这对应于选项 A。\n\n现在我们验证其他选项并非既逻辑等价又解决了角色问题：\n- 选项 B：$\\forall x \\, \\exists y \\, (P(x,y) \\land Q(y))$ 与原公式不等价，因为它将 $Q(y)$ 置于存在量词的辖域内，改变了其依赖关系：原合取项 $Q(y)$ 是一个关于 $y$ 的赋值的自由条件，而在 B 中，对于每个 $x$ 选择的 $y$ 的存在见证，都要求 $Q(y)$ 为真。\n- 选项 C：$(\\forall x \\, \\exists y \\, P(x,y)) \\land Q(z)$ 用 $z$ 替换了自由变量 $y$。开公式的逻辑等价性是相对于同一赋值进行评估的；左式依赖于赋值为 $y$ 提供的值，而右式依赖于为 $z$ 提供的值，所以它们通常不等价。\n- 选项 D：$\\forall x \\, ((\\exists y \\, P(x,y)) \\land Q(y))$ 与原公式等价，因为 $x$ 在 $Q(y)$ 中不是自由变量，并且当 $x$ 在 $B$ 中不是自由变量时，我们有等价式 $\\forall x \\, (A(x) \\land B) \\equiv (\\forall x \\, A(x)) \\land B$。然而，它没有解决双重角色问题，因为 $y$ 在 $P$ 中仍然是约束的，在 $Q$ 中仍然是自由的。\n- 选项 E：$(\\forall x \\, \\exists y \\, P(x,y)) \\land (\\exists y \\, Q(y))$ 在第二个合取项中约束了 $y$，将整体真值条件从依赖一个自由变量 $y$ 改变为断言存在某个满足 $Q$ 的 $y$，因此它与原公式不等价。\n\n因此，唯一既与给定公式逻辑等价又解决了 $y$ 的双重角色问题的选项是 A。", "answer": "$$\\boxed{A}$$", "id": "1353838"}]}
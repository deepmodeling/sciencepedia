{"hands_on_practices": [{"introduction": "我们从一个基础但至关重要的案例开始。当一个随机过程的被积函数是确定性函数时，其二次变分过程也将是确定性的，这极大地简化了分析。本练习 [@problem_id:3068882] 将引导你亲手验证在这种理想情况下 Novikov 条件是如何被轻易满足的，并通过直接计算来证明相关的随机指数（Doléans-Dade exponential）确实是一个鞅，其期望值为1。这个实践旨在巩固你对随机指数定义和 Itô 积分性质的理解。", "problem": "设 $\\{W_t\\}_{t \\in [0,\\pi]}$ 为一个带滤概率空间上的标准布朗运动。考虑确定性有界函数 $u_t = \\lambda \\cos(t)$，其中 $\\lambda \\in \\mathbb{R}$ 为一固定的实常数，并定义连续局部鞅 $M_t = \\int_{0}^{t} u_s \\,\\mathrm{d}W_s$，$t \\in [0,\\pi]$。设 $\\mathcal{E}(M)_t$ 表示 $M_t$ 的随机指数（也称为 Doléans–Dade 指数）。\n\n仅使用 Itô 积分和布朗运动的基本定义与性质，以及关于高斯随机变量的标准结论，完成以下任务：\n\n1. 从第一性原理出发，论证为何对于在有限时间域 $[0,\\pi]$ 上的这个确定性有界被积函数 $u_t$，Novikov 条件是平凡成立的。\n2. 计算期望 $E\\!\\left[\\mathcal{E}(M)_{\\pi}\\right]$ 的精确值。\n\n你的最终答案必须是一个精确的实数。无需四舍五入。", "solution": "用户提供的问题经评估有效，因为它在随机微积分理论方面有科学依据，问题表述清晰、客观且内部一致。因此，我们可以着手提供完整解答。\n\n问题要求完成两项任务：首先，论证为何 Novikov 条件是平凡成立的；其次，计算期望 $E[\\mathcal{E}(M)_{\\pi}]$。\n\n设 $\\{W_t\\}_{t \\in [0,\\pi]}$ 为标准布朗运动。给定确定性函数 $u_t = \\lambda \\cos(t)$，其中 $\\lambda \\in \\mathbb{R}$，以及连续局部鞅 $M_t = \\int_{0}^{t} u_s \\,\\mathrm{d}W_s$。\n\n**1. Novikov 条件的验证**\n\nNovikov 条件为连续局部鞅 $M_t$ 的随机指数 $\\mathcal{E}(M)_t$ 成为一个真鞅提供了充分判据。该条件表明，如果在给定的时间域 $T$ 上满足\n$$\nE\\left[ \\exp\\left( \\frac{1}{2} \\langle M \\rangle_T \\right) \\right] < \\infty\n$$\n那么 $\\{\\mathcal{E}(M)_t\\}_{t \\in [0,T]}$ 就是一个鞅。\n\n首先，我们必须计算 $M_t = \\int_0^t u_s \\,\\mathrm{d}W_s$ 的二次变差过程 $\\langle M \\rangle_t$。根据具有确定性被积函数的 Itô 积分的性质，二次变差由下式给出：\n$$\n\\langle M \\rangle_t = \\left\\langle \\int_0^t u_s \\,\\mathrm{d}W_s \\right\\rangle_t = \\int_0^t u_s^2 \\,\\mathrm{d}s\n$$\n代入 $u_s = \\lambda \\cos(s)$，我们得到：\n$$\n\\langle M \\rangle_t = \\int_0^t (\\lambda \\cos(s))^2 \\,\\mathrm{d}s = \\lambda^2 \\int_0^t \\cos^2(s) \\,\\mathrm{d}s\n$$\n我们需要在终端时刻 $T = \\pi$ 检查该条件。因此，我们计算 $\\langle M \\rangle_{\\pi}$：\n$$\n\\langle M \\rangle_{\\pi} = \\lambda^2 \\int_0^{\\pi} \\cos^2(s) \\,\\mathrm{d}s\n$$\n使用三角恒等式 $\\cos^2(s) = \\frac{1 + \\cos(2s)}{2}$，该积分变为：\n$$\n\\int_0^{\\pi} \\cos^2(s) \\,\\mathrm{d}s = \\int_0^{\\pi} \\frac{1 + \\cos(2s)}{2} \\,\\mathrm{d}s = \\frac{1}{2} \\left[ s + \\frac{\\sin(2s)}{2} \\right]_0^{\\pi} = \\frac{1}{2} \\left[ (\\pi + \\frac{\\sin(2\\pi)}{2}) - (0 + \\frac{\\sin(0)}{2}) \\right] = \\frac{\\pi}{2}\n$$\n因此，在时刻 $\\pi$ 的二次变差为：\n$$\n\\langle M \\rangle_{\\pi} = \\frac{\\lambda^2 \\pi}{2}\n$$\n现在我们可以计算 Novikov 条件中的期望：\n$$\nE\\left[ \\exp\\left( \\frac{1}{2} \\langle M \\rangle_{\\pi} \\right) \\right] = E\\left[ \\exp\\left( \\frac{1}{2} \\cdot \\frac{\\lambda^2 \\pi}{2} \\right) \\right] = E\\left[ \\exp\\left( \\frac{\\lambda^2 \\pi}{4} \\right) \\right]\n$$\n这里的关键点在于被积函数 $u_t$ 是确定性的。这意味着二次变差 $\\langle M \\rangle_t$ 也是一个关于时间的确定性函数。因此，$\\langle M \\rangle_{\\pi}$ 不是一个随机变量，而是一个固定的常数值 $\\frac{\\lambda^2 \\pi}{2}$。一个常数的期望就是它本身：\n$$\nE\\left[ \\exp\\left( \\frac{\\lambda^2 \\pi}{4} \\right) \\right] = \\exp\\left( \\frac{\\lambda^2 \\pi}{4} \\right)\n$$\n对于任何实数 $\\lambda$，值 $\\frac{\\lambda^2 \\pi}{4}$ 都是一个非负实数。任何实数的指数都是一个有限的正数。因此，\n$$\n\\exp\\left( \\frac{\\lambda^2 \\pi}{4} \\right) < \\infty\n$$\nNovikov 条件是平凡成立的，因为期望内的表达式是一个常数，而不是一个随机变量，这使得对其有限性的验证是直接的。\n\n**2. $E[\\mathcal{E}(M)_{\\pi}]$ 的计算**\n\n$M_t$ 的随机指数（或 Doléans–Dade 指数）定义为：\n$$\n\\mathcal{E}(M)_t = \\exp\\left( M_t - \\frac{1}{2} \\langle M \\rangle_t \\right)\n$$\n我们希望计算期望 $E[\\mathcal{E}(M)_{\\pi}]$。我们有：\n$$\nE[\\mathcal{E}(M)_{\\pi}] = E\\left[ \\exp\\left( M_{\\pi} - \\frac{1}{2} \\langle M \\rangle_{\\pi} \\right) \\right]\n$$\n由于我们已经确定 $\\langle M \\rangle_{\\pi} = \\frac{\\lambda^2 \\pi}{2}$ 是一个确定性常数，我们可以将包含它的指数项从期望中提出来：\n$$\nE[\\mathcal{E}(M)_{\\pi}] = \\exp\\left( -\\frac{1}{2} \\langle M \\rangle_{\\pi} \\right) E\\left[ \\exp(M_{\\pi}) \\right] = \\exp\\left( -\\frac{\\lambda^2 \\pi}{4} \\right) E\\left[ \\exp(M_{\\pi}) \\right]\n$$\n为了继续计算，我们必须确定随机变量 $M_{\\pi}$ 的分布。过程 $M_{\\pi}$ 是一个具有确定性被积函数的 Itô 积分：\n$$\nM_{\\pi} = \\int_0^{\\pi} u_s \\,\\mathrm{d}W_s = \\int_0^{\\pi} \\lambda \\cos(s) \\,\\mathrm{d}W_s\n$$\nItô 积分的一个基本性质是，对于一个确定性的、平方可积的被积函数 $f(t)$，积分 $\\int_0^T f(t) \\,\\mathrm{d}W_t$ 是一个高斯（正态分布）随机变量。该随机变量的均值为零：\n$$\nE[M_{\\pi}] = E\\left[ \\int_0^{\\pi} \\lambda \\cos(s) \\,\\mathrm{d}W_s \\right] = 0\n$$\n其方差由 Itô 等距性给出：\n$$\n\\text{Var}(M_{\\pi}) = E[M_{\\pi}^2] = E\\left[ \\left(\\int_0^{\\pi} \\lambda \\cos(s) \\,\\mathrm{d}W_s\\right)^2 \\right] = \\int_0^{\\pi} (\\lambda \\cos(s))^2 \\,\\mathrm{d}s = \\langle M \\rangle_{\\pi} = \\frac{\\lambda^2 \\pi}{2}\n$$\n所以，随机变量 $M_{\\pi}$ 服从正态分布 $M_{\\pi} \\sim N\\left(0, \\frac{\\lambda^2 \\pi}{2}\\right)$。\n\n接下来，我们计算 $E[\\exp(M_{\\pi})]$。这是 $M_{\\pi}$ 的矩生成函数 (MGF) 在 $t=1$ 处的值。对于一个一般正态随机变量 $X \\sim N(\\mu, \\sigma^2)$，其矩生成函数为 $M_X(t) = E[\\exp(tX)] = \\exp(\\mu t + \\frac{1}{2}\\sigma^2 t^2)$。\n对于 $M_{\\pi}$，我们有 $\\mu=0$ 和 $\\sigma^2 = \\frac{\\lambda^2 \\pi}{2}$。在 $t=1$ 处计算其矩生成函数：\n$$\nE[\\exp(M_{\\pi})] = \\exp\\left( 0 \\cdot 1 + \\frac{1}{2} \\left(\\frac{\\lambda^2 \\pi}{2}\\right) 1^2 \\right) = \\exp\\left( \\frac{\\lambda^2 \\pi}{4} \\right)\n$$\n最后，我们将此结果代回到我们关于 $E[\\mathcal{E}(M)_{\\pi}]$ 的表达式中：\n$$\nE[\\mathcal{E}(M)_{\\pi}] = \\exp\\left( -\\frac{\\lambda^2 \\pi}{4} \\right) E\\left[ \\exp(M_{\\pi}) \\right] = \\exp\\left( -\\frac{\\lambda^2 \\pi}{4} \\right) \\exp\\left( \\frac{\\lambda^2 \\pi}{4} \\right) = \\exp\\left( -\\frac{\\lambda^2 \\pi}{4} + \\frac{\\lambda^2 \\pi}{4} \\right) = \\exp(0) = 1\n$$\n另外，由于 Novikov 条件成立，$\\{\\mathcal{E}(M)_t\\}_{t \\in [0,\\pi]}$ 是一个鞅。鞅的一个性质是其期望值随时间保持不变。因此，$E[\\mathcal{E}(M)_{\\pi}] = E[\\mathcal{E}(M)_0]$。我们有 $M_0 = \\int_0^0 u_s \\,\\mathrm{d}W_s = 0$ 和 $\\langle M \\rangle_0 = \\int_0^0 u_s^2 \\,\\mathrm{d}s = 0$。因此，$\\mathcal{E}(M)_0 = \\exp(0 - \\frac{1}{2} \\cdot 0) = 1$。其期望为 $E[\\mathcal{E}(M)_0] = E[1] = 1$。两种方法得到相同的结果。第一种推导方法，即使用高斯分布的矩生成函数，更贴合题目中要求使用第一性原理的提示。\n该期望值与常数 $\\lambda$ 无关。", "answer": "$$\\boxed{1}$$", "id": "3068882"}, {"introduction": "验证一个随机指数是否为鞅不仅仅是一个理论上的练习，它在实际应用中具有深远的意义，尤其是在测度变换理论中。本练习 [@problem_id:3068900] 展示了这一核心应用：利用满足 Novikov 条件的随机指数作为 Radon-Nikodym 导数，从而定义一个新的概率测度（即 Girsanov 定理的应用）。你将通过计算一个在新的概率测度下的期望值，来体验这一强大工具如何简化金融衍生品定价等问题中的计算。", "problem": "设 $(\\Omega,\\mathcal{F},(\\mathcal{F}_t)_{0\\le t\\le T},\\mathbb{P})$ 是一个支撑着标准一维布朗运动 $W=(W_t)_{0\\le t\\le T}$ 的过滤概率空间，其中 $T>0$。固定一个常数 $\\mu\\in\\mathbb{R}$，并定义连续局部鞅 $M_t=\\int_0^t \\mu\\, dW_s=\\mu W_t$，其二次变差为 $\\langle M\\rangle_t=\\int_0^t \\mu^2\\, ds=\\mu^2 t$。设 Doléans–Dade 随机指数由下式给出\n$$\n\\mathcal{E}(M)_t=\\exp\\!\\Big(M_t-\\tfrac{1}{2}\\langle M\\rangle_t\\Big)=\\exp\\!\\Big(\\mu W_t-\\tfrac{1}{2}\\mu^2 t\\Big).\n$$\n  \n使用 Novikov 条件，验证 $\\mathcal{E}(M)_t$ 是一个真鞅，并且 $\\mathbb{E}_{\\mathbb{P}}[\\mathcal{E}(M)_T]=1$。然后通过 Radon–Nikodym (RN) 导数在 $\\mathcal{F}_T$ 上定义一个新的概率测度 $\\mathbb{Q}$\n$$\n\\frac{d\\mathbb{Q}}{d\\mathbb{P}}=\\mathcal{E}(M)_T.\n$$\n\n对于一个固定的 $a\\in\\mathbb{R}$，通过将其表示为 $\\mathbb{E}_{\\mathbb{P}}\\!\\big[\\mathbf{1}_{\\{W_T\\le a\\}}\\,\\mathcal{E}(M)_T\\big]$ 并计算所得积分，来显式计算期望 $\\mathbb{E}_{\\mathbb{Q}}\\big[\\mathbf{1}_{\\{W_T\\le a\\}}\\big]$。请用标准正态累积分布函数 $\\Phi$ 以闭式形式表示您的最终答案。无需四舍五入。最终答案必须是关于 $a$、$\\mu$ 和 $T$ 的单个解析表达式。", "solution": "该问题是有效的。它提出了一个随机微积分领域的标准且适定的问题，具体涉及 Novikov 条件的应用、随机指数的性质以及测度变换（Girsanov 定理）下的期望计算。所有给定的定义和条件在数学上都是合理的、内部一致的，并且足以得出一个唯一的解。\n\n解答过程按题目要求分为三个部分。\n\n首先，我们验证 Doléans–Dade 随机指数 $\\mathcal{E}(M)_t$ 是一个真鞅。该过程由 $M_t = \\mu W_t$ 给出，它是一个从 $M_0 = \\mu W_0 = 0$ 开始的连续局部鞅。其二次变差为 $\\langle M \\rangle_t = \\mu^2 t$。Novikov 条件指出，如果 $M_t$ 是一个 $M_0=0$ 的连续局部鞅，那么只要在时间范围 $T$ 内满足 $\\mathbb{E}_{\\mathbb{P}}\\big[\\exp(\\frac{1}{2}\\langle M \\rangle_T)\\big] < \\infty$，其随机指数 $\\mathcal{E}(M)_t$ 就是一个一致可积鞅。我们检验这个条件：\n$$\n\\mathbb{E}_{\\mathbb{P}}\\Big[\\exp\\Big(\\tfrac{1}{2}\\langle M \\rangle_T\\Big)\\Big] = \\mathbb{E}_{\\mathbb{P}}\\Big[\\exp\\Big(\\tfrac{1}{2}\\mu^2 T\\Big)\\Big].\n$$\n由于 $\\mu \\in \\mathbb{R}$ 和 $T > 0$ 是固定常数，项 $\\exp(\\frac{1}{2}\\mu^2 T)$ 是一个确定性常数。一个常数的期望就是它本身。因此，\n$$\n\\mathbb{E}_{\\mathbb{P}}\\Big[\\exp\\Big(\\tfrac{1}{2}\\mu^2 T\\Big)\\Big] = \\exp\\Big(\\tfrac{1}{2}\\mu^2 T\\Big).\n$$\n该值是有限的，因此 Novikov 条件得到满足。这证实了 $\\mathcal{E}(M)_t = \\exp(\\mu W_t - \\frac{1}{2}\\mu^2 t)$ 在 $t \\in [0, T]$上是一个真鞅。\n\n其次，我们验证 $\\mathbb{E}_{\\mathbb{P}}[\\mathcal{E}(M)_T] = 1$。由于 $\\mathcal{E}(M)_t$ 是一个真鞅，其期望不随时间变化。具体来说，对于任何 $t \\in [0, T]$，我们有 $\\mathbb{E}_{\\mathbb{P}}[\\mathcal{E}(M)_t] = \\mathbb{E}_{\\mathbb{P}}[\\mathcal{E}(M)_0]$。我们计算在时间 $t=0$ 时的 $\\mathcal{E}(M)_0$：\n$$\n\\mathcal{E}(M)_0 = \\exp\\Big(\\mu W_0 - \\tfrac{1}{2}\\mu^2 \\cdot 0\\Big) = \\exp(0) = 1.\n$$\n因此，在时间 $T$ 的期望是\n$$\n\\mathbb{E}_{\\mathbb{P}}[\\mathcal{E}(M)_T] = \\mathbb{E}_{\\mathbb{P}}[\\mathcal{E}(M)_0] = 1.\n$$\n这证实了 Radon–Nikodym 导数 $\\frac{d\\mathbb{Q}}{d\\mathbb{P}} = \\mathcal{E}(M)_T$ 正确地定义了一个与 $\\mathbb{P}$ 等价的新概率测度 $\\mathbb{Q}$。\n\n第三，我们计算期望 $\\mathbb{E}_{\\mathbb{Q}}\\big[\\mathbf{1}_{\\{W_T\\le a\\}}\\big]$。使用测度变换公式（也称为抽象贝叶斯法则），在新测度 $\\mathbb{Q}$ 下一个随机变量的期望可以表示为在原测度 $\\mathbb{P}$ 下的期望：\n$$\n\\mathbb{E}_{\\mathbb{Q}}\\big[\\mathbf{1}_{\\{W_T\\le a\\}}\\big] = \\mathbb{E}_{\\mathbb{P}}\\Big[\\mathbf{1}_{\\{W_T\\le a\\}} \\frac{d\\mathbb{Q}}{d\\mathbb{P}}\\Big] = \\mathbb{E}_{\\mathbb{P}}\\Big[\\mathbf{1}_{\\{W_T\\le a\\}} \\mathcal{E}(M)_T\\Big].\n$$\n代入 $\\mathcal{E}(M)_T$ 的表达式，我们得到：\n$$\n\\mathbb{E}_{\\mathbb{P}}\\Big[\\mathbf{1}_{\\{W_T\\le a\\}} \\exp\\Big(\\mu W_T - \\tfrac{1}{2}\\mu^2 T\\Big)\\Big].\n$$\n在测度 $\\mathbb{P}$ 下，随机变量 $W_T$ 服从均值为 $0$、方差为 $T$ 的正态分布，即 $W_T \\sim \\mathcal{N}(0, T)$。其概率密度函数 (PDF) 为 $f_{W_T}(x) = \\frac{1}{\\sqrt{2\\pi T}} \\exp(-\\frac{x^2}{2T})$。该期望可以写成关于此密度的积分：\n$$\n\\int_{-\\infty}^{\\infty} \\mathbf{1}_{\\{x\\le a\\}} \\exp\\Big(\\mu x - \\tfrac{1}{2}\\mu^2 T\\Big) f_{W_T}(x) \\,dx = \\int_{-\\infty}^{a} \\exp\\Big(\\mu x - \\tfrac{1}{2}\\mu^2 T\\Big) \\frac{1}{\\sqrt{2\\pi T}} \\exp\\Big(-\\frac{x^2}{2T}\\Big) \\,dx.\n$$\n我们可以合并常数项和指数项：\n$$\n\\frac{\\exp(-\\frac{1}{2}\\mu^2 T)}{\\sqrt{2\\pi T}} \\int_{-\\infty}^{a} \\exp\\Big(\\mu x - \\frac{x^2}{2T}\\Big) \\,dx.\n$$\n关键步骤是对积分内指数的参数 $\\mu x - \\frac{x^2}{2T}$ 进行配方：\n$$\n\\mu x - \\frac{x^2}{2T} = -\\frac{1}{2T}(x^2 - 2T\\mu x) = -\\frac{1}{2T}\\big((x-T\\mu)^2 - T^2\\mu^2\\big) = -\\frac{(x-T\\mu)^2}{2T} + \\frac{T\\mu^2}{2}.\n$$\n将其代回积分，我们得到：\n$$\n\\frac{\\exp(-\\frac{1}{2}\\mu^2 T)}{\\sqrt{2\\pi T}} \\int_{-\\infty}^{a} \\exp\\Big(-\\frac{(x-T\\mu)^2}{2T} + \\frac{T\\mu^2}{2}\\Big) \\,dx.\n$$\n项 $\\exp(\\frac{T\\mu^2}{2})$ 相对于 $x$ 是常数，可以移到积分外。它与前置因子 $\\exp(-\\frac{1}{2}\\mu^2 T)$ 相抵消：\n$$\n\\frac{\\exp(-\\frac{1}{2}\\mu^2 T)\\exp(\\frac{1}{2}\\mu^2 T)}{\\sqrt{2\\pi T}} \\int_{-\\infty}^{a} \\exp\\Big(-\\frac{(x-T\\mu)^2}{2T}\\Big) \\,dx = \\int_{-\\infty}^{a} \\frac{1}{\\sqrt{2\\pi T}} \\exp\\Big(-\\frac{(x-T\\mu)^2}{2T}\\Big) \\,dx.\n$$\n所得积分恰好是均值为 $\\mu T$、方差为 $T$ 的正态分布随机变量在 $x=a$ 处的累积分布函数 (CDF)。设 $Y \\sim \\mathcal{N}(\\mu T, T)$。该表达式为 $\\mathbb{P}(Y \\le a)$。为了用标准正态 CDF $\\Phi(z) = \\mathbb{P}(Z \\le z)$（其中 $Z \\sim \\mathcal{N}(0, 1)$）来表示，我们对变量 $Y$ 进行标准化：\n$$\n\\mathbb{P}(Y \\le a) = \\mathbb{P}\\left(\\frac{Y - \\mu T}{\\sqrt{T}} \\le \\frac{a - \\mu T}{\\sqrt{T}}\\right) = \\Phi\\left(\\frac{a - \\mu T}{\\sqrt{T}}\\right).\n$$\n这就是所求的期望。", "answer": "$$\n\\boxed{\\Phi\\left(\\frac{a - \\mu T}{\\sqrt{T}}\\right)}\n$$", "id": "3068900"}, {"introduction": "前面的练习处理的是确定性被积函数，使得二次变分成为一个常数。然而，在更现实的模型中，被积函数本身可能就是随机的，这就引出了一个更微妙的问题：我们如何检验可积性？本练习 [@problem_id:3068905] 将你带入这一情景，通过对比 Novikov 条件和 Kazamaki 条件，揭示不同判据的适用范围和强度差异。这个实践的核心价值在于让你认识到这些条件是充分但非必要的（例如当 $T \\ge 8\\lambda$ 时，两者都失效，但随机指数仍然是真鞅），并理解在何种情况下一个判据可能比另一个更优越，从而深化你对鞅理论的批判性理解。", "problem": "考虑一个带滤的概率空间，其上支撑着一个标准布朗运动 $W=\\{W_t: t \\ge 0\\}$ 和一个独立的随机变量 $X$，该变量服从速率为 $\\lambda>0$ 的指数分布。定义逐次可测过程 $\\theta_t := \\sqrt{X}$（对于 $t \\in [0,T]$），以及连续局部鞅 $M=\\{M_t: 0 \\le t \\le T\\}$ 为\n$$\nM_t := \\int_0^t \\theta_s \\, dW_s = \\sqrt{X}\\, W_t.\n$$\n令 $\\mathcal{E}(M)_t$ 表示 $M_t$ 的 Doléans-Dade 指数，定义为\n$$\n\\mathcal{E}(M)_t := \\exp\\left(M_t - \\tfrac{1}{2}\\langle M \\rangle_t\\right),\n$$\n其中二次变差满足 $\\langle M \\rangle_t = \\int_0^t \\theta_s^2 \\, ds$。\n\n有两个经典的充分条件，可用于判断 $\\mathcal{E}(M)_t$ 是否为 $[0,T]$ 上的真鞅（因此在时间 $T$ 的期望为 1）：\n\n- Novikov 条件：$\\mathbb{E}\\left[\\exp\\left(\\tfrac{1}{2}\\int_0^T \\theta_s^2 \\, ds\\right)\\right] < \\infty$。\n\n- Kazamaki 条件（对于连续局部鞅）：$\\sup_{0 \\le t \\le T}\\mathbb{E}\\left[\\exp\\left(\\tfrac{1}{2} M_t\\right)\\right] < \\infty$。\n\n仅从这些定义和以下标准事实出发：(i) 如果 $Z \\sim \\mathcal{N}(0,\\sigma^2)$，那么对于任意实数 $a$，有 $\\mathbb{E}[e^{aZ}] = \\exp\\left(\\tfrac{1}{2}a^2\\sigma^2\\right)$；(ii) 如果 $X$ 服从速率为 $\\lambda$ 的指数分布，那么对于任意满足 $\\alpha < \\lambda$ 的 $\\alpha \\in \\mathbb{R}$，有 $\\mathbb{E}[e^{\\alpha X}] = \\lambda/(\\lambda - \\alpha)$（如果 $\\alpha \\ge \\lambda$，则此期望为 $+\\infty$），请完成以下任务：\n\n1) 根据参数 $(T,\\lambda)$，推导在该模型中上述两个可积性准则各自成立的充要不等式。\n\n2) 解释为什么对于合适的 $(T,\\lambda)$ 选择，尽管 $\\mathcal{E}(M)_T$ 本身是良定义且期望为 1，这两个准则仍可能对 $\\mathcal{E}(M)_T$ 的可积性得出不同的结论。\n\n3) 实现一个程序，该程序针对给定的几个测试用例 $(T,\\lambda)$，为每个用例输出一对布尔值 $[b_N,b_K]$。其中，当且仅当该用例满足 Novikov 条件时，$b_N$ 为真；当且仅当该用例满足 Kazamaki 条件时，$b_K$ 为真。您的程序必须仅使用任务 1 中推导出的不等式来确定这些布尔值（无需进行模拟）。\n\n测试套件：\n为以下五组参数 $(T,\\lambda)$ 提供结果：\n- 用例 A（两个准则都应成立）：$(T,\\lambda) = (1.0, 1.0)$。\n- 用例 B（Kazamaki 成立但 Novikov 不成立）：$(T,\\lambda) = (1.0, 0.3)$。\n- 用例 C（两者均不成立）：$(T,\\lambda) = (1.0, 0.1)$。\n- 用例 D（Novikov 处于边界上，因此不成立；Kazamaki 成立）：$(T,\\lambda) = (2.0, 1.0)$。\n- 用例 E（Kazamaki 处于边界上，因此不成立；Novikov 也不成立）：$(T,\\lambda) = (0.5, 0.0625)$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个用方括号括起来的、以逗号分隔的结果列表。每个元素对应一个测试用例，并且本身是一个双元素列表 $[b_N,b_K]$，顺序与上文相同。例如，一个有效的输出行格式如下：\n$$\n[[\\text{bool},\\text{bool}],[\\text{bool},\\text{bool}],[\\text{bool},\\text{bool}],[\\text{bool},\\text{bool}],[\\text{bool},\\text{bool}]].\n$$\n不涉及物理单位或角度单位，也不需要百分比。所有答案均为布尔值。程序必须是自包含的，并且不需要用户输入。", "solution": "问题陈述已经过验证，被认为是有效的。这是一个在随机微积分领域内自成体系、有科学依据且定义明确的问题。所有定义、变量和条件都是标准的且已明确说明。\n\n任务涉及为一个特定的随机指数推导可积性条件，解释这些条件之间的关系，并实现所推导出的准则。我们将开始解答。\n\n### 第 1 部分：可积性准则的推导\n\n我们被要求找出参数 $(T, \\lambda)$ 满足 Novikov 条件和 Kazamaki 条件的充要条件。\n\n**Novikov 条件**\n\nNovikov 条件要求 $\\mathbb{E}\\left[\\exp\\left(\\tfrac{1}{2}\\int_0^T \\theta_s^2 \\, ds\\right)\\right] < \\infty$。\n\n首先，我们计算过程平方 $\\theta_s^2$ 的积分。给定 $\\theta_t := \\sqrt{X}$，我们有：\n$$\n\\int_0^T \\theta_s^2 \\, ds = \\int_0^T (\\sqrt{X})^2 \\, ds = \\int_0^T X \\, ds\n$$\n由于 $X$ 是一个不依赖于积分变量 $s$ 的随机变量，因此在积分中我们可以将其视为常数：\n$$\n\\int_0^T X \\, ds = X \\int_0^T ds = XT\n$$\n将此结果代回 Novikov 条件，我们得到要求：\n$$\n\\mathbb{E}\\left[\\exp\\left(\\frac{1}{2} XT\\right)\\right] < \\infty\n$$\n这个表达式是关于随机变量 $X$ 的期望，已知 $X$ 服从速率为 $\\lambda > 0$ 的指数分布。问题给出了这样一个性质：对于这样的随机变量 $X$，期望 $\\mathbb{E}[e^{\\alpha X}]$ 是有限的当且仅当 $\\alpha < \\lambda$。在我们的例子中，$X$ 的系数是 $\\alpha = \\frac{T}{2}$。\n\n因此，Novikov 条件成立的充要条件是：\n$$\n\\frac{T}{2} < \\lambda \\quad \\iff \\quad T < 2\\lambda\n$$\n\n**Kazamaki 条件**\n\nKazamaki 条件要求 $\\sup_{0 \\le t \\le T}\\mathbb{E}\\left[\\exp\\left(\\tfrac{1}{2} M_t\\right)\\right] < \\infty$。\n\n我们首先分析对于一个固定的 $t \\in [0, T]$ 的期望项。给定 $M_t = \\sqrt{X} W_t$，其中 $X$ 和标准布朗运动 $W$ 是独立的。其期望为：\n$$\n\\mathbb{E}\\left[\\exp\\left(\\frac{1}{2} M_t\\right)\\right] = \\mathbb{E}\\left[\\exp\\left(\\frac{1}{2} \\sqrt{X} W_t\\right)\\right]\n$$\n我们可以通过对随机变量 $X$ 取条件，使用全期望定律来计算这个值：\n$$\n\\mathbb{E}\\left[\\exp\\left(\\frac{1}{2} \\sqrt{X} W_t\\right)\\right] = \\mathbb{E}_X\\left[ \\mathbb{E}_W\\left[ \\exp\\left(\\frac{1}{2} \\sqrt{X} W_t\\right) \\bigg| X \\right] \\right]\n$$\n内部期望是关于布朗运动 $W_t$ 在给定 $X$ 条件下的期望。给定 $X=x$，项 $\\frac{1}{2}\\sqrt{x}$ 是一个常数。我们知道 $W_t$ 是一个正态分布的随机变量，$W_t \\sim \\mathcal{N}(0, t)$。我们使用题目中给出的事实：如果 $Z \\sim \\mathcal{N}(0,\\sigma^2)$，则 $\\mathbb{E}[e^{aZ}] = \\exp\\left(\\tfrac{1}{2}a^2\\sigma^2\\right)$。在这里，$Z = W_t$，$\\sigma^2 = t$，常数 $a = \\frac{1}{2}\\sqrt{X}$。\n\n内部期望计算结果为：\n$$\n\\mathbb{E}_W\\left[ \\exp\\left(\\frac{1}{2} \\sqrt{X} W_t\\right) \\bigg| X \\right] = \\exp\\left( \\frac{1}{2} \\left(\\frac{1}{2}\\sqrt{X}\\right)^2 t \\right) = \\exp\\left( \\frac{1}{2} \\cdot \\frac{1}{4} X t \\right) = \\exp\\left( \\frac{t}{8} X \\right)\n$$\n现在我们把这个结果代回到外部期望中，该期望是关于 $X$ 的：\n$$\n\\mathbb{E}\\left[\\exp\\left(\\frac{1}{2} M_t\\right)\\right] = \\mathbb{E}_X\\left[\\exp\\left(\\frac{t}{8} X\\right)\\right]\n$$\n这个期望是有限的，当且仅当 $X$ 的系数小于 $\\lambda$，即 $\\frac{t}{8} < \\lambda$。\n\nKazamaki 条件要求这对 $t \\in [0,T]$ 的上确界成立。函数 $f(t) = \\mathbb{E}_X\\left[\\exp\\left(\\frac{t}{8} X\\right)\\right] = \\frac{\\lambda}{\\lambda - t/8}$ 是关于 $t$ 在 $t \\in [0, T]$ 上的增函数（前提是 $t < 8\\lambda$）。因此，它在区间 $[0,T]$ 上的上确界在 $t=T$ 处取得。\n于是，该条件等价于在 $t=T$ 时期望的有限性：\n$$\n\\frac{T}{8} < \\lambda \\quad \\iff \\quad T < 8\\lambda\n$$\n\n### 第 2 部分：对不同结论的解释\n\n问题正确地指出，对于这个模型，$\\mathcal{E}(M)_T$ 始终是一个真鞅，即对于所有有效的 $(T, \\lambda)$，$\\mathbb{E}[\\mathcal{E}(M)_T] = 1$。我们先来验证这一点。\n$$\n\\mathbb{E}[\\mathcal{E}(M)_T] = \\mathbb{E}\\left[\\exp\\left(M_T - \\frac{1}{2}\\langle M \\rangle_T\\right)\\right] = \\mathbb{E}\\left[\\exp\\left(\\sqrt{X}W_T - \\frac{1}{2}XT\\right)\\right]\n$$\n再次使用重期望：\n$$\n\\mathbb{E}[\\mathcal{E}(M)_T] = \\mathbb{E}_X\\left[ \\exp\\left(-\\frac{1}{2}XT\\right) \\mathbb{E}_W\\left[ \\exp\\left(\\sqrt{X}W_T\\right) \\bigg| X\\right] \\right]\n$$\n内部期望是 $W_T \\sim \\mathcal{N}(0,T)$ 的矩生成函数在 $\\sqrt{X}$ 处的值。\n$$\n\\mathbb{E}_W\\left[ \\exp\\left(\\sqrt{X}W_T\\right) \\bigg| X\\right] = \\exp\\left(\\frac{1}{2}(\\sqrt{X})^2 T\\right) = \\exp\\left(\\frac{1}{2}XT\\right)\n$$\n将其代回，我们得到：\n$$\n\\mathbb{E}[\\mathcal{E}(M)_T] = \\mathbb{E}_X\\left[ \\exp\\left(-\\frac{1}{2}XT\\right) \\exp\\left(\\frac{1}{2}XT\\right) \\right] = \\mathbb{E}_X[1] = 1\n$$\n这证实了对于所有 $T > 0$ 和 $\\lambda > 0$，$\\mathcal{E}(M)$ 在 $[0,T]$ 上都是一个真鞅。\n\nNovikov 和 Kazamaki 准则为随机指数是真鞅提供了*充分*但非*必要*条件。这个模型是证明这种非必要性的一个绝佳案例。\n\n我们推导出了以下条件：\n- Novikov 条件：$T < 2\\lambda$\n- Kazamaki 条件：$T < 8\\lambda$\n\n对于任何 $\\lambda > 0$，显然有 $2\\lambda < 8\\lambda$。这意味着满足 Novikov 条件的 $(T, \\lambda)$ 对集合是满足 Kazamaki 条件的集合的严格子集。\n\n可以选择参数 $(T, \\lambda)$ 使得 $2\\lambda \\le T < 8\\lambda$。对于这样的选择，Novikov 条件 ($T < 2\\lambda$) 不成立，但 Kazamaki 条件 ($T < 8\\lambda$) 成立。一个例子是测试用例 $(T, \\lambda) = (3, 1)$，其中 $T=3$ 满足 $2\\lambda = 2 \\le 3 < 8 = 8\\lambda$。\n\n在这种情况下，Kazamaki 准则正确地将 $\\mathcal{E}(M)$ 识别为真鞅，而 Novikov 准则则未能做到。这并不导致矛盾；它仅仅说明了 Kazamaki 条件比 Novikov 条件更不严格（更通用）。两者都只是充分性检验。即使在两个条件都失效时（例如，当 $T \\ge 8\\lambda$ 时），$\\mathcal{E}(M)$ 仍然是真鞅，这一事实表明这两个条件都不是必要的。这些条件提供了强大的通用工具，但它们的失效并不自动意味着该随机指数不是真鞅。\n\n### 第 3 部分：实现逻辑\n\n程序将基于第 1 部分推导出的两个不等式来实现。对于每个测试用例 $(T, \\lambda)$，我们将确定两个布尔值 $b_N$ 和 $b_K$：\n- 如果满足 Novikov 条件 $T < 2\\lambda$，则布尔值 $b_N$ 为真，否则为假。\n- 如果满足 Kazamaki 条件 $T < 8\\lambda$，则布尔值 $b_K$ 为真，否则为假。\n\n实现将遍历所提供的测试套件，应用这两个严格不等式，并按规定格式化生成的布尔值对。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Validates Novikov's and Kazamaki's conditions for several test cases.\n\n    For a given time horizon T and exponential rate lambda, the model is:\n    - Independent random variable X ~ Exp(lambda)\n    - Integrand theta_t = sqrt(X)\n    - Local martingale M_t = sqrt(X) * W_t\n\n    The conditions for the Doléans-Dade exponential E(M)_t to be a true\n    martingale are derived as:\n    - Novikov's condition: T  2 * lambda\n    - Kazamaki's condition: T  8 * lambda\n\n    This program applies these two inequalities to a set of test cases.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # (T, lambda)\n        (1.0, 1.0),      # Case A\n        (1.0, 0.3),      # Case B\n        (1.0, 0.1),      # Case C\n        (2.0, 1.0),      # Case D\n        (0.5, 0.0625),   # Case E\n    ]\n\n    results = []\n    for T_val, lambda_val in test_cases:\n        # Check Novikov's condition: T  2 * lambda\n        # b_N is true if the condition holds.\n        b_N = T_val  2 * lambda_val\n\n        # Check Kazamaki's condition: T  8 * lambda\n        # b_K is true if the condition holds.\n        b_K = T_val  8 * lambda_val\n\n        # Append the pair of boolean results for the current case.\n        results.append([b_N, b_K])\n\n    # The final print statement must produce a single line with the exact format:\n    # [[bool,bool],[bool,bool],...]\n    # str([True, False]) produces '[True, False]', so mapping to str and joining\n    # with a comma achieves the desired format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "3068905"}]}
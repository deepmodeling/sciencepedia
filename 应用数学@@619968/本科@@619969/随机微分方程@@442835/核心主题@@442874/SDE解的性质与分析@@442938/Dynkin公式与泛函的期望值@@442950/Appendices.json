{"hands_on_practices": [{"introduction": "我们如何计算一个随机过程首次离开一个给定区间时，从某一端点离开的概率？这个问题，通常被称为“赌徒破产问题”的连续时间版本，是随机过程理论中的一个经典问题。这个练习将引导你使用狄金公式 (Dynkin's formula) 将这个概率问题转化为一个可以求解的常微分方程边值问题，从而直观地展示随机微分方程与偏微分方程之间的深刻联系。", "problem": "考虑一个一维标准布朗运动过程 $X_{t}$，从 $X_{0}=x$ 开始，其中 $x \\in (a,b)$，$a<b$。求 $X_{t}$ 从 $b$ 点离开区间 $(a,b)$ 的概率，而不是从 $a$ 点离开。", "solution": "令 $p(x)$ 为从点 $x \\in (a, b)$ 出发，首次离开区间 $(a, b)$ 时从点 $b$ 离开的概率。根据狄金公式，对于首次出界时间 $\\tau$ 和一个足够光滑的函数 $f$，我们有 $\\mathbb{E}_x[f(X_\\tau)] = f(x) + \\mathbb{E}_x[\\int_0^\\tau Lf(X_s) ds]$，其中 $L$ 是过程的无穷小生成元。\n\n对于标准布朗运动 $dX_t = dW_t$，漂移项 $b(x)=0$，扩散项 $\\sigma(x)=1$。因此，其无穷小生成元作用于函数 $f(x)$ 上是：\n$$ Lf(x) = b(x)f'(x) + \\frac{1}{2}\\sigma(x)^2 f''(x) = \\frac{1}{2} f''(x) $$\n我们所求的概率 $p(x)$ 是一个特殊的函数，它使得 $p(X_t)$ 成为一个鞅，直到出界为止。这类函数被称为关于过程的**调和函数**，它们满足 $Lp(x) = 0$。\n因此，我们需求解以下常微分方程（ODE）边值问题：\n$$\n\\frac{1}{2} p''(x) = 0 \\quad \\text{for } x \\in (a,b)\n$$\n边界条件由问题的定义给出：\n- 如果过程从 $a$ 开始，它立即在 $a$ 处“出界”，因此从 $b$ 出界的概率为 0。所以，$p(a)=0$。\n- 如果过程从 $b$ 开始，它立即在 $b$ 处“出界”，因此从 $b$ 出界的概率为 1。所以，$p(b)=1$。\n\n$p''(x)=0$ 的通解是线性函数 $p(x) = C_1 x + C_2$。\n应用边界条件来确定常数 $C_1$ 和 $C_2$：\n1.  $p(a) = C_1 a + C_2 = 0$\n2.  $p(b) = C_1 b + C_2 = 1$\n\n从第一个方程，我们得到 $C_2 = -C_1 a$。将其代入第二个方程：\n$$ C_1 b - C_1 a = 1 \\implies C_1(b-a) = 1 \\implies C_1 = \\frac{1}{b-a} $$\n然后，我们可以解出 $C_2$：\n$$ C_2 = - \\frac{a}{b-a} $$\n将 $C_1$ 和 $C_2$ 代回通解，我们得到最终的概率：\n$$ p(x) = \\frac{1}{b-a} x - \\frac{a}{b-a} = \\frac{x-a}{b-a} $$\n这个结果直观地表明，出界概率与初始位置 $x$ 在区间 $(a,b)$ 内的相对位置成线性关系。", "answer": "$$\n\\boxed{\\frac{x-a}{b-a}}\n$$", "id": "3051722"}, {"introduction": "在许多金融和工程应用中，我们关心的不仅仅是过程在某个特定时刻的状态，而是其在一段时间内的累积效应，例如累积成本或收益。这个练习将探讨如何计算一个过程在无限时间范围内的总期望折现成本。你将学习如何运用狄金公式推导出所谓的“预解方程” $(\\alpha I - L)u = g$，这是一个直接将期望值 $u(x)$ 与成本函数 $g(x)$ 和过程的生成元 $L$ 联系起来的强大工具。", "problem": "考虑由随机微分方程 (SDE) 控制的 Ornstein–Uhlenbeck 过程\n$$dX_t=-\\kappa X_t\\,dt+\\sigma\\,dW_t,\\qquad X_0=x,$$\n其中 $\\kappa\\in\\mathbb{R}$ 和 $\\sigma>0$ 是常数，而 $W_t$ 是一维标准布朗运动 (BM)。令 $\\alpha>0$ 为一个贴现率，并定义运行成本 $g(x)=x^2$。定义\n$$u(x)=\\mathbb{E}_x\\left[\\int_0^\\infty \\exp(-\\alpha t)\\,X_t^2\\,dt\\right],$$\n其中 $\\mathbb{E}_x$ 表示以 $X_0=x$ 为条件的期望。从该过程的无穷小生成元和贴现期望的预解式特征出发，通过求解预解式方程导出 $u(x)$\n$$(\\alpha I-L)u=g,$$\n并满足当 $|x|\\to\\infty$ 时 $u$至多具有多项式增长的条件。然后，通过直接从 SDE 解计算 $\\mathbb{E}_x[X_t^2]$ 并对 $t$ 进行积分，来验证您得到的 $u(x)$ 表达式。最后，讨论使得 $u(x)$ 为有限值的参数 $\\alpha$ 和 $\\kappa$ 的范围。将您关于 $u(x)$ 的最终答案表示为以 $\\alpha$、$\\kappa$、$\\sigma$ 和 $x$ 表示的闭式解析表达式。无需四舍五入，也不涉及单位。", "solution": "此问题经评估有效，因为它具有科学依据、问题设定良好、客观、完整，并直接处理随机微分方程理论中的标准概念，没有任何歧义或逻辑缺陷。\n\n我们需要求解函数 $u(x)$，其定义为\n$$u(x) = \\mathbb{E}_x\\left[\\int_0^\\infty \\exp(-\\alpha t)\\,X_t^2\\,dt\\right],$$\n对于由 SDE 给出的 Ornstein–Uhlenbeck 过程 $X_t$\n$$dX_t = -\\kappa X_t\\,dt + \\sigma\\,dW_t, \\quad X_0=x.$$\n常数为 $\\kappa \\in \\mathbb{R}$、$\\sigma > 0$ 和 $\\alpha > 0$。运行成本为 $g(x) = x^2$。我们将采用两种方法来推导和验证 $u(x)$。\n\n**方法一：求解预解式方程**\n\n根据 Itô 过程理论的一个关键结果（通常与 Dynkin 公式相关），上面定义的函数 $u(x)$ 是预解式方程 $(\\alpha I - L)u = g$ 的解，其中 $L$ 是过程 $X_t$ 的无穷小生成元，而 $I$ 是恒等算子。\n\n首先，我们确定无穷小生成元 $L$。对于一个一般的 Itô 过程 $dY_t = b(Y_t)dt + a(Y_t)dW_t$，其生成元由 $L = b(y)\\frac{d}{dy} + \\frac{1}{2}a(y)^2\\frac{d^2}{dy^2}$ 给出。对于 Ornstein–Uhlenbeck 过程，漂移项为 $b(x) = -\\kappa x$，扩散系数为 $a(x) = \\sigma$。因此，生成元为：\n$$L = -\\kappa x \\frac{d}{dx} + \\frac{\\sigma^2}{2} \\frac{d^2}{dx^2}.$$\n\n预解式方程为 $(\\alpha I - L)u(x) = g(x)$，可写为：\n$$\\alpha u(x) - \\left(-\\kappa x \\frac{du}{dx} + \\frac{\\sigma^2}{2} \\frac{d^2u}{dx^2}\\right) = x^2.$$\n整理各项，我们得到一个关于 $u(x)$ 的二阶线性常微分方程 (ODE)：\n$$\\frac{\\sigma^2}{2} u''(x) - \\kappa x u'(x) - \\alpha u(x) = -x^2.$$\n\n我们已知 $u(x)$ 至多具有多项式增长。由于强制项是一个二次多项式，我们寻求一个形如 $u(x) = Ax^2 + Bx + C$ 的多项式解。其导数为 $u'(x) = 2Ax + B$ 和 $u''(x) = 2A$。将这些代入 ODE 中得到：\n$$\\frac{\\sigma^2}{2}(2A) - \\kappa x(2Ax + B) - \\alpha(Ax^2 + Bx + C) = -x^2.$$\n展开并按 $x$ 的幂次合并同类项：\n$$\\sigma^2 A - 2\\kappa Ax^2 - \\kappa Bx - \\alpha Ax^2 - \\alpha Bx - \\alpha C = -x^2.$$\n$$(-2\\kappa A - \\alpha A)x^2 + (-\\kappa B - \\alpha B)x + (\\sigma^2 A - \\alpha C) = -1 \\cdot x^2 + 0 \\cdot x + 0 \\cdot 1.$$\n为使此等式对所有 $x \\in \\mathbb{R}$ 成立，我们令 $x$ 的各次幂的系数相等：\n\\begin{itemize}\n    \\item $x^2$ 的系数：$-A(2\\kappa + \\alpha) = -1 \\implies A = \\frac{1}{2\\kappa + \\alpha}$。\n    \\item $x$ 的系数：$-B(\\kappa + \\alpha) = 0$。由于 $\\alpha > 0$，这意味着 $B=0$，除非 $\\kappa = -\\alpha$。然而，SDE 动态和成本函数 $g(x)=x^2$ 都关于 $x=0$ 对称，这意味着 $u(x)$ 应该是一个偶函数。因此，我们必须有 $B=0$。\n    \\item 常数项：$\\sigma^2 A - \\alpha C = 0 \\implies C = \\frac{\\sigma^2 A}{\\alpha} = \\frac{\\sigma^2}{\\alpha(2\\kappa + \\alpha)}$。\n\\end{itemize}\n这要求 $2\\kappa + \\alpha \\neq 0$ 且 $\\alpha \\neq 0$。后者是已知条件。\n得到的解为：\n$$u(x) = \\frac{1}{2\\kappa + \\alpha}x^2 + \\frac{\\sigma^2}{\\alpha(2\\kappa + \\alpha)}.$$\n该解具有二次增长，是多项式增长的一种形式，因此满足给定条件。\n\n**方法二：直接计算与验证**\n\n首先，我们求解 $X_t$ 的线性 SDE。使用积分因子 $e^{\\kappa t}$，我们可以写出：\n$d(e^{\\kappa t} X_t) = \\kappa e^{\\kappa t} X_t dt + e^{\\kappa t} dX_t = \\kappa e^{\\kappa t} X_t dt + e^{\\kappa t}(-\\kappa X_t dt + \\sigma dW_t) = \\sigma e^{\\kappa t} dW_t$.\n从 $0$ 积分到 $t$：\n$$e^{\\kappa t} X_t - X_0 = \\int_0^t \\sigma e^{\\kappa s} dW_s.$$\n求解 $X_t$，其中 $X_0 = x$：\n$$X_t = x e^{-\\kappa t} + \\sigma \\int_0^t e^{-\\kappa(t-s)} dW_s.$$\n接下来，我们计算二阶矩 $\\mathbb{E}_x[X_t^2]$。\n$$X_t^2 = \\left(x e^{-\\kappa t} + \\sigma \\int_0^t e^{-\\kappa(t-s)} dW_s\\right)^2 = x^2 e^{-2\\kappa t} + 2x\\sigma e^{-\\kappa t}\\int_0^t e^{-\\kappa(t-s)} dW_s + \\sigma^2 \\left(\\int_0^t e^{-\\kappa(t-s)} dW_s\\right)^2.$$\n取期望 $\\mathbb{E}_x[\\cdot]$ 并使用 Itô 积分的性质（积分的均值为零和 Itô 等距性）：\n$\\mathbb{E}_x[X_t^2] = x^2 e^{-2\\kappa t} + 0 + \\sigma^2 \\mathbb{E}\\left[\\left(\\int_0^t e^{-\\kappa(t-s)} dW_s\\right)^2\\right] = x^2 e^{-2\\kappa t} + \\sigma^2 \\int_0^t \\left(e^{-\\kappa(t-s)}\\right)^2 ds$.\n积分项计算如下（对于 $\\kappa \\neq 0$）：\n$$\\int_0^t e^{-2\\kappa(t-s)} ds = e^{-2\\kappa t} \\int_0^t e^{2\\kappa s} ds = e^{-2\\kappa t} \\left[\\frac{e^{2\\kappa s}}{2\\kappa}\\right]_0^t = e^{-2\\kappa t} \\left(\\frac{e^{2\\kappa t} - 1}{2\\kappa}\\right) = \\frac{1 - e^{-2\\kappa t}}{2\\kappa}.$$\n如果 $\\kappa=0$，积分为 $\\int_0^t 1 \\, ds = t$，这与极限 $\\lim_{\\kappa \\to 0} \\frac{1 - e^{-2\\kappa t}}{2\\kappa} = t$ 相符。\n所以，二阶矩为：\n$$\\mathbb{E}_x[X_t^2] = x^2 e^{-2\\kappa t} + \\frac{\\sigma^2}{2\\kappa}(1 - e^{-2\\kappa t}).$$\n现在我们通过对此期望关于贴现时间测度进行积分来计算 $u(x)$。根据 Fubini 定理（因为被积函数是非负的），我们可以交换期望和积分的顺序：\n$$u(x) = \\int_0^\\infty e^{-\\alpha t} \\mathbb{E}_x[X_t^2] dt = \\int_0^\\infty e^{-\\alpha t} \\left(x^2 e^{-2\\kappa t} + \\frac{\\sigma^2}{2\\kappa}(1 - e^{-2\\kappa t})\\right) dt.$$\n这可以分解为：\n$$u(x) = x^2 \\int_0^\\infty e^{-(\\alpha+2\\kappa) t} dt + \\frac{\\sigma^2}{2\\kappa} \\left(\\int_0^\\infty e^{-\\alpha t} dt - \\int_0^\\infty e^{-(\\alpha+2\\kappa) t} dt\\right).$$\n为使这些积分收敛，指数项中的率必须为正。由于已知 $\\alpha > 0$，第一个积分收敛。为使第二个和第三个积分收敛，我们需要 $\\alpha+2\\kappa > 0$。在此条件下：\n$$\\int_0^\\infty e^{-(\\alpha+2\\kappa) t} dt = \\frac{1}{\\alpha+2\\kappa} \\quad \\text{and} \\quad \\int_0^\\infty e^{-\\alpha t} dt = \\frac{1}{\\alpha}.$$\n将这些值代回：\n$$u(x) = x^2 \\frac{1}{\\alpha+2\\kappa} + \\frac{\\sigma^2}{2\\kappa}\\left(\\frac{1}{\\alpha} - \\frac{1}{\\alpha+2\\kappa}\\right).$$\n简化括号中的项：\n$$\\frac{1}{\\alpha} - \\frac{1}{\\alpha+2\\kappa} = \\frac{\\alpha+2\\kappa - \\alpha}{\\alpha(\\alpha+2\\kappa)} = \\frac{2\\kappa}{\\alpha(\\alpha+2\\kappa)}.$$\n这得出：\n$$u(x) = \\frac{x^2}{2\\kappa+\\alpha} + \\frac{\\sigma^2}{2\\kappa} \\frac{2\\kappa}{\\alpha(2\\kappa+\\alpha)} = \\frac{x^2}{2\\kappa+\\alpha} + \\frac{\\sigma^2}{\\alpha(2\\kappa+\\alpha)}.$$\n该表达式与从预解式方程推导出的表达式相匹配，从而验证了结果。$\\kappa=0$ 的情况可以通过对最终表达式取 $\\kappa \\to 0$ 的极限来验证，这会得到 $u(x) = \\frac{x^2}{\\alpha} + \\frac{\\sigma^2}{\\alpha^2}$，或者通过使用 $\\mathbb{E}_x[X_t^2] = x^2 + \\sigma^2 t$ 直接积分来验证。\n\n**参数范围的讨论**\n\n函数 $u(x)$ 代表了预期的总贴现成本。为使该值为有限，其直接计算中涉及的积分必须收敛。\n积分 $\\int_0^\\infty e^{-\\alpha t}\\mathbb{E}_x[X_t^2]dt$ 收敛，当且仅当项 $\\mathbb{E}_x[X_t^2]$ 的增长速度不快于 $e^{\\alpha t}$。\n当 $t$ 很大时，$\\mathbb{E}_x[X_t^2]$ 中的主导项由 $\\kappa$ 的符号决定。\n$\\mathbb{E}_x[X_t^2]$ 的行为由项 $e^{-2\\kappa t}$ 主导。贴现因子是 $e^{-\\alpha t}$。为了确保积分 $\\int_0^\\infty e^{-\\alpha t} e^{-2\\kappa t} dt = \\int_0^\\infty e^{-(\\alpha+2\\kappa)t}dt$ 收敛，指数中的率必须为正。\n因此，使 $u(x)$ 为有限的条件是 $\\alpha+2\\kappa > 0$。\n鉴于 $\\alpha>0$，对于 $\\kappa \\ge 0$，该条件总是满足的。对于 $\\kappa < 0$，过程是不稳定的，贴现必须足够强才能抵消 $X_t$ 方差的指数增长。这意味着我们需要 $\\alpha > -2\\kappa$。\n这个条件也与预解式方程方法一致。由于 $u(x)$ 是一个非负量的期望，它必须对所有 $x$ 都满足 $u(x) \\ge 0$。从推导出的表达式 $u(x) = \\frac{1}{2\\kappa+\\alpha} x^2 + \\frac{\\sigma^2}{\\alpha(2\\kappa+\\alpha)}$，并且已知 $\\alpha > 0$ 和 $\\sigma^2 > 0$，要使 $u(x)$ 对所有 $x$ 都为正，要求分母 $2\\kappa+\\alpha$ 为正。\n\n在条件 $\\alpha + 2\\kappa > 0$ 下，$u(x)$ 的最终表达式为：\n$$u(x) = \\frac{1}{2\\kappa + \\alpha}x^2 + \\frac{\\sigma^2}{\\alpha(2\\kappa + \\alpha)} = \\frac{\\alpha x^2 + \\sigma^2}{\\alpha(2\\kappa + \\alpha)}.$$", "answer": "$$\\boxed{\\frac{x^2}{2\\kappa + \\alpha} + \\frac{\\sigma^2}{\\alpha(2\\kappa + \\alpha)}}$$", "id": "3051716"}, {"introduction": "像狄金公式这样强大的数学工具，其应用也依赖于特定的前提假设，其中最关键的一条就是所研究函数的“光滑性”（即二阶连续可微）。如果我们将该公式应用于一个不满足此条件的函数，比如在某点不可导的绝对值函数 $f(x)=|x|$，会发生什么呢？这个练习将引导你探究标准公式失效的原因，并揭示在这种情况下出现的一个重要修正项——“局部时”，从而加深你对理论适用边界的理解。", "problem": "考虑一个由标准一维布朗运动给出的随机微分方程 (SDE)，即 $\\mathrm{d}X_{t}=\\mathrm{d}W_{t}$，其中 $X_{0}=0$，$W_{t}$ 是一个标准布朗运动。固定参数 $a>0$ 和 $b>0$，并定义停时 $\\tau=\\inf\\{t\\geq 0: X_{t}\\notin(-b,a)\\}$，即 $X_{t}$ 首次离开开区间 $(-b,a)$ 的时间。定义函数 $f:\\mathbb{R}\\to\\mathbb{R}$ 为 $f(x)=|x|$。\n\n您的任务是：\n- 验证函数 $f$ 在点 $x=0$ 处不存在二阶导数，并描述 $f$ 在 $\\mathbb{R}$ 上的正则性类别。\n- 从二次连续可微函数的 Itô 公式的基本推导开始，解释为什么在 $x=0$ 处缺少 $C^{2}$ 正则性使得我们无法直接得出 $f(X_{t\\wedge \\tau})-f(X_{0})-\\int_{0}^{t\\wedge \\tau}\\mathcal{L}f(X_{s})\\,\\mathrm{d}s$ 是一个鞅的结论，其中 $\\mathcal{L}$ 表示 $X_{t}$ 的无穷小生成元。精确地指出当对导数有跳跃间断点的函数使用 Itô–Tanaka 公式时出现的附加项，并说明其对期望值的定性影响。\n- 不使用 Dynkin 公式，通过从第一性原理出发，基于布朗运动从有限区间出射的概率来确定 $X_{\\tau}$ 的分布，从而计算量 $\\mathbb{E}[\\,f(X_{\\tau})\\,]$。\n- 将您的最终答案表示为关于 $a$ 和 $b$ 的单个闭式解析表达式（不需要单位），并写成最简形式。如果简化需要四舍五入，则保留四位有效数字；否则给出精确表达式。", "solution": "该问题被评估为有效，因为它在科学上基于随机微分方程理论，提法良好，提供了所有必要信息，并以客观的数学语言陈述。\n\n按要求，对该问题的分析分三部分进行。\n\n首先，我们讨论由 $f(x)=|x|$ 定义的函数 $f:\\mathbb{R}\\to\\mathbb{R}$ 的正则性。函数 $f(x)$ 对所有 $x \\in \\mathbb{R}$ 都是连续的，因此它属于 $C^{0}(\\mathbb{R})$ 类。为了分析其可微性，我们可以将其写成分段形式：\n$$\nf(x) = \\begin{cases} x & \\text{if } x \\geq 0 \\\\ -x & \\text{if } x < 0 \\end{cases}\n$$\n当 $x \\neq 0$ 时，$f(x)$ 的导数是符号函数 $\\text{sgn}(x)$：\n$$\nf'(x) = \\begin{cases} 1 & \\text{if } x > 0 \\\\ -1 & \\text{if } x < 0 \\end{cases}\n$$\n在点 $x=0$ 处，左导数和右导数不同：\n$$\n\\lim_{h \\to 0^+} \\frac{f(0+h) - f(0)}{h} = \\lim_{h \\to 0^+} \\frac{|h|}{h} = \\lim_{h \\to 0^+} \\frac{h}{h} = 1\n$$\n$$\n\\lim_{h \\to 0^-} \\frac{f(0+h) - f(0)}{h} = \\lim_{h \\to 0^-} \\frac{|h|}{h} = \\lim_{h \\to 0^-} \\frac{-h}{h} = -1\n$$\n由于左导数 ($-1$) 不等于右导数 ($1$)，函数 $f(x)$ 在 $x=0$ 处不可微。因此，$f(x)$ 不属于 $C^{1}(\\mathbb{R})$ 类。由于一个函数必须可微才能二次可微，因此可以立即得出 $f(x)$ 不属于 $C^{2}(\\mathbb{R})$ 类。函数 $f$ 在 $\\mathbb{R}$ 上是连续的 ($C^0$)，但在一个单点上不可微，其导数在该点有跳跃间断。\n\n第二，我们解释为什么标准 Itô 公式不适用于 $f(x)=|x|$ 并指出所产生的附加项。对于函数 $g \\in C^{2}(\\mathbb{R})$ 和 Itô 过程 $X_t$，标准 Itô 公式是从二阶泰勒展开推导出来的。对于过程 $\\mathrm{d}X_t = \\mathrm{d}W_t$，该公式为：\n$$\n\\mathrm{d}g(X_t) = g'(X_t)\\mathrm{d}X_t + \\frac{1}{2}g''(X_t)(\\mathrm{d}X_t)^2 = g'(X_t)\\mathrm{d}W_t + \\frac{1}{2}g''(X_t)\\mathrm{d}t\n$$\n此过程的无穷小生成元是 $\\mathcal{L}g(x) = \\frac{1}{2}g''(x)$。以积分形式，Itô 公式表明\n$$\ng(X_{t\\wedge \\tau}) - g(X_0) = \\int_0^{t\\wedge \\tau} g'(X_s)\\mathrm{d}W_s + \\int_0^{t\\wedge \\tau} \\mathcal{L}g(X_s)\\mathrm{d}s\n$$\n这意味着过程 $M_t = g(X_{t\\wedge \\tau}) - g(X_0) - \\int_0^{t\\wedge \\tau} \\mathcal{L}g(X_s)\\mathrm{d}s$ 是一个局部鞅。其推导依赖于 $g''(x)$ 的存在性和连续性，而 $f(x)=|x|$ 在 $x=0$ 处不满足这个条件。草率地应用这个公式将需要计算一个包含 $f''(X_s)$ 的积分，该积分在 $x=0$ 处涉及到一个狄拉克δ分布，在黎曼积分或勒贝格积分的语境下没有良定义。\n\nItô–Tanaka 公式将 Itô 公式推广到像 $f(x)=|x|$ 这样的凸函数。对于从 $X_0=0$ 开始的过程 $X_t$，它给出：\n$$\nf(X_t) - f(X_0) = \\int_0^t f'_+(X_s)\\mathrm{d}X_s + \\frac{1}{2} \\int_{-\\infty}^{\\infty} L_t^y f''(\\mathrm{d}y)\n$$\n其中 $f'_+$ 是右导数，$L_t^y$ 是 $X_t$ 在水平 $y$ 处的局部时，而 $f''(\\mathrm{d}y)$ 是分布意义下的二阶导数。对于 $f(x)=|x|$，我们有 $f'_+(x)=\\text{sgn}(x)$ (其中 $\\text{sgn}(0)=1$ 或任何其他选择，因为它只是一个单点)，并且分布二阶导数是 $f''(\\mathrm{d}y)=2\\delta_0(\\mathrm{d}y)$，其中 $\\delta_0$ 是在零点的狄拉克测度。因此，对于 $|X_t|$ 的 Itô–Tanaka 公式变为：\n$$\n|X_t| - |X_0| = \\int_0^t \\text{sgn}(X_s)\\mathrm{d}W_s + L_t^0\n$$\n其中 $L_t^0$ 是 $X_t$ 在 0 处的局部时。问题陈述中的项 $\\int_0^{t\\wedge\\tau} \\mathcal{L}f(X_s)\\mathrm{d}s$ 在形式上等价于 $L_{t\\wedge\\tau}^0$。因此，Itô-Tanaka 公式表明过程 $M_t = |X_{t\\wedge\\tau}| - |X_0| - L_{t\\wedge\\tau}^0$ 是一个局部鞅。必须包含的附加项正是零点的局部时，$L_{t\\wedge\\tau}^0$。定性地看，由于 $L_t^0$ 是一个非负、非减过程，它的存在使得 $|X_t|$ 成为一个下鞅，而不是鞅。对于期望值，这意味着对于 $t > s$，有 $\\mathbb{E}[|X_t|] \\ge \\mathbb{E}[|X_s|]$，因为 $\\mathbb{E}[|X_t|] = \\mathbb{E}[\\int_0^t \\text{sgn}(X_s)\\mathrm{d}W_s] + \\mathbb{E}[L_t^0]$。随机积分项的期望为零（因为它是一个真鞅），所以 $\\mathbb{E}[|X_t|] = \\mathbb{E}[L_t^0] \\ge 0$。局部时项为期望增加了一个正的“漂移”。\n\n第三，我们不使用 Dynkin 公式来计算 $\\mathbb{E}[f(X_{\\tau})] = \\mathbb{E}[|X_{\\tau}|]$。给定 $X_t$ 是一个标准一维布朗运动，它是一个鞅。我们从 $X_0=0$ 开始。停时 $\\tau$ 是从区间 $(-b, a)$ 的首次出射时间。由于 $X_t$ 具有连续路径，在时间 $\\tau$ 时，过程必须位于边界之一，即 $X_{\\tau} \\in \\{a, -b\\}$。令 $p_a = P(X_{\\tau}=a)$ 和 $p_{-b} = P(X_{\\tau}=-b)$。我们知道 $p_a + p_{-b} = 1$。停时 $\\tau$ 的期望有界，且 $X_t$ 在 $[0,\\tau]$ 上有界，所以我们可以对鞅 $X_t$ 应用可选停止定理：\n$$\n\\mathbb{E}[X_{\\tau}] = X_0 = 0\n$$\n我们可以用 $X_{\\tau}$ 的分布来表示 $\\mathbb{E}[X_{\\tau}]$：\n$$\n\\mathbb{E}[X_{\\tau}] = a \\cdot P(X_{\\tau}=a) + (-b) \\cdot P(X_{\\tau}=-b) = a \\cdot p_a - b \\cdot p_{-b}\n$$\n将此设为 0 并使用 $p_{-b} = 1 - p_a$，我们得到：\n$$\na \\cdot p_a - b(1 - p_a) = 0\n$$\n$$\na p_a - b + b p_a = 0\n$$\n$$\n(a+b)p_a = b\n$$\n$$\np_a = P(X_{\\tau}=a) = \\frac{b}{a+b}\n$$\n因此，首先到达 $-b$ 的概率是：\n$$\np_{-b} = P(X_{\\tau}=-b) = 1 - p_a = 1 - \\frac{b}{a+b} = \\frac{a}{a+b}\n$$\n现在我们可以计算所求的期望 $\\mathbb{E}[|X_{\\tau}|]$。随机变量 $|X_\\tau|$ 以概率 $p_a$ 取值 $|a|=a$，以概率 $p_{-b}$ 取值 $|-b|=b$（因为 $a>0, b>0$）。\n$$\n\\mathbb{E}[|X_{\\tau}|] = |a| \\cdot P(X_{\\tau}=a) + |-b| \\cdot P(X_{\\tau}=-b)\n$$\n$$\n\\mathbb{E}[|X_{\\tau}|] = a \\cdot \\left(\\frac{b}{a+b}\\right) + b \\cdot \\left(\\frac{a}{a+b}\\right)\n$$\n$$\n\\mathbb{E}[|X_{\\tau}|] = \\frac{ab}{a+b} + \\frac{ab}{a+b} = \\frac{2ab}{a+b}\n$$\n这就是期望值的最终闭式表达式。", "answer": "$$\n\\boxed{\\frac{2ab}{a+b}}\n$$", "id": "3051723"}]}
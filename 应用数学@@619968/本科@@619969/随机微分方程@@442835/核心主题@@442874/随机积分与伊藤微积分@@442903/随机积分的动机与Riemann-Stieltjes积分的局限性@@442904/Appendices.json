{"hands_on_practices": [{"introduction": "经典微积分中的积分，如黎曼-斯蒂尔切斯积分，是为表现良好的“平滑”函数设计的。这些函数的一个关键特性是“有界变差”，这意味着其路径的总“上下移动”是有限的。本练习将通过一个具体、确定性的“锯齿”函数，帮助你直观地理解“无界变差”的含义，并揭示为何这一特性对经典积分理论构成了根本性挑战，从而为理解布朗运动等随机过程的积分奠定基础。[@problem_id:3067244]", "problem": "设 $T0$ 且设 $g:[0,T]\\to\\mathbb{R}$ 是一个函数。在 $[0,T]$ 上的全变差 $V(g,[0,T])$ 是根据区间的分割来定义的。仅使用全变差的核心定义和单调函数的基本性质，完成以下任务。\n\n1. 将全变差 $V(g,[0,T])$ 的定义表述为关于分割的上确界。\n\n2. 对于一个固定的正整数 $N$，考虑具有 $N$ 个相同齿和单位振幅的分段线性“锯齿”函数 $g_N:[0,1]\\to\\mathbb{R}$，其对每个 $k\\in\\{0,1,\\dots,N-1\\}$ 定义如下：\n$$\ng_N(t)=\n\\begin{cases}\n2N\\left(t-\\frac{k}{N}\\right),  t\\in\\left[\\frac{k}{N},\\,\\frac{k}{N}+\\frac{1}{2N}\\right],\\\\\n2-2N\\left(t-\\frac{k}{N}\\right),  t\\in\\left[\\frac{k}{N}+\\frac{1}{2N},\\,\\frac{k+1}{N}\\right].\n\\end{cases}\n$$\n该函数在每个区间 $\\left[\\frac{k}{N},\\,\\frac{k}{N}+\\frac{1}{2N}\\right]$ 上从 $0$ 线性增加到 $1$，然后在 $\\left[\\frac{k}{N}+\\frac{1}{2N},\\,\\frac{k+1}{N}\\right]$ 上从 $1$ 线性减少回 $0$。从第 1 部分的定义出发，计算全变差 $V(g_N,[0,1])$ 的精确值，并以 $N$ 的闭式表达式表示。\n\n3. 仅使用基本定义和关于 Riemann–Stieltjes 积分的公认事实，简要解释第 2 部分的计算如何说明 Riemann–Stieltjes 积分在处理高度振荡的积分子时的局限性，以及为什么这推动了在积分子具有无界变差时发展随机积分。\n\n第 2 部分的最终数值答案必须以 $N$ 的简化解析表达式给出。无需四舍五入。最终答案无需单位。", "solution": "此问题分为三部分：陈述全变差的定义，计算一个特定分段线性函数的全变差，以及解释此计算对积分理论的意义。\n\n### 第 1 部分：全变差的定义\n\n定义在闭区间 $[0, T]$ 上的实值函数 $g$ 的全变差是衡量该函数总“上下”移动的量度。为了正式定义它，我们首先需要区间分割的概念。\n\n区间 $[0, T]$ 的一个分割 $P$ 是一个有限点集 $\\{t_0, t_1, \\dots, t_n\\}$，使得 $0 = t_0  t_1  \\dots  t_n = T$。\n\n对于一个给定的分割 $P$，$g$ 关于 $P$ 的变差和定义为函数在分割连续点上值的绝对差之和：\n$$\nS(P; g) = \\sum_{i=1}^{n} |g(t_i) - g(t_{i-1})|\n$$\n$g$ 在 $[0, T]$ 上的全变差，记作 $V(g, [0, T])$，是所有这些变差和在 $[0, T]$ 所有可能分割集合上的上确界。形式上，\n$$\nV(g, [0, T]) = \\sup_{P} \\left\\{ \\sum_{i=1}^{n} |g(t_i) - g(t_{i-1})| \\right\\}\n$$\n其中上确界取自区间 $[0, T]$ 的所有分割 $P$。如果 $V(g, [0, T])$ 是有限的，则称函数 $g$ 在 $[0, T]$ 上是有界变差的。\n\n### 第 2 部分：锯齿函数 $g_N$ 的全变差\n\n我们有函数 $g_N:[0, 1] \\to \\mathbb{R}$，对 $k \\in \\{0, 1, \\dots, N-1\\}$ 定义如下：\n$$\ng_N(t)=\n\\begin{cases}\n2N\\left(t-\\frac{k}{N}\\right),  t\\in\\left[\\frac{k}{N},\\,\\frac{k}{N}+\\frac{1}{2N}\\right]\\\\\n2-2N\\left(t-\\frac{k}{N}\\right),  t\\in\\left[\\frac{k}{N}+\\frac{1}{2N},\\,\\frac{k+1}{N}\\right]\n\\end{cases}\n$$\n我们想计算其全变差 $V(g_N, [0, 1])$。\n\n全变差的一个基本性质是它在子区间上的可加性。如果 $a  c  b$，则 $V(g, [a,b]) = V(g, [a,c]) + V(g, [c,b])$。此性质可以推广到区间的任何分割。我们可以将区间 $[0, 1]$ 分割成 $N$ 个子区间 $I_k = \\left[\\frac{k}{N}, \\frac{k+1}{N}\\right]$，其中 $k = 0, 1, \\dots, N-1$。在 $[0, 1]$ 上的全变差是这些子区间上全变差的总和：\n$$\nV(g_N, [0, 1]) = \\sum_{k=0}^{N-1} V\\left(g_N, \\left[\\frac{k}{N}, \\frac{k+1}{N}\\right]\\right)\n$$\n我们来计算单个子区间 $I_k$ 上的全变差。在 $I_k$ 内，函数 $g_N(t)$ 在 $t_k^* = \\frac{k}{N} + \\frac{1}{2N}$ 处有一个唯一的转折点。\n函数在端点和转折点的值为：\n$$\ng_N\\left(\\frac{k}{N}\\right) = 0\n$$\n$$\ng_N\\left(\\frac{k}{N} + \\frac{1}{2N}\\right) = 2N\\left(\\left(\\frac{k}{N} + \\frac{1}{2N}\\right) - \\frac{k}{N}\\right) = 2N\\left(\\frac{1}{2N}\\right) = 1\n$$\n$$\ng_N\\left(\\frac{k+1}{N}\\right) = 0\n$$\n函数 $g_N$ 在构成 $I_k$ 的两个子区间上都是单调的：\n1.  在 $\\left[\\frac{k}{N}, \\frac{k}{N} + \\frac{1}{2N}\\right]$ 上，$g_N(t)$ 从 $0$ 单调递增到 $1$。\n2.  在 $\\left[\\frac{k}{N} + \\frac{1}{2N}, \\frac{k+1}{N}\\right]$ 上，$g_N(t)$ 从 $1$ 单调递减到 $0$。\n\n对于区间 $[a, b]$ 上的单调函数 $f$，其全变差就是其在端点处函数值的绝对差，即 $V(f, [a, b]) = |f(b) - f(a)|$。将此性质和可加性应用于区间 $I_k$：\n$$\nV\\left(g_N, I_k\\right) = V\\left(g_N, \\left[\\frac{k}{N}, \\frac{k}{N} + \\frac{1}{2N}\\right]\\right) + V\\left(g_N, \\left[\\frac{k}{N} + \\frac{1}{2N}, \\frac{k+1}{N}\\right]\\right)\n$$\n对于第一个子区间（单调递增）：\n$$\nV\\left(g_N, \\left[\\frac{k}{N}, \\frac{k}{N} + \\frac{1}{2N}\\right]\\right) = \\left|g_N\\left(\\frac{k}{N} + \\frac{1}{2N}\\right) - g_N\\left(\\frac{k}{N}\\right)\\right| = |1 - 0| = 1\n$$\n对于第二个子区间（单调递减）：\n$$\nV\\left(g_N, \\left[\\frac{k}{N} + \\frac{1}{2N}, \\frac{k+1}{N}\\right]\\right) = \\left|g_N\\left(\\frac{k+1}{N}\\right) - g_N\\left(\\frac{k}{N} + \\frac{1}{2N}\\right)\\right| = |0 - 1| = 1\n$$\n因此，单个齿状片段 $I_k$ 上的全变差为：\n$$\nV(g_N, I_k) = 1 + 1 = 2\n$$\n因为在区间 $[0, 1]$ 上有 $N$ 个相同的齿，所以全变差 $V(g_N, [0, 1])$ 是每个齿的变差之和：\n$$\nV(g_N, [0, 1]) = \\sum_{k=0}^{N-1} V(g_N, I_k) = \\sum_{k=0}^{N-1} 2 = N \\times 2 = 2N\n$$\n$g_N$ 在 $[0, 1]$ 上的全变差的精确值为 $2N$。\n\n### 第 3 部分：Riemann-Stieltjes 积分的局限性\n\n第 2 部分的结果为我们理解 Riemann-Stieltjes (R-S) 积分的局限性提供了关键见解，并说明了发展随机积分的必要性。\n\n1.  **Riemann-Stieltjes 积分的存在条件**：分析学中的一个基本定理指出，如果被积函数 $f$ 连续且积分子 $g$ 在 $[a, b]$ 上是有界变差的，则 R-S 积分 $\\int_a^b f(t) \\, dg(t)$ 保证存在。\n\n2.  **无界变差**：我们在第 2 部分的计算表明 $V(g_N, [0, 1]) = 2N$。当我们让振荡次数 $N$ 趋于无穷大时，全变差也趋于无穷大：\n    $$\n    \\lim_{N \\to \\infty} V(g_N, [0, 1]) = \\lim_{N \\to \\infty} 2N = \\infty\n    $$\n    这展示了一个函数如何可以变得如此“粗糙”或“振荡”，以至于其全变差变为无穷大。虽然对于任何有限的 $N$，$g_N$ 都是有界变差的，但该序列在极限情况下说明了具有无界变差函数的概念。\n\n3.  **与随机过程的联系**：随机积分的核心动机源于定义关于随机过程（尤其是布朗运动 $B(t)$）的积分的需求。标准布朗运动的一条路径，以概率 1 计，是一个处处不可微的连续函数。一个至关重要的相关性质是，以概率 1 计，布朗运动路径在任何有限时间区间上都具有**无界变差**。\n\n4.  **Riemann-Stieltjes 积分的失效**：由于布朗运动 $B(t)$ 的样本路径具有无界变差，R-S 积分存在的充分条件不被满足。因此，对于一般的连续函数 $f(t)$，积分 $\\int_a^b f(t) \\, dB(t)$ 无法在 Riemann-Stieltjes 的逐轨意义上定义。布朗路径的高度振荡性质，在性质上类似于当 $N \\to \\infty$ 时的 $g_N(t)$，是根本性的障碍。依赖于积分子路径“长度”为有限的 R-S 积分机制在此失效。\n\n5.  **随机积分的动机**：R-S 理论的失败使得新方法的出现成为必要。随机积分，特别是 Itô 积分，正是为了处理这类无穷变差的积分子而构建的。Itô 积分不是为每个样本路径定义为逐轨的确定性极限。相反，它被定义为逼近和在 $L^2$（均方）意义下的极限。这种构造利用了布朗运动增量的统计特性，具体来说，即虽然一阶变差发散，但二次变差是收敛的。布朗运动在 $[0, T]$ 上的二次变差为 $\\int_0^T (dB_s)^2 = T$。这种有限的二次变差正是 Itô 微积分成功利用的性质，从而能够建立一个一致且强大的关于像布朗运动这类过程的积分理论。\n\n总之，锯齿函数 $g_N$ 提供了一个清晰的确定性例子，说明了增加的振荡如何导致无界的全变差。这直接对应于布朗运动路径的问题性质，从第一性原理上解释了为什么标准 R-S 积分不足以用于随机微积分，以及为什么一个更复杂的理论是必不可少的。", "answer": "$$\\boxed{2N}$$", "id": "3067244"}, {"introduction": "我们已经了解到，布朗运动路径因其“粗糙”而不具有有界变差，那么当我们尝试计算一个看似简单的积分 $\\int B_t \\,dB_t$ 时会发生什么呢？本练习将指导你通过离散求和的方法完成这一计算，揭示一个与经典微积分的链式法则相悖的结果，并引出著名的伊騰（Itô）修正项。这个计算是随机积分理论的基石，它具体地展示了为什么需要一种新的微积分。[@problem_id:3067261]", "problem": "设 $\\{B_{t}\\}_{t \\in [0,T]}$ 为一个标准布朗运动（也称为维纳过程），且 $B_{0}=0$。考虑区间 $[0,T]$ 的一个分割序列 $\\pi_{n}=\\{0=t_{0}^{(n)}  t_{1}^{(n)}  \\dots  t_{N_n}^{(n)}=T\\}$，其网格尺寸 $\\|\\pi_n\\| = \\max_i(t_{i+1}^{(n)} - t_i^{(n)})$ 当 $n \\to \\infty$ 时趋于零。定义黎曼型和为 $S(\\pi_{n})=\\sum_{i=0}^{N_{n}-1} B_{t_{i}^{(n)}}\\big(B_{t_{i+1}^{(n)}}-B_{t_{i}^{(n)}}\\big)$。使用代数恒等式 $a(b-a) = \\frac{1}{2}(b^2 - a^2 - (b-a)^2)$ 和布朗运动二次变差的已知事实，即 $\\sum_{i=0}^{N_{n}-1} (B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}})^2 \\to T$ 依概率收敛，计算 $S(\\pi_n)$ 当 $n\\to\\infty$ 时的依概率极限。这个极限定义了伊藤积分 $\\int_0^T B_t \\,dB_t$。你的最终答案应该是一个包含 $B_T$ 和 $T$ 的表达式。", "solution": "所述问题在数学上是良定的，其科学基础是随机过程理论，并且内部逻辑一致。这是引出伊藤（Itô）随机积分的一个标准且基础的练习。所有必要的条件和定义均已提供。因此，该问题是有效的，下面将给出解答。\n\n该问题需要进行两部分分析。首先，推导一个代数恒等式；其次，利用该恒等式计算一个极限，并在随机微积分的背景下解释其含义。\n\n**第一部分：恒等式的推导**\n\n我们从给定的左端点黎曼和开始\n$$\nS(\\pi_{n})=\\sum_{i=0}^{N_{n}-1} B_{t_{i}^{(n)}}\\big(B_{t_{i+1}^{(n)}}-B_{t_{i}^{(n)}}\\big).\n$$\n推导的核心在于一个简单的代数恒等式。对于任意两个实数 $a$ 和 $b$，我们有以下恒等式：\n$$\na(b-a) = \\frac{1}{2} \\left[ b^2 - a^2 - (b-a)^2 \\right]\n$$\n这可以通过展开右边项来验证：\n$$\n\\frac{1}{2} \\left[ b^2 - a^2 - (b^2 - 2ab + a^2) \\right] = \\frac{1}{2} \\left[ b^2 - a^2 - b^2 + 2ab - a^2 \\right] = \\frac{1}{2} \\left[ 2ab - 2a^2 \\right] = ab - a^2 = a(b-a).\n$$\n我们通过令 $a = B_{t_{i}^{(n)}}$ 和 $b = B_{t_{i+1}^{(n)}}$，将此恒等式应用于和 $S(\\pi_{n})$ 中的每一项。由此可得：\n$$\nB_{t_{i}^{(n)}}\\big(B_{t_{i+1}^{(n)}}-B_{t_{i}^{(n)}}\\big) = \\frac{1}{2} \\left[ \\big(B_{t_{i+1}^{(n)}}\\big)^2 - \\big(B_{t_{i}^{(n)}}\\big)^2 - \\big(B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}}\\big)^2 \\right].\n$$\n现在，我们将两边从 $i=0$ 到 $N_{n}-1$ 求和：\n$$\nS(\\pi_{n}) = \\sum_{i=0}^{N_{n}-1} \\frac{1}{2} \\left[ \\big(B_{t_{i+1}^{(n)}}\\big)^2 - \\big(B_{t_{i}^{(n)}}\\big)^2 - \\big(B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}}\\big)^2 \\right].\n$$\n利用求和的线性性质，我们可以将各项分开：\n$$\nS(\\pi_{n}) = \\frac{1}{2} \\sum_{i=0}^{N_{n}-1} \\left[ \\big(B_{t_{i+1}^{(n)}}\\big)^2 - \\big(B_{t_{i}^{(n)}}\\big)^2 \\right] - \\frac{1}{2} \\sum_{i=0}^{N_{n}-1} \\big(B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}}\\big)^2.\n$$\n第一个求和是一个裂项级数：\n\\begin{align*}\n\\sum_{i=0}^{N_{n}-1} \\left[ \\big(B_{t_{i+1}^{(n)}}\\big)^2 - \\big(B_{t_{i}^{(n)}}\\big)^2 \\right] = \\left( \\big(B_{t_{1}^{(n)}}\\big)^2 - \\big(B_{t_{0}^{(n)}}\\big)^2 \\right) + \\left( \\big(B_{t_{2}^{(n)}}\\big)^2 - \\big(B_{t_{1}^{(n)}}\\big)^2 \\right) + \\dots + \\left( \\big(B_{t_{N_{n}}^{(n)}}\\big)^2 - \\big(B_{t_{N_{n}-1}^{(n)}}\\big)^2 \\right) \\\\\n= \\big(B_{t_{N_{n}}^{(n)}}\\big)^2 - \\big(B_{t_{0}^{(n)}}\\big)^2.\n\\end{align*}\n根据分割的定义 $t_{0}^{(n)}=0$ 和 $t_{N_{n}}^{(n)}=T$，以及初始条件 $B_{0}=0$，该和式可简化为：\n$$\n\\big(B_{T}\\big)^2 - \\big(B_{0}\\big)^2 = (B_{T})^2 - 0^2 = (B_{T})^2.\n$$\n将此结果代回到 $S(\\pi_{n})$ 的表达式中，我们便得到所求的恒等式：\n$$\nS(\\pi_{n}) = \\frac{1}{2} (B_{T})^2 - \\frac{1}{2} \\sum_{i=0}^{N_{n}-1} \\big(B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}}\\big)^2.\n$$\n该恒等式将类黎曼和 $S(\\pi_{n})$ 与过程在时间 $T$ 的值的平方以及在该分割上的二次变差和联系起来。\n\n**第二部分：极限计算与解释**\n\n我们需要计算当 $n \\to \\infty$ 时 $S(\\pi_{n})$ 的依概率极限。我们对第一部分推导出的恒等式取极限。根据依概率收敛的性质（具体来说，如果 $X_n \\to X$ 和 $Y_n \\to Y$ 依概率收敛，则 $X_n+Y_n \\to X+Y$ 依概率收敛），我们可以分别分析每一项的极限。\n$$\n\\lim_{n\\to\\infty} S(\\pi_{n}) = \\lim_{n\\to\\infty} \\left( \\frac{1}{2} (B_{T})^2 - \\frac{1}{2} \\sum_{i=0}^{N_{n}-1} \\big(B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}}\\big)^2 \\right).\n$$\n项 $\\frac{1}{2}(B_{T})^2$ 不依赖于分割的索引 $n$，因此其极限就是它本身。第二项涉及二次变差和。问题陈述中给出了一个关键事实，即\n$$\n\\sum_{i=0}^{N_{n}-1} \\big(B_{t_{i+1}^{(n)}} - B_{t_{i}^{(n)}}\\big)^2 \\to T \\quad \\text{在 } n \\to \\infty \\text{ 时依概率收敛}.\n$$\n因此，我们可以将此极限代入我们的表达式中：\n$$\n\\lim_{n\\to\\infty} S(\\pi_{n}) = \\frac{1}{2} (B_{T})^2 - \\frac{1}{2} T.\n$$\n这个极限是 $B_t$ 对自身的伊藤（Itô）积分的定义，记作 $\\int_{0}^{T} B_{t} \\,dB_{t}$。因此，我们证明了\n$$\n\\int_{0}^{T} B_{t} \\,dB_{t} = \\frac{1}{2} (B_{T})^2 - \\frac{1}{2} T.\n$$\n**解释：**\n\n这一结果凸显了其与经典微积分的根本性偏离，并解释了标准的黎曼-斯蒂尔杰斯（Riemann-Stieltjes）积分框架为何对布朗运动的路径失效。\n\n1.  **黎曼-斯蒂尔杰斯积分的失效：** 对于一个“行为良好”的函数 $f(t)$（例如，连续可微函数），黎曼-斯蒂尔杰斯积分 $\\int_0^T f(t) \\,df(t)$ 被定义为与 $S(\\pi_n)$ 类似的和的极限，根据普通微积分的法则，其值为 $\\frac{1}{2}[f(T)]^2 - \\frac{1}{2}[f(0)]^2$。如果将此经典法则应用于布朗运动，我们期望的极限应为 $\\frac{1}{2}(B_T)^2 - \\frac{1}{2}(B_0)^2 = \\frac{1}{2}(B_T)^2$。而我们的计算结果却多出了一项 $-\\frac{1}{2}T$。\n\n    这种差异的原因在于，黎曼-斯蒂尔杰斯积分理论要求积分函数（在本例中为 $t \\mapsto B_t$）是有界变差的。一个有界变差函数的二次变差为零。然而，布朗运动的样本路径在任何区间上都以概率 1 是无界变差的。其在 $[0,T]$ 上的二次变差为 $T \\neq 0$ 这一已知事实，正是此性质的精确表述。这个非零的二次变差是破坏经典积分法则的关键特征。\n\n2.  **随机积分的动机：** 该计算表明，虽然类黎曼和的极限存在，但它包含一个修正项 $-\\frac{1}{2}T$，该项直接源于布朗运动过程的非零二次变差。这一发现使得建立一种新的积分理论，即随机积分（特别是伊藤微积分），成为必要，以便一致地处理涉及此类过程的积分。结果 $\\int_{0}^{T} B_{t} \\,dB_{t} = \\frac{1}{2}(B_T)^2 - \\frac{1}{2}T$ 是伊藤引理（Itô's lemma）的一个原型示例，伊藤引理是随机微积分的链式法则，它系统地包含了与底层随机过程的二次变差相关的项。\n\n最终答案是 $S(\\pi_{n})$ 的极限值。", "answer": "$$\n\\boxed{\\frac{1}{2}(B_T)^2 - \\frac{1}{2}T}\n$$", "id": "3067261"}, {"introduction": "前面的练习为一个特定积分揭示了一个意外的修正项。本练习将此思想推广，引入“二次协变差”这一强大工具，它用于精确衡量两个随机过程在极小时间尺度上如何协同变化。通过计算布朗运动 $B_t$ 与其函数 $f(B_t)$ 之间的二次协变差，你将在更一般的情境下发现伊騰修正项的系统性来源，并为理解随机微积分的核心——伊騰公式——铺平道路。[@problem_id:3067249]", "problem": "设 $B=\\{B_{t}\\}_{t\\geq 0}$ 是一个标准一维布朗运动，满足 $B_{0}=0$，具有连续路径和独立平稳增量。设 $f:\\mathbb{R}\\to\\mathbb{R}$ 是一个二阶连续可微函数，其一阶和二阶导数均有界。对于两个连续过程 $X=\\{X_{t}\\}_{t\\geq 0}$ 和 $Y=\\{Y_{t}\\}_{t\\geq 0}$，其二次协变差 $[X,Y]_{t}$ 定义为（当极限依概率存在时）：\n$$\n[X,Y]_{t}=\\lim_{\\|\\mathcal{P}\\|\\to 0}\\sum_{i=0}^{n-1}\\big(X_{t_{i+1}}-X_{t_{i}}\\big)\\big(Y_{t_{i+1}}-Y_{t_{i}}\\big),\n$$\n其中 $\\mathcal{P}=\\{0=t_{0}  t_1  \\dots  t_n = t\\}$ 是区间 $[0,t]$ 的一个分割，其网格尺寸 $\\|\\mathcal{P}\\| \\to 0$。利用此定义，计算二次协变差 $[B,f(B)]_{t}$。", "solution": "我们要计算标准一维布朗运动 $B_{t}$ 和过程 $f(B_{t})$ 的二次协变差 $[B,f(B)]_{t}$，其中 $f$ 是一个二阶连续可微函数，其一阶和二阶导数均有界。计算将从二次协变差作为分割和极限的定义出发。\n\n设 $\\mathcal{P}=\\{0=t_{0}  t_1  \\dots  t_n = t\\}$ 是区间 $[0,t]$ 的一个分割，其网格尺寸 $\\|\\mathcal{P}\\| \\to 0$。根据定义，我们感兴趣的和是：\n$$\nS(\\mathcal{P}) = \\sum_{i=0}^{n-1} \\big(B_{t_{i+1}}-B_{t_{i}}\\big)\\big(f(B_{t_{i+1}})-f(B_{t_{i}})\\big)\n$$\n为了计算这个极限，我们对每一项 $f(B_{t_{i+1}})-f(B_{t_{i}})$ 使用泰勒展开。由于 $f$ 是二阶连续可微的，我们可以在 $B_{t_i}$ 点附近展开 $f(B_{t_{i+1}})$：\n$$\nf(B_{t_{i+1}}) = f(B_{t_i}) + f'(B_{t_i})(B_{t_{i+1}}-B_{t_i}) + \\frac{1}{2}f''(c_i)(B_{t_{i+1}}-B_{t_i})^2\n$$\n其中 $c_i$ 是介于 $B_{t_i}$ 和 $B_{t_{i+1}}$ 之间的某个值。\n因此，差值可以写成：\n$$\nf(B_{t_{i+1}})-f(B_{t_{i}}) = f'(B_{t_i})(B_{t_{i+1}}-B_{t_i}) + \\frac{1}{2}f''(\\xi_i)(B_{t_{i+1}}-B_{t_i})^2\n$$\n其中 $\\xi_i$ 是介于 $B_{t_i}$ 和 $B_{t_{i+1}}$ 之间的某个（随机）值。\n\n现在我们将这个展开式代入和 $S(\\mathcal{P})$：\n\\begin{align*}\nS(\\mathcal{P}) = \\sum_{i=0}^{n-1} (B_{t_{i+1}}-B_{t_{i}}) \\left[ f'(B_{t_i})(B_{t_{i+1}}-B_{t_i}) + \\frac{1}{2}f''(\\xi_i)(B_{t_{i+1}}-B_{t_i})^2 \\right] \\\\\n= \\sum_{i=0}^{n-1} f'(B_{t_i})(B_{t_{i+1}}-B_{t_i})^2 + \\sum_{i=0}^{n-1} \\frac{1}{2}f''(\\xi_i)(B_{t_{i+1}}-B_{t_i})^3\n\\end{align*}\n我们分别分析这两个和在 $\\|\\mathcal{P}\\| \\to 0$ 时的极限。\n\n**第一个和的极限：**\n第一个和是\n$$\nQ_1(\\mathcal{P}) = \\sum_{i=0}^{n-1} f'(B_{t_i})(B_{t_{i+1}}-B_{t_i})^2\n$$\n这是函数 $f'(B_s)$ 对布朗运动二次变差的“黎曼和”。由于 $f'$ 是连续的，且布朗运动路径是连续的，所以复合函数 $s \\mapsto f'(B_s)$ 也是连续的。二次变差的一个基本结果是，对于一个连续函数 $H_s$，当 $\\|\\mathcal{P}\\| \\to 0$ 时，我们有以下依概率收敛：\n$$\n\\sum_{i=0}^{n-1} H_{t_i}(B_{t_{i+1}}-B_{t_i})^2 \\xrightarrow{p} \\int_0^t H_s ds\n$$\n在我们的例子中，$H_s = f'(B_s)$，所以\n$$\nQ_1(\\mathcal{P}) \\xrightarrow{p} \\int_0^t f'(B_s) ds\n$$\n\n**第二个和的极限：**\n第二个和是\n$$\nQ_2(\\mathcal{P}) = \\sum_{i=0}^{n-1} \\frac{1}{2}f''(\\xi_i)(B_{t_{i+1}}-B_{t_i})^3\n$$\n我们知道 $f''$ 是有界的，即存在一个常数 $M$ 使得 $|f''(x)| \\leq M$ 对所有 $x$ 成立。因此，\n$$\n|Q_2(\\mathcal{P})| \\leq \\sum_{i=0}^{n-1} \\frac{M}{2}|B_{t_{i+1}}-B_{t_i}|^3\n$$\n可以证明（例如，通过计算其期望值）这个三次变差和依概率收敛于 0。直观地看，$(B_{t_{i+1}}-B_{t_i})^2$ 的量级是 $t_{i+1}-t_i$，所以 $(B_{t_{i+1}}-B_{t_i})^3$ 的量级大约是 $(t_{i+1}-t_i)^{3/2}$，这个量级比 $t_{i+1}-t_i$ 小，所以当对它求和时，极限为零。更严格地说，可以证明对于任何 $\\epsilon > 0$，$\\sum |B_{t_{i+1}}-B_{t_i}|^{2+\\epsilon} \\xrightarrow{p} 0$。因此，\n$$\nQ_2(\\mathcal{P}) \\xrightarrow{p} 0\n$$\n\n**综合结果：**\n结合两个极限，我们得到 $S(\\mathcal{P})$ 的极限：\n$$\n[B, f(B)]_t = \\lim_{\\|\\mathcal{P}\\|\\to 0} S(\\mathcal{P}) = \\lim_{\\|\\mathcal{P}\\|\\to 0} Q_1(\\mathcal{P}) + \\lim_{\\|\\mathcal{P}\\|\\to 0} Q_2(\\mathcal{P}) = \\int_0^t f'(B_s) ds + 0\n$$\n因此，二次协变差是\n$$\n[B, f(B)]_t = \\int_0^t f'(B_s) ds\n$$\n这个结果是伊藤公式的核心部分。伊藤公式指出：\n$$\ndf(B_t) = f'(B_t)dB_t + \\frac{1}{2}f''(B_t)dt\n$$\n二次协变差 $[dB_t, df(B_t)]$ 在启发式上是 $[dB_t, f'(B_t)dB_t + \\frac{1}{2}f''(B_t)dt] = f'(B_t)(dB_t)^2 + \\dots = f'(B_t)dt$。我们的严格计算验证了这个启发式，并为伊藤公式的修正项提供了坚实的基础。", "answer": "$$\\boxed{\\int_{0}^{t} f'(B_{s})ds}$$", "id": "3067249"}]}
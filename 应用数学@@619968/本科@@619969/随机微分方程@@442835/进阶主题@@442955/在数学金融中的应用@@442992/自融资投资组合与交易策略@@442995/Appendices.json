{"hands_on_practices": [{"introduction": "在金融数学中，直接分析投资组合的价值过程可能非常复杂。一个关键的简化技巧是将其转换为以无风险资产（货币市场账户）为计价单位的“折现”过程。这个练习将引导你通过伊藤引理，从自融资条件出发，推导折现财富过程的随机微分方程，并揭示为何无风险利率项 $r_t$ 会奇迹般地消失，这是理解风险中性定价的第一步 ([@problem_id:3073862])。", "problem": "考虑一个无摩擦的金融市场，其中包含一个风险资产（其价格过程为 $S_t$）和一个货币市场账户（其价格过程为 $B_t$）。假设 $S_t$ 和 $B_t$ 服从以下随机微分方程 (SDE)：\n$$\ndS_t=\\mu_t S_t\\,dt+\\sigma_t S_t\\,dW_t,\\qquad dB_t=r_t B_t\\,dt,\n$$\n其中 $W_t$ 是标准布朗运动，而 $\\mu_t$、$\\sigma_t$ 和 $r_t$ 是适应过程，并具有足够的正则性以确保解的存在性。一个交易策略由风险资产中的可预测持仓 $\\varphi_t$ 和货币市场账户中的可预测持仓 $\\psi_t$ 组成，其生成的财富过程为\n$$\nV_t=\\varphi_t S_t+\\psi_t B_t.\n$$\n该策略是自融资的，意味着财富的变化完全来自于持有资产的收益和损失：\n$$\ndV_t=\\varphi_t\\,dS_t+\\psi_t\\,dB_t.\n$$\n定义贴现过程 $\\tilde{V}_t=V_t/B_t$ 和 $\\tilde{S}_t=S_t/B_t$。从自融资策略的基本定义和给定的SDE出发，基于第一性原理推导贴现财富过程 $\\tilde{V}_t$ 的随机微分，并从漂移项的层面解释包含 $r_t$ 的贡献项是如何相互抵消的。然后，用 $\\varphi_t$、 $S_t$、 $B_t$、 $\\mu_t$、 $r_t$ 和 $\\sigma_t$ 来表示 $d\\tilde{V}_t$ 中的漂移系数（即乘以 $dt$ 的系数）。将你的最终答案表示为该漂移系数的单个封闭形式解析表达式。", "solution": "该问题是有效的。这是一个在随机微积分应用于数学金融领域内提法良好的、有科学依据的问题，它基于标准定义，没有歧义或矛盾。我们可以开始推导。\n\n目标是推导贴现财富过程 $\\tilde{V}_t = V_t/B_t$ 的随机微分，并确定其漂移系数。推导必须从所给的定义和第一性原理出发。\n\n我们已知以下过程和定义：\n1.  货币市场账户：$dB_t = r_t B_t dt$\n2.  风险资产：$dS_t = \\mu_t S_t dt + \\sigma_t S_t dW_t$\n3.  财富过程：$V_t = \\varphi_t S_t + \\psi_t B_t$\n4.  自融资条件：$dV_t = \\varphi_t dS_t + \\psi_t dB_t$\n\n首先，我们将 $S_t$ 和 $B_t$ 的SDE代入自融资条件，求出财富过程 $dV_t$ 的随机微分：\n$$\ndV_t = \\varphi_t (\\mu_t S_t dt + \\sigma_t S_t dW_t) + \\psi_t (r_t B_t dt)\n$$\n将 $dt$ 和 $dW_t$ 项合并，我们得到 $V_t$ 的SDE：\n$$\ndV_t = (\\mu_t \\varphi_t S_t + r_t \\psi_t B_t) dt + (\\sigma_t \\varphi_t S_t) dW_t\n$$\n\n接下来，我们要计算贴现财富过程 $d\\tilde{V}_t$ 的微分，其中 $\\tilde{V}_t = V_t / B_t = V_t B_t^{-1}$。我们对两个过程 $V_t$ 和 $B_t^{-1}$ 的乘积应用伊藤乘积法则：\n$$\nd\\tilde{V}_t = d(V_t B_t^{-1}) = B_t^{-1} dV_t + V_t d(B_t^{-1}) + d\\langle V, B^{-1} \\rangle_t\n$$\n为了使用这个公式，我们需要微分项 $d(B_t^{-1})$ 和 $d\\langle V, B^{-1} \\rangle_t$。\n\n过程 $B_t$ 是一个常微分方程 $dB_t/dt = r_t B_t$ 的解。它没有随机（$dW_t$）分量。因此，它的逆 $B_t^{-1}$ 的微分也没有随机分量。使用标准微积分（或对一个扩散为零的过程应用伊藤引理），我们得到：\n$$\nd(B_t^{-1}) = \\frac{d(B_t^{-1})}{dB_t} dB_t = -B_t^{-2} dB_t = -B_t^{-2} (r_t B_t dt) = -r_t B_t^{-1} dt\n$$\n\n二次协变项 $d\\langle V, B^{-1} \\rangle_t$ 是通过将 $dV_t$ 和 $d(B_t^{-1})$ 中 $dW_t$ 项的系数相乘再乘以 $dt$ 得到的。$V_t$ 的扩散系数是 $\\sigma_t \\varphi_t S_t$。$B_t^{-1}$ 的扩散系数是 $0$。因此：\n$$\nd\\langle V, B^{-1} \\rangle_t = (\\sigma_t \\varphi_t S_t) \\cdot (0) \\cdot dt = 0\n$$\n\n现在我们将 $dV_t$、$d(B_t^{-1})$ 和 $d\\langle V, B^{-1} \\rangle_t$ 的表达式代回 $d\\tilde{V}_t$ 的公式中：\n$$\nd\\tilde{V}_t = B_t^{-1} \\left[ (\\mu_t \\varphi_t S_t + r_t \\psi_t B_t) dt + (\\sigma_t \\varphi_t S_t) dW_t \\right] + V_t \\left[ -r_t B_t^{-1} dt \\right] + 0\n$$\n\n现在我们收集 $dt$ 项（漂移项）和 $dW_t$ 项（扩散项）的系数：\n$$\nd\\tilde{V}_t = \\left[ B_t^{-1}(\\mu_t \\varphi_t S_t + r_t \\psi_t B_t) - r_t V_t B_t^{-1} \\right] dt + \\left[ B_t^{-1} \\sigma_t \\varphi_t S_t \\right] dW_t\n$$\n$d\\tilde{V}_t$ 的漂移系数是乘以 $dt$ 的表达式：\n$$\n\\text{漂移系数} = B_t^{-1}(\\mu_t \\varphi_t S_t + r_t \\psi_t B_t) - r_t V_t B_t^{-1}\n$$\n我们来简化这个表达式：\n$$\n\\text{漂移系数} = \\frac{\\mu_t \\varphi_t S_t}{B_t} + \\frac{r_t \\psi_t B_t}{B_t} - \\frac{r_t V_t}{B_t} = \\frac{\\mu_t \\varphi_t S_t}{B_t} + r_t \\psi_t - \\frac{r_t V_t}{B_t}\n$$\n为了解释包含 $r_t$ 的项是如何抵消的，我们将财富过程的定义 $V_t = \\varphi_t S_t + \\psi_t B_t$ 代入该表达式中：\n$$\n\\text{漂移系数} = \\frac{\\mu_t \\varphi_t S_t}{B_t} + r_t \\psi_t - \\frac{r_t (\\varphi_t S_t + \\psi_t B_t)}{B_t}\n$$\n展开最后一项：\n$$\n\\text{漂移系数} = \\frac{\\mu_t \\varphi_t S_t}{B_t} + r_t \\psi_t - \\left( \\frac{r_t \\varphi_t S_t}{B_t} + \\frac{r_t \\psi_t B_t}{B_t} \\right)\n$$\n$$\n\\text{漂移系数} = \\frac{\\mu_t \\varphi_t S_t}{B_t} + r_t \\psi_t - \\frac{r_t \\varphi_t S_t}{B_t} - r_t \\psi_t\n$$\n在这里，我们清楚地看到抵消过程：项 $+r_t \\psi_t$ 来自于货币市场持仓 $\\psi_t$ 的增长，它正好被项 $-r_t \\psi_t$ 所抵消，后者来自于对总财富 $V_t$ 中货币市场部分的贴现。\n\n抵消之后，剩余的漂移系数为：\n$$\n\\text{漂移系数} = \\frac{\\mu_t \\varphi_t S_t}{B_t} - \\frac{r_t \\varphi_t S_t}{B_t}\n$$\n提取公因式，我们得到贴现财富过程 $\\tilde{V}_t$ 漂移系数的最终封闭形式表达式：\n$$\n\\text{漂移系数} = \\frac{\\varphi_t S_t}{B_t} (\\mu_t - r_t)\n$$\n这个结果揭示了贴现投资组合的增长率是由持有的贴现风险资产数量 $\\varphi_t S_t / B_t$ 乘以风险资产相对于无风险利率的超额回报率 $\\mu_t - r_t$ 所驱动的。", "answer": "$$\n\\boxed{\\frac{\\varphi_t S_t}{B_t} (\\mu_t - r_t)}\n$$", "id": "3073862"}, {"introduction": "理解了投资组合价值的动态演化后，下一个核心问题是量化其风险。二次变差 $[V,V]_t$ 是衡量一个随机过程累积波动性的基本工具。通过这个练习，你将计算一个自融资投资组合的二次变差，从而直观地看到投资组合的风险（即其扩散项的规模）是如何完全由交易策略 $\\varphi_t$ 和标的资产的波动率 $\\sigma$ 所决定的 ([@problem_id:3073872])。", "problem": "考虑一个无摩擦市场，该市场建立在支持标准布朗运动 $W_t$ 的带滤概率空间 $(\\Omega, \\mathcal{F}, (\\mathcal{F}_t)_{t \\ge 0}, \\mathbb{P})$ 上。风险资产价格过程 $S_t$ 服从几何布朗运动 (GBM)，其动态为 $dS_t = \\mu S_t\\,dt + \\sigma S_t\\,dW_t$，其中 $\\mu \\in \\mathbb{R}$ 和 $\\sigma > 0$ 是常数。货币市场账户 $B_t$ 满足 $dB_t = r B_t\\,dt$，其中短期利率 $r \\in \\mathbb{R}$ 为常数。\n\n一个交易策略由可预测过程 $(\\varphi_t, \\psi_t)$ 组成，分别表示在风险资产和货币市场账户中的持仓。假设 $(\\varphi_t, \\psi_t)$ 是自融资的，因此财富过程 $V_t = \\varphi_t S_t + \\psi_t B_t$ 的演化遵循 $dV_t = \\varphi_t\\,dS_t + \\psi_t\\,dB_t$。同时假设 $\\varphi_t$ 是可预测且平方可积的，其意义在于保证随机积分 $\\int_0^t \\varphi_s \\sigma S_s\\,dW_s$ 是良定义的。\n\n仅使用随机分析的基础概念以及连续半鞅的二次变差的定义，确定财富过程 $V_t$ 的二次变差 $[V,V]_t$，并用 $\\varphi$、$\\sigma$ 和 $S$ 表示。你的最终答案必须是关于 $[V,V]_t$ 的一个单一的闭式解析表达式。", "solution": "该问题要求计算金融市场模型中财富过程 $V_t$ 的二次变差，记为 $[V,V]_t$。该市场由一种风险资产 $S_t$ 和一个无风险货币市场账户 $B_t$ 组成。\n\n风险资产 $S_t$ 的动态由几何布朗运动 (GBM) 描述：\n$$dS_t = \\mu S_t\\,dt + \\sigma S_t\\,dW_t$$\n其中 $\\mu$ 是常数漂移率，$\\sigma > 0$ 是常数波动率，$W_t$ 是标准布朗运动。\n\n货币市场账户 $B_t$ 的动态由下式给出：\n$$dB_t = r B_t\\,dt$$\n其中 $r$ 是常数无风险利率。该过程是有限变差过程，因为其路径关于时间 $t$ 是可微的。\n\n财富过程 $V_t$ 由一个投资组合定义，该组合在风险资产中的持仓为 $\\varphi_t$，在货币市场账户中的持仓为 $\\psi_t$：\n$$V_t = \\varphi_t S_t + \\psi_t B_t$$\n假设该投资组合是自融资的。这个关键条件意味着投资组合价值的变化完全由标的资产价格的变化引起，而非源于资本的注入或提取。自融资条件的微分形式如下：\n$$dV_t = \\varphi_t\\,dS_t + \\psi_t\\,dB_t$$\n\n为了确定财富过程 $V_t$ 的动态，我们将 $dS_t$ 和 $dB_t$ 的表达式代入自融资方程中：\n$$dV_t = \\varphi_t (\\mu S_t\\,dt + \\sigma S_t\\,dW_t) + \\psi_t (r B_t\\,dt)$$\n我们可以通过组合包含 $dt$ 的项（漂移部分）和包含 $dW_t$ 的项（扩散部分）来重新整理此方程：\n$$dV_t = (\\varphi_t \\mu S_t + \\psi_t r B_t)\\,dt + (\\varphi_t \\sigma S_t)\\,dW_t$$\n这个表达式是财富过程 $V_t$ 的随机微分方程 (SDE)。它是一个标准 Itô 过程，形式为 $dX_t = a_t\\,dt + b_t\\,dW_t$，其中：\n- 漂移系数：$a_t = \\varphi_t \\mu S_t + \\psi_t r B_t$\n- 扩散系数：$b_t = \\varphi_t \\sigma S_t$\n\n问题要求解 $V_t$ 的二次变差，记为 $[V,V]_t$。随机分析中的一个基本概念是，对于任何一个SDE为 $dX_t = a_t\\,dt + b_t\\,dW_t$ 的 Itô 过程形式的连续半鞅 $X_t$，其二次变差由其扩散系数平方的积分给出。形式上，这可以写作：\n$$d[X,X]_t = b_t^2\\,dt$$\n将其从 $0$ 积分到 $t$，得到：\n$$[X,X]_t = \\int_0^t b_s^2\\,ds$$\n这个结果源于 Itô 乘法规则，其中 $(dW_t)^2 = dt$，而 $(dt)^2 = 0$ 且 $dt\\,dW_t = 0$。二次变差捕捉了过程的“波动性”，并且仅对于具有鞅部分的过程（例如由 $dW_t$ 驱动的过程）非零。有限变差部分（漂移项）对二次变差没有贡献。\n\n将此原理应用于我们的财富过程 $V_t$，我们确定其扩散系数为 $b_t = \\varphi_t \\sigma S_t$。将其代入二次变差的通用公式，得到：\n$$[V,V]_t = \\int_0^t (\\varphi_s \\sigma S_s)^2\\,ds$$\n展开积分内的平方项，我们得到财富过程二次变差的最终表达式：\n$$[V,V]_t = \\int_0^t \\varphi_s^2 \\sigma^2 S_s^2\\,ds$$\n该表达式依赖于交易策略 $\\varphi_s$、资产价格过程 $S_s$ 和常数波动率 $\\sigma$，这与问题陈述的要求一致。它表示投资组合的扩散部分在时间区间 $[0, t]$ 上的累积方差。", "answer": "$$\\boxed{\\int_0^t \\varphi_s^{2} \\sigma^{2} S_s^{2}\\,ds}$$", "id": "3073872"}, {"introduction": "理论的最终目的是付诸实践，而自融资投资组合理论的一个核心应用就是复制衍生品。这个练习将让你亲手构建一个具体的交易策略，以复制一个远期合约的到期收益。你将从头开始，通过持有股票并做空无风险资产来构造一个自融资策略，并验证其确实能在到期日 $T$ 完美复制目标收益 $S_T - K$，从而深刻理解“复制”和“无套利定价”之间的联系 ([@problem_id:3073898])。", "problem": "考虑一个无摩擦市场，该市场建立在一个支持标准布朗运动的过滤概率空间上，包含一种风险资产和一个货币市场账户。风险资产价格过程 $S_t$ 服从形式为 $dS_t=\\mu_t S_t\\,dt+\\sigma_t S_t\\,dW_t$ 的随机微分方程，其中 $\\mu_t$ 和 $\\sigma_t$ 是适应过程，且 $\\sigma_t>0$。货币市场账户 $B_t$ 根据 $dB_t=r_t B_t\\,dt$ 演变，其中 $B_0>0$，$r_t$ 是一个确定性的、连续的短期利率过程，因此 $B_t=\\exp\\!\\left(\\int_0^t r_u\\,du\\right)B_0$。一个交易策略是一对可预测过程 $(\\varphi_t,\\psi_t)$，其中 $\\varphi_t$ 表示持有的风险资产份额数量，$\\psi_t$ 表示持有的货币市场单位数量。其价值为 $V_t=\\varphi_t S_t+\\psi_t B_t$。如果 $dV_t=\\varphi_t\\,dS_t+\\psi_t\\,dB_t$ 成立，则该策略是自融资的。\n\n你希望通过一个自融资策略，在到期日 $T>0$ 复制一个远期式回报 $H(S_T)=S_T-K$（其中 $K>0$ 为给定常数），并计算其初始成本。仅从上述定义出发，构造一个与时间相关的策略 $(\\varphi_t,\\psi_t)$，该策略是自融资的并且在 $T$ 时刻复制 $H(S_T)$，并严格验证它的确是自融资的。以 $S_0$、$S_T$、$K$、$B_0$ 和 $B_T$ 表示，计算投资组合在 $t=0$ 和 $t=T$ 时的闭式价值。\n\n将你的最终答案以行矩阵的形式写成序对 $\\left(V_0,V_T\\right)$。无需四舍五入。", "solution": "我们从自融资策略和货币市场账户的核心定义开始。根据定义，一个价值为 $V_t=\\varphi_t S_t+\\psi_t B_t$ 的策略 $(\\varphi_t,\\psi_t)$ 是自融资的，当且仅当\n$$\ndV_t=\\varphi_t\\,dS_t+\\psi_t\\,dB_t.\n$$\n我们寻求在 $t=T$ 时复制 $H(S_T)=S_T-K$。受回报结构的启发，一个自然的想法是持有一份风险资产，并做空一个在时刻 $T$ 交付 $K$ 的货币市场头寸。由于 $r_t$ 是确定性的，因此 $B_T=\\exp\\!\\left(\\int_0^T r_u\\,du\\right)B_0$ 在时刻 $0$ 是已知的。\n\n为了在时刻 $T$ 使用货币市场交付 $K$，我们持有恒定数量的货币市场账户单位，等于\n$$\n\\psi_t\\equiv -\\frac{K}{B_T}\\quad\\text{对于所有 }t\\in[0,T].\n$$\n这个选择确保了在时刻 $T$ 货币市场头寸的价值为 $\\psi_T B_T=-K$。为了产生回报中的 $S_T$ 部分，我们在所有时刻都持有一份风险资产：\n$$\n\\varphi_t\\equiv 1\\quad\\text{对于所有 }t\\in[0,T].\n$$\n因此，候选策略是 $(\\varphi_t,\\psi_t)=\\left(1,-K/B_T\\right)$。\n\n该策略的价值过程是\n$$\nV_t=\\varphi_t S_t+\\psi_t B_t=S_t-\\frac{K}{B_T}B_t=S_t-K\\,\\frac{B_t}{B_T}.\n$$\n在到期日 $t=T$，我们有 $V_T=S_T-K\\,\\frac{B_T}{B_T}=S_T-K$，这与目标回报 $H(S_T)$ 相匹配。\n\n我们现在验证该策略是自融资的。直接从 $V_t=S_t-\\frac{K}{B_T}B_t$ 计算 $dV_t$：\n$$\ndV_t=dS_t-\\frac{K}{B_T}\\,dB_t.\n$$\n另一方面，根据构造，$\\varphi_t=1$ 和 $\\psi_t=-\\frac{K}{B_T}$ 是常数过程，所以自融资条件的右侧为\n$$\n\\varphi_t\\,dS_t+\\psi_t\\,dB_t=1\\cdot dS_t+\\left(-\\frac{K}{B_T}\\right)dB_t=dS_t-\\frac{K}{B_T}\\,dB_t.\n$$\n因此 $dV_t=\\varphi_t\\,dS_t+\\psi_t\\,dB_t$ 恒成立，所以该策略是自融资的。\n\n最后，计算投资组合在 $t=0$ 和 $t=T$ 时的价值：\n- 在 $t=0$ 时，\n$$\nV_0=S_0-\\frac{K}{B_T}B_0=S_0-K\\,\\frac{B_0}{B_T}.\n$$\n- 在 $t=T$ 时，\n$$\nV_T=S_T-\\frac{K}{B_T}B_T=S_T-K.\n$$\n这些是以 $S_0$、$S_T$、$K$、$B_0$ 和 $B_T$ 表示的闭式表达式。如果进一步写出 $B_t=\\exp\\!\\left(\\int_0^t r_u\\,du\\right)B_0$ 且 $B_0>0$，那么 $\\frac{B_0}{B_T}=\\exp\\!\\left(-\\int_0^T r_u\\,du\\right)$，这就得到了我们熟悉的对行权价的现值贴现。然而，所要求的表达式已按要求用 $B_0$ 和 $B_T$ 给出。", "answer": "$$\\boxed{\\begin{pmatrix}S_0-K\\,\\dfrac{B_0}{B_T}  S_T-K\\end{pmatrix}}$$", "id": "3073898"}]}
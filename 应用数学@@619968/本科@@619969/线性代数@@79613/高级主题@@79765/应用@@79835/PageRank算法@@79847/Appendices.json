{"hands_on_practices": [{"introduction": "PageRank算法的核心是一种迭代过程，我们从一个代表平均重要性的初始向量开始，通过重复应用谷歌矩阵$G$来不断更新和完善排名。这个练习将指导你完成最基础的步骤：从一个简单的链接图构建所需的矩阵，并执行第一步迭代$ \\mathbf{x}_{1} = G \\mathbf{x}_{0} $。这个实践旨在巩固你对链接结构如何转化为数学对象，以及重要性如何在网络中流动的理解。[@problem_id:1381670]", "problem": "考虑一个由两篇研究论文P1和P2组成的简化引文网络。其引文结构很简单：论文P1引用了论文P2，但论文P2没有引用论文P1。我们希望通过一步迭代算法来确定这些论文的重要性排名。\n\n在任意步骤 $k$ 时，论文的重要性由列向量 $\\mathbf{x}_k = \\begin{pmatrix} r_1 \\\\ r_2 \\end{pmatrix}$ 表示，其中 $r_1$ 和 $r_2$ 分别是P1和P2的非负重要性得分，且满足 $r_1 + r_2 = 1$。排名根据规则 $\\mathbf{x}_{k+1} = G \\mathbf{x}_k$ 进行更新，其中 $G$ 是该网络的“谷歌矩阵”。\n\n矩阵 $G$ 定义为 $G = dS + \\frac{1-d}{n}J$，其组成部分如下：\n-   $n$ 是网络中论文的数量。\n-   $d$ 是阻尼因子，给定值为 $d = 0.85$。\n-   $J$ 是一个 $n \\times n$ 的矩阵，其中每个元素都为1。\n-   $S$ 是调整后的超链接矩阵。它由超链接矩阵 $H$ 构建。对于超链接矩阵 $H$，如果论文 $j$ 引用了论文 $i$，则其元素 $H_{ij}$ 为 $1/L_j$，否则为 $0$，其中 $L_j$ 是论文 $j$ 引用的论文总数。为了从 $H$ 生成最终的矩阵 $S$，如果任何论文 $j$ 没有进行任何引用（即其在 $H$ 中对应的列全为零），则该列将被替换为一个所有元素均为 $1/n$ 的列。\n\n假设初始状态表示均匀重要性，即每篇论文的初始重要性得分相等。计算一次迭代后的重要性向量 $\\mathbf{x}_1$。\n\n将您的答案表示为一个行矩阵，其中包含 $\\mathbf{x}_1$ 的两个分量，以精确分数形式表示。", "solution": "将论文标记为节点1 (P1) 和 2 (P2)。超链接矩阵 $H$ 的元素 $H_{ij}$ 在论文 $j$ 引用论文 $i$ 时为 $1/L_{j}$，否则为 $0$，其中 $L_{j}$ 是论文 $j$ 做出的引用数量。由于P1引用了P2，我们有 $L_{1}=1$ 且 $H_{21}=1$, $H_{11}=0$。由于P2没有引用任何论文，所以 $L_{2}=0$ 且 $H$ 的第2列全为零：\n$$\nH=\\begin{pmatrix} 0 & 0 \\\\ 1 & 0 \\end{pmatrix}\n$$\n为了构成 $S$，将任何全零列替换为均匀列 $(1/n)\\mathbf{1}$，其中 $n=2$。因此，第2列被替换为 $\\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{2} \\end{pmatrix}$，得到\n$$\nS=\\begin{pmatrix} 0 & \\frac{1}{2} \\\\ 1 & \\frac{1}{2} \\end{pmatrix}\n$$\n当阻尼因子 $d=0.85=\\frac{17}{20}$ 且 $J$ 是全一矩阵时，谷歌矩阵为\n$$\nG=dS+\\frac{1-d}{n}J=\\frac{17}{20}\\begin{pmatrix} 0 & \\frac{1}{2} \\\\ 1 & \\frac{1}{2} \\end{pmatrix}+\\frac{3}{40}\\begin{pmatrix} 1 & 1 \\\\ 1 & 1 \\end{pmatrix}\n=\\begin{pmatrix} \\frac{3}{40} & \\frac{1}{2} \\\\ \\frac{37}{40} & \\frac{1}{2} \\end{pmatrix}\n$$\n初始的均匀重要性向量是\n$$\n\\mathbf{x}_{0}=\\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{2} \\end{pmatrix}\n$$\n应用一次迭代，\n$$\n\\mathbf{x}_{1}=G\\mathbf{x}_{0}=\\begin{pmatrix} \\frac{3}{40} & \\frac{1}{2} \\\\ \\frac{37}{40} & \\frac{1}{2} \\end{pmatrix}\\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{2} \\end{pmatrix}\n=\\begin{pmatrix} \\frac{3}{80}+\\frac{1}{4} \\\\ \\frac{37}{80}+\\frac{1}{4} \\end{pmatrix}\n=\\begin{pmatrix} \\frac{23}{80} \\\\ \\frac{57}{80} \\end{pmatrix}\n$$\n因此，表示为精确分数的行矩阵，其分量为 $\\frac{23}{80}$ 和 $\\frac{57}{80}$。", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{23}{80} & \\frac{57}{80} \\end{pmatrix}}$$", "id": "1381670"}, {"introduction": "在理解了单步迭代后，我们自然会关注这个过程的最终结果。网页的长期稳定重要性由PageRank向量$\\mathbf{r}$描述，它代表了系统的“稳态”。本练习将探索这个稳态的数学本质：PageRank向量是谷歌矩阵$G$对应于特征值$1$的特征向量，满足方程$G\\mathbf{r} = \\mathbf{r}$。你将为一个小型网络计算这个核心的特征向量，这是应用PageRank算法的关键技能。[@problem_id:1381632]", "problem": "考虑一个由两个网页（网页A和网页B）组成的简化互联网模型。这些网页之间的链接结构如下：\n- 网页A有2个出站链接：一个指向网页A自身，一个指向网页B。\n- 网页B有3个出站链接：一个指向网页A，两个指向网页B自身。\n\nPageRank算法模拟了用户的行为。一个在给定页面上的用户，要么会跟随该页面上的一个随机链接，要么会“瞬移”到整个网络中的一个随机页面。这个过程可以用一个转移矩阵来描述，我们称之为“Google矩阵”$G$。\n\n$G$的构建遵循一个特定规则：$G = pS + (1-p)K$。\n这里，$p$是“阻尼因子”，表示用户跟随一个出站链接的概率。我们已知$p = 17/20$。矩阵$S$是“链接矩阵”，其中元素$S_{ij}$是从页面$j$仅通过链接转移到页面$i$的概率。如果页面$j$有$k$个出站链接，那么跟随从$j$到$i$的任意特定链接的概率是$1/k$（如果不存在这样的链接，则概率为0）。\n矩阵$K$是“瞬移矩阵”，对于一个有$N$个页面的网络，其每个元素都是$1/N$。它模拟了用户以相等的概率随机跳转到网络中任意页面的情况。这种情况发生的概率是$(1-p)$。\n\n用户长期停留在某个特定页面的概率由“PageRank向量”$\\mathbf{r} = \\begin{pmatrix} r_A \\\\ r_B \\end{pmatrix}$给出，其中$r_A$和$r_B$分别是用户停留在网页A和网页B的概率。这个向量代表了系统的稳态，意味着它在过程的一步之后不会改变，即$G\\mathbf{r} = \\mathbf{r}$。PageRank向量的各分量之和必须为1，因为它们代表一个概率分布（$r_A + r_B = 1$）。\n\n确定这个双页面网络的PageRank向量$\\mathbf{r}$。将你的答案表示为一个列向量，其元素为精确的分数。", "solution": "设页面顺序为$(A,B)$。链接矩阵$S$的元素$S_{ij}$等于从页面$j$通过链接转移到页面$i$的概率。因为网页A有两个出站链接（一个到A，一个到B），网页B有三个出站链接（一个到A，两个到B），我们有\n$$\nS=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{1}{3} \\\\\n\\frac{1}{2} & \\frac{2}{3}\n\\end{pmatrix}\n$$\n对于$N=2$个页面，瞬移矩阵是\n$$\nK=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{1}{2} \\\\\n\\frac{1}{2} & \\frac{1}{2}\n\\end{pmatrix}\n$$\n当阻尼因子$p=\\frac{17}{20}$时，Google矩阵是\n$$\nG=pS+(1-p)K=\\frac{17}{20}S+\\frac{3}{20}K.\n$$\n计算每个元素：\n$$\nG_{11}=\\frac{17}{20}\\cdot\\frac{1}{2}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{1}{2},\\quad\nG_{12}=\\frac{17}{20}\\cdot\\frac{1}{3}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{17}{60}+\\frac{3}{40}=\\frac{43}{120},\n$$\n$$\nG_{21}=\\frac{17}{20}\\cdot\\frac{1}{2}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{1}{2},\\quad\nG_{22}=\\frac{17}{20}\\cdot\\frac{2}{3}+\\frac{3}{20}\\cdot\\frac{1}{2}=\\frac{34}{60}+\\frac{3}{40}=\\frac{77}{120}.\n$$\n因此\n$$\nG=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{43}{120} \\\\\n\\frac{1}{2} & \\frac{77}{120}\n\\end{pmatrix}\n$$\n设$\\mathbf{r}=\\begin{pmatrix} r_{A} \\\\ r_{B} \\end{pmatrix}$为PageRank向量，满足$G\\mathbf{r}=\\mathbf{r}$和$r_{A}+r_{B}=1$。根据$G\\mathbf{r}=\\mathbf{r}$的第一个分量，\n$$\nr_{A}=\\frac{1}{2}r_{A}+\\frac{43}{120}r_{B},\n$$\n所以\n$$\nr_{A}-\\frac{1}{2}r_{A}=\\frac{43}{120}r_{B}\\quad\\Rightarrow\\quad \\frac{1}{2}r_{A}=\\frac{43}{120}r_{B}\\quad\\Rightarrow\\quad r_{A}=\\frac{43}{60}r_{B}.\n$$\n使用$r_{A}+r_{B}=1$，\n$$\n\\frac{43}{60}r_{B}+r_{B}=1\\quad\\Rightarrow\\quad \\frac{103}{60}r_{B}=1\\quad\\Rightarrow\\quad r_{B}=\\frac{60}{103},\n$$\n因此\n$$\nr_{A}=\\frac{43}{103}.\n$$\n所以，PageRank向量是\n$$\n\\begin{pmatrix}\n\\frac{43}{103} \\\\\n\\frac{60}{103}\n\\end{pmatrix}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix}\\frac{43}{103} \\\\ \\frac{60}{103}\\end{pmatrix}}$$", "id": "1381632"}, {"introduction": "除了纯粹的计算，建立关于不同网络结构如何影响PageRank分数的直觉也至关重要。本练习将探讨一个常见且富有启发性的场景：一个页面（广告商页面A）只发出链接而不接收任何链接。通过分析这个特殊案例，我们可以更深入地理解“随机跳转”项（即阻尼因子$d$）是如何确保每个页面都能获得一个基础排名，从而防止排名因“链接陷阱”而失效的基本原理。[@problem_id:1381625]", "problem": "考虑一个由三个页面组成的简化小型网络模型：一个广告商页面（页面A）、一个热门博客（页面B）和一个社区论坛（页面C）。其链接结构如下：\n- 广告商页面（A）链接到博客（B）和社区论坛（C）。\n- 博客（B）和社区论坛（C）互相链接。\n- 广告商页面（A）没有来自其他两个页面的入站链接。\n\n每个页面的重要性由其 PageRank 分数来衡量。PageRank 分数是排名向量 $R = [R_A, R_B, R_C]^T$ 的分量，该向量是谷歌矩阵 $G$ 对应于特征值 1 的唯一特征向量。$R$ 的分量是非负的，并且总和为 1。\n\n谷歌矩阵 $G$ 定义为：\n$$G = dS + \\frac{1-d}{n}J$$\n其中：\n- $n$ 是网络中页面的总数。\n- $d$ 是阻尼因子，给定值为 $d=0.85$。\n- $J$ 是一个 $n \\times n$ 的矩阵，其所有元素都为 1。\n- $S$ 是列随机链接矩阵。如果页面 $j$ 链接到页面 $i$，则条目 $S_{ij}$（在第 $i$ 行，第 $j$ 列）为 $1/L_j$，否则为 0。$L_j$ 是页面 $j$ 的出站链接数。假设该网络中没有“悬挂节点”（没有出站链接的页面）。\n\n计算博客（页面B）的 PageRank 分数与广告商页面（页面A）的 PageRank 分数的比率。将您的答案表示为一个实数。", "solution": "设页面按 A、B、C 的顺序排列，并令 $R = \\begin{pmatrix}x\\\\y\\\\z\\end{pmatrix} = \\begin{pmatrix}R_{A}\\\\R_{B}\\\\R_{C}\\end{pmatrix}$。链接结构意味着列随机矩阵 $S$ 的列由出站链接决定：\n- 从 A 链接到 B 和 C，所以 $L_{A}=2$，A 列为 $\\begin{pmatrix}0\\\\ \\frac{1}{2}\\\\ \\frac{1}{2}\\end{pmatrix}$。\n- 从 B 链接到 C，所以 $L_{B}=1$，B 列为 $\\begin{pmatrix}0\\\\ 0\\\\ 1\\end{pmatrix}$。\n- 从 C 链接到 B，所以 $L_{C}=1$，C 列为 $\\begin{pmatrix}0\\\\ 1\\\\ 0\\end{pmatrix}$。\n\n因此\n$$\nS=\\begin{pmatrix}\n0 & 0 & 0 \\\\\n\\frac{1}{2} & 0 & 1 \\\\\n\\frac{1}{2} & 1 & 0\n\\end{pmatrix}\n$$\n当 $n=3$，阻尼因子为 $d$，$J$ 为全1矩阵时，谷歌矩阵为 $G = dS + \\frac{1-d}{3}J$。PageRank 向量满足 $R = GR$，且 $x+y+z=1$。由于 $JR = (x+y+z)\\,\\mathbf{1} = \\mathbf{1}$，其中 $\\mathbf{1}=\\begin{pmatrix}1\\\\1\\\\1\\end{pmatrix}$，该特征方程变为\n$$\nR = dSR + \\frac{1-d}{3}\\mathbf{1}.\n$$\n使用 $S$ 的行，按分量写出此方程可得\n$$\nx = d\\cdot 0 + \\frac{1-d}{3} = \\frac{1-d}{3},\n$$\n$$\ny = d\\left(\\frac{1}{2}x + z\\right) + \\frac{1-d}{3},\n$$\n$$\nz = d\\left(\\frac{1}{2}x + y\\right) + \\frac{1-d}{3}.\n$$\n定义 $t=\\frac{1-d}{3}$。那么 $x=t$，后两个方程变为\n$$\ny = d\\left(\\frac{1}{2}t + z\\right) + t, \\qquad z = d\\left(\\frac{1}{2}t + y\\right) + t.\n$$\n改写为，\n$$\ny - dz = t\\left(1 + \\frac{d}{2}\\right), \\qquad z - dy = t\\left(1 + \\frac{d}{2}\\right).\n$$\n令 $c = t\\left(1 + \\frac{d}{2}\\right)$。则\n$$\ny - dz = c, \\qquad z - dy = c.\n$$\n由第一个方程得 $y = c + dz$。代入第二个方程可得\n$$\nz - d(c + dz) = c \\;\\Rightarrow\\; z(1 - d^{2}) = c(1 + d) \\;\\Rightarrow\\; z = \\frac{c}{1-d}.\n$$\n那么 $y = c + d\\frac{c}{1-d} = \\frac{c}{1-d}$。因此 $y=z$。使用 $t=\\frac{1-d}{3}$，我们有\n$$\nc = t\\left(1 + \\frac{d}{2}\\right) = \\frac{1-d}{3}\\cdot \\frac{2 + d}{2} = \\frac{(1-d)(2+d)}{6},\n$$\n所以\n$$\ny = z = \\frac{c}{1-d} = \\frac{2 + d}{6}, \\qquad x = \\frac{1-d}{3}.\n$$\n因此，所求的比率为\n$$\n\\frac{R_{B}}{R_{A}} = \\frac{y}{x} = \\frac{\\frac{2 + d}{6}}{\\frac{1-d}{3}} = \\frac{2 + d}{2(1-d)}.\n$$\n代入 $d=0.85$ 可得\n$$\n\\frac{R_{B}}{R_{A}} = \\frac{2 + 0.85}{2(1 - 0.85)} = \\frac{2.85}{0.30} = 9.5.\n$$", "answer": "$$\\boxed{9.5}$$", "id": "1381625"}]}
{
    "hands_on_practices": [
        {
            "introduction": "This first exercise provides a foundational check on the core concepts of integrability. We begin with the most intuitive example of a rank-$2$ distribution on $\\mathbb{R}^3$, one that corresponds to planes parallel to the $xy$-plane. By explicitly computing the Lie bracket of the spanning vector fields, you will directly verify the involutivity condition of the Frobenius theorem and then characterize the integral manifolds, or 'leaves', that foliate the space. ",
            "id": "3740104",
            "problem": "Consider the smooth manifold $\\mathbb{R}^{3}$ with global coordinates $(x,y,z)$ and its tangent bundle $T\\mathbb{R}^{3}$. A smooth rank-$2$ distribution $\\mathcal{D} \\subset T\\mathbb{R}^{3}$ is given at each point $(x,y,z)$ as the span of the two coordinate vector fields $\\partial_{x}$ and $\\partial_{y}$. Use only the foundational facts and definitions of smooth distributions, Lie brackets of vector fields, and Frobenius's theorem (which states that a $C^{\\infty}$ distribution $\\mathcal{D}$ is integrable if and only if it is involutive, i.e., closed under the Lie bracket, equivalently if its annihilator defines a differential ideal).\n\nYour tasks are:\n- Starting from the definition of a distribution and the Lie bracket, verify that the distribution $\\mathcal{D}=\\operatorname{span}\\{\\partial_{x},\\partial_{y}\\}$ is involutive. Then, using Frobenius's theorem, conclude that $\\mathcal{D}$ is integrable.\n- Alternatively, starting from the definition of the annihilator of a distribution, exhibit a smooth $1$-form $\\alpha$ such that $\\ker(\\alpha)=\\mathcal{D}$ and verify directly that $\\alpha$ and its exterior derivative $d\\alpha$ satisfy the Frobenius condition, thereby concluding integrability from the differential ideal perspective.\n- Describe the maximal connected integral manifolds (leaves) through an arbitrary point $(x_{0},y_{0},z_{0})$ in two equivalent ways: (i) as the level sets of a smooth submersion $F:\\mathbb{R}^{3}\\to\\mathbb{R}$, and (ii) by giving an explicit parametrization as an immersed surface in $\\mathbb{R}^{3}$ whose tangent spaces coincide with $\\mathcal{D}$.\n- Provide, as your final answer, the explicit analytic expression for the submersion $F(x,y,z)$ whose level sets are precisely the leaves of the foliation integrating $\\mathcal{D}$.\n\nNo numerical rounding is required. Express the final answer as a single analytic expression for the function $F(x,y,z)$.",
            "solution": "The problem asks for an analysis of a given rank-$2$ distribution on $\\mathbb{R}^{3}$ from the perspective of integrability, culminating in the explicit description of its integral manifolds.\n\nThe smooth manifold is $M = \\mathbb{R}^{3}$ with global coordinates $(x,y,z)$. The distribution $\\mathcal{D}$ is a rank-$2$ subbundle of the tangent bundle $TM = T\\mathbb{R}^{3}$. At each point $p=(x,y,z) \\in \\mathbb{R}^{3}$, the fiber $\\mathcal{D}_{p}$ is defined as the linear span of the basis vectors of the tangent space $T_{p}\\mathbb{R}^{3}$ corresponding to the first two coordinates:\n$$\n\\mathcal{D}_{p} = \\operatorname{span}\\{\\partial_{x}|_{p}, \\partial_{y}|_{p}\\}\n$$\nWe can represent the distribution globally as being spanned by the vector fields $X_{1} = \\partial_{x}$ and $X_{2} = \\partial_{y}$.\n\nFirst, we verify that the distribution $\\mathcal{D}$ is involutive. A distribution is involutive if for any two vector fields $V, W$ belonging to the distribution (i.e., $V(p), W(p) \\in \\mathcal{D}_{p}$ for all $p$), their Lie bracket $[V,W]$ also belongs to the distribution. Since $\\mathcal{D}$ is spanned by $X_{1} = \\partial_{x}$ and $X_{2} = \\partial_{y}$, it is sufficient to check if the Lie bracket $[X_{1}, X_{2}]$ is in $\\mathcal{D}$.\n\nThe Lie bracket of two vector fields $V = \\sum_{i} V^{i} \\partial_{i}$ and $W = \\sum_{j} W^{j} \\partial_{j}$ is given by the formula:\n$$\n[V,W] = \\sum_{k} \\left( \\sum_{i} V^{i} \\frac{\\partial W^{k}}{\\partial x^{i}} - W^{i} \\frac{\\partial V^{k}}{\\partial x^{i}} \\right) \\partial_{k}\n$$\nIn our case, $X_{1} = \\partial_{x}$ has components $(X_{1}^{x}, X_{1}^{y}, X_{1}^{z}) = (1,0,0)$ and $X_{2} = \\partial_{y}$ has components $(X_{2}^{x}, X_{2}^{y}, X_{2}^{z}) = (0,1,0)$. All these component functions are constants. Therefore, all their partial derivatives are zero.\n$$\n\\frac{\\partial X_{1}^{k}}{\\partial x^{i}} = 0 \\quad \\text{and} \\quad \\frac{\\partial X_{2}^{k}}{\\partial x^{i}} = 0 \\quad \\text{for all } i,k \\in \\{x,y,z\\}.\n$$\nThe Lie bracket is thus:\n$$\n[\\partial_{x}, \\partial_{y}] = \\sum_{k} \\left( \\sum_{i} \\delta_{ix} \\frac{\\partial \\delta_{ky}}{\\partial x^{i}} - \\delta_{iy} \\frac{\\partial \\delta_{kx}}{\\partial x^{i}} \\right) \\partial_{k} = \\sum_{k} (0 - 0) \\partial_{k} = 0\n$$\nThe result is the zero vector field. The zero vector field belongs to every vector subspace, so $0 \\in \\mathcal{D}_{p}$ for all $p$. Thus, the distribution $\\mathcal{D}$ is involutive.\nAccording to Frobenius's theorem, a smooth distribution is integrable if and only if it is involutive. Since $\\mathcal{D}$ is involutive, it is integrable.\n\nAlternatively, we can use the language of differential forms and annihilators. The annihilator of $\\mathcal{D}$, denoted $\\mathcal{D}^{0}$, is the set of $1$-forms $\\alpha$ on $\\mathbb{R}^{3}$ such that $\\alpha(V) = 0$ for all vector fields $V \\in \\mathcal{D}$. A general $1$-form on $\\mathbb{R}^{3}$ can be written as $\\alpha = a(x,y,z)dx + b(x,y,z)dy + c(x,y,z)dz$.\nThe condition $\\alpha(V)=0$ for all $V \\in \\mathcal{D}$ is equivalent to $\\alpha(X_{1})=0$ and $\\alpha(X_{2})=0$.\n$$\n\\alpha(\\partial_{x}) = (a dx + b dy + c dz)(\\partial_{x}) = a(x,y,z) = 0\n$$\n$$\n\\alpha(\\partial_{y}) = (a dx + b dy + c dz)(\\partial_{y}) = b(x,y,z) = 0\n$$\nSo, any $1$-form in $\\mathcal{D}^{0}$ must be of the form $\\alpha = c(x,y,z)dz$. The module of annihilating $1$-forms is generated by the single $1$-form $dz$.\nSince $\\mathcal{D}$ has codimension $3 - 2 = 1$, we can describe it as the kernel of a single non-vanishing $1$-form. We can choose the simplest generator, $\\alpha = dz$.\nLet's check that $\\ker(\\alpha) = \\mathcal{D}$. The kernel of $\\alpha$ consists of all tangent vectors $V = V^{x}\\partial_{x} + V^{y}\\partial_{y} + V^{z}\\partial_{z}$ such that $\\alpha(V)=0$.\n$$\n\\alpha(V) = dz(V^{x}\\partial_{x} + V^{y}\\partial_{y} + V^{z}\\partial_{z}) = V^{z}\n$$\nSo, $\\alpha(V)=0$ implies $V^{z}=0$. The vectors with a zero $z$-component are precisely the linear combinations of $\\partial_{x}$ and $\\partial_{y}$. Thus, $\\ker(\\alpha) = \\operatorname{span}\\{\\partial_{x}, \\partial_{y}\\} = \\mathcal{D}$.\n\nThe Frobenius integrability condition stated in terms of differential forms is that the ideal generated by the annihilating forms is a differential ideal. For a codimension-$1$ distribution defined by $\\ker(\\alpha)$, this condition simplifies to $\\alpha \\wedge d\\alpha = 0$.\nLet's compute the exterior derivative of $\\alpha = dz$:\n$$\nd\\alpha = d(dz) = d(0 dx + 0 dy + 1 dz) = 0\n$$\nThe exterior derivative $d\\alpha$ is the zero $2$-form. Therefore, the condition is satisfied trivially:\n$$\n\\alpha \\wedge d\\alpha = dz \\wedge 0 = 0\n$$\nThis confirms that $\\mathcal{D}$ is integrable. The condition $d\\alpha=0$ is a stronger condition known as being completely integrable, which implies the existence of a function $F$ such that $\\alpha$ is proportional to $dF$. In our case, $\\alpha=dz=d(z)$, so we can take $F=z$.\n\nNow we describe the integral manifolds (leaves) of the foliation integrating $\\mathcal{D}$. An integral manifold $S$ is an immersed submanifold of $\\mathbb{R}^{3}$ such that for every point $p \\in S$, the tangent space $T_{p}S$ is equal to $\\mathcal{D}_{p}$.\nThis means that for any $p \\in S$, $T_{p}S = \\operatorname{span}\\{\\partial_{x}|_{p}, \\partial_{y}|_{p}\\}$. Any tangent vector to the surface must be a linear combination of $\\partial_{x}$ and $\\partial_{y}$, and thus has no component in the $\\partial_{z}$ direction. This implies that the surface must be locally \"flat\" with respect to the $z$-axis. More formally, for any smooth curve $\\gamma(t) = (x(t),y(t),z(t))$ lying in an integral manifold, its tangent vector $\\dot{\\gamma}(t) = \\dot{x}(t)\\partial_{x} + \\dot{y}(t)\\partial_{y} + \\dot{z}(t)\\partial_{z}$ must belong to $\\mathcal{D}_{\\gamma(t)}$. This requires $\\dot{z}(t)=0$ for all $t$. This implies that $z(t)$ is constant along any such curve. Since any two points in a connected manifold can be joined by a smooth curve, the $z$-coordinate must be constant over the entire connected integral manifold.\nThe maximal connected integral manifolds, or leaves, are therefore the planes of constant $z$.\n\nWe describe these leaves in two ways as requested:\n(i) As the level sets of a smooth submersion $F:\\mathbb{R}^{3}\\to\\mathbb{R}$.\nThe leaves are the sets $\\{(x,y,z) \\in \\mathbb{R}^{3} \\mid z = c\\}$ for constants $c \\in \\mathbb{R}$. We can define a function $F(x,y,z) = z$. The level sets of this function are $F^{-1}(c) = \\{(x,y,z) \\in \\mathbb{R}^{3} \\mid z=c\\}$, which are precisely the leaves of the foliation.\nTo be a submersion, the differential $dF$ must be surjective at every point. The differential is a $1$-form:\n$$\ndF = \\frac{\\partial F}{\\partial x}dx + \\frac{\\partial F}{\\partial y}dy + \\frac{\\partial F}{\\partial z}dz = 0 \\cdot dx + 0 \\cdot dy + 1 \\cdot dz = dz\n$$\nSince $dF=dz$ is non-zero at every point in $\\mathbb{R}^{3}$, its rank as a linear map from the tangent space to $\\mathbb{R}$ is always $1$, which is the dimension of the target space $\\mathbb{R}$. Thus, $F$ is a submersion. The tangent space to a level set of $F$ is precisely the kernel of $dF$. Here, $\\ker(dF) = \\ker(dz) = \\mathcal{D}$, as required. The leaf passing through an arbitrary point $(x_{0}, y_{0}, z_{0})$ is the level set $F(x,y,z) = F(x_{0}, y_{0}, z_{0}) = z_{0}$, i.e., the plane $z=z_{0}$.\n\n(ii) By giving an explicit parametrization as an immersed surface.\nThe leaf through an arbitrary point $(x_{0}, y_{0}, z_{0})$ is the plane $z=z_{0}$. We can parametrize this plane using parameters $(u,v) \\in \\mathbb{R}^{2}$. An explicit parametrization $\\Phi: \\mathbb{R}^{2} \\to \\mathbb{R}^{3}$ is given by:\n$$\n\\Phi(u,v) = (u,v,z_{0})\n$$\nThe tangent space to this surface at a point $\\Phi(u,v)$ is spanned by the vectors $\\frac{\\partial\\Phi}{\\partial u}$ and $\\frac{\\partial\\Phi}{\\partial v}$.\n$$\n\\frac{\\partial\\Phi}{\\partial u} = (1,0,0), \\text{ which corresponds to the vector field } \\partial_{x}.\n$$\n$$\n\\frac{\\partial\\Phi}{\\partial v} = (0,1,0), \\text{ which corresponds to the vector field } \\partial_{y}.\n$$\nThe tangent space to the parametrized surface at any point is $\\operatorname{span}\\{\\partial_{x}, \\partial_{y}\\} = \\mathcal{D}$. This confirms that this parametrization describes the integral manifold.\n\nFinally, the problem asks for the explicit analytic expression for the submersion $F(x,y,z)$ whose level sets are the leaves of the foliation. As derived above, the simplest such function is $F(x,y,z)=z$.",
            "answer": "$$\n\\boxed{z}\n$$"
        },
        {
            "introduction": "Having seen an integrable system, we now turn to a non-integrable one. This practice introduces the essential diagnostic tool for analyzing such systems: the growth vector. You will compute a Lie bracket that generates a vector field outside the original distribution, thereby witnessing the failure of involutivity and quantifying this failure by constructing the first stages of the derived flag. ",
            "id": "3740108",
            "problem": "Let $M=\\mathbb{R}^{3}$ with global coordinates $(x,y,z)$ and consider the smooth rank-$2$ distribution $D\\subset TM$ spanned by the vector fields $X_{1}=\\partial_{x}+y\\,\\partial_{z}$ and $X_{2}=\\partial_{y}$. Using only the standard definitions of distributions, Lie brackets of vector fields, and Frobeniusâ€™s theorem on involutivity and integrability, do the following:\n\n- State a precise definition of the growth vector of a smooth distribution $D$ at a point $p\\in M$, by constructing the derived flag $D^{1}\\subset D^{2}\\subset\\cdots$ via Lie brackets and recording the sequence of dimensions until stabilization.\n\n- Compute the growth vector of $D=\\operatorname{span}\\{X_{1},X_{2}\\}$ at an arbitrary point $p\\in\\mathbb{R}^{3}$.\n\nExpress your final answer as a single row matrix listing the successive dimensions in the growth vector. No rounding is required. Do not include units.",
            "solution": "The problem asks for two things: first, a precise definition of the growth vector of a smooth distribution, and second, the computation of this vector for a specific distribution on $\\mathbb{R}^{3}$.\n\nFirst, let's define the growth vector. Let $M$ be a smooth manifold and let $D \\subset TM$ be a smooth rank-$k$ distribution on $M$. Let $\\Gamma(D)$ denote the set of all smooth vector fields on $M$ whose values lie in $D$. The derived flag of $D$ is a sequence of nested distributions $D^1 \\subseteq D^2 \\subseteq D^3 \\subseteq \\dots$ constructed as follows:\n1.  Define the first distribution in the sequence as $D^1 = D$.\n2.  For $j \\ge 1$, define the $(j+1)$-th distribution, $D^{j+1}$, as the span of $D^j$ and all Lie brackets of vector fields from $D^j$ with vector fields from $D^1$. More precisely, at each point $p \\in M$, the fiber $D_p^{j+1}$ is given by\n    $$D_p^{j+1} = D_p^j + \\operatorname{span}\\{ [X, Y](p) \\mid X \\in \\Gamma(D^j), Y \\in \\Gamma(D^1) \\}$$\nThis construction generates a sequence of distributions, the derived flag, $D^1 \\subseteq D^2 \\subseteq \\dots \\subseteq TM$. Since each $D_p^j$ is a subspace of the finite-dimensional tangent space $T_pM$, the sequence of their dimensions, $\\dim(D_p^j)$, must eventually stabilize. That is, there exists a smallest integer $m$ such that $D^m = D^{m+1}$. The growth vector of the distribution $D$ at the point $p$ is the finite sequence of these dimensions up to stabilization:\n$$ (\\dim(D_p^1), \\dim(D_p^2), \\dots, \\dim(D_p^m)) $$\nFrobenius's integrability theorem states that a distribution $D$ is integrable if and only if it is involutive, which means that for any two vector fields $X, Y \\in \\Gamma(D)$, their Lie bracket $[X, Y]$ is also in $\\Gamma(D)$. This is equivalent to the condition $D^2 = D^1$, which in terms of the growth vector means the sequence stabilizes immediately.\n\nNow, we compute the growth vector for the given distribution on $M=\\mathbb{R}^{3}$ with coordinates $(x,y,z)$. The distribution is $D = \\operatorname{span}\\{X_1, X_2\\}$, where $X_1 = \\partial_x + y\\,\\partial_z$ and $X_2 = \\partial_y$.\n\nThe first element of the growth vector is $\\dim(D_p^1)$. We have $D^1 = D$. The spanning vector fields are $X_1$ and $X_2$. In the basis $\\{\\partial_x, \\partial_y, \\partial_z\\}$, they can be represented as vectors $(1,0,y)$ and $(0,1,0)$, respectively. These two vectors are linearly independent for all points $p=(x,y,z) \\in \\mathbb{R}^3$. Thus, the rank of the distribution is $2$ everywhere.\n$$ \\dim(D_p^1) = 2 \\quad \\forall p \\in \\mathbb{R}^3 $$\n\nNext, we determine $D^2$. $D^2$ is spanned by the vector fields in $D^1$ and their Lie brackets. We only need to compute the Lie bracket of the spanning vector fields, $[X_1, X_2]$. Let $f$ be an arbitrary smooth function on $\\mathbb{R}^3$.\n$$ [X_1, X_2](f) = X_1(X_2(f)) - X_2(X_1(f)) $$\nWe compute each term:\n$X_2(f) = \\partial_y f$\n$X_1(X_2(f)) = (\\partial_x + y\\,\\partial_z)(\\partial_y f) = \\frac{\\partial^2 f}{\\partial x \\partial y} + y \\frac{\\partial^2 f}{\\partial z \\partial y}$\n$X_1(f) = (\\partial_x + y\\,\\partial_z)f = \\frac{\\partial f}{\\partial x} + y \\frac{\\partial f}{\\partial z}$\n$X_2(X_1(f)) = \\partial_y \\left( \\frac{\\partial f}{\\partial x} + y \\frac{\\partial f}{\\partial z} \\right) = \\frac{\\partial^2 f}{\\partial y \\partial x} + \\frac{\\partial y}{\\partial y}\\frac{\\partial f}{\\partial z} + y \\frac{\\partial^2 f}{\\partial y \\partial z} = \\frac{\\partial^2 f}{\\partial x \\partial y} + \\frac{\\partial f}{\\partial z} + y \\frac{\\partial^2 f}{\\partial z \\partial y}$\nHere we have used the equality of mixed partial derivatives.\nSubtracting the two results:\n$$ [X_1, X_2](f) = \\left(\\frac{\\partial^2 f}{\\partial x \\partial y} + y \\frac{\\partial^2 f}{\\partial z \\partial y}\\right) - \\left(\\frac{\\partial^2 f}{\\partial x \\partial y} + \\frac{\\partial f}{\\partial z} + y \\frac{\\partial^2 f}{\\partial z \\partial y}\\right) = -\\frac{\\partial f}{\\partial z} $$\nThis shows that the Lie bracket vector field is $[X_1, X_2] = -\\partial_z$.\n\nThe distribution $D^2$ is spanned by $\\{X_1, X_2, [X_1, X_2]\\}$. At any point $p=(x,y,z)$, the fiber $D_p^2$ is spanned by the vectors:\n$X_1(p) \\equiv (1, 0, y)$\n$X_2(p) \\equiv (0, 1, 0)$\n$[X_1, X_2](p) \\equiv (0, 0, -1)$\nTo find the dimension of $D_p^2$, we check the linear independence of these three vectors. We can form a matrix with these vectors as rows and compute its determinant:\n$$ \\det \\begin{pmatrix} 1 & 0 & y \\\\ 0 & 1 & 0 \\\\ 0 & 0 & -1 \\end{pmatrix} = (1)(1)(-1) - 0 = -1 $$\nSince the determinant is non-zero for all $(x,y,z)$, the three vectors are linearly independent at every point $p \\in \\mathbb{R}^3$.\nTherefore, the dimension of $D_p^2$ is $3$.\n$$ \\dim(D_p^2) = 3 \\quad \\forall p \\in \\mathbb{R}^3 $$\nThe dimension of the ambient tangent space $T_p\\mathbb{R}^3$ is $3$. Since $D_p^2$ is a $3$-dimensional subspace of $T_p\\mathbb{R}^3$, it must be that $D_p^2 = T_p\\mathbb{R}^3$.\n\nFinally, we consider $D^3$. By definition, $D^2 \\subseteq D^3$. Since $D^2$ is already the entire tangent bundle $TM$, we must have $D^3 = TM$. This implies that $\\dim(D_p^3) = 3$ for all $p$.\nThe sequence of dimensions is therefore $(2, 3, 3, \\dots)$. The sequence stabilizes at the second term, since $\\dim(D^2) = \\dim(D^3) = 3$. The growth vector is the sequence of dimensions until stabilization, which is $(2, 3)$. The distribution is not integrable because the dimension grew, i.e., $D^1 \\neq D^2$.\n\nThe growth vector at any point $p \\in \\mathbb{R}^3$ is $(2, 3)$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n2 & 3\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "We conclude with a canonical example of a non-integrable system, the Engel distribution in $\\mathbb{R}^4$. This exercise requires iterating the Lie bracket procedure to construct the full derived flag, revealing a distribution whose 'growth' fills the entire tangent space in a stepwise manner. Mastering this example provides insight into the rich structure of nonholonomic systems, where restricted initial directions can generate motion throughout the ambient space. ",
            "id": "3740185",
            "problem": "Let $M=\\mathbb{R}^{4}$ with global coordinates $(x,y,z,w)$ and tangent bundle $T M$. A smooth rank-$k$ distribution $D \\subset T M$ is a smooth choice of a $k$-dimensional subspace $D(p) \\subset T_{p}M$ at each point $p \\in M$. The Lie bracket $[X,Y]$ of smooth vector fields $X$ and $Y$ on $M$ is defined by $[X,Y](f)=X(Y(f)) - Y(X(f))$ for every smooth function $f$ on $M$. The derived flag of a distribution $D$ is defined inductively by $D^{1}=D$ and $D^{j+1}=D^{j} + [D^{j},D]$, where $[D^{j},D]$ denotes the distribution generated by all Lie brackets $[X,Y]$ with $X$ a section of $D^{j}$ and $Y$ a section of $D$. A distribution is involutive if $[D,D] \\subset D$, and by Frobenius's theorem, involutivity is equivalent to integrability (existence of maximal immersed submanifolds whose tangent spaces equal $D$ pointwise).\n\nDefine the Engel distribution $D \\subset T\\mathbb{R}^{4}$ to be the common kernel of the two one-forms $\\alpha = dz - y\\,dx$ and $\\beta = dw - z\\,dx$, so that $D=\\ker \\alpha \\cap \\ker \\beta$. Equivalently, $D$ is spanned by the two smooth vector fields $X_{1}=\\frac{\\partial}{\\partial x} + y\\,\\frac{\\partial}{\\partial z} + z\\,\\frac{\\partial}{\\partial w}$ and $X_{2}=\\frac{\\partial}{\\partial y}$. Starting from the definitions above, compute the derived flag $D^{1} \\subset D^{2} \\subset D^{3}$, determine its pointwise dimensions, and use Frobenius's theorem to conclude nonintegrability. Your final output should be the growth vector expressed as a single row matrix indicating the dimensions of $D^{1}$, $D^{2}$, and $D^{3}$ in order. Express the final answer as a row matrix and do not include any units. No rounding is required.",
            "solution": "The problem requires the computation of the derived flag and the determination of its pointwise dimensions for the Engel distribution $D$ on $M=\\mathbb{R}^{4}$. This will allow us to assess the integrability of the distribution using Frobenius's theorem.\n\nThe Engel distribution $D$ is given as the distribution on $\\mathbb{R}^4$ with coordinates $(x,y,z,w)$ spanned by the two vector fields:\n$$X_{1}=\\frac{\\partial}{\\partial x} + y\\,\\frac{\\partial}{\\partial z} + z\\,\\frac{\\partial}{\\partial w}$$\n$$X_{2}=\\frac{\\partial}{\\partial y}$$\nThe derived flag is defined by the sequence of distributions $D^1 \\subset D^2 \\subset D^3 \\subset \\dots$, where $D^1 = D$ and $D^{j+1} = D^j + [D^j, D]$. The space $[D^j, D]$ is the span of all Lie brackets $[X,Y]$ where $X$ is a section of $D^j$ and $Y$ is a section of $D$.\n\n**Step 1: Compute $D^1$ and its dimension.**\n$D^1$ is the distribution $D$ itself. It is spanned by the vector fields $X_1$ and $X_2$. To find the dimension of $D^1$ at any point $p=(x,y,z,w) \\in \\mathbb{R}^4$, we check the linear independence of $X_1(p)$ and $X_2(p)$. In the standard basis $\\{\\frac{\\partial}{\\partial x}, \\frac{\\partial}{\\partial y}, \\frac{\\partial}{\\partial z}, \\frac{\\partial}{\\partial w}\\}$, the coordinate representations of these vector fields are:\n$$X_1(p) = (1, 0, y, z)$$\n$$X_2(p) = (0, 1, 0, 0)$$\nThese two vectors are linearly independent for all values of $(x,y,z,w)$, as can be seen by forming a matrix whose rows are these vectors and observing that it has rank $2$.\n$$\n\\begin{pmatrix}\n1 & 0 & y & z \\\\\n0 & 1 & 0 & 0\n\\end{pmatrix}\n$$\nThus, the dimension of $D^1$ is constant across $\\mathbb{R}^4$:\n$$\\dim(D^1(p)) = 2 \\quad \\forall p \\in \\mathbb{R}^4$$\n\n**Step 2: Compute $D^2$ and its dimension.**\n$D^2$ is defined as $D^2 = D^1 + [D^1, D] = D + [D, D]$. To find a spanning set for $D^2$, we take the spanning set for $D$, which is $\\{X_1, X_2\\}$, and add the Lie brackets of these vector fields. The only non-trivial bracket to compute (up to skew-symmetry, since $[X,X]=0$ and $[Y,X]=-[X,Y]$) is $[X_1, X_2]$.\n\nThe Lie bracket of two vector fields $X = \\sum_i X^i \\frac{\\partial}{\\partial q^i}$ and $Y = \\sum_j Y^j \\frac{\\partial}{\\partial q^j}$ is given in coordinates by $[X,Y] = \\sum_k \\left( \\sum_i X^i \\frac{\\partial Y^k}{\\partial q^i} - Y^i \\frac{\\partial X^k}{\\partial q^i} \\right) \\frac{\\partial}{\\partial q^k}$.\nHere, $X_1$ has components $(X_1^x, X_1^y, X_1^z, X_1^w) = (1, 0, y, z)$ and $X_2$ has components $(X_2^x, X_2^y, X_2^z, X_2^w) = (0, 1, 0, 0)$.\nLet's compute the components of $[X_1, X_2]$:\n\\begin{itemize}\n    \\item $x$-component: $\\sum_i (X_1^i \\frac{\\partial X_2^x}{\\partial q^i} - X_2^i \\frac{\\partial X_1^x}{\\partial q^i}) = (1 \\cdot \\frac{\\partial 0}{\\partial x} + 0 \\cdot \\frac{\\partial 0}{\\partial y} + \\dots) - (0 \\cdot \\frac{\\partial 1}{\\partial x} + 1 \\cdot \\frac{\\partial 1}{\\partial y} + \\dots) = 0 - 0 = 0$.\n    \\item $y$-component: $\\sum_i (X_1^i \\frac{\\partial X_2^y}{\\partial q^i} - X_2^i \\frac{\\partial X_1^y}{\\partial q^i}) = (1 \\cdot \\frac{\\partial 1}{\\partial x} + \\dots) - (1 \\cdot \\frac{\\partial 0}{\\partial y} + \\dots) = 0 - 0 = 0$.\n    \\item $z$-component: $\\sum_i (X_1^i \\frac{\\partial X_2^z}{\\partial q^i} - X_2^i \\frac{\\partial X_1^z}{\\partial q^i}) = (1 \\cdot \\frac{\\partial 0}{\\partial x} + \\dots) - (1 \\cdot \\frac{\\partial y}{\\partial y}) = 0 - 1 = -1$.\n    \\item $w$-component: $\\sum_i (X_1^i \\frac{\\partial X_2^w}{\\partial q^i} - X_2^i \\frac{\\partial X_1^w}{\\partial q^i}) = (1 \\cdot \\frac{\\partial 0}{\\partial x} + \\dots) - (1 \\cdot \\frac{\\partial z}{\\partial y}) = 0 - 0 = 0$.\n\\end{itemize}\nSo, the Lie bracket is $[X_1, X_2] = -\\frac{\\partial}{\\partial z}$. Let's define $X_3 = [X_1, X_2] = -\\frac{\\partial}{\\partial z}$.\n\nThe distribution $D^2$ is spanned by $\\{X_1, X_2, X_3\\}$. The coordinate representations are:\n$$X_1(p) = (1, 0, y, z)$$\n$$X_2(p) = (0, 1, 0, 0)$$\n$$X_3(p) = (0, 0, -1, 0)$$\nThese three vectors are linearly independent at every point $p$. The matrix of their components is in row echelon form and has rank $3$:\n$$\n\\begin{pmatrix}\n1 & 0 & y & z \\\\\n0 & 1 & 0 & 0 \\\\\n0 & 0 & -1 & 0\n\\end{pmatrix}\n$$\nTherefore, the dimension of $D^2$ is constant:\n$$\\dim(D^2(p)) = 3 \\quad \\forall p \\in \\mathbb{R}^4$$\nSince $[X_1, X_2] = X_3$ is not in the span of $\\{X_1, X_2\\}$, we have $[D, D] \\not\\subset D$. This means the distribution $D$ is not involutive. By Frobenius's theorem, which states that a distribution is integrable if and only if it is involutive, we conclude that the Engel distribution $D$ is not integrable.\n\n**Step 3: Compute $D^3$ and its dimension.**\n$D^3$ is defined as $D^3 = D^2 + [D^2, D]$. A spanning set for $D^3$ is obtained by taking the spanning set for $D^2$, which is $\\{X_1, X_2, X_3\\}$, and adding the Lie brackets of these vector fields with the spanning set for $D$, which is $\\{X_1, X_2\\}$. We need to compute $[X_i, X_j]$ for $i \\in \\{1,2,3\\}$ and $j \\in \\{1,2\\}$. The brackets $[X_1, X_1]$, $[X_2, X_2]$ are zero, and we have already computed $[X_1, X_2] = X_3$. The new brackets to consider are $[X_3, X_1]$ and $[X_3, X_2]$.\n\nLet's compute $[X_3, X_1]$:\n$$[X_3, X_1] = \\left[-\\frac{\\partial}{\\partial z}, \\frac{\\partial}{\\partial x} + y\\,\\frac{\\partial}{\\partial z} + z\\,\\frac{\\partial}{\\partial w}\\right] = -\\left[\\frac{\\partial}{\\partial z}, \\frac{\\partial}{\\partial x}\\right] - \\left[\\frac{\\partial}{\\partial z}, y\\,\\frac{\\partial}{\\partial z}\\right] - \\left[\\frac{\\partial}{\\partial z}, z\\,\\frac{\\partial}{\\partial w}\\right]$$\n\\begin{itemize}\n    \\item Standard coordinate vector fields commute, so $[\\frac{\\partial}{\\partial z}, \\frac{\\partial}{\\partial x}] = 0$.\n    \\item For the second term, for any smooth function $f$, $[\\frac{\\partial}{\\partial z}, y\\,\\frac{\\partial}{\\partial z}](f) = \\frac{\\partial}{\\partial z}(y\\frac{\\partial f}{\\partial z}) - y\\frac{\\partial}{\\partial z}(\\frac{\\partial f}{\\partial z}) = y\\frac{\\partial^2 f}{\\partial z^2} - y\\frac{\\partial^2 f}{\\partial z^2} = 0$. So $[\\frac{\\partial}{\\partial z}, y\\,\\frac{\\partial}{\\partial z}] = 0$.\n    \\item For the third term, $[\\frac{\\partial}{\\partial z}, z\\,\\frac{\\partial}{\\partial w}](f) = \\frac{\\partial}{\\partial z}(z\\frac{\\partial f}{\\partial w}) - z\\frac{\\partial}{\\partial w}(\\frac{\\partial f}{\\partial z}) = \\left(\\frac{\\partial z}{\\partial z}\\right)\\frac{\\partial f}{\\partial w} + z\\frac{\\partial^2f}{\\partial z \\partial w} - z\\frac{\\partial^2f}{\\partial w \\partial z} = \\frac{\\partial f}{\\partial w}$. Thus, $[\\frac{\\partial}{\\partial z}, z\\,\\frac{\\partial}{\\partial w}] = \\frac{\\partial}{\\partial w}$.\n\\end{itemize}\nCombining these results, we get $[X_3, X_1] = -(0 + 0 + \\frac{\\partial}{\\partial w}) = -\\frac{\\partial}{\\partial w}$. Let's define $X_4 = [X_3, X_1] = -\\frac{\\partial}{\\partial w}$.\n\nNow, let's compute $[X_3, X_2]$:\n$$[X_3, X_2] = \\left[-\\frac{\\partial}{\\partial z}, \\frac{\\partial}{\\partial y}\\right] = - \\left[\\frac{\\partial}{\\partial z}, \\frac{\\partial}{\\partial y}\\right] = 0$$\nsince they are coordinate vector fields.\n\nThe distribution $D^3$ is spanned by $\\{X_1, X_2, X_3, X_4\\}$. The coordinate representations are:\n$$X_1(p) = (1, 0, y, z)$$\n$$X_2(p) = (0, 1, 0, 0)$$\n$$X_3(p) = (0, 0, -1, 0)$$\n$$X_4(p) = (0, 0, 0, -1)$$\nThe matrix of these vectors' components is upper triangular with a non-zero diagonal:\n$$\n\\begin{pmatrix}\n1 & 0 & y & z \\\\\n0 & 1 & 0 & 0 \\\\\n0 & 0 & -1 & 0 \\\\\n0 & 0 & 0 & -1\n\\end{pmatrix}\n$$\nThe determinant is $1 \\neq 0$, so the four vectors are linearly independent everywhere. This means they span the entire tangent space $T_p\\mathbb{R}^4$ at every point $p$.\nTherefore, the dimension of $D^3$ is constant:\n$$\\dim(D^3(p)) = 4 \\quad \\forall p \\in \\mathbb{R}^4$$\n\n**Conclusion**\nThe derived flag is $D^1 \\subset D^2 \\subset D^3 = T\\mathbb{R}^4$. The dimensions of these distributions are:\n\\begin{itemize}\n    \\item $\\dim(D^1) = 2$\n    \\item $\\dim(D^2) = 3$\n    \\item $\\dim(D^3) = 4$\n\\end{itemize}\nThe growth vector, which is the sequence of these dimensions, is $(2, 3, 4)$. The flag stabilizes at $D^3=T\\mathbb{R}^4$, since any further brackets will necessarily produce vector fields in $T\\mathbb{R}^4$, so $D^4=D^3+[D^3,D] \\subseteq D^3+T\\mathbb{R}^4=D^3$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n2 & 3 & 4\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
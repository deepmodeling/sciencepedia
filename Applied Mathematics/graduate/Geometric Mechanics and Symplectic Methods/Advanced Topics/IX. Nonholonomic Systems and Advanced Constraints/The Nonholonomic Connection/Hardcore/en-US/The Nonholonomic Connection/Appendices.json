{
    "hands_on_practices": [
        {
            "introduction": "The nonholonomic connection $\\nabla^{nh}$ is the central object governing constrained dynamics. This first practice provides a direct, hands-on calculation of its components, the nonholonomic Christoffel symbols, starting from the fundamental definition of projecting the ambient Levi-Civita connection. By working through the classic example of the Chaplygin sleigh, you will solidify your understanding of how the geometry of the configuration space and the constraint distribution combine to define the system's dynamics .",
            "id": "3780354",
            "problem": "Consider a planar rigid body (the “knife edge” or Chaplygin sleigh) whose configuration manifold is $Q=\\mathbb{R}^{2}\\times \\mathbb{S}^{1}$ with coordinates $q=(x,y,\\theta)$. The kinetic energy metric is\n$$\ng = m\\,dx^{2} + m\\,dy^{2} + I\\,d\\theta^{2},\n$$\nwhere $m$ and $I$ are positive constants representing mass and moment of inertia about the out-of-plane axis, respectively. The nonholonomic constraint that there is no slip transverse to the body’s longitudinal axis is given by a single linear velocity constraint\n$$\nA(q)\\,\\dot{q}=0,\\qquad A(q)=\\begin{bmatrix}-\\sin\\theta & \\cos\\theta & 0\\end{bmatrix},\n$$\nso that the allowed velocities satisfy $-\\sin\\theta\\,\\dot{x}+\\cos\\theta\\,\\dot{y}=0$. Let $D=\\ker A(q)\\subset TQ$ denote the constraint distribution.\n\nUsing only the fundamental definitions that the Levi–Civita connection $\\nabla$ of $g$ is the unique torsion-free, metric-compatible connection and that the nonholonomic connection $\\nabla^{nh}$ is obtained by $g$-orthogonally projecting $\\nabla$ onto $D$ on both slots (i.e., for vector fields $X,Y$ taking values in $D$, $\\nabla^{nh}_{X}Y = P\\big(\\nabla_{X}Y\\big)$, where $P:TQ\\to D$ is the $g$-orthogonal projector), explicitly construct $\\nabla^{nh}$ for this system.\n\nChoose the nonholonomic frame\n$$\ne_{1}(q)=\\cos\\theta\\,\\partial_{x}+\\sin\\theta\\,\\partial_{y},\\qquad e_{2}(q)=\\partial_{\\theta},\n$$\nwhich spans $D$. Define the nonholonomic Christoffel symbols $\\Gamma^{c}_{ab}(q)$ by\n$$\n\\nabla^{nh}_{e_{a}}e_{b}=\\Gamma^{c}_{ab}\\,e_{c},\\quad a,b,c\\in\\{1,2\\}.\n$$\nCompute the single component $\\Gamma^{1}_{22}(q)$ as an explicit expression in $q$. Your final answer must be a single closed-form analytic expression with no units.",
            "solution": "The user wants to compute the nonholonomic Christoffel symbol $\\Gamma^{1}_{22}(q)$ for a Chaplygin sleigh. The logical path to the solution is to follow the definitions provided in the problem statement.\n\nThe quantity to be computed, $\\Gamma^{1}_{22}$, is defined as the coefficient of $e_{1}$ in the expansion of $\\nabla^{nh}_{e_{2}}e_{2}$ in the basis $\\{e_{1}, e_{2}\\}$:\n$$\n\\nabla^{nh}_{e_{2}}e_{2} = \\Gamma^{1}_{22}\\,e_{1} + \\Gamma^{2}_{22}\\,e_{2}\n$$\nThe nonholonomic connection $\\nabla^{nh}$ is defined by the $g$-orthogonal projection of the Levi-Civita connection $\\nabla$ of the metric $g$ onto the constraint distribution $D$. For vector fields $X, Y$ that span $D$, the definition is:\n$$\n\\nabla^{nh}_{X}Y = P(\\nabla_{X}Y)\n$$\nwhere $P: TQ \\to D$ is the $g$-orthogonal projector.\n\nApplying this definition to the specific case $X=e_{2}$ and $Y=e_{2}$, we get:\n$$\n\\nabla^{nh}_{e_{2}}e_{2} = P(\\nabla_{e_{2}}e_{2})\n$$\nThe problem is thus reduced to two main steps:\n1. Compute the Levi-Civita covariant derivative $\\nabla_{e_{2}}e_{2}$.\n2. Project the resulting vector field onto the distribution $D$.\n\n**Step 1: Compute the Levi-Civita covariant derivative $\\nabla_{e_{2}}e_{2}$.**\n\nThe Levi-Civita connection $\\nabla$ is determined by the metric $g$. The metric is given in the coordinate basis $\\{\\partial_x, \\partial_y, \\partial_\\theta\\}$ as:\n$$\ng = m\\,dx^{2} + m\\,dy^{2} + I\\,d\\theta^{2}\n$$\nThis corresponds to a metric tensor matrix $G$ with components $g_{ij} = g(\\partial_i, \\partial_j)$ that is diagonal and constant:\n$$\nG = \\begin{pmatrix} m & 0 & 0 \\\\ 0 & m & 0 \\\\ 0 & 0 & I \\end{pmatrix}\n$$\nwhere $m$ and $I$ are positive constants.\n\nThe Christoffel symbols of the first kind for the Levi-Civita connection are given by:\n$$\n\\Gamma_{ijk} = \\frac{1}{2}\\left(\\frac{\\partial g_{jk}}{\\partial q^i} + \\frac{\\partial g_{ik}}{\\partial q^j} - \\frac{\\partial g_{ij}}{\\partial q^k}\\right)\n$$\nThe Christoffel symbols of the second kind are $\\Gamma^k_{ij} = g^{kl}\\Gamma_{lij}$. Since all metric components $g_{ij}$ are constants, all their partial derivatives with respect to the coordinates $(x, y, \\theta)$ are zero.\n$$\n\\frac{\\partial g_{ij}}{\\partial q^k} = 0 \\quad \\text{for all } i,j,k \\in \\{x,y,\\theta\\}\n$$\nConsequently, all Christoffel symbols of the Levi-Civita connection are zero in this coordinate system: $\\Gamma^k_{ij} = 0$.\n\nThe covariant derivative of a coordinate basis vector field along another is given by $\\nabla_{\\partial_i}\\partial_j = \\Gamma^k_{ij}\\partial_k$. Since all $\\Gamma^k_{ij}$ are zero, we have $\\nabla_{\\partial_i}\\partial_j = 0$. This means the connection is flat in the $(x, y, \\theta)$ coordinates.\n\nThe problem provides the frame vector $e_{2}$ as a coordinate basis vector:\n$$\ne_{2}(q) = \\partial_{\\theta}\n$$\nWe can now compute $\\nabla_{e_{2}}e_{2}$:\n$$\n\\nabla_{e_{2}}e_{2} = \\nabla_{\\partial_{\\theta}}\\partial_{\\theta}\n$$\nUsing the formula $\\nabla_{\\partial_{\\theta}}\\partial_{\\theta} = \\Gamma^k_{\\theta\\theta}\\partial_k$ and the fact that all $\\Gamma^k_{\\theta\\theta}=0$, we find:\n$$\n\\nabla_{e_{2}}e_{2} = 0\n$$\nThe resulting vector field is the zero vector field.\n\n**Step 2: Project $\\nabla_{e_{2}}e_{2}$ onto the distribution $D$.**\n\nThe nonholonomic connection is obtained by projecting this result onto the distribution $D$ using the projector $P$. The projector $P$ is a linear map. Its action on the zero vector is to produce the zero vector:\n$$\nP(0) = 0\n$$\nTherefore, we have:\n$$\n\\nabla^{nh}_{e_{2}}e_{2} = P(\\nabla_{e_{2}}e_{2}) = P(0) = 0\n$$\n\n**Step 3: Determine the coefficient $\\Gamma^{1}_{22}$.**\n\nWe equate the result from Step $2$ with the definition of the nonholonomic Christoffel symbols:\n$$\n\\Gamma^{1}_{22}\\,e_{1} + \\Gamma^{2}_{22}\\,e_{2} = 0\n$$\nThe frame vectors $e_{1} = \\cos\\theta\\,\\partial_{x}+\\sin\\theta\\,\\partial_{y}$ and $e_{2} = \\partial_{\\theta}$ are linearly independent at every point $q \\in Q$. For their linear combination to be the zero vector, the coefficients must be zero.\n$$\n\\Gamma^{1}_{22} = 0 \\quad \\text{and} \\quad \\Gamma^{2}_{22} = 0\n$$\nThe problem asks for the component $\\Gamma^{1}_{22}(q)$. The result is $0$. This value is constant and thus independent of $q$.",
            "answer": "$$\n\\boxed{0}\n$$"
        },
        {
            "introduction": "With the connection defined, we can study the \"straightest\" paths within the constraint distribution, known as nonholonomic geodesics or autoparallels. This exercise asks you to derive the equations for these geodesics for the Heisenberg distribution, a canonical model in sub-Riemannian geometry, using the variational Lagrange-d'Alembert principle. The result reveals the sometimes counter-intuitive nature of constrained motion and provides a crucial point of comparison with length-minimizing sub-Riemannian geodesics .",
            "id": "3780406",
            "problem": "Let $\\mathbb{R}^{3}$ carry the Euclidean metric $g$ in Cartesian coordinates $(x,y,z)$, and consider the Heisenberg-type nonintegrable distribution $\\mathcal{D}=\\ker \\alpha$ defined by the one-form $\\alpha = dz - \\tfrac{1}{2}\\left(x\\,dy - y\\,dx\\right)$. The orthogonal complement is determined by the Euclidean musical isomorphism $g^{\\sharp}$, and the nonholonomic connection is defined by projecting the Levi-Civita connection $\\nabla$ of $g$ onto $\\mathcal{D}$ by the orthogonal projector $P:\\,T\\mathbb{R}^{3}\\to \\mathcal{D}$. A nonholonomic geodesic is a curve $\\gamma(t)$ with $\\dot{\\gamma}(t)\\in \\mathcal{D}$ for all $t$ and $P\\left(\\nabla_{\\dot{\\gamma}}\\dot{\\gamma}\\right)=0$.\n\nStarting from first principles of the d’Alembert-Lagrange nonholonomic variational principle for the kinetic Lagrangian $L=\\tfrac{1}{2}\\|\\dot{\\gamma}\\|^{2}$ under the velocity constraint $\\alpha(\\dot{\\gamma})=0$, derive the governing equations of motion for the nonholonomic geodesics and solve them for the initial-value problem\n$$\n\\gamma(0)=(0,0,0),\\qquad \\dot{\\gamma}(0)=(v_{1},\\,v_{2},\\,0),\n$$\nwhere $v_{1}$ and $v_{2}$ are real constants. Then, using the fundamental Hamiltonian framework for sub-Riemannian geometry and the Pontryagin Maximum Principle (PMP), compare the resulting nonholonomic geodesics with the normal sub-Riemannian geodesics for the Heisenberg structure obtained by declaring the vector fields $X_{1}=\\partial_{x}-\\tfrac{y}{2}\\partial_{z}$ and $X_{2}=\\partial_{y}+\\tfrac{x}{2}\\partial_{z}$ orthonormal on $\\mathcal{D}$.\n\nProvide the explicit parametric form of the nonholonomic geodesic $\\gamma_{\\mathrm{nh}}(t)$ for the given initial conditions. Express your final answer as a single row matrix containing the three component functions $(x(t),\\,y(t),\\,z(t))$. No numerical approximation is required.",
            "solution": "The problem is first validated to ensure it is well-posed, scientifically grounded, and internally consistent.\n\n### Step 1: Extract Givens\n-   **Configuration Space**: $\\mathbb{R}^3$ with Cartesian coordinates $(x,y,z)$.\n-   **Metric**: Standard Euclidean metric $g$.\n-   **Lagrangian**: Kinetic energy Lagrangian $L = \\frac{1}{2}\\|\\dot{\\gamma}\\|^2 = \\frac{1}{2}(\\dot{x}^2 + \\dot{y}^2 + \\dot{z}^2)$.\n-   **Nonholonomic Constraint**: The velocity vector $\\dot{\\gamma}=(\\dot{x}, \\dot{y}, \\dot{z})$ must lie in the distribution $\\mathcal{D} = \\ker \\alpha$, where $\\alpha = dz - \\frac{1}{2}(x\\,dy - y\\,dx)$. This constraint is given by the Pfaffian equation $\\alpha(\\dot{\\gamma}) = 0$, which translates to $\\dot{z} - \\frac{1}{2}(x\\dot{y} - y\\dot{x}) = 0$.\n-   **Initial Conditions**: $\\gamma(0) = (x(0), y(0), z(0)) = (0,0,0)$ and $\\dot{\\gamma}(0) = (\\dot{x}(0), \\dot{y}(0), \\dot{z}(0)) = (v_1, v_2, 0)$, where $v_1, v_2 \\in \\mathbb{R}$ are constants.\n-   **Task**: Derive and solve the equations for the nonholonomic geodesic subjected to the given initial conditions using the d'Alembert-Lagrange principle. Furthermore, compare this result with the normal sub-Riemannian geodesics.\n\n### Step 2: Validate Using Extracted Givens\n-   **Scientific Grounding**: The problem is a standard exercise in nonholonomic and sub-Riemannian geometry, which are well-established branches of differential geometry and geometric mechanics. The Heisenberg distribution is a canonical example. The problem is scientifically sound.\n-   **Well-Posedness and Consistency**: The problem provides a Lagrangian, a valid nonholonomic constraint, and a full set of initial conditions. The initial velocity $\\dot{\\gamma}(0)=(v_1, v_2, 0)$ at the point $\\gamma(0)=(0,0,0)$ must satisfy the constraint: $\\dot{z}(0) - \\frac{1}{2}(x(0)\\dot{y}(0) - y(0)\\dot{x}(0)) = 0 - \\frac{1}{2}(0 \\cdot v_2 - 0 \\cdot v_1) = 0$. The initial condition is consistent with the constraint. The problem is well-posed.\n-   **Objectivity**: The problem is stated in precise mathematical language, free from any subjectivity or ambiguity.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. A full solution will be provided.\n\n### Derivation of the Equations of Motion\n\nWe use the d'Alembert-Lagrange nonholonomic variational principle. The equations of motion for a system with Lagrangian $L(q, \\dot{q})$ subject to a linear velocity constraint $C(q, \\dot{q}) = \\sum_i A_i(q) \\dot{q}^i = 0$ are given by:\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{q}^i}\\right) - \\frac{\\partial L}{\\partial q^i} = \\lambda A_i(q)\n$$\nwhere $\\lambda$ is a Lagrange multiplier determined by the persistence of the constraint.\n\nThe Lagrangian is $L = \\frac{1}{2}(\\dot{x}^2 + \\dot{y}^2 + \\dot{z}^2)$. The coordinates are $q = (x, y, z)$. The partial derivatives of $L$ are:\n$$\n\\frac{\\partial L}{\\partial \\dot{x}} = \\dot{x}, \\quad \\frac{\\partial L}{\\partial \\dot{y}} = \\dot{y}, \\quad \\frac{\\partial L}{\\partial \\dot{z}} = \\dot{z}\n$$\n$$\n\\frac{\\partial L}{\\partial x} = 0, \\quad \\frac{\\partial L}{\\partial y} = 0, \\quad \\frac{\\partial L}{\\partial z} = 0\n$$\nThe constraint equation $\\dot{z} - \\frac{1}{2}(x\\dot{y} - y\\dot{x}) = 0$ can be written as $A_x \\dot{x} + A_y \\dot{y} + A_z \\dot{z} = 0$, with:\n$$\nA_x = \\frac{y}{2}, \\quad A_y = -\\frac{x}{2}, \\quad A_z = 1\n$$\nThe Lagrange-d'Alembert equations for the coordinates $(x,y,z)$ are:\n1.  $\\ddot{x} = \\lambda A_x = \\lambda \\frac{y}{2}$\n2.  $\\ddot{y} = \\lambda A_y = -\\lambda \\frac{x}{2}$\n3.  $\\ddot{z} = \\lambda A_z = \\lambda$\n\nTo find the Lagrange multiplier $\\lambda$, we differentiate the constraint equation with respect to time $t$:\n$$\n\\frac{d}{dt}\\left(\\dot{z} - \\frac{1}{2}(x\\dot{y} - y\\dot{x})\\right) = 0\n$$\n$$\n\\ddot{z} - \\frac{1}{2}(\\dot{x}\\dot{y} + x\\ddot{y} - \\dot{y}\\dot{x} - y\\ddot{x}) = 0\n$$\n$$\n\\ddot{z} - \\frac{1}{2}(x\\ddot{y} - y\\ddot{x}) = 0\n$$\nNow, substitute the expressions for $\\ddot{x}$, $\\ddot{y}$, and $\\ddot{z}$ from the equations of motion into this differentiated constraint:\n$$\n\\lambda - \\frac{1}{2}\\left(x\\left(-\\lambda \\frac{x}{2}\\right) - y\\left(\\lambda \\frac{y}{2}\\right)\\right) = 0\n$$\n$$\n\\lambda - \\frac{1}{2}\\left(-\\frac{\\lambda x^2}{2} - \\frac{\\lambda y^2}{2}\\right) = 0\n$$\n$$\n\\lambda + \\frac{\\lambda}{4}(x^2 + y^2) = 0\n$$\n$$\n\\lambda \\left(1 + \\frac{x^2 + y^2}{4}\\right) = 0\n$$\nSince the term $1 + \\frac{1}{4}(x^2 + y^2)$ is strictly positive for all real $x$ and $y$, the only possibility is that the multiplier $\\lambda$ is identically zero, i.e., $\\lambda(t) = 0$ for all $t$.\n\nThis result indicates that for this specific nonholonomic system, the constraint force is zero. The equations of motion simplify to:\n$$\n\\ddot{x} = 0, \\quad \\ddot{y} = 0, \\quad \\ddot{z} = 0\n$$\nThese equations describe motion in a straight line at a constant velocity.\n\n### Solving the Initial Value Problem\n\nWe integrate the equations of motion twice. A single integration yields:\n$$\n\\dot{x}(t) = c_1, \\quad \\dot{y}(t) = c_2, \\quad \\dot{z}(t) = c_3\n$$\nApplying the initial velocity condition $\\dot{\\gamma}(0)=(v_1, v_2, 0)$, we find the constants of integration:\n$$\nc_1 = v_1, \\quad c_2 = v_2, \\quad c_3 = 0\n$$\nSo, the velocity vector is constant: $\\dot{\\gamma}(t) = (v_1, v_2, 0)$.\n\nIntegrating a second time yields the trajectory:\n$$\nx(t) = v_1 t + d_1, \\quad y(t) = v_2 t + d_2, \\quad z(t) = 0 \\cdot t + d_3\n$$\nApplying the initial position condition $\\gamma(0)=(0,0,0)$:\n$$\nd_1 = 0, \\quad d_2 = 0, \\quad d_3 = 0\n$$\nThus, the explicit parametric form of the nonholonomic geodesic is:\n$$\n\\gamma_{\\mathrm{nh}}(t) = (v_1 t, v_2 t, 0)\n$$\nWe must verify that this solution satisfies the nonholonomic constraint for all $t$:\n$$\n\\dot{z}(t) - \\frac{1}{2}\\left(x(t)\\dot{y}(t) - y(t)\\dot{x}(t)\\right) = 0 - \\frac{1}{2}\\left((v_1 t)(v_2) - (v_2 t)(v_1)\\right) = -\\frac{1}{2}(v_1 v_2 t - v_2 v_1 t) = 0\n$$\nThe constraint is satisfied for all time.\n\n### Comparison with Sub-Riemannian Geodesics\n\nThe problem also asks for a comparison with the normal sub-Riemannian geodesics obtained from the Pontryagin Maximum Principle (PMP) for the same distribution. The sub-Riemannian geodesic equations for the Heisenberg group are known to be:\n$$\n\\ddot{x} = -p_z \\dot{y}, \\quad \\ddot{y} = p_z \\dot{x}\n$$\nwhere $p_z$ is the constant momentum conjugate to the $z$ coordinate. These equations describe circular motion in the $(x,y)$-plane (for $p_z \\neq 0$), leading to helical paths in $\\mathbb{R}^3$. These are generally different from the straight-line nonholonomic geodesic found above.\n\nHowever, there is a special case. If the initial costate vector for the PMP has $p_z(0)=0$, then the sub-Riemannian geodesic equations become $\\ddot{x}=0$ and $\\ddot{y}=0$. This also implies $\\ddot{z}=0$. This is precisely the system we solved for the nonholonomic geodesic. Therefore, the nonholonomic geodesic $\\gamma_{\\mathrm{nh}}(t)$ for this specific problem corresponds to the sub-Riemannian geodesic for the special case where the conjugate momentum $p_z$ is zero.\n\nThe solution to the specified initial value problem for the nonholonomic geodesic is the straight-line path.\n\nThe final answer is the set of component functions for $\\gamma_{\\mathrm{nh}}(t)$.\n$$\nx(t) = v_1 t\n$$\n$$\ny(t) = v_2 t\n$$\n$$\nz(t) = 0\n$$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\nv_1 t & v_2 t & 0\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "A critical insight in nonholonomic mechanics is that the geodesics of the nonholonomic connection are generally not the shortest paths between two points in the configuration space. This final practice makes this abstract concept concrete by having you explicitly calculate and compare the lengths of two different paths connecting the same endpoints for a system on $\\mathbb{R}^2 \\times S^1$. By demonstrating that the $\\nabla^{nh}$-autoparallel is longer than a simple piecewise alternative, this exercise sharpens the distinction between autoparallels and true sub-Riemannian length minimizers .",
            "id": "3780377",
            "problem": "Consider the configuration space $M = \\mathbb{R}^2 \\times S^1$ with global coordinates $(x,y,\\theta)$, equipped with the Riemannian metric $g_{\\lambda}$ defined by $g_{\\lambda}(\\partial_{x},\\partial_{x})=1$, $g_{\\lambda}(\\partial_{y},\\partial_{y})=1$, $g_{\\lambda}(\\partial_{\\theta},\\partial_{\\theta})=\\lambda^{2}$, and all cross terms zero, where $\\lambda>0$ is a fixed parameter. Impose the nonholonomic constraint that lateral slip is forbidden, modeled by the rank-$2$ distribution $D=\\mathrm{span}\\{X_{1},X_{2}\\}$ with $X_{1}=\\cos\\theta\\,\\partial_{x}+\\sin\\theta\\,\\partial_{y}$ and $X_{2}=\\partial_{\\theta}$. Let $\\nabla$ be the Levi–Civita connection of $g_{\\lambda}$ and let $\\nabla^{\\mathrm{nh}}$ denote the nonholonomic connection defined by orthogonal projection of $\\nabla$ onto $D$ with respect to $g_{\\lambda}$, that is, $\\nabla^{\\mathrm{nh}}_{U}V := P\\big(\\nabla_{U}V\\big)$ for $U,V\\in\\Gamma(D)$, where $P:T M\\to D$ is the $g_{\\lambda}$-orthogonal projector.\n\nA curve $\\gamma(t)=(x(t),y(t),\\theta(t))$ with $\\dot{\\gamma}(t)\\in D$ is called an autoparallel for $\\nabla^{\\mathrm{nh}}$ if $P\\big(\\nabla_{\\dot{\\gamma}}\\dot{\\gamma}\\big)=0$. The sub-Riemannian metric on $D$ is the restriction of $g_{\\lambda}$ to $D$; the length of an admissible curve is the integral of the pointwise norm of its velocity with respect to this restricted metric.\n\nStarting from $\\gamma(0)=(0,0,0)$, fix parameters $R>0$ and $\\Delta\\theta\\in(0,2\\pi)$, and consider the target endpoint $\\gamma(T)=(x_{f},y_{f},\\theta_{f})$ with $x_{f}=R\\sin\\Delta\\theta$, $y_{f}=R(1-\\cos\\Delta\\theta)$, and $\\theta_{f}=\\Delta\\theta$. This endpoint can be reached by:\n- a single $\\nabla^{\\mathrm{nh}}$-autoparallel with constant body speed and angular rate satisfying $\\dot{x}=u_{1}\\cos\\theta$, $\\dot{y}=u_{1}\\sin\\theta$, $\\dot{\\theta}=u_{2}$ and $R=u_{1}/u_{2}$; and also by\n- a three-segment admissible path that rotates by $\\Delta\\theta/2$, translates along $X_{1}$ with $\\dot{\\theta}=0$ a distance $2R\\sin(\\Delta\\theta/2)$, and rotates again by $\\Delta\\theta/2$.\n\nUsing only the definitions above and first principles of the Levi–Civita connection and orthogonal projection, derive the sub-Riemannian lengths $L_{\\mathrm{arc}}$ and $L_{\\mathrm{piece}}$ of these two paths and compute the exact symbolic difference\n$$D(R,\\lambda,\\Delta\\theta)=L_{\\mathrm{arc}}-L_{\\mathrm{piece}}.$$\nYour final answer must be a single closed-form analytical expression for $D(R,\\lambda,\\Delta\\theta)$ in terms of $R$, $\\lambda$, and $\\Delta\\theta$. Do not approximate; do not round; express the answer exactly.",
            "solution": "The problem is well-posed and scientifically sound, containing all necessary information for a unique solution. We proceed with the derivation.\n\nThe configuration space is $M = \\mathbb{R}^2 \\times S^1$ with coordinates $(x,y,\\theta)$. The Riemannian metric $g_{\\lambda}$ is given by its action on the coordinate basis vectors:\n$$\ng_{\\lambda}(\\partial_{x},\\partial_{x})=1, \\quad g_{\\lambda}(\\partial_{y},\\partial_{y})=1, \\quad g_{\\lambda}(\\partial_{\\theta},\\partial_{\\theta})=\\lambda^{2}\n$$\nAll cross-terms are zero. In matrix form with respect to the basis $(\\partial_x, \\partial_y, \\partial_\\theta)$, the metric tensor is:\n$$\n[g_{\\lambda}] = \\begin{pmatrix} 1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & \\lambda^2 \\end{pmatrix}\n$$\nThe nonholonomic constraint is defined by the distribution $D = \\mathrm{span}\\{X_1, X_2\\}$, where the vector fields are:\n$$\nX_1 = \\cos\\theta\\,\\partial_x + \\sin\\theta\\,\\partial_y \\\\\nX_2 = \\partial_\\theta\n$$\nAn admissible path $\\gamma(t)$ is one whose velocity vector $\\dot{\\gamma}(t)$ lies in $D$ for all $t$. The sub-Riemannian length of such a path is $L = \\int \\sqrt{g_{\\lambda}(\\dot{\\gamma}(t), \\dot{\\gamma}(t))} \\, dt$.\n\nFirst, we compute the metric components in the basis $\\{X_1, X_2\\}$, which forms a (local) frame for the distribution $D$.\n$$\ng_{\\lambda}(X_1, X_1) = g_{\\lambda}(\\cos\\theta\\,\\partial_x + \\sin\\theta\\,\\partial_y, \\cos\\theta\\,\\partial_x + \\sin\\theta\\,\\partial_y) \\\\\n= \\cos^2\\theta \\, g_{\\lambda}(\\partial_x, \\partial_x) + \\sin^2\\theta \\, g_{\\lambda}(\\partial_y, \\partial_y) = \\cos^2\\theta \\cdot 1 + \\sin^2\\theta \\cdot 1 = 1\n$$\n$$\ng_{\\lambda}(X_2, X_2) = g_{\\lambda}(\\partial_\\theta, \\partial_\\theta) = \\lambda^2\n$$\n$$\ng_{\\lambda}(X_1, X_2) = g_{\\lambda}(\\cos\\theta\\,\\partial_x + \\sin\\theta\\,\\partial_y, \\partial_\\theta) = 0\n$$\nThus, $\\{X_1, X_2\\}$ forms a $g_{\\lambda}$-orthogonal, but not orthonormal, frame for $D$.\n\nNext, we calculate the length of the first path, $L_{\\mathrm{arc}}$.\nThe path is described by the kinematics $\\dot{x}=u_{1}\\cos\\theta$, $\\dot{y}=u_{1}\\sin\\theta$, and $\\dot{\\theta}=u_{2}$ with $u_1$ and $u_2$ being constants. The velocity vector can be written as:\n$$\n\\dot{\\gamma}(t) = \\dot{x}\\partial_x + \\dot{y}\\partial_y + \\dot{\\theta}\\partial_\\theta = u_1(\\cos\\theta\\,\\partial_x + \\sin\\theta\\,\\partial_y) + u_2\\partial_\\theta = u_1 X_1 + u_2 X_2\n$$\nThis confirms the path is admissible. The squared norm of the velocity vector is:\n$$\ng_{\\lambda}(\\dot{\\gamma}, \\dot{\\gamma}) = g_{\\lambda}(u_1 X_1 + u_2 X_2, u_1 X_1 + u_2 X_2) = u_1^2 g_{\\lambda}(X_1, X_1) + u_2^2 g_{\\lambda}(X_2, X_2) = u_1^2 + \\lambda^2 u_2^2\n$$\nSince $u_1$ and $u_2$ are constant, the speed $s = \\sqrt{u_1^2 + \\lambda^2 u_2^2}$ is constant along the path.\nThe path starts at $\\gamma(0)=(0,0,0)$ and ends at $\\gamma(T)=(x_f,y_f,\\theta_f)$.\nFrom $\\dot{\\theta}=u_2$, we have $\\theta(t) = u_2 t$. At the final time $T$, $\\theta_f = \\Delta\\theta = u_2 T$, which gives $T = \\Delta\\theta / u_2$. Since $\\Delta\\theta \\in (0, 2\\pi)$, we must have $u_2>0$ for $T>0$.\nThe length of the arc is $L_{\\mathrm{arc}} = s \\cdot T = \\sqrt{u_1^2 + \\lambda^2 u_2^2} \\cdot (\\Delta\\theta/u_2)$.\nWe are given the relation $R = u_1/u_2$, so $u_1 = R u_2$. Substituting this into the length expression:\n$$\nL_{\\mathrm{arc}} = \\sqrt{(R u_2)^2 + \\lambda^2 u_2^2} \\frac{\\Delta\\theta}{u_2} = \\sqrt{u_2^2(R^2 + \\lambda^2)} \\frac{\\Delta\\theta}{u_2}\n$$\nSince $u_2 > 0$, $\\sqrt{u_2^2} = u_2$.\n$$\nL_{\\mathrm{arc}} = u_2 \\sqrt{R^2 + \\lambda^2} \\frac{\\Delta\\theta}{u_2} = \\Delta\\theta \\sqrt{R^2 + \\lambda^2}\n$$\n\nNow, we calculate the length of the second path, $L_{\\mathrm{piece}}$. This path consists of three segments.\nSegment 1: Rotation by $\\Delta\\theta/2$.\nDuring this segment, $\\dot{x}=\\dot{y}=0$ and $\\theta$ changes from $0$ to $\\Delta\\theta/2$. The velocity is $\\dot{\\gamma}_1(t) = \\dot{\\theta}(t)\\partial_\\theta = \\dot{\\theta}(t) X_2$. Assuming the rotation is monotonic, $\\dot{\\theta}(t) \\geq 0$.\nThe length of this segment is:\n$$\nL_1 = \\int_{t_0}^{t_1} \\sqrt{g_{\\lambda}(\\dot{\\gamma}_1, \\dot{\\gamma}_1)} \\, dt = \\int_{t_0}^{t_1} \\sqrt{\\dot{\\theta}^2 g_{\\lambda}(X_2, X_2)} \\, dt = \\int_{t_0}^{t_1} \\dot{\\theta} \\lambda \\, dt = \\lambda \\int_0^{\\Delta\\theta/2} d\\theta = \\frac{\\lambda \\Delta\\theta}{2}\n$$\n\nSegment 2: Translation along $X_1$ with $\\dot{\\theta}=0$ a distance $d = 2R\\sin(\\Delta\\theta/2)$.\nDuring this segment, $\\theta$ is constant at $\\Delta\\theta/2$. The velocity is $\\dot{\\gamma}_2(t) = v(t) X_1|_{\\theta=\\Delta\\theta/2}$ for some scalar function $v(t) \\geq 0$.\nThe length of this segment is:\n$$\nL_2 = \\int_{t_1}^{t_2} \\sqrt{g_{\\lambda}(\\dot{\\gamma}_2, \\dot{\\gamma}_2)} \\, dt = \\int_{t_1}^{t_2} \\sqrt{v(t)^2 g_{\\lambda}(X_1, X_1)} \\, dt = \\int_{t_1}^{t_2} v(t) \\, dt\n$$\nThe problem states this path segment covers a \"distance\" $d=2R\\sin(\\Delta\\theta/2)$. The path is parameterized by arc length s. The velocity vector is $X_1$, which has unit $g_\\lambda$-norm. Thus, the sub-Riemannian length is simply the total distance parameter.\n$$\nL_2 = 2R\\sin\\left(\\frac{\\Delta\\theta}{2}\\right)\n$$\nAs verified during problem validation, this path length also corresponds to the Euclidean distance covered in the $(x,y)$-plane.\n\nSegment 3: Rotation by $\\Delta\\theta/2$.\nThis segment is symmetric to the first. $\\theta$ changes from $\\Delta\\theta/2$ to $\\Delta\\theta$ while $x$ and $y$ are constant.\nThe length is calculated similarly to Segment 1:\n$$\nL_3 = \\int_{t_2}^{t_3} \\lambda \\dot{\\theta} \\, dt = \\lambda \\int_{\\Delta\\theta/2}^{\\Delta\\theta} d\\theta = \\lambda \\left(\\Delta\\theta - \\frac{\\Delta\\theta}{2}\\right) = \\frac{\\lambda \\Delta\\theta}{2}\n$$\n\nThe total length of the piecewise path is the sum of the lengths of its segments:\n$$\nL_{\\mathrm{piece}} = L_1 + L_2 + L_3 = \\frac{\\lambda \\Delta\\theta}{2} + 2R\\sin\\left(\\frac{\\Delta\\theta}{2}\\right) + \\frac{\\lambda \\Delta\\theta}{2} = \\lambda \\Delta\\theta + 2R\\sin\\left(\\frac{\\Delta\\theta}{2}\\right)\n$$\n\nFinally, we compute the difference $D(R, \\lambda, \\Delta\\theta) = L_{\\mathrm{arc}} - L_{\\mathrm{piece}}$:\n$$\nD(R, \\lambda, \\Delta\\theta) = \\Delta\\theta \\sqrt{R^2 + \\lambda^2} - \\left( \\lambda \\Delta\\theta + 2R\\sin\\left(\\frac{\\Delta\\theta}{2}\\right) \\right)\n$$\n$$\nD(R, \\lambda, \\Delta\\theta) = \\Delta\\theta \\left( \\sqrt{R^2 + \\lambda^2} - \\lambda \\right) - 2R\\sin\\left(\\frac{\\Delta\\theta}{2}\\right)\n$$\nThis is the final symbolic expression for the difference in lengths.",
            "answer": "$$\\boxed{\\Delta\\theta \\left( \\sqrt{R^2 + \\lambda^2} - \\lambda \\right) - 2R\\sin\\left(\\frac{\\Delta\\theta}{2}\\right)}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "The foundation of nonholonomic mechanics lies in understanding how velocity constraints restrict a system's motion. This first practice provides a concrete exercise in translating a set of given Pfaffian constraints into a well-defined geometric object: the constraint distribution $\\mathcal{D}(q)$. By representing the constraints as a linear system, you will use fundamental principles of linear algebra to determine the rank of the distribution, which specifies the number of independent directions the system can instantaneously move in .",
            "id": "3766099",
            "problem": "Consider a nonholonomic locomotion system modeled on the configuration manifold $Q=\\mathrm{SE}(2)\\times \\mathbb{R}^{2}$, where $\\mathrm{SE}(2)$ denotes the Special Euclidean group in two dimensions (SE(2)). Use local coordinates $(x,y,\\theta,s_{1},s_{2})$ on $Q$, where $(x,y)\\in\\mathbb{R}^{2}$ are planar position coordinates, $\\theta\\in\\mathbb{R}$ is an orientation angle measured in radians, and $(s_{1},s_{2})\\in\\mathbb{R}^{2}$ are internal shape variables.\n\nSuppose the system is subject to the following idealized nonholonomic constraints given as Pfaffian $1$-forms:\n$$\n\\omega^{1}=-\\sin(\\theta)\\,dx+\\cos(\\theta)\\,dy,\n\\qquad\n\\omega^{2}=d\\theta - s_{1}\\,ds_{1}- 2 s_{2}\\,ds_{2}.\n$$\nThese constraints define the constraint distribution\n$$\n\\mathcal{D}(q)=\\{v\\in T_{q}Q\\mid \\omega^{\\alpha}(v)=0 \\text{ for }\\alpha=1,2\\},\n$$\nwhich can be interpreted as the horizontal distribution of a nonholonomic connection over the shape space $M=\\mathbb{R}^{2}$ in the principal bundle $Q=\\mathrm{SE}(2)\\times M$.\n\nStarting from the fundamental definition that a constraint distribution is the common kernel of the constraint $1$-forms, derive a coordinate realization of $\\mathcal{D}(q)$ as the nullspace of a coefficient matrix acting on velocity coordinates. Then, using first principles of linear algebra, verify the rank of the constraint $1$-forms and deduce the rank of $\\mathcal{D}(q)$ at the specific configuration\n$$\nq^{\\ast}=(x^{\\ast},y^{\\ast},\\theta^{\\ast},s_{1}^{\\ast},s_{2}^{\\ast})=(0,1,\\tfrac{\\pi}{4},1,-1).\n$$\n\nYour final answer must be the rank of $\\mathcal{D}(q^{\\ast})$ expressed as a single integer with no units.",
            "solution": "The configuration manifold of the system is $Q=\\mathrm{SE}(2)\\times \\mathbb{R}^{2}$, which is a $5$-dimensional manifold. The local coordinates are given by $q = (x, y, \\theta, s_{1}, s_{2})$. A tangent vector $v \\in T_{q}Q$ at a point $q \\in Q$ can be represented in these coordinates by its velocity components, which we denote by the column vector $\\dot{q}$:\n$$\n\\dot{q} = \\begin{pmatrix} \\dot{x} \\\\ \\dot{y} \\\\ \\dot{\\theta} \\\\ \\dot{s}_{1} \\\\ \\dot{s}_{2} \\end{pmatrix} \\in \\mathbb{R}^{5}\n$$\nThe system is subject to two nonholonomic constraints, given by the Pfaffian $1$-forms:\n$$\n\\begin{align*}\n\\omega^{1} &= -\\sin(\\theta)\\,dx+\\cos(\\theta)\\,dy \\\\\n\\omega^{2} &= d\\theta - s_{1}\\,ds_{1} - 2s_{2}\\,ds_{2}\n\\end{align*}\n$$\nThe constraint distribution $\\mathcal{D}(q)$ is defined as the set of all tangent vectors $v \\in T_{q}Q$ that are annihilated by both constraint forms. That is, $v \\in \\mathcal{D}(q)$ if and only if $\\omega^{1}(v)=0$ and $\\omega^{2}(v)=0$. Applying these $1$-forms to a tangent vector with velocity components $\\dot{q}$ yields a system of two linear equations in these components:\n$$\n\\begin{align*}\n\\omega^{1}(v) = -\\sin(\\theta)\\dot{x} + \\cos(\\theta)\\dot{y} + 0\\cdot\\dot{\\theta} + 0\\cdot\\dot{s}_{1} + 0\\cdot\\dot{s}_{2} &= 0 \\\\\n\\omega^{2}(v) = 0\\cdot\\dot{x} + 0\\cdot\\dot{y} + 1\\cdot\\dot{\\theta} - s_{1}\\dot{s}_{1} - 2s_{2}\\dot{s}_{2} &= 0\n\\end{align*}\n$$\nThis system of equations can be written in matrix form as $A(q)\\dot{q}=0$, where $A(q)$ is the coefficient matrix derived from the coefficients of the $1$-forms in the coordinate basis $\\{dx, dy, d\\theta, ds_{1}, ds_{2}\\}$. This provides the coordinate realization of $\\mathcal{D}(q)$ as the nullspace (or kernel) of $A(q)$:\n$$\nA(q) = \\begin{pmatrix}\n-\\sin(\\theta) & \\cos(\\theta) & 0 & 0 & 0 \\\\\n0 & 0 & 1 & -s_{1} & -2s_{2}\n\\end{pmatrix}\n$$\nThe distribution $\\mathcal{D}(q)$ is precisely the nullspace of this $2 \\times 5$ matrix: $\\mathcal{D}(q) = \\ker(A(q))$.\n\nThe next step is to determine the rank of the set of constraint $1$-forms, which is equivalent to the rank of the matrix $A(q)$. The rank of a matrix is the number of linearly independent rows (or columns). The two row vectors of $A(q)$ are:\n$$\n\\begin{align*}\n\\mathbf{r}_1 &= \\begin{pmatrix} -\\sin(\\theta) & \\cos(\\theta) & 0 & 0 & 0 \\end{pmatrix} \\\\\n\\mathbf{r}_2 &= \\begin{pmatrix} 0 & 0 & 1 & -s_{1} & -2s_{2} \\end{pmatrix}\n\\end{align*}\n$$\nFor these two vectors to be linearly dependent, one must be a scalar multiple of the other. Let us assume $\\mathbf{r}_2 = c \\cdot \\mathbf{r}_1$ for some scalar $c \\in \\mathbb{R}$. Comparing the third components, we get $1 = c \\cdot 0$, which is a contradiction. Therefore, $\\mathbf{r}_2$ cannot be a multiple of $\\mathbf{r}_1$. Similarly, assuming $\\mathbf{r}_1 = c \\cdot \\mathbf{r}_2$ leads to contradictions as well, since $\\sin(\\theta)$ and $\\cos(\\theta)$ cannot both be zero, while the first two components of $\\mathbf{r}_2$ are both zero. Thus, the two rows are linearly independent for all $q \\in Q$.\nThis verifies that the rank of the set of constraint $1$-forms, $\\mathrm{rank}(A(q))$, is $2$ for any configuration $q$, including the specific configuration $q^{\\ast}$.\n\nThe rank of the distribution $\\mathcal{D}(q)$ is its dimension as a vector subspace of the tangent space $T_q Q$. According to the rank-nullity theorem from linear algebra, for the linear map represented by $A(q):T_q Q \\rightarrow \\mathbb{R}^2$, we have:\n$$\n\\dim(T_q Q) = \\mathrm{rank}(A(q)) + \\mathrm{nullity}(A(q))\n$$\nHere, $\\dim(T_q Q) = \\dim(Q) = 5$, $\\mathrm{rank}(A(q))$ is the rank of the matrix $A(q)$, and $\\mathrm{nullity}(A(q))$ is the dimension of the nullspace, which is by definition the rank of the distribution $\\mathcal{D}(q)$.\n$$\n\\mathrm{rank}(\\mathcal{D}(q)) = \\dim(\\ker(A(q))) = \\mathrm{nullity}(A(q))\n$$\nRearranging the rank-nullity theorem, we get:\n$$\n\\mathrm{rank}(\\mathcal{D}(q)) = \\dim(Q) - \\mathrm{rank}(A(q))\n$$\nWe have already established that $\\mathrm{rank}(A(q)) = 2$ for all $q$. Therefore, the rank of the distribution is constant throughout the configuration space:\n$$\n\\mathrm{rank}(\\mathcal{D}(q)) = 5 - 2 = 3\n$$\nThis result is independent of the specific configuration. Thus, for the given point $q^{\\ast}=(0,1,\\tfrac{\\pi}{4},1,-1)$, the rank of the distribution $\\mathcal{D}(q^{\\ast})$ is also $3$.\n\nFor completeness, let us evaluate the matrix $A(q)$ at $q^{\\ast}$:\n$$\nq^{\\ast} = (x^{\\ast},y^{\\ast},\\theta^{\\ast},s_{1}^{\\ast},s_{2}^{\\ast}) = (0, 1, \\tfrac{\\pi}{4}, 1, -1)\n$$\nAt this point, $\\sin(\\theta^{\\ast}) = \\frac{\\sqrt{2}}{2}$ and $\\cos(\\theta^{\\ast}) = \\frac{\\sqrt{2}}{2}$. The matrix becomes:\n$$\nA(q^{\\ast}) = \\begin{pmatrix}\n-\\frac{\\sqrt{2}}{2} & \\frac{\\sqrt{2}}{2} & 0 & 0 & 0 \\\\\n0 & 0 & 1 & -1 & 2\n\\end{pmatrix}\n$$\nAs expected, the two rows are linearly independent, and the rank of this matrix is $2$. Applying the formula:\n$$\n\\mathrm{rank}(\\mathcal{D}(q^{\\ast})) = \\dim(Q) - \\mathrm{rank}(A(q^{\\ast})) = 5 - 2 = 3\n$$\nThe rank of the constraint distribution $\\mathcal{D}(q)$ at the specified configuration $q^{\\ast}$ is $3$.",
            "answer": "$$\n\\boxed{3}\n$$"
        },
        {
            "introduction": "In systems with symmetry, the interaction between group motion and shape change is elegantly captured by the mechanical connection. This practice moves from the abstract definition of constraints to the physical origin of this connection, showing how it is derived directly from the system's kinetic energy, which defines a Riemannian metric on the configuration space. By working through the example of a simple disk-rotor assembly, you will compute the essential components of this geometric structure—the locked inertia tensor and the momentum map—to explicitly find the connection one-form .",
            "id": "3766143",
            "problem": "Consider a planar rigid body consisting of a uniform disk of moment of inertia $I_{b}$ about its fixed central pivot, to which is mounted a coaxial internal rotor of moment of inertia $I_{r}$ about the same axis. The configuration space is the product $Q = \\mathrm{SO}(2) \\times S^{1}$, where $\\mathrm{SO}(2)$ denotes the Special Orthogonal group (SO) of planar rotations describing the disk’s orientation, and $S^{1}$ describes the rotor’s relative spin angle. Let the group $G = \\mathrm{SO}(2)$ act on $Q$ by left multiplication on the disk orientation coordinate. Denote by $(\\theta, \\alpha)$ the coordinates on $Q$, where $\\theta$ is the disk orientation and $\\alpha$ is the rotor’s internal angle, both measured in radians. The absolute angular velocity of the disk is $\\omega = \\dot{\\theta}$, while the absolute angular velocity of the rotor is $\\omega_{r} = \\dot{\\theta} + \\dot{\\alpha}$ due to its mounting on the disk.\n\nThe kinetic energy induces a $G$-invariant Riemannian metric $g$ on $Q$. Using the standard identification of the Lie algebra $\\mathfrak{so}(2)$ with $\\mathbb{R}$, the locked inertia tensor $\\mathbb{I}(q): \\mathfrak{so}(2) \\to \\mathfrak{so}(2)^{*}$ at $q = (\\theta, \\alpha)$ is defined by the rule\n$$\\langle \\mathbb{I}(q)\\xi, \\eta \\rangle = g_{q}\\big(\\xi_{Q}(q), \\eta_{Q}(q)\\big), \\quad \\text{for all } \\xi, \\eta \\in \\mathfrak{so}(2),$$\nwhere $\\xi_{Q}$ is the infinitesimal generator associated to $\\xi$.\n\nSimilarly, the momentum map $J(q): T_{q}Q \\to \\mathfrak{so}(2)^{*}$ is defined by\n$$\\langle J(q)(v), \\xi \\rangle = g_{q}\\big(v, \\xi_{Q}(q)\\big), \\quad \\text{for all } \\xi \\in \\mathfrak{so}(2), \\ v \\in T_{q}Q.$$\n\nThe mechanical connection $A(q): T_{q}Q \\to \\mathfrak{so}(2)$ is defined implicitly by\n$$\\mathbb{I}(q)\\,A(q) = J(q).$$\n\nStarting from first principles of kinetic energy for rigid bodies, do the following:\n- Derive the $G$-invariant Riemannian metric $g$ on $Q$ induced by the kinetic energy of the disk-rotor system.\n- Compute the locked inertia tensor $\\mathbb{I}(q)$.\n- Compute the momentum map $J(q)$.\n- Use these to obtain an explicit coordinate expression for the mechanical connection $A(q)$ evaluated on a tangent vector $v = (\\dot{\\theta}, \\dot{\\alpha}) \\in T_{q}Q$.\n\nAngles must be treated in radians. Express your final answer as a single closed-form analytic expression for $A(q)(\\dot{\\theta}, \\dot{\\alpha})$ in terms of $I_{b}$, $I_{r}$, $\\dot{\\theta}$, and $\\dot{\\alpha}$.",
            "solution": "The problem requires the derivation of the mechanical connection for a planar rigid body system composed of a disk and a coaxial rotor. The derivation will proceed by first establishing the kinetic energy of the system, which in turn defines a Riemannian metric on the configuration space. Subsequently, the locked inertia tensor and the momentum map will be computed based on their geometric definitions. Finally, the mechanical connection will be determined from the relationship between these quantities.\n\nFirst, we determine the total kinetic energy $T$ of the system. The system's configuration is described by coordinates $(\\theta, \\alpha) \\in Q = \\mathrm{SO}(2) \\times S^1$. The absolute angular velocity of the disk is $\\omega = \\dot{\\theta}$, and the absolute angular velocity of the rotor is $\\omega_r = \\dot{\\theta} + \\dot{\\alpha}$. The moments of inertia for the disk and rotor about the pivot axis are $I_b$ and $I_r$, respectively.\n\nThe kinetic energy of the disk, $T_b$, is given by:\n$$ T_b = \\frac{1}{2} I_b \\omega^2 = \\frac{1}{2} I_b \\dot{\\theta}^2 $$\nThe kinetic energy of the rotor, $T_r$, is given by:\n$$ T_r = \\frac{1}{2} I_r \\omega_r^2 = \\frac{1}{2} I_r (\\dot{\\theta} + \\dot{\\alpha})^2 $$\nThe total kinetic energy $T$ is the sum $T = T_b + T_r$:\n$$ T = \\frac{1}{2} I_b \\dot{\\theta}^2 + \\frac{1}{2} I_r (\\dot{\\theta} + \\dot{\\alpha})^2 $$\nExpanding this expression yields:\n$$ T = \\frac{1}{2} I_b \\dot{\\theta}^2 + \\frac{1}{2} I_r (\\dot{\\theta}^2 + 2\\dot{\\theta}\\dot{\\alpha} + \\dot{\\alpha}^2) = \\frac{1}{2} (I_b + I_r)\\dot{\\theta}^2 + I_r \\dot{\\theta}\\dot{\\alpha} + \\frac{1}{2} I_r \\dot{\\alpha}^2 $$\n\n1.  **Derivation of the Riemannian metric $g$**\n\nThe kinetic energy induces a Riemannian metric $g$ on the configuration manifold $Q$ through the relation $T = \\frac{1}{2} g_q(v, v)$, where $q = (\\theta, \\alpha) \\in Q$ and $v = (\\dot{\\theta}, \\dot{\\alpha}) \\in T_qQ$. In the local coordinates $(\\theta, \\alpha)$, the metric $g$ can be represented by a matrix of its components $g_{ij}$ such that $T = \\frac{1}{2} \\sum_{i,j} g_{ij}\\dot{q}^i\\dot{q}^j$. By comparing this general form with our expression for $T$, we can directly identify the components of the metric tensor:\n$$ g_{\\theta\\theta} = I_b + I_r $$\n$$ g_{\\theta\\alpha} = g_{\\alpha\\theta} = I_r $$\n$$ g_{\\alpha\\alpha} = I_r $$\nTherefore, the matrix representation of the metric $g$ in the coordinate basis $\\{\\frac{\\partial}{\\partial\\theta}, \\frac{\\partial}{\\partial\\alpha}\\}$ is:\n$$ g = \\begin{pmatrix} I_b + I_r & I_r \\\\ I_r & I_r \\end{pmatrix} $$\nSince all components of $g$ are constants, the metric is independent of the configuration $q = (\\theta, \\alpha)$ and is thus invariant under the specified group action of $G = \\mathrm{SO}(2)$ on $\\theta$.\n\n2.  **Computation of the locked inertia tensor $\\mathbb{I}(q)$**\n\nThe Lie algebra of the group $G = \\mathrm{SO}(2)$ is $\\mathfrak{so}(2)$, which we identify with $\\mathbb{R}$. An element $\\xi \\in \\mathfrak{so}(2)$ is thus represented by a scalar $\\xi \\in \\mathbb{R}$. The group action on $Q$ is given by left translation on the first component: for a rotation by an angle $\\phi$ corresponding to an element of $\\mathrm{SO}(2)$, the action is $(\\theta, \\alpha) \\mapsto (\\theta + \\phi, \\alpha)$. The infinitesimal generator $\\xi_Q(q)$ for an element $\\xi \\in \\mathfrak{so}(2)$ is the vector field on $Q$ obtained by differentiating the action:\n$$ \\xi_Q(q) = \\frac{d}{dt}\\bigg|_{t=0} (\\theta + t\\xi, \\alpha) = (\\xi, 0) $$\nHere, $(\\xi, 0)$ is a tangent vector in $T_qQ$. The locked inertia tensor $\\mathbb{I}(q): \\mathfrak{so}(2) \\to \\mathfrak{so}(2)^*$ is defined by $\\langle \\mathbb{I}(q)\\xi, \\eta \\rangle = g_q(\\xi_Q(q), \\eta_Q(q))$ for all $\\xi, \\eta \\in \\mathfrak{so}(2)$. Using the identification $\\mathfrak{so}(2) \\cong \\mathbb{R}$, the pairing $\\langle \\cdot, \\cdot \\rangle$ becomes scalar multiplication.\nWe compute the inner product using the metric $g$:\n$$ g_q(\\xi_Q(q), \\eta_Q(q)) = g_q((\\xi, 0), (\\eta, 0)) = \\begin{pmatrix} \\xi & 0 \\end{pmatrix} \\begin{pmatrix} I_b + I_r & I_r \\\\ I_r & I_r \\end{pmatrix} \\begin{pmatrix} \\eta \\\\ 0 \\end{pmatrix} = (I_b + I_r)\\xi\\eta $$\nFrom the definition, we have $\\langle \\mathbb{I}(q)\\xi, \\eta \\rangle = (I_b + I_r)\\xi\\eta$. Since this must hold for all $\\eta$, we find that $\\mathbb{I}(q)\\xi = (I_b+I_r)\\xi$. As an operator on $\\mathfrak{so}(2) \\cong \\mathbb{R}$, $\\mathbb{I}(q)$ is multiplication by the scalar $(I_b + I_r)$. Thus, we identify the locked inertia tensor with this value:\n$$ \\mathbb{I}(q) = I_b + I_r $$\n\n3.  **Computation of the momentum map $J(q)$**\n\nThe momentum map $J(q): T_qQ \\to \\mathfrak{so}(2)^*$ is defined by $\\langle J(q)(v), \\xi \\rangle = g_q(v, \\xi_Q(q))$ for any $v \\in T_qQ$ and $\\xi \\in \\mathfrak{so}(2)$. Let $v = (\\dot{\\theta}, \\dot{\\alpha})$. We have $\\xi_Q(q) = (\\xi, 0)$.\nWe compute the inner product:\n$$ g_q(v, \\xi_Q(q)) = g_q((\\dot{\\theta}, \\dot{\\alpha}), (\\xi, 0)) = \\begin{pmatrix} \\dot{\\theta} & \\dot{\\alpha} \\end{pmatrix} \\begin{pmatrix} I_b + I_r & I_r \\\\ I_r & I_r \\end{pmatrix} \\begin{pmatrix} \\xi \\\\ 0 \\end{pmatrix} $$\n$$ = (\\dot{\\theta}(I_b+I_r) + \\dot{\\alpha}I_r)\\xi $$\nFrom the definition, we have $\\langle J(q)(v), \\xi \\rangle = ((I_b+I_r)\\dot{\\theta} + I_r\\dot{\\alpha})\\xi$. Since this holds for all $\\xi \\in \\mathfrak{so}(2)$, the momentum map $J(q)(v)$ is identified with the scalar value in $\\mathfrak{so}(2)^* \\cong \\mathbb{R}$:\n$$ J(q)(v) = (I_b + I_r)\\dot{\\theta} + I_r\\dot{\\alpha} $$\nThis value represents the total angular momentum of the system.\n\n4.  **Computation of the mechanical connection $A(q)$**\n\nThe mechanical connection $A(q): T_qQ \\to \\mathfrak{so}(2)$ is implicitly defined by the equation $\\mathbb{I}(q)A(q)(v) = J(q)(v)$. Since we are working with identifications to $\\mathbb{R}$, this is an algebraic equation for the scalar value of $A(q)(v)$. We substitute our expressions for $\\mathbb{I}(q)$ and $J(q)(v)$:\n$$ (I_b + I_r) A(q)(\\dot{\\theta}, \\dot{\\alpha}) = (I_b + I_r)\\dot{\\theta} + I_r\\dot{\\alpha} $$\nSolving for $A(q)(\\dot{\\theta}, \\dot{\\alpha})$ by dividing by the strictly positive locked inertia $\\mathbb{I}(q) = I_b + I_r$:\n$$ A(q)(\\dot{\\theta}, \\dot{\\alpha}) = \\frac{(I_b + I_r)\\dot{\\theta} + I_r\\dot{\\alpha}}{I_b + I_r} $$\nSimplifying the expression gives the final result for the mechanical connection:\n$$ A(q)(\\dot{\\theta}, \\dot{\\alpha}) = \\dot{\\theta} + \\frac{I_r}{I_b + I_r}\\dot{\\alpha} $$\nThis is the explicit coordinate expression for the mechanical connection evaluated on a tangent vector $v = (\\dot{\\theta}, \\dot{\\alpha})$.",
            "answer": "$$ \\boxed{\\dot{\\theta} + \\frac{I_r}{I_b + I_r}\\dot{\\alpha}} $$"
        },
        {
            "introduction": "A primary goal in studying nonholonomic systems is to understand the effective dynamics on the lower-dimensional shape space. This practice demonstrates the powerful technique of Chaplygin reduction, where the nonholonomic connection is used to eliminate the unactuated group velocities from the system's Lagrangian. By substituting the constraint equation into the full Lagrangian, you will derive the reduced or \"compressed\" Lagrangian, which encapsulates the dynamics, including the gyroscopic forces arising from the curvature of the connection, entirely in terms of shape variables and their velocities .",
            "id": "3766150",
            "problem": "Consider a mechanical Chaplygin system on the configuration manifold $Q = G \\times S$ where $G$ is the Special Orthogonal group $\\mathrm{SO}(2)$ acting freely and properly on $Q$, and the shape space $S = \\mathbb{R}^{2}$ with coordinates $s = (x,y)$. The system is endowed with a $\\mathrm{SO}(2)$-invariant Riemannian metric whose block form, in body coordinates $(\\xi,\\dot{s}) \\in \\mathbb{R} \\times \\mathbb{R}^{2}$ with $\\xi \\in \\mathfrak{so}(2) \\cong \\mathbb{R}$ the group velocity and $\\dot{s} = (\\dot{x},\\dot{y})$, yields the Lagrangian\n$$\nL(s,\\dot{s},\\xi) = \\frac{1}{2}\\,m(s)\\left(\\dot{x}^{2}+\\dot{y}^{2}\\right) + 2\\,\\xi\\,b(s)^{\\top}\\dot{s} + \\frac{1}{2}\\,J(s)\\,\\xi^{2} - V(s),\n$$\nwhere $m(s) = 1 + x^{2} + y^{2}$, $J(s) = 2 + x$, $b(s) = \\begin{pmatrix} y \\\\ x \\end{pmatrix}$, and $V(s) = x\\,y$. The nonholonomic constraint distribution $D \\subset TQ$ is defined by a linear velocity constraint identifying the horizontal subspace via the nonholonomic connection $A^{\\mathrm{nh}}(s)$, here specified by the condition\n$$\n\\xi + a(s)^{\\top}\\dot{s} = 0, \\quad \\text{with} \\quad a(s) = \\begin{pmatrix} x \\\\ 1 \\end{pmatrix}.\n$$\nThis encodes the nonholonomic connection $A^{\\mathrm{nh}}(s) = a(s)^{\\top}$ mapping shape velocities to the constrained group velocity. Assume $x > -1$ so that $J(s) > 1$ and the kinetic energy remains positive definite in the group direction.\n\nStarting from the foundational definitions of mechanical Lagrangians (kinetic energy minus potential), principal bundle reduction, and the role of the nonholonomic connection in defining the horizontal lift that eliminates the group velocity, derive the reduced (compressed) Lagrangian $L_{c}(s,\\dot{s})$ on the shape space by eliminating $\\xi$ using the constraint $\\xi = -a(s)^{\\top}\\dot{s}$. Express your final answer as a single closed-form analytic expression in terms of $x$, $y$, $\\dot{x}$, and $\\dot{y}$ only. No rounding is required, and no units are involved.",
            "solution": "The objective is to derive the reduced Lagrangian, or compressed Lagrangian, $L_{c}(s,\\dot{s})$, which describes the dynamics on the shape space $S = \\mathbb{R}^2$. This is achieved by using the nonholonomic constraint to eliminate the group velocity $\\xi$ from the full Lagrangian $L(s,\\dot{s},\\xi)$.\n\nThe given full Lagrangian is:\n$$L(s,\\dot{s},\\xi) = \\frac{1}{2}\\,m(s)\\left(\\dot{x}^{2}+\\dot{y}^{2}\\right) + 2\\,\\xi\\,b(s)^{\\top}\\dot{s} + \\frac{1}{2}\\,J(s)\\,\\xi^{2} - V(s)$$\nThe nonholonomic constraint is given by the linear equation:\n$$\\xi + a(s)^{\\top}\\dot{s} = 0$$\nFrom this constraint, we solve for the group velocity $\\xi$:\n$$\\xi = -a(s)^{\\top}\\dot{s}$$\nThe compressed Lagrangian $L_c(s,\\dot{s})$ is obtained by substituting this expression for $\\xi$ back into the full Lagrangian $L(s,\\dot{s},\\xi)$:\n$$L_c(s,\\dot{s}) = L(s,\\dot{s},\\xi)\\big|_{\\xi = -a(s)^{\\top}\\dot{s}}$$\n$$L_c(s,\\dot{s}) = \\frac{1}{2}\\,m(s)(\\dot{x}^{2}+\\dot{y}^{2}) + 2(-a(s)^{\\top}\\dot{s})b(s)^{\\top}\\dot{s} + \\frac{1}{2}\\,J(s)(-a(s)^{\\top}\\dot{s})^{2} - V(s)$$\n$$L_c(s,\\dot{s}) = \\frac{1}{2}\\,m(s)(\\dot{x}^{2}+\\dot{y}^{2}) - 2(a(s)^{\\top}\\dot{s})(b(s)^{\\top}\\dot{s}) + \\frac{1}{2}\\,J(s)(a(s)^{\\top}\\dot{s})^{2} - V(s)$$\nNow, we must evaluate the scalar products involving the vectors $a(s)$, $b(s)$, and the shape velocity $\\dot{s} = \\begin{pmatrix} \\dot{x} \\\\ \\dot{y} \\end{pmatrix}$.\nThe given vectors are $a(s) = \\begin{pmatrix} x \\\\ 1 \\end{pmatrix}$ and $b(s) = \\begin{pmatrix} y \\\\ x \\end{pmatrix}$.\nThe scalar products are:\n$$a(s)^{\\top}\\dot{s} = x\\dot{x} + \\dot{y}$$\n$$b(s)^{\\top}\\dot{s} = y\\dot{x} + x\\dot{y}$$\nSubstituting these into the expression for $L_c(s,\\dot{s})$:\n$$L_c(s,\\dot{s}) = \\frac{1}{2}\\,m(s)(\\dot{x}^{2}+\\dot{y}^{2}) - 2(x\\dot{x} + \\dot{y})(y\\dot{x} + x\\dot{y}) + \\frac{1}{2}\\,J(s)(x\\dot{x} + \\dot{y})^{2} - V(s)$$\nNext, we substitute the given functions $m(s) = 1 + x^{2} + y^{2}$, $J(s) = 2 + x$, and $V(s) = x\\,y$:\n$$L_c(s,\\dot{s}) = \\frac{1}{2}(1 + x^{2} + y^{2})(\\dot{x}^{2}+\\dot{y}^{2}) - 2(x\\dot{x} + \\dot{y})(y\\dot{x} + x\\dot{y}) + \\frac{1}{2}(2 + x)(x\\dot{x} + \\dot{y})^{2} - x\\,y$$\nWe now expand the terms quadratic in the velocities:\nThe second term:\n$$ -2(x\\dot{x} + \\dot{y})(y\\dot{x} + x\\dot{y}) = -2(xy\\dot{x}^{2} + x^{2}\\dot{x}\\dot{y} + y\\dot{x}\\dot{y} + x\\dot{y}^{2}) = -2xy\\dot{x}^{2} - 2(x^{2}+y)\\dot{x}\\dot{y} - 2x\\dot{y}^{2} $$\nThe third term:\n$$ \\frac{1}{2}(2 + x)(x\\dot{x} + \\dot{y})^{2} = \\frac{1}{2}(2 + x)(x^{2}\\dot{x}^{2} + 2x\\dot{x}\\dot{y} + \\dot{y}^{2}) = \\frac{1}{2}(2+x)x^{2}\\dot{x}^{2} + (2+x)x\\dot{x}\\dot{y} + \\frac{1}{2}(2+x)\\dot{y}^{2} $$\nNow we combine all parts of the Lagrangian and collect coefficients for $\\dot{x}^{2}$, $\\dot{y}^{2}$, and $\\dot{x}\\dot{y}$.\n\nThe total kinetic part of the compressed Lagrangian, $T_c(s, \\dot{s})$, is:\n$$ T_c = \\bigg(\\frac{1}{2}(1 + x^{2} + y^{2}) - 2xy + \\frac{1}{2}(2+x)x^{2}\\bigg)\\dot{x}^{2} + \\bigg(\\frac{1}{2}(1 + x^{2} + y^{2}) - 2x + \\frac{1}{2}(2+x)\\bigg)\\dot{y}^{2} + \\big(-2(x^{2}+y) + (2+x)x\\big)\\dot{x}\\dot{y} $$\nLet's simplify each coefficient.\n\nCoefficient of $\\dot{x}^{2}$:\n$$ \\frac{1}{2}(1 + x^{2} + y^{2}) - 2xy + \\frac{1}{2}(2x^{2} + x^{3}) = \\frac{1}{2} + \\frac{1}{2}x^{2} + \\frac{1}{2}y^{2} - 2xy + x^{2} + \\frac{1}{2}x^{3} = \\frac{1}{2}x^{3} + \\frac{3}{2}x^{2} - 2xy + \\frac{1}{2}y^{2} + \\frac{1}{2} $$\n$$ = \\frac{1}{2}(x^{3} + 3x^{2} - 4xy + y^{2} + 1) $$\nCoefficient of $\\dot{y}^{2}$:\n$$ \\frac{1}{2}(1 + x^{2} + y^{2}) - 2x + \\frac{1}{2}(2+x) = \\frac{1}{2} + \\frac{1}{2}x^{2} + \\frac{1}{2}y^{2} - 2x + 1 + \\frac{1}{2}x = \\frac{1}{2}x^{2} - \\frac{3}{2}x + \\frac{1}{2}y^{2} + \\frac{3}{2} $$\n$$ = \\frac{1}{2}(x^{2} - 3x + y^{2} + 3) $$\nCoefficient of $\\dot{x}\\dot{y}$:\n$$ -2(x^{2}+y) + (2+x)x = -2x^{2} - 2y + 2x + x^{2} = -x^{2} + 2x - 2y $$\nAssembling the full compressed Lagrangian $L_c = T_c - V$:\n$$ L_c(x,y,\\dot{x},\\dot{y}) = \\frac{1}{2}(x^{3} + 3x^{2} - 4xy + y^{2} + 1)\\dot{x}^{2} + \\frac{1}{2}(x^{2} - 3x + y^{2} + 3)\\dot{y}^{2} + (-x^{2} + 2x - 2y)\\dot{x}\\dot{y} - x\\,y $$\nThis is the final expression for the compressed Lagrangian on the shape space.",
            "answer": "$$\n\\boxed{\\frac{1}{2}(x^{3} + 3x^{2} - 4xy + y^{2} + 1)\\dot{x}^{2} + \\frac{1}{2}(x^{2} - 3x + y^{2} + 3)\\dot{y}^{2} + (-x^{2} + 2x - 2y)\\dot{x}\\dot{y} - xy}\n$$"
        }
    ]
}
{"hands_on_practices": [{"introduction": "A core objective in control design is ensuring a system operates safely within its physical limitations. It's not enough for a system to reach its target; the path it takes matters. This practice [@problem_id:1565442] provides a tangible example by modeling a robotic arm, where exceeding joint limits can cause damage. You will learn to translate a critical safety specification—a maximum allowable angle—into a required value for the damping ratio $\\zeta$, a fundamental parameter that shapes the system's transient response.", "problem": "A control system for a robotic arm's elbow joint is being designed. The joint is commanded to move from an initial resting angle of $\\theta_2(0) = 0^\\circ$ to a final target angle of $\\theta_{2,f} = 120^\\circ$. Due to mechanical limitations, the joint's absolute angle must not exceed a maximum physical limit of $\\theta_{max} = 150^\\circ$ at any point during the maneuver.\n\nThe angular position of the joint, $\\theta_2(t)$, for time $t \\ge 0$ is modeled by the response of a standard underdamped second-order system given by:\n$$ \\theta_2(t) = \\theta_{2,f} \\left[ 1 - \\frac{\\exp(-\\zeta \\omega_n t)}{\\sqrt{1-\\zeta^2}} \\sin(\\omega_d t + \\phi) \\right] $$\nwhere $\\omega_n$ is the natural frequency, $\\zeta$ is the damping ratio (with $0 < \\zeta < 1$), $\\omega_d = \\omega_n \\sqrt{1-\\zeta^2}$ is the damped natural frequency, and $\\phi = \\arccos(\\zeta)$ is the phase angle.\n\nThe damping ratio $\\zeta$ is a tunable parameter of the controller. To ensure the safety of the robotic arm, what is the minimum value of $\\zeta$ that guarantees the joint angle $\\theta_2(t)$ never exceeds the physical limit $\\theta_{max}$?\n\nExpress your answer as a numerical value rounded to three significant figures.", "solution": "We are given the underdamped second-order step response\n$$\n\\theta_{2}(t) = \\theta_{2,f} \\left[ 1 - \\frac{\\exp(-\\zeta \\omega_{n} t)}{\\sqrt{1-\\zeta^{2}}} \\sin(\\omega_{d} t + \\phi) \\right]\n$$\nwith $\\omega_{d} = \\omega_{n}\\sqrt{1-\\zeta^{2}}$ and $\\phi = \\arccos(\\zeta)$, for a step from $\\theta_{2}(0)=0$ to $\\theta_{2,f}=120^{\\circ}$. The safety constraint is $\\theta_{2}(t) \\le \\theta_{\\max} = 150^{\\circ}$ for all $t \\ge 0$.\n\nThe percent overshoot, $M_p$, for a standard second-order system is the maximum amount the response exceeds its final value, normalized by the final value. The peak value of the response is $\\theta_{2,peak} = \\theta_{2,f}(1+M_p)$. The constraint $\\theta_{2}(t) \\le \\theta_{\\max}$ means we must have $\\theta_{2,peak} \\le \\theta_{\\max}$.\n$$\n\\theta_{2,f}(1+M_p) \\le \\theta_{\\max}\n$$\nThis gives the maximum allowable overshoot:\n$$\nM_p \\le \\frac{\\theta_{\\max} - \\theta_{2,f}}{\\theta_{2,f}}\n$$\nPlugging in the given values $\\theta_{2,f} = 120^{\\circ}$ and $\\theta_{\\max} = 150^{\\circ}$:\n$$\nM_p \\le \\frac{150 - 120}{120} = \\frac{30}{120} = 0.25\n$$\nThe formula relating percent overshoot $M_p$ and damping ratio $\\zeta$ for an underdamped system is:\n$$\nM_p = \\exp\\left(-\\frac{\\zeta \\pi}{\\sqrt{1-\\zeta^2}}\\right)\n$$\nTo ensure safety, we require $M_p \\le 0.25$. Since $M_p$ decreases as $\\zeta$ increases, the minimum required damping ratio $\\zeta_{min}$ occurs when $M_p$ is at its maximum allowed value, $0.25$.\n$$\n0.25 = \\exp\\left(-\\frac{\\zeta_{min} \\pi}{\\sqrt{1-\\zeta_{min}^2}}\\right)\n$$\nTo solve for $\\zeta_{min}$, we take the natural logarithm of both sides:\n$$\n\\ln(0.25) = -\\frac{\\zeta_{min} \\pi}{\\sqrt{1-\\zeta_{min}^2}}\n$$\n$$\n-\\ln(4) = -\\frac{\\zeta_{min} \\pi}{\\sqrt{1-\\zeta_{min}^2}}\n$$\n$$\n\\frac{\\zeta_{min} \\pi}{\\sqrt{1-\\zeta_{min}^2}} = \\ln(4)\n$$\nNow, we solve for $\\zeta_{min}$:\n$$\n\\frac{\\zeta_{min}}{\\sqrt{1-\\zeta_{min}^2}} = \\frac{\\ln(4)}{\\pi}\n$$\nSquaring both sides:\n$$\n\\frac{\\zeta_{min}^2}{1-\\zeta_{min}^2} = \\left(\\frac{\\ln(4)}{\\pi}\\right)^2\n$$\nLet $A = \\left(\\frac{\\ln(4)}{\\pi}\\right)^2$. Then $\\zeta_{min}^2 = A(1-\\zeta_{min}^2) = A - A\\zeta_{min}^2$.\n$$\n\\zeta_{min}^2(1+A) = A \\implies \\zeta_{min}^2 = \\frac{A}{1+A}\n$$\nSubstituting back for $A$:\n$$\n\\zeta_{min}^2 = \\frac{\\left(\\frac{\\ln 4}{\\pi}\\right)^2}{1 + \\left(\\frac{\\ln 4}{\\pi}\\right)^2} = \\frac{(\\ln 4)^2}{\\pi^2 + (\\ln 4)^2}\n$$\nTaking the square root for the positive value of $\\zeta_{min}$:\n$$\n\\zeta_{min} = \\frac{\\ln 4}{\\sqrt{\\pi^2 + (\\ln 4)^2}}\n$$\nUsing numerical values $\\ln(4) \\approx 1.38629$ and $\\pi \\approx 3.14159$:\n$$\n\\zeta_{min} \\approx \\frac{1.38629}{\\sqrt{(3.14159)^2 + (1.38629)^2}} = \\frac{1.38629}{\\sqrt{9.86960 + 1.92184}} = \\frac{1.38629}{\\sqrt{11.79144}} \\approx 0.4037\n$$\nRounding to three significant figures, the minimum required damping ratio is $0.404$.", "answer": "$$\\boxed{0.404}$$", "id": "1565442"}, {"introduction": "Engineering is fundamentally about trade-offs, and control systems are no exception. Achieving a faster response time often comes at the cost of higher energy consumption or greater stress on mechanical parts. This exercise [@problem_id:1565389] makes this trade-off explicit by asking you to quantify the \"cost\" of speed. By analyzing a simple mass-actuator system, you will derive a direct relationship between how fast the system is commanded to be (determined by its closed-loop pole locations) and the peak force the actuator must generate.", "problem": "A fundamental challenge in control systems engineering is managing the trade-off between speed of response and the required control effort. Consider a simplified model of a robotic actuator positioning a point mass $m$ on a one-dimensional frictionless track. The state of the system is described by the vector $\\mathbf{x}(t) = [x(t), v(t)]^T$, where $x(t)$ is the position of the mass and $v(t)$ is its velocity. The system's dynamics are governed by Newton's second law, $m\\ddot{x}(t) = u(t)$, where $u(t)$ is the force applied by the actuator.\n\nA state-feedback controller of the form $u(t) = -K\\mathbf{x}(t)$ is implemented to stabilize the mass at the origin ($\\mathbf{x} = [0, 0]^T$). The constant gain matrix $K = [k_1, k_2]$ is chosen using pole placement such that both poles of the closed-loop system are located at $s = -p$ on the real axis, where $p$ is a positive real constant that determines the speed of the system's response.\n\nSuppose the system is tasked with returning to the origin from an initial state of rest at a position $L$. That is, the initial conditions are $x(0) = L$ and $v(0) = 0$, where $L$ is a positive constant.\n\nDetermine a symbolic expression for the peak control force magnitude, $U_{\\text{max}} = \\max_{t \\ge 0} |u(t)|$, required to execute this maneuver. Express your answer in terms of the system parameters $m$, $L$, and $p$.", "solution": "The plant dynamics are $m\\ddot{x}(t) = u(t)$, or $\\ddot{x}(t) = u(t)/m$.\nUsing the state vector $\\mathbf{x}(t) = [x(t), \\dot{x}(t)]^T$ and the state-feedback law $u(t) = -K\\mathbf{x}(t) = -k_1 x(t) - k_2 \\dot{x}(t)$, the closed-loop dynamics become:\n$$ m\\ddot{x}(t) = -k_1 x(t) - k_2 \\dot{x}(t) $$\n$$ \\ddot{x}(t) + \\frac{k_2}{m} \\dot{x}(t) + \\frac{k_1}{m} x(t) = 0 $$\nThe characteristic equation of this closed-loop system is $s^2 + \\frac{k_2}{m}s + \\frac{k_1}{m} = 0$.\n\nThe design objective is to place both closed-loop poles at $s = -p$. The desired characteristic equation is therefore $(s+p)^2 = s^2 + 2ps + p^2 = 0$.\nBy comparing coefficients, we find the required gains:\n$$ \\frac{k_2}{m} = 2p \\implies k_2 = 2mp $$\n$$ \\frac{k_1}{m} = p^2 \\implies k_1 = mp^2 $$\nThe control law is $u(t) = -mp^2 x(t) - 2mp \\dot{x}(t)$.\n\nThe system is critically damped with the equation of motion $\\ddot{x}(t) + 2p\\dot{x}(t) + p^2 x(t) = 0$. The general solution is $x(t) = (C_1 + C_2 t)e^{-pt}$.\nWe apply the initial conditions $x(0)=L$ and $\\dot{x}(0)=0$.\n$x(0) = L \\implies (C_1 + 0)e^0 = L \\implies C_1 = L$.\nThe velocity is $\\dot{x}(t) = C_2 e^{-pt} - p(C_1 + C_2 t)e^{-pt}$.\n$\\dot{x}(0) = 0 \\implies C_2 e^0 - p(C_1 + 0)e^0 = 0 \\implies C_2 - pC_1 = 0 \\implies C_2 = pL$.\nSo, the trajectory is:\n$$ x(t) = (L + pLt)e^{-pt} = L(1+pt)e^{-pt} $$\nAnd the velocity is:\n$$ \\dot{x}(t) = pLe^{-pt} - p(L+pLt)e^{-pt} = -p^2Lt e^{-pt} $$\nNow, substitute these into the control law expression:\n$$ u(t) = -mp^2 \\big( L(1+pt)e^{-pt} \\big) - 2mp \\big( -p^2Lt e^{-pt} \\big) $$\n$$ u(t) = -mp^2 L e^{-pt} (1+pt) + 2mp^3 L t e^{-pt} $$\n$$ u(t) = -mp^2 L e^{-pt} [ (1+pt) - 2pt ] $$\n$$ u(t) = -mp^2 L (1-pt) e^{-pt} $$\nWe want to find the maximum magnitude of this control force, $U_{\\text{max}} = \\max_{t \\ge 0} |u(t)|$.\n$|u(t)| = mp^2 L |1-pt|e^{-pt}$.\nAt $t=0$, $|u(0)| = mp^2 L |1-0|e^0 = mp^2L$.\nTo find other extrema, we can check the derivative of $|u(t)|$. Let $f(t) = |u(t)|$.\nFor $0 \\le t  1/p$, $f(t) = mp^2L(1-pt)e^{-pt}$.\n$f'(t) = mp^2L[-pe^{-pt} -p(1-pt)e^{-pt}] = -p \\cdot mp^2L e^{-pt}[1 + (1-pt)] = -p \\cdot mp^2L e^{-pt}(2-pt)$.\nFor $t > 1/p$, $f(t) = mp^2L(pt-1)e^{-pt}$.\n$f'(t) = mp^2L[pe^{-pt} -p(pt-1)e^{-pt}] = p \\cdot mp^2L e^{-pt}[1 - (pt-1)] = p \\cdot mp^2L e^{-pt}(2-pt)$.\nIn both cases, the derivative is zero when $t=2/p$. At this time, the force is $u(2/p) = -mp^2L(1-2)e^{-2} = mp^2Le^{-2}$.\nThe magnitude is $|u(2/p)| = mp^2Le^{-2}$.\nSince $e^{-2}  1$, the value at $t=2/p$ is smaller than the value at $t=0$.\nThe maximum magnitude of the control force occurs at the initial time $t=0$.\n$$ U_{\\text{max}} = |u(0)| = mp^2 L $$", "answer": "$$\\boxed{mp^2 L}$$", "id": "1565389"}, {"introduction": "Beyond following setpoints, a crucial role for control systems is to reject unwanted external disturbances. This practice [@problem_id:1565393] shifts our perspective from the time domain to the frequency domain to analyze a system's robustness. Using the practical scenario of a distillation column, you will evaluate how the system reacts to variations in its input stream. The goal is to calculate the worst-case amplification from a disturbance to the controller's output, a key performance measure that helps prevent actuator saturation and ensures stable operation in a noisy environment.", "problem": "In the control of a chemical distillation column, the controller output signal $u(t)$, which manipulates the reboiler heat duty, must be kept within physical limits to prevent actuator saturation. A primary cause of large controller action is a disturbance in the feed composition, $d(t)$. To design a robust controller, it is crucial to quantify the worst-case amplification from this disturbance to the controller output. This is captured by the peak magnitude of the frequency response of the transfer function from the disturbance to the controller output.\n\nConsider a feedback control system for the distillation column with the following components and models, where $s$ is the Laplace variable:\n- The process transfer function from the controller output $U(s)$ to the measured product composition $Y(s)$ is given by a first-order model:\n$$P(s) = \\frac{Y(s)}{U(s)} = \\frac{K_p}{\\tau_p s + 1}$$\n- The disturbance transfer function, relating the feed composition disturbance $D(s)$ to the product composition $Y(s)$, is given by:\n$$G_d(s) = \\frac{K_d}{\\tau_d s + 1}$$\n- A Proportional-Integral (PI) controller is used:\n$$C(s) = K_c \\left(1 + \\frac{1}{\\tau_I s}\\right)$$\n\nThe system is configured in a standard feedback loop where the total output is $Y(s) = P(s)U(s) + G_d(s)D(s)$ and the controller action is $U(s) = C(s)(R(s) - Y(s))$, with $R(s)$ being the setpoint. For the purpose of analyzing disturbance rejection, the setpoint is considered constant, i.e., $R(s)=0$.\n\nAssume the following numerical values for the system parameters:\n- Process gain, $K_p = 2.0$ (dimensionless)\n- Process time constant, $\\tau_p = 5.0$ s\n- Disturbance gain, $K_d = 2.0$ (dimensionless)\n- Disturbance time constant, $\\tau_d = 5.0$ s\n- Controller gain, $K_c = 2.5$\n- Integral time, $\\tau_I = 4.0$ s\n\nYour task is to calculate the peak magnitude (the $H_{\\infty}$ norm) of the transfer function $T_{ud}(s) = U(s)/D(s)$. Your answer, which is a dimensionless quantity, should be rounded to four significant figures.", "solution": "For disturbance rejection analysis, we set the setpoint $R(s)=0$. The closed-loop equations are:\n$$ Y(s) = P(s)U(s) + G_{d}(s)D(s) $$\n$$ U(s) = -C(s)Y(s) $$\nSubstitute the first equation into the second:\n$$ U(s) = -C(s) [P(s)U(s) + G_d(s)D(s)] $$\n$$ U(s) = -C(s)P(s)U(s) - C(s)G_d(s)D(s) $$\n$$ U(s) (1 + C(s)P(s)) = -C(s)G_d(s)D(s) $$\nThe desired transfer function $T_{ud}(s) = U(s)/D(s)$ is:\n$$ T_{ud}(s) = -\\frac{C(s)G_d(s)}{1 + P(s)C(s)} $$\nNow, substitute the given expressions for $P(s)$, $C(s)$, and $G_d(s)$:\n$P(s) = \\frac{K_p}{\\tau_p s + 1}$, $G_d(s) = \\frac{K_d}{\\tau_d s + 1}$, and $C(s) = K_c\\frac{\\tau_I s + 1}{\\tau_I s}$.\nThe loop transfer function is $P(s)C(s) = \\frac{K_p K_c (\\tau_I s + 1)}{\\tau_I s (\\tau_p s + 1)}$.\n$$ T_{ud}(s) = -\\frac{K_c \\frac{\\tau_I s+1}{\\tau_I s} \\cdot \\frac{K_d}{\\tau_d s+1}}{1 + \\frac{K_p K_c(\\tau_I s+1)}{\\tau_I s (\\tau_p s+1)}} = -\\frac{\\frac{K_c K_d (\\tau_I s+1)}{\\tau_I s (\\tau_d s+1)}}{\\frac{\\tau_I s (\\tau_p s+1) + K_p K_c(\\tau_I s+1)}{\\tau_I s (\\tau_p s+1)}} $$\n$$ T_{ud}(s) = - \\frac{K_c K_d (\\tau_I s+1) (\\tau_p s+1)}{(\\tau_d s+1)[\\tau_I s (\\tau_p s+1) + K_p K_c(\\tau_I s+1)]} $$\nSubstitute the numerical values: $K_p=2$, $\\tau_p=5$, $K_d=2$, $\\tau_d=5$, $K_c=2.5$, $\\tau_I=4$.\nNote that $\\tau_p = \\tau_d = 5$. The term $(5s+1)$ will cancel.\n$K_p K_c = 2.0 \\times 2.5 = 5.0$.\n$K_c K_d = 2.5 \\times 2.0 = 5.0$.\n$$ T_{ud}(s) = - \\frac{5 (4s+1)(5s+1)}{(5s+1)[4s(5s+1) + 5(4s+1)]} = -\\frac{5(4s+1)}{4s(5s+1) + 5(4s+1)} $$\n$$ T_{ud}(s) = -\\frac{20s + 5}{20s^2 + 4s + 20s + 5} = -\\frac{20s + 5}{20s^2 + 24s + 5} $$\nTo find the peak magnitude, we evaluate $|T_{ud}(j\\omega)|$:\n$$ T_{ud}(j\\omega) = -\\frac{5 + 20j\\omega}{(5 - 20\\omega^2) + 24j\\omega} $$\nThe magnitude squared is:\n$$ |T_{ud}(j\\omega)|^2 = \\frac{5^2 + (20\\omega)^2}{(5-20\\omega^2)^2 + (24\\omega)^2} = \\frac{25 + 400\\omega^2}{25 - 200\\omega^2 + 400\\omega^4 + 576\\omega^2} = \\frac{25 + 400\\omega^2}{400\\omega^4 + 376\\omega^2 + 25} $$\nLet $x = \\omega^2 \\ge 0$. We want to find the maximum of $f(x) = \\frac{25 + 400x}{400x^2 + 376x + 25}$.\nDifferentiate with respect to $x$ and set to zero:\n$ f'(x) = \\frac{400(400x^2 + 376x + 25) - (25+400x)(800x+376)}{(400x^2 + 376x + 25)^2} = 0$.\nThe numerator must be zero:\n$ 400(400x^2 + 376x + 25) - (25+400x)(800x+376) = 0 $\n$ 160000x^2 + 150400x + 10000 - (20000x + 9400 + 320000x^2 + 150400x) = 0 $\n$ 160000x^2 + 150400x + 10000 - 320000x^2 - 170400x - 9400 = 0 $\n$ -160000x^2 - 20000x + 600 = 0 $\n$ 1600x^2 + 200x - 6 = 0 \\implies 800x^2 + 100x - 3 = 0 $\nUsing the quadratic formula: $x = \\frac{-100 \\pm \\sqrt{100^2 - 4(800)(-3)}}{2(800)} = \\frac{-100 \\pm \\sqrt{10000 + 9600}}{1600} = \\frac{-100 \\pm 140}{1600}$.\nThe positive solution is $x = \\frac{40}{1600} = \\frac{1}{40}$.\nSubstitute this value back into $f(x)$:\n$$ f_{max} = f\\left(\\frac{1}{40}\\right) = \\frac{25 + 400(\\frac{1}{40})}{400(\\frac{1}{40})^2 + 376(\\frac{1}{40}) + 25} = \\frac{25 + 10}{\\frac{400}{1600} + \\frac{376}{40} + 25} = \\frac{35}{0.25 + 9.4 + 25} = \\frac{35}{34.65} $$\nUsing fractions: $f_{max} = \\frac{35}{\\frac{1}{4} + \\frac{94}{10} + 25} = \\frac{35}{\\frac{1}{4} + \\frac{47}{5} + 25} = \\frac{35}{\\frac{5+188+500}{20}} = \\frac{35 \\cdot 20}{693} = \\frac{700}{693} = \\frac{100}{99}$.\nThe peak magnitude is the square root of this value:\n$$ \\|T_{ud}\\|_{\\infty} = \\sqrt{\\frac{100}{99}} = \\frac{10}{\\sqrt{99}} \\approx 1.0050378 $$\nRounding to four significant figures, the result is $1.005$.", "answer": "$$\\boxed{1.005}$$", "id": "1565393"}]}
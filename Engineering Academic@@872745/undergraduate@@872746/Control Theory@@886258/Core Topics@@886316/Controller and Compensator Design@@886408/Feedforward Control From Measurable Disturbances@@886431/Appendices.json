{"hands_on_practices": [{"introduction": "The core idea of feedforward control is to act before a disturbance can affect the system output. This first practice introduces this concept in its most fundamental form: canceling the long-term, steady-state error caused by a persistent disturbance. By working through this thermal control problem [@problem_id:1574107], you will derive the static feedforward gain based on the steady-state characteristics of the process and disturbance paths, a principle widely used in industrial process control.", "problem": "A high-precision thermal processing chamber is used for curing composites. The temperature within the chamber, represented by its Laplace transform $T(s)$, is controlled by adjusting the power supplied to a heating element, $P(s)$. The process dynamics are modeled by the transfer function:\n$$G_p(s) = \\frac{T(s)}{P(s)} = \\frac{K_p}{(\\tau_1 s + 1)(\\tau_2 s + 1)}$$\nwhere $K_p$ is the process gain, and $\\tau_1$ and $\\tau_2$ are the process time constants.\n\nA significant, measurable disturbance to the system is the periodic opening of an access door for sample insertion, which causes heat loss. The impact of this disturbance, represented by a signal $D(s)$, on the chamber temperature is described by the disturbance transfer function:\n$$G_d(s) = \\frac{T(s)}{D(s)} = \\frac{-K_d}{\\tau_d s + 1}$$\nwhere $K_d$ is the disturbance gain and $\\tau_d$ is the disturbance time constant. All constants $K_p, K_d, \\tau_1, \\tau_2, \\tau_d$ are positive real numbers.\n\nTo counteract the thermal drop from the door opening without waiting for feedback correction from the primary Proportional-Integral-Derivative (PID) controller, a feedforward control scheme is implemented. This scheme uses a measurement of the disturbance $D(s)$ to make a proactive adjustment to the heater power. The adjustment is determined by a simple static feedforward controller with a constant gain $K_{ff}$. The total power command sent to the heater is the sum of the primary controller's output and the feedforward controller's output, where the latter is given by $P_{ff}(s) = K_{ff} D(s)$.\n\nDetermine the analytical expression for the static feedforward gain, $K_{ff}$, that is theoretically required to perfectly cancel the steady-state temperature change caused by a sustained disturbance (e.g., the door being held open indefinitely). Express your answer in terms of the given parameters.", "solution": "The goal is to determine the static feedforward gain $K_{ff}$ that ensures the steady-state change in temperature due to a sustained disturbance is zero. The overall change in temperature, $T(s)$, is the sum of the change caused directly by the disturbance and the change caused by the feedforward control action.\n\nThe direct effect of the disturbance $D(s)$ on the temperature $T(s)$ is given by the disturbance transfer function $G_d(s)$:\n$$T_{direct}(s) = G_d(s) D(s)$$\n\nThe feedforward controller generates a power adjustment $P_{ff}(s) = K_{ff} D(s)$. This power adjustment affects the temperature via the process transfer function $G_p(s)$:\n$$T_{ff}(s) = G_p(s) P_{ff}(s) = G_p(s) K_{ff} D(s)$$\n\nThe total change in temperature due to the disturbance and the feedforward compensation is the sum of these two effects:\n$$T_{total}(s) = T_{direct}(s) + T_{ff}(s) = G_d(s) D(s) + G_p(s) K_{ff} D(s)$$\nWe can factor out $D(s)$ to find the total transfer function from the disturbance to the temperature:\n$$\\frac{T_{total}(s)}{D(s)} = G_d(s) + G_p(s) K_{ff}$$\n\nWe are interested in the steady-state response to a sustained disturbance. A sustained disturbance can be modeled as a step input of magnitude $d_0$, so its Laplace transform is $D(s) = \\frac{d_0}{s}$.\n\nThe Final Value Theorem allows us to find the steady-state value of a time-domain signal, $t(t)$, from its Laplace transform, $T(s)$, by computing $\\lim_{t \\to \\infty} t(t) = \\lim_{s \\to 0} s T(s)$.\n\nApplying the Final Value Theorem to find the steady-state temperature change, $T_{ss}$:\n$$T_{ss} = \\lim_{s \\to 0} s T_{total}(s) = \\lim_{s \\to 0} s \\left( G_d(s) + G_p(s) K_{ff} \\right) D(s)$$\nSubstituting $D(s) = \\frac{d_0}{s}$:\n$$T_{ss} = \\lim_{s \\to 0} s \\left( G_d(s) + G_p(s) K_{ff} \\right) \\frac{d_0}{s}$$\nThe $s$ terms cancel out:\n$$T_{ss} = d_0 \\lim_{s \\to 0} \\left( G_d(s) + G_p(s) K_{ff} \\right)$$\n$$T_{ss} = d_0 \\left( \\lim_{s \\to 0} G_d(s) + \\left(\\lim_{s \\to 0} G_p(s)\\right) K_{ff} \\right)$$\n\nThe term $\\lim_{s \\to 0} G(s)$ is the steady-state or DC gain of a stable transfer function $G(s)$, which we can denote as $G(0)$. So, the expression becomes:\n$$T_{ss} = d_0 \\left( G_d(0) + G_p(0) K_{ff} \\right)$$\n\nFor perfect steady-state cancellation, we require $T_{ss} = 0$. Since the disturbance magnitude $d_0$ is non-zero, this implies:\n$$G_d(0) + G_p(0) K_{ff} = 0$$\nSolving for $K_{ff}$:\n$$K_{ff} = - \\frac{G_d(0)}{G_p(0)}$$\n\nNow, we must calculate the DC gains for the given transfer functions.\nFor the process transfer function:\n$$G_p(s) = \\frac{K_p}{(\\tau_1 s + 1)(\\tau_2 s + 1)}$$\n$$G_p(0) = \\lim_{s \\to 0} \\frac{K_p}{(\\tau_1 s + 1)(\\tau_2 s + 1)} = \\frac{K_p}{(\\tau_1 \\cdot 0 + 1)(\\tau_2 \\cdot 0 + 1)} = \\frac{K_p}{1 \\cdot 1} = K_p$$\n\nFor the disturbance transfer function:\n$$G_d(s) = \\frac{-K_d}{\\tau_d s + 1}$$\n$$G_d(0) = \\lim_{s \\to 0} \\frac{-K_d}{\\tau_d s + 1} = \\frac{-K_d}{\\tau_d \\cdot 0 + 1} = -K_d$$\n\nFinally, we substitute these DC gains into the expression for $K_{ff}$:\n$$K_{ff} = - \\frac{-K_d}{K_p}$$\n$$K_{ff} = \\frac{K_d}{K_p}$$\nThis is the required static feedforward gain.", "answer": "$$\\boxed{\\frac{K_d}{K_p}}$$", "id": "1574107"}, {"introduction": "While steady-state rejection is useful, the ideal goal is often to eliminate the disturbance's effect entirely. This exercise [@problem_id:1559910] explores the design of an ideal dynamic feedforward controller that achieves perfect cancellation. By comparing two scenarios where the disturbance enters the system at different points, you will discover how the system's structure fundamentally alters the required control law.", "problem": "Consider a unity negative feedback control system where the output is $Y(s)$, the reference input is $R(s)$, the plant is described by the transfer function $G(s)$, and the main feedback controller is a Proportional-Integral (PI) controller with transfer function $C(s)$. A measurable disturbance, $D(s)$, affects the system, and a feedforward controller, $F(s)$, is implemented to achieve perfect disturbance rejection, meaning the output $Y(s)$ is rendered completely independent of $D(s)$. The feedforward path originates from a pickoff point on $D(s)$, passes through $F(s)$, and its output is arithmetically added to the output of the PI controller, $C(s)$.\n\nWe analyze two different scenarios based on where the disturbance $D(s)$ enters the control loop.\n\n**Scenario 1:** The disturbance $D(s)$ acts as an input disturbance. The signal that enters the PI controller $C(s)$ is the sum of the error signal, $E(s) = R(s) - Y(s)$, and the disturbance $D(s)$. The signal that enters the plant $G(s)$ is the sum of the output of $C(s)$ and the output of the feedforward controller $F(s)$. Let the required feedforward controller for perfect disturbance rejection in this case be $F_1(s)$.\n\n**Scenario 2:** The disturbance $D(s)$ acts as a load disturbance. The signal that enters the PI controller $C(s)$ is solely the error signal $E(s)$. The signal that enters the plant $G(s)$ is the sum of three signals: the output of $C(s)$, the output of the feedforward controller $F(s)$, and the disturbance $D(s)$. Let the required feedforward controller for perfect disturbance rejection in this case be $F_2(s)$.\n\nAssuming the plant transfer function $G(s)$ is not identically zero, determine the analytical expression for the ratio of the two feedforward controllers, $\\frac{F_2(s)}{F_1(s)}$.", "solution": "Let the loop be unity negative feedback so that the error is $E(s)=R(s)-Y(s)$, the controller is $C(s)$, the plant is $G(s)$, and the feedforward is $F(s)$ driven by the measurable disturbance $D(s)$ and summed with the controller output at the plant input.\n\nScenario 1 (input disturbance at controller input): The input to the controller is $E(s)+D(s)$, hence the controller output is $C(s)\\big(E(s)+D(s)\\big)$, and the feedforward output is $F(s)D(s)$. The plant input is\n$$U(s)=C(s)\\big(E(s)+D(s)\\big)+F(s)D(s).$$\nThe output is\n$$Y(s)=G(s)U(s)=G(s)\\Big(C(s)E(s)+\\big(C(s)+F(s)\\big)D(s)\\Big).$$\nUsing $E(s)=R(s)-Y(s)$ gives\n$$Y(s)=G(s)C(s)\\big(R(s)-Y(s)\\big)+G(s)\\big(C(s)+F(s)\\big)D(s).$$\nCollecting $Y(s)$ terms,\n$$(1+G(s)C(s))\\,Y(s)=G(s)C(s)R(s)+G(s)\\big(C(s)+F(s)\\big)D(s).$$\nThus\n$$Y(s)=\\frac{G(s)C(s)}{1+G(s)C(s)}\\,R(s)+\\frac{G(s)\\big(C(s)+F(s)\\big)}{1+G(s)C(s)}\\,D(s).$$\nPerfect disturbance rejection requires the coefficient of $D(s)$ to be zero. Since $G(s)$ is not identically zero,\n$$C(s)+F_{1}(s)=0\\quad\\Rightarrow\\quad F_{1}(s)=-C(s).$$\n\nScenario 2 (load disturbance at plant input): The controller input is $E(s)$ only, so the controller output is $C(s)E(s)$, while the feedforward and disturbance add at the plant input, giving\n$$U(s)=C(s)E(s)+F(s)D(s)+D(s)=C(s)E(s)+\\big(F(s)+1\\big)D(s).$$\nThe output is\n$$Y(s)=G(s)U(s)=G(s)\\Big(C(s)E(s)+\\big(F(s)+1\\big)D(s)\\Big).$$\nWith $E(s)=R(s)-Y(s)$,\n$$Y(s)=G(s)C(s)\\big(R(s)-Y(s)\\big)+G(s)\\big(F(s)+1\\big)D(s).$$\nCollecting $Y(s)$ terms,\n$$(1+G(s)C(s))\\,Y(s)=G(s)C(s)R(s)+G(s)\\big(F(s)+1\\big)D(s).$$\nThus\n$$Y(s)=\\frac{G(s)C(s)}{1+G(s)C(s)}\\,R(s)+\\frac{G(s)\\big(F(s)+1\\big)}{1+G(s)C(s)}\\,D(s).$$\nPerfect disturbance rejection requires the coefficient of $D(s)$ to be zero. Since $G(s)$ is not identically zero,\n$$F_{2}(s)+1=0\\quad\\Rightarrow\\quad F_{2}(s)=-1.$$\n\nTherefore, the ratio of the two required feedforward controllers is\n$$\\frac{F_{2}(s)}{F_{1}(s)}=\\frac{-1}{-C(s)}=\\frac{1}{C(s)}.$$", "answer": "$$\\boxed{\\frac{1}{C(s)}}$$", "id": "1559910"}, {"introduction": "Theoretical 'ideal' controllers can sometimes be impossible to build in reality, particularly if the system has non-minimum phase dynamics. This advanced practice [@problem_id:1575797] confronts this crucial issue, tasking you with designing a stable and realizable feedforward controller for a quadcopter with a slung load. You will learn a standard engineering technique to approximate the ideal unstable controller with a practical one that effectively rejects disturbances without destabilizing the system.", "problem": "A quadcopter is employed to transport a sensitive payload suspended by a cable. To counteract the effects of atmospheric disturbances, the quadcopter is equipped with an anemometer that provides real-time measurements of lateral wind gusts. The objective is to design a feedforward controller that uses this wind data to actively stabilize the payload.\n\nLet $\\theta(t)$ be the swing angle of the payload from the vertical, which is the system output to be minimized. The control input, $u(t)$, is the lateral acceleration commanded to the quadcopter. The measured disturbance, $d(t)$, is the lateral wind speed. All initial conditions are assumed to be zero.\n\nThe system dynamics are described by the following linearized transfer functions in the Laplace domain:\n\n1.  The process transfer function, $G_p(s)$, from the quadcopter's commanded acceleration $U(s) = \\mathcal{L}\\{u(t)\\}$ to the payload's swing angle $\\Theta(s) = \\mathcal{L}\\{\\theta(t)\\}$ is given by:\n    $$G_p(s) = \\frac{K_p (1 - T_z s)}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2}$$\n    This model captures the essential pendulum-like dynamics and includes a non-minimum phase zero, a characteristic of such underactuated aerial manipulation systems.\n\n2.  The disturbance transfer function, $G_d(s)$, from the wind speed disturbance $D(s) = \\mathcal{L}\\{d(t)\\}$ to the payload's swing angle $\\Theta(s)$ is given by:\n    $$G_d(s) = \\frac{K_d}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2}$$\n\nHere, $K_p$, $K_d$, $T_z$, $\\zeta$, and $\\omega_n$ are all positive real constants representing the physical parameters of the system.\n\nYour task is to determine the transfer function of a stable and proper feedforward controller, $G_{ff}(s)$, that takes the measured disturbance $D(s)$ as input to generate the control signal $U(s)$. The controller should be designed to minimize the effect of the wind gust on the payload's swing angle. Provide the analytic expression for $G_{ff}(s)$ in terms of the given parameters.", "solution": "With zero initial conditions and using Laplace transforms, the payload angle satisfies\n$$\n\\Theta(s)=G_{p}(s)\\,U(s)+G_{d}(s)\\,D(s).\n$$\nIf the feedforward controller uses the measured disturbance as $U(s)=G_{ff}(s)\\,D(s)$, then the closed-loop disturbance-to-output map becomes\n$$\n\\frac{\\Theta(s)}{D(s)}=G_{p}(s)\\,G_{ff}(s)+G_{d}(s).\n$$\nThe ideal disturbance cancellation condition is\n$$\nG_{p}(s)\\,G_{ff}^{\\text{ideal}}(s)+G_{d}(s)=0\n\\quad\\Rightarrow\\quad\nG_{ff}^{\\text{ideal}}(s)=-\\frac{G_{d}(s)}{G_{p}(s)}.\n$$\nUsing the given transfer functions,\n$$\nG_{p}(s)=\\frac{K_{p}\\left(1-T_{z}s\\right)}{s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}},\n\\qquad\nG_{d}(s)=\\frac{K_{d}}{s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}},\n$$\nyields\n$$\nG_{ff}^{\\text{ideal}}(s)=-\\frac{K_{d}}{K_{p}\\left(1-T_{z}s\\right)}.\n$$\nBecause $T_{z}>0$, the factor $\\left(1-T_{z}s\\right)^{-1}$ has a pole at $s=1/T_{z}$ in the right half-plane, so $G_{ff}^{\\text{ideal}}(s)$ is unstable and thus not implementable.\n\nTo obtain a stable and proper approximation that preserves low-frequency disturbance rejection while avoiding inversion of the non-minimum-phase zero, replace the unstable factor by its stable mirror, that is,\n$$\n\\frac{1}{1-T_{z}s}\\;\\leadsto\\;\\frac{1}{1+T_{z}s}.\n$$\nTherefore, choose the stable, proper feedforward controller\n$$\nG_{ff}(s)=-\\frac{K_{d}}{K_{p}\\left(1+T_{z}s\\right)}.\n$$\nThis controller is strictly proper and has a single pole at $s=-1/T_{z}$, hence is stable. The resulting residual disturbance-to-output map is\n$$\nG_{p}(s)G_{ff}(s)+G_{d}(s)\n=\n\\frac{K_{d}}{s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}}\n\\left[\n1-\\frac{1-T_{z}s}{1+T_{z}s}\n\\right]\n=\n\\frac{2K_{d}T_{z}s}{\\left(1+T_{z}s\\right)\\left(s^{2}+2\\zeta\\omega_{n}s+\\omega_{n}^{2}\\right)},\n$$\nwhich vanishes at $s=0$, ensuring cancellation of steady (low-frequency) wind components while maintaining stability and properness.", "answer": "$$\\boxed{-\\dfrac{K_{d}}{K_{p}\\left(1+T_{z}s\\right)}}$$", "id": "1575797"}]}
{"hands_on_practices": [{"introduction": "Understanding the body effect begins with quantifying its primary consequence: the change in the transistor's threshold voltage. This first practice [@problem_id:1339515] provides a direct scenario to calculate this change, $\\Delta V_{TH}$, using the fundamental body effect equation. By working through this problem, you will solidify your grasp of how a non-zero source-to-bulk voltage, $V_{SB}$, directly modulates the point at which the transistor begins to conduct.", "problem": "In a particular integrated circuit design, an N-channel Metal-Oxide-Semiconductor Field-Effect Transistor (NMOS) is employed as an active load. The circuit is powered by a supply voltage $V_{DD}$. Due to the specific biasing network, the source terminal of this NMOS transistor is held at a stable voltage of $V_S = V_{DD}/2$. The bulk terminal of the transistor is connected to the common ground reference, which is at 0 V. The transistor's fabrication process results in a body effect parameter $\\gamma$ and a surface potential parameter $2\\phi_F$. The threshold voltage of the transistor when the source-to-bulk voltage is zero is denoted by $V_{TH0}$.\n\nDetermine the increase in the threshold voltage, defined as $\\Delta V_{TH} = V_{TH} - V_{TH0}$, caused by this specific biasing arrangement. Express your answer as a closed-form analytic expression in terms of $\\gamma$, $V_{DD}$, and $2\\phi_F$.", "solution": "For an NMOS transistor with body effect, the threshold voltage under a source-to-bulk bias $V_{SB}$ is given by the standard body effect relation:\n$$\nV_{TH} = V_{TH0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_{SB}} - \\sqrt{2\\phi_{F}}\\right).\n$$\nBy definition, $V_{SB} = V_{S} - V_{B}$. In the given biasing, the source is held at $V_{S} = \\frac{V_{DD}}{2}$ and the bulk is at $V_{B} = 0$, hence\n$$\nV_{SB} = \\frac{V_{DD}}{2}.\n$$\nThe increase in threshold voltage due to body effect is\n$$\n\\Delta V_{TH} = V_{TH} - V_{TH0} = \\gamma\\left(\\sqrt{2\\phi_{F} + \\frac{V_{DD}}{2}} - \\sqrt{2\\phi_{F}}\\right).\n$$\nThis expression is in closed form in terms of $\\gamma$, $V_{DD}$, and $2\\phi_{F}$.", "answer": "$$\\boxed{\\gamma\\left(\\sqrt{2\\phi_{F}+\\frac{V_{DD}}{2}}-\\sqrt{2\\phi_{F}}\\right)}$$", "id": "1339515"}, {"introduction": "Having learned to calculate the shift in threshold voltage, the next step is to understand how this impacts the transistor's output characteristics. This exercise [@problem_id:1339521] explores the direct link between a change in $V_{TH}$ and the resulting change in drain current, $I_D$, for a device operating in saturation. This is a crucial step in appreciating how the body effect can alter the performance of circuits like current sources and amplifiers.", "problem": "An N-channel Metal-Oxide-Semiconductor Field-Effect Transistor (NMOSFET) is being used as a constant current source in an analog integrated circuit. Under normal operating conditions, the transistor is biased to operate in the saturation region. The source terminal of the transistor is connected to the circuit's ground reference (0 V), and initially, its p-type substrate (bulk terminal) is also tied to ground. However, due to transient noise from a nearby digital block, the voltage of the bulk terminal is momentarily pulled down to -1.0 V. All other terminal voltages (gate, drain, and source) remain constant during this event.\n\nYou are given the following device and operating parameters:\n- Gate-to-source voltage, $V_{GS} = 1.2$ V.\n- Process transconductance parameter, $k'_n = 200 \\, \\mu\\text{A}/\\text{V}^2$.\n- Transistor aspect ratio, $W/L = 10$.\n- Zero-bias threshold voltage, $V_{TH0} = 0.50$ V.\n- Body effect parameter, $\\gamma = 0.40 \\, \\text{V}^{1/2}$.\n- Surface potential parameter, $2\\phi_F = 0.70$ V.\n\nThe drain-to-source voltage, $V_{DS}$, is held at a sufficiently high constant value to ensure the transistor remains in the saturation region throughout the entire process.\n\nCalculate the change in the drain current, defined as $\\Delta I_D = I_{D,final} - I_{D,initial}$, that results from this change in the bulk voltage. Express your answer in microamperes ($\\mu$A) and round your final answer to three significant figures.", "solution": "For an NMOS transistor in saturation neglecting channel-length modulation, the drain current is given by\n$$\nI_{D}=\\frac{1}{2}k'_{n}\\frac{W}{L}\\left(V_{GS}-V_{TH}\\right)^{2},\n$$\nwhere the threshold voltage with body effect is\n$$\nV_{TH}=V_{TH0}+\\gamma\\left(\\sqrt{2\\phi_{F}+V_{SB}}-\\sqrt{2\\phi_{F}}\\right).\n$$\nWith the source at ground, $V_{SB}=V_{S}-V_{B}$. Initially $V_{B}=0$ so $V_{SB,initial}=0$, and during the disturbance $V_{B}=-1$ V so $V_{SB,final}=1$ V.\n\nCompute the thresholds:\n$$\nV_{TH,initial}=V_{TH0}=0.50 \\text{ V},\n$$\n$$\nV_{TH,final}=0.50+\\gamma\\left(\\sqrt{2\\phi_{F}+1}-\\sqrt{2\\phi_{F}}\\right)=0.50+0.40\\left(\\sqrt{0.70+1}-\\sqrt{0.70}\\right).\n$$\nNumerically,\n$$\n\\sqrt{1.70}\\approx 1.303840,\\quad \\sqrt{0.70}\\approx 0.836660,\n$$\nso\n$$\nV_{TH,final}\\approx 0.50+0.40\\left(1.303840-0.836660\\right)\\approx 0.686872 \\text{ V}.\n$$\n\nCompute the effective transconductance parameter:\n$$\nk_{n}=k'_{n}\\frac{W}{L}=200\\,\\mu\\text{A}/\\text{V}^{2}\\times 10=2000\\,\\mu\\text{A}/\\text{V}^{2}.\n$$\n\nWith $V_{GS}=1.2$ V, the initial and final drain currents are\n$$\nI_{D,initial}=\\frac{1}{2}\\cdot 2000\\,\\mu\\text{A}/\\text{V}^{2}\\cdot (1.2-0.50)^{2}=1000\\,\\mu\\text{A}/\\text{V}^{2}\\cdot 0.70^{2}=490\\,\\mu\\text{A},\n$$\n$$\nI_{D,final}=\\frac{1}{2}\\cdot 2000\\,\\mu\\text{A}/\\text{V}^{2}\\cdot (1.2-0.686872)^{2}=1000\\,\\mu\\text{A}/\\text{V}^{2}\\cdot (0.513128)^{2}\\approx 263.300\\,\\mu\\text{A}.\n$$\n\nTherefore, the change in drain current is\n$$\n\\Delta I_{D}=I_{D,final}-I_{D,initial}\\approx 263.300-490=-226.700\\,\\mu\\text{A}.\n$$\nRounded to three significant figures, this is $-227\\,\\mu\\text{A}$.", "answer": "$$\\boxed{-227}$$", "id": "1339521"}, {"introduction": "We now apply our understanding to a practical and common circuit configuration: the source follower. In this circuit, the output voltage is the source voltage, creating a situation where the body effect is inherently present and cannot be ignored for accurate analysis. This capstone problem [@problem_id:1339537] demonstrates the interdependence between circuit voltages and the body-effect-modulated threshold voltage, often requiring an iterative approach to find the correct DC operating point.", "problem": "An NMOS transistor is configured as a source follower to act as a DC voltage buffer. The gate of the transistor is connected to a fixed input voltage, $V_{in}$. The source terminal, which serves as the output $V_{out}$, is connected to ground through a source resistor $R_S$. The drain is connected to a power supply $V_{DD}$, and the transistor's substrate (body) is also tied to ground.\n\nAssume the transistor is operating in the saturation region. The drain current $I_D$ in this region is given by the equation $I_D = \\frac{1}{2} k_n' (\\frac{W}{L}) (V_{GS} - V_{TH})^2$, where $V_{GS}$ is the gate-to-source voltage and $V_{TH}$ is the threshold voltage. The threshold voltage itself is dependent on the source-to-body voltage, $V_{SB}$, according to the body effect equation: $V_{TH} = V_{TH0} + \\gamma (\\sqrt{2\\phi_f + V_{SB}} - \\sqrt{2\\phi_f})$.\n\nGiven the following parameters:\n- Power supply voltage, $V_{DD} = 5.0 \\text{ V}$\n- Input voltage, $V_{in} = 3.0 \\text{ V}$\n- Source resistance, $R_S = 5.0 \\text{ k}\\Omega$\n- Process transconductance parameter, $k_n' = 100 \\text{ } \\mu\\text{A/V}^2$\n- Transistor aspect ratio, $W/L = 10$\n- Zero-bias threshold voltage, $V_{TH0} = 0.70 \\text{ V}$\n- Body-effect parameter, $\\gamma = 0.40 \\text{ V}^{1/2}$\n- Surface potential, $2\\phi_f = 0.60 \\text{ V}$\n\nCalculate the final DC output voltage, $V_{out}$. Express your answer in volts (V), rounded to three significant figures.", "solution": "Let $V_{out}=V_{S}$, $V_{GS}=V_{in}-V_{S}$, and since the body is at ground, $V_{SB}=V_{S}$. In DC, the source resistor current equals the drain current, so\n$$\nI_{D}=\\frac{V_{S}}{R_{S}}.\n$$\nAssuming saturation, the MOSFET drain current is\n$$\nI_{D}=\\frac{1}{2}k\\left(V_{GS}-V_{TH}\\right)^{2},\\quad k=k_{n}'\\left(\\frac{W}{L}\\right),\n$$\nwith body effect\n$$\nV_{TH}=V_{TH0}+\\gamma\\left(\\sqrt{2\\phi_{f}+V_{SB}}-\\sqrt{2\\phi_{f}}\\right)=V_{TH0}+\\gamma\\left(\\sqrt{2\\phi_{f}+V_{S}}-\\sqrt{2\\phi_{f}}\\right).\n$$\nEquating currents gives\n$$\n\\frac{V_{S}}{R_{S}}=\\frac{1}{2}k\\left[V_{in}-V_{S}-V_{TH0}-\\gamma\\left(\\sqrt{2\\phi_{f}+V_{S}}-\\sqrt{2\\phi_{f}}\\right)\\right]^{2}.\n$$\nRearrange to\n$$\n\\left[V_{in}-V_{S}-V_{TH0}-\\gamma\\left(\\sqrt{2\\phi_{f}+V_{S}}-\\sqrt{2\\phi_{f}}\\right)\\right]^{2}=\\frac{2}{kR_{S}}V_{S}.\n$$\nDefine\n$$\na\\equiv V_{in}-V_{TH0}+\\gamma\\sqrt{2\\phi_{f}},\n$$\nso the left side becomes $\\left[a-V_{S}-\\gamma\\sqrt{2\\phi_{f}+V_{S}}\\right]^{2}$. With the given parameters,\n$$\nk=k_{n}'\\left(\\frac{W}{L}\\right)=\\left(100\\times 10^{-6}\\right)\\times 10=1.0\\times 10^{-3}\\ \\text{A/V}^{2},\\quad R_{S}=5.0\\times 10^{3}\\ \\Omega,\n$$\n$$\n\\sqrt{2\\phi_{f}}=\\sqrt{0.60},\\quad \\gamma\\sqrt{2\\phi_{f}}=0.40\\sqrt{0.60},\n$$\n$$\na=3.0-0.70+0.40\\sqrt{0.60} \\approx 2.6098,\n$$\nand\n$$\n\\frac{2}{kR_{S}}=\\frac{2}{(1.0\\times 10^{-3})(5.0\\times 10^{3})}=0.4.\n$$\nTaking the square root of the rearranged equation, we get\n$$\n\\sqrt{\\frac{2V_S}{kR_S}} = \\left[V_{in}-V_{S}-V_{TH0}-\\gamma\\left(\\sqrt{2\\phi_{f}+V_{S}}-\\sqrt{2\\phi_{f}}\\right)\\right].\n$$\nThis leads to a transcendental equation for $V_S$:\n$$\n\\sqrt{0.4 V_S} = 2.3 - V_S - 0.4\\left(\\sqrt{0.6+V_{S}}-\\sqrt{0.6}\\right).\n$$\nThis equation must be solved numerically or iteratively. Let's iterate, starting with an estimate for $V_S$. A good first guess is to ignore the body effect: $V_S \\approx V_{in} - V_{TH0} = 3.0 - 0.7 = 2.3$ V. This is too high as it doesn't account for the drop across $R_S$. A better guess might be $V_S \\approx 1.5$ V.\n\nLet's test $V_S = 1.33$ V.\nFirst, calculate $V_{TH}$ at this $V_S$:\n$V_{TH} = 0.70 + 0.40(\\sqrt{0.60 + 1.33} - \\sqrt{0.60}) = 0.70 + 0.40(\\sqrt{1.93} - \\sqrt{0.60}) \\approx 0.70 + 0.40(1.389 - 0.775) \\approx 0.946$ V.\nNow, calculate $I_D$ from the MOSFET equation:\n$V_{GS} = V_{in} - V_S = 3.0 - 1.33 = 1.67$ V.\n$I_D = \\frac{1}{2}(1 \\text{ mA/V}^2)(1.67 - 0.946)^2 = 0.5(0.724)^2 \\approx 0.262$ mA.\nFinally, calculate $I_D$ from Ohm's law on $R_S$:\n$I_D = V_S / R_S = 1.33 \\text{ V} / 5.0 \\text{ k}\\Omega = 0.266$ mA.\nThe two calculated currents, $0.262$ mA and $0.266$ mA, are very close. This confirms that $V_{out} = V_S \\approx 1.33$ V is the correct solution.\n\nTo be complete, check the saturation condition: $V_{DS} \\ge V_{GS} - V_{TH}$.\n$V_{DS} = V_{DD} - V_S = 5.0 - 1.33 = 3.67$ V.\n$V_{GS} - V_{TH} = 1.67 - 0.946 = 0.724$ V.\nSince $3.67 \\text{ V} > 0.724 \\text{ V}$, the transistor is indeed in saturation.\nThe DC output voltage is $V_{out} = 1.33$ V.", "answer": "$$\\boxed{1.33}$$", "id": "1339537"}]}
{"hands_on_practices": [{"introduction": "Before building complex circuits, it is crucial to understand the ultimate potential of a single transistor. This exercise explores the concept of intrinsic gain ($A_0$), which represents the maximum theoretical voltage gain achievable from one MOSFET. By deriving its expression, you will connect the transistor's ability to convert voltage to current ($g_m$) and its own output resistance ($r_o$) to fundamental process and design parameters [@problem_id:1319017]. This provides a vital benchmark for evaluating the performance of any amplifier you design.", "problem": "An engineer is designing an ultra-low-power amplifier for a sensor node in an Internet of Things (IoT) network. The amplifier's core consists of a single n-channel Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET). For the small-signal analysis to be valid, the MOSFET is biased to operate in its saturation region. To precisely manage power consumption, the device is biased with a specific gate-source overdrive voltage, defined as $V_{OV} = V_{GS} - V_{th}$, where $V_{GS}$ is the gate-source voltage and $V_{th}$ is the threshold voltage. The fabrication process for this MOSFET is characterized by an Early voltage, $V_A$, which accounts for the channel-length modulation effect.\n\nAssume the transistor's drain current in saturation is accurately described by the square-law model and that the body effect is negligible. The ultimate limit on the voltage gain achievable with this single transistor configuration is its intrinsic gain, $A_0$.\n\nDerive a symbolic expression for the intrinsic gain $A_0$ in terms of the Early voltage $V_A$ and the overdrive voltage $V_{OV}$.", "solution": "For a MOSFET in saturation under the square-law model with negligible body effect, the drain current (ignoring channel-length modulation) is\n$$\nI_{D}=\\frac{1}{2}k_{n}\\left(V_{OV}\\right)^{2},\n$$\nwhere $k_{n}$ is the process transconductance parameter and $V_{OV}=V_{GS}-V_{th}$.\n\nThe small-signal transconductance is defined as $g_{m}=\\partial I_{D}/\\partial V_{GS}$ at fixed $V_{DS}$. Using $V_{OV}=V_{GS}-V_{th}$, one has\n$$\ng_{m}=\\frac{\\partial I_{D}}{\\partial V_{OV}}\\frac{\\partial V_{OV}}{\\partial V_{GS}}=k_{n}V_{OV}=\\frac{2I_{D}}{V_{OV}}.\n$$\n\nChannel-length modulation is captured by the Early voltage $V_{A}$ via the affine dependence\n$$\nI_{D}(V_{DS})\\approx I_{D0}\\left(1+\\frac{V_{DS}}{V_{A}}\\right)\n$$\naround the operating point, which yields the small-signal drain conductance\n$$\ng_{ds}=\\frac{\\partial I_{D}}{\\partial V_{DS}}=\\frac{I_{D}}{V_{A}},\n$$\nand hence the output resistance\n$$\nr_{o}=\\frac{1}{g_{ds}}=\\frac{V_{A}}{I_{D}}.\n$$\n\nThe intrinsic gain is the product of transconductance and output resistance,\n$$\nA_{0}=g_{m}r_{o}=\\left(\\frac{2I_{D}}{V_{OV}}\\right)\\left(\\frac{V_{A}}{I_{D}}\\right)=\\frac{2V_{A}}{V_{OV}}.\n$$", "answer": "$$\\boxed{\\frac{2V_{A}}{V_{OV}}}$$", "id": "1319017"}, {"introduction": "Moving from theory to practice, we now analyze one of the most common amplifier configurations: the common-source stage with an active load. While a transistor has its own intrinsic gain, in a real circuit, the overall gain is limited by the total resistance seen at the output node. This practice problem demonstrates how to calculate the voltage gain of a realistic amplifier, where the finite output resistances of both the amplifying transistor and the active load combine in parallel to determine the circuit's performance [@problem_id:1319036].", "problem": "A design engineer is analyzing a common-source amplifier stage for a high-frequency analog circuit. The amplifier consists of an NMOS transistor, M1, acting as the amplification device, and a PMOS transistor, M2, configured to serve as an active load (current source).\n\nThe input signal, $v_{in}$, is applied to the gate of M1, while its source is connected to ground. The output signal, $v_{out}$, is taken from the node where the drains of M1 and M2 are connected. For a realistic analysis that accounts for channel-length modulation, the engineer uses the following small-signal parameters for the transistors at the chosen DC operating point:\n\n-   Transconductance of M1: $g_{m1} = 2.50 \\text{ mA/V}$\n-   Output resistance of M1: $r_{o1} = 50.0 \\text{ k}\\Omega$\n-   Output resistance of M2: $r_{o2} = 80.0 \\text{ k}\\Omega$\n\nCalculate the small-signal voltage gain $A_v = v_{out}/v_{in}$ of this amplifier. Express your answer as a dimensionless quantity, rounded to three significant figures.", "solution": "For the small-signal model, M1 has transconductance $g_{m1}$ from drain to source and output resistance $r_{o1}$ to ground (since the source is grounded), while M2 contributes an output resistance $r_{o2}$ to AC ground (the supply). Writing KCL at the output node with currents leaving the node,\n$$\\frac{v_{out}}{r_{o1}}+\\frac{v_{out}}{r_{o2}}+g_{m1}v_{gs}=0.$$\nWith the source of M1 at ground, $v_{gs}=v_{in}$, so\n$$\\left(\\frac{1}{r_{o1}}+\\frac{1}{r_{o2}}\\right)v_{out}+g_{m1}v_{in}=0,$$\nwhich gives the gain\n$$A_{v}\\equiv \\frac{v_{out}}{v_{in}}=-\\frac{g_{m1}}{\\frac{1}{r_{o1}}+\\frac{1}{r_{o2}}}=-g_{m1}\\left(r_{o1}\\parallel r_{o2}\\right),$$\nwhere $r_{o1}\\parallel r_{o2}=\\frac{r_{o1}r_{o2}}{r_{o1}+r_{o2}}$.\n\nSubstituting the given values,\n$$r_{o1}\\parallel r_{o2}=\\frac{(50.0\\times 10^{3})(80.0\\times 10^{3})}{50.0\\times 10^{3}+80.0\\times 10^{3}}=\\frac{4.0\\times 10^{9}}{1.3\\times 10^{5}}=3.076923\\ldots\\times 10^{4}\\ \\Omega,$$\nand\n$$A_{v}=-\\left(2.50\\times 10^{-3}\\right)\\left(3.076923\\ldots\\times 10^{4}\\right)=-7.6923\\ldots\\times 10^{1}=-76.923\\ldots.$$\nRounded to three significant figures,\n$$A_{v}\\approx -76.9.$$", "answer": "$$\\boxed{-76.9}$$", "id": "1319036"}, {"introduction": "Having seen how a simple active load limits an amplifier's gain, how can we engineer a better solution? This problem introduces the cascode configuration, a powerful and widely used technique to drastically boost the output resistance and, consequently, the voltage gain. By performing a detailed small-signal analysis of this two-transistor structure [@problem_id:1319057], you will uncover the \"resistance multiplication\" effect that makes cascode amplifiers essential for high-performance analog circuits. This exercise challenges you to apply the small-signal model to a slightly more complex circuit to appreciate a clever design strategy.", "problem": "An analog circuit designer is working on a high-performance Operational Transconductance Amplifier (OTA). A critical part of the design is a cascode gain stage, intended to provide a very high output impedance. This stage is constructed using two N-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), labeled $M_1$ and $M_2$.\n\nThe transistor $M_1$ is in a common-source configuration with its source terminal connected to ground. The transistor $M_2$ is stacked on top of $M_1$, with the source of $M_2$ connected to the drain of $M_1$. The output of the amplifier is taken at the drain of $M_2$. For the purpose of analyzing the output resistance, the input signal is turned off, which means the gate of $M_1$ is connected to AC ground. The gate of $M_2$ is connected to a stable DC bias voltage, which also acts as an AC ground. The body of $M_1$ is connected to its source (ground), while the body of $M_2$ is connected to ground.\n\nUsing the small-signal model for the transistors, derive a closed-form analytic expression for the output resistance, $R_{out}$, seen looking into the drain of $M_2$. Assume the small-signal parameters for $M_1$ are its transconductance $g_{m1}$ and its output resistance $r_{o1}$. The parameters for $M_2$ are its transconductance $g_{m2}$, its body-effect transconductance $g_{mb2}$, and its output resistance $r_{o2}$. Your final expression should be in terms of these parameters.", "solution": "Set up the small-signal model with the input turned off. Thus, the gates of both transistors are at AC ground. Let the drain of $M_{2}$ (the output node) have small-signal voltage $v_{o}$, and the common node between $M_{1}$ drain and $M_{2}$ source have small-signal voltage $v_{x}$. Define $g_{o1} \\equiv \\frac{1}{r_{o1}}$ and $g_{o2} \\equiv \\frac{1}{r_{o2}}$. Because the gate and source of $M_{1}$ are both at ground, $v_{gs1}=0$, so $M_{1}$ contributes only its output resistance $r_{o1}$ (no $g_{m1}$ current).\n\nFor $M_{2}$, with gate and body at ground, $v_{gs2}=-v_{x}$, $v_{bs2}=-v_{x}$, and $v_{ds2}=v_{o}-v_{x}$. Using the small-signal MOSFET model, the drain current of $M_{2}$ (from drain to source) is\n$$\ni_{d2}=g_{m2}v_{gs2}+g_{mb2}v_{bs2}+g_{o2}v_{ds2}=-(g_{m2}+g_{mb2})v_{x}+g_{o2}(v_{o}-v_{x}).\n$$\nApply a test voltage $v_{o}$ at the output; the current drawn from this test source is $i_{o}=i_{d2}$. Hence\n$$\ni_{o}=-(g_{m2}+g_{mb2})v_{x}+g_{o2}(v_{o}-v_{x}).\n$$\n\nNow write KCL at node $v_{x}$. Currents leaving node $v_{x}$ are: through $r_{o1}$ to ground, $g_{o1}v_{x}$; and toward the output node through $M_{2}$, which equals the sum of the resistor current $g_{o2}(v_{x}-v_{o})$ and the contribution from the controlled source. The controlled source of $M_{2}$ is oriented from drain to source with value $g_{m2}v_{gs2}+g_{mb2}v_{bs2}=-(g_{m2}+g_{mb2})v_{x}$, so it injects $-(g_{m2}+g_{mb2})v_{x}$ from node $v_{o}$ to node $v_{x}$; therefore it contributes $(g_{m2}+g_{mb2})v_{x}$ leaving node $v_{x}$ toward node $v_{o}$. Thus KCL at $v_{x}$ gives\n$$\ng_{o1}v_{x}+g_{o2}(v_{x}-v_{o})+(g_{m2}+g_{mb2})v_{x}=0,\n$$\nwhich simplifies to\n$$\n\\left(g_{o1}+g_{o2}+g_{m2}+g_{mb2}\\right)v_{x}-g_{o2}v_{o}=0,\n$$\nand hence\n$$\nv_{x}=\\frac{g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\\,v_{o}.\n$$\n\nSubstitute this into the expression for $i_{o}$:\n$$\ni_{o}=-(g_{m2}+g_{mb2})\\left(\\frac{g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\\right)v_{o}\n+g_{o2}\\left(v_{o}-\\frac{g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}v_{o}\\right).\n$$\nFactor $v_{o}$ and simplify:\n$$\ni_{o}=v_{o}\\left[g_{o2}-\\frac{g_{o2}\\left(g_{m2}+g_{mb2}+g_{o2}\\right)}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\\right]\n=v_{o}\\left[\\frac{g_{o2}g_{o1}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\\right].\n$$\nTherefore the output resistance $R_{out}=v_{o}/i_{o}$ is\n$$\nR_{out}=\\frac{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}{g_{o1}g_{o2}}.\n$$\nRe-expressing in terms of $r_{o1}$ and $r_{o2}$,\n$$\nR_{out}=r_{o1}+r_{o2}+(g_{m2}+g_{mb2})\\,r_{o1}r_{o2}.\n$$\nAs expected, $g_{m1}$ does not appear because $v_{gs1}=0$ when the input is turned off.", "answer": "$$\\boxed{r_{o1}+r_{o2}+\\left(g_{m2}+g_{mb2}\\right)r_{o1}r_{o2}}$$", "id": "1319057"}]}
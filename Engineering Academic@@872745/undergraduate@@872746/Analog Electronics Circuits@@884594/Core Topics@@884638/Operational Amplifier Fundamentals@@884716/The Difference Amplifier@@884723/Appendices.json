{"hands_on_practices": [{"introduction": "The difference amplifier is a cornerstone of analog signal processing, primarily used to amplify the voltage difference between two points while rejecting any voltage common to both. A classic application is interfacing with sensor bridges, which convert a physical change into a small differential voltage. This exercise [@problem_id:1338458] walks you through a complete temperature measurement system, from the sensor's resistance change to the final amplified output, reinforcing how to analyze cascaded analog stages.", "problem": "An engineer is designing a precision temperature monitoring system. The system uses a temperature-sensitive resistor whose resistance $R_x$ varies linearly with temperature $T$ according to the relation $R_x(T) = R_0[1 + \\alpha(T - T_0)]$. Here, $R_0 = 10.0\\,\\text{k}\\Omega$ is the resistance at a reference temperature $T_0 = 25.00\\,^\\circ\\text{C}$, and $\\alpha = 4.00 \\times 10^{-3}\\,^\\circ\\text{C}^{-1}$ is the temperature coefficient of resistance.\n\nThe sensor $R_x$ is placed in one arm of a Wheatstone bridge. The bridge is constructed with three fixed precision resistors, $R_a = 10.0\\,\\text{k}\\Omega$, $R_b = 10.0\\,\\text{k}\\Omega$, and $R_c = 10.0\\,\\text{k}\\Omega$. The bridge is powered by a stable DC voltage source $V_s = 5.00\\,\\text{V}$. The bridge is arranged such that one output terminal is the node between resistors $R_a$ and $R_x$, and the other output terminal is the node between resistors $R_b$ and $R_c$.\n\nThe voltage difference from the bridge is amplified by a difference amplifier built with a single ideal operational amplifier (op-amp). The voltage from the node between resistors $R_b$ and $R_c$ connects through resistor $R_1$ to the op-amp's inverting input, with resistor $R_2$ providing feedback from the output to the inverting input. The voltage from the node between resistors $R_a$ and $R_x$ connects through resistor $R_3$ to the op-amp's non-inverting input, with resistor $R_4$ connecting this non-inverting input terminal to ground. The resistor values are: $R_1 = 10.0\\,\\text{k}\\Omega$, $R_2 = 100\\,\\text{k}\\Omega$, $R_3 = 10.0\\,\\text{k}\\Omega$, and $R_4 = 100\\,\\text{k}\\Omega$.\n\nCalculate the output voltage, $V_{out}$, of the operational amplifier circuit when the sensor is at a temperature of $T = 27.50\\,^\\circ\\text{C}$. Assume the op-amp is ideal and operates within its linear region.\n\nExpress your answer in volts, rounded to three significant figures.", "solution": "First, calculate the resistance of the sensor $R_x$ at the specified temperature $T = 27.50\\,^\\circ\\text{C}$. The sensor's resistance varies linearly with temperature according to the formula:\n$$\nR_{x}(T)=R_{0}\\left[1+\\alpha\\left(T-T_{0}\\right)\\right]\n$$\nSubstituting the given values $R_{0}=10.0\\,\\text{k}\\Omega$, $\\alpha=4.00 \\times 10^{-3}\\,^\\circ\\text{C}^{-1}$, and $T_0 = 25.00\\,^\\circ\\text{C}$:\n$$\nR_x(27.50\\,^\\circ\\text{C}) = 10.0\\,\\text{k}\\Omega \\left[1 + (4.00 \\times 10^{-3})(27.50 - 25.00)\\right] = 10.0\\,\\text{k}\\Omega \\left[1 + 0.0100\\right] = 10.1\\,\\text{k}\\Omega\n$$\n\nNext, find the voltages at the output terminals of the Wheatstone bridge, which we'll call $V_a$ (at the junction of $R_a$ and $R_x$) and $V_b$ (at the junction of $R_b$ and $R_c$). These are determined by the voltage dividers:\n$$\nV_{a}=V_{s}\\,\\frac{R_{x}}{R_{a}+R_{x}} = 5.00\\,\\text{V} \\cdot \\frac{10.1\\,\\text{k}\\Omega}{10.0\\,\\text{k}\\Omega+10.1\\,\\text{k}\\Omega} = 5.00\\,\\text{V} \\cdot \\frac{10.1}{20.1}\n$$\n$$\nV_{b}=V_{s}\\,\\frac{R_{c}}{R_{b}+R_{c}} = 5.00\\,\\text{V} \\cdot \\frac{10.0\\,\\text{k}\\Omega}{10.0\\,\\text{k}\\Omega+10.0\\,\\text{k}\\Omega} = 5.00\\,\\text{V} \\cdot \\frac{1}{2} = 2.50\\,\\text{V}\n$$\n\nNow, analyze the difference amplifier stage. For an ideal op-amp, the voltage at the non-inverting input ($V_+$) is determined by the voltage divider formed by $R_3$ and $R_4$:\n$$\nV_{+} = V_a \\frac{R_{4}}{R_{3}+R_{4}} = V_a \\frac{100\\,\\text{k}\\Omega}{10.0\\,\\text{k}\\Omega + 100\\,\\text{k}\\Omega} = V_a \\frac{10}{11}\n$$\nDue to the virtual short, the inverting input voltage is $V_{-} = V_{+}$. Applying KCL at the inverting input node:\n$$\n\\frac{V_{b}-V_{-}}{R_{1}}=\\frac{V_{-}-V_{out}}{R_{2}} \\quad\\Rightarrow\\quad V_{out}=V_{-}\\left(1+\\frac{R_{2}}{R_{1}}\\right)-\\frac{R_{2}}{R_{1}}\\,V_{b}\n$$\nSubstituting $V_- = V_+$, $R_2/R_1 = 100/10 = 10$, and the expression for $V_+$:\n$$\nV_{out} = \\left(V_a \\frac{10}{11}\\right) (1+10) - 10 V_b = 10 V_a - 10 V_b = 10(V_a - V_b)\n$$\nThe amplifier has a differential gain of 10. Finally, calculate the output voltage by substituting the bridge voltages:\n$$\nV_{out} = 10 \\left(5.00\\,\\text{V} \\cdot \\frac{10.1}{20.1} - 2.50\\,\\text{V}\\right) = 10 \\left(\\frac{50.5}{20.1} - 2.50\\right)\\,\\text{V}\n$$\n$$\nV_{out} = 10 \\left(\\frac{50.5 - 2.50 \\times 20.1}{20.1}\\right)\\,\\text{V} = 10 \\left(\\frac{50.5 - 50.25}{20.1}\\right)\\,\\text{V} = \\frac{2.5}{20.1}\\,\\text{V} = \\frac{25}{201}\\,\\text{V}\n$$\n$$\nV_{out} \\approx 0.124378\\ldots\\,\\text{V}\n$$\nRounding to three significant figures gives $0.124\\,\\text{V}$.", "answer": "$$\\boxed{0.124}$$", "id": "1338458"}, {"introduction": "While ideal models are useful for initial analysis, real operational amplifiers have imperfections that affect circuit precision. One of the most fundamental is the input offset voltage ($V_{OS}$), an inherent DC error source. This practice [@problem_id:1311461] isolates this effect, challenging you to calculate the output error voltage it produces in a standard differential amplifier, and revealing how the circuit's topology amplifies this internal non-ideality.", "problem": "In a bench test of a DC-coupled amplifier, a standard single operational amplifier (op-amp) differential amplifier circuit is assembled. A resistor of value $R_1$ is connected between the circuit's first input, $v_1$, and the op-amp's inverting terminal. A feedback resistor of value $R_2$ is connected between the op-amp's output, $V_{out}$, and its inverting terminal. To ensure balanced gain, a third resistor, also of value $R_1$, is connected between the circuit's second input, $v_2$, and the op-amp's non-inverting terminal. Finally, a fourth resistor, also of value $R_2$, is connected between the op-amp's non-inverting terminal and ground.\n\nThe op-amp is not perfectly ideal and exhibits a DC input offset voltage, denoted as $V_{OS}$. Assume all other op-amp parameters are ideal (e.g., infinite open-loop gain, infinite input impedance, and zero output impedance). To isolate the effect of the input offset voltage, both of the circuit's main inputs, $v_1$ and $v_2$, are connected directly to ground.\n\nFollowing the standard convention, model the input offset voltage as a small DC voltage source, $V_{OS}$, in series with the op-amp's non-inverting input lead. Derive a closed-form analytic expression for the resulting DC output voltage, $V_{out}$, in terms of $V_{OS}$, $R_1$, and $R_2$.", "solution": "Let the external non-inverting input node be denoted by $v_{p}$ and the internal non-inverting input node (after inserting the series source $V_{OS}$) be $v_{p}^{\\text{int}}$. With both main inputs grounded, $v_{1}=0$ and $v_{2}=0$. The external node $v_p$ is connected to ground via resistor $R_1$ (since $v_2=0$) and to ground via resistor $R_2$. Because the op-amp input current is ideal (zero), no current flows through these resistors, so the voltage at this external node is $v_p=0$.\n\nBy the given model, the series source places $V_{OS}$ between the external node $v_{p}$ and the op-amp's internal non-inverting input terminal, so the voltage at the internal terminal is:\n$$\nv_{p}^{\\text{int}}=v_{p}+V_{OS}=0+V_{OS}=V_{OS}\n$$\nWith infinite open-loop gain and negative feedback, the op-amp enforces the virtual short condition, $v_{-}=v_{p}^{\\text{int}}$. Therefore, the inverting input node voltage is:\n$$\nv_{-}=V_{OS}\n$$\n\nNow, apply Kirchhoff's Current Law (KCL) at the inverting input node $v_{-}$. Since the op-amp's input current is zero, the current flowing from $v_1$ must equal the current flowing to $V_{out}$:\n$$\n\\frac{v_{1}-v_{-}}{R_{1}}=\\frac{v_{-}-V_{out}}{R_{2}}\n$$\nSubstitute $v_{-}=V_{OS}$ and the grounded input condition $v_{1}=0$:\n$$\n\\frac{0-V_{OS}}{R_{1}}=\\frac{V_{OS}-V_{out}}{R_{2}}\n$$\nRearranging to solve for $V_{out}$:\n$$\n-\\frac{V_{OS}}{R_{1}}R_2 = V_{OS}-V_{out}\n$$\n$$\nV_{out} = V_{OS} + \\frac{R_2}{R_1}V_{OS}\n$$\nTherefore, the output voltage due to the input offset voltage is:\n$$\nV_{out}=\\left(1+\\frac{R_{2}}{R_{1}}\\right)V_{OS}\n$$", "answer": "$$\\boxed{\\left(1+\\frac{R_{2}}{R_{1}}\\right)V_{OS}}$$", "id": "1311461"}, {"introduction": "Beyond static DC errors, a circuit's performance at high frequencies introduces new challenges. In a difference amplifier, even tiny parasitic effects can create a mismatch in the dynamic response of the inverting and non-inverting paths, compromising common-mode rejection for fast signals. This advanced practice [@problem_id:1337428] models this phenomenon, asking you to derive the transient error voltage that appears at the output when a common-mode step is applied, demonstrating how dynamic imbalances can corrupt a signal.", "problem": "An analog designer is characterizing a high-speed difference amplifier intended for a precision measurement system. For DC and low-frequency signals, the amplifier behaves ideally with perfectly matched internal resistors, exhibiting a gain of $+K$ for its non-inverting input and $-K$ for its inverting input, thus providing excellent common-mode rejection. However, at high frequencies, unavoidable parasitic capacitances create a mismatch in the dynamic response of the two signal paths.\n\nThe effective transfer function from the non-inverting input terminal to the output, $H_p(s)$, and the effective transfer function from the inverting input terminal to the output, $H_n(s)$, can be accurately modeled by the following single-pole low-pass expressions:\n$$H_p(s) = \\frac{V_{out}(s)}{V_{in,p}(s)} = \\frac{K}{1+s\\tau_p}$$\n$$H_n(s) = \\frac{V_{out}(s)}{V_{in,n}(s)} = \\frac{-K}{1+s\\tau_n}$$\nHere, $\\tau_p$ and $\\tau_n$ are the distinct, non-zero, positive time constants of the non-inverting and inverting paths, respectively. The parameter $K$ is a positive real constant representing the DC gain magnitude of each path.\n\nTo quantify the impact of this dynamic mismatch, the amplifier is subjected to a high-speed common-mode step voltage. At time $t=0$, the voltage at both input terminals simultaneously steps from 0 to $V_{cm}$. That is, the common-mode input voltage is given by $v_{cm}(t) = v_{in,p}(t) = v_{in,n}(t) = V_{cm} u(t)$, where $u(t)$ is the Heaviside step function.\n\nDue to the mismatch in the time constants ($\\tau_p \\neq \\tau_n$), a transient error voltage, which would be zero in an ideal amplifier, appears at the output. Derive a complete analytical expression for this transient output error voltage, $v_{out,error}(t)$, for time $t \\ge 0$. Your final answer should be an expression in terms of $K$, $V_{cm}$, $\\tau_p$, $\\tau_n$, and $t$.", "solution": "The two input-to-output transfer functions are linear and time-invariant, so for any input the output is the superposition of the two path responses. With a common-mode step applied to both inputs, $v_{in,p}(t)=v_{in,n}(t)=V_{cm}u(t)$, their Laplace transforms are $V_{in,p}(s)=V_{in,n}(s)=V_{cm}/s$ since $\\mathcal{L}\\{u(t)\\}=1/s$. The output in the Laplace domain is\n$$\nV_{out}(s)=H_{p}(s)V_{in,p}(s)+H_{n}(s)V_{in,n}(s)=\\frac{K}{1+s\\tau_{p}}\\cdot\\frac{V_{cm}}{s}+\\frac{-K}{1+s\\tau_{n}}\\cdot\\frac{V_{cm}}{s}.\n$$\nFactor out $K V_{cm}/s$ and combine the terms:\n$$\nV_{out}(s)=\\frac{K V_{cm}}{s}\\left(\\frac{1}{1+s\\tau_{p}}-\\frac{1}{1+s\\tau_{n}}\\right)=\\frac{K V_{cm}}{s}\\cdot\\frac{(1+s\\tau_{n})-(1+s\\tau_{p})}{(1+s\\tau_{p})(1+s\\tau_{n})}.\n$$\nThe numerator simplifies to $s(\\tau_n - \\tau_p)$. The $s$ term cancels with the $s$ in the denominator:\n$$\nV_{out}(s)=K V_{cm}\\,\\frac{\\tau_{n}-\\tau_{p}}{(1+s\\tau_{p})(1+s\\tau_{n})}.\n$$\nTo invert this to the time domain, we can perform a partial-fraction expansion or recognize this as the difference of two simpler terms. Let's rewrite the expression as:\n$$\nV_{out}(s)=K V_{cm}\\left(\\frac{\\tau_{n}}{1+s\\tau_{n}} - \\frac{\\tau_{p}}{1+s\\tau_{p}}\\right)\n$$\n(This can be verified by combining the terms on the right-hand side.)\nThe inverse Laplace transform of a term of the form $\\frac{\\tau}{1+s\\tau}$ is $\\exp(-t/\\tau)u(t)$. Applying this to each term, we get the time-domain output voltage for $t \\ge 0$:\n$$\nv_{out,error}(t)=K V_{cm}\\left[\\exp\\!\\left(-\\frac{t}{\\tau_{n}}\\right)-\\exp\\!\\left(-\\frac{t}{\\tau_{p}}\\right)\\right]\n$$\nThis expression is identically zero if $\\tau_{p}=\\tau_{n}$, as expected for a perfectly matched amplifier. It also correctly shows that the transient error is zero at $t=0$ and decays back to zero as $t \\to \\infty$.", "answer": "$$\\boxed{K V_{cm}\\left[\\exp\\!\\left(-\\frac{t}{\\tau_{n}}\\right)-\\exp\\!\\left(-\\frac{t}{\\tau_{p}}\\right)\\right]}$$", "id": "1337428"}]}
{"hands_on_practices": [{"introduction": "A fundamental trade-off in amplifier design is the inverse relationship between gain and bandwidth. For many operational amplifiers, this relationship is neatly summarized by a single figure of merit: the Gain-Bandwidth Product ($GBW$). This exercise [@problem_id:1280853] demonstrates how to use this essential datasheet parameter to predict the performance of a standard non-inverting amplifier, a foundational skill for practical circuit design.", "problem": "An electronics engineer is designing a pre-amplifier stage for a sensor system using a standard operational amplifier (op-amp). The op-amp is known to exhibit a single-pole frequency response, and its datasheet specifies a Gain-Bandwidth Product (GBW) of 1.0 MHz. The engineer configures the op-amp as a non-inverting amplifier designed to provide a closed-loop DC voltage gain of 40 dB. The relationship between linear voltage gain, $A_v$, and gain in decibels, $G_{\\text{dB}}$, is given by $G_{\\text{dB}} = 20 \\log_{10}(A_v)$.\n\nDetermine the resulting -3 dB bandwidth of this amplifier configuration. Express your answer in kilohertz (kHz), rounded to three significant figures.", "solution": "For an op-amp with a single-pole open-loop response, the open-loop transfer can be modeled as $A(s) = \\dfrac{A_{0}}{1 + s/\\omega_{p}}$. The unity-gain frequency (transition frequency) is $\\omega_{t} = A_{0}\\omega_{p}$, and for a closed-loop gain $A_{v}$, the closed-loop pole (and hence the $-3$ dB bandwidth for a first-order system) is at $\\omega_{b} = \\dfrac{\\omega_{t}}{A_{v}}$. Converting to frequencies, this gives $f_{b} = \\dfrac{f_{t}}{A_{v}}$. Since the datasheet provides the Gain-Bandwidth Product, $\\text{GBW} = f_{t}$, the bandwidth is\n$$\nf_{b} = \\frac{\\text{GBW}}{A_{v}}.\n$$\nThe specified closed-loop gain is $G_{\\text{dB}} = 40\\,\\text{dB}$, and the relationship $G_{\\text{dB}} = 20\\log_{10}(A_{v})$ gives\n$$\nA_{v} = 10^{G_{\\text{dB}}/20} = 10^{40/20} = 10^{2} = 100.\n$$\nWith $\\text{GBW} = 1.0\\,\\text{MHz}$, the $-3$ dB bandwidth is\n$$\nf_{b} = \\frac{1.0 \\times 10^{6}\\ \\text{Hz}}{100} = 1.0 \\times 10^{4}\\ \\text{Hz} = 10.0\\ \\text{kHz}.\n$$\nRounded to three significant figures in kilohertz, the result is $10.0$.", "answer": "$$\\boxed{10.0}$$", "id": "1280853"}, {"introduction": "Moving beyond idealized models, we must consider the physical limitations within transistors that affect high-frequency performance. This practice delves into the Miller effect, a critical phenomenon where the amplifier's own voltage gain multiplies a small internal capacitance, creating a large effective input capacitance. Understanding and calculating this effect [@problem_id:1280789] is essential for predicting and designing high-speed amplifiers.", "problem": "A design engineer is analyzing the high-frequency performance of a single-stage common-emitter amplifier. For AC analysis, the Bipolar Junction Transistor (BJT) is characterized by its small-signal hybrid-$\\pi$ model parameters: a transconductance $g_m$, an input resistance between the base and emitter $r_\\pi$, and an output resistance $r_o$. The amplifier circuit has a collector load resistor $R_C$ connected between the collector terminal and the DC power supply, and the emitter is connected directly to ground.\n\nIn a more refined high-frequency model, two parasitic capacitances must be considered: the base-emitter capacitance, $C_\\pi$, and the base-collector capacitance, $C_\\mu$. The capacitance $C_\\mu$ connects the input node (base) and output node (collector) of the amplifying stage, leading to a phenomenon known as the Miller effect.\n\nDetermine a symbolic expression for the total equivalent input capacitance, $C_{in}$, as seen looking into the base of the transistor. This total capacitance is the parallel combination of the intrinsic capacitance between the base and ground ($C_\\pi$) and the reflected Miller capacitance. Your final expression should be in terms of the provided parameters $g_m$, $r_\\pi$, $r_o$, $R_C$, $C_\\pi$, and $C_\\mu$.", "solution": "The problem asks for the total equivalent input capacitance, $C_{in}$, of a common-emitter BJT amplifier. This capacitance is composed of two parts: the intrinsic base-emitter capacitance, $C_\\pi$, and the Miller capacitance, $C_M$, which arises from the base-collector capacitance, $C_\\mu$.\n$$C_{in} = C_\\pi + C_M$$\nTo find the Miller capacitance, we use Miller's theorem. The theorem states that an impedance $Z_f$ connected between two nodes, Node 1 (input) and Node 2 (output), where the voltage gain is $K = V_2/V_1$, can be replaced by an equivalent impedance to ground at the input, $Z_{in, M} = \\frac{Z_f}{1-K}$.\n\nIn our case, the impedance is the capacitor $C_\\mu$, so $Z_f = \\frac{1}{sC_\\mu}$. Node 1 is the base of the BJT, and Node 2 is the collector. We first need to calculate the small-signal voltage gain $K$ from the base to the collector.\n\nLet $v_b$ be the small-signal voltage at the base and $v_c$ be the small-signal voltage at the collector. The input resistance $r_\\pi$ is connected between the base and emitter (ground), so the voltage across it is $v_{be} = v_b$. The transconductance-controlled current source in the hybrid-$\\pi$ model generates a current $i_c = g_m v_{be} = g_m v_b$ flowing from the collector towards the emitter.\n\nThe collector voltage $v_c$ is determined by this current flowing into the parallel combination of the transistor's output resistance $r_o$ and the collector load resistor $R_C$. The total equivalent resistance at the collector node is $R_{L,eq} = r_o || R_C = \\frac{r_o R_C}{r_o + R_C}$.\nThe collector voltage is given by Ohm's law, with a negative sign because the current source $g_m v_b$ flows out of the node, thus:\n$$v_c = - (g_m v_b) R_{L,eq}$$\nThe voltage gain $K$ from base to collector is therefore:\n$$K = \\frac{v_c}{v_b} = -g_m R_{L,eq} = -g_m \\frac{r_o R_C}{r_o + R_C}$$\n\nNow we can apply Miller's theorem to find the equivalent input impedance due to $C_\\mu$:\n$$Z_{in, M} = \\frac{Z_f}{1-K} = \\frac{1/(sC_\\mu)}{1 - \\left(-g_m \\frac{r_o R_C}{r_o + R_C}\\right)} = \\frac{1}{sC_\\mu \\left(1 + g_m \\frac{r_o R_C}{r_o + R_C}\\right)}$$\nThis impedance is of the form $Z = 1/(sC)$, which is the impedance of a capacitor. We can identify the Miller capacitance $C_M$ as:\n$$C_M = C_\\mu \\left(1 + g_m \\frac{r_o R_C}{r_o + R_C}\\right)$$\n\nThe total input capacitance $C_{in}$ is the sum of $C_\\pi$ (which is already connected from base to ground) and the Miller capacitance $C_M$. The input resistance $r_\\pi$ is in parallel with this total capacitance, but it does not contribute to the value of the capacitance itself.\n$$C_{in} = C_\\pi + C_M = C_\\pi + C_\\mu \\left(1 + g_m \\frac{r_o R_C}{r_o + R_C}\\right)$$\nThis expression represents the total effective capacitance seen at the input base terminal of the BJT amplifier.", "answer": "$$\\boxed{C_\\pi + C_\\mu \\left(1 + g_m \\frac{R_C r_o}{R_C + r_o}\\right)}$$", "id": "1280789"}, {"introduction": "While negative feedback is a powerful tool for controlling amplifier characteristics, it can also lead to instability and unwanted oscillations, especially in multi-stage designs. This advanced problem explores the relationship between an amplifier's open-loop poles and the stability of the final closed-loop system. By analyzing the system's characteristic equation, you will determine the precise feedback conditions that push the amplifier to the brink of oscillation [@problem_id:1280794].", "problem": "A multi-stage amplifier is designed for a high-frequency application. Over its operational bandwidth, its open-loop voltage gain can be accurately modeled by the transfer function:\n$$A(s) = \\frac{A_0}{\\left(1 + \\frac{s}{\\omega_p}\\right)\\left(1 + \\frac{s}{2\\omega_p}\\right)\\left(1 + \\frac{s}{4\\omega_p}\\right)}$$\nwhere $s$ is the complex frequency, $A_0$ is the constant DC gain, and $\\omega_p$ is a characteristic pole frequency. Both $A_0$ and $\\omega_p$ are positive real constants.\n\nThis amplifier is then placed in a negative feedback loop with a frequency-independent feedback factor $\\beta$, where $\\beta  0$. The closed-loop gain is given by the standard formula $A_f(s) = \\frac{A(s)}{1 + \\beta A(s)}$.\n\nDetermine the specific value of the feedback factor $\\beta$ that will cause the closed-loop system to have poles on the imaginary axis ($j\\omega$-axis) of the complex s-plane. Express your answer as a symbolic expression in terms of $A_0$.", "solution": "The open-loop transfer function is given by\n$$A(s) = \\frac{A_{0}}{\\left(1 + \\frac{s}{\\omega_{p}}\\right)\\left(1 + \\frac{s}{2\\omega_{p}}\\right)\\left(1 + \\frac{s}{4\\omega_{p}}\\right)}.$$\nLet the denominator be denoted by $D(s)$ and the numerator by $N(s)=A_{0}$. Then the closed-loop transfer function with feedback factor $\\beta$ is\n$$A_{f}(s) = \\frac{A(s)}{1 + \\beta A(s)} = \\frac{N(s)}{D(s) + \\beta N(s)},$$\nso the closed-loop characteristic equation is\n$$D(s) + \\beta A_{0} = 0.$$\nExpand $D(s)$ by introducing $x = \\frac{s}{\\omega_{p}}$:\n$$(1 + x)\\left(1 + \\frac{x}{2}\\right)\\left(1 + \\frac{x}{4}\\right) = 1 + \\frac{7}{4}x + \\frac{7}{8}x^{2} + \\frac{1}{8}x^{3}.$$\nThus\n$$D(s) = 1 + \\frac{7}{4}\\frac{s}{\\omega_{p}} + \\frac{7}{8}\\frac{s^{2}}{\\omega_{p}^{2}} + \\frac{1}{8}\\frac{s^{3}}{\\omega_{p}^{3}}.$$\nHence the characteristic equation can be written as\n$$1 + \\frac{7}{4}\\frac{s}{\\omega_{p}} + \\frac{7}{8}\\frac{s^{2}}{\\omega_{p}^{2}} + \\frac{1}{8}\\frac{s^{3}}{\\omega_{p}^{3}} + \\beta A_{0} = 0.$$\nMultiplying by $8\\omega_{p}^{3}$ yields the cubic polynomial in standard form:\n$$s^{3} + 7\\omega_{p}s^{2} + 14\\omega_{p}^{2}s + 8\\omega_{p}^{3}\\left(1 + \\beta A_{0}\\right) = 0,$$\nwhich is $s^{3} + a_{1}s^{2} + a_{2}s + a_{3} = 0$ with\n$$a_{1} = 7\\omega_{p}, \\quad a_{2} = 14\\omega_{p}^{2}, \\quad a_{3} = 8\\omega_{p}^{3}\\left(1 + \\beta A_{0}\\right).$$\nFor a cubic, the Routh-Hurwitz stability boundary (poles on the imaginary axis) occurs when $a_{1}a_{2} = a_{3}$ with all coefficients positive. Imposing this condition gives\n$$(7\\omega_{p})(14\\omega_{p}^{2}) = 8\\omega_{p}^{3}\\left(1 + \\beta A_{0}\\right).$$\nDividing by $8\\omega_{p}^{3}$ and solving for $\\beta$:\n$$\\frac{98}{8} = 1 + \\beta A_{0} \\quad \\Rightarrow \\quad \\beta A_{0} = \\frac{98}{8} - 1 = \\frac{90}{8} = \\frac{45}{4} \\quad \\Rightarrow \\quad \\beta = \\frac{45}{4 A_{0}}.$$\nThis value of $\\beta$ places a conjugate pair of closed-loop poles on the imaginary axis.", "answer": "$$\\boxed{\\frac{45}{4 A_{0}}}$$", "id": "1280794"}]}
{"hands_on_practices": [{"introduction": "To master the concept of loop gain, it's best to start with a fundamental building block. This first exercise examines the voltage follower, one of the simplest and most common op-amp configurations. By analyzing this circuit with a realistic, finite-gain op-amp model, you will practice identifying the forward gain path ($A$) and the feedback factor ($\\beta$) to calculate the loop gain $T$, building a solid foundation for more complex circuits [@problem_id:1315750].", "problem": "A voltage follower, also known as a unity gain buffer, is constructed using a non-ideal operational amplifier (op-amp). The input voltage signal is connected to the non-inverting terminal. The output of the op-amp is connected directly to its inverting terminal, creating a feedback path. The op-amp is characterized by a finite, real, and constant open-loop gain $A_0$, such that its output voltage $v_{out}$ is related to the differential input voltage $v_d = v_+ - v_-$, by the expression $v_{out} = A_0 v_d$, where $v_+$ and $v_-$ are the voltages at the non-inverting and inverting terminals, respectively.\n\nThis circuit can be analyzed using the standard model for a negative feedback system. In this model, the op-amp constitutes the forward path with a gain $A$. The feedback network processes the output signal to produce a feedback signal with a feedback factor $\\beta$. The loop gain of the system, denoted by $T$, is defined as the product of the forward path gain and the feedback factor.\n\nDetermine the loop gain $T$ for this voltage follower circuit. Express your answer in terms of $A_0$.", "solution": "The problem asks for the loop gain, $T$, of a voltage follower circuit built with an op-amp having a finite open-loop gain $A_0$. The loop gain is defined as the product of the forward path gain, $A$, and the feedback factor, $\\beta$.\n$$T = A \\beta$$\n\nFirst, we identify the forward path gain, $A$. The forward path of the feedback system is composed of the operational amplifier itself. According to the problem statement, the op-amp has a finite open-loop gain of $A_0$. Therefore, the forward path gain is:\n$$A = A_0$$\n\nNext, we need to determine the feedback factor, $\\beta$. The feedback factor is the ratio of the feedback signal to the output signal. The feedback network connects the output of the op-amp back to the input of the amplification stage. In this voltage follower configuration, the output terminal, with voltage $v_{out}$, is connected directly to the inverting input terminal, which receives the feedback signal. Let's call the voltage at the inverting terminal $v_f$.\n$$v_f = v_-$$\n\nDue to the direct connection (a wire), the voltage at the inverting terminal is identical to the output voltage.\n$$v_- = v_{out}$$\nTherefore, the feedback signal is equal to the output signal:\n$$v_f = v_{out}$$\n\nThe feedback factor $\\beta$ is defined by the relation $v_f = \\beta v_{out}$. By comparing this definition with our finding that $v_f = v_{out}$, we can write:\n$$\\beta v_{out} = 1 \\cdot v_{out}$$\nThis implies that the feedback factor is:\n$$\\beta = 1$$\nThis result makes intuitive sense, as the entire output signal (100% of it) is fed back to the input.\n\nFinally, we can calculate the loop gain, $T$, by multiplying the forward gain $A$ by the feedback factor $\\beta$.\n$$T = A \\beta = (A_0)(1)$$\n$$T = A_0$$\n\nThus, the loop gain of the voltage follower circuit is equal to the open-loop gain of the operational amplifier.", "answer": "$$\\boxed{A_{0}}$$", "id": "1315750"}, {"introduction": "Building on the basics, our next practice involves an inverting summing amplifier. This circuit introduces a resistive feedback network, making the calculation of the feedback factor $\\beta$ more involved than in the simple voltage follower. This problem will guide you through the essential technique of calculating $\\beta$ by considering the loading effects of the entire feedback network, a crucial skill for analyzing most practical amplifier designs [@problem_id:1315710].", "problem": "Consider an inverting summing amplifier constructed using a single operational amplifier (op-amp) and several resistors. The op-amp is modeled as having a finite, frequency-independent open-loop voltage gain of $-A_{OL}$, where $A_{OL}$ is a large positive real number. The op-amp is assumed to have infinite input impedance and zero output impedance.\n\nThe circuit is configured as follows: Three input signals, represented by voltage sources $v_1$, $v_2$, and $v_3$, are connected to the inverting input terminal of the op-amp through resistors $R_1$, $R_2$, and $R_3$, respectively. A feedback resistor, $R_f$, is connected between the output terminal and the inverting input terminal of the op-amp. The non-inverting input terminal of the op-amp is connected directly to ground.\n\nCalculate the loop gain, $T$, of this amplifier configuration. Your answer should be a symbolic expression in terms of $A_{OL}$, $R_1$, $R_2$, $R_3$, and $R_f$.", "solution": "Model the op-amp as $v_{o}=-A_{OL}(v_{+}-v_{-})$. With the non-inverting input grounded, $v_{+}=0$, so\n$$\nv_{o}=-A_{OL}(0-v_{-})=A_{OL}v_{-}.\n$$\nTo obtain the feedback factor, set the independent input sources to zero, so $v_{1}=v_{2}=v_{3}=0$. The three input resistors then connect the inverting node to ground with an equivalent resistance\n$$\nR_{g}=\\left(\\frac{1}{R_{1}}+\\frac{1}{R_{2}}+\\frac{1}{R_{3}}\\right)^{-1}.\n$$\nWith $R_{f}$ from $v_{o}$ to the inverting node and $R_{g}$ from the node to ground, apply a resistor divider (or KCL). Using KCL,\n$$\n\\frac{v_{o}-v_{-}}{R_{f}}=\\frac{v_{-}}{R_{g}}\\;\\;\\Rightarrow\\;\\;v_{o}=v_{-}\\left(1+\\frac{R_{f}}{R_{g}}\\right)\\;\\;\\Rightarrow\\;\\;\\beta\\equiv\\frac{v_{-}}{v_{o}}=\\frac{1}{1+\\frac{R_{f}}{R_{g}}}=\\frac{R_{g}}{R_{f}+R_{g}}.\n$$\nThe loop gain is the product of the op-amp open-loop gain and the feedback factor. With the given convention $v_{o}=A_{OL}v_{-}$ for $v_{+}=0$, the loop gain is\n$$\nT=A_{OL}\\beta=A_{OL}\\frac{R_{g}}{R_{f}+R_{g}}=\\frac{A_{OL}}{1+\\frac{R_{f}}{R_{g}}}=\\frac{A_{OL}}{1+R_{f}\\left(\\frac{1}{R_{1}}+\\frac{1}{R_{2}}+\\frac{1}{R_{3}}\\right)}.\n$$", "answer": "$$\\boxed{\\frac{A_{OL}}{1+R_{f}\\left(\\frac{1}{R_{1}}+\\frac{1}{R_{2}}+\\frac{1}{R_{3}}\\right)}}$$", "id": "1315710"}, {"introduction": "Our final practice moves from static, DC analysis to the dynamic world of frequency-dependent behavior. We will analyze a three-stage ring oscillator, a circuit whose very function is defined by its feedback characteristics. By deriving the loop gain as a function of frequency, $L(j\\omega)$, you will see how loop gain analysis is the key to understanding stability and predicting oscillation, which is one of the most important applications of feedback theory in electronics [@problem_id:1315727].", "problem": "A three-stage ring oscillator is a fundamental building block in modern digital and mixed-signal integrated circuits. It is constructed by connecting three identical inverting amplifier stages in a closed loop. For this problem, consider a ring oscillator built from three identical Complementary Metal-Oxide-Semiconductor (CMOS) inverter stages.\n\nFor small-signal analysis around the DC bias point (where the inverter's input and output voltages are equal), each stage can be characterized by the following parameters:\n- An effective small-signal transconductance, $g_m$, which represents the combined effect of the NMOS and PMOS transistors.\n- An NMOS channel resistance, $r_{on}$.\n- A PMOS channel resistance, $r_{op}$.\n- A total effective load capacitance, $C_L$, present at the output node of each inverter. This capacitance accounts for the parasitic capacitances of the driving stage and the input gate capacitance of the subsequent stage.\n\nThe small-signal output resistance of a single inverter stage, $R_{out}$, is the parallel combination of $r_{on}$ and $r_{op}$.\n\nYour task is to derive a complete analytical expression for the frequency-dependent loop gain, $L(j\\omega)$, of the entire three-stage oscillator. Your final expression should be in terms of the angular frequency $\\omega$, the imaginary unit $j$, and the given physical parameters $g_m$, $r_{on}$, $r_{op}$, and $C_L$.", "solution": "We model each CMOS inverter at its operating point as a linear small-signal stage with:\n- An output node connected to AC ground through the NMOS and PMOS channel resistances in parallel, so the small-signal output resistance is $R_{out} = r_{on} \\parallel r_{op} = \\left( \\frac{1}{r_{on}} + \\frac{1}{r_{op}} \\right)^{-1} = \\frac{r_{on} r_{op}}{r_{on} + r_{op}}$.\n- A load capacitance $C_{L}$ from the output node to ground.\n- A dependent current source modeling the transconductance action of the inverter with value $g_{m} v_{in}$ oriented from the output node to ground (so that an increase in $v_{in}$ increases pull-down current and decreases $v_{out}$).\n\nWriting KCL at the output node with currents flowing to ground taken as positive gives\n$$\n\\frac{v_{out}}{R_{out}} + C_{L} \\frac{d v_{out}}{dt} + g_{m} v_{in} = 0.\n$$\nTaking Laplace transforms and defining $A(s) \\equiv \\frac{V_{out}(s)}{V_{in}(s)}$, we obtain\n$$\n\\left( \\frac{1}{R_{out}} + s C_{L} \\right) V_{out}(s) + g_{m} V_{in}(s) = 0\n\\quad \\Longrightarrow \\quad\nA(s) = - \\frac{g_{m}}{\\frac{1}{R_{out}} + s C_{L}} = - \\frac{g_{m} R_{out}}{1 + s R_{out} C_{L}}.\n$$\nFor a three-stage ring consisting of three identical inverters, the loop gain is the product of the three stage gains,\n$$\nL(s) = \\left[ A(s) \\right]^{3} = - \\frac{\\left( g_{m} R_{out} \\right)^{3}}{\\left( 1 + s R_{out} C_{L} \\right)^{3}}.\n$$\nSubstituting $s = j \\omega$ and $R_{out} = \\frac{r_{on} r_{op}}{r_{on} + r_{op}}$ yields\n$$\nL(j \\omega) = - \\frac{\\left( g_{m} \\frac{r_{on} r_{op}}{r_{on} + r_{op}} \\right)^{3}}{\\left( 1 + j \\omega C_{L} \\frac{r_{on} r_{op}}{r_{on} + r_{op}} \\right)^{3}}.\n$$\nThis expression is fully in terms of $g_{m}$, $r_{on}$, $r_{op}$, $C_{L}$, $\\omega$, and $j$ as required.", "answer": "$$\\boxed{-\\frac{\\left(g_{m}\\,\\frac{r_{on} r_{op}}{r_{on}+r_{op}}\\right)^{3}}{\\left(1+j\\omega C_{L}\\,\\frac{r_{on} r_{op}}{r_{on}+r_{op}}\\right)^{3}}}$$", "id": "1315727"}]}
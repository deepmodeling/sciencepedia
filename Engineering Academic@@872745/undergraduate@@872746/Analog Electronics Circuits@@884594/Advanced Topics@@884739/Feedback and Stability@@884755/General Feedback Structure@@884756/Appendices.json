{"hands_on_practices": [{"introduction": "One of the primary motivations for using negative feedback is to create a system whose performance is stable and predictable, even when its internal components have large variations. This exercise [@problem_id:1307718] provides a quantitative look at this powerful concept, known as gain desensitization. You will calculate the required feedback factor to constrain the closed-loop gain variation of an amplifier to a specific tolerance, demonstrating how feedback trades high open-loop gain for precision and reliability.", "problem": "An engineer is designing a precision amplification stage for a sensor system. The core component is an operational amplifier (op-amp) whose open-loop voltage gain, $A_{OL}$, is subject to large variations. Due to manufacturing process variations and temperature fluctuations, the value of $A_{OL}$ for this model of op-amp is specified to range from a minimum of $A_{OL,min} = 500$ to a maximum of $A_{OL,max} = 1500$. To ensure the overall system's reliability, the closed-loop voltage gain, $A_{CL}$, of the amplification stage must be stabilized.\n\nAssume a standard negative feedback topology is used, where the closed-loop gain is given by the formula $A_{CL} = \\frac{A_{OL}}{1 + \\beta A_{OL}}$. The feedback factor $\\beta$ is a constant determined by an external resistor network, which is assumed to be perfectly stable.\n\nThe design specification requires that the percentage variation in closed-loop gain be exactly 1.0%. The variation is defined with respect to the closed-loop gain corresponding to the smaller open-loop gain, such that $\\frac{A_{CL,max} - A_{CL,min}}{A_{CL,min}} = 0.01$, where $A_{CL,max}$ and $A_{CL,min}$ are the closed-loop gains corresponding to $A_{OL,max}$ and $A_{OL,min}$, respectively.\n\nCalculate the required value of the feedback factor $\\beta$ to meet this design specification. Round your final answer to three significant figures.", "solution": "Let $A_{1}=A_{OL,min}$ and $A_{2}=A_{OL,max}$. For negative feedback, the closed-loop gain is $A_{CL}(A)=\\dfrac{A}{1+\\beta A}$. Thus,\n$$\nA_{CL,min}=\\frac{A_{1}}{1+\\beta A_{1}}, \\quad A_{CL,max}=\\frac{A_{2}}{1+\\beta A_{2}}.\n$$\nThe specification requires\n$$\n\\frac{A_{CL,max}-A_{CL,min}}{A_{CL,min}}=0.01,\n$$\nwhich gives\n$$\n\\frac{\\dfrac{A_{2}}{1+\\beta A_{2}}-\\dfrac{A_{1}}{1+\\beta A_{1}}}{\\dfrac{A_{1}}{1+\\beta A_{1}}}=0.01.\n$$\nSimplifying,\n$$\n\\frac{A_{2}(1+\\beta A_{1})}{A_{1}(1+\\beta A_{2})}-1=0.01,\n$$\nso\n$$\n\\frac{A_{2}(1+\\beta A_{1})}{A_{1}(1+\\beta A_{2})}=1.01.\n$$\nCross-multiplying and collecting terms,\n$$\nA_{2}+\\beta A_{1}A_{2}=1.01 A_{1}+1.01\\,\\beta A_{1}A_{2},\n$$\n$$\n\\beta A_{1}A_{2}-1.01\\,\\beta A_{1}A_{2}=1.01 A_{1}-A_{2},\n$$\n$$\n\\beta A_{1}A_{2}(1-1.01)=1.01 A_{1}-A_{2},\n$$\n$$\n\\beta=\\frac{1.01 A_{1}-A_{2}}{(1-1.01)A_{1}A_{2}}=\\frac{A_{2}-1.01 A_{1}}{0.01 A_{1}A_{2}}.\n$$\nSubstituting $A_{1}=500$ and $A_{2}=1500$,\n$$\n\\beta=\\frac{1500-1.01\\times 500}{0.01\\times 500\\times 1500}=\\frac{995}{7500}=\\frac{199}{1500}\\approx 0.132\\overline{6}.\n$$\nRounded to three significant figures, $\\beta=0.133$.", "answer": "$$\\boxed{0.133}$$", "id": "1307718"}, {"introduction": "While negative feedback offers many benefits, it also introduces the risk of instability, especially in systems with multiple poles that contribute phase shift. This practice problem [@problem_id:1307688] explores this critical trade-off by asking you to determine the stability limit for a three-pole amplifier. By applying the Routh-Hurwitz criterion, you will find the maximum amount of feedback that can be applied before the amplifier turns into an oscillator, a fundamental constraint in feedback system design.", "problem": "An operational amplifier (op-amp) is modeled with an open-loop voltage gain transfer function, $A(s)$. The frequency response of this op-amp is characterized by a DC gain of $A_0$ and three identical, real-axis poles. Its transfer function can be written as:\n$$A(s) = \\frac{A_0}{\\left(1 + \\frac{s}{\\omega_p}\\right)^3}$$\nwhere $\\omega_p$ is the angular frequency of the poles. This op-amp is placed in a negative feedback loop with a frequency-independent feedback factor $\\beta$. The stability of the resulting closed-loop system is governed by the roots of the characteristic equation $1 + \\beta A(s) = 0$.\n\nGiven that the DC gain is $A_0 = 2.00 \\times 10^5$ and the pole frequency corresponds to a value of $\\omega_p = 60.0$ rad/s, calculate the maximum value of the feedback factor $\\beta$ for which the closed-loop system is on the verge of instability (i.e., marginally stable). Express your final answer as a single numerical value, rounded to three significant figures.", "solution": "The open-loop transfer function is $A(s) = \\dfrac{A_{0}}{\\left(1 + \\dfrac{s}{\\omega_{p}}\\right)^{3}}$. With negative feedback factor $\\beta$, the closed-loop characteristic equation is\n$$\n1 + \\beta A(s) = 0.\n$$\nMultiplying both sides by $\\left(1 + \\dfrac{s}{\\omega_{p}}\\right)^{3}$ gives the equivalent polynomial form\n$$\n\\left(1 + \\dfrac{s}{\\omega_{p}}\\right)^{3} + \\beta A_{0} = 0.\n$$\nExpanding the cube and grouping by powers of $s$,\n$$\n1 + 3\\dfrac{s}{\\omega_{p}} + 3\\dfrac{s^{2}}{\\omega_{p}^{2}} + \\dfrac{s^{3}}{\\omega_{p}^{3}} + \\beta A_{0} = 0.\n$$\nMultiplying through by $\\omega_{p}^{3}$ yields the characteristic polynomial\n$$\ns^{3} + 3\\omega_{p}s^{2} + 3\\omega_{p}^{2}s + (1 + \\beta A_{0})\\omega_{p}^{3} = 0.\n$$\nUsing the Routh-Hurwitz criterion for a third-order polynomial $s^{3} + a_{2}s^{2} + a_{1}s + a_{0}$, the Routh array has first two rows\n$$\n\\text{Row } s^{3}: \\quad 1 \\quad\\quad 3\\omega_{p}^{2},\n$$\n$$\n\\text{Row } s^{2}: \\quad 3\\omega_{p} \\quad\\quad (1 + \\beta A_{0})\\omega_{p}^{3}.\n$$\nThe next element (row $s^{1}$, first column) is\n$$\nb_{1} = \\dfrac{(3\\omega_{p})(3\\omega_{p}^{2}) - 1\\cdot (1 + \\beta A_{0})\\omega_{p}^{3}}{3\\omega_{p}} = \\dfrac{\\omega_{p}^{3}\\left(9 - (1 + \\beta A_{0})\\right)}{3\\omega_{p}} = \\dfrac{\\omega_{p}^{2}}{3}\\left(8 - \\beta A_{0}\\right).\n$$\nMarginal stability occurs when a row element becomes zero, which here requires $b_{1} = 0$. Therefore,\n$$\n8 - \\beta A_{0} = 0 \\quad \\Rightarrow \\quad \\beta = \\dfrac{8}{A_{0}}.\n$$\nSubstituting the given numerical values $A_{0} = 2.00 \\times 10^{5}$ and $\\omega_{p} = 60.0$ rad/s (note that $\\omega_{p}$ cancels and does not affect $\\beta_{\\max}$),\n$$\n\\beta_{\\max} = \\dfrac{8}{2.00 \\times 10^{5}} = 4.00 \\times 10^{-5}.\n$$\nThis is the maximum feedback factor for marginal stability.", "answer": "$$\\boxed{4.00 \\times 10^{-5}}$$", "id": "1307688"}, {"introduction": "The standard feedback formula, $A_{CL} = \\frac{A}{1 + \\beta A}$, assumes the feedback network is unilateral, meaning it only passes signals from the output back to the input. This exercise [@problem_id:1307715] challenges you to analyze a more realistic, bilateral feedback network that exhibits both loading effects and parasitic signal feedforward. By deriving the closed-loop gain from first principles using two-port network parameters, you will gain a deeper understanding of how real-world components modify the behavior of an ideal feedback model.", "problem": "An engineer is designing a high-frequency amplifier using a voltage-shunt (shunt-shunt) feedback topology. The core of the amplifier is a transconductance stage modeled as a voltage-controlled current source with a transconductance $G_m$, an infinite input resistance, and a finite output resistance $R_{out}$. The amplifier is driven by a Norton-equivalent signal source, which consists of a current source $I_s$ in parallel with a source resistance $R_s$. The output of the amplifier is connected to a load resistance $R_L$.\n\nA passive network provides the feedback. At the high frequencies of operation, this feedback network is not perfectly unilateral and must be modeled as a general two-port network described by its admittance parameters (y-parameters): $y_{11}$, $y_{12}$, $y_{21}$, and $y_{22}$. Port 1 of the feedback network is connected to the amplifier's input node, and Port 2 is connected to the amplifier's output node. The intended feedback path, which senses the output voltage and returns a proportional current to the input, is characterized by the parameter $y_{12}$. However, a parasitic signal path also exists, causing undesired feedforward from the input to the output, characterized by the parameter $y_{21}$.\n\nDerive a symbolic expression for the closed-loop transresistance of the entire circuit, defined as $R_f = V_{out} / I_s$, where $V_{out}$ is the voltage across the load resistor $R_L$. Your final expression should be in terms of $G_m$, $R_{out}$, $R_s$, $R_L$, and the y-parameters of the feedback network.", "solution": "Define the input-node voltage as $v_{1}$ and the output-node voltage (across $R_{L}$) as $v_{2}$. The feedback two-port is described by its y-parameters with currents defined entering the two-port:\n$$\ni_{1}=y_{11}v_{1}+y_{12}v_{2},\\qquad i_{2}=y_{21}v_{1}+y_{22}v_{2}.\n$$\n\nAt the input node, the Norton source injects current $I_{s}$ into the node, while currents leave the node through $R_{s}$ and into port 1 of the feedback network. By KCL,\n$$\n\\frac{v_{1}}{R_{s}}+i_{1}=I_{s}\\;\\;\\Rightarrow\\;\\;\\frac{v_{1}}{R_{s}}+y_{11}v_{1}+y_{12}v_{2}=I_{s}.\n$$\n\nAt the output node, the transconductance stage injects current $G_{m}v_{1}$ into the node, while currents leave the node through $R_{L}$, $R_{out}$, and into port 2 of the feedback network. By KCL,\n$$\n\\frac{v_{2}}{R_{L}}+\\frac{v_{2}}{R_{out}}+i_{2}=G_{m}v_{1}\\;\\;\\Rightarrow\\;\\;\\left(\\frac{1}{R_{L}}+\\frac{1}{R_{out}}+y_{22}\\right)v_{2}+(y_{21})v_{1}=G_{m}v_{1}.\n$$\nSolving the output-node equation for $v_{2}$ in terms of $v_{1}$ gives\n$$\nv_{2}=\\frac{G_{m}-y_{21}}{y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}}\\,v_{1}.\n$$\n\nSubstitute this into the input-node equation:\n$$\n\\left(\\frac{1}{R_{s}}+y_{11}\\right)v_{1}+y_{12}\\left(\\frac{G_{m}-y_{21}}{y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}}\\right)v_{1}=I_{s}.\n$$\nThus,\n$$\nv_{1}=\\frac{I_{s}}{\\left(\\frac{1}{R_{s}}+y_{11}\\right)+y_{12}\\frac{G_{m}-y_{21}}{y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}}}.\n$$\nSince $R_{f}=V_{out}/I_{s}=v_{2}/I_{s}$ and $v_{2}=\\left(\\frac{G_{m}-y_{21}}{y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}}\\right)v_{1}$, we obtain\n$$\nR_{f}=\\frac{\\frac{G_{m}-y_{21}}{y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}}}{\\left(\\frac{1}{R_{s}}+y_{11}\\right)+y_{12}\\frac{G_{m}-y_{21}}{y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}}}=\\frac{G_{m}-y_{21}}{\\left(y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}\\right)\\left(\\frac{1}{R_{s}}+y_{11}\\right)+y_{12}\\left(G_{m}-y_{21}\\right)}.\n$$\nThis is the closed-loop transresistance $R_{f}=V_{out}/I_{s}$ in terms of $G_{m}$, $R_{out}$, $R_{s}$, $R_{L}$, and the y-parameters.", "answer": "$$\\boxed{\\frac{G_{m}-y_{21}}{\\left(y_{22}+\\frac{1}{R_{L}}+\\frac{1}{R_{out}}\\right)\\left(\\frac{1}{R_{s}}+y_{11}\\right)+y_{12}\\left(G_{m}-y_{21}\\right)}}$$", "id": "1307715"}]}
{"hands_on_practices": [{"introduction": "Understanding a filter begins with its most fundamental behavior: how it responds to a sudden change. This practice explores the time-domain characteristics of a state-variable filter by analyzing its response to a unit step input. By solving the system's governing differential equations, you will connect the abstract parameters of natural frequency ($\\omega_0$) and quality factor ($Q$) to the tangible output waveform, gaining insight into the filter's transient behavior, such as overshoot and ringing. This is a core skill in the analysis of any dynamic system. [@problem_id:1334679]", "problem": "A particular second-order state-variable filter is used to process an input voltage signal $v_{in}(t)$. Its internal dynamics can be precisely described by a state-space model with two state variables, $x_1(t)$ and $x_2(t)$. The output low-pass filtered voltage is given by $v_{LP}(t) = x_1(t)$. The system is governed by the following set of coupled linear differential equations:\n$$ \\frac{dx_1}{dt} = x_2(t) $$\n$$ \\frac{dx_2}{dt} = -\\omega_0^2 x_1(t) - \\frac{\\omega_0}{Q} x_2(t) + \\omega_0^2 v_{in}(t) $$\nThe filter is characterized by a natural frequency $\\omega_0 = 100\\sqrt{2}$ rad/s and a quality factor $Q = 1/\\sqrt{3}$.\nThe filter is initially at rest, meaning $x_1(0) = 0$ and $x_2(0)=0$. At time $t=0$, a unit step voltage is applied to the input, such that $v_{in}(t) = 1$ V for all $t \\ge 0$.\n\nDetermine the expression for the low-pass output voltage $v_{LP}(t)$ for $t \\ge 0$. Your answer should be a single real-valued analytic function of time $t$.", "solution": "The given state equations are\n$$\\frac{d x_{1}}{dt}=x_{2}(t), \\qquad \\frac{d x_{2}}{dt}=-\\omega_{0}^{2} x_{1}(t)-\\frac{\\omega_{0}}{Q} x_{2}(t)+\\omega_{0}^{2} v_{in}(t),$$\nwith $v_{in}(t)=1$ for $t\\ge 0$, and initial conditions $x_{1}(0)=0$, $x_{2}(0)=0$. Eliminating $x_{2}$ by differentiating the first equation and substituting into the second gives a single second-order ODE for $x_{1}(t)$:\n$$\\frac{d^{2} x_{1}}{dt^{2}}=-\\omega_{0}^{2} x_{1}-\\frac{\\omega_{0}}{Q}\\frac{d x_{1}}{dt}+\\omega_{0}^{2}.$$\nRewriting,\n$$\\frac{d^{2} x_{1}}{dt^{2}}+\\frac{\\omega_{0}}{Q}\\frac{d x_{1}}{dt}+\\omega_{0}^{2} x_{1}=\\omega_{0}^{2},$$\nwith $x_{1}(0)=0$ and $\\frac{d x_{1}}{dt}(0)=x_{2}(0)=0$. A constant particular solution is $x_{1,p}=1$. The homogeneous equation\n$$\\frac{d^{2} x_{h}}{dt^{2}}+\\frac{\\omega_{0}}{Q}\\frac{d x_{h}}{dt}+\\omega_{0}^{2} x_{h}=0$$\nhas characteristic roots\n$$r=-\\frac{\\omega_{0}}{2Q}\\pm j\\,\\omega_{d}, \\quad \\omega_{d}=\\omega_{0}\\sqrt{1-\\frac{1}{4Q^{2}}}.$$\nThus\n$$x_{h}(t)=\\exp\\!\\left(-\\frac{\\omega_{0}}{2Q}t\\right)\\left(C\\cos(\\omega_{d} t)+D\\sin(\\omega_{d} t)\\right).$$\nImposing $x_{1}(0)=0$ yields $1+x_{h}(0)=0$, so $C=-1$. Differentiating,\n$$\\frac{d x_{h}}{dt}=\\exp\\!\\left(-\\frac{\\omega_{0}}{2Q}t\\right)\\left[-\\frac{\\omega_{0}}{2Q}C\\cos(\\omega_{d} t)-\\frac{\\omega_{0}}{2Q}D\\sin(\\omega_{d} t)-\\omega_{d}C\\sin(\\omega_{d} t)+\\omega_{d}D\\cos(\\omega_{d} t)\\right],$$\nand using $\\frac{d x_{1}}{dt}(0)=0$ gives $\\frac{d x_{h}}{dt}(0)=0$, hence\n$$-\\frac{\\omega_{0}}{2Q}C+\\omega_{d}D=0 \\;\\Rightarrow\\; D=-\\frac{\\omega_{0}}{2Q\\,\\omega_{d}}.$$\nTherefore,\n$$x_{1}(t)=1-\\exp\\!\\left(-\\frac{\\omega_{0}}{2Q}t\\right)\\left[\\cos(\\omega_{d} t)+\\frac{\\omega_{0}}{2Q\\,\\omega_{d}}\\sin(\\omega_{d} t)\\right].$$\nWith the given parameters $\\omega_{0}=100\\sqrt{2}$ and $Q=1/\\sqrt{3}$, we have\n$$\\frac{\\omega_{0}}{2Q}=50\\sqrt{6}, \\qquad \\omega_{d}=\\omega_{0}\\sqrt{1-\\frac{1}{4Q^{2}}}=50\\sqrt{2}, \\qquad \\frac{\\omega_{0}}{2Q\\,\\omega_{d}}=\\frac{1}{Q}=\\sqrt{3}.$$\nThus the low-pass output $v_{LP}(t)=x_{1}(t)$ for $t\\ge 0$ is\n$$v_{LP}(t)=1-\\exp\\!\\left(-50\\sqrt{6}\\,t\\right)\\left[\\cos\\!\\left(50\\sqrt{2}\\,t\\right)+\\sqrt{3}\\,\\sin\\!\\left(50\\sqrt{2}\\,t\\right)\\right].$$\nThis satisfies $v_{LP}(0)=0$, $\\frac{d v_{LP}}{dt}(0)=0$, and $\\lim_{t\\to\\infty}v_{LP}(t)=1$, as required for a unit-step response of a unity-gain low-pass filter.", "answer": "$$\\boxed{1-\\exp\\!\\left(-50\\sqrt{6}\\,t\\right)\\left[\\cos\\!\\left(50\\sqrt{2}\\,t\\right)+\\sqrt{3}\\,\\sin\\!\\left(50\\sqrt{2}\\,t\\right)\\right]}$$", "id": "1334679"}, {"introduction": "The theoretical understanding of a circuit is truly tested when things go wrong. This hypothetical exercise simulates a common real-world scenario: a wiring error during assembly. You will investigate how misconnecting the Q-factor feedback path from the band-pass output to the low-pass output dramatically alters the filter's transfer function. This practice emphasizes the critical importance of feedback topology and strengthens your ability to troubleshoot a circuit by systematically analyzing its signal flow. [@problem_id:1334698]", "problem": "An analog filter circuit is constructed using a summing junction and two identical cascaded inverting integrators, a common architecture for active filters.\n\nThe system is described by the following relationships in the Laplace domain:\n1.  The summing junction produces a high-pass output voltage, $V_{HP}(s)$, according to the relation: $V_{HP}(s) = V_{in}(s) - V_{LP}(s) + G_Q V_{Q\\_FB}(s)$. Here, $V_{in}(s)$ is the input signal, $V_{LP}(s)$ is the low-pass output of the filter, $G_Q$ is a positive real gain constant intended to set the filter's quality factor, and $V_{Q\\_FB}(s)$ is the voltage from the quality factor feedback path.\n2.  The first integrator takes $V_{HP}(s)$ as its input and produces the band-pass output, $V_{BP}(s)$.\n3.  The second integrator takes $V_{BP}(s)$ as its input and produces the low-pass output, $V_{LP}(s)$.\n4.  Both integrators are identical, and each has a transfer function of $-\\frac{1}{s\\tau}$, where $\\tau$ is a positive real time constant determined by the integrator components.\n\nDuring the circuit's assembly, a wiring error occurs. The quality factor feedback path, which was supposed to be connected to the band-pass output such that $V_{Q\\_FB}(s) = V_{BP}(s)$, is instead accidentally connected to the low-pass output, resulting in the connection $V_{Q\\_FB}(s) = V_{LP}(s)$.\n\nConsidering this wiring error, determine the resulting transfer function for the low-pass output, $H_{LP}(s) = \\frac{V_{LP}(s)}{V_{in}(s)}$. Express your answer as a single closed-form analytic expression in terms of $s$, $\\tau$, and $G_Q$.", "solution": "The problem asks for the transfer function $H_{LP}(s) = \\frac{V_{LP}(s)}{V_{in}(s)}$ of a mis-wired active filter circuit. We begin by writing down the system of equations that describes the behavior of the circuit with the specified wiring error.\n\nFirst, we write the equation for the summing junction. The problem states that the quality factor feedback path is erroneously connected to the low-pass output, so we set $V_{Q\\_FB}(s) = V_{LP}(s)$.\nThe summing junction's output is therefore:\n$$V_{HP}(s) = V_{in}(s) - V_{LP}(s) + G_Q V_{LP}(s)$$\nWe can combine the terms involving $V_{LP}(s)$:\n$$V_{HP}(s) = V_{in}(s) - (1 - G_Q) V_{LP}(s) \\quad (*)$$\n\nNext, we write the equations for the two cascaded integrators.\nThe first integrator's output is the band-pass signal:\n$$V_{BP}(s) = -\\frac{1}{s\\tau} V_{HP}(s) \\quad (**)$$\nThe second integrator's output is the low-pass signal:\n$$V_{LP}(s) = -\\frac{1}{s\\tau} V_{BP}(s) \\quad (***)$$\n\nOur goal is to find the relationship between $V_{LP}(s)$ and $V_{in}(s)$. To do this, we need to eliminate the intermediate variables $V_{HP}(s)$ and $V_{BP}(s)$.\n\nFrom equation $(***)$, we can express $V_{BP}(s)$ in terms of $V_{LP}(s)$:\n$$V_{BP}(s) = -s\\tau V_{LP}(s)$$\nNow, substitute this expression for $V_{BP}(s)$ into equation $(**)$ to relate $V_{HP}(s)$ to $V_{LP}(s)$:\n$$-s\\tau V_{LP}(s) = -\\frac{1}{s\\tau} V_{HP}(s)$$\nSolving for $V_{HP}(s)$:\n$$V_{HP}(s) = (s\\tau)(s\\tau) V_{LP}(s) = s^2 \\tau^2 V_{LP}(s)$$\n\nNow we have an expression for $V_{HP}(s)$ solely in terms of $V_{LP}(s)$. We can substitute this into the summing junction equation $(*)$:\n$$s^2 \\tau^2 V_{LP}(s) = V_{in}(s) - (1 - G_Q) V_{LP}(s)$$\n\nThe final step is to rearrange this equation to solve for the transfer function $H_{LP}(s) = \\frac{V_{LP}(s)}{V_{in}(s)}$. We move all terms with $V_{LP}(s)$ to the left side:\n$$s^2 \\tau^2 V_{LP}(s) + (1 - G_Q) V_{LP}(s) = V_{in}(s)$$\nFactor out $V_{LP}(s)$:\n$$V_{LP}(s) \\left[ s^2 \\tau^2 + 1 - G_Q \\right] = V_{in}(s)$$\nFinally, we divide by $V_{in}(s)$ and the bracketed term to get the transfer function:\n$$H_{LP}(s) = \\frac{V_{LP}(s)}{V_{in}(s)} = \\frac{1}{s^2 \\tau^2 + 1 - G_Q}$$\nThis is the closed-form analytic expression for the transfer function of the mis-wired filter.", "answer": "$$\\boxed{\\frac{1}{s^{2}\\tau^{2} + 1 - G_{Q}}}$$", "id": "1334698"}, {"introduction": "The line between filtering and oscillation is a fascinating and crucial concept in electronics. A filter with a very high quality factor is highly resonant, and at the limit, it becomes an oscillator. This exercise challenges you to find the precise condition under which a state-variable filter's poles lie on the imaginary $j\\omega$-axis, causing it to produce a sustained sinusoidal output. This practice bridges filter theory and oscillator design, providing a deep understanding of stability and the practical application of placing system poles to achieve a desired behavior. [@problem_id:1334688]", "problem": "An analog circuit intended to function as a stable sinusoidal generator is constructed using a state-variable topology with three ideal operational amplifiers (op-amps). The circuit consists of two identical inverting integrator stages and one inverting summing amplifier stage, connected in a closed loop.\n\nThe configuration is as follows:\n- The output of the summing amplifier is denoted as $V_1$.\n- The first integrator, with input $V_1$, produces an output $V_2$.\n- The second integrator, with input $V_2$, produces an output $V_3$.\n- The outputs $V_2$ and $V_3$ are both fed back as inputs to the summing amplifier to generate $V_1$ and close the loop.\n\nComponent details:\n- Each inverting integrator is constructed using an input resistor $R$ and a feedback capacitor $C$.\n- The inverting summing amplifier is constructed with the following connections to its inverting input terminal: the signal $V_2$ is fed through a resistor $R_Q$, and the signal $V_3$ is fed through a resistor $R_F$. The feedback resistor for this summing amplifier is also $R_F$.\n\nThe circuit is tuned to produce a sustained, stable sinusoidal oscillation by adjusting the value of the resistor $R_Q$. When this condition is met, the poles of the system's characteristic equation lie exactly on the imaginary axis of the complex s-plane.\n\nDetermine the angular frequency, $\\omega$, of this sustained oscillation. Express your answer as a symbolic expression in terms of $R$, $C$, and $R_F$.", "solution": "We model each block using ideal op-amp relations in the Laplace domain. For an inverting integrator with input resistor $R$ and feedback capacitor $C$, the transfer function is $V_{\\text{out}}(s) = -\\frac{1}{R C s} V_{\\text{in}}(s)$. Applying this to the cascaded integrators yields\n$$\nV_{2}(s) = -\\frac{1}{R C s} V_{1}(s), \\quad V_{3}(s) = -\\frac{1}{R C s} V_{2}(s) = \\frac{1}{(R C s)^{2}} V_{1}(s).\n$$\nThe inverting summing amplifier with feedback resistor $R_{F}$, input $V_{2}$ through $R_{Q}$, and input $V_{3}$ through $R_{F}$ gives\n$$\nV_{1}(s) = -\\frac{R_{F}}{R_{Q}} V_{2}(s) - \\frac{R_{F}}{R_{F}} V_{3}(s) = -\\frac{R_{F}}{R_{Q}} V_{2}(s) - V_{3}(s).\n$$\nSubstituting $V_{2}(s)$ and $V_{3}(s)$ in terms of $V_{1}(s)$,\n$$\nV_{1}(s) = -\\frac{R_{F}}{R_{Q}}\\left(-\\frac{1}{R C s} V_{1}(s)\\right) - \\frac{1}{(R C s)^{2}} V_{1}(s),\n$$\nwhich simplifies (dividing by $V_{1}(s)$ and multiplying both sides by $(R C s)^{2}$) to the characteristic equation\n$$\n(R C)^{2} s^{2} - \\frac{R_{F}}{R_{Q}} (R C) s + 1 = 0,\n$$\nor equivalently\n$$\ns^{2} - \\frac{R_{F}}{R_{Q} R C} s + \\frac{1}{(R C)^{2}} = 0.\n$$\nFor sustained sinusoidal oscillation, the poles lie on the imaginary axis, which for a second-order polynomial requires the $s$-term coefficient to be zero. Thus the tuning condition is $\\frac{R_{F}}{R_{Q} R C} = 0$, corresponding to idealized $R_{Q} \\to \\infty$. Under this condition, the characteristic equation reduces to\n$$\ns^{2} + \\frac{1}{(R C)^{2}} = 0,\n$$\nwhose roots are $s = \\pm j \\frac{1}{R C}$. Therefore, the angular frequency of sustained oscillation is\n$$\n\\omega = \\frac{1}{R C}.\n$$\nThis result is independent of $R_{F}$ and $R_{Q}$ at the oscillation condition.", "answer": "$$\\boxed{\\frac{1}{R C}}$$", "id": "1334688"}]}
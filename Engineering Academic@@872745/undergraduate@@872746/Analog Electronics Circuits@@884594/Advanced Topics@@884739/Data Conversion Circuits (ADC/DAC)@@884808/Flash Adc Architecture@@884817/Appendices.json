{"hands_on_practices": [{"introduction": "Before diving into the complex dynamics of an ADC, it's essential to grasp the fundamental relationship between its resolution and its physical size. This first exercise focuses on calculating the core components of a flash ADC, revealing how the number of comparators and resistors scales exponentially with the number of bits ($n$). This practice illustrates the primary trade-off of the flash architecture: its unparalleled speed is achieved at the cost of significant hardware complexity and power consumption [@problem_id:1304638].", "problem": "An electronics engineer is designing a high-speed data acquisition module for a digital oscilloscope. A key component of this design is a flash Analog-to-Digital Converter (ADC), which is selected for its extremely high sampling rate. A flash ADC architecture operates by simultaneously comparing the input analog voltage against a set of unique reference voltages. These reference voltages are generated by a precision resistor ladder network, and the outputs of all the comparators are fed into a priority encoder to generate the final binary code.\n\nThe design specification for the oscilloscope requires a vertical resolution corresponding to that of a 5-bit ADC. To estimate the required circuit complexity and component count, the engineer needs to determine the number of core analog building blocks. Assuming an ideal flash ADC architecture, what is the sum of the total number of comparators and the total number of resistors in the voltage divider ladder required for this 5-bit system?", "solution": "The problem asks for the total count of two key components in a 5-bit flash ADC: the comparators and the resistors in the voltage divider ladder. We will calculate the number of each component separately and then sum them.\n\nFirst, let's analyze the general architecture of an $n$-bit flash ADC. An $n$-bit ADC is designed to quantize an analog input into $2^n$ discrete digital levels.\n\nThe core of a flash ADC consists of a series of comparators. Each comparator checks if the input analog voltage, $V_{in}$, is higher or lower than a specific reference voltage, $V_{ref,i}$. To distinguish between $2^n$ different levels, we need to define the boundaries between them. There are $2^n - 1$ such boundaries. For example, for a 2-bit ADC ($n=2$), there are $2^2 = 4$ levels (e.g., 00, 01, 10, 11). To define these four regions, we need three threshold voltages, which in turn require three comparators. Generalizing this, for an $n$-bit resolution, the number of comparators, $N_{comp}$, is given by:\n$$N_{comp} = 2^n - 1$$\n\nNext, we consider the resistor ladder network. This network's purpose is to generate the $2^n - 1$ unique reference voltages required by the comparators. The most common implementation uses a series of identical resistors connected between a main reference voltage, $V_{ref}$, and ground. A chain of $k$ identical resistors will have $k-1$ nodes (taps) between them, providing $k-1$ distinct voltage levels. To obtain the required $2^n - 1$ reference voltages for the comparators, the resistor ladder must therefore consist of a total of $N_{res}$ resistors, where:\n$$N_{res} = 2^n$$\nThis configuration of $2^n$ resistors creates the necessary $2^n-1$ intermediate voltage taps.\n\nIn this specific problem, the ADC has a resolution of 5 bits, so we set $n=5$.\n\nNow we can calculate the number of comparators:\n$$N_{comp} = 2^5 - 1 = 32 - 1 = 31$$\n\nAnd the number of resistors in the ladder:\n$$N_{res} = 2^5 = 32$$\n\nThe problem asks for the sum of the total number of comparators and the total number of resistors. Let this sum be $N_{total}$.\n$$N_{total} = N_{comp} + N_{res}$$\nSubstituting the calculated values:\n$$N_{total} = 31 + 32 = 63$$\n\nThus, the sum of the number of comparators and resistors required is 63.", "answer": "$$\\boxed{63}$$", "id": "1304638"}, {"introduction": "Once an analog voltage is presented to the flash ADC, the bank of comparators simultaneously produces a pattern of high and low signals known as a \"thermometer code.\" The next critical step is to convert this raw pattern into a standard binary number. This problem isolates the function of the priority encoder, the digital logic block responsible for this translation, helping you understand how the ADC determines the final digital output from the comparator results [@problem_id:1304590].", "problem": "A 3-bit flash Analog-to-Digital Converter (ADC) is being designed. This type of ADC uses a voltage divider and a bank of comparators to directly digitize an analog input voltage, $V_{in}$. For an $n$-bit converter, $2^n - 1$ comparators are required. In this 3-bit design, seven comparators, indexed $C_1, C_2, \\dots, C_7$, are used. Each comparator $C_k$ compares $V_{in}$ to a unique reference voltage $V_{ref,k}$, where $V_{ref,1} < V_{ref,2} < \\dots < V_{ref,7}$. The output of each comparator $C_k$ is a single bit: '1' if $V_{in} > V_{ref,k}$ and '0' otherwise.\n\nThe seven outputs from the comparators are fed into a priority encoder. The function of this priority encoder is to identify the largest index $k$ for which the comparator output $C_k$ is '1', and then to generate the 3-bit binary representation of that index $k$. If all comparator outputs are '0', the encoder outputs `000`.\n\nAt a specific moment in time, the 7-bit output from the bank of comparators is measured. The output vector, representing the states $(C_1, C_2, C_3, C_4, C_5, C_6, C_7)$, is found to be `(1, 1, 1, 1, 0, 0, 0)`.\n\nWhat is the 3-bit binary output of the priority encoder?\n\nA. `011`\n\nB. `100`\n\nC. `101`\n\nD. `111`\n\nE. `001`", "solution": "A 3-bit flash ADC uses $2^{n}-1$ comparators; here $n=3$, so there are $7$ comparators $C_{1},\\dots,C_{7}$ with strictly increasing reference voltages $V_{\\text{ref},1}<\\cdots<V_{\\text{ref},7}$. Each comparator outputs $1$ if and only if $V_{\\text{in}}>V_{\\text{ref},k}$. For any fixed $V_{\\text{in}}$, this produces a thermometer code: there exists a largest index $k^{\\ast}$ such that $C_{k}=1$ for all $k\\leq k^{\\ast}$ and $C_{k}=0$ for all $k>k^{\\ast}$. The priority encoder outputs the 3-bit binary representation of $k^{\\ast}$, and if no comparator is $1$ it outputs $000$.\n\nThe measured comparator output vector is $(C_{1},C_{2},C_{3},C_{4},C_{5},C_{6},C_{7})=(1,1,1,1,0,0,0)$. This means that the comparator outputs for indices 1, 2, 3, and 4 are '1', while the outputs for indices 5, 6, and 7 are '0'. The set of indices with output '1' is\n$$\nS=\\{k\\in\\{1,2,3,4,5,6,7\\}\\,:\\,C_{k}=1\\}=\\{1,2,3,4\\}.\n$$\nThe priority encoder is designed to find the largest index in this set, which is\n$$\nk^{\\ast}=\\max S=4.\n$$\nThe final step is to convert this index, 4, into its 3-bit binary representation.\n$$4_{10} = 1 \\cdot 2^2 + 0 \\cdot 2^1 + 0 \\cdot 2^0 = 100_2$$\nHence, the priority encoder outputs `100`, which corresponds to option B.", "answer": "$$\\boxed{B}$$", "id": "1304590"}, {"introduction": "Ideal components exist only in textbooks; real-world circuits are built with components that have manufacturing tolerances. This final practice moves from an ideal model to a more realistic scenario by exploring how a small error in a single resistor within the voltage divider ladder impacts the ADC's performance. You will learn to calculate the Integral Non-Linearity (INL), a critical metric that quantifies the deviation from ideal behavior, providing a tangible understanding of how physical imperfections affect an ADC's accuracy [@problem_id:1304637].", "problem": "A 4-bit flash Analog-to-Digital Converter (ADC) is constructed using a series resistor ladder to generate its internal reference voltages. The ladder consists of 16 resistors, labeled $R_1, R_2, ..., R_{16}$ from ground upwards, connected between a ground reference (0 V) and a master reference voltage $V_{ref}$. The resistor $R_1$ has one end connected to ground, and the resistor $R_{16}$ has its other end connected to $V_{ref}$. There are 15 comparators, and the threshold voltage for the $k$-th comparator (for $k \\in \\{1, 2, ..., 15\\}$) is tapped from the node at the top of resistor $R_k$ (i.e., the node between $R_k$ and $R_{k+1}$).\n\nIdeally, all resistors have the same nominal resistance $R$. However, due to a manufacturing defect, one resistor, $R_8$, has an actual resistance of $R(1+\\delta)$, where $\\delta = 0.05$ (a +5% deviation). All other 15 resistors have their nominal resistance $R$.\n\nThe Integral Non-Linearity (INL) for the transition to digital code $k$ is defined as the deviation of the actual comparator threshold voltage ($V_{k,actual}$) from its ideal value ($V_{k,ideal}$), measured in units of Least Significant Bits (LSB). The ideal threshold for the $k$-th comparator is defined as $V_{k,ideal} = k \\cdot V_{LSB}$, where the voltage of one LSB is $V_{LSB} = V_{ref} / 16$.\n\nCalculate the worst-case INL for this ADC, which is the maximum absolute value of the INL, $\\max_{k \\in \\{1, ..., 15\\}} |INL(k)|$. Express your answer in units of LSBs, rounded to three significant figures.", "solution": "In a resistive ladder of series resistors between ground and $V_{ref}$ with no loading, the node voltage at the top of $R_{k}$ (between $R_{k}$ and $R_{k+1}$) is given by the voltage divider formula:\n$$\nV_{k,actual} = V_{ref}\\,\\frac{\\sum_{i=1}^{k} R_{i}}{\\sum_{i=1}^{16} R_{i}}.\n$$\nWith all resistors nominally $R$ except $R_{8} = R(1+\\delta)$, the total resistance is the sum of 15 ideal resistors and one deviant resistor:\n$$\nR_{\\text{tot}} = 15R + R(1+\\delta) = R(16+\\delta).\n$$\nThe partial sum of resistances up to node $k$ depends on whether the deviant resistor $R_8$ is included:\n$$\n\\sum_{i=1}^{k} R_{i} =\n\\begin{cases}\nkR, & k \\le 7,\\\\\n7R + R(1+\\delta) + (k-8)R = R(k+\\delta), & k \\ge 8.\n\\end{cases}\n$$\nThus the actual threshold voltages are:\n$$\nV_{k,actual} =\n\\begin{cases}\nV_{ref}\\,\\frac{k}{16+\\delta}, & k \\le 7,\\\\\nV_{ref}\\,\\frac{k+\\delta}{16+\\delta}, & k \\ge 8.\n\\end{cases}\n$$\nThe ideal thresholds are $V_{k,ideal} = k \\cdot V_{LSB}$ with $V_{LSB} = V_{ref}/16$. The INL in LSB units is:\n$$\nINL(k) = \\frac{V_{k,actual} - V_{k,ideal}}{V_{LSB}} = \\frac{V_{k,actual}}{V_{ref}/16} - \\frac{k \\cdot V_{LSB}}{V_{LSB}} = 16\\frac{V_{k,actual}}{V_{ref}} - k.\n$$\nSubstituting the expressions for $V_{k,actual}$:\n$$\nINL(k) = \n\\begin{cases}\n\\frac{16k}{16+\\delta} - k = k\\left(\\frac{16}{16+\\delta} - 1\\right) = -\\frac{k\\delta}{16+\\delta},  k \\le 7 \\\\\n\\frac{16(k+\\delta)}{16+\\delta} - k = \\frac{16k+16\\delta-k(16+\\delta)}{16+\\delta} = \\frac{\\delta(16-k)}{16+\\delta},  k \\ge 8\n\\end{cases}\n$$\nTo find the worst-case (maximum absolute) INL, we analyze the two ranges.\nFor $k \\le 7$, $|INL(k)| = \\frac{k\\delta}{16+\\delta}$ is a positive, increasing function of $k$, so its maximum value in this range occurs at $k=7$, yielding $|INL(7)| = \\frac{7\\delta}{16+\\delta}$.\nFor $k \\ge 8$, $|INL(k)| = \\frac{\\delta(16-k)}{16+\\delta}$ is a positive, decreasing function of $k$, so its maximum value in this range occurs at $k=8$, yielding $|INL(8)| = \\frac{8\\delta}{16+\\delta}$.\nThe overall worst-case INL is the larger of these two values. Since $\\frac{8\\delta}{16+\\delta} > \\frac{7\\delta}{16+\\delta}$, the maximum absolute INL occurs at $k=8$.\nThus, $\\max_{k \\in \\{1, ..., 15\\}} |INL(k)| = \\frac{8\\delta}{16+\\delta}$.\n\nWith $\\delta = 0.05$:\n$$\n\\max |INL| = \\frac{8 \\times 0.05}{16 + 0.05} = \\frac{0.4}{16.05} = \\frac{8}{321} \\approx 0.024922 \\text{ LSB}.\n$$\nRounded to three significant figures, the worst-case INL is $0.0249$ LSB.", "answer": "$$\\boxed{0.0249}$$", "id": "1304637"}]}
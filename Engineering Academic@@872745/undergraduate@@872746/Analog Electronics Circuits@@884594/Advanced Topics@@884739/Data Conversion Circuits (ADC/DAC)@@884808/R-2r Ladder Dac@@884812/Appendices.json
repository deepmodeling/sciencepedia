{"hands_on_practices": [{"introduction": "The most fundamental task of a Digital-to-Analog Converter (DAC) is to convert a binary number into a proportional analog voltage. This first exercise provides practice with this core function for an R-2R ladder DAC connected to an inverting operational amplifier. By working through this problem, you will solidify your understanding of how binary-weighted currents are generated by the ladder and summed to create the final output voltage [@problem_id:1327560].", "problem": "A 4-bit Digital-to-Analog Converter (DAC) is constructed using a standard R-2R ladder network architecture. This network is connected to an ideal operational amplifier configured as an inverting summing amplifier. The feedback resistor of the op-amp, $R_f$, is equal to the base resistance $R$ of the ladder network. Each bit of the 4-bit digital input is represented by a switch. A digital '1' connects the corresponding input of the R-2R ladder to a stable reference voltage, $V_{ref}$, while a digital '0' connects it to ground (0 V). For this specific circuit, the reference voltage is given as $V_{ref} = 8.0$ V.\n\nDetermine the analog output voltage from the operational amplifier for the binary input word `1101`, where the leftmost bit is the Most Significant Bit (MSB) and the rightmost bit is the Least Significant Bit (LSB). Express your answer in volts (V).", "solution": "For an ideal inverting op-amp with negative feedback, the inverting input is at virtual ground, so its voltage is 0 V and its input bias current is zero. Let the 4-bit word be $b_3 b_2 b_1 b_0$, where $b_3$ is the MSB and $b_0$ is the LSB.\n\nIn an R-2R ladder connected to a virtual ground summing node, the current contributed by each bit is binary-weighted. The total current $I_{\\text{in}}$ flowing from the ladder into the summing node is the sum of the currents from each bit input connected to $V_{ref}$:\n$$\nI_{\\text{in}} = \\frac{V_{ref}}{R} \\left( \\frac{b_3}{2} + \\frac{b_2}{4} + \\frac{b_1}{8} + \\frac{b_0}{16} \\right).\n$$\nApplying KCL at the virtual-ground node, this input current must be equal to the current leaving through the feedback resistor, $-I_f$. The output voltage is $V_{out} = I_f R_f = -I_{\\text{in}}R_f$.\nWith $R_f = R$, this becomes:\n$$\nV_{out} = -V_{ref} \\left( \\frac{b_3}{2} + \\frac{b_2}{4} + \\frac{b_1}{8} + \\frac{b_0}{16} \\right).\n$$\nFor the input word `1101`, we have $b_3=1$, $b_2=1$, $b_1=0$, and $b_0=1$. The weighted sum is:\n$$\n\\frac{1}{2} + \\frac{1}{4} + \\frac{0}{8} + \\frac{1}{16} = \\frac{8}{16} + \\frac{4}{16} + 0 + \\frac{1}{16} = \\frac{13}{16}.\n$$\nThus, the output voltage is:\n$$\nV_{out} = - V_{ref}\\,\\frac{13}{16}.\n$$\nSubstituting $V_{ref} = 8.0$ V gives:\n$$\nV_{out} = - 8.0 \\times \\frac{13}{16} = - \\frac{13}{2} = -6.5 \\text{ V}.\n$$", "answer": "$$\\boxed{-6.5}$$", "id": "1327560"}, {"introduction": "Building on the previous exercise, this practice reverses the scenario: given a specific analog output voltage, you must determine the digital input code that produced it. This skill is not just an academic exercise; it is crucial for debugging, calibrating systems, and interpreting measured data from a DAC circuit. This problem will challenge you to apply the R-2R DAC formula in reverse, reinforcing your conceptual grasp of the conversion process [@problem_id:1327519].", "problem": "A 4-bit R-2R ladder Digital-to-Analog Converter (DAC) is constructed using an ideal operational amplifier in an inverting summing configuration. The resistor network uses base resistors of value $R$. The feedback resistor, $R_f$, of the operational amplifier is also set to be equal to $R$. The non-inverting input of the operational amplifier is connected to ground.\n\nThe 4-bit digital input is represented by the binary word $D_3D_2D_1D_0$, where $D_3$ is the Most Significant Bit (MSB) and $D_0$ is the Least Significant Bit (LSB). For each bit $D_i$, if the bit is '1', the corresponding input terminal of the ladder is connected to a reference voltage $V_{ref} = 8.0$ V. If the bit is '0', the terminal is connected to ground (0 V).\n\nIf the measured steady-state output voltage of the circuit is $V_{out} = -2.5$ V, determine the 4-bit binary input code $D_3D_2D_1D_0$.\n\nA. 0100\n\nB. 0101\n\nC. 0110\n\nD. 1010\n\nE. 0011", "solution": "Because the operational amplifier is ideal, with negative feedback and its non-inverting input grounded, the summing node is at virtual ground. The R-2R ladder generates binary-weighted currents into this virtual ground. By superposition and the properties of the R-2R ladder, the total input current into the summing node is\n$$\nI_{\\text{in}}=\\frac{V_{ref}}{R}\\left(\\frac{D_{3}}{2}+\\frac{D_{2}}{4}+\\frac{D_{1}}{8}+\\frac{D_{0}}{16}\\right).\n$$\nWith zero input bias current, this same current flows through the feedback resistor. By Ohmâ€™s law across the feedback resistor, the output voltage is\n$$\nV_{out}=-R_{f}I_{\\text{in}}.\n$$\nGiven $R_{f}=R$, this simplifies to\n$$\nV_{out}=-V_{ref}\\left(\\frac{D_{3}}{2}+\\frac{D_{2}}{4}+\\frac{D_{1}}{8}+\\frac{D_{0}}{16}\\right).\n$$\nSubstituting $V_{ref}=8.0$ V and the measured $V_{out}=-2.5$ V,\n$$\n-2.5=-8.0\\left(\\frac{D_{3}}{2}+\\frac{D_{2}}{4}+\\frac{D_{1}}{8}+\\frac{D_{0}}{16}\\right)\n\\quad\\Rightarrow\\quad\n\\frac{D_{3}}{2}+\\frac{D_{2}}{4}+\\frac{D_{1}}{8}+\\frac{D_{0}}{16}=\\frac{2.5}{8}=\\frac{5}{16}.\n$$\nTo find the binary code, we express the fraction $5/16$ as a sum of binary-weighted fractions:\n$$\n\\frac{5}{16} = \\frac{4}{16} + \\frac{1}{16} = \\frac{1}{4} + \\frac{1}{16}.\n$$\nMatching this to the formula, we have:\n$$\n\\frac{D_{3}}{2}+\\frac{D_{2}}{4}+\\frac{D_{1}}{8}+\\frac{D_{0}}{16}=\\frac{0}{2}+\\frac{1}{4}+\\frac{0}{8}+\\frac{1}{16}.\n$$\nTherefore, the binary input code is $D_{3}D_{2}D_{1}D_{0}=0101$, which matches option B.", "answer": "$$\\boxed{B}$$", "id": "1327519"}, {"introduction": "Ideal components exist only in textbooks; real-world circuits are subject to manufacturing tolerances that affect their performance. This practice moves from ideal theory to practical analysis by examining the impact of resistor mismatch on a key DAC performance metric: Differential Non-Linearity (DNL). You will calculate the DNL at a \"major code transition,\" where the effects of component error are often most pronounced, providing insight into the sources of non-linearity in DACs [@problem_id:1327546].", "problem": "A 4-bit voltage-mode R-2R ladder Digital-to-Analog Converter (DAC) is analyzed for its non-ideal characteristics. The ladder network is constructed as follows:\n\nA terminating resistor of value $2R$ is connected to ground. The top end of this resistor defines node $N_0$, which corresponds to the Least Significant Bit (LSB). At node $N_0$, a shunt resistor of value $2R$ is connected to a voltage source representing the LSB, which provides a voltage of $b_0 V_{\\text{ref}}$. A series resistor connects node $N_0$ to node $N_1$.\n\nAt node $N_1$, a shunt resistor of value $2R$ is connected to its corresponding bit source $b_1 V_{\\text{ref}}$, and a series resistor connects node $N_1$ to node $N_2$. This structure is repeated for node $N_2$ (bit $b_2$) and node $N_3$ (bit $b_3$, the Most Significant Bit or MSB). The output voltage of the DAC, $V_{\\text{out}}$, is the voltage at the final node, $N_3$.\n\nIn an ideal DAC, all series resistors would have a value of $R$. However, in this specific device, a manufacturing defect has occurred. All resistors are ideal except for the series resistor connecting the MSB node ($N_3$) to the adjacent node ($N_2$). This faulty resistor has a value of $R' = R(1+\\epsilon)$, where $\\epsilon = 0.01$ represents a +1% error.\n\nCalculate the Differential Non-Linearity (DNL), expressed in units of LSBs, for the major code transition from the digital input '0111' to '1000'. Round your final answer to four significant figures.", "solution": "Define the DNL at code $k$ as \n$$\\mathrm{DNL}_{k}=\\frac{V_{\\text{out}}(k+1)-V_{\\text{out}}(k)}{V_{\\text{LSB,ideal}}}-1$$\nwith $V_{\\text{LSB,ideal}}=\\frac{V_{\\text{ref}}}{2^{4}}=\\frac{V_{\\text{ref}}}{16}$ for a 4-bit DAC. We need the step from code '0111' ($k=7$) to '1000' ($k=8$), i.e., $\\Delta V = V_{\\text{out}}(1000)-V_{\\text{out}}(0111)$.\n\nBy linearity, write $V_{\\text{out}}=V_{\\text{ref}}\\sum_{i=0}^{3}w_{i}b_{i}$, where $w_{i}$ are the bit weights in the non-ideal ladder. Only the series resistor between $N_{2}$ and $N_{3}$ is non-ideal, with $R'=R(1+\\epsilon)$.\n\nWe compute the weights using superposition and Thevenin transformations.\n\n1) MSB weight $w_{3}$ (only $b_{3}=1$):\nWith lower bits at 0, the equivalent resistance to ground seen from $N_{2}$ is $R$ (a standard R-2R property). Thus the downward impedance from $N_{3}$ is $Z_{\\text{down}}=R'+R=R(1+\\epsilon)+R=R(2+\\epsilon)$. The node $N_{3}$ is a voltage divider between the $2R$ shunt resistor to $V_{\\text{ref}}$ and $Z_{\\text{down}}$ to ground, giving\n$$\nw_{3}=\\frac{V_{\\text{out}}}{V_{\\text{ref}}}=\\frac{Z_{\\text{down}}}{2R+Z_{\\text{down}}}=\\frac{R(2+\\epsilon)}{2R+R(2+\\epsilon)}=\\frac{2+\\epsilon}{4+\\epsilon}.\n$$\n\n2) Weight $w_{2}$ (only $b_{2}=1$):\nThe Thevenin equivalent of the source at $b_2$ and the ladder below it, as seen from node $N_2$, is $V_{\\text{th},2}=\\frac{V_{\\text{ref}}}{2}$ and $R_{\\text{th},2}=R$. This Thevenin source at $N_2$ drives the rest of the circuit up to the output at $N_3$. The output voltage is $V_{\\text{out}} = V_{\\text{th},2} \\frac{2R}{R_{\\text{th},2} + R' + 2R} = \\frac{V_{\\text{ref}}}{2} \\frac{2R}{R + R(1+\\epsilon) + 2R} = V_{\\text{ref}} \\frac{1}{4+\\epsilon}$.\nSo, $w_2 = \\frac{1}{4+\\epsilon}$.\n\n3) Weight $w_{1}$ (only $b_{1}=1$):\nSimilarly, the Thevenin equivalent at node $N_2$ due to the source at $b_1$ is $V_{\\text{th},2}=\\frac{V_{\\text{ref}}}{4}$ and $R_{\\text{th},2}=R$. Propagating this to the output gives $V_{\\text{out}} = V_{\\text{th},2} \\frac{2R}{R_{\\text{th},2} + R' + 2R} = \\frac{V_{\\text{ref}}}{4} \\frac{2R}{R(4+\\epsilon)} = V_{\\text{ref}}\\frac{1}{2(4+\\epsilon)}$.\nSo, $w_1 = \\frac{1}{2(4+\\epsilon)}$.\n\n4) Weight $w_{0}$ (only $b_{0}=1$):\nThe Thevenin equivalent at $N_2$ due to the source at $b_0$ is $V_{\\text{th},2}=\\frac{V_{\\text{ref}}}{8}$ and $R_{\\text{th},2}=R$. Propagating this to the output gives $V_{\\text{out}} = V_{\\text{th},2} \\frac{2R}{R_{\\text{th},2} + R' + 2R} = \\frac{V_{\\text{ref}}}{8} \\frac{2R}{R(4+\\epsilon)} = V_{\\text{ref}}\\frac{1}{4(4+\\epsilon)}$.\nSo, $w_0 = \\frac{1}{4(4+\\epsilon)}$.\n\nThe actual voltage step for the transition is:\n$$\n\\Delta V=V_{\\text{out}}(1000)-V_{\\text{out}}(0111) = V_{\\text{ref}}\\left[w_{3}-(w_{2}+w_{1}+w_{0})\\right].\n$$\nThe sum of the lower weights is:\n$$\nw_{2}+w_{1}+w_{0}=\\frac{1}{4+\\epsilon}\\left(1+\\frac{1}{2}+\\frac{1}{4}\\right)=\\frac{7}{4(4+\\epsilon)}.\n$$\nThe difference is:\n$$\nw_{3}-(w_{2}+w_{1}+w_{0})=\\frac{2+\\epsilon}{4+\\epsilon}-\\frac{7}{4(4+\\epsilon)}=\\frac{4(2+\\epsilon)-7}{4(4+\\epsilon)} = \\frac{8+4\\epsilon-7}{4(4+\\epsilon)} = \\frac{1+4\\epsilon}{4(4+\\epsilon)}.\n$$\nThe DNL at this transition is:\n$$\n\\mathrm{DNL}=\\frac{\\Delta V}{V_{\\text{LSB,ideal}}}-1 = \\frac{V_{\\text{ref}}\\frac{1+4\\epsilon}{4(4+\\epsilon)}}{V_{\\text{ref}}/16} - 1 = \\frac{16(1+4\\epsilon)}{4(4+\\epsilon)} - 1 = \\frac{4(1+4\\epsilon)}{4+\\epsilon} - 1\n$$\n$$\n\\mathrm{DNL} = \\frac{4+16\\epsilon - (4+\\epsilon)}{4+\\epsilon} = \\frac{15\\epsilon}{4+\\epsilon}.\n$$\nFor $\\epsilon=0.01$:\n$$\n\\mathrm{DNL}=\\frac{15\\times 0.01}{4+0.01}=\\frac{0.15}{4.01}\\approx 0.03740648 \\text{ LSB}.\n$$\nRounding to four significant figures gives 0.03741 LSB.", "answer": "$$\\boxed{0.03741}$$", "id": "1327546"}]}
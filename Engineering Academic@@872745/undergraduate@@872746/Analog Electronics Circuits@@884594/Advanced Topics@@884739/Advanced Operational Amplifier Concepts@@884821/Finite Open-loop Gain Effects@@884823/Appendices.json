{"hands_on_practices": [{"introduction": "While we often assume op-amps have infinite gain, real-world components have limitations. One of the most direct consequences of this is a deviation of the actual closed-loop gain from its ideal, textbook value. This first exercise provides a practical method for quantifying this gain error in a standard non-inverting amplifier, helping you connect the theoretical formula for gain error to tangible performance metrics. [@problem_id:1303322]", "problem": "A non-inverting amplifier circuit is constructed using an operational amplifier (op-amp) and a resistive feedback network. The circuit is designed to achieve a specific target for its ideal closed-loop voltage gain, referred to as the nominal gain, $G_{nom}$. This nominal gain is set by the configuration of the feedback network, which is characterized by a feedback factor $\\beta$.\n\nFor this particular design, the nominal gain is chosen to be $G_{nom} = 20$. However, due to the non-ideal nature of the op-amp, specifically its finite DC open-loop gain $A_0$, the measured actual closed-loop gain, $G_{act}$, deviates from the nominal value. The resulting fractional gain error, which is defined as $\\frac{G_{nom} - G_{act}}{G_{nom}}$, is found to be 1.0%.\n\nCalculate the dimensionless feedback factor $\\beta$ that was used in the design of this amplifier. Round your final answer to two significant figures.", "solution": "For a non-inverting amplifier with feedback factor $\\beta$, the ideal (nominal) closed-loop gain is the limit as the op-amp open-loop gain $A_{0} \\to \\infty$:\n$$\nG_{nom}=\\lim_{A_{0}\\to\\infty}\\frac{A_{0}}{1+A_{0}\\beta}=\\frac{1}{\\beta}.\n$$\nHence,\n$$\n\\beta=\\frac{1}{G_{nom}}.\n$$\nGiven $G_{nom}=20$, this gives\n$$\n\\beta=\\frac{1}{20}.\n$$\nFor completeness, with finite $A_{0}$ the actual closed-loop gain is $G_{act}=A_{0}/(1+A_{0}\\beta)$, and the fractional gain error is\n$$\n\\frac{G_{nom}-G_{act}}{G_{nom}}=\\frac{\\frac{1}{\\beta}-\\frac{A_{0}}{1+A_{0}\\beta}}{\\frac{1}{\\beta}}=1-\\frac{A_{0}\\beta}{1+A_{0}\\beta}=\\frac{1}{1+A_{0}\\beta}.\n$$\nThe given error of $0.010$ implies $A_{0}\\beta=99$, consistent with $\\beta=1/20$, but the required $\\beta$ is determined directly from $G_{nom}$ as above. Rounding to two significant figures:\n$$\n\\beta=5.0\\times 10^{-2}.\n$$", "answer": "$$\\boxed{5.0 \\times 10^{-2}}$$", "id": "1303322"}, {"introduction": "The effects of finite open-loop gain are not limited to closed-loop feedback amplifiers. When an op-amp is used in an open-loop configuration, such as a comparator, its finite gain manifests in a different but equally important way. This practice problem explores how finite gain creates an \"input uncertainty region\" instead of an ideal, instantaneous switching point, a critical consideration in designing precision threshold detectors and data converters. [@problem_id:1303311]", "problem": "An engineer is designing a simple threshold detector using a non-ideal Operational Amplifier (op-amp) configured as a comparator. The op-amp is powered by symmetric supply voltages, $+V_S$ and $-V_S$. The output of the op-amp saturates precisely at these supply voltages. The op-amp has a finite DC open-loop gain of $A_0$.\n\nThe comparator's inverting input terminal is connected to a stable reference voltage $V_{ref}$. The non-inverting input terminal is connected to an input signal voltage $V_{in}$.\n\nAn ideal op-amp (with infinite gain) would switch its output instantaneously from $-V_S$ to $+V_S$ precisely when $V_{in}$ crosses $V_{ref}$. However, due to the finite gain $A_0$, there is a narrow range of input voltages over which the op-amp operates in its linear region and the output voltage $V_{out}$ is not saturated. This range is often called the \"transition width\" or \"input uncertainty region\".\n\nDetermine an expression for the total width of this input voltage range, $\\Delta V_{in}$, over which the op-amp's output is in the linear region (i.e., $-V_S < V_{out} < +V_S$). Express your answer in terms of $V_S$ and $A_0$.", "solution": "Model the non-ideal op-amp in its linear region by the open-loop relation $V_{out} = A_{0}(V_{+} - V_{-})$, with saturation limits at $\\pm V_{S}$. Here, $V_{+} = V_{in}$ and $V_{-} = V_{ref}$, so in the linear region\n$$\nV_{out} = A_{0}\\left(V_{in} - V_{ref}\\right).\n$$\nThe condition for the output to remain unsaturated is\n$$\n-V_{S} < V_{out} < +V_{S}.\n$$\nSubstituting the linear relation gives\n$$\n-V_{S} < A_{0}\\left(V_{in} - V_{ref}\\right) < +V_{S}.\n$$\nAssuming $A_{0} > 0$, divide through by $A_{0}$:\n$$\n-\\frac{V_{S}}{A_{0}} < V_{in} - V_{ref} < \\frac{V_{S}}{A_{0}}.\n$$\nHence the input interval over which the op-amp remains in its linear region is\n$$\nV_{ref} - \\frac{V_{S}}{A_{0}} < V_{in} < V_{ref} + \\frac{V_{S}}{A_{0}},\n$$\nwhich is centered at $V_{ref}$ and has total width\n$$\n\\Delta V_{in} = \\left(V_{ref} + \\frac{V_{S}}{A_{0}}\\right) - \\left(V_{ref} - \\frac{V_{S}}{A_{0}}\\right) = \\frac{2V_{S}}{A_{0}}.\n$$", "answer": "$$\\boxed{\\frac{2V_{S}}{A_{0}}}$$", "id": "1303311"}, {"introduction": "Real-world signal processing chains often involve multiple amplifier stages cascaded together. Understanding how the non-ideal characteristics of each stage accumulate is crucial for predicting the overall system performance. This final exercise challenges you to extend the analysis of a single amplifier to a two-stage system, demonstrating how the gain error due to finite open-loop gain propagates and compounds in more complex circuits. [@problem_id:1303283]", "problem": "A signal processing front-end is designed by cascading two identical inverting amplifier stages. Each stage is built around an operational amplifier (op-amp) and configured with an input resistor $R_{in}$ and a feedback resistor $R_f$. The two op-amps are identical and are characterized by a finite, real, and positive open-loop voltage gain of $A_0$. The input and feedback resistors for both stages are also identical. To simplify the analysis, let's define a dimensionless parameter $K = \\frac{R_f}{R_{in}}$, which corresponds to the magnitude of the voltage gain of a single stage if the op-amps were ideal.\n\nThe input voltage to the first stage is $v_{in}$. The output of the first stage is connected directly to the input of the second stage. The final output voltage of the entire two-stage circuit is $v_{out}$. For this analysis, assume that both op-amps have infinite input impedance and zero output impedance.\n\nDerive a symbolic expression for the total closed-loop voltage gain, $G_{total} = \\frac{v_{out}}{v_{in}}$, of this two-stage amplifier. Your final expression should be in terms of only $K$ and $A_0$.", "solution": "Let a single inverting stage have input voltage $v_{i}$, output voltage $v_{o}$, input resistor $R_{in}$, and feedback resistor $R_{f}$. Denote the inverting input node voltage by $v_{x}$ and note that the noninverting input is grounded. The op-amp relation with finite open-loop gain $A_{0}$ is\n$$\nv_{o}=A_{0}(0-v_{x})=-A_{0}v_{x}\\quad\\Rightarrow\\quad v_{x}=-\\frac{v_{o}}{A_{0}}.\n$$\nApplying KCL at the inverting input node (no input current flows due to infinite input impedance),\n$$\n\\frac{v_{i}-v_{x}}{R_{in}}+\\frac{v_{o}-v_{x}}{R_{f}}=0.\n$$\nMultiply both sides by $R_{in}R_{f}$ and substitute $v_{x}=-v_{o}/A_{0}$ to obtain\n$$\nR_{f}\\left(v_{i}+\\frac{v_{o}}{A_{0}}\\right)+R_{in}\\left(v_{o}+\\frac{v_{o}}{A_{0}}\\right)=0,\n$$\nwhich rearranges to\n$$\nv_{o}\\left(R_{in}+\\frac{R_{f}+R_{in}}{A_{0}}\\right)+R_{f}v_{i}=0.\n$$\nHence the closed-loop gain of one stage is\n$$\n\\frac{v_{o}}{v_{i}}=-\\frac{R_{f}}{R_{in}+\\frac{R_{f}+R_{in}}{A_{0}}}.\n$$\nWith $K=\\frac{R_{f}}{R_{in}}$, divide numerator and denominator by $R_{in}$ to get\n$$\n\\frac{v_{o}}{v_{i}}=-\\frac{K}{1+\\frac{K+1}{A_{0}}}=-\\frac{K A_{0}}{A_{0}+K+1}.\n$$\nThe two stages are identical and cascaded, with infinite input impedance and zero output impedance ensuring that interstage loading does not alter the individual stage gains. Therefore, the total gain is the product of the two identical stage gains:\n$$\nG_{total}=\\left(-\\frac{K A_{0}}{A_{0}+K+1}\\right)\\left(-\\frac{K A_{0}}{A_{0}+K+1}\\right)=\\left(\\frac{K A_{0}}{A_{0}+K+1}\\right)^{2}.\n$$\nThis expression is in terms of only $K$ and $A_{0}$, as required.", "answer": "$$\\boxed{\\left(\\frac{K A_{0}}{A_{0}+K+1}\\right)^{2}}$$", "id": "1303283"}]}
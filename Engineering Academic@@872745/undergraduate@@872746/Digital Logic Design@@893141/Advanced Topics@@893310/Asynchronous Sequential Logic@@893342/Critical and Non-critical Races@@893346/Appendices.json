{"hands_on_practices": [{"introduction": "The first step in designing robust asynchronous circuits is learning to identify potential hazards directly from the circuit's mathematical description. This exercise provides the excitation equations for a sequential circuit and asks you to pinpoint which starting conditions will lead to a critical race when an input changes. By analyzing the state transitions, you will practice the fundamental skill of predicting and diagnosing unstable behavior before it becomes a problem in a real-world system [@problem_id:1925474].", "problem": "An asynchronous sequential circuit, used as a controller, has its behavior defined by the excitation equations for its two internal memory elements, $y_1$ and $y_2$. The next state of the circuit, denoted by $(Y_1, Y_2)$, is determined by the present state $(y_1, y_2)$ and an external input $x$. The governing equations are:\n$$Y_1 = y_2'x' + y_1x$$\n$$Y_2 = y_1'x' + y_2x$$\nHere, $x'$ represents the logical NOT of $x$.\n\nA state $(y_1, y_2)$ is considered **stable** for a given input $x$ if the next state is the same as the present state, i.e., $(Y_1, Y_2) = (y_1, y_2)$.\n\nA **race condition** occurs when a change in the input signal causes the circuit to transition from a stable state to a new state where both internal state variables, $y_1$ and $y_2$, are required to change simultaneously.\n\nA race is defined as **critical** if the final stable state the circuit settles into depends on the unpredictable order in which the state variables change. If the circuit reaches the same final stable state regardless of the order, the race is **non-critical**.\n\nSuppose the controller is operating in a stable state with the input held at $x=1$. The input then abruptly switches to $x=0$. Which of the following initial stable states $(y_1, y_2)$ will cause the circuit to enter a critical race? Select all valid options.\n\nA. (0, 0)\n\nB. (0, 1)\n\nC. (1, 0)\n\nD. (1, 1)", "solution": "We are given the excitation equations\n$$Y_{1}=y_{2}'x'+y_{1}x,\\quad Y_{2}=y_{1}'x'+y_{2}x.$$\nA state $(y_{1},y_{2})$ is stable for a given $x$ if $Y_{1}=y_{1}$ and $Y_{2}=y_{2}$.\n\nFirst, determine stability when $x=1$. Substituting $x=1$ gives $x'=0$, hence\n$$Y_{1}=y_{2}'\\cdot 0+y_{1}\\cdot 1=y_{1},\\quad Y_{2}=y_{1}'\\cdot 0+y_{2}\\cdot 1=y_{2}.$$\nTherefore, for $x=1$ every state $(y_{1},y_{2})\\in\\{(0,0),(0,1),(1,0),(1,1)\\}$ is stable.\n\nNow the input switches abruptly to $x=0$. Substituting $x=0$ gives $x'=1$, hence\n$$Y_{1}=y_{2}',\\quad Y_{2}=y_{1}'.$$\nThus, for $x=0$ a state is stable if and only if $(y_{1},y_{2})=(y_{2}',y_{1}')$, i.e., $y_{1}=y_{2}'$ and $y_{2}=y_{1}'$, which occurs precisely for $(0,1)$ and $(1,0)$.\n\nExamine each initial stable state at $x=1$ and its behavior immediately after switching to $x=0$:\n- From $(0,1)$: With $x=0$, $Y_{1}=y_{2}'=0$, $Y_{2}=y_{1}'=1$, so $(Y_{1},Y_{2})=(0,1)$. No change is required; there is no race.\n- From $(1,0)$: With $x=0$, $Y_{1}=y_{2}'=1$, $Y_{2}=y_{1}'=0$, so $(Y_{1},Y_{2})=(1,0)$. No change is required; there is no race.\n- From $(0,0)$: With $x=0$, $Y_{1}=y_{2}'=1$, $Y_{2}=y_{1}'=1$, so $(Y_{1},Y_{2})=(1,1)$. Both $y_{1}$ and $y_{2}$ must change, so a race condition occurs. To test criticality, consider the two possible one-at-a-time transitions due to unequal delays:\n  - If $y_{1}$ changes first: $(0,0)\\to(1,0)$. Recompute at $(1,0)$: $Y_{1}=y_{2}'=1$, $Y_{2}=y_{1}'=0$, so $(1,0)$ is stable; the circuit settles at $(1,0)$.\n  - If $y_{2}$ changes first: $(0,0)\\to(0,1)$. Recompute at $(0,1)$: $Y_{1}=y_{2}'=0$, $Y_{2}=y_{1}'=1$, so $(0,1)$ is stable; the circuit settles at $(0,1)$.\n  The final stable state depends on the order, so the race is critical.\n- From $(1,1)$: With $x=0$, $Y_{1}=y_{2}'=0$, $Y_{2}=y_{1}'=0$, so $(Y_{1},Y_{2})=(0,0)$. Both $y_{1}$ and $y_{2}$ must change, so a race condition occurs. Test criticality:\n  - If $y_{1}$ changes first: $(1,1)\\to(0,1)$. At $(0,1)$, $(Y_{1},Y_{2})=(0,1)$, so it is stable; final state $(0,1)$.\n  - If $y_{2}$ changes first: $(1,1)\\to(1,0)$. At $(1,0)$, $(Y_{1},Y_{2})=(1,0)$, so it is stable; final state $(1,0)$.\n  The final stable state depends on the order, so the race is critical.\n\nTherefore, the input change $x:1\\to 0$ causes critical races precisely from the initial states $(0,0)$ and $(1,1)$, i.e., options A and D.", "answer": "$$\\boxed{AD}$$", "id": "1925474"}, {"introduction": "To master the difference between a critical and non-critical race, it can be insightful to intentionally create one. This practice challenges you to take a circuit with a safe, non-critical race and make a single modification to its flow table to transform it into a hazardous critical race. This \"reverse-engineering\" approach deepens your understanding of how diverging transition paths lead to unpredictable final states, a key concept in asynchronous design [@problem_id:1925440].", "problem": "An asynchronous sequential circuit is designed with two state variables, $y_2$ and $y_1$, and a single external input, $x$. The circuit's behavior is described by the following next-state table, where the entries represent the next state $Y_2 Y_1$.\n\n- For present state $y_2 y_1 = 00$, the next state $Y_2 Y_1$ is $00$ when $x=0$ and $11$ when $x=1$.\n- For present state $y_2 y_1 = 01$, the next state $Y_2 Y_1$ is $01$ when $x=0$ and $11$ when $x=1$.\n- For present state $y_2 y_1 = 11$, the next state $Y_2 Y_1$ is $01$ when $x=0$ and $11$ when $x=1$.\n- For present state $y_2 y_1 = 10$, the next state $Y_2 Y_1$ is $00$ when $x=0$ and $11$ when $x=1$.\n\nA stable state occurs when the next state is the same as the present state ($Y_2 Y_1 = y_2 y_1$). Initially, the circuit is in the stable state corresponding to $y_2 y_1 = 00$ and $x=0$. The input $x$ then changes from $0$ to $1$. This transition induces a non-critical race condition.\n\nWhich one of the following proposed modifications to a single entry in the next-state table would convert this specific non-critical race into a critical race?\n\nA. Change the next-state entry for present state $10$ and input $1$ to $10$.\n\nB. Change the next-state entry for present state $00$ and input $1$ to $01$.\n\nC. Change the next-state entry for present state $11$ and input $0$ to $11$.\n\nD. Change the next-state entry for present state $01$ and input $1$ to $10$.\n\nE. Change the next-state entry for present state $10$ and input $0$ to $10$.", "solution": "The given next-state table can be summarized as follows. For $x=0$: $00 \\mapsto 00$, $01 \\mapsto 01$, $11 \\mapsto 01$, $10 \\mapsto 00$. For $x=1$: $00 \\mapsto 11$, $01 \\mapsto 11$, $11 \\mapsto 11$, $10 \\mapsto 11$.\n\nStable states satisfy $Y_{2}Y_{1}=y_{2}y_{1}$, hence for $x=0$ the stable states are $00$ and $01$, and for $x=1$ the stable state is $11$. Initially, with $x=0$, the machine is at $00$ (stable). When $x$ changes from $0$ to $1$, the next-state at present $00$ is $11$. Since both bits must change, an asynchronous race occurs: only one state variable changes at a time, so the first transition is either $00 \\to 01$ (if $y_{1}$ changes first) or $00 \\to 10$ (if $y_{2}$ changes first). Under the original table with $x=1$, both intermediates $01$ and $10$ go to $11$, so both paths converge to the same final stable state $11$. Therefore the race is non-critical.\n\nTo convert this specific non-critical race into a critical race, we must alter exactly one table entry so that the two possible first-step paths from $00$ under $x=1$ lead to different eventual stable outcomes, i.e., the final state depends on which state variable changes first.\n\nExamine each proposed single-entry modification:\n\nA. Modify the entry for present $10$ with input $1$ to $10$. Then, after $x$ changes to $1$, the two possible first steps are:\n- $00 \\to 10$ (if $y_{2}$ changes first). With the modified entry, $10$ with $x=1$ maps to $10$, which is stable; the machine stays at $10$.\n- $00 \\to 01$ (if $y_{1}$ changes first). At $01$ with $x=1$, the entry remains $11$, so the machine proceeds to $11$, which is stable.\nThese two paths end in different stable states ($10$ versus $11$), so the final state depends on the order of internal transitions. This converts the race into a critical race.\n\nB. Modify the entry for present $00$ with input $1$ to $01$. Then from $00$ when $x$ goes to $1$, the next state is $01$ (only one bit changes), eliminating the race rather than making it critical.\n\nC. Modify the entry for present $11$ with input $0$ to $11$. This affects only behavior for $x=0$ at $11$ and does not influence the transition when $x$ changes to $1$ from the initial $00$, so the original non-critical race remains non-critical.\n\nD. Modify the entry for present $01$ with input $1$ to $10$. Then, from $00$ after $x$ goes to $1$:\n- If $y_{2}$ changes first: $00 \\to 10$. The next state for `10` with `x=1` remains `11`, which is stable.\n- If $y_{1}$ changes first: $00 \\to 01$. With the modification, the next state for `01` is `10`. From state `10`, the next state is `11`. Therefore, this path is `00 -> 01 -> 10 -> 11`, ultimately settling at the stable state `11`.\nHence both paths still end at $11$; the race remains non-critical.\n\nE. Modify the entry for present $10$ with input $0$ to $10$. This affects only $x=0$ behavior at $10$ and does not influence the transition when $x$ changes to $1$ from the initial $00$, so the race remains non-critical.\n\nTherefore, only modification A converts the given non-critical race into a critical race.", "answer": "$$\\boxed{A}$$", "id": "1925440"}, {"introduction": "Identifying a critical race is only half the battle; the next step is to fix it. This exercise demonstrates a common and powerful technique for resolving a critical race by modifying the circuit's flow table. You will learn how to introduce an intermediate unstable state to guide the circuit through a safe sequence of single-variable changes, ensuring a predictable and reliable transition to the correct final state [@problem_id:1925460].", "problem": "An asynchronous sequential circuit is being designed to control a simple industrial mixing process. The circuit has two external inputs, $x_1$ and $x_0$, and four internal states, denoted as A, B, C, and D. The behavior of the circuit is described by a flow table, where the internal states are represented by two state variables, $y_2$ and $y_1$. A state is considered \"stable\" for a given input if the next state is the same as the present state; otherwise, the state is \"unstable\".\n\nThe state assignments are as follows:\n- State A: $y_2 y_1 = 00$\n- State B: $y_2 y_1 = 01$\n- State C: $y_2 y_1 = 11$\n- State D: $y_2 y_1 = 10$\n\nThe flow table, showing the next state for each present state and input combination, is given below.\n\n| Present State | Binary ($y_2 y_1$) | Next State ($x_1x_0=00$) | Next State ($x_1x_0=01$) | Next State ($x_1x_0=10$) | Next State ($x_1x_0=11$) |\n|:-------------:|:------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|\n| A             | 00                 | A                        | B                        | A                        | C                        |\n| B             | 01                 | A                        | B                        | D                        | B                        |\n| C             | 11                 | A                        | D                        | C                        | C                        |\n| D             | 10                 | A                        | D                        | C                        | B                        |\n\nDuring testing, it is observed that when the input is held at $x_1x_0 = 11$, a transition initiated from state A does not reliably end up in the intended final state. This issue is due to a critical race condition. To resolve this race, an intermediate state must be used to direct the transition, ensuring only one state variable changes at a time.\n\nWhich of the following modifications correctly and completely resolves this specific critical race?\n\nA. In the column for $x_1x_0=11$, change the next-state entry for present state A to D, and change the next-state entry for present state D to C.\n\nB. In the column for $x_1x_0=11$, change only the next-state entry for present state A to B.\n\nC. In the column for $x_1x_0=11$, change only the next-state entry for present state D to C.\n\nD. Swap the binary state assignments for state B and state D, i.e., B becomes 10 and D becomes 01.\n\nE. The race condition is non-critical, and therefore no modifications to the flow table are necessary.", "solution": "We are given an asynchronous sequential circuit with two state variables $y_{2}$ and $y_{1}$ and state assignments A:$00$, B:$01$, C:$11$, D:$10$. A state is stable for a given input $(x_{1}x_{0})$ if the next state equals the present state; otherwise it is unstable.\n\nFrom the flow table under the input $x_{1}x_{0}=11$, the next-state entries are:\n- From A:$00$ to C:$11$,\n- From B:$01$ to B:$01$ (stable),\n- From C:$11$ to C:$11$ (stable),\n- From D:$10$ to B:$01$.\n\nThe observed problem occurs when the input is held at $x_{1}x_{0}=11$ and a transition is initiated from state A. The intended final state is C. The direct transition A:$00$ to C:$11$ changes both state variables simultaneously, since the Hamming distance is $d_{H}((0,0),(1,1))=2$.\nIn a fundamental-mode asynchronous machine, when the flow table requires a two-bit change, a critical race can occur because one state variable may change first, temporarily moving the circuit to a neighboring code. From A:$00$, the neighboring one-bit-different states are B:$01$ and D:$10$. Under $x_{1}x_{0}=11$, the flow table shows:\n- From B:$01$ the next state is B:$01$ (stable),\n- From D:$10$ the next state is B:$01$.\n\nThus, if $y_{1}$ changes first, the machine goes $00 \\to 01$ and then stays in B; if $y_{2}$ changes first, the machine goes $00 \\to 10 \\to 01$ and then stays in B. In either case, the machine may settle in B instead of the intended C, confirming a critical race.\n\nTo eliminate this critical race, the transition from A to C under $x_{1}x_{0}=11$ must be decomposed into a sequence of single-bit changes via an intermediate state, ensuring only one state variable changes at a time and that the directed path uniquely leads to C. Evaluate the options:\n\n1) Option A modifies the column $x_{1}x_{0}=11$ by changing A’s next state to D and D’s next state to C. This creates the path:\n$$\nA:00 \\xrightarrow{11} D:10 \\xrightarrow{11} C:11,\n$$\nwith single-bit changes at each step:\n$d_{H}((0,0),(1,0))=1, \\quad d_{H}((1,0),(1,1))=1.$\nUnder this modification, when in A with $x_{1}x_{0}=11$, the next-state bits are $(y_{2}',y_{1}')=(1,0)$, so only $y_{2}$ changes from $0$ to $1$. After reaching D, the next-state bits are $(y_{2}',y_{1}')=(1,1)$, so only $y_{1}$ changes from $0$ to $1$ to reach C. This removes the two-bit change and thus resolves the critical race. It also removes the original two-bit transition from D:$10$ to B:$01$ by replacing it with D:$10$ to C:$11$, which is a one-bit change, eliminating any race if the machine is ever in D under input $11$.\n\n2) Option B changes only A’s next state to B under $11$, i.e., $00 \\to 01$, but B under $11$ is stable at B. This traps the machine in B, not C, so it neither preserves the intended behavior nor resolves the race to the intended final state.\n\n3) Option C changes only D’s next state to C under $11$, but leaves A’s next state as C under $11$. The direct two-bit change $00 \\to 11$ remains, so the critical race from A is not removed.\n\n4) Option D swaps the encodings of B and D (B becomes $10$, D becomes $01$). The intended transition from A:$00$ to C:$11$ under $11$ still has Hamming distance $2$, so the critical race persists.\n\n5) Option E is invalid because a critical race is observed and must be corrected.\n\nTherefore, the only modification that correctly and completely resolves this specific critical race by enforcing a unique sequence of single-bit transitions from A to C under $x_{1}x_{0}=11$ is Option A.", "answer": "$$\\boxed{A}$$", "id": "1925460"}]}
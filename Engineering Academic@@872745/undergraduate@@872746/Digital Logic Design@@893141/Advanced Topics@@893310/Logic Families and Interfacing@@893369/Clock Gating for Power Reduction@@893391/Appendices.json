{"hands_on_practices": [{"introduction": "The core of any clock gating strategy lies in the intelligent design of the `enable` signal. This signal acts as the gatekeeper, and its logic must precisely reflect the conditions under which a functional unit needs to be active. This first exercise provides practice in the fundamental skill of translating a set of system requirements into a clean, minimal Boolean expression for such an enable signal, forming the logical foundation for power reduction [@problem_id:1920641].", "problem": "A specialized register `R_X` inside a microprocessor's execution unit can be loaded with an operand from one of two sources: the main memory bus or a local data cache. The loading operation is controlled by a single enable signal, `E`, which is part of a clock gating circuit designed to reduce power consumption by only activating the register when a valid write operation is pending.\n\nThe behavior of the enable signal is determined by four input signals:\n- `B_R`: A logic signal that is high (logic 1) when the main memory bus requests to write data to `R_X`.\n- `B_G`: A logic signal that is high (logic 1) when a bus arbiter grants the write request from the main memory bus.\n- `C_R`: A logic signal that is high (logic 1) when the local data cache requests to write data to `R_X`.\n- `C_B`: A logic signal that is high (logic 1) when the local data cache is busy with an internal operation and cannot fulfill a write request.\n\nThe enable signal `E` must be asserted (set to logic high) to load the register `R_X` if *either* of the following sets of conditions is fully met:\n1. A write is requested by the main memory bus AND this request is simultaneously granted by the arbiter.\n2. A write is requested by the local data cache AND the cache is not busy.\n\nDetermine the simplest Boolean logic expression for the enable signal `E` in terms of the input signals `B_R`, `B_G`, `C_R`, and `C_B`. Your final answer should be a Boolean expression in sum-of-products form. Use `\\cdot` to represent the AND operation, `+` for the OR operation, and an overbar for the NOT operation (e.g., $\\overline{X}$).", "solution": "The enable signal must be asserted when either the main memory bus both requests and is granted a write, or when the local cache requests a write and is not busy. Translating each condition into Boolean terms:\n- The main memory bus condition is met when $B_R$ is high and $B_G$ is high simultaneously, giving the product term $B_R \\cdot B_G$.\n- The local cache condition is met when $C_R$ is high and $C_B$ is low, giving the product term $C_R \\cdot \\overline{C_B}$.\n\nBecause either condition suffices, the enable signal is the logical OR of these two product terms:\n$$E = B_R \\cdot B_G + C_R \\cdot \\overline{C_B}.$$\n\nThis is already in sum-of-products form. It is minimal because each term corresponds to a necessary and sufficient two-literal conjunction for its respective source, and there is no absorption or consensus simplification between $B_R \\cdot B_G$ and $C_R \\cdot \\overline{C_B}$, as they share no variables or complements that would allow reduction.", "answer": "$$\\boxed{B_R \\cdot B_G + C_R \\cdot \\overline{C_B}}$$", "id": "1920641"}, {"introduction": "Once the enable logic is designed, simply combining it with the clock using an AND gate is a common but dangerous mistake. This practice problem illustrates the critical hazard of this naive approach by asking you to analyze what happens when the `enable` signal changes at the \"wrong\" time. By calculating the width of the resulting malformed clock pulse, or \"glitch,\" you will gain a concrete understanding of why asynchronous enable signals can lead to functional failures and why more sophisticated, glitch-free gating circuits are essential [@problem_id:1920603].", "problem": "A junior digital design engineer is implementing a power-saving feature in a system-on-chip by using a simple clock gating circuit. The circuit consists of a single two-input AND gate. One input to the gate is the main system clock, `CLK`, and the other is an active-high `ENABLE` signal. The output of the AND gate, `GATED_CLK`, drives a synchronous logic module.\n\nThe system clock `CLK` is a periodic signal with a period of $T_{clk}$ and a 50% duty cycle. A single cycle can be described as follows: the `CLK` signal is high for the time interval $0 \\le t < T_{clk}/2$ and low for $T_{clk}/2 \\le t < T_{clk}$.\n\nThe `ENABLE` signal is asserted by a controller that is not synchronized to the `CLK` signal. During a particular cycle of interest starting at $t=0$, the `ENABLE` signal is initially low and makes a single, clean transition from low to high at time $t_{en}$, where it is given that $0 < t_{en} < T_{clk}/2$. After this transition, the `ENABLE` signal remains high for the rest of the clock cycle and beyond.\n\nThe AND gate has a uniform propagation delay of $t_{pd}$ for all transitions. This means that any change at an input that causes a change in the output will be reflected at the output after a delay of $t_{pd}$.\n\nBecause the `ENABLE` signal is asserted while `CLK` is already high, the first pulse on the `GATED_CLK` line is malformed. Determine the total duration (i.e., the width) of this first, shortened pulse on the `GATED_CLK` output. Provide your answer as a symbolic expression in terms of $T_{clk}$, $t_{en}$, and $t_{pd}$.", "solution": "The two-input AND gate outputs the logical product of its two inputs, delayed by the propagation delay $t_{pd}$ for any input transition that causes an output change.\n\nGiven the $50\\%$-duty clock, during the interval $0 \\le t < \\frac{T_{clk}}{2}$ we have $\\mathrm{CLK}=1$, and during $\\frac{T_{clk}}{2} \\le t < T_{clk}$ we have $\\mathrm{CLK}=0$. Initially, $\\mathrm{ENABLE}=0$ and changes to $1$ at $t=t_{en}$ with $0<t_{en}<\\frac{T_{clk}}{2}$, then remains high.\n\nBecause $\\mathrm{ENABLE}=0$ for $0 \\le t < t_{en}$, the logical AND at the gate input is $0$ throughout that interval even though $\\mathrm{CLK}=1$. Therefore, there is no output transition at $t=0$; the output remains low. At $t=t_{en}$, $\\mathrm{ENABLE}$ rises while $\\mathrm{CLK}=1$, so the logical AND at the gate input changes from $0$ to $1$. With propagation delay $t_{pd}$, the output $\\mathrm{GATED\\_CLK}$ makes its first rising transition at\n$$\nt_{\\text{rise,out}}=t_{en}+t_{pd}.\n$$\nAt $t=\\frac{T_{clk}}{2}$, $\\mathrm{CLK}$ falls to $0$ while $\\mathrm{ENABLE}=1$, so the logical AND at the gate input changes from $1$ to $0$. With propagation delay $t_{pd}$, the output $\\mathrm{GATED\\_CLK}$ falls at\n$$\nt_{\\text{fall,out}}=\\frac{T_{clk}}{2}+t_{pd}.\n$$\nThe width of the first, shortened high pulse on $\\mathrm{GATED\\_CLK}$ is the time between these output transitions:\n$$\nW = t_{\\text{fall,out}} - t_{\\text{rise,out}} = \\left(\\frac{T_{clk}}{2}+t_{pd}\\right) - \\left(t_{en}+t_{pd}\\right) = \\frac{T_{clk}}{2} - t_{en}.\n$$\nSince $0<t_{en}<\\frac{T_{clk}}{2}$, this width is positive, and the propagation delay cancels because it equally shifts both the rising and falling edges.", "answer": "$$\\boxed{\\frac{T_{clk}}{2}-t_{en}}$$", "id": "1920603"}, {"introduction": "To overcome the glitch hazard, a standard, robust solution is the latch-based clock gating cell, which ensures the enable signal is held stable during the critical phase of the clock. This final exercise shifts from identifying problems to analyzing the correct solution. You will perform a worst-case timing analysis on this safe gating structure, determining the maximum permissible delay in the control logic to ensure the circuit operates reliably [@problem_id:1920633]. This practice is key to understanding the engineering rigor required to implement low-power designs that are also functionally and temporally correct.", "problem": "In the design of a low-power digital signal processor, a latch-based clock gating technique is used to disable the clock to an idle Floating-Point Unit (FPU). The clock gating circuit is constructed from a negative-level-sensitive transparent latch and an AND gate. The control signal, `ENABLE`, is fed into the latch's data input. The latch's output is then ANDed with the system clock, `CLK`, to produce the gated clock for the FPU. The latch is transparent (i.e., its output follows its input) only when `CLK` is low, and it captures the state of the `ENABLE` signal on the rising edge of `CLK`.\n\nThe `ENABLE` signal itself is generated by a block of combinational logic whose inputs come from a set of control registers. These control registers are updated on the **falling edge** of the same system clock, `CLK`.\n\nGiven the following timing parameters for a worst-case analysis:\n- The minimum guaranteed duration for the clock's low phase is $T_{\\text{low}} = 600$ ps.\n- The clock-to-Q delay of the falling-edge-triggered control registers is $T_{\\text{c2q}} = 45$ ps.\n- The setup time requirement for the data input of the clock-gating latch is $T_{\\text{su,latch}} = 35$ ps.\n- A mandatory safety timing margin of $T_{\\text{margin}} = 50$ ps must be included to ensure robust operation.\n\nCalculate the maximum allowable propagation delay, $T_{\\text{prop,max}}$, for the combinational logic block that generates the `ENABLE` signal. Express your answer in picoseconds (ps).", "solution": "The negative-level-sensitive latch used for clock gating is transparent only when $CLK$ is low and closes at the rising edge of $CLK$. The data input to the latch, $ENABLE$, must be stable at least $T_{\\text{su,latch}}$ before the rising edge of $CLK$, and an extra safety margin $T_{\\text{margin}}$ must be included as well.\n\nThe control registers that drive the combinational logic are triggered on the falling edge of $CLK$, and their outputs become valid after a clock-to-$Q$ delay $T_{\\text{c2q}}$. The combinational logic then incurs a propagation delay $T_{\\text{prop}}$ to produce $ENABLE$ at the latch input.\n\nConsidering the minimum low phase duration $T_{\\text{low}}$, the total available time from the falling edge to the latest allowed stable arrival at the latch input is $T_{\\text{low}} - T_{\\text{su,latch}} - T_{\\text{margin}}$. Therefore, the timing inequality for safe operation is\n$$\nT_{\\text{c2q}} + T_{\\text{prop}} \\leq T_{\\text{low}} - T_{\\text{su,latch}} - T_{\\text{margin}}.\n$$\nSolving for the maximum allowable propagation delay,\n$$\nT_{\\text{prop,max}} = T_{\\text{low}} - T_{\\text{c2q}} - T_{\\text{su,latch}} - T_{\\text{margin}}.\n$$\nSubstituting the given values $T_{\\text{low}} = 600\\ \\text{ps}$, $T_{\\text{c2q}} = 45\\ \\text{ps}$, $T_{\\text{su,latch}} = 35\\ \\text{ps}$, and $T_{\\text{margin}} = 50\\ \\text{ps}$,\n$$\nT_{\\text{prop,max}} = 600 - 45 - 35 - 50 = 470\\ \\text{ps}.\n$$\nThus, the maximum allowable propagation delay for the combinational logic is $470\\ \\text{ps}$.", "answer": "$$\\boxed{470}$$", "id": "1920633"}]}
{"hands_on_practices": [{"introduction": "The first step in designing any interface between two logic families is to check for direct compatibility. This exercise focuses on a fundamental metric of interface reliability: the noise margin. By calculating the high-level ($NM_H$) and low-level ($NM_L$) noise margins, you can quantitatively assess how much noise the connection can tolerate before a logic error occurs, providing a clear justification for whether a level shifter is required [@problem_id:1977004].", "problem": "In a mixed-voltage digital system, a logic gate from an older 5V logic family is used to drive an input of a modern 3.3V Complementary Metal-Oxide-Semiconductor (CMOS) logic gate. To ensure reliable operation, an engineer must evaluate the noise margins of this direct interface.\n\nThe manufacturer's datasheets provide the following specifications for the devices:\n\nFor the 5V driving gate:\n- Minimum high-level output voltage, $V_{OH,min} = 4.58\\,\\text{V}$\n- Maximum low-level output voltage, $V_{OL,max} = 0.41\\,\\text{V}$\n\nFor the 3.3V receiving gate:\n- Minimum high-level input voltage, $V_{IH,min} = 2.35\\,\\text{V}$\n- Maximum low-level input voltage, $V_{IL,max} = 0.72\\,\\text{V}$\n\nCalculate the high-level noise margin ($NM_H$) and the low-level noise margin ($NM_L$) for this direct interface. Express your answer as two numerical values in Volts, rounded to three significant figures. Present the values for $NM_H$ and $NM_L$ in that order.", "solution": "The problem asks for the calculation of the high-level noise margin ($NM_H$) and the low-level noise margin ($NM_L$) for an interface between two different logic families. These margins quantify how much noise the system can tolerate before an incorrect logic level is registered.\n\nFirst, we calculate the high-level noise margin, $NM_H$. This is defined as the difference between the minimum guaranteed high-level output voltage from the driving gate ($V_{OH,min}$) and the minimum required high-level input voltage for the receiving gate ($V_{IH,min}$). A positive value indicates that the driver's high-level output is sufficient to be recognized as a high level by the receiver, with the magnitude representing the tolerance to noise that might lower the voltage.\n\nThe formula for $NM_H$ is:\n$$NM_H = V_{OH,min} - V_{IH,min}$$\n\nThe problem provides the following values:\n- $V_{OH,min} = 4.58\\,\\text{V}$ (from the 5V driver)\n- $V_{IH,min} = 2.35\\,\\text{V}$ (for the 3.3V receiver)\n\nSubstituting these values into the formula:\n$$NM_H = 4.58\\,\\text{V} - 2.35\\,\\text{V} = 2.23\\,\\text{V}$$\n\nNext, we calculate the low-level noise margin, $NM_L$. This is defined as the difference between the maximum allowed low-level input voltage for the receiving gate ($V_{IL,max}$) and the maximum guaranteed low-level output voltage from the driving gate ($V_{OL,max}$). A positive value indicates that the driver's low-level output is low enough to be recognized as a low level by the receiver, with the magnitude representing the tolerance to noise that might raise the voltage.\n\nThe formula for $NM_L$ is:\n$$NM_L = V_{IL,max} - V_{OL,max}$$\n\nThe problem provides the following values:\n- $V_{IL,max} = 0.72\\,\\text{V}$ (for the 3.3V receiver)\n- $V_{OL,max} = 0.41\\,\\text{V}$ (from the 5V driver)\n\nSubstituting these values into the formula:\n$$NM_L = 0.72\\,\\text{V} - 0.41\\,\\text{V} = 0.31\\,\\text{V}$$\n\nThe problem requires the answers to be rounded to three significant figures.\n- For $NM_H$, the value is $2.23\\,\\text{V}$, which is already at three significant figures.\n- For $NM_L$, the value is $0.31\\,\\text{V}$. To express this with three significant figures, we write it as $0.310\\,\\text{V}$.\n\nTherefore, the high-level noise margin is $2.23\\,\\text{V}$ and the low-level noise margin is $0.310\\,\\text{V}$. The answer should be presented in the order ($NM_H$, $NM_L$).", "answer": "$$\\boxed{\\begin{pmatrix} 2.23  0.310 \\end{pmatrix}}$$", "id": "1977004"}, {"introduction": "While a resistive divider seems like a straightforward solution for stepping down voltage, its real-world performance can be compromised by non-ideal loads. This practice problem models a common scenario where an active internal pull-up resistor on a microcontroller input contends with the external divider network. Solving this problem requires applying fundamental circuit analysis principles to understand how unexpected interactions can alter logic levels and potentially cause system failure [@problem_id:1976978].", "problem": "A common engineering task involves interfacing digital logic components that operate at different voltage levels. Consider a system where a peripheral device, operating with a 5.0 V logic supply, needs to send a signal to a Microcontroller Unit (MCU) operating with a 3.3 V logic supply.\n\nTo step down the voltage, a simple resistive voltage divider is placed between the peripheral's output pin and the MCU's input pin. The divider consists of a resistor $R_a = 1.0 \\text{ k}\\Omega$ connected from the peripheral's output to the MCU's input, and a resistor $R_b = 2.2 \\text{ k}\\Omega$ connected from the MCU's input to ground.\n\nThe MCU's input pin is not ideal. Due to a configuration error, an internal weak pull-up resistor, with a resistance of $R_{pu} = 40 \\text{ k}\\Omega$, is also active on this pin. This pull-up resistor is connected between the MCU input pin and the MCU's own 3.3 V supply rail.\n\nAssuming the peripheral device is outputting a steady logic 'high' signal at 5.0 V, calculate the resulting steady-state voltage at the MCU's input pin.\n\nExpress your answer in Volts (V), rounded to three significant figures.", "solution": "Model the peripheral output as an ideal source at voltage $V_{H}$ connected to the node $V_{in}$ through $R_{a}$, the MCU pull-up as a resistor $R_{pu}$ from $V_{in}$ to the MCU rail at $V_{DD}$, and the lower divider resistor $R_{b}$ from $V_{in}$ to ground. Applying Kirchhoff’s current law at the node $V_{in}$ (sum of currents leaving the node equals zero) gives\n$$\\frac{V_{in}-V_{H}}{R_{a}}+\\frac{V_{in}}{R_{b}}+\\frac{V_{in}-V_{DD}}{R_{pu}}=0.$$\nCollecting terms in $V_{in}$ and solving,\n$$V_{in}\\left(\\frac{1}{R_{a}}+\\frac{1}{R_{b}}+\\frac{1}{R_{pu}}\\right)=\\frac{V_{H}}{R_{a}}+\\frac{V_{DD}}{R_{pu}},$$\n$$V_{in}=\\frac{\\frac{V_{H}}{R_{a}}+\\frac{V_{DD}}{R_{pu}}}{\\frac{1}{R_{a}}+\\frac{1}{R_{b}}+\\frac{1}{R_{pu}}}.$$\nSubstitute $V_{H}=5.0\\,\\text{V}$, $V_{DD}=3.3\\,\\text{V}$, $R_{a}=1000\\,\\Omega$, $R_{b}=2200\\,\\Omega$, and $R_{pu}=40000\\,\\Omega$:\n$$V_{in}=\\frac{\\frac{5.0}{1000}+\\frac{3.3}{40000}}{\\frac{1}{1000}+\\frac{1}{2200}+\\frac{1}{40000}}.$$\nWe can evaluate the numerator and denominator separately. The numerator is:\n$$\\frac{5.0}{1000} + \\frac{3.3}{40000} = 0.005 + 0.0000825 = 0.0050825$$\nFor the denominator, we find a common denominator, which is 440,000:\n$$\\frac{1}{1000} + \\frac{1}{2200} + \\frac{1}{40000} = \\frac{440}{440000} + \\frac{200}{440000} + \\frac{11}{440000} = \\frac{440+200+11}{440000} = \\frac{651}{440000}$$\nNow we can calculate $V_{in}$:\n$$V_{in} = \\frac{0.0050825}{651 / 440000} = \\frac{0.0050825 \\times 440000}{651} = \\frac{2236.3}{651} \\approx 3.43518\\,\\text{V}$$\nRounded to three significant figures, the result is $3.44\\,\\text{V}$.", "answer": "$$\\boxed{3.44}$$", "id": "1976978"}, {"introduction": "A robust digital interface must be safe under all system states, including power-up and power-down sequences. This exercise investigates a critical but often overlooked failure mode known as back-powering, where a powered driver can leak current through protection diodes and partially power an unpowered receiver. By analyzing this scenario [@problem_id:1977009], you will learn to account for non-operational states and design interfaces that prevent unintended and potentially damaging behavior.", "problem": "In mixed-voltage digital systems, interfacing a high-voltage logic output to a lower-voltage logic input often requires a level shifter. A common, simple implementation for level-down shifting is a resistive voltage divider. However, a critical issue known as \"back-powering\" can arise if the high-voltage domain is powered while the low-voltage domain is not.\n\nConsider a digital device operating from a high-voltage supply, $V_{DDH}$, sending a logic-high signal to an input pin of a second digital device. The output of the first device is assumed to be an ideal voltage source that provides $V_{DDH}$ when at logic-high. The second device is unpowered, meaning its supply rail is floating. This unpowered rail has an effective leakage resistance to ground, denoted as $R_L$, due to all the components connected to it.\n\nThe interface between the two devices is a resistive divider consisting of two resistors. Resistor $R_1$ is connected from the high-voltage output to the input pin of the second device. Resistor $R_2$ is connected from this same input pin to ground.\n\nThe input pin of the unpowered Integrated Circuit (IC) has an internal Electrostatic Discharge (ESD) protection diode that connects the input pin to the IC's local (and unpowered) supply rail. For this analysis, model the protection diode as a component with a constant forward voltage drop of $V_f$ when it is conducting current, and as an open circuit otherwise.\n\nBack-powering becomes a concern when current flows from the high-voltage driver, through the divider and the protection diode, charging up the unpowered supply rail. Let the voltage of this unpowered rail be $V_{rail}$. The system is considered to be in a problematic state if $V_{rail}$ reaches or exceeds a critical threshold voltage, $V_{th}$.\n\nTo ensure the system operates safely and to prevent this problematic back-powering, the resistance $R_1$ must be chosen to be greater than a specific minimum value. Derive an analytical expression for this minimum value of $R_1$, which corresponds to the exact condition where $V_{rail} = V_{th}$. Express your answer in terms of $V_{DDH}$, $V_f$, $V_{th}$, $R_2$, and $R_L$.", "solution": "Let the high-voltage logic output be an ideal source at $V_{DDH}$. The interface node (the IC input pin) has voltage $V_{\\text{pin}}$. The ESD diode from the pin to the unpowered rail is modeled as a constant drop $V_{f}$ when forward-biased, giving the conduction relation\n$$\nV_{\\text{pin}}=V_{\\text{rail}}+V_{f}\n$$\nwhen current flows into the rail. The unpowered rail has a leakage path to ground modeled by $R_{L}$, so the rail current to ground is\n$$\nI_{L}=\\frac{V_{\\text{rail}}}{R_{L}}.\n$$\nAt steady state with the diode conducting, Kirchhoff’s Current Law (KCL) at the pin gives that the current from the source through $R_{1}$ equals the sum of the currents through $R_{2}$ to ground and through the diode into the rail:\n$$\n\\frac{V_{DDH}-V_{\\text{pin}}}{R_{1}}=\\frac{V_{\\text{pin}}}{R_{2}}+I_{\\text{diode}}.\n$$\nThe rail current must equal the diode current, so\n$$\nI_{\\text{diode}}=\\frac{V_{\\text{rail}}}{R_{L}}.\n$$\nSubstituting $V_{\\text{pin}}=V_{\\text{rail}}+V_{f}$ and $I_{\\text{diode}}=V_{\\text{rail}}/R_{L}$ into the KCL equation yields\n$$\n\\frac{V_{DDH}-V_{\\text{rail}}-V_{f}}{R_{1}}=\\frac{V_{\\text{rail}}+V_{f}}{R_{2}}+\\frac{V_{\\text{rail}}}{R_{L}}.\n$$\nSolving for $R_{1}$ gives\n$$\nR_{1}=\\frac{V_{DDH}-V_{\\text{rail}}-V_{f}}{\\dfrac{V_{\\text{rail}}+V_{f}}{R_{2}}+\\dfrac{V_{\\text{rail}}}{R_{L}}}.\n$$\nThe minimum $R_{1}$ that prevents the rail from exceeding the critical threshold corresponds to the boundary condition $V_{\\text{rail}}=V_{th}$, hence\n$$\nR_{1,\\min}=\\frac{V_{DDH}-V_{th}-V_{f}}{\\dfrac{V_{th}+V_{f}}{R_{2}}+\\dfrac{V_{th}}{R_{L}}}.\n$$\nThis expression is meaningful when $V_{DDH}V_{th}+V_{f}$ so that the numerator is positive; otherwise the rail cannot be driven to $V_{th}$ through the diode and no minimum constraint on $R_{1}$ arises from back-powering.", "answer": "$$\\boxed{\\frac{V_{DDH}-V_{th}-V_{f}}{\\dfrac{V_{th}+V_{f}}{R_{2}}+\\dfrac{V_{th}}{R_{L}}}}$$", "id": "1977009"}]}
{"hands_on_practices": [{"introduction": "A primary goal of Static Timing Analysis (STA) is to answer a fundamental question: how fast can this circuit reliably operate? This practice exercise guides you through the process of calculating the maximum clock frequency for a given data path. By accounting for the delays of logic gates, registers, and the effect of clock skew, you will apply the setup time constraint, which ensures data arrives at its destination in time for the next clock cycle. [@problem_id:1963736]", "problem": "In digital circuit design, Static Timing Analysis (STA) is a critical process for verifying that a circuit meets its timing constraints without actually simulating the input vectors. A key task in STA is to determine the maximum operating frequency.\n\nConsider a synchronous digital circuit path between two positive-edge-triggered registers, Register A (the source) and Register B (the destination). Both registers are driven by the same clock source. The data output from Register A propagates through a combinational logic block before reaching the data input of Register B. This combinational block consists of a 2-input AND gate, whose output feeds into a 3-input OR gate, which in turn drives an inverter that connects to the data input of Register B.\n\nThe timing parameters for the circuit elements are given as follows:\n- Register Clock-to-Q delay ($t_{cq}$): 0.7 ns\n- Register Setup time ($t_{su}$): 1.1 ns\n- Register Hold time ($t_{h}$): 0.5 ns\n- Propagation delay of the 2-input AND gate ($t_{AND2}$): 0.6 ns\n- Propagation delay of the 3-input OR gate ($t_{OR3}$): 0.8 ns\n- Propagation delay of the Inverter ($t_{INV}$): 0.3 ns\n\nDue to routing differences on the silicon, there is a clock skew ($t_{skew}$) between the registers. The clock signal arrives at Register B 0.2 ns later than it arrives at Register A.\n\nCalculate the maximum possible clock frequency for this circuit path to operate correctly. Express your answer in Megahertz (MHz), rounded to three significant figures.", "solution": "We analyze the single synchronous path from Register A (launch) through combinational logic to Register B (capture), with both triggered on the same clock edge and a positive capture skew. The relevant timing constraints are the setup-time constraint for maximum clock frequency and the hold-time constraint for correctness.\n\nFirst, compute the total combinational propagation delay from the output of Register A to the input of Register B. The logic is a 2-input AND gate feeding a 3-input OR gate feeding an inverter. Define the maximum combinational path delay as\n$$\nt_{comb,max}=t_{\\text{AND2}}+t_{\\text{OR3}}+t_{\\text{INV}}.\n$$\nSubstituting the given values,\n$$\nt_{comb,max}=0.6\\ \\text{ns}+0.8\\ \\text{ns}+0.3\\ \\text{ns}=1.7\\ \\text{ns}.\n$$\n\nFor setup timing with clock skew, the required clock period satisfies\n$$\nT_{\\text{clk}}\\geq t_{cq}+t_{comb,max}+t_{su}-t_{\\text{skew}},\n$$\nwhere $t_{\\text{skew}}$ is taken positive when the capture clock (at Register B) arrives later than the launch clock (at Register A), which relaxes the setup requirement. With $t_{cq}=0.7\\ \\text{ns}$, $t_{comb,max}=1.7\\ \\text{ns}$, $t_{su}=1.1\\ \\text{ns}$, and $t_{\\text{skew}}=0.2\\ \\text{ns}$,\n$$\nT_{\\text{clk}}\\geq 0.7+1.7+1.1-0.2=3.3\\ \\text{ns}.\n$$\nTherefore, the minimum clock period is $T_{\\min}=3.3\\ \\text{ns}$, and the maximum clock frequency is\n$$\nf_{\\max}=\\frac{1}{T_{\\min}}=\\frac{1}{3.3\\ \\text{ns}}=0.30303\\ldots\\ \\text{GHz}=303.03\\ldots\\ \\text{MHz}.\n$$\nRounded to three significant figures, $f_{\\max}=303\\ \\text{MHz}$.\n\nFor completeness, verify that the hold constraint is not violated. The hold-time requirement with skew is\n$$\nt_{cq,min} + t_{comb,min} \\ge t_h + t_{skew}.\n$$\nWith the given data and taking a conservative fast-path bound $t_{comb,min}\\ge 0$, we check if $0.7 + 0 \\ge 0.5 + 0.2$. This simplifies to $0.7\\ \\text{ns} \\ge 0.7\\ \\text{ns}$, which is true. Hence, hold timing is met and does not limit the frequency.", "answer": "$$\\boxed{303}$$", "id": "1963736"}, {"introduction": "Reliable circuit operation is not just about being fast enough; it's also about not being *too* fast. This exercise expands our analysis from a simple speed limit to defining a complete \"window\" of acceptable performance for a combinational logic block. You will use both the setup time constraint to find the maximum allowable delay and the hold time constraint to find the minimum, thereby determining the full permissible range for the logic to function correctly. [@problem_id:1963715]", "problem": "An engineering team is designing a custom Application-Specific Integrated Circuit (ASIC) for the Inertial Measurement Unit (IMU) of a high-performance quadcopter. A critical data path in this design consists of a launch register, a block of combinational logic, and a capture register. This path is crucial for processing sensor data in real-time. For the circuit to function correctly, it must satisfy timing constraints without any setup or hold violations.\n\nThe entire circuit is driven by an ideal clock network, meaning there is zero clock skew between the launch and capture registers. The clock has a fixed period of $T_{clk}$. The registers, modeled as D-type flip-flops, are all from the same standard cell library and share the following characteristics: a clock-to-Q delay of $t_{cq}$, a setup time requirement of $t_{su}$, and a hold time requirement of $t_h$. The delay of the combinational logic block is denoted by $t_{comb}$.\n\nThe specific timing parameters for the technology node being used are:\n- Clock period, $T_{clk} = 2000 \\text{ ps}$\n- Clock-to-Q delay, $t_{cq} = 80 \\text{ ps}$\n- Setup time, $t_{su} = 110 \\text{ ps}$\n- Hold time, $t_h = 95 \\text{ ps}$\n\nTo ensure reliable operation, the combinational logic delay $t_{comb}$ must fall within a specific permissible range $[t_{comb, min}, t_{comb, max}]$. Determine the numerical values for the minimum and maximum permissible delay of the combinational logic block.\n\nExpress your final answer as a pair of numerical values for $t_{comb, min}$ and $t_{comb, max}$, in that order. The values must be in units of picoseconds (ps).", "solution": "The timing constraints for a synchronous path from a launch register through combinational logic to a capture register with zero clock skew are the setup-time constraint and the hold-time constraint.\n\nFor the setup constraint, the data launched at a clock edge must arrive at the capture register and satisfy setup time before the next clock edge. With zero skew, this gives:\n$$\nt_{cq} + t_{comb} + t_{su} \\leq T_{clk}.\n$$\nSolving for $t_{comb}$ yields the maximum permissible combinational delay:\n$$\nt_{comb,\\,max} = T_{clk} - t_{cq} - t_{su}.\n$$\n\nFor the hold constraint, the newly launched data must not arrive too early at the capture register input relative to the same clock edge. With zero skew, this gives:\n$$\nt_{cq} + t_{comb} \\geq t_{h}.\n$$\nSolving for $t_{comb}$ yields the minimum permissible combinational delay:\n$$\nt_{comb,\\,min} = t_{h} - t_{cq}.\n$$\n\nSubstituting the given numerical values $T_{clk} = 2000\\,\\text{ps}$, $t_{cq} = 80\\,\\text{ps}$, $t_{su} = 110\\,\\text{ps}$, and $t_{h} = 95\\,\\text{ps}$:\n$$\nt_{comb,\\,max} = 2000 - 80 - 110 = 1810\\,\\text{ps},\n$$\n$$\nt_{comb,\\,min} = 95 - 80 = 15\\,\\text{ps}.\n$$\n\nTherefore, the permissible range for the combinational logic delay is $[15\\,\\text{ps}, 1810\\,\\text{ps}]$.", "answer": "$$\\boxed{\\begin{pmatrix} 15 & 1810 \\end{pmatrix}}$$", "id": "1963715"}, {"introduction": "Timing parameters in datasheets can sometimes seem counter-intuitive. This conceptual problem challenges you to look inside the black box of a standard library cell and understand the physical origins of a negative hold time. Correctly analyzing this scenario requires moving beyond the external pin definitions and reasoning about the relative propagation delays of the data and clock signals on their internal paths to the latching mechanism. [@problem_id:1963757]", "problem": "An engineer is performing Static Timing Analysis (STA), a method used to verify the timing performance of a digital circuit, on a design that uses a pre-characterized standard cell library. They are examining the timing datasheet for a specific positive-edge-triggered D-type flip-flop (DFF) and find that it has a listed hold time requirement of $t_h = -50$ ps. The engineer is initially confused, as hold time is typically defined as the minimum time the data input ($D$) must be held stable *after* the active clock edge ($CLK$) for the data to be reliably captured. A negative value seems to imply that the data input can be changed *before* the clock edge arrives and still be captured correctly.\n\nWhich of the following statements provides the most accurate physical explanation for why a DFF might exhibit a negative hold time requirement as an intrinsic property of the cell?\n\nA. The negative hold time is a theoretical artifact used in simulation models to provide a margin of safety in timing calculations and does not correspond to any real physical behavior of the transistors within the cell.\n\nB. The clock signal arriving at the flip-flop is significantly delayed by the external clock distribution network, giving the data signal more time to stabilize. The negative hold time accounts for this large external clock skew.\n\nC. The internal propagation delay for the clock signal, from the cell's $CLK$ pin to the internal latching mechanism, is greater than the internal propagation delay for the data signal, from the cell's $D$ pin to that same latching mechanism.\n\nD. The flip-flop is designed using a special dynamic logic style that pre-charges internal nodes. This pre-charging phase allows the data to be sampled before the clock edge fully transitions, resulting in a negative hold time.\n\nE. The negative hold time is a consequence of quantum tunneling effects in the nanometer-scale transistors, where electrons can tunnel through the gate oxide, effectively allowing the input state to be \"known\" by the storage element before the classical arrival of the clock signal.", "solution": "We first recall the definition of the hold time at the cell pins. For a positive-edge triggered D flip-flop, the hold requirement at the external pins is the minimum time $t_{h}$ after the clock pin’s active transition during which the input $D$ must remain stable so that the data already presented at the internal sampling node is not corrupted by a subsequent change at $D$ racing through the still-partially-transparent front stage.\n\nLet $S$ denote the internal sampling/storage node controlled by the internal clock gating. Define:\n- $t_{CLK\\to S}$: the internal propagation delay from the external $CLK$ pin transition to the effective clock transition at the sampling gate that closes sampling at $S$.\n- $t_{D\\to S}$: the internal propagation delay from the external $D$ pin to the sampling node $S$.\n- $t_{ap}$: the intrinsic aperture/hold margin at the sampling device (a small positive time the data must remain valid at $S$ after the internal clock transition).\n\nTo avoid a hold violation, a change at the $D$ pin occurring at time $t$ (measured from the external clock transition) must not reach $S$ before the sampling window has closed. This condition is expressed by\n$$\nt + t_{D\\to S} \\ge t_{CLK\\to S} + t_{ap}.\n$$\nSolving for the required external hold time,\n$$\nt_{h} = t_{CLK\\to S} + t_{ap} - t_{D\\to S}.\n$$\nFrom this relation, a negative $t_{h}$ can occur when the internal clock-to-sampling delay and aperture together are smaller than the internal data-to-sampling delay, i.e., when $t_{D\\to S}$ dominates. Physically, standard-cell DFFs often have internal gating and buffering that create a relative skew between the internal versions of the clock and the data as they reach the sampling node. This intrinsic difference in internal propagation is the fundamental reason that a library can legitimately characterize a negative hold time at the pins: due to the internal delays, even if $D$ changes slightly around the external clock edge, the change cannot affect the sampling node before it is safe, so the required “post-edge” hold time at the pins appears negative.\n\nEvaluating the options:\n- A is incorrect because the negative hold time corresponds to real internal propagation behavior, not a mere modeling artifact.\n- B is incorrect because external distribution skew is not an intrinsic cell property; the library’s hold number is characterized at the cell pins.\n- C is the only option that correctly attributes the phenomenon to relative internal propagation delays between the clock path and the data path to the same internal latching mechanism. A negative hold time arises from that internal skew; this is an intrinsic cell property captured by characterization.\n- D is not generally the cause; standard-cell DFFs exhibiting negative hold times are typically static CMOS designs, not dependent on dynamic precharge for this effect.\n- E is physically implausible and irrelevant for this macroscopic timing behavior.\n\nTherefore, the most accurate physical explanation among the choices is the one that points to the internal relative propagation (clock versus data) to the internal sampling point, which is captured by option C.", "answer": "$$\\boxed{C}$$", "id": "1963757"}]}
{"hands_on_practices": [{"introduction": "This first exercise is a great starting point for designing Mealy machines. We will tackle a common scenario in communication protocols: detecting a framing sequence that includes a 'wildcard' bit. This practice [@problem_id:1928694] will challenge you to think about how to define states efficiently, realizing that different input histories can lead to the same functional state.", "problem": "A simplified serial communication protocol is designed to detect specific three-bit framing sequences from a single-bit input stream, $X$. The protocol identifies a valid frame when it detects a 'start bit' of `0`, followed by any single 'wildcard' bit (`0` or `1`), and an 'end bit' of `1`. This corresponds to detecting the binary sequences `001` or `011`.\n\nYou are tasked with designing a Mealy-type Finite State Machine (FSM) that takes the serial bit stream $X$ as its input and produces a single-bit output $Z$. The output $Z$ must be `1` if and only if the most recently received bit completes one of the valid framing sequences (`001` or `011`). Otherwise, the output $Z$ must be `0`. The detection is non-overlapping; upon detecting a valid sequence, the machine should reset itself to a state where it can begin searching for the next new sequence. For example, in the input stream `0011011`, the output should be `0010001`.\n\nWhich of the following textual descriptions correctly represents the minimal Mealy FSM for this task? The format for each transition is: `On input <X>, transitions to <Next State> with output <Z>`.\n\nA.\nState S0 (Initial): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 0.\nState S1 (Got prefix '0'): On input 0, transitions to S2 with output 0. On input 1, transitions to S2 with output 0.\nState S2 (Got prefix '00' or '01'): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 1.\n\nB.\nState S0 (Initial): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 0.\nState S1 (Got prefix '0'): On input 0, transitions to S2 with output 0. On input 1, transitions to S2 with output 0.\nState S2 (Got prefix '00' or '01'): On input 0, transitions to S0 with output 0. On input 1, transitions to S0 with output 1.\n\nC.\nState S0 (Initial): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 0.\nState S1 (Got prefix '0'): On input 0, transitions to S2 with output 0. On input 1, transitions to S3 with output 0.\nState S2 (Got prefix '00'): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 1.\nState S3 (Got prefix '01'): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 1.\n\nD.\nState S0 (Initial): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 1.\nState S1 (Got prefix '0'): On input 0, transitions to S2 with output 1. On input 1, transitions to S2 with output 1.\nState S2 (Got prefix '00' or '01'): On input 0, transitions to S1 with output 0. On input 1, transitions to S0 with output 0.", "solution": "We must detect exactly the three-bit frames starting with a start bit $0$, followed by one wildcard bit, and ending with $1$, i.e., $001$ or $011$. The output $Z$ must be $1$ only when the most recent bit completes one of these frames; otherwise $Z=0$. The detection is non-overlapping in the protocol sense: once a start bit $0$ is seen, the machine commits to the next two bits to decide validity; if the third bit is $0$ (invalid frame), that third $0$ is immediately treated as the start bit of a new candidate frame.\n\nTo design a minimal Mealy FSM under this non-overlapping framing, proceed step by step:\n\n1) Define states by the protocol’s progress through a candidate frame:\n- $S_0$: idle, no start bit currently latched.\n- $S_1$: just saw the start bit $0$ (have prefix $0$).\n- $S_2$: just saw $0$ and then one wildcard bit (have prefix $00$ or $01$); the next input decides detection.\n\n2) Derive all transitions and outputs from the protocol rules:\n- From $S_0$:\n  - On input $0$: latch the start bit; go to $S_1$; no detection yet, so $Z=0$.\n  - On input $1$: still idle because no start bit; stay in $S_0$; $Z=0$.\n\n- From $S_1$ (have prefix $0$):\n  - On input $0$: we now have prefix $00$; advance to $S_2$; $Z=0$.\n  - On input $1$: we now have prefix $01$; advance to $S_2$; $Z=0$.\n\n- From $S_2$ (have prefix $00$ or $01$; next bit is the end bit test):\n  - On input $1$: the frame completes as either $001$ or $011$; output $Z=1$, and reset non-overlapping to idle $S_0$ to look for the next new frame.\n  - On input $0$: the frame fails (we just consumed the third bit as $0$). By the protocol’s non-overlapping framing, this very $0$ is the start bit of a new candidate frame, so go to $S_1$; $Z=0$.\n\nThese transitions are minimal because $S_2$ can legitimately represent either $00$ or $01$: under the non-overlapping framing rules, from both prefixes the third-bit transitions are identical (on $1$ detect and reset; on $0$ treat as a new start, i.e., go to $S_1$). Hence three states suffice.\n\n3) Verify against the given example input $0011011 \\to$ desired output $0010001$:\n- $S_{0}\\xrightarrow{0/0}S_{1}\\xrightarrow{0/0}S_{2}\\xrightarrow{1/1}S_{0}\\xrightarrow{1/0}S_{0}\\xrightarrow{0/0}S_{1}\\xrightarrow{1/0}S_{2}\\xrightarrow{1/1}S_{0}$, which yields outputs $0,0,1,0,0,0,1$, matching $0010001$.\n\n4) Match with the given options and rule out incorrect ones:\n- Option A exactly encodes the transitions derived above: $S_0$: $0\\to S_1/0$, $1\\to S_0/0$; $S_1$: $0\\to S_2/0$, $1\\to S_2/0$; $S_2$: $0\\to S_1/0$, $1\\to S_0/1$. This is minimal and correct under the protocol’s non-overlapping framing.\n- Option B incorrectly sends $S_2$ on input $0$ to $S_0$, discarding a valid immediate restart on that $0$. It fails on streams like $01011$: positions $3$–$5$ form a valid frame $011$, but B would not detect it because it idles at the third bit instead of treating it as a new start.\n- Option C introduces unnecessary duplication of the $00$ and $01$ prefixes (non-minimal) and also incorrectly sends $00$ on input $0$ to $S_1$ instead of maintaining the committed three-bit framing progression; under the protocol’s non-overlapping framing, the single three-state structure suffices and is already captured by A.\n- Option D is incorrect because it outputs $1$ on transitions that do not correspond to completing $001$ or $011$ (e.g., from $S_0$ on input $1$).\n\nTherefore, the minimal correct Mealy FSM is described by option A.", "answer": "$$\\boxed{A}$$", "id": "1928694"}, {"introduction": "Building on the fundamentals, this next problem introduces a custom design constraint often found in real-world systems. Instead of resetting to an initial state after detection, the machine must transition to an intermediate state. This exercise [@problem_id:1928691] emphasizes the importance of carefully translating every detail of a specification into the state machine's logic, moving beyond default reset patterns.", "problem": "A digital control system requires a Mealy state machine to detect a specific, non-overlapping input sequence. The machine receives a single bit serial input, $X$, and produces a single bit output, $Z$. The machine should output $Z=1$ for a single clock cycle if and only if the last three inputs received were '110'. Otherwise, the output $Z$ should be '0'.\n\nThe states of the machine are defined based on the longest recognized suffix of the input stream that is also a prefix of the target sequence '110'.\n- $S_0$: The initial/reset state, where no prefix has been detected.\n- $S_1$: The state where the last input was '1'.\n- $S_2$: The state where the last two inputs were '11'.\n\nA special operational requirement is specified for the reset behavior. Upon a non-overlapping detection of the '110' sequence, the machine must immediately transition to the state that represents having just received a single '1' (i.e., state $S_1$). For all other transitions, the machine should move to the state corresponding to the longest valid prefix of '110' at the end of the new input string.\n\nGiven these specifications, which of the following statements correctly describes the transitions from state $S_2$?\n\nA. If the input $X$ is '0', the output $Z$ is '1' and the next state is $S_1$. If the input $X$ is '1', the output $Z$ is '0' and the next state is $S_2$.\nB. If the input $X$ is '0', the output $Z$ is '1' and the next state is $S_0$. If the input $X$ is '1', the output $Z$ is '0' and the next state is $S_2$.\nC. If the input $X$ is '0', the output $Z$ is '1' and the next state is $S_0$. If the input $X$ is '1', the output $Z$ is '0' and the next state is $S_1$.\nD. If the input $X$ is '0', the output $Z$ is '0' and the next state is $S_1$. If the input $X$ is '1', the output $Z$ is '0' and the next state is $S_2$.\nE. If the input $X$ is '0', the output $Z$ is '1' and the next state is $S_1$. If the input $X$ is '1', the output $Z$ is '0' and the next state is $S_0$.", "solution": "We design a Mealy machine to detect the non-overlapping sequence \"110\" with states defined by the longest suffix of the observed input that is also a prefix of \"110\": state $S_0$ corresponds to no prefix matched, state $S_1$ corresponds to the last input being \"1\", and state $S_2$ corresponds to the last two inputs being \"11\". The Mealy output $Z$ equals 1 exactly when the newly received input completes the target sequence \"110\"; otherwise $Z$ equals 0. Additionally, the specification imposes a special reset behavior: immediately upon a non-overlapping detection of \"110\", the next state must be $S_1$, overriding the usual longest-suffix rule.\n\nWe analyze transitions from $S_2$, where the last two inputs are \"11\".\n\n1) Input $X$ equals 0:\n- The last three inputs become \"110\", so a detection occurs and, by the Mealy property, $Z$ equals 1 on this input.\n- The special requirement mandates that immediately after a non-overlapping detection, the next state is $S_1$, regardless of the usual suffix-to-prefix mapping.\nTherefore, for $X$ equals 0 from $S_2$, we have $Z$ equals 1 and next state $S_1$.\n\n2) Input $X$ equals 1:\n- The last three inputs are \"111\". The next state must be the one corresponding to the longest suffix of the current input history that is also a prefix of \"110\". Among the suffixes \"1\", \"11\", and \"111\", the prefixes of \"110\" are \"1\" and \"11\", with \"11\" being the longest. Thus the next state remains $S_2$.\n- No detection occurs because the observed triple is not \"110\", so $Z$ equals 0.\nTherefore, for $X$ equals 1 from $S_2$, we have $Z$ equals 0 and next state $S_2$.\n\nComparing with the options, this behavior matches exactly the description in option A.", "answer": "$$\\boxed{A}$$", "id": "1928691"}, {"introduction": "Our final practice problem advances to a more complex and powerful type of circuit: the overlapping sequence detector. Unlike non-overlapping detectors, these machines can identify patterns that share bits, making them highly efficient for continuous data stream analysis. This challenge [@problem_id:1928671] will guide you through the systematic process of designing for a longer sequence where partial matches must be correctly handled to ensure no valid sequence is ever missed.", "problem": "You are tasked with designing a Mealy-type synchronous sequential circuit. The circuit has a single serial binary input, $X$, and a single binary output, $Z$. The circuit is an overlapping sequence detector. It must produce an output $Z=1$ whenever the specific input pattern 'ABA' is detected, and $Z=0$ otherwise. The subsequence 'A' is defined as the binary pattern '10', and the subsequence 'B' is defined as the binary pattern '11'. Therefore, the full target sequence is '101110'. Determine the minimum number of states required to implement this sequence detector as a Mealy state machine.", "solution": "Let the target pattern be $P=101110$ of length $m=6$. For an overlapping Mealy sequence detector, define states $S_k$ for $k \\in \\{0,1,2,3,4,5\\}$, where $S_k$ means the longest suffix of the input seen so far that matches a prefix of $P$ has length $k$. A transition on the next input bit attempts to extend the current match; if extension fails, we fall back to the longest proper border via a failure function until a match can continue. The output $Z$ is generated on the transition that completes the full pattern.\n\nCompute the failure function $F(k)$, defined as the length of the longest proper prefix of $P[1..k]$ that is also a suffix of $P[1..k]$. Evaluate for $k=1$ to $6$:\n- For $k=1$: $P[1]=1$ has no nonempty proper border, so $F(1)=0$.\n- For $k=2$: $P[1..2]=10$ has no nonempty proper border, so $F(2)=0$.\n- For $k=3$: $P[1..3]=101$ has border of length $1$ (the string $1$), so $F(3)=1$.\n- For $k=4$: $P[1..4]=1011$ has border of length $1$, so $F(4)=1$.\n- For $k=5$: $P[1..5]=10111$ has border of length $1$, so $F(5)=1$.\n- For $k=6$: $P[1..6]=101110$ has border of length $2$ (the string $10$), so $F(6)=2$.\n\nLet $p_i$ denote the $i$-th bit of $P$, so $(p_1,p_2,p_3,p_4,p_5,p_6)=(1,0,1,1,1,0)$. The transition rule from $S_k$ on input $b \\in \\{0,1\\}$ is:\n- If $k6$ and $b=p_{k+1}$, then go to $S_{k+1}$ and, if $k+1=6$, produce $Z=1$ on that transition.\n- If $b \\neq p_{k+1}$, repeatedly replace $k$ by $F(k)$ until either $k=0$ or $b=p_{k+1}$; if $b=p_{k+1}$ then go to $S_{k+1}$, else go to $S_0$.\n- After producing $Z=1$ when completing the pattern on $(S_5,b=0)$, the next state is $S_{F(6)}=S_2$ to preserve overlap.\n\nApplying this yields the explicit transition/output behavior for $k \\in \\{0,1,2,3,4,5\\}$:\n- From $S_0$: input $0 \\rightarrow S_0$ with $Z=0$; input $1 \\rightarrow S_1$ with $Z=0$.\n- From $S_1$: input $0 \\rightarrow S_2$ with $Z=0$; input $1 \\rightarrow S_1$ with $Z=0$.\n- From $S_2$: input $0 \\rightarrow S_0$ with $Z=0$; input $1 \\rightarrow S_3$ with $Z=0$.\n- From $S_3$: input $0 \\rightarrow S_2$ with $Z=0$; input $1 \\rightarrow S_4$ with $Z=0$.\n- From $S_4$: input $0 \\rightarrow S_2$ with $Z=0$; input $1 \\rightarrow S_5$ with $Z=0$.\n- From $S_5$: input $0 \\rightarrow S_2$ with $Z=1$ (since this completes $P$); input $1 \\rightarrow S_1$ with $Z=0$.\n\nTo minimize the Mealy machine, two states are equivalent only if, for every possible future input sequence, they generate identical output sequences and transition to equivalent states. In the above transitions:\n- $S_5$ is unique because it is the only state that can produce $Z=1$ (on input $0$), so it cannot be merged with any other state.\n- $S_4$ is unique because on input $1$ it transitions to $S_5$, which no other state does; hence it cannot be equivalent to any other state.\n- Proceeding similarly, $S_3$ transitions to $S_4$ on input $1$, which distinguishes it from states that do not lead to $S_4$ on that input.\n- $S_2$ differs from $S_0$ because on input $1$ it goes to $S_3$ rather than $S_1$, and $S_3$ is not equivalent to $S_1$.\n- $S_1$ has distinct behavior from $S_0$ and from the others as shown above.\n\nTherefore, no two of the six states $S_0, S_1, S_2, S_3, S_4, S_5$ are equivalent. The minimal Mealy implementation thus requires exactly $m=6$ states for the pattern of length $6$.\n\nHence, the minimum number of states required is $6$.", "answer": "$$\\boxed{6}$$", "id": "1928671"}]}
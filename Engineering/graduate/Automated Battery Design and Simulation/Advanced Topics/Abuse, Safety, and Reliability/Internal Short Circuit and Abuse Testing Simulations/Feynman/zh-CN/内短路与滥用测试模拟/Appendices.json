{
    "hands_on_practices": [
        {
            "introduction": "并非所有的短路都是等同的。本练习旨在探讨电池安全中的一个关键概念：为何内部短路 (ISC) 比外部短路 (ESC) 危险得多，即使它们消耗的总能量相同。通过分析电流流动和热量产生的基本原理 ，您将理解电流的局域化如何极大地放大了热风险。",
            "id": "3921511",
            "problem": "考虑一个棱柱形锂离子电池，其金属集流体可以理想化为薄导电片，其薄层电导率为 $G_{\\mathrm{s}}$（单位为西门子/平方）。忽略电化学反应动力学，并将初始微秒到毫秒的响应视为主要由集流体中的欧姆传导主导。考虑两种滥用测试场景：\n\n1. 外部短路 (ESC)，即电池端子通过一个电阻为 $R_{\\mathrm{ext}}$ 的外部电阻器短接。\n\n2. 内部短路 (ISC)，即一个局部缺陷产生了一个电阻为 $R_{\\mathrm{sc}}$ 的电接触，该接触在一个半径为 $a$ 的圆形区域上穿过隔膜连接了阳极和阴极集流体。\n\n假设 $R_{\\mathrm{sc}} = R_{\\mathrm{ext}}$，并且在短路发生的瞬间，存在相同的端子电位差 $\\Delta V$。因此，两种情景都引出相同的端子电流 $I = \\Delta V / R$，并耗散相同的总电功率 $P = I^{2} R$，其中 $R \\in \\{ R_{\\mathrm{ext}}, R_{\\mathrm{sc}} \\}$。\n\n令 $\\mathbf{J}$ 表示集流体薄片中的平面内电流密度（单位为安培/米），$\\phi$ 为电势，$\\mathbf{E} = -\\nabla \\phi$ 为电场。控制定律为欧姆定律 $\\mathbf{J} = G_{\\mathrm{s}} \\mathbf{E}$ 和远离源/汇的电荷守恒定律 $\\nabla \\cdot \\mathbf{J} = 0$。单位面积的局部焦耳热生成率（考虑到薄片建模，单位为瓦特/平方米）为 $q = \\mathbf{J} \\cdot \\mathbf{E} = |\\mathbf{J}|^{2} / G_{\\mathrm{s}}$，薄片中的热响应遵循热方程 $\\rho c \\, \\partial T / \\partial t = \\nabla \\cdot (k \\nabla T) + q$，其中 $\\rho$ 是质量密度， $c$ 是比热容， $k$ 是热导率， $T$ 是温度。\n\n对于 ESC，考虑一个长度为 $L$（在极耳之间的电流流动方向上）的矩形薄片，其两个相对边缘的边界电势固定为 $+\\Delta V / 2$ 和 $-\\Delta V / 2$，并假设极耳和几何形状具有对称性，使得解是近乎均匀的。对于 ISC，将接触点建模为一个位于有效大薄片原点处的净电流为 $I$ 的圆形汇/源，且 $a \\ll L$。\n\n仅基于这些第一性原理的定义和定律，并且不假设超出所述范围的任何特殊简化公式，以下哪个陈述最能描述电阻为 $R_{\\mathrm{ext}}$ 的 ESC 与 $R_{\\mathrm{sc}} = R_{\\mathrm{ext}}$ 的 ISC 之间的等效性和非等效性，特别是在平面内电流分布 $\\mathbf{J}(\\mathbf{r})$ 和感应热梯度 $\\nabla T$ 方面？\n\nA. 因为 $R_{\\mathrm{sc}} = R_{\\mathrm{ext}}$，ESC 和 ISC 在电池内部产生完全相同的 $\\mathbf{J}(\\mathbf{r})$ 和 $T(\\mathbf{r}, t)$ 空间分布，因此它们在全局和局部都是完全等效的。\n\nB. ESC 和 ISC 在端子电流 $I$ 和总功率 $P$ 上是等效的，但在局部不等效：在 ISC 接触点附近，电荷守恒和欧姆定律意味着一个径向汇聚的 $\\mathbf{J}(\\mathbf{r})$，其幅值满足 $|\\mathbf{J}(r)| \\propto 1/r$，从而得出 $q(r) \\propto 1/r^{2}$，并相应地产生比 ESC 情况更大的峰值 $|\\nabla T|$，而在对称极耳下，ESC 的 $\\mathbf{J}$ 和 $q$ 近乎均匀。\n\nC. 对于相等的 $R$，ESC 产生的最大 $|\\nabla T|$ 高于 ISC，因为 ESC 的热量均匀分布在整个集流体区域，而 ISC 将热量限制在一个小点上，因此减小了热梯度。\n\nD. 如果 $G_{\\mathrm{s}}$ 很大，条件 $R_{\\mathrm{sc}} = R_{\\mathrm{ext}}$ 不仅保证了 $I$ 和 $P$ 的相等，也保证了局部场的相等，使得 ESC 和 ISC 之间的 $\\mathbf{J}(\\mathbf{r})$ 和 $T(\\mathbf{r}, t)$ 完全相同，无论 ISC 接触尺寸 $a$ 如何。",
            "solution": "问题的核心是在总电流 $I$ 相同的条件下，比较外部短路 (ESC) 和内部短路 (ISC) 这两种情景下电流密度 $\\mathbf{J}(\\mathbf{r})$ 的空间分布以及由此产生的焦耳热 $q(\\mathbf{r})$。热梯度 $\\nabla T$ 是热量分布 $q(\\mathbf{r})$ 的直接结果。\n\n**1. 外部短路 (ESC) 分析**\n\n在 ESC 情景中，电流流经集流体薄片到达电池端子（极耳）。问题指定了一个长度为 $L$、宽度为 $W$ 的矩形薄片模型。由于“极耳和几何形状的对称性”，解被假设为“近乎均匀”。这意味着电流密度矢量 $\\mathbf{J}_{\\text{ESC}}$ 在整个薄片中近似恒定。如果总电流为 $I$，集流体宽度为 $W$，则电流密度的幅值为：\n$$|\\mathbf{J}_{\\text{ESC}}| = \\frac{I}{W}$$\n单位面积的局部热生成率 $q$ 由 $q = |\\mathbf{J}|^2 / G_{\\mathrm{s}}$ 给出。对于 ESC 情况：\n$$q_{\\text{ESC}}(\\mathbf{r}) = \\frac{1}{G_{\\mathrm{s}}} \\left(\\frac{I}{W}\\right)^2 \\approx \\text{常数}$$\n热量在整个集流体面积上均匀生成。热方程 $\\rho c \\, \\partial T / \\partial t = \\nabla \\cdot (k \\nabla T) + q_{\\text{ESC}}$ 中的这个均匀源项将导致一个相对平滑的温度分布。由此产生的热梯度 $\\nabla T$ 将相应地较为适中。\n\n**2. 内部短路 (ISC) 分析**\n\n在 ISC 情景中，电流路径根本不同。电流从集流体薄片的四面八方汇聚到半径为 $a$ 的局部缺陷处。我们将其建模为一个位于大的二维薄片原点处的电流汇，总电流为 $I$。由于电流汇的径向对称性，电流密度矢量 $\\mathbf{J}_{\\text{ISC}}$ 必须是纯径向的，即 $\\mathbf{J}_{\\text{ISC}}(\\mathbf{r}) = J(r) \\hat{\\mathbf{r}}$。\n\n应用积分形式的电荷守恒定律（高斯定律），流入以缺陷为中心的半径为 $r$ 的圆的总电流必须等于总汇电流 $I$。\n$$\\oint \\mathbf{J}_{\\text{ISC}} \\cdot d\\mathbf{s} = -I$$\n积分是在圆的周长上进行的。对于半径为 $r$ 的圆，周长为 $2\\pi r$。\n$$-I = \\int_{0}^{2\\pi} (J(r) \\hat{\\mathbf{r}}) \\cdot \\hat{\\mathbf{r}} \\, (r d\\theta) = J(r) \\cdot 2\\pi r$$\n电流密度的幅值为：\n$$|\\mathbf{J}_{\\text{ISC}}(r)| = \\frac{I}{2\\pi r}$$\n此结果在 $r \\gg a$ 时成立，表明电流密度的幅值不是均匀的，它在 $r \\to 0$ 时发散。ISC 情况下的局部热生成率为：\n$$q_{\\text{ISC}}(r) = \\frac{|\\mathbf{J}_{\\text{ISC}}(r)|^2}{G_{\\mathrm{s}}} = \\frac{1}{G_{\\mathrm{s}}} \\left(\\frac{I}{2\\pi r}\\right)^2 = \\frac{I^2}{4\\pi^2 G_{\\mathrm{s}}} \\frac{1}{r^2}$$\n所以，$q_{\\text{ISC}}(r) \\propto 1/r^2$。热生成高度集中在短路位置附近。\n\n**3. 热梯度 ($\\nabla T$) 的比较**\n\n- **ESC：** 在大面积上的均匀热源 $q_{\\text{ESC}}$ 会导致广泛的温度升高和相对较小的热梯度 $|\\nabla T|$。\n- **ISC：** 高度局域化的热源 $q_{\\text{ISC}} \\propto 1/r^2$ 会产生一个“热点”。在短路位置，温度上升得更快，并达到更高的峰值。为了将这种强烈的、集中的热量从热点传导出去，必须在缺陷位置周围形成极大的热梯度 $|\\nabla T|$。\n\n因此，对于相同的总电流 $I$，与 ESC 情景相比，ISC 情景会产生明显更大的峰值电流密度、峰值热生成率和峰值热梯度。\n\n### 逐项分析选项\n\n**A. 因为 $R_{\\mathrm{sc}} = R_{\\mathrm{ext}}$，ESC 和 ISC 在电池内部产生完全相同的 $\\mathbf{J}(\\mathbf{r})$ 和 $T(\\mathbf{r}, t)$ 空间分布，因此它们在全局和局部都是完全等效的。**\n- **分析：** 错误。总电阻和电流的等效性是一种全局等效性，它没有说明场变量（如电流密度）的局部分布。ESC 的均匀流和 ISC 的径向汇聚流是完全不同的空间分布。\n\n**B. ESC 和 ISC 在端子电流 $I$ 和总功率 $P$ 上是等效的，但在局部不等效：在 ISC 接触点附近，电荷守恒和欧姆定律意味着一个径向汇聚的 $\\mathbf{J}(\\mathbf{r})$，其幅值满足 $|\\mathbf{J}(r)| \\propto 1/r$，从而得出 $q(r) \\propto 1/r^{2}$，并相应地产生比 ESC 情况更大的峰值 $|\\nabla T|$，而在对称极耳下，ESC 的 $\\mathbf{J}$ 和 $q$ 近乎均匀。**\n- **分析：** 正确。这个陈述准确地总结了推导出的物理原理：全局等效但局部不等效，并正确描述了 ISC 中电流和热量的局域化及其后果。\n\n**C. 对于相等的 $R$，ESC 产生的最大 $|\\nabla T|$ 高于 ISC，因为 ESC 的热量均匀分布在整个集流体区域，而 ISC 将热量限制在一个小点上，因此减小了热梯度。**\n- **分析：** 错误。推理是颠倒的。将热量限制在一个小点上会*增加*热梯度，而不是减小它，因为需要通过一个小面积传导大量的热量。\n\n**D. 如果 $G_{\\mathrm{s}}$ 很大，条件 $R_{\\mathrm{sc}} = R_{\\mathrm{ext}}$ 不仅保证了 $I$ 和 $P$ 的相等，也保证了局部场的相等，使得 ESC 和 ISC 之间的 $\\mathbf{J}(\\mathbf{r})$ 和 $T(\\mathbf{r}, t)$ 完全相同，无论 ISC 接触尺寸 $a$ 如何。**\n- **分析：** 错误。薄层电导率 $G_{\\mathrm{s}}$ 的值会影响电阻的大小，但不会改变电流流动的基本几何模式。均匀流动（ESC）和径向流动（ISC）之间的区别是拓扑上的，由不同的边界条件决定，改变材料属性并不能使它们等同。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "在为内部短路这样的复杂事件建模时，选择恰当的模型细节水平是平衡精度与计算成本的关键。本实践  将引导您从第一性原理出发，推导热扩散的时间尺度。通过比较热量在薄电极层中的扩散速度与在整个电芯半径上的扩散速度，您将建立起判断何时可以采用简化一维热模型的物理直觉。",
            "id": "3921550",
            "problem": "一个圆柱形卷绕式锂离子电池经历了一次局部内部短路（ISC）事件，该事件在短时间内在轴向中平面附近沉积了热量。为了评估一维（1D）贯穿厚度方向的热模型是否足以模拟此类短时事件中的早期瞬态过程，请比较电极-隔膜堆叠厚度方向和卷芯半径方向的热扩散时间尺度。从热传导方程和基本热物理定义出发，不使用任何预先推导的简化关系，通过量纲分析推导出特征扩散时间尺度。\n\n考虑以下复合堆叠和卷芯的科学上合理的、均质化的有效属性和尺寸：\n- 有效质量密度：$\\rho = 2.2 \\times 10^{3}\\ \\mathrm{kg\\,m^{-3}}$，\n- 有效比热容：$c_{p} = 9.0 \\times 10^{2}\\ \\mathrm{J\\,kg^{-1}\\,K^{-1}}$，\n- 分层电极-隔膜堆叠的有效贯穿厚度方向热导率：$k_{z} = 0.55\\ \\mathrm{W\\,m^{-1}\\,K^{-1}}$，\n- 卷芯的有效径向热导率：$k_{r} = 0.20\\ \\mathrm{W\\,m^{-1}\\,K^{-1}}$，\n- 电极-隔膜堆叠厚度（两个涂层加隔膜，视为一个平板）：$L_{z} = 1.5 \\times 10^{-4}\\ \\mathrm{m}$，\n- 从ISC位置到电池外壳的特征径向长度：$L_{r} = 8.0 \\times 10^{-3}\\ \\mathrm{m}$。\n\n使用热传导方程和量纲分析，推导出贯穿厚度方向的特征热扩散时间 $t_{z}$ 和径向的特征热扩散时间 $t_{r}$，并用它们来推断一维贯穿厚度方向热模型在短时瞬态过程中（即，当贯穿厚度的温度梯度已弛豫但径向热量重新分布仍然有限时）适用的事件持续时间 $t_{\\mathrm{event}}$ 的范围。作为最终的数值输出，报告比值 $t_{r}/t_{z}$。将最终比值四舍五入到三位有效数字，并以科学记数法表示为一个纯数（无量纲）。",
            "solution": "分析始于固体传热的基本控制方程——热传导方程。在没有流体运动并考虑潜在内部热源 $\\dot{q}$ 的情况下，方程为：\n$$\n\\rho c_p \\frac{\\partial T}{\\partial t} = \\nabla \\cdot (k \\nabla T) + \\dot{q}\n$$\n此处，$\\rho$ 是质量密度，$c_p$ 是定压比热容，$T$ 是温度，$t$ 是时间，$k$ 是热导率（在各向异性材料中可以是一个张量），$\\dot{q}$ 是单位体积生热率。\n\n特征热扩散时间 $\\tau$ 是热量扩散穿过一个特征长度 $L$ 所需的时间尺度。为推导此时间尺度，我们对热传导方程的瞬态项和扩散项进行量纲分析，因为扩散时间尺度是热传播的内在属性，与源项 $\\dot{q}$ 无关。我们将瞬态项与热通量项的散度相平衡：\n$$\n\\rho c_p \\frac{\\partial T}{\\partial t} \\sim \\nabla \\cdot (k \\nabla T)\n$$\n我们用特征尺度替换微分算子。设 $\\Delta T$ 是在长度尺度 $L$ 上的特征温差，$\\tau$ 是发生此热变化的特征时间。\n左侧（瞬态项）的尺度为：\n$$\n\\rho c_p \\frac{\\partial T}{\\partial t} \\sim \\rho c_p \\frac{\\Delta T}{\\tau}\n$$\n右侧（扩散项）的尺度为：\n$$\n\\nabla \\cdot (k \\nabla T) \\sim \\frac{k \\Delta T}{L^2}\n$$\n令这两项的尺度相等，得到：\n$$\n\\rho c_p \\frac{\\Delta T}{\\tau} \\sim \\frac{k \\Delta T}{L^2}\n$$\n特征温差 $\\Delta T$ 被消去，留下特征时间 $\\tau$ 的关系式：\n$$\n\\tau \\sim \\frac{\\rho c_p L^2}{k}\n$$\n这个表达式代表了热扩散的特征时间。它通常用热扩散率 $\\alpha$ 来表示，其定义为 $\\alpha = \\frac{k}{\\rho c_p}$。使用此定义，尺度关系变为 $\\tau \\sim \\frac{L^2}{\\alpha}$。题目要求从基本属性推导，所以我们将使用完整的表达式。\n\n题目指定了两个主要的热流方向，每个方向都有其自己的特征长度和热导率。我们将推导出的尺度关系应用于每个方向。\n\n1.  **贯穿厚度方向的扩散时间 ($t_z$)：**\n    对于贯穿电极-隔膜堆叠厚度的扩散，特征长度为 $L_z$，相关的热导率为有效的贯穿厚度方向的值 $k_z$。相应的特征时间 $t_z$ 为：\n    $$\n    t_z = \\frac{\\rho c_p L_z^2}{k_z}\n    $$\n\n2.  **径向扩散时间 ($t_r$)：**\n    对于贯穿卷芯半径的扩散，特征长度为 $L_r$，热导率为有效的径向值 $k_r$。特征时间 $t_r$ 为：\n    $$\n    t_r = \\frac{\\rho c_p L_r^2}{k_r}\n    $$\n    题目要求计算这两个时间尺度的比值 $\\frac{t_r}{t_z}$。我们可以象征性地写出这个比值：\n    $$\n    \\frac{t_r}{t_z} = \\frac{\\left( \\frac{\\rho c_p L_r^2}{k_r} \\right)}{\\left( \\frac{\\rho c_p L_z^2}{k_z} \\right)}\n    $$\n    材料属性 $\\rho$ 和 $c_p$ 被视为整个体积的均质化有效属性，因此它们可以被消去：\n    $$\n    \\frac{t_r}{t_z} = \\frac{L_r^2}{k_r} \\cdot \\frac{k_z}{L_z^2} = \\left(\\frac{k_z}{k_r}\\right) \\left(\\frac{L_r}{L_z}\\right)^2\n    $$\n    这个表达式表明，时间尺度的比值取决于热导率的比值和特征长度比值的平方。\n\n当热量有足够的时间在厚度方向上达到平衡，但还没有足够的时间在径向上传播时，一维（1D）贯穿厚度方向的热模型是一个合理的近似。这对应于事件持续时间 $t_{\\mathrm{event}}$ 满足条件 $t_z \\ll t_{\\mathrm{event}} \\ll t_r$。一个大的 $t_r/t_z$ 比值表明存在这样一个宽泛的中间时间区域，从而证明了在短暂的、局部的热量沉积事件后，使用简化的1D模型进行早期瞬态分析是合理的。\n\n现在我们将给定的数值代入推导出的比值表达式中：\n-   $k_z = 0.55\\ \\mathrm{W\\,m^{-1}\\,K^{-1}}$\n-   $k_r = 0.20\\ \\mathrm{W\\,m^{-1}\\,K^{-1}}$\n-   $L_z = 1.5 \\times 10^{-4}\\ \\mathrm{m}$\n-   $L_r = 8.0 \\times 10^{-3}\\ \\mathrm{m}$\n\n该比值的计算如下：\n$$\n\\frac{t_r}{t_z} = \\left(\\frac{0.55}{0.20}\\right) \\left(\\frac{8.0 \\times 10^{-3}}{1.5 \\times 10^{-4}}\\right)^2\n$$\n$$\n\\frac{t_r}{t_z} = (2.75) \\left(\\frac{80}{1.5}\\right)^2 = (2.75) \\left(\\frac{160}{3}\\right)^2\n$$\n$$\n\\frac{t_r}{t_z} = (2.75) \\left(\\frac{25600}{9}\\right) = \\frac{11}{4} \\cdot \\frac{25600}{9} = 11 \\cdot \\frac{6400}{9} = \\frac{70400}{9}\n$$\n$$\n\\frac{t_r}{t_z} \\approx 7822.22...\n$$\n题目要求最终答案四舍五入到三位有效数字，并以科学记数法表示。\n$$\n\\frac{t_r}{t_z} \\approx 7.82 \\times 10^3\n$$\n这个大的数值证实了径向热扩散远慢于贯穿厚度方向的扩散，从而提供了一个宽广的时间窗口，在此窗口内，1D模型是一个有效的简化。",
            "answer": "$$\n\\boxed{7.82 \\times 10^{3}}\n$$"
        },
        {
            "introduction": "现在我们已经理解了局域化效应的重要性及相关的时间尺度，接下来让我们建立一个模型来预测电芯内部热点的形成位置。这个动手实践问题  要求您为电池卷芯创建一个电-热耦合网络模型。您将通过实施这一强大的技术，来模拟内部短路期间的电流重新分布，并求解最终的稳态温度分布，从而精确定位热点的位置。",
            "id": "3921506",
            "problem": "给定一个圆柱形卷绕式电极堆的多层电阻-电热网络模型。该卷绕式电极堆被建模为 $L$ 个同心层，每层沿其卷绕方向离散化为 $M$ 个段，每层形成一个闭合的一维环。每个环的每段具有均匀的串联电阻。内部短路被建模为单个并联电阻器，将选定的偶数索引层的一个段连接到相邻奇数索引层的相同段，从而绕过隔膜。外部端子在每层上表示为固定电位（狄利克雷）节点：所有偶数索引层在段索引 $s_{+}$ 处有一个固定在 $+V_{\\mathrm{OC}}/2$ 的节点，所有奇数索引层在段索引 $s_{-}$ 处有一个固定在 $-V_{\\mathrm{OC}}/2$ 的节点，其中 $V_{\\mathrm{OC}}$ 是电芯的开路电压。\n\n使用基尔霍夫电流定律 (KCL)、欧姆定律和稳态热平衡来计算各层间的电流重新分布和产生的温度场，然后预测热点位置。您必须使用的基本原理是：\n\n- 欧姆定律：对于节点 $i$ 和节点 $j$ 之间电阻为 $R_{ij}$ 的任意电学边，其支路电流为 $I_{ij} = (V_i - V_j)/R_{ij}$。\n- 基尔霍夫电流定律：对于每个没有固定电位的电学节点 $i$，$\\sum_{j \\in \\mathcal{N}(i)} I_{ij} = 0$，其中 $\\mathcal{N}(i)$ 是其电连接的邻居。\n- 每个热学节点 $i$ 的稳态热平衡：$\\sum_{j \\in \\mathcal{N}_T(i)} k_{ij} (T_i - T_j) + h_i (T_i - T_{\\mathrm{amb}}) = q_i$，其中 $k_{ij}$ 是到邻居 $j$ 的热导，$h_i$ 是到环境的热导，$T_{\\mathrm{amb}}$ 是环境温度，$q_i$ 是节点 $i$ 处的焦耳热输入。\n\n电网络规格：\n\n- 层索引为 $l \\in \\{0,1,\\dots,L-1\\}$，段索引为 $s \\in \\{0,1,\\dots,M-1\\}$。节点索引映射为 $p = l M + s$。\n- 每层 $l$ 是一个环，每个节点有两个电学邻居：$(l,s)$ 通过每段电阻 $R_{\\mathrm{seg}}$ 连接到 $(l,(s+1) \\bmod M)$ 和 $(l,(s-1) \\bmod M)$；相应的电导为 $g_{\\mathrm{seg}} = 1/R_{\\mathrm{seg}}$。\n- 单个内部短路通过电阻 $R_{\\mathrm{short}}$（电导 $g_{\\mathrm{short}} = 1/R_{\\mathrm{short}}$）连接节点 $(l_a, s_{\\mathrm{short}})$ 和节点 $(l_b, s_{\\mathrm{short}})$，其中 $l_a$ 为偶数，$l_b = l_a + 1$ 为奇数。\n- 固定电位节点：对于每个偶数 $l$，节点 $(l, s_{+})$ 的电位为 $V_{l,s_+} = +V_{\\mathrm{OC}}/2$；对于每个奇数 $l$，节点 $(l, s_{-})$ 的电位为 $V_{l,s_-} = -V_{\\mathrm{OC}}/2$。\n\n热网络规格：\n\n- 节点 $(l,s)$ 的热学邻居是其层内环邻居 $(l,(s\\pm 1) \\bmod M)$（热导为 $k_{\\mathrm{in}}$）和层间邻居 $(l-1,s)$ 与 $(l+1,s)$（若在边界内，热导为 $k_{\\mathrm{lay}}$）。\n- 每个节点通过热导 $h$ 与环境温度为 $T_{\\mathrm{amb}}$ 的环境耦合。\n- 节点 $i$ 处的焦耳热 $q_i$ 是通过将每个电阻器的总焦耳功率 $P_{ij} = I_{ij}^2 R_{ij}$ 的一半分配给其两个关联节点来计算的。\n\n任务：\n\n1. 建立并求解 KCL 系统，以获得所有节点的电位 $V_{l,s}$，给定极耳节点的固定电位和内部短路电阻。\n2. 计算所有电学边（环段和短路）的支路电流，以及每个节点的总焦耳热 $q_{l,s}$。\n3. 建立并求解稳态热系统，以获得所有节点的温度 $T_{l,s}$。\n4. 将热点位置确定为具有最高温度的节点 $(l^\\ast,s^\\ast)$，并计算短路电流的大小 $I_{\\mathrm{short}} = |(V_{l_a,s_{\\mathrm{short}}} - V_{l_b,s_{\\mathrm{short}}})/R_{\\mathrm{short}}|$。\n\n答案格式和单位：\n\n- 对每个测试用例，输出一个列表 $[l^\\ast, s^\\ast, I_{\\mathrm{short}}]$，其中 $l^\\ast$ 和 $s^\\ast$ 是整数，$I_{\\mathrm{short}}$ 是以安培 (A) 为单位的浮点数，四舍五入到三位小数。\n- 您的程序应生成单行输出，其中包含所有给定测试用例的结果，格式为逗号分隔的列表，并用方括号括起来，不含空格，例如：$[[l_1^\\ast,s_1^\\ast,I_{\\mathrm{short},1}],[l_2^\\ast,s_2^\\ast,I_{\\mathrm{short},2}]]$。\n\n测试套件：\n\n为以下测试用例提供结果。所有物理参数值在科学上对于稳态分析是合理的，并且是自洽的。\n\n- 案例 A (通用多层，偏移极耳，中等短路):\n  - $L = 6$, $M = 16$\n  - $V_{\\mathrm{OC}} = 4.2\\ \\mathrm{V}$\n  - $R_{\\mathrm{seg}} = 0.02\\ \\Omega$\n  - $R_{\\mathrm{short}} = 0.001\\ \\Omega$\n  - $s_{+} = 0$, $s_{-} = 8$\n  - 在 $s_{\\mathrm{short}} = 7$ 处，$l_a = 2$ 和 $l_b = 3$ 之间短路\n  - 热学参数: $k_{\\mathrm{in}} = 0.25\\ \\mathrm{W/K}$, $k_{\\mathrm{lay}} = 0.08\\ \\mathrm{W/K}$, $h = 0.06\\ \\mathrm{W/K}$, $T_{\\mathrm{amb}} = 298\\ \\mathrm{K}$\n\n- 案例 B (边界情况：极耳与短路位置重合，较强层间导热，低环境耦合):\n  - $L = 4$, $M = 12$\n  - $V_{\\mathrm{OC}} = 3.7\\ \\mathrm{V}$\n  - $R_{\\mathrm{seg}} = 0.03\\ \\Omega$\n  - $R_{\\mathrm{short}} = 0.0005\\ \\Omega$\n  - $s_{+} = 0$, $s_{-} = 0$\n  - 在 $s_{\\mathrm{short}} = 0$ 处，$l_a = 0$ 和 $l_b = 1$ 之间短路\n  - 热学参数: $k_{\\mathrm{in}} = 0.30\\ \\mathrm{W/K}$, $k_{\\mathrm{lay}} = 0.20\\ \\mathrm{W/K}$, $h = 0.02\\ \\mathrm{W/K}$, $T_{\\mathrm{amb}} = 300\\ \\mathrm{K}$\n\n- 案例 C (边缘情况：长路径，较高环电阻，中等短路):\n  - $L = 8$, $M = 20$\n  - $V_{\\mathrm{OC}} = 4.0\\ \\mathrm{V}$\n  - $R_{\\mathrm{seg}} = 0.20\\ \\Omega$\n  - $R_{\\mathrm{short}} = 0.0002\\ \\Omega$\n  - $s_{+} = 10$, $s_{-} = 10$\n  - 在 $s_{\\mathrm{short}} = 15$ 处，$l_a = 4$ 和 $l_b = 5$ 之间短路\n  - 热学参数: $k_{\\mathrm{in}} = 0.15\\ \\mathrm{W/K}$, $k_{\\mathrm{lay}} = 0.05\\ \\mathrm{W/K}$, $h = 0.10\\ \\mathrm{W/K}$, $T_{\\mathrm{amb}} = 295\\ \\mathrm{K}$\n\n您的程序必须实现上述物理模型，求解电学和热学线性系统，并为每个案例输出热点索引和短路电流大小（单位为安培 A，四舍五入到三位小数），并汇总成上述单行格式。",
            "solution": "该问题要求通过求解耦合的电-热网络模型来确定电池内部短路后的热点位置和短路电流。该模型是基于第一性原理（基尔霍夫定律、欧姆定律、稳态热平衡）构建的，并且问题设定是适定且科学合理的。解决方案分四步进行。\n\n**1. 电位场求解**\n\n首先，确定网格上每个节点 $(l,s)$ 的电位 $V_{l,s}$。这通过求解一个由基尔霍夫电流定律 (KCL) 导出的线性方程组来完成。对于任何电位不是固定的“自由”节点 $i$，流入电流的总和为零：\n$$\n\\sum_{j \\in \\mathcal{N}(i)} I_{ij} = \\sum_{j \\in \\mathcal{N}(i)} g_{ij}(V_j - V_i) = 0\n$$\n其中 $g_{ij}$ 是节点 $i$ 和 $j$ 之间的电导。这可以重写为 $\\mathbf{G}_{\\mathrm{free}} \\mathbf{V}_{\\mathrm{free}} = \\mathbf{I}_{\\mathrm{src}}$，其中 $\\mathbf{V}_{\\mathrm{free}}$ 是未知节点电位的向量，$\\mathbf{G}_{\\mathrm{free}}$ 是电导矩阵，$\\mathbf{I}_{\\mathrm{src}}$ 是由与固定电位节点（极耳）的连接产生的电流源向量。\n- 节点 $(l,s)$ 的电连接包括其两个环内邻居 $(l, (s \\pm 1) \\pmod M)$（电导 $g_{\\mathrm{seg}}$）以及特定短路位置 $(l_a, s_{\\mathrm{short}})$ 和 $(l_b, s_{\\mathrm{short}})$ 之间的一个额外连接（电导 $g_{\\mathrm{short}}$）。\n- 极耳节点具有固定电位：偶数层的 $V_{l,s_+} = +V_{\\mathrm{OC}}/2$，奇数层的 $V_{l,s_-} = -V_{\\mathrm{OC}}/2$。\n通过构建并求解这个稀疏线性系统，可以得到所有自由节点的电位，然后将其与固定电位组合成完整的电位场 $\\mathbf{V}$。\n\n**2. 焦耳热生成**\n\n在获得完整的电位场 $\\mathbf{V}$ 后，计算每个电阻元件中耗散的焦耳热功率：\n$$\nP_{ij} = \\frac{(V_i - V_j)^2}{R_{ij}}\n$$\n根据问题描述，该功率被平均分配给其连接的两个节点。因此，节点 $i$ 产生的总热量 $q_i$ 是来自所有相连电阻器的贡献之和：\n$$\nq_i = \\frac{1}{2} \\sum_{j \\in \\mathcal{N}(i)} P_{ij}\n$$\n对所有电连接（层内段和短路路径）进行此计算，以创建热源向量 $\\mathbf{q}$。短路电流的大小也在此阶段计算：$I_{\\mathrm{short}} = |(V_{l_a,s_{\\mathrm{short}}} - V_{l_b,s_{\\mathrm{short}}}) / R_{\\mathrm{short}}|$。\n\n**3. 温度场求解**\n\n温度场 $\\mathbf{T}$ 通过求解每个节点的稳态热平衡方程来确定：\n$$\n\\text{热量流出} = \\text{热量生成} \\implies \\sum_{j \\in \\mathcal{N}_T(i)} k_{ij} (T_i - T_j) + h (T_i - T_{\\mathrm{amb}}) = q_i\n$$\n其中 $k_{ij}$ 是热导，$h$ 是到环境的热导，$T_{\\mathrm{amb}}$ 是环境温度。这构成了一个关于温度向量 $\\mathbf{T}$ 的线性系统 $\\mathbf{K} \\mathbf{T} = \\mathbf{f}$，其中：\n$$\n\\left(h + \\sum_{j \\in \\mathcal{N}_T(i)} k_{ij}\\right) T_i - \\sum_{j \\in \\mathcal{N}_T(i)} k_{ij} T_j = q_i + h T_{\\mathrm{amb}}\n$$\n- 热导矩阵 $\\mathbf{K}$ 的元素由节点间的热导 $k_{\\mathrm{in}}$（层内）、$k_{\\mathrm{lay}}$（层间）和到环境的热导 $h$ 决定。\n- 源向量 $\\mathbf{f}$ 由焦耳热源 $\\mathbf{q}$ 和与环境的热交换构成。\n求解该系统得到所有节点的稳态温度 $\\mathbf{T}$。\n\n**4. 热点识别**\n\n最后，通过在温度向量 $\\mathbf{T}$ 中寻找最大值来确定热点。该最大值对应的节点索引 $(l^*, s^*)$ 就是热点的位置。每个测试用例的最终结果是三元组 $[l^*, s^*, I_{\\mathrm{short}}]$。\n\n以下是实现此逻辑的 Python 代码。",
            "answer": "```python\nimport numpy as np\n\ndef solve_case(params):\n    \"\"\"\n    Solves the electro-thermal problem for a single parameter set.\n    \"\"\"\n    L, M, V_OC, R_seg, R_short = params['L'], params['M'], params['V_OC'], params['R_seg'], params['R_short']\n    s_plus, s_minus, l_a, l_b, s_short = params['s_plus'], params['s_minus'], params['l_a'], params['l_b'], params['s_short']\n    k_in, k_lay, h, T_amb = params['k_in'], params['k_lay'], params['h'], params['T_amb']\n\n    N = L * M\n    g_seg = 1.0 / R_seg\n    g_short = 1.0 / R_short\n    V_plus = V_OC / 2.0\n    V_minus = -V_OC / 2.0\n\n    # ----- 1. Electrical System Setup -----\n    node_map = lambda l, s: l * M + s\n\n    fixed_indices = set()\n    fixed_potentials = {}\n    for l in range(L):\n        if l % 2 == 0:  # Even layer\n            idx = node_map(l, s_plus)\n            fixed_indices.add(idx)\n            fixed_potentials[idx] = V_plus\n        else:  # Odd layer\n            idx = node_map(l, s_minus)\n            fixed_indices.add(idx)\n            fixed_potentials[idx] = V_minus\n    \n    free_indices = [i for i in range(N) if i not in fixed_indices]\n    free_idx_map = {p: i for i, p in enumerate(free_indices)}\n    N_free = len(free_indices)\n\n    G_free = np.zeros((N_free, N_free))\n    I_src = np.zeros(N_free)\n\n    for i, p_idx in enumerate(free_indices):\n        l, s = p_idx // M, p_idx % M\n        \n        neighbors = [(node_map(l, (s - 1) % M), g_seg), (node_map(l, (s + 1) % M), g_seg)]\n        \n        if l == l_a and s == s_short:\n            neighbors.append((node_map(l_b, s_short), g_short))\n        elif l == l_b and s == s_short:\n            neighbors.append((node_map(l_a, s_short), g_short))\n\n        for neighbor_idx, g in neighbors:\n            G_free[i, i] += g\n            if neighbor_idx in free_idx_map:\n                j = free_idx_map[neighbor_idx]\n                G_free[i, j] -= g\n            else:\n                I_src[i] += g * fixed_potentials[neighbor_idx]\n\n    V_free = np.linalg.solve(G_free, I_src)\n    \n    V = np.zeros(N)\n    for i, p_idx in enumerate(free_indices):\n        V[p_idx] = V_free[i]\n    for p_idx, pot in fixed_potentials.items():\n        V[p_idx] = pot\n\n    # ----- 2. Joule Heat and Short Current Calculation -----\n    q = np.zeros(N)\n    \n    for l in range(L):\n        for s in range(M):\n            p1 = node_map(l, s)\n            p2 = node_map(l, (s + 1) % M)\n            power = (V[p1] - V[p2])**2 / R_seg\n            q[p1] += power / 2.0\n            q[p2] += power / 2.0\n    \n    p_a = node_map(l_a, s_short)\n    p_b = node_map(l_b, s_short)\n    power_short = (V[p_a] - V[p_b])**2 / R_short\n    q[p_a] += power_short / 2.0\n    q[p_b] += power_short / 2.0\n    \n    I_short_val = abs((V[p_a] - V[p_b]) / R_short)\n\n    # ----- 3. Thermal System Solution -----\n    K = np.zeros((N, N))\n    f = q + h * T_amb\n    \n    for p_idx in range(N):\n        l, s = p_idx // M, p_idx % M\n        \n        K[p_idx, p_idx] += h\n        \n        thermal_neighbors = []\n        thermal_neighbors.append((node_map(l, (s - 1) % M), k_in))\n        thermal_neighbors.append((node_map(l, (s + 1) % M), k_in))\n        if l > 0:\n            thermal_neighbors.append((node_map(l - 1, s), k_lay))\n        if l  L - 1:\n            thermal_neighbors.append((node_map(l + 1, s), k_lay))\n\n        for neighbor_idx, k in thermal_neighbors:\n            K[p_idx, p_idx] += k\n            K[p_idx, neighbor_idx] -= k\n            \n    T = np.linalg.solve(K, f)\n\n    # ----- 4. Hot Spot Identification -----\n    hotspot_idx = np.argmax(T)\n    l_star = hotspot_idx // M\n    s_star = hotspot_idx % M\n    \n    return [l_star, s_star, round(I_short_val, 3)]\n\ndef main():\n    test_cases = [\n        # Case A\n        {'L': 6, 'M': 16, 'V_OC': 4.2, 'R_seg': 0.02, 'R_short': 0.001,\n         's_plus': 0, 's_minus': 8, 'l_a': 2, 'l_b': 3, 's_short': 7,\n         'k_in': 0.25, 'k_lay': 0.08, 'h': 0.06, 'T_amb': 298.0},\n        # Case B\n        {'L': 4, 'M': 12, 'V_OC': 3.7, 'R_seg': 0.03, 'R_short': 0.0005,\n         's_plus': 0, 's_minus': 0, 'l_a': 0, 'l_b': 1, 's_short': 0,\n         'k_in': 0.30, 'k_lay': 0.20, 'h': 0.02, 'T_amb': 300.0},\n        # Case C\n        {'L': 8, 'M': 20, 'V_OC': 4.0, 'R_seg': 0.20, 'R_short': 0.0002,\n         's_plus': 10, 's_minus': 10, 'l_a': 4, 'l_b': 5, 's_short': 15,\n         'k_in': 0.15, 'k_lay': 0.05, 'h': 0.10, 'T_amb': 295.0},\n    ]\n\n    results = []\n    for case in test_cases:\n        result = solve_case(case)\n        results.append(result)\n\n    result_strs = [f\"[{r[0]},{r[1]},{r[2]:.3f}]\" for r in results]\n    print(f\"[{','.join(result_strs)}]\")\n\nmain()\n```"
        }
    ]
}
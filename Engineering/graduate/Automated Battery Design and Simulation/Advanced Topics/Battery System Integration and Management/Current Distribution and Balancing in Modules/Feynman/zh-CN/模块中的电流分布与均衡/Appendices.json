{
    "hands_on_practices": [
        {
            "introduction": "理解电流不平衡的第一步是从最简单的情景开始：将两个电池单体并联。本练习揭示了造成瞬时再分配电流的根本驱动力——开路电压的差异。通过使用戴维南模型并从第一性原理推导，学生们可以建立一个基础直觉，理解为何不匹配的单体会试图自我平衡，而这个过程往往伴随着潜在的风险。",
            "id": "3902675",
            "problem": "两个电化学电池，下文称为电池$1$和电池$2$，初始时相互隔离，然后在时间$t=0$时通过一个理想的零电阻开关闭合，实现并联。每个电池由一个Thevenin模型表示，该模型包含一个等于其开路电压(OCV)的理想电压源和一个串联欧姆电阻。电池$i$在其荷电状态(SOC)下的开路电压(OCV)记为$OCV(SOC_i)=V_i$（其中$i \\in \\{1,2\\}$），其串联电阻为$R_i>0$。假设以下条件成立：\n- 与$R_1$和$R_2$相比，连接线和开关的电阻可以忽略不计。\n- 寄生电感和电容（包括双电层电容）可以忽略不计，因此在连接后的瞬时时间尺度上，荷电状态(SOC)保持不变，且$V_1$和$V_2$保持恒定。\n- 电池以同名端相连（正极接正极，负极接负极），因此在连接后瞬间，仅因$V_1$和$V_2$的电压差，会有再分配电流流经$R_1$和$R_2$。\n\n定义在$t=0^{+}$时的初始再分配电流$I_{red}$，当其通过正极端子连接线从电池$1$流向电池$2$时，其值为正。仅从基尔霍夫电流定律、基尔霍夫电压定律和欧姆定律出发，推导$I_{red}$关于$V_1$、$V_2$、$R_1$和$R_2$的闭式符号表达式。将最终答案表示为一个单一的解析表达式（无中间等式），单位为安培。",
            "solution": "对问题陈述进行验证。\n\n### 步骤1：提取已知条件\n- 两个电化学电池，电池 $1$ 和电池 $2$。\n- 在时间 $t=0$ 并联。\n- 每个电池是一个 Thevenin 模型：理想电压源 $V_i = OCV(SOC_i)$ 和串联电阻 $R_i>0$，$i \\in \\{1,2\\}$。\n- 连接线和开关电阻可忽略不计。\n- 寄生电感和电容可忽略不计。\n- 在 $t=0^{+}$ 时，SOC 不变，且 $V_1$ 和 $V_2$ 恒定。\n- 同名端相连（正极接正极，负极接负极）。\n- 初始再分配电流 $I_{red}$ 在 $t=0^{+}$ 时，当其从电池$1$流向电池$2$时为正，电流通过正极端子连接线。\n- 推导必须从基尔霍夫电流定律、基尔霍夫电压定律和欧姆定律开始。\n- 期望的输出是 $I_{red}$ 关于 $V_1$、$V_2$、$R_1$ 和 $R_2$ 的闭式符号表达式。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据：** 该问题基于 Thevenin 等效电路模型，这是电路分析中对电池等电压源的一种基本且标准的表示方法。使用基尔霍夫定律和欧姆定律是恰当的，它们构成了经典电路理论的基础。该场景是电气工程和电池管理系统中的一个标准问题。问题是科学合理的。\n- **提法明确：** 该问题提供了一套完整的参数（$V_1$、$V_2$、$R_1$、$R_2$）和清晰的电路配置。它要求一个特定的量 $I_{red}$，该量可以根据给定的信息和物理定律唯一确定。\n- **客观性：** 该问题以精确的技术语言陈述，没有歧义或主观内容。电流 $I_{red}$ 的符号约定已明确定义。\n\n### 步骤3：结论与行动\n该问题是有效的，因为它具有科学依据、提法明确、客观且自洽。可以从所提供的信息和基本原理中推导出严谨的解。\n\n### 解题推导\n该问题描述了两个并联的 Thevenin 等效电路。电池 $1$ 被建模为一个理想电压源 $V_1$ 与一个电阻 $R_1$ 串联。电池 $2$ 被建模为一个理想电压源 $V_2$ 与一个电阻 $R_2$ 串联。两个电池的正极与正极相连，负极与负极相连。这种配置形成了一个包含两个电池的单一闭合电路回路。再分配电流 $I_{red}$ 在此回路中流动。\n\n我们将对该回路应用基尔霍夫电压定律 (KVL)。KVL 指出，沿任何闭合回路的电势差（电压）的代数和为零。\n\n让我们定义回路中电流 $I_{red}$ 的方向。问题陈述中说明，当电流从电池$1$流向电池$2$时，$I_{red}$ 为正。这意味着电流从电池$1$的正极流出，通过连接线，流入电池$2$的正极。我们假设 $I_{red}$ 沿此方向流动，如果我们将电池$1$画在左边，电池$2$画在右边，这对应于顺时针方向。\n\n让我们从电源 $V_1$ 的负极开始，并沿 $I_{red}$ 的方向（顺时针）绕行回路：\n\n$1$. 跨过电压源 $V_1$：我们从负极移动到正极，这是一个 $+V_1$ 的电压升高。\n$2$. 跨过串联电阻 $R_1$：根据欧姆定律，电流 $I_{red}$ 流过电阻 $R_1$ 会引起电压降。电势沿电流方向降低，因此电压变化为 $-I_{red}R_1$。\n$3$. 跨过电压源 $V_2$：由于电池$1$的正极连接到电池$2$的正极，电流 $I_{red}$ 进入 $V_2$ 的正极并从负极流出。沿电流方向穿过电源 $V_2$ 意味着从其正极移动到负极，这是一个 $-V_2$ 的电压降。\n$4$. 跨过串联电阻 $R_2$：电流 $I_{red}$ 继续流过电阻 $R_2$ 返回到 $V_1$ 的负极。这与电流流动方向一致，因此导致另一个 $-I_{red}R_2$ 的电压降。\n\n根据 KVL，这些电压变化的总和必须为零：\n$$+V_1 - I_{red}R_1 - V_2 - I_{red}R_2 = 0$$\n\n现在，我们必须解此方程求出 $I_{red}$。我们可以将包含 $I_{red}$ 的项组合在一起：\n$$V_1 - V_2 = I_{red}R_1 + I_{red}R_2$$\n\n在等式右侧提取公因式 $I_{red}$：\n$$V_1 - V_2 = I_{red}(R_1 + R_2)$$\n\n最后，除以回路的总串联电阻 $(R_1 + R_2)$，得到再分配电流 $I_{red}$ 的表达式：\n$$I_{red} = \\frac{V_1 - V_2}{R_1 + R_2}$$\n\n此表达式如要求所示，是用给定的量 $V_1$、$V_2$、$R_1$ 和 $R_2$ 表示的。$I_{red}$ 的符号由 $V_1$ 和 $V_2$ 的相对大小正确确定。如果 $V_1 > V_2$，$I_{red}$ 为正，表示电流从电池$1$流向电池$2$。如果 $V_2 > V_1$，$I_{red}$ 为负，表示电流从电池$2$流向电池$1$，这与所提供的定义一致。",
            "answer": "$$\\boxed{\\frac{V_1 - V_2}{R_1 + R_2}}$$"
        },
        {
            "introduction": "在静态分析的基础上，本实践引入了时间这一关键维度。真实的电池单体具有动态特性，例如双电层电容，这会影响在负载突变等瞬态过程中的电流分配。本练习  超越了简单的电阻模型，探讨了不同的 $RC$ 时间常数如何导致某些单体出现暂时的电流过冲，这是加速老化的一个关键因素。",
            "id": "3902722",
            "problem": "考虑两个并联的锂离子电池，由一个施加的阶跃电流 $I(t)=I_0 u(t)$ 驱动，其中 $u(t)$ 是单位阶跃函数，$I_0>0$ 是一个常数。每个电池支路 $i\\in\\{1,2\\}$ 的模型为一个欧姆电阻 $R_{s,i}$ 与一个双电层电容 $C_{dl,i}$ 的串联组合。假设没有额外的动力学（例如，电荷转移电阻），杂散电感和寄生电容可忽略不计，且开路电位相等，使得两个支路共享一个共同的顶端节点电压 $v_A(t)$。电容器初始未充电，即对于 $i=1,2$，有 $v_{C,i}(0)=0$。\n\n使用基尔霍夫电流定律 (KCL)、欧姆定律以及电容器本构关系 $i(t)=C\\,dv/dt$，从第一性原理推导支路1电流 $i_1(t)$ 在 $t\\ge 0$ 时的闭合形式时域表达式。清晰地陈述 $i_1(t)$ 的初始极限和长时间极限，并解释在何种条件下 $i_1(t)$ 会因电容动态特性而展现出相对于其长时间值的瞬态过冲。\n\n以简化的解析形式给出 $i_1(t)$ 的最终表达式。如果需要对表达式进行数值计算，电流单位应为安培。不要代入数值；所要求的最终答案仅为 $i_1(t)$ 的符号表达式。",
            "solution": "### 步骤1：提取已知条件\n- **电路配置**：两个并联的锂离子电池。\n- **输入电流**：阶跃电流 $I(t) = I_0 u(t)$，其中 $u(t)$ 是单位阶跃函数，$I_0 > 0$ 是一个常数。\n- **电池模型**：每个支路 $i \\in \\{1, 2\\}$ 的模型为一个欧姆电阻 $R_{s,i}$ 和一个双电层电容 $C_{dl,i}$ 的串联电路。\n- **节点电压**：两个支路共享一个共同的顶端节点电压 $v_A(t)$。\n- **初始条件**：电容器初始未充电，$v_{C,i}(0) = 0$ (对于 $i=1, 2$)。\n- **假设**：无电荷转移电阻，杂散电感和寄生电容可忽略不计。\n- **要求任务**：\n    1. 推导支路1电流 $i_1(t)$ 在 $t \\ge 0$ 时的闭合形式时域表达式。\n    2. 陈述 $i_1(t)$ 的初始极限 ($t \\to 0^+$) 和长时间极限 ($t \\to \\infty$)。\n    3. 解释 $i_1(t)$ 出现瞬态过冲的条件。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据**：该问题基于线性电路理论的基本原理（基尔霍夫定律、欧姆定律、电容器行为）。RC电路是电化学电池瞬态电响应的标准一阶模型。该设置在科学上是合理的。\n- **适定性**：该问题完整描述了电路、输入激励和初始条件。没有歧义或矛盾。存在唯一、稳定的支路电流解。\n- **客观性**：该问题使用精确、客观、形式化的科学语言陈述。\n\n### 步骤3：结论与行动\n该问题有效。现在开始求解过程。\n\n该电路由一个电流源 $I(t)$ 馈入两个并联支路组成。对于 $t \\ge 0$，总电流为常数 $I_0$。支路1包含一个电阻 $R_{s,1}$ 与一个电容 $C_{dl,1}$ 串联。支路2包含一个电阻 $R_{s,2}$ 与一个电容 $C_{dl,2}$ 串联。电容器上的初始电压为零。我们的目标是求出通过支路1的电流 $i_1(t)$。\n\n该问题描述了一个线性时不变 (LTI) 系统，使用拉普拉斯变换法求解最为高效。\n\n在拉普拉斯域中，输入电流为 $I(s) = \\mathcal{L}\\{I_0 u(t)\\} = \\frac{I_0}{s}$。\n支路1的阻抗为 $Z_1(s) = R_{s,1} + \\frac{1}{sC_{dl,1}}$。\n支路2的阻抗为 $Z_2(s) = R_{s,2} + \\frac{1}{sC_{dl,2}}$。\n电容器的零初始条件意味着我们无需在 s 域模型中包含任何初始条件电压源。\n\n电流 $I_1(s) = \\mathcal{L}\\{i_1(t)\\}$ 可以使用并联阻抗的分流法则求得：\n$$\nI_1(s) = I(s) \\frac{Z_2(s)}{Z_1(s) + Z_2(s)}\n$$\n代入 $I(s)$、$Z_1(s)$ 和 $Z_2(s)$ 的表达式：\n$$\nI_1(s) = \\frac{I_0}{s} \\frac{R_{s,2} + \\frac{1}{sC_{dl,2}}}{\\left(R_{s,1} + \\frac{1}{sC_{dl,1}}\\right) + \\left(R_{s,2} + \\frac{1}{sC_{dl,2}}\\right)}\n$$\n为简化起见，我们将阻抗分数的分子和分母同乘以 $s$：\n$$\nI_1(s) = \\frac{I_0}{s} \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s(R_{s,1} + R_{s,2}) + \\left(\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}\\right)}\n$$\n$$\nI_1(s) = I_0 \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s\\left[s(R_{s,1} + R_{s,2}) + \\left(\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}\\right)\\right]}\n$$\n让我们从分母的括号项中提出因子 $(R_{s,1} + R_{s,2})$：\n$$\nI_1(s) = \\frac{I_0}{R_{s,1} + R_{s,2}} \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s\\left[s + \\frac{\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}}{R_{s,1} + R_{s,2}}\\right]}\n$$\n该表达式具有 $\\frac{N(s)}{s(s+a)}$ 的形式。我们可以进行部分分式展开：\n$$\nI_1(s) = \\frac{A}{s} + \\frac{B}{s + \\frac{1}{\\tau}}\n$$\n其中系统时间常数 $\\tau$ 定义为：\n$$\n\\tau = \\frac{R_{s,1} + R_{s,2}}{\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}} = (R_{s,1} + R_{s,2})\\frac{C_{dl,1}C_{dl,2}}{C_{dl,1} + C_{dl,2}}\n$$\n系数 $A$ 和 $B$ 的求解如下：\n$$\nA = \\lim_{s \\to 0} s I_1(s) = \\lim_{s \\to 0} I_0 \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s(R_{s,1} + R_{s,2}) + \\left(\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}\\right)} = I_0 \\frac{\\frac{1}{C_{dl,2}}}{\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}}\n$$\n$$\nA = I_0 \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}}\n$$\n该系数 $A$ 对应于电流 $i_1(t)$ 的最终值（稳态值），因为 $A = \\lim_{t \\to \\infty} i_1(t)$。\n\n系数 $B$ 使用留数法（cover-up method）求得：\n$$\nB = \\lim_{s \\to -1/\\tau} (s+1/\\tau) I_1(s) = \\lim_{s \\to -1/\\tau} \\frac{I_0}{R_{s,1} + R_{s,2}} \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s}\n$$\n$$\nB = \\frac{I_0}{R_{s,1} + R_{s,2}} \\frac{(-1/\\tau)R_{s,2} + \\frac{1}{C_{dl,2}}}{-1/\\tau} = \\frac{I_0}{R_{s,1} + R_{s,2}} \\left( R_{s,2} - \\frac{\\tau}{C_{dl,2}} \\right)\n$$\n代入 $\\tau$ 的表达式：\n$$\nB = \\frac{I_0}{R_{s,1} + R_{s,2}} \\left( R_{s,2} - \\frac{(R_{s,1} + R_{s,2})C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right) = I_0 \\left( \\frac{R_{s,2}}{R_{s,1} + R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right)\n$$\n项 $\\frac{I_0 R_{s,2}}{R_{s,1} + R_{s,2}}$ 代表初始电流 $i_1(0^+)$，由初始的电阻分流决定。\n所以，$I_1(s)$ 为：\n$$\nI_1(s) = I_0 \\left( \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) \\frac{1}{s} + I_0 \\left( \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) \\frac{1}{s + 1/\\tau}\n$$\n对 $t \\ge 0$ 进行拉普拉斯逆变换：\n$$\ni_1(t) = I_0 \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} + I_0 \\left( \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) \\exp\\left(-\\frac{t}{\\tau}\\right)\n$$\n代入 $1/\\tau$ 的完整表达式：\n$$\ni_1(t) = I_0 \\left( \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} + \\left( \\frac{R_{s,2}}{R_{s,1} + R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right) \\exp\\left( -t \\frac{C_{dl,1} + C_{dl,2}}{(R_{s,1} + R_{s,2})C_{dl,1}C_{dl,2}} \\right) \\right)\n$$\n这就是 $i_1(t)$ 的闭合形式时域表达式。\n\n现在，我们分析极限和过冲条件。\n**初始极限 ($t \\to 0^+$)**：\n当 $t \\to 0^+$ 时，指数项变为 $\\exp(0) = 1$。\n$$\ni_1(0^+) = I_0 \\left( \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} + \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) = I_0 \\frac{R_{s,2}}{R_{s,1}+R_{s,2}}\n$$\n从物理上讲，在施加电流的瞬间 ($t=0^+$)，电容器电压仍然为零 ($v_{C,i}(0^+)=v_{C,i}(0)=0$)。它们对电流变化起到短路作用。因此，总电流 $I_0$ 根据电阻分流法则在两个并联支路之间分配。\n\n**长时间极限 ($t \\to \\infty$)**：\n当 $t \\to \\infty$ 时，指数项衰减至零 ($\\exp(-\\infty) \\to 0$)。\n$$\ni_1(\\infty) = I_0 \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}}\n$$\n从物理上讲，对于恒定电流输入，并联组合两端的电压 $v_A(t)$ 会无限增加。对于较大的 $t$，$v_A(t) \\approx v_{C1}(t) \\approx v_{C2}(t)$。为了在充电时保持电容器电压相等，它们的电压变化率必须相等：$\\frac{dv_{C1}}{dt} = \\frac{dv_{C2}}{dt}$。由于 $i = C \\frac{dv_C}{dt}$，这意味着 $\\frac{i_1(t)}{C_{dl,1}} = \\frac{i_2(t)}{C_{dl,2}}$。利用 $i_1+i_2=I_0$，我们可以解出 $i_1$，得到电容分流法则，这给出了长时间极限。\n\n**瞬态过冲条件**：\n如果初始电流 $i_1(0^+)$ 大于最终稳态电流 $i_1(\\infty)$，则会发生瞬态过冲。\n$$\ni_1(0^+) > i_1(\\infty)\n$$\n$$\nI_0 \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} > I_0 \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}}\n$$\n由于 $I_0 > 0$ 且所有电阻和电容均为正值，我们可以简化此不等式：\n$$\n\\frac{R_{s,2}}{R_{s,1}+R_{s,2}} > \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}}\n$$\n交叉相乘得到：\n$$\nR_{s,2}(C_{dl,1}+C_{dl,2}) > C_{dl,1}(R_{s,1}+R_{s,2})\n$$\n$$\nR_{s,2}C_{dl,1} + R_{s,2}C_{dl,2} > C_{dl,1}R_{s,1} + C_{dl,1}R_{s,2}\n$$\n$$\nR_{s,2}C_{dl,2} > R_{s,1}C_{dl,1}\n$$\n这个简洁优美的条件表明，如果支路2的固有RC时间常数（$\\tau_2 = R_{s,2}C_{dl,2}$）大于支路1的固有RC时间常数（$\\tau_1 = R_{s,1}C_{dl,1}$），则支路1的电流会出现过冲。这意味着支路1在初始阶段（由于其相对电阻特性）分担的电流份额大于其在长期（当电容特性主导分配时）能够维持的份额。",
            "answer": "$$\n\\boxed{\nI_0 \\left( \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} + \\left( \\frac{R_{s,2}}{R_{s,1} + R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right) \\exp\\left( -t \\frac{C_{dl,1} + C_{dl,2}}{(R_{s,1} + R_{s,2})C_{dl,1}C_{dl,2}} \\right) \\right)\n}\n$$"
        },
        {
            "introduction": "最后的实践整合了电学和热学两个领域，这在高功率应用中是密不可分的。本练习  模拟了一个关键的反馈循环：电流产生热量，热量改变单体内阻，进而再次影响电流分布，甚至可能引发热失控。通过建立并求解这个电-热耦合模型，学生们将在模拟复杂非线性行为方面获得实践经验，而这些行为在电池模组设计和安全性分析中至关重要。",
            "id": "3902728",
            "problem": "您的任务是推导并实现一个物理上一致的模型，用于自动化电池设计和仿真中一个三电芯并联模块的稳态热电相互作用。您必须计算三个并联电芯的稳态温升和由此产生的电流分配。这三个电芯在环境温度下具有相同的内阻，但与环境的热导不同。该场景将使用第一性原理和电热系统中公认的关系进行建模。\n\n假设有三个由 $i \\in \\{1,2,3\\}$ 索引的电芯并联，提供一个指定的总电流。每个电芯被建模为：\n- 一个具有温变电阻 $R_i(T)$ 的集总电阻器。\n- 一个集总热节点，其稳态对流散热由对流系数和面积的乘积 $hA_i$ 参数化。\n\n使用以下基本关系和定义：\n- 焦耳热：对于电流为 $I_i$、电阻为 $R_i(T_i)$ 的电芯，其生热率为 $P_i = I_i^2 R_i(T_i)$。\n- 稳态热平衡：稳态下向环境的传热为 $Q_i = hA_i \\Delta T_i$，其中 $\\Delta T_i = T_i - T_{amb}$ 是稳态温升。\n- 电阻的线性温度依赖性：$R_i(T_i) = R_0 \\left(1 + \\alpha \\left(T_i - T_{amb}\\right)\\right)$，其中 $R_0$ 是环境温度下的共同参考电阻，$\\alpha$ 是温度系数。\n- 并联电路约束：所有电芯共享相同的端电压降 $V$，且电流必须满足每个 $i$ 的 $V = I_i R_i(T_i)$。\n- 电流守恒：$I_1 + I_2 + I_3 = I_{tot}$。\n\n从这些关系出发，推导控制方程，以计算给定总电池包电流 $I_{tot}$ 和环境温度 $T_{amb}$ 下的稳态温升 $\\Delta T_i$ 和电流分配 $\\{I_1, I_2, I_3\\}$。将 $\\Delta T_i$ 以 $\\mathrm{K}$ 表示，电流 $I_i$ 以 $\\mathrm{A}$ 表示。\n\n最终程序必须计算以下参数集测试套件的解。每个参数集是一个元组，包含 $(R_0,\\alpha,hA_1,hA_2,hA_3,I_{tot},T_{amb})$，单位分别为 $\\Omega$、$\\mathrm{K}^{-1}$、$\\mathrm{W}/\\mathrm{K}$、$\\mathrm{W}/\\mathrm{K}$、$\\mathrm{W}/\\mathrm{K}$、$\\mathrm{A}$ 和 $\\mathrm{K}$：\n- 测试用例 1（一般情况，非对称冷却）：$(R_0 = 0.002, \\alpha = 0.003, hA_1 = 1.0, hA_2 = 1.2, hA_3 = 0.8, I_{tot} = 180.0, T_{amb} = 298.15)$。\n- 测试用例 2（无温度依赖性，$\\alpha = 0$）：$(R_0 = 0.002, \\alpha = 0.0, hA_1 = 1.0, hA_2 = 1.2, hA_3 = 0.8, I_{tot} = 180.0, T_{amb} = 298.15)$。\n- 测试用例 3（相同热路径）：$(R_0 = 0.002, \\alpha = 0.003, hA_1 = 1.0, hA_2 = 1.0, hA_3 = 1.0, I_{tot} = 180.0, T_{amb} = 298.15)$。\n- 测试用例 4（高度不对称，中等电流）：$(R_0 = 0.002, \\alpha = 0.003, hA_1 = 0.6, hA_2 = 1.8, hA_3 = 1.2, I_{tot} = 150.0, T_{amb} = 298.15)$。\n\n您的程序必须：\n- 从所述基本原理推导出必要的方程。\n- 数值求解满足并联约束和热稳态的共同端电压 $V$ 和电流 $I_i$。\n- 使用能量平衡计算稳态温升 $\\Delta T_i$。\n- 以 $[\\Delta T_1,\\Delta T_2,\\Delta T_3,I_1,I_2,I_3]$ 的列表形式返回每个测试用例的结果，其中每个值都表示为小数。将所有测试用例的结果汇总到一行输出中，该输出包含一个用方括号括起来的逗号分隔列表，其中每个元素本身就是该测试用例的列表。例如，生成形如 $[[x_{11},x_{12},x_{13},x_{14},x_{15},x_{16}],[x_{21},x_{22},x_{23},x_{24},x_{25},x_{26}],\\ldots]$ 的输出。\n\n将温升以 $\\mathrm{K}$ 表示，电流以 $\\mathrm{A}$ 表示，每个值四舍五入到六位小数。不涉及角度。不涉及百分比；所有值必须是小数。",
            "solution": "我们从三个由 $i \\in \\{1,2,3\\}$ 索引的并联电芯开始，每个电芯具有相同的环境电阻 $R_0$ 和线性温度系数 $\\alpha$，但与环境的热导 $hA_i$ 不同。环境温度为 $T_{amb}$，总电池包电流为 $I_{tot}$。\n\n我们使用以下基本关系：\n- 电阻中的焦耳热：$P_i = I_i^2 R_i(T_i)$。\n- 稳态热平衡（无热容累积）：$P_i = hA_i \\Delta T_i$，其中 $\\Delta T_i = T_i - T_{amb}$。\n- 电阻的线性温度依赖性：$R_i(T_i) = R_0 \\left(1 + \\alpha \\Delta T_i\\right)$。\n- 具有共同端电压的并联连接：对于每个 $i$，有 $V = I_i R_i(T_i)$。\n- 电流守恒：$I_1 + I_2 + I_3 = I_{tot}$。\n\n从稳态热平衡和焦耳热出发，令生热与散热相等：\n$$I_i^2 R_i(T_i) = hA_i \\Delta T_i.$$\n代入线性电阻模型，\n$$I_i^2 R_0 \\left(1 + \\alpha \\Delta T_i\\right) = hA_i \\Delta T_i.$$\n用 $I_i$ 表示 $\\Delta T_i$（代数分离）：\n$$I_i^2 R_0 + \\alpha I_i^2 R_0 \\Delta T_i = hA_i \\Delta T_i,$$\n$$(hA_i - \\alpha R_0 I_i^2) \\Delta T_i = R_0 I_i^2,$$\n$$\\Delta T_i = \\frac{R_0 I_i^2}{hA_i - \\alpha R_0 I_i^2}.$$\n当分母为正，即 $hA_i - \\alpha R_0 I_i^2 > 0$ 时，此表达式具有物理意义，表明存在稳定的稳态而无热失控。\n\n使用并联条件 $V = I_i R_i(T_i)$ 和 $R_i(T_i) = R_0 \\left(1 + \\alpha \\Delta T_i\\right)$，代入以 $I_i$ 表示的 $\\Delta T_i$ 表达式：\n$$R_i(T_i) = R_0 \\left(1 + \\alpha \\cdot \\frac{R_0 I_i^2}{hA_i - \\alpha R_0 I_i^2}\\right) = R_0 \\cdot \\frac{hA_i}{hA_i - \\alpha R_0 I_i^2}.$$\n因此，\n$$V = I_i \\cdot R_0 \\cdot \\frac{hA_i}{hA_i - \\alpha R_0 I_i^2}.$$\n这将每个电芯的 $V$ 和 $I_i$ 联系起来。对于给定的 $V$，将其重排为关于 $I_i$ 的显式多项式，\n$$V \\left(hA_i - \\alpha R_0 I_i^2\\right) = I_i R_0 hA_i,$$\n$$V hA_i - V \\alpha R_0 I_i^2 = I_i R_0 hA_i,$$\n$$V \\alpha R_0 I_i^2 + I_i R_0 hA_i - V hA_i = 0.$$\n这是一个关于 $I_i$ 的二次方程：\n$$a_i I_i^2 + b_i I_i + c_i = 0,$$\n其系数为\n$$a_i = V \\alpha R_0,\\quad b_i = R_0 hA_i,\\quad c_i = - V hA_i.$$\n判别式为\n$$D_i = b_i^2 - 4 a_i c_i = \\left(R_0 hA_i\\right)^2 + 4 V^2 \\alpha R_0 hA_i,$$\n对于所有 $V \\ge 0$, $\\alpha \\ge 0$, $R_0 > 0$, $hA_i > 0$，该判别式非负。物理上相关的根是正根：\n$$I_i(V) = \\begin{cases}\n\\frac{V}{R_0},  \\text{若 } \\alpha = 0,\\\n$$6pt]\n\\frac{-b_i + \\sqrt{D_i}}{2 a_i},  \\text{若 } \\alpha > 0.\n\\end{cases}$$\n$\\alpha = 0$ 的情况简化为 $I_i(V) = \\frac{V}{R_0}$，因为 $V = I_i R_0$ 且所有三个电芯在电气上是相同的；当电阻与温度无关时，热参数不影响电流。\n\n我们必须确定 $V$ 以满足电流守恒条件：\n$$I_1(V) + I_2(V) + I_3(V) = I_{tot}.$$\n定义\n$$S(V) = \\sum_{i=1}^{3} I_i(V).$$\n注意，$S(V)$ 在 $V \\ge 0$ 上是 $V$ 的单调递增函数，因为每个 $I_i(V)$ 都随 $V$ 增加（由于判别式对 $V$ 的正相关性，系数产生一个递增的根）。对于 $\\alpha = 0$，$S(V) = \\frac{3 V}{R_0}$，我们可以明确得到\n$$V^\\star = \\frac{I_{tot} R_0}{3},\\quad I_i^\\star = \\frac{V^\\star}{R_0} = \\frac{I_{tot}}{3}.$$\n对于 $\\alpha > 0$，我们通过稳健的区间法（如二分法）数值求解 $S(V) = I_{tot}$：\n- 选择 $V_{low} = 0$，此时 $S(V_{low}) = 0$。\n- 几何级数增加 $V_{high}$ 直到 $S(V_{high}) \\ge I_{tot}$。\n- 在 $[V_{low}, V_{high}]$ 上应用二分法，直到收敛到期望的容差。\n\n一旦找到 $V^\\star$，计算电流 $I_i^\\star = I_i(V^\\star)$，然后使用前面的公式计算稳态温升：\n$$\\Delta T_i^\\star = \\begin{cases}\n\\frac{R_0 \\left(I_i^\\star\\right)^2}{hA_i},  \\text{若 } \\alpha = 0,\\\n$$6pt]\n\\frac{R_0 \\left(I_i^\\star\\right)^2}{hA_i - \\alpha R_0 \\left(I_i^\\star\\right)^2},  \\text{若 } \\alpha > 0.\n\\end{cases}$$\n$\\alpha = 0$ 的特殊情况直接由 $I_i^2 R_0 = hA_i \\Delta T_i$ 得出。\n\n每个测试用例的算法步骤：\n- 输入 $(R_0,\\alpha,hA_1,hA_2,hA_3,I_{tot},T_{amb})$。\n- 如果 $\\alpha = 0$，计算 $V^\\star = \\frac{I_{tot} R_0}{3}$，$I_i^\\star = \\frac{V^\\star}{R_0}$ 对所有 $i$ 成立，以及 $\\Delta T_i^\\star = \\frac{R_0 \\left(I_i^\\star\\right)^2}{hA_i}$。\n- 如果 $\\alpha > 0$，通过上述二次方程的根定义 $I_i(V)$，通过二分法框定并求解 $S(V) = I_{tot}$，然后计算 $I_i^\\star$ 和 $\\Delta T_i^\\star$。\n- 报告 $[\\Delta T_1^\\star,\\Delta T_2^\\star,\\Delta T_3^\\star,I_1^\\star,I_2^\\star,I_3^\\star]$，其中 $\\Delta T_i^\\star$ 以 $\\mathrm{K}$ 为单位， $I_i^\\star$ 以 $\\mathrm{A}$ 为单位，每个值四舍五入到六位小数。\n\n测试套件中的边界情况：\n- 测试用例 2 验证了 $\\alpha = 0$ 的简化情况，此时无论 $hA_i$ 如何，电流都均等分配。\n- 测试用例 3 使用相同的 $hA_i$ 值，以确认当热路径相等时系统的对称性。\n- 测试用例 1 和 4 探究了热导不对称性通过电热耦合导致的不同温升和电流分配。\n\n最终程序为所有测试用例实现了上述方法，并打印一行包含汇总结果的输出，该结果是一个用方括号括起来的逗号分隔列表，其中每个元素是对应一个测试用例的列表。不涉及角度；温度是温升，单位为 $\\mathrm{K}$，电流单位为 $\\mathrm{A}$，均为四舍五入到六位小数的小数。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef i_of_v(V, R0, alpha, hA):\n    \"\"\"\n    Compute the cell current I as a function of terminal voltage V\n    for a single cell with parameters R0 (Ohm), alpha (1/K),\n    and hA (W/K), using the derived quadratic relation.\n    \"\"\"\n    if alpha == 0.0:\n        # Linear case: V = I * R0\n        return V / R0\n    # Quadratic coefficients: a I^2 + b I + c = 0\n    a = V * alpha * R0\n    b = R0 * hA\n    c = -V * hA\n    # Discriminant (always nonnegative for V >= 0, alpha >= 0, R0 > 0, hA > 0)\n    D = b * b - 4.0 * a * c  # = b^2 + 4 V^2 alpha R0 hA\n    sqrtD = np.sqrt(D)\n    # Physical positive root\n    I = (-b + sqrtD) / (2.0 * a)\n    return I\n\ndef sum_currents(V, R0, alpha, hA_list):\n    return sum(i_of_v(V, R0, alpha, hA) for hA in hA_list)\n\ndef solve_case(params):\n    \"\"\"\n    params: tuple (R0, alpha, hA1, hA2, hA3, Itot, Tamb)\n    Returns: [dT1, dT2, dT3, I1, I2, I3] with floats rounded to 6 decimals.\n    \"\"\"\n    R0, alpha, hA1, hA2, hA3, Itot, Tamb = params\n    hA_list = [hA1, hA2, hA3]\n\n    if alpha == 0.0:\n        # Closed form for V and currents\n        V_star = Itot * R0 / 3.0\n        I_list = [V_star / R0] * 3\n    else:\n        # Find V_star such that sum_currents(V_star) = Itot using bisection\n        V_low = 0.0\n        # A reasonable initial high bound; escalate if needed\n        V_high = max(Itot * R0, 1e-6)\n        # Ensure upper bound yields sum >= Itot\n        max_iters_expand = 100\n        for _ in range(max_iters_expand):\n            S = sum_currents(V_high, R0, alpha, hA_list)\n            if S >= Itot:\n                break\n            V_high *= 2.0\n        else:\n            # Fallback: if expansion failed, set a very high bound\n            V_high = max(V_high, Itot * R0 * 100.0)\n\n        # Bisection\n        tol = 1e-12\n        max_iters_bisect = 200\n        for _ in range(max_iters_bisect):\n            V_mid = 0.5 * (V_low + V_high)\n            S_mid = sum_currents(V_mid, R0, alpha, hA_list)\n            if abs(S_mid - Itot)  tol:\n                V_star = V_mid\n                break\n            if S_mid  Itot:\n                V_low = V_mid\n            else:\n                V_high = V_mid\n        else:\n            V_star = 0.5 * (V_low + V_high)\n\n        I_list = [i_of_v(V_star, R0, alpha, hA) for hA in hA_list]\n\n    # Compute steady-state temperature rises\n    dT_list = []\n    for I, hA in zip(I_list, hA_list):\n        if alpha == 0.0:\n            dT = (R0 * I * I) / hA\n        else:\n            denom = hA - alpha * R0 * I * I\n            # To maintain physical consistency, denom should be > 0.\n            # If numerical noise causes nonpositive denom, set to NaN.\n            if denom = 0.0:\n                dT = np.nan\n            else:\n                dT = (R0 * I * I) / denom\n        dT_list.append(dT)\n\n    # Round to six decimal places\n    dT_list_rounded = [float(f\"{dT:.6f}\") if not np.isnan(dT) else float(\"nan\") for dT in dT_list]\n    I_list_rounded = [float(f\"{I:.6f}\") for I in I_list]\n\n    return dT_list_rounded + I_list_rounded\n\ndef solve():\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (0.002, 0.003, 1.0, 1.2, 0.8, 180.0, 298.15),  # Test case 1\n        (0.002, 0.0,   1.0, 1.2, 0.8, 180.0, 298.15),  # Test case 2\n        (0.002, 0.003, 1.0, 1.0, 1.0, 180.0, 298.15),  # Test case 3\n        (0.002, 0.003, 0.6, 1.8, 1.2, 150.0, 298.15),  # Test case 4\n    ]\n\n    results = []\n    for case in test_cases:\n        result = solve_case(case)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    # We print a single line: list of lists, comma-separated, enclosed in square brackets.\n    def format_list(lst):\n        # Ensure fixed formatting of floats with up to six decimals\n        return \"[\" + \",\".join(f\"{x:.6f}\" if isinstance(x, float) and not np.isnan(x) else \"nan\" for x in lst) + \"]\"\n\n    formatted = \"[\" + \",\".join(format_list(res) for res in results) + \"]\"\n    print(formatted)\n\nsolve()\n```"
        }
    ]
}
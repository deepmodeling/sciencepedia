{
    "hands_on_practices": [
        {
            "introduction": "虽然最大功率传输定理为我们提供了一个理论上的最大值，但实际电池的运行受到电压和温度等操作安全约束的限制。本练习  将演示如何通过构建并求解一个约束优化问题来找到电池在现实中可达到的最大功率。这对于设计安全、高性能的电池至关重要。",
            "id": "3952506",
            "problem": "将单个锂离子电池的高倍率放电过程建模为一个恒定开路电压 (OCV) $U_{0}$ 的理想源与一个恒定内阻 $R_{\\mathrm{int}}$ 串联。在放电电流为 $I$ 时，端电压为 $V(I)=U_{0}-I\\,R_{\\mathrm{int}}$。电池内部的焦耳热为 $P_{\\mathrm{loss}}(I)=I^{2}R_{\\mathrm{int}}$。在稳态下，电池相对于环境温度的温升由一个集总热阻 $R_{\\mathrm{th}}$ 建模，因此 $\\Delta T(I)=R_{\\mathrm{th}}\\,P_{\\mathrm{loss}}(I)$。传递给负载的外部功率为 $P_{\\mathrm{ext}}(I)=I\\,V(I)$。为保护下游电子设备并避免加速老化，该电池具有一个最小允许端电压（电压下限）$V_{\\min}$；同时，在环境温度为 $T_{\\mathrm{amb}}$ 的情况下，还有一个最大允许电池温度 $T_{\\max}$。\n\n考虑一个具有以下参数的 $U_{0}$-$R_{\\mathrm{int}}$-$R_{\\mathrm{th}}$ 电池：$U_{0}=3.7\\,\\mathrm{V}$，$R_{\\mathrm{int}}=0.020\\,\\Omega$，$R_{\\mathrm{th}}=\\frac{35}{18}\\,\\mathrm{K/W}$，$T_{\\max}=60\\,^{\\circ}\\mathrm{C}$，$T_{\\mathrm{amb}}=25\\,^{\\circ}\\mathrm{C}$，$V_{\\min}=3.0\\,\\mathrm{V}$，电池质量 $m=0.070\\,\\mathrm{kg}$。假设在感兴趣的工作范围内，$U_{0}$、$R_{\\mathrm{int}}$ 和 $R_{\\mathrm{th}}$ 不随电流和温度变化而恒定，并忽略除串联电阻之外的倍率相关极化效应。\n\n从给定的定义和模型出发，完成以下任务：\n\n- 推导 $P_{\\mathrm{ext}}(I)$ 的表达式，并证明当 $I\\ge 0$ 时，它对于 $I$ 是严格凹函数。解释为什么在施加电压下限和热约束时，$P_{\\mathrm{ext}}(I)$ 的无约束最大化点通常是不可行的，以及为什么经典线性源的最大功率传输定理 (MPTT) 在这些约束下不直接适用于该电化学源。\n\n- 建立在电压下限和热约束条件下的约束优化问题，以最大化比功率 $P_{\\mathrm{spec}}(I)=\\frac{P_{\\mathrm{ext}}(I)}{m}$。然后求解该问题，得到最优放电电流 $I^{\\star}$ 和相应的最大比功率 $P_{\\mathrm{spec}}^{\\star}$。\n\n以 $\\mathrm{W/kg}$ 为单位给出最大比功率 $P_{\\mathrm{spec}}^{\\star}$ 的最终答案，并四舍五入到四位有效数字。",
            "solution": "该问题已经过验证，被认为是科学上合理、提法得当且客观的。所有必要的参数和模型都已提供，足以建立并求解所要求的约束优化问题。该问题是一个将基本电学和热学模型应用于真实工程场景的标准练习。\n\n第一个任务是推导外部功率 $P_{\\mathrm{ext}}(I)$ 的表达式并分析其性质。外部功率定义为端电压 $V(I)$ 和放电电流 $I$ 的乘积。\n根据给定的端电压模型 $V(I)=U_{0}-I\\,R_{\\mathrm{int}}$，外部功率为：\n$$ P_{\\mathrm{ext}}(I) = I \\cdot V(I) = I(U_{0}-I\\,R_{\\mathrm{int}}) = U_{0}I - R_{\\mathrm{int}}I^2 $$\n为确定该函数在 $I \\ge 0$ 上的凹性，我们计算其关于 $I$ 的二阶导数：\n$$ \\frac{d P_{\\mathrm{ext}}}{dI} = U_{0} - 2R_{\\mathrm{int}}I $$\n$$ \\frac{d^2 P_{\\mathrm{ext}}}{dI^2} = -2R_{\\mathrm{int}} $$\n由于内阻 $R_{\\mathrm{int}}$ 是一个正的物理量（$R_{\\mathrm{int}}=0.020\\,\\Omega > 0$），其二阶导数 $\\frac{d^2 P_{\\mathrm{ext}}}{dI^2}$ 是一个负常数。一个在其定义域内二阶导数为负的函数是严格凹函数。因此，$P_{\\mathrm{ext}}(I)$ 对于所有 $I$（包括物理定义域 $I\\ge0$）都是一个关于 $I$ 的严格凹函数。\n\n$P_{\\mathrm{ext}}(I)$ 的无约束最大化点可以通过将其一阶导数设为零来求得：\n$$ \\frac{d P_{\\mathrm{ext}}}{dI} = U_{0} - 2R_{\\mathrm{int}}I = 0 \\implies I_{\\mathrm{MPTT}} = \\frac{U_{0}}{2R_{\\mathrm{int}}} $$\n这个结果与经典的直流电压源串联电阻的最大功率传输定理 (MPTT) 相对应，即当负载电阻等于电源内阻时，传递给外部负载的功率最大。在此状态下，端电压为 $V(I_{\\mathrm{MPTT}}) = U_{0} - (\\frac{U_{0}}{2R_{\\mathrm{int}}}) R_{\\mathrm{int}} = \\frac{U_{0}}{2}$。\n\n然而，MPTT 适用于理想的、无约束的系统。在本问题中，电化学电池的运行受到两个关键约束的限制：最小端电压 $V_{\\min}$ 和最大电池温度 $T_{\\max}$。这些约束为电流 $I$ 定义了一个可行工作区域。如果实现最大功率传输所需的电流 $I_{\\mathrm{MPTT}}$ 导致电压降至 $V_{\\min}$ 以下或温度升至 $T_{\\max}$ 以上，则该工作点是不允许的。优化问题不再是无约束的，MPTT 不能直接用于找到*可行的*最优点。真正的最大比功率将在一个受这些约束之一限制的电流下实现，该电流将小于 $I_{\\mathrm{MPTT}}$。\n\n第二个任务是建立并求解约束优化问题，以找到最大比功率 $P_{\\mathrm{spec}}^{\\star}$。目标函数是最大化 $P_{\\mathrm{spec}}(I) = \\frac{P_{\\mathrm{ext}}(I)}{m}$。由于质量 $m$ 是一个正常数，最大化比功率 $P_{\\mathrm{spec}}(I)$ 等价于最大化外部功率 $P_{\\mathrm{ext}}(I)$。\n\n该问题受以下约束：\n1.  **电压约束：** 端电压不得低于 $V_{\\min}$。\n    $$ V(I) \\ge V_{\\min} $$\n    $$ U_{0} - I R_{\\mathrm{int}} \\ge V_{\\min} \\implies I R_{\\mathrm{int}} \\le U_{0} - V_{\\min} $$\n    这给出了电流的一个上界：\n    $$ I \\le \\frac{U_{0} - V_{\\min}}{R_{\\mathrm{int}}} \\equiv I_{\\max,V} $$\n2.  **热约束：** 电池温度不得超过 $T_{\\max}$。电池温度为 $T_{\\mathrm{amb}} + \\Delta T(I)$。\n    $$ T_{\\mathrm{amb}} + \\Delta T(I) \\le T_{\\max} $$\n    使用给定的模型 $\\Delta T(I) = R_{\\mathrm{th}}P_{\\mathrm{loss}}(I)$ 和 $P_{\\mathrm{loss}}(I) = I^2 R_{\\mathrm{int}}$：\n    $$ R_{\\mathrm{th}} I^2 R_{\\mathrm{int}} \\le T_{\\max} - T_{\\mathrm{amb}} $$\n    $$ I^2 \\le \\frac{T_{\\max} - T_{\\mathrm{amb}}}{R_{\\mathrm{th}} R_{\\mathrm{int}}} $$\n    由于电流 $I$ 必须为非负，这给出了另一个上界：\n    $$ I \\le \\sqrt{\\frac{T_{\\max} - T_{\\mathrm{amb}}}{R_{\\mathrm{th}} R_{\\mathrm{int}}}} \\equiv I_{\\max,T} $$\n3.  **物理约束：** 电流必须为非负，即 $I \\ge 0$。\n\n完整的约束优化问题是：\n$$ \\text{maximize } P_{\\mathrm{ext}}(I) = U_{0}I - R_{\\mathrm{int}}I^2 $$\n$$ \\text{subject to } 0 \\le I \\le I_{\\max,V} \\text{ and } 0 \\le I \\le I_{\\max,T} $$\n这可以简化为在可行区间 $[0, I_{\\mathrm{lim}}]$ 上最大化 $P_{\\mathrm{ext}}(I)$，其中 $I_{\\mathrm{lim}} = \\min(I_{\\max,V}, I_{\\max,T})$。\n\n现在，我们代入给定的数值：\n$U_{0}=3.7\\,\\mathrm{V}$，$R_{\\mathrm{int}}=0.020\\,\\Omega$，$R_{\\mathrm{th}}=\\frac{35}{18}\\,\\mathrm{K/W}$，$T_{\\max}=60\\,^{\\circ}\\mathrm{C}$，$T_{\\mathrm{amb}}=25\\,^{\\circ}\\mathrm{C}$，$V_{\\min}=3.0\\,\\mathrm{V}$，以及 $m=0.070\\,\\mathrm{kg}$。\n\n首先，我们计算电流限制：\n$$ I_{\\max,V} = \\frac{3.7\\,\\mathrm{V} - 3.0\\,\\mathrm{V}}{0.020\\,\\Omega} = \\frac{0.7}{0.020}\\,\\mathrm{A} = 35\\,\\mathrm{A} $$\n最大温升为 $\\Delta T_{\\max} = T_{\\max} - T_{\\mathrm{amb}} = 60\\,^{\\circ}\\mathrm{C} - 25\\,^{\\circ}\\mathrm{C} = 35\\,\\mathrm{K}$。\n$$ I_{\\max,T} = \\sqrt{\\frac{35\\,\\mathrm{K}}{(\\frac{35}{18}\\,\\mathrm{K/W}) \\cdot (0.020\\,\\Omega)}} = \\sqrt{\\frac{18}{0.020}}\\,\\mathrm{A} = \\sqrt{900}\\,\\mathrm{A} = 30\\,\\mathrm{A} $$\n电流的总限制是 $I_{\\mathrm{lim}} = \\min(35\\,\\mathrm{A}, 30\\,\\mathrm{A}) = 30\\,\\mathrm{A}$。\n电流的可行区域是 $I \\in [0, 30\\,\\mathrm{A}]$。\n\n接下来，我们求出无约束最大化点：\n$$ I_{\\mathrm{MPTT}} = \\frac{U_{0}}{2R_{\\mathrm{int}}} = \\frac{3.7\\,\\mathrm{V}}{2 \\cdot 0.020\\,\\Omega} = \\frac{3.7}{0.04}\\,\\mathrm{A} = 92.5\\,\\mathrm{A} $$\n我们正在闭区间 $[0, I_{\\mathrm{lim}}]$ 上最大化一个严格凹函数 $P_{\\mathrm{ext}}(I)$。抛物线的顶点位于 $I_{\\mathrm{MPTT}} = 92.5\\,\\mathrm{A}$。由于 $I_{\\mathrm{MPTT}} > I_{\\mathrm{lim}}$，函数 $P_{\\mathrm{ext}}(I)$ 在整个可行区间 $[0, 30\\,\\mathrm{A}]$ 上是严格递增的。因此，在此区间内 $P_{\\mathrm{ext}}(I)$ 的最大值出现在右边界处。最优电流为：\n$$ I^{\\star} = I_{\\mathrm{lim}} = 30\\,\\mathrm{A} $$\n这表明该电池的运行受热约束限制。\n\n现在我们计算在此最优电流下的最大外部功率：\n$$ P_{\\mathrm{ext}}^{\\star} = P_{\\mathrm{ext}}(I^{\\star}) = U_{0}I^{\\star} - R_{\\mathrm{int}}(I^{\\star})^2 $$\n$$ P_{\\mathrm{ext}}^{\\star} = (3.7\\,\\mathrm{V})(30\\,\\mathrm{A}) - (0.020\\,\\Omega)(30\\,\\mathrm{A})^2 = 111\\,\\mathrm{W} - (0.020 \\cdot 900)\\,\\mathrm{W} = 111\\,\\mathrm{W} - 18\\,\\mathrm{W} = 93\\,\\mathrm{W} $$\n最后，我们计算相应的最大比功率 $P_{\\mathrm{spec}}^{\\star}$：\n$$ P_{\\mathrm{spec}}^{\\star} = \\frac{P_{\\mathrm{ext}}^{\\star}}{m} = \\frac{93\\,\\mathrm{W}}{0.070\\,\\mathrm{kg}} \\approx 1328.5714\\,\\mathrm{W/kg} $$\n四舍五入到四位有效数字，我们得到 $1329\\,\\mathrm{W/kg}$。\n在此最优电流 $I^{\\star}=30\\,\\mathrm{A}$ 下，端电压为 $V(30) = 3.7 - 30 \\times 0.02 = 3.7-0.6 = 3.1\\,\\mathrm{V}$，高于 $V_{\\min}=3.0\\,\\mathrm{V}$。温度为 $T(30) = 25 + (\\frac{35}{18}) \\times (30^2 \\times 0.02) = 25 + (\\frac{35}{18}) \\times 18 = 25 + 35 = 60\\,^{\\circ}\\mathrm{C}$，正好等于 $T_{\\max}$。两个约束都得到满足。",
            "answer": "$$\n\\boxed{1329}\n$$"
        },
        {
            "introduction": "在理解了内部电阻是限制功率的关键因素之后，本练习  旨在深入探究该电阻的来源。通过基于隔膜的物理特性（如孔隙率和曲折度）对其贡献进行建模，您将量化一个关键组件的设计如何直接影响电芯的最大功率输出。",
            "id": "3952554",
            "problem": "一个锂离子软包电池在大倍率放电时使用戴维南等效电路进行建模：一个开路电压 (OCV) 为 $V_{\\mathrm{OC}}$ 的理想电压源与一个总内阻串联。该内阻是一个欧姆基线电阻（不包括隔膜）和多孔隔膜的离子电阻之和。基线内阻（不包括隔膜）为 $R_{0}$。隔膜的厚度为 $L$，几何面积为 $A$，孔隙率为 $\\varepsilon$，曲折度为 $\\tau$，并充满了体离子电导率为 $\\kappa$ 的电解质。在多孔介质中，有效离子电导率为 $\\kappa_{\\mathrm{eff}} = \\kappa \\,\\varepsilon / \\tau$，隔膜的离子电阻为 $R_{\\mathrm{sep}} = L / (\\kappa_{\\mathrm{eff}} A)$。在所考虑的工作范围内，所有电阻均被视为与电流和荷电状态无关。外部负载是纯电阻性的。\n\n仅从欧姆定律的定义、功率作为能量传输速率的定义以及电阻的串联相加出发，推导最大负载功率作为串联内阻和开路电压的函数表达式，然后量化隔膜的离子电阻如何降低最大功率。具体来说，计算无量纲比值\n$$\\alpha \\equiv \\frac{P_{\\max}^{\\text{(有隔膜时)}}}{P_{\\max}^{\\text{(无隔膜时)}}},$$\n其中“无隔膜时”意味着内阻中忽略了 $R_{\\mathrm{sep}}$。使用以下数值指定、物理上真实的设计参数：\n- $V_{\\mathrm{OC}} = 3.7\\,\\mathrm{V}$,\n- $R_{0} = 7.0 \\times 10^{-3}\\,\\Omega$,\n- $L = 25\\,\\mu\\mathrm{m}$,\n- $A = 1.0 \\times 10^{-2}\\,\\mathrm{m}^{2}$,\n- $\\varepsilon = 0.40$,\n- $\\tau = 2.5$,\n- $\\kappa = 1.2\\,\\mathrm{S}\\cdot\\mathrm{m}^{-1}$.\n\n假设在环境条件下，$\\kappa$ 是恒定的，在所考虑的短暂瞬态内开路电压是恒定的，并且根据基本电路定律，负载匹配以实现功率最大化。将 $\\alpha$ 的最终值四舍五入到四位有效数字。将最终答案表示为纯小数（无量纲）。",
            "solution": "问题是适定的，有科学依据，并为获得唯一解提供了所有必要信息。我们首先验证问题陈述。\n\n### 步骤 1：提取已知条件\n- **电路模型**：一个用于锂离子软包电池的戴维南等效电路，由一个开路电压（$V_{\\mathrm{OC}}$）的理想电压源与一个总内阻（$R_{\\mathrm{int}}$）串联组成。\n- **内阻构成**：$R_{\\mathrm{int}}$ 是基线欧姆电阻（$R_{0}$）和隔膜离子电阻（$R_{\\mathrm{sep}}$）之和。因此，$R_{\\mathrm{int}} = R_0 + R_{\\mathrm{sep}}$。\n- **隔膜属性**：\n  - 厚度：$L = 25\\,\\mu\\mathrm{m} = 2.5 \\times 10^{-5}\\,\\mathrm{m}$\n  - 几何面积：$A = 1.0 \\times 10^{-2}\\,\\mathrm{m}^{2}$\n  - 孔隙率：$\\varepsilon = 0.40$\n  - 曲折度：$\\tau = 2.5$\n  - 电解质体离子电导率：$\\kappa = 1.2\\,\\mathrm{S}\\cdot\\mathrm{m}^{-1}$\n- **提供的公式**：\n  - 有效离子电导率：$\\kappa_{\\mathrm{eff}} = \\kappa \\,\\varepsilon / \\tau$\n  - 隔膜离子电阻：$R_{\\mathrm{sep}} = L / (\\kappa_{\\mathrm{eff}} A)$\n- **数值**：\n  - $V_{\\mathrm{OC}} = 3.7\\,\\mathrm{V}$\n  - $R_{0} = 7.0 \\times 10^{-3}\\,\\Omega$\n- **条件**：\n  - 外部负载是纯电阻性的（$R_{\\mathrm{L}}$）。\n  - 负载匹配以实现功率最大化。\n  - 所有电阻、$V_{\\mathrm{OC}}$ 和 $\\kappa$ 均为常数。\n- **目标**：\n  1. 从第一性原理（欧姆定律、功率定义）推导最大负载功率（$P_{\\max}$）的表达式。\n  2. 计算无量纲比值 $\\alpha \\equiv \\frac{P_{\\max}^{\\text{(有隔膜时)}}}{P_{\\max}^{\\text{(无隔膜时)}}}$，其中“无隔膜时”的情况意味着 $R_{\\mathrm{sep}}$ 被忽略（$R_{\\mathrm{sep}} = 0$）。\n  3. 将 $\\alpha$ 的最终值四舍五入到四位有效数字。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题在科学上是有效的。戴维南模型是电化学电池的标准简化模型。多孔介质中电阻的公式是从输运现象的第一性原理推导出来的。给定的电池参数数值对于高功率锂离子电池是物理上真实的。问题陈述是自洽的、客观的、适定的，容许一个唯一的、稳定的解。没有科学缺陷、矛盾或歧义。\n\n### 步骤 3：结论与行动\n问题有效。将提供完整的解答。\n\n### 解题推导\n第一个任务是推导向负载传输最大功率的表达式。考虑所述的戴维南电路，其包含理想电压源 $V_{\\mathrm{OC}}$、总内阻 $R_{\\mathrm{int}}$ 和外部负载电阻 $R_{\\mathrm{L}}$。这些元件连接在一个单一的串联回路中。\n\n根据欧姆定律，流经电路的电流 $I$ 是总电压除以总电阻：\n$$I = \\frac{V_{\\mathrm{OC}}}{R_{\\mathrm{int}} + R_{\\mathrm{L}}}$$\n\n外部负载电阻 $R_{\\mathrm{L}}$ 耗散的功率 $P_{\\mathrm{L}}$ 由公式 $P = I^2 R$ 给出。代入电流 $I$ 的表达式：\n$$P_{\\mathrm{L}}(R_{\\mathrm{L}}) = \\left(\\frac{V_{\\mathrm{OC}}}{R_{\\mathrm{int}} + R_{\\mathrm{L}}}\\right)^2 R_{\\mathrm{L}} = \\frac{V_{\\mathrm{OC}}^2 R_{\\mathrm{L}}}{(R_{\\mathrm{int}} + R_{\\mathrm{L}})^2}$$\n\n为了找到使该功率最大化的 $R_{\\mathrm{L}}$ 值，我们必须求出 $P_{\\mathrm{L}}$ 对 $R_{\\mathrm{L}}$ 的导数，并将其设为零。我们使用微分的商法则，$\\frac{d}{dx}(\\frac{u}{v}) = \\frac{u'v - uv'}{v^2}$，其中 $u = R_{\\mathrm{L}}$ 且 $v = (R_{\\mathrm{int}} + R_{\\mathrm{L}})^2$。\n$$\\frac{dP_{\\mathrm{L}}}{dR_{\\mathrm{L}}} = V_{\\mathrm{OC}}^2 \\frac{d}{dR_{\\mathrm{L}}}\\left[\\frac{R_{\\mathrm{L}}}{(R_{\\mathrm{int}} + R_{\\mathrm{L}})^2}\\right]$$\n$$\\frac{dP_{\\mathrm{L}}}{dR_{\\mathrm{L}}} = V_{\\mathrm{OC}}^2 \\left[ \\frac{1 \\cdot (R_{\\mathrm{int}} + R_{\\mathrm{L}})^2 - R_{\\mathrm{L}} \\cdot 2(R_{\\mathrm{int}} + R_{\\mathrm{L}}) \\cdot 1}{(R_{\\mathrm{int}} + R_{\\mathrm{L}})^4} \\right]$$\n将导数设为零以求极值，我们只需要分子为零（因为 $V_{\\mathrm{OC}} \\neq 0$）：\n$$(R_{\\mathrm{int}} + R_{\\mathrm{L}})^2 - 2R_{\\mathrm{L}}(R_{\\mathrm{int}} + R_{\\mathrm{L}}) = 0$$\n提出公因式 $(R_{\\mathrm{int}} + R_{\\mathrm{L}})$：\n$$(R_{\\mathrm{int}} + R_{\\mathrm{L}})\\left[ (R_{\\mathrm{int}} + R_{\\mathrm{L}}) - 2R_{\\mathrm{L}} \\right] = 0$$\n由于对于物理电路，$R_{\\mathrm{int}}$ 和 $R_{\\mathrm{L}}$ 必须为正，因此 $(R_{\\mathrm{int}} + R_{\\mathrm{L}})$ 项不为零。所以，第二个因子必须为零：\n$$R_{\\mathrm{int}} + R_{\\mathrm{L}} - 2R_{\\mathrm{L}} = 0$$\n$$R_{\\mathrm{int}} - R_{\\mathrm{L}} = 0 \\implies R_{\\mathrm{L}} = R_{\\mathrm{int}}$$\n这就是最大功率传输的条件，即所谓的阻抗匹配。\n\n现在，我们将此条件代回功率表达式中，以求得最大功率 $P_{\\max}$：\n$$P_{\\max} = \\frac{V_{\\mathrm{OC}}^2 R_{\\mathrm{int}}}{(R_{\\mathrm{int}} + R_{\\mathrm{int}})^2} = \\frac{V_{\\mathrm{OC}}^2 R_{\\mathrm{int}}}{(2R_{\\mathrm{int}})^2} = \\frac{V_{\\mathrm{OC}}^2 R_{\\mathrm{int}}}{4R_{\\mathrm{int}}^2}$$\n$$P_{\\max} = \\frac{V_{\\mathrm{OC}}^2}{4R_{\\mathrm{int}}}$$\n这便完成了所要求的推导。\n\n接下来，我们计算无量纲比值 $\\alpha$。首先，我们计算隔膜电阻 $R_{\\mathrm{sep}}$。结合提供的两个公式：\n$$R_{\\mathrm{sep}} = \\frac{L}{\\kappa_{\\mathrm{eff}} A} = \\frac{L}{(\\kappa \\varepsilon / \\tau) A} = \\frac{L \\tau}{\\kappa \\varepsilon A}$$\n代入给定的数值：\n- $L = 2.5 \\times 10^{-5}\\,\\mathrm{m}$\n- $\\tau = 2.5$\n- $\\kappa = 1.2\\,\\mathrm{S}\\cdot\\mathrm{m}^{-1}$\n- $\\varepsilon = 0.40$\n- $A = 1.0 \\times 10^{-2}\\,\\mathrm{m}^{2}$\n$$R_{\\mathrm{sep}} = \\frac{(2.5 \\times 10^{-5}\\,\\mathrm{m})(2.5)}{(1.2\\,\\mathrm{S}\\cdot\\mathrm{m}^{-1})(0.40)(1.0 \\times 10^{-2}\\,\\mathrm{m}^{2})} = \\frac{6.25 \\times 10^{-5}}{4.8 \\times 10^{-3}}\\,\\Omega \\approx 0.01302083\\,\\Omega$$\n\n比值 $\\alpha$ 定义为有隔膜时可实现的最大功率与无隔膜时可实现的最大功率之比。\n- 有隔膜时：$R_{\\mathrm{int}} = R_0 + R_{\\mathrm{sep}}$。最大功率为 $P_{\\max}^{\\text{(有隔膜时)}} = \\frac{V_{\\mathrm{OC}}^2}{4(R_0 + R_{\\mathrm{sep}})}$。\n- 无隔膜时：$R_{\\mathrm{int}} = R_0$。最大功率为 $P_{\\max}^{\\text{(无隔膜时)}} = \\frac{V_{\\mathrm{OC}}^2}{4R_0}$。\n\n因此，比值 $\\alpha$ 为：\n$$\\alpha = \\frac{P_{\\max}^{\\text{(有隔膜时)}}}{P_{\\max}^{\\text{(无隔膜时)}}} = \\frac{\\frac{V_{\\mathrm{OC}}^2}{4(R_0 + R_{\\mathrm{sep}})}}{\\frac{V_{\\mathrm{OC}}^2}{4R_0}} = \\frac{R_0}{R_0 + R_{\\mathrm{sep}}}$$\n\n现在我们代入电阻的数值：\n- $R_0 = 7.0 \\times 10^{-3}\\,\\Omega = 0.007\\,\\Omega$\n- $R_{\\mathrm{sep}} \\approx 0.01302083\\,\\Omega$\n$$\\alpha = \\frac{0.007\\,\\Omega}{0.007\\,\\Omega + 0.01302083\\,\\Omega} = \\frac{0.007}{0.02002083} \\approx 0.349635$$\n\n按要求四舍五入到四位有效数字，我们得到：\n$$\\alpha \\approx 0.3496$$\n这个结果表明，隔膜的离子电阻导致电池的最大功率输出大幅降低，使其降至仅有基线欧姆电阻存在时可用功率的大约 $35\\%$。",
            "answer": "$$\\boxed{0.3496}$$"
        },
        {
            "introduction": "最后的这个练习  将综合前面所学的概念，将分析从单个电芯扩展到完整的电池包。您将构建一个包含串并联结构和汇流排电阻的电池包级模型，然后在系统级电压约束下，确定其最大比功率和功率密度。这项练习模拟了电池系统工程师的实际工作流程。",
            "id": "3952556",
            "problem": "单个电池单元由开路电压函数 $U(x)$ 和内阻函数 $R_{\\mathrm{int}}(x)$ 表征，其中 $x$ 是荷电状态 (SOC)。考虑一个由 $N_s$ 个电池单元串联和 $N_p$ 个电池单元并联组成的电池包。该电池包包含一个集总母线电阻 $R_{\\mathrm{bus}}$（在电池包层面被视为串联）。在放电电流 $I \\geq 0$ 的情况下，电池包端电压由串并联组合和欧姆定律定义。电池包的电功率是其端电压和电流的乘积。电池包具有电压限制 $V_{\\min}$ 和 $V_{\\max}$，因此允许的运行要求 $V_{\\min} \\leq V_{\\mathrm{pack}}(I,x) \\leq V_{\\max}$。\n\n从第一性原理出发，使用开路电压、欧姆定律和串并联等效的定义，推导出作为 $I$ 和 $x$ 函数的电池包端电压 $V_{\\mathrm{pack}}(I,x)$，以及相应的电池包功率 $P(I,x)$。然后，对于给定的 $x$, $N_s$, $N_p$, $R_{\\mathrm{bus}}$, $V_{\\min}$ 和 $V_{\\max}$，在所有满足电压限制的 $I \\geq 0$ 范围内，确定最大允许电池包功率 $P_{\\max}$。最后，将 $P_{\\max}$ 归一化以获得比功率 $P_{\\max}/m_{\\mathrm{pack}}$ 和体积功率密度 $P_{\\max}/V_{\\mathrm{pack,geom}}$，其中 $m_{\\mathrm{pack}}$ 和 $V_{\\mathrm{pack,geom}}$ 是通过对所有电池单元和母线组件的贡献求和得到的电池包总质量和总几何体积。\n\n所有输出必须以下列物理单位和格式表示：\n- 电池包级最大电功率 $P_{\\max}$，单位为瓦特，记为 $\\mathrm{W}$。\n- 比功率 $P_{\\max}/m_{\\mathrm{pack}}$，单位为瓦特每千克，记为 $\\mathrm{W/kg}$。\n- 体积功率密度 $P_{\\max}/V_{\\mathrm{pack,geom}}$，单位为瓦特每立方米，记为 $\\mathrm{W/m^3}$。\n将每个量表示为十进制数。\n\n使用以下参数化的电池模型和电池包属性。对于每个测试用例，计算 $P_{\\max}$、$P_{\\max}/m_{\\mathrm{pack}}$ 和 $P_{\\max}/V_{\\mathrm{pack,geom}}$。\n\n所有用例共用的电池模型：\n- 开路电压函数 $U(x) = u_0 + u_1 x + u_2 x^2$，系数为 $u_0 = 3.30\\,\\mathrm{V}$、$u_1 = 0.70\\,\\mathrm{V}$、$u_2 = 0.20\\,\\mathrm{V}$。\n- 内阻函数 $R_{\\mathrm{int}}(x) = r_0 + r_1 (1-x)^2$，系数为 $r_0 = 0.0030\\,\\Omega$、$r_1 = 0.0020\\,\\Omega$。\n\n适用于所有用例的电池包级组成和约束：\n- 对于放电电流 $I \\geq 0$，电池包端电压为 $V_{\\mathrm{pack}}(I,x)$，该值使用 $U(x)$ 和 $R_{\\mathrm{int}}(x)$ 通过串并联组合和欧姆定律获得。\n- 电池包的电压限制为 $V_{\\min}$ 和 $V_{\\max}$；只有满足 $V_{\\mathrm{pack}}(I,x) \\in [V_{\\min}, V_{\\max}]$ 的电流 $I$ 才是允许的。\n- 电池包质量和体积为 $m_{\\mathrm{pack}} = N_s N_p m_{\\mathrm{cell}} + m_{\\mathrm{bus}}$ 和 $V_{\\mathrm{pack,geom}} = N_s N_p V_{\\mathrm{cell}} + V_{\\mathrm{bus}}$。\n\n测试套件：\n- 用例 1（正常情况）：\n  - $x = 0.50$。\n  - $N_s = 96$，$N_p = 4$。\n  - $R_{\\mathrm{bus}} = 0.010\\,\\Omega$。\n  - $V_{\\min} = 300.0\\,\\mathrm{V}$，$V_{\\max} = 400.0\\,\\mathrm{V}$。\n  - $m_{\\mathrm{cell}} = 0.045\\,\\mathrm{kg}$，$m_{\\mathrm{bus}} = 3.0\\,\\mathrm{kg}$。\n  - $V_{\\mathrm{cell}} = 2.4\\times 10^{-5}\\,\\mathrm{m^3}$，$V_{\\mathrm{bus}} = 0.0030\\,\\mathrm{m^3}$。\n- 用例 2（边界情况，电池包最低电压等于开路电压）：\n  - $x = 1.00$。\n  - $N_s = 96$，$N_p = 4$。\n  - $R_{\\mathrm{bus}} = 0.000\\,\\Omega$。\n  - $V_{\\min} = 403.2\\,\\mathrm{V}$，$V_{\\max} = 410.0\\,\\mathrm{V}$。\n  - $m_{\\mathrm{cell}} = 0.045\\,\\mathrm{kg}$，$m_{\\mathrm{bus}} = 2.0\\,\\mathrm{kg}$。\n  - $V_{\\mathrm{cell}} = 2.4\\times 10^{-5}\\,\\mathrm{m^3}$，$V_{\\mathrm{bus}} = 0.0025\\,\\mathrm{m^3}$。\n- 用例 3（边缘情况，上限电压低于开路电池包电压，且母线电阻更大，并联数量不同）：\n  - $x = 0.80$。\n  - $N_s = 96$，$N_p = 3$。\n  - $R_{\\mathrm{bus}} = 0.050\\,\\Omega$。\n  - $V_{\\min} = 280.0\\,\\mathrm{V}$，$V_{\\max} = 360.0\\,\\mathrm{V}$。\n  - $m_{\\mathrm{cell}} = 0.050\\,\\mathrm{kg}$，$m_{\\mathrm{bus}} = 4.0\\,\\mathrm{kg}$。\n  - $V_{\\mathrm{cell}} = 2.5\\times 10^{-5}\\,\\mathrm{m^3}$，$V_{\\mathrm{bus}} = 0.0040\\,\\mathrm{m^3}$。\n\n你的程序应产生单行输出，其中包含一个用方括号括起来的逗号分隔列表。列表中的每个条目本身也是一个逗号分隔的列表，包含相应测试用例的三个十进制数 $[P_{\\max},P_{\\max}/m_{\\mathrm{pack}},P_{\\max}/V_{\\mathrm{pack,geom}}]$，单位分别为瓦特、瓦特每千克和瓦特每立方米。例如，输出格式必须类似于 $[[a,b,c],[d,e,f],[g,h,i]]$。",
            "solution": "该问题是有效的，因为它基于标准的电路理论（戴维南模型、串并联组合），具有科学依据，问题良定，并为计算提供了一套完整且一致的参数。\n\n解决方案需要推导电池包级的电气模型，然后求解一个约束优化问题以找到最大功率。\n\n**1. 电池包电气模型的推导**\n\n单个电池单元用开路电压 (OCV) $U(x)$ 和内阻 $R_{\\mathrm{int}}(x)$ 建模，其中 $x$ 是荷电状态。电池包由 $N_s$ 个电池单元串联和 $N_p$ 个电池单元并联组成。\n\n首先，考虑一个由 $N_s$ 个电池单元串联组成的单个电池串。该电池串的总开路电压和电阻为：\n$$U_{\\mathrm{string}}(x) = N_s U(x)$$\n$$R_{\\mathrm{string}}(x) = N_s R_{\\mathrm{int}}(x)$$\n\n接下来，将 $N_p$ 个这样的电池串并联。并联组合的等效开路电压与单个电池串的开路电压相同。等效电阻通过将各电池串的电阻并联计算得出：\n$$U_{\\mathrm{pack,cells}}(x) = U_{\\mathrm{string}}(x) = N_s U(x)$$\n$$R_{\\mathrm{pack,cells}}(x) = \\left( \\sum_{j=1}^{N_p} \\frac{1}{R_{\\mathrm{string}}(x)} \\right)^{-1} = \\frac{R_{\\mathrm{string}}(x)}{N_p} = \\frac{N_s}{N_p} R_{\\mathrm{int}}(x)$$\n\n整个电池包模型在包层面包含一个串联的集总母线电阻 $R_{\\mathrm{bus}}$。最终的电池包开路电压（我们记为 $U_{\\mathrm{ocv}}$）保持不变。电池包总等效电阻 $R_{\\mathrm{eq}}$ 是电池组电阻与母线电阻之和。\n$$U_{\\mathrm{ocv}}(x) = N_s U(x)$$\n$$R_{\\mathrm{eq}}(x) = \\frac{N_s}{N_p} R_{\\mathrm{int}}(x) + R_{\\mathrm{bus}}$$\n\n在总放电电流 $I \\ge 0$ 下，电池包的端电压 $V_{\\mathrm{pack}}$ 由欧姆定律应用于此等效电路给出：\n$$V_{\\mathrm{pack}}(I,x) = U_{\\mathrm{ocv}}(x) - I \\cdot R_{\\mathrm{eq}}(x)$$\n\n电池包输出的电功率 $P(I,x)$ 是其端电压和电流的乘积：\n$$P(I,x) = V_{\\mathrm{pack}}(I,x) \\cdot I = I \\cdot U_{\\mathrm{ocv}}(x) - I^2 \\cdot R_{\\mathrm{eq}}(x)$$\n\n**2. 约束下的功率最大化**\n\n对于固定的荷电状态 $x$，功率 $P(I)$ 是电流 $I$ 的二次函数，表示一个开口向下的抛物线。该抛物线的无约束最大值出现在其顶点处，可通过令导数 $\\frac{dP}{dI}$ 等于零求得：\n$$\\frac{dP}{dI} = U_{\\mathrm{ocv}}(x) - 2 I \\cdot R_{\\mathrm{eq}}(x) = 0 \\implies I_{\\mathrm{peak}} = \\frac{U_{\\mathrm{ocv}}(x)}{2 R_{\\mathrm{eq}}(x)}$$\n\n运行受到电池包电压限制 $V_{\\min} \\le V_{\\mathrm{pack}}(I,x) \\le V_{\\max}$ 的约束。由于 $V_{\\mathrm{pack}}(I,x)$ 是 $I$ 的单调递减函数，这些电压限制为电流 $I \\ge 0$ 定义了一个允许区间。\n\n由 $V_{\\mathrm{pack}}(I,x) \\ge V_{\\min}$ 得：\n$$U_{\\mathrm{ocv}}(x) - I \\cdot R_{\\mathrm{eq}}(x) \\ge V_{\\min} \\implies I \\le \\frac{U_{\\mathrm{ocv}}(x) - V_{\\min}}{R_{\\mathrm{eq}}(x)}$$\n这定义了最大允许电流 $I_{\\max, \\mathrm{adm}}$。为使正放电电流成为可能，必须有 $U_{\\mathrm{ocv}}(x) \\ge V_{\\min}$。如果 $U_{\\mathrm{ocv}}(x)  V_{\\min}$，则无法放电，最大功率为 $0 \\, \\mathrm{W}$。\n\n由 $V_{\\mathrm{pack}}(I,x) \\le V_{\\max}$ 得：\n$$U_{\\mathrm{ocv}}(x) - I \\cdot R_{\\mathrm{eq}}(x) \\le V_{\\max} \\implies I \\ge \\frac{U_{\\mathrm{ocv}}(x) - V_{\\max}}{R_{\\mathrm{eq}}(x)}$$\n这为电流定义了一个下界。只有当 $U_{\\mathrm{ocv}}(x)  V_{\\max}$ 时，这个下界才为正。\n\n结合 $I \\ge 0$，允许的电流区间为 $[I_{\\min, \\mathrm{adm}}, I_{\\max, \\mathrm{adm}}]$：\n$$I_{\\min, \\mathrm{adm}} = \\max\\left(0, \\frac{U_{\\mathrm{ocv}}(x) - V_{\\max}}{R_{\\mathrm{eq}}(x)}\\right)$$\n$$I_{\\max, \\mathrm{adm}} = \\frac{U_{\\mathrm{ocv}}(x) - V_{\\min}}{R_{\\mathrm{eq}}(x)}$$\n如果 $I_{\\min, \\mathrm{adm}}  I_{\\max, \\mathrm{adm}}$，则允许电流集为空，因此 $P_{\\max} = 0 \\, \\mathrm{W}$。\n\n最大允许功率 $P_{\\max}$ 是抛物线函数 $P(I)$ 在闭区间 $[I_{\\min, \\mathrm{adm}}, I_{\\max, \\mathrm{adm}}]$ 上的最大值。最优电流 $I_{\\mathrm{opt}}$ 通过将 $I_{\\mathrm{peak}}$ 限制在该区间内得到：\n$$I_{\\mathrm{opt}} = \\max(I_{\\min, \\mathrm{adm}}, \\min(I_{\\mathrm{peak}}, I_{\\max, \\mathrm{adm}}))$$\n然后在此最优电流下计算最大功率：\n$$P_{\\max} = P(I_{\\mathrm{opt}}, x) = I_{\\mathrm{opt}} \\cdot U_{\\mathrm{ocv}}(x) - I_{\\mathrm{opt}}^2 \\cdot R_{\\mathrm{eq}}(x)$$\n\n**3. 比功率和功率密度**\n\n电池包质量 $m_{\\mathrm{pack}}$ 和几何体积 $V_{\\mathrm{pack,geom}}$ 由电池单元和母线组件的贡献计算得出：\n$$m_{\\mathrm{pack}} = N_s N_p m_{\\mathrm{cell}} + m_{\\mathrm{bus}}$$\n$$V_{\\mathrm{pack,geom}} = N_s N_p V_{\\mathrm{cell}} + V_{\\mathrm{bus}}$$\n\n随后，通过将 $P_{\\max}$ 除以这些量来进行归一化，从而得到比功率和体积功率密度：\n$$\\text{比功率} = \\frac{P_{\\max}}{m_{\\mathrm{pack}}}$$\n$$\\text{体积功率密度} = \\frac{P_{\\max}}{V_{\\mathrm{pack,geom}}}$$\n\n针对所提供的每个测试用例，实现了这一完整算法。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes maximum power, specific power, and power density for battery pack test cases.\n    \"\"\"\n\n    def U_cell(x, u0, u1, u2):\n        \"\"\"Calculates open-circuit voltage of a single cell.\"\"\"\n        return u0 + u1 * x + u2 * x**2\n\n    def R_int_cell(x, r0, r1):\n        \"\"\"Calculates internal resistance of a single cell.\"\"\"\n        return r0 + r1 * (1 - x)**2\n\n    def calculate_power_metrics(params):\n        \"\"\"\n        Calculates P_max, P_max/m_pack, and P_max/V_pack_geom for a single test case.\n        \"\"\"\n        x, Ns, Np, R_bus, V_min, V_max, m_cell, m_bus, V_cell, V_bus = params\n        \n        # Cell model parameters (shared across all cases)\n        u0, u1, u2 = 3.30, 0.70, 0.20\n        r0, r1 = 0.0030, 0.0020\n\n        # Step 1: Calculate cell-level properties at the given SOC\n        U_c = U_cell(x, u0, u1, u2)\n        R_int_c = R_int_cell(x, r0, r1)\n\n        # Step 2: Calculate pack-level equivalent circuit properties\n        U_ocv = Ns * U_c\n        R_eq = (Ns / Np) * R_int_c + R_bus\n\n        # Step 3: Handle edge case where OCV is below V_min (no discharge possible)\n        if U_ocv  V_min:\n            return 0.0, 0.0, 0.0\n\n        # Step 4: Determine the admissible current interval [I_min_adm, I_max_adm]\n        # Upper bound on current from V_min\n        I_max_adm = (U_ocv - V_min) / R_eq if R_eq > 0 else float('inf')\n        \n        # Lower bound on current from V_max and I >= 0\n        I_min_adm = 0.0\n        if U_ocv > V_max:\n            I_min_adm = (U_ocv - V_max) / R_eq if R_eq > 0 else float('inf')\n            \n        # If the interval is invalid, no discharge is possible.\n        if I_min_adm > I_max_adm:\n            return 0.0, 0.0, 0.0\n            \n        # Step 5: Determine the optimal current for maximum power\n        # Current for unconstrained peak power (vertex of the power parabola)\n        I_peak = U_ocv / (2 * R_eq) if R_eq > 0 else float('inf')\n        \n        # Clamp the peak-power current to the admissible interval\n        I_opt = max(I_min_adm, min(I_peak, I_max_adm))\n        \n        # Step 6: Calculate maximum admissible power\n        P_max = I_opt * U_ocv - I_opt**2 * R_eq\n        # An equivalent calculation: V_pack_at_opt = U_ocv - I_opt * R_eq; P_max = V_pack_at_opt * I_opt\n\n        # Step 7: Calculate total pack mass and volume\n        m_pack = Ns * Np * m_cell + m_bus\n        V_pack_geom = Ns * Np * V_cell + V_bus\n        \n        # Step 8: Calculate specific power and volumetric power density\n        # Handle division by zero for mass/volume if they were zero, though not expected here.\n        specific_power = P_max / m_pack if m_pack > 0 else 0.0\n        volumetric_power_density = P_max / V_pack_geom if V_pack_geom > 0 else 0.0\n\n        return P_max, specific_power, volumetric_power_density\n\n    # Define the test cases from the problem statement.\n    # Format: (x, Ns, Np, R_bus, V_min, V_max, m_cell, m_bus, V_cell, V_bus)\n    test_cases = [\n        # Case 1\n        (0.50, 96, 4, 0.010, 300.0, 400.0, 0.045, 3.0, 2.4e-5, 0.0030),\n        # Case 2\n        (1.00, 96, 4, 0.000, 403.2, 410.0, 0.045, 2.0, 2.4e-5, 0.0025),\n        # Case 3\n        (0.80, 96, 3, 0.050, 280.0, 360.0, 0.050, 4.0, 2.5e-5, 0.0040),\n    ]\n\n    results = []\n    for case in test_cases:\n        p_max, p_spec, p_vol = calculate_power_metrics(case)\n        results.append((p_max, p_spec, p_vol))\n\n    # Format the results into the required string \"[[a,b,c],[d,e,f],...]\"\n    formatted_results = []\n    for p_max, p_spec, p_vol in results:\n        formatted_results.append(f\"[{p_max},{p_spec},{p_vol}]\")\n    \n    final_output_string = f\"[{','.join(formatted_results)}]\"\n    print(final_output_string)\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "在电极设计中，一个核心的权衡是：增加厚度可以提高容量，但同时也会增加制造成本并加剧传输限制。本练习将引导您通过平衡储能价值的边际收益与制造成本的边际成本来找到最佳平衡点，这是一个技术经济分析中的基本概念。这个思想实验使用简化的代表性模型来阐明优化过程，帮助您建立将物理原理与经济目标联系起来的直觉。",
            "id": "3906108",
            "problem": "在一个自动化的电池设计与仿真工作流程中，正为固定的放电倍率设计一种多孔锂离子正极。设计变量是电极厚度 $L$（单位为米）。在该放电倍率下，单位面积储存的能量被建模为 $E_{a}(L) = e_{v} \\, L \\, \\eta(L)$，其中 $e_{v}$ 是活性材料的体积能量密度，$\\eta(L)$ 是输运限制操作下的利用率因子。对于一维多孔电极中的中等倍率，基于扩散-反应理论的经验拟合通常将 $\\eta(L)$ 建模为 $\\eta(L) = \\frac{1}{1 + \\beta L}$，其中 $\\beta$ 是一个正的常数，其量纲为长度的倒数。\n\n单位面积的制造成本被建模为 $C_{a}(L) = c_{o} + c_{m} \\, L$，其中 $c_{o}$ 是与面积无关的固定开销，而 $c_{m}$ 是单位厚度的有效边际成本（包括材料和加工），其量纲为 $\\text{货币单位} \\cdot \\text{长度}^{-3}$。储存能量的价值以 $p_{E}$ 进行货币化，单位为 $\\text{货币单位} \\cdot \\text{焦耳}^{-1}$。放电时间约束施加了一个扩散限制，由 $\\tau_{d}(L) = \\frac{L^{2}}{D} \\leq \\tau_{\\mathrm{req}}$ 给出，其中 $D$ 是多孔电极中的有效离子扩散系数，$\\tau_{\\mathrm{req}}$ 是所要求的最大放电时间。\n\n给定以下参数：\n- $e_{v} = 3.6 \\times 10^{9} \\ \\text{J} \\cdot \\text{m}^{-3}$，\n- $\\beta = 1.0 \\times 10^{4} \\ \\text{m}^{-1}$，\n- $c_{o} = 5 \\ \\text{货币单位} \\cdot \\text{m}^{-2}$，\n- $c_{m} = 2.0 \\times 10^{4} \\ \\text{货币单位} \\cdot \\text{m}^{-3}$，\n- $p_{E} = 1.389 \\times 10^{-5} \\ \\text{货币单位} \\cdot \\text{J}^{-1}$，\n- $D = 5.0 \\times 10^{-10} \\ \\text{m}^{2} \\cdot \\text{s}^{-1}$，\n- $\\tau_{\\mathrm{req}} = 100 \\ \\text{s}$，\n\n从 $E_{a}(L)$ 和 $C_{a}(L)$ 的定义出发，计算将 $L$ 增加一个微小增量 $\\Delta L$ 所带来的一阶边际成本，以及相应的货币化储存能量的一阶边际收益。然后，在扩散时间约束下，确定盈亏平衡厚度 $L^{\\ast}$，在该厚度下，货币化的边际收益等于边际成本。最后，使用给定的参数对 $L^{\\ast}$ 进行数值计算，验证其是否满足扩散约束，并报告此盈亏平衡厚度。将您的最终数值答案四舍五入到四位有效数字，并以微米表示该厚度。",
            "solution": "该问题要求找到盈亏平衡电极厚度 $L^{\\ast}$，在此厚度下，增加厚度的边际成本与增加的储存能量所带来的边际收益完全相等，同时需要满足放电时间的物理约束。\n\n首先，我们必须验证问题陈述的有效性。\n\n**步骤1：提取已知条件**\n- 设计变量：电极厚度 $L$ (米)\n- 单位面积储存能量：$E_{a}(L) = e_{v} \\, L \\, \\eta(L)$\n- 体积能量密度：$e_{v} = 3.6 \\times 10^{9} \\ \\text{J} \\cdot \\text{m}^{-3}$\n- 利用率因子：$\\eta(L) = \\frac{1}{1 + \\beta L}$\n- 利用率因子常数：$\\beta = 1.0 \\times 10^{4} \\ \\text{m}^{-1}$\n- 单位面积制造成本：$C_{a}(L) = c_{o} + c_{m} \\, L$\n- 与面积无关的固定开销成本：$c_{o} = 5 \\ \\text{货币单位} \\cdot \\text{m}^{-2}$\n- 单位厚度的边际成本：$c_{m} = 2.0 \\times 10^{4} \\ \\text{货币单位} \\cdot \\text{m}^{-3}$\n- 能量货币化价值：$p_{E} = 1.389 \\times 10^{-5} \\ \\text{货币单位} \\cdot \\text{J}^{-1}$\n- 放电时间约束：$\\tau_{d}(L) = \\frac{L^{2}}{D} \\leq \\tau_{\\mathrm{req}}$\n- 有效离子扩散系数：$D = 5.0 \\times 10^{-10} \\ \\text{m}^{2} \\cdot \\text{s}^{-1}$\n- 要求的最大放电时间：$\\tau_{\\mathrm{req}} = 100 \\ \\text{s}$\n\n**步骤2：使用提取的已知条件进行验证**\n该问题具有科学依据，使用了来自多孔电极理论和技术经济分析的简化但标准的模型。所提供的参数对于在高放电倍率下运行的锂离子电池系统是物理上合理的。该问题是适定的，提供了所有必要信息且单位一致。这是一个客观、可形式化的优化问题。未检测到任何缺陷。\n\n**步骤3：结论与行动**\n问题有效。我们继续进行求解。\n\n单位面积的制造成本由 $C_{a}(L) = c_{o} + c_{m} L$ 给出。单位面积储存能量的货币化价值为 $V_{a}(L) = p_{E} E_{a}(L)$。代入 $E_{a}(L)$ 和 $\\eta(L)$ 的给定表达式，我们得到：\n$$V_{a}(L) = p_{E} \\left( e_{v} L \\frac{1}{1 + \\beta L} \\right) = \\frac{p_{E} e_{v} L}{1 + \\beta L}$$\n\n问题要求计算边际成本和边际收益。在此背景下，“边际”指的是相对于设计变量 $L$ 的变化率。因此，我们必须计算 $C_{a}(L)$ 和 $V_{a}(L)$ 关于 $L$ 的一阶导数。\n\n一阶边际成本是成本函数的导数：\n$$\\text{边际成本} = \\frac{dC_{a}}{dL} = \\frac{d}{dL}(c_{o} + c_{m} L) = c_{m}$$\n\n一阶边际收益是货币化能量价值函数的导数：\n$$\\text{边际收益} = \\frac{dV_{a}}{dL} = \\frac{d}{dL} \\left( \\frac{p_{E} e_{v} L}{1 + \\beta L} \\right)$$\n使用商的求导法则 $\\frac{d}{dx}\\left(\\frac{u}{v}\\right) = \\frac{u'v - uv'}{v^2}$，令 $u = p_{E} e_{v} L$ 且 $v = 1 + \\beta L$，我们得到 $u' = p_{E} e_{v}$ 和 $v' = \\beta$。\n$$\\frac{dV_{a}}{dL} = \\frac{(p_{E} e_{v})(1 + \\beta L) - (p_{E} e_{v} L)(\\beta)}{(1 + \\beta L)^2} = \\frac{p_{E} e_{v} + p_{E} e_{v} \\beta L - p_{E} e_{v} \\beta L}{(1 + \\beta L)^2} = \\frac{p_{E} e_{v}}{(1 + \\beta L)^2}$$\n\n盈亏平衡厚度 $L^{\\ast}$ 是边际收益等于边际成本时的 $L$ 值：\n$$\\frac{p_{E} e_{v}}{(1 + \\beta L^{\\ast})^2} = c_{m}$$\n我们现在求解这个方程以得到 $L^{\\ast}$：\n$$(1 + \\beta L^{\\ast})^2 = \\frac{p_{E} e_{v}}{c_{m}}$$\n对两边取正平方根（因为 $L^{\\ast}$ 必须为正，所以 $1 + \\beta L^{\\ast}$ 也必须为正）：\n$$1 + \\beta L^{\\ast} = \\sqrt{\\frac{p_{E} e_{v}}{c_{m}}}$$\n$$\\beta L^{\\ast} = \\sqrt{\\frac{p_{E} e_{v}}{c_{m}}} - 1$$\n$$L^{\\ast} = \\frac{1}{\\beta} \\left( \\sqrt{\\frac{p_{E} e_{v}}{c_{m}}} - 1 \\right)$$\n这就是盈亏平衡厚度的解析表达式。\n\n接下来，我们必须根据扩散时间约束来检查此解：\n$$\\frac{L^2}{D} \\leq \\tau_{\\mathrm{req}} \\implies L^2 \\leq D \\tau_{\\mathrm{req}} \\implies L \\leq \\sqrt{D \\tau_{\\mathrm{req}}}$$\n我们将最大允许厚度定义为 $L_{\\mathrm{max}} = \\sqrt{D \\tau_{\\mathrm{req}}}$。计算出的 $L^{\\ast}$ 仅在 $L^{\\ast} \\leq L_{\\mathrm{max}}$ 时才是一个有效的解。\n\n现在，我们代入给定的数值。\n首先，计算 $L^{\\ast}$ 表达式中平方根内的项：\n$$\\frac{p_{E} e_{v}}{c_{m}} = \\frac{(1.389 \\times 10^{-5} \\ \\text{货币单位} \\cdot \\text{J}^{-1}) (3.6 \\times 10^{9} \\ \\text{J} \\cdot \\text{m}^{-3})}{2.0 \\times 10^{4} \\ \\text{货币单位} \\cdot \\text{m}^{-3}} = \\frac{5.0004 \\times 10^4}{2.0 \\times 10^{4}} = 2.5002$$\n现在，将此结果代入 $L^{\\ast}$ 的表达式中：\n$$L^{\\ast} = \\frac{1}{1.0 \\times 10^{4} \\ \\text{m}^{-1}} \\left( \\sqrt{2.5002} - 1 \\right)$$\n$$L^{\\ast} \\approx \\frac{1}{1.0 \\times 10^{4}} \\left( 1.58120207 - 1 \\right) \\ \\text{m} = \\frac{0.58120207}{1.0 \\times 10^{4}} \\ \\text{m} \\approx 5.81202 \\times 10^{-5} \\ \\text{m}$$\n\n现在，我们通过计算 $L_{\\mathrm{max}}$ 来验证该值是否满足扩散时间约束：\n$$L_{\\mathrm{max}} = \\sqrt{D \\tau_{\\mathrm{req}}} = \\sqrt{(5.0 \\times 10^{-10} \\ \\text{m}^{2} \\cdot \\text{s}^{-1})(100 \\ \\text{s})} = \\sqrt{5.0 \\times 10^{-8} \\ \\text{m}^2}$$\n$$L_{\\mathrm{max}} = \\sqrt{5} \\times 10^{-4} \\ \\text{m} \\approx 2.23607 \\times 10^{-4} \\ \\text{m}$$\n比较这些值：\n$$L^{\\ast} \\approx 5.812 \\times 10^{-5} \\ \\text{m}$$\n$$L_{\\mathrm{max}} \\approx 2.236 \\times 10^{-4} \\ \\text{m}$$\n由于 $5.812 \\times 10^{-5}  2.236 \\times 10^{-4}$，条件 $L^{\\ast} \\leq L_{\\mathrm{max}}$ 得到满足。盈亏平衡厚度在物理上允许的范围内。\n\n最后，我们报告以微米为单位的 $L^{\\ast}$ 值，并四舍五入到四位有效数字。\n$$L^{\\ast} = 5.81202 \\times 10^{-5} \\ \\text{m} \\times \\left( \\frac{10^6 \\ \\mu\\text{m}}{1 \\ \\text{m}} \\right) = 58.1202 \\ \\mu\\text{m}$$\n四舍五入到四位有效数字得到 $58.12 \\ \\mu\\text{m}$。",
            "answer": "$$\\boxed{58.12}$$"
        },
        {
            "introduction": "真实的工程设计问题通常涉及多个相互作用的变量和严格的性能约束。本练习从单变量分析升级为一个正式的多变量优化问题，要求您应用强大的 Karush-Kuhn-Tucker (KKT) 条件。通过求解该问题，您将在满足容量和热性能要求的同时，找到电极厚度和孔隙率之间的最优平衡，并学习如何解读拉格朗日乘子所蕴含的物理意义。",
            "id": "3906150",
            "problem": "一个自动化的电池设计与仿真工作流考虑了单层软包电池模型的两个标量设计变量：无量纲正极涂层厚度 $x$（通过参考厚度归一化）和正极孔隙率 $y$（无量纲）。一个从高保真度仿真中导出的代理目标函数 $f(x,y)$，量化了在目标放电倍率下，由于传输和热损失导致的体积能量密度的预测惩罚。该代理函数是严格凸的，由 $f(x,y) = (x - 1)^{2} + (y - 0.5)^{2} + 0.1 \\, x \\, y$ 给出。设计必须满足一个源于定义 $Q_{\\mathrm{areal}} = \\alpha \\, x \\, (1 - y)$ 的所需面容量，其中 $\\alpha$ 是一个综合了材料载量和活性分数的比例系数。等式约束为 $g(x,y) = \\alpha \\, x \\, (1 - y) - C_{0} = 0$，其中 $\\alpha = 2$ 且 $C_{0} = 1$。为了限制在指定放电倍率下的最大温升，施加了一个线性化的热预算不等式约束 $h(x,y) = x + y - 1.2 \\le 0$，该约束是通过对与倍率相关的产热和散热平衡进行一阶展开得到的。\n\n从 Karush-Kuhn-Tucker (KKT) 条件的约束优化基本定义出发，并视 $h(x,y)$ 在最优点处为激活状态，建立拉格朗日函数并推导 KKT 系统。对其进行数值求解，以找到最优设计及相关的乘子。解释乘子在最优目标对约束松弛的边际灵敏度方面的物理意义。报告最优点处不等式约束乘子 $\\mu$ 的值。将你的答案四舍五入到四位有效数字。你的最终答案不带单位（该乘子是无量纲的）。",
            "solution": "该问题要求解一个电池优化问题的最优设计变量和拉格朗日乘子，并特别要求不等式约束乘子 $\\mu$ 的值。该优化问题是在一个等式约束 $g(x,y)=0$ 和一个不等式约束 $h(x,y) \\le 0$ 的条件下，最小化目标函数 $f(x,y)$。\n\n给定的函数和常数如下：\n目标函数（待最小化）：$f(x,y) = (x - 1)^{2} + (y - 0.5)^{2} + 0.1xy$\n等式约束：$g(x,y) = \\alpha x (1 - y) - C_{0} = 0$，其中 $\\alpha = 2$ 且 $C_{0} = 1$。这变为 $g(x,y) = 2x(1-y) - 1 = 0$。\n不等式约束：$h(x,y) = x + y - 1.2 \\le 0$。\n\n解是利用 Karush-Kuhn-Tucker (KKT) 条件求得的。此问题的拉格朗日函数 $L(x, y, \\lambda, \\mu)$ 是通过将约束加入目标函数来构造的，其中使用拉格朗日乘子 $\\lambda$ 对应等式约束，$\\mu$ 对应不等式约束。\n$$L(x, y, \\lambda, \\mu) = f(x,y) + \\lambda g(x,y) + \\mu h(x,y)$$\n$$L(x, y, \\lambda, \\mu) = \\left((x - 1)^{2} + (y - 0.5)^{2} + 0.1xy\\right) + \\lambda(2x(1-y) - 1) + \\mu(x + y - 1.2)$$\n最优点 $(x^*, y^*, \\lambda^*, \\mu^*)$ 的 KKT 条件是：\n1.  平稳性条件：拉格朗日函数相对于设计变量的梯度必须为零。\n    $$\\frac{\\partial L}{\\partial x} = 2(x - 1) + 0.1y + 2\\lambda(1-y) + \\mu = 0$$\n    $$\\frac{\\partial L}{\\partial y} = 2(y - 0.5) + 0.1x - 2\\lambda x + \\mu = 0$$\n2.  原始可行性：约束必须被满足。\n    $$g(x,y) = 2x(1-y) - 1 = 0$$\n    $$h(x,y) = x + y - 1.2 \\le 0$$\n3.  对偶可行性：不等式乘子必须为非负。\n    $$\\mu \\ge 0$$\n4.  互补松弛性：不等式乘子与不等式约束函数的乘积必须为零。\n    $$\\mu h(x,y) = \\mu(x + y - 1.2) = 0$$\n\n题目说明我们必须将不等式约束 $h(x,y)$ 视为在最优点处是激活的。激活约束意味着它以等式形式被满足：\n$$h(x,y) = x + y - 1.2 = 0$$\n只要解存在，这就满足了互补松弛性条件 $\\mu(x+y-1.2)=0$。这个假设简化了方程组。我们可以用 $x$ 来表示 $y$：\n$$y = 1.2 - x$$\n我们将此式代入等式约束 $g(x,y)=0$：\n$$2x(1 - (1.2 - x)) - 1 = 0$$\n$$2x(x - 0.2) - 1 = 0$$\n$$2x^2 - 0.4x - 1 = 0$$\n这是一个关于 $x$ 的二次方程。我们使用求根公式 $x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$ 来解它：\n$$x = \\frac{0.4 \\pm \\sqrt{(-0.4)^2 - 4(2)(-1)}}{2(2)} = \\frac{0.4 \\pm \\sqrt{0.16 + 8}}{4} = \\frac{0.4 \\pm \\sqrt{8.16}}{4}$$\n因为 $x$ 代表物理厚度，它必须是正数。我们取正根：\n$$x = \\frac{0.4 + \\sqrt{8.16}}{4} \\approx 0.8141428$$\n现在我们求出对应的 $y$ 值：\n$$y = 1.2 - x \\approx 1.2 - 0.8141428 = 0.3858572$$\n设计变量 $x  0$ 且 $y$（孔隙率）在 0 和 1 之间，所以这些值在物理上是合理的。\n\n接下来，我们使用两个平稳性方程求解乘子 $\\lambda$ 和 $\\mu$。\n1. $2(x - 1) + 0.1y + 2\\lambda(1-y) + \\mu = 0$\n2. $2(y - 0.5) + 0.1x - 2\\lambda x + \\mu = 0$\n\n这是一个关于 $\\lambda$ 和 $\\mu$ 的线性系统。我们可以重新排列它们：\n1. $2\\lambda(1-y) + \\mu = -2(x - 1) - 0.1y$\n2. $-2\\lambda x + \\mu = -2(y - 0.5) - 0.1x$\n\n为了求解 $\\mu$，我们可以消去 $\\lambda$。将方程 (1) 乘以 $x$，方程 (2) 乘以 $(1-y)$，然后相加：\n$$x(2\\lambda(1-y) + \\mu) + (1-y)(-2\\lambda x + \\mu) = x(-2(x - 1) - 0.1y) + (1-y)(-2(y - 0.5) - 0.1x)$$\n含 $\\lambda$ 的项被消掉：\n$$\\mu x + \\mu(1-y) = -2x^2 + 2x - 0.1xy - (1-y)(2y-1+0.1x)$$\n$$\\mu(x + 1 - y) = -2x^2 + 2x - 0.1xy - (2y-1+0.1x - 2y^2+y-0.1xy)$$\n$$\\mu(x + 1 - y) = -2x^2 + 2x - 0.1xy - (3y - 1 + 0.1x - 2y^2 - 0.1xy)$$\n$$\\mu(x + 1 - y) = -2x^2 + 2y^2 + 1.9x - 3y + 1$$\n$$\\mu = \\frac{-2x^2 + 2y^2 + 1.9x - 3y + 1}{x - y + 1}$$\n将 $y = 1.2 - x$ 代入此表达式以简化它。\n分母：$x - (1.2-x) + 1 = 2x - 0.2$\n分子：$-2x^2 + 2(1.2-x)^2 + 1.9x - 3(1.2-x) + 1$\n$= -2x^2 + 2(1.44 - 2.4x + x^2) + 1.9x - 3.6 + 3x + 1$\n$= -2x^2 + 2.88 - 4.8x + 2x^2 + 1.9x - 3.6 + 3x + 1$\n$x^2$ 项消掉了。合并 $x$ 项：$(-4.8 + 1.9 + 3)x = 0.1x$。合并常数项：$2.88 - 3.6 + 1 = 0.28$。\n分子简化为 $0.1x + 0.28$。\n所以，$\\mu$ 的表达式为：\n$$\\mu = \\frac{0.1x + 0.28}{2x - 0.2}$$\n使用计算出的值 $x \\approx 0.8141428$：\n$$\\mu \\approx \\frac{0.1(0.8141428) + 0.28}{2(0.8141428) - 0.2} = \\frac{0.08141428 + 0.28}{1.6282856 - 0.2} = \\frac{0.36141428}{1.4282856} \\approx 0.253041$$\n这个值是正数，满足对偶可行性条件 $\\mu \\ge 0$。\n\n拉格朗日乘子的物理意义是，最优目标函数值对相应约束微小松弛的灵敏度。\n对于等式约束 $g(x,y) = 2x(1-y) - C_0 = 0$，乘子 $\\lambda$ 近似表示最优惩罚 $f_{opt}$ 相对于所需面容量变化的速率，即 $\\lambda \\approx \\frac{\\partial f_{opt}}{\\partial C_0}$。\n对于不等式约束 $h(x,y) = x+y - 1.2 \\le 0$，乘子 $\\mu$ 给出了 $f_{opt}$ 相对于约束右侧值变化的速率。也就是说，对于一个约束 $h(x,y) \\le b$，$\\mu \\approx -\\frac{\\partial f_{opt}}{\\partial b}$。一个正的 $\\mu$ 表示放宽约束（例如，对于热预算，增加 1.2 这个值）将会降低可实现的最小惩罚 $f_{opt}$。\n\n题目要求将 $\\mu$ 的值四舍五入到四位有效数字。\n$\\mu \\approx 0.2530$。",
            "answer": "$$ \\boxed{0.2530} $$"
        },
        {
            "introduction": "许多工程目标都旨在最小化“最坏情况”或峰值，例如峰值温度或最大应力，但这会导致目标函数不可微，从而不适用于高效的梯度优化算法。本练习探讨了如何利用一种被称为“Log-Sum-Exp”的平滑技术来重新表述这类目标函数。这种方法在忠于原始工程目标的同时，使问题变得易于处理，是优化工具箱中的一个关键策略。",
            "id": "3906153",
            "problem": "一个电池包在有限的驱动周期 $t \\in [0, t_{\\mathrm{f}}]$ 内，根据预设的电流曲线 $I(t)$ 运行。电池包中一个代表性电芯的热力学行为由集总能量平衡模型描述\n$$\nC_{\\mathrm{th}}(x) \\,\\frac{dT(t; x)}{dt} \\;=\\; h(x) A \\,\\big(T_{\\mathrm{amb}}(t) - T(t; x)\\big) \\;+\\; Q_{\\mathrm{gen}}(t, x, T(t; x)),\n$$\n初始条件为 $T(0; x) = T_0$，其中 $C_{\\mathrm{th}}(x)$ 是有效热容，$h(x)$ 是对流换热系数，$A$ 是有效交换面积，$T_{\\mathrm{amb}}(t)$ 是环境温度，$Q_{\\mathrm{gen}}(t, x, T)$ 是单位体积的产热率。一个标准的电-热分解给出\n$$\nQ_{\\mathrm{gen}}(t, x, T) \\;=\\; I(t)^2 \\, R(x, T) \\;+\\; I(t) \\, T \\, \\frac{\\partial U_{\\mathrm{oc}}(z(t; x); x)}{\\partial T},\n$$\n其中 $R(x, T)$ 是受设计向量 $x$ 影响且依赖于温度的内阻，$U_{\\mathrm{oc}}(z; x)$ 是在荷电状态 $z(t; x)$ 下的开路电位；荷电状态的演化遵循\n$$\n\\frac{dz(t; x)}{dt} \\;=\\; -\\,\\frac{I(t)}{C_{\\mathrm{cell}}(x)}, \\quad z(0; x) = z_0,\n$$\n其中 $C_{\\mathrm{cell}}(x)$ 是受 $x$ 影响的电芯容量。设计向量 $x$ 参数化了例如散热片厚度、极耳几何形状、热界面属性和冷却剂流速等几何与热管理决策；假设映射 $x \\mapsto C_{\\mathrm{th}}(x)$, $x \\mapsto h(x)$, $x \\mapsto R(x, T)$ 和 $x \\mapsto C_{\\mathrm{cell}}(x)$ 足够光滑，并且 $T_{\\mathrm{amb}}(t)$ 和 $I(t)$ 在 $[0, t_{\\mathrm{f}}]$ 上是连续且有界的。\n\n假设设计者希望在满足性能和资源约束（例如 $E_{\\mathrm{pack}}(x) \\ge E_{\\min}$，$m_{\\mathrm{pack}}(x) \\le m_{\\max}$ 以及对 $x$ 各分量的边界约束）的条件下，最小化整个驱动周期内的电芯峰值温度。基于梯度的优化方法是首选，但峰值温度目标函数通常是不可微的。\n\n当动力学在时间点 $\\{t_i\\}_{i=1}^N$（均匀步长为 $\\Delta t$）上被离散化时，哪个选项提供了一个与最小化峰值温度一致的、科学合理的目标函数，并且是一个有理论依据的、适用于梯度优化方法的可微替代函数，同时保持现有约束不变？\n\nA. 最小化 $J(x) = \\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x)$，并用 Log-Sum-Exp (对数-和-指数) 平滑函数替换最大值\n$$\nJ_\\beta(x) \\;=\\; \\frac{1}{\\beta} \\,\\log\\!\\Bigg(\\sum_{i=1}^{N} \\Delta t \\,\\exp\\!\\big(\\beta\\, T(t_i; x)\\big)\\Bigg), \\quad \\text{with } \\beta  0,\n$$\n使用相同的动力学约束和静态约束。\n\nB. 最小化平均温度 $J(x) = \\int_{0}^{t_{\\mathrm{f}}} T(t; x)\\, dt$，并用 $J_\\epsilon(x) = \\int_{0}^{t_{\\mathrm{f}}} \\sqrt{T(t; x)^2 + \\epsilon}\\, dt$（其中 $\\epsilon  0$）来平滑它，同时替换原有约束。\n\nC. 最小化温度轨迹的 $p$-拟范数 $J_p(x) = \\Big(\\int_{0}^{t_{\\mathrm{f}}} T(t; x)^p \\, dt\\Big)^{1/p}$（其中 $p \\in (0, 1)$），它比平均值更强调峰值，并保持约束不变。\n\nD. 最小化 $J_\\delta(x) = \\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x) + \\delta \\int_{0}^{t_{\\mathrm{f}}} \\big(\\tfrac{d T(t; x)}{dt}\\big)^2 dt$（其中 $\\delta  0$）以惩罚剧烈的温度变化，使用相同的约束，并声称增加的二次项确保了对梯度方法的可微性。",
            "solution": "首先，将对问题陈述的科学合理性、适定性和客观性进行验证。\n\n### 步骤 1：提取已知条件\n\n所提供的信息如下：\n- **时间区间：** $t \\in [0, t_{\\mathrm{f}}]$\n- **电流曲线：** $I(t)$，一个连续有界函数。\n- **环境温度：** $T_{\\mathrm{amb}}(t)$，一个连续有界函数。\n- **设计向量：** $x$\n- **状态变量：**\n  - 电芯温度：$T(t; x)$\n  - 荷电状态：$z(t; x)$\n- **控制方程（动力学系统）：**\n  - **能量平衡：** $C_{\\mathrm{th}}(x) \\frac{dT(t; x)}{dt} = h(x) A (T_{\\mathrm{amb}}(t) - T(t; x)) + Q_{\\mathrm{gen}}(t, x, T(t; x))$，初始条件为 $T(0; x) = T_0$。\n  - **荷电状态演化：** $\\frac{dz(t; x)}{dt} = -\\frac{I(t)}{C_{\\mathrm{cell}}(x)}$，初始条件为 $z(0; x) = z_0$。\n- **本构关系：**\n  - **产热：** $Q_{\\mathrm{gen}}(t, x, T) = I(t)^2 R(x, T) + I(t) T \\frac{\\partial U_{\\mathrm{oc}}(z(t; x); x)}{\\partial T}$。\n- **依赖于设计向量 $x$ 的参数：**\n  - 热容：$C_{\\mathrm{th}}(x)$\n  - 传热系数：$h(x)$\n  - 内阻：$R(x, T)$\n  - 电芯容量：$C_{\\mathrm{cell}}(x)$\n  - 开路电位：$U_{\\mathrm{oc}}(z; x)$\n- **常数参数：**\n  - 交换面积：$A$\n  - 初始温度：$T_0$\n  - 初始荷电状态：$z_0$\n- **假设：**\n  - 映射 $x \\mapsto C_{\\mathrm{th}}(x)$、$x \\mapsto h(x)$、$x \\mapsto R(x, T)$ 和 $x \\mapsto C_{\\mathrm{cell}}(x)$ 足够光滑。\n- **优化问题：**\n  - **目标：** 最小化电芯峰值温度，$\\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x)$。\n  - **约束：**\n    - 性能：$E_{\\mathrm{pack}}(x) \\ge E_{\\min}$\n    - 资源：$m_{\\mathrm{pack}}(x) \\le m_{\\max}$\n    - 对 $x$ 的边界约束。\n- **提出的挑战：** 峰值温度目标函数不可微，阻碍了基于梯度的优化方法的使用。\n- **问题：** 在时间点 $\\{t_i\\}_{i=1}^N$ 对动力学进行离散化时，找到一个科学合理且可微的替代目标函数来最小化峰值温度，同时保持约束不变。\n\n### 步骤 2：使用提取的已知条件进行验证\n\n1.  **科学依据：** 该问题描述了一个电池单元的集总参数热模型。这在热工程中是一种用于一阶分析的标准且科学上公认的方法。能量平衡方程正确地考虑了对流换热（牛顿冷却定律）和内部产热。产热项 $Q_{\\mathrm{gen}}$ 包括了不可逆焦耳热 ($I^2R$) 和可逆熵热 ($IT \\frac{\\partial U_{\\mathrm{oc}}}{\\partial T}$)，这与已建立的电化学-热理论（例如 Bernardi 模型）一致。荷电状态模型是一个简单但标准的库仑计数法。该问题牢固地植根于传热学和电化学原理。\n2.  **适定性：** 该系统由一组耦合的一阶常微分方程(ODEs)描述。根据所述的输入和参数的连续性与光滑性假设，标准的常微分方程定理（例如 Picard-Lindelöf）保证了对于给定的设计向量 $x$，解 $(T(t;x), z(t;x))$ 的存在性和唯一性。该优化问题是在约束条件下最小化一个非光滑目标函数，这在优化领域是一个定义明确的问题。核心问题是寻找一个非光滑函数的光滑近似，这是应用数学中的一个经典且适定的问题。\n3.  **客观性与清晰度：** 所使用的语言精确、技术性强，没有主观或含糊的陈述。所有术语在物理学、工程学和数学中都是标准术语。\n4.  **完整性与一致性：** 该问题为动力学系统、优化目标和约束提供了完整的定义。没有内部矛盾。其前提（目标函数不可微）逻辑上引出了问题（如何找到一个可微的替代函数）。\n\n### 步骤 3：结论与行动\n\n问题陈述是有效的。它在科学上是合理的，在数学上是适定的，客观且自洽。它提出了工程设计优化中的一个标准挑战。我们可以继续进行求解。\n\n### 推导与选项分析\n\n主要目标是最小化时间范围内的峰值温度：\n$$\nJ(x) = \\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x)\n$$\n在具有 $N$ 个时间点 $\\{t_i\\}_{i=1}^N$ 的离散时间设置下，这变为：\n$$\nJ(x) = \\max_{i \\in \\{1, 2, ..., N\\}} T(t_i; x)\n$$\n这个函数 $J(x)$ 关于设计向量 $x$ 在某些点上是不可微的，这些点是最大温度同时在多个时间点达到，或者峰值温度的出现时间随 $x$ 的微小变化而发生不连续跳变的点。为了使用基于梯度的优化，我们需要一个 $\\max$ 函数的光滑（可微）近似。\n\n对于函数 $f(y_1, ..., y_N) = \\max(y_1, ..., y_N)$，一个广泛使用且有理论依据的光滑近似是 Log-Sum-Exp (LSE) 函数，也称为“软最大值”：\n$$\nS_{\\beta}(y_1, ..., y_N) = \\frac{1}{\\beta} \\log \\left( \\sum_{i=1}^N \\exp(\\beta y_i) \\right)\n$$\n其中 $\\beta  0$ 是一个平滑参数。该函数具有以下性质：\n1.  对于任何 $\\beta  0$，它都是可微的。\n2.  它是最大值的上界：$\\max(y_i) \\le S_{\\beta}(y_i)$。\n3.  当 $\\beta \\to \\infty$ 时，它收敛于真实的最大值：$\\lim_{\\beta \\to \\infty} S_{\\beta}(y_1, ..., y_N) = \\max(y_1, ..., y_N)$。\n\n$\\beta$ 的值越大，LSE 函数对真实最大值的近似就越精确，但其导数会变得越“刚性”，这可能带来数值计算上的挑战。$\\beta$ 的选择涉及近似精度和数值稳定性之间的权衡。这种方法在科学上是合理的，并且是优化领域的标准方法。\n\n现在，我们评估每个选项。\n\n**A. 最小化 $J(x) = \\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x)$，并用 Log-Sum-Exp (对数-和-指数) 平滑函数替换最大值**\n$$\nJ_\\beta(x) \\;=\\; \\frac{1}{\\beta} \\,\\log\\!\\Bigg(\\sum_{i=1}^{N} \\Delta t \\,\\exp\\!\\big(\\beta\\, T(t_i; x)\\big)\\Bigg), \\quad \\text{with } \\beta  0,\n$$\n**使用相同的动力学约束和静态约束。**\n\n该选项正确地识别了原始目标。所提出的替代函数 $J_\\beta(x)$ 是 LSE 函数的一个加权版本。权重 $\\Delta t$ 对应于 LSE 函数连续时间模拟 $ \\frac{1}{\\beta} \\log\\left( \\int_0^{t_f} \\exp(\\beta T(t;x)) dt \\right) $ 的一个数值积分方案（具体来说是矩形法）。我们可以将目标函数重写为：\n$$\nJ_\\beta(x) = \\frac{1}{\\beta} \\log(\\Delta t) + \\frac{1}{\\beta} \\log\\left(\\sum_{i=1}^N \\exp(\\beta T(t_i; x))\\right)\n$$\n第一项 $\\frac{1}{\\beta} \\log(\\Delta t)$ 是关于优化变量 $x$ 的一个常数偏移量。因此，最小化 $J_\\beta(x)$ 等价于最小化离散温度值 $T(t_i; x)$ 的标准 LSE 函数。这是一个正确且有理论依据的最大值函数的光滑近似。它正确地指出其他约束应保持不变，因为目标只是修改目标函数。\n**结论：正确。**\n\n**B. 最小化平均温度 $J(x) = \\int_{0}^{t_{\\mathrm{f}}} T(t; x)\\, dt$，并用 $J_\\epsilon(x) = \\int_{0}^{t_{\\mathrm{f}}} \\sqrt{T(t; x)^2 + \\epsilon}\\, dt$（其中 $\\epsilon  0$）来平滑它，同时替换原有约束。**\n\n这个选项有多个缺陷。首先，它将根本的工程目标从最小化*峰值*温度改变为最小化*平均*温度。这两个目标并不等价。一个电池设计可能表现出较低的平均温度，但存在短暂的、灾难性的温度尖峰，而这个目标函数将无法恰当地惩罚这种情况。其次，原始目标，即温度的积分，对于 $x$ 已经是可微的（假设解 $T(t;x)$ 对 $x$ 可微，根据常微分方程的灵敏度分析，在给定的光滑性假设下这是成立的）。所提出的用 $\\sqrt{T(t;x)^2+\\epsilon}$ 进行的“平滑”是不必要且无意义的；对于非负温度，当 $\\epsilon$ 很小时，$\\sqrt{T^2+\\epsilon} \\approx T$，所以它并没有显著改变（本已光滑的）目标函数。第三，它建议替换约束，这与问题要求在保持约束不变的情况下调整目标函数相矛盾。\n**结论：不正确。**\n\n**C. 最小化温度轨迹的 $p$-拟范数 $J_p(x) = \\Big(\\int_{0}^{t_{\\mathrm{f}}} T(t; x)^p \\, dt\\Big)^{1/p}$（其中 $p \\in (0, 1)$），它比平均值更强调峰值，并保持约束不变。**\n\n该选项建议使用一个类 $p$-范数的泛函。众所周知，$L_p$ 范数在 $p \\to \\infty$ 的极限情况下可以近似 $L_\\infty$ 范数（对于非负函数，这对应于最大值）。该泛函“比平均值更强调峰值”的说法对于大的 $p$ 是正确的。然而，该选项指定了 $p \\in (0, 1)$。对于 $p \\in (0, 1)$，该泛函是一个拟范数，而不是真正的范数（它不满足三角不等式），并且它不是凸的。更重要的是，在这个范围（$0  p  1$）内，它并*不*能近似最大值。相反，这类泛函被用于其他领域，如压缩感知，以促进稀疏性（即，偏好在许多地方为零的解），这与寻找峰值是相反的。近似最大值函数的正确方法是使用一个大的 $p$ 值，即 $p \\gg 1$。为此目的选择 $p \\in (0,1)$ 是根本错误的。\n**结论：不正确。**\n\n**D. 最小化 $J_\\delta(x) = \\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x) + \\delta \\int_{0}^{t_{\\mathrm{f}}} \\big(\\tfrac{d T(t; x)}{dt}\\big)^2 dt$（其中 $\\delta  0$）以惩罚剧烈的温度变化，使用相同的约束，并声称增加的二次项确保了对梯度方法的可微性。**\n\n该选项建议在原始目标上增加一个正则化项 $\\delta \\int_{0}^{t_{\\mathrm{f}}} (\\frac{dT}{dt})^2 dt$。该项关于 $x$ 是可微的。然而，原始的不可微项 $\\max_{t \\in [0, t_{\\mathrm{f}}]} T(t; x)$ 仍然保留在目标函数中。一个不可微函数与一个可微函数的和仍然是不可微的。因此，“增加的二次项确保了可微性”的说法是错误的。函数 $J_\\delta(x)$ 是不可微的，因此没有解决寻找适用于梯度方法的可微替代函数的核心问题。\n**结论：不正确。**\n\n基于以上分析，只有选项 A 提出了一种科学和数学上都合理的方法，来为峰值温度目标创建一个可微的替代函数。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "The essence of porous electrode theory is to replace a complex, heterogeneous microstructure with a simplified, homogenized continuum. This exercise focuses on the foundational mathematical step of this process: relating a quantity defined only within a specific phase (the intrinsic average) to a quantity averaged over the entire volume (the superficial average). Mastering this derivation is key to understanding how microstructural properties like porosity explicitly enter the macroscopic governing equations that form the basis of battery models .",
            "id": "3942510",
            "problem": "Consider a one-dimensional heterogeneous battery electrode occupying a slab from position $x = x_{0}$ to $x = x_{0} + \\Delta x$ with constant cross-sectional area $A$. The pore space is fully saturated with electrolyte and no gas phase is present. The local electrolyte-filled porosity is $\\varepsilon^{\\ell}(x)$ and the local solid fraction is $\\varepsilon^{s}(x)$, with $\\varepsilon^{\\ell}(x) + \\varepsilon^{s}(x) = 1$ almost everywhere within the Representative Elementary Volume (REV). The electrolyte concentration field, $c^{\\ell}(x)$, is defined only within the electrolyte-filled pore space.\n\nStarting from the standard definitions used in volume averaging for porous media, namely the intrinsic phase average over the electrolyte-filled volume and the superficial (also called extrinsic) average over the total REV volume, derive an expression for the superficial average of the electrolyte concentration across the REV in terms of $\\varepsilon^{\\ell}(x)$, $c^{\\ell}(x)$, and $\\Delta x$. Assume the cross-sectional area $A$ is constant and that all fields are sufficiently smooth to justify the interchange of integration and multiplication where appropriate.\n\nProvide your final expression simplified to a single integral with respect to $x$ over the interval $[x_{0}, x_{0} + \\Delta x]$. The final answer must be a single closed-form analytic expression. No rounding is required. Do not include units in your final answer.",
            "solution": "The problem statement has been validated and is deemed scientifically grounded, well-posed, and objective. It is a standard derivation in the field of transport phenomena in porous media, specifically within the context of porous electrode theory. We may proceed with the solution.\n\nThe objective is to derive an expression for the superficial average of the electrolyte concentration, denoted here as $\\langle c^{\\ell} \\rangle_{sup}$, across a one-dimensional Representative Elementary Volume (REV). The REV is defined as a slab of constant cross-sectional area $A$ extending from position $x = x_{0}$ to $x = x_{0} + \\Delta x$.\n\nBy definition, the superficial average of a quantity is its integral over the volume of the phase in which it is defined, normalized by the total volume of the REV. In this case, the electrolyte concentration $c^{\\ell}$ is defined within the electrolyte phase volume, $V_{\\ell}$, and the total volume of the REV is $V_{REV}$. Therefore, the superficial average concentration is given by:\n$$\n\\langle c^{\\ell} \\rangle_{sup} = \\frac{1}{V_{REV}} \\int_{V_{\\ell}} c^{\\ell} \\, dV\n$$\nThe problem specifies that the REV is a slab with constant cross-sectional area $A$ and length $\\Delta x$. The total volume of the REV is thus:\n$$\nV_{REV} = A \\cdot \\Delta x\n$$\nThe concentration field is given as $c^{\\ell}(x)$, which implies that the concentration is uniform across any cross-section of the electrolyte phase at a given position $x$. This quantity, $c^{\\ell}(x)$, is the intrinsic phase average of the concentration over the electrolyte-filled area at position $x$.\n\nThe volume integral can be expressed using Cartesian coordinates. The integration is performed over the volume occupied by the electrolyte, $V_{\\ell}$. We can write this as an iterated integral, first over the cross-sectional area of the electrolyte at a given $x$, denoted $A_{\\ell}(x)$, and then along the length of the electrode from $x_{0}$ to $x_{0} + \\Delta x$.\n$$\n\\int_{V_{\\ell}} c^{\\ell} \\, dV = \\int_{x_{0}}^{x_{0} + \\Delta x} \\left( \\iint_{A_{\\ell}(x)} c^{\\ell}(x) \\, dy \\, dz \\right) dx\n$$\nSince $c^{\\ell}(x)$ is only a function of $x$, it can be treated as a constant with respect to the integration over the area ($y$ and $z$ coordinates).\n$$\n\\iint_{A_{\\ell}(x)} c^{\\ell}(x) \\, dy \\, dz = c^{\\ell}(x) \\left( \\iint_{A_{\\ell}(x)} dy \\, dz \\right)\n$$\nThe integral $\\iint_{A_{\\ell}(x)} dy \\, dz$ is simply the area of the electrolyte phase at position $x$, which is $A_{\\ell}(x)$. Thus, the inner integral simplifies to:\n$$\n\\iint_{A_{\\ell}(x)} c^{\\ell}(x) \\, dy \\, dz = c^{\\ell}(x) A_{\\ell}(x)\n$$\nSubstituting this result back into the expression for the total volume integral gives:\n$$\n\\int_{V_{\\ell}} c^{\\ell} \\, dV = \\int_{x_{0}}^{x_{0} + \\Delta x} c^{\\ell}(x) A_{\\ell}(x) \\, dx\n$$\nNow we relate the electrolyte-phase area $A_{\\ell}(x)$ to the local electrolyte-filled porosity, $\\varepsilon^{\\ell}(x)$. The porosity at position $x$ is defined as the fraction of the total cross-sectional area $A$ that is occupied by the electrolyte phase:\n$$\n\\varepsilon^{\\ell}(x) = \\frac{A_{\\ell}(x)}{A}\n$$\nRearranging this definition gives an expression for $A_{\\ell}(x)$:\n$$\nA_{\\ell}(x) = \\varepsilon^{\\ell}(x) A\n$$\nWe can now substitute this expression for $A_{\\ell}(x)$ into our integral for the superficial average:\n$$\n\\langle c^{\\ell} \\rangle_{sup} = \\frac{1}{V_{REV}} \\int_{x_{0}}^{x_{0} + \\Delta x} c^{\\ell}(x) \\left( \\varepsilon^{\\ell}(x) A \\right) \\, dx\n$$\nReplacing $V_{REV}$ with $A \\Delta x$:\n$$\n\\langle c^{\\ell} \\rangle_{sup} = \\frac{1}{A \\Delta x} \\int_{x_{0}}^{x_{0} + \\Delta x} A \\varepsilon^{\\ell}(x) c^{\\ell}(x) \\, dx\n$$\nThe constant total cross-sectional area $A$ appears in both the numerator and the denominator, so it cancels out.\n$$\n\\langle c^{\\ell} \\rangle_{sup} = \\frac{1}{\\Delta x} \\int_{x_{0}}^{x_{0} + \\Delta x} \\varepsilon^{\\ell}(x) c^{\\ell}(x) \\, dx\n$$\nThis is the final expression for the superficial average of the electrolyte concentration across the REV. It is given as a single integral with respect to $x$ over the specified interval, as required. The term $\\varepsilon^{\\ell}(x) c^{\\ell}(x)$ represents the local superficial concentration, and the expression is its spatial average over the length of the domain.",
            "answer": "$$\\boxed{\\frac{1}{\\Delta x} \\int_{x_{0}}^{x_{0} + \\Delta x} \\varepsilon^{\\ell}(x) c^{\\ell}(x) \\, dx}$$"
        },
        {
            "introduction": "With the averaging framework established, we can now derive macroscopic transport properties that account for the complex geometry of the porous medium. This practice demonstrates how microstructural parameters like porosity, $\\varepsilon^\\ell$, and tortuosity, $\\tau$, combine to define an effective diffusivity, $D_{\\text{eff}}$, which is a critical parameter in predicting mass transport limitations . By connecting these parameters to the resulting concentration polarization, you will gain a quantitative understanding of how an electrode or separator's microstructure directly impacts battery performance.",
            "id": "3942538",
            "problem": "A porous polymer separator saturated with liquid electrolyte is modeled as a stationary, isotropic, macroscopically homogeneous medium. The electrolyte in the pore space obeys Fick’s law at the microscale, with the intrinsic (bulk) salt diffusivity $D$ defined in the free solution. The separator has a measured liquid-phase porosity $\\varepsilon^{\\ell}=0.35$ and tortuosity $\\tau=2.1$. The separator thickness is $L=100\\,\\mu\\text{m}$. The porous-electrode volume-averaging framework represents the phase-averaged salt flux by an effective Fickian law $-\\!D_{\\text{eff}}\\nabla \\langle c \\rangle$, where $D_{\\text{eff}}$ is the effective diffusivity and $\\langle c \\rangle$ is the volume-averaged salt concentration in the pore phase.\n\nStarting from the microscale Fick’s law and the definitions of phase averaging, porosity, and tortuosity, derive an expression for $D_{\\text{eff}}$ in terms of $D$, $\\varepsilon^{\\ell}$, and $\\tau$. Then, using one-dimensional steady-state salt transport under a uniform salt flux (as established in a separator under galvanostatic operation with no volumetric sources in the separator), show how the salt concentration drop $\\Delta c$ across the separator depends on $D_{\\text{eff}}$ and $L$. Using this dependence, predict the multiplicative increase in the concentration polarization (defined here as the ratio $\\Delta c_{\\text{actual}}/\\Delta c_{\\text{open}}$) across the $L=100\\,\\mu\\text{m}$ separator relative to an ideal “perfectly open” separator with $\\varepsilon^{\\ell}=1$ and $\\tau=1$ but the same intrinsic diffusivity $D$ and the same imposed salt flux.\n\nGiven $D=2.5\\times 10^{-10}\\,\\text{m}^2/\\text{s}$, $\\varepsilon^{\\ell}=0.35$, and $\\tau=2.1$, compute $D_{\\text{eff}}$ and the multiplicative increase in concentration polarization. Express $D_{\\text{eff}}$ in $\\text{m}^2/\\text{s}$ and the increase factor as a pure number. Round both quantities to four significant figures.",
            "solution": "The starting point is the microscale Fick’s law for salt transport in the electrolyte-filled pore space,\n$$\n\\mathbf{N}(\\mathbf{x}) \\;=\\; -\\,D\\,\\nabla c(\\mathbf{x}),\n$$\nwhere $\\mathbf{N}$ is the local salt molar flux, $D$ is the intrinsic (bulk) salt diffusivity in free solution, and $c$ is the local salt concentration, all defined within the liquid phase of the pores.\n\nTo obtain a macroscale description appropriate for porous media, we volume average over a Representative Elementary Volume (REV). The superficial flux, $\\mathbf{J}$, is the average of the microscopic flux over the total REV volume, and it is macroscopically related to the gradient of the intrinsic (phase-averaged) concentration, $\\langle c \\rangle^{\\ell}$, by an effective diffusivity: $\\mathbf{J} = -D_{\\text{eff}}\\nabla \\langle c \\rangle^{\\ell}$.\n\nA simplified derivation for $D_{\\text{eff}}$ considers two geometric effects. First, the flux per total area is reduced by the porosity, $\\varepsilon^{\\ell}$, because transport only occurs in the liquid phase. Second, the tortuous path, of average length $L_{\\text{eff}} = \\tau L$, reduces the effective gradient by a factor of $\\tau$. This leads to the widely used relation:\n$$\nD_{\\text{eff}} \\;=\\; D\\,\\frac{\\varepsilon^{\\ell}}{\\tau}.\n$$\n\nNext, consider one-dimensional steady-state transport across the separator of thickness $L$ under a uniform salt flux $N_{s}$ (units of $\\text{mol}/\\text{m}^2\\text{s}$) imposed by the electrode reactions at the boundaries. Within the separator (no volumetric sources), the governing equation for the superficial flux reduces to constant flux, and the macroscopic Fick’s law gives\n$$\nN_{s} \\;=\\; -\\,D_{\\text{eff}}\\,\\frac{\\mathrm{d}c}{\\mathrm{d}x},\n$$\nso that the concentration gradient is uniform:\n$$\n\\frac{\\mathrm{d}c}{\\mathrm{d}x} \\;=\\; -\\,\\frac{N_{s}}{D_{\\text{eff}}}.\n$$\nThe concentration drop across the separator thickness $L$ is then\n$$\n\\Delta c \\;=\\; \\int_{0}^{L}\\!\\left|\\frac{\\mathrm{d}c}{\\mathrm{d}x}\\right|\\,\\mathrm{d}x \\;=\\; \\frac{N_{s} L}{D_{\\text{eff}}}.\n$$\nFor an ideal “perfectly open” separator with $\\varepsilon^{\\ell}=1$ and $\\tau=1$, the effective diffusivity equals the intrinsic diffusivity, $D_{\\text{eff,open}} = D$, yielding\n$$\n\\Delta c_{\\text{open}} \\;=\\; \\frac{N_{s} L}{D}.\n$$\nTherefore, at the same imposed salt flux $N_{s}$ and thickness $L$, the multiplicative increase in concentration polarization (the ratio of concentration drops) is\n$$\n\\frac{\\Delta c_{\\text{actual}}}{\\Delta c_{\\text{open}}}\n\\;=\\;\n\\frac{N_{s} L / D_{\\text{eff}}}{N_{s} L / D}\n\\;=\\;\n\\frac{D}{D_{\\text{eff}}}\n\\;=\\;\n\\frac{D}{D\\,\\varepsilon^{\\ell}/\\tau}\n\\;=\\;\n\\frac{\\tau}{\\varepsilon^{\\ell}}.\n$$\n\nWith the given values $D=2.5\\times 10^{-10}\\,\\text{m}^2/\\text{s}$, $\\varepsilon^{\\ell}=0.35$, and $\\tau=2.1$, the effective diffusivity is\n$$\nD_{\\text{eff}} \\;=\\; \\left(2.5\\times 10^{-10}\\right)\\,\\frac{0.35}{2.1}\n\\;=\\;\n\\left(2.5\\times 10^{-10}\\right)\\times \\frac{1}{6}\n\\;=\\;\n4.166666666\\ldots\\times 10^{-11}\\,\\text{m}^2/\\text{s}.\n$$\nRounded to four significant figures, $D_{\\text{eff}} = 4.167\\times 10^{-11}\\,\\text{m}^2/\\text{s}$.\n\nThe multiplicative increase in concentration polarization is\n$$\n\\frac{\\tau}{\\varepsilon^{\\ell}} \\;=\\; \\frac{2.1}{0.35} \\;=\\; 6.000,\n$$\nalready exact and, when rounded to four significant figures, remains $6.000$.\n\nThus, the requested quantities are $D_{\\text{eff}}$ in $\\text{m}^2/\\text{s}$ and the dimensionless increase factor.",
            "answer": "$$\\boxed{\\begin{pmatrix}4.167 \\times 10^{-11} & 6.000\\end{pmatrix}}$$"
        },
        {
            "introduction": "The ultimate goal of porous electrode theory is to create predictive models that describe the internal state of a battery during operation. This hands-on coding exercise challenges you to synthesize the core principles—charge conservation, Ohm's law, and reaction kinetics—into a single, cohesive boundary-value problem . By implementing and solving this model, you will gain practical experience in simulating the complex interplay of ionic and electronic transport with electrochemical reactions that governs the distribution of current and potential within an electrode.",
            "id": "3942511",
            "problem": "Consider a one-dimensional porous electrode of thickness $L$ with uniform specific surface area $a_s$ (interfacial area per unit volume), operated isothermally at temperature $T$. The electrolyte ionic current density $i^{\\ell}(x)$ and solid-phase electronic current density $i^{s}(x)$ vary along the through-thickness coordinate $x \\in [0,L]$. The following fundamental relations hold in the porous electrode under steady-state conditions:\n\n1. Conservation of charge in the electrolyte phase: $$\\frac{d}{dx} i^{\\ell}(x) = a_s F j(x),$$ where $j(x)$ is the molar interfacial reaction flux with units $\\mathrm{mol}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$ and $F$ is the Faraday constant.\n\n2. Conservation of charge in the solid phase: $$\\frac{d}{dx} i^{s}(x) = -a_s F j(x).$$\n\n3. The total current density is constant: $$i^{\\mathrm{tot}}(x) = i^{\\ell}(x) + i^{s}(x) = I,$$ where $I$ is the externally applied current density (positive for discharge) with units $\\mathrm{A}\\,\\mathrm{m}^{-2}$.\n\n4. Ohm's law in each phase with constant effective conductivities: $$i^{\\ell}(x) = -\\kappa_{\\mathrm{eff}} \\frac{d}{dx} \\phi_{\\ell}(x), \\quad i^{s}(x) = -\\sigma_{\\mathrm{eff}} \\frac{d}{dx} \\phi_{s}(x),$$ where $\\phi_{\\ell}(x)$ is the electrolyte potential and $\\phi_{s}(x)$ is the solid-phase potential, with $\\kappa_{\\mathrm{eff}}$ and $\\sigma_{\\mathrm{eff}}$ in $\\mathrm{S}\\,\\mathrm{m}^{-1}$.\n\n5. Butler–Volmer interfacial kinetics in terms of the overpotential $\\eta(x) = \\phi_{s}(x) - \\phi_{\\ell}(x) - U$, where $U$ is the equilibrium potential (assumed constant across the electrode). Define the faradaic interfacial current density $j_A(x)$ in $\\mathrm{A}\\,\\mathrm{m}^{-2}$ by $$j_A(x) = i_0 \\left[\\exp\\left(\\frac{\\alpha_a F}{R T} \\eta(x)\\right) - \\exp\\left(-\\frac{\\alpha_c F}{R T} \\eta(x)\\right)\\right],$$ where $i_0$ is the exchange current density in $\\mathrm{A}\\,\\mathrm{m}^{-2}$, $\\alpha_a$ and $\\alpha_c$ are the anodic and cathodic charge transfer coefficients, $R$ is the universal gas constant, and $T$ is the absolute temperature. The molar flux is then $j(x) = j_A(x)/F$.\n\nUsing the relations above, and starting from the fundamental base of charge conservation and Ohm’s law, derive a boundary-value problem for $\\phi_s(x)$ and $\\phi_{\\ell}(x)$ and solve for the ionic current density profile $i^{\\ell}(x)$ along $x \\in [0,L]$. Use the boundary conditions that encode physically realistic contacts:\n- At the current collector ($x=0$), the electrolyte carries no current: $$i^{\\ell}(0) = 0,$$ and the solid phase carries the applied current: $$i^{s}(0) = I.$$\n- At the separator interface ($x=L$), the solid phase carries no current: $$i^{s}(L) = 0,$$ and choose a potential gauge by setting $$\\phi_{\\ell}(L) = 0.$$\n\nAssume symmetric charge transfer coefficients $\\alpha_a = \\alpha_c = 1/2$ throughout. Express $i^{\\ell}(x)$ in $\\mathrm{A}\\,\\mathrm{m}^{-2}$.\n\nYour task is to write a complete, runnable program that constructs and solves the boundary-value problem for $\\phi_s(x)$ and $\\phi_{\\ell}(x)$ using these principles, and returns the ionic current density $i^{\\ell}(x)$ at five uniformly spaced locations $x \\in \\{0, L/4, L/2, 3L/4, L\\}$ for each test case in the test suite below.\n\nRequired constants:\n- Faraday constant $F = 96485\\,\\mathrm{C}\\,\\mathrm{mol}^{-1}$,\n- Universal gas constant $R = 8.314\\,\\mathrm{J}\\,\\mathrm{mol}^{-1}\\,\\mathrm{K}^{-1}$.\n\nTest suite (three cases):\n- Case 1 (balanced kinetics, moderate conductivities): $$L = 1.0 \\times 10^{-4}\\,\\mathrm{m},\\quad a_s = 1.0 \\times 10^{6}\\,\\mathrm{m}^{-1},\\quad I = 10.0\\,\\mathrm{A}\\,\\mathrm{m}^{-2},\\quad \\sigma_{\\mathrm{eff}} = 100.0\\,\\mathrm{S}\\,\\mathrm{m}^{-1},\\quad \\kappa_{\\mathrm{eff}} = 1.0\\,\\mathrm{S}\\,\\mathrm{m}^{-1},\\quad i_0 = 1.0\\,\\mathrm{A}\\,\\mathrm{m}^{-2},\\quad T = 298.0\\,\\mathrm{K},\\quad U = 0.1\\,\\mathrm{V}.$$\n- Case 2 (reaction-limited, lower conductivities): $$L = 1.0 \\times 10^{-4}\\,\\mathrm{m},\\quad a_s = 5.0 \\times 10^{6}\\,\\mathrm{m}^{-1},\\quad I = 5.0\\,\\mathrm{A}\\,\\mathrm{m}^{-2},\\quad \\sigma_{\\mathrm{eff}} = 50.0\\,\\mathrm{S}\\,\\mathrm{m}^{-1},\\quad \\kappa_{\\mathrm{eff}} = 0.5\\,\\mathrm{S}\\,\\mathrm{m}^{-1},\\quad i_0 = 0.05\\,\\mathrm{A}\\,\\mathrm{m}^{-2},\\quad T = 298.0\\,\\mathrm{K},\\quad U = 0.05\\,\\mathrm{V}.$$\n- Case 3 (high electrolyte conductivity, short electrode): $$L = 5.0 \\times 10^{-5}\\,\\mathrm{m},\\quad a_s = 2.0 \\times 10^{6}\\,\\mathrm{m}^{-1},\\quad I = 20.0\\,\\mathrm{A}\\,\\mathrm{m}^{-2},\\quad \\sigma_{\\mathrm{eff}} = 200.0\\,\\mathrm{S}\\,\\mathrm{m}^{-1},\\quad \\kappa_{\\mathrm{eff}} = 10.0\\,\\mathrm{S}\\,\\mathrm{m}^{-1},\\quad i_0 = 5.0\\,\\mathrm{A}\\,\\mathrm{m}^{-2},\\quad T = 298.0\\,\\mathrm{K},\\quad U = 0.2\\,\\mathrm{V}.$$\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list of five-element lists enclosed in square brackets, where each five-element list provides $i^{\\ell}(x)$ at $x \\in \\{0, L/4, L/2, 3L/4, L\\}$ for one test case, in $\\mathrm{A}\\,\\mathrm{m}^{-2}$. For example: \"[[i0,i1,i2,i3,i4],[...],[...]]\", with numeric values as floats in $\\mathrm{A}\\,\\mathrm{m}^{-2}$.",
            "solution": "The problem requires the derivation and solution of a boundary-value problem (BVP) describing the steady-state potential and current distributions within a one-dimensional porous electrode. The solution will be obtained by applying the fundamental principles of electrochemistry as laid out in the problem statement.\n\nThe governing physical principles are:\n1.  Conservation of charge in the electrolyte and solid phases, which relates the divergence of current to the local reaction rate:\n    $$ \\frac{d}{dx} i^{\\ell}(x) = a_s j_A(x) $$\n    $$ \\frac{d}{dx} i^{s}(x) = -a_s j_A(x) $$\n    where $j_A(x)$ is the interfacial current density in $\\mathrm{A}\\,\\mathrm{m}^{-2}$. Summing these two equations confirms that the total current, $i^{\\ell}(x) + i^{s}(x) = I$, is conserved ($dI/dx = 0$).\n\n2.  Ohm's law for charge transport in each phase, which relates current density to the gradient of the potential:\n    $$ i^{\\ell}(x) = -\\kappa_{\\mathrm{eff}} \\frac{d}{dx} \\phi_{\\ell}(x) $$\n    $$ i^{s}(x) = -\\sigma_{\\mathrm{eff}} \\frac{d}{dx} \\phi_{s}(x) $$\n\n3.  Butler-Volmer kinetics for the electrochemical reaction at the solid-electrolyte interface. The interfacial current density $j_A(x)$ is a function of the overpotential $\\eta(x) = \\phi_{s}(x) - \\phi_{\\ell}(x) - U$. With symmetric transfer coefficients $\\alpha_a = \\alpha_c = 1/2$, the equation simplifies:\n    $$ j_A(x) = i_0 \\left[\\exp\\left(\\frac{F}{2 R T} \\eta(x)\\right) - \\exp\\left(-\\frac{F}{2 R T} \\eta(x)\\right)\\right] = 2 i_0 \\sinh\\left(\\frac{F \\eta(x)}{2 R T}\\right) $$\n\nTo construct the BVP for the potentials $\\phi_s(x)$ and $\\phi_{\\ell}(x)$, we combine these principles. By substituting Ohm's law into the charge conservation equations, we obtain a system of two coupled, second-order, nonlinear ordinary differential equations (ODEs):\n$$ \\frac{d}{dx} \\left(-\\kappa_{\\mathrm{eff}} \\frac{d\\phi_{\\ell}}{dx}\\right) = -\\kappa_{\\mathrm{eff}} \\frac{d^2\\phi_{\\ell}}{dx^2} = a_s j_A\\left(\\phi_s(x), \\phi_{\\ell}(x)\\right) $$\n$$ \\frac{d}{dx} \\left(-\\sigma_{\\mathrm{eff}} \\frac{d\\phi_{s}}{dx}\\right) = -\\sigma_{\\mathrm{eff}} \\frac{d^2\\phi_{s}}{dx^2} = -a_s j_A\\left(\\phi_s(x), \\phi_{\\ell}(x)\\right) $$\nwhere $j_A$ is the nonlinear function of $\\phi_s$ and $\\phi_{\\ell}$ given by the Butler-Volmer equation.\n\nThis system of two second-order ODEs requires four boundary conditions for a unique solution. The given physical constraints provide these conditions:\n1.  At the current collector ($x=0$), electrolyte current is zero: $i^{\\ell}(0) = 0 \\implies -\\kappa_{\\mathrm{eff}} \\frac{d\\phi_{\\ell}}{dx}(0) = 0 \\implies \\frac{d\\phi_{\\ell}}{dx}(0) = 0$.\n2.  At the current collector ($x=0$), solid phase carries the total current: $i^{s}(0) = I \\implies -\\sigma_{\\mathrm{eff}} \\frac{d\\phi_{s}}{dx}(0) = I \\implies \\frac{d\\phi_{s}}{dx}(0) = -\\frac{I}{\\sigma_{\\mathrm{eff}}}$.\n3.  At the separator interface ($x=L$), solid phase current is zero: $i^{s}(L) = 0 \\implies -\\sigma_{\\mathrm{eff}} \\frac{d\\phi_{s}}{dx}(L) = 0 \\implies \\frac{d\\phi_{s}}{dx}(L) = 0$.\n4.  At the separator interface ($x=L$), the potential gauge is set: $\\phi_{\\ell}(L) = 0$.\n\nThis completes the formulation of the BVP. Due to the nonlinear nature of the $\\sinh$ term, an analytical solution is not generally feasible, necessitating a numerical approach. We will use a robust BVP solver, `scipy.integrate.solve_bvp`, which requires the problem to be cast as a system of first-order ODEs.\n\nLet's define a state vector $Y(x)$ with four components:\n$$ Y(x) = \\begin{bmatrix} Y_0(x) \\\\ Y_1(x) \\\\ Y_2(x) \\\\ Y_3(x) \\end{bmatrix} = \\begin{bmatrix} \\phi_s(x) \\\\ \\frac{d\\phi_s}{dx}(x) \\\\ \\phi_{\\ell}(x) \\\\ \\frac{d\\phi_{\\ell}}{dx}(x) \\end{bmatrix} $$\nThe system of two second-order ODEs can be rewritten as a system of four first-order ODEs, $\\frac{dY}{dx} = f(x, Y)$:\n$$ \\frac{d}{dx} \\begin{bmatrix} Y_0 \\\\ Y_1 \\\\ Y_2 \\\\ Y_3 \\end{bmatrix} = \\begin{bmatrix} Y_1 \\\\ \\frac{a_s}{\\sigma_{\\mathrm{eff}}} j_A(Y_0, Y_2) \\\\ Y_3 \\\\ -\\frac{a_s}{\\kappa_{\\mathrm{eff}}} j_A(Y_0, Y_2) \\end{bmatrix} $$\nwith $j_A(Y_0, Y_2) = 2 i_0 \\sinh\\left(\\frac{F (Y_0 - Y_2 - U)}{2 R T}\\right)$.\n\nThe boundary conditions are expressed in terms of the state vector at the boundaries $x=0$ (denoted by subscript $a$) and $x=L$ (subscript $b$):\n1.  $\\frac{d\\phi_{\\ell}}{dx}(0) = 0 \\implies Y_3(a) = 0$\n2.  $\\frac{d\\phi_{s}}{dx}(0) = -I/\\sigma_{\\mathrm{eff}} \\implies Y_1(a) = -I/\\sigma_{\\mathrm{eff}}$\n3.  $\\frac{d\\phi_{s}}{dx}(L) = 0 \\implies Y_1(b) = 0$\n4.  $\\phi_{\\ell}(L) = 0 \\implies Y_2(b) = 0$\n\nThe numerical algorithm proceeds by:\n1.  Defining Python functions for the ODE system and the boundary condition residuals.\n2.  Providing an initial mesh for $x \\in [0, L]$ and an initial guess for the solution vector $Y(x)$ on this mesh. A guess of all zeros is typically a sufficient starting point for the solver.\n3.  Calling `scipy.integrate.solve_bvp` with these functions, the mesh, and the guess. The solver iteratively refines the solution until the ODEs and boundary conditions are satisfied to a specified tolerance.\n4.  Once the BVP is solved, the resulting `sol` object contains a continuous representation of the solution $Y(x)$. The desired quantity, the ionic current density $i^{\\ell}(x)$, is calculated from the solution using Ohm's law:\n    $$ i^{\\ell}(x) = -\\kappa_{\\mathrm{eff}} \\frac{d\\phi_{\\ell}}{dx}(x) = -\\kappa_{\\mathrm{eff}} Y_3(x) $$\nThis expression is evaluated at the required points $x \\in \\{0, L/4, L/2, 3L/4, L\\}$.\n\nThis procedure is systematically applied to each test case provided in the problem statement to generate the final results.",
            "answer": "```python\nimport numpy as np\nfrom scipy.integrate import solve_bvp\n\ndef solve():\n    \"\"\"\n    Solves the porous electrode boundary-value problem for three test cases\n    and returns the ionic current density at specified points.\n    \"\"\"\n    # Universal Constants\n    F = 96485.0  # Faraday constant in C/mol\n    R = 8.314  # Universal gas constant in J/(mol*K)\n\n    # Test suite from the problem statement\n    test_cases = [\n        # Case 1: balanced kinetics, moderate conductivities\n        {'L': 1.0e-4, 'a_s': 1.0e6, 'I': 10.0, 'sigma_eff': 100.0,\n         'kappa_eff': 1.0, 'i0': 1.0, 'T': 298.0, 'U': 0.1},\n        # Case 2: reaction-limited, lower conductivities\n        {'L': 1.0e-4, 'a_s': 5.0e6, 'I': 5.0, 'sigma_eff': 50.0,\n         'kappa_eff': 0.5, 'i0': 0.05, 'T': 298.0, 'U': 0.05},\n        # Case 3: high electrolyte conductivity, short electrode\n        {'L': 5.0e-5, 'a_s': 2.0e6, 'I': 20.0, 'sigma_eff': 200.0,\n         'kappa_eff': 10.0, 'i0': 5.0, 'T': 298.0, 'U': 0.2}\n    ]\n\n    all_results = []\n\n    for params in test_cases:\n        L = params['L']\n        a_s = params['a_s']\n        I = params['I']\n        sigma_eff = params['sigma_eff']\n        kappa_eff = params['kappa_eff']\n        i0 = params['i0']\n        T = params['T']\n        U = params['U']\n\n        # Pre-compute the thermal voltage term\n        F_over_2RT = F / (2.0 * R * T)\n\n        def ode_fun(x, y):\n            \"\"\"\n            Defines the system of first-order ODEs.\n            y = [phi_s, d(phi_s)/dx, phi_l, d(phi_l)/dx]\n            \"\"\"\n            phi_s, dphi_s_dx, phi_l, dphi_l_dx = y[0], y[1], y[2], y[3]\n            eta = phi_s - phi_l - U\n            \n            # Butler-Volmer kinetics for alpha_a = alpha_c = 0.5\n            j_A = 2.0 * i0 * np.sinh(F_over_2RT * eta)\n\n            # System equations\n            d2phi_s_dx2 = (a_s * j_A) / sigma_eff\n            d2phi_l_dx2 = -(a_s * j_A) / kappa_eff\n            \n            return np.vstack((dphi_s_dx, d2phi_s_dx2, dphi_l_dx, d2phi_l_dx2))\n\n        def bc_fun(ya, yb):\n            \"\"\"\n            Defines the boundary condition residuals.\n            ya = y(0), yb = y(L)\n            \"\"\"\n            return np.array([\n                ya[3],                          # d(phi_l)/dx(0) = 0\n                ya[1] + I / sigma_eff,          # d(phi_s)/dx(0) = -I/sigma_eff\n                yb[1],                          # d(phi_s)/dx(L) = 0\n                yb[2]                           # phi_l(L) = 0\n            ])\n\n        # Initial spatial mesh and guess for the solution\n        x_mesh = np.linspace(0, L, 101)\n        y_guess = np.zeros((4, x_mesh.size))\n        \n        # Solve the Boundary-Value Problem\n        sol = solve_bvp(ode_fun, bc_fun, x_mesh, y_guess, tol=1e-6)\n        \n        # Define evaluation points\n        x_eval = np.array([0.0, L/4.0, L/2.0, 3.0*L/4.0, L])\n        \n        # Get the solution at the evaluation points\n        y_eval = sol.sol(x_eval)\n        \n        # Calculate ionic current density: i_l(x) = -kappa_eff * d(phi_l)/dx\n        # d(phi_l)/dx corresponds to y[3]\n        i_l_values = -kappa_eff * y_eval[3]\n        \n        # Ensure boundary conditions are met exactly in output for clarity\n        i_l_values[0] = 0.0\n        # i_l(L) must be I due to conservation of charge;\n        # the numerical solution should be very close. We'll list the solver's result.\n        \n        all_results.append(list(i_l_values))\n        \n    # Format the output string as per requirements\n    inner_strings = [f\"[{','.join(map(str, res))}]\" for res in all_results]\n    final_output = f\"[{','.join(inner_strings)}]\"\n    \n    print(final_output)\n\nsolve()\n```"
        }
    ]
}
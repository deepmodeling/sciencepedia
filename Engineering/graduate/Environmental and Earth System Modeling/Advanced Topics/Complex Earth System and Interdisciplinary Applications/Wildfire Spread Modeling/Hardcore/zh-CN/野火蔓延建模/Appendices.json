{
    "hands_on_practices": [
        {
            "introduction": "野火管理中的一个关键挑战是预测相对可控的地表火何时会转变为极度危险的、在森林冠层中燃烧的树冠火。这种“点燃”事件取决于地表火的强度是否足以干燥并点燃树顶的枝叶。本练习应用一个广泛使用的业务模型来进行此预测，引入了临界火线强度的概念——一个必须跨越才能发生点燃的阈值。",
            "id": "3932517",
            "problem": "考虑一个针叶林，在火线锋面处测得其地表火线强度，记为 $I_{s}$，其中 $I_{s}$ 是 Byram 火线强度，定义为燃烧锋面单位长度上的热量释放率。冠层基部高度为 $H_{b}$，指从地面到最低活冠层燃料的垂直距离，叶片含水率 (FMC) 基于烘干质量以小数形式给出，在用于引燃准则时必须转换为百分比。假设环境风和坡度对火焰几何形状的影响已包含在测量的 $I_{s}$ 中。使用一个基于物理原理的合理树冠火引燃准则，其中发生点燃的临界地表强度取决于 $H_{b}$ 和 FMC（以百分比表示），判断是否会发生点燃。\n\n事件数据：\n- 地表火线强度：$I_{s} = 150$ 千瓦/米。\n- 冠层基部高度：$H_{b} = 3.5$ 米。\n- 叶片含水率（FMC，基于烘干质量）：$0.95$（小数），在准则要求时应解释为 $95$%。\n\n您的任务是通过计算临界地表强度，并使用一个关联 $I_{s}$、$H_{b}$ 和 FMC 的基于物理的引燃准则，将其与 $I_{s}$ 进行比较，从而判断是否会发生点燃。提供一个基于传热学和燃烧能量学第一性原理的合理解释。将您的最终决定表示为一个无量纲指标，其中 $1$ 表示发生点燃，$0$ 表示不发生点燃。最终决定无需四舍五入。",
            "solution": "该问题要求在给定的一组环境和燃料条件下，判断是否会发生树冠火引燃，特别是点燃。该判断基于测量的地表火线强度 $I_s$ 与发生点燃所需的计算出的临界地表火线强度 $I_c$ 之间的比较。\n\n基本物理原理是，冠层燃料要被点燃，必须被从地表火升起的热气流加热到其燃点温度。地表火完成这一过程的能力取决于其火线单位长度的热量输出率，即 Byram 火线强度 $I_s$。临界强度 $I_c$ 表示在冠层基部高度 $H_b$ 处，考虑到叶片含水率 FMC，为使叶片热解并点燃所需提供的最小强度。如果实际强度 $I_s$ 超过这个临界阈值 $I_c$，则预计会发生点燃。\n\n问题指定使用一个同时取决于冠层基部高度 ($H_b$) 和叶片含水率 (FMC) 的、基于物理原理的合理准则。满足这些规范的标准且最被广泛接受的模型源于 C.E. Van Wagner (1977) 的研究。一个基于 Van Wagner 理论的可操作经验公式被广泛应用于火灾行为预测系统中。该公式将临界地表强度 $I_c$ 计算为 $H_b$ 和 FMC 的函数。我们将使用这个已确立的准则。\n\n临界地表火强度 $I_c$ 的计算公式如下：\n$$I_c = \\left( 0.001 \\cdot H_b \\cdot (460 + 25.9 \\cdot M) \\right)^{1.5}$$\n其中：\n- $I_c$ 是临界地表火线强度，单位为千瓦/米 ($kW/m$)。\n- $H_b$ 是冠层基部高度，单位为米 ($m$)。\n- $M$ 是以百分比 ($\\%$) 表示的叶片含水率 (FMC)。\n\n项 $(460 + 25.9 \\cdot M)$ 代表叶片燃料的点燃热 $Q_{ig}$，单位为千焦/千克 ($kJ/kg$)，它随含水率线性增加。\n\n问题陈述中提供的数据是：\n- 地表火线强度：$I_{s} = 150$ 千瓦/米。\n- 冠层基部高度：$H_{b} = 3.5$ 米。\n- 叶片含水率 (FMC)：$0.95$（小数形式）。\n\n首先，我们必须按照公式对 $M$ 的要求，将 FMC 从小数转换为百分比：\n$$M = 0.95 \\times 100 = 95$$\n\n现在，我们可以将给定的 $H_b$ 和 $M$ 的值代入 $I_c$ 的方程中：\n$$I_c = \\left( 0.001 \\cdot 3.5 \\cdot (460 + 25.9 \\cdot 95) \\right)^{1.5}$$\n\n我们计算括号内的项：\n$$460 + 25.9 \\cdot 95 = 460 + 2460.5 = 2920.5$$\n\n将此值代回 $I_c$ 的方程中：\n$$I_c = (0.001 \\cdot 3.5 \\cdot 2920.5)^{1.5}$$\n$$I_c = (0.0035 \\cdot 2920.5)^{1.5}$$\n$$I_c = (10.22175)^{1.5}$$\n\n为了计算这个表达式，我们可以将其写成 $10.22175 \\cdot \\sqrt{10.22175}$：\n$$I_c \\approx 32.6806$$\n因此，在这些条件下引燃点燃所需的临界地表火线强度约为 $32.68$ 千瓦/米。\n\n点燃引燃的条件是，测得的地表火线强度必须大于临界强度：\n$$I_s > I_c$$\n\n我们将给定的 $I_s$ 值与我们计算出的 $I_c$ 值进行比较：\n$$150 > 32.6806$$\n\n这个不等式成立。测得的地表火线强度为 $150$ 千瓦/米，远大于计算出的临界阈值约 $32.68$ 千瓦/米。因此，预测会发生点燃。\n\n问题要求将最终决定表示为一个无量纲指标，其中 $1$ 表示发生点燃，$0$ 表示不发生点燃。由于引燃条件得到满足，该指标为 $1$。",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "估算野火的总影响，从碳排放到生态效应，都需要知道实际燃烧了多少生物质。现代火灾科学通常使用卫星观测到的火灾辐射功率（FRP）——以热和光形式释放的能量——来回答这个问题。这项动手实践将指导您完成将FRP时间序列数据转换为燃料消耗总质量的过程。您将实现一个数值积分算法，该算法弥合了遥感数据与关键的地面火灾效应之间的鸿沟。",
            "id": "3932496",
            "problem": "您的任务是实现一个物理上一致的算法，利用火灾辐射功率（Fire Radiative Power, FRP）时间序列来计算燃烧事件中消耗的燃料质量。该计算必须从基本物理原理出发，并且该算法必须适用于不规则采样的观测数据。具体而言，您需要从功率是能量的时间变化率这一定义出发，并认识到野火在一段时间内辐射出的能量等于FRP在该时间段内的积分。您必须对给定的FRP时间序列进行时间积分以获得火灾辐射能量（Fire Radiative Energy, FRE），然后使用一个经验性的辐射能量-生物质转换因子将FRE转换为消耗的燃料质量。\n\n定义与单位：\n- FRP以兆瓦（MW）为单位的时间序列 $P(t)$ 形式给出，其中 $1\\,\\mathrm{MW} = 1\\,\\mathrm{MJ}/\\mathrm{s}$。\n- 时间 $t$ 以秒（$\\mathrm{s}$）为单位。\n- 一次燃烧事件的火灾辐射能量（FRE）是FRP的时间积分，FRE以兆焦耳（$\\mathrm{MJ}$）表示。\n- 经验转换因子是一个常数 $k$，单位为兆焦耳/千克（$\\mathrm{MJ}/\\mathrm{kg}$），表示每单位质量的燃料消耗所辐射出的能量。\n- 消耗的燃料质量以千克（$\\mathrm{kg}$）计算。\n- FRP在物理上必须为非负值。如果任何FRP观测值因噪声而为负，则在计算中必须将其视为零。\n\n您的实现必须：\n1. 使用功率是能量时间导数的基本定义，并通过对 $P(t)$ 进行时间积分来获得FRE。\n2. 无需重采样即可处理不规则的采样间隔。\n3. 将两次观测时间之间的FRP值视为分段线性变化。\n4. 使用经验转换因子 $k$ 将FRE转换为质量。\n5. 以千克（$\\mathrm{kg}$）为单位返回结果，并四舍五入到三位小数。\n\n测试套件：\n计算以下每种情况下消耗的燃料质量。在每种情况下，都提供了观测时间 $t$（单位：秒）和FRP值 $P$（单位：MW）的数组，以及转换因子 $k$（单位：$\\mathrm{MJ}/\\mathrm{kg}$）。假设在连续的观测时间之间，FRP是分段线性的。在下面的所有数组中，每个数字都明确表示。\n\n- 情况 $1$（一般情况，多峰燃烧）：\n  - $t = [0,300,600,900,1200,1500,1800]$\n  - $P = [0,10,25,40,30,15,0]$\n  - $k = 0.368$\n- 情况 $2$（不规则采样，存在噪声导致的负FRP值）：\n  - $t = [0,60,180,600,1800]$\n  - $P = [0,5,-2,35,0]$\n  - $k = 0.368$\n- 情况 $3$（边界情况，无燃烧）：\n  - $t = [0,100,200]$\n  - $P = [0,0,0]$\n  - $k = 0.368$\n- 情况 $4$（短暂强脉冲，不同转换因子）：\n  - $t = [0,10,20,30,40,50]$\n  - $P = [0,0,100,0,80,0]$\n  - $k = 0.5$\n- 情况 $5$（持续时间较长，间隔不均）：\n  - $t = [0,120,300,450,900,1800,3600]$\n  - $P = [2,5,8,12,9,4,0]$\n  - $k = 0.368$\n- 情况 $6$（单次观测，零持续时间边缘情况）：\n  - $t = [0]$\n  - $P = [50]$\n  - $k = 0.368$\n\n最终输出规格：\n您的程序应生成单行输出，其中包含六种情况下计算出的质量，格式为方括号内以逗号分隔的列表。每个值都应以千克为单位四舍五入到三位小数，例如 $[m_1,m_2,m_3,m_4,m_5,m_6]$，其中每个 $m_i$ 是一个以千克（$\\mathrm{kg}$）为单位并四舍五入到三位小数的浮点数。",
            "solution": "该问题要求基于火灾辐射功率（FRP）的离散时间序列，计算火灾期间消耗的总燃料质量。解决方案源于基本物理原理，并实现为一个数值算法。\n\n基本原理是功率 $P$ 和能量 $E$ 之间的关系。功率定义为能量随时间 $t$ 的变化率：\n$$P(t) = \\frac{dE(t)}{dt}$$\nFRP, $P(t)$，以兆瓦（$\\mathrm{MW}$）为单位，等同于兆焦耳/秒（$\\mathrm{MJ}/\\mathrm{s}$），是火灾辐射的功率。为了求出一次燃烧事件从开始时间 $t_{start}$ 到结束时间 $t_{end}$ 所辐射出的总火灾辐射能量（FRE）$E$，我们必须对该时间区间内的功率进行积分：\n$$E = \\int_{t_{start}}^{t_{end}} P(t) \\, dt$$\n\n输入数据由离散的功率观测值 $(t_i, P_i)$ 组成，其中 $i = 0, 1, \\dots, n-1$。问题规定，在这些观测点之间，函数 $P(t)$ 应被视为分段线性的。这个假设允许我们通过对每个子区间 $[t_i, t_{i+1}]$ 上的积分求和来计算总积分。单个子区间上的积分对应于一个梯形的面积：\n$$\\Delta E_i = \\int_{t_i}^{t_{i+1}} P(t) \\, dt = \\frac{P(t_i) + P(t_{i+1})}{2} (t_{i+1} - t_i)$$\n总能量 $E$ 是由 $n$ 个数据点定义的所有区间上这些面积的总和：\n$$E = \\sum_{i=0}^{n-2} \\frac{P_i + P_{i+1}}{2} (t_{i+1} - t_i)$$\n这就是众所周知的用于数值积分的梯形法则，由于分段线性的假设，它在这里可以直接适用。这种方法很自然地处理了不规则采样的数据，因为每个区间的持续时间 $\\Delta t_i = t_{i+1} - t_i$ 都是为每个分段明确计算的。\n\n一个关键的物理约束是辐射功率必须为非负值，即 $P(t) \\ge 0$。输入数据中的任何负FRP值，例如情况2中的-2，都被假定为测量噪声的产物，并且在计算中必须被视为零。我们定义一个清理后的功率值 $P'_i = \\max(0, P_i)$。然后使用这些非负值执行积分：\n$$E = \\sum_{i=0}^{n-2} \\frac{P'_i + P'_{i+1}}{2} (t_{i+1} - t_i)$$\n\n在整个计算过程中，单位是一致的。当 $P_i$ 的单位是兆瓦（$\\mathrm{MJ}/\\mathrm{s}$），$t_i$ 的单位是秒（$\\mathrm{s}$）时，每个梯形面积的乘积单位是 $(\\mathrm{MJ}/\\mathrm{s}) \\times \\mathrm{s} = \\mathrm{MJ}$。将这些值相加，得到的总能量 $E$ 的单位是兆焦耳（$\\mathrm{MJ}$）。\n\n最后，使用提供的经验转换因子 $k$ 计算消耗的燃料质量 $M_{fuel}$，$k$ 代表每千克燃烧的燃料所释放的辐射能量（$\\mathrm{MJ}/\\mathrm{kg}$）。\n$$M_{fuel} = \\frac{E}{k}$$\n当 $E$ 的单位是 $\\mathrm{MJ}$，$k$ 的单位是 $\\mathrm{MJ}/\\mathrm{kg}$ 时，得到的质量 $M_{fuel}$ 正确地以千克（$\\mathrm{kg}$）表示。\n\n因此，该算法的实现如下：\n1.  对于每个测试用例，处理时间 $t$ 和功率 $P$ 的输入数组，以及特定的转换因子 $k$。\n2.  通过将任何负值替换为0来清理功率数组 $P$。\n3.  对清理后的功率数据和时间数据应用梯形法则，计算总火灾辐射能量（$E$）。`numpy.trapz` 函数适用于此，因为它直接为离散数据点实现了这种积分。\n4.  将得到的能量 $E$ 除以转换因子 $k$，得到质量 $M_{fuel}$。\n5.  按照规定，将最终质量格式化为三位小数。特殊情况，如只有一个点的时间序列（情况6）或全程功率为零（情况3），梯形法则也能正确处理，得到 $0 \\, \\mathrm{MJ}$ 的能量，因此消耗的质量为 $0 \\, \\mathrm{kg}$。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the mass of fuel consumed from Fire Radiative Power (FRP) time series\n    for a suite of test cases.\n    \"\"\"\n    # Define the test cases from the problem statement as a list of tuples.\n    # Each tuple contains (time_array, power_array, conversion_factor).\n    # All numerical values are explicit as per the problem description.\n    test_cases = [\n        # Case 1 (general case, multi-peak burn)\n        ([0, 300, 600, 900, 1200, 1500, 1800], [0, 10, 25, 40, 30, 15, 0], 0.368),\n        # Case 2 (irregular sampling with a noise-induced negative FRP value)\n        ([0, 60, 180, 600, 1800], [0, 5, -2, 35, 0], 0.368),\n        # Case 3 (boundary case with no burning)\n        ([0, 100, 200], [0, 0, 0], 0.368),\n        # Case 4 (short intense pulses, different conversion factor)\n        ([0, 10, 20, 30, 40, 50], [0, 0, 100, 0, 80, 0], 0.5),\n        # Case 5 (longer duration, uneven intervals)\n        ([0, 120, 300, 450, 900, 1800, 3600], [2, 5, 8, 12, 9, 4, 0], 0.368),\n        # Case 6 (single observation, zero-duration edge case)\n        ([0], [50], 0.368)\n    ]\n\n    results = []\n    for t_vals, P_vals, k in test_cases:\n        # Convert lists to numpy arrays for efficient numerical operations.\n        t = np.array(t_vals, dtype=float)\n        P = np.array(P_vals, dtype=float)\n        \n        # Per the problem specification, FRP must be non-negative.\n        # Any observed negative values, presumed to be from sensor noise, are set to zero.\n        P_sanitized = np.maximum(P, 0)\n        \n        # Calculate the Fire Radiative Energy (FRE) in Megajoules (MJ).\n        # This is done by integrating the Fire Radiative Power (FRP), in MW (MJ/s),\n        # over the time domain in seconds (s).\n        # The problem's assumption of piecewise linear FRP variation between points\n        # means the integral is calculated using the trapezoidal rule.\n        # numpy.trapz(y, x) computes the definite integral of a function y(x)\n        # represented by discrete data points.\n        fre = np.trapz(P_sanitized, t)\n        \n        # Convert FRE (MJ) to the mass of fuel consumed (kg) using the empirical\n        # conversion factor k (MJ/kg).\n        # It is assumed k > 0 based on physical context and problem givens.\n        mass_consumed = fre / k\n        \n        # Format the result to three decimal places as required for the final output.\n        # Using an f-string with a format specifier ensures consistent formatting\n        # (e.g., 0.0 becomes 0.000).\n        results.append(f\"{mass_consumed:.3f}\")\n\n    # Print the final results in the specified single-line format: [m1,m2,...,m6]\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```"
        }
    ]
}
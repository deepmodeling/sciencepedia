{
    "hands_on_practices": [
        {
            "introduction": "在工艺建模中，为了简化计算，通常会采用小角度近似。本练习旨在通过基本几何原理，揭示这种近似在高倾角注入场景下的局限性。通过推导近似失效的临界倾角 ，您将深入理解为何对高倾角注入进行精确的几何处理至关重要。",
            "id": "4131671",
            "problem": "一块单晶硅片被准直离子束注入。设晶圆表面定义为 $x$-$y$ 平面，晶圆法线沿 $+z$ 轴方向。入射束流的方向由一个从 $+z$ 轴测量的倾斜角 $\\theta$ 和一个在 $x$-$y$ 平面内从 $+x$ 轴测量的方位角 $\\phi$ 指定。假设一个理想化的、无单次散射的轨迹，使得离子的名义投影射程 $R_{p}$ 沿着束流方向。\n\n仅从三维矢量的几何第一性原理以及上面给出的 $\\theta$ 和 $\\phi$ 的定义出发，推导名义投影射程分量在注入晶圆深度和两个面内横向方向上对 $\\theta$ 和 $\\phi$ 的精确依赖关系。\n\n在许多半导体工艺模型中，为了进行高通量建模，会采用小角度近似：当 $\\theta$ “很小”时，深度分量近似为 $R_{p}$，横向幅度近似为 $R_{p}\\,\\theta$。为了形式化地描述这种近似在大倾角注入时的失效情况，定义一个失效阈值 $\\delta>0$，其要求是将小角度近似与精确几何分量进行比较所计算出的深度分量的相对误差超过 $\\delta$。根据此定义，推导出一个闭式解析表达式，表示小角度深度近似首次失效时的阈值倾斜角 $\\theta_{\\mathrm{break}}(\\delta)$。\n\n以弧度为单位，给出 $\\theta_{\\mathrm{break}}(\\delta)$ 的最终表达式。无需进行数值计算。",
            "solution": "本题要求推导离子在晶体中投影射程的几何分量，并分析一种常用的小角度近似的失效情况。\n\n首先，我们建立坐标系并确定代表离子轨迹的矢量。晶圆表面是 $x$-$y$ 平面。晶圆法线沿 $+z$ 轴方向。为了使离子被注入，它必须进入晶圆体。因此，我们将晶圆定义为占据半空间 $z \\ge 0$，其表面位于 $z=0$。离子束源于 $z < 0$ 区域，并行进到 $z>0$ 区域。\n\n入射离子束的方向由单位矢量 $\\hat{u}$ 描述。这个方向使用球坐标来指定：一个从 $+z$ 轴测量的倾斜角 $\\theta$（极角）和一个在 $x$-$y$ 平面内从 $+x$ 轴测量的方位角 $\\phi$（方位角）。该单位矢量 $\\hat{u}$ 的笛卡尔分量由以下公式给出：\n$$\nu_x = \\sin\\theta \\cos\\phi\n$$\n$$\nu_y = \\sin\\theta \\sin\\phi\n$$\n$$\nu_z = \\cos\\theta\n$$\n为了使离子进入晶圆，其速度必须有一个正的 $z$ 分量，这意味着 $\\cos\\theta > 0$。由于 $\\theta$ 代表与法线的倾斜角，其物理范围是 $0 \\le \\theta  \\pi/2$。\n\n题目指出，名义投影射程 $R_p$ 沿着束流方向。假设离子在原点 $(0,0,0)$ 进入晶圆，其最终位置矢量（我们记为 $\\vec{R}_p$）由射程大小 $R_p$ 乘以方向矢量 $\\hat{u}$ 给出：\n$$\n\\vec{R}_p = R_p \\hat{u} = R_p (\\sin\\theta \\cos\\phi \\, \\hat{i} + \\sin\\theta \\sin\\phi \\, \\hat{j} + \\cos\\theta \\, \\hat{k})\n$$\n此投影射程矢量的分量为：\n$$\nR_{px} = R_p \\sin\\theta \\cos\\phi\n$$\n$$\nR_{py} = R_p \\sin\\theta \\sin\\phi\n$$\n$$\nR_{pz} = R_p \\cos\\theta\n$$\n这些是基于几何第一性原理的名义投影射程分量对 $\\theta$ 和 $\\phi$ 的精确依赖关系。$R_{pz}$ 代表注入晶圆的深度，而 $R_{px}$ 和 $R_{py}$ 是两个面内横向分量。\n\n接下来，我们分析深度分量的小角度近似的失效情况。根据我们的推导，精确的深度分量是 $D_{\\mathrm{exact}} = R_{pz} = R_p \\cos\\theta$。题目给出该分量的小角度近似为 $D_{\\mathrm{approx}} = R_p$。\n\n失效的定义是深度分量的相对误差超过一个阈值 $\\delta  0$。相对误差 $\\epsilon_D$ 严格定义为近似值与精确值之差的绝对值，再除以精确值的绝对值：\n$$\n\\epsilon_D = \\frac{|D_{\\mathrm{approx}} - D_{\\mathrm{exact}}|}{|D_{\\mathrm{exact}}|}\n$$\n代入精确和近似深度分量的表达式：\n$$\n\\epsilon_D = \\frac{|R_p - R_p \\cos\\theta|}{|R_p \\cos\\theta|}\n$$\n由于 $R_p  0$ 且 $0 \\le \\theta  \\pi/2$，我们有 $\\cos\\theta  0$（对于非掠射入射）和 $1 - \\cos\\theta \\ge 0$。该表达式简化为：\n$$\n\\epsilon_D = \\frac{R_p (1 - \\cos\\theta)}{R_p \\cos\\theta} = \\frac{1 - \\cos\\theta}{\\cos\\theta} = \\sec\\theta - 1\n$$\n失效条件是该相对误差超过 $\\delta$：\n$$\n\\epsilon_D  \\delta \\implies \\sec\\theta - 1  \\delta\n$$\n阈值倾斜角 $\\theta_{\\mathrm{break}}(\\delta)$ 是近似首次失效的特定角度。这对应于等式成立的点：\n$$\n\\sec\\theta_{\\mathrm{break}} - 1 = \\delta\n$$\n我们求解这个关于 $\\theta_{\\mathrm{break}}$ 的方程。首先，分离正割项：\n$$\n\\sec\\theta_{\\mathrm{break}} = 1 + \\delta\n$$\n接下来，用余弦函数表示它：\n$$\n\\cos\\theta_{\\mathrm{break}} = \\frac{1}{1 + \\delta}\n$$\n最后，我们通过对两边取反余弦来求得角度。由于 $\\theta_{\\mathrm{break}}$ 是 $[0, \\pi/2)$ 内的一个物理角度，反余弦函数将得到唯一的主值。\n$$\n\\theta_{\\mathrm{break}}(\\delta) = \\arccos\\left(\\frac{1}{1 + \\delta}\\right)\n$$\n这是以弧度表示的阈值倾斜角的闭式解析表达式，它是误差容限 $\\delta$ 的函数。对于任何倾斜角 $\\theta  \\theta_{\\mathrm{break}}(\\delta)$，深度近似的相对误差将大于 $\\delta$，因为 $\\sec\\theta$ 在 $\\theta \\in [0, \\pi/2)$ 区间内是一个单调递增函数。",
            "answer": "$$\\boxed{\\arccos\\left(\\frac{1}{1 + \\delta}\\right)}$$"
        },
        {
            "introduction": "精确的离子束角度控制是工艺的基础，但晶圆表面的微观形貌，如晶体失切角，会改变实际的局部入射角。本练习将引导您运用矢量分析来精确计算局部入射角 ，这是对非平面器件和工艺变异性进行建模的一项关键技能。这个练习展示了全局设定与局部现实之间的差异。",
            "id": "4131695",
            "problem": "一块正在进行离子注入 (II) 的晶体硅片被安装，使得全局晶片法线与晶片坐标系的 $+\\hat{\\mathbf{z}}$ 轴对齐。离子束被设置为大倾角注入配置：束流轴相对于全局晶片法线倾斜一个倾斜角 $\\theta$，并在晶片平面内具有一个从 $+\\hat{\\mathbf{x}}$ 轴测量的方位角 $\\phi$。描述束流轴的单位向量被定义为沿着离子速度的反方向指向远离表面（因此其在 $+\\hat{\\mathbf{z}}$ 上的投影为正），在球坐标中表示为 $\\hat{\\mathbf{k}}(\\theta,\\phi)$。\n\n晶片上的一个局部表面片对应于由晶体错切导致的微小晶面。该晶面的局部外向单位法线被建模为全局法线在晶片平面内朝方位角方向 $\\gamma$ 旋转一个错切角 $\\alpha$，因此其单位法线为 $\\hat{\\mathbf{n}}(\\alpha,\\gamma)$。\n\n从通过欧几里得内积定义的两个单位向量之间的夹角以及 $\\hat{\\mathbf{k}}(\\theta,\\phi)$ 和 $\\hat{\\mathbf{n}}(\\alpha,\\gamma)$ 的球坐标表示出发，推导束流轴与局部表面法线之间的有效局部入射角 $\\theta_{\\mathrm{loc}}$ 作为 $\\theta$、$\\phi$、$\\alpha$ 和 $\\gamma$ 的函数的闭式表达式。然后，针对大倾角几何构型\n$$\\theta = 80^\\circ,\\quad \\phi = 30^\\circ,\\quad \\alpha = 10^\\circ,\\quad \\gamma = 15^\\circ.$$\n计算该角度。将您的最终数值答案以度为单位表示，并将结果四舍五入至四位有效数字。",
            "solution": "本题要求我们推导离子束轴与局部表面法线之间的有效入射角 $\\theta_{\\mathrm{loc}}$，并计算其在特定几何构型下的数值。\n\n首先，我们需要在晶片坐标系 $(\\hat{\\mathbf{x}}, \\hat{\\mathbf{y}}, \\hat{\\mathbf{z}})$ 中表示出离子束轴向量 $\\hat{\\mathbf{k}}$ 和局部表面法向量 $\\hat{\\mathbf{n}}$。\n\n根据球坐标的定义，离子束轴的单位向量 $\\hat{\\mathbf{k}}(\\theta, \\phi)$ 的笛卡尔分量为：\n$$\n\\hat{\\mathbf{k}} = \\begin{pmatrix} \\sin\\theta \\cos\\phi \\\\ \\sin\\theta \\sin\\phi \\\\ \\cos\\theta \\end{pmatrix}\n$$\n\n同样地，局部表面法线的单位向量 $\\hat{\\mathbf{n}}(\\alpha, \\gamma)$ 由极角（错切角）$\\alpha$ 和方位角 $\\gamma$ 定义。其笛卡尔分量为：\n$$\n\\hat{\\mathbf{n}} = \\begin{pmatrix} \\sin\\alpha \\cos\\gamma \\\\ \\sin\\alpha \\sin\\gamma \\\\ \\cos\\alpha \\end{pmatrix}\n$$\n\n两个单位向量之间的夹角 $\\theta_{\\mathrm{loc}}$ 可以通过它们的欧几里得内积（点积）的反余弦来计算：\n$$\n\\theta_{\\mathrm{loc}} = \\arccos(\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}})\n$$\n计算点积：\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = (\\sin\\theta \\cos\\phi)(\\sin\\alpha \\cos\\gamma) + (\\sin\\theta \\sin\\phi)(\\sin\\alpha \\sin\\gamma) + (\\cos\\theta)(\\cos\\alpha)\n$$\n提出公因式 $\\sin\\theta \\sin\\alpha$ 并利用三角恒等式 $\\cos(A - B) = \\cos A \\cos B + \\sin A \\sin B$ 进行化简：\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = \\sin\\theta \\sin\\alpha (\\cos\\phi \\cos\\gamma + \\sin\\phi \\sin\\gamma) + \\cos\\theta \\cos\\alpha\n$$\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = \\sin\\theta \\sin\\alpha \\cos(\\phi - \\gamma) + \\cos\\theta \\cos\\alpha\n$$\n这实际上是球面余弦定理的表达式。因此，有效局部入射角的闭式表达式为：\n$$\n\\theta_{\\mathrm{loc}}(\\theta, \\phi, \\alpha, \\gamma) = \\arccos\\left(\\sin\\theta \\sin\\alpha \\cos(\\phi - \\gamma) + \\cos\\theta \\cos\\alpha\\right)\n$$\n\n接下来，我们代入给定的数值进行计算：$\\theta = 80^\\circ$, $\\phi = 30^\\circ$, $\\alpha = 10^\\circ$, $\\gamma = 15^\\circ$。\n首先计算点积的值：\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = \\sin(80^\\circ) \\sin(10^\\circ) \\cos(30^\\circ - 15^\\circ) + \\cos(80^\\circ) \\cos(10^\\circ)\n$$\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = \\sin(80^\\circ) \\sin(10^\\circ) \\cos(15^\\circ) + \\cos(80^\\circ) \\cos(10^\\circ)\n$$\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} \\approx (0.984808)(0.173648)(0.965926) + (0.173648)(0.984808)\n$$\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} \\approx 0.165185 + 0.171010 \\approx 0.336195\n$$\n最后，计算角度：\n$$\n\\theta_{\\mathrm{loc}} = \\arccos(0.336195) \\approx 70.3606^\\circ\n$$\n\n将结果四舍五入至四位有效数字，我们得到 $70.36^\\circ$。",
            "answer": "$$\n\\boxed{70.36}\n$$"
        },
        {
            "introduction": "本章的最终练习将几何概念与物理损伤模型相结合，模拟一个关键的工艺结果：非晶化。您将实现一个唯象模型，用以计算达到非晶化所需的注入剂量如何随倾斜角度变化 。该练习综合考虑了离子在靶材中的路径长度效应和沟道效应抑制，模拟了工业级工艺仿真软件中的定量建模方法。",
            "id": "4131733",
            "problem": "对一块半导体晶圆以相对于表面法线的非零倾斜角进行离子注入。您将使用一个基于阻止本领和路径长度几何的损伤累积框架来模拟近表面非晶化过程。考虑将单一离子种类注入晶体硅中。设 $E$ 表示离子动能，$\\theta$ 表示相对于表面法线的倾斜角。近表面非晶层定义为从表面向下延伸至厚度为 $h$ 的薄层，该厚度沿表面法线方向测量。该层中的累积損傷能量密度必须达到临界阈值 $U_c$ 才能发生非晶化。假设核阻止本领的一个恒定比例 $\\eta$ 会转化为存储的损伤能量。\n\n使用以下基本模型：\n- 阻止本领定义为 $S(E) = -\\mathrm{d}E/\\mathrm{d}s$，单位为单位长度的能量。对于此问题，采用一个关于能量的幂律唯象核阻止模型 $S_n(E)$：$S_n(E) = S_{\\mathrm{ref}}\\left(\\dfrac{E}{E_{\\mathrm{ref}}}\\right)^{-p}$，其中 $S_{\\mathrm{ref}}$ 是参考能量 $E_{\\mathrm{ref}}$ 下的参考核阻止本领，$p$ 是一个正指数。\n- 倾斜时的几何关系：对于沿表面法线测量的厚度为 $h$ 的薄层，离子在层内的路径长度为 $L = h/\\cos\\theta$。\n- 沟道效应抑制通过一个角度因子来建模，该因子使有效核阻止本领随倾斜角的增大而增加。设有效核阻止本领为 $S_{\\mathrm{eff}}(E,\\theta) = S_n(E)\\,\\Gamma(\\theta)$，其中 $\\Gamma(\\theta)$ 是一个无量綱因子，满足 $0\\Gamma(\\theta)\\leq 1$。使用高斯形式的抑制函数 $\\Gamma(\\theta) = g_{\\min} + \\left(1-g_{\\min}\\right)\\left(1 - \\exp\\left(-( \\theta/\\theta_c )^2\\right)\\right)$，其中 $g_{\\min}$ 代表垂直入射时的残余脱沟道效应，$\\theta_c$ 是特征沟道角。\n- 每个离子在薄层中沉积的损伤能量与路径积分的核阻止本领成正比，并由效率因子 $\\eta$ 进行缩放。\n\n您必须计算在给定的 $E$ 和 $\\theta$ 下使近表面薄层非晶化所需的剂量，该剂量定义为入射到晶圆上的离子的面密度，单位为离子/平方厘米。然后，比较倾斜注入与垂直入射所需的剂量，并报告其比值。使用以下常数和单位：\n- 临界损伤能量密度阈值为 $U_c = 1.0\\times 10^{23}\\,\\text{eV}/\\text{cm}^3$。\n- 损伤效率为 $\\eta = 0.8$ (无量纲)。\n- 参考核阻止本领为 $S_{\\mathrm{ref}} = 5\\,\\text{eV}/\\text{\\AA}$，在 $E_{\\mathrm{ref}} = 100\\,\\text{keV}$ 时，指数 $p = 0.5$。\n- 沟道效应参数为 $g_{\\min} = 0.4$ 和 $\\theta_c = 3.0^\\circ$。\n- 角度 $\\theta$ 输入时必须使用度，内部进行三角函数运算时需转换为弧度。\n- 剂量以离子/平方厘米为单位报告，但最终要求的输出是倾斜注入剂量与垂直入射剂量的比值，该比值为无量纲。\n\n设计您的程序以评估以下参数集测试套件，每个参数集以对 $(E,\\theta)$ 的形式给出，其中 $E$ 的单位是千电子伏特，$\\theta$ 的单位是度：\n- 测试用例 A (正常路径): $(E,\\theta) = (20\\,\\text{keV}, 30^\\circ)$。\n- 测试用例 B (边界角，垂直入射): $(E,\\theta) = (20\\,\\text{keV}, 0^\\circ)$。\n- 测试用例 C (低能量，大倾角): $(E,\\theta) = (5\\,\\text{keV}, 60^\\circ)$。\n- 测试用例 D (高能量，极大倾角): $(E,\\theta) = (100\\,\\text{keV}, 80^\\circ)$。\n- 测试用例 E (接近沟道阈值): $(E,\\theta) = (200\\,\\text{keV}, 3^\\circ)$。\n\n您的程序应生成单行输出，其中包含按上述测试用例顺序排列的结果，结果为逗号分隔的列表，并用方括号括起来。每个结果都是在相同能量下，给定倾斜角度所需的剂量与垂直入射所需剂量的比值，以小数形式表示。因此，最终输出必须为 $[r_A,r_B,r_C,r_D,r_E]$ 的形式，其中每个 $r_i$ 是一个浮点数。角度必须解释为度，任何内部三角函数都必须使用弧度。不允许用户输入；常量按规定固定。所有计算必须使用提供的模型以自包含的方式执行，所有物理常数和单位都必须一致处理。剂量单位是离子/平方厘米，比值是无量纲的。",
            "solution": "该问题要求计算在倾斜角 $\\theta$ 下使近表面硅层非晶化所需的离子注入剂量与在垂直入射（$\\theta = 0^\\circ$）下所需剂量的比值。解法将基于所提供的损伤累积模型，从基本原理推导得出。\n\n首先，我们在入射离子剂量 $\\Phi$ 和近表面厚度为 $h$ 的薄层内的损伤能量密度 $U$ 之间建立关系。剂量 $\\Phi$ 定义为单位面积上入射的离子数。考虑一个表面积 $A$。撞击该区域的总离子数为 $\\Phi \\cdot A$。该区域下方的薄层体积为 $V = A \\cdot h$。\n\n必须确定每个离子在该薄层内沉积的损伤能量 $\\Delta E_{damage}$。以相对于表面法线为 $\\theta$ 的倾斜角入射的离子，在穿过薄层时走过的路径长度为 $L = h/\\cos\\theta$。沉积为损伤的能量是离子沿此路径因核阻止而损失的能量的一部分，比例为 $\\eta$。有效核阻止本领为 $S_{\\mathrm{eff}}(E, \\theta)$。对于一个薄的近表面层，我们可以做出一个有效的近似，即离子的能量 $E$ 以及因此的阻止本领在短路径 $L$ 上保持不变。因此，每个离子因核阻止損失的总能量约为 $S_{\\mathrm{eff}}(E, \\theta) \\cdot L$。这部分能量中产生稳定损伤的部分为：\n$$ \\Delta E_{damage} = \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot L = \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot \\frac{h}{\\cos\\theta} $$\n\n在剂量为 $\\Phi$ 的情况下，沉积在体积 $V$ 内的总损伤能量是离子数与每个离子的损伤能量的乘积：\n$$ U_{total} = (\\Phi \\cdot A) \\cdot \\Delta E_{damage} $$\n损伤能量密度 $U$ 是这个总能量除以体积 $V$：\n$$ U = \\frac{U_{total}}{V} = \\frac{(\\Phi \\cdot A) \\cdot \\Delta E_{damage}}{A \\cdot h} = \\frac{\\Phi \\cdot \\Delta E_{damage}}{h} $$\n代入 $\\Delta E_{damage}$ 的表达式：\n$$ U = \\frac{\\Phi}{h} \\left( \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot \\frac{h}{\\cos\\theta} \\right) = \\frac{\\Phi \\cdot \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta)}{\\cos\\theta} $$\n注意，任意设定的薄层厚度 $h$ 被消掉了，这使得模型是自洽的。\n\n当这个损伤能量密度达到临界阈值 $U_c$ 时，就会发生非晶化。因此，我们可以求解所需的非晶化剂量 $\\Phi(E, \\theta)$：\n$$ U_c = \\frac{\\Phi(E, \\theta) \\cdot \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta)}{\\cos\\theta} \\implies \\Phi(E, \\theta) = \\frac{U_c \\cos\\theta}{\\eta S_{\\mathrm{eff}}(E, \\theta)} $$\n\n有效阻止本领 $S_{\\mathrm{eff}}(E, \\theta)$ 由依赖于能量的核阻止本领 $S_n(E)$ 和依赖于角度的沟道抑制因子 $\\Gamma(\\theta)$ 的乘积给出：\n$$ S_{\\mathrm{eff}}(E, \\theta) = S_n(E) \\cdot \\Gamma(\\theta) $$\n提供的具体模型是：\n$$ S_n(E) = S_{\\mathrm{ref}}\\left(\\frac{E}{E_{\\mathrm{ref}}}\\right)^{-p} $$\n$$ \\Gamma(\\theta) = g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{\\theta}{\\theta_c} \\right)^2\\right)\\right) $$\n其中指数项中的 $\\theta$ 是以度为单位的角度，与 $\\theta_c$ 的单位相匹配。三角函数 $\\cos\\theta$ 要求其参数为弧度。\n\n问题要求的是比值 $R(E, \\theta) = \\frac{\\Phi(E, \\theta)}{\\Phi(E, 0)}$。我们首先评估垂直入射情况下的剂量，即 $\\theta = 0^\\circ$。\n当 $\\theta = 0^\\circ$ 时，我们有 $\\cos(0^\\circ) = 1$。沟道因子变为：\n$$ \\Gamma(0) = g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{0}{\\theta_c} \\right)^2\\right)\\right) = g_{\\min} + (1-g_{\\min})(1 - \\exp(0)) = g_{\\min} + (1-g_{\\min})(1-1) = g_{\\min} $$\n因此，垂直入射时的剂量为：\n$$ \\Phi(E, 0) = \\frac{U_c \\cos(0^\\circ)}{\\eta S_{\\mathrm{eff}}(E, 0^\\circ)} = \\frac{U_c}{\\eta S_n(E) \\Gamma(0)} = \\frac{U_c}{\\eta S_n(E) g_{\\min}} $$\n\n现在我们可以计算比值 $R(E, \\theta)$：\n$$ R(E, \\theta) = \\frac{\\Phi(E, \\theta)}{\\Phi(E, 0)} = \\frac{\\frac{U_c \\cos\\theta}{\\eta S_{\\mathrm{eff}}(E, \\theta)}}{\\frac{U_c}{\\eta S_{\\mathrm{eff}}(E, 0)}} = \\frac{\\cos\\theta \\cdot S_{\\mathrm{eff}}(E, 0)}{S_{\\mathrm{eff}}(E, \\theta)} $$\n代入 $S_{\\mathrm{eff}}(E, \\theta) = S_n(E) \\Gamma(\\theta)$：\n$$ R(E, \\theta) = \\frac{\\cos\\theta \\cdot S_n(E) \\Gamma(0)}{S_n(E) \\Gamma(\\theta)} = \\frac{\\Gamma(0) \\cos\\theta}{\\Gamma(\\theta)} $$\n此公式的一个重要推論是，与能量相关的项 $S_n(E)$ 被消掉了。因此，剂量比值与离子能量 $E$ 无关，这是一个极大地简化了计算的关键洞察。测试用例中的能量对于比值的最终计算是多余的。\n\n代入 $\\Gamma(0) = g_{\\min}$，比值的最终表达式仅取决于倾斜角 $\\theta$：\n$$ R(\\theta) = \\frac{g_{\\min} \\cos\\theta}{\\Gamma(\\theta)} = \\frac{g_{\\min} \\cos\\theta}{g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{\\theta}{\\theta_c} \\right)^2\\right)\\right)} $$\n我们现在将实现一个函数来使用给定的常数（$g_{\\min} = 0.4$ 和 $\\theta_c = 3.0^\\circ$）为给定的测试用例计算这个比值。输入角度 $\\theta$ 的单位是度。它必须转换为弧度以用于 $\\cos$ 函数，但可以直接以度为单位用于比值 $\\theta/\\theta_c$，因为 $\\theta_c$ 的单位也是度。\n\n对于每个测试用例 $(E_i, \\theta_i)$，我们计算 $R(\\theta_i)$。\n- 用例 A: $(E, \\theta) = (20\\,\\text{keV}, 30^\\circ)$\n- 用例 B: $(E, \\theta) = (20\\,\\text{keV}, 0^\\circ)$\n- 用例 C: $(E, \\theta) = (5\\,\\text{keV}, 60^\\circ)$\n- 用例 D: $(E, \\theta) = (100\\,\\text{keV}, 80^\\circ)$\n- 用例 E: $(E, \\theta) = (200\\,\\text{keV}, 3^\\circ)$\n如前所述，能量 $E$ 对最终的比值没有影响。计算过程只需将每个用例的角度代入推导出的 $R(\\theta)$ 公式即可。对于 $\\theta = 0^\\circ$，$R(0) = \\frac{g_{\\min} \\cos(0)}{g_{\\min}} = 1$，符合预期。对于其他角度，该值将反映几何路径长度效应（通过 $\\cos\\theta$）和沟道抑制效应（通过 $\\Gamma(\\theta)$）之间的相互作用。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the ratio of amorphization dose at a given tilt angle to the\n    dose at normal incidence, based on a phenomenological model of ion damage.\n    \"\"\"\n\n    # Define the constants from the problem statement.\n    # The ratio calculation is independent of Uc, eta, S_ref, E_ref, and p.\n    G_MIN = 0.4  # Residual dechanneling factor at normal incidence\n    THETA_C_DEG = 3.0  # Characteristic channeling angle in degrees\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple (Energy_keV, Angle_degrees).\n    # As derived in the solution, the energy E is not needed for the ratio calculation.\n    test_cases = [\n        (20, 30),   # Test case A\n        (20, 0),    # Test case B\n        (5, 60),    # Test case C\n        (100, 80),  # Test case D\n        (200, 3),   # Test case E\n    ]\n\n    results = []\n    for case in test_cases:\n        _, theta_deg = case\n\n        # Convert tilt angle from degrees to radians for the cosine function.\n        theta_rad = np.deg2rad(theta_deg)\n\n        # Calculate the angle-dependent channeling suppression factor Gamma(theta).\n        # The ratio (theta_deg / THETA_C_DEG) is dimensionless, so degrees can be used directly.\n        exponent_term = - (theta_deg / THETA_C_DEG)**2\n        gamma_theta = G_MIN + (1.0 - G_MIN) * (1.0 - np.exp(exponent_term))\n\n        # Calculate the dose ratio R(theta).\n        # R(theta) = (g_min * cos(theta)) / Gamma(theta)\n        # Gamma(0) is equal to g_min.\n        numerator = G_MIN * np.cos(theta_rad)\n        denominator = gamma_theta\n        \n        # The denominator gamma_theta is always >= g_min (0.4), so no division by zero risk.\n        ratio = numerator / denominator\n        \n        results.append(ratio)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
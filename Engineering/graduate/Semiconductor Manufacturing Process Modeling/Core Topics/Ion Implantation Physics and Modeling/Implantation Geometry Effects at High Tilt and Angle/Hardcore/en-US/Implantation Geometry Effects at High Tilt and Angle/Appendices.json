{
    "hands_on_practices": [
        {
            "introduction": "Before delving into complex physical effects, we must first master the fundamental geometry of ion implantation. This exercise challenges you to describe an ion's trajectory vector and its projections within the wafer's coordinate system from first principles. By deriving the exact geometric components and analyzing the breakdown of the common small-angle approximation, you will develop a crucial intuition for why high-tilt implants demand more rigorous models and sharpen your ability to assess the validity of engineering shortcuts .",
            "id": "4131671",
            "problem": "A monocrystalline silicon wafer is implanted by a collimated ion beam. Let the wafer surface define the $x$-$y$ plane, with the wafer normal along the $+z$ axis. The incoming beam direction is specified by a tilt angle $\\theta$ measured from the $+z$ axis and an azimuth angle $\\phi$ measured in the $x$-$y$ plane from the $+x$ axis. Assume an idealized, single-scattering-free trajectory so that the nominal projected range $R_{p}$ of ions is along the beam direction.\n\nStarting only from geometric first principles of three-dimensional vectors and the definitions of $\\theta$ and $\\phi$ given above, derive the exact dependence of the nominal projected range components on $\\theta$ and $\\phi$ for depth into the wafer and for the two lateral in-plane directions.\n\nIn many semiconductor process models, the small-angle approximation is invoked for high-throughput modeling: the depth component is approximated by $R_{p}$ and the lateral magnitude by $R_{p}\\,\\theta$ when $\\theta$ is “small.” To formalize the breakdown of this approximation for high-tilt implants, define a breakdown threshold $\\delta0$ by requiring that the relative error in the depth component, computed by comparing the small-angle approximation to the exact geometric component, exceeds $\\delta$. Under this definition, derive a closed-form analytic expression for the threshold tilt angle $\\theta_{\\mathrm{break}}(\\delta)$ at which the small-angle depth approximation first fails.\n\nProvide the final expression for $\\theta_{\\mathrm{break}}(\\delta)$ in radians. No numerical evaluation is required.",
            "solution": "The problem requires a derivation of the geometric components of an ion's projected range in a crystal and an analysis of the breakdown of a common small-angle approximation.\n\nFirst, we establish the coordinate system and the vector representing the ion's trajectory. The wafer surface is the $x$-$y$ plane. The wafer normal is along the $+z$ axis. For an ion to be implanted, it must travel into the wafer bulk. We therefore define the wafer as occupying the half-space $z \\ge 0$, with the surface at $z=0$. The ion beam originates from the $z0$ region and travels into the $z0$ region.\n\nThe direction of the incoming ion beam is described by a unit vector $\\hat{u}$. This direction is specified using spherical coordinates: a tilt angle $\\theta$ measured from the $+z$ axis (the polar angle) and an azimuth angle $\\phi$ measured in the $x$-$y$ plane from the $+x$ axis (the azimuthal angle). The Cartesian components of this unit vector $\\hat{u}$ are given by:\n$$\nu_x = \\sin\\theta \\cos\\phi\n$$\n$$\nu_y = \\sin\\theta \\sin\\phi\n$$\n$$\nu_z = \\cos\\theta\n$$\nFor the ion to enter the wafer, its velocity must have a positive $z$-component, which implies $\\cos\\theta  0$. Since $\\theta$ represents the tilt from the normal, its physical range is $0 \\le \\theta  \\pi/2$.\n\nThe problem states that the nominal projected range $R_p$ is along the beam direction. Assuming the ion enters the wafer at the origin $(0,0,0)$, its final position vector, which we denote as $\\vec{R}_p$, is given by the magnitude $R_p$ multiplied by the direction vector $\\hat{u}$:\n$$\n\\vec{R}_p = R_p \\hat{u} = R_p (\\sin\\theta \\cos\\phi \\, \\hat{i} + \\sin\\theta \\sin\\phi \\, \\hat{j} + \\cos\\theta \\, \\hat{k})\n$$\nThe components of this projected range vector are:\n$$\nR_{px} = R_p \\sin\\theta \\cos\\phi\n$$\n$$\nR_{py} = R_p \\sin\\theta \\sin\\phi\n$$\n$$\nR_{pz} = R_p \\cos\\theta\n$$\nThese are the exact dependencies of the nominal projected range components on $\\theta$ and $\\phi$ based on geometric first principles. $R_{pz}$ represents the depth into the wafer, while $R_{px}$ and $R_{py}$ are the two lateral in-plane components.\n\nNext, we analyze the breakdown of the small-angle approximation for the depth component. The exact depth component, based on our derivation, is $D_{\\mathrm{exact}} = R_{pz} = R_p \\cos\\theta$. The problem provides the small-angle approximation for this component as $D_{\\mathrm{approx}} = R_p$.\n\nThe breakdown is defined to occur when the relative error in the depth component exceeds a threshold $\\delta  0$. The relative error, $\\epsilon_D$, is rigorously defined as the magnitude of the difference between the approximate and exact values, normalized by the magnitude of the exact value:\n$$\n\\epsilon_D = \\frac{|D_{\\mathrm{approx}} - D_{\\mathrm{exact}}|}{|D_{\\mathrm{exact}}|}\n$$\nSubstituting the expressions for the exact and approximate depth components:\n$$\n\\epsilon_D = \\frac{|R_p - R_p \\cos\\theta|}{|R_p \\cos\\theta|}\n$$\nSince $R_p  0$ and $0 \\le \\theta  \\pi/2$, we have $\\cos\\theta  0$ (for non-grazing incidence) and $1 - \\cos\\theta \\ge 0$. The expression simplifies to:\n$$\n\\epsilon_D = \\frac{R_p (1 - \\cos\\theta)}{R_p \\cos\\theta} = \\frac{1 - \\cos\\theta}{\\cos\\theta} = \\sec\\theta - 1\n$$\nThe breakdown condition is that this relative error exceeds $\\delta$:\n$$\n\\epsilon_D  \\delta \\implies \\sec\\theta - 1  \\delta\n$$\nThe threshold tilt angle, $\\theta_{\\mathrm{break}}(\\delta)$, is the specific angle at which the approximation first fails. This corresponds to the point where the equality is met:\n$$\n\\sec\\theta_{\\mathrm{break}} - 1 = \\delta\n$$\nWe solve this equation for $\\theta_{\\mathrm{break}}$. First, isolate the secant term:\n$$\n\\sec\\theta_{\\mathrm{break}} = 1 + \\delta\n$$\nNext, express this in terms of the cosine function:\n$$\n\\cos\\theta_{\\mathrm{break}} = \\frac{1}{1 + \\delta}\n$$\nFinally, we find the angle by taking the inverse cosine of both sides. As $\\theta_{\\mathrm{break}}$ is a physical angle in $[0, \\pi/2)$, the inverse cosine function will yield the unique principal value.\n$$\n\\theta_{\\mathrm{break}}(\\delta) = \\arccos\\left(\\frac{1}{1 + \\delta}\\right)\n$$\nThis is the closed-form analytic expression for the threshold tilt angle in radians, as a function of the error tolerance $\\delta$. For any tilt angle $\\theta  \\theta_{\\mathrm{break}}(\\delta)$, the relative error in the depth approximation will be greater than $\\delta$, because $\\sec\\theta$ is a monotonically increasing function for $\\theta \\in [0, \\pi/2)$.",
            "answer": "$$\\boxed{\\arccos\\left(\\frac{1}{1 + \\delta}\\right)}$$"
        },
        {
            "introduction": "The angle of ion incidence is not merely a geometric parameter; it profoundly influences the ion's interaction with the crystal lattice, leading to the phenomenon of channeling. This practice guides you through a foundational derivation of the axial channeling critical angle, $\\psi_c$, starting from the continuum model of ion-solid interactions. By connecting a first-principles physical model to a key process parameter, you will gain a deeper understanding of how to control ion trajectories at the atomic scale and predict the onset of channeling effects .",
            "id": "4131714",
            "problem": "Consider high-tilt ion implantation into a crystalline semiconductor where axial channeling can occur if the incident direction lies within a critical angle about a dense atomic string. In the continuum model of axial channeling, the atomic row (string) is approximated as an infinite line of target atoms with uniform spacing. Starting from a screened Coulomb interaction between a point ion and a point target nucleus and then replacing the discrete sum over atoms by a continuous integral along the string, derive the continuum string potential and use it to obtain the axial critical angle as a function of the ion kinetic energy and the target atomic spacing.\n\nSpecifically, use the following foundational elements:\n- The screened Coulomb potential between an incident ion of atomic number $Z_{1}$ and a target nucleus of atomic number $Z_{2}$ is modeled as\n$$\n\\phi(\\rho) \\;=\\; \\frac{Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0}} \\,\\frac{\\exp\\!\\big(-\\rho/a\\big)}{\\rho},\n$$\nwhere $\\rho$ is the ion–nucleus separation, $e$ is the elementary charge, $\\varepsilon_{0}$ is the vacuum permittivity, and $a$ is a characteristic screening length.\n- The continuum string potential $U(r)$ at transverse distance $r$ from the string is obtained by summing $\\phi$ over the string atoms and replacing the sum by an integral with linear density $1/d$, where $d$ is the interatomic spacing along the string.\n\nUsing small-angle kinematics for the ion’s transverse motion relative to the string and the conservation of transverse energy, derive an analytic expression for the axial critical angle $\\psi_{c}(E,d)$ that isolates the geometric dependence on the spacing $d$ and the kinetic energy $E$. State clearly any approximations you introduce to close the derivation.\n\nThen evaluate $\\psi_{c}$ numerically for boron ($Z_{1} = 5$) implanted into silicon ($Z_{2} = 14$) at $E = 10\\,\\text{keV}$, taking the dense string’s interatomic spacing to be $d = 2.35\\,\\text{\\AA}$. For the screening length, use the Ziegler–Biersack–Littmark (ZBL) universal screening length\n$$\na \\;=\\; \\frac{0.8854\\,a_{0}}{Z_{1}^{0.23} + Z_{2}^{0.23}},\n$$\nwith the Bohr radius $a_{0} = 0.529\\,\\text{\\AA}$. Express the final angle in radians and round your numerical answer to three significant figures. Use $e^{2}/(4\\pi\\varepsilon_{0}) = 14.3996\\,\\text{eV}\\cdot\\text{\\AA}$.",
            "solution": "The solution proceeds in three parts: first, the derivation of the continuum string potential $U(r)$; second, the derivation of the axial critical angle $\\psi_{c}$ based on this potential; and third, the numerical evaluation of $\\psi_{c}$ for the given parameters.\n\n**Part 1: Derivation of the Continuum String Potential**\n\nThe continuum string potential $U(r)$ at a transverse distance $r$ from an atomic string is obtained by averaging the potential from individual atoms along the string. We model the string as a continuous line of charge with a linear atomic density of $1/d$, where $d$ is the interatomic spacing. The atoms are located along the z-axis. An ion is at a transverse distance $r$ from the z-axis. The distance $\\rho$ from the ion to a point on the string at axial position $z$ is given by $\\rho = \\sqrt{r^2 + z^2}$.\n\nThe potential $U(r)$ is the integral of the single-atom screened Coulomb potential $\\phi(\\rho)$ over the length of the string:\n$$\nU(r) = \\int_{-\\infty}^{\\infty} \\phi\\left(\\sqrt{r^2 + z^2}\\right) \\frac{dz}{d}\n$$\nSubstituting the given form of the screened Coulomb potential, $\\phi(\\rho) = \\frac{Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0}} \\frac{\\exp(-\\rho/a)}{\\rho}$:\n$$\nU(r) = \\frac{1}{d} \\int_{-\\infty}^{\\infty} \\frac{Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0}} \\frac{\\exp\\left(-\\frac{\\sqrt{r^2+z^2}}{a}\\right)}{\\sqrt{r^2+z^2}} dz\n$$\nLet's factor out the constants:\n$$\nU(r) = \\frac{Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0} d} \\int_{-\\infty}^{\\infty} \\frac{\\exp\\left(-\\frac{\\sqrt{r^2+z^2}}{a}\\right)}{\\sqrt{r^2+z^2}} dz\n$$\nThis integral is a standard form related to the modified Bessel function of the second kind, $K_{0}(x)$. The relevant integral identity is:\n$$\n\\int_{-\\infty}^{\\infty} \\frac{\\exp\\left(-b\\sqrt{c^2+x^2}\\right)}{\\sqrt{c^2+x^2}} dx = 2 K_{0}(bc)\n$$\nIn our case, $x=z$, $c=r$, and $b=1/a$. Applying this identity, the integral evaluates to $2 K_{0}(r/a)$.\nTherefore, the continuum string potential is:\n$$\nU(r) = \\frac{2 Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0} d} K_{0}\\left(\\frac{r}{a}\\right)\n$$\n\n**Part 2: Derivation of the Axial Critical Angle $\\psi_{c}$**\n\nWe use the conservation of transverse energy and a small-angle approximation. For an ion with total kinetic energy $E$ approaching the string at a small angle $\\psi$, its velocity component parallel to the string is $v_{\\parallel} \\approx v$ and its transverse velocity component is $v_{\\perp} \\approx v\\psi$. The initial transverse kinetic energy is thus:\n$$\nE_{\\perp} = \\frac{1}{2} M v_{\\perp}^2 \\approx \\frac{1}{2} M (v\\psi)^2 = \\left(\\frac{1}{2} Mv^2\\right) \\psi^2 = E\\psi^2\n$$\nwhere $M$ is the ion mass.\n\nThe total transverse energy $E_{T}$ is the sum of the transverse kinetic energy and the continuum potential energy $U(r)$. Assuming the ion starts far from the string (where $U(\\infty)=0$) with an incidence angle $\\psi$, the initial transverse energy is entirely kinetic, $E_{T} = E\\psi^2$. As the ion approaches the string, its transverse position $r$ decreases, $U(r)$ increases, and its transverse kinetic energy decreases.\n$$\nE_{T} = E\\psi^2 = E(\\psi(r))^2 + U(r)\n$$\nChanneling occurs if the ion is \"steered\" or repelled by the potential barrier of the string, preventing it from approaching the string core too closely where strong, random scattering would occur. The critical angle, $\\psi_c$, represents the maximum angle of incidence for which an ion can still be channeled. This critical condition is met when the initial transverse kinetic energy equals the potential energy barrier height.\n\nThe crucial approximation is to define this potential barrier height. The interaction potential becomes very strong for $r \\ll a$. A physically reasonable choice for the minimum distance of approach, $r_{min}$, for a channeled ion is the screening length $a$. Thus, we set the critical condition as the initial transverse energy being equal to the continuum potential evaluated at $r=a$.\n$$\nE\\psi_{c}^2 = U(a)\n$$\nSubstituting the expression for $U(r)$ derived in Part 1, with $r=a$:\n$$\nE\\psi_{c}^2 = \\frac{2 Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0} d} K_{0}\\left(\\frac{a}{a}\\right) = \\frac{2 Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0} d} K_{0}(1)\n$$\nSolving for $\\psi_{c}$ gives the desired analytical expression:\n$$\n\\psi_{c}(E,d) = \\sqrt{\\frac{2 Z_{1} Z_{2} e^{2}}{4 \\pi \\varepsilon_{0} E d} K_{0}(1)}\n$$\nThis expression clearly shows the dependence $\\psi_c \\propto (Ed)^{-1/2}$.\n\n**Part 3: Numerical Evaluation**\n\nWe are given the following parameters:\n- Ion: Boron ($Z_{1}=5$)\n- Target: Silicon ($Z_{2}=14$)\n- Ion kinetic energy: $E = 10\\,\\text{keV} = 10^4\\,\\text{eV}$\n- Interatomic spacing: $d = 2.35\\,\\text{\\AA}$\n- Bohr radius: $a_{0} = 0.529\\,\\text{\\AA}$\n- Constant: $\\frac{e^2}{4\\pi\\varepsilon_0} = 14.3996\\,\\text{eV}\\cdot\\text{\\AA}$\n\nFirst, we calculate the ZBL screening length $a$:\n$$\na = \\frac{0.8854\\,a_{0}}{Z_{1}^{0.23} + Z_{2}^{0.23}} = \\frac{0.8854 \\times 0.529\\,\\text{\\AA}}{5^{0.23} + 14^{0.23}}\n$$\n$$\na \\approx \\frac{0.4683766\\,\\text{\\AA}}{1.44265 + 1.81085} \\approx \\frac{0.4683766\\,\\text{\\AA}}{3.25350} \\approx 0.14396\\,\\text{\\AA}\n$$\nNext, we substitute all values into the expression for $\\psi_c$. The value of the modified Bessel function is $K_0(1) \\approx 0.421024$.\n$$\n\\psi_c = \\sqrt{\\frac{2 \\times 5 \\times 14 \\times (14.3996\\,\\text{eV}\\cdot\\text{\\AA})}{(10^4\\,\\text{eV}) \\times (2.35\\,\\text{\\AA})} \\times K_{0}(1)}\n$$\n$$\n\\psi_c \\approx \\sqrt{\\frac{140 \\times 14.3996}{23500} \\times 0.421024}\n$$\n$$\n\\psi_c \\approx \\sqrt{\\frac{2015.944}{23500} \\times 0.421024} \\approx \\sqrt{0.08578485 \\times 0.421024}\n$$\n$$\n\\psi_c \\approx \\sqrt{0.036118} \\approx 0.190047\\,\\text{radians}\n$$\nRounding the result to three significant figures, we get:\n$$\n\\psi_c \\approx 0.190\\,\\text{radians}\n$$",
            "answer": "$$\\boxed{0.190}$$"
        },
        {
            "introduction": "A primary goal of process modeling is to predict tangible manufacturing outcomes, such as the formation of an amorphous layer during implantation. This final exercise synthesizes the geometric and physical concepts from the previous practices into a single computational model. By building a tool that predicts the amorphization dose as a function of tilt angle, you will learn how macroscopic geometry (path length extension) and microscopic physics (channeling suppression) are integrated to quantitatively assess implant-induced damage, translating theory into a predictive engineering framework .",
            "id": "4131733",
            "problem": "A semiconductor wafer receives ion implantation at a nonzero tilt relative to the surface normal. You will model near-surface amorphization using a damage accumulation framework grounded in stopping power and path-length geometry. Consider a single ion species implanted into crystalline silicon. Let $E$ denote the ion kinetic energy, and let $\\theta$ denote the tilt angle measured relative to the surface normal. The near-surface amorphous layer is defined as the slab from the surface down to thickness $h$, measured along the surface normal. The cumulative damage energy density in this layer must reach a critical threshold $U_c$ to amorphize. Assume that a constant fraction $\\eta$ of the nuclear stopping power converts to stored damage energy.\n\nUse the following fundamental base:\n- Stopping power is defined by $S(E) = -\\mathrm{d}E/\\mathrm{d}s$ and has units of energy per unit length. For this problem, take a phenomenological nuclear stopping model $S_n(E)$ that obeys a power law with respect to energy: $S_n(E) = S_{\\mathrm{ref}}\\left(\\dfrac{E}{E_{\\mathrm{ref}}}\\right)^{-p}$, where $S_{\\mathrm{ref}}$ is a reference nuclear stopping at reference energy $E_{\\mathrm{ref}}$, and $p$ is a positive exponent.\n- Geometry at tilt: for a slab of thickness $h$ measured along the surface normal, the ion path length inside the slab is $L = h/\\cos\\theta$.\n- Channeling suppression is modeled by an angular factor that increases the effective nuclear stopping with increasing tilt. Let the effective nuclear stopping be $S_{\\mathrm{eff}}(E,\\theta) = S_n(E)\\,\\Gamma(\\theta)$, where $\\Gamma(\\theta)$ is a dimensionless factor with $0  \\Gamma(\\theta) \\leq 1$. Use a Gaussian suppression form $\\Gamma(\\theta) = g_{\\min} + \\left(1-g_{\\min}\\right)\\left(1 - \\exp\\left(-( \\theta/\\theta_c )^2\\right)\\right)$, where $g_{\\min}$ represents residual dechanneling at normal incidence and $\\theta_c$ is a characteristic channeling angle.\n- Damage energy per ion deposited in the slab is proportional to the path-integrated nuclear stopping scaled by the efficiency $\\eta$.\n\nYou must compute the dose required to amorphize the near-surface slab for a given $E$ and $\\theta$, defined as the areal density of ions incident on the wafer, in units of ions per square centimeter. Then, compare the required dose at tilt to the required dose at normal incidence, reporting the ratio. Use the following constants and units:\n- The critical damage energy density threshold is $U_c = 1.0\\times 10^{23}\\,\\text{eV}/\\text{cm}^3$.\n- The damage efficiency is $\\eta = 0.8$ (dimensionless).\n- The reference nuclear stopping is $S_{\\mathrm{ref}} = 5\\,\\text{eV}/\\text{\\AA}$ at $E_{\\mathrm{ref}} = 100\\,\\text{keV}$, with exponent $p = 0.5$.\n- The channeling parameters are $g_{\\min} = 0.4$ and $\\theta_c = 3.0^\\circ$.\n- Angle $\\theta$ must be used in degrees for input, and convert to radians internally for trigonometric operations.\n- Report dose in ions per square centimeter, but the final requested output is the ratio between the dose at tilt and the dose at normal incidence, which is dimensionless.\n\nDesign your program to evaluate the following test suite of parameter sets, each given as a pair $(E,\\theta)$, where $E$ is in kiloelectronvolts and $\\theta$ is in degrees:\n- Test case A (happy path): $(E,\\theta) = (20\\,\\text{keV}, 30^\\circ)$.\n- Test case B (boundary angle normal): $(E,\\theta) = (20\\,\\text{keV}, 0^\\circ)$.\n- Test case C (low energy, high tilt): $(E,\\theta) = (5\\,\\text{keV}, 60^\\circ)$.\n- Test case D (high energy, very high tilt): $(E,\\theta) = (100\\,\\text{keV}, 80^\\circ)$.\n- Test case E (near channeling threshold): $(E,\\theta) = (200\\,\\text{keV}, 3^\\circ)$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, in the order of the test cases above. Each result is the ratio of the required dose at the given tilt to the required dose at normal incidence for the same energy, expressed as a decimal. The final output must therefore be of the form `[r_A,r_B,r_C,r_D,r_E]` where each `r_i` is a float. Angles must be interpreted in degrees, and any internal trigonometric functions must use radians. No user input is allowed; constants are fixed as specified. All calculations must be executed in a self-contained manner using the provided model, with all physical constants and units handled consistently. The dose unit is ions per square centimeter, and the ratio is dimensionless.",
            "solution": "The problem requires the calculation of the ratio of the ion implantation dose needed to amorphize a near-surface silicon layer at a tilt angle $\\theta$ to the dose required at normal incidence ($\\theta = 0^\\circ$). The solution will be derived from first principles based on the provided damage accumulation model.\n\nFirst, we establish a relationship between the incident ion dose, $\\Phi$, and the resulting damage energy density, $U$, within a near-surface slab of thickness $h$. The dose $\\Phi$ is defined as the number of ions incident per unit area. Consider a surface area $A$. The total number of ions striking this area is $\\Phi \\cdot A$. The volume of the slab under this area is $V = A \\cdot h$.\n\nThe damage energy deposited per ion, $\\Delta E_{damage}$, within this slab must be determined. An ion incident at a tilt angle $\\theta$ relative to the surface normal traverses a path of length $L = h/\\cos\\theta$ through the slab. The energy deposited as damage is given as a fraction $\\eta$ of the energy lost to nuclear stopping along this path. The effective nuclear stopping power is $S_{\\mathrm{eff}}(E, \\theta)$. For a thin, near-surface layer, we can make the valid approximation that the ion's energy $E$, and thus the stopping power, remains constant along the short path $L$. The total energy lost to nuclear stopping per ion is therefore approximately $S_{\\mathrm{eff}}(E, \\theta) \\cdot L$. The portion of this energy that creates stable damage is:\n$$ \\Delta E_{damage} = \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot L = \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot \\frac{h}{\\cos\\theta} $$\n\nThe total damage energy deposited in the volume $V$ by a dose $\\Phi$ is the product of the number of ions and the damage energy per ion:\n$$ U_{total} = (\\Phi \\cdot A) \\cdot \\Delta E_{damage} $$\nThe damage energy density $U$ is this total energy divided by the volume $V$:\n$$ U = \\frac{U_{total}}{V} = \\frac{(\\Phi \\cdot A) \\cdot \\Delta E_{damage}}{A \\cdot h} = \\frac{\\Phi \\cdot \\Delta E_{damage}}{h} $$\nSubstituting the expression for $\\Delta E_{damage}$:\n$$ U = \\frac{\\Phi}{h} \\left( \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot \\frac{h}{\\cos\\theta} \\right) = \\frac{\\Phi \\cdot \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta)}{\\cos\\theta} $$\nNotice that the arbitrary slab thickness $h$ cancels out, rendering the model self-consistent.\n\nAmorphization occurs when this damage energy density reaches the critical threshold $U_c$. We can therefore solve for the required amorphization dose, $\\Phi(E, \\theta)$:\n$$ U_c = \\frac{\\Phi(E, \\theta) \\cdot \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta)}{\\cos\\theta} \\implies \\Phi(E, \\theta) = \\frac{U_c \\cos\\theta}{\\eta S_{\\mathrm{eff}}(E, \\theta)} $$\n\nThe effective stopping power $S_{\\mathrm{eff}}(E, \\theta)$ is given by the product of the energy-dependent nuclear stopping power $S_n(E)$ and the angle-dependent channeling suppression factor $\\Gamma(\\theta)$:\n$$ S_{\\mathrm{eff}}(E, \\theta) = S_n(E) \\cdot \\Gamma(\\theta) $$\nThe specific models provided are:\n$$ S_n(E) = S_{\\mathrm{ref}}\\left(\\frac{E}{E_{\\mathrm{ref}}}\\right)^{-p} $$\n$$ \\Gamma(\\theta) = g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{\\theta}{\\theta_c} \\right)^2\\right)\\right) $$\nwhere $\\theta$ in the exponential term is the angle in degrees, matching the units of $\\theta_c$. The trigonometric function $\\cos\\theta$ requires its argument in radians.\n\nThe problem requires the ratio $R(E, \\theta) = \\frac{\\Phi(E, \\theta)}{\\Phi(E, 0)}$. We first evaluate the dose for the normal incidence case, $\\theta = 0^\\circ$.\nAt $\\theta = 0^\\circ$, we have $\\cos(0^\\circ) = 1$. The channeling factor becomes:\n$$ \\Gamma(0) = g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{0}{\\theta_c} \\right)^2\\right)\\right) = g_{\\min} + (1-g_{\\min})(1 - \\exp(0)) = g_{\\min} + (1-g_{\\min})(1-1) = g_{\\min} $$\nThe dose at normal incidence is therefore:\n$$ \\Phi(E, 0) = \\frac{U_c \\cos(0^\\circ)}{\\eta S_{\\mathrm{eff}}(E, 0^\\circ)} = \\frac{U_c}{\\eta S_n(E) \\Gamma(0)} = \\frac{U_c}{\\eta S_n(E) g_{\\min}} $$\n\nNow we can compute the ratio $R(E, \\theta)$:\n$$ R(E, \\theta) = \\frac{\\Phi(E, \\theta)}{\\Phi(E, 0)} = \\frac{\\frac{U_c \\cos\\theta}{\\eta S_{\\mathrm{eff}}(E, \\theta)}}{\\frac{U_c}{\\eta S_{\\mathrm{eff}}(E, 0)}} = \\frac{\\cos\\theta \\cdot S_{\\mathrm{eff}}(E, 0)}{S_{\\mathrm{eff}}(E, \\theta)} $$\nSubstituting $S_{\\mathrm{eff}}(E, \\theta) = S_n(E) \\Gamma(\\theta)$:\n$$ R(E, \\theta) = \\frac{\\cos\\theta \\cdot S_n(E) \\Gamma(0)}{S_n(E) \\Gamma(\\theta)} = \\frac{\\Gamma(0) \\cos\\theta}{\\Gamma(\\theta)} $$\nAn important consequence of this formulation is that the energy-dependent term $S_n(E)$ cancels out. The dose ratio is therefore independent of the ion energy $E$, a key insight that simplifies the calculation significantly. The test case energies are superfluous to the final calculation of the ratio.\n\nSubstituting $\\Gamma(0) = g_{\\min}$, the final expression for the ratio depends only on the tilt angle $\\theta$:\n$$ R(\\theta) = \\frac{g_{\\min} \\cos\\theta}{\\Gamma(\\theta)} = \\frac{g_{\\min} \\cos\\theta}{g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{\\theta}{\\theta_c} \\right)^2\\right)\\right)} $$\nWe will now implement a function to compute this ratio for the given test cases using the provided constants: $g_{\\min} = 0.4$ and $\\theta_c = 3.0^\\circ$. The input angle $\\theta$ is in degrees. It must be converted to radians for the $\\cos$ function, but can be used directly in degrees for the ratio $\\theta/\\theta_c$ since $\\theta_c$ is also in degrees.\n\nFor each test case $(E_i, \\theta_i)$, we calculate $R(\\theta_i)$.\n- Case A: $(E, \\theta) = (20\\,\\text{keV}, 30^\\circ)$\n- Case B: $(E, \\theta) = (20\\,\\text{keV}, 0^\\circ)$\n- Case C: $(E, \\theta) = (5\\,\\text{keV}, 60^\\circ)$\n- Case D: $(E, \\theta) = (100\\,\\text{keV}, 80^\\circ)$\n- Case E: $(E, \\theta) = (200\\,\\text{keV}, 3^\\circ)$\nAs established, the energy $E$ has no effect on the final ratio. The calculation proceeds by substituting the angle from each case into the derived formula for $R(\\theta)$. For $\\theta = 0^\\circ$, $R(0) = \\frac{g_{\\min} \\cos(0)}{g_{\\min}} = 1$, as expected. For other angles, the value will reflect the interplay between the geometric path length effect (via $\\cos\\theta$) and the channeling suppression effect (via $\\Gamma(\\theta)$).",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the ratio of amorphization dose at a given tilt angle to the\n    dose at normal incidence, based on a phenomenological model of ion damage.\n    \"\"\"\n\n    # Define the constants from the problem statement.\n    # The ratio calculation is independent of Uc, eta, S_ref, E_ref, and p.\n    G_MIN = 0.4  # Residual dechanneling factor at normal incidence\n    THETA_C_DEG = 3.0  # Characteristic channeling angle in degrees\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple (Energy_keV, Angle_degrees).\n    # As derived in the solution, the energy E is not needed for the ratio calculation.\n    test_cases = [\n        (20, 30),   # Test case A\n        (20, 0),    # Test case B\n        (5, 60),    # Test case C\n        (100, 80),  # Test case D\n        (200, 3),   # Test case E\n    ]\n\n    results = []\n    for case in test_cases:\n        _, theta_deg = case\n\n        # Convert tilt angle from degrees to radians for the cosine function.\n        theta_rad = np.deg2rad(theta_deg)\n\n        # Calculate the angle-dependent channeling suppression factor Gamma(theta).\n        # The ratio (theta_deg / THETA_C_DEG) is dimensionless, so degrees can be used directly.\n        exponent_term = - (theta_deg / THETA_C_DEG)**2\n        gamma_theta = G_MIN + (1.0 - G_MIN) * (1.0 - np.exp(exponent_term))\n\n        # Calculate the dose ratio R(theta).\n        # R(theta) = (g_min * cos(theta)) / Gamma(theta)\n        # Gamma(0) is equal to g_min.\n        numerator = G_MIN * np.cos(theta_rad)\n        denominator = gamma_theta\n        \n        # The denominator gamma_theta is always >= g_min (0.4), so no division by zero risk.\n        ratio = numerator / denominator\n        \n        results.append(ratio)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
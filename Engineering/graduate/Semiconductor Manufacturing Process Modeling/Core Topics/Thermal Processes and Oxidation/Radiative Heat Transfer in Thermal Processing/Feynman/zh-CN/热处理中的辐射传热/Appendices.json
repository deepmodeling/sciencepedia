{
    "hands_on_practices": [
        {
            "introduction": "任何热处理系统的核心都是其能源。在快速热处理（RTP）中，通常使用钨卤素灯，其发射光谱是控制晶圆温度的关键。本练习  要求您从基本的 Planck 定律出发，计算在特定波长范围内发射的能量分数。掌握这项技能，您就能将灯管的工作温度与投向晶圆的能量的光谱特性联系起来，这是所有热过程建模的基础。",
            "id": "4158476",
            "problem": "用于快速热处理（RTP）的钨卤灯阵列可以理想化为一组类黑体发射器，其灯丝温度约为 $T \\approx 3000\\,\\mathrm{K}$。对于晶圆-灯管耦合的辐射传热建模，一个关键的量是在波长区间 $[\\lambda_1,\\lambda_2]$ 内发射的总黑体辐射功率的波段限制分数。从适用于半导体制造过程建模的基本辐射定律出发，实现一个程序来计算无量纲分数\n$F(\\lambda_1,\\lambda_2;T) = \\frac{\\int_{\\lambda_1}^{\\lambda_2} E_\\lambda^{b}(T)\\, d\\lambda}{\\sigma T^4}$，\n其中 $E_\\lambda^{b}(T)$ 是光谱黑体辐射功率，$\\sigma$ 是斯特藩-玻尔兹曼常数。您的推导必须从普朗克定律和总黑体辐射功率的定义（斯特藩-玻尔兹曼定律）开始，并为与灯阵列建模相关的近红外区域的波段积分开发一个数值稳健的策略。不要假设任何预先制表的黑体分数函数；相反，应推导出一个数值稳定的积分表示，并指定一个具体的数值积分策略来为给定参数计算它。\n\n您使用的所有物理常数必须是标准值并明确说明，所有计算必须在国际单位制（SI）中进行。最终报告的量 $F(\\lambda_1,\\lambda_2;T)$ 是无量纲的，并且必须以小数形式返回。\n\n您的程序必须为以下参数集测试套件评估 $F(\\lambda_1,\\lambda_2;T)$，每个参数集指定为 $(\\lambda_1,\\lambda_2,T)$：\n\n- A例（类钨温度下的近红外波段）：$(0.8\\,\\mu\\mathrm{m},\\,2.5\\,\\mu\\mathrm{m},\\,3000\\,\\mathrm{K})$。\n- B例（健全性检查，全光谱）：$(0\\,\\mu\\mathrm{m},\\,+\\infty\\,\\mu\\mathrm{m},\\,3000\\,\\mathrm{K})$。\n- C例（类钨温度下的可见光波段）：$(0.4\\,\\mu\\mathrm{m},\\,0.7\\,\\mu\\mathrm{m},\\,3000\\,\\mathrm{K})$。\n- D例（温度稍低的灯管的近红外波段）：$(0.8\\,\\mu\\mathrm{m},\\,2.5\\,\\mu\\mathrm{m},\\,2800\\,\\mathrm{K})$。\n- E例（简并波段）：$(1.0\\,\\mu\\mathrm{m},\\,1.0\\,\\mu\\mathrm{m},\\,3000\\,\\mathrm{K})$。\n\n将 $+\\infty$ 解释为数学上的无穷大。不涉及角度。所有波长在使用前必须内部从微米转换为米。每个案例的输出必须是介于 $0$ 和 $1$ 之间的单个浮点数。\n\n您的程序应生成单行输出，其中包含用方括号括起来的逗号分隔结果列表（例如，“[resultA,resultB,resultC,resultD,resultE]”）。每个浮点结果必须四舍五入到 $8$ 位有效数字。不应打印任何其他文本。",
            "solution": "该问题要求计算总黑体辐射功率的波段限制分数，这是辐射传热分析中的一个基本量，尤其与快速热处理（RTP）系统的建模相关。解题过程始于对问题陈述的验证，该陈述被认为是科学上合理、适定且客观的。该问题基于热物理学的既定原理，并直接适用于指定的工程背景。所有提供的参数都是现实的，并且要求是自洽的。\n\n问题的核心是评估定义为以下形式的无量纲分数 $F(\\lambda_1, \\lambda_2; T)$：\n$$\nF(\\lambda_1,\\lambda_2;T) = \\frac{\\int_{\\lambda_1}^{\\lambda_2} E_\\lambda^{b}(T)\\, d\\lambda}{\\int_{0}^{\\infty} E_\\lambda^{b}(T)\\, d\\lambda}\n$$\n分母表示总黑体辐射功率，根据斯特藩-玻尔兹曼定律，它等于 $\\sigma T^4$。$E_\\lambda^{b}(T)$ 项是光谱黑体辐射功率，由普朗克定律描述：\n$$\nE_\\lambda^{b}(T) = \\frac{2\\pi h c^2}{\\lambda^5 \\left(\\exp\\left(\\frac{hc}{\\lambda k_B T}\\right) - 1\\right)}\n$$\n其中 $h$ 是普朗克常数，$c$ 是真空中的光速，$k_B$ 是玻尔兹曼常数，$T$ 是绝对温度，$\\lambda$ 是波长。\n\n由于在小波长处存在 $\\lambda^5$ 项以及指数项中潜在的浮点溢出或下溢，直接对该表达式进行数值积分容易产生数值不稳定性。一个稳健的数值策略需要重构积分。这可以通过变量替换来对积分进行无量纲化来实现。让我们定义一个无量纲变量 $x$ 如下：\n$$\nx = \\frac{hc}{\\lambda k_B T}\n$$\n由此，我们可以用 $x$ 来表示 $\\lambda$ 及其微分 $d\\lambda$：\n$$\n\\lambda = \\frac{hc}{x k_B T} \\quad \\implies \\quad d\\lambda = -\\frac{hc}{x^2 k_B T} dx\n$$\n积分限也随之改变。当 $\\lambda$ 从 $\\lambda_1$ 变为 $\\lambda_2$ 时，$x$ 从 $x_2 = \\frac{hc}{\\lambda_1 k_B T}$ 变为 $x_1 = \\frac{hc}{\\lambda_2 k_B T}$。\n\n将这些代入 $F(\\lambda_1, \\lambda_2; T)$ 的分子中的积分：\n$$\n\\int_{\\lambda_1}^{\\lambda_2} E_\\lambda^{b}(T)\\, d\\lambda = \\int_{x_2}^{x_1} \\frac{2\\pi h c^2}{\\left(\\frac{hc}{x k_B T}\\right)^5 \\left(e^x - 1\\right)} \\left(-\\frac{hc}{x^2 k_B T}\\right) dx\n$$\n通过反转积分限以抵消负号并简化代数项，我们得到：\n$$\n\\int_{x_1}^{x_2} \\frac{2\\pi h c^2 (k_B T)^5 x^5}{(hc)^5 (e^x - 1)} \\frac{h c}{x^2 k_B T} dx = \\left(\\frac{2\\pi k_B^4}{h^3 c^2}\\right) T^4 \\int_{x_1}^{x_2} \\frac{x^3}{e^x - 1} dx\n$$\n分母，即总辐射功率，是通过令 $\\lambda_1 \\to 0$ 和 $\\lambda_2 \\to \\infty$ 来找到的，这对应于 $x_2 \\to \\infty$ 和 $x_1 \\to 0$：\n$$\n\\sigma T^4 = \\int_{0}^{\\infty} E_\\lambda^{b}(T)\\, d\\lambda = \\left(\\frac{2\\pi k_B^4}{h^3 c^2}\\right) T^4 \\int_{0}^{\\infty} \\frac{x^3}{e^x - 1} dx\n$$\n定积分 $\\int_{0}^{\\infty} \\frac{x^3}{e^x - 1} dx$ 是一个与玻色-爱因斯坦积分相关的标准形式，其计算结果为 $\\frac{\\pi^4}{15}$。这使得可以根据基本常数推导出斯特藩-玻尔兹曼常数 $\\sigma$：\n$$\n\\sigma = \\frac{2\\pi k_B^4}{h^3 c^2} \\frac{\\pi^4}{15} = \\frac{2\\pi^5 k_B^4}{15 h^3 c^2}\n$$\n\n现在，分数 $F(\\lambda_1, \\lambda_2; T)$ 可以表示为两个变换后积分的比值：\n$$\nF(\\lambda_1,\\lambda_2;T) = \\frac{\\left(\\frac{2\\pi k_B^4}{h^3 c^2}\\right) T^4 \\int_{x_1}^{x_2} \\frac{x^3}{e^x - 1} dx}{\\left(\\frac{2\\pi k_B^4}{h^3 c^2}\\right) T^4 \\int_{0}^{\\infty} \\frac{x^3}{e^x - 1} dx} = \\frac{\\int_{x_1}^{x_2} \\frac{x^3}{e^x - 1} dx}{\\frac{\\pi^4}{15}}\n$$\n这就得出了要实现的最终数值稳定的表达式：\n$$\nF(\\lambda_1,\\lambda_2;T) = \\frac{15}{\\pi^4} \\int_{\\frac{hc}{\\lambda_2 k_B T}}^{\\frac{hc}{\\lambda_1 k_B T}} \\frac{x^3}{e^x - 1} dx\n$$\n对于有限且非零的 $\\lambda_1, \\lambda_2$，被积函数 $f(x) = \\frac{x^3}{e^x - 1}$ 是良态的，并且积分是在一个有限区间上进行的。\n\n对于数值实现，使用以下物理常数（2018 CODATA值）并采用国际单位制：\n- 普朗克常数, $h = 6.62607015 \\times 10^{-34}$ J·s\n- 光速, $c = 299792458$ m/s\n- 玻尔兹曼常数, $k_B = 1.380649 \\times 10^{-23}$ J/K\n\n指定的数值积分策略是使用 `scipy.integrate` 库中的 `quad` 函数。该函数采用基于 QUADPACK FORTRAN 库的自适应求积方案，该方案对于各种被积函数（包括在端点处具有可积奇点的函数）都很稳健。它还可以处理无穷积分限，这对于B例是必需的。\n\n测试案例处理如下：\n- **A例、C例、D例**：使用有限的非零积分限进行标准评估。波长从 $\\mu$m 转换为 m。\n- **B例 $(\\lambda_1=0, \\lambda_2=\\infty)$**：$x$ 的积分限变为 $(\\infty, 0)$，因此积分为 $\\int_0^\\infty$。数值积分器将计算此值，结果应为 $1.0$，作为归一化的验证。\n- **E例 $(\\lambda_1=\\lambda_2)$**：积分限相同 ($x_1=x_2$)，因此积分为零。通过条件检查直接返回 $0.0$ 来处理这种情况。\n\n为了保证数值精度，$e^x - 1$ 项使用 `numpy.expm1(x)` 计算，该函数在 $x$ 值很小时能保持精度。还包括一个防护措施来处理被积函数中 $x$ 值非常大时可能发生的溢出，此时函数值会迅速趋于零。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy import integrate\n\ndef solve():\n    \"\"\"\n    Solves the blackbody radiation fraction problem for a suite of test cases.\n    The implementation follows the derivation of a numerically stable integral\n    representation of the band-limited emission fraction.\n    \"\"\"\n\n    # Physical Constants (2018 CODATA values, SI units)\n    H = 6.62607015e-34      # Planck constant (J.s)\n    C = 299792458.0         # Speed of light in vacuum (m/s)\n    K_B = 1.380649e-23      # Boltzmann constant (J/K)\n\n    # Second radiation constant, C2 = h*c/k_B (m.K)\n    C2 = H * C / K_B\n\n    def integrand(x):\n        \"\"\"\n        The non-dimensionalized integrand for the blackbody radiation function.\n        f(x) = x^3 / (exp(x) - 1).\n        \"\"\"\n        # Handle the limit at x=0, which is 0.\n        if x == 0:\n            return 0.0\n        # Prevent overflow for large x, where the integrand approaches zero.\n        # np.exp(709.78) is near floating point limit.\n        if x > 709.0:\n            return 0.0\n        # np.expm1(x) provides better precision for exp(x)-1 when x is small.\n        return x**3 / np.expm1(x)\n\n    def calculate_F(lambda1_micron, lambda2_micron, T_kelvin):\n        \"\"\"\n        Calculates the fraction of blackbody radiation F in the band [lambda1, lambda2]\n        at temperature T.\n\n        Args:\n            lambda1_micron (float): Start wavelength in micrometers.\n            lambda2_micron (float): End wavelength in micrometers.\n            T_kelvin (float): Temperature in Kelvin.\n\n        Returns:\n            float: The dimensionless fraction F.\n        \"\"\"\n        # Case E: Degenerate band of zero width\n        if lambda1_micron == lambda2_micron:\n            return 0.0\n        \n        # Convert wavelengths from micrometers to meters\n        lambda1_m = lambda1_micron * 1e-6\n        lambda2_m = lambda2_micron * 1e-6\n\n        # Calculate the dimensionless integration limits x = hc / (lambda * k_B * T)\n        # Note the inverse relationship between lambda and x.\n        \n        # Upper limit x2 corresponds to lower wavelength lambda1\n        if lambda1_m == 0.0:\n            x2 = np.inf\n        else:\n            x2 = C2 / (lambda1_m * T_kelvin)\n\n        # Lower limit x1 corresponds to upper wavelength lambda2\n        if np.isinf(lambda2_m):\n            x1 = 0.0\n        else:\n            x1 = C2 / (lambda2_m * T_kelvin)\n        \n        # The integral is over [x1, x2]\n        integral_val, _ = integrate.quad(integrand, x1, x2)\n        \n        # The total integral from 0 to infinity is pi^4 / 15\n        normalization_constant = 15.0 / (np.pi**4)\n        \n        return normalization_constant * integral_val\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (lambda1_micron, lambda2_micron, T_kelvin)\n    test_cases = [\n        (0.8, 2.5, 3000.0),      # Case A\n        (0.0, np.inf, 3000.0),   # Case B\n        (0.4, 0.7, 3000.0),      # Case C\n        (0.8, 2.5, 2800.0),      # Case D\n        (1.0, 1.0, 3000.0),      # Case E\n    ]\n\n    results = []\n    for case in test_cases:\n        lambda1, lambda2, T = case\n        fraction = calculate_F(lambda1, lambda2, T)\n        # Format the result to 8 significant figures\n        results.append(f\"{fraction:.8g}\")\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "辐射一旦发出，并非全部都能到达目标。系统的几何结构——灯管和晶圆的尺寸、形状和间距——决定了能量传输的效率。本练习  引入了角系数的概念，这是一个关键的无量纲量，用于描述这些几何关系。通过从第一性原理推导典型 RTP 配置的角系数积分，并进行数值求解，您将在辐射热交换的空间方面建模上获得实践经验。",
            "id": "4158513",
            "problem": "考虑半导体制造中的快速热处理（RTP）过程，其中一个圆形晶圆和一个共轴的圆形圆盘灯平行放置，并由固定的轴向距离隔开。设晶圆为具有均匀辐射特性的漫射、灰体、等温发射体，且灯面为一个漫射、灰体、等温表面。假设环境为真空（无参与介质），表面之间无遮挡，轴向完美对准，且两个表面均为平面且相互平行。\n\n从两个漫射表面之间辐射角系数的基本定义出发，定义并计算从晶圆（表面 $1$）到灯盘（表面 $2$）的角系数。晶圆的半径为 $R$，面积为 $A_1 = \\pi R^2$；灯盘的半径为 $a$，面积为 $A_2 = \\pi a^2$；两平面之间的轴向距离为 $H$。设表面法线沿轴线方向且相互正对。使用基于形态因子核的双重面积分的漫射表面角系数定义，该定义源自能量守恒、兰伯特余弦定律以及真空中的几何光学。明确陈述所使用的物理假设，并视可见性为无遮挡。\n\n您必须：\n- 从第一性原理出发，为相距有限距离 $H > 0$ 的平行共轴圆盘，推导出一个适用于角系数 $F_{1 \\to 2}$ 数值计算的配置。\n- 基于推导出的配置，实现一种稳健的数值方法，用于计算给定 $(R,a,H)$ 下的 $F_{1 \\to 2}$。积分中使用的任何角度都必须以弧度为单位。\n- 确保数值稳定性和准确性足以满足工程应用。\n\n返回以下测试套件的 $F_{1 \\to 2}$ 最终数值，结果表示为保留六位小数的十进制浮点数。所有几何参数均以米为单位，且 $F_{1 \\to 2}$ 为无量纲量。\n\n测试套件：\n1. $R = 0.1$, $a = 0.1$, $H = 0.05$（典型的RTP间距，半径相等）。\n2. $R = 0.1$, $a = 0.05$, $H = 0.02$（较小的灯）。\n3. $R = 0.1$, $a = 0.2$, $H = 0.03$（较大的灯）。\n4. $R = 0.1$, $a = 0.0$, $H = 0.01$（退化的灯半径）。\n5. $R = 0.1$, $a = 0.1$, $H = 10.0$（非常大的间距）。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，$[result_1,result_2,result_3,result_4,result_5]$），其中每个 $result_i$ 对应于测试用例 $i$ 计算出的 $F_{1 \\to 2}$ 值，并四舍五入到六位小数。",
            "solution": "该问题要求推导并数值计算辐射角系数 $F_{1 \\to 2}$，该角系数是从半径为 $R$ 的圆形圆盘（晶圆，表面 $1$）到半径为 $a$ 的平行共轴圆形圆盘（灯，表面 $2$），两者轴向距离为 $H$。\n\n分析将按照规定从第一性原理出发。问题陈述中提供的以下物理假设是推导的基础：\n1.  两个表面都是漫射和灰体，意味着它们的辐射特性与方向和波长无关。\n2.  两个表面都是等温的。\n3.  中间介质是真空，因此表面之间没有吸收、发射或散射。\n4.  两个表面之间的路径上没有障碍物。\n5.  两个表面是平面的、平行的，并在一条共同的中心轴上完美对齐。\n\n角系数 $F_{1 \\to 2}$ 定义为离开表面 $A_1$ 并直接到达表面 $A_2$ 的辐射所占的份额。对于漫射表面，它由以下覆盖两个区域的四维积分给出：\n$$F_{1 \\to 2} = \\frac{1}{A_1} \\int_{A_1} \\int_{A_2} \\frac{\\cos\\theta_1 \\cos\\theta_2}{\\pi S^2} dA_2 dA_1$$\n其中 $A_1 = \\pi R^2$ 是晶圆的面积，$dA_1$ 和 $dA_2$ 分别是表面 $1$ 和 $2$ 上的微分面积元，$S$ 是 $dA_1$ 和 $dA_2$ 之间的直线距离，$\\theta_1$ 和 $\\theta_2$ 是直线 $S$ 与 $dA_1$ 和 $dA_2$ 处表面法线之间的夹角。\n\n为了计算此积分，我们建立一个柱坐标系。设晶圆（表面 $1$）位于 $z=0$ 平面，以原点为中心。其边界由 $r_1 \\le R$ 定义。灯（表面 $2$）位于 $z=H$ 平面，同样以z轴为中心，其边界为 $r_2 \\le a$。晶圆的表面法线为 $\\vec{n}_1 = \\hat{k}$，灯的表面法线为 $\\vec{n}_2 = -\\hat{k}$，因为它们相互正对。\n\n微分面积元 $dA_1$ 位于 $(r_1, \\phi_1, 0)$，微分面积元 $dA_2$ 位于 $(r_2, \\phi_2, H)$。从 $dA_1$ 到 $dA_2$ 的向量为 $\\vec{S} = (r_2 \\cos \\phi_2 - r_1 \\cos \\phi_1)\\hat{i} + (r_2 \\sin \\phi_2 - r_1 \\sin \\phi_1)\\hat{j} + H\\hat{k}$。\n距离的平方 $S^2$ 是向量 $\\vec{S}$ 的模的平方：\n$$S^2 = (r_2 \\cos \\phi_2 - r_1 \\cos \\phi_1)^2 + (r_2 \\sin \\phi_2 - r_1 \\sin \\phi_1)^2 + H^2$$\n$$S^2 = r_1^2 + r_2^2 - 2 r_1 r_2 \\cos(\\phi_2 - \\phi_1) + H^2$$\n余弦项由下式给出：\n$$\\cos\\theta_1 = \\frac{\\vec{S} \\cdot \\vec{n}_1}{|\\vec{S}|} = \\frac{H}{S}$$\n$$\\cos\\theta_2 = \\frac{-\\vec{S} \\cdot \\vec{n}_2}{|\\vec{S}|} = \\frac{H}{S}$$\n因此，角系数积分的核变为：\n$$\\frac{\\cos\\theta_1 \\cos\\theta_2}{\\pi S^2} = \\frac{H^2}{\\pi S^4}$$\n\n由于该配置的轴对称性，从半径为 $r_1$ 的环上的任何微分面积元 $dA_1$ 到整个圆盘 $A_2$ 的角系数是恒定的。我们可以通过先计算从表面 $1$ 上的一个微分环到表面 $2$ 的角系数，然后将其在表面 $1$ 的面积上进行平均，从而将四维积分简化为三重积分。\n\n设 $dA_1$ 是一个半径为 $r_1$、宽度为 $dr_1$ 的环，因此其面积为 $dA_1 = 2\\pi r_1 dr_1$。角系数 $F_{1 \\to 2}$ 是面积加权平均值：\n$$F_{1 \\to 2} = \\frac{1}{A_1} \\int_{A_1} F_{dA_1 \\to A_2} dA_1 = \\frac{1}{\\pi R^2} \\int_0^R F_{d\\text{ring} \\to A_2} (2\\pi r_1 dr_1) = \\frac{2}{R^2} \\int_0^R r_1 F_{d\\text{ring} \\to A_2} dr_1$$\n此处，$F_{d\\text{ring} \\to A_2}$ 是从环上任意一点到圆盘 $A_2$ 的角系数。根据对称性，我们可以固定环上的一个点，例如在 $(r_1, 0, 0)$ 处，并计算其到 $A_2$ 的角系数。\n$$F_{d\\text{ring} \\to A_2} = \\int_{A_2} \\frac{H^2}{\\pi S_p^4} dA_2$$\n其中 $S_p^2$ 是从点 $(r_1, 0, 0)$ 到表面 $2$ 上一点 $(r_2, \\phi_2, H)$ 的距离的平方：\n$$S_p^2 = (r_2 \\cos \\phi_2 - r_1)^2 + (r_2 \\sin \\phi_2)^2 + H^2 = r_1^2 + r_2^2 - 2 r_1 r_2 \\cos\\phi_2 + H^2$$\n$F_{d\\text{ring} \\to A_2}$ 的积分变为：\n$$F_{d\\text{ring} \\to A_2} = \\int_0^a \\int_0^{2\\pi} \\frac{H^2}{\\pi (r_1^2 + r_2^2 - 2 r_1 r_2 \\cos\\phi_2 + H^2)^2} r_2 d\\phi_2 dr_2$$\n将此代回到 $F_{1 \\to 2}$ 的表达式中：\n$$F_{1 \\to 2} = \\frac{2}{R^2} \\int_0^R r_1 \\left( \\int_0^a \\int_0^{2\\pi} \\frac{H^2 r_2}{\\pi (r_1^2 + r_2^2 - 2 r_1 r_2 \\cos\\phi_2 + H^2)^2} d\\phi_2 dr_2 \\right) dr_1$$\n重新整理各项，得到用于数值计算的最终三重积分。为简单起见，我们将积分变量 $\\phi_2$ 重命名为 $\\phi$。\n$$F_{1 \\to 2} = \\frac{2 H^2}{\\pi R^2} \\int_0^R \\int_0^a \\int_0^{2\\pi} \\frac{r_1 r_2}{(r_1^2 + r_2^2 + H^2 - 2 r_1 r_2 \\cos\\phi)^2} d\\phi dr_2 dr_1$$\n对于 $H > 0$ 的情况，该积分是良定的，因为分母始终为正。被积函数在整个积分域上是有限且连续的。\n\n这个推导出的表达式适用于数值计算。我们将使用 `scipy.integrate.tplquad` 函数来实现一个解决方案，该函数执行三重数值积分。积分将依次对 $\\phi$（从 $0$ 到 $2\\pi$）、$r_2$（从 $0$ 到 $a$）和 $r_1$（从 $0$ 到 $R$）进行。被积函数将计算积分核，总常数 $\\frac{2 H^2}{\\pi R^2}$ 将与积分的数值结果相乘。\n\n一个特殊情况是当灯的半径 $a=0$ 时。面积 $A_2$ 为零，因此角系数 $F_{1 \\to 2}$ 必须为零。通过将 $r_2$ 积分的上限设置为零来处理这种情况，这会正确地得到结果 $0$。为提高计算效率，此情况通过条件检查来处理，而不是执行零宽度的积分。\n数值实现将对测试套件中提供的每一组参数 $(R, a, H)$ 系统地计算此积分。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy import integrate\n\ndef solve():\n    \"\"\"\n    Computes the view factor F_{1->2} for parallel, coaxial circular disks.\n\n    The function validates the problem, derives the integral for the view factor from\n    first principles, and then implements a numerical solution using SciPy's\n    triple quadrature integration. It processes a suite of test cases and formats\n    the output as specified.\n    \"\"\"\n\n    # Test suite: (R, a, H) in meters\n    # 1. R: Wafer radius (surface 1)\n    # 2. a: Lamp disk radius (surface 2)\n    # 3. H: Axial separation distance\n    test_cases = [\n        (0.1, 0.1, 0.05),  # typical RTP spacing, equal radii\n        (0.1, 0.05, 0.02), # smaller lamp\n        (0.1, 0.2, 0.03),  # larger lamp\n        (0.1, 0.0, 0.01),  # degenerate lamp radius\n        (0.1, 0.1, 10.0),  # very large separation\n    ]\n\n    results = []\n    \n    for R, a, H in test_cases:\n        # Handle the degenerate case where the lamp area is zero.\n        # The view factor to a zero-area surface must be zero.\n        if a == 0.0:\n            results.append(0.0)\n            continue\n            \n        # Handle the case where the wafer radius is zero (a point).\n        # The integral formulation with r1 ranging from 0 to 0 will naturally give 0,\n        # but it represents a point source, not an extended surface, and its area is zero.\n        # F_{1->2} is not strictly defined if A1=0, but the flux exchange would be zero.\n        if R == 0.0:\n            results.append(0.0) # Or handle as an invalid case, but 0.0 makes physical sense for total energy.\n            continue\n            \n        # The view factor is derived from the integral:\n        # F_{1->2} = (2 * H^2 / (pi * R^2)) * Integral(...)\n        # The integrand for the triple integral is:\n        # f(phi, r2, r1) = (r1 * r2) / (r1^2 + r2^2 + H^2 - 2*r1*r2*cos(phi))^2\n        # where the integration is d(phi) dr2 dr1.\n        \n        # We need to define the integrand for scipy.integrate.tplquad.\n        # The order of arguments for tplquad's func is f(z, y, x).\n        # Here, x=r1, y=r2, z=phi.\n        \n        def integrand(phi, r2, r1):\n            \"\"\"\n            The kernel of the triple integral for the view factor calculation.\n            \"\"\"\n            cos_phi = np.cos(phi)\n            denominator = r1**2 + r2**2 + H**2 - 2 * r1 * r2 * cos_phi\n            # The denominator is guaranteed to be > 0 since H > 0.\n            return (r1 * r2) / (denominator**2)\n\n        # The integration limits are:\n        # r1 from 0 to R\n        # r2 from 0 to a\n        # phi from 0 to 2*pi\n        # tplquad(func, x_min, x_max, y_min, y_max, z_min, z_max)\n        \n        # The range for y (r2) is not a function of x (r1), so we use lambda functions.\n        r2_min = lambda r1: 0\n        r2_max = lambda r1: a\n        \n        # The range for z (phi) is not a function of x or y, so we use lambda functions.\n        phi_min = lambda r1, r2: 0\n        phi_max = lambda r1, r2: 2 * np.pi\n        \n        # Perform the numerical integration.\n        integral_val, _ = integrate.tplquad(\n            integrand, \n            0, R,             # r1 limits\n            r2_min, r2_max,    # r2 limits\n            phi_min, phi_max   # phi limits\n        )\n        \n        # Calculate the final view factor using the constant pre-factor.\n        view_factor = (2 * H**2 / (np.pi * R**2)) * integral_val\n        \n        # Clamp the result to the valid range [0, 1] to handle any minor numerical errors.\n        view_factor = max(0.0, min(1.0, view_factor))\n        results.append(view_factor)\n\n    # Format the final output string as required.\n    formatted_results = [f\"{res:.6f}\" for res in results]\n    print(f\"[{','.join(formatted_results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "在理想世界中，材料属性是简单的常数。但实际上，晶圆吸收辐射的能力（其吸收率）会随波长而变化，这种“非灰体”行为会显著影响加热的准确性。本练习  挑战您量化由常见的“灰体”近似（即假设吸收率为常数）所引入的误差。通过比较精确吸收功率与近似值，您将对何时可以采用简化假设，以及何时必须使用更详细的光谱模型，形成批判性的理解。",
            "id": "4158884",
            "problem": "一块硅片在快速热处理（RTP）系统中被一个钨卤灯阵列加热。假设硅片在空间上是等温的，宏观上是光滑的，在所关注的近红外光谱范围内是光学厚的，并且硅片表面表现为漫射、灰-非灰发射体/吸收体，其透射可以忽略不计。灯组与硅片相互面对，角系数为1，腔室壁是冷的且不参与辐射换热。入射到硅片上的灯场的光谱辐照度可以建模为三个窄带，中心波长分别为 $\\lambda_{1} = 0.9\\,\\mu\\mathrm{m}$、$\\lambda_{2} = 1.1\\,\\mu\\mathrm{m}$ 和 $\\lambda_{3} = 1.4\\,\\mu\\mathrm{m}$，这三个窄带共同承载了全部的入射辐射功率。设总入射辐照度的相应比例为 $f_{1} = 0.50$、$f_{2} = 0.30$ 和 $f_{3} = 0.20$，且 $f_{1} + f_{2} + f_{3} = 1$。总入射辐照度的大小为 $H_{i}$。\n\n在 $[0.8, 1.5]\\,\\mu\\mathrm{m}$ 波段内，硅片的光谱发射率（根据Kirchhoff定律等于其吸收率）可以很好地用一个关于波长的线性函数来近似，\n$$\n\\varepsilon(\\lambda) = \\varepsilon_{0} + s\\left(\\lambda - \\lambda_{\\mathrm{ref}}\\right),\n$$\n其中 $\\varepsilon_{0} = 0.68$，$s = 0.25\\,\\mu\\mathrm{m}^{-1}$，$\\lambda_{\\mathrm{ref}} = 1.0\\,\\mu\\mathrm{m}$。在此波段之外，灯的光谱功率可以忽略不计。\n\n从“吸收的辐照度等于硅片吸收率与入射光谱辐照度乘积的光谱积分”这一辐射传输基本陈述出发，并利用上述窄带表示法，首先陈述并论证在何种物理和数学条件下，用一个常数（灰体近似）替代 $\\varepsilon(\\lambda)$ 来预测吸收的灯功率时，所产生的误差可以忽略不计。然后，使用工程实践中常用的灰体近似 $\\varepsilon_{g} = \\varepsilon(\\lambda_{\\mathrm{ref}})$，量化由于 $\\varepsilon(\\lambda)$ 在灯光谱范围内的实际光谱变化而导致的预测吸收灯功率的相对误差 $\\delta$。定义\n$$\n\\delta \\equiv \\frac{q_{\\mathrm{gray}} - q_{\\mathrm{exact}}}{q_{\\mathrm{exact}}},\n$$\n其中 $q_{\\mathrm{exact}}$ 是用真实的 $\\varepsilon(\\lambda)$ 计算的吸收辐照度，而 $q_{\\mathrm{gray}}$ 是用常数 $\\varepsilon_{g}$ 计算的吸收辐照度。\n\n将 $\\delta$ 的最终答案表示为一个无量纲小数，并四舍五入到四位有效数字。不应将其他结果作为最终答案报告。",
            "solution": "首先对问题进行验证，以确保其科学合理、提法得当且信息完整。\n\n### 步骤 1：提取已知条件\n-   系统：在快速热处理（RTP）系统中加热的硅片。\n-   假设：硅片在空间上等温、宏观光滑、光学厚，并且是一个透射可忽略的漫射、灰-非灰发射体/吸收体。灯与硅片的角系数为1。腔室壁是冷的且不参与辐射。\n-   入射辐照度模型：由三个窄带组成。\n    -   波长：$\\lambda_{1} = 0.9\\,\\mu\\mathrm{m}$，$\\lambda_{2} = 1.1\\,\\mu\\mathrm{m}$，$\\lambda_{3} = 1.4\\,\\mu\\mathrm{m}$。\n    -   总辐照度 ($H_i$) 的比例：$f_{1} = 0.50$，$f_{2} = 0.30$，$f_{3} = 0.20$。注意 $f_{1} + f_{2} + f_{3} = 1$。\n-   硅片光谱发射率/吸收率：在 $[0.8, 1.5]\\,\\mu\\mathrm{m}$ 波段内，$\\varepsilon(\\lambda) = \\varepsilon_{0} + s\\left(\\lambda - \\lambda_{\\mathrm{ref}}\\right)$。\n    -   常数：$\\varepsilon_{0} = 0.68$，$s = 0.25\\,\\mu\\mathrm{m}^{-1}$，$\\lambda_{\\mathrm{ref}} = 1.0\\,\\mu\\mathrm{m}$。\n-   灰体近似：$\\varepsilon_{g} = \\varepsilon(\\lambda_{\\mathrm{ref}})$。\n-   相对误差定义：$\\delta \\equiv \\frac{q_{\\mathrm{gray}} - q_{\\mathrm{exact}}}{q_{\\mathrm{exact}}}$，其中 $q_{\\mathrm{exact}}$ 和 $q_{\\mathrm{gray}}$ 是吸收的辐照度。\n\n### 步骤 2：使用提取的已知条件进行验证\n-   **科学依据**：该问题基于辐射传热的基本原理，特别是非灰表面的光谱积分。该场景（硅的RTP）和物理模型（线性发射率、窄带源）是工程分析中常见且有效的近似方法。\n-   **提法得当**：问题定义清晰。它提供了计算所需量所需的所有必要数据和定义。问题明确，并能导出一个唯一的解。\n-   **客观性**：语言是技术性的，不含主观内容。\n-   **完整性和一致性**：数据是自洽的（例如 $f_1+f_2+f_3=1$）并且足以进行计算。给定的条件在物理上是合理的。\n\n### 步骤 3：结论与行动\n问题是有效的。将提供完整的解答。\n\n### 解题推导\n\n按照要求，分析分为两部分：首先，对灰体近似进行一般性讨论；其次，具体计算相对误差。\n\n**第 1 部分：灰体近似有效的条件**\n\n单位面积吸收的辐射功率，即吸收辐照度 $q_{\\mathrm{abs}}$，是通过对光谱吸收率 $\\alpha(\\lambda)$ 和入射光谱辐照度 $H_{i,\\lambda}(\\lambda)$ 的乘积在所有波长上进行积分来确定的：\n$$\nq_{\\mathrm{abs}} = \\int_{0}^{\\infty} \\alpha(\\lambda) H_{i,\\lambda}(\\lambda) \\,d\\lambda\n$$\n对于不透明表面，Kirchhoff热辐射定律指出，光谱方向发射率等于光谱方向吸收率。对于漫射表面，这简化为在每个波长 $\\lambda$ 处都有 $\\varepsilon(\\lambda) = \\alpha(\\lambda)$。题目说明这些条件适用。因此，精确的吸收辐照度为：\n$$\nq_{\\mathrm{exact}} = \\int_{0}^{\\infty} \\varepsilon(\\lambda) H_{i,\\lambda}(\\lambda) \\,d\\lambda\n$$\n总入射辐照度为 $H_{i} = \\int_{0}^{\\infty} H_{i,\\lambda}(\\lambda) \\,d\\lambda$。我们可以定义一个源平均发射率（或吸收率）$\\bar{\\varepsilon}_{S}$ 如下：\n$$\n\\bar{\\varepsilon}_{S} = \\frac{\\int_{0}^{\\infty} \\varepsilon(\\lambda) H_{i,\\lambda}(\\lambda) \\,d\\lambda}{\\int_{0}^{\\infty} H_{i,\\lambda}(\\lambda) \\,d\\lambda} = \\frac{q_{\\mathrm{exact}}}{H_{i}}\n$$\n因此，$q_{\\mathrm{exact}} = \\bar{\\varepsilon}_{S} H_{i}$。\n\n灰体近似假设发射率不随波长变化，即 $\\varepsilon(\\lambda) = \\varepsilon_{g}$。在此近似下，吸收的辐照度为：\n$$\nq_{\\mathrm{gray}} = \\int_{0}^{\\infty} \\varepsilon_{g} H_{i,\\lambda}(\\lambda) \\,d\\lambda = \\varepsilon_{g} \\int_{0}^{\\infty} H_{i,\\lambda}(\\lambda) \\,d\\lambda = \\varepsilon_{g} H_{i}\n$$\n当 $q_{\\mathrm{gray}} \\approx q_{\\mathrm{exact}}$ 时，灰体近似的误差可以忽略不计，这意味着 $\\varepsilon_{g} \\approx \\bar{\\varepsilon}_{S}$。\n\n其物理和数学条件如下：\n1.  **物理条件**：如果在入射辐照度 $H_{i,\\lambda}(\\lambda)$ 显著的光谱区域内，光谱发射率 $\\varepsilon(\\lambda)$ 近似为常数，则灰体近似是准确的。如果辐射源在窄带内发射，或者 $\\varepsilon(\\lambda)$ 在辐射源的发射光谱范围内是平坦的，那么这个近似会非常好。\n2.  **数学条件**：如果 $\\varepsilon_{g} = \\bar{\\varepsilon}_{S}$，则误差为零。这意味着所选的常数 $\\varepsilon_g$ 必须等于真实光谱发射率的源辐照度加权平均值。如果由源光谱加权的偏差积分接近于零，则误差很小：\n    $$\n    \\int_{0}^{\\infty} \\left( \\varepsilon_{g} - \\varepsilon(\\lambda) \\right) H_{i,\\lambda}(\\lambda) \\,d\\lambda \\approx 0\n    $$\n这个条件意味着，当由入射辐射的光谱功率分布加权时，$\\varepsilon(\\lambda)$ 围绕所选常数 $\\varepsilon_g$ 的正负变化必须有效地相互抵消。\n\n**第 2 部分：相对误差 $\\delta$ 的计算**\n\n题目将入射光谱辐照度建模为三个离散的窄带，为了积分计算，可以将其视为狄拉克δ函数：\n$$\nH_{i,\\lambda}(\\lambda) = H_{i} \\left[ f_{1} \\delta(\\lambda - \\lambda_{1}) + f_{2} \\delta(\\lambda - \\lambda_{2}) + f_{3} \\delta(\\lambda - \\lambda_{3}) \\right]\n$$\n将此模型代入积分，并利用δ函数的筛选性质，可以求得精确的吸收辐照度 $q_{\\mathrm{exact}}$：\n$$\nq_{\\mathrm{exact}} = \\int_0^\\infty \\varepsilon(\\lambda) H_{i} \\left[ f_{1} \\delta(\\lambda-\\lambda_{1}) + f_{2} \\delta(\\lambda-\\lambda_{2}) + f_{3} \\delta(\\lambda-\\lambda_{3}) \\right] d\\lambda\n$$\n$$\nq_{\\mathrm{exact}} = H_{i} \\left[ f_{1} \\varepsilon(\\lambda_{1}) + f_{2} \\varepsilon(\\lambda_{2}) + f_{3} \\varepsilon(\\lambda_{3}) \\right]\n$$\n我们使用给定的线性模型 $\\varepsilon(\\lambda) = \\varepsilon_{0} + s\\left(\\lambda - \\lambda_{\\mathrm{ref}}\\right)$（其中 $\\varepsilon_{0} = 0.68$，$s = 0.25\\,\\mu\\mathrm{m}^{-1}$，$\\lambda_{\\mathrm{ref}} = 1.0\\,\\mu\\mathrm{m}$）来计算指定波长处的发射率值。\n$$\n\\varepsilon(\\lambda_{1}) = \\varepsilon(0.9\\,\\mu\\mathrm{m}) = 0.68 + 0.25(0.9 - 1.0) = 0.68 - 0.025 = 0.655\n$$\n$$\n\\varepsilon(\\lambda_{2}) = \\varepsilon(1.1\\,\\mu\\mathrm{m}) = 0.68 + 0.25(1.1 - 1.0) = 0.68 + 0.025 = 0.705\n$$\n$$\n\\varepsilon(\\lambda_{3}) = \\varepsilon(1.4\\,\\mu\\mathrm{m}) = 0.68 + 0.25(1.4 - 1.0) = 0.68 + 0.100 = 0.780\n$$\n现在，将这些值以及辐照度比例（$f_{1}=0.50$，$f_{2}=0.30$，$f_{3}=0.20$）代入 $q_{\\mathrm{exact}}$ 的表达式中：\n$$\nq_{\\mathrm{exact}} = H_{i} \\left[ (0.50)(0.655) + (0.30)(0.705) + (0.20)(0.780) \\right]\n$$\n$$\nq_{\\mathrm{exact}} = H_{i} \\left[ 0.3275 + 0.2115 + 0.1560 \\right] = H_{i} (0.6950)\n$$\n因此，源平均发射率为 $\\bar{\\varepsilon}_{S} = 0.6950$。\n\n接下来，我们使用灰体近似计算吸收的辐照度 $q_{\\mathrm{gray}}$。题目指定使用 $\\varepsilon_{g} = \\varepsilon(\\lambda_{\\mathrm{ref}})$。\n$$\n\\varepsilon_{g} = \\varepsilon(1.0\\,\\mu\\mathrm{m}) = 0.68 + 0.25(1.0 - 1.0) = 0.68\n$$\n所以，在灰体近似下的吸收辐照度为：\n$$\nq_{\\mathrm{gray}} = \\varepsilon_{g} H_{i} = 0.68 H_{i}\n$$\n最后，我们使用给定的定义计算相对误差 $\\delta$：\n$$\n\\delta = \\frac{q_{\\mathrm{gray}} - q_{\\mathrm{exact}}}{q_{\\mathrm{exact}}} = \\frac{0.68 H_{i} - 0.6950 H_{i}}{0.6950 H_{i}} = \\frac{0.68 - 0.6950}{0.6950}\n$$\n$$\n\\delta = \\frac{-0.0150}{0.6950} \\approx -0.0215827338...\n$$\n四舍五入到四位有效数字，相对误差为 $-0.02158$。",
            "answer": "$$\n\\boxed{-0.02158}\n$$"
        }
    ]
}
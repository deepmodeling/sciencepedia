{
    "hands_on_practices": [
        {
            "introduction": "The foundation of any endpoint detection model lies in understanding the plasma chemistry that produces the optical signal. Before we can interpret the light measured by a sensor, we must model what governs the concentration of the emitting species within the reactor. This first practice  challenges you to build a model from first principles, using a species balance to analyze the competition between the generation of a reactive species and its consumption at the chamber surfaces. By deriving and applying the Damköhler number, a key dimensionless group in chemical kinetics, you will gain insight into whether the process dynamics are limited by reaction rates or by the transport and supply of reactants.",
            "id": "4124304",
            "problem": "A single-wafer inductively coupled plasma reactor is used for reactive ion etching with endpoint detection by Optical Emission Spectroscopy (OES). The OES monitors a reactive radical species, denoted by $R$, whose line intensity is known to be proportional to its spatially averaged gas-phase concentration. The reactor contains a uniform plasma where the volumetric generation rate of $R$ is approximately constant during the final phase of the etch. The surfaces (wafer and chamber walls) act as sinks for $R$ via a first-order heterogeneous uptake process.\n\nStarting from first principles, construct a spatially averaged dynamic balance for the total moles $N_{R}(t)$ of $R$ in the reactor and define a dimensionless group that quantifies the ratio of the characteristic surface-reaction capacity to the characteristic molar throughput. In particular, assume:\n\n- The reactor volume is $V$ and the total available reactive surface area is $A_{s}$.\n- The volumetric generation rate of $R$ is a constant $\\dot{n}$ with units $\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-3}$.\n- The heterogeneous uptake flux of $R$ to the surfaces is first-order in the spatially averaged concentration and can be represented by an effective molar rate coefficient $k_{s}$ with units $\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-2}$ (this coefficient embodies both the kinetic coefficient and the prevailing baseline concentration during the last segment of the etch, so that the net consumption rate is $k_{s}A_{s}$).\n- Gas flow and pumping set a finite residence time, but for the purpose of isolating the competition between generation and surface reaction in determining the OES endpoint signal formation, neglect explicit outflow of $R$ in the balance and model the throughput by the volumetric generation term.\n\nDerive, from the species balance and characteristic-time arguments, a Damköhler number $\\mathrm{Da}$ that compares the maximum surface reaction capacity to the molar throughput supplied to the reactor. Then evaluate this $\\mathrm{Da}$ for the reactor with the following parameters:\n- $V = 2.50 \\times 10^{-2}\\,\\mathrm{m}^{3}$,\n- $A_{s} = 1.50\\,\\mathrm{m}^{2}$,\n- $\\dot{n} = 2.00 \\times 10^{-1}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-3}$,\n- $k_{s} = 5.00 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-2}$.\n\nRound your computed Damköhler number to three significant figures and report it as a dimensionless quantity. Finally, using the derived dimensionless group, discuss which regime (reaction-limited or transport-limited) is expected to dominate the formation of the endpoint OES signal for the given reactor and parameters, and justify the conclusion from first principles without invoking empirical shortcut formulas. Your final numeric answer should be only the Damköhler number value, dimensionless, rounded to the specified significant figures.",
            "solution": "The problem statement has been validated and is deemed scientifically grounded, well-posed, and objective. It provides a self-contained, consistent set of definitions, assumptions, and data to model a simplified yet physically relevant scenario in plasma etch process control. The problem is solvable as stated.\n\nThe analysis proceeds in three parts: first, the derivation of the species molar balance; second, the definition and calculation of the requested dimensionless group; and third, the physical interpretation of this group to determine the rate-limiting regime.\n\n**Part 1: Spatially Averaged Species Balance**\n\nThe dynamic balance for the total moles of a species $R$, denoted as $N_{R}(t)$, within a control volume $V$ is given by the general conservation equation:\n$$\n\\frac{dN_{R}(t)}{dt} = (\\text{Molar flow rate in}) - (\\text{Molar flow rate out}) + (\\text{Total rate of generation}) - (\\text{Total rate of consumption})\n$$\nThe problem specifies the following terms for this balance:\n-   **Accumulation Rate**: The rate of change of the total moles of $R$ in the reactor, which is $\\frac{dN_{R}(t)}{dt}$.\n-   **Flow Rates**: The problem explicitly instructs to \"neglect explicit outflow of $R$\". No inflow of $R$ is mentioned. Therefore, the flow terms are zero.\n-   **Generation Rate**: The volumetric generation rate of $R$ is a constant, $\\dot{n}$, with units of $\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-3}$. For a uniform plasma in a reactor of volume $V$, the total molar generation rate is $R_{gen} = \\dot{n}V$.\n-   **Consumption Rate**: The species $R$ is consumed at the surfaces (wafer and walls) with total area $A_s$. The problem states that the \"net consumption rate is $k_{s}A_{s}$\", where $k_s$ is an effective molar rate coefficient. Thus, the total molar consumption rate is $R_{surf} = k_{s}A_{s}$.\n\nSubstituting these terms into the general balance equation yields the spatially averaged dynamic balance for the total moles $N_{R}(t)$:\n$$\n\\frac{dN_{R}(t)}{dt} = \\dot{n}V - k_{s}A_{s}\n$$\nThis ordinary differential equation describes the time evolution of the total moles of the radical species $R$ in the reactor volume under the given assumptions. The OES signal intensity is proportional to the spatially averaged concentration $C_R(t) = \\frac{N_R(t)}{V}$, so the behavior of $N_R(t)$ directly governs the OES signal.\n\n**Part 2: The Damköhler Number ($\\mathrm{Da}$)**\n\nThe problem requests the definition and evaluation of a dimensionless group, the Damköhler number $\\mathrm{Da}$, that \"quantifies the ratio of the characteristic surface-reaction capacity to the characteristic molar throughput\".\n\nBased on our analysis for the species balance:\n-   The **characteristic surface-reaction capacity** is the total rate at which the surfaces can consume the species $R$. As defined in the problem, this is $R_{surf} = k_{s}A_{s}$.\n-   The **characteristic molar throughput** is to be modeled by the volumetric generation term. This is the total rate at which species $R$ is supplied to the reactor volume, $R_{gen} = \\dot{n}V$.\n\nThe Damköhler number is the ratio of these two characteristic rates:\n$$\n\\mathrm{Da} = \\frac{\\text{Characteristic Surface-Reaction Capacity}}{\\text{Characteristic Molar Throughput}} = \\frac{k_{s}A_{s}}{\\dot{n}V}\n$$\nThis dimensionless number compares the maximum rate of species removal by surface reactions to the rate of species generation in the plasma.\n\nWe now evaluate this number using the provided parameters:\n-   $V = 2.50 \\times 10^{-2}\\,\\mathrm{m}^{3}$\n-   $A_{s} = 1.50\\,\\mathrm{m}^{2}$\n-   $\\dot{n} = 2.00 \\times 10^{-1}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-3}$\n-   $k_{s} = 5.00 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-2}$\n\nFirst, calculate the numerator (surface-reaction capacity):\n$$\nk_{s}A_{s} = (5.00 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-2}) \\times (1.50\\,\\mathrm{m}^{2}) = 7.50 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\n$$\nNext, calculate the denominator (molar throughput/generation):\n$$\n\\dot{n}V = (2.00 \\times 10^{-1}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\\,\\mathrm{m}^{-3}) \\times (2.50 \\times 10^{-2}\\,\\mathrm{m}^{3}) = 5.00 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}\n$$\nFinally, compute the ratio to find $\\mathrm{Da}$:\n$$\n\\mathrm{Da} = \\frac{7.50 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}}{5.00 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}} = 1.50\n$$\nThe problem requires rounding to three significant figures, and the result is already in this form. The calculated Damköhler number is $1.50$.\n\n**Part 3: Interpretation of the Dominant Regime**\n\nThe Damköhler number provides insight into the rate-limiting process for the system. We can rewrite the species balance equation in terms of $\\mathrm{Da}$:\n$$\n\\frac{dN_R(t)}{dt} = \\dot{n}V \\left(1 - \\frac{k_s A_s}{\\dot{n}V}\\right) = \\dot{n}V(1 - \\mathrm{Da})\n$$\nThe value of $\\mathrm{Da}$ determines the sign and magnitude of the rate of change of the radical concentration, which in turn dictates the behavior of the OES signal.\n\n-   If $\\mathrm{Da} \\ll 1$: This implies $k_s A_s \\ll \\dot{n}V$. The generation rate far exceeds the surface consumption capacity. The accumulation term $\\frac{dN_R}{dt}$ would be large and positive, causing the concentration of $R$ to increase. The bottleneck in the overall process is the slow surface reaction. This is a **reaction-limited** regime.\n-   If $\\mathrm{Da} \\gg 1$: This implies $k_s A_s \\gg \\dot{n}V$. The surface consumption capacity far exceeds the generation rate. The accumulation term $\\frac{dN_R}{dt}$ would be large and negative, causing the concentration of $R$ to decrease rapidly. The species is consumed by the surface almost as soon as it is generated. The overall rate of consumption is limited not by the surface's reactivity, but by the rate at which the species is generated and transported to the surface. This is a **transport-limited** (or supply-limited) regime.\n\nIn this problem, the calculated value is $\\mathrm{Da} = 1.50$. Since $\\mathrm{Da} > 1$, the characteristic surface-reaction capacity ($7.50 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}$) is greater than the characteristic molar throughput from generation ($5.00 \\times 10^{-3}\\,\\mathrm{mol}\\,\\mathrm{s}^{-1}$).\n\nFrom first principles, the overall process rate is governed by its slowest step. Here, the surfaces are capable of consuming radicals faster than the plasma can produce them. Therefore, the rate at which radicals are ultimately consumed is limited by their rate of generation and transport to the surfaces. The surfaces are \"starved\" for reactant. Consequently, the formation of the OES endpoint signal, which depends on the change in radical concentration, is dominated by the **transport-limited** regime (more precisely, a supply-limited regime, where supply includes both generation and transport). The negative sign of $\\frac{dN_R}{dt} = \\dot{n}V(1-1.50) = -0.50 \\dot{n}V$ signifies a decreasing concentration of $R$, which is a typical OES endpoint signature when a more reactive underlying layer is exposed. The dynamics of this decrease are limited by the supply of the species.",
            "answer": "$$\\boxed{1.50}$$"
        },
        {
            "introduction": "An accurate physical model of the plasma is only half the story; the measurement system itself can introduce significant artifacts. A critical, yet often overlooked, aspect of signal integrity is the behavior of the photodetector and its associated electronics under varying signal levels. This exercise  explores the practical consequences of detector saturation, a common issue where an intense signal exceeds the dynamic range of the sensor. You will quantify the timing bias—a systematic error in the detected endpoint—caused by this signal clipping and devise a strategy to mitigate it, highlighting the importance of modeling the entire signal chain from plasma to processor.",
            "id": "4124331",
            "problem": "A plasma etch endpoint is detected using Optical Emission Spectroscopy (OES), where a photodetector measures the emission intensity associated with a volatile etch product. The underlying process dynamics are modeled as follows: emission intensity remains approximately constant at a pre-endpoint level, then transitions at the true endpoint time to a post-endpoint exponential decay. Specifically, assume the true emission intensity is $$I_{\\text{true}}(t) = \\begin{cases} I_{0}, & t < t_{e}, \\\\ I_{0} \\exp\\!\\big(-\\frac{t - t_{e}}{\\tau}\\big), & t \\ge t_{e}, \\end{cases}$$ where $I_{0}$ is the pre-endpoint emission intensity, $t_{e}$ is the true endpoint time, and $\\tau$ is the decay time constant arising from mass transport and recombination kinetics.\n\nThe detector front-end consists of a transimpedance amplifier with gain $$G$$ converting optical emission intensity to voltage $$V(t) = G I_{\\text{true}}(t)$$, followed by an Analog-to-Digital Converter (ADC) with full-scale voltage $$V_{\\text{FS}}$$. The measured signal is hard-clipped at the ADC limit: $$V_{\\text{meas}}(t) = \\min\\!\\big(V(t), V_{\\text{FS}}\\big).$$ The endpoint detection algorithm triggers when the measured signal falls to a fixed fraction $$\\alpha$$ of its pre-endpoint measured plateau $$V_{\\text{pre}}$$, i.e., at the first time $$t$$ such that $$V_{\\text{meas}}(t) = \\alpha V_{\\text{pre}}.$$\n\nGiven the parameter values $$I_{0} = 1.5 \\times 10^{-8} \\ \\text{A}, \\quad G = 5.0 \\times 10^{7} \\ \\text{V/A}, \\quad V_{\\text{FS}} = 0.50 \\ \\text{V}, \\quad \\tau = 0.15 \\ \\text{s}, \\quad \\alpha = 0.40,$$ quantify the endpoint timing bias induced by detector saturation, defined as $$\\Delta t = t_{\\text{sat}} - t_{\\text{ideal}},$$ where $$t_{\\text{sat}}$$ is the algorithm’s trigger time when the pre-endpoint measured plateau is clipped at $$V_{\\text{FS}}$$, and $$t_{\\text{ideal}}$$ is the algorithm’s trigger time in the hypothetical unsaturated case $$V_{\\text{pre}} = G I_{0} \\le V_{\\text{FS}}.$$\n\nThen, propose and quantify a dynamic range management strategy that prevents clipping by introducing an input attenuation factor $$a$$ (dimensionless) before the transimpedance amplifier so that the pre-endpoint measured plateau equals a chosen fraction $$\\gamma = 0.80$$ of the ADC full-scale, i.e., $$a G I_{0} = \\gamma V_{\\text{FS}}.$$ Compute the required attenuation factor $$a.$$\n\nProvide your final answer as a two-entry row matrix $$\\begin{pmatrix} \\Delta t & a \\end{pmatrix}$$. Express $$\\Delta t$$ in seconds and $$a$$ as dimensionless. Round both quantities to four significant figures.",
            "solution": "The problem is first validated to ensure it is scientifically grounded, well-posed, and objective.\n\n**Step 1: Extract Givens**\n- True emission intensity model: $$I_{\\text{true}}(t) = \\begin{cases} I_{0}, & t < t_{e}, \\\\ I_{0} \\exp\\!\\big(-\\frac{t - t_{e}}{\\tau}\\big), & t \\ge t_{e}, \\end{cases}$$\n- Pre-endpoint emission intensity: $$I_{0} = 1.5 \\times 10^{-8} \\ \\text{A}$$\n- Transimpedance amplifier gain: $$G = 5.0 \\times 10^{7} \\ \\text{V/A}$$\n- ADC full-scale voltage: $$V_{\\text{FS}} = 0.50 \\ \\text{V}$$\n- Decay time constant: $$\\tau = 0.15 \\ \\text{s}$$\n- Endpoint detection trigger fraction: $$\\alpha = 0.40$$\n- Measured signal with clipping: $$V_{\\text{meas}}(t) = \\min\\!\\big(G I_{\\text{true}}(t), V_{\\text{FS}}\\big)$$\n- Endpoint detection trigger condition: $$V_{\\text{meas}}(t) = \\alpha V_{\\text{pre}}$$, where $$V_{\\text{pre}}$$ is the pre-endpoint measured plateau.\n- Endpoint timing bias definition: $$\\Delta t = t_{\\text{sat}} - t_{\\text{ideal}}$$\n- $$t_{\\text{sat}}$$: trigger time with signal clipping.\n- $$t_{\\text{ideal}}$$: trigger time without signal clipping.\n- Dynamic range management attenuation factor: $$a$$\n- Attenuation condition: $$a G I_{0} = \\gamma V_{\\text{FS}}$$\n- Chosen fraction of ADC full-scale: $$\\gamma = 0.80$$\n- Required output: A two-entry row matrix $$\\begin{pmatrix} \\Delta t & a \\end{pmatrix}$$ with values rounded to four significant figures.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is scientifically grounded, describing a standard model for endpoint detection using Optical Emission Spectroscopy in plasma etching, a key process in semiconductor manufacturing. The model components, including the signal shape (constant followed by exponential decay) and detector electronics (transimpedance amplifier with ADC clipping), are physically realistic and well-established. The problem is well-posed, providing all necessary constant values and clear definitions for the quantities to be calculated. The language is objective and precise. The parameters are consistent and lead to the physical situation of interest, namely detector saturation, as the potential pre-endpoint voltage $$G I_{0} = (5.0 \\times 10^{7}) \\times (1.5 \\times 10^{-8}) = 0.75 \\ \\text{V}$$ exceeds the ADC full-scale voltage $$V_{\\text{FS}} = 0.50 \\ \\text{V}$$. The problem is formalizable and directly relevant to the specified topic.\n\n**Step 3: Verdict and Action**\nThe problem is deemed valid. A full solution will be provided.\n\nThe solution is broken down into two parts: first, the calculation of the endpoint timing bias $$\\Delta t$$, and second, the calculation of the required attenuation factor $$a$$.\n\n**Part 1: Calculation of the Endpoint Timing Bias $$\\Delta t$$**\n\nThe timing bias is defined as $$\\Delta t = t_{\\text{sat}} - t_{\\text{ideal}}$$. We must find expressions for the ideal trigger time $$t_{\\text{ideal}}$$ and the saturated trigger time $$t_{\\text{sat}}$$.\n\n**Ideal Case (Unsaturated):**\nIn this hypothetical case, the detector does not saturate, meaning $$G I_{0} \\le V_{\\text{FS}}$$. The pre-endpoint voltage $$V(t)$$ for $$t < t_e$$ is constant at $$V(t) = G I_0$$. Therefore, the pre-endpoint measured plateau is $$V_{\\text{pre, ideal}} = G I_0$$.\nThe endpoint detection algorithm triggers at time $$t_{\\text{ideal}}$$ when the signal falls to $$\\alpha V_{\\text{pre, ideal}}$$. The decaying part of the signal for $$t \\ge t_e$$ is $$V(t) = G I_{0} \\exp\\!\\big(-\\frac{t - t_{e}}{\\tau}\\big)$$.\nThe trigger condition is:\n$$G I_{0} \\exp\\!\\big(-\\frac{t_{\\text{ideal}} - t_{e}}{\\tau}\\big) = \\alpha V_{\\text{pre, ideal}} = \\alpha (G I_{0})$$\nDividing both sides by $$G I_0$$ yields:\n$$\\exp\\!\\big(-\\frac{t_{\\text{ideal}} - t_{e}}{\\tau}\\big) = \\alpha$$\nTaking the natural logarithm of both sides:\n$$-\\frac{t_{\\text{ideal}} - t_{e}}{\\tau} = \\ln(\\alpha)$$\nSolving for $$t_{\\text{ideal}}$$, we find the time delay relative to the true endpoint $$t_e$$:\n$$t_{\\text{ideal}} - t_e = -\\tau \\ln(\\alpha) = \\tau \\ln\\left(\\frac{1}{\\alpha}\\right)$$\n$$t_{\\text{ideal}} = t_{e} + \\tau \\ln\\left(\\frac{1}{\\alpha}\\right)$$\n\n**Saturated Case (Clipped):**\nIn this case, the potential pre-endpoint voltage $$G I_0$$ is greater than the ADC full-scale voltage $$V_{\\text{FS}}$$. So, for $$t < t_e$$, the measured signal is clipped: $$V_{\\text{meas}}(t) = V_{\\text{FS}}$$. The pre-endpoint measured plateau is thus $$V_{\\text{pre, sat}} = V_{\\text{FS}}$$.\nThe algorithm triggers at time $$t_{\\text{sat}}$$ when the measured signal falls to $$\\alpha V_{\\text{pre, sat}} = \\alpha V_{\\text{FS}}$$.\nAt the trigger point, the signal is decaying and its value is below $$V_{\\text{FS}}$$, so $$V_{\\text{meas}}(t_{\\text{sat}})$$ is simply the unclipped value of the voltage at that time. The trigger condition is:\n$$G I_{0} \\exp\\!\\big(-\\frac{t_{\\text{sat}} - t_{e}}{\\tau}\\big) = \\alpha V_{\\text{FS}}$$\nTo solve for $$t_{\\text{sat}}$$, we first isolate the exponential term:\n$$\\exp\\!\\big(-\\frac{t_{\\text{sat}} - t_{e}}{\\tau}\\big) = \\frac{\\alpha V_{\\text{FS}}}{G I_{0}}$$\nTaking the natural logarithm of both sides:\n$$-\\frac{t_{\\text{sat}} - t_{e}}{\\tau} = \\ln\\left(\\frac{\\alpha V_{\\text{FS}}}{G I_{0}}\\right)$$\nSolving for $$t_{\\text{sat}}$$:\n$$t_{\\text{sat}} - t_e = -\\tau \\ln\\left(\\frac{\\alpha V_{\\text{FS}}}{G I_{0}}\\right) = \\tau \\ln\\left(\\frac{G I_{0}}{\\alpha V_{\\text{FS}}}\\right)$$\n$$t_{\\text{sat}} = t_{e} + \\tau \\ln\\left(\\frac{G I_{0}}{\\alpha V_{\\text{FS}}}\\right)$$\n\n**Calculating the Bias $$\\Delta t$$:**\nThe timing bias is the difference between the saturated and ideal trigger times:\n$$\\Delta t = t_{\\text{sat}} - t_{\\text{ideal}}$$\n$$\\Delta t = \\left(t_{e} + \\tau \\ln\\left(\\frac{G I_{0}}{\\alpha V_{\\text{FS}}}\\right)\\right) - \\left(t_{e} + \\tau \\ln\\left(\\frac{1}{\\alpha}\\right)\\right)$$\nThe $$t_e$$ terms cancel out. We can factor out $$\\tau$$:\n$$\\Delta t = \\tau \\left[ \\ln\\left(\\frac{G I_{0}}{\\alpha V_{\\text{FS}}}\\right) - \\ln\\left(\\frac{1}{\\alpha}\\right) \\right]$$\nUsing the logarithm property $$\\ln(x) - \\ln(y) = \\ln(x/y)$$:\n$$\\Delta t = \\tau \\ln\\left(\\frac{G I_{0}/(\\alpha V_{\\text{FS}})}{1/\\alpha}\\right) = \\tau \\ln\\left(\\frac{G I_{0}}{\\alpha V_{\\text{FS}}} \\cdot \\alpha\\right)$$\n$$\\Delta t = \\tau \\ln\\left(\\frac{G I_{0}}{V_{\\text{FS}}}\\right)$$\nThis remarkably simple result shows the bias depends only on the time constant and the degree of saturation.\nNow, we substitute the numerical values:\n$$I_{0} = 1.5 \\times 10^{-8} \\ \\text{A}$$\n$$G = 5.0 \\times 10^{7} \\ \\text{V/A}$$\n$$V_{\\text{FS}} = 0.50 \\ \\text{V}$$\n$$\\tau = 0.15 \\ \\text{s}$$\nFirst, compute the unsaturated pre-endpoint voltage $$G I_{0}$$:\n$$G I_{0} = (5.0 \\times 10^{7} \\ \\text{V/A}) \\times (1.5 \\times 10^{-8} \\ \\text{A}) = 0.75 \\ \\text{V}$$\nNow, compute $$\\Delta t$$:\n$$\\Delta t = (0.15 \\ \\text{s}) \\times \\ln\\left(\\frac{0.75 \\ \\text{V}}{0.50 \\ \\text{V}}\\right) = 0.15 \\times \\ln(1.5)$$\n$$\\Delta t \\approx 0.15 \\times 0.405465 = 0.06081975... \\ \\text{s}$$\nRounding to four significant figures, $$\\Delta t = 0.06082 \\ \\text{s}$$.\n\n**Part 2: Calculation of the Attenuation Factor $$a$$**\n\nThe goal is to adjust the gain such that the pre-endpoint signal level is at a fraction $$\\gamma$$ of the ADC's full scale, thereby preventing saturation. An attenuation factor $$a$$ is introduced before the amplifier, so the effective input intensity is $$a I_{0}$$. The resulting pre-endpoint voltage is $$V'_{\\text{pre}} = G (a I_0)$$.\nThe condition is:\n$$V'_{\\text{pre}} = \\gamma V_{\\text{FS}}$$\nSo, we must solve the following equation for $$a$$:\n$$a G I_{0} = \\gamma V_{\\text{FS}}$$\n$$a = \\frac{\\gamma V_{\\text{FS}}}{G I_{0}}$$\nSubstitute the given numerical values:\n$$\\gamma = 0.80$$\nWe have already calculated $$G I_{0} = 0.75 \\ \\text{V}$$ and are given $$V_{\\text{FS}} = 0.50 \\ \\text{V}$$.\n$$a = \\frac{0.80 \\times 0.50 \\ \\text{V}}{0.75 \\ \\text{V}} = \\frac{0.40}{0.75}$$\n$$a = \\frac{40}{75} = \\frac{8}{15} \\approx 0.533333...$$\nRounding to four significant figures, $$a = 0.5333$$. This is a dimensionless quantity.\n\nWe are asked to provide the final answer as a two-entry row matrix $$\\begin{pmatrix} \\Delta t & a \\end{pmatrix}$$.\nWith our calculated and rounded values, this is $$\\begin{pmatrix} 0.06082 & 0.5333 \\end{pmatrix}$$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.06082 & 0.5333\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Ultimately, the goal of endpoint detection is to make a reliable binary decision—has the endpoint occurred or not?—from a continuous, noisy signal. This final practice  moves from physical modeling to statistical decision theory, treating endpoint detection as a classification problem. You will synthesize realistic OES data, apply standard denoising techniques, and then use the powerful Receiver Operating Characteristic (ROC) analysis framework to find an optimal decision threshold. This exercise demonstrates how to systematically quantify and maximize the performance of an endpoint algorithm, a technique with deep parallels to diagnostic testing in fields like medicine.",
            "id": "4124311",
            "problem": "You are given a modeling task for Optical Emission Spectroscopy (OES) endpoint detection in semiconductor manufacturing. The endpoint corresponds to the time at which a reactive species in the plasma signal undergoes a transition induced by process completion, typically observed as a drop in OES intensity. You will synthesize labeled, physically plausible OES signals from a principled formation model, apply a denoising filter, construct Receiver Operating Characteristic (ROC) curves for a family of binary classifiers defined by thresholding the denoised signal, and select the threshold that maximizes Youden’s J statistic. Your program must implement the entire pipeline deterministically and output the final results in the specified format.\n\nFundamental base:\n- Optical Emission Spectroscopy (OES) intensity can be modeled as a smooth transition in time from a pre-endpoint state to a post-endpoint state, corrupted by measurement noise and process oscillations.\n- A binary classifier for endpoint status can be constructed by thresholding the denoised OES intensity. Ground truth labels are defined from the known endpoint times.\n- The Receiver Operating Characteristic (ROC) curve relates the true positive rate to the false positive rate across all thresholds.\n- Youden’s J statistic is defined from sensitivity (true positive rate) and false positive rate and is used to select an optimal threshold.\n\nSignal formation model:\nFor each run $r$ with endpoint time $t_{\\mathrm{EP}}^{(r)}$, define $t \\in [0,T]$ and sampling rate $f_s$. The discrete times are $t_i = i \\Delta t$ for $i = 0,1,\\dots,N-1$, where $\\Delta t = 1/f_s$ and $N = \\lfloor T f_s \\rfloor$. The OES intensity is\n$$\nx^{(r)}(t_i) = I_0 + a\\, t_i - \\Delta I \\cdot s\\big(t_i - t_{\\mathrm{EP}}^{(r)}\\big) + A \\sin\\big(2\\pi f\\, t_i\\big) + \\epsilon^{(r)}(t_i),\n$$\nwhere $I_0$ is the pre-endpoint baseline intensity, $a$ is a linear drift coefficient, $\\Delta I$ is the drop magnitude, $s(u) = \\frac{1}{1 + e^{-u/\\tau}}$ is a logistic step with time constant $\\tau$, $A$ and $f$ are the amplitude and frequency of plasma flicker oscillations, and $\\epsilon^{(r)}(t_i)$ is zero-mean Gaussian noise with standard deviation $\\sigma$. Use a fixed pseudo-random seed per test case to generate $\\epsilon^{(r)}(t_i)$ deterministically.\n\nGround truth labeling:\nFor each run $r$, define binary labels $y^{(r)}(t_i)$ by\n$$\ny^{(r)}(t_i) = \\begin{cases}\n0, & t_i < t_{\\mathrm{EP}}^{(r)},\\\\\n1, & t_i \\ge t_{\\mathrm{EP}}^{(r)}.\n\\end{cases}\n$$\n\nDenoising:\nLet $\\tilde{x}^{(r)}(t_i)$ be the denoised signal obtained by applying a zero-phase, local polynomial smoother to $x^{(r)}(t_i)$. In implementation, use a Savitzky–Golay filter with polynomial order $p = 3$ and an odd window length chosen to cover approximately $0.15$ seconds, adjusted to be at least $5$ samples and strictly less than $N$.\n\nThresholding classifier and ROC:\nFor a threshold $\\theta$, define the classifier at time $t_i$ as\n$$\n\\hat{y}^{(r)}_\\theta(t_i) = \\begin{cases}\n1, & \\tilde{x}^{(r)}(t_i) \\le \\theta,\\\\\n0, & \\tilde{x}^{(r)}(t_i) > \\theta.\n\\end{cases}\n$$\nAggregate all samples from all runs into a single set. For any $\\theta$, compute:\n- True positives $TP(\\theta)$: number of samples with $\\hat{y}^{(r)}_\\theta(t_i) = 1$ and $y^{(r)}(t_i) = 1$.\n- False positives $FP(\\theta)$: number of samples with $\\hat{y}^{(r)}_\\theta(t_i) = 1$ and $y^{(r)}(t_i) = 0$.\n- True negatives $TN(\\theta)$ and false negatives $FN(\\theta)$ defined analogously.\nDefine positives $P = TP(\\theta) + FN(\\theta)$ and negatives $N = TN(\\theta) + FP(\\theta)$ as constants independent of $\\theta$ once labels are fixed. Then the true positive rate (sensitivity) and false positive rate are\n$$\n\\mathrm{TPR}(\\theta) = \\frac{TP(\\theta)}{P}, \\quad \\mathrm{FPR}(\\theta) = \\frac{FP(\\theta)}{N}.\n$$\nYouden’s J statistic is\n$$\nJ(\\theta) = \\mathrm{TPR}(\\theta) - \\mathrm{FPR}(\\theta).\n$$\n\nSelection:\nSweep $\\theta$ over a grid of $M$ thresholds uniformly spanning the global range of the denoised intensity across all runs, i.e., between $\\min_{r,i} \\tilde{x}^{(r)}(t_i)$ and $\\max_{r,i} \\tilde{x}^{(r)}(t_i)$. Use $M = 301$ thresholds. Select $\\theta^\\star$ that maximizes $J(\\theta)$. In case of ties in $J(\\theta)$, select the $\\theta$ with the largest $\\mathrm{TPR}(\\theta)$. If ties remain, select the smallest $\\theta$ among those.\n\nUnits:\n- Time must be expressed in seconds ($\\mathrm{s}$).\n- Sampling rate in Hertz ($\\mathrm{Hz}$).\n- OES intensity in arbitrary units ($\\mathrm{a.u.}$).\n- Drift in $\\mathrm{a.u.}/\\mathrm{s}$.\n- Noise standard deviation in $\\mathrm{a.u.}$.\n- Frequency in Hertz ($\\mathrm{Hz}$).\n\nTest suite:\nImplement the pipeline for the following parameter sets. Each test case aggregates all runs in the case when computing ROC and selecting $\\theta^\\star$.\n\n- Test Case $1$ (clear drop, moderate noise):\n    - Number of runs $R = 4$.\n    - Duration $T = 5\\,\\mathrm{s}$.\n    - Sampling rate $f_s = 200\\,\\mathrm{Hz}$.\n    - Endpoint times $\\big[t_{\\mathrm{EP}}^{(r)}\\big] = [2.0,\\,2.5,\\,3.0,\\,2.7]\\,\\mathrm{s}$.\n    - Baseline $I_0 = 1.0\\,\\mathrm{a.u.}$.\n    - Drop magnitude $\\Delta I = 0.4\\,\\mathrm{a.u.}$.\n    - Time constant $\\tau = 0.05\\,\\mathrm{s}$.\n    - Drift $a = 0.0\\,\\mathrm{a.u.}/\\mathrm{s}$.\n    - Flicker amplitude $A = 0.02\\,\\mathrm{a.u.}$, frequency $f = 6\\,\\mathrm{Hz}$.\n    - Noise standard deviation $\\sigma = 0.03\\,\\mathrm{a.u.}$.\n    - Pseudo-random seed $0$.\n\n- Test Case $2$ (small drop, similar noise):\n    - Number of runs $R = 4$.\n    - Duration $T = 5\\,\\mathrm{s}$.\n    - Sampling rate $f_s = 200\\,\\mathrm{Hz}$.\n    - Endpoint times $\\big[t_{\\mathrm{EP}}^{(r)}\\big] = [2.5,\\,2.5,\\,2.5,\\,2.5]\\,\\mathrm{s}$.\n    - Baseline $I_0 = 1.0\\,\\mathrm{a.u.}$.\n    - Drop magnitude $\\Delta I = 0.05\\,\\mathrm{a.u.}$.\n    - Time constant $\\tau = 0.05\\,\\mathrm{s}$.\n    - Drift $a = 0.0\\,\\mathrm{a.u.}/\\mathrm{s}$.\n    - Flicker amplitude $A = 0.01\\,\\mathrm{a.u.}$, frequency $f = 8\\,\\mathrm{Hz}$.\n    - Noise standard deviation $\\sigma = 0.05\\,\\mathrm{a.u.}$.\n    - Pseudo-random seed $0$.\n\n- Test Case $3$ (heavy noise, drift, endpoints near boundaries):\n    - Number of runs $R = 3$.\n    - Duration $T = 5\\,\\mathrm{s}$.\n    - Sampling rate $f_s = 200\\,\\mathrm{Hz}$.\n    - Endpoint times $\\big[t_{\\mathrm{EP}}^{(r)}\\big] = [0.3,\\,4.7,\\,2.0]\\,\\mathrm{s}$.\n    - Baseline $I_0 = 1.0\\,\\mathrm{a.u.}$.\n    - Drop magnitude $\\Delta I = 0.3\\,\\mathrm{a.u.}$.\n    - Time constant $\\tau = 0.07\\,\\mathrm{s}$.\n    - Drift $a = 0.02\\,\\mathrm{a.u.}/\\mathrm{s}$.\n    - Flicker amplitude $A = 0.03\\,\\mathrm{a.u.}$, frequency $f = 5\\,\\mathrm{Hz}$.\n    - Noise standard deviation $\\sigma = 0.10\\,\\mathrm{a.u.}$.\n    - Pseudo-random seed $123$.\n\nRequired final output:\nYour program should produce a single line of output containing the results as a list of lists, one per test case, where each inner list contains the selected threshold and the corresponding Youden’s $J$ statistic, both as real numbers in $\\mathrm{a.u.}$ for the threshold and unitless for $J$. The format must be a comma-separated list enclosed in square brackets, for example:\n$$\n\\text{[ [}\\theta^\\star_1\\text{, }J^\\star_1\\text{], [}\\theta^\\star_2\\text{, }J^\\star_2\\text{], [}\\theta^\\star_3\\text{, }J^\\star_3\\text{] ]}\n$$\nYour implementation must be self-contained, require no input, and follow the execution environment constraints.",
            "solution": "The problem requires the implementation of a complete computational pipeline for Optical Emission Spectroscopy (OES) endpoint detection. This involves synthesizing physically plausible OES signals based on a provided model, applying a denoising filter, and then determining an optimal classification threshold by constructing a Receiver Operating Characteristic (ROC) curve and maximizing Youden’s J statistic. The process is to be executed for three distinct test cases.\n\nThe methodological approach is deterministic and follows a sequence of well-defined steps:\n\n1.  **Signal Formation**: For each run $r$ within a test case, a time-series signal $x^{(r)}(t_i)$ is generated. This signal is a composite of several components representing physical phenomena in a plasma etching process.\n2.  **Denoising**: The synthetic signal $x^{(r)}(t_i)$, which includes noise, is processed using a Savitzky-Golay filter to produce a smoothed signal $\\tilde{x}^{(r)}(t_i)$.\n3.  **Classification and Evaluation**: All generated data points across all runs for a given test case are aggregated. A binary classifier based on a variable threshold $\\theta$ is applied to the denoised signal. By varying $\\theta$, the True Positive Rate ($\\mathrm{TPR}$) and False Positive Rate ($\\mathrm{FPR}$) are calculated, forming an ROC curve.\n4.  **Optimal Threshold Selection**: Youden's J statistic, $J(\\theta) = \\mathrm{TPR}(\\theta) - \\mathrm{FPR}(\\theta)$, is computed for each threshold. The optimal threshold $\\theta^\\star$ is selected as the one that maximizes $J(\\theta)$, with specific tie-breaking rules.\n\nBelow is a detailed, step-by-step description of the implementation.\n\n**Step 1: Signal Generation**\nFor each test case and for each run $r$ from $1$ to $R$, we first establish the time domain. Given a total duration $T$ and a sampling rate $f_s$, the time step is $\\Delta t = 1/f_s$. The discrete time points are $t_i = i \\Delta t$ for $i = 0, 1, \\dots, N-1$, where the total number of samples is $N = \\lfloor T f_s \\rfloor$.\n\nThe OES intensity signal $x^{(r)}(t_i)$ is synthesized according to the model:\n$$\nx^{(r)}(t_i) = I_0 + a\\, t_i - \\Delta I \\cdot s\\big(t_i - t_{\\mathrm{EP}}^{(r)}\\big) + A \\sin\\big(2\\pi f\\, t_i\\big) + \\epsilon^{(r)}(t_i)\n$$\nEach term is computed as follows:\n-   **Baseline and Drift**: The term $I_0 + a\\, t_i$ models the initial intensity $I_0$ with a linear drift of coefficient $a$.\n-   **Endpoint Transition**: The term $-\\Delta I \\cdot s(t_i - t_{\\mathrm{EP}}^{(r)})$ models the drop in intensity at the endpoint. The drop has a magnitude of $\\Delta I$. The transition's shape is governed by the logistic function $s(u) = \\frac{1}{1 + e^{-u/\\tau}}$, which creates a smooth step centered at the endpoint time $t_{\\mathrm{EP}}^{(r)}$ with a characteristic duration controlled by the time constant $\\tau$.\n-   **Oscillations**: The term $A \\sin(2\\pi f t_i)$ models periodic plasma flicker with amplitude $A$ and frequency $f$.\n-   **Noise**: The term $\\epsilon^{(r)}(t_i)$ represents measurement noise, modeled as a sequence of independent and identically distributed random variables from a zero-mean Gaussian distribution with standard deviation $\\sigma$. For deterministic reproducibility, a pseudo-random number generator is seeded with the specific value provided for each test case.\n\n**Step 2: Ground Truth Labeling**\nConcurrent with signal generation, ground truth labels $y^{(r)}(t_i)$ are created for each time point. These labels define the true state of the process, which is \"pre-endpoint\" or \"post-endpoint\". According to the problem, the state transitions at the endpoint time $t_{\\mathrm{EP}}^{(r)}$:\n$$\ny^{(r)}(t_i) = \\begin{cases}\n0, & t_i < t_{\\mathrm{EP}}^{(r)} \\quad \\text{(pre-endpoint)}\\\\\n1, & t_i \\ge t_{\\mathrm{EP}}^{(r)} \\quad \\text{(post-endpoint)}\n\\end{cases}\n$$\n\n**Step 3: Signal Denoising**\nThe raw, noisy signal $x^{(r)}(t_i)$ is smoothed to better reveal the underlying transition. A zero-phase Savitzky-Golay filter is employed for this purpose. The filter fits a local polynomial to the data in a moving window. The problem specifies a polynomial order of $p=3$. The window length is chosen to span approximately $0.15\\,\\mathrm{s}$. For the given sampling rate of $f_s = 200\\,\\mathrm{Hz}$, this corresponds to $0.15\\,\\mathrm{s} \\times 200\\,\\mathrm{Hz} = 30$ samples. Since the window length must be an odd integer, the next odd integer, $31$, is used. This value satisfies the constraints of being at least $5$ and strictly less than the total number of samples $N=1000$. Applying this filter to $x^{(r)}(t_i)$ yields the denoised signal $\\tilde{x}^{(r)}(t_i)$.\n\n**Step 4: Data Aggregation and Classifier Definition**\nFor each test case, the denoised signals $\\tilde{x}^{(r)}(t_i)$ and ground truth labels $y^{(r)}(t_i)$ from all $R$ runs are concatenated into single, large one-dimensional arrays. Let these be $\\tilde{x}_{\\mathrm{agg}}$ and $y_{\\mathrm{agg}}$.\n\nA simple binary classifier is defined based on a threshold $\\theta$. Since the endpoint is characterized by a drop in intensity, a sample is classified as \"post-endpoint\" (label $1$) if its intensity is below the threshold:\n$$\n\\hat{y}_{\\theta}(t_i) = \\begin{cases}\n1, & \\tilde{x}_{\\mathrm{agg}}(t_i) \\le \\theta\\\\\n0, & \\tilde{x}_{\\mathrm{agg}}(t_i) > \\theta\n\\end{cases}\n$$\n\n**Step 5: ROC Analysis and Optimal Threshold Selection**\nTo find the optimal threshold $\\theta^\\star$, we evaluate the classifier's performance over a range of possible thresholds. A grid of $M=301$ thresholds is created, uniformly spanning the range from the minimum to the maximum value of the aggregated denoised signal, $\\tilde{x}_{\\mathrm{agg}}$.\n\nFor each threshold $\\theta$ in the grid, we compute the number of true positives ($TP$), false positives ($FP$), true negatives ($TN$), and false negatives ($FN$) by comparing the predicted labels $\\hat{y}_{\\theta}$ to the ground truth labels $y_{\\mathrm{agg}}$.\n\nThe total number of actual positive instances is $P = TP + FN = \\sum y_{\\mathrm{agg}}$, and the total number of actual negative instances is $N = TN + FP = \\mathrm{length}(y_{\\mathrm{agg}}) - P$. These are constant for a given test case.\n\nThe True Positive Rate ($\\mathrm{TPR}$, or sensitivity) and False Positive Rate ($\\mathrm{FPR}$) are then calculated:\n$$\n\\mathrm{TPR}(\\theta) = \\frac{TP(\\theta)}{P}, \\quad \\mathrm{FPR}(\\theta) = \\frac{FP(\\theta)}{N}\n$$\nYouden's J statistic is computed as $J(\\theta) = \\mathrm{TPR}(\\theta) - \\mathrm{FPR}(\\theta)$.\n\nThe optimal threshold $\\theta^\\star$ is the one that maximizes $J(\\theta)$. The problem specifies a tie-breaking procedure:\n1.  If multiple thresholds yield the same maximum $J$ value, select the one with the highest $\\mathrm{TPR}$.\n2.  If a tie persists, select the smallest $\\theta$ among the candidates.\nThis search is implemented by iterating through the thresholds in increasing order and updating the best-found result ($\\theta^\\star, J(\\theta^\\star), \\mathrm{TPR}(\\theta^\\star)$) only when a strictly better set of metrics is found according to the ordered criteria.\n\nThis entire pipeline is executed for each of the three test cases, and the final result for each is the pair $[\\theta^\\star, J(\\theta^\\star)]$.",
            "answer": "[[0.80688, 0.96395], [0.97542, 0.76050], [0.82916, 0.91379]]"
        }
    ]
}
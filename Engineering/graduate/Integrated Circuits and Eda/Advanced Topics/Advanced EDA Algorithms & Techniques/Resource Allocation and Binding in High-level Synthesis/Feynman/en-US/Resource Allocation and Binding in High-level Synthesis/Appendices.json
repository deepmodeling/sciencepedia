{
    "hands_on_practices": [
        {
            "introduction": "The first step in transforming a high-level algorithm into hardware is scheduling, which assigns each operation to a specific clock cycle. Before committing to a final schedule, it is crucial to understand the available flexibility. This exercise  introduces the fundamental concepts of As-Soon-As-Possible (ASAP) and As-Late-As-Possible (ALAP) scheduling, which define the earliest and latest permissible start times for each operation. By calculating the difference between these times, known as mobility, we can quantify the scheduling freedom and identify critical operations that have no flexibility at all.",
            "id": "4293552",
            "problem": "Consider the task of scheduling a computational kernel in the context of High-Level Synthesis (HLS) within Electronic Design Automation (EDA). The kernel is represented as a Data Flow Graph (DFG) with vertices $v_1, v_2, \\dots, v_9$, each corresponding to a single operation, and directed edges encoding precedence constraints (an edge from $v_i$ to $v_j$ means that $v_j$ cannot start until $v_i$ finishes). Assume a single global clock, discrete control steps, and that all primary inputs (those not produced by operations within the DFG) are available at time $0$.\n\nOperations and latencies are as follows: each multiplication has latency $2$ cycles, each addition has latency $1$ cycle, and each subtraction has latency $1$ cycle. The operations and precedence constraints are:\n- $v_1$: multiplication, no predecessors.\n- $v_2$: multiplication, no predecessors.\n- $v_3$: addition, predecessors $v_1$ and $v_2$.\n- $v_4$: addition, predecessor $v_2$.\n- $v_5$: subtraction, predecessors $v_3$ and $v_4$.\n- $v_6$: multiplication, predecessor $v_5$.\n- $v_7$: addition, predecessor $v_3$.\n- $v_8$: addition, predecessor $v_7$.\n- $v_9$: addition, predecessors $v_6$ and $v_8$.\n\nAssume a required maximum completion time for the DFG output at $v_9$ of $T_{\\text{req}} = 9$ cycles; that is, $v_9$ must finish by time $9$.\n\nDefine the As Soon As Possible (ASAP) and As Late As Possible (ALAP) schedules for this DFG under the given latency model and required completion time, and then compute the mobility $m_i$ for each operation $v_i$ as the difference between its ALAP and ASAP start times. Finally, compute the total mobility $M = \\sum_{i=1}^{9} m_i$. Express the final value of $M$ in cycles. No rounding is necessary.",
            "solution": "The problem requires the calculation of the total mobility for a set of operations represented by a Data Flow Graph (DFG). This involves determining the As Soon As Possible (ASAP) and As Late As Possible (ALAP) schedules for each operation.\n\nFirst, the problem statement must be validated.\n\n### Step 1: Extract Givens\n-   **Vertices**: The DFG consists of nine vertices, $v_1, v_2, \\dots, v_9$.\n-   **Operations and Latencies ($L_i$)**:\n    -   Multiplication (latency $L_{mul} = 2$ cycles): operations $v_1, v_2, v_6$.\n    -   Addition (latency $L_{add} = 1$ cycle): operations $v_3, v_4, v_7, v_8, v_9$.\n    -   Subtraction (latency $L_{sub} = 1$ cycle): operation $v_5$.\n-   **Precedence Constraints**:\n    -   $v_1$: no predecessors.\n    -   $v_2$: no predecessors.\n    -   $v_3$ has predecessors $\\{v_1, v_2\\}$.\n    -   $v_4$ has predecessor $\\{v_2\\}$.\n    -   $v_5$ has predecessors $\\{v_3, v_4\\}$.\n    -   $v_6$ has predecessor $\\{v_5\\}$.\n    -   $v_7$ has predecessor $\\{v_3\\}$.\n    -   $v_8$ has predecessor $\\{v_7\\}$.\n    -   $v_9$ has predecessors $\\{v_6, v_8\\}$.\n-   **Initial Condition**: All primary inputs are available at time $t=0$.\n-   **Global Constraint**: The maximum completion time for the final operation $v_9$ is $T_{\\text{req}} = 9$ cycles.\n-   **Objective**: Compute the total mobility $M = \\sum_{i=1}^{9} m_i$, where $m_i$ is the mobility of operation $v_i$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is evaluated against the validation criteria:\n-   **Scientifically Grounded**: The problem is a standard exercise in High-Level Synthesis (HLS), a core topic in Electronic Design Automation (EDA) and digital circuit design. The concepts of DFGs, scheduling, latency, ASAP, ALAP, and mobility are fundamental principles in this field.\n-   **Well-Posed**: The problem provides a complete DFG, unambiguous operation latencies, and a clear timing constraint. This allows for the deterministic calculation of unique ASAP and ALAP schedules and, consequently, a unique total mobility.\n-   **Objective**: The problem is stated using formal, standard terminology from the relevant scientific domain, with no subjective or ambiguous language.\n\nThe problem is found to be complete, consistent, and scientifically sound. It does not exhibit any of the flaws listed in the problem validation section.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. A solution will be provided.\n\n### Solution Derivation\n\nWe define the start time of an operation $v_i$ as $S_i$ and its latency as $L_i$. The operation's result is available at time $S_i + L_i$. For an operation $v_j$ that depends on the output of $v_i$, its start time must satisfy the constraint $S_j \\ge S_i + L_i$.\n\nThe latencies for the operations are:\n$L_1=2$, $L_2=2$, $L_3=1$, $L_4=1$, $L_5=1$, $L_6=2$, $L_7=1$, $L_8=1$, $L_9=1$.\n\n**1. As Soon As Possible (ASAP) Scheduling**\n\nThe ASAP start time, $S_{A,i}$, is the earliest possible time an operation $v_i$ can begin. For an operation with no predecessors, the start time is $0$. For others, it is determined by the completion times of its predecessors.\nThe governing equation is:\n$$S_{A,i} = \\max_{v_j \\in \\text{Pred}(v_i)} \\{ S_{A,j} + L_j \\}$$\nIf $\\text{Pred}(v_i)$ is empty, $S_{A,i} = 0$.\n\n-   $S_{A,1} = 0$\n-   $S_{A,2} = 0$\n-   $S_{A,3} = \\max(S_{A,1} + L_1, S_{A,2} + L_2) = \\max(0+2, 0+2) = 2$\n-   $S_{A,4} = S_{A,2} + L_2 = 0 + 2 = 2$\n-   $S_{A,5} = \\max(S_{A,3} + L_3, S_{A,4} + L_4) = \\max(2+1, 2+1) = 3$\n-   $S_{A,6} = S_{A,5} + L_5 = 3 + 1 = 4$\n-   $S_{A,7} = S_{A,3} + L_3 = 2 + 1 = 3$\n-   $S_{A,8} = S_{A,7} + L_7 = 3 + 1 = 4$\n-   $S_{A,9} = \\max(S_{A,6} + L_6, S_{A,8} + L_8) = \\max(4+2, 4+1) = \\max(6, 5) = 6$\n\nThe critical path length is the completion time of the final operation in the ASAP schedule, which is $T_{crit} = S_{A,9} + L_9 = 6 + 1 = 7$ cycles.\n\n**2. As Late As Possible (ALAP) Scheduling**\n\nThe ALAP start time, $S_{L,i}$, is the latest possible time an operation $v_i$ can begin without violating the total required time, $T_{\\text{req}}$. We work backward from the sink node(s). The completion time of the final operation $v_9$ must be no later than $T_{\\text{req}}$. Thus, $S_{L,9} + L_9 \\le T_{\\text{req}}$. For the latest schedule, we set $S_{L,9} + L_9 = T_{\\text{req}}$.\nThe governing equation is:\n$$S_{L,i} = \\min_{v_j \\in \\text{Succ}(v_i)} \\{ S_{L,j} \\} - L_i$$\n-   For $v_9$, $S_{L,9} = T_{\\text{req}} - L_9 = 9 - 1 = 8$.\n-   $v_8$ is a predecessor to $v_9$: $S_{L,8} = S_{L,9} - L_8 = 8 - 1 = 7$.\n-   $v_7$ is a predecessor to $v_8$: $S_{L,7} = S_{L,8} - L_7 = 7 - 1 = 6$.\n-   $v_6$ is a predecessor to $v_9$: $S_{L,6} = S_{L,9} - L_6 = 8 - 2 = 6$.\n-   $v_5$ is a predecessor to $v_6$: $S_{L,5} = S_{L,6} - L_5 = 6 - 1 = 5$.\n-   $v_4$ is a predecessor to $v_5$: $S_{L,4} = S_{L,5} - L_4 = 5 - 1 = 4$.\n-   $v_3$ has successors $\\{v_5, v_7\\}$: $S_{L,3} = \\min(S_{L,5}, S_{L,7}) - L_3 = \\min(5, 6) - 1 = 5 - 1 = 4$.\n-   $v_2$ has successors $\\{v_3, v_4\\}$: $S_{L,2} = \\min(S_{L,3}, S_{L,4}) - L_2 = \\min(4, 4) - 2 = 4 - 2 = 2$.\n-   $v_1$ is a predecessor to $v_3$: $S_{L,1} = S_{L,3} - L_1 = 4 - 2 = 2$.\n\n**3. Mobility Calculation**\n\nThe mobility of an operation $v_i$, denoted $m_i$, is the range of cycles in which it can be scheduled. It is calculated as the difference between its ALAP and ASAP start times: $m_i = S_{L,i} - S_{A,i}$.\n\n-   $m_1 = S_{L,1} - S_{A,1} = 2 - 0 = 2$\n-   $m_2 = S_{L,2} - S_{A,2} = 2 - 0 = 2$\n-   $m_3 = S_{L,3} - S_{A,3} = 4 - 2 = 2$\n-   $m_4 = S_{L,4} - S_{A,4} = 4 - 2 = 2$\n-   $m_5 = S_{L,5} - S_{A,5} = 5 - 3 = 2$\n-   $m_6 = S_{L,6} - S_{A,6} = 6 - 4 = 2$\n-   $m_7 = S_{L,7} - S_{A,7} = 6 - 3 = 3$\n-   $m_8 = S_{L,8} - S_{A,8} = 7 - 4 = 3$\n-   $m_9 = S_{L,9} - S_{A,9} = 8 - 6 = 2$\n\n**4. Total Mobility Calculation**\n\nThe total mobility $M$ is the sum of the individual mobilities for all operations in the DFG.\n$$M = \\sum_{i=1}^{9} m_i$$\n$$M = m_1 + m_2 + m_3 + m_4 + m_5 + m_6 + m_7 + m_8 + m_9$$\n$$M = 2 + 2 + 2 + 2 + 2 + 2 + 3 + 3 + 2$$\n$$M = (7 \\times 2) + (2 \\times 3) = 14 + 6 = 20$$\nThe total mobility for the given DFG is $20$ cycles.",
            "answer": "$$\\boxed{20}$$"
        },
        {
            "introduction": "Once operations are scheduled in time, they must be bound to physical hardware units. This practice  focuses on the core task of resource allocation: determining the minimum number of functional units (e.g., adders, multipliers) required to implement a given schedule. By analyzing the occupancy interval of each operation, you will learn how to identify the point of maximum concurrency, which directly dictates the hardware cost needed to execute the algorithm without timing violations.",
            "id": "4293564",
            "problem": "Consider a set of addition operations that have been scheduled within High-Level Synthesis (HLS), the automatic generation of register-transfer level implementations from algorithmic specifications. Each addition operation is implemented on an identical, non-pipelined adder with a fixed latency of $L$ clock cycles. A non-pipelined adder with latency $L$ occupies the hardware for the entire interval from its start time until $L$ cycles elapse, preventing another operation from starting on that same adder during that interval. Assume the schedule is given as integer clock cycle start times and is feasible with respect to data dependencies. Let the latency be $L = 3$ cycles. The scheduled start times for the $9$ additions are\n$$\n\\{\\,0,\\,2,\\,3,\\,5,\\,6,\\,7,\\,9,\\,10,\\,12\\,\\}.\n$$\nUnder standard binding constraints, two operations may share one adder if and only if their resource occupancy intervals do not overlap. Use fundamental definitions of resource occupancy and conflict to derive the minimum number of adder instances required to bind all these operations without violating timing. As part of your derivation, justify how at least one pair of operations from the given set can share a single adder without overlap. Express the final answer as the minimum integer number of adders required. No rounding is needed, and all times are expressed in cycles.",
            "solution": "The user-provided problem is evaluated as valid. It is scientifically grounded in the principles of High-Level Synthesis (HLS) for digital circuit design, it is well-posed with a clear objective and sufficient data, and it is expressed in objective, unambiguous terms.\n\nThe core of the problem is to determine the minimum number of functional units (adders) required to implement a given set of operations with a fixed schedule. This is a classic resource allocation problem. The minimum number of resources is dictated by the maximum number of operations that must be executed concurrently.\n\nFirst, we must define the resource occupancy for each operation. The problem states that each addition is performed on a non-pipelined adder with a latency of $L = 3$ clock cycles. For an operation with a start time $t_{start}$, a non-pipelined resource is occupied for the entire duration of the operation. This means the resource is busy for $L$ consecutive clock cycles, starting from cycle $t_{start}$. The resource occupancy can be represented by a time interval. If an operation starts at clock cycle $t_i$, it occupies an adder for cycles $t_i$, $t_i+1$, and $t_i+2$. This corresponds to the continuous time interval $[t_i, t_i+L)$, which for this problem is $[t_i, t_i+3)$.\n\nThe given set of start times for the $9$ addition operations is $T = \\{\\,0,\\,2,\\,3,\\,5,\\,6,\\,7,\\,9,\\,10,\\,12\\,\\}$. We can list the occupancy interval for each operation:\n\\begin{itemize}\n    \\item Operation 1: start time $t_1 = 0$, occupancy interval $I_1 = [0, 0+3) = [0, 3)$.\n    \\item Operation 2: start time $t_2 = 2$, occupancy interval $I_2 = [2, 2+3) = [2, 5)$.\n    \\item Operation 3: start time $t_3 = 3$, occupancy interval $I_3 = [3, 3+3) = [3, 6)$.\n    \\item Operation 4: start time $t_4 = 5$, occupancy interval $I_4 = [5, 5+3) = [5, 8)$.\n    \\item Operation 5: start time $t_5 = 6$, occupancy interval $I_5 = [6, 6+3) = [6, 9)$.\n    \\item Operation 6: start time $t_6 = 7$, occupancy interval $I_6 = [7, 7+3) = [7, 10)$.\n    \\item Operation 7: start time $t_7 = 9$, occupancy interval $I_7 = [9, 9+3) = [9, 12)$.\n    \\item Operation 8: start time $t_8 = 10$, occupancy interval $I_8 = [10, 10+3) = [10, 13)$.\n    \\item Operation 9: start time $t_9 = 12$, occupancy interval $I_9 = [12, 12+3) = [12, 15)$.\n\\end{itemize}\n\nTwo operations create a resource conflict if their occupancy intervals overlap. The minimum number of adders required is equal to the maximum number of overlapping intervals at any single point in time. This is also known as the size of the maximum clique in the interval graph corresponding to these operations.\n\nTo find this maximum overlap, we can analyze the number of active operations over time. Let $N(t)$ be the number of active operations at time $t$. We need to find $\\max_{t} N(t)$. The value of $N(t)$ changes only at the start or end times of the intervals. We can check the number of active operations in the time slots defined by these start and end points.\n\nA more direct approach is to identify the point of maximum concurrency. Let's examine the intervals:\n\\begin{itemize}\n    \\item At $t = 2.5$: Intervals $I_1 = [0, 3)$ and $I_2 = [2, 5)$ overlap. $N(2.5) = 2$.\n    \\item At $t = 3.5$: Intervals $I_2 = [2, 5)$ and $I_3 = [3, 6)$ overlap. $N(3.5) = 2$.\n    \\item At $t = 5.5$: Intervals $I_3 = [3, 6)$ and $I_4 = [5, 8)$ overlap. $N(5.5) = 2$.\n    \\item At $t = 6.5$: Intervals $I_4 = [5, 8)$ and $I_5 = [6, 9)$ overlap. $N(6.5) = 2$.\n    \\item At $t = 7.5$: Intervals $I_4 = [5, 8)$, $I_5 = [6, 9)$, and $I_6 = [7, 10)$ all overlap. For any time $t$ in the interval $[7, 8)$, all three of these operations are concurrently active. For example, at $t=7$, operation $4$ is in its third cycle, operation $5$ is in its second cycle, and operation $6$ is in its first cycle. Thus, $N(7.5) = 3$.\n    \\item At $t = 8.5$: Intervals $I_5 = [6, 9)$ and $I_6 = [7, 10)$ overlap. $N(8.5) = 2$.\n    \\item At $t = 9.5$: Intervals $I_6 = [7, 10)$ and $I_7 = [9, 12)$ overlap. $N(9.5) = 2$.\n    \\item At $t = 10.5$: Intervals $I_7 = [9, 12)$ and $I_8 = [10, 13)$ overlap. $N(10.5) = 2$.\n    \\item At $t = 12.5$: Intervals $I_8 = [10, 13)$ and $I_9 = [12, 15)$ overlap. $N(12.5) = 2$.\n\\end{itemize}\nThe maximum number of concurrent operations observed is $3$, occurring in the time interval $[7, 8)$. This peak concurrency requires three distinct adder units to be available simultaneously. Therefore, the minimum number of adders required is $3$.\n\nThe problem also requires justification that at least one pair of operations can share a single adder. According to the binding constraint, this is possible if their resource occupancy intervals do not overlap. Let's consider Operation 1 (start time $t_1=0$) and Operation 3 (start time $t_3=3$).\n\\begin{itemize}\n    \\item The occupancy interval for Operation 1 is $I_1 = [0, 3)$. The adder is occupied during cycles $0$, $1$, and $2$. It becomes free at the beginning of cycle $3$.\n    \\item The occupancy interval for Operation 3 is $I_3 = [3, 6)$. The operation requires an adder starting from cycle $3$.\n\\end{itemize}\nSince the interval $I_1$ ends at time $t=3$ and the interval $I_3$ begins at time $t=3$, their intervals $[0, 3)$ and $[3, 6)$ are disjoint (they only touch at a boundary point, which does not constitute an overlap in this context of discrete clock cycles and occupancy intervals defined as $[start, end)$). Thus, a single adder can execute Operation 1 and then, immediately upon its completion, execute Operation 3. This demonstrates valid resource sharing.\n\nBased on the analysis of maximum concurrency, the minimum number of adders is determined by the peak requirement. The peak requirement is 3 adders.",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "While we can analyze scheduling and binding in separate steps, they are deeply interdependent; an early scheduling decision can have major consequences for later binding and resource costs. To find a truly optimal design, we need a method that considers both aspects simultaneously. This final exercise  introduces Integer Linear Programming (ILP) as a powerful, formal technique to solve the combined scheduling, allocation, and binding problem. By formulating the design constraints and cost objectives into a mathematical model, you can find a provably optimal solution that minimizes hardware area while respecting all performance deadlines.",
            "id": "4293535",
            "problem": "A high-level synthesis (HLS) instance for electronic design automation (EDA) is specified by a directed acyclic graph of operations with precedence constraints, resource types with fixed latencies measured in discrete clock cycles, and an area model that assigns a cost to instantiating each unit of a resource type. The scheduling and binding problem is to choose start cycles for each operation and the number of units of each resource type to instantiate, such that all precedence and resource-capacity constraints hold under a given latency bound. The objective is to minimize total area.\n\nConsider the following instance with $3$ operations and $2$ resource types:\n- Operations: $v_1$ is a multiplication of type $M$ with latency $\\ell_M = 2$ cycles, $v_2$ is an addition of type $A$ with latency $\\ell_A = 1$ cycle, and $v_3$ is an addition of type $A$ with latency $\\ell_A = 1$ cycle.\n- Precedence constraints: $v_1$ produces an intermediate value that is consumed by both $v_2$ and $v_3$, i.e., $v_1 \\rightarrow v_2$ and $v_1 \\rightarrow v_3$.\n- Time horizon: cycles $t \\in \\{1, 2, 3, 4\\}$.\n- Area weights: each multiplier unit has area weight $w_M = 3$, each adder unit has area weight $w_A = 1$.\n- Latency bound: all operations must complete by cycle $4$.\n\nFormulate an integer linear programming (ILP) model to jointly perform resource allocation and binding:\n- Decision variables must include binary start-time variables $x_{i,t} \\in \\{0,1\\}$ indicating whether operation $v_i$ starts at cycle $t$, and nonnegative integer resource-count variables $q_M \\in \\mathbb{Z}_{\\ge 0}$ and $q_A \\in \\mathbb{Z}_{\\ge 0}$ indicating the number of instantiated multipliers and adders, respectively.\n- The model must enforce that each operation is scheduled exactly once, that precedence constraints hold, that no operation starts outside its feasible window implied by the latency bound, and that at every cycle the number of concurrently active operations of a given type does not exceed the available instances of that type.\n- The objective must be to minimize total area $J = w_M q_M + w_A q_A$.\n\nSolve the ILP to obtain an optimal schedule and binding, and then interpret the dual variables of the linear programming relaxation corresponding to the per-cycle resource-capacity constraints. In particular, give one consistent set of nonnegative dual multipliers for the capacity constraints on type $M$ and type $A$ over cycles $t \\in \\{1,2,3,4\\}$ that satisfy complementary slackness with your optimal primal solution, and explain briefly the economic meaning (price signal) of these dual multipliers.\n\nReport as your final numeric answer the optimal minimal area objective value $J$ as a pure number with no units. If any rounding is needed, round to four significant figures; otherwise, provide the exact integer value.",
            "solution": "The problem is subjected to validation and is deemed valid. It is a well-posed problem in the field of high-level synthesis for electronic design automation, grounded in established principles of integer linear programming and resource-constrained scheduling. All necessary data are provided, and the problem is free of scientific flaws, contradictions, or ambiguity.\n\nWe proceed to formulate and solve the integer linear programming (ILP) model as requested.\n\n**1. ILP Formulation**\n\nFirst, we define the sets, parameters, and decision variables for the model.\n\n**Sets and Parameters:**\n- Operations: $V = \\{v_1, v_2, v_3\\}$.\n- Resource types: $R = \\{M, A\\}$ (Multiplier, Adder).\n- Time horizon (cycles): $T = \\{1, 2, 3, 4\\}$.\n- Latency of operations: $\\ell_1 = \\ell_M = 2$, $\\ell_2 = \\ell_A = 1$, $\\ell_3 = \\ell_A = 1$.\n- Type of operations: $Type(v_1) = M$, $Type(v_2) = A$, $Type(v_3) = A$.\n- Area weights: $w_M = 3$, $w_A = 1$.\n- Precedence constraints: $v_1 \\rightarrow v_2$, $v_1 \\rightarrow v_3$.\n\n**Feasible Start Times:**\nAn operation $v_i$ with latency $\\ell_i$ must complete by the end of cycle $4$. If it starts at cycle $t$, it finishes at the end of cycle $t+\\ell_i-1$. Thus, we must have $t+\\ell_i-1 \\le 4$, which implies $t \\le 5-\\ell_i$.\n- For $v_1$ ($\\ell_1=2$): $t_1 \\le 5-2 = 3$. The set of possible start times is $T_1 = \\{1, 2, 3\\}$.\n- For $v_2$ ($\\ell_2=1$): $t_2 \\le 5-1 = 4$. The set of possible start times is $T_2 = \\{1, 2, 3, 4\\}$.\n- For $v_3$ ($\\ell_3=1$): $t_3 \\le 5-1 = 4$. The set of possible start times is $T_3 = \\{1, 2, 3, 4\\}$.\n\nFrom the precedence constraints, $v_2$ and $v_3$ must start after $v_1$ finishes. The earliest start time for $v_1$ is $t=1$, meaning it finishes at the end of cycle $1+2-1=2$. So, $v_2$ and $v_3$ cannot start before cycle $3$. This further restricts their start times: $T_2 = \\{3, 4\\}$ and $T_3 = \\{3, 4\\}$. If $v_1$ starts at $t=2$, it finishes at cycle $3$, so $v_2,v_3$ must start at $t \\ge 4$. If $v_1$ starts at $t=3$, it finishes at cycle $4$, so $v_2,v_3$ must start at $t \\ge 5$, which is impossible. Therefore, the start time for $v_1$ is actually restricted to $T_1=\\{1, 2\\}$.\n\n**Decision Variables:**\n- Binary start-time variables: $x_{i,t} \\in \\{0, 1\\}$ for $i \\in \\{1, 2, 3\\}$ and $t \\in T_i$. $x_{i,t}=1$ if operation $v_i$ starts at cycle $t$, and $0$ otherwise.\n- Nonnegative integer resource-count variables: $q_M, q_A \\in \\mathbb{Z}_{\\ge 0}$.\n\n**Objective Function:**\nThe objective is to minimize the total area, which is a weighted sum of the number of instantiated resource units.\n$$ \\text{Minimize} \\quad J = w_M q_M + w_A q_A = 3q_M + q_A $$\n\n**Constraints:**\n1.  **Unique Scheduling Constraints:** Each operation must be scheduled exactly once within its feasible window.\n    $$ \\sum_{t \\in T_1} x_{1,t} = \\sum_{t=1}^{2} x_{1,t} = 1 $$\n    $$ \\sum_{t \\in T_2} x_{2,t} = \\sum_{t=3}^{4} x_{2,t} = 1 $$\n    $$ \\sum_{t \\in T_3} x_{3,t} = \\sum_{t=3}^{4} x_{3,t} = 1 $$\n\n2.  **Precedence Constraints:** Let $S_i = \\sum_{t \\in T_i} t \\cdot x_{i,t}$ be the start time of operation $v_i$. The successor operations ($v_2, v_3$) must start no earlier than the predecessor ($v_1$) finishes. The finish time of $v_1$ is $S_1 + \\ell_1 - 1$. The start time of a successor must be greater than this, i.e., $S_j \\ge S_1 + \\ell_1$.\n    $$ \\sum_{t \\in T_2} t \\cdot x_{2,t} \\ge \\sum_{t \\in T_1} t \\cdot x_{1,t} + \\ell_1 \\quad \\implies \\quad \\sum_{t=3}^{4} t \\cdot x_{2,t} - \\sum_{t=1}^{2} t \\cdot x_{1,t} \\ge 2 $$\n    $$ \\sum_{t \\in T_3} t \\cdot x_{3,t} \\ge \\sum_{t \\in T_1} t \\cdot x_{1,t} + \\ell_1 \\quad \\implies \\quad \\sum_{t=3}^{4} t \\cdot x_{3,t} - \\sum_{t=1}^{2} t \\cdot x_{1,t} \\ge 2 $$\n\n3.  **Resource Capacity Constraints:** For each resource type $r \\in \\{M, A\\}$ and each cycle $k \\in T=\\{1,2,3,4\\}$, the number of concurrently active operations of that type must not exceed the number of allocated resources $q_r$. An operation $v_i$ is active at cycle $k$ if it starts at time $t$ such that $t \\le k  t + \\ell_i$.\n    -   **Multiplier (Type M):** Operation $v_1$ has $\\ell_1=2$.\n        -   $k=1: x_{1,1} \\le q_M$\n        -   $k=2: x_{1,1} + x_{1,2} \\le q_M$\n        -   $k=3: x_{1,2} + x_{1,3} \\le q_M$ (but $x_{1,3}=0$, so $x_{1,2} \\le q_M$)\n        -   $k=4: x_{1,3} + x_{1,4} \\le q_M$ (but $x_{1,3}=x_{1,4}=0$, so $0 \\le q_M$)\n    -   **Adder (Type A):** Operations $v_2, v_3$ have $\\ell_2=\\ell_3=1$.\n        -   $k=1: x_{2,1}+x_{3,1} \\le q_A$ (but $x_{2,1}=x_{3,1}=0$, so $0 \\le q_A$)\n        -   $k=2: x_{2,2}+x_{3,2} \\le q_A$ (but $x_{2,2}=x_{3,2}=0$, so $0 \\le q_A$)\n        -   $k=3: x_{2,3}+x_{3,3} \\le q_A$\n        -   $k=4: x_{2,4}+x_{3,4} \\le q_A$\n\n**2. Solving the ILP**\n\nWe can solve this small instance by enumerating the few valid schedules for $v_1$. As determined, $v_1$ can only start at $t=1$ or $t=2$.\n\n**Case 1: $v_1$ starts at $t=1$ ($x_{1,1}=1$).**\n- $v_1$ is active during cycles $1$ and $2$. From the resource constraints for $M$, $x_{1,1} \\le q_M \\implies 1 \\le q_M$, and $x_{1,1}+x_{1,2} \\le q_M \\implies 1+0 \\le q_M$. Thus, we need at least $q_M=1$.\n- The precedence constraints require $v_2$ and $v_3$ to start at $t \\ge 1+2 = 3$. Their possible start times are $t=3$ or $t=4$.\n- **Subcase 1a: Schedule $v_2$ and $v_3$ serially.** We can set $x_{2,3}=1$ and $x_{3,4}=1$.\n    - Adder usage at $k=3$: $x_{2,3}+x_{3,3}=1+0=1$. We need $q_A \\ge 1$.\n    - Adder usage at $k=4$: $x_{2,4}+x_{3,4}=0+1=1$. We need $q_A \\ge 1$.\n    - This schedule requires $q_M=1$ and $q_A=1$. The total area is $J = 3(1) + 1(1) = 4$.\n- **Subcase 1b: Schedule $v_2$ and $v_3$ in parallel.** We can set $x_{2,3}=1$ and $x_{3,3}=1$.\n    - Adder usage at $k=3$: $x_{2,3}+x_{3,3}=1+1=2$. We need $q_A \\ge 2$.\n    - This schedule requires $q_M=1$ and $q_A=2$. The total area is $J = 3(1) + 1(2) = 5$.\n\n**Case 2: $v_1$ starts at $t=2$ ($x_{1,2}=1$).**\n- $v_1$ is active during cycles $2$ and $3$. From resource constraints for $M$, this requires $q_M \\ge 1$.\n- The precedence constraints require $v_2$ and $v_3$ to start at $t \\ge 2+2=4$. The only possible start time is $t=4$.\n- Thus, we must have $x_{2,4}=1$ and $x_{3,4}=1$.\n- Adder usage at $k=4$: $x_{2,4}+x_{3,4}=1+1=2$. We need $q_A \\ge 2$.\n- This schedule requires $q_M=1$ and $q_A=2$. The total area is $J = 3(1) + 1(2) = 5$.\n\n**Optimal Solution:**\nComparing the costs, the minimum area is $J=4$, achieved in Subcase 1a.\n- **Optimal Resource Allocation:** $q_M=1$, $q_A=1$.\n- **Optimal Schedule:** $v_1$ starts at $t=1$, $v_2$ starts at $t=3$, $v_3$ starts at $t=4$.\n(Note: swapping the start times of $v_2$ and $v_3$ yields an equivalent optimal solution).\nThe minimal area objective value is $J=4$.\n\n**3. Dual Variables and Interpretation**\n\nWe analyze the dual variables of the linear programming (LP) relaxation for the resource-capacity constraints at the optimal solution found. Let $\\lambda_{r,k}$ be the dual variable (shadow price) for the capacity constraint of resource type $r$ at cycle $k$.\n\nFor the optimal solution ($q_M=1, q_A=1, x_{1,1}=1, x_{2,3}=1, x_{3,4}=1$):\n- **Multiplier Constraints (Type M):**\n    - $k=1: x_{1,1} \\le q_M \\implies 1 \\le 1$. The constraint is **tight**.\n    - $k=2: x_{1,1}+x_{1,2} \\le q_M \\implies 1+0 \\le 1$. The constraint is **tight**.\n    - $k=3: x_{1,2} \\le q_M \\implies 0 \\le 1$. The constraint is not tight.\n    - $k=4: 0 \\le q_M$. The constraint is not tight.\n- **Adder Constraints (Type A):**\n    - $k=1,2$: Constraints are $0 \\le q_A$. Not tight.\n    - $k=3: x_{2,3}+x_{3,3} \\le q_A \\implies 1+0 \\le 1$. The constraint is **tight**.\n    - $k=4: x_{2,4}+x_{3,4} \\le q_A \\implies 0+1 \\le 1$. The constraint is **tight**.\n\nBy the principle of complementary slackness, if a constraint is not tight, its corresponding dual variable must be zero.\n- $\\lambda_{M,3} = 0$ and $\\lambda_{M,4} = 0$.\n- $\\lambda_{A,1} = 0$ and $\\lambda_{A,2} = 0$.\n\nFor an optimal solution to the LP relaxation, the sum of the dual variables for a given resource type's capacity constraints must equal the area weight of that resource, provided the resource is utilized ($q_r  0$).\n$$ \\sum_{k=1}^{4} \\lambda_{M,k} = w_M = 3 \\quad \\implies \\quad \\lambda_{M,1} + \\lambda_{M,2} = 3 $$\n$$ \\sum_{k=1}^{4} \\lambda_{A,k} = w_A = 1 \\quad \\implies \\quad \\lambda_{A,3} + \\lambda_{A,4} = 1 $$\n\nWe need to provide one consistent set of non-negative dual multipliers. A simple, consistent choice is to distribute the total price evenly over the cycles where the resource constraint is tight.\n- For the multiplier, used in cycles $1$ and $2$: $\\lambda_{M,1} = 1.5$ and $\\lambda_{M,2} = 1.5$.\n- For the adder, used in cycles $3$ and $4$: $\\lambda_{A,3} = 0.5$ and $\\lambda_{A,4} = 0.5$.\n\nThus, a consistent set of dual multipliers is:\n- $\\lambda_M = (1.5, 1.5, 0, 0)$\n- $\\lambda_A = (0, 0, 0.5, 0.5)$\n\n**Economic Interpretation:**\nThe dual variable $\\lambda_{r,k}$ represents the marginal cost, in terms of total area, of requiring one unit of resource $r$ at cycle $k$. It is the \"price\" of using a resource at a specific time.\n\n- The total \"value\" of a multiplier, summed over its useful lifetime in the schedule, is $\\lambda_{M,1} + \\lambda_{M,2} = 1.5 + 1.5 = 3$, which equals its area cost $w_M$. The price of $1.5$ per cycle reflects that the multiplier is a bottleneck in both cycle $1$ and cycle $2$.\n- The total \"value\" of an adder is $\\lambda_{A,3} + \\lambda_{A,4} = 0.5 + 0.5 = 1$, equalling its area cost $w_A$. This price is distributed across cycles $3$ and $4$ because the single adder is a bottleneck in both these cycles (serially executing $v_2$ and $v_3$).\n- The zero-valued duals ($\\lambda_{M,3}, \\lambda_{M,4}, \\lambda_{A,1}, \\lambda_{A,2}$) indicate that there is spare capacity for those resources at those times. Introducing a new operation needing a multiplier in cycle $3$ or an adder in cycle $1$ would not, to a first order, increase the required number of resources and thus would not increase the total area cost. These time slots represent \"free\" capacity.",
            "answer": "$$\\boxed{4}$$"
        }
    ]
}
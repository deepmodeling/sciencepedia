{
    "hands_on_practices": [
        {
            "introduction": "Our exploration of switched-capacitor circuits begins with the most fundamental building block: the switched-capacitor resistor. This exercise demonstrates how the periodic transfer of charge can emulate the behavior of a conventional resistor, a cornerstone principle in analog integrated circuit design . By deriving the equivalent resistance from first principles, you will solidify your understanding of the relationship between clock frequency, capacitance, and effective resistance.",
            "id": "4302943",
            "problem": "A switched-capacitor resistor is implemented in an Integrated Circuit for Electronic Design Automation (EDA) context using two non-overlapping clock phases that alternately connect a capacitor between two nodes with a steady direct-current voltage difference. Consider a single capacitor of value $C$ that is alternately connected between nodes at voltages $V_{\\mathrm{A}}$ and $V_{\\mathrm{B}}$ by complementary metal-oxide-semiconductor (CMOS) transmission-gate switches driven by ideal, non-overlapping clocks. The voltage difference is $\\Delta V = V_{\\mathrm{A}} - V_{\\mathrm{B}}$ and is constant over time. Assume ideal clocks, negligible wire resistances, and that the capacitor is fully settled in each phase such that instantaneous connections are valid. The switches exhibit charge injection and clock feedthrough, but the layout and timing are symmetric so that any injected charge is split equally and appears as common-mode perturbations with zero net differential charge transfer per full cycle.\n\nStarting only from fundamental definitions—namely the capacitor charge-voltage relation $q = C v$, conservation of charge, and the definition of average current as average charge transfer per unit time—derive an expression for the equivalent resistance $R_{\\mathrm{eq}}$ seen between the two nodes under steady operation, and the resulting average current $I_{\\mathrm{avg}}$ flowing from $V_{\\mathrm{A}}$ to $V_{\\mathrm{B}}$. Use the given values $C = 1\\,\\mathrm{pF}$, $f = 1\\,\\mathrm{MHz}$, and $\\Delta V = 1\\,\\mathrm{V}$, where $f$ is the clock frequency (cycles per second). Then compute the numerical values.\n\nExpress $R_{\\mathrm{eq}}$ in $\\mathrm{\\Omega}$ and $I_{\\mathrm{avg}}$ in $\\mathrm{A}$. Round both numerical results to four significant figures. Your final reported answer must contain only the two computed quantities in a single ordered pair presented as a row vector, in the order $\\left(R_{\\mathrm{eq}}, I_{\\mathrm{avg}}\\right)$.",
            "solution": "The problem statement is first validated according to the specified procedure.\n\n### Step 1: Extract Givens\n- A switched-capacitor resistor is implemented with a single capacitor of value $C$.\n- The capacitor is alternately connected between nodes at steady direct-current voltages $V_{\\mathrm{A}}$ and $V_{\\mathrm{B}}$.\n- The connection is performed by CMOS transmission-gate switches driven by ideal, non-overlapping clock phases.\n- The voltage difference is $\\Delta V = V_{\\mathrm{A}} - V_{\\mathrm{B}}$.\n- Assumptions: ideal clocks, negligible wire resistances, capacitor is fully settled in each phase.\n- Charge injection and clock feedthrough effects are symmetric and result in zero net differential charge transfer per full cycle.\n- The derivation must start from fundamental definitions: $q = C v$, conservation of charge, and average current definition.\n- Given numerical values:\n    - $C = 1\\,\\mathrm{pF}$\n    - $f = 1\\,\\mathrm{MHz}$ (clock frequency)\n    - $\\Delta V = 1\\,\\mathrm{V}$\n- Required outputs:\n    - Expression for equivalent resistance $R_{\\mathrm{eq}}$.\n    - Expression for average current $I_{\\mathrm{avg}}$.\n    - Numerical values for $R_{\\mathrm{eq}}$ in $\\mathrm{\\Omega}$ and $I_{\\mathrm{avg}}$ in $\\mathrm{A}$.\n    - Round numerical results to four significant figures.\n    - Final answer as an ordered pair $\\left(R_{\\mathrm{eq}}, I_{\\mathrm{avg}}\\right)$ in a row vector.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded**: The problem describes a standard switched-capacitor resistor, a fundamental building block in analog integrated circuit design. The principles of operation are based on the canonical charge-voltage relationship for a capacitor and the definition of electric current, which are cornerstones of circuit theory and electromagnetism. The specified non-ideal effects (charge injection) and their cancellation are realistic considerations in IC design. The problem is scientifically sound.\n- **Well-Posed**: The problem provides all necessary parameters ($C$, $f$, $\\Delta V$) and simplifying assumptions (ideal clocks, full settling, zero net differential charge injection) required to derive a unique analytical solution and compute a definite numerical answer.\n- **Objective**: The problem is stated using precise, technical terminology from the field of integrated circuit design. It is free from ambiguity and subjective claims.\n- **Flaw Check**: The problem does not violate any of the invalidity criteria. It is scientifically sound, well-posed, objective, complete, and relevant to the specified topic. The assumptions provided are standard for a first-order analysis and are explicitly stated. The problem is a valid exercise in fundamental circuit analysis.\n\n### Step 3: Verdict and Action\nThe problem is deemed valid. A solution will be provided.\n\nThe core principle of a switched-capacitor resistor is the emulation of resistive behavior through the periodic transfer of discrete charge packets. We analyze the charge transferred in one full clock cycle. Let the clock period be $T$, which is the inverse of the clock frequency $f$, so $T = 1/f$. The clock has two non-overlapping phases, which we will denote as $\\phi_1$ and $\\phi_2$. The total time for one cycle of operation is $T$.\n\nWe model the operation as follows, which is the standard topology for creating a resistance between two voltage nodes. In phase $\\phi_1$, the capacitor $C$ is connected to the node at voltage $V_{\\mathrm{A}}$, and in phase $\\phi_2$, it is connected to the node at voltage $V_{\\mathrm{B}}$. To facilitate charge transfer, we assume the other plate of the capacitor is connected to a common reference, which we can define as ground ($0\\,\\mathrm{V}$), during both phases.\n\nLet's analyze the circuit in steady-state operation. At the beginning of a cycle (just before phase $\\phi_1$ begins), the capacitor has been exposed to voltage $V_{\\mathrm{B}}$ from the previous cycle's $\\phi_2$ phase. Therefore, the initial charge on the capacitor is $q_{\\mathrm{init}} = C V_{\\mathrm{B}}$.\n\nDuring phase $\\phi_1$, the switches connect the capacitor $C$ across the potential $V_{\\mathrm{A}}$ (and the reference). The capacitor charges to the voltage $V_{\\mathrm{A}}$. The charge stored on the capacitor at the end of phase $\\phi_1$ is $q_{\\phi_1} = C V_{\\mathrm{A}}$. For this to happen, a certain amount of charge must be drawn from the source at node A. By conservation of charge, the charge drawn from node A is the change in the capacitor's charge:\n$$ \\Delta q_{\\mathrm{A}} = q_{\\phi_1} - q_{\\mathrm{init}} = C V_{\\mathrm{A}} - C V_{\\mathrm{B}} = C (V_{\\mathrm{A}} - V_{\\mathrm{B}}) $$\n\nDuring phase $\\phi_2$, the switches disconnect the capacitor from node A and connect it to node B. The capacitor, which currently holds charge $q_{\\phi_1} = C V_{\\mathrm{A}}$, now charges (or discharges) to the voltage $V_{\\mathrm{B}}$. The charge on the capacitor at the end of phase $\\phi_2$ is $q_{\\phi_2} = C V_{\\mathrm{B}}$. The charge drawn from the source at node B is:\n$$ \\Delta q_{\\mathrm{B}} = q_{\\phi_2} - q_{\\phi_1} = C V_{\\mathrm{B}} - C V_{\\mathrm{A}} = -C (V_{\\mathrm{A}} - V_{\\mathrm{B}}) $$\nA charge of $\\Delta q_{\\mathrm{B}}$ drawn from node B is equivalent to a charge $-\\Delta q_{\\mathrm{B}} = C (V_{\\mathrm{A}} - V_{\\mathrm{B}})$ being delivered *to* node B.\n\nIn summary, over one complete clock cycle of period $T$, a net charge packet of magnitude $\\Delta Q = C (V_{\\mathrm{A}} - V_{\\mathrm{B}})$ is taken from node A and effectively transferred to node B.\n\nThe average current, $I_{\\mathrm{avg}}$, is defined as the total net charge transferred per unit time. The charge $\\Delta Q$ is transferred in one period $T$. Therefore, the average current flowing from node A to node B is:\n$$ I_{\\mathrm{avg}} = \\frac{\\Delta Q}{T} $$\nSubstituting $\\Delta Q = C (V_{\\mathrm{A}} - V_{\\mathrm{B}})$ and $T = 1/f$:\n$$ I_{\\mathrm{avg}} = \\frac{C (V_{\\mathrm{A}} - V_{\\mathrm{B}})}{1/f} = C f (V_{\\mathrm{A}} - V_{\\mathrm{B}}) $$\nUsing the given definition $\\Delta V = V_{\\mathrm{A}} - V_{\\mathrm{B}}$, we have the expression for the average current:\n$$ I_{\\mathrm{avg}} = C f \\Delta V $$\nThe problem states that any charge injection effects are symmetric and result in zero net differential charge transfer. This justifies our idealized analysis, as these non-ideal effects do not contribute to the average current $I_{\\mathrm{avg}}$ flowing between the two nodes.\n\nNext, we derive the equivalent resistance $R_{\\mathrm{eq}}$. An equivalent resistance is defined by Ohm's law as the ratio of the steady voltage difference across the element to the average current flowing through it. The voltage difference is $\\Delta V = V_{\\mathrm{A}} - V_{\\mathrm{B}}$.\n$$ R_{\\mathrm{eq}} = \\frac{\\Delta V}{I_{\\mathrm{avg}}} $$\nSubstituting the expression for $I_{\\mathrm{avg}}$:\n$$ R_{\\mathrm{eq}} = \\frac{\\Delta V}{C f \\Delta V} $$\nAssuming $\\Delta V \\neq 0$ (which is given as $1\\,\\mathrm{V}$), we can cancel the $\\Delta V$ term:\n$$ R_{\\mathrm{eq}} = \\frac{1}{C f} $$\nThese are the required analytical expressions.\n\nNow we compute the numerical values using the given data:\n$C = 1\\,\\mathrm{pF} = 1 \\times 10^{-12}\\,\\mathrm{F}$\n$f = 1\\,\\mathrm{MHz} = 1 \\times 10^{6}\\,\\mathrm{Hz}$\n$\\Delta V = 1\\,\\mathrm{V}$\n\nThe equivalent resistance is:\n$$ R_{\\mathrm{eq}} = \\frac{1}{(1 \\times 10^{-12}\\,\\mathrm{F}) \\times (1 \\times 10^{6}\\,\\mathrm{s}^{-1})} = \\frac{1}{1 \\times 10^{-6}}\\,\\Omega = 1 \\times 10^{6}\\,\\Omega $$\nRounding to four significant figures, this is $1.000 \\times 10^6\\,\\Omega$.\n\nThe average current is:\n$$ I_{\\mathrm{avg}} = (1 \\times 10^{-12}\\,\\mathrm{F}) \\times (1 \\times 10^{6}\\,\\mathrm{s}^{-1}) \\times (1\\,\\mathrm{V}) = 1 \\times 10^{-6}\\,\\mathrm{A} $$\nRounding to four significant figures, this is $1.000 \\times 10^{-6}\\,\\mathrm{A}$.\n\nThe computed quantities are $R_{\\mathrm{eq}} = 1.000 \\times 10^6\\,\\mathrm{\\Omega}$ and $I_{\\mathrm{avg}} = 1.000 \\times 10^{-6}\\,\\mathrm{A}$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1.000 \\times 10^6 & 1.000 \\times 10^{-6}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "The transfer of charge is the essence of switched-capacitor circuits, and this process is governed by fundamental laws of conservation. This practice challenges you to analyze the classic scenario of charge sharing between two capacitors, deriving both the final equilibrium voltage and the associated energy loss . Mastering this concept is crucial, as it forms the basis for understanding the operation of sample-and-hold amplifiers, charge-redistribution DACs, and the inherent inefficiencies in charge transfer processes.",
            "id": "4302948",
            "problem": "Consider two ideal lumped capacitors $C_{1}$ and $C_{2}$ in a switched-capacitor network used within an integrated circuit designed through Electronic Design Automation (EDA). The top plates of $C_{1}$ and $C_{2}$ are isolated and held at voltages $V_{1}$ and $V_{2}$ (referenced to a common ground) prior to a switching event. At time $t=0$, a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) switch with sufficiently low on-resistance is turned on to connect the two top plates together, allowing charge to redistribute until a common final voltage $V_{\\mathrm{f}}$ is reached. Assume there are no parasitic capacitances to other nodes, no leakage paths, and that the only mechanism for energy dissipation during the redistribution is the finite resistance of the switch when it is on. After the voltages equalize, the switch is held on such that the final state is two capacitors permanently connected at their top plates. Using only fundamental laws (the capacitor constitutive relation and strict charge conservation on the isolated node formed by the two top plates) and the definition of energy stored in a capacitor, derive the closed-form expression for the final voltage $V_{\\mathrm{f}}$ and the closed-form expression for the energy lost due to redistribution during the equalization process.\n\nExpress the final voltage in Volts and the energy in Joules. The final answer must be a single closed-form analytic expression containing both quantities arranged as a row, with the first entry equal to $V_{\\mathrm{f}}$ and the second entry equal to the energy lost due to redistribution. No numerical values are provided; your expressions must be in terms of $C_{1}$, $C_{2}$, $V_{1}$, and $V_{2}$ only.",
            "solution": "The problem statement is subjected to validation.\n\n**Step 1: Extract Givens**\n- Two ideal lumped capacitors: $C_{1}$ and $C_{2}$.\n- Initial voltage on capacitor $C_{1}$: $V_{1}$.\n- Initial voltage on capacitor $C_{2}$: $V_{2}$.\n- At time $t=0$, the top plates of $C_{1}$ and $C_{2}$ are connected by a switch.\n- The system reaches a common final voltage $V_{\\mathrm{f}}$.\n- Assumptions: no parasitic capacitances, no leakage paths.\n- The derivation must use: capacitor constitutive relation, strict charge conservation, and the definition of energy stored in a capacitor.\n- The final expressions for $V_{\\mathrm{f}}$ and the energy lost must be in terms of $C_{1}$, $C_{2}$, $V_{1}$, and $V_{2}$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is scientifically grounded, well-posed, and objective. It describes a fundamental, textbook problem in circuit theory concerning charge sharing and energy dissipation between two capacitors. The assumptions provided (ideal components, no parasitics) are standard for isolating the core physical principles. The problem is self-contained, providing all necessary information to derive a unique solution based on the specified fundamental laws. It does not violate any physical principles nor does it contain any ambiguities or contradictions. The phenomenon of energy loss, independent of the resistance value (as long as it is non-zero), is a well-established concept in this context.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A complete solution is provided below.\n\nThe solution is derived from two fundamental principles: the conservation of electric charge on an isolated system and the definition of energy stored in a capacitor.\n\nFirst, we determine the final voltage $V_{\\mathrm{f}}$ by applying the principle of charge conservation. Before the switch closes at $t=0$, the top plates of the two capacitors form an isolated node. The total charge on this node is the sum of the charges on each capacitor. Using the capacitor constitutive relation, $Q=CV$, the initial charges on capacitors $C_{1}$ and $C_{2}$ are:\n$$Q_{1, \\text{initial}} = C_{1}V_{1}$$\n$$Q_{2, \\text{initial}} = C_{2}V_{2}$$\nThe total initial charge on the isolated node is:\n$$Q_{\\text{initial}} = Q_{1, \\text{initial}} + Q_{2, \\text{initial}} = C_{1}V_{1} + C_{2}V_{2}$$\n\nAfter the switch closes, charge redistributes between the two capacitors until they reach a common final voltage, $V_{\\mathrm{f}}$. At this point, the capacitors are effectively connected in parallel. The total capacitance of the parallel combination is:\n$$C_{\\text{total}} = C_{1} + C_{2}$$\nThe total final charge on the node, expressed in terms of the final voltage $V_{\\mathrm{f}}$, is:\n$$Q_{\\text{final}} = C_{\\text{total}}V_{\\mathrm{f}} = (C_{1} + C_{2})V_{\\mathrm{f}}$$\n\nAccording to the law of conservation of charge, the total charge on the isolated node must be the same before and after the switching event:\n$$Q_{\\text{initial}} = Q_{\\text{final}}$$\n$$C_{1}V_{1} + C_{2}V_{2} = (C_{1} + C_{2})V_{\\mathrm{f}}$$\nSolving for the final voltage $V_{\\mathrm{f}}$ yields:\n$$V_{\\mathrm{f}} = \\frac{C_{1}V_{1} + C_{2}V_{2}}{C_{1} + C_{2}}$$\nThis expression gives the final equilibrium voltage as a weighted average of the initial voltages, where the capacitances are the weighting factors.\n\nNext, we determine the energy lost during the charge redistribution process. The energy is dissipated as heat in the finite on-resistance of the MOSFET switch. The energy lost, $E_{\\text{lost}}$, is the difference between the total initial energy stored in the capacitors, $E_{\\text{initial}}$, and the total final energy, $E_{\\text{final}}$.\n\nThe energy stored in a single capacitor is given by $E = \\frac{1}{2}CV^{2}$.\nThe total initial energy is the sum of the energies stored in each capacitor individually:\n$$E_{\\text{initial}} = \\frac{1}{2}C_{1}V_{1}^{2} + \\frac{1}{2}C_{2}V_{2}^{2}$$\nThe total final energy is the energy stored in the equivalent parallel capacitance at the final voltage $V_{\\mathrm{f}}$:\n$$E_{\\text{final}} = \\frac{1}{2}C_{\\text{total}}V_{\\mathrm{f}}^{2} = \\frac{1}{2}(C_{1} + C_{2})V_{\\mathrm{f}}^{2}$$\nSubstituting the previously derived expression for $V_{\\mathrm{f}}$ into the equation for $E_{\\text{final}}$:\n$$E_{\\text{final}} = \\frac{1}{2}(C_{1} + C_{2}) \\left( \\frac{C_{1}V_{1} + C_{2}V_{2}}{C_{1} + C_{2}} \\right)^{2} = \\frac{1}{2} \\frac{(C_{1}V_{1} + C_{2}V_{2})^{2}}{C_{1} + C_{2}}$$\nThe energy lost is then calculated as $E_{\\text{lost}} = E_{\\text{initial}} - E_{\\text{final}}$:\n$$E_{\\text{lost}} = \\left(\\frac{1}{2}C_{1}V_{1}^{2} + \\frac{1}{2}C_{2}V_{2}^{2}\\right) - \\frac{1}{2} \\frac{(C_{1}V_{1} + C_{2}V_{2})^{2}}{C_{1} + C_{2}}$$\nWe can simplify this expression by placing all terms over a common denominator, $2(C_{1} + C_{2})$:\n$$E_{\\text{lost}} = \\frac{ (C_{1} + C_{2})(C_{1}V_{1}^{2} + C_{2}V_{2}^{2}) - (C_{1}V_{1} + C_{2}V_{2})^{2} }{2(C_{1} + C_{2})}$$\nNow, we expand the terms in the numerator.\nFirst term:\n$$(C_{1} + C_{2})(C_{1}V_{1}^{2} + C_{2}V_{2}^{2}) = C_{1}^{2}V_{1}^{2} + C_{1}C_{2}V_{2}^{2} + C_{1}C_{2}V_{1}^{2} + C_{2}^{2}V_{2}^{2}$$\nSecond term:\n$$(C_{1}V_{1} + C_{2}V_{2})^{2} = C_{1}^{2}V_{1}^{2} + 2C_{1}V_{1}C_{2}V_{2} + C_{2}^{2}V_{2}^{2}$$\nSubtracting the second expanded term from the first:\n$$C_{1}^{2}V_{1}^{2} + C_{1}C_{2}V_{1}^{2} + C_{1}C_{2}V_{2}^{2} + C_{2}^{2}V_{2}^{2} - (C_{1}^{2}V_{1}^{2} + 2C_{1}C_{2}V_{1}V_{2} + C_{2}^{2}V_{2}^{2})$$\nThe terms $C_{1}^{2}V_{1}^{2}$ and $C_{2}^{2}V_{2}^{2}$ cancel out, leaving:\n$$C_{1}C_{2}V_{1}^{2} + C_{1}C_{2}V_{2}^{2} - 2C_{1}C_{2}V_{1}V_{2}$$\nFactoring out the common term $C_{1}C_{2}$:\n$$C_{1}C_{2}(V_{1}^{2} - 2V_{1}V_{2} + V_{2}^{2}) = C_{1}C_{2}(V_{1} - V_{2})^{2}$$\nSubstituting this simplified numerator back into the expression for $E_{\\text{lost}}$:\n$$E_{\\text{lost}} = \\frac{C_{1}C_{2}(V_{1} - V_{2})^{2}}{2(C_{1} + C_{2})} = \\frac{1}{2} \\frac{C_{1}C_{2}}{C_{1} + C_{2}} (V_{1} - V_{2})^{2}$$\nThis is the closed-form expression for the energy lost. It is worth noting that the energy loss is always non-negative, as all terms are positive, and it is zero only if the initial voltages are equal ($V_{1}=V_{2}$), in which case no charge redistribution occurs. The quantity $\\frac{C_{1}C_{2}}{C_{1} + C_{2}}$ is the equivalent capacitance of $C_{1}$ and $C_{2}$ connected in series.\n\nIn summary, the final voltage and the energy lost are given by:\nFinal Voltage: $V_{\\mathrm{f}} = \\frac{C_{1}V_{1} + C_{2}V_{2}}{C_{1} + C_{2}}$\nEnergy Lost: $E_{\\text{lost}} = \\frac{1}{2} \\frac{C_{1}C_{2}}{C_{1} + C_{2}}(V_{1} - V_{2})^{2}$",
            "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{C_{1}V_{1} + C_{2}V_{2}}{C_{1} + C_{2}} & \\frac{1}{2} \\frac{C_{1}C_{2}}{C_{1} + C_{2}}(V_{1} - V_{2})^{2} \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "Having established the ideal behavior of switched-capacitor circuits, we now turn to a critical non-ideality: pedestal error caused by clock feedthrough. This hands-on problem requires you to model this effect as a capacitive voltage divider and derive the resulting error using the principle of charge conservation, a tool you've sharpened in the previous exercises . By applying your derivation to a series of numerical test cases, you will gain practical insight into how parasitic capacitances impact circuit performance and how designers can mitigate these unwanted effects.",
            "id": "4302934",
            "problem": "You are given a minimal but physically faithful model of clock feedthrough in a switched-capacitor sample-and-hold implemented with a complementary transmission gate. The model is intended to represent what a Simulation Program with Integrated Circuit Emphasis (SPICE) netlist does when explicit overlap capacitances are instantiated as capacitors between each gate net and the high-impedance hold node. The objective is to quantify the pedestal error caused solely by clock feedthrough when the gate control voltages step during turn-off. The problem must be solved from first principles by applying charge conservation and the capacitor constitutive relation, without using shortcut formulas.\n\nConsider a hold node with a hold capacitance $C_H$ to ground and a set of explicit gate-to-node overlap capacitors $\\{C_i\\}$ connecting the hold node to $k$ independent clock nets $\\{g_i\\}$, where $i \\in \\{1,\\dots,k\\}$. At a given clock edge, the $i$-th clock net undergoes a known ideal step from $V_{g,i}^{-}$ to $V_{g,i}^{+}$, where the step magnitude is $\\Delta V_{g,i} = V_{g,i}^{+} - V_{g,i}^{-}$. The switch channel is assumed to be open immediately after the edge, so the hold node is isolated except for capacitive connections. Neglect all channel-charge injection and any other parasitics not explicitly enumerated, and assume linear time-invariant capacitors.\n\nYour tasks are:\n- Starting from charge conservation at the isolated hold node and the capacitor law $Q = C V$, derive the instantaneous pedestal error $\\Delta V_{\\text{out}}$ at the hold node due only to the aforementioned clock steps and explicit overlap capacitors. Define the pedestal error as the instantaneous change in the hold node voltage caused by the clock transitions, i.e., $\\Delta V_{\\text{out}} = V_{\\text{out}}^{+} - V_{\\text{out}}^{-}$.\n- Express $\\Delta V_{\\text{out}}$ in terms of $C_H$, the set $\\{C_i\\}$, and the set of gate steps $\\{\\Delta V_{g,i}\\}$, maintaining consistent sign conventions, and explain any assumptions clearly.\n\nNumerical test suite:\nFor each of the following test cases, compute the pedestal error $\\Delta V_{\\text{out}}$ in volts. All capacitances are given in farads and all voltages in volts. Your program must implement a general solution that accepts $C_H$ and a list of pairs $(C_i, \\Delta V_{g,i})$ and returns $\\Delta V_{\\text{out}}$ computed from first principles.\n\n- Test case $1$ (complementary transmission gate, moderate hold capacitor):\n  - $C_H = 1.0 \\times 10^{-12}\\ \\text{F}$\n  - $(C_{n}, \\Delta V_{g,n}) = (1.0 \\times 10^{-14}\\ \\text{F}, -1.2\\ \\text{V})$\n  - $(C_{p}, \\Delta V_{g,p}) = (8.0 \\times 10^{-15}\\ \\text{F}, +1.2\\ \\text{V})$\n- Test case $2$ (single $n$-channel metal-oxide-semiconductor device only):\n  - $C_H = 5.0 \\times 10^{-13}\\ \\text{F}$\n  - $(C_{n}, \\Delta V_{g,n}) = (5.0 \\times 10^{-15}\\ \\text{F}, -1.0\\ \\text{V})$\n  - $(C_{p}, \\Delta V_{g,p}) = (0.0\\ \\text{F}, 0.0\\ \\text{V})$\n- Test case $3$ (complementary transmission gate with ideal cancellation):\n  - $C_H = 5.0 \\times 10^{-13}\\ \\text{F}$\n  - $(C_{n}, \\Delta V_{g,n}) = (5.0 \\times 10^{-15}\\ \\text{F}, -1.0\\ \\text{V})$\n  - $(C_{p}, \\Delta V_{g,p}) = (5.0 \\times 10^{-15}\\ \\text{F}, +1.0\\ \\text{V})$\n- Test case $4$ (very small hold capacitor, large pedestal magnitude):\n  - $C_H = 2.0 \\times 10^{-14}\\ \\text{F}$\n  - $(C_{n}, \\Delta V_{g,n}) = (1.0 \\times 10^{-14}\\ \\text{F}, -1.2\\ \\text{V})$\n  - $(C_{p}, \\Delta V_{g,p}) = (8.0 \\times 10^{-15}\\ \\text{F}, +1.2\\ \\text{V})$\n- Test case $5$ (very large hold capacitor, bootstrapped gate swing):\n  - $C_H = 1.0 \\times 10^{-10}\\ \\text{F}$\n  - $(C_{n}, \\Delta V_{g,n}) = (2.0 \\times 10^{-14}\\ \\text{F}, -5.0\\ \\text{V})$\n  - $(C_{p}, \\Delta V_{g,p}) = (0.0\\ \\text{F}, 0.0\\ \\text{V})$\n- Test case $6$ (asymmetric overlap and clock swings):\n  - $C_H = 1.0 \\times 10^{-12}\\ \\text{F}$\n  - $(C_{n}, \\Delta V_{g,n}) = (7.0 \\times 10^{-15}\\ \\text{F}, -0.8\\ \\text{V})$\n  - $(C_{p}, \\Delta V_{g,p}) = (9.0 \\times 10^{-15}\\ \\text{F}, +1.2\\ \\text{V})$\n\nInterpretation and relation to SPICE schematics:\n- In a SPICE netlist, the above is modeled by explicit capacitors from each clock net to the hold node, e.g., $C\\_\\text{n\\_ov}$ between the $n$-gate net and the hold node with value $C_{n}$, and $C\\_\\text{p\\_ov}$ between the $p$-gate net and the hold node with value $C_{p}$. The pedestal error is then exactly the voltage step $\\Delta V_{\\text{out}}$ on the hold node produced by the ideal gate voltage steps $\\{\\Delta V_{g,i}\\}$ through these explicit capacitors when the switch channel is non-conducting.\n\nFinal output format:\n- Your program should produce a single line of output containing the results as a comma-separated list of the six pedestal errors, in volts, enclosed in square brackets, for example, `[result_1,result_2,...,result_6]`. Do not include any units or additional text in the output line. The numeric values must be floats in volts.",
            "solution": "The problem is valid. It is scientifically grounded in fundamental principles of circuit theory, is well-posed with all necessary information provided, and is expressed in objective, formal language. We may therefore proceed with the derivation and solution.\n\nThe objective is to derive the pedestal error, $\\Delta V_{\\text{out}}$, at an isolated hold node due to clock feedthrough from a set of $k$ gate-control signals. The analysis is based on the principle of charge conservation.\n\nLet $V_{\\text{out}}$ be the voltage at the hold node. This node is connected to ground through a hold capacitor $C_H$ and to $k$ independent clock nets through a set of overlap capacitors $\\{C_i\\}$ for $i \\in \\{1, \\dots, k\\}$. The voltage of the $i$-th clock net is denoted by $V_{g,i}$.\n\nThe total charge, $Q_{\\text{out}}$, stored on the plates of all capacitors connected to the hold node is the sum of the charge on the hold capacitor, $Q_{C_H}$, and the charges on the overlap capacitors, $\\{Q_{C_i}\\}$. Using the capacitor constitutive relation $Q = C \\Delta V$, where $\\Delta V$ is the voltage across the capacitor, we can express these charges:\n- The charge on the top plate of the hold capacitor $C_H$ (connected to the hold node) is:\n$$Q_{C_H} = C_H (V_{\\text{out}} - 0) = C_H V_{\\text{out}}$$\n- The charge on the plate of the $i$-th overlap capacitor $C_i$ that is connected to the hold node is:\n$$Q_{C_i} = C_i (V_{\\text{out}} - V_{g,i})$$\n\nThe total charge at the hold node is the sum of these individual charges:\n$$Q_{\\text{out}} = Q_{C_H} + \\sum_{i=1}^{k} Q_{C_i} = C_H V_{\\text{out}} + \\sum_{i=1}^{k} C_i (V_{\\text{out}} - V_{g,i})$$\nThis can be factored as:\n$$Q_{\\text{out}} = V_{\\text{out}} \\left( C_H + \\sum_{i=1}^{k} C_i \\right) - \\sum_{i=1}^{k} C_i V_{g,i}$$\n\nThe core principle for solving this problem is charge conservation. The problem states that the switch channel is open immediately after the clock edge, meaning the hold node is electrically isolated. Therefore, the total charge at this node must be conserved during the clock transition. Let $t^{-}$ be the instant just before the clock transition and $t^{+}$ be the instant just after. Charge conservation dictates that $Q_{\\text{out}}(t^{-}) = Q_{\\text{out}}(t^{+})$.\n\nAt time $t^{-}$, the voltages are $V_{\\text{out}}^{-}$ and $\\{V_{g,i}^{-}\\}$. The total charge is:\n$$Q_{\\text{out}}^{-} = V_{\\text{out}}^{-} \\left( C_H + \\sum_{i=1}^{k} C_i \\right) - \\sum_{i=1}^{k} C_i V_{g,i}^{-}$$\n\nAt time $t^{+}$, the voltages are $V_{\\text{out}}^{+}$ and $\\{V_{g,i}^{+}\\}$. The total charge is:\n$$Q_{\\text{out}}^{+} = V_{\\text{out}}^{+} \\left( C_H + \\sum_{i=1}^{k} C_i \\right) - \\sum_{i=1}^{k} C_i V_{g,i}^{+}$$\n\nEquating $Q_{\\text{out}}^{-} = Q_{\\text{out}}^{+}$:\n$$V_{\\text{out}}^{-} \\left( C_H + \\sum_{i=1}^{k} C_i \\right) - \\sum_{i=1}^{k} C_i V_{g,i}^{-} = V_{\\text{out}}^{+} \\left( C_H + \\sum_{i=1}^{k} C_i \\right) - \\sum_{i=1}^{k} C_i V_{g,i}^{+}$$\n\nOur goal is to find the pedestal error, defined as $\\Delta V_{\\text{out}} = V_{\\text{out}}^{+} - V_{\\text{out}}^{-}$. We rearrange the equation to isolate terms involving $V_{\\text{out}}$ and $V_{g,i}$:\n$$\\sum_{i=1}^{k} C_i V_{g,i}^{+} - \\sum_{i=1}^{k} C_i V_{g,i}^{-} = V_{\\text{out}}^{+} \\left( C_H + \\sum_{i=1}^{k} C_i \\right) - V_{\\text{out}}^{-} \\left( C_H + \\sum_{i=1}^{k} C_i \\right)$$\n\nFactoring both sides of the equation yields:\n$$\\sum_{i=1}^{k} C_i (V_{g,i}^{+} - V_{g,i}^{-}) = (V_{\\text{out}}^{+} - V_{\\text{out}}^{-}) \\left( C_H + \\sum_{i=1}^{k} C_i \\right)$$\n\nUsing the problem definitions $\\Delta V_{\\text{out}} = V_{\\text{out}}^{+} - V_{\\text{out}}^{-}$ and $\\Delta V_{g,i} = V_{g,i}^{+} - V_{g,i}^{-}$:\n$$\\sum_{i=1}^{k} C_i \\Delta V_{g,i} = \\Delta V_{\\text{out}} \\left( C_H + \\sum_{i=1}^{k} C_i \\right)$$\n\nFinally, solving for the pedestal error $\\Delta V_{\\text{out}}$, we arrive at the general expression:\n$$\\Delta V_{\\text{out}} = \\frac{\\sum_{i=1}^{k} C_i \\Delta V_{g,i}}{C_H + \\sum_{i=1}^{k} C_i}$$\n\nThis result is physically intuitive. The numerator, $\\sum_{i=1}^{k} C_i \\Delta V_{g,i}$, represents the total amount of charge injected onto the hold node due to the capacitive coupling from the changing gate voltages. This injected charge is then distributed across the total capacitance seen from the hold node, which is the parallel combination of all capacitors connected to it, $C_{\\text{total}} = C_H + \\sum_{i=1}^{k} C_i$. The resulting voltage change is thus $\\Delta V = \\Delta Q / C_{\\text{total}}$, consistent with our derived formula.\n\nThe key assumptions made in this derivation are:\n1.  The hold node is perfectly isolated (infinite impedance to any other node) after the switching event.\n2.  All capacitors ($C_H$ and $\\{C_i\\}$) are linear and time-invariant.\n3.  All other parasitic effects, notably channel charge injection, are neglected.\n4.  The clock voltage transitions are ideal instantaneous steps.\n\nFor the specific case of a complementary transmission gate with an n-channel and a p-channel device, we have $k=2$. Let the parameters for the n-channel device be $(C_n, \\Delta V_{g,n})$ and for the p-channel device be $(C_p, \\Delta V_{g,p})$. The formula becomes:\n$$\\Delta V_{\\text{out}} = \\frac{C_n \\Delta V_{g,n} + C_p \\Delta V_{g,p}}{C_H + C_n + C_p}$$\nThis form will be used to compute the numerical results for the provided test cases.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves for the pedestal error in a switched-capacitor circuit based on\n    a first-principles derivation.\n    \"\"\"\n\n    def calculate_pedestal_error(C_H, C_dVg_pairs):\n        \"\"\"\n        Calculates the pedestal error V_out(+)-V_out(-) from first principles.\n\n        The derivation is based on charge conservation at the isolated hold node.\n        The change in charge due to gate voltage steps must be balanced by the\n        change in charge stored on the total capacitance at the hold node.\n\n        Let Q_node be the total charge at the hold node.\n        Q_node = C_H * V_out + sum(C_i * (V_out - V_gi)) for all i.\n        Since the node is isolated, d(Q_node)/dt = 0, which implies Q_node is constant.\n        Q_node_before = Q_node_after\n        \n        C_H*V_out(-) + sum(C_i*(V_out(-) - V_gi(-))) = C_H*V_out(+) + sum(C_i*(V_out(+) - V_gi(+)))\n        \n        Rearranging to solve for dV_out = V_out(+) - V_out(-):\n        dV_out * (C_H + sum(C_i)) = sum(C_i * (V_gi(+) - V_gi(-)))\n        dV_out * (C_H + sum(C_i)) = sum(C_i * dV_gi)\n        \n        dV_out = sum(C_i * dV_gi) / (C_H + sum(C_i))\n\n        Args:\n            C_H (float): Hold capacitance in Farads.\n            C_dVg_pairs (list of tuples): A list where each tuple contains\n                                         (C_i, dV_gi), the overlap capacitance\n                                         and gate voltage step for one clock net.\n\n        Returns:\n            float: The pedestal error dV_out in Volts.\n        \"\"\"\n        # Numerator: sum(C_i * dV_gi)\n        # This is the total charge injected onto the hold node.\n        # It's calculated by summing the product of each overlap capacitance\n        # and its corresponding gate voltage step.\n        injected_charge = np.sum([C_i * dV_gi for C_i, dV_gi in C_dVg_pairs])\n\n        # Denominator: C_H + sum(C_i)\n        # This is the total capacitance seen from the isolated hold node.\n        # It's the parallel combination of the hold capacitor and all overlap capacitors.\n        sum_of_overlap_caps = np.sum([C_i for C_i, dV_gi in C_dVg_pairs])\n        total_capacitance = C_H + sum_of_overlap_caps\n\n        # The pedestal error is the injected charge divided by the total capacitance.\n        if total_capacitance == 0:\n            # Avoid division by zero, although physically C_H > 0\n            return 0.0\n        \n        pedestal_error = injected_charge / total_capacitance\n\n        return pedestal_error\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # Test case 1 (complementary transmission gate, moderate hold capacitor)\n        (1.0e-12, [(1.0e-14, -1.2), (8.0e-15, 1.2)]),\n        # Test case 2 (single n-channel device only)\n        (5.0e-13, [(5.0e-15, -1.0), (0.0, 0.0)]),\n        # Test case 3 (complementary transmission gate with ideal cancellation)\n        (5.0e-13, [(5.0e-15, -1.0), (5.0e-15, 1.0)]),\n        # Test case 4 (very small hold capacitor, large pedestal magnitude)\n        (2.0e-14, [(1.0e-14, -1.2), (8.0e-15, 1.2)]),\n        # Test case 5 (very large hold capacitor, bootstrapped gate swing)\n        (1.0e-10, [(2.0e-14, -5.0), (0.0, 0.0)]),\n        # Test case 6 (asymmetric overlap and clock swings)\n        (1.0e-12, [(7.0e-15, -0.8), (9.0e-15, 1.2)])\n    ]\n    \n    results = []\n    for C_H, C_dVg_pairs in test_cases:\n        result = calculate_pedestal_error(C_H, C_dVg_pairs)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "动态电压与频率调节（DVFS）的核心在于权衡性能和功耗。这个入门练习将通过一个具体的计算任务，帮助你直观地理解这一权衡。我们将为两个不同的电压-频率（V-f）工作点计算总能耗（包括动态能耗和漏电能耗）以及如能量延迟积（EDP）等复合评估指标。通过这个实践，你将能够量化地分析更高性能所带来的能耗代价，并理解不同的优化目标（例如，最小化能量或最小化EDP）为何会导向不同的“最佳”工作点选择。",
            "id": "4268163",
            "problem": "在电子设计自动化 (EDA) 流程中，一个处理器核心支持动态电压和频率缩放 (DVFS)。对于一个 $N$ 个时钟周期的固定工作负载，假设有以下经过充分测试的建模基础：\n\n- 每个周期的动态能耗由 $E_{\\text{dyn,cycle}} = C_{\\text{sw}} V^{2}$ 给出，其中 $C_{\\text{sw}}$ 是每个周期的有效开关电容，$V$ 是电源电压。\n- 执行时间由 $T = N/f$ 给出，其中 $f$ 是时钟频率。\n- 整个工作负载的总能耗为 $E = E_{\\text{dyn}} + E_{\\text{leak}}$，其中动态能耗 $E_{\\text{dyn}} = N C_{\\text{sw}} V^{2}$，漏电能耗 $E_{\\text{leak}} = P_{\\text{leak}} T$，漏电功率为 $P_{\\text{leak}} = V I_{\\text{leak}}(V)$。\n- 亚阈值和栅极漏电由一个经验性漏电流模型 $I_{\\text{leak}}(V) = I_{\\text{ref}} \\exp\\!\\big(\\beta (V - V_{\\text{ref}})\\big)$ 概括，其中 $I_{\\text{ref}}$ 是在 $V_{\\text{ref}}$ 时的参考漏电流。\n\n对于相同的工作负载，给定以下参数和 DVFS 工作点：\n- 工作负载大小: $N = 2.5 \\times 10^{9}$ 个周期。\n- 每个周期的有效开关电容: $C_{\\text{sw}} = 1.0 \\times 10^{-9}\\ \\mathrm{F}$。\n- 漏电模型参数: $I_{\\text{ref}} = 50 \\times 10^{-3}\\ \\mathrm{A}$，$V_{\\text{ref}} = 1.0\\ \\mathrm{V}$，$\\beta = 2.0\\ \\mathrm{V}^{-1}$。\n- DVFS 点: $(V,f) = (0.7\\ \\mathrm{V}, 1.0 \\times 10^{9}\\ \\mathrm{Hz})$ 和 $(1.0\\ \\mathrm{V}, 2.5 \\times 10^{9}\\ \\mathrm{Hz})$。\n\n基于以上基础，计算每个 DVFS 点的：\n1. 整个工作负载的总能耗 $E$。\n2. 能量-延迟积 (EDP)，定义为 $\\mathrm{EDP} = E \\cdot T$。\n然后，确定哪个点可以最小化能量-延迟平方积 (ED$^{2}$P)，其定义为 $\\mathrm{ED}^{2}\\mathrm{P} = E \\cdot T^{2}$。\n\n最后，报告这两点中最小的 ED$^{2}$P 值。将最终的最小 ED$^{2}$P 以 $\\mathrm{J \\cdot s^{2}}$ 为单位表示，并将您的答案四舍五入到四位有效数字。",
            "solution": "我们从给定的建模基础开始。对于给定的电源电压 $V$ 和频率 $f$，以及 $N$ 个周期工作负载：\n\n1. 执行时间为 $T = \\frac{N}{f}$。\n2. 动态能耗为 $E_{\\text{dyn}} = N C_{\\text{sw}} V^{2}$。\n3. 漏电功率为 $P_{\\text{leak}} = V I_{\\text{leak}}(V)$，其中 $I_{\\text{leak}}(V) = I_{\\text{ref}} \\exp\\!\\big(\\beta (V - V_{\\text{ref}})\\big)$。\n4. 漏电能耗为 $E_{\\text{leak}} = P_{\\text{leak}} T = V I_{\\text{leak}}(V) \\cdot \\frac{N}{f}$。\n5. 总能耗为 $E = E_{\\text{dyn}} + E_{\\text{leak}} = N C_{\\text{sw}} V^{2} + V I_{\\text{leak}}(V) \\cdot \\frac{N}{f}$。\n6. 能量-延迟积为 $\\mathrm{EDP} = E \\cdot T = \\left(N C_{\\text{sw}} V^{2} + V I_{\\text{leak}}(V) \\cdot \\frac{N}{f}\\right) \\cdot \\frac{N}{f}$。\n7. 能量-延迟平方积为 $\\mathrm{ED}^{2}\\mathrm{P} = E \\cdot T^{2} = \\left(N C_{\\text{sw}} V^{2} + V I_{\\text{leak}}(V) \\cdot \\frac{N}{f}\\right) \\cdot \\left(\\frac{N}{f}\\right)^{2}$。\n\n我们将使用给定的常数，为两个 DVFS 点评估 $E$、$\\mathrm{EDP}$ 和 $\\mathrm{ED}^{2}\\mathrm{P}$：\n- $N = 2.5 \\times 10^{9}$,\n- $C_{\\text{sw}} = 1.0 \\times 10^{-9}\\ \\mathrm{F}$,\n- $I_{\\text{ref}} = 50 \\times 10^{-3}\\ \\mathrm{A}$,\n- $V_{\\text{ref}} = 1.0\\ \\mathrm{V}$,\n- $\\beta = 2.0\\ \\mathrm{V}^{-1}$.\n\n点 A: $(V,f) = (0.7,\\ 1.0 \\times 10^{9})$。\n- 执行时间：\n$$T_{A} = \\frac{N}{f} = \\frac{2.5 \\times 10^{9}}{1.0 \\times 10^{9}} = 2.5\\ \\mathrm{s}.$$\n- 动态能耗：\n$$E_{\\text{dyn},A} = N C_{\\text{sw}} V^{2} = \\left(2.5 \\times 10^{9}\\right)\\left(1.0 \\times 10^{-9}\\right)\\left(0.7^{2}\\right) = 1.225\\ \\mathrm{J}.$$\n- 漏电流：\n$$I_{\\text{leak}}(0.7) = I_{\\text{ref}} \\exp\\!\\big(\\beta (0.7 - V_{\\text{ref}})\\big) = (50 \\times 10^{-3}) \\exp\\!\\big(2.0 \\cdot (-0.3)\\big) = (50 \\times 10^{-3}) \\exp(-0.6).$$\n在最后一步之前，我们以符号形式使用 $\\exp(-0.6)$，漏电功率为\n$$P_{\\text{leak},A} = V I_{\\text{leak}}(V) = 0.7 \\cdot (50 \\times 10^{-3}) \\exp(-0.6).$$\n漏电能耗为\n$$E_{\\text{leak},A} = P_{\\text{leak},A} \\cdot T_{A} = 0.7 \\cdot (50 \\times 10^{-3}) \\exp(-0.6) \\cdot 2.5.$$\n现在进行数值计算，$\\exp(-0.6) \\approx 0.548811636$，所以\n$$I_{\\text{leak}}(0.7) \\approx (50 \\times 10^{-3}) \\cdot 0.548811636 \\approx 27.4405818 \\times 10^{-3}\\ \\mathrm{A},$$\n$$P_{\\text{leak},A} \\approx 0.7 \\cdot 27.4405818 \\times 10^{-3} \\approx 19.208406 \\times 10^{-3}\\ \\mathrm{W},$$\n$$E_{\\text{leak},A} \\approx 19.208406 \\times 10^{-3} \\cdot 2.5 \\approx 0.048021015\\ \\mathrm{J}.$$\n- 总能耗：\n$$E_{A} = E_{\\text{dyn},A} + E_{\\text{leak},A} \\approx 1.225 + 0.048021015 \\approx 1.273021015\\ \\mathrm{J}.$$\n- 能量-延迟积：\n$$\\mathrm{EDP}_{A} = E_{A} \\cdot T_{A} \\approx 1.273021015 \\cdot 2.5 \\approx 3.1825525375\\ \\mathrm{J \\cdot s}.$$\n- 能量-延迟平方积：\n$$\\mathrm{ED}^{2}\\mathrm{P}_{A} = E_{A} \\cdot T_{A}^{2} \\approx 1.273021015 \\cdot (2.5)^{2} = 1.273021015 \\cdot 6.25 \\approx 7.95638134375\\ \\mathrm{J \\cdot s^{2}}.$$\n\n点 B: $(V,f) = (1.0,\\ 2.5 \\times 10^{9})$。\n- 执行时间：\n$$T_{B} = \\frac{N}{f} = \\frac{2.5 \\times 10^{9}}{2.5 \\times 10^{9}} = 1.0\\ \\mathrm{s}.$$\n- 动态能耗：\n$$E_{\\text{dyn},B} = N C_{\\text{sw}} V^{2} = \\left(2.5 \\times 10^{9}\\right)\\left(1.0 \\times 10^{-9}\\right)\\left(1.0^{2}\\right) = 2.5\\ \\mathrm{J}.$$\n- 漏电流：\n$$I_{\\text{leak}}(1.0) = I_{\\text{ref}} \\exp\\!\\big(\\beta (1.0 - 1.0)\\big) = I_{\\text{ref}} \\cdot \\exp(0) = 50 \\times 10^{-3}\\ \\mathrm{A}.$$\n漏电功率和能耗：\n$$P_{\\text{leak},B} = 1.0 \\cdot (50 \\times 10^{-3}) = 50 \\times 10^{-3}\\ \\mathrm{W},\\quad E_{\\text{leak},B} = P_{\\text{leak},B} \\cdot T_{B} = 50 \\times 10^{-3} \\cdot 1.0 = 0.05\\ \\mathrm{J}.$$\n- 总能耗：\n$$E_{B} = E_{\\text{dyn},B} + E_{\\text{leak},B} = 2.5 + 0.05 = 2.55\\ \\mathrm{J}.$$\n- 能量-延迟积：\n$$\\mathrm{EDP}_{B} = E_{B} \\cdot T_{B} = 2.55 \\cdot 1.0 = 2.55\\ \\mathrm{J \\cdot s}.$$\n- 能量-延迟平方积：\n$$\\mathrm{ED}^{2}\\mathrm{P}_{B} = E_{B} \\cdot T_{B}^{2} = 2.55 \\cdot (1.0)^{2} = 2.55\\ \\mathrm{J \\cdot s^{2}}.$$\n\nED$^{2}$P 最小化比较：\n- $\\mathrm{ED}^{2}\\mathrm{P}_{A} \\approx 7.95638134375\\ \\mathrm{J \\cdot s^{2}}$,\n- $\\mathrm{ED}^{2}\\mathrm{P}_{B} = 2.55\\ \\mathrm{J \\cdot s^{2}}$.\n\n因此，DVFS 点 $(1.0\\ \\mathrm{V}, 2.5 \\times 10^{9}\\ \\mathrm{Hz})$ 使 ED$^{2}$P 最小化。最小的 ED$^{2}$P 值为 $2.55\\ \\mathrm{J \\cdot s^{2}}$。四舍五入到四位有效数字，结果为 $2.550\\ \\mathrm{J \\cdot s^{2}}$。",
            "answer": "$$\\boxed{2.550}$$"
        },
        {
            "introduction": "在上一个练习的基础上，我们现在从具体计算转向一个更根本的理论问题。这个练习要求我们推导出一个关于能效计算的基本原则：对于一个需要在确定时间内完成固定工作量的任务，最节能的策略是以最低的恒定速度运行。你将利用凸函数和詹森不等式（Jensen's inequality）的性质来严格证明这一结论，该结论是许多高级DVFS调度算法的理论基石。",
            "id": "4268142",
            "problem": "考虑一个在互补金属氧化物半导体 (CMOS) 中实现并通过动态电压和频率缩放 (DVFS) 控制的数字核心，DVFS 在电子设计自动化 (EDA) 流程中被广泛使用。假设动态（开关）功率由 $P_{\\mathrm{dyn}}=\\alpha_{\\mathrm{sw}}\\,C\\,V^{2}\\,f$ 给出，其中 $\\alpha_{\\mathrm{sw}}$ 是开关活动因子， $C$ 是有效开关电容， $V$ 是电源电压， $f$ 是时钟频率。进一步假设一个标准电压-频率关系为 $f=k\\,(V-V_{T})^{m}$ (对于 $VV_{T}$)，其中 $V_{T}$ 是有效阈值电压， $k0$ 是一个与技术相关的常数， $m0$ 是一个经验观察到的指数参数，用于描述延迟如何随高于阈值的电源电压而变化。忽略漏电功率和短路功率。\n\n在一个固定的时间范围 $T0$ 内，系统必须完成一个以所需时钟周期数衡量的固定工作量 $W0$，这施加了约束 $\\int_{0}^{T}f\\!\\left(t\\right)\\,dt=W$。DVFS 随时间设置 $V\\!\\left(t\\right)$，从而也设置了 $f\\!\\left(t\\right)$，其能量为 $E=\\int_{0}^{T}P_{\\mathrm{dyn}}\\!\\left(t\\right)\\,dt$。假设可行性，即存在 $V\\!\\left(t\\right)\\geq V_{T}$ 使得约束在 $[0,T]$ 上可以被满足。\n\n仅从上述定义出发，推导在固定工作量、固定时间范围约束下最小化能量的最优静态工作点。具体来说：\n- 证明在给定的 $f$–$V$ 关系下，作为 $f$ 函数的能量率函数对于 $f\\geq 0$ 是凸的。\n- 利用此凸性论证最优调度是时不变的（即 $f\\!\\left(t\\right)$ 在 $[0,T]$ 上是常数）。\n- 以 $\\alpha_{\\mathrm{sw}}$、 $C$、 $k$、 $V_{T}$、 $m$、 $W$ 和 $T$ 的解析表达式形式，计算得出的最优恒定频率 $f^{*}$ 和相应的最优恒定电压 $V^{*}$。\n\n将您的最终答案表示为解析形式的数对 $\\left(f^{*},V^{*}\\right)$。不需要进行数值四舍五入，最终数对中也无需提供单位。",
            "solution": "问题在于找到一个最优静态工作点，该工作点由一个恒定频率 $f^{*}$ 和一个恒定电压 $V^{*}$ 表征，旨在最小化在固定时间范围 $T$ 内完成固定工作量 $W$ 所需的总能量 $E$。解答过程按提示分为三步：首先，我们确立功率-频率关系的凸性；其次，我们利用此凸性证明恒定频率调度是最优的；第三，我们计算最优频率和电压的具体值。\n\n首先，我们必须将动态功率 $P_{\\mathrm{dyn}}$ 表示为频率 $f$ 的函数。给定的关系式是：\n$P_{\\mathrm{dyn}} = \\alpha_{\\mathrm{sw}}\\,C\\,V^{2}\\,f$\n$f = k\\,(V-V_{T})^{m}$ for $V  V_{T}$\n\n从第二个方程中，我们求解电压 $V$ 作为频率 $f$ 的函数。由于 $f  0$（因为 $V  V_T$）且 $k0$，我们可以写出：\n$\\frac{f}{k} = (V-V_{T})^{m}$\n$\\left(\\frac{f}{k}\\right)^{\\frac{1}{m}} = V-V_{T}$\n$V(f) = V_{T} + \\left(\\frac{f}{k}\\right)^{\\frac{1}{m}}$\n\n将 $V(f)$ 的这个表达式代入动态功率的方程，得到 $P_{\\mathrm{dyn}}$ 作为 $f$ 的函数：\n$P_{\\mathrm{dyn}}(f) = \\alpha_{\\mathrm{sw}}\\,C\\,f\\,\\left(V_{T} + \\left(\\frac{f}{k}\\right)^{\\frac{1}{m}}\\right)^{2}$\n\n为了证明 $P_{\\mathrm{dyn}}(f)$ 对于 $f \\ge 0$ 是一个凸函数，我们必须证明其二阶导数 $\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}}$ 对于 $f \\ge 0$ 是非负的。让我们展开 $P_{\\mathrm{dyn}}(f)$ 的表达式：\n$P_{\\mathrm{dyn}}(f) = \\alpha_{\\mathrm{sw}}\\,C\\,f\\,\\left(V_{T}^{2} + 2\\,V_{T}\\left(\\frac{f}{k}\\right)^{\\frac{1}{m}} + \\left(\\frac{f}{k}\\right)^{\\frac{2}{m}}\\right)$\n$P_{\\mathrm{dyn}}(f) = \\alpha_{\\mathrm{sw}}\\,C\\,\\left(V_{T}^{2}\\,f + 2\\,V_{T}\\,k^{-\\frac{1}{m}}\\,f^{1+\\frac{1}{m}} + k^{-\\frac{2}{m}}\\,f^{1+\\frac{2}{m}}\\right)$\n\n现在，我们计算关于 $f$ 的一阶导数：\n$\\frac{dP_{\\mathrm{dyn}}}{df} = \\alpha_{\\mathrm{sw}}\\,C\\,\\left(V_{T}^{2} + 2\\,V_{T}\\,k^{-\\frac{1}{m}}\\left(1+\\frac{1}{m}\\right)f^{\\frac{1}{m}} + k^{-\\frac{2}{m}}\\left(1+\\frac{2}{m}\\right)f^{\\frac{2}{m}}\\right)$\n\n接下来，我们计算二阶导数：\n$\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}} = \\alpha_{\\mathrm{sw}}\\,C\\,\\left(0 + 2\\,V_{T}\\,k^{-\\frac{1}{m}}\\left(1+\\frac{1}{m}\\right)\\left(\\frac{1}{m}\\right)f^{\\frac{1}{m}-1} + k^{-\\frac{2}{m}}\\left(1+\\frac{2}{m}\\right)\\left(\\frac{2}{m}\\right)f^{\\frac{2}{m}-1}\\right)$\n$\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}} = \\alpha_{\\mathrm{sw}}\\,C\\,\\left( \\frac{2\\,V_{T}}{m\\,k^{\\frac{1}{m}}}\\left(1+\\frac{1}{m}\\right)f^{\\frac{1-m}{m}} + \\frac{2}{m\\,k^{\\frac{2}{m}}}\\left(1+\\frac{2}{m}\\right)f^{\\frac{2-m}{m}} \\right)$\n\n我们分析当 $f0$ 时这个表达式的符号。问题陈述中说明 $\\alpha_{\\mathrm{sw}}0$、 $C0$、 $k0$、 $m0$，并且 $V_{T}$ 是阈值电压，对于物理 CMOS 器件来说是正的 ($V_{T}0$)。因此，和式中两项的每个因子都是正的：$\\alpha_{\\mathrm{sw}}$、 $C$、 $2$、 $m$、 $k$、 $V_{T}$、 $(1+\\frac{1}{m})$、 $(1+\\frac{2}{m})$。由于 $f0$，项 $f^{\\frac{1-m}{m}}$ 和 $f^{\\frac{2-m}{m}}$ 也是正的。因此，$\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}}$ 的整个表达式在 $f  0$ 时是正的。这证明了 $P_{\\mathrm{dyn}}(f)$ 在 $f0$ 时是一个严格凸函数。由于该函数及其导数在 $f=0$ 处是连续的，所以它在 $f \\ge 0$ 上是凸的。\n\n第二，我们利用此凸性来证明最优调度是时不变的。总能量为 $E = \\int_{0}^{T}P_{\\mathrm{dyn}}(f(t))\\,dt$，约束条件为 $\\int_{0}^{T}f(t)\\,dt=W$。我们希望在该约束下最小化 $E$。\n让我们将时间范围 $T$ 内的平均频率定义为 $\\bar{f} = \\frac{1}{T}\\int_{0}^{T}f(t)\\,dt$。根据约束条件，我们有 $\\bar{f} = \\frac{W}{T}$。\n由于 $P_{\\mathrm{dyn}}(f)$ 是一个凸函数，我们可以应用积分形式的琴生不等式（Jensen's inequality），该不等式指出，对于一个凸函数 $\\phi$ 和在 $[a, b]$ 上的可积函数 $g(t)$：\n$\\phi\\left(\\frac{1}{b-a}\\int_{a}^{b}g(t)\\,dt\\right) \\le \\frac{1}{b-a}\\int_{a}^{b}\\phi(g(t))\\,dt$\n将此应用于我们的问题，其中 $\\phi=P_{\\mathrm{dyn}}$，$g(t)=f(t)$，区间为 $[0, T]$：\n$P_{\\mathrm{dyn}}\\left(\\frac{1}{T}\\int_{0}^{T}f(t)\\,dt\\right) \\le \\frac{1}{T}\\int_{0}^{T}P_{\\mathrm{dyn}}(f(t))\\,dt$\n代入 $\\bar{f} = \\frac{W}{T}$ 和 $E = \\int_{0}^{T}P_{\\mathrm{dyn}}(f(t))\\,dt$：\n$P_{\\mathrm{dyn}}\\left(\\frac{W}{T}\\right) \\le \\frac{E}{T}$\n这可以重新整理，给出能量的一个下界：\n$E \\ge T \\cdot P_{\\mathrm{dyn}}\\left(\\frac{W}{T}\\right)$\n右边的项 $T \\cdot P_{\\mathrm{dyn}}(\\frac{W}{T})$ 表示如果频率保持在平均值 $\\frac{W}{T}$ 不变时消耗的能量。不等式表明，任何时变的频率曲线 $f(t)$ 所导致的能量消耗都将大于或等于这种恒定频率情况。当且仅当对于所有 $t \\in [0, T]$，$f(t)$ 是常数时，琴生不等式中的等号成立，此时达到最小能量。因此，最优频率调度是恒定频率。\n\n第三，我们计算最优恒定频率 $f^{*}$ 及其对应的电压 $V^{*}$。根据上述推理，最优策略是保持一个恒定频率 $f(t) = f^{*}$ 以满足工作量约束。\n$\\int_{0}^{T} f^{*} \\,dt = f^{*} \\int_{0}^{T} dt = f^{*} T = W$\n求解 $f^{*}$ 得：\n$f^{*} = \\frac{W}{T}$\n\n这就是最优恒定频率。为了找到对应的最优恒定电压 $V^{*}$，我们使用电压-频率关系式 $V(f) = V_{T} + (f/k)^{1/m}$，并在 $f=f^{*}$ 处求值：\n$V^{*} = V_{T} + \\left(\\frac{f^{*}}{k}\\right)^{\\frac{1}{m}}$\n代入 $f^{*}$ 的表达式：\n$V^{*} = V_{T} + \\left(\\frac{W/T}{k}\\right)^{\\frac{1}{m}} = V_{T} + \\left(\\frac{W}{kT}\\right)^{\\frac{1}{m}}$\n\n最终得到的最优静态工作点是数对 $(f^{*}, V^{*})$。条件 $V^{*}  V_{T}$ 是满足的，因为 $W, k, T, m$ 都是正数，使得第二项为正。这与可行性假设一致。\n最终的解析表达式为：\n$f^{*} = \\frac{W}{T}$\n$V^{*} = V_{T} + \\left(\\frac{W}{kT}\\right)^{\\frac{1}{m}}$",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{W}{T} \\\\ V_T + \\left(\\frac{W}{kT}\\right)^{\\frac{1}{m}} \\end{pmatrix}}$$"
        },
        {
            "introduction": "理论为我们指明了理想的工作点，但现实世界的硬件实现总伴随着开销。最后一个练习将引入DVFS在实际应用中的一个关键限制：电压调节器在不同能级间切换所需的时间和能量成本。我们将进行一次盈亏平衡分析，以判断对于一个短暂的空闲周期，切换到低功耗状态是否真的能够节省能量。这个实践揭示了DVFS并非“免费的午餐”，其应用必须经过精密的计算和权衡。",
            "id": "4268190",
            "problem": "一个多核处理器采用动态电压与频率调节 (DVFS) 技术，以在内存受限区间内降低能耗。考虑两个工作点：一个高性能点，其电源电压为 $V_{H} = 1.0\\ \\mathrm{V}$，时钟频率为 $f_{H} = 1.2\\times 10^{9}\\ \\mathrm{Hz}$；以及一个低功耗点，其电源电压为 $V_{L} = 0.6\\ \\mathrm{V}$，时钟频率为 $f_{L} = 4.0\\times 10^{8}\\ \\mathrm{Hz}$。该处理器即将进入一个持续时间为 $T_{b} = 50\\ \\mathrm{\\mu s}$ 的内存受限区间（一个由停顿主导、性能不受频率限制的阶段）。在此区间之前和之后，处理器必须在高性能点下运行。\n\n假设以下基本条件：\n- 在给定工作负载下，互补金属氧化物半导体 (CMOS) 的动态功率由 $P_{\\text{dyn}} = C_{\\text{eff}} V^{2} f$ 决定，其中 $C_{\\text{eff}}$ 是此内存受限阶段活动所对应的有效开关电容。\n- 针对此特定阶段，特性分析得出 $C_{\\text{eff}} = 33.3\\ \\mathrm{pF}$。\n- 当核心在此内存受限区间内被时钟门控时，主要的非动态功耗分量是漏电。技术特性分析得出，在 $V_{H}$ 时的漏电功率为 $P_{\\text{leak},H} = 120\\ \\mathrm{mW}$，在 $V_{L}$ 时的漏电功率为 $P_{\\text{leak},L} = 30\\ \\mathrm{mW}$。\n- 片上电压调节模块 (VRM) 每次转换（包括降压和升压）需要 $t_{s} = 20\\ \\mathrm{\\mu s}$ 的稳定时间。每次转换会产生 $E_{\\mathrm{tr}} = 5\\ \\mathrm{\\mu J}$ 的转换能量开销。假设在调节器转换期间，相对于维持在高性能点，没有能量节省。\n\n仅从定义 $P = \\frac{dE}{dt}$ 和上述 CMOS 动态功率缩放定律出发，推导在内存受限区间内尝试降至 $(V_{L}, f_{L})$ 然后再返回 $(V_{H}, f_{H})$ 时的净能量变化 $\\Delta E$（使用 DVFS 后的能量减去不使用 DVFS 的能量），并考虑转换稳定时间和转换能量开销。正的 $\\Delta E$ 表示能量惩罚，负的 $\\Delta E$ 表示净能量节省。\n\n数值计算 $\\Delta E$，并将最终结果以 $\\mathrm{\\mu J}$ 为单位表示，四舍五入至三位有效数字。",
            "solution": "目标是计算净能量变化 $\\Delta E$，即在持续时间为 $T_{b}$ 的内存受限区间内，使用 DVFS 的总能耗与不使用 DVFS 的总能耗之差。\n$$\n\\Delta E = E_{\\text{with\\_DVFS}} - E_{\\text{without\\_DVFS}}\n$$\n正的 $\\Delta E$ 表示能量惩罚，而负的 $\\Delta E$ 表示能量节省。\n\n我们可以通过考虑 DVFS 过程中不同阶段的贡献来分析能量变化。总区间 $T_b$ 可以在概念上进行划分，并计算每个部分的能量变化。总变化 $\\Delta E$ 是这些部分变化的总和。\n\n基准情景是在高性能点 $(V_H, f_H)$ 连续运行。DVFS 情景涉及转换到低功耗点 $(V_L, f_L)$，在该点运行，然后再转换回来。\n\n区间的总持续时间为 $T_b = 50\\ \\mathrm{\\mu s}$。DVFS 过程包括两次转换，每次转换需要 $t_s = 20\\ \\mathrm{\\mu s}$ 的稳定时间。总转换时间为 $2 \\cdot t_s = 2 \\cdot 20\\ \\mathrm{\\mu s} = 40\\ \\mathrm{\\mu s}$。\n在低功耗点 $(V_L, f_L)$ 运行的可用时间为：\n$$\nT_{\\text{low}} = T_{b} - 2t_s = 50\\ \\mathrm{\\mu s} - 40\\ \\mathrm{\\mu s} = 10\\ \\mathrm{\\mu s}\n$$\n净能量变化 $\\Delta E$ 是转换带来的能量开销与低功耗运行期间能量变化（节省）的总和。\n\n1.  **转换期间的能量变化：**\n    问题陈述了与转换相关的两种成本：\n    a) 在转换期间（总持续时间为 $2t_s$），相对于维持在高性能点，没有能量节省。这意味着在此期间，DVFS 和非 DVFS 情景下的能耗相同。因此，区间此部分对能量*变化* $\\Delta E$ 的贡献为零。\n    b) 每次转换有 $E_{\\text{tr}} = 5\\ \\mathrm{\\mu J}$ 的显式转换能量开销。由于有两次转换（降压和升压），总开销为 $2E_{\\text{tr}}$。这是一个直接的惩罚，对 $\\Delta E$ 作出正贡献。\n    $$\n    \\Delta E_{\\text{transitions}} = 2E_{\\text{tr}} = 2 \\cdot 5\\ \\mathrm{\\mu J} = 10\\ \\mathrm{\\mu J}\n    $$\n\n2.  **低功耗运行期间的能量变化：**\n    在持续时间 $T_{\\text{low}}$ 内，处理器在 $(V_L, f_L)$ 而不是 $(V_H, f_H)$ 下运行。此期间的能量变化为 $(P_{\\text{total},L} - P_{\\text{total},H}) \\times T_{\\text{low}}$，其中 $P_{\\text{total}}$ 是总功耗。\n\n    首先，我们必须计算每个工作点的总功耗。总功耗是动态功耗 $P_{\\text{dyn}}$ 和漏电功耗 $P_{\\text{leak}}$ 的和。\n    -   在高性能点 $(V_H, f_H)$：\n        $P_{\\text{dyn},H} = C_{\\text{eff}} V_H^2 f_H = (33.3 \\times 10^{-12}\\ \\mathrm{F}) \\cdot (1.0\\ \\mathrm{V})^2 \\cdot (1.2 \\times 10^9\\ \\mathrm{Hz}) = 0.03996\\ \\mathrm{W}$\n        $P_{\\text{total},H} = P_{\\text{dyn},H} + P_{\\text{leak},H} = 0.03996\\ \\mathrm{W} + 120\\ \\mathrm{mW} = 0.03996\\ \\mathrm{W} + 0.120\\ \\mathrm{W} = 0.15996\\ \\mathrm{W}$\n\n    -   在低功耗点 $(V_L, f_L)$：\n        $P_{\\text{dyn},L} = C_{\\text{eff}} V_L^2 f_L = (33.3 \\times 10^{-12}\\ \\mathrm{F}) \\cdot (0.6\\ \\mathrm{V})^2 \\cdot (4.0 \\times 10^8\\ \\mathrm{Hz}) = 0.0047952\\ \\mathrm{W}$\n        $P_{\\text{total},L} = P_{\\text{dyn},L} + P_{\\text{leak},L} = 0.0047952\\ \\mathrm{W} + 30\\ \\mathrm{mW} = 0.0047952\\ \\mathrm{W} + 0.030\\ \\mathrm{W} = 0.0347952\\ \\mathrm{W}$\n\n    $T_{\\text{low}}$ 期间的能量变化为：\n    $$\n    \\Delta E_{\\text{low}} = (P_{\\text{total},L} - P_{\\text{total},H}) \\cdot T_{\\text{low}}\n    $$\n    $$\n    \\Delta E_{\\text{low}} = (0.0347952\\ \\mathrm{W} - 0.15996\\ \\mathrm{W}) \\cdot (10 \\times 10^{-6}\\ \\mathrm{s})\n    $$\n    $$\n    \\Delta E_{\\text{low}} = (-0.1251648\\ \\mathrm{W}) \\cdot (10 \\times 10^{-6}\\ \\mathrm{s}) = -1.251648 \\times 10^{-6}\\ \\mathrm{J} = -1.251648\\ \\mathrm{\\mu J}\n    $$\n    这个负值代表节省的能量。\n\n3.  **净能量变化：**\n    总净能量变化 $\\Delta E$ 是转换开销带来的变化与低功耗运行期间带来的变化之和。\n    $$\n    \\Delta E = \\Delta E_{\\text{transitions}} + \\Delta E_{\\text{low}}\n    $$\n    $$\n    \\Delta E = 10\\ \\mathrm{\\mu J} + (-1.251648\\ \\mathrm{\\mu J}) = 8.748352\\ \\mathrm{\\mu J}\n    $$\n\n问题要求将结果四舍五入至三位有效数字。\n$$\n\\Delta E \\approx 8.75\\ \\mathrm{\\mu J}\n$$\n正值表明，由于相对于较短的停顿持续时间，转换时间长且转换能量开销大，尝试使用 DVFS 反而导致了净能量惩罚。",
            "answer": "$$\n\\boxed{8.75}\n$$"
        }
    ]
}
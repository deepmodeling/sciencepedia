{
    "hands_on_practices": [
        {
            "introduction": "Effective shielding is a delicate balance of competing objectives. While inserting a shield wire between a signal aggressor and victim is a powerful technique for reducing capacitive crosstalk, it comes at a cost: the shield consumes valuable routing space and increases the victim line's own capacitance to ground, which can degrade its signal timing. This practice challenges you to navigate this fundamental trade-off by setting up and solving a constrained optimization problem. You will determine the optimal shield width that minimizes crosstalk under realistic geometric and electrical constraints, a core skill in modern physical design. ",
            "id": "4297054",
            "problem": "An aggressor and a victim interconnect on the same metal layer in a silicon integrated circuit are routed in parallel within a single routing channel of fixed lateral extent. To reduce capacitive crosstalk, a grounded shield line of width $w_{s}$ is inserted between the aggressor (width $w_{a}$) and the victim (width $w_{v}$). The two edge-to-edge spacings, aggressor-to-shield and shield-to-victim, are designed equal by symmetry and denoted $g$. The total lateral routing channel height available to these three conductors and the two spacings is fixed and equals $W_{ch}$, so the geometric constraint is\n$$w_{a} + w_{v} + w_{s} + 2 g = W_{ch}.$$\nAll three lines are of thickness $t$ and are embedded in a homogeneous dielectric of permittivity $\\epsilon$. Assume quasi-static electrostatics: the electric field obeys $\\nabla \\times \\mathbf{E} = \\mathbf{0}$ and $\\nabla \\cdot \\mathbf{D} = \\rho$ with $\\mathbf{D} = \\epsilon \\mathbf{E}$, and capacitance is defined as $C = Q/V$. The victim’s baseline self capacitance to the substrate is fixed and independent of the shield, so the increase in victim self capacitance per unit length due to the shield is dominated by the lateral sidewall coupling between the victim and the grounded shield and may be modeled by the parallel-plate approximation between two vertical faces separated by $g$, yielding\n$$C_{\\text{self,inc}}(g) = \\frac{\\epsilon t}{g}.$$\nTo avoid degrading the victim’s delay, this increase must be bounded above by a specified limit $\\Delta C_{\\text{self}}$, i.e.,\n$$\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}.$$\nThe near-end crosstalk is proportional to the mutual capacitance per unit length between the aggressor and victim. In the presence of a finite-width grounded shield, the mutual capacitance is dominated by fringing fields that “leak” around the shield edges. Under the two-dimensional Laplace equation in the cross-section and separation-of-variables in the shielded slot geometry, the lowest spatial harmonic yields an exponentially decaying field across the shield width; accordingly, the mutual capacitance can be approximated as\n$$C_{m}(w_{s}, g) = C_{m0} \\exp\\!\\left(-\\frac{\\pi w_{s}}{2 g}\\right),$$\nwhere $C_{m0}$ is the mutual capacitance per unit length between the aggressor and victim in the absence of a shield for the same $g$-scaled geometry. This approximation captures the exponential suppression of coupling with increasing $w_{s}/g$ under quasi-static field confinement.\n\nSubject to the above physical laws and constraints, determine the shield width $w_{s}$ that minimizes $C_{m}(w_{s}, g)$ while satisfying the routing channel height and the bound on $C_{\\text{self,inc}}(g)$. Assume the parameters are such that a feasible design exists with a nonnegative shield width. Express your final answer as a closed-form analytic expression in terms of $W_{ch}$, $w_{a}$, $w_{v}$, $\\epsilon$, $t$, and $\\Delta C_{\\text{self}}$. No numerical evaluation is required.",
            "solution": "The user wants me to solve the following problem:\nAn aggressor and a victim interconnect on the same metal layer in a silicon integrated circuit are routed in parallel within a single routing channel of fixed lateral extent. To reduce capacitive crosstalk, a grounded shield line of width $w_{s}$ is inserted between the aggressor (width $w_{a}$) and the victim (width $w_{v}$). The two edge-to-edge spacings, aggressor-to-shield and shield-to-victim, are designed equal by symmetry and denoted $g$. The total lateral routing channel height available to these three conductors and the two spacings is fixed and equals $W_{ch}$, so the geometric constraint is\n$$w_{a} + w_{v} + w_{s} + 2 g = W_{ch}.$$\nAll three lines are of thickness $t$ and are embedded in a homogeneous dielectric of permittivity $\\epsilon$. Assume quasi-static electrostatics: the electric field obeys $\\nabla \\times \\mathbf{E} = \\mathbf{0}$ and $\\nabla \\cdot \\mathbf{D} = \\rho$ with $\\mathbf{D} = \\epsilon \\mathbf{E}$, and capacitance is defined as $C = Q/V$. The victim’s baseline self capacitance to the substrate is fixed and independent of the shield, so the increase in victim self capacitance per unit length due to the shield is dominated by the lateral sidewall coupling between the victim and the grounded shield and may be modeled by the parallel-plate approximation between two vertical faces separated by $g$, yielding\n$$C_{\\text{self,inc}}(g) = \\frac{\\epsilon t}{g}.$$\nTo avoid degrading the victim’s delay, this increase must be bounded above by a specified limit $\\Delta C_{\\text{self}}$, i.e.,\n$$\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}.$$\nThe near-end crosstalk is proportional to the mutual capacitance per unit length between the aggressor and victim. In the presence of a finite-width grounded shield, the mutual capacitance is dominated by fringing fields that “leak” around the shield edges. Under the two-dimensional Laplace equation in the cross-section and separation-of-variables in the shielded slot geometry, the lowest spatial harmonic yields an exponentially decaying field across the shield width; accordingly, the mutual capacitance can be approximated as\n$$C_{m}(w_{s}, g) = C_{m0} \\exp\\!\\left(-\\frac{\\pi w_{s}}{2 g}\\right),$$\nwhere $C_{m0}$ is the mutual capacitance per unit length between the aggressor and victim in the absence of a shield for the same $g$-scaled geometry. This approximation captures the exponential suppression of coupling with increasing $w_{s}/g$ under quasi-static field confinement.\n\nSubject to the above physical laws and constraints, determine the shield width $w_{s}$ that minimizes $C_{m}(w_{s}, g)$ while satisfying the routing channel height and the bound on $C_{\\text{self,inc}}(g)$. Assume the parameters are such that a feasible design exists with a nonnegative shield width. Express your final answer as a closed-form analytic expression in terms of $W_{ch}$, $w_{a}$, $w_{v}$, $\\epsilon$, $t$, and $\\Delta C_{\\text{self}}$. No numerical evaluation is required.\n***\n### Step 1: Extract Givens\nThe given information is:\n- Variables: shield width $w_{s}$, spacing $g$.\n- Parameters: channel width $W_{ch}$, aggressor width $w_{a}$, victim width $w_{v}$, line thickness $t$, dielectric permittivity $\\epsilon$, self-capacitance limit $\\Delta C_{\\text{self}}$, and baseline mutual capacitance $C_{m0}$.\n- Geometric constraint: $w_{a} + w_{v} + w_{s} + 2 g = W_{ch}$.\n- Self-capacitance constraint: $\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}$.\n- Mutual capacitance model (objective function to be minimized): $C_{m}(w_{s}, g) = C_{m0} \\exp\\left(-\\frac{\\pi w_{s}}{2 g}\\right)$.\n- Physical constraints: $w_s \\ge 0$ and $g > 0$.\n- Assumption: A feasible solution exists.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is an optimization problem in the domain of integrated circuit design.\n- **Scientific Grounding:** The problem is scientifically grounded. The models presented for coupling capacitance ($C_{\\text{self,inc}}$) and mutual capacitance ($C_m$) are standard, simplified approximations used in electrical engineering to analyze crosstalk in interconnects. The parallel-plate model for side-wall capacitance and the exponential decay of fringing fields across a shield are physically sound concepts derived from quasi-static electromagnetic theory (Laplace's equation).\n- **Well-Posedness:** The problem is well-posed. It has a clearly defined objective function to minimize, subject to a set of algebraic constraints. The assumption that a feasible design exists ensures the constraint set is not empty, guaranteeing a solution can be found.\n- **Objectivity:** The problem is stated using precise, objective technical language with no subjective or ambiguous terms.\n\nThe problem does not violate any of the invalidity criteria. It is a formalizable, consistent, and solvable scientific problem.\n\n### Step 3: Verdict and Action\nThe problem is valid. The solution process will now proceed.\n***\nThe problem is to determine the shield width $w_{s}$ that minimizes the mutual capacitance $C_{m}(w_{s}, g)$ subject to the given constraints. The problem can be formulated as a constrained optimization problem.\n\nThe objective function to minimize is:\n$$C_{m}(w_{s}, g) = C_{m0} \\exp\\left(-\\frac{\\pi w_{s}}{2 g}\\right)$$\nThe parameters $C_{m0}$ and $\\pi$ are positive constants. The exponential function $\\exp(x)$ is a monotonically increasing function of its argument $x$. Therefore, minimizing $C_{m}(w_{s}, g)$ is equivalent to minimizing its argument, $-\\frac{\\pi w_{s}}{2g}$. This, in turn, is equivalent to maximizing the ratio $\\frac{w_{s}}{g}$. Let us define our optimization objective as maximizing the function $f(w_{s}, g) = \\frac{w_{s}}{g}$.\n\nThe constraints on the variables $w_{s}$ and $g$ are:\n$1$. Geometric constraint: $w_{a} + w_{v} + w_{s} + 2g = W_{ch}$\n$2$. Self-capacitance constraint: $\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}$\n$3$. Physicality constraint on width: $w_{s} \\ge 0$\n$4$. Physicality constraint on spacing: $g > 0$\n\nWe can use the geometric constraint to express $w_{s}$ as a function of $g$:\n$$w_{s}(g) = W_{ch} - w_{a} - w_{v} - 2g$$\nSubstituting this into the objective function $f = \\frac{w_s}{g}$, we can re-express the problem in terms of a single variable, $g$:\n$$f(g) = \\frac{w_{s}(g)}{g} = \\frac{W_{ch} - w_{a} - w_{v} - 2g}{g} = \\frac{W_{ch} - w_{a} - w_{v}}{g} - 2$$\n\nNow, we must define the feasible range for the variable $g$.\nFrom the self-capacitance constraint ($2$), we have:\n$$\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}$$\nSince $g > 0$ and all parameters ($\\epsilon, t, \\Delta C_{\\text{self}}$) are positive physical quantities, we can rearrange this inequality to find a lower bound on $g$:\n$$g \\ge \\frac{\\epsilon t}{\\Delta C_{\\text{self}}}$$\nLet us denote this lower bound as $g_{\\text{min}} = \\frac{\\epsilon t}{\\Delta C_{\\text{self}}}$.\n\nFrom the non-negative shield width constraint ($3$), we have:\n$$w_{s} \\ge 0$$\nSubstituting the expression for $w_{s}(g)$:\n$$W_{ch} - w_{a} - w_{v} - 2g \\ge 0$$\nRearranging for $g$, we find an upper bound:\n$$2g \\le W_{ch} - w_{a} - w_{v}$$\n$$g \\le \\frac{W_{ch} - w_{a} - w_{v}}{2}$$\nLet us denote this upper bound as $g_{\\text{max}} = \\frac{W_{ch} - w_{a} - w_{v}}{2}$. The problem statement guarantees that a feasible design exists, which means the feasible interval for $g$, given by $[g_{\\text{min}}, g_{\\text{max}}]$, is non-empty.\n\nThe optimization problem is now reduced to maximizing the function $f(g) = \\frac{W_{ch} - w_{a} - w_{v}}{g} - 2$ on the interval $g \\in [g_{\\text{min}}, g_{\\text{max}}]$.\n\nTo find the maximum, we analyze the behavior of $f(g)$ by examining its derivative with respect to $g$:\n$$\\frac{df}{dg} = \\frac{d}{dg} \\left( \\frac{W_{ch} - w_{a} - w_{v}}{g} - 2 \\right) = -(W_{ch} - w_{a} - w_{v}) g^{-2}$$\nFor a physically meaningful problem where there is space for a shield and gaps, we must have $W_{ch} > w_{a} + w_{v}$, so the term $(W_{ch} - w_{a} - w_{v})$ is positive. Since $g^2$ is also positive, the derivative $\\frac{df}{dg}$ is strictly negative for all $g$ in the feasible domain.\nThis indicates that $f(g)$ is a monotonically decreasing function of $g$.\n\nTo maximize a monotonically decreasing function over a closed interval, we must select the minimum possible value for its argument. The minimum value for $g$ in the feasible interval $[g_{\\text{min}}, g_{\\text{max}}]$ is $g_{\\text{min}}$.\nTherefore, the optimal spacing $g_{opt}$ that maximizes the ratio $\\frac{w_s}{g}$ (and thus minimizes $C_m$) is:\n$$g_{\\text{opt}} = g_{\\text{min}} = \\frac{\\epsilon t}{\\Delta C_{\\text{self}}}$$\nThis choice of $g$ corresponds to making the self-capacitance constraint active, i.e., using the full budget for the allowed increase in self-capacitance to make the spacing as small as possible, thereby maximizing the room for the shield.\n\nThe question asks for the optimal shield width, $w_s$. We find this by substituting $g_{\\text{opt}}$ back into the equation for $w_{s}(g)$:\n$$w_{s, \\text{opt}} = W_{ch} - w_{a} - w_{v} - 2g_{\\text{opt}}$$\n$$w_{s, \\text{opt}} = W_{ch} - w_{a} - w_{v} - 2\\left(\\frac{\\epsilon t}{\\Delta C_{\\text{self}}}\\right)$$\nThis expression gives the optimal shield width in terms of the specified parameters.",
            "answer": "$$\n\\boxed{W_{ch} - w_{a} - w_{v} - 2\\frac{\\epsilon t}{\\Delta C_{\\text{self}}}}\n$$"
        },
        {
            "introduction": "A shield conductor is only as effective as its connection to the reference ground plane. A common but severe design flaw in complex systems-on-chip (SoCs) is allowing a shield wire to cross a split in the ground domain, which compromises its low-impedance return path. This exercise explores the consequences of such a scenario by having you analyze the system using a lumped-element capacitive model. By calculating the victim noise in both ideal and compromised cases, you will quantify the 'crosstalk penalty' and gain a deeper appreciation for why maintaining continuous, solid ground references is critical for signal integrity. ",
            "id": "4297090",
            "problem": "An on-chip shielded interconnect in an Integrated Circuit (IC) design within the domain of Electronic Design Automation (EDA) crosses a split between two ground domains. Over the split, the shield loses its low-impedance return and instead couples to the global ground only through a small parasitic capacitance across the split. Assume quasi-static field conditions along the short crossing segment and model the coupling in that segment using lumped capacitances derived from electrostatic field partitioning.\n\nConsider three conductors: an aggressor line at node $A$, a grounded shield at node $S$, and a victim line at node $V$. Let $A$ be driven by an ideal sinusoidal voltage source of amplitude $V_{a}$ at angular frequency $\\omega$, and let $V$ be a high-impedance receiver input having only a capacitive return to the global ground. The shield $S$ lies geometrically between $A$ and $V$. In the uniform region away from the split, the shield is tied to ground. Over the split, the return path from $S$ to the global ground exists only through a small capacitance across the gap.\n\nModel the crossing segment by the following lumped elements:\n- Mutual capacitance between aggressor and shield: $C_{AS}$.\n- Mutual capacitance between shield and victim: $C_{SV}$.\n- Residual direct capacitance between aggressor and victim (fringing around shield): $C_{AV}$.\n- Victim-to-ground capacitance (including input and to the global plane): $C_{VG}$.\n- Shield-to-ground capacitance across the split (the only return across the gap): $C_{\\mathrm{gap}}$.\n\nAssume lossless, linear, time-invariant elements and sinusoidal steady-state. Use conservation of charge (Kirchhoff’s current law derived from Maxwell’s equations in the quasi-static regime) to write nodal equations in the frequency domain and solve for the victim voltage amplitude $|V_{v}|$ in two cases:\n1. Solid reference: the shield is solidly grounded over the region (this corresponds to the limit $C_{\\mathrm{gap}} \\to \\infty$ so that $V_{s}=0$).\n2. Split ground: the shield crosses the gap and is connected to ground only via $C_{\\mathrm{gap}}$.\n\nDefine the crosstalk penalty $P$ as the ratio of the victim amplitude in the split-ground case to that in the solid-reference case,\n$$\nP \\equiv \\frac{|V_{v}|_{\\text{split}}}{|V_{v}|_{\\text{solid}}}.\n$$\nDerive $P$ symbolically in terms of the capacitances and then evaluate it numerically for the following parameter values:\n- $C_{AS} = 20\\,\\mathrm{fF}$,\n- $C_{SV} = 20\\,\\mathrm{fF}$,\n- $C_{AV} = 2\\,\\mathrm{fF}$,\n- $C_{VG} = 100\\,\\mathrm{fF}$,\n- $C_{\\mathrm{gap}} = 5\\,\\mathrm{fF}$,\n- $V_{a} = 1\\,\\mathrm{V}$,\n- $f = 5\\,\\mathrm{GHz}$.\n\nExpress the final crosstalk penalty as a pure decimal ratio (dimensionless). Round your answer to four significant figures.",
            "solution": "The problem requires an analysis of crosstalk on a victim line in two scenarios: one with a solid ground reference for a shield conductor, and one where the shield crosses a split in the ground plane. The analysis will be conducted in the frequency domain under quasi-static assumptions, using a lumped-element capacitive model. The core methodology is the application of Kirchhoff’s Current Law (KCL) at the relevant circuit nodes.\n\nLet all time-varying voltages and currents be represented by their complex phasors in the sinusoidal steady state at angular frequency $\\omega$. For a capacitor $C$, the current phasor $I$ is related to the voltage phasor $V$ across it by $I = j\\omega C V$, where $j$ is the imaginary unit. We will write KCL equations for the sum of currents leaving each node. The factor $j\\omega$ will be common to all terms in the KCL equations for this purely capacitive network and will be canceled, demonstrating that the voltage ratios are independent of frequency within this model's validity. The node voltages are denoted by the phasors $V_a$, $V_s$, and $V_v$ for the aggressor, shield, and victim lines, respectively. The aggressor voltage $V_a$ is the input, with amplitude $V_a$.\n\n**Case 1: Solid Reference Ground**\n\nIn this configuration, the shield conductor $S$ is assumed to be perfectly tied to the ground reference. This corresponds to the limit $C_{\\mathrm{gap}} \\to \\infty$ in the model, which forces the shield voltage to be zero.\n$$\nV_s = 0\n$$\nWe apply KCL at the victim node $V$. The currents leaving the node are due to its capacitive coupling to the aggressor ($C_{AV}$), the shield ($C_{SV}$), and the ground ($C_{VG}$).\n$$\n\\sum I_V = 0\n$$\n$$\n(j\\omega C_{AV})(V_v - V_a) + (j\\omega C_{SV})(V_v - V_s) + (j\\omega C_{VG})(V_v - 0) = 0\n$$\nSubstituting $V_s = 0$ and canceling the common factor $j\\omega$:\n$$\nC_{AV}(V_v - V_a) + C_{SV}V_v + C_{VG}V_v = 0\n$$\nSolving for $V_v$:\n$$\nV_v(C_{AV} + C_{SV} + C_{VG}) = V_a C_{AV}\n$$\n$$\nV_{v,\\text{solid}} = V_a \\frac{C_{AV}}{C_{AV} + C_{SV} + C_{VG}}\n$$\nSince all capacitances and $V_a$ (as an amplitude) are real, the victim voltage is also real. Its amplitude is:\n$$\n|V_{v}|_{\\text{solid}} = V_a \\frac{C_{AV}}{C_{AV} + C_{SV} + C_{VG}}\n$$\n\n**Case 2: Split Ground**\n\nIn this case, the shield's connection to the global ground is non-ideal and is represented by the capacitance $C_{\\mathrm{gap}}$. The shield voltage $V_s$ is now a floating and unknown potential. We must write KCL equations for both the victim node $V$ and the shield node $S$.\n\nKCL at node $V$:\n$$\n(j\\omega C_{AV})(V_v - V_a) + (j\\omega C_{SV})(V_v - V_s) + (j\\omega C_{VG})V_v = 0\n$$\nCanceling $j\\omega$ and rearranging:\n$$\nV_v(C_{AV} + C_{SV} + C_{VG}) - V_s C_{SV} = V_a C_{AV} \\quad (1)\n$$\n\nKCL at node $S$:\nThe currents leaving node $S$ are due to its coupling to the aggressor ($C_{AS}$), the victim ($C_{SV}$), and the ground plane across the split ($C_{\\mathrm{gap}}$).\n$$\n(j\\omega C_{AS})(V_s - V_a) + (j\\omega C_{SV})(V_s - V_v) + (j\\omega C_{\\mathrm{gap}})V_s = 0\n$$\nCanceling $j\\omega$ and rearranging:\n$$\n-V_v C_{SV} + V_s(C_{AS} + C_{SV} + C_{\\mathrm{gap}}) = V_a C_{AS} \\quad (2)\n$$\n\nWe now have a system of two linear equations in two unknowns, $V_v$ and $V_s$. Let us define summary capacitances for clarity:\n$$\nC_{V,\\text{tot}} \\equiv C_{AV} + C_{SV} + C_{VG}\n$$\n$$\nC_{S,\\text{tot}} \\equiv C_{AS} + C_{SV} + C_{\\mathrm{gap}}\n$$\nThe system becomes:\n$$\n\\begin{pmatrix} C_{V,\\text{tot}} & -C_{SV} \\\\ -C_{SV} & C_{S,\\text{tot}} \\end{pmatrix} \\begin{pmatrix} V_v \\\\ V_s \\end{pmatrix} = \\begin{pmatrix} V_a C_{AV} \\\\ V_a C_{AS} \\end{pmatrix}\n$$\nWe solve for $V_v$ using Cramer's rule:\n$$\nV_{v,\\text{split}} = \\frac{\\det \\begin{pmatrix} V_a C_{AV} & -C_{SV} \\\\ V_a C_{AS} & C_{S,\\text{tot}} \\end{pmatrix}}{\\det \\begin{pmatrix} C_{V,\\text{tot}} & -C_{SV} \\\\ -C_{SV} & C_{S,\\text{tot}} \\end{pmatrix}} = \\frac{V_a C_{AV} C_{S,\\text{tot}} - (-C_{SV})(V_a C_{AS})}{C_{V,\\text{tot}}C_{S,\\text{tot}} - (-C_{SV})(-C_{SV})}\n$$\n$$\nV_{v,\\text{split}} = V_a \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}\n$$\nThe amplitude is:\n$$\n|V_{v}|_{\\text{split}} = V_a \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}\n$$\n\n**Crosstalk Penalty $P$**\n\nThe crosstalk penalty $P$ is the ratio of the victim voltage amplitudes in the two cases. The aggressor amplitude $V_a$ will cancel, as will the frequency dependence (as it already has).\n$$\nP \\equiv \\frac{|V_{v}|_{\\text{split}}}{|V_{v}|_{\\text{solid}}} = \\frac{V_a \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}}{V_a \\frac{C_{AV}}{C_{V,\\text{tot}}}}\n$$\n$$\nP = \\frac{C_{V,\\text{tot}}}{C_{AV}} \\cdot \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}\n$$\nThis expression can be made more insightful by dividing the numerator and denominator of the second fraction by $C_{V,\\text{tot}}C_{S,\\text{tot}}$:\n$$\nP = \\frac{C_{V,\\text{tot}}}{C_{AV}} \\cdot \\frac{\\frac{C_{AV}}{C_{V,\\text{tot}}} + \\frac{C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}}}}{1 - \\frac{C_{SV}^2}{C_{V,\\text{tot}}C_{S,\\text{tot}}}}\n$$\nRearranging and simplifying gives:\n$$\nP = \\frac{C_{AV} + \\frac{C_{AS}C_{SV}}{C_{S,\\text{tot}}}}{C_{AV}} \\cdot \\frac{1}{1 - \\frac{C_{SV}^2}{C_{V,\\text{tot}}C_{S,\\text{tot}}}}\n$$\n$$\nP = \\left(1 + \\frac{C_{AS}C_{SV}}{C_{AV}C_{S,\\text{tot}}}\\right) \\left( \\frac{1}{1 - \\frac{C_{SV}^2}{C_{V,\\text{tot}}C_{S,\\text{tot}}}} \\right)\n$$\nThis symbolic form clearly separates the dominant effect of indirect coupling via the floating shield (first term) from the second-order feedback effect (second term).\n\n**Numerical Evaluation**\n\nWe are given the following parameter values:\n- $C_{AS} = 20\\,\\mathrm{fF}$\n- $C_{SV} = 20\\,\\mathrm{fF}$\n- $C_{AV} = 2\\,\\mathrm{fF}$\n- $C_{VG} = 100\\,\\mathrm{fF}$\n- $C_{\\mathrm{gap}} = 5\\,\\mathrm{fF}$\n\nThe provided values for $V_a$ and $f$ are not needed for the calculation of the dimensionless ratio $P$.\n\nFirst, we calculate the summary capacitances:\n$$\nC_{V,\\text{tot}} = C_{AV} + C_{SV} + C_{VG} = 2\\,\\mathrm{fF} + 20\\,\\mathrm{fF} + 100\\,\\mathrm{fF} = 122\\,\\mathrm{fF}\n$$\n$$\nC_{S,\\text{tot}} = C_{AS} + C_{SV} + C_{\\mathrm{gap}} = 20\\,\\mathrm{fF} + 20\\,\\mathrm{fF} + 5\\,\\mathrm{fF} = 45\\,\\mathrm{fF}\n$$\nNow, we calculate the dimensionless ratios in the expression for $P$:\n$$\n\\frac{C_{AS}C_{SV}}{C_{AV}C_{S,\\text{tot}}} = \\frac{(20\\,\\mathrm{fF})(20\\,\\mathrm{fF})}{(2\\,\\mathrm{fF})(45\\,\\mathrm{fF})} = \\frac{400}{90} = \\frac{40}{9}\n$$\n$$\n\\frac{C_{SV}^2}{C_{V,\\text{tot}}C_{S,\\text{tot}}} = \\frac{(20\\,\\mathrm{fF})^2}{(122\\,\\mathrm{fF})(45\\,\\mathrm{fF})} = \\frac{400}{5490} = \\frac{40}{549}\n$$\nSubstitute these into the expression for $P$:\n$$\nP = \\frac{1 + \\frac{40}{9}}{1 - \\frac{40}{549}} = \\frac{\\frac{9+40}{9}}{\\frac{549-40}{549}} = \\frac{\\frac{49}{9}}{\\frac{509}{549}}\n$$\n$$\nP = \\frac{49}{9} \\cdot \\frac{549}{509}\n$$\nSince $549 = 9 \\times 61$, we can simplify:\n$$\nP = \\frac{49}{9} \\cdot \\frac{9 \\times 61}{509} = \\frac{49 \\times 61}{509} = \\frac{2989}{509}\n$$\nPerforming the final division:\n$$\nP \\approx 5.8722986...\n$$\nRounding to four significant figures, the crosstalk penalty is $5.872$. This indicates that the noise voltage on the victim line is nearly $6$ times larger due to the split in the ground plane, a severe signal integrity issue.",
            "answer": "$$\n\\boxed{5.872}\n$$"
        },
        {
            "introduction": "Translating physical design rules into automated checks is a cornerstone of modern Electronic Design Automation (EDA). After establishing the principles for effective shielding, the next challenge is verifying that these rules are met across a millions-of-gates integrated circuit. This practice places you in the role of an EDA developer, tasking you to create a rule-checking algorithm. You will process abstracted layout data to verify that shield segments meet mandatory grounding requirements for via density and maximum ungrounded length, bridging the gap between physical principles and their computational enforcement. ",
            "id": "4296998",
            "problem": "You are given an abstracted view of an extracted layout for shield wires in an integrated circuit as would be produced by Electronic Design Automation (EDA). For each shield segment, the geometry is represented as a one-dimensional interval of length $L$ in micrometers ($\\mu$m), along which a set of ground connections (vias) appears at sorted positions $\\{x_k\\}_{k=1}^{n}$, where $0 \\le x_k \\le L$. The engineering objective is to ensure that the shield maintains a sufficiently low impedance to ground along its entire length. From a first-principles perspective, in the quasi-static regime, the shield approximates an equipotential conductor if and only if there is no interval along the shield that is excessively long without a connection to ground. Therefore, the rule-check must evaluate two complementary criteria: spacing to ground connections and aggregate via density.\n\nFundamental base for the derivation: In the quasi-static regime, an extended conductor behaves as a distributed network whose potential is set by its grounding. The absence of a ground tie over a long interval increases the local impedance seen by that portion of the shield, which raises the potential variance and thus degrades shielding effectiveness. In purely geometrical terms, this reduces to the requirement that no sub-interval of the shield exceed a prescribed length without containing a ground tie, and that the number of ground ties per unit length is above a minimum.\n\nDefinitions for this rule-check are as follows:\n- For a segment of total length $L$ and via positions $\\{x_k\\}_{k=1}^{n}$, define the gaps induced by vias and endpoints as $G = \\{x_1 - 0, x_2 - x_1, \\dots, x_n - x_{n-1}, L - x_n\\}$ if $n \\ge 1$, and $G = \\{L\\}$ if $n = 0$.\n- Let $p_{\\mathrm{req}}$ be the required pitch to ground in micrometers; the spacing requirement is that the maximum gap $g^{\\max} = \\max(G)$ must satisfy $g^{\\max} \\le p_{\\mathrm{req}}$.\n- Let $L_{\\mathrm{gap\\_max}}$ be a hard maximum allowable ungrounded run length in micrometers; any gap $g \\in G$ with $g > L_{\\mathrm{gap\\_max}}$ constitutes a severe violation.\n- Let $\\rho_{\\min}$ be the minimum via density in vias per micrometer; the density requirement is that $n / L \\ge \\rho_{\\min}$.\n\nYour tasks:\n- For each test case, compute three counts aggregated over all its segments: the count of minor spacing violations (number of gaps $g$ with $g > p_{\\mathrm{req}}$), the count of severe spacing violations (number of gaps $g$ with $g > L_{\\mathrm{gap\\_max}}$), and the count of via density violations (number of segments with $n/L < \\rho_{\\min}$). All lengths are in micrometers ($\\mu$m). Minor and severe counts are integers; density violation count is an integer summing segments with density below threshold. Use strict inequality for violations.\n- Return, for each test case, a list $[v_{\\mathrm{minor}}, v_{\\mathrm{severe}}, v_{\\mathrm{density}}]$.\n\nTest suite:\nThe program must evaluate the following test cases. Each test case is a tuple of $(p_{\\mathrm{req}}, L_{\\mathrm{gap\\_max}}, \\rho_{\\min}, \\text{segments})$ where segments is a list of $(L, \\text{via\\_positions})$.\n\n- Test case $1$: $p_{\\mathrm{req}} = 50$, $L_{\\mathrm{gap\\_max}} = 120$, $\\rho_{\\min} = 0.01$, segments $=[(200, [40, 90, 140, 190]), (150, [0, 75, 150])]$.\n- Test case $2$: $p_{\\mathrm{req}} = 60$, $L_{\\mathrm{gap\\_max}} = 100$, $\\rho_{\\min} = 0.02$, segments $=[(100, [0, 100])]$.\n- Test case $3$: $p_{\\mathrm{req}} = 30$, $L_{\\mathrm{gap\\_max}} = 80$, $\\rho_{\\min} = 0.05$, segments $=[(200, [])]$.\n- Test case $4$: $p_{\\mathrm{req}} = 40$, $L_{\\mathrm{gap\\_max}} = 90$, $\\rho_{\\min} = 0.015$, segments $=[(250, [45, 85, 130, 175, 220])]$.\n- Test case $5$: $p_{\\mathrm{req}} = 70$, $L_{\\mathrm{gap\\_max}} = 110$, $\\rho_{\\min} = 0.01$, segments $=[(300, [20, 100, 180, 260]), (120, [60])]$.\n\nAll length quantities $L$, $x_k$, $p_{\\mathrm{req}}$, $L_{\\mathrm{gap\\_max}}$ must be treated in micrometers. Density quantities are in vias per micrometer.\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets. Each element corresponds to a test case and is itself a list $[v_{\\mathrm{minor}}, v_{\\mathrm{severe}}, v_{\\mathrm{density}}]$. For example, the output format must look like $[[a_1,b_1,c_1],[a_2,b_2,c_2],\\dots]$ where $a_i$, $b_i$, and $c_i$ are integers.",
            "solution": "The problem statement has been rigorously evaluated and is determined to be valid. It is scientifically grounded in the principles of quasi-static electromagnetism as applied to integrated circuit (IC) design, specifically in the context of Electronic Design Automation (EDA) for verifying shield wire integrity. The problem is well-posed, with all parameters, variables, and criteria for violation explicitly and unambiguously defined. The definitions are mathematically consistent and allow for the formulation of a unique, computable solution. The provided test cases are self-contained and use physically plausible values for IC dimensions.\n\nThe task is to perform a rule-check on a set of IC shield wire segments. The physical principle underlying this check is that a shield wire must approximate an equipotential surface to be effective. In the quasi-static regime, this is achieved by ensuring acceptably low impedance to a reference potential (ground) along the entire length of the conductor. High impedance segments can lead to potential variations, noise coupling, and degraded performance. The geometrical proxies for this electrical requirement are (1) adequate density of ground connections (vias) and (2) absence of long ungrounded runs. The problem formalizes these two proxies into three specific violation checks.\n\nThe solution methodology involves iterating through each test case, and for each test case, iterating through all its constituent shield segments. For each segment, we calculate the number of density and spacing violations according to the specified rules. These violations are aggregated across all segments within a test case.\n\nLet a given test case be defined by the parameters $(p_{\\mathrm{req}}, L_{\\mathrm{gap\\_max}}, \\rho_{\\min})$ and a list of segments. We initialize three counters for the test case: $v_{\\mathrm{minor}} \\leftarrow 0$, $v_{\\mathrm{severe}} \\leftarrow 0$, and $v_{\\mathrm{density}} \\leftarrow 0$.\n\nFor each segment, defined by its length $L$ and a sorted list of via positions $\\{x_k\\}_{k=1}^{n}$ where $0 \\le x_k \\le L$:\n\n1.  **Density Violation Check**:\n    The via density $\\rho$ for a segment is the number of vias $n$ divided by the total length $L$. A density violation occurs if this value is strictly less than the minimum required density, $\\rho_{\\min}$.\n    $$ \\rho = \\frac{n}{L} $$\n    If $\\rho < \\rho_{\\min}$, the segment is in violation, and we increment the test case's density violation counter: $v_{\\mathrm{density}} \\leftarrow v_{\\mathrm{density}} + 1$. This check is performed once per segment. We assume $L > 0$ as is true for all test data provided; otherwise, the density would be undefined.\n\n2.  **Spacing Violation Checks**:\n    Spacing violations relate to the length of ungrounded portions of the shield. These ungrounded lengths are the gaps between consecutive vias, or between a via and an endpoint of the segment. The set of gaps, $G$, is formally defined as:\n    $$\n    G =\n    \\begin{cases}\n    \\{L\\} & \\text{if } n=0 \\\\\n    \\{x_1 - 0, x_2 - x_1, \\dots, x_n - x_{n-1}, L - x_n\\} & \\text{if } n \\ge 1\n    \\end{cases}\n    $$\n    To implement this systematically, we can construct an ordered set of all grounded points, including the segment endpoints at $0$ and $L$: $P = \\{0, x_1, x_2, \\dots, x_n, L\\}$. The gaps are then the differences between adjacent points in $P$.\n\n    For each gap $g \\in G$, we perform two checks based on strict inequality:\n    -   **Minor Spacing Violation**: A minor violation occurs if a gap exceeds the required pitch, $p_{\\mathrm{req}}$. For each gap $g$ such that $g > p_{\\mathrm{req}}$, we increment the minor violation counter: $v_{\\mathrm{minor}} \\leftarrow v_{\\mathrm{minor}} + 1$.\n    -   **Severe Spacing Violation**: A severe violation occurs if a gap exceeds the hard maximum ungrounded length, $L_{\\mathrm{gap\\_max}}$. For each gap $g$ such that $g > L_{\\mathrm{gap\\_max}}$, we increment the severe violation counter: $v_{\\mathrm{severe}} \\leftarrow v_{\\mathrm{severe}} + 1$.\n\n    Note that these two counts are independent. If a single gap $g$ satisfies both $g > L_{\\mathrm{gap\\_max}}$ and $g > p_{\\mathrm{req}}$ (which is guaranteed if $L_{\\mathrm{gap\\_max}} > p_{\\mathrm{req}}$), it contributes to both $v_{\\mathrm{severe}}$ and $v_{\\mathrm{minor}}$.\n\nAfter processing all segments for a given test case, the final result is the triplet $[v_{\\mathrm{minor}}, v_{\\mathrm{severe}}, v_{\\mathrm{density}}]$. This procedure is repeated for all test cases provided.\n\nFor example, consider Test Case 1, Segment 2: $L=150$, via positions are $\\{0, 75, 150\\}$, with parameters $p_{\\mathrm{req}}=50$ and $\\rho_{\\min}=0.01$.\n- Number of vias $n=3$. Density $\\rho = 3/150 = 0.02$. Since $0.02 \\not< 0.01$, there is no density violation.\n- The set of grounding points is $P=\\{0, 0, 75, 150, 150\\}$. The gaps are $G = \\{0-0, 75-0, 150-75, 150-150\\} = \\{0, 75, 75, 0\\}$.\n- The gaps of length $75$ are greater than $p_{\\mathrm{req}}=50$. This occurs twice. Thus, this segment contributes $2$ to the total $v_{\\mathrm{minor}}$ count for the test case. No gap exceeds $L_{\\mathrm{gap\\_max}}=120$.\n\nThe final implementation will encapsulate this logic in a function that processes the test suite and formats the output as specified.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Evaluates shield wire segments against spacing and density rules for a suite of test cases.\n    \"\"\"\n    test_cases = [\n        (50, 120, 0.01, [(200, [40, 90, 140, 190]), (150, [0, 75, 150])]),\n        (60, 100, 0.02, [(100, [0, 100])]),\n        (30, 80, 0.05, [(200, [])]),\n        (40, 90, 0.015, [(250, [45, 85, 130, 175, 220])]),\n        (70, 110, 0.01, [(300, [20, 100, 180, 260]), (120, [60])]),\n    ]\n\n    results = []\n    for case in test_cases:\n        p_req, L_gap_max, rho_min, segments = case\n        \n        v_minor = 0\n        v_severe = 0\n        v_density = 0\n\n        for segment in segments:\n            L, via_positions = segment\n            n = len(via_positions)\n\n            # 1. Density Violation Check\n            # Assuming L > 0 as per the problem's test data.\n            # If L were 0, this check would need special handling.\n            if L > 0:\n                density = n / L\n                if density < rho_min:\n                    v_density += 1\n            # If L is 0, density is ill-defined. We follow the problem scope.\n            \n            # 2. Spacing Violation Checks\n            # Construct an array of all grounded points, including endpoints 0 and L.\n            # The via positions list is given as sorted.\n            # np.concatenate and np.diff handle all cases, including n=0.\n            points = np.concatenate(([0], np.array(via_positions), [L]))\n            # np.unique is needed if via positions can contain 0 or L,\n            # which would create zero-length \"gaps\" if not handled.\n            # The provided definition G={x1-0, ..., L-xn} implies that\n            # vias at 0 and L are distinct from the segment boundaries.\n            # A simpler way is to calculate diffs on a crafted array.\n            \n            # Per definition: G = {x1-0, x2-x1,..., L-xn} for n>=1, and G={L} for n=0\n            if n == 0:\n                gaps = [L]\n            else:\n                # Create a sequence of points for differencing.\n                all_points = [0] + via_positions + [L]\n                gaps = [all_points[i] - all_points[i-1] for i in range(1, len(all_points))]\n\n\n            for gap in gaps:\n                # Check for severe violation\n                if gap > L_gap_max:\n                    v_severe += 1\n                \n                # Check for minor violation\n                if gap > p_req:\n                    v_minor += 1\n\n        results.append([v_minor, v_severe, v_density])\n\n    # Format the final output string\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n\n```"
        }
    ]
}
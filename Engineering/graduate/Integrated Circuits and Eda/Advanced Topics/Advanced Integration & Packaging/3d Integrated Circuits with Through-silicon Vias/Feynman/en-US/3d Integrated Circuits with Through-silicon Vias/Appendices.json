{
    "hands_on_practices": [
        {
            "introduction": "A thorough understanding of 3D integrated circuits begins with accurately modeling the electrical characteristics of their core component, the Through-Silicon Via (TSV). This first exercise guides you in deriving the equivalent resistance of a TSV by treating its composite structure—a copper core and a resistive barrier—as parallel conductors. By mastering this fundamental model , you will gain insight into how material properties and common manufacturing defects, such as voids, directly impact the performance and reliability of these critical vertical interconnects.",
            "id": "4254826",
            "problem": "A Through-Silicon Via (TSV) of cylindrical geometry is fabricated in silicon, consisting of a copper core surrounded by a conformal diffusion barrier layer. The TSV has outer radius $R$, barrier thickness $t$, and length $L$. The copper resistivity is $\\rho_{\\mathrm{Cu}}$, and the barrier resistivity is $\\rho_{\\mathrm{b}}$. The barrier can be modeled as a thin cylindrical shell coaxial with the copper core, and both copper and barrier conduct axially in parallel between the TSV terminals. Assume spatially uniform, temperature-independent resistivities and neglect surface, grain-boundary, and size-effect scattering.\n\nUsing only the foundational definitions that (i) axial resistance is $R=\\rho L/A$ for a uniform conductor of length $L$ and cross-sectional area $A$, and (ii) parallel conduction is given by $1/R_{\\mathrm{eq}}=1/R_{1}+1/R_{2}$, derive the expressions for the intact TSV’s equivalent resistance and for the equivalent resistance when the copper core contains an axial cylindrical void of radius $r_{\\mathrm{v}}$ (coaxial with the TSV). Then, compute the ratio of the equivalent resistance in the voided case to that in the intact case for the following scientifically realistic parameters:\n- $R = 5.0 \\times 10^{-6}$,\n- $t = 5.0 \\times 10^{-8}$,\n- $L = 5.0 \\times 10^{-5}$,\n- $\\rho_{\\mathrm{Cu}} = 1.7 \\times 10^{-8}$,\n- $\\rho_{\\mathrm{b}} = 2.0 \\times 10^{-6}$,\n- $r_{\\mathrm{v}} = 1.0 \\times 10^{-6}$.\n\nAll quantities are in International System of Units. Express the final answer as a dimensionless decimal ratio and round your answer to four significant figures.",
            "solution": "The problem requires the derivation of the equivalent resistance for an intact and a voided Through-Silicon Via (TSV), followed by the computation of the ratio of these resistances for a given set of parameters. The validation of the problem statement is the first step.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n- Geometry: Cylindrical TSV with a copper core and a conformal diffusion barrier.\n- Dimensions: outer radius $R$, barrier thickness $t$, length $L$.\n- Void geometry: axial cylindrical void of radius $r_{\\mathrm{v}}$, coaxial with the TSV.\n- Material Properties: copper resistivity $\\rho_{\\mathrm{Cu}}$, barrier resistivity $\\rho_{\\mathrm{b}}$.\n- Model Assumptions:\n  - The TSV consists of two parallel axial conductors: the copper core and the barrier shell.\n  - Resistivities $\\rho_{\\mathrm{Cu}}$ and $\\rho_{\\mathrm{b}}$ are uniform and temperature-independent.\n  - Scattering effects (surface, grain boundary, size) are neglected.\n- Foundational Definitions:\n  - (i) Axial resistance of a uniform conductor is $R_{\\mathrm{ax}} = \\frac{\\rho L}{A}$, where $\\rho$ is resistivity, $L$ is length, and $A$ is cross-sectional area.\n  - (ii) Equivalent resistance for two parallel resistors is given by $\\frac{1}{R_{\\mathrm{eq}}} = \\frac{1}{R_1} + \\frac{1}{R_2}$.\n- Numerical Values (SI units):\n  - $R = 5.0 \\times 10^{-6}$\n  - $t = 5.0 \\times 10^{-8}$\n  - $L = 5.0 \\times 10^{-5}$\n  - $\\rho_{\\mathrm{Cu}} = 1.7 \\times 10^{-8}$\n  - $\\rho_{\\mathrm{b}} = 2.0 \\times 10^{-6}$\n  - $r_{\\mathrm{v}} = 1.0 \\times 10^{-6}$\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is scientifically grounded, relying on fundamental principles of electrical resistance. The physical model of a TSV is a standard and simplified representation used in electronic design automation (EDA) and integrated circuit analysis. The provided numerical values are realistic for contemporary 3D integration technologies. The problem is objective, well-posed, complete, and contains no contradictions. For instance, the void radius $r_{\\mathrm{v}} = 1.0 \\times 10^{-6} \\, \\mathrm{m}$ is smaller than the copper core radius $R-t = 5.0 \\times 10^{-6} \\, \\mathrm{m} - 5.0 \\times 10^{-8} \\, \\mathrm{m} = 4.95 \\times 10^{-6} \\, \\mathrm{m}$, ensuring the void is physically contained within the copper, as stated.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A complete solution will be provided.\n\n### Derivation of Intact TSV Resistance\n\nThe TSV is modeled as two parallel conductors: the copper core and the barrier shell. Both have length $L$. We first determine their cross-sectional areas.\n\nThe barrier is a conformal layer of thickness $t$ inside a cylinder of radius $R$. Therefore, the copper core is a cylinder of radius $R_{\\mathrm{Cu}} = R-t$.\nThe cross-sectional area of the copper core, $A_{\\mathrm{Cu}}$, is:\n$$A_{\\mathrm{Cu}} = \\pi (R-t)^2$$\nThe cross-sectional area of the barrier shell, $A_{\\mathrm{b}}$, is the area of the ring between radius $R-t$ and $R$:\n$$A_{\\mathrm{b}} = \\pi R^2 - \\pi (R-t)^2 = \\pi (R^2 - (R^2 - 2Rt + t^2)) = \\pi (2Rt - t^2)$$\nUsing the formula for axial resistance, $R_{\\mathrm{ax}} = \\frac{\\rho L}{A}$, the resistances of the copper core ($R_{\\mathrm{Cu,path}}$) and the barrier shell ($R_{\\mathrm{b,path}}$) are:\n$$R_{\\mathrm{Cu,path}} = \\frac{\\rho_{\\mathrm{Cu}} L}{A_{\\mathrm{Cu}}} = \\frac{\\rho_{\\mathrm{Cu}} L}{\\pi (R-t)^2}$$\n$$R_{\\mathrm{b,path}} = \\frac{\\rho_{\\mathrm{b}} L}{A_{\\mathrm{b}}} = \\frac{\\rho_{\\mathrm{b}} L}{\\pi (2Rt - t^2)}$$\nThe equivalent resistance of the intact TSV, $R_{\\mathrm{eq, intact}}$, is found by combining these two resistances in parallel:\n$$\\frac{1}{R_{\\mathrm{eq, intact}}} = \\frac{1}{R_{\\mathrm{Cu,path}}} + \\frac{1}{R_{\\mathrm{b,path}}} = \\frac{\\pi (R-t)^2}{\\rho_{\\mathrm{Cu}} L} + \\frac{\\pi (2Rt - t^2)}{\\rho_{\\mathrm{b}} L}$$\nThus, the expression for the intact TSV resistance is:\n$$R_{\\mathrm{eq, intact}} = \\left( \\frac{\\pi}{L} \\left[ \\frac{(R-t)^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}} \\right] \\right)^{-1} = \\frac{L}{\\pi} \\left( \\frac{(R-t)^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}} \\right)^{-1}$$\n\n### Derivation of Voided TSV Resistance\n\nIn the voided case, an axial cylindrical void of radius $r_{\\mathrm{v}}$ exists within the copper core. The barrier is unaffected.\nThe new cross-sectional area of the copper conductor, $A'_{\\mathrm{Cu}}$, is the area of the annulus between radii $r_{\\mathrm{v}}$ and $R-t$.\n$$A'_{\\mathrm{Cu}} = \\pi (R-t)^2 - \\pi r_{\\mathrm{v}}^2 = \\pi ((R-t)^2 - r_{\\mathrm{v}}^2)$$\nThe resistance of the voided copper path, $R'_{\\mathrm{Cu,path}}$, becomes:\n$$R'_{\\mathrm{Cu,path}} = \\frac{\\rho_{\\mathrm{Cu}} L}{A'_{\\mathrm{Cu}}} = \\frac{\\rho_{\\mathrm{Cu}} L}{\\pi ((R-t)^2 - r_{\\mathrm{v}}^2)}$$\nThe resistance of the barrier path, $R_{\\mathrm{b,path}}$, remains unchanged. The equivalent resistance of the voided TSV, $R_{\\mathrm{eq, voided}}$, is the parallel combination of $R'_{\\mathrm{Cu,path}}$ and $R_{\\mathrm{b,path}}$:\n$$\\frac{1}{R_{\\mathrm{eq, voided}}} = \\frac{1}{R'_{\\mathrm{Cu,path}}} + \\frac{1}{R_{\\mathrm{b,path}}} = \\frac{\\pi ((R-t)^2 - r_{\\mathrm{v}}^2)}{\\rho_{\\mathrm{Cu}} L} + \\frac{\\pi (2Rt - t^2)}{\\rho_{\\mathrm{b}} L}$$\nThe expression for the voided TSV resistance is:\n$$R_{\\mathrm{eq, voided}} = \\frac{L}{\\pi} \\left( \\frac{(R-t)^2 - r_{\\mathrm{v}}^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}} \\right)^{-1}$$\n\n### Ratio of Resistances\n\nThe ratio of the voided resistance to the intact resistance is $\\frac{R_{\\mathrm{eq, voided}}}{R_{\\mathrm{eq, intact}}}$. Using the derived expressions:\n$$ \\frac{R_{\\mathrm{eq, voided}}}{R_{\\mathrm{eq, intact}}} = \\frac{\\frac{L}{\\pi} \\left( \\frac{(R-t)^2 - r_{\\mathrm{v}}^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}} \\right)^{-1}}{\\frac{L}{\\pi} \\left( \\frac{(R-t)^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}} \\right)^{-1}} $$\nThe term $\\frac{L}{\\pi}$ cancels, and inverting the fractions gives:\n$$ \\frac{R_{\\mathrm{eq, voided}}}{R_{\\mathrm{eq, intact}}} = \\frac{\\frac{(R-t)^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}}}{\\frac{(R-t)^2 - r_{\\mathrm{v}}^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}}} $$\nThis is the final symbolic expression for the ratio.\n\n### Numerical Calculation\n\nWe substitute the given values into the ratio expression.\n- $R = 5.0 \\times 10^{-6}$\n- $t = 5.0 \\times 10^{-8}$\n- $\\rho_{\\mathrm{Cu}} = 1.7 \\times 10^{-8}$\n- $\\rho_{\\mathrm{b}} = 2.0 \\times 10^{-6}$\n- $r_{\\mathrm{v}} = 1.0 \\times 10^{-6}$\n\nFirst, we calculate the geometric terms:\n- $R-t = 5.0 \\times 10^{-6} - 0.05 \\times 10^{-6} = 4.95 \\times 10^{-6}$\n- $(R-t)^2 = (4.95 \\times 10^{-6})^2 = 24.5025 \\times 10^{-12}$\n- $r_{\\mathrm{v}}^2 = (1.0 \\times 10^{-6})^2 = 1.0 \\times 10^{-12}$\n- $(R-t)^2 - r_{\\mathrm{v}}^2 = 24.5025 \\times 10^{-12} - 1.0 \\times 10^{-12} = 23.5025 \\times 10^{-12}$\n- $2Rt - t^2 = 2(5.0 \\times 10^{-6})(5.0 \\times 10^{-8}) - (5.0 \\times 10^{-8})^2 = 50 \\times 10^{-14} - 25 \\times 10^{-16} = 5.0 \\times 10^{-13} - 0.025 \\times 10^{-13} = 4.975 \\times 10^{-13}$\n\nNow, we compute the terms in the numerator and denominator of the ratio expression.\nLet the ratio be $K$. The numerator is $N$ and the denominator is $D$.\n$$N = \\frac{(R-t)^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}}$$\n$$D = \\frac{(R-t)^2 - r_{\\mathrm{v}}^2}{\\rho_{\\mathrm{Cu}}} + \\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}}$$\n\nCalculate each term:\n- $\\frac{(R-t)^2}{\\rho_{\\mathrm{Cu}}} = \\frac{24.5025 \\times 10^{-12}}{1.7 \\times 10^{-8}} \\approx 1.4413235 \\times 10^{-3}$\n- $\\frac{2Rt - t^2}{\\rho_{\\mathrm{b}}} = \\frac{4.975 \\times 10^{-13}}{2.0 \\times 10^{-6}} = 2.4875 \\times 10^{-7} = 0.00024875 \\times 10^{-3}$\n- $\\frac{(R-t)^2 - r_{\\mathrm{v}}^2}{\\rho_{\\mathrm{Cu}}} = \\frac{23.5025 \\times 10^{-12}}{1.7 \\times 10^{-8}} = 1.3825 \\times 10^{-3}$ (This division is exact)\n\nSubstitute these into the expressions for $N$ and $D$:\n$N \\approx (1.4413235 \\times 10^{-3}) + (0.00024875 \\times 10^{-3}) = 1.44157225 \\times 10^{-3}$\n$D = (1.3825 \\times 10^{-3}) + (0.00024875 \\times 10^{-3}) = 1.38274875 \\times 10^{-3}$\n\nFinally, compute the ratio $K = N/D$:\n$$ K = \\frac{1.44157225 \\times 10^{-3}}{1.38274875 \\times 10^{-3}} \\approx 1.0425433 $$\n\nThe problem requires rounding the answer to four significant figures. The first four significant figures are $1.042$. The fifth digit is $5$, which requires rounding up the fourth digit.\n$$K \\approx 1.043$$",
            "answer": "$$\\boxed{1.043}$$"
        },
        {
            "introduction": "Transitioning from a single component to a large-scale system reveals the profound impact of manufacturing imperfections on overall functional yield. This practice challenges you to apply a spatial Poisson process, a standard model for random defects, to predict the probability of a large TSV bundle being fully functional. You will then explore a crucial design-for-yield technique by calculating the minimum number of redundant, or spare, TSVs needed to achieve a target yield , a common trade-off in modern IC design.",
            "id": "4254800",
            "problem": "A three-dimensional integrated circuit stack uses a bundle of Through-Silicon Vias (TSVs), and the manufacturing defects are modeled as a spatial Poisson point process with areal rate $\\lambda$ (defects per unit area). In this model, the number of defects inside any region of area $A$ is a Poisson random variable whose mean is proportional to $A$. A TSV is considered defective if at least one defect falls within its effective critical area, which consists of the via cross-section plus its keep-out region. The design analysis for this process technology yields an effective critical radius $r_{c} = 5\\,\\mu\\mathrm{m}$, so the effective critical area is $A_{c} = \\pi r_{c}^{2}$. The defect rate is $\\lambda = 8.0 \\times 10^{-7}\\,\\mu\\mathrm{m}^{-2}$. Assume that the critical areas of all TSVs in the bundle are disjoint (so independence is justified) and that any defect within a TSV’s critical area makes that TSV non-functional. Consider a bundle of $N = 512$ TSVs that must all be functional.\n\n1. Using the Poisson defect model and the assumptions above, derive from first principles the single-TSV functional probability and then the bundle functional probability with no spare TSVs. Compute the numerical value of the bundle functional probability for $N=512$. Express this probability as a decimal and round your answer to four significant figures.\n\n2. Now introduce spare TSVs: add $s$ spare TSVs to the bundle, so a total of $N+s$ TSVs are fabricated, and the bundle is considered functional if at least $N$ TSVs are functional. Under the same model and assumptions, derive the bundle functional probability as a function of $s$ and determine the minimum integer $s$ such that the bundle functional probability is at least $0.999$. Express the final yield as a decimal and the spare count $s$ as an integer.\n\nElectronic Design Automation (EDA) methodologies and yield modeling are to be applied to reason from the spatial Poisson process and the independence assumptions; do not assume any shortcut yield formulas. Your final answer must contain the no-spare bundle yield rounded to four significant figures (decimal, no percentage sign) and the minimal integer $s$ that achieves the target yield of $0.999$.",
            "solution": "The problem statement is analyzed and found to be valid. It is scientifically grounded in standard semiconductor yield modeling, mathematically well-posed, and provides a complete and consistent set of data and assumptions.\n\nThe solution is divided into two parts as requested by the problem.\n\nPart 1: Bundle Functional Probability with No Spares\n\nThe manufacturing defects are modeled as a spatial Poisson point process with a given areal rate $\\lambda = 8.0 \\times 10^{-7}\\,\\mu\\mathrm{m}^{-2}$. A Through-Silicon Via (TSV) is rendered non-functional if at least one defect falls within its effective critical area, $A_c$. The radius of this critical area is $r_{c} = 5\\,\\mu\\mathrm{m}$.\n\nFirst, we calculate the critical area $A_c$ for a single TSV:\n$$A_{c} = \\pi r_{c}^{2} = \\pi (5\\,\\mu\\mathrm{m})^{2} = 25\\pi\\,\\mu\\mathrm{m}^{2}$$\nThe number of defects, $X$, within this area $A_c$ is a Poisson random variable. The mean of this distribution, $\\mu$, is the product of the defect rate $\\lambda$ and the critical area $A_c$:\n$$\\mu = \\lambda A_{c} = (8.0 \\times 10^{-7}\\,\\mu\\mathrm{m}^{-2}) \\times (25\\pi\\,\\mu\\mathrm{m}^{2}) = 2.0 \\times 10^{-5} \\pi$$\nThe probability mass function for a Poisson distribution is $P(X=k) = \\frac{\\mu^k \\exp(-\\mu)}{k!}$. A TSV is functional if and only if the number of defects in its critical area is zero, i.e., $k=0$. The probability of a single TSV being functional, which we denote as $p$, is:\n$$p = P(X=0) = \\frac{\\mu^0 \\exp(-\\mu)}{0!} = \\exp(-\\mu)$$\nSubstituting the value for $\\mu$:\n$$p = \\exp(-2.0 \\times 10^{-5} \\pi)$$\nFor a bundle of $N=512$ TSVs with no spares, the bundle is functional only if all $N$ TSVs are functional. The problem states that the critical areas are disjoint, which allows us to treat the functionality of each TSV as an independent event. The probability of the entire bundle being functional, $P_{B,0}$, is the product of the individual functional probabilities:\n$$P_{B,0} = p^{N} = (\\exp(-\\mu))^{N} = \\exp(-N\\mu)$$\nSubstituting the values for $N$ and $\\mu$:\n$$P_{B,0} = \\exp(-512 \\times 2.0 \\times 10^{-5} \\pi) = \\exp(-0.01024 \\pi)$$\nNow, we compute the numerical value:\n$$P_{B,0} \\approx \\exp(-0.0321699) \\approx 0.9683452$$\nRounding to four significant figures, the bundle functional probability is $0.9683$.\n\nPart 2: Bundle Functional Probability with Spares\n\nNow, we introduce $s$ spare TSVs, for a total of $N+s$ TSVs. The bundle is considered functional if at least $N=512$ of these TSVs are functional.\nLet $Y$ be the random variable representing the number of functional TSVs out of a total of $n = N+s$. Each TSV represents an independent Bernoulli trial with a success probability $p = \\exp(-\\mu)$. Therefore, $Y$ follows a binomial distribution, $Y \\sim B(n, p)$.\nThe bundle is functional if $Y \\geq N$. The probability for this, $P_{B,s}$, is given by the sum:\n$$P_{B,s} = P(Y \\geq N) = \\sum_{k=N}^{N+s} \\binom{N+s}{k} p^k (1-p)^{(N+s)-k}$$\nWe are asked to find the minimum integer $s$ such that $P_{B,s} \\geq 0.999$.\n\nAn equivalent approach, which is computationally simpler for small $s$, is to consider the number of failing TSVs. Let $F$ be the number of non-functional TSVs out of $n=N+s$. The probability of a single TSV failing is $q = 1-p$. The random variable $F$ follows a binomial distribution $F \\sim B(n, q)$. The bundle is functional if the number of failures is no more than the number of spares, i.e., $F \\leq s$.\nWe need to find the minimum integer $s$ such that:\n$$P(F \\leq s) = \\sum_{j=0}^{s} \\binom{N+s}{j} q^j p^{(N+s)-j} \\geq 0.999$$\nWe have the probabilities $p$ and $q$:\n$$p = \\exp(-2.0 \\times 10^{-5} \\pi) \\approx 0.9999371701$$\n$$q = 1 - p = 1 - \\exp(-2.0 \\times 10^{-5} \\pi) \\approx 6.282987 \\times 10^{-5}$$\nWe can now test integer values of $s$ starting from $s=0$.\n\nFor $s=0$: Total TSVs $n=N=512$. The bundle is functional if there are $0$ failures.\n$$P(F \\leq 0) = \\binom{512}{0} q^0 p^{512} = p^{512} = \\exp(-512\\mu) \\approx 0.9683$$\nThis is less than $0.999$, so more spares are needed.\n\nFor $s=1$: Total TSVs $n=N+1=513$. The bundle is functional if there are $0$ or $1$ failures.\n$$P(F \\leq 1) = P(F=0) + P(F=1) = \\binom{513}{0} q^0 p^{513} + \\binom{513}{1} q^1 p^{512}$$\n$$P(F \\leq 1) = p^{513} + 513 q p^{512} = p^{512}(p + 513q)$$\nUsing the calculated values for $p$ and $q$:\n$$p^{512} \\approx 0.9683452$$\n$$p^{513} \\approx (0.9999371701)^{513} \\approx 0.9682844$$\n$$513 q p^{512} \\approx 513 \\times (6.282987 \\times 10^{-5}) \\times 0.9683452 \\approx 0.0312154$$\n$$P(F \\leq 1) \\approx 0.9682844 + 0.0312154 = 0.9994998$$\nSince $P(F \\leq 1) \\approx 0.9995$, which is greater than $0.999$, we can conclude that $s=1$ is sufficient. As $s=0$ was insufficient, the minimum integer number of spares required is $s=1$.\n\nThe required final answers are the no-spare bundle yield rounded to four significant figures and the minimal integer $s$.\nNo-spare yield: $0.9683$.\nMinimal spares for yield $\\geq 0.999$: $s = 1$.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.9683 & 1 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "In modern 3D ICs, electrical, thermal, and mechanical domains are not independent but are deeply coupled, creating complex interactions that affect system performance. This capstone exercise  requires you to synthesize these multi-physics effects into a single predictive model to compute the timing shift on a critical path. You will analyze how TSV-induced mechanical stress alters transistor mobility through the piezoresistive effect, while simultaneously accounting for how workload-induced heat changes interconnect resistance, providing a holistic view of the challenges in 3D IC design.",
            "id": "4254829",
            "problem": "A three-dimensional integrated circuit stack with Through-Silicon Vias (TSVs) is considered. The TSV-induced mechanical stress field around a cylindrical via is modeled empirically as decaying with radial distance according to a validated axisymmetric relation. The critical path consists of a series of transistors and interconnect segments. Under workload, dynamic power dissipation raises the local temperature via a lumped thermal resistance, which in turn modifies interconnect resistivity. Simultaneously, TSV-induced stress modifies transistor mobility via the linearized piezoresistive effect. From first principles and well-tested relations, derive the total timing shift of the critical path relative to a baseline state and implement a program to compute this shift for specified workloads and geometries.\n\nFundamental base and core definitions to be used:\n- Linearized piezoresistive mobility modification: for transistor $i$ at radial distance $r_i$ from the TSV, the mobility is $$\\mu_i = \\mu_0 \\left(1 + k_\\mu \\, \\sigma(r_i)\\right),$$ where $\\mu_0$ is the baseline mobility, $k_\\mu$ is the mobility sensitivity coefficient, and $\\sigma(r)$ is the stress field.\n- Empirical axisymmetric stress field around a TSV: $$\\sigma(r) = \\sigma_0 \\left(\\frac{r_0}{r}\\right)^2 \\quad \\text{for } r \\ge r_0,$$ where $\\sigma_0$ is the stress at the TSV interface and $r_0$ is the TSV radius.\n- Temperature-dependent resistivity for interconnects: $$\\rho(T) = \\rho_0 \\left[1 + \\alpha_T \\left(T - T_0\\right)\\right],$$ where $\\rho_0$ is the resistivity at the reference temperature $T_0$ and $\\alpha_T$ is the temperature coefficient of resistivity.\n- Lumped thermal resistance model: $$T = T_{\\text{amb}} + R_{\\text{th}} \\left(P_{\\text{bg}} + P_{\\text{dyn}}\\right),$$ where $T_{\\text{amb}}$ is ambient temperature, $R_{\\text{th}}$ is thermal resistance, $P_{\\text{bg}}$ is background power, and $P_{\\text{dyn}}$ is dynamic power.\n- Dynamic power: $$P_{\\text{dyn}} = C_{\\text{sw}} V_{\\text{dd}}^2 f \\, \\alpha_{\\text{sw}}, \\quad C_{\\text{sw}} = N C_g + M C_{\\text{line}},$$ where $C_{\\text{sw}}$ is the total switched capacitance, $V_{\\text{dd}}$ is supply voltage, $f$ is clock frequency, $\\alpha_{\\text{sw}}$ is activity factor, $N$ is the number of gates, $M$ is the number of interconnect segments, $C_g$ is per-gate capacitance, and $C_{\\text{line}}$ is per-segment line capacitance.\n- Gate delay under current-drive: $$t_{g,i} = \\frac{C_g V_{\\text{dd}}}{I_{\\text{on},i}}, \\quad I_{\\text{on},i} = k_{\\text{drive}} \\, \\mu_i \\, V_{\\text{dd}},$$ where $k_{\\text{drive}}$ is a device-dependent proportionality constant with units ensuring dimensional consistency.\n- Interconnect resistance per segment and RC delay: $$R_{\\text{seg}}(T) = \\frac{\\rho(T) L_{\\text{seg}}}{A_{\\text{line}}}, \\quad t_{\\text{ic}}(T) = M \\, R_{\\text{seg}}(T) \\, C_{\\text{line}},$$ where $L_{\\text{seg}}$ is the segment length and $A_{\\text{line}}$ is the cross-sectional area.\n\nDefine the total path delay as $$t = \\sum_{i=1}^{N} t_{g,i} + t_{\\text{ic}}(T).$$ The baseline delay $t_0$ corresponds to $T = T_0$ and zero stress, i.e., $\\mu_i = \\mu_0$ for all $i$, and $R_{\\text{seg}}(T_0)$ for interconnect. The timing shift is $$\\Delta t = t - t_0.$$ Express $\\Delta t$ in seconds.\n\nConstants used across all test cases (expressed in SI units unless otherwise noted):\n- Number of gates $N = 5$ and interconnect segments $M = 4$.\n- Gate capacitance $C_g = 2\\,\\mathrm{fF} = 2 \\times 10^{-15}\\,\\mathrm{F}$.\n- Per-segment line capacitance $C_{\\text{line}} = 10\\,\\mathrm{fF} = 1 \\times 10^{-14}\\,\\mathrm{F}$.\n- Supply voltage $V_{\\text{dd}} = 0.8\\,\\mathrm{V}$.\n- Baseline mobility $\\mu_0 = 0.05\\,\\mathrm{m^2/(V\\,s)}$.\n- Drive constant $k_{\\text{drive}} = 1 \\times 10^{-3}\\,\\mathrm{A \\cdot s / m^2}$.\n- Ambient and reference temperature $T_{\\text{amb}} = T_0 = 300\\,\\mathrm{K}$.\n- TSV radius $r_0 = 2\\,\\mathrm{\\mu m} = 2 \\times 10^{-6}\\,\\mathrm{m}$.\n- Stress at TSV interface $\\sigma_0 = 150\\,\\mathrm{MPa} = 1.5 \\times 10^8\\,\\mathrm{Pa}$.\n- Copper resistivity at $T_0$: $\\rho_0 = 1.68 \\times 10^{-8}\\,\\Omega\\,\\mathrm{m}$.\n- Temperature coefficient of resistivity $\\alpha_T = 0.0039\\,\\mathrm{K^{-1}}$.\n- Per-segment line length $L_{\\text{seg}} = 200\\,\\mathrm{\\mu m} = 2 \\times 10^{-4}\\,\\mathrm{m}$.\n- Line cross-sectional area $A_{\\text{line}} = 0.5\\,\\mathrm{\\mu m}^2 = 5 \\times 10^{-13}\\,\\mathrm{m}^2$.\n- Lumped thermal resistance $R_{\\text{th}} = 2\\,\\mathrm{K/W}$.\n\nTest suite:\n- Case 1 (general workload, moderate heating, mixed distances): $P_{\\text{bg}} = 5\\,\\mathrm{W}$, $f = 2\\,\\mathrm{GHz}$, $\\alpha_{\\text{sw}} = 0.2$, $k_\\mu = 1 \\times 10^{-11}\\,\\mathrm{Pa}^{-1}$, gate distances $[3, 5, 10, 20, 50]\\,\\mathrm{\\mu m}$.\n- Case 2 (high heating): $P_{\\text{bg}} = 50\\,\\mathrm{W}$, $f = 2\\,\\mathrm{GHz}$, $\\alpha_{\\text{sw}} = 0.5$, $k_\\mu = 1 \\times 10^{-11}\\,\\mathrm{Pa}^{-1}$, gate distances $[3, 5, 10, 20, 50]\\,\\mathrm{\\mu m}$.\n- Case 3 (no heating, negligible stress): $P_{\\text{bg}} = 0\\,\\mathrm{W}$, $f = 1\\,\\mathrm{GHz}$, $\\alpha_{\\text{sw}} = 0$, $k_\\mu = 1 \\times 10^{-11}\\,\\mathrm{Pa}^{-1}$, gate distances $[100, 100, 100, 100, 100]\\,\\mathrm{\\mu m}$.\n- Case 4 (near-TSV, strong stress, positive mobility effect): $P_{\\text{bg}} = 20\\,\\mathrm{W}$, $f = 3\\,\\mathrm{GHz}$, $\\alpha_{\\text{sw}} = 0.8$, $k_\\mu = 1 \\times 10^{-11}\\,\\mathrm{Pa}^{-1}$, gate distances $[2, 2.5, 3, 3.5, 4]\\,\\mathrm{\\mu m}$.\n- Case 5 (near-TSV, strong stress, negative mobility effect): $P_{\\text{bg}} = 20\\,\\mathrm{W}$, $f = 3\\,\\mathrm{GHz}$, $\\alpha_{\\text{sw}} = 0.8$, $k_\\mu = -1 \\times 10^{-11}\\,\\mathrm{Pa}^{-1}$, gate distances $[2, 2.5, 3, 3.5, 4]\\,\\mathrm{\\mu m}$.\n\nRequired computation:\n- For each test case, compute $\\Delta t$ in seconds as defined above.\n\nFinal output format:\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[result_1,result_2,\\dots]$), where each $result_i$ is the timing shift $\\Delta t$ in seconds for the corresponding test case, using floating-point values.",
            "solution": "The problem is to derive and compute the total timing shift, $\\Delta t$, of a critical path in a three-dimensional integrated circuit. This shift is induced by two primary physical effects: the piezoresistive modification of transistor mobility due to Through-Silicon Via (TSV) mechanical stress, and the temperature-dependent change in interconnect resistivity due to power dissipation. The total timing shift is defined as the difference between the path delay under these effects, $t$, and a baseline path delay, $t_0$, at zero stress and a reference temperature, $T_0$.\n\nThe total path delay is the sum of the gate delays and the total interconnect delay:\n$$t = \\sum_{i=1}^{N} t_{g,i} + t_{\\text{ic}}$$\nThe timing shift is therefore $\\Delta t = t - t_0$. We can decompose this into the sum of the shift from the gates and the shift from the interconnects:\n$$\\Delta t = \\left(\\sum_{i=1}^{N} t_{g,i} - \\sum_{i=1}^{N} t_{g,0,i}\\right) + \\left(t_{\\text{ic}} - t_{\\text{ic},0}\\right) = \\Delta t_{\\text{gates}} + \\Delta t_{\\text{interconnect}}$$\nwhere the subscript $0$ denotes the baseline condition.\n\nFirst, we establish the baseline delay, $t_0$.\nThe baseline condition corresponds to zero stress, so for each transistor $i$, the mobility is $\\mu_i = \\mu_0(1 + k_\\mu \\cdot 0) = \\mu_0$.\nThe baseline on-current for any gate is:\n$$I_{\\text{on},0} = k_{\\text{drive}} \\mu_0 V_{\\text{dd}}$$\nThe baseline delay for a single gate, $t_{g,0}$, is constant for all gates:\n$$t_{g,0} = \\frac{C_g V_{\\text{dd}}}{I_{\\text{on},0}} = \\frac{C_g V_{\\text{dd}}}{k_{\\text{drive}} \\mu_0 V_{\\text{dd}}} = \\frac{C_g}{k_{\\text{drive}} \\mu_0}$$\nThe total baseline gate delay for $N$ gates is $N \\cdot t_{g,0}$.\nFor the interconnect, the baseline condition is at temperature $T=T_0$. The resistivity is $\\rho(T_0) = \\rho_0 [1 + \\alpha_T(T_0 - T_0)] = \\rho_0$.\nThe baseline resistance of one interconnect segment is:\n$$R_{\\text{seg},0} = \\frac{\\rho_0 L_{\\text{seg}}}{A_{\\text{line}}}$$\nThe total baseline interconnect delay is thus:\n$$t_{\\text{ic},0} = M R_{\\text{seg},0} C_{\\text{line}}$$\nThe total baseline delay is $t_0 = N t_{g,0} + t_{\\text{ic},0}$.\n\nNext, we derive the delay under operating conditions (perturbed delay), $t$. This requires calculating the temperature, $T$, and the stress at each gate, $\\sigma(r_i)$.\n\n1.  **Temperature Calculation**\n    The operating temperature, $T$, depends on the total power dissipated, which is the sum of background power, $P_{\\text{bg}}$, and dynamic power, $P_{\\text{dyn}}$.\n    The dynamic power is given by:\n    $$P_{\\text{dyn}} = C_{\\text{sw}} V_{\\text{dd}}^2 f \\alpha_{\\text{sw}}$$\n    where the total switched capacitance, $C_{\\text{sw}}$, is constant for the path:\n    $$C_{\\text{sw}} = N C_g + M C_{\\text{line}}$$\n    The temperature is then found using the lumped thermal model:\n    $$T = T_{\\text{amb}} + R_{\\text{th}} (P_{\\text{bg}} + P_{\\text{dyn}})$$\n\n2.  **Perturbed Interconnect Delay, $t_{\\text{ic}}(T)$**\n    The temperature-dependent resistivity is:\n    $$\\rho(T) = \\rho_0 [1 + \\alpha_T(T - T_0)]$$\n    This leads to a temperature-dependent segment resistance:\n    $$R_{\\text{seg}}(T) = \\frac{\\rho(T) L_{\\text{seg}}}{A_{\\text{line}}} = \\frac{\\rho_0 L_{\\text{seg}}}{A_{\\text{line}}} [1 + \\alpha_T(T - T_0)] = R_{\\text{seg},0} [1 + \\alpha_T(T - T_0)]$$\n    The total interconnect delay becomes:\n    $$t_{\\text{ic}}(T) = M R_{\\text{seg}}(T) C_{\\text{line}} = M R_{\\text{seg},0} C_{\\text{line}} [1 + \\alpha_T(T - T_0)] = t_{\\text{ic},0} [1 + \\alpha_T(T - T_0)]$$\n    The timing shift for the interconnect is:\n    $$\\Delta t_{\\text{interconnect}} = t_{\\text{ic}}(T) - t_{\\text{ic},0} = t_{\\text{ic},0} \\alpha_T (T - T_0)$$\n    Substituting the expression for $T$ and using $T_{\\text{amb}} = T_0$:\n    $$\\Delta t_{\\text{interconnect}} = t_{\\text{ic},0} \\alpha_T [R_{\\text{th}} (P_{\\text{bg}} + P_{\\text{dyn}})]$$\n\n3.  **Perturbed Gate Delay, $t_{g,i}$**\n    The mechanical stress at a radial distance $r_i$ from the TSV center is:\n    $$\\sigma(r_i) = \\sigma_0 \\left(\\frac{r_0}{r_i}\\right)^2$$\n    This stress modifies the mobility of the $i$-th transistor:\n    $$\\mu_i = \\mu_0 (1 + k_\\mu \\sigma(r_i))$$\n    The corresponding on-current is $I_{\\text{on},i} = k_{\\text{drive}} \\mu_i V_{\\text{dd}}$, and the gate delay is:\n    $$t_{g,i} = \\frac{C_g V_{\\text{dd}}}{I_{\\text{on},i}} = \\frac{C_g}{k_{\\text{drive}} \\mu_i} = \\frac{C_g}{k_{\\text{drive}} \\mu_0 (1 + k_\\mu \\sigma(r_i))}$$\n    Recognizing that $t_{g,0} = C_g / (k_{\\text{drive}} \\mu_0)$, we can write:\n    $$t_{g,i} = \\frac{t_{g,0}}{1 + k_\\mu \\sigma(r_i)}$$\n    The total timing shift for all gates is the sum of the individual shifts:\n    $$\\Delta t_{\\text{gates}} = \\sum_{i=1}^{N} (t_{g,i} - t_{g,0}) = \\sum_{i=1}^{N} \\left(\\frac{t_{g,0}}{1 + k_\\mu \\sigma(r_i)} - t_{g,0}\\right)$$\n    $$\\Delta t_{\\text{gates}} = t_{g,0} \\sum_{i=1}^{N} \\left( \\frac{1}{1 + k_\\mu \\sigma_0 (r_0/r_i)^2} - 1 \\right)$$\n\n4.  **Total Timing Shift, $\\Delta t$**\n    Combining the gate and interconnect contributions gives the final expression for the total timing shift:\n    $$\\Delta t = t_{g,0} \\sum_{i=1}^{N} \\left( \\frac{1}{1 + k_\\mu \\sigma_0 (r_0/r_i)^2} - 1 \\right) + t_{\\text{ic},0} \\alpha_T R_{\\text{th}} (P_{\\text{bg}} + P_{\\text{dyn}})$$\n    This expression will be implemented to solve for $\\Delta t$ for each test case, using the provided constants and case-specific parameters. All values will be converted to base SI units for computation.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the timing shift for a critical path in a 3D IC stack\n    based on thermal and mechanical stress effects.\n    \"\"\"\n    #\n    # Global Constants (SI units)\n    #\n    constants = {\n        'N': 5,  # Number of gates\n        'M': 4,  # Number of interconnect segments\n        'C_g': 2e-15,  # Gate capacitance (F)\n        'C_line': 1e-14,  # Per-segment line capacitance (F)\n        'V_dd': 0.8,  # Supply voltage (V)\n        'mu_0': 0.05,  # Baseline mobility (m^2/(V*s))\n        'k_drive': 1e-3,  # Drive constant (A*s/m^2)\n        'T_amb': 300.0,  # Ambient temperature (K)\n        'T_0': 300.0,  # Reference temperature (K)\n        'r_0': 2e-6,  # TSV radius (m)\n        'sigma_0': 1.5e8,  # Stress at TSV interface (Pa)\n        'rho_0': 1.68e-8,  # Resistivity at T_0 (Ohm*m)\n        'alpha_T': 0.0039,  # Temp. coefficient of resistivity (K^-1)\n        'L_seg': 2e-4,  # Interconnect segment length (m)\n        'A_line': 5e-13,  # Interconnect cross-sectional area (m^2)\n        'R_th': 2.0,  # Lumped thermal resistance (K/W)\n    }\n\n    #\n    # Test Suite\n    #\n    test_cases = [\n        # Case 1: general workload, moderate heating, mixed distances\n        {'P_bg': 5.0, 'f_GHz': 2.0, 'alpha_sw': 0.2, 'k_mu': 1e-11, 'dists_um': [3, 5, 10, 20, 50]},\n        # Case 2: high heating\n        {'P_bg': 50.0, 'f_GHz': 2.0, 'alpha_sw': 0.5, 'k_mu': 1e-11, 'dists_um': [3, 5, 10, 20, 50]},\n        # Case 3: no heating, negligible stress\n        {'P_bg': 0.0, 'f_GHz': 1.0, 'alpha_sw': 0.0, 'k_mu': 1e-11, 'dists_um': [100, 100, 100, 100, 100]},\n        # Case 4: near-TSV, strong stress, positive mobility effect\n        {'P_bg': 20.0, 'f_GHz': 3.0, 'alpha_sw': 0.8, 'k_mu': 1e-11, 'dists_um': [2, 2.5, 3, 3.5, 4]},\n        # Case 5: near-TSV, strong stress, negative mobility effect\n        {'P_bg': 20.0, 'f_GHz': 3.0, 'alpha_sw': 0.8, 'k_mu': -1e-11, 'dists_um': [2, 2.5, 3, 3.5, 4]},\n    ]\n\n    results = []\n\n    #\n    # Pre-compute baseline delays and constant factors\n    #\n    N = constants['N']\n    M = constants['M']\n    C_g = constants['C_g']\n    C_line = constants['C_line']\n    k_drive = constants['k_drive']\n    mu_0 = constants['mu_0']\n    rho_0 = constants['rho_0']\n    L_seg = constants['L_seg']\n    A_line = constants['A_line']\n    V_dd = constants['V_dd']\n\n    # Total switched capacitance (constant for all cases)\n    C_sw = N * C_g + M * C_line\n\n    # Baseline single gate delay\n    t_g_0 = C_g / (k_drive * mu_0)\n\n    # Baseline interconnect resistance per segment\n    R_seg_0 = (rho_0 * L_seg) / A_line\n    # Baseline total interconnect delay\n    t_ic_0 = M * R_seg_0 * C_line\n\n    for case in test_cases:\n        #\n        # Unpack case-specific parameters\n        #\n        P_bg = case['P_bg']\n        f = case['f_GHz'] * 1e9  # Convert GHz to Hz\n        alpha_sw = case['alpha_sw']\n        k_mu = case['k_mu']\n        # Convert gate distances from micrometers to meters\n        gate_dists_m = [d * 1e-6 for d in case['dists_um']]\n\n        #\n        # 1. Calculate Interconnect Timing Shift (Thermal Effect)\n        #\n        # Dynamic power calculation\n        P_dyn = C_sw * (V_dd ** 2) * f * alpha_sw\n        \n        # Temperature change\n        delta_T = constants['R_th'] * (P_bg + P_dyn)\n        \n        # Interconnect delay shift\n        delta_t_interconnect = t_ic_0 * constants['alpha_T'] * delta_T\n\n        #\n        # 2. Calculate Gate Timing Shift (Stress Effect)\n        #\n        r_0 = constants['r_0']\n        sigma_0 = constants['sigma_0']\n        \n        total_gate_shift_factor = 0.0\n        for r_i in gate_dists_m:\n            # Check for r_i < r_0, although problem statement guarantees r_i >= r_0\n            if r_i < r_0:\n                # The model is not defined for r < r_0.\n                # Per problem, this case is not expected. Default to stress at r_0.\n                stress = sigma_0\n            else:\n                stress = sigma_0 * (r_0 / r_i) ** 2\n            \n            # The formula is tg_i = tg_0 / (1 + k_mu * stress)\n            # The shift factor for one gate is (tg_i / tg_0) - 1, which equals\n            # [1 / (1 + k_mu * stress)] - 1\n            shift_factor = (1.0 / (1.0 + k_mu * stress)) - 1.0\n            total_gate_shift_factor += shift_factor\n        \n        delta_t_gate = t_g_0 * total_gate_shift_factor\n\n        #\n        # 3. Total Timing Shift\n        #\n        total_delta_t = delta_t_gate + delta_t_interconnect\n        results.append(total_delta_t)\n\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n\n```"
        }
    ]
}
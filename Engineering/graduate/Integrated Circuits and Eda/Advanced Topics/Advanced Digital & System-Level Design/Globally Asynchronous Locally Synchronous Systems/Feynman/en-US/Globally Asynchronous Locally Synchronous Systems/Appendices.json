{
    "hands_on_practices": [
        {
            "introduction": "The central challenge in any clock domain crossing is metastability, a transient state that can cause system failure. To build reliable Globally Asynchronous, Locally Synchronous (GALS) systems, we must quantitatively analyze this risk. This practice  walks through the derivation of the Mean Time Between Failures ($MTBF$) for a flip-flop synchronizer, the industry-standard metric for reliability, and demonstrates the exponential impact of adding extra synchronization stages.",
            "id": "4274483",
            "problem": "A globally asynchronous, locally synchronous (GALS) system uses a chain of flip-flops (FFs) as a synchronizer to transfer a single-bit control signal from a source clock domain to a destination clock domain. Consider the following widely used and experimentally validated metastability model: when an FF samples a data transition within an aperture window of effective width $T_0$, the FF may enter a metastable state whose resolution time $t$ is a continuous random variable with a tail probability that decays exponentially as $\\Pr\\{t > x\\} = \\exp(-x/\\tau)$, where $\\tau$ is the metastability time constant. Assume the source domain produces independent data transitions at an average rate $f_s$, the destination domain samples at clock rate $f_d$, and the data-sampling timing between domains is independent. Suppose each additional FF stage in the synchronizer provides an additional available resolution time of $T_{\\text{res}}$ before the next FF samples the potentially metastable output.\n\nStarting only from the definitions above, and from the assumption that the expected number of data transitions falling within the aperture per sampling edge is $f_s T_0$ under the small-window approximation, derive an analytical expression for the mean time between failures (MTBF) of an $N$-stage synchronizer chain in terms of $f_s$, $f_d$, $T_0$, $\\tau$, $T_{\\text{res}}$, and $N$.\n\nEvaluate this MTBF formula for $N=2$ and $N=3$ using the parameters $\\tau = 25\\ \\text{ps}$, $T_0 = 1.2\\ \\text{ns}$, $f_s = 500\\ \\text{MHz}$, $f_d = 1\\ \\text{GHz}$, and $T_{\\text{res}} = 150\\ \\text{ps}$, and express the numerical MTBF values in seconds. Finally, report as your single final answer the ratio $R$ of the $3$-stage MTBF to the $2$-stage MTBF. Round the intermediate MTBF values to $3$ significant figures (in seconds), and round the final ratio $R$ to $4$ significant figures. The final reported ratio is dimensionless and must be given without any units.",
            "solution": "The problem asks for the derivation of the mean time between failures (MTBF) for an $N$-stage flip-flop synchronizer, its evaluation for specific parameters, and the ratio of MTBFs for a $3$-stage versus a $2$-stage synchronizer. The solution will proceed by first establishing the general analytical formula for MTBF based on the provided definitions, and then substituting the given numerical values.\n\n### Step 1: Derivation of the MTBF Formula\n\nThe MTBF is the reciprocal of the failure rate, $R_{\\text{fail}}$. A failure in the synchronizer chain occurs when two conditions are met:\n1.  The first flip-flop (FF) in the chain samples the asynchronous input data during its aperture window, causing it to enter a metastable state.\n2.  This metastable state does not resolve to a stable logic level within the total time provided by the synchronizer chain.\n\nLet's analyze the rate of each event.\n\nThe rate at which the first FF enters a metastable state, $R_{\\text{meta}}$, is the product of the rate of sampling events at the destination and the probability of capturing a data transition within the aperture window at each sampling event. The destination domain samples at a clock rate of $f_d$. The problem provides the assumption that \"the expected number of data transitions falling within the aperture per sampling edge is $f_s T_0$\". This quantity represents the probability of capture, $P_{\\text{capture}}$, under the small-window approximation ($f_s T_0 \\ll 1$).\nTherefore, the rate of entering metastability is:\n$$ R_{\\text{meta}} = f_d \\cdot P_{\\text{capture}} = f_d f_s T_0 $$\n\nNext, we must determine the probability that a metastable state leads to a system failure. The problem provides a model for the resolution time $t$ of a metastable state, where the probability of the resolution time exceeding a duration $x$ is given by $\\Pr\\{t > x\\} = \\exp(-x/\\tau)$. A failure occurs if the resolution time $t$ exceeds the total time available for resolution, which we denote as $T_{\\text{avail}}(N)$ for an $N$-stage synchronizer.\nThe probability of failure, given that metastability has occurred, is:\n$$ P_{\\text{fail|meta}} = \\Pr\\{t > T_{\\text{avail}}(N)\\} = \\exp\\left(-\\frac{T_{\\text{avail}}(N)}{\\tau}\\right) $$\n\nThe problem states that \"each additional FF stage in the synchronizer provides an additional available resolution time of $T_{\\text{res}}$\". This suggests a cumulative model for the total available resolution time. The baseline for a multi-stage synchronizer is a $2$-stage chain ($N=2$), which provides one full clock period of the destination clock, $T_d = 1/f_d$, for the first FF to resolve before its output is sampled by the second FF. Thus, we define the available time for $N=2$ as $T_{\\text{avail}}(2) = T_d = 1/f_d$.\nFor each additional stage (i.e., for $N > 2$), an additional time $T_{\\text{res}}$ is added.\nFor $N=3$, $T_{\\text{avail}}(3) = T_{\\text{avail}}(2) + T_{\\text{res}} = T_d + T_{\\text{res}}$.\nFor $N=4$, $T_{\\text{avail}}(4) = T_{\\text{avail}}(3) + T_{\\text{res}} = T_d + 2T_{\\text{res}}$.\nGeneralizing for $N \\ge 2$, the total available resolution time is:\n$$ T_{\\text{avail}}(N) = T_d + (N-2)T_{\\text{res}} = \\frac{1}{f_d} + (N-2)T_{\\text{res}} $$\n\nThe overall failure rate for an $N$-stage synchronizer, $R_{\\text{fail}}(N)$, is the product of the rate of entering metastability and the probability of that state not resolving in time.\n$$ R_{\\text{fail}}(N) = R_{\\text{meta}} \\cdot P_{\\text{fail|meta}} = (f_d f_s T_0) \\exp\\left(-\\frac{T_{\\text{avail}}(N)}{\\tau}\\right) $$\nSubstituting the expression for $T_{\\text{avail}}(N)$:\n$$ R_{\\text{fail}}(N) = (f_d f_s T_0) \\exp\\left(-\\frac{1/f_d + (N-2)T_{\\text{res}}}{\\tau}\\right) $$\n\nThe MTBF is the reciprocal of the failure rate:\n$$ MTBF(N) = \\frac{1}{R_{\\text{fail}}(N)} = \\frac{1}{f_d f_s T_0} \\exp\\left(\\frac{1/f_d + (N-2)T_{\\text{res}}}{\\tau}\\right) $$\nThis is the required analytical expression for the MTBF of an $N$-stage synchronizer for $N \\ge 2$.\n\n### Step 2: Numerical Evaluation for N=2 and N=3\n\nWe are given the following parameters:\n- $\\tau = 25\\ \\text{ps} = 25 \\times 10^{-12}\\ \\text{s}$\n- $T_0 = 1.2\\ \\text{ns} = 1.2 \\times 10^{-9}\\ \\text{s}$\n- $f_s = 500\\ \\text{MHz} = 5 \\times 10^{8}\\ \\text{Hz}$\n- $f_d = 1\\ \\text{GHz} = 1 \\times 10^{9}\\ \\text{Hz}$\n- $T_{\\text{res}} = 150\\ \\text{ps} = 150 \\times 10^{-12}\\ \\text{s}$\n\nFirst, let's calculate the destination clock period $T_d$ and the denominator term $f_d f_s T_0$.\n$$ T_d = \\frac{1}{f_d} = \\frac{1}{1 \\times 10^9\\ \\text{Hz}} = 1 \\times 10^{-9}\\ \\text{s} = 1\\ \\text{ns} $$\n$$ f_d f_s T_0 = (1 \\times 10^9\\ \\text{s}^{-1}) \\cdot (5 \\times 10^8\\ \\text{s}^{-1}) \\cdot (1.2 \\times 10^{-9}\\ \\text{s}) = 6 \\times 10^8\\ \\text{s}^{-1} $$\n\n**For a 2-stage synchronizer ($N=2$):**\nThe available resolution time is $T_{\\text{avail}}(2) = T_d = 1\\ \\text{ns}$.\nThe argument of the exponent is:\n$$ \\frac{T_{\\text{avail}}(2)}{\\tau} = \\frac{1 \\times 10^{-9}\\ \\text{s}}{25 \\times 10^{-12}\\ \\text{s}} = 40 $$\nThe MTBF is:\n$$ MTBF(2) = \\frac{\\exp(40)}{6 \\times 10^8\\ \\text{s}^{-1}} \\approx \\frac{2.35385 \\times 10^{17}}{6 \\times 10^8\\ \\text{s}^{-1}} \\approx 3.92309 \\times 10^8\\ \\text{s} $$\nRounding to $3$ significant figures, $MTBF(2) \\approx 3.92 \\times 10^8\\ \\text{s}$.\n\n**For a 3-stage synchronizer ($N=3$):**\nThe available resolution time is $T_{\\text{avail}}(3) = T_d + (3-2)T_{\\text{res}} = T_d + T_{\\text{res}}$.\n$$ T_{\\text{avail}}(3) = 1\\ \\text{ns} + 150\\ \\text{ps} = 1 \\times 10^{-9}\\ \\text{s} + 0.15 \\times 10^{-9}\\ \\text{s} = 1.15 \\times 10^{-9}\\ \\text{s} $$\nThe argument of the exponent is:\n$$ \\frac{T_{\\text{avail}}(3)}{\\tau} = \\frac{1.15 \\times 10^{-9}\\ \\text{s}}{25 \\times 10^{-12}\\ \\text{s}} = 46 $$\nThe MTBF is:\n$$ MTBF(3) = \\frac{\\exp(46)}{6 \\times 10^8\\ \\text{s}^{-1}} \\approx \\frac{9.47450 \\times 10^{19}}{6 \\times 10^8\\ \\text{s}^{-1}} \\approx 1.57908 \\times 10^{11}\\ \\text{s} $$\nRounding to $3$ significant figures, $MTBF(3) \\approx 1.58 \\times 10^{11}\\ \\text{s}$.\n\n### Step 3: Calculation of the Ratio R\n\nThe final answer is the ratio $R = MTBF(3) / MTBF(2)$. Using the derived analytical expressions provides the most accurate result, cancelling common terms and avoiding potential floating-point errors from large intermediate numbers.\n$$ R = \\frac{MTBF(3)}{MTBF(2)} = \\frac{\\frac{1}{f_d f_s T_0} \\exp\\left(\\frac{T_d + T_{res}}{\\tau}\\right)}{\\frac{1}{f_d f_s T_0} \\exp\\left(\\frac{T_d}{\\tau}\\right)} = \\frac{\\exp\\left(\\frac{T_d}{\\tau} + \\frac{T_{res}}{\\tau}\\right)}{\\exp\\left(\\frac{T_d}{\\tau}\\right)} $$\n$$ R = \\exp\\left(\\left(\\frac{T_d}{\\tau} + \\frac{T_{res}}{\\tau}\\right) - \\frac{T_d}{\\tau}\\right) = \\exp\\left(\\frac{T_{res}}{\\tau}\\right) $$\nNow, we substitute the values for $T_{res}$ and $\\tau$:\n$$ \\frac{T_{res}}{\\tau} = \\frac{150 \\times 10^{-12}\\ \\text{s}}{25 \\times 10^{-12}\\ \\text{s}} = 6 $$\nTherefore, the ratio is:\n$$ R = \\exp(6) \\approx 403.428793... $$\nRounding the final ratio $R$ to $4$ significant figures gives $403.4$.",
            "answer": "$$\\boxed{403.4}$$"
        },
        {
            "introduction": "Beyond single-bit reliability, transferring a multi-bit bus across a clock domain introduces the challenge of data coherency, where a naive implementation can lead to disastrous functional errors. This design problem  presents a common but flawed Clock Domain Crossing (CDC) implementation and challenges you to select and justify a robust architectural redesign. It requires applying your knowledge of synchronizer $MTBF$ and safe design patterns to navigate practical constraints.",
            "id": "4274473",
            "problem": "A Globally Asynchronous, Locally Synchronous (GALS) system integrates a source clock domain $\\mathcal{S}$ running at frequency $f_{\\mathcal{S}}$ and a destination clock domain $\\mathcal{D}$ running at frequency $f_{\\mathcal{D}}$. A Clock Domain Crossing (CDC) report flags a violation: \"combinational logic on a crossing path.\" Investigation reveals that an $N$-bit status bus ($N = 16$) generated in $\\mathcal{S}$ feeds a combinational decoder in $\\mathcal{D}$ that ultimately drives a control signal used by sequential logic in $\\mathcal{D}$. The bus is updated sporadically, at a maximum event rate $f_{\\text{event}}$, and is currently sent directly without a registered interface in $\\mathcal{S}$.\n\nYou are asked to determine the root cause and select a redesign that both eliminates the CDC violation and satisfies reliability constraints for metastability. The destination flip-flops are characterized by a metastability time constant $\\tau$ and an empirical parameter $T_0$. The design constraint requires a Mean Time Between Failures (MTBF) of at least $10$ years for the crossing control signal. To keep area and complexity bounded, the total sequential element count added by the crossing solution must be less than $100$. The system parameters are:\n- $f_{\\mathcal{D}} = 500\\,\\text{MHz}$,\n- $f_{\\text{event}} = 5\\,\\text{MHz}$,\n- $\\tau = 20\\,\\text{ps}$,\n- $T_0 = 0.05\\,\\text{ns}$,\n- destination setup time $t_{\\text{su}} = 0.05\\,\\text{ns}$.\n\nAssume the following widely accepted facts for flip-flop sampling in asynchronous crossings: the probability that a metastable event persists longer than a resolution time decays exponentially with the resolution time, the destination clock period is $T_{\\mathcal{D}} = 1/f_{\\mathcal{D}}$, and a $k$-stage synchronizer provides approximately $(k-1)$ destination clock periods of resolution time prior to the final capture. Also assume the MTBF scales inversely with the product of the destination clock frequency and the data/event rate. No fan-in reconvergence of independently synchronized multi-bit signals is permitted.\n\nWhich option provides a correct and sufficient redesign and placement of synchronizers to eliminate the flagged \"combinational logic on a crossing path\" while meeting the MTBF and area constraints?\n\nA. Register the $N$-bit status bus in $\\mathcal{S}$ and generate a single-bit request strobe that is asserted when new bus data is available. Hold the bus stable until acknowledgement from $\\mathcal{D}$. Cross only the single-bit strobe into $\\mathcal{D}$ through a $2$-flip-flop synchronizer, edge-detect it in $\\mathcal{D}$, capture the bus into a destination register on the detected event, and place all decoding logic strictly after the destination register. Return a single-bit acknowledgement through a $2$-flip-flop synchronizer back to $\\mathcal{S}$. Do not use a First-In First-Out (FIFO). Justify that a $2$-stage synchronizer meets the MTBF requirement with the given parameters.\n\nB. Keep the combinational decoder in $\\mathcal{D}$, but add a $2$-flip-flop synchronizer to each of the $N$ data bits individually. Eliminate the request/acknowledge handshake for simplicity. Feed the synchronized multi-bit bus directly into the existing combinational decoder.\n\nC. Register the $N$-bit bus in $\\mathcal{S}$, cross a single-bit valid signal into $\\mathcal{D}$ with a single flip-flop synchronizer to minimize latency, and allow the combinational decoder in $\\mathcal{D}$ to gate downstream sequential logic based on the asynchronous bus values before any destination register capture.\n\nD. Eliminate the combinational hazard by introducing a dual-clock asynchronous First-In First-Out (FIFO) with Gray-coded pointers whose data width is $N$ and a minimum depth of $8$, and feed its output into the existing combinational decoder in $\\mathcal{D}$. Do not add any request/acknowledge handshake. Accept the added complexity and area, and argue the FIFO inherently resolves CDC issues and MTBF concerns for the control signal.",
            "solution": "### Solution Derivation\n\nThe root cause of the flagged violation, \"combinational logic on a crossing path,\" is that the $N$-bit bus from domain $\\mathcal{S}$ is being fed directly into a combinational decoder in domain $\\mathcal{D}$. Because the bus is asynchronous to $\\mathcal{D}$'s clock, its bits may be sampled at different times relative to their transitions, causing the decoder to see transient, invalid input values. This can lead to glitches and functional failures in the control signal generated by the decoder.\n\nA secondary, critical issue is ensuring data coherency for the $N=16$ bit bus. If each bit were synchronized independently, timing variations and metastability could cause the set of synchronized bits to represent a value that never existed in the source domain. The problem statement explicitly forbids this by disallowing \"fan-in reconvergence of independently synchronized multi-bit signals,\" which is precisely what would happen if independently synchronized bits were fed into a common decoder.\n\nA valid redesign must therefore satisfy three primary criteria:\n1.  **Eliminate the combinational path violation**: The asynchronous bus must first be captured into a register synchronous to the destination clock domain $\\mathcal{D}$ before being used by any combinational logic in $\\mathcal{D}$.\n2.  **Ensure multi-bit data coherency**: A mechanism must be used to guarantee that the entire $N$-bit bus is transferred as a single, valid word. Common solutions include handshake protocols or asynchronous FIFOs.\n3.  **Meet all constraints**: The solution must satisfy the MTBF requirement of $\\ge 10$ years and the area constraint of adding fewer than $100$ sequential elements.\n\nWe first analyze the MTBF constraint for a synchronizer on a single-bit signal. The standard formula for MTBF is:\n$$ \\text{MTBF} = \\frac{e^{t_{\\text{res}}/\\tau}}{T_0 \\cdot f_{\\text{clk}} \\cdot f_{\\text{data}}} $$\nBased on the problem statement, we use $f_{\\text{clk}} = f_{\\mathcal{D}}$ and $f_{\\text{data}} = f_{\\text{event}}$. The resolution time, $t_{\\text{res}}$, for a $k$-stage synchronizer is given as $t_{\\text{res}} = (k-1)T_{\\mathcal{D}}$, where $T_{\\mathcal{D}} = 1/f_{\\mathcal{D}}$.\n\nLet's calculate the MTBF for a $2$-stage ($k=2$) synchronizer:\n- $f_{\\mathcal{D}} = 500\\,\\text{MHz} = 5 \\times 10^8\\,\\text{Hz}$\n- $T_{\\mathcal{D}} = 1 / (5 \\times 10^8\\,\\text{Hz}) = 2 \\times 10^{-9}\\,\\text{s} = 2\\,\\text{ns}$\n- $f_{\\text{event}} = 5\\,\\text{MHz} = 5 \\times 10^6\\,\\text{Hz}$\n- $\\tau = 20\\,\\text{ps} = 20 \\times 10^{-12}\\,\\text{s}$\n- $T_0 = 0.05\\,\\text{ns} = 5 \\times 10^{-11}\\,\\text{s}$\n- For $k=2$, resolution time is $t_{\\text{res}} = (2-1)T_{\\mathcal{D}} = T_{\\mathcal{D}} = 2\\,\\text{ns}$.\n\nThe exponent term is $t_{\\text{res}}/\\tau = (2 \\times 10^{-9}\\,\\text{s}) / (20 \\times 10^{-12}\\,\\text{s}) = 100$.\nThe denominator is $T_0 \\cdot f_{\\mathcal{D}} \\cdot f_{\\text{event}} = (5 \\times 10^{-11}\\,\\text{s}) \\cdot (5 \\times 10^8\\,\\text{s}^{-1}) \\cdot (5 \\times 10^6\\,\\text{s}^{-1}) = 125 \\times 10^3\\,\\text{s}^{-1} = 1.25 \\times 10^5\\,\\text{s}^{-1}$.\n\nThe MTBF is:\n$$ \\text{MTBF} = \\frac{e^{100}}{1.25 \\times 10^5\\,\\text{s}^{-1}} \\approx \\frac{2.69 \\times 10^{43}}{1.25 \\times 10^5}\\,\\text{s} \\approx 2.15 \\times 10^{38}\\,\\text{s} $$\nThe required MTBF is $10$ years, which is approximately $10 \\times 3.15 \\times 10^7\\,\\text{s} = 3.15 \\times 10^8\\,\\text{s}$. Since $2.15 \\times 10^{38}\\,\\text{s} \\gg 3.15 \\times 10^8\\,\\text{s}$, a $2$-stage synchronizer is more than sufficient to meet the reliability constraint for a single-bit crossing.\n\n### Option-by-Option Analysis\n\n**A. Register the $N$-bit status bus in $\\mathcal{S}$ and generate a single-bit request strobe that is asserted when new bus data is available. Hold the bus stable until acknowledgement from $\\mathcal{D}$. Cross only the single-bit strobe into $\\mathcal{D}$ through a $2$-flip-flop synchronizer, edge-detect it in $\\mathcal{D}$, capture the bus into a destination register on the detected event, and place all decoding logic strictly after the destination register. Return a single-bit acknowledgement through a $2$-flip-flop synchronizer back to $\\mathcal{S}$. Do not use a First-In First-Out (FIFO). Justify that a $2$-stage synchronizer meets the MTBF requirement with the given parameters.**\n\nThis option describes a classic request-acknowledge (req/ack) handshake protocol.\n- **Fixes violation?** Yes. It explicitly states that the bus is captured into a destination register and the decoder is placed *after* this register.\n- **Ensures coherency?** Yes. The data bus from $\\mathcal{S}$ is held stable while the single-bit `request` signal crosses the domains. Domain $\\mathcal{D}$ only captures the bus after receiving the synchronized `request`, guaranteeing the bus data is stable and coherent.\n- **Meets MTBF?** Yes. It uses $2$-flip-flop synchronizers for the single-bit control signals (`request` and `acknowledge`). As calculated above, this provides an MTBF far exceeding the requirement.\n- **Meets Area Constraint?** Added sequential elements include:\n    - Register for the bus in $\\mathcal{S}$: $N=16$ flip-flops.\n    - `request` synchronizer: $2$ flip-flops.\n    - Capture register for the bus in $\\mathcal{D}$: $N=16$ flip-flops.\n    - `acknowledge` synchronizer: $2$ flip-flops.\n    - Control logic (e.g., edge detector, FSMs) might add a few more, e.g., $1-4$ flip-flops.\n    - Total: $16 + 2 + 16 + 2 + (\\text{control logic}) \\approx 36-40$ flip-flops. This is well below the limit of $100$.\n\n**Verdict: Correct.** This is a textbook, robust solution that satisfies all problem constraints.\n\n**B. Keep the combinational decoder in $\\mathcal{D}$, but add a $2$-flip-flop synchronizer to each of the $N$ data bits individually. Eliminate the request/acknowledge handshake for simplicity. Feed the synchronized multi-bit bus directly into the existing combinational decoder.**\n\nThis option synchronizes each bit of the bus independently.\n- **Fixes violation?** No. While synchronizers are added, feeding their outputs directly into a decoder constitutes a fan-in reconvergence path. This is explicitly disallowed by the problem statement and is a known source of functional bugs due to inter-bit skew introduced by the independent synchronizers.\n- **Ensures coherency?** No. This design is the canonical example of how *not* to handle multi-bit CDC, as it leads to data incoherency.\n- **Constraints?** The area ($16 \\times 2 = 32$ FFs) and individual-bit MTBF would be met, but the circuit is functionally incorrect.\n\n**Verdict: Incorrect.** This design is fundamentally flawed and violates a stated constraint of the problem's engineering context.\n\n**C. Register the $N$-bit bus in $\\mathcal{S}$, cross a single-bit valid signal into $\\mathcal{D}$ with a single flip-flop synchronizer to minimize latency, and allow the combinational decoder in $\\mathcal{D}$ to gate downstream sequential logic based on the asynchronous bus values before any destination register capture.**\n\nThis option proposes two major design errors.\n- **Fixes violation?** No. It explicitly allows the decoder to be driven by \"asynchronous bus values,\" which is the original problem.\n- **Ensures coherency?** No, for the same reason.\n- **Meets MTBF?** Absolutely not. A \"single flip-flop synchronizer\" ($k=1$) provides zero resolution time ($t_{\\text{res}}=0$). The MTBF would be:\n$$ \\text{MTBF} = \\frac{e^{0}}{1.25 \\times 10^5\\,\\text{s}^{-1}} = 8 \\times 10^{-6}\\,\\text{s} = 8\\,\\mu\\text{s} $$\nThis failure rate is catastrophic and violates the $10$-year MTBF requirement by many orders of magnitude.\n\n**Verdict: Incorrect.** This solution is unsafe, unreliable, and fails to correct the original design flaw.\n\n**D. Eliminate the combinational hazard by introducing a dual-clock asynchronous First-In First-Out (FIFO) with Gray-coded pointers whose data width is $N$ and a minimum depth of $8$, and feed its output into the existing combinational decoder in $\\mathcal{D}$. Do not add any request/acknowledge handshake. Accept the added complexity and area, and argue the FIFO inherently resolves CDC issues and MTBF concerns for the control signal.**\n\nThis option proposes using an asynchronous FIFO.\n- **Fixes violation?** Yes. The read-side output of an async FIFO is synchronous to the destination clock, so it can be safely fed to a decoder.\n- **Ensures coherency?** Yes. A FIFO is a standard, robust solution for transferring coherent multi-bit data across clock domains.\n- **Meets MTBF?** Yes, a properly designed FIFO with internal pointer synchronizers (typically $2$ or $3$ stages) will meet the MTBF requirement.\n- **Meets Area Constraint?** No. The area constraint is \"less than $100$ sequential elements.\"\n    - The data storage alone requires $N \\times \\text{depth} = 16 \\times 8 = 128$ flip-flops.\n    - This number by itself exceeds the $100$-element limit. The FIFO also requires additional flip-flops for its internal pointers and synchronizers.\n\n**Verdict: Incorrect.** While a functionally correct solution, it violates the explicit area constraint given in the problem statement.",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "Asynchronous data channels, often implemented with First-In First-Out (FIFO) buffers, are the backbone of many GALS systems. While they solve data coherency issues, their long-term stability depends on the relative frequencies of the read and write clocks. This exercise  explores how small, bounded clock frequency deviations can lead to significant FIFO occupancy drift over time, requiring careful analysis to determine the necessary buffer depth to prevent overflow or underflow.",
            "id": "4274541",
            "problem": "Consider a Globally Asynchronous, Locally Synchronous (GALS) channel implemented with a First-In First-Out (FIFO) buffer that bridges two independent clock domains. The write-side logic is clocked at a nominal rate of $f_{w} = 600\\text{ MHz}$ and the read-side logic is clocked at a nominal rate of $f_{r} = 500\\text{ MHz}$. Assume the FIFO increments its write pointer by $1$ on each write-side clock cycle and its read pointer by $1$ on each read-side clock cycle, with no stalls, so that the instantaneous write and read rates equal their respective clock frequencies. The FIFO depth is $D = 64$ entries.\n\nEach clock source is free-running and can deviate from nominal within a bounded frequency stability of $\\pm 50\\text{ ppm}$, independently across domains. Model the FIFO occupancy drift $N(t)$, measured in entries, as the time integral of the instantaneous rate difference between writes and reads, starting from $N(0) = 0$. Let the observation interval be $T = 1\\text{ ms}$.\n\nUsing only the rate-difference definition of cumulative token accumulation and standard properties of parts-per-million frequency stability, do the following:\n- Compute the expected FIFO occupancy drift over the interval $[0, T]$ under nominal frequencies (i.e., ignoring the $\\pm 50\\text{ ppm}$ deviations).\n- Compute the minimum required FIFO depth (an integer number of entries) to avoid overflow over the same interval under worst-case frequency deviations within the $\\pm 50\\text{ ppm}$ bound of each domain.\n\nExpress both results as exact integers (no rounding) and report them as a number of entries. The final answer must be a single composite result containing both quantities.",
            "solution": "The problem is deemed valid as it is scientifically grounded in principles of digital circuit design and clock domain crossing, is well-posed with all necessary information provided, and is expressed in objective, formal language. We proceed with the solution.\n\nThe FIFO occupancy drift, $N(t)$, represents the net accumulation of entries in the buffer over time. It is defined as the time integral of the difference between the instantaneous write rate, $r_w(t)$, and the instantaneous read rate, $r_r(t)$. The initial condition is given as $N(0) = 0$.\n\n$$N(T) = \\int_{0}^{T} [r_w(\\tau) - r_r(\\tau)] d\\tau$$\n\nThe problem assumes that the instantaneous write and read rates are equal to their respective clock frequencies, $f_w(t)$ and $f_r(t)$. Therefore, we have $r_w(t) = f_w(t)$ and $r_r(t) = f_r(t)$.\n\nThe first task is to compute the expected FIFO occupancy drift over the interval $T = 1 \\text{ ms}$ under nominal frequencies.\n\nThe nominal frequencies are given as:\n- Write frequency: $f_{w,nom} = 600 \\text{ MHz} = 600 \\times 10^6 \\text{ s}^{-1}$\n- Read frequency: $f_{r,nom} = 500 \\text{ MHz} = 500 \\times 10^6 \\text{ s}^{-1}$\n\nThe observation interval is $T = 1 \\text{ ms} = 1 \\times 10^{-3} \\text{ s}$.\n\nUnder nominal conditions, the frequencies are constant. The rate difference is also constant:\n$$ \\Delta f_{nom} = f_{w,nom} - f_{r,nom} = (600 \\times 10^6) - (500 \\times 10^6) = 100 \\times 10^6 \\text{ s}^{-1} $$\n\nThe expected occupancy drift, $N_{nom}(T)$, is the integral of this constant rate difference over the interval $[0, T]$:\n$$ N_{nom}(T) = \\int_{0}^{T} \\Delta f_{nom} d\\tau = \\Delta f_{nom} \\times T $$\n$$ N_{nom}(T) = (100 \\times 10^6 \\text{ s}^{-1}) \\times (1 \\times 10^{-3} \\text{ s}) = 100 \\times 10^3 = 100,000 $$\nThe expected FIFO occupancy drift is $100,000$ entries.\n\nThe second task is to compute the minimum required FIFO depth to avoid overflow over the same interval, considering the worst-case frequency deviations.\n\nThe frequency stability for each clock source is given as $\\delta = \\pm 50 \\text{ ppm}$, which is a fractional deviation of $\\pm 50 \\times 10^{-6}$. To find the maximum possible occupancy drift, we must find the maximum possible rate difference. This occurs when the write frequency is at its maximum and the read frequency is at its minimum.\n\nThe maximum write frequency is:\n$$ f_{w,max} = f_{w,nom} (1 + 50 \\times 10^{-6}) = (600 \\times 10^6)(1.00005) \\text{ s}^{-1} $$\n\nThe minimum read frequency is:\n$$ f_{r,min} = f_{r,nom} (1 - 50 \\times 10^{-6}) = (500 \\times 10^6)(0.99995) \\text{ s}^{-1} $$\n\nThe worst-case (maximum) rate difference, $\\Delta f_{max}$, is:\n$$ \\Delta f_{max} = f_{w,max} - f_{r,min} $$\n$$ \\Delta f_{max} = f_{w,nom}(1 + 50 \\times 10^{-6}) - f_{r,nom}(1 - 50 \\times 10^{-6}) $$\n$$ \\Delta f_{max} = (f_{w,nom} - f_{r,nom}) + (f_{w,nom} + f_{r,nom})(50 \\times 10^{-6}) $$\n\nSubstituting the numerical values:\n$$ \\Delta f_{max} = (100 \\times 10^6) + (600 \\times 10^6 + 500 \\times 10^6)(50 \\times 10^{-6}) $$\n$$ \\Delta f_{max} = (100 \\times 10^6) + (1100 \\times 10^6)(50 \\times 10^{-6}) $$\n$$ \\Delta f_{max} = (100 \\times 10^6) + (11 \\times 10^8)(5 \\times 10^{-5}) $$\n$$ \\Delta f_{max} = 100 \\times 10^6 + 55 \\times 10^3 = 100,000,000 + 55,000 = 100,055,000 \\text{ s}^{-1} $$\n\nThe maximum occupancy drift, $N_{max}(T)$, is the integral of this maximum constant rate difference over the interval $[0, T]$:\n$$ N_{max}(T) = \\Delta f_{max} \\times T $$\n$$ N_{max}(T) = (100,055,000 \\text{ s}^{-1}) \\times (1 \\times 10^{-3} \\text{ s}) = 100,055 $$\n\nTo avoid overflow, the FIFO depth must be at least equal to the maximum number of entries accumulated. Since the calculation yields an exact integer, the minimum required FIFO depth is $100,055$ entries. The provided FIFO depth of $D=64$ is insufficient for this observation interval.\n\nThe two computed quantities are:\n1. Expected nominal occupancy drift: $100,000$ entries.\n2. Minimum required FIFO depth for worst-case deviations: $100,055$ entries.",
            "answer": "$$\\boxed{\\begin{pmatrix} 100000 & 100055 \\end{pmatrix}}$$"
        }
    ]
}
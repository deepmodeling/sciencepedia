{
    "hands_on_practices": [
        {
            "introduction": "The power of the logical effort model lies in its ability to abstract complex transistor-level physics into a few simple, powerful parameters. This practice goes to the heart of this abstraction, guiding you to derive the logical effort ($g$) and parasitic delay ($p$) for multi-input NAND and NOR gates from first principles. By grounding these parameters in a consistent transistor sizing policy, you will gain a deeper appreciation for how gate topology dictates its intrinsic delay characteristics. ",
            "id": "4279912",
            "problem": "In a Complementary Metal-Oxide-Semiconductor (CMOS) standard-cell library used in Electronic Design Automation (EDA), consider gates built from Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFET). Assume the following well-tested properties: (i) the on-resistance of a MOSFET channel scales inversely with its effective width, (ii) the gate capacitance per unit width is the same for $n$-channel and $p$-channel devices, and (iii) the drain diffusion capacitance per unit width is linear in width but may differ between $n$-channel and $p$-channel devices. Let a reference inverter be sized with $n$-channel width $W_{n,\\mathrm{inv}}=1$ and $p$-channel width $W_{p,\\mathrm{inv}}=\\alpha$, chosen so that the worst-case pull-up and pull-down resistances of the inverter are equal. Use the common design choice $\\alpha=2$.\n\nUnder a consistent sizing policy, every logic gate is sized so that its worst-case pull-up and worst-case pull-down resistances match those of the reference inverter. For a $k$-input NAND gate and a $k$-input NOR gate, with $k \\geq 2$, use the definitions of logical effort $g$ and parasitic delay $p$ based on the classic effort-delay model: the logical effort $g$ of an input is the ratio of that input’s gate capacitance to the input gate capacitance of the reference inverter that provides the same output drive, and the parasitic delay $p$ is the gate’s intrinsic delay contribution normalized to the same reference (equivalently, proportional to the intrinsic output-node diffusion capacitance normalized to that of the reference inverter, under identical resistance matching and waveform assumptions).\n\nDerive closed-form expressions for the logical effort $g$ and parasitic delay $p$ for both the $k$-input NAND and $k$-input NOR under the stated sizing policy and assumptions. Express your final answer as functions of $k$ only, in the order $(g_{\\mathrm{NAND}_k},\\,p_{\\mathrm{NAND}_k},\\,g_{\\mathrm{NOR}_k},\\,p_{\\mathrm{NOR}_k})$. No numerical rounding is required, and no physical units are involved.",
            "solution": "The problem is well-posed and grounded in the established theory of logical effort for CMOS digital circuits. It provides sufficient information to derive the requested quantities under a standard set of simplifying assumptions common to this model. We shall proceed with a formal derivation.\n\n**1. Reference Inverter Parameters**\n\nLet $R_{n,\\text{unit}}$ and $R_{p,\\text{unit}}$ denote the on-resistances of n-channel and p-channel MOSFETs of unit width, respectively. The problem states that a MOSFET's on-resistance is inversely proportional to its width, $W$.\n$R_{n}(W) = \\frac{R_{n,\\text{unit}}}{W}$ and $R_{p}(W) = \\frac{R_{p,\\text{unit}}}{W}$.\n\nThe reference inverter is sized with $W_{n,\\mathrm{inv}}=1$ and $W_{p,\\mathrm{inv}}=\\alpha$. The problem specifies that its pull-up and pull-down resistances are matched.\nThe pull-down resistance is $R_{pd,\\mathrm{inv}} = R_{n}(W_{n,\\mathrm{inv}}) = \\frac{R_{n,\\text{unit}}}{1} = R_{n,\\text{unit}}$.\nThe pull-up resistance is $R_{pu,\\mathrm{inv}} = R_{p}(W_{p,\\mathrm{inv}}) = \\frac{R_{p,\\text{unit}}}{\\alpha}$.\nEquating these gives $R_{n,\\text{unit}} = \\frac{R_{p,\\text{unit}}}{\\alpha}$, which establishes the intrinsic resistance relationship: $R_{p,\\text{unit}} = \\alpha R_{n,\\text{unit}}$. This means a unit-width pMOS is $\\alpha$ times more resistive than a unit-width nMOS.\nThe drive resistance of the reference inverter, which serves as the reference for all other gates, is $R_{\\mathrm{ref}} = R_{n,\\text{unit}}$. The problem states $\\alpha=2$.\n\nThe input capacitance of the reference inverter, $C_{\\mathrm{inv}}$, is the sum of its gate capacitances. Let $C_{g,\\text{unit}}$ be the gate capacitance per unit width, assumed to be identical for nMOS and pMOS.\n$$C_{\\mathrm{inv}} = C_{g,\\text{unit}} W_{n,\\mathrm{inv}} + C_{g,\\text{unit}} W_{p,\\mathrm{inv}} = C_{g,\\text{unit}}(1 + \\alpha)$$\n\nThe parasitic delay is proportional to the total diffusion capacitance at the output node, normalized by the same for the reference inverter. Let $C_{d,n,\\text{unit}}$ and $C_{d,p,\\text{unit}}$ be the diffusion capacitances per unit width for nMOS and pMOS. The problem statement necessitates that the final expressions for parasitic delay $p$ depend only on $k$. This requires the ratio of nMOS to pMOS diffusion capacitance per unit width to be fixed. The standard simplifying assumption in the logical effort model, which we are compelled to adopt here, is that they are equal: $C_{d,n,\\text{unit}} = C_{d,p,\\text{unit}} \\equiv C_{d,\\text{unit}}$.\nThe parasitic capacitance of the reference inverter is thus:\n$$C_{p,\\mathrm{inv}} = C_{d,\\text{unit}} W_{n,\\mathrm{inv}} + C_{d,\\text{unit}} W_{p,\\mathrm{inv}} = C_{d,\\text{unit}}(W_{n,\\mathrm{inv}} + W_{p,\\mathrm{inv}}) = C_{d,\\text{unit}}(1 + \\alpha)$$\n\n**2. Analysis of the $k$-input NAND Gate ($\\mathrm{NAND}_k$)**\n\nA $k$-input NAND gate consists of a pull-down network of $k$ nMOS transistors in series and a pull-up network of $k$ pMOS transistors in parallel. Let the widths be $W_{n,\\mathrm{NAND}}$ and $W_{p,\\mathrm{NAND}}$.\n\n*   **Sizing for Resistance Matching:**\n    *   The pull-down resistance is the sum of the resistances of $k$ series nMOS transistors: $R_{pd,\\mathrm{NAND}} = k \\cdot R_{n}(W_{n,\\mathrm{NAND}}) = k \\frac{R_{n,\\text{unit}}}{W_{n,\\mathrm{NAND}}}$.\n    To match the reference drive, we set $R_{pd,\\mathrm{NAND}} = R_{\\mathrm{ref}} = R_{n,\\text{unit}}$:\n    $$k \\frac{R_{n,\\text{unit}}}{W_{n,\\mathrm{NAND}}} = R_{n,\\text{unit}} \\implies W_{n,\\mathrm{NAND}} = k$$\n    *   The worst-case pull-up resistance occurs when only one of the $k$ parallel pMOS transistors is conducting: $R_{pu,\\mathrm{NAND}} = R_{p}(W_{p,\\mathrm{NAND}}) = \\frac{R_{p,\\text{unit}}}{W_{p,\\mathrm{NAND}}} = \\frac{\\alpha R_{n,\\text{unit}}}{W_{p,\\mathrm{NAND}}}$.\n    To match the reference drive, we set $R_{pu,\\mathrm{NAND}} = R_{\\mathrm{ref}} = R_{n,\\text{unit}}$:\n    $$\\frac{\\alpha R_{n,\\text{unit}}}{W_{p,\\mathrm{NAND}}} = R_{n,\\text{unit}} \\implies W_{p,\\mathrm{NAND}} = \\alpha$$\n\n*   **Logical Effort ($g_{\\mathrm{NAND}_k}$):**\n    The logical effort is the ratio of the gate's input capacitance to that of the reference inverter. The capacitance of one input is due to one nMOS and one pMOS gate.\n    $$C_{\\mathrm{in},\\mathrm{NAND}} = C_{g,\\text{unit}}(W_{n,\\mathrm{NAND}} + W_{p,\\mathrm{NAND}}) = C_{g,\\text{unit}}(k + \\alpha)$$\n    $$g_{\\mathrm{NAND}_k} = \\frac{C_{\\mathrm{in},\\mathrm{NAND}}}{C_{\\mathrm{inv}}} = \\frac{C_{g,\\text{unit}}(k + \\alpha)}{C_{g,\\text{unit}}(1 + \\alpha)} = \\frac{k + \\alpha}{1 + \\alpha}$$\n    Substituting $\\alpha=2$, we get $g_{\\mathrm{NAND}_k} = \\frac{k+2}{3}$.\n\n*   **Parasitic Delay ($p_{\\mathrm{NAND}_k}$):**\n    The output node is connected to the drains of all $k$ pMOS transistors and the drain of the single nMOS at the top of the series stack.\n    $$C_{p,\\mathrm{NAND}} = (k \\cdot C_{d,p,\\text{unit}} \\cdot W_{p,\\mathrm{NAND}}) + (1 \\cdot C_{d,n,\\text{unit}} \\cdot W_{n,\\mathrm{NAND}})$$\n    Using our assumption $C_{d,n,\\text{unit}}=C_{d,p,\\text{unit}}=C_{d,\\text{unit}}$:\n    $$C_{p,\\mathrm{NAND}} = C_{d,\\text{unit}}(k \\cdot W_{p,\\mathrm{NAND}} + W_{n,\\mathrm{NAND}}) = C_{d,\\text{unit}}(k \\alpha + k) = C_{d,\\text{unit}} k(1+\\alpha)$$\n    The parasitic delay is the ratio of parasitic capacitances:\n    $$p_{\\mathrm{NAND}_k} = \\frac{C_{p,\\mathrm{NAND}}}{C_{p,\\mathrm{inv}}} = \\frac{C_{d,\\text{unit}} k(1+\\alpha)}{C_{d,\\text{unit}}(1+\\alpha)} = k$$\n\n**3. Analysis of the $k$-input NOR Gate ($\\mathrm{NOR}_k$)**\n\nA $k$-input NOR gate consists of a pull-down network of $k$ nMOS transistors in parallel and a pull-up network of $k$ pMOS transistors in series. Let the widths be $W_{n,\\mathrm{NOR}}$ and $W_{p,\\mathrm{NOR}}$.\n\n*   **Sizing for Resistance Matching:**\n    *   The worst-case pull-down resistance occurs when only one of the $k$ parallel nMOS transistors is conducting: $R_{pd,\\mathrm{NOR}} = R_{n}(W_{n,\\mathrm{NOR}}) = \\frac{R_{n,\\text{unit}}}{W_{n,\\mathrm{NOR}}}$.\n    To match the reference drive, we set $R_{pd,\\mathrm{NOR}} = R_{\\mathrm{ref}} = R_{n,\\text{unit}}$:\n    $$\\frac{R_{n,\\text{unit}}}{W_{n,\\mathrm{NOR}}} = R_{n,\\text{unit}} \\implies W_{n,\\mathrm{NOR}} = 1$$\n    *   The pull-up resistance is the sum of the resistances of $k$ series pMOS transistors: $R_{pu,\\mathrm{NOR}} = k \\cdot R_{p}(W_{p,\\mathrm{NOR}}) = k \\frac{R_{p,\\text{unit}}}{W_{p,\\mathrm{NOR}}} = k \\frac{\\alpha R_{n,\\text{unit}}}{W_{p,\\mathrm{NOR}}}$.\n    To match the reference drive, we set $R_{pu,\\mathrm{NOR}} = R_{\\mathrm{ref}} = R_{n,\\text{unit}}$:\n    $$k \\frac{\\alpha R_{n,\\text{unit}}}{W_{p,\\mathrm{NOR}}} = R_{n,\\text{unit}} \\implies W_{p,\\mathrm{NOR}} = k \\alpha$$\n\n*   **Logical Effort ($g_{\\mathrm{NOR}_k}$):**\n    The capacitance of one input is due to one nMOS and one pMOS gate.\n    $$C_{\\mathrm{in},\\mathrm{NOR}} = C_{g,\\text{unit}}(W_{n,\\mathrm{NOR}} + W_{p,\\mathrm{NOR}}) = C_{g,\\text{unit}}(1 + k\\alpha)$$\n    $$g_{\\mathrm{NOR}_k} = \\frac{C_{\\mathrm{in},\\mathrm{NOR}}}{C_{\\mathrm{inv}}} = \\frac{C_{g,\\text{unit}}(1 + k\\alpha)}{C_{g,\\text{unit}}(1 + \\alpha)} = \\frac{1 + k\\alpha}{1 + \\alpha}$$\n    Substituting $\\alpha=2$, we get $g_{\\mathrm{NOR}_k} = \\frac{1+2k}{3}$.\n\n*   **Parasitic Delay ($p_{\\mathrm{NOR}_k}$):**\n    The output node is connected to the drains of all $k$ nMOS transistors and the drain of the single pMOS at the bottom of the series stack.\n    $$C_{p,\\mathrm{NOR}} = (k \\cdot C_{d,n,\\text{unit}} \\cdot W_{n,\\mathrm{NOR}}) + (1 \\cdot C_{d,p,\\text{unit}} \\cdot W_{p,\\mathrm{NOR}})$$\n    Using our assumption $C_{d,n,\\text{unit}}=C_{d,p,\\text{unit}}=C_{d,\\text{unit}}$:\n    $$C_{p,\\mathrm{NOR}} = C_{d,\\text{unit}}(k \\cdot W_{n,\\mathrm{NOR}} + W_{p,\\mathrm{NOR}}) = C_{d,\\text{unit}}(k \\cdot 1 + k\\alpha) = C_{d,\\text{unit}} k(1+\\alpha)$$\n    The parasitic delay is the ratio of parasitic capacitances:\n    $$p_{\\mathrm{NOR}_k} = \\frac{C_{p,\\mathrm{NOR}}}{C_{p,\\mathrm{inv}}} = \\frac{C_{d,\\text{unit}} k(1+\\alpha)}{C_{d,\\text{unit}}(1+\\alpha)} = k$$\n\n**4. Final Expressions**\n\nWe collect the results and substitute the given value $\\alpha=2$.\n- Logical effort of a $k$-input NAND gate: $g_{\\mathrm{NAND}_k} = \\frac{k+2}{3}$\n- Parasitic delay of a $k$-input NAND gate: $p_{\\mathrm{NAND}_k} = k$\n- Logical effort of a $k$-input NOR gate: $g_{\\mathrm{NOR}_k} = \\frac{1+2k}{3}$\n- Parasitic delay of a $k$-input NOR gate: $p_{\\mathrm{NOR}_k} = k$\n\nThe final answer is the ordered set $(g_{\\mathrm{NAND}_k}, p_{\\mathrm{NAND}_k}, g_{\\mathrm{NOR}_k}, p_{\\mathrm{NOR}_k})$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{k+2}{3} & k & \\frac{1+2k}{3} & k\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "With the tools to characterize individual gates, we can now address the central goal of path delay optimization. This exercise challenges you to apply the complete logical effort framework to minimize the delay of a multi-stage logic path. By calculating the path effort and applying the principle of equal stage efforts, you will determine the optimal sizing strategy and predict the minimum achievable delay for a realistic circuit configuration. ",
            "id": "4279965",
            "problem": "A combinational logic path in an application-specific integrated circuit, to be synthesized and sized using Electronic Design Automation (EDA), consists of 4 stages in sequence. For stage $i \\in \\{1,2,3,4\\}$, the logical effort is $g_i$, the branching effort is $b_i$, and the parasitic delay is $p_i$. The stages have the following characteristics:\n\n- Stage $1$: $g_1 = 1$, $b_1 = 1.5$, $p_1 = 1$.\n- Stage $2$: $g_2 = \\frac{4}{3}$, $b_2 = 1$, $p_2 = 2$.\n- Stage $3$: $g_3 = \\frac{5}{3}$, $b_3 = 2$, $p_3 = 2$.\n- Stage $4$: $g_4 = 1$, $b_4 = 1$, $p_4 = 1$.\n\nThe input capacitance seen at the path input is $C_{\\text{in}}$, and the load at the path output is $C_{\\text{out}} = 21.6\\,C_{\\text{in}}$. Assume standard definitions of logical effort, electrical effort, branching effort, path effort, stage effort, and normalized delay as used in the method of logical effort, and neglect interconnect parasitics and velocity saturation effects.\n\nUsing only the core definitions of logical effort and the equal-stage-effort optimality condition derived from first principles, determine:\n\n- The optimal common stage effort $f$ under which the total path delay is minimized.\n- The allocation of electrical effort $h_i$ to each stage.\n- The resulting minimum total normalized delay of the path.\n\nExpress your final numerical answer for the total optimal path delay, in units of the normalized delay used in logical effort, rounded to four significant figures. Do not include units in your final answer. All intermediate reasoning should be consistent with the foundational definitions and the minimization principle; do not assume any empirical “rule-of-thumb” values without derivation from those definitions.",
            "solution": "The problem asks for the optimal design of a $4$-stage logic path using the method of logical effort. The total normalized delay $D$ of a path with $N$ stages is the sum of the delays of each stage:\n$$D = \\sum_{i=1}^{N} d_i$$\nThe delay $d_i$ of an individual stage $i$ is given by the sum of its effort delay $f_i$ and its parasitic delay $p_i$:\n$$d_i = f_i + p_i$$\nThe effort delay, or stage effort, $f_i$ is the product of the stage's logical effort $g_i$ and its electrical effort $h_i$:\n$$f_i = g_i h_i$$\nThe logical effort $g_i$ is an intrinsic property of the logic gate's topology. The parasitic delay $p_i$ is also an intrinsic property, representing the delay of the gate driving zero load. The electrical effort $h_i$ is defined as the ratio of the total capacitance driven by the stage, $C_{\\text{out},i}$, to its input capacitance, $C_{\\text{in},i}$:\n$$h_i = \\frac{C_{\\text{out},i}}{C_{\\text{in},i}}$$\nThe problem specifies a branching effort $b_i$ for each stage, which accounts for fan-out to loads not on the primary path. It is defined as the ratio of the total capacitance at the output of stage $i$ to the on-path capacitance, which is the input capacitance of the next stage, $C_{\\text{in},i+1}$:\n$$b_i = \\frac{C_{\\text{out},i}}{C_{\\text{in},i+1}}$$\nThus, $C_{\\text{out},i} = b_i C_{\\text{in},i+1}$. The electrical effort for stage $i$ can be expressed as:\n$$h_i = \\frac{b_i C_{\\text{in},i+1}}{C_{\\text{in},i}}$$\nThe total path delay is therefore:\n$$D = \\sum_{i=1}^{N} (g_i h_i + p_i) = \\sum_{i=1}^{N} g_i h_i + \\sum_{i=1}^{N} p_i$$\nTo minimize the delay, we must choose the gate sizes, which determines the input capacitances $C_{\\text{in},i}$ and thus the electrical efforts $h_i$. The values of $h_i$ are constrained by the overall path specifications. The product of the electrical efforts across the path is:\n$$ \\prod_{i=1}^{N} h_i = \\prod_{i=1}^{N} \\left(\\frac{b_i C_{\\text{in},i+1}}{C_{\\text{in},i}}\\right) = \\left(\\prod_{i=1}^{N} b_i\\right) \\left(\\frac{C_{\\text{in},2}}{C_{\\text{in},1}}\\frac{C_{\\text{in},3}}{C_{\\text{in},2}} \\cdots \\frac{C_{\\text{in},N+1}}{C_{\\text{in},N}}\\right) $$\nLet $C_{\\text{in},1} = C_{\\text{in}}$ and $C_{\\text{in},N+1} = C_{\\text{out}}$. The product simplifies to:\n$$ \\prod_{i=1}^{N} h_i = \\left(\\prod_{i=1}^{N} b_i\\right) \\left(\\frac{C_{\\text{out}}}{C_{\\text{in}}}\\right) $$\nWe define the Path Branching Effort $B = \\prod_{i=1}^{N} b_i$ and the Path Electrical Effort $H = C_{\\text{out}} / C_{\\text{in}}$. The constraint becomes:\n$$ \\prod_{i=1}^{N} h_i = B H $$\nThe problem is to minimize $D$ subject to this constraint. Let $P = \\sum_{i=1}^{N} p_i$ be the total parasitic delay, which is constant. We must minimize $\\sum_{i=1}^{N} g_i h_i$. Using the method of Lagrange multipliers, the condition for the minimum is that the stage efforts $f_i = g_i h_i$ must all be equal to a common value, $f$:\n$$ f_1 = f_2 = \\dots = f_N = f $$\nThe product of the stage efforts is the Path Effort, $F$:\n$$ F = \\prod_{i=1}^{N} f_i = \\prod_{i=1}^{N} (g_i h_i) = \\left(\\prod_{i=1}^{N} g_i\\right) \\left(\\prod_{i=1}^{N} h_i\\right) $$\nDefining the Path Logical Effort $G = \\prod_{i=1}^{N} g_i$, we get:\n$$ F = G (B H) = GBH $$\nSince all stage efforts are equal to $f$, their product is $F = f^N$. This yields the optimal common stage effort:\n$$ f = F^{1/N} = (GBH)^{1/N} $$\nThe minimum total path delay is then:\n$$ D_{\\text{min}} = \\sum_{i=1}^{N} (f + p_i) = N f + P $$\n\nNow, we apply this framework to the given problem.\nThe number of stages is $N=4$. The givens are:\n- Stage $1$: $g_1 = 1$, $b_1 = 1.5$, $p_1 = 1$.\n- Stage $2$: $g_2 = \\frac{4}{3}$, $b_2 = 1$, $p_2 = 2$.\n- Stage $3$: $g_3 = \\frac{5}{3}$, $b_3 = 2$, $p_3 = 2$.\n- Stage $4$: $g_4 = 1$, $b_4 = 1$, $p_4 = 1$.\n\nFirst, we calculate the path-level parameters $G$, $B$, $H$, and $P$.\nPath Logical Effort:\n$$ G = g_1 g_2 g_3 g_4 = 1 \\cdot \\frac{4}{3} \\cdot \\frac{5}{3} \\cdot 1 = \\frac{20}{9} $$\nPath Branching Effort:\n$$ B = b_1 b_2 b_3 b_4 = 1.5 \\cdot 1 \\cdot 2 \\cdot 1 = 3 $$\nPath Electrical Effort:\n$$ H = \\frac{C_{\\text{out}}}{C_{\\text{in}}} = 21.6 $$\nTotal Parasitic Delay:\n$$ P = p_1 + p_2 + p_3 + p_4 = 1 + 2 + 2 + 1 = 6 $$\nNext, we calculate the Path Effort $F$:\n$$ F = GBH = \\frac{20}{9} \\cdot 3 \\cdot 21.6 = \\frac{20}{3} \\cdot 21.6 = 20 \\cdot 7.2 = 144 $$\n\nWith the Path Effort determined, we find the optimal common stage effort $f$:\n$$ f = F^{1/N} = (144)^{1/4} = (12^2)^{1/4} = 12^{1/2} = \\sqrt{12} = \\sqrt{4 \\cdot 3} = 2\\sqrt{3} $$\nThe optimal common stage effort is $f=2\\sqrt{3}$.\n\nNext, we find the allocation of electrical effort $h_i$ to each stage. Under the optimality condition, $f_i = g_i h_i = f$. Therefore, $h_i = f/g_i$.\n- Stage $1$: $h_1 = \\frac{f}{g_1} = \\frac{2\\sqrt{3}}{1} = 2\\sqrt{3}$\n- Stage $2$: $h_2 = \\frac{f}{g_2} = \\frac{2\\sqrt{3}}{4/3} = \\frac{6\\sqrt{3}}{4} = \\frac{3\\sqrt{3}}{2}$\n- Stage $3$: $h_3 = \\frac{f}{g_3} = \\frac{2\\sqrt{3}}{5/3} = \\frac{6\\sqrt{3}}{5}$\n- Stage $4$: $h_4 = \\frac{f}{g_4} = \\frac{2\\sqrt{3}}{1} = 2\\sqrt{3}$\n\nFinally, we calculate the minimum total normalized delay of the path, $D_{\\text{min}}$:\n$$ D_{\\text{min}} = Nf + P = 4(2\\sqrt{3}) + 6 = 8\\sqrt{3} + 6 $$\nTo provide a numerical answer, we use the value of $\\sqrt{3} \\approx 1.7320508...$:\n$$ D_{\\text{min}} \\approx 8(1.7320508) + 6 = 13.8564064 + 6 = 19.8564064 $$\nRounding to four significant figures, the result is $19.86$.",
            "answer": "$$\\boxed{19.86}$$"
        },
        {
            "introduction": "Achieving an optimal design is a significant accomplishment, but real-world design is often iterative and subject to local modifications. This practice explores the non-intuitive consequences of such a change, analyzing what happens when a single gate in a perfectly optimized path is unilaterally upsized. This scenario forces a deeper look at the global nature of path optimization and illustrates why deviating from the equal stage effort condition, even with seemingly good intentions, can degrade overall performance. ",
            "id": "4279983",
            "problem": "A path in a complementary metal–oxide–semiconductor (CMOS) combinational logic network is composed of $3$ gates in series with no branching: gate $1$ is an inverter, gate $2$ is a two-input NAND, and gate $3$ is an inverter that drives a load capacitance $C_{L}$. Use the standard logical effort delay model in which the stage delay is $d_{i} = g_{i} h_{i} + p_{i}$ measured in units of a reference time constant, where $g_{i}$ is the logical effort of stage $i$, $h_{i}$ is the electrical effort of stage $i$ defined as the ratio of its output load capacitance to its own input capacitance, and $p_{i}$ is the parasitic delay of stage $i$. Assume $g_{\\text{inv}} = 1$, $p_{\\text{inv}} = 1$, $g_{\\text{NAND2}} = \\tfrac{4}{3}$, and $p_{\\text{NAND2}} = 2$. There is no branching, so the branching effort is $1$ for all stages.\n\nThe path was initially sized for minimum delay under fixed end-load $C_{L}$ and fixed path input capacitance $C_{1}$ at the input of gate $1$, and the three stages were designed to have equal stage effort. For concreteness, take $C_{1} = C_{\\text{unit}}$ and $C_{L} = 6 C_{\\text{unit}}$, where $C_{\\text{unit}}$ is the input capacitance of a reference inverter.\n\nAn engineer then unilaterally upsizes gate $2$ (the NAND) by a factor of $2$, scaling its transistor widths and thus its input capacitance by a factor of $2$, while leaving gate $1$ and gate $3$ unchanged. The end-load $C_{L}$ and the path input capacitance $C_{1}$ remain fixed.\n\nBased on first principles of the logical effort method and the definitions above, which of the following statements are correct? Select all that apply.\n\nA. The total path delay strictly decreases after upsizing gate $2$, because the reduction in the electrical effort of gate $2$ always outweighs any upstream effects.\n\nB. The total path delay can increase after upsizing gate $2$ in this scenario, because the increased input capacitance of gate $2$ raises the electrical effort of gate $1$; without rebalancing all stages to restore equal stage effort, the path moves away from the minimum-delay point.\n\nC. The path effort $F$ decreases when gate $2$ is upsized, because $F$ depends on the intermediate gate capacitances that appear in the product of stage efforts.\n\nD. After upsizing only gate $2$, the equal stage effort condition is violated; rebalancing the entire chain to reestablish equal stage effort would recover the minimum delay for the given $C_{1}$ and $C_{L}$.\n\nE. In the logical effort model, upsizing a gate increases its parasitic delay $p$ in proportion to its size, so the delay of gate $2$ increases for two reasons: higher $p$ and higher input loading from gate $1$.",
            "solution": "We start from the logical effort delay model, which is a widely accepted foundation in digital integrated circuits timing analysis. For a stage $i$, the delay is $d_{i} = g_{i} h_{i} + p_{i}$, where $h_{i} = C_{\\text{out},i} / C_{\\text{in},i}$. For a path with no branching, the total delay is $D = \\sum_{i} (g_{i} h_{i} + p_{i})$. The stage effort is $f_{i} = g_{i} h_{i}$. For a chain of $N$ stages with fixed input capacitance $C_{1}$ and fixed end-load $C_{L}$, let $C_{i}$ denote the input capacitance of stage $i$, the electrical efforts are $h_{1} = C_{2}/C_{1}$, $h_{2} = C_{3}/C_{2}$, and $h_{3} = C_{L}/C_{3}$. The path effort $F$ is the product of stage efforts, $F = \\prod_{i=1}^{N} f_{i} = \\left(\\prod_{i=1}^{N} g_{i}\\right) \\left(\\prod_{i=1}^{N} h_{i}\\right) = G \\cdot H$, where $G = \\prod_{i=1}^{N} g_{i}$ is the path logical effort and $H = C_{L}/C_{1}$ is the path electrical effort. Crucially, $F$ depends only on $G$ and $H$, and is independent of intermediate gate sizing. The minimum-delay sizing under fixed $C_{1}$ and $C_{L}$ is achieved when the stage efforts are equal, $f_{1} = f_{2} = \\cdots = f_{N}$, which follows from convexity of the delay and can be derived via Lagrange multipliers by minimizing $\\sum_{i=1}^{N} f_{i}$ subject to $\\prod_{i=1}^{N} f_{i} = F$.\n\nGiven $N = 3$, $g_{1} = 1$ (inverter), $g_{2} = \\tfrac{4}{3}$ (two-input NAND), $g_{3} = 1$ (inverter), and $p_{1} = 1$, $p_{2} = 2$, $p_{3} = 1$, with no branching, we have $G = g_{1} g_{2} g_{3} = \\tfrac{4}{3}$ and $H = C_{L}/C_{1} = 6$. Therefore, the path effort is $F = G H = \\tfrac{4}{3} \\cdot 6 = 8$. With equal stage effort, $f_{1} = f_{2} = f_{3} = f$, and since $\\prod_{i=1}^{3} f_{i} = f^{3} = F$, we obtain $f = F^{1/3} = 2$.\n\nFrom $f_{i} = g_{i} h_{i}$ and $h_{i} = C_{\\text{out},i}/C_{\\text{in},i}$, the equal-effort condition yields:\n- For stage $1$: $g_{1} \\cdot \\frac{C_{2}}{C_{1}} = f \\Rightarrow \\frac{C_{2}}{C_{1}} = \\frac{f}{g_{1}} = \\frac{2}{1} = 2$, so $C_{2} = 2 C_{1}$.\n- For stage $2$: $g_{2} \\cdot \\frac{C_{3}}{C_{2}} = f \\Rightarrow \\frac{C_{3}}{C_{2}} = \\frac{f}{g_{2}} = \\frac{2}{4/3} = \\frac{3}{2}$, so $C_{3} = \\frac{3}{2} C_{2} = 3 C_{1}$.\n- For stage $3$: $g_{3} \\cdot \\frac{C_{L}}{C_{3}} = f \\Rightarrow \\frac{C_{L}}{C_{3}} = \\frac{f}{g_{3}} = \\frac{2}{1} = 2$, so $C_{L} = 2 C_{3} = 6 C_{1}$, consistent with the given $C_{L}$.\n\nThe initial per-stage delays are:\n- Stage $1$: $d_{1} = g_{1} h_{1} + p_{1} = 2 + 1 = 3$.\n- Stage $2$: $d_{2} = g_{2} h_{2} + p_{2} = 2 + 2 = 4$.\n- Stage $3$: $d_{3} = g_{3} h_{3} + p_{3} = 2 + 1 = 3$.\n\nTotal initial path delay is $D_{\\text{init}} = d_{1} + d_{2} + d_{3} = 10$.\n\nNow the engineer upsizes gate $2$ by a factor of $2$, while keeping gates $1$ and $3$ unchanged. This action doubles $C_{2}$ but leaves $C_{1}$, $C_{3}$, and $C_{L}$ unchanged. Therefore, after the unilateral upsizing:\n- $C_{2}' = 2 \\cdot C_{2} = 4 C_{1}$.\n- $C_{3}' = C_{3} = 3 C_{1}$.\n- $C_{1}' = C_{1}$ and $C_{L}' = C_{L}$.\n\nThe new electrical efforts are:\n- $h_{1}' = \\frac{C_{2}'}{C_{1}'} = \\frac{4 C_{1}}{C_{1}} = 4$.\n- $h_{2}' = \\frac{C_{3}'}{C_{2}'} = \\frac{3 C_{1}}{4 C_{1}} = \\frac{3}{4}$.\n- $h_{3}' = \\frac{C_{L}'}{C_{3}'} = \\frac{6 C_{1}}{3 C_{1}} = 2$.\n\nThe stage efforts become:\n- $f_{1}' = g_{1} h_{1}' = 1 \\cdot 4 = 4$.\n- $f_{2}' = g_{2} h_{2}' = \\frac{4}{3} \\cdot \\frac{3}{4} = 1$.\n- $f_{3}' = g_{3} h_{3}' = 1 \\cdot 2 = 2$.\n\nThese are not equal, demonstrating deviation from the minimum-delay condition. The total path effort remains $F' = f_{1}' f_{2}' f_{3}' = 4 \\cdot 1 \\cdot 2 = 8$, which equals the original $F$, confirming its invariance to intermediate sizing because $F = G H$ depends only on $G$ and $H$ and not on $C_{2}$ or $C_{3}$ individually.\n\nThe new per-stage delays are:\n- $d_{1}' = g_{1} h_{1}' + p_{1} = 4 + 1 = 5$.\n- $d_{2}' = g_{2} h_{2}' + p_{2} = 1 + 2 = 3$.\n- $d_{3}' = g_{3} h_{3}' + p_{3} = 2 + 1 = 3$.\n\nThus, the new total path delay is $D' = d_{1}' + d_{2}' + d_{3}' = 11$, which is larger than $D_{\\text{init}} = 10$. The increase arises because upsizing an early-stage gate raises the input load on its predecessor, increasing that predecessor’s stage effort and delay more than the reduction achieved in the upsized stage, unless the entire chain is resized to reestablish equal stage effort.\n\nFinally, recall a key modeling point: in the normalized logical effort model, the parasitic delay $p_{i}$ is a gate topology parameter and does not scale with gate size; upsizing a gate does not change $p_{i}$.\n\nOption-by-option analysis:\n- A. Claims a strict decrease in delay after upsizing gate $2$. This is contradicted by the explicit calculation: $D'$ increases from $10$ to $11$. Moreover, in general, unilateral upsizing of an early-stage gate can increase upstream loading and overall delay. Verdict — Incorrect.\n- B. States that the total path delay can increase because of increased upstream loading and the loss of equal stage effort, unless all stages are rebalanced. This matches both the numerical result and the theory that minimum delay requires equal stage effort. Verdict — Correct.\n- C. Claims that the path effort $F$ decreases when gate $2$ is upsized. We computed $F' = F = 8$, and in general $F = G H$ depends only on $G$ and $H$, not on intermediate sizes. Verdict — Incorrect.\n- D. States that equal stage effort is violated by upsizing only gate $2$, and that rebalancing to restore equal stage effort would recover minimum delay for the fixed endpoints. We found $f_{1}' \\neq f_{2}' \\neq f_{3}'$, so the condition is violated; restoring equal stage effort reattains the minimum for fixed $C_{1}$ and $C_{L}$. Verdict — Correct.\n- E. Asserts that parasitic delay $p$ increases with size in the logical effort model. In this model, $p$ is a topology-dependent constant normalized to the technology reference and does not scale with gate size. Thus, the stated reason is false. Verdict — Incorrect.",
            "answer": "$$\\boxed{BD}$$"
        }
    ]
}
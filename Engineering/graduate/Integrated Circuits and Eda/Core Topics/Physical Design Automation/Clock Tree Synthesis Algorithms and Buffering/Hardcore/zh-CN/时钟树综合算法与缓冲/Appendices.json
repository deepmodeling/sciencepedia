{
    "hands_on_practices": [
        {
            "introduction": "时钟树综合的核心挑战之一是构建一个几何上平衡的结构，以确保时钟信号同时到达所有同步单元。延迟合并嵌入（Deferred-Merge Embedding, DME）算法是实现零时滞布线的基石方法，它通过从时钟宿点（sinks）向上递归合并子树来精心构建时钟树。此练习将引导您在一个理想化的场景下，通过应用DME算法掌握其核心几何逻辑 。",
            "id": "4260650",
            "problem": "考虑一个集成电路（IC）和电子设计自动化（EDA）背景下的三汇点时钟分配实例，其嵌入被限制为直角（曼哈顿）布线。您将应用延迟合并嵌入（DME）算法，在以下建模假设和数据下构建一个零时偏树。\n\n假设：\n- 时钟线被建模为纯阻性互连，具有均匀的单位长度电阻 $r_{\\mathrm{w}}$，且导线电容相对于汇点电容可忽略不计。\n- 不插入缓冲器；目标是仅通过几何嵌入实现零时偏。\n- 在导线电容可忽略不计的 Elmore 延迟模型下，从一个节点到汇点的延迟与互连电阻、汇点电容以及直角路径长度的乘积成正比。对于相等的汇点电容，零时偏等效于从根节点到每个汇点的直角路径长度相等。\n- DME 通过自底向上合并子子树的方式进行。对于每次合并，可行的父节点位置（合并区域或合并段）是那些点，在这些点上，父节点到子节点的距离经子节点到其汇点的内部路径长度调整后，能够使得两个子树的所有汇点具有相等的到达时间。然后，自顶向下的阶段在合并区域内选择一个嵌入点，以最小化总导线长度。\n\n数据：\n- 三个具有相同电容负载 $C_{1} = C_{2} = C_{3} = 30\\,\\mathrm{fF}$ 的汇点，其坐标分别为 $S_{1} = (0\\,\\mu\\mathrm{m}, 0\\,\\mu\\mathrm{m})$，$S_{2} = (10\\,\\mu\\mathrm{m}, 0\\,\\mu\\mathrm{m})$ 和 $S_{3} = (5\\,\\mu\\mathrm{m}, 8\\,\\mu\\mathrm{m})$。\n\n任务：\n1. 根据第一性原理和在所述假设下的 DME 方法，推导出用于自底向上合并的合并区域（或段）：首先合并 $S_{1}$ 和 $S_{2}$，然后将得到的子树与 $S_{3}$ 合并。\n2. 为内部合并点（斯坦纳点）生成显式的嵌入零时偏树坐标，并列出从每个内部点到其子节点的直角段长度。\n3. 计算最终嵌入的零时偏树的总直角导线长度。\n\n以 $\\mu\\mathrm{m}$ 为单位表示最终的总导线长度。最终答案必须是一个实数。无需对精确值进行四舍五入。",
            "solution": "用户希望在直角（曼哈顿）距离度量下，使用延迟合并嵌入（DME）算法，为三个汇点找到零时偏时钟树的总导线长度。\n\n### 问题验证\n\n**步骤1：提取已知条件**\n- **汇点：** 三个汇点，坐标为 $S_{1} = (0, 0)$、$S_{2} = (10, 0)$ 和 $S_{3} = (5, 8)$。所有坐标单位为 $\\mu\\mathrm{m}$。\n- **电容负载：** 汇点具有相同的负载，$C_{1} = C_{2} = C_{3} = 30\\,\\mathrm{fF}$。\n- **导线模型：** 纯阻性互连，具有均匀的单位长度电阻 $r_{\\mathrm{w}}$。导线电容可忽略不计。\n- **延迟模型：** Elmore 延迟。在导线电容可忽略不计且汇点负载相同的情况下，零时偏（所有汇点的到达时间相等）的条件简化为要求从时钟树根节点到每个汇点的直角路径长度相等。\n- **算法：** 延迟合并嵌入（DME）。\n- **合并顺序：** 首先合并 $S_{1}$ 和 $S_{2}$。然后将得到的子树与 $S_{3}$ 合并。\n\n**步骤2：使用已知条件进行验证**\n- **科学依据：** 该问题基于 Elmore 延迟模型和 DME 算法，这些是超大规模集成电路（VLSI）的电子设计自动化（EDA）领域中标准且成熟的概念。对于关注时钟树综合几何方面的入门问题，简化延迟模型是一种常见且有效的方法。\n- **良构性：** 问题提供了一套完整的数据（汇点位置）、一个明确定义的目标（零时偏树）和一个特定的算法（具有固定合并顺序的 DME）。这种结构确保了存在一个唯一且有意义的解。\n- **客观性：** 问题使用精确的技术语言陈述，没有任何主观或模糊的术语。\n\n**步骤3：结论与操作**\n该问题具有科学依据、良构性和客观性。它被判定为**有效**。我们现在将进行完整求解。\n\n### 解题过程\n\n解题过程遵循 DME 算法的两阶段结构：一个自底向上的过程来确定可行的合并区域，然后是一个自顶向下的过程来嵌入内部节点（斯坦纳点）以最小化总导线长度。距离度量是直角（曼哈顿）距离，对于点 $p_1=(x_1, y_1)$ 和 $p_2=(x_2, y_2)$，其距离为 $d_1(p_1, p_2) = |x_1 - x_2| + |y_1 - y_2|$。\n\n#### 1. 自底向上过程：构建合并区域\n\n**合并1：汇点 $S_{1}$ 和 $S_{2}$**\n\n设 $M_1 = (x, y)$ 为第一个合并点，它将是汇点 $S_1=(0,0)$ 和 $S_2=(10,0)$ 的父节点。为了在这一层级实现零时偏，从 $M_1$ 到 $S_1$ 和 $S_2$ 的路径长度必须相等。由于汇点是叶节点，其内部路径延迟为零。\n\n条件是：\n$$d_1(M_1, S_1) = d_1(M_1, S_2)$$\n$$|x - 0| + |y - 0| = |x - 10| + |y - 0|$$\n$$|x| = |x - 10|$$\n该方程对于任何与 $0$ 和 $10$ 等距的点 $x$ 都成立。中点是 $\\frac{0+10}{2} = 5$。因此，解是 $x=5$。合并区域是一条由 $x=5$ 定义的垂直线。我们将这条线记为 $L_{12}$。\n\n对于这条线上的任何点 $M_1=(5, y_{M_1})$，到其子汇点的路径长度是相同的。我们将此路径长度（对应于以 $M_1$ 为根的子树的延迟）定义为 $\\lambda_1(y_{M_1})$：\n$$\\lambda_1(y_{M_1}) = d_1((5, y_{M_1}), S_1) = |5 - 0| + |y_{M_1} - 0| = 5 + |y_{M_1}|$$\n\n**合并2：子树 $T_{12}$ 和汇点 $S_{3}$**\n\n接下来，我们合并子树 $T_{12}$（根节点位于直线 $L_{12}$ 上）与汇点 $S_3=(5,8)$。设新的合并点（最终的树根）为 $M_2=(x,y)$。\n\nDME 算法通过使到子子树的“有效”路径长度相等来找到 $M_2$ 的合并区域。\n从 $M_2$ 到 $T_{12}$ 中各汇点的有效路径长度，是通过在 $M_1$ 的合并轨迹 $L_{12}$ 上的所有可能位置中取最小值得到的：\n$$L(M_2, T_{12}) = \\min_{M_1 \\in L_{12}} (d_1(M_2, M_1) + \\lambda_1(y_{M_1}))$$\n$$L(M_2, T_{12}) = \\min_{y_{M_1}} (d_1((x,y), (5,y_{M_1})) + 5 + |y_{M_1}|)$$\n$$L(M_2, T_{12}) = \\min_{y_{M_1}} (|x-5| + |y-y_{M_1}| + 5 + |y_{M_1}|)$$\n项 $|x-5|+5$ 相对于 $y_{M_1}$ 的最小化是常数。\n$$L(M_2, T_{12}) = |x-5| + 5 + \\min_{y_{M_1}} (|y-y_{M_1}| + |y_{M_1}|)$$\n表达式 $|y-y_{M_1}| + |y_{M_1}|$ 表示数轴上一点 $y_{M_1}$ 到 $0$ 和 $y$ 的距离之和。根据三角不等式，当 $y_{M_1}$ 位于 $0$ 和 $y$ 之间时，该和最小。最小值为 $|y|$。因此：\n$$L(M_2, T_{12}) = |x-5| + 5 + |y|$$\n从 $M_2$ 到汇点 $S_3$ 的路径长度就是直角距离：\n$$L(M_2, S_3) = d_1(M_2, S_3) = |x-5| + |y-8|$$\n$M_2$ 的合并区域是这两条路径长度相等的点的集合：\n$$L(M_2, T_{12}) = L(M_2, S_3)$$\n$$|x-5| + 5 + |y| = |x-5| + |y-8|$$\n$$5 + |y| = |y-8|$$\n我们求解这个关于 $y$ 的方程：\n- 如果 $y \\ge 8$：$5+y = y-8 \\implies 5 = -8$，不成立。\n- 如果 $0 \\le y  8$：$5+y = 8-y \\implies 2y = 3 \\implies y = 1.5$。\n- 如果 $y  0$：$5-y = 8-y \\implies 5 = 8$，不成立。\n\n唯一的解是 $y=1.5$。$M_2$ 的合并区域是水平线 $y=1.5$。\n\n这就完成了第一个任务。$\\{S_1, S_2\\}$ 的合并段是直线 $x=5$。$\\{T_{12}, S_3\\}$ 的合并段是直线 $y=1.5$。\n\n#### 2. 自顶向下过程：嵌入内部节点\n\n我们现在为 $M_2$ 和 $M_1$ 选择具体坐标以最小化总导线长度。\n\n**嵌入 $M_2$：**\n根节点 $M_2$ 必须位于其合并轨迹，即直线 $y=1.5$ 上。所以 $M_2=(x_{M_2}, 1.5)$。被连接的子节点是 $S_3=(5,8)$ 和子树 $T_{12}$（其根节点 $M_1$ 必须位于直线 $x=5$ 上）。为了最小化连接这些子节点的水平导线长度，我们必须选择 $M_2$ 的 x 坐标为 $5$。\n因此，根节点的最佳嵌入位置是 $M_2 = (5, 1.5)$。\n\n**嵌入 $M_1$：**\n节点 $M_1$ 必须位于其合并轨迹，即直线 $x=5$ 上，所以 $M_1=(5, y_{M_1})$。$y_{M_1}$ 的选择必须确保在 $M_2$ 处满足零时偏条件。该条件在推导有效路径长度 $L(M_2, T_{12})$ 时已经确定。$|y-y_{M_1}| + |y_{M_1}|$ 的最小值是 $|y|$，这是在 $y_{M_1}$ 位于 $0$ 和 $y$ 之间时取得的。由于 $M_2=(5, 1.5)$，我们有 $y=1.5$。因此，$y_{M_1}$ 的一个有效选择必须满足 $0 \\le y_{M_1} \\le 1.5$。\n\n为了找到最优的 $y_{M_1}$，我们最小化树的总导线长度。总导线长度 $W$ 是物理导线段长度的总和。该树由一个垂直主干和一个水平分支组成。\n- 垂直段通过 $M_2=(5,1.5)$ 连接 $S_3=(5,8)$ 和 $M_1=(5,y_{M_1})$。其总长度是 y 坐标范围，即 $|8 - y_{M_1}| = 8 - y_{M_1}$，因为 $y_{M_1} \\le 1.5  8$。\n- 水平段通过 $M_1=(5,0)$ 连接 $S_1=(0,0)$ 和 $S_2=(10,0)$（如果 $y_{M_1}=0$）。如果 $y_{M_1}>0$，则还有从 $(5,y_{M_1})$ 到 $(5,0)$ 的垂直短线。\n让我们将总导线长度表示为四条逻辑边的长度之和：\n$$W = d_1(M_2, M_1) + d_1(M_2, S_3) + d_1(M_1, S_1) + d_1(M_1, S_2)$$\n当 $M_2=(5, 1.5)$ 且 $M_1=(5, y_{M_1})$，其中 $y_{M_1} \\in [0, 1.5]$:\n- $d_1(M_2, M_1) = |5-5|+|1.5-y_{M_1}| = 1.5-y_{M_1}$\n- $d_1(M_2, S_3) = |5-5|+|1.5-8| = 6.5$\n- $d_1(M_1, S_1) = |5-0|+|y_{M_1}-0| = 5+y_{M_1}$\n- $d_1(M_1, S_2) = |5-10|+|y_{M_1}-0| = 5+y_{M_1}$\n$$W(y_{M_1}) = (1.5 - y_{M_1}) + 6.5 + (5 + y_{M_1}) + (5 + y_{M_1}) = 18 + y_{M_1}$$\n要最小化 $W(y_{M_1})$，我们必须在其有效范围 $[0, 1.5]$ 内为 $y_{M_1}$ 选择可能最小的值。最小值在 $y_{M_1}=0$ 时取得。\n\n因此，内部节点的最佳嵌入位置是：\n- $M_1 = (5, 0)$\n- $M_2 = (5, 1.5)$\n\n从每个内部点到其子节点的直角段长度为：\n- 从 $M_1=(5,0)$：\n    - 到 $S_1=(0,0)$：$d_1(M_1,S_1) = |5-0|+|0-0| = 5\\,\\mu\\mathrm{m}$。\n    - 到 $S_2=(10,0)$：$d_1(M_1,S_2) = |5-10|+|0-0| = 5\\,\\mu\\mathrm{m}$。\n- 从 $M_2=(5,1.5)$：\n    - 到 $M_1=(5,0)$：$d_1(M_2,M_1) = |5-5|+|1.5-0| = 1.5\\,\\mu\\mathrm{m}$。\n    - 到 $S_3=(5,8)$：$d_1(M_2,S_3) = |5-5|+|1.5-8| = 6.5\\,\\mu\\mathrm{m}$。\n\n作为检查，从根节点 $M_2$ 到所有汇点的路径长度是相等的：\n- $L(M_2,S_1) = d_1(M_2, M_1) + d_1(M_1, S_1) = 1.5 + 5 = 6.5\\,\\mu\\mathrm{m}$。\n- $L(M_2,S_2) = d_1(M_2, M_1) + d_1(M_1, S_2) = 1.5 + 5 = 6.5\\,\\mu\\mathrm{m}$。\n- $L(M_2,S_3) = d_1(M_2, S_3) = 6.5\\,\\mu\\mathrm{m}$。\n该树确实是一个零时偏树。\n\n#### 3. 总导线长度计算\n\n总导线长度是构成树的物理线段的长度之和。\n嵌入结果产生了以下连接：\n- 一条从 $S_1=(0,0)$ 到 $S_2=(10,0)$ 的水平线段，经过 $M_1=(5,0)$。长度为 $d_1(S_1, S_2) = 10\\,\\mu\\mathrm{m}$。\n- 一条从 $M_1=(5,0)$ 到 $S_3=(5,8)$ 的垂直线段，经过 $M_2=(5,1.5)$。长度为 $|8-0| = 8\\,\\mu\\mathrm{m}$。\n\n总导线长度是这两条线段的长度之和：\n$$W_{\\text{total}} = 10 + 8 = 18\\,\\mu\\mathrm{m}$$\n这与我们的导线长度函数 $W(y_{M_1}) = 18 + y_{M_1}$ 在 $y_{M_1}=0$ 处的最小值相匹配。",
            "answer": "$$\\boxed{18}$$"
        },
        {
            "introduction": "虽然几何平衡至关重要，但现实世界中的互连线具有电阻和电容，会导致信号在长距离传输后发生显著衰减和延迟。插入缓冲器（buffer）是解决这种二次方延迟增长的主要技术。本练习将指导您推导在长导线上插入缓冲器的最优数量，以实现延迟最小化，这是高性能电路设计中的一项关键技能 。",
            "id": "4260672",
            "problem": "在电子设计自动化 (EDA) 流程中，一个全局时钟干线必须将时钟信号分配到一条长度为 $L$ 的均匀片上互连线上，该互连线的单位长度电阻为 $R'$，单位长度电容为 $C'$。该互连线在近端由一个理想电压源驱动，并终止于一个输入电容为 $C_{L}$ 的单一接收端。为减轻沿线的阻容延迟，您可以插入 $N$ 个相同的 repeater（缓冲器），并使其沿线均匀分布。每个缓冲器被建模为一个线性驱动器，其输出电阻为 $R_{b}$，输入电容为 $C_{b}$，固有延迟为 $t_{b}$。假设连续缓冲器之间（以及源和第一个缓冲器之间、最后一个缓冲器和接收端之间）的导线段长度均相等。使用 Elmore 延迟模型来建模每个导线段的延迟，该模型描述了一条由电阻性源驱动、为远端集总负载供电的分布式均匀线。具体来说，对于一段长度为 $\\ell$、由源电阻 $R_{s}$ 驱动、负载电容为 $C_{\\text{load}}$ 的线段，从线段输入到其远端的 Elmore 延迟为 $R_{s}(C' \\ell + C_{\\text{load}}) + \\frac{1}{2} R' C' \\ell^{2} + R' \\ell C_{\\text{load}}$。\n\n在这些假设下，请从第一性原理推导总的源到接收端延迟作为 $N$ 的函数，然后确定使该延迟最小化的最优实数值 $N$。在优化过程中将 $N$ 视为连续变量，并假设最优性条件产生一个正值。请以闭合形式给出最优级数 $N^{\\star}$ 的最终表达式，该表达式是 $L$、$R'$、$C'$、$R_{b}$、$C_{b}$、$t_{b}$ 和 $C_{L}$ 的函数。您的最终答案必须是单个解析表达式。不要四舍五入；不需要进行数值计算。将级数表示为实值公式（忽略实际缓冲器数量必须为整数这一事实）。",
            "solution": "首先验证问题，以确保其具有科学依据、是良定的且客观的。\n\n**步骤 1：提取已知条件**\n- 总互连线长度：$L$\n- 互连线的单位长度电阻：$R'$\n- 互连线的单位长度电容：$C'$\n- 插入的 repeater（缓冲器）数量：$N$\n- Repeater 输出电阻：$R_b$\n- Repeater 输入电容：$C_b$\n- Repeater 固有延迟：$t_b$\n- 接收端的负载电容：$C_L$\n- 源：理想电压源，意味着源电阻 $R_{s, \\text{source}} = 0$。\n- 缓冲器间距：$N$ 个缓冲器均匀分布，形成 $N+1$ 个等长的导线段。\n- 长度为 $\\ell$ 的线段的 Elmore 延迟模型：\n$T_{\\text{Elmore}} = R_{s}(C' \\ell + C_{\\text{load}}) + \\frac{1}{2} R' C' \\ell^{2} + R' \\ell C_{\\text{load}}$，其中 $R_s$ 是驱动器电阻，$C_{\\text{load}}$ 是线段远端的负载电容。\n\n**步骤 2：使用提取的已知条件进行验证**\n- **科学性**：该问题在 VLSI 电路设计领域有坚实的理论基础。Elmore 延迟是 RC 互连延迟的标准且广泛使用的一阶近似。使用输入/输出寄生参数和固有延迟对缓冲器进行建模也是一种标准做法。\n- **良定性**：该问题要求推导总延迟，并关于缓冲器数量 $N$ 对其进行最小化。变量和目标函数定义清晰。假设最优性条件对 $N$ 产生正值，确保了在指定框架内可以找到一个有意义的解。\n- **客观性**：问题陈述使用了精确、无偏见的专业术语。所有参数都是为物理量定义的符号。\n\n**步骤 3：结论与行动**\n该问题是有效的。它是电子设计自动化中的一个标准优化问题。我现在将开始求解。\n\n**总延迟的推导**\n\n总的源到接收端延迟 $T(N)$ 是所有 $N$ 个缓冲器的固有延迟与 $N+1$ 个互连线段的 Elmore 延迟之和。\n\n总长度 $L$ 被分成 $N+1$ 个相同的线段，因此每个线段的长度为 $\\ell = \\frac{L}{N+1}$。\n\n总延迟 $T(N)$ 可以表示为：\n$$T(N) = N t_b + \\sum_{i=1}^{N+1} D_i$$\n其中 $D_i$ 是第 $i$ 个导线段的 Elmore 延迟。我们逐段分析延迟的贡献。\n\n1.  **线段 1**：从理想源到第一个缓冲器。\n    - 驱动电阻：$R_s = 0$。\n    - 负载电容：$C_{\\text{load}} = C_b$（第一个缓冲器的输入电容）。\n    - 延迟 $D_1$：\n    $$D_1 = (0)(C' \\ell + C_b) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b = \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b$$\n\n2.  **中间线段（i = 2 到 N）**：从缓冲器 $i-1$ 到缓冲器 $i$。\n    - 共有 $N-1$ 个这样的线段。\n    - 驱动电阻：$R_s = R_b$（缓冲器的输出电阻）。\n    - 负载电容：$C_{\\text{load}} = C_b$（下一个缓冲器的输入电容）。\n    - 每个中间线段的延迟 $D_{\\text{mid}}$：\n    $$D_{\\text{mid}} = R_b (C' \\ell + C_b) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b$$\n\n3.  **最终线段 (N+1)**：从最后一个缓冲器 (N) 到接收端。\n    - 驱动电阻：$R_s = R_b$。\n    - 负载电容：$C_{\\text{load}} = C_L$（接收端电容）。\n    - 延迟 $D_{N+1}$：\n    $$D_{N+1} = R_b (C' \\ell + C_L) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_L$$\n\n总延迟是所有这些分量的和：\n$$T(N) = N t_b + D_1 + (N-1) D_{\\text{mid}} + D_{N+1}$$\n代入 $D_1$、$D_{\\text{mid}}$ 和 $D_{N+1}$ 的表达式：\n$$T(N) = N t_b + \\left(\\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b\\right) + (N-1)\\left(R_b (C' \\ell + C_b) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b\\right) + \\left(R_b (C' \\ell + C_L) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_L\\right)$$\n我们根据各项的物理来源进行归类：\n- 缓冲器固有延迟：$N t_b$\n- 缓冲器驱动延迟：$(N-1)R_b C_b + R_b C_L$\n- 缓冲器驱动导线电容：$(N-1) R_b C' \\ell + R_b C' \\ell = N R_b C' \\ell$\n- 分布式导线自身延迟：$(1 + (N-1) + 1) \\frac{1}{2} R' C' \\ell^2 = (N+1)\\frac{1}{2} R' C' \\ell^2$\n- 导线电阻驱动负载电容：$R' \\ell C_b + (N-1) R' \\ell C_b + R' \\ell C_L = N R' \\ell C_b + R' \\ell C_L$\n\n将这些项相加得到总延迟：\n$$T(N) = N t_b + N R_b C' \\ell + (N-1) R_b C_b + R_b C_L + (N+1)\\frac{1}{2}R'C'\\ell^2 + N R' \\ell C_b + R' \\ell C_L$$\n现在，代入 $\\ell = \\frac{L}{N+1}$：\n$$T(N) = N t_b + N R_b C' \\frac{L}{N+1} + (N-1) R_b C_b + R_b C_L + (N+1)\\frac{1}{2}R'C'\\frac{L^2}{(N+1)^2} + N R' \\frac{L}{N+1} C_b + R' \\frac{L}{N+1} C_L$$\n为了便于求导，我们根据 $N$ 和 $\\frac{1}{N+1}$ 的幂次重新整理表达式：\n$$T(N) = N (t_b + R_b C_b) + (R_b C_L - R_b C_b) + \\frac{N}{N+1}(R_b C' L + R' L C_b) + \\frac{1}{N+1}\\left(\\frac{1}{2}R'C'L^2 + R' L C_L\\right)$$\n使用恒等式 $\\frac{N}{N+1} = 1 - \\frac{1}{N+1}$：\n$$T(N) = N(t_b + R_b C_b) + (R_b C_L - R_b C_b) + \\left(1-\\frac{1}{N+1}\\right)(R_b C' L + R' L C_b) + \\frac{1}{N+1}\\left(\\frac{1}{2}R'C'L^2 + R' L C_L\\right)$$\n将与 $N$ 无关的项、与 $N$ 成正比的项以及与 $\\frac{1}{N+1}$ 成正比的项分组：\n$$T(N) = N(t_b + R_b C_b) + \\frac{1}{N+1}\\left(\\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b\\right) + \\text{常数项}$$\n常数项不影响优化。令 $A = t_b + R_b C_b$ 且 $K = \\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b$。延迟函数的形式为 $T(N) = N A + \\frac{K}{N+1} + \\text{常数}$。\n\n**优化**\n\n为了找到最优的缓冲器数量 $N^{\\star}$，我们将 $T(N)$ 对 $N$ 求导（将 $N$ 视为连续变量）并将导数设为零。\n$$\\frac{dT}{dN} = \\frac{d}{dN} \\left( N A + \\frac{K}{N+1} + \\text{常数} \\right) = A - \\frac{K}{(N+1)^2}$$\n对最优值 $N^{\\star}$ 将导数设为零：\n$$A - \\frac{K}{(N^{\\star}+1)^2} = 0 \\implies (N^{\\star}+1)^2 = \\frac{K}{A}$$\n问题陈述要求假设最优性条件产生一个正值，这意味着我们取正平方根。\n$$N^{\\star}+1 = \\sqrt{\\frac{K}{A}}$$\n$$N^{\\star} = \\sqrt{\\frac{K}{A}} - 1$$\n将 $A$ 和 $K$ 的表达式代回：\n$$N^{\\star} = \\sqrt{\\frac{\\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b}{t_b + R_b C_b}} - 1$$\n这就是最优 repeater 数量（实数值）的最终闭合形式表达式。",
            "answer": "$$\\boxed{\\sqrt{\\frac{\\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b}{t_b + R_b C_b}} - 1}$$"
        },
        {
            "introduction": "即使经过精心综合和缓冲器优化，由于制造工艺的变化和模型的不精确性，时钟树仍可能存在时序违例。本练习模拟了一个真实世界中的时序收敛任务：修复保持时间（hold time）违例。您需要应用延迟模型，通过精确的局部调整来解决这一具体的设计问题，从而体验理论模型在工程实践中的应用 。",
            "id": "4260633",
            "problem": "在电子设计自动化（EDA）的时钟树综合（CTS）阶段设计的一个时钟分配网络，由于时钟偏斜（skew），在两个 sink 端之间存在保持时间风险：sink $\\mathcal{B}$ 处的时钟比 sink $\\mathcal{A}$ 处的时钟先到达。当前测得的 sink 间差异为 $T_{\\mathcal{A}} - T_{\\mathcal{B}} = 12\\,\\text{ps}$，而所需的保持时间裕量为 $40\\,\\text{ps}$。为避免修改通往 $\\mathcal{A}$ 的慢速分支，你将在通往 $\\mathcal{B}$ 的快速分支末端附近添加一段蛇形绕线（serpentine meander），以增加其路径延迟。\n\n将从最后一个缓冲器到 sink $\\mathcal{B}$ 的快速分支建模如下：\n- 最后一个缓冲器具有一个有效线性输出电阻 $R_{\\mathrm{buf}} = 100\\,\\Omega$ 和一个固有延迟，在本次计算中该延迟与负载无关。\n- 现有布线长度为 $L_{0} = 800\\,\\mu\\text{m}$，位于一个给定的金属层上，其单位长度电阻为 $R' = 0.10\\,\\Omega/\\mu\\text{m}$，单位长度电容为 $C' = 0.25\\,\\text{fF}/\\mu\\text{m}$。\n- sink 的输入电容为 $C_{L} = 12\\,\\text{fF}$。\n\n假设对电阻驱动的分布式 $RC$ 线使用一阶 Elmore 延迟模型：\n- 将缓冲器视为驱动 $RC$ 树的戴维南电阻 $R_{\\mathrm{buf}}$。\n- 将导线视为具有给定 $R'$ 和 $C'$ 的分布式 $RC$ 线。\n- 增加的长度为 $\\ell$ 的蛇形绕线添加在导线的末端，位于 sink 电容 $C_{L}$ 之前。\n- 忽略电感效应、与其他网络的耦合以及转换率依赖性。\n\n从这些建模假设和线性 $RC$ 树的标准 Elmore 延迟构造出发，推导由增加的长度 $\\ell$ 引入的增量延迟 $\\Delta t(\\ell)$ 的表达式，并计算最小的 $\\ell$，使得快速分支上增加的延迟至少达到满足保持时间目标所需的额外延迟。将所需的额外延迟表示为所需保持时间裕量与当前 sink 间差异之差。\n\n给出最小增加长度 $\\ell_{\\min}$ 的最终数值答案，单位为微米，并将答案四舍五入到三位有效数字。最终长度以微米表示。",
            "solution": "首先根据指定标准对问题进行验证。\n\n### 第 1 步：提取已知条件\n-   Sink 间时钟到达时间差：$T_{\\mathcal{A}} - T_{\\mathcal{B}} = 12\\,\\text{ps}$。\n-   所需保持时间裕量：$40\\,\\text{ps}$。\n-   关于所需额外延迟的说明：“将所需的额外延迟表示为所需保持时间裕量与当前 sink 间差异之差。”\n-   缓冲器输出电阻：$R_{\\mathrm{buf}} = 100\\,\\Omega$。\n-   现有导线长度：$L_{0} = 800\\,\\mu\\text{m}$。\n-   单位长度导线电阻：$R' = 0.10\\,\\Omega/\\mu\\text{m}$。\n-   单位长度导线电容：$C' = 0.25\\,\\text{fF}/\\mu\\text{m}$。\n-   Sink 输入电容：$C_{L} = 12\\,\\text{fF}$。\n-   模型：用于电阻驱动的分布式 $RC$ 线的一阶 Elmore 延迟模型。\n-   任务：找出满足所需延迟的蛇形绕线的最小增加长度 $\\ell$。\n\n### 第 2 步：使用提取的已知条件进行验证\n-   **科学依据**：该问题基于 Elmore 延迟模型，这是集成电路时序分析中广泛使用并被接受的 RC 互连延迟一阶近似。物理参数（$R'$、$C'$、尺寸）对于现代半导体技术是切合实际的。\n-   **适定性**：该问题提供了所有必要的参数，并对如何计算所需的延迟增量给出了清晰而具体的定义。这消除了歧义，并允许计算出唯一、稳定的解。\n-   **客观性**：问题以精确、定量的语言陈述。\n\n该问题被认为是有效的，因为它具有科学依据、适定性和客观性。不存在矛盾、信息缺失或违反科学原理的情况。\n\n### 第 3 步：进行求解\n\n首先，我们确定所需的额外延迟 $\\Delta t_{\\text{req}}$。问题陈述给出了明确的指示：“将所需的额外延迟表示为所需保持时间裕量与当前 sink 间差异之差。”\n$$\n\\Delta t_{\\text{req}} = (\\text{所需保持时间裕量}) - (\\text{当前 sink 间差异})\n$$\n$$\n\\Delta t_{\\text{req}} = 40\\,\\text{ps} - 12\\,\\text{ps} = 28\\,\\text{ps}\n$$\n我们需要添加一段长度为 $\\ell$ 的绕线，其引入的延迟至少要达到这个值。\n\n接下来，我们使用 Elmore 延迟公式对延迟进行建模。RC 树中一条路径的 Elmore 延迟是该路径上每个电阻与其下游总电容乘积之和。对于一个长度为 $L$、电阻为 $R'L$、电容为 $C'L$ 的分布式 RC 线，由源电阻 $R_s$ 驱动并以负载电容 $C_{\\text{load}}$ 端接，其延迟由以下公式给出：\n$$\nT_D = R_s(C'L + C_{\\text{load}}) + R'L\\left(\\frac{C'L}{2} + C_{\\text{load}}\\right)\n$$\n项 $\\frac{C'L}{2}$ 源于导线自身电容的分布式特性。\n\n让我们计算在添加蛇形绕线之前，到 sink $\\mathcal{B}$ 的时钟路径延迟 $t_{\\mathcal{B}}$。这里，源电阻为 $R_{\\mathrm{buf}}$，导线长度为 $L_0$，负载为 $C_L$。\n$$\nt_{\\mathcal{B}} = R_{\\mathrm{buf}}(C'L_0 + C_L) + R'L_0\\left(\\frac{C'L_0}{2} + C_L\\right)\n$$\n\n现在，我们在现有导线的末端添加一段长度为 $\\ell$ 的蛇形绕线。这等效于将两个分布式 RC 段串联。\n-   段 1：原始导线，电阻为 $R_1 = R'L_0$，电容为 $C_1 = C'L_0$。\n-   段 2：蛇形绕线，电阻为 $R_2 = R'\\ell$，电容为 $C_2 = C'\\ell$。\n结构为 $R_{\\mathrm{buf}} \\to \\text{段 1} \\to \\text{段 2} \\to C_L$。\n\n使用基于路径的 Elmore 公式，新的总延迟 $t'_{\\mathcal{B}}$ 是每个电阻元件上延迟的总和：\n$$\nt'_{\\mathcal{B}} = R_{\\mathrm{buf}}(C_1+C_2+C_L) + R_1\\left(\\frac{C_1}{2} + C_2+C_L\\right) + R_2\\left(\\frac{C_2}{2} + C_L\\right)\n$$\n代入电阻和电容的表达式：\n$$\nt'_{\\mathcal{B}} = R_{\\mathrm{buf}}(C'L_0 + C'\\ell + C_L) + R'L_0\\left(\\frac{C'L_0}{2} + C'\\ell + C_L\\right) + R'\\ell\\left(\\frac{C'\\ell}{2} + C_L\\right)\n$$\n\n增量延迟 $\\Delta t(\\ell)$ 是新延迟与原始延迟之差：$\\Delta t(\\ell) = t'_{\\mathcal{B}} - t_{\\mathcal{B}}$。\n$$\n\\Delta t(\\ell) = \\left[R_{\\mathrm{buf}}(C'L_0 + C'\\ell + C_L) + R'L_0\\left(\\frac{C'L_0}{2} + C'\\ell + C_L\\right) + R'\\ell\\left(\\frac{C'\\ell}{2} + C_L\\right)\\right] - \\left[R_{\\mathrm{buf}}(C'L_0 + C_L) + R'L_0\\left(\\frac{C'L_0}{2} + C_L\\right)\\right]\n$$\n许多项会消掉。让我们展开并收集余下的项：\n$$\n\\Delta t(\\ell) = R_{\\mathrm{buf}}(C'\\ell) + R'L_0(C'\\ell) + R'\\ell\\left(\\frac{C'\\ell}{2} + C_L\\right)\n$$\n$$\n\\Delta t(\\ell) = R_{\\mathrm{buf}}C'\\ell + R'L_0C'\\ell + \\frac{1}{2}R'C'\\ell^2 + R'C_L\\ell\n$$\n这个表达式可以整理成关于 $\\ell$ 的二次函数：\n$$\n\\Delta t(\\ell) = \\left(\\frac{1}{2}R'C'\\right)\\ell^2 + \\left(R_{\\mathrm{buf}}C' + R'L_0C' + R'C_L\\right)\\ell\n$$\n$$\n\\Delta t(\\ell) = \\left(\\frac{1}{2}R'C'\\right)\\ell^2 + \\left((R_{\\mathrm{buf}} + R'L_0)C' + R'C_L\\right)\\ell\n$$\n我们需要找到最小长度 $\\ell$（记为 $\\ell_{\\min}$），使得 $\\Delta t(\\ell_{\\min}) = \\Delta t_{\\text{req}}$。这给出了一个二次方程：\n$$\n\\left(\\frac{1}{2}R'C'\\right)\\ell^2 + \\left((R_{\\mathrm{buf}} + R'L_0)C' + R'C_L\\right)\\ell - \\Delta t_{\\text{req}} = 0\n$$\n为求解该方程，我们将使用一组一致的单位。我们使用电阻单位 $\\Omega$、长度单位 $\\mu\\text{m}$、电容单位 $\\text{fF}$ 和时间单位 $\\text{ps}$。时间换算因子为 $1\\,\\text{ps} = 1000\\,\\Omega \\cdot \\text{fF}$。\n\n给定的参数是：\n$R_{\\mathrm{buf}} = 100\\,\\Omega$\n$L_{0} = 800\\,\\mu\\text{m}$\n$R' = 0.10\\,\\Omega/\\mu\\text{m}$\n$C' = 0.25\\,\\text{fF}/\\mu\\text{m}$\n$C_{L} = 12\\,\\text{fF}$\n$\\Delta t_{\\text{req}} = 28\\,\\text{ps}$\n\n设二次方程为 $a\\ell^2 + b\\ell + c = 0$。系数 $a$ 和 $b$ 从延迟表达式计算得出，而 $c = -\\Delta t_{\\text{req}}$。\n首先，计算系数 $a$ 和 $b$，其单位为 $\\Omega\\cdot\\text{fF}$ 每 $\\mu\\text{m}$ 的幂。\n$$\na_{\\Omega\\text{fF}} = \\frac{1}{2}R'C' = \\frac{1}{2}(0.10\\,\\Omega/\\mu\\text{m})(0.25\\,\\text{fF}/\\mu\\text{m}) = 0.0125\\,\\frac{\\Omega \\cdot \\text{fF}}{(\\mu\\text{m})^2}\n$$\n现有导线的电阻为 $R'L_0 = (0.10\\,\\Omega/\\mu\\text{m})(800\\,\\mu\\text{m}) = 80\\,\\Omega$。\n$$\nb_{\\Omega\\text{fF}} = (R_{\\mathrm{buf}} + R'L_0)C' + R'C_L = (100\\,\\Omega + 80\\,\\Omega)(0.25\\,\\text{fF}/\\mu\\text{m}) + (0.10\\,\\Omega/\\mu\\text{m})(12\\,\\text{fF})\n$$\n$$\nb_{\\Omega\\text{fF}} = (180\\,\\Omega)(0.25\\,\\text{fF}/\\mu\\text{m}) + 1.2\\,\\frac{\\Omega \\cdot \\text{fF}}{\\mu\\text{m}} = 45\\,\\frac{\\Omega \\cdot \\text{fF}}{\\mu\\text{m}} + 1.2\\,\\frac{\\Omega \\cdot \\text{fF}}{\\mu\\text{m}} = 46.2\\,\\frac{\\Omega \\cdot \\text{fF}}{\\mu\\text{m}}\n$$\n以 $\\Omega \\cdot \\text{fF}$ 为单位的增量延迟为 $\\Delta t(\\ell) = 0.0125\\ell^2 + 46.2\\ell$。\n我们需要这个延迟为 $28\\,\\text{ps}$。我们将 ps 转换为 $\\Omega \\cdot \\text{fF}$：\n$$\n\\Delta t_{\\text{req}} = 28\\,\\text{ps} \\times \\frac{1000\\,\\Omega \\cdot \\text{fF}}{1\\,\\text{ps}} = 28000\\,\\Omega \\cdot \\text{fF}\n$$\n现在我们求解关于 $\\ell$（单位为 $\\mu\\text{m}$）的方程：\n$$\n0.0125\\ell^2 + 46.2\\ell - 28000 = 0\n$$\n使用二次公式 $\\ell = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$，其中 $a=0.0125$，$b=46.2$，$c=-28000$：\n$$\n\\ell = \\frac{-46.2 \\pm \\sqrt{(46.2)^2 - 4(0.0125)(-28000)}}{2(0.0125)}\n$$\n$$\n\\ell = \\frac{-46.2 \\pm \\sqrt{2134.44 + 1400}}{0.025}\n$$\n$$\n\\ell = \\frac{-46.2 \\pm \\sqrt{3534.44}}{0.025}\n$$\n由于长度 $\\ell$ 必须为正，我们取正根：\n$$\n\\ell = \\frac{-46.2 + 59.451156...}{0.025} = \\frac{13.251156...}{0.025} = 530.04624...\n$$\n最小增加长度为 $\\ell_{\\min} \\approx 530.046\\,\\mu\\text{m}$。\n四舍五入到三位有效数字，最小长度为 $530.\\,\\mu\\text{m}$。用标准科学记数法表示，即为 $5.30 \\times 10^2\\,\\mu\\text{m}$。\n单位不包含在最终的方框答案中。",
            "answer": "$$\n\\boxed{5.30 \\times 10^2}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "This first practice provides a comprehensive walkthrough of the entire channel routing process using the constrained left-edge algorithm. By working through this example, you will gain hands-on experience in translating a high-level netlist and pin assignment into a concrete track assignment, a fundamental skill in detailed routing. This exercise will solidify your understanding of core concepts such as net intervals, channel density, and the crucial role of the Vertical Constraint Graph (VCG) in guiding the placement .",
            "id": "4265276",
            "problem": "A two-layer channel routing instance arises between two switchbox boundaries in an Electronic Design Automation (EDA) flow. The channel spans discrete columns indexed by $1$ through $14$. Pins reside on the top and bottom boundaries of the channel, each pin labeled by its net name. All nets are to be routed without doglegs, with horizontal segments confined to tracks within the channel, and vertical connections at pin columns. The routing model is the classical two-layer channel routing model with horizontal wiring on one metal layer and vertical interconnects on the other, and a Vertical Constraint Graph (VCG) applies where top and bottom pins at the same column belong to different nets.\n\nTop boundary pins (column $\\rightarrow$ net) are:\n- $1 \\rightarrow A$, $3 \\rightarrow B$, $5 \\rightarrow C$, $6 \\rightarrow D$, $8 \\rightarrow E$, $9 \\rightarrow F$, $12 \\rightarrow G$, $14 \\rightarrow A$.\n\nBottom boundary pins (column $\\rightarrow$ net) are:\n- $2 \\rightarrow C$, $3 \\rightarrow D$, $4 \\rightarrow B$, $7 \\rightarrow E$, $10 \\rightarrow F$, $11 \\rightarrow G$, $13 \\rightarrow A$.\n\nAssume the following design rules hold:\n- Minimum wire width is $w = 0.5\\,\\mu\\text{m}$.\n- Minimum same-layer spacing between adjacent horizontal wires is $s = 0.7\\,\\mu\\text{m}$.\n- Track pitch (center-to-center) is $P = w + s$.\n- Minimum center-to-center vertical spacing between vias on adjacent tracks is $s_{v} = 0.8\\,\\mu\\text{m}$.\n- Tracks are indexed $1,2,\\dots$ from top to bottom; a net assigned to a smaller track index is physically above a net assigned to a larger track index.\n\nTask:\n1. Construct for each net its horizontal interval endpoints, defined by the minimum and maximum column it spans based on its pins on the top and bottom boundaries.\n2. Compute the per-column density $D(i)$ for each $i \\in \\{1,2,\\dots,14\\}$, where $D(i)$ is the number of net intervals that cover column $i$.\n3. Derive the VCG from the pin placements by adding a directed edge when, at the same column, the top pin’s net must be routed above the bottom pin’s net.\n4. Perform step-by-step constrained left-edge placement with no doglegs: at each track, select the set of nets with zero in-degree in the VCG and place them by increasing left endpoints, ensuring no horizontal interval overlap within the same track.\n5. Verify that the final assignment obeys all constraints implied by the VCG and satisfies the stated design rules, including horizontal spacing and via vertical spacing.\n6. Compute the minimum channel height $H$ in micrometers from your legal placement using the given track pitch, and express $H$ in micrometers. Round your answer to four significant figures.\n\nYour final answer must be the single real-valued number $H$ in micrometers, rounded to four significant figures, as specified above. No other output will be considered correct.",
            "solution": "The problem statement has been validated and is deemed a well-posed, scientifically grounded problem in the field of Electronic Design Automation (EDA) for integrated circuits. It provides a complete and consistent set of data and constraints to solve a standard two-layer channel routing instance. The tasks are clearly defined, and the methodology (constrained left-edge algorithm) is a standard technique. All numerical values and design rules are physically reasonable.\n\nThe solution proceeds by executing the six specified tasks in order.\n\n**Task 1: Construct Horizontal Intervals**\n\nThe horizontal interval for each net is determined by the minimum and maximum column indices of its pins. The nets connect pins on the top and bottom boundaries.\n\n- **Net A**: Pins at columns $1$ (Top), $14$ (Top), and $13$ (Bottom). The interval is $[\\min(1, 13, 14), \\max(1, 13, 14)] = [1, 14]$.\n- **Net B**: Pins at columns $3$ (Top) and $4$ (Bottom). The interval is $[\\min(3, 4), \\max(3, 4)] = [3, 4]$.\n- **Net C**: Pins at columns $5$ (Top) and $2$ (Bottom). The interval is $[\\min(2, 5), \\max(2, 5)] = [2, 5]$.\n- **Net D**: Pins at columns $6$ (Top) and $3$ (Bottom). The interval is $[\\min(3, 6), \\max(3, 6)] = [3, 6]$.\n- **Net E**: Pins at columns $8$ (Top) and $7$ (Bottom). The interval is $[\\min(7, 8), \\max(7, 8)] = [7, 8]$.\n- **Net F**: Pins at columns $9$ (Top) and $10$ (Bottom). The interval is $[\\min(9, 10), \\max(9, 10)] = [9, 10]$.\n- **Net G**: Pins at columns $12$ (Top) and $11$ (Bottom). The interval is $[\\min(11, 12), \\max(11, 12)] = [11, 12]$.\n\nSummary of net intervals:\n- Net A: $[1, 14]$\n- Net B: $[3, 4]$\n- Net C: $[2, 5]$\n- Net D: $[3, 6]$\n- Net E: $[7, 8]$\n- Net F: $[9, 10]$\n- Net G: $[11, 12]$\n\n**Task 2: Compute Per-Column Density**\n\nThe density $D(i)$ at a column $i$ is the number of net intervals that span that column.\n\n- $D(1)$: Net A. $D(1)=1$.\n- $D(2)$: Nets A, C. $D(2)=2$.\n- $D(3)$: Nets A, B, C, D. $D(3)=4$.\n- $D(4)$: Nets A, B, C, D. $D(4)=4$.\n- $D(5)$: Nets A, C, D. $D(5)=3$.\n- $D(6)$: Nets A, D. $D(6)=2$.\n- $D(7)$: Nets A, E. $D(7)=2$.\n- $D(8)$: Nets A, E. $D(8)=2$.\n- $D(9)$: Nets A, F. $D(9)=2$.\n- $D(10)$: Nets A, F. $D(10)=2$.\n- $D(11)$: Nets A, G. $D(11)=2$.\n- $D(12)$: Nets A, G. $D(12)=2$.\n- $D(13)$: Net A. $D(13)=1$.\n- $D(14)$: Net A. $D(14)=1$.\n\nThe maximum density is $D_{max} = \\max_i D(i) = 4$, which occurs at columns $3$ and $4$. This establishes a lower bound of $4$ tracks for any valid routing solution.\n\n**Task 3: Derive the Vertical Constraint Graph (VCG)**\n\nA vertical constraint arises at any column where pins for two different nets exist, one on the top boundary and one on the bottom. The net with the top pin must be routed in a track physically above the net with the bottom pin. Since smaller track indices are physically higher, this translates to the top net's track index being smaller than the bottom net's track index. A directed edge from the top net to the bottom net is added to the VCG.\n\n- At column $3$, there is a top pin for net $B$ and a bottom pin for net $D$. This imposes the constraint that net $B$ must be routed above net $D$. This is represented by a directed edge $B \\rightarrow D$ in the VCG.\n- No other column has pins for two different nets on both top and bottom boundaries.\n- Therefore, the VCG consists of the set of net-vertices $\\{A, B, C, D, E, F, G\\}$ and a single directed edge $B \\rightarrow D$. The graph is acyclic, confirming the problem is routable.\n\n**Task 4: Perform Constrained Left-Edge Placement**\n\nThe constrained left-edge algorithm is an iterative process. At each step, a new track is populated with compatible nets.\nThe set of all nets is $U_{all} = \\{A, B, C, D, E, F, G\\}$. The VCG is $B \\rightarrow D$.\n\n**Track 1:**\n- The set of unplaced nets is $U = U_{all}$.\n- The set of available nets (those with an in-degree of $0$ in the VCG on $U$) is $S_1 = \\{A, C, B, E, F, G\\}$. Net $D$ is not available as it has an incoming edge from $B$.\n- We sort the nets in $S_1$ by their left endpoint: $A([1,14]), C([2,5]), B([3,4]), E([7,8]), F([9,10]), G([11,12])$.\n- The first net in the sorted list, $A$, is placed in track $1$.\n- Its interval $[1, 14]$ occupies the entire channel length. No other net from $S_1$ can be placed in track $1$.\n- **Track 1 Assignment: {A}**\n\n**Track 2:**\n- The set of unplaced nets is $U = \\{B, C, D, E, F, G\\}$. The VCG on $U$ is still $B \\rightarrow D$.\n- The set of available nets is $S_2 = \\{C, B, E, F, G\\}$.\n- Sorting $S_2$ by left endpoint: $C([2,5]), B([3,4]), E([7,8]), F([9,10]), G([11,12])$.\n- Place net $C$ ([2,5]). The occupied range is $[2,5]$.\n- The next available net is $B$ ([3,4]), which overlaps with C. Skip.\n- The next available net is $E$ ([7,8]). Its left endpoint $7$ is greater than the right endpoint of the last placed net ($5$). Place E. The occupied ranges are now $[2,5]$ and $[7,8]$.\n- The next available net is $F$ ([9,10]). Its left endpoint $9$ is greater than $8$. Place F. The occupied ranges are now $[2,5]$, $[7,8]$, and $[9,10]$.\n- The next available net is $G$ ([11,12]). Its left endpoint $11$ is greater than $10$. Place G. The occupied ranges are $[2,5]$, $[7,8]$, $[9,10]$, and $[11,12]$.\n- **Track 2 Assignment: {C, E, F, G}**\n\n**Track 3:**\n- The set of unplaced nets is $U = \\{B, D\\}$. The VCG on $U$ is $B \\rightarrow D$.\n- The set of available nets is $S_3 = \\{B\\}$ (in-degree of $B$ is $0$, in-degree of $D$ is $1$).\n- Place net $B$ ([3,4]).\n- **Track 3 Assignment: {B}**\n\n**Track 4:**\n- The set of unplaced nets is $U = \\{D\\}$.\n- The set of available nets is $S_4 = \\{D\\}$ (net $B$ is placed, so $D$ has an in-degree of $0$ in the current VCG of unplaced nets).\n- Place net $D$ ([3,6]).\n- **Track 4 Assignment: {D}**\n\nAll nets have been placed. The algorithm terminates, requiring a total of $4$ tracks.\n\n**Task 5: Verify the Assignment**\n\nThe final placement is:\n- Track 1: A\n- Track 2: C, E, F, G\n- Track 3: B\n- Track 4: D\n\nWe must verify this against all constraints.\n1.  **VCG Compliance**: The only constraint is $B \\rightarrow D$. Net $B$ is in track $3$, and net $D$ is in track $4$. Since track indices increase from top to bottom (smaller index is physically higher), $3  4$ satisfies the requirement that $B$ is routed above $D$. The VCG is satisfied.\n2.  **Horizontal Overlap**: Within each track, the horizontal intervals of the assigned nets must be disjoint.\n    - Track 1: Only net A. No overlap is possible.\n    - Track 2: C([2,5]), E([7,8]), F([9,10]), G([11,12]). All intervals are disjoint.\n    - Track 3: Only net B. No overlap is possible.\n    - Track 4: Only net D. No overlap is possible.\n    The no-overlap rule is satisfied for all tracks.\n3.  **Design Rules**: The minimum wire width is $w = 0.5\\,\\mu\\text{m}$. The minimum spacing is $s = 0.7\\,\\mu\\text{m}$. The track pitch is $P = w + s = 0.5 + 0.7 = 1.2\\,\\mu\\text{m}$. The problem specifies a minimum center-to-center vertical spacing between vias on adjacent tracks of $s_v = 0.8\\,\\mu\\text{m}$. Since the center-to-center distance between adjacent tracks is the pitch $P = 1.2\\,\\mu\\text{m}$, and $P > s_v$, this vertical spacing constraint is satisfied.\n\nThe placement is legal and complete.\n\n**Task 6: Compute Minimum Channel Height H**\n\nThe routing solution requires $N_{tr} = 4$ tracks. The channel height $H$ is the total vertical space consumed by these tracks. In the absence of further specifications about boundary clearances, the standard interpretation is that the total height is the number of tracks multiplied by the track pitch.\n\nThe track pitch $P$ is given by:\n$$ P = w + s = 0.5\\,\\mu\\text{m} + 0.7\\,\\mu\\text{m} = 1.2\\,\\mu\\text{m} $$\nThe total channel height $H$ is:\n$$ H = N_{tr} \\times P $$\nSubstituting the values:\n$$ H = 4 \\times 1.2\\,\\mu\\text{m} = 4.8\\,\\mu\\text{m} $$\nThe problem requires the answer to be rounded to four significant figures. The calculated value $4.8$ has two significant figures. To express this with four significant figures, we write it as $4.800$.",
            "answer": "$$\\boxed{4.800}$$"
        },
        {
            "introduction": "Real-world routing problems often present complexities that challenge simple algorithms. This exercise tackles a classic issue: a cyclic dependency in the Vertical Constraint Graph (VCG), which renders a standard dogleg-free routing impossible. You will explore and quantify the impact of two powerful resolution strategies—inserting a dogleg and pin swapping—to understand how routing tools overcome such logical deadlocks and optimize for track count .",
            "id": "4265336",
            "problem": "Consider a two-row channel of columns indexed by integers $1$ through $12$. On the top boundary, one pin per column may be present; likewise on the bottom boundary. Three multi-terminal nets $N_1$, $N_2$, and $N_3$ have the following pin placements:\n- Top boundary pins: column $3$ carries $N_1$, column $7$ carries $N_2$, column $10$ carries $N_3$.\n- Bottom boundary pins: column $3$ carries $N_2$, column $7$ carries $N_3$, column $10$ carries $N_1$.\nEach net also has at least one additional pin located elsewhere so that its horizontal span (the interval occupied by its horizontal trunk if doglegs are not used) is:\n- $N_1$ spans columns $[1,10]$,\n- $N_2$ spans columns $[3,12]$,\n- $N_3$ spans columns $[5,11]$.\nAssume one horizontal trunk per net unless a dogleg is explicitly introduced. Let the channel density $D$ be the maximum number of net spans overlapping at any column, which you may take as $D=3$ due to the overlap of $N_1$, $N_2$, and $N_3$ over columns $6$ through $10$.\n\nUsing the standard definition of the Vertical Constraint Graph (VCG), which has a directed edge $A \\rightarrow B$ if at some column there is a pin of net $A$ on the top boundary and a pin of net $B$ on the bottom boundary, the given pin placements induce the edges $N_1 \\rightarrow N_2$ (at column $3$), $N_2 \\rightarrow N_3$ (at column $7$), and $N_3 \\rightarrow N_1$ (at column $10$), forming a directed cycle. In a dogleg-free routing regime, a cycle in the VCG prevents any linear ordering of tracks that satisfies all vertical constraints simultaneously.\n\nSuppose, however, that you are allowed exactly one dogleg in the pre-swap regime and, independently, you are allowed to exchange two pins of the same net on opposite boundaries in the post-swap regime. Specifically, assume $N_3$ has two opposite-side terminals connected to functionally symmetric gates located at columns $7$ and $10$, so that a legal pin exchange can swap the side assignment of $N_3$ between these two columns without altering its horizontal span or the spans of $N_1$ and $N_2$. The swap reconfigures the VCG by eliminating the directed cycle while leaving the interval overlaps unchanged.\n\nStarting from the definitions of channel density and the necessity of acyclicity of the VCG for dogleg-free left-edge style routing, derive the minimum required track count before the swap under the “one dogleg allowed” regime and after the swap under the dogleg-free regime, and compute the reduction in required track count due to the swap. Express your final answer as a single real number. No units are required. No rounding is necessary; report the exact integer value.",
            "solution": "The problem is valid as it is scientifically grounded in the principles of electronic design automation (EDA) for integrated circuits, specifically channel routing. It is well-posed, objective, and contains sufficient information to derive a unique solution. The core of the problem requires applying the fundamental lower bounds for channel width (the number of tracks required for routing).\n\nThe minimum number of tracks, $W$, required for channel routing is determined by two main constraints:\n$1$. The channel density, $D$, which is the maximum number of nets crossing any vertical cut-line (column) of the channel. At any such column, each of these nets requires its own horizontal track. Thus, $W \\ge D$.\n$2$. The length of the longest path, $L$, in the Vertical Constraint Graph (VCG). The VCG has a node for each net and a directed edge $N_i \\rightarrow N_j$ if a pin of net $N_i$ must be placed on a track above a pin of net $N_j$ in the same column. A path in the VCG represents a chain of nets that must be stacked vertically, so the number of tracks must be at least the number of nets in the longest such path. For dogleg-free routing, $W \\ge L$. If the VCG contains a cycle, $L$ is effectively infinite, and routing without doglegs is impossible.\n\nWe will analyze the two regimes described in the problem statement.\n\n**Regime 1: Pre-Swap with One Dogleg**\n\nFirst, we establish the parameters for the pre-swap configuration.\nThe horizontal spans of the nets are given as:\n- $N_1$: $[1, 10]$\n- $N_2$: $[3, 12]$\n- $N_3$: $[5, 11]$\nThe channel density, $D$, is the maximum number of nets that overlap at any column. The interval of maximum overlap is $[5, 10]$, where all three nets $N_1$, $N_2$, and $N_3$ are present. The problem states, and we confirm, that the density is $D=3$.\n\nThe pin placements define the VCG:\n- Column $3$: Top pin is $N_1$, bottom pin is $N_2$. This creates a vertical constraint, represented by a directed edge $N_1 \\rightarrow N_2$.\n- Column $7$: Top pin is $N_2$, bottom pin is $N_3$. This creates an edge $N_2 \\rightarrow N_3$.\n- Column $10$: Top pin is $N_3$, bottom pin is $N_1$. This creates an edge $N_3 \\rightarrow N_1$.\n\nThese edges form a directed cycle: $N_1 \\rightarrow N_2 \\rightarrow N_3 \\rightarrow N_1$. The presence of this cycle makes standard dogleg-free routing impossible, as it implies a contradictory ordering requirement ($N_1$ must be above $N_2$, which is above $N_3$, which must be above $N_1$).\n\nThe problem allows for the use of \"exactly one dogleg\". A dogleg allows a single net to be split into two or more horizontal segments on different tracks. This is the standard technique to break VCG cycles. To break the cycle, we can introduce a dogleg in any of the three nets, for instance, $N_1$.\nBy splitting net $N_1$ into two sub-nets, $N_{1A}$ (for the left part, including the pin at column $3$) and $N_{1B}$ (for the right part, including the pin at column $10$), we can resolve the cycle. The VCG is modified as follows:\n- The edge $N_1 \\rightarrow N_2$ becomes $N_{1A} \\rightarrow N_2$.\n- The edge $N_2 \\rightarrow N_3$ remains unchanged.\n- The edge $N_3 \\rightarrow N_1$ becomes $N_3 \\rightarrow N_{1B}$.\n\nThe modified VCG is now a Directed Acyclic Graph (DAG). We can find the longest path in this new graph to determine the vertical constraint lower bound. One such path is $N_{1A} \\rightarrow N_2 \\rightarrow N_3 \\rightarrow N_{1B}$. The length of this path, $L_{pre}$, is the number of nodes (nets/sub-nets) it contains. Here, $L_{pre} = 4$.\n\nThe minimum number of tracks required in this regime, $W_{pre}$, is the maximum of the density and the longest path length in the resolved VCG:\n$$W_{pre} = \\max(D, L_{pre}) = \\max(3, 4) = 4$$\nThus, $4$ tracks are required before the swap.\n\n**Regime 2: Post-Swap and Dogleg-Free**\n\nIn this regime, a pin swap is performed on net $N_3$ between columns $7$ and $10$.\n- Pre-Swap at column $7$: Top $N_2$, Bottom $N_3$.\n- Pre-Swap at column $10$: Top $N_3$, Bottom $N_1$.\nThe swap exchanges the side-assignments of $N_3$ at these columns, which implies a corresponding exchange for the other nets at those pin locations.\n- Post-Swap at column $7$: Top $N_3$, Bottom $N_2$.\n- Post-Swap at column $10$: Top $N_1$, Bottom $N_3$.\n\nThis change reconfigures the VCG. The new edges are:\n- Column $3$: Top $N_1$, Bottom $N_2$ $\\implies N_1 \\rightarrow N_2$ (unchanged).\n- Column $7$: Top $N_3$, Bottom $N_2$ $\\implies N_3 \\rightarrow N_2$.\n- Column $10$: Top $N_1$, Bottom $N_3$ $\\implies N_1 \\rightarrow N_3$.\n\nThe new VCG has edges $(N_1, N_2)$, $(N_1, N_3)$, and $(N_3, N_2)$. This graph is acyclic, confirming the problem statement. The routing is specified to be dogleg-free.\nThe number of tracks required, $W_{post}$, is given by $W_{post} = \\max(D, L_{post})$.\n\nThe problem states the swap does not alter the horizontal spans, so the channel density remains $D=3$.\nWe must find the longest path length, $L_{post}$, in the new VCG. The paths are:\n- $N_1 \\rightarrow N_2$ (length $2$)\n- $N_1 \\rightarrow N_3$ (length $2$)\n- $N_3 \\rightarrow N_2$ (length $2$)\n- $N_1 \\rightarrow N_3 \\rightarrow N_2$ (length $3$)\nThe longest path is $N_1 \\rightarrow N_3 \\rightarrow N_2$, with a length of $L_{post} = 3$.\n\nThe minimum number of tracks required is:\n$$W_{post} = \\max(D, L_{post}) = \\max(3, 3) = 3$$\nThus, $3$ tracks are required after the swap.\n\n**Reduction in Track Count**\n\nThe reduction in the required number of tracks is the difference between the pre-swap and post-swap track counts:\n$$\\text{Reduction} = W_{pre} - W_{post} = 4 - 3 = 1$$\nThe swap allows for a more efficient, dogleg-free routing that saves one track.",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "A successful routing is not just about connectivity; it must also be manufacturable. This final practice shifts the focus from algorithmic placement to physical verification, a critical step known as Design Rule Checking (DRC). By calculating a \"violation cost\" for a given layout, you will learn how to quantitatively assess a routing solution against fundamental manufacturing constraints like minimum wire width, spacing, and via enclosure rules, bridging the gap between abstract graph theory and the physical realities of chip fabrication .",
            "id": "4265333",
            "problem": "Consider a horizontal channel routing in Electronic Design Automation (EDA) for integrated circuits. The routing uses Metal 2 (M2) for horizontal segments on discrete tracks with uniform track pitch. All geometries are axis-aligned and described in a Cartesian coordinate system where the horizontal coordinate is $x$ and the vertical coordinate is $y$. The M2 track centerlines are at $y=t \\cdot p$ for integer track indices $t \\in \\{1,2,3\\}$, where $p$ is the track pitch.\n\nDesign rules are:\n- Minimum M2 width is $w_{\\min} = 200$ nm.\n- Minimum M2 spacing is $s_{\\min} = 200$ nm, measured edge-to-edge between any two parallel M2 segments whose projections on the $x$-axis overlap with positive measure.\n- Square via cut size is $a_{v} = 150$ nm. The minimum required enclosure on M2 is $e_{\\min} = 30$ nm on each side, meaning an M2 width $w$ at a via location must satisfy $w \\ge a_{v} + 2 e_{\\min}$ to be legal.\n\nThe track pitch is $p = 400$ nm. The proposed routing consists of $5$ M2 segments, each described by a track index $t$, a constant width $w$, and a closed horizontal interval $[x_{\\text{L}}, x_{\\text{R}}]$ in nanometers along that track:\n- Segment $S_{1}$: $t=1$, $w=220$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [100, 600]$.\n- Segment $S_{2}$: $t=2$, $w=180$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [400, 900]$.\n- Segment $S_{3}$: $t=3$, $w=220$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [300, 500]$.\n- Segment $S_{4}$: $t=2$, $w=200$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [0, 300]$.\n- Segment $S_{5}$: $t=1$, $w=200$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [580, 800]$.\n\nThere are $5$ vias, each centered on its hosting M2 segment at the specified $x$-coordinate and the corresponding track centerline $y = t \\cdot p$:\n- Via $V_{1}$ on $S_{2}$ at $x=450$ nm.\n- Via $V_{2}$ on $S_{1}$ at $x=550$ nm.\n- Via $V_{3}$ on $S_{3}$ at $x=490$ nm.\n- Via $V_{4}$ on $S_{4}$ at $x=280$ nm.\n- Via $V_{5}$ on $S_{5}$ at $x=600$ nm.\n\nAdopt the following violation cost functional, expressed in nanometers and defined from first principles of the above design rules:\n- Width deficit for a segment with width $w_{i}$ is $\\max(0,\\, w_{\\min} - w_{i})$.\n- Spacing deficit for a pair of segments $i,j$ that are on tracks $t_{i} \\neq t_{j}$ and whose $x$-intervals overlap with positive measure is $\\max\\!\\big(0,\\, s_{\\min} - d_{ij}\\big)$, where the edge-to-edge separation $d_{ij}$ is the vertical centerline separation minus the sum of their half-widths:\n$$\nd_{ij} \\;=\\; |t_{i} - t_{j}| \\cdot p \\;-\\; \\frac{w_{i}}{2} \\;-\\; \\frac{w_{j}}{2}.\n$$\nPairs with zero-measure overlap (intersection consisting of a single point) are not considered.\n- Via enclosure deficit at a via located on a segment of width $w$ is $\\max\\!\\big(0,\\, a_{v} + 2 e_{\\min} - w \\big)$.\n\nLet the total violation cost be the sum of all width deficits over the $5$ segments, plus all spacing deficits over all unordered qualifying pairs of segments, plus all via enclosure deficits over the $5$ vias.\n\nCompute this total violation cost. Express your final result in nanometers. No rounding is required; provide the exact value.",
            "solution": "The problem is well-posed, self-contained, and scientifically grounded within the domain of Electronic Design Automation (EDA). All necessary data, definitions, and constraints are provided to compute a unique total violation cost. The problem is therefore valid and a solution can be formulated.\n\nThe total violation cost is the sum of three components: the total width deficit, the total spacing deficit, and the total via enclosure deficit. Each component will be calculated systematically based on the provided design rules and cost functionals. All calculations will be performed in nanometers (nm).\n\nThe given constants are:\n- Minimum M$2$ width, $w_{\\min} = 200$ nm.\n- Minimum M$2$ spacing, $s_{\\min} = 200$ nm.\n- Track pitch, $p = 400$ nm.\n- Via cut size, $a_{v} = 150$ nm.\n- Minimum M$2$ enclosure, $e_{\\min} = 30$ nm.\n\nThe $5$ M$2$ segments are:\n- $S_{1}$: $t_1=1$, $w_1=220$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [100, 600]$.\n- $S_{2}$: $t_2=2$, $w_2=180$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [400, 900]$.\n- $S_{3}$: $t_3=3$, $w_3=220$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [300, 500]$.\n- $S_{4}$: $t_4=2$, $w_4=200$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [0, 300]$.\n- $S_{5}$: $t_5=1$, $w_5=200$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [580, 800]$.\n\n**1. Total Width Deficit Calculation**\n\nThe width deficit for a segment $i$ is given by $\\max(0, w_{\\min} - w_{i})$.\n- For $S_1$, $w_1=220$ nm. Deficit = $\\max(0, 200 - 220) = 0$ nm.\n- For $S_2$, $w_2=180$ nm. Deficit = $\\max(0, 200 - 180) = 20$ nm.\n- For $S_3$, $w_3=220$ nm. Deficit = $\\max(0, 200 - 220) = 0$ nm.\n- For $S_4$, $w_4=200$ nm. Deficit = $\\max(0, 200 - 200) = 0$ nm.\n- For $S_5$, $w_5=200$ nm. Deficit = $\\max(0, 200 - 200) = 0$ nm.\n\nThe total width deficit is the sum of these individual deficits:\n$$ C_W = 0 + 20 + 0 + 0 + 0 = 20 \\text{ nm}. $$\n\n**2. Total Spacing Deficit Calculation**\n\nThe spacing deficit applies to pairs of segments $(S_i, S_j)$ that are on different tracks ($t_i \\neq t_j$) and whose horizontal intervals overlap with positive measure. The deficit is $\\max(0, s_{\\min} - d_{ij})$, where $d_{ij} = |t_{i} - t_{j}| \\cdot p - \\frac{w_{i}}{2} - \\frac{w_{j}}{2}$. We examine all unordered pairs of segments.\n\n- Pair $(S_1, S_2)$: $t_1=1, t_2=2$. Tracks differ. Intervals $[100, 600]$ and $[400, 900]$ overlap in $[400, 600]$.\n  $d_{12} = |1-2| \\cdot 400 - \\frac{220}{2} - \\frac{180}{2} = 1 \\cdot 400 - 110 - 90 = 400 - 200 = 200$ nm.\n  Deficit = $\\max(0, 200 - 200) = 0$ nm.\n\n- Pair $(S_1, S_3)$: $t_1=1, t_3=3$. Tracks differ. Intervals $[100, 600]$ and $[300, 500]$ overlap in $[300, 500]$.\n  $d_{13} = |1-3| \\cdot 400 - \\frac{220}{2} - \\frac{220}{2} = 2 \\cdot 400 - 110 - 110 = 800 - 220 = 580$ nm.\n  Deficit = $\\max(0, 200 - 580) = 0$ nm.\n\n- Pair $(S_1, S_4)$: $t_1=1, t_4=2$. Tracks differ. Intervals $[100, 600]$ and $[0, 300]$ overlap in $[100, 300]$.\n  $d_{14} = |1-2| \\cdot 400 - \\frac{220}{2} - \\frac{200}{2} = 1 \\cdot 400 - 110 - 100 = 400 - 210 = 190$ nm.\n  Deficit = $\\max(0, 200 - 190) = 10$ nm.\n\n- Pair $(S_1, S_5)$: $t_1=1, t_5=1$. Same track. Not considered.\n\n- Pair $(S_2, S_3)$: $t_2=2, t_3=3$. Tracks differ. Intervals $[400, 900]$ and $[300, 500]$ overlap in $[400, 500]$.\n  $d_{23} = |2-3| \\cdot 400 - \\frac{180}{2} - \\frac{220}{2} = 1 \\cdot 400 - 90 - 110 = 400 - 200 = 200$ nm.\n  Deficit = $\\max(0, 200 - 200) = 0$ nm.\n\n- Pair $(S_2, S_4)$: $t_2=2, t_4=2$. Same track. Not considered.\n\n- Pair $(S_2, S_5)$: $t_2=2, t_5=1$. Tracks differ. Intervals $[400, 900]$ and $[580, 800]$ overlap in $[580, 800]$.\n  $d_{25} = |2-1| \\cdot 400 - \\frac{180}{2} - \\frac{200}{2} = 1 \\cdot 400 - 90 - 100 = 400 - 190 = 210$ nm.\n  Deficit = $\\max(0, 200 - 210) = 0$ nm.\n\n- Pair $(S_3, S_4)$: $t_3=3, t_4=2$. Tracks differ. Intervals $[300, 500]$ and $[0, 300]$ intersect only at the point $x=300$. The overlap measure is zero, so this pair is not considered for spacing violations.\n\n- Pair $(S_3, S_5)$: $t_3=3, t_5=1$. Tracks differ. Intervals $[300, 500]$ and $[580, 800]$ do not overlap.\n\n- Pair $(S_4, S_5)$: $t_4=2, t_5=1$. Tracks differ. Intervals $[0, 300]$ and $[580, 800]$ do not overlap.\n\nThe total spacing deficit is the sum of all non-zero individual deficits:\n$$ C_S = 10 \\text{ nm}. $$\n\n**3. Total Via Enclosure Deficit Calculation**\n\nThe minimum required M$2$ width at a via location is $w_{\\text{req}} = a_v + 2 e_{\\min}$.\n$$ w_{\\text{req}} = 150 + 2 \\cdot 30 = 150 + 60 = 210 \\text{ nm}. $$\nThe via enclosure deficit for a via on a segment of width $w$ is $\\max(0, w_{\\text{req}} - w)$.\n\n- Via $V_1$ on $S_2$: $w_2=180$ nm. Deficit = $\\max(0, 210 - 180) = 30$ nm.\n- Via $V_2$ on $S_1$: $w_1=220$ nm. Deficit = $\\max(0, 210 - 220) = 0$ nm.\n- Via $V_3$ on $S_3$: $w_3=220$ nm. Deficit = $\\max(0, 210 - 220) = 0$ nm.\n- Via $V_4$ on $S_4$: $w_4=200$ nm. Deficit = $\\max(0, 210 - 200) = 10$ nm.\n- Via $V_5$ on $S_5$: $w_5=200$ nm. Deficit = $\\max(0, 210 - 200) = 10$ nm.\n\nThe total via enclosure deficit is the sum of these deficits:\n$$ C_V = 30 + 0 + 0 + 10 + 10 = 50 \\text{ nm}. $$\n\n**4. Total Violation Cost**\n\nThe total violation cost is the sum of the costs from the three categories:\n$$ C_{\\text{total}} = C_W + C_S + C_V. $$\n$$ C_{\\text{total}} = 20 + 10 + 50 = 80 \\text{ nm}. $$\nThe total violation cost is $80$ nm.",
            "answer": "$$\\boxed{80}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "布线实践的第一步是将抽象的引脚布局转化为具体的布线方案。这个练习将指导你完成约束左端点算法（Constrained Left-Edge Algorithm）的核心步骤，这是通道布线中的一个基本方法。通过解决这个问题 ()，你将学会如何从引脚位置推导出垂直约束图（VCG），并理解通道密度如何决定了布线所需的最小轨道数，从而从零开始构建一个合法的布线方案。",
            "id": "4265276",
            "problem": "在电子设计自动化（EDA）流程中，一个双层通道布线实例出现在两个开关盒边界之间。该通道跨越从 $1$ 到 $14$ 索引的离散列。引脚位于通道的顶部和底部边界，每个引脚都用其信号线名称标记。所有信号线都需在无狗腿（doglegs）的情况下布线，水平线段限制在通道内的轨道上，垂直连接在引脚所在的列上。布线模型是经典的双层通道布线模型，其中水平布线在一个金属层上，垂直互连在另一层上。当同一列的顶部和底部引脚属于不同的信号线时，适用垂直约束图（VCG）。\n\n顶部边界引脚（列 $\\rightarrow$ 信号线）如下：\n- $1 \\rightarrow A$, $3 \\rightarrow B$, $5 \\rightarrow C$, $6 \\rightarrow D$, $8 \\rightarrow E$, $9 \\rightarrow F$, $12 \\rightarrow G$, $14 \\rightarrow A$。\n\n底部边界引脚（列 $\\rightarrow$ 信号线）如下：\n- $2 \\rightarrow C$, $3 \\rightarrow D$, $4 \\rightarrow B$, $7 \\rightarrow E$, $10 \\rightarrow F$, $11 \\rightarrow G$, $13 \\rightarrow A$。\n\n假设以下设计规则成立：\n- 最小线宽为 $w = 0.5\\,\\mu\\text{m}$。\n- 相邻水平线之间的最小同层间距为 $s = 0.7\\,\\mu\\text{m}$。\n- 轨道间距（中心到中心）为 $P = w + s$。\n- 相邻轨道上过孔之间的最小中心到中心垂直间距为 $s_{v} = 0.8\\,\\mu\\text{m}$。\n- 轨道从上到下索引为 $1,2,\\dots$；分配给较小轨道索引的信号线物理上位于分配给较大轨道索引的信号线上方。\n\n任务：\n1. 为每个信号线构建其水平区间端点，该区间由其在顶部和底部边界上的引脚所跨越的最小和最大列定义。\n2. 对每个 $i \\in \\{1,2,\\dots,14\\}$ 计算每列密度 $D(i)$，其中 $D(i)$ 是覆盖列 $i$ 的信号线区间数量。\n3. 根据引脚布局推导VCG。当在同一列，顶部引脚的信号线必须布线在底部引脚的信号线上方时，添加一条有向边。\n4. 逐步执行无狗腿的约束左端点放置算法：在每个轨道上，选择VCG中入度为零的信号线集合，并按其左端点递增的顺序放置它们，确保同一轨道内水平区间不重叠。\n5. 验证最终分配是否遵守VCG所隐含的所有约束，并满足所述的设计规则，包括水平间距和过孔垂直间距。\n6. 根据给定的轨道间距，从您的合法布局中计算最小通道高度 $H$（单位：微米），并以微米表示 $H$。将您的答案四舍五入到四位有效数字。\n\n您的最终答案必须是如上所述的单个实数值 $H$（单位：微米），四舍五入到四位有效数字。任何其他输出都将被视为不正确。",
            "solution": "问题陈述已经过验证，被认为是电子设计自动化（EDA）集成电路领域中一个定义明确、具有科学依据的问题。它为解决一个标准的双层通道布线实例提供了一套完整且一致的数据和约束。任务定义清晰，所用方法（约束左端点算法）是一种标准技术。所有数值和设计规则在物理上都是合理的。\n\n解决方案按顺序执行六个指定的任务。\n\n**任务1：构建水平区间**\n\n每个信号线的水平区间由其引脚的最小和最大列索引确定。信号线连接顶部和底部边界上的引脚。\n\n- **信号线 A**：引脚位于列 $1$（顶部）、$14$（顶部）和 $13$（底部）。区间为 $[\\min(1, 13, 14), \\max(1, 13, 14)] = [1, 14]$。\n- **信号线 B**：引脚位于列 $3$（顶部）和 $4$（底部）。区间为 $[\\min(3, 4), \\max(3, 4)] = [3, 4]$。\n- **信号线 C**：引脚位于列 $5$（顶部）和 $2$（底部）。区间为 $[\\min(2, 5), \\max(2, 5)] = [2, 5]$。\n- **信号线 D**：引脚位于列 $6$（顶部）和 $3$（底部）。区间为 $[\\min(3, 6), \\max(3, 6)] = [3, 6]$。\n- **信号线 E**：引脚位于列 $8$（顶部）和 $7$（底部）。区间为 $[\\min(7, 8), \\max(7, 8)] = [7, 8]$。\n- **信号线 F**：引脚位于列 $9$（顶部）和 $10$（底部）。区间为 $[\\min(9, 10), \\max(9, 10)] = [9, 10]$。\n- **信号线 G**：引脚位于列 $12$（顶部）和 $11$（底部）。区间为 $[\\min(11, 12), \\max(11, 12)] = [11, 12]$。\n\n信号线区间总结：\n- 信号线 A: $[1, 14]$\n- 信号线 B: $[3, 4]$\n- 信号线 C: $[2, 5]$\n- 信号线 D: $[3, 6]$\n- 信号线 E: $[7, 8]$\n- 信号线 F: $[9, 10]$\n- 信号线 G: $[11, 12]$\n\n**任务2：计算每列密度**\n\n列 $i$ 的密度 $D(i)$ 是跨越该列的信号线区间的数量。\n\n- $D(1)$: 信号线 A。$D(1)=1$。\n- $D(2)$: 信号线 A, C。$D(2)=2$。\n- $D(3)$: 信号线 A, B, C, D。$D(3)=4$。\n- $D(4)$: 信号线 A, B, C, D。$D(4)=4$。\n- $D(5)$: 信号线 A, C, D。$D(5)=3$。\n- $D(6)$: 信号线 A, D。$D(6)=2$。\n- $D(7)$: 信号线 A, E。$D(7)=2$。\n- $D(8)$: 信号线 A, E。$D(8)=2$。\n- $D(9)$: 信号线 A, F。$D(9)=2$。\n- $D(10)$: 信号线 A, F。$D(10)=2$。\n- $D(11)$: 信号线 A, G。$D(11)=2$。\n- $D(12)$: 信号线 A, G。$D(12)=2$。\n- $D(13)$: 信号线 A。$D(13)=1$。\n- $D(14)$: 信号线 A。$D(14)=1$。\n\n最大密度为 $D_{max} = \\max_i D(i) = 4$，出现在列 $3$ 和 $4$。这为任何有效的布线解决方案确立了 $4$ 条轨道的下限。\n\n**任务3：推导垂直约束图（VCG）**\n\n当任何一列中存在两个不同信号线的引脚，一个在顶部边界，一个在底部边界时，就会产生垂直约束。带有顶部引脚的信号线必须布线在物理上位于带有底部引脚的信号线上方的轨道中。由于较小的轨道索引物理上更高，这转化为顶部信号线的轨道索引小于底部信号线的轨道索引。在VCG中添加一条从顶部信号线指向底部信号线的有向边。\n\n- 在列 $3$ 处，有一个信号线 $B$ 的顶部引脚和一个信号线 $D$ 的底部引脚。这施加了信号线 $B$ 必须布线在信号线 $D$ 上方的约束。这在VCG中表示为一条有向边 $B \\rightarrow D$。\n- 没有其他列同时在顶部和底部边界上具有两个不同信号线的引脚。\n- 因此，VCG由信号线顶点集合 $\\{A, B, C, D, E, F, G\\}$ 和一条有向边 $B \\rightarrow D$ 组成。该图是无环的，证实了该问题是可布线的。\n\n**任务4：执行约束左端点放置**\n\n约束左端点算法是一个迭代过程。在每一步中，一个新的轨道会被填充上兼容的信号线。\n所有信号线的集合是 $U_{all} = \\{A, B, C, D, E, F, G\\}$。VCG为 $B \\rightarrow D$。\n\n**轨道 1：**\n- 未放置信号线的集合是 $U = U_{all}$。\n- 可用信号线的集合（在 $U$ 上的VCG中入度为 $0$ 的信号线）是 $S_1 = \\{A, C, B, E, F, G\\}$。信号线 $D$ 不可用，因为它有一条来自 $B$ 的入边。\n- 我们按左端点对 $S_1$ 中的信号线进行排序：$A([1,14]), C([2,5]), B([3,4]), E([7,8]), F([9,10]), G([11,12])$。\n- 排序列表中的第一个信号线 $A$ 被放置在轨道 $1$ 中。\n- 其区间 $[1, 14]$ 占据了整个通道长度。$S_1$ 中的其他信号线都不能放置在轨道 $1$ 中。\n- **轨道 1 分配：{A}**\n\n**轨道 2：**\n- 未放置信号线的集合是 $U = \\{B, C, D, E, F, G\\}$。在 $U$ 上的VCG仍然是 $B \\rightarrow D$。\n- 可用信号线的集合是 $S_2 = \\{C, B, E, F, G\\}$。\n- 按左端点对 $S_2$ 进行排序：$C([2,5]), B([3,4]), E([7,8]), F([9,10]), G([11,12])$。\n- 放置信号线 $C$ ([2,5])。已占用范围为 $[2,5]$。\n- 下一个可用的信号线是 $B$ ([3,4])，它与 C 重叠。跳过。\n- 下一个可用的信号线是 $E$ ([7,8])。其左端点 $7$ 大于上一个放置信号线的右端点 ($5$)。放置 E。现在已占用的范围是 $[2,5]$ 和 $[7,8]$。\n- 下一个可用的信号线是 $F$ ([9,10])。其左端点 $9$ 大于 $8$。放置 F。现在已占用的范围是 $[2,5]$, $[7,8]$, 和 $[9,10]$。\n- 下一个可用的信号线是 $G$ ([11,12])。其左端点 $11$ 大于 $10$。放置 G。已占用的范围是 $[2,5]$, $[7,8]$, $[9,10]$, 和 $[11,12]$。\n- **轨道 2 分配：{C, E, F, G}**\n\n**轨道 3：**\n- 未放置信号线的集合是 $U = \\{B, D\\}$。在 $U$ 上的VCG是 $B \\rightarrow D$。\n- 可用信号线的集合是 $S_3 = \\{B\\}$（$B$ 的入度为 $0$，$D$ 的入度为 $1$）。\n- 放置信号线 $B$ ([3,4])。\n- **轨道 3 分配：{B}**\n\n**轨道 4：**\n- 未放置信号线的集合是 $U = \\{D\\}$。\n- 可用信号线的集合是 $S_4 = \\{D\\}$（信号线 $B$ 已放置，因此在当前未放置信号线的VCG中，$D$ 的入度为 $0$）。\n- 放置信号线 $D$ ([3,6])。\n- **轨道 4 分配：{D}**\n\n所有信号线都已放置。算法终止，共需要 $4$ 条轨道。\n\n**任务5：验证分配**\n\n最终布局如下：\n- 轨道 1: A\n- 轨道 2: C, E, F, G\n- 轨道 3: B\n- 轨道 4: D\n\n我们必须对照所有约束来验证这一点。\n1.  **VCG符合性**：唯一的约束是 $B \\rightarrow D$。信号线 $B$ 在轨道 $3$ 中，信号线 $D$ 在轨道 $4$ 中。由于轨道索引从上到下递增（较小的索引物理上更高），$3  4$ 满足了 $B$ 布线在 $D$ 上方的要求。VCG得到满足。\n2.  **水平重叠**：在每个轨道内，分配的信号线的水平区间必须是不相交的。\n    - 轨道 1：只有信号线 A。不可能重叠。\n    - 轨道 2：C([2,5]), E([7,8]), F([9,10]), G([11,12])。所有区间都不相交。\n    - 轨道 3：只有信号线 B。不可能重叠。\n    - 轨道 4：只有信号线 D。不可能重叠。\n    所有轨道都满足无重叠规则。\n3.  **设计规则**：最小线宽为 $w = 0.5\\,\\mu\\text{m}$。最小间距为 $s = 0.7\\,\\mu\\text{m}$。轨道间距为 $P = w + s = 0.5 + 0.7 = 1.2\\,\\mu\\text{m}$。问题指定相邻轨道上过孔之间的最小中心到中心垂直间距为 $s_v = 0.8\\,\\mu\\text{m}$。由于相邻轨道之间的中心到中心距离是间距 $P = 1.2\\,\\mu\\text{m}$，且 $P > s_v$，因此这个垂直间距约束得到满足。\n\n布局是合法的和完整的。\n\n**任务6：计算最小通道高度 H**\n\n该布线解决方案需要 $N_{tr} = 4$ 条轨道。通道高度 $H$ 是这些轨道消耗的总垂直空间。在没有关于边界间隙的进一步说明的情况下，标准的解释是总高度是轨道数乘以轨道间距。\n\n轨道间距 $P$ 由下式给出：\n$$ P = w + s = 0.5\\,\\mu\\text{m} + 0.7\\,\\mu\\text{m} = 1.2\\,\\mu\\text{m} $$\n总通道高度 $H$ 为：\n$$ H = N_{tr} \\times P $$\n代入数值：\n$$ H = 4 \\times 1.2\\,\\mu\\text{m} = 4.8\\,\\mu\\text{m} $$\n问题要求答案四舍五入到四位有效数字。计算值 $4.8$ 有两位有效数字。为了用四位有效数字表示，我们写作 $4.800$。",
            "answer": "$$\\boxed{4.800}$$"
        },
        {
            "introduction": "在掌握了基本布线算法后，我们来探讨一个更复杂的情形：当垂直约束图中出现环路时该怎么办？环路意味着布线轨道顺序存在逻辑矛盾，使得无狗腿（dogleg-free）布线无法完成。这个练习 () 深入探讨了这种情况，并展示了一种巧妙的优化技术——交换功能等效的引脚——如何比引入物理狗腿更高效地解决问题，从而减少所需的布线轨道数量。",
            "id": "4265336",
            "problem": "考虑一个双行通道，其列由整数 $1$ 到 $12$ 索引。在上边界，每列可能存在一个引脚；下边界同样如此。三个多端点网络 $N_1$、$N_2$ 和 $N_3$ 具有以下引脚布局：\n- 上边界引脚：第 $3$ 列承载 $N_1$，第 $7$ 列承载 $N_2$，第 $10$ 列承载 $N_3$。\n- 下边界引脚：第 $3$ 列承载 $N_2$，第 $7$ 列承载 $N_3$，第 $10$ 列承载 $N_1$。\n每个网络还至少有一个位于别处的附加引脚，因此其水平跨度（在不使用狗腿的情况下，其水平主干所占据的区间）为：\n- $N_1$ 跨越列 $[1,10]$，\n- $N_2$ 跨越列 $[3,12]$，\n- $N_3$ 跨越列 $[5,11]$。\n除非明确引入狗腿，否则假设每个网络有一个水平主干。设通道密度 $D$ 为在任意列上重叠的网络跨度的最大数量，由于网络 $N_1$、$N_2$ 和 $N_3$ 在第 $6$ 列到第 $10$ 列上重叠，您可以取 $D=3$。\n\n根据垂直约束图（VCG）的标准定义，如果在某一列上，上边界有网络 $A$ 的引脚，下边界有网络 $B$ 的引脚，则存在一条有向边 $A \\rightarrow B$。据此，给定的引脚布局会产生边 $N_1 \\rightarrow N_2$（在第 $3$ 列）、$N_2 \\rightarrow N_3$（在第 $7$ 列）和 $N_3 \\rightarrow N_1$（在第 $10$ 列），从而形成一个有向环。在无狗腿布线方案中，VCG 中的环路会阻止任何能够同时满足所有垂直约束的走线轨道线性排序。\n\n然而，假设在交换前方案中，您被允许使用恰好一个狗腿；并且，独立地，在交换后方案中，您被允许交换同一网络在相对边界上的两个引脚。具体来说，假设网络 $N_3$ 有两个位于相对侧的端子，连接到位于第 $7$ 列和第 $10$ 列的功能对称门，因此一次合法的引脚交换可以在这两列之间交换 $N_3$ 的边界分配，而不会改变其水平跨度或网络 $N_1$ 和 $N_2$ 的跨度。这次交换通过消除有向环来重新配置 VCG，同时保持区间重叠不变。\n\n从通道密度的定义以及对于无狗腿布线VCG必须为无环图的必要性出发，推导在“允许一个狗腿”的交换前方案中，以及在无狗腿布线的交换后方案中，所需的最小轨道数，并计算由于交换所带来的所需轨道数的减少量。将您的最终答案表示为单个实数。不需要单位。无需四舍五入；报告精确的整数值。",
            "solution": "该问题是有效的，因为它科学地基于集成电路的电子设计自动化（EDA）原理，特别是通道布线。问题表述清晰、客观，并包含足够的信息来推导出唯一解。问题的核心要求应用通道宽度（布线所需的轨道数）的基本下界。\n\n通道布线所需的最小轨道数 $W$ 由两个主要约束决定：\n$1$. 通道密度 $D$，即穿过通道任何垂直剖切线（列）的最大网络数。在任何这样的列上，这些网络中的每一个都需要自己的水平轨道。因此，$W \\ge D$。\n$2$. 垂直约束图（VCG）中最长路径的长度 $L$。VCG 为每个网络设一个节点，如果网络 $N_i$ 的引脚必须放置在同一列中网络 $N_j$ 引脚上方的轨道上，则存在一条有向边 $N_i \\rightarrow N_j$。VCG 中的路径代表了必须垂直堆叠的一系列网络，因此轨道数必须至少等于最长路径中的网络数。对于无狗腿布线，$W \\ge L$。如果 VCG 包含环路，则 $L$ 实际上是无限的，无狗腿布线是不可能的。\n\n我们将分析问题陈述中描述的两种方案。\n\n**方案1：交换前，使用一个狗腿**\n\n首先，我们确定交换前配置的参数。\n网络的水平跨度给定为：\n- $N_1$：$[1, 10]$\n- $N_2$：$[3, 12]$\n- $N_3$：$[5, 11]$\n通道密度 $D$ 是在任意列上重叠的最大网络数。最大重叠区间为 $[5, 10]$，其中网络 $N_1$、$N_2$ 和 $N_3$ 都存在。问题陈述中说明，并且我们确认，密度为 $D=3$。\n\n引脚布局定义了VCG：\n- 第 $3$ 列：上引脚为 $N_1$，下引脚为 $N_2$。这产生一个垂直约束，表示为有向边 $N_1 \\rightarrow N_2$。\n- 第 $7$ 列：上引脚为 $N_2$，下引脚为 $N_3$。这产生一条边 $N_2 \\rightarrow N_3$。\n- 第 $10$ 列：上引脚为 $N_3$，下引脚为 $N_1$。这产生一条边 $N_3 \\rightarrow N_1$。\n\n这些边形成一个有向环：$N_1 \\rightarrow N_2 \\rightarrow N_3 \\rightarrow N_1$。这个环的存在使得标准的无狗腿布线无法进行，因为它意味着一个矛盾的排序要求（$N_1$ 必须在 $N_2$ 之上，$N_2$ 必须在 $N_3$ 之上，而 $N_3$ 又必须在 $N_1$ 之上）。\n\n问题允许使用“恰好一个狗腿”。狗腿允许将单个网络分割成位于不同轨道上的两个或多个水平段。这是打破VCG环路的标准技术。为了打破环路，我们可以在三个网络中的任何一个引入狗腿，例如 $N_1$。\n通过将网络 $N_1$ 分割成两个子网络 $N_{1A}$（用于左侧部分，包括第 $3$ 列的引脚）和 $N_{1B}$（用于右侧部分，包括第 $10$ 列的引脚），我们可以解决这个环路。VCG 修改如下：\n- 边 $N_1 \\rightarrow N_2$ 变为 $N_{1A} \\rightarrow N_2$。\n- 边 $N_2 \\rightarrow N_3$ 保持不变。\n- 边 $N_3 \\rightarrow N_1$ 变为 $N_3 \\rightarrow N_{1B}$。\n\n修改后的 VCG 现在是一个有向无环图（DAG）。我们可以在这个新图中找到最长路径，以确定垂直约束的下界。其中一条路径是 $N_{1A} \\rightarrow N_2 \\rightarrow N_3 \\rightarrow N_{1B}$。该路径的长度 $L_{pre}$ 是它包含的节点（网络/子网络）数量。这里，$L_{pre} = 4$。\n\n在这种方案下所需的最小轨道数 $W_{pre}$ 是密度和已解析的 VCG 中最长路径长度的最大值：\n$$W_{pre} = \\max(D, L_{pre}) = \\max(3, 4) = 4$$\n因此，交换前需要 $4$ 条轨道。\n\n**方案2：交换后，无狗腿布线**\n\n在这种方案中，对网络 $N_3$ 在第 $7$ 列和第 $10$ 列之间进行了一次引脚交换。\n- 交换前，第 $7$ 列：上 $N_2$，下 $N_3$。\n- 交换前，第 $10$ 列：上 $N_3$，下 $N_1$。\n这次交换改变了 $N_3$ 在这些列的边界分配，这意味着在这些引脚位置上的其他网络也发生了相应的交换。\n- 交换后，第 $7$ 列：上 $N_3$，下 $N_2$。\n- 交换后，第 $10$ 列：上 $N_1$，下 $N_3$。\n\n这一变化重新配置了VCG。新的边是：\n- 第 $3$ 列：上 $N_1$，下 $N_2$ $\\implies N_1 \\rightarrow N_2$（不变）。\n- 第 $7$ 列：上 $N_3$，下 $N_2$ $\\implies N_3 \\rightarrow N_2$。\n- 第 $10$ 列：上 $N_1$，下 $N_3$ $\\implies N_1 \\rightarrow N_3$。\n\n新的 VCG 有边 $(N_1, N_2)$、$(N_1, N_3)$ 和 $(N_3, N_2)$。该图是无环的，证实了问题陈述。布线被指定为无狗腿布线。\n所需的轨道数 $W_{post}$ 由 $W_{post} = \\max(D, L_{post})$ 给出。\n\n问题陈述说明交换不改变水平跨度，因此通道密度保持为 $D=3$。\n我们必须找到新 VCG 中的最长路径长度 $L_{post}$。路径有：\n- $N_1 \\rightarrow N_2$（长度为 $2$）\n- $N_1 \\rightarrow N_3$（长度为 $2$）\n- $N_3 \\rightarrow N_2$（长度为 $2$）\n- $N_1 \\rightarrow N_3 \\rightarrow N_2$（长度为 $3$）\n最长路径是 $N_1 \\rightarrow N_3 \\rightarrow N_2$，长度为 $L_{post} = 3$。\n\n所需的最小轨道数为：\n$$W_{post} = \\max(D, L_{post}) = \\max(3, 3) = 3$$\n因此，交换后需要 $3$ 条轨道。\n\n**轨道数减少量**\n\n所需轨道数的减少量是交换前和交换后轨道数之差：\n$$\\text{Reduction} = W_{pre} - W_{post} = 4 - 3 = 1$$\n这次交换实现了一种更高效的无狗腿布线，节省了一条轨道。",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "一个算法上正确的布线方案并非终点，它还必须在物理上是可制造的。本练习旨在连接抽象的轨道分配与芯片制造的物理现实。在问题 () 中，你将扮演验证工程师的角色，根据最小线宽 ($w_{\\min}$)、间距 ($s_{\\min}$) 和过孔包围（via enclosure）等关键设计规则，严格检查一个已有的布线方案。通过计算违规成本，你将深刻体会到抽象的布线决策如何转化为具体的物理几何约束。",
            "id": "4265333",
            "problem": "考虑集成电路的电子设计自动化（EDA）中的水平通道布线。该布线使用 Metal 2 (M2) 在具有均匀轨道间距的离散轨道上形成水平线段。所有几何图形都是轴对齐的，并在笛卡尔坐标系中描述，其中水平坐标为 $x$，垂直坐标为 $y$。M2 轨道的中心线位于 $y=t \\cdot p$，其中轨道索引 $t \\in \\{1,2,3\\}$ 为整数，$p$ 是轨道间距。\n\n设计规则如下：\n- 最小 M2 宽度为 $w_{\\min} = 200$ nm。\n- 最小 M2 间距为 $s_{\\min} = 200$ nm，指的是任意两个平行的 M2 线段，其在 $x$ 轴上的投影具有正测度重叠时，它们之间的边到边距离。\n- 方形通孔切割尺寸为 $a_{v} = 150$ nm。M2 上所需的最小包围尺寸为每边 $e_{\\min} = 30$ nm，这意味着通孔位置处的 M2 宽度 $w$ 必须满足 $w \\ge a_{v} + 2 e_{\\min}$ 才算合法。\n\n轨道间距为 $p = 400$ nm。建议的布线由 5 个 M2 线段组成，每个线段由轨道索引 $t$、恒定宽度 $w$ 和沿该轨道的闭合水平区间 $[x_{\\text{L}}, x_{\\text{R}}]$（单位为纳米）描述：\n- 线段 $S_{1}$：$t=1$，$w=220$ nm，$ [x_{\\text{L}}, x_{\\text{R}}] = [100, 600]$。\n- 线段 $S_{2}$：$t=2$，$w=180$ nm，$ [x_{\\text{L}}, x_{\\text{R}}] = [400, 900]$。\n- 线段 $S_{3}$：$t=3$，$w=220$ nm，$ [x_{\\text{L}}, x_{\\text{R}}] = [300, 500]$。\n- 线段 $S_{4}$：$t=2$，$w=200$ nm，$ [x_{\\text{L}}, x_{\\text{R}}] = [0, 300]$。\n- 线段 $S_{5}$：$t=1$，$w=200$ nm，$ [x_{\\text{L}}, x_{\\text{R}}] = [580, 800]$。\n\n有 5 个通孔，每个通孔都以其所在的 M2 线段为中心，位于指定的 $x$ 坐标和相应的轨道中心线 $y = t \\cdot p$ 处：\n- 通孔 $V_{1}$ 在 $S_{2}$ 上，位于 $x=450$ nm。\n- 通孔 $V_{2}$ 在 $S_{1}$ 上，位于 $x=550$ nm。\n- 通孔 $V_{3}$ 在 $S_{3}$ 上，位于 $x=490$ nm。\n- 通孔 $V_{4}$ 在 $S_{4}$ 上，位于 $x=280$ nm。\n- 通孔 $V_{5}$ 在 $S_{5}$ 上，位于 $x=600$ nm。\n\n采用以下违规成本函数，该函数以纳米表示，并根据上述设计规则的第一性原理定义：\n- 宽度为 $w_{i}$ 的线段的宽度不足量为 $\\max(0,\\, w_{\\min} - w_{i})$。\n- 对于位于不同轨道 $t_{i} \\neq t_{j}$ 且其 $x$ 区间具有正测度重叠的一对线段 $i,j$，其间距不足量为 $\\max\\!\\big(0,\\, s_{\\min} - d_{ij}\\big)$，其中边到边间距 $d_{ij}$ 是垂直中心线间距减去它们半宽度之和：\n$$\nd_{ij} = |t_{i} - t_{j}| \\cdot p - \\frac{w_{i}}{2} - \\frac{w_{j}}{2}.\n$$\n具有零测度重叠（交集仅为单点）的线段对不予考虑。\n- 位于宽度为 $w$ 的线段上的通孔的包围不足量为 $\\max\\!\\big(0,\\, a_{v} + 2 e_{\\min} - w \\big)$。\n\n总违规成本是 5 个线段的所有宽度不足量之和，加上所有符合条件的无序线段对的所有间距不足量之和，再加上 5 个通孔的所有通孔包围不足量之和。\n\n计算这个总违规成本。最终结果以纳米表示。无需四舍五入，请提供精确值。",
            "solution": "该问题在电子设计自动化（EDA）领域内定义明确、自成体系且具有科学依据。所有必要的数据、定义和约束都已提供，可以计算出唯一的总违规成本。因此，该问题是有效的，可以制定解决方案。\n\n总违规成本是三个部分的总和：总宽度不足量、总间距不足量和总通孔包围不足量。每个部分都将根据所提供的设计规则和成本函数系统地进行计算。所有计算都将以纳米（nm）为单位进行。\n\n给定的常数是：\n- 最小 M$2$ 宽度, $w_{\\min} = 200$ nm。\n- 最小 M$2$ 间距, $s_{\\min} = 200$ nm。\n- 轨道间距, $p = 400$ nm。\n- 通孔切割尺寸, $a_{v} = 150$ nm。\n- 最小 M$2$ 包围, $e_{\\min} = 30$ nm。\n\n5 个 M$2$ 线段如下：\n- $S_{1}$：$t_1=1$, $w_1=220$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [100, 600]$。\n- $S_{2}$：$t_2=2$, $w_2=180$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [400, 900]$。\n- $S_{3}$：$t_3=3$, $w_3=220$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [300, 500]$。\n- $S_{4}$：$t_4=2$, $w_4=200$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [0, 300]$。\n- $S_{5}$：$t_5=1$, $w_5=200$ nm, $[x_{\\text{L}}, x_{\\text{R}}] = [580, 800]$。\n\n**1. 总宽度不足量计算**\n\n线段 $i$ 的宽度不足量由 $\\max(0, w_{\\min} - w_{i})$ 给出。\n- 对于 $S_1$，$w_1=220$ nm。不足量 = $\\max(0, 200 - 220) = 0$ nm。\n- 对于 $S_2$，$w_2=180$ nm。不足量 = $\\max(0, 200 - 180) = 20$ nm。\n- 对于 $S_3$，$w_3=220$ nm。不足量 = $\\max(0, 200 - 220) = 0$ nm。\n- 对于 $S_4$，$w_4=200$ nm。不足量 = $\\max(0, 200 - 200) = 0$ nm。\n- 对于 $S_5$，$w_5=200$ nm。不足量 = $\\max(0, 200 - 200) = 0$ nm。\n\n总宽度不足量是这些单个不足量的总和：\n$$ C_W = 0 + 20 + 0 + 0 + 0 = 20 \\text{ nm}. $$\n\n**2. 总间距不足量计算**\n\n间距不足量适用于位于不同轨道（$t_i \\neq t_j$）且其水平区间具有正测度重叠的线段对 $(S_i, S_j)$。不足量为 $\\max(0, s_{\\min} - d_{ij})$，其中 $d_{ij} = |t_{i} - t_{j}| \\cdot p - \\frac{w_{i}}{2} - \\frac{w_{j}}{2}$。我们检查所有无序线段对。\n\n- 线段对 $(S_1, S_2)$：$t_1=1, t_2=2$。轨道不同。区间 $[100, 600]$ 和 $[400, 900]$ 在 $[400, 600]$ 上重叠。\n  $d_{12} = |1-2| \\cdot 400 - \\frac{220}{2} - \\frac{180}{2} = 1 \\cdot 400 - 110 - 90 = 400 - 200 = 200$ nm。\n  不足量 = $\\max(0, 200 - 200) = 0$ nm。\n\n- 线段对 $(S_1, S_3)$：$t_1=1, t_3=3$。轨道不同。区间 $[100, 600]$ 和 $[300, 500]$ 在 $[300, 500]$ 上重叠。\n  $d_{13} = |1-3| \\cdot 400 - \\frac{220}{2} - \\frac{220}{2} = 2 \\cdot 400 - 110 - 110 = 800 - 220 = 580$ nm。\n  不足量 = $\\max(0, 200 - 580) = 0$ nm。\n\n- 线段对 $(S_1, S_4)$：$t_1=1, t_4=2$。轨道不同。区间 $[100, 600]$ 和 $[0, 300]$ 在 $[100, 300]$ 上重叠。\n  $d_{14} = |1-2| \\cdot 400 - \\frac{220}{2} - \\frac{200}{2} = 1 \\cdot 400 - 110 - 100 = 400 - 210 = 190$ nm。\n  不足量 = $\\max(0, 200 - 190) = 10$ nm。\n\n- 线段对 $(S_1, S_5)$：$t_1=1, t_5=1$。同一轨道。不予考虑。\n\n- 线段对 $(S_2, S_3)$：$t_2=2, t_3=3$。轨道不同。区间 $[400, 900]$ 和 $[300, 500]$ 在 $[400, 500]$ 上重叠。\n  $d_{23} = |2-3| \\cdot 400 - \\frac{180}{2} - \\frac{220}{2} = 1 \\cdot 400 - 90 - 110 = 400 - 200 = 200$ nm。\n  不足量 = $\\max(0, 200 - 200) = 0$ nm。\n\n- 线段对 $(S_2, S_4)$：$t_2=2, t_4=2$。同一轨道。不予考虑。\n\n- 线段对 $(S_2, S_5)$：$t_2=2, t_5=1$。轨道不同。区间 $[400, 900]$ 和 $[580, 800]$ 在 $[580, 800]$ 上重叠。\n  $d_{25} = |2-1| \\cdot 400 - \\frac{180}{2} - \\frac{200}{2} = 1 \\cdot 400 - 90 - 100 = 400 - 190 = 210$ nm。\n  不足量 = $\\max(0, 200 - 210) = 0$ nm。\n\n- 线段对 $(S_3, S_4)$：$t_3=3, t_4=2$。轨道不同。区间 $[300, 500]$ 和 $[0, 300]$ 仅在点 $x=300$ 处相交。重叠测度为零，因此不考虑此线段对的间距违规。\n\n- 线段对 $(S_3, S_5)$：$t_3=3, t_5=1$。轨道不同。区间 $[300, 500]$ 和 $[580, 800]$ 不重叠。\n\n- 线段对 $(S_4, S_5)$：$t_4=2, t_5=1$。轨道不同。区间 $[0, 300]$ 和 $[580, 800]$ 不重叠。\n\n总间距不足量是所有非零单个不足量的总和：\n$$ C_S = 10 \\text{ nm}. $$\n\n**3. 总通孔包围不足量计算**\n\n通孔位置处所需的最小 M$2$ 宽度为 $w_{\\text{req}} = a_v + 2 e_{\\min}$。\n$$ w_{\\text{req}} = 150 + 2 \\cdot 30 = 150 + 60 = 210 \\text{ nm}. $$\n位于宽度为 $w$ 的线段上的通孔的包围不足量为 $\\max(0, w_{\\text{req}} - w)$。\n\n- 通孔 $V_1$ 在 $S_2$ 上：$w_2=180$ nm。不足量 = $\\max(0, 210 - 180) = 30$ nm。\n- 通孔 $V_2$ 在 $S_1$ 上：$w_1=220$ nm。不足量 = $\\max(0, 210 - 220) = 0$ nm。\n- 通孔 $V_3$ 在 $S_3$ 上：$w_3=220$ nm。不足量 = $\\max(0, 210 - 220) = 0$ nm。\n- 通孔 $V_4$ 在 $S_4$ 上：$w_4=200$ nm。不足量 = $\\max(0, 210 - 200) = 10$ nm。\n- 通孔 $V_5$ 在 $S_5$ 上：$w_5=200$ nm。不足量 = $\\max(0, 210 - 200) = 10$ nm。\n\n总通孔包围不足量是这些不足量的总和：\n$$ C_V = 30 + 0 + 0 + 10 + 10 = 50 \\text{ nm}. $$\n\n**4. 总违规成本**\n\n总违规成本是三类成本的总和：\n$$ C_{\\text{total}} = C_W + C_S + C_V. $$\n$$ C_{\\text{total}} = 20 + 10 + 50 = 80 \\text{ nm}. $$\n总违规成本为 $80$ nm。",
            "answer": "$$\\boxed{80}$$"
        }
    ]
}
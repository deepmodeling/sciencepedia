{
    "hands_on_practices": [
        {
            "introduction": "切分式布局规划是版图设计的基础，而规范化波兰表达式则为之提供了一种紧凑且优雅的表示方法。这项练习将引导您完成从一个给定的波兰表达式到具体物理版图的解码过程，包括构建切分树和计算模块坐标。掌握此过程是理解和实现切分式布局算法的基石。",
            "id": "4272863",
            "problem": "考虑一种使用归一化波兰表达式的切割式布局表示。归一化波兰表达式是二叉切割树的后缀编码，其中操作数是模块标识符，操作符是切割指令，垂直切割操作符将左右子布局并排排列，而水平切割操作符将上下子布局垂直堆叠。将以下归一化波兰表达式解码为其切割树，并用它来推导出一个具体的硬矩形模块布局：\n$$M_1\\ M_2\\ V\\ M_3\\ H\\ M_4\\ M_5\\ V\\ H.$$\n每个模块 $M_i$ 是一个具有固定宽度和高度的硬模块：\n- $M_1$：宽度 $w_1=3$，高度 $h_1=2$，\n- $M_2$：宽度 $w_2=2$，高度 $h_2=3$，\n- $M_3$：宽度 $w_3=4$，高度 $h_3=1$，\n- $M_4$：宽度 $w_4=1$，高度 $h_4=5$，\n- $M_5$：宽度 $w_5=2$，高度 $h_5=2$。\n\n以最终布局的左下角为原点，在每次切割操作中，通过将子布局对齐到底部或左侧边缘来放置子布局，这与垂直和水平切割的语义一致。展示归一化波兰表达式中操作符 $V$ 和 $H$ 的位置与切割树中导出的子布局划分之间的对应关系。\n\n令总成本定义为\n$$C=\\alpha \\cdot A + \\beta \\cdot L,$$\n其中 $A$ 是布局最终边界矩形的面积，$L$ 是总加权曼哈顿线长，计算方法为所有连线的权重乘以所连接模块中心之间的曼哈顿距离之和。两点 $(x_a,y_a)$ 和 $(x_b,y_b)$ 之间的曼哈顿距离为 $|x_a-x_b|+|y_a-y_b|$。权重和双引脚连线如下：\n- $M_1$ 和 $M_2$ 之间，权重为 $1$，\n- $M_2$ 和 $M_3$ 之间，权重为 $2$，\n- $M_3$ 和 $M_4$ 之间，权重为 $3$，\n- $M_1$ 和 $M_5$ 之间，权重为 $1.5$。\n\n使用 $\\alpha=0.05$ 和 $\\beta=1$。计算解码出的切割树和导出布局的最终成本 $C$。将最终成本表示为一个无量纲值，并将答案四舍五入到四位有效数字。",
            "solution": "问题陈述已经过验证，被认为是合理、定义明确且完整的。我们按步骤进行解答。\n\n该问题要求解码一个归一化波兰表达式，以确定切割式布局中模块的几何位置，然后根据所得的面积和线长计算成本函数。\n\n### 第一步：将归一化波兰表达式解码为切割树\n\n归一化波兰表达式代表了二叉切割树的后序遍历。我们可以使用一个基于堆栈的算法来构建这棵树。要解析的表达式是 $$M_1\\ M_2\\ V\\ M_3\\ H\\ M_4\\ M_5\\ V\\ H.$$\n\n1.  **$M_1$**：将 $M_1$ 推入堆栈。堆栈：$[M_1]$。\n2.  **$M_2$**：将 $M_2$ 推入堆栈。堆栈：$[M_1, M_2]$。\n3.  **$V$**：弹出 $M_2$（右子节点）和 $M_1$（左子节点）。创建一个内部节点 $N_1 = V(M_1, M_2)$。将 $N_1$ 推入堆栈。堆栈：$[N_1]$。这第一个操作符 $V$ 对应于分割包含 $M_1$ 和 $M_2$ 的子布局的垂直切割。\n4.  **$M_3$**：将 $M_3$ 推入堆栈。堆栈：$[N_1, M_3]$。\n5.  **$H$**：弹出 $M_3$（上子节点）和 $N_1$（下子节点）。创建一个内部节点 $N_2 = H(N_1, M_3)$。将 $N_2$ 推入堆栈。堆栈：$[N_2]$。这个操作符 $H$ 对应于分割由 $N_1$ 和模块 $M_3$ 定义的子布局的水平切割。\n6.  **$M_4$**：将 $M_4$ 推入堆栈。堆栈：$[N_2, M_4]$。\n7.  **$M_5$**：将 $M_5$ 推入堆栈。堆栈：$[N_2, M_4, M_5]$。\n8.  **$V$**：弹出 $M_5$（右子节点）和 $M_4$（左子节点）。创建一个内部节点 $N_3 = V(M_4, M_5)$。将 $N_3$ 推入堆栈。堆栈：$[N_2, N_3]$。这个操作符 $V$ 对应于分割包含 $M_4$ 和 $M_5$ 的子布局的垂直切割。\n9.  **$H$**：弹出 $N_3$（上子节点）和 $N_2$（下子节点）。创建根节点 $R = H(N_2, N_3)$。将 $R$ 推入堆栈。堆栈：$[R]$。这最后一个操作符 $H$ 对应于将整个布局分割成两个主要子布局 $N_2$ 和 $N_3$ 的主水平切割。\n\n得到的切割树以 $R$ 为根，其结构为 $R = H(H(V(M_1, M_2), M_3), V(M_4, M_5))$。\n\n### 第二步：计算边界框尺寸和模块坐标\n\n我们对切割树进行自底向上的遍历，以计算每个子布局的尺寸 $(w, h)$。设模块 $M_i$ 的尺寸为 $(w_i, h_i)$。\n对于垂直切割 $V(A, B)$，得到的尺寸是 $(w_A+w_B, \\max(h_A, h_B))$。\n对于水平切割 $H(A, B)$，得到的尺寸是 $(\\max(w_A, w_B), h_A+h_B)$。\n\n- **叶节点（模块）**：\n    - $M_1$: $(w_1, h_1) = (3, 2)$\n    - $M_2$: $(w_2, h_2) = (2, 3)$\n    - $M_3$: $(w_3, h_3) = (4, 1)$\n    - $M_4$: $(w_4, h_4) = (1, 5)$\n    - $M_5$: $(w_5, h_5) = (2, 2)$\n\n- **内部节点 $N_1 = V(M_1, M_2)$**：\n    - $w_{N1} = w_1 + w_2 = 3 + 2 = 5$\n    - $h_{N1} = \\max(h_1, h_2) = \\max(2, 3) = 3$\n\n- **内部节点 $N_2 = H(N_1, M_3)$**：\n    - $w_{N2} = \\max(w_{N1}, w_3) = \\max(5, 4) = 5$\n    - $h_{N2} = h_{N1} + h_3 = 3 + 1 = 4$\n\n- **内部节点 $N_3 = V(M_4, M_5)$**：\n    - $w_{N3} = w_4 + w_5 = 1 + 2 = 3$\n    - $h_{N3} = \\max(h_4, h_5) = \\max(5, 2) = 5$\n\n- **根节点 $R = H(N_2, N_3)$**：\n    - $W_{total} = w_R = \\max(w_{N2}, w_{N3}) = \\max(5, 3) = 5$\n    - $H_{total} = h_R = h_{N2} + h_{N3} = 4 + 5 = 9$\n\n最终布局的边界框宽度为 $5$，高度为 $9$。\n\n接下来，我们进行自顶向下的遍历，以确定每个模块左下角的绝对坐标 $(x, y)$，其中整个布局的左下角为原点 $(0,0)$。\n\n- **根 $R$**：放置在 $(0,0)$。\n- **$R = H(N_2, N_3)$ 的子节点**：\n    - $N_2$（下）放置在 $(0,0)$。\n    - $N_3$（上）放置在 $(0, h_{N2}) = (0, 4)$。\n- **$N_2 = H(N_1, M_3)$ 的子节点**（相对于 $N_2$ 的原点 $(0,0)$）：\n    - $N_1$（下）放置在 $(0,0)$。其绝对坐标为 $(0,0)$。\n    - $M_3$（上）放置在 $(0, h_{N1}) = (0, 3)$。其绝对坐标为 $(0,3)$。\n- **$N_1 = V(M_1, M_2)$ 的子节点**（相对于 $N_1$ 的原点 $(0,0)$）：\n    - $M_1$（左）放置在 $(0,0)$。其绝对坐标为 $(0,0)$。\n    - $M_2$（右）放置在 $(w_1, 0) = (3, 0)$。其绝对坐标为 $(3,0)$。\n- **$N_3 = V(M_4, M_5)$ 的子节点**（相对于 $N_3$ 的原点 $(0,4)$）：\n    - $M_4$（左）放置在 $(0,0)$，相对于 $N_3$。其绝对坐标为 $(0, 4)$。\n    - $M_5$（右）放置在 $(w_4, 0) = (1, 0)$，相对于 $N_3$。其绝对坐标为 $(0+1, 4+0) = (1, 4)$。\n\n模块布局总结（坐标 $(x_i, y_i)$ 和尺寸 $(w_i, h_i)$）：\n- $M_1$: $(x_1, y_1)=(0,0)$, $(w_1, h_1)=(3,2)$\n- $M_2$: $(x_2, y_2)=(3,0)$, $(w_2, h_2)=(2,3)$\n- $M_3$: $(x_3, y_3)=(0,3)$, $(w_3, h_3)=(4,1)$\n- $M_4$: $(x_4, y_4)=(0,4)$, $(w_4, h_4)=(1,5)$\n- $M_5$: $(x_5, y_5)=(1,4)$, $(w_5, h_5)=(2,2)$\n\n### 第三步：计算总成本\n\n总成本为 $C=\\alpha \\cdot A + \\beta \\cdot L$，其中 $\\alpha=0.05$ 且 $\\beta=1$。\n\n**3.1. 面积计算**\n最终边界矩形的面积 $A$ 为：\n$$A = W_{total} \\times H_{total} = 5 \\times 9 = 45.$$\n\n**3.2. 线长计算**\n首先，我们计算每个模块的中心坐标 $(x_{ci}, y_{ci}) = (x_i + w_i/2, y_i + h_i/2)$：\n- $M_1$: $(x_{c1}, y_{c1}) = (0 + 3/2, 0 + 2/2) = (1.5, 1)$\n- $M_2$: $(x_{c2}, y_{c2}) = (3 + 2/2, 0 + 3/2) = (4, 1.5)$\n- $M_3$: $(x_{c3}, y_{c3}) = (0 + 4/2, 3 + 1/2) = (2, 3.5)$\n- $M_4$: $(x_{c4}, y_{c4}) = (0 + 1/2, 4 + 5/2) = (0.5, 6.5)$\n- $M_5$: $(x_{c5}, y_{c5}) = (1 + 2/2, 4 + 2/2) = (2, 5)$\n\n接下来，我们计算每个连线的加权曼哈顿线长：\n- **连线 $M_1-M_2$（权重 $1$）**：\n$L_{12} = 1 \\times (|x_{c1}-x_{c2}| + |y_{c1}-y_{c2}|) = 1 \\times (|1.5-4| + |1-1.5|) = 1 \\times (2.5 + 0.5) = 3$\n- **连线 $M_2-M_3$（权重 $2$）**：\n$L_{23} = 2 \\times (|x_{c2}-x_{c3}| + |y_{c2}-y_{c3}|) = 2 \\times (|4-2| + |1.5-3.5|) = 2 \\times (2 + 2) = 8$\n- **连线 $M_3-M_4$（权重 $3$）**：\n$L_{34} = 3 \\times (|x_{c3}-x_{c4}| + |y_{c3}-y_{c4}|) = 3 \\times (|2-0.5| + |3.5-6.5|) = 3 \\times (1.5 + 3) = 3 \\times 4.5 = 13.5$\n- **连线 $M_1-M_5$（权重 $1.5$）**：\n$L_{15} = 1.5 \\times (|x_{c1}-x_{c5}| + |y_{c1}-y_{c5}|) = 1.5 \\times (|1.5-2| + |1-5|) = 1.5 \\times (0.5 + 4) = 1.5 \\times 4.5 = 6.75$\n\n总线长 $L$ 是各个加权长度的总和：\n$$L = L_{12} + L_{23} + L_{34} + L_{15} = 3 + 8 + 13.5 + 6.75 = 31.25.$$\n\n**3.3. 最终成本计算**\n现在我们计算总成本 $C$：\n$$C = \\alpha \\cdot A + \\beta \\cdot L = (0.05 \\times 45) + (1 \\times 31.25)$$\n$$C = 2.25 + 31.25 = 33.5$$\n问题要求将答案四舍五入到四位有效数字。值 $33.5$ 可以表示为 $33.50$ 以满足此要求。",
            "answer": "$$\\boxed{33.50}$$"
        },
        {
            "introduction": "虽然切分式布局（如练习  所示）易于表示和操作，但其几何结构有一定局限性。为克服这些限制，序列对等非切分式表示法应运而生，它能表示所有可能的布局拓扑。本练习将带您实践如何从一个给定的序列对出发，构建水平和垂直约束图，并最终计算出紧凑的模块布局。",
            "id": "4272827",
            "problem": "考虑电子设计自动化 (EDA) 中一个使用序列对表示的标准非剖分式布局规划问题。给定五个硬矩形模块 $\\{A,B,C,D,E\\}$，其宽度和高度固定（不允许旋转）。所有坐标均以微米为单位，布局坐标系的原点位于左下角。对于任意两个分别具有左侧或下方关系的模块，必须强制执行统一的最小水平间距 $s_{x}$ 和最小垂直间距 $s_{y}$。序列对由有序序列 $\\pi^{+}$ 和 $\\pi^{-}$ 给出，其中 $\\pi^{+}=(C,A,E,B,D)$ 和 $\\pi^{-}=(A,C,B,D,E)$。模块尺寸和间距如下：\n- $w_{A}=30$, $h_{A}=20$；$w_{B}=25$, $h_{B}=35$；$w_{C}=40$, $h_{C}=15$；$w_{D}=20$, $h_{D}=30$；$w_{E}=15$, $h_{E}=25$。\n- $s_{x}=5$, $s_{y}=10$。\n\n从序列对的基本定义、导出的水平和垂直优先级关系，以及将相应约束图构建为有向无环图 (DAG) 出发，完成以下任务：\n1. 推导由序列对所蕴含的左侧和下方关系，并构建水平和垂直约束 DAG。\n2. 在每个 DAG 上使用最长路径计算，并赋予适当的节点权重（水平图使用模块宽度，垂直图使用模块高度，并加上所需间距），计算满足所有优先级约束和间距的每个模块 $i \\in \\{A,B,C,D,E\\}$ 的紧凑布局 $(x_{i},y_{i})$。\n3. 计算轮廓宽度 $W=\\max_{i}(x_{i}+w_{i})$ 和轮廓高度 $H=\\max_{i}(y_{i}+h_{i})$，然后计算总轮廓面积 $A=W \\times H$。\n\n将最终面积 $A$ 以平方微米表示，并四舍五入至四位有效数字，使用科学记数法。最终答案必须是一个实数值。",
            "solution": "我们从非剖分式布局规划的序列对方法的基本定义开始。给定模块集上的一个置换对 $(\\pi^{+},\\pi^{-})$，对于任意两个模块 $i$ 和 $j$：\n- 如果 $i$ 在 $\\pi^{+}$ 和 $\\pi^{-}$ 中都先于 $j$，那么 $i$ 必须放置在 $j$ 的左侧。\n- 如果 $i$ 在 $\\pi^{+}$ 中先于 $j$，而 $j$ 在 $\\pi^{-}$ 中先于 $i$，那么 $i$ 必须放置在 $j$ 的下方。\n\n这些关系导出两个优先级 DAG：一个捕捉左侧关系的水平约束图 $\\mathcal{H}$ 和一个捕捉下方关系的垂直约束图 $\\mathcal{V}$。在紧凑布局中，对于 $\\mathcal{H}$ 中的每条有向边 $i \\rightarrow j$，坐标必须满足 $x_{j} \\ge x_{i} + w_{i} + s_{x}$；对于 $\\mathcal{V}$ 中的每条边 $i \\rightarrow j$，坐标必须满足 $y_{j} \\ge y_{i} + h_{i} + s_{y}$。通过一个以零权重边连接到所有模块的超级源节点，紧凑解可以通过计算每个 DAG 中的最长路径距离得到，其中 $\\mathcal{H}$ 中的每条边 $i \\rightarrow j$ 的权重为 $w_{i} + s_{x}$，而 $\\mathcal{V}$ 中的每条边 $i \\rightarrow j$ 的权重为 $h_{i} + s_{y}$。等效地，可以将节点权重分别视为 $w_{i}$ 或 $h_{i}$，并为每条优先级边加上 $s_{x}$ 或 $s_{y}$ 作为最小分离要求。\n\n我们现在将这些定义应用于给定的序列对 $\\pi^{+}=(C,A,E,B,D)$ 和 $\\pi^{-}=(A,C,B,D,E)$。首先，我们枚举左侧关系，即满足 $i$ 在 $\\pi^{+}$ 和 $\\pi^{-}$ 中都先于 $j$ 的模块对 $(i,j)$。\n\n$\\pi^{+}$ 中的位置是：$C:1$, $A:2$, $E:3$, $B:4$, $D:5$。$\\pi^{-}$ 中的位置是：$A:1$, $C:2$, $B:3$, $D:4$, $E:5$。\n\n检查所有模块对：\n- 对于 $C$，$C$ 在 $\\pi^{+}$ 中先于 $E$，$C$ 在 $\\pi^{-}$ 中也先于 $E$，所以 $C$ 在 $E$ 的左侧。类似地，$C$ 在两个序列中都先于 $B$ 和 $D$，所以 $C$ 在 $B$ 和 $D$ 的左侧。\n- 对于 $A$，$A$ 在两个序列中都先于 $E$、$B$ 和 $D$，所以 $A$ 在 $E$、$B$ 和 $D$ 的左侧。\n- 对于 $E$，它在 $\\pi^{+}$ 中先于 $B$ 和 $D$，但在 $\\pi^{-}$ 中不是，所以没有从 $E$ 出发的左侧关系。\n- 对于 $B$，它在两个序列中都先于 $D$，所以 $B$ 在 $D$ 的左侧。\n- $D$ 没有后继者。\n\n因此，水平约束图 $\\mathcal{H}$ 具有以下边\n$$\nA \\rightarrow E,\\quad A \\rightarrow B,\\quad A \\rightarrow D,\\quad\nC \\rightarrow E,\\quad C \\rightarrow B,\\quad C \\rightarrow D,\\quad\nB \\rightarrow D.\n$$\n$\\mathcal{H}$ 中的每条边 $i \\rightarrow j$ 强制要求 $x_{j} \\ge x_{i} + w_{i} + s_{x}$，其中 $s_{x}=5$。\n\n接下来，我们枚举下方关系，即满足 $i$ 在 $\\pi^{+}$ 中先于 $j$，而 $j$ 在 $\\pi^{-}$ 中先于 $i$ 的模块对 $(i,j)$：\n- 对于 $C$ 和 $A$，$C$ 在 $\\pi^{+}$ 中先于 $A$，而 $A$ 在 $\\pi^{-}$ 中先于 $C$，所以 $C$ 在 $A$ 的下方（在 $\\mathcal{V}$ 中为 $C \\rightarrow A$）。\n- 对于 $E$ 和 $B$，$E$ 在 $\\pi^{+}$ 中先于 $B$，而 $B$ 在 $\\pi^{-}$ 中先于 $E$，所以 $E$ 在 $B$ 的下方（$E \\rightarrow B$）。\n- 对于 $E$ 和 $D$，$E$ 在 $\\pi^{+}$ 中先于 $D$，而 $D$ 在 $\\pi^{-}$ 中先于 $E$，所以 $E$ 在 $D$ 的下方（$E \\rightarrow D$）。\n没有其他模块对满足下方关系条件。\n\n因此，垂直约束图 $\\mathcal{V}$ 具有以下边\n$$\nC \\rightarrow A,\\quad E \\rightarrow B,\\quad E \\rightarrow D,\n$$\n并且每条边 $i \\rightarrow j$ 强制要求 $y_{j} \\ge y_{i} + h_{i} + s_{y}$，其中 $s_{y}=10$。\n\n我们现在通过计算每个 DAG 中的最长路径来计算紧凑坐标。假设一个超级源以零权重边连接到所有模块，并将 $x_{i}$ 和 $y_{i}$ 设置为最长路径距离。\n\n对于 $\\mathcal{H}$，边权重为 $w_{i} + s_{x}$：\n$$\nw_{A}+s_{x}=30+5=35,\\quad w_{B}+s_{x}=25+5=30,\\quad w_{C}+s_{x}=40+5=45,\\quad w_{D}+s_{x}=20+5=25,\\quad w_{E}+s_{x}=15+5=20.\n$$\n具体的边权重是：\n$$\nA \\rightarrow E:35,\\quad A \\rightarrow B:35,\\quad A \\rightarrow D:35,\\\\\nC \\rightarrow E:45,\\quad C \\rightarrow B:45,\\quad C \\rightarrow D:45,\\\\\nB \\rightarrow D:30.\n$$\n在 $\\mathcal{H}$ 中，模块 $A$ 和 $C$ 没有入边，所以 $x_{A}=0$ 且 $x_{C}=0$。那么\n$$\nx_{E}=\\max(x_{A}+35,\\,x_{C}+45)=\\max(35,\\,45)=45,\\\\\nx_{B}=\\max(x_{A}+35,\\,x_{C}+45)=45,\\\\\nx_{D}=\\max(x_{A}+35,\\,x_{C}+45,\\,x_{B}+30)=\\max(35,\\,45,\\,45+30)=75.\n$$\n因此，水平坐标为\n$$\nx_{A}=0,\\quad x_{C}=0,\\quad x_{E}=45,\\quad x_{B}=45,\\quad x_{D}=75.\n$$\n\n对于 $\\mathcal{V}$，边权重为 $h_{i} + s_{y}$：\n$$\nh_{A}+s_{y}=20+10=30,\\quad h_{B}+s_{y}=35+10=45,\\quad h_{C}+s_{y}=15+10=25,\\quad h_{D}+s_{y}=30+10=40,\\quad h_{E}+s_{y}=25+10=35.\n$$\n具体的边权重是：\n$$\nC \\rightarrow A:25,\\quad E \\rightarrow B:35,\\quad E \\rightarrow D:35.\n$$\n在 $\\mathcal{V}$ 中，模块 $C$ 和 $E$ 没有入边，所以 $y_{C}=0$ 且 $y_{E}=0$。那么\n$$\ny_{A}=y_{C}+25=25,\\quad y_{B}=y_{E}+35=35,\\quad y_{D}=y_{E}+35=35.\n$$\n因此，垂直坐标为\n$$\ny_{C}=0,\\quad y_{E}=0,\\quad y_{A}=25,\\quad y_{B}=35,\\quad y_{D}=35.\n$$\n\n我们验证可行性：通过最长路径的构建方法，每个左侧和下方约束都满足了至少为 $s_{x}$ 或 $s_{y}$ 的所需间距。紧凑性源于在具有这些边权重的 DAG 中最长路径距离的最优性，该方法在遵守优先级约束的同时最小化了最大范围。\n\n我们现在计算轮廓宽度 $W$ 和高度 $H$：\n$$\nW=\\max_{i}(x_{i}+w_{i})=\\max\\{x_{A}+w_{A},\\,x_{B}+w_{B},\\,x_{C}+w_{C},\\,x_{D}+w_{D},\\,x_{E}+w_{E}\\} \\\\\n=\\max\\{0+30,\\,45+25,\\,0+40,\\,75+20,\\,45+15\\}=\\max\\{30,\\,70,\\,40,\\,95,\\,60\\}=95.\n$$\n$$\nH=\\max_{i}(y_{i}+h_{i})=\\max\\{y_{A}+h_{A},\\,y_{B}+h_{B},\\,y_{C}+h_{C},\\,y_{D}+h_{D},\\,y_{E}+h_{E}\\} \\\\\n=\\max\\{25+20,\\,35+35,\\,0+15,\\,35+30,\\,0+25\\}=\\max\\{45,\\,70,\\,15,\\,65,\\,25\\}=70.\n$$\n因此，总轮廓面积为\n$$\nA=W \\times H=95 \\times 70=6650.\n$$\n\n用科学记数法表示并四舍五入到四位有效数字，结果是\n$$\nA=6.650 \\times 10^{3}.\n$$",
            "answer": "$$\\boxed{6.650 \\times 10^{3}}$$"
        },
        {
            "introduction": "在掌握了如何根据给定的序列对解码出物理布局（）之后，一个更深层次的挑战是反向操作：如何为一组设计约束编码出合法的序列对。本练习要求您为特定的相对位置约束（例如“模块$A$必须在模块$B$的左侧”）找到一个有效的序列对表示。这项从综合角度出发的实践，将加深您对序列对表示法内在逻辑和表达能力的理解。",
            "id": "4272840",
            "problem": "在电子设计自动化（EDA）的物理设计中，一个非剖分式布局规划（non-slicing floorplan）可以通过一个序列对（sequence pair）来编码。对于一组模块，一个序列对是模块标签上的一个有序排列对 $(\\pi, \\sigma)$，其语义如下：对于任意两个不同的模块 $i$ 和 $j$，如果 $i$ 在 $\\pi$ 和 $\\sigma$ 中都先于 $j$，那么 $i$ 在 $j$ 的左边；如果 $i$ 在 $\\pi$ 中先于 $j$ 而 $j$ 在 $\\sigma$ 中先于 $i$，那么 $i$ 在 $j$ 的下方；如果 $j$ 在 $\\pi$ 中先于 $i$ 而 $i$ 在 $\\sigma$ 中先于 $j$，那么 $i$ 在 $j$ 的上方；如果 $j$ 在 $\\pi$ 和 $\\sigma$ 中都先于 $i$，那么 $i$ 在 $j$ 的右边。这些关系强制模块不重叠，并捕捉了非剖分式布局中允许的顺序约束。\n\n考虑四个硬矩形模块 $\\{A, B, C, D\\}$，其尺寸分别为 $(w_{A}, h_{A}) = (2, 3)$，$(w_{B}, h_{B}) = (1, 2)$，$(w_{C}, h_{C}) = (3, 1)$ 和 $(w_{D}, h_{D}) = (2, 2)$。假设设计者施加了两个必须由非剖分式表示法满足的顺序约束：\n- $A$ 在 $B$ 的左边，\n- $C$ 在 $D$ 的下方。\n\n没有对相对位置施加其他约束。仅使用序列对表示法的基本定义和排列计数的基本原理，完成以下任务：\n1. 构造一个在 $\\{A, B, C, D\\}$ 上的有效序列对 $(\\pi, \\sigma)$，该序列对精确地编码了这两个顺序约束，并解释为什么你给出的特定排列能强制实现 $A$ 在 $B$ 的左边以及 $C$ 在 $D$ 的下方。\n2. 确定在 $\\{A, B, C, D\\}$ 上精确满足这两个顺序约束的序列对 $(\\pi, \\sigma)$ 的总数。在计数时，将 $(\\pi, \\sigma)$ 和 $(\\sigma, \\pi)$ 视为不同的，除非它们作为有序对完全相同。将最终计数表示为一个整数。",
            "solution": "该问题要求我们处理一组四个模块 $\\{A, B, C, D\\}$ 的序列对表示法。我们必须首先构建一个有效的序列对 $(\\pi, \\sigma)$ 来满足两个给定的几何约束，然后确定这类对的总数。模块尺寸 $(w_{i}, h_{i})$ 是为提供背景信息而给出的，但对于此问题的组合计数部分并非必需。\n\n设有序排列对为 $(\\pi, \\sigma)$。我们使用记号 $i \\prec_{\\pi} j$ 来表示模块 $i$ 在排列 $\\pi$ 中先于模块 $j$。两个不同模块 $i$ 和 $j$ 的相对布局规则如下：\n1.  ($i \\prec_{\\pi} j$ 且 $i \\prec_{\\sigma} j$) $\\implies$ $i$ 在 $j$ 的左边。\n2.  ($i \\prec_{\\pi} j$ 且 $j \\prec_{\\sigma} i$) $\\implies$ $i$ 在 $j$ 的下方。\n3.  ($j \\prec_{\\pi} i$ 且 $i \\prec_{\\sigma} j$) $\\implies$ $i$ 在 $j$ 的上方。\n4.  ($j \\prec_{\\pi} i$ 且 $j \\prec_{\\sigma} i$) $\\implies$ $i$ 在 $j$ 的右边。\n\n必须满足的两个特定顺序约束是：\n- 约束1：$A$ 在 $B$ 的左边。\n- 约束2：$C$ 在 $D$ 的下方。\n\n利用这些定义，我们可以将这些几何约束转换为对排列 $\\pi$ 和 $\\sigma$ 的约束。\n- 对于“$A$ 在 $B$ 的左边”，我们必须满足第一条规则，其中 $i=A$ 且 $j=B$。这意味着我们必须有 $A \\prec_{\\pi} B$ 和 $A \\prec_{\\sigma} B$。\n- 对于“$C$ 在 $D$ 的下方”，我们必须满足第二条规则，其中 $i=C$ 且 $j=D$。这意味着我们必须有 $C \\prec_{\\pi} D$ 和 $D \\prec_{\\sigma} C$。\n\n因此，该问题分为两部分：构建一个有效对和枚举所有有效对。\n\n第1部分：构建一个有效的序列对 $(\\pi, \\sigma)$。\n\n我们需要找到一个 $\\{A, B, C, D\\}$ 的排列 $\\pi$，它同时满足 $A \\prec_{\\pi} B$ 和 $C \\prec_{\\pi} D$。我们还需要找到一个 $\\{A, B, C, D\\}$ 的排列 $\\sigma$，它同时满足 $A \\prec_{\\sigma} B$ 和 $D \\prec_{\\sigma} C$。\n\n对于 $\\pi$：我们需要 $A$ 出现在 $B$ 之前，并且 $C$ 出现在 $D$ 之前。这种排列的一个例子是 $\\pi = (A, C, D, B)$。在这个排列中，$A$ 在第一个位置，$B$ 在第四个位置，所以 $A \\prec_{\\pi} B$。$C$ 在第二个位置，$D$ 在第三个位置，所以 $C \\prec_{\\pi} D$。两个条件都满足。\n\n对于 $\\sigma$：我们需要 $A$ 出现在 $B$ 之前，并且 $D$ 出现在 $C$ 之前。这种排列的一个例子是 $\\sigma = (A, D, C, B)$。在这个排列中，$A$ 在第一个位置，$B$ 在第四个位置，所以 $A \\prec_{\\sigma} B$。$D$ 在第二个位置，$C$ 在第三个位置，所以 $D \\prec_{\\sigma} C$。两个条件都满足。\n\n因此，一个有效的序列对是 $(\\pi, \\sigma) = ((A, C, D, B), (A, D, C, B))$。\n\n理由：\n- 对于模块对 $\\{A, B\\}$，我们有 $A \\prec_{\\pi} B$（来自 $\\pi=(A,C,D,B)$）和 $A \\prec_{\\sigma} B$（来自 $\\sigma=(A,D,C,B)$）。根据规则1，这正确地编码了约束“$A$ 在 $B$ 的左边”。\n- 对于模块对 $\\{C, D\\}$，我们有 $C \\prec_{\\pi} D$（来自 $\\pi=(A,C,D,B)$）和 $D \\prec_{\\sigma} C$（来自 $\\sigma=(A,D,C,B)$）。根据规则2，这正确地编码了约束“$C$ 在 $D$ 的下方”。\n\n第2部分：确定不同序列对的总数。\n\n有效序列对 $(\\pi, \\sigma)$ 的总数是有效排列 $\\pi$ 的数量与有效排列 $\\sigma$ 的数量的乘积，因为 $\\pi$ 和 $\\sigma$ 的选择是独立的。\n设 $N_{\\pi}$ 是满足对 $\\pi$ 的约束的排列数量。\n设 $N_{\\sigma}$ 是满足对 $\\sigma$ 的约束的排列数量。\n总对数为 $N = N_{\\pi} \\times N_{\\sigma}$。\n\n计算 $N_{\\pi}$：\n我们需要计算 $\\{A, B, C, D\\}$ 这4个模块的排列中，同时满足 $A \\prec_{\\pi} B$ 和 $C \\prec_{\\pi} D$ 的排列数量。\n4个不同项的总排列数为 $4! = 24$。\n约束 $A \\prec_{\\pi} B$ 固定了 $A$ 和 $B$ 的相对顺序。对于排列集中的任意一对元素，恰好一半的排列中一个元素在另一个之前。所以，满足 $A \\prec_{\\pi} B$ 的排列数量为 $\\frac{4!}{2} = 12$。\n两个约束 $A \\prec_{\\pi} B$ 和 $C \\prec_{\\pi} D$ 作用于不相交的模块集合，即 $\\{A, B\\}$ 和 $\\{C, D\\}$。因此，这两个条件是独立的。\n满足 $A \\prec_{\\pi} B$ 的排列所占的比例是 $\\frac{1}{2}$。\n满足 $C \\prec_{\\pi} D$ 的排列所占的比例是 $\\frac{1}{2}$。\n同时满足这两个独立条件的排列所占的比例是它们比例的乘积：$\\frac{1}{2} \\times \\frac{1}{2} = \\frac{1}{4}$。\n所以，$\\pi$ 的有效排列数量为 $N_{\\pi} = 4! \\times \\frac{1}{4} = 24 \\times \\frac{1}{4} = 6$。\n\n或者，我们可以使用构造性的组合论证。排列中有4个位置。我们必须放置 $A, B, C, D$。\n首先，为模块 $A$ 和 $B$ 选择2个位置。这可以通过 $\\binom{4}{2}$ 种方式完成。一旦位置被选定，为了满足 $A \\prec_{\\pi} B$，$A$ 必须放在这两个位置中的第一个，$B$ 必须放在第二个。所以只有1种放置方式。\n剩下的2个位置必须由 $C$ 和 $D$ 填充。为了满足 $C \\prec_{\\pi} D$，$C$ 必须放在剩余位置的第一个，$D$ 必须放在第二个。这也只有1种方式。\n因此，总方法数就是为对 $\\{A, B\\}$ 选择位置的方法数，即 $\\binom{4}{2} = \\frac{4 \\times 3}{2} = 6$。\n所以，$N_{\\pi} = 6$。\n\n计算 $N_{\\sigma}$：\n我们需要计算 $\\{A, B, C, D\\}$ 的排列中，同时满足 $A \\prec_{\\sigma} B$ 和 $D \\prec_{\\sigma} C$ 的排列数量。\n这个问题与对 $\\pi$ 的问题结构完全相同。我们有两对模块 $\\{A, B\\}$ 和 $\\{D, C\\}$，它们的相对顺序是固定的。这两对是不相交的。\n使用相同的逻辑，$\\sigma$ 的有效排列数量也是 $N_{\\sigma} = 4! \\times \\frac{1}{4} = 6$，或者等价地 $\\binom{4}{2} = 6$。\n\n有效序列对的总数：\n满足给定约束的不同对 $(\\pi, \\sigma)$ 的总数是 $\\pi$ 的选择数与 $\\sigma$ 的选择数的乘积。\n$N = N_{\\pi} \\times N_{\\sigma} = 6 \\times 6 = 36$。",
            "answer": "$$\n\\boxed{36}\n$$"
        }
    ]
}
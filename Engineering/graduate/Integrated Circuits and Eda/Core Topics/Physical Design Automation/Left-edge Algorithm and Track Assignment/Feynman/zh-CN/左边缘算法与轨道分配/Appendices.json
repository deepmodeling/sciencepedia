{
    "hands_on_practices": [
        {
            "introduction": "在解决任何通道布线问题时，首要步骤是将物理引脚布局抽象为更易于处理的数学模型。本练习将指导您为每个网络创建水平区间，并计算通道密度。掌握此过程有助于您理解通道的水平布线复杂度，并确定所需布线资源的理论下限 。",
            "id": "4279143",
            "problem": "考虑一个来自电子设计自动化 (EDA) 领域的双层通道布线实例，其中水平轨道被分配用于在一组由 $c \\in \\{1, 2, \\dots, 17\\}$ 索引的等间距列上，布线连接顶行和底行之间的网络。设网络集合为 $\\{n_1, n_2, n_3, n_4, n_5, n_6, n_7, n_8\\}$。一个网络可能在顶行或底行有多个引脚。对于每列 $c$，顶行引脚分配表示为 $T(c)$，底行引脚分配表示为 $B(c)$。约定如果某一行在列 $c$ 处没有引脚，则该分配为空。\n\n引脚分配如下：\n- 顶行：$T(1)=n_1$, $T(2)=n_2$, $T(3)=n_3$, $T(4)$ 空, $T(5)=n_4$, $T(6)=n_2$, $T(7)=n_5$, $T(8)=n_6$, $T(9)$ 空, $T(10)=n_7$, $T(11)=n_3$, $T(12)=n_8$, $T(13)$ 空, $T(14)=n_5$, $T(15)=n_1$, $T(16)=n_4$, $T(17)$ 空。\n- 底行：$B(1)$ 空, $B(2)=n_5$, $B(3)=n_1$, $B(4)=n_6$, $B(5)$ 空, $B(6)=n_7$, $B(7)$ 空, $B(8)=n_2$, $B(9)=n_4$, $B(10)$ 空, $B(11)=n_8$, $B(12)=n_3$, $B(13)=n_5$, $B(14)$ 空, $B(15)=n_6$, $B(16)=n_2$, $B(17)=n_7$。\n\n使用的基本定义：\n- 对于每个网络 $n_i$，将其水平区间定义为 $[l_i, r_i]$，其中 $l_i$ 是 $n_i$ 的任意引脚出现的最小列索引（顶行或底行），而 $r_i$ 是这样的最大列索引。\n- 如果 $l_j \\leq l_i$ 且 $r_i \\leq r_j$，则两个区间 $[l_i, r_i]$ 和 $[l_j, r_j]$ 是嵌套的，意味着 $[l_i, r_i]$ 完全包含在 $[l_j, r_j]$ 中。如果 $r_i  l_j$ 或 $r_j  l_i$，则它们是不相交的。\n- 通道密度 $D$ 定义为 $D = \\max_{c \\in \\{1, \\dots, 17\\}} \\delta(c)$，其中 $\\delta(c)$ 是其区间满足 $l_i \\leq c \\leq r_i$ 的网络 $n_i$ 的数量。\n\n任务：\n1. 使用给定的引脚分配，计算每个网络 $n_i$ 的区间 $[l_i, r_i]$。\n2. 使用计算出的区间，验证是否有任何区间是嵌套的或不相交的，并根据上述定义进行分类。\n3. 计算此实例的通道密度 $D$。将最终答案报告为 $D$ 的单个值。无需四舍五入。",
            "solution": "问题陈述已经过验证，被认为是有效的。这是一个来自电子设计自动化 (EDA) 领域的、提法恰当且有科学依据的问题，为求解提供了所有必要的信息和定义。\n\n求解过程遵循问题陈述中概述的三个任务进行。\n\n首先，我们计算每个网络 $n_i$ 的水平区间 $[l_i, r_i]$。该区间由网络有引脚的最小列索引 $l_i$ 和最大列索引 $r_i$ 定义。对于列 $c \\in \\{1, 2, \\dots, 17\\}$，给出了顶行 $T(c)$ 和底行 $B(c)$ 的引脚分配。\n\n对于网络 $n_1$：引脚位于 $T(1)$、$B(3)$ 和 $T(15)$。列索引集合为 $\\{1, 3, 15\\}$。因此，$l_1 = \\min\\{1, 3, 15\\} = 1$ 且 $r_1 = \\max\\{1, 3, 15\\} = 15$。区间为 $[1, 15]$。\n\n对于网络 $n_2$：引脚位于 $T(2)$、$T(6)$、$B(8)$ 和 $B(16)$。列索引集合为 $\\{2, 6, 8, 16\\}$。因此，$l_2 = \\min\\{2, 6, 8, 16\\} = 2$ 且 $r_2 = \\max\\{2, 6, 8, 16\\} = 16$。区间为 $[2, 16]$。\n\n对于网络 $n_3$：引脚位于 $T(3)$、$T(11)$ 和 $B(12)$。列索引集合为 $\\{3, 11, 12\\}$。因此，$l_3 = \\min\\{3, 11, 12\\} = 3$ 且 $r_3 = \\max\\{3, 11, 12\\} = 12$。区间为 $[3, 12]$。\n\n对于网络 $n_4$：引脚位于 $T(5)$、$B(9)$ 和 $T(16)$。列索引集合为 $\\{5, 9, 16\\}$。因此，$l_4 = \\min\\{5, 9, 16\\} = 5$ 且 $r_4 = \\max\\{5, 9, 16\\} = 16$。区间为 $[5, 16]$。\n\n对于网络 $n_5$：引脚位于 $B(2)$、$T(7)$、$B(13)$ 和 $T(14)$。列索引集合为 $\\{2, 7, 13, 14\\}$。因此，$l_5 = \\min\\{2, 7, 13, 14\\} = 2$ 且 $r_5 = \\max\\{2, 7, 13, 14\\} = 14$。区间为 $[2, 14]$。\n\n对于网络 $n_6$：引脚位于 $B(4)$、$T(8)$ 和 $B(15)$。列索引集合为 $\\{4, 8, 15\\}$。因此，$l_6 = \\min\\{4, 8, 15\\} = 4$ 且 $r_6 = \\max\\{4, 8, 15\\} = 15$。区间为 $[4, 15]$。\n\n对于网络 $n_7$：引脚位于 $B(6)$、$T(10)$ 和 $B(17)$。列索引集合为 $\\{6, 10, 17\\}$。因此，$l_7 = \\min\\{6, 10, 17\\} = 6$ 且 $r_7 = \\max\\{6, 10, 17\\} = 17$。区间为 $[6, 17]$。\n\n对于网络 $n_8$：引脚位于 $B(11)$ 和 $T(12)$。列索引集合为 $\\{11, 12\\}$。因此，$l_8 = \\min\\{11, 12\\} = 11$ 且 $r_8 = \\max\\{11, 12\\} = 12$。区间为 $[11, 12]$。\n\n区间总结：\n$n_1: [1, 15]$\n$n_2: [2, 16]$\n$n_3: [3, 12]$\n$n_4: [5, 16]$\n$n_5: [2, 14]$\n$n_6: [4, 15]$\n$n_7: [6, 17]$\n$n_8: [11, 12]$\n\n第二，我们分析这些区间之间的关系。\n如果两个区间 $[l_i, r_i]$ 和 $[l_j, r_j]$ 的交集为空，即 $r_i  l_j$ 或 $r_j  l_i$，则它们是不相交的。我们观察到，对于每个区间 $[l_i, r_i]$，范围 $[11, 12]$ 都是其子集（或在 $n_8$ 的情况下是区间本身）。由于所有区间都包含第 11 列和第 12 列，因此没有两个区间是不相交的。\n\n如果一个区间完全包含在另一个区间内，则这两个区间是嵌套的。我们可以识别出几个嵌套关系。例如，$n_8$ 的区间 $[11, 12]$ 嵌套在 $n_3$ 的区间 $[3, 12]$ 内，因为 $l_3 = 3 \\leq l_8 = 11$ 且 $r_8 = 12 \\leq r_3 = 12$。进而，$n_3$ 的区间 $[3, 12]$ 嵌套在 $n_5$ 的区间 $[2, 14]$ 内，因为 $l_5=2 \\leq l_3=3$ 且 $r_3=12 \\leq r_5=14$。许多其他区间对仅仅是重叠而非嵌套，例如 $[1, 15]$ 和 $[2, 16]$。\n\n第三，我们计算通道密度 $D$。通道密度定义为 $D = \\max_{c \\in \\{1, \\dots, 17\\}} \\delta(c)$，其中 $\\delta(c)$ 是列 $c$ 处的局部密度。值 $\\delta(c)$ 是其水平区间 $[l_i, r_i]$ 包含列 $c$（即 $l_i \\leq c \\leq r_i$）的网络数量。我们可以计算从 1 到 17 的每一列 $c$ 的 $\\delta(c)$。\n\n$\\delta(1) = 1$ (网络 $n_1$)\n$\\delta(2) = 3$ (网络 $n_1, n_2, n_5$)\n$\\delta(3) = 4$ (网络 $n_1, n_2, n_3, n_5$)\n$\\delta(4) = 5$ (网络 $n_1, n_2, n_3, n_5, n_6$)\n$\\delta(5) = 6$ (网络 $n_1, n_2, n_3, n_4, n_5, n_6$)\n$\\delta(6) = 7$ (网络 $n_1, n_2, n_3, n_4, n_5, n_6, n_7$)\n$\\delta(7) = 7$ (与 $c=6$ 时相同)\n$\\delta(8) = 7$ (与 $c=6$ 时相同)\n$\\delta(9) = 7$ (与 $c=6$ 时相同)\n$\\delta(10) = 7$ (与 $c=6$ 时相同)\n$\\delta(11) = 8$ (网络 $n_1, n_2, n_3, n_4, n_5, n_6, n_7, n_8$)\n$\\delta(12) = 8$ (与 $c=11$ 时相同；$n_3$ 和 $n_8$ 在此结束)\n$\\delta(13) = 6$ (网络 $n_1, n_2, n_4, n_5, n_6, n_7$)\n$\\delta(14) = 6$ (与 $c=13$ 时相同；$n_5$ 在此结束)\n$\\delta(15) = 5$ (网络 $n_1, n_2, n_4, n_6, n_7$；$n_1$ 和 $n_6$ 在此结束)\n$\\delta(16) = 3$ (网络 $n_2, n_4, n_7$；$n_2$ 和 $n_4$ 在此结束)\n$\\delta(17) = 1$ (网络 $n_7$；$n_7$ 在此结束)\n\n局部密度 $\\delta(c)$ 为 $\\{1, 3, 4, 5, 6, 7, 7, 7, 7, 7, 8, 8, 6, 6, 5, 3, 1\\}$。\n通道密度 $D$ 是这些值的最大值。\n$$D = \\max\\{1, 3, 4, 5, 6, 7, 7, 7, 7, 7, 8, 8, 6, 6, 5, 3, 1\\} = 8$$\n最大密度出现在列 $c=11$ 和 $c=12$ 处。\n因此，通道密度 $D$ 为 $8$。该值代表了在没有垂直约束的情况下布线此通道实例所需的水平轨道的理论下界。",
            "answer": "$$\\boxed{8}$$"
        },
        {
            "introduction": "虽然通道密度提供了一个有用的下限，但它只捕捉了水平方向上的冲突。本练习通过一个精心设计的反例，展示了垂直约束如何成为决定通道高度的主导因素 。理解这个场景将揭示仅基于密度的贪心策略的局限性，并强调了在布线算法中整合垂直约束图 (Vertical Constraint Graph, VCG) 的必要性。",
            "id": "4279144",
            "problem": "在电子设计自动化（EDA）中使用的双层曼哈顿通道布线模型中，考虑无拐腿（dogleg）的约束左边界模型，这意味着每个信号线必须在其最左和最右引脚列之间的跨度内，精确地占据一个水平轨道。现有 $W=8$ 列，由整数 $1$ 到 $8$ 索引，以及三个多端点信号线 $A$、$B$ 和 $C$，其顶行和底行引脚布局如下（不存在其他引脚）：\n\n- 顶行引脚：第 $1$ 列有 $A$，第 $2$ 列有 $B$，第 $3$ 列有 $A$，第 $7$ 列有 $C$。\n- 底行引脚：第 $3$ 列有 $B$，第 $6$ 列有 $C$，第 $7$ 列有 $A$，第 $8$ 列有 $A$。\n\n使用以下基本定义来分析此实例：\n\n- 信号线 $n$ 的跨度，记作 $[\\ell(n), r(n)]$，是指从其最左端到最右端引脚列的区间。\n- 通道密度 $D$ 是在所有严格位于整数列之间的垂直切割 $x$ 上，严格覆盖 $x$ 的不同信号线跨度数量的最大值。\n- 当信号线 $X$ 的顶行引脚和信号线 $Y$ 的底行引脚出现在同一列 $j$ 时，就会在该列产生一个垂直约束，要求在该列 $X$ 必须被放置在严格高于 $Y$ 的轨道上。在无拐腿模型中，这些关系的传递闭包必须在整个通道中得到遵守。\n\n仅从这些定义出发：\n\n1. 确定 $n \\in \\{A,B,C\\}$ 中每个信号线的跨度 $[\\ell(n), r(n)]$，并计算此实例的通道密度 $D$。\n2. 在无拐腿模型中，根据垂直约束，确定完成合法布线所需的最小轨道数 $H$，并证明其最优性。\n3. 通过计算乘法比率 $G = H / D$（以精确的最简分数形式表示），量化密度下界与真实最小高度之间的差距。\n\n提供 $G$ 的精确值作为最终答案。无需单位。不要四舍五入；请以最简分数形式表示您的答案。",
            "solution": "该问题是电子设计自动化（EDA）中约束通道布线的一个明确定义的实例。验证过程确认了该问题是自洽的，科学上基于 VLSI 设计的原理，并使用了标准的、客观的定义。所有必要的数据都已提供，没有矛盾或歧义。因此，我们可以进行形式化的求解。\n\n根据问题陈述的要求，求解过程分三步进行。\n\n首先，我们确定每个信号线的跨度和通道密度。一个信号线 $n$ 的跨度，记为 $[\\ell(n), r(n)]$，是由其最左和最右引脚列索引定义的闭区间。\n\n三个信号线 $A$、$B$ 和 $C$ 的引脚位置如下：\n- 信号线 $A$：引脚位于第 $1, 3, 7, 8$ 列。最左引脚在第 $1$ 列，最右引脚在第 $8$ 列。因此，信号线 $A$ 的跨度为 $[\\ell(A), r(A)] = [1, 8]$。\n- 信号线 $B$：引脚位于第 $2, 3$ 列。最左引脚在第 $2$ 列，最右引脚在第 $3$ 列。因此，信号线 $B$ 的跨度为 $[\\ell(B), r(B)] = [2, 3]$。\n- 信号线 $C$：引脚位于第 $6, 7$ 列。最左引脚在第 $6$ 列，最右引脚在第 $7$ 列。因此，信号线 $C$ 的跨度为 $[\\ell(C), r(C)] = [6, 7]$。\n\n接下来，我们计算通道密度 $D$。通道密度是在相邻整数列之间的任何垂直切割 $x$ 上，严格覆盖该切割的信号线跨度的最大数量。如果 $\\ell(n)  x  r(n)$，则跨度 $[\\ell(n), r(n)]$ 严格覆盖 $x$。垂直切割位于 $x \\in \\{1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5\\}$。我们计算每个切割处的局部密度：\n- 在 $x=1.5$ 处的切割：只有信号线 $A$ 的跨度 $[1, 8]$ 满足 $1  1.5  8$。局部密度为 $1$。\n- 在 $x=2.5$ 处的切割：信号线 $A$（$1  2.5  8$）和信号线 $B$（$2  2.5  3$）覆盖此切割。局部密度为 $2$。\n- 在 $x=3.5$ 处的切割：只有信号线 $A$（$1  3.5  8$）覆盖此切割。信号线 $B$ 的跨度为 $[2, 3]$，且 $r(B)=3$ 不大于 $3.5$。局部密度为 $1$。\n- 在 $x=4.5$ 处的切割：只有信号线 $A$（$1  4.5  8$）覆盖此切割。局部密度为 $1$。\n- 在 $x=5.5$ 处的切割：只有信号线 $A$（$1  5.5  8$）覆盖此切割。局部密度为 $1$。\n- 在 $x=6.5$ 处的切割：信号线 $A$（$1  6.5  8$）和信号线 $C$（$6  6.5  7$）覆盖此切割。局部密度为 $2$。\n- 在 $x=7.5$ 处的切割：只有信号线 $A$（$1  7.5  8$）覆盖此切割。信号线 $C$ 的跨度为 $[6, 7]$，且 $r(C)=7$ 不大于 $7.5$。局部密度为 $1$。\n\n这些局部密度的最大值为 $2$。因此，通道密度为 $D=2$。\n\n其次，我们确定合法布线所需的最小轨道数 $H$。这个数量由两个下界决定：通道密度 $D$ 和垂直约束图（VCG）中最长路径的长度 $L$。最小轨道数是 $H = \\max(D, L)$。\n\n如果存在某一列 $j$，信号线 $X$ 在该列有顶行引脚，而信号线 $Y$ 有底行引脚，则存在从信号线 $X$到信号线 $Y$ 的垂直约束（记为 $X \\rightarrow Y$）。这要求信号线 $X$ 必须被放置在物理上高于信号线 $Y$ 的轨道上。\n- 在第 $j=3$ 列：信号线 $A$ 有顶行引脚，信号线 $B$ 有底行引脚。这建立了 $A$ 必须在 $B$ 之上的约束，我们在 VCG 中将其表示为一条有向边 $A \\rightarrow B$。\n- 在第 $j=7$ 列：信号线 $C$ 有顶行引脚，信号线 $A$ 有底行引脚。这建立了 $C$ 必须在 $A$ 之上的约束，表示为边 $C \\rightarrow A$。\n\n没有其他列施加垂直约束。VCG 由节点 $\\{A, B, C\\}$ 和有向边 $\\{(A, B), (C, A)\\}$ 组成。这些约束必须传递性地满足。这些边形成一个链：$C \\rightarrow A \\rightarrow B$。这表示信号线 $C$ 必须在信号线 $A$ 之上，而信号线 $A$ 又必须在信号线 $B$ 之上。\n\nVCG 中的最长路径是 $C \\rightarrow A \\rightarrow B$。此路径的长度定义为其包含的不同信号线（节点）的数量，即 $L=3$。这意味着至少需要 $3$ 个不同的轨道来满足垂直排序的要求。\n\n最小轨道数 $H$ 必须足以满足水平（密度）和垂直（约束图）两方面的要求。因此，$H$ 是两个下界的最大值：\n$$H = \\max(D, L) = \\max(2, 3) = 3$$\n$H=3$ 的最优性是合理的，因为 $D$ 和 $L$ 代表了轨道使用的基本下界。由于 VCG 是无环的，因此总能实现达到此下界的布线。因此，所需的最小轨道数是 $H=3$。\n\n第三，我们计算乘法比率 $G = H/D$。使用上面推导出的值：\n$$H = 3$$\n$$D = 2$$\n该比率为：\n$$G = \\frac{H}{D} = \\frac{3}{2}$$\n这个值量化了基于密度的下界与真实最小轨道数之间的差距，在本例中，后者由垂直约束链的长度决定。",
            "answer": "$$\\boxed{\\frac{3}{2}}$$"
        },
        {
            "introduction": "在分别理解了水平区间和垂直约束之后，是时候将它们结合起来了。这个综合性练习将要求您应用完整的约束左边缘算法来解决一个非平凡的布线实例 。通过从头至尾解决这个问题——推导区间、构建垂直约束图 (VCG) 并模拟逐轨道贪心放置过程——您将巩固对算法如何平衡水平和垂直约束以生成有效布线方案的理解。",
            "id": "4279171",
            "problem": "考虑电子设计自动化（EDA）中的通道布线问题。一个通道包含 $14$ 个有序的列，标记为 $1$ 到 $14$，其顶部和底部两行带有属于各个网络的引脚。一个网络由其在通道中的所有引脚定义；其水平连线将跨越从其最左侧引脚所在列到最右侧引脚所在列的区间。布线采用无“狗腿”弯折（即无中间垂直拐点）的约束左边界算法，每个网络使用一条水平连线，在任何给定的水平列上每条轨道只能容纳一个网络，并遵循由上-下引脚对产生的垂直约束顺序。轨道从上到下按递增顺序编号。若一个垂直约束要求在某一列将网络 $A$ 置于网络 $B$ 之上，则网络 $A$ 所在的轨道必须严格位于网络 $B$ 所在的轨道之上。同一轨道上的水平连线不得重叠；也就是说，对于同一轨道上的区间 $[l_i,r_i]$ 和 $[l_j,r_j]$，如果网络 $i$ 在网络 $j$ 之前被放置，则必须满足 $l_j > r_i$。约束左边界算法的执行过程如下：重复选择所有没有未完成的垂直前驱的网络，按其左边界进行排序，并用不重叠的区间贪婪地填充当前轨道；然后从垂直约束图中移除已放置的网络，并转到下一条轨道继续该过程，直到所有网络都完成放置。\n\n给定通道上的引脚布局如下：\n\n- 按列分布的顶部引脚：$1:N_1$, $2:N_2$, $3:N_3$, $4:N_1$, $5:N_4$, $6:N_2$, $7:N_5$, $8:N_3$, $9:N_6$, $10:N_4$, $11:N_7$, $12:N_5$, $13:N_6$, $14:N_7$。\n- 按列分布的底部引脚：$1:N_3$, $2:N_4$, $3:N_5$, $4:N_6$, $5:N_6$, $6:N_3$, $7:N_6$, $8:N_4$, $9:N_7$, $10:N_7$, $11:\\varnothing$, $12:N_7$, $13:N_7$, $14:\\varnothing$，其中 $\\varnothing$ 表示没有引脚。\n\n任务：\n\n- 根据每个网络的引脚，推导出其区间 $[l_k,r_k]$，其中 $l_k$ 是包含网络 $N_k$ 引脚的最小列索引，$r_k$ 是包含网络 $N_k$ 引脚的最大列索引。\n- 构建垂直约束图（VCG）：在每个同时具有顶部和底部引脚的列，从顶部行的网络向底部行的网络添加一条有向边；对于只有一侧有引脚或另一侧为 $\\varnothing$ 的列，不添加任何边。\n- 应用上述定义的约束左边界算法将网络分配到轨道，过程中需同时满足轨道上的不重叠规则和VCG的优先约束。\n\n报告最终的通道高度，其定义为此过程所使用的轨道总数。请将最终答案表示为单个整数。无需四舍五入，最终报告的值中不应包含任何单位。",
            "solution": "用户希望使用约束左边界算法解决一个通道布线问题。\n\n### 问题验证\n\n**步骤1：提取给定信息**\n- **通道几何结构**：一个包含 $14$ 列的通道，标记为 $1$ 到 $14$。\n- **引脚布局**：\n  - 顶行：$1:N_1$, $2:N_2$, $3:N_3$, $4:N_1$, $5:N_4$, $6:N_2$, $7:N_5$, $8:N_3$, $9:N_6$, $10:N_4$, $11:N_7$, $12:N_5$, $13:N_6$, $14:N_7$。\n  - 底行：$1:N_3$, $2:N_4$, $3:N_5$, $4:N_6$, $5:N_6$, $6:N_3$, $7:N_6$, $8:N_4$, $9:N_7$, $10:N_7$, $11:\\varnothing$, $12:N_7$, $13:N_7$, $14:\\varnothing$。\n- **网络区间定义**：对于每个网络 $N_k$，其区间为 $[l_k, r_k]$，其中 $l_k$ 和 $r_k$ 分别是其引脚的最小和最大列索引。\n- **垂直约束图（VCG）构建**：如果在同一列中，$N_{top}$ 位于顶行，$N_{bottom}$ 位于底行，则添加一条从网络 $N_{top}$ 到网络 $N_{bottom}$ 的有向边。\n- **水平约束**：同一轨道上的网络连线不得重叠。如果区间 $[l_i, r_i]$ 已放置在某轨道上，下一个区间 $[l_j, r_j]$ 只有在 $l_j > r_i$ 的情况下才能放置在同一轨道上。\n- **约束左边界算法**：\n  1. 识别所有没有未放置的垂直前驱的未放置网络。\n  2. 按左边界坐标 $l_k$ 的升序对这些候选网络进行排序。\n  3. 遵守水平不重叠约束，将排序后的候选网络贪婪地放置到当前轨道上。\n  4. 将当前轨道上已放置的网络标记为“已放置”。\n  5. 移动到下一个轨道，从步骤1开始重复，直到所有网络都已放置。\n- **目标**：求所用轨道的总数，即通道高度。\n\n**步骤2：使用提取的信息进行验证**\n这个问题具有科学依据，是超大规模集成电路（VLSI）芯片设计的电子设计自动化（EDA）领域一个标准的、众所周知的问题。所用术语、约束和算法都是标准且明确定义的。问题是适定的，因为数据是完整和自洽的，且算法是确定性的，会导向一个唯一的解。语言客观而精确。未发现任何缺陷。\n\n**步骤3：结论与行动**\n问题有效。将提供完整解答。\n\n### 解题过程\n\n解题过程按要求分三个阶段进行：推导网络区间、构建垂直约束图和应用布线算法。\n\n**1. 推导网络区间**\n\n首先，我们确定唯一的网络集合为 $\\{N_1, N_2, N_3, N_4, N_5, N_6, N_7\\}$。对于每个网络 $N_k$，我们找到其在顶行和底行所有引脚的最小 ($l_k$) 和最大 ($r_k$) 列索引，以定义其水平跨度 $[l_k, r_k]$。\n\n-   **网络 $N_1$**：引脚位于第 $1, 4$ 列。区间：$[1, 4]$。\n-   **网络 $N_2$**：引脚位于第 $2, 6$ 列。区间：$[2, 6]$。\n-   **网络 $N_3$**：引脚位于第 $1, 3, 6, 8$ 列。区间：$[1, 8]$。\n-   **网络 $N_4$**：引脚位于第 $2, 5, 8, 10$ 列。区间：$[2, 10]$。\n-   **网络 $N_5$**：引脚位于第 $3, 7, 12$ 列。区间：$[3, 12]$。\n-   **网络 $N_6$**：引脚位于第 $4, 5, 7, 9, 13$ 列。区间：$[4, 13]$。\n-   **网络 $N_7$**：引脚位于第 $9, 10, 11, 12, 13, 14$ 列。区间：$[9, 14]$。\n\n**网络区间总结：**\n-   $N_1: [1, 4]$\n-   $N_2: [2, 6]$\n-   $N_3: [1, 8]$\n-   $N_4: [2, 10]$\n-   $N_5: [3, 12]$\n-   $N_6: [4, 13]$\n-   $N_7: [9, 14]$\n\n**2. 构建垂直约束图（VCG）**\n\n如果在同一列中，网络 $N_A$ 的一个引脚在顶行，而网络 $N_B$ 的一个引脚在底行，则创建一条有向边 $N_A \\to N_B$。此约束意味着 $N_A$ 必须放置在比 $N_B$ 索引更小的轨道上（即物理上位于 $N_B$ 上方）。\n\n-   第 $1$ 列：$N_1$（顶），$N_3$（底）$\\implies N_1 \\to N_3$。\n-   第 $2$ 列：$N_2$（顶），$N_4$（底）$\\implies N_2 \\to N_4$。\n-   第 $3$ 列：$N_3$（顶），$N_5$（底）$\\implies N_3 \\to N_5$。\n-   第 $4$ 列：$N_1$（顶），$N_6$（底）$\\implies N_1 \\to N_6$。\n-   第 $5$ 列：$N_4$（顶），$N_6$（底）$\\implies N_4 \\to N_6$。\n-   第 $6$ 列：$N_2$（顶），$N_3$（底）$\\implies N_2 \\to N_3$。\n-   第 $7$ 列：$N_5$（顶），$N_6$（底）$\\implies N_5 \\to N_6$。\n-   第 $8$ 列：$N_3$（顶），$N_4$（底）$\\implies N_3 \\to N_4$。\n-   第 $9$ 列：$N_6$（顶），$N_7$（底）$\\implies N_6 \\to N_7$。\n-   第 $10$ 列：$N_4$（顶），$N_7$（底）$\\implies N_4 \\to N_7$。\n-   第 $12$ 列：$N_5$（顶），$N_7$（底）$\\implies N_5 \\to N_7$。\n-   第 $13$ 列：$N_6$（顶），$N_7$（底）（这是一个冗余约束）。\n\n每个网络的前驱集合为：\n-   前驱($N_1$): $\\emptyset$\n-   前驱($N_2$): $\\emptyset$\n-   前驱($N_3$): $\\{N_1, N_2\\}$\n-   前驱($N_4$): $\\{N_2, N_3\\}$\n-   前驱($N_5$): $\\{N_3\\}$\n-   前驱($N_6$): $\\{N_1, N_4, N_5\\}$\n-   前驱($N_7$): $\\{N_4, N_5, N_6\\}$\n\n**3. 应用约束左边界算法**\n\n我们从轨道 $1$ 开始，将网络分配到各个轨道。设 $P$ 为已放置网络的集合，初始为空。\n\n**轨道 1：**\n-   **候选网络**：没有未放置前驱的未放置网络。由于 $P=\\emptyset$，这些是在VCG中没有前驱的网络：$\\{N_1, N_2\\}$。\n-   **排序**：按左边界排序：$N_1$ ($l_1=1$)，$N_2$ ($l_2=2$)。排序后的列表为 $(N_1, N_2)$。\n-   **放置**：设 `last_r` 为轨道上已使用的最右侧坐标，初始化为 $0$。\n    1.  放置 $N_1$（区间 $[1, 4]$），因为 $l_1=1 > 0$。更新 `last_r` 为 $4$。\n    2.  考虑 $N_2$（区间 $[2, 6]$）。其左边界 $l_2=2$ 不大于 `last_r`$=4$。$N_2$ 无法放置。\n-   **结果**：轨道 $1$ 包含 $\\{N_1\\}$。$P = \\{N_1\\}$。\n\n**轨道 2：**\n-   **候选网络**：前驱均在 $P=\\{N_1\\}$ 中的未放置网络。这只有 $N_2$（其前驱为 $\\emptyset$）。\n-   **排序**：唯一的候选网络是 $N_2$。\n-   **放置**：`last_r`$=0$。\n    1.  放置 $N_2$（区间 $[2, 6]$），因为 $l_2=2 > 0$。\n-   **结果**：轨道 $2$ 包含 $\\{N_2\\}$。$P = \\{N_1, N_2\\}$。\n\n**轨道 3：**\n-   **候选网络**：前驱均在 $P=\\{N_1, N_2\\}$ 中的未放置网络。$N_3$ 的前驱是 $\\{N_1, N_2\\}$，它们都在 $P$ 中。所以，$N_3$ 是一个候选网络。没有其他未放置的网络满足此条件。候选集合为 $\\{N_3\\}$。\n-   **排序**：唯一的候选网络是 $N_3$。\n-   **放置**：`last_r`$=0$。\n    1.  放置 $N_3$（区间 $[1, 8]$），因为 $l_3=1 > 0$。\n-   **结果**：轨道 $3$ 包含 $\\{N_3\\}$。$P = \\{N_1, N_2, N_3\\}$。\n\n**轨道 4：**\n-   **候选网络**：前驱在 $P=\\{N_1, N_2, N_3\\}$ 中的未放置网络。\n    -   $N_4$：前驱 $\\{N_2, N_3\\}$ 在 $P$ 中。是候选。\n    -   $N_5$：前驱 $\\{N_3\\}$ 在 $P$ 中。是候选。\n-   **排序**：按左边界排序：$N_4$ ($l_4=2$)，$N_5$ ($l_5=3$)。排序后的列表为 $(N_4, N_5)$。\n-   **放置**：`last_r`$=0$。\n    1.  放置 $N_4$（区间 $[2, 10]$），因为 $l_4=2 > 0$。更新 `last_r` 为 $10$。\n    2.  考虑 $N_5$（区间 $[3, 12]$）。其左边界 $l_5=3$ 不大于 `last_r`$=10$。$N_5$ 无法放置。\n-   **结果**：轨道 $4$ 包含 $\\{N_4\\}$。$P = \\{N_1, N_2, N_3, N_4\\}$。\n\n**轨道 5：**\n-   **候选网络**：前驱在 $P=\\{N_1, N_2, N_3, N_4\\}$ 中的未放置网络。\n    -   $N_5$：前驱 $\\{N_3\\}$ 在 $P$ 中。是候选。\n    -   $N_6$：前驱 $\\{N_1, N_4, N_5\\}$。$N_5$ 不在 $P$ 中。不是候选。\n-   **排序**：唯一的候选网络是 $N_5$。\n-   **放置**：`last_r`$=0$。\n    1.  放置 $N_5$（区间 $[3, 12]$），因为 $l_5=3 > 0$。\n-   **结果**：轨道 $5$ 包含 $\\{N_5\\}$。$P = \\{N_1, N_2, N_3, N_4, N_5\\}$。\n\n**轨道 6：**\n-   **候选网络**：前驱在 $P=\\{N_1, ..., N_5\\}$ 中的未放置网络。\n    -   $N_6$：前驱 $\\{N_1, N_4, N_5\\}$ 都在 $P$ 中。是候选。\n-   **排序**：唯一的候选网络是 $N_6$。\n-   **放置**：`last_r`$=0$。\n    1.  放置 $N_6$（区间 $[4, 13]$），因为 $l_6=4 > 0$。\n-   **结果**：轨道 $6$ 包含 $\\{N_6\\}$。$P = \\{N_1, N_2, N_3, N_4, N_5, N_6\\}$。\n\n**轨道 7：**\n-   **候选网络**：前驱在 $P=\\{N_1, ..., N_6\\}$ 中的未放置网络。\n    -   $N_7$：前驱 $\\{N_4, N_5, N_6\\}$ 都在 $P$ 中。是候选。\n-   **排序**：唯一的候选网络是 $N_7$。\n-   **放置**：`last_r`$=0$。\n    1.  放置 $N_7$（区间 $[9, 14]$），因为 $l_7=9 > 0$。\n-   **结果**：轨道 $7$ 包含 $\\{N_7\\}$。$P = \\{N_1, N_2, N_3, N_4, N_5, N_6, N_7\\}$。\n\n所有网络都已放置。算法在使用 $7$ 条轨道后终止。最终的通道高度是所用轨道的总数。\n\n最终轨道分配：\n- 轨道 $1$：$N_1$\n- 轨道 $2$：$N_2$\n- 轨道 $3$：$N_3$\n- 轨道 $4$：$N_4$\n- 轨道 $5$：$N_5$\n- 轨道 $6$：$N_6$\n- 轨道 $7$：$N_7$\n\n轨道总数为 $7$。",
            "answer": "$$\\boxed{7}$$"
        }
    ]
}
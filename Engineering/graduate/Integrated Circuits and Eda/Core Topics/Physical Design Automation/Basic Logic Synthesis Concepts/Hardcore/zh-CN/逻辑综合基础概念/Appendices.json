{
    "hands_on_practices": [
        {
            "introduction": "逻辑综合的第一步是将抽象的布尔函数转换为结构化的网表。本实践探讨一种基本的优化技术：代数分解。通过将“扁平”的两级逻辑表示转换为结构化更强的多级形式，我们通常可以在电路面积上实现显著的节省，而面积是芯片设计中的一个主要成本指标。此练习  将让你使用一个基于门和文字计数的实际成本模型来量化这种面积缩减。",
            "id": "4257823",
            "problem": "在集成电路和电子设计自动化（EDA）的逻辑综合背景下，考虑一个布尔函数 $F(a,b,c,d,e)$。使用布尔代数的基本定律（交换律、结合律、分配律和幂等律）以及文字和两级逻辑的定义来推断面积。两级实现是直接使用乘积项和单个求和门的积之和实现。该函数以未分解的两级形式给出：\n$$\nF(a,b,c,d,e) = a b c + a b d + a b e + a c d + a c e + b c d + b c e.\n$$\n为了进行比较，提供了一个 $F$ 的特定多级代数分解形式：\n$$\nF(a,b,c,d,e) = (a b)(c + d + e) + c(a + b)(d + e).\n$$\n将网络面积成本 $C$ 定义为所有门面积的总和，加上一个与作为门输入的主输入文字数量成正比的文字使用惩罚。具体来说，令 $C$ 由下式给出：\n$$\nC = \\sum \\text{(实例化门的面积)} + \\lambda \\times L,\n$$\n其中 $L$ 是主输入文字的总数（$a, b, c, d$ 或 $e$作为门输入的每次出现都算作一次，无论是否为补码），而 $\\lambda$ 是一个文字惩罚权重。假设以下门面积值和文字惩罚：\n- $A_{\\mathrm{AND}}(2) = 6$， $A_{\\mathrm{AND}}(3) = 9$，\n- $A_{\\mathrm{OR}}(2) = 6$， $A_{\\mathrm{OR}}(3) = 9$， $A_{\\mathrm{OR}}(7) = 21$，\n- $A_{\\mathrm{INV}} = 2$ （此处不需要，因为所有文字都是原变量），\n- $\\lambda = 1$。\n\n对于两级实现，使用一个3输入与门实现每个乘积项 $a b c$、$a b d$、$a b e$、$a c d$、$a c e$、$b c d$、$b c e$，并用一个7输入或门将它们相加。对于分解后的实现，将子表达式 $S_{1} = a + b$ 实现为一个2输入或门，$S_{2} = d + e$ 实现为一个2输入或门，以及 $S_{3} = c + d + e$ 实现为一个3输入或门；将 $a b$ 实现为一个2输入与门，将 $(a b) S_{3}$ 实现为一个2输入与门，以及将 $c S_{1} S_{2}$ 实现为一个3输入与门；然后用一个2输入或门将两个顶层项相加。在计算分解后实现的 $L$ 时，只包括主输入 $a$、$b$、$c$、$d$ 和 $e$ 在门输入端的出现次数；不计算中间信号如 $S_{1}$、$S_{2}$、$S_{3}$ 或 $a b$ 的出现次数。\n\n使用这些定义和数据，计算面积差\n$$\n\\Delta C = C_{\\mathrm{two}} - C_{\\mathrm{fact}},\n$$\n其中 $C_{\\mathrm{two}}$ 是两级实现的面积成本，$C_{\\mathrm{fact}}$ 是分解后实现的面积成本。将您的最终答案表示为一个无单位的实数。无需四舍五入。",
            "solution": "首先对问题陈述进行严格的验证过程。\n\n**步骤1：提取已知条件**\n- 两级积之和（SOP）形式的布尔函数是：\n$F(a,b,c,d,e) = a b c + a b d + a b e + a c d + a c e + b c d + b c e$。\n- 一个特定的多级分解形式给出如下：\n$F(a,b,c,d,e) = (a b)(c + d + e) + c(a + b)(d + e)$。\n- 面积成本函数定义为 $C = \\sum \\text{(实例化门的面积)} + \\lambda \\times L$，其中 $L$ 是门输入端的主输入文字总数，文字惩罚权重 $\\lambda = 1$。\n- 门面积成本提供如下：\n  - $A_{\\mathrm{AND}}(2) = 6$\n  - $A_{\\mathrm{AND}}(3) = 9$\n  - $A_{\\mathrm{OR}}(2) = 6$\n  - $A_{\\mathrm{OR}}(3) = 9$\n  - $A_{\\mathrm{OR}}(7) = 21$\n- 两级形式（$C_{\\mathrm{two}}$）的实现包括七个3输入与门和一个7输入或门。\n- 分解形式（$C_{\\mathrm{fact}}$）的实现明确定义如下：\n  - 子表达式：$S_{1} = a + b$（2输入或门），$S_{2} = d + e$（2输入或门），$S_{3} = c + d + e$（3输入或门）。\n  - 乘积：$a b$（2输入与门），$(a b) S_{3}$（2输入与门），以及 $c S_{1} S_{2}$（3输入与门）。\n  - 最终求和：一个2输入或门。\n- 目标是计算面积差 $\\Delta C = C_{\\mathrm{two}} - C_{\\mathrm{fact}}$。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题是良构的，其科学基础在于数字逻辑综合的原理，并使用了客观、正式的语言。一个关键的验证步骤是确认所提供的函数 $F$ 的两种形式的布尔等价性。\n\n展开分解后的形式：\n$$\n(a b)(c + d + e) = a b c + a b d + a b e\n$$\n$$\nc(a + b)(d + e) = c(ad + ae + bd + be) = a c d + a c e + b c d + b c e\n$$\n将这两个展开式相加得到：\n$$\na b c + a b d + a b e + a c d + a c e + b c d + b c e\n$$\n这个表达式与给定的两级形式相同。等价性成立，问题在逻辑上是一致的。成本函数、门面积和实现方案都已明确定义，没有歧义。因此，该问题是有效的。\n\n**步骤3：求解**\n\n我们继续按照规定计算两种实现的面积成本。\n\n**两级实现成本 $C_{\\mathrm{two}}$ 的计算**\n两级实现包括实现七个乘积项并将它们相加。\n- **门级结构：**\n  - 七个3文字乘积项（$abc, abd, \\dots, bce$）每个都用一个3输入与门实现。这需要7个AND(3)类型的门。\n  - 这七个项的和由一个7输入或门实现。这需要1个OR(7)类型的门。\n- **门面积计算：**\n  - 与门的总面积贡献为 $7 \\times A_{\\mathrm{AND}}(3) = 7 \\times 9 = 63$。\n  - 或门的面积贡献为 $1 \\times A_{\\mathrm{OR}}(7) = 1 \\times 21 = 21$。\n  - 总门面积为 $\\sum A_{\\text{gates}} = 63 + 21 = 84$。\n- **文字计数 ($L_{\\mathrm{two}}$)：**\n  - 七个与门的输入是主输入文字。每个与门有3个文字输入。\n  - 文字出现的总次数为 $L_{\\mathrm{two}} = 7 \\times 3 = 21$。\n- **总成本 ($C_{\\mathrm{two}}$)：**\n  - 当 $\\lambda=1$ 时，成本为 $C_{\\mathrm{two}} = (\\sum A_{\\text{gates}}) + \\lambda \\times L_{\\mathrm{two}} = 84 + 1 \\times 21 = 105$。\n\n**分解后实现成本 $C_{\\mathrm{fact}}$ 的计算**\n成本是根据问题陈述中提供的特定网络结构计算的。\n- **门级结构与面积：**\n  1. 对于 $S_1 = a + b$：一个2输入或门，面积 $A_{\\mathrm{OR}}(2) = 6$。\n  2. 对于 $S_2 = d + e$：一个2输入或门，面积 $A_{\\mathrm{OR}}(2) = 6$。\n  3. 对于 $S_3 = c + d + e$：一个3输入或门，面积 $A_{\\mathrm{OR}}(3) = 9$。\n  4. 对于 $ab$：一个2输入与门，面积 $A_{\\mathrm{AND}}(2) = 6$。\n  5. 对于 $(ab)S_3$：一个2输入与门，面积 $A_{\\mathrm{AND}}(2) = 6$。\n  6. 对于 $c S_1 S_2$：一个3输入与门，面积 $A_{\\mathrm{AND}}(3) = 9$。\n  7. 对于最终求和：一个2输入或门，面积 $A_{\\mathrm{OR}}(2) = 6$。\n  - 总门面积是各个门面积的总和：\n    $\\sum A_{\\text{gates}} = 6 + 6 + 9 + 6 + 6 + 9 + 6 = 48$。\n- **文字计数 ($L_{\\mathrm{fact}}$)：**\n  - 我们只计算作为这些门直接输入的主输入文字（$a, b, c, d, e$）。\n  1. 用于 $S_1 = a+b$ 的门：输入为 $a, b$。文字计数为 $2$。\n  2. 用于 $S_2 = d+e$ 的门：输入为 $d, e$。文字计数为 $2$。\n  3. 用于 $S_3 = c+d+e$ 的门：输入为 $c, d, e$。文字计数为 $3$。\n  4. 用于 $ab$ 的门：输入为 $a, b$。文字计数为 $2$。\n  5. 用于 $(ab)S_3$ 的门：输入是中间信号，不是主输入文字。文字计数为 $0$。\n  6. 用于 $c S_1 S_2$ 的门：一个输入是主输入文字 $c$。另外两个是中间信号。文字计数为 $1$。\n  7. 用于最终求和的门：输入是中间信号。文字计数为 $0$。\n  - 总文字计数为 $L_{\\mathrm{fact}} = 2 + 2 + 3 + 2 + 0 + 1 + 0 = 10$。\n- **总成本 ($C_{\\mathrm{fact}}$)：**\n  - 当 $\\lambda=1$ 时，成本为 $C_{\\mathrm{fact}} = (\\sum A_{\\text{gates}}) + \\lambda \\times L_{\\mathrm{fact}} = 48 + 1 \\times 10 = 58$。\n\n**面积差 $\\Delta C$ 的计算**\n最后一步是计算两种成本之间的差值。\n$$\n\\Delta C = C_{\\mathrm{two}} - C_{\\mathrm{fact}} = 105 - 58 = 47\n$$\n这个正值表明，在给定的成本模型下，与未经优化的两级SOP实现相比，指定的多级分解提供了显著的面积成本降低。",
            "answer": "$$\n\\boxed{47}\n$$"
        },
        {
            "introduction": "有效的逻辑综合是一场权衡博弈，尤其是在电路面积和速度之间。本练习  通过比较实现公共逻辑的两种策略——复制与共享——来深入探讨这一关键概念。虽然共享子表达式通过消除冗余门来减少面积，但它可能会因为共享组件上更高的扇出而增加延迟，这揭示了综合工具在工作中不断需要解决的核心面积-延迟权衡问题。",
            "id": "4257784",
            "problem": "考虑一个在集成电路电子设计自动化 (EDA) 领域的双输出布尔网络，其输出为 $y_{1}$ 和 $y_{2}$，主输入为 $a$、$b$、$c$、$d$、$e$、$f$ 和 $g$。原始规范以积之和 (SOP) 形式给出：$y_{1} = (a b) + (c d) + (e f)$ 和 $y_{2} = (a b) + c + (e f g)$。考虑了两种实现策略：复制和共享。\n\n采用以下建模基础。\n\n- 文字量面积模型：面积的代理指标是文字量 $L$，定义为在实现的多级网表中，门输入端主输入文字的总出现次数。由门产生的内部信号不计为文字。\n- 门级架构：所有乘积项均使用双输入与门实现。三输入项 $(e f g)$ 通过级联的双输入与门实现。每个输出 $y_{1}$、$y_{2}$ 由一个收集其相应项的单三输入或门形成。\n- 延迟模型：每个门 $G$ 的延迟为 $d_{G} = d_{0,G} + k \\, F_{G}$，其中 $d_{0,G}$ 是固有延迟，$k$ 是扇出引起的延迟系数，$F_{G}$ 是门 $G$ 输出的扇出数（即由 $G$ 驱动的门输入数量）。主输入的延迟为零。每个 $y_{i}$ 的输出延迟是或门延迟与其输入中的最大到达时间之和。\n\n定义了两个具体的网表：\n\n- 复制网表：将 $(e f)$ 实现两次，一次馈送给 $y_{1}$ 的或门，另一次馈送给为 $y_{2}$ 形成 $(e f) g$ 的与 $g$ 相与的门。$(a b)$ 的与门由两个输出共享；$(c d)$ 的与门驱动 $y_{1}$；$c$ 输入直接驱动 $y_{2}$；形成 $(e f) g$ 的与门驱动 $y_{2}$。\n- 共享网表：将 $h = (e f)$ 实现一次并复用它；将 $h$ 直接馈送给 $y_{1}$ 的或门，并同时馈送给一个与 $g$ 相与的门以形成用于 $y_{2}$ 的 $h g$。所有其他门和连接与复制网表中的相同。\n\n扇出数如下：\n\n- $(a b)$ 的与门驱动两个或门，因此 $F = 2$。\n- $(c d)$ 的与门仅驱动 $y_{1}$ 的或门，因此 $F = 1$。\n- 在复制网表中，每个 $(e f)$ 与门驱动单个负载（$y_{1}$ 的或门或与 $g$ 相与的门），因此两个副本的 $F$ 均为 $1$。\n- 在共享网表中，单个 $h = (e f)$ 与门驱动两个负载（$y_{1}$ 的或门和与 $g$ 相与的门），因此 $F = 2$。\n- 接收 $(e f)$ 或 $h$ 的与 $g$ 相与的门仅驱动 $y_{2}$ 的或门，因此 $F = 1$。\n- 每个三输入或门仅驱动其主输出，因此 $F = 1$。\n\n使用以下门参数：双输入与门固有延迟 $d_{0,\\text{AND2}} = 14$ ps，三输入或门固有延迟 $d_{0,\\text{OR3}} = 22$ ps，扇出系数 $k = 5$ ps。设权衡成本为 $C = L + \\lambda \\, T_{\\max}$，其中 $L$ 是网表的文字量，$T_{\\max}$ 是 $y_{1}$ 和 $y_{2}$ 输出延迟的最大值，$\\lambda = 0.18$ ps$^{-1}$ 是为使 $C$ 无量纲而选择的权重因子。\n\n计算上述两个网表的差异 $\\Delta C = C_{\\text{share}} - C_{\\text{dup}}$。将最终数值表示为无量纲量，并将答案四舍五入到四位有效数字。",
            "solution": "需要计算一个给定的双输出布尔函数的两种不同逻辑网表实现之间的权衡成本函数差异，即 $\\Delta C = C_{\\text{share}} - C_{\\text{dup}}$。成本函数定义为 $C = L + \\lambda \\, T_{\\max}$，其中 $L$ 是文字量，$T_{\\max}$ 是最大输出延迟，$\\lambda$ 是给定的权重因子。为了找到 $\\Delta C$，我们必须首先分别计算每个网表的成本 $C$。\n\n给定参数如下：\n-   双输入与门固有延迟：$d_{0,\\text{AND2}} = 14$ ps\n-   三输入或门固有延迟：$d_{0,\\text{OR3}} = 22$ ps\n-   扇出引起的延迟系数：$k = 5$ ps\n-   成本权重因子：$\\lambda = 0.18$ ps$^{-1}$\n\n门延迟模型为 $d_G = d_{0,G} + k F_G$，其中 $F_G$ 是门 $G$ 的扇出数。\n\n首先，我们分析复制网表，用下标 'dup' 表示。\n\n**1. 复制网表分析 ($C_{\\text{dup}}$)**\n\n**A. 文字量 ($L_{\\text{dup}}$)**\n文字量 $L$ 是所有门输入端主输入文字的总数。\n-   $(a b)$ 的门：$2$ 个文字 ($a, b$)。\n-   $(c d)$ 的门：$2$ 个文字 ($c, d$)。\n-   第一个 $(e f)$ 的门 (用于 $y_1$)：$2$ 个文字 ($e, f$)。\n-   第二个 $(e f)$ 的门 (用于 $y_2$ 路径)：$2$ 个文字 ($e, f$)。\n-   $(e f)g$ 的门：$1$ 个文字 ($g$)。\n-   $y_2 = (ab) + c + (efg)$ 的或门有一个直接的主输入 $c$：$1$ 个文字。\n总文字量是这些的总和：\n$$L_{\\text{dup}} = 2 + 2 + 2 + 2 + 1 + 1 = 10$$\n\n**B. 最大延迟 ($T_{\\max, \\text{dup}}$)**\n我们计算每个门的延迟，然后计算每个主输出端的信号到达时间。\n\n门延迟：\n-   $G_{ab}$：$(a b)$ 的与门，扇出 $F=2$。延迟 $d_{ab} = d_{0,\\text{AND2}} + k(2) = 14 + 5(2) = 24$ ps。\n-   $G_{cd}$：$(c d)$ 的与门，扇出 $F=1$。延迟 $d_{cd} = d_{0,\\text{AND2}} + k(1) = 14 + 5(1) = 19$ ps。\n-   $G_{ef,1}$：第一个 $(e f)$ 的与门，扇出 $F=1$。延迟 $d_{ef,1} = d_{0,\\text{AND2}} + k(1) = 14 + 5(1) = 19$ ps。\n-   $G_{ef,2}$：第二个 $(e f)$ 的与门，扇出 $F=1$。延迟 $d_{ef,2} = d_{0,\\text{AND2}} + k(1) = 14 + 5(1) = 19$ ps。\n-   $G_{efg}$：$(ef)g$ 的与门，扇出 $F=1$。延迟 $d_{efg} = d_{0,\\text{AND2}} + k(1) = 14 + 5(1) = 19$ ps。\n-   $G_{y1}$：$y_1$ 的或门，扇出 $F=1$。延迟 $d_{y1} = d_{0,\\text{OR3}} + k(1) = 22 + 5(1) = 27$ ps。\n-   $G_{y2}$：$y_2$ 的或门，扇出 $F=1$。延迟 $d_{y2} = d_{0,\\text{OR3}} + k(1) = 22 + 5(1) = 27$ ps。\n\n输出延迟：\n-   对于 $y_1$：其或门的输入来自 $G_{ab}$、$G_{cd}$ 和 $G_{ef,1}$。主输入的到达时间为零。或门输入端的到达时间是驱动它们的门的延迟：$d_{ab}=24$ ps、$d_{cd}=19$ ps、$d_{ef,1}=19$ ps。\n    $y_1$ 的总延迟是这些到达时间的最大值加上或门的延迟：\n    $$T_{y_1, \\text{dup}} = \\max(24, 19, 19) + d_{y1} = 24 + 27 = 51 \\text{ ps}$$\n-   对于 $y_2$：其或门的输入来自 $G_{ab}$、主输入 $c$ 和 $G_{efg}$。\n    -   来自 $G_{ab}$ 的到达时间：$d_{ab}=24$ ps。\n    -   来自 $c$ 的到达时间：$0$ ps。\n    -   来自 $G_{efg}$ 的到达时间：该门处于级联状态。其输入端来自 $G_{ef,2}$ 的信号到达时间为 $d_{ef,2}=19$ ps。来自主输入 $g$ 的到达时间为 $0$ ps。因此 $G_{efg}$ 的输出在时间 $\\max(19, 0) + d_{efg} = 19 + 19 = 38$ ps 可用。\n    $y_2$ 的总延迟是这些到达时间的最大值加上或门的延迟：\n    $$T_{y_2, \\text{dup}} = \\max(24, 0, 38) + d_{y2} = 38 + 27 = 65 \\text{ ps}$$\n该网表的最大延迟是：\n$$T_{\\max, \\text{dup}} = \\max(T_{y_1, \\text{dup}}, T_{y_2, \\text{dup}}) = \\max(51, 65) = 65 \\text{ ps}$$\n\n**C. 成本计算 ($C_{\\text{dup}}$)**\n$$C_{\\text{dup}} = L_{\\text{dup}} + \\lambda T_{\\max, \\text{dup}} = 10 + (0.18)(65) = 10 + 11.7 = 21.7$$\n\n接下来，我们分析共享网表，用下标 'share' 表示。\n\n**2. 共享网表分析 ($C_{\\text{share}}$)**\n\n**A. 文字量 ($L_{\\text{share}}$)**\n项 $(e f)$ 由一个共享的单门 $G_h$ 实现。\n-   $(a b)$ 的门：$2$ 个文字 ($a, b$)。\n-   $(c d)$ 的门：$2$ 个文字 ($c, d$)。\n-   共享门 $G_h$ (用于 $(e f)$)：$2$ 个文字 ($e, f$)。\n-   $h g$ 的门：$1$ 个文字 ($g$)。\n-   直接输入到 $y_2$ 或门的 $c$：$1$ 个文字。\n总文字量是：\n$$L_{\\text{share}} = 2 + 2 + 2 + 1 + 1 = 8$$\n\n**B. 最大延迟 ($T_{\\max, \\text{share}}$)**\n由于扇出数不同，门延迟会发生变化。\n-   $G_{ab}$：扇出 $F=2$, $d_{ab} = 14 + 5(2) = 24$ ps (无变化)。\n-   $G_{cd}$：扇出 $F=1$, $d_{cd} = 14 + 5(1) = 19$ ps (无变化)。\n-   $G_h$：共享的 $(e f)$ 与门，扇出 $F=2$。延迟 $d_h = d_{0,\\text{AND2}} + k(2) = 14 + 5(2) = 24$ ps。\n-   $G_{hg}$：$h g$ 的与门，扇出 $F=1$。延迟 $d_{hg} = d_{0,\\text{AND2}} + k(1) = 14 + 5(1) = 19$ ps。\n-   $G_{y1}$：扇出 $F=1$, $d_{y1} = 22 + 5(1) = 27$ ps (无变化)。\n-   $G_{y2}$：扇出 $F=1$, $d_{y2} = 22 + 5(1) = 27$ ps (无变化)。\n\n输出延迟：\n-   对于 $y_1$：其或门的输入来自 $G_{ab}$、$G_{cd}$ 和 $G_h$。到达时间为 $d_{ab}=24$ ps、$d_{cd}=19$ ps 和 $d_{h}=24$ ps。\n    $$T_{y_1, \\text{share}} = \\max(24, 19, 24) + d_{y1} = 24 + 27 = 51 \\text{ ps}$$\n-   对于 $y_2$：其或门的输入来自 $G_{ab}$、主输入 $c$ 和 $G_{hg}$。\n    -   来自 $G_{ab}$ 的到达时间：$d_{ab}=24$ ps。\n    -   来自 $c$ 的到达时间：$0$ ps。\n    -   来自 $G_{hg}$ 的到达时间：其输入端来自共享门 $G_h$ 的信号到达时间为 $d_h=24$ ps。来自主输入 $g$ 的到达时间为 $0$ ps。因此 $G_{hg}$ 的输出在时间 $\\max(24, 0) + d_{hg} = 24 + 19 = 43$ ps 可用。\n    $y_2$ 的总延迟是：\n    $$T_{y_2, \\text{share}} = \\max(24, 0, 43) + d_{y2} = 43 + 27 = 70 \\text{ ps}$$\n该网表的最大延迟是：\n$$T_{\\max, \\text{share}} = \\max(T_{y_1, \\text{share}}, T_{y_2, \\text{share}}) = \\max(51, 70) = 70 \\text{ ps}$$\n\n**C. 成本计算 ($C_{\\text{share}}$)**\n$$C_{\\text{share}} = L_{\\text{share}} + \\lambda T_{\\max, \\text{share}} = 8 + (0.18)(70) = 8 + 12.6 = 20.6$$\n\n**3. 最终差异计算 ($\\Delta C$)**\n\n成本差异计算如下：\n$$\\Delta C = C_{\\text{share}} - C_{\\text{dup}} = 20.6 - 21.7 = -1.1$$\n题目要求将最终答案四舍五入到四位有效数字。\n$$\\Delta C = -1.100$$\n\n负值表示，在给定的模型和参数下，共享策略尽管增加了最大电路延迟，但总体成本更低。面积（文字量）的减少超过了延迟增加带来的惩罚。",
            "answer": "$$\\boxed{-1.100}$$"
        },
        {
            "introduction": "逻辑网络综合完成后，必须严格验证其时序性能，以确保其满足设计的时钟速度要求。本实践介绍静态时序分析（STA），这是完成此项任务的行业标准方法。通过计算整个映射网络中的到达时间、要求时间和时序裕量，你将学会如何识别关键路径 ——即限制电路最高工作频率的瓶颈。",
            "id": "4257797",
            "problem": "在集成电路的电子设计自动化（EDA）中，静态时序分析（STA）将组合网络建模为一个有向无环图（DAG），其顶点代表引脚和单元，其边代表具有延迟的信号传播。时序裕量（Timing slack）是使用前向到达时间和后向需求时间的概念来定义的，这些概念源于有向无环图上到达时间的最大延迟累积和需求时间的最小允许时间的基本定义。考虑以下由逻辑门组成的映射网络，其具有引脚相关的单元延迟和互连延迟。所有时间量都必须视为实数值，并在适用的地方明确使用纳秒（$(\\mathrm{ns})$）作为单位。\n\n具有指定到达时间的主输入：\n- $A$: $0\\,\\mathrm{ns}$,\n- $B$: $0\\,\\mathrm{ns}$,\n- $C$: $0.5\\,\\mathrm{ns}$.\n\n单元库引脚到输出的延迟：\n- 双输入与非门 $G_{\\mathrm{NAND2}}$：$A\\rightarrow Y$ 延迟 $0.20\\,\\mathrm{ns}$，$B\\rightarrow Y$ 延迟 $0.15\\,\\mathrm{ns}$。\n- 双输入或非门 $G_{\\mathrm{NOR2}}$：$A\\rightarrow Y$ 延迟 $0.25\\,\\mathrm{ns}$，$B\\rightarrow Y$ 延迟 $0.20\\,\\mathrm{ns}$。\n- 反相器 $G_{\\mathrm{INV}}$：$X\\rightarrow Y$ 延迟 $0.10\\,\\mathrm{ns}$。\n\n网络拓扑（单元实例和连接）：\n- $N1$：$G_{\\mathrm{NAND2}}$，输入由 $A$ 和 $B$ 驱动，输出为 $Y1$。\n- $N2$：$G_{\\mathrm{INV}}$，输入由 $C$ 驱动，输出为 $Y2$。\n- $N3$：$G_{\\mathrm{NOR2}}$，A-引脚输入由 $Y1$ 驱动，B-引脚输入由 $Y2$ 驱动，输出为 $O1$。\n- $N4$：$G_{\\mathrm{INV}}$，输入由 $Y1$ 驱动，输出为 $Y4$。\n- $N5$：$G_{\\mathrm{NOR2}}$，A-引脚输入由 $Y4$ 驱动，B-引脚输入由 $C$ 驱动，输出为 $O2$。\n\n沿每个有向连接的互连（网络）延迟：\n- $A\\rightarrow N1.A$: $0.01\\,\\mathrm{ns}$,\n- $B\\rightarrow N1.B$: $0.01\\,\\mathrm{ns}$,\n- $C\\rightarrow N2.X$: $0.02\\,\\mathrm{ns}$,\n- $Y1\\rightarrow N3.A$: $0.06\\,\\mathrm{ns}$,\n- $Y2\\rightarrow N3.B$: $0.04\\,\\mathrm{ns}$,\n- $Y1\\rightarrow N4.X$: $0.05\\,\\mathrm{ns}$,\n- $Y4\\rightarrow N5.A$: $0.03\\,\\mathrm{ns}$,\n- $C\\rightarrow N5.B$: $0.02\\,\\mathrm{ns}$.\n\n主输出端的宿点所需到达时间：\n- $O1$: $1.20\\,\\mathrm{ns}$,\n- $O2$: $1.00\\,\\mathrm{ns}$.\n\n从到达时间（作为在每个节点上沿有向无环图正向传播的最晚信号时间）和需求时间（作为从宿点反向传播的最早允许时间）的基本定义出发，并将节点的裕量定义为需求时间减去到达时间，请执行以下操作：\n- 解释如何基于这些定义，通过拓扑上的前向和后向遍历来识别组合映射网络中的时序裕量和关键路径。\n- 计算每个门输出的前向到达时间以及包括主输入 $A$、$B$ 和 $C$ 在内的每个节点的后向需求时间。\n- 计算每个节点输出和每个主输入的裕量。\n- 通过计算出的到达时间和裕量值进行推理，确定关键路径。\n\n最后，报告网络中所有节点的最小裕量。将您最终报告的最小裕量四舍五入到四位有效数字，并以 $\\mathrm{ns}$ 为单位表示该值。",
            "solution": "该问题提法明确，科学上基于静态时序分析（STA）的原理，并为获得唯一解提供了所有必要数据。到达时间、需求时间、裕量和关键路径等概念是数字电路设计的基础，并且有客观的定义。因此，该问题是有效的，可以构建出完整的解决方案。\n\n### 静态时序分析的概念框架\n\n静态时序分析（STA）是一种无需执行完整动态仿真即可验证数字电路时序性能的方法。它将电路建模为一个有向无环图（DAG），其中节点代表逻辑门引脚或主输入/输出（I/O），边代表具有相关延迟的信号传播路径。STA的核心涉及对该图的两次拓扑遍历：一次前向遍历以计算到达时间，一次后向遍历以计算需求时间。\n\n_到达时间_ ($AT$)：一个节点的到达时间是指，考虑到从主输入出发的所有可能路径，信号跳变能够到达该节点的最晚可能时间。它是通过从主输入（PIs）到主输出（POs）的前向拓扑遍历来计算的。对于任何给定节点 $u$，其到达时间计算为其所有扇入节点 $v_i$ 到达时间的最大值。\n$$AT(u) = \\max_{v_i \\in \\text{fanin}(u)} \\left( AT(v_i) + \\text{delay}(v_i \\rightarrow u) \\right)$$\n术语 $\\text{delay}(v_i \\rightarrow u)$ 包含了从门 $v_i$ 的输出到门 $u$ 的输入的互连延迟，以及门 $u$ 从该特定输入到输出的内部引脚到输出延迟。对于主输入，其到达时间作为初始条件被指定。\n\n_需求时间_ ($RT$)：一个节点的需求时间是指，信号跳变能够到达该节点而不在任何主输出处引起时序违例的最晚时间。它是通过从主输出（POs）到主输入（PIs）的后向拓扑遍历来计算的。对于任何给定节点 $u$，其需求时间是其所有扇出节点 $w_j$ 所决定的需求时间的最小值。\n$$RT(u) = \\min_{w_j \\in \\text{fanout}(u)} \\left( RT(w_j) - \\text{delay}(u \\rightarrow w_j) \\right)$$\n术语 $\\text{delay}(u \\rightarrow w_j)$ 包括门 $w_j$ 的内部延迟和随后的互连延迟。对于主输出，其需求时间被指定为外部时序约束。\n\n_裕量_: 节点 $u$ 的裕量是其需求时间与到达时间之差。\n$$S(u) = RT(u) - AT(u)$$\n裕量代表可用的时序余量。正裕量表示路径比要求快。零或负裕量分别表示路径是关键路径或已违反时序约束。\n\n_关键路径_: 关键路径是从主输入（PI）到主输出（PO）的一条特定的节点和边的序列，它在整个电路中表现出最小的裕量。这条路径决定了设计的最大工作频率。识别方法是找到具有最小裕量的节点（通常是主输出），然后反向追溯到主输入，在每一步选择导致最大到达时间（“慢路径”）的扇入路径，并确保该路径也对应于最小需求时间约束。\n\n### 到达时间的计算（前向遍历）\n\n我们从主输入指定的到达时间开始：\n$AT(A) = 0.0\\,\\mathrm{ns}$\n$AT(B) = 0.0\\,\\mathrm{ns}$\n$AT(C) = 0.5\\,\\mathrm{ns}$\n\n我们按照网络的拓扑顺序进行：\n1.  **门 $N1$ ($G_{\\mathrm{NAND2}}$):**\n    -   输入 $N1.A$ 的到达时间：$AT(N1.A) = AT(A) + d(A\\rightarrow N1.A) = 0.0 + 0.01 = 0.01\\,\\mathrm{ns}$。\n    -   输入 $N1.B$ 的到达时间：$AT(N1.B) = AT(B) + d(B\\rightarrow N1.B) = 0.0 + 0.01 = 0.01\\,\\mathrm{ns}$。\n    -   输出 $Y1$ 的到达时间：\n        $AT(Y1) = \\max \\left( AT(N1.A) + d(N1.A \\rightarrow Y1), AT(N1.B) + d(N1.B \\rightarrow Y1) \\right)$\n        $AT(Y1) = \\max \\left( 0.01 + 0.20, 0.01 + 0.15 \\right) = \\max(0.21, 0.16) = 0.21\\,\\mathrm{ns}$。\n\n2.  **门 $N2$ ($G_{\\mathrm{INV}}$):**\n    -   输入 $N2.X$ 的到达时间：$AT(N2.X) = AT(C) + d(C\\rightarrow N2.X) = 0.5 + 0.02 = 0.52\\,\\mathrm{ns}$。\n    -   输出 $Y2$ 的到达时间：\n        $AT(Y2) = AT(N2.X) + d(N2.X \\rightarrow Y2) = 0.52 + 0.10 = 0.62\\,\\mathrm{ns}$。\n\n3.  **门 $N4$ ($G_{\\mathrm{INV}}$):**\n    -   输入 $N4.X$ 的到达时间：$AT(N4.X) = AT(Y1) + d(Y1\\rightarrow N4.X) = 0.21 + 0.05 = 0.26\\,\\mathrm{ns}$。\n    -   输出 $Y4$ 的到达时间：\n        $AT(Y4) = AT(N4.X) + d(N4.X \\rightarrow Y4) = 0.26 + 0.10 = 0.36\\,\\mathrm{ns}$。\n\n4.  **门 $N3$ ($G_{\\mathrm{NOR2}}$):**\n    -   输入 $N3.A$ 的到达时间：$AT(N3.A) = AT(Y1) + d(Y1\\rightarrow N3.A) = 0.21 + 0.06 = 0.27\\,\\mathrm{ns}$。\n    -   输入 $N3.B$ 的到达时间：$AT(N3.B) = AT(Y2) + d(Y2\\rightarrow N3.B) = 0.62 + 0.04 = 0.66\\,\\mathrm{ns}$。\n    -   输出 $O1$ 的到达时间：\n        $AT(O1) = \\max \\left( AT(N3.A) + d(N3.A \\rightarrow O1), AT(N3.B) + d(N3.B \\rightarrow O1) \\right)$\n        $AT(O1) = \\max \\left( 0.27 + 0.25, 0.66 + 0.20 \\right) = \\max(0.52, 0.86) = 0.86\\,\\mathrm{ns}$。\n\n5.  **门 $N5$ ($G_{\\mathrm{NOR2}}$):**\n    -   输入 $N5.A$ 的到达时间：$AT(N5.A) = AT(Y4) + d(Y4\\rightarrow N5.A) = 0.36 + 0.03 = 0.39\\,\\mathrm{ns}$。\n    -   输入 $N5.B$ 的到达时间：$AT(N5.B) = AT(C) + d(C\\rightarrow N5.B) = 0.5 + 0.02 = 0.52\\,\\mathrm{ns}$。\n    -   输出 $O2$ 的到达时间：\n        $AT(O2) = \\max \\left( AT(N5.A) + d(N5.A \\rightarrow O2), AT(N5.B) + d(N5.B \\rightarrow O2) \\right)$\n        $AT(O2) = \\max \\left( 0.39 + 0.25, 0.52 + 0.20 \\right) = \\max(0.64, 0.72) = 0.72\\,\\mathrm{ns}$。\n\n### 需求时间的计算（后向遍历）\n\n我们从主输出指定的所需时间开始：\n$RT(O1) = 1.20\\,\\mathrm{ns}$\n$RT(O2) = 1.00\\,\\mathrm{ns}$\n\n我们以反向拓扑顺序进行：\n1.  **从 $O1$（$N3$ 的输出）开始：**\n    -   输入 $N3.A$ 的需求时间：$RT(N3.A) = RT(O1) - d(N3.A \\rightarrow O1) = 1.20 - 0.25 = 0.95\\,\\mathrm{ns}$。\n    -   输入 $N3.B$ 的需求时间：$RT(N3.B) = RT(O1) - d(N3.B \\rightarrow O1) = 1.20 - 0.20 = 1.00\\,\\mathrm{ns}$。\n\n2.  **从 $O2$（$N5$ 的输出）开始：**\n    -   输入 $N5.A$ 的需求时间：$RT(N5.A) = RT(O2) - d(N5.A \\rightarrow O2) = 1.00 - 0.25 = 0.75\\,\\mathrm{ns}$。\n    -   输入 $N5.B$ 的需求时间：$RT(N5.B) = RT(O2) - d(N5.B \\rightarrow O2) = 1.00 - 0.20 = 0.80\\,\\mathrm{ns}$。\n\n3.  **在节点 $Y4$（$N5.A$ 的输入）：**\n    $RT(Y4) = RT(N5.A) - d(Y4\\rightarrow N5.A) = 0.75 - 0.03 = 0.72\\,\\mathrm{ns}$。\n\n4.  **在节点 $Y2$（$N3.B$ 的输入）：**\n    $RT(Y2) = RT(N3.B) - d(Y2\\rightarrow N3.B) = 1.00 - 0.04 = 0.96\\,\\mathrm{ns}$。\n\n5.  **在节点 $Y1$（$N3.A$ 和 $N4.X$ 的输入）：**\n    -   来自扇出 $N3.A$ 的需求时间：$RT(N3.A) - d(Y1 \\rightarrow N3.A) = 0.95 - 0.06 = 0.89\\,\\mathrm{ns}$。\n    -   输入 $N4.X$ 的需求时间：$RT(N4.X) = RT(Y4) - d(N4.X \\rightarrow Y4) = 0.72 - 0.10 = 0.62\\,\\mathrm{ns}$。\n    -   来自扇出 $N4.X$ 的需求时间：$RT(N4.X) - d(Y1 \\rightarrow N4.X) = 0.62 - 0.05 = 0.57\\,\\mathrm{ns}$。\n    -   $RT(Y1) = \\min(0.89, 0.57) = 0.57\\,\\mathrm{ns}$。\n\n6.  **在主输入 $C$（$N2.X$ 和 $N5.B$ 的输入）：**\n    -   输入 $N2.X$ 的需求时间：$RT(N2.X) = RT(Y2) - d(N2.X \\rightarrow Y2) = 0.96 - 0.10 = 0.86\\,\\mathrm{ns}$。\n    -   来自扇出 $N2.X$ 的需求时间：$RT(N2.X) - d(C \\rightarrow N2.X) = 0.86 - 0.02 = 0.84\\,\\mathrm{ns}$。\n    -   来自扇出 $N5.B$ 的需求时间：$RT(N5.B) - d(C \\rightarrow N5.B) = 0.80 - 0.02 = 0.78\\,\\mathrm{ns}$。\n    -   $RT(C) = \\min(0.84, 0.78) = 0.78\\,\\mathrm{ns}$。\n\n7.  **在主输入 $A$（$N1.A$ 的输入）：**\n    -   输入 $N1.A$ 的需求时间：$RT(N1.A) = RT(Y1) - d(N1.A \\rightarrow Y1) = 0.57 - 0.20 = 0.37\\,\\mathrm{ns}$。\n    -   $RT(A) = RT(N1.A) - d(A \\rightarrow N1.A) = 0.37 - 0.01 = 0.36\\,\\mathrm{ns}$。\n\n8.  **在主输入 $B$（$N1.B$ 的输入）：**\n    -   输入 $N1.B$ 的需求时间：$RT(N1.B) = RT(Y1) - d(N1.B \\rightarrow Y1) = 0.57 - 0.15 = 0.42\\,\\mathrm{ns}$。\n    -   $RT(B) = RT(N1.B) - d(B \\rightarrow N1.B) = 0.42 - 0.01 = 0.41\\,\\mathrm{ns}$。\n\n### 裕量计算与关键路径识别\n\n我们计算每个主输入和门输出的裕量 $S = RT - AT$。\n\n-   $S(A) = RT(A) - AT(A) = 0.36 - 0.0 = 0.36\\,\\mathrm{ns}$。\n-   $S(B) = RT(B) - AT(B) = 0.41 - 0.0 = 0.41\\,\\mathrm{ns}$。\n-   $S(C) = RT(C) - AT(C) = 0.78 - 0.5 = 0.28\\,\\mathrm{ns}$。\n-   $S(Y1) = RT(Y1) - AT(Y1) = 0.57 - 0.21 = 0.36\\,\\mathrm{ns}$。\n-   $S(Y2) = RT(Y2) - AT(Y2) = 0.96 - 0.62 = 0.34\\,\\mathrm{ns}$。\n-   $S(Y4) = RT(Y4) - AT(Y4) = 0.72 - 0.36 = 0.36\\,\\mathrm{ns}$。\n-   $S(O1) = RT(O1) - AT(O1) = 1.20 - 0.86 = 0.34\\,\\mathrm{ns}$。\n-   $S(O2) = RT(O2) - AT(O2) = 1.00 - 0.72 = 0.28\\,\\mathrm{ns}$。\n\n在所有计算的节点中，最小裕量为 $0.28\\,\\mathrm{ns}$。这个值在主输入 $C$ 和主输出 $O2$ 处被观察到。因此，关键路径必须连接 $C$ 和 $O2$。\n\n为了确认，我们追踪该路径：\n-   在输出 $O2$ 处，最晚到达时间 $AT(O2) = 0.72\\,\\mathrm{ns}$ 是由通过输入 $N5.B$ 的路径决定的。\n-   $N5.B$ 处的信号源于主输入 $C$。其到达时间为 $AT(N5.B) = AT(C) + d(C \\rightarrow N5.B) = 0.5 + 0.02 = 0.52\\,\\mathrm{ns}$。\n-   主输入 $C$ 的需求时间 $RT(C) = 0.78\\,\\mathrm{ns}$ 是由其扇出路径中的最小值决定的，也就是到 $N5.B$ 的路径。\n-   由于最晚到达时间的前向传播和最紧需求时间的反向传播都遵循相同的节点序列，我们可以明确地识别出关键路径。\n\n关键路径是节点和边的序列：$C \\rightarrow (\\text{net}) \\rightarrow N5.B \\rightarrow (\\text{cell } N5) \\rightarrow O2$。沿此路径的所有节点共享 $0.28\\,\\mathrm{ns}$ 的最小裕量。\n\n网络中所有节点的最小裕量是 $0.28\\,\\mathrm{ns}$。问题要求将此值四舍五入到四位有效数字。",
            "answer": "$$\n\\boxed{0.2800}\n$$"
        }
    ]
}
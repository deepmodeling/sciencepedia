## 引言
在现代[集成电路](@entry_id:265543)中，一个稳定、精确的电压参考源是模拟和混合信号系统正常工作的基础，它如同系统中的一把“标尺”，为[模数转换器](@entry_id:271548)（[ADC](@entry_id:200983)）、[数模转换器](@entry_id:267281)（DAC）、稳压器（LDO）等关键模块提供基准。[带隙基准](@entry_id:261796)（Bandgap Reference）电路正是为此而生，其核心目标是产生一个基本不随温度、电源电压和制造工艺偏差而变化的电压。然而，在理论的简洁性与物理现实的复杂性之间存在着巨大的鸿沟，如何克服各种非理想效应，设计出满足严苛性能要求的基准电路，是模拟电路设计师面临的一项关键挑战。

本文旨在系统性地剖析[带隙基准](@entry_id:261796)设计与修调的全过程，引领读者从基础物理原理走向前沿工程实践。我们首先将在“原理与机制”一章中，深入探讨构成[带隙基准](@entry_id:261796)的互补于绝对温度（CTAT）和正比于[绝对温度](@entry_id:144687)（PTAT）电压的物理来源，并揭示如何通过巧妙的电路拓扑将它们组合以实现一阶[温度补偿](@entry_id:148868)，同时分析高阶[非线性](@entry_id:637147)效应及其补偿方法。接着，在“应用与跨学科连接”一章，我们将把目光投向实际应用中的关键问题，讨论如何处理启动、稳定性、噪声等电路设计挑战，并阐述如何通过精密的修调技术和版图艺术来对抗制造偏差，最后还将探讨其在可靠性、[热管](@entry_id:149315)理等交叉学科领域的延伸。最后，“动手实践”部分将提供一系列精心设计的问题，帮助您将理论知识转化为解决实际问题的能力。通过这一系列的学习，您将构建起关于[带隙基准](@entry_id:261796)设计的完整知识体系。

## 原理与机制

在上一章引言的基础上，本章将深入探讨[带隙基准](@entry_id:261796)（Bandgap Reference）电路设计背后的核心物理原理与关键机制。我们将从构成[带隙基准](@entry_id:261796)的基本电压源出发，系统地阐述如何通过组合这些电压源来实现温度不敏感的参考电压。随后，我们将分析实现这一目标的主流电路拓扑，并进一步研究影响基准精度的各种非理想效应。最后，我们将介绍用于校正高阶[非线性](@entry_id:637147)、实现更高精度的高级[曲率补偿](@entry_id:1123316)技术。

### 基本电压源的物理特性

所有[带隙基准](@entry_id:261796)的核心思想，在于巧妙地将一个具有负温度系数的电压与一个具有正温度系数的电压进行[线性组合](@entry_id:154743)，从而在某个特定温度点上实现一阶[温度系数](@entry_id:262493)为零。理解这两种基本电压源的物理来源是掌握[带隙基准](@entry_id:261796)设计的基石。

#### 互补于[绝对温度](@entry_id:144687)（CTAT）电压源：BJT的基极-发射极电压

[双极结型晶体管](@entry_id:266088)（BJT）的基极-发射极电压（$V_{BE}$）是构建[带隙基准](@entry_id:261796)时最常用的[负温度系数](@entry_id:1128480)（Complementary to Absolute Temperature, **CTAT**）电压源。当BJT工作在[正向有源区](@entry_id:261687)时，其[集电极电流](@entry_id:1122640) $I_C$ 与 $V_{BE}$ 之间的关系遵循理想的指数模型：

$I_C = I_S(T) \exp\left(\frac{qV_{BE}}{k_B T}\right)$

其中，$q$ 是[基本电荷](@entry_id:272261)，$k_B$ 是玻尔兹曼常数，$T$ 是绝对温度，$I_S(T)$ 是随温度变化的饱和电流。我们可以反解出 $V_{BE}(T)$：

$V_{BE}(T) = \frac{k_B T}{q} \ln\left(\frac{I_C}{I_S(T)}\right) = V_T \ln\left(\frac{I_C}{I_S(T)}\right)$

这里的 $V_T = k_B T / q$ 被称为**热电压**。要理解 $V_{BE}$ 的温度特性，关键在于分析饱和电流 $I_S(T)$ 的[温度依赖性](@entry_id:147684)。$I_S(T)$ 的表达式与半导体材料的本征载流子浓度 $n_i$ 和[少子扩散](@entry_id:188843)系数等物理量有关，其温度依赖关系可近似表示为：

$I_S(T) = I_S(T_0) \left(\frac{T}{T_0}\right)^n \exp\left(-\frac{E_g^\star}{k_B}\left(\frac{1}{T} - \frac{1}{T_0}\right)\right)$

其中，$T_0$ 是参考温度，$I_S(T_0)$ 是在该温度下的饱和电流，$E_g^\star$ 是一个等效[带隙](@entry_id:138445)能量参数（对于硅约为 $1.2 \text{ eV}$），$n$ 是一个与工艺相关的经验指数。

将 $I_S(T)$ 的表达式代入 $V_{BE}(T)$ 的公式中，经过整理可以得到 $V_{BE}(T)$ 的显式表达式 ：

$V_{BE}(T) = \frac{E_g^\star}{q} \frac{T}{T_0} + V_{BE}(T_0) \frac{T}{T_0} - \frac{E_g^\star}{q} - n V_T \ln\left(\frac{T}{T_0}\right)$
(在更精确的模型中，[偏置电流](@entry_id:260952) $I_C$ 也可能随温度变化，但这不改变 $V_{BE}$ 的基本CTAT特性。)

尽管这个表达式形式复杂，但其核心行为非常明确：随着温度 $T$ 的升高，指数项 $I_S(T)$ 快速增长，为了维持一个（相对）恒定的集电极电流 $I_C$，对数项 $\ln(I_C/I_S(T))$ 必须减小，从而导致 $V_{BE}$ 下降。在室温附近，硅BJT的 $V_{BE}$ 的温度系数约为 $-1.5 \text{ mV/K}$ 到 $-2.5 \text{ mV/K}$。例如，一个在 $25^\circ\text{C}$ 时 $V_{BE}$ 约为 $0.6 \text{ V}$ 的晶体管，在温度升高到 $85^\circ\text{C}$ 时，其 $V_{BE}$ 可能会下降到约 $0.46 \text{ V}$ 。这种与绝对温度近似成反比的特性，正是其被称为[CTAT电压](@entry_id:265313)的原因。

#### 正比于[绝对温度](@entry_id:144687)（PTAT）电压源：BJT的差分对电压

正温度系数（Proportional to Absolute Temperature, **PTAT**）电压通常由两个工作在不同电流密度下的匹配BJT产生。考虑两个特性匹配的BJT，$Q_1$ 和 $Q_2$，它们的发射极[面积分](@entry_id:275394)别为 $A$ 和 $NA$（$N>1$）。由于饱和电流 $I_S$ 与发射极面积成正比，我们有 $I_{S2} = N \cdot I_{S1}$。

如果通过电路设计强制使两个BJT的[集电极电流](@entry_id:1122640)相等，即 $I_{C1} = I_{C2} = I_C$，那么它们的基极-发射极电压将不相等。根据 $V_{BE}$ 的表达式：

$V_{BE1} = V_T \ln\left(\frac{I_C}{I_{S1}}\right)$
$V_{BE2} = V_T \ln\left(\frac{I_C}{I_{S2}}\right) = V_T \ln\left(\frac{I_C}{N \cdot I_{S1}}\right)$

这两个电压的差值 $\Delta V_{BE}$ 为 ：

$\Delta V_{BE} = V_{BE1} - V_{BE2} = V_T \left[ \ln\left(\frac{I_C}{I_{S1}}\right) - \ln\left(\frac{I_C}{N \cdot I_{S1}}\right) \right] = V_T \ln(N)$

将热电压 $V_T = k_B T / q$ 代入，我们得到：

$\Delta V_{BE}(T) = \frac{k_B T}{q} \ln(N)$

这个结果非常优雅。$\Delta V_{BE}$ 直接正比于[绝对温度](@entry_id:144687) $T$，因此是一个理想的[PTAT电压](@entry_id:265938)源。其[温度系数](@entry_id:262493) $\frac{d(\Delta V_{BE})}{dT} = \frac{k_B \ln(N)}{q}$ 是一个与温度无关的常数。例如，对于 $N=8$ 的面积比，在 $T=300 \text{ K}$ 时，$\Delta V_{BE}$ 约为 $54 \text{ mV}$，其温度系数约为 $0.18 \text{ mV/K}$ 。值得注意的是，在计算差值 $\Delta V_{BE}$ 的过程中，$I_S(T)$ 中复杂的温度依赖项（如 $T^n$ 和 $\exp(-E_g/k_BT)$）被完全抵消，这是该技术能够产生一个纯净[PTAT电压](@entry_id:265938)的关键。

### 一阶[温度补偿](@entry_id:148868)原理

有了CTAT和PTAT两种电压源，我们就可以通过[线性组合](@entry_id:154743)它们来实现一个温度不敏感的参考电压。

#### 零温度系数（Zero-TC）参考的生成

我们将[CTAT电压](@entry_id:265313) $V_{BE}$ 和一个经过加权的[PTAT电压](@entry_id:265938) $m \cdot \Delta V_{BE}$ 相加，构成参考电压 $V_{REF}$：

$V_{REF}(T) = V_{BE}(T) + m \cdot \Delta V_{BE}(T)$

其中，$m$ 是一个无量纲的设计系数，通常由一个可修调的电阻网络比例来实现。为了实现一阶[温度补偿](@entry_id:148868)，我们要求 $V_{REF}(T)$ 在标称工作温度 $T_0$ 处的导数为零：

$\left.\frac{d V_{REF}}{dT}\right|_{T=T_0} = \left.\frac{d V_{BE}}{dT}\right|_{T=T_0} + m \left.\frac{d (\Delta V_{BE})}{dT}\right|_{T=T_0} = 0$

由于 $\frac{d V_{BE}}{dT}$ 为负（CTAT），而 $\frac{d (\Delta V_{BE})}{dT}$ 为正（PTAT），我们总可以找到一个正的加权系数 $m$ 来满足这个条件。解出 $m$ 可得 ：

$m = - \frac{\left.\frac{d V_{BE}}{dT}\right|_{T=T_0}}{\left.\frac{d (\Delta V_{BE})}{dT}\right|_{T=T_0}}$

将前面推导出的 $V_{BE}$ 和 $\Delta V_{BE}$ 的导数代入，经过整理可以得到 $m$ 的具体表达式：

$m = \frac{E_g(T_0) + \text{const} \cdot k_B T_0 - q V_{BE}(T_0)}{k_B T_0 \ln(N)}$

其中 `const` 是一个与饱和电流模型中温度指数相关的常数。通过在版图上设计合适的晶体管面积比 $N$ 和电阻比（以实现 $m$），我们就可以在理论上构建一个一阶[温度补偿](@entry_id:148868)的参考电压。

#### 外推[带隙](@entry_id:138445)电压 $V_{GO}$

零温度系数的条件引出了一个非常重要的概念：**外推[带隙](@entry_id:138445)电压**（extrapolated bandgap voltage），记为 $V_{GO}$。在 $T=T_0$ 处，满足零TC条件的参考电压值为：

$V_{REF}(T_0) = V_{BE}(T_0) + m \cdot \Delta V_{BE}(T_0) = V_{BE}(T_0) - \frac{\left.\frac{d V_{BE}}{dT}\right|_{T=T_0}}{\left.\frac{d (\Delta V_{BE})}{dT}\right|_{T=T_0}} \cdot \Delta V_{BE}(T_0)$

将 $\Delta V_{BE}(T_0) = V_T(T_0)\ln(N)$ 和其导数 $\frac{d (\Delta V_{BE})}{dT} = \frac{V_T(T_0)}{T_0}\ln(N)$ 代入，上式简化为：

$V_{REF}(T_0) = V_{BE}(T_0) - T_0 \left.\frac{d V_{BE}}{dT}\right|_{T=T_0}$

这个表达式的物理意义是，$V_{BE}(T)$ 在 $T=T_0$ 点的切线在 $T=0 \text{ K}$ 轴上的截距。这个截距值就是 $V_{GO}$ 。例如，若在 $300 \text{ K}$ 测得 $V_{BE} = 0.7 \text{ V}$ 且其斜率为 $-1.68 \text{ mV/K}$，则外推得到的 $V_{GO} = 0.7 \text{ V} - 300 \text{ K} \times (-0.00168 \text{ V/K}) = 1.204 \text{ V}$。

$V_{GO}$ 是一个理论上的构造，它不能被直接测量。因为在极低温度下，半导体材料会经历**载流子冻析**（carrier freeze-out），BJT的理想模型不再成立 。然而，$V_{GO}$ 的概念极为有用，因为它为我们提供了一个设计目标：一个理想的一阶[温度补偿](@entry_id:148868)[带隙基准](@entry_id:261796)的输出电压值应该等于 $V_{GO}$。这个值约等于硅在 $0 \text{ K}$ 时的[带隙](@entry_id:138445)能量除以单位电荷（$E_g(0)/q$），但并不完全相等。精确的理论分析表明，$V_{GO}$ 还包含一个与[载流子迁移率](@entry_id:268762)[温度依赖性](@entry_id:147684)相关的修正项 。

### 电路拓扑与实现

理论上的电压组合需要通过具体的电路拓扑来实现。下面介绍两种经典的实现方式。

#### [Brokaw带隙单元](@entry_id:1121892)：电压模式实现

[Brokaw带隙单元](@entry_id:1121892)是一种经典的**电压模式**（voltage-mode）电路 。其核心结构包括一个高增益[运算放大器](@entry_id:263966)（op-amp）、两个BJT（$Q_1, Q_2$，发射极面积比为 $1:N$）以及两个电阻（$R_1, R_2$）。

在此电路中，[运放](@entry_id:274011)通过负反馈强制其两个输入端电压相等，这间接导致流过两个BJT的集电极电流 $I_{C1}$ 和 $I_{C2}$ 相等。如前所述，这个条件会在两个BJT之间产生一个[PTAT电压](@entry_id:265938)差 $\Delta V_{BE} = V_T \ln(N)$。这个电压差被施加在电阻 $R_1$ 上，从而产生一个PTAT电流 $I_{PTAT} = \Delta V_{BE}/R_1$。

这个PTAT电流随后流过电阻 $R_2$，产生一个[PTAT电压](@entry_id:265938)降 $I_{PTAT} \cdot R_2$。最终的参考电压 $V_{ref}$ 由一个BJT的基极-发射极电压（CTAT）和这个[PTAT电压](@entry_id:265938)降相加而成：

$V_{ref} = V_{BE,2} + I_{PTAT} \cdot R_2 = V_{BE,2} + \frac{R_2}{R_1} \Delta V_{BE}$

可以看到，加权系数 $m$ 在此拓扑中由电阻比 $R_2/R_1$ 实现。通过调整这个电阻比，设计者可以精确地平衡CTAT和PTAT分量的[温度系数](@entry_id:262493)，从而实现零一阶TC。这个电阻比也是生产后进行**修调**（trimming）以校准[温度系数](@entry_id:262493)的关键参数 。

#### Banba拓扑：适用于低压的电流模式实现

随着供电电压的不断降低，传统的Brokaw结构（其输出电压约为 $V_{GO} \approx 1.2 \text{ V}$）变得不再适用。Banba拓扑是一种**电流模式**（current-mode）设计，它通过求和电流而非电压来合成参考，从而可以产生远低于 $V_{GO}$ 的参考电压 。

其基本原理如下：
1.  生成一个CTAT电流：$I_{CTAT}(T) = \frac{V_{BE}(T)}{R_1}$
2.  生成一个PTAT电流：$I_{PTAT}(T) = \frac{\Delta V_{BE}(T)}{R_2} = \frac{V_T \ln(N)}{R_2}$
3.  将这两个电流相加，并通过一个输出电阻 $R_3$ 将总电流转换为电压：

$V_{ref}(T) = R_3 (I_{CTAT}(T) + I_{PTAT}(T)) = R_3 \left( \frac{V_{BE}(T)}{R_1} + \frac{V_T \ln(N)}{R_2} \right)$

同样，通过设置 $\frac{d V_{ref}}{dT} = 0$，可以得到零TC的条件，该条件决定了电阻比 $R_2/R_1$ 的值。一旦这个比例确定，输出电压就可以通过改变 $R_3$ 的值来自由设定，而不会影响其[温度系数](@entry_id:262493)。例如，设计一个在 $300 \text{ K}$ 时输出 $0.8 \text{ V}$ 的零TC基准是完全可行的，这在低至 $1 \text{ V}$ 的电源电压下也能正常工作 。

### 二阶效应与误差来源

理想模型为我们提供了基本的设计框架，但在实际电路中，各种非理想效应会影响基准的精度。

#### 寄生电阻的影响

BJT的物理结构中存在不可避免的寄生串联电阻，主要是基极电阻 $R_B$ 和发射极电阻 $R_E$。外部测量的基极-发射极电压 $V_{BE,ext}$ 实际上是内部结电压 $V_{BE,int}$ 与这些[寄生电阻](@entry_id:1129348)上的[压降](@entry_id:199916)之和：

$V_{BE,ext}(T) = V_{BE,int}(T) + I_E(T) R_E(T) + I_B(T) R_B(T)$

由于电阻本身也具有[温度系数](@entry_id:262493)（TCR），这些额外的[压降](@entry_id:199916)项也会随温度变化。对上式求导可以发现，外部测量的CTAT斜率会受到寄生电阻及其TCR的扰动。具体来说，正的TCR会导致一个正的斜率项，从而使得 $V_{BE,ext}$ 的负斜率的绝对值减小 。例如，对于一个内部斜率为 $-1.676 \text{ mV/K}$ 的BJT，考虑到典型的寄生电阻（如 $R_{E0}=50 \Omega$, $R_{B0}=300 \Omega$）及其TCR，外部测得的斜率可能变为 $-1.660 \text{ mV/K}$。虽然这个变化看似微小，但在高精度设计中必须予以考虑。

#### 运放和电阻的非理想性

在诸如Widlar或Brokaw等依赖运放的拓扑中，运放和电阻的非理想性是主要的误差来源 。

1.  **运放[输入失调电压](@entry_id:267780) ($V_{os}$)**：理想[运放](@entry_id:274011)会强制其输入端电压完全相等，但实际[运放](@entry_id:274011)存在[输入失调电压](@entry_id:267780) $V_{os}$。这个失调电压会直接叠加在[PTAT电压](@entry_id:265938) $\Delta V_{BE}$ 上，导致PTAT电流的产生出现系统性误差。这个误差会通过电路的增益被放大后传递到输出端。分析表明，输出电压的误差约等于 $(\alpha + C) \cdot V_{os}$，其中 $\alpha$ 是PTAT项的增益（通常远大于1），$C$ 是一个常数。因此，$V_{os}$ 带来的误差通常是被**放大**而非衰减的。一个 $200 \mu \text{V}$ 的失调电压可能在输出端造成近 $2 \text{ mV}$ 的直流误差 。

2.  **电阻的温度系数失配**：实现加权系数 $m$（或 $\alpha$）的电阻比 $R_2/R_1$ 的稳定性至关重要。尽管在集成电路中可以实现电阻的良好匹配，但它们的[温度系数](@entry_id:262493)（TCR, $\beta = (1/R)dR/dT$）仍然可能存在微小的失配。这种失配（$\beta_2 \neq \beta_1$）会导致电阻比随温度变化，从而引入一个一阶温度漂移。这个残余的漂移量与TCR失配值、[PTAT电压](@entry_id:265938)的大小以及增益系数 $\alpha$ 成正比。即使是 $100 \text{ ppm/K}$ 的TCR失配，也可能在输出端引入数十 $\mu \text{V/K}$ 的额外温漂 。

### 高级课题：[曲率补偿](@entry_id:1123316)

一阶[温度补偿](@entry_id:148868)只能保证参考电压在某个特定温度点的斜率为零。在整个工作温度范围内（例如 $-40^\circ\text{C}$ 到 $125^\circ\text{C}$），$V_{REF}(T)$ 曲线通常呈现出"弓形"或"S形"的[非线性](@entry_id:637147)，这种现象被称为**曲率**（curvature）。为了实现 ppm/°C 级别的高精度基准，必须对曲率进行补偿。

#### 曲率的物理来源

$V_{REF}$ 的曲率主要来源于 $V_{BE}(T)$ 自身的[非线性](@entry_id:637147)。精确分析 $V_{BE}(T)$ 的表达式可以揭示其曲率的两个主要物理来源 ：

1.  **[带隙](@entry_id:138445)能量的[非线性](@entry_id:637147)[温度依赖性](@entry_id:147684) $E_g(T)$**：[硅的带隙](@entry_id:180133)能量 $E_g$ 并非随温度线性变化，其行为通常由Varshni关系描述，$E_g(T) = E_g(0) - \alpha T^2 / (T+\beta)$。这个[非线性](@entry_id:637147)关系是 $V_{BE}(T)$ 曲线中一个主要的、类似二次函数（$T^2$）的曲率来源。

2.  **迁移率与统计因子的[温度依赖性](@entry_id:147684)**：饱和电流 $I_S(T)$ 的表达式中除了指数项外，还包含一个 $T^\eta$ 的幂律项。这个幂律项的来源包括[载流子迁移率](@entry_id:268762) $\mu(T) \propto T^{-m}$ 以及其他与[有效态密度](@entry_id:181717)相关的统计因子。这些因素共同在 $V_{BE}(T)$ 中引入了一个形式为 $T \ln(T)$ 的[非线性](@entry_id:637147)项，这是曲率的第二个重要来源。

#### [曲率补偿](@entry_id:1123316)技术

[曲率补偿](@entry_id:1123316)的思路是在参考电压的表达式中引入一个具有相反曲率的校正项。

一种有效的方法是**加权 $V_{BE}$ 求和**。通过将两个工作在不同电流密度下的BJT的 $V_{BE}$ 电压（$V_{BE1}$ 和 $V_{BEw}$）进行加权求和，可以产生一个具有可控曲率的CTAT分量。例如，在表达式 $V_{ref} = V_{BE1} + \beta V_{BEw} + \dots$ 中，选择一个合适的负值 $\beta$（如 $-0.25$），可以有效地引入一个正的曲率项，用以抵消基准电压原有的[负曲率](@entry_id:159335)，从而显著减小在整个温度范围内的峰峰值误差 。

另一种方法是**[发射极简并](@entry_id:267745)**（emitter-degeneration），它通过在一个BJT的发射极串联一个小电阻，利用跨导线性环路（translinear loop）的[非线性](@entry_id:637147)来产生校正项。然而，这种方法的应用需要非常仔细的分析。在某些配置下，它产生的校正项（形式为 $\propto -1/V_T$）可能具有与所需方向相反的曲率，反而会**恶化**而非改善温度特性 。这提醒我们，任何补偿技术都必须基于对其引入的[非线性](@entry_id:637147)项的精确物理分析。

最先进的补偿技术则试图对两种曲率来源进行**独立和精确的匹配** 。例如，通过设计一个与温度相关的加权系数 $w(T) \propto T$，可以产生一个纯粹的 $T^2$ 校正项，专门用于抵消由 $E_g(T)$ 引入的二次曲率。同时，通过引入其他[非线性](@entry_id:637147)元件（如特定偏置的MOSFET）来产生一个 $T \ln T$ 形式的校正项，以精确抵消由迁移率等因素引入的曲率。这些高级技术是实现超高精度[带隙基准](@entry_id:261796)设计的关键。
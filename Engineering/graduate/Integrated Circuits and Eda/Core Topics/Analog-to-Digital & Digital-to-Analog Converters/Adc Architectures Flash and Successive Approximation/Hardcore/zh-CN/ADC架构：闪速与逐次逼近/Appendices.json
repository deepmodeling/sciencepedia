{
    "hands_on_practices": [
        {
            "introduction": "在逐次逼近型ADC开始转换过程之前，必须将输入信号精确地采集到采样电容上。本练习探讨了这一过程的基本物理限制，它由一个$RC$时间常数决定，并将其与ADC的分辨率联系起来。理解采样建立时间是确定ADC最高采样率的第一步。",
            "id": "4254989",
            "problem": "一个单端逐次逼近寄存器 (SAR) 模数转换器 (ADC) 使用一个顶板采样网络，该网络包含一个导通电阻为 $R_{\\mathrm{on}}$ 的自举采样开关和一个采样电容 $C_{s}$。在采集期间，输入源的输出电阻可忽略不计，除 $C_{s}$ 外的所有寄生参数均被忽略。在时间 $t=0$ 时，输入经历一个从 $0$ 到 $V_{\\mathrm{FS}}$ 的满量程阶跃，同时采样开关闭合。由于 $R_{\\mathrm{on}}C_{s}$ 的时间常数，采样节点遵循一阶动态特性。对于一个在 $[0, V_{\\mathrm{FS}}]$ 范围内的 $N$ 位转换器，定义其最低有效位 (LSB) 为 $\\mathrm{LSB} = V_{\\mathrm{FS}}/2^{N}$。\n\n从一个由阶跃输入驱动的一阶线性时不变系统的第一性原理出发，并使用上述 LSB 的定义，推导出最小采集时间 $t_{\\mathrm{acq}}$，使得在采集结束时，对于指定的满量程阶跃，采样误差的幅度严格小于 $0.5\\,\\mathrm{LSB}$。然后，使用以下参数对您的表达式进行数值计算：$C_{s} = 3.2\\,\\mathrm{pF}$、$R_{\\mathrm{on}} = 75\\,\\Omega$、$V_{\\mathrm{FS}} = 1.8\\,\\mathrm{V}$ 和 $N=14$。\n\n以 $\\mathrm{ns}$ (纳秒) 为单位表示 $t_{\\mathrm{acq}}$ 的最终数值答案，并将您的答案四舍五入到四位有效数字。",
            "solution": "用户提供了一个问题陈述，在尝试解答之前需要对其进行验证。\n\n### 第1步：提取已知条件\n- **系统**：单端逐次逼近寄存器 (SAR) 模数转换器 (ADC)。\n- **采样网络**：带有自举采样开关的顶板采样。\n- **组件和参数**：\n    - 开关导通电阻：$R_{\\mathrm{on}}$\n    - 采样电容：$C_{s}$\n    - 输入源输出电阻：可忽略不计。\n    - 寄生参数：除 $C_s$ 外均忽略。\n- **输入条件**：在时间 $t=0$ 时，输入经历一个从 $0$ 到 $V_{\\mathrm{FS}}$ 的满量程阶跃。采样开关闭合。\n- **系统动态**：采样节点遵循一阶动态特性，时间常数为 $R_{\\mathrm{on}}C_{s}$。\n- **定义**：\n    - $N$ 位转换器的最低有效位 (LSB)：$\\mathrm{LSB} = V_{\\mathrm{FS}}/2^{N}$。\n    - 范围：$[0, V_{\\mathrm{FS}}]$。\n- **目标**：\n    1. 推导最小采集时间 $t_{\\mathrm{acq}}$，使得在 $t=t_{\\mathrm{acq}}$ 时，对于指定的满量程阶跃，采样误差的幅度严格小于 $0.5\\,\\mathrm{LSB}$。\n    2. 对 $t_{\\mathrm{acq}}$ 的表达式进行数值计算。\n- **数值**：\n    - $C_{s} = 3.2\\,\\mathrm{pF}$\n    - $R_{\\mathrm{on}} = 75\\,\\Omega$\n    - $V_{\\mathrm{FS}} = 1.8\\,\\mathrm{V}$\n    - $N=14$\n- **输出格式**：以 $\\mathrm{ns}$ 为单位表示 $t_{\\mathrm{acq}}$ 的最终数值答案，并四舍五入到四位有效数字。\n\n### 第2步：使用提取的已知条件进行验证\n1.  **有科学依据**：该问题在科学上是合理的。它将采样保持电路的采集阶段建模为一阶 RC 电路，这是模拟集成电路设计中的一个标准和基本模型。稳定条件（误差小于 LSB 的一小部分）是 ADC 的核心设计约束。\n2.  **适定性**：该问题是适定的。它提供了一个明确的目标、所有必要的参数以及一个具有特定输入和初始条件的明确定义的物理系统（LTI 一阶电路）。要求满足不等式的最小时间会得到一个唯一的、稳定的且有意义的解。\n3.  **客观性**：该问题以客观、正式的语言陈述，没有主观性或歧义。\n4.  **不完整或矛盾的设置**：该问题是自洽的。忽略源电阻和其他寄生参数的假设是一个明确的简化，而非遗漏，这使得问题可解。不存在矛盾之处。\n5.  **不切实际或不可行**：所提供的数值（$C_{s}=3.2\\,\\mathrm{pF}$、$R_{\\mathrm{on}}=75\\,\\Omega$、$V_{\\mathrm{FS}}=1.8\\,\\mathrm{V}$、$N=14$）对于现代 CMOS 集成电路是现实的。\n6.  **不适定或结构不良**：该问题结构良好，并导向一个唯一的解。\n7.  **伪深刻、琐碎或同义反复**：该问题需要从第一性原理进行标准但实质性的推导，将 RC 电路的理论与 ADC 的性能指标联系起来。这并非微不足道。\n8.  **超出科学可验证性**：该推导和计算在数学上是可验证的。\n\n### 第3步：结论和行动\n该问题被认为是**有效的**。将提供解答。\n\n### 推导与求解\n\n问题要求从第一性原理进行推导。在采集阶段，当开关闭合时，采样网络被建模为一个简单的串联 RC 电路。输入电压施加在开关电阻 $R_{\\mathrm{on}}$ 和采样电容 $C_s$ 的串联组合上。电容两端的电压 $V_s(t)$ 就是被采样的信号。\n\n该电路由以下一阶线性常微分方程控制：\n$$R_{\\mathrm{on}}C_s \\frac{dV_s(t)}{dt} + V_s(t) = V_{\\mathrm{in}}(t)$$\n设系统的时间常数为 $\\tau = R_{\\mathrm{on}}C_s$。方程变为：\n$$\\tau \\frac{dV_s(t)}{dt} + V_s(t) = V_{\\mathrm{in}}(t)$$\n问题指定在 $t=0$ 时有一个满量程阶跃输入，其中输入电压 $V_{\\mathrm{in}}(t)$ 从 $0$ 变为 $V_{\\mathrm{FS}}$。对于 $t \\ge 0$，输入为 $V_{\\mathrm{in}}(t) = V_{\\mathrm{FS}}$。初始条件，即对应于阶跃前的电压水平，为 $V_s(0) = 0$。\n\n对于一个响应阶跃输入的一阶系统，电容上的电压通解为：\n$$V_s(t) = V_{\\mathrm{final}} + (V_{\\mathrm{initial}} - V_{\\mathrm{final}})\\exp(-t/\\tau)$$\n在本例中，初始电压为 $V_{\\mathrm{initial}} = V_s(0) = 0$，最终稳态电压为 $V_{\\mathrm{final}} = V_{\\mathrm{FS}}$。将这些值代入通解，得到采样节点的响应：\n$$V_s(t) = V_{\\mathrm{FS}} + (0 - V_{\\mathrm{FS}})\\exp(-t/\\tau)$$\n$$V_s(t) = V_{\\mathrm{FS}} (1 - \\exp(-t/\\tau))$$\n该方程描述了采样电容上的电压随时间变化的函数。\n\n在采集过程中的任何时间 $t$ 的采样误差 $V_{\\mathrm{err}}(t)$ 是最终目标电压 $V_{\\mathrm{FS}}$ 与实际采样电压 $V_s(t)$ 之间的差值：\n$$V_{\\mathrm{err}}(t) = V_{\\mathrm{FS}} - V_s(t)$$\n代入 $V_s(t)$ 的表达式：\n$$V_{\\mathrm{err}}(t) = V_{\\mathrm{FS}} - V_{\\mathrm{FS}}(1 - \\exp(-t/\\tau)) = V_{\\mathrm{FS}} - V_{\\mathrm{FS}} + V_{\\mathrm{FS}}\\exp(-t/\\tau)$$\n$$V_{\\mathrm{err}}(t) = V_{\\mathrm{FS}}\\exp(-t/\\tau)$$\n由于 $V_{\\mathrm{FS}} > 0$，对于有限的 $t$，误差 $V_{\\mathrm{err}}(t)$ 总是正的，所以其幅度为 $|V_{\\mathrm{err}}(t)| = V_{\\mathrm{err}}(t)$。\n\n问题要求在采集周期结束时，即 $t = t_{\\mathrm{acq}}$，采样误差的幅度必须严格小于一个 LSB 的一半。该条件为：\n$$|V_{\\mathrm{err}}(t_{\\mathrm{acq}})|  0.5\\,\\mathrm{LSB}$$\n使用定义 $\\mathrm{LSB} = V_{\\mathrm{FS}}/2^N$，该条件变为：\n$$V_{\\mathrm{FS}}\\exp(-t_{\\mathrm{acq}}/\\tau)  0.5 \\left(\\frac{V_{\\mathrm{FS}}}{2^N}\\right)$$\n假设 $V_{\\mathrm{FS}} \\neq 0$，我们可以将两边同除以 $V_{\\mathrm{FS}}$：\n$$\\exp(-t_{\\mathrm{acq}}/\\tau)  \\frac{0.5}{2^N} = \\frac{1}{2 \\cdot 2^N} = \\frac{1}{2^{N+1}}$$\n为了求解 $t_{\\mathrm{acq}}$，我们对两边取自然对数。由于自然对数是一个严格递增函数，不等号方向不变：\n$$\\ln(\\exp(-t_{\\mathrm{acq}}/\\tau))  \\ln\\left(\\frac{1}{2^{N+1}}\\right)$$\n$$- \\frac{t_{\\mathrm{acq}}}{\\tau}  -\\ln(2^{N+1})$$\n$$- \\frac{t_{\\mathrm{acq}}}{\\tau}  -(N+1)\\ln(2)$$\n两边同乘以 $-1$ 会反转不等号方向：\n$$\\frac{t_{\\mathrm{acq}}}{\\tau} > (N+1)\\ln(2)$$\n$$t_{\\mathrm{acq}} > \\tau(N+1)\\ln(2)$$\n代入 $\\tau = R_{\\mathrm{on}}C_s$，我们得到所需采集时间的解析表达式：\n$$t_{\\mathrm{acq}} > R_{\\mathrm{on}}C_s(N+1)\\ln(2)$$\n最小采集时间 $t_{\\mathrm{acq}}$ 是此集合的下确界，即边界值。\n$$t_{\\mathrm{acq, min}} = R_{\\mathrm{on}}C_s(N+1)\\ln(2)$$\n\n现在，我们使用给定的参数对此表达式进行数值计算：\n$N = 14$\n$R_{\\mathrm{on}} = 75\\,\\Omega$\n$C_s = 3.2\\,\\mathrm{pF} = 3.2 \\times 10^{-12}\\,\\mathrm{F}$\n\n首先，计算时间常数 $\\tau$：\n$$\\tau = R_{\\mathrm{on}}C_s = (75\\,\\Omega) \\times (3.2 \\times 10^{-12}\\,\\mathrm{F}) = 240 \\times 10^{-12}\\,\\mathrm{s} = 0.24 \\times 10^{-9}\\,\\mathrm{s}$$\n现在，计算最小采集时间 $t_{\\mathrm{acq}}$：\n$$t_{\\mathrm{acq}} = (14+1) \\ln(2) \\times (0.24 \\times 10^{-9}\\,\\mathrm{s})$$\n$$t_{\\mathrm{acq}} = 15 \\ln(2) \\times (0.24 \\times 10^{-9}\\,\\mathrm{s})$$\n使用 $\\ln(2) \\approx 0.69314718$ 的值：\n$$t_{\\mathrm{acq}} \\approx 15 \\times 0.69314718 \\times 0.24 \\times 10^{-9}\\,\\mathrm{s}$$\n$$t_{\\mathrm{acq}} \\approx 10.3972077 \\times 0.24 \\times 10^{-9}\\,\\mathrm{s}$$\n$$t_{\\mathrm{acq}} \\approx 2.4953298 \\times 10^{-9}\\,\\mathrm{s}$$\n结果以纳秒表示为：\n$$t_{\\mathrm{acq}} \\approx 2.4953298\\,\\mathrm{ns}$$\n问题要求将答案四舍五入到四位有效数字。\n$$t_{\\mathrm{acq}} \\approx 2.495\\,\\mathrm{ns}$$",
            "answer": "$$\\boxed{2.495}$$"
        },
        {
            "introduction": "当ADC将模拟电压转换为数字码后，我们如何评估其转换的准确性？本练习将指导您完成一项关键任务：从一组测量的转换电压中计算差分非线性和积分非线性（DNL和INL）。这些是衡量ADC静态性能的核心指标，对于需要验证数据手册规格的ADC设计者和使用者来说，这是一项至关重要的技能。",
            "id": "4254992",
            "problem": "您的任务是根据单极性、均匀模数转换器 (ADC) 测得的码转换电压，计算其非线性度指标。考虑一个理想化的单调映射，它将模拟输入电压映射到分辨率为 $N$ 位的数字码序列，其中 $N = 12$。设总码数为 $M = 2^N$，测得的转换电压为 $\\{T_k\\}_{k=1}^{M-1}$（单位为伏特），其中 $T_k$ 是输出码从 $k-1$ 变为 $k$ 时的模拟输入电压。假设输入范围为 $[V_\\mathrm{L}, V_\\mathrm{H}]$，其中 $V_\\mathrm{L} = 0.0 \\,\\mathrm{V}$ 且 $V_\\mathrm{H} = 1.2 \\,\\mathrm{V}$，并定义理想最低有效位 (LSB) 大小为 $\\Delta = (V_\\mathrm{H} - V_\\mathrm{L}) / M$（单位为伏特）。\n\n您的目标是，对于下方的每个测试用例，计算相对于根据测得的转换点构建的端点拟合线的以下量：\n1) 所有内部码元上的最大绝对微分非线性度 (DNL)，以最低有效位 (LSB) 为单位，表示为浮点数，四舍五入到六位小数。DNL 仅使用位于测得的转换点之间的码元进行计算，即索引为 $i \\in \\{1,2,\\dots,M-2\\}$ 的码元，其宽度对应于 $T_{i+1} - T_i$。\n2) 所有测得的转换索引 $k \\in \\{1,2,\\dots,M-1\\}$ 上的最大绝对积分非线性度 (INL)，以 LSB 为单位，表示为浮点数，四舍五入到六位小数。\n3) 缺失码的数量，表示为整数，定义为宽度为非正值的码元数量，即满足 $T_{i+1} - T_i \\le 0$ 的索引 $i \\in \\{1,2,\\dots,M-2\\}$ 的数量。\n4) 一个布尔值，指示测得的转换序列是否严格递增，即对于所有 $k \\in \\{1,2,\\dots,M-2\\}$，是否有 $T_{k+1}  T_k$ 成立。\n\n端点拟合线是转换索引 $k$ 的唯一仿射函数，它穿过第一个和最后一个测得的转换点，即点 $(k,V) = (1,T_1)$ 和点 $(k,V) = (M-1,T_{M-1})$。使用该线的斜率定义拟合的 LSB 大小，并使用该线定义用于计算积分非线性度的拟合“理想”转换位置。所有 DNL 和 INL 值必须以拟合的 LSB 为单位表示。\n\n测试套件中与角度相关的表达式使用弧度。\n\n测试套件 (所有情况均使用 $N = 12$，$V_\\mathrm{L} = 0.0 \\,\\mathrm{V}$，$V_\\mathrm{H} = 1.2 \\,\\mathrm{V}$，$\\Delta = (V_\\mathrm{H}-V_\\mathrm{L})/2^{12}$):\n- 情况 A (理想阶梯): 对于所有 $k \\in \\{1,2,\\dots,M-1\\}$，$T_k = V_\\mathrm{L} + k \\,\\Delta$。\n- 情况 B (仅仿射增益和偏移): 选择 $\\alpha = 0.005 \\,\\mathrm{V}$ 和 $\\beta = 1.01$，并对于所有 $k$，设置 $T_k = \\alpha + \\beta \\,\\big(V_\\mathrm{L} + k \\,\\Delta\\big)$。\n- 情况 C (单个缺失码): 从情况 A 的理想 $T_k$ 开始，然后选择 $k^\\ast = 2000$；将 $T_{k^\\ast}$ 替换为 $T_{k^\\ast+1}$，所有其他 $T_k$ 保持不变。\n- 情况 D (平滑转换弓形误差): 选择 $A = 0.25\\,\\Delta$ 并对于所有 $k$，设置 $T_k = V_\\mathrm{L} + k \\,\\Delta + A \\,\\sin\\!\\big(2\\pi k / M\\big)$。\n\n对于每个测试用例，计算并报告：\n- 在索引为 $i \\in \\{1,\\dots,M-2\\}$ 的码元上的最大绝对 DNL，以 LSB 为单位，四舍五入到六位小数。\n- 在索引为 $k \\in \\{1,\\dots,M-1\\}$ 的转换点上的最大绝对 INL，以 LSB 为单位，四舍五入到六位小数。\n- 缺失码数量，为整数。\n- 按规定格式的严格递增布尔值。\n\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表，每个测试用例的结果按 $[$情况 A, 情况 B, 情况 C, 情况 D$]$ 的顺序作为一个子列表。每个子列表必须为 $[$maxAbsDNL,maxAbsINL,missingCount,strictlyIncreasing$]$ 的形式。输出字符串中不应包含任何空白字符。例如，一个语法上有效的形状是 $[[a,b,c,d],[e,f,g,h],\\dots]$，其中 $a,b,e,f$ 是四舍五入到六位小数的浮点数，$c,g$ 是整数，$d,h$ 是布尔值。",
            "solution": "题目陈述已经过严格审查，并被认定为有效。它在科学上基于模数转换器表征的原理，问题提出得当，信息充分且一致，并且表述客观。所有术语均为电子学和集成电路领域的标准术语。因此，我们可以进行正式求解。\n\n问题的核心是，根据给定的模数转换器 (ADC) 测得的码转换电压 $\\{T_k\\}_{k=1}^{M-1}$，计算其四项性能指标。分辨率为 $N=12$ 位，因此总码数为 $M = 2^{12} = 4096$。标称输入电压范围为 $[V_\\mathrm{L}, V_\\mathrm{H}] = [0.0 \\,\\mathrm{V}, 1.2 \\,\\mathrm{V}]$，这定义了理想最低有效位 (LSB) 大小为 $\\Delta = (V_\\mathrm{H} - V_\\mathrm{L}) / M = 1.2 / 4096 \\,\\mathrm{V}$。\n\n所有指标都需相对于端点拟合线进行计算，该线使用第一个和最后一个测得的转换电压 $T_1$ 和 $T_{M-1}$ 构建。\n\n**1. 端点拟合线与拟合 LSB ($\\Delta_{fit}$)**\n端点拟合线是一个仿射函数 $V_{fit}(k) = m \\cdot k + c$，它穿过点 $(k,V)=(1, T_1)$ 和 $(k,V)=(M-1, T_{M-1})$。该线的斜率 $m$ 定义了拟合的 LSB 大小，我们记为 $\\Delta_{fit}$。\n$$\n\\Delta_{fit} = \\frac{T_{M-1} - T_1}{(M-1) - 1} = \\frac{T_{M-1} - T_1}{M-2}\n$$\n根据此拟合，理想的转换电压由该线本身给出。使用点斜式，并代入点 $(1, T_1)$：\n$$\nV_{fit}(k) = T_1 + (k-1)\\Delta_{fit}\n$$\n\n**2. 微分非线性度 (DNL)**\n第 $i$ 个码元的 DNL 衡量的是其宽度与拟合 LSB 大小 $\\Delta_{fit}$ 的偏差。第 $i$ 个内部码元（对于 $i \\in \\{1, 2, \\dots, M-2\\}$）的宽度是 $W_i = T_{i+1} - T_i$。那么 DNL 为：\n$$\n\\mathrm{DNL}_i = \\frac{W_i - \\Delta_{fit}}{\\Delta_{fit}} = \\frac{T_{i+1} - T_i}{\\Delta_{fit}} - 1\n$$\n需要报告的值是所有指定码元上的最大绝对 DNL：$\\max_{i \\in \\{1,\\dots,M-2\\}} |\\mathrm{DNL}_i|$。\n\n**3. 积分非线性度 (INL)**\n第 $k$ 次转换的 INL 衡量的是测得的转换电压 $T_k$ 与其在拟合线上的理想位置 $V_{fit}(k)$ 的偏差。该偏差通过 $\\Delta_{fit}$进行归一化。\n$$\n\\mathrm{INL}_k = \\frac{T_k - V_{fit}(k)}{\\Delta_{fit}} = \\frac{T_k - (T_1 + (k-1)\\Delta_{fit})}{\\Delta_{fit}}\n$$\n根据端点拟合的构造，$\\mathrm{INL}_1$ 和 $\\mathrm{INL}_{M-1}$ 恒等于零。需要报告的值是所有转换点上的最大绝对 INL：$\\max_{k \\in \\{1,\\dots,M-1\\}} |\\mathrm{INL}_k|$。\n\n**4. 缺失码与单调性**\n当码元宽度为非正值时，就会出现缺失码。缺失码的数量是满足 $W_i = T_{i+1} - T_i \\le 0$ 的索引 $i \\in \\{1, \\dots, M-2\\}$ 的计数。\n如果所有码元宽度都严格为正，即对于所有被检查的索引 $k \\in \\{1, \\dots, M-2\\}$ 都有 $T_{k+1} - T_k > 0$，则 ADC 传递函数是严格递增（单调）的。这等同于没有缺失码。\n\n现在我们将这些定义应用于每个测试用例。\n\n**情况 A：理想阶梯**\n转换点为 $T_k = k\\Delta$。\n-\n$T_1 = \\Delta$ 且 $T_{M-1} = (M-1)\\Delta$。\n-\n$\\Delta_{fit} = \\frac{(M-1)\\Delta - \\Delta}{M-2} = \\frac{(M-2)\\Delta}{M-2} = \\Delta$。拟合的 LSB 就是理想 LSB。\n-\n$V_{fit}(k) = \\Delta + (k-1)\\Delta = k\\Delta = T_k$。拟合线与理想转换点重合。\n-\nDNL：码元宽度为 $W_i = T_{i+1} - T_i = (i+1)\\Delta - i\\Delta = \\Delta$。因此，对于所有 $i$，$\\mathrm{DNL}_i = (\\Delta - \\Delta_{fit})/\\Delta_{fit} = 0$。最大绝对 DNL 为 $0.0$。\n-\nINL：偏差为 $T_k - V_{fit}(k) = k\\Delta - k\\Delta = 0$。因此，对于所有 $k$，$\\mathrm{INL}_k = 0$。最大绝对 INL 为 $0.0$。\n-\n缺失码与单调性：由于 $W_i = \\Delta > 0$，没有缺失码（数量为 $0$），且序列是严格递增的 (True)。\n-\n**结果：** $[0.0, 0.0, 0, \\text{True}]$\n\n**情况 B：仿射增益和偏移**\n转换点为 $T_k = \\alpha + \\beta k\\Delta$，其中 $\\alpha=0.005$ 且 $\\beta=1.01$。\n-\n$T_1 = \\alpha + \\beta\\Delta$ 且 $T_{M-1} = \\alpha + \\beta(M-1)\\Delta$。\n-\n$\\Delta_{fit} = \\frac{(\\alpha + \\beta(M-1)\\Delta) - (\\alpha + \\beta\\Delta)}{M-2} = \\frac{\\beta(M-2)\\Delta}{M-2} = \\beta\\Delta$。\n-\n$V_{fit}(k) = T_1 + (k-1)\\Delta_{fit} = (\\alpha + \\beta\\Delta) + (k-1)\\beta\\Delta = \\alpha + k\\beta\\Delta = T_k$。端点拟合完美地模拟了仿射变换。\n-\nDNL 与 INL：与情况 A 一样，由于 $T_k = V_{fit}(k)$ 且 $W_i = \\beta\\Delta = \\Delta_{fit}$，DNL 和 INL 均恒等于零。最大绝对值为 $0.0$。\n-\n缺失码与单调性：$W_i = \\beta\\Delta > 0$。没有缺失码 ($0$)，严格递增 (True)。\n-\n**结果：** $[0.0, 0.0, 0, \\text{True}]$\n\n**情况 C：单个缺失码**\n转换点 $T'_k$ 是理想的 ($T_k=k\\Delta$)，除了 $k^\\ast=2000$ 处，此时 $T'_{2000} = T_{2001} = 2001\\Delta$。\n-\n$T'_1 = \\Delta$ 且 $T'_{M-1} = (M-1)\\Delta$。端点不受影响。\n-\n$\\Delta_{fit} = \\Delta$ 且 $V_{fit}(k) = k\\Delta$，与情况 A 相同。\n-\nDNL：我们检查 $i=2000$ 附近的码元宽度。\n-\n$W_{1999} = T'_{2000} - T'_{1999} = 2001\\Delta - 1999\\Delta = 2\\Delta$。$\\mathrm{DNL}_{1999} = (2\\Delta - \\Delta)/\\Delta = 1$。\n-\n$W_{2000} = T'_{2001} - T'_{2000} = 2001\\Delta - 2001\\Delta = 0$。$\\mathrm{DNL}_{2000} = (0 - \\Delta)/\\Delta = -1$。\n-\n其他的 $W_i = \\Delta$，所以 $\\mathrm{DNL}_i=0$。最大绝对 DNL 为 $1.0$。\n-\nINL: $\\mathrm{INL}_k = (T'_k - k\\Delta)/\\Delta$。这仅在 $k=2000$ 时非零。\n-\n$\\mathrm{INL}_{2000} = (T'_{2000} - 2000\\Delta)/\\Delta = (2001\\Delta - 2000\\Delta)/\\Delta = 1$。\n-\n最大绝对 INL 为 $1.0$。\n-\n缺失码与单调性：$W_{2000} = 0$，满足缺失码的准则。数量为 $1$。这也意味着序列不是严格递增的 (False)。\n-\n**结果：** $[1.0, 1.0, 1, \\text{False}]$\n\n**情况 D：平滑转换弓形误差**\n转换点为 $T_k = k\\Delta + A\\sin(2\\pi k/M)$，其中 $A=0.25\\Delta$。\n-\n$T_1 = \\Delta + A\\sin(2\\pi/M)$, $T_{M-1} = (M-1)\\Delta + A\\sin(2\\pi(M-1)/M) = (M-1)\\Delta - A\\sin(2\\pi/M)$。\n-\n$\\Delta_{fit} = \\frac{((M-1)\\Delta - A\\sin(2\\pi/M)) - (\\Delta + A\\sin(2\\pi/M))}{M-2} = \\Delta - \\frac{2A}{M-2}\\sin(2\\pi/M)$。$\\Delta_{fit}$ 略小于 $\\Delta$。\n-\n$V_{fit}(k) = T_1 + (k-1)\\Delta_{fit}$。\n-\nDNL：码元宽度为 $W_i = T_{i+1} - T_i = \\Delta + A(\\sin(\\frac{2\\pi(i+1)}{M}) - \\sin(\\frac{2\\pi i}{M}))$。使用泰勒展开，此宽度近似为 $W_i \\approx \\Delta + A\\frac{2\\pi}{M}\\cos(\\frac{2\\pi(i+0.5)}{M})$。DNL $\\frac{W_i - \\Delta_{fit}}{\\Delta_{fit}}$ 的最大幅值将出现在余弦项（代表正弦弓形误差的导数）取极值的地方。\n-\nINL：相对于拟合线的误差为 $T_k - V_{fit}(k)$。函数 $V_{fit}(k)$ 是 $T_k$ 曲线端点之间的线性插值。INL 测量的是正弦误差相对于连接其端点的弦的“弓形”程度。最大值出现在 $k \\approx M/4$ 和 $k \\approx 3M/4$ 附近。最大偏差将接近 $A$，使得最大绝对 INL 接近 $A/\\Delta_{fit} \\approx A/\\Delta = 0.25$。\n-\n缺失码与单调性：最小码元宽度出现在余弦项为 $-1$ 的地方，即 $i \\approx M/2$。最小宽度为 $W_{min} \\approx \\Delta - A\\frac{2\\pi}{M} = \\Delta(1 - 0.25 \\frac{2\\pi}{M})$。由于 $0.5\\pi/M \\ll 1$，所有宽度均为正值。没有缺失码 ($0$)，且序列是严格递增的 (True)。\n-\n精确的 DNL 和 INL 值需要进行数值计算。\n\n以下 Python 代码实现了对所有四种情况的这些计算。",
            "answer": "```python\nimport numpy as np\n\ndef compute_metrics(T_k, M):\n    \"\"\"\n    Computes DNL, INL, missing codes, and monotonicity for a given set of ADC transitions.\n\n    Args:\n        T_k (np.ndarray): Array of measured transition voltages {T_k} for k=1 to M-1.\n        M (int): Total number of ADC codes.\n\n    Returns:\n        tuple: (max_abs_dnl, max_abs_inl, missing_count, is_strictly_increasing)\n    \"\"\"\n    # 1. Endpoint Fit and Fitted LSB\n    T_1 = T_k[0]\n    T_M_minus_1 = T_k[M - 2]\n    delta_fit = (T_M_minus_1 - T_1) / (M - 2)\n\n    # 2. DNL Calculation\n    # Bins are indexed i from 1 to M-2, corresponding to widths T_{i+1} - T_i.\n    # In Python array terms, T_k has indices 0 to M-2.\n    # T_k[i] corresponds to T_{i+1}. T_k[i-1] corresponds to T_i.\n    # We calculate widths W_i = T_{i+1} - T_i for i = 1, ..., M-2.\n    # This corresponds to T_k[i] - T_k[i-1] for python index i = 1, ..., M-2.\n    widths = T_k[1:M-1] - T_k[0:M-2] # Correct range for i=1 to M-2\n    dnl = (widths / delta_fit) - 1\n    max_abs_dnl = np.max(np.abs(dnl))\n\n    # 3. INL Calculation\n    # For transitions k from 1 to M-1.\n    k_indices = np.arange(1, M)\n    v_fit = T_1 + (k_indices - 1) * delta_fit\n    inl = (T_k - v_fit) / delta_fit\n    max_abs_inl = np.max(np.abs(inl))\n\n    # 4. Missing Codes and Monotonicity\n    # Based on widths for bins i from 1 to M-2\n    missing_count = np.sum(widths = 0)\n    # Check T_{k+1}  T_k for k=1,...,M-2. This corresponds to widths W_k0.\n    is_strictly_increasing = (missing_count == 0)\n\n    return (max_abs_dnl, max_abs_inl, int(missing_count), is_strictly_increasing)\n\ndef solve():\n    \"\"\"\n    Main function to generate test cases and compute metrics.\n    \"\"\"\n    N = 12\n    M = 2**N\n    V_L = 0.0\n    V_H = 1.2\n    DELTA = (V_H - V_L) / M\n\n    # k is the transition index from 1 to M-1.\n    k_arr = np.arange(1, M, dtype=np.float64)\n\n    # Case A: Ideal ladder\n    T_k_A = V_L + k_arr * DELTA\n    \n    # Case B: Affine gain and offset\n    alpha = 0.005\n    beta = 1.01\n    T_k_B = alpha + beta * (V_L + k_arr * DELTA)\n    \n    # Case C: Single missing code\n    T_k_C = V_L + k_arr * DELTA\n    k_star = 2000\n    # T_k_C index k_star-1 corresponds to T_{k_star}\n    T_k_C[k_star - 1] = V_L + (k_star + 1) * DELTA\n\n    # Case D: Smooth transition bow\n    A = 0.25 * DELTA\n    T_k_D = V_L + k_arr * DELTA + A * np.sin(2 * np.pi * k_arr / M)\n    \n    test_cases = [T_k_A, T_k_B, T_k_C, T_k_D]\n    \n    all_results = []\n    for T_k in test_cases:\n        metrics = compute_metrics(T_k, M)\n        rounded_metrics = [\n            round(metrics[0], 6),\n            round(metrics[1], 6),\n            metrics[2],\n            metrics[3]\n        ]\n        all_results.append(rounded_metrics)\n\n    # Format output string\n    sub_results = []\n    for res in all_results:\n        s = f\"[{res[0]:.6f},{res[1]:.6f},{res[2]},{str(res[3]).lower()}]\"\n        sub_results.append(s)\n    \n    final_str = f\"[{','.join(sub_results)}]\"\n    print(final_str.replace(\" \",\"\"))\n\n# The user-facing answer requires a specific string format.\n# A small adjustment is made to the print statement in solve() to match the\n# expected output format exactly (e.g., 'True' vs 'true'). The problem\n# description implies a standard boolean representation. In many systems like JSON,\n# this is lowercase. A quick check of the problem statement for boolean format...\n# \"strictlyIncreasing$\" is a boolean. Let's assume standard lowercase JSON-style bools.\n# The user's provided example output `[[a,b,c,d],[e,f,g,h],...], where d,h are boolean`\n# is ambiguous. I'll stick to Python's `str()` which is `True/False`.\n# Re-reading the prompt: \"每个子列表必须为 $[$maxAbsDNL,maxAbsINL,missingCount,strictlyIncreasing$]$ 的形式。\"\n# The example has `[a,b,c,d]`. Let's use Python's default `str(bool)` which is 'True'/'False'.\n# Ah, I see a final requirement: \"输出字符串中不应包含任何空白字符\". `final_str.replace(\" \",\"\")` handles this.\n# Let's adjust the format of the boolean to be Python's native string representation.\n\ndef solve_for_output():\n    N = 12\n    M = 2**N\n    V_L, V_H = 0.0, 1.2\n    DELTA = (V_H - V_L) / M\n    k_arr = np.arange(1, M, dtype=np.float64)\n    \n    T_k_A = V_L + k_arr * DELTA\n    alpha, beta = 0.005, 1.01\n    T_k_B = alpha + beta * (V_L + k_arr * DELTA)\n    T_k_C = V_L + k_arr * DELTA\n    k_star = 2000\n    T_k_C[k_star - 1] = V_L + (k_star + 1) * DELTA\n    A = 0.25 * DELTA\n    T_k_D = V_L + k_arr * DELTA + A * np.sin(2 * np.pi * k_arr / M)\n    \n    all_results = []\n    for T_k in [T_k_A, T_k_B, T_k_C, T_k_D]:\n        metrics = compute_metrics(T_k, M)\n        all_results.append([round(metrics[0],6), round(metrics[1],6), metrics[2], metrics[3]])\n\n    output_str = str(all_results).replace(\" \", \"\")\n    # Python's str representation of a list of lists will have spaces after commas.\n    # The requirement is no whitespace.\n    # A manual build is better.\n    \n    sub_strs = []\n    for res in all_results:\n        # Format boolean as 'True' or 'False'\n        sub_strs.append(f\"[{res[0]:.6f},{res[1]:.6f},{res[2]},{str(res[3])}]\")\n    \n    return f\"[{','.join(sub_strs)}]\"\n\nprint(solve_for_output())\n```"
        },
        {
            "introduction": "在理解了INL的概念之后，本练习将深入探讨其在SAR ADC电容数模转换器（CDAC）内部的物理来源。您将使用描述器件失配的基本模型——Pelgrom定律，来确定为达到特定INL指标和给定制造良率所需的最小电容物理尺寸。这项练习将高层性能目标与集成电路的物理版图设计联系起来，是理论与实践结合的典范。",
            "id": "4255018",
            "problem": "一个分段式逐次逼近寄存器模数转换器 (SAR ADC) 使用一个由金属-绝缘体-金属 (MIM) 电容实现的电容式数模转换器 (DAC)。总分辨率为 $N=10$ 位。最高有效的 $K=5$ 位由一个温度计编码阵列实现，该阵列包含 $M=2^{K}$ 个相同的单位电容，并采用共质心布局以抑制系统性梯度；其余的最低有效 $N-K$ 位由二进制加权电容实现，在此设计中，与温度计编码部分相比，其对失配限制的静态非线性的贡献可以忽略不计。假设每个单位电容的随机失配是独立的、零均值的，并且失配遵循 Pelgrom 定律：相对失配的标准差可表示为\n$$\n\\frac{\\sigma_{\\Delta C}}{C_{u}}=\\frac{A_{C}}{\\sqrt{A_{u}}},\n$$\n其中 $C_{u}$ 是标稱单位电容值，$A_{u}$ 是单位电容的物理面积，$A_{C}$ 是与工艺相关的 MIM 电容的 Pelgrom 系数。积分非线性 (INL) 定义为静态传输函数与理想直线的最大偏差幅度，以整个 $N$ 位转换器的最低有效位 (LSB) 为单位表示。\n\n从第一性原理（器件失配统计和 DAC 输出比的小信号线性化）出发，推导出一个关于最小单位面积 $A_{u}$ 的闭式不等式，以保证整个 $N$ 位转换器由失配限制的峰值 INL 在 $99.7\\%$ 的良率下（即三个标准差）小于指定目标 $\\varepsilon$ LSB。然后，根据以下设计目标和工艺参数评估该最小面积：$N=10$，$K=5$，$\\varepsilon=0.25$ 以及 $A_{C}=0.01$ 微米。将最终面积 $A_{u}$ 以 $\\mu\\mathrm{m}^{2}$ 表示，并将您的答案四舍五入至四位有效数字。",
            "solution": "本问题要求在一个分段式逐次逼近寄存器 (SAR) 模数转换器 (ADC) 中，推导出一个关于最小单位电容面积 $A_u$ 的闭式不等式。这是为了确保由失配限制的峰值积分非线性 (INL) 在 $99.7\\%$ 的良率下保持在指定值 $\\varepsilon$ 以下。推导之后将进行数值计算。\n\n首先，我们建立电容式数模转换器 (DAC) 的模型并分析失配的影响。该 ADC 的总分辨率为 $N=10$ 位。最高有效位 (MSB) 部分包含 $K=5$ 位，是一个由 $M=2^{K}$ 个相同单位电容 $C_u$ 组成的温度计编码阵列。假设最低有效位 (LSB) 部分对失配引起的非线性的贡献可以忽略不计，因此我们的分析将仅集中于 MSB 温度计阵列。\n\n一个理想的电荷再分配 DAC 的输出是一个电压 $V_{DAC}$，该电压与数字输入码成正比。对于给定的数字码，电容阵列顶板上的电压由切换到参考电压 $V_{ref}$ 的电容与 DAC 总电容 $C_{TOT}$ 的比值决定。对于温度计编码的 MSB 部分，一个数字码 $m$（其中 $m$ 的范围从 $0$ 到 $M$）对应于选择 $m$ 个单位电容连接到 $V_{ref}$。\n\n在一个理想的 DAC 中，所有单位电容都相同 ($C_{u,i} = C_u$)，总电容为 $C_{TOT, ideal} = M C_u$，由 MSB 码 $m$ 生成的电压为 $V_{DAC, ideal}(m) = V_{ref} \\frac{m C_u}{M C_u} = V_{ref} \\frac{m}{M}$。\n\n实际上，每个电容都与其标稱值有一个小的随机偏差：$C_{u,i} = C_u + \\Delta C_i$。量 $\\Delta C_i$ 是独立的、同分布的随机变量，其均值为零 ($E[\\Delta C_i] = 0$)，方差为 $Var(\\Delta C_i) = \\sigma_{\\Delta C}^2$。\n\n实际总电容为 $C_{TOT} = \\sum_{i=1}^{M} C_{u,i} = M C_u + \\sum_{i=1}^{M} \\Delta C_i$。对于码 $m$ 切换的电容为 $\\sum_{i \\in S_m} C_{u,i} = m C_u + \\sum_{i \\in S_m} \\Delta C_i$，其中 $S_m$ 是所选择的 $m$ 个电容的集合。实际的 DAC 输出电压为：\n$$V_{DAC}(m) = V_{ref} \\frac{m C_u + \\sum_{i \\in S_m} \\Delta C_i}{M C_u + \\sum_{j=1}^{M} \\Delta C_j}$$\n对于小失配（$\\sum \\Delta C_j \\ll M C_u$），我们可以对表达式进行线性化：\n$$V_{DAC}(m) \\approx V_{ref} \\frac{m C_u + \\sum_{i \\in S_m} \\Delta C_i}{M C_u} \\left(1 - \\frac{\\sum_{j=1}^{M} \\Delta C_j}{M C_u}\\right) \\approx V_{ref} \\left( \\frac{m}{M} + \\frac{\\sum_{i \\in S_m} \\Delta C_i}{M C_u} - \\frac{m \\sum_{j=1}^{M} \\Delta C_j}{M^2 C_u} \\right)$$\n电压误差 $\\Delta V(m)$ 是实际电压与理想电压之差：\n$$\\Delta V(m) = V_{DAC}(m) - V_{DAC, ideal}(m) = \\frac{V_{ref}}{M C_u} \\left( \\sum_{i \\in S_m} \\Delta C_i - \\frac{m}{M} \\sum_{j=1}^{M} \\Delta C_j \\right)$$\n为了求此误差的方差，我们定义一个随机变量 $Y_m = \\sum_{i \\in S_m} \\Delta C_i - \\frac{m}{M} \\sum_{j=1}^{M} \\Delta C_j$。这可以重写为 $Y_m = \\sum_{j=1}^{M} \\alpha_j \\Delta C_j$，其中对于 $m$ 个被选中的电容，$\\alpha_j = 1 - \\frac{m}{M}$，对于 $M-m$ 个未被选中的电容，$\\alpha_j = -\\frac{m}{M}$。\n由于 $\\Delta C_j$ 是不相关的，所以 $Y_m$ 的方差为：\n$$Var(Y_m) = \\sum_{j=1}^{M} \\alpha_j^2 Var(\\Delta C_j) = \\sigma_{\\Delta C}^2 \\left( m\\left(1-\\frac{m}{M}\\right)^2 + (M-m)\\left(-\\frac{m}{M}\\right)^2 \\right)$$\n$$Var(Y_m) = \\sigma_{\\Delta C}^2 \\left( \\frac{m(M-m)^2}{M^2} + \\frac{(M-m)m^2}{M^2} \\right) = \\frac{\\sigma_{\\Delta C}^2}{M^2} [m(M-m)(M-m+m)] = \\sigma_{\\Delta C}^2 \\frac{m(M-m)}{M}$$\n电压误差的方差为 $\\sigma_{\\Delta V}^2(m) = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 Var(Y_m) = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 \\sigma_{\\Delta C}^2 \\frac{m(M-m)}{M}$。\n该方差在中间码 $m=\\frac{M}{2}$ 处达到最大值，这对应于此类误差的峰值 INL 位置。\n$$\\sigma_{\\Delta V, peak}^2 = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 \\sigma_{\\Delta C}^2 \\frac{(M/2)(M/2)}{M} = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 \\sigma_{\\Delta C}^2 \\frac{M}{4}$$\n峰值电压误差的标准差为 $\\sigma_{\\Delta V, peak} = \\frac{V_{ref}}{M C_u} \\sigma_{\\Delta C} \\frac{\\sqrt{M}}{2} = \\frac{V_{ref}}{2\\sqrt{M} C_u} \\sigma_{\\Delta C}$。\n\nINL 是以整个 $N$ 位转换器的最低有效位 (LSB) 为单位定义的，其中 $V_{LSB} = \\frac{V_{ref}}{2^N}$。峰值 INL 的标准差为：\n$$\\sigma_{INL, peak} = \\frac{\\sigma_{\\Delta V, peak}}{V_{LSB}} = \\frac{\\frac{V_{ref}}{2\\sqrt{M} C_u} \\sigma_{\\Delta C}}{\\frac{V_{ref}}{2^N}} = \\frac{2^N}{2\\sqrt{M}} \\frac{\\sigma_{\\Delta C}}{C_u}$$\n给定 $M=2^K$，我们有 $\\sqrt{M} = 2^{K/2}$。\n$$\\sigma_{INL, peak} = \\frac{2^N}{2 \\cdot 2^{K/2}} \\frac{\\sigma_{\\Delta C}}{C_u} = 2^{N - K/2 - 1} \\frac{\\sigma_{\\Delta C}}{C_u}$$\n良率要求为 $99.7\\%$，这对应于 $3\\sigma$ 的设计裕量。峰值 INL 必须小于 $\\varepsilon$：\n$$3 \\cdot \\sigma_{INL, peak}  \\varepsilon$$\n$$3 \\cdot 2^{N - K/2 - 1} \\frac{\\sigma_{\\Delta C}}{C_u}  \\varepsilon$$\n现在我们代入 Pelgrom 定律，$\\frac{\\sigma_{\\Delta C}}{C_{u}}=\\frac{A_{C}}{\\sqrt{A_{u}}}$：\n$$3 \\cdot 2^{N - K/2 - 1} \\frac{A_C}{\\sqrt{A_u}}  \\varepsilon$$\n我们现在可以通过求解 $\\sqrt{A_u}$ 来推导最小单位面积 $A_u$ 的不等式：\n$$\\sqrt{A_u} > \\frac{3 \\cdot A_C \\cdot 2^{N - K/2 - 1}}{\\varepsilon}$$\n两边平方，得到最小面积的最终闭式不等式：\n$$A_u > \\left( \\frac{3 \\cdot A_C \\cdot 2^{N - K/2 - 1}}{\\varepsilon} \\right)^2$$\n现在，我们根据给定的参数计算此表达式：$N=10$，$K=5$，$\\varepsilon=0.25$，以及 $A_C = 0.01\\ \\mu\\mathrm{m}$。\n指数为 $N - K/2 - 1 = 10 - \\frac{5}{2} - 1 = 10 - 2.5 - 1 = 6.5$。\n所需的最小面积 $A_{u,min}$ 为：\n$$A_{u,min} = \\left( \\frac{3 \\cdot (0.01) \\cdot 2^{6.5}}{0.25} \\right)^2$$\n我们来计算括号中的项：\n$$\\frac{3 \\cdot 0.01 \\cdot 2^6 \\cdot \\sqrt{2}}{0.25} = \\frac{0.03 \\cdot 64 \\cdot \\sqrt{2}}{0.25} = 4 \\cdot 1.92 \\cdot \\sqrt{2} = 7.68 \\sqrt{2}$$\n将此值平方得到面积：\n$$A_{u,min} = (7.68 \\sqrt{2})^2 = (7.68)^2 \\cdot 2 = 58.9824 \\cdot 2 = 117.9648$$\n$A_C$ 的单位是 $\\mu\\mathrm{m}$，因此 $A_u$ 的单位是 $\\mu\\mathrm{m}^2$。\n将结果四舍五入到四位有效数字，我们得到 $118.0$。",
            "answer": "$$\\boxed{118.0}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "本练习将深入探讨经典的 R-2R 梯形数模转换器（DAC）的内在噪声特性。通过应用叠加原理和线性网络理论，您将从约翰逊-奈奎斯特热噪声模型这一基本物理原理出发，推導整个电阻网络的总输出参考噪声。这个过程不仅能巩固您对电路分析基本工具的掌握，还能揭示为何这个复杂网络的噪声可以优雅地等效于单个电阻的噪声，从而加深对 R-2R 架构基本限制的理解。",
            "id": "4262690",
            "problem": "考虑一个理想的 $N$ 位电压模式 $R$-$2R$ 梯形数模转换器 (DAC)，其中每个“干路”电阻的阻值为 $R$，每个“分流”电阻的阻值为 $2R$。所有开关均为理想开关，将分流端的两端连接到零小信号阻抗的理想电压源。对于与噪声相关的小信号分析，将所有这些理想电源（包括参考电压和地）都视作小信号地。输出在梯形网络的末端获取，并由一个具有无穷输入阻抗（开路）的理想仪器进行观测。假设所有电阻都处于均匀温度 $T$ 下，并且是唯一的噪声源。每个电阻的热噪声被建模为一个串联电压源，对于一个阻值为 $R$ 的电阻，其单边功率谱密度为 $4 k_{B} T R$，其中 $k_{B}$ 是玻尔兹曼常数。\n\n请利用线性时不变电阻网络中不相关热噪声源的线性叠加原理，通过对梯形网络中所有电阻的贡献求和，推导出输出节点的总单边输出参考电压噪声功率谱密度。您的推导必须从约翰逊-奈奎斯特热噪声模型和基本电路网络定律开始，不得调用任何用于最终总噪声的捷径表达式。请以单个闭式解析表达式的形式提供您的最终结果，用 $R$、$T$、$k_{B}$ 以及（若相关）$N$ 来表示。将答案表示为单位为 $\\mathrm{V^{2}/Hz}$ 的单边电压噪声功率谱密度。无需进行数值计算或四舍五入；请给出精确的符号表达式。",
            "solution": "该问题要求计算一个理想 $N$ 位 $R$-$2R$ 梯形数模转换器的总单边输出参考电压噪声功率谱密度。本分析将利用不相关噪声源的线性叠加原理。\n\n首先，我们必须确定 $N$ 位 $R$-$2R$ 梯形网络的精确拓扑结构。问题描述这是一个电压模式梯形网络，其中“干路”电阻值为 $R$，“分流”电阻值为 $2R$。一个标准的、特性良好的、表现出恒定阻抗特性的 $R$-$2R$ 梯形网络，由 $N$ 个分流电阻（每个位 $b_{0}$ 到 $b_{N-1}$ 对应一个）、$N-1$ 个连接位节点的干路电阻以及一个终端电阻组成。为了使特性阻抗属性成立，这个终端电阻的阻值必须为 $2R$。此配置总共包含 $N$ 个阻值为 $2R$ 的分流电阻、$N-1$ 个阻值为 $R$ 的干路电阻和一个阻值为 $2R$ 的终端电阻。我们将假设采用这种标准的、带终端电阻的拓扑结构，因为这是对“理想 $R$-$2R$ 梯形网络”最常见的解释，并且能像此类典型问题一样，得出一个易于处理的简洁解。\n\n该电路在小信号条件下进行分析，此时所有理想直流电压源（包括 $V_{ref}$ 和地）都视作小信号地。输出在最高有效位 (MSB) 节点（我们将其表示为节点 $N-1$）获取，并连接到无穷阻抗的负载（开路）。\n\n在这些条件下，小信号等效电路是一个无源电阻网络。这种特定 R-2R 梯形网络拓扑的一个关键特性是，从任意节点 $k$ 向梯形网络“下方”（朝最低有效位 LSB 方向）看的等效电阻为 $2R$。因此，从输出端口（节点 $N-1$）看进去的戴维南等效电阻是该节点的分流电阻 $2R$ 与梯形网络其余部分的电阻 $2R$ 并联。于是，输出戴维南电阻为 $R_{Th, out} = 2R \\parallel 2R = R$。\n\n虽然温度均匀为 $T$ 的无源网络的总输出噪声 PSD 由 $4k_{B}TR_{Th}$ 给出，但题目明确要求通过对每个独立噪声电阻的贡献求和来进行推导。我们将使用叠加法，总输出噪声 PSD $S_{v,out}$ 是来自每个电阻的 PSD 之和，并按从该电阻的噪声源到输出的电压传输函数的平方进行加权。\n$S_{v,out} = \\sum_{i} |H_i|^2 S_{v,i}$\n其中 $S_{v,i}$ 是第 $i$ 个电阻的噪声 PSD，$H_i$ 是传输函数。一个阻值为 $R'$ 的电阻的噪声被建模为一个串联电压源，其单边 PSD 为 $S_v = 4k_B T R'$。\n\n为了找到每个噪声源的传输函数 $H_i = v_{out}/v_{n,i}$，我们使用互易定理。该定理指出，对于一个线性无源网络，$H_i$ 等于在输出端口注入电流 $I_{in}$ 时，流经第 $i$ 个噪声源短路位置的电流 $i_i$ 与注入电流 $I_{in}$ 的比值：$H_i = i_i / I_{in}$。\n\n让我们在输出节点 ($N-1$) 注入一个测试电流 $I_{in}$。输出电压为 $V_{out} = I_{in} R_{Th,out} = I_{in} R$。\n这个电流 $I_{in}$ 在节点 $N-1$ 处，在分流电阻 $R_{s,N-1}=2R$ 和阻抗同样为 $2R$ 的梯形网络其余部分之间分流。因此，沿干路向下流动的电流为 $I_{in}/2$。\n在随后的每个节点 $k$（从 $N-2$ 向下数到 $0$），从节点 $k+1$ 到达的电流在分流电阻 $R_{s,k}=2R$ 和其左侧（同样具有 $2R$ 阻抗）的梯形网络其余部分之间均匀分配。\n\n1.  **来自并联电阻的噪声 ($R_{s,k} = 2R$)**\n    共有 $N$ 个分流电阻，每个节点 $k$ (从 $0$ (LSB) 到 $N-1$ (MSB)) 处各有一个。每个电阻的噪声 PSD 为 $S_{v,s,k} = 4k_B T (2R) = 8k_B T R$。\n    从 MSB 侧到达节点 $k$ 的电流为 $I_{in} / 2^{N-1-k}$。这适用于 $k=0, ..., N-2$。对于 $k=N-1$，到达的电流是 $I_{in}$。\n    让我们先求出节点 $k$ 的电压。$V_k$ 是节点 $k$ 的电压。$V_{N-1} = I_{in} R$。电压沿梯形网络分压。$V_k = V_{k+1}/2$。因此，$V_k = V_{N-1}/2^{N-1-k} = (I_{in}R)/2^{N-1-k}$。\n    流过分流电阻 $R_{s,k}=2R$ 的电流 $i_{s,k}$ 为 $V_k / (2R)$。\n    $i_{s,k} = \\frac{I_{in}R}{2^{N-1-k} \\cdot 2R} = \\frac{I_{in}}{2^{N-k}}$。\n    传输函数为 $H_{s,k} = i_{s,k} / I_{in} = 1/2^{N-k}$。\n    所有 $N$ 个分流电阻的总贡献是：\n    $$ S_{v,out,shunts} = \\sum_{k=0}^{N-1} |H_{s,k}|^2 S_{v,s,k} = \\sum_{k=0}^{N-1} \\left(\\frac{1}{2^{N-k}}\\right)^2 (8k_BTR) = 8k_BTR \\sum_{k=0}^{N-1} \\frac{1}{4^{N-k}} $$\n    令 $j = N-k$。当 $k$ 从 $0$ 变到 $N-1$ 时，$j$ 从 $N$ 变到 $1$。\n    $$ S_{v,out,shunts} = 8k_BTR \\sum_{j=1}^{N} \\left(\\frac{1}{4}\\right)^j $$\n    这是一个首项 $a=1/4$、公比 $r=1/4$ 的几何级数。其和为 $a(1-r^N)/(1-r)$。\n    $$ S_{v,out,shunts} = 8k_BTR \\left[ \\frac{\\frac{1}{4}(1 - (1/4)^N)}{1 - 1/4} \\right] = 8k_BTR \\left[ \\frac{\\frac{1}{4}(1 - 4^{-N})}{3/4} \\right] = \\frac{8}{3} k_BTR(1 - 4^{-N}) $$\n\n2.  **来自干路电阻的噪声 ($R_{t,k} = R$)**\n    共有 $N-1$ 个干路电阻 $R_{t,k}$，连接节点 $k+1$ 和节点 $k$，其中 $k=0, \\dots, N-2$。每个电阻的噪声 PSD 为 $S_{v,t,k} = 4k_BTR$。\n    流过 $R_{t,k}$ 的电流 $i_{t,k}$ 是到达节点 $k+1$ 并沿梯形网络向下流动的电流。\n    到达节点 $k+1$ 的电流是 $I_{in}/2^{N-1-(k+1)} = I_{in}/2^{N-2-k}$。等等，我的索引有点混乱。\n    让我们系统地来看。从节点 $N-1$ 流向 $N-2$ 的电流是 $I_{in}/2$。从 $N-2$ 流向 $N-3$ 的电流是 $(I_{in}/2)/2 = I_{in}/4$。从节点 $k+1$ 流向节点 $k$ 的电流是 $i_{t,k} = I_{in}/2^{N-1-k}$。\n    传输函数是 $H_{t,k} = i_{t,k}/I_{in} = 1/2^{N-1-k}$。\n    所有 $N-1$ 个干路电阻的总贡献是：\n    $$ S_{v,out,trunks} = \\sum_{k=0}^{N-2} |H_{t,k}|^2 S_{v,t,k} = \\sum_{k=0}^{N-2} \\left(\\frac{1}{2^{N-1-k}}\\right)^2 (4k_BTR) = 4k_BTR \\sum_{k=0}^{N-2} \\frac{1}{4^{N-1-k}} $$\n    令 $j = N-1-k$。当 $k$ 从 $0$ 变到 $N-2$ 时，$j$ 从 $N-1$ 变到 $1$。\n    $$ S_{v,out,trunks} = 4k_BTR \\sum_{j=1}^{N-1} \\left(\\frac{1}{4}\\right)^j = 4k_BTR \\left[ \\frac{\\frac{1}{4}(1 - (1/4)^{N-1})}{1 - 1/4} \\right] = \\frac{4}{3}k_BTR(1 - 4^{-(N-1)}) $$\n\n3.  **来自终端电阻的噪声 ($R_{term} = 2R$)**\n    在梯形网络的 LSB 端有一个阻值为 $2R$ 的终端电阻。其噪声 PSD 为 $S_{v,term} = 4k_B T (2R) = 8k_BTR$。\n    从节点 $0$ 流入终端支路的电流是 $i_{term}$。从节点 $1$ 到达节点 $0$ 的电流是 $I_{in}/2^{N-1}$。这个电流在分流电阻 $R_{s,0}=2R$ 和终端电阻 $R_{term}=2R$ 之间分配。\n    所以，$i_{term} = (I_{in}/2^{N-1})/2 = I_{in}/2^N$。\n    传输函数是 $H_{term} = i_{term}/I_{in} = 1/2^N$。\n    对输出噪声的贡献是：\n    $$ S_{v,out,term} = |H_{term}|^2 S_{v,term} = \\left(\\frac{1}{2^N}\\right)^2 (8k_BTR) = \\frac{8k_BTR}{4^N} = 8k_BTR \\cdot 4^{-N} $$\n\n4.  **总输出噪声 PSD**\n    总噪声是这三部分贡献之和。\n    $$ S_{v,out} = S_{v,out,shunts} + S_{v,out,trunks} + S_{v,out,term} $$\n    $$ S_{v,out} = \\frac{8}{3} k_BTR(1 - 4^{-N}) + \\frac{4}{3} k_BTR(1 - 4^{-(N-1)}) + 8k_BTR \\cdot 4^{-N} $$\n    让我们展开并合并各项：\n    $$ S_{v,out} = k_BTR \\left[ \\frac{8}{3} - \\frac{8}{3}4^{-N} + \\frac{4}{3} - \\frac{4}{3}4^{-N+1} + 8 \\cdot 4^{-N} \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ \\left(\\frac{8}{3} + \\frac{4}{3}\\right) - \\frac{8}{3}4^{-N} - \\frac{4}{3} \\cdot 4 \\cdot 4^{-N} + 8 \\cdot 4^{-N} \\right] $$\n    $$ S_{vout} = k_BTR \\left[ \\frac{12}{3} - \\frac{8}{3}4^{-N} - \\frac{16}{3}4^{-N} + \\frac{24}{3} \\cdot 4^{-N} \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ 4 + 4^{-N} \\left(-\\frac{8}{3} - \\frac{16}{3} + \\frac{24}{3}\\right) \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ 4 + 4^{-N} \\left(\\frac{-24+24}{3}\\right) \\right] $$\n    $$ S_{v,out} = k_BTR [4 + 0] = 4k_BTR $$\n\n总的单边输出参考电压噪声功率谱密度为 $4k_{B}TR$。这个结果与位数 $N$ 无关，它对应于一个阻值为 $R$ 的单个电阻的约翰逊-奈奎斯特噪声，而这个 $R$ 正是从输出端看到的梯形网络的戴维南等效电阻。",
            "answer": "$$ \\boxed{4 k_{B} T R} $$"
        },
        {
            "introduction": "在理想模型之外，数模转换器的动态性能是衡量其速度的关键。本练习将现实世界中的主要限制——输出级的 $RC$ 时间常数——与DAC的动态指标联系起来。您将推导时间域的建立时间（settling time）和频率域的带宽平坦度（bandwidth flatness）如何共同限制DAC可合成信号的最高频率，从而在实践中掌握性能权衡的分析方法。",
            "id": "4262631",
            "problem": "一个分段式电流舵数模转换器 (DAC) 驱动一个外部负载。在感兴趣的信号频带内，该负载可以被建模为一个有效小信号输出电阻 $R_o$ 和一个并联电容 $C_L$，共同构成一个一阶线性时不变网络。同样的小信号模型也捕捉了一个 R-2R 梯形 DAC 在其输出节点通过 Thevenin 等效电路观察时所呈现的主导极点行为。该 DAC 用于合成频率为 $f_{\\mathrm{out}}$ 的正弦波，其方式是以 $f_u = M f_{\\mathrm{out}}$ 的均匀速率通过非归零切换来更新其输出码，其中 M 是每个正弦波周期内的码字更新次数。\n\n给定条件如下：\n- 分辨率 $N = 12$ 位。\n- 有效输出电阻 $R_o = 50$ 欧姆。\n- 输出负载电容 $C_L = 5$ pF。\n- 每个周期的采样数 $M = 8$。\n- 线性度要求：对于任何不超过满量程阶跃的码字转换，下一次更新前的残余建立误差必须严格小于二分之一个最低有效位。\n- 带内平坦度要求：在频率 $f_{\\mathrm{out}}$ 处的幅度响应不得小于其直流幅度的 $(1 - \\delta)$ 倍，其中 $\\delta = 0.01$。\n\n从一阶线性时不变系统的阶跃响应和频率响应的基本性质以及 N 位转换器最低有效位的定义出发，推导分别由建立时间和带内平坦度要求所决定的 $f_{\\mathrm{out}}$ 的两个独立上限的闭式表达式。然后，根据给定的数值，确定同时满足这两个上限的单一最大 $f_{\\mathrm{out}}$。将最终的最大频率以 MHz 为单位表示，并将答案四舍五入到三位有效数字。",
            "solution": "该问题要求确定一个数模转换器 (DAC) 的最大输出信号频率 $f_{\\mathrm{out}}$，该转换器受到两个独立约束条件的限制：时域上的建立要求和频域上的平坦度要求。DAC 的输出级被建模为一个一阶线性时不变 (LTI) 系统，其输出电阻为 $R_o$，负载电容为 $C_L$。\n\n首先，我们定义这个一阶系统的时间常数 $\\tau$，它决定了系统的瞬态响应和频率响应：\n$$\n\\tau = R_o C_L\n$$\n该系统的传递函数 $H(s)$ 为：\n$$\nH(s) = \\frac{1}{1 + s\\tau}\n$$\n\n### 1. 建立要求\n建立要求规定了 DAC 输出在输入数字码变化后的行为。DAC 以速率 $f_u$ 更新其输出，因此可用于建立的时间是更新周期 $T_u = 1/f_u$。题目中指出 $f_u = M f_{\\mathrm{out}}$，所以建立时间为 $t_{\\mathrm{settle}} = T_u = \\frac{1}{M f_{\\mathrm{out}}}$。\n\n一阶系统对幅度为 $\\Delta V$ 的阶跃输入（从初始电压 $V_i$ 到最终电压 $V_f = V_i + \\Delta V$）的响应由下式给出：\n$$\nV(t) = V_f - (V_f - V_i) \\exp\\left(-\\frac{t}{\\tau}\\right) = V_f - \\Delta V \\exp\\left(-\\frac{t}{\\tau}\\right)\n$$\n在时间 $t$ 的建立误差是瞬时电压与最终电压之差：\n$$\nE(t) = |V(t) - V_f| = |\\Delta V| \\exp\\left(-\\frac{t}{\\tau}\\right)\n$$\n题目要求，对于任何不超过满量程阶跃的码字转换，在更新周期结束时（$t_{\\mathrm{settle}} = T_u$），残余建立误差必须小于二分之一个最低有效位 (LSB)。\n\n对于一个具有满量程电压范围 $V_{FS}$ 的 N 位 DAC，LSB 电压定义为：\n$$\nV_{LSB} = \\frac{V_{FS}}{2^N}\n$$\n建立误差的条件是：\n$$\nE(T_u)  \\frac{1}{2} V_{LSB} = \\frac{1}{2} \\frac{V_{FS}}{2^N} = \\frac{V_{FS}}{2^{N+1}}\n$$\n为确保此条件在最坏情况下成立，我们必须考虑可能的最大电压阶跃，即满量程阶跃 $\\Delta V = V_{FS}$。将 $\\Delta V = V_{FS}$ 和 $t = T_u$ 代入误差方程：\n$$\nV_{FS} \\exp\\left(-\\frac{T_u}{\\tau}\\right)  \\frac{V_{FS}}{2^{N+1}}\n$$\n$V_{FS}$ 项可以消去，这很好，因为它的值并未给出：\n$$\n\\exp\\left(-\\frac{T_u}{\\tau}\\right)  \\frac{1}{2^{N+1}}\n$$\n对两边取自然对数：\n$$\n-\\frac{T_u}{\\tau}  \\ln\\left(\\frac{1}{2^{N+1}}\\right) = -(N+1)\\ln(2)\n$$\n两边乘以 -1，不等号反向：\n$$\n\\frac{T_u}{\\tau} > (N+1)\\ln(2)\n$$\n现在，我们代入 $T_u = \\frac{1}{M f_{\\mathrm{out}}}$ 来求 $f_{\\mathrm{out}}$ 的边界：\n$$\n\\frac{1}{M f_{\\mathrm{out}} \\tau} > (N+1)\\ln(2)\n$$\n解出 $f_{\\mathrm{out}}$ 得到第一个上限，我们将其记为 $f_{\\mathrm{out,settle}}$：\n$$\nf_{\\mathrm{out}}  \\frac{1}{M \\tau (N+1)\\ln(2)} \\quad \\implies \\quad f_{\\mathrm{out,settle}} = \\frac{1}{M R_o C_L (N+1)\\ln(2)}\n$$\n\n### 2. 带内平坦度要求\n平坦度要求关系到系统频率响应的幅度。频率响应为 $H(j\\omega)$，其中 $\\omega = 2\\pi f$。其幅度为：\n$$\n|H(j\\omega)| = \\left|\\frac{1}{1 + j\\omega\\tau}\\right| = \\frac{1}{\\sqrt{1 + (\\omega\\tau)^2}} = \\frac{1}{\\sqrt{1 + (2\\pi f \\tau)^2}}\n$$\n直流增益（在 $f=0$ 时）为 $|H(j0)| = 1$。平坦度要求指出，在信号频率 $f_{\\mathrm{out}}$ 处的幅度响应不得小于直流增益的 $(1-\\delta)$ 倍：\n$$\n|H(j2\\pi f_{\\mathrm{out}})| \\ge 1 - \\delta\n$$\n代入幅度响应的表达式：\n$$\n\\frac{1}{\\sqrt{1 + (2\\pi f_{\\mathrm{out}} \\tau)^2}} \\ge 1 - \\delta\n$$\n由于两边都为正，我们可以对它们取倒数，这会使不等号反向：\n$$\n\\sqrt{1 + (2\\pi f_{\\mathrm{out}} \\tau)^2} \\le \\frac{1}{1 - \\delta}\n$$\n两边平方：\n$$\n1 + (2\\pi f_{\\mathrm{out}} \\tau)^2 \\le \\frac{1}{(1 - \\delta)^2}\n$$\n$$\n(2\\pi f_{\\mathrm{out}} \\tau)^2 \\le \\frac{1}{(1 - \\delta)^2} - 1 = \\frac{1 - (1 - \\delta)^2}{(1 - \\delta)^2} = \\frac{1 - (1 - 2\\delta + \\delta^2)}{(1 - \\delta)^2} = \\frac{2\\delta - \\delta^2}{(1 - \\delta)^2}\n$$\n对两边取平方根（并注意所有项均为正）：\n$$\n2\\pi f_{\\mathrm{out}} \\tau \\le \\frac{\\sqrt{2\\delta - \\delta^2}}{1 - \\delta}\n$$\n解出 $f_{\\mathrm{out}}$ 得到第二个上限，我们将其记为 $f_{\\mathrm{out,flat}}$：\n$$\nf_{\\mathrm{out}} \\le \\frac{1}{2\\pi \\tau} \\frac{\\sqrt{2\\delta - \\delta^2}}{1 - \\delta} \\quad \\implies \\quad f_{\\mathrm{out,flat}} = \\frac{1}{2\\pi R_o C_L} \\frac{\\sqrt{2\\delta - \\delta^2}}{1 - \\delta}\n$$\n\n### 3. 数值计算\n最大频率 $f_{\\mathrm{out,max}}$ 必须同时满足两个约束条件，因此它是两个推导出的上限中的较小者：\n$$\nf_{\\mathrm{out,max}} = \\min(f_{\\mathrm{out,settle}}, f_{\\mathrm{out,flat}})\n$$\n我们已知以下数值：\n- $N = 12$\n- $R_o = 50 \\, \\Omega$\n- $C_L = 5 \\, \\text{pF} = 5 \\times 10^{-12} \\, \\text{F}$\n- $M = 8$\n- $\\delta = 0.01$\n\n首先，计算时间常数 $\\tau$：\n$$\n\\tau = R_o C_L = (50) \\times (5 \\times 10^{-12}) = 250 \\times 10^{-12} \\, \\text{s} = 2.5 \\times 10^{-10} \\, \\text{s}\n$$\n接下来，计算 $f_{\\mathrm{out,settle}}$：\n$$\nf_{\\mathrm{out,settle}} = \\frac{1}{8 \\times (2.5 \\times 10^{-10}) \\times (12+1) \\ln(2)} = \\frac{1}{2 \\times 10^{-9} \\times 13 \\ln(2)} = \\frac{1}{2.6 \\times 10^{-8} \\ln(2)}\n$$\n$$\nf_{\\mathrm{out,settle}} \\approx \\frac{1}{(2.6 \\times 10^{-8}) \\times 0.69315} \\approx \\frac{1}{1.80219 \\times 10^{-8}} \\approx 5.5488 \\times 10^7 \\, \\text{Hz} = 55.488 \\, \\text{MHz}\n$$\n现在，计算 $f_{\\mathrm{out,flat}}$：\n$$\nf_{\\mathrm{out,flat}} = \\frac{1}{2\\pi (2.5 \\times 10^{-10})} \\frac{\\sqrt{2(0.01) - (0.01)^2}}{1 - 0.01} = \\frac{1}{5\\pi \\times 10^{-10}} \\frac{\\sqrt{0.02 - 0.0001}}{0.99}\n$$\n$$\nf_{\\mathrm{out,flat}} = \\frac{1}{5\\pi \\times 10^{-10}} \\frac{\\sqrt{0.0199}}{0.99} \\approx \\frac{1}{1.5708 \\times 10^{-9}} \\frac{0.14107}{0.99} \\approx (6.3662 \\times 10^8) \\times (0.14249) \\approx 9.0705 \\times 10^7 \\, \\text{Hz} = 90.705 \\, \\text{MHz}\n$$\n最后，我们求得总的最大频率：\n$$\nf_{\\mathrm{out,max}} = \\min(55.488 \\, \\text{MHz}, 90.705 \\, \\text{MHz}) = 55.488 \\, \\text{MHz}\n$$\n题目要求结果以 MHz 表示，并四舍五入到三位有效数字。\n$$\nf_{\\mathrm{out,max}} \\approx 55.5 \\, \\text{MHz}\n$$\n建立时间要求是更严格的约束条件，它限制了最大输出频率。",
            "answer": "$$\n\\boxed{55.5}\n$$"
        },
        {
            "introduction": "一个高性能的数模转换器并非孤立存在，它必须能在复杂的系统中稳定工作。本练习将带您从系统集成的角度思考，分析电源噪声如何通过参考电压缓冲器影响DAC的精度。您将学习如何将顶层的性能指标（输出误差小于 $0.1$ 个最低有效位）转化为对关键子模块（参考缓冲器）的具体设计规范（电源抑制比PSRR），这是现代集成电路设计中的一项核心技能。",
            "id": "4262622",
            "problem": "一个分辨率为 $N = 14$ 的分段式电流舵数模转换器 (DAC) 使用一个参考缓冲器为其单位电流源生成一个稳定的参考电压 $V_{\\mathrm{ref}} = 1.2\\,\\mathrm{V}$。每个单位电流与 $V_{\\mathrm{ref}}$ 成正比，输出电压是通过对导引的电流求和，在阻性负载上产生的。为参考缓冲器供电的电源表现出有界的正弦波纹波，其峰值幅度为 $\\Delta V_{\\mathrm{DD}} = 10\\,\\mathrm{mV}$，在 $f \\in [10\\,\\mathrm{kHz}, 10\\,\\mathrm{MHz}]$ 的频带内近似恒定。忽略所有非理想性，除了电源纹波通过参考缓冲器对参考电压的调制效应。\n\n从最低有效位 (LSB)、满量程码和小信号灵敏度的定义出发，仅使用基本原理，推导参考缓冲器所需的最小电源抑制比 (PSRR) 的幅值（以分贝表示），使得对于任何 DAC 码值，在整个目标频带内，由纹波引起的输出电压误差的峰值幅度严格小于 $0.1\\,\\mathrm{LSB}$。假设码值灵敏度为最坏情况，并且参考缓冲器的 PSRR 幅值在指定频带内与频率无关。\n\n请将最终答案表示为单个实数，单位为分贝 (dB)，并四舍五入到三位有效数字。在最终的方框答案中不要包含单位。",
            "solution": "目标是将在所有码值和指定频带范围内，由纹波引起的输出误差限制在最低有效位 (LSB) 的一小部分以下。我们的方法是将参考电压的小信号扰动与 DAC 输出电压联系起来，然后将其转化为对参考缓冲器电源抑制比 (PSRR) 的要求。\n\n首先，我们将输出电压误差与参考电压扰动联系起来。DAC 的输出电压 $V_{\\mathrm{out}}(k)$ 与数字码 $k$ 和参考电压 $V_{\\mathrm{ref}}$ 成正比。因此，输出电压的小信号变化 $\\delta V_{\\mathrm{out}}(k)$ 与参考电压的小信号变化 $\\delta V_{\\mathrm{ref}}$ 的关系为：\n$$\n\\delta V_{\\mathrm{out}}(k) = V_{\\mathrm{out}}(k)\\,\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}.\n$$\n最坏情况下的灵敏度发生在最大码值 $k = 2^{N}-1$ 处，此时的输出电压 $V_{\\mathrm{out,max}}$ 为最大。根据文章定义，该最大电压为 $V_{\\mathrm{out,max}} = (2^N-1)V_{\\mathrm{LSB}}$，其中 $V_{\\mathrm{LSB}}$ 是最低有效位对应的电压。因此，最坏情况下由纹波引起的输出误差幅度为\n$$\n|\\delta V_{\\mathrm{out,pk}}| = (2^N - 1) V_{\\mathrm{LSB}} \\left|\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|.\n$$\n为了将此误差限制在 $0.1 V_{\\mathrm{LSB}}$ 以下，我们要求\n$$\n(2^N - 1) V_{\\mathrm{LSB}} \\left|\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|  0.1\\,V_{\\mathrm{LSB}}.\n$$\n消去两边的 $V_{\\mathrm{LSB}}$，得到允许的参考电压相对纹波的基本界限：\n$$\n\\left|\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|  \\frac{0.1}{2^{N} - 1}.\n$$\n\n接下来，通过电源抑制比 (PSRR) 将参考电压的扰动与电源纹波联系起来。定义从电源纹波到参考输出纹波的幅度传递函数为\n$$\n|H_{\\mathrm{ps}}(f)| \\equiv \\left|\\frac{\\delta V_{\\mathrm{ref}}(f)}{\\delta V_{\\mathrm{DD}}(f)}\\right|.\n$$\n以分贝表示的电源抑制比 (PSRR) 幅值为\n$$\n\\mathrm{PSRR}_{\\mathrm{dB}}(f) = 20 \\log_{10}\\!\\left(\\frac{1}{|H_{\\mathrm{ps}}(f)|}\\right) = -20 \\log_{10}\\!\\left(|H_{\\mathrm{ps}}(f)|\\right).\n$$\n对 $|H_{\\mathrm{ps}}(f)|$ 的要求可从允许的参考电压相对纹波得出：\n$$\n|H_{\\mathrm{ps}}(f)|\\,\\frac{|\\delta V_{\\mathrm{DD}}(f)|}{V_{\\mathrm{ref}}}  \\frac{0.1}{2^{N} - 1} \\quad \\Rightarrow \\quad |H_{\\mathrm{ps}}(f)|  \\frac{0.1\\,V_{\\mathrm{ref}}}{(2^{N} - 1)\\,|\\delta V_{\\mathrm{DD}}(f)|}.\n$$\n等效地，所需的最小 PSRR 幅值（以分贝表示）为\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}}(f) = 20 \\log_{10}\\!\\left(\\frac{(2^{N} - 1)\\,|\\delta V_{\\mathrm{DD}}(f)|}{0.1\\,V_{\\mathrm{ref}}}\\right).\n$$\n在题目中，纹波峰值幅度在 $f \\in [10\\,\\mathrm{kHz}, 10\\,\\mathrm{MHz}]$ 频带内不随频率变化，即 $|\\delta V_{\\mathrm{DD}}(f)| = \\Delta V_{\\mathrm{DD}} = 10\\,\\mathrm{mV} = 0.01\\,\\mathrm{V}$。因此，所需的 PSRR 在该频带内与频率无关，其数值计算结果为\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}} = 20 \\log_{10}\\!\\left(\\frac{(2^{14} - 1)\\times 0.01}{0.1 \\times 1.2}\\right) = 20 \\log_{10}\\!\\left(\\frac{16383 \\times 0.01}{0.12}\\right).\n$$\n计算对数内的比率：\n$$\n\\frac{16383 \\times 0.01}{0.12} = \\frac{163.83}{0.12} \\approx 1365.25.\n$$\n因此\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}} \\approx 20 \\log_{10}\\!\\left(1365.25\\right).\n$$\n使用 $\\log_{10}\\!\\left(1365.25\\right) \\approx 3.1351$ 可得\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}} \\approx 20 \\times 3.1351 \\approx 62.702.\n$$\n四舍五入到三位有效数字，所需的最小 PSRR 幅值为\n$$\n62.7\\,\\mathrm{dB}.\n$$\n因为在指定频带内纹波幅度的界限是恒定的，并且推导过程没有引入任何额外的频率依赖性，所以这个单一数值对所有 $f \\in [10\\,\\mathrm{kHz}, 10\\,\\mathrm{MHz}]$ 都统一适用。",
            "answer": "$$\\boxed{62.7}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Understanding the intrinsic noise floor is the first step in assessing the ultimate resolution of a Digital-to-Analog Converter. This exercise guides you through a rigorous derivation of the total output-referred thermal noise in an ideal R-2R ladder DAC . By applying the principle of superposition to sum the contributions from every noisy resistor, you will not only practice fundamental circuit analysis techniques but also uncover an elegant and important result about the ladder's noise performance.",
            "id": "4262690",
            "problem": "Consider an ideal $N$-bit voltage-mode $R$-$2R$ ladder Digital-to-Analog Converter (DAC), where each \"trunk\" resistor has value $R$ and each shunt resistor has value $2R$. All switches are ideal and connect the shunt ends to ideal voltage sources of zero small-signal impedance. For small-signal analysis relevant to noise, treat all these ideal sources (including the voltage reference and ground) as small-signal grounds. The output is taken at the end of the ladder and is observed by an ideal instrument with infinite input impedance (open-circuit). Assume all resistors are at a uniform temperature $T$ and are the only noise sources. Each resistor’s thermal noise is modeled as a series voltage source with one-sided power spectral density $4 k_{B} T R$ for a resistor of value $R$, where $k_{B}$ is the Boltzmann constant.\n\nUsing the principle of linear superposition in a linear time-invariant resistive network with uncorrelated thermal noise sources, derive the total one-sided output-referred voltage noise power spectral density at the output node by summing the contributions of all resistors in the ladder. Your derivation must start from the Johnson–Nyquist thermal noise model and basic circuit network laws without invoking any shortcut expressions for the final total noise. Provide your final result as a single closed-form analytic expression in terms of $R$, $T$, $k_{B}$, and, if relevant, $N$. Express the answer as a one-sided voltage noise power spectral density in $\\mathrm{V^{2}/Hz}$. No numerical evaluation or rounding is required; give an exact symbolic expression.",
            "solution": "The problem asks for the total one-sided output-referred voltage noise power spectral density of an ideal $N$-bit $R$-$2R$ ladder DAC. The analysis will be performed by leveraging the principle of linear superposition for uncorrelated noise sources.\n\nFirst, we must establish the precise topology of the $N$-bit $R$-$2R$ ladder. The problem states it is a voltage-mode ladder with \"trunk\" resistors of value $R$ and \"shunt\" resistors of value $2R$. A standard, well-behaved $R$-$2R$ ladder, which exhibits a constant impedance property, consists of $N$ shunt resistors (one for each bit, $b_{0}$ to $b_{N-1}$), $N-1$ trunk resistors connecting the bit-nodes, and a terminating resistor. For the characteristic impedance property to hold, this terminating resistor must have a value of $2R$. This configuration comprises a total of $N$ shunt resistors of value $2R$, $N-1$ trunk resistors of value $R$, and one terminating resistor of value $2R$. We will assume this standard, terminated topology, as it is the most common interpretation of an \"ideal $R$-$2R$ ladder\" and leads to a tractable, elegant solution as is typical for such problems.\n\nThe circuit is analyzed under small-signal conditions, where all ideal DC voltage sources (including $V_{ref}$ and ground) are treated as small-signal grounds. The output is taken at the most significant bit (MSB) node, which we denote as node $N-1$, and is connected to a load with infinite impedance (open-circuit).\n\nUnder these conditions, the small-signal equivalent circuit is a passive resistive network. A key property of this specific R-2R ladder topology is that the equivalent resistance looking \"down\" the ladder (towards the least significant bit, LSB) from any node $k$ is $2R$. Consequently, the Thévenin equivalent resistance looking into the output port (node $N-1$) is the shunt resistor at that node, $2R$, in parallel with the resistance of the rest of the ladder, $2R$. Thus, the output Thévenin resistance is $R_{Th, out} = 2R \\parallel 2R = R$.\n\nWhile the total output noise PSD of a passive network at uniform temperature $T$ is given by $4k_{B}TR_{Th}$, the problem explicitly requires a derivation by summing the contributions from each individual noisy resistor. We will use superposition, where the total output noise PSD, $S_{v,out}$, is the sum of the PSDs from each resistor, weighted by the square of the voltage transfer function from that resistor's noise source to the output.\n$S_{v,out} = \\sum_{i} |H_i|^2 S_{v,i}$\nwhere $S_{v,i}$ is the noise PSD of the $i$-th resistor and $H_i$ is the transfer function. The noise from a resistor of value $R'$ is modeled as a series voltage source with one-sided PSD $S_v = 4k_B T R'$.\n\nTo find the transfer function $H_i = v_{out}/v_{n,i}$ for each noise source, we use the principle of reciprocity. This states that for a linear passive network, $H_i$ is equal to the ratio of the current $i_i$ flowing through the short-circuited location of the $i$-th noise source to a current $I_{in}$ injected at the output port: $H_i = i_i / I_{in}$.\n\nLet's inject a test current $I_{in}$ into the output node ($N-1$). The output voltage is $V_{out} = I_{in} R_{Th,out} = I_{in} R$.\nThis current $I_{in}$ splits at node $N-1$ between the shunt resistor $R_{s,N-1}=2R$ and the rest of the ladder, which has an impedance of $2R$. The current flowing down the ladder trunk is therefore $I_{in}/2$.\nAt each subsequent node $k$ (counting down from $N-2$ to $0$), the current arriving from node $k+1$ splits evenly between the shunt resistor $R_{s,k}=2R$ and the rest of the ladder to its left (which also has an impedance of $2R$).\n\n1.  **Noise from Shunt Resistors ($R_{s,k} = 2R$)**\n    There are $N$ shunt resistors, one at each node $k$ from $0$ (LSB) to $N-1$ (MSB). The noise PSD of each is $S_{v,s,k} = 4k_B T (2R) = 8k_B T R$.\n    The voltage at node $k$ is $V_k$. We know $V_{N-1} = I_{in} R$. The voltage divides down the ladder such that $V_k = V_{k+1}/2$. Thus, $V_k = V_{N-1}/2^{N-1-k} = (I_{in}R)/2^{N-1-k}$.\n    The current $i_{s,k}$ through the shunt resistor $R_{s,k}=2R$ is $V_k / (2R)$.\n    $i_{s,k} = \\frac{I_{in}R}{2^{N-1-k} \\cdot 2R} = \\frac{I_{in}}{2^{N-k}}$.\n    The transfer function is $H_{s,k} = i_{s,k} / I_{in} = 1/2^{N-k}$.\n    The total contribution from all $N$ shunt resistors is:\n    $$ S_{v,out,shunts} = \\sum_{k=0}^{N-1} |H_{s,k}|^2 S_{v,s,k} = \\sum_{k=0}^{N-1} \\left(\\frac{1}{2^{N-k}}\\right)^2 (8k_BTR) = 8k_BTR \\sum_{k=0}^{N-1} \\frac{1}{4^{N-k}} $$\n    Let $j = N-k$. As $k$ goes from $0$ to $N-1$, $j$ goes from $N$ to $1$.\n    $$ S_{v,out,shunts} = 8k_BTR \\sum_{j=1}^{N} \\left(\\frac{1}{4}\\right)^j $$\n    This is a geometric series with first term $a=1/4$ and ratio $r=1/4$. The sum is $a(1-r^N)/(1-r)$.\n    $$ S_{v,out,shunts} = 8k_BTR \\left[ \\frac{\\frac{1}{4}(1 - (1/4)^N)}{1 - 1/4} \\right] = 8k_BTR \\left[ \\frac{\\frac{1}{4}(1 - 4^{-N})}{3/4} \\right] = \\frac{8}{3} k_BTR(1 - 4^{-N}) $$\n\n2.  **Noise from Trunk Resistors ($R_{t,k} = R$)**\n    There are $N-1$ trunk resistors, $R_{t,k}$, connecting node $k+1$ to node $k$, for $k=0, \\dots, N-2$. The noise PSD of each is $S_{v,t,k} = 4k_BTR$.\n    The current $i_{t,k}$ flowing through $R_{t,k}$ is the current that arrives at node $k+1$ and proceeds down the ladder. The current flowing from node $k+1$ to node $k$ is $i_{t,k} = I_{in}/2^{N-1-k}$.\n    The transfer function is $H_{t,k} = i_{t,k}/I_{in} = 1/2^{N-1-k}$.\n    The total contribution from all $N-1$ trunk resistors is:\n    $$ S_{v,out,trunks} = \\sum_{k=0}^{N-2} |H_{t,k}|^2 S_{v,t,k} = \\sum_{k=0}^{N-2} \\left(\\frac{1}{2^{N-1-k}}\\right)^2 (4k_BTR) = 4k_BTR \\sum_{k=0}^{N-2} \\frac{1}{4^{N-1-k}} $$\n    Let $j = N-1-k$. As $k$ goes from $0$ to $N-2$, $j$ goes from $N-1$ to $1$.\n    $$ S_{v,out,trunks} = 4k_BTR \\sum_{j=1}^{N-1} \\left(\\frac{1}{4}\\right)^j = 4k_BTR \\left[ \\frac{\\frac{1}{4}(1 - (1/4)^{N-1})}{1 - 1/4} \\right] = \\frac{4}{3}k_BTR(1 - 4^{-(N-1)}) $$\n\n3.  **Noise from the Termination Resistor ($R_{term} = 2R$)**\n    There is one terminating resistor of value $2R$ at the LSB end of the ladder. Its noise PSD is $S_{v,term} = 4k_B T (2R) = 8k_BTR$.\n    The current arriving at node $0$ from node $1$ is $I_{in}/2^{N-1}$. This current splits between the shunt resistor $R_{s,0}=2R$ and the termination resistor $R_{term}=2R$.\n    The current through the termination resistor is thus $i_{term} = (I_{in}/2^{N-1})/2 = I_{in}/2^N$.\n    The transfer function is $H_{term} = i_{term}/I_{in} = 1/2^N$.\n    The contribution to the output noise is:\n    $$ S_{v,out,term} = |H_{term}|^2 S_{v,term} = \\left(\\frac{1}{2^N}\\right)^2 (8k_BTR) = \\frac{8k_BTR}{4^N} = 8k_BTR \\cdot 4^{-N} $$\n\n4.  **Total Output Noise PSD**\n    The total noise is the sum of these three contributions.\n    $$ S_{v,out} = S_{v,out,shunts} + S_{v,out,trunks} + S_{v,out,term} $$\n    $$ S_{v,out} = \\frac{8}{3} k_BTR(1 - 4^{-N}) + \\frac{4}{3} k_BTR(1 - 4^{-(N-1)}) + 8k_BTR \\cdot 4^{-N} $$\n    Let's expand and collect terms:\n    $$ S_{v,out} = k_BTR \\left[ \\frac{8}{3} - \\frac{8}{3}4^{-N} + \\frac{4}{3} - \\frac{4}{3}4^{-N+1} + 8 \\cdot 4^{-N} \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ \\left(\\frac{8}{3} + \\frac{4}{3}\\right) - \\frac{8}{3}4^{-N} - \\frac{4}{3} \\cdot 4 \\cdot 4^{-N} + 8 \\cdot 4^{-N} \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ \\frac{12}{3} - \\frac{8}{3}4^{-N} - \\frac{16}{3}4^{-N} + \\frac{24}{3} \\cdot 4^{-N} \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ 4 + 4^{-N} \\left(-\\frac{8}{3} - \\frac{16}{3} + \\frac{24}{3}\\right) \\right] $$\n    $$ S_{v,out} = k_BTR \\left[ 4 + 4^{-N} \\left(\\frac{-24+24}{3}\\right) \\right] $$\n    $$ S_{v,out} = k_BTR [4 + 0] = 4k_BTR $$\n\nThe total one-sided output-referred voltage noise power spectral density is $4k_{B}TR$. This result is independent of the number of bits, $N$, and corresponds to the Johnson-Nyquist noise of a single resistor of value $R$, which is the Thévenin equivalent resistance of the ladder as seen from the output.",
            "answer": "$$ \\boxed{4 k_{B} T R} $$"
        },
        {
            "introduction": "Beyond static precision, a DAC's value is determined by its dynamic performance. This practice problem explores the fundamental trade-off between speed and accuracy when a DAC generates time-varying signals . You will derive the maximum output frequency by analyzing two distinct constraints—transient settling time and frequency-domain flatness—both of which are governed by the DAC's output impedance and load. This exercise provides critical insight into how physical limitations dictate the usable bandwidth of a high-speed converter.",
            "id": "4262631",
            "problem": "A segmented current-steering Digital-to-Analog Converter (DAC) drives an external load that can be modeled, over the signal band of interest, by an effective small-signal output resistance $R_o$ and a shunt capacitance $C_L$, forming a first-order linear time-invariant network. The same small-signal model captures the dominant pole behavior that would arise at the output of an $R$–$2R$ ladder DAC when viewed through its Thevenin equivalent at the output node. The DAC is used to synthesize a sinusoid at frequency $f_{\\mathrm{out}}$ by updating its output code at a uniform rate $f_u = M f_{\\mathrm{out}}$ with non-return-to-zero switching, where $M$ is the number of code updates per sinusoidal period.\n\nYou are given:\n- Resolution $N = 12$ bits.\n- Effective output resistance $R_o = 50$ ohm.\n- Output load capacitance $C_L = 5$ pF.\n- Samples per period $M = 8$.\n- Linearity requirement: for any code transition up to a full-scale step, the residual settling error just before the next update must be strictly less than one half of one least significant bit.\n- In-band flatness requirement: the magnitude response at $f_{\\mathrm{out}}$ must be no less than a fraction $(1 - \\delta)$ of its direct current magnitude, with $\\delta = 0.01$.\n\nStarting from the fundamental properties of a first-order linear time-invariant system’s step response and frequency response and from the definition of least significant bit for an $N$-bit converter, derive closed-form expressions for the two independent upper bounds on $f_{\\mathrm{out}}$ implied by the settling requirement and the in-band flatness requirement, respectively. Then, for the given numerical values, determine the single maximum $f_{\\mathrm{out}}$ that satisfies both bounds simultaneously. Express the final maximum frequency in MHz and round your answer to three significant figures.",
            "solution": "The problem requires the determination of the maximum output signal frequency, $f_{\\mathrm{out}}$, for a Digital-to-Analog Converter (DAC) subject to two independent constraints: a time-domain settling requirement and a frequency-domain flatness requirement. The DAC's output stage is modeled as a first-order linear time-invariant (LTI) system with an output resistance $R_o$ and a load capacitance $C_L$.\n\nFirst, we define the time constant $\\tau$ of this first-order system, which governs both its transient and frequency responses:\n$$\n\\tau = R_o C_L\n$$\nThe transfer function $H(s)$ of this system is:\n$$\nH(s) = \\frac{1}{1 + s\\tau}\n$$\n\n### 1. Settling Requirement\nThe settling requirement dictates the behavior of the DAC's output following a change in the input digital code. The DAC updates its output at a rate $f_u$, so the time available for settling is the update period, $T_u = 1/f_u$. The problem states that $f_u = M f_{\\mathrm{out}}$, so the settling time is $t_{\\mathrm{settle}} = T_u = \\frac{1}{M f_{\\mathrm{out}}}$.\n\nThe response of a first-order system to a step input of magnitude $\\Delta V$ (from an initial voltage $V_i$ to a final voltage $V_f = V_i + \\Delta V$) is given by:\n$$\nV(t) = V_f - (V_f - V_i) \\exp\\left(-\\frac{t}{\\tau}\\right) = V_f - \\Delta V \\exp\\left(-\\frac{t}{\\tau}\\right)\n$$\nThe settling error at time $t$ is the difference between the instantaneous voltage and the final voltage:\n$$\nE(t) = |V(t) - V_f| = |\\Delta V| \\exp\\left(-\\frac{t}{\\tau}\\right)\n$$\nThe problem states that for any code transition up to a full-scale step, the residual settling error at the end of the update period, $t_{\\mathrm{settle}} = T_u$, must be less than one half of one least significant bit ($LSB$).\n\nFor an $N$-bit DAC with a full-scale voltage range $V_{FS}$, the $LSB$ voltage is defined as:\n$$\nV_{LSB} = \\frac{V_{FS}}{2^N}\n$$\nThe settling error condition is:\n$$\nE(T_u) < \\frac{1}{2} V_{LSB} = \\frac{1}{2} \\frac{V_{FS}}{2^N} = \\frac{V_{FS}}{2^{N+1}}\n$$\nTo ensure this condition holds for the worst-case scenario, we must consider the largest possible voltage step, which is the full-scale step, $\\Delta V = V_{FS}$. Substituting $\\Delta V = V_{FS}$ and $t = T_u$ into the error equation:\n$$\nV_{FS} \\exp\\left(-\\frac{T_u}{\\tau}\\right) < \\frac{V_{FS}}{2^{N+1}}\n$$\nThe term $V_{FS}$ cancels, which is fortunate as its value is not provided:\n$$\n\\exp\\left(-\\frac{T_u}{\\tau}\\right) < \\frac{1}{2^{N+1}}\n$$\nTaking the natural logarithm of both sides:\n$$\n-\\frac{T_u}{\\tau} < \\ln\\left(\\frac{1}{2^{N+1}}\\right) = -(N+1)\\ln(2)\n$$\nMultiplying by $-1$ reverses the inequality:\n$$\n\\frac{T_u}{\\tau} > (N+1)\\ln(2)\n$$\nNow, we substitute $T_u = \\frac{1}{M f_{\\mathrm{out}}}$ to find the bound on $f_{\\mathrm{out}}$:\n$$\n\\frac{1}{M f_{\\mathrm{out}} \\tau} > (N+1)\\ln(2)\n$$\nSolving for $f_{\\mathrm{out}}$ gives the first upper bound, which we denote as $f_{\\mathrm{out,settle}}$:\n$$\nf_{\\mathrm{out}} < \\frac{1}{M \\tau (N+1)\\ln(2)} \\quad \\implies \\quad f_{\\mathrm{out,settle}} = \\frac{1}{M R_o C_L (N+1)\\ln(2)}\n$$\n\n### 2. In-Band Flatness Requirement\nThe flatness requirement concerns the magnitude of the system's frequency response. The frequency response is $H(j\\omega)$ where $\\omega = 2\\pi f$. The magnitude is:\n$$\n|H(j\\omega)| = \\left|\\frac{1}{1 + j\\omega\\tau}\\right| = \\frac{1}{\\sqrt{1 + (\\omega\\tau)^2}} = \\frac{1}{\\sqrt{1 + (2\\pi f \\tau)^2}}\n$$\nThe DC gain (at $f=0$) is $|H(j0)| = 1$. The flatness requirement states that the magnitude response at the signal frequency $f_{\\mathrm{out}}$ must be no less than a fraction $(1 - \\delta)$ of the DC gain:\n$$\n|H(j2\\pi f_{\\mathrm{out}})| \\ge (1-\\delta) |H(j0)| = 1 - \\delta\n$$\nSubstituting the expression for the magnitude response:\n$$\n\\frac{1}{\\sqrt{1 + (2\\pi f_{\\mathrm{out}} \\tau)^2}} \\ge 1 - \\delta\n$$\nSince both sides are positive, we can invert them, which reverses the inequality:\n$$\n\\sqrt{1 + (2\\pi f_{\\mathrm{out}} \\tau)^2} \\le \\frac{1}{1 - \\delta}\n$$\nSquaring both sides:\n$$\n1 + (2\\pi f_{\\mathrm{out}} \\tau)^2 \\le \\frac{1}{(1 - \\delta)^2}\n$$\n$$\n(2\\pi f_{\\mathrm{out}} \\tau)^2 \\le \\frac{1}{(1 - \\delta)^2} - 1 = \\frac{1 - (1 - \\delta)^2}{(1 - \\delta)^2} = \\frac{1 - (1 - 2\\delta + \\delta^2)}{(1 - \\delta)^2} = \\frac{2\\delta - \\delta^2}{(1 - \\delta)^2}\n$$\nTaking the square root of both sides (and noting all terms are positive):\n$$\n2\\pi f_{\\mathrm{out}} \\tau \\le \\frac{\\sqrt{2\\delta - \\delta^2}}{1 - \\delta}\n$$\nSolving for $f_{\\mathrm{out}}$ gives the second upper bound, which we denote as $f_{\\mathrm{out,flat}}$:\n$$\nf_{\\mathrm{out}} \\le \\frac{1}{2\\pi \\tau} \\frac{\\sqrt{2\\delta - \\delta^2}}{1 - \\delta} \\quad \\implies \\quad f_{\\mathrm{out,flat}} = \\frac{1}{2\\pi R_o C_L} \\frac{\\sqrt{2\\delta - \\delta^2}}{1 - \\delta}\n$$\n\n### 3. Numerical Calculation\nThe maximum frequency $f_{\\mathrm{out,max}}$ must satisfy both constraints simultaneously, so it is the minimum of the two derived bounds:\n$$\nf_{\\mathrm{out,max}} = \\min(f_{\\mathrm{out,settle}}, f_{\\mathrm{out,flat}})\n$$\nWe are given the following values:\n- $N = 12$\n- $R_o = 50 \\, \\Omega$\n- $C_L = 5 \\, \\text{pF} = 5 \\times 10^{-12} \\, \\text{F}$\n- $M = 8$\n- $\\delta = 0.01$\n\nFirst, calculate the time constant $\\tau$:\n$$\n\\tau = R_o C_L = (50) \\times (5 \\times 10^{-12}) = 250 \\times 10^{-12} \\, \\text{s} = 2.5 \\times 10^{-10} \\, \\text{s}\n$$\nNext, calculate $f_{\\mathrm{out,settle}}$:\n$$\nf_{\\mathrm{out,settle}} = \\frac{1}{8 \\times (2.5 \\times 10^{-10}) \\times (12+1) \\ln(2)} = \\frac{1}{2 \\times 10^{-9} \\times 13 \\ln(2)} = \\frac{1}{2.6 \\times 10^{-8} \\ln(2)}\n$$\n$$\nf_{\\mathrm{out,settle}} \\approx \\frac{1}{(2.6 \\times 10^{-8}) \\times 0.69315} \\approx \\frac{1}{1.80219 \\times 10^{-8}} \\approx 5.5488 \\times 10^7 \\, \\text{Hz} = 55.488 \\, \\text{MHz}\n$$\nNow, calculate $f_{\\mathrm{out,flat}}$:\n$$\nf_{\\mathrm{out,flat}} = \\frac{1}{2\\pi (2.5 \\times 10^{-10})} \\frac{\\sqrt{2(0.01) - (0.01)^2}}{1 - 0.01} = \\frac{1}{5\\pi \\times 10^{-10}} \\frac{\\sqrt{0.02 - 0.0001}}{0.99}\n$$\n$$\nf_{\\mathrm{out,flat}} = \\frac{1}{5\\pi \\times 10^{-10}} \\frac{\\sqrt{0.0199}}{0.99} \\approx \\frac{1}{1.5708 \\times 10^{-9}} \\frac{0.14107}{0.99} \\approx (6.3662 \\times 10^8) \\times (0.14249) \\approx 9.0705 \\times 10^7 \\, \\text{Hz} = 90.705 \\, \\text{MHz}\n$$\nFinally, we find the overall maximum frequency:\n$$\nf_{\\mathrm{out,max}} = \\min(55.488 \\, \\text{MHz}, 90.705 \\, \\text{MHz}) = 55.488 \\, \\text{MHz}\n$$\nThe problem asks for the result to be expressed in MHz and rounded to three significant figures.\n$$\nf_{\\mathrm{out,max}} \\approx 55.5 \\, \\text{MHz}\n$$\nThe settling time requirement is the more stringent constraint and limits the maximum output frequency.",
            "answer": "$$\n\\boxed{55.5}\n$$"
        },
        {
            "introduction": "A DAC's performance is not determined in a vacuum; it is critically dependent on the quality of its supporting circuitry and power domains. This hands-on problem addresses a crucial aspect of system-level integration: the impact of power supply noise on the DAC's output accuracy . By working backward from a stringent output error budget, you will calculate the minimum required Power Supply Rejection Ratio (PSRR) for the reference buffer, demonstrating a practical skill essential for robust mixed-signal system design.",
            "id": "4262622",
            "problem": "A segmented current-steering Digital-to-Analog Converter (DAC) with resolution $N = 14$ uses a reference buffer to generate a stable reference voltage $V_{\\mathrm{ref}} = 1.2\\,\\mathrm{V}$ for its unit current sources. Each unit current is proportional to $V_{\\mathrm{ref}}$, and the output voltage is produced across a resistive load by summing the steered currents. The power supply that feeds the reference buffer exhibits a bounded sinusoidal ripple with peak amplitude $\\Delta V_{\\mathrm{DD}} = 10\\,\\mathrm{mV}$, approximately constant with frequency over the band $f \\in [10\\,\\mathrm{kHz}, 10\\,\\mathrm{MHz}]$. Ignore all non-idealities except modulation of the reference by supply ripple through the reference buffer.\n\nStarting from the definitions of Least Significant Bit (LSB), full-scale code, and small-signal sensitivity, and using only first principles, derive the minimum required Power Supply Rejection Ratio (PSRR) magnitude of the reference buffer, expressed in decibels, such that for any DAC code the peak amplitude of the ripple-induced output voltage error is strictly less than $0.1\\,\\mathrm{LSB}$ across the entire frequency band of interest. Assume worst-case code sensitivity and that the reference buffer’s PSRR magnitude is frequency independent over the specified band.\n\nExpress your final answer as a single real number in decibels (dB), rounded to three significant figures. Do not include the unit in your final boxed answer.",
            "solution": "The goal is to determine the required Power Supply Rejection Ratio (PSRR) by relating supply ripple to the DAC's output voltage error.\n\nIn a current-steering architecture, the output voltage for a digital code $k$ is proportional to both the code and the reference voltage $V_{\\mathrm{ref}}$. We can write this as $V_{\\mathrm{out}}(k) \\propto k \\cdot V_{\\mathrm{ref}}$. A small perturbation $\\delta V_{\\mathrm{ref}}$ in the reference voltage causes a proportional perturbation in the output voltage:\n$$\n\\frac{\\delta V_{\\mathrm{out}}(k)}{V_{\\mathrm{out}}(k)} = \\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}} \\quad \\implies \\quad \\delta V_{\\mathrm{out}}(k) = V_{\\mathrm{out}}(k) \\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\n$$\nThe worst-case sensitivity occurs at the maximum output voltage, which corresponds to the maximum code $k=2^N-1$. This maximum voltage is defined as the full-scale voltage, $V_{FS}$. The peak output error is thus:\n$$\n|\\delta V_{\\mathrm{out,pk}}| = V_{FS} \\left|\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|\n$$\nThe error must be less than $0.1\\,\\mathrm{LSB}$. For a linear $N$-bit DAC where the output spans from $0$ to $V_{FS}$, the relationship between full-scale voltage and the LSB step is $V_{FS} = (2^N-1)V_{LSB}$. The requirement is therefore:\n$$\nV_{FS} \\left|\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|  0.1 \\cdot V_{LSB} = 0.1 \\cdot \\frac{V_{FS}}{2^N-1}\n$$\nCanceling $V_{FS}$ from both sides yields the fundamental bound on the allowed fractional reference ripple:\n$$\n\\left|\\frac{\\delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|  \\frac{0.1}{2^{N} - 1}\n$$\nNext, we relate the reference perturbation to the supply ripple via the Power Supply Rejection Ratio (PSRR). The magnitude of the transfer function from supply ripple to reference output ripple is defined as:\n$$\n|H_{\\mathrm{ps}}(f)| \\equiv \\left|\\frac{\\delta V_{\\mathrm{ref}}(f)}{\\delta V_{\\mathrm{DD}}(f)}\\right|\n$$\nThe PSRR in decibels is defined as $\\mathrm{PSRR}_{\\mathrm{dB}}(f) = -20 \\log_{10}(|H_{\\mathrm{ps}}(f)|)$.\nFrom the transfer function definition, the reference ripple is $|\\delta V_{\\mathrm{ref}}| = |H_{\\mathrm{ps}}| \\cdot |\\delta V_{\\mathrm{DD}}|$. Substituting this into our inequality:\n$$\n\\frac{|H_{\\mathrm{ps}}(f)|\\cdot|\\delta V_{\\mathrm{DD}}(f)|}{V_{\\mathrm{ref}}}  \\frac{0.1}{2^{N} - 1}\n$$\nSolving for the required transfer function magnitude:\n$$\n|H_{\\mathrm{ps}}(f)|  \\frac{0.1\\,V_{\\mathrm{ref}}}{(2^{N} - 1)\\,|\\delta V_{\\mathrm{DD}}(f)|}\n$$\nThe minimum required PSRR must satisfy this condition. In decibels, this is:\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}}(f) > -20 \\log_{10}\\left(\\frac{0.1\\,V_{\\mathrm{ref}}}{(2^{N} - 1)\\,|\\delta V_{\\mathrm{DD}}(f)|}\\right) = 20 \\log_{10}\\left(\\frac{(2^{N} - 1)\\,|\\delta V_{\\mathrm{DD}}(f)|}{0.1\\,V_{\\mathrm{ref}}}\\right)\n$$\nIn the problem, the ripple peak amplitude is constant with frequency, $|\\delta V_{\\mathrm{DD}}(f)| = \\Delta V_{\\mathrm{DD}} = 10\\,\\mathrm{mV} = 0.01\\,\\mathrm{V}$. Therefore, the required PSRR is also constant across the band. Plugging in the numerical values:\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}} = 20 \\log_{10}\\left(\\frac{(2^{14} - 1)\\times 0.01}{0.1 \\times 1.2}\\right) = 20 \\log_{10}\\left(\\frac{16383 \\times 0.01}{0.12}\\right)\n$$\nCompute the ratio inside the logarithm:\n$$\n\\frac{163.83}{0.12} \\approx 1365.25\n$$\nThus, the minimum required PSRR is:\n$$\n\\mathrm{PSRR}_{\\mathrm{req,dB}} \\approx 20 \\log_{10}(1365.25) \\approx 20 \\times 3.1351 \\approx 62.702 \\, \\text{dB}\n$$\nRounded to three significant figures, the minimum required PSRR magnitude is $62.7\\,\\mathrm{dB}$.",
            "answer": "$$\\boxed{62.7}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "静态时序分析的核心在于对建立时间和保持时间违例的基本检查。第一个练习将引导您完成一个简单但具有代表性的逻辑路径上的建立时间裕量（setup slack）的核心计算。通过亲手计算数据到达时间（Data Arrival Time）和要求到达时间（Required Arrival Time），您将具体理解STA工具如何评估时序路径和识别潜在违例，从而巩固对时钟偏斜（clock skew）、建立时间和路径延迟等概念的理解。",
            "id": "4301583",
            "problem": "考虑一个在电子设计自动化 (EDA) 框架内通过静态时序分析 (STA) 进行分析的单时钟同步流水线片段。一个启动寄存器驱动一个三门组合路径到一个捕获寄存器。时钟周期为 $T_{\\text{clk}}=1\\ \\text{ns}$，捕获寄存器的建立时间为 $t_{\\text{setup}}=50\\ \\text{ps}$，时钟偏斜定义为 $s=t_{\\text{launch\\_clk}}-t_{\\text{capture\\_clk}}=-20\\ \\text{ps}$（启动时钟沿比捕获时钟沿先到达）。假设除了给定的偏斜外，两个寄存器的时钟延迟均为零，时钟不确定性为零，并且启动时钟沿发生在时间 $0$。\n\n网表和延迟如下。一个正向跳变在启动寄存器的输出 $Q$ 处启动，并经过三个组合逻辑门传播到捕获寄存器的输入 $D$。连接性和延迟为：\n\n- 启动寄存器的时钟到Q输出延迟：$t_{\\text{cq}}=35\\ \\text{ps}$。\n- 从启动寄存器输出 $Q$ 到门 $G_{1}$ 输入 $A$ 的连线延迟：$10\\ \\text{ps}$。\n- 门 $G_{1}$ 是一个2输入与非门 (NAND)，其输入 $B$ 接高电平。相关时序弧为 $A$ 上升到 $Y$ 下降，延迟为 $50\\ \\text{ps}$。\n- 从 $G_{1}.Y$ 到门 $G_{2}$ 输入 $A$ 的连线延迟：$20\\ \\text{ps}$。\n- 门 $G_{2}$ 是一个反相器。相关时序弧为输入下降到输出上升，延迟为 $30\\ \\text{ps}$。\n- 从 $G_{2}.Y$ 到门 $G_{3}$ 输入 $A$ 的连线延迟：$15\\ \\text{ps}$。\n- 门 $G_{3}$ 是一个2输入或非门 (NOR)，其输入 $B$ 接低电平。相关时序弧为输入上升到输出下降，延迟为 $40\\ \\text{ps}$。\n- 从 $G_{3}.Y$ 到捕获寄存器输入 $D$ 的连线延迟：$20\\ \\text{ps}$。\n\n从静态时序分析中数据到达时间、时钟偏斜、建立时间的所需到达时间以及时序裕量的基本定义出发，推导捕获寄存器输入 $D$ 处的数据到达时间以及捕获寄存器的建立时间裕量。将数据到达时间和裕量均以纳秒表示，并将最终数值四舍五入到四位有效数字。",
            "solution": "用户想要解决一个静态时序分析问题。\n\n### 问题验证\n\n**步骤1：提取给定条件**\n\n*   时钟周期：$T_{\\text{clk}}=1\\ \\text{ns}$\n*   捕获寄存器建立时间：$t_{\\text{setup}}=50\\ \\text{ps}$\n*   时钟偏斜：$s=t_{\\text{launch\\_clk}}-t_{\\text{capture\\_clk}}=-20\\ \\text{ps}$\n*   启动时钟沿发生在时间 $0$。\n*   启动寄存器时钟到Q输出延迟：$t_{\\text{cq}}=35\\ \\text{ps}$\n*   从启动寄存器输出 $Q$ 到门 $G_{1}$ 输入 $A$ 的连线延迟：$10\\ \\text{ps}$\n*   门 $G_{1}$ (NAND) 延迟，时序弧 $A \\to Y$：$50\\ \\text{ps}$\n*   从 $G_{1}.Y$ 到门 $G_{2}$ 输入 $A$ 的连线延迟：$20\\ \\text{ps}$\n*   门 $G_{2}$ (反相器) 延迟：$30\\ \\text{ps}$\n*   从 $G_{2}.Y$ 到门 $G_{3}$ 输入 $A$ 的连线延迟：$15\\ \\text{ps}$\n*   门 $G_{3}$ (NOR) 延迟，时序弧 $A \\to Y$：$40\\ \\text{ps}$\n*   从 $G_{3}.Y$ 到捕获寄存器输入 $D$ 的连线延迟：$20\\ \\text{ps}$\n*   假设：除了给定的偏斜外，两个寄存器的时钟延迟均为零，时钟不确定性为零。\n\n**步骤2：使用提取的条件进行验证**\n\n该问题具有科学依据，是数字集成电路静态时序分析 (STA) 的一个标准练习。所有使用的术语（$T_{\\text{clk}}$、$t_{\\text{setup}}$、$t_{\\text{cq}}$、时钟偏斜）都是该领域的标准术语。所提供的延迟值对于现代半导体技术是现实的。问题是自包含的，提供了计算所要求数量的所有必要数据。问题设定在逻辑上是一致且适定的，能够导出一个唯一且有意义的解。问题的结构清晰，语言精确客观。\n\n**步骤3：结论与行动**\n\n问题有效。将提供完整的解决方案。\n\n### 解决方案\n\n该问题要求计算捕获寄存器输入 $D$ 处的数据到达时间 ($DAT$) 以及该时序路径的建立时间裕量。此分析基于单时钟同步设计的静态时序分析基本原理。我们首先将所有时间单位转换为一个统一的基准单位，皮秒 ($\\text{ps}$)。\n\n$T_{\\text{clk}} = 1\\ \\text{ns} = 1000\\ \\text{ps}$。\n所有其他延迟值已经以皮秒为单位给出。\n\n**1. 数据到达时间 ($DAT$)**\n\n电路中某一点的数据到达时间是指，从时钟周期开始（时间 $0$）测量，信号跳变到达该点的时间。对于捕获寄存器的输入 $D$，$DAT$ 是启动时钟沿的发生时间、启动寄存器的时钟到Q输出延迟 ($t_{\\text{cq}}$) 以及启动寄存器输出 $Q$ 与捕获寄存器输入 $D$ 之间的组合逻辑和连线总传播延迟 ($t_{\\text{path}}$) 的总和。\n\n问题指出，启动时钟沿发生在时间 $t_{\\text{launch\\_abs}} = 0\\ \\text{s}$。\n\n首先，我们计算总路径延迟 $t_{\\text{path}}$，它是所有指定的门延迟和连线延迟的总和：\n$$\nt_{\\text{path}} = t_{\\text{net}(Q \\to G_1)} + t_{\\text{gate}(G_1)} + t_{\\text{net}(G_1 \\to G_2)} + t_{\\text{gate}(G_2)} + t_{\\text{net}(G_2 \\to G_3)} + t_{\\text{gate}(G_3)} + t_{\\text{net}(G_3 \\to D)}\n$$\n代入给定值：\n$$\nt_{\\text{path}} = 10\\ \\text{ps} + 50\\ \\text{ps} + 20\\ \\text{ps} + 30\\ \\text{ps} + 15\\ \\text{ps} + 40\\ \\text{ps} + 20\\ \\text{ps} = 185\\ \\text{ps}\n$$\n捕获寄存器输入 $D$ 处的数据到达时间，记为 $DAT_D$，为：\n$$\nDAT_D = t_{\\text{launch\\_abs}} + t_{\\text{cq}} + t_{\\text{path}}\n$$\n$$\nDAT_D = 0\\ \\text{ps} + 35\\ \\text{ps} + 185\\ \\text{ps} = 220\\ \\text{ps}\n$$\n\n**2. 所需到达时间 ($RAT$) 和建立时间裕量**\n\n用于建立时间检查的所需到达时间 ($RAT$) 是数据信号可以到达寄存器输入 $D$ 而不违反建立时间约束的最晚时间。该时间由捕获时钟沿的到达时间和寄存器的建立时间 ($t_{\\text{setup}}$) 决定。\n\n建立时间约束规定，在一个时钟周期内启动的数据必须在捕获它的时钟沿（晚一个时钟周期）到达之前至少 $t_{\\text{setup}}$ 的时间到达并稳定在捕获寄存器的输入端。\n\n启动时钟在启动寄存器时钟引脚的到达时间给定为 $t_{\\text{launch\\_clk}} = 0$。时钟偏斜为 $s = t_{\\text{launch\\_clk}} - t_{\\text{capture\\_clk}} = -20\\ \\text{ps}$。我们可以求出时钟在捕获寄存器时钟引脚的到达时间：\n$$\n-20\\ \\text{ps} = 0 - t_{\\text{capture\\_clk}} \\implies t_{\\text{capture\\_clk}} = 20\\ \\text{ps}\n$$\n捕获在时间 $0$ 启动的数据的时钟沿发生在一个时钟周期之后。此捕获时钟沿在捕获寄存器处的绝对时间是：\n$$\nt_{\\text{capture\\_edge}} = T_{\\text{clk}} + t_{\\text{capture\\_clk}} = 1000\\ \\text{ps} + 20\\ \\text{ps} = 1020\\ \\text{ps}\n$$\n数据必须在此边沿到达前至少 $t_{\\text{setup}}$ 的时间在输入 $D$ 处保持稳定。因此，$D$ 处的所需到达时间是：\n$$\nRAT_D = t_{\\text{capture\\_edge}} - t_{\\text{setup}} = 1020\\ \\text{ps} - 50\\ \\text{ps} = 970\\ \\text{ps}\n$$\n建立时间裕量 ($Slack_{\\text{setup}}$) 是满足时序的余量。它被定义为所需到达时间与数据到达时间之间的差值：\n$$\nSlack_{\\text{setup}} = RAT_D - DAT_D\n$$\n$$\nSlack_{\\text{setup}} = 970\\ \\text{ps} - 220\\ \\text{ps} = 750\\ \\text{ps}\n$$\n正裕量表示满足了建立时间约束。\n\n另外，建立时间裕量也可以通过标准的STA建立时间方程直接计算：\n$$\nSlack_{\\text{setup}} = T_{\\text{clk}} - s - (t_{\\text{cq}} + t_{\\text{path}}) - t_{\\text{setup}}\n$$\n代入数值：\n$$\nSlack_{\\text{setup}} = 1000\\ \\text{ps} - (-20\\ \\text{ps}) - (35\\ \\text{ps} + 185\\ \\text{ps}) - 50\\ \\text{ps}\n$$\n$$\nSlack_{\\text{setup}} = 1000\\ \\text{ps} + 20\\ \\text{ps} - 220\\ \\text{ps} - 50\\ \\text{ps}\n$$\n$$\nSlack_{\\text{setup}} = 1020\\ \\text{ps} - 270\\ \\text{ps} = 750\\ \\text{ps}\n$$\n两种方法得出了相同的结果，验证了计算的正确性。\n\n**3. 最终答案格式化**\n\n问题要求数据到达时间和建立时间裕量以纳秒 ($\\text{ns}$) 表示，并四舍五入到四位有效数字。\n\n数据到达时间：\n$$\nDAT_D = 220\\ \\text{ps} = 0.220\\ \\text{ns}\n$$\n保留四位有效数字，结果为 $0.2200\\ \\text{ns}$。\n\n建立时间裕量：\n$$\nSlack_{\\text{setup}} = 750\\ \\text{ps} = 0.750\\ \\text{ns}\n$$\n保留四位有效数字，结果为 $0.7500\\ \\text{ns}$。\n\n最终答案是一对值：数据到达时间和建立时间裕量。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.2200  0.7500 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "任何时序分析的一个关键输入是电路互连线的精确延迟模型。Elmore延迟模型为估算RC网络（在现代集成电路中无处不在）的延迟提供了一种基础且直观的方法。本练习要求您从第一性原理出发推导Elmore延迟，将基础的线性电路理论与EDA中实用的延迟计算联系起来。这个练习将加深您对STA中导线延迟如何被抽象和建模的理解。",
            "id": "4301470",
            "problem": "在静态时序分析 (STA) 中，一种广泛用于估算阻容 (RC) 树中互连延迟的方法是 Elmore 延迟。根据第一性原理，它被定义为线性时不变网络冲激响应的一阶矩与零阶矩之比。考虑一个三段式 RC 梯形网络，该网络模型化了一个驱动三个下游集总电容的金属互连。该梯形网络包含一个根节点（节点 $0$），由一个输出电阻为零的理想电压源驱动，该电压源在时间 $t=0$ 时施加一个单位阶跃。其后是三个串联电阻 $R_1$、$R_2$、$R_3$，连接节点 $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$，以及三个并联电容 $C_1$、$C_2$、$C_3$，分别从节点 $1$、$2$、$3$ 接地。假设所有元件都是线性和时不变的，并且所有电容器都严格接地，因此该互连构成一个 RC 树。\n\n请仅使用基本的线性电路理论和冲激响应矩的定义，推导出到远端节点（节点 $3$）的 Elmore 延迟，并将其表示为关于 $R_1$、$R_2$、$R_3$、$C_1$、$C_2$ 和 $C_3$ 的闭式表达式。然后，对于 $R_i=\\{50,40,30\\}\\ \\Omega$ 和 $C_i=\\{10,20,30\\}\\ \\text{fF}$（其中 $R_1=50\\ \\Omega$，$R_2=40\\ \\Omega$，$R_3=30\\ \\Omega$，$C_1=10\\ \\text{fF}$，$C_2=20\\ \\text{fF}$，$C_3=30\\ \\text{fF}$），对此延迟进行数值计算。将最终数值以皮秒 ($\\text{ps}$) 为单位表示，并将答案四舍五入到四位有效数字。最终答案必须是一个数字。",
            "solution": "问题要求推导一个三段式 RC 梯形网络到远端节点（节点 $3$）的 Elmore 延迟，并进行数值计算。推导必须基于冲激响应矩的基本原理。\n\n设 $v_{in}(t)$ 是根节点（节点 $0$）的输入电压，$v_3(t)$ 是节点 $3$ 的电压。节点 $3$ 的冲激响应表示为 $h_3(t)$，其在拉普拉斯域中对应的传递函数为 $H_3(s) = \\mathcal{L}\\{h_3(t)\\}$。传递函数将输出电压与输入电压关联起来：$V_3(s) = H_3(s) V_{in}(s)$。\n\nElmore 延迟 $\\tau_{D3}$ 定义为冲激响应的一阶矩除以零阶矩：\n$$ \\tau_{D3} = \\frac{m_1}{m_0} = \\frac{\\int_0^\\infty t h_3(t) dt}{\\int_0^\\infty h_3(t) dt} $$\n矩 $m_k$ 可以通过传递函数 $H_3(s)$ 在 $s=0$ 附近的麦克劳林级数展开来计算。如果初始导数由泰勒级数展开评估，则第 $k$ 阶矩由 $m_k = (-1)^k \\frac{d^k H_3(s)}{ds^k} \\bigg|_{s=0}$ 给出。在另一种从传递函数展开式 $H(s) = \\sum_{k=0}^{\\infty} m'_k s^k$ 计算矩的公式中，系数 $m'_k$ 与矩相关。一个直接的联系是时域矩 $m_k$ 可以通过 $H_3(s)$ 的导数求得：\n$$ m_0 = H_3(s) \\bigg|_{s=0} = H_3(0) $$\n$$ m_1 = -\\frac{dH_3(s)}{ds} \\bigg|_{s=0} = -H'_3(0) $$\n因此，Elmore 延迟为：\n$$ \\tau_{D3} = \\frac{-H'_3(0)}{H_3(0)} $$\n对于给定的 RC 梯形网络，它是一个低通网络，其直流增益为1。在 $s=0$（直流）时，电容器相当于开路，没有电流流过。因此，电阻上没有电压降，所有节点电压都等于输入电压。这意味着对于 $i=1, 2, 3$，$V_i(0) = V_{in}(0)$，所以 $H_i(0) = V_i(0)/V_{in}(0) = 1$。\n当 $H_3(0)=1$ 时，Elmore 延迟简化为：\n$$ \\tau_{D3} = -H'_3(0) $$\n为了求得 $H'_3(0)$，我们在拉普拉斯域中对电路进行节点分析。设 $V_i(s)$ 是节点 $i$ 电压的拉普拉斯变换。电容器的阻抗为 $Z_{C_i}(s) = \\frac{1}{sC_i}$。节点方程如下：\n节点 1: $$ \\frac{V_1(s) - V_{in}(s)}{R_1} + sC_1 V_1(s) + \\frac{V_1(s) - V_2(s)}{R_2} = 0 $$\n节点 2: $$ \\frac{V_2(s) - V_1(s)}{R_2} + sC_2 V_2(s) + \\frac{V_2(s) - V_3(s)}{R_3} = 0 $$\n节点 3: $$ \\frac{V_3(s) - V_2(s)}{R_3} + sC_3 V_3(s) = 0 $$\n我们定义电压传递函数 $H_i(s) = V_i(s)/V_{in}(s)$。代入 $V_i(s) = H_i(s)V_{in}(s)$ 并除以 $V_{in}(s)$：\n(1) $$ \\left(\\frac{1}{R_1} + \\frac{1}{R_2} + sC_1\\right)H_1(s) - \\frac{1}{R_2}H_2(s) = \\frac{1}{R_1} $$\n(2) $$ -\\frac{1}{R_2}H_1(s) + \\left(\\frac{1}{R_2} + \\frac{1}{R_3} + sC_2\\right)H_2(s) - \\frac{1}{R_3}H_3(s) = 0 $$\n(3) $$ -\\frac{1}{R_3}H_2(s) + \\left(\\frac{1}{R_3} + sC_3\\right)H_3(s) = 0 $$\n为了求得 $H'_3(0)$，我们将每个 $H_i(s)$ 展开为麦克劳林级数：$H_i(s) = H_i(0) + s H'_i(0) + O(s^2)$。我们已经确定对于所有 $i$，$H_i(0) = 1$。将此展开式代入方程组，并收集 $s$ 的同次幂项：\n\n令 $s^1$ 的系数相等：\n由(1)式：$$ \\left(\\frac{1}{R_1} + \\frac{1}{R_2}\\right)H'_1(0) - \\frac{1}{R_2}H'_2(0) + C_1 H_1(0) = 0 \\implies \\left(\\frac{1}{R_1} + \\frac{1}{R_2}\\right)H'_1(0) - \\frac{1}{R_2}H'_2(0) = -C_1 $$\n由(2)式：$$ -\\frac{1}{R_2}H'_1(0) + \\left(\\frac{1}{R_2} + \\frac{1}{R_3}\\right)H'_2(0) - \\frac{1}{R_3}H'_3(0) + C_2 H_2(0) = 0 \\implies -\\frac{1}{R_2}H'_1(0) + \\left(\\frac{1}{R_2} + \\frac{1}{R_3}\\right)H'_2(0) - \\frac{1}{R_3}H'_3(0) = -C_2 $$\n由(3)式：$$ -\\frac{1}{R_3}H'_2(0) + \\frac{1}{R_3}H'_3(0) + C_3 H_3(0) = 0 \\implies -\\frac{1}{R_3}H'_2(0) + \\frac{1}{R_3}H'_3(0) = -C_3 $$\n现在我们得到了一个关于 $H'_i(0)$ 的线性方程组。我们求解该方程组以得到 $H'_3(0)$。\n根据第三个方程：\n$$ H'_3(0) - H'_2(0) = -R_3 C_3 \\implies H'_2(0) = H'_3(0) + R_3 C_3 $$\n将 $H'_2(0)$ 代入第二个方程：\n$$ -\\frac{1}{R_2}H'_1(0) + \\left(\\frac{1}{R_2} + \\frac{1}{R_3}\\right)(H'_3(0) + R_3 C_3) - \\frac{1}{R_3}H'_3(0) = -C_2 $$\n$$ -\\frac{1}{R_2}H'_1(0) + \\frac{1}{R_2}H'_3(0) + \\frac{R_3C_3}{R_2} + \\frac{1}{R_3}H'_3(0) + C_3 - \\frac{1}{R_3}H'_3(0) = -C_2 $$\n$$ -\\frac{1}{R_2}H'_1(0) + \\frac{1}{R_2}H'_3(0) = -C_2 - C_3 - \\frac{R_3C_3}{R_2} $$\n乘以 $-R_2$：\n$$ H'_1(0) - H'_3(0) = R_2(C_2+C_3) + R_3C_3 \\implies H'_1(0) = H'_3(0) + R_2(C_2+C_3) + R_3C_3 $$\n最后，将 $H'_1(0)$ 和 $H'_2(0)$ 代入第一个方程：\n$$ \\left(\\frac{1}{R_1} + \\frac{1}{R_2}\\right)(H'_3(0) + R_2(C_2+C_3) + R_3C_3) - \\frac{1}{R_2}(H'_3(0) + R_3C_3) = -C_1 $$\n合并含有 $H'_3(0)$ 的项：\n$$ H'_3(0) \\left(\\frac{1}{R_1} + \\frac{1}{R_2} - \\frac{1}{R_2}\\right) = \\frac{1}{R_1}H'_3(0) $$\n合并常数项并移到等式右边：\n$$ \\frac{1}{R_1}H'_3(0) = -C_1 - \\left(\\frac{1}{R_1} + \\frac{1}{R_2}\\right)(R_2(C_2+C_3) + R_3C_3) + \\frac{1}{R_2}(R_3C_3) $$\n$$ \\frac{1}{R_1}H'_3(0) = -C_1 - \\left[ \\frac{R_2(C_2+C_3)}{R_1} + (C_2+C_3) + \\frac{R_3C_3}{R_1} + \\frac{R_3C_3}{R_2} \\right] + \\frac{R_3C_3}{R_2} $$\n$$ \\frac{1}{R_1}H'_3(0) = -C_1 - C_2 - C_3 - \\frac{R_2}{R_1}(C_2+C_3) - \\frac{R_3}{R_1}C_3 $$\n乘以 $R_1$：\n$$ H'_3(0) = -R_1(C_1+C_2+C_3) - R_2(C_2+C_3) - R_3C_3 $$\n$$ H'_3(0) = -R_1C_1 - R_1C_2 - R_1C_3 - R_2C_2 - R_2C_3 - R_3C_3 $$\n按电容分组各项：\n$$ H'_3(0) = -R_1C_1 - (R_1+R_2)C_2 - (R_1+R_2+R_3)C_3 $$\n最后，到节点 $3$ 的 Elmore 延迟为 $\\tau_{D3} = -H'_3(0)$：\n$$ \\tau_{D3} = R_1C_1 + (R_1+R_2)C_2 + (R_1+R_2+R_3)C_3 $$\n现在，我们使用给定值对此表达式进行数值计算：\n$R_1=50\\ \\Omega$, $R_2=40\\ \\Omega$, $R_3=30\\ \\Omega$\n$C_1=10\\ \\text{fF} = 10 \\times 10^{-15}\\ \\text{F}$\n$C_2=20\\ \\text{fF} = 20 \\times 10^{-15}\\ \\text{F}$\n$C_3=30\\ \\text{fF} = 30 \\times 10^{-15}\\ \\text{F}$\n\n计算电阻之和：\n$R_1 = 50\\ \\Omega$\n$R_1+R_2 = 50 + 40 = 90\\ \\Omega$\n$R_1+R_2+R_3 = 50 + 40 + 30 = 120\\ \\Omega$\n\n将这些值代入延迟公式：\n$$ \\tau_{D3} = (50\\ \\Omega)(10 \\times 10^{-15}\\ \\text{F}) + (90\\ \\Omega)(20 \\times 10^{-15}\\ \\text{F}) + (120\\ \\Omega)(30 \\times 10^{-15}\\ \\text{F}) $$\n$$ \\tau_{D3} = (500 + 1800 + 3600) \\times 10^{-15}\\ \\text{s} $$\n$$ \\tau_{D3} = 5900 \\times 10^{-15}\\ \\text{s} $$\n$$ \\tau_{D3} = 5.9 \\times 10^{-12}\\ \\text{s} $$\n因为 $1\\ \\text{ps} = 10^{-12}\\ \\text{s}$，所以延迟是 $5.9\\ \\text{ps}$。\n题目要求答案四舍五入到四位有效数字，所以结果是 $5.900\\ \\text{ps}$。",
            "answer": "$$ \\boxed{5.900} $$"
        },
        {
            "introduction": "现代深亚微米设计受到片上变异（On-Chip Variation, OCV）的显著影响，即工艺和环境差异导致同一芯片上不同部分的延迟发生变化。简单地应用最差和最佳情况分析可能导致过度悲观，从而产生虚假的时序违例。这项高级练习介绍了共同时钟路径悲观性移除（Common Path Pessimism Removal, CPPR）这一关键概念，所有现代STA工具都使用该技术来消除时钟路径中的人为悲观。通过这个例子，您将学习STA如何处理OCV，以及为什么智能分析对于精确签核（sign-off）至关重要。",
            "id": "4301528",
            "problem": "在电子设计自动化（EDA）流程中，使用静态时序分析（STA）对一个互补金属氧化物半导体（CMOS）集成电路中的同步流水线级进行分析。发射触发器和捕获触发器均由一个单一时钟域驱动，该时钟域贯穿一个时钟分配网络。该时钟网络包含一个由发射和捕获路径共享的缓冲器和互连的公共部分，其标称总延迟为 $D_{\\mathrm{sh}} = 200\\ \\mathrm{ps}$。时钟周期为 $T_{\\mathrm{clk}} = 1\\ \\mathrm{ns}$。从发射触发器输出到捕获触发器输入的数据路径的最坏情况延迟为 $D_{\\mathrm{data}} = 900\\ \\mathrm{ps}$，此值已反映了在片上变异（OCV）下对数据路径应用的延迟（最大）降额。\n\n假设片上变异（OCV）通过形式为 $1 \\pm \\alpha$ 的乘法降额进行建模，其中 $\\alpha = 0.1$。对于最坏情况的建立时序，发射时钟路径按因子 $1 + \\alpha$ 进行延迟降额，而捕获时钟路径按因子 $1 - \\alpha$ 进行提前降额。时钟路径中没有非公共段（即，任何非共享的发射或捕获时钟延迟都可以忽略不计），建立时间要求和时钟不确定性也可以忽略不计。应用共同时钟路径悲观性移除（CPPR）来消除由共享时钟部分上相反的OCV降额所引入的人为偏移。\n\n从建立时间裕量的形式化定义（即要求时间与到达时间之差）出发，并根据上述降额模型，推导经过共同时钟路径悲观性移除（CPPR）校正的建立时间裕量。将最终裕量表示为一个以皮秒（$\\mathrm{ps}$）为单位的实数值。无需四舍五入；请提供精确值。",
            "solution": "用户请求推导一个同步流水线级经过共同时钟路径悲观性移除（CPPR）校正后的建立时间裕量。\n\n**问题验证**\n\n首先，我将验证问题陈述。\n\n**第1步：提取已知条件**\n- 时钟周期, $T_{\\mathrm{clk}} = 1\\ \\mathrm{ns}$。\n- 公共时钟路径的标称总延迟, $D_{\\mathrm{sh}} = 200\\ \\mathrm{ps}$。\n- 最坏情况（延迟降额）数据路径延迟, $D_{\\mathrm{data}} = 900\\ \\mathrm{ps}$。\n- 片上变异（OCV）降额因子, $\\alpha = 0.1$，降额乘数为 $1 \\pm \\alpha$。\n- 对于建立时序，发射时钟路径按 $1 + \\alpha$ 进行延迟降额。\n- 对于建立时序，捕获时钟路径按 $1 - \\alpha$ 进行提前降额。\n- 时钟路径没有非公共段。\n- 建立时间要求, $T_{\\mathrm{setup}}$，可忽略不计。\n- 时钟不确定性, $T_{\\mathrm{unc}}$，可忽略不计。\n- 应用了共同时钟路径悲观性移除（CPPR）。\n\n**第2步：使用提取的已知条件进行验证**\n该问题在数字集成电路设计和静态时序分析（STA）领域具有科学依据。OCV、降额、建立时间裕量和 CPPR 的概念都是标准且定义明确的。问题提法得当，提供了计算唯一解所需的所有参数。给定的数值（$T_{\\mathrm{clk}} = 1\\ \\mathrm{ns}$ 对应 $1\\ \\mathrm{GHz}$ 时钟，数百皮秒的路径延迟，以及 $10\\%$ 的变异因子）对于现代CMOS技术是物理上现实的。语言客观而精确。因此，该问题被认为是有效的。\n\n**第3步：结论与行动**\n问题是有效的。我现在将继续进行求解。\n\n**建立时间裕量的推导**\n\n建立时间裕量, $S_{\\mathrm{setup}}$，定义为数据在捕获触发器输入端保持稳定所需的时间与数据的实际到达时间之差。\n$$S_{\\mathrm{setup}} = \\text{要求时间} - \\text{到达时间}$$\n\n**1. 到达时间 (AT)**\n到达时间, $T_{\\mathrm{AT}}$，是指从源触发器发射的数据信号到达目的（捕获）触发器数据输入端的时间。这是到达发射触发器的时钟路径延迟与数据路径延迟之和。\n\n对于最坏情况的建立时间分析，我们必须考虑最晚可能的数据到达。这发生在发射时钟边沿延迟且数据路径缓慢时。到达发射触发器的时钟路径仅由标称延迟为 $D_{\\mathrm{sh}}$ 的共享路径组成。延迟路径按因子 $1 + \\alpha$ 进行降额。数据路径延迟, $D_{\\mathrm{data}}$，已作为最坏情况（延迟降额）值给出。\n\n发射触发器的时钟到达时间, $T_{\\mathrm{clk, launch}}$，为：\n$$T_{\\mathrm{clk, launch}} = D_{\\mathrm{sh}} (1 + \\alpha)$$\n\n捕获触发器数据输入端的总到达时间为：\n$$T_{\\mathrm{AT}} = T_{\\mathrm{clk, launch}} + D_{\\mathrm{data}} = D_{\\mathrm{sh}} (1 + \\alpha) + D_{\\mathrm{data}}$$\n\n**2. 要求时间 (RT)**\n要求时间, $T_{\\mathrm{RT}}$，是数据信号可以到达捕获触发器输入端而不违反建立约束的最晚时间。这由到达捕获触发器的*下一个*时钟边沿决定。\n\n对于最坏情况的建立时间分析，通过假设捕获时钟边沿尽可能早地到达来收紧时序窗口。提前路径按因子 $1 - \\alpha$ 进行降额。捕获时钟边沿在发射边沿之后一个时钟周期, $T_{\\mathrm{clk}}$，发生。到达捕获触发器的时钟路径也是共享路径 $D_{\\mathrm{sh}}$。建立时间要求（$T_{\\mathrm{setup}}$）和时钟不确定性（$T_{\\mathrm{unc}}$）被假定为可忽略不计，因此我们将其设为 $0$。\n\n捕获触发器的时钟到达时间, $T_{\\mathrm{clk, capture}}$，为：\n$$T_{\\mathrm{clk, capture}} = T_{\\mathrm{clk}} + D_{\\mathrm{sh}} (1 - \\alpha)$$\n\n因此，总要求时间为：\n$$T_{\\mathrm{RT}} = T_{\\mathrm{clk, capture}} - T_{\\mathrm{setup}} - T_{\\mathrm{unc}} = T_{\\mathrm{clk}} + D_{\\mathrm{sh}} (1 - \\alpha) - 0 - 0 = T_{\\mathrm{clk}} + D_{\\mathrm{sh}} (1 - \\alpha)$$\n\n**3. CPPR之前的建立时间裕量**\n在没有CPPR的情况下，建立时间裕量直接由 $T_{\\mathrm{RT}}$ 和 $T_{\\mathrm{AT}}$ 计算得出：\n$$S_{\\mathrm{setup, uncorrected}} = T_{\\mathrm{RT}} - T_{\\mathrm{AT}}$$\n$$S_{\\mathrm{setup, uncorrected}} = \\left( T_{\\mathrm{clk}} + D_{\\mathrm{sh}}(1 - \\alpha) \\right) - \\left( D_{\\mathrm{sh}}(1 + \\alpha) + D_{\\mathrm{data}} \\right)$$\n$$S_{\\mathrm{setup, uncorrected}} = T_{\\mathrm{clk}} + D_{\\mathrm{sh}} - \\alpha D_{\\mathrm{sh}} - D_{\\mathrm{sh}} - \\alpha D_{\\mathrm{sh}} - D_{\\mathrm{data}}$$\n$$S_{\\mathrm{setup, uncorrected}} = T_{\\mathrm{clk}} - D_{\\mathrm{data}} - 2 \\alpha D_{\\mathrm{sh}}$$\n项 $-2 \\alpha D_{\\mathrm{sh}}$ 代表了人为的悲观度。它的产生是因为分析假设单一的公共时钟路径 $D_{\\mathrm{sh}}$ 同时是缓慢的（对于发射路径）和快速的（对于捕获路径），这在物理上是不可能的。\n\n**4. 共同时钟路径悲观性移除 (CPPR)**\nCPPR通过计算公共路径上的人为悲观度量，并将其作为补偿加回到裕量中来纠正这个问题。悲观度补偿, $C_{\\mathrm{CPPR}}$，是公共路径的延迟降额延迟和提前降额延迟之差。\n$$C_{\\mathrm{CPPR}} = (\\text{延迟降额后的公共路径延迟}) - (\\text{提前降额后的公共路径延迟})$$\n$$C_{\\mathrm{CPPR}} = \\left( D_{\\mathrm{sh}}(1 + \\alpha) \\right) - \\left( D_{\\mathrm{sh}}(1 - \\alpha) \\right)$$\n$$C_{\\mathrm{CPPR}} = D_{\\mathrm{sh}} + \\alpha D_{\\mathrm{sh}} - D_{\\mathrm{sh}} + \\alpha D_{\\mathrm{sh}} = 2 \\alpha D_{\\mathrm{sh}}$$\n\n**5. 最终经CPPR校正的裕量**\n最终校正后的建立时间裕量, $S_{\\mathrm{setup, final}}$，是未校正的裕量加上CPPR补偿。\n$$S_{\\mathrm{setup, final}} = S_{\\mathrm{setup, uncorrected}} + C_{\\mathrm{CPPR}}$$\n$$S_{\\mathrm{setup, final}} = \\left( T_{\\mathrm{clk}} - D_{\\mathrm{data}} - 2 \\alpha D_{\\mathrm{sh}} \\right) + \\left( 2 \\alpha D_{\\mathrm{sh}} \\right)$$\n$$S_{\\mathrm{setup, final}} = T_{\\mathrm{clk}} - D_{\\mathrm{data}}$$\n这个结果是直观的：对于一个具有完全公共时钟网络的路径，时钟偏移为零，建立时间检查简化为确保数据路径延迟小于时钟周期。\n\n**6. 数值计算**\n我们有以下给定值：\n- $T_{\\mathrm{clk}} = 1\\ \\mathrm{ns} = 1000\\ \\mathrm{ps}$\n- $D_{\\mathrm{data}} = 900\\ \\mathrm{ps}$\n\n将这些值代入建立时间裕量的最终表达式中：\n$$S_{\\mathrm{setup, final}} = 1000\\ \\mathrm{ps} - 900\\ \\mathrm{ps} = 100\\ \\mathrm{ps}$$\n最终校正后的建立时间裕量是 $100\\ \\mathrm{ps}$。在应用了CPPR逻辑后，最终计算不再需要 $D_{\\mathrm{sh}}$ 和 $\\alpha$ 的值，因为它们只贡献于随后被移除的悲观项。",
            "answer": "$$\\boxed{100}$$"
        }
    ]
}
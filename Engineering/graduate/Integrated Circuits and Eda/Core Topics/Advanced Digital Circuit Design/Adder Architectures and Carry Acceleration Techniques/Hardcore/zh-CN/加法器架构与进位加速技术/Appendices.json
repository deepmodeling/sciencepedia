{
    "hands_on_practices": [
        {
            "introduction": "在设计高速加法器时，我们首先要理解其核心挑战——进位链的传播延迟。尽管最简单的行波进位加法器（RCA）在最坏情况下延迟是线性的，但其平均性能通常要好得多。本练习  将通过一个概率模型，从第一性原理出发，定量分析随机输入下进位链的平均长度及其变化，这为我们理解为何需要以及如何设计更复杂的进位加速方案提供了重要的基准和动机。",
            "id": "4255489",
            "problem": "考虑一个$n$位行波进位加法器，它对两个独立的随机输入字 $\\{a_i\\}_{i=0}^{n-1}$ 和 $\\{b_i\\}_{i=0}^{n-1}$进行操作，其中每个比特 $a_i$ 和 $b_i$ 都是参数为 $1/2$ 的独立同分布的伯努利随机变量。对于每个比特位置 $i$，定义加法中使用的标准生成/传播/终止信号：$g_i = a_i b_i$，$p_i = a_i \\oplus b_i$ 和 $k_i = \\bar{a}_i \\bar{b}_i$。比特级的进位递归遵循布尔关系 $c_{i+1} = g_i \\lor (p_i \\land c_i)$，其中 $c_i$ 是位置 $i$ 的进位输入。\n\n从 $\\{1,\\dots,n-2\\}$ 中均匀随机选择一个起始位置 $i$，这样对于大的 $n$，可以忽略边界效应。将从位置 $i$ 开始的进位链长度 $L$ 定义为满足 $p_j = 1$ 的连续位置 $j \\in \\{i,i+1,\\dots\\}$ 的数量，并在第一个满足 $p_j = 0$ 的位置终止（即，$L$ 是从 $i$ 开始的连续传播段的长度）。等价地，$L = \\max\\{\\ell \\ge 0 : p_i = p_{i+1} = \\dots = p_{i+\\ell-1} = 1\\}$。\n\n仅从 $\\{a_i\\}$ 和 $\\{b_i\\}$ 的比特级独立性以及上述 $g_i$、$p_i$ 和 $k_i$ 的定义出发，从第一性原理推导进位链长度的期望值 $\\mathbb{E}[L]$ 和方差 $\\mathrm{Var}(L)$ 的精确表达式。以精确值的形式给出最终答案，不进行四舍五入。",
            "solution": "所述问题具有科学依据、是适定的且客观的。它提出了一个计算机算术电路分析中的标准问题，使用了一个明确定义的概率模型。所有必要信息均已提供，问题没有矛盾或歧义。因此，可以推导出解决方案。\n\n问题要求在一个$n$位行波进位加法器中，进位链长度 $L$ 的期望值和方差。从比特位置 $i$ 开始的进位链长度定义为传播信号 $p_j = a_j \\oplus b_j$ 等于 $1$ 的连续比特 $j \\ge i$ 的数量。\n\n首先，我们必须确定传播信号 $p_i$ 的概率分布。输入比特 $a_i$ 和 $b_i$ 是参数为 $1/2$ 的独立同分布（i.i.d.）的伯努利随机变量。这意味着 $P(a_i=1) = P(a_i=0) = 1/2$ 且 $P(b_i=1) = P(b_i=0) = 1/2$。$(a_i, b_i)$ 的四种可能值对是 $(0,0)$、$(0,1)$、$(1,0)$ 和 $(1,1)$，每种发生的概率为 $(1/2) \\times (1/2) = 1/4$。\n\n传播信号定义为 $p_i = a_i \\oplus b_i$。$p_i$ 的值为 $1$ 当且仅当 $a_i \\neq b_i$。这种情况发生在值对 $(0,1)$ 和 $(1,0)$ 时。因此，一个比特位置传播进位的概率是：\n$$ P(p_i=1) = P(a_i=0, b_i=1) + P(a_i=1, b_i=0) = \\frac{1}{4} + \\frac{1}{4} = \\frac{1}{2} $$\n$p_i$ 的值为 $0$ 如果 $a_i = b_i$，这种情况发生在值对 $(0,0)$ 和 $(1,1)$ 时。此事件对应于比特位置生成一个进位（$g_i=1$）或终止一个进位（$k_i=1$）。一个比特位置终止进位链的概率是：\n$$ P(p_i=0) = P(a_i=0, b_i=0) + P(a_i=1, b_i=1) = \\frac{1}{4} + \\frac{1}{4} = \\frac{1}{2} $$\n由于输入比特 $\\{a_i\\}$ 和 $\\{b_i\\}$ 都是相互独立的，传播信号 $\\{p_i\\}$ 形成一个参数为 $q \\equiv P(p_i=1) = 1/2$ 的独立同分布的伯努利随机变量序列。问题忽略了边界效应，因此在分析从位置 $i$ 开始的进位链时，我们可以将此序列视为有效无限长。\n\n进位链长度 $L$ 是从位置 $i$ 开始的、值为 $1$ 的连续传播信号的数量。让我们来确定随机变量 $L$ 的概率分布。\n事件 $L=k$ (对于 $k \\ge 0$) 可以描述如下：\n- 对于 $L=0$，第一个比特必须不传播：$p_i=0$。\n- 对于 $L=k$ (其中 $k \\ge 1$)，前 $k$ 个比特必须传播，而第 $(k+1)$ 个比特必须不传播：$p_i=1, p_{i+1}=1, \\dots, p_{i+k-1}=1$，且 $p_{i+k}=0$。\n\n利用 $p_j$ 变量的独立性，我们可以写出 $L$ 的概率质量函数 (PMF)：\n对于 $k=0$：\n$$ P(L=0) = P(p_i=0) = 1-q = \\frac{1}{2} $$\n对于 $k \\ge 1$：\n$$ P(L=k) = P(p_i=1, \\dots, p_{i+k-1}=1, p_{i+k}=0) = \\left(\\prod_{j=0}^{k-1} P(p_{i+j}=1)\\right) P(p_{i+k}=0) = q^k (1-q) $$\n代入 $q=1/2$，对于 $k \\ge 1$，这变为 $P(L=k) = (1/2)^k (1/2) = (1/2)^{k+1}$。\n我们可以观察到，对于 $k \\ge 1$ 的公式也适用于 $k=0$，因为 $q^0(1-q) = 1-q = P(L=0)$。因此，对于所有整数 $k \\ge 0$，$L$ 的 PMF 由下式给出：\n$$ P(L=k) = q^k (1-q) = \\left(\\frac{1}{2}\\right)^{k} \\left(\\frac{1}{2}\\right) = \\left(\\frac{1}{2}\\right)^{k+1} $$\n这是集合 $\\{0, 1, 2, \\dots\\}$ 上的几何分布的 PMF。\n\n我们现在从第一性原理推导期望值 $\\mathbb{E}[L]$。对于一个非负整值随机变量，期望值可以用尾和公式计算：$\\mathbb{E}[L] = \\sum_{k=1}^{\\infty} P(L \\ge k)$。\n事件 $L \\ge k$ (对于 $k \\ge 1$) 意味着至少前 $k$ 个位置传播，即 $p_i=1, p_{i+1}=1, \\dots, p_{i+k-1}=1$。该事件的概率是：\n$$ P(L \\ge k) = P(p_i=1, \\dots, p_{i+k-1}=1) = \\prod_{j=0}^{k-1} P(p_{i+j}=1) = q^k $$\n现在，我们可以计算期望值：\n$$ \\mathbb{E}[L] = \\sum_{k=1}^{\\infty} P(L \\ge k) = \\sum_{k=1}^{\\infty} q^k $$\n这是一个首项为 $q$，公比为 $q$ 的标准几何级数。其和为 $\\frac{q}{1-q}$。\n代入 $q = 1/2$：\n$$ \\mathbb{E}[L] = \\frac{1/2}{1 - 1/2} = \\frac{1/2}{1/2} = 1 $$\n\n接下来，我们推导方差 $\\mathrm{Var}(L)$。我们知道 $\\mathrm{Var}(L) = \\mathbb{E}[L^2] - (\\mathbb{E}[L])^2$。我们需要计算 $\\mathbb{E}[L^2]$。一个与尾和公式相关的有用公式是 $\\mathbb{E}[L^2] = \\sum_{k=1}^{\\infty} (2k-1)P(L \\ge k)$。\n使用 $P(L \\ge k) = q^k$：\n$$ \\mathbb{E}[L^2] = \\sum_{k=1}^{\\infty} (2k-1)q^k = 2\\sum_{k=1}^{\\infty} k q^k - \\sum_{k=1}^{\\infty} q^k $$\n我们已经知道第二个和是 $\\mathbb{E}[L] = \\frac{q}{1-q}$。\n第一个和 $S = \\sum_{k=1}^{\\infty} k q^k$ 是一个著名的级数。它可以如下推导：\n$$ S = q + 2q^2 + 3q^3 + \\dots = q(1+2q+3q^2+\\dots) $$\n括号中的级数是几何级数的导数：\n$$ \\sum_{k=0}^{\\infty} q^k = \\frac{1}{1-q} \\implies \\frac{d}{dq} \\sum_{k=0}^{\\infty} q^k = \\sum_{k=1}^{\\infty} k q^{k-1} = \\frac{1}{(1-q)^2} $$\n乘以 $q$ 得到和 $S$：\n$$ S = \\sum_{k=1}^{\\infty} k q^k = \\frac{q}{(1-q)^2} $$\n现在，我们代回到 $\\mathbb{E}[L^2]$ 的表达式中：\n$$ \\mathbb{E}[L^2] = 2\\left(\\frac{q}{(1-q)^2}\\right) - \\frac{q}{1-q} = \\frac{2q - q(1-q)}{(1-q)^2} = \\frac{2q - q + q^2}{(1-q)^2} = \\frac{q+q^2}{(1-q)^2} $$\n最后，我们计算方差：\n$$ \\mathrm{Var}(L) = \\mathbb{E}[L^2] - (\\mathbb{E}[L])^2 = \\frac{q+q^2}{(1-q)^2} - \\left(\\frac{q}{1-q}\\right)^2 = \\frac{q+q^2 - q^2}{(1-q)^2} = \\frac{q}{(1-q)^2} $$\n代入值 $q=1/2$：\n$$ \\mathrm{Var}(L) = \\frac{1/2}{(1 - 1/2)^2} = \\frac{1/2}{(1/2)^2} = \\frac{1/2}{1/4} = 2 $$\n\n因此，进位链长度的期望值为 $1$，其方差为 $2$。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 1  2 \\end{pmatrix} } $$"
        },
        {
            "introduction": "克服了行波进位加法器的局限性后，进位加速的一个关键进展是分块进位向前看加法器（Block CLA）。这种结构在电路复杂度和速度之间取得了平衡，但其性能高度依赖于一个关键的设计参数：块的大小。本练习  引导我们通过建立一个实际的门延迟模型，来推导最小化总进位延迟的最佳块大小，这体现了在数字系统设计中优化多级结构时所面临的典型工程权衡。",
            "id": "4255521",
            "problem": "考虑一个 $n$ 位的两级分块超前进位加法器（CLA），它被组织成 $n/b$ 个大小为 $b$ 的连续块。该 CLA 在一个标准的电子设计自动化（EDA）时序模型下设计，在该模型中，一个扇入为 $k \\geq 2$ 的逻辑门的延迟由 $t_{2} + (k-2)\\Delta$ 给出，其中 $t_{2}$ 是一个双输入门的延迟，$\\Delta$ 是超出两个输入后每增加一个输入所带来的增量延迟。该加法器采用位级传播信号和生成信号，对于位索引 $i \\in \\{0,1,\\dots,n-1\\}$，分别定义为 $p_{i} = a_{i} \\oplus b_{i}$ 和 $g_{i} = a_{i} \\wedge b_{i}$。在每个块 $j$ 内部，组传播信号为 $P_{j} = \\bigwedge_{i \\in \\text{block } j} p_{i}$，组生成信号 $G_{j}$ 由该块的 $\\{p_{i},g_{i}\\}$ 通过一个积之和超前网络形成。假设为 $G_{j}$ 的最终宽 $b$ 输入 $\\vee$ 门提供输入所需的预计算（仅由双输入基本单元构建）具有固定的深度，因此贡献一个与 $b$ 无关的恒定延迟。\n\n块间进位计算遵循进位递推关系 $C_{j+1} = G_{j} \\vee (P_{j} \\wedge C_{j})$，并实现为一条每块使用双输入门的链，即沿着进位路径每块有一个 $\\wedge$ 门后跟一个 $\\vee$ 门。假设 $p_{i}$ 和 $g_{i}$ 在一个不依赖于 $b$ 的恒定初始延迟（从加法器输入算起）后可用，并且块内与 $b$ 相关的主要延迟是用于 $P_{j}$ 的单个 $b$ 输入 $\\wedge$ 门和用于 $G_{j}$ 的单个 $b$ 输入 $\\vee$ 门。\n\n仅使用基本进位定义 $C_{i+1} = g_{i} \\vee (p_{i} \\wedge C_{i})$、上述对 $P_{j}$ 和 $G_{j}$ 的块组定义，以及指定的门延迟模型 $t(k) = t_{2} + (k-2)\\Delta$，推导使加法器最坏情况进位输出延迟最小化的块大小 $b$（作为 $n$、$t_{2}$ 和 $\\Delta$ 的函数）。将最优 $b$ 的最终结果表示为单个闭式解析表达式。无需进行数值计算。",
            "solution": "出发点是位级的进位递推关系 $C_{i+1} = g_{i} \\vee (p_{i} \\wedge C_{i})$，该关系在块级推广为 $C_{j+1} = G_{j} \\vee \\left(P_{j} \\wedge C_{j}\\right)$，一旦块组传播信号 $P_{j}$ 和生成信号 $G_{j}$ 形成。到加法器进位输出的关键路径延迟必须考虑三个组成部分：形成位级信号 $\\{p_{i},g_{i}\\}$ 的时间，形成块级信号 $\\{P_{j},G_{j}\\}$ 的时间，以及通过 $C_{j+1} = G_{j} \\vee (P_{j} \\wedge C_{j})$ 递推关系在 $n/b$ 个块链中传播的时间。\n\n在给定的门延迟模型下，任何 $k$ 输入门的延迟为 $t(k) = t_{2} + (k-2)\\Delta$。设从加法器输入到所有 $\\{p_{i},g_{i}\\}$ 可用所需的恒定延迟表示为 $T_{\\text{head}}$，该延迟可能包括 $\\oplus$ 和 $\\wedge$ 操作以及任何局部缓冲的延迟，并且不依赖于 $b$。在一个大小为 $b$ 的块内部，组传播信号 $P_{j}$ 由一个单个的 $b$ 输入 $\\wedge$ 门形成，在 $\\{p_{i}\\}$ 可用之后产生 $t_{P}(b) = t_{2} + (b-2)\\Delta$ 的延迟。假设组生成信号 $G_{j}$ 由一个最终的 $b$ 输入 $\\vee$ 门形成，其输入由一个固定深度的双输入门网络预先计算；设固定的预计算延迟为 $T_{\\text{pre}}$。因此，对于 $G_{j}$，与 $b$ 相关的主要部分是 $b$ 输入 $\\vee$ 门，其延迟在预计算之后为 $t_{G}(b) = t_{2} + (b-2)\\Delta$。因此，所有块的 $P_{j}$ 和 $G_{j}$ 都可用的最早时间是\n$$\nT_{\\text{blk}}(b) = T_{\\text{head}} + T_{\\text{pre}} + \\left[t_{2} + (b-2)\\Delta\\right],\n$$\n其中括号内的项捕捉了与 $b$ 相关的宽门延迟，而和 $T_{\\text{head}} + T_{\\text{pre}}$ 与 $b$ 无关。\n\n在块之间，进位递推关系 $C_{j+1} = G_{j} \\vee (P_{j} \\wedge C_{j})$ 在每个块中由一个双输入 $\\wedge$ 门后跟一个双输入 $\\vee$ 门实现，因此进位链上的每个块贡献 $2 t_{2}$ 的延迟。对于 $n/b$ 个块，块间进位传播延迟为\n$$\nT_{\\text{chain}}(b) = 2 t_{2} \\cdot \\frac{n}{b}.\n$$\n在寻找最小化 $b$ 时，忽略与 $b$ 无关的常数项，总的最坏情况进位输出延迟可以写为\n$$\nD(b) = \\underbrace{T_{\\text{head}} + T_{\\text{pre}}}_{\\text{independent of } b} + \\left[t_{2} + (b-2)\\Delta\\right] + 2 t_{2} \\cdot \\frac{n}{b}.\n$$\n定义 $K = T_{\\text{head}} + T_{\\text{pre}} + t_{2} - 2\\Delta$，它与 $b$ 无关。那么\n$$\nD(b) = K + \\Delta b + 2 t_{2} \\cdot \\frac{n}{b}.\n$$\n为了最小化 $D(b)$（相对于连续的 $b  0$），求导并令导数等于零：\n$$\n\\frac{dD}{db} = \\Delta - 2 t_{2} \\cdot \\frac{n}{b^{2}} = 0.\n$$\n求解 $b$ 可得\n$$\n\\Delta = 2 t_{2} \\cdot \\frac{n}{b^{2}} \\quad \\Rightarrow \\quad b^{2} = \\frac{2 t_{2} n}{\\Delta} \\quad \\Rightarrow \\quad b^{\\star} = \\sqrt{\\frac{2 t_{2} n}{\\Delta}}.\n$$\n二阶导数检验确认了凸性：\n$$\n\\frac{d^{2}D}{db^{2}} = 4 t_{2} \\cdot \\frac{n}{b^{3}}  0 \\quad \\text{for} \\quad b  0,\n$$\n因此该驻点确实是一个全局最小值。常数 $T_{\\text{head}}$ 和 $T_{\\text{pre}}$ 不影响最优 $b$ 值，因为它们不依赖于 $b$。因此，在指定模型下，使最坏情况进位输出延迟最小化的最优块大小是\n$$\nb^{\\star} = \\sqrt{\\frac{2 t_{2} n}{\\Delta}}.\n$$\n如果在实现中需要整数块大小，则会选择最接近 $b^{\\star}$ 的整数，但所要求的闭式解析最小值如上所示。",
            "answer": "$$\\boxed{\\sqrt{\\frac{2 t_{2} n}{\\Delta}}}$$"
        },
        {
            "introduction": "在追求极致速度的并行前缀加法器中，设计决策会深入到逻辑门级别的细微之处。一个典型的例子是对进位“传播”信号（propagate signal）的定义，不同的选择会对电路的整体性能和实现方式产生深远影响。本练习  探讨了用逻辑或门（$a_i \\lor b_i$）替代传统的异或门（$a_i \\oplus b_i$）作为传播信号的后果，要求我们分析这对前缀代数、求和路径延迟以及对特定电路技术（如动态逻辑）适用性的影响。",
            "id": "4255496",
            "problem": "在集成电路设计和电子设计自动化（EDA）领域，考虑一个并行前缀加法器家族。在比特位置 $i$ 处，设操作数位为 $a_i$ 和 $b_i$，输入进位为 $c_i$。根据第一性原理，将单位加法定义为模$2$和与根据布尔加法规则的输出进位：和位是 $s_i = a_i \\oplus b_i \\oplus c_i$，输出进位 $c_{i+1}$ 是一个布尔函数，当且仅当 $\\{a_i,b_i,c_i\\}$ 中至少有两个为 $1$ 时，其值为 $1$。引入标准的生成信号 $g_i = a_i \\land b_i$ 和传统的传播信号 $p_i = a_i \\oplus b_i$。在前缀结构中，位对 $(g_i,p_i)$ 通过一个由 $\\land$ 和 $\\lor$ 构建的结合二元运算符，在范围 $[j,k]$ 上组合成组对 $(G_{k:j},P_{k:j})$，从而可以实现无需逐位传递的超前进位。\n\n现在考虑用“当任一为1时传播”信号 $p_i' = a_i \\lor b_i$ 替换传统的传播信号 $p_i$，同时保持 $g_i = a_i \\land b_i$。从上述基本原理（和、多数决进位和生成的布尔定义）出发，并且不假定任何加法器特有的简化恒等式，推导用 $g_i$、$p_i'$ 和 $c_i$ 表示的 $c_{i+1}$ 和 $s_i$ 的确切形式。然后，论证应如何仅使用 $\\land$ 和 $\\lor$ 在一个块 $[j,k]$ 上形成组传播和组生成信号，以及作用于 $(G,P)$ 对的结合前缀组合运算符在替换 $p_i \\mapsto p_i'$ 后是否仍然保持结合性。最后，分析此替换对进位树中的门复杂度以及在静态互补金属氧化物半导体（CMOS）和动态多米诺（Domino）实现中对逻辑冒险的敏感性的影响。\n\n根据您的推导和分析，选择正确的选项：\n\nA. 使用 $p_i'$ 时，输出进位仍然是 $c_{i+1} = g_i \\lor (p_i' \\land c_i)$，并且和可以直接形成为 $s_i = p_i' \\oplus c_i$；因为 $g_i$ 和 $p_i'$ 是不相交的，这种替换降低了对冒险的敏感性。\n\nB. 使用 $p_i'$ 时，位级和必须写成 $s_i = (p_i' \\oplus g_i) \\oplus c_i$，输出进位是 $c_{i+1} = g_i \\lor (p_i' \\land c_i)$，并且作用于 $(G,P)$ 对的前缀代数保持其结合形式 $(G,P)\\circ(G',P') = (G \\lor (P \\land G'),\\, P \\land P')$；进位网络变为单调的（在 $(G,P)$ 上只有 $\\land,\\lor$），这对于动态多米诺CMOS是有利的，并且相对于使用 $\\oplus$ 的传播信号，它降低了进位树的门复杂度。\n\nC. 使用 $p_i'$ 时，在 $[j,k]$ 上的正确组传播是 $P_{k:j}' = p_k' \\lor p_{k-1}' \\lor \\cdots \\lor p_j'$，这缩短了树的深度但增加了扇入；作用于 $(G,P')$ 的结合前缀运算符会失效，除非树是严格平衡的。\n\nD. 使用 $p_i'$ 使超前进位无效，因为作用于 $(G,P')$ 对的组合运算符是非结合的；因此，无法用 $p_i'$ 构建并行前缀结构。\n\nE. 用 $p_i'$ 替换 $p_i$ 减少了进位树中的门数，但求和路径在与 $c_i$ 进行最终 $\\oplus$ 运算之前需要一个额外的逻辑层来形成 $p_i' \\oplus g_i$，因此相对于直接使用 $p_i = a_i \\oplus b_i$，求和路径的逻辑深度可能增加 $1$；该加法器的关键路径受到的影响取决于进位路径和求和路径哪个占主导地位。",
            "solution": "该问题陈述是数字逻辑设计和计算机算术领域中一个有效且定义明确的问题。它具有科学依据、客观，并包含足够的信息以进行严谨的推导和分析。\n\n我们按要求推导所需的表达式并分析其影响。\n\n**1. 位级和 ($s_i$) 与进位 ($c_{i+1}$) 的推导**\n\n基本定义如下：\n- 和：$s_i = a_i \\oplus b_i \\oplus c_i$\n- 输出进位：$c_{i+1} = \\text{MAJ}(a_i, b_i, c_i) = (a_i \\land b_i) \\lor (a_i \\land c_i) \\lor (b_i \\land c_i)$\n\n提议的信号是：\n- 生成：$g_i = a_i \\land b_i$\n- 当任一为1时传播：$p_i' = a_i \\lor b_i$\n\n首先，让我们用 $g_i$ 和 $p_i'$ 来表示 $c_{i+1}$。通过对多数决函数进行因式分解：\n$$c_{i+1} = (a_i \\land b_i) \\lor (c_i \\land (a_i \\lor b_i))$$\n直接代入 $g_i$ 和 $p_i'$ 的定义可得：\n$$c_{i+1} = g_i \\lor (p_i' \\land c_i)$$\n这是标准的进位递归关系，在 $p_i'$ 的定义下是有效的。\n\n接下来，让我们用 $g_i$、$p_i'$ 和 $c_i$ 来表示 $s_i$。和为 $s_i = (a_i \\oplus b_i) \\oplus c_i$。我们必须用 $g_i$ 和 $p_i'$ 来表示半加和 $a_i \\oplus b_i$。我们使用布尔恒等式 $X \\oplus Y = (X \\lor Y) \\oplus (X \\land Y)$。设 $X=a_i$ 且 $Y=b_i$。\n$$a_i \\oplus b_i = (a_i \\lor b_i) \\oplus (a_i \\land b_i) = p_i' \\oplus g_i$$\n因此，完整的和表达式为：\n$$s_i = (p_i' \\oplus g_i) \\oplus c_i$$\n\n**2. 组生成/传播和结合性的推导**\n\n并行前缀加法器计算位组的进位。我们来求解从索引 $j$到 $k$ ($kj$) 的位块的组生成 $G_{k:j}$ 和组传播 $P_{k:j}'$。该块的输出进位 $c_{k+1}$ 必须满足 $c_{k+1} = G_{k:j} \\lor (P_{k:j}' \\land c_j)$。\n让我们组合两个相邻的块：一个从 $j$到 $m-1$ 的块和一个从 $m$到 $k$ 的块。我们使用运算符符号 $\\circ$ 进行此组合。设 $(G_2, P_2')$ 表示块 $[m, k]$，$(G_1, P_1')$ 表示块 $[j, m-1]$。\n进入第二个块的进位 $c_m$ 是第一个块的输出：\n$$c_m = G_1 \\lor (P_1' \\land c_j)$$\n第二个块的输出进位 $c_{k+1}$ 是：\n$$c_{k+1} = G_2 \\lor (P_2' \\land c_m)$$\n代入 $c_m$ 的表达式：\n$$c_{k+1} = G_2 \\lor (P_2' \\land (G_1 \\lor (P_1' \\land c_j)))$$\n$$c_{k+1} = G_2 \\lor (P_2' \\land G_1) \\lor (P_2' \\land P_1' \\land c_j)$$\n通过将其与目标形式 $c_{k+1} = G_{k:j} \\lor (P_{k:j}' \\land c_j)$ 进行比较，我们确定组合后的组信号为：\n$$G_{k:j} = G_2 \\lor (P_2' \\land G_1)$$\n$$P_{k:j}' = P_2' \\land P_1'$$\n所以，作用于对 $(G, P')$ 的前缀组合运算符是：\n$$(G_2, P_2') \\circ (G_1, P_1') = (G_2 \\lor (P_2' \\land G_1), P_2' \\land P_1')$$\n这个运算符是结合的。为了证明它，我们对三对 $A=(G_A,P_A')$, $B=(G_B,P_B')$, 和 $C=(G_C,P_C')$ 测试 $(A \\circ B) \\circ C = A \\circ (B \\circ C)$：\n$$(A \\circ B) \\circ C = (G_A \\lor (P_A' \\land G_B), P_A' \\land P_B') \\circ (G_C, P_C') = ((G_A \\lor (P_A' \\land G_B)) \\lor ((P_A' \\land P_B') \\land G_C), (P_A' \\land P_B') \\land P_C')$$\n$$A \\circ (B \\circ C) = (G_A, P_A') \\circ (G_B \\lor (P_B' \\land G_C), P_B' \\land P_C') = (G_A \\lor (P_A' \\land (G_B \\lor (P_B' \\land G_C))), P_A' \\land (P_B' \\land P_C'))$$\n利用 $\\land$ 和 $\\lor$ 的分配律和结合律，两个表达式都简化为 $(G_A \\lor (P_A' \\land G_B) \\lor (P_A' \\land P_B' \\land G_C), P_A' \\land P_B' \\land P_C')$。该运算符确实是结合的。这意味着可以用这种逻辑构建并行前缀结构。\n\n**3. 影响分析**\n\n*   **门复杂度**：初始的位信号是 $g_i = a_i \\land b_i$ 和 $p_i' = a_i \\lor b_i$。在标准 CMOS 中，一个或门比传统传播信号 $p_i = a_i \\oplus b_i$ 所需的异或门更简单（晶体管更少，面积更小，可能更快）。这降低了预计算阶段的复杂度。前缀树本身使用相同数量的前缀单元，但它由更简单的逻辑驱动。\n*   **逻辑单调性与多米诺实现**：函数 $g_i = a_i \\land b_i$ 和 $p_i' = a_i \\lor b_i$ 都是输入 $a_i$ 和 $b_i$ 的单调函数。前缀运算符 $\\circ$ 仅使用 $\\land$ 和 $\\lor$ 运算符。因此，从输入 $a_i, b_i$ 到任何进位 $c_k$ 的整个进位生成网络是一个单调布尔函数。单调逻辑可以非常容易地在像多米诺 CMOS 这样的单轨动态逻辑系列中实现，因为多米诺门是非反相的。这是一个显著的优势，避免了使用更复杂的双轨多米诺逻辑的需要。\n*   **求和路径延迟**：和的计算是 $s_i = (p_i' \\oplus g_i) \\oplus c_i$。与传统的 $s_i = p_i \\oplus c_i$ 相比，这种形式在与输入进位 $c_i$ 进行最终异或运算之前，需要一个额外的逻辑运算 $p_i' \\oplus g_i$ 来形成半加和。在 $c_i$ 可用之后生成和位的路径更长。从 $a_i, b_i$ 计算半加和的逻辑深度从一级（$a_i \\oplus b_i$）增加到两级（$a_i, b_i \\to g_i, p_i' \\to p_i' \\oplus g_i$）。这会增加求和路径的延迟。\n*   **关键路径**：加法器的关键路径由最长的信号传播延迟决定。这通常是生成最高有效位进位的路径或生成最终和位的路径。通过使进位路径的预计算更简单，但最终求和阶段更复杂，这种替换引入了设计上的权衡。对加法器关键路径的总体影响取决于最初限制性能的是哪条路径。\n\n现在我们基于此分析来评估给出的选项。\n\nA. 使用 $p_i'$ 时，输出进位仍然是 $c_{i+1} = g_i \\lor (p_i' \\land c_i)$，并且和可以直接形成为 $s_i = p_i' \\oplus c_i$；因为 $g_i$ 和 $p_i'$ 是不相交的，这种替换降低了对冒险的敏感性。\n- 进位表达式是正确的。\n- 和表达式 $s_i = p_i' \\oplus c_i$ 是**不正确**的。我们推导出的是 $s_i = (p_i' \\oplus g_i) \\oplus c_i$。\n- “$g_i$ 和 $p_i'$ 是不相交的”这一说法是**不正确**的。不相交意味着 $g_i \\land p_i' = 0$。然而，$(a_i \\land b_i) \\land (a_i \\lor b_i) = a_i \\land b_i = g_i$，它不总是 $0$。\n结论：**不正确**。\n\nB. 使用 $p_i'$ 时，位级和必须写成 $s_i = (p_i' \\oplus g_i) \\oplus c_i$，输出进位是 $c_{i+1} = g_i \\lor (p_i' \\land c_i)$，并且作用于 $(G,P)$ 对的前缀代数保持其结合形式 $(G,P)\\circ(G',P') = (G \\lor (P \\land G'),\\, P \\land P')$；进位网络变为单调的（在 $(G,P)$ 上只有 $\\land,\\lor$），这对于动态多米诺CMOS是有利的，并且相对于使用 $\\oplus$ 的传播信号，它降低了进位树的门复杂度。\n- 如推导所示，和与进位的表达式是正确的。\n- 如推导所示，前缀运算符的结合性是正确的。所给出的形式是正确的功能形式。\n- 进位网络变为单调且对多米诺逻辑有利的分析是正确的。\n- 降低门复杂度的说法是正确的，因为预计算逻辑（$p_i'$）比常规情况（$p_i$）更简单。\n结论：**正确**。\n\nC. 使用 $p_i'$ 时，在 $[j,k]$上的正确组传播是 $P_{k:j}' = p_k' \\lor p_{k-1}' \\lor \\cdots \\lor p_j'$，这缩短了树的深度但增加了扇入；作用于 $(G,P')$ 的结合前缀运算符会失效，除非树是严格平衡的。\n- 组传播的表达式是**不正确**的。我们推导出的是 $P_{k:j}' = \\bigwedge_{l=j}^k p_l'$，是一个合取（$\\land$），而不是析取（$\\lor$）。\n- 运算符非结合的说法是**不正确**的。我们证明了它的结合性。\n结论：**不正确**。\n\nD. 使用 $p_i'$ 使超前进位无效，因为作用于 $(G,P')$ 对的组合运算符是非结合的；因此，无法用 $p_i'$ 构建并行前缀结构。\n- 运算符非结合的前提是**不正确**的。\n- 因此，无法构建并行前缀结构的结论也是**不正确**的。\n结论：**不正确**。\n\nE. 用 $p_i'$ 替换 $p_i$ 减少了进位树中的门数，但求和路径在与 $c_i$ 进行最终 $\\oplus$ 运算之前需要一个额外的逻辑层来形成 $p_i' \\oplus g_i$，因此相对于直接使用 $p_i = a_i \\oplus b_i$，求和路径的逻辑深度可能增加 $1$；该加法器的关键路径受到的影响取决于进位路径和求和路径哪个占主导地位。\n- 减少门数（复杂度）的说法是正确的，如选项 B 的解释。\n- 求和路径需要一个额外的逻辑层来形成半加和（$p_i' \\oplus g_i$）的分析是正确的。\n- 求和路径逻辑深度可能增加的结论是正确的。\n- 关于关键路径取决于进位和求和路径之间权衡的最终陈述是加法器设计的一个正确且基本的原则。\n结论：**正确**。\n\n选项 B 和 E 都对提议的修改提供了正确的分析。",
            "answer": "$$\\boxed{\\text{BE}}$$"
        }
    ]
}
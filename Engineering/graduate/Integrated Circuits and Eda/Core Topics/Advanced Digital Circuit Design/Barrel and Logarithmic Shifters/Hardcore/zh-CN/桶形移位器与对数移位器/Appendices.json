{
    "hands_on_practices": [
        {
            "introduction": "理论模型在设计的早期探索阶段至关重要，它能帮助我们在进行完整实现之前评估性能。基于逻辑努力框架的四扇出反相器（FO4）延迟度量，提供了一种与具体工艺无关的电路性能估算方法。本练习将引导你推导对数移位器的关键路径延迟，通过应用FO4方法，你将学会如何将高层级的架构参数（例如数据位宽$n$）与一个具体的、归一化的性能指标联系起来，这是任何数字电路设计者都需掌握的基本技能。",
            "id": "4257361",
            "problem": "考虑一个电子设计自动化 (EDA) 流程中的互补金属氧化物半导体 (CMOS) 数据通路模块，该模块使用由相同的二对一多路复用器 (MUX) 级构成的对数移位器架构实现一个$n$位移位操作。四扇出 (FO4) 度量通过驱动四个相同反相器的参考反相器的延迟来归一化门延迟；如果参考反相器的延迟表示为 $\\tau_{\\mathrm{FO4}}$，那么任何传播延迟为 $t_{\\mathrm{pd}}$ 的门的 FO4 归一化延迟定义为 $d^{\\mathrm{FO4}} \\triangleq t_{\\mathrm{pd}} / \\tau_{\\mathrm{FO4}}$。假设每个 $2{:}1$ MUX 级都经过尺寸调整和负载设置，使得当由一个逻辑努力等效于 FO4 参考的代表性信号驱动时，其 FO4 归一化延迟等于一个已知常数 $h$。该移位器支持任何二进制编码的移位量 $s \\in \\{0, 1, \\ldots, n-1\\}$，并通过级联多级来实现，其中如果移位量的第 $k$ 位被置位，第 $k$ 级会有条件地应用 $2^{k}$ 位的移位。\n\n从路径延迟是归一化到 $\\tau_{\\mathrm{FO4}}$ 的各级延迟之和的逻辑努力观点出发，并仅使用上述架构描述，推导该对数移位器的 FO4 归一化关键路径延迟作为 $n$ 和 $h$ 的函数表达式。然后，计算当 $n = 96$ 和 $h = 1.17$ 时此延迟的值。\n\n以四扇出 (FO4) 单位表示您的最终答案，并将答案四舍五入到 $4$ 位有效数字。",
            "solution": "问题要求推导一个 $n$ 位对数移位器的四扇出 (FO$4$) 归一化关键路径延迟，并针对特定参数进行求值。该移位器由级联的 $2{:}1$ 多路复用器 (MUX) 级构成。\n\n首先，我们分析对数移位器的架构。一个 $n$ 位对数移位器设计用于将一个 $n$ 位数据字移动任意量 $s$，其中 $s \\in \\{0, 1, \\ldots, n-1\\}$。移位量 $s$ 以二进制控制字的形式提供。该移位器架构由一系列级联的级组成，其中第 $k$ 级 (对于 $k = 0, 1, 2, \\ldots$) 执行一个 $2^k$ 位的条件移位。$s$ 的二进制表示的第 $k$ 位，记为 $s_k$，控制第 $k$ 级。如果 $s_k=1$，该级将其输入数据移位 $2^k$ 位；如果 $s_k=0$，数据则不变地通过。\n\n总级数，我们称之为 $m$，由编码移位量 $s$ 所需的位数决定。由于 $s$ 可以取从 $0$ 到 $n-1$ 的任何整数值，因此有 $n$ 种可能的移位量。唯一编码 $n$ 个不同值所需的位数是 $m = \\lceil \\log_2(n) \\rceil$。这 $m$ 位分别对应于实现 $2^0, 2^1, \\ldots, 2^{m-1}$ 位移位的 $m$ 个级的控制信号 $s_0, s_1, \\ldots, s_{m-1}$。\n\n此移位器中数据传播的关键路径是从任何数据输入位到任何数据输出位的最长延迟。在这种级联架构中，数据信号必须串行地通过 $m$ 个级中的每一个级的一个 MUX。假定控制信号 $s_k$ 在每个级都可用，并且它们的到达时间不决定数据通路的延迟。因此，关键路径由 $m$ 个 MUX 序列组成。\n\n问题规定延迟要以 FO$4$ 归一化单位来衡量。单个 $2{:}1$ MUX 级的 FO$4$ 归一化延迟给定为一个常数 $h$。这个值代表 MUX 级的传播延迟 $t_{\\mathrm{pd}}$，通过参考反相器的延迟 $\\tau_{\\mathrm{FO4}}$ 进行归一化。关键路径的总 FO$4$ 归一化延迟，记为 $D^{\\mathrm{FO4}}$，是该路径上所有级的 FO$4$ 归一化延迟之和。\n\n由于关键路径遍历所有 $m$ 个级，且每个级贡献一个归一化延迟 $h$，因此总延迟是级数与每级延迟的乘积：\n$$D^{\\mathrm{FO4}} = m \\times h$$\n代入级数表达式 $m = \\lceil \\log_2(n) \\rceil$，我们得到 FO$4$ 归一化关键路径延迟作为 $n$ 和 $h$ 的函数的一般表达式：\n$$D^{\\mathrm{FO4}}(n, h) = h \\lceil \\log_2(n) \\rceil$$\n\n接下来，我们必须对给定值 $n = 96$ 和 $h = 1.17$ 计算该表达式。\n首先，我们计算级数 $m$：\n$$m = \\lceil \\log_2(96) \\rceil$$\n为了计算 $\\log_2(96)$，我们可以使用对数的性质：\n$$\\log_2(96) = \\log_2(32 \\times 3) = \\log_2(2^5 \\times 3) = \\log_2(2^5) + \\log_2(3) = 5 + \\log_2(3)$$\n我们知道 $2^1 = 2$ 且 $2^2 = 4$，所以 $1  \\log_2(3)  2$。具体来说，$\\log_2(3) \\approx 1.585$。\n因此，$\\log_2(96) \\approx 5 + 1.585 = 6.585$。\n向上取整函数 $\\lceil x \\rceil$ 给出大于或等于 $x$ 的最小整数。\n$$m = \\lceil 6.585 \\rceil = 7$$\n所以，一个 $96$ 位的对数移位器需要 $7$ 级。\n\n现在，我们可以使用推导出的公式计算总的 FO$4$ 归一化延迟：\n$$D^{\\mathrm{FO4}} = m \\times h = 7 \\times 1.17$$\n$$D^{\\mathrm{FO4}} = 8.19$$\n问题要求答案四舍五入到 $4$ 位有效数字。计算出的值 $8.19$ 有三位有效数字。为了用四位表示，我们在末尾加一个零。\n$$D^{\\mathrm{FO4}} = 8.190$$\n这是在指定单位下移位器的最终 FO$4$ 归一化延迟。",
            "answer": "$$\\boxed{8.190}$$"
        },
        {
            "introduction": "在计算出电路的组合逻辑延迟后，一个常见的挑战是该延迟可能过长，无法满足目标时钟频率。流水线技术是一种强大的微架构技术，它通过将长组合逻辑路径分割成由寄存器分隔的较短段落，来提高电路的吞吐率。本练习提供了一个将流水线技术应用于我们之前分析的对数移位器的具体场景，你将计算在插入一个流水线寄存器后新的最高时钟频率，并量化其代价——即流水线深度的增加所带来的额外延迟，这个练习将巩固你对同步时序和流水线设计核心原则的理解。",
            "id": "4257283",
            "problem": "考虑一个$64$位对数移位器，它由级联的$2:1$多路复用级实现，可实现 $2^i$ 的移位，其中 $i \\in \\{0,1,2,3,4,5\\}$，因此网络深度为 $\\lceil \\log_2(64) \\rceil = 6$ 级。该移位器在电子设计自动化（EDA）流程中被综合到一个同步流水线内，并且每条寄存器到寄存器的路径都必须满足单个全局时钟的约束。路径时序受同步数字设计的物理时序约束控制：包括寄存器的时钟到Q端延迟、通过逻辑和导线的组合传播延迟，以及在存在非零时钟偏斜的情况下，接收寄存器的建立时间要求。\n\n给定该$64$位对数移位器每级的最差情况传播延迟如下，这些延迟是在考虑了实际导线寄生参数的角点条件下测得的：\n- 第 $0$ 级（移位 $1$）：$d_0 = 28\\,\\text{ps}$\n- 第 $1$ 级（移位 $2$）：$d_1 = 35\\,\\text{ps}$\n- 第 $2$ 级（移位 $4$）：$d_2 = 42\\,\\text{ps}$\n- 第 $3$ 级（移位 $8$）：$d_3 = 55\\,\\text{ps}$\n- 第 $4$ 级（移位 $16$）：$d_4 = 68\\,\\text{ps}$\n- 第 $5$ 级（移位 $32$）：$d_5 = 85\\,\\text{ps}$\n\n假设流水线寄存器是边沿触发的D触发器，其时钟到Q端延迟 $t_{CQ} = 20\\,\\text{ps}$，建立时间 $t_{\\text{setup}} = 15\\,\\text{ps}$，并且关键路径上的有效时钟偏斜为 $t_{\\text{skew}} = 5\\,\\text{ps}$。最初，该移位器作为单个组合逻辑块实现，位于一个输入流水线寄存器和一个输出流水线寄存器之间。\n\n一项设计变更在第 $k$ 级和第 $k+1$ 级之间插入了一个额外的流水线寄存器，其中 $k = 3$。在这些条件下，确定新的最大工作频率以及此次插入所导致的额外延迟（以时钟周期为单位）。\n\n您的答案必须根据同步时序和流水线分割的基本原理推导得出，并且必须明确地考虑寄存器时序参数以及被插入寄存器分割后两侧各级组合的延迟。将频率以 $\\text{GHz}$ 为单位表示，延迟以周期为单位表示。请将您的频率结果保留四位有效数字。",
            "solution": "该问题在科学上基于同步数字电路时序的原理，提法明确且提供了所有必需的参数，并以客观、正式的语言表述，因此是有效的。我们可以着手进行解答。\n\n同步数字电路的最大工作频率 $f_{\\text{max}}$ 由满足最慢路径（即关键路径）建立时间约束的最小时钟周期 $T_{\\text{min}}$ 决定。建立时间约束的控制方程是：\n$$T_{\\text{clk}} \\ge t_{CQ} + t_{\\text{comb}} + t_{\\text{setup}} + t_{\\text{skew}}$$\n其中 $T_{\\text{clk}}$ 是时钟周期，$t_{CQ}$ 是发起寄存器的时钟到Q端延迟，$t_{\\text{comb}}$ 是寄存器之间组合逻辑的传播延迟，$t_{\\text{setup}}$ 是捕获寄存器的建立时间，$t_{\\text{skew}}$ 是对建立时间裕量产生负面影响的时钟偏斜。此处，一个正的偏斜值表示时钟较晚到达捕获寄存器，从而减少了数据传播的有效时间。因此，最小始终周期为：\n$$T_{\\text{min}} = t_{CQ} + t_{\\text{comb,crit}} + t_{\\text{setup}} + t_{\\text{skew}}$$\n其中 $t_{\\text{comb,crit}}$ 是关键组合路径的延迟。\n\n初始设计包含一个64位对数移位器，它有6级（索引为0到5），作为单个组合逻辑块放置在一个输入寄存器和一个输出寄存器之间。设计变更涉及在第 $k=3$ 级之后插入一个流水线寄存器。这将原来的单个组合逻辑块分割成两个较小的块，从而创建了一个两级流水线。\n\n第一个流水线级包括输入寄存器、移位器的第0、1、2、3级的组合逻辑，以及新插入的流水线寄存器。\n这个第一块的组合延迟 $t_{\\text{comb,1}}$ 是其所包含各级延迟的总和：\n$$t_{\\text{comb,1}} = d_0 + d_1 + d_2 + d_3$$\n代入给定值：\n$$t_{\\text{comb,1}} = 28\\,\\text{ps} + 35\\,\\text{ps} + 42\\,\\text{ps} + 55\\,\\text{ps} = 160\\,\\text{ps}$$\n\n第二个流水线级包括新的流水线寄存器、移位器第4和第5级的组合逻辑，以及原始的输出寄存器。\n这个第二块的组合延迟 $t_{\\text{comb,2}}$ 是第4级和第5级延迟的总和：\n$$t_{\\text{comb,2}} = d_4 + d_5$$\n代入给定值：\n$$t_{\\text{comb,2}} = 68\\,\\text{ps} + 85\\,\\text{ps} = 153\\,\\text{ps}$$\n\n新的流水线设计的关键路径是两个组合路径中较长的一个。因此，关键组合延迟为：\n$$t_{\\text{comb,crit}} = \\max(t_{\\text{comb,1}}, t_{\\text{comb,2}})$$\n$$t_{\\text{comb,crit}} = \\max(160\\,\\text{ps}, 153\\,\\text{ps}) = 160\\,\\text{ps}$$\n\n现在，我们可以使用给定的寄存器时序参数来计算最小始终周期 $T_{\\text{min}}$：$t_{CQ} = 20\\,\\text{ps}$，$t_{\\text{setup}} = 15\\,\\text{ps}$ 和 $t_{\\text{skew}} = 5\\,\\text{ps}$。\n$$T_{\\text{min}} = t_{CQ} + t_{\\text{comb,crit}} + t_{\\text{setup}} + t_{\\text{skew}}$$\n$$T_{\\text{min}} = 20\\,\\text{ps} + 160\\,\\text{ps} + 15\\,\\text{ps} + 5\\,\\text{ps} = 200\\,\\text{ps}$$\n\n最大工作频率是最小始终周期的倒数：\n$$f_{\\text{max}} = \\frac{1}{T_{\\text{min}}} = \\frac{1}{200\\,\\text{ps}} = \\frac{1}{200 \\times 10^{-12}\\,\\text{s}}$$\n$$f_{\\text{max}} = 5 \\times 10^9\\,\\text{Hz} = 5\\,\\text{GHz}$$\n题目要求频率保留四位有效数字，即 $5.000\\,\\text{GHz}$。\n\n接下来，我们确定额外延迟。流水线系统中的延迟是指单个数据输入从通过所有级到出现在输出端所需的时间，以时钟周期为单位。\n初始设计为：输入寄存器 $\\rightarrow$ 组合逻辑（0-5级） $\\rightarrow$ 输出寄存器。这是一个单级流水线，其延迟为1个时钟周期。\n新设计为：输入寄存器 $\\rightarrow$ 逻辑块1（0-3级） $\\rightarrow$ 流水线寄存器 $\\rightarrow$ 逻辑块2（4-5级） $\\rightarrow$ 输出寄存器。这是一个两级流水线，其延迟为2个时钟周期。\n\n因插入流水线寄存器而产生的额外延迟是新延迟与初始延迟之差：\n$$\\text{额外延迟} = \\text{延迟}_{\\text{新}} - \\text{延迟}_{\\text{初始}}$$\n$$\\text{额外延迟} = 2\\,\\text{个周期} - 1\\,\\text{个周期} = 1\\,\\text{个周期}$$\n\n因此，新的最大工作频率是 $5.000\\,\\text{GHz}$，额外延迟是 $1$ 个周期。",
            "answer": "$$\\boxed{\\begin{pmatrix} 5.000  1 \\end{pmatrix}}$$"
        },
        {
            "introduction": "在真实的集成电路设计中，几乎不存在唯一的“最佳”方案，设计师必须在性能（Performance）、功耗（Power）和面积（Area）之间不断评估和权衡不同的架构和实现，这通常被称为PPA权衡。在对数移位器和多路选择器矩阵桶形移位器之间做出选择，是这类设计决策的一个典型例子。这个综合性练习要求你扮演一名系统设计师的角色，利用延迟、面积和功耗的第一性原理模型，对两种竞争的移位器架构进行全面的比较分析，你的任务是确定哪种设计能在满足给定性能目标的同时实现最低的能耗，这体现了现代低功耗、高性能数字设计的核心思想。",
            "id": "4257282",
            "problem": "考虑一个$n$位字（其中$n=64$）的两种移位器架构实现：一种是多路复用器矩阵桶形移位器，另一种是对数移位器。您将使用标准的互补金属氧化物半导体（CMOS）和逻辑努力模型，从第一性原理出发推导面积、延迟和能量，以决定哪种设计能满足$1\\,\\text{GHz}$的时钟目标，并且每次$64$位操作的能耗最小。最终能量以皮焦耳为单位表示，并将最终答案四舍五入到三位有效数字。假设以下物理上合理且自洽的技术参数和架构分解：\n\n- 电源电压 $V_{\\text{dd}}=0.9\\,\\text{V}$。一个电容为$C$的节点发生一次$0 \\rightarrow 1$的跳变消耗的能量为$E=\\frac{1}{2}C V_{\\text{dd}}^{2}$；对于平均活动因子$\\alpha$（定义为每个周期发生$0 \\rightarrow 1$跳变的概率），每个周期的平均能耗为$E=\\alpha C V_{\\text{dd}}^{2}$。\n- 逻辑努力校准：一个驱动扇出为$4$（简称FO4）的反相器的实测延迟为$50\\,\\text{ps}$。使用逻辑努力延迟模型$d=(g h + p)\\,\\tau$以及反相器参数$g_{\\text{inv}}=1$，$p_{\\text{inv}}=1$来确定工艺时间常数$\\tau$。\n- 对数移位器（LS）：每位由$L=\\log_{2}(n)=6$个相同的$2{:}1$静态CMOS多路复用器级联而成。对于每个$2{:}1$多路复用器，使用逻辑努力参数$g_{\\text{MUX}}=2$，$p_{\\text{MUX}}=2$，以及每级每位的有效开关电容$C_{\\text{MUX}}=6\\,\\text{fF}$。假设对于随机数据和均匀随机的移位量，通过每一级的平均数据路径活动因子为$\\alpha_{\\text{data}}=\\frac{1}{2}$。每位都有一个扇出为$1$的输出缓冲器，其输入电容为$C_{\\text{FO1}}=2\\,\\text{fF}$，面积为$A_{\\text{FO1}}=1\\,\\mu\\text{m}^{2}$。一个$2{:}1$多路复用器的物理面积为$A_{\\text{MUX}}=4\\,\\mu\\text{m}^{2}$。\n- 多路复用器矩阵桶形移位器（MM）：实现为一个$n \\times n$的传输门矩阵，其中每个输出通过其所在列中的一个被使能的传输门从$n$个输入中选择一个，其后跟一个FO4输出缓冲器。每个传输门单元的面积为$A_{\\text{TG}}=0.5\\,\\mu\\text{m}^{2}$，栅极电容为$C_{\\text{TG,g}}=2\\,\\text{fF}$。被使能的通路在FO4缓冲器之前贡献了$t_{\\text{TG}}=20\\,\\text{ps}$的RC延迟。FO4输出缓冲器的延迟为$d_{\\text{FO4}}=50\\,\\text{ps}$，输入电容为$C_{\\text{FO4}}=8\\,\\text{fF}$，面积为$A_{\\text{FO4}}=4\\,\\mu\\text{m}^{2}$。对于连续的随机移位量，假设每个周期在整个矩阵选择中存在$n$个净的$0 \\rightarrow 1$跳变（随着选择的变化，每个输出有一个新的使能信号），因此每个周期的平均选择控制能耗为$n\\,C_{\\text{TG,g}}\\,V_{\\text{dd}}^{2}$。\n- 忽略给定电容和延迟中已包含部分之外的互连。在整个计算过程中使用$n=64$。\n\n任务：\n1. 从FO4校准数据推导出工艺时间常数$\\tau$，然后推导出$2{:}1$多路复用器每级的延迟。由此计算出对数移位器的总数据路径延迟$D_{\\text{LS}}$和多路复用器矩阵移位器的总数据路径延迟$D_{\\text{MM}}$。说明它们各自是否满足$1\\,\\text{GHz}$（$1\\,\\text{ns}$周期）的目标。\n2. 通过计算实例化模块的数量并乘以给定面积，推导出总物理面积$A_{\\text{LS}}$和$A_{\\text{MM}}$。\n3. 使用动态能耗模型，推导出每种架构每次$64$位操作的平均能耗。对于对数移位器，包括所有$L$个数据路径级和FO1输出的能耗。对于多路复用器矩阵移位器，包括FO4输入和选择控制栅极跳变的能耗。判断哪种架构既满足$1\\,\\text{GHz}$目标，又能耗更低。\n4. 报告两种架构中每次$64$位操作的最小能耗，以皮焦耳为单位表示，并四舍五入到三位有效数字。",
            "solution": "问题要求对两种$n$位移位器架构进行分析，即对数移位器（LS）和多路复用器矩阵（MM）移位器，其中$n=64$。分析将涵盖延迟、面积和能耗，以确定哪种设计在满足$1\\,\\text{GHz}$时钟目标的同时更为节能。\n\n首先，必须验证问题陈述的有效性。\n**步骤1：提取已知条件**\n- 字长：$n=64$\n- 电源电压：$V_{\\text{dd}}=0.9\\,\\text{V}$\n- 每周期平均能耗模型：$E=\\alpha C V_{\\text{dd}}^{2}$，其中$\\alpha$是$0 \\rightarrow 1$跳变的概率。\n- 逻辑努力校准：FO4反相器延迟为$50\\,\\text{ps}$。\n- 逻辑努力延迟模型：$d=(g h + p)\\,\\tau$\n- 反相器参数：$g_{\\text{inv}}=1$, $p_{\\text{inv}}=1$\n- 对数移位器（LS）：$L=\\log_{2}(n)=6$级$2{:}1$多路复用器。\n- 多路复用器参数：$g_{\\text{MUX}}=2$, $p_{\\text{MUX}}=2$，每级/每位开关电容$C_{\\text{MUX}}=6\\,\\text{fF}$，面积$A_{\\text{MUX}}=4\\,\\mu\\text{m}^{2}$。\n- 数据活动因子：$\\alpha_{\\text{data}}=\\frac{1}{2}$\n- LS输出缓冲器：扇出为$1$（FO1），输入电容$C_{\\text{FO1}}=2\\,\\text{fF}$，面积$A_{\\text{FO1}}=1\\,\\mu\\text{m}^{2}$。\n- 多路复用器矩阵移位器（MM）：$n \\times n$传输门（TG）矩阵。\n- TG单元参数：面积$A_{\\text{TG}}=0.5\\,\\mu\\text{m}^{2}$，栅极电容$C_{\\text{TG,g}}=2\\,\\text{fF}$。\n- TG路径延迟：$t_{\\text{TG}}=20\\,\\text{ps}$。\n- MM输出缓冲器：扇出为$4$（FO4），延迟$d_{\\text{FO4}}=50\\,\\text{ps}$，输入电容$C_{\\text{FO4}}=8\\,\\text{fF}$，面积$A_{\\text{FO4}}=4\\,\\mu\\text{m}^{2}$。\n- MM控制能耗：每周期$E_{\\text{ctrl}} = n\\,C_{\\text{TG,g}}\\,V_{\\text{dd}}^{2}$。\n- 时钟目标：$1\\,\\text{GHz}$，周期$T_{\\text{clk}} = 1\\,\\text{ns} = 1000\\,\\text{ps}$。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题具有科学依据，利用了标准的VLSI设计原则，如逻辑努力和CMOS动态功耗模型。给出的参数被认为是物理上合理的。该问题提法明确，为计算提供了所有必要的信息。诸如活动因子$\\alpha$和能耗模型等定义都是明确的。尽管对于真正的随机数据（我们期望为$\\frac{1}{4}$），$\\alpha_{\\text{data}}=\\frac{1}{2}$的值偏高，但它是作为一个建模假设给出的，并不构成使问题无效的矛盾。该问题是客观且可形式化的。\n\n**步骤3：结论和行动**\n该问题有效。将提供完整的解决方案。\n\n解决方案将通过解决问题陈述中提出的四个任务来进行。\n\n**1. 延迟计算和时序验证**\n首先，我们根据FO4反相器校准数据确定工艺时间常数$\\tau$。反相器的延迟由$d=(g_{\\text{inv}} h + p_{\\text{inv}})\\tau$给出。对于扇出为4（FO4）的反相器，$h=4$。\n$$d_{\\text{FO4}} = (1 \\cdot 4 + 1)\\tau = 5\\tau$$\n已知$d_{\\text{FO4}}=50\\,\\text{ps}$：\n$$50\\,\\text{ps} = 5\\tau \\implies \\tau=10\\,\\text{ps}$$\n\n接下来，我们计算对数移位器的总延迟$D_{\\text{LS}}$。它由$L=\\log_{2}(64)=6$级$2{:}1$多路复用器，以及其后的一个FO1输出缓冲器组成。对于多路复用器级，它们是相同的且相互驱动，因此电气努力（扇出）为$h=1$。单个多路复用器级的延迟是：\n$$d_{\\text{MUX-stage}} = (g_{\\text{MUX}} h + p_{\\text{MUX}})\\tau = (2 \\cdot 1 + 2) \\cdot 10\\,\\text{ps} = 40\\,\\text{ps}$$\n$6$个级的总延迟为$6 \\times d_{\\text{MUX-stage}} = 240\\,\\text{ps}$。\n该路径以一个FO1输出缓冲器结束。该缓冲器的延迟为：\n$$d_{\\text{FO1}} = (g_{\\text{inv}} h + p_{\\text{inv}})\\tau = (1 \\cdot 1 + 1) \\cdot 10\\,\\text{ps} = 20\\,\\text{ps}$$\n对数移位器的总数据路径延迟是这些延迟的总和：\n$$D_{\\text{LS}} = 6 \\cdot d_{\\text{MUX-stage}} + d_{\\text{FO1}} = 240\\,\\text{ps} + 20\\,\\text{ps} = 260\\,\\text{ps}$$\n\n现在，我们计算多路复用器矩阵移位器的总延迟$D_{\\text{MM}}$。该路径由一个传输门延迟和一个FO4输出缓冲器延迟组成。两者都已直接给出：\n$$D_{\\text{MM}} = t_{\\text{TG}} + d_{\\text{FO4}} = 20\\,\\text{ps} + 50\\,\\text{ps} = 70\\,\\text{ps}$$\n\n时钟目标是$1\\,\\text{GHz}$，因此时钟周期为$T_{\\text{clk}}=1\\,\\text{ns}=1000\\,\\text{ps}$。\n对于对数移位器，$D_{\\text{LS}} = 260\\,\\text{ps}  1000\\,\\text{ps}$。它满足时序目标。\n对于多路复用器矩阵移位器，$D_{\\text{MM}} = 70\\,\\text{ps}  1000\\,\\text{ps}$。它也满足时序目标。\n\n**2. 物理面积计算**\n对数移位器的总面积$A_{\\text{LS}}$是所有多路复用器和所有输出缓冲器面积的总和。有$n=64$位，每条位路径有$L=6$个多路复用器和一个FO1缓冲器。\n$$A_{\\text{LS}} = n \\cdot L \\cdot A_{\\text{MUX}} + n \\cdot A_{\\text{FO1}}$$\n$$A_{\\text{LS}} = 64 \\cdot 6 \\cdot (4\\,\\mu\\text{m}^{2}) + 64 \\cdot (1\\,\\mu\\text{m}^{2}) = 1536\\,\\mu\\text{m}^{2} + 64\\,\\mu\\text{m}^{2} = 1600\\,\\mu\\text{m}^{2}$$\n\n多路复用器矩阵移位器的总面积$A_{\\text{MM}}$是$n \\times n$ TG矩阵和$n$个输出缓冲器面积的总和。\n$$A_{\\text{MM}} = n^{2} \\cdot A_{\\text{TG}} + n \\cdot A_{\\text{FO4}}$$\n$$A_{\\text{MM}} = 64^{2} \\cdot (0.5\\,\\mu\\text{m}^{2}) + 64 \\cdot (4\\,\\mu\\text{m}^{2}) = 4096 \\cdot 0.5\\,\\mu\\text{m}^{2} + 256\\,\\mu\\text{m}^{2}$$\n$$A_{\\text{MM}} = 2048\\,\\mu\\text{m}^{2} + 256\\,\\mu\\text{m}^{2} = 2304\\,\\mu\\text{m}^{2}$$\n\n**3. 能耗计算与架构决策**\n我们使用模型$E=\\alpha C V_{\\text{dd}}^{2}$计算每种架构每次操作的平均能耗，其中$V_{\\text{dd}}=0.9\\,\\text{V}$（因此$V_{\\text{dd}}^{2} = 0.81\\,\\text{V}^{2}$）。\n\n对于对数移位器，总能耗$E_{\\text{LS}}$是多路复用器级和输出缓冲器能耗的总和。\n$n \\cdot L$个多路复用器级的能耗是：\n$$E_{\\text{stages,LS}} = n \\cdot L \\cdot \\alpha_{\\text{data}} \\cdot C_{\\text{MUX}} \\cdot V_{\\text{dd}}^{2}$$\n$$E_{\\text{stages,LS}} = 64 \\cdot 6 \\cdot \\frac{1}{2} \\cdot (6 \\times 10^{-15}\\,\\text{F}) \\cdot (0.81\\,\\text{V}^{2}) = 1152 \\times 10^{-15} \\cdot 0.81\\,\\text{J} = 933.12 \\times 10^{-15}\\,\\text{J} = 933.12\\,\\text{fJ}$$\n$n$个输出缓冲器的能耗取决于它们驱动的电容。一个FO1缓冲器驱动的负载电容等于其输入电容，即$C_{\\text{L}} = C_{\\text{FO1}} = 2\\,\\text{fF}$。\n$$E_{\\text{out,LS}} = n \\cdot \\alpha_{\\text{data}} \\cdot C_{\\text{L}} \\cdot V_{\\text{dd}}^{2}$$\n$$E_{\\text{out,LS}} = 64 \\cdot \\frac{1}{2} \\cdot (2 \\times 10^{-15}\\,\\text{F}) \\cdot (0.81\\,\\text{V}^{2}) = 64 \\times 10^{-15} \\cdot 0.81\\,\\text{J} = 51.84 \\times 10^{-15}\\,\\text{J} = 51.84\\,\\text{fJ}$$\nLS的总能耗是：\n$$E_{\\text{LS}} = E_{\\text{stages,LS}} + E_{\\text{out,LS}} = 933.12\\,\\text{fJ} + 51.84\\,\\text{fJ} = 984.96\\,\\text{fJ}$$\n\n对于多路复用器矩阵移位器，总能耗$E_{\\text{MM}}$是在FO4缓冲器输入端消耗的能耗和选择控制能耗的总和。\n缓冲器输入端的能耗是由于TG矩阵后的数据线发生跳变。共有$n$条这样的线，每条线的电容为$C_{\\text{FO4}}$。\n$$E_{\\text{in,MM}} = n \\cdot \\alpha_{\\text{data}} \\cdot C_{\\text{FO4}} \\cdot V_{\\text{dd}}^{2}$$\n$$E_{\\text{in,MM}} = 64 \\cdot \\frac{1}{2} \\cdot (8 \\times 10^{-15}\\,\\text{F}) \\cdot (0.81\\,\\text{V}^{2}) = 256 \\times 10^{-15} \\cdot 0.81\\,\\text{J} = 207.36 \\times 10^{-15}\\,\\text{J} = 207.36\\,\\text{fJ}$$\n选择控制能耗由以下公式给出：\n$$E_{\\text{ctrl,MM}} = n \\cdot C_{\\text{TG,g}} \\cdot V_{\\text{dd}}^{2}$$\n$$E_{\\text{ctrl,MM}} = 64 \\cdot (2 \\times 10^{-15}\\,\\text{F}) \\cdot (0.81\\,\\text{V}^{2}) = 128 \\times 10^{-15} \\cdot 0.81\\,\\text{J} = 103.68 \\times 10^{-15}\\,\\text{J} = 103.68\\,\\text{fJ}$$\nMM的总能耗是：\n$$E_{\\text{MM}} = E_{\\text{in,MM}} + E_{\\text{ctrl,MM}} = 207.36\\,\\text{fJ} + 103.68\\,\\text{fJ} = 311.04\\,\\text{fJ}$$\n\n比较这两种架构，它们都满足$1\\,\\text{GHz}$的时序目标。然而，它们的能耗差异显著：$E_{\\text{LS}} \\approx 985\\,\\text{fJ}$，$E_{\\text{MM}} \\approx 311\\,\\text{fJ}$。多路复用器矩阵移位器每次操作的能耗更低。\n\n**4. 最终答案**\n在满足时序约束的两种架构中，每次$64$位操作的最小能耗是$E_{\\text{MM}} = 311.04\\,\\text{fJ}$。问题要求该值以皮焦耳（$1\\,\\text{pJ} = 1000\\,\\text{fJ}$）为单位，并四舍五入到三位有效数字。\n$$E_{\\text{min}} = 311.04\\,\\text{fJ} = 0.31104\\,\\text{pJ}$$\n四舍五入到三位有效数字得到$0.311\\,\\text{pJ}$。",
            "answer": "$$\\boxed{0.311}$$"
        }
    ]
}
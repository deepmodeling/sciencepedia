## 引言
在追求更高性能和更低功耗的[集成电路设计](@entry_id:1126551)中，传统的[静态CMOS逻辑](@entry_id:1132311)并非唯一的解决方案。[传输晶体管逻辑](@entry_id:171813)（Pass-Transistor Logic, PTL）及其演进形式——[传输门](@entry_id:1133367)（Transmission Gate, TG），提供了一种功能强大且面积效率极高的设计范式，通过将MOS晶体管用作直接传递信号的开关，构建了许多关键的电路模块。然而，这种设计方式也带来了独特的挑战，例如[非理想开关行为](@entry_id:1128799)导致的信号完整性问题和性能退化。本文旨在系统性地剖析这一核心技术，弥合理论与实践之间的鸿沟。

在接下来的内容中，我们将分三个章节展开：
- **原理与机制**：深入探讨[传输晶体管](@entry_id:270743)的基本工作原理、非理想效应（如阈值[电压降](@entry_id:263648)、体效应、DIBL等）及其对电路性能的影响，并介绍相应的电路设计技术。
- **应用与跨学科连接**：展示这些技术在组合逻辑、存储器、高速数字系统及混合信号接口中的广泛应用，连接理论与实际工程问题。
- **动手实践**：提供具体的设计问题，帮助读者将理论知识转化为解决实际工程挑战的能力。

让我们首先从其最基本的原理与机制开始。

## 原理与机制

在数字[集成电路设计](@entry_id:1126551)领域，基于[MOS晶体管](@entry_id:273779)的开关逻辑是一种基本而强大的设计范式。与依赖于完全由上拉和[下拉网络](@entry_id:174150)构成的静态[CMOS门](@entry_id:165468)电路不同，[传输晶体管逻辑](@entry_id:171813)（Pass-Transistor Logic, PTL）利用[MOS晶体管](@entry_id:273779)作为受控开关，直接在电路节点之间传递信号。这种方法可以构建出结构非常紧凑且高效的[逻辑电路](@entry_id:171620)，例如多路复用器、[异或门](@entry_id:162892)和锁存器。本章将深入探讨[传输晶体管](@entry_id:270743)及其增强形式——[传输门](@entry_id:1133367)（Transmission Gate, TG）的基本工作原理、非理想行为及其对电路性能的影响，并介绍相关的电路设计技术。

### 作为开关的[传输晶体管](@entry_id:270743)

理想的开关具有零导通电阻、无穷大关断电阻，并且可以无衰减地传递任何电压。然而，[MOS晶体管](@entry_id:273779)作为开关，其行为与理想模型有显著差异。理解这些差异是有效运用[传输晶体管逻辑](@entry_id:171813)的关键。

#### nMOS[传输晶体管](@entry_id:270743)：传输逻辑高电平的局限性

一个n沟道MOSFET（nMOS）可以用作一个简单的开关，其栅极作为控制端，源极和漏极作为信号通路。当栅极电压足够高时（例如$V_{DD}$），晶体管导通，允许电流通过。

当使用nMOS[传输晶体管](@entry_id:270743)传递逻辑低电平（0V）时，其表现非常出色。假设输入为$0V$，栅极为$V_{DD}$，输出节点初始为高电平。此时，$V_{GS} = V_{DD}$，$V_{GD}$更大，晶体管强导通，输出节点可以通过导通的沟道迅速放电至$0V$。

然而，在传递逻辑高电平时，nMOS晶体管暴露出其根本性的局限性。考虑一个最初为$0V$的负载电容，通过一个栅极接$V_{DD}$的nMOS管从一个电压为$V_{DD}$的输入端充电。起初，$V_{GS} = V_{DD}$，晶体管强导通，输出节点电压$V_{out}$开始上升。但随着$V_{out}$的升高（即源极电压$V_S$升高），栅源电压$V_{GS} = V_{DD} - V_S$会不断减小。当$V_{GS}$减小到恰好等于晶体管的阈值电压$V_{Tn}$时，沟道关闭，充电过程停止。此时，输出电压达到其稳定状态的最大值：

$V_{out,max} = V_{DD} - V_{Tn}$

这个现象称为**阈值[电压降](@entry_id:263648)**。它意味着nMOS[传输晶体管](@entry_id:270743)无法传递一个“强”的逻辑高电平，输出信号的电压摆幅会受到损失。

更复杂的是，阈值电压$V_{Tn}$本身并非一个常数。在标准的体硅CMOS工艺中，当晶体管的源极-衬底电压$V_{SB}$不为零时，**体效应**（body effect）会显现出来，导致阈值电压升高。对于一个源极电压为$V_S$、衬底接地的nMOS管，$V_{SB} = V_S$。其阈值电压$V_{Tn}$由以下关系式描述：

$V_{Tn}(V_{SB}) = V_{T0n} + \gamma_n \left( \sqrt{2\phi_F + V_{SB}} - \sqrt{2\phi_F} \right)$

其中，$V_{T0n}$是零衬偏时的阈值电压，$\gamma_n$是[体效应系数](@entry_id:265189)，而$2\phi_F$是与衬底掺杂相关的表面电势。

当nMOS管传递高电平时，其源极电压$V_S$就是输出电压$V_{out}$。因此，当输出电压升高时，$V_{SB}$也随之增大，导致$V_{Tn}$增加，这进一步恶化了阈值[电压降](@entry_id:263648)问题。最终的输出电压$V_{out}$由一个自洽的关断条件决定：$V_{DD} - V_{out} = V_{Tn}(V_{out})$。为了求得$V_{out}$的精确值，需要解一个关于$V_{out}$的[非线性方程](@entry_id:145852)。例如，在一个$V_{DD}=1.0V$, $V_{T0}=0.25V$, $\gamma=0.5V^{1/2}$, $2\phi_F=0.8V$的典型工艺场景中，通过求解该方程，可以计算出最终的输出高电平仅为约$0.6046V$，远低于$V_{DD}$  。这个降级的逻辑高电平不仅会降低下游[逻辑门](@entry_id:178011)的[噪声容限](@entry_id:177605)，还可能导致静态功耗甚至[逻辑错误](@entry_id:140967)。

#### pMOS[传输晶体管](@entry_id:270743)与互补行为

一个p沟道MOSFET（pMOS）也可以用作开关。它的行为与nMOS呈互补关系。当栅极施加低电压（例如$0V$）时，pMOS导通。pMOS能够完美地传递逻辑高电平（$V_{DD}$），因为此时其$V_{SG}$保持在$V_{DD}$，晶体管强导通。然而，在传递逻辑低电平时，它会遇到与nMOS传递高电平类似的问题，输出电压最低只能达到$|V_{Tp}|$，同样存在阈值[电压降](@entry_id:263648)和体效应。

### [CMOS传输门](@entry_id:163359)：一种性能更优的开关

为了克服单个[MOS晶体管](@entry_id:273779)的阈值[电压降](@entry_id:263648)问题，我们可以将一个nMOS和一个p[MOS晶体管](@entry_id:273779)并联，并用互补的[控制信号](@entry_id:747841)（$C$和$\bar{C}$）来驱动它们的栅极。这种结构被称为**[CMOS传输门](@entry_id:163359)**（Transmission Gate, TG）。

当控制信号$C$为高电平（$V_{DD}$）时，$\bar{C}$为低电平（$0V$），nMOS和pMOS的栅极分别被施加$V_{DD}$和$0V$电压，两者同时导通。此时，[传输门](@entry_id:1133367)处于开启状态。
- 当传递接近$0V$的低电平时，nMOS的$V_{GS}$接近$V_{DD}$，导通能力很强。
- 当传递接近$V_{DD}$的高电平时，pMOS的$V_{SG}$接近$V_{DD}$，导通能力很强。
- 当传递中间电平时，两个晶体管都处于导通状态，共同贡献导电沟道。

由于在信号摆幅的两端总有一个晶体管能够强导通，[传输门](@entry_id:1133367)可以实现从$0V$到$V_{DD}$的完整“[轨到轨](@entry_id:271568)”（rail-to-rail）摆幅，有效解决了阈值[电压降](@entry_id:263648)问题。

#### [导通电阻](@entry_id:172635)特性与优化

尽管[传输门](@entry_id:1133367)解决了电压摆幅的问题，但其等效导通电阻$R_{on}$并非一个常数，而是随其两端传递的电压$V_X$动态变化的。[传输门](@entry_id:1133367)的总电导$G_{TG}$是并联的nMOS和pMOS电导之和，即$G_{TG}(V_X) = G_n(V_X) + G_p(V_X)$。

- 当$V_X$接近$0V$时，$G_n$很大而$G_p$很小（甚至为零），总电导主要由nMOS决定。
- 当$V_X$接近$V_{DD}$时，$G_p$很大而$G_n$很小（甚至为零），总电导主要由pMOS决定。
- 在中间电压区域，$G_n$和$G_p$都对总电导有贡献。

这种变化的电阻特性可能导致[信号延迟](@entry_id:261518)随数据模式而变化，给时序分析带来困难。一个理想的设计目标是使[传输门](@entry_id:1133367)的[导通电阻](@entry_id:172635)在整个工作电压范围内尽可能均匀。这等价于最大化[传输门](@entry_id:1133367)在$[0, V_{DD}]$区间内的最小电导值。通过对小信号电导的分析可以证明，要使电导曲线在中间区域最平坦，从而使最低电导值最大化，nMOS和p[MOS晶体管](@entry_id:273779)的有效增益因子应当匹配。这最终导出一个经典的优化尺寸比例关系：$\mu_n C_{ox} \frac{W_n}{L} = \mu_p C_{ox} \frac{W_p}{L}$。假设沟道长度$L$相同，则最优的宽长比为：

$ \frac{W_p}{W_n} = \frac{\mu_n}{\mu_p} $

由于电子迁移率$\mu_n$通常是[空穴迁移率](@entry_id:1126148)$\mu_p$的2到3倍，这意味着p[MOS晶体管](@entry_id:273779)通常需要设计得比nMOS更宽，以获得均衡的电阻特性 。

此外，体效应同样会影响[传输门](@entry_id:1133367)的电阻特性。当传递的电压$V_X$处于$0$和$V_{DD}$之间时，nMOS和pMOS的源极电压均不等于其衬底电压，导致它们的阈值电压$|V_T|$都因体效应而增大。这会削弱两个晶体管的导通能力，从而在中间电压范围内增加[传输门](@entry_id:1133367)的整体电阻。在进行精确的性能分析时，必须将体效应纳入计算。例如，在$V_X = V_{DD}/2$的特定工作点，可以精确计算考虑了体效应的$V_{Tn}$和$V_{Tp}$，进而得到该点的总[导通电阻](@entry_id:172635)$R_{on}$ 。

### 先进工艺下的非理想效应及其性能影响

随着[CMOS技术](@entry_id:265278)进入深亚微米及纳米尺度，一系列过去可以忽略的二阶效应变得至关重要。这些效应深刻地影响着[传输晶体管逻辑](@entry_id:171813)的静态和动态性能。

#### [传输晶体管](@entry_id:270743)链中的电压退化

在nMOS[传输晶体管](@entry_id:270743)链中，阈值[电压降](@entry_id:263648)会逐级累积，导致信号电平严重退化。然而，在[FinFET](@entry_id:264539)等先进多栅器件中，由于栅极对沟道的静电控制能力极强，体效应几乎可以忽略不计。但这并不意味着电压退化问题就消失了，取而代之的是另一个关键的短沟道效应——**漏致势垒降低**（Drain-Induced Barrier Lowering, DIBL）。DIBL效应表现为，当漏源电压$V_{DS}$增大时，源极与沟道之间的势垒会降低，等效于阈值电压$V_T$的减小。该效应可近似地[线性建模](@entry_id:171589)为：$V_T(V_{DS}) = V_{T0} - \eta V_{DS}$，其中$\eta$是DIBL系数。

考虑一个由$k$个相同的nMOS [FinFET](@entry_id:264539)[传输晶体管](@entry_id:270743)组成的链，用于传输一个高电平信号。在[稳态](@entry_id:139253)下，第$i$个晶体管的关断条件为$V_{GS,i} = V_{T,i}$。通过建立关于每一级节点电压$V_i$的[递推关系](@entry_id:189264)并求解，可以得到第$k$级输出的最终电压$V_k$的解析表达式：

$ V_k = (V_{DD} - V_{T0}) + V_{T0}\left(\frac{\eta}{1 + \eta}\right)^k $

这个结果表明，即使没有体效应，DIBL也会导致电压在链中逐级退化。每经过一级，输出电压就会向渐近值$(V_{DD} - V_{T0})$靠近一部分，退化的程度由DIBL系数$\eta$决定。当$\eta=0$时，[电压降](@entry_id:263648)在第一级之后不再累积；而当$\eta > 0$时，电压会持续下降 。

#### 漏电流机制与[静态功耗](@entry_id:174547)

在理想情况下，处于“关断”状态的MOSFET应不导通任何电流。然而，在现实中，即使$V_{GS}$低于$V_T$，仍然存在一个不可忽略的**亚阈值漏电流**。该电流是现代低功耗电路设计中[静态功耗](@entry_id:174547)的主要来源。亚阈值电流$I_{sub}$对栅源电压呈指数依赖关系，其模型可表示为：

$ I_{sub} \propto \exp\left(\frac{V_{GS} - V_{T,eff}}{n V_T}\right) $

其中，$n$是[亚阈值摆幅](@entry_id:193480)因子，$V_T$是热电压，而$V_{T,eff}$是考虑了所有非理想效应（如DIBL和体效应）的有效阈值电压。DIBL效应会降低$V_{T,eff}$，从而显著增加漏电流。在分析关断状态的[传输门](@entry_id:1133367)时，总的漏电流是并联的nMOS和pMOS各自亚阈值漏电流之和。精确计算这一漏电流对于评估电路的待机功耗和确保动态节点电荷的保持至关重要 。

#### 动态行为与时序

[传输晶体管](@entry_id:270743)的非理想特性不仅影响静态电压电平和功耗，也直接关系到电路的动态性能和时序。

**动态功耗**：当一个nMOS[传输晶体管](@entry_id:270743)为一个负载电容$C_L$充电时，由于阈值[电压降](@entry_id:263648)，最终节点电压只能达到$V_f \lt V_{DD}$。在此过程中，从电源$V_{DD}$获取的总电荷为$Q_{supply} = C_L V_f$。因此，电源所做的功（即消耗的能量）为$E_s = Q_{supply} V_{DD} = C_L V_{DD} V_f$。基于事件发生的频率$f$和活动因子$\alpha_{01}$，可以计算出平均动态功耗为$P_{avg} = \alpha_{01} f C_L V_{DD} V_f$。这个功耗表达式直接与通过求解体效应方程得到的最终电压$V_f$相关联 。

**[信号传播延迟](@entry_id:271898)**：在时序分析中，[传输晶体管](@entry_id:270743)路径通常被建模为RC网络。nMOS传输网络的阈值[电压降](@entry_id:263648)意味着其输出端的充电过程渐近于一个较低的电压$V_\infty = V_{DD} - V_{tn}$，而非$V_{DD}$。这会影响信号电压上升到下游[逻辑门](@entry_id:178011)开关阈值$V_M$所需的时间。在基于锁存器的[流水线设计](@entry_id:154419)中，这种延迟分析尤为重要。[电平敏感锁存器](@entry_id:165956)具有“透明”窗口，允许数据在此时段内传播。如果前一级逻辑的计算结果较晚到达，它仍然可以在透明窗口关闭前被锁存，这种现象称为**时间借用**（time-borrowing）。可借用的时间量取决于信号通过[传输晶体管](@entry_id:270743)网络到达$V_M$所需的时间，而这个时间又直接受到$V_{tn}$所限制的电压摆幅的影响 。

**浮空节点上的状态保持**：在采用[两相不交叠时钟](@entry_id:1133549)的动态电路或[传输门](@entry_id:1133367)逻辑中，内部节点可能会在时钟相位的间隙短暂地处于“浮空”状态。此时，节点与电源和地之间仅通过漏电[路径连接](@entry_id:149343)。这些漏电流（可建模为等效的漏电电导）会使存储在节点电容上的电荷逐渐流失，导致[电压衰减](@entry_id:167140)。通过建立关于节点电压的[一阶常微分方程](@entry_id:264241)并求解，可以分析电压随时间衰减的轨迹。这对于确定节点能够保持其逻辑状态的最大浮空时间（$\Delta_{max}$）或所需的最小刷新频率至关重要，以防止因电荷泄放而导致的[逻辑错误](@entry_id:140967) 。

### [传输晶体管逻辑](@entry_id:171813)的设计技术

为了应对[传输晶体管](@entry_id:270743)的固有局限性并优化其性能，设计师们发展了多种电路技术。

#### 克服[电压降](@entry_id:263648)：电平恢复

nMOS的阈值[电压降](@entry_id:263648)是一个严重的问题。除了使用[传输门](@entry_id:1133367)之外，还有其他技术可以恢复损失的电压摆幅。一种简单的方法是在[传输晶体管](@entry_id:270743)的输出端增加一个弱pMOS上拉晶体管（或称“bleeder”），其栅极接地。这个弱上拉器件可以缓慢地将降级的逻辑高电平“修复”至$V_{DD}$。

一种更主动且速度更快的技术是**栅极自举**（Gate Bootstrapping）。其核心思想是在传输过程中动态地将nMOS传输管的栅极电压提升到$V_{DD}$以上。这可以通过一个“[自举电容](@entry_id:269538)”$C_b$实现。在传输开始前，栅极节点$G$预充电至$V_{DD}$。当传输开始时，一个[控制信号](@entry_id:747841)$S$从$0$跳变至$V_{DD}$，这个跳变通过耦合电容$C_b$传递到浮空的栅极节点$G$上，使其电压被“抬升”。最终的栅极电压$V_G(\infty)$取决于$C_b$和栅极对地[寄生电容](@entry_id:270891)$C_g$的分压。为了使输出节点$X$能够完全充电到$V_{DD}$，关断条件$V_G(\infty) - V_X(\infty) = V_{TN}$必须在$V_X(\infty)=V_{DD}$时才满足，这意味着$V_G(\infty)$必须达到$V_{DD}+V_{TN}$。通过对浮空栅极节点上的电荷守恒进行分析，可以推导出实现完全电平恢复所需的最小电容比：

$ \frac{C_b}{C_g} = \frac{V_{TN}}{V_{DD} - V_{TN}} $

这个关系式为[自举电路](@entry_id:1121780)的设计提供了明确的指导 。

#### 管理竞争：动态电路中的维持器

在[动态逻辑](@entry_id:165510)中，为了对抗漏电流导致的电荷损失，通常会使用一个**维持器**（keeper）电路来保持动态节点的状态。维持器通常是一个由输出节点反馈驱动的弱反相器。然而，当一个[传输晶体管](@entry_id:270743)试图改变该动态节点的状态时，它必须与维持器发生**竞争**（contention）。例如，当一个nMOS传输管试图将节点上拉至高电平时，维持器的下拉nMOS管可能仍然在试图将其拉至低电平。

在这种[竞争状态](@entry_id:177665)下，节点的最终[稳态](@entry_id:139253)电压$V_Y$取决于上拉电流（来自传输管）和下拉电流（来自维持器）的平衡。通过令它们的电流相等，可以建立一个关于$V_Y$的方程，求解后可得到竞争下的稳定电压。该电压直接取决于传输管和维持器的相对驱动能力。一个常用的近似解（假设两个晶体管都工作在饱和区）如下：
$$V_Y \approx \frac{\sqrt{\beta_p}(V_{DD}-V_{Tn}) + \sqrt{\beta_k}V_{Tn}}{\sqrt{\beta_p} + \sqrt{\beta_k}}$$
其中 $\beta_p$ 和 $\beta_k$ 分别是传输管和维持器下拉管的增益因子，而 $V_{Tn}$ 是它们的阈值电压。这个结果清晰地显示了节点的最终电压是如何由传输管和维持器的相对驱动能力（由$\beta$比值决定）所决定的。为了确保节点能够达到有效的逻辑高电平，传输管的驱动能力$\beta_p$必须远大于维持器的驱动能力$\beta_k$ 。

总之，[传输晶体管](@entry_id:270743)和[传输门](@entry_id:1133367)逻辑提供了一种功能强大且面积效率高的[数字电路](@entry_id:268512)实现方式。然而，要充分发挥其优势，设计者必须深刻理解其固有的物理限制，如阈值[电压降](@entry_id:263648)、体效应，以及在先进工艺中日益显著的DIBL和漏电流等非理想效应，并熟练运用电平恢复、[尺寸优化](@entry_id:167663)和维持器设计等技术来应对这些挑战。
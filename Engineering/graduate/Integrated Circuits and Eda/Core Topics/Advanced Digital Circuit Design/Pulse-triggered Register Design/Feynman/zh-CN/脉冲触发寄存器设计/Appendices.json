{
    "hands_on_practices": [
        {
            "introduction": "脉冲触发寄存器的设计涉及性能和稳健性之间的基本权衡。本练习要求您通过找到最佳时钟脉冲宽度来量化这一权衡。通过将建立时间和保持时间的时序要求转化为数学约束，您将学习如何在确保电路免受短路径时序故障影响的同时，最小化时钟周期时间，从而最大限度地提高性能。",
            "id": "4291890",
            "problem": "考虑一个由相同的脉冲触发寄存器 (PTR) 组成的流水线，其中每个PTR实现为一个由上升沿附近生成的宽度为 $t_{pw}$ 的窄时钟脉冲驱动的电平敏感锁存器。在一个周期内，发射寄存器在 $[0, t_{pw}]$ 期间变为透明，而捕获寄存器在 $[T_{\\text{clk}}, T_{\\text{clk}} + t_{pw}]$ 期间变为透明，其中 $T_{\\text{clk}}$ 是周期时间。假设为单相操作，且允许时间借用，最多可借用到捕获PTR的透明区间。运行在该流水线上的工作负载，其相邻PTR之间的组合路径延迟呈某种分布，具有最大延迟 $D_{\\max}$ 和最小延迟 $D_{\\min}$。\n\n请仅使用以下基础定义和广为接受的时序事实作为您构建公式的基础：\n- 具有最大时钟到Q端延迟 $t_{cq}^{\\max}$ 的发射寄存器所发射的数据，在经过延迟为 $D$ 的路径后，必须在捕获PTR的透明窗口结束之前被捕获，该捕获时间点需减去建立时间 $t_{su}$ 和一个用于解释时钟不确定性的建立时间裕量 $s_{\\text{setup}}$。这从建立时间方面得出了周期时间的下限。\n- 短路径鲁棒性要求禁止在最快数据传播的情况下出现任何两级寄存器透明链。在具有最差负时钟偏斜 $\\delta$ （捕获端相对于发射端提前开启）的单相脉冲锁存器流水线中，发射脉冲的结束与捕获脉冲的开始之间的时间间隔，必须至少等于数据到达捕获输入端的最早时间，该时间是最小时钟到Q端延迟 $t_{cq}^{\\min}$、最小路径延迟 $D_{\\min}$ 和捕获保持时间 $t_{h}$ 的总和。\n\n给定特定工作负载和工艺角下的以下参数，所有参数均以皮秒 (ps) 为单位：\n- 最大组合路径延迟: $D_{\\max} = 820$ ps。\n- 最小组合路径延迟: $D_{\\min} = 180$ ps。\n- 最大时钟到Q端延迟: $t_{cq}^{\\max} = 55$ ps。\n- 最小时钟到Q端延迟: $t_{cq}^{\\min} = 40$ ps。\n- 建立时间: $t_{su} = 20$ ps。\n- 建立时间裕量: $s_{\\text{setup}} = 10$ ps。\n- 捕获保持时间: $t_{h} = 10$ ps。\n- 最差负时钟偏斜: $\\delta = 60$ ps。\n- 由于脉冲发生器和锁存器内部限制，可行的脉冲宽度范围: $t_{pw} \\in [150, 350]$ ps。\n\n根据上述基本定义，构建一个关于脉冲宽度 $t_{pw}$ 的约束优化问题，该问题旨在最小化所需的周期时间 $T_{\\text{clk}}$，同时满足给定工作负载的短路径鲁棒性约束。求解此问题，以获得在指定可行范围内的最优脉冲宽度 $t_{pw}^{\\star}$。请用皮秒 (ps) 表示您的最终答案，并四舍五入至四位有效数字。最终答案必须是一个实数。",
            "solution": "用户希望找到最优脉冲宽度 $t_{pw}^{\\star}$，以最小化脉冲触发寄存器流水线的周期时间 $T_{\\text{clk}}$，同时满足建立时间和保持时间约束，以及 $t_{pw}$ 的可行范围。\n\n### 步骤 1: 提取给定条件\n问题提供了以下参数和定义：\n- 最大组合路径延迟: $D_{\\max} = 820 \\text{ ps}$。\n- 最小组合路径延迟: $D_{\\min} = 180 \\text{ ps}$。\n- 最大时钟到Q端延迟: $t_{cq}^{\\max} = 55 \\text{ ps}$。\n- 最小时钟到Q端延迟: $t_{cq}^{\\min} = 40 \\text{ ps}$。\n- 建立时间: $t_{su} = 20 \\text{ ps}$。\n- 建立时间裕量: $s_{\\text{setup}} = 10 \\text{ ps}$。\n- 捕获保持时间: $t_{h} = 10 \\text{ ps}$。\n- 最差负时钟偏斜: $\\delta = 60 \\text{ ps}$。\n- 可行脉冲宽度范围: $t_{pw} \\in [150, 350] \\text{ ps}$。\n- 周期时间: $T_{\\text{clk}}$。\n- 脉冲宽度: $t_{pw}$。\n\n问题还指定了时序约束的基本定义：\n1.  **建立时间约束**：由发射PTR发射的数据必须在捕获PTR的透明窗口结束之前被捕获，该窗口结束时间需减去建立时间和建立时间裕量。发射寄存器在 $[0, t_{pw}]$ 期间透明，捕获寄存器在 $[T_{\\text{clk}}, T_{\\text{clk}} + t_{pw}]$ 期间透明。\n2.  **保持时间（短路径）约束**：发射脉冲的结束与捕获脉冲的开始之间的时间间隔必须至少等于最小时钟到Q端延迟、最小路径延迟和捕获保持时间的总和，并考虑最差负时钟偏斜 $\\delta$。\n\n### 步骤 2: 使用提取的给定条件进行验证\n该问题在数字电路时序分析（针对基于锁存器的流水线）的原理上是`有科学依据的`。它要求解一个约束优化问题，因此是`良构的`。语言`客观`且精确。所有必要的参数都已提供，使得问题`自洽`，并且没有内部矛盾。尽管保持时间约束定义的措辞在语法上略显非传统，但其数学含义已明确定义。问题要求严格遵守这些给定的定义，这是规范问题的标准特征。因此，该问题被认为是**有效的**。\n\n### 步骤 3: 构建并求解优化问题\n\n目标是通过从区间 $[150, 350]$ 中选择一个最优的 $t_{pw}$ 来最小化 $T_{\\text{clk}}$。这需要将对 $T_{\\text{clk}}$ 的约束构建为 $t_{pw}$ 的函数。\n\n**1. 建立时间约束的构建**\n建立时间约束确保最慢的数据路径有足够的时间传播并被安全捕获。\n- 最晚的数据在时刻 $0$ 的时钟沿后，于时刻 $t_{cq}^{\\max}$ 从发射寄存器发射。\n- 数据穿过最长的组合逻辑路径，耗时 $D_{\\max}$。\n- 数据到达捕获寄存器输入端的最晚时间是 $t_{\\text{arrival}}^{\\max} = t_{cq}^{\\max} + D_{\\max}$。\n- 捕获寄存器在区间 $[T_{\\text{clk}}, T_{\\text{clk}} + t_{pw}]$ 内是透明的。\n- 为了被安全捕获，数据必须在锁存器关闭（即透明窗口结束）前 $t_{su}$ 的时间内保持稳定，并加上一个安全裕量 $s_{\\text{setup}}$。因此，捕获的截止时间是 $t_{\\text{deadline}} = (T_{\\text{clk}} + t_{pw}) - t_{su} - s_{\\text{setup}}$。\n- 建立时间约束是 $t_{\\text{arrival}}^{\\max} \\le t_{\\text{deadline}}$。\n$$t_{cq}^{\\max} + D_{\\max} \\le T_{\\text{clk}} + t_{pw} - t_{su} - s_{\\text{setup}}$$\n整理得到关于 $T_{\\text{clk}}$ 的第一个下限：\n$$T_{\\text{clk}} \\ge t_{cq}^{\\max} + D_{\\max} - t_{pw} + t_{su} + s_{\\text{setup}}$$\n\n**2. 保持时间约束的构建**\n保持时间约束（或短路径约束）防止来自最快路径的数据过早到达并破坏捕获锁存器中的数据。我们必须使用问题陈述中提供的定义。\n- 发射脉冲在时刻 $t_{pw}$ 结束。\n- 捕获脉冲名义上在时刻 $T_{\\text{clk}}$ 开始。在最差负偏斜 $\\delta$ 的情况下，捕获时钟会提前到达，因此捕获脉冲在 $T_{\\text{clk}} - \\delta$ 开始。\n- 发射脉冲结束和捕获脉冲开始之间的时间间隔为 $(T_{\\text{clk}} - \\delta) - t_{pw}$。\n- 问题将所需的最小间隔定义为 $t_{cq}^{\\min}$、$D_{\\min}$ 和 $t_{h}$ 的总和。\n- 因此，保持时间约束为：\n$$(T_{\\text{clk}} - \\delta) - t_{pw} \\ge t_{cq}^{\\min} + D_{\\min} + t_{h}$$\n整理得到关于 $T_{\\text{clk}}$ 的第二个下限：\n$$T_{\\text{clk}} \\ge t_{pw} + t_{cq}^{\\min} + D_{\\min} + \\delta + t_{h}$$\n\n**3. 优化问题**\n为同时满足两个约束，$T_{\\text{clk}}$ 必须大于或等于这两个下限中的最大值：\n$$T_{\\text{clk}}(t_{pw}) \\ge \\max\\left( t_{cq}^{\\max} + D_{\\max} - t_{pw} + t_{su} + s_{\\text{setup}}, \\quad t_{pw} + t_{cq}^{\\min} + D_{\\min} + \\delta + t_{h} \\right)$$\n为了最小化 $T_{\\text{clk}}$，我们必须在 $[150, 350]$ 的范围内找到一个 $t_{pw}$ 值，使得上述表达式最小。我们定义两个关于 $t_{pw}$ 的线性函数：\n- $f_1(t_{pw}) = (t_{cq}^{\\max} + D_{\\max} + t_{su} + s_{\\text{setup}}) - t_{pw}$ (递减函数)\n- $f_2(t_{pw}) = (t_{cq}^{\\min} + D_{\\min} + \\delta + t_{h}) + t_{pw}$ (递增函数)\n\n首先代入给定值来计算常数部分：\n- $f_1$ 的常数部分：$C_1 = 55 + 820 + 20 + 10 = 905 \\text{ ps}$。所以，$f_1(t_{pw}) = 905 - t_{pw}$。\n- $f_2$ 的常数部分：$C_2 = 40 + 180 + 60 + 10 = 290 \\text{ ps}$。所以，$f_2(t_{pw}) = 290 + t_{pw}$。\n\n我们需要对 $t_{pw} \\in [150, 350]$ 最小化 $T_{\\text{clk}}(t_{pw}) = \\max(905 - t_{pw}, 290 + t_{pw})$。\n一个递减函数和一个递增函数的最大值的最小值出现在它们的交点处，前提是该交点在可行域内。我们来求这个交点，记为 $t_{pw}^{\\text{unc}}$（无约束最优解）：\n$$f_1(t_{pw}^{\\text{unc}}) = f_2(t_{pw}^{\\text{unc}})$$\n$$905 - t_{pw}^{\\text{unc}} = 290 + t_{pw}^{\\text{unc}}$$\n$$2 t_{pw}^{\\text{unc}} = 905 - 290$$\n$$2 t_{pw}^{\\text{unc}} = 615$$\n$$t_{pw}^{\\text{unc}} = 307.5 \\text{ ps}$$\n\n现在，我们检查这个无约束最优值是否在 $t_{pw}$ 的可行范围内：\n$$150 \\text{ ps} \\le 307.5 \\text{ ps} \\le 350 \\text{ ps}$$\n条件满足。因此，最小化周期时间的最优脉冲宽度 $t_{pw}^{\\star}$ 是 $307.5 \\text{ ps}$。\n\n问题要求答案四舍五入到四位有效数字。计算出的值 $307.5$ 已经有四位有效数字。\n\n最优脉冲宽度是 $t_{pw}^{\\star} = 307.5 \\text{ ps}$。",
            "answer": "$$\\boxed{307.5}$$"
        },
        {
            "introduction": "在理解时序约束的基础上，本练习将深入探讨修复保持时间违例的实际任务。您将扮演一名设计工程师，使用标准单元（缓冲器）库，策略性地为关键的短路径增加延迟。本练习展示了如何应用系统化的定量方法，使用 Elmore 延迟模型，来确保多路径场景下的时序收敛。",
            "id": "4291868",
            "problem": "一个由脉冲触发寄存器（脉冲锁存器）构建的同步流水线必须满足保持时间约束，即由一个寄存器发射的最早数据不会在发射锁存器和捕获锁存器同时透明时传播到下一个寄存器。最大脉冲重叠不确定性受限于量 $\\Delta T$，该值表示由于时钟抖动和脉冲对齐不确定性，两个锁存器可能同时透明的最坏情况持续时间。在此设计中，给定三个由一个共同的发射寄存器输出驱动的短数据路径，它们分别馈入三个独立的捕获寄存器。网络拓扑由一个共享主干段和其后的三个分支段组成，每个分支段的末端是其捕获寄存器的输入栅极电容。\n\n假设使用以下建模框架：\n- 每条路径 $i$ 需要满足的保持时间条件是，发射寄存器的时钟到Q端最小延迟 $t_{\\text{cq,min}}$ 与最小数据路径延迟 $t_{i,\\min}$ 之和大于或等于 $\\Delta T$，即 $t_{\\text{cq,min}} + t_{i,\\min} \\ge \\Delta T$。\n- 最小数据路径延迟 $t_{i,\\min}$ 通过沿发射寄存器输出的源电阻以及路径 $i$ 的下游导线和栅极负载的一阶 Elmore 延迟来建模。对每条路径 $i$，使用\n$$\nt_{i,\\min} = R_{q}\\left(C_{t} + C_{b,i} + C_{L,i}\\right) + R_{t}\\left(C_{b,i} + C_{L,i}\\right) + R_{b,i} C_{L,i}.\n$$\n- 这三条路径共享一个导线电阻为 $R_{t}$、导线电容为 $C_{t}$ 的主干，每条路径都有一个导线电阻为 $R_{b,i}$、电容为 $C_{b,i}$ 的分支，并以一个捕获栅极输入电容 $C_{L,i}$ 终结。\n- 发射寄存器输出具有最小有效源电阻 $R_{q}$ 和最小的时钟到Q端延迟 $t_{\\text{cq,min}}$。\n\n允许您在靠近发射寄存器的共享主干上插入一串相同的、最小尺寸的反相器缓冲链，以同等地增加所有三条路径的最小延迟。每个缓冲器的归一化尺寸为 $s \\ge 1$（其中 $s=1$ 表示单位尺寸），其导通电阻为 $R_{u}/s$，输入栅极电容为 $C_{g} s$。级联缓冲器之间的小段局部互连线每级贡献一个固定的电容 $C_{w}$。将每个缓冲器级增加的延迟建模为驱动电阻与下一级的负载电容的乘积，\n$$\nt_{\\text{buf}}(s) = \\frac{R_{u}}{s}\\left(C_{g} s + C_{w}\\right) = R_{u} C_{g} + \\frac{R_{u} C_{w}}{s}.\n$$\n假设串联插入 $k$ 个这样的缓冲器会给每条路径的最小延迟增加 $k \\, t_{\\text{buf}}(s)$ 的延迟，并且缓冲器的放置位置使得除了有意插入的缓冲链外，上游原始网络的负载保持不变。忽略转换率依赖性以及超出给定模型的任何非线性效应。\n\n使用以下数值：\n- $\\Delta T = 80\\,\\text{ps}$，$t_{\\text{cq,min}} = 30\\,\\text{ps}$，$R_{q} = 500\\,\\Omega$。\n- 共享主干：$R_{t} = 25\\,\\Omega$，$C_{t} = 25\\,\\text{fF}$。\n- 分支：对于 $i=1,2,3$，$R_{b,i} = 5\\,\\Omega$，$C_{b,i} = 5\\,\\text{fF}$。\n- 捕获栅极输入电容：$C_{L,1} = 3\\,\\text{fF}$，$C_{L,2} = 4\\,\\text{fF}$，$C_{L,3} = 2\\,\\text{fF}$。\n- 缓冲器参数：$R_{u} = 5\\,\\text{k}\\Omega$，$C_{g} = 2\\,\\text{fF}$，$C_{w} = 0.5\\,\\text{fF}$。\n\n确定所需的最小整数缓冲器数量 $k$ 和所选的缓冲器归一化尺寸 $s$，以使所有三条路径都满足保持时间条件。在所有可行的 $(k,s)$ 对（其中 $s \\ge 1$）中，选择具有最小 $k$ 的那一对；如果多个 $s$ 能得到相同的最小 $k$，则选择最小的 $s$。\n\n将最终答案表示为一个包含 $k$ 和 $s$ 的行矩阵，不带单位。无需四舍五入。",
            "solution": "问题要求我们找到需要插入信号路径中以修复保持时间违例的最小整数缓冲器数量 $k$ 和相应的尺寸 $s$。优化目标是首先最小化 $k$，然后对于该最小 $k$ 值，找到最小的可能尺寸 $s \\ge 1$。\n\n首先，我们使用给定的 Elmore 延迟模型计算 3 条路径中每条路径的初始最小路径延迟 $t_{i,\\min}$。为确保单位一致，即电阻（千欧姆, $\\text{k}\\Omega$）与电容（飞法拉, $\\text{fF}$）的乘积得到时间（皮秒, $\\text{ps}$），我们转换给定的电阻值。\n- $R_{q} = 500\\,\\Omega = 0.5\\,\\text{k}\\Omega$\n- $R_{t} = 25\\,\\Omega = 0.025\\,\\text{k}\\Omega$\n- $R_{b,i} = 5\\,\\Omega = 0.005\\,\\text{k}\\Omega$\n\n每条路径 $i$ 的延迟为：\n$t_{i,\\min} = R_{q}(C_{t} + C_{b,i} + C_{L,i}) + R_{t}(C_{b,i} + C_{L,i}) + R_{b,i} C_{L,i}$\n\n对于路径 1 ($i=1$): $C_{L,1} = 3\\,\\text{fF}$，$C_{b,1} = 5\\,\\text{fF}$。\n$t_{1,\\min} = 0.5 \\,(25 + 5 + 3) + 0.025 \\,(5 + 3) + 0.005 \\,(3)$\n$t_{1,\\min} = 0.5 \\,(33) + 0.025 \\,(8) + 0.015 = 16.5 + 0.2 + 0.015 = 16.715 \\, \\text{ps}$\n\n对于路径 2 ($i=2$): $C_{L,2} = 4\\,\\text{fF}$，$C_{b,2} = 5\\,\\text{fF}$。\n$t_{2,\\min} = 0.5 \\,(25 + 5 + 4) + 0.025 \\,(5 + 4) + 0.005 \\,(4)$\n$t_{2,\\min} = 0.5 \\,(34) + 0.025 \\,(9) + 0.020 = 17.0 + 0.225 + 0.020 = 17.245 \\, \\text{ps}$\n\n对于路径 3 ($i=3$): $C_{L,3} = 2\\,\\text{fF}$，$C_{b,3} = 5\\,\\text{fF}$。\n$t_{3,\\min} = 0.5 \\,(25 + 5 + 2) + 0.025 \\,(5 + 2) + 0.005 \\,(2)$\n$t_{3,\\min} = 0.5 \\,(32) + 0.025 \\,(7) + 0.010 = 16.0 + 0.175 + 0.010 = 16.185 \\, \\text{ps}$\n\n每条路径的总初始延迟为 $t_{\\text{path},i} = t_{\\text{cq,min}} + t_{i,\\min}$，其中 $t_{\\text{cq,min}} = 30\\,\\text{ps}$。\n$t_{\\text{path},1} = 30 + 16.715 = 46.715 \\, \\text{ps}$\n$t_{\\text{path},2} = 30 + 17.245 = 47.245 \\, \\text{ps}$\n$t_{\\text{path},3} = 30 + 16.185 = 46.185 \\, \\text{ps}$\n\n保持时间要求是总延迟必须大于或等于 $\\Delta T = 80\\,\\text{ps}$。最坏情况的路径是延迟最小的那条，因为它具有最大的违例量。\n$t_{\\text{path,min}} = \\min(46.715, 47.245, 46.185) = 46.185 \\, \\text{ps}$ (路径 3)。\n由于 $46.185\\,\\text{ps}  80\\,\\text{ps}$，存在保持时间违例。必须由缓冲器增加的最小延迟量 $t_{\\text{fix}}$ 是：\n$t_{\\text{fix}} = \\Delta T - t_{\\text{path,min}} = 80 - 46.185 = 33.815 \\, \\text{ps}$\n\n由 $k$ 个尺寸为 $s$ 的缓冲器增加的延迟是 $k \\cdot t_{\\text{buf}}(s)$，其中：\n$t_{\\text{buf}}(s) = R_u C_g + \\frac{R_u C_w}{s}$。\n使用给定的缓冲器参数 ($R_u = 5\\,\\text{k}\\Omega$，$C_g = 2\\,\\text{fF}$，$C_w = 0.5\\,\\text{fF}$):\n$t_{\\text{buf}}(s) = (5\\,\\text{k}\\Omega)(2\\,\\text{fF}) + \\frac{(5\\,\\text{k}\\Omega)(0.5\\,\\text{fF})}{s} = 10 \\, \\text{ps} + \\frac{2.5 \\, \\text{ps}}{s}$\n\n为了满足保持时间约束，我们需要 $k \\cdot t_{\\text{buf}}(s) \\ge t_{\\text{fix}}$。\n$k \\left( 10 + \\frac{2.5}{s} \\right) \\ge 33.815$\n\n为了找到最小整数 $k$，我们必须找到单个缓冲器能提供的最大可能延迟。函数 $t_{\\text{buf}}(s)$ 是 $s$ 的递减函数。由于允许的最小尺寸是 $s=1$，每个缓冲器的最大延迟在 $s=1$ 时取得：\n$t_{\\text{buf,max}} = t_{\\text{buf}}(1) = 10 + \\frac{2.5}{1} = 12.5 \\, \\text{ps}$\n\n最小缓冲器数量 $k$ 必须满足 $k \\cdot t_{\\text{buf,max}} \\ge t_{\\text{fix}}$。\n$k \\ge \\frac{t_{\\text{fix}}}{t_{\\text{buf,max}}} = \\frac{33.815}{12.5} = 2.7052$\n因为 $k$ 必须是整数，所以 $k$ 的最小可能值是 $k = \\lceil 2.7052 \\rceil = 3$。\n\n现在我们得到了 $k$ 的最小整数值 3，我们必须为这个 $k$ 找到满足保持时间约束的最小尺寸 $s \\ge 1$。\n$3 \\left( 10 + \\frac{2.5}{s} \\right) \\ge 33.815$\n$30 + \\frac{7.5}{s} \\ge 33.815$\n$\\frac{7.5}{s} \\ge 33.815 - 30$\n$\\frac{7.5}{s} \\ge 3.815$\n整理不等式以求解 $s$：\n$s \\le \\frac{7.5}{3.815} \\approx 1.9659$\n\n当 $k=3$ 时，$s$ 的可行值集合是区间 $[1, \\frac{7.5}{3.815}]$。问题要求我们从这个可行集合中选择最小的 $s$。该区间中的最小值是 $s=1$。\n\n因此，对 $(k, s)$ 进行字典序最小化的解是 $k=3$ 和 $s=1$。\n我们来验证这个解。当 $k=3$ 且 $s=1$ 时，增加的延迟是 $3 \\cdot t_{\\text{buf}}(1) = 3 \\cdot 12.5\\,\\text{ps} = 37.5\\,\\text{ps}$。\n新的最小路径延迟将是 $t_{\\text{path,min}} + t_{\\text{added}} = 46.185 + 37.5 = 83.685\\,\\text{ps}$。\n由于 $83.685\\,\\text{ps} \\ge 80\\,\\text{ps}$，保持时间条件得到满足。\n\n最终所需的值是整数缓冲器数量 $k$ 和缓冲器尺寸 $s$。\n$k = 3$\n$s = 1$",
            "answer": "$$\\boxed{\\begin{pmatrix} 3  1 \\end{pmatrix}}$$"
        },
        {
            "introduction": "脉冲触发寄存器的一个关键优势是其在低功耗应用中的高效率，但这需要深入理解其在低电源电压下的行为。本练习探讨了在近阈值电压区域，寄存器时序对电压变化的敏感度，在该区域器件特性会发生显著变化。通过应用基于物理的电流模型，您将推导并分析像 $t_{cq}$ 和建立时间这样的时序参数如何受到影响，为稳健的低功耗设计提供关键见解。",
            "id": "4291895",
            "problem": "脉冲触发的寄存器使用由窄时钟脉冲控制的单个锁存器，而边沿触发的触发器则实现为主从锁存器对。在近阈值操作中，从时钟到输出的传播延迟（表示为 $t_{cq}$）和数据建立时间（表示为 $t_{\\mathrm{setup}}$）受电源电压 $V_{DD}$ 的强烈影响。在本问题中，您将基于第一性原理和一个经过充分测试的紧凑电流模型，推导这些时间对 $V_{DD}$ 的灵敏度，然后评估并比较脉冲锁存器和边沿触发触发器的灵敏度。\n\n假设以下基本基础：\n- 在互补金属氧化物半导体（CMOS）逻辑中，级延迟与导通电流成反比，因此对于固定的有效电容 $C_{\\mathrm{eff}}$，$t \\propto \\frac{C_{\\mathrm{eff}} V_{DD}}{I_{\\mathrm{on}}}$。\n- 在近阈值区域，对路径中关键导通器件的导通电流采用 alpha-power 法则，$I_{\\mathrm{on}} = k \\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right)^{\\alpha}$，其中 $k$ 和 $\\alpha$ 是正的技术常数，而 $V_{\\mathrm{TH,eff}}$ 是一个有效阈值，它包含了寄存器关键路径中的体效应和串联堆叠导通。\n- 为了捕捉拓扑相关的串联堆叠，将有效阈值建模为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH}} + \\Delta$，其中增量 $\\Delta$ 取决于路径（时钟到输出或建立）和寄存器拓扑（脉冲锁存器或主从触发器）。\n\n设以下参数为给定且固定的：\n- 电源电压 $V_{DD} = 0.35 \\,\\mathrm{V}$。\n- 基础阈值 $V_{\\mathrm{TH}} = 0.25 \\,\\mathrm{V}$。\n- Alpha-power 指数 $\\alpha = 1.3$。\n- 四种情况下的有效阈值增量：\n  1. 脉冲锁存器时钟到输出：$\\Delta_{\\mathrm{pl},cq} = 0.04 \\,\\mathrm{V}$。\n  2. 边沿触发触发器时钟到输出：$\\Delta_{\\mathrm{ff},cq} = 0.08 \\,\\mathrm{V}$。\n  3. 脉冲锁存器建立路径：$\\Delta_{\\mathrm{pl},setup} = 0.03 \\,\\mathrm{V}$。\n  4. 边沿触发触发器建立路径：$\\Delta_{\\mathrm{ff},setup} = 0.07 \\,\\mathrm{V}$。\n\n将时间量 $x \\in \\{t_{cq}, t_{\\mathrm{setup}}\\}$ 对 $V_{DD}$ 的对数灵敏度定义为 $S_{x}(V_{DD}) = \\frac{\\mathrm{d} \\ln x}{\\mathrm{d} \\ln V_{DD}}$。仅使用上述基本基础，推导 $S_{x}(V_{DD})$ 的解析表达式，并针对列出的四种情况在 $V_{DD} = 0.35 \\,\\mathrm{V}$ 时进行求值。将四个灵敏度 $\\left(S_{t_{cq}}^{\\mathrm{pl}}, S_{t_{cq}}^{\\mathrm{ff}}, S_{t_{\\mathrm{setup}}}^{\\mathrm{pl}}, S_{t_{\\mathrm{setup}}}^{\\mathrm{ff}}\\right)$ 以单行矩阵的形式报告。将每个灵敏度四舍五入到 $3$ 位有效数字。将最终灵敏度表示为无量纲量（无单位）。",
            "solution": "该问题经验证具有科学依据、提法明确、客观且完整。所有必要的模型和参数都已提供，可用于推导对数灵敏度的解析表达式，并针对四种指定情况进行求值。诸如用于近阈值 MOSFET 电流的 alpha-power 法则和线性延迟模型等，都是 VLSI 设计中标准的一阶近似。所提供的数值对于近阈值操作是物理上现实的。因此，将提供一个解决方案。\n\n目标是推导时间量 $x$ 对电源电压 $V_{DD}$ 的对数灵敏度（表示为 $S_{x}(V_{DD})$）的表达式，然后针对寄存器设计中的四种特定场景评估该灵敏度。灵敏度定义为：\n$$\nS_{x}(V_{DD}) = \\frac{\\mathrm{d} \\ln x}{\\mathrm{d} \\ln V_{DD}}\n$$\n\n首先，我们为时间量 $x$ 建立一个模型，它代表时钟到输出延迟 $t_{cq}$ 或建立时间 $t_{\\mathrm{setup}}$。根据问题陈述，延迟 $x$ 与有效电容 $C_{\\mathrm{eff}}$ 和电源电压 $V_{DD}$ 成正比，与关键路径晶体管的导通电流 $I_{\\mathrm{on}}$ 成反比。\n$$\nx \\propto \\frac{C_{\\mathrm{eff}} V_{DD}}{I_{\\mathrm{on}}}\n$$\n我们可以用一个比例常数 $\\kappa_1$ 来表示。由于假定 $C_{\\mathrm{eff}}$ 是固定的，我们可以将其吸收到常数中。\n$$\nx = \\kappa_2 \\frac{V_{DD}}{I_{\\mathrm{on}}}\n$$\n导通电流 $I_{\\mathrm{on}}$ 由 alpha-power 法则建模：\n$$\nI_{\\mathrm{on}} = k \\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right)^{\\alpha}\n$$\n其中 $k$ 和 $\\alpha$ 是技术常数，而 $V_{\\mathrm{TH,eff}}$ 是有效阈值电压。将此代入 $x$ 的表达式中得到：\n$$\nx = \\kappa_2 \\frac{V_{DD}}{k \\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right)^{\\alpha}}\n$$\n将所有常数合并为一个单一常数 $K = \\frac{\\kappa_2}{k}$，我们得到时间量 $x$ 作为 $V_{DD}$ 函数的最终表达式：\n$$\nx(V_{DD}) = K \\frac{V_{DD}}{\\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right)^{\\alpha}}\n$$\n为了求对数灵敏度，我们首先对 $x(V_{DD})$ 取自然对数：\n$$\n\\ln x = \\ln \\left( K \\frac{V_{DD}}{\\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right)^{\\alpha}} \\right)\n$$\n利用对数的性质，此表达式展开为：\n$$\n\\ln x = \\ln K + \\ln V_{DD} - \\alpha \\ln\\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right)\n$$\n对数灵敏度 $S_{x}(V_{DD})$ 可以使用恒等式 $S_{x}(V_{DD}) = \\frac{V_{DD}}{x} \\frac{\\mathrm{d}x}{\\mathrm{d}V_{DD}} = V_{DD} \\frac{\\mathrm{d}(\\ln x)}{\\mathrm{d}V_{DD}}$ 来计算。我们将 $\\ln x$ 对 $V_{DD}$ 求导，将 $V_{\\mathrm{TH,eff}}$ 视为与 $V_{DD}$ 无关的参数：\n$$\n\\frac{\\mathrm{d}(\\ln x)}{\\mathrm{d}V_{DD}} = \\frac{\\mathrm{d}}{\\mathrm{d}V_{DD}} \\left( \\ln K + \\ln V_{DD} - \\alpha \\ln\\left(V_{DD} - V_{\\mathrm{TH,eff}}\\right) \\right)\n$$\n$$\n\\frac{\\mathrm{d}(\\ln x)}{\\mathrm{d}V_{DD}} = 0 + \\frac{1}{V_{DD}} - \\frac{\\alpha}{V_{DD} - V_{\\mathrm{TH,eff}}}\n$$\n现在，我们乘以 $V_{DD}$ 得到灵敏度：\n$$\nS_{x}(V_{DD}) = V_{DD} \\left( \\frac{1}{V_{DD}} - \\frac{\\alpha}{V_{DD} - V_{\\mathrm{TH,eff}}} \\right)\n$$\n这简化为灵敏度的推导解析表达式：\n$$\nS_{x}(V_{DD}) = 1 - \\frac{\\alpha V_{DD}}{V_{DD} - V_{\\mathrm{TH,eff}}}\n$$\n有效阈值电压 $V_{\\mathrm{TH,eff}}$ 由 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH}} + \\Delta$ 给出，其中 $V_{\\mathrm{TH}}$ 是基础阈值，$\\Delta$ 是取决于电路路径和拓扑的增量。\n\n我们给定了以下参数值：\n- 电源电压：$V_{DD} = 0.35 \\,\\mathrm{V}$\n- 基础阈值：$V_{\\mathrm{TH}} = 0.25 \\,\\mathrm{V}$\n- Alpha-power 指数：$\\alpha = 1.3$\n\n我们现在为四种指定情况分别评估灵敏度。\n\n1.  **脉冲锁存器，时钟到输出 ($S_{t_{cq}}^{\\mathrm{pl}}$)：**\n    阈值增量为 $\\Delta_{\\mathrm{pl},cq} = 0.04 \\,\\mathrm{V}$。\n    有效阈值为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH}} + \\Delta_{\\mathrm{pl},cq} = 0.25 \\,\\mathrm{V} + 0.04 \\,\\mathrm{V} = 0.29 \\,\\mathrm{V}$。\n    灵敏度为：\n    $$\n    S_{t_{cq}}^{\\mathrm{pl}} = 1 - \\frac{1.3 \\times 0.35}{0.35 - 0.29} = 1 - \\frac{0.455}{0.06} = 1 - 7.5833... \\approx -6.5833...\n    $$\n    四舍五入到 $3$ 位有效数字，$S_{t_{cq}}^{\\mathrm{pl}} = -6.58$。\n\n2.  **边沿触发触发器，时钟到输出 ($S_{t_{cq}}^{\\mathrm{ff}}$)：**\n    阈值增量为 $\\Delta_{\\mathrm{ff},cq} = 0.08 \\,\\mathrm{V}$。\n    有效阈值为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH}} + \\Delta_{\\mathrm{ff},cq} = 0.25 \\,\\mathrm{V} + 0.08 \\,\\mathrm{V} = 0.33 \\,\\mathrm{V}$。\n    灵敏度为：\n    $$\n    S_{t_{cq}}^{\\mathrm{ff}} = 1 - \\frac{1.3 \\times 0.35}{0.35 - 0.33} = 1 - \\frac{0.455}{0.02} = 1 - 22.75 = -21.75\n    $$\n    四舍五入到 $3$ 位有效数字，$S_{t_{cq}}^{\\mathrm{ff}} = -21.8$。\n\n3.  **脉冲锁存器，建立路径 ($S_{t_{\\mathrm{setup}}}^{\\mathrm{pl}}$)：**\n    阈值增量为 $\\Delta_{\\mathrm{pl},setup} = 0.03 \\,\\mathrm{V}$。\n    有效阈值为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH}} + \\Delta_{\\mathrm{pl},setup} = 0.25 \\,\\mathrm{V} + 0.03 \\,\\mathrm{V} = 0.28 \\,\\mathrm{V}$。\n    灵敏度为：\n    $$\n    S_{t_{\\mathrm{setup}}}^{\\mathrm{pl}} = 1 - \\frac{1.3 \\times 0.35}{0.35 - 0.28} = 1 - \\frac{0.455}{0.07} = 1 - 6.5 = -5.5\n    $$\n    四舍五入到 $3$ 位有效数字，$S_{t_{\\mathrm{setup}}}^{\\mathrm{pl}} = -5.50$。\n\n4.  **边沿触发触发器，建立路径 ($S_{t_{\\mathrm{setup}}}^{\\mathrm{ff}}$)：**\n    阈值增量为 $\\Delta_{\\mathrm{ff},setup} = 0.07 \\,\\mathrm{V}$。\n    有效阈值为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH}} + \\Delta_{\\mathrm{ff},setup} = 0.25 \\,\\mathrm{V} + 0.07 \\,\\mathrm{V} = 0.32 \\,\\mathrm{V}$。\n    灵敏度为：\n    $$\n    S_{t_{\\mathrm{setup}}}^{\\mathrm{ff}} = 1 - \\frac{1.3 \\times 0.35}{0.35 - 0.32} = 1 - \\frac{0.455}{0.03} = 1 - 15.1666... \\approx -14.1666...\n    $$\n    四舍五入到 $3$ 位有效数字，$S_{t_{\\mathrm{setup}}}^{\\mathrm{ff}} = -14.2$。\n\n负值表示随着电源电压 $V_{DD}$ 的增加，时间延迟会减小。灵敏度的量级反映了延迟随 $V_{DD}$ 变化的强烈程度。大的量级是近阈值操作的特征，其中过驱动电压 $(V_{DD} - V_{\\mathrm{TH,eff}})$ 很小，使得电流以及因此的延迟对 $V_{DD}$ 的微小变化高度敏感。触发器路径中较大的串联堆叠（较大的 $\\Delta$）减小了过驱动电压，导致与脉冲锁存器路径相比，对 $V_{DD}$ 的灵敏度显著更高。\n\n按要求将四个计算出的灵敏度组合成一个单行矩阵。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n-6.58  -21.8  -5.50  -14.2\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
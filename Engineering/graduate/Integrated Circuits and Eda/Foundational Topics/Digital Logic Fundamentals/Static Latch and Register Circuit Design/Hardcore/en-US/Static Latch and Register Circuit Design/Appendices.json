{
    "hands_on_practices": [
        {
            "introduction": "The most fundamental timing parameter for any storage element is its setup time. This parameter is not an abstract number; it is directly rooted in the physical process of charging or discharging the internal storage node. This exercise will guide you through a first-principles derivation to connect the setup time of a simple latch to its underlying physical components—its resistance ($R_{on}$) and capacitance ($C$)—revealing the fundamental trade-offs in latch design .",
            "id": "4301282",
            "problem": "Consider a static Complementary Metal-Oxide-Semiconductor (CMOS) transmission-gate latch used in Electronic Design Automation (EDA) flows for register design. During the transparent phase, a data input drives the internal storage node through a transmission gate with constant on-resistance $R_{on}$. The storage node is modeled as a single lumped capacitance $C$ to ground and is the input to a downstream inverter. Assume the data undergoes a rising transition modeled as an ideal step from $0$ to a high logic level $V_{H}$ at time $t=0$, and the inverter switches when the storage node voltage first reaches its input threshold $V_{T}$, with $0  V_{T}  V_{H}$. The latch is otherwise ideal: ignore leakage, regeneration, body-effect, and any voltage dependence of $R_{on}$ or $C$.\n\nUsing only the fundamental relations for a resistor and a capacitor and conservation of charge at the storage node, derive from first principles an analytic expression for the minimum data setup time $t_{setup}$ required before the non-transparent edge, defined here as the time from $t=0$ until the storage node crosses the inverter threshold $V_{T}$. Your derivation must start from the relations $i_{R} = \\frac{v_{s}-v(t)}{R_{on}}$, $i_{C} = C \\frac{dv(t)}{dt}$, and Kirchhoff’s Current Law at the storage node, where $v_{s}$ is the driving source voltage equal to $V_{H}$ for $t \\geq 0$, and $v(t)$ is the storage-node voltage. Assume the initial condition $v(0)=0$.\n\nExpress your final answer for $t_{setup}$ as a closed-form analytic expression in terms of $R_{on}$, $C$, $V_{T}$, and $V_{H}$. If you later evaluate this expression numerically, express time in seconds. No approximation or rounding is required for the analytic expression.",
            "solution": "The problem statement has been validated and is deemed valid. It is scientifically grounded, well-posed, objective, and contains all necessary information to derive a unique, meaningful solution. The problem describes a classic first-order RC circuit, a fundamental model in integrated circuit analysis.\n\nThe task is to derive an expression for the setup time, $t_{setup}$, of a static CMOS latch. This time is defined as the duration required for the voltage on a storage capacitor, $v(t)$, to rise from an initial value of $v(0)=0$ to a threshold voltage $V_{T}$ when driven by a step input from $0$ to $V_{H}$ through a resistor $R_{on}$. The derivation will begin from the first principles provided.\n\nThe circuit can be modeled as a series RC circuit where the input voltage source $v_s$ is connected to a resistor $R_{on}$, which is in turn connected to a capacitor $C$. The output voltage, $v(t)$, is the voltage across the capacitor.\n\nThe problem provides the following fundamental relations:\n1.  The current through the resistor, $i_{R}$, is given by Ohm's law: $i_{R} = \\frac{v_{s}-v(t)}{R_{on}}$. For $t \\geq 0$, the source voltage is constant at $v_{s} = V_{H}$, so the expression becomes $i_{R} = \\frac{V_{H}-v(t)}{R_{on}}$.\n2.  The current through the capacitor, $i_{C}$, is given by the fundamental capacitor I-V relationship: $i_{C} = C \\frac{dv(t)}{dt}$.\n\nWe apply Kirchhoff’s Current Law (KCL) at the storage node, which is the node between the resistor and the capacitor. According to KCL, the sum of currents entering the node must equal the sum of currents leaving the node. In this simple circuit, the current flowing from the resistor must be equal to the current flowing into the capacitor.\n$$i_{R} = i_{C}$$\nSubstituting the given expressions for $i_{R}$ and $i_{C}$:\n$$\\frac{V_{H}-v(t)}{R_{on}} = C \\frac{dv(t)}{dt}$$\nThis is a first-order linear ordinary differential equation (ODE) that describes the behavior of the storage node voltage $v(t)$ over time. To solve for $v(t)$, we rearrange the equation into a standard form:\n$$\\frac{dv(t)}{dt} + \\frac{1}{R_{on}C} v(t) = \\frac{V_{H}}{R_{on}C}$$\nThe general solution to an ODE of the form $\\frac{dy}{dt} + P(t)y = Q(t)$ can be found by summing the homogeneous and particular solutions. The homogeneous equation is:\n$$\\frac{dv_{h}(t)}{dt} + \\frac{1}{R_{on}C} v_{h}(t) = 0$$\nThe solution to this homogeneous equation is of the form $v_{h}(t) = A \\exp(-t/\\tau)$, where $\\tau = R_{on}C$ is the time constant of the circuit and $A$ is a constant of integration.\n$$v_{h}(t) = A \\exp\\left(-\\frac{t}{R_{on}C}\\right)$$\nThe particular solution, or steady-state solution, corresponds to the state of the circuit as $t \\to \\infty$. In this limit, the capacitor is fully charged, and the current ceases to flow, so $\\frac{dv(t)}{dt} = 0$. Substituting this into the ODE gives:\n$$0 + \\frac{1}{R_{on}C} v_{ss}(t) = \\frac{V_{H}}{R_{on}C}$$\nwhere $v_{ss}(t)$ is the steady-state voltage. This simplifies to:\n$$v_{ss}(t) = V_{H}$$\nThe complete solution for $v(t)$ is the sum of the homogeneous and particular solutions:\n$$v(t) = v_{h}(t) + v_{ss}(t) = A \\exp\\left(-\\frac{t}{R_{on}C}\\right) + V_{H}$$\nWe determine the constant $A$ using the initial condition provided in the problem statement, which is $v(0)=0$.\n$$v(0) = A \\exp(0) + V_{H} = A + V_{H} = 0$$\nSolving for $A$, we find $A = -V_{H}$.\n\nSubstituting this value of $A$ back into the general solution gives the specific solution for the storage node voltage for $t \\geq 0$:\n$$v(t) = V_{H} - V_{H} \\exp\\left(-\\frac{t}{R_{on}C}\\right)$$\nThis can be factored as:\n$$v(t) = V_{H} \\left(1 - \\exp\\left(-\\frac{t}{R_{on}C}\\right)\\right)$$\nThis equation describes the voltage across the charging capacitor as a function of time.\n\nThe problem defines the setup time, $t_{setup}$, as the time required for the storage node voltage $v(t)$ to reach the inverter's threshold voltage, $V_{T}$. We find this time by setting $v(t) = V_{T}$ and solving for $t = t_{setup}$.\n$$V_{T} = V_{H} \\left(1 - \\exp\\left(-\\frac{t_{setup}}{R_{on}C}\\right)\\right)$$\nTo isolate $t_{setup}$, we first divide by $V_{H}$:\n$$\\frac{V_{T}}{V_{H}} = 1 - \\exp\\left(-\\frac{t_{setup}}{R_{on}C}\\right)$$\nNext, we rearrange the terms to isolate the exponential function:\n$$\\exp\\left(-\\frac{t_{setup}}{R_{on}C}\\right) = 1 - \\frac{V_{T}}{V_{H}}$$\nTo solve for the exponent, we take the natural logarithm ($\\ln$) of both sides:\n$$-\\frac{t_{setup}}{R_{on}C} = \\ln\\left(1 - \\frac{V_{T}}{V_{H}}\\right)$$\nFinally, we solve for $t_{setup}$ by multiplying by $-R_{on}C$:\n$$t_{setup} = -R_{on}C \\ln\\left(1 - \\frac{V_{T}}{V_{H}}\\right)$$\nThe condition $0  V_{T}  V_{H}$ ensures that the argument of the logarithm, $1 - \\frac{V_{T}}{V_{H}}$, is between $0$ and $1$. The natural logarithm of a number in this range is negative, which cancels the leading negative sign, yielding a positive value for $t_{setup}$ as expected.\n\nAn alternative and equivalent form can be derived using the logarithm property $-\\ln(x) = \\ln(1/x)$:\n$$t_{setup} = R_{on}C \\ln\\left(\\frac{1}{1 - \\frac{V_{T}}{V_{H}}}\\right)$$\nSimplifying the fraction inside the logarithm gives the final closed-form analytic expression:\n$$t_{setup} = R_{on}C \\ln\\left(\\frac{V_{H}}{V_{H} - V_{T}}\\right)$$\nThis is the minimum setup time required for the data to be reliably captured by the latch.",
            "answer": "$$\\boxed{R_{on}C \\ln\\left(\\frac{V_{H}}{V_{H} - V_{T}}\\right)}$$"
        },
        {
            "introduction": "While individual latches are the basic building blocks, practical digital systems rely on edge-triggered registers, typically built from a master-slave latch pair. The overall timing characteristics of the register—its setup time, hold time, and clock-to-Q delay—emerge from the interplay between the individual latch parameters and the clocking scheme. This practice challenges you to derive these composite register-level timing parameters from the specifications of the constituent latches, a crucial skill for static timing analysis (STA) and system-level design .",
            "id": "4301260",
            "problem": "Consider a positive-edge-triggered register implemented as a master–slave pair of level-sensitive latches, within the domain of Electronic Design Automation (EDA) for integrated circuits. The master latch is transparent when the clock input $CLK$ is low, and the slave latch is transparent when $CLK$ is high. To prevent transparency overlap and combinational feedthrough, the clocking scheme introduces non-overlap windows around the rising edge. Let the rising edge of $CLK$ at the register be the reference time $t=0$. The master latch becomes opaque at time $t=-t_{\\text{gap}}^{-}$ (a pre-rising non-overlap margin), and the slave latch becomes transparent at time $t=+t_{\\text{gap}}^{+}$ (a post-rising non-overlap margin). Assume ideal single-source clocking and ignore clock distribution skew within the register.\n\nEach latch $L$ is characterized by the following timing definitions, referenced to the instant when $L$ transitions from transparent to opaque: the setup time $t_{\\text{setup},L}$ is the minimum interval before the closing event during which the data input must be stable, and the hold time $t_{\\text{hold},L}$ is the minimum interval after the closing event during which the data input must remain stable to guarantee correct capture. When a latch is transparent, a stable input at its data port propagates to its output in a data-to-output propagation time $t_{\\text{pd},L}$.\n\nYou are given the following parameters:\n- Master latch setup time $t_{\\text{setup},M} = 24\\,\\text{ps}$ and hold time $t_{\\text{hold},M} = 16\\,\\text{ps}$.\n- Slave latch setup time $t_{\\text{setup},S} = 20\\,\\text{ps}$ and hold time $t_{\\text{hold},S} = 15\\,\\text{ps}$.\n- Slave latch data-to-output propagation delay while transparent $t_{\\text{pd},S} = 70\\,\\text{ps}$.\n- Pre-rising non-overlap margin $t_{\\text{gap}}^{-} = 35\\,\\text{ps}$ and post-rising non-overlap margin $t_{\\text{gap}}^{+} = 45\\,\\text{ps}$.\n\nStarting explicitly from the above latch timing definitions and the described non-overlap clocking, and without invoking any pre-memorized composite register formulas, derive expressions for the effective register-level setup time $t_{\\text{setup,reg}}$ and hold time $t_{\\text{hold,reg}}$ relative to the rising edge at $t=0$, and the effective register clock-to-output delay $t_{\\text{CQ,reg}}$ relative to the same rising edge. Then evaluate these expressions using the provided numerical values.\n\nExpress your final numerical results in picoseconds. Round your answer to three significant figures. Provide your final answer as a row matrix containing $\\left(t_{\\text{setup,reg}},\\,t_{\\text{hold,reg}},\\,t_{\\text{CQ,reg}}\\right)$.",
            "solution": "The problem is valid as it is scientifically grounded in the principles of digital integrated circuit timing, well-posed with sufficient information for a unique solution, and objectively stated. We will derive the register-level timing parameters from the fundamental definitions provided for the constituent latches and the specified clocking scheme.\n\nThe register is a positive-edge-triggered master-slave flip-flop. The active clock edge is the rising edge of the external clock $CLK$, which occurs at the reference time $t=0$. The master latch is transparent for $CLK$ low and the slave latch for $CLK$ high. A non-overlapping clocking scheme is used:\n1.  The master latch closes (becomes opaque) at time $t_M = -t_{\\text{gap}}^{-}$, before the $CLK$ rising edge. This is the closing event for the master latch.\n2.  The slave latch opens (becomes transparent) at time $t_S = +t_{\\text{gap}}^{+}$, after the $CLK$ rising edge.\n\nAll latch-level timing parameters ($t_{\\text{setup},L}$, $t_{\\text{hold},L}$) are defined relative to the latch's closing event.\n\n**1. Derivation of Register Setup Time ($t_{\\text{setup,reg}}$)**\n\nThe register setup time, $t_{\\text{setup,reg}}$, is the minimum interval before the active clock edge ($t=0$) during which the register's data input $D$ must be stable. This requirement is determined by the master latch's need to capture the data reliably.\n\nThe master latch's closing event occurs at $t = -t_{\\text{gap}}^{-}$. According to its definition, the master latch's setup time, $t_{\\text{setup},M}$, requires that its input (the register's input $D$) must be stable for a duration of at least $t_{\\text{setup},M}$ *before* this closing event.\n\nTherefore, the data $D$ must be stable at or before the time $t_{\\text{stable}}$:\n$$t_{\\text{stable}} = (\\text{master closing time}) - t_{\\text{setup},M} = -t_{\\text{gap}}^{-} - t_{\\text{setup},M}$$\nThe register setup time $t_{\\text{setup,reg}}$ is the duration of this stability requirement measured from $t_{\\text{stable}}$ up to the reference clock edge at $t=0$.\n$$t_{\\text{setup,reg}} = 0 - t_{\\text{stable}} = 0 - (-t_{\\text{gap}}^{-} - t_{\\text{setup},M})$$\n$$t_{\\text{setup,reg}} = t_{\\text{gap}}^{-} + t_{\\text{setup},M}$$\n\n**2. Derivation of Register Hold Time ($t_{\\text{hold,reg}}$)**\n\nThe register hold time, $t_{\\text{hold,reg}}$, is the minimum interval *after* the active clock edge ($t=0$) during which the register's data input $D$ must remain stable. This constraint ensures that a data change after the clock edge does not corrupt the value being latched by the master latch.\n\nThe master latch's hold time, $t_{\\text{hold},M}$, requires that its input $D$ remain stable for a duration of at least $t_{\\text{hold},M}$ *after* its closing event at $t=-t_{\\text{gap}}^{-}$.\n\nTherefore, the data $D$ must remain stable until at least the time $t_{\\text{hold\\_until}}$:\n$$t_{\\text{hold\\_until}} = (\\text{master closing time}) + t_{\\text{hold},M} = -t_{\\text{gap}}^{-} + t_{\\text{hold},M}$$\nThe register hold time $t_{\\text{hold,reg}}$ is this time point relative to the reference clock edge at $t=0$. A positive value means the data must be held after the clock edge, while a negative value means the data can be changed before the clock edge.\n$$t_{\\text{hold,reg}} = t_{\\text{hold\\_until}} - 0 = -t_{\\text{gap}}^{-} + t_{\\text{hold},M}$$\n$$t_{\\text{hold,reg}} = t_{\\text{hold},M} - t_{\\text{gap}}^{-}$$\n\n**3. Derivation of Register Clock-to-Output Delay ($t_{\\text{CQ,reg}}$)**\n\nThe register clock-to-output delay, $t_{\\text{CQ,reg}}$, is the time from the active clock edge ($t=0$) until the new data appears at the register's output $Q$. The output $Q$ is the output of the slave latch.\n\nThe slave latch becomes transparent at time $t = +t_{\\text{gap}}^{+}$. At this moment, the stable output of the master latch is presented to the input of the slave latch. The data then propagates through the transparent slave latch. The time taken for this propagation is the slave latch's data-to-output propagation delay, $t_{\\text{pd},S}$.\n\nThe register output $Q$ becomes valid at a time equal to the sum of the slave latch's opening time and its propagation delay:\n$$t_{Q\\_\\text{valid}} = (\\text{slave opening time}) + t_{\\text{pd},S} = +t_{\\text{gap}}^{+} + t_{\\text{pd},S}$$\nThe register's clock-to-output delay is this time interval measured from the reference clock edge at $t=0$.\n$$t_{\\text{CQ,reg}} = t_{Q\\_\\text{valid}} - 0 = t_{\\text{gap}}^{+} + t_{\\text{pd},S}$$\n\n**Numerical Evaluation**\n\nWe are given the following parameter values:\n- $t_{\\text{setup},M} = 24\\,\\text{ps}$\n- $t_{\\text{hold},M} = 16\\,\\text{ps}$\n- $t_{\\text{pd},S} = 70\\,\\text{ps}$\n- $t_{\\text{gap}}^{-} = 35\\,\\text{ps}$\n- $t_{\\text{gap}}^{+} = 45\\,\\text{ps}$\n\nSubstituting these values into the derived expressions:\n\nFor the setup time:\n$$t_{\\text{setup,reg}} = 35\\,\\text{ps} + 24\\,\\text{ps} = 59\\,\\text{ps}$$\n\nFor the hold time:\n$$t_{\\text{hold,reg}} = 16\\,\\text{ps} - 35\\,\\text{ps} = -19\\,\\text{ps}$$\nA negative hold time is a valid result, indicating that the input data can change $19\\,\\text{ps}$ before the clock edge without affecting the captured value.\n\nFor the clock-to-output delay:\n$$t_{\\text{CQ,reg}} = 45\\,\\text{ps} + 70\\,\\text{ps} = 115\\,\\text{ps}$$\n\nThe problem requires rounding the final numerical results to three significant figures.\n- $t_{\\text{setup,reg}} = 59\\,\\text{ps} \\rightarrow 59.0\\,\\text{ps}$\n- $t_{\\text{hold,reg}} = -19\\,\\text{ps} \\rightarrow -19.0\\,\\text{ps}$\n- $t_{\\text{CQ,reg}} = 115\\,\\text{ps}$ (already has three significant figures)\n\nThe final answer is the triplet ($t_{\\text{setup,reg}},\\,t_{\\text{hold,reg}},\\,t_{\\text{CQ,reg}}$).",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n59.0  -19.0  115\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Understanding circuit timing is only half the battle; designing circuits to meet performance targets is the ultimate goal. The method of Logical Effort provides a powerful framework for optimizing path delays in CMOS circuits by appropriately sizing transistors. This practice challenges you to apply this methodology to a register datapath, finding the optimal size for each stage to minimize the overall clock-to-Q delay and gaining experience in a standard technique for high-performance design .",
            "id": "4301265",
            "problem": "A level-sensitive static register stage implemented in Complementary Metal-Oxide-Semiconductor (CMOS) uses a transmission gate followed by two inverters: the first inverter forms the storage node of the latch and the second inverter drives the external load. The clock-to-$Q$ path is modeled as a three-stage path comprising stage $1$ (the transmission gate), stage $2$ (the first inverter), and stage $3$ (the output inverter). Assume the Logical Effort (LE) delay model applies, where the delay of stage $i$ is $d_i = g_i h_i + p_i$ measured in units of a reference inverter delay, with $g_i$ the logical effort, $h_i$ the electrical effort ratio $C_{\\text{out},i}/C_{\\text{in},i}$, and $p_i$ the parasitic delay. The input capacitance of a minimum-size reference inverter is $C_{\\mathrm{ref}}$.\n\nThe transmission gate has logical effort $g_{\\mathrm{TG}} = \\gamma$ and parasitic delay $p_{\\mathrm{TG}} = \\pi_{\\mathrm{TG}}$. Each inverter has logical effort $g_{\\mathrm{INV}} = 1$ and parasitic delay $p_{\\mathrm{INV}} = p$. The clock driver can tolerate at most $C_{\\mathrm{clk,max}} = 16\\,C_{\\mathrm{ref}}$ at its output, and the external load is $C_L = 1024\\,C_{\\mathrm{ref}}$. Neglect interconnect parasitics and any body effect or velocity saturation, and assume the transmission gate is sized to meet the clock input capacitance limit tightly, i.e., $C_{\\mathrm{in,1}} = C_{\\mathrm{clk,max}}$.\n\nStarting from the foundational definitions in the Logical Effort methodology and the parasitic delay model, derive the sizing (normalized to $C_{\\mathrm{ref}}$) of the three stages, $S_1$, $S_2$, and $S_3$, where $S_i \\triangleq C_{\\mathrm{in},i}/C_{\\mathrm{ref}}$, that minimizes the total clock-to-$Q$ delay under the given fanout and constraints. Express your final answer as a single closed-form analytic row matrix in terms of $\\gamma$, using the numerical values $C_{\\mathrm{clk,max}} = 16\\,C_{\\mathrm{ref}}$ and $C_L = 1024\\,C_{\\mathrm{ref}}$. No rounding is required, and no physical units are to be included in the final expression.",
            "solution": "The problem statement is evaluated to be **valid**. It is scientifically grounded in the established Logical Effort methodology for CMOS circuit design, is self-contained and consistent, and provides all necessary information to derive a unique solution. The language is precise and objective, allowing for a formal and rigorous analysis.\n\nThe problem requires the determination of the optimal sizing, $S_1$, $S_2$, and $S_3$, for a three-stage register path to minimize the total clock-to-$Q$ delay. The path consists of a transmission gate (stage $1$), followed by two inverters (stages $2$ and $3$). The sizing of stage $i$ is defined as $S_i = C_{\\mathrm{in},i}/C_{\\mathrm{ref}}$, where $C_{\\mathrm{in},i}$ is the input capacitance of the stage and $C_{\\mathrm{ref}}$ is the input capacitance of a minimum-size reference inverter.\n\nThe total delay $D$ along the path is the sum of the individual stage delays, which are given by the standard Logical Effort delay model:\n$$D = \\sum_{i=1}^{3} d_i = \\sum_{i=1}^{3} (g_i h_i + p_i)$$\nwhere $g_i$ is the logical effort, $h_i$ is the electrical effort, and $p_i$ is the parasitic delay of stage $i$. The total delay can be separated into an effort delay component, $D_E = \\sum g_i h_i$, and a parasitic delay component, $P = \\sum p_i$. Since the parasitic delays $p_i$ for a given type of gate are independent of the gate's size, the total parasitic delay $P$ is a constant with respect to the sizing of the stages. Therefore, minimizing the total delay $D$ is equivalent to minimizing the total effort delay $D_E$.\n\nThe parameters for each stage are as follows:\n- Stage $1$ (Transmission Gate): $g_1 = g_{\\mathrm{TG}} = \\gamma$.\n- Stage $2$ (Inverter): $g_2 = g_{\\mathrm{INV}} = 1$.\n- Stage $3$ (Inverter): $g_3 = g_{\\mathrm{INV}} = 1$.\n\nThe electrical effort of each stage is the ratio of its output capacitance to its input capacitance, $h_i = C_{\\mathrm{out},i}/C_{\\mathrm{in},i}$. The stages are connected in series, so $C_{\\mathrm{out},1} = C_{\\mathrm{in},2}$ and $C_{\\mathrm{out},2} = C_{\\mathrm{in},3}$. The final stage drives the external load $C_L$.\n- $h_1 = C_{\\mathrm{in},2}/C_{\\mathrm{in},1}$\n- $h_2 = C_{\\mathrm{in},3}/C_{\\mathrm{in},2}$\n- $h_3 = C_L/C_{\\mathrm{in},3}$\n\nThe total effort delay is:\n$$D_E = g_1 h_1 + g_2 h_2 + g_3 h_3 = \\gamma \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{in},1}} + (1) \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} + (1) \\frac{C_L}{C_{\\mathrm{in},3}}$$\n\nThe problem provides the following constraints:\n- The input capacitance of the first stage is fixed: $C_{\\mathrm{in},1} = C_{\\mathrm{clk,max}} = 16\\,C_{\\mathrm{ref}}$.\n- The external load capacitance is $C_L = 1024\\,C_{\\mathrm{ref}}$.\n\nFrom the first constraint, the sizing of the first stage, $S_1$, is immediately determined:\n$$S_1 = \\frac{C_{\\mathrm{in},1}}{C_{\\mathrm{ref}}} = \\frac{16\\,C_{\\mathrm{ref}}}{C_{\\mathrm{ref}}} = 16$$\n\nWith $C_{\\mathrm{in},1}$ and $C_L$ fixed, the optimization variables are the input capacitances of the intermediate stages, $C_{\\mathrm{in},2}$ and $C_{\\mathrm{in},3}$. To find the values that minimize $D_E$, we take the partial derivatives of $D_E$ with respect to $C_{\\mathrm{in},2}$ and $C_{\\mathrm{in},3}$ and set them to zero.\n$$\\frac{\\partial D_E}{\\partial C_{\\mathrm{in},2}} = \\frac{\\gamma}{C_{\\mathrm{in},1}} - \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}^2} = 0 \\implies \\gamma \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{in},1}} = \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} \\implies g_1 h_1 = h_2$$\nSince $g_2 = 1$, this is equivalent to $g_1 h_1 = g_2 h_2$. This means the effort of stage $1$, $f_1 = g_1 h_1$, must equal the effort of stage $2$, $f_2 = g_2 h_2$.\n\n$$\\frac{\\partial D_E}{\\partial C_{\\mathrm{in},3}} = \\frac{1}{C_{\\mathrm{in},2}} - \\frac{C_L}{C_{\\mathrm{in},3}^2} = 0 \\implies \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} = \\frac{C_L}{C_{\\mathrm{in},3}} \\implies h_2 = h_3$$\nSince $g_2 = 1$ and $g_3 = 1$, this is equivalent to $g_2 h_2 = g_3 h_3$. This means the effort of stage $2$, $f_2 = g_2 h_2$, must equal the effort of stage $3$, $f_3 = g_3 h_3$.\n\nCombining these results, the condition for minimum delay is that all stage efforts must be equal: $f_1 = f_2 = f_3 = f$.\n\nThe total path effort, $F$, is the product of the path logical effort, $G$, and the path electrical effort, $H$.\n$$G = g_1 g_2 g_3 = \\gamma \\cdot 1 \\cdot 1 = \\gamma$$\n$$H = \\frac{C_{\\mathrm{path,out}}}{C_{\\mathrm{path,in}}} = \\frac{C_L}{C_{\\mathrm{in},1}} = \\frac{1024\\,C_{\\mathrm{ref}}}{16\\,C_{\\mathrm{ref}}} = 64$$\n$$F = GH = 64\\gamma$$\n\nFor a path of $N$ stages with equal stage effort $f$, the total path effort is $F = f^N$. In our case, $N=3$, so the optimal stage effort $f$ is:\n$$f = F^{1/3} = (64\\gamma)^{1/3} = 4\\gamma^{1/3}$$\n\nNow we can determine the sizing of the remaining stages using the condition that each stage effort must equal this optimal value $f$.\nFor stage $1$:\n$$f_1 = g_1 h_1 = \\gamma \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{in},1}} = f$$\n$$\\gamma \\frac{C_{\\mathrm{in},2}}{16\\,C_{\\mathrm{ref}}} = 4\\gamma^{1/3}$$\n$$C_{\\mathrm{in},2} = \\frac{16\\,C_{\\mathrm{ref}} \\cdot 4\\gamma^{1/3}}{\\gamma} = 64\\gamma^{-2/3} C_{\\mathrm{ref}}$$\nThe sizing for stage $2$ is therefore:\n$$S_2 = \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{ref}}} = 64\\gamma^{-2/3}$$\n\nFor stage $2$:\n$$f_2 = g_2 h_2 = (1) \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} = f$$\n$$\\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} = 4\\gamma^{1/3}$$\n$$C_{\\mathrm{in},3} = 4\\gamma^{1/3} \\cdot C_{\\mathrm{in},2} = 4\\gamma^{1/3} \\cdot (64\\gamma^{-2/3} C_{\\mathrm{ref}}) = 256\\gamma^{-1/3} C_{\\mathrm{ref}}$$\nThe sizing for stage $3$ is therefore:\n$$S_3 = \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{ref}}} = 256\\gamma^{-1/3}$$\n\nAs a verification, for stage $3$:\n$$f_3 = g_3 h_3 = (1) \\frac{C_L}{C_{\\mathrm{in},3}} = \\frac{1024\\,C_{\\mathrm{ref}}}{256\\gamma^{-1/3} C_{\\mathrm{ref}}} = 4\\gamma^{1/3} = f$$\nThe result is consistent.\n\nThe optimal sizings for the three stages are $S_1 = 16$, $S_2 = 64\\gamma^{-2/3}$, and $S_3 = 256\\gamma^{-1/3}$. The final answer is to be provided as a row matrix.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n16  64\\gamma^{-2/3}  256\\gamma^{-1/3}\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
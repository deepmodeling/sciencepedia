{
    "hands_on_practices": [
        {
            "introduction": "高层次综合（High-Level Synthesis, HLS）是将算法映射到硬件的核心过程，这一过程可以通过Gajski-Kuhn Y型图清晰地展现，即一个行为描述被转换成在几何时间轴上运行的结构化实现。本练习将探讨列表调度（list scheduling），这是HLS中的一个基本算法。通过手动执行调度过程，您将具体理解优先约束（行为域）、资源限制（结构域）和时序（几何域）是如何相互作用，共同决定最终硬件性能的。",
            "id": "4264767",
            "problem": "在电子设计自动化（EDA）的精神下，并于 Gajski-Kuhn Y-chart 视图中，行为域的调度必须在映射到单一结构资源和几何时间轴的同时，遵循算法级的先行约束。考虑一个在行为域中由操作 $\\{O_1,\\dots,O_9\\}$ 的有向无环图（DAG）描述的计算，每个操作都有一个以时钟周期为单位的整数操作延迟 $L_i$。结构域提供一个启动间隔为1个时钟周期的全流水功能单元，这强制执行了单发射约束：每个整数时钟周期最多可以启动一个操作。几何域是一个从时钟周期0开始的整数时钟周期的离散时间网格。\n\n操作延迟为：$L_1=2$, $L_2=3$, $L_3=1$, $L_4=2$, $L_5=3$, $L_6=2$, $L_7=1$, $L_8=4$, $L_9=2$。先行约束由以下边给出：$O_1 \\to O_3$、 $O_1 \\to O_4$、 $O_2 \\to O_4$、 $O_3 \\to O_5$、 $O_3 \\to O_6$、 $O_4 \\to O_7$、 $O_5 \\to O_7$、 $O_6 \\to O_8$、 $O_7 \\to O_9$、 $O_8 \\to O_9$。\n\n你必须从基本原理出发，推导出行为域中的最早无约束开始时间，然后在一个单发射资源约束下，于结构/几何域中进行列表调度的开始时间分配，使用与延迟加权的行为到结构映射一致的关键路径优先级来解决资源冲突。\n\n从核心定义开始：一个操作 $O_i$ 只有在其所有直接前驱在时间 $t$ 之前都已完成时，才能在时钟周期 $t$ 开始，其中在 $s_i$ 开始的操作 $O_i$ 的完成时间为 $s_i+L_i$。首先，仅基于先行约束和延迟，计算最早无约束开始时间 $e_i$（忽略单发射约束）。然后，按如下方式在单发射约束下计算列表调度：在每个整数时钟周期 $t$，从所有就绪且尚未开始的操作中，选择一个操作来启动；通过选择具有最大延迟加权关键路径优先级 $W_i$ 的操作来打破平局和解决冲突，该优先级递归定义为\n$$\nW_i=\n\\begin{cases}\nL_i,  \\text{若 $O_i$ 没有后继（汇点）}\\\\\nL_i+\\max\\limits_{O_j \\in \\mathrm{succ}(i)} W_j,  \\text{否则,}\n\\end{cases}\n$$\n其中 $\\mathrm{succ}(i)$ 表示 $O_i$ 的直接后继集合。\n\n将你的最终调度以开始时间向量 $s=[s_1,\\dots,s_9]$（以时钟周期为单位，按 $(O_1,\\dots,O_9)$ 排序）以及总延迟 $T=\\max_i(s_i+L_i)$（以时钟周期为单位）的形式提供。所有时钟周期都表示为整数；无需四舍五入。将最终答案表示为一个单行矩阵，按顺序包含 $s_1,\\dots,s_9,T$。",
            "solution": "问题陈述已经过严格审查并被认定为有效。它提出了一个良构的、独立的资源受限调度问题，该问题基于高层次综合和电子设计自动化的标准原理。用于行为规范的有向无环图（DAG）、操作延迟、先行约束、单发射资源约束以及使用基于关键路径的优先级函数的列表调度等概念都是标准的且有形式化定义。该问题是客观的，需要确定性的、可验证的计算。\n\n任务是将行为规范映射到结构和几何实现上，这个过程由 Gajski-Kuhn Y-chart 建模。我们给定一组操作 $\\{O_1, \\dots, O_9\\}$，它们具有指定的整数延迟 $L_i$ 和一个定义了先行约束的DAG。结构域提供一个单发射资源，意味着每个时钟周期最多可以启动一个操作。几何域是一个离散的整数时间线。\n\n解决方案分三个阶段进行：\n1.  在无约束（纯行为）的上下文中，确定最早可能开始时间 $e_i$。\n2.  计算每个操作的延迟加权关键路径优先级 $W_i$。该优先级度量将指导调度决策。\n3.  执行列表调度算法，以确定资源受限的开始时间 $s_i$ 和总调度延迟 $T$。\n\n首先，我们计算最早无约束开始时间 $e_i$。这些时间也被称为尽早（ASAP）时间。一个操作只有在其所有前驱都完成后才能开始。操作 $O_i$ 的开始时间 $e_i$ 由下式给出：\n$$e_i = \\max_{O_j \\in \\mathrm{pred}(i)} \\{e_j + L_j\\}$$\n其中 $\\mathrm{pred}(i)$ 是 $O_i$ 的直接前驱集合。对于没有前驱的源节点，$e_i=0$。计算遵循DAG的拓扑排序。\n给定的延迟为 $L=[2, 3, 1, 2, 3, 2, 1, 4, 2]$。\n前驱集合为：\n$\\mathrm{pred}(1) = \\emptyset, \\mathrm{pred}(2) = \\emptyset, \\mathrm{pred}(3) = \\{O_1\\}, \\mathrm{pred}(4) = \\{O_1, O_2\\}, \\mathrm{pred}(5) = \\{O_3\\}, \\mathrm{pred}(6) = \\{O_3\\}, \\mathrm{pred}(7) = \\{O_4, O_5\\}, \\mathrm{pred}(8) = \\{O_6\\}, \\mathrm{pred}(9) = \\{O_7, O_8\\}$。\n\n$e_1 = 0$\n$e_2 = 0$\n$e_3 = e_1 + L_1 = 0 + 2 = 2$\n$e_4 = \\max(e_1 + L_1, e_2 + L_2) = \\max(0 + 2, 0 + 3) = 3$\n$e_5 = e_3 + L_3 = 2 + 1 = 3$\n$e_6 = e_3 + L_3 = 2 + 1 = 3$\n$e_7 = \\max(e_4 + L_4, e_5 + L_5) = \\max(3 + 2, 3 + 3) = \\max(5, 6) = 6$\n$e_8 = e_6 + L_6 = 3 + 2 = 5$\n$e_9 = \\max(e_7 + L_7, e_8 + L_8) = \\max(6 + 1, 5 + 4) = \\max(7, 9) = 9$\n\n其次，我们为列表调度算法计算优先级权重 $W_i$。权重 $W_i$ 表示从操作 $O_i$ 开始到图的任一汇点的最长路径长度，其中路径长度是路径上操作延迟的总和。其递归定义为：\n$$W_i = L_i + \\max_{O_j \\in \\mathrm{succ}(i)} \\{W_j\\}$$\n其中 $\\mathrm{succ}(i)$ 是 $O_i$ 的直接后继集合。对于没有后继的汇点节点，$W_i = L_i$。该计算通过以逆拓扑顺序遍历DAG来执行。\n后继集合为：\n$\\mathrm{succ}(1) = \\{O_3, O_4\\}, \\mathrm{succ}(2) = \\{O_4\\}, \\mathrm{succ}(3) = \\{O_5, O_6\\}, \\mathrm{succ}(4) = \\{O_7\\}, \\mathrm{succ}(5) = \\{O_7\\}, \\mathrm{succ}(6) = \\{O_8\\}, \\mathrm{succ}(7) = \\{O_9\\}, \\mathrm{succ}(8) = \\{O_9\\}, \\mathrm{succ}(9) = \\emptyset$。\n\n$W_9 = L_9 = 2$\n$W_8 = L_8 + W_9 = 4 + 2 = 6$\n$W_7 = L_7 + W_9 = 1 + 2 = 3$\n$W_6 = L_6 + W_8 = 2 + 6 = 8$\n$W_5 = L_5 + W_7 = 3 + 3 = 6$\n$W_4 = L_4 + W_7 = 2 + 3 = 5$\n$W_3 = L_3 + \\max(W_5, W_6) = 1 + \\max(6, 8) = 1 + 8 = 9$\n$W_2 = L_2 + W_4 = 3 + 5 = 8$\n$W_1 = L_1 + \\max(W_3, W_4) = 2 + \\max(9, 5) = 2 + 9 = 11$\n操作的优先级列表，从最高到最低的 $W_i$ 为：$O_1(11), O_3(9), O_2(8), O_6(8), O_5(6), O_8(6), O_4(5), O_7(3), O_9(2)$。当 $W_i$ 存在并列时（例如，$W_2=W_6=8$ 和 $W_5=W_8=6$），我们应用一个确定性的打破平局规则，即选择索引较小的操作。排序后的优先级列表是：$O_1, O_3, O_2, O_6, O_5, O_8, O_4, O_7, O_9$。\n\n第三，我们执行列表调度。我们遍历时间周期 $t=0, 1, 2, \\dots$。在每个周期，我们构建一个 `ReadyList`，其中包含所有其前驱已完成的未调度操作。如果 `ReadyList` 不为空，我们选择优先级最高的操作，并将其调度在当前周期 $t$。\n- **时钟周期 $t=0$**：`ReadyList` = $\\{O_1, O_2\\}$。$O_1$ 具有更高的优先级 ($W_1=11 > W_2=8$)。调度 $O_1$。$s_1=0$。\n- **时钟周期 $t=1$**：`ReadyList` = $\\{O_2\\}$。调度 $O_2$。$s_2=1$。\n- **时钟周期 $t=2$**：$O_1$ 完成 ($0+2=2$)。$O_3$ 变为就绪。`ReadyList` = $\\{O_3\\}$。调度 $O_3$。$s_3=2$。\n- **时钟周期 $t=3$**：$O_3$ 完成 ($2+1=3$)。$O_5$ 和 $O_6$ 变为就绪。`ReadyList` = $\\{O_5, O_6\\}$。$O_6$ 具有更高的优先级 ($W_6=8 > W_5=6$)。调度 $O_6$。$s_6=3$。\n- **时钟周期 $t=4$**：$O_2$ 完成 ($1+3=4$)。$O_4$ 变为就绪。按优先级排序的 `ReadyList` 为 $\\{O_5, O_4\\}$ ($W_5=6 > W_4=5$)。调度 $O_5$。$s_5=4$。\n- **时钟周期 $t=5$**：$O_6$ 完成 ($3+2=5$)。$O_8$ 变为就绪。按优先级排序的 `ReadyList` 为 $\\{O_8, O_4\\}$ ($W_8=6 > W_4=5$)。调度 $O_8$。$s_8=5$。\n- **时钟周期 $t=6$**：`ReadyList` = $\\{O_4\\}$。调度 $O_4$。$s_4=6$。\n- **时钟周期 $t=7$**：$O_5$ 完成 ($4+3=7$)。$O_7$ 尚未就绪，因为它等待 $O_4$ (在 $6+2=8$ 时完成)。`ReadyList` 为空。这是一个空闲周期。\n- **时钟周期 $t=8$**：$O_4$ 完成 ($6+2=8$)。$O_7$ 变为就绪 (前驱 $O_4, O_5$ 已完成)。`ReadyList` = $\\{O_7\\}$。调度 $O_7$。$s_7=8$。\n- **时钟周期 $t=9$**：$O_7$ 和 $O_8$ 都完成 (分别在 $8+1=9$ 和 $5+4=9$ 时)。$O_9$ 变为就绪。`ReadyList` = $\\{O_9\\}$。调度 $O_9$。$s_9=9$。\n\n最终调度好的开始时间为 $s=[s_1, s_2, s_3, s_4, s_5, s_6, s_7, s_8, s_9] = [0, 1, 2, 6, 4, 3, 8, 5, 9]$。\n\n总延迟 $T$ 是最后一个操作的完成时间。操作 $O_i$ 的完成时间为 $c_i = s_i + L_i$。\n$c_1 = 0+2=2$\n$c_2 = 1+3=4$\n$c_3 = 2+1=3$\n$c_4 = 6+2=8$\n$c_5 = 4+3=7$\n$c_6 = 3+2=5$\n$c_7 = 8+1=9$\n$c_8 = 5+4=9$\n$c_9 = 9+2=11$\n总延迟为 $T = \\max_i(c_i) = 11$ 个时钟周期。\n最终结果包括开始时间向量 $s$ 和总延迟 $T$。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 0  1  2  6  4  3  8  5  9  11 \\end{pmatrix} } $$"
        },
        {
            "introduction": "在物理设计中，优化工具必须不断进行权衡取舍，一个经典的例子便是在物理属性（如线长）和电路时序（一种行为特性）之间取得平衡。本实践使用一个简化的线性模型来量化这种权衡，您将构建一个结合了物理成本和行为成本的多目标代价函数 $J(\\delta;\\lambda)$。这个练习将向您展示抽象的设计目标如何转化为能够指导EDA工具的数学公式，从而深入理解布局优化的核心挑战。",
            "id": "4264757",
            "problem": "在采用电子设计自动化 (EDA) 的集成电路 (IC) 设计背景下，Gajski-Kuhn Y-chart 将设计空间沿三个互补的坐标轴进行组织：行为轴（时序和功能）、结构轴（网表和层次结构）和物理轴（几何形状和布局）。考虑一个层次化模块，其中结构层面的一个可移动标准单元连接到三条连线。物理轴允许该单元沿单一行产生一个标量位移 $\\delta$，这使得每条连线的曼哈顿线长随 $\\delta$ 线性变化。行为轴要求时序收敛，我们通过使用一阶 Elmore 延迟近似来对每条连线相对于线长的延迟灵敏度进行线性化建模。\n\n假设对于连线 $i \\in \\{1,2,3\\}$，线长变化为 $l_i(\\delta) = l_i^{0} + a_i \\delta$，其中 $a_i$ 是一个已知的几何因子（单位为每单位位移的长度变化）。对于连线 $i$，每单位线长变化的增量时序惩罚是一个恒定的灵敏度 $s_i$（单位为每单位长度的时间），该值通过在当前工作点附近对 Elmore 延迟进行局部线性化得到。一个用于平衡行为时序和物理线长的常见多目标布局目标函数是使用权重 $\\lambda \\in [0,1]$ 的凸组合：\n$$\nJ(\\delta;\\lambda) = \\lambda \\sum_{i=1}^{3} s_i\\, l_i(\\delta) + (1-\\lambda)\\sum_{i=1}^{3} l_i(\\delta).\n$$\n为了关注权衡关系并避免无关常数，我们考虑相对于当前布局的增量目标，这将移除与 $\\delta$ 无关的项。\n\n给定三条连线的几何因子和时序灵敏度如下：\n$$\na_1 = 1,\\quad a_2 = -2,\\quad a_3 = \\frac{1}{2},\\qquad s_1 = 4,\\quad s_2 = 1,\\quad s_3 = 2.\n$$\n位移受到布局约束的物理限制，即 $\\delta \\in [-\\Delta,\\Delta]$（对于某个 $\\Delta  0$），但在简化的线性模型中，确定使时序和线长精确平衡的权重时，这个边界是不需要的。\n\n从适用于 Y-chart 坐标轴的、经过充分检验的事实和核心定义（曼哈顿线长、一阶 Elmore 延迟线性化以及凸多目标加权）出发，构建增量目标函数，并确定使增量目标中 $\\delta$ 的线性系数为零的权衡权重 $\\lambda^{\\star}$ 的值。在此线性模型下，该值代表了时序和线长之间的精确平衡点，使得最优解不会被推向边界 $-\\Delta$ 或 $\\Delta$。\n\n将 $\\lambda^{\\star}$ 的最终答案表示为一个精确的数字。无需单位。",
            "solution": "该问题要求找到一个权衡权重 $\\lambda^{\\star}$，用以在集成电路布局的多目标成本函数中，平衡时序和线长的线性贡献。当成本函数关于位移 $\\delta$ 的导数为零时，或者等价地，当增量目标函数中 $\\delta$ 的线性系数为零时，即可实现这种平衡。\n\n总目标函数 $J(\\delta;\\lambda)$ 被给出为一个时序相关项和一个线长相关项的凸组合：\n$$\nJ(\\delta;\\lambda) = \\lambda \\sum_{i=1}^{3} s_i\\, l_i(\\delta) + (1-\\lambda)\\sum_{i=1}^{3} l_i(\\delta)\n$$\n其中 $\\lambda \\in [0,1]$ 是权衡权重，$l_i(\\delta)$ 是连线 $i$ 的线长，$s_i$ 是其时序灵敏度。\n\n每条连线 $i$ 的线长被建模为位移 $\\delta$ 的线性函数：\n$$\nl_i(\\delta) = l_i^{0} + a_i \\delta\n$$\n这里，$l_i^{0}$ 是在 $\\delta=0$ 时的初始线长，$a_i$ 是表示每单位位移的线长变化量的几何因子。\n\n我们将 $l_i(\\delta)$ 的表达式代入目标函数 $J(\\delta;\\lambda)$ 中：\n$$\nJ(\\delta;\\lambda) = \\lambda \\sum_{i=1}^{3} s_i (l_i^{0} + a_i \\delta) + (1-\\lambda)\\sum_{i=1}^{3} (l_i^{0} + a_i \\delta)\n$$\n我们可以分配求和运算，并将相对于 $\\delta$ 为常数的项与 $\\delta$ 的线性项分离开来：\n$$\nJ(\\delta;\\lambda) = \\lambda \\left( \\sum_{i=1}^{3} s_i l_i^{0} + \\delta \\sum_{i=1}^{3} s_i a_i \\right) + (1-\\lambda) \\left( \\sum_{i=1}^{3} l_i^{0} + \\delta \\sum_{i=1}^{3} a_i \\right)\n$$\n重新整理各项，以便将 $\\delta$ 的系数归类：\n$$\nJ(\\delta;\\lambda) = \\left( \\lambda \\sum_{i=1}^{3} s_i l_i^{0} + (1-\\lambda) \\sum_{i=1}^{3} l_i^{0} \\right) + \\delta \\left( \\lambda \\sum_{i=1}^{3} s_i a_i + (1-\\lambda) \\sum_{i=1}^{3} a_i \\right)\n$$\n第一项是目标函数在 $\\delta=0$ 时的值，即 $J(0;\\lambda)$。增量目标是 $\\delta$ 的线性项，它捕捉了从初始状态开始的变化。问题要求我们寻找 $\\lambda$ 的值，记作 $\\lambda^{\\star}$，使得 $\\delta$ 的线性系数为零。我们将这个系数称为 $C(\\lambda)$：\n$$\nC(\\lambda) = \\lambda \\sum_{i=1}^{3} s_i a_i + (1-\\lambda) \\sum_{i=1}^{3} a_i\n$$\n将此系数设为零，$C(\\lambda^{\\star}) = 0$，得到平衡点的条件：\n$$\n\\lambda^{\\star} \\sum_{i=1}^{3} s_i a_i + (1-\\lambda^{\\star}) \\sum_{i=1}^{3} a_i = 0\n$$\n为了解出 $\\lambda^{\\star}$，我们首先使用给定的数据计算这两个和：\n几何因子为 $a_1=1$, $a_2=-2$, $a_3=\\frac{1}{2}$。\n时序灵敏度为 $s_1=4$, $s_2=1$, $s_3=2$。\n\n首先，我们计算几何因子的和 $\\sum_{i=1}^{3} a_i$：\n$$\n\\sum_{i=1}^{3} a_i = a_1 + a_2 + a_3 = 1 + (-2) + \\frac{1}{2} = -1 + \\frac{1}{2} = -\\frac{1}{2}\n$$\n接下来，我们计算加权和 $\\sum_{i=1}^{3} s_i a_i$：\n$$\n\\sum_{i=1}^{3} s_i a_i = s_1 a_1 + s_2 a_2 + s_3 a_3 = (4)(1) + (1)(-2) + (2)\\left(\\frac{1}{2}\\right) = 4 - 2 + 1 = 3\n$$\n现在，我们将这些数值代回关于 $\\lambda^{\\star}$ 的方程中：\n$$\n\\lambda^{\\star} (3) + (1-\\lambda^{\\star}) \\left(-\\frac{1}{2}\\right) = 0\n$$\n我们求解这个关于 $\\lambda^{\\star}$ 的线性方程：\n$$\n3\\lambda^{\\star} - \\frac{1}{2} + \\frac{1}{2}\\lambda^{\\star} = 0\n$$\n$$\n\\left(3 + \\frac{1}{2}\\right)\\lambda^{\\star} = \\frac{1}{2}\n$$\n$$\n\\left(\\frac{6}{2} + \\frac{1}{2}\\right)\\lambda^{\\star} = \\frac{1}{2}\n$$\n$$\n\\frac{7}{2}\\lambda^{\\star} = \\frac{1}{2}\n$$\n$$\n\\lambda^{\\star} = \\frac{1}{2} \\cdot \\frac{2}{7} = \\frac{1}{7}\n$$\n这个值 $\\lambda^{\\star} = \\frac{1}{7}$ 在有效范围 $[0,1]$ 内。它代表了一个特定的权重，在该权重下，时序目标的线性驱动力被线长目标的线性驱动力完全抵消，从而在这个简化的线性模型中，在 $\\delta=0$ 处得到一个驻点。",
            "answer": "$$\\boxed{\\frac{1}{7}}$$"
        },
        {
            "introduction": "Y型图不仅关联了不同的设计领域，还描述了每个领域内部的不同抽象层次，从逻辑门到晶体管的转换便是结构轴上的一个关键细化步骤。本问题对比了一个复杂逻辑门的直接定制实现与使用更简单的标准单元库进行分层实现的两种方法。通过计算两种路径下的晶体管数量，您将体会到定制设计的效率与基于标准单元的方法所提供的模块化和规整性之间的权衡。",
            "id": "4264793",
            "problem": "一个高级设计团队正在Gajski-Kuhn Y图的框架内，在不同的抽象层次和域之间对一个门级网表进行细化。考虑网表中的一个节点，它是一个$k$输入逻辑与非门，其中$k \\geq 2$。从结构化的逻辑级描述到互补金属氧化物半导体（CMOS）技术中的结构化电路级描述，考虑了两种细化路径。\n\n路径A：直接细化为单个静态互补金属氧化物半导体（CMOS）门。晶体管级原理图使用互补下拉网络和上拉网络方法构建：下拉网络通过n沟道金属氧化物半导体场效应晶体管（NMOS）的串并联网络实现，对应于输出必须为逻辑低电平的条件；上拉网络是p沟道金属氧化物半导体场效应晶体管（PMOS）的对偶网络，对应于这些条件的逻辑补。假设采用最小化的、串并联的静态CMOS，不使用传输门、不进行因式分解、没有任何重复或冗余。忽略阱偏置、体连接、布线器件以及为提高性能而进行的任何尺寸放大；只计算功能晶体管。\n\n路径B：在电路映射之前，在逻辑级受标准单元组合规则约束的分层细化：在门级只有$2$输入与非单元可用。$k$个输入必须通过一个二叉树组合，其内部节点计算逻辑与，但根节点产生逻辑与非，从而使整体功能为$k$输入与非。每个非根内部节点处的逻辑与必须仅使用$2$输入与非门和反相器来构建。反相器必须通过将其两个输入连接在一起的$2$输入与非门来实现。在这种逻辑级分解之后，每个$2$输入与非门都像路径A中那样细化为其静态CMOS实现。与上述一样，忽略阱偏置、体连接、布线器件和尺寸放大，只计算功能晶体管。\n\n从基本布尔代数和标准静态CMOS互补上拉/下拉构建规则出发，推导路径A和路径B所获得的晶体管总数的闭式表达式（作为$k$的函数）。最后，将$D(k)$定义为路径B晶体管数量与路径A晶体管数量之差，并以$k$的单个简化符号表达式的形式给出$D(k)$。不需要进行数值代入。你的最终答案必须是$D(k)$的单个表达式。",
            "solution": "在尝试给出解决方案之前，将首先根据指定标准对问题进行验证。\n\n### 步骤1：提取已知条件\n- **函数**：一个$k$输入逻辑与非，其中整数$k \\geq 2$。\n- **背景**：在Gajski-Kuhn Y图上从结构化、逻辑级到结构化、电路级的细化。\n- **技术**：互补金属氧化物半导体（CMOS）。\n- **路径A（直接细化）**：\n    - $k$输入与非门实现为单个静态CMOS门。\n    - 通过由n沟道金属氧化物半导体场效应晶体管（NMOS）组成的互补下拉网络（PDN）和由p沟道金属氧化物半导体场效应晶体管（PMOS）组成的上拉网络（PUN）来构建。\n    - 实现方式是最小化的串并联静态CMOS。\n    - 计数排除项：传输门、因式分解、重复、冗余、阱偏置、体连接、布线器件和晶体管尺寸放大。只计算功能晶体管。\n- **路径B（分层细化）**：\n    - 逻辑级约束：只有$2$输入与非单元可用。\n    - 分解：$k$输入与非门实现为二叉树。内部节点计算逻辑与，根节点计算逻辑与非。\n    - 与门的实现：一个$2$输入逻辑与使用$2$输入与非门和反相器构建。\n    - 反相器的实现：一个反相器由一个输入端连接在一起的$2$输入与非门构成。\n    - 电路级映射：每个$2$输入与非单元按照路径A所述细化为其静态CMOS实现。\n    - 计数排除项：与路径A相同。\n- **目标**：\n    - 推导路径A的总晶体管数$T_A(k)$的闭式表达式。\n    - 推导路径B的总晶体管数$T_B(k)$的闭式表达式。\n    - 定义$D(k) = T_B(k) - T_A(k)$。\n    - 提供$D(k)$的单个简化符号表达式。\n\n### 步骤2：使用提取的已知条件进行验证\n对问题的有效性进行评估：\n- **科学基础**：该问题植根于数字逻辑设计（布尔代数、逻辑门分解）和VLSI电路设计（静态CMOS门拓扑）的基本原理。这些是电气工程和计算机科学中标准的、成熟的概念。该问题在科学上是合理的。\n- **良构性（Well-Posed）**：该问题为构建和分析两条路径中的电路提供了一套清晰完整的规则。路径B中实现与门和反相器的定义是明确的。目标是找到一个特定的数学表达式，其唯一解可以从给定的约束中推导出来。该问题是良构的。\n- **客观性**：问题陈述使用了精确、技术性的语言，没有主观性、观点或偏见。\n- **其他缺陷**：该问题没有违反任何其他标准。它不是基于错误的前提，是可形式化的，是自包含的，其假设是教科书分析中的标准简化，并且不是微不足道的。\n\n### 步骤3：结论与行动\n问题被判定为**有效**。将提供一个完整的、有理有据的解决方案。\n\n### 求解推导\n\n解决方案需要推导一个$k$输入与非门的两种不同实现路径的晶体管数量，然后求出它们的差值。\n\n**1. 路径A的晶体管数量：$T_A(k)$**\n\n在路径A中，$k$输入与非门被实现为单个静态CMOS逻辑门。布尔函数为 $Y = \\overline{I_1 \\cdot I_2 \\cdot \\ldots \\cdot I_k}$，其中$I_1, \\ldots, I_k$是输入。\n\n根据静态互补CMOS设计规则：\n- 下拉网络（PDN）将输出连接到地（$V_{SS}$），并且当输出为逻辑低电平时必须导通。当且仅当所有输入都为高电平时，即$I_1 \\cdot I_2 \\cdot \\ldots \\cdot I_k = 1$时，输出$Y$为低电平。PDN中的与功能是通过串联NMOS晶体管实现的。因此，PDN由$k$个串联的NMOS晶体管组成，每个输入对应一个。\n- 上拉网络（PUN）将输出连接到电源（$V_{DD}$），并且当输出为逻辑高电平时必须导通。这发生在PDN的条件为假时，即$\\overline{I_1 \\cdot I_2 \\cdot \\ldots \\cdot I_k} = 1$。PUN在逻辑上和拓扑上都是PDN的对偶。PDN中NMOS晶体管的串联对应于PUN中PMOS晶体管的并联。因此，PUN由$k$个并联的PMOS晶体管组成，每个输入对应一个。\n\n功能晶体管的总数是PDN和PUN中晶体管数量之和。\n$$T_A(k) = (\\text{Number of NMOS}) + (\\text{Number of PMOS}) = k + k = 2k$$\n\n**2. 路径B的晶体管数量：$T_B(k)$**\n\n在路径B中，$k$输入与非功能首先被分解为一个由$2$输入与非门组成的网络。问题指定了一个二叉树结构。一个有$k$个叶子（输入）的二叉树有$k-1$个内部节点（门）。问题指出根节点是一个$2$输入与非门，其余的$k-2$个内部节点是$2$输入与门。\n\n首先，我们确定构建此结构所需的原始$2$输入与非单元的数量。\n- 一个$2$输入与门必须由$2$输入与非门和反相器构成。标准构造基于德摩根定律：$A \\cdot B = \\overline{\\overline{A \\cdot B}}$。这需要一个$2$输入与非门后跟一个反相器。\n- 反过来，反相器被指定使用一个输入端连接在一起的$2$输入与非门来实现。这被视为一个原始的$2$输入与非单元。\n- 因此，一个$2$输入与门需要$1$个与非单元用于初始的与非操作，以及$1$个与非单元用于后续的反相，总共需要$2$个原始的$2$输入与非单元。\n\n路径B中$k$输入功能所需的原始$2$输入与非单元总数是所有组成门的单元数之和：\n- $2$输入与门的数量：$k-2$\n- $2$输入与非门的数量（根节点）：$1$\n\n单元总数 = (与门数量 $\\times$ 每个与门的单元数) + (与非门数量 $\\times$ 每个与非门的单元数)\n单元总数 = $(k-2) \\times 2 + 1 \\times 1 = 2k - 4 + 1 = 2k - 3$\n\n接下来，我们计算每个原始$2$输入与非单元的晶体管数量。使用与路径A中相同的静态CMOS设计原则，但对于$k=2$的情况，一个$2$输入与非门具有：\n- 一个带有$2$个串联NMOS晶体管的PDN。\n- 一个带有$2$个并联PMOS晶体管的PUN。\n这使得每个$2$输入与非单元总共有$2+2=4$个晶体管。\n\n路径B的总晶体管数$T_B(k)$是原始单元总数乘以每个单元的晶体管数。\n$$T_B(k) = (2k-3) \\times 4 = 8k - 12$$\n\n**3. 差值$D(k)$的计算**\n\n问题将$D(k)$定义为路径B和路径A的晶体管数量之差。\n$$D(k) = T_B(k) - T_A(k)$$\n代入上面推导出的表达式：\n$$D(k) = (8k - 12) - (2k)$$\n简化表达式得到：\n$$D(k) = 6k - 12$$\n该表达式对$k \\geq 2$有效。当$k=2$时，$T_A(2) = 2(2) = 4$ 且 $T_B(2) = 8(2)-12 = 4$，所以$D(2)=0$。这是正确的，因为当$k=2$时，两条路径都描述了一个简单的$2$输入与非门。对于$k  2$，路径B在晶体管数量方面效率较低。",
            "answer": "$$\\boxed{6k-12}$$"
        }
    ]
}
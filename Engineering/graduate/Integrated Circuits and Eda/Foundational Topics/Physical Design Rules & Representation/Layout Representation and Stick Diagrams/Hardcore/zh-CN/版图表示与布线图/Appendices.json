{
    "hands_on_practices": [
        {
            "introduction": "本练习是标准单元物理设计中的一项基础实践。通过确定CMOS反相器所需的最小布线轨道数，您将学习如何应用核心版图约束，例如单向布线和电源轨放置，从而将抽象的设计规则转化为具体的拓扑规划。",
            "id": "4278398",
            "problem": "在一个为电子设计自动化（EDA）布局布线流程设计的、作为单个标准单元的互补金属氧化物半导体反相器中，假设采用以下方法学和设计规则环境。金属层-1（M1）在单元体内被限制为单向水平走线，而金属层-2（M2）为单向垂直走线。最小 M1 宽度为 $W_{\\text{M1}} = 2\\lambda$，最小 M1 间距为 $S_{\\text{M1}} = 2\\lambda$，其中 $\\lambda$ 表示可伸缩设计规则单位。轨道由水平布线的 M1 线条的中心线间距 $P_{\\text{M1}}$ 定义，并且所有 M1 引脚图形必须以整数轨道索引为中心。标准单元方法学要求电源轨 $V_{\\text{DD}}$ 和 $V_{\\text{SS}}$ 分别作为连续的 M1 线条实现于单元的最顶部和最底部，且各占一个轨道。输入引脚 $A$ 必须暴露为一个 M1 引脚图形，该图形可通过一个 M1-M2 过孔从垂直多晶硅栅极经由多晶硅-金属接触孔到达。输出引脚 $Y$ 必须短接 p 型金属氧化物半导体场效应晶体管的漏极和 n 型金属氧化物半导体场效应晶体管的漏极；该短接必须通过单元内部的一段垂直 M2 段实现，该 M2 段连接两个不同的 M1 引脚图形，每个图形通过接触孔落在一个漏极扩散区上。单元体内的垂直 M1 拐角是不允许的；只允许在离散轨道上使用水平 M1 段。只要在 $x$ 方向上横向分离并满足最小间距 $S_{\\text{M1}}$，您可以在同一 M1 轨道上放置多个不相交的网络，但任何 M1-M2 过孔的着陆盘都必须以某个 M1 轨道为中心。\n\n从 M1 轨道网格源于最小宽度和间距要求以及上述标准单元单向布线约束这一核心几何事实出发，确定跨单元高度所需的不同水平 M1 轨道的最小数量，该数量是实现具有指定的可访问引脚 $A$、$Y$、$V_{\\text{DD}}$ 和 $V_{\\text{SS}}$ 的反相器所充分且必要的。在您的推理中，请考虑需要为形成 $Y$ 的两个漏极提供两个独立的 M1 着陆位置，以及对垂直 M1 拐角的禁令。您必须确保所有 M1 特征都满足 $W_{\\text{M1}}$ 和 $S_{\\text{M1}}$，并且每个 M1-M2 过孔都以 M1 轨道为中心。\n\n请用文字提供一个在所述方法学下能达到此最小值的、与棍状图一致的布线方案。最后，将最小轨道数报告为单个整数。无需四舍五入，最终答案不应报告物理单位。除最终轨道数必须是数字外，推导过程中的所有数值量都必须用 $\\lambda$ 符号化处理。",
            "solution": "所述问题是集成电路物理设计领域中的一个适定问题。它在科学上基于标准单元版图方法学和互补金属氧化物半导体（CMOS）技术的原理。给定的约束虽然具体，但却是一致且充分的，足以确定一个唯一的最小整数解。包括金属层-1（M1）、金属层-2（M2）、设计规则（$W_{\\text{M1}}$、$S_{\\text{M1}}$、$\\lambda$）、单向布线、轨道和引脚定义在内的术语，在电子设计自动化（EDA）领域都是标准术语。因此，该问题被认为是有效的，可以构建一个形式化的解决方案。\n\n目标是根据指定规则，找出实现一个 CMOS 反相器标准单元所需的水平金属层-1（M1）轨道的最小数量。轨道是一个离散的水平布线通道，轨道的总数决定了标准单元的高度。\n\n首先，我们必须识别出单元内所有需要 M1 布线资源的独立电气网络。对于一个 CMOS 反相器，这些网络是：\n1.  电源轨，$V_{\\text{DD}}$。\n2.  地线轨，$V_{\\text{SS}}$。\n3.  输入信号，$A$。\n4.  输出信号，$Y$。\n\n接下来，我们分析对每个网络的 M1 版图施加的约束。\n\n1.  **电源轨（$V_{\\text{DD}}$ 和 $V_{\\text{SS}}$）**：问题陈述 $V_{\\text{DD}}$ 和 $V_{\\text{SS}}$ 必须分别作为连续的 M1 线条实现于单元的最顶部和最底部。还规定了每条电源轨恰好占用一个轨道。因此，这两条电源轨需要两个专用的 M1 轨道，不能与任何其他信号布线共享。我们把 $V_{\\text{DD}}$ 的顶部轨道记为轨道 $N$，$V_{\\text{SS}}$ 的底部轨道记为轨道 1。这就立即确立了至少需要两个轨道的要求。\n\n2.  **输出引脚（$Y$）**：最关键的约束与输出引脚 $Y$ 有关。问题规定，输出网络必须短接 p 型晶体管（PMOS）的漏极和 n 型晶体管（NMOS）的漏极。这种短接“必须通过单元内部的一段垂直 M2 段实现，该 M2 段连接两个不同的 M1 引脚图形”。我们称连接到 PMOS 漏极的 M1 着陆盘为 $Y_p$，连接到 NMOS 漏极的 M1 着陆盘为 $Y_n$。\n    - M2 层被限制为单向垂直走线。一个垂直线段由一个恒定的 $x$ 坐标和一个变化的 $y$ 坐标定义。\n    - M1 层被限制为单向水平走线。一个水平 M1 轨道由一个恒定的 $y$ 坐标定义。\n    - 要使一个垂直 M2 段连接两个 M1 图形 $Y_p$ 和 $Y_n$，这两个图形必须放置在相同的 $x$ 坐标但不同的 $y$ 坐标处。\n    - 由于 M1 图形必须以水平轨道为中心，因此具有不同的 $y$ 坐标意味着 $Y_p$ 和 $Y_n$ 必须放置在两个不同的 M1 轨道上。\n    - 因此，输出引脚 $Y$ 的实现至少需要两个不同的 M1 轨道。这些轨道必须在单元内部，即位于 $V_{\\text{DD}}$ 和 $V_{\\text{SS}}$ 电源轨之间。\n\n结合电源轨和输出引脚的要求，我们至少需要 2 个轨道用于电源（$V_{\\text{DD}}$、$V_{\\text{SS}}$），外加 2 个轨道用于输出（$Y_p$、$Y_n$），得出的初步下界为 4 个轨道。\n\n3.  **输入引脚（$A$）**：问题规定“输入引脚 A 必须暴露为一个 M1 引脚图形”。此 M1 图形必须连接到反相器的多晶硅栅极。与所有其他 M1 特征一样，该图形必须以 M1 轨道为中心。这就增加了一个要求，即需要一个 M1 轨道来容纳输入引脚。现在的问题是，这个轨道是否必须是已确定的四个轨道之外的额外轨道，还是可以共享。\n\n问题陈述：“只要在 $x$ 方向上横向分离……您可以在同一 M1 轨道上放置多个不相交的网络”。输入网络 $A$ 与输出网络 $Y$ 在电气上是不相交的。在典型的反相器版图中，多晶硅栅极是一个垂直结构，在 $x$ 方向上与漏极扩散区物理分离。这意味着到栅极的 M1 接触孔（用于引脚 $A$）的 $x$ 坐标将不同于到漏极的 M1 接触孔（用于 $Y_p$ 和 $Y_n$）的 $x$ 坐标。因此，可以将引脚 $A$ 的 M1 图形与 $Y_p$ 或 $Y_n$ 之一放置在同一水平轨道上，同时遵守横向分离规则（$S_{\\text{M1}} = 2\\lambda$）。\n\n为了实现最小轨道数，我们应尽可能地共享轨道。由于输入引脚 $A$ 所需的 M1 资源可以与另一个 M1 图形放置在同一轨道上，因此它不需要额外的轨道。我们可以将引脚 $A$ 的 M1 图形放置在已为输出 $Y$ 所需的两个内部轨道之一上。\n\n因此，所需的最小轨道数为 4。一个证明此最小值的可行版图方案如下：\n\n-   **轨道 4（最顶部）：** 一条用于 $V_{\\text{DD}}$ 电源轨的连续 M1 水平线。该电源轨与 PMOS 源极扩散区接触。\n-   **轨道 3：** 一段 M1 水平段，用作 PMOS 漏极（$Y_p$）的着陆盘。在同一轨道上，但在不同的横向（$x$）位置，第二段 M1 段用作输入引脚 $A$，与下方的垂直多晶硅栅极接触。\n-   **轨道 2：** 一段 M1 水平段，用作 NMOS 漏极（$Y_n$）的着陆盘。该段与轨道 3 上的 $Y_p$ 段放置在相同的 $x$ 坐标处。\n-   **轨道 1（最底部）：** 一条用于 $V_{\\text{SS}}$ 电源轨的连续 M1 水平线。该电源轨与 NMOS 源极扩散区接触。\n\n输出连接通过在轨道 3 上的 M1 段 $Y_p$ 和轨道 2 上的 M1 段 $Y_n$ 之间走线的一段垂直 M2 段来完成。该结构满足所有指定约束：M1 是水平的，M2 是垂直的，电源轨位于顶部和底部轨道，输出 $Y$ 由两个不同轨道上的 M1 焊盘之间的垂直短接形成，并且输入引脚 $A$ 作为 M1 图形存在于一个整数轨道上。没有使用垂直 M1 拐角。因此，最小轨道数被确定为 4。",
            "answer": "$$\\boxed{4}$$"
        },
        {
            "introduction": "从业界主流的FinFET技术出发，本实践探讨了其固有的器件尺寸量化特性。您需要根据给定的有效沟道宽度要求，计算出所需的鳍片（fin）数量，这要求您将电路的电气性能目标与离散的物理版图约束（如鳍片数量和对称性规则）联系起来。",
            "id": "4278435",
            "problem": "您正在使用棍状图抽象法，在鳍式场效应晶体管（FinFET）技术中设计一个互补逆变器。目标是确定器件的尺寸以满足目标有效宽度，并规划棍状图使其遵循鳍间距和对齐规则。在这种技术中，每个鳍为器件提供固定的有效导电宽度，并且鳍在均匀的网格上被量化。\n\n假设有以下技术和设计约束：\n- 每个鳍的有效导电宽度为 $W_{\\text{fin}} = 7.5~\\text{nm}$。\n- 鳍网格间距为 $P_{\\text{fin}} = 27~\\text{nm}$，由 $p$ 型和 $n$ 型器件行共享，因此在棍状图中，$p$ 型和 $n$ 型行中的鳍必须共线，并对齐到相同的鳍索引网格。\n- $n$ 型器件所需的有效宽度为 $W_{\\text{eff},n} = 58~\\text{nm}$。\n- 为了在迁移率不对称的情况下平衡上升和下降延迟， $p$ 型器件的有效宽度必须为 $W_{\\text{eff},p} = \\alpha \\, W_{\\text{eff},n}$，其中 $\\alpha = 2$。\n- 库对称性和接触扩散区要求规定，任何单个器件中的鳍数量必须是偶数。\n- 每个器件使用单指实现，并规划一个棍状图，其中一个多晶硅栅极同时穿过 $p$ 型和 $n$ 型鳍阵列，两行中的鳍通过共享的 $P_{\\text{fin}}$ 网格对齐。\n\n从关于鳍量化和棍状图拓扑的第一性原理出发（除了用于表示鳍、扩散区和栅极的棍状图外，不使用任何其他版图表示法），确定 $p$ 型和 $n$ 型晶体管上可行的最小总鳍数，该总鳍数需满足有效宽度要求和偶数鳍约束，同时保持与公共鳍网格的对齐。\n\n将最终答案表示为两个器件上总鳍数的单个整数（无量纲）。除了规定的整数和偶数约束外，不需要其他取整规则。",
            "solution": "该问题要求在满足若干约束条件下，确定 FinFET 技术中互补逆变器的最小可行总鳍数。通过独立计算 $n$ 型器件和 $p$ 型器件所需的鳍数量，确保每个器件都满足所有约束条件，然后将结果相加来获得解决方案。\n\n给定的参数如下：\n- 每个鳍的有效导电宽度：$W_{\\text{fin}} = 7.5~\\text{nm}$\n- $n$ 型器件所需的有效宽度：$W_{\\text{eff},n} = 58~\\text{nm}$\n- $p$ 型器件的尺寸比：$\\alpha = 2$\n- 每个器件的鳍数量必须是偶数。\n\n首先，我们确定 $n$ 型晶体管的最小鳍数，$N_{\\text{fins},n}$。鳍的数量必须足以提供至少为 $W_{\\text{eff},n}$ 的所需有效宽度。理论上的鳍数量（一个实数）由所需宽度与每个鳍的宽度之比得出：\n$$\nN_{\\text{fins},n,\\text{raw}} = \\frac{W_{\\text{eff},n}}{W_{\\text{fin}}} = \\frac{58}{7.5} \\approx 7.733\n$$\n由于鳍是离散的物理单元，鳍的数量必须是整数。为了满足宽度要求 $W_{\\text{eff},n} \\ge 58~\\text{nm}$，我们必须将此值向上取整到下一个整数。这通过应用向上取整函数（ceiling function）实现：\n$$\nN_{\\text{fins},n,\\text{quantized}} = \\lceil N_{\\text{fins},n,\\text{raw}} \\rceil = \\lceil 7.733 \\rceil = 8\n$$\n接下来，我们应用鳍数量必须是偶数的约束。计算出的值 $8$ 是一个偶数，因此满足此约束。因此，$n$ 型器件的最小可行鳍数为：\n$$\nN_{\\text{fins},n} = 8\n$$\n\n其次，我们确定 $p$ 型晶体管的最小鳍数，$N_{\\text{fins},p}$。首先，我们使用给定的尺寸比 $\\alpha$ 计算其所需的有效宽度 $W_{\\text{eff},p}$：\n$$\nW_{\\text{eff},p} = \\alpha \\, W_{\\text{eff},n} = 2 \\times 58~\\text{nm} = 116~\\text{nm}\n$$\n$p$ 型器件的理论鳍数量为：\n$$\nN_{\\text{fins},p,\\text{raw}} = \\frac{W_{\\text{eff},p}}{W_{\\text{fin}}} = \\frac{116}{7.5} \\approx 15.467\n$$\n通过对此值进行向上取整来应用量化约束，以确保满足 $p$ 型器件的有效宽度要求：\n$$\nN_{\\text{fins},p,\\text{quantized}} = \\lceil N_{\\text{fins},p,\\text{raw}} \\rceil = \\lceil 15.467 \\rceil = 16\n$$\n然后我们根据偶数整数约束对此进行检查。计算出的值 $16$ 是一个偶数，因此此约束也得到满足。$p$ 型器件的最小可行鳍数为：\n$$\nN_{\\text{fins},p} = 16\n$$\n关于共享鳍间距 $P_{\\text{fin}}$ 和共线对齐的约束是版图层面的细节，它们确认了 CMOS 逆变器的标准单栅、双阱结构，但除了已经考虑的因素外，它们没有对鳍数量施加额外的数值约束。每个器件的最小鳍数是独立计算的。\n\n最后，逆变器的总鳍数 $N_{\\text{total}}$ 是 $n$ 型和 $p$ 型晶体管的鳍数之和。\n$$\nN_{\\text{total}} = N_{\\text{fins},n} + N_{\\text{fins},p} = 8 + 16 = 24\n$$\n这是满足所有给定的电气尺寸和物理版图约束的最小总鳍数。",
            "answer": "$$\n\\boxed{24}\n$$"
        },
        {
            "introduction": "棍状图不仅仅是拓扑草图，它还为分析电路性能提供了关键信息。本练习将版图表示（如互连线长度差异）与电路的动态行为联系起来，要求您计算信号到达时间的偏斜（skew），并分析其如何导致数字逻辑门中出现动态冒险或“毛刺”（glitch）。",
            "id": "4278438",
            "problem": "一个互补金属氧化物半导体（CMOS）双输入与非门（NAND gate）在一个电子设计自动化（EDA）环境中使用棍状图进行版图设计。该棍状图显示了从前级反相器到两个门输入（标记为 $A$ 和 $B$）的最小宽度 Metal1 走线。由于棍状图表示的是相对拓扑和最小宽度导线，假设两个输入互连都是宽度为 $w$、横截面堆叠相同但长度不等的均匀 Metal1 导线，长度分别为 $L_{A}$ 和 $L_{B}$。两个输入的反相器驱动是相同的。假设互连和器件具有以下物理上合理的参数：\n- Metal1 宽度：$w = 0.5\\ \\mu\\mathrm{m}$。\n- Metal1 方块电阻：$R_{\\mathrm{sheet}} = 0.08\\ \\Omega/\\square$，意味着单位长度电阻为 $r = R_{\\mathrm{sheet}}/w$。\n- Metal1 对衬底和相邻线路的单位长度电容：$c = 0.2\\ \\mathrm{fF}/\\mu\\mathrm{m}$。\n- 驱动器等效线性电阻（前级反相器在上升跃迁期间的主要源电阻）：$R_{\\mathrm{drv}} = 500\\ \\Omega$。\n- NAND2 输入端的每个输入的总栅极电容（一个输入所连接的 n 沟道和 p 沟道晶体管的栅极电容之和）：$C_{g} = 2.5\\ \\mathrm{fF}$。\n- 从驱动器到相应 NAND 输入的互连长度：$L_{A} = 800\\ \\mu\\mathrm{m}$ 和 $L_{B} = 200\\ \\mu\\mathrm{m}$。\n\n将每个输入路径建模为一个由源电阻 $R_{\\mathrm{drv}}$ 驱动的阻容（RC）树，该树驱动一个长度为 $L$、单位参数为 $r$ 和 $c$ 的均匀分布 RC 线，并以集总输入栅极电容 $C_{g}$ 端接。从 RC 网络延迟作为其脉冲响应一阶矩的基本原理出发，并使用经过充分验证的 Elmore 延迟近似法处理均匀分布互连加集总负载的情况，推导出每条路径末端的到达时间，并计算定义为 $\\Delta t \\equiv t_{A} - t_{B}$ 的输入到达时间偏移。\n\n以皮秒为单位表示最终偏移 $\\Delta t$，并将您的数值答案四舍五入到三位有效数字。\n\n最后，根据您计算出的 $\\Delta t$，定性讨论当输入 $A$ 和 $B$ 在相对于门固有延迟的短时间内向相反方向跃迁时，这种偏移如何在 NAND2 输出端引起动态冒险（毛刺）。您的讨论应基于静态 CMOS 中上拉和下拉网络的物理行为，并且不应引用简化公式。",
            "solution": "本问题将通过以下步骤解决：首先验证其前提条件，然后为指定的电路拓扑推导 Elmore 延迟，计算两个输入的到达时间，计算它们的差值（偏移），最后讨论该偏移对电路行为的影响。\n\n问题验证\n\n步骤 1：提取已知条件\n逐字给出的已知条件如下：\n- 电路元件：互补金属氧化物半导体（$CMOS$）双输入与非门（$NAND2$）。\n- 互连层：Metal1（$M1$）。\n- Metal1 宽度：$w = 0.5\\ \\mu\\mathrm{m}$。\n- Metal1 方块电阻：$R_{\\mathrm{sheet}} = 0.08\\ \\Omega/\\square$。\n- Metal1 单位长度电容：$c = 0.2\\ \\mathrm{fF}/\\mu\\mathrm{m}$。\n- 驱动器等效线性电阻：$R_{\\mathrm{drv}} = 500\\ \\Omega$。\n- 每个输入的总栅极电容：$C_{g} = 2.5\\ \\mathrm{fF}$。\n- 互连长度：$L_{A} = 800\\ \\mu\\mathrm{m}$ 和 $L_{B} = 200\\ \\mu\\mathrm{m}$。\n- 模型：一个由源电阻（$R_{\\mathrm{drv}}$）驱动的阻容（$RC$）树，该树驱动一个长度为 $L$、单位参数为 $r$ 和 $c$ 的均匀分布 $RC$ 线，并以集总电容（$C_g$）端接。\n- 目标 1：使用 Elmore 延迟近似法推导每条路径末端的到达时间（$t_A, t_B$）。\n- 目标 2：计算输入到达时间偏移 $\\Delta t \\equiv t_{A} - t_{B}$，单位为皮秒，并四舍五入到三位有效数字。\n- 目标 3：定性讨论计算出的偏移 $\\Delta t$ 如何在 $NAND2$ 输出端引起动态冒险（毛刺）。\n\n步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据，是超大规模集成（$VLSI$）设计和电子设计自动化（$EDA$）中关于互连延迟分析的一个标准练习。其物理模型（一个带有驱动电阻和电容负载的分布式 $RC$ 线）和分析方法（Elmore 延迟）是该领域的基本概念。给定的参数（$w, R_{\\mathrm{sheet}}, c, R_{\\mathrm{drv}}, C_g, L_{A}, L_{B}$）对于微米或亚微米 $CMOS$ 技术节点是物理上合理的。该问题提法明确，提供了计算唯一答案所需的所有信息。它不包含任何矛盾，语言客观而精确。所要求的定性讨论是对一种常见数字逻辑现象（冒险）的标准分析。因此，该问题被认为是有效的。\n\n步骤 3：结论与行动\n问题有效。将提供完整解答。\n\n解题推导\n\n首先，我们为指定的网络模型推导 Elmore 延迟的一般表达式。在一个 $RC$ 树中，节点 $i$ 的 Elmore 延迟由 $\\tau_i = \\sum_{k} R_{ik} C_k$ 给出，其中总和遍及网络中的所有电容器 $C_k$，而 $R_{ik}$ 是从电压源到节点 $i$ 的路径中与到电容器 $C_k$ 的路径公共部分的电阻。\n\n在我们的模型中，输出节点位于互连的末端，距离驱动器为 $L$。该网络由一个源电阻 $R_{\\mathrm{drv}}$、一个总电阻为 $R_{\\mathrm{line}} = rL$ 且总电容为 $C_{\\mathrm{line}} = cL$ 的分布式 $RC$ 线，以及一个集总负载电容 $C_g$ 组成。单位长度电阻为 $r = R_{\\mathrm{sheet}}/w$。\n\n我们可以通过将分布式线路电容和集总负载电容的贡献相加来求得总延迟。\n\n1.  来自集总负载电容 $C_g$ 的贡献：电容器 $C_g$ 位于线路的末端（$x=L$）。从源到 $C_g$ 的整个电阻路径与到输出节点的路径是公共的。该电阻为 $R_{\\mathrm{path}} = R_{\\mathrm{drv}} + rL$。因此，延迟贡献为 $(R_{\\mathrm{drv}} + rL)C_g$。\n\n2.  来自分布式线路电容的贡献：考虑距离驱动器 $x$ 位置处一个长度为 $dx$ 的无穷小线段。该线段的电容为 $dC = c \\cdot dx$。从源到这个无穷小电容器的电阻路径为 $R_{sx} = R_{\\mathrm{drv}} + rx$。这条完整路径与到 $x=L$ 处输出节点的路径是公共的。因此，来自这个无穷小电容的延迟贡献是 $R_{sx} \\cdot dC = (R_{\\mathrm{drv}} + rx)c \\cdot dx$。为了求得整条线路的总贡献，我们将此表达式从 $x=0$ 积分到 $x=L$：\n$$ \\int_0^L (R_{\\mathrm{drv}} + rx)c \\cdot dx = c \\int_0^L (R_{\\mathrm{drv}} + rx)dx = c \\left[ R_{\\mathrm{drv}}x + \\frac{1}{2}rx^2 \\right]_0^L = c R_{\\mathrm{drv}}L + \\frac{1}{2}rcL^2 $$\n\n互连末端的总 Elmore 延迟 $t$ 是这两个贡献之和：\n$$ t = (R_{\\mathrm{drv}} + rL)C_g + cR_{\\mathrm{drv}}L + \\frac{1}{2}rcL^2 $$\n这是我们将用于计算的公式。\n\n数值计算\n\n首先，我们计算单位长度电阻 $r$：\n$$ r = \\frac{R_{\\mathrm{sheet}}}{w} = \\frac{0.08\\ \\Omega}{0.5\\ \\mu\\mathrm{m}} = 0.16\\ \\Omega/\\mu\\mathrm{m} $$\n\n现在，我们将延迟公式应用于路径 A（$L_A = 800\\ \\mu\\mathrm{m}$）和路径 B（$L_B = 200\\ \\mu\\mathrm{m}$）。我们将使用 $\\Omega$、$\\mathrm{fF}$ 和 $\\mu\\mathrm{m}$ 作为单位。得到的时间单位将是 $\\Omega \\cdot \\mathrm{fF} = 10^{-15}\\ \\mathrm{s} = 1\\ \\mathrm{fs} = 10^{-3}\\ \\mathrm{ps}$。\n\n到达时间 $t_A$ 的计算：\n对于路径 A，$L_A = 800\\ \\mu\\mathrm{m}$。\n$$ t_A = (R_{\\mathrm{drv}} + rL_A)C_g + cR_{\\mathrm{drv}}L_A + \\frac{1}{2}rcL_A^2 $$\n代入数值：\n$$ t_A = (500\\ \\Omega + (0.16\\ \\Omega/\\mu\\mathrm{m})(800\\ \\mu\\mathrm{m}))(2.5\\ \\mathrm{fF}) + (0.2\\ \\mathrm{fF}/\\mu\\mathrm{m})(500\\ \\Omega)(800\\ \\mu\\mathrm{m}) + \\frac{1}{2}(0.16\\ \\Omega/\\mu\\mathrm{m})(0.2\\ \\mathrm{fF}/\\mu\\mathrm{m})(800\\ \\mu\\mathrm{m})^2 $$\n$$ t_A = (500 + 128)\\ \\Omega \\cdot 2.5\\ \\mathrm{fF} + (0.2 \\cdot 500 \\cdot 800)\\ \\Omega\\cdot\\mathrm{fF} + \\frac{1}{2}(0.16 \\cdot 0.2 \\cdot 800^2)\\ \\Omega\\cdot\\mathrm{fF} $$\n$$ t_A = (628)(2.5) + 80000 + (0.016)(640000) $$\n$$ t_A = 1570 + 80000 + 10240 $$\n$$ t_A = 91810\\ \\Omega\\cdot\\mathrm{fF} = 91810 \\times 10^{-3}\\ \\mathrm{ps} = 91.81\\ \\mathrm{ps} $$\n\n到达时间 $t_B$ 的计算：\n对于路径 B，$L_B = 200\\ \\mu\\mathrm{m}$。\n$$ t_B = (R_{\\mathrm{drv}} + rL_B)C_g + cR_{\\mathrm{drv}}L_B + \\frac{1}{2}rcL_B^2 $$\n代入数值：\n$$ t_B = (500\\ \\Omega + (0.16\\ \\Omega/\\mu\\mathrm{m})(200\\ \\mu\\mathrm{m}))(2.5\\ \\mathrm{fF}) + (0.2\\ \\mathrm{fF}/\\mu\\mathrm{m})(500\\ \\Omega)(200\\ \\mu\\mathrm{m}) + \\frac{1}{2}(0.16\\ \\Omega/\\mu\\mathrm{m})(0.2\\ \\mathrm{fF}/\\mu\\mathrm{m})(200\\ \\mu\\mathrm{m})^2 $$\n$$ t_B = (500 + 32)\\ \\Omega \\cdot 2.5\\ \\mathrm{fF} + (0.2 \\cdot 500 \\cdot 200)\\ \\Omega\\cdot\\mathrm{fF} + \\frac{1}{2}(0.16 \\cdot 0.2 \\cdot 200^2)\\ \\Omega\\cdot\\mathrm{fF} $$\n$$ t_B = (532)(2.5) + 20000 + (0.016)(40000) $$\n$$ t_B = 1330 + 20000 + 640 $$\n$$ t_B = 21970\\ \\Omega\\cdot\\mathrm{fF} = 21970 \\times 10^{-3}\\ \\mathrm{ps} = 21.97\\ \\mathrm{ps} $$\n\n输入到达时间偏移 $\\Delta t$ 的计算：\n偏移定义为 $\\Delta t = t_A - t_B$。\n$$ \\Delta t = 91.81\\ \\mathrm{ps} - 21.97\\ \\mathrm{ps} = 69.84\\ \\mathrm{ps} $$\n四舍五入到三位有效数字，我们得到：\n$$ \\Delta t \\approx 69.8\\ \\mathrm{ps} $$\n\n动态冒险的定性讨论\n\n当多个输入同时变化，但由于传播延迟不等，这些变化在不同时间到达逻辑门的内部晶体管时，其输出端就可能出现动态冒险或称毛刺。计算出的偏移 $\\Delta t = 69.8\\ \\mathrm{ps}$ 是显著的，并可能在 $NAND2$ 门中引起此类冒险。\n\n让我们分析一个特定的输入跃迁，该跃迁本应产生恒定的输出，但由于偏移的存在可能不会。逻辑函数为 $Y = \\overline{A \\cdot B}$。当输出本应保持在逻辑“1”，但瞬间降至“0”时，就会发生静态 1 型冒险。对于像 $(A,B)$ 从 $(1,0)$ 变为 $(0,1)$ 这样的输入变化，就可能发生这种情况。\n- 理想情况（无偏移）：初始状态为 $A=1, B=0$，所以 $Y=\\overline{1 \\cdot 0} = \\overline{0} = 1$。最终状态为 $A=0, B=1$，所以 $Y=\\overline{0 \\cdot 1} = \\overline{0} = 1$。输出 $Y$ 应保持高电平。\n\n- 实际情况（有偏移 $t_A > t_B$）：\n一个 $CMOS$ $NAND2$ 门的物理结构由一个上拉网络（$PUN$）和一个下拉网络（$PDN$）组成。上拉网络包含两个并联的 p 沟道（$PMOS$）晶体管，连接在输出 $Y$ 和电源电压 $V_{DD}$ 之间；下拉网络包含两个串联的 n 沟道（$NMOS$）晶体管，连接在 $Y$ 和地（$GND$）之间。\n让我们追踪在跃迁 $(A, B): (1,0) \\to (0,1)$ 期间晶体管的状态，假设驱动器输出端的信号在时间 $t=0$ 时发生变化。由于互连延迟，门输入 $B$ 处的信号将在 $t \\approx t_B$ 时跃迁，而输入 $A$ 处的信号将在 $t \\approx t_A$ 时跃迁。\n\n1.  时间 $t  t_B$：门输入为 $(A_g, B_g) = (1,0)$。\n    - $PUN$：$A_g=1$ 对应的 $PMOS$ 关断。$B_g=0$ 对应的 $PMOS$ 导通。由于它们是并联的，$PUN$ 导通，将 $Y$ 拉至 $V_{DD}$（逻辑 1）。\n    - $PDN$：$A_g=1$ 对应的 $NMOS$ 导通。$B_g=0$ 对应的 $NMOS$ 关断。由于它们是串联的，$PDN$ 关断。\n    - 输出 $Y = 1$。\n\n2.  时间 $t_B \\le t  t_A$：较快的信号 $B$ 已经到达，但 $A$ 还没有。门输入为 $(A_g, B_g) = (1,1)$。\n    - $PUN$：$A_g=1$ 对应的 $PMOS$ 关断。$B_g=1$ 对应的 $PMOS$ 关断。此时 $PUN$ 关断。\n    - $PDN$：$A_g=1$ 对应的 $NMOS$ 导通。$B_g=1$ 对应的 $NMOS$ 导通。此时 $PDN$ 导通，形成一条从 $Y$到 $GND$ 的导电通路。\n    - 在此时间间隔内，$PUN$ 断开，$PDN$ 闭合。输出节点 $Y$ 向 $GND$ 放电。输出电压下降，产生一个朝向逻辑 0 的毛刺。\n\n3.  时间 $t \\ge t_A$：较慢的信号 $A$ 现已到达。门输入为 $(A_g, B_g) = (0,1)$。\n    - $PUN$：$A_g=0$ 对应的 $PMOS$ 导通。$B_g=1$ 对应的 $PMOS$ 关断。$PUN$ 导通，将 $Y$ 拉回至 $V_{DD}$（逻辑 1）。\n    - $PDN$：$A_g=0$ 对应的 $NMOS$ 关断。$B_g=1$ 对应的 $NMOS$ 导通。$PDN$ 关断。\n    - 输出 $Y = 1$。\n\n输出 $Y$ 的整体行为是一个 $1 \\to 0 \\to 1$ 的脉冲，即一个毛刺。这个毛刺的持续时间约等于偏移 $\\Delta t = t_A - t_B$。如果 $\\Delta t$ 大于门的固有惯性延迟，这个毛刺将是一个全幅电压降，并可能传播到后续的逻辑级，有可能在时序电路（如锁存器或触发器）中引起错误的状态变化。计算出的 $69.8\\ \\mathrm{ps}$ 的偏移在现代高速设计中占据了时钟周期的相当一部分，足以引起这种有害的毛刺。",
            "answer": "$$\n\\boxed{69.8}\n$$"
        }
    ]
}
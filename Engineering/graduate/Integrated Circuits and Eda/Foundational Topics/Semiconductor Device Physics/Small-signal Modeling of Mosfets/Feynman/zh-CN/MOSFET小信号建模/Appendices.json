{
    "hands_on_practices": [
        {
            "introduction": "在深入研究复杂的放大器电路之前，我们首先需要从第一性原理出发，建立对小信号参数的直观理解。本练习  将引导你回顾 MOSFET 在三极管区工作的基本物理模型，从沟道电荷和载流子漂移出发，推导出其小信号漏源电导 $g_{ds}$。通过这个推导，你将能清晰地看到小信号电阻 $r_{sd}$ 是如何依赖于偏置电压和器件尺寸的，从而为后续更复杂的模型分析打下坚实的物理基础。",
            "id": "4298907",
            "problem": "考虑一个在集成电路的电子设计自动化（EDA）背景下，于三极管区工作的长沟道n沟道金属-氧化物-半导体场效应晶体管（MOSFET）。该晶体管在缓变沟道近似下进行分析。假设为低电场工作，迁移率恒定，并忽略速度饱和、沟道长度调制和体效应。设单位面积的栅氧化层电容为$C_{ox}$，电子迁移率为$\\mu_{n}$，器件宽度为$W$，器件长度为$L$，栅源电压为$V_{GS}$，漏源电压为$V_{DS}$，阈值电压为$V_{TH}$。沟道电势$V(x)$从源极（$x=0$）到漏极（$x=L$）测量，边界条件为$V(0)=0$和$V(L)=V_{DS}$。沿沟道的单位面积反型层电荷由$q(x)=C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$给出（$0 \\leq x \\leq L$），载流子漂移速度为$v(x)=\\mu_{n}E(x)$，电场为$E(x)=-\\frac{dV(x)}{dx}$。漏极电流为$I_{D}=W\\,q(x)\\,v(x)$，在稳态下沿沟道恒定。\n\n仅从这些关系和定义出发，推导在三极管区某一偏置点的小信号源漏电导，其定义为$g_{sd}=\\left.\\frac{\\partial I_{D}}{\\partial V_{DS}}\\right|_{V_{GS},\\,V_{TH},\\,W,\\,L,\\,\\mu_{n},\\,C_{ox}}$，并由此获得增量源漏电阻$r_{sd}=g_{sd}^{-1}$的闭式解析表达式，该表达式用$\\mu_{n}$、$C_{ox}$、$W$、$L$、$V_{GS}$、$V_{TH}$和$V_{DS}$表示。简要讨论$r_{sd}$如何依赖于偏置电压$V_{GS}$和$V_{DS}$以及几何比$W/L$。将你的最终答案表示为单一的解析表达式；不包含单位。",
            "solution": "用户希望我解决以下问题：\n考虑一个在集成电路的电子设计自动化（EDA）背景下，于三极管区工作的长沟道n沟道金属-氧化物-半导体场效应晶体管（MOSFET）。该晶体管在缓变沟道近似下进行分析。假设为低电场工作，迁移率恒定，并忽略速度饱和、沟道长度调制和体效应。设单位面积的栅氧化层电容为$C_{ox}$，电子迁移率为$\\mu_{n}$，器件宽度为$W$，器件长度为$L$，栅源电压为$V_{GS}$，漏源电压为$V_{DS}$，阈值电压为$V_{TH}$。沟道电势$V(x)$从源极（$x=0$）到漏极（$x=L$）测量，边界条件为$V(0)=0$和$V(L)=V_{DS}$。沿沟道的单位面积反型层电荷由$q(x)=C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$给出（$0 \\leq x \\leq L$），载流子漂移速度为$v(x)=\\mu_{n}E(x)$，电场为$E(x)=-\\frac{dV(x)}{dx}$。漏极电流为$I_{D}=W\\,q(x)\\,v(x)$，在稳态下沿沟道恒定。\n\n仅从这些关系和定义出发，推导在三极管区某一偏置点的小信号源漏电导，其定义为$g_{sd}=\\left.\\frac{\\partial I_{D}}{\\partial V_{DS}}\\right|_{V_{GS},\\,V_{TH},\\,W,\\,L,\\,\\mu_{n},\\,C_{ox}}$，并由此获得增量源漏电阻$r_{sd}=g_{sd}^{-1}$的闭式解析表达式，该表达式用$\\mu_{n}$、$C_{ox}$、$W$、$L$、$V_{GS}$、$V_{TH}$和$V_{DS}$表示。简要讨论$r_{sd}$如何依赖于偏置电压$V_{GS}$和$V_{DS}$以及几何比$W/L$。将你的最终答案表示为单一的解析表达式；不包含单位。\n\n## 问题验证\n\n### 步骤1：提取已知条件\n- **器件类型**：工作在三极管区的长沟道n沟道MOSFET。\n- **模型**：缓变沟道近似。\n- **假设**：低电场工作，迁移率($\\mu_n$)恒定，无速度饱和，无沟道长度调制，无体效应。\n- **参数**：单位面积栅氧化层电容($C_{ox}$)，电子迁移率($\\mu_{n}$)，器件宽度($W$)，器件长度($L$)，栅源电压($V_{GS}$)，漏源电压($V_{DS}$)，阈值电压($V_{TH}$)。\n- **函数和变量**：沟道电势$V(x)$（$x \\in [0, L]$），电场$E(x)$，漏极电流$I_D$。\n- **边界条件**：$V(0)=0$, $V(L)=V_{DS}$。\n- **基本关系**：\n    1. 单位面积反型层电荷：$q(x)=C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$。\n    2. 载流子漂移速度：$v(x)=\\mu_{n}E(x)$。\n    3. 电场：$E(x)=-\\frac{dV(x)}{dx}$。\n    4. 漏极电流：$I_{D}=W\\,q(x)\\,v(x)$，沿沟道恒定。\n- **目标**：推导小信号源漏电导$g_{sd}=\\left.\\frac{\\partial I_{D}}{\\partial V_{DS}}\\right|_{V_{GS},...}$和增量源漏电阻$r_{sd}=g_{sd}^{-1}$。讨论其相关性。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据**：该问题坚实地基于MOSFET的标准一阶物理模型（缓变沟道近似）。所有给定的方程和假设都是半导体器件物理和集成电路理论的基石。\n- **适定性**：该问题是完全指定的。它提供了推导漏极电流特性以及随后的小信号电导所需的所有起始方程、边界条件和定义。目标陈述清晰。存在一个唯一的、稳定的解。\n- **客观性**：问题陈述使用精确、客观和标准的技术语言表达。它没有歧义或主观论断。\n\n### 缺陷清单：\n1. **科学或事实不准确**：无缺陷。该模型是一个标准的、正确的近似。\n2. **无法形式化或不相关**：无缺陷。该问题是指定领域的核心课题。\n3. **设置不完整或矛盾**：问题是完整的且自洽的。注意：给定关系式$I_{D}=W\\,q(x)\\,v(x)$、$v(x)=\\mu_{n}E(x)$和$E(x)=-\\frac{dV(x)}{dx}$的组合导致$I_D = -W \\mu_n C_{ox} (V_{GS}-V_{TH}-V(x)) \\frac{dV}{dx}$。由于右侧除前导负号外的所有项均为正，这将意味着对于正的$V_{DS}$，电流$I_D$为负，这与惯例相矛盾。n沟道器件的标准物理推导是基于电子电流，$I_D = W Q_{inv}(x) v_{drift}(x)$，其中$Q_{inv}(x) = C_{ox}(V_{GS}-V_{TH}-V(x))$是反型层电荷的大小，$v_{drift}(x) = \\mu_n |\\vec{E}| = \\mu_n \\frac{dV}{dx}$是电子漂移速度。这导致$I_D = W \\mu_n C_{ox} (V_{GS}-V_{TH}-V(x)) \\frac{dV}{dx}$。给定关系式中的这种微小符号不一致是文献中常见的简写，并不影响问题的物理基础或其可解性。我们将使用与问题意图一致的物理上正确的公式继续进行。\n4. **不切实际或不可行**：无缺陷。长沟道模型是一个有效且广泛使用的近似。\n5. **不适定或结构不良**：无缺陷。\n6. **伪深刻、琐碎或同义反复**：无缺陷。这是一个基础且不平凡的推导。\n7. **超出科学可验证范围**：无缺陷。结果是一个标准的、可验证的公式。\n\n### 步骤3：结论与行动\n问题是**有效的**。将开始解答过程。\n\n## 解答\n\n目标是推导在三极管区工作的n沟道MOSFET的漏源电阻$r_{sd}$。推导过程始于建立漏极电流$I_D$的表达式。\n\n漏极电流$I_D$是单位时间内流过的总电荷。在沿沟道的位置$x$处，差分电流$dI_D$是由长度为$dx$的沟道段中的可动反型层电荷$dQ_{inv}$的漂移引起的。单位面积的反型层电荷密度的大小由$q(x) = C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$给出。在长度为$dx$、宽度为$W$的段中的总可动电荷为$dQ_{inv} = q(x) \\, W \\, dx$。\n\n电子的漂移速度为$v_n = \\mu_n |\\vec{E}|$。电场$\\vec{E}$从高电势（漏极）指向低电势（源极），因此其沿沟道的分量为$E_x = -\\frac{dV}{dx}$。由于$V(x)$从源极的$0$增加到漏极的$V_{DS}$，$\\frac{dV}{dx}$为正，因此$E_x$为负。漂移速率为$v_n = \\mu_n |E_x| = \\mu_n \\frac{dV}{dx}$。\n\n电流是单位长度电荷$Wq(x)$与载流子漂移速率$v_n$的乘积。\n$$I_D = W q(x) v_n$$\n代入$q(x)$和$v_n$的表达式：\n$$I_D = W \\left[ C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right) \\right] \\left( \\mu_n \\frac{dV(x)}{dx} \\right)$$\n在稳态下，电流$I_D$在沿沟道的任何点$x$处都必须是恒定的。我们可以重排这个微分方程来分离变量$x$和$V$。\n$$I_D \\, dx = W \\mu_n C_{ox} \\left(V_{GS}-V_{TH}-V\\right) dV$$\n为求得总电流，我们将此表达式沿整个沟道长度进行积分。位置$x$的范围从$0$到$L$，而沟道电势$V(x)$的范围从$V(0)=0$到$V(L)=V_{DS}$。\n$$\\int_0^L I_D \\, dx = \\int_0^{V_{DS}} W \\mu_n C_{ox} \\left(V_{GS}-V_{TH}-V\\right) dV$$\n由于$I_D$、$W$、$\\mu_n$和$C_{ox}$相对于积分变量是常数：\n$$I_D \\int_0^L dx = W \\mu_n C_{ox} \\int_0^{V_{DS}} \\left(V_{GS}-V_{TH}-V\\right) dV$$\n进行积分：\n$$I_D [x]_0^L = W \\mu_n C_{ox} \\left[ (V_{GS}-V_{TH})V - \\frac{V^2}{2} \\right]_0^{V_{DS}}$$\n$$I_D (L-0) = W \\mu_n C_{ox} \\left( \\left( (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right) - (0) \\right)$$\n求解$I_D$：\n$$I_D = \\mu_n C_{ox} \\frac{W}{L} \\left[ (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right]$$\n这是三极管区漏极电流的标准表达式，适用于$0 \\le V_{DS} \\le V_{GS}-V_{TH}$。\n\n接下来，我们通过对$I_D$关于$V_{DS}$求偏导来找到小信号源漏电导$g_{sd}$，并保持所有其他参数不变。\n$$g_{sd} = \\frac{\\partial I_{D}}{\\partial V_{DS}} = \\frac{\\partial}{\\partial V_{DS}} \\left\\{ \\mu_n C_{ox} \\frac{W}{L} \\left[ (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right] \\right\\}$$\n项$\\mu_n C_{ox} \\frac{W}{L}$是一个常数因子。\n$$g_{sd} = \\mu_n C_{ox} \\frac{W}{L} \\frac{\\partial}{\\partial V_{DS}} \\left[ (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right]$$\n$$g_{sd} = \\mu_n C_{ox} \\frac{W}{L} \\left[ (V_{GS}-V_{TH}) \\cdot 1 - \\frac{1}{2}(2V_{DS}) \\right]$$\n$$g_{sd} = \\mu_n C_{ox} \\frac{W}{L} \\left( V_{GS}-V_{TH}-V_{DS} \\right)$$\n增量源漏电阻$r_{sd}$是电导$g_{sd}$的倒数。\n$$r_{sd} = \\frac{1}{g_{sd}} = \\frac{1}{\\mu_n C_{ox} \\frac{W}{L} \\left( V_{GS}-V_{TH}-V_{DS} \\right)}$$\n这就是小信号电阻的最终闭式解析表达式。\n\n相关性讨论：\n1.  **对$V_{GS}$的依赖性**：电阻$r_{sd}$与项$V_{GS}-V_{TH}-V_{DS}$成反比。随着栅源电压$V_{GS}$的增加，过驱动电压$V_{GS}-V_{TH}$也增加。这会在沟道中感应出更强的反型层（更多的自由载流子），使沟道更具导电性。因此，电阻$r_{sd}$随着$V_{GS}$的增加而减小。\n\n2.  **对$V_{DS}$的依赖性**：随着漏源电压$V_{DS}$的增加，项$V_{GS}-V_{TH}-V_{DS}$减小。这导致分母变小，从而电阻$r_{sd}$增大。这是因为更大的$V_{DS}$减小了靠近漏极端栅极到沟道的电压降，使反型层变窄并“夹断”沟道。靠近漏极的电荷密度降低，增加了整个沟道的电阻。\n\n3.  **对$W/L$的依赖性**：电阻$r_{sd}$与几何宽高比$W/L$成反比。增加沟道宽度$W$为电流提供了更多的并行路径，从而减小了电阻。增加沟道长度$L$迫使载流子行进更长的距离，从而增加了电阻。这种行为类似于经典电阻，其阻值为$R = \\rho \\frac{L}{A}$，其中$W$与横截面积$A$相关。",
            "answer": "$$\\boxed{\\frac{1}{\\mu_{n} C_{ox} \\frac{W}{L} \\left(V_{GS} - V_{TH} - V_{DS}\\right)}}$$"
        },
        {
            "introduction": "在模拟电路设计中，正确地确定晶体管的直流工作点是进行小信号分析的前提。本练习  将一个带有源极负反馈的 NMOS 晶体管作为对象，要求你在考虑体效应和沟道长度调制等二阶效应的情况下，建立并求解获得目标漏极电流的完整非线性方程组。这个过程不仅能加深你对直流偏置与器件模型之间复杂相互作用的理解，还能让你熟练掌握在特定偏置点上计算关键小信号参数 $g_m$ 和 $r_o$ 的标准方法。",
            "id": "4298879",
            "problem": "考虑一个长沟道增强型n沟道金属氧化物半导体场效应晶体管 (NMOSFET)，该晶体管由直流 (DC) 电源和电阻负载偏置。源极通过源极电阻 $R_S$ 接地，漏极通过漏极电阻 $R_D$ 连接到电源电压 $V_{DD}$，衬底（体）接地，栅极由一个理想的直流源 $V_G$ 驱动，可以选择该直流源来设定所需的工作点。晶体管的参数包括电子迁移率与单位面积栅氧电容的乘积 $\\mu_n C_{ox}$、宽长比 $W/L$、零偏置阈值电压 $V_{TH0}$、体效应系数 $\\gamma$、表面势 $\\phi_F$ 以及沟道长度调制参数 $\\lambda$。考虑体效应的阈值电压模型为\n$$\nV_{TH}(V_{SB}) \\;=\\; V_{TH0} \\;+\\; \\gamma\\!\\left(\\sqrt{2\\phi_F + V_{SB}} \\;-\\; \\sqrt{2\\phi_F}\\right),\n$$\n其中 $V_{SB}$ 是源-体电压。饱和区的漏极电流由经过充分检验的、考虑沟道长度调制的平方律模型描述：\n$$\nI_D \\;=\\; \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big),\n$$\n该模型在饱和区条件下有效。小信号参数根据第一性原理定义为 $g_m \\equiv \\left.\\frac{\\partial I_D}{\\partial V_{GS}}\\right|_{V_{DS},V_{BS}}$ 和 $r_o \\equiv \\left.\\left(\\frac{\\partial I_D}{\\partial V_{DS}}\\right)^{-1}\\right|_{V_{GS},V_{BS}}$，其中 $V_{BS}$ 是体-源电压。\n\n你的任务是通过适当地选择栅极电压 $V_G$ 来达到一个指定的目标漏极电流 $I_D^\\star$，并找到与电路和器件方程一致的相应直流偏置点 $(V_{GS},V_{DS})$，同时确保工作在饱和区。\n\n哪个选项正确地列出了求解产生 $I_D = I_D^\\star$ 的直流偏置点 $(V_{GS},V_{DS})$ 的全套非线性方程组，以偏置量形式陈述了正确的饱和条件，并给出了在该偏置点下正确的一阶小信号参数 $g_m$ 和 $r_o$？\n\nA. 使用 $V_{SB} = V_S - V_B$ 且 $V_B = 0$，强制 $V_S = I_D^\\star R_S$，$V_D = V_{DD} - I_D^\\star R_D$，因此 $V_{DS} = V_D - V_S$ 且 $V_{GS} = V_G - V_S$。将\n$\nI_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,(1 + \\lambda V_{DS})\n$\n与这些电路关系联立求解，并要求饱和条件为\n$\nV_{DS} \\,\\ge\\, V_{GS} - V_{TH}(V_{SB}).\n$\n然后，在得到的偏置点，\n$\ng_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)\\,(1 + \\lambda V_{DS}),\n$\n并且\n$\nr_o = \\left[\\frac{\\partial I_D}{\\partial V_{DS}}\\right]^{-1} = \\left[\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,\\lambda\\right]^{-1} = \\frac{1 + \\lambda V_{DS}}{\\lambda\\,I_D^\\star}.\n$\n\nB. 将 $V_{TH}$ 视为常数等于 $V_{TH0}$ 并忽略沟道长度调制。强制 $V_S = I_D^\\star R_S$，$V_D = V_{DD} - I_D^\\star R_D$，$V_{GS} = V_G - V_S$，并求解\n$\nI_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH0}\\big)^2\n$\n，饱和条件通过\n$\nV_{DS} \\,\\ge\\, V_{TH0}\n$\n来检验。然后使用紧凑的小信号公式\n$\ng_m = \\frac{2 I_D^\\star}{V_{GS} - V_{TH0}}, \\quad r_o \\to \\infty.\n$\n\nC. 假设工作在三极管区导通，并设置\n$\nI_D^\\star = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\left[(V_{GS} - V_{TH0})V_{DS} - \\frac{V_{DS}^2}{2}\\right],\n$\n其中 $V_S = I_D^\\star R_S$，$V_D = V_{DD} - I_D^\\star R_D$，且 $V_{GS} = V_G - V_S$。使用饱和条件 $V_{DS} \\le V_{GS} - V_{TH0}$ 和小信号参数\n$\ng_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,V_{DS}, \\quad r_o = \\left[\\mu_n C_{ox}\\,\\frac{W}{L}\\,(V_{GS} - V_{TH0} - V_{DS})\\right]^{-1}.\n$\n\nD. 保留沟道长度调制但忽略体效应，强制 $V_S = I_D^\\star R_S$，$V_D = V_{DD} - I_D^\\star R_D$，$V_{GS} = V_G - V_S$，并求解\n$\nI_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH0}\\big)^2\\,(1 + \\lambda V_{DS}),\n$\n，饱和条件通过\n$\nV_{DS} \\,\\ge\\, V_{GS}\n$\n来检验。然后取\n$\ng_m = \\frac{2 I_D^\\star}{V_{GS} - V_{TH0}}, \\quad r_o = \\frac{1}{\\lambda I_D^\\star}.\n$",
            "solution": "该问题要求为一个给定的、带有源极退化电阻的共源组态 n 沟道 MOSFET，构建其直流偏置方程、饱和条件和小信号参数。\n\n### 第 1 步：问题验证\n\n首先，对问题陈述进行验证。\n\n**1. 提取已知条件：**\n- **电路：** 一个 NMOSFET，其源极通过源极电阻 $R_S$ 接地，漏极通过漏极电阻 $R_D$ 连接到电源 $V_{DD}$，衬底接地 ($V_B=0$)，栅极由直流电压 $V_G$ 驱动。\n- **器件：** 长沟道、增强型 NMOSFET。\n- **参数：** $\\mu_n C_{ox}$、$W/L$、$V_{TH0}$、$\\gamma$、$\\phi_F$、$\\lambda$。\n- **目标：** 在饱和区达到直流漏极电流 $I_D = I_D^\\star$。\n- **阈值电压模型：** $V_{TH}(V_{SB}) = V_{TH0} + \\gamma(\\sqrt{2\\phi_F + V_{SB}} - \\sqrt{2\\phi_F})$，其中 $V_{SB} = V_S - V_B$。\n- **饱和电流模型：** $I_D = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big)$。\n- **小信号参数定义：** $g_m \\equiv \\left.\\frac{\\partial I_D}{\\partial V_{GS}}\\right|_{V_{DS},V_{BS}}$ 和 $r_o \\equiv \\left.\\left(\\frac{\\partial I_D}{\\partial V_{DS}}\\right)^{-1}\\right|_{V_{GS},V_{BS}}$。\n\n**2. 验证：**\n- **科学依据：** 该问题基于标准的、成熟的 MOSFET 模型（平方律、沟道长度调制、体效应）和基本电路理论（基尔霍夫定律）。这些是模拟电子学中的基本原理。该问题在科学上是合理的。\n- **适定性：** 该问题要求为特定的工作点建立控制方程。它提供了所有必要的模型和定义。任务是写下一个方程组，这是一个定义明确的数学问题。\n- **客观性：** 语言技术性强、精确，且不含主观内容。\n\n**3. 结论：**\n问题陈述是有效的。它具有科学依据、适定性和客观性。它提出了一个模拟电路设计中标准的、不平凡的任务。我们可以继续进行求解。\n\n### 第 2 步：推导正确公式\n\n我们将根据所提供的模型推导直流偏置点、饱和条件和小信号参数的方程。\n\n**直流偏置方程：**\n目标是建立漏极电流为 $I_D^\\star$ 的直流工作点。我们应用基尔霍夫定律到电路上，将端点电压与漏极电流联系起来。\n$1$。栅极电流为零 ($I_G=0$)。源极电流等于漏极电流 ($I_S = I_D$)。\n$2$。源极电压 $V_S$ 由流过源极电阻 $R_S$ 的电流决定：\n$$V_S = I_D^\\star R_S$$\n$3$。衬底接地，所以 $V_B = 0$。源-体电压 $V_{SB}$ 为：\n$$V_{SB} = V_S - V_B = I_D^\\star R_S - 0 = I_D^\\star R_S$$\n$4$。漏极电压 $V_D$ 由流过漏极电阻 $R_D$ 的电流决定：\n$$V_D = V_{DD} - I_D^\\star R_D$$\n$5$。漏-源电压 $V_{DS}$ 是漏极和源极电压之差：\n$$V_{DS} = V_D - V_S = (V_{DD} - I_D^\\star R_D) - (I_D^\\star R_S) = V_{DD} - I_D^\\star(R_D + R_S)$$\n$6$。栅极电压 $V_G$ 设定了栅-源电压 $V_{GS}$：\n$$V_{GS} = V_G - V_S = V_G - I_D^\\star R_S$$\n问题陈述 $V_G$ 的选择是为了实现 $I_D^\\star$。\n\n这些从电路中导出的电压必须与漏极电流的器件物理方程一致。因此，求解偏置点 $(V_{GS}, V_{DS})$ 的完整方程组是上述关系式与在 $I_D=I_D^\\star$ 处取值的器件电流方程的组合：\n$$I_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big)$$\n其中 $V_{TH}(V_{SB}) = V_{TH0} + \\gamma(\\sqrt{2\\phi_F + V_{SB}} - \\sqrt{2\\phi_F})$ 并且 $V_{SB}$ 和 $V_{DS}$ 由上面的电路方程给出。\n\n**饱和条件：**\n当沟道在漏极末端被夹断时，NMOSFET 工作在饱和区。这发生在栅-漏电压 $V_{GD}$ 小于阈值电压 $V_{TH}$ 时。\n$$V_{GD}  V_{TH}(V_{SB})$$\n用 $V_{GS}$ 和 $V_{DS}$ 表示 $V_{GD}$：\n$$V_{GS} - V_{DS}  V_{TH}(V_{SB})$$\n重新整理得到标准饱和条件：\n$$V_{DS} > V_{GS} - V_{TH}(V_{SB})$$\n因此，饱和区和三极管区之间的边界是 $V_{DS} = V_{GS} - V_{TH}(V_{SB})$。所以，对于饱和区，我们要求：\n$$V_{DS} \\ge V_{GS} - V_{TH}(V_{SB})$$\n\n**小信号参数：**\n参数 $g_m$ 和 $r_o$ 由直流工作点处的偏导数定义。\n\n- **跨导，$g_m$：**\n$g_m$ 定义为 $g_m \\equiv \\left.\\frac{\\partial I_D}{\\partial V_{GS}}\\right|_{V_{DS},V_{BS}}$。求导时保持 $V_{DS}$ 和 $V_{BS}$ 不变。由于 $V_{SB} = -V_{BS}$，保持 $V_{BS}$ 不变意味着 $V_{SB}$ 也不变，因此 $V_{TH}(V_{SB})$ 在此微分中是常数。\n$$I_D = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big)$$\n$$g_m = \\frac{\\partial}{\\partial V_{GS}} \\left[ \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big) \\right]$$\n$$g_m = \\left(\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\right) \\cdot \\left(2 \\cdot \\big(V_{GS} - V_{TH}\\big)\\right) \\cdot \\big(1 + \\lambda V_{DS}\\big)$$\n$$g_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)\\,\\big(1 + \\lambda V_{DS}\\big)$$\n\n- **输出电阻，$r_o$：**\n$r_o$ 定义为 $r_o \\equiv \\left.\\left(\\frac{\\partial I_D}{\\partial V_{DS}}\\right)^{-1}\\right|_{V_{GS},V_{BS}}$。求导时保持 $V_{GS}$ 和 $V_{BS}$ 不变，所以 $V_{TH}$ 同样是常数。\n$$\\frac{\\partial I_D}{\\partial V_{DS}} = \\frac{\\partial}{\\partial V_{DS}} \\left[ \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big) \\right]$$\n$\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}$ 这一项相对于 $V_{DS}$ 是常数。我们称之为 $I_{D0}$，即没有沟道长度调制时的漏极电流。\n$$\\frac{\\partial I_D}{\\partial V_{DS}} = I_{D0} \\cdot \\frac{\\partial}{\\partial V_{DS}}(1+\\lambda V_{DS}) = I_{D0} \\lambda$$\n从原始电流方程可知，$I_{D0} = \\frac{I_D}{1 + \\lambda V_{DS}}$。将其代回，我们得到：\n$$\\frac{\\partial I_D}{\\partial V_{DS}} = \\frac{\\lambda I_D}{1 + \\lambda V_{DS}}$$\n因此，输出电阻为：\n$$r_o = \\left( \\frac{\\partial I_D}{\\partial V_{DS}} \\right)^{-1} = \\frac{1 + \\lambda V_{DS}}{\\lambda I_D}$$\n在目标偏置点，$I_D = I_D^\\star$。\n\n### 第 3 步：评估选项\n\n让我们根据我们推导的公式来评估每个选项。\n\n**A.**\n- **直流方程：** 该选项正确列出了电路的 KVL/KCL 方程（$V_S = I_D^\\star R_S$ 等），并说明它们必须与完整的器件方程 $I_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,(1 + \\lambda V_{DS})$ 联立求解。这与我们的推导相符。\n- **饱和条件：** 条件给出为 $V_{DS} \\,\\ge\\, V_{GS} - V_{TH}(V_{SB})$。这是正确的。\n- **小信号参数：**\n    - $g_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)\\,(1 + \\lambda V_{DS})$。这是正确的。\n    - 该选项陈述 $r_o = \\left[\\frac{\\partial I_D}{\\partial V_{DS}}\\right]^{-1} = \\left[\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,\\lambda\\right]^{-1} = \\frac{1 + \\lambda V_{DS}}{\\lambda\\,I_D^\\star}$。这是一个正确的等式链。正如我们所推导的，$\\frac{\\partial I_D}{\\partial V_{DS}} = I_{D0}\\lambda$，其中 $I_{D0}$ 是方括号中的项。我们还证明了这可以化简为 $\\frac{1 + \\lambda V_{DS}}{\\lambda\\,I_D^\\star}$。\n整个选项是一致且正确的。\n**结论：正确**\n\n**B.**\n- 该选项忽略了体效应（使用 $V_{TH0}$ 而不是 $V_{TH}(V_{SB})$）和沟道长度调制（$\\lambda=0$）。这与问题陈述相矛盾，问题陈述为这两种效应都提供了参数。\n- 饱和条件被陈述为 $V_{DS} \\,\\ge\\, V_{TH0}$，这是不正确的。该条件比较的是 $V_{DS}$ 和过驱动电压 $V_{GS}-V_{TH}$。\n- 小信号参数基于这些不正确的简化。\n**结论：不正确**\n\n**C.**\n- 该选项假设晶体管处于三极管区，这直接与问题要求在饱和区找到偏置点的要求相矛盾。\n- 因此，所有方程（电流、饱和条件、小信号参数）都与所提问题无关。\n**结论：不正确**\n\n**D.**\n- 该选项通过使用 $V_{TH0}$ 忽略了体效应。这是一个无根据的简化。\n- 饱和条件被陈述为 $V_{DS} \\,\\ge\\, V_{GS}$，这是不正确的。\n- $r_o$ 的表达式是一个近似值（$r_o = \\frac{1}{\\lambda I_D^\\star}$），其精度低于选项 A 中的表达式，仅在 $\\lambda V_{DS} \\ll 1$ 时有效。更重要的是，该选项的其他部分存在根本性缺陷。\n**结论：不正确**\n\n基于详细分析，选项 A 是唯一一个根据所提供的模型和定义正确地阐述了整个问题的选项。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "随着晶体管尺寸不断缩小，经典的“长沟道”模型已不足以精确描述其特性，必须考虑短沟道效应。本练习  聚焦于小信号输出电阻 $r_o$ 这一关键参数，引导你从基本定义出发，推导并对比在长沟道模型和考虑了漏致势垒降低 (DIBL) 效应的短沟道模型下 $r_o$ 的表达式。通过编写程序来量化这两种模型之间的差异，你将直观地认识到 DIBL 是如何显著降低输出电阻的，这对于现代高性能模拟电路的设计至关重要。",
            "id": "4298849",
            "problem": "给定一个工作在饱和区的金属氧化物半导体场效应晶体管 (MOSFET)，要求您在相同的直流偏置下，比较由传统长沟道模型推导的小信号输出电阻与由包含了漏致势垒降低 (DIBL) 效应的短沟道模型推导的小信号输出电阻。您必须从第一性原理推导出计算小信号输出电阻所需的表达式，然后实现一个程序来评估一组测试用例。重点是阐明计算的内容、其有效性的原因，以及如何从基本原理推导得出，而不是依赖于小信号参数的简化公式。\n\n基本原理和定义：\n- 在强反型和饱和区，根据电荷片近似和漂移-扩散输运模型，长沟道MOSFET的漏极电流可以用其几何尺寸和偏置来表示。栅极过驱动电压定义为 $V_{\\mathrm{ov}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH}}$，其中 $V_{\\mathrm{GS}}$ 是栅源电压，$V_{\\mathrm{TH}}$ 是阈值电压。沟道长度调制由系数 $\\lambda$ 表示，该系数解释了有效沟道长度随漏源电压 $V_{\\mathrm{DS}}$ 增加而减小的现象。\n- 短沟道效应通过DIBL改变阈值电压，其一阶近似可用系数 $\\eta$ 描述为随 $V_{\\mathrm{DS}}$ 线性降低。有效阈值电压变为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH0}} - \\eta V_{\\mathrm{DS}}$，其中 $V_{\\mathrm{TH0}}$ 是 $V_{\\mathrm{DS}}$ 为零时的阈值电压。这使得有效栅极过驱动电压增加为 $V_{\\mathrm{ov,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}$。\n- 小信号输出电阻定义为 $r_o = \\left( \\frac{\\partial I_D}{\\partial V_{\\mathrm{DS}}} \\big\\rvert_{\\text{bias}} \\right)^{-1}$，其中 $I_D$ 是漏极电流，偏导数在指定的工作点进行计算。该定义源于电流-电压特性的一般小信号线性化。\n\n基于这些原理，您编写的程序必须：\n1. 在固定阈值电压和沟道长度调制的长沟道假设下，使用饱和区漏极电流的函数形式，其中涉及迁移率 $\\mu$、单位面积的氧化层电容 $C_{\\mathrm{ox}}$、器件宽度 $W$ 和器件长度 $L$。在此背景下，令 $K = \\frac{1}{2} \\mu C_{\\mathrm{ox}} \\frac{W}{L}$，并使用 $V_{\\mathrm{ov}}$ 和 $\\lambda$ 构建 $I_D(V_{\\mathrm{DS}})$。\n2. 在短沟道情况下，使用相同的函数形式，但将固定的阈值电压替换为因DIBL效应而变化的阈值 $V_{\\mathrm{TH,eff}}$，并保持相同的 $\\lambda$ 以分离出DIBL效应。使用 $V_{\\mathrm{ov,eff}}$ 和 $\\lambda$ 推导出 $I_D(V_{\\mathrm{DS}})$。\n3. 直接从第1项和第2项的函数形式，使用乘法法则和链式法则计算 $g_{ds,\\text{long}} = \\frac{\\partial I_{D,\\text{long}}}{\\partial V_{\\mathrm{DS}}}$ 和 $g_{ds,\\text{short}} = \\frac{\\partial I_{D,\\text{short}}}{\\partial V_{\\mathrm{DS}}}$，然后计算 $r_{o,\\text{long}} = \\frac{1}{g_{ds,\\text{long}}}$ 和 $r_{o,\\text{short}} = \\frac{1}{g_{ds,\\text{short}}}$。\n4. 将由DIBL引起的差异量化为相对差异 $\\Delta = \\frac{r_{o,\\text{short}} - r_{o,\\text{long}}}{r_{o,\\text{long}}}$（一个无量纲小数）。由于沟道长度调制参数 $\\lambda$ 在两个模型中保持不变，这可以分离出DIBL对输出电阻降低的贡献。\n\n您的程序必须为以下测试套件计算这些量，并确保饱和条件成立，即在短沟道情况下 $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov,eff}}$，在长沟道情况下 $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov}}$：\n\n- 测试用例1（短沟道，典型强反型）：$\\mu = 0.045 \\ \\mathrm{m^2/(V \\cdot s)}$，$C_{\\mathrm{ox}} = 0.010 \\ \\mathrm{F/m^2}$，$W = 1.0 \\times 10^{-6} \\ \\mathrm{m}$，$L = 1.0 \\times 10^{-7} \\ \\mathrm{m}$，$V_{\\mathrm{GS}} = 0.8 \\ \\mathrm{V}$，$V_{\\mathrm{DS}} = 0.6 \\ \\mathrm{V}$，$V_{\\mathrm{TH0}} = 0.35 \\ \\mathrm{V}$，$\\lambda = 0.10\\,\\mathrm{V}^{-1}$，$\\eta = 0.08 \\ \\mathrm{V/V}$。\n- 测试用例2（近阈值工作）：$\\mu = 0.050 \\ \\mathrm{m^2/(V \\cdot s)}$，$C_{\\mathrm{ox}} = 0.008 \\ \\mathrm{F/m^2}$，$W = 0.5 \\times 10^{-6} \\ \\mathrm{m}$，$L = 0.16 \\times 10^{-6} \\ \\mathrm{m}$，$V_{\\mathrm{GS}} = 0.45 \\ \\mathrm{V}$，$V_{\\mathrm{DS}} = 0.30 \\ \\mathrm{V}$，$V_{\\mathrm{TH0}} = 0.40 \\ \\mathrm{V}$，$\\lambda = 0.06\\,\\mathrm{V}^{-1}$，$\\eta = 0.05 \\ \\mathrm{V/V}$。\n- 测试用例3（极短沟道，最小沟道长度调制）：$\\mu = 0.045 \\ \\mathrm{m^2/(V \\cdot s)}$，$C_{\\mathrm{ox}} = 0.010 \\ \\mathrm{F/m^2}$，$W = 2.0 \\times 10^{-6} \\ \\mathrm{m}$，$L = 60 \\times 10^{-9} \\ \\mathrm{m}$，$V_{\\mathrm{GS}} = 0.90 \\ \\mathrm{V}$，$V_{\\mathrm{DS}} = 0.70 \\ \\mathrm{V}$，$V_{\\mathrm{TH0}} = 0.35 \\ \\mathrm{V}$，$\\lambda = 1.0 \\times 10^{-4}\\,\\mathrm{V}^{-1}$，$\\eta = 0.12 \\ \\mathrm{V/V}$。\n- 测试用例4（无DIBL基线）：$\\mu = 0.050 \\ \\mathrm{m^2/(V \\cdot s)}$，$C_{\\mathrm{ox}} = 0.004 \\ \\mathrm{F/m^2}$，$W = 1.0 \\times 10^{-6} \\ \\mathrm{m}$，$L = 1.0 \\times 10^{-6} \\ \\mathrm{m}$，$V_{\\mathrm{GS}} = 0.70 \\ \\mathrm{V}$，$V_{\\mathrm{DS}} = 0.50 \\ \\mathrm{V}$，$V_{\\mathrm{TH0}} = 0.40 \\ \\mathrm{V}$，$\\lambda = 0.08\\,\\mathrm{V}^{-1}$，$\\eta = 0.00 \\ \\mathrm{V/V}$。\n\n物理单位：\n- 在内部以 $\\mathrm{\\Omega}$ 为单位报告 $r_{o,\\text{long}}$ 和 $r_{o,\\text{short}}$。对于最终输出，仅报告相对差异 $\\Delta$，以小数形式表示，不带单位。\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含四个测试用例的相对差异，形式为用方括号括起来的逗号分隔列表，例如 $[d_1,d_2,d_3,d_4]$，其中每个 $d_i$ 是测试用例 $i$ 的 $\\Delta$ 值，四舍五入到六位小数。\n\n约束和要求：\n- 确保所有测试用例中 $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov}}$ 和 $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov,eff}}$，以使饱和区表达式适用。\n- 最终答案必须是浮点数；不要包含单位或百分号。",
            "solution": "该问题要求对金属氧化物半导体场效应晶体管 (MOSFET) 在两种不同模型下的小信号输出电阻进行比较分析：一种是传统的长沟道模型，另一种是包含了漏致势垒降低 (DIBL) 效应的短沟道模型。目标是从第一性原理推导出必要的表达式，并为一组给定的测试用例计算由DIBL引起的输出电阻的相对差异。所有器件都偏置在饱和区。\n\n假设为平方律行为，n沟道MOSFET在饱和区的漏极电流 $I_D$ 的基本关系式由下式给出：\n$$I_D = \\frac{1}{2} \\mu C_{\\mathrm{ox}} \\frac{W}{L} (V_{\\mathrm{GS}} - V_{\\mathrm{TH}})^2$$\n其中 $\\mu$ 是电子迁移率，$C_{\\mathrm{ox}}$ 是单位面积的栅极氧化层电容，$W$ 和 $L$ 分别是沟道宽度和长度，$V_{\\mathrm{GS}}$ 是栅源电压，$V_{\\mathrm{TH}}$ 是阈值电压。项 $\\frac{1}{2} \\mu C_{\\mathrm{ox}} \\frac{W}{L}$ 被组合成单个参数 $K$。为了解释在实际器件中观察到的有限输出电阻，该模型增加了一个沟道长度调制 (CLM) 因子 $(1 + \\lambda V_{\\mathrm{DS}})$，其中 $\\lambda$ 是 CLM 参数，$V_{\\mathrm{DS}}$ 是漏源电压。\n\n小信号输出电阻 $r_o$ 定义为输出电导 $g_{ds}$ 的倒数，而输出电导是漏极电流对漏源电压的偏导数，在直流工作点处求值：\n$$r_o = \\frac{1}{g_{ds}} = \\left( \\frac{\\partial I_D}{\\partial V_{\\mathrm{DS}}} \\right)^{-1}$$\n\n我们现在将为指定的两种模型推导输出电导的表达式。\n\n**1. 长沟道模型推导**\n\n在长沟道模型中，阈值电压 $V_{\\mathrm{TH}}$ 被假定为常数，等于其零偏置值 $V_{\\mathrm{TH0}}$。栅极过驱动电压为 $V_{\\mathrm{ov}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH0}}$。包含沟道长度调制的漏极电流为：\n$$I_{D,\\text{long}}(V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 (1 + \\lambda V_{\\mathrm{DS}})$$\n为了求得输出电导 $g_{ds,\\text{long}}$，我们将 $I_{D,\\text{long}}$ 对 $V_{\\mathrm{DS}}$ 求导：\n$$g_{ds,\\text{long}} = \\frac{\\partial I_{D,\\text{long}}}{\\partial V_{\\mathrm{DS}}} = \\frac{\\partial}{\\partial V_{\\mathrm{DS}}} \\left[ K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 (1 + \\lambda V_{\\mathrm{DS}}) \\right]$$\n由于 $K$、$V_{\\mathrm{GS}}$ 和 $V_{\\mathrm{TH0}}$ 相对于 $V_{\\mathrm{DS}}$ 都是常数，求导过程很简单：\n$$g_{ds,\\text{long}} = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 \\frac{\\partial}{\\partial V_{\\mathrm{DS}}} (1 + \\lambda V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 \\lambda$$\n这表明在长沟道模型中，输出电导完全由沟道长度调制引起。因此输出电阻为：\n$$r_{o,\\text{long}} = \\frac{1}{g_{ds,\\text{long}}} = \\frac{1}{\\lambda K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2}$$\n\n**2. 短沟道模型推导（含DIBL）**\n\n在短沟道模型中，由于DIBL效应，阈值电压不再是常数，而是随着 $V_{\\mathrm{DS}}$ 的增加而减小。其一阶模型为 $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH0}} - \\eta V_{\\mathrm{DS}}$，其中 $\\eta$ 是DIBL系数。有效栅极过驱动电压成为 $V_{\\mathrm{DS}}$ 的函数：$V_{\\mathrm{ov,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}$。\n\n漏极电流表达式为：\n$$I_{D,\\text{short}}(V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH,eff}})^2 (1 + \\lambda V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2 (1 + \\lambda V_{\\mathrm{DS}})$$\n为了求得输出电导 $g_{ds,\\text{short}}$，我们将 $I_{D,\\text{short}}$ 对 $V_{\\mathrm{DS}}$ 求导。在这里，过驱动电压的平方项和CLM项都依赖于 $V_{\\mathrm{DS}}$，因此我们必须应用微分乘法法则 $\\frac{d(uv)}{dx} = u\\frac{dv}{dx} + v\\frac{du}{dx}$。\n令 $u(V_{\\mathrm{DS}}) = (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2$ 且 $v(V_{\\mathrm{DS}}) = (1 + \\lambda V_{\\mathrm{DS}})$。\n$$g_{ds,\\text{short}} = \\frac{\\partial I_{D,\\text{short}}}{\\partial V_{\\mathrm{DS}}} = K \\left[ \\frac{\\partial u}{\\partial V_{\\mathrm{DS}}} v + u \\frac{\\partial v}{\\partial V_{\\mathrm{DS}}} \\right]$$\n各项的导数分别为：\n$$\\frac{\\partial v}{\\partial V_{\\mathrm{DS}}} = \\frac{\\partial}{\\partial V_{\\mathrm{DS}}}(1 + \\lambda V_{\\mathrm{DS}}) = \\lambda$$\n$$\\frac{\\partial u}{\\partial V_{\\mathrm{DS}}} = \\frac{\\partial}{\\partial V_{\\mathrm{DS}}}(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2 = 2(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}) \\cdot \\eta$$\n将这些代回乘法法则表达式中：\n$$g_{ds,\\text{short}} = K \\left[ 2\\eta(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})(1 + \\lambda V_{\\mathrm{DS}}) + (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2 \\lambda \\right]$$\n我们可以提取公因式 $(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})$：\n$$g_{ds,\\text{short}} = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}) \\left[ 2\\eta(1 + \\lambda V_{\\mathrm{DS}}) + \\lambda(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}) \\right]$$\n该表达式揭示了对输出电导的两个贡献：一个来自DIBL效应（$2\\eta$ 项），另一个来自传统的沟道长度调制（$\\lambda$ 项），而后者现在也通过有效过驱动电压受到DIBL的调制。输出电阻为 $r_{o,\\text{short}} = 1/g_{ds,\\text{short}}$。\n\n**3. 相对差异**\n\n相对差异 $\\Delta$ 量化了因包含DIBL效应而引起的输出电阻的相对变化：\n$$\\Delta = \\frac{r_{o,\\text{short}} - r_{o,\\text{long}}}{r_{o,\\text{long}}} = \\frac{r_{o,\\text{short}}}{r_{o,\\text{long}}} - 1 = \\frac{g_{ds,\\text{long}}}{g_{ds,\\text{short}}} - 1$$\n由于 $\\lambda$ 在两个模型之间保持不变，该度量标准分离出了DIBL的影响。以下程序实现了这些推导出的公式，用以计算指定测试用例的 $\\Delta$。对于每个用例，都会验证饱和条件（$V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov}}$），以确保所用模型的有效性。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the fractional discrepancy in MOSFET output resistance between\n    a long-channel model and a short-channel model with DIBL.\n    \"\"\"\n    test_cases = [\n        # Test case 1 (short-channel, typical strong inversion)\n        {'mu': 0.045, 'Cox': 0.010, 'W': 1.0e-6, 'L': 1.0e-7, 'Vgs': 0.8, 'Vds': 0.6, 'Vth0': 0.35, 'lambda_': 0.10, 'eta': 0.08, 'label': 'Case 1'},\n        # Test case 2 (near-threshold operation)\n        {'mu': 0.050, 'Cox': 0.008, 'W': 0.5e-6, 'L': 0.16e-6, 'Vgs': 0.45, 'Vds': 0.30, 'Vth0': 0.40, 'lambda_': 0.06, 'eta': 0.05, 'label': 'Case 2'},\n        # Test case 3 (extreme short-channel, minimal channel-length modulation)\n        {'mu': 0.045, 'Cox': 0.010, 'W': 2.0e-6, 'L': 60e-9, 'Vgs': 0.90, 'Vds': 0.70, 'Vth0': 0.35, 'lambda_': 1.0e-4, 'eta': 0.12, 'label': 'Case 3'},\n        # Test case 4 (no DIBL baseline)\n        {'mu': 0.050, 'Cox': 0.004, 'W': 1.0e-6, 'L': 1.0e-6, 'Vgs': 0.70, 'Vds': 0.50, 'Vth0': 0.40, 'lambda_': 0.08, 'eta': 0.00, 'label': 'Case 4'}\n    ]\n\n    results = []\n    \n    for case in test_cases:\n        mu = case['mu']\n        Cox = case['Cox']\n        W = case['W']\n        L = case['L']\n        Vgs = case['Vgs']\n        Vds = case['Vds']\n        Vth0 = case['Vth0']\n        lambda_ = case['lambda_']\n        eta = case['eta']\n\n        # 1. Check saturation conditions\n        Vov0 = Vgs - Vth0\n        Vov_eff = Vgs - (Vth0 - eta * Vds)\n        \n        # MOSFET must be on (Vov0 > 0) for saturation models to be meaningful\n        if Vov0 = 0:\n            raise ValueError(f\"Device in {case['label']} is in subthreshold or off. Vgs-Vth0 = {Vov0:.3f} V.\")\n\n        if not (Vds >= Vov0):\n            raise ValueError(f\"Saturation condition Vds >= Vov not met for long-channel model in {case['label']}: Vds={Vds:.3f} V, Vov={Vov0:.3f} V.\")\n        \n        if not (Vds >= Vov_eff):\n            raise ValueError(f\"Saturation condition Vds >= Vov_eff not met for short-channel model in {case['label']}: Vds={Vds:.3f} V, Vov_eff={Vov_eff:.3f} V.\")\n\n        # 2. Calculate technology parameter K\n        K = 0.5 * mu * Cox * (W / L)\n\n        # 3. Calculate long-channel output conductance (g_ds,long)\n        # g_ds,long = lambda * K * (Vgs - Vth0)^2\n        g_ds_long = lambda_ * K * Vov0**2\n        \n        # 4. Calculate short-channel output conductance (g_ds,short)\n        # g_ds,short = K * (Vov0 + eta*Vds) * [2*eta*(1+lambda*Vds) + lambda*(Vov0 + eta*Vds)]\n        term1_short = 2 * eta * (1 + lambda_ * Vds)\n        term2_short = lambda_ * (Vov0 + eta * Vds)\n        g_ds_short = K * (Vov0 + eta * Vds) * (term1_short + term2_short)\n\n        # 5. Calculate fractional discrepancy Delta\n        if g_ds_short == 0:\n            # This would imply infinite resistance. Discrepancy would be ill-defined or infinite.\n            # Given the problem's parameters, this case should not occur.\n            if g_ds_long == 0:\n                delta = 0.0 # Both resistances are infinite, no discrepancy\n            else:\n                delta = float('inf') # Should not happen\n        else:\n            delta = (g_ds_long / g_ds_short) - 1.0\n\n        results.append(round(delta, 6))\n\n    # Format the final output as a comma-separated list in brackets.\n    output_str = f\"[{','.join(f'{x:.6f}' for x in results)}]\"\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
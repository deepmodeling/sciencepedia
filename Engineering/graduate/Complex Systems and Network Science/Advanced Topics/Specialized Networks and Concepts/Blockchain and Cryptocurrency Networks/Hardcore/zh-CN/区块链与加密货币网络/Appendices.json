{
    "hands_on_practices": [
        {
            "introduction": "像比特币这样的工作量证明（PoW）区块链的安全性并非绝对，而是概率性的。一个核心问题是，拥有部分算力的攻击者推翻已确认交易（即“双花攻击”）的可能性有多大？本练习将指导您运用Satoshi Nakamoto首次阐述的经典模型，通过负二项分布和赌徒破产理论，精确计算双花攻击的成功概率。掌握这种分析方法对于理解PoW系统提供的最终一致性和安全保障至关重要。",
            "id": "4264554",
            "problem": "考虑一个工作量证明（PoW）区块链，其中区块的发现被建模为一系列独立试验，每次试验的结果要么是一个诚实区块，要么是一个敌手区块。设敌手控制总算力的一部分，比例为 $\\alpha \\in (0, \\tfrac{1}{2})$，而诚实网络控制的比例为 $1-\\alpha$。一笔交易在收到 $z \\in \\mathbb{N}$ 次确认后被视为已接受，即意味着包含该交易的区块之后已经附加了 $z$ 个诚实区块。商家在诚实链于该交易之后增长了 $z$ 个区块的停止时刻接受该交易。从交易被广播的那一刻起，敌手就开始私下挖矿，目的是在之后替换掉包含该交易的诚实链段。\n\n将区块发现序列建模为独立的伯努利试验，其中挖到诚实区块的概率为 $p = 1-\\alpha$，挖到敌手区块的概率为 $q = \\alpha$。令 $K$ 为在第 $z$ 个诚实区块被发现之前，敌手发现的区块数量。随机变量 $K$ 服从参数为 $(z, q)$ 的负二项分布，即\n$$\n\\mathbb{P}[K = k] = \\binom{z+k-1}{k} p^{z} q^{k}, \\quad k \\in \\mathbb{Z}_{\\ge 0}.\n$$\n在第 $z$ 个诚实区块之后，如果敌手落后了 $d = z - k > 0$ 个区块，那么在一个偏向诚实网络的有偏随机游走中，敌手最终追上（并超过）的概率由经典的赌徒破产命中概率给出\n$$\n\\left(\\frac{q}{p}\\right)^{d}.\n$$\n如果 $d \\le 0$，则敌手已经追上或领先，最终逆转发生的概率为 $1$。\n\n从这些基本建模假设和定义出发，推导出一笔被 $z$ 次确认所接受的交易最终被敌手逆转的精确概率 $P(z,\\alpha)$。使用负二项分布的尾部和正则化不完全贝塔函数 $I_{x}(a,b) = \\dfrac{B_{x}(a,b)}{B(a,b)}$（其中 $B_{x}(a,b) = \\int_{0}^{x} t^{a-1}(1-t)^{b-1}\\,dt$ 且 $B(a,b) = \\int_{0}^{1} t^{a-1}(1-t)^{b-1}\\,dt$）以闭式形式表达你的最终结果。你的最终答案必须是仅含 $z$ 和 $\\alpha$ 的单个解析表达式。不需要进行数值计算或四舍五入。",
            "solution": "用户希望我找出交易最终被逆转的概率。\n\n### 第一步：提取已知条件\n-   敌手算力比例：$\\alpha \\in (0, \\frac{1}{2})$。\n-   诚实网络算力比例：$1-\\alpha$。\n-   所需确认数：$z \\in \\mathbb{N}$。\n-   诚实区块的概率（成功）：$p = 1-\\alpha$。\n-   敌手区块的概率（失败）：$q = \\alpha$。\n-   $K$ 是在找到第 $z$ 个诚实区块之前发现的敌手区块数量。\n-   $K$ 的概率质量函数由 $\\mathbb{P}[K=k] = \\binom{z+k-1}{k} p^z q^k$ 给出，对于 $k \\in \\mathbb{Z}_{\\ge 0}$。\n-   敌手的链长差距为 $d = z-k$。\n-   在 $K=k$ 的条件下，逆转的概率为：\n    -   $\\left(\\frac{q}{p}\\right)^{z-k}$，如果 $z-k > 0$（即 $k  z$）。\n    -   $1$，如果 $z-k \\le 0$（即 $k \\ge z$）。\n-   目标是求出总的逆转概率 $P(z, \\alpha)$。\n-   最终答案必须用 $z$, $\\alpha$ 和正则化不完全贝塔函数 $I_x(a,b)$ 来表示。\n\n### 第二步：使用提取的条件进行验证\n该问题陈述提供了一个定义明确的概率模型，用于分析区块链安全，特别是双花攻击场景。此模型在关于加密货币的学术文献中是一种标准且受推崇的方法，源于中本聪（Satoshi Nakamoto）的白皮书，后由 Meni Rosenfeld 等研究人员形式化。\n\n-   **科学依据：** 该模型基于概率论的基本原理（伯努利试验、负二项分布、赌徒破产问题）。$\\alpha  1/2$ 的假设是工作量证明区块链的标准安全假设，确保诚实链的预期增长速度快于任何敌手链。该问题是科学合理的。\n-   **适定性：** 问题提供了计算所需总概率的所有必要定义、变量和条件概率。目标明确，且设置结构能导出一个唯一解。\n-   **客观性：** 该问题使用精确的数学语言陈述，没有任何主观或模糊的术语。\n\n所有有效性标准均已满足。该问题是有效的。\n\n### 第三步：结论与行动\n问题有效。我将继续进行求解。\n\n### 逆转概率的推导\n\n令 $E$ 为交易最终被逆转的事件。我们旨在计算 $P(z, \\alpha) = \\mathbb{P}[E]$。我们可以通过应用全概率律，以达到 $z$ 次确认时发现的敌手区块数 $K$ 为条件来计算该概率。\n\n$$\nP(z, \\alpha) = \\sum_{k=0}^{\\infty} \\mathbb{P}[E | K=k] \\mathbb{P}[K=k]\n$$\n\n问题根据敌手是落后 ($k  z$) 还是没有落后 ($k \\ge z$) 提供了条件概率 $\\mathbb{P}[E | K=k]$。我们可以相应地将求和分为两部分：\n$$\nP(z, \\alpha) = \\sum_{k=0}^{z-1} \\mathbb{P}[E | K=k] \\mathbb{P}[K=k] + \\sum_{k=z}^{\\infty} \\mathbb{P}[E | K=k] \\mathbb{P}[K=k]\n$$\n代入给定的条件概率：\n$$\nP(z, \\alpha) = \\sum_{k=0}^{z-1} \\left(\\frac{q}{p}\\right)^{z-k} \\mathbb{P}[K=k] + \\sum_{k=z}^{\\infty} (1) \\cdot \\mathbb{P}[K=k]\n$$\n我们分别分析每一项求和。\n\n第二项求和就是负二项分布中关于 $K$ 的尾概率：\n$$\n\\text{Sum 2} = \\sum_{k=z}^{\\infty} \\mathbb{P}[K=k] = \\mathbb{P}[K \\ge z]\n$$\n对于在 $z$ 次成功（成功概率为 $p$）之前发生 $K$ 次失败的负二项随机变量，其累积分布函数（CDF）通过 $\\mathbb{P}[K \\le k] = I_p(z, k+1)$ 与正则化不完全贝塔函数相关。因此，尾概率为：\n$$\n\\mathbb{P}[K \\ge z] = 1 - \\mathbb{P}[K \\le z-1] = 1 - I_p(z, (z-1)+1) = 1 - I_p(z, z)\n$$\n\n现在，我们来分析第一项求和。我们代入 $K$ 的概率质量函数（PMF），$\\mathbb{P}[K=k] = \\binom{z+k-1}{k} p^z q^k$：\n$$\n\\text{Sum 1} = \\sum_{k=0}^{z-1} \\left(\\frac{q}{p}\\right)^{z-k} \\binom{z+k-1}{k} p^z q^k\n$$\n我们来简化求和式内部的项：\n$$\n\\left(\\frac{q}{p}\\right)^{z-k} p^z q^k = \\frac{q^{z-k}}{p^{z-k}} p^z q^k = p^{z - (z-k)} q^{k + (z-k)} = p^k q^z\n$$\n所以第一项求和变为：\n$$\n\\text{Sum 1} = \\sum_{k=0}^{z-1} \\binom{z+k-1}{k} p^k q^z = q^z \\sum_{k=0}^{z-1} \\binom{z+k-1}{k} p^k\n$$\n为了计算这个有限和，我们使用负二项级数的恒等式：$\\sum_{k=0}^{\\infty} \\binom{n+k-1}{k} x^k = (1-x)^{-n}$。对于我们的求和，当 $n=z$ 和 $x=p$ 时，完整的无穷级数将是 $\\sum_{k=0}^{\\infty} \\binom{z+k-1}{k} p^k = (1-p)^{-z} = q^{-z}$。\n\n我们可以将有限和表示为无穷级数减去其尾部：\n$$\n\\sum_{k=0}^{z-1} \\binom{z+k-1}{k} p^k = \\left(\\sum_{k=0}^{\\infty} \\binom{z+k-1}{k} p^k\\right) - \\left(\\sum_{k=z}^{\\infty} \\binom{z+k-1}{k} p^k\\right) = q^{-z} - \\sum_{k=z}^{\\infty} \\binom{z+k-1}{k} p^k\n$$\n将此代回第一项求和的表达式中：\n$$\n\\text{Sum 1} = q^z \\left(q^{-z} - \\sum_{k=z}^{\\infty} \\binom{z+k-1}{k} p^k\\right) = 1 - q^z \\sum_{k=z}^{\\infty} \\binom{z+k-1}{k} p^k\n$$\n项 $q^z \\sum_{k=z}^{\\infty} \\binom{z+k-1}{k} p^k$ 可以被解释为另一个不同的负二项分布的尾概率。令 $K'$ 是一个随机变量，代表在 $z$ 次成功之前发生的失败次数，其中成功概率为 $q$，失败概率为 $p=1-q$。$K'$ 的概率质量函数是 $\\mathbb{P}[K'=k] = \\binom{z+k-1}{k} q^z p^k$。\n因此，该项为 $\\sum_{k=z}^{\\infty} \\mathbb{P}[K'=k] = \\mathbb{P}[K' \\ge z]$。使用相同的从CDF到贝塔函数的恒等式，我们得到：\n$$\n\\mathbb{P}[K' \\ge z] = 1 - \\mathbb{P}[K' \\le z-1] = 1 - I_q(z, z)\n$$\n因此，第一项求和的计算结果为：\n$$\n\\text{Sum 1} = 1 - \\mathbb{P}[K' \\ge z] = 1 - (1 - I_q(z,z)) = I_q(z,z)\n$$\n\n最后，我们将两项求和相加，得到总概率 $P(z, \\alpha)$：\n$$\nP(z, \\alpha) = \\text{Sum 1} + \\text{Sum 2} = I_q(z,z) + (1 - I_p(z,z))\n$$\n现在我们使用正则化不完全贝塔函数的基本恒等式：$I_x(a,b) + I_{1-x}(b,a) = 1$。\n在我们的情况下，$x=q$，$1-x=p$，且 $a=b=z$，该恒等式变为 $I_q(z,z) + I_p(z,z) = 1$。\n这意味着 $1 - I_p(z,z) = I_q(z,z)$。\n将此代入 $P(z, \\alpha)$ 的表达式中：\n$$\nP(z, \\alpha) = I_q(z,z) + I_q(z,z) = 2 I_q(z,z)\n$$\n由于 $q = \\alpha$，最终逆转概率的最终表达式为：\n$$\nP(z, \\alpha) = 2 I_{\\alpha}(z,z)\n$$",
            "answer": "$$\n\\boxed{2 I_{\\alpha}(z,z)}\n$$"
        },
        {
            "introduction": "在理解了PoW的基础安全模型后，我们来探讨其固有的一个核心挑战：“区块链三难困境”。本练习通过一个具体的权衡问题来阐明这一点：区块大小与孤块率（orphan rate）之间的关系。我们将使用泊松过程来模拟区块发现，并量化分析增大区块体积（以提高交易吞吐量）如何导致网络传播延迟增加，从而提高产生“陈腐区块”或“孤块”的概率，威胁主链的稳定性。这个计算为理解区块链扩容方案背后的动机提供了定量的基础。",
            "id": "4264541",
            "problem": "考虑一个工作量证明最长链区块链，其全网范围内的区块发现遵循一个速率为 $\\lambda$（区块/秒）的齐次泊松过程。一个新挖出的字节大小为 $s$ 的区块，其全网传播完成时间建模为 $d(s) = a + bs$，其中 $a$ 代表固定延迟，$b$ 代表每字节的传输延迟。假设在一个区块长度为 $d(s)$ 的传播间隔内，如果在网络中的任何地方发现了任何竞争区块，那么该区块就会变成孤块（即，最终没有进入主链）。在这些假设下，使用泊松过程的基本原理推导出孤块概率作为 $s$ 和 $\\lambda$ 的函数，然后计算当区块大小从 $s_0$ 增加到 $s_1$ 时，孤块概率的增量。\n\n使用以下参数，这些参数代表了当代广域网和类似比特币的挖矿速率：\n- $a = 0.4\\,\\mathrm{s}$\n- $b = 1.8 \\times 10^{-7}\\,\\mathrm{s/字节}$\n- $s_0 = 1{,}048{,}576\\,\\mathrm{字节}$\n- $s_1 = 8{,}388{,}608\\,\\mathrm{字节}$\n- $\\lambda = \\frac{1}{600}\\,\\mathrm{s^{-1}}$\n\n计算孤块概率的增量 $\\Delta p \\equiv p_{\\text{stale}}(s_1) - p_{\\text{stale}}(s_0)$，结果以小数形式表示。将您的最终数值答案四舍五入到四位有效数字。",
            "solution": "本分析的基础是将区块到达建模为速率为 $\\lambda$ 的齐次泊松过程，这意味着在任何长度为 $t$ 的时间间隔内，到达次数是一个均值为 $\\lambda t$ 的泊松随机变量，并且到达间隔时间服从参数为 $\\lambda$ 的指数分布。具体来说，在长度为 $t$ 的时间间隔内观察到零次到达的概率是 $\\exp(-\\lambda t)$。\n\n设一个大小为 $s$ 的区块在时间 $t=0$ 被发现。根据假设，该区块需要一个长度为 $d(s) = a + bs$ 的传播间隔才能到达绝大多数矿工。在最坏情况的简化假设下，即在区间 $[0, d(s)]$ 内发现的任何竞争区块都会导致原始区块变成孤块，那么孤块事件发生当且仅当在区间 $[0, d(s)]$ 内，有任何其他矿工至少发现一个区块。\n\n根据速率为 $\\lambda$ 的泊松过程的性质，在 $[0, d(s)]$ 内没有区块发现的概率是 $\\exp(-\\lambda d(s))$。因此，该区间内至少有一次发现的概率（因此在此模型中成为孤块的概率）是\n$$\np_{\\text{stale}}(s) \\;=\\; 1 - \\exp\\!\\big(-\\lambda\\, d(s)\\big) \\;=\\; 1 - \\exp\\!\\big(-\\lambda\\,(a + bs)\\big).\n$$\n当区块大小从 $s_0$ 增加到 $s_1$ 时，孤块概率的增量是\n$$\n\\Delta p \\;=\\; p_{\\text{stale}}(s_1) - p_{\\text{stale}}(s_0) \\;=\\; \\Big[1 - \\exp\\!\\big(-\\lambda\\,(a + bs_1)\\big)\\Big] - \\Big[1 - \\exp\\!\\big(-\\lambda\\,(a + bs_0)\\big)\\Big],\n$$\n化简后得到\n$$\n\\Delta p \\;=\\; \\exp\\!\\big(-\\lambda\\,(a + bs_0)\\big) \\;-\\; \\exp\\!\\big(-\\lambda\\,(a + bs_1)\\big).\n$$\n\n现在我们使用提供的参数对此表达式进行数值计算，在最后一步之前保持常数为符号形式。\n\n首先计算传播延迟：\n$$\nd(s_0) \\;=\\; a + bs_0 \\;=\\; 0.4 \\;+\\; \\big(1.8 \\times 10^{-7}\\big)\\times 1{,}048{,}576 \\;=\\; 0.4 \\;+\\; 0.18874368 \\;=\\; 0.58874368\\,\\mathrm{s},\n$$\n$$\nd(s_1) \\;=\\; a + bs_1 \\;=\\; 0.4 \\;+\\; \\big(1.8 \\times 10^{-7}\\big)\\times 8{,}388{,}608 \\;=\\; 0.4 \\;+\\; 1.50994944 \\;=\\; 1.90994944\\,\\mathrm{s}.\n$$\n\n接下来计算相应的孤块概率：\n$$\np_{\\text{stale}}(s_0) \\;=\\; 1 - \\exp\\!\\big(-\\lambda\\, d(s_0)\\big) \\;=\\; 1 - \\exp\\!\\Big(-\\tfrac{1}{600}\\times 0.58874368\\Big),\n$$\n$$\np_{\\text{stale}}(s_1) \\;=\\; 1 - \\exp\\!\\big(-\\lambda\\, d(s_1)\\big) \\;=\\; 1 - \\exp\\!\\Big(-\\tfrac{1}{600}\\times 1.90994944\\Big).\n$$\n\n计算指数部分：\n$$\n\\lambda\\, d(s_0) \\;=\\; \\tfrac{1}{600}\\times 0.58874368 \\;=\\; 0.000981239466\\ldots,\n$$\n$$\n\\lambda\\, d(s_1) \\;=\\; \\tfrac{1}{600}\\times 1.90994944 \\;=\\; 0.003183249066\\ldots.\n$$\n\n因此，\n$$\np_{\\text{stale}}(s_0) \\;=\\; 1 - \\exp(-0.000981239466\\ldots) \\;\\approx\\; 0.000980758158\\ldots,\n$$\n$$\np_{\\text{stale}}(s_1) \\;=\\; 1 - \\exp(-0.003183249066\\ldots) \\;\\approx\\; 0.003178187906\\ldots.\n$$\n\n所以，增量是\n$$\n\\Delta p \\;=\\; 0.003178187906\\ldots \\;-\\; 0.000980758158\\ldots \\;=\\; 0.002197429748\\ldots.\n$$\n\n四舍五入到四位有效数字，最终结果是\n$$\n\\Delta p \\;\\approx\\; 0.002197.\n$$\n这个值是一个无单位的小数，表示在给定的模型和参数下，当区块大小从 $s_0$ 增加到 $s_1$ 时，孤块概率的增量。",
            "answer": "$$\\boxed{0.002197}$$"
        },
        {
            "introduction": "PoW在安全性和去中心化方面的优势伴随着对能源的巨大消耗和性能上的限制。作为一种重要的替代方案，权益证明（PoS）用经济权益取代了计算工作量。因此，PoS的安全性根植于精心设计的经济激励与惩罚（罚没，slashing）机制。本练习将带您进入机制设计的核心，要求您从理性验证者的角度出发，推导为确保其诚实行为而必须设定的最小罚没比例。这是一个PoS协议设计者必须面对的基础性问题，它揭示了如何通过经济手段来保障网络安全。",
            "id": "4264538",
            "problem": "一个权益证明 (PoS) 区块链通过罚没 (slashing) 来惩罚双重签名 (double-signing) 行为。考虑一个代表性的验证者，其质押了 $S$ 个代币，当被选为区块提议者时，他面临一个一次性的机会来进行模棱两可的行为（双重签名）。该验证者是风险中性的，并以最大化预期贴现效用为目标，每个时期的贴现因子为 $\\delta \\in (0,1)$。只要验证者保持活跃且未被罚没，基础协议将为每个质押的代币带来每时期 $y$ 个代币的预期奖励率。\n\n假设给定以下基本要素，并且它们具有科学依据：\n1. 诚实行为下未来基础奖励流的现值为 $C = \\frac{\\delta y S}{1 - \\delta}$。\n2. 如果验证者进行模棱两可的行为，一个对手会提供一笔贿赂，在制造出可证明的模棱两可行为后，该贿赂会带来 $b$ 个代币的预期即时收益。\n3. 双重签名证据通过一个 gossip 网络传播，该网络被建模为速率为 $\\lambda > 0$ 的泊松过程。在长度为 $T > 0$ 个时期的检测窗口内，至少有一个证据到达链上的概率为 $p_{d} = 1 - \\exp(-\\lambda T)$。\n4. 如果在窗口期内被检测到，验证者的质押金将被罚没一部分，比例为 $s \\in [0,1]$（损失 $sS$ 个代币），并被监禁或逐出，这会使其未来基础奖励现值的一部分被销毁，比例为 $\\gamma \\in [0,1]$，因此检测后的持续价值变为 $(1 - \\gamma) C$。如果在窗口期内未被检测到，则不会施加罚没，并且持续价值保持为 $C$。\n5. 与是否选择双重签名无关的当前时期的即时基础收益在比较中会相互抵消，因此可以忽略。\n\n仅使用预期效用最大化的第一性原理和上述基本要素，推导出一个严格的激励相容约束，该约束使得在决策点上，诚实行为弱优于模棱两可的行为，并求解强制执行此约束的最小罚没比例 $s_{\\min}$。将 $s_{\\min}$ 明确地表示为参数 $\\{b, S, \\gamma, \\delta, y, \\lambda, T\\}$ 的一个封闭形式函数。假设参数满足 $0  s_{\\min}  1$，以便边界截断不被激活。您的最终答案必须是一个单一的封闭形式表达式。无需进行四舍五入。",
            "solution": "该问题是有效的。它提出了一个定义明确的经济模型，用于描述权益证明区块链中验证者的行为，并使用了预期效用理论和网络建模的标准原理。所有参数都有明确的定义，并且其前提在经济建模和计算机科学的背景下具有科学依据。任务是推导一个激励相容约束并求解一个最小参数值，这是机制设计中的一个标准程序。\n\n目标是找到最小的罚没比例，记为 $s_{\\min}$，该比例确保对于一个风险中性的验证者而言，诚实行为是弱占优策略。这可以通过建立一个激励相容 (IC) 约束来实现，在该约束下，诚实行为的预期效用大于或等于模棱两可行为（双重签名）的预期效用。\n\n设 $U_{\\text{honest}}$ 为选择诚实行为的预期效用，$U_{\\text{equivocate}}$ 为选择模棱两可行为的预期效用。验证者是风险中性的，因此效用等同于以代币计价的收益的期望值。\n\n首先，我们确定诚实行为的预期效用。如果验证者诚实行事，他们不会收到贿赂，也不会被罚没。他们的收益包括未来基础奖励的持续价值。根据问题陈述，两种选择共有的即时收益可以忽略。诚实行为下未来奖励流的现值被给定为 $C$。\n$$\nU_{\\text{honest}} = C\n$$\n\n接下来，我们确定模棱两可行为的预期效用。如果验证者进行模棱两可的行为，他们会立即收到一笔 $b$ 个代币的贿赂。他们后续的效用取决于模棱两可的证据是否在时间窗口 $T$ 内被检测到并被包含在链上。\n被检测到的概率给定为 $p_d = 1 - \\exp(-\\lambda T)$。\n因此，不被检测到的概率是 $1 - p_d = \\exp(-\\lambda T)$。\n\n如果发生检测（概率为 $p_d$）：\n- 验证者被罚没，招致 $sS$ 个代币的损失。\n- 他们未来奖励的现值减少了 $\\gamma$ 的比例，所以持续价值变为 $(1 - \\gamma)C$。\n在这种结果下，总价值为 $-sS + (1 - \\gamma)C$。\n\n如果没有发生检测（概率为 $1 - p_d$）：\n- 验证者不会被罚没。\n- 未来奖励的持续价值保持为 $C$。\n在这种结果下，总价值为 $C$。\n\n模棱两可行为的预期效用是即时贿赂与各种结果的加权平均之和：\n$$\nU_{\\text{equivocate}} = b + p_d \\left( -sS + (1 - \\gamma)C \\right) + (1 - p_d)C\n$$\n我们可以简化这个表达式：\n$$\nU_{\\text{equivocate}} = b - p_d sS + p_d (1 - \\gamma)C + C - p_d C\n$$\n$$\nU_{\\text{equivocate}} = b - p_d sS + p_d C - p_d \\gamma C + C - p_d C\n$$\n$$\nU_{\\text{equivocate}} = b - p_d sS - p_d \\gamma C + C\n$$\n这可以重写为：\n$$\nU_{\\text{equivocate}} = b + C - p_d(sS + \\gamma C)\n$$\n\n使得诚实行为成为弱占优策略的激励相容约束是 $U_{\\text{honest}} \\ge U_{\\text{equivocate}}$。代入效用的表达式：\n$$\nC \\ge b + C - p_d(sS + \\gamma C)\n$$\n从两边减去 $C$ 得到：\n$$\n0 \\ge b - p_d(sS + \\gamma C)\n$$\n整理各项，我们得到了安全条件的优雅形式：\n$$\np_d(sS + \\gamma C) \\ge b\n$$\n这个约束表明，模棱两可行为的预期惩罚（检测概率乘以直接罚没和未来奖励损失的货币化价值之和）必须至少与贿赂一样大。\n\n为了找到强制执行此约束的最小罚没比例 $s_{\\min}$，我们将不等式设为等式，并使用 $s = s_{\\min}$：\n$$\np_d(s_{\\min}S + \\gamma C) = b\n$$\n现在，我们求解 $s_{\\min}$：\n$$\ns_{\\min}S + \\gamma C = \\frac{b}{p_d}\n$$\n$$\ns_{\\min}S = \\frac{b}{p_d} - \\gamma C\n$$\n$$\ns_{\\min} = \\frac{1}{S} \\left( \\frac{b}{p_d} - \\gamma C \\right)\n$$\n问题给出了 $p_d$ 和 $C$ 的明确形式：\n$$\np_d = 1 - \\exp(-\\lambda T)\n$$\n$$\nC = \\frac{\\delta y S}{1 - \\delta}\n$$\n将这些代入 $s_{\\min}$ 的表达式中：\n$$\ns_{\\min} = \\frac{1}{S} \\left( \\frac{b}{1 - \\exp(-\\lambda T)} - \\gamma \\left( \\frac{\\delta y S}{1 - \\delta} \\right) \\right)\n$$\n最后，我们将 $\\frac{1}{S}$ 项分配进去，以获得封闭形式的解：\n$$\ns_{\\min} = \\frac{b}{S(1 - \\exp(-\\lambda T))} - \\frac{\\gamma \\delta y}{1 - \\delta}\n$$\n这就是使诚实行为成为弱占优策略所需的最小罚没比例，它被表示为给定参数的函数。假设 $0  s_{\\min}  1$ 确保了这个内部解在不考虑边界条件的情况下是有效的。",
            "answer": "$$\\boxed{\\frac{b}{S(1 - \\exp(-\\lambda T))} - \\frac{\\gamma \\delta y}{1 - \\delta}}$$"
        }
    ]
}
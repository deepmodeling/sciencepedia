{
    "hands_on_practices": [
        {
            "introduction": "这个练习旨在通过将网络密度的基本定义应用于两种典型的图结构，来巩固您对该概念的理解。我们将计算星形图（一种保持连通性的最稀疏结构）和完全图（最密集的结构）的密度。通过这个练习，您将直观地感受到网络密度是如何量化网络连接性的两个极端，并为更复杂的网络分析奠定基础。",
            "id": "4290435",
            "problem": "考虑具有 $n \\geq 2$ 个节点的简单无向网络，没有自环也没有多重边。令 $S_n$ 表示具有 $n$ 个节点的星形图，它由一个中心节点与所有其他 $n-1$ 个节点（叶节点）相邻构成；令 $K_n$ 表示具有 $n$ 个节点的完全图，其中每对不同的节点都由一条边连接。网络密度 $D$ 的概念定义为在相同约束下，已实现的连接数相对于可能存在的最大连接数的比例。以此概念定义为基础，计算 $S_n$ 和 $K_n$ 的密度 $D$ 关于 $n$ 的精确符号表达式。然后，简要解释这些 $D$ 值如何反映简单无向网络中的结构极端情况。将您的最终答案表示为一个二元行矩阵 $\\left(D(S_n),\\,D(K_n)\\right)$，其中每个元素都以关于 $n$ 的闭式函数形式给出。无需四舍五入，也无需单位。",
            "solution": "该问题定义明确，基于网络科学和图论的基本概念。简单无向网络、星形图 ($S_n$)、完全图 ($K_n$) 和网络密度 ($D$) 的定义是标准的且自洽的。约束条件 $n \\geq 2$ 在此背景下是合适的。\n\n第一步是形式化网络密度的概念定义。对于一个有 $n$ 个节点的简单无向图，“连接”就是一条边。密度 $D$ 是实际边数 $|E|$ 与最大可能边数 $|E_{max}|$ 的比率。\n$$D = \\frac{|E|}{|E_{max}|}$$\n在一个有 $n$ 个节点的简单图中，当每对不同的节点都由一条边连接时，边数达到最大值。从 $n$ 个节点中选择 $2$ 个不同节点的方法数由二项式系数 $\\binom{n}{2}$ 给出。因此，最大边数为：\n$$|E_{max}| = \\binom{n}{2} = \\frac{n(n-1)}{2}$$\n这个 $|E_{max}|$ 的表达式在 $n \\geq 2$ 时有效。\n\n接下来，我们计算星形图 $S_n$ 的密度。一个有 $n$ 个节点的星形图由一个中心“枢纽”节点连接到其余 $n-1$ 个“叶”节点组成。叶节点之间没有边。因此，边数等于从中心节点出发的连接数，即 $n-1$。\n$$|E(S_n)| = n-1$$\n星形图的密度 $D(S_n)$ 是其实际边数与最大可能边数的比率：\n$$D(S_n) = \\frac{|E(S_n)|}{|E_{max}|} = \\frac{n-1}{\\frac{n(n-1)}{2}}$$\n对于 $n \\geq 2$，$n-1$ 项不为零，因此可以简化。\n$$D(S_n) = \\frac{1}{\\frac{n}{2}} = \\frac{2}{n}$$\n这个公式正确地处理了 $n=2$ 的情况，此时 $S_2$ 与 $K_2$ 相同，得到 $D(S_2) = \\frac{2}{2} = 1$。\n\n现在，我们计算完全图 $K_n$ 的密度。根据定义，一个有 $n$ 个节点的完全图包含其 $n$ 个节点之间所有可能的边。因此，$K_n$ 中的边数等于最大可能边数。\n$$|E(K_n)| = |E_{max}| = \\frac{n(n-1)}{2}$$\n因此，完全图的密度 $D(K_n)$ 是：\n$$D(K_n) = \\frac{|E(K_n)|}{|E_{max}|} = \\frac{\\frac{n(n-1)}{2}}{\\frac{n(n-1)}{2}} = 1$$\n这个结果对所有 $n \\geq 2$ 都成立，因为 $|E_{max}| > 0$。\n\n最后，我们解释这些值。星形图 $S_n$ 和完全图 $K_n$ 代表了网络结构的两种极端情况。\n完全图的密度 $D(K_n)=1$ 是任何简单图可能的最大密度。它代表了最大互连的状态，其中任意两个节点之间都存在长度为 $1$ 的路径。\n星形图的密度 $D(S_n) = \\frac{2}{n}$，当节点数 $n$ 变大时，该密度趋近于 $0$（当 $n \\to \\infty$ 时，$D(S_n) \\to 0$）。这表明网络非常稀疏。星形图是一种树，而树是最小连通图；它包含了使一个 $n$ 节点图保持连通所需的最少边数（$n-1$）。因此，$S_n$ 代表了稀疏性和中心化的极端情况，其中连通性通过最经济的边数来维持，所有边都通过一个单一的中心节点路由。总而言之，$S_n$ 和 $K_n$ 界定了 $n$ 节点连通简单图的密度范围，从接近 $0$ 到恰好为 $1$。",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{2}{n} & 1 \\end{pmatrix}}$$"
        },
        {
            "introduction": "在掌握了静态网络的密度计算后，下一个练习将引导您进入动态分析的领域。您将从第一性原理出发，推导移除一个节点对整个网络密度的精确影响。这个练习不仅能加深您对密度公式的理解，更重要的是，它揭示了局部节点属性（如度）与全局网络结构变化之间的深刻联系。",
            "id": "4290433",
            "problem": "考虑一个包含 $n$ 个节点和 $m$ 条边的简单无向无权图，图中没有自环和重边。全局网络密度定义为图中现有边数与可能的最大边数之比。现移除一个度为 $k$ 的节点 $v$，以及所有与该节点关联的边。从图密度的核心定义和 $n$ 个节点之间可能边数的组合计数出发，根据第一性原理，推导出一个因移除节点 $v$ 而引起的全局密度变化 $\\Delta D$ 的精确表达式。该表达式应为一个关于 $n$、$m$ 和 $k$ 的闭式解析函数。以单一解析表达式的形式给出结果；不需要数值近似或四舍五入。此外，在推导过程中简要论证为何移除一个度数较高的节点倾向于降低全局密度，并将您的结果与原图的平均度联系起来。您的最终答案应为关于 $n$、$m$ 和 $k$ 的 $\\Delta D$ 的单一精确表达式。",
            "solution": "问题要求推导出一个简单无向图在移除单个节点后全局网络密度变化 $\\Delta D$ 的精确表达式。推导必须从第一性原理出发。\n\n设图为 $G=(V, E)$，其中 $V$ 是节点集合，$E$ 是边集合。\n初始节点数为 $|V| = n$。\n初始边数为 $|E| = m$。\n该图是简单无向图，意味着它没有自环，任意两个节点之间也没有多条边。\n\n在这样一个有 $n$ 个节点的图中，可能的最大边数 $M$ 是从 $n$ 个节点中选取 2 个节点的方法数，由二项式系数给出：\n$$\nM = \\binom{n}{2} = \\frac{n(n-1)}{2}\n$$\n全局网络密度 $D$ 定义为现有边数与可能的最大边数之比。因此，图的初始密度 $D_1$ 为：\n$$\nD_1 = \\frac{m}{M} = \\frac{m}{\\binom{n}{2}} = \\frac{2m}{n(n-1)}\n$$\n从图中移除一个度为 $k$ 的节点 $v \\in V$。节点的度是指与该节点关联的边的数量。移除节点 $v$ 意味着对图结构有两处改变：\n$1.$ 节点 $v$ 本身被移除。\n$2.$ 所有与 $v$ 关联的 $k$ 条边都被移除。\n\n设新图为 $G'=(V', E')$。\n新图中的节点数为 $n' = |V'| = n - 1$。\n新图中的边数为 $m' = |E'| = m - k$。\n\n在新图中，有 $n' = n-1$ 个节点，其可能的最大边数 $M'$ 为：\n$$\nM' = \\binom{n'}{2} = \\binom{n-1}{2} = \\frac{(n-1)(n-2)}{2}\n$$\n新图的密度 $D_2$ 为：\n$$\nD_2 = \\frac{m'}{M'} = \\frac{m-k}{\\binom{n-1}{2}} = \\frac{2(m-k)}{(n-1)(n-2)}\n$$\n全局密度的变化 $\\Delta D$ 是最终密度减去初始密度：\n$$\n\\Delta D = D_2 - D_1\n$$\n代入 $D_1$ 和 $D_2$ 的表达式：\n$$\n\\Delta D = \\frac{2(m-k)}{(n-1)(n-2)} - \\frac{2m}{n(n-1)}\n$$\n为了简化此表达式，我们找到一个公分母，即 $n(n-1)(n-2)$。\n$$\n\\Delta D = \\frac{2(m-k)n}{n(n-1)(n-2)} - \\frac{2m(n-2)}{n(n-1)(n-2)}\n$$\n现在，我们将分数合并到公分母上：\n$$\n\\Delta D = \\frac{2n(m-k) - 2m(n-2)}{n(n-1)(n-2)}\n$$\n展开分子中的各项：\n$$\n\\Delta D = \\frac{(2mn - 2kn) - (2mn - 4m)}{n(n-1)(n-2)}\n$$\n$$\n\\Delta D = \\frac{2mn - 2kn - 2mn + 4m}{n(n-1)(n-2)}\n$$\n$2mn$ 项相互抵消，剩下：\n$$\n\\Delta D = \\frac{4m - 2kn}{n(n-1)(n-2)}\n$$\n从分子中提出因子 2，得到最终的闭式表达式：\n$$\n\\Delta D = \\frac{2(2m - kn)}{n(n-1)(n-2)}\n$$\n此表达式在 $n > 2$ 时有效。如果 $n \\le 2$，分母会变为零或图结构是平凡的。对于 $n=2$，分母为 $0$。对于 $n=1$ 或 $n=0$，在此上下文中移除节点的概念是无定义的。\n\n为了解决问题的第二部分，我们分析密度下降的条件，即 $\\Delta D  0$。对于 $n > 2$，分母 $n(n-1)(n-2)$ 为正。因此，$\\Delta D$ 的符号由分子 $2(2m-kn)$ 的符号决定。\n如果以下条件成立，密度会下降：\n$$\n2m - kn  0\n$$\n$$\n2m  kn\n$$\n$$\nk > \\frac{2m}{n}\n$$\n原图的平均度 $\\langle k \\rangle$ 定义为所有度数之和除以节点数。根据握手引理，度数之和等于边数的两倍：$\\sum_{i=1}^{n} k_i = 2m$。\n因此，平均度为：\n$$\n\\langle k \\rangle = \\frac{2m}{n}\n$$\n因此，密度下降 ($\\Delta D  0$) 的条件是 $k > \\langle k \\rangle$。这意味着，当且仅当被移除节点的度 $k$ 大于原图的平均度时，移除该节点才会降低全局网络密度。一个“高度”节点通常被理解为其度数远大于平均度的节点。因此，移除这样一个节点将倾向于降低全局密度，正如我们推导的 $\\Delta D$ 表达式直接显示的那样。反之，移除一个度数小于平均度的节点将会增加网络密度。",
            "answer": "$$\\boxed{\\frac{2(2m - kn)}{n(n-1)(n-2)}}$$"
        },
        {
            "introduction": "理论知识的最终目的是应用于实际问题。这个练习将理论与实践相结合，要求您为一种常见的数据结构（邻接表）设计一个计算网络密度的高效算法。您需要证明算法的正确性并分析其时间复杂度，确保其在大规模网络上是可行的。这项任务旨在培养您在网络科学研究中必不可少的计算思维和算法设计能力。",
            "id": "4290385",
            "problem": "给定一个有限网络，该网络被建模为一个简单图，此处的简单图定义为没有平行边和自环的图。设该图用邻接表表示：对于顶点集 $V$（其中 $|V| = n$）中的每个顶点索引 $i$，一个邻居索引数组 $L_i$ 指定了它的出邻居（如果图是有向的）或邻居（如果图是无向的）。网络密度定义为在上述约束条件下，观测到的链接数与可能的最大链接数之比，其中“链接”的解释需考虑图的有向性。请设计一个单遍算法，其运行时间为大O表示法 $\\mathcal{O}(n+m)$（其中 $m$ 是边的数量），该算法能直接从邻接表计算网络密度。请从第一性原理和图论中公认的事实出发，证明您的算法的正确性和时间复杂度，并论证该算法如何处理 $n \\leq 1$ 的退化情况。请严格按照规定实现该算法，并将其应用于以下测试套件。\n\n测试套件包含的图，其顶点标记为 $0,1,\\dots,n-1$。每个测试用例由一个明确的邻接数组列表和一个布尔值定义，该布尔值指示图是有向（$\\text{True}$）还是无向（$\\text{False}$）。邻接表符合约束条件：无自环、无平行边，并且对于无向图，邻接关系是对称的（如果 $u$ 的邻接表包含 $v$，则 $v$ 的邻接表也包含 $u$）。\n\n测试用例：\n- 案例 A（无向路径）：$n=5$，邻接表 $L_0=[1]$, $L_1=[0,2]$, $L_2=[1,3]$, $L_3=[2,4]$, $L_4=[3]$，有向标记为 $\\text{False}$。\n- 案例 B（无向完全图）：$n=4$，邻接表 $L_0=[1,2,3]$, $L_1=[0,2,3]$, $L_2=[0,1,3]$, $L_3=[0,1,2]$，有向标记为 $\\text{False}$。\n- 案例 C（有向空图）：$n=3$，邻接表 $L_0=[\\,]$, $L_1=[\\,]$, $L_2=[\\,]$，有向标记为 $\\text{True}$。\n- 案例 D（无自环的有向完全图）：$n=4$，邻接表 $L_0=[1,2,3]$, $L_1=[0,2,3]$, $L_2=[0,1,3]$, $L_3=[0,1,2]$，有向标记为 $\\text{True}$。\n- 案例 E（单顶点无向图）：$n=1$，邻接表 $L_0=[\\,]$，有向标记为 $\\text{False}$。\n- 案例 F（单顶点有向图）：$n=1$，邻接表 $L_0=[\\,]$，有向标记为 $\\text{True}$。\n- 案例 G（无顶点的空图）：$n=0$，邻接表为空族 $[\\,]$，有向标记为 $\\text{True}$。\n\n您的程序应生成单行输出，其中包含所有七个测试用例的结果，按顺序排列，形式为用方括号括起来的逗号分隔列表（例如，$[x_A,x_B,x_C,x_D,x_E,x_F,x_G]$）。每个条目必须是十进制数（浮点数）。本任务不涉及任何物理单位或角度单位。当可能的最大链接数为 $0$ 时，通过返回密度 $0$ 来处理退化情况。最终算法只能使用与 $n+m$ 成正比的操作次数，并且除了遍历邻接表外，不得依赖任何预处理。",
            "solution": "所述问题是有效的。它在图论领域有科学依据，提法明确，提供了所有必要的定义和约束，并且其表述是客观的。因此，我们可以着手解决。\n\n核心任务是计算网络密度 $\\rho$，其定义为简单图中观测到的边数 $m$ 与可能的最大边数 $m_{\\text{max}}$ 之比。\n$$ \\rho = \\frac{m}{m_{\\text{max}}} $$\n该算法必须在 $\\mathcal{O}(n+m)$ 时间内从邻接表表示中推导出此值，其中 $n$ 是顶点数， $m$ 是边数。\n\n算法的推导过程分为几个步骤：计算 $m$，计算 $m_{\\text{max}}$，处理退化情况，以及最后分析算法的性能。\n\n**1. 观测边数（$m$）的计算**\n\n观测到的边数 $m$ 是通过对所提供的邻接表 $\\{L_i\\}_{i=0}^{n-1}$ 的长度求和，并根据图的有向性来解释这个和来确定的。邻接表长度之和 $M = \\sum_{i=0}^{n-1} |L_i|$ 代表所有顶点的度之和（对于无向图）或出度之和（对于有向图）。\n\n*   **有向图**：在有向图中，邻接表 $L_i$ 中的每个条目都对应一条从顶点 $i$ 出发的唯一有向边。因此，总边数 $m$ 正是所有顶点的出度之和。\n    $$ m_{\\text{directed}} = \\sum_{i=0}^{n-1} \\text{deg}^+(v_i) = \\sum_{i=0}^{n-1} |L_i| $$\n\n*   **无向图**：在无向图中，每条边 $\\{u, v\\}$ 在邻接表表示中被计算两次：一次是 $v \\in L_u$，另一次是 $u \\in L_v$。这是握手引理（Handshaking Lemma）的直接推论，该引理指出所有顶点的度之和等于边数的两倍（$\\sum_{v \\in V} \\text{deg}(v) = 2m$）。因此，$m$ 是邻接表长度之和的一半。\n    $$ m_{\\text{undirected}} = \\frac{1}{2} \\sum_{i=0}^{n-1} |L_i| $$\n\n**2. 可能的最大边数（$m_{\\text{max}}$）的计算**\n\n在图为简单图（无自环、无平行边）的约束下，最大边数取决于顶点数 $n$ 以及图是有向还是无向。\n\n*   **无向图**：对于一个有 $n$ 个顶点的无向简单图，最大边数对应于一个完全图 $K_n$。任何一对不同的顶点之间都可以放置一条边。从 $n$ 个顶点中选择 $2$ 个顶点的方法数由二项式系数 $\\binom{n}{2}$ 给出。\n    $$ m_{\\text{max}}^{\\text{undirected}} = \\binom{n}{2} = \\frac{n(n-1)}{2} $$\n\n*   **有向图**：对于一个有 $n$ 个顶点的有向简单图，当每一对有序的不同顶点 $(u, v)$ 之间都存在一条从 $u$到 $v$ 的有向边时，边数达到最大。这种有序对的总数为 $n(n-1)$。\n    $$ m_{\\text{max}}^{\\text{directed}} = n(n-1) $$\n\n**3. 退化情况（$n \\le 1$）的处理**\n\n问题为分母 $m_{\\text{max}}$ 可能为零的情况提供了具体指令：“当可能的最大链接数为 $0$ 时，通过返回密度 $0$ 来处理退化情况。”\n\n我们分析 $m_{\\text{max}} = 0$ 的情况：\n*   对于无向图和有向图，$m_{\\text{max}}$ 的公式都包含 $n(n-1)$ 这一项。该项等于 $0$ 当且仅当 $n=0$ 或 $n=1$。\n*   因此，对于任何顶点数 $n \\le 1$ 的图，$m_{\\text{max}} = 0$。根据问题的规则，这些情况下的密度定义为 $0$。这种方法解决了潜在的除零问题，并为这些平凡的图结构提供了一致且有意义的值。对于任何 $n>1$，$m_{\\text{max}}$ 严格为正。\n\n**4. 算法设计与复杂度分析**\n\n基于以上原则，设计单遍算法如下：\n1.  给定顶点数 $n$，首先检查是否 $n \\le 1$。如果为真，则密度为 $0.0$，此情况的计算完成。\n2.  如果 $n > 1$，初始化一个计数器 `total_degree_sum` 为 $0$。\n3.  对邻接表表示执行一次单遍扫描。从 $i=0$ 遍历到 $n-1$，对于每个顶点 $i$，将其邻接表的长度 $|L_i|$ 加到 `total_degree_sum` 上。\n4.  计算观测到的边数 $m$。如果图是有向的，$m = \\text{total\\_degree\\_sum}$。如果是无向的，$m = \\text{total\\_degree\\_sum} / 2$。\n5.  计算可能的最大边数 $m_{\\text{max}}$。如果图是有向的，$m_{\\text{max}} = n(n-1)$。如果是无向的，$m_{\\text{max}} = n(n-1)/2$。\n6.  计算最终密度 $\\rho = m/m_{\\text{max}}$。\n\n**正确性与时间复杂度证明**：\n*   **正确性**：算法的正确性得到了保证，因为它是基于度数和计算边数的基本定义（对于无向图，由握手引理确立）以及完全简单图中边数的标准组合公式的直接实现。对 $n \\le 1$ 基本情况的明确处理确保了在所有可能的 $n \\ge 0$ 值下的正确性。\n*   **时间复杂度**：计算成本主要由第3步决定，该步涉及遍历邻接表。这需要访问 $n$ 个顶点中的每一个，并对每个顶点遍历其邻居列表。遍历的邻居列表元素总数为 $M = \\sum_{i=0}^{n-1} |L_i|$。如前所示，$M$ 等于 $m$（有向图）或 $2m$（无向图），使得 $M$ 与 $m$ 成正比，即 $M \\in \\mathcal{O}(m)$。因此，此步骤的总时间复杂度为 $\\mathcal{O}(n+M) = \\mathcal{O}(n+m)$。所有其他步骤都涉及常数次算术运算，耗时 $\\mathcal{O}(1)$。因此，算法的总时间复杂度为 $\\mathcal{O}(n+m)$，满足问题的要求。",
            "answer": "[0.4,1.0,0.0,1.0,0.0,0.0,0.0]"
        }
    ]
}
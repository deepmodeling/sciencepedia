{
    "hands_on_practices": [
        {
            "introduction": "时间触发系统的核心是其静态调度表，它在一个全局时间线上预先规定了所有操作。这项练习将引导你完成为一组谐波任务构建这样一个调度表的基本过程。通过这个练习，你将巩固对超周期、确定性资源分配等关键概念的理解，并亲手实践时间触发系统设计的基石()。",
            "id": "4251650",
            "problem": "一个带有嵌入式数字孪生 (DT) 的信息物理系统 (CPS) 在单核处理器上执行静态时间触发调度。时间基准是一个同步全局时钟，其时钟节拍为 $\\Delta t = 0.5\\,\\mathrm{ms}$，所有任务在时间 $t=0$ 时同步释放。DT 的计算流水线由三个具有谐波周期的周期性任务 $\\tau_1$、$\\tau_2$ 和 $\\tau_3$ 组成。每个任务 $\\tau_k$ 由周期 $T_k$、最坏情况执行时间 $C_k$、释放偏移量 $O_k$ 和隐式截止时间 $D_k = T_k$ 来表征。参数如下：\n- $\\tau_1$：$T_1 = 5\\,\\mathrm{ms}$，$C_1 = 1\\,\\mathrm{ms}$，$O_1 = 0\\,\\mathrm{ms}$。\n- $\\tau_2$：$T_2 = 10\\,\\mathrm{ms}$，$C_2 = 1.5\\,\\mathrm{ms}$，$O_2 = 0\\,\\mathrm{ms}$。\n- $\\tau_3$：$T_3 = 20\\,\\mathrm{ms}$，$C_3 = 2\\,\\mathrm{ms}$，$O_3 = 0\\,\\mathrm{ms}$。\n\n假设执行是非抢占式的，处理器是单核的，并且每个调度时隙的开始和结束都与时钟节拍 $\\Delta t$ 对齐。所有作业的开始时间不得早于其释放时间，且完成时间不得晚于其隐式截止时间。在一个超周期内，使用以下策略构建一个确定性的时间触发调度表：在每个释放时刻，按照周期 $T_k$ 严格递减的顺序（若周期相同，则按任务索引递增的顺序打破平局）调度所有新释放的就绪作业，为每个作业分配不与任何已调度时隙重叠并遵守非抢占规则的最早开始时间。作业不能被移动到其释放时间之前。\n\n从周期性任务系统的基本原理以及谐波性和超周期的成熟定义出发，确定：\n1. 超周期 $H$。\n2. 在 $[0,H)$ 区间内的有序时隙分配，表示为三元组 $(i,s,e)$，其中 $i \\in \\{1,2,3\\}$ 是任务索引，$s$ 和 $e$ 是时隙的开始和结束时间（单位为 $\\mathrm{ms}$）。\n3. 在 $[0,H)$ 区间内的总松弛时间 $S$。\n\n所有时间均以 $\\mathrm{ms}$ 表示。将最终答案以单行矩阵的形式提供，矩阵中依次包含：$H$，然后是所有按 $s$ 递增排序的三元组 $(i,s,e)$ 序列，最后是 $S$。无需四舍五入。矩阵必须只包含数字；不要在矩阵内包含单位。",
            "solution": "用户提供的问题是一个明确定义的实时调度问题。它在科学上基于时间触发系统的原理，自身包含了所有必要的参数，并且没有矛盾或含糊之处。因此，该问题被认为是有效的，可以构建一个解决方案。\n\n解决方案按要求分为三个部分推导：确定超周期、构建调度和计算总松弛时间。\n\n**第 1 部分：超周期 $H$**\n\n一组周期性任务的超周期 $H$ 是它们周期的最小公倍数 (LCM)。它代表了作业释放模式开始重复的时间间隔。任务为 $\\tau_1$、$\\tau_2$ 和 $\\tau_3$，其周期分别为 $T_1 = 5\\,\\mathrm{ms}$、$T_2 = 10\\,\\mathrm{ms}$ 和 $T_3 = 20\\,\\mathrm{ms}$。\n\n问题陈述了周期是谐波的。这意味着对于任意两个任务 $\\tau_i$ 和 $\\tau_j$，如果 $T_i  T_j$，那么 $T_j$ 是 $T_i$ 的整数倍。我们可以验证这一点：$T_2 = 2 \\times T_1$ 且 $T_3 = 2 \\times T_2$。对于谐波周期集，最小公倍数就是最大的周期。\n\n因此，超周期 $H$ 为：\n$$H = \\mathrm{lcm}(T_1, T_2, T_3) = \\mathrm{lcm}(5, 10, 20) = 20\\,\\mathrm{ms}$$\n\n调度将在时间区间 $[0, H)$ 上构建，即 $[0, 20)$。\n\n**第 2 部分：时间触发调度构建**\n\n通过考虑超周期内每个不同释放时刻的事件来构建调度。所有任务的偏移量均为 $O_k=0$，因此它们是同步释放的。每个任务 $\\tau_k$ 的释放时间为 $n \\times T_k$，其中 $n$ 为非负整数且满足 $n \\times T_k  H$。\n- $\\tau_1$ ($T_1=5$)：在 $t=0, 5, 10, 15$ 释放。\n- $\\tau_2$ ($T_2=10$)：在 $t=0, 10$ 释放。\n- $\\tau_3$ ($T_3=20$)：在 $t=0$ 释放。\n\n不同的释放时间为 $t=0, 5, 10, 15$。我们按时间顺序构建调度。让调度成为一个已占用时间区间的集合。\n\n**时间 $t=0\\,\\mathrm{ms}$:**\n所有三个任务（$\\tau_1, \\tau_2, \\tau_3$）的作业被释放。我们将任务 $\\tau_i$ 的第 $j$ 个作业表示为 $\\tau_{i,j}$。被释放的作业是 $\\tau_{1,1}$、$\\tau_{2,1}$ 和 $\\tau_{3,1}$。\n调度策略要求按周期 $T_k$ 严格递减的顺序对它们进行排序。\n顺序为：$\\tau_{3,1}$ ($T_3=20$)，然后是 $\\tau_{2,1}$ ($T_2=10$)，最后是 $\\tau_{1,1}$ ($T_1=5$)。\n\n1.  **调度 $\\tau_{3,1}$ ($C_3 = 2\\,\\mathrm{ms}$):**\n    最早可用的开始时间 $s \\ge 0$ 是 $s=0$。时隙为 $[0, 2)$。\n    - 分配：$(i=3, s=0, e=2)$。\n    - $\\tau_{3,1}$ 的截止时间为 $D_3=20$。在 $t=2$ 时完成，满足 $2 \\le 20$。满足条件。\n\n2.  **调度 $\\tau_{2,1}$ ($C_2 = 1.5\\,\\mathrm{ms}$):**\n    不与 $[0, 2)$ 重叠的最早可用开始时间 $s \\ge 0$ 是 $s=2$。时隙为 $[2, 3.5)$。\n    - 分配：$(i=2, s=2, e=3.5)$。\n    - $\\tau_{2,1}$ 的截止时间为 $D_2=10$。在 $t=3.5$ 时完成，满足 $3.5 \\le 10$。满足条件。\n\n3.  **调度 $\\tau_{1,1}$ ($C_1 = 1\\,\\mathrm{ms}$):**\n    不与 $[0, 2)$ 或 $[2, 3.5)$ 重叠的最早可用开始时间 $s \\ge 0$ 是 $s=3.5$。时隙为 $[3.5, 4.5)$。\n    - 分配：$(i=1, s=3.5, e=4.5)$。\n    - $\\tau_{1,1}$ 的截止时间为 $D_1=5$。在 $t=4.5$ 时完成，满足 $4.5 \\le 5$。满足条件。\n\n**时间 $t=5\\,\\mathrm{ms}$:**\n新作业 $\\tau_{1,2}$ 被释放。它是唯一的新作业。\n1.  **调度 $\\tau_{1,2}$ ($C_1 = 1\\,\\mathrm{ms}$):**\n    不与现有时间片重叠的最早可用开始时间 $s \\ge 5$ 是 $s=5$。时隙为 $[5, 6)$。\n    - 分配：$(i=1, s=5, e=6)$。\n    - $\\tau_{1,2}$ 的截止时间为 $5+D_1=10$。在 $t=6$ 时完成，满足 $6 \\le 10$。满足条件。\n\n**时间 $t=10\\,\\mathrm{ms}$:**\n新作业 $\\tau_{1,3}$ 和 $\\tau_{2,2}$ 被释放。\n调度顺序（按周期递减）为 $\\tau_{2,2}$ ($T_2=10$)，然后是 $\\tau_{1,3}$ ($T_1=5$)。\n\n1.  **调度 $\\tau_{2,2}$ ($C_2 = 1.5\\,\\mathrm{ms}$):**\n    最早可用的开始时间 $s \\ge 10$ 是 $s=10$。时隙为 $[10, 11.5)$。\n    - 分配：$(i=2, s=10, e=11.5)$。\n    - $\\tau_{2,2}$ 的截止时间为 $10+D_2=20$。在 $t=11.5$ 时完成，满足 $11.5 \\le 20$。满足条件。\n\n2.  **调度 $\\tau_{1,3}$ ($C_1 = 1\\,\\mathrm{ms}$):**\n    不与 $[10, 11.5)$ 重叠的最早可用开始时间 $s \\ge 10$ 是 $s=11.5$。时隙为 $[11.5, 12.5)$。\n    - 分配：$(i=1, s=11.5, e=12.5)$。\n    - $\\tau_{1,3}$ 的截止时间为 $10+D_1=15$。在 $t=12.5$ 时完成，满足 $12.5 \\le 15$。满足条件。\n\n**时间 $t=15\\,\\mathrm{ms}$:**\n新作业 $\\tau_{1,4}$ 被释放。它是唯一的新作业。\n1.  **调度 $\\tau_{1,4}$ ($C_1 = 1\\,\\mathrm{ms}$):**\n    最早可用的开始时间 $s \\ge 15$ 是 $s=15$。时隙为 $[15, 16)$。\n    - 分配：$(i=1, s=15, e=16)$。\n    - $\\tau_{1,4}$ 的截止时间为 $15+D_1=20$。在 $t=16$ 时完成，满足 $16 \\le 20$。满足条件。\n\n这就完成了超周期 $[0, 20)$ 的调度。所有时隙的开始时间 ($s$) 和结束时间 ($e$) 都是时钟节拍 $\\Delta t = 0.5\\,\\mathrm{ms}$ 的倍数，符合要求。\n\n最终的有序时隙分配，以按开始时间 $s$ 递增排序的三元组 $(i,s,e)$ 列表表示为：\n1.  $(3, 0, 2)$\n2.  $(2, 2, 3.5)$\n3.  $(1, 3.5, 4.5)$\n4.  $(1, 5, 6)$\n5.  $(2, 10, 11.5)$\n6.  $(1, 11.5, 12.5)$\n7.  $(1, 15, 16)$\n\n**第 3 部分：总松弛时间 $S$**\n\n总松弛时间 $S$ 是指在一个超周期内处理器处于空闲状态的总时间。它可以通过从超周期时长 $H$ 中减去超周期内所有作业的总执行时间来计算。\n\n首先，我们确定在 $[0, H)$ 内每个任务 $\\tau_k$ 的作业数量 $N_k$：\n- $N_1 = H / T_1 = 20 / 5 = 4$\n- $N_2 = H / T_2 = 20 / 10 = 2$\n- $N_3 = H / T_3 = 20 / 20 = 1$\n\n总执行时间 $C_{\\text{total}}$ 是所有这些作业的执行时间之和：\n$$C_{\\text{total}} = N_1 C_1 + N_2 C_2 + N_3 C_3$$\n$$C_{\\text{total}} = (4 \\times 1\\,\\mathrm{ms}) + (2 \\times 1.5\\,\\mathrm{ms}) + (1 \\times 2\\,\\mathrm{ms})$$\n$$C_{\\text{total}} = 4 + 3 + 2 = 9\\,\\mathrm{ms}$$\n这也等同于总利用率 $U$ 乘以超周期 $H$：\n$$U = \\sum_{k=1}^3 \\frac{C_k}{T_k} = \\frac{1}{5} + \\frac{1.5}{10} + \\frac{2}{20} = 0.2 + 0.15 + 0.1 = 0.45$$\n$$C_{\\text{total}} = U \\times H = 0.45 \\times 20 = 9\\,\\mathrm{ms}$$\n\n总松弛时间 $S$ 为：\n$$S = H - C_{\\text{total}} = 20\\,\\mathrm{ms} - 9\\,\\mathrm{ms} = 11\\,\\mathrm{ms}$$\n\n最终答案将 $H$、调度三元组 $(i,s,e)$ 序列和 $S$ 组合成一个单一的结构。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n20  3  0  2  2  2  3.5  1  3.5  4.5  1  5  6  2  10  11.5  1  11.5  12.5  1  15  16  11\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "与时间触发系统的确定性不同，事件触发系统必须在面对时间不确定性的情况下保证其性能。此练习深入探讨了事件触发系统的可调度性分析。你将运用处理器需求分析这一强大技术，来判断一组具有零星到达和释放抖动的任务是否能满足其最后期限，这是验证响应式系统可靠性的关键技能()。",
            "id": "4251662",
            "problem": "一个工业信息物理系统的数字孪生负责监控一个事件触发的控制回路，该回路在采用最早截止时间优先（EDF）调度算法的单处理器上执行。工作负载由三个独立的零星任务组成，每个任务由其最小到达间隔时间 $T_i$、最坏情况执行时间 $C_i$、相对截止时间 $D_i$ 和发布抖动 $J_i$（每个作业相对于理想事件时间的发布最大延迟）来表征。这些任务是：\n- 任务 $\\tau_1$：$T_1 = 50\\,\\mathrm{ms}$，$C_1 = 8\\,\\mathrm{ms}$，$D_1 = 30\\,\\mathrm{ms}$，$J_1 = 5\\,\\mathrm{ms}$。\n- 任务 $\\tau_2$：$T_2 = 80\\,\\mathrm{ms}$，$C_2 = 10\\,\\mathrm{ms}$，$D_2 = 40\\,\\mathrm{ms}$，$J_2 = 0\\,\\mathrm{ms}$。\n- 任务 $\\tau_3$：$T_3 = 100\\,\\mathrm{ms}$，$C_3 = 15\\,\\mathrm{ms}$，$D_3 = 60\\,\\mathrm{ms}$，$J_3 = 10\\,\\mathrm{ms}$。\n\n从带有发布抖动的零星任务的EDF可行性第一性原理出发，确定使任务集在EDF下可调度所需的最小处理器速度因子 $s_{\\min}$（无量纲）。判断系统在单位速度下是否可调度，并在推导中明确解释与零抖动情况相比，发布抖动如何改变最坏情况下的处理器需求。\n\n将 $s_{\\min}$ 的最终数值答案四舍五入到四位有效数字。将 $s_{\\min}$ 表示为一个无量纲的标量。",
            "solution": "该问题要求计算在最早截止时间优先（EDF）调度算法下，确保一组包含三个带有发布抖动的零星任务可调度所需的最小处理器速度因子 $s_{\\min}$。\n\n首先，我们对问题陈述进行验证。\n\n### 步骤1：提取已知条件\n问题为三个独立的零星任务 $\\tau_i$ 提供了以下数据，其特征由最小到达间隔时间 $T_i$、最坏情况执行时间（单位速度下）$C_i$、相对截止时间 $D_i$ 和发布抖动 $J_i$ 描述。\n\n- 任务 $\\tau_1$：$T_1 = 50\\,\\mathrm{ms}$，$C_1 = 8\\,\\mathrm{ms}$，$D_1 = 30\\,\\mathrm{ms}$，$J_1 = 5\\,\\mathrm{ms}$。\n- 任务 $\\tau_2$：$T_2 = 80\\,\\mathrm{ms}$，$C_2 = 10\\,\\mathrm{ms}$，$D_2 = 40\\,\\mathrm{ms}$，$J_2 = 0\\,\\mathrm{ms}$。\n- 任务 $\\tau_3$：$T_3 = 100\\,\\mathrm{ms}$，$C_3 = 15\\,\\mathrm{ms}$，$D_3 = 60\\,\\mathrm{ms}$，$J_3 = 10\\,\\mathrm{ms}$。\n\n系统使用单个处理器和EDF调度。目标是找到最小处理器速度因子 $s_{\\min}$。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题在既有的实时系统调度理论中有其科学基础。带有发布抖动的零星任务模型是基本零星任务模型的标准扩展。这是一个适定问题，因为它要求基于一套完整的参数计算一个特定、可计算的量（$s_{\\min}$）。语言客观且精确。所提供的数据在数值上是一致的，并且对于一个工业信息物理系统来说是合理的。因此，该问题被认为是有效的。\n\n### 带有抖动的EDF可调度性原理\n\n对于一组在速度为 $s$ 的单处理器上运行的 $n$ 个零星任务，EDF可调度性条件可以使用处理器需求分析来表述。设任务 $\\tau_i$ 在单位速度处理器上的最坏情况执行时间为 $C_i$。在速度因子为 $s$ 的处理器上，执行时间变为 $C_i/s$。\n\n在任何长度为 $L$ 的时间间隔内，总处理器需求 $W(L)$ 不得超过该间隔内可用的处理时间，即 $s \\cdot L$。因此，可调度性条件为：\n$$ \\sum_{i=1}^{n} \\text{demand}_i(L) \\le s \\cdot L, \\quad \\forall L > 0 $$\n其中 $\\text{demand}_i(L)$ 是任务 $\\tau_i$ 在任何长度为 $L$ 的时间间隔内的最大累积执行需求。\n\n最小速度因子 $s_{\\min}$ 是对所有 $L$ 都满足此条件的最小 $s$。这可以表示为：\n$$ s \\ge \\frac{1}{L} \\sum_{i=1}^{n} \\text{demand}_i(L) $$\n因此，我们必须找到右侧表达式在所有 $L > 0$ 上的最大值：\n$$ s_{\\min} = \\max_{L > 0} \\left\\{ \\frac{1}{L} \\sum_{i=1}^{n} W_i(L) \\right\\} $$\n其中 $W_i(L)$ 是任务 $\\tau_i$ 在单位速度下，在长度为 $L$ 的时间间隔内的处理器需求。\n\n### 发布抖动对处理器需求的影响\n\n发布抖动会改变最坏情况下的处理器需求。对于一个没有抖动的任务 $\\tau_i$，在时间 $t$ 到达的作业其截止时间为 $t+D_i$，并立即可供执行。对于有发布抖动 $J_i$ 的情况，与事件时间 $t$ 相关联的作业可能会被延迟，并在时间间隔 $[t, t+J_i]$ 内的任何时间发布。然而，其绝对截止时间仍然是 $t+D_i$。这意味着处理器执行该作业的有效时间窗口被缩短为 $[t+J_i, t+D_i]$，其持续时间为 $D_i - J_i$。这增加了任务的执行密度和紧迫性。\n\n在处理器需求函数的背景下，这个效应通过将相对截止时间 $D_i$ 替换为有效相对截止时间 $D'_i = D_i - J_i$ 来体现。一个任务 $\\tau_i = (C_i, T_i, D_i, J_i)$ 的需求 $W_i(L)$ 由必须在长度为 $L$ 的时间间隔内完成的最大作业数的执行时间给出。这可以表述为：\n$$ W_i(L) = \\max\\left(0, \\left\\lfloor \\frac{L - D_i + J_i}{T_i} \\right\\rfloor + 1\\right) C_i $$\n与零抖动情况下需求为 $\\max\\left(0, \\lfloor \\frac{L - D_i}{T_i} \\rfloor + 1\\right) C_i$ 相比，$+J_i$ 项增加了向下取整函数的参数。这会增加在时间间隔 $L$ 内要求执行的作业数量，从而增加总处理器需求。\n\n### $s_{\\min}$ 的计算\n\n我们将单位速度下的总处理器需求定义为 $W(L) = \\sum_{i=1}^{3} W_i(L)$。我们需要找到 $s_{\\min} = \\max_{L0} \\frac{W(L)}{L}$。$\\frac{W(L)}{L}$ 可能取最大值的点 $L$ 是向下取整函数值发生变化的点。这些点的形式为 $L = k \\cdot T_i + D_i - J_i$，其中 $k$ 为非负整数，对于每个任务 $i \\in \\{1, 2, 3\\}$。\n\n让我们计算有效截止时间 $D'_i = D_i - J_i$：\n- $\\tau_1$：$D'_1 = 30 - 5 = 25 \\, \\mathrm{ms}$\n- $\\tau_2$：$D'_2 = 40 - 0 = 40 \\, \\mathrm{ms}$\n- $\\tau_3$：$D'_3 = 60 - 10 = 50 \\, \\mathrm{ms}$\n\n总需求函数为：\n$$ W(L) = \\max\\left(0, \\left\\lfloor \\frac{L-25}{50} \\right\\rfloor + 1\\right) \\cdot 8 + \\max\\left(0, \\left\\lfloor \\frac{L-40}{80} \\right\\rfloor + 1\\right) \\cdot 10 + \\max\\left(0, \\left\\lfloor \\frac{L-50}{100} \\right\\rfloor + 1\\right) \\cdot 15 $$\n\n$L$ 的关注点由 $L = k T_i + D'_i$ 导出：\n- 对于 $\\tau_1$：$L = 50k + 25 \\implies L \\in \\{25, 75, 125, \\dots\\}$\n- 对于 $\\tau_2$：$L = 80k + 40 \\implies L \\in \\{40, 120, 200, \\dots\\}$\n- 对于 $\\tau_3$：$L = 100k + 50 \\implies L \\in \\{50, 150, 250, \\dots\\}$\n\n让我们在这些排序后的点上评估需求密度 $h(L) = W(L)/L$。\n\n- 对于 $L=25$：\n  $W(25) = (\\lfloor\\frac{25-25}{50}\\rfloor+1) \\cdot 8 + 0 + 0 = 8$\n  $h(25) = \\frac{8}{25} = 0.32$\n\n- 对于 $L=40$：\n  $W(40) = (\\lfloor\\frac{40-25}{50}\\rfloor+1) \\cdot 8 + (\\lfloor\\frac{40-40}{80}\\rfloor+1) \\cdot 10 + 0 = (0+1)\\cdot 8 + (0+1)\\cdot 10 = 18$\n  $h(40) = \\frac{18}{40} = 0.45$\n\n- 对于 $L=50$：\n  $W(50) = (\\lfloor\\frac{50-25}{50}\\rfloor+1) \\cdot 8 + (\\lfloor\\frac{50-40}{80}\\rfloor+1) \\cdot 10 + (\\lfloor\\frac{50-50}{100}\\rfloor+1) \\cdot 15 = (0+1)\\cdot 8 + (0+1)\\cdot 10 + (0+1)\\cdot 15 = 8 + 10 + 15 = 33$\n  $h(50) = \\frac{33}{50} = 0.66$\n\n- 对于 $L=75$：\n  $W(75) = (\\lfloor\\frac{75-25}{50}\\rfloor+1) \\cdot 8 + (\\lfloor\\frac{75-40}{80}\\rfloor+1) \\cdot 10 + (\\lfloor\\frac{75-50}{100}\\rfloor+1) \\cdot 15 = (1+1)\\cdot 8 + (0+1)\\cdot 10 + (0+1)\\cdot 15 = 16 + 10 + 15 = 41$\n  $h(75) = \\frac{41}{75} \\approx 0.5467$\n\n- 对于 $L=120$：\n  $W(120) = (\\lfloor\\frac{120-25}{50}\\rfloor+1) \\cdot 8 + (\\lfloor\\frac{120-40}{80}\\rfloor+1) \\cdot 10 + (\\lfloor\\frac{120-50}{100}\\rfloor+1) \\cdot 15 = (1+1)\\cdot 8 + (1+1)\\cdot 10 + (0+1)\\cdot 15 = 16 + 20 + 15 = 51$\n  $h(120) = \\frac{51}{120} = 0.425$\n\n总利用率为 $U = \\sum_{i=1}^{3} \\frac{C_i}{T_i} = \\frac{8}{50} + \\frac{10}{80} + \\frac{15}{100} = 0.16 + 0.125 + 0.15 = 0.435$。当 $L \\to \\infty$ 时，$h(L) \\to U$。我们计算出的 $h(L)$ 值在 $L=50$ 处达到最大值后开始递减，并趋向于 $U$。观察到的最大值为 $0.66$（在 $L = 50$ 处）。\n因此，$s_{\\min} = \\max_{L} h(L) = 0.66$。\n\n四舍五入到四位有效数字，$s_{\\min} = 0.6600$。\n\n最后一步是确定系统在单位速度（$s=1$）下是否可调度。一个系统在单位速度下可调度的充分必要条件是 $s_{\\min} \\le 1$。由于我们计算出 $s_{\\min} = 0.6600$，小于 $1$，因此该任务集在单位速度下是可调度的。",
            "answer": "$$\n\\boxed{0.6600}\n$$"
        },
        {
            "introduction": "许多先进的信息物理系统采用混合架构，以同时利用时间触发和事件触发两种模式的优点。这项练习让你扮演系统架构师的角色，负责优化处理时间在可预测的TT活动和响应式的ET作业之间的分配。你将需要在一个约束优化问题中，量化地探索确定性（以抖动界限表示）与延迟之间的权衡，这是混合关键性系统设计中的一个核心挑战()。",
            "id": "4251626",
            "problem": "一个数字孪生协调一个混合关键性赛博物理控制器，该控制器运行一个周期为 $T = 100\\,\\mathrm{ms}$ 的周期性时间触发 (TT) 调度，并且仅在明确分配的空闲窗口内接纳事件触发 (ET) 作业。每个周期有两个 TT 活动：活动 $\\mathcal{A}$ 的基准开始时间为 $t_{\\mathcal{A}} = 20\\,\\mathrm{ms}$，活动 $\\mathcal{B}$ 的基准开始时间为 $t_{\\mathcal{B}} = 60\\,\\mathrm{ms}$。为避免违反时间确定性，TT 活动的开始时间抖动受到限制：紧邻 $\\mathcal{A}$ 之前的空闲窗口长度 $s_1$ 必须满足 $0 \\le s_1 \\le J_{\\mathcal{A}}$，其中 $J_{\\mathcal{A}} = 8\\,\\mathrm{ms}$；紧邻 $\\mathcal{B}$ 之前的空闲窗口长度 $s_2$ 必须满足 $0 \\le s_2 \\le J_{\\mathcal{B}}$，其中 $J_{\\mathcal{B}} = 12\\,\\mathrm{ms}$。每个周期的总空闲预算是固定的，并且必须完全分配，即 $s_1 + s_2 = S$，其中 $S = 15\\,\\mathrm{ms}$。\n\n假设 ET 作业的到达是一个齐次泊松过程，其速率 $\\lambda$ 足够小，以至于平均而言，空闲窗口内因积压而产生的排队相对于纯 TT 间隔引起的门控延迟可以忽略不计。假设 ET 作业只能在到达后的下一个空闲窗口开始时才能开始服务，并且在空闲窗口期间到达的作业门控延迟为零。在这些假设下，将平均 ET 作业延迟建模为从周期内一个均匀随机的到达时刻到下一个空闲窗口开始的期望前向时间。使用第一性原理（更新周期中到达相位的均匀抽样，以及将抖动定义为空闲引起的 TT 开始延迟），推导该期望延迟关于 $s_1$ 和 $s_2$ 的解析表达式，然后求解约束优化问题，以找到在保持 TT 抖动界限的同时最小化平均 ET 作业延迟的空闲分配 $(s_1, s_2)$。\n\n在你的推导中，从周期性调度中均匀到达相位和在服务窗口间隙中的前向复发时间的基本定义开始。通过展示最优分配如何与抖动界限和 TT 调度的几何结构相关联，来定量地说明其中的权衡。\n\n以毫秒为单位，将最优的 $(s_1, s_2)$ 报告为单行向量。无需四舍五入；以 $\\mathrm{ms}$ 表示精确值。",
            "solution": "该问题被评估为有效。它在科学上基于赛博物理系统的实时调度原则，作为一个约束优化问题被良好地提出，并且定义客观，没有歧义。\n\n目标是找到空闲分配 $(s_1, s_2)$，以在满足若干约束条件的情况下，最小化事件触发 (ET) 作业的平均延迟。该系统有一个时间触发 (TT) 调度，周期为 $T = 100\\,\\mathrm{ms}$。\n\n首先，我们定义一个周期内调度的结构，该周期覆盖区间 $[0, T)$。有两个 TT 活动 $\\mathcal{A}$ 和 $\\mathcal{B}$，其基准开始时间分别为 $t_{\\mathcal{A}} = 20\\,\\mathrm{ms}$ 和 $t_{\\mathcal{B}} = 60\\,\\mathrm{ms}$。在这两个活动之前，紧邻分配了两个用于 ET 作业的空闲窗口，时长分别为 $s_1$ 和 $s_2$。\n第一个空闲窗口 $I_1$ 的时长为 $s_1$，位于时间区间 $[t_{\\mathcal{A}} - s_1, t_{\\mathcal{A}}]$，即 $[20 - s_1, 20]$。\n第二个空闲窗口 $I_2$ 的时长为 $s_2$，位于时间区间 $[t_{\\mathcal{B}} - s_2, t_{\\mathcal{B}}]$，即 $[60 - s_2, 60]$。\n\nET 作业在这些空闲窗口的开始处得到服务。假设在空闲窗口期间到达的作业延迟为零。在纯 TT 间隔期间到达的作业必须等到下一个可用空闲窗口的开始。平均延迟定义为从一个均匀随机的到达时刻到下一个服务机会开始的期望前向时间。\n\n设 $\\tau$ 为 ET 作业的到达时间，假设它是在区间 $[0, T)$ 上均匀分布的随机变量。$\\tau$ 的概率密度函数为 $f(\\tau) = \\frac{1}{T}$。在时间 $\\tau$ 到达的延迟记为 $W(\\tau)$。平均延迟 $L$ 是 $W(\\tau)$ 的期望值：\n$$L = E[W(\\tau)] = \\int_0^T W(\\tau) f(\\tau) d\\tau = \\frac{1}{T} \\int_0^T W(\\tau) d\\tau$$\n\n调度由两个空闲窗口 $I_1$ 和 $I_2$ 以及它们之间的纯 TT 间隔（间隙）组成。\n$I_1$ 结束到 $I_2$ 开始之间的间隔是第一个间隙 $G_1 = [20, 60 - s_2]$。这个间隙的长度是 $l_1 = (60 - s_2) - 20 = 40 - s_2$。\n$I_2$ 结束到下一个周期的 $I_1$ 开始之间的间隔是第二个间隙 $G_2$。这个间隙跨越周期边界，覆盖 $[60, 100)$ 和 $[0, 20-s_1)$。其总长度为 $l_2 = (100 - 60) + (20 - s_1) = 60 - s_1$。\n\n对于在长度为 $l$、结束于时间 $t_{end}$ 的间隙内于时间 $\\tau$ 到达的作业，其等待时间为 $W(\\tau) = t_{end} - \\tau$。等待时间在该间隙上的积分是均匀过程中平均前向复发时间的标准结果，由 $\\frac{l^2}{2}$ 给出。\n因此，所有间隙的总积分等待时间是每个间隙贡献的总和：\n$$\\int_0^T W(\\tau) d\\tau = \\int_{G_1} W(\\tau) d\\tau + \\int_{G_2} W(\\tau) d\\tau = \\frac{l_1^2}{2} + \\frac{l_2^2}{2}$$\n代入 $l_1$ 和 $l_2$ 的表达式：\n$$\\int_0^T W(\\tau) d\\tau = \\frac{(40 - s_2)^2}{2} + \\frac{(60 - s_1)^2}{2}$$\n因此，平均延迟 $L$ 为：\n$$L(s_1, s_2) = \\frac{1}{T} \\left( \\frac{(40 - s_2)^2}{2} + \\frac{(60 - s_1)^2}{2} \\right) = \\frac{1}{200} \\left( (40 - s_2)^2 + (60 - s_1)^2 \\right)$$\n\n我们必须在给定的约束条件下最小化该函数：\n1. 总空闲预算：$s_1 + s_2 = S = 15$\n2. 抖动界限：$0 \\le s_1 \\le J_{\\mathcal{A}} = 8$ 且 $0 \\le s_2 \\le J_{\\mathcal{B}} = 12$\n\n我们可以通过将 $s_2 = 15 - s_1$ 代入目标函数，将问题简化为单变量问题：\n$$L(s_1) = \\frac{1}{200} \\left( (40 - (15 - s_1))^2 + (60 - s_1)^2 \\right)$$\n$$L(s_1) = \\frac{1}{200} \\left( (25 + s_1)^2 + (60 - s_1)^2 \\right)$$\n\n接下来，我们定义 $s_1$ 的可行范围。显式约束是 $0 \\le s_1 \\le 8$。对 $s_2$ 的约束也意味着对 $s_1$ 的约束：\n$$0 \\le s_2 \\le 12 \\implies 0 \\le 15 - s_1 \\le 12$$\n不等式 $15 - s_1 \\ge 0$ 意味着 $s_1 \\le 15$。\n不等式 $15 - s_1 \\le 12$ 意味着 $s_1 \\ge 3$。\n结合所有对 $s_1$ 的约束，我们有 $s_1 \\in [0, 8]$ 和 $s_1 \\in [3, 15]$。两者的交集给出了 $s_1$ 的最终可行域，即闭区间 $[3, 8]$。\n\n为了找到 $L(s_1)$ 的最小值，我们可以分析括号内的二次函数，称之为 $f(s_1) = (25 + s_1)^2 + (60 - s_1)^2$。最小化 $L(s_1)$ 等同于最小化 $f(s_1)$。我们求其关于 $s_1$ 的导数：\n$$f'(s_1) = \\frac{d}{ds_1} \\left( (25 + s_1)^2 + (60 - s_1)^2 \\right) = 2(25 + s_1) - 2(60 - s_1) = 50 + 2s_1 - 120 + 2s_1 = 4s_1 - 70$$\n将导数设为零以找到无约束最小值：\n$$4s_1 - 70 = 0 \\implies s_1 = \\frac{70}{4} = 17.5$$\n二阶导数为 $f''(s_1) = 4 > 0$，这证实了 $f(s_1)$ 是一个凸抛物线，在 $s_1 = 17.5$ 处有最小值。\n\n这个无约束最小值 $s_1 = 17.5$ 位于可行区间 $[3, 8]$ 之外。由于该函数是一个在 $s_1=17.5$ 处取得最小值的抛物线，因此对于所有 $s_1  17.5$，$f(s_1)$ 函数是严格递减的。因此，它在整个可行区间 $[3, 8]$ 上也是严格递减的。\n因此，该函数在此区间上的最小值必然出现在最右侧的边界点，即 $s_1 = 8$。\n\n$s_1$ 的最优分配是 $s_1^* = 8\\,\\mathrm{ms}$。\n相应的 $s_2$ 最优值可从预算约束中求得：\n$$s_2^* = 15 - s_1^* = 15 - 8 = 7\\,\\mathrm{ms}$$\n最优分配为 $(s_1^*, s_2^*) = (8, 7)$。该解是有效的，因为它满足所有约束条件：$s_1^* = 8 \\in [3, 8]$ 且 $s_2^* = 7$，满足 $0 \\le 7 \\le 12$。\n\n这里的权衡是显而易见的。当间隙长度的平方和 $l_1^2 + l_2^2$ 最小时，平均延迟最小化。对于固定的和 $l_1+l_2 = (40-s_2) + (60-s_1) = 100-S = 85$，当长度相等时，即 $l_1=l_2=42.5$ 时，平方和最小。这将要求 $60-s_1=42.5 \\implies s_1=17.5$。然而，活动 $\\mathcal{A}$ 的抖动界限施加了约束 $s_1 \\le 8$。由于目标函数随着 $s_1$ 接近无约束最优值 $17.5$ 而减小，因此约束最优解是通过使 $s_1$ 尽可能大来找到的，即 $s_1 = 8$。系统平衡长纯 TT 间隔的意愿受到了 TT 任务 $\\mathcal{A}$ 的时间确定性要求的限制。\n最优解充分利用了 TT 任务 $\\mathcal{A}$ 的允许抖动，分配了可能的最大空闲时间 $s_1 = J_{\\mathcal{A}} = 8\\,\\mathrm{ms}$，并将剩余的空闲预算分配给 $s_2$。\n以毫秒为单位的最优空闲分配为 $(s_1, s_2) = (8, 7)$。",
            "answer": "$$\\boxed{\\begin{pmatrix} 8  7 \\end{pmatrix}}$$"
        }
    ]
}
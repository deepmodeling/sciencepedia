{
    "hands_on_practices": [
        {
            "introduction": "平均一致性是群体智能和分布式决策的基石，它使得网络中的智能体能够计算其初始状态的全局平均值。然而，在实际的赛博物理系统中，传感器测量往往存在恒定的偏差，这会破坏一致性算法的准确性，导致群体收敛到错误的值。此练习将引导您深入探索这一实际问题：首先，您需要从第一性原理出发，推导出由传感器偏差引起的稳态误差的精确表达式；然后，您将设计一个分布式的校准方案，通过在每个智能体的数字孪生中引入一个偏差估计器，来动态地补偿测量误差，从而恢复群体向真实平均值的收敛。这项练习融合了系统分析与控制器设计，为您提供了解决分布式系统中实际挑战的宝贵经验 。",
            "id": "4249398",
            "problem": "考虑一个由 $n$ 个信息物理智能体组成的互联群体，构成一个网络化的信息物理系统 (CPS)。通信拓扑是一个无向、连通的加权图，其邻接权重对称 $a_{ij} = a_{ji} \\geq 0$，拉普拉斯矩阵 $L \\in \\mathbb{R}^{n \\times n}$ 定义为 $L = D - A$，度矩阵 $D = \\mathrm{diag}(d_{1},\\dots,d_{n})$ 其中 $d_{i} = \\sum_{j=1}^{n} a_{ij}$，并且 $\\mathrm{null}(L) = \\mathrm{span}\\{\\mathbf{1}\\}$，其中 $\\mathbf{1} \\in \\mathbb{R}^{n}$ 是全一向量。\n\n每个智能体 $i \\in \\{1,\\dots,n\\}$ 拥有一个物理状态 $x_{i}(t)$ 和一个与邻居通信的数字孪生体。智能体测量一个带偏置的量 $y_{i}(t) = x_{i}(t) + \\beta_{i}$，其中传感器偏置 $\\beta_{i} \\in \\mathbb{R}$ 是未知常数，并利用邻居交换的测量值 $y_{j}(t)$ 运行连续时间平均一致性算法：\n$$\n\\dot{x}_{i}(t) = \\sum_{j=1}^{n} a_{ij} \\big(y_{j}(t) - y_{i}(t)\\big).\n$$\n令 $x(0) \\in \\mathbb{R}^{n}$ 表示初始状态向量，并定义无偏置的真实平均值 $\\bar{x} = \\frac{1}{n} \\mathbf{1}^{\\top} x(0)$。在上述协议下，群体试图就平均值达成一致，但偏置 $\\beta_{i}$ 会干扰演化过程。\n\n任务1：从协议、图定义和测量模型出发，推导稳态误差向量 $e^{\\star} \\in \\mathbb{R}^{n}$，其元素为 $e^{\\star}_{i} = x^{\\star}_{i} - \\bar{x}$，其中 $x^{\\star}$ 表示在带偏置的一致性动力学下 $x(t)$ 当 $t \\to \\infty$ 时的极限。用 $\\beta \\in \\mathbb{R}^{n}$ 和标量平均偏置 $\\bar{\\beta} = \\frac{1}{n} \\mathbf{1}^{\\top} \\beta$ 以闭式形式表示 $e^{\\star}$。\n\n任务2：提出一种分布式信息层校准方案，为每个智能体在其数字孪生体内部增加一个估计器状态 $\\hat{\\beta}_{i}(t)$，并在一致性更新中用校准后的输入 $r_{i}(t) = y_{i}(t) - \\hat{\\beta}_{i}(t)$ 替换测量输入 $y_{i}(t)$。仅使用邻居交换和拉普拉斯耦合，指定 $\\hat{\\beta}_{i}(t)$ 的局部动力学和修改后的一致性动力学，使得所有智能体都能收敛到无偏置的平均值 $\\bar{x}$，即使存在任意常数偏置 $\\beta_{i}$。推导堆叠的闭环动力学，识别不变量，并给出一个标量估计器增益 $\\gamma > 0$ 和一个初始化准则的充分条件，以确保对所有 $i$ 收敛到 $x_{i}(t) \\to \\bar{x}$。不需要数值近似。\n\n你的最终答案必须是任务1中得到的 $e^{\\star}$ 的闭式表达式。不需要四舍五入，也不需要单位。",
            "solution": "我们首先将动力学表示为堆叠向量形式，并分析由偏置引起的扰动。定义向量 $x(t) \\in \\mathbb{R}^{n}$、$y(t) \\in \\mathbb{R}^{n}$ 和 $\\beta \\in \\mathbb{R}^{n}$，其分量分别为 $x_{i}(t)$、$y_{i}(t)$ 和 $\\beta_{i}$。测量模型为 $y(t) = x(t) + \\beta$。平均一致性协议的堆叠形式为\n$$\n\\dot{x}(t) = -L y(t) = -L \\big(x(t) + \\beta\\big) = -L x(t) - L \\beta.\n$$\n我们回顾一下关于连通无向图的基本事实：$L$ 是对称半正定矩阵，其零空间为 $\\mathrm{null}(L) = \\mathrm{span}\\{\\mathbf{1}\\}$，所有其他特征值都严格为正。因为 $\\mathbf{1}^{\\top} L = \\mathbf{0}^{\\top}$，所以 $\\mathbf{1}^{\\top} \\dot{x}(t) = -\\mathbf{1}^{\\top} L \\big(x(t) + \\beta\\big) = 0$。因此，$\\mathbf{1}^{\\top} x(t)$ 是一个不变量，这意味着平均值 $\\bar{x}(t) = \\frac{1}{n} \\mathbf{1}^{\\top} x(t)$ 随时间保持不变，始终等于其初始值 $\\bar{x}(0)$。\n\n为了描述稳态，我们考虑 $z(t) \\triangleq x(t) + \\beta$ 的演化。利用上述动力学，\n$$\n\\dot{z}(t) = \\dot{x}(t) = -L \\big(x(t) + \\beta\\big) = -L z(t).\n$$\n因此 $z(t)$ 遵循一个标准的一致性流。对于连通图，解满足\n$$\n\\lim_{t \\to \\infty} z(t) = \\frac{1}{n} \\mathbf{1}\\mathbf{1}^{\\top} z(0) = \\frac{1}{n} \\mathbf{1}\\mathbf{1}^{\\top} \\big(x(0) + \\beta\\big) = \\big(\\bar{x}(0) + \\bar{\\beta}\\big)\\mathbf{1}.\n$$\n因此，稳态 $x^{\\star}$ 为\n$$\nx^{\\star} = \\lim_{t \\to \\infty} x(t) = \\lim_{t \\to \\infty} \\big(z(t) - \\beta\\big) = \\big(\\bar{x}(0) + \\bar{\\beta}\\big)\\mathbf{1} - \\beta.\n$$\n定义相对于无偏平均值 $\\bar{x}(0)$ 的误差向量 $e^{\\star} \\in \\mathbb{R}^{n}$ 为 $e^{\\star} = x^{\\star} - \\bar{x}(0)\\mathbf{1}$。代入 $x^{\\star}$ 的表达式可得\n$$\ne^{\\star} = \\Big(\\big(\\bar{x}(0) + \\bar{\\beta}\\big)\\mathbf{1} - \\beta\\Big) - \\bar{x}(0)\\mathbf{1} = \\bar{\\beta}\\,\\mathbf{1} - \\beta.\n$$\n按分量来看，对所有 $i$ 都有 $e^{\\star}_{i} = \\bar{\\beta} - \\beta_{i}$。这表明，在没有校准的情况下，每个智能体相对于真实平均值的稳态误差是网络平均偏置与其局部偏置之差。\n\n现在我们提出一种分布式校准方案。每个智能体维持一个估计器状态 $\\hat{\\beta}_{i}(t)$，校准后的输入为 $r_{i}(t) = y_{i}(t) - \\hat{\\beta}_{i}(t)$。修改后的一致性更新为\n$$\n\\dot{x}(t) = -L r(t) = -L \\big(y(t) - \\hat{\\beta}(t)\\big),\n$$\n其中 $r(t)$ 和 $\\hat{\\beta}(t)$ 是相应的堆叠向量。我们选择一个由拉普拉斯耦合驱动的简单分布式估计器：\n$$\n\\dot{\\hat{\\beta}}(t) = \\gamma\\, L \\big(y(t) - \\hat{\\beta}(t)\\big),\n$$\n其中标量增益 $\\gamma > 0$。\n\n定义 $s(t) \\triangleq y(t) - \\hat{\\beta}(t) = x(t) + \\beta - \\hat{\\beta}(t)$。结合这两个动力学，\n$$\n\\dot{s}(t) = \\dot{y}(t) - \\dot{\\hat{\\beta}}(t) = \\dot{x}(t) - \\gamma\\, L \\big(y(t) - \\hat{\\beta}(t)\\big) = -L s(t) - \\gamma\\, L s(t) = -(1+\\gamma) L s(t).\n$$\n因此 $s(t)$ 是一个在速率因子为 $(1+\\gamma)$ 的拉普拉斯流下演化的一致性状态。其平均值 $\\bar{s}(t) = \\frac{1}{n} \\mathbf{1}^{\\top} s(t)$ 是不变的，并且 $\\lim_{t \\to \\infty} s(t) = \\bar{s}(0)\\,\\mathbf{1}$。\n因为 $s(0) = y(0) - \\hat{\\beta}(0) = x(0) + \\beta - \\hat{\\beta}(0)$，其初始平均值为 $\\bar{s}(0) = \\bar{x}(0) + \\bar{\\beta} - \\bar{\\hat{\\beta}}(0)$。如果初始化满足标量准则 $\\bar{\\hat{\\beta}}(0) = \\bar{\\beta}$，那么 $\\bar{s}(0) = \\bar{x}(0)$ 且 $s(t) \\to \\bar{x}(0)\\,\\mathbf{1}$。\n当 $s(t)$ 趋近于 $\\bar{x}(0)\\,\\mathbf{1}$ 时，修改后的一致性动力学渐近地变为 $\\dot{x}(t) = -L s(t) \\to -L \\big(\\bar{x}(0)\\,\\mathbf{1}\\big) = \\mathbf{0}$。由于 $\\bar{x}(t)$ 仍然是一个不变量，通过在与 $\\mathbf{1}$ 正交的子空间上的标准一致性收敛，$x(t)$ 收敛到常数向量 $\\bar{x}(0)\\,\\mathbf{1}$。\n\n因此，收敛的充分条件是：\n- 通信图是无向且连通的；\n- 估计器增益满足 $\\gamma > 0$；\n- 估计器平均值被初始化为平均偏置，即 $\\bar{\\hat{\\beta}}(0) = \\bar{\\beta}$。\n\n回到任务1，对于未校准的情况，稳态误差为\n$$\ne^{\\star} = \\bar{\\beta}\\,\\mathbf{1} - \\beta.\n$$\n这是一个完全用偏置向量及其网络平均值表示的闭式表达式。",
            "answer": "$$\\boxed{\\bar{\\beta}\\,\\mathbf{1}-\\beta}$$"
        },
        {
            "introduction": "在真实的赛博物理系统中，智能体之间的通信链路并非总是可靠的，数据包丢失是一种常见的现象，它给分布式算法的收敛性带来了不确定性。本练习将一致性问题置于一个更现实的随机环境中，其中通信链路的每一次连接都可能以一定的概率失败。您的任务是分析这种随机数据包丢失对离散时间一致性算法稳定性的影响。通过推导系统“分歧度”（disagreement）的均方误差动态演化过程，您将能够确定保证系统在均方意义下收敛的条件，并精确计算出维持稳定所需的最低数据包成功概率。这项练习将使您掌握随机系统稳定性的分析方法，这对于设计在不完美通信条件下依然稳健的群体行为至关重要 。",
            "id": "4249427",
            "problem": "一群由$n$个相同智能体组成的群体嵌入到一个信息物理系统（Cyber-Physical System, CPS）中，该系统带有一个数字孪生（Digital Twin, DT）用于监控和预测群体行为。这些智能体在全连接的基础通信拓扑上执行离散时间线性一致性算法。在时间步 $k \\in \\mathbb{N}$，智能体的状态向量为 $x_k \\in \\mathbb{R}^n$，智能体根据随机一致性定律 $x_{k+1} = x_k - \\alpha L_k x_k$ 进行更新，其中 $\\alpha > 0$ 是一个固定的步长，$L_k$ 是在时间 $k$ 的随机图拉普拉斯矩阵。全连接的基础图具有单位权重的边；在每个时间步，每条边独立地经历伯努利丢包，因此边 $(i,j)$ 以概率 $p \\in (0,1]$ 激活，以概率 $1-p$ 不激活。令分歧（误差）为 $e_k = x_k - \\frac{1}{n}(\\mathbf{1}^{\\top} x_k)\\mathbf{1}$，其中 $\\mathbf{1}$ 是 $n$ 维全一向量。假设随机链路故障与智能体状态之间是独立的。\n\n从第一性原理（图拉普拉斯矩阵的定义、伯努利变量在边和时间上的独立性，以及由 $\\mathbf{1}$ 作为任何拉普拉斯矩阵的特征向量所引起的不变性）出发，推导 $E\\big[\\|e_{k}\\|^2\\big]$ 的精确均方误差递归式，并用它来获得沿着分歧子空间的单步均方误差收缩因子 $r(p,\\alpha,n)$。然后，确定数据包成功概率阈值 $p_{\\star}(n,\\alpha)$ 的闭式表达式，在该阈值下均方误差收缩因子满足 $r\\big(p_{\\star},\\alpha,n\\big) = 1$。\n\n将最终答案表示为关于 $n$ 和 $\\alpha$ 的单个解析表达式。无需单位。不要四舍五入；提供精确的闭式形式。",
            "solution": "该问题要求推导随机一致性算法的数据包成功概率阈值 $p_{\\star}(n,\\alpha)$。首先我们注意到平均状态 $\\bar{x}_k = \\frac{1}{n}\\mathbf{1}^{\\top}x_k$ 是一个守恒量，因为对于任何拉普拉斯矩阵 $L_k$，都有 $\\mathbf{1}^{\\top}L_k = \\mathbf{0}^{\\top}$。分歧向量 $e_k = x_k - \\bar{x}\\mathbf{1}$ 满足 $e_{k+1} = (I - \\alpha L_k)e_k$ 并且 $\\mathbf{1}^{\\top}e_k = 0$。\n\n我们分析均方误差的演化。在时间 $k$ 的状态给定的条件下，期望的下一步均方误差为：\n$$E\\big[\\|e_{k+1}\\|^2 \\mid e_k\\big] = e_k^{\\top}E\\big[(I - \\alpha L_k)^2\\big]e_k = e_k^{\\top}(I - 2\\alpha E[L_k] + \\alpha^2 E[L_k^2])e_k$$\n对于具有独立边故障的全连接图，可以证明 $E[L_k] = pL_{K_n}$，其中 $L_{K_n}$ 是确定性全连接图的拉普拉斯矩阵。进一步的计算（利用边的独立性）表明，在与 $\\mathbf{1}$ 正交的分歧子空间上，均方收缩因子 $r$ 是一个标量，其值为：\n$$r(p,\\alpha,n) = (1 - p\\alpha n)^2 + n(n-1)p(1-p)\\alpha^2$$\n系统达到稳定性的临界点是当收缩因子等于1时，即 $r(p,\\alpha,n)=1$。展开并化简该方程：\n$$1 - 2p\\alpha n + p^2\\alpha^2 n^2 + p n(n-1)\\alpha^2 - p^2 n(n-1)\\alpha^2 = 1$$\n$$-2p\\alpha n + p^2\\alpha^2(n^2 - n(n-1)) + p n(n-1)\\alpha^2 = 0$$\n$$-2p\\alpha n + p^2\\alpha^2 n + p n(n-1)\\alpha^2 = 0$$\n假设 $p, \\alpha, n$ 均不为零，两边同除以 $p\\alpha n$，得到：\n$$-2 + p\\alpha + (n-1)\\alpha = 0$$\n求解 $p$，我们得到阈值 $p_{\\star}$：\n$$p_{\\star} = \\frac{2 - (n-1)\\alpha}{\\alpha}$$",
            "answer": "$$\\boxed{\\frac{2-(n-1)\\alpha}{\\alpha}}$$"
        },
        {
            "introduction": "当群体智能从信息层面的共识扩展到物理空间的协同运动时，确保智能体之间的安全成为首要任务。集群（flocking）等集体行为要求智能体在保持队形的同时必须避免相互碰撞。本练习将向您介绍一种用于设计安全关键型控制的强大现代工具——控制屏障函数（Control Barrier Functions, CBFs）。您将面对一个经典的集群模型，其中包含吸引和排斥两种力，您的任务是运用 CBF 理论，为控制器中的排斥力强度推导出一个解析下界。满足此条件的控制器能够从数学上保证，无论智能体如何运动，它们之间的距离永远不会小于预设的安全阈值，从而实现零碰撞。这项练习将为您提供设计可验证安全（provably safe）群体系统的严谨工程方法 。",
            "id": "4249437",
            "problem": "考虑一个由$N$个相同的平面智能体组成的网络物理系统（CPS），其运动学模型为 $\\dot{x}_i(t) = u_i(t)$，其中 $x_i(t) \\in \\mathbb{R}^2$ 是智能体状态，$u_i(t) \\in \\mathbb{R}^2$ 是控制输入。该集群的数字孪生实现了一个集群控制器，该控制器包含两个部分：一个吸引性的一致性项和一个在预设安全距离附近激活的短程排斥项。具体来说，对于智能体 $i$，\n$$\nu_i \\,=\\, u_i^{\\mathrm{att}} + u_i^{\\mathrm{rep}},\n$$\n其中吸引性一致性项为\n$$\nu_i^{\\mathrm{att}} \\,=\\, -\\,b \\sum_{j \\neq i} \\big(x_i - x_j\\big),\n$$\n其中常数 $b > 0$；排斥项为\n$$\nu_i^{\\mathrm{rep}} \\,=\\, \\alpha \\sum_{j \\neq i} \\sigma\\!\\big(r_{ij}\\big)\\, r_{ij}^{-q} \\,\\frac{x_i - x_j}{r_{ij}},\n$$\n其中 $r_{ij} := \\|x_i - x_j\\|$，$q > 0$ 为指数，$\\alpha > 0$ 为强度，$\\sigma(r)$ 是一个二元激活函数，定义为：当 $r \\le d_0$ 时 $\\sigma(r) = 1$，当 $r > d_0$ 时 $\\sigma(r) = 0$，$d_0 > 0$ 是预设的最小分隔距离。数字孪生通过控制障碍函数（CBF）$h_{ij}(x) := \\|x_i - x_j\\|^2 - d_0^2$ 来强制实现成对安全性，要求安全集 $\\{x : h_{ij}(x) \\ge 0 \\ \\text{for all}\\ i \\neq j\\}$ 具有前向不变性。\n\n从第一性原理（相对距离动力学的定义和零化障碍证书的前向不变性条件）出发，推导出一个关于排斥强度 $\\alpha$ 的闭式下界，该下界用 $N$、$b$、$d_0$ 和 $q$ 表示，并能保证在每个边界点 $h_{ij}(x) = 0$ 处，$\\dot{h}_{ij}(x) \\ge 0$。假设在最坏情况下，当 $h_{ij}(x) = 0$ 时，对于该智能体对，仅有智能体 $i$ 和 $j$ 之间的排斥作用被激活，而其他智能体对并未同时处于其激活边界上。请将您的最终答案表示为关于 $N$、$b$、$d_0$ 和 $q$ 的单一解析表达式。不需要进行数值近似。",
            "solution": "为了保证安全集 $\\{x : h_{ij}(x) \\ge 0, \\forall i \\neq j\\}$ 的前向不变性，我们需要确保在安全集的边界上，即当 $h_{ij}(x) = 0$ 时，对所有智能体对 $(i, j)$ 都有 $\\dot{h}_{ij}(x) \\ge 0$。\n\n障碍函数为 $h_{ij}(x) = \\|x_i - x_j\\|^2 - d_0^2$。\n条件 $h_{ij}(x) = 0$ 意味着智能体 $i$ 和 $j$ 之间的距离恰好是安全距离，即 $r_{ij} = \\|x_i - x_j\\| = d_0$。\n\n我们计算 $h_{ij}(x)$ 沿系统轨迹的时间导数：\n$$\n\\dot{h}_{ij} = \\frac{d}{dt} \\left( (x_i - x_j)^T(x_i - x_j) - d_0^2 \\right) = 2(x_i - x_j)^T (\\dot{x}_i - \\dot{x}_j).\n$$\n代入系统动力学 $\\dot{x}_i = u_i$，我们得到安全条件为：\n$$\n\\dot{h}_{ij} = 2(x_i - x_j)^T (u_i - u_j) \\ge 0.\n$$\n现在，我们求出相对控制输入 $u_i - u_j$ 的表达式。\n$$\nu_i - u_j = (u_i^{\\mathrm{att}} - u_j^{\\mathrm{att}}) + (u_i^{\\mathrm{rep}} - u_j^{\\mathrm{rep}}).\n$$\n1.  **吸引部分之差 ($u_i^{\\mathrm{att}} - u_j^{\\mathrm{att}}$):**\n    $$\n    u_i^{\\mathrm{att}} - u_j^{\\mathrm{att}} = -b \\left( \\sum_{k \\neq i} (x_i - x_k) - \\sum_{k \\neq j} (x_j - x_k) \\right) = -b \\left( N(x_i-x_j) \\right) = -b N (x_i - x_j).\n    $$\n\n2.  **排斥部分之差 ($u_i^{\\mathrm{rep}} - u_j^{\\mathrm{rep}}$):**\n    我们在边界 $h_{ij}(x) = 0$ (即 $r_{ij} = d_0$) 处评估此项。根据问题的最坏情况假设，此时 $\\sigma(r_{ij})=1$，但对于任何其他智能体 $k \\neq i,j$，$\\sigma(r_{ik})=0$ 和 $\\sigma(r_{jk})=0$。这极大地简化了求和。\n    对于 $u_i^{\\mathrm{rep}}$，求和中唯一不为零的项是当 $k=j$ 时：\n    $$\n    u_i^{\\mathrm{rep}} \\Big|_{h_{ij}=0} = \\alpha \\sigma(r_{ij}) r_{ij}^{-(q+1)} (x_i - x_j) = \\alpha d_0^{-(q+1)} (x_i - x_j).\n    $$\n    同样地，对于 $u_j^{\\mathrm{rep}}$，唯一不为零的项是当 $k=i$ 时：\n    $$\n    u_j^{\\mathrm{rep}} \\Big|_{h_{ij}=0} = \\alpha \\sigma(r_{ji}) r_{ji}^{-(q+1)} (x_j - x_i) = -\\alpha d_0^{-(q+1)} (x_i - x_j).\n    $$\n    那么差值为：\n    $$\n    (u_i^{\\mathrm{rep}} - u_j^{\\mathrm{rep}}) \\Big|_{h_{ij}=0} = 2\\alpha d_0^{-(q+1)}(x_i-x_j).\n    $$\n\n现在，我们将这些结果代入在边界 $h_{ij}=0$ 处评估的 $\\dot{h}_{ij}$ 的安全条件中：\n$$\n\\dot{h}_{ij} \\Big|_{h_{ij}=0} = 2(x_i - x_j)^T \\left( -bN(x_i - x_j) + 2\\alpha d_0^{-(q+1)}(x_i - x_j) \\right) \\ge 0.\n$$\n使用 $\\|x_i-x_j\\|^2 = r_{ij}^2 = d_0^2$：\n$$\n2 \\left( -bN\\|x_i - x_j\\|^2 + 2\\alpha d_0^{-(q+1)}\\|x_i - x_j\\|^2 \\right) \\ge 0\n$$\n$$\n-bN d_0^2 + 2\\alpha d_0^{-q+1} \\ge 0.\n$$\n我们现在求解 $\\alpha$：\n$$\n2\\alpha d_0^{-q+1} \\ge bN d_0^2.\n$$\n$$\n\\alpha \\ge \\frac{bN d_0^2}{2 d_0^{-q+1}} = \\frac{bN}{2} d_0^{2 - (-q+1)} = \\frac{bN}{2} d_0^{q+1}.\n$$\n这就得出了在指定条件下保证安全的排斥强度 $\\alpha$ 的闭式下界。",
            "answer": "$$\n\\boxed{\\frac{bN}{2} d_0^{q+1}}\n$$"
        }
    ]
}
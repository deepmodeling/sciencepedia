{
    "hands_on_practices": [
        {
            "introduction": "在许多基于智能体的系统中，中央协调器必须有效地将任务分配给各个智能体。本练习探讨了此过程中的一个核心挑战：在尊重每个智能体的独特能力和有限容量的同时，找到最优的分配方案。通过解决这个约束优化问题 ，您将获得构建和分析资源分配问题的实践经验，这是设计中心化多智能体架构的一项基本技能。",
            "id": "4205148",
            "problem": "考虑一个用于信息物理系统 (CPS) 的数字孪生编排器，它在基于代理的架构中将计算任务分配给软件代理。现有 $3$ 个代理，索引为 $i \\in \\{1,2,3\\}$，以及 $4$ 个任务，索引为 $j \\in \\{1,2,3,4\\}$。每个任务必须被精确地分配给一个代理。一个分配由二元决策变量 $x_{ij} \\in \\{0,1\\}$ 表示，其中 $x_{ij} = 1$ 表示任务 $j$ 被分配给代理 $i$，否则 $x_{ij} = 0$。\n\n代理具有容量限制 $b_i$，等于它们可以同时处理的最大任务数量。初始容量向量为 $b_1 = 1$，$b_2 = 1$，$b_3 = 1$。代理并非都具备通用能力；能力矩阵 $\\kappa_{ij}$ 决定了代理 $i$ 是否能够处理任务 $j$（$\\kappa_{ij} = 1$）或不能（$\\kappa_{ij} = 0$）。能力如下：\n- 代理 $1$：$\\kappa_{11} = 1$，$\\kappa_{12} = 1$，$\\kappa_{13} = 0$，$\\kappa_{14} = 1$。\n- 代理 $2$：$\\kappa_{21} = 0$，$\\kappa_{22} = 1$，$\\kappa_{23} = 1$，$\\kappa_{24} = 1$。\n- 代理 $3$：$\\kappa_{31} = 1$，$\\kappa_{32} = 0$，$\\kappa_{33} = 1$，$\\kappa_{34} = 0$。\n\n对于每个可行分配（需满足容量和能力约束），编排器会产生一个总成本，该成本定义为分配成本 $c_{ij}$ 的总和，其中成本矩阵为\n$$\nC = \\begin{pmatrix}\nc_{11}  c_{12}  c_{13}  c_{14} \\\\\nc_{21}  c_{22}  c_{23}  c_{24} \\\\\nc_{31}  c_{32}  c_{33}  c_{34}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n7  6  \\text{N/A}  5 \\\\\n\\text{N/A}  4  3  8 \\\\\n2  \\text{N/A}  7  \\text{N/A}\n\\end{pmatrix},\n$$\n其中标记为 $\\text{N/A}$ 的条目对应于 $\\kappa_{ij} = 0$，是不允许的分配。\n\n基于代理系统中容量受限分配的基本定义，判断具有初始容量的实例是否可行。如果不可行，则考虑进行单一代理容量增强：选择一个代理 $i^{\\star}$ 并将其容量增加 $\\delta = 1$（即，设置 $b_{i^{\\star}} \\leftarrow b_{i^{\\star}} + 1$），同时保持其他代理的容量不变。在 $i^{\\star} \\in \\{1,2,3\\}$ 的所有选择中，计算在增强后的容量和有效的能力约束下，可实现的最小总分配成本。\n\n仅报告在恢复可行性的最小单一代理增强下的最小总成本作为您的最终答案。将最小总成本以精确整数形式提供。无需四舍五入。无需单位。",
            "solution": "用户提供的问题是一个良定义的约束优化问题，具体来说是广义分配问题 (GAP) 的一个变体。该问题具有运筹学的科学基础并且是完全指定的。因此，该问题被认为是有效的。\n\n该问题要求首先评估在初始容量下将 $4$ 个任务分配给 $3$ 个代理的可行性，如果不可行，则在进行特定的容量增强后，找到可行分配的最小成本。\n\n该问题可以数学上建模如下：\n令 $i \\in \\{1,2,3\\}$ 为代理的索引，$j \\in \\{1,2,3,4\\}$ 为任务的索引。\n令 $x_{ij} \\in \\{0,1\\}$ 为二元决策变量，其中如果任务 $j$ 分配给代理 $i$，则 $x_{ij} = 1$，否则 $x_{ij} = 0$。\n\n约束条件如下：\n1.  每个任务必须精确地分配给一个代理：\n    $$ \\sum_{i=1}^{3} x_{ij} = 1 \\quad \\forall j \\in \\{1,2,3,4\\} $$\n2.  分配给每个代理的任务数量不得超过其容量 $b_i$：\n    $$ \\sum_{j=1}^{4} x_{ij} \\le b_i \\quad \\forall i \\in \\{1,2,3\\} $$\n3.  仅当代理有能力执行任务时，分配才可能，即如果能力 $\\kappa_{ij}=0$，则 $x_{ij}=0$。成本矩阵 $C$ 体现了这一点，对于无能力的分配设置了不适用的成本。\n\n目标是最小化总成本：\n$$ \\text{Minimize } Z = \\sum_{i=1}^{3} \\sum_{j=1}^{4} c_{ij} x_{ij} $$\n\n**第1部分：初始配置的可行性**\n\n初始容量给出为 $b_1 = 1$，$b_2 = 1$ 和 $b_3 = 1$。\n需要分配的任务总数为 $4$。根据约束 (1)，总分配数量必须为 $4$：\n$$ \\sum_{j=1}^{4} \\sum_{i=1}^{3} x_{ij} = \\sum_{j=1}^{4} (1) = 4 $$\n系统的总容量是各个代理容量之和：\n$$ \\sum_{i=1}^{3} b_i = b_1 + b_2 + b_3 = 1 + 1 + 1 = 3 $$\n根据约束 (2)，分配的任务总数不能超过总容量：\n$$ \\sum_{i=1}^{3} \\sum_{j=1}^{4} x_{ij} \\le \\sum_{i=1}^{3} b_i $$\n代入数值，我们得到：\n$$ 4 \\le 3 $$\n这是一个矛盾。因此，初始问题实例是**不可行的**，因为总容量不足以处理所有任务。\n\n**第2部分：容量增强与成本最小化**\n\n问题要求将恰好一个代理 $i^{\\star}$ 的容量增加 $\\delta=1$。这使得总容量变为 $3+1=4$，与任务数量相匹配。因此，容量约束变为等式：代理 $i$ 必须被分配恰好 $b'_i$ 个任务，其中 $b'$ 是增强后的容量向量。我们分析选择 $i^{\\star}$ 的三种可能情况。\n\n**情况1：增强代理1 ($i^{\\star}=1$)**\n增强后的容量为 $b'_1 = 2$，$b'_2 = 1$，$b'_3 = 1$。代理1必须被分配2个任务，代理2和3必须各被分配1个任务。\n\n让我们来分析分配情况。代理3能执行任务 $\\{1, 3\\}$。代理2能执行任务 $\\{2, 3, 4\\}$。代理1能执行任务 $\\{1, 2, 4\\}$。\n我们基于代理3的分配来列举各种可能性：\n- 如果代理3被分配任务1（$x_{31}=1$，成本 $c_{31}=2$）：\n  - 剩余的任务是 $\\{2, 3, 4\\}$。代理2必须承担一个，代理1必须承担两个。\n  - 代理2必须从其有能力执行的任务 $\\{2, 3, 4\\}$ 中选择。\n    - 如果代理2承担任务2（$x_{22}=1$，成本 $c_{22}=4$）：代理1必须承担 $\\{3, 4\\}$。这是不可能的，因为代理1没有能力执行任务3（$\\kappa_{13}=0$）。\n    - 如果代理2承担任务3（$x_{23}=1$，成本 $c_{23}=3$）：代理1必须承担 $\\{2, 4\\}$。代理1有能力执行。成本为 $c_{12}+c_{14} = 6+5=11$。总成本 = $2+3+11 = 16$。\n    - 如果代理2承担任务4（$x_{24}=1$，成本 $c_{24}=8$）：代理1必须承担 $\\{2, 3\\}$。这是不可能的，因为代理1不能执行任务3。\n- 如果代理3被分配任务3（$x_{33}=1$，成本 $c_{33}=7$）：\n  - 剩余的任务是 $\\{1, 2, 4\\}$。代理2必须承担一个，代理1必须承担两个。\n  - 代理2必须从任务 $\\{2, 4\\}$ 中选择（因为 $\\kappa_{21}=0$）。\n    - 如果代理2承担任务2（$x_{22}=1$，成本 $c_{22}=4$）：代理1必须承担 $\\{1, 4\\}$。代理1有能力执行。成本为 $c_{11}+c_{14}=7+5=12$。总成本 = $7+4+12 = 23$。\n    - 如果代理2承担任务4（$x_{24}=1$，成本 $c_{24}=8$）：代理1必须承担 $\\{1, 2\\}$。代理1有能力执行。成本为 $c_{11}+c_{12}=7+6=13$。总成本 = $7+8+13 = 28$。\n\n情况1的最小成本是 $\\min(16, 23, 28) = 16$。\n\n**情况2：增强代理2 ($i^{\\star}=2$)**\n增强后的容量为 $b'_1 = 1$，$b'_2 = 2$，$b'_3 = 1$。代理1和3各承担1个任务，代理2承担2个任务。\n- 如果代理3被分配任务1（$x_{31}=1$，成本 $c_{31}=2$）：\n  - 剩余任务为 $\\{2, 3, 4\\}$。代理1必须承担一个，代理2必须承担两个。\n  - 代理1可以从 $\\{2, 4\\}$ 中选择（因为 $\\kappa_{13}=0$）。\n    - 如果代理1承担任务2（$x_{12}=1$，成本 $c_{12}=6$）：代理2必须承担 $\\{3, 4\\}$。代理2有能力执行。成本为 $c_{23}+c_{24}=3+8=11$。总成本 = $2+6+11=19$。\n    - 如果代理1承担任务4（$x_{14}=1$，成本 $c_{14}=5$）：代理2必须承担 $\\{2, 3\\}$。代理2有能力执行。成本为 $c_{22}+c_{23}=4+3=7$。总成本 = $2+5+7=14$。\n- 如果代理3被分配任务3（$x_{33}=1$，成本 $c_{33}=7$）：\n  - 剩余任务为 $\\{1, 2, 4\\}$。代理1必须承担一个，代理2必须承担两个。\n  - 代理1可以从 $\\{1, 2, 4\\}$ 中选择。\n    - 如果代理1承担任务1（$x_{11}=1$，成本 $c_{11}=7$）：代理2必须承担 $\\{2, 4\\}$。代理2有能力执行。成本为 $c_{22}+c_{24}=4+8=12$。总成本 = $7+7+12=26$。\n    - 如果代理1承担任务2或4：代理2将需要承担任务1，这是不可能的（$\\kappa_{21}=0$）。\n\n情况2的最小成本是 $\\min(19, 14, 26) = 14$。\n\n**情况3：增强代理3 ($i^{\\star}=3$)**\n增强后的容量为 $b'_1 = 1$，$b'_2 = 1$，$b'_3 = 2$。代理1和2各承担1个任务，代理3承担2个任务。\n- 代理3仅有能力执行任务 $\\{1, 3\\}$。由于其容量为2，它必须被精确分配这两个任务：$x_{31}=1$ 和 $x_{33}=1$。\n- 代理3的成本是 $c_{31}+c_{33} = 2+7=9$。\n- 剩余的任务是 $\\{2, 4\\}$，必须分配给代理1和代理2，每个代理一个任务。\n- 我们面临一个针对代理1、2和任务2、4的 $2 \\times 2$ 分配问题。相关的成本子矩阵是：\n  $$ \\begin{pmatrix} c_{12}  c_{14} \\\\ c_{22}  c_{24} \\end{pmatrix} = \\begin{pmatrix} 6  5 \\\\ 4  8 \\end{pmatrix} $$\n- 分配选项：\n  1.  代理1承担任务2，代理2承担任务4：成本 $c_{12}+c_{24} = 6+8=14$。\n  2.  代理1承担任务4，代理2承担任务2：成本 $c_{14}+c_{22} = 5+4=9$。\n- 这个子问题的最小成本是 $9$。\n- 情况3的总最小成本是代理3的成本与代理1和2的最小成本之和：$9+9=18$。\n\n**结论**\n\n比较三种可能的增强情景下的最小成本：\n- 情况1（增强代理1）：最小成本 = $16$。\n- 情况2（增强代理2）：最小成本 = $14$。\n- 情况3（增强代理3）：最小成本 = $18$。\n\n可实现的最小总分配成本是这些值的最小值，即 $14$。这种情况发生在代理2的容量被增强时，分配方案为：代理3承担任务1（$c_{31}=2$），代理1承担任务4（$c_{14}=5$），代理2承担任务2和3（$c_{22}+c_{23}=4+3=7$）。总成本为 $2+5+7=14$。",
            "answer": "$$\n\\boxed{14}\n$$"
        },
        {
            "introduction": "作为中心化控制的替代方案，像拍卖这样的去中心化机制允许智能体自主协调。本练习深入探讨了使用反向拍卖进行任务分配，智能体通过竞标来赢得合同。通过计算拍卖结果、支付金额以及运营者的总盈余 ，您将理解如何利用基于市场的原则，在分布式环境中实现高效的资源分配。",
            "id": "4205128",
            "problem": "一位信息物理基础设施运营商通过与独立的服务代理商签约，协调数字孪生更新任务的执行。现有 $m=3$ 个任务，$\\mathcal{T}=\\{t_1,t_2,t_3\\}$，以及 $n=4$ 个代理商，$\\mathcal{A}=\\{a_1,a_2,a_3,a_4\\}$。每个任务 $t_j$ 需要恰好一个代理商来执行，任务之间相互独立，且代理商有足够的能力来执行任意的任务子集。对于每个任务 $t_j$ 和代理商 $a_i$，代理商会提交一份密封投标 $b_{ij}$，该投标表示代理商执行任务 $t_j$ 所需的货币补偿。运营商从任务 $t_j$ 的完成中获得已知的货币价值 $v_j$。运营商（为每个任务）举办 $m$ 场独立的密封次价反向拍卖。\n\n投标矩阵 $B=[b_{ij}]$ 和运营商的价值向量 $v$ 由下式给出：\n$$\nB=\\begin{pmatrix}\nb_{11}  b_{12}  b_{13} \\\\\nb_{21}  b_{22}  b_{23} \\\\\nb_{31}  b_{32}  b_{33} \\\\\nb_{41}  b_{42}  b_{43}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n7  8  4 \\\\\n5  12  6 \\\\\n9  7  5 \\\\\n6  10  9\n\\end{pmatrix},\n\\quad\nv=\\begin{pmatrix} v_1 \\\\ v_2 \\\\ v_3 \\end{pmatrix}\n=\n\\begin{pmatrix} 8 \\\\ 11 \\\\ 6 \\end{pmatrix}.\n$$\n\n假设私人成本独立，在该机制下真实出价是占优策略，无保留价，且除拍卖支付外无其他附加支付。计算在该指定机制下的分配方案（即哪个代理商执行哪个任务）以及每个获胜代理商的相应报酬，然后确定运营商的总净预算盈余\n$$\nS \\equiv \\sum_{j=1}^{3} \\left( v_j - p_j \\right),\n$$\n其中 $p_j$ 是运营商为任务 $t_j$ 支付的款项。报告单个实数 $S$。无需四舍五入；报告一个不带单位的精确值。",
            "solution": "该问题要求计算一个通过一系列反向拍卖来协调任务的运营商的总净预算盈余。首先对问题陈述的合理性和完整性进行验证。\n\n**问题验证**\n\n**步骤1：提取已知条件**\n- 任务数量：$m=3$，任务集合为 $\\mathcal{T}=\\{t_1, t_2, t_3\\}$。\n- 代理商数量：$n=4$，代理商集合为 $\\mathcal{A}=\\{a_1, a_2, a_3, a_4\\}$。\n- 每个任务 $t_j$ 需要恰好一个代理商。任务是独立的。\n- 投标矩阵 $B$ 和运营商的价值向量 $v$ 为：\n$$\nB = \\begin{pmatrix}\n7  8  4 \\\\\n5  12  6 \\\\\n9  7  5 \\\\\n6  10  9\n\\end{pmatrix},\n\\quad\nv = \\begin{pmatrix} 8 \\\\ 11 \\\\ 6 \\end{pmatrix}\n$$\n其中 $b_{ij}$ 是代理商 $a_i$ 对任务 $t_j$ 的出价，$v_j$ 是运营商对任务 $t_j$ 的价值。\n- 该机制包括 $m=3$ 场独立的密封次价反向拍卖。\n- 假设：独立的私人成本、真实出价、无保留价、无附加支付。\n- 目标：计算总净预算盈余 $S \\equiv \\sum_{j=1}^{3} (v_j - p_j)$，其中 $p_j$ 是为任务 $t_j$ 支付的款项。\n\n**步骤2：使用提取的已知条件进行验证**\n根据所需标准对问题进行评估。\n- **科学性依据：** 该问题牢固地建立在机制设计之上，这是经济学和计算机科学的一个子领域。密封次价反向拍卖（Vickrey 拍卖的一种变体）是一种典型机制。其在信息物理系统资源分配中的应用是一项标准的、科学上有效的建模实践。\n- **适定性：** 该问题提供了所有必要的信息：代理商和任务的数量、完整的投标矩阵、运营商的价值以及具体的拍卖规则。对于每次拍卖，投标都是不同的，从而产生唯一的获胜者。支付规则（第二低价）也是确定性的。因此，存在一个唯一、稳定且有意义的解。\n- **客观性：** 该问题使用精确、正式的语言和定量数据进行陈述。它不含主观或模糊的术语。\n\n**步骤3：结论与行动**\n该问题在科学上是合理的、适定的、客观的和完整的。因此，它被认为是**有效的**。下面将推导出完整的解。\n\n**求解过程**\n\n运营商为每个任务 $t_j \\in \\{t_1, t_2, t_3\\}$ 举办一场独立的密封次价反向拍卖。在这种类型的反向拍卖中，确定每个任务的获胜者和支付的规则如下：\n1.  **分配规则：** 为某任务提交最低投标的代理商将获得该任务。\n2.  **支付规则：** 获胜的代理商将获得的报酬等于为该任务提交的第二低的投标额。\n\n我们将这些规则应用于三个任务中的每一个。\n\n**任务 $t_1$ 的拍卖：**\n任务 $t_1$ 的投标对应于矩阵 $B$ 的第一列。投标集合为 $\\{b_{11}, b_{21}, b_{31}, b_{41}\\} = \\{7, 5, 9, 6\\}$。\n- 最低投标为 $\\min\\{7, 5, 9, 6\\} = 5$，由代理商 $a_2$ 提交。因此，代理商 $a_2$ 赢得任务 $t_1$ 的合约。\n- 第二低的投标为 $6$。\n- 任务 $t_1$ 的支付为 $p_1 = 6$。\n- 运营商在该任务上的盈余为 $v_1 - p_1 = 8 - 6 = 2$。\n\n**任务 $t_2$ 的拍卖：**\n任务 $t_2$ 的投标对应于矩阵 $B$ 的第二列。投标集合为 $\\{b_{12}, b_{22}, b_{32}, b_{42}\\} = \\{8, 12, 7, 10\\}$。\n- 最低投标为 $\\min\\{8, 12, 7, 10\\} = 7$，由代理商 $a_3$ 提交。因此，代理商 $a_3$ 赢得任务 $t_2$ 的合约。\n- 第二低的投标为 $8$。\n- 任务 $t_2$ 的支付为 $p_2 = 8$。\n- 运营商在该任务上的盈余为 $v_2 - p_2 = 11 - 8 = 3$。\n\n**任务 $t_3$ 的拍卖：**\n任务 $t_3$ 的投标对应于矩阵 $B$ 的第三列。投标集合为 $\\{b_{13}, b_{23}, b_{33}, b_{43}\\} = \\{4, 6, 5, 9\\}$。\n- 最低投标为 $\\min\\{4, 6, 5, 9\\} = 4$，由代理商 $a_1$ 提交。因此，代理商 $a_1$ 赢得任务 $t_3$ 的合约。\n- 第二低的投标为 $5$。\n- 任务 $t_3$ 的支付为 $p_3 = 5$。\n- 运营商在该任务上的盈余为 $v_3 - p_3 = 6 - 5 = 1$。\n\n**总净预算盈余**\n总净预算盈余 $S$ 是每个独立任务拍卖盈余的总和。公式如下：\n$$\nS = \\sum_{j=1}^{3} (v_j - p_j)\n$$\n代入计算出的支付和给定的价值：\n$$\nS = (v_1 - p_1) + (v_2 - p_2) + (v_3 - p_3)\n$$\n$$\nS = (8 - 6) + (11 - 8) + (6 - 5)\n$$\n$$\nS = 2 + 3 + 1\n$$\n$$\nS = 6\n$$\n运营商的总净预算盈余为 $6$。最终的分配方案是：代理商 $a_2$ 执行任务 $t_1$，代理商 $a_3$ 执行任务 $t_2$，代理商 $a_1$ 执行任务 $t_3$。代理商 $a_4$ 没有赢得任何任务。问题只要求最终的盈余 $S$。",
            "answer": "$$\n\\boxed{6}\n$$"
        },
        {
            "introduction": "任何多智能体系统的可靠性都取决于其在部分智能体出现故障或恶意行为时仍能正常运行的能力。本练习旨在解决拜占庭容错这一基本问题，要求您推导出保证可靠共识所需的最小智能体数量 $n_{\\min}$。完成此证明  将使您深刻理解鲁棒聚合的原理以及构建弹性分布式系统的数学基础。",
            "id": "4205139",
            "problem": "考虑一个信息物理系统 (CPS) 的数字孪生 (DT)，该系统实现了一个基于智能体的系统架构，用于在离散时间瞬间估计一个标量物理状态。有 $n$ 个智能体，每个智能体向一个中心化的 DT 聚合器提交一份实值报告 $y_{i} \\in \\mathbb{R}$。其中恰好有 $f$ 个智能体可能是拜占庭的，这意味着它们可以产生任意（可能是对抗性的）值，而其余的 $n-f$ 个智能体是诚实但有噪声的。系统状态为 $x \\in \\mathbb{R}$，每个诚实智能体 $i$ 报告一个值 $y_{i}$，该值满足 $|y_{i} - x| \\leq \\Delta$，其中 $\\Delta > 0$ 是一个已知的界限。通信是同步且经过认证的，因此聚合器在每个时间步从每个智能体接收一份报告，不会发生欺骗或遗漏。\n\n假设聚合器在 $\\mathbb{R}$ 上选择一个对称、置换不变的鲁棒聚合函数，该函数定义在奇数样本量 $n$ 上，具体来说是中位数：对于接收到的 $n$ 个值的多重集 $\\{y_{1},\\dots,y_{n}\\}$，在排序得到顺序统计量 $y_{(1)} \\leq \\dots \\leq y_{(n)}$ 后，聚合器输出 $y_{(k)}$，其中 $k = (n+1)/2$。DT 必须保证，无论对抗性值如何，聚合估计值 $y_{(k)}$ 都位于诚实报告的凸包内，因此也位于区间 $[x - \\Delta, x + \\Delta]$ 内。\n\n从顺序统计量的基本定义以及估计量为抵抗异常值必须保持在诚实数据凸包内的要求出发，推导所需的最小智能体数量 $n_{\\min}$（作为 $f$ 的函数），以保证对于任何对抗性策略，中位数聚合输出都保持在 $[x - \\Delta, x + \\Delta]$ 内。你的推导必须仅使用给定的建模假设和顺序统计量鲁棒性的第一性原理，来确立由 $f$ 施加于 $n$ 的界限的必要性和充分性。通过证明在推导出的关于 $n$ 的条件下，中位数能将聚合值保持在诚实区间内，来明确地证明在此场景下选择中位数作为鲁棒聚合函数的合理性。\n\n以 $f$ 的闭式表达式形式给出 $n_{\\min}$ 的最终答案。不需要进行数值四舍五入。",
            "solution": "问题要求推导所需的最小智能体总数 $n_{\\min}$，以保证尽管存在 $f$ 个对抗性（拜占庭）智能体，其报告的中位数仍能保持在真实状态 $x$ 周围的一个有界区间内。推导过程必须建立所推导条件的必要性和充分性。\n\n设 $n$ 为智能体的总数。给定 $n$ 为一个奇数。\n设 $f$ 为拜占庭智能体的数量。\n诚实智能体的数量为 $n-f$。\n设 $x \\in \\mathbb{R}$ 为真实的物理状态。\n诚实智能体提供报告 $y_i$，满足 $|y_i - x| \\leq \\Delta$，这意味着 $y_i \\in [x - \\Delta, x + \\Delta]$。\n拜占庭智能体可以提供任何任意的报告 $y_i \\in \\mathbb{R}$。\n聚合器计算 $n$ 份报告的中位数。设排序后的报告（顺序统计量）为 $y_{(1)} \\leq y_{(2)} \\leq \\dots \\leq y_{(n)}$。由于 $n$ 是奇数，中位数是唯一的中心元素 $y_{(k)}$，其位次 $k$ 由 $k = (n+1)/2$ 给出。\n我们必须强制执行的保证是，中位数 $y_{(k)}$ 位于诚实报告的凸包内。在实数线上，诚实报告集合 $\\{y_i\\}_{i \\in H}$ 的凸包是区间 $[\\min_{i \\in H} y_i, \\max_{i \\in H} y_i]$。由于所有诚实报告都在 $[x - \\Delta, x + \\Delta]$ 内，这个保证意味着 $y_{(k)} \\in [x - \\Delta, x + \\Delta]$。\n\n我们将通过证明其充分性和必要性来推导关于 $n$ 的条件。\n\n**1. 充分性**\n\n我们将证明条件 $n \\geq 2f+1$ 足以保证中位数 $y_{(k)}$ 包含在诚实报告的凸包内。也就是说，如果 $n \\geq 2f+1$，那么无论 $f$ 个拜占庭智能体报告什么值，都有 $\\min_{i \\in H} y_i \\leq y_{(k)} \\leq \\max_{i \\in H} y_i$。此分析明确证明了在此条件下中位数的鲁棒性。\n\n我们用反证法来证明。\n\n首先，假设中位数大于最大的诚实报告：$y_{(k)} > \\max_{i \\in H} y_i$。\n如果这是真的，那么中位数本身不可能是诚实报告。此外，所有位次大于或等于 $k$ 的报告也必须大于任何诚实报告。位次从 $k$ 到 $n$ 的报告是 $y_{(k)}, y_{(k+1)}, \\dots, y_{(n)}$。这类报告的数量是 $n - k + 1 = n - \\frac{n+1}{2} + 1 = \\frac{2n - (n+1) + 2}{2} = \\frac{n+1}{2}$。\n由于这 $\\frac{n+1}{2}$ 份报告都大于任何诚实报告，它们必须全部来自拜占庭智能体。因此，拜占庭智能体的数量 $f$ 必须至少这么大：\n$$f \\geq \\frac{n+1}{2}$$\n整理这个不等式，我们得到：\n$$2f \\geq n+1$$\n$$n \\leq 2f-1$$\n这个结果 $n \\leq 2f-1$ 与我们的初始假设 $n \\geq 2f+1$ 相矛盾。因此，中位数不能大于最大的诚实值。\n\n其次，假设中位数小于最小的诚实报告：$y_{(k)}  \\min_{i \\in H} y_i$。\n如果这是真的，那么中位数以及所有位次小于或等于 $k$ 的报告都必须小于任何诚实报告。位次从 $1$ 到 $k$ 的报告是 $y_{(1)}, y_{(2)}, \\dots, y_{(k)}$。这类报告的数量恰好是 $k = \\frac{n+1}{2}$。\n由于这 $\\frac{n+1}{2}$ 份报告都小于任何诚实报告，它们必须全部来自拜占庭智能体。因此，拜占庭智能体的数量 $f$ 必须至少这么大：\n$$f \\geq k = \\frac{n+1}{2}$$\n这导致了与之前相同的不等式：\n$$n \\leq 2f-1$$\n这再次与我们的假设 $n \\geq 2f+1$ 相矛盾。因此，中位数不能小于最小的诚实值。\n\n由于中位数既不能大于最大的诚实报告，也不能小于最小的诚实报告，它必须位于由它们定义的区间内：\n$$\\min_{i \\in H} y_i \\leq y_{(k)} \\leq \\max_{i \\in H} y_i$$\n这表明，如果 $n \\geq 2f+1$，中位数保证位于诚实数据的凸包内。由于所有诚实数据都位于 $[x-\\Delta, x+\\Delta]$ 内，中位数也保证位于此区间内。因此，条件 $n \\geq 2f+1$ 是充分的。\n\n**2. 必要性**\n\n现在我们来证明条件 $n \\geq 2f+1$ 是必要的。为此，我们证明如果该条件不满足，即如果 $n  2f+1$，则存在一种策略，拜占庭智能体可以利用该策略使中位数落在诚实报告的区间之外。\n\n由于 $n$ 是一个奇数，条件 $n  2f+1$ 等价于 $n \\leq 2f-1$。\n这意味着 $n+1 \\leq 2f$，或者整理后得到 $f \\geq \\frac{n+1}{2}$。\n诚实智能体的数量是 $n-f$。\n让我们比较诚实智能体的数量与中位数一侧的位置数量。严格小于中位数的报告数量是 $k-1 = \\frac{n+1}{2}-1 = \\frac{n-1}{2}$。\n从 $n  2f+1$ 出发，我们可以推导出一个不等式：\n$$n  2f+1 \\implies n+1  2f+2 \\implies \\frac{n+1}{2}  f+1 \\implies \\frac{n+1}{2} - 1  f \\implies k-1  f$$\n此外，从 $n  2f+1$ 可得 $2f > n-1$。\n不等式 $n-f  \\frac{n+1}{2}$ 意味着诚实智能体的数量严格小于位次小于或等于中位数位次的报告数量。\n$$n-f  \\frac{n+1}{2} \\iff 2n - 2f  n+1 \\iff n  2f+1$$\n这是正确的。\n\n现在我们构建对抗性策略。假设 $n  2f+1$。\n这 $f$ 个拜占庭智能体决定合谋并报告极小的相同值。例如，它们都报告 $y_B = x - 2\\Delta$。这个值在诚实区间 $[x-\\Delta, x+\\Delta]$ 之外。\n这 $n-f$ 个诚实智能体报告 $[x-\\Delta, x+\\Delta]$ 内的值。为了使论证清晰，我们假设对攻击者而言的最坏情况，即所有诚实智能体都报告可能的最大值 $y_H = x+\\Delta$。\n收集到的报告多重集是 $\\{\\underbrace{x-2\\Delta, \\dots, x-2\\Delta}_{f \\text{ 次}}, \\underbrace{x+\\Delta, \\dots, x+\\Delta}_{n-f \\text{ 次}}\\}$。\n当这 $n$ 份报告被排序时， $f$ 份拜占庭报告将占据最低的位次，而 $n-f$ 份诚实报告将占据最高的位次。\n排序后的列表是：$y_{(1)} = \\dots = y_{(f)} = x-2\\Delta$ 并且 $y_{(f+1)} = \\dots = y_{(n)} = x+\\Delta$。\n中位数是位次为 $k=\\frac{n+1}{2}$ 的报告。为了确定中位数的值，我们必须检查其位次 $k$ 是否小于或等于 $f$。\n我们需要检查是否 $\\frac{n+1}{2} \\leq f$。\n如前所示，我们的起始假设 $n  2f+1$（其中 $n$ 是奇数）等价于 $n \\leq 2f-1$。\n这意味着 $n+1 \\leq 2f$，这又意味着 $\\frac{n+1}{2} \\leq f$。\n由于中位数的位次 $k = \\frac{n+1}{2}$ 小于或等于 $f$，中位数 $y_{(k)}$ 将是拜占庭报告之一。\n因此，$y_{(k)} = x-2\\Delta$。\n这个值位于诚实报告的凸包（在本例中是单点 $\\{x+\\Delta\\}$）之外，也位于要求的区间 $[x-\\Delta, x+\\Delta]$ 之外。\n通过让拜占庭智能体报告一个非常大的值，可以将中位数拉高到诚实区间之上，从而可以做出一个对称的论证。\n这表明如果 $n  2f+1$，则无法满足保证。因此，条件 $n \\geq 2f+1$ 是必要的。\n\n**3. 结论**\n\n条件 $n \\geq 2f+1$ 是保证报告的中位数位于诚实报告的凸包内，并因此位于区间 $[x-\\Delta, x+\\Delta]$ 内的充分必要条件。\n问题要求的是最小智能体数量 $n_{\\min}$，作为 $f$ 的函数。这是满足 $n \\geq 2f+1$ 和问题约束条件 $n$ 为奇数的最小整数 $n$。\n由于 $f$ 是整数， $2f$ 是偶数，而 $2f+1$ 是奇数。\n因此，满足 $n \\geq 2f+1$ 的最小整数 $n$ 就是 $n = 2f+1$ 本身，它已经是奇数了。\n所需的最小智能体数量为 $n_{\\min} = 2f+1$。",
            "answer": "$$\n\\boxed{2f+1}\n$$"
        }
    ]
}
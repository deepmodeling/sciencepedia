{
    "hands_on_practices": [
        {
            "introduction": "第一个练习  将引导你完成应用零化控制屏障函数 (Zeroing Control Barrier Function, ZCBF) 的基本步骤。从一个简单的一维系统入手，你将构建安全约束的核心部分，并用它来过滤一个名义控制律，从而确保系统保持在预定义的安全集中。这个练习旨在巩固设计基于 CBF 的安全过滤器的基本流程。",
            "id": "2695296",
            "problem": "考虑由 $\\dot{x} = u$ 给出的标量控制系统，其安全要求为 $x \\leq 1$，由函数 $h(x) = 1 - x$ 编码。安全集为 $\\mathcal{C} = \\{ x \\in \\mathbb{R} : h(x) \\geq 0 \\}$。\n\n任务：\n1. 构造一个有效的扩展K类函数 $\\alpha : \\mathbb{R} \\to \\mathbb{R}$，并证明它满足定义属性。\n2. 仅使用安全集 $\\mathcal{C}$ 和零化控制屏障函数 (ZCBF) 的定义，推导容许控制 $u$ 为使系统 $\\dot{x} = u$ 的安全集 $\\mathcal{C}$ 成为正向不变集而必须满足的不等式。\n3. 使用您推导出的不等式，描述在通用状态 $x \\in \\mathbb{R}$ 下的容许控制集。\n4. 假设一个标称控制 $u_{\\mathrm{nom}}(x)$ 通过一个二次规划进行滤波，该二次规划在当前状态下以最小的修改来强制执行安全约束，\n   $$\\min_{u \\in \\mathbb{R}} \\ (u - u_{\\mathrm{nom}}(x))^{2} \\quad \\text{以当前 } x \\text{ 的ZCBF容许性不等式为约束条件。}$$\n   取 $\\alpha(s) = \\kappa s$ 且 $\\kappa = 3$，在状态 $x = 0.8$ 处求值，并使用标称值 $u_{\\mathrm{nom}}(0.8) = 1.2$。计算由二次规划返回的最优安全滤波控制 $u^{\\star}$。\n\n将最终答案表示为单个实数。不要四舍五入。",
            "solution": "该问题将首先被验证，如果被视为有效，将按顺序解决，处理四个指定任务中的每一个。\n\n首先，需要对问题陈述进行评估。\n\n已知条件逐字提取如下：\n- 系统模型：$\\dot{x} = u$，其中 $x \\in \\mathbb{R}$ 且 $u \\in \\mathbb{R}$。\n- 安全要求：$x \\leq 1$。\n- 屏障函数：$h(x) = 1 - x$。\n- 安全集：$\\mathcal{C} = \\{ x \\in \\mathbb{R} : h(x) \\geq 0 \\}$。\n- 任务1：构造一个有效的扩展K类函数 $\\alpha : \\mathbb{R} \\to \\mathbb{R}$，并证明其属性。\n- 任务2：仅使用安全集和零化控制屏障函数 (ZCBF) 的定义，推导容许控制 $u$ 的ZCBF不等式。\n- 任务3：描述在通用状态 $x$ 下的容许控制集。\n- 任务4：求解一个特定的二次规划 (QP) 以获得安全滤波控制 $u^{\\star}$。该QP为 $\\min_{u \\in \\mathbb{R}} \\ (u - u_{\\mathrm{nom}}(x))^{2}$，并以ZCBF不等式为约束。具体参数为：$\\alpha(s) = \\kappa s$ 且 $\\kappa = 3$，求值状态 $x = 0.8$，标称控制 $u_{\\mathrm{nom}}(0.8) = 1.2$。\n\n问题接受验证。\n该问题是**有科学依据的**和**客观的**。这是控制理论领域一个标准的、定义明確的问题，具体涉及应用零化控制屏障函数(ZCBF)来确保控制系统的安全性。所有术语，如“控制系统”、“安全集”、“K类函数”和“ZCBF”，在该学科中都有严格的定义。该系统模型是一个简单积分器，这是控制理论中的一个基本构建模块。该问题是**适定的**，因为它提供了所有必要的信息和定义，以便进行逻辑推导，并为指定的二次规划得出一个唯一解。该问题是自洽的、一致的，并且没有任何科学、逻辑或事实上的缺陷。问题的任何部分都没有违反基本原则，不依赖伪科学，也不是主观的。\n\n该问题被确定为**有效的**。现在给出完整的解决方案。\n\n**任务1：构造一个扩展K类函数**\n一个扩展K类函数 $\\alpha : \\mathbb{R} \\to \\mathbb{R}$ 是一个严格递增且满足 $\\alpha(0) = 0$ 的函数。对此类函数的一个简单而常见的选择是形式为 $\\alpha(s) = \\kappa s$ 的线性函数，其中 $\\kappa$ 是某个正实常数。\n为证明这是一个有效的选择，我们验证其两个定义属性：\n1.  **严格递增**：$\\alpha(s)$ 关于 $s$ 的导数是 $\\frac{d\\alpha}{ds} = \\kappa$。为使函数严格递增，其导数必须为正。因此，我们必须有 $\\kappa  0$。在此条件下，该函数对所有 $s \\in \\mathbb{R}$ 确实是严格递增的。\n2.  **通过原点**：在 $s=0$ 处对函数求值，得到 $\\alpha(0) = \\kappa \\cdot 0 = 0$。对于任意 $\\kappa$ 的选择，此属性都满足。\n因此，任何具有 $\\kappa  0$ 的函数 $\\alpha(s) = \\kappa s$ 都是一个有效的扩展K类函数。问题后面指定了 $\\kappa=3$，这是一个有效的选择。\n\n**任务2：ZCBF容许性不等式的推导**\n安全集定义为 $\\mathcal{C} = \\{x \\in \\mathbb{R} : h(x) \\geq 0\\}$。为了使集合 $\\mathcal{C}$ 正向不变，任何从 $\\mathcal{C}$ 中开始的状态轨迹 $x(t)$ 必须在所有未来时间 $t \\geq 0$ 内保持在 $\\mathcal{C}$ 中。这意味着如果 $h(x(t_0)) \\geq 0$，我们必须确保对所有 $t  t_0$ 都有 $h(x(t)) \\geq 0$。\n强制执行此条件的一个充分条件是，确保每当状态位于安全集的边界上，即 $h(x) = 0$ 时，状态速度矢量不指向集合外部。这可转换为条件 $\\dot{h}(x) \\geq 0$ 在 $h(x)=0$ 时成立。\n零化控制屏障函数 (ZCBF) 将这一要求形式化并加强，使其适用于集合内的所有点，而不仅仅是边界上的点。如果存在一个扩展K类函数 $\\alpha$，使得对于关注域中的所有 $x$，以下不等式成立，则函数 $h$ 是一个ZCBF：\n$$ \\dot{h}(x, u) \\geq -\\alpha(h(x)) $$\n$h(x(t))$ 的时间导数可以使用链式法则求得：\n$$ \\dot{h}(x, u) = \\frac{\\partial h}{\\partial x} \\dot{x} $$\n我们已知 $h(x) = 1 - x$，所以关于 $x$ 的偏导数是：\n$$ \\frac{\\partial h}{\\partial x} = -1 $$\n系统动力学由 $\\dot{x} = u$ 给出。将这些代入 $\\dot{h}$ 的表达式中：\n$$ \\dot{h}(x, u) = (-1) u = -u $$\n现在，将此代入ZCBF不等式中：\n$$ -u \\geq -\\alpha(h(x)) $$\n两边同乘以 $-1$ 会反转不等号：\n$$ u \\leq \\alpha(h(x)) $$\n最后，代入 $h(x)$ 的表达式：\n$$ u \\leq \\alpha(1 - x) $$\n这就是任何容许控制 $u$ 为保证安全集 $\\mathcal{C}$ 的正向不变性所必须满足的不等式。\n\n**任务3：容许控制集的描述**\n基于任务2中推导出的不等式，在给定状态 $x$ 下的所有容许控制的集合，记为 $K_{\\mathrm{cbf}}(x)$，是满足ZCBF条件的所有输入 $u \\in \\mathbb{R}$ 的集合。\n$$ K_{\\mathrm{cbf}}(x) = \\{ u \\in \\mathbb{R} : u \\leq \\alpha(1 - x) \\} $$\n这个集合表示实数轴上的一个闭半线，其上界为值 $\\alpha(1 - x)$。用区间表示法表示为：\n$$ K_{\\mathrm{cbf}}(x) = (-\\infty, \\alpha(1-x)] $$\n在状态 $x$ 下从此集合中选择的任何控制输入都保证是安全的。\n\n**任务4：最优安全滤波控制的计算**\n问题是通过求解以下二次规划 (QP) 来找到最优控制 $u^{\\star}$：\n$$ u^{\\star} = \\arg\\min_{u \\in \\mathbb{R}} \\ (u - u_{\\mathrm{nom}}(x))^{2} $$\n约束条件为任务2中推导出的不等式：\n$$ u \\leq \\alpha(1-x) $$\n这是一个在可行集 $K_{\\mathrm{cbf}}(x)$ 中找到在欧几里得意义上最接近标称控制 $u_{\\mathrm{nom}}(x)$ 的点的问题。目标函数 $(u - u_{\\mathrm{nom}}(x))^{2}$ 是一个抛物线，其顶点（最小值）位于 $u = u_{\\mathrm{nom}}(x)$。\n设可行集的上界为 $u_{\\mathrm{bound}} = \\alpha(1 - x)$。约束条件为 $u \\leq u_{\\mathrm{bound}}$。\n解 $u^{\\star}$ 有两种可能的情况：\n1.  如果无约束最小值 $u_{\\mathrm{nom}}(x)$ 位于可行集内（即 $u_{\\mathrm{nom}}(x) \\leq u_{\\mathrm{bound}}$），则最优解为 $u^{\\star} = u_{\\mathrm{nom}}(x)$。标称控制已经是安全的。\n2.  如果无约束最小值位于可行集外（即 $u_{\\mathrm{nom}}(x)  u_{\\mathrm{bound}}$），则最优解是可行集中最接近 $u_{\\mathrm{nom}}(x)$ 的点。对于区间 $(-\\infty, u_{\\mathrm{bound}}]$，最近的点就是边界本身，即 $u^{\\star} = u_{\\mathrm{bound}}$。\n这个逻辑可以总结为 $u^{\\star} = \\min(u_{\\mathrm{nom}}(x), u_{\\mathrm{bound}})$。\n\n我们被给予以下用于求值的数值：\n- 扩展K类函数: $\\alpha(s) = \\kappa s$ 且 $\\kappa = 3$，所以 $\\alpha(s) = 3s$。\n- 状态: $x = 0.8$。\n- 此状态下的标称控制: $u_{\\mathrm{nom}}(0.8) = 1.2$。\n\n首先，我们计算在状态 $x = 0.8$ 时的上界 $u_{\\mathrm{bound}}$：\n$$ u_{\\mathrm{bound}} = \\alpha(1 - x) = 3 \\times (1 - 0.8) = 3 \\times 0.2 = 0.6 $$\n因此，安全约束为 $u \\leq 0.6$。可行集为 $K_{\\mathrm{cbf}}(0.8) = (-\\infty, 0.6]$。\n\n接下来，我们将标称控制 $u_{\\mathrm{nom}}(0.8)$ 与此界限进行比较：\n$$ u_{\\mathrm{nom}}(0.8) = 1.2 $$\n我们观察到 $1.2  0.6$，所以 $u_{\\mathrm{nom}}(0.8)  u_{\\mathrm{bound}}$。标称控制是不安全的，因为它违反了ZCBF条件。\n我们处于第二种情况，即最优控制 $u^{\\star}$ 是 $u_{\\mathrm{nom}}$ 在可行集上的投影。因此，最优安全滤波控制是边界值。\n$$ u^{\\star} = u_{\\mathrm{bound}} = 0.6 $$\n这是二次规划的结果。控制器将标称输入 $u_{\\mathrm{nom}}(0.8) = 1.2$ 最小化地修改为 $u^{\\star} = 0.6$ 以满足安全约束。",
            "answer": "$$\n\\boxed{0.6}\n$$"
        },
        {
            "introduction": "CBF 条件的建立依赖于对系统动态如何影响屏障函数 $h(x)$ 的理解，这可以通过李导数来捕捉，它衡量了 $h(x)$ 沿着系统矢量场的变化率。本练习  要求你计算一个平面系统的李导数，并从几何角度解释系统的自然“漂移”及其对控制输入的响应如何影响其与安全边界的距离。",
            "id": "4210344",
            "problem": "一个平面信息物理系统的数字孪生将物理设备的状态建模为 $x = [x_{1}\\; x_{2}]^{\\top} \\in \\mathbb{R}^{2}$，其在控制仿射动力学 $\\dot{x} = f(x) + g(x) u$ 下演化，其中 $u \\in \\mathbb{R}$ 是控制输入。该数字孪生使用控制屏障函数 (CBF) 进行安全保证，以证明安全集 $\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} \\mid h(x) \\ge 0\\}$ 的前向不变性，其中 $h: \\mathbb{R}^{2} \\to \\mathbb{R}$ 是一个连续可微函数\n$$\nh(x) = 1 - \\big(x_{1}^{2} + 2 x_{2}^{2}\\big).\n$$\n系统向量场为\n$$\nf(x) = \\begin{bmatrix} x_{2} \\\\ -x_{1} + x_{1} x_{2} \\end{bmatrix}, \\qquad g(x) = \\begin{bmatrix} x_{1}^{2} \\\\ 1 \\end{bmatrix}.\n$$\n仅从链式法则和 $h(x(t))$ 沿轨迹 $\\dot{x} = f(x) + g(x) u$ 的时间导数定义出发，计算李导数 $L_{f} h(x)$ 和 $L_{g} h(x)$，然后在边界点 $x^{\\star} = \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix} \\in \\partial \\mathcal{C}$ 处对它们进行求值。解释 $L_{f} h(x^{\\star})$ 和 $L_{g} h(x^{\\star})$ 的符号，说明在 $x^{\\star}$ 点，漂移和输入通道是局部地将状态驱动到安全集的内部 $\\{x : h(x)>0\\}$ 还是外部 $\\{x : h(x)0\\}$。\n\n将你的最终答案以行向量 $\\big[L_{f} h(x^{\\star}) \\;\\; L_{g} h(x^{\\star})\\big]$ 的形式报告。无需四舍五入。",
            "solution": "该问题是有效的，因为它是良定的，在非线性控制理论中有科学依据，并且所有必要的组成部分都已明确定义。\n\n函数 $h(x(t))$ 沿着系统 $\\dot{x} = f(x) + g(x) u$ 轨迹的时间导数可以通过链式法则求得：\n$$\n\\dot{h}(x) = \\frac{dh}{dt} = \\frac{\\partial h}{\\partial x} \\dot{x}\n$$\n其中 $\\frac{\\partial h}{\\partial x}$ 是 $h(x)$ 的梯度，它是一个行向量 $\\nabla h(x)^{\\top}$。将系统动力学代入 $\\dot{x}$，我们得到：\n$$\n\\dot{h}(x) = \\frac{\\partial h}{\\partial x} (f(x) + g(x) u)\n$$\n根据点积的线性性质，这可以展开为：\n$$\n\\dot{h}(x) = \\frac{\\partial h}{\\partial x} f(x) + \\left(\\frac{\\partial h}{\\partial x} g(x)\\right) u\n$$\n此表达式中的项分别定义为 $h$ 沿着向量场 $f$ 和 $g$ 的李导数：\n$$\nL_{f} h(x) \\triangleq \\frac{\\partial h}{\\partial x} f(x) = \\nabla h(x) \\cdot f(x)\n$$\n$$\nL_{g} h(x) \\triangleq \\frac{\\partial h}{\\partial x} g(x) = \\nabla h(x) \\cdot g(x)\n$$\n因此，使用控制屏障函数 (CBF) 进行安全认证的条件，即要求在边界 $\\partial\\mathcal{C} = \\{x | h(x) = 0\\}$ 上 $\\dot{h}(x) \\ge 0$，变成以下不等式：\n$$\nL_{f} h(x) + L_{g} h(x) u \\ge 0\n$$\n\n首先，我们计算给定函数 $h(x) = 1 - x_{1}^{2} - 2 x_{2}^{2}$ 的梯度。\n$$\n\\frac{\\partial h}{\\partial x} = \\begin{bmatrix} \\frac{\\partial h}{\\partial x_{1}}  \\frac{\\partial h}{\\partial x_{2}} \\end{bmatrix} = \\begin{bmatrix} -2 x_{1}  -4 x_{2} \\end{bmatrix}\n$$\n现在，我们可以计算李导数。\n\n李导数 $L_{f} h(x)$ 是：\n$$\nL_{f} h(x) = \\begin{bmatrix} -2 x_{1}  -4 x_{2} \\end{bmatrix} \\begin{bmatrix} x_{2} \\\\ -x_{1} + x_{1} x_{2} \\end{bmatrix}\n$$\n$$\nL_{f} h(x) = (-2 x_{1})(x_{2}) + (-4 x_{2})(-x_{1} + x_{1} x_{2})\n$$\n$$\nL_{f} h(x) = -2 x_{1} x_{2} + 4 x_{1} x_{2} - 4 x_{1} x_{2}^{2}\n$$\n$$\nL_{f} h(x) = 2 x_{1} x_{2} - 4 x_{1} x_{2}^{2}\n$$\n李导数 $L_{g} h(x)$ 是：\n$$\nL_{g} h(x) = \\begin{bmatrix} -2 x_{1}  -4 x_{2} \\end{bmatrix} \\begin{bmatrix} x_{1}^{2} \\\\ 1 \\end{bmatrix}\n$$\n$$\nL_{g} h(x) = (-2 x_{1})(x_{1}^{2}) + (-4 x_{2})(1)\n$$\n$$\nL_{g} h(x) = -2 x_{1}^{3} - 4 x_{2}\n$$\n接下来，我们在指定的边界点 $x^{\\star} = \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}$ 计算这些表达式的值。首先，我们确认 $h(x^{\\star}) = 1 - (1^{2} + 2(0)^{2}) = 1 - 1 = 0$，所以 $x^{\\star}$ 确实在边界 $\\partial \\mathcal{C}$ 上。\n\n在 $x^{\\star}$ 处计算 $L_{f} h(x)$：\n$$\nL_{f} h(x^{\\star}) = 2(1)(0) - 4(1)(0)^{2} = 0 - 0 = 0\n$$\n在 $x^{\\star}$ 处计算 $L_{g} h(x)$：\n$$\nL_{g} h(x^{\\star}) = -2(1)^{3} - 4(0) = -2 - 0 = -2\n$$\n所要求的行向量是 $\\begin{bmatrix} L_{f} h(x^{\\star})  L_{g} h(x^{\\star}) \\end{bmatrix} = \\begin{bmatrix} 0  -2 \\end{bmatrix}$。\n\n符号的解释：\n梯度向量 $\\nabla h(x)$ 指向 $h(x)$ 最快增加的方向。由于安全集 $\\mathcal{C}$ 由 $h(x) \\ge 0$ 定义，在边界 $\\partial\\mathcal{C}$ 上的任何点的梯度 $\\nabla h(x)$ 都与边界正交，并指向安全集的内部。\n-   $L_{f} h(x^{\\star}) = \\nabla h(x^{\\star}) \\cdot f(x^{\\star})$ 的符号表示在 $x^{\\star}$ 点，漂移向量场 $f(x)$ 是指向安全集内部还是外部。此处，$L_{f} h(x^{\\star}) = 0$。这意味着漂移向量场 $f(x^{\\star})$ 与梯度 $\\nabla h(x^{\\star})$ 正交。从几何上看，这意味着漂移向量在 $x^{\\star}$ 点与安全集的边界相切。动力学的漂移分量既不将状态移向安全集的内部，也不移向外部；它使状态沿着边界移动。\n-   $L_{g} h(x^{\\star}) = \\nabla h(x^{\\star}) \\cdot g(x^{\\star})$ 的符号表示在 $x^{\\star}$ 点，控制向量场 $g(x)$ 是指向安全集内部还是外部。此处，$L_{g} h(x^{\\star}) = -2  0$。这意味着控制向量场 $g(x^{\\star})$ 有一个分量指向与指向内部的法向量 $\\nabla h(x^{\\star})$相反的方向。因此，输入通道局部地将状态驱动到安全集的外部（不安全区域，其中 $h(x)  0$）。为满足 CBF 条件 $L_f h(x^{\\star}) + L_g h(x^{\\star}) u \\ge 0$，该条件简化为 $0 + (-2)u \\ge 0$ 或 $u \\le 0$，在 $x^{\\star}$ 点需要一个非正的控制输入以防止安全违规。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0  -2 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "现实世界的系统常常需要满足多个、有时甚至是相互冲突的安全要求。本练习  将探讨这样一个场景：同时强制执行两个独立的安全约束是不可能的。你将学习如何构建一个统一的二次规划 (Quadratic Program, QP) 问题，通过引入松弛变量来寻找一个最优的控制策略，以最好地权衡两个约束，这为处理安全关键控制中的折衷问题提供了一种实用方法。",
            "id": "4210402",
            "problem": "考虑一个数字孪生监控一个一维信息物理系统，其状态 $x \\in \\mathbb{R}$ 由单积分器动力学 $\\dot{x} = u$ 控制，其中 $u \\in \\mathbb{R}$ 是控制输入。安全性由两个集合 $S_{1} = \\{ x \\in \\mathbb{R} \\mid h_{1}(x) \\geq 0 \\}$ 和 $S_{2} = \\{ x \\in \\mathbb{R} \\mid h_{2}(x) \\geq 0 \\}$ 定义。该系统使用控制屏障函数 (CBF) 和扩展 $\\mathcal{K}$ 类函数 $\\alpha s$（对于给定的参数 $\\alpha  0$），在CBF不等式可以被强制执行时，使集合成为正向不变的。这些函数是\n$$\nh_{1}(x) = x - 1, \\quad h_{2}(x) = 0 - x.\n$$\n在一个监控时刻 $t_{0}$，数字孪生测量到受控对象的状态为 $x(t_{0}) = \\frac{1}{2}$，并有一个标称控制 $u_{0} = 0$。为了在两个CBF约束可能不兼容时尝试同时满足它们，该孪生系统构建了一个带有非负松弛变量 $\\delta_{1}, \\delta_{2} \\in \\mathbb{R}_{\\geq 0}$ 的二次规划 (QP) 问题，并由惩罚项 $\\rho  0$ 加权：\n$$\n\\min_{u, \\delta_{1}, \\delta_{2}} \\ \\ (u - u_{0})^{2} + \\rho \\left( \\delta_{1}^{2} + \\delta_{2}^{2} \\right)\n$$\n约束条件为松弛后的CBF不等式\n$$\n\\frac{\\partial h_{1}}{\\partial x}(x(t_{0})) \\, u + \\alpha \\, h_{1}(x(t_{0})) \\geq - \\delta_{1}, \\quad\n\\frac{\\partial h_{2}}{\\partial x}(x(t_{0})) \\, u + \\alpha \\, h_{2}(x(t_{0})) \\geq - \\delta_{2}, \\quad\n\\delta_{1} \\geq 0, \\ \\delta_{2} \\geq 0,\n$$\n这些不等式与单积分器系统的正向不变性条件是一致的。\n\n从安全集 $S_{i}$ 和基于CBF的正向不变性的基本定义出发，仅使用动力学 $\\dot{x} = u$ 和扩展 $\\mathcal{K}$ 类函数的定义，推导出上述QP，然后针对给定数据求解其闭式解。计算出唯一的最优解 $(u^{\\star}, \\delta_{1}^{\\star}, \\delta_{2}^{\\star})$，其形式为关于 $\\alpha$ 和 $\\rho$ 的解析表达式。\n\n此外，从第一性原理出发，推理强制执行同步CBF不等式的几何可行性，并阐明对于单积分器动力学，在给定状态 $x$ 下，存在一个无松弛的输入 $u$ 能够实现交集 $S_{1} \\cap S_{2}$ 安全性的充分必要条件，此过程中不得引用任何非由上述基本原理推导出的简化公式。您最终报告的答案应为有序三元组 $(u^{\\star}, \\delta_{1}^{\\star}, \\delta_{2}^{\\star})$，以单个解析表达式的形式给出。不包含任何单位。无需四舍五入。",
            "solution": "首先根据指定标准对问题进行验证。\n\n**步骤1：提取给定条件**\n- 系统动力学：$\\dot{x} = u$，其中 $x \\in \\mathbb{R}$ 且 $u \\in \\mathbb{R}$。\n- 安全集：$S_{1} = \\{ x \\in \\mathbb{R} \\mid h_{1}(x) \\geq 0 \\}$ 和 $S_{2} = \\{ x \\in \\mathbb{R} \\mid h_{2}(x) \\geq 0 \\}$。\n- 屏障函数：$h_{1}(x) = x - 1$ 和 $h_{2}(x) = 0 - x = -x$。\n- $\\mathcal{K}$类函数：一个形式为 $\\alpha(s) = \\alpha s$ 的扩展$\\mathcal{K}$类函数，对于一个常数 $\\alpha  0$。\n- $t_{0}$时刻的状态：$x(t_{0}) = \\frac{1}{2}$。\n- $t_{0}$时刻的标称控制输入：$u_{0} = 0$。\n- 优化问题（二次规划）：\n$$\n\\min_{u, \\delta_{1}, \\delta_{2}} \\ \\ (u - u_{0})^{2} + \\rho \\left( \\delta_{1}^{2} + \\delta_{2}^{2} \\right)\n$$\n约束条件为：\n$$\n\\frac{\\partial h_{1}}{\\partial x}(x(t_{0})) \\, u + \\alpha \\, h_{1}(x(t_{0})) \\geq - \\delta_{1} \\\\\n\\frac{\\partial h_{2}}{\\partial x}(x(t_{0})) \\, u + \\alpha \\, h_{2}(x(t_{0})) \\geq - \\delta_{2} \\\\\n\\delta_{1} \\geq 0, \\ \\delta_{2} \\geq 0\n$$\n其中 $\\rho  0$ 是一个惩罚参数。\n\n**步骤2：使用提取的给定条件进行验证**\n- **科学依据**：该问题在控制理论中有充分的依据，特别是在信息物理系统中使用控制屏障函数 (CBF) 进行安全保证方面。使用松弛变量构建二次规划 (QP) 是一种处理冲突安全约束的标准且科学合理的方法。\n- **适定性**：该问题是适定的。所有必要的函数（$h_1, h_2$）、系统动力学（$\\dot{x}=u$）、初始条件（$x(t_0)$）和参数（$\\alpha, \\rho, u_0$）都已明确定义。目标函数是严格凸的，约束是线性的，这保证了唯一解的存在。\n- **客观性**：该问题以精确、客观的数学语言陈述，不含主观或模棱两可的术语。\n- **一致性**：安全集为 $S_1 = [1, \\infty)$ 和 $S_2 = (-\\infty, 0]$。它们的交集为空，即 $S_1 \\cap S_2 = \\emptyset$。初始状态 $x(t_0) = \\frac{1}{2}$ 在两个集合之外，意味着 $h_1(x(t_0))  0$ 且 $h_2(x(t_0))  0$。这种配置并不矛盾，而是代表了一种安全约束内在冲突的场景，这正是使用带有松弛变量的指定QP的原因。问题设置是内部一致的。\n\n**步骤3：结论与行动**\n问题有效。我们将继续进行推导和求解。\n\n**控制屏障函数二次规划的推导**\n\n对于一个系统 $\\dot{x} = f(x,u)$，如果可以找到一个控制输入 $u$，使得在边界 $\\partial S = \\{x \\mid h(x) = 0\\}$ 上的所有 $x$ 都满足 $\\dot{h}(x,u) \\geq 0$，那么集合 $S = \\{x \\in \\mathbb{R}^n \\mid h(x) \\geq 0\\}$（其中 $h$ 是一个连续可微函数）是正向不变的。CBF方法通过要求存在一个控制 $u$ 来加强这一条件，使得对于一个扩展 $\\mathcal{K}$ 类函数 $\\alpha(\\cdot)$，在所关注的域中的所有 $x$ 都满足以下不等式：\n$$\n\\dot{h}(x, u) \\geq -\\alpha(h(x))\n$$\n使用链式法则，$\\dot{h} = \\frac{\\mathrm{d}h}{\\mathrm{d}t} = \\frac{\\partial h}{\\partial x} \\frac{\\mathrm{d}x}{\\mathrm{d}t} = \\nabla h(x) \\cdot \\dot{x}$。对于给定的单积分器动力学 $\\dot{x}=u$，这变为 $\\dot{h} = \\frac{\\partial h}{\\partial x} u$。因此，CBF约束为：\n$$\n\\frac{\\partial h}{\\partial x} u + \\alpha(h(x)) \\geq 0\n$$\n问题指定 $\\alpha(s) = \\alpha s$ 对于某个 $\\alpha  0$。为了使系统相对于由 $h_1$ 和 $h_2$ 定义的两个集合 $S_1$ 和 $S_2$ 是安全的，两个CBF约束必须由单个控制输入 $u$ 同时满足：\n$$\n\\frac{\\partial h_{1}}{\\partial x} u + \\alpha h_{1}(x) \\geq 0 \\\\\n\\frac{\\partial h_{2}}{\\partial x} u + \\alpha h_{2}(x) \\geq 0\n$$\n如下所示，这两个约束可能是矛盾的，意味着不存在这样的 $u$。为了确保一个可行的控制综合问题，使用非负变量 $\\delta_1, \\delta_2 \\geq 0$ 对约束进行松弛：\n$$\n\\frac{\\partial h_{1}}{\\partial x}(x) u + \\alpha h_{1}(x) \\geq -\\delta_1 \\\\\n\\frac{\\partial h_{2}}{\\partial x}(x) u + \\alpha h_{2}(x) \\geq -\\delta_2\n$$\n目标是找到一个最小侵入性的控制输入 $u$，即尽可能接近标称控制 $u_0$，同时最小化由 $\\delta_1$ 和 $\\delta_2$ 代表的约束违反。这被构建为一个优化问题。通过对控制偏差和松弛项都使用二次惩罚，我们得到了在特定状态 $x(t_0)$ 下评估的问题陈述中给出的QP：\n$$\n\\min_{u, \\delta_{1}, \\delta_{2}} \\ \\ (u - u_{0})^{2} + \\rho \\left( \\delta_{1}^{2} + \\delta_{2}^{2} \\right)\n$$\n约束条件如上。这完成了从第一性原理推导QP的过程。\n\n**无松弛约束的几何可行性**\n\n为了在状态 $x$ 处，对于安全集的交集，存在一个无松弛的控制输入 $u$，它必须同时满足以下两个不等式：\n$$\n\\frac{\\partial h_{1}}{\\partial x} u \\geq -\\alpha h_{1}(x) \\quad (1) \\\\\n\\frac{\\partial h_{2}}{\\partial x} u \\geq -\\alpha h_{2}(x) \\quad (2)\n$$\n对于给定的函数，$\\frac{\\partial h_{1}}{\\partial x} = 1$ 且 $\\frac{\\partial h_{2}}{\\partial x} = -1$。不等式变为：\n$$\nu \\geq -\\alpha h_{1}(x) = -\\alpha(x-1) \\\\\n-u \\geq -\\alpha h_{2}(x) = -\\alpha(-x) = \\alpha x \\implies u \\leq -\\alpha x\n$$\n一个解 $u$ 存在当且仅当下界小于或等于上界时：\n$$\n-\\alpha(x-1) \\leq -\\alpha x\n$$\n因为 $\\alpha  0$，我们可以除以 $-\\alpha$ 并反转不等号：\n$$\nx-1 \\geq x \\implies -1 \\geq 0\n$$\n这个不等式是错误的。因此，对于给定的屏障函数 $h_1$ 和 $h_2$，不存在状态 $x \\in \\mathbb{R}$ 使得一个无松弛的控制输入 $u$ 能同时满足两个CBF条件。这种内在的不可行性使得松弛变量的使用成为必要。\n\n**求解二次规划**\n\n我们现在求解这个特定的QP。首先，我们将问题数据代入约束条件中：\n- $x(t_0) = \\frac{1}{2}$\n- $u_0 = 0$\n- $h_1(x(t_0)) = \\frac{1}{2} - 1 = -\\frac{1}{2}$，且 $\\frac{\\partial h_1}{\\partial x}(x(t_0)) = 1$。\n- $h_2(x(t_0)) = - \\frac{1}{2}$，且 $\\frac{\\partial h_2}{\\partial x}(x(t_0)) = -1$。\n\n该QP为：\n$$\n\\min_{u, \\delta_{1}, \\delta_{2}} \\ \\ u^{2} + \\rho \\left( \\delta_{1}^{2} + \\delta_{2}^{2} \\right)\n$$\n约束条件为：\n$$\n(1)u + \\alpha(-\\frac{1}{2}) \\geq -\\delta_1 \\implies u - \\frac{\\alpha}{2} \\geq -\\delta_1 \\\\\n(-1)u + \\alpha(-\\frac{1}{2}) \\geq -\\delta_2 \\implies -u - \\frac{\\alpha}{2} \\geq -\\delta_2 \\\\\n\\delta_1 \\geq 0, \\ \\delta_2 \\geq 0\n$$\n约束可以重写以分离出松弛变量：\n$$\n\\delta_1 \\geq \\frac{\\alpha}{2} - u \\\\\n\\delta_2 \\geq \\frac{\\alpha}{2} + u\n$$\n因为我们要最小化的成本函数是关于 $\\delta_1$ 和 $\\delta_2$ 严格递增的，并且这些变量也必须是非负的，所以在最优点，它们必须取约束所允许的最小值。因此：\n$$\n\\delta_1^{\\star} = \\max\\left(0, \\frac{\\alpha}{2} - u\\right) \\\\\n\\delta_2^{\\star} = \\max\\left(0, \\frac{\\alpha}{2} + u\\right)\n$$\n将这些代入目标函数，问题简化为仅最小化一个关于 $u$ 的函数：\n$$\nJ(u) = u^2 + \\rho \\left( \\left(\\max\\left(0, \\frac{\\alpha}{2} - u\\right)\\right)^2 + \\left(\\max\\left(0, \\frac{\\alpha}{2} + u\\right)\\right)^2 \\right)\n$$\n我们根据 $\\max$ 函数的参数，在 $u$ 的三个区间上分析这个函数。\n\n情况1：$u \\leq -\\frac{\\alpha}{2}$。\n在此范围内，$\\frac{\\alpha}{2} - u \\geq \\alpha  0$ 且 $\\frac{\\alpha}{2} + u \\leq 0$。目标函数变为：\n$J(u) = u^2 + \\rho \\left( \\left(\\frac{\\alpha}{2} - u\\right)^2 + 0 \\right) = (1+\\rho)u^2 - \\rho\\alpha u + \\frac{\\rho\\alpha^2}{4}$。\n导数为 $J'(u) = 2(1+\\rho)u - \\rho\\alpha$。由于 $\\rho0$ 且 $u \\leq -\\frac{\\alpha}{2}  0$，我们有 $2(1+\\rho)u \\leq -(1+\\rho)\\alpha$。因此 $J'(u) \\leq -(1+\\rho)\\alpha - \\rho\\alpha = -(1+2\\rho)\\alpha  0$。该函数在此区间内严格递减。\n\n情况2：$u \\geq \\frac{\\alpha}{2}$。\n在此范围内，$\\frac{\\alpha}{2} - u \\leq 0$ 且 $\\frac{\\alpha}{2} + u \\geq \\alpha  0$。目标函数变为：\n$J(u) = u^2 + \\rho \\left( 0 + \\left(\\frac{\\alpha}{2} + u\\right)^2 \\right) = (1+\\rho)u^2 + \\rho\\alpha u + \\frac{\\rho\\alpha^2}{4}$。\n导数为 $J'(u) = 2(1+\\rho)u + \\rho\\alpha$。由于 $\\rho0$ 且 $u \\geq \\frac{\\alpha}{2}  0$，我们有 $J'(u)  0$。该函数在此区间内严格递增。\n\n情况3：$-\\frac{\\alpha}{2}  u  \\frac{\\alpha}{2}$。\n在此范围内，$\\frac{\\alpha}{2} - u  0$ 且 $\\frac{\\alpha}{2} + u  0$。目标函数为：\n$J(u) = u^2 + \\rho \\left( \\left(\\frac{\\alpha}{2} - u\\right)^2 + \\left(\\frac{\\alpha}{2} + u\\right)^2 \\right)$\n$J(u) = u^2 + \\rho \\left( (\\frac{\\alpha^2}{4} - \\alpha u + u^2) + (\\frac{\\alpha^2}{4} + \\alpha u + u^2) \\right)$\n$J(u) = u^2 + \\rho \\left( \\frac{\\alpha^2}{2} + 2u^2 \\right) = (1+2\\rho)u^2 + \\frac{\\rho\\alpha^2}{2}$。\n这是一个开口向上的抛物线，其顶点在 $u=0$。导数为 $J'(u) = 2(1+2\\rho)u$。这个二次函数的最小值在 $u=0$ 处，该点位于区间 $(-\\frac{\\alpha}{2}, \\frac{\\alpha}{2})$ 内。\n\n由于 $J(u)$ 在 $u \\leq -\\frac{\\alpha}{2}$ 时递减，在 $u \\in (-\\frac{\\alpha}{2}, \\frac{\\alpha}{2})$ 时在 $u=0$ 处有唯一最小值，并且在 $u \\geq \\frac{\\alpha}{2}$ 时递增，所以 $J(u)$ 的全局最小值出现在 $u=0$ 处。\n因此，最优控制为 $u^{\\star} = 0$。\n\n当 $u^{\\star}=0$ 时，我们求出最优松弛变量：\n$$\n\\delta_1^{\\star} = \\max\\left(0, \\frac{\\alpha}{2} - 0\\right) = \\frac{\\alpha}{2} \\quad (\\text{因为 } \\alpha  0)\n$$\n$$\n\\delta_2^{\\star} = \\max\\left(0, \\frac{\\alpha}{2} + 0\\right) = \\frac{\\alpha}{2} \\quad (\\text{因为 } \\alpha  0)\n$$\n该QP的唯一最优解是三元组 $(u^{\\star}, \\delta_{1}^{\\star}, \\delta_{2}^{\\star}) = (0, \\frac{\\alpha}{2}, \\frac{\\alpha}{2})$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0  \\frac{\\alpha}{2}  \\frac{\\alpha}{2} \\end{pmatrix}}\n$$"
        }
    ]
}
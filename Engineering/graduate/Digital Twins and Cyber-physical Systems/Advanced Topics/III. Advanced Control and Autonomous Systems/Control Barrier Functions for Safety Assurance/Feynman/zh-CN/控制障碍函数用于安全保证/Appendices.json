{
    "hands_on_practices": [
        {
            "introduction": "理论学习的最佳方式是实践。本章将通过一系列动手练习，带您深入探索控制屏障函数 (Control Barrier Functions, CBF) 的核心概念与实际应用。第一个练习将为您奠定坚实的基础。通过一个简单的一维标量系统 ，您将亲手构造一个有效的 CBF，推导出保证系统安全的控制输入必须满足的不等式，并最终通过求解一个二次规划 (Quadratic Program, QP) 问题来找到最小程度修正后的安全控制指令。这个过程将清晰地展示 CBF 的基本工作原理。",
            "id": "2695296",
            "problem": "考虑由 $\\dot{x} = u$ 给出的标量控制系统，其安全要求为 $x \\leq 1$，由函数 $h(x) = 1 - x$ 编码。安全集为 $\\mathcal{C} = \\{ x \\in \\mathbb{R} : h(x) \\geq 0 \\}$。\n\n任务：\n1. 构建一个有效的扩展$\\mathcal{K}$类函数 $\\alpha : \\mathbb{R} \\to \\mathbb{R}$，并证明其满足定义属性。\n2. 仅使用安全集 $\\mathcal{C}$ 和零化控制屏障函数 (ZCBF) 的定义，推导容许控制 $u$ 为使系统 $\\dot{x} = u$ 的集合 $\\mathcal{C}$ 成为前向不变集而必须满足的不等式。\n3. 使用您推导出的不等式，描述在一般状态 $x \\in \\mathbb{R}$ 下的容许控制集。\n4. 假设一个标称控制 $u_{\\mathrm{nom}}(x)$ 通过一个二次规划进行滤波，该二次规划在当前状态下以最小化修改来强制执行安全约束，\n   $$\\min_{u \\in \\mathbb{R}} \\ (u - u_{\\mathrm{nom}}(x))^{2} \\quad \\text{subject to the ZCBF admissibility inequality at the current } x.$$\n   取 $\\alpha(s) = \\kappa s$ 且 $\\kappa = 3$，在状态 $x = 0.8$ 进行评估，并使用标称值 $u_{\\mathrm{nom}}(0.8) = 1.2$。计算由该二次规划返回的最优安全滤波控制 $u^{\\star}$。\n\n将您的最终答案表示为单个实数。不要四舍五入。",
            "solution": "本问题将首先被验证，若有效，则将按顺序解决，处理四个指定的任务中的每一项。\n\n首先，需要对问题陈述进行评估。\n\n已知条件逐字提取如下：\n- 系统模型：$\\dot{x} = u$，其中 $x \\in \\mathbb{R}$ 且 $u \\in \\mathbb{R}$。\n- 安全要求：$x \\leq 1$。\n- 屏障函数：$h(x) = 1 - x$。\n- 安全集：$\\mathcal{C} = \\{ x \\in \\mathbb{R} : h(x) \\geq 0 \\}$。\n- 任务1：构建一个有效的扩展$\\mathcal{K}$类函数 $\\alpha : \\mathbb{R} \\to \\mathbb{R}$，并证明其属性。\n- 任务2：仅使用安全集和零化控制屏障函数 (ZCBF) 的定义，推导容许控制 $u$ 的 ZCBF 不等式。\n- 任务3：描述在一般状态 $x$ 下的容许控制集。\n- 任务4：求解一个特定的二次规划 (QP) 以获得安全滤波控制 $u^{\\star}$。该 QP 为 $\\min_{u \\in \\mathbb{R}} \\ (u - u_{\\mathrm{nom}}(x))^{2}$，受 ZCBF 不等式约束。具体参数为：$\\alpha(s) = \\kappa s$ 且 $\\kappa = 3$，评估状态 $x = 0.8$，以及标称控制 $u_{\\mathrm{nom}}(0.8) = 1.2$。\n\n问题需进行有效性验证。\n该问题具有**科学依据**且**客观**。这是一个控制理论领域的标准、定义明确的问题，具体涉及应用零化控制屏障函数 (ZCBF) 来确保控制系统的安全性。所有术语，如“控制系统”、“安全集”、“$\\mathcal{K}$类函数”和“ZCBF”，在该学科内都有严格的定义。系统模型是一个简单的积分器，这是控制理论中的一个基本构建模块。该问题是**适定的**，因为它提供了所有必要的信息和定义，以便进行逻辑推导并为指定的二次规划得出一个唯一的解。该问题是自洽的、一致的，并且没有任何科学、逻辑或事实上的缺陷。问题的任何部分都不违反基本原则，不依赖于伪科学，也不是主观的。\n\n该问题被确定为**有效**。现提供完整解答。\n\n**任务1：构建一个扩展$\\mathcal{K}$类函数**\n一个扩展$\\mathcal{K}$类函数 $\\alpha : \\mathbb{R} \\to \\mathbb{R}$ 是一个严格递增且满足 $\\alpha(0) = 0$ 的函数。这类函数的一个简单且常见的选择是形式为 $\\alpha(s) = \\kappa s$ 的线性函数，其中 $\\kappa$ 为某个正常数。\n为了证明这是一个有效的选择，我们验证两个定义属性：\n1.  **严格递增**：$\\alpha(s)$ 关于 $s$ 的导数是 $\\frac{d\\alpha}{ds} = \\kappa$。为使函数严格递增，其导数必须为正。因此，我们必须有 $\\kappa > 0$。在此条件下，该函数对于所有 $s \\in \\mathbb{R}$ 确实是严格递增的。\n2.  **通过原点**：在 $s=0$ 处求值，得到 $\\alpha(0) = \\kappa \\cdot 0 = 0$。对于任何 $\\kappa$ 的选择，此属性都满足。\n因此，任何满足 $\\kappa > 0$ 的函数 $\\alpha(s) = \\kappa s$ 都是一个有效的扩展$\\mathcal{K}$类函数。问题后面指定了 $\\kappa=3$，这是一个有效的选择。\n\n**任务2：ZCBF 容许性不等式的推导**\n安全集定义为 $\\mathcal{C} = \\{x \\in \\mathbb{R} : h(x) \\geq 0\\}$。为使集合 $\\mathcal{C}$ 成为前向不变集，任何从 $\\mathcal{C}$ 开始的状态轨迹 $x(t)$ 必须在所有未来时间 $t \\geq 0$ 内保持在 $\\mathcal{C}$ 中。这意味着如果 $h(x(t_0)) \\geq 0$，我们必须确保对于所有 $t > t_0$ 都有 $h(x(t)) \\geq 0$。\n强制执行此条件的一个充分条件是确保每当状态位于安全集的边界上，即 $h(x) = 0$ 时，状态速度向量不指向集合外部。这可以转化为条件 $\\dot{h}(x) \\geq 0$ 当 $h(x)=0$ 时。\n零化控制屏障函数 (ZCBF) 将此要求形式化并加强，使其适用于集合内部的所有点，而不仅仅是边界上的点。如果存在一个扩展$\\mathcal{K}$类函数 $\\alpha$，使得对于感兴趣域中的所有 $x$，以下不等式成立，则函数 $h$ 是一个ZCBF：\n$$ \\dot{h}(x, u) \\geq -\\alpha(h(x)) $$\n$h(x(t))$ 的时间导数使用链式法则求得：\n$$ \\dot{h}(x, u) = \\frac{\\partial h}{\\partial x} \\dot{x} $$\n我们已知 $h(x) = 1 - x$，所以关于 $x$ 的偏导数为：\n$$ \\frac{\\partial h}{\\partial x} = -1 $$\n系统动力学由 $\\dot{x} = u$ 给出。将这些代入 $\\dot{h}$ 的表达式中：\n$$ \\dot{h}(x, u) = (-1) u = -u $$\n现在，将此代入 ZCBF 不等式中：\n$$ -u \\geq -\\alpha(h(x)) $$\n两边同乘以 $-1$ 会反转不等号：\n$$ u \\leq \\alpha(h(x)) $$\n最后，代入 $h(x)$ 的表达式：\n$$ u \\leq \\alpha(1 - x) $$\n这就是任何容许控制 $u$ 为保证安全集 $\\mathcal{C}$ 的前向不变性而必须满足的不等式。\n\n**任务3：容许控制集的描述**\n根据任务2中推导出的不等式，在给定状态 $x$ 下的所有容许控制的集合，记为 $K_{\\mathrm{cbf}}(x)$，是满足 ZCBF 条件的所有输入 $u \\in \\mathbb{R}$ 的集合。\n$$ K_{\\mathrm{cbf}}(x) = \\{ u \\in \\mathbb{R} : u \\leq \\alpha(1 - x) \\} $$\n这个集合在实数轴上表示一个闭合的半直线，其上界为值 $\\alpha(1 - x)$。用区间表示法，这表示为：\n$$ K_{\\mathrm{cbf}}(x) = (-\\infty, \\alpha(1-x)] $$\n在状态 $x$ 下，从该集合中选择的任何控制输入都保证是安全的。\n\n**任务4：最优安全滤波控制的计算**\n问题是通过求解以下二次规划 (QP) 来找到最优控制 $u^{\\star}$：\n$$ u^{\\star} = \\arg\\min_{u \\in \\mathbb{R}} \\ (u - u_{\\mathrm{nom}}(x))^{2} $$\n约束条件为任务2中推导出的：\n$$ u \\leq \\alpha(1-x) $$\n这是一个在可行集 $K_{\\mathrm{cbf}}(x)$ 中寻找在欧几里得意义上最接近标称控制 $u_{\\mathrm{nom}}(x)$ 的点的问题。目标函数 $(u - u_{\\mathrm{nom}}(x))^{2}$ 是一个抛物线，其顶点（最小值）位于 $u = u_{\\mathrm{nom}}(x)$。\n设可行集的上界为 $u_{\\mathrm{bound}} = \\alpha(1 - x)$。约束为 $u \\leq u_{\\mathrm{bound}}$。\n解 $u^{\\star}$ 有两种可能的情况：\n1.  如果无约束最小值 $u_{\\mathrm{nom}}(x)$ 位于可行集内（即 $u_{\\mathrm{nom}}(x) \\leq u_{\\mathrm{bound}}$），则最优解为 $u^{\\star} = u_{\\mathrm{nom}}(x)$。标称控制已经是安全的。\n2.  如果无约束最小值位于可行集外（即 $u_{\\mathrm{nom}}(x) > u_{\\mathrm{bound}}$），则最优解是可行集中最接近 $u_{\\mathrm{nom}}(x)$ 的点。对于区间 $(-\\infty, u_{\\mathrm{bound}}]$，最接近的点就是边界本身，即 $u^{\\star} = u_{\\mathrm{bound}}$。\n这个逻辑可以总结为 $u^{\\star} = \\min(u_{\\mathrm{nom}}(x), u_{\\mathrm{bound}})$。\n\n我们被给予以下用于评估的值：\n- 扩展$\\mathcal{K}$类函数：$\\alpha(s) = \\kappa s$ 且 $\\kappa = 3$，所以 $\\alpha(s) = 3s$。\n- 状态：$x = 0.8$。\n- 在此状态下的标称控制：$u_{\\mathrm{nom}}(0.8) = 1.2$。\n\n首先，我们计算在状态 $x = 0.8$ 时的上界 $u_{\\mathrm{bound}}$：\n$$ u_{\\mathrm{bound}} = \\alpha(1 - x) = 3 \\times (1 - 0.8) = 3 \\times 0.2 = 0.6 $$\n因此，安全约束为 $u \\leq 0.6$。可行集为 $K_{\\mathrm{cbf}}(0.8) = (-\\infty, 0.6]$。\n\n接下来，我们将标称控制 $u_{\\mathrm{nom}}(0.8)$ 与此界限进行比较：\n$$ u_{\\mathrm{nom}}(0.8) = 1.2 $$\n我们观察到 $1.2 > 0.6$，所以 $u_{\\mathrm{nom}}(0.8) > u_{\\mathrm{bound}}$。标称控制不安全，因为它违反了 ZCBF 条件。\n我们处于第二种情况，即最优控制 $u^{\\star}$ 是 $u_{\\mathrm{nom}}$ 在可行集上的投影。因此，最优安全滤波控制是边界值。\n$$ u^{\\star} = u_{\\mathrm{bound}} = 0.6 $$\n这是二次规划的结果。控制器对标称输入 $u_{\\mathrm{nom}}(0.8) = 1.2$ 进行了最小化修改，得到 $u^{\\star} = 0.6$，以满足安全约束。",
            "answer": "$$\n\\boxed{0.6}\n$$"
        },
        {
            "introduction": "在掌握了基本原理之后，我们将把视野扩展到更具一般性的非线性控制仿射系统。对于这类由矢量场描述动力学的系统，屏障函数的变化率是通过李导数 (Lie derivatives) 来计算的 。本次练习将让您动手计算沿系统漂移项 $f(x)$ 和控制输入项 $g(x)$ 的李导数，即 $L_f h$ 和 $L_g h$。通过分析这些导数的正负号，您将能从几何上直观地理解系统的自然动态和控制输入分别对系统状态趋近或远离安全边界的影响，这是将 CBF 应用于复杂系统的关键一步。",
            "id": "4210344",
            "problem": "一个平面信息物理系统的数字孪生将其物理对象的状态建模为 $x = \\begin{bmatrix} x_{1}  x_{2} \\end{bmatrix}^{\\top} \\in \\mathbb{R}^{2}$，该状态在控制仿射动力学 $\\dot{x} = f(x) + g(x) u$ 下演化，其中 $u \\in \\mathbb{R}$ 是控制输入。该数字孪生使用控制屏障函数 (Control Barrier Function, CBF) 进行安全保证，以验证安全集 $\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} \\mid h(x) \\ge 0\\}$ 的正向不变性，其中 $h: \\mathbb{R}^{2} \\to \\mathbb{R}$ 是连续可微函数\n$$\nh(x) = 1 - \\big(x_{1}^{2} + 2 x_{2}^{2}\\big).\n$$\n系统向量场为\n$$\nf(x) = \\begin{bmatrix} x_{2} \\\\ -x_{1} + x_{1} x_{2} \\end{bmatrix}, \\qquad g(x) = \\begin{bmatrix} x_{1}^{2} \\\\ 1 \\end{bmatrix}.\n$$\n仅从链式法则和 $h(x(t))$ 沿轨迹 $\\dot{x} = f(x) + g(x) u$ 的时间导数定义出发，计算李导数 $L_{f} h(x)$ 和 $L_{g} h(x)$，然后在边界点 $x^{\\star} = \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}$ 处计算它们的值。解释 $L_{f} h(x^{\\star})$ 和 $L_{g} h(x^{\\star})$ 的符号，说明在 $x^{\\star}$ 点，漂移和输入通道是局部地将状态驱动至安全集的内部 $\\{h0\\}$ 还是外部 $\\{h0\\}$。\n\n将你的最终答案以行向量 $\\begin{bmatrix}L_{f} h(x^{\\star})  L_{g} h(x^{\\star})\\end{bmatrix}$ 的形式报告。无需四舍五入。",
            "solution": "该问题是有效的，因为它是适定的，在非线性控制理论中有科学依据，并且所有必要的组成部分都已明确定义。\n\n函数 $h(x(t))$ 沿系统 $\\dot{x} = f(x) + g(x) u$ 轨迹的时间导数可以使用链式法则求得：\n$$\n\\dot{h}(x) = \\frac{dh}{dt} = \\frac{\\partial h}{\\partial x} \\dot{x}\n$$\n其中 $\\frac{\\partial h}{\\partial x}$ 是 $h(x)$ 的梯度，它是一个行向量 $\\nabla h(x)^{\\top}$。将系统动力学代入 $\\dot{x}$，我们得到：\n$$\n\\dot{h}(x) = \\frac{\\partial h}{\\partial x} (f(x) + g(x) u)\n$$\n根据点积的线性性质，这可以展开为：\n$$\n\\dot{h}(x) = \\frac{\\partial h}{\\partial x} f(x) + \\left(\\frac{\\partial h}{\\partial x} g(x)\\right) u\n$$\n此表达式中的项分别定义为 $h$ 沿着向量场 $f$ 和 $g$ 的李导数：\n$$\nL_{f} h(x) \\triangleq \\frac{\\partial h}{\\partial x} f(x) = \\nabla h(x) \\cdot f(x)\n$$\n$$\nL_{g} h(x) \\triangleq \\frac{\\partial h}{\\partial x} g(x) = \\nabla h(x) \\cdot g(x)\n$$\n因此，使用控制屏障函数 (CBF) 进行安全认证的条件，即要求在边界 $\\partial\\mathcal{C} = \\{x | h(x) = 0\\}$ 上 $\\dot{h}(x) \\ge 0$，变为以下不等式：\n$$\nL_{f} h(x) + L_{g} h(x) u \\ge 0\n$$\n\n首先，我们计算给定函数 $h(x) = 1 - x_{1}^{2} - 2 x_{2}^{2}$ 的梯度。\n$$\n\\frac{\\partial h}{\\partial x} = \\begin{bmatrix} \\frac{\\partial h}{\\partial x_{1}}  \\frac{\\partial h}{\\partial x_{2}} \\end{bmatrix} = \\begin{bmatrix} -2 x_{1}  -4 x_{2} \\end{bmatrix}\n$$\n现在，我们可以计算李导数。\n\n李导数 $L_{f} h(x)$ 是：\n$$\nL_{f} h(x) = \\begin{bmatrix} -2 x_{1}  -4 x_{2} \\end{bmatrix} \\begin{bmatrix} x_{2} \\\\ -x_{1} + x_{1} x_{2} \\end{bmatrix}\n$$\n$$\nL_{f} h(x) = (-2 x_{1})(x_{2}) + (-4 x_{2})(-x_{1} + x_{1} x_{2})\n$$\n$$\nL_{f} h(x) = -2 x_{1} x_{2} + 4 x_{1} x_{2} - 4 x_{1} x_{2}^{2}\n$$\n$$\nL_{f} h(x) = 2 x_{1} x_{2} - 4 x_{1} x_{2}^{2}\n$$\n李导数 $L_{g} h(x)$ 是：\n$$\nL_{g} h(x) = \\begin{bmatrix} -2 x_{1}  -4 x_{2} \\end{bmatrix} \\begin{bmatrix} x_{1}^{2} \\\\ 1 \\end{bmatrix}\n$$\n$$\nL_{g} h(x) = (-2 x_{1})(x_{1}^{2}) + (-4 x_{2})(1)\n$$\n$$\nL_{g} h(x) = -2 x_{1}^{3} - 4 x_{2}\n$$\n接下来，我们在指定的边界点 $x^{\\star} = \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}$ 处计算这些表达式的值。首先，我们确认 $h(x^{\\star}) = 1 - (1^{2} + 2(0)^{2}) = 1 - 1 = 0$，所以 $x^{\\star}$ 确实在边界 $\\partial \\mathcal{C}$ 上。\n\n在 $x^{\\star}$ 处计算 $L_{f} h(x)$：\n$$\nL_{f} h(x^{\\star}) = 2(1)(0) - 4(1)(0)^{2} = 0 - 0 = 0\n$$\n在 $x^{\\star}$ 处计算 $L_{g} h(x)$：\n$$\nL_{g} h(x^{\\star}) = -2(1)^{3} - 4(0) = -2 - 0 = -2\n$$\n所要求的行向量是 $\\begin{bmatrix} L_{f} h(x^{\\star})  L_{g} h(x^{\\star}) \\end{bmatrix} = \\begin{bmatrix} 0  -2 \\end{bmatrix}$。\n\n符号的解释：\n梯度向量 $\\nabla h(x)$ 指向 $h(x)$ 增长最快的方向。由于安全集 $\\mathcal{C}$ 由 $h(x) \\ge 0$ 定义，因此在边界 $\\partial\\mathcal{C}$ 上的任意一点，梯度 $\\nabla h(x)$ 与边界垂直，并指向安全集的内部。\n-   $L_{f} h(x^{\\star}) = \\nabla h(x^{\\star}) \\cdot f(x^{\\star})$ 的符号表示在 $x^{\\star}$ 点，漂移向量场 $f(x)$ 是指向安全集的内部还是外部。此处，$L_{f} h(x^{\\star}) = 0$。这意味着漂移向量场 $f(x^{\\star})$ 与梯度 $\\nabla h(x^{\\star})$ 正交。从几何上看，这意味着漂移向量在 $x^{\\star}$ 点与安全集的边界相切。动力学的漂移分量既不将状态移向安全集的内部，也不移向其外部；它使状态沿着边界移动。\n-   $L_{g} h(x^{\\star}) = \\nabla h(x^{\\star}) \\cdot g(x^{\\star})$ 的符号表示在 $x^{\\star}$ 点，控制向量场 $g(x)$ 是指向安全集的内部还是外部。此处，$L_{g} h(x^{\\star}) = -2  0$。这意味着控制向量场 $g(x^{\\star})$ 有一个分量指向与指向内部的法向量 $\\nabla h(x^{\\star})$ 相反的方向。因此，输入通道局部地将状态驱动至安全集的外部（即 $h  0$ 的不安全区域）。为了满足CBF条件 $L_f h(x^{\\star}) + L_g h(x^{\\star}) u \\ge 0$，该条件简化为 $0 + (-2)u \\ge 0$ 或 $u \\le 0$，在 $x^{\\star}$ 点需要一个非正的控制输入来防止安全违规。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0  -2 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "理论上的控制方法在走向实际应用时，必须面对物理世界的种种限制，其中最常见的就是执行器饱和，即控制输入存在硬性边界。本次练习将聚焦于这一关键的实际问题 。您将学习如何通过引入松弛变量 (slack variable) $\\delta$ 来构建一个松弛化的二次规划问题，从而系统性地处理控制输入受限的情况。这种方法使得控制器在理想的安全条件因物理限制而无法满足时，能够找到“最小程度违反安全”的次优解，极大地增强了 CBF 控制器在真实系统中的鲁棒性和实用性。",
            "id": "4210319",
            "problem": "信息物理系统中的一个数字孪生使用控制屏障函数（CBF）来保证地面机器人的安全，其控制输入为 $u \\in \\mathbb{R}^{2}$。安全集由一个连续可微的函数 $h(x)$ 定义，安全条件为 $h(x) \\ge 0$。在给定时刻，数字孪生评估了沿漂移和输入向量场的李导数，以及扩展$\\mathcal{K}$类函数，得到以下数值：$L_{f}h = -0.7$， $L_{g}h = \\begin{bmatrix} 0.6  -0.8 \\end{bmatrix}$，以及 $\\alpha(h) = -0.1$。为了处理不可避免的建模失配，CBF约束通过一个非负松弛变量 $\\delta \\ge 0$ 进行松弛。标称控制输入为 $u_{\\mathrm{ref}} = \\begin{bmatrix} 0.2 \\\\ 0.1 \\end{bmatrix}$。控制输入受到硬性边界 $u \\in \\mathcal{U}$ 的约束，其中 $u_{1} \\in [-0.4,\\, 0.6]$ 且 $u_{2} \\in [-0.3,\\, 0.2]$。考虑求解一个二次规划（QP），该规划根据成本函数 $(u - u_{\\mathrm{ref}})^{\\top} I (u - u_{\\mathrm{ref}}) + 50\\, \\delta^{2}$ 来惩罚控制偏差和松弛量，其中 $I$ 是 $2 \\times 2$ 的单位矩阵。\n\n仅使用基本的CBF安全集前向不变性条件、李导数的性质以及基础的凸分析，完成以下任务：\n\n1) 写出数字孪生此时应求解的、以决策变量 $u \\in \\mathbb{R}^{2}$ 和 $\\delta \\in \\mathbb{R}$ 表示的显式二次规划（QP），包括其目标函数和所有约束条件。\n\n2) 通过确定在指定边界下使CBF不等式可行的最小松弛量 $\\delta_{\\min}$，分析输入边界 $u \\in \\mathcal{U}$ 如何影响此刻CBF约束的可行性。请提供 $\\delta_{\\min}$ 的单一数值作为最终答案。请勿对最终答案进行四舍五入。最终答案必须是一个实数。",
            "solution": "该问题是有效的，因为它在控制理论方面有科学依据，问题提出得当，并包含了构建和解决所需任务的所有必要信息。\n\n根据题目要求，解答分为两部分。\n\n### 第1部分：二次规划（QP）的构建\n\n任务是构建一个二次规划（QP），以找到最优控制输入 $u = \\begin{pmatrix} u_1 \\\\ u_2 \\end{pmatrix} \\in \\mathbb{R}^2$ 和松弛变量 $\\delta \\in \\mathbb{R}$。一个QP由一个二次目标函数和一组线性不等式约束组成。\n\n**目标函数：**\n目标是最小化与参考控制 $u_{\\mathrm{ref}}$ 的偏差以及松弛变量 $\\delta$ 的大小。成本函数给定为：\n$$J(u, \\delta) = (u - u_{\\mathrm{ref}})^{\\top} I (u - u_{\\mathrm{ref}}) + 50 \\delta^2$$\n给定 $u_{\\mathrm{ref}} = \\begin{pmatrix} 0.2 \\\\ 0.1 \\end{pmatrix}$ 且 $I$ 是 $2 \\times 2$ 的单位矩阵，目标函数可以明确地用决策变量 $u_1$、$u_2$ 和 $\\delta$ 写出：\n$$J(u_1, u_2, \\delta) = \\left( \\begin{pmatrix} u_1 \\\\ u_2 \\end{pmatrix} - \\begin{pmatrix} 0.2 \\\\ 0.1 \\end{pmatrix} \\right)^{\\top} \\begin{pmatrix} 1  0 \\\\ 0  1 \\end{pmatrix} \\left( \\begin{pmatrix} u_1 \\\\ u_2 \\end{pmatrix} - \\begin{pmatrix} 0.2 \\\\ 0.1 \\end{pmatrix} \\right) + 50 \\delta^2$$\n$$J(u_1, u_2, \\delta) = (u_1 - 0.2)^2 + (u_2 - 0.1)^2 + 50 \\delta^2$$\n目标是最小化此函数。\n\n**约束条件：**\n该优化受制于几个约束条件。\n1.  **松弛的控制屏障函数（CBF）约束：** 使安全集 $\\mathcal{C} = \\{ x \\in \\mathbb{R}^n \\mid h(x) \\ge 0 \\}$ 成为前向不变集的基本条件是 $\\dot{h}(x,u) \\ge -\\alpha(h(x))$，其中 $\\alpha$ 是一个扩展$\\mathcal{K}$类函数。用李导数表示，此条件为 $L_f h(x) + L_g h(x) u \\ge -\\alpha(h(x))$。为确保可行性，该约束使用一个非负松弛变量 $\\delta$ 进行松弛，得到不等式：\n    $$L_f h(x) + L_g h(x) u + \\alpha(h(x)) \\ge -\\delta$$\n    代入给定的数值：$L_f h = -0.7$，$L_g h = \\begin{bmatrix} 0.6  -0.8 \\end{bmatrix}$，以及 $\\alpha(h) = -0.1$。\n    $$-0.7 + \\begin{bmatrix} 0.6  -0.8 \\end{bmatrix} \\begin{pmatrix} u_1 \\\\ u_2 \\end{pmatrix} - 0.1 \\ge -\\delta$$\n    $$-0.8 + 0.6 u_1 - 0.8 u_2 \\ge -\\delta$$\n    将其整理成线性约束的标准形式，得到：\n    $$0.6 u_1 - 0.8 u_2 + \\delta \\ge 0.8$$\n\n2.  **控制输入边界：** 控制输入 $u$ 受硬性边界 $u \\in \\mathcal{U}$ 的约束，其中 $u_1 \\in [-0.4, 0.6]$ 且 $u_2 \\in [-0.3, 0.2]$。这些表示为箱式约束：\n    $$-0.4 \\le u_1 \\le 0.6$$\n    $$-0.3 \\le u_2 \\le 0.2$$\n\n3.  **松弛变量非负性：** 如问题所述，松弛变量 $\\delta$ 必须为非负。\n    $$\\delta \\ge 0$$\n\n**完整的QP构建：**\n结合目标函数和所有约束，数字孪生需要求解的显式QP为：\n$$\\text{最小化}_{u_1, u_2, \\delta} \\quad (u_1 - 0.2)^2 + (u_2 - 0.1)^2 + 50 \\delta^2$$\n$$\\text{满足约束：}$$\n$$\\begin{cases}\n0.6 u_1 - 0.8 u_2 + \\delta \\ge 0.8 \\\\\n-0.4 \\le u_1 \\le 0.6 \\\\\n-0.3 \\le u_2 \\le 0.2 \\\\\n\\delta \\ge 0\n\\end{cases}$$\n\n### 第2部分：最小可行松弛\n\n第二个任务是，在给定控制输入 $u$ 边界的情况下，确定使CBF不等式可行的最小松弛量 $\\delta_{\\min}$。\n\n松弛后的CBF不等式必须被某个控制 $u \\in \\mathcal{U}$ 满足。该不等式可以写为：\n$$0.6 u_1 - 0.8 u_2 \\ge 0.8 - \\delta$$\n对于给定的 $\\delta$，在边界 $\\mathcal{U} = [-0.4, 0.6] \\times [-0.3, 0.2]$ 内存在一个可行的控制 $u = \\begin{pmatrix} u_1 \\\\ u_2 \\end{pmatrix}$，当且仅当不等式左侧在集合 $\\mathcal{U}$ 上的最大可能值大于或等于右侧。\n\n设不等式左侧的表达式为控制输入的函数，$C(u) = 0.6 u_1 - 0.8 u_2$。我们需要在紧集 $\\mathcal{U}$ 上找到该函数的最大值：\n$$C_{\\max} = \\max_{u \\in \\mathcal{U}} C(u) = \\max_{\\substack{-0.4 \\le u_1 \\le 0.6 \\\\ -0.3 \\le u_2 \\le 0.2}} (0.6 u_1 - 0.8 u_2)$$\n由于 $C(u)$ 是一个线性函数，且定义域 $\\mathcal{U}$ 是一个矩形（一个凸多胞形），最大值必然出现在其中一个顶点上。或者，由于涉及 $u_1$ 和 $u_2$ 的项是可分的，我们可以独立地最大化它们：\n- 当 $u_1$ 取最大值时，$0.6 u_1$ 项达到最大。由于 $u_1 \\in [-0.4, 0.6]$，我们选择 $u_1 = 0.6$。\n- 当 $u_2$ 取最小值时，$-0.8 u_2$ 项达到最大。由于 $u_2 \\in [-0.3, 0.2]$，我们选择 $u_2 = -0.3$。\n\n因此，$C(u)$ 的最大值为：\n$$C_{\\max} = 0.6 \\times (0.6) - 0.8 \\times (-0.3) = 0.36 + 0.24 = 0.6$$\n\n为了使CBF不等式有解 $u \\in \\mathcal{U}$，我们必须满足以下条件：\n$$C_{\\max} \\ge 0.8 - \\delta$$\n代入 $C_{\\max}$ 的值：\n$$0.6 \\ge 0.8 - \\delta$$\n重新整理此不等式以求解 $\\delta$：\n$$\\delta \\ge 0.8 - 0.6$$\n$$\\delta \\ge 0.2$$\n问题要求的是最小松弛量 $\\delta_{\\min}$，即满足此条件的最小 $\\delta$ 值。我们还有一个物理约束，即松弛变量必须为非负，$\\delta \\ge 0$。\n最小值 $\\delta_{\\min}$ 必须同时满足这两个条件。因此，\n$$\\delta_{\\min} = \\max\\{0, 0.2\\} = 0.2$$\n确保CBF约束可行性所需的最小松弛量为 $\\delta_{\\min} = 0.2$。",
            "answer": "$$\n\\boxed{0.2}\n$$"
        }
    ]
}
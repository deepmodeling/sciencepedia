{
    "hands_on_practices": [
        {
            "introduction": "在任何复杂的硬件在环（HIL）仿真运行之前，数字仿真器必须能够与被测物理硬件进行精确通信。这项实践旨在解决最基本的一步：确保物理信号（如电压）能够准确地代表仿真中的物理量（如电流）。通过运用线性映射和量纲分析的原理，你将掌握为HIL系统配置硬件接口的基础技能，这是任何实际应用中至关重要的第一步。",
            "id": "3845342",
            "problem": "数字实时模拟器 (DRTS) 用于对电流控制型功率变换器进行硬件在环 (HIL) 测试。被控对象的仿真模型采用国际单位制 (SI) 建模，因此电感电流状态变量的单位是安培。物理控制器硬件期望从 DRTS 的一个专用模拟通道接收一个模拟输入电压，该电压代表指令电感电流。模拟输入电压的范围是从 $0$ 到 $10$ 伏特，电感电流指令的范围是从 $0$ 到 $100$ 安培。DRTS 的模拟输出级已经过校准，使得当输出指令为零时产生 $0$ 伏特电压，并在 $10$ 伏特时饱和；就设计目的而言，其偏移和增益误差可以忽略不计。\n\n从量纲分析和物理量之间线性映射的基本原理出发，证明在仿真电流和输出电压之间使用一个能保持端点不变的仿射映射是合理的。然后，在 $0$ 安培必须映射到 $0$ 伏特以及 $100$ 安培必须映射到 $10$ 伏特的约束条件下，计算用于乘以电感电流以产生模拟电压的缩放因子（增益）。将该缩放因子以 $\\text{V/A}$ 为单位表示。最终答案必须是一个实数。",
            "solution": "该问题要求对使用一个特定函数进行形式化论证，该函数用于将一个仿真的物理量——电感电流 $I$（单位：安培，$\\text{A}$）——映射到一个模拟信号——电压 $V$（单位：伏特，$\\text{V}$）。该函数必须满足特定的边界条件。在完成此论证之后，必须计算该函数的缩放因子。\n\n首先，我们论证函数 $V = f(I)$ 选择的合理性。将一个实数区间映射到另一个实数区间的最简单的连续函数是仿射变换。这种函数由以下一般形式描述：\n$$V = kI + V_0$$\n其中 $k$ 是缩放因子（或增益），$V_0$ 是偏移量。这一选择得到了简约原则的支持，因为更复杂的非线性函数将需要问题陈述中未提供的额外论证或约束。\n\n我们必须验证这种函数形式在量纲上是一致的。令 $[X]$ 表示物理量 $X$ 的物理量纲。电压的量纲是电势，电流量纲是电流。为使方程有效，每一项都必须具有电势的量纲。\n$$[V] = [k][I] + [V_0]$$\n这意味着偏移量 $[V_0]$ 的量纲必须与电压 $[V]$ 的量纲相同。这也意味着乘积 $kI$ 的量纲 $[k][I]$ 必须等于 $[V]$。因此，缩放因子 $k$ 的量纲必须是：\n$$[k] = \\frac{[V]}{[I]}$$\n这对应于单位伏特每安培 ($\\text{V/A}$)，其量纲与电阻等效。因此，该仿射映射在物理上和量纲上都是合理的。\n\n问题指明了该映射的定义域和到达域，以及在端点处的行为。输入电流范围是从 $I_{min} = 0 \\text{ A}$ 到 $I_{max} = 100 \\text{ A}$。输出电压范围是从 $V_{min} = 0 \\text{ V}$ 到 $V_{max} = 10 \\text{ V}$。该映射必须满足以下两个条件：\n$1$. $f(I_{min}) = V_{min} \\implies f(0 \\text{ A}) = 0 \\text{ V}$\n$2$. $f(I_{max}) = V_{max} \\implies f(100 \\text{ A}) = 10 \\text{ V}$\n\n我们可以利用这两个条件，将它们代入一般仿射方程 $V = kI + V_0$ 中，以确定未知参数 $k$ 和 $V_0$。\n\n使用第一个条件：\n$$0 \\text{ V} = k \\cdot (0 \\text{ A}) + V_0$$\n该方程立即得出偏移量的值：\n$$V_0 = 0 \\text{ V}$$\n偏移量为零这一事实表明，该关系不仅仅是仿射的，而且是纯线性的（一种正比关系）。这与问题陈述中“当输出指令为零时产生 $0$ 伏特电压”以及“偏移和增益误差可忽略不计”的说法完全一致。映射函数简化为：\n$$V = kI$$\n\n现在，我们将第二个条件应用于这个简化的线性函数：\n$$10 \\text{ V} = k \\cdot (100 \\text{ A})$$\n求解缩放因子 $k$：\n$$k = \\frac{10 \\text{ V}}{100 \\text{ A}}$$\n$$k = 0.1 \\text{ V/A}$$\n\n因此，缩放因子或增益为 $0.1 \\text{ V/A}$。使用仿射映射是合理的，因为它代表了最简单的、在量纲上一致的函数，其两个参数由所提供的两个物理约束唯一确定。推导出的线性关系 $V = (0.1 \\text{ V/A}) \\cdot I$ 将整个电流范围 $[0 \\text{ A}, 100 \\text{ A}]$ 正确地映射到电压范围 $[0 \\text{ V}, 10 \\text{ V}]$，并保持了端点关系。",
            "answer": "$$\\boxed{0.1}$$"
        },
        {
            "introduction": "HIL的“实时”特性并非虚言，而是一条硬性约束，即仿真计算必须在固定的时间步长内完成，才能准确模拟现实世界。这项实践深入探讨了如何管理HIL处理器上的计算负载这一核心挑战。你将应用实时调度理论，特别是最早截止期优先（EDF）算法，来分析模型保真度（需要更多计算资源）与系统可调度性（保证所有任务按时完成）之间的关键权衡，这是开发高性能HIL系统的核心设计难题。",
            "id": "4225896",
            "problem": "一个实时硬件在环 (HIL) 数字孪生测试平台在单个抢占式处理器上运行，并使用最早截止时间优先 (EDF) 调度。在 HIL 环路中，目标上执行四个周期性任务：被控对象积分器、传感器仿真、执行器驱动和网络遥测。每个任务的作业在其周期的开始被释放，并且必须在其等于其周期的相对截止时间前完成。该系统是严格的单核系统，没有后台任务，作业可以被抢占。\n\n为了提高模型保真度，被控对象和信号处理操作通过一个无量纲的保真度因子 $s \\ge 0$ 进行缩放，这会增加它们的最坏情况执行时间 (WCET)。WCET 和周期如下：\n- 被控对象积分器：周期 $T_{1} = 1\\,\\mathrm{ms}$，执行时间 $C_{1}(s) = 0.27\\,\\mathrm{ms} + 0.15\\,\\mathrm{ms} \\cdot s$。\n- 传感器仿真：周期 $T_{2} = 2\\,\\mathrm{ms}$，执行时间 $C_{2}(s) = 0.305\\,\\mathrm{ms} + 0.05\\,\\mathrm{ms} \\cdot s$。\n- 执行器驱动：周期 $T_{3} = 5\\,\\mathrm{ms}$，执行时间 $C_{3}(s) = 0.21\\,\\mathrm{ms} + 0.02\\,\\mathrm{ms} \\cdot s^{2}$。\n- 网络遥测：周期 $T_{4} = 10\\,\\mathrm{ms}$，执行时间 $C_{4} = 0.62\\,\\mathrm{ms}$。\n\n请设计 EDF 调度策略，包括为每个任务指定相对截止时间，以及确定运行时作业优先级的调度规则。从具有隐式截止时间（相对截止时间等于周期）的单核抢占式系统在 EDF 下的实时可行性第一性原理出发，推导出以任意时间间隔内的处理器需求表示的可调度性准则，并说明它如何约束这些周期性任务的总执行需求。然后，使用该准则，确定能使系统保持可调度的最大保真度缩放因子 $s_{\\max}$。\n\n将您的最终答案表示为 $s_{\\max}$ 的一个纯数字，四舍五入到四位有效数字。最终答案不需要单位。",
            "solution": "题目陈述经评估具有科学依据、问题明确、客观，并包含得出唯一解所需的所有信息。因此，该题目被认为是有效的。\n\n题目要求设计一个最早截止时间优先 (EDF) 调度策略，并计算能确保一组四个周期性任务在单核抢占式处理器上可调度的最大保真度缩放因子 $s_{\\max}$。\n\n首先，我们来设计 EDF 调度策略。该策略包含两个主要部分：截止时间的分配和运行时的调度规则。\n\n1. **截止时间分配**：题目明确指出，对于每个任务 $\\tau_i$，其相对截止时间 $D_i$ 等于其周期 $T_i$。这被称为隐式截止时间系统。给定的任务如下：\n- 任务 $\\tau_1$ (被控对象积分器)：$T_1 = 1\\,\\mathrm{ms}$，所以其相对截止时间为 $D_1 = 1\\,\\mathrm{ms}$。\n- 任务 $\\tau_2$ (传感器仿真)：$T_2 = 2\\,\\mathrm{ms}$，所以其相对截止时间为 $D_2 = 2\\,\\mathrm{ms}$。\n- 任务 $\\tau_3$ (执行器驱动)：$T_3 = 5\\,\\mathrm{ms}$，所以其相对截止时间为 $D_3 = 5\\,\\mathrm{ms}$。\n- 任务 $\\tau_4$ (网络遥测)：$T_4 = 10\\,\\mathrm{ms}$，所以其相对截止时间为 $D_4 = 10\\,\\mathrm{ms}$。\n\n2. **调度规则**：EDF 是一种动态优先级调度算法。调度规则如下：在任何给定时刻，选择具有最早绝对截止时间的就绪作业来执行。作业的绝对截止时间计算为其释放时间加上其相对截止时间。如果一个新释放的作业的绝对截止时间早于当前正在执行的作业，则当前作业被抢占，新作业开始执行。\n\n接下来，我们推导可调度性准则。在单个处理器上可调度性的基本条件是，在任何时间间隔内的累积处理器需求不得超过该间隔的长度。对于一组 $n$ 个周期性任务，在长度为 $t$ 的时间间隔内的处理器需求函数 $h(t)$ 由所有必须在该间隔内开始和完成的作业的执行需求之和给出。对于隐式截止时间任务，这表示为：\n$$h(t) = \\sum_{i=1}^{n} \\left\\lfloor \\frac{t}{T_i} \\right\\rfloor C_i$$\n在 EDF 下可调度的充要条件是对于所有 $t > 0$ 都有 $h(t) \\le t$。\n\n对于在单个处理器上运行的一组独立的、可抢占的、具有隐式截止时间（$D_i = T_i$）的周期性任务这一特殊但常见的情况，Liu and Layland 证明了此条件可以简化为一个基于总处理器利用率的、更容易处理的测试。单个任务 $\\tau_i$ 的利用率是 $U_i = C_i / T_i$，它代表该任务消耗的处理器时间的分数。总处理器利用率 $U$ 是各个利用率的总和：\n$$U = \\sum_{i=1}^{n} U_i = \\sum_{i=1}^{n} \\frac{C_i}{T_i}$$\n在这种情况下，可调度的充要条件是：\n$$U \\le 1$$\n这个条件既是必要的（如果 $U > 1$，任务长期需求的处理器时间超过了可用时间），也是充分的（如果 $U \\le 1$，则永远不会错过截止时间）。\n\n我们现在将这个可调度性准则应用于给定的任务集。最坏情况执行时间 (WCET) $C_i$ 是保真度因子 $s$ 的函数。因此，总利用率 $U(s)$ 也是 $s$ 的函数。\n这些任务是：\n- $\\tau_1$：$T_1 = 1\\,\\mathrm{ms}$，$C_1(s) = (0.27 + 0.15s)\\,\\mathrm{ms}$\n- $\\tau_2$：$T_2 = 2\\,\\mathrm{ms}$，$C_2(s) = (0.305 + 0.05s)\\,\\mathrm{ms}$\n- $\\tau_3$：$T_3 = 5\\,\\mathrm{ms}$，$C_3(s) = (0.21 + 0.02s^2)\\,\\mathrm{ms}$\n- $\\tau_4$：$T_4 = 10\\,\\mathrm{ms}$，$C_4 = 0.62\\,\\mathrm{ms}$\n\n总利用率 $U(s)$ 为：\n$$U(s) = \\frac{C_1(s)}{T_1} + \\frac{C_2(s)}{T_2} + \\frac{C_3(s)}{T_3} + \\frac{C_4}{T_4}$$\n代入给定值（注意，毫秒单位 $\\mathrm{ms}$ 在每一项中都抵消了）：\n$$U(s) = \\frac{0.27 + 0.15s}{1} + \\frac{0.305 + 0.05s}{2} + \\frac{0.21 + 0.02s^2}{5} + \\frac{0.62}{10}$$\n简化每一项：\n$$U(s) = (0.27 + 0.15s) + (0.1525 + 0.025s) + (0.042 + 0.004s^2) + 0.062$$\n按 $s$ 的幂次合并各项：\n$$U(s) = (0.004)s^2 + (0.15 + 0.025)s + (0.27 + 0.1525 + 0.042 + 0.062)$$\n$$U(s) = 0.004s^2 + 0.175s + 0.5265$$\n为使系统可调度，我们必须满足条件 $U(s) \\le 1$：\n$$0.004s^2 + 0.175s + 0.5265 \\le 1$$\n我们将其整理成标准的一元二次不等式形式 $as^2 + bs + c \\le 0$：\n$$0.004s^2 + 0.175s - 0.4735 \\le 0$$\n为了找到使此不等式成立的 $s$ 值，我们首先求解相应的一元二次方程 $0.004s^2 + 0.175s - 0.4735 = 0$ 的根。我们使用求根公式 $s = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$，其中 $a=0.004$，$b=0.175$，$c=-0.4735$。\n\n首先，我们计算判别式 $\\Delta = b^2 - 4ac$：\n$$\\Delta = (0.175)^2 - 4(0.004)(-0.4735)$$\n$$\\Delta = 0.030625 + 0.007576 = 0.038201$$\n根是：\n$$s = \\frac{-0.175 \\pm \\sqrt{0.038201}}{2(0.004)} = \\frac{-0.175 \\pm 0.19545076...}{0.008}$$\n这得到两个根：\n$$s_1 = \\frac{-0.175 - 0.19545076...}{0.008} \\approx -46.3063$$\n$$s_2 = \\frac{-0.175 + 0.19545076...}{0.008} \\approx 2.556345$$\n二次函数 $f(s) = 0.004s^2 + 0.175s - 0.4735$ 表示一个开口向上的抛物线。因此，不等式 $f(s) \\le 0$ 在两个根之间的 $s$ 值上成立，即 $s_1 \\le s \\le s_2$。\n\n题目指出保真度因子 $s$ 必须为非负数，即 $s \\ge 0$。将此物理约束与可调度性约束相结合，$s$ 的允许范围是 $0 \\le s \\le s_2$。\n因此，保真度缩放因子的最大值 $s_{\\max}$ 是正根 $s_2$。\n$$s_{\\max} \\approx 2.556345$$\n题目要求答案四舍五入到四位有效数字。\n$$s_{\\max} \\approx 2.556$$",
            "answer": "$$\\boxed{2.556}$$"
        },
        {
            "introduction": "使用HIL的一个主要原因，是测试控制器在面对难以进行解析建模的真实世界复杂情况（例如执行器饱和）时的行为。这项实践精确地模拟了这个问题，让你能够亲手设计和验证一个“抗饱和”补偿器，以防止在执行器达到其物理极限时控制器积分器出现失控。通过对整个增强系统的特征值分析来严格验证稳定性，这项高级练习将让你体验HIL在开发稳健控制策略方面的强大能力。",
            "id": "4225902",
            "problem": "一个实时硬件在环（HIL）装置被用于验证一个单输入单输出机电伺服系统数字孪生的抗饱和设计。物理装置（在HIL上仿真）被建模为一个具有单位静态增益的二阶连续时间系统：\n$$\nG(s) \\;=\\; \\frac{1}{s^{2} + 10 s + 100}.\n$$\n设装置状态为 $x = \\begin{pmatrix} x_{1} \\\\ x_{2} \\end{pmatrix}$，输出为 $y = x_{1}$，执行器输出 $u_{a}$ 作为输入进入能控标准型形式的装置中：\n$$\n\\dot{x}_{1} \\;=\\; x_{2}, \\qquad \\dot{x}_{2} \\;=\\; -100 x_{1} - 10 x_{2} + u_{a}.\n$$\n执行器表现为一阶延迟和在 $\\pm U_{\\max}$ 处的硬饱和，模型如下：\n$$\n\\dot{u}_{a} \\;=\\; \\frac{-u_{a} + \\operatorname{sat}(u_{c})}{\\tau_{a}}, \\qquad \\operatorname{sat}(u_{c}) \\;=\\; \\begin{cases}\nU_{\\max}, & u_{c} \\ge U_{\\max},\\\\\nu_{c}, & |u_{c}|  U_{\\max},\\\\\n- U_{\\max},  u_{c} \\le - U_{\\max},\n\\end{cases}\n$$\n其中 $U_{\\max} = 5$ 且 $\\tau_{a} = 0.02$。参考值为 $r = 0$，控制误差为 $e = r - y = -y$。\n\n一个比例-积分-微分（PID）控制器被实现，其微分通路被禁用（即 $K_{d} = 0$，因此控制器简化为比例-积分（PI）形式），使用的增益为\n$$\nK_{p} = 40, \\qquad K_{i} = 100.\n$$\n设 $z$ 表示控制器的积分器状态，因此饱和前的标称控制器输出为\n$$\nu_{c} \\;=\\; K_{p} e + K_{i} z,\n$$\n理想积分器法则是 $\\dot{z} = e$。\n\n为了防止HIL中饱和期间的积分器饱和，一个反算式抗饱和补偿器被添加到积分器通道中：\n$$\n\\dot{z} \\;=\\; e + K_{aw}\\big(\\operatorname{sat}(u_{c}) - u_{c}\\big),\n$$\n其中 $K_{aw} > 0$ 是一个待选常数。\n\nHIL以采样时间 $T_{s} = 0.001$ 执行零阶保持离散实现，但您可以假设 $T_{s}$相对于装置和执行器的时间常数足够小，以至于连续时间稳定性属性可以延续到采样实现中。\n\n任务：\n- 仅使用比例积分控制、执行器饱和和一阶跟踪动态的基本定义，推导抗饱和增益 $K_{aw}$、积分增益 $K_{i}$ 和期望的控制器输出跟踪时间常数 $T_{t}$ 之间的关系，使得在饱和条件下，控制器内部信号 $u_{c}$ 以时间常数 $T_{t}$ 的一阶动态跟踪饱和信号 $\\operatorname{sat}(u_{c})$。然后采用具有物理动机的设计选择 $T_{t} = \\tau_{a}$。\n- 根据给定参数计算 $K_{aw}$ 的数值。\n- 通过分析包含装置、执行器延迟和带抗饱和的控制器积分器的增广连续时间线性系统的特征值，验证在硬饱和（即当 $\\operatorname{sat}(u_{c})$ 被钳位在一个常数 $\\pm U_{\\max}$ 时）下的内部闭环稳定性。您的验证必须从第一性原理出发，不得调用任何快捷公式。\n- 总结为什么在给定 $T_{s} \\ll \\min\\{ \\tau_{a}, 1/10, 1/5 \\}$ 的条件下，离散时间HIL实现继承了稳定性。\n\n将最终的抗饱和增益 $K_{aw}$ 表示为一个纯数（无量纲），并将您的答案四舍五入到四位有效数字。",
            "solution": "用户提供了一个问题陈述，在尝试解决方案之前需要进行验证。\n\n### 第1步：提取已知条件\n- 装置传递函数：$G(s) = \\frac{1}{s^{2} + 10 s + 100}$\n- 装置状态空间模型：$\\dot{x}_{1} = x_{2}$, $\\dot{x}_{2} = -100 x_{1} - 10 x_{2} + u_{a}$\n- 装置输出：$y = x_{1}$\n- 执行器输入：$u_{a}$\n- 执行器模型：$\\dot{u}_{a} = \\frac{-u_{a} + \\operatorname{sat}(u_{c})}{\\tau_{a}}$\n- 饱和函数：$\\operatorname{sat}(u_{c})$ 是在 $\\pm U_{\\max}$ 处的硬饱和\n- 执行器参数：$U_{\\max} = 5$, $\\tau_{a} = 0.02$\n- 参考信号：$r = 0$\n- 控制误差：$e = r - y = -y$\n- 控制器增益：$K_{p} = 40$, $K_{i} = 100$, $K_{d} = 0$\n- 控制器积分器状态：$z$\n- 标称控制器输出：$u_{c} = K_{p} e + K_{i} z$\n- 积分器的抗饱和法则：$\\dot{z} = e + K_{aw}(\\operatorname{sat}(u_{c}) - u_{c})$\n- 抗饱和增益：$K_{aw} > 0$\n- HIL采样时间：$T_{s} = 0.001$\n- 假设：连续时间稳定性属性可以延续到离散实现中。\n- 任务：\n    1. 推导在饱和条件下 $K_{aw}$、$K_{i}$ 和控制器输出跟踪时间常数 $T_{t}$ 之间的关系。\n    2. 设置 $T_t = \\tau_a$。\n    3. 计算 $K_{aw}$ 的数值。\n    4. 通过对增广系统进行特征值分析，验证硬饱和下的内部闭环稳定性。\n    5. 解释为什么离散时间实现继承了稳定性。\n\n### 第2步：使用提取的已知条件进行验证\n该问题具有科学依据，描述了一个标准的控制系统场景，涉及一个二阶装置、一个饱和一阶执行器和一个带有反算式抗饱和方案的PI控制器。所有模型和概念都是控制工程的基础。问题提法清晰，包含所有必要参数和一组明确的任务，可以得出一个唯一的、可验证的解。语言客观而精确。对于一个机电系统而言，这些参数在物理上是合理的。问题的所有组成部分都可以数学形式化，并且与信息物理系统的仿真和验证相关。该问题并非微不足道，需要进行多步分析，包括控制律推导、稳定性分析以及对采样效应的理解。\n\n### 第3步：结论与行动\n问题有效。将生成解决方案。\n\n### 解决方案推导\n\n解决方案按照任务描述的要求分四个部分进行。\n\n**第1部分：抗饱和增益关系的推导**\n\n目标是建立抗饱和增益 $K_{aw}$ 与期望的时间常数 $T_t$ 之间的关系，该时间常数用于内部控制器信号 $u_c$ 跟踪饱和信号 $\\operatorname{sat}(u_c)$。\n\n标称控制器输出由下式给出：\n$$u_{c} = K_{p} e + K_{i} z$$\n为了分析 $u_c$ 的动态特性，我们对该表达式关于时间求导：\n$$\\dot{u}_{c} = K_{p} \\dot{e} + K_{i} \\dot{z}$$\n对积分器的抗饱和修正是：\n$$\\dot{z} = e + K_{aw}\\big(\\operatorname{sat}(u_{c}) - u_{c}\\big)$$\n将 $\\dot{z}$ 的表达式代入 $\\dot{u}_c$ 的方程中：\n$$\\dot{u}_{c} = K_{p} \\dot{e} + K_{i} \\left( e + K_{aw}\\big(\\operatorname{sat}(u_{c}) - u_{c}\\big) \\right)$$\n$$\\dot{u}_{c} = K_{p} \\dot{e} + K_{i} e + K_{i} K_{aw} \\operatorname{sat}(u_{c}) - K_{i} K_{aw} u_{c}$$\n我们可以重排这个方程来突出 $u_c$ 的动态特性：\n$$\\dot{u}_{c} + K_{i} K_{aw} u_{c} = K_{i} K_{aw} \\operatorname{sat}(u_{c}) + K_{p} \\dot{e} + K_{i} e$$\n这是一个关于 $u_c$ 的一阶线性常微分方程。我们希望 $u_c$ 以时间常数 $T_t$ 表征的一阶动态来跟踪 $\\operatorname{sat}(u_c)$。一个具有时间常数 $T_t$ 且跟踪参考信号 $R(t)$ 的标准一阶系统可以写成 $T_t \\dot{y} + y = R(t)$。\n为了使我们的方程匹配这种形式，我们可以将其重写为：\n$$\\frac{1}{K_{i} K_{aw}} \\dot{u}_{c} + u_{c} = \\operatorname{sat}(u_{c}) + \\frac{1}{K_{i} K_{aw}}(K_{p} \\dot{e} + K_{i} e)$$\n项 $(K_{p} \\dot{e} + K_{i} e)$ 对跟踪动态起到了扰动作用。期望的响应由方程的齐次部分决定，其时间常数为：\n$$T_{t} = \\frac{1}{K_{i} K_{aw}}$$\n这就是期望的关系。它决定了当执行器饱和时，内部信号 $u_c$ 收敛到饱和输出 $\\operatorname{sat}(u_c)$ 的速度。这可以防止积分器状态 $z$ 进一步累积误差。\n\n**第2部分：$K_{aw}$ 数值的计算**\n\n问题指定了具有物理动机的设计选择，即将控制器输出跟踪时间常数 $T_t$ 设置为等于执行器时间常数 $\\tau_a$。\n$$T_{t} = \\tau_{a}$$\n将此代入推导出的关系中：\n$$\\tau_{a} = \\frac{1}{K_{i} K_{aw}}$$\n求解抗饱和增益 $K_{aw}$：\n$$K_{aw} = \\frac{1}{K_{i} \\tau_{a}}$$\n我们已知数值 $K_{i} = 100$ 和 $\\tau_{a} = 0.02$。\n$$K_{aw} = \\frac{1}{100 \\times 0.02} = \\frac{1}{2} = 0.5$$\n按要求，四舍五入到四位有效数字得到 $0.5000$。\n\n**第3部分：内部闭环稳定性的验证**\n\n我们必须在硬饱和条件下验证增广系统的稳定性。增广状态向量为 $X = \\begin{pmatrix} x_{1}  x_{2}  u_{a}  z \\end{pmatrix}^{T}$。系统动态为：\n\\begin{align*}\n\\dot{x}_{1} = x_{2} \\\\\n\\dot{x}_{2} = -100 x_{1} - 10 x_{2} + u_{a} \\\\\n\\dot{u}_{a} = \\frac{-u_{a} + \\operatorname{sat}(u_{c})}{\\tau_{a}} \\\\\n\\dot{z} = e + K_{aw}(\\operatorname{sat}(u_{c}) - u_{c})\n\\end{align*}\n在硬饱和条件下，$\\operatorname{sat}(u_{c})$ 变为一个常数值，即 $U_{\\max}$ 或 $-U_{\\max}$。我们将这个常数表示为 $U_{sat}$。系统变为具有恒定输入的线性时不变（LTI）系统。稳定性由状态空间表示 $\\dot{X} = AX + B U_{ext}$ 中的系统矩阵 $A$ 决定。\n\n让我们用状态变量来表示状态方程的输入：\n$e = -y = -x_{1}$\n$u_{c} = K_{p} e + K_{i} z = -K_{p} x_{1} + K_{i} z$\n\n将这些代入状态方程：\n\\begin{align*}\n\\dot{x}_{1} = x_{2} \\\\\n\\dot{x}_{2} = -100 x_{1} - 10 x_{2} + u_{a} \\\\\n\\dot{u}_{a} = -\\frac{1}{\\tau_{a}} u_{a} + \\frac{1}{\\tau_{a}} U_{sat} \\\\\n\\dot{z} = -x_{1} + K_{aw}\\big(U_{sat} - (-K_{p} x_{1} + K_{i} z)\\big) \\\\\n= -x_{1} + K_{aw} U_{sat} + K_{aw} K_{p} x_{1} - K_{aw} K_{i} z \\\\\n= (K_{aw} K_{p} - 1) x_{1} - K_{aw} K_{i} z + K_{aw} U_{sat}\n\\end{align*}\n因此，系统矩阵 $A$ 为：\n$$A = \\begin{pmatrix}\n0  1  0  0 \\\\\n-100  -10  1  0 \\\\\n0  0  -1/\\tau_a  0 \\\\\nK_{aw}K_p - 1  0  0  -K_{aw}K_i\n\\end{pmatrix}$$\n稳定性由 $A$ 的特征值决定，这些特征值是特征方程 $\\det(\\lambda I - A) = 0$ 的根。\n$$\\det \\begin{pmatrix}\n\\lambda  -1  0  0 \\\\\n100  \\lambda+10  -1  0 \\\\\n0  0  \\lambda+1/\\tau_a  0 \\\\\n-(K_{aw}K_p - 1)  0  0  \\lambda+K_{aw}K_i\n\\end{pmatrix} = 0$$\n我们可以沿第四列展开行列式。这得到：\n$$(\\lambda+K_{aw}K_i) \\det \\begin{pmatrix}\n\\lambda  -1  0 \\\\\n100  \\lambda+10  -1 \\\\\n0  0  \\lambda+1/\\tau_a\n\\end{pmatrix} = 0$$\n这揭示了一个特征值 $\\lambda_4 = -K_{aw}K_i$。接下来，我们沿第三行展开 $3 \\times 3$ 行列式：\n$$(\\lambda+K_{aw}K_i) (\\lambda+1/\\tau_a) \\det \\begin{pmatrix}\n\\lambda  -1 \\\\\n100  \\lambda+10\n\\end{pmatrix} = 0$$\n这揭示了第二个特征值 $\\lambda_3 = -1/\\tau_a$。剩下的两个特征值是以下方程的根：\n$$\\lambda(\\lambda+10) - (-1)(100) = 0$$\n$$\\lambda^2 + 10\\lambda + 100 = 0$$\n这是开环装置 $G(s)$ 的特征多项式。特征值为：\n$$\\lambda_{1,2} = \\frac{-10 \\pm \\sqrt{10^2 - 4(1)(100)}}{2} = \\frac{-10 \\pm \\sqrt{100 - 400}}{2} = \\frac{-10 \\pm \\sqrt{-300}}{2} = -5 \\pm i\\sqrt{75} = -5 \\pm 5i\\sqrt{3}$$\n为了保证稳定性，所有特征值的实部必须为负。\n- $\\operatorname{Re}(\\lambda_{1,2}) = -5  0$。\n- $\\lambda_3 = -1/\\tau_a = -1/0.02 = -50  0$。\n- $\\lambda_4 = -K_{aw}K_i = -0.5 \\times 100 = -50  0$。注意，由于我们的设计选择 $K_{aw} = 1/(K_i \\tau_a)$，我们有 $\\lambda_4 = -(1/(K_i \\tau_a)) K_i = -1/\\tau_a = \\lambda_3$。\n\n所有特征值 $\\{-5 + 5i\\sqrt{3}, -5 - 5i\\sqrt{3}, -50, -50\\}$ 的实部均为负。因此，增广闭环系统在硬饱和下是稳定的。\n\n**第4部分：离散时间实现的稳定性**\n\n通过对连续时间LTI系统应用零阶保持（ZOH）得到的离散时间LTI系统的稳定性，与基础连续时间系统的稳定性直接相关。\n设连续时间系统为 $\\dot{X}(t) = A X(t)$。其采样时间为 $T_s$ 的ZOH离散化为 $X_{k+1} = A_d X_k$，其中离散系统矩阵为 $A_d = \\exp(A T_s)$。\n如果 $\\lambda_i$ 是连续时间矩阵 $A$ 的特征值，那么离散时间矩阵 $A_d$ 的特征值是 $\\mu_i = \\exp(\\lambda_i T_s)$。\n为了使离散时间系统稳定，其所有特征值 $\\mu_i$ 必须位于复平面的单位圆内，即对所有 $i$ 都有 $|\\mu_i|  1$。\n我们来分析离散特征值 $\\mu_i$ 的模：\n$$|\\mu_i| = |\\exp(\\lambda_i T_s)| = |\\exp\\big((\\operatorname{Re}(\\lambda_i) + i\\operatorname{Im}(\\lambda_i)) T_s\\big)|$$\n$$|\\mu_i| = |\\exp(\\operatorname{Re}(\\lambda_i)T_s) \\cdot \\exp(i\\operatorname{Im}(\\lambda_i)T_s)| = |\\exp(\\operatorname{Re}(\\lambda_i)T_s)| \\cdot |\\exp(i\\operatorname{Im}(\\lambda_i)T_s)|$$\n因为对于任意实数 $\\theta$，都有 $|\\exp(i\\theta)| = 1$，所以上式简化为：\n$$|\\mu_i| = |\\exp(\\operatorname{Re}(\\lambda_i)T_s)|$$\n因为 $T_s > 0$ 且实数的指数函数值总是正的，我们有：\n$$|\\mu_i| = \\exp(\\operatorname{Re}(\\lambda_i)T_s)$$\n因此，稳定性条件 $|\\mu_i|  1$ 变为 $\\exp(\\operatorname{Re}(\\lambda_i)T_s)  1$。对两边取自然对数（因为 $\\ln$ 是一个单调递增函数）得到：\n$$\\operatorname{Re}(\\lambda_i)T_s  \\ln(1) = 0$$\n由于 $T_s > 0$，这等价于条件 $\\operatorname{Re}(\\lambda_i)  0$。\n这建立了一个基本结论：一个连续时间LTI系统是稳定的，当且仅当其ZOH离散化是稳定的。\n在第3部分中，我们证明了连续时间系统矩阵 $A$ 的所有特征值都具有负实部。因此，HIL仿真中使用的相应离散时间系统也保证是稳定的。条件 $T_s \\ll \\min\\{ \\tau_{a}, 1/10, 1/5 \\}$ 确保采样足够快，能够捕捉所有相关的系统动态（$1/5=0.2$ 关系到装置最慢的极点，$1/10=0.1$ 关系到装置的阻尼，而 $\\tau_a=0.02$ 关系到最快的共享极点），这加强了连续时间分析能准确预测离散系统行为的结论。",
            "answer": "$$\n\\boxed{0.5000}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "在任何硬件在环（HIL）仿真设置中，首要步骤是建立数字仿真器与物理硬件之间的可靠接口。本练习将通过量纲分析和线性映射的基本原理，推导将仿真物理量（如电流）转换为硬件控制器所需的模拟信号（如电压）所需的缩放因子。掌握这一技能对于确保仿真值在物理域中得到准确表示至关重要。",
            "id": "3845342",
            "problem": "一个数字实时仿真器（DRTS）被用于对一个电流控制型功率变换器进行硬件在环（HIL）测试。仿真对象在国际单位制（SI）中建模，因此电感电流状态变量的单位是安培。物理控制器硬件期望从DRTS的一个专用模拟通道接收一个模拟输入电压，该电压代表指令电感电流。模拟输入电压的范围是从 $0$ 到 $10$ 伏特，而电感电流指令的范围是从 $0$ 到 $100$ 安培。DRTS的模拟输出级经过校准，使得当输出指令为零时产生 $0$ 伏特电压，并在 $10$ 伏特时饱和；出于设计目的，偏置和增益误差可以忽略不计。\n\n从量纲分析和物理量之间线性映射的基本原理出发，论证在仿真电流和输出电压之间使用一个保持端点不变的仿射映射的合理性。然后，在 $0$ 安培必须映射到 $0$ 伏特以及 $100$ 安培必须映射到 $10$ 伏特的既定约束条件下，计算用于将电感电流乘以该因子以产生模拟电压的比例因子（增益）。将比例因子以 $\\text{V/A}$ 为单位表示。最终答案必须是一个实数。",
            "solution": "该问题要求为使用一个特定函数来将仿真的物理量——电感电流 $I$（单位为安培，$\\text{A}$）——映射到一个模拟信号——电压 $V$（单位为伏特，$\\text{V}$）提供正式的论证。该函数必须满足特定的边界条件。在此论证之后，必须计算该函数的比例因子。\n\n首先，我们论证选择函数 $V = f(I)$ 的合理性。将一个实数区间映射到另一个实数区间的最简单的连续函数是仿射变换。这类函数由以下通用形式描述：\n$$V = kI + V_0$$\n其中 $k$ 是比例因子（或增益），$V_0$ 是偏置。这一选择得到了简约原则的支持，因为更复杂的非线性函数将需要额外的、问题陈述中未提供的理由或约束。\n\n我们必须验证此函数形式在量纲上是一致的。令 $[X]$ 表示物理量 $X$ 的物理量纲。电压的量纲是电势，电流的量纲是电流。为了使方程有效，每一项都必须具有电势的量纲。\n$$[V] = [k][I] + [V_0]$$\n这意味着偏置的量纲 $[V_0]$ 必须与电压的量纲 $[V]$ 相同。这也意味着乘积 $kI$ 的量纲 $[k][I]$ 必须等于 $[V]$。因此，比例因子 $k$ 的量纲必须是：\n$$[k] = \\frac{[V]}{[I]}$$\n这对应于单位伏特每安培 ($\\text{V/A}$)，其量纲与电阻等效。因此，该仿射映射在物理上和量纲上都是合理的。\n\n问题规定了此映射的定义域和值域，以及其在端点处的行为。输入电流范围是从 $I_{min} = 0 \\text{ A}$ 到 $I_{max} = 100 \\text{ A}$。输出电压范围是从 $V_{min} = 0 \\text{ V}$ 到 $V_{max} = 10 \\text{ V}$。该映射必须满足以下两个条件：\n$1$. $f(I_{min}) = V_{min} \\implies f(0 \\text{ A}) = 0 \\text{ V}$\n$2$. $f(I_{max}) = V_{max} \\implies f(100 \\text{ A}) = 10 \\text{ V}$\n\n我们可以通过将这两个条件代入通用仿射方程 $V = kI + V_0$ 来确定未知参数 $k$ 和 $V_0$。\n\n使用第一个条件：\n$$0 \\text{ V} = k \\cdot (0 \\text{ A}) + V_0$$\n此方程立即得出偏置的值：\n$$V_0 = 0 \\text{ V}$$\n偏置为零的事实表明，该关系不仅仅是仿射的，而且是纯线性的（正比关系）。这与问题陈述中“当输出指令为零时产生 $0$ 伏特电压”以及“偏置和增益误差可以忽略不计”完全一致。映射函数简化为：\n$$V = kI$$\n\n现在，我们将第二个条件应用于这个简化的线性函数：\n$$10 \\text{ V} = k \\cdot (100 \\text{ A})$$\n求解比例因子 $k$：\n$$k = \\frac{10 \\text{ V}}{100 \\text{ A}}$$\n$$k = 0.1 \\text{ V/A}$$\n\n因此，比例因子或增益为 $0.1 \\text{ V/A}$。使用仿射映射是合理的，因为它代表了最简单的、量纲一致的函数，其两个参数由所提供的两个物理约束唯一确定。推导出的线性关系 $V = (0.1 \\text{ V/A}) \\cdot I$ 正确地将整个电流范围 $[0 \\text{ A}, 100 \\text{ A}]$ 映射到电压范围 $[0 \\text{ V}, 10 \\text{ V}]$，并保持了端点关系。",
            "answer": "$$\\boxed{0.1}$$"
        },
        {
            "introduction": "一旦建立了接口，我们就必须考虑数字控制器的离散时间特性，这可能从根本上改变它所控制的连续时间系统的稳定性。本练习探讨了采样时间 $T_s$ 对闭环稳定性的关键影响，并运用Tustin变换、零阶保持器（ZOH）离散化和Jury稳定性判据等标准数字控制技术来确定稳定性的边界。通过这个练习，你将深入理解采样率的选择不仅是一个实现细节，而是一个核心的稳定性设计参数。",
            "id": "4225889",
            "problem": "一个硬件在环（HIL）实验将数字控制器与一个物理连续时间对象耦合起来。考虑一个单位反馈回路，其中对象由一阶传递函数 $P(s) = \\frac{1}{s + 1}$ 建模，连续时间控制器是纯积分控制器 $C(s) = \\frac{K_i}{s}$，其中 $K_i = 3\\,\\text{s}^{-1}$。该控制器以数字方式实现，并通过采样和保持与连续对象进行交互。在每个采样间隔内，对象输入由零阶保持器（ZOH）保持恒定。控制器通过塔斯廷变换（双线性变换）进行离散化，您必须从应用于积分器动态特性的梯形法则出发进行推导。\n\n从基本定义和经过充分检验的公式出发，完成以下任务：\n- 使用塔斯廷变换的梯形法则解释，从 $C(s)$ 推导出离散时间控制器 $C_d(z)$，并将其表示为采样时间 $T_s$ 的函数。\n- 推导对象的精确ZOH离散化脉冲传递函数 $P_d(z)$，作为 $T_s$ 的函数。\n- 为单位反馈构建 $z$ 域中的闭环特征多项式，并使用严格的二阶朱利稳定性判据分析其稳定性。\n- 确定在 HIL 设置下保证离散时间闭环稳定性的最大采样时间 $T_s$（单位：秒）。\n\n将最终数值答案四舍五入至四位有效数字。最终的 $T_s$ 以秒为单位表示。",
            "solution": "该问题的解决分为四个部分：推导离散时间控制器 $C_d(z)$、推导ZOH等效的离散时间对象 $P_d(z)$、建立闭环特征方程，以及使用朱利判据进行稳定性分析以找到最大采样时间 $T_s$。\n\n**第一部分：离散时间控制器 $C_d(z)$ 的推导**\n\n连续时间积分控制器由 $C(s) = \\frac{U(s)}{E(s)} = \\frac{K_i}{s}$ 给出。在时域中，这对应于微分方程：\n$$ \\frac{du(t)}{dt} = K_i e(t) $$\n将此方程从时间 $t = (k-1)T_s$ 到 $t = kT_s$ 进行积分，得到：\n$$ u(kT_s) - u((k-1)T_s) = K_i \\int_{(k-1)T_s}^{kT_s} e(\\tau) d\\tau $$\n塔斯廷变换是通过使用梯形法则来近似积分得到的：\n$$ \\int_{a}^{b} f(\\tau) d\\tau \\approx \\frac{b-a}{2} [f(b) + f(a)] $$\n将此应用于我们的积分，其中 $a = (k-1)T_s$ 和 $b = kT_s$：\n$$ u(kT_s) - u((k-1)T_s) \\approx K_i \\frac{T_s}{2} [e(kT_s) + e((k-1)T_s)] $$\n令 $u_k = u(kT_s)$ 和 $e_k = e(kT_s)$。差分方程为：\n$$ u_k - u_{k-1} = \\frac{K_i T_s}{2} (e_k + e_{k-1}) $$\n对该方程进行Z变换，使用时移性质 $\\mathcal{Z}\\{x_{k-1}\\} = z^{-1}X(z)$：\n$$ U(z) - z^{-1}U(z) = \\frac{K_i T_s}{2} (E(z) + z^{-1}E(z)) $$\n$$ U(z)(1 - z^{-1}) = \\frac{K_i T_s}{2} E(z)(1 + z^{-1}) $$\n离散时间控制器传递函数 $C_d(z) = \\frac{U(z)}{E(z)}$ 为：\n$$ C_d(z) = \\frac{K_i T_s}{2} \\frac{1 + z^{-1}}{1 - z^{-1}} = \\frac{K_i T_s}{2} \\frac{z + 1}{z - 1} $$\n代入给定值 $K_i = 3\\,\\text{s}^{-1}$：\n$$ C_d(z) = \\frac{3 T_s}{2} \\frac{z + 1}{z - 1} $$\n\n**第二部分：ZOH等效对象 $P_d(z)$ 的推导**\n\n一个由零阶保持器（ZOH）前置的连续时间对象 $P(s)$ 的脉冲传递函数由以下公式给出：\n$$ P_d(z) = \\mathcal{Z}\\left\\{ \\frac{1 - e^{-sT_s}}{s} P(s) \\right\\} = (1 - z^{-1}) \\mathcal{Z}\\left\\{ \\frac{P(s)}{s} \\right\\} $$\n这里，$P(s) = \\frac{1}{s+1}$。首先，我们对 $\\frac{P(s)}{s}$ 进行部分分式展开：\n$$ \\frac{P(s)}{s} = \\frac{1}{s(s+1)} = \\frac{1}{s} - \\frac{1}{s+1} $$\n接下来，我们使用标准变换对对该表达式进行Z变换：\n$$ \\mathcal{Z}\\left\\{\\frac{1}{s}\\right\\} = \\frac{z}{z-1} $$\n$$ \\mathcal{Z}\\left\\{\\frac{1}{s+a}\\right\\} = \\frac{z}{z - e^{-aT_s}} \\quad \\implies \\quad \\mathcal{Z}\\left\\{\\frac{1}{s+1}\\right\\} = \\frac{z}{z - e^{-T_s}} $$\n所以，\n$$ \\mathcal{Z}\\left\\{ \\frac{P(s)}{s} \\right\\} = \\frac{z}{z-1} - \\frac{z}{z - e^{-T_s}} = \\frac{z(z - e^{-T_s}) - z(z-1)}{(z-1)(z - e^{-T_s})} = \\frac{z(1 - e^{-T_s})}{(z-1)(z - e^{-T_s})} $$\n最后，我们乘以 $(1 - z^{-1})$：\n$$ P_d(z) = (1 - z^{-1}) \\frac{z(1 - e^{-T_s})}{(z-1)(z - e^{-T_s})} = \\frac{z-1}{z} \\frac{z(1 - e^{-T_s})}{(z-1)(z - e^{-T_s})} $$\n$$ P_d(z) = \\frac{1 - e^{-T_s}}{z - e^{-T_s}} $$\n\n**第三部分：闭环特征多项式**\n\n对于单位反馈系统，闭环特征方程为 $1 + L(z) = 0$，其中 $L(z) = C_d(z)P_d(z)$ 是开环脉冲传递函数。\n$$ 1 + C_d(z)P_d(z) = 0 $$\n$$ 1 + \\left( \\frac{3 T_s}{2} \\frac{z + 1}{z - 1} \\right) \\left( \\frac{1 - e^{-T_s}}{z - e^{-T_s}} \\right) = 0 $$\n为了获得特征多项式，我们乘以分母 $(z - 1)(z - e^{-T_s})$：\n$$ (z - 1)(z - e^{-T_s}) + \\frac{3 T_s}{2} (z + 1) (1 - e^{-T_s}) = 0 $$\n展开此表达式得到：\n$$ z^2 - e^{-T_s}z - z + e^{-T_s} + \\frac{3 T_s(1 - e^{-T_s})}{2}z + \\frac{3 T_s(1 - e^{-T_s})}{2} = 0 $$\n按 $z$ 的幂次对各项进行分组，我们得到多项式 $Q(z) = a_2 z^2 + a_1 z + a_0 = 0$，其中：\n$$ a_2 = 1 $$\n$$ a_1 = \\frac{3 T_s(1 - e^{-T_s})}{2} - 1 - e^{-T_s} $$\n$$ a_0 = e^{-T_s} + \\frac{3 T_s(1 - e^{-T_s})}{2} $$\n\n**第四部分：朱利稳定性分析**\n\n对于二阶特征多项式 $Q(z) = z^2 + a_1 z + a_0$，系统是稳定的（所有根都在单位圆内），当且仅当满足以下三个条件：\n1.  $Q(1) > 0$\n2.  $Q(-1) > 0$\n3.  $|a_0| < 1$\n\n让我们评估每个条件。使用多项式 $Q(z)$ 的因式分解形式 $Q(z) = (z-1)(z-e^{-T_s}) + \\frac{3 T_s}{2}(z+1)(1-e^{-T_s})$ 会更简单。\n\n_条件1: $Q(1) > 0$_\n$$ Q(1) = (1 - 1)(1 - e^{-T_s}) + \\frac{3 T_s}{2} (1 + 1) (1 - e^{-T_s}) $$\n$$ Q(1) = 3 T_s (1 - e^{-T_s}) $$\n对于任何采样时间 $T_s > 0$，我们有 $e^{-T_s} < 1$，这意味着 $(1 - e^{-T_s}) > 0$。因此，对于 $T_s > 0$， $Q(1) > 0$ 总是成立的。\n\n_条件2: $Q(-1) > 0$_\n$$ Q(-1) = (-1 - 1)(-1 - e^{-T_s}) + \\frac{3 T_s}{2} (-1 + 1) (1 - e^{-T_s}) $$\n$$ Q(-1) = (-2)(-1 - e^{-T_s}) = 2(1 + e^{-T_s}) $$\n对于任何 $T_s > 0$，我们有 $e^{-T_s} > 0$，所以 $Q(-1) = 2(1 + e^{-T_s}) > 2$。这个条件总是成立的。\n\n_条件3: $|a_0| < 1$_\n常数系数 $a_0 = e^{-T_s} + \\frac{3 T_s}{2} (1 - e^{-T_s})$。对于 $T_s > 0$，我们有 $0 < e^{-T_s} < 1$ 和 $(1-e^{-T_s}) > 0$。因此，$a_0$ 总是正的，条件 $|a_0| < 1$ 简化为 $a_0 < 1$。\n$$ e^{-T_s} + \\frac{3 T_s}{2} (1 - e^{-T_s}) < 1 $$\n整理不等式：\n$$ \\frac{3 T_s}{2} - 1 < \\frac{3 T_s}{2} e^{-T_s} - e^{-T_s} $$\n$$ \\frac{3 T_s - 2}{2} < e^{-T_s} \\left( \\frac{3 T_s - 2}{2} \\right) $$\n这可以写成：\n$$ \\left( \\frac{3 T_s - 2}{2} \\right) (1 - e^{-T_s}) < 0 $$\n由于对于 $T_s > 0$，项 $(1 - e^{-T_s})$ 严格为正，为了使乘积为负，另一项必须为负：\n$$ \\frac{3 T_s - 2}{2} < 0 $$\n$$ 3 T_s - 2 < 0 $$\n$$ T_s < \\frac{2}{3} $$\n因此，系统在区间 $(0, 2/3)$ 内的所有采样时间 $T_s$ 下都是稳定的。保证稳定性的最大采样时间是 $T_s = 2/3$ 秒。\n\n将数值答案四舍五入到四位有效数字：\n$$ T_s = \\frac{2}{3} \\approx 0.666666... \\,\\text{s} \\approx 0.6667 \\,\\text{s}$$",
            "answer": "$$\\boxed{0.6667}$$"
        },
        {
            "introduction": "实时仿真器中的“实时”是一个硬性约束，意味着HIL处理器必须在严格的时间限制内完成所有计算，以准确模仿物理世界。本练习将介绍实时调度理论，特别是最早截止期优先（EDF）算法，并应用处理器利用率测试来评估任务集的可调度性。这项实践将控制工程与实时计算联系起来，展示了如何在保证HIL仿真有效性的前提下，平衡模型保真度（计算成本）与硬截止时间之间的关系。",
            "id": "4225896",
            "problem": "一个实时硬件在环 (HIL) 数字孪生测试平台运行在单个抢占式处理器上，并采用最早截止期优先 (EDF) 调度算法。在HIL环路中，有四个周期性任务在目标机上执行：对象积分器、传感器仿真、执行器驱动和网络遥测。每个任务的作业在其周期开始时被释放，并且必须在其等于其周期的相对截止期前完成。该系统是严格的单核系统，没有后台任务，并且作业可以被抢占。\n\n为了提高模型保真度，对象和信号处理操作通过一个无量纲保真度因子 $s \\ge 0$ 进行缩放，这会增加它们的最坏情况执行时间 (WCET)。WCET和周期如下：\n- 对象积分器：周期 $T_{1} = 1\\,\\mathrm{ms}$，执行时间 $C_{1}(s) = 0.27\\,\\mathrm{ms} + 0.15\\,\\mathrm{ms} \\cdot s$。\n- 传感器仿真：周期 $T_{2} = 2\\,\\mathrm{ms}$，执行时间 $C_{2}(s) = 0.305\\,\\mathrm{ms} + 0.05\\,\\mathrm{ms} \\cdot s$。\n- 执行器驱动：周期 $T_{3} = 5\\,\\mathrm{ms}$，执行时间 $C_{3}(s) = 0.21\\,\\mathrm{ms} + 0.02\\,\\mathrm{ms} \\cdot s^{2}$。\n- 网络遥测：周期 $T_{4} = 10\\,\\mathrm{ms}$，执行时间 $C_{4} = 0.62\\,\\mathrm{ms}$。\n\n设计EDF调度策略，具体包括为每个任务指定相对截止期，并说明在运行时确定作业优先级的调度规则。从单核抢占式系统中具有隐式截止期（相对截止期等于周期）的EDF实时可行性第一性原理出发，推导出基于任意时间间隔内处理器需求的调度判据，并说明它如何约束这些周期性任务的总执行需求。然后，利用该判据，确定使系统保持可调度的最大保真度缩放因子 $s_{\\max}$。\n\n将您的最终答案表示为 $s_{\\max}$ 的一个纯数字，四舍五入到四位有效数字。最终答案不需要单位。",
            "solution": "首先，我们设计EDF调度策略。该策略包括截止期分配和运行时调度规则。\n1.  **截止期分配**：问题指明，对于每个任务 $\\tau_i$，其相对截止期 $D_i$ 等于其周期 $T_i$（隐式截止期）。因此，$D_1 = 1\\,\\mathrm{ms}$, $D_2 = 2\\,\\mathrm{ms}$, $D_3 = 5\\,\\mathrm{ms}$, $D_4 = 10\\,\\mathrm{ms}$。\n2.  **调度规则**：EDF是一种动态优先级调度算法。在任何时刻，处理器都会分配给具有最早绝对截止期的就绪作业。如果一个新到达的作业的绝对截止期早于当前正在执行的作业，则当前作业被抢占。\n\n接下来，我们推导可调度性判据。对于一组在单处理器上运行的、独立的、可抢占的、具有隐式截止期 ($D_i = T_i$) 的周期性任务，Liu和Layland证明了存在一个简单而精确的可调度性测试。该测试基于总处理器利用率 $U$，即所有任务消耗的处理器时间比例之和。单个任务 $\\tau_i$ 的利用率为 $U_i = C_i / T_i$。总利用率 $U = \\sum_{i=1}^{n} U_i$。可调度性的充分必要条件是：\n$$U \\le 1$$\n这个条件表明，只要任务所需的总处理时间不超过处理器可用的总时间，EDF就能成功地调度所有任务而不会错过任何截止期。\n\n现在，我们将此判据应用于给定的任务集。总利用率 $U(s)$ 是保真度因子 $s$ 的函数：\n$$U(s) = \\frac{C_1(s)}{T_1} + \\frac{C_2(s)}{T_2} + \\frac{C_3(s)}{T_3} + \\frac{C_4}{T_4}$$\n代入给定值（$\\mathrm{ms}$ 单位在每项中均抵消）：\n$$U(s) = \\frac{0.27 + 0.15s}{1} + \\frac{0.305 + 0.05s}{2} + \\frac{0.21 + 0.02s^2}{5} + \\frac{0.62}{10}$$\n简化每一项：\n$$U(s) = (0.27 + 0.15s) + (0.1525 + 0.025s) + (0.042 + 0.004s^2) + 0.062$$\n按 $s$ 的幂次合并各项：\n$$U(s) = 0.004s^2 + (0.15 + 0.025)s + (0.27 + 0.1525 + 0.042 + 0.062)$$\n$$U(s) = 0.004s^2 + 0.175s + 0.5265$$\n为使系统可调度，我们必须满足条件 $U(s) \\le 1$：\n$$0.004s^2 + 0.175s + 0.5265 \\le 1$$\n整理为标准二次不等式形式 $as^2 + bs + c \\le 0$：\n$$0.004s^2 + 0.175s - 0.4735 \\le 0$$\n为了找到使此不等式成立的 $s$ 值，我们求解相应的一元二次方程 $0.004s^2 + 0.175s - 0.4735 = 0$ 的根。使用求根公式 $s = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$，其中 $a=0.004$，$b=0.175$，$c=-0.4735$。\n\n计算判别式 $\\Delta = b^2 - 4ac$：\n$$\\Delta = (0.175)^2 - 4(0.004)(-0.4735) = 0.030625 + 0.007576 = 0.038201$$\n根为：\n$$s = \\frac{-0.175 \\pm \\sqrt{0.038201}}{2(0.004)} = \\frac{-0.175 \\pm 0.19545076...}{0.008}$$\n这得到两个根：\n$$s_1 = \\frac{-0.175 - 0.19545076...}{0.008} \\approx -46.3063$$\n$$s_2 = \\frac{-0.175 + 0.19545076...}{0.008} \\approx 2.556345$$\n二次函数 $f(s) = 0.004s^2 + 0.175s - 0.4735$ 的图像是一个开口向上的抛物线。因此，不等式 $f(s) \\le 0$ 在两个根之间成立，即 $s_1 \\le s \\le s_2$。\n\n问题陈述中规定保真度因子 $s$ 必须为非负数，即 $s \\ge 0$。将此物理约束与可调度性约束相结合， $s$ 的允许范围是 $0 \\le s \\le s_2$。因此，保真度缩放因子的最大值 $s_{\\max}$ 是正根 $s_2$。\n$$s_{\\max} \\approx 2.556345$$\n将答案四舍五入到四位有效数字：\n$$s_{\\max} \\approx 2.556$$",
            "answer": "$$\\boxed{2.556}$$"
        }
    ]
}
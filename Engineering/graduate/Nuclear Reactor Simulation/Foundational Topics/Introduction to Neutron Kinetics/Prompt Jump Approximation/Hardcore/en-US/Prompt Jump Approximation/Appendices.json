{
    "hands_on_practices": [
        {
            "introduction": "To truly master the prompt jump approximation, we begin with its derivation from first principles. This exercise  guides you through the process of using timescale arguments to find the instantaneous change in neutron density following a reactivity step. By examining the special case of zero reactivity change, you will also perform a crucial consistency check that builds confidence in the physical validity of the approximation.",
            "id": "4243374",
            "problem": "Consider a spatially uniform reactor described by the point-kinetics equations with $m$ delayed neutron groups and no external source. Let the neutron density be $n(t)$, the effective delayed neutron fraction be $\\beta=\\sum_{i=1}^{m}\\beta_{i}$, the effective prompt neutron generation time be $\\Lambda$, and the delayed neutron precursor concentration for group $i$ be $C_{i}(t)$ with decay constant $\\lambda_{i}$. The governing equations are\n$$\\Lambda\\,\\frac{dn}{dt}=\\left(\\rho(t)-\\beta\\right)n(t)+\\Lambda\\sum_{i=1}^{m}\\lambda_{i}C_{i}(t),$$\n$$\\frac{dC_{i}}{dt}=\\frac{\\beta_{i}}{\\Lambda}\\,n(t)-\\lambda_{i}C_{i}(t),\\quad i=1,\\dots,m,$$\nwhere $\\rho(t)$ is the reactivity. At $t=0$, a step reactivity change is imposed from $\\rho(0^{-})=\\rho_{0}$ to $\\rho(0^{+})=\\rho_{1}$. Assume the prompt jump approximation: over the infinitesimal time interval of the step, the delayed neutron precursors are continuous, $C_{i}(0^{+})=C_{i}(0^{-})$, and their source $\\sum_{i=1}^{m}\\lambda_{i}C_{i}(t)$ does not change during the jump; the prompt-neutron time scale $\\Lambda$ is sufficiently small that the neutron density adjusts essentially instantaneously to maintain a finite right-hand side in the neutron balance.\n\nStarting from the point-kinetics equations and only these assumptions, derive an analytical expression for the ratio $J=\\frac{n(0^{+})}{n(0^{-})}$ in terms of $\\rho_{0}$, $\\rho_{1}$, and $\\beta$.\n\nThen, using your derived expression, evaluate $J$ in the special case $\\rho_{1}=\\rho_{0}$. Express the final value of $J$ as a single number. No rounding is required, and no units are involved.",
            "solution": "The starting point is the point-kinetics model for a spatially uniform reactor. The neutron balance equation is\n$$\\Lambda\\,\\frac{dn}{dt}=\\left(\\rho(t)-\\beta\\right)n(t)+\\Lambda\\sum_{i=1}^{m}\\lambda_{i}C_{i}(t).$$\nThe precursor balance is\n$$\\frac{dC_{i}}{dt}=\\frac{\\beta_{i}}{\\Lambda}\\,n(t)-\\lambda_{i}C_{i}(t),\\quad i=1,\\dots,m.$$\nAt $t=0$, the reactivity changes instantaneously from $\\rho_{0}$ to $\\rho_{1}$. Over this infinitesimal interval, the delayed neutron precursors cannot change discontinuously because their evolution is governed by first-order ODEs with finite right-hand sides. Thus, $C_{i}(0^{+})=C_{i}(0^{-})$ for all $i$, and the total delayed neutron source $S_{d}(t)\\equiv\\sum_{i=1}^{m}\\lambda_{i}C_{i}(t)$ is continuous at $t=0$.\n\nThe essence of the prompt jump approximation is that following the step change, the neutron density $n(t)$ adjusts almost instantaneously to a new quasi-static equilibrium. This implies that the large terms in the neutron balance equation are balanced, which is equivalent to assuming the net rate of change term $\\Lambda \\frac{dn}{dt}$ is negligible. We can therefore set the right-hand side of the neutron balance equation to approximately zero just before the jump (at $t=0^-$) and just after (at $t=0^+$).\n\nAt $t=0^-$, the balance is: $0 \\approx (\\rho_0 - \\beta)n(0^-) + \\Lambda S_d(0^-)$, which gives $\\Lambda S_d(0^-) \\approx (\\beta - \\rho_0)n(0^-)$.\nAt $t=0^+$, the balance is: $0 \\approx (\\rho_1 - \\beta)n(0^+) + \\Lambda S_d(0^+)$, which gives $\\Lambda S_d(0^+) \\approx (\\beta - \\rho_1)n(0^+)$.\n\nSince $S_d(0^+) = S_d(0^-)$, we can equate the expressions for the source terms:\n$$(\\beta - \\rho_1)n(0^+) = (\\beta - \\rho_0)n(0^-).$$\nSolving for the ratio $J \\equiv \\frac{n(0^+)}{n(0^-)}$ gives the prompt jump formula, which can be written as:\n$$J = \\frac{\\rho_0 - \\beta}{\\rho_1 - \\beta}.$$\n\nNow consider the special case $\\rho_{1}=\\rho_{0}$. Substituting this into the expression for $J$ gives\n$$J=\\frac{\\rho_{0}-\\beta}{\\rho_{0}-\\beta}=1.$$\n\nThis result demonstrates that if there is no change in reactivity, the prompt jump factor is unity, meaning $n(0^{+})=n(0^{-})$. This is a crucial internal consistency check, confirming that the approximation does not introduce a jump when there is no physical perturbation.",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "The power of the prompt jump approximation lies in its ability to predict the immediate consequences of a rapid reactivity change. This practice  challenges you to apply the approximation in a coupled kinetics-thermal model. You will determine how the instantaneous jump in neutron population translates directly into an initial rate of change for the fuel temperature, a critical parameter for reactor safety analysis.",
            "id": "4243339",
            "problem": "Consider a spatially uniform reactor modeled by point kinetics with $m$ delayed neutron groups coupled to a single-node (lumped) fuel thermal capacitance. The neutron population dynamics are governed by the point-kinetics equations\n$$\n\\frac{dn(t)}{dt}=\\frac{\\rho(t)-\\beta}{\\Lambda}\\,n(t)+\\sum_{i=1}^{m}\\lambda_i C_i(t),\\qquad\n\\frac{dC_i(t)}{dt}=\\frac{\\beta_i}{\\Lambda}\\,n(t)-\\lambda_i C_i(t),\n$$\nwhere $n(t)$ is the neutron density, $C_i(t)$ is the concentration of the $i$-th delayed neutron precursor group, $\\rho(t)$ is the reactivity, $\\Lambda$ is the prompt neutron generation time, $\\beta_i$ and $\\lambda_i$ are the delayed neutron fraction and decay constant of group $i$, respectively, and $\\beta=\\sum_{i=1}^{m}\\beta_i$ is the total delayed neutron fraction. The thermal energy balance for the lumped fuel is\n$$\nC_F\\frac{dT_F(t)}{dt}=P(t)-H\\left(T_F(t)-T_C\\right),\n$$\nwhere $T_F(t)$ is the average fuel temperature, $C_F$ is the fuel lumped heat capacity, $H$ is an effective overall heat removal coefficient to a coolant at fixed temperature $T_C$ on the prompt timescale, and $P(t)$ is the total fission power. Assume that the total power is proportional to neutron density on prompt timescales, $P(t)=\\kappa\\,n(t)$, with constant proportionality $\\kappa0$.\n\nThe reactor is initially at steady critical operation for $t0$ with $\\rho(t)=0$, $n(t)=n_0$, $C_i(t)=C_{i0}$, $T_F(t)=T_{F0}$, and $P(t)=P_0=\\kappa n_0$. Thermal steady state holds initially, so $H\\left(T_{F0}-T_C\\right)=P_0$. At $t=0$, a spatially uniform, instantaneous step reactivity insertion of magnitude $\\rho_s$ is applied, with $|\\rho_s|  \\beta$. On the prompt timescale, the coolant temperature $T_C$ and the precursor concentrations $C_i$ cannot change discontinuously.\n\nStarting from the point-kinetics equations and the fuel energy balance as the fundamental base, derive a closed-form analytic expression for the initial rate of change of the fuel temperature immediately after the step, $\\dot{T}_F(0^+)$, in terms of $\\rho_s$, $\\beta$, $C_F$, and $P_0$. Clearly state and justify any approximations used that are consistent with the prompt jump approximation.\n\nExpress your final answer in $\\mathrm{K\\,s^{-1}}$. Do not leave your answer as an inequality or equation to be solved; provide a single analytic expression.",
            "solution": "We begin by analyzing the reactor's initial state. For $t0$, the reactor is in a critical steady state ($\\rho=0$), so all time derivatives are zero. From the precursor balance, $\\frac{dC_i}{dt}=0$, we find $\\lambda_i C_{i0} = \\frac{\\beta_i}{\\Lambda}n_0$. Summing over all precursor groups gives the total initial delayed neutron source: $\\sum \\lambda_i C_{i0} = \\frac{\\beta}{\\Lambda}n_0$. From the thermal balance, $\\frac{dT_F}{dt}=0$, we have $P_0 = H(T_{F0}-T_C)$.\n\nAt $t=0$, a step reactivity $\\rho_s$ is inserted. The prompt jump approximation (PJA) applies due to the vast difference between the prompt neutron timescale ($\\Lambda$) and the timescales of precursors and thermal inertia. The PJA states:\n1.  Precursor concentrations are continuous: $C_i(0^+) = C_i(0^-) = C_{i0}$.\n2.  Fuel temperature is continuous due to thermal inertia: $T_F(0^+) = T_F(0^-) = T_{F0}$.\n3.  The neutron population $n(t)$ \"jumps\" to a new quasi-equilibrium value $n(0^+)$ that balances the large prompt terms in the kinetics equation. This balance is found by setting the right-hand side of the neutron equation to zero in the limit where $\\Lambda \\to 0$. Using the initial condition $\\rho_0=0$:\n$$0 \\approx (\\rho_s - \\beta)n(0^+) + \\beta n_0$$\nSolving for the post-jump neutron density $n(0^+)$ gives the classic PJA formula for a step from critical:\n$$n(0^+) = \\frac{\\beta}{\\beta-\\rho_s} n_0$$\nSince power is proportional to neutron density ($P=\\kappa n$), the power level immediately after the jump is:\n$$P(0^+) = \\frac{\\beta}{\\beta-\\rho_s} P_0$$\n\nFinally, we evaluate the fuel thermal energy balance at the instant $t=0^+$ to find the initial rate of change of temperature, $\\dot{T}_F(0^+)$:\n$$C_F \\dot{T}_F(0^+) = P(0^+) - H\\left(T_F(0^+) - T_C\\right)$$\nWe substitute the post-jump power $P(0^+)$, the continuous temperature $T_F(0^+) = T_{F0}$, and the initial steady-state heat removal rate $H(T_{F0} - T_C) = P_0$:\n$$C_F \\dot{T}_F(0^+) = \\frac{\\beta}{\\beta-\\rho_s} P_0 - P_0$$\nFactoring out $P_0$ and simplifying:\n$$C_F \\dot{T}_F(0^+) = P_0 \\left(\\frac{\\beta}{\\beta-\\rho_s} - 1\\right) = P_0 \\left(\\frac{\\beta - (\\beta-\\rho_s)}{\\beta-\\rho_s}\\right) = P_0 \\left(\\frac{\\rho_s}{\\beta-\\rho_s}\\right)$$\nSolving for the rate of temperature change yields the final expression:\n$$\\dot{T}_F(0^+) = \\frac{P_0}{C_F} \\frac{\\rho_s}{\\beta-\\rho_s}$$\nThis expression gives the initial rate of change of fuel temperature in terms of the initial power $P_0$, the fuel heat capacity $C_F$, the inserted reactivity $\\rho_s$, and the total delayed neutron fraction $\\beta$, as requested. The units are consistent, yielding $\\mathrm{K\\,s^{-1}}$.",
            "answer": "$$\\boxed{\\frac{P_0 \\rho_s}{C_F (\\beta - \\rho_s)}}$$"
        },
        {
            "introduction": "Moving from analytical theory to computational practice is a key step in modern reactor analysis. This hands-on exercise  tasks you with implementing the prompt jump as a discrete event-handling strategy within a numerical framework. By coding the update rules for neutron density and precursors, you will gain insight into how simulation software accurately captures the near-discontinuous behavior predicted by the prompt jump approximation.",
            "id": "4256423",
            "problem": "A reactor point-model is governed by the point kinetics equations, which express neutron balance and precursor dynamics in a zero-dimensional approximation. Let $n(t)$ denote the neutron density, and let $C_i(t)$ denote the delayed neutron precursor concentration for group $i$, where $i = 1,2,\\dots,G$. Let $\\rho(t)$ be the reactivity, $\\beta_i$ the delayed neutron fraction for group $i$, $\\beta = \\sum_{i=1}^G \\beta_i$ the total delayed neutron fraction, $\\lambda_i$ the decay constant for group $i$, and $\\Lambda$ the prompt neutron generation time. The point kinetics equations, expressed as a system of Ordinary Differential Equations (ODE), are\n$$\\frac{dn}{dt} = \\frac{\\rho(t) - \\beta}{\\Lambda}\\,n(t) + \\sum_{i=1}^G \\lambda_i\\,C_i(t),$$\n$$\\frac{dC_i}{dt} = \\frac{\\beta_i}{\\Lambda}\\,n(t) - \\lambda_i\\,C_i(t), \\quad i=1,\\dots,G.$$\nConsider a step reactivity insertion occurring at time $t_0$, with\n$$\\rho(t) = \\begin{cases}\n\\rho_0,  t  t_0,\\\\\n\\rho_1,  t \\ge t_0.\n\\end{cases}$$\nAssume no external source and that all quantities are in International System of Units (SI), with time in seconds.\n\nYour task is twofold:\n1. Starting only from the equations above and the physical requirement that $C_i(t)$ remains continuous at $t_0$, derive the instantaneous update rule at $t_0$ for $n(t)$ that captures the prompt jump caused by the step change in $\\rho(t)$. The derivation must show why the update preserves finite $\\frac{dn}{dt}$ and must rigorously justify the continuity of $C_i(t)$ at the event time.\n2. Implement an event-handling strategy in a program that, given $n(t_0^-)$ and $C_i(t_0^-)$ just before the event, updates $n(t_0^+)$ instantaneously while setting $C_i(t_0^+) = C_i(t_0^-)$, thereby maintaining continuity of $C_i(t)$.\n\nUse the following scientifically realistic parameter set for thermal neutron-induced fission in Uranium-235:\n- Number of delayed groups $G$: $6$.\n- Delayed group fractions $\\beta_i$: $[0.000215,\\,0.001424,\\,0.001274,\\,0.002568,\\,0.000748,\\,0.000273]$ (dimensionless).\n- Decay constants $\\lambda_i$ in $\\mathrm{s}^{-1}$: $[0.0124,\\,0.0305,\\,0.111,\\,0.301,\\,1.14,\\,3.01]$.\n- Prompt neutron generation time $\\Lambda$ in $\\mathrm{s}$: $1.0\\times 10^{-5}$.\n- Event time $t_0$ in $\\mathrm{s}$: $1.0$.\n- Pre-event reactivity $\\rho_0$: $0.0$ (critical).\n- Pre-event neutron density $n(t_0^-)$: $1.0$ (arbitrary scaling).\n- Pre-event precursor concentrations at critical steady state: $C_i(t_0^-)=\\frac{\\beta_i}{\\Lambda \\lambda_i} n(t_0^-)$.\n\nDesign a test suite that evaluates your event-handling update for four distinct step reactivity insertions $\\rho_1$:\n- Case A (happy path, positive step, subprompt-critical): $\\rho_1 = 0.0025$.\n- Case B (negative step): $\\rho_1 = -0.0030$.\n- Case C (no change): $\\rho_1 = 0.0$.\n- Case D (near prompt-critical boundary from below): $\\rho_1 = \\beta - 10^{-5}$.\n\nFor each case, compute two floats:\n- The absolute error between your implemented ratio $n(t_0^+)/n(t_0^-)$ and the analytically derived ratio from your derivation.\n- The maximum absolute discontinuity across the event in the precursor vector, $\\max_i |C_i(t_0^+) - C_i(t_0^-)|$, expressed in the same units as $C_i$ but numerically dimensionless due to the chosen scaling.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[r_1,d_1,r_2,d_2,r_3,d_3,r_4,d_4]$), where $r_k$ is the absolute error of the neutron density ratio for case $k$, and $d_k$ is the maximum precursor discontinuity for case $k$. All outputs are floats. No user input is required; the program must run as-is.",
            "solution": "The user-provided problem has been assessed and is determined to be valid. It is scientifically grounded in the principles of nuclear reactor physics, mathematically well-posed, and all necessary data for its resolution are provided.\n\nThe solution is presented in two parts as requested: first, a rigorous derivation of the prompt jump approximation, and second, a description of the implementation strategy for the computational task.\n\n### Part 1: Derivation of the Instantaneous Update Rule\n\nThe analysis begins with the point kinetics equations for neutron density $n(t)$ and precursor concentrations $C_i(t)$ for $i=1, \\dots, G$ delayed neutron groups:\n$$ \\frac{dn}{dt} = \\frac{\\rho(t) - \\beta}{\\Lambda}\\,n(t) + \\sum_{i=1}^G \\lambda_i\\,C_i(t) \\quad (1) $$\n$$ \\frac{dC_i}{dt} = \\frac{\\beta_i}{\\Lambda}\\,n(t) - \\lambda_i\\,C_i(t) \\quad (2) $$\nwhere $\\rho(t)$ is the reactivity, $\\beta_i$ is the delayed neutron fraction for group $i$, $\\beta = \\sum_{i=1}^G \\beta_i$ is the total delayed neutron fraction, $\\lambda_i$ is the decay constant for group $i$, and $\\Lambda$ is the prompt neutron generation time. The reactivity undergoes a step change at time $t_0$ from $\\rho_0$ to $\\rho_1$.\n\n#### Justification for the Continuity of Precursor Concentrations\n\nThe physical quantities $n(t)$ and $C_i(t)$ must remain finite. The right-hand side of Equation $(2)$, which is the derivative $\\frac{dC_i}{dt}$, is composed of terms that are themselves finite. Even if $n(t)$ experiences a finite jump discontinuity at $t_0$, the terms $\\frac{\\beta_i}{\\Lambda}n(t)$ and $\\lambda_i C_i(t)$ remain bounded functions of time. Consequently, the derivative $\\frac{dC_i}{dt}$ is bounded for all time $t$.\n\nA function with a bounded derivative cannot have a jump discontinuity. To demonstrate this formally, we integrate Equation $(2)$ over an infinitesimal time interval $[t_0 - \\epsilon, t_0 + \\epsilon]$ and take the limit as $\\epsilon \\to 0^+$:\n$$ C_i(t_0^+) - C_i(t_0^-) = \\lim_{\\epsilon \\to 0^+} \\int_{t_0-\\epsilon}^{t_0+\\epsilon} \\frac{dC_i}{dt} dt = \\lim_{\\epsilon \\to 0^+} \\int_{t_0-\\epsilon}^{t_0+\\epsilon} \\left( \\frac{\\beta_i}{\\Lambda}n(t) - \\lambda_i C_i(t) \\right) dt $$\nSince the integrand is a bounded function, the integral over an interval of vanishing length ($2\\epsilon$) must be zero. Therefore:\n$$ C_i(t_0^+) - C_i(t_0^-) = 0 \\implies C_i(t_0^+) = C_i(t_0^-) $$\nThis proves that the precursor concentrations $C_i(t)$ are continuous across the event at $t_0$. Physically, precursor concentrations are state variables representing physical populations of nuclei, which cannot change instantaneously.\n\n#### Derivation of the Prompt Jump Approximation for Neutron Density\n\nThe prompt neutron generation time $\\Lambda$ is a very small parameter, often of the order of $10^{-5}\\,\\mathrm{s}$ or less. This makes the term $1/\\Lambda$ in Equation $(1)$ very large, signifying a \"stiff\" system with widely separated timescales. The neutron population $n(t)$ is the fast variable, while the precursors $C_i(t)$ are the slow variables.\n\nWe can rewrite Equation $(1)$ by multiplying by $\\Lambda$:\n$$ \\Lambda \\frac{dn}{dt} = (\\rho(t) - \\beta) n(t) + \\Lambda \\sum_{i=1}^G \\lambda_i C_i(t) \\quad (3) $$\nFor $t  t_0$, the reactor is in a critical steady state with $\\rho(t) = \\rho_0 = 0$. At steady state, all time derivatives are zero. From Equation $(3)$:\n$$ 0 = (\\rho_0 - \\beta) n(t_0^-) + \\Lambda \\sum_{i=1}^G \\lambda_i C_i(t_0^-) $$\nRearranging gives us the total delayed neutron source term before the jump:\n$$ \\Lambda \\sum_{i=1}^G \\lambda_i C_i(t_0^-) = (\\beta - \\rho_0) n(t_0^-) \\quad (4) $$\nAt the instant $t_0$, the reactivity jumps from $\\rho_0$ to $\\rho_1$. Because $\\Lambda$ is extremely small, any finite imbalance in the terms on the right-hand side of Equation $(3)$ would lead to an extremely large, physically unrealistic (approaching infinite) derivative $\\frac{dn}{dt}$. The system avoids this by having the fast variable, $n(t)$, instantaneously jump to a new value $n(t_0^+)$ that re-establishes a quasi-equilibrium, thereby ensuring that $\\frac{dn}{dt}$ remains finite immediately after the jump.\n\nLet's write Equation $(3)$ at the instant $t_0^+$:\n$$ \\Lambda \\frac{dn}{dt}\\bigg|_{t_0^+} = (\\rho_1 - \\beta) n(t_0^+) + \\Lambda \\sum_{i=1}^G \\lambda_i C_i(t_0^+) $$\nDue to the continuity of precursors, we know that $C_i(t_0^+) = C_i(t_0^-)$. Thus, the delayed neutron source term is also continuous: $\\Lambda \\sum_i \\lambda_i C_i(t_0^+) = \\Lambda \\sum_i \\lambda_i C_i(t_0^-)$.\nSubstituting the expression for the source from Equation $(4)$:\n$$ \\Lambda \\frac{dn}{dt}\\bigg|_{t_0^+} = (\\rho_1 - \\beta) n(t_0^+) + (\\beta - \\rho_0) n(t_0^-) $$\nTo preserve a finite derivative $\\frac{dn}{dt}\\big|_{t_0^+}$ in the limit as $\\Lambda \\to 0$, the right-hand side of this equation must approach zero. This is the core tenet of the prompt jump approximation, derived from singular perturbation theory. Setting the right-hand side to zero gives:\n$$ 0 = (\\rho_1 - \\beta) n(t_0^+) + (\\beta - \\rho_0) n(t_0^-) $$\nSolving for $n(t_0^+)$ yields the instantaneous update rule, known as the prompt jump formula:\n$$ n(t_0^+) = n(t_0^-) \\frac{\\beta - \\rho_0}{\\beta - \\rho_1} $$\nThis derivation rigorously justifies the update rule by enforcing the physical requirement that state variables evolve with finite rates of change, even in the presence of idealized discontinuous inputs.\n\n### Part 2: Implementation Strategy\n\nThe programming task is to implement the derived event-handling rules and verify their self-consistency for four test cases. The implementation will be done in Python using the `numpy` library.\n\nThe update rules to be implemented are:\n1.  Precursor update: $C_i(t_0^+) = C_i(t_0^-)$ for all $i=1,\\dots,G$.\n2.  Neutron density update: $n(t_0^+) = n(t_0^-) \\frac{\\beta - \\rho_0}{\\beta - \\rho_1}$.\n\nThe algorithm for the program will be as follows:\n1.  Define the given physical parameters: $\\beta_i$ (as an array), $\\lambda_i$ (as an array), $\\Lambda$, $\\rho_0$, and $n(t_0^-)$.\n2.  Calculate the total delayed neutron fraction $\\beta = \\sum_{i=1}^G \\beta_i$.\n3.  Define the list of test cases for the final reactivity, $\\rho_1$.\n4.  Initialize an empty list to store the results.\n5.  Loop through each test case value of $\\rho_1$:\n    a.  Calculate the analytically derived ratio $R_{\\text{analytic}} = \\frac{n(t_0^+)}{n(t_0^-)} = \\frac{\\beta - \\rho_0}{\\beta - \\rho_1}$.\n    b.  Implement the neutron density update to find the post-event value $n(t_0^+)$ using the pre-event value $n(t_0^-)$ and $R_{\\text{analytic}}$.\n    c.  Calculate the implemented ratio $R_{\\text{impl}} = n(t_0^+) / n(t_0^-)$.\n    d.  Compute the first required metric: the absolute error between the ratios, $r = |R_{\\text{impl}} - R_{\\text{analytic}}|$. This serves as a verification that the implementation correctly reflects the derivation.\n    e.  Implement the precursor update rule $C_i(t_0^+) = C_i(t_0^-)$.\n    f.  Compute the second required metric: the maximum absolute discontinuity in the precursor vector, $d = \\max_i |C_i(t_0^+) - C_i(t_0^-)|$. This verifies adherence to the continuity condition.\n    g.  Append $r$ and $d$ to the results list.\n6.  Format the results list into the required output string `[r1,d1,r2,d2,...]` and print it.\n\nGiven that the implementation of the update for $n(t_0^+)$ will directly use the analytical formula for the ratio, and the update for $C_i(t_0^+)$ is an identity assignment, both the ratio error $r$ and the precursor discontinuity $d$ are expected to be numerically equal to $0.0$ for all test cases, subject to the limitations of floating-point arithmetic. The code will confirm this outcome.\n\nThe initial precursor concentrations $C_i(t_0^-)$ are determined by the steady-state condition for $\\rho_0=0$, which is given as $C_i(t_0^-)=\\frac{\\beta_i}{\\Lambda \\lambda_i} n(t_0^-)$. While these values are not strictly needed to calculate the requested discontinuity (which is zero by definition of the update rule), their calculation demonstrates a complete understanding of the initial state.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Derives and implements the prompt jump approximation for a step reactivity\n    insertion in a point kinetics model, and verifies the implementation.\n    \"\"\"\n\n    # Define the physical parameters for U-235 from the problem statement.\n    beta_i_vals = np.array([0.000215, 0.001424, 0.001274, 0.002568, 0.000748, 0.000273])\n    lambda_i_vals = np.array([0.0124, 0.0305, 0.111, 0.301, 1.14, 3.01])\n    Lambda = 1.0e-5\n    \n    # Pre-event conditions\n    rho_0 = 0.0\n    n_minus = 1.0\n\n    # Calculate total delayed neutron fraction beta, a critical parameter.\n    beta = np.sum(beta_i_vals)\n\n    # Define the test cases for the post-event reactivity rho_1.\n    test_cases = [\n        # Case A: Happy path, positive step, subprompt-critical\n        0.0025,\n        # Case B: Negative step\n        -0.0030,\n        # Case C: No change\n        0.0,\n        # Case D: Near prompt-critical boundary from below\n        beta - 1.0e-5,\n    ]\n\n    results = []\n\n    # Calculate pre-event precursor concentrations from the steady-state critical condition.\n    # C_i(t_0^-) = (beta_i / (Lambda * lambda_i)) * n(t_0^-)\n    # This calculation is for completeness, as the discontinuity is zero by definition.\n    C_minus = (beta_i_vals / (Lambda * lambda_i_vals)) * n_minus\n\n    # Iterate through each test case.\n    for rho_1 in test_cases:\n        #\n        # --- Event Handling Implementation ---\n        #\n\n        # 1. Update rule for precursor concentrations:\n        #    As derived, C_i is continuous, so C_i(t_0^+) = C_i(t_0^-).\n        C_plus = C_minus\n\n        # 2. Update rule for neutron density using the prompt jump approximation:\n        #    n(t_0^+) = n(t_0^-) * (beta - rho_0) / (beta - rho_1)\n        #    First, calculate the analytical ratio derived in the solution.\n        analytic_ratio = (beta - rho_0) / (beta - rho_1)\n        \n        #    Then, apply the update rule to find n(t_0^+).\n        n_plus = n_minus * analytic_ratio\n\n        #\n        # --- Compute Required Metrics ---\n        #\n\n        # Metric 1: Absolute error of the neutron density ratio.\n        # This compares the implemented ratio against the analytically derived one.\n        # Since the implementation directly uses the analytical formula, this\n        # error is expected to be zero (or within machine precision).\n        implemented_ratio = n_plus / n_minus\n        ratio_error = abs(implemented_ratio - analytic_ratio)\n        \n        # Metric 2: Maximum absolute discontinuity in the precursor vector.\n        # This is max|C_i(t_0^+) - C_i(t_0^-)|. Since the update rule is\n        # C_plus = C_minus, this is expected to be exactly zero.\n        precursor_discontinuity = np.max(np.abs(C_plus - C_minus))\n        \n        results.append(ratio_error)\n        results.append(precursor_discontinuity)\n\n    # Final print statement in the exact required format.\n    # The map(str, results) ensures all numbers are converted to strings\n    # for the join operation, producing the desired \"[f1,f2,f3,...]\" format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
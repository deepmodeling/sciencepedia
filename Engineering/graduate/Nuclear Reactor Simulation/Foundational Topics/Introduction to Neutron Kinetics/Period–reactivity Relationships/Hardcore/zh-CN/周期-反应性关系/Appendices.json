{
    "hands_on_practices": [
        {
            "introduction": "倒时方程（inhour equation）为从反应堆周期 $T$ 到反应性 $\\rho$ 提供了一个直接的映射。然而，在许多实际情景中，例如在已知反应性变化后预测反应堆行为，我们需要进行逆向操作：即给定 $\\rho$ 求解 $T$。该练习  将指导您创建一个数值程序来解决这个基本问题，这不仅能培养反应堆分析所必需的计算技能，还要求您仔细处理方程的数学特性（如极点），以确保找到具有物理意义的解。",
            "id": "4240819",
            "problem": "给定一个均匀点堆模型及其科学合理的缓发中子数据和瞬发中子代时间。任务是建立一个数值程序，在反应性恒定的假设下，可靠地反演周期-反应性关系，以求得在临界点附近，作为指定反应性 $\\rho$ 函数的反应堆周期 $T$。出发点是关于中子布居 $n(t)$ 和缓发中子先驱核浓度 $C_i(t)$ 的点堆动力学方程，以及反应堆周期的定义和标准缓发中子组数据。您不能使用任何闭式反演；相反，必须构建一个算法，通过稳健的数值求根方法来求解从 $T$ 到 $\\rho$ 的隐式映射。\n\n使用的基本原理：\n- 反应性恒定且无外源的点堆动力学方程：\n  - $\\dfrac{d n(t)}{d t} = \\dfrac{\\rho - \\beta}{\\Lambda} n(t) + \\sum_{i=1}^m \\lambda_i C_i(t)$\n  - $\\dfrac{d C_i(t)}{d t} = \\dfrac{\\beta_i}{\\Lambda} n(t) - \\lambda_i C_i(t)$\n- 假设中子布居呈指数行为 $n(t) \\propto e^{\\omega t}$，由此定义增长率 $\\omega$ 和反应堆周期 $T$，其关系为 $\\omega = 1/T$。\n\n您的程序必须：\n1. 对于一组指定的缓发中子参数 $\\{\\beta_i,\\lambda_i\\}$、瞬发中子代时间 $\\Lambda$ 和目标反应性 $\\rho$（以小数形式表示，不带百分号），构建一个关于 $T$ 的函数，该函数表示模型反应性与目标 $\\rho$ 之间的残差，然后求解残差方程 $g(T)=0$ 以找到主反应堆周期 $T$。\n2. 选择临界点附近物理上相关的主分支：当 $\\rho \\to 0^+$ 时，$T \\to +\\infty$；当 $\\rho \\to 0^-$ 时，$T \\to -\\infty$。您的求解器必须避免位于 $T = -1/\\lambda_i$ 处的奇点，并且必须将根框定在与这些极点分离的单调区间内。\n3. 处理精确临界情况 $\\rho = 0$，此时应返回无穷大周期。\n4. 所有返回的周期都以秒为单位表示，并四舍五入到六位小数。\n\n测试套件的输入数据：\n- $T$ 和 $\\Lambda$ 的单位为秒，$\\lambda_i$ 的单位为秒$^{-1}$。反应性 $\\rho$ 是以小数形式表示的无量纲量。\n- 测试套件A（具有代表性的 Keepin 类型值的六组铀-235热中子数据），$\\Lambda = 1\\times 10^{-5}\\ \\mathrm{s}$：\n  - $\\beta$ 值: $\\{0.000215, 0.001424, 0.001274, 0.002568, 0.000748, 0.000273\\}$\n  - $\\lambda$ 值: $\\{0.0124, 0.0305, 0.111, 0.301, 0.911, 2.98\\}$\n  - 目标反应性 $\\rho$: $\\{0, 0.0005, -0.0005, 0.002\\}$\n- 测试套件B（六组数据相同，但瞬发中子代时间不同），$\\Lambda = 5\\times 10^{-5}\\ \\mathrm{s}$：\n  - $\\beta$ 值: $\\{0.000215, 0.001424, 0.001274, 0.002568, 0.000748, 0.000273\\}$\n  - $\\lambda$ 值: $\\{0.0124, 0.0305, 0.111, 0.301, 0.911, 2.98\\}$\n  - 目标反应性 $\\rho$: $\\{0.0005\\}$\n- 测试套件C（两组聚合数据），$\\Lambda = 1.5\\times 10^{-5}\\ \\mathrm{s}$：\n  - $\\beta$ 值: $\\{0.0015, 0.0050\\}$\n  - $\\lambda$ 值: $\\{0.08, 0.30\\}$\n  - 目标反应性 $\\rho$: $\\{-0.0001\\}$\n\n算法约束：\n- 实现一种基于区间划定的求根方法，该方法需保证在临界点附近对给定的 $\\rho$ 值能够在主分支上收敛。建议在残差变号且函数单调的区间上使用带安全措施的二分法。\n- 通过构建完全位于单调区间内的括号来明确避免 $T = -1/\\lambda_i$ 处的奇点：对于 $\\rho>0$，区间为 $(0,+\\infty)$；对于 $\\rho0$，区间为 $(-\\infty, -1/\\lambda_{\\min})$，其中 $\\lambda_{\\min}$ 是最小的衰变常数。\n\n输出规范：\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。每个元素对应上面列出的一个测试用例，并且必须是以秒为单位、四舍五入到六位小数的浮点数。如果周期为无穷大，则将其打印为字符串 \"inf\"。例如：\"[1.234567,-12.345679,inf]\"。\n\n无需用户输入；所有参数都嵌入在程序中。",
            "solution": "这个问题是有效的，因为它基于成熟的核反应堆点堆动力学理论，具有科学依据，在数学上是适定的，并且以客观明确的方式呈现。所有必要的数据和约束都已提供，以便于建立公式并进行数值求解。\n\n问题的核心在于反演周期-反应性关系，该关系由反应性 $\\rho$ 恒定且无外源的反应堆的点堆动力学方程导出。控制中子布居 $n(t)$ 和第 $i$ 组缓发中子先驱核浓度 $C_i(t)$ 的方程为：\n$$\n\\frac{d n(t)}{d t} = \\frac{\\rho - \\beta}{\\Lambda} n(t) + \\sum_{i=1}^m \\lambda_i C_i(t)\n$$\n$$\n\\frac{d C_i(t)}{d t} = \\frac{\\beta_i}{\\Lambda} n(t) - \\lambda_i C_i(t)\n$$\n此处，$\\Lambda$ 是瞬发中子代时间，$\\beta_i$ 是第 $i$ 组的缓发中子份额，$\\beta = \\sum_{i=1}^m \\beta_i$ 是总缓发中子份额，$\\lambda_i$ 是第 $i$ 组先驱核的衰变常数，$m$ 是缓发中子组数。\n\n当反应性 $\\rho$ 恒定时，中子布居和先驱核浓度表现出渐近指数行为，$n(t) = n_0 e^{\\omega t}$ 和 $C_i(t) = C_{i0} e^{\\omega t}$，其中 $\\omega$ 是反应堆周期的倒数，$\\omega = 1/T$。将这些形式代入先驱核方程，可以得到渐近状态下的代数关系：\n$$\n\\omega C_{i0} e^{\\omega t} = \\frac{\\beta_i}{\\Lambda} n_0 e^{\\omega t} - \\lambda_i C_{i0} e^{\\omega t}\n$$\n解出 $C_{i0}$ 可得：\n$$\nC_{i0} = \\frac{\\beta_i n_0}{\\Lambda(\\omega + \\lambda_i)} \\quad \\implies \\quad C_i(t) = \\frac{\\beta_i n(t)}{\\Lambda(\\omega + \\lambda_i)}\n$$\n将此结果以及 $\\frac{d n(t)}{d t} = \\omega n(t)$ 代入中子布居方程，我们得到：\n$$\n\\omega n(t) = \\frac{\\rho - \\beta}{\\Lambda} n(t) + \\sum_{i=1}^m \\lambda_i \\left( \\frac{\\beta_i n(t)}{\\Lambda(\\omega + \\lambda_i)} \\right)\n$$\n除以 $n(t)$ 并乘以 $\\Lambda$，得到著名的关联反应性与周期倒数 $\\omega$ 的倒时方程（inhour equation）：\n$$\n\\Lambda \\omega = \\rho - \\beta + \\sum_{i=1}^m \\frac{\\lambda_i \\beta_i}{\\omega + \\lambda_i}\n$$\n重新整理以将 $\\rho$ 表示为 $\\omega$ 的函数，可得：\n$$\n\\rho(\\omega) = \\Lambda \\omega + \\sum_{i=1}^m \\beta_i - \\sum_{i=1}^m \\frac{\\lambda_i \\beta_i}{\\omega + \\lambda_i} = \\Lambda \\omega + \\sum_{i=1}^m \\frac{\\omega \\beta_i}{\\omega + \\lambda_i}\n$$\n问题是以反应堆周期 $T$ 来陈述的，因此我们代入 $\\omega = 1/T$：\n$$\n\\rho(T) = \\frac{\\Lambda}{T} + \\sum_{i=1}^m \\frac{\\beta_i / T}{1/T + \\lambda_i} = \\frac{\\Lambda}{T} + \\sum_{i=1}^m \\frac{\\beta_i}{1 + \\lambda_i T}\n$$\n我们的任务是找到与给定目标反应性 $\\rho_{target}$ 相对应的周期 $T$。这是一个关于残差函数 $g(T)$ 的求根问题：\n$$\ng(T) = \\rho(T) - \\rho_{target} = \\left( \\frac{\\Lambda}{T} + \\sum_{i=1}^m \\frac{\\beta_i}{1 + \\lambda_i T} \\right) - \\rho_{target} = 0\n$$\n我们将按要求使用稳健的区间法对此方程进行数值求解。区间的选择取决于 $\\rho_{target}$ 的符号。函数 $\\rho(T)$ 在每个缓发中子组对应的 $T_i = -1/\\lambda_i$ 处有极点。解的主分支，即对于近临界状态具有物理意义的分支，是具有最大代数值 $T$ 的那个分支。\n\n情况1：临界反应堆（$\\rho_{target} = 0$）\n当反应性为零时，反应堆处于精确临界状态。在点堆动力学模型中，这对应于稳定的中子布居，等效于无穷大的周期。这可以从 $\\rho(T)$ 的方程中看出，当 $|T| \\to \\infty$ 时，$\\rho(T) \\to 0$。算法将此作为特殊情况处理，并返回一个无穷大周期。\n\n情况2：超临界反应堆（$\\rho_{target} > 0$）\n对于正反应性，中子布居增长，对应于一个正周期 $T > 0$。在区间 $T \\in (0, \\infty)$ 内，函数 $\\rho(T)$ 是连续的，并且从 $T \\to 0^+$ 时的 $\\rho(T) \\to +\\infty$ 单调递减至 $T \\to +\\infty$ 时的 $\\rho(T) \\to 0$。因此，对于任何 $\\rho_{target} > 0$，都存在一个唯一的正根 $T$。我们可以建立一个搜索区间 $[a, b]$，其中 $a$ 是一个很小的正数（例如 $10^{-9}\\ \\mathrm{s}$），$b$ 是一个很大的正数（例如 $10^9\\ \\mathrm{s}$）。对于这样的区间，$g(a) = \\rho(a) - \\rho_{target} > 0$ 且 $g(b) = \\rho(b) - \\rho_{target}  0$，保证了区间内存在一个根。\n\n情况3：次临界反应堆（$\\rho_{target}  0$）\n对于负反应性，中子布居衰减，对应于一个负周期 $T  0$。$T$ 的主根位于区间 $(-\\infty, -1/\\lambda_{min})$ 内，其中 $\\lambda_{min}$ 是所有衰变常数 $\\lambda_i$ 中最小的一个。在此区间内，$\\rho(T)$ 是连续的，并且从 $T \\to -\\infty$ 时的 $\\rho(T) \\to 0$ 单调递减至当 $T$ 从下方趋近于极点 $-1/\\lambda_{min}$ 时的 $\\rho(T) \\to -\\infty$。对于任何 $\\rho_{target}  0$，在此区间内都存在一个唯一的根。可以构建一个合适的搜索区间 $[a, b]$，其中 $a$ 是一个大负值（例如 $-10^9\\ \\mathrm{s}$），$b$ 是一个比第一个极点略小的值（例如 $-1/\\lambda_{min} - 10^{-9}\\ \\mathrm{s}$）。对于这个区间，$g(a) \\approx -\\rho_{target} > 0$ 且 $g(b)$ 是一个很大的负值，因此 $g(b)  0$，这也保证了根的存在。\n\n实现将使用 `scipy.optimize.brentq` 函数，这是一个高效且稳健的、基于区间划定的求根器。它结合了二分法、割线法和逆二次插值法来寻找根，满足了问题的算法约束。该过程将首先根据 $\\rho_{target}$ 的符号确定合适的区间，然后调用 `brentq` 来寻找周期 $T$。结果将按要求格式化为六位小数。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.optimize import brentq\n\ndef solve():\n    \"\"\"\n    Solves for the reactor period T given delayed neutron data and reactivity rho.\n    \"\"\"\n\n    # Define the six-group U-235 thermal data\n    betas_6group = np.array([0.000215, 0.001424, 0.001274, 0.002568, 0.000748, 0.000273])\n    lambdas_6group = np.array([0.0124, 0.0305, 0.111, 0.301, 0.911, 2.98])\n\n    # Define the two-group aggregated data\n    betas_2group = np.array([0.0015, 0.0050])\n    lambdas_2group = np.array([0.08, 0.30])\n\n    # Define the test cases from the problem statement.\n    # Each tuple is (Lambda, betas, lambdas, rho)\n    test_cases = [\n        # Test Suite A\n        (1e-5, betas_6group, lambdas_6group, 0.0),\n        (1e-5, betas_6group, lambdas_6group, 0.0005),\n        (1e-5, betas_6group, lambdas_6group, -0.0005),\n        (1e-5, betas_6group, lambdas_6group, 0.0020),\n        # Test Suite B\n        (5e-5, betas_6group, lambdas_6group, 0.0005),\n        # Test Suite C\n        (1.5e-5, betas_2group, lambdas_2group, -0.0001),\n    ]\n\n    results = []\n    \n    for case in test_cases:\n        Lambda, betas, lambdas, rho_target = case\n\n        # Handle the special case for critical reactivity\n        if rho_target == 0.0:\n            results.append(\"inf\")\n            continue\n\n        # Define the residual function g(T) = rho(T) - rho_target = 0\n        # rho(T) = (Lambda / T) + sum(beta_i / (1 + lambda_i * T))\n        def residual_function(T):\n            if T == 0:\n                # Based on the limit T-0+, rho(T) is positive infinity.\n                # This should only be approached from one side in the root-finder.\n                return np.inf if T > 0 else -np.inf\n            \n            rho_T = (Lambda / T) + np.sum(betas / (1.0 + lambdas * T))\n            return rho_T - rho_target\n\n        try:\n            # Set up the bracket and solve based on the sign of rho_target\n            if rho_target > 0:\n                # For positive reactivity, the period T is positive.\n                # Bracket the root in the interval (0, infinity).\n                # Lower bound a: small positive T, giving large positive rho(T)\n                # Upper bound b: large positive T, giving rho(T) near 0\n                a = 1e-9  # Small positive number\n                b = 1e9   # Large positive number\n                period = brentq(residual_function, a, b, xtol=1e-12, rtol=1e-12)\n\n            else:  # rho_target  0\n                # For negative reactivity, the principal period T is negative.\n                # The root is in (-infinity, -1/lambda_min).\n                lambda_min = np.min(lambdas)\n                pole = -1.0 / lambda_min\n                \n                # Lower bound a: large negative T, giving rho(T) near 0\n                # Upper bound b: a value just below the first pole, giving large negative rho(T)\n                a = -1e9  # Large-magnitude negative number\n                b = pole - 1e-9 # T approaches the pole from the left.\n\n                period = brentq(residual_function, a, b, xtol=1e-12, rtol=1e-12)\n            \n            results.append(f\"{period:.6f}\")\n\n        except ValueError:\n            # This can happen if the bracket is not valid (f(a)*f(b) >= 0)\n            # or if the search interval is non-finite.\n            # This code's bracketing strategy is robust and should not fail.\n            results.append(\"solver_error\")\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "在建立了周期与反应性之间的关系后，我们必须考虑在实际应用中计算的精度问题。反应性方程中使用的核数据——例如缓发中子份额 $\\beta_i$ 和衰变常数 $\\lambda_i$——是通过实验确定的，因此具有固有的不确定性。此练习  将引导您应用不确定性传播原理，来量化这些数据不确定性如何影响从周期测量中推断出的反应性值。这种分析对于理解实验结果的可靠性和确定精确表征反应堆特性的最关键参数至关重要。",
            "id": "4240799",
            "problem": "一个在近临界状态下运行的热核反应堆可以很好地用具有 $m$ 个缓发中子群的反应堆点动力学模型来描述。中子布居 $n(t)$ 和缓发中子先驱核浓度 $C_i(t)$ 根据中子平衡和先驱核产生/衰变定律演化。在一次校准实验中，一个小的、恒定的正反应性被引入，反应堆稳定在一个指数模式，其测量周期为 $T$，因此中子布居满足 $n(t) \\propto \\exp(t/T)$。\n\n从点动力学框架和指数模式假设出发，推导连接推断反应性 $\\,\\rho\\,$ 与测量的逆周期 $\\,s = 1/T\\,$ 以及动力学参数 $\\{\\beta_i\\}_{i=1}^{m}$、$\\{\\lambda_i\\}_{i=1}^{m}$ 和瞬发中子代时间 $\\Lambda$ 的周期-反应性关系。然后，假设 $\\{\\beta_i\\}$、$\\{\\lambda_i\\}$ 和 $\\Lambda$ 具有相互独立的高斯不确定度，使用一阶全微分（线性）不确定度传播，推导推断反应性 $\\,\\rho\\,$ 的方差的闭式表达式，该表达式用偏导数和参数方差表示。\n\n对一个六群 ($m=6$) 热中子反应堆的以下科学真实数据进行数值评估：\n- 测量周期：$T = 20\\,\\text{s}$。\n- 瞬发中子代时间：$\\Lambda = 5.0 \\times 10^{-5}\\,\\text{s}$，单标准差不确定度 $\\sigma_{\\Lambda} = 1.0 \\times 10^{-5}\\,\\text{s}$。\n- 缓发中子份额和衰变常数（中心值）：\n  - $i=1$: $\\beta_1 = 2.50 \\times 10^{-4}$, $\\lambda_1 = 1.24 \\times 10^{-2}\\,\\text{s}^{-1}$。\n  - $i=2$: $\\beta_2 = 1.25 \\times 10^{-3}$, $\\lambda_2 = 3.05 \\times 10^{-2}\\,\\text{s}^{-1}$。\n  - $i=3$: $\\beta_3 = 1.25 \\times 10^{-3}$, $\\lambda_3 = 1.11 \\times 10^{-1}\\,\\text{s}^{-1}$。\n  - $i=4$: $\\beta_4 = 2.50 \\times 10^{-3}$, $\\lambda_4 = 3.01 \\times 10^{-1}\\,\\text{s}^{-1}$。\n  - $i=5$: $\\beta_5 = 7.50 \\times 10^{-4}$, $\\lambda_5 = 1.14\\,\\text{s}^{-1}$。\n  - $i=6$: $\\beta_6 = 2.50 \\times 10^{-4}$, $\\lambda_6 = 3.01\\,\\text{s}^{-1}$。\n- 单标准差不确定度：对每个 $i$，$\\sigma_{\\beta_i} = 0.03\\,\\beta_i$；对每个 $i$，$\\sigma_{\\lambda_i} = 0.02\\,\\lambda_i$。\n\n计算推断反应性的标准不确定度 $\\sigma_{\\rho}$。将最终数值结果四舍五入至三位有效数字。以 pcm (per cent mille) 为单位表示最终的反应性不确定度，其中 $1\\,\\text{pcm} = 10^{-5}$（即反应性是无量纲的，$1\\,\\text{pcm}$ 对应 $10^{-5}$ 的变化）。同时，解释哪些参数是 $\\,\\rho\\,$ 方差的主要贡献者，并从灵敏度和量级的角度说明原因。您最终报告的答案必须仅为以 pcm 为单位的 $\\sigma_{\\rho}$ 的数值。",
            "solution": "首先对用户提供的问题进行验证。\n\n### 步骤 1：提取已知条件\n- **模型**：具有 $m$ 个缓发中子群的反应堆点动力学。\n- **系统**：一个在近临界状态下运行的热核反应堆。\n- **过程**：引入一个小的、恒定的正反应性。\n- **观测**：反应堆稳定在一个指数模式，其测量周期为 $T$，使得中子布居为 $n(t) \\propto \\exp(t/T)$。\n- **定义**：逆周期 $s = 1/T$。推断反应性为 $\\rho$。动力学参数为 $\\{\\beta_i\\}_{i=1}^{m}$、$\\{\\lambda_i\\}_{i=1}^{m}$ 和瞬发中子代时间 $\\Lambda$。\n- **任务 1**：推导连接 $\\rho$ 与 $s$ 及动力学参数的周期-反应性关系。\n- **任务 2**：假设 $\\{\\beta_i\\}$、$\\{\\lambda_i\\}$ 和 $\\Lambda$ 的不确定度是相互独立的高斯不确定度，使用一阶不确定度传播推导推断反应性 $\\rho$ 的方差 $\\sigma_\\rho^2$ 的闭式表达式。\n- **任务 3**：根据给定数据，数值评估标准不确定度 $\\sigma_\\rho$。\n- **任务 4**：解释 $\\rho$ 方差的主要贡献者。\n- **数值数据 ($m=6$)：**\n  - 测量周期：$T = 20\\,\\text{s}$。\n  - 瞬发中子代时间：$\\Lambda = 5.0 \\times 10^{-5}\\,\\text{s}$。\n  - $\\Lambda$ 的不确定度：$\\sigma_{\\Lambda} = 1.0 \\times 10^{-5}\\,\\text{s}$ (一个标准差)。\n  - 缓发中子份额和衰变常数 (中心值)：\n    - $i=1$: $\\beta_1 = 2.50 \\times 10^{-4}$, $\\lambda_1 = 1.24 \\times 10^{-2}\\,\\text{s}^{-1}$。\n    - $i=2$: $\\beta_2 = 1.25 \\times 10^{-3}$, $\\lambda_2 = 3.05 \\times 10^{-2}\\,\\text{s}^{-1}$。\n    - $i=3$: $\\beta_3 = 1.25 \\times 10^{-3}$, $\\lambda_3 = 1.11 \\times 10^{-1}\\,\\text{s}^{-1}$。\n    - $i=4$: $\\beta_4 = 2.50 \\times 10^{-3}$, $\\lambda_4 = 3.01 \\times 10^{-1}\\,\\text{s}^{-1}$。\n    - $i=5$: $\\beta_5 = 7.50 \\times 10^{-4}$, $\\lambda_5 = 1.14\\,\\text{s}^{-1}$。\n    - $i=6$: $\\beta_6 = 2.50 \\times 10^{-4}$, $\\lambda_6 = 3.01\\,\\text{s}^{-1}$。\n  - $\\beta_i$ 和 $\\lambda_i$ 的不确定度：对每个群 $i$，$\\sigma_{\\beta_i} = 0.03\\,\\beta_i$ 和 $\\sigma_{\\lambda_i} = 0.02\\,\\lambda_i$。\n- **输出要求**：\n  - 将 $\\sigma_\\rho$ 的最终数值结果四舍五入至三位有效数字。\n  - 以 pcm (per cent mille) 为单位表示最终的反应性不确定度，其中 $1\\,\\text{pcm} = 10^{-5}$。\n  - 最终报告的答案必须仅为以 pcm 为单位的 $\\sigma_\\rho$ 的数值。\n\n### 步骤 2：使用提取的已知条件进行验证\n1.  **科学依据**：该问题基于核反应堆动力学的标准点动力学模型，这是反应堆物理学的基石。为热中子反应堆提供的 $^{235}$U 数据，包括 $\\Lambda$ 和六群缓发中子参数，在科学上是真实的。通过周期测量来推断反应性的情景是一种标准的实验技术。该问题不含伪科学或推测。\n2.  **适定性**：问题陈述清晰，包含了推导所需表达式和计算数值结果的所有必要信息。存在唯一且稳定的解。\n3.  **客观性**：问题以精确、定量和无偏见的语言表述。\n\n### 步骤 3：结论与行动\n该问题科学合理、自洽且适定。未检测到任何缺陷。可以进行求解。\n\n### 求解推导\n该问题要求推导周期-反应性关系，构建其不确定度公式，并进行数值评估。\n\n**1. 周期-反应性关系的推导**\n\n中子布居 $n(t)$ 和第 $i$ 群缓发中子先驱核浓度 $C_i(t)$ 的点动力学方程为：\n$$\n\\frac{dn(t)}{dt} = \\frac{\\rho - \\beta}{\\Lambda} n(t) + \\sum_{i=1}^{m} \\lambda_i C_i(t)\n$$\n$$\n\\frac{dC_i(t)}{dt} = \\frac{\\beta_i}{\\Lambda} n(t) - \\lambda_i C_i(t), \\quad \\text{for } i = 1, \\dots, m\n$$\n其中 $\\beta = \\sum_{i=1}^{m} \\beta_i$ 是总缓发中子份额。\n\n问题陈述反应堆处于一个稳定的指数周期 $T$，所以中子布居和先驱核浓度的形式为：\n$$\nn(t) = n_0 \\exp(st), \\quad C_i(t) = C_{i0} \\exp(st)\n$$\n其中 $s = 1/T$ 是逆周期。时间导数为 $\\frac{dn}{dt} = sn(t)$ 和 $\\frac{dC_i}{dt} = sC_i(t)$。\n\n将这些形式代入先驱核方程得到：\n$$\nsC_i(t) = \\frac{\\beta_i}{\\Lambda} n(t) - \\lambda_i C_i(t)\n$$\n$$\n(s + \\lambda_i) C_i(t) = \\frac{\\beta_i}{\\Lambda} n(t) \\implies C_i(t) = \\frac{\\beta_i}{\\Lambda(s + \\lambda_i)} n(t)\n$$\n接下来，将导数 $\\frac{dn}{dt}$ 和 $C_i(t)$ 的表达式代入中子平衡方程：\n$$\nsn(t) = \\frac{\\rho - \\beta}{\\Lambda} n(t) + \\sum_{i=1}^{m} \\lambda_i \\left( \\frac{\\beta_i}{\\Lambda(s + \\lambda_i)} n(t) \\right)\n$$\n两边同除以 $n(t)$（非零）并乘以 $\\Lambda$：\n$$\ns\\Lambda = \\rho - \\beta + \\sum_{i=1}^{m} \\frac{\\lambda_i \\beta_i}{s + \\lambda_i}\n$$\n解出反应性 $\\rho$：\n$$\n\\rho = s\\Lambda + \\beta - \\sum_{i=1}^{m} \\frac{\\lambda_i \\beta_i}{s + \\lambda_i}\n$$\n代入 $\\beta = \\sum_{i=1}^{m} \\beta_i$ 并合并求和项：\n$$\n\\rho = s\\Lambda + \\sum_{i=1}^{m} \\left( \\beta_i - \\frac{\\lambda_i \\beta_i}{s + \\lambda_i} \\right) = s\\Lambda + \\sum_{i=1}^{m} \\beta_i \\left( \\frac{s + \\lambda_i - \\lambda_i}{s + \\lambda_i} \\right)\n$$\n这简化为标准的逆时方程，即所求的周期-反应性关系：\n$$\n\\rho(s, \\Lambda, \\{\\beta_i\\}, \\{\\lambda_i\\}) = s\\Lambda + \\sum_{i=1}^{m} \\frac{s \\beta_i}{s + \\lambda_i}\n$$\n\n**2. 反应性方差的推导**\n\n反应性 $\\rho$ 是参数 $\\Lambda$、$\\{\\beta_i\\}_{i=1}^m$ 和 $\\{\\lambda_i\\}_{i=1}^m$ 的函数。周期 $T$ 的测量提供了一个固定的 $s=1/T$ 值。问题陈述动力学参数的不确定度是相互独立的。在此假设下，$\\rho$ 的方差，记为 $\\sigma_\\rho^2$，可以使用一阶线性不确定度传播公式计算：\n$$\n\\sigma_\\rho^2 = \\left(\\frac{\\partial \\rho}{\\partial \\Lambda}\\right)^2 \\sigma_\\Lambda^2 + \\sum_{i=1}^{m} \\left(\\frac{\\partial \\rho}{\\partial \\beta_i}\\right)^2 \\sigma_{\\beta_i}^2 + \\sum_{i=1}^{m} \\left(\\frac{\\partial \\rho}{\\partial \\lambda_i}\\right)^2 \\sigma_{\\lambda_i}^2\n$$\n所需的偏导数（灵敏度）为：\n-   对 $\\Lambda$ 求偏导：\n    $$\n    \\frac{\\partial \\rho}{\\partial \\Lambda} = s\n    $$\n-   对特定群 $i$ 的 $\\beta_i$ 求偏导：\n    $$\n    \\frac{\\partial \\rho}{\\partial \\beta_i} = \\frac{s}{s + \\lambda_i}\n    $$\n-   对特定群 $i$ 的 $\\lambda_i$ 求偏导：\n    $$\n    \\frac{\\partial \\rho}{\\partial \\lambda_i} = \\frac{\\partial}{\\partial \\lambda_i} \\left( \\frac{s \\beta_i}{s + \\lambda_i} \\right) = s \\beta_i (-1)(s + \\lambda_i)^{-2} = -\\frac{s \\beta_i}{(s + \\lambda_i)^2}\n    $$\n将这些导数代入方差公式，得到闭式表达式：\n$$\n\\sigma_\\rho^2 = s^2 \\sigma_\\Lambda^2 + \\sum_{i=1}^{m} \\left(\\frac{s}{s + \\lambda_i}\\right)^2 \\sigma_{\\beta_i}^2 + \\sum_{i=1}^{m} \\left(-\\frac{s \\beta_i}{(s + \\lambda_i)^2}\\right)^2 \\sigma_{\\lambda_i}^2\n$$\n$$\n\\sigma_\\rho^2 = s^2 \\sigma_\\Lambda^2 + s^2 \\sum_{i=1}^{m} \\frac{\\sigma_{\\beta_i}^2}{(s + \\lambda_i)^2} + s^2 \\sum_{i=1}^{m} \\frac{\\beta_i^2 \\sigma_{\\lambda_i}^2}{(s + \\lambda_i)^4}\n$$\n\n**3. 数值评估**\n\n问题给定 $T = 20\\,\\text{s}$，所以逆周期为 $s = 1/20\\,\\text{s}^{-1} = 0.05\\,\\text{s}^{-1}$。给定的不确定度为 $\\sigma_\\Lambda = 1.0 \\times 10^{-5}\\,\\text{s}$、$\\sigma_{\\beta_i} = 0.03\\,\\beta_i$ 和 $\\sigma_{\\lambda_i} = 0.02\\,\\lambda_i$。群数为 $m=6$。\n\n分别计算对方差 $\\sigma_\\rho^2$ 有贡献的三个项。\n\n-   **来自 $\\Lambda$ 不确定度的贡献 ($V_\\Lambda$)**：\n    $$\n    V_\\Lambda = s^2 \\sigma_\\Lambda^2 = (0.05\\,\\text{s}^{-1})^2 (1.0 \\times 10^{-5}\\,\\text{s})^2 = (2.5 \\times 10^{-3}\\,\\text{s}^{-2})(1.0 \\times 10^{-10}\\,\\text{s}^2) = 2.5 \\times 10^{-13}\n    $$\n-   **来自 $\\{\\beta_i\\}$ 不确定度的贡献 ($V_\\beta$)**：\n    $$\n    V_\\beta = s^2 \\sum_{i=1}^{6} \\frac{(0.03 \\beta_i)^2}{(s + \\lambda_i)^2} = s^2 (0.03)^2 \\sum_{i=1}^{6} \\left(\\frac{\\beta_i}{s + \\lambda_i}\\right)^2\n    $$\n    每一群的 $(\\frac{\\beta_i}{s+\\lambda_i})^2$ 项为：\n    $i=1: 1.6051 \\times 10^{-5}$, $i=2: 2.4112 \\times 10^{-4}$, $i=3: 6.0279 \\times 10^{-5}$, $i=4: 5.0729 \\times 10^{-5}$, $i=5: 3.9722 \\times 10^{-7}$, $i=6: 6.6747 \\times 10^{-9}$。\n    求和为 $\\sum_{i=1}^{6} (\\dots) \\approx 3.6858 \\times 10^{-4}$。\n    $$\n    V_\\beta = (0.05)^2 (0.03)^2 (3.6858 \\times 10^{-4}) = (2.5 \\times 10^{-3})(9 \\times 10^{-4})(3.6858 \\times 10^{-4}) \\approx 8.293 \\times 10^{-10}\n    $$\n-   **来自 $\\{\\lambda_i\\}$ 不确定度的贡献 ($V_\\lambda$)**：\n    $$\n    V_\\lambda = s^2 \\sum_{i=1}^{6} \\frac{\\beta_i^2 (0.02 \\lambda_i)^2}{(s + \\lambda_i)^4} = s^2 (0.02)^2 \\sum_{i=1}^{6} \\left(\\frac{\\beta_i \\lambda_i}{(s + \\lambda_i)^2}\\right)^2\n    $$\n    每一群的 $(\\frac{\\beta_i \\lambda_i}{(s+\\lambda_i)^2})^2$ 项为：\n    $i=1: 6.3384 \\times 10^{-7}$, $i=2: 3.4613 \\times 10^{-5}$, $i=3: 2.8652 \\times 10^{-5}$, $i=4: 3.7306 \\times 10^{-5}$, $i=5: 3.6454 \\times 10^{-7}$, $i=6: 6.4587 \\times 10^{-9}$。\n    求和为 $\\sum_{i=1}^{6} (\\dots) \\approx 1.0158 \\times 10^{-4}$。\n    $$\n    V_\\lambda = (0.05)^2 (0.02)^2 (1.0158 \\times 10^{-4}) = (2.5 \\times 10^{-3})(4 \\times 10^{-4})(1.0158 \\times 10^{-4}) \\approx 1.016 \\times 10^{-10}\n    $$\n-   **总方差和标准不确定度**：\n    总方差是各项贡献之和：\n    $$\n    \\sigma_\\rho^2 = V_\\Lambda + V_\\beta + V_\\lambda = (2.5 \\times 10^{-13}) + (8.293 \\times 10^{-10}) + (1.016 \\times 10^{-10}) \\approx 9.3115 \\times 10^{-10}\n    $$\n    标准不确定度是方差的平方根：\n    $$\n    \\sigma_\\rho = \\sqrt{9.3115 \\times 10^{-10}} \\approx 3.0515 \\times 10^{-5}\n    $$\n问题要求以 pcm (per cent mille) 为单位表示结果，其中 $1\\,\\text{pcm} = 10^{-5}$。\n$$\n\\sigma_\\rho \\approx 3.0515 \\,\\text{pcm}\n$$\n四舍五入到三位有效数字，标准不确定度为 $3.05\\,\\text{pcm}$。\n\n**4. 主要不确定度贡献者的解释**\n\n为了理解哪些参数主导了推断反应性 $\\rho$ 的不确定度，我们比较它们对总方差 $\\sigma_\\rho^2 \\approx 9.31 \\times 10^{-10}$ 的贡献大小：\n-   来自 $\\Lambda$ 的贡献：$V_\\Lambda = 2.5 \\times 10^{-13}$ ($\\approx 0.03\\%$)。\n-   来自 $\\{\\beta_i\\}$ 的贡献：$V_\\beta = 8.29 \\times 10^{-10}$ ($\\approx 89.0\\%$)。\n-   来自 $\\{\\lambda_i\\}$ 的贡献：$V_\\lambda = 1.02 \\times 10^{-10}$ ($\\approx 10.9\\%$)。\n\n分析清楚地表明，推断反应性 $\\rho$ 的不确定度绝大多数由缓发中子份额 $\\{\\beta_i\\}$ 的不确定度主导。衰变常数 $\\{\\lambda_i\\}$ 的不确定度贡献要小得多，而瞬发中子代时间 $\\Lambda$ 的贡献可以忽略不计。其原因在于对于给定的长周期 ($T=20\\,\\text{s}$)，逆时方程中各项的灵敏度和量级。\n\n1.  **$\\beta_i$ 不确定度的主导作用**：对于长周期，$s = 0.05\\,\\text{s}^{-1}$ 很小。反应性主要由缓发中子项决定，$\\rho \\approx \\sum_i \\frac{s \\beta_i}{s + \\lambda_i}$。该项与 $\\beta_i$ 成线性比例。灵敏度 $\\frac{\\partial\\rho}{\\partial\\beta_i} = \\frac{s}{s+\\lambda_i}$ 对于长寿命先驱核群（小的 $\\lambda_i$）约为 1。因此，$\\beta_i$ 的 $3\\%$ 相对不确定度几乎直接导致 $\\rho$ 的显著不确定度。\n\n2.  **$\\lambda_i$ 不确定度的较小影响**：$\\rho$ 对 $\\lambda_i$ 的灵敏度为 $\\frac{\\partial\\rho}{\\partial\\lambda_i} = -\\frac{s \\beta_i}{(s+\\lambda_i)^2}$。与对 $\\beta_i$ 的灵敏度相比，这里多了一个因子 $-\\frac{\\lambda_i}{s+\\lambda_i}$。由于该因子的绝对值总是小于 1，因此对 $\\lambda_i$ 的灵敏度天生就小于对 $\\beta_i$ 的灵敏度。这种灵敏度的物理抑制，加上相对不确定度稍小（$\\lambda_i$ 为 $2\\%$ vs $\\beta_i$ 为 $3\\%$），导致其对总方差的贡献小得多。\n\n3.  **$\\Lambda$ 不确定度的可忽略影响**：瞬发中子寿命的贡献通过项 $s\\Lambda$ 体现。对于长周期，$s$ 很小，使得瞬发项 $s\\Lambda = (0.05)(5 \\times 10^{-5}) = 2.5 \\times 10^{-6}$ 仅占总反应性 $\\rho \\approx 1.76 \\times 10^{-3}$ 的一小部分。灵敏度 $\\frac{\\partial\\rho}{\\partial\\Lambda} = s$ 很小，因此即使 $\\Lambda$ 的相对不确定度很大（本例中为 $20\\%$），其对 $\\rho$ 的绝对不确定度贡献也微乎其微。\n\n总而言之，对于基于长反应堆周期的反应性测量，其精度主要受限于缓发中子份额核数据的准确性。",
            "answer": "$$\n\\boxed{3.05}\n$$"
        },
        {
            "introduction": "反应堆中一次阶跃反应性引入会引发一个复杂的动态响应，其特征是在不同时间尺度上出现不同的现象。初始的功率快速变化称为“瞬发跳变”，而长期的、稳定的指数变化则由“渐近周期”定义。这两种现象都是由同一个潜在的反应性变化直接导致的。在此练习  中，您将从这两种不同的可观测现象中独立推断出反应性阶跃的大小。通过比较这两个结果，我们能够有力地验证点堆动力学模型的一致性，并加深对瞬发中子和缓发中子如何共同决定反应堆瞬态行为的理解。",
            "id": "4240813",
            "problem": "一位研究人员正在使用点堆动力学方程（PKE）来表征一个热中子研究反应堆，以研究其周期-反应性关系。在时间 $t=0$ 时进行一次阶跃反应性引入后，立即测量得到瞬发跳跃因子 $J$，该因子是反应性引入后瞬间与引入前瞬间的反应堆功率之比。随后，在缓发中子瞬态过程稳定后，反应堆表现出指数形式的功率演化，测量得到的渐近反应堆周期为 $T$（单位为秒），因此功率 $P(t)$ 的行为符合 $P(t) \\propto \\exp(\\omega t)$，其中 $\\omega = 1/T$。反应堆可能经历正或负的反应性变化，因此周期 $T$ 也可能为正或为负。目标是利用逆动力学推理，分别从瞬发跳跃 $J$ 和渐近周期 $T$ 来确定阶跃反应性引入的量值 $ \\Delta \\rho $，然后使用从 PKE 推导出的倒时方程来验证这两个独立推断结果的一致性。\n\n您的程序必须基于反应堆动力学的第一性原理来实现以下内容，不得在本说明中预先假设任何目标公式：\n\n- 使用包含 $m$ 组缓发中子先驱核的点堆动力学方程基本形式。这些方程由中子布居数 $n(t)$ 和先驱核浓度 $C_i(t)$（$i=1,\\dots,m$）定义，并考虑在 $ t=0 $ 时引入一个恒定的阶跃反应性 $ \\Delta \\rho $。缓发中子数据由分组的缓发中子份额 $ \\beta_i $（无量纲）和衰变常数 $ \\lambda_i $（单位为 $\\text{s}^{-1}$）指定。有效缓发中子份额为 $ \\beta_{\\text{eff}} = \\sum_{i=1}^{m} \\beta_i $。瞬发中子代时间为 $ \\Lambda $（单位为 $\\text{s}$）。\n- 从测量的瞬发跳跃因子 $ J $ 推断 $ \\Delta \\rho $。\n- 当功率呈渐近指数形式时，通过使用 PKE 所隐含的倒时方程，从测量的渐近周期 $ T $ 推断 $ \\Delta \\rho $。\n- 如果两个推断出的反应性之间的绝对差值不大于指定的容差 $ \\varepsilon $（无量纲），则声明这两个推断结果是一致的。使用 $ \\varepsilon = 5 \\times 10^{-6} $。\n\n使用以下代表热中子 $^{235}\\text{U}$ 系统的、科学上符合实际且广泛使用的六组缓发中子数据：\n- 组份额 $ \\beta_i $: $ [0.000215,\\,0.001424,\\,0.001274,\\,0.002568,\\,0.000748,\\,0.000273] $，因此 $ \\beta_{\\text{eff}} = 0.006502 $。\n- 组衰变常数 $ \\lambda_i $ (单位 $\\text{s}^{-1}$): $ [0.0124,\\,0.0305,\\,0.111,\\,0.301,\\,1.14,\\,3.01] $。\n- 瞬发中子代时间 $ \\Lambda = 1.0 \\times 10^{-4} \\text{ s} $。\n\n您的程序必须处理以下由测量的瞬发跳跃因子 $J$ 和渐近周期 $T$（单位为秒）组成的测试套件，每个测试用例代表一个不同的工况：\n1. 正的次瞬发临界阶跃：$ J = 1.858 $ 且 $ T = 7.14 \\text{ s} $。\n2. 从下方接近瞬发临界：$ J = 32.15 $ 且 $ T = 0.2817 \\text{ s} $。\n3. 负阶跃（功率下降）：$ J = 0.866 $ 且 $ T = -84.88 \\text{ s} $。\n4. 非常小的正阶跃（周期斜率接近于零）：$ J = 1.00154 $ 且 $ T = 8488.0 \\text{ s} $。\n\n对于每个测试用例，您的程序必须：\n- 使用适用于阶跃引入的逆动力学逻辑，从瞬发跳跃 $ J $ 计算 $ \\Delta \\rho_{\\text{jump}} $。\n- 使用测量的 $ \\omega = 1/T $ 以及指定的 $ \\beta_i $、$ \\lambda_i $ 和 $ \\Lambda $，通过计算倒时方程来计算 $ \\Delta \\rho_{\\text{inhour}} $。\n- 确定一个布尔一致性标志 $ \\text{cons} $。如果 $ |\\Delta \\rho_{\\text{jump}} - \\Delta \\rho_{\\text{inhour}}| \\le \\varepsilon $，则其值为 $ \\text{True} $，否则为 $ \\text{False} $。\n\n物理单位和输出要求：\n- 周期 $ T $ 必须以秒为单位，其符号表示增长（$ T > 0 $）或衰减（$ T  0 $）。\n- 反应性 $ \\Delta \\rho $ 必须以无量纲小数形式报告（不要使用百分号）。\n- 您的程序应生成单行输出，其中包含一个由方括号括起来的逗号分隔列表。列表中的每个元素都是一个形式为 $ [\\Delta \\rho_{\\text{jump}},\\,\\Delta \\rho_{\\text{inhour}},\\,\\text{cons}] $ 的子列表，对应于相应的测试用例，且顺序与上文相同。例如，输出必须类似于 $ [[a_1,b_1,c_1],[a_2,b_2,c_2],\\dots] $，其中 $ a_i $ 和 $ b_i $ 的位置是实际数值，$ c_i $ 的位置是布尔值。",
            "solution": "此问题被评定为有效。它在成熟的核反应堆动力学理论中有科学依据，提法得当，数据充分且一致，并以客观、正式的语言表述。解决方案将首先从第一性原理推导必要的物理关系，然后将这些关系应用于所提供的数据。\n\n反应堆的行为由描述中子布居数 $n(t)$ 和 $m$ 组缓发中子先驱核浓度 $C_i(t)$ 的点堆动力学方程（PKE）决定：\n$$\n\\frac{dn(t)}{dt} = \\frac{\\rho(t) - \\beta_{\\text{eff}}}{\\Lambda} n(t) + \\sum_{i=1}^{m} \\lambda_i C_i(t)\n$$\n$$\n\\frac{dC_i(t)}{dt} = \\frac{\\beta_i}{\\Lambda} n(t) - \\lambda_i C_i(t), \\quad \\text{for } i=1, \\dots, m\n$$\n其中 $\\rho(t)$ 是反应性，$\\Lambda$ 是瞬发中子代时间，$\\beta_i$ 是第 $i$ 组的缓发中子份额，$\\lambda_i$ 是相应的衰变常数，而 $\\beta_{\\text{eff}} = \\sum_{i=1}^{m} \\beta_i$ 是总有效缓发中子份额。问题指定在时间 $t=0$ 时引入量值为 $\\Delta\\rho$ 的阶跃反应性，因此对于 $t \\ge 0$，有 $\\rho(t) = \\Delta\\rho$。假设在 $t  0$ 时反应堆处于临界稳态，此时 $\\rho(t0)=0$，$\\frac{dn}{dt}=0$ 且 $\\frac{dC_i}{dt}=0$。\n\n**1. 从瞬发跳跃推断反应性 ($ \\Delta \\rho_{\\text{jump}} $)**\n\n瞬发跳跃是指在反应性引入后，中子布居数立即发生的快速变化。这一变化发生在由 $\\Lambda$ 决定的时间尺度上，该尺度远短于先驱核衰变的时间尺度 $1/\\lambda_i$。因此，先驱核浓度 $C_i(t)$ 不会瞬时改变：$C_i(0^+) = C_i(0^-)$。\n\n对于 $t=0^-$ 时的初始临界状态，我们有 $\\frac{dn}{dt}=0$，$\\rho=0$ 且 $n(t) = n_0$。中子布居数的 PKE 方程变为：\n$$\n0 = \\frac{0 - \\beta_{\\text{eff}}}{\\Lambda} n_0 + \\sum_{i=1}^{m} \\lambda_i C_i(0^-)\n$$\n这意味着初始的缓发中子源为 $\\sum_{i=1}^{m} \\lambda_i C_i(0^-) = \\frac{\\beta_{\\text{eff}}}{\\Lambda} n_0$。\n\n在 $t=0^+$ 阶跃引入后瞬间，反应性为 $\\Delta\\rho$，中子布居数为 $n(0^+)$，且缓发中子源项保持不变，即 $\\sum \\lambda_i C_i(0^+) = \\sum \\lambda_i C_i(0^-) = \\frac{\\beta_{\\text{eff}}}{\\Lambda} n_0$。在 $t=0^+$ 时的中子布居数方程为：\n$$\n\\left. \\frac{dn}{dt} \\right|_{t=0^+} = \\frac{\\Delta\\rho - \\beta_{\\text{eff}}}{\\Lambda} n(0^+) + \\frac{\\beta_{\\text{eff}}}{\\Lambda} n_0\n$$\n瞬发跳跃近似假设瞬发中子寿命 $\\Lambda$ 小到可以忽略（$\\Lambda \\to 0$）。为了使时间导数 $\\frac{dn}{dt}$ 保持有限，方程 $\\Lambda \\frac{dn}{dt} = (\\Delta\\rho - \\beta_{\\text{eff}})n(t) + \\Lambda\\sum \\lambda_i C_i(t)$ 的右侧必须为零。将此应用于 $t=0^+$（此时 $n(t) = n(0^+)$ 且源项为 $\\frac{\\beta_{\\text{eff}}}{\\Lambda}n_0$）：\n$$\n0 \\approx (\\Delta\\rho - \\beta_{\\text{eff}}) n(0^+) + \\beta_{\\text{eff}} n_0\n$$\n对比率 $n(0^+)/n_0$（即瞬发跳跃因子 $J$）进行整理：\n$$\n(\\beta_{\\text{eff}} - \\Delta\\rho) n(0^+) = \\beta_{\\text{eff}} n_0 \\implies J = \\frac{n(0^+)}{n_0} = \\frac{\\beta_{\\text{eff}}}{\\beta_{\\text{eff}} - \\Delta\\rho}\n$$\n为了从测量的跳跃因子 $J$ 求出反应性 $\\Delta\\rho$，我们反解此关系：\n$$\nJ(\\beta_{\\text{eff}} - \\Delta\\rho) = \\beta_{\\text{eff}} \\implies J\\beta_{\\text{eff}} - J\\Delta\\rho = \\beta_{\\text{eff}} \\implies J\\Delta\\rho = J\\beta_{\\text{eff}} - \\beta_{\\text{eff}}\n$$\n$$\n\\Delta\\rho_{\\text{jump}} = \\frac{\\beta_{\\text{eff}}(J - 1)}{J}\n$$\n此公式将用于计算第一个反应性推断值。\n\n**2. 从渐近周期推断反应性 ($ \\Delta \\rho_{\\text{inhour}} $)**\n\n在瞬发跳跃和初始瞬态衰减之后，反应堆功率以及所有状态变量都以一个稳定的渐近周期 $T$ 演化。我们可以写作 $n(t) = n_a e^{\\omega t}$ 和 $C_i(t) = C_{i,a} e^{\\omega t}$，其中 $\\omega = 1/T$ 是逆周期或稳定根。将这些形式代入 $\\rho(t) = \\Delta\\rho$ 的 PKE 中：\n\n从第 $i$ 组的先驱核方程出发：\n$$\n\\frac{d}{dt}(C_{i,a} e^{\\omega t}) = \\frac{\\beta_i}{\\Lambda} (n_a e^{\\omega t}) - \\lambda_i (C_{i,a} e^{\\omega t})\n$$\n$$\n\\omega C_{i,a} e^{\\omega t} = \\frac{\\beta_i}{\\Lambda} n_a e^{\\omega t} - \\lambda_i C_{i,a} e^{\\omega t}\n$$\n两边同除以 $e^{\\omega t}$ 并求解 $C_{i,a}$，得到先驱核振幅与中子布居数振幅之间的渐近关系：\n$$\nC_{i,a}(\\omega + \\lambda_i) = \\frac{\\beta_i}{\\Lambda} n_a \\implies C_{i,a} = \\frac{\\beta_i n_a}{\\Lambda(\\omega + \\lambda_i)}\n$$\n接下来，将 $n(t)$ 和 $C_i(t)$ 的渐近形式代入中子布居数方程：\n$$\n\\frac{d}{dt}(n_a e^{\\omega t}) = \\frac{\\Delta\\rho - \\beta_{\\text{eff}}}{\\Lambda} (n_a e^{\\omega t}) + \\sum_{i=1}^{m} \\lambda_i (C_{i,a} e^{\\omega t})\n$$\n$$\n\\omega n_a e^{\\omega t} = \\frac{\\Delta\\rho - \\beta_{\\text{eff}}}{\\Lambda} n_a e^{\\omega t} + e^{\\omega t} \\sum_{i=1}^{m} \\lambda_i C_{i,a}\n$$\n两边同除以 $n_a e^{\\omega t}$ 并代入 $C_{i,a}$ 的表达式：\n$$\n\\omega = \\frac{\\Delta\\rho - \\beta_{\\text{eff}}}{\\Lambda} + \\frac{1}{n_a} \\sum_{i=1}^{m} \\lambda_i \\left( \\frac{\\beta_i n_a}{\\Lambda(\\omega + \\lambda_i)} \\right)\n$$\n$$\n\\omega = \\frac{\\Delta\\rho - \\beta_{\\text{eff}}}{\\Lambda} + \\frac{1}{\\Lambda} \\sum_{i=1}^{m} \\frac{\\lambda_i \\beta_i}{\\omega + \\lambda_i}\n$$\n这个方程被称为倒时方程（inhour equation），它将反应性 $\\Delta\\rho$ 与稳定逆周期 $\\omega$ 关联起来。我们求解 $\\Delta\\rho$：\n$$\n\\Delta\\rho = \\Lambda\\omega + \\beta_{\\text{eff}} - \\sum_{i=1}^{m} \\frac{\\lambda_i \\beta_i}{\\omega + \\lambda_i} = \\Lambda\\omega + \\sum_{i=1}^{m} \\left( \\beta_i - \\frac{\\lambda_i \\beta_i}{\\omega + \\lambda_i} \\right)\n$$\n$$\n\\Delta\\rho = \\Lambda\\omega + \\sum_{i=1}^{m} \\beta_i \\left( \\frac{\\omega + \\lambda_i - \\lambda_i}{\\omega + \\lambda_i} \\right) = \\Lambda\\omega + \\sum_{i=1}^{m} \\frac{\\omega \\beta_i}{\\omega + \\lambda_i}\n$$\n用于第二次反应性推断的最终公式为：\n$$\n\\Delta\\rho_{\\text{inhour}} = \\Lambda\\omega + \\omega \\sum_{i=1}^{m} \\frac{\\beta_i}{\\omega + \\lambda_i}\n$$\n\n**3. 计算步骤**\n\n程序将实现这两个推导出的公式。对于由一对测量值 $(J, T)$ 定义的每个测试用例，执行以下步骤：\n- 计算有效缓发中子份额 $\\beta_{\\text{eff}}$，其值为给定组份额 $\\beta_i$ 的总和。\n- 使用公式 $\\Delta\\rho_{\\text{jump}} = \\beta_{\\text{eff}} (J-1)/J$ 计算 $\\Delta\\rho_{\\text{jump}}$。\n- 计算逆周期 $\\omega$，其值为 $\\omega = 1/T$。\n- 使用上文推导的倒时方程公式计算 $\\Delta\\rho_{\\text{inhour}}$，计算时对所有 $m=6$ 组缓发中子进行求和。\n- 比较两个反应性值。如果 $|\\Delta\\rho_{\\text{jump}} - \\Delta\\rho_{\\text{inhour}}| \\le \\varepsilon$（其中容差 $\\varepsilon = 5 \\times 10^{-6}$），则一致性标志 $\\text{cons}$ 设置为 $\\text{True}$，否则设置为 $\\text{False}$。\n- 对于每个测试用例，存储三元组 $[\\Delta\\rho_{\\text{jump}}, \\Delta\\rho_{\\text{inhour}}, \\text{cons}]$。\n最后，按要求格式化并打印结果列表。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the reactor kinetics problem by inferring reactivity from prompt jump and\n    asymptotic period, and then checks for consistency.\n    \"\"\"\n    \n    # Define the delayed neutron data for 235U thermal fission.\n    # Group fractions beta_i (dimensionless)\n    beta_i = np.array([0.000215, 0.001424, 0.001274, 0.002568, 0.000748, 0.000273])\n    \n    # Group decay constants lambda_i (in s^-1)\n    lambda_i = np.array([0.0124, 0.0305, 0.111, 0.301, 1.14, 3.01])\n    \n    # Prompt neutron generation time (in s)\n    Lambda = 1.0e-4\n    \n    # Total effective delayed neutron fraction (dimensionless)\n    beta_eff = np.sum(beta_i)\n    \n    # Consistency tolerance (dimensionless)\n    epsilon = 5.0e-6\n\n    # Define the test cases from the problem statement.\n    # Each tuple is (prompt_jump_factor_J, asymptotic_period_T_in_s)\n    test_cases = [\n        (1.858, 7.14),       # Positive subprompt-critical step\n        (32.15, 0.2817),     # Near prompt-critical from below\n        (0.866, -84.88),     # Negative step\n        (1.00154, 8488.0),   # Very small positive step\n    ]\n\n    results = []\n    for J, T in test_cases:\n        # 1. Infer reactivity from the prompt jump factor J.\n        # This uses the formula derived from the prompt jump approximation (Lambda - 0).\n        # Delta_rho_jump = beta_eff * (J - 1) / J\n        delta_rho_jump = beta_eff * (J - 1.0) / J\n\n        # 2. Infer reactivity from the asymptotic period T.\n        # This uses the inhour equation.\n        # omega is the inverse period (in s^-1).\n        omega = 1.0 / T\n        \n        # Calculate the sum term in the inhour equation.\n        # sum_{i} (omega * beta_i / (omega + lambda_i))\n        inhour_sum_term = np.sum(omega * beta_i / (omega + lambda_i))\n        \n        # Inhour equation: Delta_rho_inhour = Lambda * omega + sum_term\n        delta_rho_inhour = Lambda * omega + inhour_sum_term\n\n        # 3. Determine consistency.\n        # The consistency flag 'cons' is True if the absolute difference is within\n        # the specified tolerance epsilon, and False otherwise.\n        is_consistent = np.abs(delta_rho_jump - delta_rho_inhour) = epsilon\n        \n        results.append([delta_rho_jump, delta_rho_inhour, is_consistent])\n\n    # Format the output string to match the required format: [[a,b,c],[d,e,f],...].\n    # str(list) introduces spaces, so we remove them for a compact representation.\n    formatted_sublists = [str(sublist).replace(\" \", \"\") for sublist in results]\n    final_output = f\"[{','.join(formatted_sublists)}]\"\n\n    # Final print statement in the exact required format.\n    print(final_output)\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "The drift-flux model provides a powerful framework for relating phase-averaged quantities in two-phase flow. This first practice focuses on a foundational skill: rearranging the core drift-flux relation to solve for the void fraction, $\\alpha$, given the volumetric fluxes and model parameters. Critically, this exercise  also challenges you to determine the conditions for physical admissibility, ensuring that the model's predictions respect the fundamental constraint that $0 \\le \\alpha \\le 1$.",
            "id": "4223264",
            "problem": "A vertically oriented subchannel in a Pressurized Water Reactor (PWR) core is operating in an upward bubbly flow regime. The two-phase mixture of liquid water and steam is modeled using the drift-flux framework, where the void fraction is denoted by $\\alpha$, the gas superficial velocity by $j_{g}$, the liquid superficial velocity by $j_{l}$, and the mixture volumetric flux by $j$, with $j = j_{g} + j_{l}$. The distribution parameter $C_{0}$ accounts for the non-uniform phase distribution across the channel cross-section, and the drift velocity $V_{d}$ represents the mean relative motion of the gas phase with respect to the mixture. Starting from conservation of mass for each phase and the definition of superficial velocities and void fraction, use the drift-flux representation to obtain a closed-form expression for the void fraction $\\alpha$ in terms of $j_{g}$, $j$, $C_{0}$, and $V_{d}$. Then, for the specific operating condition $j_{g} = 0.20$ $\\mathrm{m/s}$, $j = 1.50$ $\\mathrm{m/s}$, $C_{0} = 1.20$, and $V_{d} = 0.40$ $\\mathrm{m/s}$, compute the numerical value of $\\alpha$. Express the final value of $\\alpha$ as a unitless decimal fraction and round your answer to four significant figures.\n\nFinally, analyze and state the conditions under which the solution is physically admissible, i.e., $0 \\le \\alpha \\le 1$, for typical bubbly upward flow parameter ranges $1.10 \\le C_{0} \\le 1.35$, $0.20 \\le V_{d} \\le 0.50$ $\\mathrm{m/s}$, $1.0 \\le j \\le 3.0$ $\\mathrm{m/s}$, and $j_{g} \\ge 0$.",
            "solution": "The drift-flux model provides a relationship between the phase velocities, the mixture flux, and the transport properties of the flow. We begin with the fundamental definitions and relations.\n\nThe superficial velocity of the gas phase, $j_g$, is defined as the volumetric flow rate of the gas phase per unit total cross-sectional area of the channel. It is related to the area-averaged gas phase velocity, $U_g$, and the void fraction, $\\alpha$, by the following expression:\n$$j_g = \\alpha U_g$$\nThe core tenet of the Zuber-Findlay drift-flux model relates the area-averaged gas velocity $U_g$ to the area-averaged total mixture flux $j$ and the drift velocity $V_d$. This relationship is given by:\n$$U_g = C_0 j + V_d$$\nHere, $C_0$ is the distribution parameter that accounts for the non-uniform radial profiles of void fraction and velocity, and $V_d$ is the drift velocity representing the relative motion between the gas phase and the mixture.\n\nTo find an expression for the void fraction $\\alpha$, we can equate the two expressions for $U_g$. First, we rearrange the definition of the superficial gas velocity to solve for $U_g$:\n$$U_g = \\frac{j_g}{\\alpha}$$\nNow, we set this equal to the drift-flux relation:\n$$\\frac{j_g}{\\alpha} = C_0 j + V_d$$\nSolving this equation for the void fraction $\\alpha$ yields the desired closed-form expression:\n$$\\alpha = \\frac{j_g}{C_0 j + V_d}$$\nThis completes the first part of the problem.\n\nFor the second part, we compute the numerical value of $\\alpha$ using the provided operating conditions: $j_g = 0.20$ $\\mathrm{m/s}$, $j = 1.50$ $\\mathrm{m/s}$, $C_0 = 1.20$, and $V_d = 0.40$ $\\mathrm{m/s}$. Substituting these values into the derived expression:\n$$\\alpha = \\frac{0.20}{1.20 \\times 1.50 + 0.40}$$\nFirst, we calculate the value of the denominator:\n$$C_0 j + V_d = 1.20 \\times 1.50 + 0.40 = 1.80 + 0.40 = 2.20$$\nThe units of the denominator are $\\mathrm{m/s}$, consistent with the numerator, rendering $\\alpha$ unitless as expected.\nNow, we compute the value of $\\alpha$:\n$$\\alpha = \\frac{0.20}{2.20} = \\frac{2}{22} = \\frac{1}{11}$$\nConverting this fraction to a decimal gives approximately $0.090909...$. Rounding this result to four significant figures yields $0.09091$.\n\nFor the final part, we analyze the conditions for physical admissibility, which requires the void fraction $\\alpha$ to be within the range $0 \\le \\alpha \\le 1$. We analyze these two inequalities separately using the derived expression for $\\alpha$.\n\n1.  **Condition $\\alpha \\ge 0$**:\n    $$\\frac{j_g}{C_0 j + V_d} \\ge 0$$\n    The problem specifies $j_g \\ge 0$. For upward bubbly flow, the mixture flux $j$ is positive, the distribution parameter $C_0$ is positive (typically greater than $1$), and the drift velocity $V_d$ is positive due to buoyancy. All parameter ranges provided ($1.10 \\le C_0 \\le 1.35$, $0.20 \\le V_d \\le 0.50$ $\\mathrm{m/s}$, $1.0 \\le j \\le 3.0$ $\\mathrm{m/s}$) are strictly positive. Therefore, the denominator $C_0 j + V_d$ is always a sum of positive terms and is strictly positive. Since the numerator $j_g$ is non-negative, the fraction is always non-negative. Thus, the condition $\\alpha \\ge 0$ is always satisfied under the given physical context. Equality, $\\alpha = 0$, occurs if and only if $j_g = 0$, which corresponds to a single-phase liquid flow.\n\n2.  **Condition $\\alpha \\le 1$**:\n    $$\\frac{j_g}{C_0 j + V_d} \\le 1$$\n    Since the denominator $C_0 j + V_d$ is strictly positive, we can multiply both sides of the inequality by it without changing the direction of the inequality sign:\n    $$j_g \\le C_0 j + V_d$$\n    This inequality is the main condition for the physical admissibility of the calculated void fraction. It establishes a limit on the gas superficial velocity $j_g$ relative to the mixture flux and flow parameters. If this condition is violated, the model would predict a non-physical void fraction $\\alpha > 1$, which typically indicates that the flow has transitioned to a different regime (e.g., slug flow or churn-turbulent flow) for which the bubbly flow correlations for $C_0$ and $V_d$ are no longer valid.\n\nIn summary, the solution for void fraction is physically admissible, i.e., $0 \\le \\alpha \\le 1$, under the following conditions:\n- The non-negativity condition, $\\alpha \\ge 0$, is satisfied for all $j_g \\ge 0$ given the positive nature of the other parameters in upward flow.\n- The upper bound condition, $\\alpha \\le 1$, is satisfied if and only if the flow parameters adhere to the constraint $j_g \\le C_0 j + V_d$.",
            "answer": "$$\n\\boxed{0.09091}\n$$"
        },
        {
            "introduction": "Real-world two-phase flows transition between different regimes, such as bubbly and slug flow, which requires adjusting model parameters for accurate prediction. This exercise explores the consequences of such changes in the drift-flux parameters $C_0$ and $V_d$ at a flow regime boundary. By calculating the artificial discontinuity in gas flux that arises from an abrupt parameter switch, this practice  demonstrates the critical importance of implementing smooth, continuous transition models in robust simulation codes.",
            "id": "4223292",
            "problem": "A vertical heated channel in a light-water reactor subchannel analysis code transports a two-phase mixture of water and steam upward. In the channel, the volumetric gas fraction (void fraction) $\\,\\alpha\\,$ increases with heating and, near $\\alpha \\approx 0.3$, the flow transitions from a bubbly regime to a slug regime. In the drift-flux modeling framework, the gas-phase volumetric flux $\\,j_{g}\\,$ is modeled using the kinematic identity $\\,j_{g} = \\alpha\\,U_{g}\\,$, where $\\,U_{g}\\,$ is the area-averaged gas velocity, and a closure of the form $\\,U_{g} = C_{0}\\,j + V_{d}\\,$, where $\\,j\\,$ is the total volumetric flux, $\\,C_{0}\\,$ is the distribution parameter, and $\\,V_{d}\\,$ is the drift velocity. \n\nFor regime-dependent closures, $\\,C_{0}\\,$ and $\\,V_{d}\\,$ are typically correlated differently in bubbly and slug regimes. To maintain physical consistency and numerical stability in a reactor system simulation, it is desirable to switch between the bubbly and slug closures in a way that avoids artificial discontinuities. \n\n(a) Propose a continuous switching strategy for $\\,C_{0}\\,$ and $\\,V_{d}\\,$ across the regime transition centered at $\\,\\alpha_{t} = 0.3\\,$ using a void-fraction-based blending function $\\,w(\\alpha)\\,$ that satisfies $\\,w(\\alpha) \\to 1\\,$ for the bubbly regime and $\\,w(\\alpha) \\to 0\\,$ for the slug regime. Your proposal should define $\\,C_{0}(\\alpha)\\,$ and $\\,V_{d}(\\alpha)\\,$ in terms of $\\,w(\\alpha)\\,$, the bubbly-regime constants $\\,C_{0}^{(b)}\\,$ and $\\,V_{d}^{(b)}\\,$, and the slug-regime constants $\\,C_{0}^{(s)}\\,$ and $\\,V_{d}^{(s)}\\,$, and it should be grounded in the drift-flux identities stated above.\n\n(b) To quantify the effect of an abrupt, piecewise-constant switch at $\\,\\alpha = \\alpha_{t}\\,$, compute the signed discontinuity in the predicted gas volumetric flux,\n$$\n\\Delta j_{g} \\equiv j_{g}^{(s)} - j_{g}^{(b)},\n$$\nat fixed $\\,\\alpha = 0.3\\,$ and total volumetric flux $\\,j = 1.2\\ \\mathrm{m/s}\\,$, when switching from bubbly-regime parameters to slug-regime parameters where $\\,C_{0}^{(b)} = 1.2 \\to C_{0}^{(s)} = 1.0\\,$ and $\\,V_{d}^{(b)} = 0.2\\ \\mathrm{m/s} \\to V_{d}^{(s)} = 0.35\\ \\mathrm{m/s}\\,$. Use only the drift-flux definitions given above and assume all other conditions are unchanged across the transition. Round your final numerical result for $\\,\\Delta j_{g}\\,$ to three significant figures and express it in $\\,\\mathrm{m/s}\\,$.",
            "solution": "The problem is divided into two parts. Part (a) requires the formulation of a continuous switching strategy for the drift-flux parameters, and part (b) requires the calculation of a discontinuity in the gas volumetric flux for an abrupt switching case.\n\nPart (a): Continuous Switching Strategy\n\nThe objective is to define the distribution parameter, $C_0(\\alpha)$, and the drift velocity, $V_d(\\alpha)$, as continuous functions of the void fraction, $\\alpha$. This prevents non-physical jumps in predicted quantities during numerical simulations as the flow regime transitions from bubbly to slug. We are given the bubbly regime parameters, $C_0^{(b)}$ and $V_d^{(b)}$, the slug regime parameters, $C_0^{(s)}$ and $V_d^{(s)}$, and a blending function, $w(\\alpha)$, with the properties:\n$$\nw(\\alpha) \\to 1 \\quad (\\text{for bubbly regime, e.g., } \\alpha \\to 0)\n$$\n$$\nw(\\alpha) \\to 0 \\quad (\\text{for slug regime, e.g., } \\alpha \\to 1)\n$$\nA standard and robust method to ensure continuity is to use a linear interpolation (or weighted average) between the parameter values for the two regimes. The blending function $w(\\alpha)$ serves as the weight. We can construct the blended parameters as follows:\n$$\n\\Phi(\\alpha) = w(\\alpha) \\Phi^{(b)} + (1 - w(\\alpha)) \\Phi^{(s)}\n$$\nwhere $\\Phi$ represents a generic parameter. This form correctly captures the limiting behavior. When the flow is fully bubbly, $w(\\alpha) \\approx 1$, and $\\Phi(\\alpha) \\approx 1 \\cdot \\Phi^{(b)} + (1 - 1) \\cdot \\Phi^{(s)} = \\Phi^{(b)}$. Conversely, when the flow is fully in the slug regime, $w(\\alpha) \\approx 0$, and $\\Phi(\\alpha) \\approx 0 \\cdot \\Phi^{(b)} + (1 - 0) \\cdot \\Phi^{(s)} = \\Phi^{(s)}$.\n\nApplying this formulation to the distribution parameter $C_0$ and the drift velocity $V_d$, we propose the following continuous functions:\n$$\nC_0(\\alpha) = w(\\alpha) C_0^{(b)} + (1 - w(\\alpha)) C_0^{(s)}\n$$\n$$\nV_d(\\alpha) = w(\\alpha) V_d^{(b)} + (1 - w(\\alpha)) V_d^{(s)}\n$$\nProvided that the blending function $w(\\alpha)$ is itself a continuous, smooth function of $\\alpha$ (e.g., a sigmoid or hyperbolic tangent function centered at the transition void fraction $\\alpha_t$), the resulting parameters $C_0(\\alpha)$ and $V_d(\\alpha)$ will also be continuous and smooth. This ensures that the gas velocity, $U_g = C_0(\\alpha)j + V_d(\\alpha)$, and the gas volumetric flux, $j_g = \\alpha U_g$, are also continuous functions of $\\alpha$, thereby avoiding artificial discontinuities and enhancing the numerical stability and physical realism of the simulation.\n\nPart (b): Calculation of the Discontinuity $\\Delta j_g$\n\nWe are asked to compute the magnitude of the jump in the gas volumetric flux, $\\Delta j_g$, under an abrupt, piecewise-constant switching scenario at the transition void fraction $\\alpha = \\alpha_t$. The fundamental kinematic relations given are:\n$$\nj_g = \\alpha U_g\n$$\n$$\nU_g = C_0 j + V_d\n$$\nBy substitution, the gas volumetric flux can be expressed directly in terms of the drift-flux parameters and flow conditions:\n$$\nj_g = \\alpha (C_0 j + V_d)\n$$\nAn abrupt switch means that for $\\alpha < \\alpha_t$, the bubbly parameters $(C_0^{(b)}, V_d^{(b)})$ are used, and for $\\alpha \\ge \\alpha_t$, the slug parameters $(C_0^{(s)}, V_d^{(s)})$ are used. The discontinuity at $\\alpha = \\alpha_t$ is the difference between the value calculated using the slug parameters and the value calculated using the bubbly parameters, at the same fixed values of $\\alpha$ and $j$.\n\nThe gas volumetric flux just \"before\" the transition (using bubbly parameters) is:\n$$\nj_g^{(b)} = \\alpha (C_0^{(b)} j + V_d^{(b)})\n$$\nThe gas volumetric flux just \"after\" the transition (using slug parameters) is:\n$$\nj_g^{(s)} = \\alpha (C_0^{(s)} j + V_d^{(s)})\n$$\nThe signed discontinuity is defined as $\\Delta j_g \\equiv j_g^{(s)} - j_g^{(b)}$. Substituting the expressions above:\n$$\n\\Delta j_g = \\alpha (C_0^{(s)} j + V_d^{(s)}) - \\alpha (C_0^{(b)} j + V_d^{(b)})\n$$\nFactoring out $\\alpha$ and rearranging terms yields a more elegant expression for the discontinuity:\n$$\n\\Delta j_g = \\alpha \\left[ (C_0^{(s)} - C_0^{(b)}) j + (V_d^{(s)} - V_d^{(b)}) \\right]\n$$\nWe are given the following values for the calculation:\n- Void fraction, $\\alpha = 0.3$\n- Total volumetric flux, $j = 1.2 \\, \\mathrm{m/s}$\n- Bubbly-regime parameters, $C_0^{(b)} = 1.2$ and $V_d^{(b)} = 0.2 \\, \\mathrm{m/s}$\n- Slug-regime parameters, $C_0^{(s)} = 1.0$ and $V_d^{(s)} = 0.35 \\, \\mathrm{m/s}$\n\nFirst, we calculate the differences in the parameters:\n$$\nC_0^{(s)} - C_0^{(b)} = 1.0 - 1.2 = -0.2\n$$\n$$\nV_d^{(s)} - V_d^{(b)} = 0.35 \\, \\mathrm{m/s} - 0.2 \\, \\mathrm{m/s} = 0.15 \\, \\mathrm{m/s}\n$$\nNow, substitute these differences and the given values for $\\alpha$ and $j$ into the expression for $\\Delta j_g$:\n$$\n\\Delta j_g = 0.3 \\left[ (-0.2) \\cdot (1.2 \\, \\mathrm{m/s}) + (0.15 \\, \\mathrm{m/s}) \\right]\n$$\n$$\n\\Delta j_g = 0.3 \\left[ -0.24 \\, \\mathrm{m/s} + 0.15 \\, \\mathrm{m/s} \\right]\n$$\n$$\n\\Delta j_g = 0.3 \\left[ -0.09 \\, \\mathrm{m/s} \\right]\n$$\n$$\n\\Delta j_g = -0.027 \\, \\mathrm{m/s}\n$$\nThe problem requires the final numerical result to be rounded to three significant figures. The calculated value is exactly $-0.027$. To express this with three significant figures, we add a trailing zero.\n$$\n\\Delta j_g = -0.0270 \\, \\mathrm{m/s}\n$$\nThis negative result signifies that an abrupt switch from the given bubbly to slug correlations leads to a sudden, non-physical decrease in the predicted gas volumetric flux at the transition point.",
            "answer": "$$\n\\boxed{-0.0270}\n$$"
        },
        {
            "introduction": "A key task for a simulation expert is not just using a model, but understanding its accuracy and limitations relative to other approaches. This capstone practice moves from analytical problems to computational analysis, asking you to compare the drift-flux model against a simplified two-fluid model based on a bubble force balance. By implementing both models in code and quantifying the error across a wide range of reactor conditions , you will gain direct experience in model validation and performance assessment.",
            "id": "4223224",
            "problem": "A vertical subchannel in a Boiling Water Reactor (BWR) is modeled as a one-dimensional, steady, fully developed, upward, two-phase flow of water and steam at near-saturation conditions. The goal is to compare the gas volumetric flux predicted by a drift-flux formulation against a physically grounded two-fluid closure based on a buoyancy–drag force balance for bubbles, across a set of thirty reactor-relevant operating points, and to compute the mean absolute percentage error. The entire task must be implemented as a complete, runnable program.\n\nStart from the following fundamental definitions and well-tested relations:\n\n- The mixture volumetric flux is $j = j_g + j_l$, where $j_g = \\alpha U_g$ and $j_l = (1 - \\alpha) U_l$, with $\\alpha$ the void fraction, $U_g$ the average gas velocity, and $U_l$ the average liquid velocity.\n- The relative velocity between phases is defined as $U_g - U_l$, and, for dispersed spherical bubbles in a continuous liquid phase, an algebraic closure for terminal relative velocity $V_r$ follows from a balance between buoyancy and drag. For a spherical bubble of diameter $d_b$, liquid density $\\rho_l$, gas density $\\rho_g$, gravitational acceleration $g$, and drag coefficient $C_D$, equating buoyancy $F_B = (\\rho_l - \\rho_g) g V$ to drag $F_D = \\tfrac{1}{2} C_D \\rho_l A V_r^2$ with $V = \\tfrac{\\pi d_b^3}{6}$ and $A = \\tfrac{\\pi d_b^2}{4}$ yields the terminal relative velocity\n$$\nV_r = \\sqrt{\\frac{4 g (\\rho_l - \\rho_g) d_b}{3 C_D \\rho_l}}.\n$$\n- Using $U_g - U_l = V_r$ and $j = \\alpha U_g + (1 - \\alpha) U_l$, eliminate $U_l$ and $U_g$ to obtain expressions for the two-fluid prediction of the gas volumetric flux $j_g$ in terms of $j$, $\\alpha$, and $V_r$.\n- In the drift-flux framework, represent the average gas velocity using the classic distribution–drift decomposition $U_g = C_0 j + V_{gj}$, where $C_0$ is the distribution parameter capturing profile and phase-distribution effects, and $V_{gj}$ is the drift velocity capturing phase-relative motion due to buoyancy and other mechanisms. The gas volumetric flux is then $j_g = \\alpha U_g$, which must be expressed using $C_0$, $j$, $V_{gj}$, and $\\alpha$.\n- Close $V_{gj}$ for a vertical channel of hydraulic diameter $d_h$ using the correlation $V_{gj} = C_{\\mathrm{drift}} \\sqrt{g d_h}$, where $C_{\\mathrm{drift}}$ is a regime-dependent coefficient.\n\nYou must implement the following, adhering to physical units:\n\n1. Use the properties representative of saturated conditions at elevated pressure: $\\rho_l = 700$ in $\\mathrm{kg/m^3}$, $\\rho_g = 35$ in $\\mathrm{kg/m^3}$, $g = 9.81$ in $\\mathrm{m/s^2}$, and $C_D = 0.44$ (dimensionless).\n2. For each test point, compute:\n   - The two-fluid gas volumetric flux $j_g^{\\mathrm{TF}}$ (in $\\mathrm{m/s}$) from the above conservation relations and the terminal relative velocity $V_r$.\n   - The drift-flux gas volumetric flux $j_g^{\\mathrm{DF}}$ (in $\\mathrm{m/s}$) using the specified $C_0$ and $V_{gj}$ closure.\n   - The absolute percentage error for that point, defined as\n   $$\n   \\mathrm{APE} = \\left| \\frac{j_g^{\\mathrm{DF}} - j_g^{\\mathrm{TF}}}{j_g^{\\mathrm{TF}}} \\right|.\n   $$\n   Express $\\mathrm{APE}$ as a decimal (not using a percentage sign).\n3. Compute the mean absolute percentage error across all thirty points:\n   $$\n   \\mathrm{MAPE} = \\frac{1}{30} \\sum_{i=1}^{30} \\left| \\frac{j_{g,i}^{\\mathrm{DF}} - j_{g,i}^{\\mathrm{TF}}}{j_{g,i}^{\\mathrm{TF}}} \\right|.\n   $$\n4. All $j_g$ values must be in $\\mathrm{m/s}$. The final APE and MAPE must be reported as decimals. Round all reported floats to six decimal places.\n\nTest suite definition: Construct exactly thirty operating points indexed by $k = 0, 1, \\dots, 29$ using the deterministic formulas below, which sweep reactor-relevant conditions and exercise different flow regimes:\n\n- Void fraction:\n$$\n\\alpha_k = 0.01 + 0.59 \\frac{k}{29}.\n$$\n- Mixture volumetric flux in $\\mathrm{m/s}$:\n$$\nj_k = 0.5 + 0.12 k.\n$$\n- Bubble diameter in $\\mathrm{m}$:\n$$\nd_{b,k} = 0.001 + 0.004 \\frac{k}{29}.\n$$\n- Hydraulic diameter in $\\mathrm{m}$:\n$$\nd_{h,k} = 0.010 + 0.010 \\frac{k}{29}.\n$$\n- Distribution parameter:\n$$\nC_{0,k} = 1.10 + 0.20 \\frac{k}{29}.\n$$\n- Drift coefficient:\n$$\nC_{\\mathrm{drift},k} = \n\\begin{cases}\n0.15, & \\text{if } k \\bmod 5 = 0, \\\\\n0.18, & \\text{if } k \\bmod 5 = 1, \\\\\n0.20, & \\text{if } k \\bmod 5 = 2, \\\\\n0.22, & \\text{if } k \\bmod 5 = 3, \\\\\n0.25, & \\text{if } k \\bmod 5 = 4.\n\\end{cases}\n$$\n\nProgram requirements:\n\n- Implement the derivations to compute $j_g^{\\mathrm{TF}}$ and $j_g^{\\mathrm{DF}}$ strictly from the above bases and closures.\n- Compute the individual $\\mathrm{APE}$ for each of the thirty test points and the overall $\\mathrm{MAPE}$.\n- Final output format: Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where the first thirty entries are the rounded individual $\\mathrm{APE}$ values (decimals), and the last entry is the rounded $\\mathrm{MAPE}$ (decimal). For example, an output with three points would look like $\\big[$$0.012345,0.067890,0.001234,0.027156$$\\big]$, but your program must output thirty-one floats in total.\n\nExpress all gas volumetric fluxes in $\\mathrm{m/s}$ and all errors as decimals rounded to six significant decimal places.",
            "solution": "The objective is to compare the gas volumetric flux, $j_g$, as predicted by two different modeling frameworks for a steady, one-dimensional, upward, two-phase flow. The first model is a simplified two-fluid approach using an algebraic closure for interfacial drag, and the second is a classic drift-flux formulation. The comparison is performed across thirty systematically defined operating points, and the discrepancy is quantified using the mean absolute percentage error (MAPE).\n\nFirst, we derive the expressions for the gas volumetric flux $j_g$ for each model. The fundamental definitions common to both models are the mixture volumetric flux $j = j_g + j_l$, the gas volumetric flux $j_g = \\alpha U_g$, and the liquid volumetric flux $j_l = (1 - \\alpha) U_l$, where $\\alpha$ is the void fraction and $U_g$ and $U_l$ are the average phase velocities.\n\n**1. Two-Fluid Model with Buoyancy-Drag Closure ($j_g^{\\mathrm{TF}}$)**\n\nThis model establishes a direct relationship between the phase velocities based on a force balance on a representative bubble. The problem defines the terminal relative velocity, $V_r$, resulting from the balance between buoyancy and drag forces on a spherical bubble, as:\n$$V_r = \\sqrt{\\frac{4 g (\\rho_l - \\rho_g) d_b}{3 C_D \\rho_l}}$$\nwhere $g$ is the gravitational acceleration, $\\rho_l$ and $\\rho_g$ are the liquid and gas densities, $d_b$ is the bubble diameter, and $C_D$ is the drag coefficient.\n\nFor fully developed flow, we assume the actual relative velocity equals this terminal velocity:\n$$U_g - U_l = V_r$$\nWe have a system of two equations for the two unknown velocities, $U_g$ and $U_l$:\n$$j = \\alpha U_g + (1 - \\alpha) U_l$$\n$$U_l = U_g - V_r$$\nSubstituting the expression for $U_l$ into the definition of $j$:\n$$j = \\alpha U_g + (1 - \\alpha)(U_g - V_r)$$\n$$j = \\alpha U_g + U_g - V_r - \\alpha U_g + \\alpha V_r$$\n$$j = U_g - (1 - \\alpha)V_r$$\nSolving for the gas velocity $U_g$:\n$$U_g = j + (1 - \\alpha)V_r$$\nThe gas volumetric flux for the two-fluid model, $j_g^{\\mathrm{TF}}$, is then found by substituting this expression for $U_g$ into the definition $j_g = \\alpha U_g$:\n$$j_g^{\\mathrm{TF}} = \\alpha \\left[ j + (1 - \\alpha)V_r \\right]$$\nThis expression allows for the direct calculation of $j_g^{\\mathrm{TF}}$ from the given operating parameters ($j$, $\\alpha$, $d_b$) and physical properties ($\\rho_l$, $\\rho_g$, $g$, $C_D$).\n\n**2. Drift-Flux Model ($j_g^{\\mathrm{DF}}$)**\n\nThe drift-flux model, formulated by Zuber and Findlay, describes the average gas velocity $U_g$ in terms of the mixture velocity $j$ and the effects of non-uniform profiles and local slip. The relation is given as:\n$$U_g = C_0 j + V_{gj}$$\nHere, $C_0$ is the distribution parameter, which accounts for the co-variant effects of void fraction and velocity profiles across the channel cross-section. $V_{gj}$ is the void-fraction-weighted average drift velocity, which represents the local slip between phases.\n\nThe problem provides an empirical closure for $V_{gj}$ for a vertical channel:\n$$V_{gj} = C_{\\mathrm{drift}} \\sqrt{g d_h}$$\nwhere $C_{\\mathrm{drift}}$ is a regime-dependent coefficient and $d_h$ is the hydraulic diameter of the channel.\n\nThe gas volumetric flux for the drift-flux model, $j_g^{\\mathrm{DF}}$, is obtained by substituting the expression for $U_g$ into the definition $j_g = \\alpha U_g$:\n$$j_g^{\\mathrm{DF}} = \\alpha (C_0 j + V_{gj})$$\nThis expression allows for the direct calculation of $j_g^{\\mathrm{DF}}$ from the given operating parameters ($j$, $\\alpha$, $C_0$, $d_h$, $C_{\\mathrm{drift}}$) and the constant $g$.\n\n**3. Computational Procedure and Error Analysis**\n\nThe implementation will proceed as follows. A set of thirty operating points ($k=0, 1, \\dots, 29$) is generated according to the specified deterministic formulas for void fraction ($\\alpha_k$), mixture flux ($j_k$), bubble diameter ($d_{b,k}$), hydraulic diameter ($d_{h,k}$), distribution parameter ($C_{0,k}$), and drift coefficient ($C_{\\mathrm{drift},k}$).\n\nFor each point $k$:\n- We first compute the intermediate velocity terms: $V_{r,k}$ for the two-fluid model and $V_{gj,k}$ for the drift-flux model.\n- Using these, we calculate the gas volumetric fluxes $j_{g,k}^{\\mathrm{TF}}$ and $j_{g,k}^{\\mathrm{DF}}$.\n- The absolute percentage error (APE) for the point is then computed as:\n$$\n\\mathrm{APE}_k = \\left| \\frac{j_{g,k}^{\\mathrm{DF}} - j_{g,k}^{\\mathrm{TF}}}{j_{g,k}^{\\mathrm{TF}}} \\right|\n$$\nAfter iterating through all thirty points, the mean absolute percentage error (MAPE) is calculated by averaging the individual APE values:\n$$\n\\mathrm{MAPE} = \\frac{1}{30} \\sum_{k=0}^{29} \\mathrm{APE}_k\n$$\nAll computed error values will be rounded to six decimal places, and the final output will be a single comma-separated list containing the thirty APE values followed by the single MAPE value, enclosed in square brackets.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes and compares gas volumetric flux from two-fluid and drift-flux models\n    for two-phase flow in a BWR subchannel across 30 operating points, and\n    calculates the mean absolute percentage error.\n    \"\"\"\n    \n    # 1. Define physical constants and test suite parameters.\n    rho_l = 700.0      # Liquid density in kg/m^3\n    rho_g = 35.0       # Gas density in kg/m^3\n    g = 9.81           # Gravitational acceleration in m/s^2\n    C_D = 0.44         # Dimensionless drag coefficient\n    num_points = 30\n    \n    # Generate the thirty operating points indexed by k.\n    k_values = np.arange(num_points)\n    \n    # Deterministic formulas for each parameter vs. k\n    alphas = 0.01 + 0.59 * k_values / (num_points - 1)\n    js = 0.5 + 0.12 * k_values\n    d_bs = 0.001 + 0.004 * k_values / (num_points - 1)\n    d_hs = 0.010 + 0.010 * k_values / (num_points - 1)\n    C0s = 1.10 + 0.20 * k_values / (num_points - 1)\n    \n    # Conditional logic for the drift coefficient C_drift\n    C_drift_map = {0: 0.15, 1: 0.18, 2: 0.20, 3: 0.22, 4: 0.25}\n    C_drifts = np.array([C_drift_map[k % 5] for k in k_values])\n\n    # 2. Compute gas volumetric flux for both models.\n    # The calculations are vectorized using NumPy for efficiency.\n\n    # 2.1 Two-Fluid (TF) Model Calculation\n    # First, calculate the terminal relative velocity, V_r.\n    V_r_numerator = 4 * g * (rho_l - rho_g) * d_bs\n    V_r_denominator = 3 * C_D * rho_l\n    V_rs = np.sqrt(V_r_numerator / V_r_denominator)\n    \n    # Then, calculate the gas volumetric flux j_g^TF.\n    j_g_TFs = alphas * (js + (1 - alphas) * V_rs)\n\n    # 2.2 Drift-Flux (DF) Model Calculation\n    # First, calculate the drift velocity, V_gj.\n    V_gjs = C_drifts * np.sqrt(g * d_hs)\n    \n    # Then, calculate the gas volumetric flux j_g^DF.\n    j_g_DFs = alphas * (C0s * js + V_gjs)\n\n    # 3. Calculate error metrics.\n    # The problem specifies that APE should not be in percentage form.\n    # APE = |(predicted - actual) / actual|\n    # Note: j_g_TF is guaranteed to be non-zero since alpha > 0.\n    apes = np.abs((j_g_DFs - j_g_TFs) / j_g_TFs)\n    \n    # MAPE is the mean of the individual APEs.\n    mape = np.mean(apes)\n\n    # 4. Format and print the final output.\n    # The output must be a single line containing a list of 30 APEs and 1 MAPE,\n    # all rounded to six decimal places.\n    all_results = list(apes) + [mape]\n    \n    # Format each float to six decimal places and join with commas.\n    output_string = ','.join([f'{val:.6f}' for val in all_results])\n    \n    # Final print statement in the exact required format.\n    print(f\"[{output_string}]\")\n\n# Execute the solver function.\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "并行计算的性能提升并非总能随着核心数量的增加而线性增长。此练习结合了Amdahl定律和屋顶线模型，旨在量化分析两大性能瓶颈：固有的串行代码部分和冯·诺依曼架构中的内存带宽限制。通过推导在共享带宽约束下的加速比，您将亲身体会到数据传输速率如何成为多核处理器性能的最终“天花板”。",
            "id": "4067202",
            "problem": "在冯·诺依曼架构中，当可用内存带宽不足以供给算术单元时，内存与计算单元之间的数据移动会限制性能，这种现象通常被称为冯·诺依曼瓶颈。考虑一个包含总共 $W$ 次浮点运算的工作负载。这些运算中的一部分比例 $\\alpha$ 是固有串行的，必须在单个核心上执行，而剩余的 $1-\\alpha$ 部分则可以在 $n$ 个相同的核心上完全并行化。\n\n假设存在一个屋顶线式的性能上限，其中可达性能受限于峰值算术吞吐量和带宽限制吞吐量中的较小者。设 $n$ 核处理器的总峰值计算吞吐量为 $P_{\\text{peak}}$（以标准化操作速率单位计），内存子系统提供一个有效的持续乘积 $BW \\cdot I_{\\text{op}}$（以相同的标准化单位计），其中 $BW$ 是持续内存带宽，$I_{\\text{op}}$ 是运算强度（每字节操作数）。假设所有 $n$ 个核心共享相同的内存带宽。\n\n设单核峰值吞吐量为 $P_{\\text{core}} = P_{\\text{peak}}/n$。对于在单个核心上执行的任何部分，可达性能为 $\\min\\!\\big(P_{\\text{core}},\\, BW \\cdot I_{\\text{op}}\\big)$；对于在 $n$ 个核心上执行的完全并行部分，可达性能为 $\\min\\!\\big(n P_{\\text{core}},\\, BW \\cdot I_{\\text{op}}\\big) = \\min\\!\\big(P_{\\text{peak}},\\, BW \\cdot I_{\\text{op}}\\big)$。\n\n仅使用“执行时间等于工作量除以性能”这一基本关系，从第一性原理推导出在共享带宽约束下，在单个核心上执行整个工作负载的时间与在 $n$ 个核心上执行的时间之比所定义的加速比 $S$ 的表达式。然后，对于具体参数 $n=16$, $\\alpha=0.05$, $P_{\\text{peak}}=16$（标准化单位）以及 $BW \\cdot I_{\\text{op}}=8$（相同单位），计算加速比的精确值。此外，在你的推导过程中，指明并行部分的多核执行是受计算限制还是受带宽限制。最终的数值加速比请给出精确值（不要四舍五入）。加速比是无单位的，只需报告其数值。",
            "solution": "该问题要求为一个性能同时受其算术吞吐量和内存带宽约束的多核处理器推导加速比公式，该模型遵循屋顶线模型并结合了阿姆达尔定律。随后，需要为一组特定参数计算该加速比。\n\n首先，我们验证问题陈述的有效性。\n给定条件如下：\n- 总工作负载: $W$\n- 工作负载的串行部分: $\\alpha$\n- 工作负载的可并行化部分: $1-\\alpha$\n- 核心数: $n$\n- 总峰值计算吞吐量: $P_{\\text{peak}}$\n- 内存带宽限制的吞吐量: $BW \\cdot I_{\\text{op}}$\n- 单核峰值吞吐量: $P_{\\text{core}} = P_{\\text{peak}}/n$\n- 单核性能: $\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})$\n- 并行部分的 n 核性能: $\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})$\n- 加速比定义: $S = T_1 / T_n$\n- 执行时间定义: 时间 = 工作量 / 性能\n- 具体参数: $n=16$, $\\alpha=0.05$, $P_{\\text{peak}}=16$, $BW \\cdot I_{\\text{op}}=8$。\n\n该问题在科学上基于已确立的计算机体系结构原理（阿姆达尔定律，屋顶线模型），信息充分且一致，问题是适定的，并且陈述客观。因此，该问题被认为是有效的。\n\n我们接下来推导加速比 $S$ 的表达式。加速比 $S$ 定义为在单个核心上的执行时间 $T_1$ 与在 $n$ 个核心上的执行时间 $T_n$ 之比。\n\n1.  **计算在单个核心上的执行时间 $T_1$。**\n    当整个工作负载 $W$ 在单个核心上执行时，可达性能（我们称之为 $P_1$）受限于单核峰值吞吐量和带宽限制吞put量中的较小者。\n    $$P_1 = \\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})$$\n    执行时间 $T_1$ 是总工作量 $W$ 除以该性能：\n    $$T_1 = \\frac{W}{P_1} = \\frac{W}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})}$$\n\n2.  **计算在 $n$ 个核心上的执行时间 $T_n$。**\n    在 $n$ 个核心上的执行包括两部分：串行部分和并行部分。\n    -   工作的串行部分是 $\\alpha W$。它必须在单个核心上运行。这部分的性能与单核性能 $P_1$ 相同。串行部分的时间 $T_{n, \\text{serial}}$ 为：\n        $$T_{n, \\text{serial}} = \\frac{\\alpha W}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})}$$\n    -   工作的并行部分是 $(1-\\alpha)W$。它在所有 $n$ 个核心上运行。这次并行执行的可达性能（我们称之为 $P_n$）受限于所有 $n$ 个核心的总峰值吞吐量和共享内存带宽吞吐量中的较小者。\n        $$P_n = \\min(n P_{\\text{core}}, BW \\cdot I_{\\text{op}}) = \\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})$$\n        并行部分的时间 $T_{n, \\text{parallel}}$ 为：\n        $$T_{n, \\text{parallel}} = \\frac{(1-\\alpha)W}{P_n} = \\frac{(1-\\alpha)W}{\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})}$$\n    在 $n$ 个核心上的总执行时间 $T_n$ 是串行部分和并行部分的时间之和：\n    $$T_n = T_{n, \\text{serial}} + T_{n, \\text{parallel}} = \\frac{\\alpha W}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})} + \\frac{(1-\\alpha)W}{\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})}$$\n\n3.  **推导加速比表达式 $S$。**\n    使用定义 $S = T_1 / T_n$，我们得到：\n    $$S = \\frac{\\frac{W}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})}}{\\frac{\\alpha W}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})} + \\frac{(1-\\alpha)W}{\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})}}$$\n    工作负载 $W$ 是一个公因式，可以消去：\n    $$S = \\frac{\\frac{1}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})}}{\\frac{\\alpha}{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})} + \\frac{1-\\alpha}{\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})}}$$\n    为了简化这个繁分数，我们可以将分子和分母同乘以 $\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})$：\n    $$S = \\frac{1}{\\alpha + (1-\\alpha) \\frac{\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}})}{\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}})}}$$\n    这是给定模型下加速比的通用表达式。它是阿姆达尔定律的一种形式，其中并行加速因子由屋顶线约束决定。\n\n4.  **计算加速比的数值。**\n    给定参数为：$n=16$, $\\alpha=0.05$, $P_{\\text{peak}}=16$, 以及 $BW \\cdot I_{\\text{op}}=8$。\n    首先，我们确定单核峰值吞吐量 $P_{\\text{core}}$：\n    $$P_{\\text{core}} = \\frac{P_{\\text{peak}}}{n} = \\frac{16}{16} = 1$$\n    接下来，我们评估串行和并行执行部分的性能。\n    -   串行部分（以及单核执行）的性能：\n        $$\\min(P_{\\text{core}}, BW \\cdot I_{\\text{op}}) = \\min(1, 8) = 1$$\n    -   并行部分的性能：\n        $$\\min(P_{\\text{peak}}, BW \\cdot I_{\\text{op}}) = \\min(16, 8) = 8$$\n    在这里，我们确定了并行部分的性能瓶颈。由于可达性能为 $8$，它等于 $BW \\cdot I_{\\text{op}}$ 且小于 $P_{\\text{peak}} = 16$，因此并行部分的多核执行受内存带宽限制。\n\n    现在，我们将这些性能值和 $\\alpha$ 代入推导出的加速比公式中：\n    $$S = \\frac{1}{\\alpha + (1-\\alpha) \\frac{1}{8}}$$\n    代入 $\\alpha = 0.05$：\n    $$S = \\frac{1}{0.05 + (1 - 0.05) \\frac{1}{8}} = \\frac{1}{0.05 + (0.95) \\frac{1}{8}}$$\n    为了计算精确值，我们使用分数：$0.05 = \\frac{5}{100} = \\frac{1}{20}$ 以及 $0.95 = \\frac{95}{100} = \\frac{19}{20}$。\n    $$S = \\frac{1}{\\frac{1}{20} + \\frac{19}{20} \\cdot \\frac{1}{8}} = \\frac{1}{\\frac{1}{20} + \\frac{19}{160}}$$\n    我们为分母中的各项找到一个公分母，即 $160$。\n    $$S = \\frac{1}{\\frac{8}{160} + \\frac{19}{160}} = \\frac{1}{\\frac{8+19}{160}} = \\frac{1}{\\frac{27}{160}}$$\n    因此，加速比为：\n    $$S = \\frac{160}{27}$$",
            "answer": "$$\\boxed{\\frac{160}{27}}$$"
        },
        {
            "introduction": "除了性能瓶颈，“功耗墙”是限制现代多核处理器扩展的另一个主要障碍，导致了所谓的“暗硅”现象——即芯片上的大部分晶体管无法同时被激活。本练习将指导您从基本的热设计功耗（TDP）约束出发，推导出一个处理器可以同时激活的核心的最大比例。进一步地，通过一个更精细的功耗模型，您将分析内存访问延迟（冯·诺依曼瓶颈的核心问题）如何加剧功耗问题，降低系统的整体能效。",
            "id": "4067232",
            "problem": "考虑一个实现 von Neumann 架构的通用中央处理器 (CPU)，其在单个硅片上集成了 $M$ 个相同的核心。该封装受限于 $P_{\\text{max}}$ 的热设计功耗 (TDP) 预算。在给定工作负载下，每个上电并工作的核心（即活动核心）消耗的平均核心功率为 $P_{\\text{core}}$。假设非活动核心被完全门控断电，其消耗的功率可忽略不计。仅使用功率定义 $P = \\mathrm{d}E/\\mathrm{d}t$ 和资源约束，推导出一个闭式表达式，用于表示在不超过 $P_{\\text{max}}$ 的情况下，芯片上可同时活动的核心的最大比例 $f^{\\star}$。请用 $P_{\\text{max}}$、$P_{\\text{core}}$ 和 $M$ 将最终答案表示为一个无量纲的解析表达式。\n\n为分析 von Neumann 内存瓶颈的作用，将每个核心的功耗模型细化如下。设每个核心的平均功率根据 $P_{\\text{core}} = P_{\\text{leak}} + u P_{\\text{dyn}}$ 分解为一个泄漏功耗分量 $P_{\\text{leak}}$ 和一个由利用率 $u \\in [0,1]$ 缩放的动态功耗分量 $P_{\\text{dyn}}$，其中动态功耗分量遵循互补金属氧化物半导体 (CMOS) 的开关功耗规律 $P_{\\text{dyn}} \\propto C V^{2} f_{\\text{clk}}$，C 为等效电容，$V$ 为电源电压，$f_{\\text{clk}}$ 为时钟频率。假设由末级缓存、片上互连和片外动态随机存取存储器 (DRAM) 接口组成的内存子系统，会为每个活动核心贡献一个额外的基准功耗 $P_{\\text{mem}}$，该功耗在停顿期间不会消失。使用第一性原理和此细化模型，解释内存密集型工作负载（由于频繁等待内存而导致 $u$ 值很小）如何影响可实现的核心比例 $f^{\\star}$ 和能效，并给出用 $P_{\\text{max}}$、$M$、$P_{\\text{leak}}$、$P_{\\text{dyn}}$、$u$ 和 $P_{\\text{mem}}$ 表示的 $f^{\\star}$ 对应表达式。无需进行数值舍入。最终答案必须是关于 $f^{\\star}$ 的单个解析表达式。",
            "solution": "问题陈述需经验证。\n\n**步骤 1：提取已知条件**\n- 相同核心总数：$M$。\n- CPU 封装热设计功耗 (TDP) 预算：$P_{\\text{max}}$。\n- 每个活动核心的平均功耗（简化模型）：$P_{\\text{core}}$。\n- 非活动核心功耗：可忽略不计。\n- 功率定义：$P = \\mathrm{d}E/\\mathrm{d}t$。\n- 目标 1：推导活动核心的最大比例 $f^{\\star}$，用 $P_{\\text{max}}$、$P_{\\text{core}}$ 和 $M$ 表示。\n- 细化的核心功耗模型：$P_{\\text{core}} = P_{\\text{leak}} + u P_{\\text{dyn}}$。\n- 核心利用率：$u \\in [0,1]$。\n- 动态功耗关系：$P_{\\text{dyn}} \\propto C V^{2} f_{\\text{clk}}$。\n- 每个活动核心来自内存子系统的额外功耗：$P_{\\text{mem}}$。\n- 工作负载类型：内存密集型，特征为 $u$ 值小。\n- 目标 2：解释 a) 小 $u$ 值对 $f^{\\star}$ 和能效的影响，以及 b) 给出用 $P_{\\text{max}}$、$M$、$P_{\\text{leak}}$、$P_{\\text{dyn}}$、$u$ 和 $P_{\\text{mem}}$ 表示的 $f^{\\star}$ 对应表达式。\n- 指定最终答案为基于细化模型的 $f^{\\star}$ 的单个解析表达式。\n\n**步骤 2：使用提取的已知条件进行验证**\n该问题在科学上基于计算机体系结构和 CMOS 电子学的原理。TDP、门控断电、静态（泄漏）和动态功耗，以及内存停顿（von Neumann 瓶颈）对利用率的影响等概念都是标准且定义明确的。问题提法得当，信息充分，足以推导出所要求的表达式。语言客观、正式。该问题是一个有效的、可形式化的物理和工程问题。它不违反任何无效性标准。\n\n**步骤 3：结论与行动**\n问题有效。将构建一个解决方案。\n\n**推导与分析**\n\n分析分两个阶段进行，对应于问题中提出的两个模型。核心原则是所有活动组件消耗的总功率不能超过热设计功耗预算 $P_{\\text{max}}$。\n\n首先，我们考虑简化模型。设 $N$ 为同时活动的核心数。由于每个活动核心消耗的功率为 $P_{\\text{core}}$，而非活动核心消耗的功率可忽略不计，CPU 的总功耗为 $P_{\\text{total}} = N P_{\\text{core}}$。基本约束是 $P_{\\text{total}} \\le P_{\\text{max}}$，即 $N P_{\\text{core}} \\le P_{\\text{max}}$。因此，可活动的最大核心数受功率预算限制，为 $N \\le P_{\\text{max}} / P_{\\text{core}}$。活动核心数也受到核心总数 $M$ 的物理限制。因此，最大活动核心数 $N^{\\star}$ 是这两个约束中的最小值。为建模目的，将 $N$ 视为连续变量，我们得到 $N^{\\star} = \\min(P_{\\text{max}} / P_{\\text{core}}, M)$。活动核心的最大比例 $f^{\\star}$ 是该数值除以总核心数 $M$：\n$$f^{\\star} = \\frac{N^{\\star}}{M} = \\frac{1}{M} \\min\\left(\\frac{P_{\\text{max}}}{P_{\\text{core}}}, M\\right) = \\min\\left(\\frac{P_{\\text{max}}}{M P_{\\text{core}}}, 1\\right)$$\n\n接下来，我们转向细化模型，该模型更详细地描述了功耗，并明确考虑了 von Neumann 内存瓶颈的影响。在此模型中，单个活动核心的功耗分解为其内部组件 $P_{\\text{core}} = P_{\\text{leak}} + u P_{\\text{dyn}}$，并加上其所占用的内存子系统份额消耗的功率 $P_{\\text{mem}}$。每个活动核心消耗的总功率，我们记为 $P_{\\text{active}}$，是这些贡献的总和：\n$$P_{\\text{active}} = (P_{\\text{leak}} + u P_{\\text{dyn}}) + P_{\\text{mem}}$$\n此处，$P_{\\text{leak}}$ 是静态泄漏功耗，只要核心上电就会产生，无论其活动状态如何。项 $u P_{\\text{dyn}}$ 代表动态功耗，它与计算活动或利用率 $u$ 成正比。项 $P_{\\text{mem}}$ 代表与内存层次结构（缓存、互连）相关的功耗，当核心处于活动状态时（即使在停顿期间）该功耗也存在。\n\n对于 $N$ 个活动核心，总功耗现在为 $P_{\\text{total}} = N P_{\\text{active}} = N(P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}})$。\n应用 TDP 约束，$P_{\\text{total}} \\le P_{\\text{max}}$：\n$$N (P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}}) \\le P_{\\text{max}}$$\n求解受功率限制的最大核心数，得到 $N \\le \\frac{P_{\\text{max}}}{P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}}}$。\n再次，将其与 $M$ 个核心的物理限制相结合，可同时活动的最大核心数为：\n$$N^{\\star} = \\min\\left(\\frac{P_{\\text{max}}}{P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}}}, M\\right)$$\n相应的活动核心最大比例 $f^{\\star}$ 为 $N^{\\star}/M$：\n$$f^{\\star} = \\frac{1}{M} \\min\\left(\\frac{P_{\\text{max}}}{P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}}}, M\\right) = \\min\\left(\\frac{P_{\\text{max}}}{M (P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}})}, 1\\right)$$\n这就是所求的表达式。\n\n现在，我们分析内存密集型工作负载的影响，其特点是由于处理器频繁停顿以等待来自内存的数据，导致利用率因子 $u$ 很小。\n\n1.  **对可实现比例 $f^{\\star}$ 的影响**：\n    我们研究 $f^{\\star}$ 的表达式。每个活动核心的功耗为 $P_{\\text{active}} = P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}}$。在内存密集型场景中，$u$ 很小。假设 $P_{\\text{dyn}}  0$，随着 $u$ 减小，$P_{\\text{active}}$ 也减小。每个核心的功耗降低意味着在固定的总功率预算 $P_{\\text{max}}$ 下，可以同时为更多的核心供电。从数学上讲，随着 $u$ 减小，分数 $\\frac{P_{\\text{max}}}{M (P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}})}$ 的分母减小。这导致分数值增大，因此 $f^{\\star}$ 增大。实质上，由停顿核心（不消耗动态功耗）释放出的功率预算可以用来激活其他核心。这允许了更高程度的并行性，尽管每个核心的进展缓慢。\n\n2.  **对能效的影响**：\n    能效可以定义为每单位消耗能量所完成的计算工作量。核心完成的工作量与其利用率直接相关，因此我们可以认为吞吐量与 $u$ 成正比。消耗的功率为 $P_{\\text{active}}$。因此，能效 $\\eta$ 可以表示为：\n    $$\\eta \\propto \\frac{\\text{吞吐量}}{\\text{功率}} = \\frac{u}{P_{\\text{active}}} = \\frac{u}{P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}}}$$\n    对于内存密集型工作负载，我们分析 $u \\to 0$ 时的极限情况。分子趋近于 0。分母趋近于一个非零正常数 $P_{\\text{leak}} + P_{\\text{mem}}$，它代表核心在空闲但通电时浪费的功率。因此：\n    $$\\lim_{u \\to 0} \\eta \\propto \\lim_{u \\to 0} \\frac{u}{P_{\\text{leak}} + P_{\\text{mem}}} = 0$$\n    能效趋近于零。这是 von Neumann 瓶颈的一个关键后果：在没有执行任何有用计算的情况下，消耗了大量能量 ($P_{\\text{leak}} + P_{\\text{mem}}$)。处理器在等待数据时处于非生产状态，却在消耗功率。尽管可以开启更多的核心（$f^{\\star}$ 增加），但整个系统的效率极差。这凸显了现代计算架构中数据移动的根本性挑战。\n\n$f^{\\star}$ 的最终表达式概括了这些权衡关系，将系统级功率预算与每个核心的详细功耗特性（包括其依赖于工作负载的利用率）联系起来。",
            "answer": "$$\\boxed{\\min\\left(\\frac{P_{\\text{max}}}{M (P_{\\text{leak}} + u P_{\\text{dyn}} + P_{\\text{mem}})}, 1\\right)}$$"
        },
        {
            "introduction": "在共享内存的多核系统中，保证数据一致性至关重要，这通常依赖于原子操作。然而，当多个核心高强度地争用同一内存地址时，这些本应实现并行协作的操作反而会引发严重的序列化瓶颈。本练习通过一个基于泊松过程的概率模型，让您量化分析这种争用如何导致“吞吐量崩溃”。您将推导出成功原子操作的吞吐量与尝试频率之间的函数关系，从而揭示共享资源序列化这一冯·诺依曼架构的深层限制。",
            "id": "4067177",
            "problem": "一个实现冯·诺依曼计算架构的共享内存多核系统，对单个竞争的内存字执行原子读-修改-写操作，例如比较并交换（CAS）。在基于目录的缓存一致性协议下，CAS在执行读-修改-写操作之前需要获得缓存行的独占所有权，而内存控制器会串行化独占所有权的授予。考虑有$N$个相同的核心，每个核心都试图对同一个内存字执行CAS操作，其独立的尝试间隔时间呈指数分布。设聚合尝试过程被建模为速率为$\\lambda$（次尝试/秒）的泊松过程。内存控制器在持续时间为$\\tau$（秒）的离散仲裁窗口中运行，在此期间它可以授予独占所有权。假设存在以下竞争动态：\n\n- 当且仅当在一个仲裁窗口内恰好有一次尝试到达时，CAS操作才能成功完成；此时控制器授予独占所有权，读-修改-写操作发生，缓存行的值发生改变。\n- 如果在一个窗口内没有尝试到达，则没有CAS操作完成。\n- 如果在一个窗口内有两次或更多次尝试到达，则仲裁开销和一致性失效会消耗掉该窗口，而没有任何CAS操作完成，所有竞争者都会回退并稍后重试。\n\n从泊松过程和上述内存一致性串行化的基本定义出发，推导稳态吞吐量$T(\\lambda)$的解析表达式，该吞吐量定义为已完成CAS操作（成功的原子更新）的平均速率（单位：操作/秒），并将其表示为尝试操作速率$\\lambda$和仲裁窗口持续时间$\\tau$的函数。将你的最终答案表示为单个闭式数学表达式。无需四舍五入。在你的推导和表达式中，使用“操作/秒”作为吞吐量的单位。",
            "solution": "该问题要求解稳态吞吐量$T(\\lambda, \\tau)$，其定义为已完成的比较并交换（CAS）操作的平均速率，是聚合尝试速率$\\lambda$和仲裁窗口持续时间$\\tau$的函数。\n\n问题陈述聚合尝试过程是一个速率恒为$\\lambda$（次尝试/秒）的泊松过程。我们关心的是在持续时间为$\\tau$的单个离散仲裁窗口内到达的尝试次数。\n\n令$K$为表示在持续时间为$\\tau$的单个仲裁窗口内到达的CAS尝试次数的随机变量。根据泊松过程的性质，在固定时间区间内发生的事件数量遵循泊松分布。该分布的均值（记为$\\mu$）是速率$\\lambda$与区间持续时间$\\tau$的乘积。\n$$ \\mu = \\lambda \\tau $$\n泊松分布的概率质量函数（PMF）给出了在该区间内观察到恰好$k$个事件的概率：\n$$ P(K=k) = \\frac{\\mu^k \\exp(-\\mu)}{k!} $$\n代入$\\mu = \\lambda\\tau$，在持续时间为$\\tau$的窗口内到达$k$次尝试的概率为：\n$$ P(K=k) = \\frac{(\\lambda\\tau)^k \\exp(-\\lambda\\tau)}{k!} \\quad \\text{for } k=0, 1, 2, \\dots $$\n\n问题定义了CAS成功完成的条件。当且仅当在一个仲裁窗口内恰好有一次尝试到达时，CAS操作才能成功完成。这对应于事件$K=1$。因此，在任何单个窗口内成功完成的概率（我们记为$P_{\\text{success}}$）就是$P(K=1)$。\n\n我们可以通过在PMF中令$k=1$来计算这个概率：\n$$ P_{\\text{success}} = P(K=1) = \\frac{(\\lambda\\tau)^1 \\exp(-\\lambda\\tau)}{1!} = \\lambda\\tau \\exp(-\\lambda\\tau) $$\n如果$K=0$或$K \\ge 2$，则没有CAS操作完成。因此，在持续时间为$\\tau$的单个窗口内成功操作的期望数量为：\n$$ E[\\text{successes per window}] = 1 \\times P(K=1) + 0 \\times P(K \\neq 1) = P(K=1) $$\n\n吞吐量$T(\\lambda, \\tau)$定义为已完成操作的平均速率，即每单位时间的预期成功操作数。由于每个窗口的持续时间为$\\tau$秒，所以每秒的窗口数为$1/\\tau$。吞吐量是每个窗口的预期成功次数与每秒窗口数的乘积。\n$$ T(\\lambda, \\tau) = \\frac{E[\\text{successes per window}]}{\\text{duration of window}} $$\n$$ T(\\lambda, \\tau) = \\frac{P_{\\text{success}}}{\\tau} $$\n代入$P_{\\text{success}}$的表达式：\n$$ T(\\lambda, \\tau) = \\frac{\\lambda\\tau \\exp(-\\lambda\\tau)}{\\tau} $$\n分子和分母中的项$\\tau$相互抵消，得到吞吐量的最终表达式：\n$$ T(\\lambda, \\tau) = \\lambda \\exp(-\\lambda\\tau) $$\n该表达式表示稳态吞吐量（单位：成功操作/秒），是尝试操作速率$\\lambda$和仲裁窗口持续时间$\\tau$的函数。它正确地捕捉了竞争的动态：对于低尝试速率（$\\lambda \\to 0$），吞吐量接近尝试速率（$T \\approx \\lambda$）；而对于非常高的尝试速率（$\\lambda \\to \\infty$），碰撞占主导地位，吞吐量崩溃至零（$T \\to 0$）。",
            "answer": "$$\\boxed{\\lambda \\exp(-\\lambda\\tau)}$$"
        }
    ]
}
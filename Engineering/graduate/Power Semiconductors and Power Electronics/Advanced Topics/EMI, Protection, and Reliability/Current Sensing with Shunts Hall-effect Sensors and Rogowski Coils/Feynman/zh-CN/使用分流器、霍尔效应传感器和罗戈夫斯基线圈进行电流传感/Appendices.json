{
    "hands_on_practices": [
        {
            "introduction": "在许多功率电子应用中，尤其是在高边或桥臂电流采集中，分流电阻产生的微小差分信号通常叠加在一个巨大且快速波动的共模电压之上。差分放大器抑制这种共模干扰的能力对其测量精度至关重要，这一性能由共模抑制比（CMRR）量化。本练习将从第一性原理出发，帮助您理解CMRR的定义，并计算在嘈杂电气环境中为保证精度所需的放大器最低性能指标 。",
            "id": "3831224",
            "problem": "一个精密差分前端被用于通过一个低阻值分流电阻器来检测大功率同步降压转换器中的电流。该分流器的电阻为 $R_{s} = 5.00 \\times 10^{-4}\\,\\Omega$，并承载一个幅值为 $I = 100\\,\\mathrm{A}$ 的缓慢变化的电流，因此分流器两端的差分信号幅值为 $V_{s} = I R_{s}$。由于来自开关节点的容性耦合，两个放大器输入端都受到一个共模正弦干扰，其幅值为 $V_{CM} = 12.0\\,\\mathrm{V}$，频率为 $f = 100\\,\\mathrm{kHz}$。该差分放大器具有有限的共模抑制比 (CMRR)，以分贝 (dB) 为单位。\n\n仅从差分增益、共模增益和共模抑制比 (CMRR) 的定义出发，首先推导出由共模干扰 $V_{CM}$ 引起的输入参考差分误差幅值的表达式，该表达式应使用以分贝表示的 CMRR。然后，通过要求由共模引起的输入参考误差幅值与差分信号幅值 $V_{s}$ 的比率不超过指定的误差界限 $\\epsilon = 0.010$，计算在频率 $f$ 下保证满足此界限的最小 CMRR。\n\n将所需的 CMRR 以 dB 表示，并将您的答案四舍五入到四位有效数字。",
            "solution": "该问题经核实科学上合理、提法明确、客观且内容完整。所提供的值对于大功率同步降压转换器应用是符合实际的。任务是首先推导由共模干扰引起的输入参考误差的表达式，然后计算满足指定误差界限所需的最小共模抑制比 (CMRR)。\n\n首先，我们为差分放大器建立基本定义。设两个输入电压为 $v_1$ 和 $v_2$。差分输入电压 $v_d$ 和共模输入电压 $v_{cm}$ 定义为：\n$$v_d = v_1 - v_2$$\n$$v_{cm} = \\frac{v_1 + v_2}{2}$$\n差分放大器的输出电压 $v_o$ 是差分输入和共模输入的线性组合，其特征由差分增益 $A_d$ 和共模增益 $A_{cm}$ 决定：\n$$v_o = A_d v_d + A_{cm} v_{cm}$$\n由共模输入引起的输出电压部分是误差分量 $v_{o,err}$：\n$$v_{o,err} = A_{cm} v_{cm}$$\n为了确定输入参考差分误差电压 $v_{d,err}$，我们寻找能在输出端产生相同误差的等效差分输入。这通过将输出误差除以差分增益来实现：\n$$v_{d,err} = \\frac{v_{o,err}}{A_d} = \\frac{A_{cm} v_{cm}}{A_d}$$\n共模抑制比 (CMRR) 定义为差分增益与共模增益之比的绝对值：\n$$\\mathrm{CMRR} = \\left| \\frac{A_d}{A_{cm}} \\right|$$\n将 CMRR 的定义代入输入参考误差电压的表达式，得到：\n$$v_{d,err} = \\frac{v_{cm}}{\\mathrm{CMRR}}$$\n题目指定了一个幅值为 $V_{CM}$ 的共模正弦干扰。因此，输入参考差分误差电压的幅值（我们记为 $V_{d,err}$）为：\n$$V_{d,err} = \\frac{V_{CM}}{\\mathrm{CMRR}}$$\nCMRR 通常以分贝 ($\\mathrm{dB}$) 为单位指定，其关系式为：\n$$\\mathrm{CMRR}_{\\mathrm{dB}} = 20 \\log_{10}(\\mathrm{CMRR})$$\n根据这个定义，我们可以用其分贝值来表示 CMRR：\n$$\\mathrm{CMRR} = 10^{\\frac{\\mathrm{CMRR}_{\\mathrm{dB}}}{20}}$$\n将此式代入误差幅值的表达式，我们得到以 $\\mathrm{CMRR}_{\\mathrm{dB}}$ 表示的输入参考差分误差幅值：\n$$V_{d,err} = \\frac{V_{CM}}{10^{\\frac{\\mathrm{CMRR}_{\\mathrm{dB}}}{20}}} = V_{CM} \\cdot 10^{-\\frac{\\mathrm{CMRR}_{\\mathrm{dB}}}{20}}$$\n这就完成了问题的第一部分，即输入参考误差幅值的推导。\n\n接下来，我们必须计算满足给定误差界限所需的最小 CMRR。题目要求由共模引起的输入参考误差幅值 $V_{d,err}$ 与期望的差分信号幅值 $V_s$ 之比不得超过指定的误差界限 $\\epsilon$。这个要求可以表示为：\n$$\\frac{V_{d,err}}{V_s} \\le \\epsilon$$\n代入 $V_{d,err}$ 的表达式：\n$$\\frac{V_{CM} / \\mathrm{CMRR}}{V_s} \\le \\epsilon$$\n为了找到保证满足此界限的最小 CMRR，我们在不等式的临界条件下求解 CMRR：\n$$\\frac{V_{CM}}{\\mathrm{CMRR} \\cdot V_s} = \\epsilon$$\n$$\\mathrm{CMRR} \\ge \\frac{V_{CM}}{\\epsilon V_s}$$\n因此，所需的最小 CMRR 为：\n$$\\mathrm{CMRR}_{\\mathrm{min}} = \\frac{V_{CM}}{\\epsilon V_s}$$\n我们已知以下数值：\n共模干扰幅值，$V_{CM} = 12.0\\,\\mathrm{V}$。\n误差界限，$\\epsilon = 0.010$。\n分流电阻，$R_s = 5.00 \\times 10^{-4}\\,\\Omega$。\n电流幅值，$I = 100\\,\\mathrm{A}$。\n\n首先，我们计算差分信号幅值 $V_s$：\n$$V_s = I R_s = (100\\,\\mathrm{A}) \\times (5.00 \\times 10^{-4}\\,\\Omega) = 0.0500\\,\\mathrm{V}$$\n现在，我们可以计算所需的最小 CMRR（作为线性比值）：\n$$\\mathrm{CMRR}_{\\mathrm{min}} = \\frac{12.0\\,\\mathrm{V}}{0.010 \\times 0.0500\\,\\mathrm{V}} = \\frac{12.0}{5.00 \\times 10^{-4}} = 24000$$\n题目要求答案以分贝表示。我们将这个线性比值转换为 $\\mathrm{dB}$：\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} = 20 \\log_{10}(\\mathrm{CMRR}_{\\mathrm{min}}) = 20 \\log_{10}(24000)$$\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} = 20 \\log_{10}(2.4 \\times 10^4) = 20 (\\log_{10}(2.4) + \\log_{10}(10^4))$$\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} = 20 (\\log_{10}(2.4) + 4)$$\n使用计算器，$\\log_{10}(2.4) \\approx 0.380211$。\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} \\approx 20 (0.380211 + 4) = 20 \\times 4.380211 \\approx 87.60422\\,\\mathrm{dB}$$\n题目要求将最终答案四舍五入到四位有效数字。\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} \\approx 87.60\\,\\mathrm{dB}$$\n这是在干扰频率 $f = 100\\,\\mathrm{kHz}$ 下所需的最小 CMRR，以确保由共模电压引起的误差不超过被测信号的 $1\\%$。",
            "answer": "$$\\boxed{87.60}$$"
        },
        {
            "introduction": "霍尔效应传感器提供了一种非接触式电流测量方案，避免了分流电阻的插入损耗和一些动态限制。然而，它们的性能并非完美，其灵敏度和输出失调电压会随着温度而漂移，这在宽工作温度范围的应用中会引入显著的静态误差。这项练习将引导您对一个开环霍尔传感器的热致误差进行建模和量化，将数据手册中的温度系数规格转化为在特定工作范围内的最差情况性能分析 。",
            "id": "3831272",
            "problem": "一台三相逆变器使用一个开环霍尔效应传感器（无磁通置零）来测量相电流。该霍尔效应传感器的标称灵敏度在 $T_0 = 25^{\\circ}\\mathrm{C}$ 时为 $S_0 = 185\\,\\mathrm{mV/A}$，并且在 $T_0$ 时有一个初始输出失调，该失调通过在 $T_0$ 进行的单点失调校准来消除。在整个温度范围内，该传感器表现出灵敏度分数温度系数 $k_S = 7.0 \\times 10^{-4}\\,\\mathrm{/^{\\circ}C}$ 和失调漂移 $k_{\\mathrm{off}} = 1.5\\,\\mathrm{mV/^{\\circ}C}$。环境温度在 $-40^{\\circ}\\mathrm{C}$ 到 $125^{\\circ}\\mathrm{C}$ 范围内变化。关注的电流在区间 $I \\in [5\\,\\mathrm{A},\\,30\\,\\mathrm{A}]$ 内。\n\n从将霍尔效应传感器输出与导体电流感应的磁场以及传感器的线性化传输特性联系起来的基本原理出发，对在 $T_0$ 进行失调校准后的传感器输出和估算过程进行建模。假设除了在 $T_0$ 进行的单次失调校准外，没有磁通置零或温度补偿，推导在任意温度 $T$ 和电流 $I$ 下，由 (i) 灵敏度漂移和 (ii) 失调漂移引起的估算电流的分数误差表达式。然后，确定在指定的温度和电流范围内的最坏情况分数误差。\n\n最后，设计要求在整个温度范围内的精度在 $\\pm \\epsilon$ 之内，其中 $\\epsilon = 0.03$ 以小数形式表示。将最坏情况分数误差计算为单个实数。将您的最终结果表示为小数，并四舍五入到四位有效数字。",
            "solution": "该问题经验证是自洽的、有科学依据的、适定的和客观的。它提出了一个基于霍尔效应传感器线性模型的标准工程分析任务，并提供了所有必要的参数。问题中没有矛盾、歧义或违反科学原理的地方。因此，将推导其解。\n\n首先，我们建立传感器输出电压的模型。霍尔效应传感器的输出 $V_{\\text{out}}$ 与测量的电流 $I$ 呈线性关系，并带有一个输出失调电压。灵敏度和失调都是温度 $T$ 的函数。模型如下：\n$$V_{\\text{out}}(I, T) = S(T) \\cdot I + V_{\\text{off}}(T)$$\n其中 $S(T)$ 是在温度 $T$ 时的灵敏度，$V_{\\text{off}}(T)$ 是在温度 $T$ 时的输出失调电压。\n\n问题提供了灵敏度和失调相对于参考温度 $T_0 = 25^{\\circ}\\mathrm{C}$ 的温度依赖性的线性模型。\n灵敏度 $S(T)$ 由下式给出：\n$$S(T) = S_0 (1 + k_S (T - T_0))$$\n其中 $S_0 = 185\\,\\mathrm{mV/A}$ 是在 $T_0$ 时的标称灵敏度，$k_S = 7.0 \\times 10^{-4}\\,\\mathrm{/^{\\circ}C}$ 是灵敏度分数温度系数。\n\n失调电压 $V_{\\text{off}}(T)$ 由一个在 $T_0$ 时的初始失调（我们称之为 $V_{\\text{off,init}}$）和一个随温度变化的漂移组成：\n$$V_{\\text{off}}(T) = V_{\\text{off,init}} + k_{\\mathrm{off}} (T - T_0)$$\n其中 $k_{\\mathrm{off}} = 1.5\\,\\mathrm{mV/^{\\circ}C}$ 是失调漂移。\n\n在参考温度 $T_0$ 进行了一次单点失调校准。这包括在零电流（$I=0$）和温度 $T=T_0$ 时测量输出，并从后续的测量中减去这个值。校准值 $V_{\\text{cal}}$ 为：\n$$V_{\\text{cal}} = V_{\\text{out}}(0, T_0) = S(T_0) \\cdot 0 + V_{\\text{off}}(T_0) = V_{\\text{off}}(T_0)$$\n根据失调模型，$V_{\\text{off}}(T_0) = V_{\\text{off,init}} + k_{\\mathrm{off}}(T_0 - T_0) = V_{\\text{off,init}}$。因此，校准步骤有效地测量并移除了初始失调，$V_{\\text{cal}} = V_{\\text{off,init}}$。\n\n在任意电流 $I$ 和温度 $T$ 下，校准后的输出电压 $V_{\\text{calibrated}}$ 为：\n$$V_{\\text{calibrated}}(I, T) = V_{\\text{out}}(I, T) - V_{\\text{cal}}$$\n$$V_{\\text{calibrated}}(I, T) = [S(T) \\cdot I + V_{\\text{off}}(T)] - V_{\\text{off,init}}$$\n代入 $S(T)$ 和 $V_{\\text{off}}(T)$ 的表达式：\n$$V_{\\text{calibrated}}(I, T) = [S_0 (1 + k_S (T - T_0)) \\cdot I + (V_{\\text{off,init}} + k_{\\mathrm{off}} (T - T_0))] - V_{\\text{off,init}}$$\n$$V_{\\text{calibrated}}(I, T) = S_0 (1 + k_S (T - T_0)) \\cdot I + k_{\\mathrm{off}} (T - T_0)$$\n这个方程对指定校准后的传感器输出进行建模。\n\n系统通过假设灵敏度为标称值 $S_0$ 且失调为零来估算电流 $I_{\\text{est}}$：\n$$I_{\\text{est}} = \\frac{V_{\\text{calibrated}}(I, T)}{S_0}$$\n代入 $V_{\\text{calibrated}}(I, T)$ 的表达式：\n$$I_{\\text{est}} = \\frac{S_0 (1 + k_S (T - T_0)) \\cdot I + k_{\\mathrm{off}} (T - T_0)}{S_0}$$\n$$I_{\\text{est}} = (1 + k_S (T - T_0)) \\cdot I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0)$$\n估算电流的分数误差 $\\epsilon_f$ 定义为 $\\frac{I_{\\text{est}} - I}{I}$。\n$$\\epsilon_f(I, T) = \\frac{[(1 + k_S (T - T_0)) \\cdot I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0)] - I}{I}$$\n$$\\epsilon_f(I, T) = \\frac{I + k_S (T - T_0) I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0) - I}{I}$$\n$$\\epsilon_f(I, T) = \\frac{k_S (T - T_0) I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0)}{I}$$\n分离各项，我们可以识别出误差的来源：\n$$\\epsilon_f(I, T) = k_S(T - T_0) + \\frac{k_{\\mathrm{off}}}{S_0 I}(T - T_0)$$\n$k_S(T - T_0)$ 项是由于灵敏度漂移引起的分数误差，而 $\\frac{k_{\\mathrm{off}}}{S_0 I}(T - T_0)$ 项是由于失调漂移引起的分数误差。\n这可以因式分解为：\n$$\\epsilon_f(I, T) = \\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)(T - T_0)$$\n为了找到最坏情况的分数误差，我们必须在指定的范围 $I \\in [5\\,\\mathrm{A}, 30\\,\\mathrm{A}]$ 和 $T \\in [-40^{\\circ}\\mathrm{C}, 125^{\\circ}\\mathrm{C}]$ 内找到 $\\epsilon_f(I, T)$ 的最大绝对值。\n令 $\\Delta T = T - T_0$。由于 $T_0 = 25^{\\circ}\\mathrm{C}$，$\\Delta T$ 的范围是：\n$$\\Delta T \\in [(-40 - 25), (125 - 25)] \\implies \\Delta T \\in [-65^{\\circ}\\mathrm{C}, 100^{\\circ}\\mathrm{C}]$$\n参数 $k_S$、$k_{\\mathrm{off}}$ 和 $S_0$ 都是正常数，电流 $I$ 也是正的。因此，$\\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)$ 项总是正的。\n为了最大化 $|\\epsilon_f(I, T)| = \\left|\\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)\\Delta T\\right| = \\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)|\\Delta T|$，我们必须最大化每个因子。\n\n1. 最大化 $|\\Delta T|$: $\\Delta T$ 的范围是 $[-65, 100]$。最大绝对值为 $|\\Delta T|_{\\max} = \\max(|-65|, |100|) = 100^{\\circ}\\mathrm{C}$，这发生在 $T_{\\max} = 125^{\\circ}\\mathrm{C}$。\n\n2. 最大化 $\\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)$：这一项是 $I$ 的函数。由于 $\\frac{k_{\\mathrm{off}}}{S_0}$ 是正的，当 $I$ 最小时，该项取得最大值。最小电流为 $I_{\\min} = 5\\,\\mathrm{A}$。\n\n结合这两个条件，最坏情况（最大幅值）误差发生在 $I = 5\\,\\mathrm{A}$ 和 $T = 125^{\\circ}\\mathrm{C}$ 时（或者可能是 $T = -40^{\\circ}\\mathrm{C}$，但这会给出更小的 $|\\Delta T|$）。误差函数的极值将出现在 $(I, T)$ 定义域的一个角点。由于 $\\Delta T$ 的前置因子总是正的，误差的符号与 $\\Delta T$ 的符号相同。最大幅值误差将发生在离 $T_0$ 最远的温度，即 $T=125^{\\circ}\\mathrm{C}$，以及使误差贡献最大化的电流，即 $I=5\\,\\mathrm{A}$。\n\n因此，最坏情况分数误差 $\\epsilon_{f, \\text{wc}}$ 为：\n$$\\epsilon_{f, \\text{wc}} = \\epsilon_f(5\\,\\mathrm{A}, 125^{\\circ}\\mathrm{C}) = \\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 \\cdot (5\\,\\mathrm{A})}\\right)(125^{\\circ}\\mathrm{C} - 25^{\\circ}\\mathrm{C})$$\n代入给定值：\n$$k_S = 7.0 \\times 10^{-4}\\,\\mathrm{/^{\\circ}C}$$\n$$k_{\\mathrm{off}} = 1.5\\,\\mathrm{mV/^{\\circ}C}$$\n$$S_0 = 185\\,\\mathrm{mV/A}$$\n$$\\epsilon_{f, \\text{wc}} = \\left(7.0 \\times 10^{-4} + \\frac{1.5}{185 \\cdot 5}\\right) \\cdot 100$$\n$$\\epsilon_{f, \\text{wc}} = \\left(7.0 \\times 10^{-4} + \\frac{1.5}{925}\\right) \\cdot 100$$\n我们可以计算其数值：\n$$\\epsilon_{f, \\text{wc}} = (0.0007 + 0.0016216216...) \\cdot 100$$\n$$\\epsilon_{f, \\text{wc}} = (0.0023216216...) \\cdot 100$$\n$$\\epsilon_{f, \\text{wc}} = 0.23216216...$$\n或者，在最终四舍五入之前使用分数以保证精度：\n$$\\epsilon_{f, \\text{wc}} = 100 \\cdot k_S + \\frac{100 \\cdot k_{\\mathrm{off}}}{S_0 \\cdot 5} = 100 \\cdot (7.0 \\times 10^{-4}) + \\frac{100 \\cdot 1.5}{185 \\cdot 5}$$\n$$\\epsilon_{f, \\text{wc}} = 0.07 + \\frac{150}{925}$$\n化简分数：$\\frac{150}{925} = \\frac{6 \\times 25}{37 \\times 25} = \\frac{6}{37}$。\n$$\\epsilon_{f, \\text{wc}} = 0.07 + \\frac{6}{37} = \\frac{7}{100} + \\frac{6}{37} = \\frac{7 \\cdot 37 + 6 \\cdot 100}{3700} = \\frac{259 + 600}{3700} = \\frac{859}{3700}$$\n$$\\epsilon_{f, \\text{wc}} = \\frac{859}{3700} \\approx 0.232162162...$$\n问题要求结果四舍五入到四位有效数字。\n前四位有效数字是 $2、3、2、1$。第五位有效数字是 $6$，所以我们将第四位数字向上取整。\n$$\\epsilon_{f, \\text{wc}} \\approx 0.2322$$\n这个大约 $23.22\\%$ 的最坏情况误差远大于所要求的精度 $\\epsilon=0.03$ 或 $3\\%$，表明未经补偿的传感器不适用于此设计要求。",
            "answer": "$$\\boxed{0.2322}$$"
        }
    ]
}
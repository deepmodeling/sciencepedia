{
    "hands_on_practices": [
        {
            "introduction": "Before analyzing any complex thermal system, we must first master the art of building its model from fundamental principles. This exercise guides you through the process of constructing a steady-state thermal resistance network for a single device with double-sided cooling. By starting from Fourier’s law of conduction and Newton’s law of cooling, you will derive the total effective thermal resistance, $R_{\\theta,\\mathrm{eff}}$, learning to correctly combine series and parallel resistances that represent the physical heat flow paths . This practice is foundational, providing you with the essential building blocks used in all subsequent thermal analyses.",
            "id": "3885315",
            "problem": "A double-sided cooled Wide Bandgap (WBG) power semiconductor half-bridge module comprises two identical switches mounted between two Direct-Bonded Copper (DBC) substrates and interfaced to top and bottom cold plates through Thermal Interface Materials (TIMs). Consider one switch dissipating a steady heat rate $Q$ that conducts in one dimension through two parallel paths (top and bottom) to the same ambient at temperature $T_{\\mathrm{a}}$, with convective boundary conditions at both external surfaces.\n\nAssume the top path consists of a fixed series stack of solid layers between the switch junction and the top TIM, with total conduction thermal resistance $R_{s,t}$, followed by the top TIM of thickness $d_{t}$ and thermal conductivity $k_{t}$ over area $A$, and then a convective boundary with heat transfer coefficient $h_{t}$ over the same area $A$. Similarly, the bottom path has a fixed series stack of solid layers with total conduction thermal resistance $R_{s,b}$, a bottom TIM of thickness $d_{b}$ and thermal conductivity $k_{b}$ over area $A$, and a convective boundary with heat transfer coefficient $h_{b}$ over area $A$. The junction temperature is $T_{\\mathrm{j}}$, and the ambient temperature is $T_{\\mathrm{a}}$.\n\nStarting only from the steady one-dimensional form of Fourier’s law of heat conduction and Newton’s law of cooling, construct the equivalent thermal network and derive a closed-form analytical expression for the effective junction-to-ambient thermal resistance $R_{\\theta,\\mathrm{eff}}(d_{t},d_{b})$ of the single switch when the top and bottom paths are connected in parallel to the same ambient. Express the final effective thermal resistance in $\\mathrm{K/W}$. Provide your answer as a single closed-form analytic expression in terms of $R_{s,t}$, $R_{s,b}$, $d_{t}$, $d_{b}$, $k_{t}$, $k_{b}$, $h_{t}$, $h_{b}$, and $A$. Do not substitute any numerical values. No intermediate or shortcut formulas are permitted in the problem statement. The final answer must be a single closed-form analytic expression.",
            "solution": "The problem statement has been analyzed and is deemed valid. It is scientifically grounded, well-posed, objective, and contains all necessary information to derive the requested expression from fundamental principles.\n\nThe objective is to derive an expression for the effective junction-to-ambient thermal resistance, $R_{\\theta,\\mathrm{eff}}$, for a single power semiconductor switch cooled from both top and bottom sides. The system is modeled with two parallel thermal paths from the device junction at temperature $T_{\\mathrm{j}}$ to a common ambient at temperature $T_{\\mathrm{a}}$. The total heat dissipated by the switch is $Q$.\n\nThe concept of thermal resistance, $R_{\\theta}$, is analogous to electrical resistance and is defined for a steady heat flow $Q$ as the ratio of the temperature difference, $\\Delta T$, across a thermal path to the heat flow through it:\n$$R_{\\theta} = \\frac{\\Delta T}{Q}$$\nThe unit of thermal resistance is Kelvin per Watt, $\\mathrm{K/W}$.\n\nWe will first derive the expressions for conduction and convection thermal resistances from the fundamental laws provided.\n\n**1. Conduction Thermal Resistance**\nFor steady, one-dimensional heat conduction through a solid material, Fourier's law states that the heat flux, $q'' = Q/A$, is proportional to the temperature gradient:\n$$q'' = -k \\frac{dT}{dx}$$\nwhere $Q$ is the heat flow rate, $A$ is the cross-sectional area normal to the heat flow, $k$ is the thermal conductivity of the material, and $\\frac{dT}{dx}$ is the temperature gradient. For a planar layer of thickness $d$ with constant cross-sectional area $A$ and thermal conductivity $k$, we can integrate this equation across the thickness of the layer, from $x=0$ to $x=d$, with corresponding temperatures $T_{1}$ and $T_{2}$:\n$$Q \\int_0^d dx = -kA \\int_{T_1}^{T_2} dT$$\n$$Q d = -kA (T_{2} - T_{1}) = kA (T_{1} - T_{2})$$\nThe temperature difference across the layer is $\\Delta T = T_{1} - T_{2}$. Thus,\n$$Q = \\frac{kA}{d} \\Delta T$$\nThe conduction thermal resistance, $R_{\\theta,\\mathrm{cond}}$, is therefore:\n$$R_{\\theta,\\mathrm{cond}} = \\frac{\\Delta T}{Q} = \\frac{d}{kA}$$\n\n**2. Convection Thermal Resistance**\nFor heat transfer from a solid surface to a surrounding fluid, Newton's law of cooling states:\n$$Q = hA (T_{\\mathrm{s}} - T_{\\mathrm{a}})$$\nwhere $h$ is the convective heat transfer coefficient, $A$ is the surface area, $T_{\\mathrm{s}}$ is the surface temperature, and $T_{\\mathrm{a}}$ is the ambient fluid temperature. The temperature difference driving the heat flow is $\\Delta T = T_{\\mathrm{s}} - T_{\\mathrm{a}}$.\nThe convection thermal resistance, $R_{\\theta,\\mathrm{conv}}$, is therefore:\n$$R_{\\theta,\\mathrm{conv}} = \\frac{\\Delta T}{Q} = \\frac{1}{hA}$$\n\n**3. Equivalent Thermal Network Construction**\nThe system consists of two parallel paths for heat to flow from the junction to the ambient. The total thermal resistance of each path is the sum of the series resistances within that path.\n\n**Top Path Thermal Resistance ($R_{\\theta,t}$):**\nThe top path consists of three thermal resistances in series:\n1.  The resistance of the fixed solid layers, given as $R_{s,t}$.\n2.  The conduction resistance of the top Thermal Interface Material (TIM), $R_{\\theta,\\mathrm{TIM},t}$. Using the derived formula for conduction resistance, with thickness $d_{t}$ and thermal conductivity $k_{t}$ over an area $A$:\n    $$R_{\\theta,\\mathrm{TIM},t} = \\frac{d_{t}}{k_{t} A}$$\n3.  The convection resistance from the top cold plate to the ambient, $R_{\\theta,\\mathrm{conv},t}$. Using the derived formula for convection resistance, with heat transfer coefficient $h_{t}$ over an area $A$:\n    $$R_{\\theta,\\mathrm{conv},t} = \\frac{1}{h_{t} A}$$\n\nThe total thermal resistance of the top path, $R_{\\theta,t}$, is the sum of these series components:\n$$R_{\\theta,t} = R_{s,t} + R_{\\theta,\\mathrm{TIM},t} + R_{\\theta,\\mathrm{conv},t} = R_{s,t} + \\frac{d_{t}}{k_{t} A} + \\frac{1}{h_{t} A}$$\n\n**Bottom Path Thermal Resistance ($R_{\\theta,b}$):**\nSimilarly, the bottom path consists of three thermal resistances in series:\n1.  The resistance of the fixed solid layers, given as $R_{s,b}$.\n2.  The conduction resistance of the bottom TIM, $R_{\\theta,\\mathrm{TIM},b}$, with thickness $d_{b}$ and thermal conductivity $k_{b}$ over an area $A$:\n    $$R_{\\theta,\\mathrm{TIM},b} = \\frac{d_{b}}{k_{b} A}$$\n3.  The convection resistance from the bottom cold plate to the ambient, $R_{\\theta,\\mathrm{conv},b}$, with heat transfer coefficient $h_{b}$ over an area $A$:\n    $$R_{\\theta,\\mathrm{conv},b} = \\frac{1}{h_{b} A}$$\n\nThe total thermal resistance of the bottom path, $R_{\\theta,b}$, is the sum of these series components:\n$$R_{\\theta,b} = R_{s,b} + R_{\\theta,\\mathrm{TIM},b} + R_{\\theta,\\mathrm{conv},b} = R_{s,b} + \\frac{d_{b}}{k_{b} A} + \\frac{1}{h_{b} A}$$\n\n**4. Effective Junction-to-Ambient Thermal Resistance ($R_{\\theta,\\mathrm{eff}}$)**\nThe constructed thermal network shows the junction node at temperature $T_{\\mathrm{j}}$ connected to the ambient node at temperature $T_{\\mathrm{a}}$ through two parallel branches with total resistances $R_{\\theta,t}$ and $R_{\\theta,b}$. The total heat $Q$ from the junction splits into $Q_t$ and $Q_b$ such that $Q = Q_t + Q_b$.\nThe effective junction-to-ambient thermal resistance, $R_{\\theta,\\mathrm{eff}}$, is the equivalent resistance of these two parallel resistances. The formula for the equivalent resistance of two parallel resistors is:\n$$\\frac{1}{R_{\\theta,\\mathrm{eff}}} = \\frac{1}{R_{\\theta,t}} + \\frac{1}{R_{\\theta,b}}$$\nSolving for $R_{\\theta,\\mathrm{eff}}$ yields:\n$$R_{\\theta,\\mathrm{eff}} = \\frac{R_{\\theta,t} R_{\\theta,b}}{R_{\\theta,t} + R_{\\theta,b}}$$\nSubstituting the expressions for $R_{\\theta,t}$ and $R_{\\theta,b}$ derived above, we obtain the final closed-form analytical expression for the effective junction-to-ambient thermal resistance as a function of the given parameters:\n$$R_{\\theta,\\mathrm{eff}}(d_{t},d_{b}) = \\frac{\\left( R_{s,t} + \\frac{d_{t}}{k_{t} A} + \\frac{1}{h_{t} A} \\right) \\left( R_{s,b} + \\frac{d_{b}}{k_{b} A} + \\frac{1}{h_{b} A} \\right)}{\\left( R_{s,t} + \\frac{d_{t}}{k_{t} A} + \\frac{1}{h_{t} A} \\right) + \\left( R_{s,b} + \\frac{d_{b}}{k_{b} A} + \\frac{1}{h_{b} A} \\right)}$$\nThis expression can be rearranged to group terms, but it is a complete and correct single closed-form expression as requested.\n$$R_{\\theta,\\mathrm{eff}}(d_{t},d_{b}) = \\frac{\\left( R_{s,t} + \\frac{1}{A} \\left( \\frac{d_{t}}{k_{t}} + \\frac{1}{h_{t}} \\right) \\right) \\left( R_{s,b} + \\frac{1}{A} \\left( \\frac{d_{b}}{k_{b}} + \\frac{1}{h_{b}} \\right) \\right)}{R_{s,t} + R_{s,b} + \\frac{1}{A} \\left( \\frac{d_{t}}{k_{t}} + \\frac{d_{b}}{k_{b}} + \\frac{1}{h_{t}} + \\frac{1}{h_{b}} \\right)}$$\nThis is the final answer.",
            "answer": "$$\n\\boxed{\\frac{\\left( R_{s,t} + \\frac{d_{t}}{k_{t} A} + \\frac{1}{h_{t} A} \\right) \\left( R_{s,b} + \\frac{d_{b}}{k_{b} A} + \\frac{1}{h_{b} A} \\right)}{R_{s,t} + R_{s,b} + \\frac{d_{t}}{k_{t} A} + \\frac{d_{b}}{k_{b} A} + \\frac{1}{h_{t} A} + \\frac{1}{h_{b} A}}}\n$$"
        },
        {
            "introduction": "Modern power modules increase density by packaging multiple semiconductor dies in close proximity. This proximity, however, introduces thermal cross-coupling, where the heat dissipated by one die raises the temperature of its neighbors. This practice elevates our analysis from a single device to a multi-die system . You will apply the principle of superposition to construct a thermal resistance matrix, $\\mathbf{R}_{\\mathrm{th}}$, that captures both the self-heating of each die and the cross-heating effects between them. Solving this system allows you to predict the individual operating temperatures of each die under asymmetric power loading, a critical skill for designing reliable, high-density modules.",
            "id": "3885348",
            "problem": "A three-die Silicon Carbide (SiC) Wide Bandgap (WBG) power module uses double-sided cooling: each die is thermally connected to a liquid-cooled lid on the top and a liquid-cooled baseplate on the bottom. The coolant entering the top and bottom cold plates is at the same temperature. The three dies, labeled $A$, $B$, and $C$, are mounted on a common Direct-Bonded Copper (DBC) substrate. Lateral heat spreading in the shared substrate introduces cross-coupling of temperature rises among dies. The system operates at steady state.\n\nStarting from Fourier’s law of heat conduction and the definition of thermal resistance, derive a linear multi-die thermal network representation that captures double-sided cooling and cross coupling. Clearly justify how the double-sided cooling leads to a parallel combination for the self-resistance of each die to the coolant, and how linearity and superposition lead to a thermal resistance matrix mapping the power dissipation vector to the junction temperature vector. Then, using the provided data, compute the steady-state junction temperatures of the three dies for unequal power dissipation.\n\nUse the following scientifically plausible data:\n- Coolant temperature (both sides): $T_{\\mathrm{amb}} = 25\\,^{\\circ}\\mathrm{C}$.\n- Top-side die-to-coolant thermal resistances: $R_{\\text{top},A} = 0.12\\ \\mathrm{K/W}$, $R_{\\text{top},B} = 0.10\\ \\mathrm{K/W}$, $R_{\\text{top},C} = 0.11\\ \\mathrm{K/W}$.\n- Bottom-side die-to-coolant thermal resistances: $R_{\\text{bot},A} = 0.18\\ \\mathrm{K/W}$, $R_{\\text{bot},B} = 0.20\\ \\mathrm{K/W}$, $R_{\\text{bot},C} = 0.19\\ \\mathrm{K/W}$.\n- Symmetric cross-coupling resistances due to lateral spreading in the shared substrate and package stack-up: $R_{AB} = R_{BA} = 0.015\\ \\mathrm{K/W}$, $R_{AC} = R_{CA} = 0.012\\ \\mathrm{K/W}$, $R_{BC} = R_{CB} = 0.017\\ \\mathrm{K/W}$.\n- Power dissipations: $P_A = 180\\ \\mathrm{W}$, $P_B = 120\\ \\mathrm{W}$, $P_C = 90\\ \\mathrm{W}$.\n\nExpress the final junction temperatures for dies $A$, $B$, and $C$ in degrees Celsius as a single row matrix $\\begin{pmatrix}T_A  T_B  T_C\\end{pmatrix}$. Round your answer to four significant figures.",
            "solution": "The problem statement is first validated to ensure it is scientifically grounded, well-posed, and objective.\n\n**Step 1: Extract Givens**\n- System: Three-die (A, B, C) Silicon Carbide (SiC) Wide Bandgap (WBG) power module with double-sided cooling.\n- Coolant temperature: $T_{\\mathrm{amb}} = 25\\,^{\\circ}\\mathrm{C}$.\n- Top-side die-to-coolant thermal resistances: $R_{\\text{top},A} = 0.12\\ \\mathrm{K/W}$, $R_{\\text{top},B} = 0.10\\ \\mathrm{K/W}$, $R_{\\text{top},C} = 0.11\\ \\mathrm{K/W}$.\n- Bottom-side die-to-coolant thermal resistances: $R_{\\text{bot},A} = 0.18\\ \\mathrm{K/W}$, $R_{\\text{bot},B} = 0.20\\ \\mathrm{K/W}$, $R_{\\text{bot},C} = 0.19\\ \\mathrm{K/W}$.\n- Symmetric cross-coupling resistances: $R_{AB} = R_{BA} = 0.015\\ \\mathrm{K/W}$, $R_{AC} = R_{CA} = 0.012\\ \\mathrm{K/W}$, $R_{BC} = R_{CB} = 0.017\\ \\mathrm{K/W}$.\n- Power dissipations: $P_A = 180\\ \\mathrm{W}$, $P_B = 120\\ \\mathrm{W}$, $P_C = 90\\ \\mathrm{W}$.\n- Operating condition: Steady state.\n- Objective: Derive the linear thermal model and compute the steady-state junction temperatures $T_A$, $T_B$, $T_C$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is evaluated against the validation criteria.\n- **Scientifically Grounded:** The problem is based on Fourier's law of heat conduction and its application to thermal networks, which are fundamental and well-established principles in thermal engineering. The concepts of double-sided cooling, thermal resistance, and cross-coupling in power modules are standard in the field of power electronics packaging. The provided values are physically plausible.\n- **Well-Posed:** The problem provides all necessary data (thermal resistances, power dissipations, ambient temperature) to establish a linear system of equations. The number of equations matches the number of unknowns (the three junction temperatures), leading to a unique solution.\n- **Objective:** The problem is described using precise, technical language common in engineering, with no subjective or ambiguous terms.\n\nThe problem is free from the flaws listed in the instructions. It is scientifically sound, formalizable, complete, realistic, and well-posed.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A detailed solution will be provided.\n\n**Derivation of the Thermal Model and Solution**\n\nThe analysis begins with the fundamental principles of heat transfer at steady state. Fourier's law of one-dimensional heat conduction states that the heat flow rate, $q$, is proportional to the temperature gradient $\\frac{dT}{dx}$ and the area $A$ normal to the flow: $q = -kA \\frac{dT}{dx}$, where $k$ is the thermal conductivity. For a finite thickness $L$, this can be integrated to yield $q = \\frac{\\Delta T}{L/(kA)}$. We define the thermal resistance as $R_{th} = \\frac{L}{kA}$, which simplifies the relation to an form analogous to Ohm's Law ($V=IR$):\n$$ \\Delta T = P \\cdot R_{th} $$\nHere, the temperature difference $\\Delta T$ is analogous to voltage drop, the power dissipation $P$ (heat flow rate) is analogous to current, and $R_{th}$ is the thermal resistance. This analogy allows us to model a complex thermal system as a network of thermal resistors.\n\n**Double-Sided Cooling and Self-Resistance:**\nFor each die, the power dissipated is conducted away through two primary paths: one upwards through the top-side thermal stack to the top-side coolant, and one downwards through the substrate and baseplate to the bottom-side coolant. Since both coolant paths terminate at the same reference temperature, $T_{\\mathrm{amb}}$, these two paths are thermally in parallel. The self-heating resistance of a die, which relates its own power dissipation to its temperature rise, is the equivalent resistance of these two parallel paths. For a die $j$ (where $j \\in \\{A, B, C\\}$), the effective self-resistance $R_{jj}$ is given by:\n$$ R_{jj} = \\left( \\frac{1}{R_{\\text{top},j}} + \\frac{1}{R_{\\text{bot},j}} \\right)^{-1} = \\frac{R_{\\text{top},j} R_{\\text{bot},j}}{R_{\\text{top},j} + R_{\\text{bot},j}} $$\n\n**Linearity, Superposition, and Cross-Coupling:**\nThe heat conduction equation is linear for temperature-independent material properties. This allows us to use the principle of superposition. The total temperature rise at the junction of any given die is the linear sum of the temperature rises caused by its own power dissipation (self-heating) and the power dissipated by the other dies (cross-heating). The cross-heating occurs due to lateral heat spreading in the shared substrate.\n\nThe temperature rise of die $i$ above ambient, $\\Delta T_i = T_i - T_{\\mathrm{amb}}$, can be expressed as:\n$$ \\Delta T_i = R_{iA} P_A + R_{iB} P_B + R_{iC} P_C = \\sum_{j \\in \\{A, B, C\\}} R_{ij} P_j $$\nHere, $R_{ii}$ is the effective self-resistance calculated above, and $R_{ij}$ for $i \\neq j$ is the given cross-coupling thermal resistance, which quantifies the temperature rise at die $i$ due to a unit of power dissipated at die $j$.\n\nThis system of linear equations for all three dies is most compactly expressed in matrix form:\n$$ \\begin{pmatrix} \\Delta T_A \\\\ \\Delta T_B \\\\ \\Delta T_C \\end{pmatrix} = \\begin{pmatrix} R_{AA}  R_{AB}  R_{AC} \\\\ R_{BA}  R_{BB}  R_{BC} \\\\ R_{CA}  R_{CB}  R_{CC} \\end{pmatrix} \\begin{pmatrix} P_A \\\\ P_B \\\\ P_C \\end{pmatrix} $$\nThis is denoted as $\\Delta \\mathbf{T} = \\mathbf{R}_{\\mathrm{th}} \\mathbf{P}$.\n\n**Numerical Calculation**\n\nFirst, we calculate the diagonal elements of the thermal resistance matrix $\\mathbf{R}_{\\mathrm{th}}$:\n$$ R_{AA} = \\left( \\frac{1}{0.12} + \\frac{1}{0.18} \\right)^{-1} = \\frac{0.12 \\times 0.18}{0.12 + 0.18} = \\frac{0.0216}{0.30} = 0.072\\ \\mathrm{K/W} $$\n$$ R_{BB} = \\left( \\frac{1}{0.10} + \\frac{1}{0.20} \\right)^{-1} = \\frac{0.10 \\times 0.20}{0.10 + 0.20} = \\frac{0.02}{0.30} = \\frac{1}{15} \\approx 0.06667\\ \\mathrm{K/W} $$\n$$ R_{CC} = \\left( \\frac{1}{0.11} + \\frac{1}{0.19} \\right)^{-1} = \\frac{0.11 \\times 0.19}{0.11 + 0.19} = \\frac{0.0209}{0.30} \\approx 0.06967\\ \\mathrm{K/W} $$\n\nThe full thermal resistance matrix $\\mathbf{R}_{\\mathrm{th}}$ is assembled using these self-resistances and the given cross-coupling resistances:\n$$ \\mathbf{R}_{\\mathrm{th}} = \\begin{pmatrix} 0.072  0.015  0.012 \\\\ 0.015  1/15  0.017 \\\\ 0.012  0.017  0.0209/0.30 \\end{pmatrix}\\ \\mathrm{K/W} $$\n\nThe power dissipation vector $\\mathbf{P}$ is:\n$$ \\mathbf{P} = \\begin{pmatrix} 180 \\\\ 120 \\\\ 90 \\end{pmatrix}\\ \\mathrm{W} $$\n\nNow, we compute the temperature rise vector $\\Delta \\mathbf{T} = \\mathbf{R}_{\\mathrm{th}} \\mathbf{P}$:\n$$ \\Delta T_A = (0.072 \\times 180) + (0.015 \\times 120) + (0.012 \\times 90) = 12.96 + 1.80 + 1.08 = 15.84\\ \\mathrm{K} $$\n$$ \\Delta T_B = (0.015 \\times 180) + \\left(\\frac{1}{15} \\times 120\\right) + (0.017 \\times 90) = 2.70 + 8.00 + 1.53 = 12.23\\ \\mathrm{K} $$\n$$ \\Delta T_C = (0.012 \\times 180) + (0.017 \\times 120) + \\left(\\frac{0.0209}{0.30} \\times 90\\right) = 2.16 + 2.04 + (0.0209 \\times 300) = 2.16 + 2.04 + 6.27 = 10.47\\ \\mathrm{K} $$\n\nThe temperature rises are $\\Delta T_A = 15.84\\,^{\\circ}\\mathrm{C}$, $\\Delta T_B = 12.23\\,^{\\circ}\\mathrm{C}$, and $\\Delta T_C = 10.47\\,^{\\circ}\\mathrm{C}$. A change in temperature in Kelvin (K) is equal to a change in temperature in degrees Celsius ($^{\\circ}\\mathrm{C}$).\n\nFinally, the absolute junction temperatures are found by adding the ambient temperature $T_{\\mathrm{amb}} = 25\\,^{\\circ}\\mathrm{C}$:\n$$ T_A = T_{\\mathrm{amb}} + \\Delta T_A = 25 + 15.84 = 40.84\\,^{\\circ}\\mathrm{C} $$\n$$ T_B = T_{\\mathrm{amb}} + \\Delta T_B = 25 + 12.23 = 37.23\\,^{\\circ}\\mathrm{C} $$\n$$ T_C = T_{\\mathrm{amb}} + \\Delta T_C = 25 + 10.47 = 35.47\\,^{\\circ}\\mathrm{C} $$\n\nThe requested answer is the row matrix of these temperatures, rounded to four significant figures.\n$T_A = 40.84$\n$T_B = 37.23$\n$T_C = 35.47$\nThe values are already at the required precision.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n40.84  37.23  35.47\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "The most accurate thermal analyses recognize that the electrical and thermal domains are not independent but are intrinsically coupled. A device's power dissipation depends on its electrical properties, which in turn are a function of its temperature. This capstone practice challenges you to model this electro-thermal feedback loop by analyzing current sharing among parallel MOSFETs . You will formulate and solve a system of non-linear equations that links the temperature-dependent on-resistance, $R_{DS(on)}(T)$, of each device to the multi-die thermal network. This advanced exercise provides powerful insight into real-world phenomena like current imbalance and is essential for assessing the risk of thermal runaway in parallel device arrays.",
            "id": "3885335",
            "problem": "A programmer is asked to model temperature-dependent current sharing among parallel metal-oxide-semiconductor field-effect transistors (MOSFETs) in a Wide Bandgap (WBG) power module with double-sided cooling. The goal is to identify imbalance risks caused by the coupling of the temperature-dependent drain-to-source on-resistance and a thermal network that captures two-sided heat removal and inter-device thermal coupling.\n\nStart from the following fundamental bases:\n- Ohm’s law for conduction through each MOSFET channel: the drain-to-source voltage is given by $V = I_i R_i(T_i)$, where $I_i$ is the current through device $i$, $R_i(T_i)$ is the temperature-dependent drain-to-source on-resistance of device $i$, and $T_i$ is the junction temperature of device $i$.\n- The definition of thermal resistance in steady state: for a linear thermal network, the junction temperature rise of device $i$ relative to ambient satisfies $T_i - T_{\\text{amb}} = \\sum_{j=1}^N R_{ij} P_j$, where $R_{ij}$ are the elements of a thermal resistance matrix (in $\\text{K}/\\text{W}$) capturing self-resistance and cross-couplings under double-sided cooling, $P_j$ is the power dissipated in device $j$, and $N$ is the number of parallel devices.\n- Power dissipation in purely resistive conduction for device $j$ is $P_j = I_j^2 R_j(T_j)$.\n- Parallel connection implies a common drain-to-source voltage $V$ across all devices and a total current constraint $\\sum_{i=1}^N I_i = I_{\\text{tot}}$.\n\nAssume the following physically realistic and widely used parametrization of the temperature dependence of the drain-to-source on-resistance for device $i$:\n$R_i(T_i) = R_{0,i}\\left(1 + \\alpha_i (T_i - T_{\\text{ref}})\\right)$,\nwhere $R_{0,i}$ is the drain-to-source on-resistance at reference temperature $T_{\\text{ref}}$, and $\\alpha_i$ is the temperature coefficient (in $\\text{K}^{-1}$).\n\nYour task is to:\n- Formulate and numerically solve the coupled non-linear equations for the unknown junction temperatures $\\{T_i\\}_{i=1}^N$ and the common drain-to-source voltage $V$ such that the electrical and thermal constraints are satisfied simultaneously.\n- From the solution, compute the currents $\\{I_i\\}_{i=1}^N$ and assess current sharing imbalance by the metric $\\gamma = \\max_i \\left|I_i - I_{\\text{avg}}\\right| / I_{\\text{avg}}$, with $I_{\\text{avg}} = I_{\\text{tot}}/N$.\n- Identify an imbalance risk if either $\\gamma$ exceeds a specified threshold $\\gamma_{\\text{crit}}$ (expressed as a decimal) or the maximum junction temperature exceeds an allowable limit $T_{\\text{j,max}}^{\\text{allow}}$.\n\nPhysical units to use are:\n- Current in $\\text{A}$,\n- Voltage in $\\text{V}$,\n- Temperature in $\\text{K}$,\n- Thermal resistance in $\\text{K}/\\text{W}$,\n- Drain-to-source on-resistance in $\\Omega$,\n- The imbalance metric $\\gamma$ is unitless and must be expressed as a decimal.\n\nImplement a program that solves the system for the following test suite. For each case, the thermal resistance matrix $R$ models double-sided cooling self-resistances on the diagonal and inter-device coupling on the off-diagonals.\n\nTest Suite:\n- Case $1$ (happy path, symmetric devices and cooling):\n  - $N = 2$,\n  - $I_{\\text{tot}} = 200.0$ $\\text{A}$,\n  - $T_{\\text{amb}} = 300.0$ $\\text{K}$,\n  - $T_{\\text{ref}} = 300.0$ $\\text{K}$,\n  - $R_{0} = [0.0020, 0.0020]$ $\\Omega$,\n  - $\\alpha = [0.0040, 0.0040]$ $\\text{K}^{-1}$,\n  - Thermal resistance matrix $R$ (in $\\text{K}/\\text{W}$): $\\begin{bmatrix}0.15  0.02\\\\ 0.02  0.15\\end{bmatrix}$,\n  - $\\gamma_{\\text{crit}} = 0.10$,\n  - $T_{\\text{j,max}}^{\\text{allow}} = 448.0$ $\\text{K}$.\n- Case $2$ (mismatch in $R_{0}$ and asymmetric double-sided cooling):\n  - $N = 2$,\n  - $I_{\\text{tot}} = 300.0$ $\\text{A}$,\n  - $T_{\\text{amb}} = 300.0$ $\\text{K}$,\n  - $T_{\\text{ref}} = 300.0$ $\\text{K}$,\n  - $R_{0} = [0.0022, 0.0018]$ $\\Omega$,\n  - $\\alpha = [0.0040, 0.0040]$ $\\text{K}^{-1}$,\n  - Thermal resistance matrix $R$ (in $\\text{K}/\\text{W}$): $\\begin{bmatrix}0.18  0.03\\\\ 0.03  0.12\\end{bmatrix}$,\n  - $\\gamma_{\\text{crit}} = 0.10$,\n  - $T_{\\text{j,max}}^{\\text{allow}} = 448.0$ $\\text{K}$.\n- Case $3$ (stronger coupling and one device with weaker double-sided cooling, elevated ambient):\n  - $N = 3$,\n  - $I_{\\text{tot}} = 360.0$ $\\text{A}$,\n  - $T_{\\text{amb}} = 333.0$ $\\text{K}$,\n  - $T_{\\text{ref}} = 300.0$ $\\text{K}$,\n  - $R_{0} = [0.0020, 0.0020, 0.0020]$ $\\Omega$,\n  - $\\alpha = [0.0040, 0.0040, 0.0040]$ $\\text{K}^{-1}$,\n  - Thermal resistance matrix $R$ (in $\\text{K}/\\text{W}$): $\\begin{bmatrix}0.15  0.03  0.03\\\\ 0.03  0.15  0.03\\\\ 0.03  0.03  0.25\\end{bmatrix}$,\n  - $\\gamma_{\\text{crit}} = 0.10$,\n  - $T_{\\text{j,max}}^{\\text{allow}} = 448.0$ $\\text{K}$.\n\nYour program must:\n- Numerically solve the coupled equations for each test case,\n- Compute the imbalance metric $\\gamma$ (unitless, decimal),\n- Determine the boolean risk flag per case as $ \\text{risk} = (\\gamma  \\gamma_{\\text{crit}}) \\lor \\left(\\max_i T_i  T_{\\text{j,max}}^{\\text{allow}}\\right)$,\n- Produce a single line of output containing the results as a comma-separated list enclosed in square brackets. The output must be in the order: $[\\gamma_1,\\text{risk}_1,\\gamma_2,\\text{risk}_2,\\gamma_3,\\text{risk}_3]$, where $\\gamma_k$ is a float and $\\text{risk}_k$ is a boolean for case $k$.\n\nAnswer all numerical quantities in the specified units and express any fraction or percentage as a decimal without the percent sign. No external input is permitted; the program must run as-is and print the final results in the exact format specified.",
            "solution": "The problem statement is evaluated for validity prior to attempting a solution.\n\n### Step 1: Extract Givens\nThe problem provides the following physical laws, definitions, and model parameters:\n\n- **Ohm's Law**: $V = I_i R_i(T_i)$ for each device $i$, where $V$ is a common voltage.\n- **Kirchhoff's Current Law**: $\\sum_{i=1}^N I_i = I_{\\text{tot}}$.\n- **Steady-State Thermal Network**: $T_i - T_{\\text{amb}} = \\sum_{j=1}^N R_{ij} P_j$, where $R_{ij}$ are elements of a thermal resistance matrix $\\mathbf{R}$.\n- **Power Dissipation**: $P_j = I_j^2 R_j(T_j)$.\n- **Temperature-Dependent Resistance**: $R_i(T_i) = R_{0,i}\\left(1 + \\alpha_i (T_i - T_{\\text{ref}})\\right)$.\n- **Current Imbalance Metric**: $\\gamma = \\max_i \\left|I_i - I_{\\text{avg}}\\right| / I_{\\text{avg}}$, with $I_{\\text{avg}} = I_{\\text{tot}}/N$.\n- **Risk Condition**: An imbalance risk is flagged if $\\gamma  \\gamma_{\\text{crit}}$ or $\\max_i T_i  T_{\\text{j,max}}^{\\text{allow}}$.\n\nTest Cases:\n- **Case 1**: $N = 2$, $I_{\\text{tot}} = 200.0$ $\\text{A}$, $T_{\\text{amb}} = 300.0$ $\\text{K}$, $T_{\\text{ref}} = 300.0$ $\\text{K}$, $R_{0} = [0.0020, 0.0020]$ $\\Omega$, $\\alpha = [0.0040, 0.0040]$ $\\text{K}^{-1}$, $\\mathbf{R} = \\begin{bmatrix}0.15  0.02\\\\ 0.02  0.15\\end{bmatrix}$ $\\text{K}/\\text{W}$, $\\gamma_{\\text{crit}} = 0.10$, $T_{\\text{j,max}}^{\\text{allow}} = 448.0$ $\\text{K}$.\n- **Case 2**: $N = 2$, $I_{\\text{tot}} = 300.0$ $\\text{A}$, $T_{\\text{amb}} = 300.0$ $\\text{K}$, $T_{\\text{ref}} = 300.0$ $\\text{K}$, $R_{0} = [0.0022, 0.0018]$ $\\Omega$, $\\alpha = [0.0040, 0.0040]$ $\\text{K}^{-1}$, $\\mathbf{R} = \\begin{bmatrix}0.18  0.03\\\\ 0.03  0.12\\end{bmatrix}$ $\\text{K}/\\text{W}$, $\\gamma_{\\text{crit}} = 0.10$, $T_{\\text{j,max}}^{\\text{allow}} = 448.0$ $\\text{K}$.\n- **Case 3**: $N = 3$, $I_{\\text{tot}} = 360.0$ $\\text{A}$, $T_{\\text{amb}} = 333.0$ $\\text{K}$, $T_{\\text{ref}} = 300.0$ $\\text{K}$, $R_{0} = [0.0020, 0.0020, 0.0020]$ $\\Omega$, $\\alpha = [0.0040, 0.0040, 0.0040]$ $\\text{K}^{-1}$, $\\mathbf{R} = \\begin{bmatrix}0.15  0.03  0.03\\\\ 0.03  0.15  0.03\\\\ 0.03  0.03  0.25\\end{bmatrix}$ $\\text{K}/\\text{W}$, $\\gamma_{\\text{crit}} = 0.10$, $T_{\\text{j,max}}^{\\text{allow}} = 448.0$ $\\text{K}$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is assessed based on the established criteria.\n\n- **Scientifically Grounded**: The problem is founded on fundamental principles of electrical circuits (Ohm's Law, KCL) and heat transfer (thermal resistance). The temperature-dependent resistance model is a standard first-order approximation for semiconductor devices. The entire premise is a well-established electro-thermal co-design problem in power electronics.\n- **Well-Posed**: The problem requires solving a system of coupled non-linear equations. It provides a complete set of parameters and boundary conditions for each test case, making the system solvable. The unknowns are clearly defined ($T_i$, $V$), and the constraints are sufficient to determine a unique physical solution. The positive temperature coefficient of resistance ($\\alpha  0$) provides a stabilizing negative feedback loop for current, which typically ensures a stable, unique solution exists.\n- **Objective**: The problem is stated in precise mathematical and engineering terms. The criteria for success ($\\gamma$, $T_{\\text{j,max}}$) are quantitative and unambiguous.\n- **Other Flaws**: The problem is free from the listed flaws. It is not self-contradictory, incomplete, or based on pseudoscience. The numerical values given are realistic for wide bandgap power modules.\n\n### Step 3: Verdict and Action\nThe problem is valid as it is scientifically sound, well-posed, objective, and provides all necessary information for a solution. A solution will be developed.\n\n### Principle-Based Solution Design\n\nThe core of the problem is to find a self-consistent steady-state operating point for a system of $N$ parallel MOSFETs, where the electrical behavior depends on temperature, and the temperature depends on the electrical behavior. This requires solving a system of coupled non-linear equations.\n\n#### 1. Formulation of the Governing Equations\nWe begin with the provided fundamental relationships. For a system of $N$ devices, there are $N+1$ primary unknowns: the $N$ junction temperatures $\\{T_1, T_2, \\ldots, T_N\\}$ and the common drain-to-source voltage $V$. We must formulate $N+1$ independent equations.\n\nFrom Ohm's Law and the parallel connection, the current through device $i$ is:\n$$I_i = \\frac{V}{R_i(T_i)}$$\nwhere $R_i(T_i)$ is the temperature-dependent on-resistance:\n$$R_i(T_i) = R_{0,i}\\left(1 + \\alpha_i (T_i - T_{\\text{ref}})\\right)$$\n\nThe power dissipated by device $j$, $P_j$, is given by:\n$$P_j = I_j^2 R_j(T_j) = \\left(\\frac{V}{R_j(T_j)}\\right)^2 R_j(T_j) = \\frac{V^2}{R_j(T_j)}$$\n\nThe junction temperatures are determined by the thermal network:\n$$T_i = T_{\\text{amb}} + \\sum_{j=1}^N R_{ij} P_j \\quad \\text{for } i=1, \\ldots, N$$\nSubstituting the expression for power, we obtain $N$ thermal equations:\n$$T_i = T_{\\text{amb}} + \\sum_{j=1}^N R_{ij} \\frac{V^2}{R_j(T_j)} \\quad (1)$$\n\nAn additional equation comes from the total current constraint (Kirchhoff's Current Law):\n$$\\sum_{i=1}^N I_i = I_{\\text{tot}} \\implies \\sum_{i=1}^N \\frac{V}{R_i(T_i)} = I_{\\text{tot}}$$\nThis allows us to express the voltage $V$ as a function of the junction temperatures $\\mathbf{T} = \\{T_1, \\ldots, T_N\\}$:\n$$V(\\mathbf{T}) = \\frac{I_{\\text{tot}}}{\\sum_{k=1}^N \\frac{1}{R_k(T_k)}} \\quad (2)$$\n\n#### 2. Reduction to a System in Temperatures\nBy substituting equation $(2)$ into equation $(1)$, we can eliminate the voltage $V$ and obtain a closed system of $N$ non-linear equations solely in terms of the $N$ unknown temperatures $\\{T_i\\}$:\n$$T_i = T_{\\text{amb}} + \\left( \\sum_{j=1}^N \\frac{R_{ij}}{R_j(T_j)} \\right) \\left( \\frac{I_{\\text{tot}}}{\\sum_{k=1}^N \\frac{1}{R_k(T_k)}} \\right)^2 \\quad \\text{for } i=1, \\ldots, N$$\n\nTo solve this numerically, we define a residual function vector $\\mathbf{F}(\\mathbf{T}) = [F_1(\\mathbf{T}), \\ldots, F_N(\\mathbf{T})]^T$, where each component $F_i$ must be equal to zero at the solution:\n$$F_i(\\mathbf{T}) = T_i - T_{\\text{amb}} - \\left( \\sum_{j=1}^N \\frac{R_{ij}}{R_{0,j}(1 + \\alpha_j (T_j - T_{\\text{ref}}))} \\right) \\left( \\frac{I_{\\text{tot}}}{\\sum_{k=1}^N \\frac{1}{R_{0,k}(1 + \\alpha_k (T_k - T_{\\text{ref}}))}} \\right)^2 = 0$$\n\n#### 3. Numerical Solution Strategy\nThis system $\\mathbf{F}(\\mathbf{T}) = \\mathbf{0}$ cannot be solved analytically in the general case. We will employ a numerical root-finding algorithm, specifically the Levenberg-Marquardt or similar method as implemented in `scipy.optimize.root`. This iterative algorithm requires an initial guess for the temperature vector $\\mathbf{T}$. A physically sensible initial guess is to assume all devices are at the ambient temperature, $\\mathbf{T}_{guess} = [T_{\\text{amb}}, \\ldots, T_{\\text{amb}}]$. The algorithm will then iteratively update the temperatures until the residual $\\mathbf{F}(\\mathbf{T})$ is acceptably close to zero.\n\n#### 4. Post-Processing and Risk Assessment\nOnce the converged temperature vector $\\mathbf{T}_{\\text{sol}} = \\{T_1, \\ldots, T_N\\}$ is found, all other physical quantities of interest can be calculated directly:\n1.  **On-Resistances**: Compute the final resistances $R_i(\\text{T}_{\\text{sol}, i})$ for each device.\n2.  **Voltage**: Calculate the common voltage $V(\\mathbf{T}_{\\text{sol}})$ using equation $(2)$.\n3.  **Currents**: Determine the current through each device, $I_i = V/R_i$.\n4.  **Imbalance Metric**: Compute $\\gamma = \\max_i |I_i - I_{\\text{avg}}| / I_{\\text{avg}}$, where $I_{\\text{avg}} = I_{\\text{tot}}/N$.\n5.  **Maximum Temperature**: Find $T_{\\text{j,max}} = \\max_i T_i$.\n6.  **Risk Flag**: Evaluate the boolean condition $\\text{risk} = (\\gamma  \\gamma_{\\text{crit}}) \\lor (T_{\\text{j,max}}  T_{\\text{j,max}}^{\\text{allow}})$.\n\nThis procedure is systematically applied to each test case to derive the final results.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.optimize import root\n\ndef solve():\n    \"\"\"\n    Main function to solve the electro-thermal problem for all test cases.\n    \"\"\"\n    # Test cases as defined in the problem statement.\n    test_cases = [\n        {\n            \"N\": 2, \"I_tot\": 200.0, \"T_amb\": 300.0, \"T_ref\": 300.0,\n            \"R0\": np.array([0.0020, 0.0020]),\n            \"alpha\": np.array([0.0040, 0.0040]),\n            \"R_th\": np.array([[0.15, 0.02], [0.02, 0.15]]),\n            \"gamma_crit\": 0.10, \"T_j_max_allow\": 448.0\n        },\n        {\n            \"N\": 2, \"I_tot\": 300.0, \"T_amb\": 300.0, \"T_ref\": 300.0,\n            \"R0\": np.array([0.0022, 0.0018]),\n            \"alpha\": np.array([0.0040, 0.0040]),\n            \"R_th\": np.array([[0.18, 0.03], [0.03, 0.12]]),\n            \"gamma_crit\": 0.10, \"T_j_max_allow\": 448.0\n        },\n        {\n            \"N\": 3, \"I_tot\": 360.0, \"T_amb\": 333.0, \"T_ref\": 300.0,\n            \"R0\": np.array([0.0020, 0.0020, 0.0020]),\n            \"alpha\": np.array([0.0040, 0.0040, 0.0040]),\n            \"R_th\": np.array([[0.15, 0.03, 0.03], [0.03, 0.15, 0.03], [0.03, 0.03, 0.25]]),\n            \"gamma_crit\": 0.10, \"T_j_max_allow\": 448.0\n        }\n    ]\n\n    results = []\n    for case in test_cases:\n        gamma, risk_flag = _solve_single_case(case)\n        results.extend([gamma, str(risk_flag).lower()])\n\n    print(f\"[{','.join(map(str, results))}]\")\n\ndef _solve_single_case(params):\n    \"\"\"\n    Solves the coupled non-linear equations for a single test case.\n    \"\"\"\n    # Extract parameters for clarity\n    N = params[\"N\"]\n    I_tot = params[\"I_tot\"]\n    T_amb = params[\"T_amb\"]\n    T_ref = params[\"T_ref\"]\n    R0 = params[\"R0\"]\n    alpha = params[\"alpha\"]\n    R_th = params[\"R_th\"]\n    gamma_crit = params[\"gamma_crit\"]\n    T_j_max_allow = params[\"T_j_max_allow\"]\n\n    def residual_equations(T):\n        \"\"\"\n        Defines the system of N non-linear equations F(T) = 0.\n        The vector T contains the current guess for the junction temperatures [T1, T2, ...].\n        \"\"\"\n        # Calculate temperature-dependent on-resistances\n        R_on = R0 * (1 + alpha * (T - T_ref))\n\n        # Check for non-physical resistance values\n        if np.any(R_on = 0):\n            return np.full(N, 1e9) # Return a large residual if R_on is non-positive\n\n        # Calculate common drain-to-source voltage V\n        sum_conductance = np.sum(1.0 / R_on)\n        if sum_conductance == 0:\n             return np.full(N, 1e9)\n        V_ds = I_tot / sum_conductance\n\n        # Calculate power dissipation in each device\n        P = (V_ds**2) / R_on\n\n        # Calculate the resulting junction temperatures based on the thermal model\n        T_calculated = T_amb + R_th @ P\n\n        # The residual is the difference between the guessed temperatures and the calculated ones\n        return T - T_calculated\n\n    # Initial guess for the temperatures (all at ambient)\n    T_initial_guess = np.full(N, T_amb)\n\n    # Solve the system of equations\n    solution = root(residual_equations, T_initial_guess, method='hybr')\n\n    if not solution.success:\n        raise RuntimeError(\"Numerical solver failed to converge.\")\n\n    T_final = solution.x\n\n    # --- Post-processing after finding temperatures ---\n\n    # Calculate final on-resistances\n    R_on_final = R0 * (1 + alpha * (T_final - T_ref))\n    \n    # Calculate final voltage\n    V_ds_final = I_tot / np.sum(1.0 / R_on_final)\n\n    # Calculate final currents\n    I_final = V_ds_final / R_on_final\n    \n    # Verify total current (sanity check)\n    # assert np.isclose(np.sum(I_final), I_tot)\n\n    # Calculate average current\n    I_avg = I_tot / N\n\n    # Calculate imbalance metric gamma\n    gamma = np.max(np.abs(I_final - I_avg)) / I_avg\n\n    # Find maximum junction temperature\n    T_j_max = np.max(T_final)\n\n    # Determine risk flag\n    risk = (gamma > gamma_crit) or (T_j_max > T_j_max_allow)\n\n    return gamma, risk\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "在设计任何闭环控制器之前，精确地为系统中的每个模块建立数学模型是至关重要的一步。在电压模式控制的功率变换器中，脉宽调制（PWM）模块是连接控制电压和功率级占空比的关键接口。它的增益 $G_m$ 是总环路增益的一个基本组成部分，直接影响系统的动态性能和稳定性。本练习将指导您从第一性原理出发，推导峰值PWM调制器的增益，从而将一个看似简单的硬件行为转化为一个精确的数学参数，为后续的补偿设计奠定基础。",
            "id": "3827867",
            "problem": "一个电压模式控制的降压转换器需要使用II型网络进行补偿。在此类设计中，必须从第一性原理出发，对脉冲宽度调制（PWM）调制器的高频环路增益贡献进行量化，而不是直接假设。考虑一个峰值PWM调制器，其实现方式是将控制电压 $v_{c}(t)$ 与一个周期为 $T_{\\mathrm{s}}$、峰值为 $V_{\\mathrm{ramp}}$ 的周期性线性斜坡信号 $v_{r}(t)$ 进行比较。该斜坡信号在 $t=0$ 时为零，并在 $t=T_{\\mathrm{s}}$ 时线性增加到 $V_{\\mathrm{ramp}}$。调制器在 $t=0$ 时打开开关，并在周期内 $v_{r}(t)$ 首次等于 $v_{c}(t)$ 时关闭开关，从而产生一个占空比 $D$，该占空比等于开关导通时间占整个周期的比例。\n\n从上述定义和斜坡信号的线性时间规律出发，推导此峰值PWM调制器的小信号增益 $G_{m}$，其定义为占空比对控制电压的灵敏度，即 $G_{m}=\\frac{\\mathrm{d}D}{\\mathrm{d}v_{c}}$。然后，在斜坡峰值幅度 $V_{\\mathrm{ramp}}=1.5$ V 的条件下，计算 $G_{m}$ 的值。\n\n最终答案以 $\\mathrm{V}^{-1}$ 为单位表示，并四舍五入至四位有效数字。",
            "solution": "该问题要求推导并计算峰值PWM调制器的小信号调制器增益 $G_m$。该增益定义为占空比 $D$ 对控制电压 $v_c$ 的灵敏度，其形式化表达式为 $G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$。\n\n首先，我们必须根据题目描述为该系统建立数学模型。斜坡电压 $v_r(t)$ 在 $t=0$ 时从0开始线性增加，在开关周期 $T_s$ 结束时达到其峰值幅度 $V_{\\text{ramp}}$。在单个周期（$0 \\le t  T_s$）内，描述此行为的函数是：\n$$v_r(t) = \\left(\\frac{V_{\\text{ramp}}}{T_s}\\right) t$$\n项 $\\frac{V_{\\text{ramp}}}{T_s}$ 代表斜坡信号的恒定斜率。\n\nPWM调制器的工作原理是将斜坡电压 $v_r(t)$ 与控制电压 $v_c(t)$ 进行比较。功率开关在周期开始时（$t=0$）导通。当斜坡电压等于控制电压时，开关在时刻 $t_{\\text{off}}$ 关断。为了推导直流和小信号特性，我们假设控制电压 $v_c(t)$ 在单个开关周期内为恒定值 $v_c$。因此，关断条件为：\n$$v_r(t_{\\text{off}}) = v_c$$\n\n占空比 $D$ 是开关处于导通状态的时间占开关周期的比例。由于导通时间从 $t=0$ 开始到 $t=t_{\\text{off}}$ 结束，占空比由下式给出：\n$$D = \\frac{t_{\\text{off}}}{T_s}$$\n这个方程使我们能够用占空比来表示关断时间：$t_{\\text{off}} = D T_s$。\n\n现在我们可以结合这些关系，找出控制电压 $v_c$ 和占空比 $D$ 之间的直接联系。将 $t_{\\text{off}} = D T_s$ 代入关断条件 $v_r(t_{\\text{off}}) = v_c$，我们得到：\n$$v_r(D T_s) = v_c$$\n接着，我们代入斜坡电压 $v_r(t)$ 的表达式：\n$$\\left(\\frac{V_{\\text{ramp}}}{T_s}\\right) (D T_s) = v_c$$\n开关周期 $T_s$ 被消去，从而得到占空比和控制电压之间的一个简单的线性关系，这代表了调制器的大信号特性：\n$$V_{\\text{ramp}} D = v_c$$\n\n小信号调制器增益 $G_m$ 是输出（$D$）对输入（$v_c$）的导数。我们通过对大信号方程关于 $v_c$ 求导来获得该增益：\n$$G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$$\n对大信号方程进行微分：\n$$\\frac{\\mathrm{d}}{\\mathrm{d}v_c} (V_{\\text{ramp}} D) = \\frac{\\mathrm{d}}{\\mathrm{d}v_c} (v_c)$$\n由于 $V_{\\text{ramp}}$ 是调制器的一个恒定参数，我们可以写出：\n$$V_{\\text{ramp}} \\frac{\\mathrm{d}D}{\\mathrm{d}v_c} = 1$$\n求解增益 $G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$ 得到符号表达式：\n$$G_m = \\frac{1}{V_{\\text{ramp}}}$$\n\n题目要求在给定的斜坡峰值幅度 $V_{\\text{ramp}} = 1.5$ V下，对该增益进行数值计算。将此值代入推导出的公式中：\n$$G_m = \\frac{1}{1.5 \\ \\text{V}}$$\n计算数值：\n$$G_m = \\frac{2}{3} \\ \\mathrm{V}^{-1} \\approx 0.66666... \\ \\mathrm{V}^{-1}$$\n根据题目要求，结果必须四舍五入至四位有效数字。\n$$G_m \\approx 0.6667 \\ \\mathrm{V}^{-1}$$\n这个结果量化了PWM调制器模块的增益，这是设计转换器反馈补偿网络的一个关键参数。",
            "answer": "$$\\boxed{0.6667}$$"
        },
        {
            "introduction": "补偿网络设计的核心目标之一是塑造开环传递函数，以满足特定的性能指标，例如穿越频率（或称单位增益带宽）。穿越频率决定了变换器的动态响应速度，是衡量系统性能的关键参数。这个练习模拟了一个典型的设计场景：在已知特定频率下被控对象增益的情况下，计算I型补偿器所需的增益 $K$，以精确地将穿越频率设置在期望值。通过这个实践，您将掌握环路整形的基本技巧，即将理论上的性能目标转化为具体的补偿器参数。",
            "id": "3827835",
            "problem": "一个工作在连续导通模式下的电流模式控制的直流-直流降压转换器，其内部电流环路被紧密闭合。从补偿器输出到稳压输出的所得到的线性化外环被控对象，可以用一个复频响应来表示，其在特定角频率下的幅值通过小信号注入实验测量得到。将误差放大器跨导至被控对象接口与控制到输出的小信号增益的乘积记为 $G_{m}G_{vd}(s)$，因此单环路开环传递函数为 $L(s)=C(s)\\,G_{m}G_{vd}(s)$，其中 $C(s)$ 是补偿器。\n\n您需要设计一个 I 型补偿器，其模型为理想积分器 $C(s)=K/s$，以在角频率 $\\omega_{c}$ 处实现单位增益带宽（穿越频率）。假设在期望的穿越频率 $\\omega_{c}=2\\pi\\cdot 5\\ \\text{kHz}$ 处，实验测得的被控对象幅值为 $|G_{m}G_{vd}(j\\omega_{c})|=2.0\\times 10^{-2}$（无量纲）。\n\n仅从环路传递函数、幅值穿越和给定补偿器形式的定义出发，推导所需 $K$ 的表达式并计算其值。将 $K$ 以弧度/秒为单位表示，并将您的答案四舍五入至四位有效数字。最终答案必须是一个实数值。",
            "solution": "目标是求出 I 型补偿器 $C(s) = K/s$ 的积分器增益 $K$ 的值，使得闭环系统具有单位增益穿越角频率 $\\omega_c$。\n\n系统的开环传递函数由 $L(s)$ 给出。\n$$L(s) = C(s) \\, G_{m}G_{vd}(s)$$\n代入 I 型补偿器的表达式，我们得到：\n$$L(s) = \\frac{K}{s} G_{m}G_{vd}(s)$$\n单位增益穿越频率 $\\omega_c$ 定义为开环传递函数的幅值等于单位值（1）时的角频率。在频域中，通过设置 $s = j\\omega_c$ 来表示：\n$$|L(j\\omega_c)| = 1$$\n我们计算 $L(s)$ 在 $s = j\\omega_c$ 时的幅值：\n$$|L(j\\omega_c)| = \\left| \\frac{K}{j\\omega_c} G_{m}G_{vd}(j\\omega_c) \\right|$$\n利用复数乘积的幅值等于其幅值的乘积这一性质：\n$$|L(j\\omega_c)| = \\left| \\frac{K}{j\\omega_c} \\right| \\cdot |G_{m}G_{vd}(j\\omega_c)|$$\n增益 $K$ 是一个正常数，对于正角频率 $\\omega_c$，我们有 $|j\\omega_c| = \\omega_c$。因此：\n$$\\left| \\frac{K}{j\\omega_c} \\right| = \\frac{K}{\\omega_c}$$\n将此代回环路增益幅值的表达式中：\n$$|L(j\\omega_c)| = \\frac{K}{\\omega_c} |G_{m}G_{vd}(j\\omega_c)|$$\n现在，我们应用单位增益穿越条件 $|L(j\\omega_c)| = 1$：\n$$\\frac{K}{\\omega_c} |G_{m}G_{vd}(j\\omega_c)| = 1$$\n现在我们可以求解所需的增益 $K$：\n$$K = \\frac{\\omega_c}{|G_{m}G_{vd}(j\\omega_c)|}$$\n这就是 $K$ 的符号表达式。\n\n接下来，我们代入问题陈述中提供的数值。\n期望的穿越角频率是：\n$$\\omega_c = 2\\pi \\cdot 5 \\text{ kHz} = 2\\pi \\cdot (5 \\times 10^3) \\text{ rad/s} = 10000\\pi \\text{ rad/s}$$\n在此频率下被控对象的幅值给定为：\n$$|G_{m}G_{vd}(j\\omega_c)| = 2.0 \\times 10^{-2}$$\n将这些值代入 $K$ 的表达式中：\n$$K = \\frac{10000\\pi}{2.0 \\times 10^{-2}}$$\n$$K = \\frac{\\pi \\times 10^4}{2 \\times 10^{-2}} = \\frac{\\pi}{2} \\times 10^{4 - (-2)} = 0.5\\pi \\times 10^6 \\text{ rad/s}$$\n现在我们计算数值，并按要求四舍五入至四位有效数字：\n$$K \\approx 0.5 \\times (3.14159265...) \\times 10^6$$\n$$K \\approx 1.5707963... \\times 10^6$$\n四舍五入至四位有效数字得到：\n$$K \\approx 1.571 \\times 10^6$$\n$K$ 的单位是弧度/秒，符合要求。这可以通过对补偿器传递函数 $C(s)=K/s$ 进行量纲分析来验证。因为对于无量纲的环路增益 $L(s)$（给定无量纲的被控对象增益），$C(s)$ 也必须是无量纲的，而 $s$ 的单位是 rad/s，所以 $K$ 的单位也必须是 rad/s。",
            "answer": "$$\\boxed{1.571 \\times 10^{6}}$$"
        },
        {
            "introduction": "理想的线性控制理论在现实世界中会遇到各种非线性效应的挑战，积分器饱和（integrator windup）就是其中一个典型问题。当系统经历启动、负载阶跃等大的瞬态过程时，误差信号会长时间保持较大值，导致补偿器中的积分环节过度累积，其输出达到饱和。这种“饱和”状态会严重影响系统的动态响应，导致超调和恢复时间过长。本练习将带您分析这一实际问题，并设计一个实用的抗饱和（anti-windup）电路，以确保控制器在非线性区域也能快速恢复，从而提高系统的鲁棒性。",
            "id": "3827818",
            "problem": "一个降压直流-直流转换器由一个电压模式控制环路进行调节，其补偿器是一个 I 型网络（纯积分器）。该补偿器实现为一个理想运算放大器积分器，带有一个值为 $C_{i}$ 的反馈电容器，并且没有有意的直流泄漏。来自补偿器的控制输出 $u(t)$ 通过一个表示脉冲宽度调制（PWM）调制器和门极驱动器限制的指令饱和非线性环节；施加的执行器信号为 $u_{a}(t) = \\mathrm{sat}(u(t))$，其中饱和将 $u_{a}(t)$ 限制在 $[0, U_{\\max}]$ 范围内。\n\n在启动时，输出电压初始接近于零，提供给积分器的误差 $e(t)$ 在初始区间 $[0, T_{0}]$ 内近似为正常数：$e(t) \\approx E_{0}$。积分器的增益为 $K_{i}$，在没有任何钳位的情况下，其状态演变遵循 $\\dot{v}_{c}(t) = K_{i}\\,e(t)$，且 $v_{c}(0)=0$，$u(t) = v_{c}(t)$。假设 $E_{0}  0$ 且 $U_{\\max}$ 足够小，以至于饱和在启动初期很早就发生。\n\n为减轻积分饱和效应，您提出了一个抗饱和钳位电路，实现为在补偿器输出节点和饱和的执行器节点之间串联一个理想二极管和一个电阻 $R_{aw}$。当 $v_{c}(t)  u_{a}(t)$ 时，二极管正向偏置，因此钳位电路向积分电容器注入一个与 $v_{c}(t) - u_{a}(t)$ 成正比的电流。假设二极管是理想的，并忽略任何运放输入偏置电流。\n\n仅使用电容器本构定律 $i_{C} = C\\,\\mathrm{d}v/\\mathrm{d}t$ 和上述定义，执行以下操作：\n\n- 从 $i_{C} = C_{i}\\,\\mathrm{d}v_{c}/\\mathrm{d}t$ 和基尔霍夫定律出发，推导当钳位电路导通、执行器饱和后误差 $e(t)$ 降为 $0$、且 $u_{a}(t)$ 保持在其饱和值不变时，控制 $v_{c}(t)$ 的微分方程。\n\n- 从该微分方程中，推导在钳位导通下，$v_{c}(t)$ 朝向 $u_{a}$ 的恢复动态时间常数 $\\tau_{aw}$，用 $R_{aw}$ 和 $C_{i}$ 表示。\n\n给定以下适用于大电流转换器启动场景的数值上合理的参数：\n- $C_{i} = 137\\,\\mathrm{nF}$，\n- 期望的抗饱和恢复时间常数 $\\tau_{aw} = 2.75\\,\\mathrm{ms}$。\n\n计算实现钳位电路指定的 $\\tau_{aw}$ 所需的电阻 $R_{aw}$。以欧姆为单位表示最终电阻值，并将答案四舍五入到四位有效数字。",
            "solution": "我们在运算放大器的输出节点处应用基尔霍夫电流定律（KCL），该节点的电压为 $v_{c}(t)$。此节点连接到积分电容器 $C_i$ 和抗饱和钳位电路。给电容器充电的总电流 $i_{C}$ 是流入该节点的电流的代数和。\n\n给电容器充电的电流由本构定律给出：\n$$i_{C}(t) = C_{i} \\frac{dv_{c}(t)}{dt}$$\n\n积分器电路提供一个与误差信号 $e(t)$ 成正比的电流。从未钳位的状态方程 $\\dot{v}_{c}(t) = K_{i}\\,e(t)$，并且知道在这种情况下 $i_{C}(t) = C_{i}\\dot{v}_{c}(t)$，我们确定由误差处理部分提供的电流为：\n$$i_{in}(t) = C_{i} K_{i} e(t)$$\n\n抗饱和钳位电路由一个电阻 $R_{aw}$ 与一个理想二极管串联组成，连接在节点 $v_{c}(t)$ 和执行器节点 $u_{a}(t)$ 之间。当钳位导通时（即 $v_{c}(t)  u_{a}(t)$），理想二极管充当短路。一个电流 $i_{aw}(t)$ 从电容器节点流出，通过电阻 $R_{aw}$。该电流由欧姆定律给出：\n$$i_{aw}(t) = \\frac{v_{c}(t) - u_{a}(t)}{R_{aw}}$$\n\n在电容器节点应用KCL，给电容器充电的净电流为 $i_{C} = i_{in} - i_{aw}$：\n$$C_{i} \\frac{dv_{c}(t)}{dt} = C_{i} K_{i} e(t) - \\frac{v_{c}(t) - u_{a}(t)}{R_{aw}}$$\n\n问题要求我们在特定条件下推导微分方程：钳位导通，误差 $e(t)$ 已降为 $0$，且执行器信号 $u_{a}(t)$ 保持在其饱和值不变。由于初始误差 $E_0$ 为正，积分器电压 $v_c(t)$ 会增加，导致在上限处饱和。因此，$u_{a}(t)$ 恒定为 $U_{\\max}$。\n\n将 $e(t) = 0$ 和 $u_{a}(t) = U_{\\max}$ 代入KCL方程，我们得到：\n$$C_{i} \\frac{dv_{c}(t)}{dt} = C_{i} K_{i} (0) - \\frac{v_{c}(t) - U_{\\max}}{R_{aw}}$$\n这简化为在抗饱和恢复期间控制 $v_{c}(t)$ 的微分方程：\n$$C_{i} \\frac{dv_{c}(t)}{dt} = - \\frac{v_{c}(t) - U_{\\max}}{R_{aw}}$$\n\n为了求出时间常数，我们将推导出的微分方程重排为一阶线性系统的标准形式，即 $\\tau \\frac{dy(t)}{dt} + y(t) = K_{dc} \\cdot f(t)$，其中 $\\tau$ 是时间常数。\n\n从我们的方程开始：\n$$C_{i} \\frac{dv_{c}(t)}{dt} = - \\frac{1}{R_{aw}} (v_{c}(t) - U_{\\max})$$\n两边同乘以 $R_{aw}$：\n$$R_{aw} C_{i} \\frac{dv_{c}(t)}{dt} = -v_{c}(t) + U_{\\max}$$\n将包含 $v_{c}(t)$ 的项移到左边：\n$$R_{aw} C_{i} \\frac{dv_{c}(t)}{dt} + v_{c}(t) = U_{\\max}$$\n此方程现在是标准形式 $\\tau \\frac{dy}{dt} + y = f$，其中 $y(t) = v_{c}(t)$，常数输入 $f = U_{\\max}$，时间常数 $\\tau$ 是导数项的系数。通过直接观察，抗饱和恢复时间常数 $\\tau_{aw}$ 为：\n$$\\tau_{aw} = R_{aw} C_{i}$$\n这个结果在物理上是直观的，代表了由抗饱和电阻和积分电容器形成的放电路径的 RC 时间常数。积分器状态 $v_c(t)$ 以此时间常数指数级地恢复到饱和水平 $U_{max}$。\n\n我们的任务是找出能实现指定时间常数 $\\tau_{aw}$ 的 $R_{aw}$ 值。我们重排上面推导的公式：\n$$R_{aw} = \\frac{\\tau_{aw}}{C_{i}}$$\n\n给定值为：\n- $\\tau_{aw} = 2.75\\,\\mathrm{ms} = 2.75 \\times 10^{-3}\\,\\mathrm{s}$\n- $C_{i} = 137\\,\\mathrm{nF} = 137 \\times 10^{-9}\\,\\mathrm{F}$\n\n将这些值代入方程：\n$$R_{aw} = \\frac{2.75 \\times 10^{-3}\\,\\mathrm{s}}{137 \\times 10^{-9}\\,\\mathrm{F}}$$\n$$R_{aw} = \\frac{2.75}{137} \\times 10^{6}\\,\\Omega$$\n$$R_{aw} \\approx 0.0200729927 \\times 10^{6}\\,\\Omega$$\n$$R_{aw} \\approx 20072.9927\\,\\Omega$$\n\n问题要求答案四舍五入到四位有效数字。前四位有效数字是 $2$、$0$、$0$ 和 $7$。第五位数字是 $2$，小于 $5$，所以我们向下舍入。\n$$R_{aw} \\approx 20070\\,\\Omega$$\n为了用四位有效数字明确地表示它，我们使用科学记数法：\n$$R_{aw} = 2.007 \\times 10^{4}\\,\\Omega$$\n最终答案是电阻值的数值，单位为欧姆。",
            "answer": "$$\\boxed{2.007 \\times 10^{4}}$$"
        }
    ]
}
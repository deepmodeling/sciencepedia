{
    "hands_on_practices": [
        {
            "introduction": "Before designing a compensator, we must first build an accurate model of the system we intend to control, known as the plant. A crucial component in any switching converter's control loop is the Pulse-Width Modulation (PWM) modulator, which translates the continuous control voltage into the discrete duty cycle signal. This exercise focuses on deriving the modulator's small-signal gain, $G_m$, a critical parameter that directly influences the overall loop gain and stability of the converter . Mastering this derivation from first principles solidifies your understanding of how the control signal physically actuates the power stage.",
            "id": "3827867",
            "problem": "A voltage-mode controlled buck converter is to be compensated with a Type II network. In such designs, the high-frequency loop gain contribution of the Pulse Width Modulation (PWM) modulator must be quantified from first principles rather than assumed. Consider a peak PWM modulator implemented by comparing a control voltage $v_c(t)$ to a periodic linear ramp $v_r(t)$ of switching period $T_s$ and peak amplitude $V_{\\text{ramp}}$. The ramp is zero at $t=0$ and increases linearly to $V_{\\text{ramp}}$ at $t=T_s$. The modulator turns the switch on at $t=0$ and turns it off the first time $v_r(t)$ equals $v_c(t)$ within the period, thereby producing a duty ratio $D$ equal to the fraction of the period for which the switch is on.\n\nStarting from the definitions above and the linear time law for the ramp, derive the small-signal modulator gain $G_m$ defined as the sensitivity of the duty ratio to the control voltage, $G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$, for this peak PWM. Then evaluate $G_m$ for a ramp peak amplitude $V_{\\text{ramp}} = 1.5$ V.\n\nExpress your final answer in $\\mathrm{V}^{-1}$ and round your result to four significant figures.",
            "solution": "The problem requires the derivation and evaluation of the small-signal modulator gain, $G_m$, for a peak PWM modulator. The gain is defined as the sensitivity of the duty ratio, $D$, to the control voltage, $v_c$, which is formally expressed as $G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$.\n\nFirst, we must establish the mathematical model for the system based on the provided description. The ramp voltage, $v_r(t)$, increases linearly from a value of $0$ at time $t=0$ to its peak amplitude, $V_{\\text{ramp}}$, at the end of the switching period, $T_s$. The function describing this behavior within a single cycle ($0 \\le t  T_s$) is:\n$$v_r(t) = \\left(\\frac{V_{\\text{ramp}}}{T_s}\\right) t$$\nThe term $\\frac{V_{\\text{ramp}}}{T_s}$ represents the constant slope of the ramp.\n\nThe PWM modulator operates by comparing this ramp voltage $v_r(t)$ with the control voltage $v_c(t)$. The power switch is turned on at the beginning of the cycle, $t=0$. The switch is turned off at the time instant, $t_{\\text{off}}$, when the ramp voltage equals the control voltage. For the purpose of deriving the DC and small-signal characteristics, we consider the control voltage $v_c(t)$ to be constant with a value $v_c$ over a single switching period. The turn-off condition is therefore:\n$$v_r(t_{\\text{off}}) = v_c$$\n\nThe duty ratio, $D$, is the fraction of the switching period during which the switch is in the on-state. Since the on-time starts at $t=0$ and ends at $t=t_{\\text{off}}$, the duty ratio is given by:\n$$D = \\frac{t_{\\text{off}}}{T_s}$$\nThis equation allows us to express the turn-off time in terms of the duty ratio: $t_{\\text{off}} = D T_s$.\n\nWe can now combine these relationships to find the direct link between the control voltage $v_c$ and the duty ratio $D$. By substituting $t_{\\text{off}} = D T_s$ into the turn-off condition $v_r(t_{\\text{off}}) = v_c$, we get:\n$$v_r(D T_s) = v_c$$\nNext, we substitute the expression for the ramp voltage $v_r(t)$:\n$$\\left(\\frac{V_{\\text{ramp}}}{T_s}\\right) (D T_s) = v_c$$\nThe switching period $T_s$ cancels out, leading to a simple, linear relationship between the duty ratio and the control voltage, which represents the large-signal characteristic of the modulator:\n$$V_{\\text{ramp}} D = v_c$$\n\nThe small-signal modulator gain $G_m$ is the derivative of the output ($D$) with respect to the input ($v_c$). We obtain this by differentiating the large-signal equation with respect to $v_c$:\n$$G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$$\nApplying differentiation to the large-signal equation:\n$$\\frac{\\mathrm{d}}{\\mathrm{d}v_c} (V_{\\text{ramp}} D) = \\frac{\\mathrm{d}}{\\mathrm{d}v_c} (v_c)$$\nSince $V_{\\text{ramp}}$ is a constant parameter of the modulator, we can write:\n$$V_{\\text{ramp}} \\frac{\\mathrm{d}D}{\\mathrm{d}v_c} = 1$$\nSolving for the gain $G_m = \\frac{\\mathrm{d}D}{\\mathrm{d}v_c}$ yields the symbolic expression:\n$$G_m = \\frac{1}{V_{\\text{ramp}}}$$\n\nThe problem requires the numerical evaluation of this gain for a given peak ramp amplitude $V_{\\text{ramp}} = 1.5$ V. Substituting this value into the derived formula:\n$$G_m = \\frac{1}{1.5 \\ \\text{V}}$$\nCalculating the numerical value:\n$$G_m = \\frac{2}{3} \\ \\mathrm{V}^{-1} \\approx 0.66666... \\ \\mathrm{V}^{-1}$$\nAccording to the problem's instruction, the result must be rounded to four significant figures.\n$$G_m \\approx 0.6667 \\ \\mathrm{V}^{-1}$$\nThis result quantifies the gain of the PWM modulator block, a critical parameter for designing the feedback compensation network of the converter.",
            "answer": "$$\\boxed{0.6667}$$"
        },
        {
            "introduction": "Once the plant is characterized, the core task of compensation design is to shape the loop's frequency response to meet performance targets like stability and response speed. A fundamental objective is setting the unity-gain crossover frequency, which dictates the closed-loop bandwidth. This practice demonstrates how to employ a simple Type I (integrator) compensator, $C(s) = K/s$, to achieve this goal . By calculating the required integrator gain $K$, you will learn how to directly manipulate the compensator to place the crossover frequency at a desired point, thereby controlling the system's dynamic behavior.",
            "id": "3827835",
            "problem": "A continuous-conduction-mode, current-mode controlled direct current to direct current buck converter is operated with its inner current loop tightly closed. The resulting linearized outer-loop plant from the compensator output to the regulated output can be represented by a complex frequency response whose magnitude at a specified angular frequency is measured experimentally using small-signal injection. Denote the product of the error-amplifier transconductance to plant interface and the control-to-output small-signal gain as $G_m G_{vd}(s)$, so that the one-loop open-loop transfer function is $L(s)=C(s) G_m G_{vd}(s)$, where $C(s)$ is the compensator.\n\nYou are to design a Type I compensator, modeled as an ideal integrator, $C(s)=K/s$, to achieve a unity-gain bandwidth (crossover) at angular frequency $\\omega_c$. Assume that at the desired crossover frequency $\\omega_c = 2\\pi \\cdot 5\\ \\text{kHz}$, the experimentally measured magnitude of the plant is $|G_m G_{vd}(j\\omega_c)|=2.0\\times 10^{-2}$ (dimensionless).\n\nStarting only from the definitions of loop transfer function, magnitude crossover, and the given compensator form, derive the expression for the required $K$ and compute its value. Express $K$ in radians per second and round your answer to four significant figures. The final answer must be a single real-valued number.",
            "solution": "The problem is first validated against the required criteria.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n- **System Description:** Continuous-conduction-mode, current-mode controlled direct current to direct current buck converter.\n- **Open-Loop Transfer Function:** $L(s)=C(s)G_m G_{vd}(s)$.\n- **Compensator Model:** Type I compensator, $C(s) = K/s$.\n- **Desired Crossover Angular Frequency:** $\\omega_c = 2\\pi \\cdot 5 \\text{ kHz}$.\n- **Plant Magnitude at Crossover:** At $\\omega = \\omega_c$, $|G_m G_{vd}(j\\omega_c)| = 2.0 \\times 10^{-2}$ (dimensionless).\n- **Task:** Derive the expression for the required gain $K$ and compute its numerical value, rounded to four significant figures.\n- **Units for K:** Radians per second.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is assessed for validity:\n- **Scientifically Grounded:** The problem is firmly rooted in the principles of linear control theory applied to power electronics, a standard engineering practice. The use of a small-signal model, frequency response, a Type I compensator, and the concept of a unity-gain crossover frequency are all fundamental concepts in this field.\n- **Well-Posed:** The problem is well-posed. It provides all necessary data ($C(s)$ form, $\\omega_c$, and the plant's magnitude at $\\omega_c$) to uniquely determine the unknown parameter $K$.\n- **Objective:** The problem is stated using precise, objective, and standard technical terminology, free of any subjective or ambiguous language.\n- **Completeness and Consistency:** The problem is self-contained and free of contradictions. The given data are sufficient and consistent for a solution.\n- **Realism:** The values provided, such as a crossover frequency of $5 \\text{ kHz}$ for a buck converter and the specified plant gain, are physically plausible and realistic in practical applications.\n\n**Step 3: Verdict and Action**\nThe problem is deemed valid as it is scientifically sound, well-posed, objective, and complete. A solution will be derived.\n\n### Solution Derivation\n\nThe objective is to find the value of the integrator gain $K$ for a Type I compensator, $C(s) = K/s$, such that the closed-loop system has a unity-gain crossover angular frequency $\\omega_c$.\n\nThe open-loop transfer function of the system is given by $L(s)$.\n$$L(s) = C(s) \\, G_m G_{vd}(s)$$\nSubstituting the expression for the Type I compensator, we have:\n$$L(s) = \\frac{K}{s} G_m G_{vd}(s)$$\nThe unity-gain crossover frequency, $\\omega_c$, is defined as the angular frequency at which the magnitude of the open-loop transfer function is equal to unity ($1$). In the frequency domain, this is expressed by setting $s = j\\omega_c$:\n$$|L(j\\omega_c)| = 1$$\nWe evaluate the magnitude of $L(s)$ at $s = j\\omega_c$:\n$$|L(j\\omega_c)| = \\left| \\frac{K}{j\\omega_c} G_m G_{vd}(j\\omega_c) \\right|$$\nUsing the property that the magnitude of a product of complex numbers is the product of their magnitudes:\n$$|L(j\\omega_c)| = \\left| \\frac{K}{j\\omega_c} \\right| \\cdot |G_m G_{vd}(j\\omega_c)|$$\nThe gain $K$ is a positive real constant, and for a positive angular frequency $\\omega_c$, we have $|j\\omega_c| = \\omega_c$. Therefore:\n$$\\left| \\frac{K}{j\\omega_c} \\right| = \\frac{K}{\\omega_c}$$\nSubstituting this back into the expression for the loop gain magnitude:\n$$|L(j\\omega_c)| = \\frac{K}{\\omega_c} |G_m G_{vd}(j\\omega_c)|$$\nNow, we apply the unity-gain crossover condition, $|L(j\\omega_c)| = 1$:\n$$\\frac{K}{\\omega_c} |G_m G_{vd}(j\\omega_c)| = 1$$\nWe can now solve for the required gain $K$:\n$$K = \\frac{\\omega_c}{|G_m G_{vd}(j\\omega_c)|}$$\nThis is the symbolic expression for $K$.\n\nNext, we substitute the numerical values provided in the problem statement.\nThe desired crossover angular frequency is:\n$$\\omega_c = 2\\pi \\cdot 5 \\text{ kHz} = 2\\pi \\cdot (5 \\times 10^3) \\text{ rad/s} = 10000\\pi \\text{ rad/s}$$\nThe magnitude of the plant at this frequency is given as:\n$$|G_m G_{vd}(j\\omega_c)| = 2.0 \\times 10^{-2}$$\nSubstituting these values into the expression for $K$:\n$$K = \\frac{10000\\pi}{2.0 \\times 10^{-2}}$$\n$$K = \\frac{\\pi \\times 10^4}{2 \\times 10^{-2}} = \\frac{\\pi}{2} \\times 10^{4 - (-2)} = 0.5\\pi \\times 10^6 \\text{ rad/s}$$\nNow we compute the numerical value and round it to four significant figures as requested:\n$$K \\approx 0.5 \\times (3.14159265...) \\times 10^6$$\n$$K \\approx 1.5707963... \\times 10^6$$\nRounding to four significant figures gives:\n$$K \\approx 1.571 \\times 10^6$$\nThe units of $K$ are radians per second, as required. This can be verified by dimensional analysis of the compensator transfer function $C(s)=K/s$. Since $C(s)$ must be dimensionless for a dimensionless loop gain $L(s)$ (given a dimensionless plant gain), and $s$ has units of rad/s, $K$ must also have units of rad/s.",
            "answer": "$$\\boxed{1.571 \\times 10^{6}}$$"
        },
        {
            "introduction": "Linear control theory is powerful, but it relies on the assumption that system signals remain within a linear operating range. Real-world power converters have hard physical limits, and large-signal events like startup can push the controller into saturation, causing a detrimental effect known as integrator windup. This exercise explores the practical problem of windup and the design of an anti-windup clamp to mitigate it . By analyzing the circuit's behavior during saturation, you will learn to design a recovery mechanism that ensures robust performance even when the system is temporarily driven beyond its linear limits.",
            "id": "3827818",
            "problem": "A step-down direct current-to-direct current converter is regulated by a voltage-mode control loop whose compensator is a Type I network (pure integrator). The compensator is implemented as an ideal operational amplifier integrator with a feedback capacitor of value $C_i$ and no intentional direct current leak. The control output $u(t)$ from the compensator is passed through a command saturation nonlinearity representing the Pulse-Width Modulation (PWM) modulator and gate driver limits; the applied actuator signal is $u_a(t) = \\mathrm{sat}(u(t))$, where the saturation clamps $u_a(t)$ to lie in $[0, U_{\\max}]$.\n\nAt startup, the output voltage is initially near zero and the error $e(t)$ presented to the integrator is approximately constant and positive: $e(t) \\approx E_0$ over an initial interval $[0, T_0]$. The integrator has gain $K_i$ such that its state evolves as $\\dot{v}_c(t) = K_i e(t)$ in the absence of any clamp, with $v_c(0)=0$ and $u(t) = v_c(t)$. Assume $E_0  0$ and that $U_{\\max}$ is sufficiently small that saturation occurs very early in startup.\n\nTo mitigate integrator windup, you propose an anti-windup clamp implemented as a single ideal diode in series with a resistor $R_{aw}$ from the compensator output node to the saturated actuator node. The diode is forward-biased whenever $v_c(t)  u_a(t)$, so the clamp injects a current proportional to $v_c(t) - u_a(t)$ into the integrator capacitor. Assume the diode is ideal and ignore any op-amp input bias currents.\n\nUsing only the capacitor constitutive law $i_C = C \\frac{\\mathrm{d}v}{\\mathrm{d}t}$ and the definitions above, perform the following:\n\n- Starting from $i_C = C_i \\frac{\\mathrm{d}v_c}{\\mathrm{d}t}$ and Kirchhoffâ€™s laws, derive the differential equation governing $v_c(t)$ when the clamp is conducting and $e(t)$ has collapsed to $0$ after the actuator saturates, with $u_a(t)$ held constant at its saturation value.\n\n- From that differential equation, derive the recovery dynamics time constant $\\tau_{\\text{aw}}$ of $v_c(t)$ toward $u_a$ under clamp conduction, expressed in terms of $R_{\\text{aw}}$ and $C_i$.\n\nYou are given the following numerically plausible parameters for a high-current converter startup scenario:\n- $C_i = 137\\,\\mathrm{nF}$,\n- Desired anti-windup recovery time constant $\\tau_{\\text{aw}} = 2.75\\,\\mathrm{ms}$.\n\nCompute the required resistor $R_{\\text{aw}}$ that achieves the specified $\\tau_{\\text{aw}}$ for the clamp. Express the final resistor value in ohms and round your answer to four significant figures.",
            "solution": "The problem statement is first validated to ensure it is scientifically grounded, self-contained, and well-posed.\n\n### Step 1: Extract Givens\n- **System**: Step-down direct current-to-direct current converter with voltage-mode control.\n- **Compensator**: Type I network (pure integrator) implemented as an ideal operational amplifier integrator.\n- **Capacitor**: Feedback capacitor of value $C_i$.\n- **Control Signal**: $u(t) = v_c(t)$, where $v_c(t)$ is the integrator state (capacitor voltage).\n- **Actuator Signal**: $u_a(t) = \\mathrm{sat}(u(t))$, with saturation limits $[0, U_{\\max}]$.\n- **Initial Conditions**: At startup, $v_c(0)=0$ and for an initial interval $[0, T_0]$, the error is $e(t) \\approx E_0 > 0$.\n- **Integrator Dynamics (unclamped)**: $\\dot{v}_c(t) = K_i e(t)$.\n- **Anti-Windup (AW) Clamp**: An ideal diode in series with a resistor $R_{\\text{aw}}$.\n- **AW Clamp Connection**: From the compensator output node (voltage $v_c(t)$) to the saturated actuator node (voltage $u_a(t)$).\n- **AW Clamp Conduction**: The diode is forward-biased when $v_c(t) > u_a(t)$.\n- **Analysis Conditions**: For the derivation, assume the clamp is conducting, the error has collapsed to $e(t) = 0$, and the actuator signal $u_a(t)$ is constant at its saturation value.\n- **Governing Law**: The capacitor constitutive law is $i_C = C \\frac{\\mathrm{d}v}{\\mathrm{d}t}$.\n- **Numerical Parameters**:\n  - $C_i = 137\\,\\mathrm{nF} = 137 \\times 10^{-9}\\,\\mathrm{F}$\n  - Desired time constant $\\tau_{\\text{aw}} = 2.75\\,\\mathrm{ms} = 2.75 \\times 10^{-3}\\,\\mathrm{s}$\n\n### Step 2: Validate Using Extracted Givens\nThe problem is scientifically grounded, describing a standard anti-windup scheme for an integral controller in a power electronics application. The model uses fundamental principles of circuit theory (Kirchhoff's Current Law, capacitor behavior) and control systems. The problem is well-posed, providing sufficient definitions and constraints to derive a unique solution. The language is objective and precise. The parameters are physically realistic. The problem is valid.\n\n### Step 3: Derivation and Solution\n\n**Part 1: Derivation of the differential equation for $v_{c}(t)$**\n\nWe apply Kirchhoff's Current Law (KCL) at the output node of the operational amplifier, where the voltage is $v_c(t)$. This node is connected to the integrating capacitor $C_i$ and the anti-windup clamp circuit. The total current charging the capacitor, $i_C$, is the algebraic sum of the currents entering this node.\n\nThe current charging the capacitor is given by the constitutive law:\n$$i_C(t) = C_i \\frac{dv_c(t)}{dt}$$\n\nThe integrator circuit provides a current proportional to the error signal $e(t)$. From the unclamped state equation $\\dot{v}_c(t) = K_i e(t)$, and knowing that $i_C(t) = C_i \\dot{v}_c(t)$ in that case, we identify the current sourced by the error-processing part of the circuit as:\n$$i_{\\text{in}}(t) = C_i K_i e(t)$$\n\nThe anti-windup clamp consists of a resistor $R_{\\text{aw}}$ in series with an ideal diode, connected between the node $v_c(t)$ and the actuator node $u_a(t)$. When the clamp is conducting, which happens for $v_c(t) > u_a(t)$, the ideal diode acts as a short circuit. A current $i_{\\text{aw}}(t)$ is drawn away from the capacitor node, flowing through the resistor $R_{\\text{aw}}$. This current is given by Ohm's law:\n$$i_{\\text{aw}}(t) = \\frac{v_c(t) - u_a(t)}{R_{\\text{aw}}}$$\n\nApplying KCL at the capacitor node, the net current charging the capacitor is $i_C = i_{\\text{in}} - i_{\\text{aw}}$:\n$$C_i \\frac{dv_c(t)}{dt} = C_i K_i e(t) - \\frac{v_c(t) - u_a(t)}{R_{\\text{aw}}}$$\n\nThe problem requires us to derive the differential equation under specific conditions: the clamp is conducting, the error $e(t)$ has collapsed to $0$, and the actuator signal $u_a(t)$ is held constant at its saturation value. Since the initial error $E_0$ was positive, the integrator voltage $v_c(t)$ would have increased, causing saturation at the upper limit. Thus, $u_a(t)$ is constant at $U_{\\max}$.\n\nSubstituting $e(t) = 0$ and $u_a(t) = U_{\\max}$ into the KCL equation, we get:\n$$C_i \\frac{dv_c(t)}{dt} = C_i K_i (0) - \\frac{v_c(t) - U_{\\max}}{R_{\\text{aw}}}$$\nThis simplifies to the differential equation governing $v_c(t)$ during anti-windup recovery:\n$$C_i \\frac{dv_c(t)}{dt} = - \\frac{v_c(t) - U_{\\max}}{R_{\\text{aw}}}$$\n\n**Part 2: Derivation of the recovery time constant $\\tau_{\\text{aw}}$**\n\nTo find the time constant, we rearrange the derived differential equation into the standard form of a first-order linear system, which is $\\tau \\frac{dy(t)}{dt} + y(t) = K_{\\text{dc}} \\cdot f(t)$, where $\\tau$ is the time constant.\n\nStarting with our equation:\n$$C_i \\frac{dv_c(t)}{dt} = - \\frac{1}{R_{\\text{aw}}} (v_c(t) - U_{\\max})$$\nMultiply both sides by $R_{\\text{aw}}$:\n$$R_{\\text{aw}} C_i \\frac{dv_c(t)}{dt} = -v_c(t) + U_{\\max}$$\nMove the term involving $v_c(t)$ to the left-hand side:\n$$R_{\\text{aw}} C_i \\frac{dv_c(t)}{dt} + v_c(t) = U_{\\max}$$\nThis equation is now in the standard form $\\tau \\frac{dy}{dt} + y = f$, with $y(t) = v_c(t)$, the constant input $f = U_{\\max}$, and the time constant $\\tau$ being the coefficient of the derivative term.\n\nBy direct inspection, the anti-windup recovery time constant $\\tau_{\\text{aw}}$ is:\n$$\\tau_{\\text{aw}} = R_{\\text{aw}} C_i$$\nThis result is physically intuitive, representing the RC time constant of the discharge path formed by the anti-windup resistor and the integrator capacitor. The integrator state $v_c(t)$ exponentially recovers towards the saturation level $U_{\\max}$ with this time constant.\n\n**Part 3: Computation of the resistor value $R_{\\text{aw}}$**\n\nWe are tasked with finding the value of $R_{\\text{aw}}$ that achieves a specified time constant $\\tau_{\\text{aw}}$. We rearrange the formula derived above:\n$$R_{\\text{aw}} = \\frac{\\tau_{\\text{aw}}}{C_i}$$\n\nThe given values are:\n- $\\tau_{\\text{aw}} = 2.75\\,\\mathrm{ms} = 2.75 \\times 10^{-3}\\,\\mathrm{s}$\n- $C_i = 137\\,\\mathrm{nF} = 137 \\times 10^{-9}\\,\\mathrm{F}$\n\nSubstituting these values into the equation:\n$$R_{\\text{aw}} = \\frac{2.75 \\times 10^{-3}\\,\\mathrm{s}}{137 \\times 10^{-9}\\,\\mathrm{F}}$$\n$$R_{\\text{aw}} = \\frac{2.75}{137} \\times 10^{6}\\,\\Omega$$\n$$R_{\\text{aw}} \\approx 0.0200729927 \\times 10^{6}\\,\\Omega$$\n$$R_{\\text{aw}} \\approx 20072.9927\\,\\Omega$$\n\nThe problem requires the answer to be rounded to four significant figures. The first four significant digits are $2$, $0$, $0$, and $7$. The fifth digit is $2$, which is less than $5$, so we round down.\n$$R_{\\text{aw}} \\approx 20070\\,\\Omega$$\nTo express this unambiguously with four significant figures, we use scientific notation:\n$$R_{\\text{aw}} = 2.007 \\times 10^{4}\\,\\Omega$$\nThe final answer is the numerical value of the resistance in ohms.",
            "answer": "$$\\boxed{2.007 \\times 10^{4}}$$"
        }
    ]
}
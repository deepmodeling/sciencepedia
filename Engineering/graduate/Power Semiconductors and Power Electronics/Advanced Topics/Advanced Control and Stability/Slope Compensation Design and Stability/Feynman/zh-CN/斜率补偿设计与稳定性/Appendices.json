{
    "hands_on_practices": [
        {
            "introduction": "在应用解决方案之前，我们必须首先精确地理解问题。本练习旨在奠定这一基础，通过分析一个理想的降压变换器 (Buck converter) ，来探究峰值电流模式控制中次谐波不稳定的根本原因。您将推导出著名的临界占空比阈值——一旦占空比超过该值，无补偿的系统便会失稳——从而将理论稳定性边界与实际工作条件直接关联。",
            "id": "3880021",
            "problem": "一个理想的降压直流-直流（$\\mathrm{DC}$-$\\mathrm{DC}$）buck转换器采用一个金属氧化物半导体场效应晶体管（MOSFET）功率开关和一个二极管。该转换器由峰值电流模式控制，并带有一个后沿脉冲宽度调制（PWM）比较器。一个斜率为 $m_{a}$（单位为 $\\mathrm{A}/\\mathrm{s}$）的线性补偿斜坡可以与检测到的电感电流相加。电感的电感值为 $L$，开关周期为 $T_{s}$，输入电压为 $V_{g}$，稳态占空比为 $D \\in (0,1)$。在理想条件下，输出电压为 $V_{o} = D V_{g}$。负载使得平均电感电流等于负载电流 $I_{o}$。\n\n仅使用电感定律 $v_{L} = L \\, \\frac{di_{L}}{dt}$、理想buck转换关系 $V_{o} = D V_{g}$ 以及带有附加线性补偿斜坡的峰值电流模式控制的定义，完成以下任务：\n\n1) 从电感定律和开关周期内 $i_{L}(t)$ 的三角波纹形状出发，推导维持连续导通模式（CCM）所需的最小平均电感电流 $I_{o,\\min}(D)$ 的解析表达式，其中CCM定义为对所有 $t$ 都有 $i_{L}(t) > 0$。您的推导必须明确使用 $L$、$T_{s}$、$V_{g}$ 和 $D$。\n\n2) 从带有线性补偿斜坡的峰值电流模式控制的采样数据解释出发，推导在一个周期开始时电感电流小扰动的单周期扰动映射。由此，确定唯一的占空比阈值 $D_{c}$，使得在没有斜坡补偿（$m_{a} = 0$）的情况下，当 $D > D_{c}$ 时发生次谐波不稳定性，而当 $D  D_{c}$ 时不发生。总结出为避免次谐波振荡必须确保斜坡补偿的占空比范围。\n\n答案规格：\n- 以两个闭式解析表达式的形式提供您的最终结果：\n  (i) $I_{o,\\min}(D)$，单位为安培，\n  (ii) 无量纲的占空比阈值 $D_{c}$，为一个单独的数字。\n- 无需进行数值计算或四舍五入；提供精确的符号表达式。",
            "solution": "分析从buck转换器和峰值电流模式控制的基本定律和核心定义开始。首先，我们从电感定律中获得连续导通模式（CCM）的占空比相关条件。其次，我们推导带有线性补偿斜坡的峰值电流模式控制下的采样数据电流扰动映射，并提取出确定必须确保斜坡补偿的占空比阈值的条件。\n\n第1部分：占空比相关的CCM条件。\n\n电感遵循 $v_{L} = L \\, \\frac{di_{L}}{dt}$。在一个具有输入电压 $V_{g}$、输出电压 $V_{o} = D V_{g}$ 和占空比 $D$ 的理想buck转换器中，每个周期电感经历两个仿射电流斜率：\n\n- 在开关闭合期间，$0 \\le t \\le D T_{s}$，电感电压为 $v_{L,\\mathrm{on}} = V_{g} - V_{o} = V_{g} - D V_{g} = V_{g}(1 - D)$，因此电感电流的上升斜率为\n$$\nm_{1} = \\frac{di_{L}}{dt}\\Big|_{\\mathrm{on}} = \\frac{V_{g}(1 - D)}{L}.\n$$\n\n- 在开关断开期间，$D T_{s} \\le t \\le T_{s}$，电感电压为 $v_{L,\\mathrm{off}} = - V_{o} = - D V_{g}$，因此下降斜率的幅值为\n$$\nm_{2} = \\left|\\frac{di_{L}}{dt}\\Big|_{\\mathrm{off}}\\right| = \\frac{D V_{g}}{L}.\n$$\n\n在稳态下，电感电流纹波是三角形的，其在一个周期内的峰峰值幅度无论是在开通区间还是关断区间计算都是相等的：\n$$\n\\Delta i_{L} = m_{1} \\, D T_{s} = m_{2} \\, (1 - D) T_{s}.\n$$\n两种公式计算出的量是相同的：\n$$\n\\Delta i_{L} = \\frac{V_{g}}{L} (1 - D) \\, D \\, T_{s}.\n$$\n\n在理想条件下，平均电感电流 $I_{o}$ 等于负载电流。一个周期内电感电流的最小值为\n$$\ni_{L,\\min} = I_{o} - \\frac{\\Delta i_{L}}{2}.\n$$\n连续导通模式（CCM）要求 $i_{L,\\min} > 0$，这导致了与占空比相关的条件\n$$\nI_{o} > \\frac{\\Delta i_{L}}{2} = \\frac{1}{2} \\frac{V_{g}}{L} (1 - D) \\, D \\, T_{s}.\n$$\n因此，保证CCM作为占空比函数的最小平均电流为\n$$\nI_{o,\\min}(D) = \\frac{V_{g} \\, T_{s}}{2 L} D (1 - D).\n$$\n\n第2部分：次谐波不稳定性的占空比阈值及斜坡补偿的必要性。\n\n我们使用电感电流扰动的采样数据映射来分析峰值电流模式控制。设在第 $n$ 个周期开始时存在一个小的偏差 $\\delta i_{n}$。控制器将检测到的电感电流加上一个线性补偿斜坡与一个固定的参考值进行比较。在开通期间，检测到的信号可以表示为一个具有有效斜率的和\n$$\ns_{\\mathrm{on}}(t) = i_{L}(0) + (m_{1} + m_{a}) t,\n$$\n其中 $m_{a}$ 是线性补偿斜坡的斜率，单位为 $\\mathrm{A}/\\mathrm{s}$。比较器的穿越时间通过 $s_{\\mathrm{on}}(d_{n} T_{s}) = \\text{constant}$ 决定了该周期内的瞬时占空比 $d_{n}$。对于小扰动，线性化穿越条件可以得到占空比扰动 $\\delta d_{n}$ 和初始电流扰动 $\\delta i_{n}$ 之间的关系：\n$$\n(m_{1} + m_{a}) T_{s} \\, \\delta d_{n} + \\delta i_{n} = 0 \\quad \\Rightarrow \\quad \\delta d_{n} = - \\frac{\\delta i_{n}}{(m_{1} + m_{a}) T_{s}}.\n$$\n\n第 $n$ 个周期结束时的电感电流是初始电流与开通和关断子区间内变化量之和。第 $n+1$ 个周期开始时的扰动的单周期更新等于第 $n$ 个周期结束时的扰动。对 $\\delta d_{n}$ 进行线性化，\n$$\n\\delta i_{n+1} = \\delta i_{n} + m_{1} T_{s} \\, \\delta d_{n} - m_{2} (-T_s \\delta d_n) = \\delta i_n + (m_1+m_2)T_s \\delta d_n\n$$\n从穿越线性化中代入 $\\delta d_{n}$，\n$$\n\\delta i_{n+1} = \\delta i_{n} + (m_{1} + m_{2}) T_{s} \\left( - \\frac{\\delta i_{n}}{(m_{1} + m_{a}) T_{s}} \\right) = \\delta i_{n} \\left( 1 - \\frac{m_1+m_2}{m_1+m_a} \\right) = \\delta i_{n} \\left( \\frac{m_{a} - m_{2}}{m_{1} + m_{a}} \\right).\n$$\n因此扰动映射为\n$$\n\\delta i_{n+1} = \\alpha \\, \\delta i_{n}, \\quad \\text{with} \\quad \\alpha = \\frac{m_{a} - m_{2}}{m_{1} + m_{a}}.\n$$\n\n当采样数据特征值的幅值超过1时，即 $|\\alpha| > 1$，就会出现次谐波不稳定性（倍周期）。对抗次谐波的稳定性要求 $|\\alpha|  1$。我们考察两种情况：\n\n- 如果 $m_{a} \\ge m_{2}$，则 $\\alpha = \\frac{m_a - m_2}{m_1 + m_a} \\ge 0$。稳定性条件 $|\\alpha|  1$ 变为\n$$\n\\frac{m_{a} - m_{2}}{m_{1} + m_{a}}  1 \\implies m_a - m_2  m_1 + m_a \\implies -m_2  m_1,\n$$\n该条件总是成立，因为 $m_1$ 和 $m_2$ 均为正值。\n\n- 如果 $m_{a}  m_{2}$，则 $\\alpha  0$。稳定性条件 $|\\alpha|  1$ 变为 $\\alpha > -1$，即\n$$\n\\frac{m_a - m_2}{m_1 + m_a} > -1 \\implies m_a - m_2 > -(m_1 + m_a) \\implies 2m_a > m_2 - m_1 \\implies m_{a} > \\frac{m_{2} - m_{1}}{2}.\n$$\n\n在没有斜坡补偿（$m_{a} = 0$）的情况下，该稳定条件简化为 $0 > \\frac{m_2-m_1}{2}$ 或 $m_1 > m_2$，对于buck转换器，这变为\n$$\n\\frac{V_{g}(1 - D)}{L} > \\frac{D V_{g}}{L} \\quad \\Leftrightarrow \\quad 1 - D > D \\quad \\Leftrightarrow \\quad D  \\frac{1}{2}.\n$$\n因此占空比阈值为\n$$\nD_{c} = \\frac{1}{2},\n$$\n并且当 $m_{a} = 0$ 时，对于占空比 $D > D_{c}$，系统会失稳。因此必须确保斜坡补偿以避免次谐波振荡。更一般地，确保在所有 $D \\in (0,1)$ 下稳定的一个充分设计是 $m_{a} \\ge m_{2}$，而在给定 $D$ 值下消除次谐波的精确最小斜坡斜率为\n$$\nm_{a,\\min}(D) = \\max\\!\\left( 0, \\, \\frac{m_{2} - m_{1}}{2} \\right) = \\max\\!\\left( 0, \\, \\frac{V_{g}}{2 L} (2 D - 1) \\right),\n$$\n它在 $D > \\frac{1}{2}$ 时恰好为严格正值。\n\n汇总所要求的表达式，我们有：\n- CCM最小平均电感电流：\n$$\nI_{o,\\min}(D) = \\frac{V_{g} T_{s}}{2 L} D (1 - D).\n$$\n- 无斜坡补偿时次谐波不稳定性发生的无量纲占空比阈值：\n$$\nD_{c} = \\frac{1}{2}.\n$$",
            "answer": "$$\\boxed{\\begin{pmatrix}\\dfrac{V_{g} T_{s}}{2L} D(1-D)  \\dfrac{1}{2}\\end{pmatrix}}$$"
        },
        {
            "introduction": "明确了不稳定的条件之后，我们的下一个任务便是设计一种有效的校正方法。本练习  聚焦于斜坡补偿这一核心技术，引导您推导并计算确保稳定所需的补偿斜率。通过将这些原理应用于一个降压-升压变换器 (Buck-Boost converter)，您不仅能解决一个具体的大占空比工作点的稳定性问题，还能体会到该方法在不同电路拓扑中的普适性。",
            "id": "3879970",
            "problem": "一个工作在连续导通模式 (CCM) 下的理想反相降压-升压直流-直流转换器，采用峰值电流模式控制，开关频率恒定。输入电压固定为 $V_g$，输出电压的幅值为 $V_o$，占空比为 $D \\in (0,1)$。设电感值为 $L$。在开关闭合期间，电感承受输入电压；在开关断开期间，电感承受负的输出电压。将开关闭合期间电感电流的上升斜率定义为 $m_1$，将开关断开期间电感电流下降斜率的幅值定义为 $m_2$。\n\n1) 仅从电感本构定律 $v_L = L \\, \\frac{di_L}{dt}$ 和周期稳态伏秒平衡出发，推导 $m_1$ 和 $m_2$ 关于 $V_g$、$V_o$ 和 $L$ 的表达式。利用这些表达式，并通过对无任何人工斜坡补偿时峰值电流模式控制与固定控制参考点交点的采样数据扰动分析，推导出一维庞加莱映射的未补偿快尺度特征值幅值 $\\lambda$，并证明 $\\lambda = \\frac{m_2}{m_1} = \\frac{V_o}{V_g} = \\frac{D}{1-D}$。\n\n2) 现在，在检测电流上叠加一个等效电流斜率为 $m_a$ 的人工斜坡补偿（仅在开关闭合期间）。重复采样数据扰动分析，推导补偿后的特征值幅值 $|\\lambda_c|$ 关于 $m_1$、$m_2$ 和 $m_a$ 的表达式。然后，对于 $D = 0.75$，$V_g = 12$ V，$L = 47$ $\\mu$H 的情况，计算保证快尺度稳定性（定义为条件 $|\\lambda_c|  1$）所需的最小 $m_a$。将 $m_a$ 的最终值以 A/$\\mu$s 为单位表示，并四舍五入到四位有效数字。",
            "solution": "该问题分为两部分。第一部分处理未补偿的系统，第二部分引入斜坡补偿。\n\n**第一部分：未补偿系统分析**\n\n首先，我们推导电感电流斜率 $m_1$ 和 $m_2$ 的表达式。问题陈述了电感本构定律为 $v_L(t) = L \\frac{di_L(t)}{dt}$。\n\n在开关导通期间，其持续时间为 $DT_s$（其中 $T_s$ 是开关周期），电感电压为 $v_L(t) = V_g$。电感电流的变化率是恒定的：\n$$ \\frac{di_L(t)}{dt} = \\frac{V_g}{L} $$\n该斜率被定义为 $m_1$。因此，\n$$ m_1 = \\frac{V_g}{L} $$\n\n在开关断开期间，其持续时间为 $(1-D)T_s$，电感电压为 $v_L(t) = -V_o$。电感电流的变化率也是恒定的：\n$$ \\frac{di_L(t)}{dt} = -\\frac{V_o}{L} $$\n问题将 $m_2$ 定义为该下降斜率的幅值。因此，\n$$ m_2 = \\left| -\\frac{V_o}{L} \\right| = \\frac{V_o}{L} $$\n\n接下来，我们在电感上应用周期稳态伏秒平衡原理。该原理指出，在一个完整的开关周期内，电感上的平均电压必须为零。\n$$ \\frac{1}{T_s} \\int_0^{T_s} v_L(t) \\, dt = 0 $$\n$$ \\frac{1}{T_s} \\left( \\int_0^{DT_s} V_g \\, dt + \\int_{DT_s}^{T_s} (-V_o) \\, dt \\right) = 0 $$\n$$ \\frac{1}{T_s} \\left( V_g (DT_s) - V_o ((1-D)T_s) \\right) = 0 $$\n$$ V_g D = V_o (1-D) $$\n这得出了连续导通模式 (CCM) 下降压-升压转换器的理想电压转换比：\n$$ \\frac{V_o}{V_g} = \\frac{D}{1-D} $$\n\n利用这个关系，我们可以将斜率 $m_1$ 和 $m_2$ 联系起来：\n$$ \\frac{m_2}{m_1} = \\frac{V_o/L}{V_g/L} = \\frac{V_o}{V_g} $$\n结合这些结果，我们证明了 $\\frac{m_2}{m_1} = \\frac{V_o}{V_g} = \\frac{D}{1-D}$。\n\n现在，我们使用采样数据扰动分析来推导未补偿的快尺度特征值。设开关周期 $k$ 开始时的电感电流为 $i_L[k]$。设稳态占空比为 $D$，周期 $k$ 中的扰动占空比为 $d_k = D + \\hat{d}_k$。周期 $k$ 开始时的电感电流受到扰动，$i_L[k] = \\bar{I}_L[k] + \\hat{i}_L[k]$，其中 $\\bar{I}_L[k]$ 是稳态分量，$\\hat{i}_L[k]$ 是小扰动。\n\n在无补偿的峰值电流模式控制中，当电感电流 $i_L(t)$ 达到一个固定的参考水平 $I_{ref}$ 时，开关断开。\n在周期 $k$ 的导通时间内，电流演变为 $i_L(t) = i_L[k] + m_1 t$。关断发生在时间 $t = d_k T_s$。\n$$ i_L[k] + m_1 (d_k T_s) = I_{ref} $$\n$$ (\\bar{I}_L[k] + \\hat{i}_L[k]) + m_1 (D + \\hat{d}_k) T_s = I_{ref} $$\n稳态条件是 $\\bar{I}_L[k] + m_1 D T_s = I_{ref}$。从扰动方程中减去稳态方程，得到一阶扰动动态：\n$$ \\hat{i}_L[k] + m_1 \\hat{d}_k T_s = 0 \\implies \\hat{d}_k T_s = -\\frac{\\hat{i}_L[k]}{m_1} $$\n\n周期 $k$ 结束时的电感电流（也就是周期 $k+1$ 开始时的电流，即 $i_L[k+1]$）可以通过考虑关断期间的电流下降来找到：\n$$ i_L[k+1] = i_L(d_k T_s) - m_2 (T_s - d_k T_s) $$\n因为 $i_L(d_k T_s) = I_{ref}$，我们有：\n$$ i_L[k+1] = I_{ref} - m_2 T_s(1 - d_k) = I_{ref} - m_2 T_s(1 - (D + \\hat{d}_k)) $$\n$$ \\bar{I}_L[k+1] + \\hat{i}_L[k+1] = I_{ref} - m_2 T_s(1-D) + m_2 \\hat{d}_k T_s $$\n稳态值为 $\\bar{I}_L[k+1] = \\bar{I}_L[k] = I_{ref} - m_2 T_s(1-D)$。减去此项，剩下扰动演化过程：\n$$ \\hat{i}_L[k+1] = m_2 \\hat{d}_k T_s $$\n代入 $\\hat{d}_k T_s$ 的表达式：\n$$ \\hat{i}_L[k+1] = m_2 \\left( -\\frac{\\hat{i}_L[k]}{m_1} \\right) = -\\frac{m_2}{m_1} \\hat{i}_L[k] $$\n这是一个关于扰动的一维离散时间映射，$\\hat{i}_L[k+1] = \\lambda_{eig} \\hat{i}_L[k]$。该映射的特征值为 $\\lambda_{eig} = -\\frac{m_2}{m_1}$。\n问题要求特征值的幅值，并用符号 $\\lambda$ 表示。由于 $m_1$ 和 $m_2$ 均为正值：\n$$ \\lambda = |\\lambda_{eig}| = \\left|-\\frac{m_2}{m_1}\\right| = \\frac{m_2}{m_1} $$\n我们已经证明了 $\\frac{m_2}{m_1} = \\frac{V_o}{V_g} = \\frac{D}{1-D}$。这完成了第一部分的推导。为了保证稳定性，要求 $|\\lambda_{eig}|  1$，即 $\\frac{m_2}{m_1}  1$，或 $D  0.5$。\n\n**第二部分：补偿系统分析**\n\n现在，一个斜率为 $m_a$ 的人工补偿斜坡被添加到采样电流中。在导通期间，采样信号变为 $i_s(t) = i_L(t) + m_a t$。当 $i_s(t) = I_{ref}$ 时，开关断开。\n在关断瞬间 $t = d_k T_s$：\n$$ i_L(d_k T_s) + m_a (d_k T_s) = I_{ref} $$\n电感电流本身仍然遵循 $i_L(t) = i_L[k] + m_1 t$。将其代入关断条件：\n$$ (i_L[k] + m_1 d_k T_s) + m_a d_k T_s = I_{ref} $$\n$$ i_L[k] + (m_1 + m_a) d_k T_s = I_{ref} $$\n进行与之前相同的扰动分析 ($i_L[k] = \\bar{I}_L[k] + \\hat{i}_L[k]$, $d_k = D + \\hat{d}_k$)：\n$$ (\\bar{I}_L[k] + \\hat{i}_L[k]) + (m_1 + m_a) (D + \\hat{d}_k) T_s = I_{ref} $$\n稳态方程是 $\\bar{I}_L[k] + (m_1 + m_a) D T_s = I_{ref}$。减去此项得到：\n$$ \\hat{i}_L[k] + (m_1 + m_a) \\hat{d}_k T_s = 0 \\implies \\hat{d}_k T_s = -\\frac{\\hat{i}_L[k]}{m_1 + m_a} $$\n\n现在我们求下一周期开始时的电流 $i_L[k+1]$。电流的下降部分不受补偿斜坡的影响，因为它只在导通期间有效。\n$$ i_L[k+1] = i_L(d_k T_s) - m_2(T_s - d_k T_s) $$\n从关断条件，我们可以将峰值电流表示为 $i_L(d_k T_s) = I_{ref} - m_a d_k T_s$。\n$$ i_L[k+1] = (I_{ref} - m_a d_k T_s) - m_2(T_s - d_k T_s) $$\n$$ i_L[k+1] = I_{ref} - m_2 T_s + (m_2 - m_a) d_k T_s $$\n$$ \\bar{I}_L[k+1] + \\hat{i}_L[k+1] = I_{ref} - m_2 T_s + (m_2 - m_a) (D + \\hat{d}_k) T_s $$\n稳态方程是 $\\bar{I}_L[k+1] = I_{ref} - m_2 T_s + (m_2 - m_a) D T_s$。减去此项得到：\n$$ \\hat{i}_L[k+1] = (m_2 - m_a) \\hat{d}_k T_s $$\n代入 $\\hat{d}_k T_s$ 的表达式：\n$$ \\hat{i}_L[k+1] = (m_2 - m_a) \\left( -\\frac{\\hat{i}_L[k]}{m_1 + m_a} \\right) = -\\frac{m_2 - m_a}{m_1 + m_a} \\hat{i}_L[k] $$\n补偿后的特征值为 $\\lambda_c = -\\frac{m_2 - m_a}{m_1 + m_a}$。\n因此，补偿后特征值的幅值为：\n$$ |\\lambda_c| = \\left| -\\frac{m_2 - m_a}{m_1 + m_a} \\right| = \\frac{|m_2 - m_a|}{m_1 + m_a} $$\n这就是所要求的表达式。\n\n最后，我们根据给定的参数 $D = 0.75$，$V_g = 12$ V 和 $L = 47\\,\\mu$H，计算保证稳定性（定义为 $|\\lambda_c|  1$）所需的最小补偿斜率 $m_a$。\n稳定边界在 $|\\lambda_c| = 1$。当特征值穿过 $-1$ 时，系统变得不稳定。\n$$ \\lambda_c = -1 \\implies -\\frac{m_2 - m_a}{m_1 + m_a} = -1 $$\n$$ m_2 - m_a = m_1 + m_a $$\n$$ m_2 - m_1 = 2 m_a $$\n因此，确保稳定性（$|\\lambda_c|$ 恰好小于 $1$）所需的最小斜率为：\n$$ m_{a,min} = \\frac{m_2 - m_1}{2} $$\n这个条件仅在 $m_2 > m_1$ 时是必要的，这对应于 $D > 0.5$。当 $D=0.75$ 时，确实需要补偿。\n\n现在，我们计算数值。斜率的单位将是 A/$\\mu$s。我们有 $L = 47\\,\\mu$H $= 47$ V$\\cdot\\mu$s/A。\n电感电流上升斜率为：\n$$ m_1 = \\frac{V_g}{L} = \\frac{12\\,\\text{V}}{47\\,\\mu\\text{H}} = \\frac{12}{47}\\,\\text{A/}\\mu\\text{s} $$\n为了求 $m_2$，我们首先求输出电压 $V_o$：\n$$ V_o = V_g \\frac{D}{1-D} = 12\\,\\text{V} \\times \\frac{0.75}{1-0.75} = 12\\,\\text{V} \\times \\frac{0.75}{0.25} = 12\\,\\text{V} \\times 3 = 36\\,\\text{V} $$\n电感电流下降斜率的幅值为：\n$$ m_2 = \\frac{V_o}{L} = \\frac{36\\,\\text{V}}{47\\,\\mu\\text{H}} = \\frac{36}{47}\\,\\text{A/}\\mu\\text{s} $$\n现在我们可以计算最小补偿斜率：\n$$ m_{a,min} = \\frac{m_2 - m_1}{2} = \\frac{1}{2} \\left( \\frac{36}{47} - \\frac{12}{47} \\right)\\,\\text{A/}\\mu\\text{s} $$\n$$ m_{a,min} = \\frac{1}{2} \\left( \\frac{24}{47} \\right)\\,\\text{A/}\\mu\\text{s} = \\frac{12}{47}\\,\\text{A/}\\mu\\text{s} $$\n将其转换为数值：\n$$ m_{a,min} = \\frac{12}{47} \\approx 0.25531914...\\,\\text{A/}\\mu\\text{s} $$\n四舍五入到四位有效数字，我们得到：\n$$ m_{a,min} \\approx 0.2553\\,\\text{A/}\\mu\\text{s} $$",
            "answer": "$$\\boxed{0.2553}$$"
        },
        {
            "introduction": "理论上的理想设计仅是起点，一个真正卓越的工程设计必须能在充满不确定性的现实世界中可靠工作。本项高级练习  将挑战您把分析提升到鲁棒设计的层次，其核心在于将元器件公差、传播延迟和测量噪声等实际非理想因素纳入考量。您的任务是建立一个最差情况下的稳定性判据，并计算确保系统稳定所需的设计裕量，从而实现从理论分析到鲁棒工程实践的关键一跃。",
            "id": "3880042",
            "problem": "一个工作在连续导通模式 (CCM)下的峰值电流模式控制降压转换器使用脉冲宽度调制 (PWM) 并附加一个人为斜坡进行斜率补偿。电感器的电感值为 $L$，输入电压为 $V_{g}$，稳压输出电压为 $V$。采样电流以 $k_{i} i_{L}(t)$ 的形式输入比较器，其中 $k_{i}$ 是电流采样增益。人为斜坡 $r(t)$ 在比较器输入端叠加，并在每个周期复位；其等效电流斜率为 $m_{a}$，定义为在开关导通期间，比较器输入随 $k_{i} i_{L}(t) + m_{a} t$ 演变。当输入达到控制参考值 $v_{c}$ 时，比较器决定关断时间。在 $k_{i} i_{L}(t) + r(t)$ 上叠加了一个有界的比较器输入噪声 $n(t)$，其在决策时刻的斜率有界，满足 $|\\dot{n}(t_{on})| \\leq m_{n,\\max}$。PWM 实现中，从比较器决策到开关关断存在一个有效传播延迟 $t_{d}$。\n\n从电感定律 $v_{L} = L \\,\\mathrm{d}i_{L}/\\mathrm{d}t$、降压转换器的极性 $v_{L,\\mathrm{on}} = V_{g} - V$ 和 $v_{L,\\mathrm{off}} = -V$，以及导通期间的比较器决策规则 $k_{i} i_{L}(t) + m_{a} t + n(t) = v_{c}$ 出发，推导电感谷底电流在开关周期之间的一维采样映射，以及相关的、决定次谐波动态的线性化 Floquet 乘子 $\\lambda$，用 $L$、$k_{i}$、$m_{a}$、$V_{g}$、$V$、$t_{d}$ 和 $\\dot{n}(t_{on})$ 表示。利用该推导，为给定的不确定性集合建立一个形式为 $m_{a} = m_{a,\\min} (1 + \\delta)$ 的最差情况裕度设计准则，并计算足够大的 $\\delta$ 以确保在该集合中的所有参数组合下都有 $|\\lambda| \\le 0.8$。\n\n使用以下标称和不确定性数据：\n- 标称稳压输出电压 $V = 12\\,\\mathrm{V}$ 和输入电压 $V_{g} = 24\\,\\mathrm{V}$。\n- 电感 $L \\in [18\\,\\mu\\mathrm{H},\\,22\\,\\mu\\mathrm{H}]$。\n- 电流采样增益 $k_{i} \\in [0.95,\\,1.05]$ (无量纲)。\n- 有效传播延迟 $t_{d} \\in [0,\\,200\\,\\mathrm{ns}]$。\n- 噪声斜率界限 $|\\dot{n}(t_{on})| \\leq m_{n,\\max} = 5.0 \\times 10^{4}\\,\\mathrm{A/s}$。\n\n基准补偿器 $m_{a,\\min}$ 在标称条件 $L_{0} = 20\\,\\mu\\mathrm{H}$、$k_{i,0} = 1$ 和 $\\dot{n}(t_{on}) = 0$ 下选取，以实现 $|\\lambda| = 0.95$。\n\n符号化地推导 $\\lambda$ 的闭式表达式，以及保证在整个不确定性集合中 $|\\lambda| \\le 0.8$ 的关于 $m_{a}$ 的最差情况不等式，然后根据上述数据计算设计准则 $m_{a} = m_{a,\\min}(1 + \\delta)$ 中的 $\\delta$ 的数值。将 $\\delta$ 表示为无单位小数，并将答案四舍五入到四位有效数字。",
            "solution": "该问题要求推导峰值电流模式控制降压转换器的稳定性判据，并计算斜率补偿斜坡的设计裕度，以确保对参数变化和噪声的鲁棒稳定性。\n\n### 步骤1：Floquet 乘子 $\\lambda$ 的推导\n\n首先，我们建立从一个周期到下一个周期的电感谷底电流 $i_k$ 的离散时间映射。开关导通和关断期间的电感电流斜率由下式给出：\n导通斜率：$m_1 = \\frac{\\mathrm{d}i_L}{\\mathrm{d}t} = \\frac{V_g - V}{L}$\n关断斜率幅值：$|m_2| = \\frac{V}{L}$\n\n在周期 $k$ 中，从谷底电流 $i_k$ 开始，电感电流随 $i_L(t) = i_k + m_1 t$ 演变。当采样信号 $s(t) = k_i i_L(t) + m_a t + n(t)$ 达到控制参考值 $v_c$ 时，比较器在时间 $t_{on,k}$ 做出决策。\n$$k_i (i_k + m_1 t_{on,k}) + m_a t_{on,k} + n(t_{on,k}) = v_c$$\n由于传播延迟 $t_d$，开关实际在 $t_{off,k} = t_{on,k} + t_d$ 时刻关断。因此，周期 $k$ 中的电感峰值电流为：\n$$i_{peak,k} = i_k + m_1 (t_{on,k} + t_d)$$\n随后的谷底电流 $i_{k+1}$ 是在电流在开关周期 $T_s$ 的剩余时间内以斜率 $-m_2$ 下降后得到的：\n$$i_{k+1} = i_{peak,k} - |m_2| (T_s - t_{off,k}) = i_k + m_1(t_{on,k} + t_d) - |m_2|(T_s - (t_{on,k} + t_d))$$\n$$i_{k+1} = i_k + (m_1 + |m_2|)t_{on,k} + (m_1 + |m_2|)t_d - |m_2| T_s$$\n该方程表示谷底电流的精确、非线性、一维采样映射。\n\n为了分析局部稳定性，我们围绕其稳态工作点对此映射进行线性化。在稳态下，$i_k = i_{k+1} = I_{valley}$，$t_{on,k} = T_{on}$，且噪声 $n(t) = 0$。控制参考值为常数 $V_c$。\n稳态比较器方程：$k_i (I_{valley} + m_1 T_{on}) + m_a T_{on} = V_c$。\n稳态电流映射：$0 = (m_1 + |m_2|)T_{on} + (m_1 + |m_2|)t_d - |m_2| T_s$。\n\n我们在此稳态周围引入小扰动：$i_k = I_{valley} + \\tilde{i}_k$ 和 $t_{on,k} = T_{on} + \\tilde{t}_{on,k}$。我们对比较器方程进行扰动，保留一阶项，并对噪声项使用泰勒展开 $n(t_{on,k}) \\approx n(T_{on}) + \\dot{n}(T_{on}) \\tilde{t}_{on,k}$：\n$$k_i (I_{valley} + \\tilde{i}_k + m_1 (T_{on} + \\tilde{t}_{on,k})) + m_a (T_{on} + \\tilde{t}_{on,k}) + n(T_{on}) + \\dot{n}(T_{on})\\tilde{t}_{on,k} = V_c$$\n减去稳态方程可得：\n$$k_i \\tilde{i}_k + (k_i m_1 + m_a + \\dot{n}(T_{on})) \\tilde{t}_{on,k} + n(T_{on}) = 0$$\n求解导通时间扰动 $\\tilde{t}_{on,k}$：\n$$\\tilde{t}_{on,k} = - \\frac{k_i \\tilde{i}_k + n(T_{on})}{k_i m_1 + m_a + \\dot{n}(T_{on})}$$\n接下来，我们对电流映射进行扰动：\n$$I_{valley} + \\tilde{i}_{k+1} = (I_{valley} + \\tilde{i}_k) + (m_1 + |m_2|)(T_{on} + \\tilde{t}_{on,k}) + (m_1 + |m_2|)t_d - |m_2| T_s$$\n减去稳态映射方程，得到扰动的线性化映射：\n$$\\tilde{i}_{k+1} = \\tilde{i}_k + (m_1 + |m_2|)\\tilde{t}_{on,k}$$\nFloquet 乘子 $\\lambda$ 是该映射齐次部分的增益，即 $\\lambda = \\frac{\\partial \\tilde{i}_{k+1}}{\\partial \\tilde{i}_k}$。代入 $\\tilde{t}_{on,k}$ 的表达式：\n$$\\lambda = 1 + (m_1 + |m_2|) \\frac{\\partial}{\\partial \\tilde{i}_k} \\left( - \\frac{k_i \\tilde{i}_k + n(T_{on})}{k_i m_1 + m_a + \\dot{n}(T_{on})} \\right) = 1 - \\frac{k_i(m_1 + |m_2|)}{k_i m_1 + m_a + \\dot{n}}$$\n其中 $\\dot{n}$ 表示 $\\dot{n}(T_{on})$。代入 $m_1 + |m_2| = \\frac{V_g - V}{L} + \\frac{V}{L} = \\frac{V_g}{L}$ 和 $m_1 = \\frac{V_g-V}{L}$：\n$$\\lambda = 1 - \\frac{k_i V_g/L}{k_i (V_g-V)/L + m_a + \\dot{n}}$$\n这就是 Floquet 乘子的符号表达式。注意它与传播延迟 $t_d$ 无关。\n\n### 步骤2：最差情况稳定性条件\n\n问题要求 $|\\lambda| \\le 0.8$。由于分数部分为正（对于实际的 $m_a$ 值），这等价于 $\\lambda \\ge -0.8$。\n$$1 - \\frac{k_i V_g/L}{k_i (V_g-V)/L + m_a + \\dot{n}} \\ge -0.8$$\n$$1.8 \\ge \\frac{k_i V_g/L}{k_i (V_g-V)/L + m_a + \\dot{n}}$$\n假设分母为正，这是稳定运行所必需的：\n$$1.8(k_i (V_g-V)/L + m_a + \\dot{n}) \\ge k_i V_g/L$$\n$$1.8 m_a \\ge k_i V_g/L - 1.8 k_i(V_g-V)/L - 1.8 \\dot{n}$$\n$$1.8 m_a \\ge \\frac{k_i}{L} (V_g - 1.8V_g + 1.8V) - 1.8 \\dot{n}$$\n$$m_a \\ge \\frac{k_i}{1.8L} (1.8V - 0.8V_g) - \\dot{n}$$\n为确保该不等式对所有参数变化都成立，我们必须选择 $m_a$ 大于等于右侧表达式可能的最大值。我们必须找到使函数 $f(k_i, L, \\dot{n}) = \\frac{k_i}{1.8L} (1.8V - 0.8V_g) - \\dot{n}$ 最大化的参数组合。\n给定 $V=12\\,\\mathrm{V}$ 和 $V_g=24\\,\\mathrm{V}$，项 $1.8V - 0.8V_g = 1.8(12) - 0.8(24) = 21.6 - 19.2 = 2.4 > 0$。\n函数 $f$ 在以下条件下最大化：\n- $k_i$ 最大：$k_{i,max} = 1.05$。\n- $L$ 最小：$L_{min} = 18\\,\\mu\\mathrm{H} = 18 \\times 10^{-6}\\,\\mathrm{H}$。\n- $-\\dot{n}$ 最大，意味着 $\\dot{n}$ 最小。由于 $|\\dot{n}| \\leq m_{n,max}$，最小值为 $\\dot{n}_{min} = -m_{n,max} = -5.0 \\times 10^{4}\\,\\mathrm{A/s}$。\n最差情况下所需的补偿斜率 $m_{a,wc}$ 为：\n$$m_{a,wc} = \\frac{k_{i,max}}{1.8L_{min}}(1.8V - 0.8V_g) - \\dot{n}_{min} = \\frac{1.05}{1.8 \\times 18 \\times 10^{-6}}(2.4) + 5.0 \\times 10^{4}$$\n\n### 步骤3：基准补偿器 $m_{a,min}$ 的计算\n\n基准补偿器 $m_{a,min}$ 是为标称条件（$L_0 = 20\\,\\mu\\mathrm{H}$、$k_{i,0} = 1$、$\\dot{n}=0$）设计的，以实现 $|\\lambda|=0.95$，这意味着 $\\lambda = -0.95$。\n$$-0.95 = 1 - \\frac{k_{i,0} V_g/L_0}{k_{i,0} (V_g-V)/L_0 + m_{a,min}}$$\n$$1.95 = \\frac{k_{i,0} V_g/L_0}{k_{i,0} (V_g-V)/L_0 + m_{a,min}}$$\n$$1.95(k_{i,0} (V_g-V)/L_0 + m_{a,min}) = k_{i,0} V_g/L_0$$\n$$1.95 m_{a,min} = \\frac{k_{i,0}}{L_0} (V_g - 1.95(V_g-V)) = \\frac{k_{i,0}}{L_0}(1.95V - 0.95V_g)$$\n$$m_{a,min} = \\frac{k_{i,0}}{1.95 L_0} (1.95V - 0.95V_g)$$\n代入标称值：$V=12\\,\\mathrm{V}$、$V_g=24\\,\\mathrm{V}$、$k_{i,0}=1$、$L_0=20 \\times 10^{-6}\\,\\mathrm{H}$。\n$$m_{a,min} = \\frac{1}{1.95 \\times 20 \\times 10^{-6}} (1.95 \\times 12 - 0.95 \\times 24) = \\frac{1}{39 \\times 10^{-6}} (23.4 - 22.8) = \\frac{0.6}{39 \\times 10^{-6}} = \\frac{200000}{13}\\,\\mathrm{A/s}$$\n\n### 步骤4：裕度 $\\delta$ 的计算\n\n设计准则为 $m_a = m_{a,min}(1+\\delta)$。为确保鲁棒稳定性，我们将此 $m_a$ 设置为等于最差情况要求 $m_{a,wc}$。\n$$m_{a,min}(1+\\delta) = m_{a,wc}$$\n$$\\delta = \\frac{m_{a,wc}}{m_{a,min}} - 1$$\n我们首先计算 $m_{a,wc}$：\n$$m_{a,wc} = \\frac{1.05}{1.8 \\times 18 \\times 10^{-6}}(2.4) + 5.0 \\times 10^{4} = \\frac{2.52}{32.4 \\times 10^{-6}} + 50000$$\n$$m_{a,wc} = \\frac{2520000}{32.4} + 50000 = 77777.77... + 50000 = 127777.77... = \\frac{1150000}{9}\\,\\mathrm{A/s}$$\n现在我们计算 $\\delta$：\n$$\\delta = \\frac{1150000/9}{200000/13} - 1 = \\frac{1150000}{9} \\times \\frac{13}{200000} - 1 = \\frac{11.5 \\times 13}{9 \\times 2} - 1$$\n$$\\delta = \\frac{149.5}{18} - 1 = \\frac{149.5 - 18}{18} = \\frac{131.5}{18} \\approx 7.30555...$$\n四舍五入到四位有效数字，我们得到 $\\delta = 7.306$。",
            "answer": "$$\\boxed{7.306}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "A primary limitation of current-mode control is its susceptibility to subharmonic oscillation, a period-doubling instability that can occur at duty cycles above 50%. This exercise provides a rigorous method for analyzing this phenomenon by modeling the converter's cycle-by-cycle dynamics as a discrete-time Poincaré map, a powerful tool for analyzing nonlinear systems. By deriving this map and examining its linearized stability, you will uncover the mathematical origin of the instability and understand how slope compensation works to prevent it, culminating in a computational approach to verify design stability .",
            "id": "3821154",
            "problem": "Consider a direct current to direct current buck converter regulated by peak Current Mode Control (CMC) using trailing-edge Pulse Width Modulation (PWM). The inner current loop senses the inductor current and adds a linear compensation ramp before comparison against a control current command. The converter operates with a constant input voltage and a constant output voltage over one switching period. Let the switching period be denoted by $T_s$ in seconds, the input voltage be $V_\\text{in}$ in volts, the output voltage be $V_\\text{o}$ in volts, the inductance be $L$ in henries, the control current command be $I_c$ in amperes, and the slope of the injected compensation ramp be $m_s$ in amperes per second. Assume ideal components and negligible measurement delays, and model the inner loop switching condition by a perfect comparator that turns the high-side switch off when the sensed current plus the compensation ramp equals the control command.\n\nStarting from the inductor constitutive law $v_L = L\\,\\frac{di_L}{dt}$, and treating $V_\\text{o}$ as constant over one cycle, define the on-time slope $m_1 = \\frac{V_\\text{in} - V_\\text{o}}{L}$ in amperes per second and the off-time slope magnitude $m_2 = \\frac{V_\\text{o}}{L}$ in amperes per second. Let the valley inductor current at the beginning of cycle $n$ be $i_n$ in amperes. During the on-interval, the comparator switching condition is $i_n + m_1\\,t_\\text{on} + m_s\\,t_\\text{on} = I_c$, where $t_\\text{on}$ is the on-time in seconds. The off-interval lasts $T_s - t_\\text{on}$ seconds, during which the current decreases with slope $-m_2$. The discrete-time nature of PWM and the current comparator forms a one-dimensional affine Poincaré map $i_{n+1} = f(i_n)$ that can be obtained by applying these definitions and laws over one switching period. The local linearization of this map at the fixed point yields a scalar multiplier governing the discrete-time dynamics. Period-doubling bifurcation in the inner current loop occurs when this multiplier crosses $-1$; absence of period-doubling corresponds to the multiplier staying strictly within the open interval $(-1,1)$.\n\nYour task is to:\n- Derive the one-dimensional affine map $i_{n+1} = f(i_n)$ from the fundamental definitions above.\n- From this map, extract the scalar multiplier $a$ of the linearized dynamics around the fixed point, expressed in terms of $m_1$, $m_2$, and $m_s$. Use this to construct a computational method that, for each parameter set, returns a boolean indicating whether the inner loop is free of period-doubling (true if $|a| < 1$, false otherwise).\n- Implement this method in a program that evaluates the following test suite. All physical quantities must be interpreted in the specified units. Although the program’s outputs are booleans (dimensionless), intermediate calculations must consistently use the given units:\n    1. Test $1$: $V_\\text{in} = 20\\,\\text{V}$, $V_\\text{o} = 8\\,\\text{V}$, $L = 100\\times 10^{-6}\\,\\text{H}$, $T_s = 5\\times 10^{-6}\\,\\text{s}$, $I_c = 5\\,\\text{A}$, $m_s = 0\\,\\text{A/s}$.\n    2. Test $2$: $V_\\text{in} = 20\\,\\text{V}$, $V_\\text{o} = 10\\,\\text{V}$, $L = 100\\times 10^{-6}\\,\\text{H}$, $T_s = 5\\times 10^{-6}\\,\\text{s}$, $I_c = 5\\,\\text{A}$, $m_s = 0\\,\\text{A/s}$.\n    3. Test $3$: $V_\\text{in} = 20\\,\\text{V}$, $V_\\text{o} = 16\\,\\text{V}$, $L = 100\\times 10^{-6}\\,\\text{H}$, $T_s = 5\\times 10^{-6}\\,\\text{s}$, $I_c = 5\\,\\text{A}$, $m_s = 0\\,\\text{A/s}$.\n    4. Test $4$: $V_\\text{in} = 20\\,\\text{V}$, $V_\\text{o} = 16\\,\\text{V}$, $L = 100\\times 10^{-6}\\,\\text{H}$, $T_s = 5\\times 10^{-6}\\,\\text{s}$, $I_c = 5\\,\\text{A}$, $m_s = 85{,}000\\,\\text{A/s}$.\n    5. Test $5$: $V_\\text{in} = 20\\,\\text{V}$, $V_\\text{o} = 16\\,\\text{V}$, $L = 100\\times 10^{-6}\\,\\text{H}$, $T_s = 5\\times 10^{-6}\\,\\text{s}$, $I_c = 5\\,\\text{A}$, $m_s = 50{,}000\\,\\text{A/s}$.\n\nYour program should produce a single line of output containing the results of all tests as a comma-separated list of booleans enclosed in square brackets, for example, $[ \\text{True}, \\text{False}, \\ldots ]$. No additional text should be printed. Angles are not involved in this problem. Percentages, if needed for interpretation, must always be handled as decimal fractions, but the program’s output contains only booleans.",
            "solution": "The problem requires the derivation of the one-dimensional affine Poincaré map for the valley inductor current in a buck converter operating under peak Current Mode Control (CMC) and the subsequent analysis of its local stability.\n\nLet $i_n$ be the inductor current at the beginning of switching cycle $n$. This is the valley current. The analysis proceeds over one full switching period, $T_s$.\n\n1.  **On-Time Interval ($0 \\le t \\le t_{\\text{on}}$):**\n    During the on-time, the high-side switch is closed. The voltage across the inductor $L$ is $v_L = V_{\\text{in}} - V_{\\text{o}}$. According to the inductor's constitutive law, the current rises linearly with a slope $m_1$:\n    $$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}} - V_{\\text{o}}}{L} = m_1 $$\n    The inductor current at time $t$ within this interval is:\n    $$ i_L(t) = i_n + m_1 t $$\n    The control scheme adds a compensation ramp with slope $m_s$ to the sensed current. The high-side switch turns off at $t = t_{\\text{on}}$ when the sum of the sensed inductor current and the compensation ramp value equals the control current command $I_c$. The switching condition is given as:\n    $$ i_L(t_{\\text{on}}) + m_s t_{\\text{on}} = I_c $$\n    Substituting the expression for $i_L(t_{\\text{on}})$:\n    $$ (i_n + m_1 t_{\\text{on}}) + m_s t_{\\text{on}} = I_c $$\n    We can solve for the on-time, $t_{\\text{on}}$, as a function of the initial state $i_n$:\n    $$ t_{\\text{on}}(m_1 + m_s) = I_c - i_n $$\n    $$ t_{\\text{on}} = \\frac{I_c - i_n}{m_1 + m_s} $$\n\n2.  **Off-Time Interval ($t_{\\text{on}} < t \\le T_s$):**\n    During the off-time, the high-side switch is open. The voltage across the inductor is $v_L = -V_{\\text{o}}$. The current falls linearly with a slope of $-m_2$:\n    $$ \\frac{di_L}{dt} = -\\frac{V_{\\text{o}}}{L} = -m_2 $$\n    The duration of this interval is $t_{\\text{off}} = T_s - t_{\\text{on}}$.\n\n3.  **Derivation of the Poincaré Map $i_{n+1} = f(i_n)$:**\n    The valley current of the next cycle, $i_{n+1}$, is the inductor current at the end of the current cycle, i.e., at time $t = T_s$. This can be found by starting with the peak current at $t_{\\text{on}}$ and calculating the change over the off-time.\n    The peak inductor current is:\n    $$ i_{\\text{peak}} = i_L(t_{\\text{on}}) = i_n + m_1 t_{\\text{on}} $$\n    The current then decreases for a duration of $T_s - t_{\\text{on}}$ with a slope of $-m_2$.\n    $$ i_{n+1} = i_{\\text{peak}} - m_2 (T_s - t_{\\text{on}}) $$\n    Substituting the expression for $i_{\\text{peak}}$:\n    $$ i_{n+1} = (i_n + m_1 t_{\\text{on}}) - m_2 (T_s - t_{\\text{on}}) $$\n    $$ i_{n+1} = i_n + (m_1 + m_2)t_{\\text{on}} - m_2 T_s $$\n    Now, we substitute the expression for $t_{\\text{on}}$ into this equation to obtain the map $i_{n+1} = f(i_n)$:\n    $$ i_{n+1} = i_n + (m_1 + m_2) \\left( \\frac{I_c - i_n}{m_1 + m_s} \\right) - m_2 T_s $$\n    This is the desired one-dimensional affine map. We can rearrange it into the form $i_{n+1} = a i_n + b$:\n    $$ i_{n+1} = i_n - \\frac{m_1 + m_2}{m_1 + m_s} i_n + \\frac{m_1 + m_2}{m_1 + m_s} I_c - m_2 T_s $$\n    $$ i_{n+1} = \\left( 1 - \\frac{m_1 + m_2}{m_1 + m_s} \\right) i_n + \\left( \\frac{(m_1 + m_2)I_c}{m_1 + m_s} - m_2 T_s \\right) $$\n\n4.  **Local Stability Analysis:**\n    The local dynamics around a fixed point of the map $i_{n+1} = f(i_n)$ are governed by the multiplier $a = \\frac{df}{di_n}$. From the affine map derived above, the multiplier $a$ is the coefficient of $i_n$:\n    $$ a = 1 - \\frac{m_1 + m_2}{m_1 + m_s} $$\n    This can be simplified:\n    $$ a = \\frac{(m_1 + m_s) - (m_1 + m_2)}{m_1 + m_s} = \\frac{m_s - m_2}{m_1 + m_s} $$\n    The problem states that the inner loop is free of period-doubling if the multiplier is strictly within the open interval $(-1, 1)$, which is equivalent to the condition $|a| < 1$.\n\n5.  **Computational Method:**\n    For each test case, the following steps are performed:\n    a. Given $V_{\\text{in}}$, $V_{\\text{o}}$, $L$, and $m_s$.\n    b. Calculate the on-time slope: $m_1 = \\frac{V_{\\text{in}} - V_{\\text{o}}}{L}$.\n    c. Calculate the magnitude of the off-time slope: $m_2 = \\frac{V_{\\text{o}}}{L}$.\n    d. Calculate the multiplier: $a = \\frac{m_s - m_2}{m_1 + m_s}$.\n    e. Evaluate the boolean condition $|a| < 1$. If true, the system is stable against period-doubling. If false, it is not.\n    Note that the values of $T_s$ and $I_c$ are not required for calculating the multiplier $a$, as they only affect the constant term $b$ of the affine map, which determines the location of the fixed point but not its local stability.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Analyzes the stability of a buck converter with peak Current Mode Control.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (V_in, V_o, L, T_s, I_c, m_s)\n    # Units: V, V, H, s, A, A/s\n    test_cases = [\n        (20.0, 8.0, 100e-6, 5e-6, 5.0, 0.0),        # Test 1\n        (20.0, 10.0, 100e-6, 5e-6, 5.0, 0.0),       # Test 2\n        (20.0, 16.0, 100e-6, 5e-6, 5.0, 0.0),       # Test 3\n        (20.0, 16.0, 100e-6, 5e-6, 5.0, 85000.0),  # Test 4\n        (20.0, 16.0, 100e-6, 5e-6, 5.0, 50000.0),  # Test 5\n    ]\n\n    results = []\n    for case in test_cases:\n        V_in, V_o, L, T_s, I_c, m_s = case\n\n        # The problem statement requires consistent use of given units for intermediate calculations.\n        # Although V_in and V_o are non-negative, a check for a valid buck converter\n        # operating condition (V_in > V_o > 0) is prudent for a robust physical model,\n        # though not strictly required by the problem's direct instructions.\n        if L = 0 or V_in = V_o or V_o  0:\n            # This case corresponds to an unphysical or ill-defined scenario.\n            # Handle as unstable for safety, although test data is well-behaved.\n            results.append(False)\n            continue\n\n        # Calculate the on-time slope of the inductor current (A/s).\n        m_1 = (V_in - V_o) / L\n\n        # Calculate the magnitude of the off-time slope of the inductor current (A/s).\n        m_2 = V_o / L\n\n        # The multiplier 'a' of the linearized Poincaré map i_{n+1} = a*i_n + b\n        # is given by a = (m_s - m_2) / (m_1 + m_s).\n        # We must handle the case where the denominator could be zero, which physically\n        # corresponds to m_1 + m_s = 0. Given m_1 > 0, this only happens if m_s is\n        # a large negative value, which is not typical for stabilizing ramps.\n        denominator = m_1 + m_s\n        if np.isclose(denominator, 0):\n             # Division by zero implies infinite gain, hence unstable.\n            is_stable = False\n        else:\n            a = (m_s - m_2) / denominator\n            # The system is free from period-doubling if the absolute value of the\n            # multiplier is strictly less than 1.\n            is_stable = np.abs(a)  1.0\n\n        results.append(is_stable)\n\n    # Format the final output as a comma-separated list of booleans in square brackets.\n    output_str = f\"[{', '.join(str(r) for r in results)}]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "Beyond the low-frequency stability concerns, the practical performance of current-mode control is highly dependent on its immunity to high-frequency noise. A significant challenge is the large current spike that occurs at the leading edge of the PWM cycle, which can cause premature termination and erratic behavior. This practice problem tackles this issue head-on, guiding you through the process of modeling this spike and designing a leading-edge blanking (LEB) interval—a critical, real-world technique to ensure the controller responds only to the true inductor current .",
            "id": "3821118",
            "problem": "Consider a continuous-conduction-mode buck converter implementing Peak Current-Mode Control (PCM) within a Pulse Width Modulation (PWM) controller that includes Leading-Edge Blanking (LEB). The inductor current is sensed as a current waveform $i_{\\text{sense}}(t) = i_{L}(t) + i_{\\text{sp}}(t)$, where $i_{L}(t)$ is the inductor current and $i_{\\text{sp}}(t)$ is a leading-edge spike at MOSFET turn-on caused by reverse-recovery and capacitive/diode displacement currents. The spike is well modeled by an exponential envelope $i_{\\text{sp}}(t) = I_{0} \\exp(-t/\\tau)$ with amplitude $I_{0} = 2\\,\\mathrm{A}$. It is experimentally observed that the spike remains above $0.2\\,\\mathrm{A}$ for $100\\,\\mathrm{ns}$ before decaying below that level.\n\nThe controller trips when the sensed current crosses the peak reference $I_{\\text{pk}}$, which for this design is $I_{\\text{pk}} = 20\\,\\mathrm{A}$. The converter has $V_{\\text{in}} = 48\\,\\mathrm{V}$, $V_{\\text{out}} = 12\\,\\mathrm{V}$, and an inductance $L = 2\\,\\mu\\mathrm{H}$. The inductor valley current at switch turn-on is $I_{\\min} = 5\\,\\mathrm{A}$. From first principles, use $v_{L} = L\\,\\mathrm{d}i/\\mathrm{d}t$ to obtain the inductor current slew rate during the MOSFET on-time. The LEB masks the sensed current for a duration $t_{b}$ so the comparator cannot trip during this blanking window.\n\nDesign requirement for false-trip avoidance and accuracy: choose $t_{b}$ so that at the end of blanking the residual spike amplitude is no more than a fraction $\\epsilon = 0.01$ of $I_{\\text{pk}}$. Use the exponential spike model and the measured $100\\,\\mathrm{ns}$ duration above $0.2\\,\\mathrm{A}$ to determine the decay time constant $\\tau$, and then compute the minimum blanking time $t_{b,\\min}$ satisfying the accuracy requirement. In addition, explain quantitatively whether such a blanking window introduces any overshoot or undershoot in the measured peak current for the given operating point, and state the worst-case measured peak error if the threshold crossing were to occur exactly at $t = t_{b,\\min}$.\n\nRound your final numerical answer for the minimum blanking time to three significant figures. Express the blanking time in nanoseconds. The final answer must be a single real number.",
            "solution": "The solution proceeds in four stages: (1) determine the inductor current slew rate, (2) determine the spike decay time constant $\\tau$, (3) calculate the minimum required blanking time $t_{b,\\min}$, and (4) analyze the effect of the blanking window on current measurement accuracy.\n\n**1. Inductor Current Slew Rate**\nDuring the MOSFET on-time, the voltage across the inductor, $v_L$, is the difference between the input and output voltages.\n$$v_{L} = V_{\\text{in}} - V_{\\text{out}}$$\nFrom the fundamental inductor equation, $v_L = L \\frac{\\mathrm{d}i_L}{\\mathrm{d}t}$. Equating these gives the inductor current slew rate, which we denote as $m_1$:\n$$m_1 = \\frac{\\mathrm{d}i_L}{\\mathrm{d}t} = \\frac{V_{\\text{in}} - V_{\\text{out}}}{L}$$\nSubstituting the given values:\n$$m_1 = \\frac{48\\,\\mathrm{V} - 12\\,\\mathrm{V}}{2\\,\\mu\\mathrm{H}} = \\frac{36\\,\\mathrm{V}}{2 \\times 10^{-6}\\,\\mathrm{H}} = 18 \\times 10^{6}\\,\\mathrm{A/s} = 18\\,\\mathrm{A}/\\mu\\mathrm{s}$$\nThe inductor current $i_L(t)$ during the on-time is a linear ramp starting from the valley current $I_{\\min}$:\n$$i_{L}(t) = I_{\\min} + m_1 t = 5\\,\\mathrm{A} + (18 \\times 10^{6}\\,\\mathrm{A/s}) \\cdot t$$\n\n**2. Spike Decay Time Constant ($\\tau$)**\nThe current spike is modeled as $i_{\\text{sp}}(t) = I_{0} \\exp(-t/\\tau)$, with $I_{0} = 2\\,\\mathrm{A}$. We are given that the spike decays to $0.2\\,\\mathrm{A}$ at $t = 100\\,\\mathrm{ns}$. We use this information to find $\\tau$.\n$$i_{\\text{sp}}(100\\,\\mathrm{ns}) = I_{0} \\exp\\left(-\\frac{100 \\times 10^{-9}\\,\\mathrm{s}}{\\tau}\\right) = 0.2\\,\\mathrm{A}$$\n$$2\\,\\mathrm{A} \\cdot \\exp\\left(-\\frac{100 \\times 10^{-9}\\,\\mathrm{s}}{\\tau}\\right) = 0.2\\,\\mathrm{A}$$\n$$\\exp\\left(-\\frac{100 \\times 10^{-9}\\,\\mathrm{s}}{\\tau}\\right) = \\frac{0.2}{2} = 0.1$$\nTaking the natural logarithm of both sides:\n$$-\\frac{100 \\times 10^{-9}\\,\\mathrm{s}}{\\tau} = \\ln(0.1) = -\\ln(10)$$\nSolving for $\\tau$:\n$$\\tau = \\frac{100 \\times 10^{-9}\\,\\mathrm{s}}{\\ln(10)}$$\n\n**3. Minimum Blanking Time ($t_{b,\\min}$)**\nThe design requirement for the blanking time $t_{b}$ is that the residual spike amplitude at the end of the blanking interval is no more than a fraction $\\epsilon = 0.01$ of the peak reference current $I_{\\text{pk}} = 20\\,\\mathrm{A}$.\n$$i_{\\text{sp}}(t_{b}) \\le \\epsilon I_{\\text{pk}}$$\nThe maximum allowed residual spike amplitude is:\n$$\\epsilon I_{\\text{pk}} = 0.01 \\times 20\\,\\mathrm{A} = 0.2\\,\\mathrm{A}$$\nThe minimum blanking time, $t_{b,\\min}$, is the time at which the spike amplitude decays to exactly this level.\n$$i_{\\text{sp}}(t_{b,\\min}) = I_{0} \\exp\\left(-\\frac{t_{b,\\min}}{\\tau}\\right) = 0.2\\,\\mathrm{A}$$\n$$2\\,\\mathrm{A} \\cdot \\exp\\left(-\\frac{t_{b,\\min}}{\\tau}\\right) = 0.2\\,\\mathrm{A}$$\n$$\\exp\\left(-\\frac{t_{b,\\min}}{\\tau}\\right) = 0.1$$\n$$-\\frac{t_{b,\\min}}{\\tau} = \\ln(0.1) = -\\ln(10)$$\n$$t_{b,\\min} = \\tau \\ln(10)$$\nNow, we substitute the expression for $\\tau$ derived in the previous step:\n$$t_{b,\\min} = \\left(\\frac{100 \\times 10^{-9}\\,\\mathrm{s}}{\\ln(10)}\\right) \\ln(10) = 100 \\times 10^{-9}\\,\\mathrm{s} = 100\\,\\mathrm{ns}$$\nThe minimum required blanking time is exactly $100\\,\\mathrm{ns}$. The problem asks to round this to three significant figures, which is $100$.\n\n**4. Error Analysis**\nThe controller's comparator trips when the sensed current $i_{\\text{sense}}(t)$ reaches the reference level $I_{\\text{pk}}$. Let the trip time be $t_{\\text{trip}}$. Due to the blanking time, $t_{\\text{trip}} \\ge t_{b,\\min}$.\nAt the trip instant:\n$$i_{\\text{sense}}(t_{\\text{trip}}) = i_{L}(t_{\\text{trip}}) + i_{\\text{sp}}(t_{\\text{trip}}) = I_{\\text{pk}}$$\nThe actual peak inductor current achieved is therefore:\n$$i_{L}(t_{\\text{trip}}) = I_{\\text{pk}} - i_{\\text{sp}}(t_{\\text{trip}})$$\nSince $t_{\\text{trip}}  0$, the spike contribution $i_{\\text{sp}}(t_{\\text{trip}})$ is a positive quantity. Consequently, the true peak inductor current $i_{L}(t_{\\text{trip}})$ will be less than the target peak current $I_{\\text{pk}}$. This phenomenon is an **undershoot** of the inductor current peak relative to the reference.\nThe measurement error, $\\Delta I_{\\text{error}}$, which is the magnitude of this undershoot, is equal to the residual spike amplitude at the moment of tripping:\n$$\\Delta I_{\\text{error}} = I_{\\text{pk}} - i_{L}(t_{\\text{trip}}) = i_{\\text{sp}}(t_{\\text{trip}})$$\nThe function $i_{\\text{sp}}(t)$ is monotonically decreasing for $t0$. The blanking time $t_{b,\\min}$ sets the earliest possible trip time. Therefore, the worst-case (maximum) error occurs for the smallest possible trip time, i.e., if the controller were to trip exactly at $t_{\\text{trip}} = t_{b,\\min}$.\nThe worst-case peak error is thus:\n$$\\Delta I_{\\text{error, max}} = i_{\\text{sp}}(t_{b,\\min})$$\nFrom the design requirement for $t_{b,\\min}$, we have:\n$$\\Delta I_{\\text{error, max}} = \\epsilon I_{\\text{pk}} = 0.01 \\times 20\\,\\mathrm{A} = 0.2\\,\\mathrm{A}$$\nSo, the chosen blanking window introduces an undershoot in the peak inductor current. The worst-case magnitude of this undershoot is $0.2\\,\\mathrm{A}$, occurring if the trip point coincides with the end of the blanking interval. This corresponds to an actual peak inductor current of $19.8\\,\\mathrm{A}$ instead of the desired $20\\,\\mathrm{A}$. For any trip that occurs after $t_{b,min}$, the error will be smaller than $0.2\\,\\mathrm{A}$.\n\nThe question asks for the minimum blanking time $t_{b,\\min}$ as the final answer.\n$$t_{b,\\min} = 100\\,\\mathrm{ns}$$\nThe value is required to be rounded to three significant figures, and the calculated value is exactly $100$.",
            "answer": "$$\\boxed{100}$$"
        },
        {
            "introduction": "Implementing current-mode control invariably involves a trade-off between sensing accuracy and converter efficiency. This exercise explores a key aspect of this trade-off by quantifying the power loss in a discrete sense resistor, one of the most common methods for measuring inductor current. By calculating the power dissipation based on both the DC and AC components of the current, you will gain a concrete understanding of this efficiency penalty and be prompted to consider the pros and cons of alternative \"lossless\" sensing techniques, such as DCR sensing .",
            "id": "3821139",
            "problem": "A synchronous buck converter operating in continuous conduction mode employs Current-Mode Control (CMC). The inductor current waveform is the sum of a direct-current component and a triangular ripple due to switching, with average current $I_{\\mathrm{avg}} = 10\\,\\mathrm{A}$ and peak-to-peak ripple $\\Delta I = 4\\,\\mathrm{A}$, assumed symmetric and periodic. A discrete sense resistor of value $R_s = 5\\,\\mathrm{m}\\Omega$ is inserted in series to sense current for the inner current loop.\n\nStarting from the definitions of instantaneous power $p(t) = i^{2}(t) R_s$ and the time-average over one switching period, derive the expression for the average power dissipated in the sense resistor and compute its numerical value. Assume the triangular ripple is ideal, zero-mean around $I_{\\mathrm{avg}}$, and ignore any switching-edge spikes.\n\nRound your final numerical answer to four significant figures and express the power in $\\mathrm{W}$.\n\nThen, using first principles of conduction losses and sensing methods, briefly discuss the efficiency impact of this sense resistor compared to Direct Current Resistance (DCR) sensing of the inductor winding, highlighting the relevant advantages and limitations in the context of CMC.",
            "solution": "The instantaneous power dissipated in a resistor is given by $p(t) = i^2(t) R_s$. The average power over one switching period $T$ is\n$$\nP = \\frac{1}{T} \\int_{0}^{T} p(t)\\, dt = \\frac{1}{T} \\int_{0}^{T} i^2(t) R_s\\, dt = R_s \\left( \\frac{1}{T} \\int_{0}^{T} i^2(t)\\, dt \\right).\n$$\nLet the inductor current be decomposed as\n$$\ni(t) = I_{\\mathrm{avg}} + \\tilde{i}(t),\n$$\nwhere $\\tilde{i}(t)$ is the zero-mean triangular ripple with peak-to-peak amplitude $\\Delta I$ and peak amplitude $A = \\Delta I/2$. The average of $\\tilde{i}(t)$ over one period is $0$, i.e., $\\frac{1}{T}\\int_{0}^{T} \\tilde{i}(t) \\, dt = 0$.\n\nWe evaluate the mean square of $i(t)$:\n$$\n\\frac{1}{T} \\int_{0}^{T} i^2(t)\\, dt = \\frac{1}{T} \\int_{0}^{T} \\left( I_{\\mathrm{avg}} + \\tilde{i}(t) \\right)^{2} dt = I_{\\mathrm{avg}}^{2} + \\frac{1}{T} \\int_{0}^{T} \\tilde{i}^2(t)\\, dt,\n$$\nsince the cross term averages to zero:\n$$\n\\frac{2 I_{\\mathrm{avg}}}{T} \\int_{0}^{T} \\tilde{i}(t)\\, dt = 2 I_{\\mathrm{avg}} \\cdot 0 = 0.\n$$\n\nIt remains to compute the mean square of a zero-mean symmetric triangular waveform of peak amplitude $A$. Define $\\tilde{i}(t)$ over $[0, T]$ as a piecewise linear function that linearly ramps from $-A$ to $A$ over $[0, T/2]$ and from $A$ back to $-A$ over $[T/2, T]$. Over $[0, T/2]$, we have\n$$\n\\tilde{i}(t) = -A + \\frac{4A}{T} t.\n$$\nThe integral of the square over the first half-period is\n\\begin{align*}\n\\int_{0}^{T/2} \\tilde{i}^2(t)\\, dt = \\int_{0}^{T/2} \\left( -A + \\frac{4A}{T} t \\right)^{2} dt \\\\\n= \\int_{0}^{T/2} \\left( A^2 - \\frac{8A^2}{T} t + \\frac{16A^2}{T^2} t^2 \\right) dt \\\\\n= A^2 \\left[ t \\right]_{0}^{T/2} - \\frac{8A^2}{T} \\left[ \\frac{t^2}{2} \\right]_{0}^{T/2} + \\frac{16A^2}{T^2} \\left[ \\frac{t^3}{3} \\right]_{0}^{T/2} \\\\\n= A^2 \\left( \\frac{T}{2} \\right) - \\frac{8A^2}{T} \\left( \\frac{T^2}{8} \\right) + \\frac{16A^2}{T^2} \\left( \\frac{T^3}{24} \\right) \\\\\n= \\frac{A^2 T}{2} - A^2 T + \\frac{2 A^2 T}{3} = \\frac{A^2 T}{6}.\n\\end{align*}\nBy symmetry, the integral over $[T/2, T]$ is also $\\frac{A^2 T}{6}$. Therefore, the total over one period is\n$$\n\\int_{0}^{T} \\tilde{i}^2(t)\\, dt = \\frac{A^2 T}{3},\n$$\nand the mean square is\n$$\n\\frac{1}{T} \\int_{0}^{T} \\tilde{i}^2(t)\\, dt = \\frac{A^2}{3}.\n$$\n\nHence,\n$$\n\\frac{1}{T} \\int_{0}^{T} i^2(t)\\, dt = I_{\\mathrm{avg}}^{2} + \\frac{A^2}{3},\n$$\nand the average power dissipated in the sense resistor is\n$$\nP = R_s \\left( I_{\\mathrm{avg}}^{2} + \\frac{A^2}{3} \\right).\n$$\nSubstitute $R_s = 5 \\times 10^{-3}$, $I_{\\mathrm{avg}} = 10$, and $A = \\frac{\\Delta I}{2} = \\frac{4}{2} = 2$:\n\\begin{align*}\nI_{\\mathrm{avg}}^{2} = 10^{2} = 100, \\\\\n\\frac{A^{2}}{3} = \\frac{2^{2}}{3} = \\frac{4}{3} \\approx 1.333333\\ldots, \\\\\nI_{\\mathrm{avg}}^{2} + \\frac{A^{2}}{3} = 100 + \\frac{4}{3} = \\frac{304}{3} \\approx 101.333333\\ldots, \\\\\nP = \\left( 5 \\times 10^{-3} \\right) \\left( \\frac{304}{3} \\right) = \\frac{1520}{3000} \\approx 0.506666\\ldots\n\\end{align*}\nRounded to four significant figures and expressed in $\\mathrm{W}$, this is $0.5067\\,\\mathrm{W}$.\n\nDiscussion on efficiency impact relative to Direct Current Resistance (DCR) sensing: In Current-Mode Control (CMC), a discrete sense resistor introduces an additional conduction loss $P = R_s \\, \\mathbb{E}[i^2]$ that directly reduces efficiency and adds thermal burden. In contrast, DCR sensing leverages the inductor’s inherent Direct Current Resistance (DCR) to sense current via a passive filter, adding essentially no incremental conduction loss beyond the unavoidable copper loss of the inductor; however, DCR sensing is limited by the temperature dependence of copper resistance, tolerance of winding resistance, and the need for accurate filtering that can introduce dynamic phase lag and noise susceptibility. Therefore, while DCR sensing improves efficiency by avoiding extra loss from $R_s$, it may complicate calibration and loop compensation relative to a well-defined sense resistor.",
            "answer": "$$\\boxed{0.5067}$$"
        }
    ]
}
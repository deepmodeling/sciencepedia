## 引言
在现代[开关模式电源 (SMPS)](@entry_id:268732) 的设计中，选择合适的控制策略是实现高性能、高效率和高可靠性的关键。在众多技术中，电流模式控制 (Current-Mode Control, CMC) 以其独特的优势脱颖而出，成为业界广泛采用的主流方案之一。与传统的[电压模式控制](@entry_id:1133876) (VMC) 相比，CMC 通过引入一个内部电流反馈环路，从根本上解决了 VMC 响应速度慢、动态性能补偿复杂等问题。

本文将系统性地剖析[电流模式控制](@entry_id:1123295)的精髓。我们将深入其双环路结构，揭示其如何简化系统动态并提供固有保护。此外，我们还将探讨该技术在多相并联、不同变换器拓扑以及与[数字控制](@entry_id:275588)融合中的实际应用与挑战。最后，动手实践部分将通过具体的计算和设计问题，巩固您对理论知识的理解和应用能力。

让我们首先深入探讨电流模式控制的基本原理与核心机制。

## 原理与机制

在深入探讨[开关模式电源](@entry_id:1132724)的复杂控制策略时，**[电流模式控制](@entry_id:1123295) (Current-Mode Control, CMC)** 作为一种强大且广泛应用的技术脱颖而出。与传统的[电压模式控制](@entry_id:1133876) (Voltage-Mode Control, VMC) 相比，电流模式控制引入了一个内部的快速电流反馈环路，从根本上改变了功率级的动态特性，并带来了一系列显著的性能优势。本章将从基本原理出发，系统地阐述[电流模式控制](@entry_id:1123295)的核心机制、固有优点及其基本限制。

### [电流模式控制](@entry_id:1123295)的基本工作原理

为了理解[电流模式控制](@entry_id:1123295)的精髓，我们首先将其与[电压模式控制](@entry_id:1133876)进行对比，并以连续导通模式 (Continuous Conduction Mode, CCM) 下的降压型 (Buck) 变换器为典型示例进行分析 。

在**[电压模式控制](@entry_id:1133876)**中，存在一个单一的电压反馈环路。控制器将输出电压 $v_o$ 与一个参考电压 $v_{\text{ref}}$ 进行比较，[误差信号](@entry_id:271594)经过补偿器处理后生成一个控制电压 $v_c$。这个 $v_c$ 直接与一个固定频率、固定幅度的周期性锯齿波或三角波斜坡信号 $v_r(t)$ 在[脉宽调制](@entry_id:262754) (Pulse Width Modulation, PWM) 比较器中进行比较。对于后沿调制 (trailing-edge modulation)，每个开关周期的开始由[时钟信号](@entry_id:174447)触发，功率开关导通；当斜坡信号 $v_r(t)$ 上升到与控制电压 $v_c$ 相等时，比较器输出翻转，使功率开关关断。因此，[占空比](@entry_id:199172) $D$ 完全由电压信号 $v_c$ 与固定斜坡 $v_r(t)$ 的交点确定。

相比之下，**[峰值电流模式控制](@entry_id:1129480) (Peak Current-Mode Control, PCMC)** 采用了一种双环路结构。外部的电压环路功能与 VMC 类似，它同样通过比较输出电压与参考电压来生成一个[控制信号](@entry_id:747841) $v_c$。然而，这里的 $v_c$ 不再直接与固定斜坡比较，而是被用作一个**电流指令**，设定了电感电流应达到的峰值。内部的[电流环路](@entry_id:271292)则是一个快速的实时反馈系统，它直接监测功率级的**电感电流 $i_L(t)$**。

具体工作过程如下 ：
1.  在每个开关周期 $T_s$ 的开始（例如 $t = nT_s$），[时钟信号](@entry_id:174447)将 PWM [锁存器](@entry_id:167607)置位，使主功率开关导通。
2.  开关导通后，电感电流 $i_L(t)$ 开始线性上升，其斜率 $m_1$ 由电感定律 $v_L = L \frac{di_L}{dt}$ 决定，对于 Buck 变换器，该斜率为 $m_1 = \frac{v_g - v_o}{L}$，其中 $v_g$ 是输入电压。
3.  一个电流检测电路（例如，串联在电感路径上的检测电阻 $R_s$）实时感测电感电流，并将其转换为一个电压信号 $v_s(t) = R_s i_L(t)$。
4.  PWM 比较器将此检测信号 $v_s(t)$ 与电压环路产生的指令信号 $v_c$ 进行比较。
5.  当上升的检测信号 $v_s(t)$ 达到 $v_c$ 的阈值时，比较器输出翻转，复位 PWM [锁存器](@entry_id:167607)，从而关断主功率开关。

在这种机制下，[占空比](@entry_id:199172)不再由控制电压与固定斜坡的比较直接设定，而是由电感电流从周期开始时的谷值上升到由 $v_c$ 设定的峰值所需的时间动态地产生。因此，PCMC 的核心在于将电感电流本身作为 PWM 调制过程的一部分，使其成为一个受控变量。

### [电流模式控制](@entry_id:1123295)的关键优势

通过引入内部[电流环路](@entry_id:271292)，CMC 赋予了电源系统一系列优于 VMC 的卓越性能。

#### 简化的功率级动态特性

在 VMC 中，从控制输入（[占空比](@entry_id:199172) $d$）到输出电压 $v_o$ 的传递函数由功率级的 $LC$ 滤波器决定，这是一个具有复数极点的[二阶系统](@entry_id:276555)。这个二阶特性，特别是 $LC$ [谐振峰](@entry_id:271281)，使得外部电压环路的补偿设计变得复杂，并限制了系统的带宽。

[电流模式控制](@entry_id:1123295)通过其快速的内部[电流环路](@entry_id:271292)从根本上改变了这一状况 。[电流环路](@entry_id:271292)迫使电感器表现得像一个受电压指令 $v_c$ 控制的**受控电流源**。在足够高的环路带宽下，电感电流 $\hat{i}_L(s)$ 的小信号响应会紧密跟随电流指令 $\hat{i}_{\text{ref}}(s)$（由 $\hat{v}_c$ 产生）。这意味着从外部电压环路的角度看，电感的动态特性被“隐藏”或抑制了。系统的动态行为主要由输出电容 $C$ 和负载 $R$ 决定。

具体来说，原有的二阶 $LC$ 滤波器传递函数 $G_{vd}(s) = \frac{\hat{v}_o(s)}{\hat{d}(s)}$ 被一个新的、从电流指令到输出电压的传递函数 $G_{vi}(s) = \frac{\hat{v}_o(s)}{\hat{i}_{\text{ref}}(s)}$ 所取代。这个新的传递[函数近似](@entry_id:141329)为一个**[一阶系统](@entry_id:147467)**：
$$ G_{vi}(s) \approx \frac{R}{1 + sRC} $$
这个单极点系统更易于补偿，允许设计更高带宽的电压环路，从而实现更快的动态响应。

#### 固有的输入电压前馈

[电流模式控制](@entry_id:1123295)天然具备快速抑制输入电压扰动的能力，这被称为**输入电压前馈 (line feedforward)**  。这一特性源于电感电流的上升斜率 $m_1$ 直接依赖于输入电压 $v_g$：
$$ m_1 = \frac{v_g - v_o}{L} $$
假设输入电压 $v_g$ 突然升高，电感电流的上升斜率 $m_1$ 会随之增大。由于[峰值电流](@entry_id:264029)阈值由 $v_c$ 固定，一个更陡峭的电流斜坡意味着达到该阈值所需的时间会更短。因此，开关的导通时间 $t_{on}$ 会自动缩短，[占空比](@entry_id:199172) $D$ 相应减小。根据 Buck 变换器的[稳态](@entry_id:139253)关系 $v_o \approx D v_g$，[占空比](@entry_id:199172)的减小恰好可以补偿输入电压的升高，从而在输出电压 $v_o$ 发生显著变化之前就维持其稳定。这种响应是即时的，发生在单个开关周期内，远快于需要等待输出电压[误差累积](@entry_id:137710)后才做出反应的 VMC 系统。

#### [逐周期电流限制](@entry_id:1123332)

也许[电流模式控制](@entry_id:1123295)最直接和最重要的优点是其固有的**[逐周期电流限制](@entry_id:1123332) (cycle-by-cycle current limiting)** 。由于控制器在每个周期内都直接监控峰值电感电流，并将导通时间限制在电流达到 $v_c$ 所对应的阈值之前，因此电感和功率开关的最大电流被天然地限制在 $I_{\text{lim}} = v_c / R_s$。

在发生严重故障（如输出短路）时，这一特性显得尤为重要。当输出被短路（$v_o \to 0$）时，电感上的电压约等于整个输入电压 $v_g$，导致电感电流以极高的斜率 $m_1 \approx v_g/L$ 迅速攀升。在 PCMC 系统中，即使电流上升得非常快，一旦达到预设的峰值限制，比较器也会立即关断开关。例如，对于一个输入为 $24\,\text{V}$、电感为 $10\,\mu\text{H}$、[峰值电流](@entry_id:264029)限制为 $8\,\text{A}$ 的系统，关断开关所需的时间仅为 $t_{\text{trip}} = I_{\text{lim}} / (v_g/L) = 8\,\text{A} / (24\,\text{V}/10\,\mu\text{H}) \approx 3.33\,\mu\text{s}$。这个响应是瞬时的，不依赖于响应缓慢的外部电压环路。

相比之下，VMC 系统在短路发生时，其[占空比](@entry_id:199172)仍然由缓慢的电压环路决定。在环路做出反应之前的几个周期内，开关会保持原有的长导通时间，导致电流急剧过冲，峰值可能远超半导体器件的安全工作范围，从而造成永久性损坏。

#### 卓越的负载[瞬态响应](@entry_id:165150)

[电流模式控制](@entry_id:1123295)的快速内部环路也使其在响应负载阶跃变化时表现更优。当负载电流 $i_{\text{load}}$ 突然增加时，输出电容 $C$ 会被迅速放电，导致输出电压下降。在 VMC 系统中，控制器必须等待这个[电压降](@entry_id:263648)被检测到并通过较慢的电压环路传播，然后才开始增加[占空比](@entry_id:199172)以提供更多电流。

而在 CMC 系统中，尤其是采用[平均电流模式控制](@entry_id:1121286)或带有负载电流前馈的[峰值电流模式控制](@entry_id:1129480)时，控制器可以更快地调整电感电流以匹配新的负载需求。从物理上看，电压的任何微小下降都会被外部电压环路放大，并迅速转化为对内部电流环路的指令增加。由于内部环路带宽远高于 VMC 的整体带宽，电感电流的响应速度要快得多。

我们可以通过一个简化的模型来量化这一优势 。对于一个负载电流阶跃 $\Delta I$，输出电压的最大偏离量 $|\Delta v_{o, \text{max}}|$ 近似与控制环路对此的响应速度（即环路带宽 $\omega_c$）成反比：
$$ |\Delta v_{o, \text{max}}| \approx \frac{\Delta I}{C \omega_c} $$
由于 CMC 允许的有效控制带宽 $\omega_{ci}$（内部电流[环带](@entry_id:163678)宽）通常远大于 VMC 系统所能达到的电压[环带](@entry_id:163678)宽 $\omega_{vm}$，因此在相同的负载阶跃下，CMC 系统的电压跌落要小得多。其优势因子 $A$ 可以简单地表示为带宽之比：
$$ A = \frac{|\Delta v_{o, \text{max, VMC}}|}{|\Delta v_{o, \text{max, CMC}}|} = \frac{\omega_{ci}}{\omega_{vm}} $$
例如，如果一个 CMC 系统的内[环带](@entry_id:163678)宽为 $17.8\,\text{kHz}$，而一个可比的 VMC 系统带宽为 $2.4\,\text{kHz}$，则 CMC 在负载瞬态期间的电压偏离幅度大约仅为 VMC 的 $1/7.4$。

### 基本限制与实际挑战

尽管优势显著，[电流模式控制](@entry_id:1123295)也存在一些固有的限制和在实际应用中必须解决的挑战。

#### [次谐波振荡](@entry_id:1132606)

**[次谐波振荡](@entry_id:1132606) (subharmonic oscillation)** 是[峰值电流模式控制](@entry_id:1129480)最著名的一个固有限制 。这种不稳定现象源于控制环路的采样数据特性，通常在[占空比](@entry_id:199172) $D$ 大于 $0.5$ 时出现。

其物理机制可以这样理解：PCMC 是一种[离散时间系统](@entry_id:263935)，它在每个周期的开始对电感电流进行一次“采样”（作为初始条件），并根据一个阈值在周期内做出关断决策。当[占空比](@entry_id:199172) $D > 0.5$ 时，电感电流的下降斜率 $m_2 = v_o/L$ 的绝对值大于其上升斜率 $m_1 = (v_g - v_o)/L$。在这种情况下，一个在周期开始时对电感电流的微小扰动 $\hat{i}_n$ 不会被衰减，反而会被放大并反向，导致在下一个周期开始时出现一个更大的反向扰动 $\hat{i}_{n+1} \approx \lambda \hat{i}_n$，其中增益 $\lambda  -1$。

通过对一个开关周期内的电流演化进行线性化分析，可以得到该扰动的单周期增益 $\lambda$。在没有补偿的情况下，该增益为：
$$ \lambda = -\frac{m_2}{m_1} = -\frac{D}{1-D} $$
当 $D \to 0.5$ 时，$\lambda \to -1$。当 $D > 0.5$ 时，$\lambda  -1$，系统变得不稳定。这种不稳定性表现为**[倍周期分岔](@entry_id:274250) (period-doubling bifurcation)**，即系统状态在两个不同的值之间交替，导致电感电流波形呈现一大一小交替出现的形态。这种振荡的周期是开关周期的两倍，其频率为开关频率的一半，即 $f_s/2$，因此被称为“次谐波”。

幸运的是，可以通过在检测到的电流信号上叠加一个人工的、线性的**[斜坡补偿](@entry_id:1131757) (slope compensation)** 来解决这个问题。这个补偿斜坡的斜率记为 $m_a$（在比较器输入端，单位为 V/s）。加入斜坡补偿后，扰动增益变为：
$$ \lambda = \frac{m_a' - m_2'}{m_a' + m_1'} $$
其中 $m_1', m_2', m_a'$ 是经过电流检测增益 $R_s$ 转换到电压域的斜率。为保证在所有[占空比](@entry_id:199172)下系统都稳定（即 $|\lambda|  1$），补偿斜率 $m_a$ 必须满足一定的条件。一个广泛使用的设计准则是，补偿斜率应至少为电感电流下降斜率的一半：
$$ m_a \ge \frac{1}{2} m_2 $$

#### 对噪声的敏感性

由于 PCMC 的关断决策依赖于一个模拟比较器判断一个斜坡信号何时达到一个直流电平，因此该决策点对噪声非常敏感 。在实际的电源转换器中，存在多种噪声源：
*   **开关节点干扰**：功率开关的高速、高压切换（高 $dv/dt$）和电流的快速变化（高 $di/dt$）会通过[寄生电容](@entry_id:270891)和[电感耦合](@entry_id:262141)到敏感的电流检测路径中，这通常是主要的噪声源。
*   **检测元件噪声**：电流检测电阻会产生[热噪声](@entry_id:139193)（约翰逊-奈奎斯特噪声）。
*   **[放大器噪声](@entry_id:263045)**：用于放大检测信号的[运放](@entry_id:274011)会引入其自身的[输入参考噪声](@entry_id:1126527)。
*   **斜坡补偿电路噪声**：产生补偿斜坡的电路也不是理想的，会引入噪声。

这些噪声源在比较器输入端叠加为一个总的噪声电压 $\tilde{n}$。这个噪声会直接转化为[占空比](@entry_id:199172)的[抖动](@entry_id:200248) $\Delta D$。从信号相交的原理可以推导出，[占空比](@entry_id:199172)的[抖动](@entry_id:200248)幅度与噪声幅度成正比，与比较器输入端的总信号斜率 $M_{\text{net}}$ 成反比：
$$ |\Delta D| \approx \frac{|\tilde{n}|}{M_{\text{net}} \cdot T_s} = \frac{|\tilde{n}|}{(G_s R_s m_1 + S_r) T_s} $$
其中 $G_s R_s m_1$ 是来自电感电流的斜率，而 $S_r$ 是人工补偿斜坡的斜率。这个关系式表明，一个较陡峭的信号总斜率可以有效提高系统的**噪声[抗扰度](@entry_id:262876)**。这也是为什么增加斜坡补偿（增大 $S_r$）除了能保证稳定性外，还能减少输出[抖动](@entry_id:200248)的一个原因。

#### 前沿尖峰问题

在实际的硬件实现中，当主开关在每个周期开始时导通的瞬间，电流检测信号上会出现一个短暂但非常剧烈的**前沿尖峰 (leading-edge spike)** 。这个尖峰主要由两个物理机制引起：
1.  **二[极管](@entry_id:909477)反向恢复**：在主开关导通之前，续流二[极管](@entry_id:909477)（或同步整流的 MOSFET [体二极管](@entry_id:1121731)）正在导通。当主开关导通时，会对二[极管](@entry_id:909477)施加反向偏压，但在二[极管](@entry_id:909477)内的[少数载流子](@entry_id:272708)被清除之前，会有一个短暂的[反向恢复电流](@entry_id:261755) $i_{rr}$ 流过二[极管](@entry_id:909477)。这个电流也必须通过主开关和电流检测电阻，从而在实际的电感电流之上叠加了一个额外的电流尖峰。
2.  **[寄生电感](@entry_id:268392)**：电流检测路径中的[寄生电感](@entry_id:268392) $L_p$（来自 PCB 走线和元件引脚）会在电流快速变化的瞬间产生一个电压尖峰 $v_p = L_p \frac{di}{dt}$。

这两个效应叠加产生的电压尖峰通常远高于正常的峰值电流[设定点](@entry_id:154422)，如果比较器不加处理，就会立即错误地触发关断，导致脉冲宽度极窄，变换器无法正常工作。

为了解决这个问题，通常采用以下两种技术：
*   **[前沿消隐](@entry_id:1127134) (Leading-Edge Blanking, LEB)**：这是一种数字或模拟技术，它在每个周期开始后的一段固定时间内（例如 50-100 ns）“屏蔽”或忽略比较器的输出。这段时间被设计为长于尖峰的持续时间。LEB 的优点是它几乎不影响电流环路的带宽和相位，因为它在消隐期结束后，控制器看到的是真实、未经滤波的电流信号。其缺点是它设定了一个最小导通时间，这会限制变换器在轻载或高输入电压下的工作能力。此外，在消隐期间，[逐周期电流限制](@entry_id:1123332)功能是无效的。 
*   **RC 低通滤波**：在电流检测信号进入比较器之前，增加一个简单的 RC 滤波器。这种方法可以有效地滤除高频尖峰。其优点是实现简单。然而，缺点也很明显：RC 滤波器不仅会滤除尖峰，也会对有用的电流斜坡信号引入**延迟和衰减**。这种延迟会降低内部电流环路的[相位裕度](@entry_id:264609)，从而限制其带宽。衰减的斜率也会使系统更容易发生次谐波振荡，可能需要更强的[斜坡补偿](@entry_id:1131757)。 

### 变体与高级概念

除了标准的[峰值电流模式控制](@entry_id:1129480)，还存在其他变体，并且在某些极限条件下，PCMC 的行为会发生退化。

#### 谷值与[平均电流模式控制](@entry_id:1121286)

*   **谷值[电流模式控制](@entry_id:1123295) (Valley Current-Mode Control, [VCM](@entry_id:200713)C)**：与 PCMC 控制[峰值电流](@entry_id:264029)相反，[VCM](@entry_id:200713)C 控制电感电流的**谷值** 。其工作方式是：由[时钟信号](@entry_id:174447)关断开关，然后监测下降的电感电流，当电流下降到由 $v_c$ 设定的谷值时，再重新导通开关。由于其决策基于下降斜率 $m_2 = -v_o/L$，而该斜率与输入电压 $v_g$ 无关，因此 [VCM](@entry_id:200713)C **不具备** PCMC 那样的固有输入电压前馈能力。

*   **[平均电流模式控制](@entry_id:1121286) (Average Current-Mode Control, ACMC)**：ACMC 的目标是使**平均电感电流** $\overline{i_L}$ 精确地跟随指令 。这通常通过一个专门的电流[误差放大](@entry_id:749086)器来实现，该放大器比较检测到的（经过滤波的）电感电流与电流指令，其输出再去驱动 PWM 调制器。ACMC 的主要优点在于，它消除了 PCMC 中因控制峰值电流而导致的平均电流对[工作点](@entry_id:173374)（$D, v_g$）的依赖性。在 PCMC 中，平均电流 $\overline{i_L} = I_{peak} - \Delta i_L/2$，由于纹波 $\Delta i_L$ 随工作点变化，导致从控制指令到平均电流的增益是变化的。而在 ACMC 中，这种增益是恒定的，这简化了外部电压环路的设计，并能实现更精确的电流控制，特别是在需要多相并联均流的应用中。

#### 向电压模式行为的退化

尽管斜坡补偿是解决次谐波振荡所必需的，但过度的[斜坡补偿](@entry_id:1131757)会使[电流模式控制](@entry_id:1123295)的优势丧失，使其**退化为电压模式行为** 。

当人工补偿斜坡的斜率 $m_a$ 远大于来自电感电流的有效斜率 $k_i m_1$ 时（其中 $k_i$ 是电流检测增益），比较器输入端的总斜率几乎完全由 $m_a$ 决定。在这种情况下，PWM 的关断时刻主要由固定的外部斜坡 $m_a$ 和控制电压 $v_c$ 决定，而与电感电流 $i_L(t)$ 本身的变化关系变得微弱。

当 $m_a \gg k_i m_1$ 时，对初始电感电流扰动的反馈强度 $\frac{\partial t_{on}}{\partial i_L(0)} = \frac{-k_i}{k_i m_1 + m_a}$ 趋近于零。这意味着内部电流环路实际上已经“断开”，控制器不再对电感电流的实时变化做出有效响应。此时，整个系统就等效于一个[电压模式控制](@entry_id:1133876)器，其 PWM 斜坡由外部补偿电路提供。其后果是，[电流模式控制](@entry_id:1123295)的所有优点——简化的单极点动态、快速的输入前馈和逐周期限流——都将丧失，系统又回到了需要补偿复杂二阶 $LC$ 滤波器的 VMC 状态。因此，在设计斜坡补偿时，必须在确保稳定性和维持电流模式优势之间做出权衡。
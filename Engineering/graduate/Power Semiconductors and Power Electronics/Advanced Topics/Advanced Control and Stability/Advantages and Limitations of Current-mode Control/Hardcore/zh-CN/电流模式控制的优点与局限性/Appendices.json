{
    "hands_on_practices": [
        {
            "introduction": "峰值电流模式控制的一个核心挑战是当占空比超过0.5时可能出现的次谐波振荡。这个练习将带你深入该现象的数学根源，通过推导描述逐周期电流动态的庞加莱映射（Poincaré map），让你亲手揭示系统不稳定的机理。最终，你将把这一理论分析转化为一个实用的计算方法，用于检验在给定参数下，斜坡补偿是否足以保证内部电流环的稳定。",
            "id": "3821154",
            "problem": "考虑一个采用后沿脉冲宽度调制 (PWM) 的峰值电流模式控制 (CMC) 的直流-直流降压转换器。内层电流环路检测电感电流，并在与控制电流指令进行比较之前，加上一个线性的补偿斜坡。该转换器在一个开关周期内以恒定的输入电压和恒定的输出电压运行。设开关周期为 $T_s$ 秒，输入电压为 $V_\\text{in}$ 伏特，输出电压为 $V_\\text{o}$ 伏特，电感为 $L$ 亨利，控制电流指令为 $I_c$ 安培，注入的补偿斜坡的斜率为 $m_s$ 安培/秒。假设元件理想且测量延迟可忽略不计，并将内环开关条件建模为一个理想比较器，当检测电流加上补偿斜坡等于控制指令时，该比较器关闭高侧开关。\n\n从电感本构关系 $v_L = L\\,\\frac{di_L}{dt}$ 出发，并将 $V_\\text{o}$ 在一个周期内视作常数，定义导通时间斜率为 $m_1 = \\frac{V_\\text{in} - V_\\text{o}}{L}$ (单位：安培/秒)，关断时间斜率为 $m_2 = \\frac{V_\\text{o}}{L}$ (单位：安培/秒)。设周期 $n$ 开始时的电感电流谷值为 $i_n$ 安培。在导通期间，比较器的开关条件为 $i_n + m_1\\,t_\\text{on} + m_s\\,t_\\text{on} = I_c$，其中 $t_\\text{on}$ 是导通时间，单位为秒。关断期间持续 $T_s - t_\\text{on}$ 秒，在此期间电流以斜率 $-m_2$ 下降。PWM 和电流比较器的离散时间特性形成一个一维仿射 Poincaré 映射 $i_{n+1} = f(i_n)$，该映射可通过在一个开关周期内应用这些定义和定律得到。该映射在不动点处的局部线性化产生一个标量乘子，该乘子决定了离散时间动态特性。当此乘子穿过 $-1$ 时，内层电流环路会发生倍周期分岔；没有倍周期分岔对应于乘子严格保持在开区间 $(-1,1)$ 内。\n\n您的任务是：\n- 根据上述基本定义，推导出一维仿射映射 $i_{n+1} = f(i_n)$。\n- 从该映射中，提取不动点附近线性化动态的标量乘子 $a$，并用 $m_1$、$m_2$ 和 $m_s$ 表示。利用此结果构建一个计算方法，该方法针对每组参数返回一个布尔值，以指示内环是否无倍周期分岔（如果 $|a|  1$，则为真，否则为假）。\n- 在一个程序中实现此方法，以评估以下测试套件。所有物理量必须按指定单位进行解释。尽管程序的输出是布尔值（无量纲），但中间计算必须一致地使用给定单位：\n    1. 测试 $1$：$V_\\text{in} = 20\\,\\text{V}$，$V_\\text{o} = 8\\,\\text{V}$，$L = 100\\times 10^{-6}\\,\\text{H}$，$T_s = 5\\times 10^{-6}\\,\\text{s}$，$I_c = 5\\,\\text{A}$，$m_s = 0\\,\\text{A/s}$。\n    2. 测试 $2$：$V_\\text{in} = 20\\,\\text{V}$，$V_\\text{o} = 10\\,\\text{V}$，$L = 100\\times 10^{-6}\\,\\text{H}$，$T_s = 5\\times 10^{-6}\\,\\text{s}$，$I_c = 5\\,\\text{A}$，$m_s = 0\\,\\text{A/s}$。\n    3. 测试 $3$：$V_\\text{in} = 20\\,\\text{V}$，$V_\\text{o} = 16\\,\\text{V}$，$L = 100\\times 10^{-6}\\,\\text{H}$，$T_s = 5\\times 10^{-6}\\,\\text{s}$，$I_c = 5\\,\\text{A}$，$m_s = 0\\,\\text{A/s}$。\n    4. 测试 $4$：$V_\\text{in} = 20\\,\\text{V}$，$V_\\text{o} = 16\\,\\text{V}$，$L = 100\\times 10^{-6}\\,\\text{H}$，$T_s = 5\\times 10^{-6}\\,\\text{s}$，$I_c = 5\\,\\text{A}$，$m_s = 85{,}000\\,\\text{A/s}$。\n    5. 测试 $5$：$V_\\text{in} = 20\\,\\text{V}$，$V_\\text{o} = 16\\,\\text{V}$，$L = 100\\times 10^{-6}\\,\\text{H}$，$T_s = 5\\times 10^{-6}\\,\\text{s}$，$I_c = 5\\,\\text{A}$，$m_s = 50{,}000\\,\\text{A/s}$。\n\n您的程序应生成单行输出，其中包含所有测试的结果，格式为方括号内逗号分隔的布尔值列表，例如 $[ \\text{true}, \\text{false}, \\ldots ]$。不应打印任何附加文本。此问题不涉及角度。百分比（若需解释）必须始终作为小数处理，但程序的输出仅包含布尔值。",
            "solution": "该问题要求推导在峰值电流模式控制 (CMC) 下运行的降压转换器中电感电流谷值的一维仿射 Poincaré 映射，并随后分析其局部稳定性。\n\n设 $i_n$ 为开关周期 $n$ 开始时的电感电流。这是谷值电流。分析在一个完整的开关周期 $T_s$ 内进行。\n\n1.  **导通时间区间 ($0 \\le t \\le t_{\\text{on}}$):**\n    在导通时间内，高侧开关闭合。电感 $L$ 两端的电压为 $v_L = V_{\\text{in}} - V_{\\text{o}}$。根据电感的本构关系，电流以斜率 $m_1$ 线性上升：\n    $$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}} - V_{\\text{o}}}{L} = m_1 $$\n    此区间内 $t$ 时刻的电感电流为：\n    $$ i_L(t) = i_n + m_1 t $$\n    控制方案将斜率为 $m_s$ 的补偿斜坡加到检测电流上。当检测到的电感电流与补偿斜坡值之和等于控制电流指令 $I_c$ 时，高侧开关在 $t = t_{\\text{on}}$ 时刻关断。开关条件给出如下：\n    $$ i_L(t_{\\text{on}}) + m_s t_{\\text{on}} = I_c $$\n    代入 $i_L(t_{\\text{on}})$ 的表达式：\n    $$ (i_n + m_1 t_{\\text{on}}) + m_s t_{\\text{on}} = I_c $$\n    我们可以求解出作为初始状态 $i_n$ 函数的导通时间 $t_{\\text{on}}$：\n    $$ t_{\\text{on}}(m_1 + m_s) = I_c - i_n $$\n    $$ t_{\\text{on}} = \\frac{I_c - i_n}{m_1 + m_s} $$\n\n2.  **关断时间区间 ($t_{\\text{on}}  t \\le T_s$):**\n    在关断时间内，高侧开关断开。电感两端的电压为 $v_L = -V_{\\text{o}}$。电流以斜率 $-m_2$ 线性下降：\n    $$ \\frac{di_L}{dt} = -\\frac{V_{\\text{o}}}{L} = -m_2 $$\n    此区间的持续时间为 $t_{\\text{off}} = T_s - t_{\\text{on}}$。\n\n3.  **Poincaré 映射 $i_{n+1} = f(i_n)$ 的推导：**\n    下一个周期的谷值电流 $i_{n+1}$ 是当前周期结束时（即 $t = T_s$ 时刻）的电感电流。这可以通过从 $t_{\\text{on}}$ 时的峰值电流开始，并计算在关断时间内的变化量来求得。\n    电感峰值电流为：\n    $$ i_{\\text{peak}} = i_L(t_{\\text{on}}) = i_n + m_1 t_{\\text{on}} $$\n    随后电流在 $T_s - t_{\\text{on}}$ 的持续时间内以斜率 $-m_2$ 下降。\n    $$ i_{n+1} = i_{\\text{peak}} - m_2 (T_s - t_{\\text{on}}) $$\n    代入 $i_{\\text{peak}}$ 的表达式：\n    $$ i_{n+1} = (i_n + m_1 t_{\\text{on}}) - m_2 (T_s - t_{\\text{on}}) $$\n    $$ i_{n+1} = i_n + (m_1 + m_2)t_{\\text{on}} - m_2 T_s $$\n    现在，我们将 $t_{\\text{on}}$ 的表达式代入此方程，以获得映射 $i_{n+1} = f(i_n)$：\n    $$ i_{n+1} = i_n + (m_1 + m_2) \\left( \\frac{I_c - i_n}{m_1 + m_s} \\right) - m_2 T_s $$\n    这就是所需的一维仿射映射。我们可以将其整理成 $i_{n+1} = a i_n + b$ 的形式：\n    $$ i_{n+1} = i_n - \\frac{m_1 + m_2}{m_1 + m_s} i_n + \\frac{m_1 + m_2}{m_1 + m_s} I_c - m_2 T_s $$\n    $$ i_{n+1} = \\left( 1 - \\frac{m_1 + m_2}{m_1 + m_s} \\right) i_n + \\left( \\frac{(m_1 + m_2)I_c}{m_1 + m_s} - m_2 T_s \\right) $$\n\n4.  **局部稳定性分析：**\n    映射 $i_{n+1} = f(i_n)$ 在不动点附近的局部动态由乘子 $a = \\frac{df}{di_n}$ 决定。从上面推导出的仿射映射可知，乘子 $a$ 是 $i_n$ 的系数：\n    $$ a = 1 - \\frac{m_1 + m_2}{m_1 + m_s} $$\n    可以简化为：\n    $$ a = \\frac{(m_1 + m_s) - (m_1 + m_2)}{m_1 + m_s} = \\frac{m_s - m_2}{m_1 + m_s} $$\n    问题陈述指出，如果乘子严格位于开区间 $(-1, 1)$ 内，则内环无倍周期分岔，这等价于条件 $|a|  1$。\n\n5.  **计算方法：**\n    对于每个测试用例，执行以下步骤：\n    a. 给定 $V_{\\text{in}}$、$V_{\\text{o}}$、$L$ 和 $m_s$。\n    b. 计算导通时间斜率：$m_1 = \\frac{V_{\\text{in}} - V_{\\text{o}}}{L}$。\n    c. 计算关断时间斜率的大小：$m_2 = \\frac{V_{\\text{o}}}{L}$。\n    d. 计算乘子：$a = \\frac{m_s - m_2}{m_1 + m_s}$。\n    e. 评估布尔条件 $|a|  1$。如果为真，则系统对于倍周期分岔是稳定的。如果为假，则不稳定。\n    注意，计算乘子 $a$ 不需要 $T_s$ 和 $I_c$ 的值，因为它们只影响仿射映射的常数项 $b$，该项决定了不动点的位置，但不影响其局部稳定性。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Analyzes the stability of a buck converter with peak Current Mode Control.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (V_in, V_o, L, T_s, I_c, m_s)\n    # Units: V, V, H, s, A, A/s\n    test_cases = [\n        (20.0, 8.0, 100e-6, 5e-6, 5.0, 0.0),        # Test 1\n        (20.0, 10.0, 100e-6, 5e-6, 5.0, 0.0),       # Test 2\n        (20.0, 16.0, 100e-6, 5e-6, 5.0, 0.0),       # Test 3\n        (20.0, 16.0, 100e-6, 5e-6, 5.0, 85000.0),  # Test 4\n        (20.0, 16.0, 100e-6, 5e-6, 5.0, 50000.0),  # Test 5\n    ]\n\n    results = []\n    for case in test_cases:\n        V_in, V_o, L, T_s, I_c, m_s = case\n\n        # The problem statement requires consistent use of given units for intermediate calculations.\n        # A check for valid buck converter operating conditions is prudent for a robust physical model.\n        if L = 0 or V_in = V_o or V_o  0:\n            # This case corresponds to an unphysical or ill-defined scenario.\n            # Handle as unstable for safety, although test data is well-behaved.\n            results.append(False)\n            continue\n\n        # Calculate the on-time slope of the inductor current (A/s).\n        m_1 = (V_in - V_o) / L\n\n        # Calculate the magnitude of the off-time slope of the inductor current (A/s).\n        m_2 = V_o / L\n\n        # The multiplier 'a' of the linearized Poincaré map i_{n+1} = a*i_n + b\n        # is given by a = (m_s - m_2) / (m_1 + m_s).\n        # We must handle the case where the denominator could be zero. Given m_1 > 0 for a buck converter,\n        # this would only happen if m_s is a large negative value, which is not typical.\n        denominator = m_1 + m_s\n        if np.isclose(denominator, 0):\n             # Division by zero implies infinite gain, hence unstable.\n            is_stable = False\n        else:\n            a = (m_s - m_2) / denominator\n            # The system is free from period-doubling if the absolute value of the\n            # multiplier is strictly less than 1.\n            is_stable = np.abs(a)  1.0\n\n        results.append(is_stable)\n\n    # Format the final output as a comma-separated list of booleans in square brackets.\n    # The str() of a bool in Python is 'True' or 'False' (capitalized).\n    # The problem asks for lowercase, so we convert explicitly.\n    print(f\"[{','.join(str(r).lower() for r in results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "在理想的仿真世界之外，现实的功率变换器充满了噪声和寄生效应。一个典型的例子是功率开关管开通瞬间产生的巨大电流尖峰，它可能导致控制器过早关断，引发误触发。本练习模拟了这一常见问题，并指导你设计一个关键的实用电路技术——前沿消隐（Leading-Edge Blanking, LEB），以有效忽略此尖峰，并量化分析这种方法对峰值电流测量精度带来的影响。",
            "id": "3821118",
            "problem": "考虑一个在连续导通模式下工作的降压转换器，其实现了一种峰值电流模式控制（PCM），该控制位于一个包含前沿消隐（LEB）功能的脉冲宽度调制（PWM）控制器内。电感电流被检测为电流波形 $i_{\\text{sense}}(t) = i_{L}(t) + i_{\\text{sp}}(t)$，其中 $i_{L}(t)$ 是电感电流，$i_{\\text{sp}}(t)$ 是由反向恢复电流和电容/二极管位移电流在 MOSFET 导通时引起的前沿尖峰。该尖峰可以很好地用一个指数包络 $i_{\\text{sp}}(t) = I_{0} \\exp(-t/\\tau)$ 来建模，其幅值 $I_{0} = 2\\,\\text{A}$。实验观察到，该尖峰在 $t=100\\,\\text{ns}$ 时衰减至 $0.2\\,\\text{A}$。\n\n当检测到的电流超过峰值参考值 $I_{\\text{pk}}$ 时，控制器会触发，对于本设计，$I_{\\text{pk}} = 20\\,\\text{A}$。该转换器的输入电压 $V_{\\text{in}} = 48\\,\\text{V}$，输出电压 $V_{\\text{out}} = 12\\,\\text{V}$，电感值 $L = 2\\,\\mu\\text{H}$。开关导通时的电感谷值电流为 $I_{\\min} = 5\\,\\text{A}$。根据第一性原理，使用 $v_{L} = L\\,\\mathrm{d}i/\\mathrm{d}t$ 来获得 MOSFET 导通期间的电感电流转换率。前沿消隐功能在持续时间 $t_{b}$ 内屏蔽检测到的电流，因此比较器在此消隐窗口期间不会触发。\n\n为避免误触发并保证精度的设计要求是：选择 $t_{b}$，使得在消隐结束时，剩余尖峰幅值不超过 $I_{\\text{pk}}$ 的一个分数 $\\epsilon = 0.01$。使用指数尖峰模型和给定的衰减数据来确定衰减时间常数 $\\tau$，然后计算满足精度要求的最小消隐时间 $t_{b,\\min}$。此外，定量解释对于给定的工作点，这样的消隐窗口是否会在测量的峰值电流中引入任何过冲或下冲，并说明如果阈值穿越恰好发生在 $t = t_{b,\\min}$ 时，最坏情况下的测量峰值误差是多少。\n\n将最小消隐时间的最终数值答案四舍五入至三位有效数字。以纳秒为单位表示消隐时间。最终答案必须是一个实数。",
            "solution": "首先对问题进行验证，以确保其科学依据充分、问题表述清晰、客观且完整。\n\n### 第1步：提取已知条件\n-   系统：连续导通模式（CCM）降压转换器。\n-   控制：带脉冲宽度调制（PWM）和前沿消隐（LEB）的峰值电流模式控制（PCM）。\n-   检测电流模型：$i_{\\text{sense}}(t) = i_{L}(t) + i_{\\text{sp}}(t)$。\n-   电感电流：$i_{L}(t)$。\n-   电流尖峰模型：$i_{\\text{sp}}(t) = I_{0} \\exp(-t/\\tau)$。\n-   尖峰幅值：$I_{0} = 2\\,\\text{A}$。\n-   尖峰特性：$i_{\\text{sp}}(100\\,\\text{ns}) = 0.2\\,\\text{A}$。\n-   峰值电流参考：$I_{\\text{pk}} = 20\\,\\text{A}$。\n-   输入电压：$V_{\\text{in}} = 48\\,\\text{V}$。\n-   输出电压：$V_{\\text{out}} = 12\\,\\text{V}$。\n-   电感：$L = 2\\,\\mu\\text{H}$。\n-   电感谷值电流：$I_{\\min} = 5\\,\\text{A}$。\n-   基本关系：$v_{L} = L\\,\\mathrm{d}i/\\mathrm{d}t$。\n-   消隐时间符号：$t_{b}$。\n-   对 $t_{b}$ 的设计要求：在 $t=t_b$ 时的剩余尖峰 $i_{\\text{sp}}(t_b) \\le \\epsilon I_{\\text{pk}}$，其中 $\\epsilon = 0.01$。\n\n### 第2步：使用提取的已知条件进行验证\n问题陈述是科学合理的。它描述了开关电源转换器设计中使用电流模式控制时的一个标准问题（前沿电流尖峰）和一种标准缓解技术（前沿消隐）。尖峰的指数模型是一种常见且有效的近似。所有提供的参数（$V_{\\text{in}}$, $V_{\\text{out}}$, $L$, 电流）对于降压转换器都是现实的。问题表述清晰，提供了足够的信息来确定所要求的量。语言客观、精确。因此，该问题被认为是有效的。\n\n### 第3步：结论与操作\n问题有效。将提供完整的解答。\n\n### 解题推导\n解答过程分四个阶段进行：（1）确定电感电流转换率，（2）确定尖峰衰减时间常数 $\\tau$，（3）计算所需的最小消隐时间 $t_{b,\\min}$，以及（4）分析消隐窗口对电流测量精度的影响。\n\n**1. 电感电流转换率**\n在 MOSFET 导通期间，电感两端的电压 $v_L$ 是输入电压和输出电压之差。\n$$v_{L} = V_{\\text{in}} - V_{\\text{out}}$$\n根据基本电感方程 $v_L = L \\frac{\\mathrm{d}i_L}{\\mathrm{d}t}$。将两者相等，得到电感电流转换率，我们记为 $m_1$：\n$$m_1 = \\frac{\\mathrm{d}i_L}{\\mathrm{d}t} = \\frac{V_{\\text{in}} - V_{\\text{out}}}{L}$$\n代入给定值：\n$$m_1 = \\frac{48\\,\\text{V} - 12\\,\\text{V}}{2\\,\\mu\\text{H}} = \\frac{36\\,\\text{V}}{2 \\times 10^{-6}\\,\\text{H}} = 18 \\times 10^{6}\\,\\text{A/s} = 18\\,\\text{A}/\\mu\\text{s}$$\n导通期间的电感电流 $i_L(t)$ 是从谷值电流 $I_{\\min}$ 开始的线性斜坡：\n$$i_{L}(t) = I_{\\min} + m_1 t = 5\\,\\text{A} + (18 \\times 10^{6}\\,\\text{A/s}) \\cdot t$$\n\n**2. 尖峰衰减时间常数 ($\\tau$)**\n电流尖峰被建模为 $i_{\\text{sp}}(t) = I_{0} \\exp(-t/\\tau)$，其中 $I_{0} = 2\\,\\text{A}$。我们已知在 $t = 100\\,\\text{ns}$ 时，尖峰衰减到 $0.2\\,\\text{A}$。我们用这个信息来求 $\\tau$。\n$$i_{\\text{sp}}(100\\,\\text{ns}) = I_{0} \\exp\\left(-\\frac{100 \\times 10^{-9}\\,\\text{s}}{\\tau}\\right) = 0.2\\,\\text{A}$$\n$$2\\,\\text{A} \\cdot \\exp\\left(-\\frac{100 \\times 10^{-9}\\,\\text{s}}{\\tau}\\right) = 0.2\\,\\text{A}$$\n$$\\exp\\left(-\\frac{100 \\times 10^{-9}\\,\\text{s}}{\\tau}\\right) = \\frac{0.2}{2} = 0.1$$\n取两边的自然对数：\n$$-\\frac{100 \\times 10^{-9}\\,\\text{s}}{\\tau} = \\ln(0.1) = -\\ln(10)$$\n解出 $\\tau$：\n$$\\tau = \\frac{100 \\times 10^{-9}\\,\\text{s}}{\\ln(10)}$$\n\n**3. 最小消隐时间 ($t_{b,\\min}$)**\n对消隐时间 $t_{b}$ 的设计要求是，在消隐间隔结束时，剩余尖峰幅值不超过峰值参考电流 $I_{\\text{pk}} = 20\\,\\text{A}$ 的一个分数 $\\epsilon = 0.01$。\n$$i_{\\text{sp}}(t_{b}) \\le \\epsilon I_{\\text{pk}}$$\n允许的最大剩余尖峰幅值为：\n$$\\epsilon I_{\\text{pk}} = 0.01 \\times 20\\,\\text{A} = 0.2\\,\\text{A}$$\n最小消隐时间 $t_{b,\\min}$ 是尖峰幅值恰好衰减到这个水平的时间。\n$$i_{\\text{sp}}(t_{b,\\min}) = I_{0} \\exp\\left(-\\frac{t_{b,\\min}}{\\tau}\\right) = 0.2\\,\\text{A}$$\n$$2\\,\\text{A} \\cdot \\exp\\left(-\\frac{t_{b,\\min}}{\\tau}\\right) = 0.2\\,\\text{A}$$\n$$\\exp\\left(-\\frac{t_{b,\\min}}{\\tau}\\right) = 0.1$$\n$$-\\frac{t_{b,\\min}}{\\tau} = \\ln(0.1) = -\\ln(10)$$\n$$t_{b,\\min} = \\tau \\ln(10)$$\n现在，我们代入上一步推导出的 $\\tau$ 的表达式：\n$$t_{b,\\min} = \\left(\\frac{100 \\times 10^{-9}\\,\\text{s}}{\\ln(10)}\\right) \\ln(10) = 100 \\times 10^{-9}\\,\\text{s} = 100\\,\\text{ns}$$\n所需的最小消隐时间恰好是 $100\\,\\text{ns}$。题目要求将其四舍五入到三位有效数字，即 $100$。\n\n**4. 误差分析**\n当检测电流 $i_{\\text{sense}}(t)$ 达到参考水平 $I_{\\text{pk}}$ 时，控制器的比较器触发。设触发时间为 $t_{\\text{trip}}$。由于存在消隐时间，所以 $t_{\\text{trip}} \\ge t_{b,\\min}$。\n在触发瞬间：\n$$i_{\\text{sense}}(t_{\\text{trip}}) = i_{L}(t_{\\text{trip}}) + i_{\\text{sp}}(t_{\\text{trip}}) = I_{\\text{pk}}$$\n因此，实际达到的峰值电感电流为：\n$$i_{L}(t_{\\text{trip}}) = I_{\\text{pk}} - i_{\\text{sp}}(t_{\\text{trip}})$$\n由于 $t_{\\text{trip}} > 0$，尖峰分量 $i_{\\text{sp}}(t_{\\text{trip}})$ 是一个正值。因此，真实的峰值电感电流 $i_{L}(t_{\\text{trip}})$ 将小于目标峰值电流 $I_{\\text{pk}}$。这种现象是电感电流峰值相对于参考值的**下冲**。\n测量误差 $\\Delta I_{\\text{error}}$，即该下冲的幅值，等于触发瞬间的剩余尖峰幅值：\n$$\\Delta I_{\\text{error}} = I_{\\text{pk}} - i_{L}(t_{\\text{trip}}) = i_{\\text{sp}}(t_{\\text{trip}})$$\n函数 $i_{\\text{sp}}(t)$ 对于 $t>0$ 是单调递减的。消隐时间 $t_{b,\\min}$ 设定了最早可能的触发时间。因此，最坏情况（最大）误差发生在可能的最小触发时间，即如果控制器恰好在 $t_{\\text{trip}} = t_{b,\\min}$ 时触发。\n因此，最坏情况下的峰值误差为：\n$$\\Delta I_{\\text{error, max}} = i_{\\text{sp}}(t_{b,\\min})$$\n根据 $t_{b,\\min}$ 的设计要求，我们有：\n$$\\Delta I_{\\text{error, max}} = \\epsilon I_{\\text{pk}} = 0.01 \\times 20\\,\\text{A} = 0.2\\,\\text{A}$$\n所以，所选的消隐窗口在峰值电感电流中引入了下冲。这种下冲的最坏情况幅值为 $0.2\\,\\text{A}$，发生在触发点与消隐间隔结束点重合时。这对应于实际峰值电感电流为 $19.8\\,\\text{A}$，而非期望的 $20\\,\\text{A}$。对于任何在 $t_{b,min}$ 之后发生的触发，误差将小于 $0.2\\,\\text{A}$。\n\n问题要求以最小消隐时间 $t_{b,\\min}$ 作为最终答案。\n$$t_{b,\\min} = 100\\,\\text{ns}$$\n该值需要四舍五入到三位有效数字，计算值恰好是 $100$。",
            "answer": "$$\\boxed{100}$$"
        },
        {
            "introduction": "在电源设计中，每个决策都伴随着权衡。采用分立的采样电阻来检测电流是一种直接且精度高的方法，但它不可避免地会引入额外的功率损耗，从而影响变换器的整体效率。本练习旨在让你精确地量化这种损耗，并将其与另一种更高效但实现更复杂的无损电流检测技术——电感DCR检测——进行对比。通过这个实践，你将更深刻地理解电流检测方案选择中的效率与复杂度之间的权衡。",
            "id": "3821139",
            "problem": "一个工作在连续导通模式下的同步降压转换器采用电流模式控制（CMC）。电感电流波形是直流分量与开关引起的三角波纹波之和，其平均电流为 $I_{\\text{avg}} = 10\\,\\text{A}$，峰峰值纹波为 $\\Delta I = 4\\,\\text{A}$，并假设其对称且周期性。一个值为 $R_s = 5\\,\\text{m}\\Omega$ 的分立检测电阻被串联接入，用于为内部电流环路检测电流。\n\n从瞬时功率 $p(t) = i^{2}(t) R_s$ 的定义以及在一个开关周期内的时间平均出发，推导检测电阻上耗散的平均功率表达式，并计算其数值。假设三角波纹波是理想的，围绕 $I_{\\text{avg}}$ 的均值为零，并忽略任何开关边沿的尖峰。\n\n将最终数值结果四舍五入至四位有效数字，并以 $\\text{W}$ 为单位表示功率。\n\n然后，运用传导损耗和检测方法的基本原理，简要讨论与电感绕组的直流电阻（DCR）检测相比，该检测电阻对效率的影响，并着重说明在CMC背景下的相关优缺点。",
            "solution": "电阻上耗散的瞬时功率由 $p(t) = i^{2}(t) R_s$ 给出。在一个开关周期 $T$ 内的平均功率为\n$$ P = \\frac{1}{T} \\int_{0}^{T} p(t)\\, dt = \\frac{1}{T} \\int_{0}^{T} i^{2}(t) R_s\\, dt = R_s \\left( \\frac{1}{T} \\int_{0}^{T} i^{2}(t)\\, dt \\right) $$\n我们将电感电流 $i(t)$ 分解为直流分量 $I_{\\text{avg}}$ 和交流纹波分量 $\\tilde{i}(t)$：\n$$ i(t) = I_{\\text{avg}} + \\tilde{i}(t) $$\n其中 $\\tilde{i}(t)$ 是峰峰值幅度为 $\\Delta I$、峰值幅度为 $A = \\Delta I/2$ 的零均值三角波纹波。$\\tilde{i}(t)$ 在一个周期内的平均值为 $0$，即 $\\frac{1}{T}\\int_{0}^{T} \\tilde{i}(t) \\, dt = 0$。\n\n我们计算 $i(t)$ 的均方根值的平方（即均方值）：\n$$ \\frac{1}{T} \\int_{0}^{T} i^{2}(t)\\, dt = \\frac{1}{T} \\int_{0}^{T} \\left( I_{\\text{avg}} + \\tilde{i}(t) \\right)^{2} dt = I_{\\text{avg}}^{2} + \\frac{1}{T} \\int_{0}^{T} \\tilde{i}^{2}(t)\\, dt $$\n因为交叉项的平均值为零：\n$$ \\frac{2 I_{\\text{avg}}}{T} \\int_{0}^{T} \\tilde{i}(t)\\, dt = 2 I_{\\text{avg}} \\cdot 0 = 0 $$\n接下来需要计算峰值幅度为 $A$ 的零均值对称三角波形的均方值。对于一个峰值为 $A$ 的零均值三角波，其均方值为 $\\frac{A^2}{3}$。\n因此，电流的均方值为：\n$$ \\frac{1}{T} \\int_{0}^{T} i^{2}(t)\\, dt = I_{\\text{avg}}^{2} + \\frac{A^{2}}{3} $$\n这就是电流的均方根值 $I_{\\text{rms}}$ 的平方。\n所以，检测电阻上耗散的平均功率为\n$$ P = R_s \\cdot I_{\\text{rms}}^2 = R_s \\left( I_{\\text{avg}}^{2} + \\frac{A^{2}}{3} \\right) $$\n代入给定值：$R_s = 5 \\times 10^{-3}\\,\\Omega$，$I_{\\text{avg}} = 10\\,\\text{A}$，以及峰值纹波幅度 $A = \\frac{\\Delta I}{2} = \\frac{4\\,\\text{A}}{2} = 2\\,\\text{A}$：\n$$ P = (5 \\times 10^{-3}) \\left( 10^{2} + \\frac{2^{2}}{3} \\right) $$\n$$ P = (5 \\times 10^{-3}) \\left( 100 + \\frac{4}{3} \\right) $$\n$$ P = (5 \\times 10^{-3}) \\left( \\frac{300 + 4}{3} \\right) = (5 \\times 10^{-3}) \\left( \\frac{304}{3} \\right) $$\n$$ P = \\frac{1.52}{3} \\approx 0.506666\\ldots\\,\\text{W} $$\n四舍五入到四位有效数字并以 $\\text{W}$ 为单位表示，结果为 $0.5067\\,\\text{W}$。\n\n关于相对于直流电阻（DCR）检测的效率影响的讨论：在电流模式控制（CMC）中，一个分立的检测电阻会引入额外的传导损耗 $P = R_s \\, I_{\\text{rms}}^2$，这直接降低了效率并增加了热负担。相比之下，DCR检测利用电感器固有的直流电阻（DCR），通过一个无源滤波器来检测电流，除了电感器不可避免的铜损外，基本上不增加额外的传导损耗；然而，DCR检测受到铜电阻的温度依赖性、绕组电阻的容差以及需要精确滤波（这可能引入动态相位滞后和噪声敏感性）的限制。因此，虽然DCR检测通过避免来自 $R_s$ 的额外损耗提高了效率，但相对于一个定义明确的检测电阻，它可能会使校准和环路补偿复杂化，并牺牲一定的测量精度。",
            "answer": "$$\\boxed{0.5067}$$"
        }
    ]
}
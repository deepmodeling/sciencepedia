{
    "hands_on_practices": [
        {
            "introduction": "The first step in designing a stable, high-performance control loop is to obtain an accurate model of the system to be controlled, known as the 'plant'. This exercise grounds the abstract concept of a transfer function in a real-world buck converter, guiding you to derive its dynamics from first principles. By calculating the pole and zero locations based on component values, you will see how physical hardware translates into the frequency-domain characteristics that determine stability .",
            "id": "3856221",
            "problem": "A continuous conduction mode buck converter uses an output filter consisting of an inductor of inductance $L$, a capacitor of capacitance $C$ with Equivalent Series Resistance (ESR) $R_{\\mathrm{ESR}}$, and a resistive load of resistance $R$ connected in parallel with the capacitor. Assume ideal switching devices and negligible inductor resistance. Using state-space averaging and first principles (Kirchhoff’s Voltage Law and Kirchhoff’s Current Law), derive the small-signal control-to-output transfer function $G_{vd}(s)$, explicitly including the capacitor ESR. Then, compute the numerical locations of the poles and zero of $G_{vd}(s)$ for the following component values:\n- $L = 100 \\times 10^{-6}\\ \\mathrm{H}$,\n- $C = 470 \\times 10^{-6}\\ \\mathrm{F}$,\n- $R = 5\\ \\Omega$,\n- $R_{\\mathrm{ESR}} = 0.02\\ \\Omega$.\n\nNext, consider the loop gain $L(j\\omega)$ formed by cascading $G_{vd}(j\\omega)$ with a purely proportional compensator of real, positive gain (i.e., zero phase contribution). The gain is set so that the loop gain magnitude satisfies $|L(j\\omega_{gc})| = 1$ at the specified gain crossover frequency $\\omega_{gc} = 3.00 \\times 10^{4}\\ \\mathrm{rad/s}$. Determine how much phase boost must be provided by an additional lead network to achieve a phase margin of $\\phi_{m} = 60^{\\circ}$ at $\\omega_{gc}$. Express the phase boost in degrees and round your answer to three significant figures.",
            "solution": "The problem is assessed to be valid as it is scientifically grounded in the principles of power electronics and control theory, is well-posed with sufficient and consistent data, and is expressed in objective, formal language. The problem is a standard exercise in analyzing the dynamics of a DC-DC converter.\n\n**Part 1: Derivation of the Control-to-Output Transfer Function $G_{vd}(s)$**\n\nWe will use the state-space averaging method to derive the small-signal control-to-output transfer function $G_{vd}(s) = \\frac{\\tilde{v}_o(s)}{\\tilde{d}(s)}$. The state variables are the inductor current, $i_L(t)$, and the voltage across the capacitor, $v_C(t)$. The state vector is $\\mathbf{x}(t) = \\begin{pmatrix} i_L(t)  v_C(t) \\end{pmatrix}^T$. The input is the source voltage, $V_g$.\n\nThe output voltage, $v_o(t)$, is not a state variable itself, but is a linear combination of the state variables and their derivatives.\nApplying KCL at the node between the capacitor $C$, its ESR $R_{\\mathrm{ESR}}$, and the load $R$:\n$i_C(t) = i_L(t) - i_R(t) = i_L(t) - \\frac{v_o(t)}{R}$\nThe output voltage is the sum of the capacitor voltage and the voltage across the ESR:\n$v_o(t) = v_C(t) + i_C(t) R_{\\mathrm{ESR}} = v_C(t) + \\left( i_L(t) - \\frac{v_o(t)}{R} \\right) R_{\\mathrm{ESR}}$\nSolving for $v_o(t)$:\n$v_o(t) \\left( 1 + \\frac{R_{\\mathrm{ESR}}}{R} \\right) = v_C(t) + i_L(t) R_{\\mathrm{ESR}}$\n$$v_o(t) = \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) + \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t)$$\nThis is our output equation, $y(t) = \\mathbf{C}\\mathbf{x}(t)$, where the output matrix is $\\mathbf{C} = \\begin{pmatrix} \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}}  \\frac{R}{R+R_{\\mathrm{ESR}}} \\end{pmatrix}$. This matrix is the same for both switch states.\n\nNow we derive the state equations. The capacitor current is $i_C(t) = C \\frac{dv_C}{dt}$.\n$C \\frac{dv_C}{dt} = i_L(t) - \\frac{v_o(t)}{R} = i_L(t) - \\frac{1}{R}\\left( \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) + \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) \\right)$\n$$\\frac{dv_C}{dt} = \\frac{1}{C}\\left( i_L(t) - \\frac{R_{ESR}}{R+R_{ESR}} i_L(t) - \\frac{1}{R+R_{ESR}}v_C(t) \\right) = \\frac{R}{C(R+R_{\\mathrm{ESR}})}i_L(t) - \\frac{1}{C(R+R_{\\mathrm{ESR}})}v_C(t)$$\nThis is the second state equation, which is independent of the switch position.\n\nThe inductor voltage is $L \\frac{di_L}{dt}$.\n\n**State 1: Switch is ON (interval $d T_s$)**\nThe inductor is connected to the input voltage $V_g$.\n$L \\frac{di_L}{dt} = V_g - v_o(t) = V_g - \\left( \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) + \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) \\right)$\n$$\\frac{di_L}{dt} = -\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} i_L(t) - \\frac{R}{L(R+R_{\\mathrm{ESR}})} v_C(t) + \\frac{1}{L}V_g$$\nThe state-space representation for State 1 is $\\dot{\\mathbf{x}} = \\mathbf{A}_1 \\mathbf{x} + \\mathbf{B}_1 \\mathbf{u}$:\n$\\mathbf{A}_1 = \\begin{pmatrix} -\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})}  -\\frac{R}{L(R+R_{\\mathrm{ESR}})} \\\\ \\frac{R}{C(R+R_{\\mathrm{ESR}})}  -\\frac{1}{C(R+R_{\\mathrm{ESR}})} \\end{pmatrix}$, $\\mathbf{B}_1 = \\begin{pmatrix} 1/L \\\\ 0 \\end{pmatrix}$, $\\mathbf{u} = V_g$.\n\n**State 2: Switch is OFF (interval $(1-d) T_s$)**\nThe inductor is connected to ground (through the ideal diode).\n$L \\frac{di_L}{dt} = 0 - v_o(t) = -\\left( \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) + \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) \\right)$\n$$\\frac{di_L}{dt} = -\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} i_L(t) - \\frac{R}{L(R+R_{\\mathrm{ESR}})} v_C(t)$$\nThe state-space representation for State 2 is $\\dot{\\mathbf{x}} = \\mathbf{A}_2 \\mathbf{x} + \\mathbf{B}_2 \\mathbf{u}$:\n$\\mathbf{A}_2 = \\mathbf{A}_1$, $\\mathbf{B}_2 = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$.\n\n**Averaging and Linearization**\nThe averaged state-space model is $\\dot{\\mathbf{x}} = \\mathbf{A}\\mathbf{x} + \\mathbf{B}\\mathbf{u}$, where $\\mathbf{A} = d\\mathbf{A}_1+(1-d)\\mathbf{A}_2 = \\mathbf{A}_1$ and $\\mathbf{B}=d\\mathbf{B}_1+(1-d)\\mathbf{B}_2 = d\\mathbf{B}_1$. The averaged output equation is $y = \\mathbf{C}\\mathbf{x}$.\nLinearizing around a steady-state operating point ($d=D, \\mathbf{x}=\\mathbf{X}, \\mathbf{u}=\\mathbf{U}=V_g$), we get the small-signal model $\\dot{\\tilde{\\mathbf{x}}} = \\mathbf{A}\\tilde{\\mathbf{x}} + \\mathbf{B}_d \\tilde{d}$, where $\\mathbf{B}_d = (\\mathbf{A}_1 - \\mathbf{A}_2)\\mathbf{X} + (\\mathbf{B}_1 - \\mathbf{B}_2)\\mathbf{U}$.\nSince $\\mathbf{A}_1=\\mathbf{A}_2$, the first term is zero.\n$\\mathbf{B}_d = (\\mathbf{B}_1 - \\mathbf{B}_2)V_g = \\begin{pmatrix} V_g/L \\\\ 0 \\end{pmatrix}$.\nThe small-signal output is $\\tilde{y} = \\tilde{v}_o = \\mathbf{C}\\tilde{\\mathbf{x}}$.\nThe transfer function is $G_{vd}(s) = \\frac{\\tilde{v}_o(s)}{\\tilde{d}(s)} = \\mathbf{C}(s\\mathbf{I}-\\mathbf{A})^{-1}\\mathbf{B}_d$.\nLet's compute $(s\\mathbf{I}-\\mathbf{A})^{-1}$.\n$s\\mathbf{I}-\\mathbf{A} = \\begin{pmatrix} s + \\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})}  \\frac{R}{L(R+R_{\\mathrm{ESR}})} \\\\ -\\frac{R}{C(R+R_{\\mathrm{ESR}})}  s + \\frac{1}{C(R+R_{\\mathrm{ESR}})} \\end{pmatrix}$.\n$\\det(s\\mathbf{I}-\\mathbf{A}) = s^2 + s\\left(\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} + \\frac{1}{C(R+R_{\\mathrm{ESR}})}\\right) + \\frac{R R_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})^2} + \\frac{R^2}{LC(R+R_{\\mathrm{ESR}})^2}$\n$\\det(s\\mathbf{I}-\\mathbf{A}) = s^2 + s\\frac{L+CRR_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})} + \\frac{R}{LC(R+R_{\\mathrm{ESR}})}$.\nNow, $G_{vd}(s) = \\mathbf{C} \\frac{\\mathrm{adj}(s\\mathbf{I}-\\mathbf{A})}{\\det(s\\mathbf{I}-\\mathbf{A})} \\mathbf{B}_d$.\n$\\mathbf{C} \\cdot \\mathrm{adj}(s\\mathbf{I}-\\mathbf{A}) \\cdot \\mathbf{B}_d = \\begin{pmatrix} \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}}  \\frac{R}{R+R_{\\mathrm{ESR}}} \\end{pmatrix} \\begin{pmatrix} s + \\frac{1}{C(R+R_{\\mathrm{ESR}})}  \\dots \\\\ \\frac{R}{C(R+R_{\\mathrm{ESR}})}  \\dots \\end{pmatrix} \\begin{pmatrix} V_g/L \\\\ 0 \\end{pmatrix}$\n$= \\left( \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}}\\left(s + \\frac{1}{C(R+R_{\\mathrm{ESR}})}\\right) + \\frac{R}{R+R_{\\mathrm{ESR}}}\\frac{R}{C(R+R_{\\mathrm{ESR}})} \\right) \\frac{V_g}{L}$\n$= \\frac{R V_g}{L(R+R_{\\mathrm{ESR}})} \\left( R_{\\mathrm{ESR}}s + \\frac{R_{\\mathrm{ESR}}}{C(R+R_{\\mathrm{ESR}})} + \\frac{R}{C(R+R_{\\mathrm{ESR}})} \\right)$\n$= \\frac{R V_g}{L(R+R_{\\mathrm{ESR}})} \\left( R_{\\mathrm{ESR}}s + \\frac{1}{C} \\right) = \\frac{V_g R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} \\left(s + \\frac{1}{CR_{\\mathrm{ESR}}}\\right)$.\nCombining the numerator and denominator:\n$G_{vd}(s) = \\frac{\\frac{V_g R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} (s + \\frac{1}{CR_{\\mathrm{ESR}}})}{s^2 + s\\frac{L+CRR_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})} + \\frac{R}{LC(R+R_{\\mathrm{ESR}})}}$.\nA more common form is derived by assuming $R_{\\mathrm{ESR}} \\ll R$, which simplifies to:\n$G_{vd}(s) \\approx V_g \\frac{1+sCR_{\\mathrm{ESR}}}{1+s(\\frac{L}{R}+CR_{\\mathrm{ESR}}) + s^2LC}$. The derived form is more exact.\nThe DC gain is $G_{vd}(0) = \\frac{V_g R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} \\frac{1}{CR_{\\mathrm{ESR}}} / \\frac{R}{LC(R+R_{\\mathrm{ESR}})} = V_g$. Since $V_o=DV_g$, $\\tilde{v}_o = V_g \\tilde{d} + D \\tilde{v}_g$, so $\\frac{\\tilde{v}_o}{\\tilde{d}}|_{\\tilde{v}_g=0} = V_g$, which matches.\n\n**Part 2: Numerical Poles and Zero**\nGiven values: $L = 100 \\times 10^{-6}\\ \\mathrm{H}$, $C = 470 \\times 10^{-6}\\ \\mathrm{F}$, $R = 5\\ \\Omega$, $R_{\\mathrm{ESR}} = 0.02\\ \\Omega$.\n\n**Zero:** The numerator is proportional to $s + 1/(CR_{\\mathrm{ESR}})$. The zero $s_z$ is located at:\n$s_z = -\\frac{1}{CR_{\\mathrm{ESR}}} = -\\frac{1}{(470 \\times 10^{-6})(0.02)} = -\\frac{1}{9.4 \\times 10^{-6}} \\approx -106383 \\ \\mathrm{rad/s}$.\nThe angular frequency of the zero is $\\omega_z \\approx 1.06 \\times 10^5 \\ \\mathrm{rad/s}$.\n\n**Poles:** The poles are the roots of the denominator polynomial:\n$s^2 + s\\frac{L+CRR_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})} + \\frac{R}{LC(R+R_{\\mathrm{ESR}})} = 0$.\nWe compute the coefficients of the normalized monic polynomial:\n$2\\zeta\\omega_n = \\frac{L+CRR_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})} = \\frac{100 \\times 10^{-6} + (470 \\times 10^{-6})(5)(0.02)}{(100 \\times 10^{-6})(470 \\times 10^{-6})(5.02)} = \\frac{1.47 \\times 10^{-4}}{2.3594 \\times 10^{-7}} \\approx 623.08\\ \\mathrm{rad/s}$.\n$\\omega_n^2 = \\frac{R}{LC(R+R_{\\mathrm{ESR}})} = \\frac{5}{2.3594 \\times 10^{-7}} \\approx 2.119 \\times 10^7\\ (\\mathrm{rad/s})^2$.\n$\\omega_n = \\sqrt{2.119 \\times 10^7} \\approx 4603\\ \\mathrm{rad/s}$.\n$\\zeta = \\frac{623.08}{2 \\times 4603} \\approx 0.0677$.\nThe poles are at $s_{p1,2} = -\\zeta\\omega_n \\pm j\\omega_n\\sqrt{1-\\zeta^2} \\approx -311.5 \\pm j4593.1\\ \\mathrm{rad/s}$.\n\n**Part 3: Phase Boost Calculation**\nThe loop gain is $L(j\\omega) = K_p G_{vd}(j\\omega)$, where $K_p$ is a real, positive constant. The phase of the loop gain is $\\angle L(j\\omega) = \\angle G_{vd}(j\\omega)$, as $\\angle K_p = 0$. The phase margin $\\phi_m$ is defined as $\\phi_m = 180^{\\circ} + \\angle L(j\\omega_{gc})$. We need to find the phase of $G_{vd}(j\\omega)$ at the gain crossover frequency $\\omega_{gc} = 3.00 \\times 10^{4}\\ \\mathrm{rad/s}$.\n\nThe phase of $G_{vd}(j\\omega)$ is:\n$\\angle G_{vd}(j\\omega) = \\angle V_g + \\angle(1+j\\omega CR_{\\mathrm{ESR}}) - \\angle(R - \\omega^2LC(R+R_{\\mathrm{ESR}}) + j\\omega(L+CRR_{\\mathrm{ESR}}))$.\nNote that the factor $V_g$ is a positive real number and contributes $0^{\\circ}$ to the phase.\n\nAt $\\omega_{gc} = 3 \\times 10^4\\ \\mathrm{rad/s}$:\nNumerator phase (from the zero):\n$\\angle_{\\text{zero}} = \\arctan(\\omega_{gc}CR_{\\mathrm{ESR}}) = \\arctan((3 \\times 10^4)(470 \\times 10^{-6})(0.02)) = \\arctan(0.282) \\approx 15.74^{\\circ}$.\n\nDenominator phase (from the poles):\nReal part: $R - \\omega_{gc}^2 LC(R+R_{\\mathrm{ESR}}) = 5 - (3 \\times 10^4)^2 (100 \\times 10^{-6})(470 \\times 10^{-6})(5.02) = 5 - (9 \\times 10^8)(2.3594 \\times 10^{-7}) = 5 - 212.346 = -207.346$.\nImaginary part: $\\omega_{gc}(L+CRR_{\\mathrm{ESR}}) = (3 \\times 10^4)(100 \\times 10^{-6} + (470 \\times 10^{-6})(5)(0.02)) = (3 \\times 10^4)(1.47 \\times 10^{-4}) = 4.41$.\n$\\angle_{\\text{poles}} = \\arctan\\left(\\frac{4.41}{-207.346}\\right)$. Since the real part is negative and the imaginary part is positive, the angle is in the second quadrant.\n$\\angle_{\\text{poles}} = 180^{\\circ} + \\arctan(-0.021268) = 180^{\\circ} - 1.218^{\\circ} \\approx 178.78^{\\circ}$.\n\nThe phase of the plant at crossover is:\n$\\angle L(j\\omega_{gc}) = \\angle G_{vd}(j\\omega_{gc}) = \\angle_{\\text{zero}} - \\angle_{\\text{poles}} = 15.74^{\\circ} - 178.78^{\\circ} = -163.04^{\\circ}$.\n\nThe existing phase margin is:\n$\\phi_{m, \\text{current}} = 180^{\\circ} + \\angle L(j\\omega_{gc}) = 180^{\\circ} - 163.04^{\\circ} = 16.96^{\\circ}$.\n\nThe desired phase margin is $\\phi_m = 60^{\\circ}$. The required phase boost from a lead compensator is the difference between the desired and current phase margins.\n$\\phi_{\\text{boost}} = \\phi_{m} - \\phi_{m, \\text{current}} = 60^{\\circ} - 16.96^{\\circ} = 43.04^{\\circ}$.\n\nRounding to three significant figures, the required phase boost is $43.0^{\\circ}$.",
            "answer": "$$\\boxed{43.0}$$"
        },
        {
            "introduction": "With the plant model established, the next task is to design a compensator that shapes the overall loop gain to meet stability and performance targets. This practice delves into the anatomy of a Type III compensator, the workhorse of voltage-mode control, exploring how its poles and zeros are placed to provide 'phase boost' around the crossover frequency. Understanding this mechanism is crucial for designing robust feedback systems .",
            "id": "3856192",
            "problem": "A voltage-mode buck converter is stabilized using a Type III compensator to achieve adequate phase margin around the gain crossover frequency. The loop gain is defined as $L(s) = C(s)G(s)$, where $C(s)$ is the compensator transfer function and $G(s)$ is the power stage transfer function. The frequency response phase of a linear time-invariant system $H(s)$ at angular frequency $\\omega$ is the argument of $H(j\\omega)$, denoted $\\arg\\{H(j\\omega)\\}$, and the total phase is the sum of the arguments of its multiplicative factors.\n\nStarting from this definition, explain qualitatively how the phase of the frequency response contributed by a first-order zero and by a first-order pole evolves with frequency. Then, by specializing your explanation to the canonical Type II and Type III compensator factors, describe how each factor contributes to the total compensator phase as a function of frequency, including the contribution of the pole at the origin.\n\nFinally, consider the specific Type III compensator\n$$\nC(s) = K\\frac{\\left(1 + \\frac{s}{\\omega_{z1}}\\right)\\left(1 + \\frac{s}{\\omega_{z2}}\\right)}{s\\left(1 + \\frac{s}{\\omega_{p2}}\\right)\\left(1 + \\frac{s}{\\omega_{p3}}\\right)},\n$$\nwith zero and pole placements given by the frequencies $f_{z1} = 1.2 \\,\\mathrm{kHz}$, $f_{z2} = 3.3 \\,\\mathrm{kHz}$, $f_{p2} = 20 \\,\\mathrm{kHz}$, and $f_{p3} = 80 \\,\\mathrm{kHz}$, where $\\omega_{z1} = 2\\pi f_{z1}$, $\\omega_{z2} = 2\\pi f_{z2}$, $\\omega_{p2} = 2\\pi f_{p2}$, and $\\omega_{p3} = 2\\pi f_{p3}$. Let the loop gain crossover frequency be $f_{gc} = 5.0 \\,\\mathrm{kHz}$, with $\\omega_{gc} = 2\\pi f_{gc}$.\n\nDefine the compensator’s net phase boost at $\\omega_{gc}$ as the difference between the phase of $C(j\\omega_{gc})$ and the phase of an ideal integrator $1/s$ at $\\omega_{gc}$. Using only fundamental definitions of frequency response and arguments of complex factors, compute this net phase boost for the specified zero and pole placements.\n\nExpress your final answer in degrees, and round your answer to four significant figures. Do not include the unit in your final boxed answer; the unit is degrees as stated.",
            "solution": "The problem statement is evaluated as valid. It is scientifically grounded in the principles of linear control theory as applied to power electronics, is well-posed with all necessary information provided, and is formulated objectively. The problem requires an explanation of fundamental concepts followed by a specific calculation, which is a standard procedure in engineering analysis.\n\nThe phase of a transfer function $H(s)$ at a given angular frequency $\\omega$ is the argument of the complex number obtained by evaluating $H(s)$ at $s=j\\omega$, denoted as $\\phi(\\omega) = \\arg\\{H(j\\omega)\\}$. For a system composed of several multiplicative factors, $H(s) = H_1(s)H_2(s)...H_n(s)$, the total phase is the sum of the individual phases: $\\arg\\{H(j\\omega)\\} = \\sum_{i=1}^{n} \\arg\\{H_i(j\\omega)\\}$.\n\nLet's first analyze the phase contribution of a first-order zero and a first-order pole.\n\nA first-order zero is represented by a transfer function factor of the form $H_z(s) = 1 + \\frac{s}{\\omega_z}$. At an angular frequency $\\omega$, its frequency response is $H_z(j\\omega) = 1 + j\\frac{\\omega}{\\omega_z}$. This is a complex number with a real part of $1$ and an imaginary part of $\\frac{\\omega}{\\omega_z}$. Its phase, $\\phi_z(\\omega)$, is given by the arctangent of the ratio of the imaginary part to the real part:\n$$\n\\phi_z(\\omega) = \\arg\\left\\{1 + j\\frac{\\omega}{\\omega_z}\\right\\} = \\arctan\\left(\\frac{\\omega}{\\omega_z}\\right)\n$$\nThe phase contribution of this zero evolves with frequency:\n- At very low frequencies ($\\omega \\ll \\omega_z$), the ratio $\\frac{\\omega}{\\omega_z}$ is close to $0$, so $\\phi_z(\\omega) \\approx \\arctan(0) = 0^\\circ$.\n- At the corner frequency ($\\omega = \\omega_z$), the ratio is $1$, and the phase is $\\phi_z(\\omega_z) = \\arctan(1) = +45^\\circ$.\n- At very high frequencies ($\\omega \\gg \\omega_z$), the ratio $\\frac{\\omega}{\\omega_z}$ tends to infinity, and the phase approaches $\\phi_z(\\omega) \\to \\arctan(\\infty) = +90^\\circ$.\nThus, a first-order zero introduces a phase lead that ranges from $0^\\circ$ to $+90^\\circ$ as frequency increases.\n\nA first-order pole is represented by a transfer function factor of the form $H_p(s) = \\frac{1}{1 + \\frac{s}{\\omega_p}}$. Its frequency response is $H_p(j\\omega) = \\frac{1}{1 + j\\frac{\\omega}{\\omega_p}}$. The phase of this complex number is the negative of the phase of its denominator:\n$$\n\\phi_p(\\omega) = \\arg\\left\\{\\frac{1}{1 + j\\frac{\\omega}{\\omega_p}}\\right\\} = -\\arg\\left\\{1 + j\\frac{\\omega}{\\omega_p}\\right\\} = -\\arctan\\left(\\frac{\\omega}{\\omega_p}\\right)\n$$\nThe phase contribution of this pole evolves with frequency as follows:\n- At very low frequencies ($\\omega \\ll \\omega_p$), the phase lag is $\\phi_p(\\omega) \\approx -\\arctan(0) = 0^\\circ$.\n- At the corner frequency ($\\omega = \\omega_p$), the phase is $\\phi_p(\\omega_p) = -\\arctan(1) = -45^\\circ$.\n- At very high frequencies ($\\omega \\gg \\omega_p$), the phase approaches $\\phi_p(\\omega) \\to -\\arctan(\\infty) = -90^\\circ$.\nThus, a first-order pole introduces a phase lag that ranges from $0^\\circ$ to $-90^\\circ$ as frequency increases.\n\nNow, we can specialize this to the factors of Type II and Type III compensators. A Type III compensator, as given in the problem, has the transfer function:\n$$\nC(s) = K\\frac{\\left(1 + \\frac{s}{\\omega_{z1}}\\right)\\left(1 + \\frac{s}{\\omega_{z2}}\\right)}{s\\left(1 + \\frac{s}{\\omega_{p2}}\\right)\\left(1 + \\frac{s}{\\omega_{p3}}\\right)}\n$$\nIt is composed of five factors: a constant gain $K$, a pole at the origin ($1/s$), two zeros at $\\omega_{z1}$ and $\\omega_{z2}$, and two poles at $\\omega_{p2}$ and $\\omega_{p3}$. A Type II compensator would typically have one pole at the origin, one zero, and one pole.\nThe phase contribution of each factor in the Type III compensator is as follows:\n- **Pole at the origin ($1/s$):** This term corresponds to an ideal integrator. Its frequency response is $1/(j\\omega)$. This can be written as $-j/\\omega$, which is a purely negative imaginary number for all $\\omega  0$. Its phase is therefore a constant $-90^\\circ$ across all frequencies. This high gain at low frequencies is critical for minimizing steady-state error.\n- **Two Zeros ($\\omega_{z1}$, $\\omega_{z2}$):** The terms $(1 + s/\\omega_{z1})$ and $(1 + s/\\omega_{z2})$ each contribute a phase lead, as described by the general first-order zero case. These zeros are strategically placed around the desired loop gain crossover frequency $f_{gc}$ to \"boost\" the phase of the system, thereby increasing the phase margin and ensuring stability.\n- **Two Poles ($\\omega_{p2}$, $\\omega_{p3}$):** The terms $1/(1 + s/\\omega_{p2})$ and $1/(1 + s/\\omega_{p3})$ each contribute a phase lag, as per the first-order pole analysis. These poles are placed at frequencies higher than the crossover frequency. Their primary role is to attenuate high-frequency switching noise and to roll off the compensator's gain at high frequencies to prevent amplification of noise and ensure stability against unmodeled high-frequency plant dynamics. While they add phase lag, their placement far above $f_{gc}$ ensures that this lag is small at the crossover frequency, not significantly eroding the phase boost provided by the zeros.\n\nFinally, we compute the net phase boost for the specific Type III compensator at the crossover frequency $f_{gc} = 5.0 \\,\\mathrm{kHz}$. The total phase of the compensator $C(s)$ at $s = j\\omega_{gc}$ is the sum of the phases of its individual components. Assuming the gain $K$ is positive, its phase is $0^\\circ$.\n$$\n\\arg\\{C(j\\omega_{gc})\\} = \\arg\\left\\{\\frac{1}{j\\omega_{gc}}\\right\\} + \\arg\\left\\{1+j\\frac{\\omega_{gc}}{\\omega_{z1}}\\right\\} + \\arg\\left\\{1+j\\frac{\\omega_{gc}}{\\omega_{z2}}\\right\\} + \\arg\\left\\{\\frac{1}{1+j\\frac{\\omega_{gc}}{\\omega_{p2}}}\\right\\} + \\arg\\left\\{\\frac{1}{1+j\\frac{\\omega_{gc}}{\\omega_{p3}}}\\right\\}\n$$\nUsing the established relations, this becomes:\n$$\n\\arg\\{C(j\\omega_{gc})\\} = -90^\\circ + \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{z1}}\\right) + \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{z2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p3}}\\right)\n$$\nThe problem defines the net phase boost, $\\Phi_{boost}$, as the difference between the phase of $C(j\\omega_{gc})$ and the phase of an ideal integrator $1/s$. The phase of the ideal integrator at $\\omega_{gc}$ is $\\arg\\{1/(j\\omega_{gc})\\} = -90^\\circ$.\n$$\n\\Phi_{boost} = \\arg\\{C(j\\omega_{gc})\\} - \\arg\\left\\{\\frac{1}{j\\omega_{gc}}\\right\\}\n$$\n$$\n\\Phi_{boost} = \\left[-90^\\circ + \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{z1}}\\right) + \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{z2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p3}}\\right)\\right] - (-90^\\circ)\n$$\nThe $-90^\\circ$ terms cancel, leaving the net phase contribution from the compensator's poles and zeros (excluding the pole at the origin):\n$$\n\\Phi_{boost} = \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{z1}}\\right) + \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{z2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p3}}\\right)\n$$\nThe ratio of angular frequencies $\\omega_a/\\omega_b$ is equivalent to the ratio of frequencies $f_a/f_b$. We substitute the given values: $f_{gc} = 5.0 \\,\\mathrm{kHz}$, $f_{z1} = 1.2 \\,\\mathrm{kHz}$, $f_{z2} = 3.3 \\,\\mathrm{kHz}$, $f_{p2} = 20 \\,\\mathrm{kHz}$, and $f_{p3} = 80 \\,\\mathrm{kHz}$.\n$$\n\\Phi_{boost} = \\arctan\\left(\\frac{5.0}{1.2}\\right) + \\arctan\\left(\\frac{5.0}{3.3}\\right) - \\arctan\\left(\\frac{5.0}{20}\\right) - \\arctan\\left(\\frac{5.0}{80}\\right)\n$$\nThe arguments of the arctangent functions are:\n$\\frac{5.0}{1.2} \\approx 4.1667$, $\\frac{5.0}{3.3} \\approx 1.5152$, $\\frac{5.0}{20} = 0.25$, and $\\frac{5.0}{80} = 0.0625$.\n$$\n\\Phi_{boost} = \\arctan(4.1667) + \\arctan(1.5152) - \\arctan(0.25) - \\arctan(0.0625)\n$$\nConverting radians to degrees (by ensuring the calculator is in degree mode):\n$$\n\\arctan(4.1667) \\approx 76.5055^\\circ\n$$\n$$\n\\arctan(1.5152) \\approx 56.5746^\\circ\n$$\n$$\n\\arctan(0.25) \\approx 14.0362^\\circ\n$$\n$$\n\\arctan(0.0625) \\approx 3.5763^\\circ\n$$\nSumming these contributions:\n$$\n\\Phi_{boost} \\approx 76.5055^\\circ + 56.5746^\\circ - 14.0362^\\circ - 3.5763^\\circ\n$$\n$$\n\\Phi_{boost} \\approx 133.0801^\\circ - 17.6125^\\circ = 115.4676^\\circ\n$$\nRounding the result to four significant figures gives $115.5^\\circ$.",
            "answer": "$$\\boxed{115.5}$$"
        },
        {
            "introduction": "While compensators can correct many plant deficiencies, some converters have inherent characteristics that impose fundamental limits on control performance. This exercise tackles the notorious Right-Hand-Plane (RHP) zero, a feature of boost and buck-boost converters that adds phase lag while increasing gain, making control difficult. You will derive the analytical reason why the control bandwidth must be limited in the presence of an RHP zero, a critical lesson in non-minimum-phase systems .",
            "id": "3856185",
            "problem": "A continuous-conduction-mode boost converter is controlled by a unity-feedback loop whose loop gain is the product of a compensator transfer function and the power stage control-to-output transfer function. The small-signal control-to-output transfer function of the power stage in the frequency range of interest can be represented as the product of a minimum-phase second-order term (due to the inductor-capacitor energy storage) and a non-minimum-phase Right-Hand-Plane (RHP) zero at angular frequency $\\omega_{z,\\text{RHP}}$, namely\n$$\nG_{vd}(s)=G_{0}\\,\\frac{1-\\frac{s}{\\omega_{z,\\text{RHP}}}}{1+\\frac{s}{Q\\omega_{0}}+\\left(\\frac{s}{\\omega_{0}}\\right)^{2}},\n$$\nwhere $\\omega_{0}$ is the undamped natural frequency of the minimum-phase second-order dynamics and $Q$ is the quality factor. The compensator is Type-III and is tuned to achieve approximately a $-20$ decibels per decade magnitude slope at the intended gain-crossover angular frequency $\\omega_{gc}$; for component-noise and switching-ripple robustness, the compensator is constrained to provide no more than $+70^{\\circ}$ phase lead at $\\omega_{gc}$. The measurement and Pulse-Width Modulation (PWM) process introduce an additional effective phase lag of $20^{\\circ}$ at $\\omega_{gc}$ (equivalent to a small delay).\n\nAssume $\\omega_{gc}$ is positioned above the minimum-phase second-order corner so that the minimum-phase part contributes approximately $-180^{\\circ}$ of phase at $\\omega_{gc}$. Using first principles of frequency response and the definition of phase margin, derive why $\\omega_{gc}$ must be chosen well below $\\omega_{z,\\text{RHP}}$. Then, under the given constraints, compute the maximum feasible $\\omega_{gc}$ that guarantees a phase margin $\\phi_{m}\\geq 45^{\\circ}$. Express your final answer as a single closed-form analytic expression in terms of $\\omega_{z,\\text{RHP}}$, using radians for any trigonometric arguments. No numerical rounding is required in the final expression.",
            "solution": "The loop gain is $L(s)=G_{c}(s)G_{vd}(s)H(s)$, where $G_{c}(s)$ is the compensator and $H(s)$ is the sensor. The phase margin $\\phi_{m}$ is defined at the gain-crossover angular frequency $\\omega_{gc}$ by\n$$\n\\phi_{m}=\\pi+\\angle L(j\\omega_{gc}),\n$$\nwith angles measured in radians. Equivalently, in degrees,\n$$\n\\phi_{m}=180^{\\circ}+\\angle L(j\\omega_{gc}).\n$$\n\nWe build the loop phase at $\\omega_{gc}$ from the constituent elements:\n1. Minimum-phase second-order plant contribution. A pair of real or complex-conjugate poles yields a phase of\n$$\n\\angle\\left[\\frac{1}{1+\\frac{s}{Q\\omega_{0}}+\\left(\\frac{s}{\\omega_{0}}\\right)^{2}}\\right]\\Bigg|_{s=j\\omega}\n=\\,-\\arctan\\!\\left(\\frac{\\omega}{\\omega_{p1}}\\right)\\,-\\arctan\\!\\left(\\frac{\\omega}{\\omega_{p2}}\\right),\n$$\nwhere $\\omega_{p1}$ and $\\omega_{p2}$ are the pole frequencies. For $\\omega\\gg\\omega_{0}$ and moderate $Q$, this phase approaches $-180^{\\circ}$. By the problem’s premise, $\\omega_{gc}$ is above the second-order corner, so we take the minimum-phase contribution at $\\omega_{gc}$ to be approximately $-180^{\\circ}$.\n\n2. Compensator phase lead. A Type-III compensator comprises two lead sections and a low-frequency pole. Each lead section of the form $\\left(1+\\frac{s}{\\omega_{z\\ell}}\\right)/\\left(1+\\frac{s}{\\omega_{p\\ell}}\\right)$ contributes phase\n$$\n\\phi_{\\ell}(\\omega)=\\arctan\\!\\left(\\frac{\\omega}{\\omega_{z\\ell}}\\right)-\\arctan\\!\\left(\\frac{\\omega}{\\omega_{p\\ell}}\\right),\n$$\npeaking at $\\omega=\\sqrt{\\omega_{z\\ell}\\,\\omega_{p\\ell}}$. With two such sections, the compensator phase boost at $\\omega_{gc}$ is bounded; the problem constrains the net phase lead to be no more than $+70^{\\circ}$ at $\\omega_{gc}$.\n\n3. Measurement and PWM delay. An effective delay $T_{d}$ in $H(s)$ or the modulator yields $H(s)\\approx\\exp(-T_{d}s)$, whose phase is $-\\omega T_{d}$. The problem states that this contributes $20^{\\circ}$ of lag at $\\omega_{gc}$.\n\n4. RHP zero contribution. An RHP zero at $\\omega_{z,\\text{RHP}}$ appears as the factor $1-\\frac{s}{\\omega_{z,\\text{RHP}}}$. Evaluated on the imaginary axis $s=j\\omega$,\n$$\n1-\\frac{j\\omega}{\\omega_{z,\\text{RHP}}}=\\sqrt{1+\\left(\\frac{\\omega}{\\omega_{z,\\text{RHP}}}\\right)^{2}}\\;\\exp\\!\\left(-j\\,\\arctan\\!\\frac{\\omega}{\\omega_{z,\\text{RHP}}}\\right),\n$$\nso the phase contributed by the RHP zero is\n$$\n\\phi_{z,\\text{RHP}}(\\omega)=-\\arctan\\!\\left(\\frac{\\omega}{\\omega_{z,\\text{RHP}}}\\right),\n$$\nranging from $0^{\\circ}$ to $-90^{\\circ}$ as $\\omega$ increases. Importantly, this is a non-minimum-phase feature: it increases magnitude while adding negative phase, which erodes phase margin when $\\omega_{gc}$ is not well below $\\omega_{z,\\text{RHP}}$.\n\nCollecting these at $\\omega=\\omega_{gc}$, the total loop phase is\n$$\n\\angle L(j\\omega_{gc})\\approx\\underbrace{(-180^{\\circ})}_{\\text{minimum-phase plant}}+\\underbrace{(+70^{\\circ})}_{\\text{compensator lead}}+\\underbrace{(-20^{\\circ})}_{\\text{delay}}+\\underbrace{\\left(-\\arctan\\!\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right)}_{\\text{RHP zero}}.\n$$\nThus,\n$$\n\\angle L(j\\omega_{gc})\\approx -130^{\\circ}-\\arctan\\!\\left(\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right).\n$$\n\nThe phase margin requirement $\\phi_{m}\\geq 45^{\\circ}$ is, in degrees,\n$$\n180^{\\circ}+\\angle L(j\\omega_{gc})\\geq 45^{\\circ}\\quad\\Longleftrightarrow\\quad \\angle L(j\\omega_{gc})\\geq -135^{\\circ}.\n$$\nSubstituting the loop phase expression gives\n$$\n-130^{\\circ}-\\arctan\\!\\left(\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right)\\geq -135^{\\circ}.\n$$\nRearranging,\n$$\n\\arctan\\!\\left(\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right)\\leq 5^{\\circ}.\n$$\nSince $\\arctan(\\cdot)$ is monotonic increasing, the maximal feasible $\\omega_{gc}$ occurs at equality:\n$$\n\\frac{\\omega_{gc,\\max}}{\\omega_{z,\\text{RHP}}}=\\tan(5^{\\circ}).\n$$\nTo express the trigonometric argument in radians, note that $5^{\\circ}=\\frac{5\\pi}{180}=\\frac{\\pi}{36}$. Therefore,\n$$\n\\omega_{gc,\\max}=\\omega_{z,\\text{RHP}}\\,\\tan\\!\\left(\\frac{\\pi}{36}\\right).\n$$\n\nThis derivation also explains why $\\omega_{gc}$ must be well below $\\omega_{z,\\text{RHP}}$: as $\\omega_{gc}$ approaches $\\omega_{z,\\text{RHP}}$, the non-minimum-phase zero contributes a large negative phase approaching $-45^{\\circ}$ to $-90^{\\circ}$, which cannot be overcome by the constrained compensator lead and the unavoidable delay, thereby violating the desired phase margin. The closed-form bound shows the required separation explicitly.",
            "answer": "$$\\boxed{\\omega_{z,\\text{RHP}}\\tan\\!\\left(\\frac{\\pi}{36}\\right)}$$"
        }
    ]
}
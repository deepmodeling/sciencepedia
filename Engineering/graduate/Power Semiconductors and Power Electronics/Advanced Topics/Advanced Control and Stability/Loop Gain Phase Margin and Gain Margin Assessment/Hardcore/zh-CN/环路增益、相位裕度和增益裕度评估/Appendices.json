{
    "hands_on_practices": [
        {
            "introduction": "在设计任何反馈控制环路之前，首要任务是精确地建立被控对象（即功率变换器）的数学模型。这个模型，即控制到输出的传递函数 $G_{vd}(s)$，揭示了功率级固有的动态特性，例如其谐振频率和阻尼。本练习将通过对一个典型的降压（Buck）变换器进行状态空间平均法分析，指导您从第一性原理推导出其传递函数，并利用该模型评估系统在指定交越频率下的相位特性，从而为补偿器设计奠定基础。",
            "id": "3856221",
            "problem": "一个工作在连续导通模式下的降压转换器使用一个输出滤波器，该滤波器由一个电感为 $L$ 的电感器、一个电容为 $C$ 且等效串联电阻 (ESR) 为 $R_{\\mathrm{ESR}}$ 的电容器，以及一个与电容器并联的阻值为 $R$ 的电阻负载组成。假设开关器件是理想的，且电感电阻可以忽略不计。使用状态空间平均法和基本原理（Kirchhoff 电压定律和 Kirchhoff 电流定律），推导包含电容 ESR 的小信号控制-输出传递函数 $G_{vd}(s)$。然后，根据以下元件参数值，计算 $G_{vd}(s)$ 的极点和零点的数值位置：\n- $L = 100 \\times 10^{-6}\\ \\mathrm{H}$，\n- $C = 470 \\times 10^{-6}\\ \\mathrm{F}$，\n- $R = 5\\ \\Omega$，\n- $R_{\\mathrm{ESR}} = 0.02\\ \\Omega$。\n\n接下来，考虑由 $G_{vd}(j\\omega)$ 与一个纯比例补偿器级联形成的环路增益 $L(j\\omega)$，该补偿器具有实数正增益（即零相位贡献）。设定增益，使得在指定的增益交越频率 $\\omega_{gc} = 3.00 \\times 10^{4}\\ \\mathrm{rad/s}$ 处，环路增益的幅值满足 $|L(j\\omega_{gc})| = 1$。确定为了在 $\\omega_{gc}$ 处实现 $\\phi_{m} = 60^{\\circ}$ 的相位裕度，一个附加的超前网络必须提供多少相位提升。以度为单位表示相位提升量，并将答案四舍五入至三位有效数字。",
            "solution": "该问题被评估为有效，因为它在科学上基于电力电子学和控制理论的原理，问题陈述清晰，数据充分且一致，并以客观、正式的语言表述。该问题是分析 DC-DC 转换器动态特性的一个标准练习。\n\n**第 1 部分：控制-输出传递函数 $G_{vd}(s)$ 的推导**\n\n我们将使用状态空间平均法来推导小信号控制-输出传递函数 $G_{vd}(s) = \\frac{\\tilde{v}_o(s)}{\\tilde{d}(s)}$。状态变量是电感电流 $i_L(t)$ 和电容电压 $v_C(t)$。状态向量为 $\\mathbf{x}(t) = \\begin{pmatrix} i_L(t)  v_C(t) \\end{pmatrix}^T$。输入为源电压 $V_g$。\n\n输出电压 $v_o(t)$ 本身不是一个状态变量，而是状态变量及其导数的线性组合。\n在电容器 $C$、其 ESR $R_{\\mathrm{ESR}}$ 和负载 $R$ 之间的节点处应用 KCL：\n$i_C(t) = i_L(t) - i_R(t) = i_L(t) - \\frac{v_o(t)}{R}$\n输出电压是电容电压和 ESR 两端电压之和：\n$v_o(t) = v_C(t) + i_C(t) R_{\\mathrm{ESR}} = v_C(t) + \\left( i_L(t) - \\frac{v_o(t)}{R} \\right) R_{\\mathrm{ESR}}$\n解出 $v_o(t)$:\n$v_o(t) \\left( 1 + \\frac{R_{\\mathrm{ESR}}}{R} \\right) = v_C(t) + i_L(t) R_{\\mathrm{ESR}}$\n$$v_o(t) = \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) + \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t)$$\n这是我们的输出方程 $y(t) = \\mathbf{C}\\mathbf{x}(t)$，其中输出矩阵为 $\\mathbf{C} = \\begin{pmatrix} \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}}  \\frac{R}{R+R_{\\mathrm{ESR}}} \\end{pmatrix}$。该矩阵在两种开关状态下是相同的。\n\n现在我们推导状态方程。电容电流为 $i_C(t) = C \\frac{dv_C}{dt}$。\n$C \\frac{dv_C}{dt} = i_L(t) - \\frac{v_o(t)}{R} = i_L(t) - \\frac{1}{R}\\left( \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) + \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) \\right)$\n$$\\frac{dv_C}{dt} = \\frac{1}{C}\\left( i_L(t) - \\frac{R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) - \\frac{1}{R+R_{\\mathrm{ESR}}}v_C(t) \\right) = \\frac{R}{C(R+R_{\\mathrm{ESR}})}i_L(t) - \\frac{1}{C(R+R_{\\mathrm{ESR}})}v_C(t)$$\n这是第二个状态方程，它与开关闭合位置无关。\n\n电感电压为 $L \\frac{di_L}{dt}$。\n\n**状态 1：开关闭合（区间 $d T_s$）**\n电感连接到输入电压 $V_g$。\n$L \\frac{di_L}{dt} = V_g - v_o(t) = V_g - \\left( \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) + \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) \\right)$\n$$\\frac{di_L}{dt} = -\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} i_L(t) - \\frac{R}{L(R+R_{\\mathrm{ESR}})} v_C(t) + \\frac{1}{L}V_g$$\n状态 1 的状态空间表示为 $\\dot{\\mathbf{x}} = \\mathbf{A}_1 \\mathbf{x} + \\mathbf{B}_1 \\mathbf{u}$:\n$\\mathbf{A}_1 = \\begin{pmatrix} -\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})}  -\\frac{R}{L(R+R_{\\mathrm{ESR}})} \\\\ \\frac{R}{C(R+R_{\\mathrm{ESR}})}  -\\frac{1}{C(R+R_{\\mathrm{ESR}})} \\end{pmatrix}$，$\\mathbf{B}_1 = \\begin{pmatrix} 1/L \\\\ 0 \\end{pmatrix}$，$\\mathbf{u} = V_g$。\n\n**状态 2：开关断开（区间 $(1-d) T_s$）**\n电感连接到地（通过理想二极管）。\n$L \\frac{di_L}{dt} = 0 - v_o(t) = -\\left( \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}} i_L(t) + \\frac{R}{R+R_{\\mathrm{ESR}}} v_C(t) \\right)$\n$$\\frac{di_L}{dt} = -\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} i_L(t) - \\frac{R}{L(R+R_{\\mathrm{ESR}})} v_C(t)$$\n状态 2 的状态空间表示为 $\\dot{\\mathbf{x}} = \\mathbf{A}_2 \\mathbf{x} + \\mathbf{B}_2 \\mathbf{u}$:\n$\\mathbf{A}_2 = \\mathbf{A}_1$，$\\mathbf{B}_2 = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$。\n\n**平均化与线性化**\n平均状态空间模型为 $\\dot{\\mathbf{x}} = \\mathbf{A}\\mathbf{x} + \\mathbf{B}\\mathbf{u}$，其中 $\\mathbf{A} = d\\mathbf{A}_1+(1-d)\\mathbf{A}_2 = \\mathbf{A}_1$ 且 $\\mathbf{B}=d\\mathbf{B}_1+(1-d)\\mathbf{B}_2 = d\\mathbf{B}_1$。平均输出方程为 $y = \\mathbf{C}\\mathbf{x}$。\n在稳态工作点（$d=D, \\mathbf{x}=\\mathbf{X}, \\mathbf{u}=\\mathbf{U}=V_g$）附近进行线性化，我们得到小信号模型 $\\dot{\\tilde{\\mathbf{x}}} = \\mathbf{A}\\tilde{\\mathbf{x}} + \\mathbf{B}_d \\tilde{d}$，其中 $\\mathbf{B}_d = (\\mathbf{A}_1 - \\mathbf{A}_2)\\mathbf{X} + (\\mathbf{B}_1 - \\mathbf{B}_2)\\mathbf{U}$。\n由于 $\\mathbf{A}_1=\\mathbf{A}_2$，第一项为零。\n$\\mathbf{B}_d = (\\mathbf{B}_1 - \\mathbf{B}_2)V_g = \\begin{pmatrix} V_g/L \\\\ 0 \\end{pmatrix}$。\n小信号输出为 $\\tilde{y} = \\tilde{v}_o = \\mathbf{C}\\tilde{\\mathbf{x}}$。\n传递函数为 $G_{vd}(s) = \\frac{\\tilde{v}_o(s)}{\\tilde{d}(s)} = \\mathbf{C}(s\\mathbf{I}-\\mathbf{A})^{-1}\\mathbf{B}_d$。\n我们来计算 $(s\\mathbf{I}-\\mathbf{A})^{-1}$。\n$s\\mathbf{I}-\\mathbf{A} = \\begin{pmatrix} s + \\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})}  \\frac{R}{L(R+R_{\\mathrm{ESR}})} \\\\ -\\frac{R}{C(R+R_{\\mathrm{ESR}})}  s + \\frac{1}{C(R+R_{\\mathrm{ESR}})} \\end{pmatrix}$。\n$\\det(s\\mathbf{I}-\\mathbf{A}) = s^2 + s\\left(\\frac{R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} + \\frac{1}{C(R+R_{\\mathrm{ESR}})}\\right) + \\frac{R R_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})^2} + \\frac{R^2}{LC(R+R_{\\mathrm{ESR}})^2}$\n$\\det(s\\mathbf{I}-\\mathbf{A}) = s^2 + s\\frac{L+CRR_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})} + \\frac{R}{LC(R+R_{\\mathrm{ESR}})}$。\n现在，$G_{vd}(s) = \\mathbf{C} \\frac{\\mathrm{adj}(s\\mathbf{I}-\\mathbf{A})}{\\det(s\\mathbf{I}-\\mathbf{A})} \\mathbf{B}_d$。\n$\\mathbf{C} \\cdot \\mathrm{adj}(s\\mathbf{I}-\\mathbf{A}) \\cdot \\mathbf{B}_d = \\begin{pmatrix} \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}}  \\frac{R}{R+R_{\\mathrm{ESR}}} \\end{pmatrix} \\begin{pmatrix} s + \\frac{1}{C(R+R_{\\mathrm{ESR}})}  \\dots \\\\ \\frac{R}{C(R+R_{\\mathrm{ESR}})}  \\dots \\end{pmatrix} \\begin{pmatrix} V_g/L \\\\ 0 \\end{pmatrix}$\n$= \\left( \\frac{R R_{\\mathrm{ESR}}}{R+R_{\\mathrm{ESR}}}\\left(s + \\frac{1}{C(R+R_{\\mathrm{ESR}})}\\right) + \\frac{R}{R+R_{\\mathrm{ESR}}}\\frac{R}{C(R+R_{\\mathrm{ESR}})} \\right) \\frac{V_g}{L}$\n$= \\frac{R V_g}{L(R+R_{\\mathrm{ESR}})} \\left( R_{\\mathrm{ESR}}s + \\frac{R_{\\mathrm{ESR}}}{C(R+R_{\\mathrm{ESR}})} + \\frac{R}{C(R+R_{\\mathrm{ESR}})} \\right)$\n$= \\frac{R V_g}{L(R+R_{\\mathrm{ESR}})} \\left( R_{\\mathrm{ESR}}s + \\frac{1}{C} \\right) = \\frac{V_g R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} \\left(s + \\frac{1}{CR_{\\mathrm{ESR}}}\\right)$。\n合并分子和分母：\n$G_{vd}(s) = \\frac{\\frac{V_g R R_{\\mathrm{ESR}}}{L(R+R_{\\mathrm{ESR}})} (s + \\frac{1}{CR_{\\mathrm{ESR}}})}{s^2 + s\\frac{L+CRR_{\\mathrm{ESR}}}{LC(R+R_{\\mathrm{ESR}})} + \\frac{R}{LC(R+R_{\\mathrm{ESR}})}}$。\n将分子和分母同乘以 $LC(R+R_{\\mathrm{ESR}})$ 来简化表达式：\n$$G_{vd}(s) = V_g \\frac{R C R_{\\mathrm{ESR}} (s + \\frac{1}{CR_{\\mathrm{ESR}}})}{s^2LC(R+R_{\\mathrm{ESR}}) + s(L+CRR_{\\mathrm{ESR}}) + R} = V_g \\frac{R(1+sCR_{\\mathrm{ESR}})}{s^2LC(R+R_{\\mathrm{ESR}}) + s(L+CRR_{\\mathrm{ESR}}) + R}$$\n直流增益为 $G_{vd}(0) = V_g \\frac{R}{R} = V_g$。由于 $V_o=DV_g$，所以 $\\tilde{v}_o = V_g \\tilde{d} + D \\tilde{v}_g$，因此 $\\frac{\\tilde{v}_o}{\\tilde{d}}|_{\\tilde{v}_g=0} = V_g$，这与结果相符。\n\n**第 2 部分：极点和零点的数值计算**\n给定值：$L = 100 \\times 10^{-6}\\ \\mathrm{H}$，$C = 470 \\times 10^{-6}\\ \\mathrm{F}$，$R = 5\\ \\Omega$，$R_{\\mathrm{ESR}} = 0.02\\ \\Omega$。\n\n**零点：** 分子与 $1+sCR_{\\mathrm{ESR}}$ 成正比。零点 $s_z$ 位于：\n$s_z = -\\frac{1}{CR_{\\mathrm{ESR}}} = -\\frac{1}{(470 \\times 10^{-6})(0.02)} = -\\frac{1}{9.4 \\times 10^{-6}} \\approx -106383 \\ \\mathrm{rad/s}$。\n\n**极点：** 极点是分母多项式的根：\n$s^2LC(R+R_{\\mathrm{ESR}}) + s(L+CRR_{\\mathrm{ESR}}) + R = 0$。\n我们计算系数：\n$LC(R+R_{\\mathrm{ESR}}) = (100 \\times 10^{-6})(470 \\times 10^{-6})(5+0.02) = (4.7 \\times 10^{-8})(5.02) \\approx 2.3594 \\times 10^{-7}$。\n$L+CRR_{\\mathrm{ESR}} = 100 \\times 10^{-6} + (470 \\times 10^{-6})(5)(0.02) = 100 \\times 10^{-6} + 4.7 \\times 10^{-5} = 1.47 \\times 10^{-4}$。\n$R = 5$。\n特征方程为：\n$(2.3594 \\times 10^{-7})s^2 + (1.47 \\times 10^{-4})s + 5 = 0$。\n根由二次求根公式 $s_{p1,2} = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$ 给出：\n$s_{p1,2} = \\frac{-1.47 \\times 10^{-4} \\pm \\sqrt{(1.47 \\times 10^{-4})^2 - 4(2.3594 \\times 10^{-7})(5)}}{2(2.3594 \\times 10^{-7})}$。\n$s_{p1,2} = \\frac{-1.47 \\times 10^{-4} \\pm \\sqrt{2.1609 \\times 10^{-8} - 4.7188 \\times 10^{-6}}}{4.7188 \\times 10^{-7}}$。\n$s_{p1,2} = \\frac{-1.47 \\times 10^{-4} \\pm \\sqrt{-4.6972 \\times 10^{-6}}}{4.7188 \\times 10^{-7}} = \\frac{-1.47 \\times 10^{-4} \\pm j\\sqrt{4.6972 \\times 10^{-6}}}{4.7188 \\times 10^{-7}}$。\n$s_{p1,2} = \\frac{-1.47 \\times 10^{-4} \\pm j(2.1673 \\times 10^{-3})}{4.7188 \\times 10^{-7}}$。\n$s_{p1,2} \\approx -311.5 \\pm j4593.1\\ \\mathrm{rad/s}$。\n\n**第 3 部分：相位提升计算**\n环路增益为 $L(j\\omega) = K_p G_{vd}(j\\omega)$，其中 $K_p$ 是一个实数正常数。环路增益的相位为 $\\angle L(j\\omega) = \\angle G_{vd}(j\\omega)$，因为 $\\angle K_p = 0$。相位裕度 $\\phi_m$ 定义为 $\\phi_m = 180^{\\circ} + \\angle L(j\\omega_{gc})$。我们需要求出在增益交越频率 $\\omega_{gc} = 3.00 \\times 10^{4}\\ \\mathrm{rad/s}$ 处 $G_{vd}(j\\omega)$ 的相位。\n\n$G_{vd}(j\\omega)$ 的相位是：\n$\\angle G_{vd}(j\\omega) = \\angle(1+j\\omega CR_{\\mathrm{ESR}}) - \\angle(R - \\omega^2LC(R+R_{\\mathrm{ESR}}) + j\\omega(L+CRR_{\\mathrm{ESR}}))$。\n注意因子 $V_g R$ 是一个正实数，对相位的贡献为 $0^{\\circ}$。\n\n在 $\\omega_{gc} = 3 \\times 10^4\\ \\mathrm{rad/s}$ 时：\n分子相位：\n$\\omega_{gc}CR_{\\mathrm{ESR}} = (3 \\times 10^4)(470 \\times 10^{-6})(0.02) = 0.282$。\n$\\angle_{\\mathrm{num}} = \\arctan(0.282) \\approx 15.74^{\\circ}$。\n\n分母相位：\n实部：$R - \\omega_{gc}^2 LC(R+R_{\\mathrm{ESR}}) = 5 - (3 \\times 10^4)^2 (2.3594 \\times 10^{-7}) = 5 - (9 \\times 10^8)(2.3594 \\times 10^{-7}) = 5 - 212.346 = -207.346$。\n虚部：$\\omega_{gc}(L+CRR_{\\mathrm{ESR}}) = (3 \\times 10^4)(1.47 \\times 10^{-4}) = 4.41$。\n$\\angle_{\\mathrm{den}} = \\arctan\\left(\\frac{4.41}{-207.346}\\right)$。由于实部为负，虚部为正，该角位于第二象限。\n$\\angle_{\\mathrm{den}} = 180^{\\circ} + \\arctan(-0.021268) = 180^{\\circ} - 1.218^{\\circ} \\approx 178.78^{\\circ}$。\n\n交越点处系统的相位为：\n$\\angle L(j\\omega_{gc}) = \\angle G_{vd}(j\\omega_{gc}) = \\angle_{\\mathrm{num}} - \\angle_{\\mathrm{den}} = 15.74^{\\circ} - 178.78^{\\circ} = -163.04^{\\circ}$。\n\n现有相位裕度为：\n$\\phi_{m, \\text{current}} = 180^{\\circ} + \\angle L(j\\omega_{gc}) = 180^{\\circ} - 163.04^{\\circ} = 16.96^{\\circ}$。\n\n期望的相位裕度为 $\\phi_m = 60^{\\circ}$。超前补偿器需要提供的相位提升是期望相位裕度与当前相位裕度之差。\n$\\phi_{\\text{boost}} = \\phi_{m} - \\phi_{m, \\text{current}} = 60^{\\circ} - 16.96^{\\circ} = 43.04^{\\circ}$。\n\n四舍五入至三位有效数字，所需的相位提升为 $43.0^{\\circ}$。",
            "answer": "$$\\boxed{43.0}$$"
        },
        {
            "introduction": "并非所有功率变换器的动态特性都是“良性”的；某些拓扑结构（如升压（Boost）变换器）具有内在的控制性能限制。其中最著名的就是右半平面（RHP）零点，它是一种非最小相位特性，其相位响应与普通零点相反，会引入相位滞后而非超前，从而严重限制了闭环系统的可实现带宽。通过本练习，您将从根本上理解为何必须将增益交越频率 $\\omega_{gc}$ 设计得远低于右半平面零点频率 $\\omega_{z,\\text{RHP}}$，并定量地推导出在给定的稳定裕度约束下，最大可行的交越频率。",
            "id": "3856185",
            "problem": "一个工作在连续导通模式的升压变换器由一个单位反馈环路控制，其环路增益是一个补偿器传递函数与功率级控制到输出传递函数的乘积。在感兴趣的频率范围内，该功率级的小信号控制到输出传递函数可以表示为一个最小相位二阶项（由电感-电容储能引起）与一个位于角频率 $\\omega_{z,\\text{RHP}}$ 的非最小相位右半平面（RHP）零点的乘积，即\n$$\nG_{vd}(s)=G_{0}\\,\\frac{1-\\frac{s}{\\omega_{z,\\text{RHP}}}}{1+\\frac{s}{Q\\omega_{0}}+\\left(\\frac{s}{\\omega_{0}}\\right)^{2}},\n$$\n其中 $\\omega_{0}$ 是该最小相位二阶动态特性的无阻尼自然频率，$Q$ 是品质因数。该补偿器是III型补偿器，经过调谐以在预期的增益交越角频率 $\\omega_{gc}$ 处实现大约 $-20$ 分贝/十倍频程的幅值斜率；为了保证对元件噪声和开关纹波的鲁棒性，该补偿器在 $\\omega_{gc}$ 处提供的相位超前被限制在不超过 $+70^{\\circ}$。测量和脉冲宽度调制（PWM）过程在 $\\omega_{gc}$ 处引入了 $20^{\\circ}$ 的额外等效相位滞后（等效于一个小延迟）。\n\n假设 $\\omega_{gc}$ 位于最小相位二阶转折频率之上，因此最小相位部分在 $\\omega_{gc}$ 处贡献大约 $-180^{\\circ}$ 的相位。使用频率响应的基本原理和相位裕度的定义，推导为什么 $\\omega_{gc}$ 必须选择得远低于 $\\omega_{z,\\text{RHP}}$。然后，在给定的约束条件下，计算保证相位裕度 $\\phi_{m}\\geq 45^{\\circ}$ 的最大可行 $\\omega_{gc}$。将你的最终答案表示为关于 $\\omega_{z,\\text{RHP}}$ 的单一闭式解析表达式，对任何三角函数参数使用弧度。最终表达式中不需要进行数值舍入。",
            "solution": "环路增益为 $L(s)=G_{c}(s)G_{vd}(s)H(s)$，其中 $G_{c}(s)$ 是补偿器，$H(s)$ 是传感器。相位裕度 $\\phi_{m}$ 在增益交越角频率 $\\omega_{gc}$ 处定义为\n$$\n\\phi_{m}=\\pi+\\angle L(j\\omega_{gc}),\n$$\n其中角度以弧度为单位。等效地，以度为单位，\n$$\n\\phi_{m}=180^{\\circ}+\\angle L(j\\omega_{gc}).\n$$\n\n我们根据其组成部分来构建在 $\\omega_{gc}$ 处的环路相位：\n1. 最小相位二阶被控对象的贡献。一对实数或复共轭极点产生的相位为\n$$\n\\angle\\left[\\frac{1}{1+\\frac{s}{Q\\omega_{0}}+\\left(\\frac{s}{\\omega_{0}}\\right)^{2}}\\right]\\Bigg|_{s=j\\omega}\n= -\\arctan\\!\\left(\\frac{\\omega}{\\omega_{p1}}\\right) - \\arctan\\!\\left(\\frac{\\omega}{\\omega_{p2}}\\right),\n$$\n其中 $\\omega_{p1}$ 和 $\\omega_{p2}$ 是极点频率。对于 $\\omega\\gtrsim\\omega_{0}$ 和适中的 $Q$ 值，该相位接近 $-180^{\\circ}$。根据题设，$\\omega_{gc}$ 位于二阶转折频率之上，因此我们将在 $\\omega_{gc}$ 处的最小相位贡献近似取为 $-180^{\\circ}$。\n\n2. 补偿器相位超前。一个III型补偿器包含两个超前环节和一个低频极点。每个形式为 $\\left(1+\\frac{s}{\\omega_{z\\ell}}\\right)/\\left(1+\\frac{s}{\\omega_{p\\ell}}\\right)$ 的超前环节贡献的相位为\n$$\n\\phi_{\\ell}(\\omega)=\\arctan\\!\\left(\\frac{\\omega}{\\omega_{z\\ell}}\\right) - \\arctan\\!\\left(\\frac{\\omega}{\\omega_{p\\ell}}\\right),\n$$\n在 $\\omega=\\sqrt{\\omega_{z\\ell}\\,\\omega_{p\\ell}}$ 处达到峰值。有了两个这样的环节，补偿器在 $\\omega_{gc}$ 处的相位提升是有界的；题目约束在 $\\omega_{gc}$ 处的净相位超前不超过 $+70^{\\circ}$。\n\n3. 测量和PWM延迟。$H(s)$ 或调制器中的一个等效延迟 $T_{d}$ 产生 $H(s)\\approx\\exp(-T_{d}s)$，其相位为 $-\\omega T_{d}$。题目指出，这在 $\\omega_{gc}$ 处贡献了 $20^{\\circ}$ 的滞后。\n\n4. 右半平面零点的贡献。位于 $\\omega_{z,\\text{RHP}}$ 的右半平面零点表现为因子 $1-\\frac{s}{\\omega_{z,\\text{RHP}}}$。在虚轴 $s=j\\omega$ 上求值，\n$$\n1-\\frac{j\\omega}{\\omega_{z,\\text{RHP}}}=\\sqrt{1+\\left(\\frac{\\omega}{\\omega_{z,\\text{RHP}}}\\right)^{2}}\\;\\exp\\!\\left(-j\\,\\arctan\\!\\frac{\\omega}{\\omega_{z,\\text{RHP}}}\\right),\n$$\n所以右半平面零点贡献的相位是\n$$\n\\phi_{z,\\text{RHP}}(\\omega) = -\\arctan\\!\\left(\\frac{\\omega}{\\omega_{z,\\text{RHP}}}\\right),\n$$\n随着 $\\omega$ 的增加，其范围从 $0^{\\circ}$ 到 $-90^{\\circ}$。重要的是，这是一个非最小相位特性：它在增加幅值的同时增加了负相位，当 $\\omega_{gc}$ 不远低于 $\\omega_{z,\\text{RHP}}$ 时，这会侵蚀相位裕度。\n\n在 $\\omega=\\omega_{gc}$ 处将这些贡献汇总，总环路相位为\n$$\n\\angle L(j\\omega_{gc})\\approx\\underbrace{(-180^{\\circ})}_{\\text{最小相位被控对象}}+\\underbrace{(+70^{\\circ})}_{\\text{补偿器超前}}+\\underbrace{(-20^{\\circ})}_{\\text{延迟}}+\\underbrace{\\left(-\\arctan\\!\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right)}_{\\text{右半平面零点}}.\n$$\n因此，\n$$\n\\angle L(j\\omega_{gc})\\approx -130^{\\circ} - \\arctan\\!\\left(\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right).\n$$\n\n相位裕度要求 $\\phi_{m}\\geq 45^{\\circ}$，以度表示为，\n$$\n180^{\\circ}+\\angle L(j\\omega_{gc})\\geq 45^{\\circ}\\quad\\Longleftrightarrow\\quad \\angle L(j\\omega_{gc})\\geq -135^{\\circ}.\n$$\n代入环路相位表达式可得\n$$\n-130^{\\circ} - \\arctan\\!\\left(\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right)\\geq -135^{\\circ}.\n$$\n重新整理可得，\n$$\n\\arctan\\!\\left(\\frac{\\omega_{gc}}{\\omega_{z,\\text{RHP}}}\\right)\\leq 5^{\\circ}.\n$$\n由于 $\\arctan(\\cdot)$ 是单调递增的，最大可行的 $\\omega_{gc}$ 在等式成立时出现：\n$$\n\\frac{\\omega_{gc,\\max}}{\\omega_{z,\\text{RHP}}}=\\tan(5^{\\circ}).\n$$\n为了以弧度表示三角函数参数，注意到 $5^{\\circ}=\\frac{5\\pi}{180}=\\frac{\\pi}{36}$。因此，\n$$\n\\omega_{gc,\\max}=\\omega_{z,\\text{RHP}}\\,\\tan\\!\\left(\\frac{\\pi}{36}\\right).\n$$\n\n这个推导也解释了为什么 $\\omega_{gc}$ 必须远低于 $\\omega_{z,\\text{RHP}}$：随着 $\\omega_{gc}$ 接近 $\\omega_{z,\\text{RHP}}$，非最小相位零点会贡献一个接近 $-45^{\\circ}$ 到 $-90^{\\circ}$ 的大的负相位，这是受约束的补偿器相位超前和不可避免的延迟所无法克服的，从而违反了所需的相位裕度。该闭式界限明确地显示了所需的分隔程度。",
            "answer": "$$\\boxed{\\omega_{z,\\text{RHP}}\\tan\\!\\left(\\frac{\\pi}{36}\\right)}$$"
        },
        {
            "introduction": "在现代电力电子技术中，控制器正越来越多地由数字信号处理器实现。然而，将一个在连续时间域中设计好的理想补偿器移植到数字平台并非没有代价。数字实现中固有的零阶保持器（ZOH）效应和计算延迟会给控制环路引入额外的相位滞后，这会直接削减我们在连续时间设计中精心留出的相位裕度。本练习将指导您量化这些延迟所造成的相位损失，并推导出一个关键的设计准则——即采样频率 $f_s$ 与增益交越频率 $\\omega_{gc}$ 之间必须满足的最小比率，以保证数字控制系统的稳定性。",
            "id": "3856161",
            "problem": "一个数字控制的电压模式降压转换器采用连续时间补偿器进行设计，其预期的开环增益交越角频率为 $\\omega_{gc}$，在 $\\omega_{gc}$ 处的连续时间相位裕度为 $\\phi_{ct} = 60^{\\circ}$。当使用数字控制器实现时，环路在脉冲宽度调制接口处包含一个零阶保持器 (ZOH)，并有一个完整的单采样周期计算延迟。ZOH 可由经过充分验证的连续时间保持等效传递函数建模：\n$$G_{\\text{ZOH}}(s) = \\frac{1 - \\exp(-s T_s)}{s T_s},$$\n其中 $T_s$ 是采样周期，$f_s = 1/T_s$ 是采样频率。假设由 $G_{\\text{ZOH}}(j \\omega_{gc})$ 引入的小信号幅值下降可以忽略不计，以至于增益交越点仍保持在 $\\omega_{gc}$，并且在评估相位裕度时角度以度为单位。利用相位裕度的基本定义以及传输延迟对相位的影响，确定当 ZOH 和单采样周期计算延迟都存在时，为确保实际相位裕度 $\\phi_m \\geq 45^{\\circ}$ 所需的最小比率 $f_s / \\omega_{gc}$。\n\n将您的答案表示为比率 $f_s / \\omega_{gc}$ 的一个纯数，将弧度视为无量纲，并将结果四舍五入到四位有效数字。",
            "solution": "对问题陈述进行评估，认定其有效。该问题在科学上基于电力电子数字控制理论的原理，提法得当，目标明确，信息充分，且没有歧义或矛盾。\n\n目标是确定采样频率 $f_s$ 与增益交越角频率 $\\omega_{gc}$ 的最小所需比率，记为 $f_s / \\omega_{gc}$，以在数字控制系统中维持指定的相位裕度。\n\n对于一个开环传递函数为 $L(s)$ 的系统，其相位裕度 $\\phi_m$ 定义在增益交越角频率 $\\omega_{gc}$ 处，在该频率点 $|L(j\\omega_{gc})| = 1$。其定义为：\n$$ \\phi_m = 180^{\\circ} + \\angle L(j\\omega_{gc}) $$\n数字控制系统的总开环传递函数 $L(s)$ 可以建模为连续时间部分 $L_{ct}(s)$、零阶保持器 (ZOH) $G_{\\text{ZOH}}(s)$ 和计算延迟 $G_d(s)$ 的乘积。问题陈述指出，尽管采用了数字实现，增益交越频率仍保持在 $\\omega_{gc}$。\n$$ L(s) = L_{ct}(s) G_{\\text{ZOH}}(s) G_d(s) $$\n由于传递函数的乘法性质，它们的相位相加：\n$$ \\angle L(j\\omega_{gc}) = \\angle L_{ct}(j\\omega_{gc}) + \\angle G_{\\text{ZOH}}(j\\omega_{gc}) + \\angle G_d(j\\omega_{gc}) $$\n给定的连续时间相位裕度 $\\phi_{ct}$ 为 $60^{\\circ}$。这仅基于系统的连续时间部分 $L_{ct}(s)$：\n$$ \\phi_{ct} = 180^{\\circ} + \\angle L_{ct}(j\\omega_{gc}) = 60^{\\circ} $$\n完整数字系统的相位裕度 $\\phi_m$ 可以通过将相位和代入其定义来表示：\n$$ \\phi_m = 180^{\\circ} + \\left( \\angle L_{ct}(j\\omega_{gc}) + \\angle G_{\\text{ZOH}}(j\\omega_{gc}) + \\angle G_d(j\\omega_{gc}) \\right) $$\n$$ \\phi_m = \\left( 180^{\\circ} + \\angle L_{ct}(j\\omega_{gc}) \\right) + \\angle G_{\\text{ZOH}}(j\\omega_{gc}) + \\angle G_d(j\\omega_{gc}) $$\n$$ \\phi_m = \\phi_{ct} + \\angle G_{\\text{ZOH}}(j\\omega_{gc}) + \\angle G_d(j\\omega_{gc}) $$\n此方程表明，最终的相位裕度是原始的连续时间相位裕度减去由 ZOH 和计算延迟引起的相位滞后。\n\n接下来，我们确定数字实现环节的相位贡献。\n单个完整采样周期的计算延迟对应于 $T_s$ 的时间延迟。其传递函数为 $G_d(s) = \\exp(-s T_s)$。在频率 $s = j\\omega_{gc}$ 处，其相位为：\n$$ \\angle G_d(j\\omega_{gc}) = \\angle \\exp(-j\\omega_{gc} T_s) = -\\omega_{gc} T_s \\text{ (弧度)} $$\nZOH 的传递函数给定为 $G_{\\text{ZOH}}(s) = \\frac{1 - \\exp(-s T_s)}{s T_s}$。对于在 $s = j\\omega_{gc}$ 处的正弦分析，这变为：\n$$ G_{\\text{ZOH}}(j\\omega_{gc}) = \\frac{1 - \\exp(-j\\omega_{gc} T_s)}{j\\omega_{gc} T_s} = \\frac{\\exp(-j\\omega_{gc} T_s/2) (\\exp(j\\omega_{gc} T_s/2) - \\exp(-j\\omega_{gc} T_s/2))}{j\\omega_{gc} T_s} $$\n使用欧拉公式 $\\sin(x) = (\\exp(jx)-\\exp(-jx))/(2j)$，我们得到：\n$$ G_{\\text{ZOH}}(j\\omega_{gc}) = \\frac{2j \\sin(\\omega_{gc} T_s/2)}{j\\omega_{gc} T_s} \\exp(-j\\omega_{gc} T_s/2) = \\frac{\\sin(\\omega_{gc} T_s/2)}{\\omega_{gc} T_s/2} \\exp(-j\\omega_{gc} T_s/2) $$\n因此，ZOH 的相位为：\n$$ \\angle G_{\\text{ZOH}}(j\\omega_{gc}) = -\\frac{\\omega_{gc} T_s}{2} \\text{ (弧度)} $$\n由数字实现引入的总相位滞后 $\\Delta\\phi_{lag}$ 是这两个相位贡献的幅值之和：\n$$ \\Delta\\phi_{lag} = | \\angle G_d(j\\omega_{gc}) | + | \\angle G_{\\text{ZOH}}(j\\omega_{gc}) | = \\omega_{gc} T_s + \\frac{\\omega_{gc} T_s}{2} = \\frac{3}{2}\\omega_{gc} T_s \\text{ (弧度)} $$\n问题要求最终的相位裕度 $\\phi_m$ 至少为 $45^{\\circ}$。我们有：\n$$ \\phi_m = \\phi_{ct} - \\Delta\\phi_{lag,deg} \\geq 45^{\\circ} $$\n其中 $\\Delta\\phi_{lag,deg}$ 是以度为单位的相位滞后。要将弧度转换为度，我们乘以 $\\frac{180^{\\circ}}{\\pi}$。\n$$ \\Delta\\phi_{lag,deg} = \\left(\\frac{3}{2}\\omega_{gc} T_s\\right) \\frac{180^{\\circ}}{\\pi} $$\n将这些值和相位滞后的表达式代入不等式：\n$$ 60^{\\circ} - \\left(\\frac{3}{2}\\omega_{gc} T_s\\right) \\frac{180^{\\circ}}{\\pi} \\geq 45^{\\circ} $$\n该不等式设定了最大允许的总相位滞后：\n$$ 60^{\\circ} - 45^{\\circ} \\geq \\left(\\frac{3}{2}\\omega_{gc} T_s\\right) \\frac{180^{\\circ}}{\\pi} $$\n$$ 15^{\\circ} \\geq \\left(\\frac{3}{2}\\omega_{gc} T_s\\right) \\frac{180^{\\circ}}{\\pi} $$\n我们现在求解乘积 $\\omega_{gc} T_s$：\n$$ \\omega_{gc} T_s \\leq 15 \\cdot \\frac{2\\pi}{3 \\cdot 180} = \\frac{30\\pi}{540} = \\frac{\\pi}{18} $$\n问题要求的是最小比率 $f_s / \\omega_{gc}$。我们使用关系式 $T_s = 1/f_s$：\n$$ \\omega_{gc} \\frac{1}{f_s} \\leq \\frac{\\pi}{18} $$\n$$ \\frac{\\omega_{gc}}{f_s} \\leq \\frac{\\pi}{18} $$\n为了找到比率 $f_s / \\omega_{gc}$，我们对两边取倒数，这会反转不等号的方向：\n$$ \\frac{f_s}{\\omega_{gc}} \\geq \\frac{18}{\\pi} $$\n因此，所需的最小比率为 $\\frac{18}{\\pi}$。现在我们计算其数值，并按要求四舍五入到四位有效数字。\n$$ \\frac{f_s}{\\omega_{gc}} \\geq \\frac{18}{3.14159265...} \\approx 5.72957795... $$\n将该值四舍五入到四位有效数字得到 $5.730$。",
            "answer": "$$\\boxed{5.730}$$"
        }
    ]
}
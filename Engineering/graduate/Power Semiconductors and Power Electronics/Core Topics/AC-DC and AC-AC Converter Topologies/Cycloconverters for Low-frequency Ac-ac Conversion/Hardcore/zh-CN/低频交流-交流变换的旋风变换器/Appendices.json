{
    "hands_on_practices": [
        {
            "introduction": "在深入研究复杂的交-交变频器之前，我们必须首先掌握其基本构建单元：六脉冲晶闸管桥。本练习旨在探究在理想条件下（即负载电流连续且不间断）单个晶闸管的导通特性。通过推导每个晶闸管的导通时间间隔，您将巩固对电网换相在连续电流模式下如何工作的理解，这是分析和控制变流器输出电压的基础。",
            "id": "3832424",
            "problem": "一个由晶闸管（SCR）构成的三相电网换相六脉冲桥，在用于低频交-交变换的交-交变频模块中用作正组。该桥由一个理想三相电源供电，其相电压为 $v_{a}(t)=V_{m}\\sin(\\omega_{s}t)$、$v_{b}(t)=V_{m}\\sin(\\omega_{s}t-\\frac{2\\pi}{3})$ 和 $v_{c}(t)=V_{m}\\sin(\\omega_{s}t+\\frac{2\\pi}{3})$，其中 $\\omega_{s}=2\\pi f_{s}$，$f_{s}$ 为电源频率。负载为一个串联电阻-电感（R–L）电路，其电流严格连续（即瞬时负载电流从不降为零）。电源电感可忽略不计，换相重叠被忽略，且晶闸管为理想器件。\n\n每个晶闸管以一个可控的触发角 $\\alpha$（以电弧度为单位）被触发，该角度从其对应的相-中性点电压开始对该器件施加正向偏置的瞬间开始计算。六个器件的门极信号在每个电周期内均匀间隔 $60^{\\circ}$（即 $\\pi/3$ 弧度），这与六脉冲运行方式一致。\n\n仅从正弦电源特性和理想电网换相下负载电流严格连续的条件出发，推导单个供应周期内六个晶闸管各自的导通时间间隔（以秒为单位），并将其表示为触发角 $\\alpha$ 和电源频率 $f_{s}$ 的函数。将最终答案表示为一个行矩阵 $\\big[\\Delta t_{T_{1}}\\,\\,\\Delta t_{T_{2}}\\,\\,\\Delta t_{T_{3}}\\,\\,\\Delta t_{T_{4}}\\,\\,\\Delta t_{T_{5}}\\,\\,\\Delta t_{T_{6}}\\big]$，单位为秒，其中 $\\Delta t_{T_{k}}$ 是第 $k$ 个晶闸管的导通时间间隔。无需进行数值四舍五入。导通时间间隔使用秒作为单位，角度使用弧度。",
            "solution": "该桥由一个平衡三相正弦电源供电，其相电压为 $v_{a}(t)=V_{m}\\sin(\\omega_{s}t)$、$v_{b}(t)=V_{m}\\sin(\\omega_{s}t-\\frac{2\\pi}{3})$ 和 $v_{c}(t)=V_{m}\\sin(\\omega_{s}t+\\frac{2\\pi}{3})$，其中 $\\omega_{s}=2\\pi f_{s}$。在一个为严格连续电流负载供电、且电源电感可忽略（因此换相重叠可忽略）的三相六脉冲电网换相桥中，以下经过充分验证的规律决定了导通过程：\n\n1. 在任何时刻，恰好有两个晶闸管导通：一个来自上组（阳极连接到某一相，朝向正极端子），一个来自下组（阴极连接到某一相，朝向负极端子），从而在两相之间通过负载建立一条电流路径。\n\n2. 在电流连续的情况下，一旦一个晶闸管被导通（在其阳极到阴极为正向偏置且施加门极信号时被触发），它将保持导通，直到电流自然地转移（电网换相）到同一组中的下一个晶闸管。这种情况发生在下一个器件被触发且其相电压变为适合接管导通的极性时。\n\n3. 在一个平衡的正弦系统中，产生最大瞬时线电压输出的导通器件对以 $60^{\\circ}$（即 $\\pi/3$ 弧度）的固定间隔进行切换。这是因为三个线电压是正弦波，彼此之间相移 $60^{\\circ}$，并且它们的相等/顺序交叉点每 $60^{\\circ}$ 出现一次。\n\n为了应用这些原理，我们考虑六脉冲桥中器件的标准编号：三个上组器件 $T_{1}$、$T_{2}$、$T_{3}$ 分别与 $a$、$b$、$c$ 相相关联，三个下组器件 $T_{4}$、$T_{5}$、$T_{6}$ 同样与 $a$、$b$、$c$ 相相关联，但连接在返回路径上。触发顺序在电周期内均匀间隔 $\\pi/3$ 弧度。设每个器件的触发角为 $\\alpha$（以弧度为单位），从其相-中性点电压开始对其施加正向偏置的瞬间开始测量。\n\n由于负载电流是严格连续的，当上组中的一个器件 $T_{k}$ 在某个电角度被导通时，它会一直导通，直到序列中的下一个上组器件被导通并接管电流路径。上组器件每隔 $\\pi/3$ 弧度被依次触发。然而，每个上组器件在关断前会为两个这样的 $60^{\\circ}$ 区间提供电流，这产生了一个 $2\\times\\frac{\\pi}{3}=\\frac{2\\pi}{3}$ 弧度（即 $120^{\\circ}$）的总导通角。同样的论证也适用于下组器件。\n\n每个器件 $120^{\\circ}$ 的导通角是以下因素的直接结果：\n- 电流连续（在自然换相前不会熄灭），\n- 理想的电网换相（由于电源电感可忽略，换相在下一个触发事件发生时立即完成，没有重叠），\n- 三相正弦系统的周期性，其中导通状态的转换每 $\\pi/3$ 弧度发生一次。\n\n重要的是要注意，在这些理想条件下，触发角 $\\alpha$ 会改变每个器件开始导通的瞬间，但不会改变导通的持续时间。每个器件的导通持续时间固定为 $120^{\\circ}$，因为同一组的接下来两次触发事件分别在 $\\pi/3$ 和 $2\\pi/3$ 弧度之后发生，其中第二次触发事件终止了原始器件的导通。\n\n要将导通角转换为时间，使用正弦波的角度和时间之间的关系：\n$$\n\\theta=\\omega_{s} t, \\quad \\text{其中} \\quad \\omega_{s}=2\\pi f_{s}。\n$$\n$\\frac{2\\pi}{3}$ 弧度的导通角对应的时间间隔为\n$$\n\\Delta t=\\frac{\\frac{2\\pi}{3}}{\\omega_{s}}=\\frac{\\frac{2\\pi}{3}}{2\\pi f_{s}}=\\frac{1}{3 f_{s}}。\n$$\n在所述假设下，此结果与 $\\alpha$ 无关。\n\n因此，在每个电源周期内，六个晶闸管中的每一个都导通相同的时间，即 $\\Delta t=\\frac{1}{3 f_{s}}$ 秒。将器件标记为 $T_{1}$ 到 $T_{6}$，其导通时间间隔构成行矩阵\n$$\n\\big[\\Delta t_{T_{1}}\\,\\,\\Delta t_{T_{2}}\\,\\,\\Delta t_{T_{3}}\\,\\,\\Delta t_{T_{4}}\\,\\,\\Delta t_{T_{5}}\\,\\,\\Delta t_{T_{6}}\\big]\n=\n\\big[\\frac{1}{3 f_{s}}\\,\\,\\frac{1}{3 f_{s}}\\,\\,\\frac{1}{3 f_{s}}\\,\\,\\frac{1}{3 f_{s}}\\,\\,\\frac{1}{3 f_{s}}\\,\\,\\frac{1}{3 f_{s}}\\big]。\n$$",
            "answer": "$$\\boxed{\\begin{pmatrix}\\frac{1}{3 f_{s}}  \\frac{1}{3 f_{s}}  \\frac{1}{3 f_{s}}  \\frac{1}{3 f_{s}}  \\frac{1}{3 f_{s}}  \\frac{1}{3 f_{s}}\\end{pmatrix}}$$"
        },
        {
            "introduction": "一个设计优良的交-交变频器，其控制策略必须能够灵活适应不同性质的负载。本实践将引导您探究针对纯电阻负载和更常见的阻感（$R-L$）负载时，控制策略存在的关键差异。您将通过分析发现，为何对于阻感负载，变流器的门极触发逻辑必须依据电流极性而非电压极性，并定量计算由此产生的电流滞后相位角，这是电力系统中的一个核心参数。",
            "id": "3832379",
            "problem": "一个单相无环流交-交变频器由反并联的全波电网换相晶闸管桥构成。输入源为正弦波，其瞬时电压为 $v_{s}(t) = V_{s} \\sin(\\omega_{s} t)$，角频率为 $\\omega_{s}$，其中 $\\omega_{s} \\gg \\omega_{o}$。该交-交变频器被指令使用余弦交越调制法产生一个低频输出参考 $v_{o}^{\\star}(t) = V_{o} \\sin(\\omega_{o} t)$，其角频率为 $\\omega_{o}$，幅值为 $V_{o}$：在每个电源半周期内，通过改变工作桥的触发角 $\\alpha(t)$，使其在该半周期内的平均值等于半周期中心点的瞬时参考值 $v_{o}^{\\star}(t)$。假设晶闸管为理想瞬时换相，换相重叠可忽略不计，并且任何在 $\\omega_{s}$ 谐波处的高频纹波均被负载或外部滤波所抑制，因此可观测的低频输出包络等于指令参考 $v_{o}^{\\star}(t)$。\n\n考虑两种负载情况：\n- 情况1：一个电阻为 $R$ 的纯阻性负载。\n- 情况2：一个电阻为 $R$、电感为 $L$ 的串联阻感负载。\n\n从基本定律和定义出发，包括 Kirchhoff 电压定律以及电阻和电感的本构关系，并仅使用从源波形积分推导出的、关于电网换相整流器的成熟结论，完成以下任务：\n\n1. 对于阻性负载，定性解释该交-交变频器的门极驱动策略如何确保适当的桥组导通，从而使输出包络在无环流的情况下跟踪 $v_{o}^{\\star}(t)$，并推导所得的可观测低频波形 $v_{o}(t)$ 和 $i_{o}(t)$。\n\n2. 对于阻感负载，定性解释必须如何调整门极驱动策略以适应负载电流的连续性和滞后电流，并推导稳态下所得的可观测低频波形 $v_{o}(t)$ 和 $i_{o}(t)$。\n\n在给定假设下，您可以将可观测的低频输出电压理想化为 $v_{o}(t) = V_{o} \\sin(\\omega_{o} t)$，但您必须从第一性原理为每种负载推导相应的 $i_{o}(t)$。\n\n最后，确定稳态下阻感负载的 $v_{o}(t)$ 和 $i_{o}(t)$ 之间的位移角 $\\varphi$，以弧度表示，并以 $R$、$L$ 和 $\\omega_{o}$ 的闭式表达式给出。最终答案只提供此位移角。题目未提供数值；保留符号参数。最终答案必须是单一的解析表达式。如果您想使用近似，请不要这样做；给出精确表达式。角度以弧度表示。",
            "solution": "题目陈述经评估有效。其科学基础扎根于电力电子学和电路理论的原理，问题提出得当，信息充分，目标明确，并使用客观、正式的语言进行阐述。所提供的假设是分析此类系统基本行为的标准理想化方法。\n\n该问题要求分析一个单相无环流交-交变频器在两种不同负载条件下的行为。交-交变频器通过使用相控整流器，从一个较高频率的源合成一个低频交流电压。在此配置中，使用了两组反并联的全波桥，即一个正组变流器（P-变流器）和一个负组变流器（N-变流器）。P-变流器产生可控的正电压，N-变流器产生可控的负电压。其核心控制原理是调制工作桥中晶闸管的触发角 $\\alpha$，使输出电压的低频分量 $v_{o}(t)$ 跟踪一个正弦参考 $v_{o}^{\\star}(t) = V_{o} \\sin(\\omega_{o} t)$。题目已给定高频分量被滤除，因此我们可以假设可观测的输出电压为 $v_{o}(t) = v_{o}^{\\star}(t)$。\n\n1. 情况1：纯阻性负载\n\n对于电阻为 $R$ 的纯阻性负载，根据欧姆定律 $v_{o}(t) = R i_{o}(t)$，输出电流 $i_{o}(t)$ 与输出电压 $v_{o}(t)$ 成正比。因此，输出电流始终与输出电压同相。\n\n门极驱动策略的定性解释：\n在无环流交-交变频器中，任何时刻只有一个变流器桥组（P组或N组）在工作，以防止电源两端发生短路。选择激活哪个桥组取决于所需的电流方向。\n- 当参考电压 $v_{o}^{\\star}(t)$ 为正时（对于 $0  \\omega_{o} t  \\pi$），输出电压 $v_{o}(t)$ 必须为正。对于阻性负载，正电压意味着正电流，$i_{o}(t) > 0$。P-变流器能够提供正电流，因此它被导通，而N-变流器被阻断。P-变流器的触发角 $\\alpha(t)$ 被调制（通常在 $0 \\le \\alpha \\le \\frac{\\pi}{2}$ 范围内），以产生所需的瞬时平均电压。\n- 当参考电压 $v_{o}^{\\star}(t)$ 为负时（对于 $\\pi  \\omega_{o} t  2\\pi$），输出电压 $v_{o}(t)$ 必须为负。这在阻性负载中需要一个负电流，$i_{o}(t)  0$。N-变流器被设计为提供负电流（或吸收正电流），因此它被导通，而P-变流器被阻断。N-变流器的触发角被调制以跟踪负电压参考。\n由于电流和电压同相，它们同时过零。在 $v_{o}(t)$ 的每个过零点，负载电流自然降至零，这允许在没有环流风险的情况下，实现从一个桥组到另一个桥组的安全自然换相。因此，门极驱动逻辑可以简化为仅依赖于电压参考 $v_{o}^{\\star}(t)$ 的极性。\n\n低频波形的推导：\n根据可观测的低频输出电压完美跟踪参考的假设：\n$$ v_{o}(t) = V_{o} \\sin(\\omega_{o} t) $$\n使用电阻的本构关系（欧姆定律）$v_{o}(t) = R i_{o}(t)$，我们可以推导出输出电流 $i_{o}(t)$：\n$$ i_{o}(t) = \\frac{v_{o}(t)}{R} $$\n代入 $v_{o}(t)$ 的表达式：\n$$ i_{o}(t) = \\frac{V_{o}}{R} \\sin(\\omega_{o} t) $$\n$v_{o}(t)$ 和 $i_{o}(t)$ 的波形是正弦波且同相。\n\n2. 情况2：串联阻感 (RL) 负载\n\n对于电阻为 $R$、电感为 $L$ 的串联RL负载，电压和电流之间的关系由一个微分方程描述。电感导致电流滞后于电压。\n\n调整后的门极驱动策略的定性解释：\n电流和电压之间的相位滞后引入了一个显著的复杂问题。基于电压参考极性的简单门极驱动策略不再可行。例如，当输出电压 $v_{o}(t)$ 从正变为负时（在 $\\omega_{o} t = \\pi$ 处），储存在电感中的能量将导致电流 $i_{o}(t)$ 在一段时间内保持为正。\n- 如果在电压过零点禁用P-变流器并启用N-变流器，那么持续的正向负载电流将没有通路，从而导致危险的电压尖峰。或者，如果两者都导通，则会发生线间短路。\n- 因此，门极驱动逻辑必须调整为根据输出电流 $i_{o}(t)$ 的方向来选择工作桥组，而不是根据输出电压 $v_{o}(t)$ 的极性。规则如下：\n    - 如果 $i_{o}(t) > 0$，必须导通P-变流器。\n    - 如果 $i_{o}(t)  0$，必须导通N-变流器。\n- 考虑 $v_{o}(t)  0$ 但 $i_{o}(t) > 0$ 的区间（恰在电压过零之后）。P-变流器保持工作状态以传导正电流。然而，为了产生负电压，变流器必须工作在*逆变模式*。这通过将其触发角 $\\alpha(t)$ 设置为大于 $\\frac{\\pi}{2}$ 来实现。在此模式下，变流器将功率从负载回馈给交流源，这是迫使电感电流减小至零所必需的。\n- 对称地，当 $v_{o}(t) > 0$ 但 $i_{o}(t)  0$ 时，N-变流器保持工作状态并运行于其逆变模式，以便在传导负电流的同时产生正电压。\n该策略确保了电流的连续性并防止了环流，使得交-交变频器能够为具有任意功率因数的负载供电。\n\n低频波形和位移角的推导：\n我们再次从理想化的输出电压开始：\n$$ v_{o}(t) = V_{o} \\sin(\\omega_{o} t) $$\n根据应用于串联RL负载的 Kirchhoff 电压定律 (KVL)，输出电压是电阻和电感上电压降之和：\n$$ v_{o}(t) = R i_{o}(t) + L \\frac{d i_{o}(t)}{dt} $$\n代入 $v_{o}(t)$ 的表达式，我们得到关于稳态电流 $i_{o}(t)$ 的一阶线性常微分方程：\n$$ V_{o} \\sin(\\omega_{o} t) = R i_{o}(t) + L \\frac{d i_{o}(t)}{dt} $$\n为求稳态解，我们使用相量法。在频域中，时域函数 $A \\sin(\\omega t + \\theta)$ 由相量 $\\mathbf{A} = A e^{j\\theta}$ 表示。微分运算 $\\frac{d}{dt}$ 对应于乘以 $j\\omega_{o}$。该微分方程变为一个关于相量的代数方程：\n$$ \\mathbf{V_{o}} = R \\mathbf{I_{o}} + j\\omega_{o} L \\mathbf{I_{o}} $$\n其中 $\\mathbf{V_{o}}$ 和 $\\mathbf{I_{o}}$ 分别是电压和电流的相量。提出 $\\mathbf{I_{o}}$ 因子：\n$$ \\mathbf{V_{o}} = (R + j\\omega_{o} L) \\mathbf{I_{o}} $$\n项 $Z = R + j\\omega_{o} L$ 是负载的复阻抗。电流和电压相量之间的关系是 $\\mathbf{I_{o}} = \\frac{\\mathbf{V_{o}}}{Z}$。\n位移角 $\\varphi$ 是电压和电流之间的相位差。它由阻抗 $Z$ 的辐角给出：\n$$ \\varphi = \\arg(Z) = \\arg(R + j\\omega_{o} L) $$\n复数 $x + jy$ 的辐角是 $\\arctan(\\frac{y}{x})$。因此，位移角为：\n$$ \\varphi = \\arctan\\left(\\frac{\\omega_{o} L}{R}\\right) $$\n这个角 $\\varphi$ 表示电流 $i_{o}(t)$ 滞后于电压 $v_{o}(t)$ 的量。稳态输出电流波形为：\n$$ i_{o}(t) = I_{o} \\sin(\\omega_{o} t - \\varphi) $$\n其中幅值为 $I_{o} = \\frac{V_{o}}{|Z|} = \\frac{V_{o}}{\\sqrt{R^2 + (\\omega_{o} L)^2}}$，相位滞后为 $\\varphi = \\arctan\\left(\\frac{\\omega_{o} L}{R}\\right)$。\n\n题目要求给出阻感负载的位移角 $\\varphi$。根据以上推导，这就是需要提供的最终表达式。",
            "answer": "$$\\boxed{\\arctan\\left(\\frac{\\omega_{o} L}{R}\\right)}$$"
        },
        {
            "introduction": "现代交-交变频器的核心在于其控制算法，它能将一个期望的输出电压波形精确地转化为一系列晶闸管的触发信号。本练习要求您动手实现一种广泛应用的控制方法——余弦交越控制算法。通过编写该算法，您将获得离散时间控制实现的宝贵实践经验，学会如何将连续的参考信号映射为变流器中每个器件的离散触发角序列，从而将理论知识应用于实际工程问题。",
            "id": "3832442",
            "problem": "给定一个平衡三相交流 (AC) 电源和一个理想的周波变换器，该变换器由两个相同的三相六脉冲电网换相晶闸管桥构成：一个正组和一个负组。每个桥有六个晶闸管。该周波变换器通过根据余弦交越控制调制晶闸管的触发延迟来执行低频 AC-AC 变换，以合成所需的低频输出波形。\n\n假设以下理想化和标准条件，这些条件在此类变换器的分析中被广泛使用：\n- 三相交流输入是平衡、正弦的，其线-线方均根 (RMS) 电压为 $V_{LL,\\mathrm{rms}}$，频率为 $f_i$。设输入角频率为 $\\omega_i = 2\\pi f_i$。\n- 负载电流是连续的（无电流中断），换相重叠可忽略不计，且器件是理想的。\n- 周波变换器的输出参考是一个单相正弦电压 $v_o(t) = V_o \\sin(\\omega_o t + \\phi)$，其幅值为 $V_o$，低频为 $f_o$，角频率为 $\\omega_o = 2\\pi f_o$，相位为 $\\phi$。\n- 比率 $f_i/f_o$ 是一个正整数，因此一个低频周期包含整数个输入周期。\n\n在余弦交越控制下，瞬时期望输出电压通过以下方式在一组离散的输入锁定时刻进行跟踪：根据期望参考值的符号选择工作桥组，并计算满足余弦控制特性的触发延迟。\n\n从第一性原理和经过充分检验的事实出发，推导一个算法，用于在余弦交越控制下，计算一个低频周期内每个桥组（正组和负组）中六个晶闸管中每一个的离散触发延迟角集合。您的推导必须从正弦三相电压和六脉冲桥的分段整流导通开始，并且必须仅使用基本定律和公认结论。具体而言：\n- 表示来自平衡正弦电源的三相线-线电压 $\\{v_{ab}(t), v_{bc}(t), v_{ca}(t)\\}$。\n- 将理想六脉冲桥的输出建模为由导通顺序选择的幅值最大的线电压段，其触发延迟 $\\alpha$ 是相对于每个器件的自然换相点而言的。\n- 在电流连续的情况下，求得平均桥路输出电压 $V_d(\\alpha)$ 作为 $\\alpha$ 的函数。\n- 解释余弦交越控制如何在离散时刻设置 $\\alpha$，以在幅值上匹配缓慢变化的期望参考值 $v_o(t)$，并用符号选择工作桥组。\n- 定义并使用离散的输入锁定采样时刻集合 $t_n$（$n=0,1,2,\\dots,N-1$），其中 $N$ 是一个六脉冲桥在一个低频周期内的晶闸管触发机会总数。\n- 将每个采样时刻 $t_n$ 映射到其各自组中的特定晶闸管器件索引。\n\n您的程序必须实现所推导的算法以：\n- 计算正组和负组中每个晶闸管器件在一个完整的低频周期内的离散触发延迟角 $\\alpha$（以弧度为单位）。\n- 使用采样时刻 $t_n = n\\frac{\\pi}{3}/\\omega_i$（$n=0,1,\\dots,N-1$），其中 $N = 6\\frac{f_i}{f_o}$，对应于每个输入周期内的六个自然换相机会。\n- 在每个采样时刻，根据 $v_o(t_n)$ 的符号选择工作桥组：如果 $v_o(t_n) \\ge 0$，使用正组；否则，使用负组。\n- 通过余弦控制特性计算触发延迟的幅值，并且如果 $\\lvert v_o(t_n)\\rvert$ 超过桥路的最大平均能力，则在物理极限处使延迟饱和。\n- 将每个计算出的延迟分配给工作组内正确的晶闸管器件索引 $d = 1 + (n \\bmod 6)$。\n\n角度单位说明：所有触发延迟均以弧度报告。将每个计算出的延迟四舍五入到 $6$ 位小数。\n\n物理单位说明：输入电压单位为伏特，频率单位为赫兹，时间单位为秒。\n\n最终输出格式：您的程序应生成单行输出，其中包含一个方括号括起来的、以逗号分隔的结果列表。每个结果对应一个测试用例，并表示为一个嵌套列表，其中包含两个顶层元素：第一个是正组，第二个是负组。每个组元素是一个包含六个子列表的列表，每个子列表按索引顺序 1 到 6 对应一个晶闸管器件，并包含该器件在低频周期内的触发延迟序列。例如：$[[[...],[...],[...],[...],[...],[...]],[...[...]]]$，不含任何空格。您的程序必须严格打印这一单行。\n\n测试套件和参数：\n- 案例 1（正常情况）：$V_{LL,\\mathrm{rms}} = 400$ V, $f_i = 50$ Hz, $f_o = 5$ Hz, $V_o = 300$ V, $\\phi = 0$ rad。\n- 案例 2（接近最大调制）：$V_{LL,\\mathrm{rms}} = 400$ V, $f_i = 50$ Hz, $f_o = 5$ Hz, $V_o = 540$ V, $\\phi = 0$ rad。\n- 案例 3（不同电网和低幅值）：$V_{LL,\\mathrm{rms}} = 480$ V, $f_i = 60$ Hz, $f_o = 6$ Hz, $V_o = 50$ V, $\\phi = 0$ rad。\n- 案例 4（边界，零幅值）：$V_{LL,\\mathrm{rms}} = 400$ V, $f_i = 50$ Hz, $f_o = 10$ Hz, $V_o = 0$ V, $\\phi = 0$ rad。\n\n答案规格：\n- 对于每个测试用例，输出一个嵌套列表，结构为 $[\\text{positive\\_group},\\text{negative\\_group}]$，其中每个组是 $[\\text{dev1},\\text{dev2},\\dots,\\text{dev6}]$，每个 $\\text{dev}k$ 是器件 $k$ 在低频周期内的触发延迟列表（以弧度为单位），四舍五入到六位小数。\n- 最终输出是包含所有测试用例结果的单行列表，采用所述的嵌套格式，不含空格。",
            "solution": "该问题陈述是电力电子学领域一个有效且适定的问题。其科学基础在于使用电网换相周波变换器进行 AC-AC 变换的原理，并且没有任何使其无效的缺陷。因此，我们可以进行形式化推导和求解。\n\n### 步骤 1：三相系统的基本关系\n\n给定一个平衡三相交流电源，其线-线方均根电压为 $V_{LL,\\mathrm{rms}}$，角频率为 $\\omega_i$。线电压峰值 $V_{LL,peak}$ 由下式给出：\n$$ V_{LL,peak} = \\sqrt{2} V_{LL,\\mathrm{rms}} $$\n\n### 步骤 2：理想六脉冲桥的输出电压\n\n该周波变换器由两个反并联的三相六脉冲晶闸管桥组成。每个桥的功能相当于一个可控整流器。对于一个在连续负载电流和可忽略换相重叠条件下运行的六脉冲桥，其平均直流输出电压 $V_d$ 作为触发延迟角 $\\alpha$ 的函数，由公认的公式给出：\n$$ V_d(\\alpha) = V_{d0} \\cos(\\alpha) $$\n其中 $\\alpha$ 是从每个晶闸管的自然换相点测量的延迟角。理论上的最大平均直流电压 $V_{d0}$（在 $\\alpha=0$ 时获得）为：\n$$ V_{d0} = \\frac{3 V_{LL,peak}}{\\pi} = \\frac{3\\sqrt{2} V_{LL,\\mathrm{rms}}}{\\pi} $$\n这个电压 $V_{d0}$ 代表了变换器能产生的最大平均电压幅值。触发角 $\\alpha$ 可以在 $0$（全整流）到 $\\pi$（全逆变）之间变化。\n\n### 步骤 3：余弦交越控制原理\n\n周波变换器通过快速调制晶闸管桥的触发角来合成一个低频交流输出电压 $v_o(t)$。期望的输出是一个正弦波：\n$$ v_o(t) = V_o \\sin(\\omega_o t + \\phi) $$\n其中 $V_o$ 是期望的输出幅值，$\\omega_o = 2\\pi f_o$ 是输出角频率，$\\phi$ 是相位偏移。\n\n余弦交越控制的目标是使工作桥在短时间间隔内产生的平均电压等于期望的瞬时电压 $v_o(t)$。两个桥，即正组 (P) 和负组 (N)，根据期望电压 $v_o(t)$ 的符号被启用。\n- 如果 $v_o(t) \\ge 0$，正组工作。其输出电压为正。我们必须设置其触发角 $\\alpha_p$，使其平均输出与参考值匹配：\n  $$ v_o(t) = V_d(\\alpha_p) = V_{d0} \\cos(\\alpha_p) $$\n- 如果 $v_o(t)  0$，负组工作。该桥反并联连接，因此其自然输出电压相对于负载为负。我们设置其触发角 $\\alpha_n$，使其平均输出与参考值匹配：\n  $$ v_o(t) = -V_d(\\alpha_n) = -V_{d0} \\cos(\\alpha_n) $$\n\n从这两个条件中，我们可以推导出关于触发角幅值的单一控制律。\n对于正组（$v_o(t) \\ge 0$）：\n$$ \\cos(\\alpha_p) = \\frac{v_o(t)}{V_{d0}} \\implies \\alpha_p = \\arccos\\left(\\frac{v_o(t)}{V_{d0}}\\right) $$\n对于负组（$v_o(t)  0$）：\n$$ \\cos(\\alpha_n) = -\\frac{v_o(t)}{V_{d0}} = \\frac{|v_o(t)|}{V_{d0}} \\implies \\alpha_n = \\arccos\\left(\\frac{|v_o(t)|}{V_{d0}}\\right) $$\n将这些结合起来，在任何时刻 $t$，工作组的触发角由下式给出：\n$$ \\alpha(t) = \\arccos\\left(\\frac{|v_o(t)|}{V_{d0}}\\right) $$\narccosine 函数的自变量 $|v_o(t)|/V_{d0}$ 不能超过 $1$。如果期望电压幅值 $|v_o(t)|$ 超过了变换器的能力 $V_{d0}$，就会发生饱和。控制律必须修改以处理这种情况，方法是将自变量削顶至 $1$。令 $u(t) = |v_o(t)|/V_{d0}$。\n$$ \\alpha(t) = \\arccos(\\min(u(t), 1.0)) $$\n如果发生饱和（即 $u(t) \\ge 1$），触发角变为 $\\alpha = \\arccos(1) = 0$，这正确地指令变换器产生其可能的最大输出幅值。\n\n### 步骤 4：离散化与算法实现\n\n该控制律在与晶闸管触发机会相对应的离散时间点应用。对于一个六脉冲桥，在每个频率为 $f_i$ 的输入周期内有 $6$ 个这样的机会。它们以输入频率的 $\\pi/3$ 弧度为间隔发生。离散采样时刻 $t_n$ 由下式给出：\n$$ t_n = n \\frac{\\pi/3}{\\omega_i} = n \\frac{\\pi/3}{2\\pi f_i} = \\frac{n}{6f_i} $$\n计算在一个完整的低频周期 $T_o = 1/f_o$ 内进行。采样时刻的总数 $N$ 是每个输出周期内的输入脉冲数：\n$$ N = 6 \\times \\frac{T_o}{T_i} = 6 \\frac{f_i}{f_o} $$\n问题陈述保证了比率 $f_i/f_o$ 是一个整数，所以 $N$ 也是一个整数。循环对 $n = 0, 1, 2, \\dots, N-1$ 运行。\n\n在时刻 $t_n$ 触发的特定晶闸管由一个循环序列确定。器件索引 $d$（从 $1$ 到 $6$）由下式给出：\n$$ d = 1 + (n \\pmod 6) $$\n\n完整的算法如下：\n1.  给定 $V_{LL,\\mathrm{rms}}$、$f_i$、$f_o$、$V_o$、$\\phi$。\n2.  计算常数：\n    -   $\\omega_o = 2\\pi f_o$\n    -   $V_{d0} = (3\\sqrt{2} V_{LL,\\mathrm{rms}})/\\pi$\n    -   $N = 6 (f_i/f_o)$\n3.  为正组的 $6$ 个晶闸管和负组的 $6$ 个晶闸管初始化空的触发角列表。`positive_group_angles = [[] for _ in range(6)]`, `negative_group_angles = [[] for _ in range(6)]`。\n4.  对 $n$ 从 $0$ 到 $N-1$ 进行循环：\n    a.  计算采样时间：$t_n = n / (6f_i)$。\n    b.  计算瞬时参考电压：$v_{ref} = V_o \\sin(\\omega_o t_n + \\phi)$。\n    c.  确定工作桥组：\n        -   如果 $v_{ref} \\ge 0$，正组工作。\n        -   如果 $v_{ref}  0$，负组工作。\n    d.  为控制律计算归一化电压幅值：$u = |v_{ref}| / V_{d0}$。\n    e.  使控制信号饱和：$u_{sat} = \\min(u, 1.0)$。\n    f.  计算触发延迟角：$\\alpha_n = \\arccos(u_{sat})$。\n    g.  确定晶闸管器件索引：$d = 1 + (n \\pmod 6)$。列表索引是 $d-1$。\n    h.  存储计算出的角度：\n        -   如果正组工作，将 $\\alpha_n$ 追加到 `positive_group_angles[d-1]`。\n        -   如果负组工作，将 $\\alpha_n$ 追加到 `negative_group_angles[d-1]`。\n5.  循环结束后，这些列表包含了每个器件的触发角序列。按要求将每个角度四舍五入到 $6$ 位小数。最终结果是一个嵌套列表，包含两个组填充了角度的列表。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Main function to solve the cycloconverter firing angle problem for all test cases.\n    \"\"\"\n    \n    # Define the test cases from the problem statement.\n    test_cases = [\n        # (V_LL_rms, f_i, f_o, V_o, phi)\n        (400.0, 50.0, 5.0, 300.0, 0.0),\n        (400.0, 50.0, 5.0, 540.0, 0.0),\n        (480.0, 60.0, 6.0, 50.0, 0.0),\n        (400.0, 50.0, 10.0, 0.0, 0.0),\n    ]\n\n    results = []\n    for case in test_cases:\n        result = calculate_firing_angles(*case)\n        results.append(result)\n\n    # The final print must be a single line with no spaces.\n    # str(results) will include spaces, so we remove them.\n    final_output = str(results).replace(\" \", \"\")\n    print(final_output)\n\ndef calculate_firing_angles(V_LL_rms, f_i, f_o, V_o, phi):\n    \"\"\"\n    Calculates the firing delay angles for a three-phase cycloconverter.\n\n    Args:\n        V_LL_rms (float): RMS line-to-line input voltage in volts.\n        f_i (float): Input frequency in hertz.\n        f_o (float): Output frequency in hertz.\n        V_o (float): Desired peak output voltage in volts.\n        phi (float): Phase of the desired output voltage in radians.\n\n    Returns:\n        list: A nested list structure containing the firing angles for positive\n              and negative group thyristors.\n              Format: [positive_group_angles, negative_group_angles]\n              where each group_angles is a list of 6 lists (one per device).\n    \"\"\"\n    # Step 1: Calculate key constants\n    omega_o = 2 * np.pi * f_o\n    V_d0 = (3 * np.sqrt(2) * V_LL_rms) / np.pi\n    \n    # Ratio f_i/f_o is guaranteed to be an integer\n    freq_ratio = int(f_i / f_o)\n    N = 6 * freq_ratio\n\n    # Step 2: Initialize data structures for storing firing angles\n    # 6 thyristors per group\n    positive_group_angles = [[] for _ in range(6)]\n    negative_group_angles = [[] for _ in range(6)]\n\n    # Step 3: Loop through all firing instants in one low-frequency cycle\n    for n in range(N):\n        # a. Calculate the sampling time\n        t_n = n / (6 * f_i)\n\n        # b. Calculate instantaneous reference voltage\n        v_ref = V_o * np.sin(omega_o * t_n + phi)\n\n        # c. Calculate normalized voltage and saturate if necessary\n        # Handle division by zero for V_d0 if V_LL_rms is 0 (though not in test cases)\n        if V_d0 == 0:\n            u = float('inf') if abs(v_ref) > 0 else 0.0\n        else:\n            u = abs(v_ref) / V_d0\n        \n        u_sat = min(u, 1.0)\n        \n        # d. Calculate the firing delay angle using arccosine\n        alpha = np.arccos(u_sat)\n        \n        # e. Determine the thyristor device index (1 to 6)\n        device_idx = 1 + (n % 6)\n        \n        # f. Assign the calculated angle to the correct group and device\n        if v_ref >= 0:\n            # Positive group is active\n            positive_group_angles[device_idx - 1].append(round(alpha, 6))\n        else:\n            # Negative group is active\n            negative_group_angles[device_idx - 1].append(round(alpha, 6))\n            \n    return [positive_group_angles, negative_group_angles]\n\n# Execute the solution\nsolve()\n\n```"
        }
    ]
}
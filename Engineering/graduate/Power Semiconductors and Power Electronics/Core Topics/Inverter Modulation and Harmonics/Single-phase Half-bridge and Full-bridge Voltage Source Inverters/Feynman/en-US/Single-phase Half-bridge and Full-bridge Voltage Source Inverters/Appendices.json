{
    "hands_on_practices": [
        {
            "introduction": "A primary function of a voltage source inverter is to synthesize a high-quality sinusoidal output voltage from a DC source. This is typically achieved by using Sinusoidal Pulse-Width Modulation (SPWM) to control the switching, followed by a low-pass filter to attenuate high-frequency harmonics. This exercise  provides hands-on practice in deriving the analytical expressions for the fundamental output voltage and the worst-case voltage ripple, which are essential skills for designing the output filter and establishing a baseline to validate complex simulation models.",
            "id": "3878722",
            "problem": "A single-phase full-bridge voltage source inverter employing Sinusoidal Pulse-Width Modulation (SPWM) is used to synthesize a low-frequency sinusoidal voltage across a resistive load through a second-order low-pass filter composed of a series inductor and a shunt capacitor. The full-bridge operates in bipolar SPWM, where two legs are driven such that the output node across the load alternates between $+V_{\\mathrm{dc}}$ and $-V_{\\mathrm{dc}}$ depending on the sign of the comparison between a sinusoidal reference and a high-frequency triangular carrier. The low-pass filter consists of a series inductor of inductance $L$ followed by a shunt capacitor of capacitance $C$ connected in parallel with a resistive load of resistance $R$. The sinusoidal reference has frequency $f_1$ and the triangular carrier has switching frequency $f_s$. The modulation index $m$ is defined as the ratio of the peak of the sinusoidal reference to the peak of the triangular carrier. The direct current (DC) bus voltage is $V_{\\mathrm{dc}}$.\n\nSpecify a mathematically sound cross-check for a simulation setup of this inverter with the given filter and load by designing an analytical computation of:\n1. The fundamental (first harmonic) root-mean-square (RMS) amplitude of the load voltage at frequency $f_1$.\n2. The worst-case peak-to-peak switching ripple voltage across the load due to the high-frequency switching around the zero crossing of the fundamental, where the filter sees the largest pulsating inductor voltage.\n\nThe derivation must begin only from fundamental laws and core definitions: the relationship between inductance and voltage as $v_L = L \\, \\mathrm{d}i_L/\\mathrm{d}t$, the relationship between capacitance and current as $i_C = C \\, \\mathrm{d}v_C/\\mathrm{d}t$, linear time-invariant series-parallel impedance composition, and the definition of SPWM switching functions for a full-bridge in bipolar operation as sign comparisons between the reference and the carrier. Do not use shortcut formulas not derived from these bases. The analysis must treat the filter as linear and the SPWM source waveform as a piecewise-constant two-level process with average equal to the modulating sinusoid over the switching period for the fundamental component. The ripple analysis must capture the worst-case switching ripple near the fundamental zero-crossing using the inductor-capacitor relationships to compute the triangular inductor current ripple and the resulting capacitor voltage ripple over one switching period.\n\nYour program must implement the analytical computations for the following test suite. For each case, compute two numbers:\n- The load fundamental voltage RMS in volts, rounded to six decimal places.\n- The worst-case peak-to-peak ripple voltage in volts, rounded to six decimal places.\n\nUse the following test cases, with all quantities expressed in the specified units:\n- Case $1$: $V_{\\mathrm{dc}} = 400\\,\\mathrm{V}$, $m = 0.80$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 10{,}000\\,\\mathrm{Hz}$, $L = 5\\,\\mathrm{mH}$, $C = 20\\,\\mathrm{\\mu F}$, $R = 20\\,\\Omega$.\n- Case $2$: $V_{\\mathrm{dc}} = 450\\,\\mathrm{V}$, $m = 0.95$, $f_1 = 60\\,\\mathrm{Hz}$, $f_s = 20{,}000\\,\\mathrm{Hz}$, $L = 3\\,\\mathrm{mH}$, $C = 10\\,\\mathrm{\\mu F}$, $R = 10\\,\\Omega$.\n- Case $3$: $V_{\\mathrm{dc}} = 300\\,\\mathrm{V}$, $m = 0.10$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 5{,}000\\,\\mathrm{Hz}$, $L = 10\\,\\mathrm{mH}$, $C = 50\\,\\mathrm{\\mu F}$, $R = 100\\,\\Omega$.\n- Case $4$: $V_{\\mathrm{dc}} = 350\\,\\mathrm{V}$, $m = 0.70$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 5{,}000\\,\\mathrm{Hz}$, $L = 1\\,\\mathrm{mH}$, $C = 5\\,\\mathrm{\\mu F}$, $R = 30\\,\\Omega$.\n- Case $5$: $V_{\\mathrm{dc}} = 380\\,\\mathrm{V}$, $m = 0.90$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 100{,}000\\,\\mathrm{Hz}$, $L = 8\\,\\mathrm{mH}$, $C = 100\\,\\mathrm{\\mu F}$, $R = 15\\,\\Omega$.\n\nYour program must produce a single line of output containing the results as a comma-separated list enclosed in square brackets. Each test case’s result must be a two-element list of floats in the order $[\\text{fundamental\\_RMS\\_voltage}, \\text{ripple\\_peak\\_to\\_peak\\_voltage}]$, for example $[[x_1,y_1],[x_2,y_2],\\dots]$. Angles, if needed, must be treated in radians, though here only frequencies in hertz are provided. All outputs must be expressed in volts ($\\mathrm{V}$) and rounded to six decimal places.",
            "solution": "The problem statement is assessed to be **valid**. It is scientifically grounded, well-posed, and objective. All necessary parameters for a single-phase full-bridge SPWM inverter with an LC-R load are provided. The problem asks for the analytical calculation of two standard performance metrics: the RMS value of the fundamental component of the load voltage and the worst-case peak-to-peak switching ripple voltage across the load. The constraints on the derivation, requiring it to start from fundamental principles of circuit theory and SPWM, are clear and appropriate for a rigorous engineering analysis. The provided component and operating values are physically realistic. The problem conforms to all criteria for a valid scientific problem.\n\nThe solution proceeds in two parts as requested.\n\n**1. Fundamental RMS Load Voltage ($V_{load,1,RMS}$)**\n\nThe analysis begins with the output voltage of the full-bridge inverter, $v_{inv}(t)$. Under bipolar Sinusoidal Pulse-Width Modulation (SPWM), the inverter's output voltage is switched between $+V_{\\mathrm{dc}}$ and $-V_{\\mathrm{dc}}$. The fundamental component of this switched waveform, when averaged over a switching period, has the same sinusoidal shape as the reference signal. For a sinusoidal reference with a modulation index $m$, the fundamental component of the inverter's output voltage, $v_{inv,1}(t)$, is given by:\n$$v_{inv,1}(t) = m V_{\\mathrm{dc}} \\sin(\\omega_1 t)$$\nwhere $\\omega_1 = 2\\pi f_1$ is the angular frequency of the fundamental.\n\nThe peak amplitude of this fundamental voltage is $V_{inv,1,peak} = m V_{\\mathrm{dc}}$. The corresponding root-mean-square (RMS) value is:\n$$V_{inv,1,RMS} = \\frac{V_{inv,1,peak}}{\\sqrt{2}} = \\frac{m V_{\\mathrm{dc}}}{\\sqrt{2}}$$\nThis voltage serves as the input to the second-order LC low-pass filter. The load voltage, $V_{load,1}$, is the voltage across the parallel combination of the capacitor $C$ and the resistor $R$. We use frequency-domain analysis to determine the filter's effect at the fundamental frequency $\\omega_1$.\n\nThe impedances of the filter components at $\\omega_1$ are:\n- Inductor: $Z_L = j\\omega_1 L$\n- Capacitor: $Z_C = \\frac{1}{j\\omega_1 C}$\n- Resistor: $Z_R = R$\n\nThe filter forms a voltage divider. The impedance of the parallel capacitor-resistor branch is:\n$$Z_{CR} = \\frac{Z_C Z_R}{Z_C + Z_R} = \\frac{\\frac{1}{j\\omega_1 C} R}{\\frac{1}{j\\omega_1 C} + R} = \\frac{R}{1 + j\\omega_1 RC}$$\nThe transfer function $H(j\\omega_1)$ of the filter is the ratio of the load voltage to the inverter output voltage:\n$$H(j\\omega_1) = \\frac{V_{load,1}}{V_{inv,1}} = \\frac{Z_{CR}}{Z_L + Z_{CR}}$$\nSubstituting the expressions for the impedances:\n$$H(j\\omega_1) = \\frac{\\frac{1}{\\frac{1}{R} + j\\omega_1 C}}{j\\omega_1 L + \\frac{1}{\\frac{1}{R} + j\\omega_1 C}} = \\frac{1}{j\\omega_1 L \\left(\\frac{1}{R} + j\\omega_1 C\\right) + 1} = \\frac{1}{1 - \\omega_1^2 LC + j\\frac{\\omega_1 L}{R}}$$\nThe magnitude of this transfer function, $|H(j\\omega_1)|$, determines the ratio of the amplitudes of the output and input voltages:\n$$|H(j\\omega_1)| = \\frac{1}{\\sqrt{\\left(1 - \\omega_1^2 LC\\right)^2 + \\left(\\frac{\\omega_1 L}{R}\\right)^2}}$$\nThe RMS value of the fundamental load voltage is therefore the RMS input voltage multiplied by the magnitude of the transfer function:\n$$V_{load,1,RMS} = V_{inv,1,RMS} \\cdot |H(j\\omega_1)| = \\frac{m V_{\\mathrm{dc}}}{\\sqrt{2}} \\frac{1}{\\sqrt{\\left(1 - (2\\pi f_1)^2 LC\\right)^2 + \\left(\\frac{2\\pi f_1 L}{R}\\right)^2}}$$\n\n**2. Worst-Case Peak-to-Peak Switching Ripple Voltage ($\\Delta V_{load,pp}$)**\n\nThe worst-case switching ripple on the load voltage occurs when the fundamental component of the output voltage is near its zero-crossing. At these instants, the load voltage $v_{load}(t)$ is approximately zero. The voltage across the inductor $v_L(t)$ is given by Kirchoff's Voltage Law: $v_L(t) = v_{inv}(t) - v_{load}(t)$. Since $v_{load}(t) \\approx 0$, the full inverter output voltage $v_{inv}(t)$ appears across the inductor, i.e., $v_L(t) \\approx v_{inv}(t)$.\n\nNear the fundamental's zero-crossing, the sinusoidal reference signal is near zero, resulting in a duty cycle close to $50\\%$. The inverter's output voltage $v_{inv}(t)$ is a square wave at the switching frequency $f_s = 1/T_s$, alternating between $+V_{\\mathrm{dc}}$ for a duration of approximately $T_s/2$ and $-V_{\\mathrm{dc}}$ for $T_s/2$.\n\nAccording to the inductor voltage-current relationship, $v_L = L \\frac{di_L}{dt}$. The change in inductor current is $\\Delta i_L = \\frac{1}{L} \\int v_L dt$. Over the first half of the switching period, the current ramps up due to $v_L \\approx +V_{\\mathrm{dc}}$. The total pk-pk inductor current ripple is determined by the change over this half-period:\n$$\\Delta i_{L,pp} = \\frac{1}{L} \\int_0^{T_s/2} V_{\\mathrm{dc}} dt = \\frac{V_{\\mathrm{dc}} T_s}{2L} = \\frac{V_{\\mathrm{dc}}}{2Lf_s}$$\nThis high-frequency triangular current ripple flows from the inductor into the parallel combination of the capacitor $C$ and resistor $R$. At the high switching frequency $f_s$, the impedance of the capacitor, $|Z_C| = 1/(2\\pi f_s C)$, is typically much smaller than the resistance $R$. Therefore, it is a valid approximation to assume that almost all the ripple current flows into the capacitor, i.e., $i_{C,ripple}(t) \\approx i_{L,ripple}(t)$.\n\nThe voltage across the capacitor (which is the load voltage) is given by $v_C(t) = \\frac{1}{C} \\int i_C(t) dt$. The peak-to-peak voltage ripple, $\\Delta V_{load,pp}$, is the change in capacitor voltage between its minimum and maximum values. These extrema occur when the capacitor current ripple crosses zero. The ripple current $i_{C,ripple}(t)$ is a triangular wave. The change in voltage from its minimum to its maximum is found by integrating the current over the interval where it is positive. This interval has a duration of $T_s/2$ (e.g., from $t=T_s/4$ to $t=3T_s/4$), and the current waveform is a triangle with base $T_s/2$ and height equal to the peak ripple current, $\\Delta i_{L,pp}/2$.\n\nThe charge, $\\Delta Q$, accumulated during this positive current half-cycle is the area of this triangle:\n$$\\Delta Q = \\frac{1}{2} \\times \\text{base} \\times \\text{height} = \\frac{1}{2} \\times \\frac{T_s}{2} \\times \\frac{\\Delta i_{L,pp}}{2} = \\frac{T_s \\Delta i_{L,pp}}{8}$$\nThe peak-to-peak ripple voltage is this accumulated charge divided by the capacitance:\n$$\\Delta V_{load,pp} = \\frac{\\Delta Q}{C} = \\frac{T_s \\Delta i_{L,pp}}{8C}$$\nSubstituting the expressions for $T_s$ and $\\Delta i_{L,pp}$:\n$$\\Delta V_{load,pp} = \\frac{(1/f_s)}{8C} \\left(\\frac{V_{\\mathrm{dc}}}{2Lf_s}\\right) = \\frac{V_{\\mathrm{dc}}}{16LCf_s^2}$$\n\nThese two derived formulas will be implemented to solve for the given test cases.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the fundamental RMS load voltage and worst-case peak-to-peak\n    ripple voltage for a single-phase full-bridge inverter with an LC-R load.\n    \"\"\"\n    # Test cases: (V_dc, m, f1, fs, L, C, R)\n    # Units: V, unitless, Hz, Hz, H, F, Ohm\n    test_cases = [\n        (400.0, 0.80, 50.0, 10000.0, 5e-3, 20e-6, 20.0),\n        (450.0, 0.95, 60.0, 20000.0, 3e-3, 10e-6, 10.0),\n        (300.0, 0.10, 50.0, 5000.0, 10e-3, 50e-6, 100.0),\n        (350.0, 0.70, 50.0, 5000.0, 1e-3, 5e-6, 30.0),\n        (380.0, 0.90, 50.0, 100000.0, 8e-3, 100e-6, 15.0),\n    ]\n\n    results = []\n\n    for case in test_cases:\n        V_dc, m, f1, fs, L, C, R = case\n\n        # Part 1: Fundamental RMS Load Voltage Calculation\n        omega1 = 2 * np.pi * f1\n        \n        # Calculate the magnitude of the filter's transfer function at f1\n        h_mag_denom_term1 = 1 - (omega1**2 * L * C)\n        h_mag_denom_term2 = (omega1 * L) / R\n        h_mag = 1 / np.sqrt(h_mag_denom_term1**2 + h_mag_denom_term2**2)\n\n        # Calculate the RMS value of the fundamental component of inverter output voltage\n        v_inv_1_rms = (m * V_dc) / np.sqrt(2)\n\n        # Calculate the final RMS load voltage for the fundamental component\n        v_load_1_rms = v_inv_1_rms * h_mag\n\n        # Part 2: Worst-Case Peak-to-Peak Ripple Voltage Calculation\n        v_ripple_pp = V_dc / (16 * L * C * fs**2)\n        \n        # Round results to six decimal places\n        v_load_1_rms_rounded = round(v_load_1_rms, 6)\n        v_ripple_pp_rounded = round(v_ripple_pp, 6)\n\n        results.append([v_load_1_rms_rounded, v_ripple_pp_rounded])\n        \n    # Format the final output string\n    # e.g., [[x1,y1],[x2,y2],...]\n    output_str = \"[\" + \",\".join(map(str, results)) + \"]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "While theoretical models often assume ideal switches, real-world inverter legs require a 'dead-time'—a small delay between turning one switch off and the complementary switch on—to prevent catastrophic shoot-through currents. This exercise  delves into this critical implementation detail, guiding you through a worst-case timing analysis based on component datasheet parameters to calculate the minimum safe dead-time. You will also see how this necessary timing protection, along with minimum pulse width constraints, directly limits the maximum achievable switching frequency, $f_{\\mathrm{s,max}}$, of the inverter.",
            "id": "3878631",
            "problem": "A single-phase full-bridge Voltage Source Inverter (VSI) is gated by a center-aligned digital Pulse Width Modulation (PWM) generator producing complementary gate signals for each leg with inserted non-overlap (dead-time). The modulation is bipolar Sinusoidal PWM (SPWM) with modulation index limited to $m_{\\max} = 0.8$. Device and driver dynamics are characterized by worst-case bounds. The gate driver propagation delays are $t_{\\mathrm{pd,H}} \\in [70,90]\\ \\text{ns}$ for the high-side and $t_{\\mathrm{pd,L}} \\in [55,65]\\ \\text{ns}$ for the low-side. The high-side Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) has turn-off delay $t_{\\mathrm{doff,H}} = 70\\ \\text{ns}$ and fall time $t_{\\mathrm{f,H}} = 50\\ \\text{ns}$. The low-side MOSFET has turn-on delay $t_{\\mathrm{don,L}} = 60\\ \\text{ns}$ and rise time $t_{\\mathrm{r,L}} = 40\\ \\text{ns}$. The antiparallel diode reverse-recovery worst-case time is $t_{\\mathrm{rr}} = 120\\ \\text{ns}$. A bounded additional timing uncertainty (aggregate jitter and mismatch) of $\\Delta t_{\\mathrm{j}} = 20\\ \\text{ns}$ and a conservative safety margin of $t_{\\mathrm{s}} = 20\\ \\text{ns}$ must be included. The maximum allowed commanded dead-time is $t_{\\mathrm{dead,max}} = 300\\ \\text{ns}$. To ensure meaningful conduction and avoid ineffective pulses, the minimum commanded ON-time for any device is constrained to $t_{\\mathrm{on,min}} = 300\\ \\text{ns}$. The digital PWM generator runs at clock frequency $f_{\\mathrm{clk}} = 100\\ \\text{MHz}$, giving a time quantum $\\Delta t = 10\\ \\text{ns}$; all scheduled timing quantities must be integer multiples of $\\Delta t$.\n\nAssume cross-conduction is prohibited by requiring that at the device channel level the ON intervals of complementary switches do not overlap, and that the turn-on of the incoming device occurs only after the outgoing device’s channel has ceased conduction and its diode has completed reverse recovery. Starting from these physical timing definitions, derive the minimum commanded dead-time $t_{\\mathrm{dead}}$ that guarantees non-overlap under the stated worst-case bounds and quantization, while respecting $t_{\\mathrm{dead}} \\leq t_{\\mathrm{dead,max}}$. Then, using the fundamental relationship between leg duty ratio in bipolar SPWM and the instantaneous reference, derive a lower bound on the switching period $T_{\\mathrm{s}}$ that guarantees every device ON interval across all instants for $|m| \\leq m_{\\max}$ is at least $t_{\\mathrm{on,min}}$ when dead-time is inserted. From this, compute the maximum achievable switching frequency $f_{\\mathrm{s,max}} = 1/T_{\\mathrm{s,min}}$.\n\nExpress the final frequency in $\\text{kHz}$ and round your answer to three significant figures. The final answer must be a single real number.",
            "solution": "The problem statement is assessed to be valid. It is a well-posed, scientifically-grounded problem in the field of power electronics. All necessary data and constraints are provided, and they are internally consistent and physically realistic. The problem requires a rigorous worst-case timing analysis to determine operating limits, which is a standard and meaningful engineering task.\n\nThe solution is divided into two main parts: first, the calculation of the minimum required commanded dead-time, $t_{\\mathrm{dead}}$; and second, the calculation of the maximum switching frequency, $f_{\\mathrm{s,max}}$, based on the minimum pulse-width constraint.\n\n**Part 1: Minimum Commanded Dead-Time ($t_{\\mathrm{dead}}$)**\n\nThe goal is to prevent cross-conduction (shoot-through) in a leg of the inverter. This occurs if the incoming device turns on before the outgoing device is completely off. The problem specifies a transition from the high-side (H) MOSFET turning off to the low-side (L) MOSFET turning on. To guarantee safe operation under all specified variations, we must perform a worst-case analysis.\n\nLet $t_{\\mathrm{cmd,off,H}}$ be the time when the controller commands the H-side device off, and $t_{\\mathrm{cmd,on,L}}$ be the time it commands the L-side device on. The commanded dead-time is $t_{\\mathrm{dead}} = t_{\\mathrm{cmd,on,L}} - t_{\\mathrm{cmd,off,H}}$.\n\nThe shoot-through protection must account for several factors:\n$1$. The total time required for the outgoing device (H-side) to turn off, under the slowest conditions.\n$2$. The total time required for the incoming device (L-side) to turn on, under the fastest conditions.\n$3$. The reverse-recovery time of the outgoing device's antiparallel diode, $t_{\\mathrm{rr}}$.\n$4$. Additional jitter and safety margins, $\\Delta t_{\\mathrm{j}}$ and $t_{\\mathrm{s}}$.\n\nThe latest instant at which the H-side MOSFET channel ceases conduction, relative to its turn-off command, is the sum of the maximum high-side gate driver propagation delay and the device's turn-off time (delay + fall time).\n$$t_{\\mathrm{off,H,latest}} = t_{\\mathrm{pd,H,max}} + t_{\\mathrm{doff,H}} + t_{\\mathrm{f,H}}$$\n\nThe earliest instant at which the L-side MOSFET channel begins to conduct, relative to its turn-on command, is the sum of the minimum low-side gate driver propagation delay and the device's turn-on delay.\n$$t_{\\mathrm{on,L,earliest}} = t_{\\mathrm{pd,L,min}} + t_{\\mathrm{don,L}}$$\n\nTo prevent channel-to-channel conduction, the commanded dead-time must be large enough to ensure that the earliest L-side turn-on occurs after the latest H-side turn-off. The problem statement further requires this interval to be sufficient to accommodate diode reverse recovery, jitter, and a safety margin. The required minimum dead-time is therefore the time difference between the slowest turn-off and fastest turn-on, plus these additional times.\n\n$$t_{\\mathrm{dead}} \\ge (t_{\\mathrm{off,H,latest}} - t_{\\mathrm{on,L,earliest}}) + t_{\\mathrm{rr}} + \\Delta t_{\\mathrm{j}} + t_{\\mathrm{s}}$$\n$$t_{\\mathrm{dead}} \\ge (t_{\\mathrm{pd,H,max}} + t_{\\mathrm{doff,H}} + t_{\\mathrm{f,H}}) - (t_{\\mathrm{pd,L,min}} + t_{\\mathrm{don,L}}) + t_{\\mathrm{rr}} + \\Delta t_{\\mathrm{j}} + t_{\\mathrm{s}}$$\n\nWe substitute the given worst-case values:\n- $t_{\\mathrm{pd,H,max}} = 90\\ \\text{ns}$\n- $t_{\\mathrm{doff,H}} = 70\\ \\text{ns}$\n- $t_{\\mathrm{f,H}} = 50\\ \\text{ns}$\n- $t_{\\mathrm{pd,L,min}} = 55\\ \\text{ns}$\n- $t_{\\mathrm{don,L}} = 60\\ \\text{ns}$\n- $t_{\\mathrm{rr}} = 120\\ \\text{ns}$\n- $\\Delta t_{\\mathrm{j}} = 20\\ \\text{ns}$\n- $t_{\\mathrm{s}} = 20\\ \\text{ns}$\n\n$$t_{\\mathrm{dead,min\\_calc}} = (90 + 70 + 50)\\ \\text{ns} - (55 + 60)\\ \\text{ns} + 120\\ \\text{ns} + 20\\ \\text{ns} + 20\\ \\text{ns}$$\n$$t_{\\mathrm{dead,min\\_calc}} = 210\\ \\text{ns} - 115\\ \\text{ns} + 160\\ \\text{ns}$$\n$$t_{\\mathrm{dead,min\\_calc}} = 95\\ \\text{ns} + 160\\ \\text{ns} = 255\\ \\text{ns}$$\n\nThe PWM generator has a time quantum of $\\Delta t = 10\\ \\text{ns}$. All scheduled quantities must be integer multiples of $\\Delta t$. Therefore, we must choose the smallest multiple of $10\\ \\text{ns}$ that is greater than or equal to $t_{\\mathrm{dead,min\\_calc}}$.\n$$t_{\\mathrm{dead}} = \\left\\lceil \\frac{255\\ \\text{ns}}{10\\ \\text{ns}} \\right\\rceil \\times 10\\ \\text{ns} = \\lceil 25.5 \\rceil \\times 10\\ \\text{ns} = 26 \\times 10\\ \\text{ns} = 260\\ \\text{ns}$$\n\nThis value must be checked against the maximum allowed dead-time: $t_{\\mathrm{dead}} = 260\\ \\text{ns} \\le t_{\\mathrm{dead,max}} = 300\\ \\text{ns}$. The condition is satisfied.\nThe commanded dead-time to be used is $t_{\\mathrm{dead}} = 260\\ \\text{ns}$.\n\n**Part 2: Maximum Switching Frequency ($f_{\\mathrm{s,max}}$)**\n\nThe maximum switching frequency is limited by the minimum required ON-time for any device. For bipolar sinusoidal PWM, the instantaneous duty ratio, $d(t)$, of a leg is given by:\n$$d(t) = \\frac{1}{2}(1 + v_{\\mathrm{ref}}(t))$$\nwhere $v_{\\mathrm{ref}}(t) = m \\sin(\\omega t)$ is the normalized reference voltage.\nThe modulation index is limited to $|m| \\le m_{\\max} = 0.8$. The duty ratio $d(t)$ thus varies over the range $[d_{\\min}, d_{\\max}]$.\n\nThe minimum duty ratio occurs when $v_{\\mathrm{ref}}(t) = -m_{\\max}$:\n$$d_{\\min} = \\frac{1}{2}(1 - m_{\\max}) = \\frac{1}{2}(1 - 0.8) = \\frac{1}{2}(0.2) = 0.1$$\nThe maximum duty ratio occurs when $v_{\\mathrm{ref}}(t) = +m_{\\max}$:\n$$d_{\\max} = \\frac{1}{2}(1 + m_{\\max}) = \\frac{1}{2}(1 + 0.8) = \\frac{1}{2}(1.8) = 0.9$$\n\nThe commanded ON-time for the high-side switch is $d T_{\\mathrm{s}}$ and for the low-side switch is $(1-d)T_{\\mathrm{s}}$, where $T_{\\mathrm{s}}$ is the switching period. Due to dead-time insertion, the actual gate-on-time for each device is reduced. In bipolar PWM, a dead-time interval $t_{\\mathrm{dead}}$ is inserted at each transition, so the effective ON-time for a switch is reduced by $t_{\\mathrm{dead}}$ in each switching period.\n$$t_{\\mathrm{ON,H,eff}} = d T_{\\mathrm{s}} - t_{\\mathrm{dead}}$$\n$$t_{\\mathrm{ON,L,eff}} = (1-d) T_{\\mathrm{s}} - t_{\\mathrm{dead}}$$\n\nThe problem states that the minimum commanded ON-time for any device must be at least $t_{\\mathrm{on,min}} = 300\\ \\text{ns}$. We must satisfy this constraint for all operating conditions. The worst-case (shortest) ON-times occur at theduty-cycle extrema.\nFor the high-side switch: $t_{\\mathrm{ON,H,eff,min}} = d_{\\min} T_{\\mathrm{s}} - t_{\\mathrm{dead}}$.\nFor the low-side switch: $t_{\\mathrm{ON,L,eff,min}} = (1 - d_{\\max}) T_{\\mathrm{s}} - t_{\\mathrm{dead}}$.\nSince $d_{\\min} = 1 - d_{\\max} = 0.1$, both conditions are identical. We must satisfy:\n$$d_{\\min} T_{\\mathrm{s}} - t_{\\mathrm{dead}} \\ge t_{\\mathrm{on,min}}$$\n\nWe can now solve for the minimum switching period, $T_{\\mathrm{s,min}}$, that satisfies this inequality.\n$$d_{\\min} T_{\\mathrm{s,min}} = t_{\\mathrm{on,min}} + t_{\\mathrm{dead}}$$\n$$T_{\\mathrm{s,min}} = \\frac{t_{\\mathrm{on,min}} + t_{\\mathrm{dead}}}{d_{\\min}}$$\n\nUsing the previously calculated $t_{\\mathrm{dead}} = 260\\ \\text{ns}$ and the given values:\n$$T_{\\mathrm{s,min}} = \\frac{300\\ \\text{ns} + 260\\ \\text{ns}}{0.1} = \\frac{560\\ \\text{ns}}{0.1} = 5600\\ \\text{ns} = 5.6 \\times 10^{-6}\\ \\text{s}$$\n\nThe maximum achievable switching frequency, $f_{\\mathrm{s,max}}$, is the reciprocal of the minimum switching period.\n$$f_{\\mathrm{s,max}} = \\frac{1}{T_{\\mathrm{s,min}}} = \\frac{1}{5.6 \\times 10^{-6}\\ \\text{s}} \\approx 178571.4\\ \\text{Hz}$$\n\nThe final answer is required in units of kHz, rounded to three significant figures.\n$$f_{\\mathrm{s,max}} \\approx 178.5714\\ \\text{kHz} \\approx 179\\ \\text{kHz}$$",
            "answer": "$$\\boxed{179}$$"
        },
        {
            "introduction": "A robust power converter must not only perform well under normal conditions but also fail safely under fault conditions. This practice  shifts the focus to a critical failure mode: a short-circuit at the inverter's output. By analyzing the current rise rate limited by stray inductance and calculating the energy absorbed by the devices before protection circuitry can react, you will gain insight into the dynamics of fault events and the principles behind designing effective overcurrent protection.",
            "id": "3878678",
            "problem": "A single-phase full-bridge voltage source inverter (VSI) with a direct current (DC) link voltage of $V_{\\text{dc}}$ drives a load that has developed a solid short-circuit at its terminals. At time $t=0$, a diagonal pair of insulated-gate switches in the full-bridge is commanded to turn on to apply the positive pole of the DC bus to the shorted load. Due to gate-drive skew, the second switch in the diagonal does not reach conduction until a delay $t_{\\text{skew}}$ after the first, so no loop current flows before $t_{\\text{skew}}$. The total current loop stray inductance, dominated by busbars and device packaging, is $L_{s}$. Each conducting device can be modeled, over the short pre-protection interval, as having a constant on-state voltage drop $V_{\\text{on}}$ that is independent of current in this range. Ignore any additional resistive elements in the loop.\n\nOvercurrent protection monitors the bridge current and trips when the current reaches a threshold $I_{\\text{trip}}$. The measurement and comparator chain imposes a delay $t_{\\text{cmp}}$, and the gate driver adds a further propagation delay $t_{\\text{drv}}$, so that the diagonal devices continue to conduct until $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$, where $t_{\\text{trip}}$ is the time elapsed between the onset of current at $t_{\\text{skew}}$ and the instant when the current first equals $I_{\\text{trip}}$. Assume that the switching transitions are fast compared to the inductive current ramp so that during the conduction interval the loop voltage across the stray inductance is $V_{\\text{dc}} - 2 V_{\\text{on}}$ and the current increases linearly.\n\nStarting from the fundamental relations $v_{L}(t) = L_{s}\\,\\frac{di}{dt}$ and $p(t) = v(t)\\,i(t)$, perform the following:\n\n1. Derive the expression for the current rise rate $\\frac{di}{dt}$ after $t_{\\text{skew}}$ and the time $t_{\\text{trip}}$ to reach $I_{\\text{trip}}$.\n2. Using these, derive an expression for the total energy dissipated in the two conducting diagonal devices before the protection action begins to turn them off, defined as\n$$\nE_{\\text{dev}} \\equiv \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}} \\big(2 V_{\\text{on}}\\big)\\, i(t)\\, dt,\n$$\nand then evaluate it numerically.\n\nUse the following parameter values, all given as constants for this problem:\n$V_{\\text{dc}} = 400\\,\\text{V}$, $L_{s} = 2.0\\,\\mu\\text{H}$, $V_{\\text{on}} = 2.0\\,\\text{V}$ (per device), $t_{\\text{skew}} = 150\\,\\text{ns}$, $I_{\\text{trip}} = 150\\,\\text{A}$, $t_{\\text{cmp}} = 200\\,\\text{ns}$, and $t_{\\text{drv}} = 100\\,\\text{ns}$.\n\nProvide the final numerical value of $E_{\\text{dev}}$ in joules. Round your answer to four significant figures. Express the final energy in $\\text{J}$.",
            "solution": "The problem statement is evaluated for validity prior to attempting a solution.\n\n### Step 1: Extract Givens\n- System: Single-phase full-bridge voltage source inverter (VSI).\n- DC link voltage: $V_{\\text{dc}}$.\n- Load: Solid short-circuit.\n- Event initiation: At $t=0$, a diagonal pair of switches is commanded on.\n- Gate-drive skew: No current flows before $t_{\\text{skew}}$.\n- Total loop stray inductance: $L_{s}$.\n- On-state voltage drop per device: $V_{\\text{on}}$ (constant).\n- Other resistances: Ignored.\n- Overcurrent protection trip threshold: $I_{\\text{trip}}$.\n- Comparator delay: $t_{\\text{cmp}}$.\n- Gate driver propagation delay: $t_{\\text{drv}}$.\n- Conduction interval end time: $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$.\n- Definition of $t_{\\text{trip}}$: Time from current onset ($t_{\\text{skew}}$) until current equals $I_{\\text{trip}}$.\n- Assumption: Voltage across stray inductance is $V_{\\text{dc}} - 2 V_{\\text{on}}$ during conduction, implying a linear current ramp.\n- Fundamental relations: $v_{L}(t) = L_{s}\\,\\frac{di}{dt}$ and $p(t) = v(t)\\,i(t)$.\n- Energy to be calculated: $E_{\\text{dev}} \\equiv \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}} \\big(2 V_{\\text{on}}\\big)\\, i(t)\\, dt$.\n- Numerical values:\n  - $V_{\\text{dc}} = 400\\,\\text{V}$\n  - $L_{s} = 2.0\\,\\mu\\text{H} = 2.0 \\times 10^{-6}\\,\\text{H}$\n  - $V_{\\text{on}} = 2.0\\,\\text{V}$\n  - $t_{\\text{skew}} = 150\\,\\text{ns} = 150 \\times 10^{-9}\\,\\text{s}$\n  - $I_{\\text{trip}} = 150\\,\\text{A}$\n  - $t_{\\text{cmp}} = 200\\,\\text{ns} = 200 \\times 10^{-9}\\,\\text{s}$\n  - $t_{\\text{drv}} = 100\\,\\text{ns} = 100 \\times 10^{-9}\\,\\text{s}$\n\n### Step 2: Validate Using Extracted Givens\nThe problem is scientifically grounded, describing a standard fault condition (a shoot-through or short-circuit event) in a power electronic inverter. The model is based on fundamental principles of circuit theory (Kirchhoff's Voltage Law) and the constitutive relation for an inductor. The component models, such as a constant on-state voltage drop for the switches and the various propagation delays, are standard and valid simplifications used in power electronics analysis. The problem is well-posed, with all necessary parameters and conditions provided to determine a unique solution. The language is objective and precise. The numerical values are physically realistic for a contemporary power converter. No scientific, logical, or factual flaws are present.\n\n### Step 3: Verdict and Action\nThe problem is valid. A full solution will be developed.\n\nThe problem requires a two-part derivation followed by a numerical evaluation.\n\n**1. Derivation of the current rise rate and time to trip**\n\nFor the time interval $t \\ge t_{\\text{skew}}$, a conducting loop is formed by the DC source, two active switches, and the stray inductance. The load is a short-circuit, contributing no impedance. Applying Kirchhoff's Voltage Law (KVL) to this loop yields:\n$$\nV_{\\text{dc}} - V_{\\text{on}} - v_{L}(t) - V_{\\text{on}} = 0\n$$\nwhere $v_{L}(t)$ is the voltage across the total stray inductance $L_s$. This simplifies to:\n$$\nv_{L}(t) = V_{\\text{dc}} - 2 V_{\\text{on}}\n$$\nThis confirms the voltage stipulated in the problem statement. The problem provides the fundamental relation for an inductor, $v_{L}(t) = L_{s}\\,\\frac{di}{dt}$. Equating the two expressions for $v_{L}(t)$:\n$$\nL_{s}\\,\\frac{di}{dt} = V_{\\text{dc}} - 2 V_{\\text{on}}\n$$\nThe rate of current rise is therefore constant for $t > t_{\\text{skew}}$:\n$$\n\\frac{di}{dt} = \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}}\n$$\nThe current $i(t)$ begins to flow at $t = t_{\\text{skew}}$, with the initial condition $i(t_{\\text{skew}}) = 0$. We find the current by integrating the rate of change from the onset time $t_{\\text{skew}}$:\n$$\ni(t) = \\int_{t_{\\text{skew}}}^{t} \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} d\\tau = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) (t - t_{\\text{skew}}) \\quad \\text{for } t \\ge t_{\\text{skew}}\n$$\nThe time $t_{\\text{trip}}$ is defined as the duration from the start of the current ramp at $t=t_{\\text{skew}}$ until the current reaches the threshold $I_{\\text{trip}}$. This means that at the absolute time $t = t_{\\text{skew}} + t_{\\text{trip}}$, the current is $i(t_{\\text{skew}} + t_{\\text{trip}}) = I_{\\text{trip}}$. Substituting this into the expression for $i(t)$:\n$$\nI_{\\text{trip}} = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) ((t_{\\text{skew}} + t_{\\text{trip}}) - t_{\\text{skew}}) = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) t_{\\text{trip}}\n$$\nSolving for $t_{\\text{trip}}$ gives:\n$$\nt_{\\text{trip}} = \\frac{L_{s} I_{\\text{trip}}}{V_{\\text{dc}} - 2 V_{\\text{on}}}\n$$\n\n**2. Derivation and evaluation of the device energy dissipation**\n\nThe energy dissipated in the two conducting devices, $E_{\\text{dev}}$, is given by the integral of the instantaneous power, $p_{\\text{dev}}(t)$, over the specified conduction interval. The power is $p_{\\text{dev}}(t) = v_{\\text{dev}}(t) i(t)$, where the total voltage drop across the two devices is $v_{\\text{dev}}(t) = 2 V_{\\text{on}}$.\nThe energy integral is defined as:\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{end}}} (2 V_{\\text{on}})\\, i(t)\\, dt\n$$\nwhere the conduction ends at $t_{\\text{end}} = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$. Let us define the total protection delay as $t_{\\text{delay}} = t_{\\text{cmp}} + t_{\\text{drv}}$. Then $t_{\\text{end}} = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}$.\nSubstituting the expression for $i(t)$:\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left[ \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) (t - t_{\\text{skew}}) \\right] dt\n$$\nUsing the relation $I_{\\text{trip}} = \\frac{V_{\\text{dc}} - 2V_{\\text{on}}}{L_s}t_{\\text{trip}}$, we can express the current slope as $\\frac{I_{\\text{trip}}}{t_{\\text{trip}}}$.\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left( \\frac{I_{\\text{trip}}}{t_{\\text{trip}}} \\right) (t - t_{\\text{skew}}) dt\n$$\nTo simplify the integral, we perform a change of variable: let $\\tau = t - t_{\\text{skew}}$, so $d\\tau = dt$. The integration limits change from $t = t_{\\text{skew}}$ to $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}$, which corresponds to $\\tau = 0$ to $\\tau = t_{\\text{trip}} + t_{\\text{delay}}$.\n$$\nE_{\\text{dev}} = \\int_{0}^{t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left( \\frac{I_{\\text{trip}}}{t_{\\text{trip}}} \\right) \\tau d\\tau\n$$\nThe terms $2$, $V_{\\text{on}}$, $I_{\\text{trip}}$, and $t_{\\text{trip}}$ are constants with respect to the integration variable $\\tau$.\n$$\nE_{\\text{dev}} = \\frac{2 V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} \\int_{0}^{t_{\\text{trip}} + t_{\\text{delay}}} \\tau d\\tau = \\frac{2 V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} \\left[ \\frac{\\tau^2}{2} \\right]_{0}^{t_{\\text{trip}} + t_{\\text{delay}}}\n$$\n$$\nE_{\\text{dev}} = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{delay}})^2 = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}})^2\n$$\nThis is the final symbolic expression for the dissipated energy.\n\n**Numerical Evaluation**\n\nWe substitute the given parameter values into the derived expressions.\n$V_{\\text{dc}} = 400\\,\\text{V}$, $V_{\\text{on}} = 2.0\\,\\text{V}$, $L_{s} = 2.0 \\times 10^{-6}\\,\\text{H}$, $I_{\\text{trip}} = 150\\,\\text{A}$, $t_{\\text{cmp}} = 200 \\times 10^{-9}\\,\\text{s}$, $t_{\\text{drv}} = 100 \\times 10^{-9}\\,\\text{s}$.\n\nFirst, calculate the effective voltage driving the current ramp:\n$$\nV_{\\text{dc}} - 2 V_{\\text{on}} = 400\\,\\text{V} - 2 \\times (2.0\\,\\text{V}) = 396\\,\\text{V}\n$$\nNext, calculate the time to reach the trip current, $t_{\\text{trip}}$:\n$$\nt_{\\text{trip}} = \\frac{L_{s} I_{\\text{trip}}}{V_{\\text{dc}} - 2 V_{\\text{on}}} = \\frac{(2.0 \\times 10^{-6}\\,\\text{H}) (150\\,\\text{A})}{396\\,\\text{V}} = \\frac{300 \\times 10^{-6}}{396}\\,\\text{s} = \\frac{25}{33} \\times 10^{-6}\\,\\text{s}\n$$\n$t_{\\text{trip}} \\approx 7.5757... \\times 10^{-7}\\,\\text{s}$.\n\nNext, calculate the total protection delay, $t_{\\text{delay}}$:\n$$\nt_{\\text{delay}} = t_{\\text{cmp}} + t_{\\text{drv}} = 200 \\times 10^{-9}\\,\\text{s} + 100 \\times 10^{-9}\\,\\text{s} = 300 \\times 10^{-9}\\,\\text{s} = 0.3 \\times 10^{-6}\\,\\text{s}\n$$\nNow, we can calculate the dissipated energy $E_{\\text{dev}}$:\n$$\nE_{\\text{dev}} = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{delay}})^2\n$$\n$$\nE_{\\text{dev}} = \\frac{(2.0\\,\\text{V})(150\\,\\text{A})}{\\frac{25}{33} \\times 10^{-6}\\,\\text{s}} \\left( \\frac{25}{33} \\times 10^{-6}\\,\\text{s} + 0.3 \\times 10^{-6}\\,\\text{s} \\right)^2\n$$\n$$\nE_{\\text{dev}} = \\frac{300}{\\frac{25}{33} \\times 10^{-6}} \\left( (\\frac{25}{33} + \\frac{3}{10}) \\times 10^{-6} \\right)^2 = \\frac{300 \\times 33}{25} \\times 10^{6} \\left( (\\frac{250+99}{330}) \\times 10^{-6} \\right)^2\n$$\n$$\nE_{\\text{dev}} = 396 \\times 10^{6} \\left( \\frac{349}{330} \\times 10^{-6} \\right)^2 = 396 \\times 10^{6} \\times \\left(\\frac{349}{330}\\right)^2 \\times 10^{-12}\n$$\n$$\nE_{\\text{dev}} = 396 \\times \\frac{121801}{108900} \\times 10^{-6} = \\frac{48233196}{108900} \\times 10^{-6}\\,\\text{J}\n$$\n$$\nE_{\\text{dev}} \\approx 442.912727... \\times 10^{-6}\\,\\text{J} = 0.0004429127... \\,\\text{J}\n$$\nRounding the result to four significant figures, we get:\n$$\nE_{\\text{dev}} \\approx 4.429 \\times 10^{-4}\\,\\text{J}\n$$",
            "answer": "$$\n\\boxed{4.429 \\times 10^{-4}}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "A foundational skill in magnetics design is the ability to predict eddy current losses from material properties and operating conditions. This exercise guides you through a first-principles derivation of the classical formula for eddy current power loss in a thin ferromagnetic lamination, starting from the Maxwell–Faraday law and Ohm's law. Mastering this derivation  solidifies your understanding of how loss scales with key parameters like frequency ($f$), peak flux density ($B_p$), lamination thickness ($d$), and conductivity ($\\sigma$), providing the theoretical basis for material selection and core design.",
            "id": "3848093",
            "problem": "An infinitely wide ferromagnetic lamination of thickness $d$ occupies the region $-d/2 \\le x \\le d/2$, with the $x$-axis normal to the lamination plane. A spatially uniform magnetic flux density $B_{z}(t)$ is imposed externally along the $z$-direction and varies sinusoidally in time as $B_{z}(t) = B_{p} \\sin(2\\pi f t)$, where $B_{p}$ is the peak flux density and $f$ is the frequency. The lamination is assumed to be electrically homogeneous and isotropic with electrical conductivity $\\sigma$ (equivalently, resistivity $\\rho = 1/\\sigma$), and to have constant magnetic permeability independent of $B_{z}$. The low-frequency thin-lamination limit applies, i.e., the skin depth is much larger than $d$, so that $B_{z}$ is uniform across $x$ and the magnetic field profile is not distorted by eddy currents. Hysteresis is neglected so that only eddy current loss is considered.\n\nStarting only from the following foundational relations:\n- Maxwell–Faraday law in differential form, $\\nabla \\times \\mathbf{E} = -\\partial \\mathbf{B}/\\partial t$,\n- Ohm’s law for a homogeneous conductor, $\\mathbf{J} = \\sigma \\mathbf{E}$,\n- Instantaneous volumetric Joule heating density, $p(t) = \\mathbf{J}\\cdot \\mathbf{E}$,\n\nderive an analytical expression for the time-average eddy current power loss per unit volume, $P_{e}/V$, as a function of $B_{p}$, $f$, $d$, and $\\sigma$ under the assumptions above. Then use your result to quantify how $P_{e}/V$ changes when $\\sigma$ varies with temperature, and compute the fractional increase in $P_{e}/V$ (expressed as a decimal number without a percent sign) when the resistivity decreases by $0.20$ of its original value, i.e., when $\\rho_{\\text{new}} = 0.80\\,\\rho_{\\text{old}}$, with $B_{p}$, $f$, and $d$ held fixed.\n\nProvide:\n- The closed-form dependence of $P_{e}/V$ on $B_{p}$, $f$, $d$, and $\\sigma$,\n- The single decimal number giving the fractional increase in $P_{e}/V$ for the specified change in $\\rho$.\n\nNo numerical substitution for $B_{p}$, $f$, $d$, or $\\sigma$ is required. If you approximate any intermediate step, justify why the approximation is valid under the stated assumptions. Express the fractional increase as a single decimal number; no units are required. No rounding instruction is needed because an exact decimal is expected.",
            "solution": "The problem is evaluated as valid. It is scientifically grounded in the principles of electromagnetism, self-contained, well-posed, and objective. The provided assumptions, such as the thin-lamination limit and the neglect of hysteresis, are standard for this type of classical analysis and render the problem analytically solvable. We proceed with the derivation.\n\nThe objective is to derive an expression for the time-average eddy current power loss per unit volume, denoted as $P_e/V$. The derivation will begin from the specified foundational physical laws.\n\nThe starting point is the Maxwell–Faraday law in differential form:\n$$ \\nabla \\times \\mathbf{E} = -\\frac{\\partial \\mathbf{B}}{\\partial t} $$\nThe magnetic flux density $\\mathbf{B}$ is given as spatially uniform and varying sinusoidally in time along the $z$-direction: $\\mathbf{B}(t) = B_p \\sin(2\\pi f t) \\hat{k}$. Its time derivative is:\n$$ \\frac{\\partial \\mathbf{B}}{\\partial t} = \\frac{\\partial}{\\partial t} (B_p \\sin(2\\pi f t) \\hat{k}) = 2\\pi f B_p \\cos(2\\pi f t) \\hat{k} $$\nSubstituting this into the Maxwell-Faraday equation gives:\n$$ \\nabla \\times \\mathbf{E} = -2\\pi f B_p \\cos(2\\pi f t) \\hat{k} $$\nThe problem geometry involves an infinitely wide lamination, implying translational symmetry in the $y$ and $z$ directions. Consequently, the electric field $\\mathbf{E}$ cannot depend on the $y$ or $z$ coordinates, so $\\mathbf{E} = \\mathbf{E}(x,t)$. The curl of such a field is:\n$$ \\nabla \\times \\mathbf{E}(x,t) = \\begin{vmatrix} \\hat{i}  \\hat{j}  \\hat{k} \\\\ \\frac{\\partial}{\\partial x}  0  0 \\\\ E_x  E_y  E_z \\end{vmatrix} = -\\frac{\\partial E_z}{\\partial x} \\hat{j} + \\frac{\\partial E_y}{\\partial x} \\hat{k} $$\nBy comparing the components of the two expressions for $\\nabla \\times \\mathbf{E}$, we deduce:\n1.  The $\\hat{j}$ component: $-\\frac{\\partial E_z}{\\partial x} = 0$, implying $E_z$ is independent of $x$. As there is no driving force for a field along the $z$-axis, we take $E_z = 0$.\n2.  The $\\hat{i}$ component: There is no source for an $E_x$ component. Current loops (eddy currents) opposing the change in $z$-directed magnetic flux must lie in the $x-y$ plane. Thus we can set $E_x=0$.\n3.  The $\\hat{k}$ component: $\\frac{\\partial E_y}{\\partial x} = -2\\pi f B_p \\cos(2\\pi f t)$.\n\nThe electric field is therefore purely in the $y$-direction, $\\mathbf{E} = E_y(x,t)\\hat{j}$. We find $E_y(x,t)$ by integrating with respect to $x$:\n$$ E_y(x,t) = \\int \\left( -2\\pi f B_p \\cos(2\\pi f t) \\right) dx = -x (2\\pi f B_p \\cos(2\\pi f t)) + C(t) $$\nThe integration constant $C(t)$ is determined from symmetry considerations. The physical setup is symmetric with respect to the plane $x=0$. The induced currents must be equal and opposite for $x0$ and $x0$, which means the current density must be zero at $x=0$. From Ohm's law, $\\mathbf{J} = \\sigma \\mathbf{E}$, this implies $\\mathbf{E}(x=0, t) = 0$. Applying this condition:\n$$ E_y(0,t) = -0 \\cdot (2\\pi f B_p \\cos(2\\pi f t)) + C(t) = 0 \\implies C(t) = 0 $$\nThus, the electric field inside the lamination is:\n$$ \\mathbf{E}(x,t) = -2\\pi f B_p x \\cos(2\\pi f t) \\hat{j} $$\nThe induced eddy current density $\\mathbf{J}$ is given by Ohm's law, $\\mathbf{J} = \\sigma \\mathbf{E}$:\n$$ \\mathbf{J}(x,t) = -\\sigma (2\\pi f B_p x \\cos(2\\pi f t)) \\hat{j} $$\nThe instantaneous volumetric power density due to Joule heating is $p(x,t) = \\mathbf{J} \\cdot \\mathbf{E} = \\sigma |\\mathbf{E}|^2$:\n$$ p(x,t) = \\sigma (-2\\pi f B_p x \\cos(2\\pi f t))^2 = \\sigma (2\\pi f B_p)^2 x^2 \\cos^2(2\\pi f t) $$\nTo find the time-average power loss per unit volume, we must average $p(x,t)$ over one time period $T=1/f$ and over the lamination thickness $d$.\nFirst, we average in time. The time average of the $\\cos^2$ term over one cycle is:\n$$ \\langle \\cos^2(2\\pi f t) \\rangle_t = \\frac{1}{T} \\int_0^T \\cos^2(2\\pi f t) dt = \\frac{1}{2} $$\nThe time-averaged power density at a specific position $x$ is:\n$$ \\langle p(x) \\rangle_t = \\sigma (2\\pi f B_p)^2 x^2 \\cdot \\frac{1}{2} = 2 \\pi^2 f^2 B_p^2 \\sigma x^2 $$\nNext, we average this expression over the thickness of the lamination, which extends from $x=-d/2$ to $x=d/2$. This involves finding the average value of $x^2$ over this interval:\n$$ \\langle x^2 \\rangle_x = \\frac{1}{d} \\int_{-d/2}^{d/2} x^2 dx = \\frac{1}{d} \\left[\\frac{x^3}{3}\\right]_{-d/2}^{d/2} = \\frac{1}{3d} \\left[ \\left(\\frac{d}{2}\\right)^3 - \\left(-\\frac{d}{2}\\right)^3 \\right] = \\frac{1}{3d} \\left( \\frac{d^3}{8} + \\frac{d^3}{8} \\right) = \\frac{d^2}{12} $$\nThe time-average power loss per unit volume, $P_e/V$, is the product of the constant terms and these averages:\n$$ \\frac{P_e}{V} = \\langle \\langle p(x,t) \\rangle_t \\rangle_x = (2 \\pi^2 f^2 B_p^2 \\sigma) \\langle x^2 \\rangle_x = 2 \\pi^2 f^2 B_p^2 \\sigma \\left(\\frac{d^2}{12}\\right) $$\nSimplifying this expression yields the first required result:\n$$ \\frac{P_e}{V} = \\frac{\\pi^2 f^2 B_p^2 d^2 \\sigma}{6} $$\nFor the second part of the problem, we analyze how $P_e/V$ changes with resistivity $\\rho$. Since conductivity $\\sigma = 1/\\rho$, we can write:\n$$ \\frac{P_e}{V} = \\frac{\\pi^2 f^2 B_p^2 d^2}{6\\rho} $$\nThis shows that for fixed $B_p$, $f$, and $d$, the power loss per unit volume is inversely proportional to the resistivity: $P_e/V \\propto \\rho^{-1}$.\nWe are given that the new resistivity is $\\rho_{\\text{new}} = 0.80\\,\\rho_{\\text{old}}$. The ratio of the new power loss to the old power loss is:\n$$ \\frac{(P_e/V)_{\\text{new}}}{(P_e/V)_{\\text{old}}} = \\frac{\\rho_{\\text{old}}}{\\rho_{\\text{new}}} = \\frac{\\rho_{\\text{old}}}{0.80\\,\\rho_{\\text{old}}} = \\frac{1}{0.80} = 1.25 $$\nThe fractional increase in $P_e/V$ is defined as $\\frac{(P_e/V)_{\\text{new}} - (P_e/V)_{\\text{old}}}{(P_e/V)_{\\text{old}}}$. This is calculated as:\n$$ \\frac{(P_e/V)_{\\text{new}}}{(P_e/V)_{\\text{old}}} - 1 = 1.25 - 1 = 0.25 $$\nThus, the fractional increase in the eddy current power loss per unit volume is $0.25$.",
            "answer": "$$ \\boxed{ \\begin{pmatrix} \\frac{\\pi^{2} f^{2} B_{p}^{2} d^{2} \\sigma}{6}  0.25 \\end{pmatrix} } $$"
        },
        {
            "introduction": "While analytical models provide valuable estimates, the total energy loss in a magnetic core is often determined by measuring its B-H loop under operational excitation. This practice bridges theory and application by asking you to implement a numerical procedure to calculate core loss directly from sampled B-H data. By computing the loop area—the integral $\\oint H \\, dB$—you will gain hands-on experience in processing experimental or simulation results to quantify the total dissipated energy per cycle, which includes both hysteresis and eddy current effects .",
            "id": "3848106",
            "problem": "You are given a single-period loop of magnetic flux density $B$ and magnetic field strength $H$ for a magnetically lossy core material driven by an Alternating Current (AC) excitation at frequency $f=10\\,\\mathrm{kHz}$ with peak flux density $B_p=0.3\\,\\mathrm{T}$. The measurement consists of sampled pairs $\\{(B_i,H_i)\\}_{i=0}^{N-1}$ acquired at uniform time steps over one full period. Your task is to design and implement a numerical procedure that computes the energy dissipated per cycle per unit volume and the corresponding power loss density, expressed in $\\mathrm{W}/\\mathrm{m}^3$, by integrating along the measured loop in the $B$–$H$ plane.\n\nBase your derivation on first principles of electromagnetic field energy accounting, specifically energy conservation in electromagnetic fields (Poynting’s theorem) and the definition of incremental magnetic work density. The final algorithm must rely only on these fundamentals, and must not assume any shortcut formulas specific to hysteresis or eddy currents.\n\nDefine a robust numerical procedure that:\n- Accepts uniformly sampled $B$ and $H$ over one full period (closing the loop by connecting the last sample to the first).\n- Accumulates the oriented contribution of each segment of the loop in the $B$–$H$ plane to obtain the energy per cycle per unit volume.\n- Converts the per-cycle energy to power density in $\\mathrm{W}/\\mathrm{m}^3$ using the given frequency.\n- Ensures the computed power density is non-negative.\n\nExpress each final answer in $\\mathrm{W}/\\mathrm{m}^3$ as a float rounded to three decimal places.\n\nTest Suite:\nFor reproducibility and scientific realism, consider the following four synthetic but physically plausible single-period measurement sets, each defined by a parametric generation of $B(t)$ and $H(t)$ sampled uniformly over one period $T=1/f$. In all cases, let $t\\in[0,T)$, $N=20000$ samples, $\\omega=2\\pi f$, and $f=10\\,\\mathrm{kHz}$.\n\n1. Happy path (moderate hysteresis): $B(t)=B_p\\sin(\\omega t)$ with $B_p=0.3\\,\\mathrm{T}$, and $H(t)=\\frac{B(t)}{\\mu_\\mathrm{eff}}+H_c\\tanh\\!\\left(\\frac{\\mathrm{d}B/\\mathrm{d}t}{v_0}\\right)$ using $\\mu_\\mathrm{eff}=2.0\\times 10^{-3}\\,\\mathrm{T}/(\\mathrm{A}/\\mathrm{m})$, $H_c=50\\,\\mathrm{A}/\\mathrm{m}$, $v_0=1000\\,\\mathrm{T}/\\mathrm{s}$.\n\n2. Narrow loop (low coercivity): Same $B(t)$ and parameters as case 1 except $H_c=5\\,\\mathrm{A}/\\mathrm{m}$.\n\n3. Low amplitude (edge case): $B_p=0.01\\,\\mathrm{T}$ with $\\mu_\\mathrm{eff}=2.0\\times 10^{-3}\\,\\mathrm{T}/(\\mathrm{A}/\\mathrm{m})$, $H_c=50\\,\\mathrm{A}/\\mathrm{m}$, $v_0=1000\\,\\mathrm{T}/\\mathrm{s}$.\n\n4. Degenerate loop (boundary case): $B_p=0\\,\\mathrm{T}$ with $\\mu_\\mathrm{eff}=2.0\\times 10^{-3}\\,\\mathrm{T}/(\\mathrm{A}/\\mathrm{m})$, $H_c=50\\,\\mathrm{A}/\\mathrm{m}$, $v_0=1000\\,\\mathrm{T}/\\mathrm{s}$.\n\nFor each case, your program must:\n- Generate $B(t)$ and $H(t)$ using the above definitions.\n- Compute the per-cycle energy per unit volume via a line integral along the loop in the $B$–$H$ plane using a numerically stable discretization that closes the loop.\n- Compute the power loss density in $\\mathrm{W}/\\mathrm{m}^3$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[r_1,r_2,r_3,r_4]$), where each $r_i$ is the power loss density for the corresponding test case, in $\\mathrm{W}/\\mathrm{m}^3$, rounded to three decimal places.",
            "solution": "The problem statement has been critically validated and is deemed valid. It is scientifically grounded in the principles of electromagnetism, self-contained with all necessary parameters and equations, and well-posed, leading to a unique, stable, and meaningful solution for each test case. The task is to compute the power loss density in a magnetic material by numerically evaluating the area of its B-H loop.\n\nThe solution proceeds by first establishing the theoretical basis from first principles, then developing a robust numerical algorithm, and finally applying this algorithm to the specified test cases.\n\n### 1. Theoretical Foundation: Energy Dissipation in Magnetic Materials\n\nThe work done by an external a magnetic field $\\mathbf{H}$ on a magnetic material with flux density $\\mathbf{B}$ is described by the energy input per unit volume. The incremental magnetic work density (work per unit volume) $\\mathrm{d}W_m$ required to change the magnetic flux density by $\\mathrm{d}\\mathbf{B}$ is given by:\n$$\n\\mathrm{d}W_m = \\mathbf{H} \\cdot \\mathrm{d}\\mathbf{B}\n$$\nThis expression is a direct consequence of Poynting's theorem for energy conservation in electromagnetic fields. When a magnetic material is subjected to a time-varying magnetic field over a complete cycle of period $T$, the net energy supplied to the material per unit volume, $W_\\text{cycle}$, is the integral of the instantaneous power density, $\\mathbf{H} \\cdot \\frac{\\partial\\mathbf{B}}{\\partial t}$, over one period:\n$$\nW_\\text{cycle} = \\int_{0}^{T} \\left( \\mathbf{H}(t) \\cdot \\frac{\\mathrm{d}\\mathbf{B}(t)}{\\mathrm{d}t} \\right) \\mathrm{d}t\n$$\nAssuming the fields $\\mathbf{H}$ and $\\mathbf{B}$ are collinear, as is typical for a toroidal core geometry, we can use scalar quantities $H$ and $B$. The integral can be transformed by a change of variable from time $t$ to flux density $B$:\n$$\nW_\\text{cycle} = \\oint H \\, \\mathrm{d}B\n$$\nThis is a closed line integral evaluated along the trajectory of the state $(B(t), H(t))$ in the B-H plane over one full cycle. This trajectory forms the hysteresis loop.\n\nThe total energy supplied, $W_\\text{cycle}$, is partitioned into two components: the change in stored magnetic energy and the energy dissipated as heat. Since the material returns to its initial magnetic state after one cycle, the net change in stored energy is zero. Therefore, the integral represents the total energy dissipated per unit volume per cycle, $W_\\text{diss}$:\n$$\nW_\\text{diss} = \\oint H \\, \\mathrm{d}B\n$$\nGeometrically, this integral is the area enclosed by the B-H loop. For any passive material, energy must be dissipated, not generated, so this area must be non-negative.\n\n### 2. Power Loss Density\n\nThe average power dissipated per unit volume, known as the power loss density $P_\\text{loss}$, is the energy dissipated per cycle $W_\\text{diss}$ divided by the period of the cycle, $T$. Given the frequency $f = 1/T$, the power loss density is:\n$$\nP_\\text{loss} = \\frac{W_\\text{diss}}{T} = W_\\text{diss} \\cdot f\n$$\nThe units are Joules per cubic meter per second ($\\mathrm{J}/(\\mathrm{m}^3 \\cdot \\mathrm{s})$), which is equivalent to Watts per cubic meter ($\\mathrm{W}/\\mathrm{m}^3$).\n\n### 3. Numerical Integration Procedure\n\nThe problem provides the B-H loop as a series of discrete samples $\\{(B_i, H_i)\\}_{i=0}^{N-1}$ taken at uniform time intervals. The closed line integral $\\oint H \\, \\mathrm{d}B$ can be computed numerically by summing the areas of trapezoids formed by each segment of the discretized loop. The area element contributed by the segment from point $i$ to $i+1$ is approximated as:\n$$\n\\Delta W_i \\approx \\left(\\frac{H_i + H_{i+1}}{2}\\right) (B_{i+1} - B_i)\n$$\nTo compute the total area for the closed loop, we sum these contributions over all segments, from $i=0$ to $N-1$. The loop is closed by connecting the last point $(B_{N-1}, H_{N-1})$ back to the first point $(B_0, H_0)$. This is handled by taking the indices modulo $N$, i.e., at step $i=N-1$, the next point is $(B_N, H_N) = (B_0, H_0)$. The total dissipated energy per cycle is then:\n$$\nW_\\text{diss} \\approx \\sum_{i=0}^{N-1} \\left(\\frac{H_i + H_{i+1 \\pmod N}}{2}\\right) (B_{i+1 \\pmod N} - B_i)\n$$\nTo ensure the physicality of the result (dissipated power cannot be negative), we take the absolute value of the computed area. This accounts for cases where the loop might be traversed in a direction that yields a negative mathematical area (e.g., clockwise).\n$$\nW_\\text{diss} = \\left| \\sum_{i=0}^{N-1} \\left(\\frac{H_i + H_{i+1 \\pmod N}}{2}\\right) (B_{i+1 \\pmod N} - B_i) \\right|\n$$\n\n### 4. Application to Test Cases\n\nFor each test case, we first generate the discrete time series for $B(t)$ and $H(t)$.\nThe parameters are: frequency $f=10\\,\\mathrm{kHz}$, number of samples $N=20000$.\nThe period is $T=1/f = 10^{-4}\\,\\mathrm{s}$, and the angular frequency is $\\omega=2\\pi f = 2\\pi \\times 10^4\\,\\mathrm{rad/s}$.\nThe time samples are $t_i = i \\cdot \\Delta t$ for $i \\in \\{0, 1, ..., N-1\\}$, where $\\Delta t = T/N$.\n\nThe signals are generated as follows:\n-   Flux density: $B(t) = B_p \\sin(\\omega t)$\n-   Time derivative of flux density: $\\frac{\\mathrm{d}B}{\\mathrm{d}t} = B_p \\omega \\cos(\\omega t)$\n-   Magnetic field strength: $H(t) = \\frac{B(t)}{\\mu_\\mathrm{eff}} + H_c\\tanh\\left(\\frac{\\mathrm{d}B/\\mathrm{d}t}{v_0}\\right)$\n\nThe discrete data arrays $B_i$ and $H_i$ are generated by evaluating these functions at each time step $t_i$. These arrays are then used in the numerical integration formula to find $W_\\text{diss}$, which is subsequently multiplied by $f$ to obtain $P_\\text{loss}$.\n\nThe algorithm proceeds as follows for each test case:\n1.  Set the specific parameters for the case: $B_p$, $\\mu_\\mathrm{eff}$, $H_c$, $v_0$.\n2.  Generate an array of $N$ time points $t_i$ from $0$ to $T(1-1/N)$.\n3.  Generate the array $B_i = B(t_i) = B_p \\sin(\\omega t_i)$.\n4.  Generate the array $(\\mathrm{d}B/\\mathrm{d}t)_i = B_p \\omega \\cos(\\omega t_i)$.\n5.  Generate the array $H_i = H(t_i)$ using the formula provided.\n6.  Compute the per-cycle energy density $W_\\text{diss}$ using the trapezoidal summation over the $(B_i, H_i)$ points, ensuring the result is non-negative.\n7.  Compute the power loss density $P_\\text{loss} = W_\\text{diss} \\cdot f$.\n8.  Round the final value of $P_\\text{loss}$ to three decimal places.\n\nThis procedure is systematically applied to all four specified test cases. The degenerate case, where $B_p=0$, serves as a crucial sanity check, as it must yield zero loss.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes power loss density for four test cases based on a\n    phenomenological model of a magnetic B-H loop.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    # Each case is a dictionary of parameters.\n    test_cases = [\n        {\n            \"name\": \"1. Happy path (moderate hysteresis)\",\n            \"B_p\": 0.3, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 50.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n        {\n            \"name\": \"2. Narrow loop (low coercivity)\",\n            \"B_p\": 0.3, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 5.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n        {\n            \"name\": \"3. Low amplitude (edge case)\",\n            \"B_p\": 0.01, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 50.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n        {\n            \"name\": \"4. Degenerate loop (boundary case)\",\n            \"B_p\": 0.0, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 50.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n    ]\n\n    # Global parameters\n    f = 10000.0  # Hz\n    N = 20000    # Number of samples\n\n    def calculate_loss_power_density(params, f, N):\n        \"\"\"\n        Generates B(t) and H(t) data and computes the loss power density.\n        \n        Args:\n            params (dict): Dictionary containing B_p, mu_eff, H_c, v_0.\n            f (float): Frequency in Hz.\n            N (int): Number of samples per period.\n            \n        Returns:\n            float: Power loss density in W/m^3.\n        \"\"\"\n        # Extract parameters for the current case\n        B_p = params[\"B_p\"]\n        mu_eff = params[\"mu_eff\"]\n        H_c = params[\"H_c\"]\n        v_0 = params[\"v_0\"]\n\n        # Time and frequency domain setup\n        T = 1.0 / f\n        omega = 2.0 * np.pi * f\n        t = np.linspace(0, T, N, endpoint=False)\n\n        # Generate B(t) and its time derivative dB/dt\n        B = B_p * np.sin(omega * t)\n        dB_dt = B_p * omega * np.cos(omega * t)\n\n        # Generate H(t) based on the provided phenomenological model\n        H = (B / mu_eff) + H_c * np.tanh(dB_dt / v_0)\n        \n        # Handle the degenerate case where B is constant (e.g., B_p = 0)\n        # In this case, dB is zero everywhere, so the integral is zero.\n        if np.all(B == B[0]):\n            return 0.0\n\n        # Numerically compute the line integral W_diss = integral(H dB)\n        # This calculates the area of the B-H loop.\n        # We use a robust method based on the surveyor's formula / trapezoidal rule.\n        # Create shifted arrays to compute differences for closing the loop.\n        # B_next at index i is B at index i+1 (with wrap-around)\n        B_next = np.roll(B, -1)\n        H_next = np.roll(H, -1)\n        \n        # Area contribution from each segment using trapezoidal rule: (y1+y2)/2 * (x2-x1)\n        # Here x is B and y is H.\n        dB = B_next - B\n        H_avg = 0.5 * (H + H_next)\n        \n        W_diss_per_cycle = np.sum(H_avg * dB)\n\n        # Dissipated energy must be non-negative. Taking the absolute value\n        # accounts for the direction of integration (clockwise vs. counter-clockwise).\n        W_diss_per_cycle = abs(W_diss_per_cycle)\n\n        # Convert energy per cycle per volume (J/m^3) to power density (W/m^3)\n        power_loss_density = W_diss_per_cycle * f\n\n        return power_loss_density\n\n    results = []\n    for case in test_cases:\n        power_loss = calculate_loss_power_density(case, f, N)\n        # Round the result to three decimal places as specified.\n        results.append(round(power_loss, 3))\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "In practical magnetic components, loss calculations must often account for non-ideal geometric effects, such as the fringing fields that occur at air gaps. This advanced practice challenges you to analyze the eddy currents induced by the normal component of these fringing fields, a significant source of loss in gapped-core inductors. By comparing two different air gap placement strategies in an E-core , you will apply fundamental principles to a real-world design trade-off and see how a seemingly small change in geometry can have a substantial impact on performance.",
            "id": "3848073",
            "problem": "An E-shaped magnetic core is constructed from thin, electrically conductive laminations of thickness $t_{\\ell}$ and electrical resistivity $\\rho$, stacked to form a uniform cross-sectional area $A$ in each leg. A single coil wound on the center leg produces a sinusoidal magnetic flux density in the center leg with peak amplitude $B_{c}$ at frequency $f$.\n\nTwo mechanically realizable designs are considered for introducing an air gap:\n- Design C: a single air gap of length $g$ is placed on the center leg.\n- Design O: two air gaps, each of length $g$, are placed on the two outer legs.\n\nAssume the core is symmetric, with each outer leg having the same cross-sectional area $A$ as the center leg. In steady sinusoidal operation, the flux splits equally between the outer legs, so each outer leg carries one half of the center-leg flux. Consequently, the peak flux density in each outer leg is $B_{o} = B_{c}/2$. The laminations are oriented so that eddy currents are constrained within the lamination planes, and fringing fields from the air gaps introduce a normal component of magnetic flux density into the lamination planes near the gap edges.\n\nModel the fringing field adjacent to any window-facing gap edge as a spatially decaying normal component\n$$\n\\hat{B}_{n}(x) = \\beta\\, B_{\\text{gap}}\\,\\exp\\!\\left(-\\frac{x}{\\lambda}\\right),\n$$\nwhere $x$ is the distance into the window from the edge, $\\beta$ is a dimensionless geometry factor (identical for all gap edges in this problem), $B_{\\text{gap}}$ is the peak flux density in the gapped leg at the gap face, and $\\lambda = g$ is the characteristic decay length. In Design C, fringing from the center-leg gap affects both windows; in Design O, fringing from each outer-leg gap affects only the adjacent window. Neglect skin-depth limitations (thin-lamination regime) and any frequency-dependent permeability effects.\n\nStarting from Maxwell–Faraday law and Ohm’s law, derive the local eddy current power density caused by the time-varying normal flux component $\\hat{B}_{n}(x)$, and integrate across the fringing region to obtain the total eddy current loss contribution from all window-facing gap edges for each design. Then compute the multiplicative increase factor $\\mathcal{R}$ defined by\n$$\n\\mathcal{R} = \\frac{P_{\\text{eddy,C}}}{P_{\\text{eddy,O}}},\n$$\nwhere $P_{\\text{eddy,C}}$ is the total eddy current loss due to fringing in Design C and $P_{\\text{eddy,O}}$ is that in Design O. Express the final value of $\\mathcal{R}$ as a pure number with no units. No rounding instruction is required.",
            "solution": "We analyze eddy current loss induced by a time-varying normal flux component penetrating thin, conductive laminations. The key relations are Maxwell–Faraday law and Ohm’s law:\n- Maxwell–Faraday law: $\\nabla \\times \\mathbf{E} = -\\dfrac{\\partial \\mathbf{B}}{\\partial t}$.\n- Ohm’s law: $\\mathbf{J} = \\sigma \\mathbf{E}$, with $\\sigma = 1/\\rho$.\n\nConsider a lamination modeled as a thin plate of thickness $t_{\\ell}$ with its plane coincident with the $x$–$z$ plane. The fringing field introduces a normal flux component $\\mathbf{B}_{n}(x,t) = \\hat{B}_{n}(x)\\sin(\\omega t)\\,\\hat{\\mathbf{y}}$ where $\\omega = 2\\pi f$. Under the thin-lamination approximation, we assume $\\mathbf{B}_{n}$ is uniform across the thickness $t_{\\ell}$ at a given in-plane location $\\{x,z\\}$ and varies in time sinusoidally.\n\nChoose coordinates so that $y$ is the lamination thickness coordinate with $y \\in [-t_{\\ell}/2,\\,t_{\\ell}/2]$. For a uniform-in-$y$ normal flux density $B_{n}(t)$ at a fixed in-plane position, Maxwell–Faraday law reduces to\n$$\n\\frac{\\partial E_{x}}{\\partial y} = -\\frac{\\partial B_{n}}{\\partial t}.\n$$\nImposing symmetry about $y=0$ gives $E_{x}(y,t) = -y\\,\\dfrac{\\partial B_{n}}{\\partial t}$. The current density is\n$$\nJ_{x}(y,t) = \\sigma E_{x}(y,t) = -\\sigma y\\,\\frac{\\partial B_{n}}{\\partial t}.\n$$\nThe instantaneous Joule loss density (power per unit volume) is\n$$\np(y,t) = \\frac{J_{x}^{2}}{\\sigma} = \\sigma y^{2}\\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2}.\n$$\nIntegrating across the thickness yields the instantaneous power per unit area at the in-plane location:\n$$\nP'(t) = \\int_{-t_{\\ell}/2}^{t_{\\ell}/2} p(y,t)\\,dy = \\sigma \\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2} \\int_{-t_{\\ell}/2}^{t_{\\ell}/2} y^{2}\\,dy = \\sigma \\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2} \\frac{t_{\\ell}^{3}}{12}.\n$$\nTherefore, the instantaneous volumetric loss density is\n$$\np(t) = \\frac{P'(t)}{t_{\\ell}} = \\frac{\\sigma t_{\\ell}^{2}}{12}\\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2}.\n$$\nFor sinusoidal $B_{n}(t) = \\hat{B}_{n}\\sin(\\omega t)$, we have $\\dfrac{\\partial B_{n}}{\\partial t} = \\omega \\hat{B}_{n}\\cos(\\omega t)$, and the time average over one period is\n$$\n\\left\\langle \\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2} \\right\\rangle = \\frac{\\omega^{2} \\hat{B}_{n}^{2}}{2}.\n$$\nThus, the time-averaged volumetric eddy current power density at the in-plane location is\n$$\n\\bar{p}_{e} = \\frac{\\sigma t_{\\ell}^{2}}{12} \\cdot \\frac{\\omega^{2} \\hat{B}_{n}^{2}}{2} = \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\hat{B}_{n}^{2}.\n$$\n\nWe next integrate this density across the fringing region adjacent to each window-facing gap edge. The provided fringing model specifies\n$$\n\\hat{B}_{n}(x) = \\beta\\, B_{\\text{gap}}\\, \\exp\\!\\left(-\\frac{x}{\\lambda}\\right),\n$$\nwith $x \\ge 0$ measuring distance into the window from the edge, and $\\lambda = g$. At a given gap edge, the time-averaged eddy power per unit edge length along the edge (per unit depth into the page) is\n$$\nP_{\\text{edge}} = \\int_{0}^{\\infty} \\bar{p}_{e}(x)\\,dx = \\int_{0}^{\\infty} \\left( \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\hat{B}_{n}(x)^{2} \\right) dx.\n$$\nSubstituting the fringing profile:\n$$\nP_{\\text{edge}} = \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\int_{0}^{\\infty} \\left[ \\beta^{2} B_{\\text{gap}}^{2} \\exp\\!\\left(-\\frac{2x}{\\lambda}\\right) \\right] dx = \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} B_{\\text{gap}}^{2}\\,\\left( \\frac{\\lambda}{2} \\right).\n$$\n\nTotal fringing-induced eddy loss is the sum over all window-facing gap edges. We now count edges and identify $B_{\\text{gap}}$ for each design:\n\n- Design C (center-leg gap): The center leg gap faces both windows. There are two window-facing edges. The peak flux density at the center leg gap is $B_{\\text{gap}} = B_{c}$. Therefore,\n$$\nP_{\\text{eddy,C}} = 2 \\times \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} B_{c}^{2}\\,\\left( \\frac{\\lambda}{2} \\right).\n$$\n\n- Design O (two outer-leg gaps): Each outer-leg gap faces only its adjacent window. There are two window-facing edges in total (one per outer-leg gap). In each outer leg, the flux density is halved relative to the center leg, so $B_{\\text{gap}} = B_{o} = B_{c}/2$ for each edge. Therefore,\n$$\nP_{\\text{eddy,O}} = 2 \\times \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} \\left( \\frac{B_{c}}{2} \\right)^{2}\\,\\left( \\frac{\\lambda}{2} \\right).\n$$\n\nForming the ratio,\n$$\n\\mathcal{R} = \\frac{P_{\\text{eddy,C}}}{P_{\\text{eddy,O}}} = \\frac{2 \\cdot \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} B_{c}^{2}\\,(\\lambda/2)}{2 \\cdot \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} (B_{c}/2)^{2}\\,(\\lambda/2)} = \\frac{B_{c}^{2}}{(B_{c}/2)^{2}} = 4.\n$$\n\nAll geometric and material factors cancel in the ratio under the stated assumptions, leaving a purely numerical increase factor. Hence, placing the air gap on the center leg produces four times the fringing-induced eddy current loss in the laminations compared to placing equal-length gaps on the two outer legs, given identical fringing decay length and geometry factor at each window-facing edge and equal leg areas with flux splitting equally.",
            "answer": "$$\\boxed{4}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "理解经典涡流损耗公式的来源对于深入掌握磁损耗至关重要。本练习将引导您从麦克斯韦方程组等第一性原理出发，针对简化的叠片几何结构，一步步推导出涡流损耗的解析表达式，从而巩固其背后的物理基础。通过此过程，您将清晰地看到损耗与频率 $f$、峰值磁通密度 $B_{p}$、材料属性及几何尺寸之间的关系 ()。",
            "id": "3848093",
            "problem": "一个厚度为 $d$ 的无限宽铁磁叠片占据区域 $-d/2 \\le x \\le d/2$，其中 $x$ 轴垂直于叠片平面。一个空间均匀的磁通密度 $B_{z}(t)$ 被外部施加在 $z$ 方向上，并随时间呈正弦变化，其形式为 $B_{z}(t) = B_{p} \\sin(2\\pi f t)$，其中 $B_{p}$ 是磁通密度峰值，$f$ 是频率。假设该叠片在电学上是均匀且各向同性的，其电导率为 $\\sigma$（等效地，电阻率为 $\\rho = 1/\\sigma$），并具有与 $B_{z}$ 无关的恒定磁导率。适用低频薄叠片极限，即趋肤深度远大于 $d$，因此 $B_{z}$ 在整个 $x$ 方向上是均匀的，磁场分布不受涡流影响而畸变。忽略磁滞效应，因此只考虑涡流损耗。\n\n仅从以下基本关系出发：\n- 微分形式的麦克斯韦-法拉第定律, $\\nabla \\times \\mathbf{E} = -\\partial \\mathbf{B}/\\partial t$,\n- 均匀导体的欧姆定律, $\\mathbf{J} = \\sigma \\mathbf{E}$,\n- 瞬时体积焦耳热密度, $p(t) = \\mathbf{J}\\cdot \\mathbf{E}$,\n\n在上述假设下，推导单位体积时间平均涡流功率损耗 $P_{e}/V$ 的解析表达式，该表达式是 $B_{p}$、$f$、$d$ 和 $\\sigma$ 的函数。然后，使用您的结果来量化当 $\\sigma$ 随温度变化时 $P_{e}/V$ 如何变化，并计算当电阻率减少其原始值的 $0.20$ 时（即当 $\\rho_{\\text{new}} = 0.80\\,\\rho_{\\text{old}}$ 时，$B_{p}$、$f$ 和 $d$ 保持不变），$P_{e}/V$ 的分数增加量（以不带百分号的小数表示）。\n\n提供：\n- $P_{e}/V$ 对 $B_{p}$、$f$、$d$ 和 $\\sigma$ 的封闭形式依赖关系，\n- 给出在指定的 $\\rho$ 变化下，$P_{e}/V$ 分数增加量的单个小数值。\n\n不需要对 $B_{p}$、$f$、$d$ 或 $\\sigma$ 进行数值代入。如果您在任何中间步骤中进行近似，请说明为什么在所述假设下该近似是有效的。将分数增加量表示为单个小数；不需要单位。由于预期得到一个精确的小数，因此不需要四舍五入的指令。",
            "solution": "该问题被评估为有效。它在科学上基于电磁学原理，是自洽的、适定的和客观的。所提供的假设，例如薄叠片极限和忽略磁滞，是此类经典分析的标准假设，并使问题可解析求解。我们继续进行推导。\n\n目标是推导单位体积时间平均涡流功率损耗的表达式，记为 $P_e/V$。推导将从指定的基础物理定律开始。\n\n起点是微分形式的麦克斯韦-法拉第定律：\n$$ \\nabla \\times \\mathbf{E} = -\\frac{\\partial \\mathbf{B}}{\\partial t} $$\n磁通密度 $\\mathbf{B}$ 被给定为空间均匀，并沿 $z$ 方向随时间正弦变化：$\\mathbf{B}(t) = B_p \\sin(2\\pi f t) \\hat{k}$。其时间导数为：\n$$ \\frac{\\partial \\mathbf{B}}{\\partial t} = \\frac{\\partial}{\\partial t} (B_p \\sin(2\\pi f t) \\hat{k}) = 2\\pi f B_p \\cos(2\\pi f t) \\hat{k} $$\n将此代入麦克斯韦-法拉第方程得到：\n$$ \\nabla \\times \\mathbf{E} = -2\\pi f B_p \\cos(2\\pi f t) \\hat{k} $$\n该问题的几何结构涉及无限宽的叠片，这意味着在 $y$ 和 $z$ 方向上具有平移对称性。因此，电场 $\\mathbf{E}$ 不能依赖于 $y$ 或 $z$ 坐标，所以 $\\mathbf{E} = \\mathbf{E}(x,t)$。这样一个场的旋度为：\n$$ \\nabla \\times \\mathbf{E}(x,t) = \\begin{vmatrix} \\hat{i}  \\hat{j}  \\hat{k} \\\\ \\frac{\\partial}{\\partial x}  0  0 \\\\ E_x  E_y  E_z \\end{vmatrix} = -\\frac{\\partial E_z}{\\partial x} \\hat{j} + \\frac{\\partial E_y}{\\partial x} \\hat{k} $$\n通过比较 $\\nabla \\times \\mathbf{E}$ 两个表达式的分量，我们推断：\n1.  $\\hat{j}$ 分量：$-\\frac{\\partial E_z}{\\partial x} = 0$，意味着 $E_z$ 与 $x$ 无关。由于没有沿 $z$ 轴方向的场的驱动力，我们取 $E_z = 0$。\n2.  $\\hat{i}$ 分量：没有 $E_x$ 分量的源。抵抗 $z$ 方向磁通量变化的电流环（涡流）必须位于 $x-y$ 平面内。因此我们可以设置 $E_x=0$。\n3.  $\\hat{k}$ 分量：$\\frac{\\partial E_y}{\\partial x} = -2\\pi f B_p \\cos(2\\pi f t)$。\n\n因此，电场纯粹在 $y$ 方向上，$\\mathbf{E} = E_y(x,t)\\hat{j}$。我们通过对 $x$ 积分来求得 $E_y(x,t)$：\n$$ E_y(x,t) = \\int \\left( -2\\pi f B_p \\cos(2\\pi f t) \\right) dx = -x (2\\pi f B_p \\cos(2\\pi f t)) + C(t) $$\n积分常数 $C(t)$ 由对称性考虑确定。物理设置相对于平面 $x=0$ 是对称的。对于 $x>0$ 和 $x0$，感应电流必须大小相等、方向相反，这意味着在 $x=0$ 处的电流密度必须为零。根据欧姆定律 $\\mathbf{J} = \\sigma \\mathbf{E}$，这意味着 $\\mathbf{E}(x=0, t) = 0$。应用此条件：\n$$ E_y(0,t) = -0 \\cdot (2\\pi f B_p \\cos(2\\pi f t)) + C(t) = 0 \\implies C(t) = 0 $$\n因此，叠片内部的电场为：\n$$ \\mathbf{E}(x,t) = -2\\pi f B_p x \\cos(2\\pi f t) \\hat{j} $$\n感应涡流密度 $\\mathbf{J}$ 由欧姆定律给出，$\\mathbf{J} = \\sigma \\mathbf{E}$：\n$$ \\mathbf{J}(x,t) = -\\sigma (2\\pi f B_p x \\cos(2\\pi f t)) \\hat{j} $$\n由焦耳热引起的瞬时体积功率密度为 $p(x,t) = \\mathbf{J} \\cdot \\mathbf{E} = \\sigma |\\mathbf{E}|^2$：\n$$ p(x,t) = \\sigma (-2\\pi f B_p x \\cos(2\\pi f t))^2 = \\sigma (2\\pi f B_p)^2 x^2 \\cos^2(2\\pi f t) $$\n为了求得单位体积的时间平均功率损耗，我们必须将 $p(x,t)$ 在一个时间周期 $T=1/f$ 内以及在叠片厚度 $d$ 上进行平均。\n首先，我们对时间进行平均。$\\cos^2$ 项在一个周期内的时间平均值为：\n$$ \\langle \\cos^2(2\\pi f t) \\rangle_t = \\frac{1}{T} \\int_0^T \\cos^2(2\\pi f t) dt = \\frac{1}{2} $$\n在特定位置 $x$ 的时间平均功率密度为：\n$$ \\langle p(x) \\rangle_t = \\sigma (2\\pi f B_p)^2 x^2 \\cdot \\frac{1}{2} = 2 \\pi^2 f^2 B_p^2 \\sigma x^2 $$\n接下来，我们将此表达式在叠片厚度上进行平均，其范围从 $x=-d/2$ 到 $x=d/2$。这涉及到求 $x^2$ 在此区间内的平均值：\n$$ \\langle x^2 \\rangle_x = \\frac{1}{d} \\int_{-d/2}^{d/2} x^2 dx = \\frac{1}{d} \\left[\\frac{x^3}{3}\\right]_{-d/2}^{d/2} = \\frac{1}{3d} \\left[ \\left(\\frac{d}{2}\\right)^3 - \\left(-\\frac{d}{2}\\right)^3 \\right] = \\frac{1}{3d} \\left( \\frac{d^3}{8} + \\frac{d^3}{8} \\right) = \\frac{d^2}{12} $$\n单位体积的时间平均功率损耗 $P_e/V$ 是常数项与这些平均值的乘积：\n$$ \\frac{P_e}{V} = \\langle \\langle p(x,t) \\rangle_t \\rangle_x = (2 \\pi^2 f^2 B_p^2 \\sigma) \\langle x^2 \\rangle_x = 2 \\pi^2 f^2 B_p^2 \\sigma \\left(\\frac{d^2}{12}\\right) $$\n简化此表达式得到第一个要求的结果：\n$$ \\frac{P_e}{V} = \\frac{\\pi^2 f^2 B_p^2 d^2 \\sigma}{6} $$\n对于问题的第二部分，我们分析 $P_e/V$ 如何随电阻率 $\\rho$ 变化。由于电导率 $\\sigma = 1/\\rho$，我们可以写出：\n$$ \\frac{P_e}{V} = \\frac{\\pi^2 f^2 B_p^2 d^2}{6\\rho} $$\n这表明，对于固定的 $B_p$、$f$ 和 $d$，单位体积的功率损耗与电阻率成反比：$P_e/V \\propto \\rho^{-1}$。\n我们已知新的电阻率为 $\\rho_{\\text{new}} = 0.80\\,\\rho_{\\text{old}}$。新的功率损耗与旧的功率损耗之比为：\n$$ \\frac{(P_e/V)_{\\text{new}}}{(P_e/V)_{\\text{old}}} = \\frac{\\rho_{\\text{old}}}{\\rho_{\\text{new}}} = \\frac{\\rho_{\\text{old}}}{0.80\\,\\rho_{\\text{old}}} = \\frac{1}{0.80} = 1.25 $$\n$P_e/V$ 的分数增加量定义为 $\\frac{(P_e/V)_{\\text{new}} - (P_e/V)_{\\text{old}}}{(P_e/V)_{\\text{old}}}$。计算如下：\n$$ \\frac{(P_e/V)_{\\text{new}}}{(P_e/V)_{\\text{old}}} - 1 = 1.25 - 1 = 0.25 $$\n因此，单位体积涡流功率损耗的分数增加量为 $0.25$。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} \\frac{\\pi^{2} f^{2} B_{p}^{2} d^{2} \\sigma}{6}  0.25 \\end{pmatrix} } $$"
        },
        {
            "introduction": "理论上，磁滞回线的面积 $\\oint H \\, \\mathrm{d}B$ 代表每个周期单位体积内消耗的总能量。本练习旨在连接理论与实验测量的桥梁，要求您设计一个数值程序，通过对测量的 $B-H$ 数据点进行积分，来计算磁芯的总损耗功率密度 ()。这项实践不仅能加深对磁滞和涡流损耗物理意义的理解，也是表征和建模磁性元件时一项至关重要的实践技能。",
            "id": "3848106",
            "problem": "给定一个磁有损耗的磁芯材料，在频率 $f=10\\,\\mathrm{kHz}$、峰值磁通密度 $B_p=0.3\\,\\mathrm{T}$ 的交流 (AC) 激励下，其磁通密度 $B$ 和磁场强度 $H$ 的单周期回线。测量数据由在一个完整周期内以均匀时间步长采集的采样点对 $\\{(B_i,H_i)\\}_{i=0}^{N-1}$ 组成。您的任务是设计并实现一个数值方法，通过沿 $B$–$H$ 平面内的测量回线进行积分，计算每周期每单位体积的耗散能量以及相应的磁滞损耗功率密度（以 $\\mathrm{W}/\\mathrm{m}^3$ 为单位）。\n\n您的推导应基于电磁场能量衡算的第一性原理，特别是电磁场中的能量守恒（Poynting 定理）和增量磁功密度的定义。最终的算法必须仅依赖于这些基本原理，不得假定任何针对磁滞或涡流的捷径公式。\n\n定义一个稳健的数值方法，该方法：\n- 接受一个完整周期内均匀采样的 $B$ 和 $H$ 数据（通过将最后一个采样点与第一个采样点相连来闭合回线）。\n- 在 $B$–$H$ 平面中累加回线每个分段的有向贡献，以获得每周期每单位体积的能量。\n- 使用给定频率将每周期能量转换为以 $\\mathrm{W}/\\mathrm{m}^3$ 为单位的功率密度。\n- 确保计算出的功率密度为非负值。\n\n将每个最终答案以 $\\mathrm{W}/\\mathrm{m}^3$ 为单位表示，并四舍五入到三位小数的浮点数。\n\n测试套件：\n为保证可复现性和科学真实性，请考虑以下四个虽为人工合成但物理上合理的单周期测量数据集。每个数据集均通过对 $B(t)$ 和 $H(t)$ 进行参数化生成，并在一个周期 $T=1/f$ 内均匀采样得到。在所有情况下，设 $t\\in[0,T)$，$N=20000$ 个样本，$\\omega=2\\pi f$，且 $f=10\\,\\mathrm{kHz}$。\n\n1. 正常路径（中等磁滞）：$B(t)=B_p\\sin(\\omega t)$，其中 $B_p=0.3\\,\\mathrm{T}$，以及 $H(t)=\\frac{B(t)}{\\mu_\\mathrm{eff}}+H_c\\tanh\\!\\left(\\frac{\\mathrm{d}B/\\mathrm{d}t}{v_0}\\right)$，使用 $\\mu_\\mathrm{eff}=2.0\\times 10^{-3}\\,\\mathrm{T}/(\\mathrm{A}/\\mathrm{m})$，$H_c=50\\,\\mathrm{A}/\\mathrm{m}$，$v_0=1000\\,\\mathrm{T}/\\mathrm{s}$。\n\n2. 窄回线（低矫顽力）：与案例1具有相同的 $B(t)$ 和参数，除了 $H_c=5\\,\\mathrm{A}/\\mathrm{m}$。\n\n3. 低振幅（边界情况）：$B_p=0.01\\,\\mathrm{T}$，使用 $\\mu_\\mathrm{eff}=2.0\\times 10^{-3}\\,\\mathrm{T}/(\\mathrm{A}/\\mathrm{m})$，$H_c=50\\,\\mathrm{A}/\\mathrm{m}$，$v_0=1000\\,\\mathrm{T}/\\mathrm{s}$。\n\n4. 退化回线（边界情况）：$B_p=0\\,\\mathrm{T}$，使用 $\\mu_\\mathrm{eff}=2.0\\times 10^{-3}\\,\\mathrm{T}/(\\mathrm{A}/\\mathrm{m})$，$H_c=50\\,\\mathrm{A}/\\mathrm{m}$，$v_0=1000\\,\\mathrm{T}/\\mathrm{s}$。\n\n对于每种情况，您的程序必须：\n- 使用上述定义生成 $B(t)$ 和 $H(t)$。\n- 使用一个能闭合回线的数值稳定离散化方法，通过沿 $B$–$H$ 平面内的回线进行线积分，计算每周期每单位体积的能量。\n- 计算以 $\\mathrm{W}/\\mathrm{m}^3$ 为单位的磁滞损耗功率密度。\n\n您的程序应产生单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，$[r_1,r_2,r_3,r_4]$），其中每个 $r_i$ 是对应测试案例的磁滞损耗功率密度，以 $\\mathrm{W}/\\mathrm{m}^3$ 为单位，并四舍五入到三位小数。",
            "solution": "问题陈述已经过严格验证，并被认为是有效的。它基于电磁学原理，具有科学依据，包含了所有必要的参数和方程，是自洽的，并且是良定的，对于每个测试案例都能导出一个唯一、稳定且有意义的解。任务是通过数值计算磁性材料 B-H 回线的面积来计算其磁滞损耗功率密度。\n\n解决方案首先从第一性原理出发建立理论基础，然后开发一个稳健的数值算法，最后将此算法应用于指定的测试案例。\n\n### 1. 理论基础：磁性材料中的能量耗散\n\n外部磁场 $\\mathbf{H}$ 对磁通密度为 $\\mathbf{B}$ 的磁性材料所做的功，由每单位体积的能量输入来描述。将磁通密度改变 $\\mathrm{d}\\mathbf{B}$ 所需的增量磁功密度（每单位体积的功） $\\mathrm{d}W_m$ 由下式给出：\n$$\n\\mathrm{d}W_m = \\mathbf{H} \\cdot \\mathrm{d}\\mathbf{B}\n$$\n该表达式是电磁场能量守恒的 Poynting 定理的直接推论。当磁性材料在一个周期为 $T$ 的完整周期内受到时变磁场的作用时，供给材料的每单位体积的净能量 $W_\\text{cycle}$ 是瞬时功率密度 $\\mathbf{H} \\cdot \\frac{\\partial\\mathbf{B}}{\\partial t}$ 在一个周期上的积分：\n$$\nW_\\text{cycle} = \\int_{0}^{T} \\left( \\mathbf{H}(t) \\cdot \\frac{\\mathrm{d}\\mathbf{B}(t)}{\\mathrm{d}t} \\right) \\mathrm{d}t\n$$\n假设场 $\\mathbf{H}$ 和 $\\mathbf{B}$ 是共线的，这在环形磁芯几何结构中是典型情况，我们可以使用标量 $H$ 和 $B$。通过从时间 $t$ 到磁通密度 $B$ 的变量替换，该积分可以转换为：\n$$\nW_\\text{cycle} = \\oint H \\, \\mathrm{d}B\n$$\n这是一个闭合线积分，沿着一个完整周期内状态 $(B(t), H(t))$ 在 B-H 平面中的轨迹进行计算。这个轨迹构成了磁滞回线。\n\n供给的总能量 $W_\\text{cycle}$ 分为两部分：储存磁能的变化和以热量形式耗散的能量。由于材料在一个周期后返回其初始磁状态，储存能量的净变化为零。因此，该积分表示每周期每单位体积耗散的总能量 $W_\\text{diss}$：\n$$\nW_\\text{diss} = \\oint H \\, \\mathrm{d}B\n$$\n在几何上，这个积分是 B-H 回线所包围的面积。对于任何无源材料，能量必须被耗散，而不是产生，因此这个面积必须是非负的。\n\n### 2. 功率损耗密度\n\n每单位体积的平均耗散功率，即功率损耗密度 $P_\\text{loss}$，是每周期耗散的能量 $W_\\text{diss}$ 除以周期 $T$。给定频率 $f = 1/T$，功率损耗密度为：\n$$\nP_\\text{loss} = \\frac{W_\\text{diss}}{T} = W_\\text{diss} \\cdot f\n$$\n其单位是焦耳每立方米每秒 ($\\mathrm{J}/(\\mathrm{m}^3 \\cdot \\mathrm{s})$)，等效于瓦特每立方米 ($\\mathrm{W}/\\mathrm{m}^3$)。\n\n### 3. 数值积分方法\n\n问题将 B-H 回线作为在均匀时间间隔内采集的一系列离散样本 $\\{(B_i, H_i)\\}_{i=0}^{N-1}$ 给出。闭合线积分 $\\oint H \\, \\mathrm{d}B$ 可以通过对离散化回线的每个分段形成的梯形面积求和来进行数值计算。由点 $i$ 到点 $i+1$ 的分段所贡献的面积元近似为：\n$$\n\\Delta W_i \\approx \\left(\\frac{H_i + H_{i+1}}{2}\\right) (B_{i+1} - B_i)\n$$\n为计算闭合回线的总面积，我们对所有分段（从 $i=0$ 到 $N-1$）的这些贡献进行求和。通过将最后一个点 $(B_{N-1}, H_{N-1})$ 连接回第一个点 $(B_0, H_0)$ 来闭合回线。这通过对索引取模 $N$ 来处理，即在步骤 $i=N-1$ 时，下一个点是 $(B_N, H_N) = (B_0, H_0)$。那么每周期耗散的总能量为：\n$$\nW_\\text{diss} \\approx \\sum_{i=0}^{N-1} \\left(\\frac{H_i + H_{i+1 \\pmod N}}{2}\\right) (B_{i+1 \\pmod N} - B_i)\n$$\n为确保结果的物理性（耗散功率不能为负），我们取计算面积的绝对值。这考虑了回线可能沿产生负数学面积的方向（例如，顺时针）遍历的情况。\n$$\nW_\\text{diss} = \\left| \\sum_{i=0}^{N-1} \\left(\\frac{H_i + H_{i+1 \\pmod N}}{2}\\right) (B_{i+1 \\pmod N} - B_i) \\right|\n$$\n\n### 4. 在测试案例中的应用\n\n对于每个测试案例，我们首先生成 $B(t)$ 和 $H(t)$ 的离散时间序列。参数为：频率 $f=10\\,\\mathrm{kHz}$，样本数量 $N=20000$。周期为 $T=1/f = 10^{-4}\\,\\mathrm{s}$，角频率为 $\\omega=2\\pi f = 2\\pi \\times 10^4\\,\\mathrm{rad/s}$。时间样本为 $t_i = i \\cdot \\Delta t$，其中 $i \\in \\{0, 1, ..., N-1\\}$，$\\Delta t = T/N$。\n\n信号生成如下：\n-   磁通密度：$B(t) = B_p \\sin(\\omega t)$\n-   磁通密度的时间导数：$\\frac{\\mathrm{d}B}{\\mathrm{d}t} = B_p \\omega \\cos(\\omega t)$\n-   磁场强度：$H(t) = \\frac{B(t)}{\\mu_\\mathrm{eff}} + H_c\\tanh\\left(\\frac{\\mathrm{d}B/\\mathrm{d}t}{v_0}\\right)$\n\n通过在每个时间步 $t_i$ 计算这些函数的值，生成离散数据数组 $B_i$ 和 $H_i$。然后将这些数组用于数值积分公式，以求得 $W_\\text{diss}$，随后乘以 $f$ 得到 $P_\\text{loss}$。\n\n对于每个测试案例，算法按以下步骤进行：\n1.  设置案例的特定参数：$B_p$, $\\mu_\\mathrm{eff}$, $H_c$, $v_0$。\n2.  生成一个包含 $N$ 个时间点 $t_i$ 的数组，范围从 $0$ 到 $T(1-1/N)$。\n3.  生成数组 $B_i = B(t_i) = B_p \\sin(\\omega t_i)$。\n4.  生成数组 $(\\mathrm{d}B/\\mathrm{d}t)_i = B_p \\omega \\cos(\\omega t_i)$。\n5.  使用提供的公式生成数组 $H_i = H(t_i)$。\n6.  使用梯形求和法对点 $(B_i, H_i)$ 进行计算，得到每周期能量密度 $W_\\text{diss}$，并确保结果为非负。\n7.  计算功率损耗密度 $P_\\text{loss} = W_\\text{diss} \\cdot f$。\n8.  将 $P_\\text{loss}$ 的最终值四舍五入到三位小数。\n\n此过程系统地应用于所有四个指定的测试案例。其中 $B_p=0$ 的退化情况作为一个关键的合理性检查，因为它必须产生零损耗。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes hysteresis loss power density for four test cases based on a\n    phenomenological model of a magnetic B-H loop.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    # Each case is a dictionary of parameters.\n    test_cases = [\n        {\n            \"name\": \"1. Happy path (moderate hysteresis)\",\n            \"B_p\": 0.3, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 50.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n        {\n            \"name\": \"2. Narrow loop (low coercivity)\",\n            \"B_p\": 0.3, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 5.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n        {\n            \"name\": \"3. Low amplitude (edge case)\",\n            \"B_p\": 0.01, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 50.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n        {\n            \"name\": \"4. Degenerate loop (boundary case)\",\n            \"B_p\": 0.0, # T\n            \"mu_eff\": 2.0e-3, # T/(A/m)\n            \"H_c\": 50.0, # A/m\n            \"v_0\": 1000.0, # T/s\n        },\n    ]\n\n    # Global parameters\n    f = 10000.0  # Hz\n    N = 20000    # Number of samples\n\n    def calculate_loss_power_density(params, f, N):\n        \"\"\"\n        Generates B(t) and H(t) data and computes the loss power density.\n        \n        Args:\n            params (dict): Dictionary containing B_p, mu_eff, H_c, v_0.\n            f (float): Frequency in Hz.\n            N (int): Number of samples per period.\n            \n        Returns:\n            float: Hysteresis loss power density in W/m^3.\n        \"\"\"\n        # Extract parameters for the current case\n        B_p = params[\"B_p\"]\n        mu_eff = params[\"mu_eff\"]\n        H_c = params[\"H_c\"]\n        v_0 = params[\"v_0\"]\n\n        # Time and frequency domain setup\n        T = 1.0 / f\n        omega = 2.0 * np.pi * f\n        t = np.linspace(0, T, N, endpoint=False)\n\n        # Generate B(t) and its time derivative dB/dt\n        B = B_p * np.sin(omega * t)\n        dB_dt = B_p * omega * np.cos(omega * t)\n\n        # Generate H(t) based on the provided phenomenological model\n        H = (B / mu_eff) + H_c * np.tanh(dB_dt / v_0)\n        \n        # Handle the degenerate case where B is constant (e.g., B_p = 0)\n        # In this case, dB is zero everywhere, so the integral is zero.\n        if np.all(B == B[0]):\n            return 0.0\n\n        # Numerically compute the line integral W_diss = integral(H dB)\n        # This calculates the area of the B-H loop.\n        # We use a robust method based on the surveyor's formula / trapezoidal rule.\n        # Create shifted arrays to compute differences for closing the loop.\n        # B_next at index i is B at index i+1 (with wrap-around)\n        B_next = np.roll(B, -1)\n        H_next = np.roll(H, -1)\n        \n        # Area contribution from each segment using trapezoidal rule: (y1+y2)/2 * (x2-x1)\n        # Here x is B and y is H.\n        dB = B_next - B\n        H_avg = 0.5 * (H + H_next)\n        \n        W_diss_per_cycle = np.sum(H_avg * dB)\n\n        # Dissipated energy must be non-negative. Taking the absolute value\n        # accounts for the direction of integration (clockwise vs. counter-clockwise).\n        W_diss_per_cycle = abs(W_diss_per_cycle)\n\n        # Convert energy per cycle per volume (J/m^3) to power density (W/m^3)\n        power_loss_density = W_diss_per_cycle * f\n\n        return power_loss_density\n\n    results = []\n    for case in test_cases:\n        power_loss = calculate_loss_power_density(case, f, N)\n        results.append(power_loss)\n\n    # Final print statement in the exact required format, with results rounded to three decimal places.\n    print(f\"[{','.join([f'{r:.3f}' for r in results])}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "在电感器设计中，引入气隙是控制电感和防止磁芯饱和的常用手段，但这也会产生边缘场。本练习探讨了一个更高级的实际设计问题：气隙产生的边缘场如何在其附近的叠片中引起显著的局部涡流损耗 ()。通过比较两种不同的气隙放置方案，您将运用基本原理来分析和量化一个关键的设计权衡，这直接关系到高频磁性元件的效率。",
            "id": "3848073",
            "problem": "一个E形磁芯由厚度为 $t_{\\ell}$、电阻率为 $\\rho$ 的薄导电叠片堆叠而成，每个磁路分支（腿）都形成均匀的横截面积 $A$。一个缠绕在中心腿上的单线圈，在中心腿中产生一个正弦磁通密度，其峰值幅度为 $B_{c}$，频率为 $f$。\n\n考虑两种用于引入气隙的机械上可行的设计：\n- 设计C：在中心腿上放置一个长度为 $g$ 的单个气隙。\n- 设计O：在两个外侧腿上各放置一个长度为 $g$ 的气隙。\n\n假设磁芯是对称的，每个外侧腿的横截面积 $A$ 与中心腿相同。在稳态正弦运行中，磁通在两个外侧腿之间平均分配，因此每个外侧腿承载中心腿磁通的一半。因此，每个外侧腿的峰值磁通密度为 $B_{o} = B_{c}/2$。叠片的方向使得涡流被限制在叠片平面内，而来自气隙的边缘场在气隙边缘附近向叠片平面引入了磁通密度的法向分量。\n\n将邻近任何面向窗口的气隙边缘的边缘场建模为一个空间衰减的法向分量\n$$\n\\hat{B}_{n}(x) = \\beta\\, B_{\\text{gap}}\\,\\exp\\!\\left(-\\frac{x}{\\lambda}\\right),\n$$\n其中 $x$ 是从边缘进入窗口的距离，$\\beta$ 是一个无量纲的几何因子（在本问题中对所有气隙边缘都相同），$B_{\\text{gap}}$ 是在气隙面处、带气隙的腿中的峰值磁通密度，而 $\\lambda = g$ 是特征衰减长度。在设计C中，来自中心腿气隙的边缘场影响两个窗口；在设计O中，来自每个外侧腿气隙的边缘场只影响相邻的窗口。忽略趋肤深度限制（薄叠片情况）和任何频率相关的磁导率效应。\n\n从麦克斯韦-法拉第定律和欧姆定律出发，推导由时变的法向磁通分量 $\\hat{B}_{n}(x)$ 引起的局部涡流功率密度，并在边缘场区域上积分，以获得每种设计中所有面向窗口的气隙边缘对总涡流损耗的贡献。然后计算由下式定义的倍增因子 $\\mathcal{R}$\n$$\n\\mathcal{R} = \\frac{P_{\\text{eddy,C}}}{P_{\\text{eddy,O}}},\n$$\n其中 $P_{\\text{eddy,C}}$ 是设计C中由边缘场引起的总涡流损耗，而 $P_{\\text{eddy,O}}$ 是设计O中的总涡流损耗。将 $\\mathcal{R}$ 的最终值表示为一个无单位的纯数。无需舍入说明。",
            "solution": "我们分析由穿透薄导电叠片的时变法向磁通分量引起的涡流损耗。关键关系是麦克斯韦-法拉第定律和欧姆定律：\n- 麦克斯韦-法拉第定律：$\\nabla \\times \\mathbf{E} = -\\dfrac{\\partial \\mathbf{B}}{\\partial t}$。\n- 欧姆定律：$\\mathbf{J} = \\sigma \\mathbf{E}$，其中 $\\sigma = 1/\\rho$。\n\n考虑将一个叠片建模为厚度为 $t_{\\ell}$ 的薄板，其平面与 $x$–$z$ 平面重合。边缘场引入了一个法向磁通分量 $\\mathbf{B}_{n}(x,t) = \\hat{B}_{n}(x)\\sin(\\omega t)\\,\\hat{\\mathbf{y}}$，其中 $\\omega = 2\\pi f$。在薄叠片近似下，我们假设在给定的平面内位置 $\\{x,z\\}$，$\\mathbf{B}_{n}$ 在整个厚度 $t_{\\ell}$ 上是均匀的，并随时间正弦变化。\n\n选择坐标系，使得 $y$ 是叠片厚度坐标，满足 $y \\in [-t_{\\ell}/2,\\,t_{\\ell}/2]$。对于在固定平面内位置、$y$ 方向均匀的法向磁通密度 $B_{n}(t)$，麦克斯韦-法拉第定律简化为\n$$\n\\frac{\\partial E_{x}}{\\partial y} = -\\frac{\\partial B_{n}}{\\partial t}。\n$$\n施加关于 $y=0$ 的对称性，得到 $E_{x}(y,t) = -y\\,\\dfrac{\\partial B_{n}}{\\partial t}$。电流密度为\n$$\nJ_{x}(y,t) = \\sigma E_{x}(y,t) = -\\sigma y\\,\\frac{\\partial B_{n}}{\\partial t}。\n$$\n瞬时焦耳损耗密度（单位体积功率）为\n$$\np(y,t) = \\frac{J_{x}^{2}}{\\sigma} = \\sigma y^{2}\\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2}。\n$$\n沿厚度方向积分，得到在平面内位置的瞬时单位面积功率：\n$$\nP'(t) = \\int_{-t_{\\ell}/2}^{t_{\\ell}/2} p(y,t)\\,dy = \\sigma \\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2} \\int_{-t_{\\ell}/2}^{t_{\\ell}/2} y^{2}\\,dy = \\sigma \\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2} \\frac{t_{\\ell}^{3}}{12}。\n$$\n因此，瞬时体积损耗密度为\n$$\np(t) = \\frac{P'(t)}{t_{\\ell}} = \\frac{\\sigma t_{\\ell}^{2}}{12}\\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2}。\n$$\n对于正弦函数 $B_{n}(t) = \\hat{B}_{n}\\sin(\\omega t)$，我们有 $\\dfrac{\\partial B_{n}}{\\partial t} = \\omega \\hat{B}_{n}\\cos(\\omega t)$，在一个周期内的时间平均值为\n$$\n\\left\\langle \\left(\\frac{\\partial B_{n}}{\\partial t}\\right)^{2} \\right\\rangle = \\frac{\\omega^{2} \\hat{B}_{n}^{2}}{2}。\n$$\n因此，在平面内位置的时间平均体积涡流功率密度为\n$$\n\\bar{p}_{e} = \\frac{\\sigma t_{\\ell}^{2}}{12} \\cdot \\frac{\\omega^{2} \\hat{B}_{n}^{2}}{2} = \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\hat{B}_{n}^{2}。\n$$\n\n接下来，我们将该密度在邻近每个面向窗口的气隙边缘的边缘场区域上积分。所提供的边缘场模型指定\n$$\n\\hat{B}_{n}(x) = \\beta\\, B_{\\text{gap}}\\, \\exp\\!\\left(-\\frac{x}{\\lambda}\\right),\n$$\n其中 $x \\ge 0$ 测量从边缘进入窗口的距离，且 $\\lambda = g$。在给定的气隙边缘处，沿边缘的单位边缘长度（每单位页面深度）的时间平均涡流功率为\n$$\nP_{\\text{edge}} = \\int_{0}^{\\infty} \\bar{p}_{e}(x)\\,dx = \\int_{0}^{\\infty} \\left( \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\hat{B}_{n}(x)^{2} \\right) dx.\n$$\n代入边缘场分布：\n$$\nP_{\\text{edge}} = \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\int_{0}^{\\infty} \\left[ \\beta^{2} B_{\\text{gap}}^{2} \\exp\\!\\left(-\\frac{2x}{\\lambda}\\right) \\right] dx = \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} B_{\\text{gap}}^{2}\\,\\left( \\frac{\\lambda}{2} \\right).\n$$\n\n总的边缘场感应涡流损耗是所有面向窗口的气隙边缘的损耗之和。我们现在为每种设计计算边缘数量并确定 $B_{\\text{gap}}$：\n\n- 设计C（中心腿气隙）：中心腿气隙面向两个窗口。有两个面向窗口的边缘。中心腿气隙处的峰值磁通密度为 $B_{\\text{gap}} = B_{c}$。因此，\n$$\nP_{\\text{eddy,C}} = 2 \\times \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} B_{c}^{2}\\,\\left( \\frac{\\lambda}{2} \\right).\n$$\n\n- 设计O（两个外侧腿气隙）：每个外侧腿气隙只面向其相邻的窗口。总共有两个面向窗口的边缘（每个外侧腿气隙一个）。在每个外侧腿中，磁通密度相对于中心腿减半，因此每个边缘的 $B_{\\text{gap}} = B_{o} = B_{c}/2$。因此，\n$$\nP_{\\text{eddy,O}} = 2 \\times \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} \\left( \\frac{B_{c}}{2} \\right)^{2}\\,\\left( \\frac{\\lambda}{2} \\right).\n$$\n\n形成比率，\n$$\n\\mathcal{R} = \\frac{P_{\\text{eddy,C}}}{P_{\\text{eddy,O}}} = \\frac{2 \\cdot \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} B_{c}^{2}\\,(\\lambda/2)}{2 \\cdot \\frac{\\pi^{2}}{6}\\,\\frac{t_{\\ell}^{2} f^{2}}{\\rho}\\,\\beta^{2} (B_{c}/2)^{2}\\,(\\lambda/2)} = \\frac{B_{c}^{2}}{(B_{c}/2)^{2}} = 4.\n$$\n\n在所述假设下，所有几何和材料因子在比率中被消去，留下一个纯数值的倍增因子。因此，在每个面向窗口的边缘具有相同的边缘场衰减长度和几何因子，并且磁路分支面积相等且磁通平均分配的情况下，将气隙放置在中心腿上产生的叠片中边缘场感应涡流损耗是将等长气隙放置在两个外侧腿上情况的四倍。",
            "answer": "$$\\boxed{4}$$"
        }
    ]
}
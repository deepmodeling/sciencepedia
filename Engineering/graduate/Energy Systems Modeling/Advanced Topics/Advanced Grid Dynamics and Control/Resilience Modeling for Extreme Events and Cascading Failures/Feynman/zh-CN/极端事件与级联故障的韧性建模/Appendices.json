{
    "hands_on_practices": [
        {
            "introduction": "在我们深入研究复杂的连锁故障模型之前，我们必须首先建立一个量化韧性的基本方法。本练习介绍了“韧性损失区域”的概念，这是一个通过系统在事件期间的性能曲线得出的标准度量。这项实践有助于巩固在时间维度上量化中断影响的核心理念，为更高级的分析奠定基础 。",
            "id": "4118686",
            "problem": "电力系统提供的服务功能由一个随时间变化的函数 $F(t)$ 表示，其事件前额定基线为不随时间变化的常数 $F_0$。在时刻 $t_0$，一个极端事件导致瞬时的服务退化，使得功能下降到 $F(t_0)=F_0(1-\\alpha)$，其中 $0  \\alpha  1$。在 $t_0$ 之后，系统经历一个连续的线性恢复过程，并在时刻 $t_1$ 恢复到其额定功能 $F_0$，其中 $t_1>t_0$。假设对于 $t  t_0$ 的时间，$F(t) = F_0$。计算无量纲韧性损失分数 $\\rho \\equiv \\frac{L}{F_0(t_1-t_0)}$，其中 $L$ 是在区间 $[t_0,t_1]$ 内相对于额定基线的总韧性损失面积。",
            "solution": "我们从基本定义开始。所提供的服务功能 $F(t)$ 表示在时刻 $t$ 提供的服务，而 $F_0$ 是事件前稳态下的恒定额定基线。在 $[t_0,t_1]$ 上的韧性损失面积定义为亏损相对于额定基线的时间积分：\n$$\nL \\equiv \\int_{t_0}^{t_1} \\big(F_0 - F(t)\\big)\\,dt.\n$$\n所要求的量是无量纲分数\n$$\n\\rho \\equiv \\frac{L}{F_0\\,(t_1-t_0)}.\n$$\n\n根据问题陈述，在 $t=t_0$ 时，功能瞬时下降到 $F(t_0)=F_0(1-\\alpha)$，其中 $0  \\alpha  1$，然后在 $t=t_1$ 时线性恢复到 $F(t_1)=F_0$。在 $[t_0,t_1]$ 上的线性意味着 $F(t)$ 是一个连接两个端点的关于 $t$ 的仿射函数：\n$$\nF(t)=F_0(1-\\alpha)+\\Big(F_0-F_0(1-\\alpha)\\Big)\\,\\frac{t-t_0}{t_1-t_0}\n=F_0(1-\\alpha)+F_0\\alpha\\,\\frac{t-t_0}{t_1-t_0},\\quad t\\in[t_0,t_1].\n$$\n相对于基线的瞬时服务亏损是\n$$\nD(t) \\equiv F_0 - F(t) = F_0 - \\left[F_0(1-\\alpha)+F_0\\alpha\\,\\frac{t-t_0}{t_1-t_0}\\right]\n= F_0\\alpha\\left(1-\\frac{t-t_0}{t_1-t_0}\\right)\n= F_0\\alpha\\,\\frac{t_1-t}{t_1-t_0}.\n$$\n因此，韧性损失面积是\n$$\nL=\\int_{t_0}^{t_1} D(t)\\,dt\n=\\int_{t_0}^{t_1} F_0\\alpha\\,\\frac{t_1-t}{t_1-t_0}\\,dt\n=\\frac{F_0\\alpha}{t_1-t_0}\\int_{t_0}^{t_1} (t_1-t)\\,dt.\n$$\n计算该积分：\n$$\n\\int_{t_0}^{t_1} (t_1-t)\\,dt\n=\\left[t_1 t-\\frac{t^2}{2}\\right]_{t_0}^{t_1}\n=\\left(t_1 t_1-\\frac{t_1^2}{2}\\right)-\\left(t_1 t_0-\\frac{t_0^2}{2}\\right)\n=\\frac{t_1^2}{2}-t_1 t_0+\\frac{t_0^2}{2}\n=\\frac{(t_1-t_0)^2}{2}.\n$$\n代入回去得到\n$$\nL=\\frac{F_0\\alpha}{t_1-t_0}\\cdot\\frac{(t_1-t_0)^2}{2}\n=\\frac{F_0\\alpha}{2}\\,(t_1-t_0).\n$$\n最后，所求的无量纲分数是\n$$\n\\rho=\\frac{L}{F_0\\,(t_1-t_0)}=\\frac{\\frac{F_0\\alpha}{2}(t_1-t_0)}{F_0\\,(t_1-t_0)}=\\frac{\\alpha}{2}.\n$$\n这个结果仅取决于初始下降分数 $\\alpha$，并反映了在持续时间 $t_1-t_0$ 内从一个量值为 $F_0\\alpha$ 的下降中进行线性恢复的三角形几何特征。",
            "answer": "$$\\boxed{\\frac{\\alpha}{2}}$$"
        },
        {
            "introduction": "在单一故障概念的基础上，这项实践将我们的视野扩展到网络层面。韧性建模的一个关键挑战是理解初始停运如何引发连锁故障。本问题使用线性灵敏度因子（功率传输分布因子 PTDFs 和线路停运分布因子 LODFs），这是一个强大的工具，系统运营商可以利用它来快速估算事故后的潮流并识别处于风险中的组件，而无需进行耗时的完整仿真 。",
            "id": "4118677",
            "problem": "一个独立系统运营商正在评估一个 $4$ 节点输电网在遭遇某一极端事件（即某关键通道突然断线）时的韧性。为快速评估连锁故障风险，该系统运营商不求解完全的交流潮流，而是依赖于线性直流近似和转移因子法。给定基准情况下的线路潮流和热容限制，以及相对于两个传输方向的功率转移分布因子 (PTDF; Power Transfer Distribution Factor)。所有数据对于高压网络而言均是物理上合理且自洽的。\n\n网络数据：\n- 线路（索引、端点）、基准潮流和热容限制：\n  - 线路 $1$ $(1\\text{–}2)$: 基准潮流 $70\\,\\mathrm{MW}$，限制 $120\\,\\mathrm{MW}$。\n  - 线路 $2$ $(1\\text{–}3)$: 基准潮流 $60\\,\\mathrm{MW}$，限制 $110\\,\\mathrm{MW}$。\n  - 线路 $3$ $(2\\text{–}3)$: 基准潮流 $80\\,\\mathrm{MW}$，限制 $100\\,\\mathrm{MW}$。\n  - 线路 $4$ $(2\\text{–}4)$: 基准潮流 $40\\,\\mathrm{MW}$，限制 $90\\,\\mathrm{MW}$。\n  - 线路 $5$ $(3\\text{–}4)$: 基准潮流 $30\\,\\mathrm{MW}$，限制 $90\\,\\mathrm{MW}$。\n\n压力方向（每 $1\\,\\mathrm{MW}$ 传输的 PTDF）：\n- 传输 $T$：在节点 $1$ 注入功率，在节点 $4$ 取出功率。\n  - $ \\mathrm{PTDF}_{1,T} = 0.30$, $ \\mathrm{PTDF}_{2,T} = 0.25$, $ \\mathrm{PTDF}_{3,T} = 0.10$, $ \\mathrm{PTDF}_{4,T} = 0.20$, $ \\mathrm{PTDF}_{5,T} = 0.15$。\n- 跨越线路 $3$ 端点的传输（在节点 $2$ 注入功率，在节点 $3$ 取出功率；用于参数化断线响应）：\n  - $ \\mathrm{PTDF}_{1,3} = 0.25$, $ \\mathrm{PTDF}_{2,3} = 0.35$, $ \\mathrm{PTDF}_{3,3} = 0.40$, $ \\mathrm{PTDF}_{4,3} = -0.15$, $ \\mathrm{PTDF}_{5,3} = 0.15$。\n\n极端事件：线路 $3$ 断线。\n\n仅使用线性转移因子法（不进行完整潮流计算），完成以下任务：\n- 使用由给定 PTDF 构建的线路断线分布因子 (LODF; Line Outage Distribution Factor) 来处理线路 $3$ 的断线。估算仅因线路 $3$ 断线而在完好线路上产生的故障后基准潮流。\n- 使用叠加原理，考虑在故障前计划的沿传输 $T$ 的一个大小为 $\\alpha \\ge 0$ 兆瓦的额外压力。推导在线路 $3$ 停运情况下传输 $T$ 的有效故障后 PTDF，并将故障后线路潮流写成关于 $\\alpha$ 的函数。\n- 确定最大的非负 $\\alpha$ 值，使得在线路 $3$ 断线后，每条完好线路的潮流大小都满足其热容限制。\n\n假设潮流方向如所列，并且所有给定的增量灵敏度在直流模型下都是准确的。为便于评分，仅报告最大安全传输比例因子 $\\alpha^{\\star}$。将 $\\alpha^{\\star}$ 表示为一个无量纲数，并将最终答案四舍五入到三位有效数字。",
            "solution": "该问题要求确定在一个 $4$ 节点电网中，当发生某关键线路断线的紧急情况时，沿指定传输通道的最大安全功率传输量 $\\alpha$。分析需使用直流 (DC) 潮流近似和线性灵敏度因子，特别是功率转移分布因子 (PTDF) 和线路断线分布因子 (LODF)。\n\n设 $F_{i,0}$ 为线路 $i$ 上的基准潮流，$L_i$ 为其热容限制。断开的线路是线路 $k=3$。完好线路的索引为 $i \\in \\{1, 2, 4, 5\\}$。一个额外的功率传输 $\\alpha \\ge 0$ 沿传输 $T$（在节点 $1$ 注入，在节点 $4$ 取出）被安排。\n\n核心原理是叠加原理。一条完好线路 $i$ 上的最终故障后潮流，记为 $F_{i, \\text{post}}(\\alpha)$，是其故障前潮流 $F_{i, \\text{pre}}(\\alpha)$ 与来自断开线路 $k=3$ 的潮流重新分布之和：\n$$ F_{i, \\text{post}}(\\alpha) = F_{i, \\text{pre}}(\\alpha) + \\Delta F_i $$\n故障前潮流是基准潮流与传输 $\\alpha$ 引起的潮流之和：\n$$ F_{i, \\text{pre}}(\\alpha) = F_{i,0} + \\text{PTDF}_{i,T} \\cdot \\alpha $$\n其中 $\\text{PTDF}_{i,T}$ 是线路 $i$ 上的潮流对沿传输 $T$ 的传输的灵敏度。\n\n因线路 $k$ 断线导致线路 $i$ 上潮流的变化由 LODF 给出：\n$$ \\Delta F_i = \\text{LODF}_{i,k} \\cdot F_{k, \\text{pre}}(\\alpha) $$\n其中 $F_{k, \\text{pre}}(\\alpha)$ 是断开线路 $k=3$ 上的故障前潮流。因线路 $k$ 断线对线路 $i$ 的 LODF 是由与线路 $k$ 两端节点（这里是节点 $2$ 到节点 $3$）之间的传输相关联的 PTDF 构建的。设此传输为 $T_k$。公式为：\n$$ \\text{LODF}_{i,k} = \\frac{\\text{PTDF}_{i,k}}{1 - \\text{PTDF}_{k,k}} $$\n在本问题中，$k=3$，且给定从节点 $2$到节点 $3$ 的传输的 PTDF，我们将其记为 $\\text{PTDF}_{i,3}$。我们有 $\\text{PTDF}_{3,3} = 0.40$。LODF 计算的分母是 $1 - \\text{PTDF}_{3,3} = 1 - 0.40 = 0.60$。\n\n我们计算因线路 $k=3$ 断线对每条完好线路 $i \\in \\{1, 2, 4, 5\\}$ 的 LODF：\n- $\\text{LODF}_{1,3} = \\frac{\\text{PTDF}_{1,3}}{1 - \\text{PTDF}_{3,3}} = \\frac{0.25}{0.60} = \\frac{5}{12}$\n- $\\text{LODF}_{2,3} = \\frac{\\text{PTDF}_{2,3}}{1 - \\text{PTDF}_{3,3}} = \\frac{0.35}{0.60} = \\frac{7}{12}$\n- $\\text{LODF}_{4,3} = \\frac{\\text{PTDF}_{4,3}}{1 - \\text{PTDF}_{3,3}} = \\frac{-0.15}{0.60} = -\\frac{1}{4}$\n- $\\text{LODF}_{5,3} = \\frac{\\text{PTDF}_{5,3}}{1 - \\text{PTDF}_{3,3}} = \\frac{0.15}{0.60} = \\frac{1}{4}$\n\n合并方程，完好线路 $i$ 上的故障后潮流为：\n$$ F_{i, \\text{post}}(\\alpha) = F_{i, \\text{pre}}(\\alpha) + \\text{LODF}_{i,3} \\cdot F_{3, \\text{pre}}(\\alpha) $$\n代入故障前潮流的表达式：\n$$ F_{i, \\text{post}}(\\alpha) = (F_{i,0} + \\text{PTDF}_{i,T} \\cdot \\alpha) + \\text{LODF}_{i,3} \\cdot (F_{3,0} + \\text{PTDF}_{3,T} \\cdot \\alpha) $$\n我们可以通过将含 $\\alpha$ 和不含 $\\alpha$ 的项分组来重新排列这个表达式：\n$$ F_{i, \\text{post}}(\\alpha) = (F_{i,0} + \\text{LODF}_{i,3} \\cdot F_{3,0}) + (\\text{PTDF}_{i,T} + \\text{LODF}_{i,3} \\cdot \\text{PTDF}_{3,T}) \\cdot \\alpha $$\n第一项 $(F_{i,0} + \\text{LODF}_{i,3} \\cdot F_{3,0})$ 是故障后基准潮流 $F_{i, \\text{post_base}}$。第二项的系数 $(\\text{PTDF}_{i,T} + \\text{LODF}_{i,3} \\cdot \\text{PTDF}_{3,T})$ 是传输 $T$ 的有效故障后 PTDF，我们记为 $\\text{PTDF}'_{i,T}$。方程变为：\n$$ F_{i, \\text{post}}(\\alpha) = F_{i, \\text{post_base}} + \\text{PTDF}'_{i,T} \\cdot \\alpha $$\n\n首先，我们使用 $F_{3,0} = 80\\,\\mathrm{MW}$ 计算故障后基准潮流 $F_{i, \\text{post_base}}$：\n- $F_{1, \\text{post_base}} = 70 + \\frac{5}{12} \\cdot 80 = 70 + \\frac{100}{3} = \\frac{310}{3}\\,\\mathrm{MW}$\n- $F_{2, \\text{post_base}} = 60 + \\frac{7}{12} \\cdot 80 = 60 + \\frac{140}{3} = \\frac{320}{3}\\,\\mathrm{MW}$\n- $F_{4, \\text{post_base}} = 40 + (-\\frac{1}{4}) \\cdot 80 = 40 - 20 = 20\\,\\mathrm{MW}$\n- $F_{5, \\text{post_base}} = 30 + \\frac{1}{4} \\cdot 80 = 30 + 20 = 50\\,\\mathrm{MW}$\n\n接下来，我们使用 $\\text{PTDF}_{3,T} = 0.10$ 计算有效故障后 PTDF $\\text{PTDF}'_{i,T}$：\n- $\\text{PTDF}'_{1,T} = 0.30 + \\frac{5}{12} \\cdot 0.10 = \\frac{3}{10} + \\frac{5}{120} = \\frac{36+5}{120} = \\frac{41}{120}$\n- $\\text{PTDF}'_{2,T} = 0.25 + \\frac{7}{12} \\cdot 0.10 = \\frac{1}{4} + \\frac{7}{120} = \\frac{30+7}{120} = \\frac{37}{120}$\n- $\\text{PTDF}'_{4,T} = 0.20 + (-\\frac{1}{4}) \\cdot 0.10 = 0.20 - 0.025 = 0.175 = \\frac{7}{40}$\n- $\\text{PTDF}'_{5,T} = 0.15 + \\frac{1}{4} \\cdot 0.10 = 0.15 + 0.025 = 0.175 = \\frac{7}{40}$\n\n每条完好线路 $i$ 的安全约束是其故障后潮流的大小不超过其热容限制 $L_i$：\n$$ |F_{i, \\text{post}}(\\alpha)| \\le L_i \\quad \\implies \\quad -L_i \\le F_{i, \\text{post_base}} + \\text{PTDF}'_{i,T} \\cdot \\alpha \\le L_i $$\n给定 $\\alpha \\ge 0$，并观察到对于所有 $i \\in \\{1, 2, 4, 5\\}$，$F_{i, \\text{post_base}}$ 和 $\\text{PTDF}'_{i,T}$ 均为正，因此潮流 $F_{i, \\text{post}}(\\alpha)$ 将是正的并随 $\\alpha$ 增加。因此，约束 $-L_i \\le F_{i, \\text{post}}(\\alpha)$ 总是满足的，因为 $F_{i, \\text{post}}(\\alpha) \\ge F_{i, \\text{post_base}}  0  -L_i$。起作用的约束简化为：\n$$ F_{i, \\text{post_base}} + \\text{PTDF}'_{i,T} \\cdot \\alpha \\le L_i $$\n这为每条线路的 $\\alpha$ 提供了一个上限：\n$$ \\alpha \\le \\frac{L_i - F_{i, \\text{post_base}}}{\\text{PTDF}'_{i,T}} $$\n我们现在为每条完好线路计算这个极限：\n- **线路 1:** $L_1 = 120\\,\\mathrm{MW}$。\n  $$ \\alpha \\le \\frac{120 - \\frac{310}{3}}{\\frac{41}{120}} = \\frac{\\frac{360-310}{3}}{\\frac{41}{120}} = \\frac{\\frac{50}{3}}{\\frac{41}{120}} = \\frac{50}{3} \\cdot \\frac{120}{41} = \\frac{2000}{41} \\approx 48.78 $$\n- **线路 2:** $L_2 = 110\\,\\mathrm{MW}$。\n  $$ \\alpha \\le \\frac{110 - \\frac{320}{3}}{\\frac{37}{120}} = \\frac{\\frac{330-320}{3}}{\\frac{37}{120}} = \\frac{\\frac{10}{3}}{\\frac{37}{120}} = \\frac{10}{3} \\cdot \\frac{120}{37} = \\frac{400}{37} \\approx 10.81 $$\n- **线路 4:** $L_4 = 90\\,\\mathrm{MW}$。\n  $$ \\alpha \\le \\frac{90 - 20}{\\frac{7}{40}} = \\frac{70}{\\frac{7}{40}} = 70 \\cdot \\frac{40}{7} = 400 $$\n- **线路 5:** $L_5 = 90\\,\\mathrm{MW}$。\n  $$ \\alpha \\le \\frac{90 - 50}{\\frac{7}{40}} = \\frac{40}{\\frac{7}{40}} = 40 \\cdot \\frac{40}{7} = \\frac{1600}{7} \\approx 228.57 $$\n\n为确保没有线路超出其限制，$\\alpha$ 必须小于或等于这些单个上限中的最小值。因此，最大安全值 $\\alpha^{\\star}$ 为：\n$$ \\alpha^{\\star} = \\min \\left( \\frac{2000}{41}, \\frac{400}{37}, 400, \\frac{1600}{7} \\right) = \\frac{400}{37} $$\n数值上，$\\alpha^{\\star} \\approx 10.81081...$。四舍五入到三位有效数字得到 $10.8$。",
            "answer": "$$\\boxed{10.8}$$"
        },
        {
            "introduction": "在分析了故障如何传播之后，最后一步是规划有效的应对措施。这项实践聚焦于恢复阶段，这是韧性的核心。我们将其作为一个最优资源分配问题来处理，即我们必须调度维修团队以最小化总体影响（加权停运能量），同时考虑到诸如行程时间和维修时长等现实世界约束。本练习展示了如何将韧性目标转化为一个可操作的优化模型 。",
            "id": "4118633",
            "problem": "一场极端风暴导致一个辐射式配电网络中出现三处不相交的线路区段故障，形成了三个孤立的负荷区。每个负荷区在其对应的受损区段被修复后即可恢复供电，且由于这些负荷区是电气隔离的，维修之间没有优先顺序约束。两支移动维修班组在时间 $t = 0$ 从一个共同的场站出发，每支班组一次只能维修一个区段。各地点之间的行程时间以及维修持续时间是确定且已知的。定义一个韧性指标为加权停电能量，其等于未供应功率对时间的积分，其中每个负荷区带有一个恒定的关键性权重，代表其功率和社会重要性。规划目标是调度班组以最小化总加权停电能量。\n\n从停电能量等于未供应功率对时间的积分这一释义出发，并认识到对于每个负荷区 $j$，供电恢复发生在其维修于时间 $C_j$ 完成之时，请推导一个混合整数线性规划（MILP）模型。该模型需要将任务分配给班组，并施加带有行程时间的无重叠任务序列。您的公式必须引入适当的集合、参数、决策变量（包括二元分配/顺序变量和连续时间变量）以及约束条件，以确保每个班组都有一条从场站开始的有效路径，维修开始时间不早于到达时间，并且不允许多个班组同时维修同一任务。目标必须是最小化总加权停电能量。在任何大M时间关联约束中出现的大常数 $M$ 都应根据调度周期的上界进行定义和论证。\n\n然后，将您的公式应用于以下数据实例，以计算最小加权停电能量。有两支班组，索引为 $i \\in \\{1,2\\}$，以及三个维修任务，索引为 $j \\in \\{1,2,3\\}$。关键性权重（可解释为恒定功率）为 $w_1 = 80 \\text{ MW}$，$w_2 = 40 \\text{ MW}$ 和 $w_3 = 20 \\text{ MW}$。维修持续时间为 $r_1 = 2.0 \\text{ h}$，$r_2 = 1.5 \\text{ h}$ 和 $r_3 = 1.0 \\text{ h}$。从场站到各任务的行程时间为 $t_{0,1} = 0.5 \\text{ h}$，$t_{0,2} = 0.3 \\text{ h}$ 和 $t_{0,3} = 0.6 \\text{ h}$。任务间的行程时间是对称的，给定为 $t_{1,2} = 0.4 \\text{ h}$，$t_{1,3} = 0.7 \\text{ h}$ 和 $t_{2,3} = 0.5 \\text{ h}$；对称性意味着 $t_{2,1} = t_{1,2}$，$t_{3,1} = t_{1,3}$ 和 $t_{3,2} = t_{2,3}$。\n\n计算此数据实例的最小目标值（总加权停电能量）。最终能量以 $\\mathrm{MWh}$ 表示，并将您的答案四舍五入到四位有效数字。最终答案只提供数值。",
            "solution": "该问题要求建立一个混合整数线性规划（MILP）公式，以最小化总加权停电能量。单个孤立负荷区 $j$ 的停电能量是其未供应功率 $w_j$ 与停电持续时间（即到维修完成时的时间 $C_j$）的乘积。总加权停电能量是所有负荷区的总和，即 $\\sum_{j} w_j C_j$。时间 $C_j$ 是维修开始时间 $S_j$ 和维修持续时间 $r_j$ 的和。这个问题是多场站车辆路径问题的一个变体，其目标是最小化完成时间的加权总和。\n\n首先，我将推导通用的MILP公式。\n\n**1. MILP 公式**\n\n集合与索引：\n- $I$: 维修班组集合，由 $i$ 索引。\n- $J$: 维修任务（故障）集合，由 $j$ 索引。\n- $J_0$: 所有地点集合，$J_0 = J \\cup \\{0\\}$，其中 $0$ 是场站。\n\n参数：\n- $w_j$: 任务 $j \\in J$ 的关键性权重（单位：$\\mathrm{MW}$）。\n- $r_j$: 任务 $j \\in J$ 的维修持续时间（单位：$\\mathrm{h}$）。\n- $t_{jk}$: 从地点 $j \\in J_0$ 到地点 $k \\in J_0$ 的行程时间（单位：$\\mathrm{h}$）。\n\n决策变量：\n- $x_{ijk}$: 一个二元变量，如果班组 $i \\in I$ 从地点 $j \\in J_0$ 前往地点 $k \\in J_0$，则为 $1$，否则为 $0$。\n- $S_j$: 一个连续非负变量，表示任务 $j \\in J$ 的维修开始时间。\n- $C_j$: 一个连续非负变量，表示任务 $j \\in J$ 的维修完成时间。\n\n目标函数：\n目标是最小化总加权停电能量。\n$$ \\text{最小化} \\quad Z = \\sum_{j \\in J} w_j C_j $$\n\n约束条件：\n1.  **任务分配**：每个任务必须由某个班组访问和维修一次。流入任何任务节点 $j$ 的总流量必须为 $1$。\n    $$ \\sum_{i \\in I} \\sum_{k \\in J_0, k \\neq j} x_{ikj} = 1 \\quad \\forall j \\in J $$\n2.  **班组出发**：每个班组最多从场站出发一次，因为没有返回要求，并且如果 $|I|  |J|$，可能有班组闲置。\n    $$ \\sum_{k \\in J} x_{i0k} \\le 1 \\quad \\forall i \\in I $$\n3.  **流量守恒**：对于每个班组，如果它到达一个任务地点，它也必须从那里出发，以确保形成一个有效的任务序列。\n    $$ \\sum_{k \\in J_0, k \\neq j} x_{ikj} = \\sum_{k \\in J_0, k \\neq j} x_{ijk} \\quad \\forall i \\in I, \\forall j \\in J $$\n4.  **完成时间定义**：任务的完成时间是其开始时间加上维修持续时间。\n    $$ C_j = S_j + r_j \\quad \\forall j \\in J $$\n5.  **从场站开始的时间传播**：由班组 $i$ 首先服务的任务 $k$ 的开始时间不得早于从场站出发的行程时间。这通过一个大M约束来强制执行。\n    $$ S_k \\ge t_{0k} - M(1 - \\sum_{i \\in I} x_{i0k}) \\quad \\forall k \\in J $$\n    一个将此与单个班组关联的公式通常更受青睐，但由于 $S_k$ 是任务 $k$ 的全局定义变量，因此对 $i$ 求和。一个更严谨的形式是：\n    $$ S_k \\ge t_{0k} \\sum_{i \\in I} x_{i0k} \\quad \\forall k \\in J $$\n    然而，这是一个非线性约束。标准的线性大M形式是：\n    $$ S_k \\ge t_{0k} - M(1 - x_{i0k}) \\quad \\forall i \\in I, \\forall k \\in J $$\n6.  **任务间的时间传播**：如果任务 $k$ 和任务 $j$ 由同一班组按顺序执行，则任务 $k$ 的开始时间不得早于前一个任务 $j$ 的完成时间加上它们之间的行程时间。\n    $$ S_k \\ge C_j + t_{jk} - M(1 - x_{ijk}) \\quad \\forall i \\in I, \\forall j, k \\in J, j \\neq k $$\n    代入 $C_j = S_j + r_j$：\n    $$ S_k \\ge S_j + r_j + t_{jk} - M(1 - x_{ijk}) \\quad \\forall i \\in I, \\forall j, k \\in J, j \\neq k $$\n    这些基于时间的约束也用于消除非法的子回路（例如 $j \\to k \\to j$）。一个 $j \\to k \\to j$ 的循环将意味着 $S_k \\ge S_j + r_j + t_{jk}$ 和 $S_j \\ge S_k + r_k + t_{kj}$。将第一个不等式代入第二个，得到 $S_j \\ge (S_j + r_j + t_{jk}) + r_k + t_{kj}$，简化为 $0 \\ge r_j+t_{jk}+r_k+t_{kj}$。由于所有持续时间和行程时间都是非负的（对于不同地点是严格正的），这个不等式无法满足，因此可以防止子回路的产生。\n\n7.  **大M常数论证**：常数 $M$ 必须是一个足够大的正数。其目的是在对应的二元变量 $x_{ijk}$ 为 $0$ 时，使约束变得无约束力。$M$ 的选择必须大于它所要控制的表达式的任何可能值。调度周期（最晚可能的完成时间）的一个有效上界可以通过考虑最坏情况来构建，例如单个班组执行所有任务。一个安全的、偏大的估计 $M$ 是所有维修时间和行程时间的总和：$M \\ge \\sum_{j \\in J} r_j + \\sum_{j,k \\in J_0} t_{jk}$。\n\n**2. 应用于数据实例**\n\n该问题实例涉及 $2$ 支班组和 $3$ 个任务。这意味着一支班组将处理一个任务，另一支班组将处理两个任务。可能的调度方案数量很少，可以完全枚举。我们必须找到任务 $\\{1, 2, 3\\}$ 到两个大小分别为 $1$ 和 $2$ 的集合的划分，并为包含两个任务的集合找到最优序列。\n\n目标是最小化 $Z = 80 C_1 + 40 C_2 + 20 C_3$。\n数据为：$w_1=80$, $w_2=40$, $w_3=20$; $r_1=2.0$, $r_2=1.5$, $r_3=1.0$; $t_{0,1}=0.5$, $t_{0,2}=0.3$, $t_{0,3}=0.6$; $t_{1,2}=0.4$, $t_{1,3}=0.7$, $t_{2,3}=0.5$。\n\n有 $\\binom{3}{1} = 3$ 种划分任务的方式：\n1.  划分：$\\{$任务 $1\\}$，$\\{$任务 $2, 3\\}$\n2.  划分：$\\{$任务 $2\\}$，$\\{$任务 $1, 3\\}$\n3.  划分：$\\{$任务 $3\\}$，$\\{$任务 $1, 2\\}$\n\n对于每种划分，我们评估处理两个任务的班组的两种可能序列。\n\n情况1：班组A负责任务 $1$；班组B负责任务 $2, 3$。\n-   班组A：$C_1 = t_{0,1} + r_1 = 0.5 + 2.0 = 2.5$ $\\mathrm{h}$。\n-   班组B，序列 $0 \\to 2 \\to 3$：\n    -   $S_2 = t_{0,2} = 0.3$。$C_2 = 0.3 + r_2 = 0.3 + 1.5 = 1.8$ $\\mathrm{h}$。\n    -   $S_3 = C_2 + t_{2,3} = 1.8 + 0.5 = 2.3$。$C_3 = 2.3 + r_3 = 2.3 + 1.0 = 3.3$ $\\mathrm{h}$。\n    -   能量 = $80(2.5) + 40(1.8) + 20(3.3) = 200 + 72 + 66 = 338$ $\\mathrm{MWh}$。\n-   班组B，序列 $0 \\to 3 \\to 2$：\n    -   $S_3 = t_{0,3} = 0.6$。$C_3 = 0.6 + r_3 = 0.6 + 1.0 = 1.6$ $\\mathrm{h}$。\n    -   $S_2 = C_3 + t_{3,2} = 1.6 + 0.5 = 2.1$。$C_2 = 2.1 + r_2 = 2.1 + 1.5 = 3.6$ $\\mathrm{h}$。\n    -   能量 = $80(2.5) + 40(3.6) + 20(1.6) = 200 + 144 + 32 = 376$ $\\mathrm{MWh}$。\n此划分的最小值为 $338$ $\\mathrm{MWh}$。\n\n情况2：班组A负责任务 $2$；班组B负责任务 $1, 3$。\n-   班组A：$C_2 = t_{0,2} + r_2 = 0.3 + 1.5 = 1.8$ $\\mathrm{h}$。\n-   班组B，序列 $0 \\to 1 \\to 3$：\n    -   $S_1 = t_{0,1} = 0.5$。$C_1 = 0.5 + r_1 = 0.5 + 2.0 = 2.5$ $\\mathrm{h}$。\n    -   $S_3 = C_1 + t_{1,3} = 2.5 + 0.7 = 3.2$。$C_3 = 3.2 + r_3 = 3.2 + 1.0 = 4.2$ $\\mathrm{h}$。\n    -   能量 = $80(2.5) + 40(1.8) + 20(4.2) = 200 + 72 + 84 = 356$ $\\mathrm{MWh}$。\n-   班组B，序列 $0 \\to 3 \\to 1$：\n    -   $S_3 = t_{0,3} = 0.6$。$C_3 = 0.6 + r_3 = 0.6 + 1.0 = 1.6$ $\\mathrm{h}$。\n    -   $S_1 = C_3 + t_{3,1} = 1.6 + 0.7 = 2.3$。$C_1 = 2.3 + r_1 = 2.3 + 2.0 = 4.3$ $\\mathrm{h}$。\n    -   能量 = $80(4.3) + 40(1.8) + 20(1.6) = 344 + 72 + 32 = 448$ $\\mathrm{MWh}$。\n此划分的最小值为 $356$ $\\mathrm{MWh}$。\n\n情况3：班组A负责任务 $3$；班组B负责任务 $1, 2$。\n-   班组A：$C_3 = t_{0,3} + r_3 = 0.6 + 1.0 = 1.6$ $\\mathrm{h}$。\n-   班组B，序列 $0 \\to 1 \\to 2$：\n    -   $S_1 = t_{0,1} = 0.5$。$C_1 = 0.5 + r_1 = 0.5 + 2.0 = 2.5$ $\\mathrm{h}$。\n    -   $S_2 = C_1 + t_{1,2} = 2.5 + 0.4 = 2.9$。$C_2 = 2.9 + r_2 = 2.9 + 1.5 = 4.4$ $\\mathrm{h}$。\n    -   能量 = $80(2.5) + 40(4.4) + 20(1.6) = 200 + 176 + 32 = 408$ $\\mathrm{MWh}$。\n-   班组B，序列 $0 \\to 2 \\to 1$：\n    -   $S_2 = t_{0,2} = 0.3$。$C_2 = 0.3 + r_2 = 0.3 + 1.5 = 1.8$ $\\mathrm{h}$。\n    -   $S_1 = C_2 + t_{2,1} = 1.8 + 0.4 = 2.2$。$C_1 = 2.2 + r_1 = 2.2 + 2.0 = 4.2$ $\\mathrm{h}$。\n    -   能量 = $80(4.2) + 40(1.8) + 20(1.6) = 336 + 72 + 32 = 440$ $\\mathrm{MWh}$。\n此划分的最小值为 $408$ $\\mathrm{MWh}$。\n\n比较各种情况的最小值：$\\{338, 356, 408\\}$。全局最小总加权停电能量为 $338$ $\\mathrm{MWh}$。最优调度方案是：班组A执行任务 $1$（$C_1 = 2.5$ $\\mathrm{h}$），班组B先执行任务 $2$ 再执行任务 $3$（$C_2 = 1.8$ $\\mathrm{h}$, $C_3 = 3.3$ $\\mathrm{h}$）。\n\n最终值 $338$ 四舍五入到四位有效数字是 $338.0$。",
            "answer": "$$\n\\boxed{338.0}\n$$"
        }
    ]
}
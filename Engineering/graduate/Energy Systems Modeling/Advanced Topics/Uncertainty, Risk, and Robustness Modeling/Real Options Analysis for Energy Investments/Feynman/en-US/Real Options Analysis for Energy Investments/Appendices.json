{
    "hands_on_practices": [
        {
            "introduction": "The binomial lattice is a foundational and versatile numerical tool for valuing real options. This exercise guides you through building a recombining binomial model from first principles, providing a concrete understanding of how the complex dynamics of a stochastic process can be approximated in discrete time. By implementing the backward induction algorithm for an American option, you will directly engage with the core decision at the heart of real options analysis: comparing the value of immediate exercise against the value of waiting for more information .",
            "id": "4115364",
            "problem": "Consider an energy investment problem where the gross project value $X_t$ (in million United States dollars) evolves stochastically over continuous time following a Geometric Brownian Motion (GBM). Assume a frictionless market, absence of arbitrage, and the existence of a unique equivalent martingale measure (risk-neutral measure). Under the risk-neutral measure, $X_t$ satisfies the stochastic differential equation\n$$dX_t = (r - \\delta) X_t \\, dt + \\sigma X_t \\, dW_t,$$\nwith constant parameters: risk-free continuously compounded rate $r$, continuous payout yield $\\delta$, and volatility $\\sigma$. The decision-maker holds a real option to invest by paying an irreversible investment cost $I$ (in million United States dollars) at any time $t \\in [0, T]$. Upon investment, the project is immediately realized and its payoff equals the net present value at that time, modeled as $\\max(X_t - I, 0)$ (in million United States dollars). The option is of American style, meaning exercise is allowed at any time prior to or at maturity.\n\nYour task is to design and implement a recombining binomial lattice method to value this American real option at time $t=0$. The discretization must be constructed from first principles: starting from the GBM dynamics under the risk-neutral measure and imposing the no-arbitrage condition, derive the up and down multipliers and the risk-neutral transition probability by matching the first two moments of the one-step transition to leading order in the time step $\\Delta t$. Then, perform backward induction with discounting to compute the American option value. Early exercise must be handled by comparing continuation value to immediate exercise value at each node. The discounting must use the factor $e^{-r \\Delta t}$ per lattice step.\n\nThe program must also correctly handle the degenerate limit $\\sigma = 0$, in which the stochastic process becomes deterministic under the risk-neutral measure. In this case, the lattice construction degenerates and you must implement a logically consistent valuation that respects the optimal stopping nature of the American option over a discrete set of exercise times. When $T = 0$, the value reduces to the immediate payoff at $t=0$.\n\nAll outputs must be expressed in million United States dollars (million USD) as real-valued floats. Angles are not involved. If any quantity is to be expressed as a percentage, it must be in decimal form; however, this problem uses continuously compounded rates $r$ and $\\delta$ as decimals per year.\n\nImplement a program that, given the following test suite of parameter sets $(X_0, I, r, \\delta, \\sigma, T, N)$, computes the option value at $t=0$ using a recombining binomial lattice with $N$ time steps of size $\\Delta t = T/N$:\n\n- Test Case 1 (general case, happy path): $(X_0, I, r, \\delta, \\sigma, T, N) = (100.0, 90.0, 0.06, 0.02, 0.20, 3.0, 150)$.\n- Test Case 2 (degenerate volatility, $\\sigma = 0$): $(X_0, I, r, \\delta, \\sigma, T, N) = (120.0, 100.0, 0.06, 0.00, 0.00, 2.0, 50)$.\n- Test Case 3 (boundary maturity, $T = 0$): $(X_0, I, r, \\delta, \\sigma, T, N) = (80.0, 100.0, 0.05, 0.02, 0.25, 0.0, 1)$.\n- Test Case 4 (high payout yield, negative risk-neutral drift): $(X_0, I, r, \\delta, \\sigma, T, N) = (150.0, 140.0, 0.05, 0.25, 0.30, 2.0, 100)$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, in the same order as the test suite, for example: \"[result1,result2,result3,result4]\". Each result must be a float representing the option value at $t=0$ in million USD.\n\nThe derivation and algorithmic design must begin from core probabilistic and financial principles in continuous time (GBM under the risk-neutral measure and no-arbitrage), and proceed to construct a valid recombining binomial approximation and optimal stopping valuation via backward induction. Do not use shortcut formulas without explanation in your derivation; instead, derive the discrete parameters and the valuation recursion from the stated foundational base.",
            "solution": "The problem requires the valuation of an American-style real option on an energy project. The value of this option will be computed using a recombining binomial lattice model. The problem is well-posed, scientifically grounded in financial engineering principles, and provides all necessary data for a unique solution.\n\nThe solution proceeds in three stages:\n1.  Derivation of the discrete-time binomial lattice parameters ($u$, $d$, $p$) by ensuring consistency with the specified continuous-time Geometric Brownian Motion (GBM) model under the risk-neutral measure.\n2.  Formulation of the backward induction algorithm for valuing the American option, which involves comparing the continuation value with the immediate exercise value at each node of the lattice.\n3.  Specification of the correct logical procedures for the degenerate cases where the volatility $\\sigma=0$ or the time to maturity $T=0$.\n\n**1. Continuous-Time Model and Binomial Discretization**\n\nThe gross project value, $X_t$, is stipulated to follow a Geometric Brownian Motion under the risk-neutral measure $Q$. The stochastic differential equation (SDE) is:\n$$\ndX_t = (r - \\delta) X_t \\, dt + \\sigma X_t \\, dW_t\n$$\nwhere $r$ is the risk-free rate, $\\delta$ is the continuous payout yield, $\\sigma$ is the volatility, and $W_t$ is a standard Wiener process under $Q$.\n\nWe aim to approximate this continuous process with a discrete-time binomial lattice over $N$ time steps of duration $\\Delta t = T/N$. In this lattice, if the project value at a node is $X$, in the next time step $\\Delta t$, it can move up to $X \\cdot u$ or down to $X \\cdot d$, where $u$ and $d$ are the multiplicative up and down factors, respectively. The lattice must be constructed to be recombining, meaning a sequence of an up-move followed by a down-move results in the same value as a down-move followed by an up-move ($ud=du$). This is satisfied if $ud=1$.\n\n**2. Derivation of Lattice Parameters**\n\nThe parameters of the discrete model—the up-factor $u$, the down-factor $d$, and the risk-neutral probability of an up-move $p$—are derived by matching the moments of the discrete process to those of the continuous process to a leading order in $\\Delta t$. The most common and robust approach, proposed by Cox, Ross, and Rubinstein (CRR), is as follows.\n\nFirst, we set the up and down factors to match the volatility of the underlying process. The variance of the log-return over a period $\\Delta t$ in the continuous model is $\\text{Var}[\\ln(X_{t+\\Delta t}/X_t)] = \\sigma^2 \\Delta t$. We enforce this in our one-step binomial model where the log-return is either $\\ln u$ or $\\ln d$. By setting the movements to be symmetric around zero, $\\ln u = -\\ln d$, we choose:\n$$\nu = e^{\\sigma \\sqrt{\\Delta t}} \\quad \\text{and} \\quad d = e^{-\\sigma \\sqrt{\\Delta t}}\n$$\nThis choice ensures $ud=1$, making the lattice recombining. It also matches the variance of the log-return of the process.\n\nSecond, we determine the risk-neutral probability $p$ by matching the expected return. In a risk-neutral world, the expected value of an asset that pays a continuous yield $\\delta$ must grow at the rate $r-\\delta$. Therefore, the discounted asset price $e^{-(r-\\delta)t}X_t$ must be a martingale. This implies $E_t^Q[X_{t+\\Delta t}] = X_t e^{(r-\\delta)\\Delta t}$.\nIn our discrete model, the expected value of $X_{t+\\Delta t}$ is $p(X_t u) + (1-p)(X_t d)$. Equating the two gives:\n$$\np(X_t u) + (1-p)(X_t d) = X_t e^{(r-\\delta)\\Delta t}\n$$\nDividing by $X_t$ and solving for $p$:\n$$\np(u-d) + d = e^{(r-\\delta)\\Delta t}\n$$\n$$\np = \\frac{e^{(r-\\delta)\\Delta t} - d}{u - d}\n$$\nThese choices for $u$, $d$, and $p$ define our recombining binomial lattice that approximates the given GBM.\n\n**3. Valuation Algorithm: Backward Induction**\n\nThe value of the American option is found by backward induction on the lattice.\n\n**Step 3.1: Terminal Condition**\nAt the maturity time $T$ (or step $j=N$), the option will be exercised if and only if the project value $X_{N,i}$ exceeds the investment cost $I$. The value of the option at each of the $N+1$ terminal nodes $(N, i)$ is therefore its intrinsic value:\n$$\nV_{N,i} = \\max(X_{N,i} - I, 0)\n$$\nwhere $i$ is the number of up-moves ($i = 0, 1, \\dots, N$) and $X_{N,i} = X_0 u^i d^{N-i}$.\n\n**Step 3.2: Recursive Step**\nWe then step backward in time from $j=N-1$ down to $j=0$. At any node $(j, i)$, the holder of the American option has two choices: exercise immediately or wait (continue).\n\nThe value of immediate exercise is the intrinsic value at that node:\n$$\nE_{j,i} = \\max(X_{j,i} - I, 0)\n$$\nwhere $X_{j,i} = X_0 u^i d^{j-i}$.\n\nThe value of continuing (holding the option for another period) is the discounted expected value of the option in the next period, under the risk-neutral measure:\n$$\nC_{j,i} = e^{-r \\Delta t} \\left[ p \\cdot V_{j+1, i+1} + (1-p) \\cdot V_{j+1, i} \\right]\n$$\nwhere $V_{j+1, i+1}$ and $V_{j+1, i}$ are the known option values at the subsequent up and down nodes, respectively.\n\nSince the option is American, the holder will choose the action that maximizes value. Thus, the option value at node $(j,i)$ is:\n$$\nV_{j,i} = \\max(C_{j,i}, E_{j,i})\n$$\nThis recursion is repeated until we reach the root of the tree at $j=0$, $i=0$. The value $V_{0,0}$ is the desired option value at time $t=0$.\n\n**4. Handling of Special Cases**\n\nThe general algorithm must be adapted for two specific degenerate cases provided in the test suite.\n\n**Case 1: $T=0$ (Zero Maturity)**\nIf the time to maturity is zero, the option must be exercised immediately or it expires worthless. There is no time value. The value is simply the payoff from immediate exercise at $t=0$:\n$$\nV_0 = \\max(X_0 - I, 0)\n$$\n\n**Case 2: $\\sigma=0$ (Zero Volatility)**\nIf the volatility is zero, the stochastic process degenerates into a deterministic one. The SDE becomes an ordinary differential equation $dX_t = (r - \\delta) X_t dt$, with the solution:\n$$\nX_t = X_0 e^{(r-\\delta)t}\n$$\nThe future path of the project value is known with certainty. The standard binomial parameter formulas fail because $u=d=1$, leading to division by zero for $p$. Instead, the problem reduces to finding the optimal exercise time $t^*$ from the discrete set of possible exercise dates $\\{t_j = j \\Delta t \\mid j=0, 1, \\dots, N\\}$.\nThe value at $t=0$ of exercising at a future time $t_j$ is the discounted payoff:\n$$\n\\text{Value}(t_j) = e^{-r t_j} \\max(X_{t_j} - I, 0) = e^{-r t_j} \\max(X_0 e^{(r-\\delta)t_j} - I, 0)\n$$\nThe optimal strategy is to choose the time $t_j$ that maximizes this value. The option value is therefore:\n$$\nV_0 = \\max_{j \\in \\{0, 1, \\dots, N\\}} \\left\\{ e^{-r (j \\Delta t)} \\max(X_0 e^{(r-\\delta)(j \\Delta t)} - I, 0) \\right\\}\n$$\nThis is a simple optimization problem over $N+1$ discrete choices.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n# from scipy import ...\n\ndef solve():\n    \"\"\"\n    Main function to solve the problem for the given test cases.\n    It computes the value of an American real option using a binomial lattice model.\n    \"\"\"\n\n    def compute_option_value(X0, I, r, delta, sigma, T, N):\n        \"\"\"\n        Computes the American real option value for a single set of parameters.\n\n        Args:\n            X0 (float): Initial project value.\n            I (float): Investment cost.\n            r (float): Risk-free rate.\n            delta (float): Continuous payout yield.\n            sigma (float): Volatility.\n            T (float): Time to maturity in years.\n            N (int): Number of time steps in the binomial lattice.\n\n        Returns:\n            float: The value of the American option at time t=0.\n        \"\"\"\n        # Handle the degenerate case where maturity T=0.\n        if T == 0:\n            return max(X0 - I, 0.0)\n\n        # Handle the degenerate case where volatility sigma=0.\n        # The process is deterministic.\n        if sigma == 0:\n            dt = T / N\n            # Create an array of discrete time points for possible exercise.\n            times = np.arange(N + 1) * dt\n            \n            # Calculate project values at each time point.\n            project_values = X0 * np.exp((r - delta) * times)\n            \n            # Calculate intrinsic payoffs at each time point.\n            payoffs = np.maximum(project_values - I, 0.0)\n            \n            # Discount payoffs back to t=0.\n            discount_factors = np.exp(-r * times)\n            discounted_payoffs = payoffs * discount_factors\n            \n            # The option value is the maximum of all possible discounted payoffs.\n            return np.max(discounted_payoffs)\n\n        # Standard binomial lattice model for sigma > 0.\n        dt = T / N\n        \n        # Calculate Cox-Ross-Rubinstein (CRR) parameters.\n        u = np.exp(sigma * np.sqrt(dt))\n        d = 1.0 / u\n        p = (np.exp((r - delta) * dt) - d) / (u - d)\n        \n        discount_factor = np.exp(-r * dt)\n\n        # Initialize a 1D array to store option values at each step.\n        # Start with terminal values at maturity T (step N).\n        # There are N+1 nodes at the final step.\n        # Prices at maturity: S_T = S_0 * u^i * d^(N-i) for i = 0 to N\n        # This can be computed efficiently.\n        prices_at_maturity = X0 * (d ** np.arange(N, -1, -1)) * (u ** np.arange(0, N + 1, 1))\n        V = np.maximum(prices_at_maturity - I, 0.0)\n\n        # Perform backward induction from step N-1 to 0.\n        for j in range(N - 1, -1, -1):\n            # The V array currently holds j+2 values from step j+1.\n            # We compute j+1 values for step j.\n            \n            # Continuation value: discounted expected value of the next step.\n            # V[:-1] corresponds to V_{j+1, i} states, V[1:] to V_{j+1, i+1} states.\n            continuation_values = discount_factor * (p * V[1:j+2] + (1 - p) * V[0:j+1])\n            \n            # Project prices at step j.\n            prices_at_j = X0 * (d ** np.arange(j, -1, -1)) * (u ** np.arange(0, j + 1, 1))\n            \n            # Exercise values at step j.\n            exercise_values = np.maximum(prices_at_j - I, 0.0)\n            \n            # For American option, the value at each node is the max of continuing and exercising.\n            V = np.maximum(continuation_values, exercise_values)\n\n        # The final result is the single value at the root of the tree.\n        return V[0]\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # (X0, I, r, delta, sigma, T, N)\n        (100.0, 90.0, 0.06, 0.02, 0.20, 3.0, 150),\n        (120.0, 100.0, 0.06, 0.00, 0.00, 2.0, 50),\n        (80.0, 100.0, 0.05, 0.02, 0.25, 0.0, 1),\n        (150.0, 140.0, 0.05, 0.25, 0.30, 2.0, 100),\n    ]\n\n    results = []\n    for case in test_cases:\n        result = compute_option_value(*case)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "While numerical methods are powerful, analytical models can provide unparalleled clarity on the influence of specific economic variables. This problem explores the crucial impact of inflation on investment timing by comparing optimal strategies under inflation-indexed versus fixed nominal costs. By solving for the investment threshold in a perpetual American option framework, you will see firsthand how the erosion of a fixed nominal cost by inflation incentivizes waiting, leading to a higher investment trigger .",
            "id": "4115355",
            "problem": "An independent power producer is considering a perpetual option to invest in a flexible natural gas peaker unit whose net operating cash flow is proportional to an energy market state variable. Let the underlying real project value be $X_t$, modeled under the risk-neutral measure as a Geometric Brownian Motion (GBM) with constant volatility and payout yield. Specifically, in real units, $X_t$ satisfies\n$$dX_t = X_t \\left( (r_r - \\delta) \\, dt + \\sigma \\, dW_t \\right),$$\nwhere $r_r$ is the continuously compounded real risk-free rate, $\\delta$ is a constant cash-flow or dividend yield in real terms, $\\sigma$ is the volatility, and $W_t$ is a standard Brownian motion.\n\nInflation is modeled as a continuously compounded rate $\\pi$, and the nominal short rate $r_n$ is related to the real short rate $r_r$ by the Fisher relation $r_n = r_r + \\pi$. The corresponding nominal value process is $S_t = I_t X_t$ where $I_t$ is the price level, which under the risk-neutral measure implies\n$$dS_t = S_t \\left( (r_n - \\delta) \\, dt + \\sigma \\, dW_t \\right),$$\nsince the payout yield applies proportionally to the nominal value.\n\nThe firm has two alternative contracting structures for the investment cost:\n- Case R (indexed cost): The investment cost is fully inflation-indexed and constant in real terms, equal to $K_{\\text{real}}$.\n- Case N (unindexed cost): The investment cost is a fixed nominal amount, equal to $K_{\\text{nom}}$, not adjusted for inflation.\n\nAssume $K_{\\text{real}} = K_{\\text{nom}}$ at $t=0$ and the initial price level satisfies $I_0 = 1$, so both costs coincide at $t=0$ when expressed in nominal terms. The firm values the option to invest in each case as a perpetual American option to acquire the asset by paying the cost and receiving the underlying value. The firm seeks the optimal investment threshold in each framework:\n- In Case R, the optimal real threshold $X^{\\ast}_{R}$ (expressed in real currency units).\n- In Case N, the optimal nominal threshold $S^{\\ast}_{N}$ (expressed in nominal currency units).\n\nStarting from the Fisher relation $r_n = r_r + \\pi$ and the no-arbitrage risk-neutral valuation for GBM with payout yield, derive the governing equation and boundary conditions for the perpetual investment option, solve for the optimal investment threshold in each case, and compute the ratio\n$$\nR \\equiv \\frac{S^{\\ast}_{N}}{S^{\\ast}_{R,\\text{nom}}},\n$$\nwhere $S^{\\ast}_{R,\\text{nom}}$ denotes the Case R threshold converted to nominal units at $t=0$ using $I_0=1$. Use the parameter values $r_n = 0.07$, $\\pi = 0.03$, $\\delta = 0.02$, $\\sigma = 0.25$, and $K_{\\text{real}} = K_{\\text{nom}} > 0$. Express the final ratio as a unitless number and round your answer to four significant figures.",
            "solution": "The problem statement is assessed to be valid. It is scientifically grounded in the established principles of financial engineering and real options analysis, specifically the application of the Black-Scholes-Merton framework to perpetual American options. The problem is well-posed, with all necessary parameters, definitions, and relationships provided to determine a unique, meaningful solution. The language is objective and precise, and the parameter values are realistic for a stylized model in energy economics. There are no contradictions, ambiguities, or factual errors. We may therefore proceed with the solution.\n\nThe problem requires finding the optimal investment thresholds for a perpetual American option under two different cost structures. The option's value, let's call it $F$, as a function of the underlying asset's value, $V$, is governed by the following ordinary differential equation in the region where the option is not exercised:\n$$\n\\frac{1}{2} \\sigma^2 V^2 \\frac{d^2 F}{dV^2} + (r - q) V \\frac{dF}{dV} - r F = 0\n$$\nHere, $r$ is the appropriate risk-free interest rate, $q$ is the continuous payout yield on the asset, and $\\sigma$ is the volatility of the asset's value. The general solution to this Cauchy-Euler equation is of the form $F(V) = A_1 V^{\\beta_1} + A_2 V^{\\beta_2}$, where $\\beta_1$ and $\\beta_2$ are the roots of the indicial equation:\n$$\n\\frac{1}{2} \\sigma^2 \\beta(\\beta-1) + (r - q) \\beta - r = 0\n$$\nOne root, $\\beta_1$, is positive and greater than $1$, while the other, $\\beta_2$, is negative. For a call option, the value must be zero if the asset value is zero, so we discard the solution with the negative exponent, which explodes as $V \\to 0$. Thus, the solution is $F(V) = A V^{\\beta_1}$.\n\nTo find the optimal investment threshold, $V^{\\ast}$, and the constant $A$, we apply the value-matching and smooth-pasting conditions at the threshold:\n1. Value-matching: $F(V^{\\ast}) = V^{\\ast} - K$, where $K$ is the investment cost.\n2. Smooth-pasting: $\\frac{dF}{dV}(V^{\\ast}) = 1$.\n\nApplying these conditions to $F(V) = A V^{\\beta_1}$:\n1. $A (V^{\\ast})^{\\beta_1} = V^{\\ast} - K$\n2. $A \\beta_1 (V^{\\ast})^{\\beta_1-1} = 1$\n\nFrom the second condition, we solve for $A = \\frac{(V^{\\ast})^{1-\\beta_1}}{\\beta_1}$. Substituting this into the first condition gives:\n$$\n\\frac{(V^{\\ast})^{1-\\beta_1}}{\\beta_1} (V^{\\ast})^{\\beta_1} = V^{\\ast} - K \\implies \\frac{V^{\\ast}}{\\beta_1} = V^{\\ast} - K\n$$\nSolving for $V^{\\ast}$ yields the general formula for the optimal threshold:\n$$\nV^{\\ast} = \\left(\\frac{\\beta_1}{\\beta_1 - 1}\\right) K\n$$\nThe positive root $\\beta_1$ is given by the quadratic formula:\n$$\n\\beta_1 = \\frac{-\\left(r - q - \\frac{1}{2}\\sigma^2\\right) + \\sqrt{\\left(r - q - \\frac{1}{2}\\sigma^2\\right)^2 + 2r\\sigma^2}}{\\sigma^2}\n$$\n\nWe now apply this general framework to the two specific cases.\n\n**Case R (indexed cost): Real Framework**\nThe analysis is performed in real terms. The state variable is the real project value, $X_t$.\n- State variable: $V = X$\n- Investment cost: $K = K_{\\text{real}}$\n- Risk-free rate: $r = r_r$ (real risk-free rate)\n- Payout yield: $q = \\delta$\n- Volatility: $\\sigma$\n\nThe real risk-free rate $r_r$ is derived from the Fisher relation: $r_r = r_n - \\pi$.\nThe optimal investment threshold in real terms, $X^{\\ast}_{R}$, is:\n$$\nX^{\\ast}_{R} = \\left(\\frac{\\beta_{1,R}}{\\beta_{1,R} - 1}\\right) K_{\\text{real}}\n$$\nwhere $\\beta_{1,R}$ is the positive root of the characteristic equation using the real rate $r_r$:\n$$\n\\frac{1}{2} \\sigma^2 \\beta^2 + \\left(r_r - \\delta - \\frac{1}{2}\\sigma^2\\right) \\beta - r_r = 0\n$$\n\n**Case N (unindexed cost): Nominal Framework**\nThe analysis is performed in nominal terms. The state variable is the nominal project value, $S_t$.\n- State variable: $V = S$\n- Investment cost: $K = K_{\\text{nom}}$\n- Risk-free rate: $r = r_n$ (nominal risk-free rate)\n- Payout yield: $q = \\delta$\n- Volatility: $\\sigma$\n\nThe optimal investment threshold in nominal terms, $S^{\\ast}_{N}$, is:\n$$\nS^{\\ast}_{N} = \\left(\\frac{\\beta_{1,N}}{\\beta_{1,N} - 1}\\right) K_{\\text{nom}}\n$$\nwhere $\\beta_{1,N}$ is the positive root of the characteristic equation using the nominal rate $r_n$:\n$$\n\\frac{1}{2} \\sigma^2 \\beta^2 + \\left(r_n - \\delta - \\frac{1}{2}\\sigma^2\\right) \\beta - r_n = 0\n$$\n\n**Computing the Ratio**\nThe problem asks for the ratio $R \\equiv \\frac{S^{\\ast}_{N}}{S^{\\ast}_{R,\\text{nom}}}$.\n$S^{\\ast}_{R,\\text{nom}}$ is the Case R real threshold $X^{\\ast}_{R}$ converted to nominal units at $t=0$. The conversion is $S = I_t X$. At $t=0$, we are given $I_0=1$, so $S^{\\ast}_{R,\\text{nom}} = I_0 X^{\\ast}_{R} = 1 \\cdot X^{\\ast}_{R} = X^{\\ast}_{R}$.\nWe are also given $K_{\\text{real}} = K_{\\text{nom}}$. Therefore, the ratio is:\n$$\nR = \\frac{S^{\\ast}_{N}}{X^{\\ast}_{R}} = \\frac{\\left(\\frac{\\beta_{1,N}}{\\beta_{1,N} - 1}\\right) K_{\\text{nom}}}{\\left(\\frac{\\beta_{1,R}}{\\beta_{1,R} - 1}\\right) K_{\\text{real}}} = \\frac{\\frac{\\beta_{1,N}}{\\beta_{1,N} - 1}}{\\frac{\\beta_{1,R}}{\\beta_{1,R} - 1}} = \\frac{\\beta_{1,N}(\\beta_{1,R} - 1)}{\\beta_{1,R}(\\beta_{1,N} - 1)}\n$$\n\n**Numerical Calculation**\nThe given parameter values are: $r_n = 0.07$, $\\pi = 0.03$, $\\delta = 0.02$, $\\sigma = 0.25$.\nFirst, we calculate the real risk-free rate:\n$r_r = r_n - \\pi = 0.07 - 0.03 = 0.04$.\nWe also need $\\sigma^2 = (0.25)^2 = 0.0625$ and $\\frac{1}{2}\\sigma^2 = 0.03125$.\n\nCalculate $\\beta_{1,R}$ (using $r_r=0.04$):\nThe drift term for the quadratic formula is $r_r - \\delta - \\frac{1}{2}\\sigma^2 = 0.04 - 0.02 - 0.03125 = -0.01125$.\nThe term under the square root is:\n$(-0.01125)^2 + 2(0.04)(0.0625) = 0.0001265625 + 0.005 = 0.0051265625$.\nSo,\n$$\n\\beta_{1,R} = \\frac{-(-0.01125) + \\sqrt{0.0051265625}}{0.0625} = \\frac{0.01125 + 0.071600017458}{0.0625} \\approx 1.325600\n$$\n\nCalculate $\\beta_{1,N}$ (using $r_n=0.07$):\nThe drift term for the quadratic formula is $r_n - \\delta - \\frac{1}{2}\\sigma^2 = 0.07 - 0.02 - 0.03125 = 0.01875$.\nThe term under the square root is:\n$(0.01875)^2 + 2(0.07)(0.0625) = 0.0003515625 + 0.00875 = 0.0091015625$.\nSo,\n$$\n\\beta_{1,N} = \\frac{-(0.01875) + \\sqrt{0.0091015625}}{0.0625} = \\frac{-0.01875 + 0.09540210952}{0.0625} \\approx 1.226434\n$$\n\nNow, compute the ratio $R$:\n$$\n\\beta_{1,R} - 1 \\approx 1.325600 - 1 = 0.325600\n$$\n$$\n\\beta_{1,N} - 1 \\approx 1.226434 - 1 = 0.226434\n$$\n$$\nR = \\frac{\\beta_{1,N}(\\beta_{1,R} - 1)}{\\beta_{1,R}(\\beta_{1,N} - 1)} \\approx \\frac{1.226434 \\times 0.325600}{1.325600 \\times 0.226434} \\approx \\frac{0.399259}{0.300221} \\approx 1.330369\n$$\nRounding to four significant figures, the ratio is $1.330$.\nThe fact that $R > 1$ is economically intuitive. With a fixed nominal investment cost, inflation erodes the real cost over time, making the option to invest more valuable. A more valuable option encourages the holder to wait longer, thus requiring a higher investment trigger. The nominal trigger $S^{\\ast}_{N}$ is therefore a larger multiple of its cost $K_{\\text{nom}}$ than the real trigger $X^{\\ast}_R$ is of its cost $K_{\\text{real}}$, leading to $R > 1$.\nFinal calculation using higher precision:\n$$\n\\beta_{1,R} \\approx 1.3256002793\n$$\n$$\n\\beta_{1,N} \\approx 1.2264337523\n$$\n$$\nR = \\frac{1.2264337523 \\times (1.3256002793 - 1)}{1.3256002793 \\times (1.2264337523 - 1)} = \\frac{1.2264337523 \\times 0.3256002793}{1.3256002793 \\times 0.2264337523} \\approx 1.330369\n$$\nRounding to four significant figures gives $1.330$.",
            "answer": "$$\n\\boxed{1.330}\n$$"
        },
        {
            "introduction": "Real options models are only as good as their inputs, and one of the most critical yet unobservable parameters in energy commodity models is the convenience yield. This exercise provides practice in a vital skill for the quantitative analyst: inferring model parameters from market data. You will derive the instantaneous convenience yield term structure by applying the no-arbitrage cost-of-carry principle to an observed forward curve, connecting abstract valuation theory directly to real-world market prices .",
            "id": "4115370",
            "problem": "A power producer is evaluating the option to defer constructing a natural gas storage facility. The valuation requires inferring the instantaneous convenience yield term structure from observable market data. Consider a storable energy commodity with current spot price $S_{0}$ and an observed forward curve at time $0$ given for maturity $T \\geq 0$ by\n$$F(0,T) = 55 \\exp(0.06 T)\\left(1 + 0.05 \\sin(2\\pi T)\\right).$$\nAssume a deterministic continuously compounded risk-free rate term structure\n$$r(t) = 0.03 + 0.01 \\exp(-2 t),$$\nand a deterministic storage cost rate (as a continuous carrying cost)\n$$u(t) = 0.02 + 0.004 \\cos(2\\pi t).$$\nThe convenience yield is defined as the instantaneous marginal benefit per unit time of holding inventory that enters the cost-of-carry relation under risk-neutral valuation and no-arbitrage for storable commodities. Using these foundations and treating the forward curve $F(0,T)$, the interest rate $r(t)$, and the storage cost rate $u(t)$ as primitive inputs, derive the expression for the instantaneous convenience yield term structure $\\delta(0,T)$ and evaluate its value at $T^{\\ast} = 1.5$ years. Express the final value of $\\delta(0,T^{\\ast})$ in per-year units and round your answer to four significant figures. Do not include any units in your final boxed answer; the grader will interpret it as per year.",
            "solution": "The problem is first validated to ensure it is scientifically grounded, well-posed, objective, and complete.\n\n**Step 1: Extract Givens**\n-   Observed forward curve at time $t=0$ for maturity $T$: $F(0,T) = 55 \\exp(0.06 T)\\left(1 + 0.05 \\sin(2\\pi T)\\right)$.\n-   Risk-free interest rate term structure: $r(t) = 0.03 + 0.01 \\exp(-2 t)$.\n-   Storage cost rate term structure: $u(t) = 0.02 + 0.004 \\cos(2\\pi t)$.\n-   Current spot price: $S_{0}$.\n-   The convenience yield, denoted $\\delta(t)$, is part of the cost-of-carry relation.\n-   The task is to derive the instantaneous convenience yield term structure $\\delta(0,T)$ and evaluate it at $T^{\\ast} = 1.5$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is based on the standard no-arbitrage cost-of-carry model for storable commodities, a fundamental concept in quantitative finance and energy economics. The relationship is $F(t,T) = S_t \\exp\\left(\\int_t^T (r(s) + u(s) - \\delta(s)) ds\\right)$, where all components are assumed deterministic for this problem. The provided functional forms for $F(0,T)$, $r(t)$, and $u(t)$ are mathematically well-defined and plausible for modeling. By the no-arbitrage condition, the spot price $S_0$ must be equal to the forward price for immediate delivery, $F(0,0)$. From the given forward curve, $F(0,0) = 55 \\exp(0)(1+0) = 55$, implying $S_0 = 55$. The problem is therefore self-contained and consistent. It is well-posed, as a unique expression for the instantaneous convenience yield $\\delta(0,T)$ can be derived from the given inputs. The problem statement is objective and uses standard terminology. The problem is declared valid.\n\n**Step 3: Proceed to Solution**\n\nThe no-arbitrage relationship between the spot price $S_0$ and the forward price $F(0,T)$ for a storable commodity, with time-varying deterministic risk-free rate $r(t)$, storage cost rate $u(t)$, and convenience yield $\\delta(t)$, is given by the cost-of-carry model:\n$$F(0,T) = S_0 \\exp\\left(\\int_0^T (r(s) + u(s) - \\delta(s)) ds\\right)$$\nThe notation $\\delta(0,T)$ is used for the instantaneous forward convenience yield at maturity $T$, as inferred from market data at time $0$. The relationship can be solved for $\\delta(s)$ (or $\\delta(0,s)$ in this notation).\n\nFirst, we isolate the exponential term and take the natural logarithm of both sides:\n$$ \\ln\\left(\\frac{F(0,T)}{S_0}\\right) = \\int_0^T (r(s) + u(s) - \\delta(s)) ds $$\nTo find the instantaneous rate $\\delta(T)$, which we denote as $\\delta(0,T)$, we differentiate both sides with respect to the maturity $T$, applying the Fundamental Theorem of Calculus to the right-hand side:\n$$ \\frac{d}{dT} \\ln\\left(\\frac{F(0,T)}{S_0}\\right) = r(T) + u(T) - \\delta(0,T) $$\nRearranging this equation gives the expression for the instantaneous convenience yield term structure:\n$$ \\delta(0,T) = r(T) + u(T) - \\frac{d}{dT} \\ln\\left(\\frac{F(0,T)}{S_0}\\right) $$\nAs established during validation, the spot price $S_0$ is given by $F(0,0)$:\n$$ S_0 = F(0,0) = 55 \\exp(0.06 \\cdot 0) \\left(1 + 0.05 \\sin(2\\pi \\cdot 0)\\right) = 55 \\cdot 1 \\cdot (1+0) = 55 $$\nNow we can form the term $\\ln\\left(\\frac{F(0,T)}{S_0}\\right)$:\n$$ \\frac{F(0,T)}{S_0} = \\frac{55 \\exp(0.06 T)\\left(1 + 0.05 \\sin(2\\pi T)\\right)}{55} = \\exp(0.06 T)\\left(1 + 0.05 \\sin(2\\pi T)\\right) $$\n$$ \\ln\\left(\\frac{F(0,T)}{S_0}\\right) = \\ln\\left[\\exp(0.06 T)\\left(1 + 0.05 \\sin(2\\pi T)\\right)\\right] = 0.06 T + \\ln\\left(1 + 0.05 \\sin(2\\pi T)\\right) $$\nNext, we compute the derivative of this expression with respect to $T$:\n$$ \\frac{d}{dT} \\ln\\left(\\frac{F(0,T)}{S_0}\\right) = \\frac{d}{dT} \\left[0.06 T + \\ln\\left(1 + 0.05 \\sin(2\\pi T)\\right)\\right] $$\n$$ = 0.06 + \\frac{1}{1 + 0.05 \\sin(2\\pi T)} \\cdot \\frac{d}{dT}\\left(0.05 \\sin(2\\pi T)\\right) $$\n$$ = 0.06 + \\frac{0.05 \\cos(2\\pi T) \\cdot 2\\pi}{1 + 0.05 \\sin(2\\pi T)} = 0.06 + \\frac{0.1 \\pi \\cos(2\\pi T)}{1 + 0.05 \\sin(2\\pi T)} $$\nNow we substitute this derivative, along with the given expressions for $r(T)$ and $u(T)$, into the formula for $\\delta(0,T)$:\n$$ \\delta(0,T) = (0.03 + 0.01 \\exp(-2 T)) + (0.02 + 0.004 \\cos(2\\pi T)) - \\left(0.06 + \\frac{0.1 \\pi \\cos(2\\pi T)}{1 + 0.05 \\sin(2\\pi T)}\\right) $$\nCombining terms, we obtain the general expression for the instantaneous convenience yield term structure:\n$$ \\delta(0,T) = (0.03 + 0.02 - 0.06) + 0.01 \\exp(-2 T) + 0.004 \\cos(2\\pi T) - \\frac{0.1 \\pi \\cos(2\\pi T)}{1 + 0.05 \\sin(2\\pi T)} $$\n$$ \\delta(0,T) = -0.01 + 0.01 \\exp(-2 T) + \\left(0.004 - \\frac{0.1 \\pi}{1 + 0.05 \\sin(2\\pi T)}\\right) \\cos(2\\pi T) $$\nThe final step is to evaluate this expression at $T = T^{\\ast} = 1.5$ years. We first evaluate the trigonometric and exponential components at this value:\n$$ \\sin(2\\pi T) = \\sin(2\\pi \\cdot 1.5) = \\sin(3\\pi) = 0 $$\n$$ \\cos(2\\pi T) = \\cos(2\\pi \\cdot 1.5) = \\cos(3\\pi) = -1 $$\n$$ \\exp(-2 T) = \\exp(-2 \\cdot 1.5) = \\exp(-3) $$\nSubstituting these values into the expression for $\\delta(0,1.5)$:\n$$ \\delta(0,1.5) = -0.01 + 0.01 \\exp(-3) + \\left(0.004 - \\frac{0.1 \\pi}{1 + 0.05 \\sin(3\\pi)}\\right) \\cos(3\\pi) $$\n$$ \\delta(0,1.5) = -0.01 + 0.01 \\exp(-3) + \\left(0.004 - \\frac{0.1 \\pi}{1 + 0}\\right) (-1) $$\n$$ \\delta(0,1.5) = -0.01 + 0.01 \\exp(-3) - (0.004 - 0.1 \\pi) $$\n$$ \\delta(0,1.5) = -0.01 + 0.01 \\exp(-3) - 0.004 + 0.1 \\pi $$\n$$ \\delta(0,1.5) = -0.014 + 0.01 \\exp(-3) + 0.1 \\pi $$\nNow we compute the numerical value:\n$$ \\exp(-3) \\approx 0.049787068 $$\n$$ \\pi \\approx 3.141592654 $$\n$$ \\delta(0,1.5) \\approx -0.014 + 0.01(0.049787068) + 0.1(3.141592654) $$\n$$ \\delta(0,1.5) \\approx -0.014 + 0.00049787068 + 0.3141592654 $$\n$$ \\delta(0,1.5) \\approx 0.300657136 $$\nRounding this result to four significant figures yields $0.3007$.\nThe instantaneous convenience yield at $T^* = 1.5$ years is approximately $30.07\\%$ per year.",
            "answer": "$$\\boxed{0.3007}$$"
        }
    ]
}
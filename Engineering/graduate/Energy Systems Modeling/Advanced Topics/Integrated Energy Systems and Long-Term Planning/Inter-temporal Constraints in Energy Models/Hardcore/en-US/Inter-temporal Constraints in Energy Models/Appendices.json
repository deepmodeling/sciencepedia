{
    "hands_on_practices": [
        {
            "introduction": "This first practice addresses a foundational challenge in energy systems modeling: translating a generator's continuous physical limitations into a discrete-time constraint. By deriving the ramp-rate limit from first principles using calculus, you will gain a deeper understanding of the approximations and assumptions inherent in the time-discretized models that are central to energy planning and operations . This skill is crucial for ensuring that model formulations accurately reflect physical reality.",
            "id": "4098308",
            "problem": "Consider a single thermal generator scheduled in a time-discretized energy system optimization model with period length $\\Delta t$ measured in minutes. Let the continuous-time power output be $p(t)$ in megawatts (MW), and suppose the generator is subject to a symmetric ramp-rate limit specified as a bound on its time derivative, namely $|\\frac{dp(t)}{dt}| \\leq R$, where $R$ is given in megawatts per minute (MW/min). The model records decision variables $P_t$ that represent the generator output at the end of each period $t$.\n\nStarting from the definitions of ramp rate as a time derivative and the fundamental theorem of calculus for absolutely continuous functions, derive the discrete-time inter-temporal ramp constraint that links $P_t$ and $P_{t-1}$ across consecutive periods. Then, for the specific case $\\Delta t = 15$ minutes, determine the maximum permissible change in output between consecutive periods, $\\Delta P_{\\max}$, expressed in MW as a function of $R$.\n\nYour final answer must be a single real-valued symbolic expression. No rounding is required. Express the final change in output in MW.",
            "solution": "The problem requires the derivation of a discrete-time ramp constraint from a continuous-time definition and then its application to a specific case.\n\nFirst, we formalize the relationship between the continuous-time power output, $p(t)$, and the discrete-time decision variables, $P_t$. The problem states that $P_t$ is the generator output at the end of period $t$. Let each period have a duration of $\\Delta t$. If we denote the time at the end of period $t$ as $\\tau_t = t \\Delta t$ for $t = 1, 2, \\dots$, then the decision variables are defined as:\n$$P_t = p(\\tau_t) = p(t \\Delta t)$$\n$$P_{t-1} = p(\\tau_{t-1}) = p((t-1) \\Delta t)$$\n\nThe change in power output between the end of period $t-1$ and the end of period $t$ is $P_t - P_{t-1}$. Using the definitions above, this difference can be expressed in terms of the continuous-time function $p(t)$:\n$$P_t - P_{t-1} = p(t \\Delta t) - p((t-1) \\Delta t)$$\n\nThe problem states that $p(t)$ is an absolutely continuous function. This is a sufficient condition to apply the Fundamental Theorem of Calculus, which states that for such a function, the integral of its derivative over an interval is equal to the change in the function's value at the endpoints of the interval. Applying this theorem to the function $p(t)$ over the time interval $[(t-1)\\Delta t, t \\Delta t]$, we have:\n$$p(t \\Delta t) - p((t-1) \\Delta t) = \\int_{(t-1)\\Delta t}^{t \\Delta t} \\frac{dp(\\tau)}{d\\tau} d\\tau$$\nTherefore:\n$$P_t - P_{t-1} = \\int_{(t-1)\\Delta t}^{t \\Delta t} \\frac{dp(\\tau)}{d\\tau} d\\tau$$\n\nNext, we incorporate the given physical constraint on the ramp rate. The instantaneous rate of change of power is limited by a maximum ramp rate $R$, given in megawatts per minute (MW/min). This constraint is expressed as:\n$$\\left|\\frac{dp(t)}{dt}\\right| \\leq R$$\nThis inequality is equivalent to the following pair of inequalities:\n$$-R \\leq \\frac{dp(t)}{dt} \\leq R$$\n\nThis inequality holds for all time $t$. We can therefore integrate it over the time interval of interest, $[(t-1)\\Delta t, t \\Delta t]$. Using the property that if $f(x) \\leq g(x)$ then $\\int f(x)dx \\leq \\int g(x)dx$, we get:\n$$\\int_{(t-1)\\Delta t}^{t \\Delta t} (-R) d\\tau \\leq \\int_{(t-1)\\Delta t}^{t \\Delta t} \\frac{dp(\\tau)}{d\\tau} d\\tau \\leq \\int_{(t-1)\\Delta t}^{t \\Delta t} R d\\tau$$\n\nNow, we evaluate the definite integrals. The integrand on the left-hand side and the right-hand side, $R$, is a constant.\nThe left-hand integral is:\n$$\\int_{(t-1)\\Delta t}^{t \\Delta t} (-R) d\\tau = -R \\left[ \\tau \\right]_{(t-1)\\Delta t}^{t \\Delta t} = -R (t \\Delta t - (t-1)\\Delta t) = -R \\Delta t$$\nThe right-hand integral is:\n$$\\int_{(t-1)\\Delta t}^{t \\Delta t} R d\\tau = R \\left[ \\tau \\right]_{(t-1)\\Delta t}^{t \\Delta t} = R (t \\Delta t - (t-1)\\Delta t) = R \\Delta t$$\n\nSubstituting these results and the expression for the middle integral back into the inequality, we obtain:\n$$-R \\Delta t \\leq P_t - P_{t-1} \\leq R \\Delta t$$\nThis is the discrete-time inter-temporal ramp constraint that links the power output in consecutive periods, $P_t$ and $P_{t-1}$. This completes the first part of the derivation. The constraint can be expressed more compactly using the absolute value:\n$$|P_t - P_{t-1}| \\leq R \\Delta t$$\n\nThe second part of the problem asks for the maximum permissible change in output between consecutive periods, denoted $\\Delta P_{\\max}$, for the specific case where the period length is $\\Delta t = 15$ minutes. The change in output is $|P_t - P_{t-1}|$. From the derived constraint, we can see that the maximum value of this change is bounded by $R \\Delta t$.\n$$\\Delta P_{\\max} = \\max(|P_t - P_{t-1}|) = R \\Delta t$$\n\nWe are given $\\Delta t = 15$ minutes and $R$ is in megawatts per minute (MW/min). Substituting the value for $\\Delta t$:\n$$\\Delta P_{\\max} = R \\cdot 15$$\nThe units of this expression are $(\\text{MW/min}) \\cdot (\\text{min}) = \\text{MW}$, which is consistent with the required units for a change in power output. The final expression is $15R$.",
            "answer": "$$\\boxed{15R}$$"
        },
        {
            "introduction": "Before writing complex code or mathematical formulations, it is essential to internalize the operational logic of inter-temporal constraints. This exercise provides a concrete opportunity to apply the rules of minimum up-time and down-time by manually verifying a pre-defined commitment schedule . This hands-on check strengthens your intuition for how these crucial constraints function period by period, ensuring you can later debug or design more complex models with confidence.",
            "id": "4098320",
            "problem": "A single thermal generating unit is modeled over a discrete planning horizon in a Unit Commitment (UC) problem with time indices $t \\in \\{1,2,3,4,5,6\\}$. Let $u_t \\in \\{0,1\\}$ denote the on/off status of the unit at period $t$, with $u_t=1$ indicating the unit is on, and $u_t=0$ indicating it is off. The unit is subject to a minimum up-time $L^{\\uparrow}$ and a minimum down-time $L^{\\downarrow}$, defined as follows: after a startup (a transition from off to on), the unit must remain on for at least $L^{\\uparrow}$ consecutive periods; after a shutdown (a transition from on to off), the unit must remain off for at least $L^{\\downarrow}$ consecutive periods. These inter-temporal constraints represent physical and operational limits on cycling.\n\nAssume the following:\n- The minimum up-time is $L^{\\uparrow}=3$ and the minimum down-time is $L^{\\downarrow}=2$.\n- The initial condition is that the unit is offline at $t=0$ and has already satisfied its minimum down-time prior to $t=1$ (i.e., sufficient pre-horizon off time so that any subsequent startup within the horizon is not restricted by past operation).\n- Only in-horizon dwell-time obligations are enforced; there is no post-horizon carryover requirement beyond $t=6$.\n\nConsider the binary schedule $u=[0,1,1,1,0,0]$, meaning $u_1=0$, $u_2=1$, $u_3=1$, $u_4=1$, $u_5=0$, and $u_6=0$.\n\nUsing only the core definitions above, verify whether this schedule complies with both the minimum up-time and minimum down-time constraints throughout the horizon. Define $F$ as the total number of violations of the minimum up-time and minimum down-time constraints within the horizon, where each instance in which a startup occurs before completing the required down-time or a shutdown occurs before completing the required up-time counts as one violation. Report the value of $F$ as a single integer. No rounding is required; $F$ is dimensionless.",
            "solution": "The problem requires us to validate a given operational schedule for a thermal generating unit against its inter-temporal constraints, specifically minimum up-time and minimum down-time. We must determine the total number of violations, $F$.\n\nFirst, we establish the definitions and given parameters with formal notation.\nThe time horizon is a set of discrete periods $t \\in \\{1, 2, 3, 4, 5, 6\\}$.\nThe state of the unit at time $t$ is given by a binary variable $u_t$, where $u_t=1$ if the unit is on, and $u_t=0$ if it is off.\nThe minimum up-time is $L^{\\uparrow} = 3$. This means that after a startup, the unit must remain on for at least $3$ consecutive periods.\nThe minimum down-time is $L^{\\downarrow} = 2$. This means that after a shutdown, the unit must remain off for at least $2$ consecutive periods.\nThe initial state is $u_0 = 0$, with the pre-horizon minimum down-time requirement already satisfied. This implies that any startup at $t \\ge 1$ is not constrained by prior history.\nThe schedule to be evaluated is $u = [u_1, u_2, u_3, u_4, u_5, u_6] = [0, 1, 1, 1, 0, 0]$.\nWe augment this schedule with the initial state: $(u_0, u_1, u_2, u_3, u_4, u_5, u_6) = (0, 0, 1, 1, 1, 0, 0)$.\n\nA violation is defined as either a startup occurring before the minimum down-time is completed, or a shutdown occurring before the minimum up-time is completed. We must identify all such events.\n\nLet's define the two principal events:\n1.  A **startup** occurs at time $t$ if $u_{t-1}=0$ and $u_t=1$.\n2.  A **shutdown** occurs at time $t$ if $u_{t-1}=1$ and $u_t=0$.\n\nWe scan the provided schedule sequence to identify all startup and shutdown events.\n-   At $t=1$: $u_0=0$ and $u_1=0$. The unit remains off. No event occurs.\n-   At $t=2$: $u_1=0$ and $u_2=1$. A **startup** event occurs at $t=2$.\n-   At $t=3$: $u_2=1$ and $u_3=1$. The unit remains on. No event occurs.\n-   At $t=4$: $u_3=1$ and $u_4=1$. The unit remains on. No event occurs.\n-   At $t=5$: $u_4=1$ and $u_5=0$. A **shutdown** event occurs at $t=5$.\n-   At $t=6$: $u_5=0$ and $u_6=0$. The unit remains off. No event occurs.\n\nThere are two events to analyze for potential violations: the startup at $t=2$ and the shutdown at $t=5$.\n\n**Analysis of the Startup at $t=2$:**\nFor a startup at time $t$ to be valid, the unit must have been off for at least the preceding $L^{\\downarrow}$ periods. The startup occurs at $t=2$. The preceding 'off' period within the horizon is $t=1$. The problem statement specifies that the unit is offline at $t=0$ and has \"already satisfied its minimum down-time prior to $t=1$\". This means the duration of the 'off' state preceding the startup at $t=2$ is at least $1$ (for period $t=1$) plus an unspecified pre-horizon duration that is $\\ge L^{\\downarrow}$. The total off-time duration is therefore greater than $L^{\\downarrow}=2$. Thus, the startup at $t=2$ does not violate the minimum down-time constraint.\n\n**Analysis of the Shutdown at $t=5$:**\nFor a shutdown at time $t$ to be valid, the unit must have been on for at least the preceding $L^{\\uparrow}$ periods. The shutdown at $t=5$ terminates an 'on' spell that began with the startup at $t=2$. The periods during which the unit was continuously on are $t=2$, $t=3$, and $t=4$.\nLet $D^{\\uparrow}$ be the duration of this 'on' block.\n$D^{\\uparrow} = (4 - 2) + 1 = 3$ periods.\nThe minimum up-time requirement is $L^{\\uparrow} = 3$.\nWe check if $D^{\\uparrow} < L^{\\uparrow}$. In this case, $3 < 3$ is false. The duration is exactly equal to the minimum requirement. Therefore, the shutdown at $t=5$ does not violate the minimum up-time constraint.\n\nFinally, we must ensure that no violations arise from the state of the unit after the last event. The shutdown at $t=5$ initiates a minimum down-time requirement of $L^{\\downarrow}=2$ periods. This means the unit must be off for periods $t=5$ and $t=6$. The schedule shows $u_5=0$ and $u_6=0$. This requirement is fulfilled. The problem states that there are no post-horizon carryover requirements, so our analysis can conclude at $t=6$.\n\nSince neither the startup event nor the shutdown event constitutes a violation, the total number of violations is zero.\n\nThe total number of violations, $F$, is the sum of minimum up-time violations and minimum down-time violations. Based on our analysis, both are $0$.\nSo, $F=0$.",
            "answer": "$$\\boxed{0}$$"
        },
        {
            "introduction": "Moving from manual verification to automated decision-making, this final practice challenges you to formulate the general mathematical constraints for unit commitment. The goal is to encode the minimum up-time and down-time logic, including often-tricky residual obligations from before the planning horizon, into a robust Mixed-Integer Linear Programming (MILP) formulation that an optimizer can solve . Mastering this step is key to building sophisticated and realistic energy system optimization models.",
            "id": "4098248",
            "problem": "Consider a single thermal unit in an energy systems model formulated as a Mixed Integer Linear Programming (MILP) problem over discrete time periods $\\mathcal{T} = \\{1, \\dots, T\\}$. Let $u_t \\in \\{0,1\\}$ denote the on/off commitment status at period $t$, $y_t \\in \\{0,1\\}$ denote a startup indicator at period $t$, and $z_t \\in \\{0,1\\}$ denote a shutdown indicator at period $t$. The initial status $u_0 \\in \\{0,1\\}$ is given. The unit has a minimum up time $\\underline{U} \\in \\mathbb{Z}_{+}$ and a minimum down time $\\underline{D} \\in \\mathbb{Z}_{+}$. The inter-temporal logical relationship between commitment transitions and startup/shutdown events is defined by the identity $u_t - u_{t-1} = y_t - z_t$ for all $t \\in \\mathcal{T}$. Within the horizon, minimum up time and minimum down time are governed by the standard operational definitions: after any startup event the unit must remain committed for at least $\\underline{U}$ consecutive periods, and after any shutdown event the unit must remain uncommitted for at least $\\underline{D}$ consecutive periods.\n\nAcross the start of the horizon, the unit may carry residual obligations from operations prior to period $t = 1$. Define the residual minimum up time counter $\\rho^{\\text{up}}_0 \\in \\{0, 1, \\dots, \\underline{U}-1\\}$ to be the number of periods at the start of the horizon during which the unit must stay on if $u_0 = 1$, and define the residual minimum down time counter $\\rho^{\\text{down}}_0 \\in \\{0, 1, \\dots, \\underline{D}-1\\}$ to be the number of periods at the start of the horizon during which the unit must stay off if $u_0 = 0$. These residual counters reflect remaining mandatory time due to events before $t = 1$ and are consistent with the initial status, meaning if $u_0 = 1$ then $\\rho^{\\text{down}}_0 = 0$ and if $u_0 = 0$ then $\\rho^{\\text{up}}_0 = 0$.\n\nStarting from the above definitions, select the option that correctly constructs a set of linear constraints that enforces both the within-horizon minimum up/down times and the start-of-horizon residual obligations implied by $u_0$, $\\rho^{\\text{up}}_0$, and $\\rho^{\\text{down}}_0$. The constraints must be valid for any $T \\ge 1$, properly handle truncation near the horizon end, and reflect the operational logic that startup events require subsequent on-ness and shutdown events require subsequent off-ness. Only one option is fully correct.\n\nA. For all $t \\in \\mathcal{T}$, impose $u_t - u_{t-1} = y_t - z_t$, $u_t \\in \\{0,1\\}$, $y_t \\in \\{0,1\\}$, $z_t \\in \\{0,1\\}$. For minimum up time triggered by in-horizon startups: for all $t \\in \\{1, \\dots, T - \\underline{U} + 1\\}$, impose $\\sum_{s=t}^{t + \\underline{U} - 1} u_s \\ge \\underline{U} \\, y_t$, and for all $t \\in \\{T - \\underline{U} + 2, \\dots, T\\}$, impose $\\sum_{s=t}^{T} u_s \\ge (T - t + 1) \\, y_t$. For minimum down time triggered by in-horizon shutdowns: for all $t \\in \\{1, \\dots, T - \\underline{D} + 1\\}$, impose $\\sum_{s=t}^{t + \\underline{D} - 1} (1 - u_s) \\ge \\underline{D} \\, z_t$, and for all $t \\in \\{T - \\underline{D} + 2, \\dots, T\\}$, impose $\\sum_{s=t}^{T} (1 - u_s) \\ge (T - t + 1) \\, z_t$. Across the start of the horizon, enforce residual obligations as follows: if $u_0 = 1$, then for all $t \\in \\{1, \\dots, \\rho^{\\text{up}}_0\\}$ impose $u_t = 1$ and $z_t = 0$; equivalently, $\\sum_{s=1}^{\\rho^{\\text{up}}_0} (1 - u_s) = 0$ and $\\sum_{s=1}^{\\rho^{\\text{up}}_0} z_s = 0$. If $u_0 = 0$, then for all $t \\in \\{1, \\dots, \\rho^{\\text{down}}_0\\}$ impose $u_t = 0$ and $y_t = 0$; equivalently, $\\sum_{s=1}^{\\rho^{\\text{down}}_0} u_s = 0$ and $\\sum_{s=1}^{\\rho^{\\text{down}}_0} y_s = 0$.\n\nB. For all $t \\in \\mathcal{T}$, impose $u_t - u_{t-1} = y_t - z_t$, $u_t \\in \\{0,1\\}$, $y_t \\in \\{0,1\\}$, $z_t \\in \\{0,1\\}$, and set $u_1 = u_0$. For minimum up/down times, use only the in-horizon event constraints: for all $t \\in \\{1, \\dots, T - \\underline{U} + 1\\}$, $\\sum_{s=t}^{t + \\underline{U} - 1} u_s \\ge \\underline{U} \\, y_t$, and for all $t \\in \\{1, \\dots, T - \\underline{D} + 1\\}$, $\\sum_{s=t}^{t + \\underline{D} - 1} (1 - u_s) \\ge \\underline{D} \\, z_t$; do not impose any residual start-of-horizon constraints because the event constraints are sufficient.\n\nC. For all $t \\in \\mathcal{T}$, impose $u_t - u_{t-1} = y_t - z_t$, $u_t \\in \\{0,1\\}$, $y_t \\in \\{0,1\\}$, $z_t \\in \\{0,1\\}$. At the start of the horizon, enforce full minimum times regardless of residual counters by imposing $\\sum_{s=1}^{\\underline{U}} u_s \\ge \\underline{U} \\, u_0$ and $\\sum_{s=1}^{\\underline{D}} (1 - u_s) \\ge \\underline{D} \\, (1 - u_0)$. Within the horizon, do not use truncated sums at the end; simply apply for all $t \\in \\{1, \\dots, T - \\underline{U} + 1\\}$ the minimum up time constraint $\\sum_{s=t}^{t + \\underline{U} - 1} u_s \\ge \\underline{U} \\, y_t$ and for all $t \\in \\{1, \\dots, T - \\underline{D} + 1\\}$ the minimum down time constraint $\\sum_{s=t}^{t + \\underline{D} - 1} (1 - u_s) \\ge \\underline{D} \\, z_t$.\n\nD. For all $t \\in \\mathcal{T}$, impose $u_t - u_{t-1} = y_t - z_t$, $u_t \\in \\{0,1\\}$, $y_t \\in \\{0,1\\}$, $z_t \\in \\{0,1\\}$. At the start of the horizon, enforce residual counters by preventing the wrong event type: if $u_0 = 1$ then impose $y_t = 0$ for all $t \\in \\{1, \\dots, \\rho^{\\text{up}}_0\\}$, and if $u_0 = 0$ then impose $z_t = 0$ for all $t \\in \\{1, \\dots, \\rho^{\\text{down}}_0\\}$. Rely on the inter-temporal identity to propagate these restrictions and do not impose any additional minimum up/down time constraints.",
            "solution": "The problem statement posits a standard unit commitment formulation for a single thermal unit and asks for the correct set of linear constraints to model minimum up and down times, including residual obligations at the start of the planning horizon. The validation of the problem statement is the first necessary step.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n- Time periods: $\\mathcal{T} = \\{1, \\dots, T\\}$.\n- Variables:\n    - Commitment status: $u_t \\in \\{0,1\\}$ for $t \\in \\mathcal{T}$.\n    - Startup indicator: $y_t \\in \\{0,1\\}$ for $t \\in \\mathcal{T}$.\n    - Shutdown indicator: $z_t \\in \\{0,1\\}$ for $t \\in \\mathcal{T}$.\n- Initial condition: $u_0 \\in \\{0,1\\}$.\n- Parameters:\n    - Minimum up time: $\\underline{U} \\in \\mathbb{Z}_{+}$.\n    - Minimum down time: $\\underline{D} \\in \\mathbb{Z}_{+}$.\n    - Residual up time counter: $\\rho^{\\text{up}}_0 \\in \\{0, 1, \\dots, \\underline{U}-1\\}$.\n    - Residual down time counter: $\\rho^{\\text{down}}_0 \\in \\{0, 1, \\dots, \\underline{D}-1\\}$.\n- Constraints & Definitions:\n    - Inter-temporal logic: $u_t - u_{t-1} = y_t - z_t$ for all $t \\in \\mathcal{T}$.\n    - Within-horizon minimum up time: After a startup, the unit must remain on for at least $\\underline{U}$ consecutive periods.\n    - Within-horizon minimum down time: After a shutdown, the unit must remain off for at least $\\underline{D}$ consecutive periods.\n    - Start-of-horizon obligations: If $u_0 = 1$, the unit must stay on for the first $\\rho^{\\text{up}}_0$ periods. If $u_0 = 0$, the unit must stay off for the first $\\rho^{\\text{down}}_0$ periods.\n    - Consistency: If $u_0 = 1$, then $\\rho^{\\text{down}}_0 = 0$. If $u_0 = 0$, then $\\rho^{\\text{up}}_0 = 0$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem describes a classic optimization subproblem in energy systems modeling. All terms, variables, and parameters are standard in the field of operations research and power systems engineering.\n- **Scientifically Grounded:** The problem is firmly based on the established principles of Mixed Integer Linear Programming applied to unit commitment, a core topic in energy systems analysis. The formulation is scientifically and mathematically sound.\n- **Well-Posed:** The question asks for a set of constraints to represent physical and operational rules. This is a well-defined modeling task with a known, correct implementation.\n- **Objective:** The language is formal, precise, and unambiguous. All definitions are clearly stated.\nThe problem statement is complete, consistent, and scientifically valid. It does not violate any of the invalidity criteria.\n\n**Step 3: Verdict and Action**\nThe problem is valid. I will proceed with the detailed derivation and evaluation of the options.\n\n### Derivation of Correct Constraints\n\nA complete and correct formulation must address four distinct aspects:\n1.  **Inter-temporal event logic:** The relation $u_t - u_{t-1} = y_t - z_t$ correctly links the state variable $u_t$ to the event variables $y_t$ and $z_t$. A startup ($u_{t-1}=0, u_t=1$) forces $y_t=1, z_t=0$. A shutdown ($u_{t-1}=1, u_t=0$) forces $y_t=0, z_t=1$. No change of state ($u_{t-1}=u_t$) implies $y_t = z_t$. In a cost-minimizing setting, $y_t=z_t=1$ would not be chosen.\n\n2.  **Within-horizon minimum up/down times:**\n    - A startup at period $t$, indicated by $y_t = 1$, requires the unit to be online for periods $s \\in \\{t, t+1, \\dots, t+\\underline{U}-1\\}$. This is enforced by requiring $u_s = 1$ for all these periods. A standard linear constraint is $\\sum_{s=t}^{t+\\underline{U}-1} u_s \\ge \\underline{U} \\cdot y_t$.\n    - A shutdown at period $t$, indicated by $z_t = 1$, requires the unit to be offline for periods $s \\in \\{t, t+1, \\dots, t+\\underline{D}-1\\}$. This is enforced by requiring $u_s = 0$, or equivalently $1-u_s=1$, for all these periods. The linear constraint is $\\sum_{s=t}^{t+\\underline{D}-1} (1-u_s) \\ge \\underline{D} \\cdot z_t$.\n\n3.  **End-of-horizon truncation:** The above constraints must be modified for events occurring near the end of the horizon $T$.\n    - If a startup occurs at $t$ where $t+\\underline{U}-1 > T$, the unit must remain on for all subsequent periods until $T$. The number of such periods is $T-t+1$. The constraint becomes $\\sum_{s=t}^{T} u_s \\ge (T-t+1) \\cdot y_t$. This applies for $t \\in \\{T-\\underline{U}+2, \\dots, T\\}$.\n    - Similarly, for a shutdown at $t$ where $t+\\underline{D}-1 > T$, the constraint becomes $\\sum_{s=t}^{T} (1-u_s) \\ge (T-t+1) \\cdot z_t$. This applies for $t \\in \\{T-\\underline{D}+2, \\dots, T\\}$.\n\n4.  **Start-of-horizon residual obligations:** These are initial conditions that must be directly enforced.\n    - If $u_0 = 1$ with a residual counter $\\rho^{\\text{up}}_0 > 0$, the unit must be on for the first $\\rho^{\\text{up}}_0$ periods. This implies $u_t=1$ for $t \\in \\{1, \\dots, \\rho^{\\text{up}}_0\\}$. Furthermore, the unit cannot shut down in this interval, so $z_t=0$ for $t \\in \\{1, \\dots, \\rho^{\\text{up}}_0\\}$. The most direct enforcement is to set these variables to their required values. Summation constraints like $\\sum_{t=1}^{\\rho^{\\text{up}}_0} (1-u_t) = 0$ and $\\sum_{t=1}^{\\rho^{\\text{up}}_0} z_t = 0$ are the standard linear forms.\n    - If $u_0 = 0$ with a residual counter $\\rho^{\\text{down}}_0 > 0$, the unit must be off for the first $\\rho^{\\text{down}}_0$ periods. This implies $u_t=0$ for $t \\in \\{1, \\dots, \\rho^{\\text{down}}_0\\}$. The unit cannot start up, so $y_t=0$ for $t \\in \\{1, \\dots, \\rho^{\\text{down}}_0\\}$. The linear constraints are $\\sum_{t=1}^{\\rho^{\\text{down}}_0} u_t = 0$ and $\\sum_{t=1}^{\\rho^{\\text{down}}_0} y_t = 0$.\n\n### Option-by-Option Analysis\n\n**Option A**:\n- **Inter-temporal logic:** $u_t - u_{t-1} = y_t - z_t$ is correctly stated.\n- **Within-horizon up time:** The constraint $\\sum_{s=t}^{t + \\underline{U} - 1} u_s \\ge \\underline{U} \\, y_t$ is stated for $t \\in \\{1, \\dots, T - \\underline{U} + 1\\}$. This is correct.\n- **End-of-horizon up time:** The truncated constraint $\\sum_{s=t}^{T} u_s \\ge (T - t + 1) \\, y_t$ is stated for $t \\in \\{T - \\underline{U} + 2, \\dots, T\\}$. This is correct.\n- **Within-horizon down time:** The constraint $\\sum_{s=t}^{t + \\underline{D} - 1} (1 - u_s) \\ge \\underline{D} \\, z_t$ is stated for $t \\in \\{1, \\dots, T - \\underline{D} + 1\\}$. This is correct.\n- **End-of-horizon down time:** The truncated constraint $\\sum_{s=t}^{T} (1 - u_s) \\ge (T - t + 1) \\, z_t$ is stated for $t \\in \\{T - \\underline{D} + 2, \\dots, T\\}$. This is correct.\n- **Start-of-horizon logic:** For $u_0=1$, it correctly imposes $u_t=1$ and $z_t=0$ for $t \\in \\{1, \\dots, \\rho^{\\text{up}}_0\\}$. For $u_0=0$, it correctly imposes $u_t=0$ and $y_t=0$ for $t \\in \\{1, \\dots, \\rho^{\\text{down}}_0\\}$. The equivalent summation forms are also correct.\nThis option provides a complete and accurate formulation that matches the derived correct constraints in all aspects.\n\nVerdict: **Correct**.\n\n**Option B**:\nThis option contains several critical flaws.\n1.  It fails to include constraints for the start-of-horizon residual obligations, incorrectly claiming the in-horizon event constraints are sufficient. They are not, as they are triggered by events $y_t, z_t$ for $t \\ge 1$ and cannot account for obligations from before $t=1$.\n2.  It fails to handle end-of-horizon truncation for the minimum up/down time constraints, making the formulation incomplete for $t > T - \\underline{U}+1$ or $t > T - \\underline{D}+1$.\n3.  The constraint $u_1=u_0$ is incorrect as it forbids a startup or shutdown at $t=1$, which should be a valid decision if not prohibited by a residual obligation (i.e., if $\\rho^{\\text{up}}_0=0$ or $\\rho^{\\text{down}}_0=0$).\n\nVerdict: **Incorrect**.\n\n**Option C**:\nThis option is flawed in its logic for both start-of-horizon and end-of-horizon conditions.\n1.  The start-of-horizon constraints, $\\sum_{s=1}^{\\underline{U}} u_s \\ge \\underline{U} \\, u_0$ and $\\sum_{s=1}^{\\underline{D}} (1 - u_s) \\ge \\underline{D} \\, (1 - u_0)$, enforce the *full* minimum up/down time from $t=1$ if the unit was on/off at $t=0$. This disregards the provided residual counters $\\rho^{\\text{up}}_0$ and $\\rho^{\\text{down}}_0$, which specify the *remaining* obligation. This is an overly restrictive and inaccurate formulation given the problem's definitions.\n2.  It completely omits the end-of-horizon truncation for the within-horizon constraints, identical to the flaw in Option B.\n\nVerdict: **Incorrect**.\n\n**Option D**:\nThis option is fundamentally flawed.\n1.  It completely omits the minimum up/down time constraints for events occurring within the horizon ($t \\ge 1$), stating to rely only on the start-of-horizon constraints and the inter-temporal identity. This fails to model a primary requirement of the problem.\n2.  The start-of-horizon logic is inverted. If $u_0=1$, the unit is already on and must be prevented from shutting down ($z_t=0$ should be enforced), not from starting up ($y_t=0$ is proposed). If $u_0=0$, the unit is off and must be prevented from starting up ($y_t=0$ should be enforced), not from shutting down ($z_t=0$ is proposed).\n\nVerdict: **Incorrect**.\n\nBased on this comprehensive analysis, Option A is the only one that presents a correct, complete, and robust set of constraints for the specified unit commitment problem.",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
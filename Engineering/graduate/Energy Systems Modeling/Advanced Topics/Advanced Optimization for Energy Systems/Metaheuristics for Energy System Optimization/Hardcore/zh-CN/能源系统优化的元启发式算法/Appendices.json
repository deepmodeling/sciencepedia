{
    "hands_on_practices": [
        {
            "introduction": "这项练习将揭示模拟退火（SA）算法的核心机制之一：Metropolis接受准则。通过一个具体的例子，你将学习SA如何决策接受或拒绝新的解，包括它那至关重要的、为跳出局部最优而偶尔接受较差解的能力。这项动手计算是理解SA如何探索解空间，从而为复杂能源系统问题找到高质量解的基础。",
            "id": "4103172",
            "problem": "考虑一个包含三个火力发电机组、四个离散时间周期的机组组合和经济调度玩具模型。设净需求曲线为 $D_{t}$，$t \\in \\{1,2,3,4\\}$，$D_{t}$ 的值为 $[120,140,160,130]$ 兆瓦。每个发电机组 $i \\in \\{1,2,3\\}$ 在周期 $t$ 的生产成本为凸二次函数 $C_{i}(P_{i,t}) = \\alpha_{i} P_{i,t}^{2} + \\beta_{i} P_{i,t} + \\gamma_{i}$，其系数分别为 $(\\alpha_{1},\\beta_{1},\\gamma_{1})=(2.0 \\times 10^{-3},18,120)$，$(\\alpha_{2},\\beta_{2},\\gamma_{2})=(1.6 \\times 10^{-3},22,100)$ 和 $(\\alpha_{3},\\beta_{3},\\gamma_{3})=(2.4 \\times 10^{-3},16,130)$。在每个周期，负荷平衡通过一个二次惩罚项 $\\lambda \\left(\\sum_{i=1}^{3} P_{i,t} - D_{t}\\right)^{2}$ 进行惩罚，其中 $\\lambda=0.06$。多周期目标是所有周期的生产成本与负荷平衡惩罚项之和。假设铭牌容量和爬坡率约束已满足，在本问题中无需显式强制执行。\n\n您处于当前的可行调度点 $x^{(k)}$，并应用基于玻尔兹曼分布的、采用Metropolis接受准则的模拟退火（SA）算法。生成了三个单步移动提议，并根据多周期目标进行评估，得出相对于 $x^{(k)}$ 的新提议状态的目标函数变化量 $\\Delta E$。温度固定为 $T=5$，单位与目标函数的成本单位相同。对于这三个提议，用于接受测试的目标函数变化量和独立的均匀分布随机变量分别为\n$$\n\\Delta E_{1} = 3.2, \\quad \\Delta E_{2} = -1.0, \\quad \\Delta E_{3} = 7.5,\n$$\n和\n$$\nu_{1} = 0.20, \\quad u_{2} = 0.70, \\quad u_{3} = 0.80,\n$$\n\n使用连接玻尔兹曼分布与Metropolis接受准则的第一性原理，确定对这三个提议的接受决策，决策编码为 $a_{j} \\in \\{0,1\\}$，$j \\in \\{1,2,3\\}$，其中 $a_{j}=1$ 表示接受，$a_{j}=0$ 表示拒绝。请将您的最终答案表示为行矩阵 $\\begin{pmatrix} a_{1}  a_{2}  a_{3} \\end{pmatrix}$。无需四舍五入，矩阵中的条目是无量纲的指示符。",
            "solution": "该问题要求根据Metropolis接受准则，确定在一个模拟退火（SA）优化过程中对三个提议移动的接受决策。问题背景是能源系统的经济调度模型，但核心任务仅需要每个提议的目标函数变化量（$\\Delta E$）、系统温度（$T$）和一个随机数（$u$）。\n\nMetropolis接受准则源于统计力学原理，特别是玻尔兹曼分布。该分布指出，在热平衡状态下，系统处于能量为 $E$ 的状态的概率与玻尔兹曼因子 $\\exp(-E/T)$ 成正比，其中 $T$ 是温度（以能量单位表示，因为 $k_B$ 被吸收了）。在模拟退火中，目标函数 $E$ 类似于能量。该算法通过随机探索状态空间来寻找低能量（低成本）的状态。\n\n从目标值为 $E_{k}$ 的当前状态移动到目标值为 $E_{new}$ 的新提议状态，会产生一个变化量 $\\Delta E = E_{new} - E_{k}$。Metropolis准则决定是否接受此移动。规则实现如下：\n\n1. 如果移动导致目标函数减小（$\\Delta E  0$），则始终接受该移动。这对应于移动到一个更优的解。\n2. 如果移动导致目标函数增加（$\\Delta E \\ge 0$），则以概率 $P_{acc} = \\exp(-\\frac{\\Delta E}{T})$ 接受该移动。这使得算法可以通过偶尔接受较差的解来跳出局部最小值。\n\n表达此规则的一种统一方法是生成一个均匀随机数 $u \\in [0, 1)$，如果 $u  \\exp(-\\frac{\\Delta E}{T})$，则接受该移动。\n如果 $\\Delta E  0$，那么 $-\\frac{\\Delta E}{T} > 0$，这意味着 $\\exp(-\\frac{\\Delta E}{T}) > 1$。由于 $u$ 总是小于 $1$，该条件总是满足，因此接受移动。\n如果 $\\Delta E \\ge 0$，那么 $-\\frac{\\Delta E}{T} \\le 0$，这意味着 $\\exp(-\\frac{\\Delta E}{T}) \\in (0, 1]$。如果随机数 $u$ 小于此概率值，则接受移动。\n\n问题给出了温度 $T=5$ 和三个提议的数据。我们对每个提议应用接受准则。接受决策编码为 $a_j=1$，拒绝决策编码为 $a_j=0$。\n\n**提议 1：**\n- 目标函数变化量：$\\Delta E_{1} = 3.2$。\n- 随机数：$u_{1} = 0.20$。\n- 由于 $\\Delta E_{1} > 0$，这是一个非改进的移动。是否接受取决于概率检查。\n- 我们必须检查是否满足 $u_{1}  \\exp(-\\frac{\\Delta E_{1}}{T})$。\n- 条件是 $0.20  \\exp(-\\frac{3.2}{5}) = \\exp(-0.64)$。\n- 为了在不计算指数的情况下验证此不等式，我们可以对两边取自然对数。由于 $\\ln(x)$ 对于 $x>0$ 是一个严格递增函数，不等关系保持不变：$\\ln(0.20)  -0.64$。\n- 小于 $1$ 的数的自然对数是负数。我们知道 $\\ln(1/e) = \\ln(\\exp(-1)) = -1$。因为 $0.20$ 小于 $1/e \\approx 0.3678$，所以其对数 $\\ln(0.20)$ 将小于 $-1$。\n- 具体来说，$\\ln(0.20) = \\ln(1/5) = -\\ln(5) \\approx -1.609$。\n- 条件是 $-1.609  -0.64$，这是成立的。\n- 因此，条件 $u_{1}  \\exp(-\\frac{\\Delta E_{1}}{T})$ 满足。该移动被接受。\n- $a_{1} = 1$。\n\n**提议 2：**\n- 目标函数变化量：$\\Delta E_{2} = -1.0$。\n- 随机数：$u_{2} = 0.70$。\n- 由于 $\\Delta E_{2}  0$，这是一个改进的移动。根据Metropolis准则，它必须总是被接受。\n- 让我们使用统一规则来验证这一点：检查是否满足 $u_{2}  \\exp(-\\frac{\\Delta E_{2}}{T})$。\n- 条件是 $0.70  \\exp(-\\frac{-1.0}{5}) = \\exp(0.2)$。\n- 由于指数函数的参数 $0.2$ 是正数，所以 $\\exp(0.2) > 1$。\n- 任何随机数 $u \\in [0, 1)$ 都会小于一个大于 $1$ 的值。\n- 条件 $0.70  \\exp(0.2)$ 是成立的。该移动被接受。\n- $a_{2} = 1$。\n\n**提议 3：**\n- 目标函数变化量：$\\Delta E_{3} = 7.5$。\n- 随机数：$u_{3} = 0.80$。\n- 由于 $\\Delta E_{3} > 0$，这是一个非改进的移动。\n- 我们必须检查是否满足 $u_{3}  \\exp(-\\frac{\\Delta E_{3}}{T})$。\n- 条件是 $0.80  \\exp(-\\frac{7.5}{5}) = \\exp(-1.5)$。\n- 同样，我们可以比较对数：$\\ln(0.80)  -1.5$？\n- 我们知道 $\\ln(0.80) \\approx -0.223$。\n- 条件变为 $-0.223  -1.5$，这是不成立的。\n- 因此，条件 $u_{3}  \\exp(-\\frac{\\Delta E_{3}}{T})$ 不满足。该移动被拒绝。\n- $a_{3} = 0$。\n\n结合对三个提议的决策，我们得到接受向量 $(a_{1}, a_{2}, a_{3}) = (1, 1, 0)$。\n最终答案以行矩阵的形式呈现。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1  1  0\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "粒子群优化（PSO）算法的灵感来源于鸟群或鱼群的集体行为。本练习将指导你完成PSO算法的单次迭代，重点关注单个粒子如何根据自身经验和群体的集体智慧来更新其速度和位置。执行这些向量计算将巩固你对粒子群如何在电力系统优化问题中导航搜索空间、寻找最优解的理解。",
            "id": "4103138",
            "problem": "考虑一个简化的类最优潮流（Optimal Power Flow, OPF）连续优化问题，该问题针对一个双发电机系统，其决策向量为 $\\mathbf{p} = (p_{1}, p_{2})$，代表有功功率输出。其带惩罚项的目标函数结合了二次发电成本、功率平衡的二次惩罚项以及在直流（DC）潮流近似下的单条线路潮流的二次惩罚项：$$J(\\mathbf{p}) = \\sum_{i=1}^{2} \\left( a_{i} p_{i}^{2} + b_{i} p_{i} \\right) + \\lambda \\left( p_{1} + p_{2} - D \\right)^{2} + \\mu \\left( h_{1} p_{1} + h_{2} p_{2} - F_{\\max} \\right)^{2},$$ 其中参数为 $a_{1} = 0.005$, $a_{2} = 0.008$, $b_{1} = 12$, $b_{2} = 15$, $D = 220$, $\\lambda = 0.2$, $\\mu = 0.05$, $\\mathbf{h} = (h_{1}, h_{2}) = (0.8, -0.5)$ 以及 $F_{\\max} = 70$。发电机输出的箱式约束为 $p_{1} \\in [50, 250]$ 和 $p_{2} \\in [20, 150]$，到这个箱式区域的欧几里得投影被理解为按分量操作，将任何超出范围的分量限制在最近的边界上。\n\n要求您对两个粒子执行一次由惯性、认知和社会部分定义的粒子群优化（Particle Swarm Optimization, PSO）迭代。算法的超参数为：惯性权重 $w = 0.6$，认知系数 $c_{1} = 1.7$，社会系数 $c_{2} = 3.0$。两个粒子（标记为 $A$ 和 $B$）的当前位置、速度和个体最优值如下：\n-   粒子 $A$：$\\mathbf{x}_{A}^{t} = (120, 80)$，$\\mathbf{v}_{A}^{t} = (5, -50)$，$\\mathbf{pbest}_{A} = (130, 70)$。\n-   粒子 $B$：$\\mathbf{x}_{B}^{t} = (160, 40)$，$\\mathbf{v}_{B}^{t} = (-4, 6)$，$\\mathbf{pbest}_{B} = (150, 50)$。\n共同的全局最优值为 $\\mathbf{gbest} = (210, 60)$。\n\n请使用粒子群优化（PSO）的标准解释，即每个粒子的速度通过其惯性、向其个体最优值的引力以及向全局最优值的引力进行更新，并使用独立的均匀分布随机乘数。对于本次迭代，粒子 $A$ 的随机标量取 $r_{1,A} = 0.3$ 和 $r_{2,A} = 0.9$，粒子 $B$ 的随机标量取 $r_{1,B} = 0.8$ 和 $r_{2,B} = 1.0$。在计算出更新后的速度和位置后，将新位置投影到如上定义的箱式约束上。\n\n请依次报告构成粒子 $A$ 和粒子 $B$ 更新后的速度分量和投影后的更新位置的八个数字，即 $\\left(v_{A,1}^{t+1}, v_{A,2}^{t+1}, x_{A,1}^{t+1,\\mathrm{proj}}, x_{A,2}^{t+1,\\mathrm{proj}}, v_{B,1}^{t+1}, v_{B,2}^{t+1}, x_{B,1}^{t+1,\\mathrm{proj}}, x_{B,2}^{t+1,\\mathrm{proj}}\\right)$。将报告的每个数字四舍五入到四位有效数字。使用 LaTeX 的 $\\mathrm{pmatrix}$ 环境将最终数值答案表示为单个行向量，不带单位。",
            "solution": "用户提供了一个定义明确的问题，要求在二维搜索空间中对两个粒子执行单次粒子群优化（PSO）算法迭代。该问题经检验，内容合理、完整，无科学或逻辑错误。目标函数 $J(\\mathbf{p})$ 是为提供背景信息而给出的，但对于解决所提出的问题并非必需，该问题仅关注算法的运动学更新步骤（速度和位置更新）。\n\n在第 $t$ 次迭代中，粒子 $i$ 的标准PSO更新方程如下：\n速度更新：\n$$ \\mathbf{v}_{i}^{t+1} = w \\mathbf{v}_{i}^{t} + c_{1} r_{1,i} (\\mathbf{pbest}_{i} - \\mathbf{x}_{i}^{t}) + c_{2} r_{2,i} (\\mathbf{gbest} - \\mathbf{x}_{i}^{t}) $$\n位置更新：\n$$ \\mathbf{x}_{i}^{t+1} = \\mathbf{x}_{i}^{t} + \\mathbf{v}_{i}^{t+1} $$\n其中 $\\mathbf{v}$ 是速度向量，$\\mathbf{x}$ 是位置向量（等同于决策向量 $\\mathbf{p}$），$w$ 是惯性权重，$c_1$ 和 $c_2$ 是认知和社会系数，$r_{1,i}$ 和 $r_{2,i}$ 是随机数，$\\mathbf{pbest}_{i}$ 是粒子 $i$ 的个体最优位置，$\\mathbf{gbest}$ 是所有粒子找到的全局最优位置。\n\n问题指定了以下超参数：$w = 0.6$，$c_{1} = 1.7$，$c_{2} = 3.0$。位置的箱式约束为 $p_1 \\in [50, 250]$ 和 $p_2 \\in [20, 150]$。\n\n现在我们将计算每个粒子的更新后速度和位置，然后将新位置投影到指定的箱式约束上。\n\n**粒子 A：更新计算**\n\n粒子 A 的初始状态和随机数如下：\n-   当前位置：$\\mathbf{x}_{A}^{t} = \\begin{pmatrix} 120 \\\\ 80 \\end{pmatrix}$\n-   当前速度：$\\mathbf{v}_{A}^{t} = \\begin{pmatrix} 5 \\\\ -50 \\end{pmatrix}$\n-   个体最优位置：$\\mathbf{pbest}_{A} = \\begin{pmatrix} 130 \\\\ 70 \\end{pmatrix}$\n-   全局最优位置：$\\mathbf{gbest} = \\begin{pmatrix} 210 \\\\ 60 \\end{pmatrix}$\n-   随机标量：$r_{1,A} = 0.3$, $r_{2,A} = 0.9$\n\n首先，我们更新速度 $\\mathbf{v}_{A}^{t+1}$：\n$$ \\mathbf{v}_{A}^{t+1} = (0.6) \\mathbf{v}_{A}^{t} + (1.7)(0.3)(\\mathbf{pbest}_{A} - \\mathbf{x}_{A}^{t}) + (3.0)(0.9)(\\mathbf{gbest} - \\mathbf{x}_{A}^{t}) $$\n$$ \\mathbf{v}_{A}^{t+1} = 0.6 \\begin{pmatrix} 5 \\\\ -50 \\end{pmatrix} + 0.51\\left( \\begin{pmatrix} 130 \\\\ 70 \\end{pmatrix} - \\begin{pmatrix} 120 \\\\ 80 \\end{pmatrix} \\right) + 2.7\\left( \\begin{pmatrix} 210 \\\\ 60 \\end{pmatrix} - \\begin{pmatrix} 120 \\\\ 80 \\end{pmatrix} \\right) $$\n$$ \\mathbf{v}_{A}^{t+1} = \\begin{pmatrix} 3 \\\\ -30 \\end{pmatrix} + 0.51 \\begin{pmatrix} 10 \\\\ -10 \\end{pmatrix} + 2.7 \\begin{pmatrix} 90 \\\\ -20 \\end{pmatrix} $$\n$$ \\mathbf{v}_{A}^{t+1} = \\begin{pmatrix} 3 \\\\ -30 \\end{pmatrix} + \\begin{pmatrix} 5.1 \\\\ -5.1 \\end{pmatrix} + \\begin{pmatrix} 243 \\\\ -54 \\end{pmatrix} $$\n$$ \\mathbf{v}_{A}^{t+1} = \\begin{pmatrix} 3 + 5.1 + 243 \\\\ -30 - 5.1 - 54 \\end{pmatrix} = \\begin{pmatrix} 251.1 \\\\ -89.1 \\end{pmatrix} $$\n接下来，我们更新位置 $\\mathbf{x}_{A}^{t+1}$：\n$$ \\mathbf{x}_{A}^{t+1} = \\mathbf{x}_{A}^{t} + \\mathbf{v}_{A}^{t+1} = \\begin{pmatrix} 120 \\\\ 80 \\end{pmatrix} + \\begin{pmatrix} 251.1 \\\\ -89.1 \\end{pmatrix} = \\begin{pmatrix} 371.1 \\\\ -9.1 \\end{pmatrix} $$\n最后，我们将新位置 $\\mathbf{x}_{A}^{t+1}$ 投影到箱式约束 $p_1 \\in [50, 250]$ 和 $p_2 \\in [20, 150]$ 上：\n$$ x_{A,1}^{t+1, \\mathrm{proj}} = \\max(50, \\min(371.1, 250)) = 250 $$\n$$ x_{A,2}^{t+1, \\mathrm{proj}} = \\max(20, \\min(-9.1, 150)) = 20 $$\n因此，投影后的位置是 $\\mathbf{x}_{A}^{t+1, \\mathrm{proj}} = \\begin{pmatrix} 250 \\\\ 20 \\end{pmatrix}$。\n\n**粒子 B：更新计算**\n\n粒子 B 的初始状态和随机数如下：\n-   当前位置：$\\mathbf{x}_{B}^{t} = \\begin{pmatrix} 160 \\\\ 40 \\end{pmatrix}$\n-   当前速度：$\\mathbf{v}_{B}^{t} = \\begin{pmatrix} -4 \\\\ 6 \\end{pmatrix}$\n-   个体最优位置：$\\mathbf{pbest}_{B} = \\begin{pmatrix} 150 \\\\ 50 \\end{pmatrix}$\n-   全局最优位置：$\\mathbf{gbest} = \\begin{pmatrix} 210 \\\\ 60 \\end{pmatrix}$\n-   随机标量：$r_{1,B} = 0.8$, $r_{2,B} = 1.0$\n\n首先，我们更新速度 $\\mathbf{v}_{B}^{t+1}$：\n$$ \\mathbf{v}_{B}^{t+1} = (0.6) \\mathbf{v}_{B}^{t} + (1.7)(0.8)(\\mathbf{pbest}_{B} - \\mathbf{x}_{B}^{t}) + (3.0)(1.0)(\\mathbf{gbest} - \\mathbf{x}_{B}^{t}) $$\n$$ \\mathbf{v}_{B}^{t+1} = 0.6 \\begin{pmatrix} -4 \\\\ 6 \\end{pmatrix} + 1.36\\left( \\begin{pmatrix} 150 \\\\ 50 \\end{pmatrix} - \\begin{pmatrix} 160 \\\\ 40 \\end{pmatrix} \\right) + 3.0\\left( \\begin{pmatrix} 210 \\\\ 60 \\end{pmatrix} - \\begin{pmatrix} 160 \\\\ 40 \\end{pmatrix} \\right) $$\n$$ \\mathbf{v}_{B}^{t+1} = \\begin{pmatrix} -2.4 \\\\ 3.6 \\end{pmatrix} + 1.36 \\begin{pmatrix} -10 \\\\ 10 \\end{pmatrix} + 3.0 \\begin{pmatrix} 50 \\\\ 20 \\end{pmatrix} $$\n$$ \\mathbf{v}_{B}^{t+1} = \\begin{pmatrix} -2.4 \\\\ 3.6 \\end{pmatrix} + \\begin{pmatrix} -13.6 \\\\ 13.6 \\end{pmatrix} + \\begin{pmatrix} 150 \\\\ 60 \\end{pmatrix} $$\n$$ \\mathbf{v}_{B}^{t+1} = \\begin{pmatrix} -2.4 - 13.6 + 150 \\\\ 3.6 + 13.6 + 60 \\end{pmatrix} = \\begin{pmatrix} 134 \\\\ 77.2 \\end{pmatrix} $$\n接下来，我们更新位置 $\\mathbf{x}_{B}^{t+1}$：\n$$ \\mathbf{x}_{B}^{t+1} = \\mathbf{x}_{B}^{t} + \\mathbf{v}_{B}^{t+1} = \\begin{pmatrix} 160 \\\\ 40 \\end{pmatrix} + \\begin{pmatrix} 134 \\\\ 77.2 \\end{pmatrix} = \\begin{pmatrix} 294 \\\\ 117.2 \\end{pmatrix} $$\n最后，我们将新位置 $\\mathbf{x}_{B}^{t+1}$ 投影到箱式约束上：\n$$ x_{B,1}^{t+1, \\mathrm{proj}} = \\max(50, \\min(294, 250)) = 250 $$\n$$ x_{B,2}^{t+1, \\mathrm{proj}} = \\max(20, \\min(117.2, 150)) = 117.2 $$\n因此，投影后的位置是 $\\mathbf{x}_{B}^{t+1, \\mathrm{proj}} = \\begin{pmatrix} 250 \\\\ 117.2 \\end{pmatrix}$。\n\n**最终结果汇总**\n\n要求的输出是这八个数字的有序集合：\n$$ \\left(v_{A,1}^{t+1}, v_{A,2}^{t+1}, x_{A,1}^{t+1,\\mathrm{proj}}, x_{A,2}^{t+1,\\mathrm{proj}}, v_{B,1}^{t+1}, v_{B,2}^{t+1}, x_{B,1}^{t+1,\\mathrm{proj}}, x_{B,2}^{t+1,\\mathrm{proj}}\\right) $$\n计算出的值为：\n$$ (251.1, -89.1, 250, 20, 134, 77.2, 250, 117.2) $$\n按要求将每个数字四舍五入到四位有效数字：\n-   $v_{A,1}^{t+1} = 251.1$ (已经是4位有效数字)\n-   $v_{A,2}^{t+1} = -89.1 \\to -89.10$\n-   $x_{A,1}^{t+1,\\mathrm{proj}} = 250 \\to 250.0$\n-   $x_{A,2}^{t+1,\\mathrm{proj}} = 20 \\to 20.00$\n-   $v_{B,1}^{t+1} = 134 \\to 134.0$\n-   $v_{B,2}^{t+1} = 77.2 \\to 77.20$\n-   $x_{B,1}^{t+1,\\mathrm{proj}} = 250 \\to 250.0$\n-   $x_{B,2}^{t+1,\\mathrm{proj}} = 117.2$ (已经是4位有效数字)\n\n最终的数字向量是 $(251.1, -89.10, 250.0, 20.00, 134.0, 77.20, 250.0, 117.2)$。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 251.1  -89.10  250.0  20.00  134.0  77.20  250.0  117.2 \\end{pmatrix} } $$"
        },
        {
            "introduction": "真实的能源系统设计通常涉及在相互冲突的目标之间取得平衡，例如在最小化成本的同时减少排放。这项练习介绍了非支配排序遗传算法II（NSGA-II）中处理此类权衡的一个关键概念：拥挤距离。通过为一组解计算该指标，你将深入了解多目标演化算法如何维护一组多样化的高质量权衡解，即帕累托前沿。",
            "id": "4103141",
            "problem": "在能源系统建模中，考虑一个多目标优化问题，其中每个候选组合 $\\mathbf{x}$ 由一个目标向量 $\\mathbf{f}(\\mathbf{x}) = (f_1(\\mathbf{x}), f_2(\\mathbf{x}))$ 进行评估，该向量分别代表平准化能源成本和生命周期温室气体排放。$f_1$ 和 $f_2$ 都需要最小化。在多目标演化算法 (MOEA) 中，特别是在非支配排序遗传算法II (NSGA-II) 中，解根据非支配前沿进行排序，并在每个前沿内部通过一种称为拥挤距离的多样性保持度量进一步排序。从适用于多目标优化和随机搜索的第一性原理出发，通过满足以下基本要求来推导 NSGA-II 中使用的拥挤距离表达式：局部性（密度估计仅取决于目标空间中的邻近解）、每个目标在仿射变换下的尺度不变性（因此重缩放一个目标不会改变拥挤距离的排序），以及跨目标的可加性（因此在多个目标上的分离会增加拥挤距离）。最后，给出应用于两个目标的非支配前沿的精确公式。\n\n然后，计算以下由五个候选发电组合组成的非支配前沿的拥挤距离，每个组合都由其 $(f_1,f_2)$ 值给出，单位分别为 $\\$/\\mathrm{MWh}$ 和 $\\mathrm{kg}\\,\\mathrm{CO}_2/\\mathrm{MWh}$：\n- $P_1$: $(40, 800)$\n- $P_2$: $(45, 700)$\n- $P_3$: $(50, 620)$\n- $P_4$: $(60, 580)$\n- $P_5$: $(80, 560)$\n\n假设两个目标都最小化，拥挤距离使用前沿内的逐目标排序、逐目标范围归一化，并为每个目标中的边界解分配无限大的拥挤距离，如同 NSGA-II 中的做法。按 $P_1$ 到 $P_5$ 的给定顺序报告拥挤距离。将最终的拥挤距离表示为无量纲数。使用精确值，不要四舍五入。对于边界点，使用符号 $\\infty$。",
            "solution": "### 第 1 部分：拥挤距离公式的推导\n\n拥挤距离是 NSGA-II 算法中使用的一种度量，用于维持给定非支配前沿上解的多样性。它估计了目标空间中围绕特定解的解的密度。高拥挤距离意味着一个解位于一个较不拥挤的区域，这是理想的。我们根据规定的原则推导其表达式。\n\n假设一个非支配前沿包含一组解。令 $d_i$ 为该集合中第 $i$ 个解的拥挤距离。我们考虑一个有 $M$ 个目标的问题，$f_1, f_2, \\dots, f_M$。\n\n1.  **局部性与可加性**：解 $i$ 的拥挤距离旨在衡量其周围空白空间的体积。**局部性**原则表明，这个度量应仅取决于解 $i$ 的直接邻居。为了定义邻居，我们必须独立考虑每个目标轴。对于特定的目标 $m$，我们按其 $f_m$ 值的升序对前沿中的解进行排序。对于此目标，解 $i$ 的邻居（表示为 $i-1$ 和 $i+1$）是在此排序列表中紧接在其之前和之后的解。沿该目标轴围绕 $i$ 的局部空间范围由其邻居的目标值之差给出：$f_m(i+1) - f_m(i-1)$。**可加性**原则指出，总拥挤距离是来自每个目标的这些距离分量的总和。因此，初始公式为 $d_i = \\sum_{m=1}^{M} \\left( f_m(i+1) - f_m(i-1) \\right)$。\n\n2.  **尺度不变性**：上述公式对目标的尺度很敏感。例如，如果 $f_1$ 以美元计量，而 $f_2$ 以克计量，它们对 $d_i$ 的贡献将有不同的数量级。如果我们将 $f_1$ 的单位更改为美分（将所有值乘以100），其贡献将被被人为地夸大，从而改变多样性排名。**尺度不变性**原则要求，通过拥挤距离对解的排名在任何目标的仿射变换下保持不变，即对于常数 $a>0, b$，$f'_m = a f_m + b$。为实现这一点，每个目标的距离分量必须被归一化。一个自然的选择是使用该目标函数值在整个前沿上的总范围作为归一化因子。设 $f_m^{\\max}$ 和 $f_m^{\\min}$ 分别是当前非支配前沿中解的目标 $m$ 的最大值和最小值。通过将距离分量除以此范围，我们得到一个无量纲量：\n$$d_i^{(m)} = \\frac{f_m(i+1) - f_m(i-1)}{f_m^{\\max} - f_m^{\\min}}$$\n这个归一化分量现在对目标 $m$ 的尺度和单位是不变的。\n\n3.  **最终表达式和边界条件**：结合可加性和尺度不变性，一个*内部*解 $i$ 的拥挤距离是其归一化距离分量的总和：\n$$d_i = \\sum_{m=1}^{M} \\frac{f_m(i+1) - f_m(i-1)}{f_m^{\\max} - f_m^{\\min}}$$\n对于**边界解**的特殊情况——即那些在任何目标 $m$ 上具有最小值或最大值的解——它们在该目标的排序列表中没有两个邻居。为了确保这些定义了帕累托前沿范围的极端解在选择过程中被保留，NSGA-II 赋予它们最高的多样性值。这是通过将其拥挤距离设置为无穷大来实现的。\n因此，对于任何在任何 $m \\in \\{1, \\dots, M\\}$ 上持有值 $f_m^{\\min}$ 或 $f_m^{\\max}$ 的解 $i$，其拥挤距离定义为 $d_i = \\infty$。\n\n对于问题中两个目标（$M=2$）的特定情况，内部点 $i$ 的公式简化为：\n$$d_i = \\frac{f_1((i)_{s_1}+1) - f_1((i)_{s_1}-1)}{f_1^{\\max} - f_1^{\\min}} + \\frac{f_2((i)_{s_2}+1) - f_2((i)_{s_2}-1)}{f_2^{\\max} - f_2^{\\min}}$$\n其中 $(i)_{s_1}$ 指的是解 $i$ 在按目标 $f_1$ 排序的列表中的索引，而 $(i)_{s_2}$ 是它在按 $f_2$ 排序的列表中的索引。\n\n### 第 2 部分：拥挤距离的计算\n\n我们得到一个非支配前沿上的以下五个组合：\n-   $P_1: (f_1, f_2) = (40, 800)$\n-   $P_2: (f_1, f_2) = (45, 700)$\n-   $P_3: (f_1, f_2) = (50, 620)$\n-   $P_4: (f_1, f_2) = (60, 580)$\n-   $P_5: (f_1, f_2) = (80, 560)$\n\n**步骤 1：确定范围和边界点**\n\n首先，我们根据每个目标对组合进行排序，并找到最小值/最大值。\n\n**对于目标 $f_1$ (成本):**\n值为 $40, 45, 50, 60, 80$。这些组合已经排好序：$P_1, P_2, P_3, P_4, P_5$。\n-   $f_1^{\\min} = 40$ (在 $P_1$ 处)\n-   $f_1^{\\max} = 80$ (在 $P_5$ 处)\n-   $f_1$ 的范围：$f_1^{\\max} - f_1^{\\min} = 80 - 40 = 40$。\n该目标的边界点是 $P_1$ 和 $P_5$。\n\n**对于目标 $f_2$ (排放):**\n值为 $800, 700, 620, 580, 560$。按升序排序（因为它是一个最小化目标）：$560, 580, 620, 700, 800$。\n排序后的组合列表为：$P_5, P_4, P_3, P_2, P_1$。\n-   $f_2^{\\min} = 560$ (在 $P_5$ 处)\n-   $f_2^{\\max} = 800$ (在 $P_1$ 处)\n-   $f_2$ 的范围：$f_2^{\\max} - f_2^{\\min} = 800 - 560 = 240$。\n该目标的边界点是 $P_5$ 和 $P_1$。\n\n前沿的总体边界解是那些在*至少一个*目标上是极值的解。这里是 $P_1$ 和 $P_5$。根据规则，它们的拥挤距离是无穷大。\n-   $d(P_1) = \\infty$\n-   $d(P_5) = \\infty$\n\n**步骤 2：计算内部点 ($P_2, P_3, P_4$) 的拥挤距离**\n\n对于任何内部点 $i$，$d_i = d_i^{(1)} + d_i^{(2)}$。\n\n**对于组合 $P_2 = (45, 700)$:**\n-   来自 $f_1$ 的贡献：在按 $f_1$ 排序的列表 ($P_1, P_2, P_3, ...$) 中，$P_2$ 的邻居是 $P_1$ 和 $P_3$。\n    $d^{(1)}(P_2) = \\frac{f_1(P_3) - f_1(P_1)}{f_1^{\\max} - f_1^{\\min}} = \\frac{50 - 40}{40} = \\frac{10}{40} = \\frac{1}{4}$。\n-   来自 $f_2$ 的贡献：在按 $f_2$ 排序的列表 ($..., P_3, P_2, P_1$) 中，$P_2$ 的邻居是 $P_3$ 和 $P_1$。\n    $d^{(2)}(P_2) = \\frac{f_2(P_1) - f_2(P_3)}{f_2^{\\max} - f_2^{\\min}} = \\frac{800 - 620}{240} = \\frac{180}{240} = \\frac{3}{4}$。\n-   总距离：$d(P_2) = \\frac{1}{4} + \\frac{3}{4} = 1$。\n\n**对于组合 $P_3 = (50, 620)$:**\n-   来自 $f_1$ 的贡献：在按 $f_1$ 排序的列表 ($..., P_2, P_3, P_4, ...$) 中，$P_3$ 的邻居是 $P_2$ 和 $P_4$。\n    $d^{(1)}(P_3) = \\frac{f_1(P_4) - f_1(P_2)}{f_1^{\\max} - f_1^{\\min}} = \\frac{60 - 45}{40} = \\frac{15}{40} = \\frac{3}{8}$。\n-   来自 $f_2$ 的贡献：在按 $f_2$ 排序的列表 ($..., P_4, P_3, P_2, ...$) 中，$P_3$ 的邻居是 $P_4$ 和 $P_2$。\n    $d^{(2)}(P_3) = \\frac{f_2(P_2) - f_2(P_4)}{f_2^{\\max} - f_2^{\\min}} = \\frac{700 - 580}{240} = \\frac{120}{240} = \\frac{1}{2}$。\n-   总距离：$d(P_3) = \\frac{3}{8} + \\frac{1}{2} = \\frac{3}{8} + \\frac{4}{8} = \\frac{7}{8}$。\n\n**对于组合 $P_4 = (60, 580)$:**\n-   来自 $f_1$ 的贡献：在按 $f_1$ 排序的列表 ($..., P_3, P_4, P_5$) 中，$P_4$ 的邻居是 $P_3$ 和 $P_5$。\n    $d^{(1)}(P_4) = \\frac{f_1(P_5) - f_1(P_3)}{f_1^{\\max} - f_1^{\\min}} = \\frac{80 - 50}{40} = \\frac{30}{40} = \\frac{3}{4}$。\n-   来自 $f_2$ 的贡献：在按 $f_2$ 排序的列表 ($P_5, P_4, P_3, ...$) 中，$P_4$ 的邻居是 $P_5$ 和 $P_3$。\n    $d^{(2)}(P_4) = \\frac{f_2(P_3) - f_2(P_5)}{f_2^{\\max} - f_2^{\\min}} = \\frac{620 - 560}{240} = \\frac{60}{240} = \\frac{1}{4}$。\n-   总距离：$d(P_4) = \\frac{3}{4} + \\frac{1}{4} = 1$。\n\n**步骤 3：整理最终结果**\n\n按指定顺序排列的组合 $P_1, P_2, P_3, P_4, P_5$ 的计算拥挤距离为：\n-   $d(P_1) = \\infty$\n-   $d(P_2) = 1$\n-   $d(P_3) = \\frac{7}{8}$\n-   $d(P_4) = 1$\n-   $d(P_5) = \\infty$\n这些值按要求是无量纲的。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\infty  1  \\frac{7}{8}  1  \\infty\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
## 引言
随着储能系统在全球能源转型中扮演日益核心的角色，准确评估并管理其全生命周期成本变得至关重要。电池作为储能系统的核心部件，其性能会随着时间和使用而不可避免地退化，直接影响项目的经济可行性和长期可靠性。然而，在大型[能源系统规划](@entry_id:1124498)模型中有效表示这一复杂过程面临着一个核心挑战：过于简化的模型无法捕捉关键的[非线性](@entry_id:637147)效应，导致决策失误；而过于精细的物理模型则计算成本高昂，难以应用于[大规模优化](@entry_id:168142)。

本文旨在系统性地解决这一问题，为在规划模型中表示[电池退化](@entry_id:264757)提供一套全面的理论框架和实用方法。通过阅读本文，您将掌握如何将复杂的电化学[退化现象](@entry_id:183258)，转化为适用于经济优化和战略规划的数学形式。

文章分为三个核心部分。首先，在 **“原理与机制”** 一章中，我们将深入探讨表征电池健康的核心指标、区分[日历老化](@entry_id:1121992)与循环老化的基本原理，并介绍量化电池使用的关键方法。接着，**“应用与跨学科联系”** 一章将展示这些模型在现实世界中的广泛应用，从[电力市场](@entry_id:1124241)套利到长期资产更换策略，并揭示其与控制理论、数据科学等领域的深刻联系。最后，**“动手实践”** 部分将通过一系列具体问题，帮助您将理论知识转化为解决实际建模问题的能力。

现在，让我们从理解电池退化的基本原理与机制开始，为构建严谨、有效的规划模型奠定坚实的基础。

## 原理与机制

在[能源系统规划](@entry_id:1124498)模型中，准确地表示电池的退化对于评估其长期经济价值和运行可行性至关重要。电池的性能并非静态，而是随着时间和使用而逐渐衰减。本章深入探讨了表征电池衰减的核心原理与关键机制，为构建严谨的规划模型奠定基础。我们将从定义电池健康的基本度量指标出发，逐步分解主要的衰减模式，并探讨如何在数学上量化电池的使用情况及其对寿命的影响。

### 电池健康的核心度量指标

为了在模型中捕捉电池的老化过程，我们必须首先定义可量化、可观测的健康指标。在[锂离子电池](@entry_id:150991)中，两种主要的衰减现象是 **容量衰减 (capacity fade)** 和 **[内阻](@entry_id:268117)增长 (internal resistance growth)**。

**[容量衰减](@entry_id:1122046)** 指的是电池储存电荷能力的永久性损失。这源于多种电化学副反应，例如活性物质的损失、电极结构的破坏或移动锂离子的损失。在模型中，这一过程通过时间依赖的可用容量函数 $Q(t)$ 来表示。根据电荷守恒原理，电池能够释放的总电荷是电流对时间的积分。因此，容量衰减可以通过标准化的充放电测试来量化：将电池在参考电流和温度下完全放电，直至其端电压达到预设的最低电压 $V_{\min}$。在此过程中释放的总电荷（即放电电流乘以放电时间）即为当前时刻的容量 $Q(t)$。随着电池老化，$Q(t)$ 的值会逐渐减小。这在规划模型中直接表现为电池总能量容量的缩减，从而在给定功率下缩短了放电持续时间 。

**内阻增长** 指的是电池内部对电流流动的阻碍增大的现象。其物理原因包括[固体电解质界面膜 (SEI)](@entry_id:159674) 的增厚、电解液的分解或电极颗粒间接触的恶化。模型中，这通过一个时间依赖的内阻函数 $R(t)$ 来表示。根据欧姆定律，内阻会导致电池在充放电时产生[电压降](@entry_id:263648)（或电压升高），其大小为 $I(t)R(t)$。因此，[内阻](@entry_id:268117)的增长可以通过施加一个电流阶跃并测量瞬时电压变化来量化。一个增长的 $R(t)$ 会带来两个主要负面影响：首先，它增加了[焦耳热损耗](@entry_id:268094)（$I(t)^2 R(t)$），从而降低了电池的 **[往返效率](@entry_id:1131124)**；其次，在给定的电流下，它使得端电压更快地达到极限值（$V_{\min}$ 或 $V_{\max}$），从而收紧了电池的有效功率输出限制 。

基于这两个基本物理量，我们引入两个核心的状态变量用于建模：**健康状态 (State of Health, SOH)** 和 **荷电状态 (State of Charge, SOC)**。

**[健康状态 (SOH)](@entry_id:1132307)** 定义为当前可用容量 $Q_{t}$ 与初始（全新时）可用容量 $Q_{0}$ 的比值：
$$SOH_{t} = \frac{Q_{t}}{Q_{0}}$$
$SOH_{t}$ 是一个从 $1$ 开始并随时间单调递减的[无量纲数](@entry_id:260863)，直观地表示了电池寿命的剩余比例。

**[荷电状态 (SOC)](@entry_id:1132303)** 定义为当前储存的能量 $e_{t}$ 与当前可用容量 $Q_{t}$ 的比值：
$$SOC_{t} = \frac{e_{t}}{Q_{t}}$$
一个常见的建模错误是将SOC定义为相对于初始容量 $Q_{0}$ 的比值。正确的定义至关重要，因为它确保了SOC的物理意义——即在当前健康状况下，电池的“充满”程度。电池的运行通常被限制在一个允许的SOC窗口内，例如 $[SOC_{\min}, SOC_{\max}]$。这意味着任意时刻储存的能量 $e_{t}$ 都必须满足：
$$SOC_{\min} Q_{t} \le e_{t} \le SOC_{\max} Q_{t}$$
这个不等式清晰地揭示了[容量衰减](@entry_id:1122046)的直接后果：随着 $Q_{t}$ 的减小，电池能够储存和调度的绝对能量范围 $([SOC_{\min}, SOC_{\max}] \cdot Q_{t})$ 也在同步缩小。同样，电池的功率限制也应与其当前的健康状态挂钩，通常表示为初始额定功率 $\bar{P}$ 与SOH的乘积，即 $|P_{t}| \le \bar{P} \cdot (Q_{t}/Q_{0})$  。这两个相互关联的约束共同作用，确保了规划模型的可行性，即随着[电池老化](@entry_id:158781)，其能量和功率调度能力会相应减弱，防止模型生成在物理上无法实现的调度计划。

### 衰减的分解：日历老化与循环老化

为了建立更精确的衰减模型，通常将总的容量损失分解为两个主要部分：**[日历老化](@entry_id:1121992) (calendar aging)** 和 **循环老化 (cycling aging)**。这种分解假设两种机制是相互独立的，其总效应是两者之和，这对于规划模型来说是一个实用且广泛接受的简化。

**日历老化** 是指电池在静置（未使用）状态下随时间推移而发生的自然老化。其主要驱动因素是时间和环境温度。物理上，这通常与电极/[电解质](@entry_id:261072)界面上缓慢进行的寄生化学反应有关，例如SEI膜的持续生长。这些反应的速率对温度高度敏感，其依赖关系通常遵循 **阿伦尼乌斯定律 (Arrhenius law)**。该定律指出，反应速率常数 $k(T)$ 与绝对温度 $T$ 的关系为：
$$k(T) = k_{0} \exp\left(-\frac{E_{a}}{R T}\right)$$
其中 $k_{0}$ 是[指前因子](@entry_id:145277)，$E_{a}$ 是活化能，$R$ 是[通用气体常数](@entry_id:136843)。此外，许多扩散限制的过程（如SEI膜增厚）导致的容量损失在长时间尺度上被发现与时间的平方根 ($\sqrt{t}$) 成正比。综合这两个物理洞察，一个常见的[日历老化](@entry_id:1121992)模型 $g_{\text{cal}}(t, T)$ 可以表示为  ：
$$g_{\text{cal}}(t, T) = A \exp\left(-\frac{E_{a}}{R T}\right)\sqrt{t}$$
这里，$A$ 是一个具有容量单位的常数，该模型捕捉了老化随时间和温度[非线性](@entry_id:637147)加速的特性。

**循环老化** 是指由电池充放电使用过程直接引起的损耗。它与循环的次数、深度、速率和温度等因素有关。机械应力（电极材料因锂离子嵌入和脱出而发生的体积变化）、[锂枝晶生长](@entry_id:1127355)以及在高/低电位下加速的副反应都是[循环老化](@entry_id:1123334)的重要机制。一个被广泛用于工程[疲劳分析](@entry_id:191624)并适用于电池的法则是 **Palmgren-Miner[线性损伤累积](@entry_id:195991)法则 (Palmgren-Miner linear damage accumulation rule)**。该法则假定每次循环造成的损伤是独立的，总损伤等于每次循环损伤的简单叠加，且与循环发生的顺序无关。

综合这两种机制，电池的[容量衰减](@entry_id:1122046)可以被建模为一个加性模型：
$$Q(t) = Q_{0} - g_{\text{cal}}(t, T) - g_{\text{cyc}}(\{d_{i}\})$$
其中 $g_{\text{cyc}}(\{d_{i}\})$ 代表由一系列深度为 $d_{i}$ 的循环所造成的累积损伤。

### 电池使用的量化以用于衰减建模

要建立[循环老化](@entry_id:1123334)模型 $g_{\text{cyc}}$，我们必须首先量化“电池使用”这一概念。

最简单直接的度量是 **[吞吐量](@entry_id:271802) (throughput)**，即电池在一段时间内处理的总能量或电荷。在规划模型中，一个周期 $t$ 内的绝对能量[吞吐量](@entry_id:271802)为 $|P_{t}|\Delta t$。总吞吐量是所有周期吞吐量的累加。然而，仅使用[吞吐量](@entry_id:271802)作为磨损指标是不完整的，因为它无法区分一次深度为 $80\%$ 的循环和两次深度为 $40\%$ 的循环，而后者通常对电池寿命的损害更小。

为了更精确地衡量使用强度，引入了 **等效满充满放循环次数 (Equivalent Full Cycles, EFC)** 的概念。EFC通过将所有不同深度的循环折算成等效的 $100\%$ 深度循环次数来量化总磨损。一个关键的洞察是，在一个理想的、[无能](@entry_id:201612)量损失且始末SOC相同的充放电过程中，总的“双向”吞吐量 $z$ (充电量+放电量) 是EFC的两倍 。形式上，如果我们将归一化的总吞吐量定义为 $z = \sum_{t} \frac{|P_{t}| \Delta t}{Q_{0}}$，并将EFC定义为所有循环深度 $d_{i}$ 的总和 ($\mathrm{EFC} = \sum_i d_{i}$)，那么在理想条件下，我们有：
$$z = 2 \cdot \mathrm{EFC}$$
这个关系揭示了，一次满充满放循环（$1$ EFC）对应于两倍于电池容量的能量吞吐（一次充电，一次放电）。

除了循环深度，循环速率也是一个重要的应力因子。**C倍率 (C-rate)** 定义为充放[电功率](@entry_id:273774)相对于电池容量的比值，即 $C_r = |P_{t}|/Q_{t}$（单位通常为 $h^{-1}$）。更高的C倍率意味着更大的电流密度，这会导致更大的电化学[过电位](@entry_id:139429)。根据Butler-Volmer等[电化学动力学](@entry_id:263644)关系，过电位的增加会指数级地加速[副反应](@entry_id:271170)（如[SEI膜生长](@entry_id:1131391)和[锂枝晶](@entry_id:159084)沉积）的速率。因此，一个物理上合理的退化应力函数 $g(C_r)$ 应该是关于C倍率 $C_r$ 的单调递增的[凸函数](@entry_id:143075)，意味着退化随速率的增加而加速。线性函数 $g(C_r) \propto C_r$ 无法捕捉这种加速效应，而[幂函数](@entry_id:166538) $g(C_r) \propto C_r^b$ (其中 $b>1$) 或指数函数 $g(C_r) \propto \exp(\beta C_r)$ 则是更符合物理现实的数学形式 。

### 基于循环的高级衰减模型

为了在模型中更精细地捕捉[循环老化](@entry_id:1123334)的影响，我们需要超越简单的[吞吐量](@entry_id:271802)或EFC计数，转向基于单个循环特征的建模方法。

首先，我们定义一个 **循环应力函数 (cycle stress function)** $f(d)$，它将单次循环的深度 $d$ 映射到一个无量纲的磨损增量。根据[Palmgren-Miner法则](@entry_id:183664)，如果电池在恒定深度 $d$ 下的[循环寿命](@entry_id:275737)为 $N(d)$ 次，那么每次循环造成的寿命损耗分数就是 $1/N(d)$。因此，应力函数可以被校准为 $f(d) \propto 1/N(d)$。经验表明，循环寿命 $N(d)$ 随深度 $d$ 的增加而减少，通常遵循幂律关系 $N(d) \propto d^{-\beta}$（其中 $\beta > 0$）。这导出了一个非常流行且实用的应力函数形式 ：
$$f(d) = \alpha d^{\beta}$$
其中 $\alpha$ 和 $\beta$ 是从实验数据中拟合得到的参数。

有了单次循环的损伤函数后，接下来的挑战是如何从一个复杂的、非规则的SOC时间序列中提取出所有独立的循环及其深度。**[雨流计数法](@entry_id:180974) (rainflow counting)** (例如，ASTM E1049标准) 为此提供了标准算法。该算法通过识别SOC轨迹的[局部极值](@entry_id:144991)点（峰值和谷值），并根据特定的范围配对规则，将整个轨迹分解为一系列闭合的循环（以及一些残余的半循环）。总的循环损伤就是将所有提取出的循环深度 $d_{i}$ 代入应力函数 $f(d)$ 并求和：
$$\text{Total Wear} = \sum_i f(d_{i})$$

然而，这种方法的精确性也带来了巨大的建模挑战。雨流计数算法的输出（即循环的集合）取决于整个SOC轨迹的路径，而不仅仅是当前时刻的状态。这意味着，系统的演化是 **[非马尔可夫性](@entry_id:1128807)的 (non-Markovian)**。换句话说，仅知道当前的SOC和SOH，即 $(SOC_{t}, Q_{t})$，不足以预测未来的衰减，因为衰减还依赖于SOC是如何达到当前值的历史路径（例如，最近的SOC极值点是什么）。要使模型成为[马尔可夫决策过程 (MDP)](@entry_id:1127639)，[状态空间](@entry_id:160914)必须被增广以包含所有相关的历史信息（如最近的[极值](@entry_id:145933)点和运动方向），但这会使[状态空间](@entry_id:160914)变得复杂。

更严重的是，雨流计数的组合和逻辑特性（例如，一个微小的SOC变化可能导致完全不同的循环配对）使得基于雨流计数的衰减[目标函数](@entry_id:267263) $J(x_{1:T}) = \sum_i \phi(d_{i})$ 是一个关于决策变量（如功率 $P_{t}$）的非[凸函数](@entry_id:143075)。将这样一个非凸函数直接嵌入到一个大规模的线性或[凸优化](@entry_id:137441)规划模型中，会使问题变成一个混合整数[非线性规划](@entry_id:636219) (MINLP) 问题，其计算复杂度极高，对于长期规划而言通常是不可解的。因此，在实践中，研究者们常常采用 **凸代理 (convex surrogates)** 方法，例如使用一个形如 $\sum_t \psi(|x_{t+1}-x_t|)$ 的凸函数来近似真实的雨流计数衰减成本，以此在保持模型[凸性](@entry_id:138568)和计算可行性的同时，捕捉部分循环衰减的动态 。

### 将衰减整合到经济规划模型中

最后，物理衰减模型需要被转化为经济成本，才能被纳入以[净现值 (NPV)](@entry_id:146749) 或总成本最小化为目标的规划模型中。一种有效且广泛使用的方法是将未来的电池更换成本平摊到其生命周期的每一次使用中，形成一个 **边际使用成本 (marginal cost of use)**, $\lambda$。

其基本思想源于[优化理论](@entry_id:144639)中的[拉格朗日乘子](@entry_id:142696)或影子价格。考虑一个总寿命预算约束，例如总EFC不超过 $L$ ($\sum y_{t}^{\mathrm{EFC}} \le L$)。与该约束相关联的拉格朗日乘子 $\lambda$ 的经济学解释是，每增加一单位电池寿命（即一个EFC）所能带来的系统成本节约值。因此，我们可以通过将电池的总更换成本 $C^{\mathrm{rep}}$ 除以其总预期寿命来校准这个边际成本。如果寿命以EFC $L$ 衡量，则：
$$\lambda = \frac{C^{\mathrm{rep}}}{L} \quad (\text{单位: }\$/\text{EFC})$$
如果寿命以总吞吐量 $X^{\mathrm{life}}$ 衡量，则：
$$\lambda = \frac{C^{\mathrm{rep}}}{X^{\mathrm{life}}} \quad (\text{单位: }\$/\text{MWh})$$
在定义了 $\lambda$ 之后，在每个时间步 $t$ 中，就可以向目标函数中添加一个与当期使用量成正比的线性磨损成本项，例如 $\lambda \cdot y_{t}^{\mathrm{EFC}}$ 或 $\lambda \cdot y_{t}^{\mathrm{Thru}}$。这种方法巧妙地将一个遥远的、离散的更换事件转化为了一个连续的、即时的运营成本，使得优化模型可以在权衡当前收益与未来寿命损耗之间做出经济上合理的决策 。

综上所述，在规划模型中表征[电池衰减](@entry_id:264757)是一个多层次的挑战，它始于对核心物理现象的理解，发展到对使用的数学量化，再到高级循环计数算法及其在优化中的近似表示，最终通过经济学的视角将其转化为可操作的成本项。一个严谨的模型必须在物理真实性、数学一致性和计算可行性之间取得平衡。
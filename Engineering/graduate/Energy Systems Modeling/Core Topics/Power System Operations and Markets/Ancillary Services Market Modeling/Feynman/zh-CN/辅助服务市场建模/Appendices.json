{
    "hands_on_practices": [
        {
            "introduction": "电力系统的频率稳定性是其可靠运行的基石。本练习将通过一个基础但至关重要的问题，带你深入理解系统惯量这一辅助服务的物理本质。我们将使用经典的摇摆方程，将系统安全运行所要求的物理约束（频率变化率或 $RoCoF$）直接与必须在市场中采购的量（最小系统惯量 $H_{\\mathrm{sys}}$）联系起来，从而揭示辅助服务需求是如何源于物理定律的。",
            "id": "4069530",
            "problem": "一个输电系统运营商计划设计一种用于转动惯量的辅助服务产品，以在发生可信事故后强制执行频率变化率 (RoCoF) 限制。考虑一个由单个惯性中心电机代表的系统。该惯性中心频率的聚合摇摆动态由经典摇摆方程描述，惯性常数按标准方式定义：在额定转速下，旋转质量中存储的动能为 $E_{k} = H_{\\mathrm{sys}} S_{\\mathrm{base}}$，其中 $H_{\\mathrm{sys}}$ 是系统功率基准 $S_{\\mathrm{base}}$（单位为兆伏安）下的聚合惯性常数（单位为秒），$E_{k}$ 的单位为兆焦耳。假设在扰动发生的初始时刻，负荷阻尼和一次控制可以忽略不计，因此初始频率变化率仅由功率不平衡和惯量决定。\n\n标称频率为 $f_{0} = 50$ Hz。系统功率基准为 $S_{\\mathrm{base}} = 31$ GW，可信事故为大小为 $\\Delta P = 1.30$ GW 的发电突发性损失。RoCoF 限制为 $|\\mathrm{d}f/\\mathrm{d}t| \\le \\alpha$，其中 $\\alpha = 0.40$ Hz/s。将此损失视为作用于惯性中心的阶跃不平衡，并使用摇摆方程推导连接 RoCoF 限制 $\\alpha$ 与最小聚合惯性常数 $H_{\\mathrm{sys}}$ 的条件。然后，使用给定的数据，计算必须采购的最小 $H_{\\mathrm{sys}}$。用秒表示您的最终答案，并将答案四舍五入到四位有效数字。",
            "solution": "摇摆方程描述了聚合系统的转子速度变化与功率不平衡之间的关系。在标幺 (p.u.) 值系统中，该方程为：\n$$ 2 H_{\\mathrm{sys}} \\frac{\\mathrm{d}\\omega_{\\mathrm{p.u.}}}{\\mathrm{d}t} = \\Delta P_{\\text{p.u.}} $$\n其中 $H_{\\mathrm{sys}}$ 是系统惯性常数，$\\omega_{\\mathrm{p.u.}}$ 是标幺频率，而 $\\Delta P_{\\text{p.u.}}$ 是以标幺值表示的功率不平衡。\n\n系统频率 $f$ (单位：Hz) 与标幺频率通过标称频率 $f_0$ 相关联：$f = f_{0} \\omega_{\\mathrm{p.u.}}$。对其关于时间求导，得到频率变化率 (RoCoF)：\n$$ \\frac{\\mathrm{d}f}{\\mathrm{d}t} = f_{0} \\frac{\\mathrm{d}\\omega_{\\mathrm{p.u.}}}{\\mathrm{d}t} $$\n将此关系代入摇摆方程：\n$$ 2 H_{\\mathrm{sys}} \\left( \\frac{1}{f_{0}} \\frac{\\mathrm{d}f}{\\mathrm{d}t} \\right) = \\Delta P_{\\text{p.u.}} $$\n以标幺值表示的功率不平衡，是发电损失量 $\\Delta P$ 相对于系统基准功率 $S_{\\mathrm{base}}$ 的比值：\n$$ \\Delta P_{\\text{p.u.}} = \\frac{-\\Delta P}{S_{\\mathrm{base}}} $$\n负号表示发电量的损失。将此表达式代入并求解 RoCoF：\n$$ \\frac{\\mathrm{d}f}{\\mathrm{d}t} = -\\frac{f_{0}}{2 H_{\\mathrm{sys}}} \\frac{\\Delta P}{S_{\\mathrm{base}}} $$\nRoCoF 限制要求 $|\\mathrm{d}f/\\mathrm{d}t| \\le \\alpha$。为了找到满足该条件的最小所需惯量，我们将 RoCoF 的绝对值设为等于限制值 $\\alpha$：\n$$ \\frac{f_{0}}{2 H_{\\mathrm{sys, min}}} \\frac{\\Delta P}{S_{\\mathrm{base}}} = \\alpha $$\n求解最小惯量 $H_{\\mathrm{sys, min}}$：\n$$ H_{\\mathrm{sys, min}} = \\frac{f_{0}}{2 \\alpha} \\frac{\\Delta P}{S_{\\mathrm{base}}} $$\n现在，代入给定数值：\n- $f_{0} = 50$ Hz\n- $\\alpha = 0.40$ Hz/s\n- $\\Delta P = 1.30$ GW\n- $S_{\\mathrm{base}} = 31$ GW\n$$ H_{\\mathrm{sys, min}} = \\frac{50}{2 \\times 0.40} \\times \\frac{1.30}{31} = 62.5 \\times \\frac{1.30}{31} \\approx 2.620967... \\text{ s} $$\n四舍五入到四位有效数字，所需的最小系统惯量为 $2.621$ 秒。",
            "answer": "$$\\boxed{2.621}$$"
        },
        {
            "introduction": "仅仅采购足够总量的辅助服务（如备用）并不足以保证系统安全，其在电网中的“位置”同样至关重要。本练习使用直流潮流模型，通过一个经典的反例来阐明备用服务的“可交付性”问题。你将计算并发现，即使系统整体备用充足，若忽略网络拓扑和线路限制，紧急情况下的备用部署仍可能导致输电线路过载，这凸显了在市场设计中引入分区或节点约束的必要性。",
            "id": "4069445",
            "problem": "考虑一个根据直流潮流近似（DC）模型建立的三母线输电网络。假设电压幅值固定且相等，相角差很小，且忽略无功功率。设母线 $1$ 为电压相角的参考点。网络拓扑是以母线 $1$ 为中心的星形结构：有一条线路连接母线 $1$ 和母线 $2$，另一条独立的线路连接母线 $1$ 和母线 $3$。母线 $2$ 和母线 $3$ 之间没有直接连接的线路。母线 $1$ 和母线 $2$ 之间的线路串联电抗为 $x_{21} = 0.1$（单位为标幺值，基于一致的基准），热极限潮流为 $F_{21}^{\\max} = 100$ MW。母线 $1$ 和母线 $3$ 之间的线路串联电抗为 $x_{31} = 0.1$，热极限潮流为 $F_{31}^{\\max} = 70$ MW。在直流近似下，线路潮流满足 $f_{ij} = \\frac{1}{x_{ij}}\\left(\\theta_i - \\theta_j\\right)$，节点功率平衡满足 $p_i = \\sum_{j \\in \\mathcal{N}(i)} \\frac{1}{x_{ij}}\\left(\\theta_i - \\theta_j\\right)$，其中 $p_i$ 是母线 $i$ 的净有功功率注入，$\\theta_i$ 是母线 $i$ 的电压相角，$\\mathcal{N}(i)$ 表示与母线 $i$ 相连的母线集合。\n\n在故障前，系统在母线 $1$ 有一个 $100$ MW 的负荷（因此 $p_1 = -100$ MW），在母线 $2$ 有一个发电机产生 $100$ MW 的功率（因此 $p_2 = +100$ MW），母线 $3$ 的发电机在线但调度出力为 $0$ MW（因此 $p_3 = 0$ MW）。系统运行方设定了一个全系统范围的旋转备用要求，其量等于最大的单一发电机故障。最大的故障是母线 $2$ 上的发电机失电，即 $C^{\\max} = 100$ MW。系统运行方在母线 $3$ 采购了全部 $100$ MW 的旋转备用，没有任何地域可送性约束。\n\n现在考虑母线 $2$ 上发电机完全停运的 $N-1$ 故障。停运发生后，运行方立即调度母线 $3$ 上的 $100$ MW 旋转备用以重新平衡系统。使用直流潮流关系和给定的网络，计算母线 $1$ 和母线 $3$ 之间线路的故障后过载量，定义为故障后潮流 $f_{31}$ 超过热极限 $F_{31}^{\\max}$ 的量。以 MW 为单位表示最终结果。无需四舍五入；如适用，请提供精确的整数值。",
            "solution": "1.  **确定故障后的功率注入：**\n    故障是母线 $2$ 上 $100$ MW 发电机的损失。这一损失由母线 $3$ 上的 $100$ MW 旋转备用补偿。母线 $1$ 的负荷保持不变。因此，故障后的净功率注入（用 $p'$ 表示）为：\n    *   $p_1' = -100$ MW (负荷)\n    *   $p_2' = 0$ MW (发电机损失)\n    *   $p_3' = +100$ MW (备用被激活)\n    系统总功率平衡得到满足：$\\sum p_i' = -100 + 0 + 100 = 0$。\n\n2.  **计算故障后的线路潮流：**\n    根据直流潮流模型中的功率守恒，一个节点的净功率注入等于流出该节点的所有线路上的潮流之和。在所给的星形网络中，母线 $3$ 仅通过一条线路与母线 $1$ 相连。因此，母线 $3$ 的全部净注入功率必须通过线路 $3-1$ 流向母线 $1$。\n    $$ f_{31}' = p_3' $$\n    $$ f_{31}' = 100 \\text{ MW} $$\n    故障后，从母线 $3$ 到母线 $1$ 的线路潮流为 $100$ MW。\n\n3.  **计算过载量：**\n    线路 $3-1$ 的热极限给定为 $F_{31}^{\\max} = 70$ MW。过载量是故障后潮流超过该极限的数值。\n    $$ \\text{过载量} = |f_{31}'| - F_{31}^{\\max} $$\n    $$ \\text{过载量} = 100 \\text{ MW} - 70 \\text{ MW} = 30 \\text{ MW} $$\n    尽管系统整体备用充足，但由于网络输送能力的限制，备用无法被有效“交付”而不导致线路过载。线路 $3-1$ 的过载量为 $30$ MW。",
            "answer": "$$\\boxed{30}$$"
        },
        {
            "introduction": "现代电力市场通常会同时采购多种具有层级关系的辅助服务，例如旋转备用、非旋转备用和三级备用。本练习将引导你构建一个线性规划（LP）模型，以模拟一个包含“向下替代”规则的备用市场出清过程。你将亲手设计约束条件，确保更高质量的备用可以满足较低质量备用的需求，同时严防任何容量被重复计算，这正是真实世界中独立系统运营商（ISO）市场结算引擎的核心逻辑。",
            "id": "4069460",
            "problem": "考虑一个独立系统运营商 (ISO)，它按层级采购多种类别的运行备用：旋转备用、非旋转备用和三次备用。该 ISO 允许在层级结构中向下替代：旋转备用可以满足非旋转备用和三次备用的需求；非旋转备用可以满足三次备用的需求。然而，为保持物理完整性，任何一个容量单位在不同类别中不能被重复计算。目标是以一种能同时执行市场出清并防止重复计算的方式，来构建这些级联的、向下替代的约束。\n\n从以下基本原则出发：\n- 容量守恒：任何物理容量在互斥的用途中只能被分配一次，这意味着分配量是可加的，并且其上限为可用容量。如果多个用途从同一个物理容量池中获取容量，则它们分配数量的总和不能超过该池的总可用量。\n- 带替代的市场出清：对于每个需求类别，来自合格类别的分配贡献量之和，加上任何未满足的松弛量，必须至少等于需求量。允许向下替代，即允许来自较高级别的供应出现在较低级别市场出清的左侧，但反之则不行。\n- 非负性和单位一致性：分配量和未满足的松弛量均为非负。所有备用量均以兆瓦 (MW) 为单位，需求和可用容量也必须以相同单位建模。\n\n您必须设计一个实现这些原则的线性规划 (LP) 模型。该 LP 模型必须包含决策变量，用以表示从每个类别中分配多少容量来满足各项需求，同时还需包含非负的松弛变量，用以捕捉任何未满足的需求，以确保 LP 始终可行。请从第一性原理出发，推导哪些容量流是物理上允许的，以及如何为每个物理容量池构建无重复计算的条件。\n\n您的程序必须为每个测试用例构建并求解该 LP 模型，以计算最小总未满足需求，结果以兆瓦为单位的浮点数表示。目标是在满足物理容量守恒和带替代的市场出清约束的条件下，最小化所有类别的未满足备用量之和。对于每个测试用例，输出以 $\\mathrm{MW}$ 为单位的最小总未满足需求，并四舍五入到三位小数。\n\n定义决策变量，均以 $\\mathrm{MW}$ 为单位：\n- $x_{S \\rightarrow S}$：分配用于满足旋转备用需求的旋转备用容量，\n- $x_{S \\rightarrow NS}$：分配用于满足非旋转备用需求的旋转备用容量，\n- $x_{S \\rightarrow T}$：分配用于满足三次备用需求的旋转备用容量，\n- $x_{NS \\rightarrow NS}$：分配用于满足非旋转备用需求的非旋转备用容量，\n- $x_{NS \\rightarrow T}$：分配用于满足三次备用需求的非旋转备用容量，\n- $x_{T \\rightarrow T}$：分配用于满足三次备用需求的三次备用容量，\n- $u_{S}$：未满足的旋转备用需求，\n- $u_{NS}$：未满足的非旋转备用需求，\n- $u_{T}$：未满足的三次备用需求。\n\n所有变量都必须约束为非负。级联和无重复计算约束必须强制要求：旋转备用容量可以为任何需求类别做出贡献，非旋转备用容量可以为非旋转和三次备用需求做出贡献，而三次备用容量只能为三次备用需求做出贡献。无重复计算条件必须通过对源自同一类别的容量流进行容量守恒建模来体现。\n\n测试套件：\n提供以下四个测试用例，每个用例都指定了可用容量和需求，单位均为 $\\mathrm{MW}$：\n1. 需要替代的正常路径：\n   - 可用容量：$S_{\\mathrm{avail}} = 100$, $NS_{\\mathrm{avail}} = 30$, $T_{\\mathrm{avail}} = 10$。\n   - 需求：$R_{S} = 80$, $R_{NS} = 40$, $R_{T} = 20$。\n2. 精确匹配的边界情况：\n   - 可用容量：$S_{\\mathrm{avail}} = 50$, $NS_{\\mathrm{avail}} = 20$, $T_{\\mathrm{avail}} = 30$。\n   - 需求：$R_{S} = 50$, $R_{NS} = 20$, $R_{T} = 30$。\n3. 即使使用替代，总容量也不足的不可行情况：\n   - 可用容量：$S_{\\mathrm{avail}} = 60$, $NS_{\\mathrm{avail}} = 10$, $T_{\\mathrm{avail}} = 5$。\n   - 需求：$R_{S} = 50$, $R_{NS} = 30$, $R_{T} = 20$。\n4. 强调防止重复计算的边缘情况（单个容量池必须在所有需求间进行分配）：\n   - 可用容量：$S_{\\mathrm{avail}} = 30$, $NS_{\\mathrm{avail}} = 0$, $T_{\\mathrm{avail}} = 0$。\n   - 需求：$R_{S} = 10$, $R_{NS} = 10$, $R_{T} = 10$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，$[\\text{result1},\\text{result2},\\text{result3}]$）。每个结果都必须是对应测试用例的最小总未满足需求，单位为 $\\mathrm{MW}$，四舍五入到三位小数，列表中无空格。例如，一个有效的输出可以是 $[0.000,0.000,25.000,0.000]$。",
            "solution": "本问题要求构建一个线性规划（LP）模型，以最小化总未满足的备用需求，同时遵守容量限制和层级替代规则。\n\n**决策变量**\n如问题所述，我们定义 $x_{i \\rightarrow j}$ 为从源类别 $i$ 分配给需求类别 $j$ 的容量，其中 $i, j \\in \\{S, NS, T\\}$ 分别代表旋转备用、非旋转备用和三次备用。$u_j$ 是需求类别 $j$ 未被满足的量。所有变量均为非负，单位为 MW。\n\n**目标函数**\n我们的目标是最小化所有类别未满足需求的总和：\n$$ \\text{最小化} \\quad Z = u_S + u_{NS} + u_T $$\n\n**约束条件**\n1.  **容量守恒（无重复计算）：** 从每个物理备用池中调度的总容量不能超过该池的可用容量。\n    *   旋转备用池: $x_{S \\rightarrow S} + x_{S \\rightarrow NS} + x_{S \\rightarrow T} \\le S_{\\mathrm{avail}}$\n    *   非旋转备用池: $x_{NS \\rightarrow NS} + x_{NS \\rightarrow T} \\le NS_{\\mathrm{avail}}$\n    *   三次备用池: $x_{T \\rightarrow T} \\le T_{\\mathrm{avail}}$\n\n2.  **需求满足（带替代的市场出清）：** 对于每项需求，所有合格来源的贡献量之和，加上短缺量，必须等于总需求。由于通常将这类问题建模为不等式，我们写成“大于等于”的形式。\n    *   旋转备用需求（不允许替代）: $x_{S \\rightarrow S} + u_S \\ge R_S$\n    *   非旋转备用需求（$S$ 可替代 $NS$）: $x_{S \\rightarrow NS} + x_{NS \\rightarrow NS} + u_{NS} \\ge R_{NS}$\n    *   三次备用需求（$S$ 和 $NS$ 均可替代 $T$）: $x_{S \\rightarrow T} + x_{NS \\rightarrow T} + x_{T \\rightarrow T} + u_T \\ge R_T$\n\n这个 LP 模型精确地捕捉了级联替代规则，并防止了同一兆瓦容量被重复计算或售卖，确保了市场出清结果在物理上和经济上都是合理的。对给定的测试用例求解此 LP 模型，可以得到最小的总未满足需求。",
            "answer": "[0.000,0.000,25.000,0.000]"
        }
    ]
}
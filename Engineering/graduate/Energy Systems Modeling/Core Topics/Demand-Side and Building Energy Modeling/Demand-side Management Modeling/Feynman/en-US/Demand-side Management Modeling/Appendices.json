{
    "hands_on_practices": [
        {
            "introduction": "Understanding the economic foundation of demand-side management begins with quantifying the value of load shifting. This practice problem invites you to derive the cost savings generated by moving energy consumption from a peak period to an off-peak period, under a simplified but fundamental model of the electricity supply stack . By engaging with this exercise, you will develop a core intuition for how the non-linear nature of generation costs creates opportunities for demand flexibility to reduce overall system expenses.",
            "id": "4083927",
            "problem": "Consider a stylized two-period energy system operated by a single representative supply stack with a convex marginal cost function $MC(g)=\\alpha+\\beta g$, where $\\beta>0$ and $\\alpha\\geq 0$. Let the baseline net load in the high-cost period be $d_{h}>0$ and in the low-cost period be $d_{\\ell}\\geq 0$, with $d_{h}>d_{\\ell}$ so that $MC(d_{h})>MC(d_{\\ell})$. A Demand-Side Management (DSM) intervention shifts $0<\\Delta\\leq d_{h}$ units of delivered energy from the high-cost period to the low-cost period, with no losses, no rebound, and no change in total energy consumption across the two periods. The total variable production cost function is $C(g)=\\alpha g+\\frac{1}{2}\\beta g^{2}$, and the system’s total cost over the two periods is the sum of per-period costs evaluated at the respective period loads.\n\nStarting from the definition of marginal cost as the derivative of total cost, the convexity of $C(\\cdot)$ implied by $\\beta>0$, and additivity of costs across independent periods, derive the exact closed-form expression for the system production cost savings due to the DSM shift, defined as the baseline total cost minus the post-shift total cost. Express the final savings in dollars. No rounding is required.",
            "solution": "The problem is subjected to validation before a solution is attempted.\n\n### Step 1: Extract Givens\n-   Marginal cost function of the supply stack: $MC(g)=\\alpha+\\beta g$\n-   Parameters for the marginal cost function: $\\beta>0$ and $\\alpha\\geq 0$\n-   Baseline net load in the high-cost period: $d_h > 0$\n-   Baseline net load in the low-cost period: $d_\\ell \\geq 0$\n-   Relationship between baseline loads: $d_h > d_\\ell$\n-   Demand-Side Management (DSM) energy shift: $\\Delta$ units, with $0 < \\Delta \\leq d_h$\n-   DSM characteristics: No losses, no rebound, no change in total energy consumption.\n-   Total variable production cost function: $C(g)=\\alpha g+\\frac{1}{2}\\beta g^{2}$\n-   System total cost definition: Sum of per-period costs.\n-   Objective: Derive the closed-form expression for system production cost savings, defined as the baseline total cost minus the post-shift total cost.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is evaluated against the established criteria.\n\n-   **Scientifically Grounded:** The problem is based on fundamental principles of microeconomics and energy systems engineering. The use of a linear marginal cost function ($MC$) corresponding to a quadratic total cost function ($C$) is a standard and valid model for a simplified electricity generation stack. The condition $\\beta > 0$ ensures the cost function is convex ($C''(g) = \\beta > 0$), which correctly models the economic principle of dispatching cheaper generation units first, leading to increasing marginal costs. The relationship between the total cost and marginal cost is consistent, as the derivative of the given total cost function $C(g)$ with respect to generation $g$ is $\\frac{d}{dg}(\\alpha g + \\frac{1}{2}\\beta g^{2}) = \\alpha + \\beta g$, which is the given marginal cost function $MC(g)$.\n-   **Well-Posed:** The problem is well-posed. All necessary functions, parameters, and constraints are explicitly defined. The objective is clear and unambiguous, asking for a specific analytical derivation. The given information is sufficient to derive a unique solution.\n-   **Objective:** The problem is stated in precise, objective, and mathematical language, free of any subjective or opinion-based content.\n-   **Completeness and Consistency:** The problem is self-contained. The provided data and definitions are complete and internally consistent. For example, the constraint $\\Delta \\leq d_h$ ensures the post-shift load in the high-cost period, $d_h - \\Delta$, is non-negative. The \"no change in total energy\" condition is also well-defined.\n-   **Realism:** The model is \"stylized,\" as stated, but its components are based on realistic principles. The assumptions of no losses or rebound effects are common simplifications in introductory models to isolate the primary economic effect of load shifting.\n-   **Structure:** The problem is logically structured and requires a straightforward derivation based on the provided definitions. It is not ill-posed, trivial, or circular.\n\n### Step 3: Verdict and Action\nThe problem is valid as it is mathematically consistent, scientifically grounded, and well-posed. A solution will be derived.\n\nThe total cost of the system is the sum of the costs in the two periods. The cost in each period is determined by the total variable production cost function $C(g)=\\alpha g+\\frac{1}{2}\\beta g^{2}$.\n\nFirst, we define the total system cost in the baseline scenario, denoted as $C_{total}^{base}$. In this scenario, the generation in the high-cost and low-cost periods is equal to the respective net loads, $d_h$ and $d_\\ell$.\n$$C_{total}^{base} = C(d_h) + C(d_\\ell)$$\nSubstituting the expression for $C(g)$, we have:\n$$C_{total}^{base} = \\left(\\alpha d_h + \\frac{1}{2}\\beta d_h^2\\right) + \\left(\\alpha d_\\ell + \\frac{1}{2}\\beta d_\\ell^2\\right)$$\n\nNext, we define the total system cost after the DSM intervention, denoted as $C_{total}^{post}$. The intervention shifts $\\Delta$ units of energy from the high-cost period to the low-cost period.\nThe new generation level in the high-cost period is $g_h^{post} = d_h - \\Delta$.\nThe new generation level in the low-cost period is $g_\\ell^{post} = d_\\ell + \\Delta$.\nThe total cost in the post-shift scenario is:\n$$C_{total}^{post} = C(g_h^{post}) + C(g_\\ell^{post}) = C(d_h - \\Delta) + C(d_\\ell + \\Delta)$$\nSubstituting the expression for $C(g)$:\n$$C_{total}^{post} = \\left[\\alpha(d_h - \\Delta) + \\frac{1}{2}\\beta(d_h - \\Delta)^2\\right] + \\left[\\alpha(d_\\ell + \\Delta) + \\frac{1}{2}\\beta(d_\\ell + \\Delta)^2\\right]$$\n\nThe system production cost savings, which we denote as $S$, are defined as the baseline total cost minus the post-shift total cost.\n$$S = C_{total}^{base} - C_{total}^{post}$$\nSubstituting the detailed expressions for the costs:\n$$S = \\left[ \\left(\\alpha d_h + \\frac{1}{2}\\beta d_h^2\\right) + \\left(\\alpha d_\\ell + \\frac{1}{2}\\beta d_\\ell^2\\right) \\right] - \\left[ \\left(\\alpha(d_h - \\Delta) + \\frac{1}{2}\\beta(d_h - \\Delta)^2\\right) + \\left(\\alpha(d_\\ell + \\Delta) + \\frac{1}{2}\\beta(d_\\ell + \\Delta)^2\\right) \\right]$$\n\nWe now simplify this expression by grouping terms with $\\alpha$ and terms with $\\beta$.\nThe terms containing $\\alpha$ are:\n$$(\\alpha d_h + \\alpha d_\\ell) - (\\alpha(d_h - \\Delta) + \\alpha(d_\\ell + \\Delta))$$\n$$= \\alpha d_h + \\alpha d_\\ell - (\\alpha d_h - \\alpha\\Delta + \\alpha d_\\ell + \\alpha\\Delta)$$\n$$= \\alpha d_h + \\alpha d_\\ell - (\\alpha d_h + \\alpha d_\\ell) = 0$$\nAs expected, the terms linear in generation cancel out because total generation across the two periods, $(d_h - \\Delta) + (d_\\ell + \\Delta) = d_h + d_\\ell$, is conserved.\n\nThe remaining terms containing $\\beta$ determine the savings:\n$$S = \\left(\\frac{1}{2}\\beta d_h^2 + \\frac{1}{2}\\beta d_\\ell^2\\right) - \\left(\\frac{1}{2}\\beta(d_h - \\Delta)^2 + \\frac{1}{2}\\beta(d_\\ell + \\Delta)^2\\right)$$\nFactoring out $\\frac{1}{2}\\beta$:\n$$S = \\frac{1}{2}\\beta \\left[ (d_h^2 + d_\\ell^2) - \\left((d_h - \\Delta)^2 + (d_\\ell + \\Delta)^2\\right) \\right]$$\nExpand the squared terms:\n$$(d_h - \\Delta)^2 = d_h^2 - 2d_h\\Delta + \\Delta^2$$\n$$(d_\\ell + \\Delta)^2 = d_\\ell^2 + 2d_\\ell\\Delta + \\Delta^2$$\nSubstitute these expansions back into the expression for $S$:\n$$S = \\frac{1}{2}\\beta \\left[ (d_h^2 + d_\\ell^2) - (d_h^2 - 2d_h\\Delta + \\Delta^2 + d_\\ell^2 + 2d_\\ell\\Delta + \\Delta^2) \\right]$$\nSimplify the expression inside the brackets:\n$$S = \\frac{1}{2}\\beta \\left[ d_h^2 + d_\\ell^2 - d_h^2 + 2d_h\\Delta - \\Delta^2 - d_\\ell^2 - 2d_\\ell\\Delta - \\Delta^2 \\right]$$\nThe terms $d_h^2$ and $d_\\ell^2$ cancel out.\n$$S = \\frac{1}{2}\\beta \\left[ 2d_h\\Delta - 2d_\\ell\\Delta - 2\\Delta^2 \\right]$$\nFactor out $2\\Delta$ from the bracketed term:\n$$S = \\frac{1}{2}\\beta \\cdot 2\\Delta \\left[ (d_h - d_\\ell) - \\Delta \\right]$$\nThis simplifies to the final closed-form expression for the cost savings:\n$$S = \\beta \\Delta (d_h - d_\\ell - \\Delta)$$\nThis expression represents the total production cost savings in dollars, resulting from the DSM-induced shift of $\\Delta$ units of energy consumption. The savings are positive if the amount shifted, $\\Delta$, is less than the initial difference in loads, $d_h - d_\\ell$. The convexity of the cost function, ensured by $\\beta > 0$, is the fundamental driver of these savings.",
            "answer": "$$\n\\boxed{\\beta \\Delta (d_h - d_\\ell - \\Delta)}\n$$"
        },
        {
            "introduction": "Building on the principle of cost savings, this exercise moves into the practical realm of discrete load scheduling. You are tasked with finding the optimal operating schedule for two appliances to minimize electricity bills, given time-varying prices and a physical constraint on simultaneous operation . This problem introduces the core logic of combinatorial optimization in DSM, a skill essential for designing and implementing automated demand response programs for residential and commercial buildings.",
            "id": "4083945",
            "problem": "A utility is designing a Demand-Side Management (DSM) program over a $6$-hour horizon with hourly time steps indexed by $t \\in \\{1,2,3,4,5,6\\}$. Two customer appliances, indexed by $a \\in \\{1,2\\}$, are shiftable and each requires exactly $2$ consecutive hours of operation at a constant power of $1$ kilowatt ($1\\ \\mathrm{kW}$). The system enforces a capacity constraint such that at most $1\\ \\mathrm{kW}$ runs simultaneously. The time-varying energy prices are given by the hourly vector $(p_1,p_2,p_3,p_4,p_5,p_6)=(30,100,80,40,20,60)$ in $\\$/\\mathrm{MWh}$. Assume a fixed time step length of $1$ hour, so the energy consumed in any active hour by one appliance is $1$ kilowatt-hour ($1\\ \\mathrm{kWh}$), which is equal to $10^{-3}\\ \\mathrm{MWh}$.\n\nModel the scheduling as a mixed-integer decision problem using binary variables $x_{a,t} \\in \\{0,1\\}$ indicating whether appliance $a$ is on in hour $t$, subject to:\n- Each appliance runs exactly $2$ consecutive hours.\n- The simultaneous operation constraint $\\sum_{a=1}^{2} x_{a,t} \\leq 1$ for all $t$.\n\nThe total cost is the sum of hourly costs, where the hour-$t$ cost equals $p_t$ multiplied by the hour’s energy in $\\mathrm{MWh}$.\n\nFrom first principles of load scheduling and the above constraints, derive the structure of the optimal solution and determine the minimal total cost in dollars under the optimal schedule. Express the final minimal total cost in dollars and round your answer to four significant figures. Use dollars as the unit for the cost (do not include units in the final boxed answer).",
            "solution": "The problem asks for the minimal total cost to operate two appliances under a specific set of constraints. This is a classic load scheduling optimization problem. We will determine the solution from first principles by analyzing the structure of feasible schedules and their associated costs.\n\nFirst, we formalize the problem based on the provided information.\nThe time horizon consists of $6$ discrete hourly steps, $t \\in \\{1, 2, 3, 4, 5, 6\\}$.\nThere are two appliances, $a \\in \\{1, 2\\}$. Each must run for exactly $2$ consecutive hours.\nThe power consumption of an active appliance is $P = 1 \\text{ kW}$.\nThe time step duration is $\\Delta t = 1 \\text{ h}$.\nThe energy consumed by one appliance in one active hour is $E_{hour} = P \\times \\Delta t = 1 \\text{ kW} \\times 1 \\text{ h} = 1 \\text{ kWh}$.\nThe prices $p_t$ are given in units of $/MWh$. We must convert the energy to MWh: $E_{hour} = 1 \\text{ kWh} = 10^{-3} \\text{ MWh}$.\nThe hourly prices are given by the vector $(p_1, p_2, p_3, p_4, p_5, p_6) = (30, 100, 80, 40, 20, 60)$ in $/MWh.\n\nThe core of the problem is to determine the optimal start times for the two appliances. Let $s_a$ be the start time for a $2$-hour operation of appliance $a$. The possible start times for a $2$-hour task within a $6$-hour horizon are $s_a \\in \\{1, 2, 3, 4, 5\\}$. If an appliance starts at time $s$, it operates during hours $s$ and $s+1$.\n\nThe cost of running one appliance starting at time $s$ is the sum of the energy costs for hours $s$ and $s+1$. Since both appliances have the same power rating, this cost depends only on the start time $s$. Let's denote this cost as $C(s)$:\n$$C(s) = (p_s \\cdot E_{hour}) + (p_{s+1} \\cdot E_{hour}) = (p_s + p_{s+1}) \\times 10^{-3} \\text{ dollars}$$\n\nLet's calculate the cost for each possible $2$-hour operational block:\nFor a start time $s=1$ (operation in hours $1, 2$):\n$C(1) = (p_1 + p_2) \\times 10^{-3} = (30 + 100) \\times 10^{-3} = 130 \\times 10^{-3}$ dollars.\nFor a start time $s=2$ (operation in hours $2, 3$):\n$C(2) = (p_2 + p_3) \\times 10^{-3} = (100 + 80) \\times 10^{-3} = 180 \\times 10^{-3}$ dollars.\nFor a start time $s=3$ (operation in hours $3, 4$):\n$C(3) = (p_3 + p_4) \\times 10^{-3} = (80 + 40) \\times 10^{-3} = 120 \\times 10^{-3}$ dollars.\nFor a start time $s=4$ (operation in hours $4, 5$):\n$C(4) = (p_4 + p_5) \\times 10^{-3} = (40 + 20) \\times 10^{-3} = 60 \\times 10^{-3}$ dollars.\nFor a start time $s=5$ (operation in hours $5, 6$):\n$C(5) = (p_5 + p_6) \\times 10^{-3} = (20 + 60) \\times 10^{-3} = 80 \\times 10^{-3}$ dollars.\n\nThe system has a capacity constraint that at most $1 \\text{ kW}$ can run simultaneously. This means that the two appliances cannot operate during the same hour. If appliance $1$ starts at $s_1$ and appliance $2$ starts at $s_2$, their operational intervals are $[s_1, s_1+1]$ and $[s_2, s_2+1]$. For these intervals to be disjoint, the start times must be sufficiently separated. An overlap occurs if $s_1 = s_2$, or if one appliance starts one hour after the other (e.g., $s_2 = s_1+1$). Therefore, the start times must be separated by at least $2$ hours, which is expressed mathematically as $|s_1 - s_2| \\geq 2$.\n\nThe problem is now reduced to selecting two distinct start times $s_a$ and $s_b$ from the set $\\{1, 2, 3, 4, 5\\}$ such that $|s_a - s_b| \\geq 2$, and the total cost $C(s_a) + C(s_b)$ is minimized. We can find the minimum cost by systematically enumerating all valid pairs of start times. Let's assume $s_a < s_b$ without loss of generality.\n\nThe valid pairs $(s_a, s_b)$ satisfying $s_b - s_a \\geq 2$ and their corresponding total costs are:\n\\begin{enumerate}\n    \\item Pair $(1, 3)$: Appliances start at $t=1$ and $t=3$. The schedules are disjoint.\n    Total Cost = $C(1) + C(3) = (130 + 120) \\times 10^{-3} = 250 \\times 10^{-3} = 0.250$ dollars.\n    \\item Pair $(1, 4)$: Appliances start at $t=1$ and $t=4$. The schedules are disjoint.\n    Total Cost = $C(1) + C(4) = (130 + 60) \\times 10^{-3} = 190 \\times 10^{-3} = 0.190$ dollars.\n    \\item Pair $(1, 5)$: Appliances start at $t=1$ and $t=5$. The schedules are disjoint.\n    Total Cost = $C(1) + C(5) = (130 + 80) \\times 10^{-3} = 210 \\times 10^{-3} = 0.210$ dollars.\n    \\item Pair $(2, 4)$: Appliances start at $t=2$ and $t=4$. The schedules are disjoint.\n    Total Cost = $C(2) + C(4) = (180 + 60) \\times 10^{-3} = 240 \\times 10^{-3} = 0.240$ dollars.\n    \\item Pair $(2, 5)$: Appliances start at $t=2$ and $t=5$. The schedules are disjoint.\n    Total Cost = $C(2) + C(5) = (180 + 80) \\times 10^{-3} = 260 \\times 10^{-3} = 0.260$ dollars.\n    \\item Pair $(3, 5)$: Appliances start at $t=3$ and $t=5$. The schedules are disjoint.\n    Total Cost = $C(3) + C(5) = (120 + 80) \\times 10^{-3} = 200 \\times 10^{-3} = 0.200$ dollars.\n\\end{enumerate}\n\nComparing the total costs calculated for each valid pair, the minimum value is $0.190$ dollars. This cost corresponds to the schedule where one appliance starts at $t=1$ (running in hours $1$ and $2$) and the other starts at $t=4$ (running in hours $4$ and $5$).\n\nThe total energy consumed in this optimal schedule is over hours $1, 2, 4,$ and $5$. The total cost is:\nCost = $(p_1 + p_2 + p_4 + p_5) \\times 10^{-3} = (30 + 100 + 40 + 20) \\times 10^{-3} = 190 \\times 10^{-3} = 0.190$ dollars.\n\nThe problem requires the final answer to be rounded to four significant figures. The calculated minimal cost is $0.190$. To express this value with four significant figures, we write it as $0.1900$.",
            "answer": "$$\\boxed{0.1900}$$"
        },
        {
            "introduction": "The most sophisticated demand-side management models balance economic incentives with user-centric factors like comfort or operational integrity. This advanced practice problem challenges you to model a continuously flexible load by formulating and solving a convex quadratic program that includes a penalty for deviating from a preferred consumption profile, alongside physical ramping constraints . Deriving the solution via Karush-Kuhn-Tucker (KKT) conditions will strengthen your grasp of constrained optimization, a critical tool for modeling complex flexible resources.",
            "id": "4083925",
            "problem": "Consider a simple demand-side management model for a single flexible end-use over two decision periods with consumption variables $x_1$ and $x_2$, each measured in kilowatt-hours (kWh). The end-use faces a price vector $(p_1,p_2)$ where each $p_t$ is measured in currency per kilowatt-hour ($\\$/\\mathrm{kWh}$). The customer has a preferred consumption profile $(x_1^{\\text{pref}},x_2^{\\text{pref}})$ measured in kilowatt-hours (kWh). Deviations from this preferred profile incur a discomfort cost modeled as a quadratic penalty with weight $\\alpha$ measured in currency per square kilowatt-hour ($\\$/\\mathrm{kWh}^2$). Intertemporal flexibility is limited by a ramping constraint $|x_{t+1}-x_t|\\le r$, with $r$ measured in kilowatt-hours (kWh).\n\nFrom fundamental principles of consumer choice under cost minimization, we model the decision problem as minimizing total generalized cost comprised of energy bills plus discomfort, subject to physical flexibility constraints. Formally, the optimization problem is\n$$\n\\min_{x_1,x_2}\\ \\sum_{t=1}^{2} \\left( p_t x_t + \\alpha \\left(x_t - x_t^{\\text{pref}}\\right)^2 \\right)\n$$\nsubject to\n$$\n|x_2 - x_1| \\le r.\n$$\nAssume $\\alpha > 0$ so that the objective is strictly convex and the feasible set is convex, ensuring a unique minimizer.\n\nYour tasks are:\n- Derive, from first principles and the Karush–Kuhn–Tucker (KKT) conditions, a closed-form algorithm to compute the unique optimal solution $(x_1^\\star,x_2^\\star)$ in kWh for any given parameters $(\\alpha,r,p_1,p_2,x_1^{\\text{pref}},x_2^{\\text{pref}})$.\n- Implement this algorithm as a complete, runnable program that evaluates the solution for the following test suite. Report each $(x_1^\\star,x_2^\\star)$ in kWh.\n\nUse the following five scientifically consistent test cases (all quantities are in their stated base units):\n1. $\\alpha=0.10$, $r=1.5$, $p_1=0.20$, $p_2=0.12$, $x_1^{\\text{pref}}=5.0$, $x_2^{\\text{pref}}=5.5$.\n2. $\\alpha=0.08$, $r=0.5$, $p_1=0.10$, $p_2=0.05$, $x_1^{\\text{pref}}=2.0$, $x_2^{\\text{pref}}=4.0$.\n3. $\\alpha=0.05$, $r=1.0$, $p_1=0.15$, $p_2=0.25$, $x_1^{\\text{pref}}=6.0$, $x_2^{\\text{pref}}=3.0$.\n4. $\\alpha=0.10$, $r=2.0$, $p_1=0.20$, $p_2=0.20$, $x_1^{\\text{pref}}=5.0$, $x_2^{\\text{pref}}=7.0$.\n5. $\\alpha=0.04$, $r=2.0$, $p_1=0.10$, $p_2=-0.05$, $x_1^{\\text{pref}}=3.0$, $x_2^{\\text{pref}}=3.0$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each test case result is itself a two-element list $[x_1^\\star,x_2^\\star]$ in kWh. For example, the format should be like $[[a,b],[c,d],\\ldots]$, with all entries given as real numbers in kWh.",
            "solution": "This problem requires deriving and implementing a closed-form solution to a quadratic programming problem. The solution is found by analyzing the Karush-Kuhn-Tucker (KKT) conditions.\n\nThe objective function to minimize is $f(x_1, x_2) = \\sum_{t=1}^{2} \\left( p_t x_t + \\alpha (x_t - x_t^{\\text{pref}})^2 \\right)$.\nThe constraints are $x_2 - x_1 \\le r$ and $x_1 - x_2 \\le r$.\n\n**Step 1: Find the unconstrained solution**\nFirst, we find the solution that minimizes the objective function without considering the ramping constraints. This is found by setting the partial derivatives of $f(x_1, x_2)$ with respect to $x_1$ and $x_2$ to zero.\n$\\frac{\\partial f}{\\partial x_1} = p_1 + 2\\alpha(x_1 - x_1^{\\text{pref}}) = 0 \\implies x_1 = x_1^{\\text{pref}} - \\frac{p_1}{2\\alpha}$\n$\\frac{\\partial f}{\\partial x_2} = p_2 + 2\\alpha(x_2 - x_2^{\\text{pref}}) = 0 \\implies x_2 = x_2^{\\text{pref}} - \\frac{p_2}{2\\alpha}$\nLet's call this unconstrained solution $(\\hat{x}_1, \\hat{x}_2)$.\n\n**Step 2: Check feasibility and apply KKT logic**\nThe KKT conditions link the optimality of a solution to the state of the constraints. We have three possible cases:\n\n**Case A: The unconstrained solution is feasible.**\nIf the unconstrained solution satisfies the ramping constraint, i.e., $|\\hat{x}_2 - \\hat{x}_1| \\le r$, then it is the optimal solution. In this scenario, the Lagrange multipliers for the ramping constraints are zero, and all KKT conditions are met.\nSo, if $-r \\le \\hat{x}_2 - \\hat{x}_1 \\le r$, then $(x_1^\\star, x_2^\\star) = (\\hat{x}_1, \\hat{x}_2)$.\n\n**Case B: The upper ramping constraint is active.**\nIf the unconstrained solution violates the upper bound, i.e., $\\hat{x}_2 - \\hat{x}_1 > r$, the optimal solution must lie on the boundary where $x_2 - x_1 = r$. The KKT conditions imply that the optimal point $(x_1^\\star, x_2^\\star)$ is the projection of the unconstrained solution $(\\hat{x}_1, \\hat{x}_2)$ onto this boundary. The solution is the average of the unconstrained values, adjusted to meet the boundary condition. This yields:\n$x_1^\\star = \\frac{\\hat{x}_1 + \\hat{x}_2 - r}{2}$\n$x_2^\\star = \\frac{\\hat{x}_1 + \\hat{x}_2 + r}{2}$\nThis solution satisfies $x_2^\\star - x_1^\\star = r$.\n\n**Case C: The lower ramping constraint is active.**\nIf the unconstrained solution violates the lower bound, i.e., $\\hat{x}_2 - \\hat{x}_1 < -r$, the optimal solution must lie on the boundary where $x_1 - x_2 = r$. A similar projection logic applies:\n$x_1^\\star = \\frac{\\hat{x}_1 + \\hat{x}_2 + r}{2}$\n$x_2^\\star = \\frac{\\hat{x}_1 + \\hat{x}_2 - r}{2}$\nThis solution satisfies $x_1^\\star - x_2^\\star = r$.\n\n**Summary of the Algorithm:**\n1.  Calculate the unconstrained minimizers $\\hat{x}_1 = x_1^{\\text{pref}} - \\frac{p_1}{2\\alpha}$ and $\\hat{x}_2 = x_2^{\\text{pref}} - \\frac{p_2}{2\\alpha}$.\n2.  Compute the difference $\\Delta\\hat{x} = \\hat{x}_2 - \\hat{x}_1$.\n3.  If $\\Delta\\hat{x} > r$, apply the formula from Case B.\n4.  If $\\Delta\\hat{x}  -r$, apply the formula from Case C.\n5.  Otherwise, the optimal solution is $(\\hat{x}_1, \\hat{x}_2)$ from Case A.\n\n**Implementation and Evaluation:**\nThis algorithm is implemented and run against the five test cases provided in the problem description. The results for each case are computed and formatted into the required output string.\n1.  Case 1: $(\\hat{x}_1, \\hat{x}_2) = (4.0, 4.9)$. $\\Delta\\hat{x} = 0.9 \\le r=1.5$. Unconstrained case. Solution: $[4.0, 4.9]$.\n2.  Case 2: $(\\hat{x}_1, \\hat{x}_2) = (1.375, 3.6875)$. $\\Delta\\hat{x} = 2.3125  r=0.5$. Upper ramp active. Solution: $[2.28125, 2.78125]$.\n3.  Case 3: $(\\hat{x}_1, \\hat{x}_2) = (4.5, 0.5)$. $\\Delta\\hat{x} = -4.0  r=-1.0$. Lower ramp active. Solution: $[3.0, 2.0]$.\n4.  Case 4: $(\\hat{x}_1, \\hat{x}_2) = (4.0, 6.0)$. $\\Delta\\hat{x} = 2.0 \\le r=2.0$. Unconstrained case (on boundary). Solution: $[4.0, 6.0]$.\n5.  Case 5: $(\\hat{x}_1, \\hat{x}_2) = (1.75, 3.625)$. $\\Delta\\hat{x} = 1.875 \\le r=2.0$. Unconstrained case. Solution: $[1.75, 3.625]$.",
            "answer": "[[4.0, 4.9], [2.28125, 2.78125], [3.0, 2.0], [4.0, 6.0], [1.75, 3.625]]"
        }
    ]
}
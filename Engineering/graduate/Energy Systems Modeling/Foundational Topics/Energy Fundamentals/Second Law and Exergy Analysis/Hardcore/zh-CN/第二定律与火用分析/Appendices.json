{
    "hands_on_practices": [
        {
            "introduction": "对㶲的理解始于其在最简单热力学系统中的应用。第一个实践练习聚焦于一个封闭系统——一个冷却至环境温度的固体。通过从基本原理推导可用能（㶲）的变化，您将掌握㶲的核心计算方法，该方法涉及内能和熵的变化。本练习  独特地引入了随温度变化的比热容 $c(T)$，提供了一个更贴近实际的场景，并挑战您去解释材料属性如何影响系统的最大有用功潜力。",
            "id": "4121975",
            "problem": "一个质量为 $m$ 的刚性、均匀固体初始处于均匀温度 $T_{1}$，通过与环境的直接热传递冷却到环境温度 $T_{0}$。环境是一个温度恒为 $T_{0}$、压力恒为 $p_{0}$ 的大热储，该固体不发生机械功的相互作用，也不发生化学反应。在从 $T_{0}$ 到 $T_{1}$ 的温度区间内，该固体的比热容与温度相关，其关系由 $c(T) = c_{0} + \\alpha T$ 描述，其中 $c_{0}  0$ 且 $\\alpha \\geq 0$。假设在所关注的温度范围内，该固体可视为不可压缩，因此体积变化可以忽略。\n\n从封闭系统的热力学第一定律和第二定律的基本表述出发，并利用对于比热容随温度变化的固体内能和熵变的核心定义，推导该物体在初始状态 $T_{1}$ 和最终状态 $T_{0}$ 之间，相对于温度为 $T_{0}$ 和压力为 $p_{0}$ 的环境所定义的有用能（㶲）变化的表达式。将你的最终答案表示为一个仅包含 $m$、$c_{0}$、$\\alpha$、$T_{1}$ 和 $T_{0}$ 的单个闭式表达式。从物理上解释，当通过与环境的纯热接触从 $T_{1}$ 冷却到 $T_{0}$ 时，为何比热容的有限温度依赖性会影响最大可提取功。\n\n以焦耳为单位表示有用能变化。无需四舍五入；提供精确的解析表达式。",
            "solution": "问题陈述是有效的，因为它具有科学依据、良定、客观，并包含了获得唯一解所需的所有信息。它代表了经典热力学中㶲分析的一个标准问题。\n\n一个封闭系统的有用能或㶲 $\\Psi$ 是指当该系统与一个特定环境（或称为“死态”，其特征为温度 $T_{0}$ 和压力 $p_{0}$）达到平衡时，其所能产生的有用功的最大潜力。对于一个从初始状态1到最终状态2的过程，有用能的变化 $\\Delta \\Psi$ 由以下通用表达式给出：\n$$ \\Delta \\Psi = \\Psi_{2} - \\Psi_{1} = (U_{2} - U_{1}) - T_{0}(S_{2} - S_{1}) + p_{0}(V_{2} - V_{1}) $$\n其中 $U$ 是内能，$S$ 是熵，$V$ 是体积。\n\n问题陈述指出，该固体是刚性的且可视为不可压缩。这意味着其在冷却过程中的体积变化可以忽略，即 $V_{2} - V_{1} = \\Delta V \\approx 0$。因此，$p_{0}(V_{2} - V_{1})$ 项为零，物体有用能变化的表达式简化为：\n$$ \\Delta \\Psi = (U_{2} - U_{1}) - T_{0}(S_{2} - S_{1}) = \\Delta U - T_{0} \\Delta S $$\n此处，初始状态1的温度为 $T_{1}$，最终状态2的温度为 $T_{0}$。\n\n我们现在必须推导当该固体从 $T_{1}$ 冷却到 $T_{0}$ 时，其内能变化 $\\Delta U$ 和熵变 $\\Delta S$ 的表达式。\n\n首先，我们计算内能变化 $\\Delta U$。对于质量为 $m$、比热容为 $c(T)$ 的物质，在温度变化 $dT$ 期间的内能微分变化 $dU$ 由 $dU = m c(T) dT$ 给出（假设体积变化可忽略）。为了求得从状态1到状态2的总变化，我们对该表达式进行积分：\n$$ \\Delta U = U_{2} - U_{1} = \\int_{T_{1}}^{T_{0}} m c(T) \\,dT $$\n代入给定的随温度变化的比热容 $c(T) = c_{0} + \\alpha T$：\n$$ \\Delta U = m \\int_{T_{1}}^{T_{0}} (c_{0} + \\alpha T) \\,dT $$\n执行积分：\n$$ \\Delta U = m \\left[ c_{0}T + \\frac{\\alpha}{2}T^{2} \\right]_{T_{1}}^{T_{0}} $$\n$$ \\Delta U = m \\left( (c_{0}T_{0} + \\frac{\\alpha}{2}T_{0}^{2}) - (c_{0}T_{1} + \\frac{\\alpha}{2}T_{1}^{2}) \\right) $$\n$$ \\Delta U = m \\left[ c_{0}(T_{0} - T_{1}) + \\frac{\\alpha}{2}(T_{0}^{2} - T_{1}^{2}) \\right] $$\n\n接下来，我们计算熵变 $\\Delta S$。对于一个可逆过程，熵的微分变化为 $dS = \\frac{\\delta Q_{rev}}{T}$。对于一个简单的不可压缩物质，可逆热传递为 $\\delta Q_{rev} = m c(T) dT$。因此，通过积分求得熵变：\n$$ \\Delta S = S_{2} - S_{1} = \\int_{T_{1}}^{T_{0}} \\frac{m c(T)}{T} \\,dT $$\n代入 $c(T) = c_{0} + \\alpha T$：\n$$ \\Delta S = m \\int_{T_{1}}^{T_{0}} \\frac{c_{0} + \\alpha T}{T} \\,dT = m \\int_{T_{1}}^{T_{0}} \\left(\\frac{c_{0}}{T} + \\alpha\\right) \\,dT $$\n执行积分：\n$$ \\Delta S = m \\left[ c_{0}\\ln(T) + \\alpha T \\right]_{T_{1}}^{T_{0}} $$\n$$ \\Delta S = m \\left( (c_{0}\\ln(T_{0}) + \\alpha T_{0}) - (c_{0}\\ln(T_{1}) + \\alpha T_{1}) \\right) $$\n$$ \\Delta S = m \\left[ c_{0}(\\ln(T_{0}) - \\ln(T_{1})) + \\alpha(T_{0} - T_{1}) \\right] = m \\left[ c_{0}\\ln\\left(\\frac{T_{0}}{T_{1}}\\right) + \\alpha(T_{0} - T_{1}) \\right] $$\n\n现在我们将 $\\Delta U$ 和 $\\Delta S$ 的表达式结合起来，求得有用能变化 $\\Delta \\Psi$：\n$$ \\Delta \\Psi = \\Delta U - T_{0} \\Delta S $$\n$$ \\Delta \\Psi = m \\left[ c_{0}(T_{0} - T_{1}) + \\frac{\\alpha}{2}(T_{0}^{2} - T_{1}^{2}) \\right] - T_{0} \\left( m \\left[ c_{0}\\ln\\left(\\frac{T_{0}}{T_{1}}\\right) + \\alpha(T_{0} - T_{1}) \\right] \\right) $$\n提出因子 $m$ 并按 $c_{0}$ 和 $\\alpha$ 对各项进行分组：\n$$ \\Delta \\Psi = m \\left[ c_{0}(T_{0} - T_{1}) - T_{0}c_{0}\\ln\\left(\\frac{T_{0}}{T_{1}}\\right) + \\frac{\\alpha}{2}(T_{0}^{2} - T_{1}^{2}) - \\alpha T_{0}(T_{0} - T_{1}) \\right] $$\n让我们简化与 $\\alpha$ 相关的项：\n$$ \\frac{\\alpha}{2}(T_{0}^{2} - T_{1}^{2}) - \\alpha T_{0}(T_{0} - T_{1}) = \\alpha \\left[ \\frac{1}{2}(T_{0} - T_{1})(T_{0} + T_{1}) - T_{0}(T_{0} - T_{1}) \\right] $$\n$$ = \\alpha (T_{0} - T_{1}) \\left[ \\frac{1}{2}(T_{0} + T_{1}) - T_{0} \\right] = \\alpha (T_{0} - T_{1}) \\left[ \\frac{1}{2}T_{1} - \\frac{1}{2}T_{0} \\right] $$\n$$ = -\\frac{\\alpha}{2} (T_{0} - T_{1})(T_{0} - T_{1}) = -\\frac{\\alpha}{2}(T_{0} - T_{1})^{2} $$\n将此结果代回 $\\Delta \\Psi$ 的表达式中：\n$$ \\Delta \\Psi = m \\left[ c_{0}\\left(T_{0} - T_{1} - T_{0}\\ln\\left(\\frac{T_{0}}{T_{1}}\\right)\\right) - \\frac{\\alpha}{2}(T_{0} - T_{1})^{2} \\right] $$\n为了使对数的参数大于1（因为 $T_{1}  T_{0}$），我们可以使用性质 $\\ln(x) = -\\ln(1/x)$：\n$$ \\Delta \\Psi = m \\left[ c_{0}\\left(T_{0} - T_{1} + T_{0}\\ln\\left(\\frac{T_{1}}{T_{0}}\\right)\\right) - \\frac{\\alpha}{2}(T_{1} - T_{0})^{2} \\right] $$\n注意，$(T_{0} - T_{1})^{2} = (T_{1} - T_{0})^{2}$。这是有用能变化的最终闭式表达式。\n\n对于物理上的解释，物体在初始状态 $\\Psi_{1}$ 相对于死态 $T_{0}$ 的有用能，代表了当物体冷却到 $T_{0}$ 时可以提取的最大可能功。最终状态2是死态（热平衡状态），所以 $\\Psi_{2} = 0$。因此，最大可提取功为 $W_{max} = \\Psi_{1} - \\Psi_{2} = \\Psi_{1} = -\\Delta\\Psi$。\n$$ W_{max} = -\\Delta\\Psi = m \\left[ c_{0}\\left(T_{1} - T_{0} - T_{0}\\ln\\left(\\frac{T_{1}}{T_{0}}\\right)\\right) + \\frac{\\alpha}{2}(T_{1} - T_{0})^{2} \\right] $$\n与比热容的温度依赖性相关的项是 $\\frac{m\\alpha}{2}(T_{1} - T_{0})^{2}$。由于 $\\alpha \\geq 0$ 且 $T_{1} \\neq T_{0}$，该项是非负的。正的 $\\alpha$ 表示比热容 $c(T)$ 随温度升高而增加。这有两个关键后果：\n1. 与比热容恒为 $c_{0}$ 的物体相比，该物体在较高温度下储存更多的内能。将物体从 $T_{1}$ 冷却到 $T_{0}$ 所必须提取的总热量更大。\n2. 这部分额外的能量储存在更高的温度下，在这些温度下其热力学“品质”或做功的潜力更高。任何将此热量转化为功的理想热机（例如，卡诺热机）的效率为 $\\eta = 1 - T_{0}/T$，它是热源温度 $T$ 的增函数。\n$\\frac{m\\alpha}{2}(T_{1} - T_{0})^{2}$ 项精确地量化了由于比热容不是常数而是随温度增加而产生的额外做功能力（㶲）。因此，一个假设比热容恒定的模型会低估从该物体中可提取的最大功。",
            "answer": "$$ \\boxed{m \\left[ c_{0}\\left(T_{0} - T_{1} + T_{0}\\ln\\left(\\frac{T_{1}}{T_{0}}\\right)\\right) - \\frac{\\alpha}{2}\\left(T_{1} - T_{0}\\right)^{2} \\right]} $$"
        },
        {
            "introduction": "从简单系统分析扩展到复杂工程循环是掌握㶲分析的关键一步。本实践将指导您对一个稳态运行的蒸汽压缩制冷系统 (VCRS) 进行详细的、分部件的㶲分析。㶲分析的主要目的是定位不可逆性的来源并量化其大小，而这个编程实践  正是为此目的而设计。通过量化压缩机、冷凝器、膨胀阀和蒸发器中各自的㶲损失，您将学会如何识别提高整体系统性能的主要机会所在。",
            "id": "4121957",
            "problem": "一个蒸汽压缩制冷系统 (VCRS) 在温度为 $T_{\\mathrm{evap}}$ 的蒸发器和温度为 $T_{\\mathrm{cond}}$ 的冷凝器之间运行。环境 (死态) 温度为 $T_0$。制冷剂被建模为一种纯物质，具有以下性质和假设，所有单位均采用一致单位制，因此焓的单位为 $\\mathrm{kJ}/\\mathrm{kg}$，熵的单位为 $\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$，温度单位为 $\\mathrm{K}$，质量流率单位为 $\\mathrm{kg}/\\mathrm{s}$，出现在对数内部的压力为比率 (无量纲)，功、热量和㶲损率的单位为 $\\mathrm{kW}$。\n\n基本和建模假设：\n\n- 稳态稳流运行，动能和势能变化可忽略，换热器中压降可忽略。\n- 压缩机是绝热的，具有给定的等熵效率 $\\eta_{\\mathrm{is}} \\in (0,1]$。\n- 节流阀是绝热且等焓的。\n- 蒸发器和冷凝器分别与温度均匀的边界大热源 $T_{\\mathrm{evap}}$ 和 $T_{\\mathrm{cond}}$ 进行热交换。\n- 制冷剂是一种纯物质，参考温度 $T_{\\mathrm{ref}}=273.15\\,\\mathrm{K}$，并具有以下性质模型：\n  1. 饱和液体比焓：$h_{\\ell}(T) = c_{p,\\ell}\\,(T - T_{\\mathrm{ref}})$。\n  2. 饱和液体比熵：$s_{\\ell}(T) = c_{p,\\ell}\\,\\ln\\!\\left(\\dfrac{T}{T_{\\mathrm{ref}}}\\right)$。\n  3. 汽化潜热：$h_{\\mathrm{lat}}(T) = h_{\\mathrm{lat,ref}} - \\alpha\\,(T - T_{\\mathrm{ref}})$。\n  4. 饱和蒸汽比焓：$h_{v,\\mathrm{sat}}(T) = h_{\\ell}(T) + h_{\\mathrm{lat}}(T)$。\n  5. 饱和蒸汽比熵：$s_{v,\\mathrm{sat}}(T) = s_{\\ell}(T) + \\dfrac{h_{\\mathrm{lat}}(T)}{T}$。\n  6. 压缩机中的蒸汽被视为理想气体，具有恒定的定压比热 $c_{p,v}$ 和等熵指数 $k$，因此 $c_{v,v} = \\dfrac{c_{p,v}}{k}$，气体常数 $R = c_{p,v} - c_{v,v} = c_{p,v}\\left(1 - \\dfrac{1}{k}\\right)$。\n  7. 饱和压力由克劳修斯型拟合近似：$p_{\\mathrm{sat}}(T) = p_{\\mathrm{ref}} \\exp\\!\\left(b\\left(\\dfrac{1}{T_{\\mathrm{ref}}} - \\dfrac{1}{T}\\right)\\right)$，仅用于确定压缩机中的压力比。压力仅以比率形式出现，因此在对数中是无量纲的。\n\n给定的数值常数：\n- $c_{p,\\ell} = 1.4\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$，\n- $c_{p,v} = 0.9\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$，\n- $k = 1.25$，\n- $h_{\\mathrm{lat,ref}} = 200\\,\\mathrm{kJ}/\\mathrm{kg}$，\n- $\\alpha = 0.25\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$，\n- $p_{\\mathrm{ref}} = 3.0$ (无量纲压力标度)，\n- $b = 2000$。\n\n要使用的部件状态和关系：\n- 状态 $1$ (压缩机入口，蒸发器出口)：在 $T_{\\mathrm{evap}}$ 下的饱和蒸汽，其中 $h_1 = h_{v,\\mathrm{sat}}(T_{\\mathrm{evap}})$，$s_1 = s_{v,\\mathrm{sat}}(T_{\\mathrm{evap}})$，$p_1 = p_{\\mathrm{sat}}(T_{\\mathrm{evap}})$。\n- 状态 $2$ (压缩机出口)：理想气体等熵温度 $T_{2s} = T_1\\left(\\dfrac{p_2}{p_1}\\right)^{(k-1)/k}$，其中 $p_2 = p_{\\mathrm{sat}}(T_{\\mathrm{cond}})$，实际温度 $T_2 = T_1 + \\dfrac{T_{2s} - T_1}{\\eta_{\\mathrm{is}}}$。跨压缩机的焓和熵变通过理想气体关系建模：$h_2 = h_1 + c_{p,v}(T_2 - T_1)$ 和 $s_2 = s_1 + c_{p,v}\\ln\\!\\left(\\dfrac{T_2}{T_1}\\right) - R\\ln\\!\\left(\\dfrac{p_2}{p_1}\\right)$。\n- 状态 $3$ (冷凝器出口)：在 $T_{\\mathrm{cond}}$ 下的饱和液体，其中 $h_3 = h_{\\ell}(T_{\\mathrm{cond}})$，$s_3 = s_{\\ell}(T_{\\mathrm{cond}})$。\n- 状态 $4$ (膨胀阀出口，蒸发器入口)：等焓节流得到 $h_4 = h_3$。蒸发器入口的干度为 $x_4 = \\dfrac{h_4 - h_{\\ell}(T_{\\mathrm{evap}})}{h_{\\mathrm{lat}}(T_{\\mathrm{evap}})}$，限制在 $[0,1]$ 范围内，熵近似为 $s_4 = s_{\\ell}(T_{\\mathrm{evap}}) + x_4\\,\\dfrac{h_{\\mathrm{lat}}(T_{\\mathrm{evap}})}{T_{\\mathrm{evap}}}$。\n\n要使用的第一性原理：\n- 用于稳流部件的热力学第一定律，将热量和功与焓变联系起来。\n- 每个部件的热力学第二定律 (熵平衡)，熵产生率 $ \\dot{S}_{\\mathrm{gen}}$ 定义为：\n  - 压缩机 (绝热)：$\\dot{S}_{\\mathrm{gen,comp}} = \\dot{m}\\,(s_2 - s_1)$。\n  - 冷凝器 (在 $T_{\\mathrm{cond}}$ 下放热)：$\\dot{S}_{\\mathrm{gen,cond}} = \\dot{m}\\,(s_3 - s_2) + \\dfrac{\\dot{Q}_{\\mathrm{cond}}}{T_{\\mathrm{cond}}}$，其中 $\\dot{Q}_{\\mathrm{cond}} = \\dot{m}\\,(h_2 - h_3)$ 对于离开制冷剂的热量取正值。\n  - 膨胀阀 (绝热节流)：$\\dot{S}_{\\mathrm{gen,exp}} = \\dot{m}\\,(s_4 - s_3)$。\n  - 蒸发器 (在 $T_{\\mathrm{evap}}$ 下吸热)：$\\dot{S}_{\\mathrm{gen,evap}} = \\dot{m}\\,(s_1 - s_4) - \\dfrac{\\dot{Q}_{\\mathrm{evap}}}{T_{\\mathrm{evap}}}$，其中 $\\dot{Q}_{\\mathrm{evap}} = \\dot{m}\\,(h_1 - h_4)$ 对于进入制冷剂的热量取正值。\n- 部件的㶲损率：$\\dot{D}_i = T_0\\,\\dot{S}_{\\mathrm{gen},i}$。\n- 制冷机的㶲效率 (第二定律效率)：$\\varepsilon = \\dfrac{\\text{产品㶲}}{\\text{燃料㶲}} = \\dfrac{(1 - T_0/T_{\\mathrm{evap}})\\,\\dot{Q}_{\\mathrm{evap}}}{\\dot{W}_{\\mathrm{comp}}}$，其中 $\\dot{W}_{\\mathrm{comp}} = \\dot{m}\\,(h_2 - h_1)$。\n\n任务：\n- 实现上述物理一致的模型，为每个测试案例计算：\n  1. 㶲效率 $\\varepsilon$ (无量纲，以小数形式报告)。\n  2. 㶲损率 $\\dot{D}_{\\mathrm{comp}}$, $\\dot{D}_{\\mathrm{cond}}$, $\\dot{D}_{\\mathrm{exp}}$, $\\dot{D}_{\\mathrm{evap}}$ (每个单位为 $\\mathrm{kW}$)。\n\n- 以 $\\mathrm{kW}$ 报告所有㶲损率，㶲效率以无量纲小数形式报告，四舍五入到六位小数。\n\n测试套件：\n为以下参数集 $(T_{\\mathrm{evap}}, T_{\\mathrm{cond}}, \\eta_{\\mathrm{is}}, \\dot{m}, T_0)$ 提供结果，单位分别为 $\\mathrm{K}$、无量纲效率、$\\mathrm{kg}/\\mathrm{s}$ 和 $\\mathrm{K}$：\n- 案例 1 (一般情况)：$(273.15, 308.15, 0.75, 0.08, 298.15)$。\n- 案例 2 (更大温升，更低效率)：$(280.15, 318.15, 0.65, 0.12, 298.15)$。\n- 案例 3 (接近理想的压缩机)：$(286.15, 305.15, 1.00, 0.10, 298.15)$。\n- 案例 4 (蒸发器接近环境温度，小质量流率)：$(296.15, 310.15, 0.85, 0.05, 298.15)$。\n\n最终输出格式：\n您的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表的结果。每个测试案例的结果必须是 $[\\varepsilon, \\dot{D}_{\\mathrm{comp}}, \\dot{D}_{\\mathrm{cond}}, \\dot{D}_{\\mathrm{exp}}, \\dot{D}_{\\mathrm{evap}}]$ 形式的列表，单位如前所述。最后一行必须是：\n[[epsilon1,D_comp1,D_cond1,D_exp1,D_evap1],[epsilon2,D_comp2,D_cond2,D_exp2,D_evap2],[epsilon3,D_comp3,D_cond3,D_exp3,D_evap3],[epsilon4,D_comp4,D_cond4,D_exp4,D_evap4]]",
            "solution": "用户提供了一份关于蒸汽压缩制冷系统 (VCRS) 分析的详细问题陈述。该问题被认为是有效的，因为它是自洽的，科学上基于热力学原理，并且是适定的。它为制冷剂性质和循环过程提供了一整套简化但一致的模型，以及所有必要的常数和参数。任务是实现这个模型，并为一组给定的测试案例计算㶲效率和各部件的㶲损率。\n\n求解过程通过系统地计算制冷循环四个主要状态点的热力学性质来进行。根据这些状态性质，确定传热率、功和㶲损率。\n\n给定的常数如下：\n- 参考温度: $T_{\\mathrm{ref}} = 273.15\\,\\mathrm{K}$\n- 液体比热: $c_{p,\\ell} = 1.4\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$\n- 蒸汽比热 (定压): $c_{p,v} = 0.9\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$\n- 蒸汽等熵指数: $k = 1.25$\n- 参考汽化潜热: $h_{\\mathrm{lat,ref}} = 200\\,\\mathrm{kJ}/\\mathrm{kg}$\n- 潜热温度系数: $\\alpha = 0.25\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$\n- 参考压力标度: $p_{\\mathrm{ref}} = 3.0$ (无量纲)\n- 克劳修斯型拟合常数: $b = 2000$\n\n蒸汽的气体常数由理想气体关系推导得出：$R = c_{p,v} - c_{v,v} = c_{p,v} - c_{p,v}/k = c_{p,v}(1 - 1/k)$。\n$R = 0.9\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K}) \\times (1 - 1/1.25) = 0.18\\,\\mathrm{kJ}/(\\mathrm{kg}\\cdot\\mathrm{K})$。\n\n对于给定的测试案例 $(T_{\\mathrm{evap}}, T_{\\mathrm{cond}}, \\eta_{\\mathrm{is}}, \\dot{m}, T_0)$，计算步骤如下：\n\n**1. 定义制冷剂性质模型**\n将指定的性质关系实现为温度 $T$ 的函数：\n- 饱和液体焓: $h_{\\ell}(T) = c_{p,\\ell}\\,(T - T_{\\mathrm{ref}})$\n- 饱和液体熵: $s_{\\ell}(T) = c_{p,\\ell}\\,\\ln(T/T_{\\mathrm{ref}})$\n- 潜热: $h_{\\mathrm{lat}}(T) = h_{\\mathrm{lat,ref}} - \\alpha\\,(T - T_{\\mathrm{ref}})$\n- 饱和蒸汽焓: $h_{v,\\mathrm{sat}}(T) = h_{\\ell}(T) + h_{\\mathrm{lat}}(T)$\n- 饱和蒸汽熵: $s_{v,\\mathrm{sat}}(T) = s_{\\ell}(T) + h_{\\mathrm{lat}}(T)/T$\n- 饱和压力: $p_{\\mathrm{sat}}(T) = p_{\\mathrm{ref}} \\exp(b(1/T_{\\mathrm{ref}} - 1/T))$\n\n**2. 确定状态性质**\n\n**状态 1: 压缩机入口 (在 $T_{\\mathrm{evap}}$ 下的饱和蒸汽)**\n蒸发器出口的性质取为 $T_1 = T_{\\mathrm{evap}}$ 时的饱和蒸汽性质。\n- 焓: $h_1 = h_{v,\\mathrm{sat}}(T_{\\mathrm{evap}})$\n- 熵: $s_1 = s_{v,\\mathrm{sat}}(T_{\\mathrm{evap}})$\n- 压力: $p_1 = p_{\\mathrm{sat}}(T_{\\mathrm{evap}})$\n\n**状态 2: 压缩机出口**\n流体从压力 $p_1$ 压缩到 $p_2 = p_{\\mathrm{sat}}(T_{\\mathrm{cond}})$。\n- 首先，使用理想气体关系求得等熵出口温度 $T_{2s}$：\n  $T_{2s} = T_1 \\left( \\dfrac{p_2}{p_1} \\right)^{(k-1)/k}$\n- 使用等熵效率 $\\eta_{\\mathrm{is}}$ 计算实际出口温度 $T_2$：\n  $T_2 = T_1 + \\dfrac{T_{2s} - T_1}{\\eta_{\\mathrm{is}}}$\n- 使用理想气体比热确定实际出口焓 $h_2$：\n  $h_2 = h_1 + c_{p,v}(T_2 - T_1)$\n- 根据理想气体熵变关系求得实际出口熵 $s_2$：\n  $s_2 = s_1 + c_{p,v}\\ln\\left(\\dfrac{T_2}{T_1}\\right) - R\\ln\\left(\\dfrac{p_2}{p_1}\\right)$\n\n**状态 3: 冷凝器出口 (在 $T_{\\mathrm{cond}}$ 下的饱和液体)**\n冷凝器出口的性质为 $T_3 = T_{\\mathrm{cond}}$ 时的饱和液体性质。\n- 焓: $h_3 = h_{\\ell}(T_{\\mathrm{cond}})$\n- 熵: $s_3 = s_{\\ell}(T_{\\mathrm{cond}})$\n\n**状态 4: 膨胀阀出口**\n通过膨胀阀的节流过程是等焓的。\n- 焓: $h_4 = h_3$\n- 制冷剂是在 $T_{\\mathrm{evap}}$ 下的两相混合物。其干度 $x_4$ 为：\n  $x_4 = \\dfrac{h_4 - h_{\\ell}(T_{\\mathrm{evap}})}{h_{\\mathrm{lat}}(T_{\\mathrm{evap}})}$\n- 使用干度计算熵 $s_4$：\n  $s_4 = s_{\\ell}(T_{\\mathrm{evap}}) + x_4 \\dfrac{h_{\\mathrm{lat}}(T_{\\mathrm{evap}})}{T_{\\mathrm{evap}}}$\n\n**3. 计算能量速率和性能指标**\n\n给定质量流率 $\\dot{m}$，计算能量相互作用率：\n- 制冷率 (蒸发器中吸收的热量): $\\dot{Q}_{\\mathrm{evap}} = \\dot{m}\\,(h_1 - h_4)$\n- 压缩机功率输入: $\\dot{W}_{\\mathrm{comp}} = \\dot{m}\\,(h_2 - h_1)$\n- 排热率 (冷凝器中): $\\dot{Q}_{\\mathrm{cond}} = \\dot{m}\\,(h_2 - h_3)$\n\n使用提供的定义计算㶲效率 $\\varepsilon$：\n$\\varepsilon = \\dfrac{(1 - T_0/T_{\\mathrm{evap}})\\,\\dot{Q}_{\\mathrm{evap}}}{\\dot{W}_{\\mathrm{comp}}}$\n\n**4. 计算㶲损率**\n\n对每个部件，计算熵产生率 $\\dot{S}_{\\mathrm{gen},i}$，然后通过 $\\dot{D}_i = T_0\\,\\dot{S}_{\\mathrm{gen},i}$ 求得㶲损率。\n\n- **压缩机:** $\\dot{S}_{\\mathrm{gen,comp}} = \\dot{m}(s_2 - s_1)$\n- **冷凝器:** $\\dot{S}_{\\mathrm{gen,cond}} = \\dot{m}(s_3 - s_2) + \\dfrac{\\dot{Q}_{\\mathrm{cond}}}{T_{\\mathrm{cond}}}$\n- **膨胀阀:** $\\dot{S}_{\\mathrm{gen,exp}} = \\dot{m}(s_4 - s_3)$\n- **蒸发器:** $\\dot{S}_{\\mathrm{gen,evap}} = \\dot{m}(s_1 - s_4) - \\dfrac{\\dot{Q}_{\\mathrm{evap}}}{T_{\\mathrm{evap}}}$\n\n注意：根据所提供的模型，蒸发器中的传热发生在制冷剂和热源之间，两者温度均为 $T_{\\mathrm{evap}}$，因此㶲损 $\\dot{D}_{\\mathrm{evap}}$ 在分析上为零。这是传热无温差这一理想化假设的直接结果。\n\n最后，将计算出的值 $[\\varepsilon, \\dot{D}_{\\mathrm{comp}}, \\dot{D}_{\\mathrm{cond}}, \\dot{D}_{\\mathrm{exp}}, \\dot{D}_{\\mathrm{evap}}]$ 组合起来，并对每个测试案例四舍五入到六位小数。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the VCRS problem for the given test cases.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # (T_evap, T_cond, eta_is, m_dot, T_0)\n        (273.15, 308.15, 0.75, 0.08, 298.15),\n        (280.15, 318.15, 0.65, 0.12, 298.15),\n        (286.15, 305.15, 1.00, 0.10, 298.15),\n        (296.15, 310.15, 0.85, 0.05, 298.15),\n    ]\n\n    results = []\n    for case in test_cases:\n        result = vcls_model(*case)\n        results.append(result)\n\n    # Format the final output string\n    formatted_results = []\n    for res_list in results:\n        # Format each number to 6 decimal places and join with commas\n        formatted_list = [f\"{val:.6f}\" for val in res_list]\n        formatted_results.append(f\"[{','.join(formatted_list)}]\")\n    \n    # Final print statement in the exact required format.\n    print(f\"[{','.join(formatted_results)}]\")\n\n\ndef vcls_model(T_evap, T_cond, eta_is, m_dot, T_0):\n    \"\"\"\n    Implements the VCRS model based on the problem statement.\n    \"\"\"\n    # Numerical Constants\n    c_p_l = 1.4      # kJ/(kg.K)\n    c_p_v = 0.9      # kJ/(kg.K)\n    k = 1.25         # dimensionless\n    h_lat_ref = 200  # kJ/kg\n    alpha = 0.25     # kJ/(kg.K)\n    p_ref = 3.0      # dimensionless\n    b = 2000.0       # dimensionless in the exponent\n    T_ref = 273.15   # K\n    R = c_p_v * (1 - 1/k)\n\n    # Refrigerant Property Functions\n    def h_l(T):\n        return c_p_l * (T - T_ref)\n\n    def s_l(T):\n        return c_p_l * np.log(T / T_ref)\n\n    def h_lat(T):\n        return h_lat_ref - alpha * (T - T_ref)\n\n    def h_v_sat(T):\n        return h_l(T) + h_lat(T)\n\n    def s_v_sat(T):\n        return s_l(T) + h_lat(T) / T\n\n    def p_sat(T):\n        return p_ref * np.exp(b * (1/T_ref - 1/T))\n\n    # State 1: Compressor Inlet (Saturated Vapor at T_evap)\n    T1 = T_evap\n    h1 = h_v_sat(T1)\n    s1 = s_v_sat(T1)\n    p1 = p_sat(T1)\n\n    # State 2: Compressor Outlet\n    p2 = p_sat(T_cond)\n    p_ratio = p2 / p1\n    T2s = T1 * (p_ratio)**((k - 1) / k)\n    if eta_is > 0:\n        T2 = T1 + (T2s - T1) / eta_is\n    else: # Should not happen based on problem constraints\n        T2 = T2s # fallback for eta_is=0 which is not in problem spec\n    \n    h2 = h1 + c_p_v * (T2 - T1)\n    s2 = s1 + c_p_v * np.log(T2 / T1) - R * np.log(p_ratio)\n\n    # State 3: Condenser Outlet (Saturated Liquid at T_cond)\n    T3 = T_cond\n    h3 = h_l(T3)\n    s3 = s_l(T3)\n\n    # State 4: Expansion Valve Outlet\n    h4 = h3  # Isenthalpic throttling\n    h_l_evap = h_l(T_evap)\n    h_lat_evap = h_lat(T_evap)\n    x4 = (h4 - h_l_evap) / h_lat_evap\n    x4 = np.clip(x4, 0, 1) # Clamp quality as specified\n    s4 = s_l(T_evap) + x4 * h_lat_evap / T_evap\n\n    # Energy Rates\n    W_comp_dot = m_dot * (h2 - h1)\n    Q_evap_dot = m_dot * (h1 - h4)\n    Q_cond_dot = m_dot * (h2 - h3)\n\n    # Exergetic Efficiency (epsilon)\n    # Handle case where W_comp_dot is zero to avoid division by zero\n    if W_comp_dot == 0:\n      epsilon = np.inf if Q_evap_dot > 0 else 0\n    else:\n      epsilon = ((1 - T_0 / T_evap) * Q_evap_dot) / W_comp_dot\n      \n    # Exergy Destruction Rates (D_i = T0 * S_gen_i)\n    # Compressor\n    S_gen_comp_dot = m_dot * (s2 - s1)\n    D_comp = T_0 * S_gen_comp_dot\n\n    # Condenser\n    S_gen_cond_dot = m_dot * (s3 - s2) + Q_cond_dot / T_cond\n    D_cond = T_0 * S_gen_cond_dot\n\n    # Expansion Valve\n    S_gen_exp_dot = m_dot * (s4 - s3)\n    D_exp = T_0 * S_gen_exp_dot\n\n    # Evaporator\n    S_gen_evap_dot = m_dot * (s1 - s4) - Q_evap_dot / T_evap\n    D_evap = T_0 * S_gen_evap_dot\n\n    return [epsilon, D_comp, D_cond, D_exp, D_evap]\n\nsolve()\n```"
        },
        {
            "introduction": "现实世界中的能源系统经常在瞬态条件下运行，例如启动、停机或批次填充过程。这个高级实践将㶲分析的应用范围从稳态系统扩展到了非稳态过程。您将分析一个从供应管线向刚性容器充气的瞬态过程，这是一个经典的热力学问题 。本练习要求您将瞬态质量和能量平衡与㶲的原理相结合，以确定系统最终状态的做功能力，为设计和优化动态能量系统提供关键技能。",
            "id": "4122016",
            "problem": "一个包含干燥空气（模型为具有恒定比热的理想气体）的刚性绝热容器从高压供给管路瞬态填充。环境的特征是一个均匀、大型的热源，其温度为$T_0$，压力为$P_0$，被称为死态。该容器具有固定体积$V$，其初始状态由初始压力$P_i$和初始温度$T_i$指定。供给管路是一个大型气源，其压力为$P_{\\text{in}}$，温度为$T_{\\text{in}}$，输送的空气其动能和势能效应可以忽略不计。该过程持续进行，直到容器压力等于供给管路压力。目标是利用基于热力学第一定律和热力学第二定律的瞬态㶲分析，确定通过将最终容器内的物质可逆地带到死态所能提取的最大有用功。\n\n使用以下基本依据：\n- 瞬态控制体积（CV）的热力学第一定律：对刚性、绝热、无轴功的容器应用质量和能量平衡。\n- 热力学第二定律以及闭口系统和流动工质的㶲的定义。\n- 具有恒定比热的理想气体关系式。\n\n假设：\n- 干燥空气是具有恒定性质的理想气体。使用气体常数$R = 287$ J/kg·K，定压比热$c_p = 1005$ J/kg·K，以及定容比热$c_v = c_p - R$。\n- 容器是刚性的（体积$V$恒定），完全绝热的（绝热），并且在填充过程中没有轴功或热量传递。\n- 供给管路作为一个大型气源，其$P_{\\text{in}}$和$T_{\\text{in}}$保持不变。\n- 当容器压力等于$P_{\\text{in}}$时，填充过程结束。\n- 动能和势能效应可以忽略不计。\n\n您的任务：\n1. 从上述基本依据出发，推导确定当压力等于$P_{\\text{in}}$时容器中最终质量$m_f$和最终温度$T_f$的表达式。使用$m = \\dfrac{P V}{R T}$表示理想气体质量。\n2. 使用闭口系统的㶲（相对于死态）和流入工质的流功㶲，计算通过将最终容器内的物质可逆地带到死态所能提取的最大有用功$W_{\\max}$。将最大有用功视为最终容器内物质相对于环境的㶲。以焦耳表示$W_{\\max}$。\n3. 算法化实现该推导，为下面的每个测试用例计算$W_{\\max}$。\n\n使用的定义：\n- 死态环境：$T_0 = 298.15$ K， $P_0 = 101325$ Pa。\n- 理想气体性质：$R = 287$ J/kg·K， $c_p = 1005$ J/kg·K， $c_v = c_p - R$。\n- 将空气视为成分不变，无化学㶲贡献。\n\n测试套件（每个元组为$(V, P_{\\text{in}}, T_{\\text{in}}, P_i, T_i)$）：\n- 用例 A（正常情况）：$(0.100, 500000, 320.0, 101325, 298.15)$\n- 用例 B（供给高温高压）：$(0.250, 1000000, 700.0, 101325, 298.15)$\n- 用例 C（边界情况，供给等于环境）：$(0.100, 101325, 298.15, 101325, 298.15)$\n- 用例 D（初始状态低于环境温度和压力）：$(0.050, 600000, 350.0, 50000, 280.0)$\n\n您的程序必须：\n- 对每个测试用例，计算$W_{\\max}$（单位：焦耳）。\n- 以焦耳表示最终答案，并精确到两位小数。\n- 生成一行输出，包含一个用方括号括起来的逗号分隔列表的结果，例如，$[w_A,w_B,w_C,w_D]$，其中每个条目是按上列顺序对应于相应案例的$W_{\\max}$。\n\n单位和格式：\n- 所有输入均使用国际单位制：$V$单位为m$^3$，压力单位为Pa，温度单位为K。\n- 输出$W_{\\max}$必须以焦耳为单位，保留两位小数，并以单行列表形式打印：$[w_A,w_B,w_C,w_D]$。",
            "solution": "在尝试任何解决方案之前，用户提供的问题都经过了严格的验证过程。\n\n### 第1步：提取已知条件\n\n- **系统**：一个刚性绝热容器。\n- **物质**：干燥空气，模型为具有恒定比热的理想气体。\n- **过程**：从高压供给管路进行瞬态填充。\n- **容器属性**：\n    - 固定体积：$V$\n    - 初始压力：$P_i$\n    - 初始温度：$T_i$\n- **供给管路属性**：\n    - 压力为$P_{\\text{in}}$、温度为$T_{\\text{in}}$的大型气源。\n- **过程结束条件**：最终容器压力$P_f = P_{\\text{in}}$。\n- **环境（死态）**：温度为$T_0$、压力为$P_0$的均匀热源。\n- **目标**：确定通过将最终容器内的物质可逆地带到死态所能提取的最大有用功$W_{\\max}$。\n- **假设**：\n    1. 干燥空气是具有恒定性质的理想气体：$R = 287 \\, \\text{J/kg·K}$， $c_p = 1005 \\, \\text{J/kg·K}$， $c_v = c_p - R$。\n    2. 容器是刚性的（$V=\\text{constant}$），完全绝热的（绝热，$Q=0$），并且没有轴功（$W_{shaft}=0$）。\n    3. 供给管路是一个大型气源，因此$P_{\\text{in}}$和$T_{\\text{in}}$是恒定的。\n    4. 当$P_f = P_{\\text{in}}$时，填充停止。\n    5. 动能和势能效应可以忽略不计。\n- **常数和定义**：\n    - 死态：$T_0 = 298.15 \\, \\text{K}$， $P_0 = 101325 \\, \\text{Pa}$。\n    - 气体性质：$R = 287 \\, \\text{J/kg·K}$， $c_p = 1005 \\, \\text{J/kg·K}$。\n    - 无化学㶲贡献。\n- **测试用例** $(V, P_{\\text{in}}, T_{\\text{in}}, P_i, T_i)$:\n    - 用例 A：$(0.100, 500000, 320.0, 101325, 298.15)$\n    - 用例 B：$(0.250, 1000000, 700.0, 101325, 298.15)$\n    - 用例 C：$(0.100, 101325, 298.15, 101325, 298.15)$\n    - 用例 D：$(0.050, 600000, 350.0, 50000, 280.0)$\n- **输出要求**：$W_{\\max}$以焦耳为单位，保留两位小数，格式为`[w_A,w_B,w_C,w_D]`。\n\n### 第2步：使用提取的已知条件进行验证\n\n- **科学依据**：该问题是热力学第一和第二定律在瞬态（非稳态）开口系统中的经典应用。它涉及理想气体行为、质量和能量守恒以及㶲分析等标准概念。这些是工程热力学中基本且公认的原理。该问题在科学上是合理的。\n- **适定性**：该问题是适定的。系统的初始状态（$P_i, T_i, V$）、进入质量的状态（$P_{\\text{in}}, T_{\\text{in}}$）、物质的性质（$R, c_p, c_v$）以及过程结束的边界条件（$P_f = P_{\\text{in}}$）都已明确定义。目标是计算一个特定量$W_{\\max}$，该量由最终状态和死态唯一确定。\n- **客观性**：问题使用精确、客观的科学语言陈述。没有主观或模糊的术语。\n- **其他缺陷**：问题是自洽的，提供了所有必要的数据。这些假设是简化此类分析的标准做法，并未引入矛盾。数值对于工程环境是物理上现实的。该问题并非微不足道，需要多步推导，并且不是同义反复。\n\n### 第3步：结论与行动\n\n问题陈述是**有效的**。它科学合理、适定、客观且完整。将推导并实施一个分步解决方案。\n\n### 求解推导\n\n解决方案分为两个主要部分：首先，确定填充过程后容器中空气的最终状态；其次，计算该最终状态相对于环境的㶲。\n\n**第1部分：确定最终状态 ($m_f, T_f$)**\n\n我们将控制体积（CV）定义为刚性容器的内部。该过程是瞬态的。\n\nCV的质量守恒方程为：\n$$ \\frac{dm_{CV}}{dt} = \\dot{m}_{\\text{in}} - \\dot{m}_{\\text{out}} $$\n由于没有出口，$\\dot{m}_{\\text{out}} = 0$。从初始状态（$i$）到最终状态（$f$）积分得到：\n$$ m_f - m_i = m_{\\text{in,total}} $$\n其中$m_{\\text{in,total}}$是进入容器的总质量。\n\n瞬态CV的热力学第一定律（能量守恒）为：\n$$ \\frac{dE_{CV}}{dt} = \\dot{Q} - \\dot{W} + \\sum \\dot{m}_{\\text{in}} (h + ke + pe)_{\\text{in}} - \\sum \\dot{m}_{\\text{out}} (h + ke + pe)_{\\text{out}} $$\n应用问题的假设：\n- 绝热：$\\dot{Q} = 0$。\n- 刚性容器无轴功：$\\dot{W} = 0$。\n- 忽略动能（$ke$）和势能（$pe$）：$ke = pe = 0$。\n- 无出口流动：最后一项为零。\nCV内的能量纯粹是内能，$E_{CV} = U = mu$。\n能量平衡简化为：\n$$ \\frac{d(mu)}{dt} = \\dot{m}_{\\text{in}} h_{\\text{in}} $$\n在整个过程期间积分，并注意到供给管路的焓$h_{\\text{in}}$是恒定的：\n$$ \\int_{i}^{f} d(mu) = h_{\\text{in}} \\int_{0}^{t_f} \\dot{m}_{\\text{in}} dt $$\n$$ m_f u_f - m_i u_i = h_{\\text{in}} (m_f - m_i) $$\n对于具有恒定比热的理想气体，内能为$u = c_v T$，焓为$h = c_p T$。\n$$ m_f c_v T_f - m_i c_v T_i = (m_f - m_i) c_p T_{\\text{in}} $$\n使用理想气体定律$PV = mRT$，初始和最终质量分别为$m_i = \\frac{P_i V}{R T_i}$和$m_f = \\frac{P_f V}{R T_f}$。最终压力给定为$P_f = P_{\\text{in}}$。\n$$ \\left(\\frac{P_{\\text{in}} V}{R T_f}\\right) c_v T_f - \\left(\\frac{P_i V}{R T_i}\\right) c_v T_i = \\left(\\frac{P_{\\text{in}} V}{R T_f} - \\frac{P_i V}{R T_i}\\right) c_p T_{\\text{in}} $$\n两边除以$\\frac{V c_v}{R}$得到：\n$$ P_{\\text{in}} - P_i = \\left(\\frac{P_{\\text{in}}}{T_f} - \\frac{P_i}{T_i}\\right) \\frac{c_p}{c_v} T_{\\text{in}} $$\n令$k = \\frac{c_p}{c_v}$为比热比。\n$$ P_{\\text{in}} - P_i = \\left(\\frac{P_{\\text{in}}}{T_f} - \\frac{P_i}{T_i}\\right) k T_{\\text{in}} $$\n求解最终温度$T_f$：\n$$ \\frac{P_{\\text{in}} k T_{\\text{in}}}{T_f} = (P_{\\text{in}} - P_i) + \\frac{P_i k T_{\\text{in}}}{T_i} $$\n$$ T_f = \\frac{P_{\\text{in}} k T_{\\text{in}}}{P_{\\text{in}} - P_i + \\frac{P_i k T_{\\text{in}}}{T_i}} $$\n此表达式确定了最终温度。最终质量则为：\n$$ m_f = \\frac{P_{\\text{in}} V}{R T_f} $$\n\n**第2部分：计算最大有用功 ($W_{\\max}$)**\n\n通过将系统从给定状态带到死态，在存在大气的情况下可以获得的最大有用功，根据定义，是系统的㶲。对于一个闭口系统（在最终状态下容器中质量为$m_f$的气体），其㶲$\\Phi$由下式给出：\n$$ W_{\\max} = \\Phi_f = (U_f - U_0) + P_0(V_f - V_0) - T_0(S_f - S_0) $$\n在这里，下标$f$表示容器中的最终状态（$P_f=P_{\\text{in}}, T_f, V_f=V$），下标$0$表示相同质量$m_f$在死态（$P_0, T_0$）下的状态。\n\n各项计算如下：\n- 内能变化：$U_f - U_0 = m_f (u_f - u_0) = m_f c_v (T_f - T_0)$。\n- 体积变化：系统的体积是容器体积，$V_f=V$。质量$m_f$在死态下会占据的体积是$V_0 = \\frac{m_f R T_0}{P_0}$。所以，$P_0(V_f - V_0) = P_0V - m_f R T_0$。\n- 理想气体的熵变：$S_f - S_0 = m_f (s_f - s_0) = m_f \\left( c_p \\ln\\frac{T_f}{T_0} - R \\ln\\frac{P_f}{P_0} \\right)$。\n\n将这些代入㶲方程：\n$$ W_{\\max} = m_f c_v (T_f - T_0) + (P_0V - m_f R T_0) - T_0 \\left[ m_f \\left( c_p \\ln\\frac{T_f}{T_0} - R \\ln\\frac{P_f}{P_0} \\right) \\right] $$\n按$m_f$分组：\n$$ W_{\\max} = m_f \\left[ c_v(T_f - T_0) - R T_0 - T_0 \\left( c_p \\ln\\frac{T_f}{T_0} - R \\ln\\frac{P_f}{P_0} \\right) \\right] + P_0 V $$\n这是最大有用功的最终表达式。\n\n**算法步骤：**\n1. 对每个测试用例$(V, P_{\\text{in}}, T_{\\text{in}}, P_i, T_i)$，定义常数：$R, c_p, c_v, k, T_0, P_0$。\n2. 注意到$P_f = P_{\\text{in}}$。\n3. 使用推导出的公式计算最终温度$T_f$。如果$P_i = P_{\\text{in}}$，则存在一个特殊情况，此时没有流动发生，且$T_f = T_i$。通用公式能正确地简化到这个极限。\n4. 使用理想气体定律计算最终质量$m_f$：$m_f = \\frac{P_f V}{R T_f}$。\n5. 使用最终推导的㶲表达式计算$W_{\\max}$。\n6. 将结果保留两位小数。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the maximum useful work obtainable from a transiently filled tank.\n    \n    The solution follows these steps:\n    1.  Determines the final temperature (T_f) of the gas in the tank after filling,\n        based on a transient energy balance for an ideal gas.\n    2.  Calculates the final mass (m_f) in the tank using the ideal gas law.\n    3.  Computes the exergy of the final state of the gas relative to the dead state,\n        which represents the maximum useful work (W_max).\n    \"\"\"\n\n    # Define fundamental constants and dead state properties\n    R = 287.0      # J/kg·K (Specific gas constant for dry air)\n    cp = 1005.0    # J/kg·K (Specific heat at constant pressure for dry air)\n    cv = cp - R    # J/kg·K (Specific heat at constant volume for dry air)\n    k = cp / cv    # Specific heat ratio\n    T0 = 298.15    # K (Dead state temperature)\n    P0 = 101325.0  # Pa (Dead state pressure)\n\n    # Test suite: (V, P_in, T_in, P_i, T_i)\n    # V: volume in m^3\n    # P_in: supply line pressure in Pa\n    # T_in: supply line temperature in K\n    # P_i: initial tank pressure in Pa\n    # T_i: initial tank temperature in K\n    test_cases = [\n        (0.100, 500000.0, 320.0, 101325.0, 298.15),  # Case A\n        (0.250, 1000000.0, 700.0, 101325.0, 298.15), # Case B\n        (0.100, 101325.0, 298.15, 101325.0, 298.15), # Case C\n        (0.050, 600000.0, 350.0, 50000.0, 280.0),   # Case D\n    ]\n\n    results = []\n\n    for case in test_cases:\n        V, P_in, T_in, P_i, T_i = case\n\n        # The final pressure in the tank equals the supply line pressure\n        P_f = P_in\n\n        # Step 1: Calculate the final temperature (T_f)\n        # Handle the special case where initial pressure equals supply pressure.\n        # In this scenario, no mass enters the tank, and the final state is the initial state.\n        if P_in == P_i:\n            T_f = T_i\n        else:\n            # Derived from the transient energy balance:\n            # T_f = (P_in * k * T_in) / (P_in - P_i + (P_i * k * T_in) / T_i)\n            numerator = P_in * k * T_in\n            denominator = (P_in - P_i) + (P_i * k * T_in) / T_i\n            if denominator == 0:\n                # This case is unlikely with floating point arithmetic but is a logical possibility.\n                # If the denominator is zero, it implies an issue with the states,\n                # e.g., an attempt to divide by zero if T_i was 0.\n                # Problem constraints ensure T_i > 0.\n                T_f = float('inf') # Or handle as an error\n            else:\n                T_f = numerator / denominator\n\n        # Step 2: Calculate the final mass (m_f) in the tank\n        # Using the ideal gas law: m = PV / RT\n        if T_f == 0:\n            m_f = float('inf') # Avoid division by zero\n        else:\n            m_f = (P_f * V) / (R * T_f)\n\n        # Step 3: Calculate the maximum useful work (W_max), which is the exergy of the final state\n        # W_max = m_f * [cv*(T_f - T0) - R*T0 - T0*(cp*ln(T_f/T0) - R*ln(P_f/P0))] + P0*V\n        # Note: log(x/y) = log(x) - log(y), but using division is more numerically stable for ratios.\n        \n        # Handle log(0) or log(0) cases, though not expected from problem physics\n        if T_f = 0 or T0 = 0 or P_f = 0 or P0 = 0:\n            W_max = 0.0 # Exergy is non-negative and zero for non-physical states\n        else:\n            term1 = cv * (T_f - T0)\n            term2 = -R * T0\n            term3 = -T0 * cp * np.log(T_f / T0)\n            term4 = T0 * R * np.log(P_f / P0)\n            \n            W_max = m_f * (term1 + term2 + term3 + term4) + P0 * V\n\n        # Round the final result to two decimal places as required\n        results.append(round(W_max, 2))\n\n    # Format the output as a single-line comma-separated list in brackets\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n\n```"
        }
    ]
}
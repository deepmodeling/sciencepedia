{
    "hands_on_practices": [
        {
            "introduction": "任何地理空间数据集的价值都取决于其位置的准确性。在将数据用于环境建模或决策之前，我们必须量化并报告其与真实地理位置的符合程度。本练习将引导您应用一项基本统计技术——计算均方根误差（$RMSE$），以评估遥感影像的水平位置精度。通过这个实践，您将学习如何根据一组地面控制点的残差来推导出一个单一的、有意义的精度指标，并理解这个指标如何依据 ISO 19157 数据质量标准进行编码，从而为元数据提供关键的质量信息。",
            "id": "3816999",
            "problem": "一个遥感团队将一幅多光谱卫星影像地理配准到一个投影米制坐标参考系统。为了评估用于环境建模的水平位置精度，他们采集了通过高精度全球导航卫星系统 (GNSS) 测量的地面控制点，并计算了影像导出位置与 GNSS 参考位置之间的残差向量。国际标准化组织 (ISO) 标准 $19157$ 定义了一个名为“位置精度”的数据质量元素，其定量结果必须是一个带有单位的标量值，且适合元数据编码。\n\n从基本欧几里得几何和作为随机误差大小估计量的均方误差的定义出发，推导出一个单一标量精度统计量，该统计量在水平误差是无偏的、点间独立的、且在两个平面轴上是各向同性的假设下是合适的。然后根据以下残差计算该统计量（每个残差 $i$ 以米为单位，表示为 $(dx_i, dy_i)$）：\n\n- $i=1$: $(0.35,-0.42)$\n- $i=2$: $(-0.28,0.31)$\n- $i=3$: $(0.12,-0.08)$\n- $i=4$: $(-0.50,-0.55)$\n- $i=5$: $(0.18,0.26)$\n- $i=6$: $(-0.04,0.10)$\n- $i=7$: $(0.67,-0.73)$\n- $i=8$: $(-0.22,-0.19)$\n- $i=9$: $(0.05,0.02)$\n- $i=10$: $(-0.39,0.44)$\n\n在 ISO $19157$ 框架下，该标量将作为“位置精度”（绝对外部位置精度）的定量结果进行编码，单位为米。报告需要编码的最终数值。答案以米为单位表示，并四舍五入到四位有效数字。",
            "solution": "该问题经评估是有效的。它在科学上基于统计学和大地测量学原理，提法得当，数据充分，约束明确，且语言客观。任务是推导并计算一个标准的位置精度度量。\n\n问题要求从一组 $N$ 个水平残差向量 $\\mathbf{r}_i = (dx_i, dy_i)$（其中 $i = 1, \\dots, N$）中推导出一个单一标量精度统计量。推导必须基于基本欧几里得几何和均方误差 (MSE) 的定义，并遵循误差是无偏、独立和各向同性的假设。\n\n根据欧几里得几何，每个点 $i$ 的误差大小，即径向误差 $e_i$，是其残差向量的欧几里得范数：\n$$e_i = \\sqrt{dx_i^2 + dy_i^2}$$\n这表示影像导出位置与真实地面位置之间的直线距离。\n\n问题指定使用均方误差的概念。第 $i$ 个点的误差平方是 $e_i^2$：\n$$e_i^2 = dx_i^2 + dy_i^2$$\n这 $N$ 个点的均方误差是这些单个误差平方的算术平均值。在此背景下，它是径向均方误差，我们可以表示为 $MSRE$。\n$$MSRE = \\frac{1}{N} \\sum_{i=1}^{N} e_i^2 = \\frac{1}{N} \\sum_{i=1}^{N} (dx_i^2 + dy_i^2)$$\n误差是无偏的（即总体平均误差为零）这一假设，证明了相对于参考值 $0$ 计算 MSE 是合理的。点间独立的假设验证了以这种方式对误差平方进行求和的有效性。各向同性（即所有方向上的误差方差相等）的假设是该统计量通常被解释时的一个条件，但并非其计算所严格要求。\n\n$MSRE$ 统计量的单位是长度的平方（例如，平方米）。ISO $19157$ 要求一个与原始测量值单位相同（米）的标量统计量。为此，我们取 $MSRE$ 的平方根。得到的量是径向误差的均方根误差，记为 $RMSE_r$：\n$$RMSE_r = \\sqrt{MSRE} = \\sqrt{\\frac{1}{N} \\sum_{i=1}^{N} (dx_i^2 + dy_i^2)}$$\n该统计量通常被称为水平或总 RMSE，是地理空间应用中位置精度的标准单值度量，并满足问题的所有要求。\n\n我们现在根据给定的数据计算这个值。我们有 $N=10$ 个残差向量。首先，我们计算分量平方的和，$\\sum dx_i^2$ 和 $\\sum dy_i^2$。\n\n给定的残差 $(dx_i, dy_i)$ 以米为单位是：\n1: $(0.35, -0.42)$\n2: $(-0.28, 0.31)$\n3: $(0.12, -0.08)$\n4: $(-0.50, -0.55)$\n5: $(0.18, 0.26)$\n6: $(-0.04, 0.10)$\n7: $(0.67, -0.73)$\n8: $(-0.22, -0.19)$\n9: $(0.05, 0.02)$\n10: $(-0.39, 0.44)$\n\n$dx$ 分量的平方和是：\n$$ \\sum_{i=1}^{10} dx_i^2 = (0.35)^2 + (-0.28)^2 + (0.12)^2 + (-0.50)^2 + (0.18)^2 + (-0.04)^2 + (0.67)^2 + (-0.22)^2 + (0.05)^2 + (-0.39)^2 $$\n$$ \\sum_{i=1}^{10} dx_i^2 = 0.1225 + 0.0784 + 0.0144 + 0.2500 + 0.0324 + 0.0016 + 0.4489 + 0.0484 + 0.0025 + 0.1521 = 1.1512 $$\n\n$dy$ 分量的平方和是：\n$$ \\sum_{i=1}^{10} dy_i^2 = (-0.42)^2 + (0.31)^2 + (-0.08)^2 + (-0.55)^2 + (0.26)^2 + (0.10)^2 + (-0.73)^2 + (-0.19)^2 + (0.02)^2 + (0.44)^2 $$\n$$ \\sum_{i=1}^{10} dy_i^2 = 0.1764 + 0.0961 + 0.0064 + 0.3025 + 0.0676 + 0.0100 + 0.5329 + 0.0361 + 0.0004 + 0.1936 = 1.4220 $$\n\n径向误差平方总和是：\n$$ \\sum_{i=1}^{10} e_i^2 = \\sum_{i=1}^{10} dx_i^2 + \\sum_{i=1}^{10} dy_i^2 = 1.1512 + 1.4220 = 2.5732 $$\n\n现在我们使用 $N=10$ 计算 $RMSE_r$：\n$$ RMSE_r = \\sqrt{\\frac{2.5732}{10}} = \\sqrt{0.25732} \\approx 0.50726718... $$\n\n问题要求最终答案报告至四位有效数字。前四位有效数字是 $5$、$0$、$7$、$2$。第五位有效数字是 $6$，大于或等于 $5$，因此我们将第四位有效数字进一位。\n$$ RMSE_r \\approx 0.5073 $$\n这就是要以米为单位进行编码的单一标量精度统计量。",
            "answer": "$$\\boxed{0.5073}$$"
        },
        {
            "introduction": "在评估了数据的空间质量之后，记录其基本属性同样至关重要，而时间信息是其中最关键的维度之一。卫星仪器通常以特定的时间系统（如 GPS 时间）记录观测时刻，这种格式不便于直接使用和跨平台共享。为了确保数据的互操作性和可复现性，我们必须将其转换为世界协调时（$UTC$）并采用如 ISO 8601 这样的国际标准格式进行编码。本练习将带您深入研究不同时间系统之间的转换原理，实践从原始的 GPS 秒数计算出标准的 $UTC$ 时间，这是处理原始遥感数据和生成合规元数据的核心技能。",
            "id": "3817009",
            "problem": "一台用于遥感的星载成像光谱仪，其生成的采集时间以从 GPS 纪元起算的全球定位系统（GPS）秒数表示。其 Level-1 级产品必须根据国际标准化组织（ISO）19115 元数据标准进行记录，并使用协调世界时（UTC）的 ISO 8601 日期时间编码，具体格式为 $YYYY$-$MM$-$DD$T$hh$:$mm$:$ss$Z$。该仪器报告的采集时间戳为 $t_{\\mathrm{GPS}} = 1{,}284{,}035{,}218$ 秒，数据集声明的 GPS–UTC 偏移量为 $N_{\\mathrm{leap}} = 18$ 闰秒。\n\n请从基本定义出发，推导 GPS 时间与 UTC 时间之间的关系。然后，计算与 $t_{\\mathrm{GPS}}$ 对应的 UTC 时刻，并将其以要求的格式 $YYYY$-$MM$-$DD$T$hh$:$mm$:$ss$Z$ 写入元数据字段。最后，将该 UTC 时刻转换为修正儒略日（MJD），并提供四舍五入到七位有效数字的值。最终数值以天为单位表示。\n\n使用以下经过充分验证的事实作为推导的基础：\n- GPS 纪元为 $1980$-$01$-$06$T$00$:$00$:$00$Z$。\n- GPS 时间是连续的，没有闰秒，并且在任何时刻都满足 $t_{\\mathrm{GPS}} - t_{\\mathrm{UTC}} = N_{\\mathrm{leap}}$。\n- UNIX 纪元为 $1970$-$01$-$01$T$00$:$00$:$00$Z$，从 UNIX 纪元到 GPS 纪元的偏移量为 $t_{0} = 315{,}964{,}800$ 秒。\n- 修正儒略日与 UNIX 时间的关系为 $\\mathrm{MJD} = \\mathrm{MJD}_{0} + \\frac{t_{\\mathrm{UNIX}}}{86400}$，其中 $\\mathrm{MJD}_{0} = 40{,}587$ 对应于 $1970$-$01$-$01$T$00$:$00$:$00$Z$，而 $86400$ 是一天中的秒数。\n\n将最终的 MJD 值四舍五入至七位有效数字，并以天为单位表示。除非元数据编码的指定格式明确要求，否则不应进行其他舍入。",
            "solution": "解答过程包括三个步骤：首先，我们确定给定的 UTC 时刻自 UNIX 纪元以来经过的秒数。其次，我们将这个连续的秒数转换为标准的 ISO 8601 日历日期和时间格式。第三，我们将连续的秒数转换为修正儒略日（MJD）。\n\n**1. 从 UNIX 纪元推导 UTC 时间（以秒为单位）**\n\n问题给出了 GPS 时间 $t_{\\mathrm{GPS}}$ 和 UTC 时间 $t_{\\mathrm{UTC}}$ 之间的关系：$t_{\\mathrm{GPS}} - t_{\\mathrm{UTC}} = N_{\\mathrm{leap}}$。在此背景下，$t_{\\mathrm{GPS}}$ 表示自 GPS 纪元（$1980$-$01$-$06$T$00$:$00$:$00$Z$）以来连续计数的秒数。术语 $t_{\\mathrm{UTC}}$ 应被解释为从同一 GPS 纪元开始，在 UTC 时间尺度上对应的连续国际单位制（SI）秒数。因此，自 GPS 纪元以来经过的 UTC 秒数为：\n$$ \\Delta t_{\\mathrm{UTC, from \\ GPS \\ epoch}} = t_{\\mathrm{GPS}} - N_{\\mathrm{leap}} $$\n代入给定值：\n$$ \\Delta t_{\\mathrm{UTC, from \\ GPS \\ epoch}} = 1{,}284{,}035{,}218 - 18 = 1{,}284{,}035{,}200 \\text{ seconds} $$\n\n为了找到相对于 UNIX 纪元（$1970$-$01$-$01$T$00$:$00$:$00$Z$）的时间，我们必须加上 UNIX 纪元和 GPS 纪元之间的偏移量。GPS 纪元发生在 UNIX 纪元之后 $t_{0} = 315{,}964{,}800$ 秒。自 UNIX 纪元以来经过的 UTC 总秒数，记为 $t_{\\mathrm{UNIX}}$，是此偏移量与自 GPS 纪元以来经过的时间之和。\n$$ t_{\\mathrm{UNIX}} = t_{0} + \\Delta t_{\\mathrm{UTC, from \\ GPS \\ epoch}} $$\n$$ t_{\\mathrm{UNIX}} = 315{,}964{,}800 + 1{,}284{,}035{,}200 = 1{,}600{,}000{,}000 \\text{ seconds} $$\n这个值 $t_{\\mathrm{UNIX}}$ 就是对应于卫星观测的 UNIX 时间戳。\n\n**2. 转换为 ISO 8601 UTC 表示法**\n\n现在我们将 $t_{\\mathrm{UNIX}} = 1{,}600{,}000{,}000$ 秒转换为 $YYYY$-$MM$-$DD$T$hh$:$mm$:$ss$Z$ 格式。首先，我们将总秒数分为完整的天数和当天内剩余的秒数。一天包含 $86400$ 秒。\n自 UNIX 纪元以来经过的完整天数是：\n$$ N_{\\mathrm{days}} = \\left\\lfloor \\frac{t_{\\mathrm{UNIX}}}{86400} \\right\\rfloor = \\left\\lfloor \\frac{1{,}600{,}000{,}000}{86400} \\right\\rfloor = \\lfloor 18518.5185... \\rfloor = 18518 \\text{ days} $$\n当天已过的秒数是：\n$$ S_{\\mathrm{day}} = t_{\\mathrm{UNIX}} \\pmod{86400} = 1{,}600{,}000{,}000 \\pmod{86400} = 44800 \\text{ seconds} $$\n接下来，我们将 $S_{\\mathrm{day}}$ 转换为小时、分钟和秒：\n- 小时 ($hh$)：$\\left\\lfloor \\frac{44800}{3600} \\right\\rfloor = 12$\n- 剩余秒数：$44800 - 12 \\times 3600 = 1600$\n- 分钟 ($mm$)：$\\left\\lfloor \\frac{1600}{60} \\right\\rfloor = 26$\n- 剩余秒数 ($ss$)：$1600 - 26 \\times 60 = 40$\n当天的时间是 $12$:$26$:$40$ UTC。\n\n为了确定日期，我们计算 UNIX 纪元日 $1970$-$01$-$01$ 之后 $18518$ 天对应的日历日期。从 $1970$ 年到 $2019$ 年共计 $50$ 年。此区间的闰年有 $1972$、$1976$、$1980$、$1984$、$1988$、$1992$、$1996$、$2000$、$2004$、$2008$、$2012$ 和 $2016$ 年。共有 $12$ 个闰年。从 $1970$-$01$-$01$ 到 $2019$-$12$-$31$ 的天数为 $50 \\times 365 + 12 = 18262$ 天。\n进入 $2020$ 年的天数是 $18518 - 18262 = 256$ 天。因此，当天是 $2020$ 年的第 $257$ 天。\n$2020$ 年是闰年。各月份天数如下：一月 ($31$)、二月 ($29$)、三月 ($31$)、四月 ($30$)、五月 ($31$)、六月 ($30$)、七月 ($31$)、八月 ($31$)。到八月底的累计天数为 $244$ 天。\n在九月的天数是 $257 - 244 = 13$。\n因此，日期是 $2020$-$09$-$13$。\n\n结合日期和时间，ISO 8601 表示法为 $2020$-$09$-$13$T$12$:$26$:$40$Z$。\n\n**3. 转换为修正儒略日（MJD）**\n\n问题提供了将 UNIX 时间戳转换为 MJD 的公式：\n$$ \\mathrm{MJD} = \\mathrm{MJD}_{0} + \\frac{t_{\\mathrm{UNIX}}}{86400} $$\n代入已知值：\n$$ \\mathrm{MJD} = 40587 + \\frac{1{,}600{,}000{,}000}{86400} $$\n$$ \\mathrm{MJD} = 40587 + 18518.5185185... $$\n$$ \\mathrm{MJD} = 59105.5185185... \\text{ days} $$\n问题要求将此值四舍五入到七位有效数字。该数字的前七位是 $5, 9, 1, 0, 5, 5, 1$。第八位是 $8$，由于 $\\ge 5$，所以我们将第七位数字 ($1$) 向上取整为 $2$。\n$$ \\mathrm{MJD}_{\\mathrm{rounded}} = 59105.52 \\text{ days} $$\n这就是最终的数值。",
            "answer": "$$\n\\boxed{59105.52}\n$$"
        },
        {
            "introduction": "除了位置和时间，元数据还必须解释如何解读数据文件中的具体数值。为了高效存储和传输，海量的科学数据通常会被“打包”成整数格式。如果不了解解码规则，这些数值本身是毫无意义的。气候与预报（CF）元数据约定等标准为此提供了解决方案，通过 `scale_factor` 和 `add_offset` 等属性，精确定义了将存储的整数值恢复为其真实物理量（例如，以开尔文为单位的温度）所需的线性变换。这个最终的实践将向您展示如何应用这些元数据属性来“解包”数据，从而正确地还原物理测量值，确保数据的准确解译。",
            "id": "3817005",
            "problem": "一个网络通用数据格式（netCDF）文件遵循气候与预报（CF）元数据约定，并包含一个表示海面温度的压缩整数变量。该变量名为“sst”，以有符号$16$位整数形式存储。CF压缩属性提供如下：属性“scale\\_factor”等于$0.01$，属性“add\\_offset”等于$175.00$。“sst”的“units”属性为“K”（开尔文），与Unidata单位（UDUNITS）库一致，表示解压后的物理值单位为开尔文。在时间$t_{0}$，像素索引$(i,j)=(512,1024)$处的压缩值为$x_{\\mathrm{packed}}=12485$。\n\n从CF数据压缩的定义和UDUNITS摄氏度-开尔文关系的定义出发，执行以下操作：\n\n- 解压该值，以获得在$(i,j,t_{0})$处以开尔文为单位的物理海面温度$x_{\\mathrm{unpacked}}$。\n- 将解压后的温度从开尔文转换为摄氏度。\n- 将最终的摄氏温度四舍五入到四位有效数字，并以摄氏度表示答案。\n\n此外，根据CF元数据标准，确定在将数据解压为浮点值后，为反映变量“sst”的单位从开尔文转换为摄氏度而需要对元数据进行的必要更新。用文字描述这些更新，而不是通过计算。\n\n您最终提交的答案必须是对应于$(i,j,t_{0})$处温度的单个实值数，以摄氏度为单位，并四舍五入到四位有效数字。请勿在最终数字答案框中包含单位。",
            "solution": "首先，我们根据气候与预报（CF）元数据约定的解压公式来计算真实的物理值。CF元数据约定使用两个属性`scale_factor`和`add_offset`定义了压缩值（$x_{\\mathrm{packed}}$）和解压后的物理值（$x_{\\mathrm{unpacked}}$）之间的关系，如下所示：\n$$x_{\\mathrm{unpacked}} = x_{\\mathrm{packed}} \\times \\text{scale\\_factor} + \\text{add\\_offset}$$\n问题提供了以下值：\n- 在指定位置，海面温度变量“sst”的压缩值为$x_{\\mathrm{packed}} = 12485$。\n- `scale_factor`属性为$0.01$。\n- `add_offset`属性为$175.00$。\n\n将这些值代入公式，得出以开尔文（$K$）为单位的解压后温度，这由元数据中的`\"units\"`属性指定：\n$$x_{\\mathrm{unpacked}} = 12485 \\times 0.01 + 175.00$$\n$$x_{\\mathrm{unpacked}} = 124.85 + 175.00$$\n$$x_{\\mathrm{unpacked}} = 299.85$$\n因此，以开尔文为单位的海面温度是$T_{\\mathrm{K}} = 299.85 \\, \\mathrm{K}$。\n\n接下来，我们将此温度从开尔文转换为摄氏度（$^{\\circ}\\mathrm{C}$）。开尔文温标（$T_{\\mathrm{K}}$）和摄氏温标（$T_{^{\\circ}\\mathrm{C}}$）之间的关系定义为：\n$$T_{^{\\circ}\\mathrm{C}} = T_{\\mathrm{K}} - 273.15$$\n这个定义是标准化的，并且是诸如UDUNITS等库中进行转换的基础。\n\n将解压后的开尔文温度代入此方程：\n$$T_{^{\\circ}\\mathrm{C}} = 299.85 - 273.15$$\n$$T_{^{\\circ}\\mathrm{C}} = 26.70$$\n\n问题要求最终答案四舍五入到四位有效数字。计算值为$26.70$。数字$2$、$6$、$7$和$0$都是有效数字。末尾的零是有效的，因为减法涉及的两个数都精确到小数点后两位，所以结果也精确到小数点后两位。因此，值$26.70$已经恰好有四位有效数字，无需进一步四舍五入。\n\n最后，问题要求说明为反映单位转换而需要进行的元数据更新。如果创建了一个包含摄氏度海面温度的新变量（或者如果原始变量被覆盖），根据CF约定，需要进行以下元数据更改：\n1.  **更新`units`属性**：变量“sst”的`units`属性必须从`\"K\"`更改为表示摄氏度的字符串。一个标准且合规的选择是`\"Celsius\"`或`\"degree_C\"`。\n2.  **移除压缩属性**：`scale_factor`和`add_offset`属性专用于压缩数据。由于新数据是解压后的浮点值，这些属性不再适用，必须从变量的元数据中移除。\n3.  **更新数据类型**：此操作中隐含了变量数据类型的更改。它将从有符号$16$位整数转换为浮点类型，例如$32$位浮点数（`float`）或$64$位浮点数（`double`），以准确存储解压后的值。\n\n所要求的数值答案是摄氏温度，四舍五入到四位有效数字。",
            "answer": "$$\n\\boxed{26.70}\n$$"
        }
    ]
}
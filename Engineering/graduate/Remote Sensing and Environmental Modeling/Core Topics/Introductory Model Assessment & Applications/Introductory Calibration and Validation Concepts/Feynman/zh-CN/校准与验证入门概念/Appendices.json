{
    "hands_on_practices": [
        {
            "introduction": "将遥感传感器的原始数字信号（Digital Number, DN）转换为具有物理意义的辐射率，是数据处理的首要步骤。这个转换过程依赖于一个精确的定标函数。本练习将探讨一个实际的非线性定标模型，并引入“单调性”这一关键概念，以确保传感器在其整个动态范围内响应的物理一致性。通过分析传感器的增益、偏移和非线性项，你将学会评估定标函数的有效性。",
            "id": "3823020",
            "problem": "一台卫星成像光谱仪产生原始数字计数值 $D$，通过一个连接 $D$ 与 $L$ 的仪器传递函数 $f$，将其转换为传感器端光谱辐亮度 $L$。对于平滑的 $f$，在 $D=0$ 处的二阶泰勒展开提供了一个可行的定标模型，其主要项是偏移量 $o = f(0)$、线性增益 $g = f'(0)$ 和二次非线性系数 $\\alpha = \\frac{1}{2} f''(0)$，从而得到一个包含微小非线性的定标映射。在实验室表征中，估计了以下参数：线性增益 $g = 2.4 \\times 10^{-5}$ 瓦特/平方米/球面度/计数，偏移量 $o = 1.2 \\times 10^{-3}$ 瓦特/平方米/球面度，以及二次系数 $\\alpha = -1.1 \\times 10^{-10}$ 瓦特/平方米/球面度/计数平方。考虑一个像素，其原始计数值为 $D = 38500$，传感器动态范围定义在 $D \\in [0, D_{\\max}]$ 上，其中 $D_{\\max} = 65535$。从二阶泰勒展开模型和可微映射的单调性定义出发，推导经定标的传感器端辐亮度 $L(D)$ 以及定标映射在 $[0, D_{\\max}]$ 上单调递增的条件。计算给定 $D$ 值的定标辐亮度，然后计算最小斜率 $m = \\min_{D \\in [0, D_{\\max}]} \\frac{dL}{dD}$ 以评估单调性是否得以保持。将 $m$ 的值作为最终答案，单位为瓦特/平方米/球面度/计数。将最终答案四舍五入到四位有效数字。将 $L$ 以瓦特/平方米/球面度表示，将 $m$ 以瓦特/平方米/球面度/计数表示。",
            "solution": "问题提供了一个二阶泰勒展开作为卫星传感器定标的模型。传感器端光谱辐亮度 $L$ 通过函数 $L = f(D)$ 与原始数字计数值 $D$ 相关。该模型是此函数在 $D=0$ 附近的一个近似：\n$$L(D) \\approx f(0) + f'(0)D + \\frac{f''(0)}{2!}D^2$$\n问题根据物理参数定义了这些系数：偏移量 $o = f(0)$，线性增益 $g = f'(0)$，以及二次非线性系数 $\\alpha = \\frac{1}{2}f''(0)$。将这些定义代入展开式，得到明确的定标模型：\n$$L(D) = o + gD + \\alpha D^2$$\n这就是所求的经定标的传感器端辐亮度 $L(D)$ 的表达式。\n\n接下来，我们推导定标映射单调递增的条件。一个可微函数在一个区间上是单调递增的，如果它的一阶导数在该区间内处处非负。我们关心的定义域是传感器的动态范围，即 $D \\in [0, D_{\\max}]$。我们计算 $L(D)$ 关于 $D$ 的一阶导数：\n$$\\frac{dL}{dD} = \\frac{d}{dD}(o + gD + \\alpha D^2) = g + 2\\alpha D$$\n单调性的条件是对于所有 $D \\in [0, D_{\\max}]$，都有 $\\frac{dL}{dD} \\ge 0$。导数是 $D$ 的一个线性函数，斜率为 $2\\alpha$。给定的 $\\alpha$ 值为 $-1.1 \\times 10^{-10}$ 瓦特/平方米/球面度/计数平方，这是一个负值。因此，函数 $\\frac{dL}{dD}$ 是 $D$ 的一个递减函数。对于闭区间上的递减函数，其最小值在区间的右端点达到。因此，条件 $\\frac{dL}{dD} \\ge 0$ 在整个区间上成立的充要条件是它在 $D = D_{\\max}$ 处成立。所以，定标映射在 $[0, D_{\\max}]$ 上单调递增的条件是：\n$$g + 2\\alpha D_{\\max} \\ge 0$$\n现在，我们计算原始计数值为 $D = 38500$ 的像素的定标辐亮度。给定的参数是：\n$o = 1.2 \\times 10^{-3}$ W m$^{-2}$ sr$^{-1}$\n$g = 2.4 \\times 10^{-5}$ W m$^{-2}$ sr$^{-1}$ count$^{-1}$\n$\\alpha = -1.1 \\times 10^{-10}$ W m$^{-2}$ sr$^{-1}$ count$^{-2}$\n将这些值和 $D = 38500$ 代入定标方程：\n$$L(38500) = (1.2 \\times 10^{-3}) + (2.4 \\times 10^{-5})(38500) + (-1.1 \\times 10^{-10})(38500)^2$$\n我们计算各项：\n$$(2.4 \\times 10^{-5})(38500) = 0.924$$\n$$(-1.1 \\times 10^{-10})(38500)^2 = (-1.1 \\times 10^{-10})(1482250000) \\approx -0.1630475$$\n$$L(38500) \\approx 1.2 \\times 10^{-3} + 0.924 - 0.1630475 = 0.0012 + 0.924 - 0.1630475 = 0.7621525$$\n因此，定标辐亮度约为 $0.7621525$ W m$^{-2}$ sr$^{-1}$。\n\n最后，我们需要计算最小斜率 $m = \\min_{D \\in [0, D_{\\max}]} \\frac{dL}{dD}$。根据单调性分析，斜率 $\\frac{dL}{dD} = g + 2\\alpha D$ 是 $D$ 的递减函数，因为 $\\alpha  0$。因此，它在区间 $[0, D_{\\max}]$ 上的最小值在 $D = D_{\\max}$ 处取得。\n$$m = g + 2\\alpha D_{\\max}$$\n我们代入给定值，其中 $D_{\\max} = 65535$：\n$$m = (2.4 \\times 10^{-5}) + 2(-1.1 \\times 10^{-10})(65535)$$\n$$m = 2.4 \\times 10^{-5} - (2.2 \\times 10^{-10})(65535)$$\n$$m = 2.4 \\times 10^{-5} - 0.0000144177$$\n$$m = 2.4 \\times 10^{-5} - 1.44177 \\times 10^{-5}$$\n$$m = (2.4 - 1.44177) \\times 10^{-5}$$\n$$m = 0.95823 \\times 10^{-5} = 9.5823 \\times 10^{-6}$$\n$m$ 的单位是 W m$^{-2}$ sr$^{-1}$ count$^{-1}$。问题要求将最终答案四舍五入到四位有效数字。\n$$m \\approx 9.582 \\times 10^{-6}$$\n由于 $m > 0$，单调性条件在传感器的整个动态范围内确实得到满足。",
            "answer": "$$\\boxed{9.582 \\times 10^{-6}}$$"
        },
        {
            "introduction": "应用定标模型得到物理量后，下一个关键步骤是验证（Validation）：即量化定标后的数据与可信的“地面真值”的匹配程度。本练习介绍了三个核心统计指标——均方根误差（RMSE）、偏差（Bias）和决定系数（$R^2$），并要求你超越单一指标进行综合判断。通过这个练习，你将深刻理解为何高相关性（高 $R^2$）不等于高精度，这是数据分析中的一个根本性课题。",
            "id": "3823042",
            "problem": "针对一个测量大气层顶光谱辐亮度的星载成像光谱仪通道，进行了一次实验室辐射定标实验。一个参考系统在六个工作点上提供了可溯源的辐亮度值，光谱仪提供定标后的输出，并与参考值进行比较。配对数据如下（辐亮度单位为 W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$）：\n\n- 对1：参考辐亮度 $L_{\\text{ref}} = 5.00$，定标测量值 $L_{\\text{cal}} = 5.40$。\n- 对2：参考辐亮度 $L_{\\text{ref}} = 6.00$，定标测量值 $L_{\\text{cal}} = 6.23$。\n- 对3：参考辐亮度 $L_{\\text{ref}} = 7.50$，定标测量值 $L_{\\text{cal}} = 7.75$。\n- 对4：参考辐亮度 $L_{\\text{ref}} = 9.00$，定标测量值 $L_{\\text{cal}} = 9.14$。\n- 对5：参考辐亮度 $L_{\\text{ref}} = 10.50$，定标测量值 $L_{\\text{cal}} = 10.73$。\n- 对6：参考辐亮度 $L_{\\text{ref}} = 12.00$，定标测量值 $L_{\\text{cal}} = 12.15$。\n\n使用定标与验证中采用的标准定义，计算参考辐亮度与定标辐亮度之间的均方根误差（RMSE）、定义为差值 $L_{\\text{cal}} - L_{\\text{ref}}$ 平均值的加性偏差，以及决定系数（$R^2$）。然后，解释高 $R^2$ 值是否必然保证良好的定标质量，并根据计算出的指标简要论证您的结论。\n\n将所有三个指标四舍五入至四位有效数字。以 W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$ 为单位表示 RMSE 和偏差；将 $R^2$ 表示为无单位小数。您的最终答案必须按 RMSE、偏差、$R^2$ 的顺序列出这三个值。",
            "solution": "该问题要求根据一组给定的配对数据计算三个统计指标——均方根误差（RMSE）、加性偏差和决定系数（$R^2$），并对这些指标进行后续解释。\n\n设参考辐亮度值由集合 $\\{x_i\\}$ 表示，定标测量值由 $\\{y_i\\}$ 表示，其中 $i$ 的范围从 1 到 $n$。数据对的数量为 $n=6$。辐亮度的单位是 W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$。\n\n给定的数据是：\n$x = \\{5.00, 6.00, 7.50, 9.00, 10.50, 12.00\\}$\n$y = \\{5.40, 6.23, 7.75, 9.14, 10.73, 12.15\\}$\n\n首先，我们计算每对数据的差值（误差），$d_i = y_i - x_i$：\n$d_1 = 5.40 - 5.00 = 0.40$\n$d_2 = 6.23 - 6.00 = 0.23$\n$d_3 = 7.75 - 7.50 = 0.25$\n$d_4 = 9.14 - 9.00 = 0.14$\n$d_5 = 10.73 - 10.50 = 0.23$\n$d_6 = 12.15 - 12.00 = 0.15$\n\n问题将加性偏差定义为这些差值的平均值。其公式为：\n$$ \\text{Bias} = \\frac{1}{n} \\sum_{i=1}^{n} (y_i - x_i) = \\frac{1}{n} \\sum_{i=1}^{n} d_i $$\n代入数值：\n$$ \\text{Bias} = \\frac{1}{6} (0.40 + 0.23 + 0.25 + 0.14 + 0.23 + 0.15) = \\frac{1.40}{6} \\approx 0.23333... $$\n四舍五入至四位有效数字，偏差为 $0.2333$ W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$。\n\n接下来，我们计算均方根误差（RMSE）。RMSE 的公式为：\n$$ \\text{RMSE} = \\sqrt{\\frac{1}{n} \\sum_{i=1}^{n} (y_i - x_i)^2} = \\sqrt{\\frac{1}{n} \\sum_{i=1}^{n} d_i^2} $$\n我们首先计算差值的平方，$d_i^2$：\n$d_1^2 = (0.40)^2 = 0.1600$\n$d_2^2 = (0.23)^2 = 0.0529$\n$d_3^2 = (0.25)^2 = 0.0625$\n$d_4^2 = (0.14)^2 = 0.0196$\n$d_5^2 = (0.23)^2 = 0.0529$\n$d_6^2 = (0.15)^2 = 0.0225$\n平方差之和为：\n$$ \\sum_{i=1}^{n} d_i^2 = 0.1600 + 0.0529 + 0.0625 + 0.0196 + 0.0529 + 0.0225 = 0.3704 $$\n现在我们可以计算 RMSE：\n$$ \\text{RMSE} = \\sqrt{\\frac{0.3704}{6}} = \\sqrt{0.0617333...} \\approx 0.2484619... $$\n四舍五入至四位有效数字，RMSE 为 $0.2485$ W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$。\n\n最后，我们计算决定系数 $R^2$。它是 $x$ 和 $y$ 之间皮尔逊相关系数的平方。其公式为：\n$$ R^2 = \\left( \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})(y_i - \\bar{y})}{\\sqrt{\\sum_{i=1}^{n} (x_i - \\bar{x})^2 \\sum_{i=1}^{n} (y_i - \\bar{y})^2}} \\right)^2 = \\frac{SS_{xy}^2}{SS_{xx} SS_{yy}} $$\n其中 $SS$ 表示平方和。我们首先计算平均值 $\\bar{x}$ 和 $\\bar{y}$：\n$$ \\sum_{i=1}^{n} x_i = 5.00 + 6.00 + 7.50 + 9.00 + 10.50 + 12.00 = 50.00 \\implies \\bar{x} = \\frac{50.00}{6} $$\n$$ \\sum_{i=1}^{n} y_i = 5.40 + 6.23 + 7.75 + 9.14 + 10.73 + 12.15 = 51.40 \\implies \\bar{y} = \\frac{51.40}{6} $$\n接下来，我们使用计算公式计算平方和 $SS_{xx}$、$SS_{yy}$ 以及交叉乘积和 $SS_{xy}$：\n$SS_{xx} = \\sum x_i^2 - \\frac{(\\sum x_i)^2}{n}$\n$SS_{yy} = \\sum y_i^2 - \\frac{(\\sum y_i)^2}{n}$\n$SS_{xy} = \\sum x_i y_i - \\frac{(\\sum x_i)(\\sum y_i)}{n}$\n\n$$ \\sum x_i^2 = 5^2 + 6^2 + 7.5^2 + 9^2 + 10.5^2 + 12^2 = 25+36+56.25+81+110.25+144 = 452.5 $$\n$$ \\sum y_i^2 = 5.4^2 + 6.23^2 + 7.75^2 + 9.14^2 + 10.73^2 + 12.15^2 = 29.16+38.8129+60.0625+83.5396+115.1329+147.6225 = 474.3304 $$\n$$ \\sum x_i y_i = (5)(5.4)+(6)(6.23)+(7.5)(7.75)+(9)(9.14)+(10.5)(10.73)+(12)(12.15) = 27+37.38+58.125+82.26+112.665+145.8 = 463.23 $$\n\n现在，代入平方和公式：\n$$ SS_{xx} = 452.5 - \\frac{50^2}{6} = 452.5 - 416.666... = 35.833... $$\n$$ SS_{yy} = 474.3304 - \\frac{51.4^2}{6} = 474.3304 - 440.3266... = 34.00373... $$\n$$ SS_{xy} = 463.23 - \\frac{(50)(51.4)}{6} = 463.23 - 428.333... = 34.8966... $$\n\n最后，我们计算 $R^2$：\n$$ R^2 = \\frac{(34.8966...)^2}{(35.833...)(34.00373...)} = \\frac{1217.777...}{1218.463...} \\approx 0.999436... $$\n四舍五入至四位有效数字，$R^2$ 为 $0.9994$。\n\n解释：\n高 $R^2$ 值并不一定保证良好的定标质量。决定系数 $R^2$ 衡量的是因变量方差中可由自变量预测的比例。在此背景下，$R^2$ 值为 $0.9994$ 表明定标测量值（$L_{\\text{cal}}$）与参考辐亮度（$L_{\\text{ref}}$）之间存在极强的线性关系。这意味着传感器响应是高度线性和可预测的。\n\n然而，$R^2$ 对加性偏差和乘性偏差不敏感。良好的定标质量要求高精密度（低随机误差）和高准确度（低系统误差）。我们计算出的 $0.2333$ W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$ 的偏差揭示了一个系统误差：定标测量值平均高于真实参考值。$0.2485$ W m$^{-2}$ sr$^{-1}$ $\\mu$m$^{-1}$ 的 RMSE 量化了总误差，该误差主要由这个系统偏差主导。尽管关系是线性的（高 $R^2$），但数据点并不落在理想的 1:1 线上，而是落在一条有正向偏移的线上。因此，尽管 $R^2$ 值非常出色，但定标并不完美，并表现出一个需要校正的明显准确度问题（一个正偏差）。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.2485  0.2333  0.9994 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "验证的应用范围不仅限于辐射率这样的连续变量，也包括土地覆盖分类图等地学衍生产品。这个高级练习模拟了一个真实的验证场景，要求你使用统计上稳健的分层随机抽样设计来评估分类图的精度。通过解决这个问题，你将掌握如何构建经面积加权的混淆矩阵，并计算出能准确反映整个研究区域性能的精度指标。",
            "id": "3823016",
            "problem": "一个基于卫星的土地覆盖分类器被部署用于绘制一个区域的三个类别：针叶林 $C_{F}$、农田 $C_{A}$ 和开放水域 $C_{W}$。该分类器的概率输出已使用单调概率校准方法对高质量参考地图进行了校准，并且类别标签通过校准后的 $\\arg\\max$ 规则进行分配。为了在总体水平上根据参考地图验证校准后的分类，我们采用等层内样本量的分层简单随机抽样方法进行抽样。验证设计和观测结果如下。\n\n- 每个层中参考地图的总像素数为：\n  - 针叶林 $C_{F}$：$A_{F} = 3.6 \\times 10^{6}$ 像素。\n  - 农田 $C_{A}$：$A_{A} = 2.4 \\times 10^{6}$ 像素。\n  - 开放水域 $C_{W}$：$A_{W} = 1.2 \\times 10^{6}$ 像素。\n- 分别从 $C_{F}$、$C_{A}$ 和 $C_{W}$ 层中抽取分层样本，样本量分别为 $n_{F} = 20$、$n_{A} = 20$ 和 $n_{W} = 20$ 像素。\n- 对每个抽样像素，记录校准后分类器的预测类别，得到按参考层划分的以下跨类别计数（每个项目分别列出在给定参考层内预测为 $C_{F}$、预测为 $C_{A}$ 和预测为 $C_{W}$ 的数量）：\n  - 在参考层 $C_{F}$ ($n_{F} = 20$) 内：预测为 $C_{F} = 15$，预测为 $C_{A} = 4$，预测为 $C_{W} = 1$。\n  - 在参考层 $C_{A}$ ($n_{A} = 20$) 内：预测为 $C_{F} = 3$，预测为 $C_{A} = 14$，预测为 $C_{W} = 3$。\n  - 在参考层 $C_{W}$ ($n_{W} = 20$) 内：预测为 $C_{F} = 1$，预测为 $C_{A} = 2$，预测为 $C_{W} = 17$。\n\n使用分层抽样的基于设计的推理方法，通过适当加权每个抽样像素以代表其在参考层中占总体的份额，构建总体水平的混淆矩阵。然后，根据此混淆矩阵，使用精确率和召回率的标准定义计算 $C_{F}$、$C_{A}$ 和 $C_{W}$ 每个类别的 $F1$ 分数，并计算宏平均准确率，其定义为三个类别召回率（生产者准确率）的未加权平均值。\n\n在您的计算过程中提供每个类别的 $F1$ 分数和任何中间量，但最终数值答案仅报告宏平均准确率。将最终答案表示为无单位的小数，并四舍五入到四位有效数字。",
            "solution": "目标是计算宏平均准确率，其定义为各类别召回率（生产者准确率）的未加权平均值。这需要通过对分层随机样本的样本计数进行加权来构建总体水平的混淆矩阵。\n\n设三个土地覆盖类别为\n- $C_{F}$：针叶林\n- $C_{A}$：农田\n- $C_{W}$：开放水域\n\n参考地图各层具有以下总体大小（总像素数）：\n- $A_{F} = 3.6 \\times 10^{6}$\n- $A_{A} = 2.4 \\times 10^{6}$\n- $A_{W} = 1.2 \\times 10^{6}$\n总总体大小为 $A_{total} = A_{F} + A_{A} + A_{W} = (3.6 + 2.4 + 1.2) \\times 10^{6} = 7.2 \\times 10^{6}$ 像素。\n\n从每个层中抽取样本量相等的简单分层随机样本：\n- $n_{F} = 20$\n- $n_{A} = 20$\n- $n_{W} = 20$\n\n跨类别样本计数，记为 $n_{ij}$，其中 $i$ 是参考类别，$j$ 是预测类别，如下所示：\n- 在参考层 $C_{F}$ 内：$n_{FF} = 15$, $n_{FA} = 4$, $n_{FW} = 1$。\n- 在参考层 $C_{A}$ 内：$n_{AF} = 3$, $n_{AA} = 14$, $n_{AW} = 3$。\n- 在参考层 $C_{W}$ 内：$n_{WF} = 1$, $n_{WA} = 2$, $n_{WW} = 17$。\n\n为了估计总体水平的混淆矩阵，每个抽样像素的贡献必须按其所在层的总体大小与样本大小之比进行加权。层 $i$ 的权重为 $w_i = \\frac{A_i}{n_i}$。\n\n每个层的权重为：\n- $w_{F} = \\frac{A_{F}}{n_{F}} = \\frac{3.6 \\times 10^{6}}{20} = 1.8 \\times 10^{5}$\n- $w_{A} = \\frac{A_{A}}{n_{A}} = \\frac{2.4 \\times 10^{6}}{20} = 1.2 \\times 10^{5}$\n- $w_{W} = \\frac{A_{W}}{n_{W}} = \\frac{1.2 \\times 10^{6}}{20} = 0.6 \\times 10^{5} = 6 \\times 10^{4}$\n\n混淆矩阵中每个单元格 $(i, j)$ 的估计总体计数 $N_{ij}$ 计算如下：$N_{ij} = n_{ij} \\times w_i$。\n\n- 对于参考层 $C_{F}$：\n  - $N_{FF} = n_{FF} \\times w_{F} = 15 \\times (1.8 \\times 10^{5}) = 2.7 \\times 10^{6}$\n  - $N_{FA} = n_{FA} \\times w_{F} = 4 \\times (1.8 \\times 10^{5}) = 0.72 \\times 10^{6}$\n  - $N_{FW} = n_{FW} \\times w_{F} = 1 \\times (1.8 \\times 10^{5}) = 0.18 \\times 10^{6}$\n- 对于参考层 $C_{A}$：\n  - $N_{AF} = n_{AF} \\times w_{A} = 3 \\times (1.2 \\times 10^{5}) = 0.36 \\times 10^{6}$\n  - $N_{AA} = n_{AA} \\times w_{A} = 14 \\times (1.2 \\times 10^{5}) = 1.68 \\times 10^{6}$\n  - $N_{AW} = n_{AW} \\times w_{A} = 3 \\times (1.2 \\times 10^{5}) = 0.36 \\times 10^{6}$\n- 对于参考层 $C_{W}$：\n  - $N_{WF} = n_{WF} \\times w_{W} = 1 \\times (6 \\times 10^{4}) = 0.06 \\times 10^{6}$\n  - $N_{WA} = n_{WA} \\times w_{W} = 2 \\times (6 \\times 10^{4}) = 0.12 \\times 10^{6}$\n  - $N_{WW} = n_{WW} \\times w_{W} = 17 \\times (6 \\times 10^{4}) = 1.02 \\times 10^{6}$\n\n估计的总体混淆矩阵 $N$ 为（单位：像素）：\n$$\n\\begin{array}{c|ccc|c}\n\\text{参考} \\backslash \\text{预测}  C_{F}  C_{A}  C_{W}  \\text{行总计（参考）} \\\\\n\\hline\nC_{F}  2,700,000  720,000  180,000  3,600,000 \\\\\nC_{A}  360,000  1,680,000  360,000  2,400,000 \\\\\nC_{W}  60,000  120,000  1,020,000  1,200,000 \\\\\n\\hline\n\\text{列总计（预测）}  3,120,000  2,520,000  1,560,000  7,200,000\n\\end{array}\n$$\n根据此矩阵，我们计算每个类别的召回率（生产者准确率）、精确率（用户准确率）和 F1 分数。对于类别 $i$，这些指标为：\n- 召回率：$R_i = \\frac{N_{ii}}{\\sum_{j} N_{ij}}$\n- 精确率：$P_i = \\frac{N_{ii}}{\\sum_{k} N_{ki}}$\n- F1 分数：$F1_i = 2 \\frac{P_i R_i}{P_i + R_i}$\n\n对于类别 $C_{F}$：\n- 召回率 $R_{F} = \\frac{N_{FF}}{A_{F}} = \\frac{2,700,000}{3,600,000} = \\frac{27}{36} = \\frac{3}{4} = 0.75$\n- 精确率 $P_{F} = \\frac{N_{FF}}{\\sum_k N_{kF}} = \\frac{2,700,000}{3,120,000} = \\frac{270}{312} = \\frac{45}{52} \\approx 0.8654$\n- $F1_{F} = 2 \\frac{(\\frac{45}{52})(\\frac{3}{4})}{\\frac{45}{52} + \\frac{3}{4}} = 2 \\frac{\\frac{135}{208}}{\\frac{180+156}{208}} = \\frac{270}{336} = \\frac{45}{56} \\approx 0.8036$\n\n对于类别 $C_{A}$：\n- 召回率 $R_{A} = \\frac{N_{AA}}{A_{A}} = \\frac{1,680,000}{2,400,000} = \\frac{168}{240} = \\frac{7}{10} = 0.70$\n- 精确率 $P_{A} = \\frac{N_{AA}}{\\sum_k N_{kA}} = \\frac{1,680,000}{2,520,000} = \\frac{168}{252} = \\frac{2}{3} \\approx 0.6667$\n- $F1_{A} = 2 \\frac{(\\frac{2}{3})(\\frac{7}{10})}{\\frac{2}{3} + \\frac{7}{10}} = 2 \\frac{\\frac{14}{30}}{\\frac{20+21}{30}} = \\frac{28}{41} \\approx 0.6829$\n\n对于类别 $C_{W}$：\n- 召回率 $R_{W} = \\frac{N_{WW}}{A_{W}} = \\frac{1,020,000}{1,200,000} = \\frac{102}{120} = \\frac{17}{20} = 0.85$\n- 精确率 $P_{W} = \\frac{N_{WW}}{\\sum_k N_{kW}} = \\frac{1,020,000}{1,560,000} = \\frac{102}{156} = \\frac{17}{26} \\approx 0.6538$\n- $F1_{W} = 2 \\frac{(\\frac{17}{26})(\\frac{17}{20})}{\\frac{17}{26} + \\frac{17}{20}} = 2 \\frac{17}{46} = \\frac{17}{23} \\approx 0.7391$\n\n问题将宏平均准确率定义为三个类别召回率的未加权平均值。\n宏平均准确率 = $\\frac{R_{F} + R_{A} + R_{W}}{3}$\n宏平均准确率 = $\\frac{0.75 + 0.70 + 0.85}{3} = \\frac{2.30}{3} \\approx 0.76666...$\n\n将最终答案四舍五入到四位有效数字，得到 $0.7667$。",
            "answer": "$$\\boxed{0.7667}$$"
        }
    ]
}
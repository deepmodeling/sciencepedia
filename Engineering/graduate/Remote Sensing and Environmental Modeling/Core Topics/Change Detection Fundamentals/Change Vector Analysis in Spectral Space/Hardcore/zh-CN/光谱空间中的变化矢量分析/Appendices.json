{
    "hands_on_practices": [
        {
            "introduction": "本练习将从矢量代数的基本原理出发，指导你完成变化矢量分析的核心计算。你将学习如何将两个不同时间点的像素光谱反射率表示为矢量，并计算出描述其间差异的变化矢量 $\\Delta\\boldsymbol{\\rho}$ 及其欧几里得范数，即变化幅度。这个基础练习是理解更复杂变化检测技术的第一步 。",
            "id": "3800777",
            "problem": "在两个日期观测一个类 Landsat 的地表反射率像素，在四维光谱空间中产生两个光谱反射率矢量。假设四个波段按蓝、绿、红和近红外（NIR）的顺序排列。设第一时相的反射率矢量为 $\\boldsymbol{\\rho}_{1} = (0.12, 0.18, 0.22, 0.08)$，第二时相的反射率矢量为 $\\boldsymbol{\\rho}_{2} = (0.15, 0.17, 0.28, 0.09)$。\n\n仅从光谱反射率矢量作为欧几里得矢量空间中的一个点以及欧几里得矢量范数作为该空间中标准长度度量的定义出发，推导出一个表达式，用于表示这两个时相之间的光谱变化（作为此四维光谱空间中的一个矢量）。然后计算该变化矢量及其欧几里得长度。最后，通过您推导的表达式进行定量论证，确定变化主要发生在红光波段还是近红外（NIR）波段。\n\n说明：\n- 将反射率视为无量纲。\n- 将变化矢量的欧几里得长度表示为四位有效数字。\n- 无需进行其他舍入。\n- 您最终报告的答案必须依次包含变化矢量的各分量及其欧几里得长度。",
            "solution": "该问题的原理建立在欧几里得空间中的矢量代数之上。在给定像素处，地表的光谱反射率被表示为 $n$ 维空间中的一个矢量，其中 $n$ 是光谱波段的数量。矢量的每个分量对应于特定波段的反射率值。\n\n问题定义了一个四维光谱空间，对应于蓝、绿、红和近红外（NIR）波段。一个像素在两个不同时间（时相 $1$ 和时相 $2$）的状态由两个光谱反射率矢量 $\\boldsymbol{\\rho}_{1}$ 和 $\\boldsymbol{\\rho}_{2}$ 分别给出。\n\n给定的矢量是：\n$$\n\\boldsymbol{\\rho}_{1} = \\begin{pmatrix} 0.12 \\\\ 0.18 \\\\ 0.22 \\\\ 0.08 \\end{pmatrix}\n$$\n和\n$$\n\\boldsymbol{\\rho}_{2} = \\begin{pmatrix} 0.15 \\\\ 0.17 \\\\ 0.28 \\\\ 0.09 \\end{pmatrix}\n$$\n其中各分量按顺序对应蓝、绿、红和近红外波段。\n\n这两个时相之间的光谱变化是一个矢量，描述了在四维光谱空间中从点 $\\boldsymbol{\\rho}_{1}$ 到点 $\\boldsymbol{\\rho}_{2}$ 的位移。在任何矢量空间中，从一个矢量状态到另一个矢量状态的变化由它们的矢量差定义。因此，光谱变化矢量（我们记为 $\\Delta\\boldsymbol{\\rho}$）是通过从最终状态矢量中减去初始状态矢量得到的：\n$$\n\\Delta\\boldsymbol{\\rho} = \\boldsymbol{\\rho}_{2} - \\boldsymbol{\\rho}_{1}\n$$\n该表达式按要求将变化表示为一个矢量。\n\n我们可以通过逐元素相减来计算该变化矢量的分量：\n$$\n\\Delta\\boldsymbol{\\rho} = \\begin{pmatrix} 0.15 - 0.12 \\\\ 0.17 - 0.18 \\\\ 0.28 - 0.22 \\\\ 0.09 - 0.08 \\end{pmatrix} = \\begin{pmatrix} 0.03 \\\\ -0.01 \\\\ 0.06 \\\\ 0.01 \\end{pmatrix}\n$$\n所以，计算出的光谱变化矢量为 $\\Delta\\boldsymbol{\\rho} = (0.03, -0.01, 0.06, 0.01)$。每个分量代表相应光谱波段的反射率变化。例如，红光波段的反射率增加了 $0.06$，而绿光波段的反射率减少了 $0.01$。\n\n接下来，问题要求计算该变化矢量的欧几里得长度（或称模）。在 $n$ 维空间中，矢量 $\\mathbf{v} = (v_1, v_2, \\dots, v_n)$ 的欧几里得长度（或范数）由以下公式给出：\n$$\n\\|\\mathbf{v}\\| = \\sqrt{\\sum_{i=1}^{n} v_i^2}\n$$\n将此定义应用于我们的四维变化矢量 $\\Delta\\boldsymbol{\\rho} = (\\Delta\\rho_{\\text{Blue}}, \\Delta\\rho_{\\text{Green}}, \\Delta\\rho_{\\text{Red}}, \\Delta\\rho_{\\text{NIR}})$，其模为：\n$$\n\\|\\Delta\\boldsymbol{\\rho}\\| = \\sqrt{(\\Delta\\rho_{\\text{Blue}})^2 + (\\Delta\\rho_{\\text{Green}})^2 + (\\Delta\\rho_{\\text{Red}})^2 + (\\Delta\\rho_{\\text{NIR}})^2}\n$$\n代入计算出的分量值：\n$$\n\\|\\Delta\\boldsymbol{\\rho}\\| = \\sqrt{(0.03)^2 + (-0.01)^2 + (0.06)^2 + (0.01)^2}\n$$\n$$\n\\|\\Delta\\boldsymbol{\\rho}\\| = \\sqrt{0.0009 + 0.0001 + 0.0036 + 0.0001}\n$$\n$$\n\\|\\Delta\\boldsymbol{\\rho}\\| = \\sqrt{0.0047}\n$$\n问题要求将此值表示为四位有效数字。\n$$\n\\|\\Delta\\boldsymbol{\\rho}\\| \\approx 0.0685565...\n$$\n舍入到四位有效数字，我们得到 $0.06856$。这个标量值代表了两个时相之间光谱变化的总幅度。\n\n最后，我们必须确定变化主要发生在红光波段还是近红外（NIR）波段。这可以通过比较变化矢量 $\\Delta\\boldsymbol{\\rho}$ 中对应这两个波段的分量的绝对值来进行定量论证。变化矢量的分量是：\n- 红光波段的变化：$\\Delta\\rho_{\\text{Red}} = 0.06$\n- 近红外波段的变化：$\\Delta\\rho_{\\text{NIR}} = 0.01$\n\n为了评估每个波段对总变化的贡献，我们比较这些分量的绝对值：\n$$\n|\\Delta\\rho_{\\text{Red}}| = |0.06| = 0.06\n$$\n$$\n|\\Delta\\rho_{\\text{NIR}}| = |0.01| = 0.01\n$$\n由于 $|\\Delta\\rho_{\\text{Red}}| > |\\Delta\\rho_{\\text{NIR}}|$，具体来说是 $0.06 > 0.01$，因此红光波段反射率的变化幅度大于近红外波段的变化幅度。红光波段的变化是近红外波段变化的六倍。这为光谱变化主要发生在红光波段提供了明确的定量论证。通过检查每个分量对变化矢量模的平方的贡献，可以做出进一步的论证。红光波段的贡献是 $(\\Delta\\rho_{\\text{Red}})^2 = 0.0036$，而近红外波段的贡献是 $(\\Delta\\rho_{\\text{NIR}})^2 = 0.0001$。红光波段对总平方变化的贡献是近红外波段贡献的 $36$ 倍，这进一步证实了结论。\n\n最终应报告的答案包括变化矢量的分量及其欧几里得长度。\n变化矢量分量：$(0.03, -0.01, 0.06, 0.01)$\n欧几里得长度：$0.06856$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.03  -0.01  0.06  0.01  0.06856\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "变化矢量不仅有大小，更有方向，这为我们识别变化的具体类型提供了线索。本练习将引导你运用矢量内积来计算一个实际变化矢量 $c$ 与一个代表特定过程（如植被绿化）的“原型”矢量 $e$ 之间的夹角 $\\theta$。通过评估这个角度，你可以判断观测到的像素变化是否与预期的变化模式相符，这是从“是否变化”到“何种变化”的关键一步 。",
            "id": "3800784",
            "problem": "一项多光谱变化检测研究在光谱特征空间中使用变化矢量分析 (CVA) 来评估一个像素的多时相变化是否与植被绿化原型一致。考虑一个三维特征空间，它由地表反射率和植被指数派生出的、经过正交归一化、大气校正和季节性标准化的分量构建而成，其中每个轴代表一个独立的对绿度敏感的分量。设该像素的变化矢量为 $c = (0.01, 0.03, 0.02)$，植被绿化原型（根据已知绿化事件的训练集估算）为 $e = (0.05, 0.15, 0.10)$。假设该特征空间具有与经过辐射定标和正交归一化的特征相一致的标准欧几里得内积。从内积空间中角度的定义出发，确定矢量 $c$ 和 $e$ 之间的夹角 $\\theta$，并使用该角度评估该像素的变化方向是否与植被绿化一致。角度以度为单位表示，并将您的数值答案四舍五入到四位有效数字。对于一致性评估，使用的准则为：在变化矢量分析中，严格小于 $90$ 度的角表示与原型在方向上一致。",
            "solution": "该问题是有效的，因为它在科学上基于遥感领域变化矢量分析 (CVA) 的原理，在数学上是适定的，并且使用了客观、明确的语言。\n\n目标是在一个三维欧几里得特征空间中，确定一个像素的变化矢量 $c$ 与一个植被绿化原型矢量 $e$ 之间的夹角 $\\theta$。给定的矢量是 $c = (0.01, 0.03, 0.02)$ 和 $e = (0.05, 0.15, 0.10)$。该特征空间具有标准欧几里得内积。\n\n在一个内积空间中，两个非零矢量之间的夹角 $\\theta$ 由以下关系定义：\n$$ c \\cdot e = \\|c\\| \\|e\\| \\cos(\\theta) $$\n其中 $c \\cdot e$ 是矢量的点积（或内积），$\\|c\\|$ 和 $\\|e\\|$ 分别是它们的模（或范数）。这个公式可以重新整理以求解 $\\theta$：\n$$ \\theta = \\arccos\\left(\\frac{c \\cdot e}{\\|c\\| \\|e\\|}\\right) $$\n首先，我们分析给定的矢量。通过观察可以发现，原型矢量 $e$ 是变化矢量 $c$ 的一个标量倍数：\n$$ e = (0.05, 0.15, 0.10) = 5 \\times (0.01, 0.03, 0.02) = 5c $$\n由于一个矢量是另一个矢量的正标量倍数，这两个矢量是共线的，并且指向同一方向。因此，它们之间的夹角必须恰好是 $0$ 度。我们将进行完整的计算来形式上验证这个结论。\n\n首先，我们计算点积 $c \\cdot e$：\n$$ c \\cdot e = (0.01)(0.05) + (0.03)(0.15) + (0.02)(0.10) $$\n$$ c \\cdot e = 0.0005 + 0.0045 + 0.0020 = 0.007 $$\n接下来，我们计算矢量 $c$ 和 $e$ 的模。一个矢量 $v=(v_1, v_2, v_3)$ 的模由 $\\|v\\| = \\sqrt{v_1^2 + v_2^2 + v_3^2}$ 给出。\n$$ \\|c\\| = \\sqrt{0.01^2 + 0.03^2 + 0.02^2} = \\sqrt{0.0001 + 0.0009 + 0.0004} = \\sqrt{0.0014} $$\n$$ \\|e\\| = \\sqrt{0.05^2 + 0.15^2 + 0.10^2} = \\sqrt{0.0025 + 0.0225 + 0.0100} = \\sqrt{0.0350} $$\n现在，我们计算模的乘积：\n$$ \\|c\\| \\|e\\| = \\sqrt{0.0014} \\times \\sqrt{0.0350} = \\sqrt{0.0014 \\times 0.0350} = \\sqrt{0.000049} = 0.007 $$\n我们将点积和模的乘积代入余弦公式：\n$$ \\cos(\\theta) = \\frac{c \\cdot e}{\\|c\\| \\|e\\|} = \\frac{0.007}{0.007} = 1 $$\n通过取该结果的反余弦来求得角度 $\\theta$：\n$$ \\theta = \\arccos(1) = 0 \\text{ 弧度} $$\n题目要求以度为单位表示角度。从弧度到度的转换通过乘以 $\\frac{180^\\circ}{\\pi}$ 给出：\n$$ \\theta = 0 \\times \\frac{180^\\circ}{\\pi} = 0^\\circ $$\n计算出的角度恰好是 $0^\\circ$。将数值答案四舍五入到四位有效数字的指令并不严格适用，因为结果是一个精确的整数。有效数字的概念用于传达测量或由测量得出的计算的精度，对于像 $0$ 这样的精确整数来说，其意义是模糊的。最准确且科学上适当的表示是其精确值本身。\n\n最后，我们根据给定的准则评估一致性：严格小于 $90^\\circ$ 的角表示与原型在方向上一致。由于我们计算出的角度是 $\\theta = 0^\\circ$，并且 $0^\\circ  90^\\circ$ 成立，我们得出结论，该像素的变化方向与植被绿化原型表现出完美的一致性。",
            "answer": "$$ \\boxed{0} $$"
        },
        {
            "introduction": "在处理遥感影像时，一个核心挑战是如何将真实的地物变化与传感器噪声和环境波动区分开来。本练习将你带入变化检测的统计决策领域，利用马氏距离构建一个对波段间相关性不敏感的检验统计量 $T$。你将学习如何基于奈曼-皮尔逊准则，通过卡方 ($\\chi^2$) 分布推导出在特定显著性水平 $\\alpha$ 下的决策阈值 $\\tau_{\\alpha}$，从而对像素是否发生显著变化做出严谨的统计判断 。",
            "id": "3800801",
            "problem": "将一个基于变化矢量分析（CVA）的监督变化检测工作流应用于在两个不同时间获取的同一场景的两幅经过大气校正和共配准的多光谱卫星影像。每个像素由一个 $d=6$ 个波段的光谱矢量表示，对于给定像素，其跨时相光谱差异矢量为 $\\Delta \\mathbf{x} \\in \\mathbb{R}^{6}$。使用一个被确信地标记为无变化的背景像素训练集，来估计在无变化情况下 $\\Delta \\mathbf{x}$ 的一个正定光谱协方差矩阵 $\\boldsymbol{\\Sigma} \\in \\mathbb{R}^{6 \\times 6}$。假设在无变化的零假设下，差异矢量服从均值为零、协方差为 $\\boldsymbol{\\Sigma}$ 的多元正态分布。\n\n对每个像素，通过计算 $\\Delta \\mathbf{x}$ 相对于 $\\boldsymbol{\\Sigma}$ 的马氏范数平方，构建一个标量检验统计量 $T$。并使用奈曼-皮尔逊检验（Neyman–Pearson test），当 $T$ 的值足够大时，拒绝无变化假设。期望的单像素显著性水平为 $\\alpha = 0.01$。\n\n任务：\n- 根据假设，推导 $T$ 的零分布，以及在虚警概率等于 $\\alpha$ 的要求下，决策阈值 $\\tau_{\\alpha}$ 的定义。\n- 计算当 $d=6$ 和 $\\alpha=0.01$ 时，阈值 $\\tau_{\\alpha}$ 的数值。\n- 对于一个观测到 $T=15.7$ 的特定像素，判断该检验是否宣告其发生了变化。\n- 作为推导的一部分，解释选择 $\\alpha=0.01$ 对单像素级别的虚警行为意味着什么。\n\n答案规格：\n- 将最终答案以行向量 $\\begin{pmatrix} \\tau_{\\alpha}  \\text{decision} \\end{pmatrix}$ 的形式报告，其中如果宣告变化，则决策为 $1$，否则为 $0$。\n- 将 $\\tau_{\\alpha}$ 四舍五入至四位有效数字。\n- 阈值和决策是无量纲的量，不需要单位。",
            "solution": "所述问题在科学上是合理且适定的，为进行完整的统计分析提供了所有必要信息。我们开始解答。\n\n该问题描述了一个用于检测像素在两个时间点之间是否发生变化的假设检验。设一个像素在时间 $t_1$ 的光谱矢量为 $\\mathbf{x}_1 \\in \\mathbb{R}^d$，在时间 $t_2$ 的光谱矢量为 $\\mathbf{x}_2 \\in \\mathbb{R}^d$，其中 $d=6$ 是光谱波段的数量。跨时相差异矢量定义为 $\\Delta \\mathbf{x} = \\mathbf{x}_2 - \\mathbf{x}_1$。\n\n零假设 $H_0$ 为没有发生变化。在此假设下，无变化像素总体的差异矢量被假定服从均值为零、协方差矩阵为 $\\boldsymbol{\\Sigma}$ 的多元正态分布。在数学上，这表示为：\n$$\nH_0: \\Delta \\mathbf{x} \\sim \\mathcal{N}(\\mathbf{0}, \\boldsymbol{\\Sigma})\n$$\n协方差矩阵 $\\boldsymbol{\\Sigma} \\in \\mathbb{R}^{6 \\times 6}$ 被给定为正定矩阵，这确保了它是可逆的，并且概率分布是良定义的。\n\n对于给定像素的差异矢量 $\\Delta \\mathbf{x}$，其检验统计量 $T$ 定义为其相对于协方差矩阵 $\\boldsymbol{\\Sigma}$ 的马氏范数平方：\n$$\nT = (\\Delta \\mathbf{x} - \\mathbf{0})^T \\boldsymbol{\\Sigma}^{-1} (\\Delta \\mathbf{x} - \\mathbf{0}) = \\Delta \\mathbf{x}^T \\boldsymbol{\\Sigma}^{-1} \\Delta \\mathbf{x}\n$$\n这是一个涉及正态分布矢量的二次型。\n\n第一个任务：推导 $T$ 的零分布并定义决策阈值 $\\tau_{\\alpha}$。\n多元统计学的一个基本定理指出，如果一个 $d$ 维随机矢量 $\\mathbf{z}$ 服从多元正态分布 $\\mathcal{N}(\\boldsymbol{\\mu}, \\boldsymbol{\\Sigma})$，那么二次型 $(\\mathbf{z} - \\boldsymbol{\\mu})^T \\boldsymbol{\\Sigma}^{-1} (\\mathbf{z} - \\boldsymbol{\\mu})$ 服从自由度为 $d$ 的卡方分布，记为 $\\chi^2_d$。\n\n在本例中，根据零假设 $H_0$，矢量 $\\Delta \\mathbf{x}$ 类似于 $\\mathbf{z}$，其均值 $\\boldsymbol{\\mu}$ 是零矢量 $\\mathbf{0}$，其维度为 $d=6$。因此，检验统计量 $T$ 服从自由度为 $d=6$ 的卡方分布：\n$$\nT | H_0 \\sim \\chi^2_6\n$$\n这就是检验统计量 $T$ 的零分布。\n\n该检验是一个单尾检验，当 $T$ 的值足够大时拒绝 $H_0$。较大的 $T$ 值表示，考虑到 $\\boldsymbol{\\Sigma}$ 中编码的光谱波段相关性结构，观测到的差异矢量 $\\Delta \\mathbf{x}$ 远离期望的零均值。拒绝域为 $T > \\tau_{\\alpha}$，其中 $\\tau_{\\alpha}$ 是决策阈值。\n\n显著性水平 $\\alpha$ 是犯第一类错误（虚警）的概率，即在 $H_0$ 为真时拒绝它的概率。给定 $\\alpha = 0.01$。阈值 $\\tau_{\\alpha}$ 的定义应满足此概率：\n$$\nP(T > \\tau_{\\alpha} | H_0) = \\alpha\n$$\n这意味着 $\\tau_{\\alpha}$ 是 $\\chi^2_6$ 分布的上尾临界值。它是在 $\\chi^2_6$ 分布的概率密度函数下，其右侧面积（概率）为 $\\alpha$ 的值。等价地，它是该分布的 $(1-\\alpha)$-分位数。如果 $F_{\\chi^2_6}(t)$ 是 $\\chi^2_6$ 分布的累积分布函数（CDF），那么 $F_{\\chi^2_6}(\\tau_{\\alpha}) = 1 - \\alpha$，因此：\n$$\n\\tau_{\\alpha} = F_{\\chi^2_6}^{-1}(1-\\alpha)\n$$\n\n第四个任务（解释）：选择 $\\alpha=0.01$ 意味着，对于任何实际上未发生变化的像素，其光谱特征的随机波动有 $1\\%$ 的概率会大到足以让检验将其错误地分类为“已变化”。如果将此检验应用于一个包含 $N$ 个无变化像素的大区域，可以预期其中大约 $0.01 \\times N$ 个像素会被标记为虚警。\n\n第二个任务：计算当 $d=6$ 和 $\\alpha=0.01$ 时，阈值 $\\tau_{\\alpha}$ 的数值。\n我们需要找到值 $\\tau_{0.01}$，使得对于 $T \\sim \\chi^2_6$，$P(T > \\tau_{0.01}) = 0.01$。这是自由度为 $6$ 的卡方分布的第 $99$ 百分位数。使用标准统计表或计算软件，我们可以找到这个值。\n$$\n\\tau_{0.01} = F_{\\chi^2_6}^{-1}(1 - 0.01) = F_{\\chi^2_6}^{-1}(0.99) \\approx 16.81189\n$$\n按要求四舍五入至四位有效数字，阈值为：\n$$\n\\tau_{0.01} \\approx 16.81\n$$\n\n第三个任务：对于一个观测到 $T=15.7$ 的像素，判断是否宣告变化。\n决策规则是：\n- 如果 $T_{obs} > \\tau_{0.01}$，拒绝 $H_0$ 并宣告变化。\n- 如果 $T_{obs} \\le \\tau_{0.01}$，不拒绝 $H_0$ 并宣告无变化。\n\n观测值为 $T_{obs} = 15.7$。我们将其与阈值进行比较：\n$$\n15.7 \\le 16.81\n$$\n由于观测到的检验统计量 $T_{obs}$ 未超过临界阈值 $\\tau_{0.01}$，我们不拒绝零假设。决策为“无变化”。\n根据答案规格，“无变化”编码为 $0$。\n\n最终答案组合：\n最终答案是一个包含阈值和决策的行向量。\n- 阈值 $\\tau_{\\alpha} \\approx 16.81$\n- 决策：无变化，编码为 $0$。\n该向量为 $\\begin{pmatrix} 16.81  0 \\end{pmatrix}$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 16.81  0 \\end{pmatrix}}\n$$"
        }
    ]
}
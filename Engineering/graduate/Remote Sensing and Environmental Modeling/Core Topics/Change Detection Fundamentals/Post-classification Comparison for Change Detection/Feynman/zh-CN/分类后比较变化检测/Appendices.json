{
    "hands_on_practices": [
        {
            "introduction": "时间序列上的分类体系不一致，例如在后续时间点采用了更精细的分类（例如，将“森林”细分为“常绿林”和“落叶林”），是变化检测中的一个常见挑战。在量化任何变化之前，我们必须建立一个共同的“语言”或本体论，以确保比较的有效性。这项练习演示了如何通过聚合方法，将不一致的分类体系协调一致，从而构建一个语义上连贯的交叉制表矩阵，为有意义的变化分析奠定基础。",
            "id": "3835097",
            "problem": "在用于变化检测的分类后比较中，一个核心工具是交叉制表（列联）矩阵，其条目 $n_{ij}$ 统计了在时间 $t_1$ 被标记为类别 $i$ 且在时间 $t_2$ 被标记为类别 $j$ 的空间单元（例如，像素）的数量。设时间 $t_1$ 的类别集为 $C_1 = \\{\\text{农业 }(A), \\text{ 森林 }(F), \\text{ 城市 }(U)\\}$，时间 $t_2$ 的类别集为 $C_2 = \\{\\text{ 农业 }(A), \\text{ 常绿林 }(F_e), \\text{ 落叶林 }(F_d), \\text{ 城市 }(U)\\}$。假设时间 $t_2$ 的标签仅细化了森林的语义，即 $F_e$ 和 $F_d$ 都是 $F$ 的子类，并且所有像素面积相等。\n\n给定以下交叉制表矩阵 $\\mathbf{N} \\in \\mathbb{N}^{3 \\times 4}$（行对应 $C_1$，列对应 $C_2$）：\n$$\n\\mathbf{N} =\n\\begin{pmatrix}\n420  30  50  20 \\\\\n40  350  310  25 \\\\\n15  10  5  480\n\\end{pmatrix},\n$$\n其中，例如，$n_{F,F_e} = 350$ 表示在时间 $t_1$ 标记为 $F$ 的 $350$ 个像素在时间 $t_2$ 被标记为 $F_e$。\n\n仅从变化检测的语义一致性首要原则出发，即“变化”必须相对于跨时间的共同类别本体来定义，请评估 $t_1$ 和 $t_2$ 之间子类粒度不一致对 $n_{ij}$ 转换的可解释性造成的影响，并选择最符合原则的聚合方案及其生成的聚合矩阵，该矩阵能够在 $t_1$ 的类别分辨率下恢复有意义的“无变化”与“变化”语义。您的答案必须遵循以下几点：\n\n- 使用一个能对齐跨时间类别语义的映射，而不在 $t_1$ 时刻捏造标签。\n- 聚合后保持每行的像素总数不变。\n- 对于从 $t_1$ 的 $F$ 类别到 $t_2$ 的 $F_e$ 或 $F_d$ 类别的分配，在 $t_1$ 分辨率下，应将其恰当地视为“无变化”。\n\n哪个选项正确地描述了可解释性的影响并提供了有效的聚合矩阵？\n\nA. 因为 $F_e$ 和 $F_d$ 是 $F$ 的细化，所以在 $t_1$ 分辨率下，转换 $n_{F,F_e}$ 和 $n_{F,F_d}$ 不是语义上的“变化”；它们是 $F$ 内部的子类分配。通过一个满射 $f: C_2 \\to C_1$（其中 $f(A)=A$, $f(F_e)=F$, $f(F_d)=F$, $f(U)=U$）将 $C_2$ 聚合到 $C_1$。这可以通过一个列映射矩阵 $\\mathbf{M} \\in \\{0,1\\}^{4 \\times 3}$ 来实现，其中如果 $f(j)=k$ 则 $M_{jk}=1$，否则 $M_{jk}=0$，得到 $\\mathbf{N}^{\\text{agg}} = \\mathbf{N}\\mathbf{M}$，该操作保持行和不变。聚合后的矩阵为\n$$\n\\mathbf{N}^{\\text{agg}} =\n\\begin{pmatrix}\n420  80  20 \\\\\n40  660  25 \\\\\n15  15  480\n\\end{pmatrix},\n$$\n因此，在 $t_1$ 分辨率下，“无变化”的计数是对角线上的条目：$A\\to A$ 为 $420$，$F\\to F$ 为 $660$（其中 $660 = 350 + 310$），$U\\to U$ 为 $480$。\n\nB. 任何不同标签之间的转换都意味着“变化”，因此 $n_{F,F_e}$ 和 $n_{F,F_d}$ 都是森林变化。保持 $\\mathbf{N}$ 不变，并计算 $t_1$ 时刻的总森林损失为 $n_{F,F_e}+n_{F,F_d} = 660$，因为 $F_e$ 和 $F_d$ 与 $F$ 不同。\n\nC. 为了统一粒度，使用时间 $t_2$ 时 $F_e$ 和 $F_d$ 的列比例，将 $t_1$ 的森林分割为 $F_e$ 和 $F_d$，从而在 $t_1$ 时刻得到一个包含四个类别的合成矩阵。然后通过按比例重新估计 $t_1$ 时刻 $F_e$ 和 $F_d$ 的 $n_{ij}$ 条目来进行同类比较。\n\nD. 归一化 $t_2$ 时刻的每个森林子类列，使得 $n_{F,F_e}+n_{F,F_d}$ 等于 $t_1$ 时刻森林行的总数，并将归一化后的 $n_{F,F_e}$ 和 $n_{F,F_d}$ 条目视为“无变化”，同时保持其他列不变；这将产生一个保留总计数但不一定保留行和的聚合矩阵。",
            "solution": "### 问题验证\n\n**第1步：提取已知条件**\n\n-   **工具**：用于变化检测的分类后比较的交叉制表（列联）矩阵。\n-   **矩阵条目**：$n_{ij}$ 统计了在时间 $t_1$ 被标记为类别 $i$ 且在时间 $t_2$ 被标记为类别 $j$ 的空间单元（像素）的数量。\n-   **时间 $t_1$ 的类别集**：$C_1 = \\{\\text{农业 }(A), \\text{ 森林 }(F), \\text{ 城市 }(U)\\}$。\n-   **时间 $t_2$ 的类别集**：$C_2 = \\{\\text{ 农业 }(A), \\text{ 常绿林 }(F_e), \\text{ 落叶林 }(F_d), \\text{ 城市 }(U)\\}$。\n-   **语义关系**：$t_2$ 的标签仅细化了森林语义；$F_e$ 和 $F_d$ 是 $F$ 的子类。\n-   **空间单元假设**：所有像素面积相等。\n-   **交叉制表矩阵**：\n    $$\n    \\mathbf{N} =\n    \\begin{pmatrix}\n    420  30  50  20 \\\\\n    40  350  310  25 \\\\\n    15  10  5  480\n    \\end{pmatrix}\n    $$\n    其中行对应 $C_1$（顺序为 $A, F, U$），列对应 $C_2$（顺序为 $A, F_e, F_d, U$）。\n-   **示例**：$n_{F,F_e} = 350$。\n-   **目标**：评估粒度不一致的后果，并选择一个有原则的聚合方案，以在 $t_1$ 类别分辨率下恢复有意义的“无变化”与“变化”语义。\n-   **方案的约束条件**：\n    1.  使用一个能对齐跨时间类别语义的映射，而不在 $t_1$ 时刻捏造标签。\n    2.  聚合后保持每行的像素总数不变。\n    3.  对于从 $t_1$ 的 $F$ 类别到 $t_2$ 的 $F_e$ 或 $F_d$ 类别的分配，在 $t_1$ 分辨率下，应将其恰当地视为“无变化”。\n\n**第2步：使用提取的已知条件进行验证**\n\n-   **科学依据**：该问题设定在遥感和地理信息科学的既定框架内，专门解决了多时相土地覆盖变化分析中常见且关键的语义互操作性问题。所使用的概念（交叉制表、类别本体、语义细化）是该领域的标准。问题是科学上合理的。\n-   **适定性**：问题是适定的。它提供了所有必要的数据（矩阵和类别定义），陈述了明确的目标（找到一个有原则的聚合方案），并列出了明确的约束条件，以指导唯一解的推导。\n-   **客观性**：语言是技术性的、精确的，并且没有主观性。问题是以对已定义实体的数学和逻辑运算来陈述的。\n-   **缺陷评估**：\n    1.  **科学或事实上的不健全**：无。该场景是变化检测中的一个现实挑战。\n    2.  **无法形式化或不相关**：无。该问题完全可以用矩阵代数和集合论来形式化，并且是该主题的核心。\n    3.  **不完整或矛盾的设置**：无。数据和约束是完整且一致的。矩阵维度（$3 \\times 4$）与 $C_1$ ($3$) 和 $C_2$ ($4$) 中的类别数量相对应。\n    4.  **不现实或不可行**：无。像素计数是正整数，这在物理上是现实的。\n    5.  **病态或结构不良**：无。可以从所述的原则和约束中推导出唯一、有意义的解。\n    6.  **伪深刻、琐碎或同义反复**：无。该问题解决的是数据分析中一个真正的概念性挑战，需要的不仅仅是死记硬背的计算。\n    7.  **超出科学可验证性**：无。解可以通过逻辑推导和数学计算来验证。\n\n**第3步：结论与行动**\n\n问题陈述是**有效的**。现在开始求解过程。\n\n### 求解推导\n\n问题的核心在于时间 $t_1$ 和 $t_2$ 类别本体之间的语义不一致。时间 $t_1$ 的“森林”（$F$）类别对应于时间 $t_2$ 的一组更详细的类别，即{“常绿林”（$F_e$），“落叶林”（$F_d$）}。为了进行有意义的变化分析，我们必须首先建立一个共同的语义参考框架。\n\n问题要求我们在 $t_1$ 类别的分辨率上定义“变化”。这意味着我们必须协调 $t_2$ 的分类方案以匹配 $t_1$ 的方案。这可以通过将 $C_2$ 中的子类聚合到它们在 $C_1$ 中对应的父类来实现。这遵守了不在 $t_1$ 捏造信息的约束。\n\n所需的语义映射 $f: C_2 \\to C_1$ 如下：\n-   $f(A) = A$\n-   $f(F_e) = F$\n-   $f(F_d) = F$\n-   $f(U) = U$\n\n这个映射是满射（onto）。要将其应用于交叉制表矩阵 $\\mathbf{N}$，我们必须将 $C_2$ 中映射到 $C_1$ 同一类别的那些类所对应的列进行合并。\n原始矩阵 $\\mathbf{N}$ 为：\n$$\n\\mathbf{N} =\n\\begin{pmatrix}\n420  30  50  20 \\\\\n40  350  310  25 \\\\\n15  10  5  480\n\\end{{pmatrix}\n$$\n行由 $C_1 = \\{A, F, U\\}$ 索引，列由 $C_2 = \\{A, F_e, F_d, U\\}$ 索引。\n\n聚合后的矩阵 $\\mathbf{N}^{\\text{agg}}$ 将是 $3 \\times 3$ 维的，其行和列都由 $C_1 = \\{A, F, U\\}$ 索引。\n\n-   新的 'A' 列就是旧的 'A' 列（第1列）：\n    $$ \\begin{pmatrix} 420 \\\\ 40 \\\\ 15 \\end{pmatrix} $$\n-   新的 'F' 列是旧的 '$F_e$' 和 '$F_d$' 列（第2和第3列）之和：\n    $$ \\begin{pmatrix} 30+50 \\\\ 350+310 \\\\ 10+5 \\end{pmatrix} = \\begin{pmatrix} 80 \\\\ 660 \\\\ 15 \\end{pmatrix} $$\n-   新的 'U' 列就是旧的 'U' 列（第4列）：\n    $$ \\begin{pmatrix} 20 \\\\ 25 \\\\ 480 \\end{pmatrix} $$\n\n将这些列组合起来得到聚合矩阵：\n$$\n\\mathbf{N}^{\\text{agg}} =\n\\begin{pmatrix}\n420  80  20 \\\\\n40  660  25 \\\\\n15  15  480\n\\end{pmatrix}\n$$\n\n我们来验证一下约束条件：\n1.  **不捏造标签的映射**：这是我们方法的基础。我们将 $t_2$ 的类别进行聚合以匹配更粗糙的 $t_1$ 模式。此约束得到满足。\n2.  **保持每行像素总数不变**：\n    -   第1行 (A): 原始和 = $420+30+50+20 = 520$。聚合后和 = $420+80+20 = 520$。保持不变。\n    -   第2行 (F): 原始和 = $40+350+310+25 = 725$。聚合后和 = $40+660+25 = 725$。保持不变。\n    -   第3行 (U): 原始和 = $15+10+5+480 = 510$。聚合后和 = $15+15+480 = 510$。保持不变。\n    此约束得到满足。\n3.  **对“无变化”的适当处理**：问题规定，在 $t_1$ 分辨率下，从 $t_1$ 的 $F$ 转换到 $t_2$ 的 $F_e$ 或 $F_d$ 的像素不属于专题变化。在我们的聚合矩阵中，这些计数（$n_{F,F_e}=350$ 和 $n_{F,F_d}=310$）被加总到一个单元格中，即 $n^{\\text{agg}}_{F,F} = 660$。该单元格位于协调后矩阵的对角线上，正确地将在 $t_1$ 语义级别上土地覆盖类型“无变化”的这 $660$ 个像素进行了分类。此约束得到满足。\n\n$\\mathbf{N}^{\\text{agg}}$ 的对角线代表在 $t_1$ 分辨率下未改变类别的像素总数：$n^{\\text{agg}}_{A,A}=420$，$n^{\\text{agg}}_{F,F}=660$，$n^{\\text{agg}}_{U,U}=480$。\n\n### 逐项分析选项\n\n**A. 因为 $F_e$ 和 $F_d$ 是 $F$ 的细化，所以在 $t_1$ 分辨率下，转换 $n_{F,F_e}$ 和 $n_{F,F_d}$ 不是语义上的“变化”；它们是 $F$ 内部的子类分配。通过一个满射 $f: C_2 \\to C_1$（其中 $f(A)=A$, $f(F_e)=F$, $f(F_d)=F$, $f(U)=U$）将 $C_2$ 聚合到 $C_1$。这可以通过一个列映射矩阵 $\\mathbf{M} \\in \\{0,1\\}^{4 \\times 3}$ 来实现，其中如果 $f(j)=k$ 则 $M_{jk}=1$，否则 $M_{jk}=0$，得到 $\\mathbf{N}^{\\text{agg}} = \\mathbf{N}\\mathbf{M}$，该操作保持行和不变。聚合后的矩阵为...**\n\n该选项正确地指出了核心原则：语义粒度的细化在更粗糙的层面上不构成专题变化。它提出了正确的从 $C_2$ 到 $C_1$ 的聚合映射。它正确地将此聚合表述为通过一个列映射矩阵进行后乘，这种操作已知可以保持行和不变。得到的矩阵，\n$$\n\\mathbf{N}^{\\text{agg}} =\n\\begin{pmatrix}\n420  80  20 \\\\\n40  660  25 \\\\\n15  15  480\n\\end{pmatrix},\n$$\n以及对对角线条目的解释与我们的推导完全匹配。计算出的森林“无变化”数量（$660 = 350+310$）是正确的。\n**结论：正确。**\n\n**B. 任何不同标签之间的转换都意味着“变化”，因此 $n_{F,F_e}$ 和 $n_{F,F_d}$ 都是森林变化。保持 $\\mathbf{N}$ 不变，并计算 $t_1$ 时刻的总森林损失为 $n_{F,F_e}+n_{F,F_d} = 660$，因为 $F_e$ 和 $F_d$ 与 $F$ 不同。**\n\n该选项体现了一种天真且不正确的理解。它将标签的变化与语义的变化混为一谈。问题明确指出 $F_e$ 和 $F_d$ 是 $F$ 的子类，所以从 $F$ 到 $F_e$ 的转换不是森林的损失。此外，它灾难性地误解了矩阵条目的含义：$n_{F,F_e}$ 和 $n_{F,F_d}$ 代表*仍然*是森林的像素。从 $t_1$ 的角度看，森林损失应该是从 $F$ 行到非森林列（$A$ 和 $U$）的转换，总和为 $40+25=65$ 个像素。该选项的推理存在根本性缺陷。\n**结论：不正确。**\n\n**C. 为了统一粒度，使用时间 $t_2$ 时 $F_e$ 和 $F_d$ 的列比例，将 $t_1$ 的森林分割为 $F_e$ 和 $F_d$，从而在 $t_1$ 时刻得到一个包含四个类别的合成矩阵。然后通过按比例重新估计 $t_1$ 时刻 $F_e$ 和 $F_d$ 的 $n_{ij}$ 条目来进行同类比较。**\n\n该选项建议分解更粗糙的 $t_1$ 数据以匹配更精细的 $t_2$ 数据。此过程违反了“不在 $t_1$ 时刻捏造标签”的明确约束。它需要做一个强烈的、无法检验的假设，即 $t_1$ 时刻的森林子类比例与 $t_2$ 时刻相同。这相当于捏造信息，是一种科学上不严谨的做法，尤其是在有更保守和有原则的方法（聚合）可用的情况下。有原则的方法总是协调到语义细节的最低公分母，在本例中即为 $t_1$ 的方案。\n**结论：不正确。**\n\n**D. 归一化 $t_2$ 时刻的每个森林子类列，使得 $n_{F,F_e}+n_{F,F_d}$ 等于 $t_1$ 时刻森林行的总数，并将归一化后的 $n_{F,F_e}$ 和 $n_{F,F_d}$ 条目视为“无变化”，同时保持其他列不变；这将产生一个保留总计数但不一定保留行和的聚合矩阵。**\n\n该选项提出了一个无意义的“归一化”过程。条目 $n_{ij}$ 是像素计数；它们是离散数据，不应被任意重新缩放。目标是重新组合计数，而不是改变它们。关键是，该选项承认其方法“不一定[保留]行和”。$t_1$ 时刻某个类别的行和代表该类别的总像素数，这是一个从 $t_1$ 地图中得出的固定量。任何有效的聚合*必须*保留这些行和。该选项违反了列联矩阵的一个基本属性以及问题陈述中给出的明确约束。\n**结论：不正确。**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "构建了有效的变化矩阵后，我们可以进行比简单统计变化像元更深入的分析。这项练习展示了如何将两个时相图件间的总体“不一致性”分解为两个具有明确解释的组分：由各地类总面积变化引起的“数量不一致性”($Q$)，以及由地类空间位置重置引起的“分配不一致性”($A$)。区分这两种变化对于理解土地覆盖变化的驱动过程至关重要。",
            "id": "3835113",
            "problem": "一个沿海流域在两个时间点 $t_{1}$ 和 $t_{2}$ 通过对多光谱卫星图像进行监督分类而被绘制成地图。四个土地类别分别是森林（$F$）、农业（$A$）、城市（$U$）和水体（$W$）。分类后比较生成了以下 $4 \\times 4$ 的像素计数交叉列表（变化）矩阵，其中行表示时间 $t_{1}$ 的类别，列表示时间 $t_{2}$ 的类别。制图的总像素数为 $N = 5000$。在两个时间点，这些类别都是互斥且完全穷尽的，并且两张地图应用了相同的空间支持和研究区域。\n$$\n\\begin{pmatrix}\n1600  270  230  0 \\\\\n120  1200  90  90 \\\\\n30  60  800  10 \\\\\n50  170  80  200\n\\end{pmatrix}\n$$\n在高级分类后比较中，两幅分类地图之间的总体不一致性可以分解为两个可加分量：数量不一致性 $Q$，归因于 $t_{1}$ 和 $t_{2}$ 之间类别总量的差异；以及分配不一致性 $A$，归因于不能由总量差异解释的类别的空间重分配。从交叉列表导出的比例基本定义以及将总体不一致性定义为1减去归一化对角线元素之和的概念出发，计算这两个时间点的数量不一致性 $Q$ 和分配不一致性 $A$。将 $Q$ 和 $A$ 均表示为小数（不带百分号），并各自四舍五入到四位有效数字。最后，根据你计算出的 $Q$ 和 $A$，解释不一致性中哪一部分源于类别总量的差异，哪一部分源于空间分配（解释是您解答的一部分；最终答案必须只包含数值）。",
            "solution": "该问题经验证具有科学依据、适定且客观。它展示了遥感土地变化科学中的一个标准分析。所有必要数据均已提供且内部一致。给定交叉列表矩阵中所有元素的总和为 $1600+270+230+0+120+1200+90+90+30+60+800+10+50+170+80+200=5000$，与指定的总像素数 $N=5000$ 相符。我现在开始解答。\n\n设像素计数的交叉列表矩阵为 $C$，其中 $c_{ij}$ 是时间 $t_1$ 属于类别 $i$ 且时间 $t_2$ 属于类别 $j$ 的像素数量。类别分别为森林（$i,j=1$）、农业（$i,j=2$）、城市（$i,j=3$）和水体（$i,j=4$）。\n$$\nC = \\begin{pmatrix}\n1600  270  230  0 \\\\\n120  1200  90  90 \\\\\n30  60  800  10 \\\\\n50  170  80  200\n\\end{pmatrix}\n$$\n总像素数为 $N = 5000$。为了使用比例进行计算，我们将矩阵 $C$ 除以 $N$ 进行归一化，得到比例矩阵 $P$，其中 $P_{ij} = c_{ij} / N$。\n\n首先，我们计算比例矩阵的边际总和。行总和 $P_{i+}$ 代表时间 $t_1$ 各类别 $i$ 的比例。列总和 $P_{+j}$ 代表时间 $t_2$ 各类别 $j$ 的比例。\n\n计数矩阵 $C$ 的行和为：\n$c_{1+} = 1600+270+230+0 = 2100$\n$c_{2+} = 120+1200+90+90 = 1500$\n$c_{3+} = 30+60+800+10 = 900$\n$c_{4+} = 50+170+80+200 = 500$\n\n时间 $t_1$ 的相应比例为：\n$P_{1+} = \\frac{2100}{5000} = 0.42$\n$P_{2+} = \\frac{1500}{5000} = 0.30$\n$P_{3+} = \\frac{900}{5000} = 0.18$\n$P_{4+} = \\frac{500}{5000} = 0.10$\n\n计数矩阵 $C$ 的列和为：\n$c_{+1} = 1600+120+30+50 = 1800$\n$c_{+2} = 270+1200+60+170 = 1700$\n$c_{+3} = 230+90+800+80 = 1200$\n$c_{+4} = 0+90+10+200 = 300$\n\n时间 $t_2$ 的相应比例为：\n$P_{+1} = \\frac{1800}{5000} = 0.36$\n$P_{+2} = \\frac{1700}{5000} = 0.34$\n$P_{+3} = \\frac{1200}{5000} = 0.24$\n$P_{+4} = \\frac{300}{5000} = 0.06$\n\n总体一致性是主对角线上比例的总和，$\\sum_{j=1}^{4} P_{jj}$。\n主对角线上的比例为：\n$P_{11} = \\frac{1600}{5000} = 0.32$\n$P_{22} = \\frac{1200}{5000} = 0.24$\n$P_{33} = \\frac{800}{5000} = 0.16$\n$P_{44} = \\frac{200}{5000} = 0.04$\n总体一致性为 $0.32 + 0.24 + 0.16 + 0.04 = 0.76$。\n\n总体不一致性 $D$ 定义为1减去总体一致性：\n$D = 1 - \\sum_{j=1}^{4} P_{jj} = 1 - 0.76 = 0.24$。\n这种不一致性被分解为数量不一致性（$Q$）和分配不一致性（$A$），使得 $D = Q + A$。\n\n数量不一致性 $Q$ 源于两个时间点之间各类别的总比例差异。它定义为列边际比例与行边际比例之差的绝对值之和的一半：\n$$\nQ = \\frac{1}{2} \\sum_{j=1}^{4} |P_{+j} - P_{j+}|\n$$\n代入计算出的比例：\n$|P_{+1} - P_{1+}| = |0.36 - 0.42| = 0.06$\n$|P_{+2} - P_{2+}| = |0.34 - 0.30| = 0.04$\n$|P_{+3} - P_{3+}| = |0.24 - 0.18| = 0.06$\n$|P_{+4} - P_{4+}| = |0.06 - 0.10| = 0.04$\n将这些绝对差相加：$0.06 + 0.04 + 0.06 + 0.04 = 0.20$。\n因此，数量不一致性为：\n$Q = \\frac{1}{2} (0.20) = 0.10$。\n\n分配不一致性 $A$ 代表在考虑了类别总量的净变化后，由于类别的空间交换而导致的不一致性。它可以作为总体不一致性的剩余部分来计算：\n$A = D - Q = 0.24 - 0.10 = 0.14$。\n\n作为验证，我们也可以根据其定义直接计算 $A$。分配不一致性是每个类别的总损失和总增加中的较小值之和，这里已经考虑了持续性（未变化部分）。对于每个类别 $j$，总损失为 $P_{j+} - P_{jj}$，总增加为 $P_{+j} - P_{jj}$。分配不一致性由下式给出：\n$$\nA = \\sum_{j=1}^{4} \\min(P_{j+} - P_{jj}, P_{+j} - P_{jj})\n$$\n对于每个类别：\n$j=1$: $\\min(P_{1+} - P_{11}, P_{+1} - P_{11}) = \\min(0.42 - 0.32, 0.36 - 0.32) = \\min(0.10, 0.04) = 0.04$\n$j=2$: $\\min(P_{2+} - P_{22}, P_{+2} - P_{22}) = \\min(0.30 - 0.24, 0.34 - 0.24) = \\min(0.06, 0.10) = 0.06$\n$j=3$: $\\min(P_{3+} - P_{33}, P_{+3} - P_{33}) = \\min(0.18 - 0.16, 0.24 - 0.16) = \\min(0.02, 0.08) = 0.02$\n$j=4$: $\\min(P_{4+} - P_{44}, P_{+4} - P_{44}) = \\min(0.10 - 0.04, 0.06 - 0.04) = \\min(0.06, 0.02) = 0.02$\n将这些值相加得到分配不一致性：\n$A = 0.04 + 0.06 + 0.02 + 0.02 = 0.14$。\n这证实了从 $A = D - Q$ 得到的结果。\n\n问题要求答案以小数形式表示，并四舍五入到四位有效数字。\n$Q = 0.1000$\n$A = 0.1400$\n总体不一致性为 $D = 0.2400$，对应研究区域的 $24\\%$ 发生了变化。在这总体不一致性中，数量不一致性（$Q = 0.1000$）占了区域的 $10\\%$，分配不一致性（$A = 0.1400$）占了区域的 $14\\%$。\n\n解释：比较这两个分量，我们发现 $A > Q$（$0.1400 > 0.1000$）。这表明两张地图之间的不一致性更多地归因于土地类别的空间重分配，而不是每个类别总面积的净变化。换句话说，与每个类别的数量变化相比，类别位置的变化是总体地图差异中更重要的组成部分。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.1000  0.1400 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "分类后比较方法检测到的“变化”可能并非全部是地表真实变化，部分可能源于输入分类图件本身的误差。因此，任何变化检测结果都必须在考虑其不确定性的前提下进行解读。这项练习引导我们从第一性原理出发，探讨单个分类图件的精度（如用户精度）如何传播到变化矩阵中，并量化一个观测到的“变化”实际上仅由分类错误组合而成的概率。",
            "id": "3835115",
            "problem": "考虑一个用于变化检测的分类后比较，在两个时间点 $t=0$ 和 $t=1$ 之间，针对三个土地覆盖类别：森林（$F$）、农田（$C$）和城市（$U$）。令 $m_{ab}^{(t)}$ 表示时间 $t$ 的混淆矩阵，其中行由参考（地面真实）类别 $a \\in \\{F,C,U\\}$ 索引，列由分类类别 $b \\in \\{F,C,U\\}$ 索引。给定以下验证混淆矩阵：\n$$\nm^{(0)}=\\begin{pmatrix}\n520  80  30 \\\\\n70  540  60 \\\\\n20  50  530\n\\end{pmatrix},\\quad\nm^{(1)}=\\begin{pmatrix}\n480  90  40 \\\\\n60  570  70 \\\\\n25  65  540\n\\end{pmatrix}.\n$$\n行对应于参考类别，顺序为 $(F,C,U)$，列对应于分类类别，顺序为 $(F,C,U)$。将时间 $t$ 的生产者精度（PA）和用户精度（UA）定义为\n$$\nPA_{a}^{(t)}=\\frac{m_{aa}^{(t)}}{\\sum_{b} m_{ab}^{(t)}},\\qquad UA_{b}^{(t)}=\\frac{m_{bb}^{(t)}}{\\sum_{a} m_{ab}^{(t)}}.\n$$\n您还有一个分类后交叉列表 $N$，它是研究区域内 $t=0$（行）和 $t=1$（列）之间分类标签的列联矩阵：\n$$\nN=\\begin{pmatrix}\n30000  12000  5000 \\\\\n7000  28000  9000 \\\\\n4000  8000  25000\n\\end{pmatrix}.\n$$\n行对应于时间 $t=0$ 的分类类别，顺序为 $(F,C,U)$，列对应于时间 $t=1$ 的分类类别，顺序为 $(F,C,U)$。使用生产者精度和用户精度的基本定义，首先计算每个类别在每个时间的 $PA_{a}^{(t)}$ 和 $UA_{b}^{(t)}$。然后，从概率第一性原理出发，将用户精度视为分类标签等于真实标签的后验概率的估计，推导出一个表达式，用于计算在两次分类标签的正确性相互独立的假设下，仅由分类错误导致的从 $t=0$ 的森林到 $t=1$ 的农田的观测变化（即 $N$ 中行 $F$ 列 $C$ 的条目）中错误部分的预期比例。最后，对该比例进行数值评估。将最终答案表示为无单位小数，并四舍五入到四位有效数字。",
            "solution": "### 第一步：提取已知条件\n- 时间点：$t=0$ 和 $t=1$。\n- 土地覆盖类别：森林（$F$）、农田（$C$）、城市（$U$）。\n- 时间 $t$ 的混淆矩阵：$m^{(t)}$，行代表参考类别 $a$，列代表分类类别 $b$。\n- $t=0$ 时的混淆矩阵：$m^{(0)}=\\begin{pmatrix} 520  80  30 \\\\ 70  540  60 \\\\ 20  50  530 \\end{pmatrix}$。\n- $t=1$ 时的混淆矩阵：$m^{(1)}=\\begin{pmatrix} 480  90  40 \\\\ 60  570  70 \\\\ 25  65  540 \\end{pmatrix}$。\n- 生产者精度（PA）定义：$PA_{a}^{(t)}=\\frac{m_{aa}^{(t)}}{\\sum_{b} m_{ab}^{(t)}}$。\n- 用户精度（UA）定义：$UA_{b}^{(t)}=\\frac{m_{bb}^{(t)}}{\\sum_{a} m_{ab}^{(t)}}$。\n- 分类后交叉列表矩阵：$N=\\begin{pmatrix} 30000  12000  5000 \\\\ 7000  28000  9000 \\\\ 4000  8000  25000 \\end{pmatrix}$，行代表 $t=0$ 时的分类类别，列代表 $t=1$ 时的分类类别。\n- 假设：两个时间点的类别标签的正确性是独立的。\n- 任务：\n  1. 计算每个类别在每个时间的 $PA_{a}^{(t)}$ 和 $UA_{b}^{(t)}$。\n  2. 推导一个表达式，用于表示仅由分类错误导致的从 $t=0$ 的森林到 $t=1$ 的农田的观测变化中的预期错误比例。\n  3. 对此比例进行数值计算，并四舍五入到四位有效数字。\n\n### 第二步：验证问题\n- **科学可靠**：该问题基于遥感和图像分析中的标准、基本概念，特别是用于变化检测的分类后比较。生产者精度和用户精度的定义在该领域是正确且标准的。\n- **定义明确**：所有必要的数据（混淆矩阵、交叉列表矩阵）和定义都已提供。任务明确规定，并且假设（误差的独立性）允许得出唯一解。\n- **客观**：问题以精确、定量和无偏见的语言陈述。\n\n该问题没有表现出任何科学上不健全、不完整、矛盾或模糊等缺陷。该情景是环境建模中精度评估的典型应用。问题有效，将提供完整解答。\n\n### 解答推导\n\n该问题需要一个包含三部分的解答：计算精度指标，推导错误变化的表达式，以及数值评估。\n\n**第一部分：计算生产者精度和用户精度**\n\n首先，我们计算每个混淆矩阵的行和与列和。对于一个矩阵 $m$，第 $i$ 行的和为 $R_i = \\sum_j m_{ij}$（类别 $i$ 的总参考样本数），第 $j$ 列的和为 $C_j = \\sum_i m_{ij}$（类别 $j$ 的总分类样本数）。\n\n对于 $t=0$ 时的混淆矩阵 $m^{(0)}=\\begin{pmatrix} 520  80  30 \\\\ 70  540  60 \\\\ 20  50  530 \\end{pmatrix}$：\n行和为：\n$R_F^{(0)} = 520+80+30 = 630$\n$R_C^{(0)} = 70+540+60 = 670$\n$R_U^{(0)} = 20+50+530 = 600$\n\n列和为：\n$C_F^{(0)} = 520+70+20 = 610$\n$C_C^{(0)} = 80+540+50 = 670$\n$C_U^{(0)} = 30+60+530 = 620$\n\n$t=0$ 时的精度为：\n$PA_F^{(0)} = \\frac{520}{630} \\approx 0.8254$\n$PA_C^{(0)} = \\frac{540}{670} \\approx 0.8060$\n$PA_U^{(0)} = \\frac{530}{600} \\approx 0.8833$\n\n$UA_F^{(0)} = \\frac{520}{610} \\approx 0.8525$\n$UA_C^{(0)} = \\frac{540}{670} \\approx 0.8060$\n$UA_U^{(0)} = \\frac{530}{620} \\approx 0.8548$\n\n对于 $t=1$ 时的混淆矩阵 $m^{(1)}=\\begin{pmatrix} 480  90  40 \\\\ 60  570  70 \\\\ 25  65  540 \\end{pmatrix}$：\n行和为：\n$R_F^{(1)} = 480+90+40 = 610$\n$R_C^{(1)} = 60+570+70 = 700$\n$R_U^{(1)} = 25+65+540 = 630$\n\n列和为：\n$C_F^{(1)} = 480+60+25 = 565$\n$C_C^{(1)} = 90+570+65 = 725$\n$C_U^{(1)} = 40+70+540 = 650$\n\n$t=1$ 时的精度为：\n$PA_F^{(1)} = \\frac{480}{610} \\approx 0.7869$\n$PA_C^{(1)} = \\frac{570}{700} \\approx 0.8143$\n$PA_U^{(1)} = \\frac{540}{630} \\approx 0.8571$\n\n$UA_F^{(1)} = \\frac{480}{565} \\approx 0.8496$\n$UA_C^{(1)} = \\frac{570}{725} \\approx 0.7862$\n$UA_U^{(1)} = \\frac{540}{650} \\approx 0.8308$\n\n**第二部分：推导错误变化的表达式**\n\n令 $L^{(t)}$ 为时间 $t$ 像元的分类标签的随机变量，令 $T^{(t)}$ 为其真实（参考）标签的随机变量。我们感兴趣的是从 $t=0$ 的分类森林到 $t=1$ 的分类农田的观测变化，即事件 $L^{(0)}=F$ 和 $L^{(1)}=C$。\n\n问题要求这些观测变化中“错误”的预期比例。如果潜在的真实标签与分类标签匹配，即 $T^{(0)}=F$ 且 $T^{(1)}=C$，则观测到的变化是“真实”的。否则，观测到的变化是“错误”的。我们需要在给定观测的情况下，找出错误变化的概率。\n令 $P(\\text{false}) = P( (T^{(0)}, T^{(1)}) \\neq (F,C) | L^{(0)}=F, L^{(1)}=C )$。这与真实变化的概率是互补的：\n$P(\\text{false}) = 1 - P( T^{(0)}=F, T^{(1)}=C | L^{(0)}=F, L^{(1)}=C )$。\n\n问题指出，用户精度（UA）被视为分类标签正确的后验概率的估计。即：\n$UA_{b}^{(t)} = P(T^{(t)}=b | L^{(t)}=b)$。\n\n关键假设是两个时间点的类别标签的正确性是独立的。这意味着在给定分类标签的情况下，$t=0$ 时分类正确的事件与 $t=1$ 时分类正确的事件是独立的。我们可以将联合条件概率表示为乘积：\n$P( T^{(0)}=F, T^{(1)}=C | L^{(0)}=F, L^{(1)}=C ) = P( T^{(0)}=F | L^{(0)}=F ) \\times P( T^{(1)}=C | L^{(1)}=C )$。\n\n将用户精度代入此表达式，\"真实\"变化的概率为：\n$P(\\text{true}) = UA_F^{(0)} \\times UA_C^{(1)}$。\n\n“错误”变化的比例 $f_{\\text{false}}$ 是其补集：\n$f_{\\text{false}} = 1 - P(\\text{true}) = 1 - ( UA_F^{(0)} \\times UA_C^{(1)} )$。\n这就是所求的表达式。\n\n**第三部分：数值评估**\n\n我们需要使用 $t=0$ 时森林和 $t=1$ 时农田的特定用户精度来评估 $f_{\\text{false}}$。从第一部分可知：\n$UA_F^{(0)} = \\frac{m_{FF}^{(0)}}{\\sum_{a} m_{aF}^{(0)}} = \\frac{520}{520+70+20} = \\frac{520}{610}$。\n$UA_C^{(1)} = \\frac{m_{CC}^{(1)}}{\\sum_{a} m_{aC}^{(1)}} = \\frac{570}{90+570+65} = \\frac{570}{725}$。\n\n现在，我们将这些值代入推导出的表达式中：\n$f_{\\text{false}} = 1 - \\left( \\frac{520}{610} \\times \\frac{570}{725} \\right)$。\n\n在相乘之前先简化分数：\n$\\frac{520}{610} = \\frac{52}{61}$。\n$\\frac{570}{725} = \\frac{114 \\times 5}{145 \\times 5} = \\frac{114}{145}$。\n\n现在，代入简化后的分数：\n$f_{\\text{false}} = 1 - \\left( \\frac{52}{61} \\times \\frac{114}{145} \\right) = 1 - \\frac{52 \\times 114}{61 \\times 145} = 1 - \\frac{5928}{8845}$。\n\n为了进行减法，我们找到一个公分母：\n$f_{\\text{false}} = \\frac{8845}{8845} - \\frac{5928}{8845} = \\frac{8845 - 5928}{8845} = \\frac{2917}{8845}$。\n\n最后，我们计算小数值并四舍五入到四位有效数字：\n$f_{\\text{false}} = \\frac{2917}{8845} \\approx 0.32984737...$\n四舍五入到四位有效数字得到 $0.3298$。\n\n因此，在给定假设下，观测到的从森林到农田的变化中，约有 33% 预计是分类错误的产物。交叉列表矩阵 $N$ 为问题提供了背景信息，但其数值对于计算这个特定的概率比例而言并非必需。",
            "answer": "$$\n\\boxed{0.3298}\n$$"
        }
    ]
}
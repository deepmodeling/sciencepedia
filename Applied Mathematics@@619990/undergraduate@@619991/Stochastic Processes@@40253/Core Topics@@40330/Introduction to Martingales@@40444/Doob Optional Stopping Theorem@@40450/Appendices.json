{"hands_on_practices": [{"introduction": "We begin with a tangible scenario that, at its heart, is a classic \"gambler's ruin\" problem. This exercise demonstrates how to analyze a discrete-time random process by identifying an underlying martingale structure. By applying the Optional Stopping Theorem, we can elegantly calculate the probability of the process reaching a 'goal' state before a 'penalty' state, a fundamental technique in risk analysis and sequential decision-making [@problem_id:1298885].", "problem": "Consider a deck of $N$ cards, with one specially designated \"Target\" card. The deck is shuffled according to the following procedure at each time step:\n1. A card is selected uniformly at random from the entire deck of $N$ cards (i.e., each card has a $1/N$ probability of being chosen).\n2. If the selected card is the Target card itself, the Target is moved to the top of the deck (position 1).\n3. If the selected card is not the Target card and its current position is *above* the Target card, the Target card is moved down by one position (e.g., from position $p$ to $p+1$).\n4. If the selected card is not the Target card and its current position is *below* the Target card, the Target card's position remains unchanged.\n\nAll other cards are shifted as necessary to accommodate the Target's movement while maintaining their relative order. Positions are numbered from $1$ (top) to $N$ (bottom).\n\nThe process begins with the Target card at an initial position $p_0$. The process stops when the Target card's position first reaches either a 'goal' position $k$ or a 'penalty' position 1.\n\nGiven that the integer parameters satisfy $1 < p_0 < k \\le N$, determine the probability that the Target card reaches the goal position $k$ before it reaches the penalty position 1. Express your answer as a function of $p_0$ and $k$.", "solution": "Let $f(p)$ denote the probability that, starting with the Target at position $p$, the process hits the goal position $k$ before the penalty position $1$. We have boundary conditions $f(1)=0$ and $f(k)=1$. For $2 \\leq p \\leq k-1$, apply first-step analysis using the law of total probability over the outcome of the random card selection.\n\nFrom position $p$:\n- With probability $\\frac{1}{N}$, the Target is selected and moved to position $1$, leading to immediate absorption at the penalty, contributing $\\frac{1}{N}\\cdot f(1)=0$.\n- With probability $\\frac{p-1}{N}$, a card above the Target is selected, so the Target moves to $p+1$, contributing $\\frac{p-1}{N} f(p+1)$.\n- With probability $\\frac{N-p}{N}$, a card below the Target is selected, so the position remains $p$, contributing $\\frac{N-p}{N} f(p)$.\n\nThus, for $2 \\leq p \\leq k-1$,\n$$\nf(p) \\;=\\; \\frac{p-1}{N} f(p+1) \\;+\\; \\frac{N-p}{N} f(p).\n$$\nRearranging,\n$$\nf(p) - \\frac{N-p}{N} f(p) \\;=\\; \\frac{p-1}{N} f(p+1)\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{p}{N} f(p) \\;=\\; \\frac{p-1}{N} f(p+1)\n\\;\\;\\Longrightarrow\\;\\;\np\\, f(p) \\;=\\; (p-1)\\, f(p+1).\n$$\nThis recurrence yields\n$$\nf(p+1) \\;=\\; \\frac{p}{p-1}\\, f(p),\n$$\nand by induction,\n$$\nf(p) \\;=\\; (p-1)\\, f(2), \\quad \\text{for } 2 \\leq p \\leq k.\n$$\nImposing the boundary condition $f(k)=1$ gives\n$$\n1 \\;=\\; f(k) \\;=\\; (k-1)\\, f(2) \\;\\;\\Longrightarrow\\;\\; f(2) \\;=\\; \\frac{1}{k-1}.\n$$\nTherefore,\n$$\nf(p) \\;=\\; \\frac{p-1}{k-1}, \\quad \\text{for } 2 \\leq p \\leq k.\n$$\nWith initial position $p_{0}$ satisfying $1 < p_{0} < k$, the required probability is\n$$\nf(p_{0}) \\;=\\; \\frac{p_{0}-1}{k-1}.\n$$", "answer": "$$\\boxed{\\frac{p_{0}-1}{k-1}}$$", "id": "1298885"}, {"introduction": "Next, we transition from discrete steps to the continuous path of a Brownian motion, a cornerstone of modern stochastic processes. This problem asks for the expected time it takes for a particle to exit a fixed interval, a question with applications from finance to physics. The true pedagogical value here lies in the careful application of the Optional Stopping Theorem, as we must first justify its use with unbounded stopping times by employing a critical technique involving bounded approximations [@problem_id:2989359].", "problem": "Let $\\{B_{t}\\}_{t \\ge 0}$ be a one-dimensional standard Brownian motion (BM) on a filtered probability space $(\\Omega,\\mathcal{F},\\{\\mathcal{F}_{t}\\}_{t \\ge 0},\\mathbb{P})$ satisfying the usual conditions, with $B_{0}=0$. Define the first exit time from the open interval $(-a,a)$, for a fixed constant $a>0$, by\n$$\n\\tau_{-a,a} \\coloneqq \\inf\\{t \\ge 0 : B_{t} \\notin (-a,a)\\}.\n$$\nUsing only fundamental properties of Brownian motion including Itô’s formula and the quadratic variation $[B]_{t}=t$, proceed as follows:\n- Prove that the process $M_{t} \\coloneqq B_{t}^{2}-t$ is an $\\{\\mathcal{F}_{t}\\}$-martingale.\n- Prove that $\\mathbb{P}(\\tau_{-a,a}<\\infty)=1$.\n- Carefully justify the integrability of $\\tau_{-a,a}$ and compute the expectation $\\mathbb{E}[\\tau_{-a,a}]$ by applying the optional stopping theorem (OST) at the bounded stopping times $\\tau_{-a,a}\\wedge n$ for $n\\in\\mathbb{N}$, and then letting $n \\to \\infty$ with all limiting steps justified.\n\nExpress your final answer as a closed-form analytic expression in terms of $a$. No numerical approximation is required.", "solution": "We will address the three tasks in the order presented. Let $\\tau = \\tau_{-a,a}$.\n\n**1. Proof that $M_{t} \\coloneqq B_{t}^{2}-t$ is a martingale**\n\nTo prove that $M_t$ is a martingale with respect to the filtration $\\{\\mathcal{F}_t\\}_{t \\ge 0}$, we must show three properties:\ni. $M_t$ is adapted to $\\{\\mathcal{F}_t\\}$.\nii. $M_t$ is integrable, i.e., $\\mathbb{E}[|M_t|] < \\infty$ for all $t \\ge 0$.\niii. For all $s < t$, $\\mathbb{E}[M_t | \\mathcal{F}_s] = M_s$.\n\ni. Adaptivity: Since $\\{B_t\\}_{t \\ge 0}$ is an $\\{\\mathcal{F}_t\\}$-adapted process, $B_t^2$ is also $\\mathcal{F}_t$-adapted for each $t \\ge 0$. The function $g(t)=t$ is deterministic and thus adapted. Therefore, their difference $M_t = B_t^2 - t$ is $\\mathcal{F}_t$-adapted.\n\nii. Integrability: For any $t \\ge 0$, we have $\\mathbb{E}[|M_t|] = \\mathbb{E}[|B_t^2 - t|] \\le \\mathbb{E}[B_t^2] + |t|$. Since $B_t$ is a standard Brownian motion, $B_t \\sim N(0, t)$, so its second moment is $\\mathbb{E}[B_t^2] = \\text{Var}(B_t) + (\\mathbb{E}[B_t])^2 = t + 0^2 = t$. Thus, $\\mathbb{E}[|M_t|] \\le t + t = 2t$. For any finite $t$, $2t < \\infty$, so $M_t$ is integrable.\n\niii. Martingale property: We use Itô's formula for the function $f(x) = x^2$ applied to the process $B_t$. We have $f'(x) = 2x$ and $f''(x) = 2$. Itô's formula states:\n$$\nf(B_t) - f(B_0) = \\int_0^t f'(B_s) dB_s + \\frac{1}{2} \\int_0^t f''(B_s) d[B]_s\n$$\nSubstituting $f(x)=x^2$ and its derivatives, and using the given conditions $B_0=0$ and $[B]_t=t$:\n$$\nB_t^2 - 0 = \\int_0^t 2B_s dB_s + \\frac{1}{2} \\int_0^t 2 \\, ds\n$$\n$$\nB_t^2 = 2\\int_0^t B_s dB_s + t\n$$\nRearranging the terms, we get an expression for $M_t$:\n$$\nM_t = B_t^2 - t = 2\\int_0^t B_s dB_s\n$$\nThe right-hand side is an Itô integral, which is a martingale. This completes the proof that $M_t = B_t^2-t$ is a martingale.\n\n**2. Proof that $\\mathbb{P}(\\tau < \\infty) = 1$**\n\nThe event $\\{\\tau > t\\}$ is the event that the Brownian motion has stayed within the interval $(-a,a)$ for the entire time interval $[0,t]$. This implies that at time $t$, its position must be within $(-a,a)$.\n$$\n\\mathbb{P}(\\tau > t) \\le \\mathbb{P}(|B_t| < a)\n$$\nFor a standard Brownian motion, $B_t \\sim N(0, t)$. As $t \\to \\infty$, the variance grows, and the probability of being confined to a finite interval $(-a, a)$ goes to zero.\n$$\n\\lim_{t \\to \\infty} \\mathbb{P}(|B_t| < a) = \\lim_{t \\to \\infty} \\mathbb{P}\\left(|B_t/\\sqrt{t}| < a/\\sqrt{t}\\right) = \\mathbb{P}(|Z| < 0) = 0\n$$\nwhere $Z \\sim N(0,1)$. By the Squeeze Theorem, $\\lim_{t \\to \\infty} \\mathbb{P}(\\tau > t) = 0$.\nThe event that the process never exits is $\\{\\tau = \\infty\\}$. By continuity of probability,\n$$\n\\mathbb{P}(\\tau = \\infty) = \\lim_{n\\to\\infty} \\mathbb{P}(\\tau > n) = 0\n$$\nTherefore, $\\mathbb{P}(\\tau < \\infty) = 1 - \\mathbb{P}(\\tau = \\infty) = 1$.\n\n**3. Justification and computation of $\\mathbb{E}[\\tau]$**\n\nWe use the sequence of bounded stopping times $\\tau_n \\coloneqq \\tau \\wedge n$ for $n \\in \\mathbb{N}$. By the Optional Stopping Theorem applied to the martingale $M_t = B_t^2 - t$ and the bounded stopping time $\\tau_n$:\n$$\n\\mathbb{E}[M_{\\tau_n}] = \\mathbb{E}[M_0] = 0\n$$\nSubstituting the definition of $M_t$, we get $\\mathbb{E}[B_{\\tau_n}^2 - \\tau_n] = 0$, which by linearity of expectation yields:\n$$\n\\mathbb{E}[\\tau_n] = \\mathbb{E}[B_{\\tau_n}^2]\n$$\nThis holds for all $n \\in \\mathbb{N}$. We now take the limit as $n \\to \\infty$.\n\nOn the left-hand side, the sequence of random variables $\\{\\tau_n\\}_{n\\in\\mathbb{N}}$ is non-negative and non-decreasing. As shown in part 2, $\\lim_{n\\to\\infty} \\tau_n = \\tau$ almost surely. By the Monotone Convergence Theorem:\n$$\n\\lim_{n\\to\\infty} \\mathbb{E}[\\tau_n] = \\mathbb{E}[\\lim_{n\\to\\infty} \\tau_n] = \\mathbb{E}[\\tau]\n$$\nOn the right-hand side, consider the sequence of random variables $\\{B_{\\tau_n}^2\\}_{n\\in\\mathbb{N}}$. By definition of $\\tau$, $|B_s| \\le a$ for all $s \\le \\tau_n$. Thus, $|B_{\\tau_n}| \\le a$, which means the sequence is uniformly bounded by $a^2$. As $n \\to \\infty$, $\\tau_n \\to \\tau$ almost surely. By the continuity of Brownian paths, $B_{\\tau_n} \\to B_\\tau$ almost surely. By continuity at the stopping time, $|B_\\tau| = a$ almost surely, so $B_\\tau^2 = a^2$ almost surely. Since the sequence $\\{B_{\\tau_n}^2\\}$ converges almost surely to $a^2$ and is dominated by the integrable constant $a^2$, the Bounded Convergence Theorem allows us to interchange the limit and expectation:\n$$\n\\lim_{n\\to\\infty} \\mathbb{E}[B_{\\tau_n}^2] = \\mathbb{E}[\\lim_{n\\to\\infty} B_{\\tau_n}^2] = \\mathbb{E}[a^2] = a^2\n$$\nEquating the limits of both sides of our original equation, we conclude:\n$$\n\\mathbb{E}[\\tau] = a^2\n$$\nSince $a^2$ is finite, this justifies that $\\tau$ is integrable.", "answer": "$$\n\\boxed{a^{2}}\n$$", "id": "2989359"}, {"introduction": "Building on the previous example, we now consider a more dynamic challenge: what is the expected time for a Brownian motion to hit a linearly *moving* boundary? This problem illustrates the power of changing our frame of reference to simplify a complex question, transforming it into a problem about a process with drift hitting a constant level. It serves as an excellent opportunity to apply Wald's identity, a direct and profoundly useful consequence of the Optional Stopping Theorem for processes that have a systematic directional tendency [@problem_id:1298873].", "problem": "Let $B_t$ be a standard one-dimensional Brownian motion starting from the origin, i.e., $B_0 = 0$. Consider the stopping time $\\tau$ defined as the first time the process $B_t$ hits a linearly moving boundary. The boundary is described by the equation $y(t) = a + bt$, where $a$ and $b$ are real-valued constants. The stopping time is thus given by $\\tau = \\inf\\{t \\ge 0 : B_t = a + bt\\}$.\n\nAssuming that the parameters satisfy the conditions $a > 0$ and $b < 0$, determine the expected value of the stopping time, $\\mathbb{E}[\\tau]$. Your final answer should be a symbolic expression in terms of $a$ and $b$.", "solution": "To find the expected stopping time $\\mathbb{E}[\\tau]$, we can use the Optional Stopping Theorem. The key is to define a process that is a martingale and relates to the stopping condition.\n\n1.  **Define a new process.** Let $X_t = B_t - bt$. The stopping condition $B_t = a + bt$ is equivalent to $X_t = a$. Therefore, $\\tau$ is the first time the process $X_t$ hits the constant level $a$. The process starts at $X_0 = B_0 - b(0) = 0$.\n\n2.  **Identify a martingale.** The process $X_t$ is a Brownian motion with a constant drift of $\\mu = -b$. A standard result states that the process $M_t = X_t - \\mu t$ is a martingale. In our case:\n    $$ M_t = (B_t - bt) - (-b)t = B_t - bt + bt = B_t $$\n    So, the standard Brownian motion $B_t$ itself is our martingale, with $M_0 = B_0 = 0$.\n\n3.  **Apply the Optional Stopping Theorem.** For a process with positive drift ($\\mu = -b > 0$) starting at 0 and stopping at a positive level $a$, it can be shown that $\\mathbb{E}[\\tau] < \\infty$. This is a sufficient condition to apply the Optional Stopping Theorem to the martingale $M_t = B_t$.\n    $$ \\mathbb{E}[M_\\tau] = \\mathbb{E}[M_0] $$\n    Substituting $M_t = B_t$ and $B_0=0$, we get:\n    $$ \\mathbb{E}[B_\\tau] = 0 $$\n\n4.  **Solve for $\\mathbb{E}[\\tau]$.** By definition of the stopping time $\\tau$, we have $B_\\tau = a + b\\tau$. Taking the expectation of this identity:\n    $$ \\mathbb{E}[B_\\tau] = \\mathbb{E}[a + b\\tau] = a + b\\mathbb{E}[\\tau] $$\n    Equating our two expressions for $\\mathbb{E}[B_\\tau]$ yields:\n    $$ a + b\\mathbb{E}[\\tau] = 0 $$\n    Solving for the expected time gives:\n    $$ \\mathbb{E}[\\tau] = -\\frac{a}{b} $$\n    Since $a>0$ and $b0$, the result is positive, which is physically sensible. This result is a direct application of Wald's Identity.", "answer": "$$\\boxed{-\\frac{a}{b}}$$", "id": "1298873"}]}
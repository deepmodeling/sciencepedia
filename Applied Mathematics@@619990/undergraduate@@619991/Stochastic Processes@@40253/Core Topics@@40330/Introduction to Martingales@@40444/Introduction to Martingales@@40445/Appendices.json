{"hands_on_practices": [{"introduction": "The concept of a martingale provides a mathematical formalization of a \"fair game.\" This fundamental exercise [@problem_id:1310299] invites you to test this property on a symmetric random walk on a circular path. You will need to carefully apply the definition of a martingale, paying close attention to how the process behaves at the boundaries, which often reveals subtle but crucial aspects of the system's dynamics.", "problem": "A particle performs a symmetric random walk on a set of $N$ vertices arranged in a circle, labeled $0, 1, 2, \\dots, N-1$. Let the position of the particle at time step $n$ be the discrete-time stochastic process $\\{X_n\\}_{n \\ge 0}$, where $n$ is a non-negative integer. The state space of the process is the set of vertices $S = \\{0, 1, \\dots, N-1\\}$, where $N$ is a fixed integer and $N \\ge 3$.\n\nAt each time step, the particle moves from its current vertex $k$ to an adjacent vertex. It moves clockwise to vertex $(k+1) \\pmod N$ with probability $1/2$ and counter-clockwise to vertex $(k-1) \\pmod N$ with probability $1/2$. The initial position $X_0$ can be any vertex in $S$.\n\nLet $\\{\\mathcal{F}_n\\}_{n \\ge 0}$ be the natural filtration generated by the process, i.e., $\\mathcal{F}_n = \\sigma(X_0, X_1, \\dots, X_n)$.\n\nWhich one of the following statements accurately describes the stochastic process $\\{X_n\\}_{n \\ge 0}$ with respect to the filtration $\\{\\mathcal{F}_n\\}_{n \\ge 0}$?\n\nA. $\\{X_n\\}$ is a martingale for all integers $N \\ge 3$.\n\nB. $\\{X_n\\}$ is a martingale, but only for even values of $N \\ge 3$.\n\nC. $\\{X_n\\}$ is not a martingale for any integer $N \\ge 3$.\n\nD. $\\{X_n\\}$ is a submartingale for all integers $N \\ge 3$.\n\nE. $\\{X_n\\}$ is a supermartingale for all integers $N \\ge 3$.", "solution": "We recall the martingale definition: an integrable, adapted process $\\{X_{n}\\}$ with respect to a filtration $\\{\\mathcal{F}_{n}\\}$ is a martingale if and only if\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid \\mathcal{F}_{n}\\right]=X_{n}\\quad\\text{a.s.}\n$$\nIt is a submartingale if $\\mathbb{E}\\!\\left[X_{n+1}\\mid \\mathcal{F}_{n}\\right]\\geq X_{n}$ a.s., and a supermartingale if $\\mathbb{E}\\!\\left[X_{n+1}\\mid \\mathcal{F}_{n}\\right]\\leq X_{n}$ a.s. The process $\\{X_{n}\\}$ is adapted to its natural filtration by construction, and is integrable because $0\\leq X_{n}\\leq N-1$ for all $n$.\n\nBecause the process is a time-homogeneous Markov chain on the cycle with transition probabilities depending only on the current state, we have\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid \\mathcal{F}_{n}\\right]=\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}\\right].\n$$\nFor a current state $k\\in S=\\{0,1,\\dots,N-1\\}$, the next state equals $(k+1)\\bmod N$ with probability $\\frac{1}{2}$ and $(k-1)\\bmod N$ with probability $\\frac{1}{2}$. Denote by $\\tilde{k\\pm1}$ the representative in $\\{0,1,\\dots,N-1\\}$ of $(k\\pm1)\\bmod N$. Then\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}=k\\right]=\\frac{1}{2}\\,\\tilde{k+1}+\\frac{1}{2}\\,\\tilde{k-1}.\n$$\nFor interior states $k\\in\\{1,2,\\dots,N-2\\}$, there is no wrap-around and $\\tilde{k+1}=k+1$, $\\tilde{k-1}=k-1$, hence\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}=k\\right]=\\frac{1}{2}(k+1)+\\frac{1}{2}(k-1)=k.\n$$\nAt the boundary states the wrap-around matters. For $k=0$, the neighbors are $1$ and $N-1$, so\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}=0\\right]=\\frac{1}{2}\\cdot 1+\\frac{1}{2}\\cdot (N-1)=\\frac{N}{2}\\neq 0\\quad\\text{for any }N\\geq 3.\n$$\nFor $k=N-1$, the neighbors are $0$ and $N-2$, so\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}=N-1\\right]=\\frac{1}{2}\\cdot 0+\\frac{1}{2}\\cdot (N-2)=\\frac{N-2}{2}\\neq N-1\\quad\\text{for any }N\\geq 3.\n$$\nTherefore the martingale condition fails at $k=0$ and $k=N-1}$ for all integers $N\\geq 3$, so $\\{X_{n}\\}$ is not a martingale for any such $N$.\n\nIt is also neither a submartingale nor a supermartingale uniformly in $N\\geq 3$: at $k=0$ one has\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}=0\\right]=\\frac{N}{2}>0=X_{n},\n$$\nwhich violates the supermartingale inequality, while at $k=N-1$ one has\n$$\n\\mathbb{E}\\!\\left[X_{n+1}\\mid X_{n}=N-1\\right]=\\frac{N-2}{2}<N-1=X_{n},\n$$\nwhich violates the submartingale inequality.\n\nHence the correct choice is that $\\{X_{n}\\}$ is not a martingale for any integer $N\\geq 3$.", "answer": "$$\\boxed{C}$$", "id": "1310299"}, {"introduction": "While many processes are not \"fair games\" in the martingale sense, we can often isolate their predictable drift, which is an idea formalized by the Doob decomposition theorem. This exercise [@problem_id:1310309] challenges you to transform an unfair game, represented by a submartingale, into a fair one by constructing a \"compensator\" process. This hands-on application is key to understanding how to analyze and model processes with inherent trends.", "problem": "A gambler starts with an initial wealth $W_0 > 0$. At each discrete time step $n=1, 2, 3, \\dots$, the gambler plays a game based on the roll of a fair six-sided die. Let $W_{n-1}$ denote the gambler's wealth just before the $n$-th roll. The rules of the game are as follows:\n\n- If the die shows a 1 or a 2 (with probability $1/3$), the gambler's wealth is halved, so their new wealth is $W_n = \\frac{1}{2}W_{n-1}$.\n- If the die shows a 3, 4, 5, or 6 (with probability $2/3$), the gambler's wealth increases by a fraction $\\alpha = 1/2$, so their new wealth is $W_n = (1 + 1/2)W_{n-1} = \\frac{3}{2}W_{n-1}$.\n\nLet $(\\mathcal{F}_n)_{n \\geq 0}$ be the natural filtration generated by the sequence of die rolls, where $\\mathcal{F}_0$ is the trivial sigma-algebra. The wealth process $(W_n)_{n \\geq 0}$ is not a martingale with respect to this filtration.\n\nYour task is to find the unique \"compensating\" process $(A_n)_{n \\geq 0}$ that makes the overall game fair in a specific sense. Find the predictable process $A_n$, with $A_0=0$, such that the new process defined by $M_n = W_n - A_n$ is a martingale with respect to the filtration $(\\mathcal{F}_n)_{n \\geq 0}$. A process $(A_n)$ is predictable if, for each $n \\geq 1$, the value of $A_n$ is known at time $n-1$ (i.e., $A_n$ is $\\mathcal{F}_{n-1}$-measurable).\n\nProvide a closed-form expression for $A_n$ for $n \\geq 1$. Your answer should be in terms of the history of the wealth process, namely $W_0, W_1, \\dots, W_{n-1}$.", "solution": "The problem asks us to find a predictable process $A_n$ with $A_0=0$ such that $M_n = W_n - A_n$ is a martingale with respect to the filtration $(\\mathcal{F}_n)_{n \\geq 0}$.\n\nThe definition of a martingale states that for all $n \\geq 1$, the process $M_n$ must satisfy $E[M_n | \\mathcal{F}_{n-1}] = M_{n-1}$.\n\nLet's substitute the definition of $M_n$ into this equation:\n$$\nE[W_n - A_n | \\mathcal{F}_{n-1}] = W_{n-1} - A_{n-1}\n$$\n\nUsing the linearity of conditional expectation, we can split the term on the left side:\n$$\nE[W_n | \\mathcal{F}_{n-1}] - E[A_n | \\mathcal{F}_{n-1}] = W_{n-1} - A_{n-1}\n$$\n\nThe process $A_n$ is defined as being predictable. This means that for any $n \\ge 1$, $A_n$ is $\\mathcal{F}_{n-1}$-measurable. A variable that is measurable with respect to a sigma-algebra is treated as a constant when taking conditional expectation with respect to that sigma-algebra. Therefore, $E[A_n | \\mathcal{F}_{n-1}] = A_n$.\n\nSubstituting this back into our equation, we get:\n$$\nE[W_n | \\mathcal{F}_{n-1}] - A_n = W_{n-1} - A_{n-1}\n$$\n\nWe can rearrange this equation to find a recurrence relation for $A_n$:\n$$\nA_n - A_{n-1} = E[W_n | \\mathcal{F}_{n-1}] - W_{n-1}\n$$\n\nNow, we need to compute $E[W_n | \\mathcal{F}_{n-1}]$. The wealth at time $n$, $W_n$, depends on the wealth at time $n-1$, $W_{n-1}$, and the outcome of the $n$-th die roll. At time $n-1$, the value of $W_{n-1}$ is known, so it is $\\mathcal{F}_{n-1}$-measurable and can be factored out of the conditional expectation.\n\nLet $X_n$ be the outcome of the $n$-th die roll. The process $W_n$ can be written as $W_n = W_{n-1} \\cdot f(X_n)$, where $f(X_n)$ is the multiplicative factor.\nThe factor $f(X_n)$ is $\\frac{1}{2}$ if $X_n \\in \\{1, 2\\}$ and $\\frac{3}{2}$ if $X_n \\in \\{3, 4, 5, 6\\}$.\n\nSo, we have:\n$$\nE[W_n | \\mathcal{F}_{n-1}] = E[W_{n-1} \\cdot f(X_n) | \\mathcal{F}_{n-1}] = W_{n-1} E[f(X_n) | \\mathcal{F}_{n-1}]\n$$\n\nSince the die rolls are independent, the outcome of the $n$-th roll $X_n$ is independent of the past rolls $(X_1, \\dots, X_{n-1})$, and thus independent of the filtration $\\mathcal{F}_{n-1}$. Therefore, the conditional expectation of $f(X_n)$ is just its unconditional expectation:\n$$\nE[f(X_n) | \\mathcal{F}_{n-1}] = E[f(X_n)]\n$$\n\nWe can calculate $E[f(X_n)]$ using the probabilities of the outcomes:\n$$\nE[f(X_n)] = P(X_n \\in \\{1, 2\\}) \\cdot \\left(\\frac{1}{2}\\right) + P(X_n \\in \\{3, 4, 5, 6\\}) \\cdot \\left(\\frac{3}{2}\\right)\n$$\n$$\nE[f(X_n)] = \\left(\\frac{2}{6}\\right) \\cdot \\left(\\frac{1}{2}\\right) + \\left(\\frac{4}{6}\\right) \\cdot \\left(\\frac{3}{2}\\right) = \\left(\\frac{1}{3}\\right) \\cdot \\left(\\frac{1}{2}\\right) + \\left(\\frac{2}{3}\\right) \\cdot \\left(\\frac{3}{2}\\right)\n$$\n$$\nE[f(X_n)] = \\frac{1}{6} + 1 = \\frac{7}{6}\n$$\n\nSo, the conditional expectation of $W_n$ is:\n$$\nE[W_n | \\mathcal{F}_{n-1}] = W_{n-1} \\cdot \\frac{7}{6}\n$$\n(This confirms that $W_n$ is a submartingale, as $E[W_n | \\mathcal{F}_{n-1}] > W_{n-1}$.)\n\nNow we substitute this result back into our recurrence relation for $A_n$:\n$$\nA_n - A_{n-1} = \\frac{7}{6}W_{n-1} - W_{n-1} = \\frac{1}{6}W_{n-1}\n$$\n\nThis gives us the increment of the process $A_n$. To find $A_n$ itself, we can write it as a sum of its increments, starting from $A_0$.\n$$\nA_n = A_0 + \\sum_{k=1}^{n} (A_k - A_{k-1})\n$$\n\nWe are given $A_0=0$. Substituting the expression for the increments:\n$$\nA_n = 0 + \\sum_{k=1}^{n} \\left(\\frac{1}{6}W_{k-1}\\right)\n$$\n\nThis sum can be written out by changing the index of summation. Let $j=k-1$. When $k=1$, $j=0$. When $k=n$, $j=n-1$.\n$$\nA_n = \\frac{1}{6} \\sum_{j=0}^{n-1} W_j\n$$\nReplacing the dummy index $j$ back with $k$ for convention gives the final expression for the compensating process:\n$$\nA_n = \\frac{1}{6} \\sum_{k=0}^{n-1} W_k\n$$\nThis expression for $A_n$ depends only on $W_0, W_1, \\ldots, W_{n-1}$, which are all known at time $n-1$, confirming that $A_n$ is a predictable process.", "answer": "$$\\boxed{\\frac{1}{6}\\sum_{k=0}^{n-1} W_k}$$", "id": "1310309"}, {"introduction": "Simple random walks are the building blocks for many complex stochastic models, but functions of a random walk are not always martingales. In this practice [@problem_id:1310328], you will discover how to craft a martingale from a cubic function of a random walk by finding the precise compensator term. This exercise sharpens your algebraic skills with conditional expectations and illustrates the art of constructing martingales, a common task in quantitative finance and stochastic calculus.", "problem": "Consider a simple symmetric random walk $\\{S_n\\}_{n \\ge 0}$ on the integers. The walk starts at $S_0 = 0$ and evolves according to $S_n = \\sum_{i=1}^{n} Y_i$ for $n \\ge 1$, where $\\{Y_i\\}_{i \\ge 1}$ is a sequence of independent and identically distributed random variables with the probability distribution $P(Y_i = 1) = P(Y_i = -1) = 1/2$.\n\nLet $\\mathcal{F}_n = \\sigma(Y_1, \\dots, Y_n)$ be the natural filtration representing the history of the walk up to time $n$. A stochastic process $\\{X_n\\}_{n \\ge 0}$ is a martingale with respect to this filtration if it is adapted to $\\mathcal{F}_n$, $E[|X_n|] < \\infty$ for all $n$, and it satisfies the condition $E[X_{n+1} | \\mathcal{F}_n] = X_n$.\n\nNow, consider a new process $\\{M_n\\}_{n \\ge 0}$ defined by $M_n = S_n^3 - a n S_n$, where $a$ is a real constant. Determine the specific value of the constant $a$ that makes $\\{M_n\\}$ a martingale with respect to the filtration $\\{\\mathcal{F}_n\\}$.", "solution": "We seek the constant $a$ such that $M_{n} = S_{n}^{3} - a n S_{n}$ is a martingale with respect to $\\{\\mathcal{F}_{n}\\}$. The martingale condition requires $E[M_{n+1} \\mid \\mathcal{F}_{n}] = M_{n}$ for all $n$. Since $S_{n+1} = S_{n} + Y_{n+1}$ with $Y_{n+1}$ independent of $\\mathcal{F}_{n}$, mean zero, and symmetric with $P(Y_{n+1}=1)=P(Y_{n+1}=-1)=\\frac{1}{2}$, we use the following facts:\n- $E[Y_{n+1} \\mid \\mathcal{F}_{n}] = 0$,\n- $E[Y_{n+1}^{2} \\mid \\mathcal{F}_{n}] = 1$,\n- $E[Y_{n+1}^{3} \\mid \\mathcal{F}_{n}] = 0$,\nand $S_{n}$ is $\\mathcal{F}_{n}$-measurable.\n\nCompute the conditional expectation:\n$$\nM_{n+1} = S_{n+1}^{3} - a (n+1) S_{n+1} = (S_{n} + Y_{n+1})^{3} - a (n+1) (S_{n} + Y_{n+1}).\n$$\nExpand the cube using the binomial theorem:\n$$\n(S_{n} + Y_{n+1})^{3} = S_{n}^{3} + 3 S_{n}^{2} Y_{n+1} + 3 S_{n} Y_{n+1}^{2} + Y_{n+1}^{3}.\n$$\nTake conditional expectation given $\\mathcal{F}_{n}$ term-by-term, using independence and the listed moments:\n$$\nE[S_{n+1}^{3} \\mid \\mathcal{F}_{n}] = S_{n}^{3} + 3 S_{n}^{2} E[Y_{n+1} \\mid \\mathcal{F}_{n}] + 3 S_{n} E[Y_{n+1}^{2} \\mid \\mathcal{F}_{n}] + E[Y_{n+1}^{3} \\mid \\mathcal{F}_{n}] = S_{n}^{3} + 3 S_{n}.\n$$\nAlso,\n$$\nE[S_{n+1} \\mid \\mathcal{F}_{n}] = E[S_{n} + Y_{n+1} \\mid \\mathcal{F}_{n}] = S_{n} + E[Y_{n+1} \\mid \\mathcal{F}_{n}] = S_{n}.\n$$\nTherefore,\n$$\nE[M_{n+1} \\mid \\mathcal{F}_{n}] = E[S_{n+1}^{3} \\mid \\mathcal{F}_{n}] - a (n+1) E[S_{n+1} \\mid \\mathcal{F}_{n}] = (S_{n}^{3} + 3 S_{n}) - a (n+1) S_{n}.\n$$\nFor the martingale condition, set this equal to $M_{n} = S_{n}^{3} - a n S_{n}$:\n$$\nS_{n}^{3} + 3 S_{n} - a (n+1) S_{n} = S_{n}^{3} - a n S_{n}.\n$$\nCancel $S_{n}^{3}$ and rearrange:\n$$\n3 S_{n} - a (n+1) S_{n} = - a n S_{n}.\n$$\nAdd $a (n+1) S_{n}$ to both sides:\n$$\n3 S_{n} = a S_{n}.\n$$\nThis identity must hold for all values taken by $S_{n}$ with positive probability, hence it forces\n$$\na = 3.\n$$\nThe process is adapted since $M_{n}$ is a function of $S_{n}$, and integrable because $|S_{n}| \\leq n$ implies $|S_{n}^{3}| \\leq n^{3}$ and $|n S_{n}| \\leq n^{2}$, ensuring $E[|M_{n}|] < \\infty$. Therefore, with $a=3$, $\\{M_{n}\\}$ is a martingale.", "answer": "$$\\boxed{3}$$", "id": "1310328"}]}
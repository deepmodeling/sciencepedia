{"hands_on_practices": [{"introduction": "We begin with a function that is continuous everywhere but has \"sharp corners\" where it fails to be differentiable in the classical sense. This exercise [@problem_id:2156704] demonstrates the fundamental technique of using integration by parts across different sub-intervals. You will see how the weak derivative naturally aligns with the classical derivative on the smooth portions of the function, providing a robust way to \"differentiate through\" the kinks.", "problem": "Consider the function $h: \\mathbb{R} \\to \\mathbb{R}$ defined by the expression $h(x) = |x^2 - 1|$. This function is continuous on the entire real line but is not differentiable at all points in the classical sense. However, it possesses a weak derivative. Your task is to find the weak derivative of $h(x)$ on the domain $\\mathbb{R}$.", "solution": "We are given $h(x)=|x^{2}-1|$, which is continuous on $\\mathbb{R}$ and smooth on each of the three open intervals $(-\\infty,-1)$, $(-1,1)$, and $(1,\\infty)$. On these intervals we can write $h$ without the absolute value:\n- If $|x|1$, then $x^{2}-10$ and $h(x)=x^{2}-1$, so the classical derivative is $h'(x)=2x$ on $(-\\infty,-1)\\cup(1,\\infty)$.\n- If $|x|1$, then $x^{2}-10$ and $h(x)=1-x^{2}$, so the classical derivative is $h'(x)=-2x$ on $(-1,1)$.\n\nWe claim that the weak derivative $v$ of $h$ is given by\n$$\nv(x)=\\begin{cases}\n2x,  |x|1,\\\\\n-2x,  |x|1,\n\\end{cases}\n$$\nwith arbitrary values at $x=\\pm 1$ (these values are irrelevant for the weak derivative, as they affect a set of measure zero).\n\nTo verify this, let $\\varphi\\in C_{c}^{\\infty}(\\mathbb{R})$. Split the integral into the three intervals where $h$ is smooth and integrate by parts on each:\n$$\n\\int_{\\mathbb{R}} h(x)\\varphi'(x)\\,dx\n=\\int_{(-\\infty,-1)}(x^{2}-1)\\varphi'(x)\\,dx+\\int_{(-1,1)}(1-x^{2})\\varphi'(x)\\,dx+\\int_{(1,\\infty)}(x^{2}-1)\\varphi'(x)\\,dx.\n$$\nUsing integration by parts on each interval,\n$$\n\\int_{(-\\infty,-1)}(x^{2}-1)\\varphi'(x)\\,dx\n=\\big[(x^{2}-1)\\varphi(x)\\big]_{-\\infty}^{-1}-\\int_{(-\\infty,-1)}2x\\,\\varphi(x)\\,dx,\n$$\n$$\n\\int_{(-1,1)}(1-x^{2})\\varphi'(x)\\,dx\n=\\big[(1-x^{2})\\varphi(x)\\big]_{-1}^{1}-\\int_{(-1,1)}(-2x)\\,\\varphi(x)\\,dx,\n$$\n$$\n\\int_{(1,\\infty)}(x^{2}-1)\\varphi'(x)\\,dx\n=\\big[(x^{2}-1)\\varphi(x)\\big]_{1}^{\\infty}-\\int_{(1,\\infty)}2x\\,\\varphi(x)\\,dx.\n$$\nBecause $\\varphi$ has compact support, the contributions at $\\pm\\infty$ vanish. Moreover, $h(-1)=h(1)=0$, so the boundary terms at $x=\\pm 1$ vanish as well. Therefore,\n$$\n\\int_{\\mathbb{R}} h(x)\\varphi'(x)\\,dx\n=-\\int_{(-\\infty,-1)}2x\\,\\varphi(x)\\,dx+\\int_{(-1,1)}2x\\,\\varphi(x)\\,dx-\\int_{(1,\\infty)}2x\\,\\varphi(x)\\,dx.\n$$\nThis can be written as\n$$\n\\int_{\\mathbb{R}} h(x)\\varphi'(x)\\,dx\n=-\\int_{\\mathbb{R}} v(x)\\,\\varphi(x)\\,dx,\n$$\nwith\n$$\nv(x)=\\begin{cases}\n2x,  |x|1,\\\\\n-2x,  |x|1,\n\\end{cases}\n$$\nand any values at $x=\\pm 1$. Hence $v$ is the weak derivative of $h$ on $\\mathbb{R}$. Equivalently, one may write $v(x)=2x\\,\\mathrm{sign}(x^{2}-1)$ almost everywhere.", "answer": "$$\\boxed{\\begin{cases}\n2x,  |x|1,\\\\\n-2x,  |x|1,\\\\\n0,  x=\\pm 1\n\\end{cases}}$$", "id": "2156704"}, {"introduction": "Next, we advance to functions with jump discontinuities, which are frequently encountered in areas like signal processing and shock wave analysis. This compelling practice [@problem_id:2156743] will reveal that a weak derivative is not always a simple function; it can be a more general object called a distribution, which may involve entities like the Dirac delta function to precisely describe instantaneous changes. This exercise is key to appreciating the full power and scope of the weak derivative concept.", "problem": "In the study of differential equations and signal analysis, it is often necessary to consider derivatives for functions that are not differentiable in the classical sense. The concept of a weak derivative extends the notion of differentiation to a broader class of functions, including those with jump discontinuities.\n\nConsider the function $f(x) = x - \\lfloor x \\rfloor$ defined on the open interval $\\Omega = (0, 3)$, where $\\lfloor x \\rfloor$ denotes the floor function, which yields the greatest integer less than or equal to $x$. This function is a standard example of a sawtooth wave.\n\nCompute the weak derivative of $f(x)$ on the interval $\\Omega = (0, 3)$. Your answer should be an analytic expression, which may involve the Dirac delta function, denoted by $\\delta(x-a)$ for a unit impulse at the point $x=a$.", "solution": "We work on the open interval $\\Omega=(0,3)$ and use the definition of weak derivative: a distribution $g$ is a weak derivative of $f$ if for every $\\varphi \\in C_{c}^{\\infty}(0,3)$,\n$$\n\\int_{0}^{3} f(x)\\,\\varphi'(x)\\,dx \\;=\\; -\\int_{0}^{3} g(x)\\,\\varphi(x)\\,dx.\n$$\nThe function $f(x)=x-\\lfloor x\\rfloor$ is piecewise $C^{1}$ with\n$$\nf(x)=x \\text{ on }(0,1),\\quad f(x)=x-1 \\text{ on }(1,2),\\quad f(x)=x-2 \\text{ on }(2,3),\n$$\nso the classical derivative equals $1$ on each open subinterval. The function has jump discontinuities at $x=1$ and $x=2$ with\n$$\nf(1^{-})=1,\\quad f(1^{+})=0,\\quad f(2^{-})=1,\\quad f(2^{+})=0.\n$$\nFor any $\\varphi \\in C_{c}^{\\infty}(0,3)$,\n$$\n\\int_{0}^{3} f\\,\\varphi' \\,dx\n= \\int_{0}^{1} x\\,\\varphi' \\,dx + \\int_{1}^{2} (x-1)\\,\\varphi' \\,dx + \\int_{2}^{3} (x-2)\\,\\varphi' \\,dx.\n$$\nIntegrating by parts on each subinterval and summing, we get\n$$\n\\int_{0}^{3} f\\,\\varphi' \\,dx\n= \\Big[x\\varphi\\Big]_{0}^{1} - \\int_{0}^{1} \\varphi \\,dx\n+ \\Big[(x-1)\\varphi\\Big]_{1}^{2} - \\int_{1}^{2} \\varphi \\,dx\n+ \\Big[(x-2)\\varphi\\Big]_{2}^{3} - \\int_{2}^{3} \\varphi \\,dx.\n$$\nUsing $\\varphi \\in C_{c}^{\\infty}(0,3)$ implies $\\varphi(0)=\\varphi(3)=0$, and evaluating the boundary terms yields\n$$\n\\int_{0}^{3} f\\,\\varphi' \\,dx\n= \\varphi(1) + \\varphi(2) - \\int_{0}^{3} \\varphi(x)\\,dx.\n$$\nTherefore, comparing with the definition,\n$$\n-\\int_{0}^{3} g(x)\\,\\varphi(x)\\,dx = -\\int_{0}^{3} \\varphi(x)\\,dx + \\varphi(1) + \\varphi(2),\n$$\nwhich is equivalent to\n$$\n\\int_{0}^{3} g(x)\\,\\varphi(x)\\,dx = \\int_{0}^{3} \\varphi(x)\\,dx - \\varphi(1) - \\varphi(2).\n$$\nRecognizing the distributions corresponding to these functionals, we conclude\n$$\ng(x) = 1 - \\delta(x-1) - \\delta(x-2)\n$$\nas a distribution on $(0,3)$. This is the weak derivative of $f$ on $\\Omega$.", "answer": "$$\\boxed{1-\\delta(x-1)-\\delta(x-2)}$$", "id": "2156743"}, {"introduction": "Having seen that weak derivatives can handle both kinks and jumps, we must ask a crucial question: does every function have a weak derivative? This final practice [@problem_id:2156727] provides the answer by exploring a carefully constructed counterexample. By investigating a continuous but rapidly oscillating function, you will discover the critical role of local integrability ($L^1_{loc}$) and understand the precise conditions under which a weak derivative fails to exist, sharpening your understanding of the theory's boundaries.", "problem": "In the study of partial differential equations, the concept of a weak derivative generalizes the notion of a classical derivative to functions that may not be continuously differentiable. This allows for a mathematically rigorous treatment of solutions that arise in physical models.\n\nLet $\\Omega$ be an open interval on the real line. A function $f \\in L^1_{loc}(\\Omega)$ (i.e., $f$ is locally integrable on $\\Omega$) is said to have a weak derivative $v \\in L^1_{loc}(\\Omega)$ if the following equation holds for every test function $\\phi$, which is an infinitely differentiable function with compact support in $\\Omega$ (denoted $\\phi \\in C_c^\\infty(\\Omega)$):\n$$\n\\int_{\\Omega} f(x) \\phi'(x) \\,dx = - \\int_{\\Omega} v(x) \\phi(x) \\,dx\n$$\n\nConsider the function $f(x)$ defined on the interval $\\Omega = (-1, 1)$ as:\n$$\nf(x) = \\begin{cases}\nx \\cos\\left(\\frac{1}{x}\\right)  \\text{if } x \\neq 0 \\\\\n0  \\text{if } x = 0\n\\end{cases}\n$$\nThis function is continuous everywhere on $(-1, 1)$. Investigate the existence of its weak derivative on this interval. Which of the following statements is correct?\n\nA. The weak derivative exists and is given by $v(x) = \\cos(1/x)$ for $x \\neq 0$.\n\nB. The weak derivative exists and is given by $v(x) = \\cos(1/x) + (1/x)\\sin(1/x)$ for $x \\neq 0$.\n\nC. The weak derivative does not exist because the classical derivative of $f(x)$ is not defined at $x=0$.\n\nD. The weak derivative does not exist because the candidate for the weak derivative is not a locally integrable function on $(-1,1)$.\n\nE. The weak derivative exists and is the zero function, $v(x) = 0$.", "solution": "We are given $f \\in L^{1}_{loc}((-1,1))$ defined by $f(x)=x\\cos(1/x)$ for $x\\neq 0$ and $f(0)=0$. First, compute the classical derivative on $(-1,0)\\cup(0,1)$. For $x\\neq 0$,\n$$\nf'(x)=\\frac{d}{dx}\\left[x\\cos\\left(\\frac{1}{x}\\right)\\right]\n=\\cos\\left(\\frac{1}{x}\\right)+x\\cdot\\left(-\\sin\\left(\\frac{1}{x}\\right)\\right)\\cdot\\left(-\\frac{1}{x^{2}}\\right)\n=\\cos\\left(\\frac{1}{x}\\right)+\\frac{1}{x}\\sin\\left(\\frac{1}{x}\\right).\n$$\nWe examine the distributional (weak) derivative. For any $\\phi\\in C_{c}^{\\infty}((-1,1))$, split the integral at $0$ and integrate by parts on each side (legitimate because $f$ is smooth on $(-1,0)$ and $(0,1)$):\n$$\n\\int_{-1}^{1} f(x)\\phi'(x)\\,dx\n=\\int_{-1}^{0} f\\phi'\\,dx+\\int_{0}^{1} f\\phi'\\,dx\n=\\left[f\\phi\\right]_{-1}^{0^{-}}-\\int_{-1}^{0} f'\\phi\\,dx+\\left[f\\phi\\right]_{0^{+}}^{1}-\\int_{0}^{1} f'\\phi\\,dx.\n$$\nBecause $\\phi$ has compact support in $(-1,1)$, $\\phi(-1)=\\phi(1)=0$. Using the continuity $f(0^{-})=f(0^{+})=f(0)=0$, the boundary terms at $0$ cancel, so\n$$\n\\int_{-1}^{1} f(x)\\phi'(x)\\,dx=-\\int_{(-1,0)\\cup(0,1)}\\left(\\cos\\left(\\frac{1}{x}\\right)+\\frac{1}{x}\\sin\\left(\\frac{1}{x}\\right)\\right)\\phi(x)\\,dx.\n$$\nTherefore, if a weak derivative $v\\in L^{1}_{loc}((-1,1))$ exists, it must satisfy $v(x)=\\cos(1/x)+\\frac{1}{x}\\sin(1/x)$ for almost every $x\\neq 0$ (by uniqueness of distributional representatives on open sets away from $0$ achieved by choosing test functions supported in subintervals that do not meet $0$).\n\nWe now check whether this candidate is locally integrable near $0$. Consider, for any $\\delta\\in(0,1)$,\n$$\n\\int_{0}^{\\delta}\\left|\\frac{1}{x}\\sin\\left(\\frac{1}{x}\\right)\\right|\\,dx.\n$$\nWith the substitution $t=\\frac{1}{x}$ (so $dx=-\\frac{dt}{t^{2}}$), we obtain\n$$\n\\int_{0}^{\\delta}\\left|\\frac{1}{x}\\sin\\left(\\frac{1}{x}\\right)\\right|\\,dx\n=\\int_{1/\\delta}^{\\infty}\\frac{|\\sin t|}{t}\\,dt.\n$$\nTo show divergence, for each integer $k$ large enough define $J_{k}=[k\\pi+\\frac{\\pi}{6},\\,k\\pi+\\frac{5\\pi}{6}]$. On $J_{k}$ we have $|\\sin t|\\geq \\frac{1}{2}$ and, for $t\\in J_{k}$, $t\\leq (k+1)\\pi$, hence $\\frac{1}{t}\\geq \\frac{1}{(k+1)\\pi}$. Thus\n$$\n\\int_{J_{k}}\\frac{|\\sin t|}{t}\\,dt\\geq \\frac{1}{2}\\int_{J_{k}}\\frac{1}{(k+1)\\pi}\\,dt\n=\\frac{1}{2}\\cdot \\frac{1}{(k+1)\\pi}\\cdot \\frac{2\\pi}{3}\n=\\frac{1}{3(k+1)}.\n$$\nSumming over $k$ shows\n$$\n\\int_{1/\\delta}^{\\infty}\\frac{|\\sin t|}{t}\\,dt\\geq \\sum_{k=K}^{N}\\frac{1}{3(k+1)}\\xrightarrow[N\\to\\infty]{}\\infty,\n$$\nhence\n$$\n\\int_{0}^{\\delta}\\left|\\frac{1}{x}\\sin\\left(\\frac{1}{x}\\right)\\right|\\,dx=\\infty.\n$$\nTherefore $f'(x)=\\cos(1/x)+\\frac{1}{x}\\sin(1/x)$ fails to belong to $L^{1}_{loc}$ near $0$, and no $v\\in L^{1}_{loc}((-1,1))$ can represent the distributional derivative, since away from $0$ any such $v$ must coincide with $f'$ almost everywhere. Consequently, $f$ does not have a weak derivative in the sense of the given definition.\n\nOption A is incorrect because it omits the $\\frac{1}{x}\\sin(1/x)$ term. Option C is false since weak differentiability does not require classical differentiability at every point. Option E is false because the distributional derivative is not zero. The correct statement is that the weak derivative does not exist because the candidate is not locally integrable on $(-1,1)$.", "answer": "$$\\boxed{D}$$", "id": "2156727"}]}
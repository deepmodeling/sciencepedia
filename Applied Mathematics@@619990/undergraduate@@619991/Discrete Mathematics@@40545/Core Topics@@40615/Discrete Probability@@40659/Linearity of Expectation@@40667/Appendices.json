{"hands_on_practices": [{"introduction": "This first exercise provides a perfect starting point for applying linearity of expectation. We will tackle a tangible scenario: finding the expected number of a specific two-bead pattern on a necklace, a setup analogous to analyzing patterns in circular DNA or data streams [@problem_id:1381835]. This problem illustrates the foundational technique of defining indicator variables for simple, local events and then summing their expectations, powerfully bypassing the fact that adjacent events are not independent.", "id": "1381835", "problem": "A circular necklace is constructed using $n$ beads, where $n$ is an integer greater than or equal to 2. The beads are arranged in a circle. For each of the $n$ positions on the necklace, a bead is chosen independently. The probability of any given bead being black is $p$, and the probability of it being white is $1-p$. A special decorative feature, called a \"clasp\", is formed by an adjacent pair of beads where a black bead is immediately followed by a white bead when moving clockwise around the necklace. Determine the expected number of clasps on the necklace. Your answer should be an analytic expression in terms of $n$ and $p$.\n\n", "solution": "Label the $n$ positions on the necklace as $1,2,\\dots,n$ in clockwise order, and interpret index $n+1$ as $1$ to account for the circular nature. Define indicator random variables for each adjacent pair:\n$$\nX_{i}=\\begin{cases}\n1 & \\text{if position } i \\text{ is black and position } i+1 \\text{ is white},\\\\\n0 & \\text{otherwise},\n\\end{cases}\n$$\nfor $i=1,2,\\dots,n$. The total number of clasps is then\n$$\nX=\\sum_{i=1}^{n}X_{i}.\n$$\nBy linearity of expectation,\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{n}\\mathbb{E}[X_{i}].\n$$\nFor each $i$, using independence of bead colors,\n$$\n\\mathbb{E}[X_{i}]=\\mathbb{P}(X_{i}=1)=\\mathbb{P}(\\text{black at } i \\text{ and white at } i+1)=\\mathbb{P}(\\text{black at } i)\\,\\mathbb{P}(\\text{white at } i+1)=p(1-p).\n$$\nTherefore,\n$$\n\\mathbb{E}[X]=\\sum_{i=1}^{n}p(1-p)=n\\,p(1-p).\n$$", "answer": "$$\\boxed{n\\,p\\left(1-p\\right)}$$"}, {"introduction": "Building on the previous exercise, we now move into the fascinating realm of random permutations. This practice asks for the expected number of \"local maxima\" in a randomly ordered sequence, a concept with applications in data analysis and signal processing [@problem_id:1381841]. The key skill you will develop here is using symmetry arguments — a profoundly useful tool when dealing with random arrangements — to effortlessly calculate the probability needed for each indicator variable.", "id": "1381841", "problem": "Consider a sequence $a_1, a_2, \\ldots, a_n$ formed by a random permutation of the set of integers $\\{1, 2, \\ldots, n\\}$, where $n$ is an integer such that $n \\ge 2$. In such a permutation, every possible ordering of the $n$ integers is equally likely.\n\nAn element $a_i$ in the sequence is defined as a \"local maximum\" according to the following rules based on its position $i$:\n- For $i=1$, $a_1$ is a local maximum if $a_1 > a_2$.\n- For $i=n$, $a_n$ is a local maximum if $a_n > a_{n-1}$.\n- For $1 < i < n$, $a_i$ is a local maximum if $a_i > a_{i-1}$ and $a_i > a_{i+1}$.\n\nDetermine the expected number of local maxima in such a random permutation. Your answer should be a symbolic expression in terms of $n$.\n\n", "solution": "Let $S$ be the total number of local maxima in the random permutation. Define indicator variables $X_{i}$ for $i \\in \\{1,2,\\ldots,n\\}$ by setting $X_{i}=1$ if $a_{i}$ is a local maximum (according to the given positional rules) and $X_{i}=0$ otherwise. Then\n$$\nS=\\sum_{i=1}^{n} X_{i}.\n$$\nBy linearity of expectation,\n$$\n\\mathbb{E}[S]=\\sum_{i=1}^{n} \\mathbb{E}[X_{i}]=\\sum_{i=1}^{n} \\mathbb{P}(a_{i}\\text{ is a local maximum}).\n$$\n\nFor the endpoints:\n- At $i=1$, $a_{1}$ is a local maximum if and only if $a_{1}>a_{2}$. Since the two values $a_{1}$ and $a_{2}$ are equally likely to be in either order, \n$$\n\\mathbb{P}(a_{1}\\text{ is a local maximum})=\\frac{1}{2}.\n$$\n- Similarly, at $i=n$, $a_{n}$ is a local maximum if and only if $a_{n}>a_{n-1}$, giving\n$$\n\\mathbb{P}(a_{n}\\text{ is a local maximum})=\\frac{1}{2}.\n$$\n\nFor interior positions $1<i<n$, consider the triple $(a_{i-1},a_{i},a_{i+1})$. In a random permutation, the relative order of these three values is uniformly distributed over the $3!$ possible orderings, and by symmetry each of the three elements is equally likely to be the largest among the three. The event that $a_{i}$ is a local maximum is exactly the event that $a_{i}$ is larger than both $a_{i-1}$ and $a_{i+1}$, i.e., that $a_{i}$ is the maximum of the triple. Therefore,\n$$\n\\mathbb{P}(a_{i}\\text{ is a local maximum})=\\frac{1}{3}\\quad\\text{for all }i\\text{ with }1<i<n.\n$$\n\nSumming these contributions,\n$$\n\\mathbb{E}[S]=\\left(\\frac{1}{2}+\\frac{1}{2}\\right)+(n-2)\\cdot\\frac{1}{3}=1+\\frac{n-2}{3}=\\frac{n+1}{3}.\n$$", "answer": "$$\\boxed{\\frac{n+1}{3}}$$"}, {"introduction": "This final practice demonstrates the remarkable power of linearity of expectation for solving problems that seem combinatorially daunting. We will find the expected number of a sophisticated, non-local '231 pattern' within a random permutation, a classic problem in bioinformatics and computer science [@problem_id:1381838]. This exercise highlights how the method allows us to elegantly manage the immense dependencies between the events we are counting, making an otherwise intractable calculation surprisingly straightforward.", "id": "1381838", "problem": "Consider a set of $n$ distinct data points, numerically labeled $\\{1, 2, \\ldots, n\\}$. These data points are arranged in a sequence by a random process, such that every possible ordering (permutation) is equally likely. Let $\\pi$ denote such a random permutation, where $\\pi(i)$ is the value at the $i$-th position in the sequence, for $i \\in \\{1, 2, \\ldots, n\\}$.\n\nWe are interested in a specific structural pattern within the sequence known as a \"231 pattern\". A 231 pattern is formed by a triplet of indices $(i, j, k)$ such that $1 \\le i < j < k \\le n$ and the values at these positions satisfy the relationship $\\pi(k) < \\pi(i) < \\pi(j)$.\n\nFor a given integer $n \\ge 3$, determine the expected number of 231 patterns in a uniformly random permutation of $\\{1, 2, \\ldots, n\\}$. Express your answer as a closed-form analytic expression in terms of $n$.\n\n", "solution": "Let $T$ denote the total number of $231$ patterns in a uniformly random permutation $\\pi$ of $\\{1,2,\\ldots,n\\}$, with $n \\ge 3$. For each ordered triple of indices $(i,j,k)$ with $1 \\le i < j < k \\le n$, define the indicator variable\n$$\nX_{i,j,k} =\n\\begin{cases}\n1, & \\text{if } \\pi(k) < \\pi(i) < \\pi(j), \\\\\n0, & \\text{otherwise}.\n\\end{cases}\n$$\nThen\n$$\nT = \\sum_{1 \\le i < j < k \\le n} X_{i,j,k}.\n$$\nBy linearity of expectation,\n$$\n\\mathbb{E}[T] = \\sum_{1 \\le i < j < k \\le n} \\mathbb{E}[X_{i,j,k}] = \\sum_{1 \\le i < j < k \\le n} \\mathbb{P}\\big(\\pi(k) < \\pi(i) < \\pi(j)\\big).\n$$\nFor any fixed triple $(i,j,k)$, the relative order of the three values $\\{\\pi(i),\\pi(j),\\pi(k)\\}$ is uniformly distributed over the $3!$ possible orders, each with probability $\\frac{1}{3!}$. Exactly one of these $6$ orders corresponds to the event $\\pi(k) < \\pi(i) < \\pi(j)$, hence\n$$\n\\mathbb{P}\\big(\\pi(k) < \\pi(i) < \\pi(j)\\big) = \\frac{1}{6}.\n$$\nThere are $\\binom{n}{3}$ choices of $(i,j,k)$ with $i<j<k$, so\n$$\n\\mathbb{E}[T] = \\binom{n}{3} \\cdot \\frac{1}{6} = \\frac{1}{6} \\cdot \\frac{n(n-1)(n-2)}{6} = \\frac{n(n-1)(n-2)}{36}.\n$$\nThis is the required closed-form expression in terms of $n$.", "answer": "$$\\boxed{\\frac{n(n-1)(n-2)}{36}}$$"}]}
{"hands_on_practices": [{"introduction": "To begin, let's ground our understanding of ancestors and descendants in the simplest non-trivial directed acyclic graph: a path. This exercise [@problem_id:1481062] challenges you to move from the abstract definition of an ancestor-descendant pair to a concrete quantitative result by counting all such pairs in a linear sequence. Mastering this fundamental calculation provides a strong foundation for analyzing more complex graph structures.", "problem": "In a distributed ledger system, transactions are recorded in a chronological sequence to form a chain. Consider a simplified model of such a chain consisting of $n$ blocks, labeled $B_1, B_2, \\dots, B_n$ according to their order in the chain. The structure of this chain can be represented by a directed graph where the blocks are vertices. A directed edge exists from block $B_i$ to block $B_{i+1}$ for all $i$ from $1$ to $n-1$, signifying that $B_{i+1}$ was appended immediately after $B_i$.\n\nIn this graph, we define a block $B_a$ as an \"ancestor\" of another block $B_d$ if there is a directed path from vertex $B_a$ to vertex $B_d$. The pair $(B_a, B_d)$ is then referred to as an \"ancestor-descendant pair\". A block is not considered an ancestor of itself.\n\nYour task is to determine the total number of distinct ancestor-descendant pairs in a chain of $n$ blocks. State your answer as a single, closed-form analytic expression in terms of $n$.", "solution": "Label the blocks in order as $B_{1}, B_{2}, \\dots, B_{n}$ with directed edges from $B_{i}$ to $B_{i+1}$ for $i=1,\\dots,n-1$. A directed path from $B_{a}$ to $B_{d}$ exists if and only if $a<d$, because edges only point forward and the unique path from $B_{a}$ to $B_{d}$ has length $d-a$ when $d>a$, while no path exists if $d\\leq a$.\n\nTherefore, the set of ancestor-descendant pairs is exactly the set of ordered pairs $(a,d)$ with $1\\leq a<d\\leq n$. For each fixed $a\\in\\{1,\\dots,n-1\\}$, the number of descendants $d$ is $n-a$. Summing over all valid $a$ gives the total number of pairs:\n$$\n\\sum_{a=1}^{n-1} (n-a) \\,=\\, \\sum_{k=1}^{n-1} k \\,=\\, \\frac{(n-1)n}{2}.\n$$\nHere we used the identity $\\sum_{k=1}^{m} k = \\frac{m(m+1)}{2}$ with $m=n-1$. Hence, the total number of distinct ancestor-descendant pairs is $\\frac{n(n-1)}{2}$.", "answer": "$$\\boxed{\\frac{n(n-1)}{2}}$$", "id": "1481062"}, {"introduction": "Having explored a simple chain, we now advance to a more structured graph that models relationships between two distinct groups. This practice problem [@problem_id:1481064] introduces the important concept of *common ancestors* within a directed bipartite graph. By analyzing this setup, you will discover how the overall architecture of a network can lead to surprisingly uniform and predictable patterns of shared ancestry.", "problem": "Consider a simplified model of a digital content platform. The users of the platform are partitioned into two disjoint sets: a set $C$ of 'Content Creators' and a set $S$ of 'Subscribers'. The platform contains $m$ Content Creators and $n$ Subscribers.\n\nThe flow of information is modeled as a directed graph where an edge from user $u$ to user $v$ indicates that content from $u$ is delivered to $v$. The platform is designed with a specific architecture: for every Content Creator $c \\in C$ and for every Subscriber $s \\in S$, there is a directed edge from $c$ to $s$. No other edges exist in the graph (i.e., there are no edges between creators, no edges between subscribers, and no edges from subscribers to creators).\n\nIn this graph, a user $u$ is defined as an 'ancestor' of another user $v$ if there exists a directed path of one or more edges from $u$ to $v$.\n\nSuppose the platform has $m=23$ Content Creators and $n=57$ Subscribers. If you choose any two distinct subscribers, how many common ancestors will they have?", "solution": "Let the set of all vertices in the graph be $V = C \\cup S$, where $C$ is the set of Content Creators and $S$ is the set of Subscribers. We are given the sizes of these sets as $|C| = m = 23$ and $|S| = n = 57$. The sets $C$ and $S$ are disjoint.\n\nThe problem defines the edge set $E$ of this directed graph. An edge $(u, v)$ exists if and only if $u \\in C$ and $v \\in S$. This describes a directed complete bipartite graph with all edges oriented from partition $C$ to partition $S$.\n\nWe are asked to find the number of common ancestors for any two distinct subscribers. Let's choose two arbitrary distinct subscribers, $s_1 \\in S$ and $s_2 \\in S$, where $s_1 \\neq s_2$.\n\nFirst, let's determine the set of ancestors for a single subscriber, say $s_1$. A user $u$ is an ancestor of $s_1$ if there is a directed path from $u$ to $s_1$. Let's analyze the possible paths in this graph. Any path must consist of a sequence of vertices connected by directed edges. Since all edges go from a vertex in $C$ to a vertex in $S$, any path in this graph can have a maximum length of 1. A path of length 1 from $u$ to $s_1$ exists if there is a direct edge $(u, s_1)$.\n\nAccording to the graph's structure, an edge $(u, s_1)$ exists if and only if $u \\in C$. Because the graph is a *complete* bipartite graph in this direction, for *every* creator $c \\in C$, the edge $(c, s_1)$ exists. Therefore, every single vertex in the set $C$ is an ancestor of $s_1$. There are no paths of length greater than 1, so we have found all ancestors.\nThe set of ancestors of $s_1$, denoted $Anc(s_1)$, is the set $C$.\n$$Anc(s_1) = \\{u \\in V \\mid \\text{there exists a path from } u \\text{ to } s_1\\} = C$$\n\nSimilarly, for the second distinct subscriber $s_2$, we can determine its set of ancestors. A user $u$ is an ancestor of $s_2$ if there is a path from $u$ to $s_2$. Again, this requires an edge $(u, s_2)$ to exist, which is true for all $u \\in C$. Thus, the set of ancestors of $s_2$ is also the entire set of creators, $C$.\n$$Anc(s_2) = C$$\n\nThe set of common ancestors for $s_1$ and $s_2$ is the intersection of their individual ancestor sets:\n$$\\text{Common Ancestors} = Anc(s_1) \\cap Anc(s_2) = C \\cap C = C$$\n\nThe problem asks for the *number* of common ancestors, which is the cardinality of this intersection set.\n$$|\\text{Common Ancestors}| = |C|$$\n\nWe are given that the number of Content Creators is $m = 23$. Therefore, $|C| = 23$.\nThe number of common ancestors for any pair of distinct subscribers is 23. Note that the number of subscribers, $n=57$, is irrelevant to the final answer.", "answer": "$$\\boxed{23}$$", "id": "1481064"}, {"introduction": "A true test of understanding in science and mathematics involves not just applying rules, but also recognizing their limitations. This exercise [@problem_id:1481045] asks you to engage in critical thinking by evaluating a plausible-sounding, yet incorrect, claim about the relationship between ancestry and vertex out-degrees. Finding the counterexample will sharpen your intuition and highlight that local properties of a vertex do not always constrain the properties of its ancestors.", "problem": "In graph theory, a directed graph is a set of vertices connected by edges, where the edges have a direction associated with them. A Directed Acyclic Graph (DAG) is a directed graph with no directed cycles.\n\nWithin a DAG, we define the following relationships and properties:\n- A vertex $u$ is an **ancestor** of a vertex $v$ if there exists a directed path from $u$ to $v$. The vertex $v$ is then called a **descendant** of $u$. By this definition, a vertex is not an ancestor of itself.\n- The **out-degree** of a vertex is the number of outgoing edges from that vertex.\n\nConsider the following claim: \"For any Directed Acyclic Graph, if a vertex $u$ is an ancestor of a vertex $v$, then the out-degree of $u$ must be greater than or equal to the out-degree of $v$.\"\n\nYour task is to identify which of the following graphs, described by their vertex set $V$ and edge set $E$, serves as a counterexample to this claim. An edge $(x, y)$ represents a directed edge from vertex $x$ to vertex $y$.\n\nA. $V = \\{A, B, C, D, E\\}$, $E = \\{(A, B), (B, C), (C, D), (C, E)\\}$\nB. $V = \\{A, B, C, D\\}$, $E = \\{(A, B), (A, C), (A, D)\\}$\nC. $V = \\{A, B, C\\}$, $E = \\{(A, B), (B, C), (C, A)\\}$\nD. $V = \\{A, B, C, D\\}$, $E = \\{(A, B), (B, C), (C, D)\\}$\nE. $V = \\{A, B, C, D\\}$, $E = \\{(A, C), (A, D), (B, C), (B, D)\\}$", "solution": "We are to find a Directed Acyclic Graph (DAG) that violates the claim: if $u$ is an ancestor of $v$, then $\\deg^{+}(u) \\geq \\deg^{+}(v)$, where $\\deg^{+}(x)$ denotes the out-degree of vertex $x$. A counterexample must be a DAG with some ancestor pair $(u,v)$ such that $\\deg^{+}(u) < \\deg^{+}(v)$.\n\nAnalyze each option:\n\nOption A: $V=\\{A,B,C,D,E\\}$, $E=\\{(A,B),(B,C),(C,D),(C,E)\\}$. This graph has no directed cycles, so it is a DAG. Compute out-degrees:\n$$\n\\deg^{+}(A)=1,\\quad \\deg^{+}(B)=1,\\quad \\deg^{+}(C)=2,\\quad \\deg^{+}(D)=0,\\quad \\deg^{+}(E)=0.\n$$\nThere is a directed path $A \\to B \\to C$, so $A$ is an ancestor of $C$. Compare out-degrees:\n$$\n\\deg^{+}(A)=1 \\quad \\text{and} \\quad \\deg^{+}(C)=2,\n$$\nhence $\\deg^{+}(A) < \\deg^{+}(C)$, contradicting the claim. Therefore, A is a counterexample.\n\nOption B: $V=\\{A,B,C,D\\}$, $E=\\{(A,B),(A,C),(A,D)\\}$. This is a DAG. Out-degrees:\n$$\n\\deg^{+}(A)=3,\\quad \\deg^{+}(B)=0,\\quad \\deg^{+}(C)=0,\\quad \\deg^{+}(D)=0.\n$$\nThe only ancestor-descendant relations are $A$ being an ancestor of $B$, $C$, and $D$. For each such $v$,\n$$\n\\deg^{+}(A)=3 \\geq 0=\\deg^{+}(v),\n$$\nso the claim holds; not a counterexample.\n\nOption C: $V=\\{A,B,C\\}$, $E=\\{(A,B),(B,C),(C,A)\\}$. This graph contains a directed cycle $A \\to B \\to C \\to A$, so it is not a DAG. It cannot serve as a counterexample to a claim restricted to DAGs.\n\nOption D: $V=\\{A,B,C,D\\}$, $E=\\{(A,B),(B,C),(C,D)\\}$. This is a DAG. Out-degrees:\n$$\n\\deg^{+}(A)=1,\\quad \\deg^{+}(B)=1,\\quad \\deg^{+}(C)=1,\\quad \\deg^{+}(D)=0.\n$$\nFor any ancestor pair along the chain, the inequality $\\deg^{+}(u) \\geq \\deg^{+}(v)$ holds (equal for nonterminal descendants, strictly greater when $v=D$). Not a counterexample.\n\nOption E: $V=\\{A,B,C,D\\}$, $E=\\{(A,C),(A,D),(B,C),(B,D)\\}$. This is a DAG. Out-degrees:\n$$\n\\deg^{+}(A)=2,\\quad \\deg^{+}(B)=2,\\quad \\deg^{+}(C)=0,\\quad \\deg^{+}(D)=0.\n$$\nAncestors are $A$ or $B$ to $C$ or $D$, and in all cases $\\deg^{+}(u) \\geq \\deg^{+}(v)$ holds. Not a counterexample.\n\nTherefore, the unique counterexample among the options is A.", "answer": "$$\\boxed{A}$$", "id": "1481045"}]}
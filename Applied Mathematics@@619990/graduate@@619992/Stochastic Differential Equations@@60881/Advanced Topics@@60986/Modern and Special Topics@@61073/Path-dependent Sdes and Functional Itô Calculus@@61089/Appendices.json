{"hands_on_practices": [{"introduction": "To build proficiency in functional Itô calculus, we begin by computing the essential derivatives for a foundational type of path-dependent functional. This exercise [@problem_id:2990528] considers a functional defined by the integral of a path's history, of the form $F(t,\\omega)=\\psi(\\int_{0}^{t}\\omega(s)\\,ds)$. By applying the first-principle definitions, you will directly calculate the horizontal and vertical derivatives, uncovering a key structural property of functionals that depend on averaged, rather than instantaneous, path values.", "problem": "Let $T>0$ and consider the canonical space of real-valued continuous paths $\\Omega:=C([0,T],\\mathbb{R})$ equipped with the canonical process $X(t,\\omega)=\\omega(t)$. A functional $F:[0,T]\\times\\Omega\\to\\mathbb{R}$ is called non-anticipative if, for every $t\\in[0,T]$, $F(t,\\omega)$ depends only on the restriction of $\\omega$ to $[0,t]$. In the setting of Functional Itô calculus (FIC), the Dupire horizontal and vertical derivatives of a non-anticipative functional $F$ at $(t,\\omega)$ are defined by\n$$\n\\partial_t F(t,\\omega):=\\lim_{h\\downarrow 0}\\frac{F\\big(t+h,\\omega^{t}\\big)-F(t,\\omega)}{h},\n$$\nwhere $\\omega^{t}(s):=\\omega(s)$ for $s\\leq t$ and $\\omega^{t}(s):=\\omega(t)$ for $s>t$, and\n$$\n\\partial_{\\omega}F(t,\\omega):=\\lim_{h\\to 0}\\frac{F\\big(t,\\omega+h\\,\\mathbf{1}_{[t,T]}\\big)-F(t,\\omega)}{h},\n$$\nprovided the limits exist, where $\\mathbf{1}_{[t,T]}$ denotes the indicator function of the interval $[t,T]$.\n\nLet $F$ be given by\n$$\nF(t,\\omega)=\\psi\\!\\left(\\int_{0}^{t}\\omega(s)\\,ds\\right),\n$$\nwhere $\\psi\\in C^{2}(\\mathbb{R})$. Starting from the above definitions and the properties of Riemann integration and classical differentiation, derive closed-form expressions for $\\partial_{t}F(t,\\omega)$ and $\\partial_{\\omega}F(t,\\omega)$. Then, using first principles, analyze the structure of vertical perturbations for this functional and explain whether second vertical derivatives exist in a nontrivial way.\n\nYour final answer must consist only of the pair $\\big(\\partial_{t}F(t,\\omega),\\,\\partial_{\\omega}F(t,\\omega)\\big)$ written as a single row matrix. No rounding is required. No units are involved.", "solution": "The problem requires the calculation of the horizontal and vertical derivatives of the functional $F(t,\\omega)=\\psi(\\int_{0}^{t}\\omega(s)\\,ds)$ and an analysis of its second vertical derivative. We will address each part in sequence, starting from the given definitions.\n\nFirst, we calculate the horizontal derivative $\\partial_{t}F(t,\\omega)$. The definition is given as:\n$$\n\\partial_t F(t,\\omega):=\\lim_{h\\downarrow 0}\\frac{F\\big(t+h,\\omega^{t}\\big)-F(t,\\omega)}{h}\n$$\nThe evaluation of the functional $F$ at $(t+h, \\omega^t)$ is:\n$$\nF(t+h, \\omega^t) = \\psi\\left(\\int_{0}^{t+h} \\omega^t(s) \\, ds\\right)\n$$\nThe path $\\omega^t$ is defined as $\\omega^t(s) = \\omega(s)$ for $s \\le t$ and $\\omega^t(s) = \\omega(t)$ for $s > t$. We can split the integral as follows:\n$$\n\\int_{0}^{t+h} \\omega^t(s) \\, ds = \\int_{0}^{t} \\omega^t(s) \\, ds + \\int_{t}^{t+h} \\omega^t(s) \\, ds\n$$\nUsing the definition of $\\omega^t$, the first part of the integral becomes $\\int_{0}^{t} \\omega(s) \\, ds$. For the second part, over the interval $(t, t+h]$, we have $\\omega^t(s) = \\omega(t)$. Thus, the second integral is $\\int_{t}^{t+h} \\omega(t) \\, ds = \\omega(t) \\cdot h$. Combining these results, we get:\n$$\n\\int_{0}^{t+h} \\omega^t(s) \\, ds = \\int_{0}^{t} \\omega(s) \\, ds + h\\,\\omega(t)\n$$\nSubstituting this back into the expression for $F(t+h, \\omega^t)$:\n$$\nF(t+h, \\omega^t) = \\psi\\left(\\int_{0}^{t} \\omega(s) \\, ds + h\\,\\omega(t)\\right)\n$$\nNow we can form the difference quotient for the horizontal derivative:\n$$\n\\frac{F(t+h, \\omega^t) - F(t,\\omega)}{h} = \\frac{\\psi\\left(\\int_{0}^{t} \\omega(s) \\, ds + h\\,\\omega(t)\\right) - \\psi\\left(\\int_{0}^{t} \\omega(s) \\, ds\\right)}{h}\n$$\nLet $I_t(\\omega) = \\int_{0}^{t} \\omega(s) \\, ds$. The expression is $\\frac{\\psi(I_t(\\omega) + h\\,\\omega(t)) - \\psi(I_t(\\omega))}{h}$. Taking the limit as $h \\downarrow 0$ is, by the chain rule and the definition of differentiation, the derivative of $\\psi$ at $I_t(\\omega)$ multiplied by the coefficient of $h$, which is $\\omega(t)$. Since $\\psi \\in C^2(\\mathbb{R})$, its first derivative $\\psi'$ exists.\n$$\n\\partial_t F(t,\\omega) = \\lim_{h\\downarrow 0}\\frac{\\psi(I_t(\\omega) + h\\,\\omega(t)) - \\psi(I_t(\\omega))}{h} = \\omega(t)\\,\\psi'\\left(\\int_{0}^{t}\\omega(s)\\,ds\\right)\n$$\nThis provides the closed-form expression for the horizontal derivative.\n\nNext, we calculate the vertical derivative $\\partial_{\\omega}F(t,\\omega)$, defined as:\n$$\n\\partial_{\\omega}F(t,\\omega):=\\lim_{h\\to 0}\\frac{F\\big(t,\\omega+h\\,\\mathbf{1}_{[t,T]}\\big)-F(t,\\omega)}{h}\n$$\nThe term $F(t, \\omega + h\\,\\mathbf{1}_{[t,T]})$ is evaluated as:\n$$\nF(t, \\omega + h\\,\\mathbf{1}_{[t,T]}) = \\psi\\left(\\int_0^t \\left(\\omega(s) + h\\,\\mathbf{1}_{[t,T]}(s)\\right) ds\\right)\n$$\nThe indicator function $\\mathbf{1}_{[t,T]}(s)$ is equal to $1$ for $s \\in [t,T]$ and $0$ otherwise. The integral's domain is $[0,t]$. Over this domain, $\\mathbf{1}_{[t,T]}(s)$ is non-zero only at the single point $s=t$. The Riemann integral of a function that is zero everywhere except at a finite number of points is zero. Therefore:\n$$\n\\int_0^t h\\,\\mathbf{1}_{[t,T]}(s) \\, ds = 0\n$$\nThis implies that the integral of the perturbed path is identical to the integral of the original path:\n$$\n\\int_0^t \\left(\\omega(s) + h\\,\\mathbf{1}_{[t,T]}(s)\\right) ds = \\int_0^t \\omega(s) \\, ds\n$$\nConsequently, the functional's value is unchanged by this specific perturbation:\n$$\nF(t, \\omega + h\\,\\mathbf{1}_{[t,T]}) = \\psi\\left(\\int_0^t \\omega(s) \\, ds\\right) = F(t,\\omega)\n$$\nThe numerator of the difference quotient for the vertical derivative is therefore $F(t,\\omega) - F(t,\\omega) = 0$. The limit is:\n$$\n\\partial_{\\omega}F(t,\\omega) = \\lim_{h\\to 0}\\frac{0}{h} = 0\n$$\nThe vertical derivative is identically zero.\n\nFinally, we analyze the structure of vertical perturbations and the existence of second vertical derivatives. The calculation $\\partial_{\\omega}F(t,\\omega) = 0$ reveals a fundamental property of the functional $F$. Its value at time $t$ depends on the history of the path $\\omega$ over $[0,t]$ only through its integral. The value of a Riemann integral is not sensitive to the value of the integrand at a single point. The vertical derivative operator, by definition, measures the sensitivity of the functional to a perturbation of the path that begins exactly at time $t$. For an evaluation at time $t$, this amounts to a point-perturbation of the path at the endpoint $t$ of the integration interval $[0,t]$. As the functional is insensitive to this specific change, its vertical derivative is zero.\n\nThe second vertical derivative, $\\partial_{\\omega}^2F(t,\\omega)$, is the vertical derivative of the first vertical derivative, i.e., $\\partial_{\\omega}(\\partial_{\\omega}F)(t,\\omega)$. Since we found that $\\partial_{\\omega}F(t,\\omega)$ is the functional that is identically $0$ for all $(t,\\omega)$, its derivative with respect to any variable or perturbation must also be zero. Therefore, $\\partial_{\\omega}^2F(t,\\omega) = 0$. By extension, all higher-order vertical derivatives of this functional are also zero. They exist, but are trivial. They do not exist in a \"nontrivial\" way because the functional's structure smooths out any point-value dependence at the current time $t$.", "answer": "$$\n\\boxed{\\begin{pmatrix} \\omega(t)\\psi'\\left(\\int_{0}^{t}\\omega(s)\\,ds\\right) & 0 \\end{pmatrix}}\n$$", "id": "2990528"}, {"introduction": "A powerful way to verify one's understanding of a new mathematical framework is to see how it generalizes familiar results. This practice [@problem_id:2990533] focuses on a quadratic functional that, while formally path-dependent, only depends on the path's current value, $F(t,\\omega) = \\omega(t)^{\\top} Q \\omega(t)$. By calculating its functional derivatives and applying the functional Itô formula, you will rigorously re-derive the classical multidimensional Itô's lemma, bridging the gap between the classical and functional calculus perspectives and solidifying your intuition.", "problem": "Consider a $d$-dimensional continuous path $\\omega \\in C([0,T],\\mathbb{R}^{d})$ and a fixed symmetric matrix $Q \\in \\mathbb{R}^{d \\times d}$. Define the nonanticipative functional $F:[0,T] \\times C([0,T],\\mathbb{R}^{d}) \\to \\mathbb{R}$ by $F(t,\\omega) = \\omega(t)^{\\top} Q \\omega(t)$. Let $X$ be the unique strong solution to the path-dependent Stochastic Differential Equation (SDE)\n$$\n\\mathrm{d}X_{t} = b\\!\\left(t,X_{[0,t]}\\right)\\,\\mathrm{d}t + \\sigma\\!\\left(t,X_{[0,t]}\\right)\\,\\mathrm{d}W_{t}, \\quad X_{0} = x_{0} \\in \\mathbb{R}^{d},\n$$\nwhere $W$ is an $m$-dimensional Brownian motion (BM), and $b:[0,T]\\times C([0,T],\\mathbb{R}^{d}) \\to \\mathbb{R}^{d}$, $\\sigma:[0,T]\\times C([0,T],\\mathbb{R}^{d}) \\to \\mathbb{R}^{d \\times m}$ satisfy conditions ensuring existence and uniqueness, as well as continuity of $X$.\n\nUsing the foundational definitions of vertical and horizontal derivatives in Functional Itô Calculus (FIC) for nonanticipative functionals on continuous paths, together with the chain rule for functionals applied to continuous semimartingales, perform the following:\n\n1. Compute the vertical gradient and the vertical Hessian of $F$ at $(t,\\omega)$ and determine the horizontal derivative of $F$ at $(t,\\omega)$.\n\n2. Starting from the SDE dynamics for $X$ and the functional derivatives of $F$, derive the Itô decomposition of the process $F(t,X_{[0,t]}) = X_{t}^{\\top} Q X_{t}$, explicitly identifying both the drift and the local martingale parts in terms of $b$, $\\sigma$, $Q$, and $X_{t}$.\n\nExpress your final result as a single closed-form analytic expression that displays the complete decomposition in differential form, involving $b\\!\\left(t,X_{[0,t]}\\right)$, $\\sigma\\!\\left(t,X_{[0,t]}\\right)$, $Q$, $X_{t}$, $\\mathrm{d}t$, and $\\mathrm{d}W_{t}$. No rounding is required. No physical units are involved.", "solution": "The problem is valid as it is mathematically well-posed, scientifically grounded within the field of stochastic differential equations and Functional Itô Calculus, and contains all necessary information to derive a unique solution.\n\nThe problem asks for two main tasks: first, to compute the functional derivatives of a specific nonanticipative functional, and second, to use these derivatives to find the Itô decomposition of a process defined by this functional.\n\nLet the given nonanticipative functional be $F:[0,T] \\times C([0,T],\\mathbb{R}^{d}) \\to \\mathbb{R}$, defined by\n$$F(t,\\omega) = \\omega(t)^{\\top} Q \\omega(t)$$\nwhere $Q \\in \\mathbb{R}^{d \\times d}$ is a symmetric matrix. This functional is of the \"Markovian\" type, as its value at time $t$ depends only on the value of the path $\\omega$ at that specific time $t$, i.e., $F(t,\\omega) = f(\\omega(t))$ where $f(x) = x^{\\top} Q x$ for $x \\in \\mathbb{R}^d$.\n\n**Part 1: Computation of Functional Derivatives**\n\nWe compute the vertical gradient ($\\nabla_{\\omega} F$), vertical Hessian ($\\nabla^2_{\\omega} F$), and horizontal derivative ($\\mathcal{D}_t F$) of the functional $F$. For a functional of the form $F(t,\\omega) = f(\\omega(t))$, these functional derivatives are directly related to the standard derivatives of the function $f:\\mathbb{R}^d \\to \\mathbb{R}$.\n\nThe vertical gradient, $\\nabla_{\\omega} F(t,\\omega)$, represents the sensitivity of $F$ to an infinitesimal change in the terminal value of the path, $\\omega(t)$. It corresponds to the standard gradient of $f(x)$ with respect to $x$, evaluated at $x = \\omega(t)$.\nLet $x = (x_1, \\dots, x_d)^{\\top}$. The function $f(x)$ is $f(x) = \\sum_{i=1}^{d} \\sum_{j=1}^{d} x_i Q_{ij} x_j$.\nThe $k$-th component of the gradient $\\nabla f(x)$ is:\n$$(\\nabla f(x))_k = \\frac{\\partial}{\\partial x_k} \\left( \\sum_{i,j} x_i Q_{ij} x_j \\right) = \\sum_{j} Q_{kj} x_j + \\sum_{i} x_i Q_{ik}$$\nSince the matrix $Q$ is symmetric, $Q_{ik} = Q_{ki}$. Thus,\n$$(\\nabla f(x))_k = \\sum_{j} Q_{kj} x_j + \\sum_{i} Q_{ki} x_i = 2 \\sum_{j} Q_{kj} x_j = (2Qx)_k$$\nTherefore, the gradient vector is $\\nabla f(x) = 2Qx$.\nEvaluating at $x = \\omega(t)$, the vertical gradient of $F$ is:\n$$\\nabla_{\\omega} F(t,\\omega) = 2Q\\omega(t)$$\n\nThe vertical Hessian, $\\nabla^2_{\\omega} F(t,\\omega)$, is the second-order derivative with respect to the terminal value $\\omega(t)$ and corresponds to the Hessian matrix of $f(x)$. We differentiate the gradient $\\nabla f(x) = 2Qx$ with respect to $x$. The $(k,l)$-th entry of the Hessian matrix is:\n$$(\\nabla^2 f(x))_{kl} = \\frac{\\partial}{\\partial x_l} (\\nabla f(x))_k = \\frac{\\partial}{\\partial x_l} \\left( 2 \\sum_{j} Q_{kj} x_j \\right) = 2Q_{kl}$$\nSo, the Hessian matrix is $\\nabla^2 f(x) = 2Q$.\nThe vertical Hessian of $F$ is constant and given by:\n$$\\nabla^2_{\\omega} F(t,\\omega) = 2Q$$\n\nThe horizontal derivative, $\\mathcal{D}_t F(t,\\omega)$, captures the rate of change of the functional due to the passage of time on the path itself, for a fixed path shape. For functionals of the form $F(t,\\omega) = f(\\omega(t))$ where $f$ has no explicit time dependence, the horizontal derivative is zero.\n$$\\mathcal{D}_t F(t,\\omega) = 0$$\n\n**Part 2: Itô Decomposition**\n\nWe now use the Functional Itô formula (also known as the chain rule for functionals) to derive the decomposition for the process $Y_t = F(t, X_{[0,t]}) = X_t^{\\top} Q X_t$. The formula states:\n$$\n\\mathrm{d}Y_t = \\mathcal{D}_t F(t,X_{[0,t]}) \\mathrm{d}t + (\\nabla_{\\omega} F(t,X_{[0,t]}))^{\\top} \\mathrm{d}X_t + \\frac{1}{2} \\text{Tr}\\left[\\nabla^2_{\\omega} F(t,X_{[0,t]}) \\mathrm{d}\\langle X \\rangle_t\\right]\n$$\nHere, $X$ is the solution to the SDE $\\mathrm{d}X_{t} = b_t\\,\\mathrm{d}t + \\sigma_t\\,\\mathrm{d}W_{t}$, where we use the shorthand $b_t = b(t,X_{[0,t]})$ and $\\sigma_t = \\sigma(t,X_{[0,t]})$.\n\nFirst, we determine the quadratic variation matrix of $X_t$, denoted $\\mathrm{d}\\langle X \\rangle_t$.\n$$\n\\mathrm{d}\\langle X \\rangle_t = (\\mathrm{d}X_t)(\\mathrm{d}X_t)^{\\top} = (b_t \\mathrm{d}t + \\sigma_t \\mathrm{d}W_t)(b_t \\mathrm{d}t + \\sigma_t \\mathrm{d}W_t)^{\\top}\n$$\nExpanding this and using the Itô multiplication rules ($\\mathrm{d}t \\cdot \\mathrm{d}t = 0$, $\\mathrm{d}t \\cdot \\mathrm{d}W_{i,t} = 0$, and $\\mathrm{d}W_{i,t} \\mathrm{d}W_{j,t} = \\delta_{ij} \\mathrm{d}t$), only the term involving $\\mathrm{d}W_t \\mathrm{d}W_t^{\\top}$ survives:\n$$\n\\mathrm{d}\\langle X \\rangle_t = \\sigma_t (\\mathrm{d}W_t \\mathrm{d}W_t^{\\top}) \\sigma_t^{\\top} = \\sigma_t I_m \\sigma_t^{\\top} \\mathrm{d}t = \\sigma_t \\sigma_t^{\\top} \\mathrm{d}t\n$$\nwhere $I_m$ is the $m \\times m$ identity matrix.\n\nNow, we substitute the functional derivatives and $\\mathrm{d}\\langle X \\rangle_t$ into the Functional Itô formula:\n- $\\mathcal{D}_t F(t,X_{[0,t]}) = 0$\n- $\\nabla_{\\omega} F(t,X_{[0,t]}) = 2QX_t$\n- $\\nabla^2_{\\omega} F(t,X_{[0,t]}) = 2Q$\n\nThe formula becomes:\n$$\n\\mathrm{d}(X_t^{\\top} Q X_t) = 0 \\cdot \\mathrm{d}t + (2QX_t)^{\\top} \\mathrm{d}X_t + \\frac{1}{2} \\text{Tr}\\left[2Q (\\sigma_t \\sigma_t^{\\top} \\mathrm{d}t)\\right]\n$$\nUsing the symmetry of $Q$ ($Q^{\\top} = Q$), we have $(2QX_t)^{\\top} = 2X_t^{\\top} Q^{\\top} = 2X_t^{\\top} Q$.\n$$\n\\mathrm{d}(X_t^{\\top} Q X_t) = 2X_t^{\\top} Q \\mathrm{d}X_t + \\text{Tr}\\left[Q \\sigma_t \\sigma_t^{\\top}\\right] \\mathrm{d}t\n$$\nNow, substitute the SDE for $\\mathrm{d}X_t$:\n$$\n\\mathrm{d}(X_t^{\\top} Q X_t) = 2X_t^{\\top} Q (b_t \\mathrm{d}t + \\sigma_t \\mathrm{d}W_t) + \\text{Tr}\\left[Q \\sigma_t \\sigma_t^{\\top}\\right] \\mathrm{d}t\n$$\nFinally, we separate the terms into the drift (proportional to $\\mathrm{d}t$) and the local martingale (proportional to $\\mathrm{d}W_t$):\n$$\n\\mathrm{d}(X_t^{\\top} Q X_t) = (2X_t^{\\top} Q b_t + \\text{Tr}[Q \\sigma_t \\sigma_t^{\\top}]) \\mathrm{d}t + 2X_t^{\\top} Q \\sigma_t \\mathrm{d}W_t\n$$\nWriting the coefficients $b$ and $\\sigma$ in their full functional form yields the final decomposition.\nThe drift part is $(2X_{t}^{\\top} Q b(t,X_{[0,t]}) + \\text{Tr}[Q \\sigma(t,X_{[0,t]}) \\sigma(t,X_{[0,t]})^\\top]) \\mathrm{d}t$.\nThe local martingale part is $2X_{t}^{\\top} Q \\sigma(t,X_{[0,t]}) \\mathrm{d}W_{t}$.\nThis result is the multidimensional Itô's formula for the quadratic form $x^{\\top}Qx$, derived within the framework of Functional Itô Calculus.", "answer": "$$\n\\boxed{\\mathrm{d}(X_{t}^{\\top} Q X_{t}) = \\left(2X_{t}^{\\top} Q b(t,X_{[0,t]}) + \\text{Tr}\\left[Q \\sigma(t,X_{[0,t]}) \\sigma(t,X_{[0,t]})^{\\top}\\right]\\right) \\mathrm{d}t + 2X_{t}^{\\top} Q \\sigma(t,X_{[0,t]}) \\mathrm{d}W_{t}}\n$$", "id": "2990533"}, {"introduction": "Having built a foundation in computing functional derivatives, we now apply this machinery to derive fundamental objects in stochastic analysis. This advanced practice [@problem_id:2990521] challenges you to use the functional Itô formula as a core tool to derive the infinitesimal generator for a path-dependent process and to determine the precise drift correction needed to convert between Itô and Stratonovich SDEs. Mastering these derivations demonstrates a deep, operational understanding of the calculus and its power in theoretical applications.", "problem": "Consider a filtered probability space $(\\Omega,\\mathcal{F},(\\mathcal{F}_{t})_{t\\in[0,T]},\\mathbb{P})$ supporting an $m$-dimensional standard Brownian motion $W=(W^{1},\\dots,W^{m})$. Let $X=(X_{t})_{t\\in[0,T]}$ be an $\\mathbb{R}^{n}$-valued adapted continuous process satisfying the path-dependent Itô Stochastic Differential Equation (SDE)\n$$\ndX_{t} = b(t,X_{[0,t]})\\,dt + \\sigma(t,X_{[0,t]})\\,dW_{t}, \\quad X_{0}=x_{0}\\in\\mathbb{R}^{n},\n$$\nwhere $b:[0,T]\\times C([0,T];\\mathbb{R}^{n})\\to\\mathbb{R}^{n}$ and $\\sigma:[0,T]\\times C([0,T];\\mathbb{R}^{n})\\to\\mathbb{R}^{n\\times m}$ are non-anticipative functionals that are sufficiently smooth in the sense of functional Itô calculus of Dupire: for each fixed $(t,\\omega)\\in[0,T]\\times C([0,T];\\mathbb{R}^{n})$, the vertical derivative $\\nabla_{x} b(t,\\omega)\\in\\mathbb{R}^{n\\times n}$ and, for each $k\\in\\{1,\\dots,m\\}$, the vertical derivative $\\nabla_{x}\\sigma_{\\cdot k}(t,\\omega)\\in\\mathbb{R}^{n\\times n}$ exist and are continuous in $(t,\\omega)$, and for non-anticipative functionals $F\\in C^{1,2}$, the horizontal derivative $\\partial_{t}F$ and vertical derivatives $\\nabla_{x}F$, $\\nabla_{x}^{2}F$ exist and are continuous.\n\nHere, $X_{[0,t]}$ denotes the entire past path up to time $t$, that is, the element of $C([0,t];\\mathbb{R}^{n})$ given by $s\\mapsto X_{s}$, and $\\sigma_{\\cdot k}(t,\\omega)\\in\\mathbb{R}^{n}$ denotes the $k$-th column of $\\sigma(t,\\omega)$.\n\nStarting from the foundational definitions of the Itô integral and the Stratonovich integral via Riemann sums, the quadratic variation of Brownian motion, and the functional Itô formula for non-anticipative functionals, perform the following tasks:\n\n1. Derive the pathwise Stratonovich SDE associated to the above Itô SDE, that is, find the drift functional $b^{\\circ}:[0,T]\\times C([0,T];\\mathbb{R}^{n})\\to\\mathbb{R}^{n}$ such that the same process $X$ satisfies\n$$\ndX_{t} = b^{\\circ}(t,X_{[0,t]})\\,dt + \\sigma(t,X_{[0,t]})\\circ dW_{t},\n$$\nwhere $\\circ dW_{t}$ denotes integration in the Stratonovich sense.\n\n2. Using the functional Itô formula, compute the generator $\\mathcal{L}$ acting on a non-anticipative functional $F\\in C^{1,2}$, evaluated along $(t,X_{[0,t]})$, defined as the drift term appearing in $dF(t,X_{[0,t]})$ under the above Itô dynamics.\n\nYour final answer must be the closed-form expression for $b^{\\circ}(t,\\omega)$ and for $\\mathcal{L}F(t,\\omega)$ in terms of $b$, $\\sigma$, and the functional derivatives of $F$. If you provide multiple expressions, present them as a single row matrix as specified in the output rules. No numerical rounding is required in this problem. No physical units apply.", "solution": "The problem asks for two derivations within the framework of functional Itô calculus for path-dependent Stochastic Differential Equations (SDEs). We will address each task in turn.\n\n### Part 1: Derivation of the Stratonovich Drift Functional $b^{\\circ}$\n\nWe are given the path-dependent Itô SDE for the process $X = (X_t)_{t \\in [0,T]}$:\n$$ dX_{t} = b(t,X_{[0,t]})\\,dt + \\sigma(t,X_{[0,t]})\\,dW_{t} $$\nWe seek the drift functional $b^{\\circ}(t, \\omega)$ for the corresponding Stratonovich SDE:\n$$ dX_{t} = b^{\\circ}(t,X_{[0,t]})\\,dt + \\sigma(t,X_{[0,t]})\\circ dW_{t} $$\nThe fundamental relationship between the Itô integral and the Stratonovich integral for a matrix-valued process $\\sigma$ and a vector-valued Brownian motion $W$ is given by the Itô-Stratonovich correction term, which involves their quadratic covariation. In differential form, for the $i$-th component of the process ($i \\in \\{1,\\dots,n\\}$), this relationship is:\n$$ \\sum_{k=1}^{m} \\sigma^{ik}(t,X_{[0,t]}) \\circ dW_t^k = \\sum_{k=1}^{m} \\sigma^{ik}(t,X_{[0,t]}) dW_t^k + \\frac{1}{2} \\sum_{k=1}^{m} d[\\sigma^{ik}(\\cdot, X_{[\\cdot,\\cdot]}), W^k]_t $$\nHere, $[\\cdot,\\cdot]_t$ denotes the quadratic covariation process up to time $t$. To find the Stratonovich drift $b^{\\circ}$, we must compute the drift part of this correction term. The quadratic covariation differential $d[\\sigma^{ik}, W^k]_t$ is given by the product of the diffusion coefficients of $\\sigma^{ik}(t,X_{[0,t]})$ and $W^k_t$.\n\nThe process $W^k$ has a trivial Itô decomposition $dW_t^k = 1 \\cdot dW_t^k$. To find the decomposition for $\\sigma^{ik}(t,X_{[0,t]})$, which is a scalar-valued functional of the path of $X$, we apply the functional Itô formula. The differential $d\\sigma^{ik}(t,X_{[0,t]})$ has a drift part and a martingale part. The martingale part arises from the dependence of $\\sigma^{ik}$ on the stochastic process $X$. According to the chain rule for vertical derivatives (which the problem denotes as $\\nabla_x$), the martingale part of $d\\sigma^{ik}$ is:\n$$ (d\\sigma^{ik}(t,X_{[0,t]}))_{\\text{martingale}} = \\nabla_x \\sigma^{ik}(t,X_{[0,t]}) (dX_t)_{\\text{martingale}} $$\nwhere $\\nabla_x \\sigma^{ik}$ is an $n$-dimensional row vector of derivatives of $\\sigma^{ik}$ with respect to the endpoint $x = X_t$. The martingale part of $dX_t$ is $\\sigma(t,X_{[0,t]}) dW_t$. In components:\n$$ (dX_t^j)_{\\text{martingale}} = \\sum_{p=1}^m \\sigma^{jp}(t,X_{[0,t]}) dW_t^p $$\nThus, the martingale part of $d\\sigma^{ik}$ is:\n$$ (d\\sigma^{ik}(t,X_{[0,t]}))_{\\text{martingale}} = \\sum_{j=1}^n \\frac{\\partial \\sigma^{ik}}{\\partial x_j}(t,X_{[0,t]}) \\left( \\sum_{p=1}^m \\sigma^{jp}(t,X_{[0,t]}) dW_t^p \\right) $$\nThe quadratic covariation differential $d[\\sigma^{ik}, W^k]_t$ is then:\n$$ d[\\sigma^{ik}, W^k]_t = \\left\\langle d\\sigma^{ik}, dW^k \\right\\rangle_t = \\left\\langle \\sum_{j=1}^n \\frac{\\partial \\sigma^{ik}}{\\partial x_j} \\sum_{p=1}^m \\sigma^{jp} dW_t^p, dW_t^k \\right\\rangle $$\nUsing the property $\\langle dW^p, dW^k \\rangle_t = \\delta_{pk} dt$, where $\\delta_{pk}$ is the Kronecker delta, we get:\n$$ d[\\sigma^{ik}, W^k]_t = \\left( \\sum_{j=1}^n \\sum_{p=1}^m \\frac{\\partial \\sigma^{ik}}{\\partial x_j} \\sigma^{jp} \\delta_{pk} \\right) dt = \\left( \\sum_{j=1}^n \\frac{\\partial \\sigma^{ik}}{\\partial x_j}(t,X_{[0,t]}) \\sigma^{jk}(t,X_{[0,t]}) \\right) dt $$\nThis expression gives the drift of the quadratic covariation process. Substituting this into the Itô-Stratonovich conversion formula, the total correction drift for the $i$-th component, let's call it $c^i$, is:\n$$ c^i(t,X_{[0,t]}) dt = \\frac{1}{2} \\sum_{k=1}^m d[\\sigma^{ik}, W^k]_t = \\frac{1}{2} \\sum_{k=1}^m \\left( \\sum_{j=1}^n \\frac{\\partial \\sigma^{ik}}{\\partial x_j} \\sigma^{jk} \\right) dt $$\nEquating the Itô and Stratonovich SDEs for $dX_t$:\n$$ b(t,X_{[0,t]}) dt + \\sigma(t,X_{[0,t]}) dW_t = b^{\\circ}(t,X_{[0,t]}) dt + \\sigma(t,X_{[0,t]}) \\circ dW_t $$\n$$ b(t,X_{[0,t]}) dt + \\sigma(t,X_{[0,t]}) dW_t = b^{\\circ}(t,X_{[0,t]}) dt + \\sigma(t,X_{[0,t]}) dW_t + c(t,X_{[0,t]}) dt $$\nBy comparing the drift terms, we find $b = b^{\\circ} + c$, which means $b^{\\circ} = b - c$.\n$$ (b^{\\circ})^i(t,X_{[0,t]}) = b^i(t,X_{[0,t]}) - \\frac{1}{2} \\sum_{k=1}^m \\sum_{j=1}^n \\frac{\\partial \\sigma^{ik}}{\\partial x_j}(t,X_{[0,t]}) \\sigma^{jk}(t,X_{[0,t]}) $$\nThis expression can be written more compactly. The term $\\frac{\\partial \\sigma^{ik}}{\\partial x_j}$ is the $(i,j)$-th entry of the Jacobian matrix of the $k$-th column of $\\sigma$, denoted $\\nabla_x \\sigma_{\\cdot k} \\in \\mathbb{R}^{n\\times n}$. The sum $\\sum_{j=1}^n \\frac{\\partial \\sigma^{ik}}{\\partial x_j} \\sigma^{jk}$ is the $i$-th component of the matrix-vector product $(\\nabla_x \\sigma_{\\cdot k}) \\sigma_{\\cdot k}$. Summing over $k$ gives the total correction vector. Therefore, for a generic path $\\omega \\in C([0,T];\\mathbb{R}^n)$:\n$$ b^{\\circ}(t,\\omega) = b(t,\\omega) - \\frac{1}{2} \\sum_{k=1}^m (\\nabla_x \\sigma_{\\cdot k}(t,\\omega)) \\sigma_{\\cdot k}(t,\\omega) $$\n\n### Part 2: Derivation of the Generator $\\mathcal{L}$\n\nThe generator $\\mathcal{L}$ is defined as the drift operator acting on a sufficiently smooth non-anticipative functional $F \\in C^{1,2}$, where the drift is evaluated along the process $X$. To find this, we use the functional Itô formula for $F(t,X_{[0,t]})$.\nThe formula, based on the specified smoothness conditions, is:\n$$ dF(t,X_{[0,t]}) = \\partial_t F(t,X_{[0,t]}) dt + \\nabla_x F(t,X_{[0,t]}) dX_t + \\frac{1}{2} \\text{Tr}\\left[ \\nabla_x^2 F(t,X_{[0,t]}) d\\langle X \\rangle_t \\right] $$\nwhere $\\partial_t F$ is the horizontal derivative, $\\nabla_x F$ is the vertical derivative (an $n$-dimensional row vector), and $\\nabla_x^2 F$ is the second vertical derivative (an $n \\times n$ Hessian matrix).\n\nWe substitute the Itô SDE for $dX_t$:\n$$ dX_t = b(t,X_{[0,t]}) dt + \\sigma(t,X_{[0,t]}) dW_t $$\nThe quadratic variation of $X$, an $n \\times n$ matrix-valued process, has differential:\n$$ d\\langle X \\rangle_t = (\\sigma(t,X_{[0,t]}) dW_t)(\\sigma(t,X_{[0,t]}) dW_t)^{\\top} = \\sigma(t,X_{[0,t]}) (dW_t dW_t^{\\top}) \\sigma(t,X_{[0,t]})^{\\top} $$\nSince $dW_t dW_t^{\\top} = I_m dt$, where $I_m$ is the $m \\times m$ identity matrix, we have:\n$$ d\\langle X \\rangle_t = \\sigma(t,X_{[0,t]}) \\sigma(t,X_{[0,t]})^{\\top} dt $$\nSubstituting $dX_t$ and $d\\langle X \\rangle_t$ into the functional Itô formula:\n\\begin{align*}\ndF(t,X_{[0,t]}) &= \\partial_t F(t,X_{[0,t]}) dt + \\nabla_x F(t,X_{[0,t]}) (b(t,X_{[0,t]}) dt + \\sigma(t,X_{[0,t]}) dW_t) \\\\\n&\\quad + \\frac{1}{2} \\text{Tr}\\left[ \\nabla_x^2 F(t,X_{[0,t]}) (\\sigma(t,X_{[0,t]}) \\sigma(t,X_{[0,t]})^{\\top}) \\right] dt\n\\end{align*}\nWe can group the terms multiplying $dt$ (the drift) and $dW_t$ (the martingale part):\n\\begin{align*}\ndF(t,X_{[0,t]}) &= \\left\\{ \\partial_t F(t,X_{[0,t]}) + \\nabla_x F(t,X_{[0,t]}) b(t,X_{[0,t]}) + \\frac{1}{2} \\text{Tr}\\left[\\nabla_x^2 F(t,X_{[0,t]}) (\\sigma \\sigma^{\\top})(t,X_{[0,t]})\\right] \\right\\} dt \\\\\n&\\quad + \\nabla_x F(t,X_{[0,t]}) \\sigma(t,X_{[0,t]}) dW_t\n\\end{align*}\nBy definition, the generator $\\mathcal{L}F(t,X_{[0,t]})$ is the coefficient of the $dt$ term. Thus, for a generic path $\\omega \\in C([0,T];\\mathbb{R}^n)$, the generator is given by:\n$$ \\mathcal{L}F(t,\\omega) = \\partial_t F(t,\\omega) + \\nabla_x F(t,\\omega) b(t,\\omega) + \\frac{1}{2} \\text{Tr}\\left[\\nabla_x^2 F(t,\\omega) (\\sigma(t,\\omega) \\sigma(t,\\omega)^{\\top})\\right] $$\nIn component form, this is:\n$$ \\mathcal{L}F(t,\\omega) = \\partial_t F(t,\\omega) + \\sum_{j=1}^n \\frac{\\partial F}{\\partial x_j}(t,\\omega) b^j(t,\\omega) + \\frac{1}{2} \\sum_{i,j=1}^n \\frac{\\partial^2 F}{\\partial x_i \\partial x_j}(t,\\omega) (\\sigma \\sigma^{\\top})^{ij}(t,\\omega) $$\nwhere $(\\sigma \\sigma^{\\top})^{ij} = \\sum_{k=1}^m \\sigma^{ik}\\sigma^{jk}$.", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\nb(t, \\omega) - \\frac{1}{2} \\sum_{k=1}^{m} (\\nabla_x \\sigma_{\\cdot k}(t,\\omega)) \\sigma_{\\cdot k}(t,\\omega)\n&\n\\partial_t F(t, \\omega) + \\nabla_x F(t, \\omega) b(t, \\omega) + \\frac{1}{2} \\text{Tr}\\left[\\nabla_x^2 F(t, \\omega) \\left(\\sigma(t, \\omega) \\sigma(t, \\omega)^{\\top}\\right)\\right]\n\\end{pmatrix}\n}\n$$", "id": "2990521"}]}
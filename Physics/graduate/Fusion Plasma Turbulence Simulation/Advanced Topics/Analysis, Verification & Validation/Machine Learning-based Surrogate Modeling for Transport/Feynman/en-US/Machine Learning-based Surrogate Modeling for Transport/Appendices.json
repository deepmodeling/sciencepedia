{
    "hands_on_practices": [
        {
            "introduction": "Before a surrogate model can be trusted for complex predictions, it must honor the fundamental physics it aims to represent. This exercise introduces the critical practice of verification, where we check the model against known analytic limits, such as the vanishing of turbulent flux in the absence of gradients. By calculating quantitative residuals, you will learn to measure a model's deviation from these non-negotiable physical principles. ",
            "id": "4194327",
            "problem": "Consider a machine learning-based surrogate for fusion plasma turbulent transport that maps dimensionless local gradient inputs to a gyro-Bohm normalized radial heat flux. Let $x$ denote the dimensionless density gradient parameter and $y$ the dimensionless temperature gradient parameter, both defined as ratios of a macroscopic length scale to their respective gradient scale lengths. The surrogate predicts the normalized heat flux $Q_{\\text{s}}(x,y)$, which is expressed in units of Gyro-Bohm (gB) normalization. For a flux-surface averaged, local diffusive closure, fundamental transport theory implies that the turbulent heat flux is driven by thermodynamic gradients. In particular, at vanishing gradients the diffusive component of the turbulent flux vanishes, and to leading order the flux reverses sign when a single driving gradient is reversed, reflecting odd parity in the gradient. These analytic limits are used to verify surrogate consistency.\n\nStarting from the fundamental constitutive relation for diffusive heat transport, where the heat flux is proportional to the negative temperature gradient, the following two analytic limits should hold for a physically consistent surrogate:\n- Zero-gradient limit: $Q_{\\text{true}}(0,0)=0$.\n- Odd symmetry under single-gradient reversal at small amplitude: for fixed $x=0$ and small $|y|$, the leading-order response satisfies $Q_{\\text{true}}(0,-y)=-Q_{\\text{true}}(0,y)$.\n\nDefine verification residuals that measure the surrogateâ€™s deviation from these analytic limits as follows:\n- Zero-gradient residual: $R_{0}=\\left|Q_{\\text{s}}(0,0)-0\\right|$.\n- Odd-symmetry residual at a prescribed test gradient magnitude $y_{0}$: \n$$\nR_{\\text{odd}}(y_{0})=\\left|\\frac{Q_{\\text{s}}(0,y_{0})+Q_{\\text{s}}(0,-y_{0})}{Q_{\\text{s}}(0,y_{0})-Q_{\\text{s}}(0,-y_{0})}\\right|,\n$$\nwhich equals the magnitude of the even component divided by the magnitude of the odd component at $y_{0}$.\n\nSuppose the surrogate takes the following polynomial form in the gradients:\n$$\nQ_{\\text{s}}(x,y)=a\\,x+b\\,y+c\\,x\\,y+d\\,y^{2}+e,\n$$\nwith parameters $a=0.8$, $b=1.2$, $c=0.05$, $d=0.1$, and $e=0.02$. Use the test value $y_{0}=1.3$. Compute the two residuals $R_{0}$ and $R_{\\text{odd}}(y_{0})$. Express both residuals as dimensionless numbers and round your answers to four significant figures.",
            "solution": "The problem statement is validated to be scientifically sound, well-posed, objective, and self-contained. The concepts of surrogate modeling, verification against physical limits (zero-gradient, odd symmetry), and the use of quantitative residuals are standard practices in computational physics and engineering. All necessary data and definitions are provided for a unique solution.\n\nThe zero-gradient residual, $R_{0}$, is defined as $R_{0}=\\left|Q_{\\text{s}}(0,0)-0\\right|$. The surrogate model for the heat flux is given by the polynomial:\n$$\nQ_{\\text{s}}(x,y)=a\\,x+b\\,y+c\\,x\\,y+d\\,y^{2}+e\n$$\nTo compute $R_{0}$, we evaluate $Q_{\\text{s}}(x,y)$ at $x=0$ and $y=0$:\n$$\nQ_{\\text{s}}(0,0) = a(0) + b(0) + c(0)(0) + d(0)^{2} + e = e\n$$\nThe value of the parameter $e$ is given as $e=0.02$. Therefore, the zero-gradient residual is:\n$$\nR_{0} = |Q_{\\text{s}}(0,0)| = |e| = |0.02| = 0.02\n$$\nThe problem requires the answer to be rounded to four significant figures. To express $0.02$ with four significant figures, we write it as $0.02000$.\n\nNext, we compute the odd-symmetry residual, $R_{\\text{odd}}(y_{0})$, at the test gradient magnitude $y_{0}=1.3$. The definition is:\n$$\nR_{\\text{odd}}(y_{0})=\\left|\\frac{Q_{\\text{s}}(0,y_{0})+Q_{\\text{s}}(0,-y_{0})}{Q_{\\text{s}}(0,y_{0})-Q_{\\text{s}}(0,-y_{0})}\\right|\n$$\nFirst, we determine the form of the surrogate at $x=0$:\n$$\nQ_{\\text{s}}(0,y) = b\\,y + d\\,y^{2} + e\n$$\nWe then evaluate this expression at $y=y_{0}$ and $y=-y_{0}$:\n$$\nQ_{\\text{s}}(0,y_{0}) = b\\,y_{0} + d\\,y_{0}^{2} + e\n$$\n$$\nQ_{\\text{s}}(0,-y_{0}) = b(-y_{0}) + d(-y_{0})^{2} + e = -b\\,y_{0} + d\\,y_{0}^{2} + e\n$$\nNow we compute the sum and difference required for the numerator and denominator of the residual expression.\nThe sum is:\n$$\nQ_{\\text{s}}(0,y_{0}) + Q_{\\text{s}}(0,-y_{0}) = (b\\,y_{0} + d\\,y_{0}^{2} + e) + (-b\\,y_{0} + d\\,y_{0}^{2} + e) = 2\\,d\\,y_{0}^{2} + 2\\,e\n$$\nThe difference is:\n$$\nQ_{\\text{s}}(0,y_{0}) - Q_{\\text{s}}(0,-y_{0}) = (b\\,y_{0} + d\\,y_{0}^{2} + e) - (-b\\,y_{0} + d\\,y_{0}^{2} + e) = 2\\,b\\,y_{0}\n$$\nSubstituting these into the expression for $R_{\\text{odd}}(y_{0})$ yields:\n$$\nR_{\\text{odd}}(y_{0}) = \\left|\\frac{2\\,d\\,y_{0}^{2} + 2\\,e}{2\\,b\\,y_{0}}\\right| = \\left|\\frac{d\\,y_{0}^{2} + e}{b\\,y_{0}}\\right|\n$$\nThis expression shows that the residual measures the ratio of the even components of the surrogate (the $d\\,y^2$ and $e$ terms) to the leading-order odd component (the $b\\,y$ term).\nNow, we substitute the specified numerical values: $b=1.2$, $d=0.1$, $e=0.02$, and $y_{0}=1.3$.\n$$\nR_{\\text{odd}}(1.3) = \\left|\\frac{(0.1)(1.3)^{2} + 0.02}{(1.2)(1.3)}\\right|\n$$\nWe calculate the numerator and denominator:\nNumerator: $(0.1)(1.69) + 0.02 = 0.169 + 0.02 = 0.189$.\nDenominator: $(1.2)(1.3) = 1.56$.\n$$\nR_{\\text{odd}}(1.3) = \\frac{0.189}{1.56} \\approx 0.121153846...\n$$\nRounding this result to four significant figures gives $0.1212$.\n\nThe two computed residuals are $R_{0}=0.02000$ and $R_{\\text{odd}}(1.3)=0.1212$.",
            "answer": "$$\\boxed{\\begin{pmatrix} 0.02000 & 0.1212 \\end{pmatrix}}$$"
        },
        {
            "introduction": "Beyond respecting specific analytic limits, a useful surrogate model must exhibit physically consistent trends across its input space. This practice provides a concrete numerical exercise to validate a model's behavior by probing it with finite differences, a technique analogous to experimental measurement. You will implement code to compute numerical derivatives and verify that the surrogate correctly captures expected properties like transport monotonicity and stiffness. ",
            "id": "4194355",
            "problem": "You are given a machine learning-based surrogate for turbulent transport in magnetized fusion plasmas that maps dimensionless plasma parameters to a dimensionless heat-flux-like quantity. The goal is to compute numerical derivatives of the surrogate to assess convexity and monotonicity and interpret their consistency with physics expectations, grounded in transport theory.\n\nThe fundamental base for this problem consists of:\n- Fick's law of diffusion, which states that a heat flux $Q$ is proportional to the negative of the temperature gradient, $Q = - n \\chi \\nabla T$, with $n$ the density and $\\chi$ a positive transport coefficient; this implies that the flux monotonically increases with the strength of the gradient drive.\n- Positivity of entropy production and the tendency for turbulent transport in Ion Temperature Gradient (ITG) regimes to increase with the normalized gradient drive, coupled with suppression by collisionality, consistent with $\\chi$ decreasing as collisionality increases.\n\nThe surrogate function $S(g,q,s,\\nu,Z)$ is defined as:\n$$\n\\operatorname{sp}(x) = \\ln\\left(1 + e^{x}\\right)\n$$\n$$\nS(g,q,s,\\nu,Z) = A \\, \\left[\\operatorname{sp}\\left(g - g_c\\right)\\right]^{\\alpha} \\, \\left(1 + \\beta s^2\\right) \\, \\left(1 + \\gamma \\left(q-1\\right)\\right) \\, \\exp\\left(-\\delta \\nu\\right) \\, \\left(1 + \\eta \\left(Z - 1\\right)\\right),\n$$\nwhere $g$ is the normalized gradient drive, $q$ is the safety factor, $s$ is the magnetic shear, $\\nu$ is the collisionality, and $Z$ is the effective ion charge. All variables and constants are dimensionless. The constants are:\n$$\nA=0.8,\\quad g_c=3.0,\\quad \\alpha=1.5,\\quad \\beta=0.2,\\quad \\gamma=0.1,\\quad \\delta=0.3,\\quad \\eta=0.05.\n$$\n\nYour program must implement numerical differentiation using symmetric finite differences with a step size $h = 10^{-3}$:\n- First derivative with respect to $g$:\n$$\n\\frac{\\partial S}{\\partial g}(g,q,s,\\nu,Z) \\approx \\frac{S(g+h,q,s,\\nu,Z) - S(g-h,q,s,\\nu,Z)}{2h}.\n$$\n- Second derivative with respect to $g$:\n$$\n\\frac{\\partial^2 S}{\\partial g^2}(g,q,s,\\nu,Z) \\approx \\frac{S(g+h,q,s,\\nu,Z) - 2S(g,q,s,\\nu,Z) + S(g-h,q,s,\\nu,Z)}{h^2}.\n$$\n- First derivative with respect to $\\nu$:\n$$\n\\frac{\\partial S}{\\partial \\nu}(g,q,s,\\nu,Z) \\approx \\frac{S(g,q,s,\\nu+h,Z) - S(g,q,s,\\nu-h,Z)}{2h}.\n$$\n\nTo assess consistency with physics expectations:\n- Monotonicity in the gradient drive $g$: classify $\\frac{\\partial S}{\\partial g} \\ge 0$ (non-decreasing) as a boolean.\n- Convexity in the gradient drive $g$: classify $\\frac{\\partial^2 S}{\\partial g^2} \\ge 0$ as a boolean.\n- Monotonicity in collisionality $\\nu$: classify $\\frac{\\partial S}{\\partial \\nu} \\le 0$ (non-increasing) as a boolean.\n\nUse a numerical tolerance $\\tau = 10^{-10}$ when comparing to zero to account for numerical round-off. All variables in this problem are dimensionless; no physical units are required.\n\nImplement the above using the following test suite of parameter sets $(g,q,s,\\nu,Z)$:\n- Case $1$: $(2.0,\\,1.5,\\,0.5,\\,0.1,\\,1.0)$.\n- Case $2$: $(3.0,\\,1.2,\\,0.0,\\,0.2,\\,1.2)$.\n- Case $3$: $(3.7,\\,2.0,\\,1.0,\\,0.05,\\,1.5)$.\n- Case $4$: $(6.0,\\,1.0,\\,0.0,\\,0.8,\\,1.0)$.\n- Case $5$: $(4.0,\\,3.0,\\,2.0,\\,0.0,\\,1.8)$.\n\nFor each case, your program must compute the three booleans in the order $[\\text{monotone\\_g}, \\text{convex\\_g}, \\text{monotone\\_nu}]$, where:\n- $\\text{monotone\\_g}$ is true if $\\frac{\\partial S}{\\partial g} \\ge -\\tau$,\n- $\\text{convex\\_g}$ is true if $\\frac{\\partial^2 S}{\\partial g^2} \\ge -\\tau$,\n- $\\text{monotone\\_nu}$ is true if $\\frac{\\partial S}{\\partial \\nu} \\le \\tau$.\n\nFinal Output Format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each element is the list of the three booleans for the corresponding test case in input order. For example:\n$$\n\\left[\\left[b_1,b_2,b_3\\right],\\left[\\cdots\\right],\\ldots\\right]\n$$\nprinted as a single line in textual form like $[[\\text{True},\\text{False},\\text{True}],\\ldots]$.",
            "solution": "The user-provided problem has been validated and is determined to be a valid, well-posed scientific computing task. The problem asks for the numerical evaluation of a surrogate model for turbulent transport in fusion plasmas and an assessment of its properties based on physical expectations. The solution will be constructed by implementing the provided model and numerical schemes.\n\nThe core of the problem is the surrogate function $S$, which maps a set of dimensionless plasma parameters $(g,q,s,\\nu,Z)$ to a dimensionless heat-flux-like quantity. The function is defined as:\n$$\nS(g,q,s,\\nu,Z) = A \\, \\left[\\operatorname{sp}\\left(g - g_c\\right)\\right]^{\\alpha} \\, \\left(1 + \\beta s^2\\right) \\, \\left(1 + \\gamma \\left(q-1\\right)\\right) \\, \\exp\\left(-\\delta \\nu\\right) \\, \\left(1 + \\eta \\left(Z - 1\\right)\\right)\n$$\nwhere the softplus function $\\operatorname{sp}(x)$ is given by:\n$$\n\\operatorname{sp}(x) = \\ln\\left(1 + e^{x}\\right)\n$$\nThe constants in the model are provided as: $A=0.8$, $g_c=3.0$, $\\alpha=1.5$, $\\beta=0.2$, $\\gamma=0.1$, $\\delta=0.3$, and $\\eta=0.05$. All parameters and constants are dimensionless.\n\nThe task requires the computation of numerical derivatives of $S$ to check for consistency with physical principles. Specifically, we must evaluate:\n$1$. The first partial derivative with respect to the normalized gradient drive, $g$.\n$2$. The second partial derivative with respect to $g$.\n$3$. The first partial derivative with respect to the collisionality, $\\nu$.\n\nThese derivatives are to be approximated using a second-order symmetric finite difference scheme with a step size of $h = 10^{-3}$. The formulas are:\n$$\n\\frac{\\partial S}{\\partial g}(g,q,s,\\nu,Z) \\approx \\frac{S(g+h,q,s,\\nu,Z) - S(g-h,q,s,\\nu,Z)}{2h}\n$$\n$$\n\\frac{\\partial^2 S}{\\partial g^2}(g,q,s,\\nu,Z) \\approx \\frac{S(g+h,q,s,\\nu,Z) - 2S(g,q,s,\\nu,Z) + S(g-h,q,s,\\nu,Z)}{h^2}\n$$\n$$\n\\frac{\\partial S}{\\partial \\nu}(g,q,s,\\nu,Z) \\approx \\frac{S(g,q,s,\\nu+h,Z) - S(g,q,s,\\nu-h,Z)}{2h}\n$$\n\nBased on these derivatives, three physical properties are assessed for a given set of input parameters:\n- **Monotonicity in gradient drive $g$**: The model is consistent if the transport does not decrease with the driving gradient. This is checked by the condition $\\frac{\\partial S}{\\partial g} \\ge 0$.\n- **Convexity in gradient drive $g$**: Often referred to as \"stiffness\", this property implies that the transport increases at an accelerating rate above a certain threshold. This is checked by the condition $\\frac{\\partial^2 S}{\\partial g^2} \\ge 0$.\n- **Monotonicity in collisionality $\\nu$**: Transport is expected to be suppressed by collisionality. This is checked by the condition $\\frac{\\partial S}{\\partial \\nu} \\le 0$.\n\nTo account for floating-point inaccuracies, a numerical tolerance $\\tau = 10^{-10}$ is used. The boolean conditions are formalized as:\n- `monotone_g` is true if $\\frac{\\partial S}{\\partial g} \\ge -\\tau$.\n- `convex_g` is true if $\\frac{\\partial^2 S}{\\partial g^2} \\ge -\\tau$.\n- `monotone_nu` is true if $\\frac{\\partial S}{\\partial \\nu} \\le \\tau$.\n\nThe procedure will be implemented in a Python program. A function will be created for the surrogate model $S(g,q,s,\\nu,Z)$. The program will then iterate through the five provided test cases. For each case, it will calculate the three required derivatives using the finite difference formulas. Subsequently, it evaluates the three boolean conditions. The final output for each case is a list of these three booleans. The results from all test cases will be collected and formatted into a single string representing a list of lists, as specified in the problem statement.\nThe parameters for each test case $(g, q, s, \\nu, Z)$ are:\n- Case $1$: $(2.0,\\,1.5,\\,0.5,\\,0.1,\\,1.0)$\n- Case $2$: $(3.0,\\,1.2,\\,0.0,\\,0.2,\\,1.2)$\n- Case $3$: $(3.7,\\,2.0,\\,1.0,\\,0.05,\\,1.5)$\n- Case $4$: $(6.0,\\,1.0,\\,0.0,\\,0.8,\\,1.0)$\n- Case $5$: $(4.0,\\,3.0,\\,2.0,\\,0.0,\\,1.8)$\nThe calculations will be performed using the `numpy` library for mathematical functions to ensure numerical precision.",
            "answer": "[[True,True,True],[True,True,True],[True,True,True],[True,True,True],[True,True,True]]"
        },
        {
            "introduction": "A key advantage of machine learning surrogates is their ability to rapidly explore scenarios, but this often involves uncertainty. This exercise moves from model validation to application, demonstrating how to use a probabilistic surrogate to make predictions about plasma behavior. You will apply probability theory to a transport stiffness model to calculate the expected change in heat flux, a practical skill for using surrogates in predictive modeling and uncertainty quantification. ",
            "id": "4194387",
            "problem": "A fusion plasma transport code uses a Machine Learning (ML)-based surrogate model to close the ion heat flux. The surrogate provides a stiffness-like closure based on the conductive heat flux definition and gyro-Bohm normalization. Begin from the conductive ion heat flux definition $Q_i = - n_i \\chi_i \\nabla T_i$, where $n_i$ is the ion density, $\\chi_i$ is the ion thermal diffusivity, and $T_i$ is the ion temperature. Under a large-aspect-ratio tokamak approximation with radial coordinate $r$ and major radius $R$, the normalized temperature gradient is defined by $R/L_{T_i}$ with $L_{T_i}^{-1} = - \\frac{1}{T_i}\\frac{d T_i}{d r}$. The normalized ion heat flux is $q \\equiv \\frac{Q_i}{n_i T_i c_s}$, where $c_s$ is the sound speed defined as $c_s = \\sqrt{\\frac{T_e}{m_i}}$ for electron temperature $T_e$ and ion mass $m_i$. The surrogate model returns a predicted normalized diffusivity parameter $\\chi_0$ and enforces a thresholded stiffness closure\n$$\nq = \\chi_0 \\left( \\frac{R}{L_{T_i}} - \\left(\\frac{R}{L_{T_i}}\\right)_{\\text{crit}} \\right)_+,\n$$\nwhere $(x)_+ \\equiv \\max(x,0)$ and $\\left(\\frac{R}{L_{T_i}}\\right)_{\\text{crit}}$ is the critical gradient for turbulence onset.\n\nBecause the ML-based surrogate is probabilistic, its predictive distribution for the baseline normalized temperature gradient $X \\equiv \\frac{R}{L_{T_i}}$ in the operating scenario is modeled as Gaussian, $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$, independent of $\\chi_0$. A proposed heating change increases $X$ by a fixed amount $\\Delta$, i.e., $X \\mapsto X + \\Delta$. Using the stiffness closure above and the probabilistic prediction for $X$, derive from first principles an analytic expression for the expected change in the normalized heat flux,\n$$\n\\mathbb{E}[\\Delta q] = \\mathbb{E}\\left[ \\chi_0 \\left( (X+\\Delta - c)_+ - (X - c)_+ \\right) \\right],\n$$\nwhere $c \\equiv \\left(\\frac{R}{L_{T_i}}\\right)_{\\text{crit}}$, and then evaluate it numerically for the scenario:\n- $\\mu = 3.4$,\n- $\\sigma = 0.1$,\n- $c = 3.5$,\n- $\\Delta = 0.2$,\n- $\\chi_0 = 0.5$.\n\nExpress the final answer for $\\mathbb{E}[\\Delta q]$ as a dimensionless number and round your numerical result to four significant figures. No intermediate numerical rounding should be performed before the final step.",
            "solution": "The problem statement has been validated and is deemed sound. It is scientifically grounded in the principles of fusion plasma transport and turbulence theory, and it presents a well-posed mathematical problem based on standard probability theory. All necessary parameters and definitions are provided.\n\nThe objective is to derive an analytical expression for the expected change in the normalized ion heat flux, $\\mathbb{E}[\\Delta q]$, and then evaluate it for a specific scenario. The expected change is defined as:\n$$\n\\mathbb{E}[\\Delta q] = \\mathbb{E}\\left[ \\chi_0 \\left( (X+\\Delta - c)_+ - (X - c)_+ \\right) \\right]\n$$\nwhere $X \\equiv R/L_{T_i}$ is the normalized temperature gradient, modeled as a Gaussian random variable $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$. The parameter $c \\equiv (R/L_{T_i})_{\\text{crit}}$ is the critical gradient, $\\Delta$ is a fixed increase in $X$, $\\chi_0$ is the normalized diffusivity parameter, and $(z)_+ \\equiv \\max(z,0)$ is the positive-part function.\n\nThe problem states that the surrogate's prediction for $X$ is independent of $\\chi_0$. Furthermore, for the numerical evaluation, $\\chi_0$ is given as a constant value. Therefore, we can factor $\\chi_0$ out of the expectation:\n$$\n\\mathbb{E}[\\Delta q] = \\chi_0 \\mathbb{E}\\left[ (X+\\Delta - c)_+ - (X - c)_+ \\right]\n$$\nBy the linearity of expectation, this becomes:\n$$\n\\mathbb{E}[\\Delta q] = \\chi_0 \\left( \\mathbb{E}\\left[ (X+\\Delta - c)_+ \\right] - \\mathbb{E}\\left[ (X - c)_+ \\right] \\right)\n$$\nThe core of the problem is to find the expectation of a function of the form $(Z-a)_+$ where $Z$ is a Gaussian random variable $Z \\sim \\mathcal{N}(\\mu_Z, \\sigma_Z^2)$. Let $f_Z(z)$ be the probability density function (PDF) of $Z$:\n$$\nf_Z(z) = \\frac{1}{\\sigma_Z \\sqrt{2\\pi}} \\exp\\left(-\\frac{(z-\\mu_Z)^2}{2\\sigma_Z^2}\\right)\n$$\nThe expectation $\\mathbb{E}[(Z-a)_+]$ is calculated by the integral:\n$$\n\\mathbb{E}[(Z-a)_+] = \\int_{-\\infty}^{\\infty} (z-a)_+ f_Z(z) dz = \\int_{a}^{\\infty} (z-a) f_Z(z) dz\n$$\nThis is a standard result from probability theory. The integral evaluates to:\n$$\n\\mathbb{E}[(Z-a)_+] = (\\mu_Z - a) \\Phi\\left(\\frac{\\mu_Z-a}{\\sigma_Z}\\right) + \\sigma_Z \\phi\\left(\\frac{\\mu_Z-a}{\\sigma_Z}\\right)\n$$\nwhere $\\phi(v) = \\frac{1}{\\sqrt{2\\pi}}\\exp(-v^2/2)$ is the PDF of the standard normal distribution, and $\\Phi(v) = \\int_{-\\infty}^{v} \\phi(t) dt$ is its cumulative distribution function (CDF).\n\nWe apply this general formula to the two terms in our expression for $\\mathbb{E}[\\Delta q]$.\nFor the first term, $\\mathbb{E}\\left[ (X+\\Delta - c)_+ \\right] = \\mathbb{E}\\left[ (X - (c-\\Delta))_+ \\right]$, we identify $Z=X$, $\\mu_Z=\\mu$, $\\sigma_Z=\\sigma$, and $a=c-\\Delta$. The expectation is:\n$$\n\\mathbb{E}\\left[ (X+\\Delta - c)_+ \\right] = (\\mu - (c-\\Delta)) \\Phi\\left(\\frac{\\mu-(c-\\Delta)}{\\sigma}\\right) + \\sigma \\phi\\left(\\frac{\\mu-(c-\\Delta)}{\\sigma}\\right)\n$$\n$$\n= (\\mu - c + \\Delta) \\Phi\\left(\\frac{\\mu-c+\\Delta}{\\sigma}\\right) + \\sigma \\phi\\left(\\frac{\\mu-c+\\Delta}{\\sigma}\\right)\n$$\nFor the second term, $\\mathbb{E}\\left[ (X - c)_+ \\right]$, we identify $Z=X$, $\\mu_Z=\\mu$, $\\sigma_Z=\\sigma$, and $a=c$. The expectation is:\n$$\n\\mathbb{E}\\left[ (X - c)_+ \\right] = (\\mu - c) \\Phi\\left(\\frac{\\mu-c}{\\sigma}\\right) + \\sigma \\phi\\left(\\frac{\\mu-c}{\\sigma}\\right)\n$$\nCombining these gives the full analytical expression for $\\mathbb{E}[\\Delta q]$:\n$$\n\\mathbb{E}[\\Delta q] = \\chi_0 \\left[ \\left( (\\mu-c+\\Delta) \\Phi\\left(\\frac{\\mu-c+\\Delta}{\\sigma}\\right) + \\sigma \\phi\\left(\\frac{\\mu-c+\\Delta}{\\sigma}\\right) \\right) - \\left( (\\mu-c) \\Phi\\left(\\frac{\\mu-c}{\\sigma}\\right) + \\sigma \\phi\\left(\\frac{\\mu-c}{\\sigma}\\right) \\right) \\right]\n$$\nNow, we evaluate this expression using the provided numerical values: $\\mu=3.4$, $\\sigma=0.1$, $c=3.5$, $\\Delta=0.2$, and $\\chi_0=0.5$.\n\nFirst, we compute the arguments of the special functions $\\Phi$ and $\\phi$:\n$$\n\\frac{\\mu-c+\\Delta}{\\sigma} = \\frac{3.4 - 3.5 + 0.2}{0.1} = \\frac{0.1}{0.1} = 1\n$$\n$$\n\\frac{\\mu-c}{\\sigma} = \\frac{3.4 - 3.5}{0.1} = \\frac{-0.1}{0.1} = -1\n$$\nLet's denote these normalized arguments as $\\alpha_1 = 1$ and $\\alpha_2 = -1$. The prefactors are:\n$$\n\\mu-c+\\Delta = 0.1\n$$\n$$\n\\mu-c = -0.1\n$$\nSubstituting these into the expression for $\\mathbb{E}[\\Delta q]$:\n$$\n\\mathbb{E}[\\Delta q] = \\chi_0 \\left[ \\left( (0.1) \\Phi(1) + \\sigma \\phi(1) \\right) - \\left( (-0.1) \\Phi(-1) + \\sigma \\phi(-1) \\right) \\right]\n$$\nWe use the properties of the standard normal distribution: $\\phi(-z) = \\phi(z)$ and $\\Phi(-z) = 1 - \\Phi(z)$.\n$\\phi(-1) = \\phi(1)$, so the terms involving $\\sigma$ are $\\sigma \\phi(1) - \\sigma \\phi(-1) = 0$. The expression simplifies to:\n$$\n\\mathbb{E}[\\Delta q] = \\chi_0 \\left[ (0.1) \\Phi(1) - (-0.1) \\Phi(-1) \\right] = \\chi_0 \\left[ (0.1) (\\Phi(1) + \\Phi(-1)) \\right]\n$$\nNow, substituting $\\Phi(-1) = 1 - \\Phi(1)$:\n$$\n\\mathbb{E}[\\Delta q] = \\chi_0 \\left[ (0.1) (\\Phi(1) + 1 - \\Phi(1)) \\right] = \\chi_0 \\left[ (0.1) (1) \\right] = 0.1 \\chi_0\n$$\nThis simplification occurs because the specific numerical parameters satisfy the condition $2(\\mu-c)+\\Delta = 0$.\n\nFinally, we substitute the value of $\\chi_0=0.5$:\n$$\n\\mathbb{E}[\\Delta q] = 0.1 \\times 0.5 = 0.05\n$$\nThe problem requires the answer to be rounded to four significant figures.\n$$\n0.05000\n$$\nWhich can be written in scientific notation as:\n$$\n5.000 \\times 10^{-2}\n$$",
            "answer": "$$\\boxed{5.000 \\times 10^{-2}}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "为了在光刻胶上形成图形，它必须吸收特定量的能量，即曝光剂量。本练习通过计算所需单个EUV光子的数量，将这一宏观工艺参数与量子世界联系起来。这项计算  揭示了实现大规模量产所需的巨大光子通量，从而让我们对为何开发高功率EUV光源是一项艰巨的工程挑战有了清晰的量化理解。",
            "id": "4275129",
            "problem": "在极紫外（EUV）光刻技术中，化学放大光刻胶需要在晶圆平面上达到目标曝光剂量 $D$。假设曝光波长为 $\\lambda=13.5\\,\\text{nm}$，单个光子的能量由 $E_{\\gamma}=hc/\\lambda$ 给出，其中 $h$ 是普朗克常数，$c$ 是光速。对于本问题，将光刻胶量子效率（$\\eta$）定义为入射光子中将其全部能量沉积在光刻胶中并因此对有效吸收剂量做出贡献的部分，并假设每个这样的光子都将其全部能量 $E_{\\gamma}$ 沉积在光刻胶中。\n\n从第一性原理出发，推导在曝光时间 $t$ 内传递剂量 $D$ 所需的晶圆上入射光子通量 $\\Phi$（光子/秒/平方厘米）的表达式。然后，在 $D=20\\,\\text{mJ}/\\text{cm}^{2}$、$\\eta=0.40$、 $t=20\\,\\text{ms}$、$h=6.62607015\\times 10^{-34}\\,\\text{J}\\cdot\\text{s}$ 和 $c=2.99792458\\times 10^{8}\\,\\text{m}/\\text{s}$ 的条件下，对 $\\Phi$ 进行数值计算。将您的数值答案四舍五入到四位有效数字。用单位 光子 $s^{-1} cm^{-2}$ 表示最终的光子通量。最后，基于您的计算结果和物理推理，简要讨论这对在 $\\lambda=13.5\\,\\text{nm}$ 波长下运行的先进设备中的光源功率传输意味着什么。",
            "solution": "首先验证问题，以确保其具有科学依据、提法明确且客观。\n\n**第 1 步：提取已知条件**\n-   目标曝光剂量：$D$\n-   曝光波长：$\\lambda = 13.5\\,\\text{nm}$\n-   单个光子的能量：$E_{\\gamma} = hc/\\lambda$\n-   普朗克常数：$h$\n-   光速：$c$\n-   光刻胶量子效率：$\\eta$，定义为对有效吸收剂量有贡献的入射光子的比例。\n-   任务 1：推导在时间 $t$ 内提供剂量 $D$ 所需的入射光子通量 $\\Phi$（光子 $s^{-1} cm^{-2}$）的表达式。\n-   任务 2：在 $D = 20\\,\\text{mJ}/\\text{cm}^{2}$、$\\eta = 0.40$、 $t = 20\\,\\text{ms}$、$h=6.62607015\\times 10^{-34}\\,\\text{J}\\cdot\\text{s}$ 和 $c=2.99792458\\times 10^{8}\\,\\text{m}/\\text{s}$ 的条件下计算 $\\Phi$。\n-   任务 3：将数值答案四舍五入到四位有效数字。\n-   任务 4：简要讨论对光源功率传输的影响。\n\n**第 2 步：使用提取的已知条件进行验证**\n该问题的科学基础是应用于半导体光刻的量子力学和光学原理。这些量、它们的定义以及它们之间的关系在纳米电子学领域是标准的。所提供的物理常数值是正确的，光刻工艺的参数（剂量、波长、曝光时间、效率）是现实的，并代表了当前 EUV 技术。该问题提法明确，为获得唯一解提供了所有必要信息，并使用客观、正式的语言陈述。要求讨论其影响，是将计算结果应用于更广泛工程背景下的标准练习。因此，该问题被认定为有效。\n\n**第 3 步：结论与行动**\n问题有效。将提供完整解答。\n\n**光子通量表达式的推导**\n我们从第一性原理开始。入射光子通量 $\\Phi$ 定义为每单位时间每单位面积入射的光子数。在曝光时间 $t$ 内，单位面积上总的入射光子数（入射光子注量）是乘积 $\\Phi t$。\n\n光刻胶量子效率 $\\eta$ 是这些入射光子中被有效吸收并对光刻胶的化学变化做出贡献的部分。因此，单位面积上有效吸收的光子数 $N_{abs}$ 由下式给出：\n$$N_{abs} = \\eta \\Phi t$$\n\n每个被吸收的光子将能量 $E_{\\gamma}$ 沉积到光刻胶中。单个光子的能量由普朗克-爱因斯坦关系式给出：\n$$E_{\\gamma} = \\frac{hc}{\\lambda}$$\n其中 $h$ 是普朗克常数，$c$ 是光速，$\\lambda$ 是光子波长。\n\n目标曝光剂量 $D$ 定义为单位面积吸收的总能量。它等于单位面积上吸收的光子数与每个光子沉积的能量的乘积：\n$$D = N_{abs} \\cdot E_{\\gamma}$$\n\n将 $N_{abs}$ 和 $E_{\\gamma}$ 的表达式代入剂量 $D$ 的方程中：\n$$D = (\\eta \\Phi t) \\left( \\frac{hc}{\\lambda} \\right)$$\n\n我们的目标是找到所需入射光子通量 $\\Phi$ 的表达式。我们可以重排上述方程来求解 $\\Phi$：\n$$\\Phi = \\frac{D \\lambda}{\\eta t h c}$$\n这就是所求的入射光子通量的解析表达式。\n\n**光子通量的数值计算**\n我们被要求在给定参数下计算 $\\Phi$。为确保一致性，所有数值都将用一致的单位制表示。我们将使用厘米（cm）、秒（s）和焦耳（J）。\n\n给定的值为：\n-   $D = 20\\,\\text{mJ}/\\text{cm}^2 = 20 \\times 10^{-3}\\,\\text{J}/\\text{cm}^2$\n-   $\\lambda = 13.5\\,\\text{nm} = 13.5 \\times 10^{-7}\\,\\text{cm}$\n-   $\\eta = 0.40$ (无量纲)\n-   $t = 20\\,\\text{ms} = 20 \\times 10^{-3}\\,\\text{s}$\n-   $h = 6.62607015 \\times 10^{-34}\\,\\text{J}\\cdot\\text{s}$\n-   $c = 2.99792458 \\times 10^{8}\\,\\text{m}/\\text{s} = 2.99792458 \\times 10^{10}\\,\\text{cm}/\\text{s}$\n\n首先，我们计算乘积 $hc$：\n$$hc = (6.62607015 \\times 10^{-34}\\,\\text{J}\\cdot\\text{s}) \\times (2.99792458 \\times 10^{10}\\,\\text{cm}/\\text{s})$$\n$$hc \\approx 1.98644586 \\times 10^{-23}\\,\\text{J}\\cdot\\text{cm}$$\n\n现在，我们将所有值代入 $\\Phi$ 的表达式中：\n$$\\Phi = \\frac{(20 \\times 10^{-3}\\,\\text{J}/\\text{cm}^2) \\times (13.5 \\times 10^{-7}\\,\\text{cm})}{(0.40) \\times (20 \\times 10^{-3}\\,\\text{s}) \\times (1.98644586 \\times 10^{-23}\\,\\text{J}\\cdot\\text{cm})}$$\n\n我们分别计算分子和分母。\n分子：\n$$(20 \\times 10^{-3}) \\times (13.5 \\times 10^{-7}) = 270 \\times 10^{-10} = 2.7 \\times 10^{-8}\\,\\text{J}/\\text{cm}$$\n分母：\n$$(0.40) \\times (20 \\times 10^{-3}) \\times (1.98644586 \\times 10^{-23}) = (8 \\times 10^{-3}) \\times (1.98644586 \\times 10^{-23})$$\n$$= 15.8915669 \\times 10^{-26} = 1.58915669 \\times 10^{-25}\\,\\text{J}\\cdot\\text{cm}\\cdot\\text{s}$$\n\n现在，我们计算比率：\n$$\\Phi = \\frac{2.7 \\times 10^{-8}\\,\\text{J}/\\text{cm}}{1.58915669 \\times 10^{-25}\\,\\text{J}\\cdot\\text{cm}\\cdot\\text{s}} \\approx 1.699045 \\times 10^{17}\\,\\text{s}^{-1}\\,\\text{cm}^{-2}$$\n\n将结果四舍五入到四位有效数字，我们得到：\n$$\\Phi \\approx 1.699 \\times 10^{17}\\,\\text{光子}\\,\\text{s}^{-1}\\,\\text{cm}^{-2}$$\n\n**对光源功率传输影响的讨论**\n计算出的入射光子通量约为 $1.7 \\times 10^{17}\\,\\text{光子}\\,\\text{s}^{-1}\\,\\text{cm}^{-2}$，这是一个巨大的数值。该数值对 EUV 光源的功率要求具有深远的影响。\n\n1.  **晶圆上的高功率密度**：晶圆平面上所需的入射功率密度（辐照度，$I$）可以由通量和每个光子能量的乘积计算得出。入射辐照度为 $I = D/(\\eta t) = (20 \\times 10^{-3}\\,\\text{J/cm}^2) / (0.40 \\times 20 \\times 10^{-3}\\,\\text{s}) = 2.5\\,\\text{W/cm}^2$。这是需要传递给光刻胶的相当大的功率密度。\n\n2.  **光学系统损耗**：由光源产生的 EUV 光必须通过一个复杂的光学系统传输并聚焦到晶圆上。该系统由一系列多层布拉格反射镜（例如，Mo/Si 反射镜）组成，因为透射式透镜不适用于 EUV 波长。每个反射镜的反射率都远低于 $100\\%$（对于 $\\lambda = 13.5\\,\\text{nm}$，通常最高约为 $\\sim 70\\%$）。对于一个有 $N$ 个反射镜的系统，总光学传输效率是各反射率的乘积，导致整体效率非常低。例如，一个由10个反射率为70%的反射镜组成的光学系统，其总透射率将为 $(0.7)^{10} \\approx 0.028$，即不到 $3\\%$。\n\n3.  **极高的光源功率要求**：由于光学系统的传输效率非常低，EUV 光源必须产生的功率比传递到晶圆上的功率高出几个数量级。如果总光学传输效率只有百分之几，那么为了在晶圆的曝光场上实现几瓦的功率，光源必须提供数百瓦可用的带内（$\\lambda = 13.5\\,\\text{nm}$）EUV 功率。此外，将初始能量（例如，来自高功率 CO$_2$ 激光器撞击锡滴的能量）转换为这种带内 EUV 辐射的效率也非常低（通常为百分之几）。\n\n总而言之，晶圆上所需的高光子通量，加上 EUV 产生和传输过程中的级联低效率，要求使用一个异常强大和稳定的光源，这通常涉及到数千瓦的驱动激光器。这一根本性挑战解释了为什么高功率 EUV 光源的开发是一项关键的、长达数十年的努力，并且至今仍是利用 EUV 光刻技术推进大规模制造的核心支柱。",
            "answer": "$$ \\boxed{1.699 \\times 10^{17}} $$"
        },
        {
            "introduction": "产生足够多的EUV光子只是挑战的一半；还必须将它们高效地收集并引导至晶圆。由于几乎所有材料都会吸收EUV光，这一任务需通过一套高度特制化的反射光学系统来完成。本练习  深入探讨了这些多层膜反射镜中的一个关键设计权衡：如何优化膜层数量，以在最大化光通量的同时，通过滤除不必要的带外辐射来保证光谱纯度。",
            "id": "4275080",
            "problem": "一个极紫外（EUV）光刻系统使用一个调谐在波长 $13.5 \\,\\mathrm{nm}$ 附近的反射式多层膜反射镜堆栈来收集来自光源的辐射。其目标是在抑制带外辐射的同时，最大化收集的功率通量。将光源发射光谱建模为一个中心位于 $13.5 \\,\\mathrm{nm}$、标准差为 $\\sigma_s$ 的高斯函数，并将多层膜的光谱反射率建模为一个中心位于 $13.5 \\,\\mathrm{nm}$、标准差为 $\\sigma_m(N) = k/N$ 的高斯函数，其中 $N$ 是反射镜堆栈中的整数双层膜数量，$k$ 是描述膜堆光谱选择性的正常数。设多层膜的峰值反射率由饱和函数 $R_0(N) = R_{\\max}\\left(1 - e^{-N/N_{\\text{sat}}}\\right)$ 建模，其中 $R_{\\max}$ 是渐近最大反射率，$N_{\\text{sat}}$ 是一个正的饱和参数。假设光源振幅在任意单位下为 $S_0 = 1$。\n\n仅从以下基本依据出发：\n- 高斯函数定义 $G(x;\\mu,\\sigma) = \\exp\\left( -\\dfrac{(x-\\mu)^2}{2\\sigma^2} \\right)$，\n- 两个关于同一变量的高斯函数的乘积与另一个高斯函数成正比，后者的逆方差等于前两者逆方差之和的性质，\n- 定积分 $\\int_{-\\infty}^{\\infty} \\exp\\left( -\\dfrac{x^2}{2\\sigma^2} \\right) \\, dx = \\sqrt{2\\pi}\\,\\sigma$，\n- 互补误差函数定义 $\\mathrm{erfc}(z) = \\dfrac{2}{\\sqrt{\\pi}} \\int_{z}^{\\infty} e^{-t^2} \\, dt$，\n\n推导所需的表达式以：\n1. 对于给定的整数 $N$，通过对光源光谱和多层膜反射率的乘积在波长上进行积分，计算以任意单位表示的总收集通量 $T(N)$。\n2. 计算收集辐射的带外分数 $F_{\\text{OOB}}(N)$，其定义为积分乘积中位于区间 $[13.5 \\,\\mathrm{nm} - \\Delta,\\, 13.5 \\,\\mathrm{nm} + \\Delta]$ 之外的部分所占的比例，其中 $\\Delta$ 是给定的以 $\\mathrm{nm}$ 为单位的非负带宽半宽度。\n3. 在规定的搜索区间 $[N_{\\min}, N_{\\max}]$ 内，确定整数 $N$，使其在满足约束条件 $F_{\\text{OOB}}(N) \\le \\varepsilon$ 的前提下最大化 $T(N)$，其中 $\\varepsilon$ 是以小数表示的给定非负阈值。\n\n在您的推导和计算中使用以下定义：\n- 光源光谱：$S(\\lambda) = S_0 \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_s^2} \\right)$，其中 $\\lambda_0 = 13.5 \\,\\mathrm{nm}$，$S_0 = 1$，\n- 多层膜反射率：$R(\\lambda;N) = R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_m(N)^2} \\right)$，其中 $\\sigma_m(N) = \\dfrac{k}{N}$，$R_0(N) = R_{\\max}\\left(1 - e^{-N/N_{\\text{sat}}}\\right)$，\n- 乘积高斯函数的有效标准差：$\\sigma_{\\text{eff}}(N)$，满足 $\\dfrac{1}{\\sigma_{\\text{eff}}(N)^2} = \\dfrac{1}{\\sigma_s^2} + \\dfrac{1}{\\sigma_m(N)^2}$。\n\n此外，报告有效半高全宽（FWHM）$W_{\\text{eff}}(N) = 2\\sqrt{2\\ln 2}\\,\\sigma_{\\text{eff}}(N)$ 和多层膜 FWHM $W_m(N) = 2\\sqrt{2\\ln 2}\\,\\sigma_m(N)$，两者单位均为 $\\mathrm{nm}$。所有与波长相关的输出均以 $\\mathrm{nm}$ 为单位表示，带外分数以小数表示。\n\n测试套件：\n对于每个测试用例，参数以元组 $(\\text{FWHM}_{\\text{source}}, \\Delta, \\varepsilon, R_{\\max}, N_{\\text{sat}}, k, N_{\\min}, N_{\\max})$ 的形式指定，其中 $\\text{FWHM}_{\\text{source}}$ 是光源的半高全宽（以 $\\mathrm{nm}$ 为单位），并与 $\\sigma_s$ 通过 $\\text{FWHM}_{\\text{source}} = 2\\sqrt{2\\ln 2}\\,\\sigma_s$ 相关联。使用以下测试用例：\n- 用例 1：$(0.27, 0.8, 0.05, 0.7, 40, 8.5, 10, 80)$。\n- 用例 2：$(0.27, 0.8, 0.01, 0.7, 40, 8.5, 10, 80)$。\n- 用例 3：$(1.0, 0.8, 0.05, 0.7, 40, 8.5, 10, 80)$。\n- 用例 4：$(0.10, 0.5, 0.20, 0.65, 30, 6.0, 10, 80)$。\n\n对于每个测试用例，您的程序必须：\n- 计算在 $[N_{\\min}, N_{\\max}]$ 区间内的最优整数 $N_{\\text{opt}}$，它在满足 $F_{\\text{OOB}}(N) \\le \\varepsilon$ 的条件下使 $T(N)$ 最大化。\n- 如果没有 $N$ 满足约束条件，则设置 $N_{\\text{opt}} = -1$ 并对计算出的浮点量报告“非数字”（not-a-number）；合规性布尔值必须为 $False$。\n- 为每个测试用例生成一个列表，其条目为 $[N_{\\text{opt}}, W_m(N_{\\text{opt}}), W_{\\text{eff}}(N_{\\text{opt}}), T(N_{\\text{opt}}), F_{\\text{OOB}}(N_{\\text{opt}}), \\text{compliance}]$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含所有测试用例的结果，形式为由逗号分隔的各用例列表，并用方括号括起来，例如 $[\\,[\\cdots],\\,[\\cdots],\\,[\\cdots],\\,[\\cdots]\\,]$。",
            "solution": "问题陈述经评估为有效。它提出了一个适定的优化问题，该问题基于一个物理上合理但简化的极紫外（EUV）光刻光学系统模型。所有参数、约束和目标都定义清晰且科学上一致。该问题是可形式化的，并且与指定领域直接相关。\n\n该解决方案需要三个主要部分：首先，推导总收集通量 $T(N)$ 的解析表达式；其次，推导带外分数 $F_{\\text{OOB}}(N)$；第三，设计一个算法来找到最优双层膜数 $N_{\\text{opt}}$，该数值在满足关于 $F_{\\text{OOB}}(N)$ 的约束条件下最大化 $T(N)$。\n\n光源光谱 $S(\\lambda)$ 和反射镜反射率 $R(\\lambda; N)$ 给出如下：\n$$S(\\lambda) = S_0 \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_s^2} \\right)$$\n$$R(\\lambda; N) = R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_m(N)^2} \\right)$$\n其中光源振幅为 $S_0 = 1$，中心波长为 $\\lambda_0 = 13.5 \\,\\mathrm{nm}$。\n\n### 1. 总收集通量 $T(N)$ 的推导\n\n总收集通量 $T(N)$ 是光源光谱与反射镜反射率的乘积在所有波长上的积分。\n$$T(N) = \\int_{-\\infty}^{\\infty} S(\\lambda) R(\\lambda; N) \\, d\\lambda$$\n这两个函数的乘积是：\n$$S(\\lambda) R(\\lambda; N) = (1) \\cdot \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_s^2} \\right) \\cdot R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_m(N)^2} \\right)$$\n$$S(\\lambda) R(\\lambda; N) = R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_s^2} - \\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_m(N)^2} \\right)$$\n对指数进行因式分解，我们利用了已知的先验知识，即两个高斯函数的乘积与另一个高斯函数成正比。指数中的项之和证实了这一点：\n$$S(\\lambda) R(\\lambda; N) = R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2} \\left[ \\dfrac{1}{\\sigma_s^2} + \\dfrac{1}{\\sigma_m(N)^2} \\right] \\right)$$\n使用给定的有效标准差定义 $\\dfrac{1}{\\sigma_{\\text{eff}}(N)^2} = \\dfrac{1}{\\sigma_s^2} + \\dfrac{1}{\\sigma_m(N)^2}$，乘积简化为一个振幅为 $R_0(N)$、标准差为 $\\sigma_{\\text{eff}}(N)$ 的单一高斯函数：\n$$S(\\lambda) R(\\lambda; N) = R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_{\\text{eff}}(N)^2} \\right)$$\n现在，我们可以计算 $T(N)$ 的积分：\n$$T(N) = \\int_{-\\infty}^{\\infty} R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_{\\text{eff}}(N)^2} \\right) \\, d\\lambda$$\n令 $x = \\lambda - \\lambda_0$，这意味着 $d x = d\\lambda$。积分限保持不变。\n$$T(N) = R_0(N) \\int_{-\\infty}^{\\infty} \\exp\\left( -\\dfrac{x^2}{2\\sigma_{\\text{eff}}(N)^2} \\right) \\, dx$$\n使用提供的定积分恒等式 $\\int_{-\\infty}^{\\infty} \\exp\\left( -\\dfrac{x^2}{2\\sigma^2} \\right) \\, dx = \\sqrt{2\\pi}\\,\\sigma$，并令 $\\sigma = \\sigma_{\\text{eff}}(N)$，我们得到总通量的最终表达式：\n$$T(N) = R_0(N) \\sqrt{2\\pi} \\, \\sigma_{\\text{eff}}(N)$$\n\n### 2. 带外分数 $F_{\\text{OOB}}(N)$ 的推导\n\n带外分数 $F_{\\text{OOB}}(N)$ 是总收集功率中落在光谱窗口 $[\\lambda_0 - \\Delta, \\lambda_0 + \\Delta]$ 之外的部分。这是带外功率与总功率之比。\n$$F_{\\text{OOB}}(N) = \\dfrac{\\int_{-\\infty}^{\\lambda_0-\\Delta} S(\\lambda)R(\\lambda;N)d\\lambda + \\int_{\\lambda_0+\\Delta}^{\\infty} S(\\lambda)R(\\lambda;N)d\\lambda}{T(N)}$$\n被积函数 $S(\\lambda)R(\\lambda;N)$ 关于 $\\lambda_0$ 对称。因此，分子中的两个积分相等。\n$$F_{\\text{OOB}}(N) = \\dfrac{2 \\int_{\\lambda_0+\\Delta}^{\\infty} R_0(N) \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_{\\text{eff}}(N)^2} \\right) d\\lambda}{R_0(N) \\sqrt{2\\pi} \\, \\sigma_{\\text{eff}}(N)}$$\n$R_0(N)$ 项相互抵消。\n$$F_{\\text{OOB}}(N) = \\dfrac{2}{\\sqrt{2\\pi} \\, \\sigma_{\\text{eff}}(N)} \\int_{\\lambda_0+\\Delta}^{\\infty} \\exp\\left( -\\dfrac{(\\lambda - \\lambda_0)^2}{2\\sigma_{\\text{eff}}(N)^2} \\right) d\\lambda$$\n我们进行换元以匹配互补误差函数的形式。令 $t = \\dfrac{\\lambda - \\lambda_0}{\\sqrt{2} \\sigma_{\\text{eff}}(N)}$。那么 $d\\lambda = \\sqrt{2} \\sigma_{\\text{eff}}(N) \\, dt$。积分限变化如下：\n- 下限：$\\lambda = \\lambda_0 + \\Delta \\implies t = \\dfrac{(\\lambda_0 + \\Delta) - \\lambda_0}{\\sqrt{2} \\sigma_{\\text{eff}}(N)} = \\dfrac{\\Delta}{\\sqrt{2} \\sigma_{\\text{eff}}(N)}$。令此为 $z$。\n- 上限：$\\lambda \\to \\infty \\implies t \\to \\infty$。\n积分变为：\n$$F_{\\text{OOB}}(N) = \\dfrac{2}{\\sqrt{2\\pi} \\, \\sigma_{\\text{eff}}(N)} \\int_{z}^{\\infty} e^{-t^2} \\left( \\sqrt{2} \\sigma_{\\text{eff}}(N) \\, dt \\right)$$\n$$F_{\\text{OOB}}(N) = \\dfrac{2\\sqrt{2}}{\\sqrt{2\\pi}} \\int_{z}^{\\infty} e^{-t^2} \\, dt = \\dfrac{2}{\\sqrt{\\pi}} \\int_{z}^{\\infty} e^{-t^2} \\, dt$$\n这正是互补误差函数 $\\mathrm{erfc}(z)$ 的定义。\n$$F_{\\text{OOB}}(N) = \\mathrm{erfc}\\left( \\dfrac{\\Delta}{\\sqrt{2} \\sigma_{\\text{eff}}(N)} \\right)$$\n\n### 3. 计算公式总结\n\n对于给定的整数双层膜数 $N$，所需的物理量计算如下：\n- 光源标准差：$\\sigma_s = \\dfrac{\\text{FWHM}_{\\text{source}}}{2\\sqrt{2\\ln 2}}$。\n- 反射镜光谱标准差：$\\sigma_m(N) = \\dfrac{k}{N}$。\n- 有效标准差：$\\sigma_{\\text{eff}}(N) = \\left(\\dfrac{1}{\\sigma_s^2} + \\dfrac{N^2}{k^2}\\right)^{-1/2}$。\n- 峰值反射率：$R_0(N) = R_{\\max}\\left(1 - e^{-N/N_{\\text{sat}}}\\right)$。\n- 总通量：$T(N) = \\sqrt{2\\pi} \\, \\sigma_{\\text{eff}}(N) R_0(N)$。\n- 带外分数：$F_{\\text{OOB}}(N) = \\mathrm{erfc}\\left( \\dfrac{\\Delta}{\\sqrt{2} \\sigma_{\\text{eff}}(N)} \\right)$。\n- 多层膜 FWHM：$W_m(N) = 2\\sqrt{2\\ln 2}\\,\\sigma_m(N)$。\n- 有效 FWHM：$W_{\\text{eff}}(N) = 2\\sqrt{2\\ln 2}\\,\\sigma_{\\text{eff}}(N)$。\n\n### 4. 优化算法\n\n优化目标是在指定的搜索区间 $N \\in [N_{\\min}, N_{\\max}]$ 内找到整数 $N_{\\text{opt}}$，它在满足约束 $F_{\\text{OOB}}(N) \\le \\varepsilon$ 的同时最大化通量 $T(N)$。\n算法流程如下：\n1. 对从 $N_{\\min}$ 到 $N_{\\max}$（含两端）的所有整数值 $N$ 进行穷举搜索。\n2. 对于每个 $N$，计算 $\\sigma_{\\text{eff}}(N)$ 和 $F_{\\text{OOB}}(N)$ 的值。\n3. 评估约束 $F_{\\text{OOB}}(N) \\le \\varepsilon$ 是否满足。\n4. 如果满足约束条件，$N$ 被视为一个可行解。计算并存储相应的通量 $T(N)$。\n5. 在遍历所有可能的 $N$ 值后，检查可行解集。选择具有最大通量 $T(N)$ 的解，并将其对应的 $N$ 指定为 $N_{\\text{opt}}$。如果通量出现平局，则选择最小的 $N$ 值。\n6. 如果可行解集为空（即区间内没有 $N$ 满足约束），则将 $N_{\\text{opt}}$ 设置为 -1，所有相关的浮点结果报告为非数字（NaN）。合规状态设置为 False。\n7. 否则，为最优的 $N_{\\text{opt}}$ 计算所要求的指标（$W_m(N_{\\text{opt}})$、$W_{\\text{eff}}(N_{\\text{opt}})$、$T(N_{\\text{opt}})$、$F_{\\text{OOB}}(N_{\\text{opt}})$），并将合规状态设置为 True。\n此过程保证在定义的模型和搜索空间内找到最优解。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.special import erfc\n\ndef solve():\n    \"\"\"\n    Solves the EUV lithography multilayer mirror optimization problem\n    for a given set of test cases.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Parameters: (FWHM_source, Δ, ε, R_max, N_sat, k, N_min, N_max)\n    test_cases = [\n        (0.27, 0.8, 0.05, 0.7, 40, 8.5, 10, 80),\n        (0.27, 0.8, 0.01, 0.7, 40, 8.5, 10, 80),\n        (1.0, 0.8, 0.05, 0.7, 40, 8.5, 10, 80),\n        (0.10, 0.5, 0.20, 0.65, 30, 6.0, 10, 80),\n    ]\n\n    results = []\n    FWHM_TO_SIGMA = 2 * np.sqrt(2 * np.log(2))\n    SQRT_2 = np.sqrt(2)\n    SQRT_2PI = np.sqrt(2 * np.pi)\n\n    for case in test_cases:\n        fhwm_source, delta, epsilon, R_max, N_sat, k, N_min, N_max = case\n        \n        sigma_s = fhwm_source / FWHM_TO_SIGMA\n        sigma_s_sq_inv = 1 / sigma_s**2\n\n        valid_solutions = []\n\n        for N in range(N_min, N_max + 1):\n            # Calculate properties for the given N\n            sigma_m_N = k / N\n            \n            # Effective standard deviation\n            sigma_eff_N_sq_inv = sigma_s_sq_inv + (1 / sigma_m_N**2)\n            sigma_eff_N = 1 / np.sqrt(sigma_eff_N_sq_inv)\n            \n            # Out-of-band fraction\n            F_oob_N = erfc(delta / (SQRT_2 * sigma_eff_N))\n            \n            # Check constraint\n            if F_oob_N = epsilon:\n                # If valid, calculate throughput and store solution\n                R0_N = R_max * (1 - np.exp(-N / N_sat))\n                T_N = SQRT_2PI * sigma_eff_N * R0_N\n                \n                valid_solutions.append({\n                    \"N\": N,\n                    \"T\": T_N,\n                    \"F_oob\": F_oob_N,\n                    \"sigma_m\": sigma_m_N,\n                    \"sigma_eff\": sigma_eff_N\n                })\n        \n        if not valid_solutions:\n            # No N satisfies the constraint\n            case_result = [-1, np.nan, np.nan, np.nan, np.nan, False]\n        else:\n            # Find the solution with the maximum throughput\n            # In case of a tie, max() chooses the first one encountered (smallest N)\n            best_solution = max(valid_solutions, key=lambda x: x['T'])\n            \n            N_opt = best_solution['N']\n            \n            # Calculate final metrics for the optimal N\n            W_m_opt = FWHM_TO_SIGMA * best_solution['sigma_m']\n            W_eff_opt = FWHM_TO_SIGMA * best_solution['sigma_eff']\n            T_opt = best_solution['T']\n            F_oob_opt = best_solution['F_oob']\n            compliance = True\n            \n            case_result = [N_opt, W_m_opt, W_eff_opt, T_opt, F_oob_opt, compliance]\n\n        results.append(case_result)\n\n    # Format the final output string exactly as specified.\n    case_strings = []\n    for res_list in results:\n        val_strings = [str(v) for v in res_list]\n        case_strings.append(f\"[{','.join(val_strings)}]\")\n    \n    final_output_string = f\"[{','.join(case_strings)}]\"\n    \n    # Final print statement in the exact required format.\n    print(final_output_string)\n\nsolve()\n```"
        },
        {
            "introduction": "在纳米尺度上，光的本征分立性成为限制工艺控制的主要因素。光子到达光刻胶是一个随机的概率过程，这导致了所谓的“散粒噪声”。本练习  提供了一种动手实践的方法来为这种随机效应建模，展示了吸收光子数的涨落如何直接转化为最终图形关键尺寸（CD）的变异。",
            "id": "4275056",
            "problem": "在极紫外（EUV）光刻技术中，光刻胶中吸收的光子到达事件可以很好地用泊松点过程来建模。考虑一个一维线/空间图案，其标称边缘位于位置 $x_0$ 处，其中每个有效测量段的平均吸收光子数为 $\\bar{N}(x_0)$。在阈值光刻胶模型下，显影后的边缘是满足 $N(x)=N_{\\text{th}}$ 的位置 $x$，其中 $N(x)$ 是以 $x$ 为中心的段中的随机吸收光子数，而 $N_{\\text{th}}$ 是对应于阈值剂量的阈值计数。假设以下基于物理的近似和定义：\n- 光子计数服从泊松分布：对于每个位置 $x$，有 $N(x)\\sim\\mathrm{Poisson}(\\bar{N}(x))$。\n- 在标称边缘 $x_0$ 附近，平均计数呈线性变化：$\\bar{N}(x)\\approx N_{\\text{th}}+s\\,(x-x_0)$，其中 $s=\\left.\\frac{d\\bar{N}}{dx}\\right|_{x_0}$ 是平均吸收光子数相对于位置的局部梯度。\n- 对于对称线，左右标称边缘分别位于 $x=-x_0$ 和 $x=+x_0$，其各自的梯度为 $+S$ 和 $-S$，其中 $S=|s|0$。\n- 不重叠边缘段中的光子计数是独立的。\n\n仅使用上述基础，首先推导关键尺寸（CD）的分布，CD 定义为 $\\mathrm{CD}=x_{\\mathrm{R}}-x_{\\mathrm{L}}$，其中 $x_{\\mathrm{R}}$ 和 $x_{\\mathrm{L}}$ 是由阈值条件定义的随机右边缘和左边缘位置。然后，对于下面指定的条件，计算CD分布的均值和方差：\n\n- 在波长 $13.5\\ \\mathrm{nm}$ 时，标称关键尺寸为 $CD_0=2x_0=20\\ \\mathrm{nm}$。\n- 任一标称边缘处的平均吸收光子数等于阈值计数，即 $\\bar{N}(\\pm x_0)=N_{\\text{th}}=\\mu$，其中 $\\mu=1500$。\n- 任一边缘处平均计数梯度的幅值为 $S=600\\ \\mathrm{photons}/\\mathrm{nm}$。\n\n以纳米表示CD均值，以平方纳米表示CD方差。将您的答案四舍五入到四位有效数字。您的最终响应必须是“均值，方差”对，形式为单行矩阵。",
            "solution": "首先根据所需标准对问题进行验证。\n\n### 问题验证\n\n**步骤1：提取给定条件**\n- 光子到达事件被建模为泊松点过程。\n- 显影后的边缘是满足 $N(x) = N_{\\text{th}}$ 的位置 $x$，其中 $N(x)$ 是随机吸收光子数，而 $N_{\\text{th}}$ 是阈值计数。\n- $N(x) \\sim \\mathrm{Poisson}(\\bar{N}(x))$，其中 $\\bar{N}(x)$ 是平均吸收光子数。\n- 在标称边缘 $x_0$ 附近，平均计数呈线性变化：$\\bar{N}(x) \\approx N_{\\text{th}} + s\\,(x-x_0)$，其中 $s = \\left.\\frac{d\\bar{N}}{dx}\\right|_{x_0}$。\n- 对于对称线，标称左边缘位于 $-x_0$ 处，梯度为 $+S$；标称右边缘位于 $+x_0$ 处，梯度为 $-S$，其中 $S = |s|  0$。\n- 不重叠边缘段中的光子计数是独立的。\n- 关键尺寸定义为 $\\mathrm{CD} = x_{\\mathrm{R}} - x_{\\mathrm{L}}$，其中 $x_{\\mathrm{R}}$ 和 $x_{\\mathrm{L}}$ 是随机的右、左边缘位置。\n- 标称关键尺寸为 $CD_0 = 2x_0 = 20 \\ \\mathrm{nm}$。\n- EUV 波长为 $13.5 \\ \\mathrm{nm}$。\n- 标称边缘处的平均吸收光子数等于阈值：$\\bar{N}(\\pm x_0) = N_{\\text{th}} = \\mu$，其中 $\\mu = 1500$。\n- 任一边缘处平均计数梯度的幅值为 $S = 600 \\ \\mathrm{photons}/\\mathrm{nm}$。\n\n**步骤2：使用提取的给定条件进行验证**\n- **科学依据：** 该问题基于光刻中光子散粒噪声的公认原理，并用泊松分布进行建模。在边缘附近使用线性近似来处理光场强度（以及平均光子计数）是此类分析中标准且有效的简化方法。该问题对于理解EUV光刻中的随机效应（如线边缘粗糙度，LER）至关重要。\n- **适定性：** 问题提供了足够的数据和一套清晰的物理近似，足以推导出关键尺寸均值和方差的唯一解。\n- **客观性：** 问题以精确、定量的术语陈述，没有主观或模糊的语言。\n- **一致性和完整性：** 所提供的模型是自洽的。左右边缘的梯度定义（分别为 $+S$ 和 $-S$）对于以原点为中心的线特征在物理上是一致的。给定的数值对于EUV工艺是物理上合理的。波长信息提供了背景，但计算中并不需要，这不构成缺陷。\n\n**步骤3：结论和行动**\n该问题被认为是有效的，因为它科学合理、适定、客观且内部一致。可以继续求解过程。\n\n### 求解\n\n目标是计算关键尺寸 $\\mathrm{CD} = x_{\\mathrm{R}} - x_{\\mathrm{L}}$ 的均值 $\\mathrm{E}[\\mathrm{CD}]$ 和方差 $\\mathrm{Var}(\\mathrm{CD})$。\n\n根据期望算子的线性性质，CD的均值为：\n$$\n\\mathrm{E}[\\mathrm{CD}] = \\mathrm{E}[x_{\\mathrm{R}} - x_{\\mathrm{L}}] = \\mathrm{E}[x_{\\mathrm{R}}] - \\mathrm{E}[x_{\\mathrm{L}}]\n$$\n问题指出，不重叠段（对应于左右边缘）中的光子计数是独立的。因此，随机边缘位置 $x_{\\mathrm{R}}$ 和 $x_{\\mathrm{L}}$ 是独立的随机变量。因此，它们差值的方差是它们各自方差的和：\n$$\n\\mathrm{Var}(\\mathrm{CD}) = \\mathrm{Var}(x_{\\mathrm{R}} - x_{\\mathrm{L}}) = \\mathrm{Var}(x_{\\mathrm{R}}) + \\mathrm{Var}(x_{\\mathrm{L}})\n$$\n我们必须首先找到单个随机边缘位置的均值和方差，通常表示为 $x_e$。设该边缘的标称位置为 $x_{0,e}$，平均计数的局部梯度为 $s_e = \\left.\\frac{d\\bar{N}}{dx}\\right|_{x_{0,e}}$。\n\n边缘位置 $x_e$ 由阈值条件 $N(x_e) = N_{\\text{th}}$ 确定。为了找到 $x_e$ 的统计量，我们使用基于标称边缘 $x_{0,e}$ 周围波动的一阶近似。标称边缘处的光子计数波动为 $N(x_{0,e}) - \\bar{N}(x_{0,e})$。给定平均计数分布的线性近似 $\\bar{N}(x) \\approx \\bar{N}(x_{0,e}) + s_e(x-x_{0,e})$，需要一个位移 $\\Delta x = x_e - x_{0,e}$ 来补偿随机光子计数的波动。该条件可以表示为：\n$$\nN(x_{0,e}) - \\bar{N}(x_{0,e}) + s_e(x_e - x_{0,e}) \\approx 0\n$$\n根据问题陈述，我们有 $\\bar{N}(x_{0,e}) = N_{\\text{th}}$。因此，边缘放置误差 $x_e - x_{0,e}$ 由下式给出：\n$$\nx_e - x_{0,e} \\approx -\\frac{N(x_{0,e}) - N_{\\text{th}}}{s_e}\n$$\n这使我们能够找到 $x_e$ 的均值和方差。\n\n边缘位置的均值是：\n$$\n\\mathrm{E}[x_e] \\approx \\mathrm{E}\\left[x_{0,e} - \\frac{N(x_{0,e}) - N_{\\text{th}}}{s_e}\\right] = x_{0,e} - \\frac{\\mathrm{E}[N(x_{0,e})] - N_{\\text{th}}}{s_e}\n$$\n由于 $N(x_{0,e}) \\sim \\mathrm{Poisson}(\\bar{N}(x_{0,e}))$，其期望为 $\\mathrm{E}[N(x_{0,e})] = \\bar{N}(x_{0,e})$。如给定，$\\bar{N}(x_{0,e}) = N_{\\text{th}}$。因此：\n$$\n\\mathrm{E}[x_e] \\approx x_{0,e} - \\frac{N_{\\text{th}} - N_{\\text{th}}}{s_e} = x_{0,e}\n$$\n边缘的期望位置是其标称位置。\n\n边缘位置的方差是：\n$$\n\\mathrm{Var}(x_e) \\approx \\mathrm{Var}\\left(x_{0,e} - \\frac{N(x_{0,e}) - N_{\\text{th}}}{s_e}\\right) = \\mathrm{Var}\\left(-\\frac{N(x_{0,e})}{s_e}\\right) = \\frac{1}{s_e^2}\\mathrm{Var}(N(x_{0,e}))\n$$\n对于泊松分布的随机变量，方差等于其均值：$\\mathrm{Var}(N(x_{0,e})) = \\mathrm{E}[N(x_{0,e})] = N_{\\text{th}}$。代入此式可得：\n$$\n\\mathrm{Var}(x_e) \\approx \\frac{N_{\\text{th}}}{s_e^2}\n$$\n现在我们将这些一般结果应用于左右边缘。\n\n对于左边缘 $x_{\\mathrm{L}}$：\n- 标称位置：$x_{0,L} = -x_0$。\n- 梯度：$s_L = +S$。\n- 均值：$\\mathrm{E}[x_{\\mathrm{L}}] = -x_0$。\n- 方差：$\\mathrm{Var}(x_{\\mathrm{L}}) = \\frac{N_{\\text{th}}}{S^2}$。\n\n对于右边缘 $x_{\\mathrm{R}}$：\n- 标称位置：$x_{0,R} = +x_0$。\n- 梯度：$s_R = -S$。\n- 均值：$\\mathrm{E}[x_{\\mathrm{R}}] = +x_0$。\n- 方差：$\\mathrm{Var}(x_{\\mathrm{R}}) = \\frac{N_{\\text{th}}}{(-S)^2} = \\frac{N_{\\text{th}}}{S^2}$。\n\n现在，我们计算关键尺寸 $\\mathrm{CD}$ 的均值和方差。\n\nCD的均值：\n$$\n\\mathrm{E}[\\mathrm{CD}] = \\mathrm{E}[x_{\\mathrm{R}}] - \\mathrm{E}[x_{\\mathrm{L}}] = (+x_0) - (-x_0) = 2x_0\n$$\n给定的标称关键尺寸为 $CD_0 = 2x_0 = 20 \\ \\mathrm{nm}$。因此，\n$$\n\\mathrm{E}[\\mathrm{CD}] = 20 \\ \\mathrm{nm}\n$$\nCD的方差：\n$$\n\\mathrm{Var}(\\mathrm{CD}) = \\mathrm{Var}(x_{\\mathrm{R}}) + \\mathrm{Var}(x_{\\mathrm{L}}) = \\frac{N_{\\text{th}}}{S^2} + \\frac{N_{\\text{th}}}{S^2} = \\frac{2N_{\\text{th}}}{S^2}\n$$\n我们给定的数值为 $N_{\\text{th}} = 1500$ 和 $S = 600 \\ \\mathrm{photons}/\\mathrm{nm}$。将这些值代入方差表达式：\n$$\n\\mathrm{Var}(\\mathrm{CD}) = \\frac{2 \\times 1500}{(600)^2} = \\frac{3000}{360000} = \\frac{3}{360} = \\frac{1}{120} \\ \\mathrm{nm}^2\n$$\n将分数结果转换为小数：\n$$\n\\mathrm{Var}(\\mathrm{CD}) = \\frac{1}{120} \\approx 0.0083333... \\ \\mathrm{nm}^2\n$$\n问题要求将答案四舍五入到四位有效数字。\nCD均值为 $20 \\ \\mathrm{nm}$。保留四位有效数字，为 $20.00 \\ \\mathrm{nm}$。\nCD方差为 $\\approx 0.0083333... \\ \\mathrm{nm}^2$。保留四位有效数字，为 $0.008333 \\ \\mathrm{nm}^2$。\n\n所要求的（均值，方差）对是 ($20.00$, $0.008333$)。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n20.00  0.008333\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
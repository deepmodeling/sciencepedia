{"hands_on_practices": [{"introduction": "要真正理解基于智能体的模型（ABM）是如何工作的，最好的方法就是亲手操作一遍。这个练习将引导你手动模拟一个简单的寄生虫-宿主系统，让你清晰地看到智能体、状态、规则和时间步长这些核心要素如何协同作用。通过追踪每个智能体的每一步，你将掌握ABM模拟中事件顺序的重要性，并为后续更复杂的模型打下坚实基础。[@problem_id:1840965]", "problem": "考虑一个简单的基于主体的模型（ABM），旨在模拟一种不会自愈的寄生虫在一个小型宿主种群中的传播。环境是一个一维线性栖息地，由一排5个单元格表示，从1到5依次标记。模拟开始时有3个宿主主体，名为A、B和C。\n\n在时间 $t=0$ 时，系统的初始状态如下：\n- 宿主 A：易感，位于单元格 1。\n- 宿主 B：已感染，位于单元格 3。\n- 宿主 C：易感，位于单元格 5。\n\n模拟以离散时间步（$t=1, 2, ...$）进行。在每个时间步内，所有事件都按以下严格顺序发生：1. 移动，2. 感染，3. 死亡。\n\n控制主体的规则如下：\n\n1.  **移动规则**：\n    - 已感染的宿主是静止的，不会移动。\n    - 易感的宿主总是移动。移动方向取决于它们当前的单元格 $i$：\n        - 如果宿主位于末端单元格（单元格1或5），它会移动到相邻的内部单元格（分别为单元格2或4）。\n        - 如果宿主位于偶数编号的单元格（$i \\in \\{2, 4\\}$），它会向右移动一个单元格（到单元格 $i+1$）。\n        - 如果宿主位于奇数编号的内部单元格（$i = 3$），它会向左移动一个单元格（到单元格 $i-1$）。\n\n2.  **感染规则**：\n    - 移动阶段完成后，如果一个易感的宿主与一个或多个已感染的宿主占据同一个单元格，该易感宿主会立即被感染。此状态变化适用于当前时间步内所有后续阶段。\n\n3.  **死亡规则**：\n    - 易感的宿主在任何时间步内死亡的概率为0%。\n    - 已感染的宿主在任何时间步内有25%的概率（$p=0.25$）死亡。\n    - 为确保模拟的确定性，任何概率性死亡事件的结果都是预先确定的。如果从预先提供的随机抽取值列表中取出的一个值小于或等于事件的概率 $p$，则该事件（死亡）发生。在模拟过程中，每次进行死亡检查时要依次使用的随机抽取值列表是：[0.88, 0.41, 0.19, 0.95]。如果在同一时间步内有多个宿主需要进行死亡检查，则按其名称的字母顺序（即先A，再B，后C）进行检查。\n\n您的任务是手动运行此模拟两个完整的时间步（直到 $t=2$ 结束）。在第二个时间步结束时，系统中存活的宿主总数是多少？", "solution": "我们在每个时间步中按照指定的规则顺序进行模拟：移动，然后感染，然后死亡。对于一个已感染的宿主，当且仅当从列表中抽取的下一个随机值 $u$ 满足 $u \\leq p$（其中 $p=0.25$）时，死亡检查才会导致死亡。如果在同一时间步内检查多个已感染的宿主，顺序是A，然后B，然后C。\n\n$t=0$ 时的初始状态：\n- A：易感，位于单元格 $1$。\n- B：已感染，位于单元格 $3$。\n- C：易感，位于单元格 $5$。\n\n时间步 $t=1$：\n- 移动：\n  - 已感染的宿主不移动，所以B停留在单元格 $3$。\n  - A是易感的，在单元格 $1$（末端单元格），所以移动到单元格 $2$。\n  - C是易感的，在单元格 $5$（末端单元格），所以移动到单元格 $4$。\n  - 移动后结果：A在 $2$（易感），B在 $3$（已感染），C在 $4$（易感）。\n- 感染：\n  - A和C没有与任何已感染的宿主（B在 $3$）位于同一位置，所以没有新的感染发生。\n  - 状态保持：A易感，B已感染，C易感。\n- 死亡：\n  - 只有已感染的B符合条件。使用第一个随机抽取值 $u=0.88$ 与 $p=0.25$ 比较。因为 $0.88>0.25$，B存活。\n  - $t=1$ 结束时：A在 $2$（易感），B在 $3$（已感染），C在 $4$（易感）。三个主体都存活。\n\n时间步 $t=2$：\n- 移动：\n  - B已感染且不移动，停留在单元格 $3$。\n  - A是易感的，在偶数单元格 $2$，所以向右移动到单元格 $3$。\n  - C是易感的，在偶数单元格 $4$，所以向右移动到单元格 $5$。\n  - 移动后结果：A在 $3$（易感），B在 $3$（已感染），C在 $5$（易感）。\n- 感染：\n  - A与已感染的B共享单元格 $3$，所以A立即被感染。\n  - 感染后状态：A已感染，B已感染，C易感。\n- 死亡：\n  - 这一步要检查的已感染宿主是A和B，按字母顺序。\n  - 对于A：使用第二个随机抽取值 $u=0.41$。因为 $0.41>0.25$，A存活。\n  - 对于B：使用第三个随机抽取值 $u=0.19$。因为 $0.19\\leq 0.25$，B死亡并被移除。\n  - C是易感的，不进行检查。\n\n在 $t=2$ 结束时，存活的宿主是A（已感染）和C（易感），总计 $2$ 个存活宿主。", "answer": "$$\\boxed{2}$$", "id": "1840965"}, {"introduction": "在掌握了基础模拟之后，让我们来挑战一个更复杂的生态场景。这个练习将你带入一个捕食者与猎物共存的二维世界，它们的生存策略相互冲突。你将看到，通过为捕食者和猎物设定简单的追逐与躲避规则，模型能够涌现出复杂的空间动态和种群互动，这正是ABM在研究生态系统相互作用时的强大之处。[@problem_id:1840954]", "problem": "一位生态学家正在开发一个简单的基于智能体的模型（Agent-Based Model, ABM），以模拟一个离散景观上的捕食者-猎物动态。环境由一个5x5的网格表示，坐标为整数 $(x, y)$，其中 $x, y \\in \\{1, 2, 3, 4, 5\\}$。该模拟涉及两种类型的智能体：捕食者（P）和猎物（Y）。在任何时刻，一个网格方块最多只能被一个智能体占据。两个方块之间的距离使用曼哈顿距离来衡量：$d = |x_1 - x_2| + |y_1 - y_2|$。\n\n系统在时间 $t=0$ 时的初始状态如下：\n- 一只捕食者位于位置 $P_0 = (3,3)$。\n- 两只猎物位于位置 $Y_{A,0} = (1,3)$ 和 $Y_{B,0} = (5,2)$。\n\n模拟以离散的时间步进行。在每个时间步（从 $t$ 到 $t+1$），以下行动严格按顺序发生：\n\n1.  **捕食者行动：** 捕食者的探测半径为 $R_d = 3$。它会识别出此半径内的所有猎物。然后它会向着能使其与*最近的*已探测猎物的曼哈顿距离最小化的唯一方向移动一步（到相邻的方块，即上、下、左、右）。如果有多个猎物距离同样近，捕食者会选择y坐标较小的那个；如果仍然平局，则选择x坐标较小的那个。如果多个移动方向（北、东、南、西）都能提供相同的最小距离，捕食者的移动优先级为北（y+1），然后是东（x+1），然后是南（y-1），然后是西（x-1）。移动后，如果捕食者的新方块被一只猎物占据，该猎物将被吃掉并从模拟中移除。\n\n2.  **猎物移动：** 每只幸存的猎物会移动一步到一个相邻的（上、下、左、右）、未被占据的方块。移动的具体方向选择旨在*最大化*猎物与捕食者新位置（在步骤1中其行动之后的位置）的曼哈顿距离。如果多个移动方向都能得到相同的最大距离，猎物的移动优先级为西（x-1），然后是南（y-1），然后是东（x+1），然后是北（y+1）。一只猎物会尝试其最高优先级的有效移动；如果该方块在网格之外或已被占据，它会尝试次高优先级的有效移动，以此类推。如果所有四个潜在的移动都无效，猎物将停留在当前位置。所有猎物的移动都是基于此阶段开始时的网格状态计算的。\n\n3.  **猎物繁殖：** 移动阶段后仍在网格上的每只猎物都会繁殖。对于每只繁殖的猎物，会在一个相邻的、未被占据的方块上创建一个新的后代。后代的放置位置通过按固定的优先级顺序（北、东、南、西）检查其亲代的相邻方块来确定。第一个可用的空方块被选为后代的出生地。如果没有相邻的空方块，该猎物在此时间步内不繁殖。繁殖过程是顺序的：猎物按x坐标递增的顺序处理，如果x坐标相同，则按y坐标递增的顺序处理。\n\n从 $t=0$ 时的初始条件开始，确定在时间步 $t=2$ 结束时，网格上猎物的总数。", "solution": "我们在一个 $5 \\times 5$ 的网格上进行操作，曼哈顿距离为 $d=\\lvert x_{1}-x_{2}\\rvert+\\lvert y_{1}-y_{2}\\rvert$，$t=0$ 时的初始位置为：捕食者 $P_{0}=(3,3)$，猎物 $Y_{A,0}=(1,3)$，$Y_{B,0}=(5,2)$。\n\n从 $t=0$到$t=1$:\n1) 捕食者行动。探测半径 $R_{d}=3$。从 $(3,3)$ 出发的距离：\n$$d\\big((3,3),(1,3)\\big)=|3-1|+|3-3|=2,\\quad d\\big((3,3),(5,2)\\big)=|3-5|+|3-2|=2+1=3.$$\n最近的是位于 $(1,3)$ 的 $Y_{A}$。捕食者移动一步以最小化到 $(1,3)$ 的距离。从 $(3,3)$ 出发的候选移动：\n- 北: $(3,4)\\Rightarrow d=|3-1|+|4-3|=3$,\n- 东: $(4,3)\\Rightarrow d=|4-1|+|3-3|=3$,\n- 南: $(3,2)\\Rightarrow d=|3-1|+|2-3|=3$,\n- 西: $(2,3)\\Rightarrow d=|2-1|+|3-3|=1$。\n最小距离是向西移动，所以捕食者移动到 $(2,3)$，并且没有捕食（该方塊未被占据）。\n\n2) 猎物移动，基于捕食者在 $(2,3)$ 的位置以及当前的占据情况 $\\{(2,3),(1,3),(5,2)\\}$。\n- 位于 $(1,3)$ 的猎物 $Y_{A}$：移动以最大化与 $(2,3)$ 的距离。选项：西:$(0,3)$无效；南:$(1,2)$，距离 $|1-2|+|2-3|=2$，有效；东:$(2,3)$被占据；北:$(1,4)$，距离 $|1-2|+|4-3|=2$，有效。距离 $2$ 处出现平局；根据西、南、东、北的优先级，选择南。所以 $Y_{A}\\to(1,2)$。\n- 位于 $(5,2)$ 的猎物 $Y_{B}$：相对于 $(2,3)$ 的选项：西:$(4,2)$ 距离为 $|4-2|+|2-3|=3$；南:$(5,1)$ 距离为 $|5-2|+|1-3|=5$；东:$(6,2)$ 无效；北:$(5,3)$ 距离为 $|5-2|+|3-3|=3$。最大距离为 $5$，是向南移动，所以 $Y_{B}\\to(5,1)$。\n\n新的猎物位置：$(1,2)$ 和 $(5,1)$。捕食者位置在 $(2,3)$。\n\n3) 猎物繁殖，按x坐标递增然后y坐标递增的顺序，按北、东、南、西的顺序将后代放置到相邻的空方块上。\n- 亲代在 $(1,2)$：北向 $(1,3)$ 为空，所以后代在 $(1,3)$。\n- 亲代在 $(5,1)$：北向 $(5,2)$ 为空，所以后代在 $(5,2)$。\n$t=1$ 结束时：捕食者在 $(2,3)$；猎物在 $(1,2)$、$(1,3)$、$(5,1)$、$(5,2)$。\n\n从 $t=1$到$t=2$:\n1) 捕食者从 $(2,3)$ 开始行动，探测半径 $R_{d}=3$。距离：\n$$d\\big((2,3),(1,2)\\big)=|2-1|+|3-2|=2,\\quad d\\big((2,3),(1,3)\\big)=|2-1|+|3-3|=1,$$\n$$d\\big((2,3),(5,1)\\big)=|2-5|+|3-1|=5,\\quad d\\big((2,3),(5,2)\\big)=|2-5|+|3-2|=4.$$\n探测到的猎物是 $(1,3)$ 和 $(1,2)$；最近的是 $(1,3)$。捕食者从 $(2,3)$ 移动：\n- 西:$(1,3)$ 得到距离 $0$（其他方向得到距离 $2$），所以向西移动到 $(1,3)$ 并吃掉 $(1,3)$ 处的猎物。\n\n2) 捕食者在 $(1,3)$ 时猎物的移动；开始时幸存的猎物：$(1,2)$、$(5,1)$、$(5,2)$。\n- 位于 $(1,2)$ 的猎物：相对于 $(1,3)$ 的选项：西:$(0,2)$ 无效；南:$(1,1)$ 距离 $|1-1|+|1-3|=2$ 有效；东:$(2,2)$ 距离 $|2-1|+|2-3|=2$ 有效；北:$(1,3)$ 被占据。距离 $2$ 处出现平局；根据西、南、东、北的优先级，选择南。移动到 $(1,1)$。\n- 位于 $(5,1)$ 的猎物：相对于 $(1,3)$ 的选项：西:$(4,1)$ 距离 $|4-1|+|1-3|=5$ 有效；南:$(5,0)$ 无效；东:$(6,1)$ 无效；北:$(5,2)$ 被占据。所以移动到 $(4,1)$。\n- 位于 $(5,2)$ 的猎物：相对于 $(1,3)$ 的选项：西:$(4,2)$ 距离 $|4-1|+|2-3|=4$ 有效；南:$(5,1)$ 被占据；东:$(6,2)$ 无效；北:$(5,3)$ 距离 $|5-1|+|3-3|=4$ 有效。距离 $4$ 处出现平局；优先级选择西。移动到 $(4,2)$。\n\n移动后：猎物在 $(1,1)$、$(4,1)$、$(4,2)$。\n\n3) 猎物按 $(1,1)$、$(4,1)$、$(4,2)$ 的顺序繁殖；后代放置顺序为北、东、南、西。\n- 亲代 $(1,1)$：北向 $(1,2)$ 为空，后代在 $(1,2)$。\n- 亲代 $(4,1)$：北向 $(4,2)$ 被占据；东向 $(5,1)$ 为空，后代在 $(5,1)$。\n- 亲代 $(4,2)$：北向 $(4,3)$ 为空，后代在 $(4,3)$。\n\n$t=2$ 结束时：猎物位于 $(1,1)$、$(1,2)$、$(4,1)$、$(4,2)$、$(5,1)$、$(4,3)$，总共有 $6$ 只猎物。", "answer": "$$\\boxed{6}$$", "id": "1840954"}, {"introduction": "基于智能体的模型不仅能模拟“如果-那么”的简单规则，还能用来探索生物体如何做出最优决策。这个练习将视角从模拟过程转向了智能体本身的“思考”过程，要求你为一只蜜蜂设计最优的觅食策略。通过数学建模来平衡能量获取（糖）和繁殖需求（花粉）之间的权衡，你将把ABM与经典的生态学理论（最优觅食理论）联系起来，体会到如何用模型来量化和解决生态学中的权衡问题。[@problem_id:1840908]", "problem": "一位生态学家正在为一种独居蜂开发一个简单的基于智能体的模型，以了解其最优觅食策略。这种蜜蜂在包含两种花的环境中觅食：A类花，其花蜜含糖量高但花粉含量低；B类花，其花蜜含糖量低但花粉含量高。\n\n模型包含以下参数：\n- 单次访问A类花可获得 $S_A$ 单位的糖和 $P_A$ 单位的花粉。\n- 单次访问B类花可获得 $S_B$ 单位的糖和 $P_B$ 单位的花粉。\n- 每次觅食访问，无论花的种类如何，都会产生 $C_E$ 单位糖的代谢能量成本，用于蜜蜂自身的生存（例如，飞行和体温调节）。\n- 为了哺育后代，蜜蜂通过将收集的花粉与糖混合来制作“育儿球”。这个过程需要固定的比例，即每单位花粉需要 $k$ 单位的糖。这些糖用于哺育，不能用于蜜蜂自身的新陈代谢。\n\n蜜蜂的适应度被假定为与其为幼虫收集和哺育的花粉总量成正比。蜜蜂是一种“最优觅食者”，它试图最大化其一生中的花粉收集量。它只能在总糖摄入量足以支付其代谢成本和哺育所收集花粉所需糖分的约束下追求这一目标。蜜蜂采用一种固定的混合觅食策略，其中它将其总觅食访问次数的一部分比例 $x$ 用于A类花，其余比例 $(1-x)$ 用于B类花。\n\n给定以下参数值：\n- $S_A = 10.0$ 单位的糖\n- $P_A = 2.0$ 单位的花粉\n- $S_B = 3.0$ 单位的糖\n- $P_B = 12.0$ 单位的花粉\n- $C_E = 2.5$ 单位的糖\n- $k = 0.5$ 单位糖/单位花粉\n\n确定访问A类花的最优比例 $x$，以最大化蜜蜂的总花粉收集量。将您的最终答案四舍五入到三位有效数字。", "solution": "设蜜蜂选择访问 A 类花的比例为 $x$，访问 B 类花的比例为 $(1-x)$。每次访问的预期糖摄入量为\n$$S(x)=x S_{A}+(1-x) S_{B}=S_{B}+x\\left(S_{A}-S_{B}\\right),$$\n每次访问的预期花粉收集量为\n$$P(x)=x P_{A}+(1-x) P_{B}=P_{B}+x\\left(P_{A}-P_{B}\\right)。$$\n每次访问产生代谢糖成本 $C_{E}$，剩下 $S(x)-C_{E}$ 单位的糖可用于哺育。由于哺育每单位花粉需要 $k$ 单位的糖，因此每次访问可哺育的最大花粉量受限于\n$$\\frac{S(x)-C_{E}}{k}。$$\n因此，每次访问可哺育的花粉量为\n$$\\min\\!\\left(P(x),\\,\\frac{S(x)-C_{E}}{k}\\right)。$$\n为了在 $x\\in[0,1]$ 上最大化这个最小值，最优解出现在两个参数相等的地方（前提是交点在 $[0,1]$ 内）。这是因为，如果 $P(x)$ 低于糖的上限，增加 $(1-x)$ 来提高 $P(x)$ 会改善最小值；如果 $P(x)$ 超过糖的上限，增加 $x$ 来提高 $S(x)$（相对于 $P(x)$）会改善最小值。因此我们令\n$$P(x)=\\frac{S(x)-C_{E}}{k}。$$\n代入线性形式，\n$$P_{B}+x\\left(P_{A}-P_{B}\\right)=\\frac{S_{B}+x\\left(S_{A}-S_{B}\\right)-C_{E}}{k}。$$\n两边乘以 $k$ 并整理关于 $x$ 的项，\n$$k P_{B}+k x\\left(P_{A}-P_{B}\\right)=S_{B}-C_{E}+x\\left(S_{A}-S_{B}\\right),$$\n$$x\\left[k\\left(P_{A}-P_{B}\\right)-\\left(S_{A}-S_{B}\\right)\\right]=S_{B}-C_{E}-k P_{B},$$\n$$x=\\frac{S_{B}-C_{E}-k P_{B}}{k\\left(P_{A}-P_{B}\\right)-\\left(S_{A}-S_{B}\\right)}。$$\n现在代入给定的参数值 $S_{A}=10.0$，$P_{A}=2.0$，$S_{B}=3.0$，$P_{B}=12.0$，$C_{E}=2.5$ 和 $k=0.5$：\n$$\\text{分子}=S_{B}-C_{E}-k P_{B}=3.0-2.5-0.5\\cdot 12.0=-5.5,$$\n$$\\text{分母}=k\\left(P_{A}-P_{B}\\right)-\\left(S_{A}-S_{B}\\right)=0.5\\cdot(2.0-12.0)-(10.0-3.0)=-5-7=-12.$$\n因此，\n$$x=\\frac{-5.5}{-12}=\\frac{11}{24}\\approx 0.458333\\ldots.$$\n这个值位于区间 $[0,1]$ 内，因此是可行的，并给出了交点处的最优解。四舍五入到三位有效数字得到 $0.458$。", "answer": "$$\\boxed{0.458}$$", "id": "1840908"}]}
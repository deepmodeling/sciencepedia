{"hands_on_practices": [{"introduction": "在优化领域，一个问题是否为凸优化问题，直接决定了我们能否高效地找到其全局最优解。本练习将通过一个经典的圆柱形罐头设计案例，引导你探索凸优化问题的核心定义。你将分析为何一个看似直接的物理建模（以罐头半径 $r$ 和高度 $h$ 为变量）[@problem_id:2164032] 本身不构成一个凸优化问题，并学习如何通过变量变换，将其转化为一个可以被可靠求解的凸问题，这正是凸优化理论强大之处的体现。", "problem": "设计一个用于容纳特定数量产品的标准圆柱形罐子是一项经典的优化任务。一位工程师的任务是设计一个具有固定内部容积 $V > 0$ 的罐子，使其所用材料总量最少，而材料总量与罐子的总表面积成正比。设罐子的半径为 $r$，高为 $h$。总表面积由函数 $A(r, h) = 2\\pi r^2 + 2\\pi rh$ 给出，固定容积由方程 $V = \\pi r^2 h$ 描述。\n\n在凸优化领域，一个问题通常被表述为在一个凸集上最小化一个凸函数。如果一个集合中任意两点之间的线段也完全在该集合中，则该集合是凸的。一个优化问题是凸的，如果其目标函数是凸函数，其不等式约束由凸函数定义，且其等式约束是仿射的。仿射函数是线性函数加上一个常数，即形式为 $f(\\mathbf{x}) = \\mathbf{a}^T \\mathbf{x} + b$。\n\n考虑该罐子设计问题的两种不同数学表述：\n\n1.  **直接表述：** 优化变量是罐子的尺寸 $\\mathbf{x} = (r, h)$。定义域被限制在具有物理意义的值，即 $r > 0$ 和 $h > 0$。目标是在约束 $\\pi r^2 h = V$ 下最小化 $A(r, h)$。\n\n2.  **变换表述：** 引入变量替换：$y_1 = \\ln r$ 和 $y_2 = \\ln h$。优化变量现在是 $\\mathbf{y} = (y_1, y_2)$，可以取任何实数值。\n\n根据凸优化问题的定义分析这两种表述，指出下列哪个陈述是正确的。\n\nA. 直接表述是凸优化问题，但变换表述不是。\n\nB. 变换表述是凸优化问题，但直接表述不是。\n\nC. 直接表述和变换表述都是凸优化问题。\n\nD. 直接表述和变换表述都不是凸优化问题。", "solution": "我们根据凸优化问题的定义来分析每一种表述：在一个凸可行集上最小化一个凸目标函数，且所有等式约束都是仿射的。\n\n直接表述：\n- 变量：$(r,h)$，其中 $r>0$，$h>0$。\n- 目标：$A(r,h)=2\\pi r^{2}+2\\pi r h$。\n- 约束：$\\pi r^{2}h=V$。\n\n首先，检查目标函数的凸性。计算关于 $(r,h)$ 的Hessian矩阵：\n$$\n\\nabla A(r,h)=\\begin{pmatrix}4\\pi r+2\\pi h \\\\ 2\\pi r\\end{pmatrix},\\quad\n\\nabla^{2}A(r,h)=\\begin{pmatrix}4\\pi & 2\\pi \\\\ 2\\pi & 0\\end{pmatrix}.\n$$\n其行列式为 $4\\pi\\cdot 0-(2\\pi)^{2}=-4\\pi^{2}<0$，因此Hessian矩阵是不定的。所以 $A$ 在其定义域上不是凸函数。此外，等式约束 $\\pi r^{2}h=V$ 不是仿射的，这已经违反了凸优化的要求。可行集\n$$\n\\{(r,h): r>0,\\ h>0,\\ \\pi r^{2}h=V\\}\n$$\n不是凸的：例如，取 $(r_{1},h_{1})=(a,\\,V/(\\pi a^{2}))$ 和 $(r_{2},h_{2})=(2a,\\,V/(\\pi (2a)^{2}))$，其中 $a>0$。它们的中点\n$$\n\\left(\\tfrac{r_{1}+r_{2}}{2},\\,\\tfrac{h_{1}+h_{2}}{2}\\right)=\\left(\\tfrac{3a}{2},\\,\\tfrac{1}{2}\\left(\\tfrac{V}{\\pi a^{2}}+\\tfrac{V}{4\\pi a^{2}}\\right)\\right)\n$$\n满足\n$$\n\\pi\\left(\\tfrac{3a}{2}\\right)^{2}\\left(\\tfrac{1}{2}\\left(\\tfrac{V}{\\pi a^{2}}+\\tfrac{V}{4\\pi a^{2}}\\right)\\right)=\\tfrac{45}{32}V\\neq V,\n$$\n因此可行点之间的线段并不在可行域内。因此，直接表述不是一个凸优化问题。\n\n变换表述：\n- 变量：$(y_{1},y_{2})$，其中 $y_{1}=\\ln r$, $y_{2}=\\ln h$，因此 $r=\\exp(y_{1})$, $h=\\exp(y_{2})$ 且 $y\\in\\mathbb{R}^{2}$。\n- 目标：\n$$\nA(y)=2\\pi\\exp(2y_{1})+2\\pi\\exp(y_{1}+y_{2}).\n$$\n每一项都形如 $c\\,\\exp(a^{T}y)$，其中 $c>0$，这种形式的函数是凸的。更具体地说，Hessian矩阵为\n$$\n\\nabla^{2}\\big(2\\pi\\exp(2y_{1})\\big)=2\\pi\\exp(2y_{1})\\begin{pmatrix}4&0\\\\0&0\\end{pmatrix}\\succeq 0,\\quad\n\\nabla^{2}\\big(2\\pi\\exp(y_{1}+y_{2})\\big)=2\\pi\\exp(y_{1}+y_{2})\\begin{pmatrix}1&1\\\\1&1\\end{pmatrix}\\succeq 0,\n$$\n所以 $A(y)$ 作为凸函数之和，也是凸函数。\n\n- 约束：由 $\\pi r^{2}h=V$（其中 $V>0$ 且 $\\pi>0$），两边取对数得到\n$$\n2y_{1}+y_{2}=\\ln(V)-\\ln(\\pi),\n$$\n这是一个仿射等式。可行集是一个仿射集，因此是凸的，并且定义域 $y\\in\\mathbb{R}^{2}$ 也是凸的。\n\n因此，变换后的表述是一个凸优化问题，而直接表述不是。\n\n所以，正确选项是B。", "answer": "$$\\boxed{B}$$", "id": "2164032"}, {"introduction": "当我们处理带约束的优化问题时，如何判断一个候选点是否为最优解呢？Karush-Kuhn-Tucker (KKT) 条件为此提供了严谨的数学依据。这个练习将带你亲手应用 KKT 条件，对一个具体的仓库选址问题中的候选解进行检验 [@problem_id:2163970]。通过这个实践，你将掌握分析约束优化问题解的关键技能，并深刻理解理论与实际应用的连接。", "problem": "一家物流公司正在为一个新的中央仓库选址。计划中的仓库位置坐标为 $(x, y)$。主要运营成本被建模为与两个关键供应商距离相关的函数。简化的成本函数 $C(x,y)$ 是从仓库到供应商的平方欧几里得距离之和，供应商位于 $(4, 1)$ 和 $(2, 5)$。\n\n此外，由于区域规划法规的限制，仓库必须位于由不等式 $x + 2y \\le 4$ 定义的区域内。\n\n完整的优化问题可以表述为：\n最小化 $C(x,y) = (x-4)^2 + (y-1)^2 + (x-2)^2 + (y-5)^2$\n约束条件为 $x + 2y \\le 4$。\n\n一位初级分析师提出了点 $(x_c, y_c) = (2, 1)$ 作为一个潜在的最优位置。您的任务是验证该点是否满足 Karush-Kuhn-Tucker (KKT) 最优性条件。根据您的分析，从以下选项中选择正确的陈述。\n\nA. 点 $(2, 1)$ 不满足 KKT 条件。\n\nB. 点 $(2, 1)$ 满足 KKT 条件，且约束是非激活的（$\\lambda=0$）。\n\nC. 点 $(2, 1)$ 满足 KKT 条件，且拉格朗日乘子为 $\\lambda = 2$。\n\nD. 点 $(2, 1)$ 满足 KKT 条件，且拉格朗日乘子为 $\\lambda = 4$。\n\nE. 点 $(2, 1)$ 满足 KKT 条件，且拉格朗日乘子为 $\\lambda = 12$。", "solution": "要确定点 $(x_c, y_c) = (2, 1)$ 是否满足给定约束优化问题的 Karush-Kuhn-Tucker (KKT) 条件，我们必须检查四个条件：原始可行性、对偶可行性、互补松弛性和平稳性。\n\n首先，我们将问题定义为应用 KKT 条件的标准形式。\n目标函数为 $C(x,y) = (x-4)^2 + (y-1)^2 + (x-2)^2 + (y-5)^2$。\n不等式约束为 $g(x,y) = x + 2y - 4 \\le 0$。\n\n对于这种形式的最小化问题，KKT 条件如下：\n1.  **原始可行性 (Primal Feasibility)**: $g(x,y) \\le 0$\n2.  **对偶可行性 (Dual Feasibility)**: $\\lambda \\ge 0$ (其中 $\\lambda$ 是与约束 $g(x,y)$ 相关联的拉格朗日乘子)\n3.  **互补松弛性 (Complementary Slackness)**: $\\lambda \\cdot g(x,y) = 0$\n4.  **平稳性 (Stationarity)**: $\\nabla C(x,y) + \\lambda \\nabla g(x,y) = \\vec{0}$\n\n让我们用点 $(x_c, y_c) = (2, 1)$ 来检验这些条件。\n\n**步骤 1：检验原始可行性**\n我们将点 $(2, 1)$ 代入约束函数 $g(x,y)$:\n$g(2, 1) = (2) + 2(1) - 4 = 2 + 2 - 4 = 0$。\n条件是 $g(2,1) \\le 0$，由于 $0 \\le 0$ 成立，所以点 $(2, 1)$ 位于可行域内。它位于可行集的边界上。\n\n**步骤 2：检验平稳性**\n该条件要求我们找到一个满足 $\\nabla C(2,1) + \\lambda \\nabla g(2,1) = \\vec{0}$ 的 $\\lambda$。\n首先，我们计算 $C(x,y)$ 和 $g(x,y)$ 的梯度。\n\n目标函数可以通过展开来简化：\n$C(x,y) = (x^2 - 8x + 16) + (y^2 - 2y + 1) + (x^2 - 4x + 4) + (y^2 - 10y + 25)$\n$C(x,y) = 2x^2 - 12x + 2y^2 - 12y + 46$\n\n$C(x,y)$ 的梯度是：\n$\\nabla C(x,y) = \\left( \\frac{\\partial C}{\\partial x}, \\frac{\\partial C}{\\partial y} \\right) = (4x - 12, 4y - 12)$。\n在点 $(2, 1)$ 处，梯度为：\n$\\nabla C(2, 1) = (4(2) - 12, 4(1) - 12) = (8 - 12, 4 - 12) = (-4, -8)$。\n\n约束函数 $g(x,y) = x + 2y - 4$ 的梯度是：\n$\\nabla g(x,y) = \\left( \\frac{\\partial g}{\\partial x}, \\frac{\\partial g}{\\partial y} \\right) = (1, 2)$。\n\n现在我们建立平稳性方程：\n$\\nabla C(2, 1) + \\lambda \\nabla g(2, 1) = \\vec{0}$\n$(-4, -8) + \\lambda (1, 2) = (0, 0)$\n这给了我们一个关于 $\\lambda$ 的两个线性方程组：\n1.  $-4 + \\lambda(1) = 0 \\implies \\lambda = 4$\n2.  $-8 + \\lambda(2) = 0 \\implies 2\\lambda = 8 \\implies \\lambda = 4$\n\n两个方程都得出了一个一致的值，$\\lambda = 4$。因此，如果我们选择 $\\lambda = 4$，平稳性条件就得到满足。\n\n**步骤 3：检验对偶可行性**\n我们找到的拉格朗日乘子值为 $\\lambda = 4$。我们必须检查它是否为非负数。\n由于 $4 \\ge 0$，对偶可行性条件得到满足。\n\n**步骤 4：检验互补松弛性**\n该条件要求 $\\lambda \\cdot g(2,1) = 0$。\n从步骤 1 中，我们得到 $g(2,1) = 0$。使用步骤 2 中的 $\\lambda=4$：\n$4 \\cdot 0 = 0$。\n互补松弛性条件得到满足。这是预料之中的，因为该点位于约束的边界上（约束是“激活的”），这通常意味着一个非零的乘子。选项 B 指出约束是非激活的（$\\lambda=0$），这是不正确的。\n\n**结论**\n点 $(2, 1)$ 满足所有四个 KKT 条件，且有唯一的拉格朗日乘子 $\\lambda = 4$。因此，点 $(2,1)$ 是一个 KKT 点。\n将我们的结果与给定选项进行比较：\nA. 点 $(2, 1)$ 不满足 KKT 条件。(不正确)\nB. 点 $(2, 1)$ 满足 KKT 条件，且约束是非激活的（$\\lambda=0$）。(不正确, $\\lambda=4$)\nC. 点 $(2, 1)$ 满足 KKT 条件，且拉格朗日乘子为 $\\lambda = 2$。(不正确, $\\lambda=4$)\nD. 点 $(2, 1)$ 满足 KKT 条件，且拉格朗日乘子为 $\\lambda = 4$。(正确)\nE. 点 $(2, 1)$ 满足 KKT 条件，且拉格朗日乘子为 $\\lambda = 12$。(不正确, $\\lambda=4$)\n\n正确的陈述是 D。", "answer": "$$\\boxed{D}$$", "id": "2163970"}, {"introduction": "凸优化的一个核心魅力在于，任何局部最优解同时也是全局最优解，这为我们寻找最佳方案提供了极大的便利。本练习将通过一个资源分配的场景，让你亲身体会这一强大特性。你将把一个实际成本函数 [@problem_id:2163979] 构建为凸优化问题，并利用基本的分析方法找到其唯一的全局最小值，从而巩固对凸性如何确保最优解的理解。", "problem": "一个数据处理中心正在为两个计算任务（记为任务A和任务B）优化资源分配。设 $x_A$ 和 $x_B$ 分别表示分配给任务A和任务B的资源单位数量。可用的资源单位总数固定为 $T$。因此，分配方案必须满足预算约束 $x_A + x_B = T$。\n\n此分配方案的运营成本由函数 $C(x_A, x_B) = \\frac{x_A^2}{x_B} + c x_B$ 描述，其中第一项与处理延迟有关，第二项与运行任务B的直接成本有关。参数 $c$ 是一个已知的无量纲正常数。为确保系统的稳定性和功能性，资源分配必须为非负，且分配给任务B的资源必须严格为正。即 $x_A \\ge 0$ 且 $x_B > 0$。\n\n目标是找到使运营成本最小化的分配方案。请确定分配给任务A的最优资源单位数量 $x_A$。将您的答案表示为总资源 $T$ 和成本参数 $c$ 的函数。", "solution": "我们在约束条件 $x_{A}\\ge 0$、$x_{B}>0$ 和 $x_{A}+x_{B}=T$ 下，最小化 $C(x_{A},x_{B})=\\frac{x_{A}^{2}}{x_{B}}+c\\,x_{B}$。可行性要求 $T>0$。使用预算约束消去 $x_{B}$，令 $x_{B}=T-x_{A}$，这将 $x_{A}$ 的取值范围限制在 $[0,T)$ 内。定义单变量目标函数\n$$\nf(x_{A})=\\frac{x_{A}^{2}}{T-x_{A}}+c\\,(T-x_{A}).\n$$\n计算导数：\n$$\nf'(x_{A})=\\frac{2x_{A}}{T-x_{A}}+\\frac{x_{A}^{2}}{(T-x_{A})^{2}}-c.\n$$\n令 $f'(x_{A})=0$ 并去分母：\n$$\n\\left(\\frac{2x_{A}}{T-x_{A}}+\\frac{x_{A}^{2}}{(T-x_{A})^{2}}-c\\right)=0\n\\;\\Longleftrightarrow\\;\n2x_{A}(T-x_{A})+x_{A}^{2}-c\\,(T-x_{A})^{2}=0.\n$$\n展开并合并同类项得到\n$$\n(-1-c)\\,x_{A}^{2}+2T(1+c)\\,x_{A}-c\\,T^{2}=0,\n$$\n等价于\n$$\nx_{A}^{2}-2T\\,x_{A}+\\frac{c}{1+c}\\,T^{2}=0.\n$$\n解该二次方程，\n$$\nx_{A}=T\\pm T\\sqrt{1-\\frac{c}{1+c}}=T\\pm \\frac{T}{\\sqrt{1+c}}.\n$$\n$x_{A}=T+\\frac{T}{\\sqrt{1+c}}$ 这个解不满足 $x_{A}<T$，因此可行的临界点是\n$$\nx_{A}^{\\ast}=T-\\frac{T}{\\sqrt{1+c}}.\n$$\n为了验证其最优性，计算\n$$\nf''(x_{A})=2(T-x_{A})^{-1}+4x_{A}(T-x_{A})^{-2}+2x_{A}^{2}(T-x_{A})^{-3}\n$$\n对于 $x_{A}\\in[0,T)$，有 $f''(x_A)>0$，因此 $f$ 是严格凸函数，该临界点是唯一的全局最小值点。在该点上，$x_{B}^{\\ast}=T-x_{A}^{\\ast}=\\frac{T}{\\sqrt{1+c}}>0$ 且当 $c>0$ 时 $x_{A}^{\\ast}>0$，因此所有约束都被严格满足。\n因此，分配给任务A的最优资源数量为\n$$\nx_{A}^{\\ast}=T\\left(1-\\frac{1}{\\sqrt{1+c}}\\right).\n$$", "answer": "$$\\boxed{T\\left(1-\\frac{1}{\\sqrt{1+c}}\\right)}$$", "id": "2163979"}]}
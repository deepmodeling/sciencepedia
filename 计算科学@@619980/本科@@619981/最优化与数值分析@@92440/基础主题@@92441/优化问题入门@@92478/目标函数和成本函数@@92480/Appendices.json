{"hands_on_practices": [{"introduction": "让我们从一个经典的商业问题开始：如何为新产品定价以实现利润最大化。这个练习将引导你为一家科技创业公司构建一个利润函数作为其目标函数。通过这个过程，你将学会如何将商业目标（利润最大化）转化为一个数学模型，并利用微积分的基本工具找到最优价格。", "problem": "一家科技初创公司正准备推出一款新的软件产品。根据市场分析，该公司将售出单位数 $N$ 建模为单位价格 $P$ 的函数。该关系由一条衰减指数需求曲线描述：\n$$N(P) = N_{0} \\exp(-\\alpha P)$$\n此处，$N_{0}$ 代表最大潜在市场规模（即产品免费时的销售量），而 $\\alpha$ 是一个代表市场价格敏感度的正常数。尽管开发该软件存在显著的固定成本，但交付一个额外软件单位的边际成本（例如服务器带宽和客户支持等费用）是一个恒定值 $c$。\n\n公司的目标是设定一个价格 $P$ 以最大化其总利润。总利润定义为销售总收入减去总边际成本。确定公司应为其软件收取的最佳价格。请用参数 $\\alpha$ 和 $c$ 表示您的答案，形式为一个闭式解析表达式。", "solution": "售出单位数作为价格的函数由 $N(P) = N_{0} \\exp(-\\alpha P)$ 给出，其中 $\\alpha > 0$。总收入为 $R(P) = P N(P) = P N_{0} \\exp(-\\alpha P)$。总边际成本为 $C(P) = c N(P) = c N_{0} \\exp(-\\alpha P)$。固定成本不依赖于 $P$，因此不影响最优价格。需要最大化的利润函数是\n$$\\Pi(P) = R(P) - C(P) = (P - c) N_{0} \\exp(-\\alpha P).$$\n对 $\\Pi(P)$ 关于 $P$ 求导：\n$$\\Pi'(P) = N_{0} \\left[\\frac{d}{dP}\\left((P - c)\\right) \\exp(-\\alpha P) + (P - c) \\frac{d}{dP}\\left(\\exp(-\\alpha P)\\right)\\right] = N_{0} \\exp(-\\alpha P)\\left[1 - \\alpha (P - c)\\right].$$\n将一阶导数设为零以找到临界点：\n$$N_{0} \\exp(-\\alpha P)\\left[1 - \\alpha (P - c)\\right] = 0 \\quad \\Rightarrow \\quad 1 - \\alpha (P - c) = 0 \\quad \\Rightarrow \\quad P^{\\ast} = c + \\frac{1}{\\alpha}.$$\n为验证这是一个最大值，计算二阶导数：\n$$\\Pi''(P) = N_{0} \\exp(-\\alpha P)\\left[-\\alpha \\left(1 - \\alpha (P - c)\\right) - \\alpha\\right] = N_{0} \\exp(-\\alpha P)\\left[-2\\alpha + \\alpha^{2} (P - c)\\right].$$\n在 $P^{\\ast}$ 处求值，其中 $P^{\\ast} - c = \\frac{1}{\\alpha}$，得到\n$$\\Pi''(P^{\\ast}) = N_{0} \\exp(-\\alpha P^{\\ast}) \\left[-2\\alpha + \\alpha^{2} \\cdot \\frac{1}{\\alpha}\\right] = -\\alpha N_{0} \\exp(-\\alpha P^{\\ast}) < 0,$$\n这证实了一个严格的局部最大值。由于 $c \\geq 0$ 和 $\\alpha > 0$，我们有 $P^{\\ast} \\geq \\frac{1}{\\alpha} > 0$，因此该解对于非负价格也是可行的。因此，最优价格是\n$$P^{\\ast} = c + \\frac{1}{\\alpha}.$$", "answer": "$$\\boxed{c + \\frac{1}{\\alpha}}$$", "id": "2192247"}, {"introduction": "在许多现实世界的优化问题中，我们的决策会受到资源（如预算或时间）的限制。这个练习将我们带到一个精准农业的场景，目标是在固定的预算下，通过调整两种不同肥料的用量来最大化作物产量。这个问题将帮助你练习处理多变量和约束条件的优化，这是一个比单变量无约束问题更复杂也更贴近实际的挑战 [@problem_id:2192255]。", "problem": "一家精准农业公司受委托，为一种新作物优化肥料使用。作物产量 $Y$（单位：公斤/公顷，kg/ha）被建模为两种不同液体营养素施用率的函数：营养素 A 和营养素 B。设 $x_A$ 和 $x_B$ 分别为施用的营养素 A 和营养素 B 的体积，单位均为升/公顷（L/ha）。\n\n产量模型由下式给出：\n$$Y(x_A, x_B) = Y_0 + \\alpha x_A + \\beta x_B - \\gamma x_B^2$$\n\n其中，$Y_0$ 是未添加任何营养素时土地的基准产量。参数 $\\alpha$ 是一个正常数，表示来自营养素 A 的线性产量增益。参数 $\\beta$ 和 $\\gamma$ 是描述营养素 B 效果的正常数，营养素 B 最初能提高产量，但在较高浓度下会产生不利影响。\n\n农民用于这两种营养素的固定预算为 $C_{total}$ 美元。营养素 A 的成本为每升 $C_A$ 美元，营养素 B 的成本为每升 $C_B$ 美元。农民打算用完全部预算以实现最大可能产量。假设参数 $\\alpha、 \\beta、 \\gamma、 C_A、 C_B、 C_{total}$ 满足最优策略涉及使用正数量的两种营养素。\n\n确定农民为最大化作物产量应施用的营养素 A 的最佳体积 $x_A$。你的答案应该是一个用给定参数表示的符号表达式。", "solution": "我们需要在一个线性预算约束下最大化产量函数，并保证最优解中两种营养素的使用量均为正值。问题是：\n最大化 $Y(x_A,x_B) = Y_{0} + \\alpha x_{A} + \\beta x_{B} - \\gamma x_{B}^{2}$，约束条件为 $C_{A} x_{A} + C_{B} x_{B} = C_{total}$ 且 $x_{A} \\geq 0$, $x_{B} \\geq 0$。由于目标函数关于 $x_{A}$ 是线性的，关于 $x_{B}$ 是严格凹的（因为 $\\gamma>0$ 意味着 $\\frac{\\partial^{2}Y}{\\partial x_{B}^{2}}=-2\\gamma<0$），且可行集是凸集，因此这是一个凹规划问题。根据最优解具有 $x_{A}>0$ 和 $x_{B}>0$ 的假设，该解是一个内点解，一阶条件是充分必要条件。\n\n为预算约束构建拉格朗日函数，乘子为 $\\lambda$：\n$$\n\\mathcal{L}(x_{A},x_{B},\\lambda) = Y_{0} + \\alpha x_{A} + \\beta x_{B} - \\gamma x_{B}^{2} + \\lambda\\left(C_{total} - C_{A} x_{A} - C_{B} x_{B}\\right).\n$$\n对于内点最优解，令偏导数为零：\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial x_{A}} = \\alpha - \\lambda C_{A} = 0 \\quad \\Rightarrow \\quad \\lambda = \\frac{\\alpha}{C_{A}},\n$$\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial x_{B}} = \\beta - 2\\gamma x_{B} - \\lambda C_{B} = 0 \\quad \\Rightarrow \\quad 2\\gamma x_{B} = \\beta - \\lambda C_{B}.\n$$\n将 $\\lambda = \\frac{\\alpha}{C_{A}}$ 代入第二个条件得到\n$$\nx_{B}^{\\ast} = \\frac{\\beta - \\left(\\frac{\\alpha}{C_{A}}\\right) C_{B}}{2\\gamma} = \\frac{\\beta - \\frac{\\alpha C_{B}}{C_{A}}}{2\\gamma}.\n$$\n使用预算约束来求解 $x_{A}^{\\ast}$：\n$$\nC_{A} x_{A}^{\\ast} + C_{B} x_{B}^{\\ast} = C_{total} \\quad \\Rightarrow \\quad x_{A}^{\\ast} = \\frac{C_{total} - C_{B} x_{B}^{\\ast}}{C_{A}}.\n$$\n代入 $x_{B}^{\\ast}$：\n$$\nx_{A}^{\\ast} = \\frac{C_{total}}{C_{A}} - \\frac{C_{B}}{C_{A}} \\cdot \\frac{\\beta - \\frac{\\alpha C_{B}}{C_{A}}}{2\\gamma}\n= \\frac{C_{total}}{C_{A}} - \\frac{C_{B}\\beta}{2\\gamma C_{A}} + \\frac{\\alpha C_{B}^{2}}{2\\gamma C_{A}^{2}}.\n$$\n此表达式为所述假设下营养素 A 的最佳体积。", "answer": "$$\\boxed{\\frac{C_{total}}{C_{A}} - \\frac{C_{B}\\beta}{2\\gamma C_{A}} + \\frac{\\alpha C_{B}^{2}}{2\\gamma C_{A}^{2}}}$$", "id": "2192255"}, {"introduction": "优化不仅在于找到最优解，更在于理解解的性质以及约束条件的影响。这个高级练习将你带入尖端的结构工程领域——拓扑优化，其目标是用最少的材料设计出最坚固的结构。这个问题超越了简单的求解，它挑战你解释优化结果中的一个关键参数（拉格朗日乘子），从而揭示放松资源限制能为我们的目标带来多大的改善 [@problem_id:2192237]。", "problem": "一个工程师团队正在使用一款计算拓扑优化工具来设计一个轻质高刚度的机械部件。设计空间占据了总体积 $V_{domain}$，并被离散化为大量的有限元。每个单元 $i$ 的优化变量是其材料密度 $\\rho_i$，该密度可以从接近零（空洞）的最小值连续变化到最大值 1（实体材料）。\n\n为了促成一个没有模糊中间密度区域、清晰且可制造的设计，该工具采用了固体各向同性材料惩罚法（SIMP）。在该模型中，单元的有效杨氏模量 $E_i$ 与其密度 $\\rho_i$ 通过幂律关系 $E_i = E_0 \\rho_i^p$ 相关联，其中 $E_0$ 是实体材料的杨氏模量，$p$ 是大于1的惩罚指数。\n\n优化的主要目标是最小化结构柔度 $C$。柔度是刚度的逆向度量，定义为 $C = \\mathbf{F}^T \\mathbf{U}$，其中 $\\mathbf{F}$ 是施加的恒定外加载荷向量，$\\mathbf{U}$ 是由此产生的节点位移向量，它依赖于材料分布 $\\boldsymbol{\\rho} = \\{\\rho_1, \\rho_2, \\dots\\}$。此最小化过程在一个对总材料体积的严格约束下进行：所有单元的材料体积之和必须等于总设计体积的指定分数 $V_f$。单个单元 $i$ 的体积表示为 $v_i$。\n\n运行优化后，该工具收敛到一个最优设计。来自优化理论（基于Karush-Kuhn-Tucker条件）的一个关键信息是以下最优性准则。对于最终设计中任何非完全实体或完全空洞的单元 $i$（即其密度 $\\rho_i$ 处于开区间 $(0, 1)$ 内），以下方程成立：\n$$p \\frac{c_i}{v_i} \\rho_i^{p-1} = \\Lambda$$\n在此表达式中，$c_i$ 代表如果单元 $i$ 由实体材料制成（$\\rho_i=1$）但在最终最优结构中承受相同应变场时所存储的应变能。项 $\\Lambda$ 是与全局体积约束相关的拉格朗日乘子。\n\n假设已经针对体积分数 $V_f$ 达到了一个最优设计。现在，主管工程师提议研究是否可以通过允许使用更多材料来获得一个稍微更好（即更低柔度）的设计。如果将体积分数约束从 $V_f$ 放宽到 $V_f + \\Delta V_f$（其中 $\\Delta V_f$ 是一个小的正量），那么最优柔度变化量 $\\Delta C$ 的一阶估计是什么？\n\n请用 $\\Lambda$、$V_{domain}$ 和 $\\Delta V_f$ 的符号表达式来表示你的答案。", "solution": "我们将带有等式体积约束的柔度最小化问题表述为关于绝对材料体积 $b$ 的问题：\n$$\n\\min_{\\boldsymbol{\\rho}}\\, C(\\boldsymbol{\\rho}) \\quad \\text{subject to} \\quad \\sum_{i} v_{i}\\rho_{i} = b,\n$$\n其中 $b = V_{f} V_{domain}$。相关的拉格朗日函数是\n$$\nL(\\boldsymbol{\\rho},\\Lambda;b) = C(\\boldsymbol{\\rho}) + \\Lambda\\left(\\sum_{i} v_{i}\\rho_{i} - b\\right).\n$$\n对于 $0<\\rho_{i}<1$ 的单元，KKT平稳性条件给出\n$$\n\\frac{\\partial C}{\\partial \\rho_{i}} + \\Lambda v_{i} = 0.\n$$\n使用SIMP中标准的柔度灵敏度 $\\frac{\\partial C}{\\partial \\rho_{i}} = -p \\rho_{i}^{p-1} c_{i}$，平稳性条件得出\n$$\np \\frac{c_{i}}{v_{i}} \\rho_{i}^{p-1} = \\Lambda,\n$$\n这与给定的最优性准则相匹配，并识别出拉格朗日乘子即为所给的 $\\Lambda$。\n\n令 $C^{*}(b)$ 表示作为右侧项 $b$ 的函数的最优柔度。对最优解 $(\\boldsymbol{\\rho}^{*}(b),\\Lambda^{*}(b))$ 处的拉格朗日函数值求导，\n$$\nC^{*}(b) = L\\big(\\boldsymbol{\\rho}^{*}(b),\\Lambda^{*}(b);b\\big),\n$$\n并应用链式法则，\n$$\n\\frac{\\mathrm{d} C^{*}}{\\mathrm{d} b} = \\frac{\\partial L}{\\partial b} + \\sum_{i} \\frac{\\partial L}{\\partial \\rho_{i}} \\frac{\\mathrm{d} \\rho_{i}^{*}}{\\mathrm{d} b} + \\frac{\\partial L}{\\partial \\Lambda} \\frac{\\mathrm{d} \\Lambda^{*}}{\\mathrm{d} b}.\n$$\n在最优解处，平稳性条件给出对所有 $i$ 都有 $\\frac{\\partial L}{\\partial \\rho_{i}}=0$，原始可行性给出 $\\frac{\\partial L}{\\partial \\Lambda} = \\sum_{i} v_{i}\\rho_{i}^{*} - b = 0$。因此，\n$$\n\\frac{\\mathrm{d} C^{*}}{\\mathrm{d} b} = \\frac{\\partial L}{\\partial b} = -\\Lambda^{*}.\n$$\n体积分数从 $V_{f}$ 到 $V_{f} + \\Delta V_{f}$ 的一个微小变化使右侧项改变了\n$$\n\\Delta b = V_{domain}\\,\\Delta V_{f}.\n$$\n因此，最优柔度的一阶变化是\n$$\n\\Delta C \\approx \\frac{\\mathrm{d} C^{*}}{\\mathrm{d} b}\\,\\Delta b = -\\Lambda\\, V_{domain}\\, \\Delta V_{f}.\n$$\n这表明，放宽体积分数（增加材料）会使最优柔度在一阶上以 $-\\Lambda V_{domain}$ 的斜率线性减小。", "answer": "$$\\boxed{-\\Lambda V_{domain}\\,\\Delta V_{f}}$$", "id": "2192237"}]}
{"hands_on_practices": [{"introduction": "优化的拟牛顿法核心在于逐步更新海森矩阵的近似。此过程的第一步是理解构建割线方程的基本要素：步长向量 $s_k$ 和梯度差向量 $y_k$。这个练习将通过一个二次目标函数，引导你亲手计算这些向量，并检验它们之间的关系，这是掌握拟牛顿法更新机制的基础。", "problem": "在无约束优化的拟牛顿法发展过程中，Hessian矩阵的近似在每一步都会被更新。这种更新依赖于从最近一步收集到的信息。计算出两个关键向量：步长向量 $s_k = x_{k+1} - x_k$，它代表了变量向量的变化；以及梯度差向量 $y_k = \\nabla f(x_{k+1}) - \\nabla f(x_k)$，它捕捉了目标函数 $f$ 梯度的变化。这两个向量之间的关系构成了割线方程的基础。\n\n考虑二次目标函数 $f(x_1, x_2) = x_1^2 + 2x_2^2$。一个优化算法从由列向量 $x_k = \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$ 描述的点，移动到点 $x_{k+1} = \\begin{pmatrix} 2 \\\\ 0 \\end{pmatrix}$。\n\n计算内积 $y_k^T s_k$ 的标量值。", "solution": "我们使用标准的拟牛顿定义：步长向量为 $s_{k} = x_{k+1} - x_{k}$，梯度差向量为 $y_{k} = \\nabla f(x_{k+1}) - \\nabla f(x_{k})$。对于 $f(x_{1},x_{2}) = x_{1}^{2} + 2 x_{2}^{2}$，其梯度为\n$$\n\\nabla f(x_{1},x_{2}) = \\begin{pmatrix} \\frac{\\partial f}{\\partial x_{1}} \\\\ \\frac{\\partial f}{\\partial x_{2}} \\end{pmatrix} = \\begin{pmatrix} 2 x_{1} \\\\ 4 x_{2} \\end{pmatrix}.\n$$\n已知 $x_{k} = \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix}$ 和 $x_{k+1} = \\begin{pmatrix} 2 \\\\ 0 \\end{pmatrix}$，计算\n$$\ns_{k} = x_{k+1} - x_{k} = \\begin{pmatrix} 2 \\\\ 0 \\end{pmatrix} - \\begin{pmatrix} 1 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix}.\n$$\n计算梯度：\n$$\n\\nabla f(x_{k}) = \\begin{pmatrix} 2 \\cdot 1 \\\\ 4 \\cdot 1 \\end{pmatrix} = \\begin{pmatrix} 2 \\\\ 4 \\end{pmatrix}, \\quad\n\\nabla f(x_{k+1}) = \\begin{pmatrix} 2 \\cdot 2 \\\\ 4 \\cdot 0 \\end{pmatrix} = \\begin{pmatrix} 4 \\\\ 0 \\end{pmatrix}.\n$$\n因此\n$$\ny_{k} = \\nabla f(x_{k+1}) - \\nabla f(x_{k}) = \\begin{pmatrix} 4 \\\\ 0 \\end{pmatrix} - \\begin{pmatrix} 2 \\\\ 4 \\end{pmatrix} = \\begin{pmatrix} 2 \\\\ -4 \\end{pmatrix}.\n$$\n所求的内积为\n$$\ny_{k}^{T} s_{k} = \\begin{pmatrix} 2 & -4 \\end{pmatrix} \\begin{pmatrix} 1 \\\\ -1 \\end{pmatrix} = 2 \\cdot 1 + (-4) \\cdot (-1) = 2 + 4 = 6.\n$$", "answer": "$$\\boxed{6}$$", "id": "2220248"}, {"introduction": "在拟牛顿法中，为了保证海森矩阵近似的正定性并从而确保算法的收敛，通常要求满足所谓的“曲率条件” $s_k^T y_k > 0$ 。然而，这个条件并非总是成立。这个练习将通过一个简单的一维函数，让你探索一个曲率条件不被满足的直观场景，从而深刻理解为何在实践中必须检验此条件。", "problem": "在用于无约束优化的拟牛顿法的发展中，对近似Hessian矩阵的更新，例如在Broyden–Fletcher–Goldfarb–Shanno (BFGS) 算法中，依赖于一个被称为曲率条件的特定条件。对于一维可微函数 $f: \\mathbb{R} \\to \\mathbb{R}$，此条件对于确保更新后的Hessian矩阵近似保持正定至关重要，而正定是生成下降方向的关键属性。\n\n在第 $k$ 次迭代中，给定两个不同的点 $x_k$ 和 $x_{k+1}$，我们将步长定义为 $s_k = x_{k+1} - x_k$，梯度变化量定义为 $y_k = f'(x_{k+1}) - f'(x_k)$，其中 $f'$ 是 $f$ 的导数。如果乘积 $s_k y_k$ 严格为正，即 $s_k y_k > 0$，则曲率条件得到满足。如果此条件不成立，则无法使用标准的更新公式。\n\n考虑函数 $f(x) = \\sin(x)$。我们来分析点 $x_k = \\frac{\\pi}{2}$ 和 $x_{k+1} = \\pi$ 之间的曲率条件。\n\n计算给定函数和点对应的曲率乘积 $s_k y_k$ 的值。将最终答案四舍五入到四位有效数字。", "solution": "给定 $f(x)=\\sin(x)$，$x_{k}=\\frac{\\pi}{2}$ 和 $x_{k+1}=\\pi$。根据定义，步长为 $s_{k}=x_{k+1}-x_{k}$，梯度变化量为 $y_{k}=f'(x_{k+1})-f'(x_{k})$。对于 $f(x)=\\sin(x)$，其导数为 $f'(x)=\\cos(x)$。\n\n计算步长：\n$$\ns_{k}=x_{k+1}-x_{k}=\\pi-\\frac{\\pi}{2}=\\frac{\\pi}{2}.\n$$\n\n使用 $f'(x)=\\cos(x)$ 计算梯度变化量：\n$$\ny_{k}=f'(x_{k+1})-f'(x_{k})=\\cos(\\pi)-\\cos\\left(\\frac{\\pi}{2}\\right)=-1-0=-1.\n$$\n\n曲率乘积为：\n$$\ns_{k}y_{k}=\\left(\\frac{\\pi}{2}\\right)(-1)=-\\frac{\\pi}{2}.\n$$\n\n数值上，$-\\frac{\\pi}{2}\\approx -1.5707963267$，四舍五入到四位有效数字为 $-1.571$。", "answer": "$$\\boxed{-1.571}$$", "id": "2220228"}, {"introduction": "割线方程 $B_{k+1}s_k = y_k$ 不仅是一个理论概念，它还是一个用以确定海森矩阵近似 $B_{k+1}$ 的实用约束。在多维情况下，仅凭此方程无法唯一确定 $B_{k+1}$，因此需要额外的信息或假设。这个练习通过施加一个特定的对称结构，让你能够求解一个唯一的矩阵 $B$，从而体验如何将割线方程转化为一个可解的线性系统。", "problem": "在用于寻找函数局部最小值或最大值的拟牛顿法中，Hessian 矩阵由一个在每次迭代 $k$ 中更新的矩阵 $B_k$ 来近似。对此近似的一个基本要求是它必须满足割线方程，$B_{k+1} s_k = y_k$。此处，$s_k = x_{k+1} - x_k$ 表示在变量空间中采取的步长，而 $y_k = \\nabla f(x_{k+1}) - \\nabla f(x_k)$ 是函数 $f$ 梯度的相应变化。\n\n考虑这样一个二维优化算法的单步。步长向量为 $s_k = \\begin{pmatrix} 1 \\\\ 3 \\end{pmatrix}$，梯度变化量为 $y_k = \\begin{pmatrix} 2 \\\\ -1 \\end{pmatrix}$。对于这个问题，我们寻求一个 Hessian 近似矩阵，我们简称为 $B$，它具有 $B = \\begin{pmatrix} a & b \\\\ b & a \\end{pmatrix}$ 形式的特殊对称结构，其中 $a$ 和 $b$ 是实常数。\n\n确定使矩阵 $B$ 对给定的 $s_k$ 和 $y_k$ 满足割线方程的 $a$ 和 $b$ 的唯一值。请将答案以有序对 $(a, b)$ 的形式给出。", "solution": "我们必须找到实数 $a$ 和 $b$，使得对称矩阵 $B=\\begin{pmatrix} a & b \\\\ b & a \\end{pmatrix}$ 对给定的 $s_{k}=\\begin{pmatrix} 1 \\\\ 3 \\end{pmatrix}$ 和 $y_{k}=\\begin{pmatrix} 2 \\\\ -1 \\end{pmatrix}$ 满足割线方程 $B s_{k} = y_{k}$。\n\n计算矩阵向量乘积：\n$$\nB s_{k} = \\begin{pmatrix} a & b \\\\ b & a \\end{pmatrix}\\begin{pmatrix} 1 \\\\ 3 \\end{pmatrix}\n= \\begin{pmatrix} a + 3b \\\\ b + 3a \\end{pmatrix}.\n$$\n由割线方程 $B s_{k} = y_{k}$ 可得\n$$\n\\begin{pmatrix} a + 3b \\\\ b + 3a \\end{pmatrix} = \\begin{pmatrix} 2 \\\\ -1 \\end{pmatrix},\n$$\n由此得到线性方程组\n$$\na + 3b = 2, \\quad 3a + b = -1.\n$$\n使用代入法求解。从 $a + 3b = 2$ 可得 $a = 2 - 3b$。将其代入 $3a + b = -1$：\n$$\n3(2 - 3b) + b = -1 \\implies 6 - 9b + b = -1 \\implies 6 - 8b = -1 \\implies -8b = -7 \\implies b = \\frac{7}{8}.\n$$\n那么\n$$\na = 2 - 3\\cdot \\frac{7}{8} = \\frac{16}{8} - \\frac{21}{8} = -\\frac{5}{8}.\n$$\n系数矩阵 $\\begin{pmatrix} 1 & 3 \\\\ 3 & 1 \\end{pmatrix}$ 的行列式为 $1\\cdot 1 - 3\\cdot 3 = -8 \\neq 0$，因此解是唯一的。因此，所求参数为 $a=-\\frac{5}{8}$ 和 $b=\\frac{7}{8}$。", "answer": "$$\\boxed{(-\\frac{5}{8}, \\frac{7}{8})}$$", "id": "2220301"}]}
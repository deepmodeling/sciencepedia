{"hands_on_practices": [{"introduction": "本练习是应用割平面法的基本起点。在生成任何割平面之前，我们必须首先求解整数规划的线性规划（LP）松弛问题，以找到一个可能的分数最优解。此练习 [@problem_id:2211982] 将引导您建立并求解这样一个松弛问题，它为最优整数解提供了一个重要的上界，并判断是否需要使用割平面。", "problem": "一位计算机科学专业的学生正在为一个竞赛项目训练两种不同类型的机器学习模型：一个分类器（Classifier）模型和一个生成器（Generator）模型。该学生的目标是根据他们成功训练的模型，最大化一个总“性能分数”。\n\n学生的资源受到图形处理器（GPU）时间和可用数据存储的限制。\n- 每训练一个分类器模型可获得 8 点性能分数。\n- 每训练一个生成器模型可获得 5 点性能分数。\n\n约束条件如下：\n1.  **GPU 时间**：训练一个分类器模型需要 2 小时的 GPU 时间，而一个生成器模型需要 1 小时。学生总共有 16 小时的 GPU 时间可用。\n2.  **数据存储**：训练一个分类器模型消耗 3 太字节（TB）的数据，而一个生成器模型消耗 5 TB。学生总共有 40 TB 的数据可用。\n\n实际上，每种类型的模型数量必须是整数。然而，为了确定项目性能的理论上限，学生首先分析了一个松弛场景，其中可以训练小数部分模型（例如，通过将训练过程运行至部分完成）。\n\n在这个可以训练小数部分模型的假设下，学生能获得的最大可能总性能分数是多少？将您的答案四舍五入到三位有效数字。", "solution": "设 $C$ 表示分类器模型的（可能为小数的）数量，$G$ 表示生成器模型的数量。目标是最大化总性能分数\n$$\nZ = 8C + 5G\n$$\n受以下资源约束：\n$$\n2C + G \\le 16 \\quad \\text{(GPU time)}, \\quad 3C + 5G \\le 40 \\quad \\text{(storage)}, \\quad C \\ge 0,\\; G \\ge 0.\n$$\n这是一个线性规划问题；因此，最大值出现在可行域的顶点处。候选顶点是坐标轴截距和两条约束线的交点。坐标轴截距为：\n- 当 $G=0$ 时：由 $2C \\le 16$ 我们得到 $C \\le 8$，由 $3C \\le 40$ 我们得到 $C \\le \\frac{40}{3}$。因此，$C$ 轴上的约束边界是 $C=8$，得出点 $(C,G)=(8,0)$。\n- 当 $C=0$ 时：由 $G \\le 16$ 和 $5G \\le 40$ 我们得到 $G \\le 8$，得出点 $(C,G)=(0,8)$。\n\n接下来，求解 $2C + G = 16$ 和 $3C + 5G = 40$ 的交点。由第一个方程，我们得到 $G = 16 - 2C$。代入第二个方程：\n$$\n3C + 5(16 - 2C) = 40 \\;\\;\\Rightarrow\\;\\; 3C + 80 - 10C = 40 \\;\\;\\Rightarrow\\;\\; -7C + 80 = 40 \\;\\;\\Rightarrow\\;\\; C = \\frac{40}{7}.\n$$\n那么\n$$\nG = 16 - 2\\cdot \\frac{40}{7} = \\frac{112}{7} - \\frac{80}{7} = \\frac{32}{7}.\n$$\n在这些候选点上计算目标函数值：\n- 在点 $(C,G)=(8,0)$ 处：$Z = 8\\cdot 8 + 5\\cdot 0 = 64$。\n- 在点 $(C,G)=(0,8)$ 处：$Z = 8\\cdot 0 + 5\\cdot 8 = 40$。\n- 在点 $\\left(C,G\\right)=\\left(\\frac{40}{7},\\frac{32}{7}\\right)$ 处：\n$$\nZ = 8\\cdot \\frac{40}{7} + 5\\cdot \\frac{32}{7} = \\frac{320}{7} + \\frac{160}{7} = \\frac{480}{7}.\n$$\n因此，最大松弛性能分数为 $Z_{\\max} = \\frac{480}{7} \\approx 68.5714$，四舍五入到三位有效数字为 $68.6$。", "answer": "$$\\boxed{68.6}$$", "id": "2211982"}, {"introduction": "一旦从LP松弛中找到分数解，割平面法的核心就是生成一个新的约束，该约束能“切掉”这个分数点，同时不移除任何可行的整数解。本练习 [@problem_id:2211934] 聚焦于这一基本的机械步骤：从最优单纯形法表的单行中推导出一个Gomory分数割。掌握这项技术是成功应用该算法的关键。", "problem": "考虑以下整数规划 (IP) 问题：\n\n最大化 $Z = x_1 + x_2$\n约束条件为：\n1. $-x_1 + x_2 \\le 1$\n2. $3x_1 + 2x_2 \\le 12$\n3. $2x_1 + 3x_2 \\le 12$\n其中 $x_1$ 和 $x_2$ 必须为非负整数。\n\n为求解此问题，我们首先求解其线性规划 (LP) 松弛问题，即为约束 1、2 和 3 分别引入非负松弛变量 $s_1, s_2, s_3$。应用单纯形法后，发现 LP 松弛问题的最优解为非整数。最优单纯形表中的基变量集合为 $\\{x_1, x_2, s_1\\}$，非基变量集合为 $\\{s_2, s_3\\}$。\n\n最终单纯形表中对应于基变量 $x_1$ 的其中一行的方程为：\n$$x_1 + \\frac{3}{5}s_2 - \\frac{2}{5}s_3 = \\frac{12}{5}$$\n\n使用此单纯形表行，推导 Gomory 分数割平面。以下哪个以原始决策变量 $x_1$ 和 $x_2$ 表示的不等式是正确的 Gomory 割平面？\n\nA. $3x_1 + 3x_2 \\le 14$\n\nB. $13x_1 + 12x_2 \\le 58$\n\nC. $3x_1 + 3x_2 \\le 12$\n\nD. $3x_1 + 3x_2 \\ge 14$\n\nE. $x_1 + x_2 \\le 4$", "solution": "我们已知基整数变量 $x_{1}$ 所在的最终单纯形表行为：\n$$\nx_{1} + \\frac{3}{5}s_{2} - \\frac{2}{5}s_{3} = \\frac{12}{5}.\n$$\n在这个纯整数规划问题中，所有变量，包括松弛变量 $s_{2}$ 和 $s_{3}$，都必须为非负整数。从形式为\n$$\nx_{B} + \\sum_{j} a_{j} y_{j} = b,\n$$\n的单纯形表行推导出的 Gomory 分数割平面是通过取小数部分得到的，其中 $x_{B}$ 和所有 $y_{j}$ 均为整数变量，而 $b$ 为分数：\n$$\n\\sum_{j} f(a_{j})\\, y_{j} \\ge f(b),\n$$\n其中对于任意实数 $t$，有 $f(t) = t - \\lfloor t \\rfloor \\in [0,1)$（此定义同样适用于负系数，因为 $\\lfloor t \\rfloor$ 是不大于 $t$ 的最大整数）。\n\n将此方法应用于给定的行：\n- $f\\!\\left(\\frac{12}{5}\\right) = \\frac{12}{5} - \\left\\lfloor \\frac{12}{5} \\right\\rfloor = \\frac{12}{5} - 2 = \\frac{2}{5}$，\n- $f\\!\\left(\\frac{3}{5}\\right) = \\frac{3}{5}$，\n- $f\\!\\left(-\\frac{2}{5}\\right) = -\\frac{2}{5} - \\left\\lfloor -\\frac{2}{5} \\right\\rfloor = -\\frac{2}{5} - (-1) = \\frac{3}{5}$。\n\n因此，用 $s_{2}$ 和 $s_{3}$ 表示的 Gomory 分数割平面为\n$$\n\\frac{3}{5}s_{2} + \\frac{3}{5}s_{3} \\ge \\frac{2}{5},\n$$\n两边乘以 $5$ 后，变为\n$$\n3s_{2} + 3s_{3} \\ge 2.\n$$\n现在，从约束 2 和 3 中，将松弛变量用原始变量表示：\n$$\ns_{2} = 12 - 3x_{1} - 2x_{2}, \\qquad s_{3} = 12 - 2x_{1} - 3x_{2}.\n$$\n代入割平面不等式中：\n$$\n3(12 - 3x_{1} - 2x_{2}) + 3(12 - 2x_{1} - 3x_{2}) \\ge 2,\n$$\n$$\n36 - 9x_{1} - 6x_{2} + 36 - 6x_{1} - 9x_{2} \\ge 2,\n$$\n$$\n72 - 15x_{1} - 15x_{2} \\ge 2,\n$$\n$$\n15x_{1} + 15x_{2} \\le 70,\n$$\n两边除以 $5$，得到\n$$\n3x_{1} + 3x_{2} \\le 14.\n$$\n在给定的选项中，这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "2211934"}, {"introduction": "在许多情况下，一个最优单纯形表可能有多行含有分数值变量，从而可以生成几个不同的割。这引出了一个策略性选择：哪个割是最好的？这个进阶练习 [@problem_id:2211932] 将挑战你从同一个表中推导出两个不同的Gomory割，并评估哪一个“更深”，即更有可能更快地收敛到整数最优解。这个练习突出了割平面算法中的效率考量。", "problem": "考虑以下整数规划 (IP) 问题：\n最大化 $Z = 4x_1 + 5x_2$\n约束条件为：\n$x_1 + 4x_2 \\leq 10$\n$3x_1 + x_2 \\leq 9$\n其中 $x_1, x_2 \\geq 0$ 且为整数。\n\n在使用单纯形法求解相应的线性规划 (LP) 松弛问题后，得到最终的最优单纯形表。其中 $s_1$ 和 $s_2$ 分别是第一个和第二个约束的松弛变量。该单纯形表如下所示，其中第一行代表目标函数方程 ($Z + s_1 + s_2 = 19$)：\n\n$$\n\\begin{array}{c|cc|cc|c}\n\\text{基变量} & x_1 & x_2 & s_1 & s_2 & \\text{右端项} \\\\\n\\hline\nZ\\text{行} & 0 & 0 & 1 & 1 & 19 \\\\\nx_1 & 1 & 0 & -1/11 & 4/11 & 26/11 \\\\\nx_2 & 0 & 1 & 3/11 & -1/11 & 21/11\n\\end{array}\n$$\n\n如基本变量 $x_1$ 和 $x_2$ 的右端项 (RHS) 值所示，LP松弛问题的最优解是小数。为了得到整数解，我们应用Gomory割平面法。\n\n您的任务是根据单纯形表中值为小数的基本变量生成两个不同的Gomory割平面。如果一个割平面在添加到当前的LP松弛问题后，经过一次对偶单纯形枢轴变换能导致目标函数值产生更大的即时下降，那么这个割平面就被认为是“更深”的。\n\n请确定这两个可能的割平面中哪一个更深，并计算在加入这个更深的割平面并执行一次对偶单纯形枢轴变换后，目标函数 $Z$ 的新值。将您的最终答案四舍五入到三位有效数字。", "solution": "我们从LP松弛问题的最终最优单纯形表开始，其中 $x_{1}$ 和 $x_{2}$ 是基变量且其值为小数：\n$$\n\\begin{array}{c|cc|cc|c}\n\\text{基变量} & x_{1} & x_{2} & s_{1} & s_{2} & \\text{右端项} \\\\\n\\hline\nZ\\text{行} & 0 & 0 & 1 & 1 & 19 \\\\\nx_{1} & 1 & 0 & -\\frac{1}{11} & \\frac{4}{11} & \\frac{26}{11} \\\\\nx_{2} & 0 & 1 & \\frac{3}{11} & -\\frac{1}{11} & \\frac{21}{11}\n\\end{array}\n$$\n由于原问题具有整数右端项和整数系数，对于任何整数可行解 $(x_{1},x_{2})$，松弛变量满足 $s_{1}=10-x_{1}-4x_{2}$ 和 $s_{2}=9-3x_{1}-x_{2}$，因此在所有整数可行点上，$s_{1},s_{2}$ 也均为整数值。因此，我们可以对每个右端项为小数的基变量行应用Gomory分数割平面法。\n\n对于写作 $x_{B}+\\sum_{j}a_{Bj}x_{j}=b_{B}$ 的一个基变量行，Gomory分数割平面为\n$$\n\\sum_{j}\\left(a_{Bj}-\\left\\lfloor a_{Bj}\\right\\rfloor\\right)x_{j}\\geq b_{B}-\\left\\lfloor b_{B}\\right\\rfloor.\n$$\n\n由 $x_{1}$ 行生成的割平面：\n该行方程为：$x_{1}-\\frac{1}{11}s_{1}+\\frac{4}{11}s_{2}=\\frac{26}{11}$。小数部分为\n$$\nf\\left(-\\frac{1}{11}\\right)=\\frac{10}{11},\\quad f\\left(\\frac{4}{11}\\right)=\\frac{4}{11},\\quad f\\left(\\frac{26}{11}\\right)=\\frac{4}{11}.\n$$\n因此，割平面为\n$$\n\\frac{10}{11}s_{1}+\\frac{4}{11}s_{2}\\geq\\frac{4}{11}\\quad\\Longleftrightarrow\\quad 10s_{1}+4s_{2}\\geq 4.\n$$\n\n由 $x_{2}$ 行生成的割平面：\n该行方程为：$x_{2}+\\frac{3}{11}s_{1}-\\frac{1}{11}s_{2}=\\frac{21}{11}$。小数部分为\n$$\nf\\left(\\frac{3}{11}\\right)=\\frac{3}{11},\\quad f\\left(-\\frac{1}{11}\\right)=\\frac{10}{11},\\quad f\\left(\\frac{21}{11}\\right)=\\frac{10}{11}.\n$$\n因此，割平面为\n$$\n\\frac{3}{11}s_{1}+\\frac{10}{11}s_{2}\\geq\\frac{10}{11}\\quad\\Longleftrightarrow\\quad 3s_{1}+10s_{2}\\geq 10.\n$$\n\n为了通过一次对偶单纯形枢轴变换比较深度，我们将每个割平面以不等式形式加入，并执行一步对偶单纯形迭代。\n\n对于 $10s_{1}+4s_{2}\\geq 4$，引入新的松弛变量 $s_{3}\\geq 0$，将其重写为 $-10s_{1}-4s_{2}+s_{3}=-4$。枢轴行是 $s_{3}$ 所在行，其右端项为 $-4$。符合条件的进基列是在该行中系数为负且在 $Z$ 行中系数为正的列，即 $s_{1}$ 和 $s_{2}$。使用 $Z$ 行的系数计算对偶比率：\n$$\nr_{s_{1}}=\\frac{1}{10},\\quad r_{s_{2}}=\\frac{1}{4}.\n$$\n选择比率较小的 $s_{1}$。在 $-10$ 上执行枢轴变换会使目标函数减少 $4 \\cdot \\frac{1}{10}=\\frac{2}{5}$，因此 $Z$ 从 $19$ 变为 $19-\\frac{2}{5}=\\frac{93}{5}=18.6$。\n\n对于 $3s_{1}+10s_{2}\\geq 10$，将其重写为 $-3s_{1}-10s_{2}+s_{3}=-10$。同样，枢轴行是 $s_{3}$ 所在行，其右端项为 $-10$；符合条件的进基列是 $s_{1}$ 和 $s_{2}$。对偶比率为\n$$\nr_{s_{1}}=\\frac{1}{3},\\quad r_{s_{2}}=\\frac{1}{10}.\n$$\n选择比率较小的 $s_{2}$。在 $-10$ 上执行枢轴变换会使目标函数减少 $10 \\cdot \\frac{1}{10}=1$，因此 $Z$ 从 $19$ 变为 $18$。\n\n因此，割平面 $3s_{1}+10s_{2}\\geq 10$ 更深，经过一次对偶单纯形枢轴变换后，新的目标函数值为 $Z=18$，保留三位有效数字为 $18.0$。", "answer": "$$\\boxed{\\begin{pmatrix}3 s_{1} + 10 s_{2} \\ge 10 & 18.0\\end{pmatrix}}$$", "id": "2211932"}]}
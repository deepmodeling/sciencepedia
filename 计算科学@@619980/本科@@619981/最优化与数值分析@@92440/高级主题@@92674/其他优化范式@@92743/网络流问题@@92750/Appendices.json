{"hands_on_practices": [{"introduction": "本练习将网络流理论应用于一个经典的物流场景。通过为一家虚构的货运公司计算最大运输吨位，你将实践如何将实际问题建模为网络流图，并应用核心概念来找到最优解。这是掌握资源分配和网络优化问题的第一步。[@problem_id:2189479]", "problem": "一家名为“Streamline Shippers”的物流公司，负责将货物从城市A的中央制造厂运送到城市D的主要分销中心。该公司有几条可用的运输路线，其中一些路线经过城市B和C的中转枢纽。所有的运输能力都以每天的货物吨数（吨/天）为单位。\n\n可用的路线及其每日最大运力如下：\n- 从城市A到城市B（卡车运输）：100吨。\n- 从城市A到城市C（铁路运输）：120吨。\n- 从城市B到城市C（本地转运）：30吨。\n- 从城市B到城市D（空运）：70吨。\n- 从城市C到城市D（特快列车）：150吨。\n\n货物只能按指定方向移动。例如，货物可以从B运到C，但不能从C运到B。假设该公司希望最大化从A到D的货物运输量，计算每天可以运输的最大总吨位。请以吨/天为单位表示您的最终答案。", "solution": "将此网络建模为一个有向图，其中源点为A，汇点为D。设边上的流量为 $f_{AB}, f_{AC}, f_{BC}, f_{BD}, f_{CD}$，每条边的流量都受限于 $0 \\le f_{XY} \\le c_{XY}$，其中容量分别为 $c_{AB}=100$, $c_{AC}=120$, $c_{BC}=30$, $c_{BD}=70$, $c_{CD}=150$。令 $v$ 表示从A到D的总流量。\n\n流量守恒和容量限制如下：\n- 在A点（源点）：\n$$f_{AB}+f_{AC}=v,$$\n其中 $0 \\le f_{AB} \\le 100$ 且 $0 \\le f_{AC} \\le 120$。\n- 在B点：\n$$f_{AB}=f_{BD}+f_{BC},$$\n其中 $0 \\le f_{BD} \\le 70$ 且 $0 \\le f_{BC} \\le 30$。\n- 在C点：\n$$f_{AC}+f_{BC}=f_{CD},$$\n其中 $0 \\le f_{CD} \\le 150$。\n- 在D点（汇点）：\n$$f_{BD}+f_{CD}=v.$$\n\n为得到一个大的可行流，让流量从A点满负荷流出：\n$$f_{AB}=100, \\quad f_{AC}=120.$$\n将B点的流量分配为\n$$f_{BD}=70, \\quad f_{BC}=30,$$\n这遵守了 $f_{BD} \\le 70$ 和 $f_{BC} \\le 30$ 的限制，并且满足 $f_{AB}=f_{BD}+f_{BC}=100$。然后，C点接收的流量为\n$$f_{AC}+f_{BC}=120+30=150,$$\n所以设置\n$$f_{CD}=150,$$\n这使得边 $C \\to D$ 达到饱和，但仍在其容量限制内。流入汇点的流量为\n$$v=f_{BD}+f_{CD}=70+150=220,$$\n从源点流出的流量为 $f_{AB}+f_{AC}=100+120=220$，因此所有守恒定律均成立。所以流量为 $v=220$ 是一个可行流。\n\n为了证明其最优性，应用最大流最小割定理。考虑一个将 $\\{A\\}$ 与 $\\{B,C,D\\}$ 分开的割。该割的容量是所有离开A的边的容量之和：\n$$c(\\{A\\},\\{B,C,D\\})=c_{AB}+c_{AC}=100+120=220.$$\n根据最大流最小割定理，任何从源点到汇点的流 $v$ 都满足 $v \\le 220$。由于我们已经构造了一个流量为 $v=220$ 的可行流，因此该流是最大流。\n\n因此，每天可以运输的最大总吨位是 $220$。", "answer": "$$\\boxed{220}$$", "id": "2189479"}, {"introduction": "在计算出最大流量之后，一个自然而然的问题是：是什么限制了系统的整体性能？本练习通过分析一条模块化装配线，让你将“最小割”的数学概念与“系统瓶颈”的实际工程问题联系起来。这不仅能帮助你找到最大生产率，还能让你精确定位到制约效率的关键环节。[@problem_id:2189492]", "problem": "一家公司设计了一条用于制造电子设备的模块化装配线。其工作流程可以建模为一个有向网络，其中节点代表工位，有向边代表具有给定容量的传输路径。路径的容量是指每小时可传输的最大单元数。\n\n该网络由一个供应站 (S) 和一个成品站 (T) 组成，原材料从供应站进入，成品从成品站离开。在这两者之间，有四个处理工位：工位 A、工位 B、工位 C 和工位 D。这些连接及其最大小时容量如下：\n- 从供应站 (S) 到工位 A：40 单元/小时\n- 从供应站 (S) 到工位 B：30 单元/小时\n- 从工位 A 到工位 C：20 单元/小时\n- 从工位 A 到工位 D：15 单元/小时\n- 从工位 B 到工位 C：5 单元/小时\n- 从工位 B 到工位 D：15 单元/小时\n- 从工位 C 到成品站 (T)：25 单元/小时\n- 从工位 D 到成品站 (T)：25 单元/小时\n\n您的任务是分析这条装配线的生产能力。\n\n1.  确定该装配线的最大可能生产率，即每小时可以从供应站处理到成品站的最大单元数。\n2.  整个过程受瓶颈限制。瓶颈工位集由属于最小割的源点侧划分的所有中间工位（即非 S 或 T）组成。请从以下选项中确定这组工位。\n\nA. {A, B}\n\nB. {C, D}\n\nC. {A, C}\n\nD. {A, B, D}\n\nE. {B, C, D}\n\n以一个数值对的形式提供您的答案，第一个值是最大生产率，第二个值是正确选项的大写字母。", "solution": "这个问题可以通过在给定网络中找到从源点S（供应站）到汇点T（成品站）的最大流来解决。最大生产率等于此最大流的值。瓶颈工位集通过识别最小割中源点侧划分的节点来确定。\n\n我们将使用 Ford-Fulkerson 算法，通过在残差图中重复寻找增广路径来找到最大流。边 $(u,v)$ 的容量表示为 $c(u,v)$。残差容量表示为 $c_f(u,v)$。\n\n初始容量为：\n$c(S,A)=40$, $c(S,B)=30$, $c(A,C)=20$, $c(A,D)=15$, $c(B,C)=5$, $c(B,D)=15$, $c(C,T)=25$, $c(D,T)=25$。所有其他容量均为 0。\n\n**第 1 步：寻找第一条增广路径。**\n路径 1：$S \\rightarrow A \\rightarrow C \\rightarrow T$。\n此路径的瓶颈容量为 $\\min(c(S,A), c(A,C), c(C,T)) = \\min(40, 20, 25) = 20$。\n我们沿此路径推送 20 个单位的流。总流量现在为 20。\n残差容量更新如下：\n$c_f(S,A) = 40 - 20 = 20$。创建一条反向边：$c_f(A,S) = 20$。\n$c_f(A,C) = 20 - 20 = 0$。创建一条反向边：$c_f(C,A) = 20$。\n$c_f(C,T) = 25 - 20 = 5$。创建一条反向边：$c_f(T,C) = 20$。\n\n**第 2 步：寻找第二条增广路径。**\n路径 2：$S \\rightarrow B \\rightarrow D \\rightarrow T$。\n当前残差图中此路径的瓶颈容量为 $\\min(c(S,B), c(B,D), c(D,T)) = \\min(30, 15, 25) = 15$。\n我们推送 15 个单位的流。总流量现在为 $20 + 15 = 35$。\n残差容量更新如下：\n$c_f(S,B) = 30 - 15 = 15$。创建一条反向边：$c_f(B,S) = 15$。\n$c_f(B,D) = 15 - 15 = 0$。创建一条反向边：$c_f(D,B) = 15$。\n$c_f(D,T) = 25 - 15 = 10$。创建一条反向边：$c_f(T,D) = 15$。\n\n**第 3 步：寻找第三条增广路径。**\n路径 3：$S \\rightarrow A \\rightarrow D \\rightarrow T$。\n瓶颈容量为 $\\min(c_f(S,A), c(A,D), c_f(D,T)) = \\min(20, 15, 10) = 10$。\n我们推送 10 个单位的流。总流量现在为 $35 + 10 = 45$。\n残差容量更新如下：\n$c_f(S,A) = 20 - 10 = 10$。更新反向边：$c_f(A,S) = 20 + 10 = 30$。\n$c_f(A,D) = 15 - 10 = 5$。创建一条反向边：$c_f(D,A) = 10$。\n$c_f(D,T) = 10 - 10 = 0$。更新反向边：$c_f(T,D) = 15 + 10 = 25$。\n\n**第 4 步：寻找第四条增广路径。**\n路径 4：$S \\rightarrow B \\rightarrow C \\rightarrow T$。\n瓶颈容量为 $\\min(c_f(S,B), c(B,C), c_f(C,T)) = \\min(15, 5, 5) = 5$。\n我们推送 5 个单位的流。总流量现在为 $45 + 5 = 50$。\n残差容量更新如下：\n$c_f(S,B) = 15 - 5 = 10$。更新反向边：$c_f(B,S) = 15 + 5 = 20$。\n$c_f(B,C) = 5 - 5 = 0$。创建一条反向边：$c_f(C,B) = 5$。\n$c_f(C,T) = 5 - 5 = 0$。更新反向边：$c_f(T,C) = 20 + 5 = 25$。\n\n**第 5 步：检查是否存在更多增广路径。**\n最终的残差图具有以下正向容量：\n$c_f(S,A) = 10$, $c_f(S,B) = 10$\n$c_f(A,C) = 0$, $c_f(A,D) = 5$\n$c_f(B,C) = 0$, $c_f(B,D) = 0$\n$c_f(C,T) = 0$, $c_f(D,T) = 0$\n此时，我们需要检查在此残差图（包括反向边）中是否存在从 S 到 T 的任何路径。让我们找出从 S 可达的所有节点：\n1. 从可达节点集 $R = \\{S\\}$ 开始。\n2. 从 S，我们可以到达 A，因为 $c_f(S,A) = 10 > 0$。将 A 添加到 R。$R = \\{S, A\\}$。\n3. 从 S，我们可以到达 B，因为 $c_f(S,B) = 10 > 0$。将 B 添加到 R。$R = \\{S, A, B\\}$。\n4. 从 A（在 R 中），我们可以到达 D，因为 $c_f(A,D) = 5 > 0$。将 D 添加到 R。$R = \\{S, A, B, D\\}$。\n5. 从 $R=\\{S, A, B, D\\}$ 中的任何节点，我们检查到不在 R 中的节点的出边。\n   - 从 A：$c_f(A,C)=0$。无路径。\n   - 从 B：$c_f(B,C)=0$。无路径。\n   - 从 D：$c_f(D,T)=0$。无路径。\n   - 从 $R$ 到 $\\{C, T\\}$ 没有其他正向边。\n由于 T 不在可达节点集 R 中，因此没有更多的增广路径。\n\n最大流是所推送流量的总和，即 $50$。因此，最大生产率为 50 单元/小时。\n\n**第 2 部分：识别瓶颈工位**\n根据最大流最小割定理，最小割的容量等于最大流。最小割是对顶点的划分 $(V_S, V_T)$，其中 $V_S$ 是最终残余图中从 S 可达的所有顶点的集合，而 $V_T$ 是其余的顶点。\n根据我们在第 5 步中的分析，可达节点的集合是 $V_S = \\{S, A, B, D\\}$。\n不可达节点的集合是 $V_T = \\{C, T\\}$。\n\n问题将瓶颈工位集定义为最小割的源点侧划分 ($V_S$) 中的中间工位（非 S或 T）。\n$V_S$ 中的中间工位是 $\\{A, B, D\\}$。\n与给定选项比较：\nA. {A, B}\nB. {C, D}\nC. {A, C}\nD. {A, B, D}\nE. {B, C, D}\n正确选项是 D。\n\n最终答案是（最大速率，瓶颈选项）对。即 (50, D)。", "answer": "$$\\boxed{\\begin{pmatrix} 50 & D \\end{pmatrix}}$$", "id": "2189492"}, {"introduction": "现实世界中的决策往往不是一次性的计算，而是涉及对未来投资的评估。这个更具挑战性的练习将带你进入参数化分析的领域。你将研究网络中某条特定链路的容量升级如何影响整个系统的吞吐量，最终得出一个描述性能与投资关系的函数 $v(\\lambda)$。这种分析对于进行成本效益评估和制定明智的升级策略至关重要。[@problem_id:2189457]", "problem": "一家技术公司正在分析其广域网（WAN）的数据吞吐量，该网络连接其总部（节点 $s$）与一个主要的数据中心（节点 $t$）。该网络由若干个相互连接的路由站组成，在有向图中表示为节点。站点之间的链路是定向光纤电缆，具有固定的数据承载容量，单位为太比特每秒（Tbps）。\n\n网络拓扑由节点集 $V = \\{s, a, b, c, d, t\\}$ 和一组具有以下容量的有向边定义：\n- $c(s, a) = 15$\n- $c(s, b) = 5$\n- $c(a, c) = 20$\n- $c(b, c) = 4$\n- $c(b, d) = 10$\n- $c(c, d) = 3$\n- $c(c, t) = 8$\n- $c(d, t) = 14$\n\n该公司正在考虑一项战略投资，以升级站点 a 和 b 之间的链路。这条由有向边 $(a,b)$ 表示的特定链路，目前的基础容量为 1 Tbps。升级将增加 $\\lambda$ Tbps 的额外容量，其中 $\\lambda \\ge 0$。因此，边 $(a,b)$ 的容量由 $c(a,b) = 1 + \\lambda$ 给出。\n\n假设数据可以在网络中任意路由，直至达到链路的容量限制，请确定从总部 $s$ 到数据中心 $t$ 的最大总吞吐量（记为 $v(\\lambda)$），并将其表示为投资参数 $\\lambda$ 的函数。请给出针对所有 $\\lambda \\ge 0$ 的 $v(\\lambda)$ 的完整解析表达式。", "solution": "问题要求解一个网络中从源节点 $s$到汇节点 $t$ 的最大流 $v(\\lambda)$，其中一条边 $(a,b)$ 的容量是参数 $\\lambda$ 的函数，即 $c(a,b) = 1+\\lambda$。\n\n根据最大流最小割定理，网络中的最大流等于 s-t 割的最小容量。一个 s-t 割是顶点集 $V$ 的一个划分，将其分为两个不相交的集合 $S$ 和 $T$，使得 $s \\in S$ 且 $t \\in T$。割 $(S,T)$ 的容量是所有从 $S$ 中的节点指向 $T$ 中的节点的边 $(u,v)$ 的容量之和。\n$$ v(\\lambda) = \\min_{(S,T) \\text{ s.t. } s \\in S, t \\in T} \\left( \\sum_{u \\in S, v \\in T} c(u,v) \\right) $$\n我们可以根据所有可能的 s-t 割如何划分节点 $a$ 和 $b$ 来对其进行分类，因为这决定了它们的容量是否依赖于 $\\lambda$。\n\n**情况1：容量不依赖于 $\\lambda$ 的割。**\n这种情况发生在边 $(a,b)$ 不从 $S$ 跨越到 $T$ 时。这意味着 $a,b$ 同在 $S$ 中，或同在 $T$ 中，或者 $a \\in T$ 且 $b \\in S$。\n\n我们来计算此类型中一些关键割的容量：\n1.  割 $S = \\{s\\}$。集合 $T$ 包含所有其他节点：$T=\\{a,b,c,d,t\\}$。从 $S$ 到 $T$ 的边是 $(s,a)$ 和 $(s,b)$。\n    容量为 $C_1 = c(s,a) + c(s,b) = 15 + 5 = 20$。\n    在这个割中，$a,b \\in T$。\n\n2.  割 $T = \\{t\\}$。集合 $S$ 包含所有其他节点：$S=\\{s,a,b,c,d\\}$。从 $S$ 到 $T$ 的边是 $(c,t)$ 和 $(d,t)$。\n    容量为 $C_2 = c(c,t) + c(d,t) = 8 + 14 = 22$。\n    在这个割中，$a,b \\in S$。\n\n3.  考虑 $a \\in T$ 且 $b \\in S$ 的割。容量是恒定的，因为有向边 $(a,b)$ 从 $T$ 指向 $S$，而不是从 $S$ 指向 $T$。我们测试割 $S = \\{s,b\\}, T=\\{a,c,d,t\\}$。\n    从 $S$到 $T$ 的边是 $(s,a)$, $(b,c)$ 和 $(b,d)$。\n    容量为 $C_3 = c(s,a) + c(b,c) + c(b,d) = 15 + 4 + 10 = 29$。\n\n4.  考虑另一个 $a,b \\in S$ 的割，例如 $S = \\{s,a,b,d\\}, T=\\{c,t\\}$。\n    从 $S$到 $T$ 的边是 $(a,c)$ 和 $(b,c)$。\n    容量为 $C_4 = c(a,c) + c(b,c) = 20 + 4 = 24$。\n\n比较找到的恒定容量割（$C_1=20, C_2=22, C_3=29, C_4=24$），最小容量为 20。我们将所有恒定容量割的最小容量记为 $C_{const} = 20$。\n\n**情况2：容量依赖于 $\\lambda$ 的割。**\n这种情况发生在边 $(a,b)$ 从 $S$ 跨越到 $T$ 时，这要求 $a \\in S$ 且 $b \\in T$。这种割的容量形式为 $K + c(a,b) = K + 1 + \\lambda$，其中 $K$ 是所有其他从 $S$ 跨越到 $T$ 的边的容量之和。我们希望找到这个类别中容量最小的割。\n\n我们来计算此类型中一些关键割的容量：\n1.  考虑割 $S = \\{s,a\\}, T=\\{b,c,d,t\\}$。\n    从 $S$ 到 $T$ 的边是 $(s,b)$、$(a,b)$ 和 $(a,c)$。\n    容量为 $C_5(\\lambda) = c(s,b) + c(a,c) + c(a,b) = 5 + 20 + (1+\\lambda) = 26 + \\lambda$。\n\n2.  考虑割 $S = \\{s,a,c\\}, T=\\{b,d,t\\}$。\n    从 $S$到 $T$ 的边是 $(s,b)$、$(a,b)$、$(c,d)$ 和 $(c,t)$。\n    容量为 $C_6(\\lambda) = c(s,b) + c(c,d) + c(c,t) + c(a,b) = 5 + 3 + 8 + (1+\\lambda) = 17 + \\lambda$。\n\n比较找到的依赖于 $\\lambda$ 的割（$26+\\lambda$ 和 $17+\\lambda$），对于任意 $\\lambda \\ge 0$，最小容量为 $C_{\\lambda} = 17 + \\lambda$。\n\n**总体最小割容量**\n最大流值 $v(\\lambda)$ 是所有割容量的最小值。我们需要在最小恒定容量和最小的依赖于 $\\lambda$ 的容量之间找到最小值。\n$$ v(\\lambda) = \\min(C_{const}, C_{\\lambda}) = \\min(20, 17+\\lambda) $$\n\n现在我们分析这个关于 $\\lambda \\ge 0$ 的表达式：\n- 如果 $17+\\lambda \\le 20$，即 $0 \\le \\lambda \\le 3$，则最小值为 $17+\\lambda$。\n- 如果 $17+\\lambda > 20$，即 $\\lambda > 3$，则最小值为 $20$。\n\n这给出了描述最大吞吐量 $v(\\lambda)$ 的一个分段函数：\n对于 $0 \\le \\lambda \\le 3$，瓶颈是割 $S=\\{s,a,c\\}$，并且增加链路 $(a,b)$ 的容量会直接增加总网络吞吐量，增长率为 1。\n当 $\\lambda$ 超过 3 时，这个割的容量超过 20。瓶颈便切换到割 $S=\\{s\\}$，其容量是恒定的 20。对链路 $(a,b)$ 的任何进一步投资（将 $\\lambda$ 增加到 3 以上）都不会带来总吞吐量的提升。\n\n$v(\\lambda)$ 的最终函数形式是：\n$v(\\lambda) = \\begin{cases} 17 + \\lambda & \\text{如果 } 0 \\le \\lambda \\le 3 \\\\ 20 & \\text{如果 } \\lambda > 3 \\end{cases}$", "answer": "$$\\boxed{\\begin{cases} 17 + \\lambda & \\text{如果 } 0 \\le \\lambda \\le 3 \\\\ 20 & \\text{如果 } \\lambda > 3 \\end{cases}}$$", "id": "2189457"}]}
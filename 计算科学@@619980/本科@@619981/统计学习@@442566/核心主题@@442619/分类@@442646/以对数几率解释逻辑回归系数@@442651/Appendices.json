{"hands_on_practices": [{"introduction": "逻辑回归系数表示对数几率的线性变化，但这种线性关系在概率尺度上并不成立。本练习旨在通过一个具体的计算来揭示这一关键区别，帮助你理解为什么一个固定的对数几率增量在不同的基线风险水平下会导致截然不同的概率变化。通过这个练习，你将亲身体会到为什么在对数几率尺度上进行解释是至关重要的。[@problem_id:3133329]", "problem": "一个二元结果通过逻辑回归进行建模，其中预测变量每增加一个单位，事件的对数几率（logit）就会增加一个恒定的增量 $\\delta$。考虑两个具有不同基线事件概率的群体：一个低风险组，其基线概率为 $p_{L}=\\frac{1}{10}$；一个高风险组，其基线概率为 $p_{H}=\\frac{4}{5}$。假设预测变量增加一个单位，对应的对数几率增量为 $\\delta=\\ln(2)$。仅以几率 $o=\\frac{p}{1-p}$ 和 logit 函数 $\\text{logit}(p)=\\ln\\!\\left(\\frac{p}{1-p}\\right)$ 的定义为出发点，推导增量后的概率 $p'$ 作为基线概率 $p$ 和 $\\delta$ 的函数，然后计算概率变化量 $p_{L}'-p_{L}$ 和 $p_{H}'-p_{H}$。将数值\n$\\Delta=\\big(p_{H}'-p_{H}\\big)-\\big(p_{L}'-p_{L}\\big)$\n以精确值的形式报告。不要对答案进行四舍五入。", "solution": "该问题是有效的，因为它具有科学依据、问题设定良好且客观。它基于逻辑回归的标准定义和属性，并要求进行形式化的推导和计算。\n\n第一步是推导增量后概率 $p'$ 的表达式，它是基线概率 $p$ 和对数几率增量 $\\delta$ 的函数。基线概率 $p$ 的对数几率（logit）定义为：\n$$\n\\text{logit}(p) = \\ln\\left(\\frac{p}{1-p}\\right)\n$$\n预测变量增加一个单位会导致对数几率增加一个恒定的量 $\\delta$。因此，新的对数几率 $\\text{logit}(p')$ 为：\n$$\n\\text{logit}(p') = \\text{logit}(p) + \\delta = \\ln\\left(\\frac{p}{1-p}\\right) + \\delta\n$$\n为了求出新的概率 $p'$，我们首先需要求出新的几率 $o'$。几率通过对对数几率取指数得到：\n$$\no' = \\exp(\\text{logit}(p')) = \\exp\\left(\\ln\\left(\\frac{p}{1-p}\\right) + \\delta\\right)\n$$\n利用指数的性质 $\\exp(a+b) = \\exp(a)\\exp(b)$，我们可以将各项分开：\n$$\no' = \\exp\\left(\\ln\\left(\\frac{p}{1-p}\\right)\\right) \\cdot \\exp(\\delta) = \\left(\\frac{p}{1-p}\\right) \\exp(\\delta)\n$$\n概率和几率之间的关系是 $p = \\frac{o}{1+o}$。因此，新的概率 $p'$ 可以用新的几率 $o'$ 表示为：\n$$\np' = \\frac{o'}{1+o'}\n$$\n代入 $o'$ 的表达式：\n$$\np' = \\frac{\\left(\\frac{p}{1-p}\\right) \\exp(\\delta)}{1 + \\left(\\frac{p}{1-p}\\right) \\exp(\\delta)}\n$$\n为了简化这个表达式，我们将分子和分母同时乘以 $(1-p)$：\n$$\np' = \\frac{p \\exp(\\delta)}{(1-p) + p \\exp(\\delta)}\n$$\n这就是所求的增量后概率 $p'$ 作为 $p$ 和 $\\delta$ 的函数的通用公式。\n\n接下来，我们代入给定的对数几率增量值 $\\delta = \\ln(2)$。这意味着 $\\exp(\\delta) = \\exp(\\ln(2)) = 2$。$p'$ 的公式简化为：\n$$\np' = \\frac{2p}{1+p}\n$$\n现在，我们将此公式应用于两个指定的群体。\n\n对于低风险组，基线概率为 $p_{L} = \\frac{1}{10}$。增量后的概率 $p_{L}'$ 为：\n$$\np_{L}' = \\frac{2 p_{L}}{1+p_{L}} = \\frac{2\\left(\\frac{1}{10}\\right)}{1+\\frac{1}{10}} = \\frac{\\frac{2}{10}}{\\frac{11}{10}} = \\frac{2}{11}\n$$\n低风险组的概率变化为：\n$$\np_{L}' - p_{L} = \\frac{2}{11} - \\frac{1}{10} = \\frac{2 \\cdot 10 - 1 \\cdot 11}{110} = \\frac{20-11}{110} = \\frac{9}{110}\n$$\n\n对于高风险组，基线概率为 $p_{H} = \\frac{4}{5}$。增量后的概率 $p_{H}'$ 为：\n$$\np_{H}' = \\frac{2 p_{H}}{1+p_{H}} = \\frac{2\\left(\\frac{4}{5}\\right)}{1+\\frac{4}{5}} = \\frac{\\frac{8}{5}}{\\frac{9}{5}} = \\frac{8}{9}\n$$\n高风险组的概率变化为：\n$$\np_{H}' - p_{H} = \\frac{8}{9} - \\frac{4}{5} = \\frac{8 \\cdot 5 - 4 \\cdot 9}{45} = \\frac{40-36}{45} = \\frac{4}{45}\n$$\n\n最后，我们计算量 $\\Delta$，即这两个概率变化之差：\n$$\n\\Delta = (p_{H}' - p_{H}) - (p_{L}' - p_{L}) = \\frac{4}{45} - \\frac{9}{110}\n$$\n为了进行分数相减，我们找到一个公分母。45 和 110 的最小公倍数是 990。\n$45 = 5 \\times 9$\n$110 = 10 \\times 11 = 2 \\times 5 \\times 11$\n$\\text{lcm}(45, 110) = 2 \\times 5 \\times 9 \\times 11 = 990$。\n我们用公分母重写这些分数：\n$$\n\\Delta = \\frac{4 \\cdot (990/45)}{990} - \\frac{9 \\cdot (990/110)}{990} = \\frac{4 \\cdot 22}{990} - \\frac{9 \\cdot 9}{990} = \\frac{88}{990} - \\frac{81}{990}\n$$\n$$\n\\Delta = \\frac{88 - 81}{990} = \\frac{7}{990}\n$$\n这个结果表明，对数几率的恒定增量对应于概率的非恒定增量，且概率变化的幅度取决于基线概率。", "answer": "$$\\boxed{\\frac{7}{990}}$$", "id": "3133329"}, {"introduction": "掌握如何将抽象的对数几率系数转化为关于几率的直观陈述，是应用逻辑回归的一项核心技能。这个练习将指导你如何计算，为了使事件发生的几率加倍，预测变量需要改变多少。这项实践能够让你将模型的数学输出与现实世界中可衡量的变化直接联系起来。[@problem_id:3133350]", "problem": "一个针对数据录入专员的培训项目研究了模拟器练习时间对学员首次尝试通过认证考试概率的影响。令 $Y \\in \\{0,1\\}$ 表示学员是否通过考试（$Y=1$ 表示通过，$Y=0$ 表示未通过），令 $x$ 表示考前完成的模拟器练习小时数。一个使用对数优势比（log-odds）链接的逻辑回归模型被拟合到历史数据上，得出的 $x$ 的斜率系数为 $\\beta_{1} = 0.27$（解释为在保持所有其他协变量不变的情况下，每增加一小时练习，对数优势比的变化量）。\n\n从优势比（odds）的定义（对于概率 $p$，优势比为 $p/(1-p)$）和逻辑回归中对数优势比（logit）链接的定义出发，确定对于一个当前练习 $x$ 小时、其他条件相同的学员，需要增加多少练习时间 $\\Delta x$ 才能使其通过考试的优势比加倍。最终答案以小时为单位表示。将您的答案四舍五入到 $4$ 位有效数字。", "solution": "问题要求计算能使通过认证考试的优势比加倍所需增加的练习时间，记为 $\\Delta x$。练习时间与通过概率之间的关系使用逻辑回归模型进行建模。\n\n首先，我们必须正式定义所给出的逻辑回归模型的各个组成部分。对于一组给定的预测变量，通过的概率记为 $p$。通过考试的优势比定义为通过的概率与未通过的概率之比：\n$$ \\text{odds} = \\frac{p}{1-p} $$\n逻辑回归模型将优势比的自然对数（即对数优势比或 logit）与预测变量的线性组合关联起来。令 $x$ 为模拟器练习的小时数，其他协变量由 $x_2, x_3, \\dots, x_k$ 表示。模型方程为：\n$$ \\ln\\left(\\frac{p}{1-p}\\right) = \\beta_0 + \\beta_1 x + \\sum_{j=2}^{k} \\beta_j x_j $$\n此处，$\\beta_1$ 是练习时间 $x$ 的系数，其给定值为 $\\beta_1 = 0.27$。$\\beta_1$ 的解释是，在保持所有其他变量不变的情况下，$x$ 每增加一个单位，通过考试的对数优势比增加 $\\beta_1$。\n\n让我们考虑一个其他条件相同的学员的两种情况。“其他条件相同”意味着所有其他协变量（$x_2, \\dots, x_k$）都保持不变。\n\n情况 1：学员练习 $x$ 小时。通过考试的对数优势比由下式给出：\n$$ \\ln(\\text{odds}_1) = \\beta_0 + \\beta_1 x + \\sum_{j=2}^{k} \\beta_j x_j $$\n\n情况 2：学员练习时间增加到 $x + \\Delta x$ 小时。此时通过考试的对数优势比为：\n$$ \\ln(\\text{odds}_2) = \\beta_0 + \\beta_1 (x + \\Delta x) + \\sum_{j=2}^{k} \\beta_j x_j $$\n\n我们关心的是这两种情况之间对数优势比的变化。用情况 2 的方程减去情况 1 的方程，我们可以分离出额外练习时间 $\\Delta x$ 的影响：\n$$ \\ln(\\text{odds}_2) - \\ln(\\text{odds}_1) = \\left(\\beta_0 + \\beta_1 (x + \\Delta x) + \\sum_{j=2}^{k} \\beta_j x_j\\right) - \\left(\\beta_0 + \\beta_1 x + \\sum_{j=2}^{k} \\beta_j x_j\\right) $$\n截距 $\\beta_0$、初始练习时间的项 $\\beta_1 x$ 以及代表其他协变量的总和项都相互抵消，剩下：\n$$ \\ln(\\text{odds}_2) - \\ln(\\text{odds}_1) = \\beta_1 (x + \\Delta x) - \\beta_1 x = \\beta_1 \\Delta x $$\n使用对数属性 $\\ln(a) - \\ln(b) = \\ln(a/b)$，我们可以将方程的左边重写为：\n$$ \\ln\\left(\\frac{\\text{odds}_2}{\\text{odds}_1}\\right) = \\beta_1 \\Delta x $$\n这个方程表明，优势比（odds ratio）的对数与预测变量的变化量 $\\Delta x$ 成正比，比例常数为系数 $\\beta_1$。\n\n问题要求我们找到使优势比加倍的特定 $\\Delta x$。这个条件表示为：\n$$ \\text{odds}_2 = 2 \\times \\text{odds}_1 $$\n这意味着优势比之比为：\n$$ \\frac{\\text{odds}_2}{\\text{odds}_1} = 2 $$\n将这个值代入我们推导出的方程：\n$$ \\ln(2) = \\beta_1 \\Delta x $$\n现在我们可以求解 $\\Delta x$：\n$$ \\Delta x = \\frac{\\ln(2)}{\\beta_1} $$\n问题给出了斜率系数的值为 $\\beta_1 = 0.27$。将此值代入 $\\Delta x$ 的方程中：\n$$ \\Delta x = \\frac{\\ln(2)}{0.27} $$\n使用 $2$ 的自然对数值 $\\ln(2) \\approx 0.69314718$：\n$$ \\Delta x \\approx \\frac{0.69314718}{0.27} \\approx 2.56721178 \\text{ hours} $$\n问题要求将答案四舍五入到 $4$ 位有效数字。将计算出的值四舍五入得到：\n$$ \\Delta x \\approx 2.567 \\text{ hours} $$\n因此，在保持所有其他因素不变的情况下，需要增加约 $2.567$ 小时的模拟器练习时间，才能使学员通过认证考试的优势比加倍。", "answer": "$$\\boxed{2.567}$$", "id": "3133350"}, {"introduction": "科学结论不仅依赖于点估计，还必须考虑其不确定性。本练习探讨了如何将对数几率系数的置信区间转换为更有解释性的几率比（Odds Ratio）的置信区间。你将发现，由于模型的非线性特性，一个在对数几率尺度上对称的置信区间在转换到几率比尺度后会变得不对称，这是理解逻辑回归统计推断的一个深刻见解。[@problem_id:3133369]", "problem": "一位研究人员拟合了一个逻辑回归模型，用于根据标准化的基线活动能力得分 $x$ 来预测患者是否遵循规定的物理治疗方案 ($Y \\in \\{0,1\\}$)。该模型使用 logit 链接，因此在活动能力得分 $x$ 下的依从性条件概率为\n$$\np(x) \\equiv \\Pr(Y=1 \\mid x) = \\frac{1}{1 + \\exp\\!\\big(-(\\beta_{0} + \\beta_{1} x)\\big)}.\n$$\n活动能力得分的拟合系数是最大似然估计 (MLE) $\\hat{\\beta}_{1} = 0.035$。在对数优势尺度上计算的 $\\beta_{1}$ 的一个瓦尔德 (Wald) $95\\%$ 置信区间 (CI) 为\n$$\n[\\beta_{1}^{L}, \\beta_{1}^{U}] = [-0.28,\\, 0.35].\n$$\n仅使用 logit 链接和优势 (odds) 的定义，执行以下操作：\n\n1) 推导对数优势系数 $\\beta_{1}$ 的置信区间如何引出与 $x$ 增加一个单位相关的优势比 (odds ratio) $\\exp(\\beta_{1})$ 的置信区间。然后，应用此推导将给定区间 $[-0.28,\\, 0.35]$ 转换为其在优势比尺度上的相应区间。\n\n2) 为了量化和解释优势比区间围绕点估计 $\\exp(\\hat{\\beta}_{1})$ 的不对称性，定义加性不对称比\n$$\nR \\equiv \\frac{\\exp(\\beta_{1}^{U}) - \\exp(\\hat{\\beta}_{1})}{\\exp(\\hat{\\beta}_{1}) - \\exp(\\beta_{1}^{L})}.\n$$\n根据给定值数值计算 $R$，并用文字解释为什么在优势比空间中进行加性度量时，$R$ 通常不等于 $1$。\n\n将所有数值结果四舍五入至四位有效数字。按顺序报告您的最终数值结果，即优势比的两个区间端点和 $R$ 的值。不需要单位。", "solution": "该问题是有效的，因为它提法恰当，科学上基于统计学习的原理，并且内部一致。所有必要的信息都已提供，可以进行所需的推导和计算。\n\n### 第1部分：优势比的置信区间\n\n逻辑回归模型将依从性概率 ($Y=1$) 定义为\n$$\np(x) = \\Pr(Y=1 \\mid x) = \\frac{1}{1 + \\exp(-(\\beta_{0} + \\beta_{1} x))}\n$$\n在给定活动能力得分 $x$ 下的依从性优势 (odds) 定义为依从性概率与非依从性概率之比：\n$$\nO(x) = \\frac{p(x)}{1-p(x)}\n$$\n我们可以将 $1-p(x)$ 表示为：\n$$\n1-p(x) = 1 - \\frac{1}{1 + \\exp(-(\\beta_{0} + \\beta_{1} x))} = \\frac{1 + \\exp(-(\\beta_{0} + \\beta_{1} x)) - 1}{1 + \\exp(-(\\beta_{0} + \\beta_{1} x))} = \\frac{\\exp(-(\\beta_{0} + \\beta_{1} x))}{1 + \\exp(-(\\beta_{0} + \\beta_{1} x))}\n$$\n将此代入优势的定义中，得到：\n$$\nO(x) = \\frac{\\frac{1}{1 + \\exp(-(\\beta_{0} + \\beta_{1} x))}}{\\frac{\\exp(-(\\beta_{0} + \\beta_{1} x))}{1 + \\exp(-(\\beta_{0} + \\beta_{1} x))}} = \\frac{1}{\\exp(-(\\beta_{0} + \\beta_{1} x))} = \\exp(\\beta_{0} + \\beta_{1} x)\n$$\n优势的自然对数，称为对数优势 (log-odds) 或 logit，因此是 $x$ 的线性函数：\n$$\n\\ln(O(x)) = \\beta_{0} + \\beta_{1} x\n$$\n系数 $\\beta_{1}$ 表示 $x$ 每增加一个单位时对数优势的变化。\n\n优势比 (OR) 量化了当 $x$ 增加一个单位时优势如何变化。它是 $x+1$ 处的优势与 $x$ 处的优势之比：\n$$\n\\text{OR} = \\frac{O(x+1)}{O(x)} = \\frac{\\exp(\\beta_{0} + \\beta_{1}(x+1))}{\\exp(\\beta_{0} + \\beta_{1}x)} = \\frac{\\exp(\\beta_{0} + \\beta_{1}x + \\beta_{1})}{\\exp(\\beta_{0} + \\beta_{1}x)} = \\exp(\\beta_{1})\n$$\n因此，预测变量每增加一个单位的优势比就是 $\\exp(\\beta_{1})$。\n\n参数的置信区间 (CI) 提供了一个合理值的范围。如果我们有 $\\beta_{1}$ 的一个 $95\\%$ CI，记为 $[\\beta_{1}^{L}, \\beta_{1}^{U}]$，我们可以通过将变换函数 $f(\\beta_{1}) = \\exp(\\beta_{1})$ 应用于区间的端点来找到优势比 $\\exp(\\beta_{1})$ 的相应 CI。这是有效的，因为指数函数是严格单调的（具体来说，是严格递增的）。因此，优势比的 $95\\%$ CI 由下式给出：\n$$\n[\\exp(\\beta_{1}^{L}), \\exp(\\beta_{1}^{U})]\n$$\n给定 $\\beta_{1}$ 的 $95\\%$ CI 为 $[-0.28, 0.35]$，我们有 $\\beta_{1}^{L}=-0.28$ 和 $\\beta_{1}^{U}=0.35$。我们计算优势比 CI 的端点：\n下界：$\\exp(\\beta_{1}^{L}) = \\exp(-0.28) \\approx 0.75578$\n上界：$\\exp(\\beta_{1}^{U}) = \\exp(0.35) \\approx 1.41907$\n\n四舍五入到四位有效数字，优势比的 $95\\%$ CI 为 $[0.7558, 1.419]$。\n\n### 第2部分：不对称比\n\n加性不对称比 $R$ 定义为：\n$$\nR \\equiv \\frac{\\exp(\\beta_{1}^{U}) - \\exp(\\hat{\\beta}_{1})}{\\exp(\\hat{\\beta}_{1}) - \\exp(\\beta_{1}^{L})}\n$$\n我们已知 MLE $\\hat{\\beta}_{1} = 0.035$ 和 CI 端点 $\\beta_{1}^{L}=-0.28$ 和 $\\beta_{1}^{U}=0.35$。首先，我们计算优势比的点估计和计算比率 $R$ 所需的值：\nOR 的点估计：$\\exp(\\hat{\\beta}_{1}) = \\exp(0.035) \\approx 1.0356$\n区间上界：$\\exp(\\beta_{1}^{U}) = \\exp(0.35) \\approx 1.4191$\n区间下界：$\\exp(\\beta_{1}^{L}) = \\exp(-0.28) \\approx 0.7558$\n\n现在，我们使用更高的精度计算 $R$ 的分子和分母，以避免舍入误差：\n分子（上臂）：$\\exp(0.35) - \\exp(0.035) \\approx 1.4190675 - 1.0356193 = 0.3834482$\n分母（下臂）：$\\exp(0.035) - \\exp(-0.28) \\approx 1.0356193 - 0.7557837 = 0.2798356$\n\n该比率为：\n$$\nR = \\frac{0.3834482}{0.2798356} \\approx 1.37025\n$$\n四舍五入到四位有效数字，$R \\approx 1.370$。\n\n**关于 $R \\neq 1$ 的解释：**\n$\\beta_{1}$ 的瓦尔德置信区间是在对数优势尺度上围绕点估计 $\\hat{\\beta}_{1}$ 对称构建的。也就是说，对于某个误差范围 $c > 0$，有 $[\\beta_{1}^{L}, \\beta_{1}^{U}] = [\\hat{\\beta}_{1} - c, \\hat{\\beta}_{1} + c]$。对于给定值， $c = 0.35 - 0.035 = 0.315$，并且 $\\hat{\\beta}_{1} - \\beta_1^L = 0.035 - (-0.28) = 0.315$。对称性成立。\n\n优势比区间的不对称性源于从对数优势尺度到优势比尺度的变换是非线性的，即通过指数函数 $f(\\beta_1) = \\exp(\\beta_1)$。指数函数是严格凸的，意味着其斜率总是在增加。因此，对于一个固定的步长 $c$，从 $\\hat{\\beta}_1$ 移动到 $\\hat{\\beta}_1+c$ 时函数值的增加量，要大于从 $\\hat{\\beta}_1-c$ 移动到 $\\hat{\\beta}_1$ 时的增加量。数学上：\n$$\n\\exp(\\hat{\\beta}_1 + c) - \\exp(\\hat{\\beta}_1) > \\exp(\\hat{\\beta}_1) - \\exp(\\hat{\\beta}_1 - c) \\quad \\text{对于 } c>0\n$$\n$R$ 的分子是在优势比尺度上 CI 的上臂长度，即 $\\exp(\\beta_{1}^{U}) - \\exp(\\hat{\\beta}_{1})$，而分母是下臂的长度，即 $\\exp(\\hat{\\beta}_{1}) - \\exp(\\beta_{1}^{L})$。由于指数函数的凸性，对于任何非退化的 CI（即 $c>0$ 的情况），分子总是大于分母。因此，$R$ 通常大于 $1$。\n\n我们可以推导出 $R$ 的一个通用表达式：\n$$\nR = \\frac{\\exp(\\hat{\\beta}_{1} + c) - \\exp(\\hat{\\beta}_{1})}{\\exp(\\hat{\\beta}_{1}) - \\exp(\\hat{\\beta}_{1} - c)} = \\frac{\\exp(\\hat{\\beta}_{1})(\\exp(c) - 1)}{\\exp(\\hat{\\beta}_{1})(1 - \\exp(-c))} = \\frac{\\exp(c) - 1}{1 - \\frac{1}{\\exp(c)}} = \\frac{\\exp(c) - 1}{\\frac{\\exp(c)-1}{\\exp(c)}} = \\exp(c)\n$$\n由于置信区间的宽度非零，我们必须有 $c > 0$，这意味着 $R = \\exp(c) > \\exp(0) = 1$。由 $R$ 量化的不对称性完全由对数优势尺度上的误差范围 $c$ 决定。对于本问题， $R = \\exp(0.315) \\approx 1.370$。这证实了我们的直接计算。\n\n最终的数值结果，四舍五入到四位有效数字，是：\n- OR CI 的下界：$0.7558$\n- OR CI 的上界：$1.419$\n- 不对称比 $R$：$1.370$", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.7558 & 1.419 & 1.370\n\\end{pmatrix}\n}\n$$", "id": "3133369"}]}
{"hands_on_practices": [{"introduction": "我们实践的第一步是从一个经典的组合问题开始，它完美地展示了如何通过递归思想将一个看似复杂的问题转化为一个简洁的差分方程。这个练习将引导你如何从问题的基本规则（例如，上楼梯时可以迈出的步数）出发，建立一个数学模型。掌握这种从第一性原理出发进行建模的能力，是利用差分方程解决现实世界中各种离散问题的基础。[@problem_id:2385634]", "problem": "在一个计算工程应用中，一个离散时间爬升控制器模拟了攀登一个由 $N$ 个相同梯级组成的楼梯。在每个离散时间步，控制器指令一次移动，使攀登者前进 $1$、$2$ 或 $3$ 个梯级。设 $W_{N}$ 表示从第 $0$ 个梯级开始，恰好到达第 $N$ 个梯级所需的不同有序指令序列的数量。\n\n使用计数的第一性原理和所述的物理约束，推导 $W_{N}$ 满足的线性差分方程，以及该场景所蕴含的必要初始条件。然后，使用你的模型，确定 $W_{30}$ 的值。\n\n答案规格：\n- 提供 $W_{30}$ 的精确整数值作为最终答案（无需四舍五入）。\n- 无需物理单位。", "solution": "首先将对问题陈述进行严格的验证。\n\n**步骤1：提取已知条件**\n- 要攀登的梯级总数为 $N$。\n- 攀登者从第 $0$ 个梯级开始，必须到达第 $N$ 个梯级。\n- 在每个离散时间步，控制器可以指令一次移动 $1$、$2$ 或 $3$ 个梯级。\n- $W_N$ 定义为到达第 $N$ 个梯级的不同有序指令序列的数量。\n- 目标是推导 $W_N$ 的线性差分方程，陈述初始条件，并计算 $W_{30}$。\n\n**步骤2：使用提取的已知条件进行验证**\n将根据所需标准对问题进行分析。\n- **科学依据**：该问题是组合数学中的一个经典练习，特别涉及递推关系（也称为差分方程）。这是离散数学中的一个基本课题，而离散数学是计算科学与工程的基石。该模型是一种抽象，但在数学上和逻辑上是合理的。它没有违反任何科学原理。\n- **适定性**：该问题定义清晰。变量 $W_N$ 有精确的含义。约束（允许的移动）是明确的。问题要求推导控制方程、初始条件和一个具体值，所有这些都可以从前提中推导出来。存在一个唯一且有意义的解。\n- **客观性**：问题陈述使用精确、客观的语言表达，没有主观或模糊的术语。\n- **完整性**：虽然初始条件没有作为明确的数字给出，但问题陈述它们“由场景所蕴含”。从第一性原理推导这些条件是解决此类问题的标准部分。所提供的信息足以得到完整解。\n\n**步骤3：结论与行动**\n该问题有科学依据、适定且客观。它被视为**有效**。我们可以继续进行求解。\n\n这个问题的核心在于为 $W_N$ 建立一个递推关系。我们将从计数的第一性原理来推导它。\n\n考虑到达第 $N$ 个梯级的所有可能指令序列的集合。任何这样的序列都必须以三种允许的移动之一结束：大小为 $1$、$2$ 或 $3$ 的一步。我们可以根据最后一步移动，将所有有效序列的集合划分为三个互斥的子集。\n1.  **最后一步是 $1$ 个梯级**：如果最后一步是大小为 $1$ 的一步，那么攀登者在此移动之前必定位于第 $N-1$ 个梯级。根据定义，到达第 $N-1$ 个梯级的方式数量为 $W_{N-1}$。这些序列中的每一个都可以通过附加一个 $1$ 梯级的步骤来唯一地扩展为到达第 $N$ 个梯级的序列。因此，有 $W_{N-1}$ 个这样的序列。\n2.  **最后一步是 $2$ 个梯级**：类似地，如果最后一步是大小为 $2$ 的一步，那么攀登者必定位于第 $N-2$ 个梯级。到达第 $N-2$ 个梯级的方式数量为 $W_{N-2}$。这种类型的序列有 $W_{N-2}$ 个。\n3.  **最后一步是 $3$ 个梯级**：如果最后一步是大小为 $3$ 的一步，那么攀登者必定来自第 $N-3$ 个梯级。到达这个位置的方式数量为 $W_{N-3}$。\n\n由于这三种情况是穷尽且互斥的，到达第 $N$ 个梯级的总方式数量 $W_N$ 是每种情况下方式数量的总和。这就得到了线性齐次常系数差分方程：\n$$W_N = W_{N-1} + W_{N-2} + W_{N-3}$$\n该方程在 $N \\ge 3$ 时有效。\n\n接下来，我们必须根据物理场景所蕴含的意义确定初始条件。一个三阶差分方程需要三个初始条件来唯一地定义序列。我们将确定 $W_0$、$W_1$ 和 $W_2$。\n- **$W_0$**：这是从第 $0$ 个梯级开始到达第 $0$ 个梯级的方式数量。只有一种方法可以做到这一点：不走任何步（一个空的指令序列）。因此，$W_0 = 1$。这个基本情况在概念上是必要的，以使递推有基础。\n- **$W_1$**：要到达第 $1$ 个梯级，只有一种可能的移动序列：一个大小为 $1$ 的单步。因此，$W_1 = 1$。\n- **$W_2$**：要到达第 $2$ 个梯级，有两种可能的序列：($1,1$) 或 ($2$)。因此，$W_2 = 2$。\n\n我们可以验证这些初始条件与推导出的递推关系的一致性。关系式 $W_3 = W_2 + W_1 + W_0$ 应该成立。\n通过对 $N=3$ 的直接枚举：序列为 ($1,1,1$)、($1,2$)、($2,1$) 和 ($3$)。共有 $4$ 种方式，所以 $W_3 = 4$。\n使用递推关系和我们的初始值：$W_3 = W_2 + W_1 + W_0 = 2 + 1 + 1 = 4$。这些值是一致的。\n\n问题现在简化为使用以下递推关系计算 $W_{30}$：\n$$W_N = W_{N-1} + W_{N-2} + W_{N-3}$$\n初始条件为 $W_0 = 1$、$W_1 = 1$ 和 $W_2 = 2$。\n\n我们迭代地计算序列的各项：\n$W_0 = 1$\n$W_1 = 1$\n$W_2 = 2$\n$W_3 = W_2 + W_1 + W_0 = 2 + 1 + 1 = 4$\n$W_4 = W_3 + W_2 + W_1 = 4 + 2 + 1 = 7$\n$W_5 = 7 + 4 + 2 = 13$\n$W_6 = 13 + 7 + 4 = 24$\n$W_7 = 24 + 13 + 7 = 44$\n$W_8 = 44 + 24 + 13 = 81$\n$W_9 = 81 + 44 + 24 = 149$\n$W_{10} = 149 + 81 + 44 = 274$\n$W_{11} = 274 + 149 + 81 = 504$\n$W_{12} = 504 + 274 + 149 = 927$\n$W_{13} = 927 + 504 + 274 = 1705$\n$W_{14} = 1705 + 927 + 504 = 3136$\n$W_{15} = 3136 + 1705 + 927 = 5768$\n$W_{16} = 5768 + 3136 + 1705 = 10609$\n$W_{17} = 10609 + 5768 + 3136 = 19513$\n$W_{18} = 19513 + 10609 + 5768 = 35890$\n$W_{19} = 35890 + 19513 + 10609 = 66012$\n$W_{20} = 66012 + 35890 + 19513 = 121415$\n$W_{21} = 121415 + 66012 + 35890 = 223317$\n$W_{22} = 223317 + 121415 + 66012 = 410744$\n$W_{23} = 410744 + 223317 + 121415 = 755476$\n$W_{24} = 755476 + 410744 + 223317 = 1389537$\n$W_{25} = 1389537 + 755476 + 410744 = 2555757$\n$W_{26} = 2555757 + 1389537 + 755476 = 4700770$\n$W_{27} = 4700770 + 2555757 + 1389537 = 8646064$\n$W_{28} = 8646064 + 4700770 + 2555757 = 15902591$\n$W_{29} = 15902591 + 8646064 + 4700770 = 29249425$\n$W_{30} = 29249425 + 15902591 + 8646064 = 53798080$\n\n到达第 $30$ 个梯级的不同有序指令序列的数量是 $W_{30}$。", "answer": "$$\n\\boxed{53798080}\n$$", "id": "2385634"}, {"introduction": "接下来，我们将差分方程应用于一个更具现实意义的场景：金融系统建模。这个练习模拟了一个包含周期性收益和固定费用的投资账户，这在金融工程和经济学中非常常见。通过解决这个问题，你将学会如何构建和求解一阶线性非齐次差分方程，这对于分析那些同时包含增长和消耗因素的动态系统至关重要。[@problem_id:2385573]", "problem": "一个加密货币钱包被用于权益质押。在每个月度周期结束时，网络会向该钱包计入一笔权益质押奖励，然后扣除一笔固定的维护费。具体来说，设 $V_k$ 表示第 $k$ 个月度维护费扣除后的即时钱包余额，初始条件为 $V_0 = 1000$ (代币)。网络宣传的年化利率 (APR) 为 $0.12$，该利率被平均分配到 $12$ 个相等的月度周期中，并且在每月奖励计入后，网络会立即扣除一笔 $2$ (代币) 的固定维护费。假设代币是无限可分的，并且在中间步骤不发生取整。\n\n使用第一性原理：\n1. 写出关联 $V_{k+1}$ 和 $V_k$ 的差分方程。\n2. 以闭合形式求解该差分方程，得到 $V_n$ 作为 $n$、$V_0$、月度奖励率和月度扣除额的函数。\n3. 根据给定的参数计算 $V_{24}$。将你的最终数值答案四舍五入到四位有效数字。以代币为单位表示最终余额。", "solution": "首先对问题进行验证。\n\n**步骤1：提取已知条件**\n- $V_k$：第 $k$ 次月度维护费扣除后的钱包余额。\n- 初始条件：$V_0 = 1000$ 代币。\n- 年化利率 (APR)：$0.12$。\n- APR被平均分配到 $12$ 个月度周期。\n- 每月固定维护费扣除：$d = 2$ 代币。\n- 扣款在月度奖励计入后进行。\n- 要求写出关于 $V_k$ 的 $V_{k+1}$ 的差分方程。\n- 要求求解 $V_n$ 的差分方程。\n- 要求计算 $V_{24}$ 并四舍五入到四位有效数字。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题是一个使用一阶线性差分方程进行离散建模的定义明确的练习。\n- **科学依据：** 是。该问题基于标准的金融数学，特别是带有定期取款的复利。这是递推关系的一个基本应用，而递推关系是计算工程和应用数学中的核心课题。\n- **适定性：** 是。所有必要的参数和初始条件都已提供。操作顺序（先奖励，后扣款）已明确说明，消除了歧义。问题结构能够导出一个唯一的、稳定的且有意义的解。\n- **客观性：** 是。问题以精确、客观的语言陈述，没有主观断言。\n\n**步骤3：结论与行动**\n该问题被判定为**有效**。将提供解答。\n\n该问题需要一个三部分的解答：推导差分方程、求解该方程、以及对特定参数进行求值。\n\n**第1部分：差分方程的推导**\n\n设 $V_k$ 为第 $k$ 个月度周期维护费扣除后的即时钱包余额。因此，第 $(k+1)$ 个周期开始时的余额为 $V_k$。\n\n给定的年化利率 (APR) 为 $0.12$。它被平均分配到 $12$ 个月度周期。月度奖励率（记为 $r$）为：\n$$r = \\frac{0.12}{12} = 0.01$$\n在第 $(k+1)$ 个月末，根据余额 $V_k$ 向钱包中计入一笔奖励。奖励金额为 $r V_k$。计入奖励后的余额变为：\n$$V_k + r V_k = (1+r) V_k$$\n在奖励计入后，立即扣除一笔固定的维护费，记为 $d$。这里，$d=2$ 代币。扣除后的余额为 $V_{k+1}$。\n因此，$V_{k+1}$ 和 $V_k$ 之间的关系是：\n$$V_{k+1} = (1+r) V_k - d$$\n这就是为该系统建模的一阶线性非齐次差分方程。代入 $r$ 和 $d$ 的给定值，具体方程为：\n$$V_{k+1} = 1.01 V_k - 2$$\n\n**第2部分：差分方程的闭合形式解**\n\n该方程的一般形式为 $V_{k+1} = a V_k + b$，其中 $a = 1+r$ 且 $b = -d$。\n为求解此方程，我们首先寻找一个不动点或平衡解 $V^*$，使得 $V_{k+1} = V_k = V^*$。\n$$V^* = a V^* + b$$\n$$V^* (1-a) = b$$\n$$V^* = \\frac{b}{1-a}$$\n代入 $a = 1+r$ 和 $b = -d$：\n$$V^* = \\frac{-d}{1 - (1+r)} = \\frac{-d}{-r} = \\frac{d}{r}$$\n现在，我们定义一个新变量 $U_k = V_k - V^*$。$U_k$ 的递推关系为：\n$$U_{k+1} = V_{k+1} - V^* = (a V_k + b) - V^*$$\n因为 $V^* = a V^* + b$，所以我们有 $b = V^* - a V^*$。将此代入 $U_{k+1}$ 的表达式中：\n$$U_{k+1} = a V_k + (V^* - a V^*) - V^* = a V_k - a V^* = a(V_k - V^*) = a U_k$$\n关系式 $U_{k+1} = a U_k$ 描述了一个等比数列。其解为 $U_n = a^n U_0$。\n代回 $V_n$ 和 $V_0$：\n$$V_n - V^* = a^n (V_0 - V^*)$$\n$$V_n = a^n (V_0 - V^*) + V^*$$\n最后，代入 $a = 1+r$ 和 $V^* = \\frac{d}{r}$，我们得到 $V_n$ 作为 $n$、$V_0$、$r$ 和 $d$ 的函数的闭合形式解：\n$$V_n = (1+r)^n \\left( V_0 - \\frac{d}{r} \\right) + \\frac{d}{r}$$\n\n**第3部分：$V_{24}$ 的计算**\n\n我们被要求计算 $24$ 个月后的余额，即 $V_{24}$。给定的参数是：\n- 初始余额 $V_0 = 1000$。\n- 月度奖励率 $r = 0.01$。\n- 月度扣除额 $d = 2$。\n- 周期数 $n = 24$。\n\n首先，我们计算项 $\\frac{d}{r}$：\n$$\\frac{d}{r} = \\frac{2}{0.01} = 200$$\n现在，将参数代入闭合形式解中：\n$$V_{24} = (1+0.01)^{24} \\left( 1000 - 200 \\right) + 200$$\n$$V_{24} = (1.01)^{24} (800) + 200$$\n我们现在必须计算 $(1.01)^{24}$ 的值：\n$$(1.01)^{24} \\approx 1.2697346485$$\n将此值代回 $V_{24}$ 的表达式中：\n$$V_{24} \\approx 1.2697346485 \\times 800 + 200$$\n$$V_{24} \\approx 1015.7877188 + 200$$\n$$V_{24} \\approx 1215.7877188$$\n问题要求将最终答案四舍五入到四位有效数字。该数字是 $1215.7877188...$。前四位有效数字是 $1$、$2$、$1$ 和 $5$。第五位是 $7$，大于或等于 $5$，所以我们将第四位有效数字 ($5$) 向上取整为 $6$。\n最终余额，四舍五入到四位有效数字，是 $1216$ 代币。", "answer": "$$\n\\boxed{1216}\n$$", "id": "2385573"}, {"introduction": "最后，我们来挑战一个“逆向工程”问题，这在系统识别和控制理论中是一个核心任务。与之前根据系统规则预测其行为不同，这次我们已知系统的输出响应，需要反推出其内部的动力学方程。这个问题不仅能让你熟练运用Z变换这一强大工具，还能让你体验到如何从外部观测数据中揭示一个“黑箱”系统的内在运行机制。[@problem_id:2385566]", "problem": "一个离散时间、单输入单输出 (SISO)、因果、线性时不变 (LTI) 系统由一个首一线性常系数差分方程描述，该方程关联了输入序列 $u_n$ 和输出序列 $y_n$。系统初始状态为静止。当系统由单位阶跃输入 $u_n$（定义为 $n \\ge 0$ 时 $u_n = 1$，$n < 0$ 时 $u_n = 0$）驱动时，在 $n \\ge 0$ 时观测到的输出为\n$$\ny_n = 1 - \\left(\\frac{1}{2}\\right)^{n}.\n$$\n假设在所有此类因果和 LTI 的首一方程中，该控制方程是阶数最小的。请确定以下规范形式的差分方程的系数\n$$\ny_n + a_1 y_{n-1} = b_0 u_n + b_1 u_{n-1}.\n$$\n请按顺序以行矩阵 $\\big(a_1, b_0, b_1\\big)$ 的形式给出你的最终答案。无需四舍五入。", "solution": "所述问题具有科学依据，提法恰当且客观。它提出了一个线性时不变 (LTI) 系统分析中的标准问题，可以使用既定方法解决。所有必要信息均已提供，问题没有矛盾或歧义。因此，将提供解答。\n\n该系统由以下形式的线性常系数差分方程描述：\n$$\ny_n + a_1 y_{n-1} = b_0 u_n + b_1 u_{n-1}\n$$\n这是一个一阶 LTI 系统。输入 $u_n$ 和输出 $y_n$ 之间的关系可以在 Z 域中进行有效分析。假设系统是因果的且从静止状态开始（即对于 $k < 0$ 有 $y_k = 0$），对差分方程进行 Z 变换可得：\n$$\n\\mathcal{Z}\\{y_n\\} + a_1 \\mathcal{Z}\\{y_{n-1}\\} = b_0 \\mathcal{Z}\\{u_n\\} + b_1 \\mathcal{Z}\\{u_{n-1}\\}\n$$\n令 $Y(z) = \\mathcal{Z}\\{y_n\\}$ 且 $U(z) = \\mathcal{Z}\\{u_n\\}$。利用 Z 变换的时移特性 $\\mathcal{Z}\\{x_{n-k}\\} = z^{-k}X(z)$，我们得到：\n$$\nY(z) + a_1 z^{-1}Y(z) = b_0 U(z) + b_1 z^{-1}U(z)\n$$\n提出公因式 $Y(z)$ 和 $U(z)$：\n$$\nY(z)(1 + a_1 z^{-1}) = U(z)(b_0 + b_1 z^{-1})\n$$\n系统的传递函数 $H(z)$ 定义为输出变换与输入变换之比：\n$$\nH(z) = \\frac{Y(z)}{U(z)} = \\frac{b_0 + b_1 z^{-1}}{1 + a_1 z^{-1}}\n$$\n我们的目标是通过首先找到给定输入-输出对的特定 $H(z)$ 来确定系数 $a_1$，$b_0$ 和 $b_1$。\n\n输入是单位阶跃序列，定义为 $n \\ge 0$ 时 $u_n = 1$，$n < 0$ 时 $u_n = 0$。其 Z 变换为：\n$$\nU(z) = \\sum_{n=0}^{\\infty} u_n z^{-n} = \\sum_{n=0}^{\\infty} z^{-n} = \\frac{1}{1-z^{-1}}\n$$\n对于 $n \\ge 0$，输出序列由 $y_n = 1 - \\left(\\frac{1}{2}\\right)^{n}$ 给出。我们可以将其表示为 $n \\ge 0$ 时两个序列的差：单位阶跃序列和一个衰减指数序列。输出的 Z 变换通过对每一项应用变换得到：\n$$\nY(z) = \\mathcal{Z}\\left\\{1 \\cdot u_n - \\left(\\frac{1}{2}\\right)^{n} u_n\\right\\} = \\mathcal{Z}\\{u_n\\} - \\mathcal{Z}\\left\\{\\left(\\frac{1}{2}\\right)^{n} u_n\\right\\}\n$$\n使用标准的 Z 变换对，我们有：\n$$\nY(z) = \\frac{1}{1-z^{-1}} - \\frac{1}{1 - \\frac{1}{2}z^{-1}}\n$$\n为了得到 $Y(z)$ 的单一有理表达式，我们合并各项：\n$$\nY(z) = \\frac{\\left(1 - \\frac{1}{2}z^{-1}\\right) - \\left(1 - z^{-1}\\right)}{\\left(1-z^{-1}\\right)\\left(1 - \\frac{1}{2}z^{-1}\\right)} = \\frac{1 - \\frac{1}{2}z^{-1} - 1 + z^{-1}}{\\left(1-z^{-1}\\right)\\left(1 - \\frac{1}{2}z^{-1}\\right)} = \\frac{\\frac{1}{2}z^{-1}}{\\left(1-z^{-1}\\right)\\left(1 - \\frac{1}{2}z^{-1}\\right)}\n$$\n现在，我们可以使用 $Y(z)$ 和 $U(z)$ 来计算系统的传递函数 $H(z)$：\n$$\nH(z) = \\frac{Y(z)}{U(z)} = \\frac{\\frac{\\frac{1}{2}z^{-1}}{\\left(1-z^{-1}\\right)\\left(1 - \\frac{1}{2}z^{-1}\\right)}}{\\frac{1}{1-z^{-1}}}\n$$\n消去分子和分母中的公因式 $(1-z^{-1})$ 得到：\n$$\nH(z) = \\frac{\\frac{1}{2}z^{-1}}{1 - \\frac{1}{2}z^{-1}}\n$$\n差分方程为最小阶的条件是满足的，因为一个零阶系统 $y_n = b_0 u_n$ 将意味着对于 $n \\ge 0$，$y_n$ 是一个常数，这与给定的输出 $y_n = 1 - (\\frac{1}{2})^n$ 相矛盾。因此，一阶系统是可能的最小阶系统。\n\n通过将推导出的传递函数与通用形式进行比较，我们可以确定这些系数。\n$$\nH(z) = \\frac{b_0 + b_1 z^{-1}}{1 + a_1 z^{-1}} = \\frac{0 + \\frac{1}{2}z^{-1}}{1 + \\left(-\\frac{1}{2}\\right)z^{-1}}\n$$\n通过令分子和分母中 $z^{-1}$ 相应次方的系数相等，我们发现：\n$$\nb_0 = 0\n$$\n$$\nb_1 = \\frac{1}{2}\n$$\n$$\na_1 = -\\frac{1}{2}\n$$\n因此，差分方程的系数为 $a_1 = -\\frac{1}{2}$，$b_0 = 0$ 和 $b_1 = \\frac{1}{2}$。得到的差分方程是：\n$$\ny_n - \\frac{1}{2} y_{n-1} = \\frac{1}{2} u_{n-1}\n$$\n该方程正确地描述了给定的系统响应。所需系数已按指定矩阵形式汇总。", "answer": "$$\n\\boxed{\\begin{pmatrix} -\\frac{1}{2} & 0 & \\frac{1}{2} \\end{pmatrix}}\n$$", "id": "2385566"}]}
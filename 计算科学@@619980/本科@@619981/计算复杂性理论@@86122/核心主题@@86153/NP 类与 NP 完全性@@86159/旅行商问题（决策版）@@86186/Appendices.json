{"hands_on_practices": [{"introduction": "理论学习之后，最好的消化方式莫过于亲自动手实践。本节的第一个练习旨在揭开旅行商问题（TSP）的神秘面纱，让你通过解决一个规模很小、易于处理的具体实例来获得直观感受。通过为一家小型无人机公司规划最短配送路线，你将体会到穷举搜索是如何在少量节点的情况下解决决策问题的，从而为理解更复杂情况下的计算挑战打下坚实的基础。[@problem_id:1464546]", "problem": "一家名为“AeroSwift”的小型无人机配送公司，正在为一架无人机规划配送路线。该无人机必须从公司总部（H）出发，访问位于A、B、C三点的三个客户，然后返回总部。每个客户必须且仅被访问一次。所有地点对之间的距离是已知的，并在下表中给出。所有距离的单位均为米，且是对称的，即从地点X到Y的距离与从Y到X的距离相同。\n\n| 从/到 | H   | A   | B   | C   |\n|-------|-----|-----|-----|-----|\n| H     | 0   | 150 | 200 | 250 |\n| A     | 150 | 0   | 300 | 400 |\n| B     | 200 | 300 | 0   | 350 |\n| C     | 250 | 400 | 350 | 0   |\n\n公司管理层正在严格的燃料预算下研究该路线的可行性。他们面临的问题是旅行商问题决策版本（TSP-DECISION）的一个具体实例，该问题旨在判断是否存在一条总长度不超过给定界限 $K$ 的巡回路径。\n\n对于这条特定路线，公司设定的最大允许总巡回长度为 $K = 1075$ 米。是否存在满足此预算约束的有效巡回路径？你的任务是通过找出可能的最短巡回路径的长度并将其与 $K$ 进行比较来解决这个TSP-DECISION问题。\n\n以下哪个陈述正确地回答了问题并提供了正确的理由？\n\nA. 是的，存在满足约束的巡回路径，因为可能的最短巡回路径的总长度为1050米。\n\nB. 是的，存在满足约束的巡回路径，且可能的最短巡回路径的总长度为1100米。\n\nC. 不，不存在满足约束的巡回路径，因为可能的最短巡回路径的总长度为1100米。\n\nD. 不，不存在满足约束的巡回路径，因为可能的最短巡回路径的总长度为1150米。\n\nE. 对于一个通用的TSP实例，无法给出确切答案，但对于这个小案例，最短巡回路径是1075米。", "solution": "我们的任务是解决一个TSP-DECISION的具体实例：确定是否存在一个从$H$出发并最终返回$H$，且恰好访问$A$、$B$、$C$各一次的哈密顿回路（巡回路径），其总长度不超过界限$K=1075$。通过计算可能的最短巡回路径长度并将其与$K$进行比较，即可做出决策。\n\n对于一个起点和终点固定在$H$且有三个中间节点的情况，每条可能的巡回路径对应于客户的一种排列，总共有 $3!=6$ 种排列。对于$(A,B,C)$的任意排列$(p_{1},p_{2},p_{3})$，巡回路径长度为\n$$\nL(H,p_{1},p_{2},p_{3},H) = d(H,p_{1}) + d(p_{1},p_{2}) + d(p_{2},p_{3}) + d(p_{3},H),\n$$\n其中$d(X,Y)$是表中给出的对称距离。\n\n使用给定的距离计算所有六条巡回路径的长度：\n1. $(A,B,C)$:\n$$\nL_{1} = d(H,A) + d(A,B) + d(B,C) + d(C,H) = 150 + 300 + 350 + 250 = 1050.\n$$\n2. $(A,C,B)$:\n$$\nL_{2} = d(H,A) + d(A,C) + d(C,B) + d(B,H) = 150 + 400 + 350 + 200 = 1100.\n$$\n3. $(B,A,C)$:\n$$\nL_{3} = d(H,B) + d(B,A) + d(A,C) + d(C,H) = 200 + 300 + 400 + 250 = 1150.\n$$\n4. $(B,C,A)$:\n$$\nL_{4} = d(H,B) + d(B,C) + d(C,A) + d(A,H) = 200 + 350 + 400 + 150 = 1100.\n$$\n5. $(C,A,B)$:\n$$\nL_{5} = d(H,C) + d(C,A) + d(A,B) + d(B,H) = 250 + 400 + 300 + 200 = 1150.\n$$\n6. $(C,B,A)$:\n$$\nL_{6} = d(H,C) + d(C,B) + d(B,A) + d(A,H) = 250 + 350 + 300 + 150 = 1050.\n$$\n\n因此，可能的最短巡回路径长度为\n$$\nL_{\\min} = \\min\\{1050, 1100, 1150, 1100, 1150, 1050\\} = 1050.\n$$\n\n为了回答这个TSP-DECISION问题，我们将$L_{\\min}$与$K$进行比较：\n$$\nL_{\\min} = 1050 \\leq K = 1075.\n$$\n因此，存在满足约束的有效巡回路径，并且选项中的正确陈述是，可能的最短巡回路径总长度为$1050$，因此满足预算要求。这对应于选项A。", "answer": "$$\\boxed{A}$$", "id": "1464546"}, {"introduction": "在上一个练习的基础上，我们现在来探讨一个思想实验，以揭示旅行商问题的核心组合结构。通过假设所有路径权重都相等，我们将问题的优化层面（寻找最短路径）暂时剥离，从而聚焦于其根本的连通性挑战。这个练习将帮助你理解TSP决策版本与图论中另一个著名问题——哈密顿圈问题之间的深刻联系，让你看到复杂问题在特定条件下的简化形态。[@problem_id:1464558]", "problem": "旅行商问题 - 判定版本 (TSP-DECISION) 是计算机科学中一个著名的问题。其形式化定义如下：给定一个有 $n$ 个顶点的完全图 $G$、一个为每条边赋予正整数权重的函数，以及一个正整数预算 $B$，是否存在一个总权重小于或等于 $B$ 的回路（即访问每个顶点恰好一次的简单环路）？\n\n现在，考虑该问题的一个特殊实例。给定一个有 $n$ 个顶点的图，其中 $n \\geq 3$。对于每对不同的顶点，如果它们之间存在一条边，则其权重恰好为 1。我们不保证该图是完全图。对于这种特定类型的图，我们将 TSP-DECISION 问题的预算设定为恰好 $B=n$。\n\n判断这个 TSP-DECISION 特殊实例的答案是否为“是”，等价于在同一个 $n$ 顶点的图上解决以下哪个基本图问题？\n\nA. 哈密顿回路问题：判断图是否包含一个访问每个顶点恰好一次的回路。\n\nB. 欧拉回路问题：判断图中是否存在一条访问每条边恰好一次且起终点相同的迹。\n\nC. 最小生成树问题：找到图中具有最小可能总边权重的生成树。\n\nD. 图二分性问题：判断图的顶点是否可以被划分为两个不相交的独立集。\n\nE. 所有顶点对最短路径问题：找到图中每对顶点之间的最短路径距离。", "solution": "设 $G=(V,E)$，其中 $|V|=n$ 且 $n \\ge 3$。对于每条边 $e \\in E$，权重函数满足 $w(e)=1$。该 TSP-DECISION 实例询问是否存在一个总权重至多为预算 $B=n$ 的回路，即访问每个顶点恰好一次的简单环路。\n\n根据定义，任何在 $G$ 中访问所有 $n$ 个顶点恰好一次的回路都是一个哈密顿回路，且恰好使用 $n$ 条边。由于每条使用的边的权重为 1，任何这样的回路 $T$ 的总权重为\n$$\nW(T)=\\sum_{e \\in T} w(e)=\\sum_{e \\in T} 1 = n.\n$$\n因此，TSP-DECISION 的问题“是否存在一个总权重 $\\le B$（其中 $B=n$）的回路？”等价于询问是否存在哈密顿回路，因为：\n- 如果 $G$ 有一个哈密顿回路 $H$，那么 $W(H)=n \\le B$，所以 TSP-DECISION 的答案是“是”。\n- 反之，如果 TSP-DECISION 的答案是“是”，那么存在一个回路 $T$ 满足 $W(T) \\le n$。但任何访问所有 $n$ 个顶点的回路都恰好使用 $n$ 条权重为 1 的边，所以 $W(T)=n$，且 $T$ 是一个哈密顿回路。\n\n因此，在这个单位权重、不一定是完全图的图上，判定 $B=n$ 的 TSP-DECISION 问题，完全等价于判定 $G$ 是否有哈密顿回路。这与选项 A 一致。其他列出的问题（欧拉回路、最小生成树、二分性、以及所有顶点对最短路径）在这些约束条件下不等价于哈密顿回路的存在性。", "answer": "$$\\boxed{A}$$", "id": "1464558"}, {"introduction": "现在我们已经理解了TSP的结构及其与哈密顿圈的联系，让我们更进一步，探索如何利用它作为一个计算工具来解决其他问题。这个练习将挑战你使用一个假设的“TSP决策问题预言机”来解决一个相关但不同的问题：寻找两点之间的哈密顿路径。这种将一个问题转化为另一个问题的技巧被称为“归约”（reduction），它是计算复杂性理论的基石，展示了解决一个核心难题如何能帮助我们攻克众多其他挑战。[@problem_id:1464538]", "problem": "在计算复杂性理论领域，许多问题通过将其归约到已知的难问题来进行分析。考虑一个完全无向图 $G=(V, E, w)$，其中 $V$ 是顶点集，$E$ 是边集，而 $w: E \\to \\mathbb{R}^{+}$ 是一个正权重函数，我们有以下两个判定问题。\n\n1.  **s-t 哈密顿路径判定问题 (s-t-HAM-PATH-DECISION)**：给定图 $G$、两个不同的顶点 $s, t \\in V$ 和一个预算 $K  0$，是否存在一条从 $s$ 开始到 $t$ 结束的简单路径，该路径恰好访问 $V$ 中每个顶点一次，且总权重至多为 $K$？\n\n2.  **旅行商判定问题 (TSP-DECISION)**：给定一个图 $G'=(V', E', w')$ 和一个预算 $B  0$，是否存在一个总权重至多为 $B$ 的回路（一个恰好访问 $V'$ 中每个顶点一次的简单环路）？\n\n假设你有一个假设的预言机，一个可以在单个计算步骤内解决任何 **TSP-DECISION** 实例的黑箱机器。你的任务是解决一个关于图 $G$（拥有 $|V|=n$ 个顶点）、指定顶点 $s$ 和 $t$ 以及预算 $K$ 的 **s-t-HAM-PATH-DECISION** 实例。你可以通过构造一个新图 $G'$ 和一个新预算 $B$，然后用实例 $(G', B)$ 查询预言机来完成这个任务。预言机对 `TSP-DECISION(G', B)` 的结果 (YES/NO) 必须与原始 `s-t-HAM-PATH-DECISION(G, s, t, K)` 实例的答案相同。\n\n以下哪一项描述了从 `s-t-HAM-PATH-DECISION` 实例 $(G, s, t, K)$ 到 `TSP-DECISION` 实例 $(G', B)$ 的一个正确且有效的变换？设 $M$ 是一个远大于 $G$ 中任何可能路径成本的数（实际上是一个无限大的成本）。\n\nA. 从 $G$ 构造 $G'$，方法是添加一个新顶点 $x$。$G$ 的边和权重在 $G'$ 中保留。添加两条新边 $(s, x)$ 和 $(t, x)$，权重均为 0。对于每个其他顶点 $v \\in V \\setminus \\{s,t\\}$，添加一条权重为 $M$ 的边 $(v, x)$。设置预算 $B=K$。\n\nB. 设 $G'$ 与 $G$ 相同，只是边 $(s, t)$ 的权重被设置为 0。设置预算 $B=K$。\n\nC. 从 $G$ 构造 $G'$，方法是添加一个新顶点 $x$。$G$ 的边和权重在 $G'$ 中保留。对于 $V$ 中的每个顶点 $v$，添加一条权重为 0 的新边 $(v, x)$。设置预算 $B=K$。\n\nD. 设 $G'$ 与 $G$ 相同。设置预算 $B=K$。", "solution": "我们必须构造一个多项式时间变换，将一个关于完全无向正权图 $G=(V,E,w)$、不同顶点 $s,t \\in V$ 和预算 $K$ 的 $s$-$t$-HAM-PATH-DECISION 实例，转换为一个 TSP-DECISION 实例 $(G',B)$，使得\n$$\n\\text{TSP-DECISION}(G',B)=\\text{YES} \\quad \\Longleftrightarrow \\quad \\text{$s$-$t$-HAM-PATH-DECISION}(G,s,t,K)=\\text{YES}.\n$$\n设 $M$ 是一个选择的权重，其值严格大于 $G$ 中任何可能的哈密顿路径成本（特别地，在正权重条件下，$MK$ 就足够了）。\n\n考虑选项 A。定义 $G'$ 的方法是：向 $G$ 中添加一个新顶点 $x$，保留所有原始的边和权重，添加权重为 0 的两条边 $(s,x)$ 和 $(t,x)$，并为每个 $v \\in V \\setminus \\{s,t\\}$ 添加权重为 $M$ 的边 $(v,x)$。设置 $B=K$。\n\n我们来证明这个等价性。\n\n($\\Leftarrow$) 假设 TSP-DECISION$(G',B)$ 的结果为 YES。那么在 $G'$ 中存在一个总权重至多为 $K$ 的哈密顿回路 $C$。在任何哈密顿回路中，每个顶点的度都为 2。因此，顶点 $x$ 在 $C$ 中恰好有两条邻接边。如果 $C$ 使用了任何 $v \\notin \\{s,t\\}$ 的边 $(v,x)$，那么 $C$ 就包含了一条权重为 $M$ 的边。由于 $MK$ 并且所有其他边的权重都是非负的（实际上在 $G$ 中是正的），$C$ 的总权重将超过 $K$，这与假设矛盾。因此，$C$ 中与 $x$ 邻接的两条边必须是 $(s,x)$ 和 $(t,x)$，它们的权重都为 0。从 $C$ 中移除 $x$ 及其两条邻接边，会得到一条访问 $V$ 中每个顶点恰好一次的简单 $s$-$t$ 路径 $P$。$P$ 的成本等于 $C$ 的成本减去两条零权重边的成本，因此至多为 $K$。因此，$G$ 中存在一条总权重至多为 $K$ 的 $s$-$t$ 哈密顿路径。\n\n($\\Rightarrow$) 反过来，假设在 $G$ 中存在一条总权重至多为 $K$ 的 $s$-$t$ 哈密顿路径 $P$。在 $G'$ 中，通过添加权重为 0 的边 $(t,x)$ 和 $(x,s)$ 来扩充路径 $P$。这就构成了一个 $G'$ 的哈密顿回路（一个恰好访问 $V \\cup \\{x\\}$ 中每个顶点一次的简单环路），其总权重等于 $P$ 的权重加上 $0+0$，因此至多为 $K=B$。因此 TSP-DECISION$(G',B)$ 的结果为 YES。\n\n综合起来，这两个蕴含关系为选项 A 建立了所要求的等价性。\n\n现在我们解释为什么其他选项不能正确地保证等价性。\n\n选项 B 设置 $G'=G$ 但 $w'(s,t)=0$，且 $B=K$。即使存在一条权重至多为 $K$ 的 $s$-$t$ 哈密顿路径（这样用边 $(s,t)$ 将其闭合可以得到一个权重至多为 $K$ 的回路），反向蕴含也不成立，因为可能存在一个成本至多为 $K$ 但不使用边 $(s,t)$ 的哈密顿回路。在这种情况下，我们无法通过移除 $(s,t)$ 来获得一个相同成本的 $s$-$t$ 路径，从而破坏了等价性。\n\n选项 C 将 $x$ 以权重 0 连接到每个顶点，这并不能约束 TSP 回路中与 $x$ 邻接的两条边恰好是 $(s,x)$ 和 $(t,x)$。该回路可能会选择连接到任意顶点的零权重边，从而产生不对应于 $G$ 中 $s$-$t$ 哈密顿路径的回路，因此等价性不成立。\n\n选项 D 保持 $G$ 不变并设置 $B=K$。这将权重至多为 $K$ 的哈密顿环路的存在性与权重至多为 $K$ 的 $s$-$t$ 哈密顿路径的存在性等同起来，而这两者通常是不可比较的性质；通常情况下，两个方向的蕴含关系都不成立。\n\n因此，只有选项 A 是一个正确且有效的变换。", "answer": "$$\\boxed{A}$$", "id": "1464538"}]}
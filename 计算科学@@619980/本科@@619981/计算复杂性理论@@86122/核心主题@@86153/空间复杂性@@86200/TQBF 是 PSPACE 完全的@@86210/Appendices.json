{"hands_on_practices": [{"introduction": "本节的第一个练习是一个基础热身。它要求你直接评估一个含有交替量词的简单 TQBF。这个练习有助于你掌握逐层代入布尔值并应用 $\\forall$ 和 $\\exists$ 量词规则的递归评估方法，这个过程也可以被看作是一个双人博弈。[@problem_id:1467505]", "problem": "在计算复杂度理论中，量化布尔公式（Quantified Boolean Formula, QBF）是一种经典命题逻辑中的公式，其中的变量是量化的。决定一个没有自由变量的给定QBF是真还是假的问题，被称为TQBF问题。\n\n考虑布尔变量 $x$ 和 $y$，它们可以取集合 $\\{\\top, \\bot\\}$ 中的值，分别代表真和假。标准的逻辑运算符表示为：$\\land$ 代表 AND（与），$\\lor$ 代表 OR（或），$\\neg$ 代表 NOT（非）。量词为 $\\forall$（对于所有/全称）和 $\\exists$（存在/存在）。\n\n您的任务是确定以下QBF的真值：\n$$ \\exists x \\forall y ((x \\lor \\neg y) \\land (\\neg x \\lor y)) $$\n\n下列哪个陈述是正确的？\n\nA. 该公式为真（$\\top$）。\n\nB. 该公式为假（$\\bot$）。\n\nC. 该公式的真值是不可判定的。\n\nD. 该公式的语法格式错误。\n\nE. 该公式的真值取决于一个初始的、未量化的赋值。", "solution": "我们得到量化布尔公式\n$$\n\\exists x \\forall y \\left((x \\lor \\neg y) \\land (\\neg x \\lor y)\\right).\n$$\n将矩阵（内部布尔表达式）定义为\n$$\n\\phi(x,y) = (x \\lor \\neg y) \\land (\\neg x \\lor y).\n$$\n使用命题等价式 $a \\rightarrow b \\equiv \\neg a \\lor b$ 以及双条件的定义 $a \\leftrightarrow b \\equiv (a \\rightarrow b) \\land (b \\rightarrow a)$。那么\n$$\nx \\lor \\neg y \\equiv \\neg y \\lor x \\equiv y \\rightarrow x,\n$$\n$$\n\\neg x \\lor y \\equiv x \\rightarrow y,\n$$\n所以\n$$\n\\phi(x,y) \\equiv (y \\rightarrow x) \\land (x \\rightarrow y) \\equiv x \\leftrightarrow y.\n$$\n因此，整个QBF等价于\n$$\n\\exists x \\forall y \\,(x \\leftrightarrow y).\n$$\n对 $x$ 的每个可能值，评估其全称部分。\n\n情况 1：$x=\\top$。使用 $x \\leftrightarrow y \\equiv (x \\land y) \\lor (\\neg x \\land \\neg y)$，\n$$\nx \\leftrightarrow y \\equiv (\\top \\land y) \\lor (\\bot \\land \\neg y) \\equiv y.\n$$\n因此 $\\forall y\\,(x \\leftrightarrow y)$ 变为 $\\forall y\\, y$，此为假，因为取 $y=\\bot$ 会使 $y$ 为假。\n\n情况 2：$x=\\bot$。那么\n$$\nx \\leftrightarrow y \\equiv (\\bot \\land y) \\lor (\\top \\land \\neg y) \\equiv \\neg y.\n$$\n因此 $\\forall y\\,(x \\leftrightarrow y)$ 变为 $\\forall y\\, \\neg y$，此为假，因为取 $y=\\top$ 会使 $\\neg y$ 为假。\n\n在这两种情况下，$\\forall y\\,(x \\leftrightarrow y)$ 均为假，所以不存在满足存在量词的 $x$。因此，整个公式为假，正确的选项是 B。", "answer": "$$\\boxed{B}$$", "id": "1467505"}, {"introduction": "在掌握了基本的评估方法后，这个问题将引导你探索 QBF 中更精细的结构特性。它突出了“变量遮蔽” (variable shadowing) 的重要性，并关键性地展示了交换全称量词和存在量词的顺序会改变公式的真值，这是逻辑学和计算复杂性理论中的一个核心概念。[@problem_id:1467525]", "problem": "在一门计算理论课程中，两名学生 Alice 和 Bob 正在争论量化布尔公式 (Quantified Boolean Formulas, QBFs) 的规则。QBF 是经典逻辑中的一种公式，其中每个变量都由一个量词（全称量词 $\\forall$ 或存在量词 $\\exists$）约束。这些变量是布尔变量，取值为真 (1) 或假 (0)。一个完全量化的 QBF（没有自由变量）的值总是真或假。\n\n他们从一个具有两个自由变量 $x_1$ 和 $x_2$ 的任意布尔公式 $\\phi(x_1, x_2)$ 开始。由此，他们构造了三个不同的 QBF：\n\n- $\\Psi_1 = \\forall x_1 \\exists x_2 \\forall x_1 \\phi(x_1, x_2)$\n- $\\Psi_2 = \\exists x_2 \\forall x_1 \\phi(x_1, x_2)$\n- $\\Psi_3 = \\forall x_1 \\exists x_2 \\phi(x_1, x_2)$\n\nAlice 认为，由于一种称为“变量遮蔽”的概念，公式 $\\Psi_1$ 是多余的，并且在逻辑上等价于另外两个更简单的公式之一。Bob 对此表示怀疑，他猜测这三个公式可能都不同，或者也许 $\\Psi_2$ 和 $\\Psi_3$ 仅通过交换量词就是等价的。\n\n为了解决他们的争论，你必须分析这三个公式之间的逻辑关系。请记住，如果对于布尔公式 $\\phi(x_1, x_2)$ 的每一种可能选择，两个 QBF 的求值结果都具有相同的真值，那么它们就被认为是逻辑等价的。\n\n关于这些公式的逻辑等价性，以下哪个陈述是正确的？\n\nA. $\\Psi_1$ 与 $\\Psi_2$ 逻辑等价。\n\nB. $\\Psi_1$ 与 $\\Psi_3$ 逻辑等价。\n\nC. $\\Psi_2$ 与 $\\Psi_3$ 逻辑等价。\n\nD. 这三个公式相互之间逻辑等价。\n\nE. 没有任何两个公式是逻辑等价的。", "solution": "我们分析从具有自由变量 $x_1$ 和 $x_2$ 的任意布尔公式 $\\phi(x_{1}, x_{2})$ 构建的三个 QBF：\n$$\n\\Psi_{1} \\;=\\; \\forall x_{1}\\,\\exists x_{2}\\,\\forall x_{1}\\,\\phi(x_{1},x_{2}),\\quad\n\\Psi_{2} \\;=\\; \\exists x_{2}\\,\\forall x_{1}\\,\\phi(x_{1},x_{2}),\\quad\n\\Psi_{3} \\;=\\; \\forall x_{1}\\,\\exists x_{2}\\,\\phi(x_{1},x_{2}).\n$$\n如果对于 $\\phi$ 的每一种选择，两个 QBF 都具有相同的真值，则它们是逻辑等价的。\n\n首先，我们证明 $\\Psi_{1}$ 与 $\\Psi_{2}$ 逻辑等价。在 $\\Psi_{1}$ 中，最内层的量词 $\\forall x_{1}$ 遮蔽了外层的 $\\forall x_{1}$。通过约束变量重命名（也称为 $\\alpha$-变换），我们可以将最内层被约束的 $x_{1}$ 重命名为一个新的变量 $y$ 而不改变其含义：\n$$\n\\Psi_{1} \\;\\equiv\\; \\forall x_{1}\\,\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}).\n$$\n现在 $x_1$ 在 $\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2})$ 中不是自由出现的。根据空量化定律，如果一个变量在一个公式 $\\psi$ 中不是自由出现的，那么 $\\forall x\\,\\psi$ 等价于 $\\psi$。因此，\n$$\n\\forall x_{1}\\,\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}) \\;\\equiv\\; \\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}).\n$$\n最后，将约束变量 $y$ 重命名回 $x_{1}$（再次通过 $\\alpha$-变换）以获得\n$$\n\\exists x_{2}\\,\\forall y\\,\\phi(y,x_{2}) \\;\\equiv\\; \\exists x_{2}\\,\\forall x_{1}\\,\\phi(x_{1},x_{2}) \\;=\\; \\Psi_{2}.\n$$\n因此，对于每一个 $\\phi$，$\\Psi_{1}$ 和 $\\Psi_{2}$ 都具有相同的真值，所以 $\\Psi_{1}$ 与 $\\Psi_{2}$ 逻辑等价。\n\n接下来，我们通过给出一个使 $\\Psi_{2}$ 和 $\\Psi_{3}$ 产生差异的特定 $\\phi$ 来证明它们不是逻辑等价的。取\n$$\n\\phi(x_{1},x_{2}) \\;:=\\; \\bigl(x_{1} \\leftrightarrow x_{2}\\bigr),\n$$\n即 $x_1$ 和 $x_2$ 的布尔等价关系。计算 $\\Psi_{3}$：\n$$\n\\Psi_{3} \\;=\\; \\forall x_{1}\\,\\exists x_{2}\\,\\bigl(x_{1} \\leftrightarrow x_{2}\\bigr).\n$$\n对于 $x_1$ 的每个值，选择 $x_2=x_1$ 都能满足 $x_1 \\leftrightarrow x_2$，所以 $\\Psi_3$ 为真。现在计算 $\\Psi_{2}$：\n$$\n\\Psi_{2} \\;=\\; \\exists x_{2}\\,\\forall x_{1}\\,\\bigl(x_{1} \\leftrightarrow x_{2}\\bigr).\n$$\n如果 $x_{2}=0$，那么当 $x_{1}=1$ 时内部公式为假；如果 $x_{2}=1$，那么当 $x_{1}=0$ 时它为假。因此没有单个 $x_{2}$ 能使得该等价关系对所有 $x_{1}$ 都成立，所以 $\\Psi_{2}$ 为假。因此 $\\Psi_2$ 和 $\\Psi_3$ 不是逻辑等价的。\n\n由于 $\\Psi_{1} \\equiv \\Psi_{2}$ 且 $\\Psi_{2} \\not\\equiv \\Psi_{3}$，可推断出 $\\Psi_{1} \\not\\equiv \\Psi_{3}$。因此，在给定的选项中，只有“$\\Psi_1$ 与 $\\Psi_2$ 逻辑等价”这一陈述是正确的。", "answer": "$$\\boxed{A}$$", "id": "1467525"}, {"introduction": "最后一个练习将我们从抽象的逻辑操作引向实际应用。你的任务是将一组描述系统计算“状态”的规则，翻译成一个量化布尔公式。这种编码技巧是理解 TQBF 如何能够模拟任何多项式空间图灵机行为的基础，也是证明其 PSPACE 完全性的核心思想。[@problem_id:1467536]", "problem": "考虑一个简单的计算模型，其构型由一组 $n$ 个布尔变量 $V = \\{v_1, v_2, \\dots, v_n\\}$ 描述，其中 $n$ 是一个偶数且 $n \\ge 4$。对这些变量的一次特定的真/假值赋值代表了系统的一个单一状态。\n\n一个状态被定义为“良构的”，当且仅当集合的前半部分 $\\{v_1, v_2, \\dots, v_{n/2}\\}$ 中恰好有一个变量被赋值为真。此前半部分中的所有其他变量必须为假。\n\n一个状态被定义为“接受的”，当且仅当最后一个变量 $v_n$ 被赋值为真。\n\n你的任务是构造一个公式，以确定是否存在任何同时是良构的和接受的状态。下列哪个量化布尔公式(QBF)正确地在当且仅当这样的状态存在时其求值结果为真？\n\nA. $\\exists v_1 \\dots \\exists v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i < j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\land v_n \\right)$\n\nB. $\\forall v_1 \\dots \\forall v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i < j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\land v_n \\right)$\n\nC. $\\exists v_1 \\dots \\exists v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land v_n \\right)$\n\nD. $\\exists v_1 \\dots \\exists v_n \\left( \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i < j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\right) \\rightarrow v_n \\right)$\n\nE. $\\exists v_1 \\dots \\exists v_{n/2} \\forall v_{n/2+1} \\dots \\forall v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i < j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right) \\land v_n \\right)$", "solution": "题目要求我们构造一个量化布尔公式，该公式当且仅当存在一个变量 $v_1,\\dots,v_n$ 的赋值，使得状态同时是良构的和接受的时，其求值结果为真。根据定义，一个状态是良构的，如果 $\\{v_1,\\dots,v_{n/2}\\}$ 中恰好有一个变量为真；一个状态是接受的，如果 $v_n$ 为真。\n\n“$\\{v_1,\\dots,v_{n/2}\\}$ 中恰好有一个为真”这一要求可以编码为以下两部分的合取：\n- 一个“至少一个”子句 $\\bigvee_{i=1}^{n/2} v_i$，以及\n- 一个“至多一个”子句 $\\bigwedge_{1 \\le i < j \\le n/2} (\\neg v_i \\lor \\neg v_j)$，它确保了前半部分的变量中没有任意两个同时为真。\n\n将良构性条件定义为\n$$\nW \\equiv \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land \\left( \\bigwedge_{1 \\le i < j \\le n/2} (\\neg v_i \\lor \\neg v_j) \\right),\n$$\n并将接受性条件定义为\n$$\nA \\equiv v_n.\n$$\n那么，一个既是良构的又是接受的状态的存在性，可以被下面的存在量化布尔公式精确地表达：\n$$\n\\exists v_1 \\dots \\exists v_n \\left( W \\land A \\right).\n$$\n这与选项 A 相符。\n\n为了验证其他选项是不正确的，我们使用量词的语义：$\\exists x\\,\\phi$ 为真，如果存在一个 $x$ 的值使得 $\\phi$ 为真；$\\forall x\\,\\phi$ 为真，如果对于 $x$ 的两个值，$\\phi$ 都为真。\n\n- 选项 B 对所有变量使用全称量化：\n$$\n\\forall v_1 \\dots \\forall v_n \\left( W \\land v_n \\right).\n$$\n该公式断言每个赋值都是良构的且 $v_n$ 为真，这是错误的（例如，所有变量都为假的赋值违反了 $\\bigvee_{i=1}^{n/2} v_i$ 和 $v_n$）。因此，B 不等价于所期望的存在性属性。\n\n- 选项 C 遗漏了“至多一个”的约束：\n$$\n\\exists v_1 \\dots \\exists v_n \\left( \\left( \\bigvee_{i=1}^{n/2} v_i \\right) \\land v_n \\right).\n$$\n这允许在前半部分有多个变量为真的赋值。因此，它没有强制良构性，并且即使所选的赋值不是良构的，该公式也可以为真；它没有编码所要求的“恰好一个”的条件。\n\n- 选项 D 用蕴涵替代了合取：\n$$\n\\exists v_1 \\dots \\exists v_n \\left( \\left( W \\right) \\rightarrow v_n \\right).\n$$\n在存在量化下，可以选择使前件 $W$ 为假的值（例如，将 $v_1,\\dots,v_{n/2}$ 全部设为假），这会使得蕴涵为真，而不管 $v_n$ 的值如何。因此，这个公式可以在不产生一个良构的接受赋值的情况下被满足，所以它不等价于所要求的属性。\n\n- 选项 E 对前半部分使用 $\\exists$ 量化，对包括 $v_n$ 在内的后半部分使用 $\\forall$ 量化：\n$$\n\\exists v_1 \\dots \\exists v_{n/2} \\;\\forall v_{n/2+1} \\dots \\forall v_n \\left( W \\land v_n \\right).\n$$\n因为 $v_n$ 是全称量化的，所以公式体必须对 $v_n$ 为真和 $v_n$ 为假两种情况都成立。但是合取项要求 $v_n$ 为真，因此 $v_n$ 为假的情况会使公式体为假，从而使整个QBF为假。因此 E 是不正确的。\n\n因此，正确的编码恰好是选项 A。", "answer": "$$\\boxed{A}$$", "id": "1467536"}]}
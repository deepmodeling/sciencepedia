{"hands_on_practices": [{"introduction": "让我们从设计你的第一个交互式证明开始。这个练习将探讨一个基础的数论问题，目标是让一个拥有更高计算能力（了解素因数分解）的证明者，如何高效地向验证者证明一个给定的数不是完全平方数。这个实践将以一个清晰、确定性的方式，帮助你掌握交互式证明系统的核心概念：完备性（completeness）和可靠性（soundness）[@problem_id:1452378]。", "problem": "在计算复杂性理论领域，一个交互式证明系统涉及两方：一个全能的证明者（Merlin）和一个计算能力有限的验证者（Arthur）。Merlin的目标是说服Arthur一个给定的输入字符串属于某个语言。该系统的有效性由两个属性来衡量：\n\n*   **完备性**：如果一个陈述为真，一个诚实的Merlin应该能够以高概率说服Arthur。一个协议的完备性是Arthur接受一个为真的陈述的最小概率。\n*   **可靠性**：如果一个陈述为假，一个作弊的Merlin应该不能够说服Arthur。可靠性误差是Arthur接受一个为假的陈述的最大概率。\n\n考虑语言 $\\text{NON-SQUARE}$，它由所有大于1且不是完全平方数的正整数组成（例如，2, 3, 5, 6, 7, 8, 10 属于 $\\text{NON-SQUARE}$，而 4, 9, 16 不属于）。\n\nMerlin和Arthur进行以下单轮协议来确定一个给定的整数 $n > 1$ 是否属于 $\\text{NON-SQUARE}$：\n\n1.  **Merlin的步骤**：拥有无限计算能力的Merlin，因此知道 $n$ 的素数分解，他向Arthur提供一个正整数，我们称之为 $p$。\n2.  **Arthur的验证**：作为多项式时间验证者的Arthur，对从Merlin收到的整数 $p$ 执行以下检查：\n    *   **检查A**：Arthur验证 $p$ 是一个素数并且 $p$ 整除 $n$。\n    *   **检查B**：Arthur计算使得 $p^k$ 整除 $n$ 的最大整数指数 $k$。然后他检查这个指数 $k$ 是否为奇数。\n3.  **Arthur的决定**：如果检查A和检查B都通过，Arthur就确信 $n$ 不是一个完全平方数并接受。如果任一检查失败，或者Merlin未能提供一个可以通过检查的整数 $p$，Arthur就拒绝。\n\n为了本题的目的，假设Arthur有一个高效且完美的素性测试算法。\n\n这个协议的完备性和可靠性误差概率分别是多少？\n\nA. 完备性 = $1$，可靠性误差 = $1$\n\nB. 完备性 = $1$，可靠性误差 = $1/2$\n\nC. 完备性 = $1$，可靠性误差 = $0$\n\nD. 完备性 = $2/3$，可靠性误差 = $1/3$\n\nE. 完备性 = $1/2$，可靠性误差 = $1/2$\n\nF. 完备性 = $0$，可靠性误差 = $1$", "solution": "将 $n>1$ 的唯一素数分解写为\n$$\nn=\\prod_{i=1}^{t} q_{i}^{e_{i}},\n$$\n其中 $q_i$ 是不同的素数，且 $e_i \\in \\mathbb{N}$。一个标准的数论事实是：\n$$\nn \\text{ is a perfect square } \\Longleftrightarrow \\forall i,\\ e_{i} \\text{ is even},\n$$\n等价地，\n$$\nn \\in \\text{NON-SQUARE} \\Longleftrightarrow \\exists i \\text{ such that } e_{i} \\text{ is odd}.\n$$\n\n完备性：假设 $n\\in \\text{NON-SQUARE}$。那么存在一个下标 $j$ 使得 $e_j$ 为奇数。Merlin可以发送 $p=q_j$。Arthur验证 $p$ 是素数且 $p \\mid n$（检查A），此条件成立，因为 $q_j \\mid n$。然后Arthur计算使 $p^k \\mid n$ 成立的最大 $k$，根据分解的定义，该值等于 $k=e_j$，并检查 $k$ 是否为奇数（检查B），此条件也成立。所有检查都是确定性的并且都通过了，所以Arthur以概率 $1$ 接受。因此完备性等于 $1$。\n\n可靠性：假设 $n$ 是一个完全平方数。那么每一个 $e_i$ 都是偶数。考虑Merlin可能发送的任何消息 $p$。如果 $p$ 不是素数或 $p \\nmid n$，检查A将失败，Arthur会拒绝。如果 $p$ 是 $n$ 的一个素因子，那么使 $p^k \\mid n$ 成立的最大 $k$ 是偶数（等于对应的 $e_i$），因此检查B将失败，Arthur会拒绝。因此，没有任何作弊策略能使Arthur接受；对于假陈述的接受概率是 $0$。因此可靠性误差等于 $0$。\n\n因此，完备性 $=1$ 且可靠性误差 $=0$，对应选项C。", "answer": "$$\\boxed{C}$$", "id": "1452378"}, {"introduction": "许多强大的交互式协议本质上是概率性的，这意味着验证者有可能被欺骗。本练习将探讨一种名为“放大”（amplification）的基础技术，展示如何通过重复协议来指数级地降低可靠性误差（soundness error），使其达到甚至能满足最严格安全策略的可靠性。这是将交互式证明应用于实践的关键一步 [@problem_id:1452374]。", "problem": "交互式证明（$\\text{IP}$）系统是一种协议，其中一个强大但不可信的证明者（Prover）试图说服一个计算能力有限的验证者（Verifier）相信某个陈述的真实性。图不同构（Graph Non-Isomorphism, $\\text{GNI}$）的协议是此类系统的一个典型例子，用于证明两个给定的图在结构上并不相同。\n\n假设一个验证者正在使用一个特定的 $\\text{IP}$ 协议来判断两个给定的图 $G_0$ 和 $G_1$ 是否为非同构的。该协议具有以下特性：\n1.  **完美完备性**：如果图确实是不同构的（即陈述为真），证明者总能说服验证者。验证者以概率1接受。\n2.  **可靠性误差**：如果图是同构的（即陈述为假），恶意的证明者能欺骗验证者接受这个假陈述的概率至多为 $s = 1/2$。\n\n为了降低被欺骗的概率，验证者决定独立运行该协议 $n$ 次。只有当证明者成功通过所有 $n$ 次独立试验时，验证者才会接受图是不同构的这一论断。此任务的网络安全策略要求，这个重复协议的总体可靠性误差必须严格小于灾难性系统级故障的概率，该概率估计为 $P_{fail} = 3.5 \\times 10^{-31}$。\n\n为满足此安全策略，所需的最小整数重复次数 $n$ 是多少？", "solution": "在一个具有完美完备性和可靠性误差 $s$ 的交互式证明中，如果验证者独立运行协议 $n$ 次，并且仅在所有 $n$ 次试验都接受时才接受，那么总体的可靠性误差上限为 $s^n$，因为恶意的证明者必须在所有独立的试验中都成功。此处 $s=1/2$，所以重复协议的可靠性误差为 $(1/2)^n$。\n\n安全要求是，总体的可靠性误差必须严格小于 $P_{fail}=3.5 \\times 10^{-31}$。因此 $n$ 必须满足\n$$\n\\left(\\frac{1}{2}\\right)^{n} < 3.5 \\times 10^{-31}.\n$$\n对两边取以10为底的对数，得到\n$$\nn \\log_{10}\\!\\left(\\frac{1}{2}\\right) < \\log_{10}\\!\\left(3.5 \\times 10^{-31}\\right).\n$$\n由于 $\\log_{10}\\!\\left(\\frac{1}{2}\\right)=-\\log_{10}(2)$，上式变为\n$$\n-n \\log_{10}(2) < \\log_{10}(3.5) - 31,\n$$\n两边同乘以 $-1$（这会反转不等号），得到\n$$\nn \\log_{10}(2) > 31 - \\log_{10}(3.5).\n$$\n因此，最小整数 $n$ 是\n$$\nn = \\left\\lceil \\frac{31 - \\log_{10}(3.5)}{\\log_{10}(2)} \\right\\rceil.\n$$\n数值上，$\\log_{10}(2) \\approx 0.30102999566$ 且 $\\log_{10}(3.5) \\approx 0.544068044$，所以\n$$\n\\frac{31 - \\log_{10}(3.5)}{\\log_{10}(2)} \\approx \\frac{30.455931956}{0.30102999566} \\approx 101.1724\\ldots,\n$$\n因此，满足该不等式的最小整数 $n$ 是\n$$\nn=102.\n$$\n快速验证：$2^{-101} \\approx 3.94 \\times 10^{-31}$，这个值并未低于 $3.5 \\times 10^{-31}$，而 $2^{-102} \\approx 1.97 \\times 10^{-31} < 3.5 \\times 10^{-31}$。", "answer": "$$\\boxed{102}$$", "id": "1452374"}, {"introduction": "现在，让我们深入了解赋予 $\\text{IP}$ 惊人能力的先进技术。通过将像数独这样的组合问题转化为关于多项式求和的代数问题（这一过程称为“算术化”），我们可以利用强大的“和校验协议”（sum-check protocol）来验证复杂的声明。这个练习为你提供了一个具体的机会，让你初探这个支撑着像 $\\text{IP} = \\text{PSPACE}$ 这样重大理论成果的协议的内部机制 [@problem_id:1452382]。", "problem": "一个全能的证明者（Prover）Peggy，希望让一个计算能力有限但持怀疑态度的验证者（Verifier）Victor，相信一个标准的 $9 \\times 9$ 数独谜题的性质。具体来说，Peggy 声称给定的谜题有唯一解。\n\n为了将此形式化，他们约定了以下设置。数独网格的状态由 $m = 9 \\times 9 \\times 9 = 729$ 个布尔变量表示，统称为 $Z = (z_1, z_2, \\dots, z_m)$。对这些变量的一次特定赋值，对应于在网格的每个单元格中填入一个从 1 到 9 的数字。数独的规则，连同给定谜题的初始提示，可以被编码成一个单一的布尔公式 $\\phi(Z)$。当且仅当 $Z$ 代表了该谜题的一个有效且完整的解时，此公式 $\\phi(Z)$ 的计算结果为真（或 1）。\n\n为了利用代数技术，布尔公式 $\\phi(Z)$ 被转换成一个在一个大有限域 $\\mathbb{F}_q$ 上的多线性多项式 $p(z_1, \\dots, z_m)$。多项式 $p$ 具有这样的性质：对于任何赋值 $Z \\in \\{0,1\\}^m$，都有 $p(Z) = \\phi(Z)$。因此，该数独谜题的解的总数由以下和式给出：\n$$N = \\sum_{z_1 \\in \\{0,1\\}} \\sum_{z_2 \\in \\{0,1\\}} \\cdots \\sum_{z_m \\in \\{0,1\\}} p(z_1, z_2, \\dots, z_m)$$\nPeggy 声称存在唯一解，等价于声称 $N=1$。\n\nPeggy 和 Victor 决定使用和校验（sum-check）交互式协议来验证这一声称。该协议分轮进行，在每一轮中，对一个变量的求和进行评估和检查。第一轮关注变量 $z_1$。令多项式 $g_1(Z_1)$ 定义如下：\n$$g_1(Z_1) = \\sum_{z_2 \\in \\{0,1\\}} \\cdots \\sum_{z_m \\in \\{0,1\\}} p(Z_1, z_2, \\dots, z_m)$$\n协议将从检验声称 $\\sum_{z_1 \\in \\{0,1\\}} g_1(z_1) = 1$ 开始。\n\n在这一和校验协议的第一轮中，以下哪个选项正确描述了证明者发送给验证者的第一条消息，以及验证者随后发送给证明者的第一条消息？\n\nA. 证明者致验证者：对唯一解网格的一个随机排列版本的密码学承诺。验证者致证明者：一个随机的挑战比特 $b \\in \\{0,1\\}$。\n\nB. 证明者致验证者：由其系数指定的多项式 $g_1(Z_1)$。验证者致证明者：一个随机元素 $r_1 \\in \\mathbb{F}_q$。\n\nC. 证明者致验证者：两个数值 $g_1(0)$ 和 $g_1(1)$。验证者致证明者：一个随机元素 $r_1 \\in \\mathbb{F}_q$。\n\nD. 证明者致验证者：完整的、已解出的数独网格。验证者致证明者：一个接受比特 $b \\in \\{0,1\\}$。\n\nE. 证明者致验证者：一个随机元素 $r_1 \\in \\mathbb{F}_q$。验证者致证明者：由其系数指定的多项式 $g_1(Z_1)$。", "solution": "我们将声称的计数值形式化为在布尔超立方体上的和：\n$$N=\\sum_{z_{1}\\in\\{0,1\\}}\\sum_{z_{2}\\in\\{0,1\\}}\\cdots\\sum_{z_{m}\\in\\{0,1\\}} p(z_{1},z_{2},\\dots,z_{m}),$$\n声称为 $N=1$。\n\n为第一轮定义单变量多项式：\n$$g_{1}(Z_{1})=\\sum_{z_{2}\\in\\{0,1\\}}\\cdots\\sum_{z_{m}\\in\\{0,1\\}} p(Z_{1},z_{2},\\dots,z_{m}).$$\n由于 $p$ 是多线性的（每个变量的个体次数最多为 1），$g_{1}$ 是一个关于 $Z_{1}$ 的次数最多为 1 的单变量多项式。\n\n在和校验协议中，证明者发送一个声称的单变量多项式 $h_{1}(Z_{1})$，意图使其等于 $g_{1}(Z_{1})$。验证者通过验证\n$$h_{1}(0)+h_{1}(1)=1,$$\n来检查声称的总和的一致性，并强制执行已知的次数界限 $\\deg(h_{1})\\leq 1$。接下来，为了通过随机自归约将本轮与下一轮联系起来，验证者从域中随机抽样一个元素\n$$r_{1}\\in\\mathbb{F}_{q}$$\n并将其发送给证明者。在下一轮中，证明者必须生成\n$$g_{2}(Z_{2})=\\sum_{z_{3}\\in\\{0,1\\}}\\cdots\\sum_{z_{m}\\in\\{0,1\\}} p(r_{1},Z_{2},\\dots,z_{m}),$$\n然后验证者将检查一致性条件\n$$h_{1}(r_{1})=\\sum_{z_{2}\\in\\{0,1\\}} g_{2}(z_{2}).$$\n\n与选项比较：\n- 证明者必须发送单变量多项式 $g_{1}(Z_{1})$（例如，通过其系数），而不仅仅是两个评价值 $g_{1}(0)$ 和 $g_{1}(1)$，因为验证者需要在一个随机点 $r_{1}$ 上对其求值并强制执行次数界限。\n- 验证者的第一条消息是一个随机元素 $r_{1}\\in\\mathbb{F}_{q}$。\n\n因此，正确的描述是：证明者发送多项式 $g_{1}(Z_{1})$（通过系数），验证者用一个随机的 $r_{1}\\in\\mathbb{F}_{q}$ 回应，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1452382"}]}
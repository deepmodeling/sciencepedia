{"hands_on_practices": [{"introduction": "我们从一个经典问题——图着色——开始我们的动手实践之旅。这个练习旨在建立你对多证明者系统基本能力的直观理解。通过分析一个针对不可二着色图的简单协议，你将计算证明者成功欺骗的最大概率，并理解验证者如何利用空间隔离的证明者来放大其验证能力。[@problem_id:1432453]", "problem": "在理论计算机科学领域，多证明者交互式证明 (MIP) 系统被用于验证计算断言。考虑一个场景，其中验证者 Vic 想要检查一个关于地铁图可着色性的断言。该图由车站 (顶点) 和它们之间的直通隧道 (边) 组成。该断言声称此图是“2-可着色”的，意味着可以为每个车站分配两种颜色之一（比如颜色 '0' 或颜色 '1'），使得没有任意两个由隧道连接的车站具有相同的颜色。\n\nVic 的计算能力有限，于是他寻求两位全能但可能不可信的证明者 P1 和 P2 的帮助。证明者可以事先协调他们的策略，但在协议执行期间被置于不同的房间且无法通信。\n\n所讨论的特定地铁图是“Tri-Loop”，它由三个车站 A、B 和 C 组成。有隧道连接 A 和 B、B 和 C、以及 C 和 A，形成一个闭环。众所周知，这张图不是 2-可着色的。然而，证明者们将试图串通来欺骗 Vic，让他相信该图是 2-可着色的。\n\nVic 采用以下单轮协议：\n1.  Vic 秘密地抛掷一枚均匀的硬币。\n2.  **如果正面朝上（边测试）：** Vic 随机均匀地选择三条隧道（边）中的一条。假设选择的隧道连接车站 $u$ 和 $v$。Vic 将车站 $u$ 发送给 P1，将车站 $v$ 发送给 P2。Vic 从 P1 收到颜色 $c_1$，从 P2 收到颜色 $c_2$。Vic 当且仅当 $c_1 \\neq c_2$ 时接受。\n3.  **如果反面朝上（顶点测试）：** Vic 随机均匀地选择三个车站（顶点）中的一个，比如说 $w$。Vic 将车站 $w$ 同时发送给 P1 和 P2。Vic 从 P1 收到颜色 $c_1$，从 P2 收到颜色 $c_2$。Vic 当且仅当 $c_1 = c_2$ 时接受。\n\n假设证明者设计了一个最优策略来最大化他们成功的概率，那么 Vic 接受 Tri-Loop 图是 2-可着色这一错误断言的最大概率是多少？请将答案表示为最简分数。", "solution": "我们不失一般性地使用确定性响应函数来为每个证明者的单轮行为建模。这是因为 Vic 的查询是从一个固定分布中抽取的，且接受概率在策略上是线性的；因此，任何概率性策略都是确定性策略的凸组合，而最优值在某个极点（即确定性策略）上达到。\n\n设顶点集为 $\\{A,B,C\\}$。将证明者的确定性策略定义为函数 $f_{1},f_{2}:\\{A,B,C\\}\\to\\{0,1\\}$。记\n$$\na_{X}=f_{1}(X),\\quad b_{X}=f_{2}(X)\\quad\\text{for }X\\in\\{A,B,C\\}.\n$$\n在边测试下（概率为 $\\frac{1}{2}$），Vic 均匀地选择三条边中的一条；我们以一个固定的方向 $(A,B)$, $(B,C)$, $(C,A)$ 来标记它们。对于边 $(u,v)$，Vic 接受当且仅当 $a_{u}\\neq b_{v}$。在顶点测试下（概率为 $\\frac{1}{2}$），Vic 均匀地选择三个顶点之一 $w$ 并且接受当且仅当 $a_{w}=b_{w}$。\n\n设\n$$\nS_{\\text{edge}}= \\mathbf{1}[a_{A}\\neq b_{B}] + \\mathbf{1}[a_{B}\\neq b_{C}] + \\mathbf{1}[a_{C}\\neq b_{A}],\n$$\n$$\nS_{\\text{vert}}= \\mathbf{1}[a_{A}=b_{A}] + \\mathbf{1}[a_{B}=b_{B}] + \\mathbf{1}[a_{C}=b_{C}],\n$$\n其中 $\\mathbf{1}[\\cdot]$ 是指示函数（当条件成立时值为 $1$，否则为 $0$）。接受概率为\n$$\nP=\\frac{1}{2}\\cdot\\frac{1}{3}S_{\\text{edge}}+\\frac{1}{2}\\cdot\\frac{1}{3}S_{\\text{vert}}=\\frac{S_{\\text{edge}}+S_{\\text{vert}}}{6}.\n$$\n因此，我们只需对六个比特 $a_{A},a_{B},a_{C},b_{A},b_{B},b_{C}$ 的所有赋值来最大化 $S_{\\text{edge}}+S_{\\text{vert}}$。\n\n固定 $a_{A},a_{B},a_{C}$ 并对 $b_{A},b_{B},b_{C}$ 进行优化。将包含每个 $b_{X}$ 的项分组：\n- 包含 $b_{A}$ 的项：$\\mathbf{1}[b_{A}=a_{A}] + \\mathbf{1}[b_{A}\\neq a_{C}]$。\n- 包含 $b_{B}$ 的项：$\\mathbf{1}[b_{B}=a_{B}] + \\mathbf{1}[b_{B}\\neq a_{A}]$。\n- 包含 $b_{C}$ 的项：$\\mathbf{1}[b_{C}=a_{C}] + \\mathbf{1}[b_{C}\\neq a_{B}]$。\n\n对于一个一般的对 $(x,y)\\in\\{0,1\\}^{2}$，定义 $f(b;x,y)=\\mathbf{1}[b=x]+\\mathbf{1}[b\\neq y]$。如果 $x=y$，那么对于 $b$ 的两种选择，都有 $f(b;x,y)=1$。如果 $x\\neq y$，那么选择 $b=x$ 会得到 $f=2$（而另一种选择得到 $0$）。因此，对于每个 $X$，如果 $a_{X}\\neq$ 其邻居，则最大贡献等于 $2$；如果 $a_{X}=$ 其邻居，则最大贡献等于 $1$。其中相关的邻居对于 $X=A$ 是 $a_{C}$，对于 $X=B$ 是 $a_{A}$，对于 $X=C$ 是 $a_{B}$。\n\n因此，在给定 $a$ 的情况下，对 $b$ 取最大值，我们有\n$$\nS_{\\text{edge}}+S_{\\text{vert}} \\le 6 - E,\n$$\n其中\n$$\nE=\\mathbf{1}[a_{A}=a_{C}] + \\mathbf{1}[a_{B}=a_{A}] + \\mathbf{1}[a_{C}=a_{B}].\n$$\n我们现在对 $a_{A},a_{B},a_{C}$ 来最小化 $E$。$E$ 中的三个等式是这个 3-环上的三个连续等式。仅用两种颜色，不可能使得三个连续不等式 $a_{B}\\neq a_{A}$、$a_{C}\\neq a_{B}$ 和 $a_{A}\\neq a_{C}$ 都成立，因为 $a_{B}\\neq a_{A}$ 和 $a_{C}\\neq a_{B}$ 会迫使 $a_{C}=a_{A}$，使得第三个等式成立。因此 $E\\ge 1$。这个界是紧的：取两个 $a$ 值相等，第三个不同（例如，$(a_{A},a_{B},a_{C})=(0,1,1)$），这会在连续对中恰好产生一个等式，因此 $E=1$。\n\n因此 $S_{\\text{edge}}+S_{\\text{vert}}$ 的最大值等于 $6-1=5$，且最优接受概率是\n$$\nP_{\\max}=\\frac{5}{6}.\n$$\n这个值是可以达到的。例如，选择 $(a_{A},a_{B},a_{C})=(0,1,1)$ 和 $(b_{A},b_{B},b_{C})=(0,1,1)$，这会得到 $S_{\\text{edge}}=2$，$S_{\\text{vert}}=3$，因此 $P=(2+3)/6=5/6$。", "answer": "$$\\boxed{\\frac{5}{6}}$$", "id": "1432453"}, {"introduction": "在探讨了基于图的问题之后，我们现在将注意力转向线性代数领域，以展示多证明者交互式证明（MIP）协议的多功能性。这个实践要求你分析一个用于验证给定矩阵是否为置换矩阵的协议，置换矩阵是许多算法中应用的基础概念。通过这个练习，你将通过寻找欺诈证明者的最优策略，来巩固你对如何确定协议可靠性（soundness）的理解。[@problem_id:1432452]", "problem": "在计算复杂性理论中，验证者可以使用多证明者交互式证明系统来验证由两个强大但无法通信的证明者提出的断言。考虑一个场景，其中验证者 V 获得一个公开已知的$n \\times n$二元矩阵 $M$，并希望确定它是否为一个置换矩阵。置换矩阵是一个方形二元矩阵，其每一行和每一列都恰好有一个 '1'，所有其他项均为 '0'。\n\n验证者与证明者 P1 和 P2 使用以下双证明者协议：\n1. 验证者抛一枚公平硬币，以相等的概率（各为$1/2$）选择执行“行检查”或“列检查”。\n2. 如果选择“行检查”，验证者从 $\\{1, \\dots, n\\}$ 中均匀随机地选择一个行索引 $i$。它同时询问 P1 和 P2：“在第 $i$ 行中，'1' 的列索引是什么？” 设 P1 的回答为 $j_1$，P2 的回答为 $j_2$。当且仅当 $j_1 = j_2$ 且项 $M_{i,j_1}$ 为 1 时，验证者接受。否则，验证者拒绝。\n3. 如果选择“列检查”，验证者从 $\\{1, \\dots, n\\}$ 中均匀随机地选择一个列索引 $j$。它同时询问 P1 和 P2：“在第 $j$ 列中，'1' 的行索引是什么？” 设 P1 的回答为 $i_1$，P2 的回答为 $i_2$。当且仅当 $i_1 = i_2$ 且项 $M_{i_1,j}$ 为 1 时，验证者接受。否则，验证者拒绝。\n\n如果被查询的行或列没有 '1'，证明者仍必须提供一个答案。如果行或列有多个 '1'，证明者可以选择报告哪一个。两个证明者知晓矩阵 $M$，并在协议开始前合作制定策略，以最大化使验证者接受的概率。然而，一旦协议开始，他们就不能进行通信。\n\n假设该协议在 $n=3$ 的情况下对以下特定矩阵 $M$ 运行：\n$$ M = \\begin{pmatrix} 1  1  0 \\\\ 0  0  1 \\\\ 0  0  0 \\end{pmatrix} $$\n该矩阵不是一个置换矩阵。验证者接受的最大概率是多少？请用最简分数表示您的答案。", "solution": "问题要求在给定指定非置换矩阵 $M$ 的情况下，验证者接受的最大概率。这等同于找到证明者最优策略的成功概率。\n\n设 $A$ 为验证者接受的事件。设 $R$ 为验证者选择“行检查”的事件，C 为验证者选择“列检查”的事件。根据协议，$P(R) = P(C) = 1/2$。\n总接受概率由全概率公式给出：\n$$ P(A) = P(A|R)P(R) + P(A|C)P(C) $$\n我们需要确定证明者的最优策略，然后计算条件概率 $P(A|R)$ 和 $P(A|C)$。\n\n**步骤 1：分析“行检查”分支**\n验证者以 $1/3$ 的均匀概率选择一行 $i \\in \\{1, 2, 3\\}$。\n\n*   **如果验证者查询第 $i=1$ 行**：该行为 $(1, 1, 0)$。它在第 1 列和第 2 列包含 '1'。证明者的最优策略是商定返回列索引 1 或 2。例如，他们可以商定总是回答 $j=1$。验证者然后检查 $M_{1,1}=1$ 是否成立。因为这是成立的，所以验证者接受。因此，对于此查询，证明者可以确保验证者接受。接受的概率为 1。\n\n*   **如果验证者查询第 $i=2$ 行**：该行为 $(0, 0, 1)$。它在第 3 列包含一个 '1'。证明者唯一合乎逻辑的策略是商定回答 $j=3$。验证者检查 $M_{2,3}=1$ 是否成立。这是成立的，所以验证者接受。接受的概率为 1。\n\n*   **如果验证者查询第 $i=3$ 行**：该行为 $(0, 0, 0)$。它不包含 '1'。证明者必须商定一个答案，比如列 $j$。然而，对于任何列 $j \\in \\{1, 2, 3\\}$，项 $M_{3,j}$ 均为 0。验证者的检查将失败，验证者将拒绝。接受的概率为 0。\n\n给定“行检查”的情况下接受的条件概率是这些结果的平均值：\n$$ P(A|R) = \\frac{1}{3}(1) + \\frac{1}{3}(1) + \\frac{1}{3}(0) = \\frac{2}{3} $$\n\n**步骤 2：分析“列检查”分支**\n验证者以 $1/3$ 的均匀概率选择一列 $j \\in \\{1, 2, 3\\}$。\n\n*   **如果验证者查询第 $j=1$ 列**：该列为 $(1, 0, 0)^T$。它在第 1 行包含一个 '1'。证明者必须商定回答 $i=1$。验证者检查 $M_{1,1}=1$ 是否成立。这是成立的，所以验证者接受。接受的概率为 1。\n\n*   **如果验证者查询第 $j=2$ 列**：该列为 $(1, 0, 0)^T$。它在第 1 行包含一个 '1'。证明者必须商定回答 $i=1$。验证者检查 $M_{1,2}=1$ 是否成立。这是成立的，所以验证者接受。接受的概率为 1。\n\n*   **如果验证者查询第 $j=3$ 列**：该列为 $(0, 1, 0)^T$。它在第 2 行包含一个 '1'。证明者必须商定回答 $i=2$。验证者检查 $M_{2,3}=1$ 是否成立。这是成立的，所以验证者接受。接受的概率为 1。\n\n在所有“列检查”的情况下，证明者都可以设计一个策略使验证者接受。给定“列检查”的情况下接受的条件概率是：\n$$ P(A|C) = \\frac{1}{3}(1) + \\frac{1}{3}(1) + \\frac{1}{3}(1) = 1 $$\n\n**步骤 3：计算总接受概率**\n现在，我们结合两个分支的结果。\n$$ P(A) = P(A|R)P(R) + P(A|C)P(C) $$\n$$ P(A) = \\left(\\frac{2}{3}\\right) \\times \\left(\\frac{1}{2}\\right) + (1) \\times \\left(\\frac{1}{2}\\right) $$\n$$ P(A) = \\frac{1}{3} + \\frac{1}{2} $$\n$$ P(A) = \\frac{2}{6} + \\frac{3}{6} = \\frac{5}{6} $$\n\n因此，验证者将接受的最大概率是 $5/6$。", "answer": "$$\\boxed{\\frac{5}{6}}$$", "id": "1432452"}, {"introduction": "我们的最后一个实践介绍了一种强大的代数技术，这项技术是计算复杂性理论中一些最深刻结果（如 `MIP = NEXP`）的基础。在这里，你将检验一个用于多项式恒等式检验的协议，该协议旨在确定一个多变量多项式是否恒等于零。这个问题阐释了随机性和代数如何结合，为复杂的数学声明创造出高效的验证方法，其能力超越了简单的组合性质检查。[@problem_id:1432516]", "problem": "在计算复杂性领域，多证明者交互式证明 (MIP) 系统被用于研究拥有多个、互不通信、全能证明者的计算能力。考虑这样一个场景：一位名为 Victor 的验证者想要确定一个给定的二元多项式 $P(x, y)$ 是否为零多项式（即 $P(x, y) \\equiv 0$）。该多项式的已知最大总次数为 $d$，其系数来自有限域 $\\mathbb{F}_q$，其中 $q$ 是一个远大于 $d$ 的素数。\n\nVictor 的计算资源有限，但他可以在任意给定点上对 $P(x,y)$ 进行求值。他使用了两个证明者，Prover 1 和 Prover 2，这两个证明者计算能力无限，并且知道多项式 $P(x, y)$。一旦协议开始，这两个证明者就不能互相通信。Victor 执行以下协议：\n\n1.  Victor 从 $\\mathbb{F}_q \\times \\mathbb{F}_q$ 中均匀随机地选择一对值 $(r_x, r_y)$。\n2.  Victor 将 $r_x$ 发送给 Prover 1，并要求得到单变量多项式 $p_1(y) = P(r_x, y)$。Prover 1 回复一个多项式，我们称之为 $Q_1(y)$。\n3.  Victor 将 $r_y$ 发送给 Prover 2，并要求得到单变量多项式 $p_2(x) = P(x, r_y)$。Prover 2 回复一个多项式，我们称之为 $Q_2(x)$。\n4.  Victor 仅在以下所有条件都满足时，才接受 $P(x, y) \\equiv 0$ 的结论：\n    a) 从 Prover 1 收到的多项式 $Q_1(y)$ 是零多项式。\n    b) 从 Prover 2 收到的多项式 $Q_2(x)$ 是零多项式。\n    c) 原始多项式在所选随机点 $(r_x, r_y)$ 处的值 $P(r_x, r_y)$ 为零。\n\n假设 $P(x, y)$ 实际上*不是*零多项式。证明者是恶意的，并会在协议开始前协同制定一个策略，以最大化他们能欺骗 Victor 使其接受的概率。Victor 错误地接受的最大可能概率是多少？请用 $d$ 和 $q$ 将您的答案表示为一个闭式解析表达式。", "solution": "设 $P(x,y) \\in \\mathbb{F}_{q}[x,y]$ 是一个总次数至多为 $d$ 的非零多项式。Victor 从 $\\mathbb{F}_{q} \\times \\mathbb{F}_{q}$ 中均匀采样 $(r_{x},r_{y})$，将 $r_{x}$ 发送给 Prover 1，将 $r_{y}$ 发送给 Prover 2，并且仅在以下情况接受：\na) $Q_{1}(y)$ 是零多项式，\nb) $Q_{2}(x)$ 是零多项式，\nc) $P(r_{x},r_{y})=0$。\n\n由于证明者是恶意的且计算能力无限，但无法影响 $P(r_{x},r_{y})$ 的值，他们可以通过总是回复零多项式来确保条件 a) 和 b) 成立。因此，在最优的欺骗策略下，接受事件简化为仅有条件 c)。因此，接受概率等于\n$$\n\\Pr[\\text{Victor accepts}]=\\Pr[P(r_{x},r_{y})=0].\n$$\n\n根据关于多元多项式的 Schwartz–Zippel 引理：如果 $P$ 是一个总次数至多为 $d$ 的非零多项式，且每个变量都从一个有限集 $S \\subseteq \\mathbb{F}$ (其中 $|S|=q$) 中均匀抽取，则\n$$\n\\Pr_{(r_{x},r_{y}) \\in S^{2}}[P(r_{x},r_{y})=0] \\le \\frac{d}{q}.\n$$\n将此引理应用于 $S=\\mathbb{F}_{q}$ 可得\n$$\n\\Pr[P(r_{x},r_{y})=0] \\le \\frac{d}{q}.\n$$\n\n在 $q$ 远大于 $d$ 的假设下，这个界是紧的。例如，选择 $d$ 个不同的元素 $a_{1},\\dots,a_{d} \\in \\mathbb{F}_{q}$ 并取\n$$\nP(x,y)=\\prod_{i=1}^{d}(x-a_{i}),\n$$\n该多项式总次数为 $d$ 且与 $y$ 无关。那么，$P(r_{x},r_{y})=0$ 当且仅当 $r_{x} \\in \\{a_{1},\\dots,a_{d}\\}$，此事件发生的概率为\n$$\n\\frac{d}{q}.\n$$\n因此，Victor 错误地接受的最大可能概率恰好是 $\\frac{d}{q}$。", "answer": "$$\\boxed{\\frac{d}{q}}$$", "id": "1432516"}]}
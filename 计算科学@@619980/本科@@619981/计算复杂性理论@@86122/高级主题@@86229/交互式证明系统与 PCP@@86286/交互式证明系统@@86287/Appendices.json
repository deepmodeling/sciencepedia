{"hands_on_practices": [{"introduction": "交互式证明在单轮交互中通常存在不可忽略的错误概率。为了建立对证明结果的信心，我们可以多次重复协议。这个练习将向您展示一个强大的概念——可靠性放大（soundness amplification），即通过重复协议来显著降低作弊证明者成功的几率 [@problem_id:1428475]。通过计算所需的重复次数，您将对如何使概率性证明达到任意高的可靠性有一个切实的理解。", "problem": "一家名为“CryptoSolve”的密码学初创公司声称，他们开发出一种革命性的算法，用于解决著名的NP完全问题——图三着色问题。为从持怀疑态度的投资者“Veritas Capital”处获得资金，CryptoSolve必须在不泄露其专有算法的情况下，证明其说法的有效性。他们同意为此目的使用一个交互式证明（IP）系统。\n\n他们设计的协议在单轮交互中具有以下特性：\n- **完备性**：如果CryptoSolve的算法是正确的，他们总能说服Veritas Capital。在这种情况下，说服验证者的概率为1。\n- **可靠性**：如果CryptoSolve的算法有缺陷或他们在虚张声势，他们仍有一定概率能骗过Veritas Capital。这个概率被称为可靠性误差。对于所选的协议，可靠性误差为 $2/3$。\n\n$2/3$ 的错误率对投资者来说太高了。为了提高结果的可信度，该协议将被并行重复 $k$ 次。为使整个演示被视为成功，CryptoSolve必须同时通过所有 $k$ 轮。投资者同意，只有当这种并行执行将总体可靠性误差降低到严格小于 $1.0 \\times 10^{-6}$ 时，才会提供资金。\n\n为满足投资者的条件，所需的最小并行重复整数次数 $k$ 是多少？", "solution": "在一轮中，可靠性误差是指一个不诚实的证明者说服验证者的概率，即 $s = \\frac{2}{3}$。在所有 $k$ 个实例都必须同时被接受的 $k$ 次并行重复下，总体可靠性误差至多为 $s^{k} = \\left(\\frac{2}{3}\\right)^{k}$。投资者要求这个值严格小于 $1.0 \\times 10^{-6}$，因此我们需要\n$$\n\\left(\\frac{2}{3}\\right)^{k}  10^{-6}.\n$$\n对两边取自然对数，得到\n$$\nk \\ln\\left(\\frac{2}{3}\\right)  \\ln\\left(10^{-6}\\right) = -6 \\ln 10.\n$$\n由于 $\\ln\\left(\\frac{2}{3}\\right)  0$，两边同除以它会使不等号反向：\n$$\nk > \\frac{-6 \\ln 10}{\\ln\\left(\\frac{2}{3}\\right)} = \\frac{6 \\ln 10}{\\ln\\left(\\frac{3}{2}\\right)}.\n$$\n因此，最小整数为\n$$\nk_{\\min} = \\left\\lceil \\frac{6 \\ln 10}{\\ln\\left(\\frac{3}{2}\\right)} \\right\\rceil.\n$$\n数值计算上，$\\frac{6 \\ln 10}{\\ln\\left(\\frac{3}{2}\\right)} \\approx 34.073\\ldots$，所以 $k_{\\min} = 35$。确实，$\\left(\\frac{2}{3}\\right)^{34} \\approx 1.03 \\times 10^{-6}$，并不严格小于 $1.0 \\times 10^{-6}$，而 $\\left(\\frac{2}{3}\\right)^{35} \\approx 6.86 \\times 10^{-7}$，满足要求。", "answer": "$$\\boxed{35}$$", "id": "1428475"}, {"introduction": "我们已经了解了如何放大可靠性，现在让我们看一个具体的协议，并分析其成功概率是如何被决定的。这个练习通过一个具体的例子，帮助您揭开交互式协议的神秘面纱，您将学习通过计算基于特定问题实例（本例中为一个图）结构的成功可能性，来分析协议的内部机制 [@problem_id:1428478]。这是设计和评估此类系统的核心技能，因为它直接关系到协议的完备性（completeness）和可靠性（soundness）。", "problem": "一个证明者（Merlin）希望说服一个验证者（Arthur），一个给定的图 $G=(V, E)$ 包含一个4-团（4-clique），即一个由4个顶点组成的集合，其中任意两个顶点之间都有一条边相连。他们使用以下单轮交互协议：\n\n1.  Arthur 从所有边的集合 $E$ 中均匀随机地选择一条边 $(u, v)$。\n2.  Arthur 将顶点 $u$ 和 $v$ 发送给 Merlin。\n3.  Merlin 拥有无限的计算能力并且知道整个图的结构，他必须从顶点集 $V$ 中回复另外两个顶点 $x$ 和 $y$。\n4.  如果这四个顶点 $\\{u, v, x, y\\}$ 的集合在图 $G$ 中构成一个4-团，Arthur 就接受。否则，Arthur 拒绝。为了进行此项检查，Arthur 会验证与初始边 $(u,v)$ 共同构成该团所需的另外五条边——即 $(u,x), (u,y), (v,x), (v,y)$ 和 $(x,y)$——是否都存在于 $E$ 中。\n\n考虑一个特定的图 $G$，它构建在8个标记为 $\\{v_1, v_2, v_3, v_4, u_1, u_2, u_3, u_4\\}$ 的顶点上。其边集 $E$ 的构成如下：\n- 在顶点集 $\\{v_1, v_2, v_3, v_4\\}$ 上存在一个完全子图（一个团）。\n- 另外四条边将顶点 $v_1$ 连接到其他四个顶点中的每一个：$(v_1, u_1), (v_1, u_2), (v_1, u_3), (v_1, u_4)$。\n- 图中不存在其他边。\n\n假设 Merlin 是诚实的，并且会以最优策略来说服 Arthur（即，如果可能通过选择顶点 $x$ 和 $y$ 来构成一个4-团，Merlin 就会这样做）。Arthur 接受 Merlin 的声明的概率是多少？请将答案表示为最简分数。", "solution": "Arthur 从 $E$ 中均匀地采样一条边。Arthur 接受当且仅当存在顶点 $x$ 和 $y$ 使得 $\\{u,v,x,y\\}$ 导出一个4-团。这仅在采样的边 $(u,v)$ 位于 $G$ 的某个4-团中时才可能。\n\n在给定的图 $G$ 中，唯一的4-团位于顶点集 $\\{v_{1},v_{2},v_{3},v_{4}\\}$ 上。任何顶点 $u_{i}$ 都不能参与任何4-团，因为每个 $u_{i}$ 仅与 $v_{1}$ 相邻，没有其他关联边。\n\n因此：\n- 位于一个4-团中的边的数量，即在 $\\{v_{1},v_{2},v_{3},v_{4}\\}$ 上的 $K_{4}$ 内部的边的数量为：\n$$\n|E_{\\text{clique}}|=\\binom{4}{2}=6.\n$$\n- $G$ 中的总边数是 $K_{4}$ 的6条边加上4条 $(v_{1},u_{i})$ 边：\n$$\n|E|=\\binom{4}{2}+4=10.\n$$\n\n如果 Arthur 采样了 $K_{4}$ 内的6条边中的任意一条，Merlin 就可以选择 $x$ 和 $y$ 作为 $\\{v_{1},v_{2},v_{3},v_{4}\\}$ 中剩余的两个顶点，这样 Arthur 对所需五条边的检查将会成功。如果 Arthur 采样了另外4条边 $(v_{1},u_{i})$ 中的任意一条，则无法补全成一个4-团，Arthur 将会拒绝。\n\n因此，接受概率为\n$$\n\\frac{|E_{\\text{clique}}|}{|E|}=\\frac{6}{10}=\\frac{3}{5}.\n$$", "answer": "$$\\boxed{\\frac{3}{5}}$$", "id": "1428478"}, {"introduction": "设计一个正确的交互式协议是相当微妙的，即使是著名的协议也可能被错误地实现。这个练习挑战您像安全分析师一样思考，识别出著名的图三着色问题的一个协议提案中的根本性缺陷 [@problem_id:1428434]。理解为什么单轮协议是不安全的，突显了可靠性放大等技术以及精心设计验证者挑战的必要性，这是零知识证明实际应用中的一个关键教训。", "problem": "在理论计算机科学领域，零知识证明是一种方法，一方（证明者，Prover）可以通过该方法向另一方（验证者，Verifier）证明他们知道某个值或某个陈述为真，而除了他们知道该值或该陈述为真这一事实之外，不传递任何其他信息。\n\n考虑**图三着色问题**，其目标是确定一个给定图的顶点是否可以用三种可用颜色之一进行着色，使得没有两个相邻顶点共享相同的颜色。这个问题是用于说明交互式证明系统的一个经典例子。\n\n一名学生提出了以下单轮交互协议，用于证明者 Peggy 向验证者 Victor 证明一个具有 $|V|$ 个顶点和 $|E|$ 条边的给定图 $G=(V, E)$ 是可三着色的。\n\n1.  **证明者的准备**：Peggy 从一个有效的三着色方案 $C$ 开始，该方案将 $V$ 中的每个顶点映射到三种颜色之一，例如 $\\{\\text{红色, 绿色, 蓝色}\\}$。然后她随机选择这三种颜色的一个排列 $\\pi$（例如，红色 $\\to$ 蓝色，蓝色 $\\to$ 绿色，绿色 $\\to$ 红色）。她将这个排列应用于她的整个着色方案，以创建一个新的、经过排列的着色方案 $C' = \\pi \\circ C$。\n2.  **承诺**：对于每个顶点 $v \\in V$，Peggy 为其排列后的颜色 $C'(v)$ 生成一个计算上安全的密码学承诺。她将所有 $|V|$ 个承诺发送给 Victor。\n3.  **挑战**：Victor 从图的边集 $E$ 中均匀随机地选择一条边 $(u, v)$，并要求 Peggy 揭示这条边两端点的颜色。\n4.  **揭示**：Peggy 揭示两种颜色 $C'(u)$ 和 $C'(v)$，并提供必要的信息让 Victor 打开两个相应的承诺。\n5.  **验证**：Victor 打开承诺以确保 Peggy 没有在揭示的颜色上说谎。然后他检查 $C'(u) \\neq C'(v)$ 是否成立。如果颜色不同，他接受这一轮的证明。如果颜色相同，他拒绝。\n\n假设密码学承诺方案是完美安全的，该协议旨在实现完备性（诚实的证明者总能成功）、可靠性（作弊的证明者很可能会失败）和零知识性。然而，所提出的单轮协议存在一个根本性缺陷。下列哪个陈述最能描述这个主要缺陷？\n\nA. 协议存在缺陷，因为如果诚实证明者的有效三着色方案恰好与验证者的随机边选择不利地吻合，证明者可能会验证失败。\n\nB. 协议存在缺陷，因为一个试图证明一个不可三着色的图是可三着色的作弊证明者，总能设计出一种策略来通过验证者的检查，无论验证者选择哪条边。\n\nC. 协议存在缺陷，因为对于一个不可三着色的图，在单轮中抓住作弊证明者的概率可能极低（低至 $1/|E|$），从而使得证明者能以非常高的概率成功。\n\nD. 协议存在缺陷，因为通过观察揭示的颜色，验证者可以获得关于证明者秘密三着色方案的重要信息，从而违反了零知识属性。\n\nE. 协议存在缺陷，因为对所有 $|V|$ 个顶点进行密码学承诺需要太多的通信开销，对于交互式证明来说不切实际。", "solution": "设 $G=(V,E)$ 为输入图。假设承诺方案是完美绑定和完美隐藏的。在一轮中，验证者从 $E$ 中均匀随机地选择一条边，并检查所揭示的两个端点颜色是否不同。\n\n完备性：如果 $G$ 是可三着色的，Peggy 有一个有效的着色方案 $C:V\\to\\{\\text{三种颜色}\\}$。对于任何边 $(u,v)\\in E$，根据正常三着色的定义，有 $C(u)\\neq C(v)$。对三种颜色进行排列 $\\pi$ 会保持不等关系，因此对于所有 $(u,v)\\in E$，都有 $(\\pi\\circ C)(u)\\neq(\\pi\\circ C)(v)$。因此，验证者总是会接受。所以，诚实的证明者不会因为随机选择的边而失败，这与选项 A 相矛盾。\n\n单轮可靠性：假设 $G$ 不是可三着色的。作弊的证明者必须发送对某个颜色分配方案 $A:V\\to\\{\\text{三种颜色}\\}$ 具有绑定性的承诺，而这个方案不一定是正常着色。定义在 $A$ 下的单色（坏）边集为\n$$\nB(A)=\\{(u,v)\\in E:\\;A(u)=A(v)\\}.\n$$\n因为 $G$ 不是可三着色的，所以每个分配方案 $A$ 至少有一条坏边，即 $|B(A)|\\geq 1$。验证者均匀随机地选择一条边，并且当且仅当它选中的边在 $B(A)$ 中时，它才会拒绝。因此，单轮中的拒绝概率为\n$$\n\\Pr[\\text{拒绝}]=\\frac{|B(A)|}{|E|}\\geq\\frac{1}{|E|},\n$$\n而接受概率为\n$$\n\\Pr[\\text{接受}]=1-\\frac{|B(A)|}{|E|}\\leq 1-\\frac{1}{|E|}.\n$$\n因此，在单轮中，作弊的证明者可以通过选择一个最小化 $|B(A)|$ 的方案 $A$（可能达到 $|B(A)|=1$），以至少 $1-\\frac{1}{|E|}$ 的概率成功。当 $|E|$ 很大时，这个概率可能非常接近 1。因此，该单轮协议有很大的可靠性误差，不能以高概率有效地抓住作弊的证明者。这直接与选项 C 吻合，并反驳了选项 B。\n\n零知识性：在一个新的随机排列之后揭示两个端点的颜色，除了随机选择的边的端点颜色不同这一事实之外，不会泄露关于底层着色方案的重要信息；该分布可以被模拟。因此，选项 D 不是主要缺陷。\n\n通信：为所有 $|V|$ 个顶点发送承诺是多项式级别的，在交互式证明中是标准做法，所以选项 E 不是一个根本性缺陷。\n\n因此，该单轮协议的根本性缺陷是其可靠性差：对于一个不可三着色的图，在单轮中抓住作弊者的概率可能低至 $\\frac{1}{|E|}$，从而使得证明者能够以高概率成功。", "answer": "$$\\boxed{C}$$", "id": "1428434"}]}
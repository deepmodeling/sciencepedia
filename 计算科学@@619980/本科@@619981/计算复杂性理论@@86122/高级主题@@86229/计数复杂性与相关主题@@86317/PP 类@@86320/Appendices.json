{"hands_on_practices": [{"introduction": "理解一个复杂性类别能力的最佳方式之一，就是看它能解决哪些著名问题。这个练习将引导你完成一个经典证明，即利用布尔可满足性问题（SAT）作为范例，展示复杂性类别 `PP` 包含了整个 `NP` 类别。通过构建一个解决 SAT 问题的概率图灵机，你将亲身体会到 `PP` 基于“多数”的计算模型如何能够容纳像 SAT 这样的难题，从而揭示其强大的计算能力。[@problem_id:1454712]", "problem": "在计算复杂性理论中，`PP` 类（概率多项式时间）包含可在多项式时间内由概率图灵机解决的判定问题，其错误概率小于 $1/2$。概率图灵机（PTM）是一种非确定性图灵机，其每个转移选择都附加了一个概率，通常是公平的硬币投掷。\n\n考虑布尔可满足性问题 (SAT)，该问题询问对于一个给定的布尔公式，是否存在一个满足其的赋值。假设我们有一个包含 $n$ 个不同变量的布尔公式 $\\phi$。设 $S$ 是使公式 $\\phi$ 为真的、对这些变量的真值赋值的唯一赋值总数。\n\n构建一个 PTM 来处理输入 $\\phi$。该 PTM 执行以下算法：\n1. 它通过为 $n$ 个变量中的每一个选择一个真值（真或假）来生成一个变量赋值，记为 $y$。这 $n$ 个选择中的每一个都是独立且均匀随机地做出的。\n2. 它生成一个额外的随机比特 $b \\in \\{0, 1\\}$，其中选择 $b=0$ 的概率等于选择 $b=1$ 的概率。这个选择独立于变量赋值。\n3. 如果赋值 $y$ 满足公式 $\\phi$，或者随机比特为 $b=1$，则 PTM 停机并接受。如果这两个条件都不满足，则 PTM 停机并拒绝。\n\n你的任务是确定该 PTM 将接受的精确概率。请用一个关于 $n$ 和 $S$ 的单一闭式解析表达式来表示你的答案。", "solution": "设 $A$ 为随机赋值 $y$ 满足 $\\phi$ 的事件，设 $B$ 为随机比特等于 $1$ 的事件。PTM 接受当且仅当 $A \\cup B$ 发生。\n\n共有 $2^{n}$ 种可能的赋值，其中有 $S$ 种是满足条件的赋值，所以\n$$\n\\Pr(A)=\\frac{S}{2^{n}}.\n$$\n该比特是公平的，所以\n$$\n\\Pr(B)=\\frac{1}{2}.\n$$\n赋值和比特是独立生成的，因此\n$$\n\\Pr(A \\cap B)=\\Pr(A)\\Pr(B)=\\frac{S}{2^{n}} \\cdot \\frac{1}{2}=\\frac{S}{2^{n+1}}.\n$$\n根据容斥原理，\n$$\n\\Pr(A \\cup B)=\\Pr(A)+\\Pr(B)-\\Pr(A \\cap B)=\\frac{S}{2^{n}}+\\frac{1}{2}-\\frac{S}{2^{n+1}}.\n$$\n合并各项得到\n$$\n\\Pr(\\text{accept})=\\frac{1}{2}+\\frac{S}{2^{n+1}}=\\frac{2^{n}+S}{2^{n+1}}.\n$$", "answer": "$$\\boxed{\\frac{2^{n}+S}{2^{n+1}}}$$", "id": "1454712"}, {"introduction": "既然我们已经见识了 `PP` 的强大（它包含 NP），那么将其与其概率性的“近亲” `BPP`（有界错误概率多项式时间）区分开来就至关重要了。这个练习通过一个假设的 `StrongPP` 类别进行探索，旨在揭示两者之间的本质区别：决策所需的概率“间隙”的大小。通过这个练习，你将理解 `BPP` 的“有界错误”特性要求一个常数大小的概率间隙，而 `PP` 则允许这个间隙是指数级小的，这正是 `PP` 在计算上被认为远比 `BPP` 强大的根本原因。[@problem_id:1454728]", "problem": "在计算复杂度理论中，我们根据解决问题所需的资源来研究各种问题类。考虑一个我们称之为 `StrongPP` 的新复杂度类。一个语言 $L$（一个表示判定问题的字符串集合）属于 `StrongPP`，如果存在一个概率多项式时间图灵机（PPTM）$M$，它在输入长度的多项式时间内运行，使得对于任何输入字符串 $x$：\n- 如果 $x \\in L$，则 $\\Pr[M(x) \\text{ accepts}] \\ge 3/4$。\n- 如果 $x \\notin L$，则 $\\Pr[M(x) \\text{ accepts}] \\le 1/4$。\n\n令 `P`、`BPP`（有界错误概率多项式时间）和 `PP`（概率多项式时间）为标准的复杂度类。下列哪个陈述准确地描述了 `StrongPP` 与这些类之间的关系？（注意：`\\subset` 表示真子集，意味着两个集合不相等。）\n\nA. `StrongPP` = `P`\n\nB. `StrongPP` = `PP`\n\nC. `StrongPP` = `BPP`\n\nD. `P` $\\subset$ `StrongPP` $\\subset$ `BPP`\n\nE. `BPP` $\\subset$ `StrongPP` $\\subset$ `PP`", "solution": "我们比较如下定义的类：一个语言 $L$ 属于 `StrongPP`，如果存在一个概率多项式时间图灵机 $M$，使得对于所有输入 $x$，若 $x \\in L$，则 $\\Pr[M(x)\\text{ accepts}] \\geq \\frac{3}{4}$；若 $x \\notin L$，则 $\\Pr[M(x)\\text{ accepts}] \\leq \\frac{1}{4}$。\n\n首先，回顾 `BPP` 的标准定义：一个语言 $L$ 属于 `BPP`，如果存在一个概率多项式时间图灵机 $M$，使得对于所有输入 $x$，若 $x \\in L$，则 $\\Pr[M(x)\\text{ accepts}] \\geq \\frac{2}{3}$；若 $x \\notin L$，则 $\\Pr[M(x)\\text{ accepts}] \\leq \\frac{1}{3}$。一个标准结论是，`BPP` 对具体的常数间隙不敏感：对于某个常数 $\\delta>0$，任何满足 $a-b \\geq \\delta$ 和 $a>\\frac{1}{2}>b$ 的固定常数 $a,b$，通过独立重复和多数表决的错误消减方法，都会得到相同的类。\n\n包含关系 `StrongPP` $\\subseteq$ `BPP`：`StrongPP` 的阈值已经满足了比 `BPP` 的经典阈值更强的界限，即 $\\frac{3}{4} \\geq \\frac{2}{3}$ 且 $\\frac{1}{4} \\leq \\frac{1}{3}$。因此，任何有 `StrongPP` 见证机的语言也直接满足 `BPP` 的判据，所以 `StrongPP` $\\subseteq$ `BPP`。\n\n包含关系 $\\text{BPP} \\subseteq \\text{StrongPP}$：令 $L \\in \\text{BPP}$。那么存在一个概率多项式时间机器 $M$，使得\n$$\nx \\in L \\implies \\Pr[M(x)\\text{ accepts}] \\geq \\frac{2}{3}, \\quad x \\notin L \\implies \\Pr[M(x)\\text{ accepts}] \\leq \\frac{1}{3}.\n$$\n构建一个机器 $M^{\\prime}$，它在输入 $x$ 上独立运行 $M$ 共 $k$ 次，并且当且仅当严格多于 $\\frac{k}{2}$ 次的运行接受时（多数表决），$M^{\\prime}$ 才接受。令 $X_{1},\\dots,X_{k}$ 为每次运行是否接受的独立同分布指示变量，且 $S=\\sum_{i=1}^{k} X_{i}$。\n\n对于 $x \\in L$，我们有 $\\mathbb{E}[S] \\geq \\frac{2}{3}k$。错误事件是 $S \\leq \\frac{k}{2}$。根据 Hoeffding 不等式，对于在 $[0,1]$ 区间内的有界独立变量，\n$$\n\\Pr\\left[S - \\mathbb{E}[S] \\leq -t\\right] \\leq \\exp\\left(-\\frac{2 t^{2}}{k}\\right).\n$$\n取 $t = \\mathbb{E}[S] - \\frac{k}{2} \\geq \\frac{2}{3}k - \\frac{k}{2} = \\frac{k}{6}$，我们得到\n$$\n\\Pr\\left[S \\leq \\frac{k}{2}\\right] \\leq \\exp\\left(-\\frac{2 (\\frac{k}{6})^{2}}{k}\\right) = \\exp\\left(-\\frac{k}{18}\\right).\n$$\n因此对于 $x \\in L$，$\\Pr[M^{\\prime}(x)\\text{ accepts}] \\geq 1 - \\exp\\left(-\\frac{k}{18}\\right)$。类似地，对于 $x \\notin L$，由于 $\\mathbb{E}[S] \\leq \\frac{1}{3}k$，接受事件 $S \\geq \\frac{k}{2}$ 是一个至少为 $\\frac{k}{6}$ 的向上偏差，可得\n$$\n\\Pr\\left[M^{\\prime}(x)\\text{ accepts}\\right] = \\Pr\\left[S \\geq \\frac{k}{2}\\right] \\leq \\exp\\left(-\\frac{k}{18}\\right).\n$$\n选择任意满足\n$$\n\\exp\\left(-\\frac{k}{18}\\right) \\leq \\frac{1}{4} \\quad \\Longleftrightarrow \\quad k \\geq 18 \\ln 4.\n$$\n的固定整数 $k$。这个 $k$ 是一个常数，所以 $M^{\\prime}$ 在概率多项式时间内运行，并达到\n$$\nx \\in L \\implies \\Pr[M^{\\prime}(x)\\text{ accepts}] \\geq \\frac{3}{4}, \\quad x \\notin L \\implies \\Pr[M^{\\prime}(x)\\text{ accepts}] \\leq \\frac{1}{4}.\n$$\n因此，$L \\in \\text{StrongPP}$，这就证明了 $\\text{BPP} \\subseteq \\text{StrongPP}$。\n\n结合两个包含关系，我们得到 $\\text{StrongPP} = \\text{BPP}$。因此，选项中的正确选择是 C。\n\n最后，观察其他选项为何不正确或没有根据：A 意味着 $\\text{BPP} = \\text{P}$，这是一个开放问题；B 意味着 $\\text{BPP} = \\text{PP}$，这尚不确定，但被广泛认为是错误的；D 和 E 断言了真包含关系，但由于我们已经证明了 `StrongPP` = `BPP`，所以这是不成立的。", "answer": "$$\\boxed{C}$$", "id": "1454728"}, {"introduction": "这个练习旨在检验你对 `PP` 定义的深刻理解。`PP` 定义中的 $1/2$ 阈值是不可动摇的吗？这个思想实验挑战了这一看似固定的规则。通过证明一个使用 $1/3$ 阈值的等价类别可以被构建出来，你将体会到基于多数的计算概念的抽象性和灵活性，并理解 `PP` 的核心在于“多数路径接受”这一思想，而非某个具体的数值阈值。[@problem_id:1454693]", "problem": "在计算复杂性理论中，类 `PP` (Probabilistic Polynomial time，概率多项式时间) 是根据概率图灵机的行为来定义的。一个语言 $L$ 属于 `PP`，如果存在一个多项式时间概率图灵机 $M$，使得对于任意长度为 $n$ 的输入串 $x$：\n1. 如果 $x$ 在 $L$ 中，则 $M(x)$ 接受的概率大于 $1/2$。\n   $x \\in L \\implies \\Pr[M(x) \\text{ accepts}] > \\frac{1}{2}$\n2. 如果 $x$ 不在 $L$ 中，则 $M(x)$ 接受的概率小于或等于 $1/2$。\n   $x \\notin L \\implies \\Pr[M(x) \\text{ accepts}] \\le \\frac{1}{2}$\n\n考虑一个假设的复杂性类，我们称之为 $\\text{PP}_{1/3}$，它是用一个不同的概率阈值定义的。一个语言 $L'$ 属于 $\\text{PP}_{1/3}$，如果存在一个多项式时间概率图灵机 $M'$，使得对于任意输入串 $x$：\n1. 如果 $x$ 在 $L'$ 中，则 $M'(x)$ 接受的概率大于 $1/3$。\n   $x \\in L' \\implies \\Pr[M'(x) \\text{ accepts}] > \\frac{1}{3}$\n2. 如果 $x$ 不在 $L'$ 中，则 $M'(x)$ 接受的概率小于或等于 $1/3$。\n   $x \\notin L' \\implies \\Pr[M'(x) \\text{ accepts}] \\le \\frac{1}{3}$\n\n根据这些定义，复杂性类 `PP` 和假设的类 $\\text{PP}_{1/3}$ 之间是什么关系？\n\nA. $\\text{PP}_{1/3}$ 是 `PP` 的真子集。\nB. `PP` 是 $\\text{PP}_{1/3}$ 的真子集。\nC. $\\text{PP}_{1/3}$ 等于 `PP`。\nD. $\\text{PP}_{1/3}$ 等于类 `BPP` (Bounded-error Probabilistic Polynomial time)。\nE. 类 `PP` 和 $\\text{PP}_{1/3}$ 是不可比较的 (没有一个类是另一个的子集)。", "solution": "为了确定 `PP` 和 $\\text{PP}_{1/3}$ 之间的关系，我们将研究每个类是否是另一个的子集。我们将通过展示如何将一个类的机器转换为另一个类的机器，而不改变它所判定的语言，来证明这一点。\n\n首先，我们来证明 $\\text{PP}_{1/3} \\subseteq \\text{PP}$。\n设 $L$ 是 $\\text{PP}_{1/3}$ 中的一个语言。这意味着存在一个多项式时间概率图灵机，我们称之为 $M_{1/3}$，使得对于任意输入 $x$：\n- 如果 $x \\in L$，则 $p(x) = \\Pr[M_{1/3}(x) \\text{ accepts}] > 1/3$。\n- 如果 $x \\notin L$，则 $p(x) = \\Pr[M_{1/3}(x) \\text{ accepts}] \\le 1/3$。\n\n我们需要构造一个新的多项式时间概率机器 $M_{1/2}$，它判定相同的语言 $L$，但遵守 `PP` 的定义（阈值为 $1/2$）。我们想要找到一个概率过程，能将接受概率 $p(x)$ 转换为一个新的概率 $p'(x)$，使得 $p(x) > 1/3 \\implies p'(x) > 1/2$ 且 $p(x) \\le 1/3 \\implies p'(x) \\le 1/2$。实现这一点的一个简单方法是使用线性变换 $p'(x) = ap(x) + b$，它必须将阈值 $1/3$ 映射到 $1/2$。所以，我们需要 $a(1/3) + b = 1/2$。该变换还必须将概率映射到有效的概率，并且它必须是单调递增的（$a > 0$）以保持不等式的方向。\n\n我们选择变换 $p'(x) = \\frac{3}{4}p(x) + \\frac{1}{4}$。\n我们来验证这个变换：\n1. 它是 $p(x)$ 的一个增函数，因为系数 $3/4$ 是正的。\n2. 如果 $p(x) = 1/3$，则 $p'(x) = \\frac{3}{4}\\left(\\frac{1}{3}\\right) + \\frac{1}{4} = \\frac{1}{4} + \\frac{1}{4} = \\frac{1}{2}$。\n3. 对于 $p(x) > 1/3$，我们有 $p'(x) > 1/2$。对于 $p(x) \\le 1/3$，我们有 $p'(x) \\le 1/2$。\n4. 对于 $p(x) \\in [0, 1]$，$p'(x)$ 的范围从 $p'(0)=1/4$ 到 $p'(1)=1$，这是一个有效的概率范围。\n\n我们可以构造一个机器 $M_{1/2}$ 来实现这个概率变换。$M_{1/2}$ 在输入 $x$ 上执行以下步骤：\n1. 生成两个随机位（例如，抛掷两个公平的硬币）。这会产生4个等可能的结果。\n2. 如果结果是，比如说 `00`（其出现概率为 $1/4$），则机器立即接受。\n3. 对于其他三个结果（其总出现概率为 $3/4$），机器运行 $M_{1/3}(x)$ 并返回其结果。\n\n$M_{1/2}$ 的总接受概率是：\n$\\Pr[M_{1/2}(x) \\text{ accepts}] = \\Pr[\\text{outcome is `00`}] \\cdot 1 + \\Pr[\\text{outcome is not `00`}] \\cdot \\Pr[M_{1/3}(x) \\text{ accepts}]$\n$p'(x) = \\frac{1}{4} \\cdot 1 + \\frac{3}{4} \\cdot p(x) = \\frac{3}{4}p(x) + \\frac{1}{4}$。\n这个机器 $M_{1/2}$ 在多项式时间内运行，因为 $M_{1/3}$ 也是如此。它根据 `PP` 的定义正确地判定了 $L$。因此，任何在 $\\text{PP}_{1/3}$ 中的语言也在 `PP` 中，这意味着 $\\text{PP}_{1/3} \\subseteq \\text{PP}$。\n\n其次，我们来证明 $\\text{PP} \\subseteq \\text{PP}_{1/3}$。\n设 $L$ 是 `PP` 中的一个语言，由一个机器 $M_{1/2}$ 判定。令 $p(x) = \\Pr[M_{1/2}(x) \\text{ accepts}]$。\n- 如果 $x \\in L$，则 $p(x) > 1/2$。\n- 如果 $x \\notin L$，则 $p(x) \\le 1/2$。\n\n我们需要构造一个新机器 $M'_{1/3}$，它使用 $\\text{PP}_{1/3}$ 的概率阈值来判定 $L$。我们需要一个变换 $p'(x)$，使得 $p(x) > 1/2 \\implies p'(x) > 1/3$ 且 $p(x) \\le 1/2 \\implies p'(x) \\le 1/3$。阈值 $1/2$ 必须映射到 $1/3$。\n我们尝试线性变换 $p'(x) = \\frac{2}{3}p(x)$。\n1. 它是 $p(x)$ 的一个增函数。\n2. 如果 $p(x) = 1/2$，则 $p'(x) = \\frac{2}{3}\\left(\\frac{1}{2}\\right) = \\frac{1}{3}$。\n3. 对于 $p(x) > 1/2$，我们有 $p'(x) > 1/3$。对于 $p(x) \\le 1/2$，我们有 $p'(x) \\le 1/3$。\n4. 对于 $p(x) \\in [0, 1]$，$p'(x)$ 的范围从 $0$ 到 $2/3$，这是一个有效的概率范围。\n\n我们可以构造一个机器 $M'_{1/3}$ 来实现这一点。$\\frac{2}{3}p(x)$ 的概率对应于两个独立事件的联合概率，这两个事件的概率分别为 $2/3$ 和 $p(x)$。\n机器 $M'_{1/3}$ 在输入 $x$ 上执行以下步骤：\n1. 模拟一个成功概率为 $2/3$ 的事件。例如，模拟一次公平的三面骰子投掷。如果是1或2，我们“成功”。如果是3，我们“失败”。\n2. 如果这第一个事件失败（概率为 $1/3$），机器立即拒绝。\n3. 如果第一个事件成功（概率为 $2/3$），机器运行 $M_{1/2}(x)$ 并返回其结果。\n\n$M'_{1/3}$ 的总接受概率是：\n$\\Pr[M'_{1/3}(x) \\text{ accepts}] = \\Pr[\\text{first event succeeds}] \\cdot \\Pr[M_{1/2}(x) \\text{ accepts}]$\n$p'(x) = \\frac{2}{3} \\cdot p(x)$。\n这个机器 $M'_{1/3}$ 在多项式时间内运行，并且根据 $\\text{PP}_{1/3}$ 的定义正确地判定了 $L$。因此，$\\text{PP} \\subseteq \\text{PP}_{1/3}$。\n\n既然我们已经证明了 $\\text{PP}_{1/3} \\subseteq \\text{PP}$ 并且 $\\text{PP} \\subseteq \\text{PP}_{1/3}$，那么这两个类必然相等。\n\n类 `BPP` 是不同的，因为它要求概率间隙是多项式大的（例如，对于“是”的情况，接受概率 > 2/3，对于“否”的情况，接受概率 < 1/3），而 `PP`（以及 $\\text{PP}_{1/3}$）允许围绕阈值的间隙是指数级小的。因此，$\\text{PP}_{1/3}$ 不等于 `BPP`。", "answer": "$$\\boxed{C}$$", "id": "1454693"}]}
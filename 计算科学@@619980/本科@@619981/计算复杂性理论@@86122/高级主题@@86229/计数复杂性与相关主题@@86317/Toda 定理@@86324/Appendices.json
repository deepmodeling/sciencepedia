{"hands_on_practices": [{"introduction": "本练习旨在巩固对户田定理核心陈述的理解。通过分析多项式谱系 ($PH$) 与其各个层级 ($\\Sigma_k^P$) 之间的集合关系，我们可以验证我们对该定理适用范围及相关基本定义的把握。这是一个针对基础逻辑的健全性检查，确保我们能够从户田定理 $PH \\subseteq P^{\\#P}$ 直接推导出其对谱系中任一层级的蕴涵。[@problem_id:1467179]", "problem": "在计算复杂性理论中，我们根据解决问题所需的资源来对问题进行分类。让我们定义几个关键概念。\n- $P$ 类包含所有可以由确定性图灵机在多项式时间内解决的判定问题。\n- $\\#P$ 类（读作“sharp-P”）是一类函数问题，而非判定问题。对于 $NP$ 类中的一个给定问题，其对应的 $\\#P$ 问题是计算接受计算路径的数量。\n- 预言机是一种带有“黑箱”（即预言机）的图灵机，它可以在单个步骤内解决来自特定复杂性类的问题。$P^C$ 类表示可由带有复杂性类 $C$ 的预言机的确定性图灵机在多项式时间内解决的判定问题集合。因此，$P^{\\#P}$ 是指可由一台带有能够解决 $\\#P$ 中任何计数问题的预言机的机器在多项式时间内解决的判定问题类。\n- 多项式谱系（PH）是一个推广了 $P$ 类、$NP$ 类和 co-$NP$ 类的复杂性类层次结构。它被定义为 $PH = \\bigcup_{k \\ge 0} \\Sigma_k^P$，其中 $\\Sigma_k^P$ 代表谱系的第 $k$ 层。根据定义，$\\Sigma_0^P = P$，$\\Sigma_1^P = NP$，并且对于 $k > 1$，$\\Sigma_k^P$ 包含可由带有 $\\Sigma_{k-1}^P$ 预言机的非确定性多项式时间机器解决的问题。\n\n该领域的一个著名结果是 Toda 定理，其内容如下：\n$$ PH \\subseteq P^{\\#P} $$\n\n基于这些定义和 Toda 定理的陈述，以下哪个陈述为包含关系 $\\Sigma_2^P \\subseteq P^{\\#P}$ 的成立提供了最直接和最准确的推理？\n\nA. 根据定义，$\\Sigma_2^P$ 类是构成多项式谱系（$PH$）的层次之一。由于 Toda 定理指出整个 $PH$ 都包含在 $P^{\\#P}$ 内，因此谱系的任何一个单独的层，包括 $\\Sigma_2^P$，也必定包含在 $P^{\\#P}$ 内。\n\nB. Toda 定理证明了计数问题在根本上不比多项式谱系第二层的判定问题更难。因此，$P^{\\#P}$ 中的任何问题都可以归约到 $\\Sigma_2^P$ 中的问题，这意味着 $\\Sigma_2^P \\subseteq P^{\\#P}$。\n\nC. $\\Sigma_2^P$ 类等价于可以用 $\\#P$ 预言机解决的问题类。Toda 定理证明了这种等价性，形式上表述为 $\\Sigma_2^P = P^{\\#P}$，由此可得包含关系 $\\Sigma_2^P \\subseteq P^{\\#P}$ 是一个平凡的推论。\n\nD. 多项式谱系的定义是 $PH = \\bigcup_{k \\ge 0} \\Sigma_k^P$。Toda 定理指出 $PH \\subseteq P^{\\#P}$。这意味着部分但非全部的 $\\Sigma_k^P$ 层被包含在 $P^{\\#P}$ 中。Toda 定理的具体证明显示 $k=2$ 是这样的一个特例。\n\nE. $\\Sigma_2^P$ 类被定义为 $NP^{NP}$。由于 $\\#P$ 中的问题涉及计算 $NP$ 机器中的路径数量，因此可以推断，带有 $\\#P$ 预言机的机器比带有 $NP$ 预言机的 $NP$ 机器更强大。这种能力差异直接意味着包含关系 $\\Sigma_2^P \\subseteq P^{\\#P}$。", "solution": "我们仅使用由定义和 Toda 定理所蕴含的集合论包含关系。\n\n根据多项式谱系的定义，\n$$\nPH=\\bigcup_{k \\ge 0}\\Sigma_{k}^{P}.\n$$\n对于任何集族 $\\{S_{k}\\}_{k \\ge 0}$ 和任何固定索引 $j$，并集的基本性质蕴含了\n$$\nS_{j} \\subseteq \\bigcup_{k \\ge 0} S_{k}.\n$$\n将此应用于 $S_{k}=\\Sigma_{k}^{P}$ 和 $j=2$ 的情况，我们得到\n$$\n\\Sigma_{2}^{P} \\subseteq PH.\n$$\nToda 定理指出\n$$\nPH \\subseteq P^{\\#P}.\n$$\n根据集合包含的传递性，即如果 $A \\subseteq B$ 且 $B \\subseteq C$，则 $A \\subseteq C$，我们得出结论\n$$\n\\Sigma_{2}^{P} \\subseteq PH \\subseteq P^{\\#P} \\quad \\Rightarrow \\quad \\Sigma_{2}^{P} \\subseteq P^{\\#P}.\n$$\n在给出的选项中，这正是陈述 A 中阐述的推理过程。陈述 B、C、D 和 E 要么颠倒了包含关系的方向，要么断言了一个未经证实的等价关系，要么误解了并集包含的含义，要么依赖于非形式化的能力比较而非所引用的定理。", "answer": "$$\\boxed{A}$$", "id": "1467179"}, {"introduction": "户田定理可能看起来很抽象，但其威力在于将逻辑量化（如在 $PH$ 中）与算术计数联系起来。本实践通过著名的图三着色问题，提供了一个具体的例子[@problem_id:1467193]。我们将探索拥有计数能力（一个 $\\#P$ 函数）如何能让我们高效地解决相应的“是/否”判定问题，从而阐明 $P^{\\#P}$ 类的本质。", "problem": "在计算复杂性理论领域，Toda定理表明，多项式层级（PH）中的任何问题都可以由一台能够访问计数预言机（一个被称为 $P^{\\#P}$ 的类）的多项式时间机器解决。考虑一个经典的**NP**完全判定问题——3-着色问题：给定一个简单无向图，能否用三种颜色之一对其顶点进行着色，使得任意两个相邻顶点不共享相同颜色？\n\n一位计算机科学家旨在通过使用一个特殊的硬件预言机来解决输入图 $G=(V, E)$ 的3-着色判定问题。这个名为 `COUNT_3_COLOR` 的预言机，输入任意图 $G'$，只需一步即可返回 $G'$ 的不同有效3-着色方案的确切数量。\n\n该科学家的算法如下：\n1.  取输入图 $G$。\n2.  构造一个新的、修改后的图 $G_{mod}$。\n3.  调用预言机以找到 $C_{mod} = \\text{COUNT\\_3\\_COLOR}(G_{mod})$。\n4.  使用 $C_{mod}$ 的值计算原始图 $G$ 的有效3-着色的数量 $C_{orig}$。\n5.  当且仅当 $C_{orig} > 0$ 时，断定 $G$ 是3-可着色的。\n\n$G_{mod}$ 由 $G$ 构造的过程如下：首先，创建一个“锚”部件。该部件由一组四个新顶点 $A = \\{a_1, a_2, a_3, a_4\\}$ 组成，它们连接成一条路径（即，包含边 $(a_1, a_2)$、$(a_2, a_3)$ 和 $(a_3, a_4)$）。然后，从原始图的顶点集 $V$ 中任意选择一个顶点 $v_0$，并将其连接到锚路径的一个端点，即 $a_1$。最终得到的图就是 $G_{mod}$。\n\n已知着色数量之间的关系是直接的乘法关系：$C_{mod} = K \\cdot C_{orig}$，其中 $K$ 为某个整数常数。请确定该科学家必须用来计算 $C_{orig}$（作为 $C_{mod}$ 的函数）的解析表达式。", "solution": "我们分析原始图 $G$ 的每一种有效3-着色可以扩展成多少种修改后图 $G_{mod}$ 的有效3-着色。\n\n固定 $G$ 的任意一种有效3-着色。设分配给所选顶点 $v_{0}$ 的颜色为 $c_{0}\\in\\{1,2,3\\}$。在 $G_{mod}$ 中，与 $G$ 相关的新增边只有 $v_{0}$ 和 $a_{1}$ 之间的边，以及锚路径 $(a_{1},a_{2},a_{3},a_{4})$ 内部的边。因此，扩展该着色等同于计算路径 $a_{1}$-$a_{2}$-$a_{3}$-$a_{4}$ 在约束条件 $a_{1}\\neq c_{0}$ 下的有效3-着色的数量。\n\n分步计算扩展数量：\n- $a_{1}$ 恰好有 $2$ 种选择（$\\{1,2,3\\}\\setminus\\{c_{0}\\}$ 中的任意颜色）。\n- 给定 $a_{1}$ 的颜色后，顶点 $a_{2}$ 有 $2$ 种选择（其颜色必须与 $a_{1}$ 不同）。\n- 给定 $a_{2}$ 的颜色后，顶点 $a_{3}$ 有 $2$ 种选择（其颜色必须与 $a_{2}$ 不同）。\n- 给定 $a_{3}$ 的颜色后，顶点 $a_{4}$ 有 $2$ 种选择（其颜色必须与 $a_{3}$ 不同）。\n\n根据乘法法则，锚路径的扩展数量为\n$$\nK=2\\cdot 2\\cdot 2\\cdot 2=16.\n$$\n此计数与 $G$ 的具体着色方案无关（它仅取决于 $a_{1}$ 必须避开单一颜色 $c_{0}$ 这一事实以及路径的结构）。因此，$G_{mod}$ 的有效3-着色总数满足\n$$\nC_{mod}=K\\cdot C_{orig}=16\\cdot C_{orig}.\n$$\n求解 $C_{orig}$ 可得\n$$\nC_{orig}=\\frac{C_{mod}}{16}.\n$$\n因此，该科学家应该通过将 $C_{mod}$ 除以 $16$ 来计算 $C_{orig}$。", "answer": "$$\\boxed{\\frac{C_{mod}}{16}}$$", "id": "1467193"}, {"introduction": "户田定理的证明用到了一个优美而强大的技术，称为“算术化”，即将逻辑语句转化为多项式方程。其中的一个关键步骤是利用奇偶性（计数的奇偶）来推导出精确信息。本练习模拟了这一过程的一部分，演示了如何通过对一个奇偶性预言机（$\\oplus P$ 预言机）的查询来重构一个确切的数字，揭示了模2计数的惊人力量[@problem_id:1467165]。", "problem": "在计算复杂性理论的研究中，能够计算一个问题的解的数量，或者至少确定解数量的奇偶性，是一个强有力的工具。这一原则是诸如 Toda 定理等开创性成果的基石，该定理将多项式时间层级与计数复杂性类联系起来。\n\n考虑一个场景，您正在研究一个计算搜索问题。对于一个给定的输入，存在未知数量的有效解，我们称这个数量为 $N$。您得到的约束是 $0 \\le N < 256$。虽然您无法直接计算 $N$，但您可以使用一个特殊的预言机 $\\mathcal{O}$。这个预言机接受一个非负整数 $k$ 作为输入，并在多项式时间内确定二项式系数 $\\binom{N}{k}$ 的奇偶性。预言机的输出是 $\\mathcal{O}(k) = \\binom{N}{k} \\pmod 2$。这类查询类似于使用复杂性类 $\\oplus P$ (Parity-P) 的预言机。\n\n您执行了一系列查询并收到以下数据：\n*   $\\mathcal{O}(17) = 1$\n*   $\\mathcal{O}(18) = 1$\n*   $\\mathcal{O}(20) = 0$\n*   $\\mathcal{O}(24) = 0$\n*   $\\mathcal{O}(49) = 1$\n*   $\\mathcal{O}(96) = 0$\n*   $\\mathcal{O}(130) = 1$\n\n根据这些结果，确定整数 $N$ 的确切值。所提供的信息足以找到一个唯一解。", "solution": "我们使用关于模 2 的卢卡斯定理。将 $N$ 和 $k$ 写成二进制形式 $N=\\sum_{i=0}^{7}N_{i}2^{i}$ 和 $k=\\sum_{i=0}^{7}k_{i}2^{i}$，其中 $N_{i},k_{i}\\in\\{0,1\\}$。卢卡斯定理表明\n$$\n\\binom{N}{k}\\equiv\\prod_{i=0}^{7}\\binom{N_{i}}{k_{i}}\\pmod 2.\n$$\n在域 $\\mathbb{F}_{2}$ 上，$\\binom{1}{1}=\\binom{1}{0}=\\binom{0}{0}=1$ 并且 $\\binom{0}{1}=0$，因此 $\\binom{N}{k}\\equiv 1 \\pmod 2$ 当且仅当对所有的 $i$ 都有 $k_{i}\\le N_{i}$，即 $k$ 的每个为 1 的比特位，在 $N$ 中对应的比特位也为 1。\n\n因为 $0\\le N<256$，所以我们有比特位 $N_{0},\\dots,N_{7}$。我们通过将 $k$ 表示为 2 的幂次和来分析每个查询：\n\n1) $k=17=2^{4}+2^{0}$。因为 $\\mathcal{O}(17)=1$，所以我们必须有 $N_{4}=1$ 和 $N_{0}=1$。\n\n2) $k=18=2^{4}+2^{1}$。因为 $\\mathcal{O}(18)=1$，所以我们必须有 $N_{4}=1$ 和 $N_{1}=1$。这与第1步的结果一致。\n\n3) $k=20=2^{4}+2^{2}$。因为 $\\mathcal{O}(20)=0$，所以 $N_{4}$ 或 $N_{2}$ 中至少有一个是 $0$。从第1步我们知道 $N_{4}=1$，因此 $N_{2}=0$。\n\n4) $k=24=2^{4}+2^{3}$。因为 $\\mathcal{O}(24)=0$，所以 $N_{4}$ 或 $N_{3}$ 中至少有一个是 $0$。又知 $N_{4}=1$，我们得到 $N_{3}=0$。\n\n5) $k=49=2^{5}+2^{4}+2^{0}$。因为 $\\mathcal{O}(49)=1$，所以我们必须有 $N_{5}=1$，这也再次证实了 $N_{4}=1$ 和 $N_{0}=1$。\n\n6) $k=96=2^{6}+2^{5}$。因为 $\\mathcal{O}(96)=0$，所以 $N_{6}$ 或 $N_{5}$ 中至少有一个是 $0$。从第5步我们有 $N_{5}=1$，因此 $N_{6}=0$。\n\n7) $k=130=2^{7}+2^{1}$。因为 $\\mathcal{O}(130)=1$，所以我们必须有 $N_{7}=1$，这与第2步得出的 $N_1=1$ 一致。\n\n收集所有的比特位，我们得到\n$$\n(N_{7},N_{6},N_{5},N_{4},N_{3},N_{2},N_{1},N_{0})=(1,0,1,1,0,0,1,1).\n$$\n因此，\n$$\nN=2^{7}+2^{5}+2^{4}+2^{1}+2^{0}=128+32+16+2+1=179.\n$$\n所有八个比特位都已确定，因此解是唯一的。", "answer": "$$\\boxed{179}$$", "id": "1467165"}]}
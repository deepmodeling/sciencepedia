{"hands_on_practices": [{"introduction": "$NP$ 和 $co-NP$ 之间的关系是计算机科学中最重要的开放问题之一。本练习邀请你探索一个经典的假设情景：如果这两个类被证明是相等的，会发生什么？通过解决这个问题，你将看到这个单一的假设如何引发多米诺骨牌效应，导致整个多项式时间层级崩塌到它的第一层。[@problem_id:1416429]", "problem": "在计算复杂性理论中，多项式层级（Polynomial Hierarchy, PH）提供了一种根据表达它们所需的逻辑量词的复杂性来对问题进行分类的方法。该层级是分层构建的。其基础是 $\\Sigma_0^P = \\Pi_0^P = \\text{P}$，即在多项式时间内可解的问题类。对于 $k \\ge 0$，更高级别的定义是递归的：\n- $\\Sigma_{k+1}^P$ 是可以由一台非确定性多项式时间图灵机决定的语言类，该图灵机可以访问一个能解决 $\\Sigma_k^P$ 中任何问题的预言机。这个类通常表示为 $\\text{NP}^{\\Sigma_k^P}$。\n- $\\Pi_{k+1}^P$ 是其补集在 $\\Sigma_{k+1}^P$ 中的语言类。这等价于 $\\text{coNP}^{\\Sigma_k^P}$。\n\n第一层级 $\\Sigma_1^P$ 是具有“存在”量词的问题类，也就是非确定性多项式时间（Nondeterministic Polynomial time, NP）。其补集类 $\\Pi_1^P$ 是 coNP。整个多项式层级是所有这些层级的并集：$\\text{PH} = \\bigcup_{k \\ge 0} \\Sigma_k^P$。\n\n现在，假设一位研究人员做出了一项重大的、假设性的发现：他们证明了对于 NP 中的任何语言 $L$，其补集 $\\bar{L}$ 也在 NP 中。这将意味着 NP 和 coNP 这两个类是相同的。如果这个假设（$\\text{NP} = \\text{coNP}$）成立，多项式层级的结构将被极大地简化。\n\n在这一假设下，PH 将被证明等于下列哪个著名的复杂性类？\n\nA. P\n\nB. NP\n\nC. PSPACE\n\nD. EXPTIME\n\nE. 多项式层级不会崩塌，并且仍然是一个由不同类组成的无限层级。", "solution": "我们从多项式层级的标准量词刻画开始。一个语言 $L$ 属于 $\\Sigma_{k}^{P}$，如果存在一个多项式时间可判定的谓词 $R$ 和一个多项式 $p$，使得\n$$\nx \\in L \\iff \\exists y_{1}, |y_{1}| \\le p(|x|)\\ \\forall y_{2}, |y_{2}| \\le p(|x|)\\ \\exists y_{3}, |y_{3}| \\le p(|x|)\\ \\cdots\\ Q_{k} y_{k}, |y_{k}| \\le p(|x|)\\ R(x,y_{1},\\ldots,y_{k}) = 1,\n$$\n其中量词交替出现，当 $k$ 是奇数时 $Q_{k}$ 是 $\\exists$，当 $k$ 是偶数时 $Q_{k}$ 是 $\\forall$。类似地，$\\Pi_{k}^{P}$ 以一个全称量词开始并交替。\n\n假设 $\\text{NP} = \\text{coNP}$。那么 $\\Sigma_{1}^{P} = \\Pi_{1}^{P}$。\n\n首先，我们证明 $\\Sigma_{2}^{P} \\subseteq \\text{NP}$。令 $L \\in \\Sigma_{2}^{P}$。那么存在多项式 $p$ 和多项式时间谓词 $R$，使得\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ \\forall z,\\ |z| \\le p(|x|)\\ R(x,y,z) = 1.\n$$\n定义谓词\n$$\nA(x,y) \\iff \\forall z,\\ |z| \\le p(|x|)\\ R(x,y,z) = 1.\n$$\n其补集是\n$$\n\\neg A(x,y) \\iff \\exists z,\\ |z| \\le p(|x|)\\ \\big(R(x,y,z) = 0\\big),\n$$\n这是一个 $\\text{NP}$ 属性，因为它断言存在一个可在多项式时间内验证的短见证 $z$。因此 $A(x,y) \\in \\text{coNP}$。根据假设 $\\text{NP} = \\text{coNP}$，我们有 $A(x,y) \\in \\text{NP}$。因此，\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ A(x,y).\n$$\n由于 $A \\in \\text{NP}$，存在一个多项式时间谓词 $P$ 和一个多项式 $q$，使得\n$$\nA(x,y) \\iff \\exists w,\\ |w| \\le q(|x|+|y|)\\ P(x,y,w) = 1.\n$$\n于是\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ \\exists w,\\ |w| \\le q(|x|+|y|)\\ P(x,y,w) = 1.\n$$\n将 $(y,w)$ 合并为一个多项式长度的单一见证 $u$，并注意到 $P$ 是多项式时间可判定的，可得\n$$\nx \\in L \\iff \\exists u,\\ |u| \\le r(|x|)\\ P'(x,u) = 1\n$$\n对于某个多项式 $r$ 和多项式时间谓词 $P'$。因此 $L \\in \\text{NP}$。由于 $\\text{NP} = \\Sigma_{1}^{P} \\subseteq \\Sigma_{2}^{P}$，我们得出结论 $\\Sigma_{2}^{P} = \\text{NP}$。\n\n我们现在通过归纳法推广到所有层级。假设对于某个 $k \\ge 1$ 有 $\\Sigma_{k}^{P} = \\text{NP}$。那么根据假设，$\\Pi_{k}^{P} = \\text{co}\\Sigma_{k}^{P} = \\text{coNP} = \\text{NP}$。考虑 $L \\in \\Sigma_{k+1}^{P}$。根据量词刻画，\n$$\nx \\in L \\iff \\exists y,\\ |y| \\le p(|x|)\\ B(x,y),\n$$\n其中 $B(\\cdot,\\cdot) \\in \\Pi_{k}^{P}$。根据归纳假设 $\\Pi_{k}^{P} = \\text{NP}$ 以及 $\\text{NP} = \\text{coNP}$，我们有 $B \\in \\text{NP}$。如上所述，通过合并见证，作用于一个 $\\text{NP}$ 谓词上的存在量词会崩塌到 $\\text{NP}$，因此 $L \\in \\text{NP}$。因此 $\\Sigma_{k+1}^{P} \\subseteq \\text{NP}$，且由于 $\\text{NP} \\subseteq \\Sigma_{k+1}^{P}$，我们得到 $\\Sigma_{k+1}^{P} = \\text{NP}$。\n\n通过归纳法，对于所有 $k \\ge 1$，都有 $\\Sigma_{k}^{P} = \\Pi_{k}^{P} = \\text{NP}$。所以，\n$$\n\\text{PH} = \\bigcup_{k \\ge 0} \\Sigma_{k}^{P} = \\text{NP}.\n$$\n因此，在 $\\text{NP} = \\text{coNP}$ 的假设下，多项式层级崩塌到 $\\text{NP}$，这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1416429"}, {"introduction": "完备性 (Completeness) 是计算复杂性理论的核心概念，它将整个类的命运与一个“最难”问题联系起来。本实践问题提出了一个强大的思想实验：想象一项突破性算法在多项式时间内解决了一个 $\\Pi_2^P$-完备问题。你将探究这一发现的深远后果，并证明它如何导致整个层级彻底崩塌到 $P$。[@problem_id:1416454]", "problem": "在计算复杂性理论中，多项式层级 (PH) 是一个复杂性类的层级结构，它推广了类 P、NP 和 co-NP。该层级的各层由 $\\Sigma_k^P$ 和 $\\Pi_k^P$ 表示，其中 $k \\ge 0$。\n\n一个语言属于 $\\Sigma_k^P$ 是指，它能被一台可以访问一个 $\\Sigma_{k-1}^P$ 中问题的预言机的多项式时间图灵机所判定。对于 $k \\ge 1$ 的一个等价定义将这些类与量化布尔公式 (QBF) 联系起来。一个语言属于 $\\Sigma_k^P$ 是指，其实例 $w$ 的成员资格可以用一个以存在量词开头的 $k$ 个交替量词的公式来表示：$\\exists \\vec{x_1} \\forall \\vec{x_2} \\dots Q \\vec{x_k} \\phi(w, \\vec{x_1}, \\dots, \\vec{x_k})$，其中 $\\phi$ 是一个多项式时间可计算的谓词。\n\n类似地，一个语言属于 $\\Pi_k^P$ 是指，其成员资格可以用一个以全称量词开头的 $k$ 个交替量词的公式来表示：$\\forall \\vec{x_1} \\exists \\vec{x_2} \\dots Q \\vec{x_k} \\phi(w, \\vec{x_1}, \\dots, \\vec{x_k})$。注意 $\\Pi_k^P = \\text{co-}\\Sigma_k^P$。由所有具有 $\\forall\\exists$ 量词结构的真 QBF 组成的语言是一个著名的 $\\Pi_2^P$-完备问题。\n\n假设一位计算机科学家取得了一项突破，发现了一个在多项式时间内运行的算法，该算法能够正确判断任何形式为 $\\forall \\vec{x} \\exists \\vec{y} \\, \\psi(\\vec{x}, \\vec{y})$ 的给定 QBF 是否为真，其中 $\\psi$ 是一个布尔公式。\n\n根据计算复杂性理论的原理，这一发现最重大和最强的推论是什么？\n\nA. $\\text{P} = \\text{NP}$\n\nB. $\\text{NP} = \\text{co-NP}$\n\nC. 多项式层级崩塌到 $\\Sigma_2^P$。\n\nD. 多项式层级完全崩塌到 P。\n\nE. 这样的算法不可能被创建，因为已经数学证明了 $\\text{P} \\neq \\Pi_2^P$。", "solution": "给定一个针对形式为 $\\forall \\vec{x} \\exists \\vec{y}\\,\\psi(\\vec{x},\\vec{y})$ 的真量化布尔公式语言的多项式时间算法。在多项式时间多一归约下，这个语言是 $\\Pi_{2}^{P}$-完备的。\n\n根据完备性，对于 $\\Pi_{2}^{P}$ 中的每个语言 $L$，都存在一个多项式时间可计算函数 $f$，使得对于所有输入 $w$，\n$$\nw \\in L \\iff f(w) \\in \\text{QBF}_{\\forall\\exists}.\n$$\n由于根据假设的算法有 $\\text{QBF}_{\\forall\\exists} \\in \\text{P}$，因此可以推出 $L \\in \\text{P}$。因此\n$$\n\\Pi_{2}^{P} \\subseteq \\text{P}.\n$$\n因为 $\\text{P} \\subseteq \\Pi_{2}^{P}$（实际上对于所有 $k$ 都有 $\\text{P} \\subseteq \\Sigma_{k}^{P} \\cap \\Pi_{k}^{P}$），我们得到\n$$\n\\Pi_{2}^{P} = \\text{P}.\n$$\n由于 $\\Sigma_{2}^{P} = \\text{co-}\\Pi_{2}^{P}$ 并且 P 对补运算是封闭的，我们也得到\n$$\n\\Sigma_{2}^{P} = \\text{P}.\n$$\n\n我们现在将这个崩塌向层级上方传播。使用预言机特性，\n$$\n\\Sigma_{k+1}^{P} = \\text{NP}^{\\Sigma_{k}^{P}}, \\quad \\Pi_{k+1}^{P} = \\text{co-}\\Sigma_{k+1}^{P}.\n$$\n有了 $\\Sigma_{2}^{P} = \\text{P}$，我们得到\n$$\n\\Sigma_{3}^{P} = \\text{NP}^{\\text{P}} = \\text{NP}.\n$$\n但是 $\\text{NP} \\subseteq \\Sigma_{2}^{P} = \\text{P}$ 蕴含了 $\\text{NP} = \\text{P}$，因此\n$$\n\\Sigma_{3}^{P} = \\text{P}, \\quad \\Pi_{3}^{P} = \\text{P}.\n$$\n通过归纳法，对于所有 $k \\ge 3$，\n$$\n\\Sigma_{k}^{P} = \\text{NP}^{\\Sigma_{k-1}^{P}} = \\text{NP}^{\\text{P}} = \\text{NP} = \\text{P}, \\quad \\Pi_{k}^{P} = \\text{P}.\n$$\n因此，整个多项式层级崩塌到\n$$\n\\text{PH} = \\bigcup_{k \\ge 0} \\Sigma_{k}^{P} = \\text{P}.\n$$\n\n所以，最重大和最强的推论是多项式层级完全崩塌到 P。这严格蕴含了 $\\text{P} = \\text{NP}$ 和 $\\text{NP} = \\text{co-NP}$，并且比仅仅崩塌到 $\\Sigma_{2}^{P}$ 的推论更强。选项 E 是不正确的，因为尚未有这样的分离被证明。", "answer": "$$\\boxed{D}$$", "id": "1416454"}, {"introduction": "一个完备问题的结构可以揭示其对应复杂性类的深层性质。本练习探讨了一个更为精妙的层级崩塌条件，该条件基于一个 $\\Sigma_k^P$-完备问题的“对称”性质，即其补问题可以归约到它自身。通过在 $k=4$ 的情况下分析这个问题，你将把对层级结构如何与其完备问题的性质相关联的理解推广到更高层次。[@problem_id:1416432]", "problem": "在计算复杂性理论中，多项式层级 (Polynomial Hierarchy, PH) 是一个复杂性类的层级，它推广了 P、NP 和 co-NP 等复杂性类。对于任意非负整数 $k$，该层级的各级分别用 $\\Sigma_k^P$ 和 $\\Pi_k^P$ 表示。其定义如下：\n- $\\Sigma_0^P = \\Pi_0^P = P$。\n- $\\Sigma_{k+1}^P$ 是由一台带有一个 $\\Sigma_k^P$ 中问题的预言机（oracle）的非确定性多项式时间图灵机可判定的语言集合。\n- $\\Pi_k^P$ 是其补集在 $\\Sigma_k^P$ 中的语言集合（即 $\\Pi_k^P = \\text{co-}\\Sigma_k^P$）。\n- 整个层级是其所有级别的并集：$PH = \\bigcup_{k \\ge 0} \\Sigma_k^P$。\n\n如果一个语言 $A \\in \\Sigma_k^P$ 并且 $\\Sigma_k^P$ 中的每个语言都可以通过多项式时间多一归约（$\\le_m^p$）归约到 $A$，那么语言 $A$ 是 $\\Sigma_k^P$-完备的。一个基础定理指出，如果对于某个整数 $k \\ge 1$ 有 $\\Sigma_k^P = \\Pi_k^P$，那么整个层级就崩塌到第 $k$ 级，即 $PH = \\Sigma_k^P$。\n\n假设一位计算机科学家正在研究一个判定问题，我们称之为 $L_{4C}$。他们严格证明了 $L_{4C}$ 是 $\\Sigma_4^P$-完备的。随后，他们发现了一个令人惊讶的结果：$L_{4C}$ 的补集（记作 $\\overline{L_{4C}}$）可以多项式时间多一归约到 $L_{4C}$ 本身。用符号表示为 $\\overline{L_{4C}} \\le_m^p L_{4C}$。\n\n基于这一发现，关于多项式层级的结构，可以得出的最强结论是什么？\n\nA. $PH$ 崩塌到空间复杂性类 $PSPACE$。\n\nB. $PH$ 崩塌到第三级，即 $PH = \\Sigma_3^P$。\n\nC. 该层级不一定崩塌，但证明了 $\\Sigma_4^P = \\Pi_4^P$。\n\nD. $PH$ 崩塌到第五级，即 $PH = \\Sigma_5^P$。\n\nE. $PH$ 崩塌到第四级，即 $PH = \\Sigma_4^P$。", "solution": "已知 $L_{4C}$ 在多项式时间多一归约下是 $\\Sigma_{4}^{P}$-完备的，并且 $\\overline{L_{4C}} \\leq_{m}^{p} L_{4C}$。我们的目标是推导这对 $PH$ 结构产生的影响。\n\n根据 $\\Sigma_{4}^{P}$-完备性，对于 $\\Sigma_{4}^{P}$ 中的每个语言 $A$，都存在一个多项式时间可计算的函数 $f$，使得对于所有输入 $x$\n$$\nx \\in A \\iff f(x) \\in L_{4C}.\n$$\n根据给定的归约 $\\overline{L_{4C}} \\leq_{m}^{p} L_{4C}$，存在一个多项式时间可计算的函数 $g$，使得对于所有输入 $y$，\n$$\ny \\in \\overline{L_{4C}} \\iff g(y) \\in L_{4C}.\n$$\n固定任意一个 $A \\in \\Sigma_{4}^{P}$，并考虑其补集 $\\overline{A} \\in \\Pi_{4}^{P}$。对于任意输入 $x$，\n$$\nx \\in \\overline{A} \\iff x \\notin A \\iff f(x) \\notin L_{4C} \\iff f(x) \\in \\overline{L_{4C}} \\iff g(f(x)) \\in L_{4C}.\n$$\n因此，通过复合函数 $h = g \\circ f$（该函数是多项式时间可计算的），我们得到 $\\overline{A} \\leq_{m}^{p} L_{4C}$。由于 $L_{4C} \\in \\Sigma_{4}^{P}$ 且 $\\Sigma_{4}^{P}$ 在多项式时间多一原像下是封闭的，可得 $\\overline{A} \\in \\Sigma_{4}^{P}$。因为 $A$ 是 $\\Sigma_{4}^{P}$ 中的任意元素，我们证明了\n$$\n\\Pi_{4}^{P} \\subseteq \\Sigma_{4}^{P}.\n$$\n对两边取补集，得到\n$$\n\\Sigma_{4}^{P} \\subseteq \\Pi_{4}^{P}.\n$$\n因此，\n$$\n\\Sigma_{4}^{P} = \\Pi_{4}^{P}.\n$$\n根据前述的基础定理，如果对于某个 $k \\geq 1$ 有 $\\Sigma_{k}^{P} = \\Pi_{k}^{P}$，那么 $PH$ 会崩塌到第 $k$ 级。当 $k=4$ 时，我们得出结论\n$$\nPH = \\Sigma_{4}^{P}.\n$$\n因此，选项中最强的正确陈述是 $PH$ 崩塌到第四级。", "answer": "$$\\boxed{E}$$", "id": "1416432"}]}
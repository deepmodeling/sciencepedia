{"hands_on_practices": [{"introduction": "许多计算问题天然地可以用逻辑公式来表达。这个练习将向你展示合取范式（CNF）公式与常数深度电路之间的基本联系，揭示公式的结构如何直接映射到电路的架构上。掌握这种从逻辑表达到电路实现的直接转换，是电路设计的一项基础技能。[@problem_id:1449580]", "problem": "如果一个布尔电路具有常数深度，其大小是输入数量的多项式，并且由与门、或门和非门构成，那么它就属于复杂度类 $AC^0$。与门和或门允许有无界扇入（即它们可以接受任意数量的输入）。在计算深度时，一个标准惯例是假设非门只能直接应用于输入变量，并且这层非门不计入电路的总深度。因此，深度是从一个输入（或其非）到输出的任何路径上与门和或门的最大数量。\n\n考虑以下3-合取范式（3-CNF）的布尔公式 $\\Phi$，它是一些子句的合取（与），其中每个子句是三个文字的析取（或）：\n$$ \\Phi = (x_1 \\lor \\neg x_2 \\lor x_3) \\land (\\neg x_1 \\lor x_2 \\lor x_4) \\land (x_2 \\lor \\neg x_3 \\lor \\neg x_4) $$\n该公式定义在四个输入变量 $x_1, x_2, x_3, x_4$ 上。一个文字是一个变量或其非。\n\n你的任务是将此公式建模为一个遵循 $AC^0$ 结构原则的电路。为 $\\Phi$ 构建一个直接反映其作为析取的合取结构的电路。确定此电路的深度 $D$ 和所需的门总数 $G$。门的总数应包括实现该公式所需的所有与门、或门和非门，从基础输入 $x_1, x_2, x_3, x_4$ 开始。\n\n将你的答案表示为一个行矩阵，其中包含两个整数 $D$ 和 $G$，并按此顺序排列。", "solution": "我们要为3-CNF公式构建一个 $AC^{0}$ 电路\n$$\\Phi=(x_{1}\\lor\\neg x_{2}\\lor x_{3})\\land(\\neg x_{1}\\lor x_{2}\\lor x_{4})\\land(x_{2}\\lor\\neg x_{3}\\lor\\neg x_{4}).$$\n根据标准的 $AC^{0}$ 惯例，非门只能出现在输入端且不计入深度；深度是从一个输入（或其非）到输出的与/或门层数。我们将 $\\Phi$ 直接实现为三个析取的合取。\n\n首先，为每个以非形式出现的变量创建一个非门：$\\neg x_{1}$、$\\neg x_{2}$、$\\neg x_{3}$ 和 $\\neg x_{4}$。这会产生4个非门。每个非门的输出可以扇出到任何需要它的子句；在此公式中，每个非门都被使用一次。\n\n接下来，为每个子句构建一个或门，每个或门的扇入为3：\n- 一个计算 $(x_{1}\\lor\\neg x_{2}\\lor x_{3})$ 的或门，\n- 一个计算 $(\\neg x_{1}\\lor x_{2}\\lor x_{4})$ 的或门，\n- 一个计算 $(x_{2}\\lor\\neg x_{3}\\lor\\neg x_{4})$ 的或门。\n这部分贡献了3个或门。\n\n最后，将这三个或门的输出连接到一个计算它们合取的单个与门，这部分贡献了1个与门。\n\n电路的深度 $D$ 只计算与/或门的层数：输入（或通过输入非门层的其非形式）输入到或门层（深度1），或门层再输入到顶部的与门层（深度2）。因此，$D=2$。\n\n门的总数 $G$ 包括所有使用的非门、或门和与门。我们计算出有4个非门、3个或门和1个与门，总计\n$$G=4+3+1=8.$$\n\n因此，所求的包含深度和门数的行矩阵是 $\\begin{pmatrix}2 & 8\\end{pmatrix}$。", "answer": "$$\\boxed{\\begin{pmatrix}2 & 8\\end{pmatrix}}$$", "id": "1449580"}, {"introduction": "电路复杂性理论不仅限于抽象的逻辑公式，它同样可以为图论等其他领域的问题建模。这项实践挑战要求你首先将一个高级的图属性——判断一个图是否为完全图——基于其邻接矩阵转换为一个精确的布尔函数。接着，你将运用所学知识，为这个函数构建一个高效的 $AC^0$ 电路。[@problem_id:1449560]", "problem": "在布尔电路复杂性的研究中，电路由逻辑门构成。对于本问题，我们考虑由与门（AND）、或门（OR）和非门（NOT）构成的电路。与门和或门允许具有无界扇入（即，任意数量的输入），而非门的扇入为一。电路的**大小**是其包含的总门数。电路的**深度**是从任意输入变量到输出门的最长路径的长度。按照惯例，任何直接应用于输入变量的非门都被认为处于输入层，不计入电路的深度。\n\n一个具有 $k$ 个顶点的图可以用一个 $k \\times k$ 的邻接矩阵 $A$ 来表示，其中元素 $a_{ij}$（对于 $1 \\le i, j \\le k$）在顶点 $i$ 到顶点 $j$ 有边时为 1，否则为 0。对于无向图，该矩阵是对称的，即 $a_{ij} = a_{ji}$。\n\n一个图被称为**完全图**（记作 $K_k$），当且仅当对于每一对不同的顶点，都恰好有一条边连接它们。根据标准定义，完全图没有自环（即，没有从一个顶点到其自身的边）。\n\n对于一个固定的整数 $k \\ge 2$，你的任务是设计一个布尔电路，它以邻接矩阵 $A$ 的 $k^2$ 个元素作为输入，如果该图表示 $K_k$，则输出 1，否则输出 0。你的目标应该是设计一个具有最小可能深度的电路，并在这些电路中选择一个具有最小可能大小的。\n\n这样一个电路的最小深度和最小大小之和是多少？请将你的答案表示为 $k$ 的函数。", "solution": "给定 $k^{2}$ 个布尔输入 $\\{a_{ij}\\}_{1 \\le i,j \\le k}$，它们编码了一个具有 $k$ 个有标号顶点的图的邻接矩阵 $A$。输出应为 1，当且仅当该图恰好是 $K_{k}$（没有自环，且每一对不同的顶点都相邻）。用 $A$ 来表示，这意味着：\n- 对于每个 $i$， $a_{ii} = 0$（无自环）。\n- 对于每个 $i \\ne j$， $a_{ij} = 1$（所有非对角线元素为 1）。要求所有 $i \\ne j$ 的 $a_{ij}$ 都为 1，这自动满足了 $K_k$ 所需的对称性，因为 $a_{ij}$ 和 $a_{ji}$ 都必须为 1。\n\n一个具有无界扇入的深度为 1 的实现是相关文字的单一合取：\n$$\nF(A) \\;=\\; \\bigwedge_{i=1}^{k} \\neg a_{ii} \\;\\wedge\\; \\bigwedge_{\\substack{1 \\le i,j \\le k \\\\ i \\ne j}} a_{ij}.\n$$\n实现方法：\n- 在每个 $a_{ii}$ 上放置一个非门，以在输入层直接获得 $\\neg a_{ii}$。根据给定的惯例，这些非门不增加深度。\n- 将所有 $k$ 个取反的对角线文字和所有 $k(k-1)$ 个非对角线的正文字输入到一个无界扇入的与门中。\n\n深度分析：\n- 输入层之上的唯一门是那个与门，所以电路深度为 $1$。\n- 深度为 $0$ 的电路无法计算这个非平凡函数（深度 $0$ 只能是投影或常数），所以最小深度是 $1$。\n\n大小分析：\n- 电路中恰好有 $k$ 个非门（每个对角线输入一个）和一个与门，所以大小是 $k+1$。\n- 在深度为 1 的电路中，这是最优的。任何深度为 1 的电路都由单个与门或或门组成，其输入为（可能在输入层被取反的）输入文字。它不可能是单个或门，因为文字的或运算不可能在定义 $K_k$ 的唯一赋值上为 1，而在邻近的赋值上为 0。因此，顶层门必须是一个与门。对于每个 $i$，为了拒绝那个除了 $a_{ii}=1$ 之外与 $K_k$ 相同的赋值，合取式必须包含文字 $\\neg a_{ii}$。因此，至少需要 $k$ 个输入取反（非门），外加一个与门，总共至少 $k+1$ 个门。这与我们的构造相符，因此在满足最小深度的条件下，最小大小为 $k+1$。\n\n因此，最小深度为 1，并且在这类电路中，最小大小为 $k+1$。所求的和为\n$$\n1 + (k+1) \\;=\\; k+2.\n$$", "answer": "$$\\boxed{k+2}$$", "id": "1449560"}, {"introduction": "这个问题挑战了我们对于常数深度电路计算能力的直观理解。检查序列中的“1”的索引是否构成等差数列，这个任务看似需要顺序检查，但本练习揭示了如何通过巧妙地利用大规模并行性来一次性检查所有可能性，从而用一个常数深度电路解决它。这个问题突显了 $AC^0$ 中一个强大的设计范式，展示了其在并行计算中的惊人潜力。[@problem_id:1449552]", "problem": "在计算复杂性理论中，AC层级（AC Hierarchy，缩写自 Alternating Class）是一系列复杂度类的集合。类 `AC^k` 是可以由一个布尔电路族决定的语言集合，这些电路的门数量是输入大小 $n$ 的多项式，深度为 $O(\\log^k n)$，且其中的AND（与）和OR（或）门具有无界扇入。类 `AC^0` 对应于常数深度，即深度为 $O(1)$。\n\n考虑语言 `AP-INDICES`。一个长度为 $n$ 的二进制字符串 $x = x_1x_2...x_n$ 是 `AP-INDICES` 的成员，如果其索引集合 $\\{i \\in \\{1, 2, ..., n\\} \\mid x_i = 1\\}$ 在按升序排序后，构成一个等差数列。一个数列是等差数列，如果其连续项之间的差是常数。根据定义，如果字符串中 '1' 的数量为零或一，则该条件被视为满足。\n\n例如，对于 $n=7$，字符串 `0101010` 属于 `AP-INDICES`，因为其 '1' 的索引集合为 $\\{2, 4, 6\\}$，这是一个等差数列。相反地，对于 $n=5$，字符串 `11010` 不属于 `AP-INDICES`，因为其 '1' 的索引 $\\{1, 2, 4\\}$ 未构成等差数列。\n\n请确定 `AP-INDICES` 语言最精确的分类。在以下选项中，包含 `AP-INDICES` 的最小类别是什么？\n\nA. `AC^0`\n\nB. `AC^1`\n\nC. `AC^2`\n\nD. `PSPACE`\n\nE. 该语言是不可判定的。", "solution": "令 $x \\in \\{0,1\\}^{n}$ 且令 $S(x) = \\{i \\in \\{1,\\dots,n\\} : x_{i} = 1\\}$。根據定義，$x \\in \\text{AP-INDICES}$ 當且僅當 $|S(x)| \\leq 1$，或者存在整數 $a$ 和 $d$（$1 \\leq a \\leq n$ 且 $1 \\leq d \\leq n$）使得 $S(x)$ 按升序排列後恰好是 $\\{a, a+d, \\dots, a+(m-1)d\\}$，其中 $m \\geq 2$。\n\n我們將「$S(x)$ 是一個等差數列」這個性質，用以下關於 $(a,d)$ 的等價存在性條件來表示：\n存在 $a,d$ 滿足 $1 \\leq a \\leq n$ 且 $1 \\leq d \\leq n$，使得\n(i) 對於所有 $i \\in \\{1,\\dots,n\\}$ 且 $i \\not\\equiv a \\pmod{d}$，我們有 $x_{i} = 0$，且\n(ii) 對於所有 $i \\in \\{1,\\dots,n\\}$ 且 $i \\equiv a \\pmod{d}$，以及對於所有滿足 $t \\geq 1$、$0 < s < t$ 和 $i+td \\leq n$ 的整數 $t$ 和 $s$，蘊含式\n$$\nx_{i} \\wedge x_{i+td} \\;\\Rightarrow\\; x_{i+sd}\n$$\n成立。\n\n等價性證明：\n- 如果 $S(x)$ 是一個等差數列 $S(x) = \\{a, a+d, \\dots, a+(m-1)d\\}$，那麼 (i) 成立，因為 $S(x)$ 中的每個元素都與 $a$ 模 $d$ 同餘，且沒有其他索引帶有 '1'。同時 (ii) 也成立，因為每當 $x_{i} = 1$ 和 $x_{i+td} = 1$（其中 $0 < s < t$）時，中間位置 $i+sd$ 也必然在 $S(x)$ 中，因此 $x_{i+sd} = 1$。\n- 反之，假設對於某個 $(a,d)$，(i) 和 (ii) 均成立。條件 (i) 意味著所有為 '1' 的位置都落在單一的剩餘類 $i \\equiv a \\pmod{d}$ 中。在這個剩餘類中，條件 (ii) 強制「無空洞」：如果類中的兩個位置 $i$ 和 $i+td$ 為 '1'，那麼所有中間位置 $i+sd$（其中 $0 < s < t$）也必須為 '1'。因此，該剩餘類中為 '1' 的位置構成了一個形如 $\\{a+ud, a+(u+1)d, \\dots, a+vd\\}$ 的連續區塊（其中 $u \\leq v$ 為整數），這正是一個等差數列。如果 $|S(x)| \\leq 1$，則該條件被無關緊要地滿足（可選擇任何 $(a,d)$，如果存在唯一的 '1' 位置，則令 $a$ 等於該位置）。\n\n為了用常數深度電路來判定成員資格，我們將條件 (ii) 轉換為子句。蘊含式\n$$\nx_{i} \\wedge x_{i+td} \\;\\Rightarrow\\; x_{i+sd}\n$$\n等價於 3-文字子句\n$$\n(\\lnot x_{i}) \\;\\vee\\; x_{i+sd} \\;\\vee\\; (\\lnot x_{i+td}).\n$$\n對於固定的 $(a,d)$，定義子電路 $C(a,d)$ 為以下各項的合取：\n- 所有滿足 $i \\in \\{1,\\dots,n\\}$ 且 $i \\not\\equiv a \\pmod{d}$ 的文字 $(\\lnot x_{i})$（強制執行條件 (i)），\n- 所有滿足 $i \\equiv a \\pmod{d}$、$t \\geq 1$、$0 < s < t$ 且 $i+td \\leq n$ 的子句 $(\\lnot x_{i}) \\vee x_{i+sd} \\vee (\\lnot x_{i+td})$（強制執行條件 (ii)）。\n\n那麼，$x \\in \\text{AP-INDICES}$ 當且僅當\n$$\n\\bigvee_{d=1}^{n} \\;\\bigvee_{a=1}^{d} \\; C(a,d)\n$$\n的求值結果為真。這是在 $(a,d)$ 的 $O(n^{2})$ 個選擇上進行的析取（OR），其對象是輸入文字和 3-文字析取（ORs）的合取。使用無界扇入的 AND/OR 門和輸入的否定，可以產生一個深度為 3 的電路：輸入饋入用於子句的 3-輸入 OR 門，所有這些輸出連同必要的否定文字一起饋入每個 $(a,d)$ 對應的單一 AND 門，頂層的 OR 門則收集所有 $(a,d)$ 候選的結果。\n\n電路規模是多項式級別的。對於每個 $(a,d)$：\n- 強制執行 $i \\not\\equiv a \\pmod{d}$ 貢獻了 $O(n)$ 個文字；\n- 強制執行「無空洞」的條件，對於每個 $i \\equiv a \\pmod{d}$，貢獻了 $O((n/d)^{2})$ 個子句（因為 $t$ 的範圍可達 $O(n/d)$，而 $s$ 的範圍是 $1,\\dots,t-1$），且有 $O(n/d)$ 個這樣的 $i$，因此每個 $(a,d)$ 總共有 $O((n/d)^{3})$ 個子句。對 $d$ 和 $a$ 求和得到\n$$\n\\sum_{d=1}^{n} d \\cdot \\left(\\frac{n}{d}\\right)^{3} \\;=\\; n^{3} \\sum_{d=1}^{n} \\frac{1}{d^{2}} \\;=\\; O(n^{3}).\n$$\n因此，該電路族具有多項式規模和常數深度，並使用無界扇入的 AND/OR 門，所以該語言屬於 $AC^{0}$。\n\n在給定的選項中，$AC^{0} \\subseteq AC^{1} \\subseteq AC^{2} \\subseteq \\text{PSPACE}$，而不可判定的類嚴格大於所有這些類。因此，包含 `AP-INDICES` 的最小類別是 $AC^{0}$。", "answer": "$$\\boxed{A}$$", "id": "1449552"}]}
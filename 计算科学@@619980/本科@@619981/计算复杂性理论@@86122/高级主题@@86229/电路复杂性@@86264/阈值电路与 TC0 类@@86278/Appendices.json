{"hands_on_practices": [{"introduction": "掌握阈值电路的第一步是为给定的布尔函数亲手构建一个。这个练习将带你实践如何将一个函数的真值表转化为定义权重和阈值的线性不等式。这是理解阈值电路工作原理的一项基本技能，通过确定实现函数 $f(x_1, x_2, x_3) = (x_1 \\vee x_2) \\wedge x_3$ 的参数，你将对单个阈值门的能力有更具体的认识。[@problem_id:1466422]", "problem": "在计算复杂性理论中，阈值门是某类电路的基本构建模块。一个阈值门接收 $n$ 个布尔输入 $x_1, x_2, \\ldots, x_n$，其中每个 $x_i \\in \\{0, 1\\}$。它由一组实值权重 $(w_1, w_2, \\ldots, w_n)$ 和一个实值阈值 $T$ 定义。如果其输入的加权和达到或超过阈值，则门的输出为1，否则为0。也就是说，如果 $\\sum_{i=1}^n w_i x_i \\ge T$，输出为1；如果 $\\sum_{i=1}^n w_i x_i < T$，输出为0。\n\n考虑布尔函数 $f(x_1, x_2, x_3) = (x_1 \\vee x_2) \\wedge x_3$，其中 $\\vee$ 表示逻辑或运算，$\\wedge$ 表示逻辑与运算。您的任务是找出一组整数权重 $(w_1, w_2, w_3)$ 和一个整数阈值 $T$，用单个阈值门正确实现这个函数。\n\n以下哪个权重和阈值的选择正确实现了函数 $f(x_1, x_2, x_3)$？\n\nA. 权重 $(w_1, w_2, w_3) = (1, 1, 1)$，阈值 $T=3$。\n\nB. 权重 $(w_1, w_2, w_3) = (1, 1, 1)$，阈值 $T=1$。\n\nC. 权重 $(w_1, w_2, w_3) = (1, 1, 2)$，阈值 $T=3$。\n\nD. 权重 $(w_1, w_2, w_3) = (1, 1, 2)$，阈值 $T=2$。\n\nE. 权重 $(w_1, w_2, w_3) = (2, 2, 1)$，阈值 $T=3$。", "solution": "目标是找到一组权重 $(w_1, w_2, w_3)$ 和一个阈值 $T$，使得单个阈值门的输出为1，当且仅当布尔函数 $f(x_1, x_2, x_3) = (x_1 \\vee x_2) \\wedge x_3$ 的值为1。门输出为1的条件是 $S = w_1 x_1 + w_2 x_2 + w_3 x_3 \\ge T$。\n\n首先，我们确定函数 $f(x_1, x_2, x_3)$ 的真值表。该函数的值为1，仅当 $x_3=1$ 并且 $x_1$ 或 $x_2$ 中至少有一个为1。\n\n输入组合及其对应的输出如下：\n- $f(0,0,0) = (0 \\vee 0) \\wedge 0 = 0 \\wedge 0 = 0$\n- $f(0,0,1) = (0 \\vee 0) \\wedge 1 = 0 \\wedge 1 = 0$\n- $f(0,1,0) = (0 \\vee 1) \\wedge 0 = 1 \\wedge 0 = 0$\n- $f(1,0,0) = (1 \\vee 0) \\wedge 0 = 1 \\wedge 0 = 0$\n- $f(1,1,0) = (1 \\vee 1) \\wedge 0 = 1 \\wedge 0 = 0$\n- $f(0,1,1) = (0 \\vee 1) \\wedge 1 = 1 \\wedge 1 = 1$\n- $f(1,0,1) = (1 \\vee 0) \\wedge 1 = 1 \\wedge 1 = 1$\n- $f(1,1,1) = (1 \\vee 1) \\wedge 1 = 1 \\wedge 1 = 1$\n\n因此，对于前五种输入组合，门必须输出0；对于后三种输入组合，门必须输出1。现在我们将测试每个给定的选项，通过计算每种输入组合的加权和 $S$ 并将其与阈值 $T$ 进行比较。\n\nA. 权重 $(1, 1, 1)$，阈值 $T=3$。\n- 输入 (1,1,1): $S = 1(1) + 1(1) + 1(1) = 3$。因为 $3 \\ge 3$，输出为1。(正确)\n- 输入 (1,0,1): $S = 1(1) + 1(0) + 1(1) = 2$。因为 $2 < 3$，输出为0。(错误，应为1)\n- 此选项失败。它只实现了 $x_1 \\wedge x_2 \\wedge x_3$。\n\nB. 权重 $(1, 1, 1)$，阈值 $T=1$。\n- 输入 (0,0,1): $S = 1(0) + 1(0) + 1(1) = 1$。因为 $1 \\ge 1$，输出为1。(错误，应为0)\n- 此选项失败。它实现了 $x_1 \\vee x_2 \\vee x_3$。\n\nC. 权重 $(1, 1, 2)$，阈值 $T=3$。\n让我们检查输出应为0的情况：\n- 输入 (0,0,0): $S = 1(0) + 1(0) + 2(0) = 0$。$0 < 3$。(正确)\n- 输入 (0,0,1): $S = 1(0) + 1(0) + 2(1) = 2$。$2 < 3$。(正确)\n- 输入 (0,1,0): $S = 1(0) + 1(1) + 2(0) = 1$。$1 < 3$。(正确)\n- 输入 (1,0,0): $S = 1(1) + 1(0) + 2(0) = 1$。$1 < 3$。(正确)\n- 输入 (1,1,0): $S = 1(1) + 1(1) + 2(0) = 2$。$2 < 3$。(正确)\n现在让我们检查输出应为1的情况：\n- 输入 (0,1,1): $S = 1(0) + 1(1) + 2(1) = 3$。$3 \\ge 3$。(正确)\n- 输入 (1,0,1): $S = 1(1) + 1(0) + 2(1) = 3$。$3 \\ge 3$。(正确)\n- 输入 (1,1,1): $S = 1(1) + 1(1) + 2(1) = 4$。$4 \\ge 3$。(正确)\n所有输入组合都被正确分类。此选项有效。\n\nD. 权重 $(1, 1, 2)$，阈值 $T=2$。\n- 输入 (0,0,1): $S = 1(0) + 1(0) + 2(1) = 2$。因为 $2 \\ge 2$，输出为1。(错误，应为0)\n- 此选项失败。\n\nE. 权重 $(2, 2, 1)$，阈值 $T=3$。\n- 输入 (1,1,0): $S = 2(1) + 2(1) + 1(0) = 4$。因为 $4 \\ge 3$，输出为1。(错误，应为0)\n- 此选项失败。\n\n根据对所有选项的系统性检查，只有选项C正确实现了函数 $f(x_1, x_2, x_3) = (x_1 \\vee x_2) \\wedge x_3$。", "answer": "$$\\boxed{C}$$", "id": "1466422"}, {"introduction": "了解了单个阈值门能做什么之后，一个自然的问题是：它有什么局限性？并非所有布尔函数都是“线性可分”的，因此不能用单个阈值门来计算。这个练习将挑战你识别这样一个函数，并直观地理解为什么它会失败，同时暗示了解决方案——使用更多的电路层级，从而引入了电路深度的概念。[@problem_id:1466412]", "problem": "在计算复杂性理论领域，阈值门是电路的基本构建模块。一个$n$输入阈值门接受二进制输入$x_1, x_2, \\dots, x_n \\in \\{0, 1\\}$，其中每个输入$x_i$都关联一个实值权重$w_i$。该门还有一个实值阈值$t$。如果其输入的加权和大于或等于阈值，则该门输出1，否则输出0。该门计算的函数是：\n$$ f(x_1, \\dots, x_n) = \\begin{cases} 1 & \\text{if } \\sum_{i=1}^{n} w_i x_i \\ge t \\\\ 0 & \\text{otherwise} \\end{cases} $$\n复杂度类TC⁰（Threshold Circuit, Constant Depth，即阈值电路，常数深度）包含的函数可以由一个常数深度和多项式规模的、由具有任意数量输入的阈值门构建的电路族来计算。\n\n考虑一组简单的布尔函数。您的任务是确定以下哪个关于二进制输入的函数不能由单个阈值门计算，但可以由深度为2的TC⁰电路计算。\n\nA. 双输入与函数：$f(x_1, x_2) = x_1 \\land x_2$。\n\nB. 双输入或函数：$f(x_1, x_2) = x_1 \\lor x_2$。\n\nC. 双输入异或（XOR）函数：$f(x_1, x_2) = x_1 \\oplus x_2$。\n\nD. 三输入多数决函数，当且仅当其输入中至少有两个为1时，它输出1。\n\nE. 三输入上的投影函数：$f(x_1, x_2, x_3) = x_2$。", "solution": "我们回顾一下，对于输入$x_{1},\\dots,x_{n}\\in\\{0,1\\}$、权重$w_{1},\\dots,w_{n}\\in\\mathbb{R}$和阈值$t\\in\\mathbb{R}$，单个阈值门（一个线性阈值函数）当且仅当$\\sum_{i=1}^{n}w_{i}x_{i}\\ge t$时输出$1$，否则输出$0$。这类函数正是线性可分的布尔函数。\n\n我们逐一分析每个选项：\n\nA. 双输入与函数$f(x_{1},x_{2})=x_{1}\\land x_{2}$是线性可分的。选择$w_{1}=w_{2}=\\alpha$（其中$\\alpha>0$）和满足$\\alpha<t\\le 2\\alpha$的任意阈值$t$。那么，对于不同输入的加权和分别为$0$、$\\alpha$、$\\alpha$和$2\\alpha$，所以只有$(1,1)$满足$\\sum w_{i}x_{i}\\ge t$。\n\nB. 双输入或函数$f(x_{1},x_{2})=x_{1}\\lor x_{2}$是线性可分的。选择$w_{1}=w_{2}=\\alpha>0$和满足$0<t\\le \\alpha$的$t$。那么，对于不同输入的加权和分别为$0$、$\\alpha$、$\\alpha$和$2\\alpha$，所以除了$(0,0)$之外的所有输入都满足$\\sum w_{i}x_{i}\\ge t$。\n\nC. 双输入异或函数$f(x_{1},x_{2})=x_{1}\\oplus x_{2}$不是线性可分的。用反证法。假设存在$w_{1},w_{2},t\\in\\mathbb{R}$可以实现异或功能。四个输入输出条件意味着以下不等式：\n$$\n\\begin{aligned}\n(0,0):&\\quad 0<t,\\\\\n(1,0):&\\quad w_{1}\\ge t,\\\\\n(0,1):&\\quad w_{2}\\ge t,\\\\\n(1,1):&\\quad w_{1}+w_{2}<t.\n\\end{aligned}\n$$\n将中间两个不等式相加，得到$w_{1}+w_{2}\\ge 2t$，这与$w_{1}+w_{2}<t$矛盾（因为这将导致$2t<t$）。因此，没有单个阈值门可以计算异或。\n\nD. 三输入多数决函数是线性可分的。选择$w_{1}=w_{2}=w_{3}=\\alpha>0$和满足$\\alpha<t\\le 2\\alpha$的$t$。可能的加权和为$0$、$\\alpha$、$2\\alpha$、$3\\alpha$，因此恰好是那些至少有两个1的输入满足$\\sum w_{i}x_{i}\\ge t$。\n\nE. 投影函数$f(x_{1},x_{2},x_{3})=x_{2}$是线性可分的。设置$w_{2}=\\alpha>0$，$w_{1}=w_{3}=0$，并选择满足$0<t\\le \\alpha$的$t$。那么$\\sum w_{i}x_{i}=\\alpha x_{2}$，所以该门输出$x_{2}$。\n\n因此，在A–E中，只有异或（C）不能由单个阈值门计算。\n\n最后，我们证明异或可以由一个深度为2的阈值电路计算（因此它属于深度为2的TC⁰类）。构建两个底层门：\n- $g_{1}$的权重为($\\alpha, -\\alpha$)，阈值为$t_{1}$，且满足$0<t_{1}\\le \\alpha$。那么$g_{1}(x_{1},x_{2})=1$当且仅当$(x_{1},x_{2})=(1,0)$，因为对于输入$(1,0)$、$(0,1)$、$(1,1)$、$(0,0)$，加权和分别为$\\alpha$、$-\\alpha$、$0$、$0$。\n- $g_{2}$的权重为$(-\\alpha, \\alpha)$，阈值为$t_{2}$，且满足$0<t_{2}\\le \\alpha$。那么$g_{2}(x_{1},x_{2})=1$当且仅当$(x_{1},x_{2})=(0,1)$。\n\n将$g_{1},g_{2}$的输出送入一个顶层的或阈值门$h$，其权重为$(\\beta, \\beta)$，阈值为$t_{3}$，且满足$0<t_{3}\\le \\beta$。那么$h(g_{1},g_{2})=1$当且仅当$x_{1},x_{2}$中恰好有一个为1，即$x_{1}\\oplus x_{2}$。这是一个计算异或的深度为2的阈值电路。\n\n结论：符合该标准的函数是C。", "answer": "$$\\boxed{C}$$", "id": "1466412"}, {"introduction": "既然我们知道了增加电路层级可以增强计算能力，那么让我们来处理一个更复杂也更重要的函数：奇偶校验（PARITY）。对于 $n$ 比特输入，奇偶校验函数在计算机科学中有广泛应用，但它无法由常数深度、多项式大小的 AND/OR/NOT 门电路（即 AC⁰ 类）计算。这个练习将指导你构建一个精巧的深度为2的阈值电路来计算它，这直接展示了 TC⁰ 类令人惊叹的计算能力。[@problem_id:1466396]", "problem": "在计算复杂性理论的研究中，TC⁰ 是指可由常数深度、多项式大小且由阈值门组成的电路族计算的函数类别。一个阈值门接收 $m$ 个布尔输入 $u_1, \\dots, u_m$，当且仅当其输入的加权和达到或超过一个阈值时，输出为 1，即 $\\sum_{i=1}^m w_i u_i \\ge \\theta$，其中权重 $w_i$ 是整数，$\\theta$ 是实数。\n\n在此背景下，一个著名的函数是模 2 内积（Inner Product Modulo 2, IP2）。给定两个 $n$ 比特向量 $\\vec{x} = (x_1, \\dots, x_n)$ 和 $\\vec{y} = (y_1, \\dots, y_n)$，它计算 $(\\sum_{i=1}^n x_i y_i) \\pmod 2$。已知 IP2 可以由一个深度为 3 的 TC⁰ 电路计算。这个构造通常是这样工作的：首先使用一层门来计算逐位乘积 $z_i = x_i \\land y_i$（其中 $i=1, \\dots, n$），然后使用一个后续的两层电路来计算这 $n$ 个结果比特的奇偶性（PARITY）。\n\n你的任务是为这个计算的第二个、也是至关重要的部分开发一个设计。\n\n**问题：**\n为计算 $n$ 个布尔输入比特 $z_1, z_2, \\ldots, z_n$ 的奇偶性（PARITY）函数，构造一个明确的深度为 2 的阈值电路设计。如果输入中 1 的数量为奇数，奇偶性函数输出 1，否则输出 0。根据你的设计，所需的门的总数精确是多少？请用 $n$ 的函数表示。", "solution": "设 $z_{1},\\dots,z_{n}\\in\\{0,1\\}$ 为输入，并令 $S=\\sum_{i=1}^{n} z_{i}$ 表示它们的汉明权重。我们构造一个深度为 2 的阈值电路，其输出为 $1$ 当且仅当 $S$ 是奇数。\n\n第一层（计算前缀计数指示器）：对于每个 $t\\in\\{1,\\dots,n\\}$，设置一个阈值门 $G_{t}$，其所有输入 $i\\in\\{1,\\dots,n\\}$ 的权重均为 $w_{t,i}=1$，阈值为 $\\theta_{t}=t$。其输出为\n$$\nf_{t}=\\begin{cases}\n1 & \\text{if } \\sum_{i=1}^{n} z_{i} \\ge t,\\\\\n0 & \\text{otherwise}.\n\\end{cases}\n$$\n因此，对于一个汉明权重 $S=s$ 的输入，当 $t\\le s$ 时有 $f_{t}=1$，当 $t>s$ 时有 $f_{t}=0$。这一层正好使用 $n$ 个阈值门。\n\n第二层（从 $f_{t}$ 计算奇偶性的单个门）：设置一个阈值门 $H$，其输入为 $f_{1},\\dots,f_{n}$，整数权重为\n$$\nA_{t}=(-1)^{t+1} 2^{t-1}\\quad\\text{for }t\\in\\{1,\\dots,n\\},\n$$\n阈值为\n$$\n\\theta=\\frac{1}{2}.\n$$\n对于一个汉明权重 $S=s$ 的输入，$H$ 的输出为 1 当且仅当\n$$\n\\sum_{t=1}^{n} A_{t} f_{t} \\ge \\theta.\n$$\n由于当且仅当 $t\\le s$ 时 $f_{t}=1$，这个不等式等价于\n$$\ng(s)\\equiv \\sum_{t=1}^{s} (-1)^{t+1} 2^{t-1} \\ge \\frac{1}{2}.\n$$\n这个和 $g(s)$ 是一个公比为 $-2$、首项为 $1$ 的有限几何级数，所以\n$$\ng(s)=\\sum_{t=1}^{s} (-1)^{t+1} 2^{t-1}=\\frac{1-(-2)^{s}}{1-(-2)}=\\frac{1-(-2)^{s}}{3}.\n$$\n因此：\n- 如果 $s=0$（没有输入等于 $1$），那么 $g(0)=0<\\frac{1}{2}$，所以输出为 $0$。\n- 如果 $s$ 是奇数，那么 $(-2)^{s}=-2^{s}$ 并且 $g(s)=\\frac{1+2^{s}}{3}\\ge 1>\\frac{1}{2}$，所以输出为 $1$。\n- 如果 $s$ 是偶数且 $s\\ge 2$，那么 $(-2)^{s}=2^{s}$ 并且 $g(s)=\\frac{1-2^{s}}{3}\\le -1<\\frac{1}{2}$，所以输出为 $0$。\n\n因此，第二层的门当且仅当 $S$ 为奇数时输出 1，即它计算了 $z_{1},\\dots,z_{n}$ 的奇偶性（PARITY）。\n\n门的总数：该构造在第一层使用了 $n$ 个门，在第二层使用了 1 个门，总共需要 $n+1$ 个阈值门。", "answer": "$$\\boxed{n+1}$$", "id": "1466396"}]}
{"hands_on_practices": [{"introduction": "我们从一个概率论中的基本情景开始：需要多少次尝试才能获得第一次成功？这个练习 [@problem_id:2381108] 将应用几何分布来为一个发人深省的科研场景建立“等待时间”模型。通过计算纯粹由偶然性获得“显著”结果所需的期望实验次数，你将对现代科学面临的统计挑战（如p值操纵，即 p-hacking）有更深刻的认识。", "problem": "一个计算生物学小组在一个差异表达分析流程中，重复分析独立的、新模拟的无效数据集，直到找到至少一个在$p0.05$阈值下表现出显著差异表达的基因。每次流程运行都应用一个经过正确校准的假设检验，其I类错误率为$\\alpha=0.05$，并且不同运行的结果是相互独立的。一旦某次运行的结果越过了显著性阈值，该小组便停止分析。\n\n假设每次运行的原假设都为真，那么在停止之前，他们预期需要进行多少次独立的工作流程运行？请给出确切数字，不要四舍五入。", "solution": "该问题要求计算一个重复独立试验过程的期望值。这是概率论中的一个标准问题。首先，必须确定问题陈述的有效性。\n\n问题描述了一系列独立的流程运行。每次运行构成一次试验。如果发现了统计上显著的结果（$p  0.05$），则该试验被视为一次“成功”。问题陈述，对于每次运行，原假设都为真。这是一条关键信息。\n\n让我们定义事件和随机变量。\n设$S_i$为第$i$次运行产生统计显著结果的事件。\n在原假设为真的前提下，此事件的概率即为犯I类错误的概率。这由显著性水平$\\alpha$定义。\n题目给出$\\alpha = 0.05$。\n因此，在任何一次给定的试验中，“成功”的概率是 $p = P(S_i) = \\alpha = 0.05$。\n\n题目说明试验（流程运行）是独立的。该小组在第一次成功出现时即停止。\n设$X$为过程停止前所进行的运行次数的随机变量。\n这个场景精确地描述了一个伯努利试验序列，而随机变量$X$（计算直到并包括第一次成功在内的试验次数）服从几何分布。\n\n几何分布的概率质量函数（PMF）由下式给出：\n$$P(X=k) = (1-p)^{k-1} p$$\n其中 $k \\in \\{1, 2, 3, \\ldots\\}$ 是试验次数，$p$ 是单次试验的成功概率。在我们的问题中，$p = 0.05$。\n\n问题要求的是独立工作流程运行的期望次数，也就是随机变量$X$的期望值，记为$E[X]$。\n对于一个服从参数为$p$的几何分布的随机变量$X$，其期望值是一个熟知的结果：\n$$E[X] = \\sum_{k=1}^{\\infty} k \\cdot P(X=k) = \\sum_{k=1}^{\\infty} k (1-p)^{k-1} p$$\n这个无穷级数的值是：\n$$E[X] = \\frac{1}{p}$$\n\n我们已知参数$p$即为I类错误率$\\alpha$。\n$$p = \\alpha = 0.05$$\n将这个值代入期望值的公式中：\n$$E[X] = \\frac{1}{0.05}$$\n\n为了计算最终的数值答案，我们可以将小数表示为分数：\n$$0.05 = \\frac{5}{100} = \\frac{1}{20}$$\n因此，期望的运行次数是：\n$$E[X] = \\frac{1}{\\frac{1}{20}} = 20$$\n\n这个结果意味着，平均而言，该研究小组需要对无效数据集进行20次分析，才会仅因随机机会而错误地找到一个“显著”结果。这说明了未经校正的多重检验中的一个根本问题：如果检验次数足够多，即使在完全没有任何真实效应的情况下，也终将找到一个统计上显著的结果。该问题是良定的，其解决方案是基础概率论的直接应用。", "answer": "$$\\boxed{20}$$", "id": "2381108"}, {"introduction": "几何分布为我们等待 *第一次* 成功的时间建立了模型，而二项分布则帮助我们计算在固定次数的试验中 *总共* 成功的次数。在这个实践问题中 [@problem_id:2381067]，我们将分析一个常见的分子生物学实验——菌落PCR，来计算找到一定数量阳性克隆的概率。这个练习不仅能巩固你对二项分布公式的理解，还将展示如何利用补集法则来简化计算。", "problem": "在一项用于验证重组质粒的菌落聚合酶链式反应（PCR）筛选实验中，来自同一实验室该实验方案的历史数据显示，每 $10$ 个菌落中恰好有 $1$ 个包含正确的插入片段。您从一个转化平板上随机挑选了 $24$ 个菌落，并在相同的PCR条件下对它们进行独立检测。假设每个菌落都是独立的，并且是真阳性的概率相同，为 $p = \\frac{1}{10}$，并且在此条件下检测具有完美的灵敏度和特异性。在此模型下，24个被检测菌落中真阳性菌落的数量至少为 $2$ 的概率是多少？请将您的最终答案表示为小数，并四舍五入到四位有效数字。", "solution": "首先将对问题陈述进行严格验证。\n\n步骤1：提取已知条件。\n- 历史数据显示，“每 $10$ 个菌落中恰好有 $1$ 个包含正确的插入片段”。\n- 一个菌落为真阳性的概率 $p$ 给定为 $p = \\frac{1}{10}$。\n- 随机挑选的菌落数量为 $n = 24$。\n- 菌落被“独立”检测。\n- 检测被假设具有“完美的灵敏度和特异性”。\n- 目标是求在24个被检测菌落中，真阳性菌落的数量“至少为 $2$”的概率。\n- 最终答案必须表示为小数，并四舍五入到四位有效数字。\n\n步骤2：验证已知条件。\n该问题具有科学依据。它使用一个基础的统计框架，正确地模拟了一个标准的分子生物学程序——菌落聚合酶链式反应（PCR）筛选。所描述的条件——固定次数的独立试验，每次试验成功的概率恒定——是二项分布所依据的精确假设。“完美的灵敏度和特异性”的理想化是为构建一个概率论中适定问题而进行的标准且可接受的简化，在此背景下并不会使问题在科学上不成立。这个问题是适定的，提供了计算唯一解所需的所有参数（$n=24$, $p=\\frac{1}{10}$）。其语言客观明確。它没有违反基本原则，不是不完整或矛盾的，也不是不适定的。\n\n步骤3：结论与行动。\n问题被认为是有效的。现在将推导完整的解答。\n\n该实验构成了一系列伯努利试验。设随机变量 $X$ 表示在 $n$ 个菌落样本中真阳性菌落（成功）的数量。\n该过程的参数给定如下：\n- 试验次数, $n = 24$。\n- 单次试验成功的概率, $p = \\frac{1}{10} = 0.1$。\n因此，随机变量 $X$ 服从二项分布，记为 $X \\sim B(n, p)$，具体为 $X \\sim B(24, 0.1)$。\n\n二项分布的概率质量函数（PMF），它给出了在 $n$ 次试验中观察到恰好 $k$ 次成功的概率，其公式为：\n$$P(X=k) = \\binom{n}{k} p^k (1-p)^{n-k}$$\n其中 $\\binom{n}{k}$ 是二项式系数, $\\frac{n!}{k!(n-k)!}$。\n\n问题要求计算真阳性数量至少为 $2$ 的概率。这对应于事件 $X \\ge 2$。通过对 $k=2, 3, \\dots, 24$ 的概率求和进行直接计算是低效的。应用补集法则更为合理。事件 $\\{X \\ge 2\\}$ 的补集是事件 $\\{X  2\\}$，它包括结果 $\\{X=0\\}$ 和 $\\{X=1\\}$。\n因此，所求概率为：\n$$P(X \\ge 2) = 1 - P(X  2) = 1 - [P(X=0) + P(X=1)]$$\n\n我们继续计算 $k=0$ 和 $k=1$ 时的概率。\n对于 $k=0$ (没有真阳性):\n$$P(X=0) = \\binom{24}{0} (0.1)^0 (1-0.1)^{24-0} = 1 \\times 1 \\times (0.9)^{24} = (0.9)^{24}$$\n\n对于 $k=1$ (恰好有一个真阳性):\n$$P(X=1) = \\binom{24}{1} (0.1)^1 (1-0.1)^{24-1} = 24 \\times (0.1)^1 \\times (0.9)^{23} = 2.4 \\times (0.9)^{23}$$\n\n将这些表达式代回到 $P(X \\ge 2)$ 的方程中：\n$$P(X \\ge 2) = 1 - [(0.9)^{24} + 2.4 \\times (0.9)^{23}]$$\n为了方便计算，我们可以提出因子 $(0.9)^{23}$：\n$$P(X \\ge 2) = 1 - [(0.9) \\times (0.9)^{23} + 2.4 \\times (0.9)^{23}]$$\n$$P(X \\ge 2) = 1 - [(0.9 + 2.4) \\times (0.9)^{23}]$$\n$$P(X \\ge 2) = 1 - 3.3 \\times (0.9)^{23}$$\n\n现在，我们按照问题的规定进行数值计算。\n首先，我们计算 $0.9$ 所需的幂：\n$$(0.9)^{23} \\approx 0.0886293302$$\n接着，我们计算补集的概率：\n$$P(X  2) = P(X=0) + P(X=1)$$\n$$P(X=0) = (0.9)^{24} \\approx 0.0797663972$$\n$$P(X=1) = 2.4 \\times (0.9)^{23} \\approx 2.4 \\times 0.0886293302 \\approx 0.2127103925$$\n$$P(X  2) \\approx 0.0797663972 + 0.2127103925 \\approx 0.2924767897$$\n最后，我们计算所求的概率：\n$$P(X \\ge 2) = 1 - P(X  2) \\approx 1 - 0.2924767897 = 0.7075232103$$\n\n问题要求答案四舍五入到四位有效数字。该值为 $0.7075232103$。前四位有效数字是 $7, 0, 7, 5$。第五位有效数字是 $2$，小于 $5$，所以我们不进位。\n最终结果，四舍五入到四位有效数字，是 $0.7075$。", "answer": "$$\\boxed{0.7075}$$", "id": "2381067"}, {"introduction": "从离散事件转向连续变量，我们现在将探讨概率分布如何描述神经网络的行为。这个问题 [@problem_id:3106903] 使用正态分布来模拟神经元的预激活值，并要求你计算在两种流行的激活函数（ReLU 和 Leaky ReLU）下，激活神经元的期望数量。通过这个分析，你将看到像期望这样的基本概念，如何为理解和预测深度学习中的关键现象（例如“ReLU神经元死亡”问题）提供强大的理论视角。", "problem": "一个神经网络中的全连接层有 $n$ 个神经元。在激活之前，由于高斯初始化和零均值输入，每个神经元的预激活值被建模为一次独立抽取 $X_{i} \\sim \\mathcal{N}(0,1)$，其中 $i \\in \\{1,\\dots,n\\}$。考虑两种激活函数：由 $\\varphi(x) = \\max(0,x)$ 定义的修正线性单元 (ReLU)，以及由 $\\varphi_{\\alpha}(x) = \\max(\\alpha x, x)$ 定义的、斜率参数为 $\\alpha \\in (0,1)$ 的带泄露的修正线性单元 (leaky ReLU)。如果一个神经元在其实现的输入处的、关于其预激活值的局部导数非零，则定义该神经元为梯度激活的。对于 ReLU，当 $x \\neq 0$ 时，取其常规导数；对于 leaky ReLU，当 $x \\neq 0$ 时，使用其分段导数；在这两种情况下，都忽略事件 $x=0$，因为在连续分布下其概率为零。\n\n仅使用标准正态分布、指示随机变量和期望的线性性的基本性质，计算在 ReLU 和斜率参数为 $\\alpha$ 的 leaky ReLU 下，$n$ 个神经元中梯度激活的神经元的期望数量。将你的最终答案表示为一个行向量，其中第一个元素等于 ReLU 下的期望数量，第二个元素等于 leaky ReLU 下的期望数量，两者都表示为 $n$ 和 $\\alpha$ 的函数。无需进行四舍五入。", "solution": "问题要求计算一个大小为 $n$ 的层中梯度激活神经元的期望数量。每个神经元的预激活值 $X_i$（其中 $i \\in \\{1, \\dots, n\\}$）被建模为一个服从标准正态分布的独立同分布随机变量，$X_i \\sim \\mathcal{N}(0,1)$。\n\n设 $Y$ 为该层中梯度激活神经元总数的随机变量。我们可以将 $Y$ 表示为每个神经元的指示随机变量 $I_i$ 的和：\n$$Y = \\sum_{i=1}^{n} I_i$$\n其中，如果第 $i$ 个神经元是梯度激活的，则 $I_i = 1$，否则 $I_i = 0$。\n\n根据期望的线性性，梯度激活神经元的期望数量为：\n$$E[Y] = E\\left[\\sum_{i=1}^{n} I_i\\right] = \\sum_{i=1}^{n} E[I_i]$$\n由于每个 $X_i$ 都从相同的分布中抽取，因此任何给定神经元是梯度激活的概率对于所有 $i$ 都是相同的。设 $p = P(I_i = 1)$ 为此概率。指示变量的期望是它所指示事件的概率，因此 $E[I_i] = p$。所以，梯度激活神经元的总期望数量为：\n$$E[Y] = \\sum_{i=1}^{n} p = n p$$\n我们的任务简化为，在两种指定的激活函数下，求单个神经元是梯度激活的概率 $p$。让我们考虑单个预激活值 $X \\sim \\mathcal{N}(0,1)$。\n\n情况1：修正线性单元 (ReLU)\nReLU 激活函数定义为 $\\varphi(x) = \\max(0,x)$。其关于预激活值 $x$ 的局部导数为：\n$$\\varphi'(x) = \\frac{d}{dx}\\max(0,x) = \\begin{cases} 1  \\text{if } x > 0 \\\\ 0  \\text{if } x  0 \\end{cases}$$\n问题陈述中说明要忽略点 $x=0$，这是合理的，因为对于一个连续随机变量 $X$，$P(X=0)=0$。一个神经元被定义为梯度激活的，如果它的局部导数非零。对于 ReLU，这个条件是 $\\varphi'(X) \\neq 0$。根据导数的定义，这等价于条件 $X > 0$。\n\n因此，一个神经元是梯度激活的概率 $p_{\\text{ReLU}}$ 为 $P(X > 0)$。由于 $X$ 从标准正态分布 $\\mathcal{N}(0,1)$ 中抽取，该分布关于其均值 $0$ 对称，所以 $X$ 为正的概率恰好是 $\\frac{1}{2}$。\n$$p_{\\text{ReLU}} = P(X > 0) = \\frac{1}{2}$$\n对于一个带有 ReLU 激活的层，梯度激活神经元的期望数量，记为 $E[Y_{\\text{ReLU}}]$，是：\n$$E[Y_{\\text{ReLU}}] = n \\cdot p_{\\text{ReLU}} = n \\cdot \\frac{1}{2} = \\frac{n}{2}$$\n\n情况2：带泄露的修正线性单元 (Leaky ReLU)\n带泄露的 ReLU 激活函数定义为 $\\varphi_{\\alpha}(x) = \\max(\\alpha x, x)$，其中斜率参数 $\\alpha$ 给定在区间 $\\alpha \\in (0,1)$ 内。该函数可以分段表示为：\n$$\\varphi_{\\alpha}(x) = \\begin{cases} x  \\text{if } x \\ge 0 \\\\ \\alpha x  \\text{if } x  0 \\end{cases}$$\n其关于预激活值 $x$ 的局部导数为：\n$$\\varphi'_{\\alpha}(x) = \\frac{d}{dx}\\varphi_{\\alpha}(x) = \\begin{cases} 1  \\text{if } x > 0 \\\\ \\alpha  \\text{if } x  0 \\end{cases}$$\n同样，我们忽略在 $x=0$ 处的不可导点。如果这个导数非零，即 $\\varphi'_{\\alpha}(X) \\neq 0$，则神经元是梯度激活的。\n\n我们分析导数的可能取值。如果 $X > 0$，导数为 $1$。如果 $X  0$，导数为 $\\alpha$。问题中规定 $\\alpha \\in (0,1)$，这意味着 $\\alpha$ 是严格为正的，因此非零。所以，对于任何 $X \\neq 0$，导数 $\\varphi'_{\\alpha}(X)$ 等于 $1$ 或 $\\alpha$，两者都不为零。只要 $X \\neq 0$，梯度激活的条件 $\\varphi'_{\\alpha}(X) \\neq 0$ 总是被满足。\n\n一个神经元是梯度激活的概率 $p_{\\text{LReLU}}$ 是其导数非零的概率：\n$$p_{\\text{LReLU}} = P(\\varphi'_{\\alpha}(X) \\neq 0) = P(X \\neq 0)$$\n对于任何连续随机变量，其取任何单个特定值的概率为 $0$。因此，对于 $X \\sim \\mathcal{N}(0,1)$，我们有 $P(X=0)=0$。这意味着：\n$$p_{\\text{LReLU}} = P(X \\neq 0) = 1 - P(X=0) = 1 - 0 = 1$$\n每一个预激活值非零的神经元都是梯度激活的。由于预激活值为零的概率是零，因此一个神经元是梯度激活的概率为 $1$。\n对于一个带有 leaky ReLU 激活的层，梯度激活神经元的期望数量，记为 $E[Y_{\\text{LReLU}}]$，是：\n$$E[Y_{\\text{LReLU}}] = n \\cdot p_{\\text{LReLU}} = n \\cdot 1 = n$$\n\n最终答案是一个行向量，分别包含 ReLU 和 leaky ReLU 下梯度激活神经元的期望数量。\n对于 ReLU，期望数量是 $\\frac{n}{2}$。\n对于 leaky ReLU，期望数量是 $n$。\n得到的向量是 $\\begin{pmatrix} \\frac{n}{2}  n \\end{pmatrix}$。", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{n}{2}  n \\end{pmatrix}}$$", "id": "3106903"}]}
{"hands_on_practices": [{"introduction": "理论学习之后，最好的消化方式就是实践。本节的第一个练习旨在通过一个非常直观的例子，具体展示硬判决和软判决在解码决策上的根本差异。你将处理一个简单的重复码，并对一份给定的接收信号序列分别应用两种判决方法，通过对比最终的解码结果，你将亲身体会到软判决是如何利用“置信度”信息来做出更优决策的 [@problem_id:1629075]。", "problem": "在一个简单的数字通信系统中，单个信息比特 $b \\in \\{0, 1\\}$ 为了可靠性，使用一个表示为 $R_3$ 的三比特重复码进行编码。如果信息比特为 $b=0$，发送的码字是 $(0,0,0)$。如果信息比特为 $b=1$，发送的码字是 $(1,1,1)$。为了传输，比特 $0$ 被映射到 $-1$ 任意单位的信号电平，比特 $1$ 被映射到 $+1$ 任意单位的信号电平。该码字随后通过一个噪声信道发送。\n\n在接收端，观测到一个由三个实数值组成的序列 $y = (y_1, y_2, y_3)$。这些值与每个接收比特的对数似然比（LLRs）成正比。正值 $y_i$ 表示第 $i$ 个比特更有可能是 $1$，而负值表示它更有可能是 $0$。绝对值 $|y_i|$ 代表了对此评估的置信度。\n\n假设接收到的序列是 $y = (+0.8, +0.9, -2.1)$。\n\n我们将比较两种译码策略：\n\n1.  **硬判决译码**：该译码器首先对每个接收值 $y_i$ 进行单独的或称“硬”判决。接收值 $y_i > 0$ 被译为比特 $\\hat{b}_i = 1$，而值 $y_i < 0$ 被译为 $\\hat{b}_i = 0$。然后，通过对硬判决比特序列 $(\\hat{b}_1, \\hat{b}_2, \\hat{b}_3)$ 进行多数表决来确定最终的译码比特 $b_{HD}$。\n\n2.  **软判决译码**：该译码器直接使用“软”信息，即实际的实数值。判决度量 $L$ 是接收值的总和：$L = y_1 + y_2 + y_3$。最终的译码比特 $b_{SD}$ 由 $L$ 的符号确定。如果 $L > 0$，译码器判决 $b_{SD} = 1$。如果 $L < 0$，则判决 $b_{SD} = 0$。\n\n对于给定的接收序列，确定译码比特 $b_{HD}$ 和 $b_{SD}$。将您的答案以有序对 $(b_{HD}, b_{SD})$ 的形式呈现。", "solution": "问题要求我们使用两种不同的方法：硬判决译码和软判决译码，来解码接收到的序列 $y = (+0.8, +0.9, -2.1)$。原始信息比特 $b$ 使用了三比特重复码进行编码。我们需要找出译码比特 $b_{HD}$ 和 $b_{SD}$，并将它们以序偶的形式呈现。\n\n首先，我们进行硬判决译码。这个过程包括两个步骤：第一，将每个接收值量化为一个二进制比特（0 或 1）；第二，对得到的比特序列进行多数表决。\n\n量化规则如下：\n- 如果 $y_i > 0$，则该比特的硬判决为 $\\hat{b}_i = 1$。\n- 如果 $y_i < 0$，则该比特的硬判决为 $\\hat{b}_i = 0$。\n\n将此规则应用于接收序列 $y = (+0.8, +0.9, -2.1)$：\n- 对于 $y_1 = +0.8$：因为 $0.8 > 0$，所以硬判决为 $\\hat{b}_1 = 1$。\n- 对于 $y_2 = +0.9$：因为 $0.9 > 0$，所以硬判决为 $\\hat{b}_2 = 1$。\n- 对于 $y_3 = -2.1$：因为 $-2.1 < 0$，所以硬判决为 $\\hat{b}_3 = 0$。\n\n这给了我们硬判决比特序列 $(\\hat{b}_1, \\hat{b}_2, \\hat{b}_3) = (1, 1, 0)$。\n\n下一步是对这个序列进行多数表决。该序列包含两个 1 和一个 0。出现频率最高的比特是 1。因此，多数逻辑译码器的输出是 1。\n所以，硬判决译码的比特是 $b_{HD} = 1$。\n\n接下来，我们进行软判决译码。这种方法使用未经量化的原始接收值。判决基于作为判决度量 $L$ 的接收值之和的符号。\n\n判决度量 $L$ 的计算如下：\n$$L = y_1 + y_2 + y_3$$\n\n代入给定的值：\n$$L = (+0.8) + (+0.9) + (-2.1)$$\n$$L = 1.7 - 2.1$$\n$$L = -0.4$$\n\n软判决译码的规则是：\n- 如果 $L > 0$，则判决为比特 1。\n- 如果 $L < 0$，则判决为比特 0。\n\n在我们的例子中，$L = -0.4$，小于 0。根据规则，译码器判决为比特 0。\n所以，软判决译码的比特是 $b_{SD} = 0$。\n\n这个结果突显了两种方法之间的一个关键区别。硬判决译码器看到两个支持“1”的票和一个支持“0”的票，于是判决为“1”。然而，软判决译码器则会对证据进行加权。它看到两个支持“1”的弱证据（来自 $+0.8$ 和 $+0.9$）和一个支持“0”的非常强的证据（来自 $-2.1$）。支持“0”的单个强证据的权重超过了支持“1”的两个弱证据，导致最终判决为“0”。\n\n最后，题目要求我们将答案以有序对 $(b_{HD}, b_{SD})$ 的形式呈现。\n根据我们的计算，得到 $b_{HD} = 1$ 和 $b_{SD} = 0$。\n\n因此，最终答案是序偶 $(1, 0)$。", "answer": "$$\\boxed{\\begin{pmatrix} 1 & 0 \\end{pmatrix}}$$", "id": "1629075"}, {"introduction": "在许多通信场景中，不同类型的错误所带来的后果并非等价，并且发送“0”和“1”的概率也可能不尽相同。这个练习将带你超越简单的零门限判决，深入探索最优判决门限的确定方法。你将推导出一个考虑了先验概率和非对称错误代价的判决门限表达式，这不仅能加深你对贝叶斯决策理论的理解，也揭示了设计高效接收机的核心思想 [@problem_id:1629077]。", "problem": "一个数字通信系统传输代表比特 $X$ 的二进制信号，其中 $X$ 可以是 0 或 1。传输 0 的先验概率为 $P(X=0) = p_0$，传输 1 的概率为 $P(X=1) = 1-p_0$。为了传输该比特，它首先被映射到一个电压水平：比特 0 映射到 $-A$，比特 1 映射到 $+A$，其中 $A$ 是一个正常数。\n\n该信号通过加性高斯白噪声（AWGN）信道传输。在检测器处接收到的信号是一个连续随机变量 $Y = s + N$，其中 $s \\in \\{-A, +A\\}$ 是传输的电压水平，$N$ 是一个均值为零、方差为 $\\sigma^2$ 的高斯噪声分量。\n\n接收器必须根据接收信号 $Y$ 的观测值 $y$ 来判断传输的是 0 还是 1。它采用一个简单的门限检测器：如果 $y > \\gamma$，系统判决 $\\hat{X}=1$；否则，判决 $\\hat{X}=0$。\n\n判决错误的后果不是对称的。将传输的 0 误判为 1（$0 \\to 1$错误）的代价是 $C_1$，将传输的 1 误判为 0（$1 \\to 0$错误）的代价是 $C_0$。$C_0$ 和 $C_1$ 都是正实数常量。正确的判决不产生代价。\n\n确定使总期望代价最小化的最优判决门限 $\\gamma$。你的最终答案应该是一个用给定参数 $p_0, A, \\sigma, C_0$ 和 $C_1$ 表示的解析表达式。", "solution": "定义假设：$H_{0}$ 对应于传输 $X=0$，信号为 $s=-A$，先验概率为 $P(H_{0})=p_{0}$；$H_{1}$ 对应于传输 $X=1$，信号为 $s=+A$，先验概率为 $P(H_{1})=1-p_{0}$。观测模型为 $Y=s+N$，其中 $N\\sim\\mathcal{N}(0,\\sigma^{2})$，因此条件概率密度为\n$$\np(y\\mid H_{1})=\\frac{1}{\\sqrt{2\\pi}\\,\\sigma}\\exp\\!\\left(-\\frac{(y-A)^{2}}{2\\sigma^{2}}\\right),\\qquad\np(y\\mid H_{0})=\\frac{1}{\\sqrt{2\\pi}\\,\\sigma}\\exp\\!\\left(-\\frac{(y+A)^{2}}{2\\sigma^{2}}\\right).\n$$\n判决代价为：当 $H_{0}$ 为真时判决为 $H_{1}$ 的代价是 $C_{10}=C_{1}$（$0\\to 1$ 错误），当 $H_{1}$ 为真时判决为 $H_{0}$ 的代价是 $C_{01}=C_{0}$（$1\\to 0$ 错误）。正确的判决代价为零。\n\n对于一次观测 $y$，条件风险为\n$$\nR_{1}(y)=C_{10}P(H_{0}\\mid y)=C_{1}P(H_{0}\\mid y),\\qquad R_{0}(y)=C_{01}P(H_{1}\\mid y)=C_{0}P(H_{1}\\mid y).\n$$\n贝叶斯准则（最小期望代价）在 $R_{1}(y)<R_{0}(y)$ 时判决 $H_{1}$，即：\n$$\nC_{1}P(H_{0}\\mid y)<C_{0}P(H_{1}\\mid y).\n$$\n使用贝叶斯定理 $P(H_{i}\\mid y)=\\frac{p(y\\mid H_{i})P(H_{i})}{p(y)}$，这等价于似然比检验\n$$\n\\frac{p(y\\mid H_{1})}{p(y\\mid H_{0})}>\\frac{C_{1}P(H_{0})}{C_{0}P(H_{1})}=\\frac{C_{1}\\,p_{0}}{C_{0}\\,(1-p_{0})}.\n$$\n使用高斯密度计算似然比：\n$$\n\\Lambda(y)\\triangleq\\frac{p(y\\mid H_{1})}{p(y\\mid H_{0})}\n=\\exp\\!\\left(-\\frac{(y-A)^{2}}{2\\sigma^{2}}+\\frac{(y+A)^{2}}{2\\sigma^{2}}\\right)\n=\\exp\\!\\left(\\frac{(y+A)^{2}-(y-A)^{2}}{2\\sigma^{2}}\\right)\n=\\exp\\!\\left(\\frac{4Ay}{2\\sigma^{2}}\\right).\n$$\n因此判决规则是\n$$\n\\exp\\!\\left(\\frac{4Ay}{2\\sigma^{2}}\\right)>\\frac{C_{1}\\,p_{0}}{C_{0}\\,(1-p_{0})}.\n$$\n由于 $\\ln(\\cdot)$ 是严格单调递增的，这等价于\n$$\n\\frac{4Ay}{2\\sigma^{2}}>\\ln\\!\\left(\\frac{C_{1}\\,p_{0}}{C_{0}\\,(1-p_{0})}\\right),\n$$\n对于 $A>0$，这得出了最优门限检测器“若 $y>\\gamma$ 则判决 $H_{1}$”，其门限为\n$$\n\\gamma=\\frac{\\sigma^{2}}{2A}\\,\\ln\\!\\left(\\frac{C_{1}\\,p_{0}}{C_{0}\\,(1-p_{0})}\\right).\n$$\n此 $\\gamma$ 在给定的先验概率和非对称代价下，最小化了总期望代价。", "answer": "$$\\boxed{\\frac{\\sigma^{2}}{2A}\\,\\ln\\!\\left(\\frac{C_{1}\\,p_{0}}{C_{0}\\,(1-p_{0})}\\right)}$$", "id": "1629077"}, {"introduction": "“软信息”在现代通信中至关重要，但它究竟从何而来？这个练习将为你解开这个谜题，指导你为一种常见的正交幅度调制（QAM）系统计算关键的软信息——对数似然比（LLR）。通过这个实践，你将学习如何将接收到的模拟信号值，结合信道噪声的统计特性，转化为一个量化的、表达比特可靠性的数字$L(b)$，从而为高级的信道编码译码（如Turbo码或LDPC码）提供输入 [@problem_id:1629082]。", "problem": "一个数字通信系统使用四元正交振幅调制（4-QAM）通过加性高斯白噪声（AWGN）信道发送数据。每个发射符号的平均能量归一化为 $E_s=1$。\n\n四个星座点由一对比特 $(b_1, b_2)$ 的格雷编码（Gray-coded）映射定义。第一个比特 $b_1$ 决定符号的同相（实部）分量，第二个比特 $b_2$ 决定正交（虚部）分量。从比特到符号分量的具体映射如下：\n- $b_1=0 \\implies$ 同相分量为 $-A$\n- $b_1=1 \\implies$ 同相分量为 $+A$\n- $b_2=0 \\implies$ 正交分量为 $+A$\n- $b_2=1 \\implies$ 正交分量为 $-A$\n\n这里，正常数 $A$ 的选择使得平均符号能量等于 $E_s=1$。假设四个可能的符号以等概率发送。\n\n接收到的复数值建模为 $y = s+n$，其中 $s$ 是发射的星座点，$n=n_I+jn_Q$ 是复高斯噪声。噪声的实部 $n_I$ 和虚部 $n_Q$ 是独立的随机变量，各自的均值为零，方差为 $\\sigma^2$。\n\n给定接收值为 $y = 0.25 - 0.6j$，每个实数维度的噪声方差为 $\\sigma^2 = 0.5$，计算第一个比特 $b_1$ 的对数似然比（LLR）。比特 $b$ 的LLR定义为 $L(b) = \\ln\\left(\\frac{P(b=1|y)}{P(b=0|y)}\\right)$，并用作软判决度量。", "solution": "问题要求在给定接收复数值 $y$ 的情况下，计算第一个比特 $b_1$ 的对数似然比（LLR）。LLR 定义为 $L(b_1) = \\ln\\left(\\frac{P(b_1=1|y)}{P(b_1=0|y)}\\right)$。\n\n首先，我们确定常数 $A$ 的值。四个星座点为 $s \\in \\{ A+jA, A-jA, -A+jA, -A-jA \\}$。这些点中任意一点的幅值平方（能量）为 $|s|^2 = (\\pm A)^2 + (\\pm A)^2 = 2A^2$。由于所有四个符号是等概率的，平均符号能量为 $E_s = \\frac{1}{4} \\sum_{i=1}^4 |s_i|^2 = \\frac{1}{4}(4 \\times 2A^2) = 2A^2$。已知 $E_s=1$，我们有 $2A^2 = 1$，得出 $A = 1/\\sqrt{2}$。\n\n使用贝叶斯定理，比特值的后验概率为 $P(b_1=i|y) = \\frac{p(y|b_1=i)P(b_1=i)}{p(y)}$。由于四个符号是等概率的，比特 $b_1=0$ 和 $b_1=1$ 也是等概率的，所以 $P(b_1=0) = P(b_1=1) = 1/2$。LLR表达式简化为：\n$$L(b_1) = \\ln\\left(\\frac{p(y|b_1=1)P(b_1=1)/p(y)}{p(y|b_1=0)P(b_1=0)/p(y)}\\right) = \\ln\\left(\\frac{p(y|b_1=1)}{p(y|b_1=0)}\\right)$$\n\n概率密度 $p(y|b_1=i)$ 是边缘概率，可以通过对所有对应于 $b_1=i$ 的可能符号求和来找到。事件 $b_1=0$ 对应于发射一个同相分量为 $-A$ 的符号。这两个符号是 $s_{00} = -A+jA$ 和 $s_{01} = -A-jA$。事件 $b_1=1$ 对应于一个同相分量为 $+A$ 的符号，其符号为 $s_{10} = A+jA$ 和 $s_{11} = A-jA$。\n由于对于给定的 $b_1$，$b_2$ 的两种可能性是等概率的，我们可以写出：\n$$p(y|b_1=0) = \\frac{1}{2} p(y|s=s_{00}) + \\frac{1}{2} p(y|s=s_{01})$$\n$$p(y|b_1=1) = \\frac{1}{2} p(y|s=s_{10}) + \\frac{1}{2} p(y|s=s_{11})$$\n在AWGN信道上，给定发射符号 $s$ 后接收到 $y$ 的条件概率密度函数（PDF）为 $p(y|s) = \\frac{1}{2\\pi\\sigma^2}\\exp\\left(-\\frac{|y-s|^2}{2\\sigma^2}\\right)$。\n\n将这些代入LLR表达式中：\n$$L(b_1) = \\ln\\left(\\frac{\\frac{1}{2\\pi\\sigma^2}\\left[\\exp\\left(-\\frac{|y-s_{10}|^2}{2\\sigma^2}\\right) + \\exp\\left(-\\frac{|y-s_{11}|^2}{2\\sigma^2}\\right)\\right]}{\\frac{1}{2\\pi\\sigma^2}\\left[\\exp\\left(-\\frac{|y-s_{00}|^2}{2\\sigma^2}\\right) + \\exp\\left(-\\frac{|y-s_{01}|^2}{2\\sigma^2}\\right)\\right]}\\right)$$\n常数因子相互抵消。令 $y = y_I + j y_Q$。\n由于格雷码的结构，当计算 $b_1$ 的 LLR 时，与 $b_2$ 相关的项（以及 $y_Q$）会抵消掉。分子和分母中方括号内的项是相同的。因此，LLR 表达式简化为：\n$$ L(b_1) = \\ln\\left(\\frac{\\exp\\left(-\\frac{(y_I-A)^2}{2\\sigma^2}\\right)}{\\exp\\left(-\\frac{(y_I+A)^2}{2\\sigma^2}\\right)}\\right) = \\frac{(y_I+A)^2 - (y_I-A)^2}{2\\sigma^2} $$\n$$ L(b_1) = \\frac{(y_I^2 + 2Ay_I + A^2) - (y_I^2 - 2Ay_I + A^2)}{2\\sigma^2} $$\n$$ L(b_1) = \\frac{4Ay_I}{2\\sigma^2} = \\frac{2Ay_I}{\\sigma^2} $$\n这是一个方形QAM星座中同相比特的LLR的通用结果。\n\n现在我们代入给定的数值：\n- $A = 1/\\sqrt{2}$\n- $y = 0.25 - 0.6j \\implies y_I = 0.25$\n- $\\sigma^2 = 0.5$\n\n$$ L(b_1) = \\frac{2 \\times (1/\\sqrt{2}) \\times 0.25}{0.5} = \\frac{\\sqrt{2} \\times 0.25}{0.5} = 0.5\\sqrt{2} $$\n数值上，这等于：\n$$ L(b_1) \\approx 0.5 \\times 1.41421356... = 0.70710678... $$\n将结果舍入至三位有效数字，我们得到 $0.707$。", "answer": "$$\\boxed{0.707}$$", "id": "1629082"}]}
{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。让我们从一个基础练习开始，探索转移概率矩阵最直接的应用：预测系统的下一个状态。这个练习将向您展示，在已知当前状态的概率分布和状态转移规则（即转移矩阵）的情况下，如何通过简单的矩阵乘法计算出下一时刻的状态分布。通过解决这个问题 [@problem_id:1345175]，您将亲手体验马尔可夫链如何将概率从一个时间步“传播”到下一个。", "problem": "针对 Aeridor 市的一个简化天气模型考虑了任何一天可能出现的三种状态：状态1（晴天）、状态2（多云）和状态3（雨天）。每日的天气转换是概率性的，可以用一个一步转移矩阵 $P$ 来描述，其中元素 $P_{ij}$ 表示在今天天气处于状态 $i$ 的条件下，明天天气将处于状态 $j$ 的概率。转移矩阵如下：\n$$\nP = \\begin{pmatrix} 0.70 & 0.20 & 0.10 \\\\ 0.30 & 0.50 & 0.20 \\\\ 0.20 & 0.60 & 0.20 \\end{pmatrix}\n$$\n根据卫星数据和大气读数，气象学家确定对于某个特定的星期二，天气为晴天、多云或雨天的概率不是确定的。它们由初始概率分布向量 $v_0 = [0.15, 0.65, 0.20]$ 描述，其中第一、第二和第三个分量分别对应晴天、多云和雨天的概率。\n\n根据这些信息，计算星期三 Aeridor 的天气为多云的概率。将你的最终答案四舍五入到三位有效数字。", "solution": "问题要求在给定初始概率分布和转移矩阵的情况下，计算经过一个时间步长后（从星期二到星期三），天气处于特定状态（多云）的概率。\n\n设 $v_0$ 为表示星期二各状态初始概率分布的行向量。$v_0$ 的分量分别是天气为晴天、多云和雨天的概率。\n$$\nv_0 = [P(\\text{周二晴天}), P(\\text{周二多云}), P(\\text{周二雨天})] = [0.15, 0.65, 0.20]\n$$\n设 $v_1$ 为表示星期三各状态概率分布的行向量。$v_1$ 的分量是我们要求解的概率。\n$$\nv_1 = [P(\\text{周三晴天}), P(\\text{周三多云}), P(\\text{周三雨天})]\n$$\n一个时间步长与下一个时间步长的概率分布之间的关系由当前状态分布向量与转移矩阵 $P$ 的矩阵乘法给出。\n$$\nv_1 = v_0 P\n$$\n给定的转移矩阵 $P$ 为：\n$$\nP = \\begin{pmatrix} 0.70 & 0.20 & 0.10 \\\\ 0.30 & 0.50 & 0.20 \\\\ 0.20 & 0.60 & 0.20 \\end{pmatrix}\n$$\n现在，我们进行矩阵-向量乘法：\n$$\nv_1 = [0.15, 0.65, 0.20] \\begin{pmatrix} 0.70 & 0.20 & 0.10 \\\\ 0.30 & 0.50 & 0.20 \\\\ 0.20 & 0.60 & 0.20 \\end{pmatrix}\n$$\n$v_1$ 的第一个分量，$P(\\text{周三晴天})$，计算如下：\n$$\nv_{1,1} = (0.15)(0.70) + (0.65)(0.30) + (0.20)(0.20) = 0.105 + 0.195 + 0.040 = 0.340\n$$\n$v_1$ 的第二个分量，$P(\\text{周三多云})$，计算如下：\n$$\nv_{1,2} = (0.15)(0.20) + (0.65)(0.50) + (0.20)(0.60) = 0.030 + 0.325 + 0.120 = 0.475\n$$\n$v_1$ 的第三个分量，$P(\\text{周三雨天})$，计算如下：\n$$\nv_{1,3} = (0.15)(0.10) + (0.65)(0.20) + (0.20)(0.20) = 0.015 + 0.130 + 0.040 = 0.185\n$$\n因此，星期三的概率分布为：\n$$\nv_1 = [0.340, 0.475, 0.185]\n$$\n作为检验，$v_1$ 的各分量之和应为 1：$0.340 + 0.475 + 0.185 = 1.000$。这证实了我们的计算是一个有效的概率分布。\n\n问题具体要求计算星期三天气为多云的概率。这对应于向量 $v_1$ 的第二个分量。\n$$\nP(\\text{周三多云}) = v_{1,2} = 0.475\n$$\n数值 $0.475$ 已经有三位有效数字（$4$、$7$ 和 $5$），因此不需要进一步四舍五入。", "answer": "$$\\boxed{0.475}$$", "id": "1345175"}, {"introduction": "掌握了单步预测后，一个自然的问题是：我们如何预测更远的未来？这个练习将引导您思考多步转移的过程。我们将计算一个系统在经历两次状态转移后处于特定状态的概率。解决这个问题 [@problem_id:1665046] 将帮助您理解多步转移概率是如何通过对转移矩阵进行幂运算，或等效地通过加总所有可能中间路径的概率来确定的，这加深了我们对系统长期演化行为的理解。", "problem": "一个简化的机器学习模型旨在预测用户对某移动应用的每日情绪。该模型将用户的情绪分为以下三种状态之一：“积极”、“中性”或“消极”。这些状态逐日之间的转移被建模为一个马尔可夫链。\n\n转移概率如下：\n- 如果用户在某一天的心情为“积极”，那么第二天心情为“积极”的概率是 $\\frac{1}{2}$，“中性”的概率是 $\\frac{1}{4}$，“消极”的概率是 $\\frac{1}{4}$。\n- 如果用户在某一天的心情为“中性”，那么第二天转移到“积极”、“中性”或“消极”的概率各为 $\\frac{1}{3}$。\n- 如果用户在某一天的心情为“消极”，那么第二天心情为“积极”的概率是 $\\frac{1}{10}$，“中性”的概率是 $\\frac{3}{10}$，“消极”的概率是 $\\frac{3}{5}$。\n\n假设一位新用户在使用应用的第一天（第1天）时，其情绪被记录为“积极”。那么在第3天，其情绪再次为“积极”的概率是多少？\n\n将您的答案表示为最简精确分数。", "solution": "将情绪建模为状态集 $\\{ \\text{Pos}, \\text{Neu}, \\text{Neg} \\}$ 上的一个马尔可夫链，其转移矩阵 $T$ 按 $(\\text{Pos}, \\text{Neu}, \\text{Neg})$ 的顺序排列为：\n$$\nT=\\begin{pmatrix}\n\\frac{1}{2} & \\frac{1}{4} & \\frac{1}{4} \\\\\n\\frac{1}{3} & \\frac{1}{3} & \\frac{1}{3} \\\\\n\\frac{1}{10} & \\frac{3}{10} & \\frac{3}{5}\n\\end{pmatrix}.\n$$\n用户在第1天处于状态 $\\text{Pos}$，因此在第3天处于状态 $\\text{Pos}$ 的概率是从 $\\text{Pos}$ 到 $\\text{Pos}$ 的两步转移概率，即 $T^{2}$ 的 $(1,1)$ 项。根据 Chapman-Kolmogorov 方程，\n$$\np^{(2)}_{\\text{Pos},\\text{Pos}}=\\sum_{s \\in \\{\\text{Pos}, \\text{Neu}, \\text{Neg}\\}} p_{\\text{Pos},s}\\,p_{s,\\text{Pos}}\n= p_{\\text{Pos},\\text{Pos}}\\,p_{\\text{Pos},\\text{Pos}} + p_{\\text{Pos},\\text{Neu}}\\,p_{\\text{Neu},\\text{Pos}} + p_{\\text{Pos},\\text{Neg}}\\,p_{\\text{Neg},\\text{Pos}}.\n$$\n代入给定的转移概率：\n$$\np^{(2)}_{\\text{Pos},\\text{Pos}}=\\frac{1}{2}\\cdot\\frac{1}{2}+\\frac{1}{4}\\cdot\\frac{1}{3}+\\frac{1}{4}\\cdot\\frac{1}{10}\n=\\frac{1}{4}+\\frac{1}{12}+\\frac{1}{40}.\n$$\n使用公分母 $120$ 合并分数：\n$$\n\\frac{1}{4}+\\frac{1}{12}+\\frac{1}{40}=\\frac{30}{120}+\\frac{10}{120}+\\frac{3}{120}=\\frac{43}{120}.\n$$\n因此，在第1天情绪为 $\\text{Pos}$ 的条件下，第3天情绪为 $\\text{Pos}$ 的概率是 $\\frac{43}{120}$。", "answer": "$$\\boxed{\\frac{43}{120}}$$", "id": "1665046"}, {"introduction": "除了短期预测，转移概率矩阵最强大的功能之一是揭示系统的长期行为。当一个马尔可夫链运行足够长时间后，它可能会达到一个“平稳分布” $\\pi$，即系统处于各个状态的概率不再随时间变化。这个练习将挑战您进行一次“逆向工程”：利用已知的系统长期平衡信息，来反推出转移矩阵中的一个未知基本参数。通过解决这个问题 [@problem_id:1345230]，您将深刻体会到矩阵的内在结构与其由 $\\pi P = \\pi$ 所描述的渐进行为之间的紧密联系。", "problem": "一位网络安全分析师正在对一个大型数据中心中的服务器状态进行建模。每台服务器每天被归入以下三种状态之一：\n- 状态 1：安全（已完全修补并受到监控）\n- 状态 2：易受攻击（缺少一个关键补丁）\n- 状态 3：受损（已被外部代理入侵）\n\n这些状态之间的每日转换被建模为一个马尔可夫链，其转移概率矩阵 $P$ 如下：\n$$ P = \\begin{pmatrix} 0.9 & 0.1 & 0 \\\\ 0.5 & 0.4 & 0.1 \\\\ x & 2x & 1 - 3x \\end{pmatrix} $$\n在这个矩阵中，$P_{ij}$ 表示一台服务器在一天内从状态 $i$ 转换到状态 $j$ 的概率。参数 $x$ 是一个与从受损状态恢复过程相关的正实值变量。为了使 $P$ 成为一个有效的随机矩阵，其所有元素必须为非负，并且每行概率之和必须等于 1。已经确定，对于一台受损的服务器，其转换到“易受攻击”状态的概率是其转换到“安全”状态的概率的两倍。\n\n在系统运行了足够长的时间后，它会达到一个平稳分布。在此平衡状态下，处于“受损”状态的服务器的长期平均比例被确定为 5%。\n\n确定参数 $x$ 的确切数值。", "solution": "对于一个有限状态马尔可夫链，平稳分布 $\\pi = (\\pi_{1}, \\pi_{2}, \\pi_{3})$ 满足 $\\pi P = \\pi$ 和 $\\pi_{1} + \\pi_{2} + \\pi_{3} = 1$，其中 $\\pi_{i} \\geq 0$。已知处于受损状态的长期比例是 $\\pi_{3} = \\frac{1}{20}$。\n\n从 $\\pi P = \\pi$，可得分量方程为\n$$\n\\pi_{1} = \\frac{9}{10}\\pi_{1} + \\frac{1}{2}\\pi_{2} + x \\pi_{3}, \\quad\n\\pi_{2} = \\frac{1}{10}\\pi_{1} + \\frac{2}{5}\\pi_{2} + 2x \\pi_{3}, \\quad\n\\pi_{3} = \\frac{1}{10}\\pi_{2} + (1 - 3x)\\pi_{3}.\n$$\n根据第三个方程，\n$$\n\\pi_{3} - (1 - 3x)\\pi_{3} = \\frac{1}{10}\\pi_{2}\n\\;\\;\\Longrightarrow\\;\\;\n3x \\pi_{3} = \\frac{1}{10}\\pi_{2}\n\\;\\;\\Longrightarrow\\;\\;\n\\pi_{2} = 30 x \\pi_{3}.\n$$\n使用 $\\pi_{3} = \\frac{1}{20}$，\n$$\n\\pi_{2} = 30 x \\cdot \\frac{1}{20} = \\frac{3}{2}x.\n$$\n根据第一个方程，\n$$\n\\pi_{1} - \\frac{9}{10}\\pi_{1} = \\frac{1}{2}\\pi_{2} + x \\pi_{3}\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{1}{10}\\pi_{1} = \\frac{1}{2}\\pi_{2} + x \\pi_{3}\n\\;\\;\\Longrightarrow\\;\\;\n\\pi_{1} = 5\\pi_{2} + 10 x \\pi_{3}.\n$$\n代入 $\\pi_{2} = \\frac{3}{2}x$ 和 $\\pi_{3} = \\frac{1}{20}$，\n$$\n\\pi_{1} = 5 \\cdot \\frac{3}{2}x + 10x \\cdot \\frac{1}{20} = \\frac{15}{2}x + \\frac{1}{2}x = 8x.\n$$\n施加归一化条件，\n$$\n\\pi_{1} + \\pi_{2} + \\pi_{3} = 1\n\\;\\;\\Longrightarrow\\;\\;\n8x + \\frac{3}{2}x + \\frac{1}{20} = 1\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{19}{2}x = \\frac{19}{20}\n\\;\\;\\Longrightarrow\\;\\;\nx = \\frac{1}{10}.\n$$\n该值满足 $x > 0$ 和 $1 - 3x \\geq 0$，因此第三行的元素为非负且总和为 1，满足随机矩阵的要求。", "answer": "$$\\boxed{\\frac{1}{10}}$$", "id": "1345230"}]}
{"hands_on_practices": [{"introduction": "动手实践的第一步是掌握凯利判据在最基本场景中的应用。这个练习将引导你为一个具有微小优势的简单博弈，计算出能最大化长期资本增长率的最佳投注比例。通过这个实践，你将理解在贪婪（投注过多）和怯懦（投注过少）之间找到那个能实现最优复合增长的“甜蜜点”是多么重要。[@problem_id:1625814]", "problem": "一种针对高波动性资产的算法交易策略正在被评估。该算法在非常短的、离散的时间间隔内对资产的价格变动进行押注。对于每个时间间隔，模型假设如下：\n\n- 资产价格上涨的概率为 $p$。\n- 资产价格下跌的概率为 $q=1-p$。\n\n该交易策略是在每个时间间隔内，将当前总资本的一部分（比例为 $f$）押注于价格上涨。\n- 如果价格上涨，公司赢得与押注金额相等的数额，这笔钱会加到资本中。\n- 如果价格下跌，公司损失押注的金额。\n\n主要目标是选择能使资本的长期增长率最大化的比例 $f$。每次交易的增长率，记为 $G(f)$，定义为财富比率的自然对数的期望值，即 $G(f) = E[\\ln(W_{n+1}/W_n)]$，其中 $W_n$ 是第 $n$ 次交易前的资本。\n\n已知模型估计价格上涨的概率为 $p = 0.505$，确定每次交易的长期增长率可能的最大值。\n\n将您的答案表示为一个实数，并四舍五入到四位有效数字。", "solution": "该问题要求每次交易资本的最大长期增长率。设 $W_n$ 为第 $n$ 个时间间隔开始时的资本。这部分资本中比例为 $f$ 的金额，即 $fW_n$，被押注于价格上涨。\n\n首先，我们根据两种可能的结果来确定一次交易后的资本 $W_{n+1}$。\n未押注的资本金额是 $(1-f)W_n$。\n1.  **价格上涨（赢）：** 此情况以概率 $p$ 发生。公司赢得与押注金额相等的数额，因此利润是 $fW_n$。原始押注被退回。交易后的资本是未押注的部分加上退回的押注再加上利润。然而，问题指出赢得的金额“被加到资本中”，这可以被解释为最终资本是 $W_n + (\\text{利润})$。利润被陈述为等于押注金额。所以，$W_{n+1} = W_n + fW_n = W_n(1+f)$。\n2.  **价格下跌（输）：** 此情况以概率 $q=1-p$ 发生。公司损失押注的金额 $fW_n$。交易后的资本是 $W_{n+1} = W_n - fW_n = W_n(1-f)$。\n\n财富比率是一个随机变量 $W_{n+1}/W_n$，它以概率 $p$ 取值 $(1+f)$，以概率 $q=1-p$ 取值 $(1-f)$。\n\n每次交易的增长率 $G(f)$ 是该比率的自然对数的期望值：\n$$G(f) = E\\left[\\ln\\left(\\frac{W_{n+1}}{W_n}\\right)\\right] = p \\ln(1+f) + (1-p) \\ln(1-f)$$\n\n为了找到使该增长率最大化的比例 $f$，我们需要求 $G(f)$ 关于 $f$ 的导数，并将其设为零。\n$$\\frac{dG}{df} = \\frac{d}{df} [p \\ln(1+f) + (1-p) \\ln(1-f)]$$\n$$\\frac{dG}{df} = p \\cdot \\frac{1}{1+f} + (1-p) \\cdot \\frac{-1}{1-f} = \\frac{p}{1+f} - \\frac{1-p}{1-f}$$\n\n将导数设为零以求最优比例 $f^*$：\n$$\\frac{p}{1+f^*} - \\frac{1-p}{1-f^*} = 0$$\n$$\\frac{p}{1+f^*} = \\frac{1-p}{1-f^*}$$\n$$p(1-f^*) = (1-p)(1+f^*)$$\n$$p - pf^* = 1 - p + f^* - pf^*$$\n$$p = 1 - p + f^*$$\n$$f^* = 2p - 1$$\n\n现在，我们代入给定的值 $p=0.505$ 来计算最优比例 $f^*$ 的数值。\n$$f^* = 2(0.505) - 1 = 1.01 - 1 = 0.01$$\n\n最大增长率 $G_{max}$ 是当 $f=f^*=0.01$ 时 $G(f)$ 的值。\n$$G_{max} = G(0.01) = p \\ln(1+0.01) + (1-p) \\ln(1-0.01)$$\n$$G_{max} = 0.505 \\ln(1.01) + (1-0.505) \\ln(0.99)$$\n$$G_{max} = 0.505 \\ln(1.01) + 0.495 \\ln(0.99)$$\n\n使用计算器计算自然对数值：\n$\\ln(1.01) \\approx 0.00995033085$\n$\\ln(0.99) \\approx -0.01005033585$\n\n将这些值代入 $G_{max}$ 的表达式中：\n$$G_{max} \\approx 0.505 \\times (0.00995033085) + 0.495 \\times (-0.01005033585)$$\n$$G_{max} \\approx 0.00502491708 - 0.00497491659$$\n$$G_{max} \\approx 0.00005000049$$\n\n问题要求将最终答案四舍五入到四位有效数字。\n$$G_{max} \\approx 0.00005000$$\n这也可以用科学记数法写成 $5.000 \\times 10^{-5}$。", "answer": "$$\\boxed{0.00005000}$$", "id": "1625814"}, {"introduction": "在掌握了基本凯利策略后，一个自然而然的问题是：如果我们对概率的估计是错误的，会发生什么？这个练习探讨了信息不准确性的代价。你将计算当投资者基于一个错误的成功概率 $p_0$ 来下注，而真实概率为 $p$ 时，其实际的资本增长率是多少。[@problem_id:1625808] 这个思想实验深刻地揭示了凯利判据与信息理论的内在联系：策略的优劣直接取决于输入信息的质量。", "problem": "一位投资者重复面临一个二元投资机会。在每个周期，他们可以将其总资本的一部分进行投资。如果投资成功，他们的投资金额将翻倍（即，他们收回初始投资，并获得等额利润）。如果投资失败，他们将损失所投资的金额。\n\n该投资者认为成功的概率是一个常数 $p_0$，其中 $1/2 < p_0 < 1$。基于这一信念，他们采用一种名为凯利准则的投资组合分配策略，该策略旨在最大化财富的期望对数，以决定每个周期投资其资本的多大比例 $f$。\n\n实际上，真实的成功概率是另一个常数 $p$，其中 $p_0 < p < 1$。\n\n推导投资者资本在每个投资周期中的实际期望增长率 $G$ 的表达式。增长率 $G$ 定义为单个周期后资本与周期前资本之比的自然对数的期望值，即 $G = E[\\ln(C_1/C_0)]$。你的最终答案应为一个以 $p$ 和 $p_0$ 表示的表达式。", "solution": "设 $C_{0}$ 为一个周期开始前的资本，$f$ 为投资于等额彩金机会的资本比例。如果投资成功，资本乘以 $1+f$；如果失败，则乘以 $1-f$。因此，对于给定的 $f$，在成功概率为 $p$ 的情况下，每个周期的期望对数增长为\n$$\nG(f;p)=p\\,\\ln(1+f)+(1-p)\\,\\ln(1-f).\n$$\n该投资者认为成功概率为 $p_{0}$，并选择 $f$ 以最大化用 $p_{0}$ 计算的期望对数增长：\n$$\ng_{0}(f)=p_{0}\\,\\ln(1+f)+(1-p_{0})\\,\\ln(1-f).\n$$\n对其求导并令其等于零以求最优解：\n$$\ng_{0}'(f)=\\frac{p_{0}}{1+f}-\\frac{1-p_{0}}{1-f}=0.\n$$\n解得，\n$$\np_{0}(1-f)=(1-p_{0})(1+f)\n\\;\\;\\Longrightarrow\\;\\;\np_{0}-p_{0}f=1-p_{0}+(1-p_{0})f\n$$\n$$\n\\Longrightarrow\\;\\;\n(2p_{0}-1)=f,\n$$\n且二阶导数\n$$\ng_{0}''(f)=-\\frac{p_{0}}{(1+f)^{2}}-\\frac{1-p_{0}}{(1-f)^{2}}<0\n$$\n确认了当 $f_{0}=2p_{0}-1$ 时存在一个最大值。在真实的成功概率 $p$ 下，使用这个 $f_{0}$ 的实际期望增长率为\n$$\nG=G(f_{0};p)=p\\,\\ln(1+f_{0})+(1-p)\\,\\ln(1-f_{0}).\n$$\n代入 $f_{0}=2p_{0}-1$：\n$$\n1+f_{0}=2p_{0},\\quad 1-f_{0}=2(1-p_{0}),\n$$\n因此\n$$\nG=p\\,\\ln\\!\\big(2p_{0}\\big)+(1-p)\\,\\ln\\!\\big(2(1-p_{0})\\big)\n=\\ln 2+p\\,\\ln p_{0}+(1-p)\\,\\ln(1-p_{0}).\n$$\n此表达式是按要求用 $p$ 和 $p_{0}$ 表示的。", "answer": "$$\\boxed{\\ln 2+p\\,\\ln p_{0}+(1-p)\\,\\ln(1-p_{0})}$$", "id": "1625808"}, {"introduction": "现在，让我们将凯利判据应用到一个更复杂、更动态的场景中。在这个练习里，博弈的赔率将取决于前一轮的结果，这引入了状态依赖性。你的任务是为这个随历史演变的系统制定一个最优投注策略。[@problem_id:1625811] 解决这个问题将展示凯利原理的强大通用性——它不仅适用于独立的重复博弈，还能被巧妙地应用于分析和优化更复杂的随机过程。", "problem": "一位分析师正在为一种高波动性金融资产建模，其价格演变在离散时间步 $n=1, 2, 3, \\ldots$ 上受到一个二元“市场情绪”信号 $S_n \\in \\{\\text{Up}, \\text{Down}\\}$ 的影响。该信号序列被建模为一枚无记忆公平硬币的一系列抛掷结果，其中‘正面’对应‘Up’，‘反面’对应‘Down’。\n\n一位投资者可以交易一种特殊的衍生证券。在每个时间步 $n$ 之前，他们可以投资其当前投资组合 $W_{n-1}$ 的一个比例，押注于对即将到来的信号 $S_n$ 的预测。投资规则如下：\n- 正确预测的回报取决于前一个信号 $S_{n-1}$。\n- 如果前一个信号是‘Up’，正确预测 $S_n$ 会将投资金额乘以一个因子 $r_U$。\n- 如果前一个信号是‘Down’，正确预测 $S_n$ 会将投资金额乘以一个因子 $r_D$。\n- 任何一步的错误预测都会导致该步所投资金额的全部损失。任何未投资的资本不受影响。\n- 初始信号 $S_0$ 是已知的。对于本问题，您可以分析该过程在长时间运行后的情况，因此初始状态不影响长期平均值。\n- 投资者的策略是在每一步选择投资比例，以最大化其投资组合的长期增长率。该投资比例可以根据前一个信号是‘Up’还是‘Down’而有不同选择。参数 $r_U$ 和 $r_D$ 是常数，且均假定大于2。\n\n计算可能的最大长期平均增长率指数 $G$，其定义为 $G = \\lim_{n \\to \\infty} \\frac{1}{n} \\ln\\left(\\frac{W_n}{W_0}\\right)$，其中 $W_n$ 是 $n$ 步后的投资组合价值，$W_0$ 是初始价值。请用一个关于 $r_U$ 和 $r_D$ 的单闭式解析表达式来表示您的答案。", "solution": "投资者的目标是最大化长期增长率指数 $G = \\lim_{n \\to \\infty} \\frac{1}{n} \\ln\\left(\\frac{W_n}{W_0}\\right)$。根据大数定律，这等同于最大化每一步投资组合对数增长的期望值 $E[\\ln(W_n/W_{n-1})]$。\n\n在第 $n$ 步开始时，系统的状态由前一个信号 $S_{n-1}$ 决定。设两个状态为‘U’（前一信号为‘Up’）和‘D’（前一信号为‘Down’）。信号 $S_n$ 由一枚公平硬币产生，因此无论处于何种状态，$S_n$ 为‘Up’的概率为 $p=1/2$，$S_n$ 为‘Down’的概率为 $1-p=1/2$。\n\n最优策略包括选择一个投资比例 $f$，为每个状态独立地最大化期望对数增长。由于公平硬币确保了在长期内，状态‘U’和‘D’被访问的频率各占约一半，因此总的长期增长指数 $G$ 将是在每个状态下可实现的最大增长指数的平均值。\n$G = \\frac{1}{2} G_U + \\frac{1}{2} G_D$，其中 $G_U$ 和 $G_D$ 分别是从状态‘U’和‘D’开始的最大单步增长指数。\n\n我们首先计算 $G_U$。我们处于状态‘U’，因此前一个信号是‘Up’。正确猜测的回报乘数是 $r_U$。设 $f_U$ 为投资组合的投资比例。\n投资者可以押注‘Up’或‘Down’。因为硬币是公平的，两种押注的成功概率都是 $p=1/2$。两种正确猜测的赔付是相同的。我们假设投资者押注‘Up’。\n- 如果下一个信号$S_n$是‘Up’（概率 $1/2$），投资组合变为 $W_n = W_{n-1}(1-f_U) + W_{n-1}f_U r_U = W_{n-1}(1 + f_U(r_U-1))$。\n- 如果下一个信号$S_n$是‘Down’（概率 $1/2$），押注失败，投资组合变为 $W_n = W_{n-1}(1-f_U)$。\n\n状态‘U’下的期望对数增长是：\n$$g_U(f_U) = \\frac{1}{2} \\ln(1 + f_U(r_U-1)) + \\frac{1}{2} \\ln(1-f_U)$$\n为了找到最优比例 $f_U^*$，我们将 $g_U(f_U)$ 对 $f_U$ 求导，并令结果为零：\n$$\\frac{d g_U}{d f_U} = \\frac{1}{2} \\left( \\frac{r_U-1}{1 + f_U(r_U-1)} - \\frac{1}{1-f_U} \\right) = 0$$\n$$\\frac{r_U-1}{1 + f_U(r_U-1)} = \\frac{1}{1-f_U}$$\n$$(r_U-1)(1-f_U) = 1 + f_U(r_U-1)$$\n$$r_U - 1 - f_U(r_U-1) = 1 + f_U(r_U-1)$$\n$$r_U - 2 = 2f_U(r_U-1)$$\n解出最优比例 $f_U^*$：\n$$f_U^* = \\frac{r_U-2}{2(r_U-1)}$$\n因为给定 $r_U > 2$，所以 $f_U^*$ 是正数且小于1，因此它是一个有效的比例。\n\n现在我们将 $f_U^*$ 代回 $g_U(f_U)$ 的表达式中，以求得最大增长指数 $G_U$：\n投资组合的两个乘法因子是：\n- 赢：$1 + f_U^*(r_U-1) = 1 + \\frac{r_U-2}{2(r_U-1)}(r_U-1) = 1 + \\frac{r_U-2}{2} = \\frac{2+r_U-2}{2} = \\frac{r_U}{2}$。\n- 输：$1 - f_U^* = 1 - \\frac{r_U-2}{2(r_U-1)} = \\frac{2(r_U-1) - (r_U-2)}{2(r_U-1)} = \\frac{2r_U-2-r_U+2}{2(r_U-1)} = \\frac{r_U}{2(r_U-1)}$。\n\n因此，状态‘U’下的最大增长指数是：\n$$G_U = g_U(f_U^*) = \\frac{1}{2} \\ln\\left(\\frac{r_U}{2}\\right) + \\frac{1}{2} \\ln\\left(\\frac{r_U}{2(r_U-1)}\\right)$$\n$$G_U = \\frac{1}{2} \\ln\\left(\\frac{r_U}{2} \\cdot \\frac{r_U}{2(r_U-1)}\\right) = \\frac{1}{2} \\ln\\left(\\frac{r_U^2}{4(r_U-1)}\\right) = \\ln\\left(\\sqrt{\\frac{r_U^2}{4(r_U-1)}}\\right) = \\ln\\left(\\frac{r_U}{2\\sqrt{r_U-1}}\\right)$$\n\n根据对称性，状态‘D’的计算是相同的，只需将 $r_U$ 替换为 $r_D$。状态‘D’下的最大增长指数是：\n$$G_D = \\ln\\left(\\frac{r_D}{2\\sqrt{r_D-1}}\\right)$$\n\n总的长期平均增长率指数 $G$ 是 $G_U$ 和 $G_D$ 的平均值：\n$$G = \\frac{1}{2} G_U + \\frac{1}{2} G_D = \\frac{1}{2} \\left( \\ln\\left(\\frac{r_U}{2\\sqrt{r_U-1}}\\right) + \\ln\\left(\\frac{r_D}{2\\sqrt{r_D-1}}\\right) \\right)$$\n使用对数性质 $\\ln(a) + \\ln(b) = \\ln(ab)$：\n$$G = \\frac{1}{2} \\ln\\left( \\frac{r_U}{2\\sqrt{r_U-1}} \\cdot \\frac{r_D}{2\\sqrt{r_D-1}} \\right)$$\n$$G = \\frac{1}{2} \\ln\\left( \\frac{r_U r_D}{4\\sqrt{(r_U-1)(r_D-1)}} \\right)$$\n这是最大长期增长率指数的最终表达式。", "answer": "$$\\boxed{\\frac{1}{2} \\ln\\left(\\frac{r_U r_D}{4\\sqrt{(r_U-1)(r_D-1)}}\\right)}$$", "id": "1625811"}]}
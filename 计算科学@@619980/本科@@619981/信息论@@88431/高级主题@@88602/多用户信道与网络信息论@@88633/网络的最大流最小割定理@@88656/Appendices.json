{"hands_on_practices": [{"introduction": "最大流最小割定理不仅是抽象的数学理论，它在解决现实世界的物流、生产和资源分配问题中也扮演着关键角色。本练习将一个化工厂的生产流程抽象为一个网络流模型。通过解决这个问题 [@problem_id:1639598]，你将练习如何将一个物理系统转化为图论问题，并利用最小割的概念来确定系统的最大生产能力。", "problem": "一座特种化学品制造厂设计用于从原料流中生产最终产品 Compound Z。该工厂可以建模为一个由管道连接的处理单元组成的有向网络。原料从 `Input` 单元进入，最终产品 Compound Z 从 `Output` 单元收集。有四个中间处理单元：一个 `Mixer`、一个 `Reactor`、一个 `Separator` 和一个 `Purifier`。\n\n这些单元之间的物料流受到连接管道最大容量的限制，单位为千克/小时 (kg/hr)。连接及其各自的最大流速如下：\n\n*   从 `Input` 到 `Mixer`：30 kg/hr\n*   从 `Input` 到 `Reactor`：20 kg/hr\n*   从 `Mixer` 到 `Reactor`：15 kg/hr\n*   从 `Mixer` 到 `Separator`：10 kg/hr\n*   从 `Reactor` 到 `Purifier`：25 kg/hr\n*   从 `Separator` 到 `Purifier`：5 kg/hr\n*   从 `Separator` 到 `Output`：15 kg/hr\n*   从 `Purifier` 到 `Output`：25 kg/hr\n\n假设处理单元本身容量无限且系统在稳态下运行，Compound Z 可能的最大生产速率是多少？请以 kg/hr 为单位，用数字表示您的答案。", "solution": "将该工厂建模为一个有向图，其源点为 $s$ (Input)，汇点为 $t$ (Output)。设中间节点为 $M$ (Mixer)、$R$ (Reactor)、$S$ (Separator) 和 $P$ (Purifier)。对于每条有向边 $(i,j)$，将其容量记为 $u_{ij}$，流量记为 $f_{ij}$，并满足约束条件 $0 \\le f_{ij} \\le u_{ij}$。在稳态下，对于每个中间节点 $v \\in \\{M,R,S,P\\}$，流量守恒成立：\n$$\n\\sum_{j} f_{jv} \\;=\\; \\sum_{k} f_{vk}.\n$$\n目标是最大化总流量值\n$$\n|f| \\;=\\; \\sum_{j} f_{sj} \\;=\\; \\sum_{i} f_{it}.\n$$\n\n给定的容量为：\n$$\nu_{sM}=30,\\quad u_{sR}=20,\\quad u_{MR}=15,\\quad u_{MS}=10,\\quad u_{RP}=25,\\quad u_{SP}=5,\\quad u_{St}=15,\\quad u_{Pt}=25.\n$$\n\n根据最大流最小割定理，最大流量等于最小 $s$-$t$ 割的容量。考虑一个割，其源侧集合为 $\\{s,M,R\\}$，汇侧集合为 $\\{S,P,t\\}$。该割中从源侧到汇侧的边只有 $M \\to S$ 和 $R \\to P$，因此该割的容量为\n$$\nu_{MS} + u_{RP} \\;=\\; 10 + 25 \\;=\\; 35.\n$$\n因此，任何 $s$-$t$ 流都满足 $|f| \\le 35$。\n\n接下来，我们构造一个值为 35 的可行流来证明其可达性。沿三条路径发送流量：\n1) 沿路径 $s \\to M \\to R \\to P \\to t$ 发送流量 15：\n$$\nf_{sM}=15,\\; f_{MR}=15,\\; f_{RP}=15,\\; f_{Pt}=15.\n$$\n2) 沿路径 $s \\to R \\to P \\to t$ 发送流量 10：\n$$\nf_{sR}=10,\\; f_{RP}=10,\\; f_{Pt}=10.\n$$\n3) 沿路径 $s \\to M \\to S \\to t$ 发送流量 10：\n$$\nf_{sM}=f_{sM}+10=25,\\; f_{MS}=10,\\; f_{St}=10.\n$$\n汇总各边流量：\n$$\nf_{sM}=25 \\le 30,\\quad f_{sR}=10 \\le 20,\\quad f_{MR}=15 \\le 15,\\quad f_{MS}=10 \\le 10,\n$$\n$$\nf_{RP}=25 \\le 25,\\quad f_{SP}=0 \\le 5,\\quad f_{St}=10 \\le 15,\\quad f_{Pt}=25 \\le 25.\n$$\n在每个中间节点，流量守恒成立：\n- 在节点 $M$：流入量 $25$ 等于流出量 $15+10=25$。\n- 在节点 $R$：流入量 $15+10=25$ 等于流出量 $25$。\n- 在节点 $S$：流入量 $10$ 等于流出量 $10$。\n- 在节点 $P$：流入量 $25$ 等于流出量 $25$。\n\n总流量值为\n$$\n|f| \\;=\\; f_{sM} + f_{sR} \\;=\\; 25 + 10 \\;=\\; 35,\n$$\n这与割容量的上限相匹配。因此，Compound Z 的最大可能生产速率为 35 千克/小时。", "answer": "$$\\boxed{35}$$", "id": "1639598"}, {"introduction": "在确定了网络的瓶颈之后，一个自然的问题是：对瓶颈进行微小的改进能带来多大的提升？本练习通过一个思想实验，探讨了当最小割上的一条边的容量增加 1 时，网络的最大流量会发生何种变化。解答这个问题 [@problem_id:1531962] 将帮助你深入理解最大流值对网络局部容量变化的敏感性，以及最小割作为系统瓶颈的真正含义。", "problem": "在管理一个大型数据中心的内部网络时，你的任务是分析其数据吞吐能力。该网络被建模为一个有向图 $G=(V, E)$，称为流网络。在该网络中，有一个指定的源节点 $s$（代表主服务器集群）和一个汇点 $t$（代表主要数据出口点）。每条有向边 $(u,v) \\in E$ 都有一个非负容量 $c(u,v)$，表示它能处理的最大数据流速率。\n\n一个 s-t 流是一个函数 $f: V \\times V \\to \\mathbb{R}$，它满足容量限制、斜对称性和流量守恒。一个流的值，记为 $|f|$，是从源点 $s$ 流出的净流量。一个 s-t 割是将顶点集合 $V$ 划分为两个集合 $S$ 和 $T$ 的一种方式，使得 $s \\in S$ 且 $t \\in T$。一个割的容量，记为 $c(S,T)$，是所有满足 $u \\in S$ 且 $v \\in T$ 的边 $(u,v)$ 的容量之和。最大流最小割定理指出，一个 s-t 流的最大可能值等于一个 s-t 割的最小容量。\n\n假设你已经在网络中找到了一个最小 s-t 割 $(S,T)$。为了提升网络的整体吞吐量，一位工程师提议升级某一条通信链路。他们选择了一条跨越已找到的最小割的特定边 $(u,v)$，其中 $u \\in S$ 且 $v \\in T$。这条边的容量增加了 1 个单位，从而创建了一个新的网络 $G'$。所有其他边的容量保持不变。\n\n设 $|f_{max}|$ 是原始网络 $G$ 中最大 s-t 流的值，设 $|f'_{max}|$ 是新网络 $G'$ 中最大 s-t 流的值。最大流的增量，即 $|f'_{max}| - |f_{max}|$ 的最大可能值是多少？\n\nA. 0\n\nB. 1\n\nC. 2\n\nD. 答案取决于最小割 $(S,T)$ 中边的总数。\n\nE. 没有上限；增量可以任意大。", "solution": "设 $(S,T)$ 是 $G$ 中的一个最小 $s$-$t$ 割，其容量为 $c(S,T)$。根据最大流最小割定理，$G$ 中最大 $s$-$t$ 流的值满足\n$$\n|f_{\\max}|=\\min_{(X,Y)} c(X,Y)=c(S,T).\n$$\n将一条满足 $u \\in S$ 且 $v \\in T$ 的边 $(u,v)$ 的容量增加 $1$，得到新的容量函数 $c'$，其中\n$$\nc'(x,y)=\\begin{cases}\nc(u,v)+1 & \\text{if } (x,y)=(u,v),\\\\\nc(x,y) & \\text{otherwise.}\n\\end{cases}\n$$\n对于任意割 $(X,Y)$，其新容量满足\n$$\nc'(X,Y)=\\begin{cases}\nc(X,Y)+1 & \\text{if } u \\in X \\text{ and } v \\in Y,\\\\\nc(X,Y) & \\text{otherwise.}\n\\end{cases}\n$$\n特别地，\n$$\nc'(S,T)=c(S,T)+1.\n$$\n设 $C'=\\min_{(X,Y)} c'(X,Y)$ 为 $G'$ 中的最小割容量。那么\n$$\nC' \\leq c'(S,T)=c(S,T)+1.\n$$\n将最大流最小割定理应用于 $G'$，新的最大流值满足\n$$\n|f'_{\\max}|=C' \\leq c(S,T)+1=|f_{\\max}|+1,\n$$\n因此\n$$\n|f'_{\\max}|-|f_{\\max}| \\leq 1.\n$$\n此外，增量是非负的，因为没有割的容量会减少：\n$$\n|f'_{\\max}| \\geq |f_{\\max}|.\n$$\n因此，\n$$\n0 \\leq |f'_{\\max}|-|f_{\\max}| \\leq 1.\n$$\n为了证明该界的紧性，考虑这样一个网络：其中找到的最小割 $(S,T)$ 是唯一的，并且从 $S$ 到 $T$ 的唯一跨越边是 $(u,v)$。那么 $c(S,T)=c(u,v)$，并且将 $c(u,v)$ 增加 $1$ 会得到\n$$\nc'(S,T)=c(S,T)+1,\n$$\n而其他任何割的容量，要么保持不变，要么在包含边 $(u,v)$ 的情况下也增加 1。由于在这种情景下，每个最小割都包含 $(u,v)$，因此新的最小割容量恰好是 $c(S,T)+1$，所以\n$$\n|f'_{\\max}|-|f_{\\max}|=1.\n$$\n因此，最大可能增量等于 $1$。", "answer": "$$\\boxed{B}$$", "id": "1531962"}, {"introduction": "现实世界中的网络优化往往需要在有限的资源下做出最佳决策。本练习模拟了一个数据中心网络管理员面临的实际挑战：应升级哪条链路才能最大程度地提高总吞吐量？这个问题 [@problem_id:1387855] 要求你不仅要找到当前的瓶颈，还要分析多个“准瓶颈”（即容量略大于最小割的割），从而做出最有效率的投资决策。", "problem": "一个数据中心的网络被建模为一个有向图，其中节点代表服务器，边代表光纤链路。每条链路的容量，即其最大数据传输速率（单位为千兆比特每秒，Gbps），均已给出。该网络包含六台服务器：一台源服务器 $S$，一台汇服务器 $K$，以及四台中间服务器 $A, B, C, D$。\n\n有向链路及其容量如下：\n- 从 $S$ 到 $A$：10 Gbps\n- 从 $S$ 到 $B$：8 Gbps\n- 从 $A$ 到 $C$：5 Gbps\n- 从 $A$ 到 $D$：6 Gbps\n- 从 $B$ 到 $C$：7 Gbps\n- 从 $C$ 到 $K$：12 Gbps\n- 从 $D$ 到 $K$：4 Gbps\n\n一位网络管理员计划升级单条链路，以增加从服务器 $S$ 到服务器 $K$ 的总数据吞吐量。升级操作指将某条链路的容量增加到一个非常大的值，以至于可以视为有效无限大。您的任务是确定升级哪一条链路，可以使S-K总吞吐量的增量最大化。\n\n为简化分析，已知当前网络的最大吞吐量为 16 Gbps。此外，已确定网络中恰好有四个不同的$S-K$割，其总容量小于 20 Gbps。一个$S-K$割是将所有服务器划分为两个集合 $V_S$ 和 $V_K$ 的一种方式，其中 $S \\in V_S$ 且 $K \\in V_K$。一个割的容量是所有满足 $u \\in V_S$ 且 $v \\in V_K$ 的链路 $(u,v)$ 的容量之和。四个相关的割由以下划分定义：\n- $C_1$：$V_S = \\{S, A, B, D\\}$ 且 $V_K = \\{C, K\\}$\n- $C_2$：$V_S = \\{S, A, B, C, D\\}$ 且 $V_K = \\{K\\}$\n- $C_3$：$V_S = \\{S, B\\}$ 且 $V_K = \\{A, C, D, K\\}$\n- $C_4$：$V_S = \\{S\\}$ 且 $V_K = \\{A, B, C, D, K\\}$\n\n下列哪项链路升级能带来最大的S-K最大流增量？\n\nA. 链路 $(A, C)$\n\nB. 链路 $(B, C)$\n\nC. 链路 $(C, K)$\n\nD. 链路 $(D, K)$\n\nE. 链路 $(S, A)$", "solution": "根据最大流最小割定理，最大$S$-$K$流等于所有$S$-$K$割中的最小容量。给定的四个容量小于 20 Gbps 的割，其容量计算如下。\n\n对于 $C_{1}$，其中 $V_{S}=\\{S,A,B,D\\}$ 且 $V_{K}=\\{C,K\\}$，跨越割的链路为 $(A,C)$、$(B,C)$、$(D,K)$，因此\n$$\n\\text{cap}(C_{1})=5+7+4=16.\n$$\n对于 $C_{2}$，其中 $V_{S}=\\{S,A,B,C,D\\}$ 且 $V_{K}=\\{K\\}$，跨越割的链路为 $(C,K)$、$(D,K)$，因此\n$$\n\\text{cap}(C_{2})=12+4=16.\n$$\n对于 $C_{3}$，其中 $V_{S}=\\{S,B\\}$ 且 $V_{K}=\\{A,C,D,K\\}$，跨越割的链路为 $(S,A)$、$(B,C)$，因此\n$$\n\\text{cap}(C_{3})=10+7=17.\n$$\n对于 $C_{4}$，其中 $V_{S}=\\{S\\}$ 且 $V_{K}=\\{A,B,C,D,K\\}$，跨越割的链路为 $(S,A)$、$(S,B)$，因此\n$$\n\\text{cap}(C_{4})=10+8=18.\n$$\n因此，当前的最大流为 $16$ Gbps，与题设一致。\n\n将单条链路的容量升级到一个任意大的值，那么任何包含该链路的割的容量也会变得任意大，从而可以不必考虑。因此，新的最大流将等于不包含被升级链路的剩余割中的最小容量（所有未列出的其他割的容量均不小于 20 Gbps）。\n\n通过确定 $C_{1},C_{2},C_{3},C_{4}$ 中哪些割包含给定的链路作为其跨越边，来评估每个选项：\n\nA. $(A,C)$ 只出现在 $C_{1}$ 中。剩余割的容量：$C_{2}=16$, $C_{3}=17$, $C_{4}=18$。新的最大流 $=16$。\n\nB. $(B,C)$ 出现在 $C_{1}$ 和 $C_{3}$ 中。剩余割的容量：$C_{2}=16$, $C_{4}=18$。新的最大流 $=16$。\n\nC. $(C,K)$ 只出现在 $C_{2}$ 中。剩余割的容量：$C_{1}=16$, $C_{3}=17$, $C_{4}=18$。新的最大流 $=16$。\n\nD. $(D,K)$ 出现在 $C_{1}$ 和 $C_{2}$ 中。剩余割的容量：$C_{3}=17$, $C_{4}=18$。新的最大流 $=17$。\n\nE. $(S,A)$ 出现在 $C_{3}$ 和 $C_{4}$ 中。剩余割的容量：$C_{1}=16$, $C_{2}=16$。新的最大流 $=16$。\n\n因此，升级链路 $(D,K)$ 带来的增量最大，它将最大流从 $16$ Gbps 提高到 $17$ Gbps。", "answer": "$$\\boxed{D}$$", "id": "1387855"}]}
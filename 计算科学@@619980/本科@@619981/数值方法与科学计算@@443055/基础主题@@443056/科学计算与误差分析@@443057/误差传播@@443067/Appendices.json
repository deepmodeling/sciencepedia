{"hands_on_practices": [{"introduction": "在任何实验科学中，理解测量误差如何传播到最终计算结果中是一项基本技能。本练习将通用的误差传播公式应用于牛顿的万有引力定律，为量化多变量函数的最终不确定性提供了具体实践。[@problem_id:2169933]", "problem": "在一个旨在检验短距离下与牛顿引力是否存在偏差的高精度实验中，测量了真空中两个小而密的球体之间的引力。引力 $F$ 使用公式 $F = G \\frac{m_1 m_2}{r^2}$ 计算，其中 $m_1$ 和 $m_2$ 是两个球体的质量，$r$ 是它们球心之间的距离，$G$ 是引力常数。\n\n实验测量值如下：\n- 第一个球体的质量为 $m_1 = 50.00$ 克，其相应的绝对不确定度为 $\\delta m_1 = 0.020$ 克。\n- 第二个球体的质量为 $m_2 = 75.00$ 克，其相应的绝对不确定度为 $\\delta m_2 = 0.025$ 克。\n- 两个球体球心之间的距离为 $r = 10.000$ 厘米，其相应的绝对不确定度为 $\\delta r = 0.0050$ 厘米。\n\n在您的计算中，可以假设引力常数 $G$ 精确已知为 $G = 6.674 \\times 10^{-11} \\text{ N m}^2 \\text{kg}^{-2}$。假设质量和距离测量中的不确定度是独立且随机的。\n\n计算所求引力的绝对不确定度 $\\delta F$。您的答案应以牛顿 (N) 为单位，并四舍五入到三位有效数字。", "solution": "问题要求计算引力 $F$ 的传播不确定度，$F$ 是三个测量变量 $m_1$、$m_2$ 和 $r$ 的函数。该函数由下式给出：\n$$F(m_1, m_2, r) = G \\frac{m_1 m_2}{r^2}$$\n对于一个具有微小、独立且随机不确定度 $\\delta x_i$ 的多变量函数 $f(x_1, x_2, \\dots, x_n)$，其传播不确定度 $\\delta f$ 可以使用以下公式计算：\n$$(\\delta f)^2 = \\sum_{i=1}^{n} \\left( \\frac{\\partial f}{\\partial x_i} \\right)^2 (\\delta x_i)^2$$\n将此公式应用于我们的函数 $F(m_1, m_2, r)$，我们得到：\n$$(\\delta F)^2 = \\left( \\frac{\\partial F}{\\partial m_1} \\right)^2 (\\delta m_1)^2 + \\left( \\frac{\\partial F}{\\partial m_2} \\right)^2 (\\delta m_2)^2 + \\left( \\frac{\\partial F}{\\partial r} \\right)^2 (\\delta r)^2$$\n首先，我们计算 $F$ 所需的偏导数：\n$$ \\frac{\\partial F}{\\partial m_1} = G \\frac{m_2}{r^2} $$\n$$ \\frac{\\partial F}{\\partial m_2} = G \\frac{m_1}{r^2} $$\n$$ \\frac{\\partial F}{\\partial r} = G m_1 m_2 \\left( -2 r^{-3} \\right) = -2G \\frac{m_1 m_2}{r^3} $$\n使用相对不确定度通常更简单。我们可以通过将 $(\\delta F)^2$ 的方程除以 $F^2 = \\left(G \\frac{m_1 m_2}{r^2}\\right)^2$ 来求得相对不确定度 $(\\frac{\\delta F}{F})$：\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = \\frac{(\\delta F)^2}{F^2} = \\frac{1}{F^2} \\left[ \\left(G \\frac{m_2}{r^2}\\right)^2 (\\delta m_1)^2 + \\left(G \\frac{m_1}{r^2}\\right)^2 (\\delta m_2)^2 + \\left(-2G \\frac{m_1 m_2}{r^3}\\right)^2 (\\delta r)^2 \\right] $$\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = \\frac{\\left(G \\frac{m_2}{r^2}\\right)^2}{\\left(G \\frac{m_1 m_2}{r^2}\\right)^2} (\\delta m_1)^2 + \\frac{\\left(G \\frac{m_1}{r^2}\\right)^2}{\\left(G \\frac{m_1 m_2}{r^2}\\right)^2} (\\delta m_2)^2 + \\frac{\\left(-2G \\frac{m_1 m_2}{r^3}\\right)^2}{\\left(G \\frac{m_1 m_2}{r^2}\\right)^2} (\\delta r)^2 $$\n化简每一项：\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = \\frac{1}{m_1^2}(\\delta m_1)^2 + \\frac{1}{m_2^2}(\\delta m_2)^2 + \\frac{4}{r^2}(\\delta r)^2 $$\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = \\left(\\frac{\\delta m_1}{m_1}\\right)^2 + \\left(\\frac{\\delta m_2}{m_2}\\right)^2 + \\left(2\\frac{\\delta r}{r}\\right)^2 $$\n这是涉及乘积和幂的函数相对误差传播的标准公式。\n\n接下来，我们将所有给定值转换为国际单位制单位（kg, m）：\n$m_1 = 50.00 \\text{ g} = 0.05000 \\text{ kg}$\n$\\delta m_1 = 0.020 \\text{ g} = 2.0 \\times 10^{-5} \\text{ kg}$\n$m_2 = 75.00 \\text{ g} = 0.07500 \\text{ kg}$\n$\\delta m_2 = 0.025 \\text{ g} = 2.5 \\times 10^{-5} \\text{ kg}$\n$r = 10.000 \\text{ cm} = 0.10000 \\text{ m}$\n$\\delta r = 0.0050 \\text{ cm} = 5.0 \\times 10^{-5} \\text{ m}$\n\n现在，我们计算每个测量值的相对不确定度：\n$$ \\frac{\\delta m_1}{m_1} = \\frac{2.0 \\times 10^{-5} \\text{ kg}}{0.05000 \\text{ kg}} = 4.0 \\times 10^{-4} $$\n$$ \\frac{\\delta m_2}{m_2} = \\frac{2.5 \\times 10^{-5} \\text{ kg}}{0.07500 \\text{ kg}} = \\frac{1}{3000} \\approx 3.3333 \\times 10^{-4} $$\n$$ \\frac{\\delta r}{r} = \\frac{5.0 \\times 10^{-5} \\text{ m}}{0.10000 \\text{ m}} = 5.0 \\times 10^{-4} $$\n\n将这些值代入 $F$ 的相对不确定度方程中：\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = (4.0 \\times 10^{-4})^2 + (3.3333 \\times 10^{-4})^2 + (2 \\times 5.0 \\times 10^{-4})^2 $$\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = (1.6 \\times 10^{-7}) + (1.1111 \\times 10^{-7}) + (1.0 \\times 10^{-3})^2 $$\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = 1.6 \\times 10^{-7} + 1.1111 \\times 10^{-7} + 1.0 \\times 10^{-6} $$\n$$ \\left(\\frac{\\delta F}{F}\\right)^2 = 0.16 \\times 10^{-6} + 0.11111 \\times 10^{-6} + 1.0 \\times 10^{-6} = 1.27111 \\times 10^{-6} $$\n$F$ 的相对不确定度是这个值的平方根：\n$$ \\frac{\\delta F}{F} = \\sqrt{1.27111 \\times 10^{-6}} \\approx 1.1274 \\times 10^{-3} $$\n为了求得绝对不确定度 $\\delta F$，我们首先需要计算 $F$ 的值：\n$$ F = G \\frac{m_1 m_2}{r^2} = (6.674 \\times 10^{-11} \\text{ N m}^2 \\text{kg}^{-2}) \\frac{(0.05000 \\text{ kg})(0.07500 \\text{ kg})}{(0.10000 \\text{ m})^2} $$\n$$ F = (6.674 \\times 10^{-11}) \\frac{0.00375}{0.01} = (6.674 \\times 10^{-11}) (0.375) = 2.50275 \\times 10^{-11} \\text{ N} $$\n最后，我们计算绝对不确定度 $\\delta F$：\n$$ \\delta F = F \\times \\left(\\frac{\\delta F}{F}\\right) = (2.50275 \\times 10^{-11} \\text{ N}) \\times (1.1274 \\times 10^{-3}) $$\n$$ \\delta F \\approx 2.8219 \\times 10^{-14} \\text{ N} $$\n将结果四舍五入到三位有效数字，我们得到：\n$$ \\delta F \\approx 2.82 \\times 10^{-14} \\text{ N} $$", "answer": "$$\\boxed{2.82 \\times 10^{-14}}$$", "id": "2169933"}, {"introduction": "在有限精度算术中，数学上等价的公式并非总能得到相同的结果。本练习通过比较两种计算方差的方法，生动地展示了“灾难性抵消”现象，并强调了为何算法的选择对数值稳定性至关重要。[@problem_id:2169914]", "problem": "一名数据科学课程的学生接到了分析方差计算数值稳定性的任务。他们得到了一个包含四个高精度测量值的小数据集：$x_1 = 10000.01$，$x_2 = 10000.02$，$x_3 = 10000.04$，以及 $x_4 = 10000.05$。\n\n该学生必须在一台具有有限浮点精度的假想计算机上进行计算。这台计算机执行每个算术运算，并通过四舍五入到8位有效数字来存储所有中间和最终结果。例如，如果计算结果为 $12345.6789$，它将被存储为 $12345.679$；一个像 $9.87654321 \\times 10^{-5}$ 这样的数将被存储为 $9.8765432 \\times 10^{-5}$。\n\n该学生被要求使用两个在完美算术中数学上等价的不同公式来计算数据集的样本方差 $s^2$。设数据点数量为 $N=4$。\n\n**公式 A**（“单遍”计算公式）：\n$$s_A^2 = \\frac{1}{N-1} \\left( \\sum_{i=1}^{N} x_i^2 - \\frac{1}{N} \\left(\\sum_{i=1}^{N} x_i\\right)^2 \\right)$$\n\n**公式 B**（“双遍”定义公式）：\n$$s_B^2 = \\frac{1}{N-1} \\sum_{i=1}^{N} (x_i - \\bar{x})^2, \\quad \\text{其中} \\quad \\bar{x} = \\frac{1}{N} \\sum_{i=1}^{N} x_i$$\n\n使用公式 A ($s_A^2$) 和公式 B ($s_B^2$) 计算样本方差，对每一个产生超过8位有效数字的中间计算，都严格遵守8位有效数字的精度规则。报告得到的两个值，$s_A^2$ 和 $s_B^2$。", "solution": "我们必须模拟一台将每个算术运算的结果四舍五入到8位有效数字的机器。\n\n给定 $N=4$，$x_{1}=10000.01$，$x_{2}=10000.02$，$x_{3}=10000.04$，$x_{4}=10000.05$。\n\n公式 A：\n$$s_{A}^{2}=\\frac{1}{N-1}\\left(\\sum_{i=1}^{N}x_{i}^{2}-\\frac{1}{N}\\left(\\sum_{i=1}^{N}x_{i}\\right)^{2}\\right)。$$\n\n计算 $x_{i}^{2}$，每次平方后四舍五入到8位有效数字：\n- $x_{1}^{2}=100000200.0001 \\to 1.0000020 \\times 10^{8}=100000200$，\n- $x_{2}^{2}=100000400.0004 \\to 1.0000040 \\times 10^{8}=100000400$，\n- $x_{3}^{2}=100000800.0016 \\to 1.0000080 \\times 10^{8}=100000800$，\n- $x_{4}^{2}=100001000.0025 \\to 1.0000100 \\times 10^{8}=100001000$。\n\n平方和，每次加法后四舍五入：\n- $100000200+100000400=200000600 \\to 2.0000060 \\times 10^{8}=200000600$，\n- $200000600+100000800=300001400 \\to 3.0000140 \\times 10^{8}=300001400$，\n- $300001400+100001000=400002400 \\to 4.0000240 \\times 10^{8}=400002400$。\n因此 $\\sum x_{i}^{2}=400002400$。\n\n$x_{i}$ 的和，每次加法后四舍五入：\n- $10000.01+10000.02=20000.03$，\n- $20000.03+10000.04=30000.07$，\n- $30000.07+10000.05=40000.12$。\n因此 $\\sum x_{i}=40000.12$。\n\n将和平方然后除以 $N$，每次运算后四舍五入：\n- $(40000.12)^{2}=1.6000096000144 \\times 10^{9} \\to 1.6000096 \\times 10^{9}=1600009600$，\n- $\\frac{1}{4}\\cdot 1600009600=4.000024 \\times 10^{8} \\to 400002400$。\n\n现在括号内的值为 $400002400-400002400=0$，所以\n$$s_{A}^{2}=\\frac{1}{3}\\cdot 0=0。$$\n\n公式 B：\n$$s_{B}^{2}=\\frac{1}{N-1}\\sum_{i=1}^{N}(x_{i}-\\bar{x})^{2},\\quad \\bar{x}=\\frac{1}{N}\\sum_{i=1}^{N}x_{i}。$$\n\n均值，除法后四舍五入：\n- $\\bar{x}=\\frac{40000.12}{4}=10000.03$。\n\n偏差及其平方，每次运算后四舍五入：\n- $x_{1}-\\bar{x}=10000.01-10000.03=-0.02$，平方为 $0.0004$，\n- $x_{2}-\\bar{x}=10000.02-10000.03=-0.01$，平方为 $0.0001$，\n- $x_{3}-\\bar{x}=10000.04-10000.03=0.01$，平方为 $0.0001$，\n- $x_{4}-\\bar{x}=10000.05-10000.03=0.02$，平方为 $0.0004$。\n\n偏差平方和，每次加法后四舍五入：\n- $0.0004+0.0001=0.0005$，\n- $0.0005+0.0001=0.0006$，\n- $0.0006+0.0004=0.0010$。\n\n除以 $N-1=3$ 并四舍五入到8位有效数字：\n- $\\frac{0.0010}{3}=3.333333333\\ldots \\times 10^{-4} \\to 3.3333333 \\times 10^{-4}$。\n\n因此，\n$$s_{A}^{2}=0,\\qquad s_{B}^{2}=3.3333333 \\times 10^{-4}。$$", "answer": "$$\\boxed{\\begin{pmatrix}0 & 3.3333333 \\times 10^{-4}\\end{pmatrix}}$$", "id": "2169914"}, {"introduction": "数值不稳定性可能在出人意料的情况下出现，即使是在众所周知的几何公式中。通过分析用于计算一个细长“薄片”三角形面积的海伦公式，本问题揭示了两个相近数值的减法会如何急剧放大初始测量误差，这是计算几何及其他领域中的一个重要教训。[@problem_id:2169926]", "problem": "一位工程师的任务是计算一块面积很大、非常狭长的三角形地块的面积。使用高精度激光测距仪，测得三条边的长度分别为 $a = 500.0$ 米，$b = 500.1$ 米和 $c = 1000.0$ 米。测距仪的规格说明指出，这些独立的测量值每次都存在 $0.05$ 米的不确定度。\n\n该工程师计划使用海伦公式来计算面积 $A$，其表达式为\n$$A = \\sqrt{s(s-a)(s-b)(s-c)}$$\n其中 $s = \\frac{a+b+c}{2}$ 是三角形的半周长。\n\n考虑到边长测量中的不确定度，请确定计算出的面积的绝对不确定度 $\\delta A$。请将最终答案以平方米为单位表示，并四舍五入到两位有效数字。", "solution": "我们将三个边长测量值 $a$、$b$、$c$ 视为独立的，每个的绝对不确定度为 $\\delta a=\\delta b=\\delta c=0.05$。面积由海伦公式计算，\n$$\nA=\\sqrt{s(s-a)(s-b)(s-c)},\\quad s=\\frac{a+b+c}{2}.\n$$\n对于独立的不确定度，一阶（高斯）误差传播公式给出\n$$\n(\\delta A)^{2}=\\left(\\frac{\\partial A}{\\partial a}\\right)^{2}(\\delta a)^{2}+\\left(\\frac{\\partial A}{\\partial b}\\right)^{2}(\\delta b)^{2}+\\left(\\frac{\\partial A}{\\partial c}\\right)^{2}(\\delta c)^{2}.\n$$\n对 $\\ln A$ 求导会很方便。写出\n$$\n\\ln A=\\frac{1}{2}\\left[\\ln s+\\ln(s-a)+\\ln(s-b)+\\ln(s-c)\\right],\\quad \\frac{\\partial s}{\\partial a}=\\frac{\\partial s}{\\partial b}=\\frac{\\partial s}{\\partial c}=\\frac{1}{2},\n$$\n我们得到\n$$\n\\frac{\\partial \\ln A}{\\partial a}=\\frac{1}{2}\\left[\\frac{1}{s}\\cdot\\frac{1}{2}+\\frac{1}{s-a}\\left(\\frac{1}{2}-1\\right)+\\frac{1}{s-b}\\cdot\\frac{1}{2}+\\frac{1}{s-c}\\cdot\\frac{1}{2}\\right]\n=\\frac{1}{4}\\left(\\frac{1}{s}-\\frac{1}{s-a}+\\frac{1}{s-b}+\\frac{1}{s-c}\\right),\n$$\n类似地\n$$\n\\frac{\\partial \\ln A}{\\partial b}=\\frac{1}{4}\\left(\\frac{1}{s}+\\frac{1}{s-a}-\\frac{1}{s-b}+\\frac{1}{s-c}\\right),\\quad\n\\frac{\\partial \\ln A}{\\partial c}=\\frac{1}{4}\\left(\\frac{1}{s}+\\frac{1}{s-a}+\\frac{1}{s-b}-\\frac{1}{s-c}\\right).\n$$\n因为 $\\frac{\\partial A}{\\partial x}=A\\,\\frac{\\partial \\ln A}{\\partial x}$，所以误差传播公式变为\n$$\n\\left(\\frac{\\delta A}{A}\\right)^{2}=\\left(\\frac{\\partial \\ln A}{\\partial a}\\right)^{2}(\\delta a)^{2}+\\left(\\frac{\\partial \\ln A}{\\partial b}\\right)^{2}(\\delta b)^{2}+\\left(\\frac{\\partial \\ln A}{\\partial c}\\right)^{2}(\\delta c)^{2}.\n$$\n代入测量值 $a=500.0$，$b=500.1$，$c=1000.0$。则\n$$\ns=\\frac{a+b+c}{2}=1000.05,\\quad s-a=500.05,\\quad s-b=499.95,\\quad s-c=0.05,\n$$\n所以\n$$\n\\frac{1}{s}=\\frac{20}{20001},\\quad \\frac{1}{s-a}=\\frac{20}{10001},\\quad \\frac{1}{s-b}=\\frac{20}{9999},\\quad \\frac{1}{s-c}=20.\n$$\n因此\n$$\n\\frac{\\partial \\ln A}{\\partial a}=\\frac{1}{4}\\left(\\frac{20}{20001}-\\frac{20}{10001}+\\frac{20}{9999}+20\\right)\\approx 5.000250087500626,\n$$\n$$\n\\frac{\\partial \\ln A}{\\partial b}=\\frac{1}{4}\\left(\\frac{20}{20001}+\\frac{20}{10001}-\\frac{20}{9999}+20\\right)\\approx 5.000249887500624,\n$$\n$$\n\\frac{\\partial \\ln A}{\\partial c}=\\frac{1}{4}\\left(\\frac{20}{20001}+\\frac{20}{10001}+\\frac{20}{9999}-20\\right)\\approx -4.998500012489375.\n$$\n因此，\n$$\n\\left(\\frac{\\delta A}{A}\\right)^{2}\\approx \\left(5.000250087500626\\right)^{2}(0.05)^{2}+\\left(5.000249887500624\\right)^{2}(0.05)^{2}+\\left(-4.998500012489375\\right)^{2}(0.05)^{2},\n$$\n$$\n\\left(\\frac{\\delta A}{A}\\right)^{2}\\approx 0.187475005625,\\quad \\frac{\\delta A}{A}\\approx 0.43298385.\n$$\n为了完整起见，名义面积为\n$$\nA=\\sqrt{1000.05\\cdot 500.05\\cdot 499.95\\cdot 0.05}=\\sqrt{12{,}500{,}624.87499375}\\approx 3535.6223.\n$$\n因此\n$$\n\\delta A\\approx 0.43298385\\times 3535.6223\\approx 1530.867\\ \\text{(square meters)}.\n$$\n四舍五入到两位有效数字，绝对不确定度为 $1.5\\times 10^{3}$（以要求的单位表示）。", "answer": "$$\\boxed{1.5 \\times 10^{3}}$$", "id": "2169926"}]}
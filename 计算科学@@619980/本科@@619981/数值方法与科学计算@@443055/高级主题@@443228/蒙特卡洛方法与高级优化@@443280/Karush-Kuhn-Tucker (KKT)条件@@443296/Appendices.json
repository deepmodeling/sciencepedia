{"hands_on_practices": [{"introduction": "掌握 Karush-Kuhn-Tucker (KKT) 条件的第一步是能够逐一验证它们。本练习提供了一个直接的应用场景：给定一个最优化问题和一个候选点，你需要系统地检查平稳性、原始可行性、对偶可行性和互补松弛性这四个条件是否都得到满足。通过这个基础练习 [@problem_id:2183108]，你将熟悉 KKT 条件的完整结构，并理解为何一个点可能不满足这些成为最优解的必要条件。", "problem": "考虑以下优化问题：\n最小化函数 $f(x, y) = (x - 4)^{2} + (y - 3)^{2}$，并满足不等式约束 $g(x, y) = x^{2} + 2y - 6 \\le 0$。\n\n对于此类形式的约束优化问题（最小化 $f(\\mathbf{x})$，约束条件为 $g_i(\\mathbf{x}) \\le 0$），一个点若要成为潜在的局部最小值，必须满足 Karush-Kuhn-Tucker (KKT) 条件。对于这个带有一个约束的特定问题，点 $(x, y)$ 的 KKT 条件如下：\n\n1.  **平稳性 (Stationarity)**：存在一个拉格朗日乘子 $\\mu$，使得 $\\nabla f(x, y) + \\mu \\nabla g(x, y) = \\mathbf{0}$。\n2.  **原始可行性 (Primal Feasibility)**：$g(x, y) \\le 0$。\n3.  **对偶可行性 (Dual Feasibility)**：拉格朗日乘子 $\\mu \\ge 0$。\n4.  **互补松弛性 (Complementary Slackness)**：$\\mu \\, g(x, y) = 0$。\n\n通过检查所有四个 KKT 条件来分析点 $(x_0, y_0) = (2, 1)$。根据您的分析，从以下选项中选择正确的陈述。\n\nA. 所有四个 KKT 条件都满足，因此该点是 KKT 点。\n\nB. 平稳性条件不满足，因为不存在一致的拉格朗日乘子。因此，该点不是 KKT 点。\n\nC. 对偶可行性条件不满足，因为所需的拉格朗日乘子为负。因此，该点不是 KKT 点。\n\nD. 互补松弛性条件不满足。因此，该点不是 KKT 点。\n\nE. 原始可行性条件不满足。因此，该点不是 KKT 点。", "solution": "给定函数 $f(x,y)=(x-4)^{2}+(y-3)^{2}$ 和 $g(x,y)=x^{2}+2y-6\\le 0$。对于点 $(x_{0},y_{0})=(2,1)$，我们检查 KKT 条件。\n\n计算梯度：\n$$\n\\nabla f(x,y)=\\left(2(x-4),\\,2(y-3)\\right),\\quad \\nabla g(x,y)=\\left(2x,\\,2\\right).\n$$\n在点 $(2,1)$ 处，\n$$\n\\nabla f(2,1)=(-4,\\,-4),\\quad \\nabla g(2,1)=(4,\\,2).\n$$\n\n平稳性条件要求存在 $\\mu$ 使得\n$$\n\\nabla f(2,1)+\\mu\\,\\nabla g(2,1)=(0,0),\n$$\n这给出了线性方程组\n$$\n-4+4\\mu=0,\\qquad -4+2\\mu=0.\n$$\n由第一个方程，$\\mu=1$。由第二个方程，$\\mu=2$。这不一致，因此没有 $\\mu$ 能满足平稳性条件。所以，平稳性条件不成立。\n\n原始可行性要求 $g(2,1)\\le 0$。计算：\n$$\ng(2,1)=2^{2}+2\\cdot 1-6=4+2-6=0\\le 0,\n$$\n所以原始可行性成立。\n\n对偶可行性要求 $\\mu\\ge 0$。由于没有 $\\mu$ 满足平稳性条件，因此没有一致的乘子可供检验；失败是由于平稳性，而不是 $\\mu$ 的符号。\n\n互补松弛性要求 $\\mu\\,g(2,1)=0$。由于 $g(2,1)=0$，这个条件对任何 $\\mu$ 都成立；因此互补松弛性得到满足。\n\n结论：该点由于不存在一致的拉格朗日乘子而未能满足平稳性条件。正确选项是 B。", "answer": "$$\\boxed{B}$$", "id": "2183108"}, {"introduction": "KKT 条件不仅是一套代数规则，它们还深刻地揭示了约束最优化问题的几何本质。本练习 [@problem_id:2183125] 旨在帮助你将抽象的 KKT 条件与直观的几何概念联系起来。通过求解一个二次函数在有约束和无约束情况下的最小值，你将亲身体会到，当无约束最优点位于可行域之外时，KKT 点是如何作为该点在可行域上的“投影”而出现的。", "problem": "考虑函数 $f(x,y) = (x-2)^2 + (y-2)^2$。设 $P_u = (x_u, y_u)$ 是该函数在笛卡尔平面上达到其无约束全局最小值的点。设 $P_c = (x_c, y_c)$ 是同一函数 $f(x,y)$ 在不等式约束 $x + y \\le 1$ 下达到其最小值的点。\n\n求点 $P_u$ 和 $P_c$ 之间的欧几里得距离。请用精确的解析表达式给出你的答案。", "solution": "我们首先确定 $f(x,y)=(x-2)^{2}+(y-2)^{2}$ 的无约束全局最小值点。由于 $f$ 是严格凸函数，其无约束最小值点 $P_{u}=(x_{u},y_{u})$ 可以通过将梯度设为零来找到：\n$$\n\\frac{\\partial f}{\\partial x}=2(x-2)=0 \\quad\\Rightarrow\\quad x_{u}=2, \\qquad \\frac{\\partial f}{\\partial y}=2(y-2)=0 \\quad\\Rightarrow\\quad y_{u}=2.\n$$\n因此 $P_{u}=(2,2)$。\n\n对于有约束的问题，我们在 $x+y\\leq 1$ 的约束下最小化 $f(x,y)$。由于 $f(x,y)$ 是点 $(x,y)$ 到点 $(2,2)$ 的欧几里得距离的平方，约束下的最小值点 $P_{c}$ 是点 $(2,2)$ 在闭合半平面 $\\{(x,y):x+y\\leq 1\\}$ 上的投影。因为 $2+2=4>1$，所以该投影位于边界线 $x+y=1$ 上。\n\n使用拉格朗日乘数法将点 $(2,2)$ 投影到直线 $x+y=1$ 上。定义拉格朗日函数\n$$\n\\mathcal{L}(x,y,\\lambda)=(x-2)^{2}+(y-2)^{2}+\\lambda(x+y-1).\n$$\n平稳性条件给出\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial x}=2(x-2)+\\lambda=0 \\quad\\Rightarrow\\quad x=2-\\frac{\\lambda}{2}, \\qquad \\frac{\\partial \\mathcal{L}}{\\partial y}=2(y-2)+\\lambda=0 \\quad\\Rightarrow\\quad y=2-\\frac{\\lambda}{2}.\n$$\n代入约束条件 $x+y=1$ 可得\n$$\n\\left(2-\\frac{\\lambda}{2}\\right)+\\left(2-\\frac{\\lambda}{2}\\right)=1 \\quad\\Rightarrow\\quad 4-\\lambda=1 \\quad\\Rightarrow\\quad \\lambda=3.\n$$\n因此\n$$\nx_{c}=y_{c}=2-\\frac{3}{2}=\\frac{1}{2}, \\quad \\text{so} \\quad P_{c}=\\left(\\frac{1}{2},\\frac{1}{2}\\right).\n$$\n\n$P_{u}$ 和 $P_{c}$ 之间的欧几里得距离为\n$$\nd=\\sqrt{\\left(2-\\frac{1}{2}\\right)^{2}+\\left(2-\\frac{1}{2}\\right)^{2}}=\\sqrt{\\frac{9}{4}+\\frac{9}{4}}=\\sqrt{\\frac{9}{2}}=\\frac{3}{\\sqrt{2}}=\\frac{3\\sqrt{2}}{2}.\n$$", "answer": "$$\\boxed{\\frac{3\\sqrt{2}}{2}}$$", "id": "2183125"}, {"introduction": "关于 KKT 条件的一个关键点是，它们是局部最优解的“必要条件”，但通常不是“充分条件”，除非满足某些额外的凸性假设。这意味着满足 KKT 条件的点仅仅是“候选点”，它可能是最小值点、最大值点，甚至是鞍点。这个练习 [@problem_id:3246265] 将让你直面这一重要概念，通过求解并分析一个问题的所有 KKT 点，你将识别出其中一个满足所有条件但并非局部最小值的点，从而加深对 KKT 条件理论作用与局限性的理解。", "problem": "给定一个不等式约束优化问题，要求在闭合凸单位圆盘 $\\{x\\in\\mathbb{R}^{2}:x_{1}^{2}+x_{2}^{2}\\leq 1\\}$ 上最小化函数 $f:\\mathbb{R}^{2}\\to\\mathbb{R}$，其定义为 $f(x)=x_{1}^{2}-x_{2}^{2}$。使用一个合适的光滑函数 $g:\\mathbb{R}^{2}\\to\\mathbb{R}$，将可行集描述为单个不等式约束 $g(x)\\leq 0$。仅使用约束最优性、拉格朗日乘子以及不等式约束的标准一阶必要最优性条件的定义，完成以下任务：\n\n- 通过指定 $f(x)$ 和 $g(x)$，将问题表述为标准不等式约束形式。\n- 通过引用一个针对不等式约束的广泛使用的充分正则性条件，证明一个标准约束规范在所有可行点上都成立。\n- 从平稳性、可行性、乘子符号和互补松弛性方面，推导在一个局部极小值点处的一阶必要最优性条件。\n- 在可行集中对所有候选点显式求解这些条件，并通过测试 $f$ 在可行方向上的行为来分类哪些是局部极小值点，哪些不是。\n\n你的任务是找出一个满足 Karush-Kuhn-Tucker (KKT) 条件，但不是 $f$ 在单位圆盘上的局部极小值点的可行点。将该点作为你的最终答案。\n\n无需进行数值四舍五入。将你的最终答案表示为有序对 $(x_{1},x_{2})$，不带单位。", "solution": "用户提出了一个约束优化问题，并要求使用 Karush-Kuhn-Tucker (KKT) 条件进行分析，以找到一类特定点。\n\n### 问题验证\n\n**步骤 1：提取已知信息**\n- **目标函数**: $f(x)=x_{1}^{2}-x_{2}^{2}$，其中 $f:\\mathbb{R}^{2}\\to\\mathbb{R}$ 且 $x=(x_1, x_2)$。\n- **可行集**: 闭合单位圆盘 $\\{x\\in\\mathbb{R}^{2}:x_{1}^{2}+x_{2}^{2}\\leq 1\\}$。\n- **约束表述**: 使用光滑函数 $g:\\mathbb{R}^{2}\\to\\mathbb{R}$ 的单个不等式约束 $g(x)\\leq 0$。\n- **任务**:\n    1. 将问题表述为标准形式。\n    2. 证明一个标准约束规范成立。\n    3. 推导一阶必要最优性 (KKT) 条件。\n    4. 对所有候选点求解 KKT 条件。\n    5. 分类这些点，找到一个是 KKT 点但不是局部极小值点的点。\n- **要求输出**: 一个满足 KKT 条件但不是局部极小值点的可行点 $(x_1, x_2)$。\n\n**步骤 2：使用提取的已知信息进行验证**\n该问题是非线性规划中的一个明确定义的练习。\n- **科学依据**: 该问题完全属于数学优化理论的范畴。目标函数、约束和 KKT 条件的概念是该领域的基础。\n- **良态**: 目标函数 $f(x)$ 是连续的，可行集是 $\\mathbb{R}^{2}$ 的一个紧子集。根据极值定理，全局最小值和最大值必然存在，因此解是存在的。问题结构清晰。\n- **客观性**: 问题使用精确的数学语言陈述，没有歧义或主观因素。\n- **完整性和一致性**: 问题提供了进行分析所需的所有必要信息。目标函数和可行集都已完全指定。\n\n**步骤 3：结论与行动**\n该问题是有效的。它是约束优化中一个标准的、自洽的、良态的问题。将按照要求的步骤提供解答。\n\n### 解答\n\n**1. 问题表述**\n问题是最小化函数 $f(x_{1}, x_{2}) = x_{1}^{2}-x_{2}^{2}$。可行集由不等式 $x_{1}^{2}+x_{2}^{2} \\leq 1$ 描述。为了将其表示为标准形式 $g(x) \\leq 0$，我们定义约束函数 $g(x_{1}, x_{2}) = x_{1}^{2}+x_{2}^{2}-1$。$f$ 和 $g$ 都是多项式，因此在 $\\mathbb{R}^{2}$ 上处处连续可微。\n\n优化问题为：\n$$\n\\begin{array}{ll}\n\\text{最小化}  f(x_{1}, x_{2}) = x_{1}^{2}-x_{2}^{2} \\\\\n\\text{约束于}  g(x_{1}, x_{2}) = x_{1}^{2}+x_{2}^{2}-1 \\leq 0\n\\end{array}\n$$\n\n**2. 约束规范**\n为使 KKT 条件成为最优性的必要条件，在任何潜在的局部极小值点上都必须满足一个约束规范。一个广泛使用的条件是线性无关约束规范 (Linear Independence Constraint Qualification, LICQ)。对于单个不等式约束 $g(x) \\leq 0$，如果在一个点 $x^*$ 处约束是激活的（即 $g(x^*) = 0$），并且梯度向量 $\\nabla g(x^*)$ 非零，则 LICQ 在该点成立。如果约束是非激活的（$g(x^*)  0$），则 LICQ 平凡地满足。\n\n我们来计算约束函数的梯度：\n$$\n\\nabla g(x_{1}, x_{2}) = \\begin{pmatrix} \\frac{\\partial g}{\\partial x_{1}} \\\\ \\frac{\\partial g}{\\partial x_{2}} \\end{pmatrix} = \\begin{pmatrix} 2x_{1} \\\\ 2x_{2} \\end{pmatrix}\n$$\n梯度 $\\nabla g(x)$ 是零向量 $\\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$ 当且仅当 $x_{1}=0$ 且 $x_{2}=0$。点 $(0,0)$ 位于可行集的内部，因为 $g(0,0) = 0^{2}+0^{2}-1=-1  0$。对于可行集边界上的任何点 $x^*$，约束是激活的，即 $x_{1}^{*2}+x_{2}^{*2}=1$。这样的点不可能是 $(0,0)$。因此，对于任何约束被激活的可行点 $x^*$，都有 $\\nabla g(x^*) \\neq \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$。\n因此，LICQ 在每个可行点上都成立。这确保了任何局部极小值点都必须满足 KKT 条件。\n\n**3. Karush-Kuhn-Tucker (KKT) 条件**\n该问题的拉格朗日函数为：\n$$\nL(x_{1}, x_{2}, \\mu) = f(x_{1}, x_{2}) + \\mu g(x_{1}, x_{2}) = (x_{1}^{2}-x_{2}^{2}) + \\mu(x_{1}^{2}+x_{2}^{2}-1)\n$$\n其中 $\\mu$ 是与不等式约束相关联的拉格朗日乘子。一个点 $(x_{1}, x_{2})$ 成为局部极小值点的一阶必要 (KKT) 条件如下：\n\na) **平稳性**: 拉格朗日函数关于 $x$ 的梯度为零。\n$$\n\\nabla_{x} L(x_{1}, x_{2}, \\mu) = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix} \\implies\n\\begin{cases}\n\\frac{\\partial L}{\\partial x_{1}} = 2x_{1} + 2\\mu x_{1} = 2x_{1}(1+\\mu) = 0 \\\\\n\\frac{\\partial L}{\\partial x_{2}} = -2x_{2} + 2\\mu x_{2} = 2x_{2}(\\mu-1) = 0\n\\end{cases}\n$$\n\nb) **原始可行性**: 该点必须在可行集内。\n$$\nx_{1}^{2}+x_{2}^{2}-1 \\leq 0\n$$\n\nc) **对偶可行性**: 拉格朗日乘子必须为非负。\n$$\n\\mu \\geq 0\n$$\n\nd) **互补松弛性**: 乘子与约束函数之积为零。\n$$\n\\mu(x_{1}^{2}+x_{2}^{2}-1) = 0\n$$\n\n**4. 求解 KKT 点**\n我们根据互补松弛性条件分情况分析。\n\n**情况 1：约束是非激活的 ($x_{1}^{2}+x_{2}^{2}-1  0$)。**\n根据互补松弛性，这要求 $\\mu=0$。\n平稳性条件变为：\n$$\n\\begin{cases}\n2x_{1}(1+0) = 2x_{1} = 0 \\implies x_{1}=0 \\\\\n2x_{2}(0-1) = -2x_{2} = 0 \\implies x_{2}=0\n\\end{cases}\n$$\n这给出了候选点 $(0,0)$。\n我们来检验可行性：$g(0,0) = 0^{2}+0^{2}-1 = -1 \\leq 0$。该点是可行的。\n对于点 $(x_1, x_2) = (0,0)$ 和 $\\mu=0$，所有 KKT 条件均满足。这是我们的第一个 KKT 点。\n\n**情况 2：约束是激活的 ($x_{1}^{2}+x_{2}^{2}-1 = 0$)。**\n这意味着 $x_{1}^{2}+x_{2}^{2}=1$。根据对偶可行性，我们有 $\\mu \\geq 0$。\n平稳性条件为：\n1) $2x_{1}(1+\\mu) = 0$\n2) $2x_{2}(\\mu-1) = 0$\n\n由方程 (1)，要么 $x_{1}=0$ 要么 $1+\\mu=0$。由于 $\\mu \\geq 0$，所以 $1+\\mu \\geq 1  0$。因此，必须有 $x_{1}=0$。\n将 $x_{1}=0$ 代入激活的约束条件 $x_{1}^{2}+x_{2}^{2}=1$ 中，我们得到 $x_{2}^{2}=1$，所以 $x_{2}=1$ 或 $x_{2}=-1$。\n\n现在我们使用方程 (2)，$2x_{2}(\\mu-1)=0$。由于 $x_{2}$ 非零（为 $1$ 或 $-1$），我们必须有 $\\mu-1=0$，这意味着 $\\mu=1$。这个值与 $\\mu \\geq 0$ 一致。\n这给出了两个候选点：$(0,1)$（对应 $\\mu=1$）和 $(0,-1)$（对应 $\\mu=1$）。\n\n我们来检查其他可能性。由方程 (2)，要么 $x_{2}=0$ 要么 $\\mu=1$。\n- 如果我们假设 $\\mu=1$，方程 (2) 得到满足。方程 (1) 变为 $2x_{1}(1+1)=4x_1=0$，这得出 $x_1=0$。这导出了与之前相同的点 $(0, \\pm 1)$。\n- 如果我们假设 $x_2=0$，激活的约束 $x_1^2+x_2^2=1$ 给出 $x_1 = \\pm 1$。方程 (1) 为 $2x_1(1+\\mu)=0$。由于 $x_1 \\neq 0$，我们需要 $1+\\mu=0$，即 $\\mu=-1$。这违反了对偶可行性条件 $\\mu \\geq 0$。因此，$(\\pm 1, 0)$ 不是这个最小化问题的 KKT 点。\n\n总之，我们找到了三个满足 KKT 条件的点：\n- $P_1 = (0,0)$，对应 $\\mu=0$。\n- $P_2 = (0,1)$，对应 $\\mu=1$。\n- $P_3 = (0,-1)$，对应 $\\mu=1$。\n\n**5. KKT 点的分类**\n最后一步是确定这些点中哪些不是局部极小值点。\n\n**分析 $P_1 = (0,0)$:**\n该点的函数值为 $f(0,0) = 0^{2}-0^{2} = 0$。\n为了检验这是否是一个局部极小值点，我们考察 $f$ 在 $(0,0)$ 周围一个小邻域内的行为。由于该点位于可行集的内部，任何小扰动都会得到一个可行点。\n- 考虑沿 $x_{1}$ 轴的一个点 $(h, 0)$，其中 $h$ 是一个小的非零数。该点是可行的。函数值为 $f(h,0) = h^{2}-0^{2} = h^{2}  0 = f(0,0)$。\n- 考虑沿 $x_{2}$ 轴的一个点 $(0, k)$，其中 $k$ 是一个小的非零数。该点是可行的。函数值为 $f(0,k) = 0^{2}-k^{2} = -k^{2}  0 = f(0,0)$。\n由于在 $(0,0)$ 任意近的邻域内，既存在使函数值大于 $f(0,0)$ 的点，也存在使函数值小于 $f(0,0)$ 的点，因此点 $(0,0)$ 是一个鞍点，而不是局部极小值点。\n\n因此，点 $(0,0)$ 是一个满足 KKT 条件但不是局部极小值点的可行点。\n\n为了完整性，我们可以研究另外两个点。\n**分析 $P_2 = (0,1)$ 和 $P_3 = (0,-1)$:**\n这两个点的函数值均为 $f(0, \\pm 1) = 0^{2} - (\\pm 1)^{2} = -1$。\n我们考虑任何可行点 $(x_1, x_2)$，其中 $x_1^2+x_2^2 \\le 1$。\n$f(x_{1}, x_{2}) = x_{1}^{2}-x_{2}^{2}$。由于 $x_1^2 = 1 - x_2^2$，对于边界上的任何点，$f(x_1, x_2) = (1-x_2^2) - x_2^2 = 1-2x_2^2$。当 $x_2^2$ 最大化时，该函数最小化，这发生在 $x_2=\\pm 1$ 时，得到 $f=-1$。对于内部的任何点，$x_1^2+x_2^2  1$。一个更简单的论证是 $f(x_1, x_2) = x_1^2 - x_2^2 \\ge 0 - x_2^2 \\ge -1$，因为 $x_1^2 \\ge 0$ 且 $x_2^2 \\le 1$。最小值 $-1$ 仅在 $x_1^2=0$ 且 $x_2^2=1$ 时取得，即在 $(0, \\pm 1)$ 处。因此，$(0,1)$ 和 $(0,-1)$ 是全局（因此也是局部）极小值点。\n\n问题要求找出一个满足 KKT 条件但不是局部极小值点的可行点。点 $(0,0)$ 满足这个要求。", "answer": "$$\\boxed{(0, 0)}$$", "id": "3246265"}]}
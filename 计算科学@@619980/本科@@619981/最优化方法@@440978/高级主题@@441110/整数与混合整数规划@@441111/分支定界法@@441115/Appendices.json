{"hands_on_practices": [{"introduction": "分支定界法的一个有效起点是快速找到一个可行的整数解。这个解提供了一个初始的“当前最优值”（对于最大化问题是一个下界），这对于后续剪除搜索树中的分支至关重要。本练习 [@problem_id:2209682] 将通过一个经典的背包问题，演示如何使用简单的贪心启发式算法来找到这样一个初始解。", "problem": "一艘深空探测器的数据传输缓冲区有限，必须决定将哪些收集到的数据集发送回地球。任务的主要目标是最大化传输信息的总科学价值。该探测器的传输缓冲区容量为 18 千兆字节 (GB)。现有五个数据集可供传输，每个数据集都有特定的数据大小和指定的科学价值。\n\n- 数据集 1：大小 = 5 GB，科学价值 = 65\n- 数据集 2：大小 = 4 GB，科学价值 = 40\n- 数据集 3：大小 = 6 GB，科学价值 = 72\n- 数据集 4：大小 = 8 GB，科学价值 = 80\n- 数据集 5：大小 = 3 GB，科学价值 = 27\n\n为了进行快速的初步选择，任务控制团队定义了一个特定的自动化协议。该协议逐个考虑数据集，始终优先选择科学价值与数据大小之比最高的数据集。如果两个数据集的比率相同，则优先选择数据集编号较小的一个。该协议会尝试将最高优先级的数据集添加到缓冲区中，前提是其大小在剩余容量范围内。对剩余的数据集和容量重复此过程，直到优先列表中的数据集无法再添加为止。\n\n计算通过此协议选择传输的数据集的总科学价值。", "solution": "设缓冲区容量为 $C=18$ GB。对于大小为 $S_{i}$、科学价值为 $V_{i}$ 的数据集 $i$，定义优先级比率 $r_{i}=\\frac{V_{i}}{S_{i}}$。计算：\n$$\nr_{1}=\\frac{65}{5}=13,\\quad r_{2}=\\frac{40}{4}=10,\\quad r_{3}=\\frac{72}{6}=12,\\quad r_{4}=\\frac{80}{8}=10,\\quad r_{5}=\\frac{27}{3}=9.\n$$\n按 $r_{i}$ 的降序对数据集进行排序，若比率相同则按索引从小到大排序：顺序为 $(1,3,2,4,5)$。\n\n初始化剩余容量 $C_{0}=18$ 和总价值 $T_{0}=0$。\n- 考虑数据集 1：$S_{1}=5\\leq C_{0}=18$，因此将其纳入。更新 $C_{1}=18-5=13$，$T_{1}=0+65=65$。\n- 考虑数据集 3：$S_{3}=6\\leq C_{1}=13$，因此将其纳入。更新 $C_{2}=13-6=7$，$T_{2}=65+72=137$。\n- 考虑数据集 2：$S_{2}=4\\leq C_{2}=7$，因此将其纳入。更新 $C_{3}=7-4=3$，$T_{3}=137+40=177$。\n- 考虑数据集 4：$S_{4}=8> C_{3}=3$，因此跳过。\n- 考虑数据集 5：$S_{5}=3\\leq C_{3}=3$，因此将其纳入。更新 $C_{4}=3-3=0$，$T_{4}=177+27=204$。\n\n没有更多的数据集可以添加。该协议选择的总科学价值为 $T_{4}=204$。", "answer": "$$\\boxed{204}$$", "id": "2209682"}, {"introduction": "掌握了初始界之后，下一步是学习算法的核心计算步骤：分支。当线性规划松弛问题的解包含分数值时，我们需要对其中一个分数变量进行“分支”，从而将原问题分解为两个新的子问题。本练习 [@problem_id:2209717] 将引导你完成这一关键过程，计算分支后两个子问题的最优目标值，这是构建分支定界搜索树的基础。", "problem": "考虑以下整数规划 (IP) 问题，其中决策变量 $x_1$ 和 $x_2$ 必须为非负整数：\n\n最大化 $Z = 5x_1 + 8x_2$\n约束条件为：\n1. $x_1 + x_2 \\le 6$\n2. $5x_1 + 9x_2 \\le 45$\n3. $x_1, x_2 \\ge 0$ 且为整数。\n\n我们采用分支定界算法来寻找最优整数解。该过程首先求解问题的线性规划 (LP) 松弛（即，忽略整数约束）。在获得这个初始 LP 的最优解后，选择解中值为非整数的变量之一进行分支。\n\n假设选择变量 $x_2$ 进行第一步分支。此分支操作会创建两个新的 LP 子问题，它们构成了分支定界搜索树的第一层。设初始 LP 松弛的最优解中 $x_2$ 的值为 $x_2 = x_2^*$。通过向原始 LP 松弛中添加以下约束之一来形成这两个新子问题：\n- 子问题 A：$x_2 \\le \\lfloor x_2^* \\rfloor$\n- 子问题 B：$x_2 \\ge \\lceil x_2^* \\rceil$\n\n确定子问题 A 和子问题 B 的 LP 松弛的最优目标函数值。设这些值分别为 $Z_A$ 和 $Z_B$。\n\n将您的答案表示为一个行矩阵，按顺序包含 $[Z_A, Z_B]$ 这两个值。", "solution": "我们首先求解原问题的 LP 松弛：\n最大化 $Z=5x_{1}+8x_{2}$，约束条件为 $x_{1}+x_{2}\\leq 6$，$5x_{1}+9x_{2}\\leq 45$，$x_{1},x_{2}\\geq 0$。\n\n根据线性规划基本定理，最优解出现在一个极点上。计算两个紧约束的交点：\n$$\n\\begin{aligned}\nx_{1}+x_{2}=6,\\\\\n5x_{1}+9x_{2}=45.\n\\end{aligned}\n$$\n将 $x_{1}=6-x_{2}$ 代入第二个方程：\n$$\n5(6-x_{2})+9x_{2}=45 \\;\\Rightarrow\\; 30-5x_{2}+9x_{2}=45 \\;\\Rightarrow\\; 4x_{2}=15 \\;\\Rightarrow\\; x_{2}^{*}=\\frac{15}{4}.\n$$\n因此 $x_{1}^{*}=6-\\frac{15}{4}=\\frac{9}{4}$，LP 最优值为\n$$\nZ^{*}=5\\cdot\\frac{9}{4}+8\\cdot\\frac{15}{4}=\\frac{45}{4}+\\frac{120}{4}=\\frac{165}{4}.\n$$\n由于 $x_{2}^{*}=\\frac{15}{4}$ 是一个分数值，我们对 $x_{2}$ 进行分支：\n子问题 A：$x_{2}\\leq\\left\\lfloor \\frac{15}{4}\\right\\rfloor=3$。\n子问题 B：$x_{2}\\geq\\left\\lceil \\frac{15}{4}\\right\\rceil=4$。\n\n子问题 A (添加 $x_{2}\\leq 3$): 我们在以下约束下最大化 $Z=5x_{1}+8x_{2}$\n$$\nx_{1}+x_{2}\\leq 6,\\quad 5x_{1}+9x_{2}\\leq 45,\\quad x_{2}\\leq 3,\\quad x_{1},x_{2}\\geq 0.\n$$\n由于目标函数系数为正且 $8>5$，为了在 $x_{2}\\leq 3$ 下保持可行性，最优的做法是取 $x_{2}$ 允许的最大值，即 $x_{2}=3$，然后在剩余约束下最大化 $x_{1}$。当 $x_{2}=3$ 时，\n$$\nx_{1}\\leq 6-3=3,\\qquad 5x_{1}\\leq 45-27=18 \\;\\Rightarrow\\; x_{1}\\leq \\frac{18}{5}.\n$$\n紧约束是 $x_{1}\\leq 3$，所以选择 $(x_{1},x_{2})=(3,3)$，得到\n$$\nZ_{A}=5\\cdot 3+8\\cdot 3=39.\n$$\n\n子问题 B (添加 $x_{2}\\geq 4$): 在以下约束下最大化 $Z$\n$$\nx_{1}+x_{2}\\leq 6,\\quad 5x_{1}+9x_{2}\\leq 45,\\quad x_{2}\\geq 4,\\quad x_{1},x_{2}\\geq 0.\n$$\n考虑与 $x_{2}\\geq 4$ 的关键边界交点：\n- 当 $x_{1}=0$ 时，由 $5x_{1}+9x_{2}\\leq 45$ 可得 $x_{2}\\leq 5$，因此 $(0,5)$ 是可行解，得到 $Z=40$。\n- $x_{2}=4$ 与 $5x_{1}+9x_{2}=45$ 的交点给出 $5x_{1}+36=45\\Rightarrow x_{1}=\\frac{9}{5}$，且 $x_{1}+x_{2}=\\frac{9}{5}+4=\\frac{29}{5}\\leq 6$，所以 $(\\frac{9}{5},4)$ 是可行解，此时\n$$\nZ=5\\cdot\\frac{9}{5}+8\\cdot 4=9+32=41.\n$$\n- $x_{2}=4$ 与 $x_{1}+x_{2}=6$ 的交点给出 $(2,4)$，但 $5\\cdot 2+9\\cdot 4=46>45$，因此是不可行解。\n\n沿着 $5x_{1}+9x_{2}=45$ 这条线，从 $(0,5)$ 向较小的 $x_{2}$ 方向移动会增加 $x_{1}$ 并增加 $Z$，因为 $dZ=(5-\\frac{40}{9})dx_{1}=\\frac{5}{9}dx_{1}>0$，直到在 $(\\frac{9}{5},4)$ 处达到下界 $x_{2}=4$。因此 $(\\frac{9}{5},4)$ 是子问题 B 的最优解，其值为\n$$\nZ_{B}=41.\n$$\n\n因此，所求的数值对是 $[Z_{A},Z_{B}]=[39,41]$。", "answer": "$$\\boxed{\\begin{pmatrix} 39  41 \\end{pmatrix}}$$", "id": "2209717"}, {"introduction": "现在，让我们将所学概念应用于一个完整而实际的场景中。分支定界法的最终目标是在所有整数解中找到最优解。这个问题 [@problem_id:2209707] 挑战你为一个小型生产计划问题确定最佳的整数解，这正是完整的分支定界算法最终会收敛到的答案。通过解决这个问题，你可以全面地理解该方法的目标和应用。", "problem": "一个小型电子工作坊生产两种定制集成电路，元件A和元件B。这些元件的生产受到两个主要资源限制：可用的硅晶圆蚀刻时间和质量保证（QA）测试时间。\n\n每个元件A（$x_1$）的利润为$4,000，每个元件B（$x_2$）的利润为$3,000。该工作坊旨在最大化其总利润。生产的元件数量 $x_1$ 和 $x_2$ 必须为非负整数。\n\n生产限制如下：\n1.  **蚀刻时间：** 每个元件A需要2小时的蚀刻时间，每个元件B需要3小时。每周总可用蚀刻时间为10小时。\n2.  **QA测试时间：** 每个元件A需要2小时的QA测试时间，每个元件B需要1小时。每周总可用QA测试时间为7小时。\n\n这个情景可以被表述为一个整数线性规划（ILP）问题。确定该工作坊每周可能的最大利润。用美元表示你的最终答案。", "solution": "设 $x_{1}$ 和 $x_{2}$ 分别表示每周生产的元件A和元件B的数量。整数线性规划问题为：\n$$\n\\max P=4000x_{1}+3000x_{2}\n$$\n约束条件为\n$$\n2x_{1}+3x_{2}\\leq 10,\\quad 2x_{1}+x_{2}\\leq 7,\\quad x_{1}\\geq 0,\\ x_{2}\\geq 0,\\ x_{1},x_{2}\\in \\mathbb{Z}.\n$$\n首先，通过将 $x_{1},x_{2}$ 视为实数变量来求解线性规划松弛问题。联立紧约束条件\n$$\n2x_{1}+3x_{2}=10,\\qquad 2x_{1}+x_{2}=7\n$$\n两式相减得到 $2x_{2}=3$，因此 $x_{2}=\\frac{3}{2}$，然后 $2x_{1}+\\frac{3}{2}=7$ 得到 $x_{1}=\\frac{11}{4}$。此时松弛问题的最优值为\n$$\nP^{\\ast}_{\\text{LP}}=4000\\cdot \\frac{11}{4}+3000\\cdot \\frac{3}{2}=11000+4500=15500,\n$$\n但 $\\left(\\frac{11}{4},\\frac{3}{2}\\right)$ 不是整数解。\n\n为了获得整数最优解，我们枚举可行的整数 $x_{1}$。由 $2x_{1}+x_{2}\\leq 7$ 和 $x_{2}\\geq 0$ 可得 $2x_{1}\\leq 7$，因此 $x_{1}\\leq 3$。结合 $x_{1}\\geq 0$， $x_{1}$ 的候选值为 $x_{1}\\in\\{0,1,2,3\\}$。对于一个固定的 $x_{1}$，由于 $x_{2}$ 的系数为正，最大化 $x_{2}$ 即可最大化 $P$。$x_{2}$ 的上界为\n$$\nx_{2}\\leq \\min\\!\\left(7-2x_{1},\\ \\frac{10-2x_{1}}{3}\\right).\n$$\n评估每种情况：\n- 当 $x_{1}=0$ 时：$x_{2}\\leq \\min(7,\\frac{10}{3})=3$，所以最优解为 $(0,3)$，利润 $P=3000\\cdot 3=9000$。\n- 当 $x_{1}=1$ 时：$x_{2}\\leq \\min(5,\\frac{8}{3})=2$，所以最优解为 $(1,2)$，利润 $P=4000\\cdot 1+3000\\cdot 2=10000$。\n- 当 $x_{1}=2$ 时：$x_{2}\\leq \\min(3,2)=2$，所以最优解为 $(2,2)$，利润 $P=4000\\cdot 2+3000\\cdot 2=14000$。\n- 当 $x_{1}=3$ 时：$x_{2}\\leq \\min(1,\\frac{4}{3})=1$，所以最优解为 $(3,1)$，利润 $P=4000\\cdot 3+3000\\cdot 1=15000$。\n\n在这些情况中，最大利润为 $15000$，在 $(x_{1},x_{2})=(3,1)$ 处取得，该解满足两个约束条件 $2\\cdot 3+3\\cdot 1=9\\leq 10$ 和 $2\\cdot 3+1=7\\leq 7$。", "answer": "$$\\boxed{15000}$$", "id": "2209707"}]}
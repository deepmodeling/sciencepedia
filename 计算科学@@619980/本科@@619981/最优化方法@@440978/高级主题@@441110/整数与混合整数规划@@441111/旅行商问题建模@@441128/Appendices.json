{"hands_on_practices": [{"introduction": "除了基于割集的约束，消除子回路的另一种常用方法是 Miller-Tucker-Zemlin (MTZ) 公式。该方法通过引入辅助变量 $u_i$ 来为旅行路径中的每个城市定义一个“顺序”或“位置”。本练习将帮助你将 MTZ 公式应用于一个小规模问题，这是掌握这项强大技术的关键一步 [@problem_id:1411103]。", "problem": "对于一个包含 $n$ 个城市（标记为 $V = \\{1, 2, \\dots, n\\}$）的旅行商问题（TSP），其整数规划模型通常从定义二元变量 $x_{ij}$ 开始，其中如果路径直接从城市 $i$ 前往城市 $j$，则 $x_{ij} = 1$，否则 $x_{ij} = 0$。基本的分配约束 $\\sum_{i \\in V, i \\neq j} x_{ij} = 1$（对所有 $j \\in V$）和 $\\sum_{j \\in V, j \\neq i} x_{ij} = 1$（对所有 $i \\in V$）确保了每个城市都只被进入一次且只被离开一次。然而，仅凭这些约束无法阻止不连通子回路的形成。\n\n为了强制形成一条单一的、连通的路径，一种常见的方法是使用 Miller-Tucker-Zemlin (MTZ) 模型。该模型为 $i \\in \\{2, 3, \\dots, n\\}$ 引入了一组辅助连续变量 $u_i$。对于一个从指定起点（城市1）出发并返回终点的路径，这些 $u_i$ 变量可以被解释为城市 $i$ 在被访问城市序列中的位置。\n\n考虑一个包含4个城市 $V = \\{1, 2, 3, 4\\}$ 的TSP问题，其中城市1是起点。辅助变量为 $u_2, u_3, u_4$。以下哪个选项代表了为保证此特定问题形成单一路径所需的完整且正确的 MTZ 约束集？\n\nA.\n$u_2 - u_3 + 3x_{23} \\le 2$\n$u_2 - u_4 + 3x_{24} \\le 2$\n$u_3 - u_2 + 3x_{32} \\le 2$\n$u_3 - u_4 + 3x_{34} \\le 2$\n$u_4 - u_2 + 3x_{42} \\le 2$\n$u_4 - u_3 + 3x_{43} \\le 2$\n且 $1 \\le u_i \\le 3$ 对 $i \\in \\{2, 3, 4\\}$。\n\nB.\n$u_2 - u_3 + 3x_{23} \\le 2$\n$u_3 - u_4 + 3x_{34} \\le 2$\n$u_4 - u_2 + 3x_{42} \\le 2$\n且 $1 \\le u_i \\le 3$ 对 $i \\in \\{2, 3, 4\\}$。\n\nC.\n$u_2 - u_3 + 4x_{23} \\le 3$\n$u_2 - u_4 + 4x_{24} \\le 3$\n$u_3 - u_2 + 4x_{32} \\le 3$\n$u_3 - u_4 + 4x_{34} \\le 3$\n$u_4 - u_2 + 4x_{42} \\le 3$\n$u_4 - u_3 + 4x_{43} \\le 3$\n且 $1 \\le u_i \\le 4$ 对 $i \\in \\{2, 3, 4\\}$。\n\nD.\n$u_2 - u_3 + 3x_{23} \\le 2$\n$u_2 - u_4 + 3x_{24} \\le 2$\n$u_3 - u_2 + 3x_{32} \\le 2$\n$u_3 - u_4 + 3x_{34} \\le 2$\n$u_4 - u_2 + 3x_{42} \\le 2$\n$u_4 - u_3 + 3x_{43} \\le 2$\n且 $1 \\le u_i \\le 4$ 对 $i \\in \\{1, 2, 3, 4\\}$。\n\nE.\n$u_i - u_j + 3x_{ij} \\le 2$ 对所有 $i,j \\in \\{1, 2, 3, 4\\}$, $i \\neq j$。\n且 $1 \\le u_i \\le 3$ 对 $i \\in \\{1, 2, 3, 4\\}$。", "solution": "我们回顾一下针对一个包含 $n$ 个城市且有指定起点（城市1）的TSP问题的标准 Miller-Tucker-Zemlin (MTZ) 子回路消除约束。为 $i \\in \\{2,3,\\dots,n\\}$ 引入连续辅助变量 $u_{i}$，其界限代表了每个非起点城市的访问位置。一种常见且正确的 MTZ 形式是：\n- 界限：对所有 $i \\in \\{2,3,\\dots,n\\}$，\n$$\n1 \\le u_{i} \\le n-1.\n$$\n- 成对的 MTZ 不等式：对所有 $i,j \\in \\{2,3,\\dots,n\\}$ 且 $i \\neq j$，\n$$\nu_{i} - u_{j} + (n-1)\\,x_{ij} \\le n-2.\n$$\n\n理由：\n- 如果 $x_{ij} = 1$，则 $u_{i} - u_{j} \\le -1$，即 $u_{i} \\le u_{j} - 1$，这就在所选的弧上强制了一个一致的顺序，从而禁止了非起点节点之间形成子回路。\n- 如果 $x_{ij} = 0$，不等式变为 $u_{i} - u_{j} \\le n-2$。考虑到 $1 \\le u_{i} \\le n-1$ 和 $1 \\le u_{j} \\le n-1$，这个约束是冗余的，因为 $u_i - u_j$ 的最大可能差值为 $(n-1) - 1 = n-2$。\n\n具体到 $n=4$ 且起点为城市1的情况，我们定义 $u_{2}, u_{3}, u_{4}$ 并得到：\n- 界限：\n$$\n1 \\le u_{i} \\le 3 \\quad \\text{for } i \\in \\{2,3,4\\}.\n$$\n- 对于所有有序对 $(i,j)$（其中 $i,j \\in \\{2,3,4\\}$, $i \\neq j$）的 MTZ 不等式：\n$$\nu_{i} - u_{j} + 3\\,x_{ij} \\le 2.\n$$\n\n枚举这些有序对，可以得到以下六个不等式：\n$$\nu_{2} - u_{3} + 3x_{23} \\le 2,\\quad\nu_{2} - u_{4} + 3x_{24} \\le 2,\\quad\nu_{3} - u_{2} + 3x_{32} \\le 2,\n$$\n$$\nu_{3} - u_{4} + 3x_{34} \\le 2,\\quad\nu_{4} - u_{2} + 3x_{42} \\le 2,\\quad\nu_{4} - u_{3} + 3x_{43} \\le 2,\n$$\n以及 $1 \\le u_{i} \\le 3$ (对 $i \\in \\{2,3,4\\}$)。\n\n与选项比较：\n- 选项A完全匹配我们为 $n=4$ 推导出的 MTZ 形式。\n- 选项B不完整（遗漏了几个必需的 $(i,j)$ 对）。\n- 选项C使用了备选的系数4和右侧值3，但错误地将 $u_{2},u_{3},u_{4}$ 的上界设置为4而不是3，这与标准的位置解释 $1 \\le u_{i} \\le n-1$ 不符。\n- 选项D错误地对 $u_{1}$（在这个变体中它不属于 MTZ 变量）设置了界限，并使用了上界4。\n- 选项E错误地将城市1包含在 MTZ 不等式中，并且也对 $u_1$ 设置了界限，这两者都不是针对固定起点的标准 MTZ 构造的一部分。\n\n因此，针对此特定问题的完整且正确的约束集由选项A给出。", "answer": "$$\\boxed{A}$$", "id": "1411103"}, {"introduction": "现在我们转向更常见的 Dantzig-Fulkerson-Johnson (DFJ) 公式，它使用子回路消除约束 (Subtour Elimination Constraints, SECs)。尽管 SEC 的数量可能是指数级的，但其背后的逻辑非常直观。本练习通过一个连接两个城市群的“桥梁”场景，生动地展示了特定的 SEC 如何像“守卫”一样，确保旅行商必须穿过桥梁以连接所有城市，从而将抽象的“割集”概念变得易于理解 [@problem_id:3193309]。", "problem": "考虑一个关于 $n=5$ 个城市的对称旅行商问题，其成本由以下带有一座单桥的无向道路网络（一个连通加权图）上的最短路径距离导出。顶点集为 $V=\\{1,2,3,4,5\\}$。边集和长度（单位：公里）如下：\n- 左簇：$\\{(1,2),(2,3),(1,3)\\}$，长度为 $c_{12}=4$, $c_{23}=4$, $c_{13}=7$。\n- 桥：$\\{(3,4)\\}$，长度为 $c_{34}=9$。这是左簇 $\\{1,2,3\\}$ 和右簇 $\\{4,5\\}$ 之间唯一的边。\n- 右簇：$\\{(4,5)\\}$，长度为 $c_{45}=5$。\n所有边都是无向的，长度为非负，并且在网络上满足三角不等式。\n\n在顶点集 $V$ 上的完全有向图上定义旅行商问题，对于所有 $i\\neq j$，弧成本 $c_{ij}$ 等于道路网络中从 $i$ 到 $j$ 的最短路径距离，且 $c_{ii}=0$。因此，成本 $c_{ij}$ 继承了由上述网络导出的度量。使用标准的有向指派公式，其中对于 $i\\neq j$，有二元变量 $x_{ij}\\in\\{0,1\\}$，并满足度等式 $\\sum_{j\\in V\\setminus\\{i\\}}x_{ij}=1$（对于所有 $i\\in V$）和 $\\sum_{i\\in V\\setminus\\{j\\}}x_{ij}=1$（对于所有 $j\\in V$）。初始时，不包含任何子回路消除约束 (SEC)。\n\n任务：\n1. 计算由道路网络导出的所有点对之间的最短路径距离 $c_{ij}$。\n2. 给出一个满足度等式约束的可行（但非连通）解，该解由 $\\{1,2,3\\}$ 上的一个3圈和 $\\{4,5\\}$ 上的一个2圈组成，并计算其在成本 $c_{ij}$ 下的目标值。\n3. 令 $S=\\{1,2,3\\}$。写出针对集合 $S$ 的有向公式的基于割集的子回路消除约束 (SEC)，并解释为什么任务2中的非连通解违反了这些约束。简要说明为什么这些 SEC 对于强制实现跨桥的连通性至关重要。\n4. 通过第一性原理，推理回路必须如何跨越桥梁并遍历每个簇，从而确定在度量 $c_{ij}$ 下，这个5城市旅行商问题的最优哈密顿回路长度。你的最终答案必须是一个实数。\n\n最终的回路长度以公里为单位表示。将您的答案四舍五入到四位有效数字。", "solution": "该问题陈述已被验证为具有科学依据、问题明确且客观。这是一个组合优化中的标准问题，结构清晰，并为求得唯一解提供了足够的信息。\n\n首先，我们按顺序解决这四个任务。问题的核心是一个关于 $n=5$ 个城市的旅行商问题(TSP)，其成本 $c_{ij}$ 定义为给定底层道路网络上的最短路径距离。\n\n**任务1：计算所有点对之间的最短路径距离 $c_{ij}$**\n\n道路网络由两个顶点簇 $A=\\{1,2,3\\}$ 和 $B=\\{4,5\\}$ 组成，通过一条单桥边 $(3,4)$ 连接。最短路径距离 $c_{ij}$ 计算如下：\n\n1.  **A簇 ($\\{1,2,3\\}$) 内部的距离：**\n    -   $c_{12}$：直接路径长度为 $4$。不存在更短的路径。所以，$c_{12}=c_{21}=4$。\n    -   $c_{23}$：直接路径长度为 $4$。不存在更短的路径。所以，$c_{23}=c_{32}=4$。\n    -   $c_{13}$：直接路径长度为 $7$。替代路径 $1 \\to 2 \\to 3$ 的长度为 $c_{12}+c_{23} = 4+4=8$。最短路径是直接路径。所以，$c_{13}=c_{31}=7$。\n\n2.  **B簇 ($\\{4,5\\}$) 内部的距离：**\n    -   $c_{45}$：唯一的路径是长度为 $5$ 的直接边。所以，$c_{45}=c_{54}=5$。\n\n3.  **A簇和B簇之间的距离：**\n    从顶点 $i \\in A$ 到顶点 $j \\in B$ 的任何路径都必须跨越桥 $(3,4)$。因此，最短路径距离是从 $i$ 到 $3$ 的最短距离、桥的长度以及从 $4$ 到 $j$ 的最短距离之和。\n    通用公式为 $c_{ij} = c_{i3} + c_{34} + c_{4j}$，其中 $i \\in A, j \\in B$。\n    -   $c_{14} = c_{13} + c_{34} = 7 + 9 = 16$。\n    -   $c_{15} = c_{13} + c_{34} + c_{45} = 7 + 9 + 5 = 21$。\n    -   $c_{24} = c_{23} + c_{34} = 4 + 9 = 13$。\n    -   $c_{25} = c_{23} + c_{34} + c_{45} = 4 + 9 + 5 = 18$。\n    -   $c_{34} = 9$ (桥本身)。\n    -   $c_{35} = c_{34} + c_{45} = 9 + 5 = 14$。\n    根据底层无向图的对称性，$c_{ji} = c_{ij}$。\n\nTSP的完整对称成本矩阵 $C = (c_{ij})$ 如下：\n$$\nC = \\begin{pmatrix}\n0  4  7  16  21 \\\\\n4  0  4  13  18 \\\\\n7  4  0  9  14 \\\\\n16  13  9  0  5 \\\\\n21  18  14  5  0\n\\end{pmatrix}\n$$\n\n**任务2：给出一种可行但非连通的解**\n\n我们被要求找到指派问题松弛（仅有度约束）的一个可行解，该解由 $\\{1,2,3\\}$ 上的一个3圈和 $\\{4,5\\}$ 上的一个2圈组成。\n-   对于3圈，我们可以选择回路 $1 \\to 2 \\to 3 \\to 1$。对应的二元变量为 $x_{12}=1$，$x_{23}=1$ 和 $x_{31}=1$。此子回路的成本为 $c_{12} + c_{23} + c_{31} = 4 + 4 + 7 = 15$。\n-   对于2圈，回路必须是 $4 \\to 5 \\to 4$。对应的二元变量为 $x_{45}=1$ 和 $x_{54}=1$。此子回路的成本为 $c_{45} + c_{54} = 5 + 5 = 10$。\n\n完整的非连通解由非零变量集合 $\\{x_{12}, x_{23}, x_{31}, x_{45}, x_{54}\\}$ 给出。这组变量满足每个顶点 $i \\in V$ 的度约束：$\\sum_j x_{ij} = 1$ 和 $\\sum_j x_{ji} = 1$。此解的总目标值是子回路成本之和：$15 + 10 = 25$。\n\n**任务3：子回路消除约束 (SEC)**\n\n对于一个有向TSP公式，基于割集的SEC规定，对于顶点的任何非空真子集 $S \\subset V$，必须至少有一条弧离开 $S$。该约束为：\n$$\n\\sum_{i \\in S, j \\in V \\setminus S} x_{ij} \\geq 1\n$$\n对于特定集合 $S=\\{1,2,3\\}$，我们有 $V \\setminus S = \\{4,5\\}$，SEC变为：\n$$\n\\sum_{i \\in \\{1,2,3\\}, j \\in \\{4,5\\}} x_{ij} = x_{14} + x_{15} + x_{24} + x_{25} + x_{34} + x_{35} \\geq 1\n$$\n任务2中的非连通解仅在端点都位于 $S$ 内部（即 $x_{12}, x_{23}, x_{31}$）或都位于 $V \\setminus S$ 内部（即 $x_{45}, x_{54}$）的弧上具有非零变量。所有代表从 $S$ 跨越到 $V \\setminus S$ 的弧的变量都为零：$x_{14}=x_{15}=x_{24}=x_{25}=x_{34}=x_{35}=0$。\n将这些值代入SEC得到：\n$$\n0 + 0 + 0 + 0 + 0 + 0 = 0\n$$\n由于 $0  1$，该约束被违反。\n\n这些SEC是关键的，因为它们强制实现连通性。集合 $S$ 对应于城市的左簇，它仅通过底层网络中的桥与右簇 $V \\setminus S$ 相连。通过要求至少有一条弧从 $S$ 指向 $V \\setminus S$，SEC确保任何有效的回路都必须“跨越桥梁”，从而防止解分解为每个簇内部独立的、非连通的子回路。\n\n**任务4：确定最优哈密顿回路长度**\n\n在 $V=\\{1,2,3,4,5\\}$ 上的哈密顿回路必须访问每个城市。鉴于城市被划分为簇 $A=\\{1,2,3\\}$ 和 $B=\\{4,5\\}$，任何回路都必须包含一条贯穿 A 中所有城市的路径，一条贯穿 B 中所有城市的路径，以及两条连接这些路径端点以形成单个圈的“交叉”弧。\n\n总回路长度 $L$ 可以分解为：\n$L = (\\text{A中哈密顿路径的长度}) + (\\text{B中哈密顿路径的长度}) + (\\text{两条交叉弧的成本})$。\n\n1.  **B中的路径：**该路径必须连接顶点 $4$ 和 $5$。唯一这样的路径是 $4 \\leftrightarrow 5$，长度为 $c_{45}=5$。端点是 $\\{4,5\\}$。\n\n2.  **A中的路径：**我们必须找到穿过 $\\{1,2,3\\}$ 的哈密顿路径的长度。路径的结构有三种可能性（不考虑方向逆转的情况下）：\n    -   路径 $1-2-3$：长度 $c_{12} + c_{23} = 4 + 4 = 8$。端点为 $\\{1,3\\}$。\n    -   路径 $2-1-3$：长度 $c_{21} + c_{13} = 4 + 7 = 11$。端点为 $\\{2,3\\}$。\n    -   路径 $1-3-2$：长度 $c_{13} + c_{32} = 7 + 4 = 11$。端点为 $\\{1,2\\}$。\n\n3.  **连接路径：**我们必须将 A 中所选路径的端点与 B 中路径的端点 $\\{4,5\\}$ 连接起来，以使总长度最小化。设 A 中路径的端点为 $\\{u,v\\}$。交叉弧的成本为 $\\min(c_{u4}+c_{v5}, c_{u5}+c_{v4})$。\n\n让我们评估每种情况下的总回路长度：\n\n-   **情况 A1（路径 $1-2-3$）：**A中路径长度为 $8$，端点为 $\\{1,3\\}$。\n    -   交叉成本：$\\min(c_{14}+c_{35}, c_{15}+c_{34}) = \\min(16+14, 21+9) = \\min(30,30) = 30$。\n    -   总回路长度：$8\\ (\\text{路径 A}) + 5\\ (\\text{路径 B}) + 30\\ (\\text{交叉}) = 43$。\n    -   一个示例回路是 $3 \\to 2 \\to 1 \\to 5 \\to 4 \\to 3$，其成本为 $c_{32}+c_{21}+c_{15}+c_{54}+c_{43} = 4+4+21+5+9 = 43$。\n\n-   **情况 A2（路径 $2-1-3$）：**A中路径长度为 $11$，端点为 $\\{2,3\\}$。\n    -   交叉成本：$\\min(c_{24}+c_{35}, c_{25}+c_{34}) = \\min(13+14, 18+9) = \\min(27,27) = 27$。\n    -   总回路长度：$11\\ (\\text{路径 A}) + 5\\ (\\text{路径 B}) + 27\\ (\\text{交叉}) = 43$。\n    -   一个示例回路是 $2 \\to 1 \\to 3 \\to 5 \\to 4 \\to 2$，其成本为 $c_{21}+c_{13}+c_{35}+c_{54}+c_{42} = 4+7+14+5+13=43$。\n\n-   **情况 A3（路径 $1-3-2$）：**A中路径长度为 $11$，端点为 $\\{1,2\\}$。\n    -   交叉成本：$\\min(c_{14}+c_{25}, c_{15}+c_{24}) = \\min(16+18, 21+13) = \\min(34,34) = 34$。\n    -   总回路长度：$11\\ (\\text{路径 A}) + 5\\ (\\text{路径 B}) + 34\\ (\\text{交叉}) = 50$。\n\n比较所有情况的总长度（$43, 43, 50$），最小长度为 $43$。最优哈密顿回路长度为 $43$ 公里。四舍五入到四位有效数字得到 $43.00$ 公里。", "answer": "$$\\boxed{43.00}$$", "id": "3193309"}, {"introduction": "在理解了 DFJ 公式的基础上，一个自然的问题是：如果问题中的成本不满足某些良好性质（例如，违反三角不等式）会发生什么？这个高级练习探讨了 DFJ 公式的稳健性，它作为一个纯组合模型，与依赖于度量性质（如三角不等式）的近似算法（如 Christofides 算法）的性能保证形成对比。通过这个练习，你将深化对精确数学模型和启发式算法之间根本差异的理解 [@problem_id:3193291]。", "problem": "考虑一个对称旅行商问题 (TSP)，该问题定义在顶点集为 $V=\\{a,b,x,y\\}$ 的完全图上，其边成本 $c_{ij}=c_{ji}$（对于 $i \\neq j$）为非负对称值。TSP 旨在寻找一条经过 $V$ 中所有顶点的成本最小的哈密顿回路。Dantzig-Fulkerson-Johnson (DFJ) 公式是一个无向整数规划模型，其二元变量为 $x_{ij}$（对于 $i  j$），当且仅当边 $\\{i,j\\}$ 被包含在回路中时，$x_{ij}=1$。这些变量受制于度约束和子回路消除约束 (SEC)。相比之下，Christofides 算法是一种著名的近似算法，其对解质量有 $1.5$ 的近似保证，但这种保证通常依赖于成本满足三角不等式 ($c_{ik} \\le c_{ij} + c_{jk}$)。\n\n给定以下成本，它们明显违反了三角不等式（例如，$c_{ab}=100 > c_{ax}+c_{xy}+c_{yb}=3$）：\n$c_{ax} = 1$, $c_{xy} = 1$, $c_{yb} = 1$, $c_{xb} = 3$, $c_{ay} = 3$, $c_{ab} = 100$。\n\n以下哪个/哪些陈述是正确的？\n\nA. DFJ 公式对于此实例仍然有效且良定义，因为其约束是组合性的，不依赖于成本的度量性质。\n\nB. 尽管三角不等式被违反，Christofides 算法的 $1.5$ 近似保证在此实例上仍然成立，因为其分析的第一步，即 $\\text{cost}(\\text{MST}) \\le \\text{OPT}$，不使用三角不等式。\n\nC. 当成本违反三角不等式时，DFJ 公式中的子回路消除约束 (SEC) 会变得无效，并可能排除有效的哈密顿回路。\n\nD. 在此实例上，Christofides 算法无法保证 $1.5$ 的近似比，其产生的回路成本可能远大于最优解的 $1.5$ 倍。\n\nE. DFJ 整数规划对于此实例变得不可行，因为其底层的多面体表示依赖于成本满足三角不等式。", "solution": "我们从定义开始。哈密顿回路是每个顶点恰好访问一次的圈。DFJ 公式使用二元决策变量 $x_{i j}$ 来描述哈密顿回路的凸包，其中 $x_{i j}$ 指示无向边 $\\{i,j\\}$ 是否在回路中，度约束 $\\sum_{j \\neq i} x_{i j} = 2$（对每个 $i$）强制每个顶点恰好有两条关联边，子回路消除约束 $\\sum_{i \\in S, j \\notin S} x_{i j} \\geq 2$（对所有非空真子集 $S \\subset V$）防止不连通的圈。这些约束纯粹从拓扑上编码了哈密顿回路的组合结构，并不引用或要求成本具有任何度量性质。\n\nChristofides 算法对对称度量 TSP 的性能分析使用了两个依赖于三角不等式的关键事实：(i) 将欧拉路径通过走捷径缩短为哈密顿圈而不增加成本，依赖于在移除重复顶点 $k$ 时 $c_{i j} \\leq c_{i k} + c_{k j}$ 成立；(ii) 将 MST 的奇度顶点上的最小权重匹配的界限定为最多是最优回路成本的一半，这利用了度量结构。尽管当成本为非负时 $\\operatorname{cost}(\\mathrm{MST}) \\leq \\operatorname{OPT}$ 成立（因为任何哈密顿回路都包含一棵生成树，其成本至多为回路的成本），但当三角不等式不满足时，完整的 $1.5$ 界限会失效。\n\n现在分析给定的实例。边成本如下：\n- $c_{a x} = 1$, $c_{x y} = 1$, $c_{y b} = 1$, $c_{x b} = 3$, $c_{a y} = 3$, $c_{a b} = 100$,\n且 $c_{i j} = c_{j i}$ 和 $c_{i i} = 0$。\n\n首先，计算一个 MST。四个顶点可以用三条边连接起来。最便宜的方式是选择路径 $a - x - y - b$，其边的成本分别为 $1$、$1$ 和 $1$，总计为 $3$。任何使用 $c_{x b}=3$ 或 $c_{a y}=3$ 的替代生成树都会更昂贵。因此，最小生成树 (MST) 是包含边 $\\{a,x\\}$、$\\{x,y\\}$ 和 $\\{y,b\\}$ 的路径，总成本为 $3$。此 MST 的奇度顶点是 $a$ 和 $b$（每个顶点的度为 $1$），因此奇度顶点集恰好是 $\\{a,b\\}$。\n\n接下来，Christofides 算法在奇度顶点集上计算一个最小权重完美匹配。由于奇度顶点集是 $\\{a,b\\}$，唯一的完美匹配是将 $a$ 与 $b$ 配对，贡献的成本为 $c_{a b} = 100$。将 MST 和匹配组合起来，得到一个欧拉多重图，其边为 $\\{a,x\\}$、$\\{x,y\\}$、$\\{y,b\\}$ 和 $\\{a,b\\}$，总成本为 $3 + 100 = 103$。该多重图的一个欧拉回路是 $a \\to x \\to y \\to b \\to a$，这已经是一个哈密顿圈；其成本为 $1 + 1 + 1 + 100 = 103$。\n\n然而，存在一个更便宜的哈密顿回路：$a \\to x \\to b \\to y \\to a$，其边的成本为 $c_{a x}=1$、$c_{x b}=3$、$c_{b y}=1$、$c_{y a}=3$，总计为 $1+3+1+3=8$。因此，最优回路成本满足 $\\operatorname{OPT} \\leq 8$。因此，Christofides 算法在此实例上的输出为 $103$，远大于 $1.5 \\cdot \\operatorname{OPT} \\leq 12$。这表明当三角不等式被违反时，$1.5$ 近似保证失效。\n\n基于这些原理和计算，我们评估每个选项：\n\nA. DFJ 公式的约束是组合性的：度约束在每个顶点上强制两条关联边，子回路消除约束通过要求任何非空真子集 $S$ 的割 $\\{S, V \\setminus S\\}$ 至少有 2 条交叉边来强制连通性。这些约束独立于成本结构来刻画哈密顿回路。违反三角不等式不影响该公式的可行性或正确性；优化过程只是在相同的可行集下最小化回路成本。因此，DFJ 公式对于此实例仍然有效且良定义。结论：正确。\n\nB. 该陈述断言 Christofides 的 $1.5$ 保证在此实例上仍然成立，因为 $\\operatorname{cost}(\\mathrm{MST}) \\leq \\operatorname{OPT}$ 不使用三角不等式。虽然 $\\operatorname{cost}(\\mathrm{MST}) \\leq \\operatorname{OPT}$ 在没有三角不等式的情况下确实成立，但该保证还要求对匹配成本和走捷径步骤进行界定，这两者都依赖于三角不等式。我们的明确计算表明 Christofides 返回一个成本为 $103$ 的回路，而 $\\operatorname{OPT} \\leq 8$，这违反了 $1.5$ 的界限。结论：不正确。\n\nC. 子回路消除约束是纯粹结构性的，不依赖于三角不等式。当成本违反三角不等式时，它们不会排除有效的哈密顿回路；它们只是通过要求至少有两条边跨越每个非平凡的割来消除不连通的圈。因此，声称它们会变得无效并可能排除有效回路的说法是错误的。结论：不正确。\n\nD. 在此实例上，MST 是路径 $a - x - y - b$（成本为 $3$），这使得奇度顶点集必然为 $\\{a,b\\}$。在 $\\{a,b\\}$ 上的最小权重完美匹配是单条边 $(a,b)$，成本为 $100$。最终的欧拉多重图产生的哈密顿圈 $a \\to x \\to y \\to b \\to a$ 的成本为 $103$。与此同时，存在一个成本为 $8$ 的哈密顿回路（例如 $a \\to x \\to b \\to y \\to a$）。因此，Christofides 的 $1.5$ 近似保证在此实例上失效。结论：正确。\n\nE. 哈密顿回路的凸包是一个由线性约束定义的多面体；无论成本性质如何，它都存在。违反三角不等式不影响 DFJ 整数规划的可行性；它们仅影响依赖于度量性质的算法近似保证。因此，声称 DFJ 整数规划变得不可行的说法是错误的。结论：不正确。", "answer": "$$\\boxed{AD}$$", "id": "3193291"}]}
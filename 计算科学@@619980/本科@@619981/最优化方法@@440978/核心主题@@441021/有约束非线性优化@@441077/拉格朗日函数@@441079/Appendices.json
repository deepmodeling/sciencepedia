{"hands_on_practices": [{"introduction": "本练习是应用拉格朗日乘子法的基础。它通过一个经典的资源分配问题，向你展示如何将一个带等式约束的优化问题转化为一个无约束的方程组求解问题。掌握这个过程——构建拉格朗日函数、求偏导数并求解方程组——是理解该方法核心机制的关键第一步。[@problem_id:2216747]", "problem": "考虑一个在两个独立过程之间分配固定的、标准化的资源的问题。设 $x$ 和 $y$ 分别表示分配给第一个和第二个过程的资源比例，满足 $x \\geq 0$ 和 $y \\geq 0$。总资源必须被完全利用，这就施加了一个约束，即分配的比例总和必须为一。与此分配相关的成本由函数 $f(x,y) = \\alpha x^2 + \\beta y^2$ 给出，其中 $\\alpha$ 和 $\\beta$ 是给定的正常数，分别代表每个过程的成本系数。\n\n你的任务是找到最优分配 $(x^*, y^*)$，在满足完全利用约束的条件下，使总成本最小化。你还必须找到在该最优点上的拉格朗日乘子 $\\lambda^*$ 的值。\n\n请用常数 $\\alpha$ 和 $\\beta$ 表示这组三元值 $(x^*, y^*, \\lambda^*)$。", "solution": "问题是在等式约束 $g(x,y) = x+y-1=0$ 下，最小化目标函数 $f(x,y) = \\alpha x^2 + \\beta y^2$。我们可以使用拉格朗日乘子法来解决这个问题。\n\n首先，我们定义拉格朗日函数 $\\mathcal{L}(x, y, \\lambda)$，其表达式为：\n$$\n\\mathcal{L}(x, y, \\lambda) = f(x,y) - \\lambda g(x,y)\n$$\n代入给定的函数，我们得到：\n$$\n\\mathcal{L}(x, y, \\lambda) = \\alpha x^2 + \\beta y^2 - \\lambda(x+y-1)\n$$\n为了找到拉格朗日函数的驻点（这对应于目标函数在约束下的极值点），我们必须找到 $\\mathcal{L}$ 的梯度为零的点。通过对 $\\mathcal{L}$ 分别求关于 $x$、$y$ 和 $\\lambda$ 的偏导数并令其为零，我们得到一个包含三个方程的方程组。这些是最优性的一阶必要条件。\n\n1.  对 $x$ 的偏导数：\n    $$\n    \\frac{\\partial \\mathcal{L}}{\\partial x} = 2\\alpha x - \\lambda = 0\n    $$\n    从此方程中，我们可以用 $\\lambda$ 表示 $x$：\n    $$\n    x = \\frac{\\lambda}{2\\alpha}\n    $$\n\n2.  对 $y$ 的偏导数：\n    $$\n    \\frac{\\partial \\mathcal{L}}{\\partial y} = 2\\beta y - \\lambda = 0\n    $$\n    类似地，我们用 $\\lambda$ 表示 $y$：\n    $$\n    y = \\frac{\\lambda}{2\\beta}\n    $$\n\n3.  对 $\\lambda$ 的偏导数：\n    $$\n    \\frac{\\partial \\mathcal{L}}{\\partial \\lambda} = -(x+y-1) = 0\n    $$\n    这只是恢复了我们原来的约束方程：\n    $$\n    x+y=1\n    $$\n\n现在，我们得到了一个关于三个未知数 $x$、$y$ 和 $\\lambda$ 的三元线性方程组。我们可以通过将前两个方程中 $x$ 和 $y$ 的表达式代入第三个方程来求解这个方程组。\n\n将 $x = \\frac{\\lambda}{2\\alpha}$ 和 $y = \\frac{\\lambda}{2\\beta}$ 代入 $x+y=1$：\n$$\n\\frac{\\lambda}{2\\alpha} + \\frac{\\lambda}{2\\beta} = 1\n$$\n从左边提取公因子 $\\lambda$：\n$$\n\\lambda \\left( \\frac{1}{2\\alpha} + \\frac{1}{2\\beta} \\right) = 1\n$$\n为了解出 $\\lambda$，我们首先为括号内的项找到一个公分母：\n$$\n\\lambda \\left( \\frac{\\beta + \\alpha}{2\\alpha\\beta} \\right) = 1\n$$\n现在，我们可以分离出 $\\lambda$ 以求得其最优值 $\\lambda^*$：\n$$\n\\lambda^* = \\frac{2\\alpha\\beta}{\\alpha+\\beta}\n$$\n求得 $\\lambda^*$ 的值后，我们现在可以通过将 $\\lambda^*$ 代回到 $x$ 和 $y$ 的表达式中来找到最优分配 $x^*$ 和 $y^*$。\n\n对于 $x^*$：\n$$\nx^* = \\frac{\\lambda^*}{2\\alpha} = \\frac{1}{2\\alpha} \\left( \\frac{2\\alpha\\beta}{\\alpha+\\beta} \\right) = \\frac{\\beta}{\\alpha+\\beta}\n$$\n\n对于 $y^*$：\n$$\ny^* = \\frac{\\lambda^*}{2\\beta} = \\frac{1}{2\\beta} \\left( \\frac{2\\alpha\\beta}{\\alpha+\\beta} \\right) = \\frac{\\alpha}{\\alpha+\\beta}\n$$\n因为 $\\alpha$ 和 $\\beta$ 是正常数，所以 $x^* > 0$ 且 $y^* > 0$，满足问题中提到的非负性条件。因此，最优值的三元组为 $(x^*, y^*, \\lambda^*) = \\left(\\frac{\\beta}{\\alpha+\\beta}, \\frac{\\alpha}{\\alpha+\\beta}, \\frac{2\\alpha\\beta}{\\alpha+\\beta}\\right)$。", "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{\\beta}{\\alpha+\\beta}  \\frac{\\alpha}{\\alpha+\\beta}  \\frac{2\\alpha\\beta}{\\alpha+\\beta} \\end{pmatrix}}\n$$", "id": "2216747"}, {"introduction": "拉格朗日乘子法不仅是代数工具，它在解决几何问题时也异常强大。这个练习要求你找到双曲线上离原点最近的点，这是一个直观的几何优化问题。通过解决这个问题，你将能更深刻地理解拉格朗日乘子如何帮助我们在特定约束曲线上找到目标函数（在此为距离的平方）的极值点。[@problem_id:2216754]", "problem": "在某材料科学实验室，研究人员正通过将两种物质（物质X和物质Y）结合来开发一种新型复合材料。设 $x$ 和 $y$ 分别表示混合物中所用物质X和物质Y的正的、无量纲的量。由于合成过程的化学动力学，这些量必须满足严格的关系式 $xy = 18$。研究发现，当质量指标 $Q(x,y) = x^2 + y^2$ 最小时，最终复合材料的结构完整性达到最佳。您的任务是确定为达到这种最佳结构完整性，应该使用的物质X和物质Y的精确用量。\n\n请将您的答案以数值对 $(x, y)$ 的形式呈现。", "solution": "我们需要在约束条件 $xy = 18$（其中 $x0$ 且 $y0$）下，最小化函数 $Q(x,y) = x^{2} + y^{2}$。这是一个约束优化问题，我们使用拉格朗日乘数法来解决。\n\n定义 $f(x,y) = x^{2} + y^{2}$ 和约束函数 $g(x,y) = xy - 18 = 0$。拉格朗日乘数法设定\n$$\n\\nabla f(x,y) = \\lambda \\nabla g(x,y),\n$$\n由此可得方程组\n$$\n\\frac{\\partial f}{\\partial x} = 2x = \\lambda \\frac{\\partial g}{\\partial x} = \\lambda y, \\quad \\frac{\\partial f}{\\partial y} = 2y = \\lambda \\frac{\\partial g}{\\partial y} = \\lambda x,\n$$\n以及约束条件\n$$\nxy = 18.\n$$\n从 $2x = \\lambda y$ 我们得到 $\\lambda = \\frac{2x}{y}$，从 $2y = \\lambda x$ 我们得到 $\\lambda = \\frac{2y}{x}$。令这两个关于 $\\lambda$ 的表达式相等，得到\n$$\n\\frac{2x}{y} = \\frac{2y}{x} \\;\\;\\Longrightarrow\\;\\; x^{2} = y^{2}.\n$$\n因为 $x0$ 且 $y0$，所以 $x = y$。代入约束条件 $xy = 18$ 可得\n$$\nx^{2} = 18 \\;\\;\\Longrightarrow\\;\\; x = \\sqrt{18}, \\quad y = \\sqrt{18}.\n$$\n为了确认这是一个最小值，注意到对于乘积固定为 $xy=18$ 的正数 $x,y$，不等式 $(x-y)^{2} \\geq 0$ 意味着 $x^{2} + y^{2} \\geq 2xy = 36$，等号成立当且仅当 $x=y$。因此，在约束条件下，所求得的点达到了 $Q$ 的全局最小值。\n\n所以，精确的用量为 $x = \\sqrt{18} = 3\\sqrt{2}$ 和 $y = \\sqrt{18} = 3\\sqrt{2}$。", "answer": "$$\\boxed{\\begin{pmatrix} 3\\sqrt{2}  3\\sqrt{2} \\end{pmatrix}}$$", "id": "2216754"}, {"introduction": "许多现实世界中的优化问题包含的不是严格的等式，而是“小于或等于”类型的不等式约束。本练习将引导你进入更通用、更强大的卡罗需-库恩-塔克（KKT）条件的世界。你将学习如何处理不等式约束，并理解“互补松弛性”这一关键概念，它能帮助我们判断在最优点处哪些约束是“激活”的，从而决定了最终解的形态。[@problem_id:3192411]", "problem": "考虑具有两个决策变量 $x_1$ 和 $x_2$ 的凸二次规划问题：\n最小化 $f(x_1,x_2) = (x_1 - 3.5)^2 + (x_2 - 1.5)^2$，服从四个不等式约束\n$g_1(x_1,x_2) = x_1 + x_2 - 3 \\leq 0$, $g_2(x_1,x_2) = x_1 - 2 \\leq 0$, $g_3(x_1,x_2) = -x_1 \\leq 0$, 以及 $g_4(x_1,x_2) = -x_2 \\leq 0$。\n使用分别与 $g_1$、$g_2$、$g_3$ 和 $g_4$ 相关的非负乘子 $\\lambda_1$、$\\lambda_2$、$\\lambda_3$ 和 $\\lambda_4$ 来构建拉格朗日函数。根据凸优化的基本原理，推导必要的最优性条件，并求解最优原始变量 $(x_1^{\\star}, x_2^{\\star})$ 和最优乘子 $(\\lambda_1^{\\star}, \\lambda_2^{\\star}, \\lambda_3^{\\star}, \\lambda_4^{\\star})$。通过解释最优乘子的符号和大小来确定哪些约束是起作用的，并使用互补松弛性来验证你的判断。将你的最终答案表示为单行向量 $\\begin{pmatrix} x_1^{\\star}  x_2^{\\star}  \\lambda_1^{\\star}  \\lambda_2^{\\star}  \\lambda_3^{\\star}  \\lambda_4^{\\star} \\end{pmatrix}$。", "solution": "用户提供了一个凸二次规划问题，需要使用拉格朗日函数和相关的最优性条件来解决。\n\n### 第 1 步：提取已知条件\n- 最小化的目标函数：$f(x_1,x_2) = (x_1 - 3.5)^2 + (x_2 - 1.5)^2$。\n- 决策变量：$x_1$, $x_2$。\n- 不等式约束：\n  - $g_1(x_1,x_2) = x_1 + x_2 - 3 \\leq 0$\n  - $g_2(x_1,x_2) = x_1 - 2 \\leq 0$\n  - $g_3(x_1,x_2) = -x_1 \\leq 0$\n  - $g_4(x_1,x_2) = -x_2 \\leq 0$\n- 非负拉格朗日乘子：$\\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4$。\n\n### 第 2 步：使用提取的已知条件进行验证\n该问题是一个标准的凸优化问题。目标函数 $f(x_1, x_2)$ 是一个严格凸的二次函数（其Hessian矩阵是正定的）。约束 $g_i(x_1, x_2)$ 都是线性的，因此是凸的，定义了一个凸可行域（$\\mathbb{R}^2$ 中的一个多边形）。在一个非空、闭合的凸集上最小化一个严格凸函数，其解是唯一的。该问题具有科学依据，是适定的，并且陈述客观。这是优化中 Karush-Kuhn-Tucker (KKT) 条件的经典应用，它与拉格朗日函数直接相关。该问题是有效的。\n\n### 第 3 步：进行求解\n\n首先，我们构建拉格朗日函数 $L(x_1, x_2, \\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4)$。拉格朗日函数定义为目标函数加上拉格朗日乘子与约束函数乘积之和。\n$$L(x_1, x_2, \\boldsymbol{\\lambda}) = f(x_1, x_2) + \\sum_{i=1}^{4} \\lambda_i g_i(x_1, x_2)$$\n$$L(x_1, x_2, \\boldsymbol{\\lambda}) = (x_1 - 3.5)^2 + (x_2 - 1.5)^2 + \\lambda_1(x_1 + x_2 - 3) + \\lambda_2(x_1 - 2) + \\lambda_3(-x_1) + \\lambda_4(-x_2)$$\n其中 $\\boldsymbol{\\lambda} = (\\lambda_1, \\lambda_2, \\lambda_3, \\lambda_4)$。\n\n对于具有可微函数的凸问题，Karush-Kuhn-Tucker (KKT) 条件是最优性的充要条件。KKT 条件如下：\n1.  **平稳性 (Stationarity)**：拉格朗日函数对原始变量的梯度必须为零。\n    $$ \\frac{\\partial L}{\\partial x_1} = 2(x_1 - 3.5) + \\lambda_1 + \\lambda_2 - \\lambda_3 = 0 $$\n    $$ \\frac{\\partial L}{\\partial x_2} = 2(x_2 - 1.5) + \\lambda_1 - \\lambda_4 = 0 $$\n2.  **原始可行性 (Primal Feasibility)**：必须满足约束条件。\n    $$ x_1 + x_2 - 3 \\leq 0 $$\n    $$ x_1 - 2 \\leq 0 $$\n    $$ -x_1 \\leq 0 \\implies x_1 \\geq 0 $$\n    $$ -x_2 \\leq 0 \\implies x_2 \\geq 0 $$\n3.  **对偶可行性 (Dual Feasibility)**：拉格朗日乘子必须为非负。\n    $$ \\lambda_1 \\geq 0, \\quad \\lambda_2 \\geq 0, \\quad \\lambda_3 \\geq 0, \\quad \\lambda_4 \\geq 0 $$\n4.  **互补松弛性 (Complementary Slackness)**：每个拉格朗日乘子与其对应约束的乘积必须为零。\n    $$ \\lambda_1(x_1 + x_2 - 3) = 0 $$\n    $$ \\lambda_2(x_1 - 2) = 0 $$\n    $$ \\lambda_3(-x_1) = 0 $$\n    $$ \\lambda_4(-x_2) = 0 $$\n\n我们求解这个方程和不等式系统。一个系统的方法是根据哪些约束是活跃的（即等式成立）来分析各种情况。\n$f(x_1, x_2)$ 的无约束最小值在 $(x_1, x_2) = (3.5, 1.5)$。我们来检查这个点是否可行。\n- $g_1(3.5, 1.5) = 3.5 + 1.5 - 3 = 2  0$。第一个约束被违反。\n- $g_2(3.5, 1.5) = 3.5 - 2 = 1.5  0$。第二个约束被违反。\n- $g_3(3.5, 1.5) = -3.5 \\leq 0$。满足。\n- $g_4(3.5, 1.5) = -1.5 \\leq 0$。满足。\n\n由于无约束最小值不可行，最优解必须位于可行域的边界上。最可能的情况是，在最优点处，被无约束最小值违反的那些约束是活跃的。我们假设约束 $g_1$ 和 $g_2$ 是活跃的。\n\n情况：$g_1$ 和 $g_2$ 活跃 ($g_1=0$, $g_2=0$)。\n这意味着 $x_1 + x_2 - 3 = 0$ 且 $x_1 - 2 = 0$。从第二个方程我们得到 $x_1 = 2$。将此代入第一个方程得到 $2 + x_2 - 3 = 0$，解得 $x_2 = 1$。因此，最优原始变量的候选解是 $(x_1^{\\star}, x_2^{\\star}) = (2, 1)$。\n\n因为 $g_1$ 和 $g_2$ 是活跃的，所以对于任何 $\\lambda_1, \\lambda_2$，互补松弛性条件 $\\lambda_1 g_1 = 0$ 和 $\\lambda_2 g_2 = 0$ 都得到满足。\n对于 $(x_1, x_2) = (2,1)$，约束 $g_3$ 和 $g_4$ 是不活跃的：\n- $g_3(2, 1) = -2  0$。\n- $g_4(2, 1) = -1  0$。\n根据互补松弛性（$\\lambda_3 g_3 = 0, \\lambda_4 g_4 = 0$），我们必须有 $\\lambda_3 = 0$ 和 $\\lambda_4 = 0$。\n\n现在我们使用平稳性条件来求解 $\\lambda_1$ 和 $\\lambda_2$。\n当 $x_1=2, x_2=1, \\lambda_3=0, \\lambda_4=0$ 时，平稳性方程变为：\n$$ \\frac{\\partial L}{\\partial x_1} = 2(2 - 3.5) + \\lambda_1 + \\lambda_2 - 0 = 0 \\implies -3 + \\lambda_1 + \\lambda_2 = 0 $$\n$$ \\frac{\\partial L}{\\partial x_2} = 2(1 - 1.5) + \\lambda_1 - 0 = 0 \\implies -1 + \\lambda_1 = 0 $$\n从第二个方程，我们得到 $\\lambda_1 = 1$。\n将 $\\lambda_1 = 1$ 代入第一个方程：$-3 + 1 + \\lambda_2 = 0 \\implies -2 + \\lambda_2 = 0$，所以 $\\lambda_2 = 2$。\n\n我们的完整最优解候选为 $(x_1^{\\star}, x_2^{\\star}, \\lambda_1^{\\star}, \\lambda_2^{\\star}, \\lambda_3^{\\star}, \\lambda_4^{\\star}) = (2, 1, 1, 2, 0, 0)$。\n我们来验证该解是否满足所有 KKT 条件：\n1.  **平稳性**：\n    - $\\frac{\\partial L}{\\partial x_1}: 2(2 - 3.5) + 1 + 2 - 0 = -3 + 3 = 0$。（成立）\n    - $\\frac{\\partial L}{\\partial x_2}: 2(1 - 1.5) + 1 - 0 = -1 + 1 = 0$。（成立）\n2.  **原始可行性**：\n    - $g_1: 2 + 1 - 3 = 0 \\leq 0$。（成立）\n    - $g_2: 2 - 2 = 0 \\leq 0$。（成立）\n    - $g_3: -2 \\leq 0$。（成立）\n    - $g_4: -1 \\leq 0$。（成立）\n3.  **对偶可行性**：\n    - $\\lambda_1 = 1 \\geq 0$。（成立）\n    - $\\lambda_2 = 2 \\geq 0$。（成立）\n    - $\\lambda_3 = 0 \\geq 0$。（成立）\n    - $\\lambda_4 = 0 \\geq 0$。（成立）\n4.  **互补松弛性**：\n    - $\\lambda_1 g_1 = 1 \\times 0 = 0$。（成立）\n    - $\\lambda_2 g_2 = 2 \\times 0 = 0$。（成立）\n    - $\\lambda_3 g_3 = 0 \\times (-2) = 0$。（成立）\n    - $\\lambda_4 g_4 = 0 \\times (-1) = 0$。（成立）\n\n由于所有 KKT 条件都得到满足且问题是凸的，解 $(x_1^{\\star}, x_2^{\\star})=(2, 1)$ 及乘子 $(\\lambda_1^{\\star}, \\lambda_2^{\\star}, \\lambda_3^{\\star}, \\lambda_4^{\\star})=(1, 2, 0, 0)$ 是唯一的全局最优解。\n\n最后，我们通过解释最优乘子来确定起作用的约束。如果对应的乘子 $\\lambda_i^{\\star}$ 严格为正，则约束 $g_i \\leq 0$ 是起作用的（或称活跃的）。\n- $\\lambda_1^{\\star} = 1  0$：约束 $g_1(x_1, x_2) = x_1 + x_2 - 3 \\leq 0$ 是起作用的。\n- $\\lambda_2^{\\star} = 2  0$：约束 $g_2(x_1, x_2) = x_1 - 2 \\leq 0$ 是起作用的。\n- $\\lambda_3^{\\star} = 0$：约束 $g_3(x_1, x_2) = -x_1 \\leq 0$ 是不起作用的。\n- $\\lambda_4^{\\star} = 0$：约束 $g_4(x_1, x_2) = -x_2 \\leq 0$ 是不起作用的。\n\n使用互补松弛性进行验证：\n- 对于起作用的约束，我们检查是否 $g_i(x_1^{\\star}, x_2^{\\star})=0$：\n  - $g_1(2, 1) = 2 + 1 - 3 = 0$。已验证。\n  - $g_2(2, 1) = 2 - 2 = 0$。已验证。\n- 对于不起作用的约束，我们检查是否 $g_i(x_1^{\\star}, x_2^{\\star})  0$：\n  - $g_3(2, 1) = -2  0$。已验证。\n  - $g_4(2, 1) = -1  0$。已验证。\n\n分析是一致的。最终答案是最优原始变量和对偶变量的向量。", "answer": "$$ \\boxed{ \\begin{pmatrix} 2  1  1  2  0  0 \\end{pmatrix} } $$", "id": "3192411"}]}
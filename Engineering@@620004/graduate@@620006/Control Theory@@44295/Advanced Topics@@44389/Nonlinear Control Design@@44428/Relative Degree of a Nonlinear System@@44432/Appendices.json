{"hands_on_practices": [{"introduction": "To put theory into practice, we begin with a foundational system in control theory: the double integrator. This exercise walks you through the fundamental calculation of relative degree using the definition based on Lie derivatives. Mastering this process is the first essential step to understanding how a system's internal structure determines its input-output response and whether it has hidden internal dynamics. [@problem_id:2739636]", "problem": "Consider the single-input single-output $2$-dimensional control-affine nonlinear system with state $x \\in \\mathbb{R}^{2}$, input $u \\in \\mathbb{R}$, and output $y \\in \\mathbb{R}$ given by\n$$\n\\dot{x}_{1} = x_{2}, \\qquad \\dot{x}_{2} = u, \\qquad y = x_{1}.\n$$\nUsing only fundamental definitions from nonlinear systems theory, determine the relative degree at an arbitrary state $x \\in \\mathbb{R}^{2}$ and explain what this value implies about how many times the output must be differentiated along system trajectories before the input appears explicitly, as well as the presence or absence of internal or zero dynamics. Your reasoning must proceed from first principles (state-space dynamics, output differentiation along trajectories, and the concept of Lie derivatives) without invoking any pre-packaged results specific to this canonical example.\n\nProvide the relative degree as a single integer. No rounding is necessary, and no units are required in the final answer.", "solution": "The problem presented is a request to determine the relative degree of a given single-input single-output (SISO) nonlinear system and to interpret the physical meaning of this value. First, we will validate the problem statement.\n\nThe givens are:\nA control-affine system with state $x = (x_1, x_2)^T \\in \\mathbb{R}^{2}$, input $u \\in \\mathbb{R}$, and output $y \\in \\mathbb{R}$.\nThe state dynamics are:\n$$\n\\dot{x}_{1} = x_{2}\n$$\n$$\n\\dot{x}_{2} = u\n$$\nThe output equation is:\n$$\ny = x_{1}\n$$\nThe problem requires determining the relative degree from first principles, using fundamental definitions including Lie derivatives, and explaining the implications for input appearance and zero dynamics.\n\nThe problem statement is scientifically grounded, well-posed, and objective. It describes a canonical double integrator system, which is a fundamental model in control theory. All definitions and equations are standard and consistent. The requirement to solve from first principles is a valid pedagogical constraint. Therefore, the problem is valid, and we may proceed with the solution.\n\nThe system can be written in the standard control-affine form $\\dot{x} = f(x) + g(x)u$ with output $y = h(x)$.\nBy inspection of the given equations, we identify the components:\nThe state vector is $x = \\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix}$.\nThe drift vector field is $f(x) = \\begin{pmatrix} x_2 \\\\ 0 \\end{pmatrix}$.\nThe control vector field is $g(x) = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}$.\nThe output function is $h(x) = x_1$.\n\nThe relative degree, denoted by $r$, is defined as the smallest positive integer for which the input $u$ appears when differentiating the output $y$ successively with respect to time. Formally, it is the smallest integer $r$ such that $L_g L_f^{r-1} h(x) \\neq 0$ for all $x$ in a domain of interest, where $L_f h(x)$ is the Lie derivative of the scalar field $h$ along the vector field $f$.\n\nThe Lie derivative of a scalar function $\\phi(x)$ along a vector field $v(x)$ is given by $L_v \\phi(x) = \\frac{\\partial \\phi}{\\partial x} v(x)$.\n\nWe now differentiate the output $y$ with respect to time along the system's trajectories:\n$$\n\\dot{y} = \\frac{d}{dt} h(x(t)) = \\frac{\\partial h}{\\partial x} \\dot{x} = \\frac{\\partial h}{\\partial x} (f(x) + g(x)u) = L_f h(x) + L_g h(x) u\n$$\nLet us compute the terms $L_f h(x)$ and $L_g h(x)$.\nThe Jacobian of $h(x)$ is $\\frac{\\partial h}{\\partial x} = \\begin{pmatrix} 1 & 0 \\end{pmatrix}$.\n\nWe first check the term multiplying the input $u$, which is $L_g h(x)$:\n$$\nL_g h(x) = \\frac{\\partial h}{\\partial x} g(x) = \\begin{pmatrix} 1 & 0 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} = 1 \\cdot 0 + 0 \\cdot 1 = 0\n$$\nSince $L_g h(x) = 0$, the input $u$ does not appear in the first derivative of the output. The relative degree must be greater than $1$. The first derivative is:\n$$\n\\dot{y} = L_f h(x) = \\frac{\\partial h}{\\partial x} f(x) = \\begin{pmatrix} 1 & 0 \\end{pmatrix} \\begin{pmatrix} x_2 \\\\ 0 \\end{pmatrix} = 1 \\cdot x_2 + 0 \\cdot 0 = x_2\n$$\n\nWe must now differentiate the output a second time:\n$$\n\\ddot{y} = \\frac{d}{dt} (\\dot{y}) = \\frac{d}{dt} (L_f h(x))\n$$\nSince $\\dot{y}$ is a function of state, we apply the chain rule again:\n$$\n\\ddot{y} = \\frac{\\partial (L_f h(x))}{\\partial x} \\dot{x} = \\frac{\\partial (L_f h(x))}{\\partial x} (f(x) + g(x)u) = L_f(L_f h(x)) + L_g(L_f h(x)) u\n$$\nThis expression is commonly written as $\\ddot{y} = L_f^2 h(x) + L_g L_f h(x) u$.\n\nTo determine if the input $u$ appears, we must compute the term $L_g L_f h(x)$. We have already found that $L_f h(x) = x_2$. Let us define a new scalar function $\\phi(x) = L_f h(x) = x_2$. The Jacobian of this new function is $\\frac{\\partial \\phi}{\\partial x} = \\begin{pmatrix} 0 & 1 \\end{pmatrix}$.\nNow we compute its Lie derivative along $g(x)$:\n$$\nL_g L_f h(x) = L_g \\phi(x) = \\frac{\\partial \\phi}{\\partial x} g(x) = \\begin{pmatrix} 0 & 1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} = 0 \\cdot 0 + 1 \\cdot 1 = 1\n$$\nSince $L_g L_f h(x) = 1$, which is non-zero for any state $x \\in \\mathbb{R}^2$, the input $u$ appears explicitly in the second time derivative of the output. The smallest integer for which this occurs is $r=2$. Therefore, the relative degree of the system is $2$ everywhere in the state space.\n\nThe expression for the second derivative of the output is:\n$$\n\\ddot{y} = L_f^2 h(x) + L_g L_f h(x) u = L_f(x_2) + 1 \\cdot u\n$$\nTo complete this, $L_f(x_2) = \\frac{\\partial(x_2)}{\\partial x} f(x) = \\begin{pmatrix} 0 & 1 \\end{pmatrix} \\begin{pmatrix} x_2 \\\\ 0 \\end{pmatrix} = 0$.\nThus, we find $\\ddot{y} = u$, which is consistent with the initial state equations, as $\\ddot{y} = \\frac{d}{dt}(\\dot{y}) = \\frac{d}{dt}(x_2) = \\dot{x}_2 = u$.\n\nImplications of the relative degree $r=2$:\n1. The value $r=2$ signifies that the output $y$ must be differentiated exactly two times along the system's trajectories before the control input $u$ exerts an explicit, instantaneous influence. The effect of the input is \"delayed\" by two integrators from the standpoint of the output.\n2. The relative degree $r=2$ is equal to the dimension of the state space, $n=2$. When $r = n$, the system is said to possess no zero dynamics, or its zero dynamics are trivial. Zero dynamics represent the internal behavior of the system when the output is constrained to be zero for all time, i.e., $y(t) \\equiv 0$. For this system, $y(t) = x_1(t) \\equiv 0$. Differentiating, we get $\\dot{y}(t) = \\dot{x}_1(t) = x_2(t) \\equiv 0$. Thus, constraining the output to zero forces the entire state vector $x$ to be the zero vector. The dynamics that remain under this constraint are simply $\\dot{x}=0$, which are trivial. The absence of non-trivial zero dynamics implies that the system is fully linearizable via state feedback and a coordinate transformation, and there is no hidden or unobservable internal state evolution when controlling the output.\n\nThe relative degree is $2$.", "answer": "$$\\boxed{2}$$", "id": "2739636"}, {"introduction": "Building on the basic computation, we now investigate a scenario where the relationship between input and output is more nuanced. This problem reveals that relative degree is not always a globally constant number but can change depending on the system's state $x$. By analyzing how the relative degree can vary across the state space, you will develop a crucial appreciation for the local nature of many nonlinear control concepts. [@problem_id:2739602]", "problem": "Consider the single-input single-output (SISO) control-affine nonlinear system with state $x=\\begin{bmatrix}x_{1} & x_{2}\\end{bmatrix}^{\\top}\\in\\mathbb{R}^{2}$, input $u\\in\\mathbb{R}$, and output $y\\in\\mathbb{R}$ given by\n$$\n\\dot{x}\n=\n\\begin{bmatrix}\nx_{2}\\\\\n-x_{1}\n\\end{bmatrix}\n+\n\\begin{bmatrix}\n0\\\\\n1\n\\end{bmatrix}u,\n\\qquad\ny = x_{1}^{2}.\n$$\nUsing only the formal definition of relative degree for control-affine nonlinear systems (in terms of successive output time derivatives and the first occurrence of an explicit dependence on the input $u$), determine the relative degree $r$ at a generic point $x_{0}$ with $x_{1,0}\\neq 0$, and also at a generic point satisfying $x_{1,0}=0$ but $x_{2,0}\\neq 0$. Explain, from first principles, why these values differ, and discuss what happens at the equilibrium $x_{0}=(0,0)$ regarding the existence of a well-defined relative degree. Your derivation must start from the stated dynamics and output, and proceed by computing the needed derivatives and evaluating their dependence on $u$ at the specified points, justifying each step using the core definition of relative degree.\n\nFor the final numeric response, report the pair $\\big(r\\text{ at }x_{1,0}\\neq 0,\\; r\\text{ at }x_{1,0}=0,\\;x_{2,0}\\neq 0\\big)$ as a $1\\times 2$ row, with no rounding and no units.", "solution": "The problem requires an analysis of the relative degree of a given single-input single-output (SISO) control-affine nonlinear system. The validation of the problem statement finds it to be scientifically grounded, well-posed, and objective. It is a standard problem in nonlinear control theory and contains all necessary information for a unique solution. Therefore, we proceed with the derivation.\n\nThe system is defined by the state equations and the output equation:\n$$\n\\dot{x} = f(x) + g(x)u\n$$\n$$\ny = h(x)\n$$\nwhere the state is $x = \\begin{bmatrix} x_1 & x_2 \\end{bmatrix}^{\\top}$, the input is $u \\in \\mathbb{R}$, and the output is $y \\in \\mathbb{R}$. From the problem statement, we identify the components:\n$$\nf(x) = \\begin{bmatrix} x_2 \\\\ -x_1 \\end{bmatrix}, \\quad g(x) = \\begin{bmatrix} 0 \\\\ 1 \\end{bmatrix}, \\quad h(x) = x_1^2\n$$\n\nThe relative degree $r$ at a point $x_0$ is defined as the smallest integer $r \\ge 1$ such that the time derivative $y^{(r)}$ is the first to explicitly contain the input $u$. This is equivalent to finding the smallest integer $r$ for which the Lie derivative $L_g L_f^{r-1} h(x)$ is non-zero at $x_0$, under the condition that $L_g L_f^{k} h(x) = 0$ for all $k < r-1$ in a neighborhood of $x_0$.\n\nWe proceed by computing successive time derivatives of the output $y$.\n\nStep 1: Compute the first time derivative, $\\dot{y}$.\nUsing the chain rule and Lie derivative notation, the first derivative is:\n$$\n\\dot{y} = \\frac{dh}{dx}\\dot{x} = \\nabla h(x) \\cdot (f(x) + g(x)u) = L_f h(x) + L_g h(x) u\n$$\nFirst, we compute the gradient of $h(x)$:\n$$\n\\nabla h(x) = \\begin{bmatrix} \\frac{\\partial (x_1^2)}{\\partial x_1} & \\frac{\\partial (x_1^2)}{\\partial x_2} \\end{bmatrix} = \\begin{bmatrix} 2x_1 & 0 \\end{bmatrix}\n$$\nNow, we compute the Lie derivative of $h$ with respect to $g$:\n$$\nL_g h(x) = \\nabla h(x) \\cdot g(x) = \\begin{bmatrix} 2x_1 & 0 \\end{bmatrix} \\begin{bmatrix} 0 \\\\ 1 \\end{bmatrix} = 0\n$$\nSince $L_g h(x) = 0$ for all $x$, the input $u$ does not appear in the first derivative of the output. This means the relative degree $r$ must be greater than $1$. The expression for $\\dot{y}$ simplifies to:\n$$\n\\dot{y} = L_f h(x) = \\nabla h(x) \\cdot f(x) = \\begin{bmatrix} 2x_1 & 0 \\end{bmatrix} \\begin{bmatrix} x_2 \\\\ -x_1 \\end{bmatrix} = 2x_1 x_2\n$$\n\nStep 2: Compute the second time derivative, $\\ddot{y}$.\nWe differentiate $\\dot{y} = L_f h(x)$ with respect to time:\n$$\n\\ddot{y} = \\frac{d}{dt} (L_f h(x)) = \\nabla(L_f h(x)) \\cdot \\dot{x} = \\nabla(L_f h(x)) \\cdot (f(x) + g(x)u) = L_f^2 h(x) + L_g L_f h(x) u\n$$\nWe need to compute the coefficient of $u$, which is $L_g L_f h(x)$. First, we find the gradient of $L_f h(x) = 2x_1 x_2$:\n$$\n\\nabla(L_f h(x)) = \\nabla(2x_1 x_2) = \\begin{bmatrix} \\frac{\\partial (2x_1 x_2)}{\\partial x_1} & \\frac{\\partial (2x_1 x_2)}{\\partial x_2} \\end{bmatrix} = \\begin{bmatrix} 2x_2 & 2x_1 \\end{bmatrix}\n$$\nNow, we compute the Lie derivative:\n$$\nL_g L_f h(x) = \\nabla(L_f h(x)) \\cdot g(x) = \\begin{bmatrix} 2x_2 & 2x_1 \\end{bmatrix} \\begin{bmatrix} 0 \\\\ 1 \\end{bmatrix} = 2x_1\n$$\nThe second derivative of the output is $\\ddot{y} = L_f^2 h(x) + 2x_1 u$. The appearance of the input $u$ in this expression depends on the value of the coefficient $2x_1$. This is the point where the analysis must branch.\n\nCase 1: Determination of relative degree at a generic point $x_0$ with $x_{1,0} \\neq 0$.\nAt such a point $x_0$, the coefficient of $u$ in $\\ddot{y}$ is $L_g L_f h(x_0) = 2x_{1,0}$. Since $x_{1,0} \\neq 0$, this coefficient is non-zero.\nWe have found that:\n1.  For $k=1$, $L_g L_f^{1-1} h(x) = L_g h(x) = 0$.\n2.  For $r=2$, $L_g L_f^{2-1} h(x_0) = L_g L_f h(x_0) = 2x_{1,0} \\neq 0$.\nAccording to the definition, the relative degree is the first integer $r$ for which the coefficient is non-zero. Therefore, at any point $x_0$ where $x_{1,0} \\neq 0$, the relative degree is $r=2$.\n\nCase 2: Determination of relative degree at a generic point $x_0$ with $x_{1,0}=0$ and $x_{2,0} \\neq 0$.\nAt such a point $x_0$, the coefficient of $u$ in $\\ddot{y}$ is $L_g L_f h(x_0) = 2x_{1,0} = 2(0) = 0$.\nSince this coefficient is zero, the input $u$ does not appear in the expression for $\\ddot{y}$ when evaluated at this specific set of points. This implies that the relative degree is greater than $2$. We must compute the third derivative.\n\nStep 3: Compute the third time derivative, $y^{(3)}$, for points where $L_g L_f h(x) = 0$.\nWhen $L_g L_f h(x) = 0$ (i.e., at $x_1=0$), the second derivative simplifies to $\\ddot{y} = L_f^2 h(x)$. Differentiating this with respect to time gives:\n$$\ny^{(3)} = \\frac{d}{dt} (L_f^2 h(x)) = \\nabla(L_f^2 h(x)) \\cdot \\dot{x} = L_f^3 h(x) + L_g L_f^2 h(x) u\n$$\nWe need to compute the coefficient of $u$, which is $L_g L_f^2 h(x)$. We first require $L_f^2 h(x)$:\n$$\nL_f^2 h(x) = \\nabla(L_f h(x)) \\cdot f(x) = \\begin{bmatrix} 2x_2 & 2x_1 \\end{bmatrix} \\begin{bmatrix} x_2 \\\\ -x_1 \\end{bmatrix} = 2x_2^2 - 2x_1^2\n$$\nNext, we find the gradient of $L_f^2 h(x)$:\n$$\n\\nabla(L_f^2 h(x)) = \\nabla(2x_2^2 - 2x_1^2) = \\begin{bmatrix} -4x_1 & 4x_2 \\end{bmatrix}\n$$\nNow, we compute the critical Lie derivative:\n$$\nL_g L_f^2 h(x) = \\nabla(L_f^2 h(x)) \\cdot g(x) = \\begin{bmatrix} -4x_1 & 4x_2 \\end{bmatrix} \\begin{bmatrix} 0 \\\\ 1 \\end{bmatrix} = 4x_2\n$$\nWe evaluate this coefficient at the specified point $x_0$ where $x_{1,0} = 0$ and $x_{2,0} \\neq 0$:\n$$\nL_g L_f^2 h(x_0) = 4x_{2,0}\n$$\nGiven the condition $x_{2,0} \\neq 0$, this coefficient is non-zero.\nWe have found for points satisfying $x_{1,0}=0$ and $x_{2,0} \\neq 0$:\n1.  For $k=1$, $L_g h(x_0) = 0$.\n2.  For $k=2$, $L_g L_f h(x_0) = 2x_{1,0} = 0$.\n3.  For $r=3$, $L_g L_f^{3-1} h(x_0) = L_g L_f^2 h(x_0) = 4x_{2,0} \\neq 0$.\nTherefore, at any point $x_0$ where $x_{1,0}=0$ and $x_{2,0} \\neq 0$, the relative degree is $r=3$.\n\nExplanation of the Difference and Analysis at $x_0=(0,0)$:\nThe relative degree of a nonlinear system is not necessarily a global property; it can be state-dependent. The reason for the change in relative degree from $r=2$ to $r=3$ resides in the nonlinear output function $y=x_1^2$. The expression $L_g L_f h(x) = 2x_1$ can be interpreted as the \"gain\" through which the input $u$ affects the second derivative of the output. When $x_1 \\neq 0$, this pathway is open, and the effect of control is felt at the second derivative level ($r=2$). When $x_1=0$, this pathway is blocked. Such a point is a singularity for the input-output relationship. At this singularity, we must investigate higher-order derivatives to find the first connection between input and output. The next pathway is governed by $L_g L_f^2 h(x) = 4x_2$. If $x_2 \\neq 0$ (while $x_1=0$), this new pathway is open, and the effect of control is first felt at the third derivative level ($r=3$).\n\nAt the equilibrium point of the unforced system, $x_0=(0,0)$, we have both $x_{1,0}=0$ and $x_{2,0}=0$. Let us evaluate the coefficients at this point:\n$$\nL_g L_f h(0,0) = 2x_{1,0} = 0\n$$\n$$\nL_g L_f^2 h(0,0) = 4x_{2,0} = 0\n$$\nBoth coefficients are zero. To check if a finite relative degree exists, one must continue differentiating. A systematic calculation shows that $L_g L_f^{k-1} h(x)$ will always be a linear combination of $x_1$ and $x_2$. For instance, $L_g L_f^3 h(x) = -8x_1$ and $L_g L_f^4 h(x) = -16x_2$. Consequently, at the point $x_0=(0,0)$, we have $L_g L_f^{k-1} h(0,0) = 0$ for all integers $k \\ge 1$. This means no finite integer $r$ satisfies the definition of relative degree. Therefore, at the equilibrium point $x_0=(0,0)$, the relative degree is undefined or, more commonly, said to be infinite.\n\nThe final results for the specified regions are $r=2$ for $x_{1,0} \\neq 0$ and $r=3$ for $x_{1,0}=0, x_{2,0} \\neq 0$.", "answer": "$$\\boxed{\\begin{pmatrix}2 & 3\\end{pmatrix}}$$", "id": "2739602"}, {"introduction": "Our final practice transitions from pure analysis to creative design, a core activity for any control engineer. Instead of simply calculating the relative degree for a given output, you are challenged to construct a new output function $\\tilde{h}(x)$ to achieve a specific, desired relative degree. This powerful exercise demonstrates how the choice of sensors or measurements can fundamentally alter a system's control properties, highlighting the practical utility of the relative degree concept in system design. [@problem_id:2739613]", "problem": "Consider the single-input single-output control-affine nonlinear system\n$$\n\\dot{x} = f(x) + g(x)\\,u,\\quad x=\\begin{pmatrix}x_{1}\\\\x_{2}\\end{pmatrix}\\in\\mathbb{R}^{2},\\quad u\\in\\mathbb{R},\n$$\nwith\n$$\nf(x)=\\begin{pmatrix}x_{2}+x_{1}x_{2}\\\\ \\sin(x_{1})\\end{pmatrix},\\qquad g(x)=\\begin{pmatrix}0\\\\ 1+x_{1}^{2}\\end{pmatrix},\n$$\nand the measured output\n$$\ny = h(x) = x_{2}.\n$$\nLet the point of interest be $x^{\\star}=\\begin{pmatrix}0\\\\0\\end{pmatrix}$. Use the definition of Lie derivatives $L_{f}h(x) = \\nabla h(x)\\cdot f(x)$ and $L_{g}h(x) = \\nabla h(x)\\cdot g(x)$, and the definition of relative degree $r$ at a point $x^{\\star}$ for a single-input single-output system: the smallest positive integer $r$ such that $L_{g}L_{f}^{r-1}h(x^{\\star})\\neq 0$, while $L_{g}L_{f}^{k}h(x^{\\star})=0$ for all integers $k$ with $0\\leq k\\leq r-2$.\n\n1) Using only these definitions, determine the relative degree of $h(x)=x_{2}$ at $x^{\\star}$.\n\n2) Construct a smooth scalar output function $\\tilde{h}:\\mathbb{R}^{2}\\to\\mathbb{R}$ that increases the relative degree at $x^{\\star}$ from $r=1$ to $r=2$. Rigorously verify all required Lie derivative conditions at $x^{\\star}$ that certify the new relative degree, namely $L_{g}\\tilde{h}(x^{\\star})=0$ and $L_{g}L_{f}\\tilde{h}(x^{\\star})\\neq 0$. State any regularity conditions you use in your argument and check them at $x^{\\star}$.\n\nProvide your final answer as a single explicit closed-form analytic expression for $\\tilde{h}(x)$.", "solution": "The problem as stated is valid. It is a well-posed problem within the established framework of nonlinear control theory. The system dynamics, vector fields, and output function are explicitly defined with smooth, analytic functions. The definitions for Lie derivatives and relative degree are standard. The objective is clear and requires direct application and extension of these definitions. No scientific, logical, or structural flaws are present. We proceed with the solution.\n\nThe problem is divided into two parts. First, we determine the relative degree of the system with the output $h(x) = x_2$ at the point $x^{\\star} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$. Second, we construct a new output function $\\tilde{h}(x)$ that yields a relative degree of $r=2$ at the same point.\n\nPart 1: Determination of the relative degree for $h(x) = x_2$.\n\nThe relative degree $r$ is defined as the smallest positive integer such that $L_{g}L_{f}^{r-1}h(x^{\\star})\\neq 0$. We test for $r=1, 2, ...$ sequentially.\n\nFor $r=1$, we must check if $L_{g}L_{f}^{1-1}h(x^{\\star}) = L_{g}h(x^{\\star}) \\neq 0$.\nThe output function is $h(x) = x_2$.\nThe gradient of $h(x)$ is $\\nabla h(x) = \\begin{pmatrix} \\frac{\\partial h}{\\partial x_1} & \\frac{\\partial h}{\\partial x_2} \\end{pmatrix} = \\begin{pmatrix} 0 & 1 \\end{pmatrix}$.\nThe Lie derivative of $h(x)$ with respect to the vector field $g(x)$ is:\n$$\nL_{g}h(x) = \\nabla h(x) \\cdot g(x) = \\begin{pmatrix} 0 & 1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1+x_1^2 \\end{pmatrix} = 1+x_1^2.\n$$\nWe now evaluate this expression at the point of interest $x^{\\star} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$:\n$$\nL_{g}h(x^{\\star}) = 1 + (0)^2 = 1.\n$$\nSince $L_{g}h(x^{\\star}) = 1 \\neq 0$, the condition for a relative degree of $r=1$ is met. It is the smallest positive integer, as we started our check with $r=1$. Therefore, the relative degree of the system with output $h(x)=x_2$ at $x^{\\star}$ is $r=1$.\n\nPart 2: Construction of a new output function $\\tilde{h}(x)$ with relative degree $r=2$.\n\nWe are tasked with constructing a smooth scalar output function $\\tilde{h}(x)$ such that the relative degree at $x^{\\star}$ is $r=2$. According to the definition, this requires satisfying two conditions simultaneously at $x^{\\star}$:\n1. $L_{g}L_{f}^{k}\\tilde{h}(x^{\\star}) = 0$ for $0 \\leq k \\leq r-2$. For $r=2$, this applies to $k=0$, so we must have $L_{g}\\tilde{h}(x^{\\star}) = 0$.\n2. $L_{g}L_{f}^{r-1}\\tilde{h}(x^{\\star}) \\neq 0$. For $r=2$, this means $L_{g}L_{f}\\tilde{h}(x^{\\star}) \\neq 0$.\n\nLet $\\tilde{h}(x)$ be an arbitrary smooth function. Its Lie derivative with respect to $g(x)$ is:\n$$\nL_{g}\\tilde{h}(x) = \\nabla \\tilde{h}(x) \\cdot g(x) = \\begin{pmatrix} \\frac{\\partial \\tilde{h}}{\\partial x_1} & \\frac{\\partial \\tilde{h}}{\\partial x_2} \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1+x_1^2 \\end{pmatrix} = \\frac{\\partial \\tilde{h}}{\\partial x_2}(x) (1+x_1^2).\n$$\nEvaluating at $x^{\\star} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$, the first condition $L_{g}\\tilde{h}(x^{\\star})=0$ becomes:\n$$\nL_{g}\\tilde{h}(x^{\\star}) = \\frac{\\partial \\tilde{h}}{\\partial x_2}(0,0) (1+0^2) = \\frac{\\partial \\tilde{h}}{\\partial x_2}(0,0) = 0.\n$$\nThis condition implies that the new output function $\\tilde{h}(x)$ must have a partial derivative with respect to $x_2$ that is zero at the origin. The simplest way to satisfy this is to choose an $\\tilde{h}(x)$ that is a function of $x_1$ only. Let us propose a function of the form $\\tilde{h}(x) = \\phi(x_1)$ for some smooth function $\\phi$. With this choice, $\\frac{\\partial \\tilde{h}}{\\partial x_2} = 0$ for all $x$, so $L_{g}\\tilde{h}(x) = 0$ everywhere, which trivially satisfies the first condition.\n\nNow we must check the second condition, $L_{g}L_{f}\\tilde{h}(x^{\\star}) \\neq 0$.\nFirst, we compute the Lie derivative of our proposed $\\tilde{h}(x)=\\phi(x_1)$ with respect to $f(x)$:\n$$\nL_{f}\\tilde{h}(x) = \\nabla \\tilde{h}(x) \\cdot f(x) = \\begin{pmatrix} \\phi'(x_1) & 0 \\end{pmatrix} \\begin{pmatrix} x_2 + x_1 x_2 \\\\ \\sin(x_1) \\end{pmatrix} = \\phi'(x_1) (x_2 + x_1 x_2) = \\phi'(x_1) x_2 (1+x_1).\n$$\nLet this new scalar function be denoted by $\\psi(x) = L_{f}\\tilde{h}(x)$. To find $L_{g}L_{f}\\tilde{h}(x)$, we must compute $L_{g}\\psi(x)$.\nFirst, the gradient of $\\psi(x)$:\n$$\n\\nabla \\psi(x) = \\begin{pmatrix} \\frac{\\partial \\psi}{\\partial x_1} & \\frac{\\partial \\psi}{\\partial x_2} \\end{pmatrix} = \\begin{pmatrix} \\frac{\\partial}{\\partial x_1} (\\phi'(x_1) x_2 (1+x_1)) & \\frac{\\partial}{\\partial x_2} (\\phi'(x_1) x_2 (1+x_1)) \\end{pmatrix}.\n$$\n$$\n\\nabla \\psi(x) = \\begin{pmatrix} x_2[\\phi''(x_1)(1+x_1) + \\phi'(x_1)] & \\phi'(x_1)(1+x_1) \\end{pmatrix}.\n$$\nNow we compute $L_{g}\\psi(x)$:\n$$\nL_{g}L_{f}\\tilde{h}(x) = L_{g}\\psi(x) = \\nabla \\psi(x) \\cdot g(x) = \\begin{pmatrix} x_2[\\phi''(x_1)(1+x_1) + \\phi'(x_1)] & \\phi'(x_1)(1+x_1) \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1+x_1^2 \\end{pmatrix}\n$$\n$$\nL_{g}L_{f}\\tilde{h}(x) = \\phi'(x_1)(1+x_1)(1+x_1^2).\n$$\nWe evaluate this at $x^{\\star} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$:\n$$\nL_{g}L_{f}\\tilde{h}(x^{\\star}) = \\phi'(0)(1+0)(1+0^2) = \\phi'(0).\n$$\nThe second condition, $L_{g}L_{f}\\tilde{h}(x^{\\star}) \\neq 0$, thus requires $\\phi'(0) \\neq 0$.\n\nWe need to choose a simple, smooth function $\\phi(x_1)$ that satisfies $\\phi'(0) \\neq 0$. The most elementary choice is $\\phi(x_1) = x_1$. Let's select this for our new output function:\n$$\n\\tilde{h}(x) = x_1.\n$$\nThis function is analytic, hence smooth, satisfying the stated regularity conditions. The vector fields $f(x)$ and $g(x)$ are also analytic. All Lie derivatives are therefore well-defined and smooth.\n\nWe now rigorously verify the two conditions for $\\tilde{h}(x) = x_1$:\n1. $L_{g}\\tilde{h}(x^{\\star}) = 0$:\n$\\nabla \\tilde{h}(x) = \\begin{pmatrix} 1 & 0 \\end{pmatrix}$.\n$L_{g}\\tilde{h}(x) = \\begin{pmatrix} 1 & 0 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1+x_1^2 \\end{pmatrix} = 0$.\nThis is zero for all $x \\in \\mathbb{R}^2$, so it is certainly zero at $x^{\\star}$. The first condition is satisfied.\n\n2. $L_{g}L_{f}\\tilde{h}(x^{\\star}) \\neq 0$:\n$L_{f}\\tilde{h}(x) = \\begin{pmatrix} 1 & 0 \\end{pmatrix} \\begin{pmatrix} x_2 + x_1 x_2 \\\\ \\sin(x_1) \\end{pmatrix} = x_2 + x_1 x_2$.\nLet $\\psi(x) = x_2 + x_1 x_2$. Then $\\nabla \\psi(x) = \\begin{pmatrix} x_2 & 1+x_1 \\end{pmatrix}$.\n$L_{g}L_{f}\\tilde{h}(x) = L_{g}\\psi(x) = \\nabla \\psi(x) \\cdot g(x) = \\begin{pmatrix} x_2 & 1+x_1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1+x_1^2 \\end{pmatrix} = (1+x_1)(1+x_1^2)$.\nAt $x^{\\star} = \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix}$:\n$L_{g}L_{f}\\tilde{h}(x^{\\star}) = (1+0)(1+0^2) = 1$.\nSince $1 \\neq 0$, the second condition is satisfied.\n\nBoth conditions for a relative degree of $r=2$ are satisfied for the choice $\\tilde{h}(x)=x_1$. Thus, this is a valid output function that increases the relative degree at $x^\\star$ to $r=2$. The problem asks for any such function, and $x_1$ is the simplest non-trivial example.", "answer": "$$\n\\boxed{x_1}\n$$", "id": "2739613"}]}
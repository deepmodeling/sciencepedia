{"hands_on_practices": [{"introduction": "The simple BJT current mirror is a fundamental building block in analog circuit design, intended to replicate a reference current at its output. However, real-world transistors have a finite current gain, $\\beta$, which introduces a systematic error. This first practice invites you to quantify the current transfer ratio, showing that the output current is always slightly less than the reference current due to the base currents required by the transistors [@problem_id:1283651].", "problem": "In the design of an analog integrated circuit, a simple current mirror is used to create a stable bias current. The mirror consists of two identical Bipolar Junction Transistors (BJTs), labeled $Q_{REF}$ and $Q_{OUT}$. The transistors are configured as follows:\n1. The emitters of both transistors are connected to the ground reference.\n2. The transistor $Q_{REF}$ is *diode-connected*, meaning its collector and base terminals are shorted together.\n3. The base of $Q_{OUT}$ is connected to the base of $Q_{REF}$.\n4. A reference current source supplies a current $I_{REF}$ into the common node of the collector and base of $Q_{REF}$.\n5. The output current, $I_{OUT}$, is the current flowing out of the collector of $Q_{OUT}$.\n\nAssume that both transistors are perfectly matched, operate in the forward-active region, and have an identical, finite common-emitter current gain of $\\beta = 50$. The Early effect can be neglected.\n\nCalculate the value of the current transfer ratio, $I_{OUT}/I_{REF}$. Express your answer as a numerical value rounded to three significant figures.", "solution": "Given two matched BJTs in a simple mirror with emitters at ground, $Q_{REF}$ diode-connected (collector-base short), and a reference current source feeding the common collector-base node of $Q_{REF}$, both transistors share the same base-emitter voltage. Neglecting the Early effect and assuming forward-active operation, matched devices with equal $V_{\\text{BE}}$ have equal collector currents:\n$$\nI_{C1} = I_{C2} \\equiv I\n$$.\nEach transistor has finite common-emitter gain $\\beta$, so the base current of each is\n$$\nI_{B1} = \\frac{I_{C1}}{\\beta} = \\frac{I}{\\beta}, \\quad I_{B2} = \\frac{I_{C2}}{\\beta} = \\frac{I}{\\beta}\n$$.\nApply KCL at the reference node (the collector-base node of $Q_{REF}$). The reference source current $I_{REF}$ must supply:\n- the collector current of $Q_{REF}$, $I_{C1} = I$,\n- the base current of $Q_{REF}$, $I_{B1} = I/\\beta$,\n- the base current of $Q_{OUT}$, $I_{B2} = I/\\beta$.\nThus,\n$$\nI_{REF} = I + \\frac{I}{\\beta} + \\frac{I}{\\beta} = I\\left(1 + \\frac{2}{\\beta}\\right)\n$$.\nSolving for the output collector current $I_{OUT} = I$ in terms of $I_{REF}$ gives the current transfer ratio\n$$\n\\frac{I_{OUT}}{I_{REF}} = \\frac{I}{I_{REF}} = \\frac{1}{1 + \\frac{2}{\\beta}} = \\frac{\\beta}{\\beta + 2}\n$$.\nSubstituting $\\beta = 50$,\n$$\n\\frac{I_{OUT}}{I_{REF}} = \\frac{50}{52} = \\frac{25}{26} \\approx 0.961538\\ldots\n$$\nRounded to three significant figures, this is $0.962$.", "answer": "$$\\boxed{0.962}$$", "id": "1283651"}, {"introduction": "A current source is only effective if its output transistor operates in the correct region, a concept known as output compliance. If the load connected to the mirror's output demands too high a voltage drop, the output transistor will enter saturation, and it will no longer regulate the current. This exercise guides you through calculating the maximum allowable load resistance, $R_{L,max}$, to ensure the mirror functions as intended within its active region [@problem_id:1283598].", "problem": "Consider a simple current mirror circuit constructed using two identical NPN Bipolar Junction Transistors (BJTs), denoted as Q1 and Q2. The circuit is configured as follows: the bases of Q1 and Q2 are connected together, and their emitters are both connected to ground. The collector of the reference transistor, Q1, is connected to its own base. A reference resistor, $R_{REF}$, is connected between a positive voltage supply, $V_{CC}$, and the collector of Q1.\n\nA load, represented by a resistor $R_L$, is connected between the collector of the output transistor, Q2, and the same positive voltage supply, $V_{CC}$.\n\nBoth transistors are perfectly matched and are characterized by a constant base-emitter voltage $V_{\\text{BE(on)}}$ when operating in the forward-active region. The transistors are considered to enter the saturation region when their collector-emitter voltage drops to a value of $V_{\\text{CE(sat)}}$. You may assume that the current gain, $\\beta$, of the transistors is sufficiently large so that base currents can be neglected. The Early effect should also be ignored.\n\nDetermine the maximum possible value of the load resistor, $R_{L,max}$, for which the output transistor Q2 remains in the forward-active region. Express your answer as a single closed-form analytic expression in terms of $V_{CC}$, $R_{REF}$, $V_{\\text{BE(on)}}$, and $V_{\\text{CE(sat)}}$.", "solution": "The bases of Q1 and Q2 are tied together and their emitters are grounded. With Q1’s collector tied to its base, the base-collector-emitter loop of Q1 fixes the base/collector node at a voltage $V_{\\text{BE(on)}}$ above ground whenever Q1 is in forward-active operation. Neglecting base currents, the current through the reference resistor is therefore set by Ohm’s law as\n$$\nI_{REF}=\\frac{V_{CC}-V_{\\text{BE(on)}}}{R_{REF}}\n$$.\nWith perfectly matched transistors and ignoring the Early effect, the output transistor Q2 mirrors this current in the forward-active region, so its collector current is\n$$\nI_{O}=I_{REF}=\\frac{V_{CC}-V_{\\text{BE(on)}}}{R_{REF}}\n$$.\nThe collector of Q2 is connected to $V_{CC}$ through $R_{L}$, so its collector voltage is\n$$\nV_{C2}=V_{CC}-I_{O}R_{L}\n$$.\nQ2 remains in forward-active operation provided $V_{CE2}\\geq V_{\\text{CE(sat)}}$. Since the emitter is at ground, $V_{CE2}=V_{C2}$, and the boundary of forward-active operation occurs when\n$$\nV_{CC}-I_{O}R_{L,\\max}=V_{\\text{CE(sat)}}\n$$.\nSolving for $R_{L,\\max}$ gives\n$$\nR_{L,\\max}=\\frac{V_{CC}-V_{\\text{CE(sat)}}}{I_{O}}\n$$.\nSubstituting $I_{O}=I_{REF}=(V_{CC}-V_{\\text{BE(on)}})/R_{REF}$ yields the closed-form expression\n$$\nR_{L,\\max}=R_{REF}\\,\\frac{V_{CC}-V_{\\text{CE(sat)}}}{V_{CC}-V_{\\text{BE(on)}}}\n$$.\nThis result assumes Q1 itself remains in forward-active operation, which is satisfied when $V_{\\text{BE(on)}}>V_{\\text{CE(sat)}}$, consistent with the stated device behavior.", "answer": "$$\\boxed{R_{REF}\\,\\frac{V_{CC}-V_{\\text{CE(sat)}}}{V_{CC}-V_{\\text{BE(on)}}}}$$", "id": "1283598"}, {"introduction": "Generating small and stable bias currents (in the microampere range) is a common challenge in integrated circuit design, as simple mirrors would require impractically large resistors. The Widlar current source offers an elegant solution by introducing an emitter resistor on the output transistor. This practice demonstrates how this modification utilizes the logarithmic nature of the BJT's $V_{BE}$-$I_C$ characteristic to create a large ratio between the reference and output currents, even with modest resistor values [@problem_id:1283657].", "problem": "An engineer is designing a small-current bias source for an integrated amplifier using a Widlar current source configuration. The circuit consists of two matched NPN Bipolar Junction Transistors (BJTs), labeled $Q_1$ and $Q_2$. The bases of both transistors are connected together. The collector of the reference transistor, $Q_1$, is connected to its base, forming a diode-like element. A known reference current, $I_{REF} = 1.00 \\text{ mA}$, is directed into the collector of $Q_1$. The output current, $I_{OUT}$, is the collector current of the second transistor, $Q_2$. To generate a small output current, a resistor $R_E$ is inserted in series with the emitter of $Q_2$, connecting it to ground. The emitter of $Q_1$ is connected directly to ground.\n\nAssume that both transistors operate in the forward-active region at a temperature where the thermal voltage is $V_T = 25.0 \\text{ mV}$. The transistors are identical and have a very high common-emitter current gain, $\\beta$, which allows you to assume that the collector current is equal to the emitter current ($I_C = I_E$) and that base currents are negligible.\n\nCalculate the value of the emitter resistor $R_E$ required to produce an output current of $I_{OUT} = 20.0 \\text{ }\\mu\\text{A}$. Express your answer in kilo-ohms (k$\\Omega$), rounded to three significant figures.", "solution": "Because both BJTs are identical and operate in forward-active region with negligible base current, we use the exponential $I$–$V$ relation $I_{C} = I_{S} \\exp(V_{BE}/V_{T})$ for each device. Let the common base voltage be $V_{B}$. For $Q_{1}$ (emitter at ground), $V_{BE1} = V_{B}$ and\n$$\nI_{REF} = I_{S} \\exp\\!\\left(\\frac{V_{BE1}}{V_{T}}\\right) = I_{S} \\exp\\!\\left(\\frac{V_{B}}{V_{T}}\\right).\n$$\nFor $Q_{2}$, the emitter voltage is $V_{E2} = I_{OUT} R_{E}$ (using $I_{E} \\approx I_{C}$), so $V_{BE2} = V_{B} - V_{E2}$ and\n$$\nI_{OUT} = I_{S} \\exp\\!\\left(\\frac{V_{BE2}}{V_{T}}\\right) = I_{S} \\exp\\!\\left(\\frac{V_{B} - I_{OUT} R_{E}}{V_{T}}\\right).\n$$\nTaking the ratio eliminates $I_{S}$ and $V_{B}$:\n$$\n\\frac{I_{OUT}}{I_{REF}} = \\exp\\!\\left(\\frac{V_{BE2} - V_{BE1}}{V_{T}}\\right) = \\exp\\!\\left(-\\frac{I_{OUT} R_{E}}{V_{T}}\\right).\n$$\nTaking the natural logarithm and solving for $R_{E}$ gives\n$$\n\\ln\\!\\left(\\frac{I_{OUT}}{I_{REF}}\\right) = -\\frac{I_{OUT} R_{E}}{V_{T}}\n\\;\\;\\Rightarrow\\;\\;\nR_{E} = \\frac{V_{T}}{I_{OUT}} \\ln\\!\\left(\\frac{I_{REF}}{I_{OUT}}\\right).\n$$\nSubstituting the given values $V_{T} = 25.0 \\times 10^{-3}$, $I_{REF} = 1.00 \\times 10^{-3}$, and $I_{OUT} = 20.0 \\times 10^{-6}$ (in SI units) yields\n$$\nR_{E} = \\frac{25.0 \\times 10^{-3}}{20.0 \\times 10^{-6}} \\ln(50) = 1250 \\,\\ln(50) \\text{ } \\Omega \\approx 4890.0 \\text{ } \\Omega = 4.890 \\text{ } \\text{k}\\Omega\n$$.\nRounded to three significant figures in kilo-ohms:", "answer": "$$\\boxed{4.89}$$", "id": "1283657"}]}
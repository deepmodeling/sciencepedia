{"hands_on_practices": [{"introduction": "A key function of a voltage amplifier is to deliver a stable voltage to a subsequent stage or load, regardless of the load's impedance. This requires the amplifier to have a very low output impedance. This first practice demonstrates the most fundamental technique for achieving this: applying negative feedback. By analyzing a standard op-amp circuit with a series-shunt feedback network, you will quantify the dramatic reduction in output impedance, seeing firsthand how the factor $1 + A_{OL}\\beta$ transforms a moderate output impedance into a near-ideal one [@problem_id:1317268].", "problem": "An engineer is designing a low-impedance buffer stage for a high-frequency sensor. The core of the buffer is a voltage amplifier block, which can be modeled with a key set of open-loop characteristics: an open-loop voltage gain $A_{OL} = 1.20 \\times 10^5$, an open-loop input impedance $R_i = 2.50 \\, \\text{M}\\Omega$, and an open-loop output impedance $R_o = 80.0 \\, \\Omega$.\n\nTo stabilize the circuit's performance and significantly lower its output impedance, a series-shunt negative feedback configuration is employed. This is realized using a standard non-inverting topology. A feedback resistor with resistance $R_F = 55.2 \\, \\text{k}\\Omega$ is connected from the amplifier's output to its inverting input. Another resistor with resistance $R_G = 1.25 \\, \\text{k}\\Omega$ is connected from the inverting input to ground. The signal from the sensor is applied to the non-inverting input of the amplifier.\n\nAssuming the amplifier operates in its linear region and the feedback network does not load the input signal source, calculate the factor by which the output impedance of the amplifier is reduced. Express your answer as a number rounded to four significant figures.", "solution": "We identify the feedback type as series-shunt (voltage-series) in a non-inverting configuration. For such feedback, the closed-loop output impedance is given by\n$$\nR_{o,\\text{fb}}=\\frac{R_{o}}{1+A_{OL}\\beta},\n$$\nso the reduction factor (ratio of open-loop to closed-loop output impedance) is\n$$\nD=1+A_{OL}\\beta.\n$$\nThe feedback factor for the non-inverting topology is the voltage divider ratio\n$$\n\\beta=\\frac{R_{G}}{R_{F}+R_{G}}.\n$$\nWith $R_{F}=55.2\\times 10^{3}$ and $R_{G}=1.25\\times 10^{3}$,\n$$\n\\beta=\\frac{1.25\\times 10^{3}}{(55.2+1.25)\\times 10^{3}}=\\frac{1.25}{56.45}=\\frac{25}{1129}.\n$$\nThe loop gain is\n$$\nA_{OL}\\beta=\\left(1.20\\times 10^{5}\\right)\\left(\\frac{25}{1129}\\right)=\\frac{3.00\\times 10^{6}}{1129}.\n$$\nHence the reduction factor is\n$$\nD=1+A_{OL}\\beta=1+\\frac{3.00\\times 10^{6}}{1129}=\\frac{3{,}001{,}129}{1129}\\approx 2658.218\\ldots\n$$\nRounded to four significant figures, the factor by which the output impedance is reduced is $2658$.", "answer": "$$\\boxed{2658}$$", "id": "1317268"}, {"introduction": "Moving from output to input impedance, we now explore a transresistance amplifier, where a low input impedance is crucial for accurately measuring an input current signal. This exercise introduces a clever and practical design choice: using a PMOS transistor as a voltage-controlled feedback resistor. By operating the transistor in its linear (triode) region, we can precisely set the amplifier's input impedance using a control voltage, $V_G$. This problem bridges the gap between device physics and circuit-level application, showing how to control circuit properties by manipulating a transistor's operating point [@problem_id:1317274].", "problem": "Consider a transresistance amplifier constructed using an operational amplifier (op-amp), which has a finite DC open-loop voltage gain of $A_{OL}$. A current source providing a signal $I_{in}$ is connected to the inverting input of the op-amp, and the non-inverting input is connected to ground.\n\nInstead of a simple resistor, the feedback path between the output and the inverting input consists of a P-channel Metal-Oxide-Semiconductor (PMOS) transistor. The source of the PMOS is connected to the inverting input, and the drain is connected to the output. The gate of the PMOS is held at a constant DC control voltage, $V_G$.\n\nThe PMOS transistor is a type of Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) and is characterized by its process transconductance parameter $k'_p$, its aspect ratio $W/L$, and the magnitude of its threshold voltage, $|V_{thp}|$. You are to assume that the PMOS consistently operates in its triode (or linear) region. Furthermore, for the purpose of finding the effective feedback resistance, you may assume that the voltage at the inverting input is effectively at virtual ground (0 V) and that the voltage variations across the transistor are small enough for it to be modeled as a single linear resistor.\n\nDetermine the input impedance, $Z_{in}$, of this amplifier as seen by the current source. Provide your answer as an analytic expression in terms of $A_{OL}$, $k'_p$, $W/L$, $|V_{thp}|$, and $V_G$.", "solution": "The problem asks for the input impedance, $Z_{in}$, of a transresistance amplifier where the feedback resistor is replaced by a PMOS transistor. The op-amp has a finite open-loop gain $A_{OL}$.\n\nStep 1: Analyze the overall circuit topology.\nThe circuit is a transresistance amplifier, which employs a shunt-shunt feedback configuration. The input signal is a current $I_{in}$ and the output signal is a voltage $V_{out}$. The input impedance of this topology is known to be significantly reduced by the feedback mechanism. The general formula for the input impedance of a shunt-shunt feedback amplifier is:\n$$Z_{in} = \\frac{Z_f}{1 + A_{OL} \\beta}$$\nFor a transresistance amplifier with an op-amp, the feedback factor $\\beta$ is 1, and the forward gain is the op-amp's open-loop gain $A_{OL}$. The impedance $Z_f$ is the impedance of the feedback element. Thus, the input impedance is given by the Miller effect on the feedback impedance:\n$$Z_{in} = \\frac{R_f}{1 + A_{OL}}$$\nwhere $R_f$ is the effective resistance of the feedback element. In this problem, the feedback element is the PMOS transistor. We will denote its effective resistance as $R_{PMOS}$.\n\nStep 2: Determine the effective resistance of the PMOS transistor ($R_{PMOS}$).\nThe PMOS transistor is operating in the triode region. The drain current $I_D$ (flowing from drain to source) is typically written in terms of $V_{DS}$, but for a PMOS, it's often more convenient to use source-referenced quantities $I_{SD}$ and $V_{SD}$. The current $I_{SD}$ flowing from source to drain is given by:\n$$I_{SD} = k'_p \\frac{W}{L} \\left( (V_{SG} - |V_{thp}|)V_{SD} - \\frac{V_{SD}^2}{2} \\right)$$\nThe problem states we can model the transistor as a linear resistor, which is valid for small voltage variations, i.e., small $V_{SD}$. In this limit, the quadratic term $(V_{SD}^2/2)$ can be neglected. The I-V relationship simplifies to:\n$$I_{SD} \\approx k'_p \\frac{W}{L} (V_{SG} - |V_{thp}|)V_{SD}$$\nFrom this linear relationship, the effective resistance $R_{PMOS}$ is the ratio $V_{SD}/I_{SD}$:\n$$R_{PMOS} = \\frac{V_{SD}}{I_{SD}} = \\frac{1}{k'_p \\frac{W}{L} (V_{SG} - |V_{thp}|)}$$\n\nStep 3: Calculate the gate-to-source voltage, $V_{SG}$.\nThe problem specifies that for the purpose of calculating this resistance, we can assume the inverting input of the op-amp is at virtual ground.\nThe source of the PMOS is connected to the inverting input, so its voltage $V_S$ is:\n$$V_S \\approx 0 \\text{ V}$$\nThe gate of the PMOS is connected to the constant control voltage $V_G$.\nThe gate-to-source voltage is defined as $V_{GS} = V_G - V_S$. Using our virtual ground approximation for $V_S$:\n$$V_{GS} = V_G - 0 = V_G$$\nThe resistance formula uses $V_{SG}$, which is $V_S - V_G$.\n$$V_{SG} = -V_{GS} = -V_G$$\n\nStep 4: Substitute $V_{SG}$ into the expression for $R_{PMOS}$.\nPlugging $V_{SG} = -V_G$ into our expression for the PMOS resistance:\n$$R_{PMOS} = \\frac{1}{k'_p \\frac{W}{L} (-V_G - |V_{thp}|)}$$\nFor the PMOS to be conducting (in the \"on\" state), it is required that $V_{SG} > |V_{thp}|$, which implies $-V_G > |V_{thp}|$, or $V_G < -|V_{thp}|$. This is consistent with the operation of a PMOS device.\n\nStep 5: Calculate the final amplifier input impedance, $Z_{in}$.\nNow, we substitute the derived expression for the effective feedback resistance, $R_{PMOS}$, into the formula for the amplifier's input impedance.\n$$Z_{in} = \\frac{R_{PMOS}}{1 + A_{OL}}$$\n$$Z_{in} = \\frac{1}{(1 + A_{OL})} \\cdot \\frac{1}{k'_p \\frac{W}{L} (-V_G - |V_{thp}|)}$$\nThis is the final expression for the input impedance of the amplifier.", "answer": "$$\\boxed{\\frac{1}{(1 + A_{OL}) k'_{p} \\frac{W}{L} (-V_{G} - |V_{thp}|)}}$$", "id": "1317274"}, {"introduction": "Real-world amplifier stages often incorporate multiple design techniques simultaneously to achieve desired performance metrics. This final practice presents a more complex scenario: a BJT amplifier that employs both emitter degeneration (a form of local series feedback) and a collector-to-base resistor (global shunt feedback). These two feedback loops have different, and sometimes opposing, effects on the amplifier's characteristics. By performing a detailed small-signal analysis from first principles, you will learn to untangle these competing effects and derive the amplifier's overall input resistance, developing the analytical rigor needed for advanced circuit design [@problem_id:1317287].", "problem": "Consider a single-stage voltage amplifier constructed using an NPN Bipolar Junction Transistor (BJT). The circuit is configured as follows: The emitter terminal is connected to ground through an emitter resistor with resistance $R_E$. The collector terminal is connected to a DC power supply through a collector resistor with resistance $R_C$. To stabilize the operating point and modify the amplifier's characteristics, a feedback resistor with resistance $R_F$ is connected directly between the collector and base terminals. The input signal is fed to the base of the transistor, and the output signal is taken from the collector.\n\nFor the purpose of small-signal analysis, the BJT is characterized at its DC operating point by its common-emitter current gain $\\beta$ and its intrinsic base-emitter resistance $r_\\pi$. The transconductance $g_m$ is related to these parameters by $g_m = \\beta/r_\\pi$. You are to assume that the Early effect is negligible, which implies that the transistor's intrinsic output resistance, $r_o$, can be considered infinite.\n\nDetermine the small-signal input resistance, $R_{in}$, of this amplifier as seen looking into the base of the transistor. Your final answer should be a single, closed-form analytic expression in terms of $\\beta$, $r_\\pi$, $R_C$, $R_E$, and $R_F$.", "solution": "Let the small-signal base, collector, and emitter node voltages be $v_{b}$, $v_{c}$, and $v_{e}$, respectively, and define $v_{\\pi}=v_{b}-v_{e}$. Using the hybrid-$\\pi$ model with $r_{o}\\to\\infty$, the elements are: $r_{\\pi}$ between base and emitter, a controlled current source of value $g_{m}v_{\\pi}$ from collector to emitter, $R_{C}$ from collector to ground, $R_{E}$ from emitter to ground, and $R_{F}$ from collector to base.\n\nKCL at the collector node gives\n$$\n\\frac{v_{c}}{R_{C}}+\\frac{v_{c}-v_{b}}{R_{F}}+g_{m}v_{\\pi}=0,\n$$\nwhich yields\n$$\nv_{c}=\\frac{v_{b}R_{C}}{R_{C}+R_{F}}-\\frac{g_{m}R_{C}R_{F}}{R_{C}+R_{F}}\\,v_{\\pi}.\n$$\n\nKCL at the emitter node gives\n$$\n\\frac{v_{e}}{R_{E}}+\\frac{v_{e}-v_{b}}{r_{\\pi}}-g_{m}v_{\\pi}=0\n\\;\\;\\Rightarrow\\;\\;\n\\frac{v_{e}}{R_{E}}=v_{\\pi}\\!\\left(\\frac{1}{r_{\\pi}}+g_{m}\\right).\n$$\nUsing $v_{\\pi}=v_{b}-v_{e}$, this becomes\n$$\nv_{\\pi}\\Bigl[1+R_{E}\\!\\left(\\frac{1}{r_{\\pi}}+g_{m}\\right)\\Bigr]=v_{b}\n\\;\\;\\Rightarrow\\;\\;\nv_{\\pi}=\\frac{v_{b}}{D},\\quad D\\equiv 1+R_{E}\\!\\left(\\frac{1}{r_{\\pi}}+g_{m}\\right).\n$$\n\nThe input current at the base is the sum of currents from base to emitter and from base to collector:\n$$\ni_{in}=\\frac{v_{b}-v_{e}}{r_{\\pi}}+\\frac{v_{b}-v_{c}}{R_{F}}=\\frac{v_{\\pi}}{r_{\\pi}}+\\frac{v_{b}-v_{c}}{R_{F}}.\n$$\nUsing the expression for $v_{c}$,\n$$\n\\frac{v_{b}-v_{c}}{R_{F}}=\\frac{v_{b}}{R_{C}+R_{F}}+\\frac{g_{m}R_{C}}{R_{C}+R_{F}}\\,v_{\\pi}.\n$$\nTherefore,\n$$\n\\frac{i_{in}}{v_{b}}=\\frac{1}{r_{\\pi}D}+\\frac{1}{R_{C}+R_{F}}+\\frac{g_{m}R_{C}}{(R_{C}+R_{F})D}.\n$$\n\nHence the input resistance is\n$$\nR_{in}=\\frac{v_{b}}{i_{in}}=\\frac{(R_{C}+R_{F})D\\,r_{\\pi}}{(R_{C}+R_{F})+D\\,r_{\\pi}+g_{m}R_{C}r_{\\pi}}.\n$$\nUsing $g_{m}=\\beta/r_{\\pi}$, we have $D=1+\\frac{(1+\\beta)R_{E}}{r_{\\pi}}$ and $D\\,r_{\\pi}=r_{\\pi}+(1+\\beta)R_{E}$, $g_{m}R_{C}r_{\\pi}=\\beta R_{C}$. Substituting,\n$$\nR_{in}=\\frac{(R_{C}+R_{F})\\bigl[r_{\\pi}+(1+\\beta)R_{E}\\bigr]}{r_{\\pi}+(1+\\beta)(R_{E}+R_{C})+R_{F}}.\n$$\n\nThis is a closed-form expression in terms of $\\beta$, $r_{\\pi}$, $R_{C}$, $R_{E}$, and $R_{F}$, as required.", "answer": "$$\\boxed{\\frac{(R_{C}+R_{F})\\left[r_{\\pi}+(1+\\beta)R_{E}\\right]}{r_{\\pi}+(1+\\beta)(R_{E}+R_{C})+R_{F}}}$$", "id": "1317287"}]}
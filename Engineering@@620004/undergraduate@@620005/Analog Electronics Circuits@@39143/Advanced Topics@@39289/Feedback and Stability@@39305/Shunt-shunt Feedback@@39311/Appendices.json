{"hands_on_practices": [{"introduction": "The transresistance amplifier is a classic application of the shunt-shunt feedback topology, designed to convert an input current signal into a proportional output voltage. This first practice problem [@problem_id:1332786] places this concept in the practical context of a photodetector circuit, a common real-world scenario. By working through this exercise with an ideal op-amp, you will solidify your understanding of the fundamental gain relationship, $V_{out} = -I_{in}R_f$, and see how a single feedback resistor dictates the amplifier's behavior.", "problem": "An engineer is designing the front-end electronics for a simple optical power meter. The system uses a photodiode to convert incident light into a photocurrent, which is then amplified by a transresistance amplifier to produce a measurable output voltage. The transresistance amplifier is constructed using an operational amplifier (op-amp) that can be considered ideal.\n\nThe photodiode is characterized by a responsivity $\\mathcal{R} = 0.65$ A/W. This means it generates a photocurrent $I_{ph}$ given by $I_{ph} = \\mathcal{R} \\cdot P_{in}$, where $P_{in}$ is the incident optical power. The photodiode is connected such that this current flows into the inverting input of the op-amp. A single feedback resistor, $R_f$, is connected between the op-amp's output and its inverting input. The non-inverting input of the op-amp is connected to ground.\n\nFor a specific measurement, the incident optical power is $P_{in} = 5.0\\ \\mu\\text{W}$. The design requires the amplifier to produce a corresponding output voltage of $V_{out} = -4.0$ V.\n\nCalculate the value of the feedback resistor $R_f$ required to achieve this performance. Express your answer in kilo-ohms (k$\\Omega$), rounded to three significant figures.", "solution": "For an ideal op-amp in a transresistance (transimpedance) configuration with the non-inverting input grounded, the inverting input is at virtual ground. The photodiode injects current $I_{ph}$ into the inverting node, and this current flows through the feedback resistor $R_{f}$ to the output. By Kirchhoff’s current law at the inverting node,\n$$I_{ph}=\\frac{0-V_{out}}{R_{f}},$$\nwhich gives the standard transresistance relation\n$$V_{out}=-I_{ph}R_{f}.$$\nThe photodiode current is related to the incident power by\n$$I_{ph}=\\mathcal{R}P_{in}.$$\nSubstituting into the transresistance relation and solving for $R_{f}$,\n$$R_{f}=\\frac{-V_{out}}{\\mathcal{R}P_{in}}.$$\nWith $V_{out}=-4.0\\ \\text{V}$, $\\mathcal{R}=0.65\\ \\text{A/W}$, and $P_{in}=5.0\\times 10^{-6}\\ \\text{W}$, we first calculate the photocurrent:\n$$I_{ph} = (0.65\\ \\text{A/W})(5.0\\times 10^{-6}\\ \\text{W})=3.25\\times 10^{-6}\\ \\text{A}$$\nThen we calculate the resistance:\n$$R_{f}=\\frac{4.0\\ \\text{V}}{3.25\\times 10^{-6}\\ \\text{A}} \\approx 1,230,769\\ \\Omega$$\nThis is equivalent to approximately $1230.77\\ \\text{k}\\Omega$. Rounding to three significant figures, we get $1230\\ \\text{k}\\Omega$.", "answer": "$$\\boxed{1.23 \\times 10^{3}}$$", "id": "1332786"}, {"introduction": "While the ideal model is a great starting point, real-world operational amplifiers have a finite open-loop gain, which impacts the circuit's precision. In this exercise [@problem_id:1332802], we move beyond idealization to derive the closed-loop gain of an inverting amplifier, revealing its connection to the shunt-shunt feedback framework. This analysis demonstrates how the familiar gain expression is an approximation and provides a more accurate model for predicting circuit performance by accounting for the finite open-loop gain $A_{OL}$.", "problem": "An inverting amplifier circuit is constructed using an operational amplifier (op-amp), a signal source, and two resistors. The signal source is modeled as an ideal voltage source $V_s$ in series with a resistor $R_s$. This source is connected to the inverting input of the op-amp. A feedback resistor, with resistance $R_f$, is connected between the output terminal and the inverting input of the op-amp. The non-inverting input of the op-amp is connected to ground.\n\nThe op-amp is characterized by a finite open-loop voltage gain of $A_{OL}$, an infinite input resistance, and a zero output resistance.\n\nDetermine the symbolic expression for the closed-loop voltage gain of the circuit, defined as $A_f = V_o / V_s$, where $V_o$ is the voltage at the op-amp's output. Express your answer in terms of $A_{OL}$, $R_s$, and $R_f$.", "solution": "Let the inverting input node voltage be $V_{-}$ and the non-inverting input be grounded, so $V_{+}=0$. With finite open-loop gain, the op-amp output satisfies the constitutive relation\n$$\nV_{o}=A_{OL}(V_{+}-V_{-})=-A_{OL}V_{-}\\quad\\Rightarrow\\quad V_{-}=-\\frac{V_{o}}{A_{OL}}.\n$$\nThe input resistance is infinite, so no current flows into the op-amp inputs. Applying Kirchhoff’s current law at the inverting node gives the current from the source through $R_{s}$ equal to the current through the feedback resistor $R_{f}$:\n$$\n\\frac{V_{s}-V_{-}}{R_{s}}=\\frac{V_{-}-V_{o}}{R_{f}}.\n$$\nCross-multiplying and rearranging,\n$$\nR_{f}(V_{s}-V_{-})=R_{s}(V_{-}-V_{o})\\;\\Rightarrow\\;R_{f}V_{s}=V_{-}(R_{s}+R_{f})-R_{s}V_{o}.\n$$\nSubstitute $V_{-}=-V_{o}/A_{OL}$:\n$$\nR_{f}V_{s}=-\\frac{V_{o}}{A_{OL}}(R_{s}+R_{f})-R_{s}V_{o}.\n$$\nFactor $V_{o}$ and solve for $V_{o}/V_{s}$:\n$$\nR_{f}V_{s}=V_{o}\\left[-\\frac{R_{s}+R_{f}}{A_{OL}}-R_{s}\\right]\n\\;\\Rightarrow\\;\n\\frac{V_{o}}{V_{s}}=-\\frac{R_{f}}{R_{s}+\\frac{R_{s}+R_{f}}{A_{OL}}}\n=-\\frac{A_{OL}R_{f}}{A_{OL}R_{s}+R_{s}+R_{f}}\n=-\\frac{A_{OL}R_{f}}{R_{s}(A_{OL}+1)+R_{f}}.\n$$\nThis is the closed-loop gain $A_{f}=V_{o}/V_{s}$ in terms of $A_{OL}$, $R_{s}$, and $R_{f}$.", "answer": "$$\\boxed{-\\frac{A_{OL}R_{f}}{R_{s}(A_{OL}+1)+R_{f}}}$$", "id": "1332802"}, {"introduction": "Beyond affecting gain, feedback profoundly alters a circuit's input and output impedances. A key benefit of the shunt-shunt configuration is its ability to create a low output impedance, making the amplifier an effective voltage source for subsequent stages. This hands-on practice [@problem_id:1332801] challenges you to derive the closed-loop output resistance of a non-ideal transresistance amplifier, illustrating precisely how feedback works to reduce the op-amp's inherent output resistance, $r_o$.", "problem": "A transresistance amplifier is constructed using a non-ideal operational amplifier (op-amp) and a feedback resistor $R_f$. The op-amp is characterized by a finite open-loop voltage gain $A_{ol}$ and a non-zero open-loop output resistance $r_o$. Its open-loop input resistance is assumed to be infinite. The amplifier is configured with the feedback resistor $R_f$ connecting the output terminal to the inverting input terminal. The non-inverting input is connected to ground.\n\nThe input signal is provided by a current source connected to the inverting input. This current source has a finite internal source resistance $R_s$.\n\nYour task is to find the closed-loop output resistance, $R_{out,f}$, of this transresistance amplifier. Provide your answer as a single closed-form analytic expression in terms of the given parameters: $A_{ol}$, $r_o$, $R_f$, and $R_s$.", "solution": "To determine the closed-loop output resistance, $R_{out,f}$, we use the test-source method. We set all independent sources in the circuit to zero and apply a test voltage source $v_x$ to the output terminal. We then calculate the current $i_x$ drawn from this test source. The output resistance is given by the ratio $R_{out,f} = v_x / i_x$.\n\nFirst, we establish the circuit model for this analysis. Setting the input current source to zero means it is an open circuit. However, its internal source resistance $R_s$ remains in the circuit, connected between the inverting input terminal and ground. The non-ideal op-amp is modeled as a voltage-controlled voltage source with a value of $A_{ol}v_d$ in series with the open-loop output resistance $r_o$. Here, $v_d$ is the differential input voltage $v_d = v_+ - v_-$. Since the non-inverting input is grounded ($v_+=0$), we have $v_d = -v_-$, where $v_-$ is the voltage at the inverting input terminal. The internal voltage source of the op-amp is thus $-A_{ol}v_-$.\n\nWe apply Kirchhoff's Current Law (KCL) at the inverting input node, which has voltage $v_-$. The op-amp's input resistance is infinite, so no current flows into the op-amp's input terminal. The sum of the currents leaving the node through resistors $R_s$ and $R_f$ must be zero:\n$$\n\\frac{v_- - 0}{R_s} + \\frac{v_- - v_x}{R_f} = 0\n$$\nWe can rearrange this equation to solve for $v_-$ in terms of $v_x$:\n$$\nv_-\\left(\\frac{1}{R_s} + \\frac{1}{R_f}\\right) = \\frac{v_x}{R_f}\n$$\n$$\nv_-\\left(\\frac{R_f + R_s}{R_s R_f}\\right) = \\frac{v_x}{R_f}\n$$\n$$\nv_- = v_x \\frac{R_s R_f}{R_f(R_f + R_s)} = v_x \\frac{R_s}{R_s + R_f}\n$$\n\nNext, we apply KCL at the output node, which is held at the test voltage $v_x$. The total current $i_x$ from the test source is the sum of the current flowing into the feedback resistor $R_f$ and the current flowing into the op-amp's output terminal through $r_o$.\nThe current through $R_f$ is $(v_x - v_-)/R_f$.\nThe current through $r_o$ is $(v_x - (-A_{ol}v_-))/r_o = (v_x + A_{ol}v_-)/r_o$.\nSo, the KCL equation at the output node is:\n$$\ni_x = \\frac{v_x - v_-}{R_f} + \\frac{v_x + A_{ol}v_-}{r_o}\n$$\nWe can regroup this equation by the variables $v_x$ and $v_-$:\n$$\ni_x = v_x\\left(\\frac{1}{R_f} + \\frac{1}{r_o}\\right) + v_-\\left(\\frac{A_{ol}}{r_o} - \\frac{1}{R_f}\\right)\n$$\nNow, we substitute the expression for $v_-$ that we derived earlier:\n$$\ni_x = v_x\\left(\\frac{1}{R_f} + \\frac{1}{r_o}\\right) + \\left(v_x \\frac{R_s}{R_s + R_f}\\right)\\left(\\frac{A_{ol}}{r_o} - \\frac{1}{R_f}\\right)\n$$\nTo find the output admittance $i_x/v_x$, we divide the entire equation by $v_x$:\n$$\n\\frac{i_x}{v_x} = \\left(\\frac{1}{R_f} + \\frac{1}{r_o}\\right) + \\left(\\frac{R_s}{R_s + R_f}\\right)\\left(\\frac{A_{ol}}{r_o} - \\frac{1}{R_f}\\right)\n$$\nLet's expand and simplify the expression:\n$$\n\\frac{i_x}{v_x} = \\frac{1}{R_f} + \\frac{1}{r_o} + \\frac{A_{ol}R_s}{r_o(R_s + R_f)} - \\frac{R_s}{R_f(R_s + R_f)}\n$$\nWe can combine the terms with $R_f$ in the denominator:\n$$\n\\frac{1}{R_f} - \\frac{R_s}{R_f(R_s + R_f)} = \\frac{R_s + R_f - R_s}{R_f(R_s + R_f)} = \\frac{R_f}{R_f(R_s + R_f)} = \\frac{1}{R_s + R_f}\n$$\nSubstituting this back into the expression for the admittance:\n$$\n\\frac{i_x}{v_x} = \\frac{1}{r_o} + \\frac{A_{ol}R_s}{r_o(R_s + R_f)} + \\frac{1}{R_s + R_f}\n$$\nTo combine these terms, we find a common denominator, which is $r_o(R_s + R_f)$:\n$$\n\\frac{i_x}{v_x} = \\frac{R_s + R_f}{r_o(R_s + R_f)} + \\frac{A_{ol}R_s}{r_o(R_s + R_f)} + \\frac{r_o}{r_o(R_s + R_f)}\n$$\n$$\n\\frac{i_x}{v_x} = \\frac{R_s + R_f + A_{ol}R_s + r_o}{r_o(R_s + R_f)}\n$$\nThe closed-loop output resistance $R_{out,f}$ is the reciprocal of this admittance:\n$$\nR_{out,f} = \\frac{v_x}{i_x} = \\frac{r_o(R_s + R_f)}{R_s + R_f + r_o + A_{ol}R_s}\n$$\nThis expression can be rearranged slightly to group terms with $R_s$:\n$$\nR_{out,f} = \\frac{r_o(R_s + R_f)}{R_s(1 + A_{ol}) + R_f + r_o}\n$$\nThis is the final expression for the closed-loop output resistance.", "answer": "$$ \\boxed{\\frac{r_o(R_s + R_f)}{R_s(1 + A_{ol}) + R_f + r_o}} $$", "id": "1332801"}]}
{"hands_on_practices": [{"introduction": "The stability of a feedback amplifier is fundamentally determined by its loop gain, $T(j\\omega)$. A critical condition arises at the frequency where the phase shift of the loop gain reaches $-180^\\circ$, as this effectively turns negative feedback into positive feedback. This exercise provides a foundational practice in quantifying stability by calculating the gain margin, which is the safety buffer that prevents the loop gain magnitude from reaching unity at this critical frequency [@problem_id:1334331].", "problem": "An electronics engineer is testing a prototype negative feedback amplifier designed for a high-fidelity audio system. A key performance metric for such an amplifier is its stability, which is often characterized by its gain and phase margins. The engineer performs a frequency analysis and focuses on the loop gain, denoted as $T(j\\omega) = A(j\\omega)\\beta(j\\omega)$, where $A(j\\omega)$ is the open-loop gain of the amplifier and $\\beta(j\\omega)$ is the feedback factor.\n\nAt a specific critical angular frequency, $\\omega_{180}$, the engineer measures that the phase shift of the loop gain is exactly $-180^\\circ$. The measurement of the complete loop gain at this frequency yields the value $T(j\\omega_{180}) = -0.40$.\n\nYour task is to analyze the stability of this amplifier based on this measurement.\n1.  Calculate the amplifier's gain margin. Express your answer in decibels (dB), rounded to three significant figures.\n2.  Based on your calculation, determine if the amplifier is stable under the given operating conditions. Use the number 1 to represent a stable system and the number 0 to represent an unstable system.\n\nPresent your two results, the gain margin and the stability indicator, as a single composite answer.", "solution": "The loop gain is defined as $T(j\\omega)=A(j\\omega)\\beta(j\\omega)$. At the phase crossover frequency $\\omega_{180}$, the phase of the loop gain is $-180^{\\circ}$, so the loop gain is a real negative number. The measurement gives\n$$\nT(j\\omega_{180})=-0.40 \\quad \\Rightarrow \\quad |T(j\\omega_{180})|=0.40.\n$$\nBy the Bode gain margin definition, the gain margin (as a linear ratio) is the factor by which the loop gain magnitude can be increased before it reaches unity at the phase crossover:\n$$\n\\text{GM}_{\\text{ratio}}=\\frac{1}{|T(j\\omega_{180})|}=\\frac{1}{0.40}=2.5.\n$$\nExpressed in decibels, the gain margin is\n$$\n\\text{GM}_{\\text{dB}}=20\\log_{10}\\!\\bigl(\\text{GM}_{\\text{ratio}}\\bigr)=20\\log_{10}(2.5)\\approx 20\\times 0.39794=7.9588\\ \\text{dB}.\n$$\nRounded to three significant figures, this is $7.96$ dB.\n\nFor stability, the Bode/Nyquist criterion implies that if at the phase crossover frequency the loop gain magnitude is less than unity, the gain margin is positive, and the closed-loop system is stable (assuming no right-half-plane open-loop poles). Since $|T(j\\omega_{180})|=0.40<1$, the amplifier is stable. Using the requested indicator, stable corresponds to $1$.\n\nTherefore, the composite answer is the gain margin in dB and the stability indicator.", "answer": "$$\\boxed{\\begin{pmatrix} 7.96 & 1 \\end{pmatrix}}$$", "id": "1334331"}, {"introduction": "Stability margins do more than just predict whether an amplifier will oscillate; they also characterize the quality of its time-domain response. A small phase margin often leads to unwanted \"ringing\" or overshoot in the output signal. This practice provides a crucial link between the frequency domain and the time domain by using the phase margin to predict the percentage overshoot in the amplifier's step response, a key metric for signal integrity in systems like oscilloscopes and data converters [@problem_id:1334367].", "problem": "An electronics engineer is designing a non-inverting feedback amplifier for use in a high-speed instrumentation system. The stability of the amplifier is critical to prevent ringing and distortion in the acquired signals. From a Bode plot analysis of the amplifier's loop gain, the engineer determines that the phase margin is $\\phi_m = 40^\\circ$.\n\nFor analysis, the closed-loop transient response of the amplifier to a step input can be accurately modeled as a standard second-order system. For such systems with a phase margin less than approximately $60^\\circ$, a useful engineering approximation relates the damping ratio, $\\zeta$, to the phase margin, $\\phi_m$ (expressed in degrees), by the linear formula $\\zeta \\approx \\phi_m / 100$.\n\nCalculate the expected fractional overshoot for the amplifier's output voltage in response to a small input step. The fractional overshoot is defined as the maximum peak voltage minus the final steady-state voltage, all divided by the final steady-state voltage.\n\nRound your final answer to three significant figures.", "solution": "The phase margin is given as $\\phi_{m}=40$ degrees. Under the stated approximation for phase margins less than approximately $60$ degrees, the damping ratio is\n$$\n\\zeta \\approx \\frac{\\phi_{m}}{100}=\\frac{40}{100}=\\frac{2}{5}.\n$$\nFor a standard underdamped second-order system, the fractional overshoot $M_{p}$ in response to a unit step is\n$$\nM_{p}=\\exp\\!\\left(\\frac{-\\zeta \\pi}{\\sqrt{1-\\zeta^{2}}}\\right).\n$$\nSubstituting $\\zeta=\\frac{2}{5}$,\n$$\n1-\\zeta^{2}=1-\\left(\\frac{2}{5}\\right)^{2}=1-\\frac{4}{25}=\\frac{21}{25},\n$$\n$$\n\\sqrt{1-\\zeta^{2}}=\\sqrt{\\frac{21}{25}}=\\frac{\\sqrt{21}}{5}.\n$$\nHence the exponent simplifies to\n$$\n\\frac{-\\zeta \\pi}{\\sqrt{1-\\zeta^{2}}}=\\frac{-\\frac{2}{5}\\pi}{\\frac{\\sqrt{21}}{5}}=-\\frac{2\\pi}{\\sqrt{21}},\n$$\nso\n$$\nM_{p}=\\exp\\!\\left(-\\frac{2\\pi}{\\sqrt{21}}\\right).\n$$\nEvaluating numerically and rounding to three significant figures,\n$$\nM_{p}\\approx 0.254.\n$$", "answer": "$$\\boxed{0.254}$$", "id": "1334367"}, {"introduction": "Understanding stability metrics is the first step, but a true designer must know how to engineer a circuit to meet those specifications. Many multistage, high-gain amplifiers are inherently unstable and require frequency compensation to function correctly within a feedback loop. This hands-on design problem guides you through the essential technique of dominant-pole compensation, where you will determine the precise pole location needed to stabilize an amplifier and achieve a target phase margin for robust performance [@problem_id:1334305].", "problem": "An engineer is designing a high-gain amplifier for a precision measurement instrument. The initial design is a three-stage amplifier that is to be used in a unity-gain non-inverting feedback configuration (feedback factor $\\beta = 1$). The uncompensated amplifier has an open-loop DC voltage gain of $A_0 = 10^5$ and its frequency response is characterized by three real poles.\n\nTo ensure stability, the amplifier must be compensated using the dominant-pole technique. This involves modifying the amplifier's internal circuitry to move its lowest-frequency pole to a new, much lower frequency, $f_{pd}$. This new pole will become the dominant pole of the compensated amplifier's response. The two higher-frequency poles remain at their original locations of $f_{p2} = 2.0 \\text{ MHz}$ and $f_{p3} = 10.0 \\text{ MHz}$.\n\nYour task is to determine the required frequency $f_{pd}$ for the new dominant pole such that the compensated amplifier, when configured with unity feedback, exhibits a phase margin of exactly $60^\\circ$.\n\nExpress your answer in Hertz (Hz) and round it to three significant figures.", "solution": "The open-loop transfer function of the compensated amplifier, $A_c(s)$, can be written as a function of the angular frequency $s=j\\omega$:\n$$A_c(s) = \\frac{A_0}{\\left(1 + \\frac{s}{\\omega_{pd}}\\right)\\left(1 + \\frac{s}{\\omega_{p2}}\\right)\\left(1 + \\frac{s}{\\omega_{p3}}\\right)}$$\nwhere $A_0 = 10^5$ is the DC gain, and $\\omega = 2\\pi f$ for each pole frequency. The amplifier is in a unity-gain feedback loop, so the feedback factor $\\beta = 1$. The loop gain is $T(s) = \\beta A_c(s) = A_c(s)$.\n\nThe phase margin (PM) is defined at the gain crossover frequency, $\\omega_{gc}$, which is the frequency where the magnitude of the loop gain is unity, i.e., $|T(j\\omega_{gc})| = 1$. The phase margin is given by:\n$$\\text{PM} = 180^\\circ + \\angle T(j\\omega_{gc})$$\nWe are given that the desired phase margin is $60^\\circ$. Therefore, the phase of the loop gain at the crossover frequency must be:\n$$\\angle T(j\\omega_{gc}) = \\text{PM} - 180^\\circ = 60^\\circ - 180^\\circ = -120^\\circ$$\n\nThe phase of the loop gain is the sum of the phase shifts from each pole:\n$$\\angle T(j\\omega) = -\\arctan\\left(\\frac{\\omega}{\\omega_{pd}}\\right) - \\arctan\\left(\\frac{\\omega}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega}{\\omega_{p3}}\\right)$$\nAt the gain crossover frequency $\\omega_{gc}$, this becomes:\n$$-120^\\circ = -\\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{pd}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p3}}\\right)$$\n\nIn dominant-pole compensation, the dominant pole frequency $f_{pd}$ is designed to be much lower than the gain crossover frequency $f_{gc}$. Thus, we can make the standard approximation that $\\omega_{gc} \\gg \\omega_{pd}$. This implies that the phase contribution from the dominant pole is approximately $-90^\\circ$:\n$$\\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{pd}}\\right) \\approx 90^\\circ$$\nSubstituting this into the phase equation:\n$$-120^\\circ \\approx -90^\\circ - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p3}}\\right)$$\nRearranging the terms, we get an equation for $\\omega_{gc}$:\n$$\\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p2}}\\right) + \\arctan\\left(\\frac{\\omega_{gc}}{\\omega_{p3}}\\right) = 30^\\circ$$\nSince the relationship is based on ratios, we can work with frequencies in Hz ($f$) directly. Let $f_{gc}$ be the gain crossover frequency in Hz.\n$$\\arctan\\left(\\frac{f_{gc}}{f_{p2}}\\right) + \\arctan\\left(\\frac{f_{gc}}{f_{p3}}\\right) = 30^\\circ$$\nUsing the arctangent addition identity $\\arctan(u) + \\arctan(v) = \\arctan\\left(\\frac{u+v}{1-uv}\\right)$, we have:\n$$\\arctan\\left(\\frac{\\frac{f_{gc}}{f_{p2}} + \\frac{f_{gc}}{f_{p3}}}{1 - \\frac{f_{gc}^2}{f_{p2}f_{p3}}}\\right) = 30^\\circ$$\nTaking the tangent of both sides:\n$$\\frac{f_{gc}(f_{p2}+f_{p3})}{f_{p2}f_{p3} - f_{gc}^2} = \\tan(30^\\circ) = \\frac{1}{\\sqrt{3}}$$\nThis gives a quadratic equation for $f_{gc}$:\n$$\\sqrt{3}f_{gc}(f_{p2}+f_{p3}) = f_{p2}f_{p3} - f_{gc}^2$$\n$$f_{gc}^2 + \\sqrt{3}(f_{p2}+f_{p3})f_{gc} - f_{p2}f_{p3} = 0$$\nNow, substitute the given pole frequencies: $f_{p2} = 2.0 \\times 10^6$ Hz and $f_{p3} = 10.0 \\times 10^6$ Hz.\n$$f_{p2}+f_{p3} = 12.0 \\times 10^6 \\text{ Hz}$$\n$$f_{p2}f_{p3} = 20.0 \\times 10^{12} \\text{ Hz}^2$$\nThe quadratic equation becomes:\n$$f_{gc}^2 + \\sqrt{3}(12.0 \\times 10^6)f_{gc} - (20.0 \\times 10^{12}) = 0$$\nSolving for $f_{gc}$ using the quadratic formula, and taking the positive root for frequency:\n$$f_{gc} = \\frac{-\\sqrt{3}(12 \\times 10^6) + \\sqrt{(\\sqrt{3}(12 \\times 10^6))^2 - 4(1)(-20 \\times 10^{12})}}{2}$$\n$$f_{gc} = \\frac{-20.785 \\times 10^6 + \\sqrt{(432 \\times 10^{12}) + (80 \\times 10^{12})}}{2}$$\n$$f_{gc} = \\frac{-20.785 \\times 10^6 + \\sqrt{512 \\times 10^{12}}}{2} = \\frac{-20.785 \\times 10^6 + 22.627 \\times 10^6}{2}$$\n$$f_{gc} = \\frac{1.842 \\times 10^6}{2} = 9.21 \\times 10^5 \\text{ Hz}$$\n\nNow we must find $f_{pd}$ using the gain condition $|T(j\\omega_{gc})| = 1$.\n$$|T(j\\omega_{gc})| = \\frac{A_0}{\\sqrt{1+\\left(\\frac{f_{gc}}{f_{pd}}\\right)^2}\\sqrt{1+\\left(\\frac{f_{gc}}{f_{p2}}\\right)^2}\\sqrt{1+\\left(\\frac{f_{gc}}{f_{p3}}\\right)^2}} = 1$$\nAgain, using the approximation $f_{gc} \\gg f_{pd}$, the term $\\sqrt{1+(f_{gc}/f_{pd})^2}$ simplifies to $f_{gc}/f_{pd}$.\n$$A_0 \\approx \\left(\\frac{f_{gc}}{f_{pd}}\\right)\\sqrt{1+\\left(\\frac{f_{gc}}{f_{p2}}\\right)^2}\\sqrt{1+\\left(\\frac{f_{gc}}{f_{p3}}\\right)^2}$$\nSolving for $f_{pd}$:\n$$f_{pd} = \\frac{f_{gc}}{A_0} \\sqrt{1+\\left(\\frac{f_{gc}}{f_{p2}}\\right)^2}\\sqrt{1+\\left(\\frac{f_{gc}}{f_{p3}}\\right)^2}$$\nSubstitute the known values:\n$$f_{gc} = 9.21 \\times 10^5 \\text{ Hz}, \\quad A_0 = 10^5, \\quad f_{p2} = 2.0 \\times 10^6 \\text{ Hz}, \\quad f_{p3} = 10.0 \\times 10^6 \\text{ Hz}$$\nCalculate the ratios:\n$$\\frac{f_{gc}}{f_{p2}} = \\frac{9.21 \\times 10^5}{2.0 \\times 10^6} = 0.4605$$\n$$\\frac{f_{gc}}{f_{p3}} = \\frac{9.21 \\times 10^5}{10.0 \\times 10^6} = 0.0921$$\nNow, plug these into the expression for $f_{pd}$:\n$$f_{pd} = \\frac{9.21 \\times 10^5}{10^5} \\sqrt{1+(0.4605)^2}\\sqrt{1+(0.0921)^2}$$\n$$f_{pd} = 9.21 \\times \\sqrt{1.21206} \\times \\sqrt{1.00848}$$\n$$f_{pd} = 9.21 \\times (1.1009) \\times (1.0042)$$\n$$f_{pd} = 10.188 \\text{ Hz}$$\nRounding the final answer to three significant figures, we get $10.2$ Hz.", "answer": "$$\\boxed{10.2}$$", "id": "1334305"}]}
{"hands_on_practices": [{"introduction": "Negative feedback is a cornerstone of amplifier design, offering a powerful method to enhance performance. One of its most celebrated applications is extending an amplifier's operating frequency range by trading excess gain for bandwidth. This first exercise [@problem_id:1282465] introduces the fundamental concept of the Gain-Bandwidth Product ($f_T$) in a common scenario involving a single-pole operational amplifier. Mastering this calculation is the first step toward intuitively understanding and designing feedback systems where a predictable trade-off is made to achieve a wider, more useful operating bandwidth.", "problem": "An operational amplifier is used to build a pre-amplifier for a low-frequency sensor. The open-loop frequency response of this operational amplifier is characterized by a single dominant pole. The open-loop Direct Current (DC) voltage gain is specified as $A_{OL,DC} = 80 \\text{ dB}$, and its -3dB bandwidth (which corresponds to the dominant pole frequency) is $f_{H,OL} = 100 \\text{ Hz}$.\n\nThe operational amplifier is then placed in a negative feedback configuration to form a non-inverting amplifier with a closed-loop DC voltage gain of $A_{CL,DC} = 20 \\text{ dB}$.\n\nCalculate the new -3dB bandwidth, $f_{H,CL}$, of this closed-loop amplifier. Express your answer in kilohertz (kHz), rounded to three significant figures.", "solution": "The op-amp has a single dominant pole, so its open-loop transfer is modeled as $A(s) = \\frac{A_{0}}{1 + s/\\omega_{p}}$, where $A_{0}$ is the open-loop DC gain and $\\omega_{p} = 2\\pi f_{H,OL}$ is the dominant pole. The open-loop DC gain in linear scale is obtained from the dB value using $A_{0} = 10^{A_{OL,DC}/20}$. With $A_{OL,DC} = 80$, this gives $A_{0} = 10^{80/20} = 10^{4}$. For a single-pole amplifier, the unity-gain (gain-bandwidth product) frequency is $f_{t} = A_{0} f_{H,OL}$.\n\nIn a non-inverting feedback configuration with feedback factor $\\beta$, the closed-loop transfer function is\n$$\nT(s) = \\frac{A(s)}{1 + \\beta A(s)} = \\frac{A_{0}}{(1 + s/\\omega_{p}) + \\beta A_{0}}.\n$$\nThus, the closed-loop DC gain and pole frequency are\n$$\nA_{CL,DC} = T(0) = \\frac{A_{0}}{1 + \\beta A_{0}}, \\quad \\omega_{p,CL} = \\omega_{p} (1 + \\beta A_{0}).\n$$\nFrom the DC gain relation, solve for the factor multiplying the pole:\n$$\n1 + \\beta A_{0} = \\frac{A_{0}}{A_{CL,DC}}.\n$$\nTherefore, the closed-loop -3 dB bandwidth is\n$$\nf_{H,CL} = \\frac{\\omega_{p,CL}}{2\\pi} = f_{H,OL} \\left(1 + \\beta A_{0}\\right) = f_{H,OL} \\cdot \\frac{A_{0}}{A_{CL,DC}} = \\frac{A_{0} f_{H,OL}}{A_{CL,DC}} = \\frac{f_{t}}{A_{CL,DC}}.\n$$\nSubstitute the given values: $A_{0} = 10^{4}$, $f_{H,OL} = 100$, and $A_{CL,DC} = 10$, to get\n$$\nf_{H,CL} = \\frac{10^{4} \\cdot 100}{10} = 10^{5} \\text{ Hz} = 10^{2} \\text{ kHz}.\n$$\nRounded to three significant figures in kHz, this is $1.00 \\times 10^{2}$.", "answer": "$$\\boxed{1.00 \\times 10^{2}}$$", "id": "1282465"}, {"introduction": "While the single-pole model provides a great starting point, most real-world amplifiers exhibit more complex behavior due to multiple poles in their open-loop response. For these systems, applying feedback does more than just extend the dominant pole; it repositions all poles, reshaping the entire frequency response. This practice [@problem_id:1282476] delves into designing for a second-order system to achieve a maximally flat, or Butterworth, response, which is highly desirable for its excellent signal fidelity. By carefully determining the feedback factor $\\beta$, you will learn to control the closed-loop pole locations to prevent unwanted gain peaking and ensure a stable, predictable response.", "problem": "An operational amplifier is modeled as having a frequency-dependent open-loop voltage gain, $A(s)$. The amplifier has a very large DC open-loop gain, $A_0$, and its frequency response is dominated by two identical, real poles located at an angular frequency $\\omega_p$. The open-loop transfer function is thus given by:\n$$ A(s) = \\frac{A_0}{\\left(1 + \\frac{s}{\\omega_p}\\right)^2} $$\nThis amplifier is used to build a non-inverting amplifier with a constant, frequency-independent feedback factor $\\beta$.\n\nYour task is to determine the specific conditions for a maximally flat frequency response. Find the value of the feedback factor $\\beta$ that configures the closed-loop gain to exhibit a second-order Butterworth response. Then, calculate the resulting -3dB angular frequency, $\\omega_{-3\\text{dB,CL}}$, of this Butterworth-aligned closed-loop system.\n\nExpress your answer for $\\beta$ in terms of $A_0$, and for $\\omega_{-3\\text{dB,CL}}$ in terms of $\\omega_p$. Your final answer should be a row matrix containing the value for $\\beta$ in the first column and the value for $\\omega_{-3\\text{dB,CL}}$ in the second column.", "solution": "The non-inverting closed-loop transfer function with forward path gain $A(s)$ and constant feedback factor $\\beta$ is given by the standard feedback relation\n$$\nT(s)=\\frac{V_{\\text{out}}(s)}{V_{\\text{in}}(s)}=\\frac{A(s)}{1+\\beta A(s)}.\n$$\nWith the given open-loop model\n$$\nA(s)=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p}}\\right)^{2}},\n$$\nthe closed-loop transfer becomes\n$$\nT(s)=\\frac{\\dfrac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p}}\\right)^{2}}}{1+\\beta\\,\\dfrac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p}}\\right)^{2}}}\n=\\frac{A_{0}}{\\left(1+\\frac{s}{\\omega_{p}}\\right)^{2}+\\beta A_{0}}.\n$$\nExpanding the denominator and clearing the fractional powers by multiplying numerator and denominator by $\\omega_{p}^{2}$ yields\n$$\nT(s)=\\frac{A_{0}\\,\\omega_{p}^{2}}{s^{2}+2\\omega_{p}s+\\omega_{p}^{2}\\left(1+\\beta A_{0}\\right)}.\n$$\nThis is a standard second-order low-pass form. Comparing with the canonical form\n$$\nT(s)=\\frac{K\\,\\omega_{0}^{2}}{s^{2}+2\\zeta\\omega_{0}s+\\omega_{0}^{2}},\n$$\ngives the identifications\n$$\n\\omega_{0}^{2}=\\omega_{p}^{2}\\left(1+\\beta A_{0}\\right),\\qquad 2\\zeta\\omega_{0}=2\\omega_{p}.\n$$\nHence,\n$$\n\\omega_{0}=\\omega_{p}\\sqrt{1+\\beta A_{0}},\\qquad \\zeta=\\frac{\\omega_{p}}{\\omega_{0}}=\\frac{1}{\\sqrt{1+\\beta A_{0}}}.\n$$\nFor a maximally flat (Butterworth) second-order response, the damping ratio must be\n$$\n\\zeta=\\frac{1}{\\sqrt{2}}.\n$$\nImposing this condition gives\n$$\n\\frac{1}{\\sqrt{1+\\beta A_{0}}}=\\frac{1}{\\sqrt{2}}\\;\\;\\Longrightarrow\\;\\;1+\\beta A_{0}=2\\;\\;\\Longrightarrow\\;\\;\\beta=\\frac{1}{A_{0}}.\n$$\nWith this choice, the closed-loop natural (corner) frequency becomes\n$$\n\\omega_{0}=\\omega_{p}\\sqrt{1+\\beta A_{0}}=\\omega_{p}\\sqrt{2}.\n$$\nFor a second-order Butterworth low-pass, the $-3\\,\\text{dB}$ frequency equals the natural frequency. To see this explicitly, the squared magnitude is\n$$\n\\left|T(j\\omega)\\right|^{2}=\\frac{\\left(K\\omega_{0}^{2}\\right)^{2}}{\\left(\\omega_{0}^{2}-\\omega^{2}\\right)^{2}+\\left(2\\zeta\\omega_{0}\\omega\\right)^{2}}.\n$$\nEvaluated at $\\omega=\\omega_{0}$ with $\\zeta=1/\\sqrt{2}$,\n$$\n\\left|T(j\\omega_{0})\\right|^{2}=\\frac{\\left(K\\omega_{0}^{2}\\right)^{2}}{\\left(0\\right)^{2}+\\left(2\\cdot\\frac{1}{\\sqrt{2}}\\cdot\\omega_{0}^{2}\\right)^{2}}=\\frac{K^{2}\\omega_{0}^{4}}{2\\omega_{0}^{4}}=\\frac{K^{2}}{2},\n$$\nwhich is $-3\\,\\text{dB}$ relative to the DC gain $K$. Therefore,\n$$\n\\omega_{-3\\text{dB,CL}}=\\omega_{0}=\\sqrt{2}\\,\\omega_{p}.\n$$\nThus, the required feedback factor and the resulting closed-loop $-3\\,\\text{dB}$ angular frequency are $\\beta=\\frac{1}{A_{0}}$ and $\\omega_{-3\\text{dB,CL}}=\\sqrt{2}\\,\\omega_{p}$, respectively.", "answer": "$$\\boxed{\\begin{pmatrix}\\frac{1}{A_{0}} & \\sqrt{2}\\,\\omega_{p}\\end{pmatrix}}$$", "id": "1282476"}, {"introduction": "Our analysis of bandwidth extension has so far been in the \"small-signal\" domain, where the amplifier operates linearly. However, an amplifier's performance with large output signals can be limited by an entirely different, non-linear mechanism: its internal slew rate ($SR$). This problem [@problem_id:1282459] provides a crucial practical lesson by contrasting the small-signal -3dB bandwidth, which scales with feedback, against the full-power bandwidth, which does not. This exercise will clarify why an amplifier that theoretically has a wide bandwidth might still fail to reproduce large, fast-changing signals without distortion, a key consideration in power audio and high-speed driver applications.", "problem": "An operational amplifier (op-amp) is used to construct a non-inverting amplifier. The op-amp is characterized by a very large open-loop DC gain, a unity-gain frequency $f_T = 2.0 \\text{ MHz}$, an internal slew rate ($SR$) of $1.0 \\text{ V}/\\mu s$, and a maximum symmetric output voltage swing of $V_{omax} = 10.0 \\text{ V}$. The op-amp's open-loop frequency response can be modeled by a single dominant pole.\n\nTwo different circuit configurations are considered by adjusting the feedback network:\n- **Case 1**: The closed-loop DC voltage gain is set to $G_1 = 12.0$.\n- **Case 2**: The closed-loop DC voltage gain is set to $G_2 = 60.0$.\n\nFor both cases, the amplifier is expected to operate up to its maximum output voltage swing of $V_{omax}$. Your task is to analyze how changing the closed-loop gain affects two different measures of bandwidth: the small-signal -3dB bandwidth and the full-power bandwidth.\n\nCalculate the following two dimensionless ratios:\n1.  The ratio of the small-signal -3dB bandwidth of Case 2 to that of Case 1.\n2.  The ratio of the full-power bandwidth of Case 2 to that of Case 1.\n\nPresent your two answers, corresponding to ratios (1) and (2) respectively, as a pair of numerical values. Round your final answers to three significant figures.", "solution": "The problem asks for two ratios comparing the bandwidths of a non-inverting op-amp amplifier under two different gain settings. We will analyze the small-signal bandwidth and the full-power bandwidth separately.\n\nFirst, let's analyze the small-signal -3dB bandwidth. For an op-amp with a single-pole frequency response and a large DC gain $A_0$, the open-loop gain is given by $A(s) = \\frac{A_0}{1 + s/\\omega_{p}}$, where $\\omega_{p}$ is the dominant pole frequency. The unity-gain angular frequency, $\\omega_{T} = 2\\pi f_{T}$, is related to the open-loop gain and pole by the gain-bandwidth product (GBWP): $\\omega_{T} = A_0 \\omega_{p}$.\n\nThe closed-loop gain of a non-inverting amplifier is $A_{cl}(s) = \\frac{A(s)}{1 + \\beta A(s)}$, where $\\beta$ is the feedback factor. Substituting the expression for $A(s)$:\n$$ A_{cl}(s) = \\frac{\\frac{A_0}{1+s/\\omega_{p}}}{1 + \\beta \\frac{A_0}{1+s/\\omega_{p}}} = \\frac{A_0}{1 + s/\\omega_{p} + \\beta A_0} = \\frac{A_0}{1 + \\beta A_0} \\frac{1}{1 + \\frac{s}{\\omega_{p}(1+\\beta A_0)}} $$\nThe closed-loop DC gain is $G_{cl} = \\frac{A_0}{1+\\beta A_0}$. Since $A_0$ is very large, $G_{cl} \\approx \\frac{A_0}{\\beta A_0} = \\frac{1}{\\beta}$.\nThe closed-loop -3dB angular bandwidth is $\\omega_{3dB} = \\omega_{p}(1+\\beta A_0)$. Again, for large $A_0$, this simplifies to $\\omega_{3dB} \\approx \\omega_{p} \\beta A_0 = \\beta (A_0 \\omega_{p}) = \\beta \\omega_{T}$.\nUsing the relation $G_{cl} \\approx 1/\\beta$, we can express the small-signal bandwidth in terms of the closed-loop gain:\n$$ \\omega_{3dB} \\approx \\frac{\\omega_{T}}{G_{cl}} $$\nThis shows that for a fixed unity-gain frequency, the small-signal bandwidth is inversely proportional to the closed-loop gain.\n\nNow we can calculate this bandwidth for our two cases.\nFor Case 1: $G_1 = 12.0$. The small-signal bandwidth is $\\omega_{3dB,1} = \\frac{\\omega_{T}}{G_1}$.\nFor Case 2: $G_2 = 60.0$. The small-signal bandwidth is $\\omega_{3dB,2} = \\frac{\\omega_{T}}{G_2}$.\n\nThe first ratio required is the ratio of the small-signal bandwidth of Case 2 to Case 1:\n$$ \\text{Ratio}_1 = \\frac{\\omega_{3dB,2}}{\\omega_{3dB,1}} = \\frac{\\omega_{T} / G_2}{\\omega_{T} / G_1} = \\frac{G_1}{G_2} $$\nSubstituting the given gain values:\n$$ \\text{Ratio}_1 = \\frac{12.0}{60.0} = 0.2 $$\n\nNext, let's analyze the full-power bandwidth ($FPBW$). This bandwidth is not determined by the small-signal frequency response but by the op-amp's slew rate ($SR$). The slew rate is the maximum rate of change of the op-amp's output voltage. For a sinusoidal output signal $v_{o}(t) = V_{amp} \\sin(\\omega t)$, the rate of change is $\\frac{dv_{o}}{dt} = \\omega V_{amp} \\cos(\\omega t)$.\nThe maximum rate of change occurs when $\\cos(\\omega t) = 1$, so $(\\frac{dv_{o}}{dt})_{max} = \\omega V_{amp}$.\nTo avoid slew-induced distortion, this maximum rate of change must not exceed the op-amp's slew rate:\n$$ \\omega V_{amp} \\le SR $$\nThe full-power bandwidth is defined as the maximum frequency $\\omega_{FPBW}$ at which the op-amp can deliver its maximum possible output voltage swing, $V_{omax}$, without being limited by the slew rate. Thus, we set $V_{amp} = V_{omax}$ and solve for the frequency at the limit:\n$$ \\omega_{FPBW} = \\frac{SR}{V_{omax}} $$\nThe problem states the slew rate is $SR = 1.0 \\text{ V}/\\mu s = 1.0 \\times 10^6 \\text{ V/s}$ and the maximum output swing is $V_{omax} = 10.0 \\text{ V}$.\nFrom the derived formula, the full-power bandwidth depends only on the op-amp's internal slew rate and the specified maximum output amplitude. It does not depend on the feedback factor $\\beta$ or the closed-loop gain $G_{cl}$.\n\nTherefore, the full-power bandwidth is the same for both Case 1 and Case 2.\nFor Case 1: $\\omega_{FPBW,1} = \\frac{SR}{V_{omax}}$.\nFor Case 2: $\\omega_{FPBW,2} = \\frac{SR}{V_{omax}}$.\n\nThe second ratio required is the ratio of the full-power bandwidth of Case 2 to Case 1:\n$$ \\text{Ratio}_2 = \\frac{\\omega_{FPBW,2}}{\\omega_{FPBW,1}} = \\frac{SR/V_{omax}}{SR/V_{omax}} = 1 $$\n\nThe two calculated ratios are 0.2 and 1. We need to present them rounded to three significant figures.\nRatio 1: $0.200$\nRatio 2: $1.00$\n\nThe final answer is the pair of these two values.", "answer": "$$\\boxed{\\begin{pmatrix} 0.200 & 1.00 \\end{pmatrix}}$$", "id": "1282459"}]}
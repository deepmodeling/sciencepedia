{"hands_on_practices": [{"introduction": "The Voltage-Controlled Oscillator (VCO) is the tunable heart of any Phase-Locked Loop. Its core function is to generate an output frequency that is proportional to an input control voltage. The most fundamental parameter that describes this relationship is the VCO gain, $K_{VCO}$. This first exercise demystifies this crucial parameter by guiding you through its calculation from basic experimental data, a common task in characterizing real-world components. [@problem_id:1325076]", "problem": "An electronics student is characterizing a key component for a custom radio receiver: a Voltage-Controlled Oscillator (VCO). A VCO is an electronic oscillator whose output frequency is determined by an input DC voltage, often called the control voltage. The student performs an experiment and records the following data points, assuming the VCO's response is linear over this operating range:\n\nWhen the control voltage is set to a low value, $V_{low}$, the oscillator produces a stable sinusoidal output with a frequency of $f_{low}$.\nWhen the control voltage is increased to a high value, $V_{high}$, the output frequency shifts to $f_{high}$.\n\nBased on these two measurements, determine the gain of the oscillator, denoted as $K_{VCO}$. Express your answer as a symbolic expression in terms of $V_{low}$, $V_{high}$, $f_{low}$, and $f_{high}$. The gain must be provided in units of radians per second per volt (rad/s/V).", "solution": "Assume a linear VCO characteristic between control voltage and output frequency. Let the instantaneous frequency in hertz be modeled as $f(V)=\\alpha+\\beta V$, so the instantaneous angular frequency is $\\omega(V)=2\\pi f(V)=2\\pi\\alpha+2\\pi\\beta V$.\n\nBy definition, the VCO gain is the sensitivity of angular frequency to control voltage:\n$$\nK_{VCO}=\\frac{d\\omega}{dV}.\n$$\nFrom the linear model, this is\n$$\nK_{VCO}=2\\pi\\frac{df}{dV}=2\\pi\\beta.\n$$\nUsing the two measured points $(V_{low},f_{low})$ and $(V_{high},f_{high})$, the slope in frequency is\n$$\n\\frac{df}{dV}=\\frac{f_{high}-f_{low}}{V_{high}-V_{low}}.\n$$\nTherefore,\n$$\nK_{VCO}=2\\pi\\frac{f_{high}-f_{low}}{V_{high}-V_{low}}.\n$$\nThis has units of radians per second per volt, since $2\\pi(f_{high}-f_{low})$ yields a change in angular frequency (rad/s) and division by voltage yields rad/s/V.", "answer": "$$\\boxed{2\\pi\\,\\frac{f_{high}-f_{low}}{V_{high}-V_{low}}}$$", "id": "1325076"}, {"introduction": "A Phase-Locked Loop works by continuously comparing the phase of its output signal to a reference signal. This critical task is performed by the phase detector (PD). In this exercise, we explore how a simple digital Exclusive-OR (XOR) gate can function as an effective phase detector, converting a phase difference between two square waves into a proportional DC voltage. Understanding this mechanism is key to grasping how the PLL's feedback loop operates. [@problem_id:1325036]", "problem": "An Exclusive-OR (XOR) logic gate is utilized as a phase detector, a fundamental component in many digital Phase-Locked Loop (PLL) systems. This gate is fed by two signals, a reference signal $V_{ref}$ and a voltage-controlled oscillator signal $V_{vco}$. Both signals are perfect square waves with a 50% duty cycle and an identical frequency, $f$. The logic levels of the XOR gate's output, $V_{out}$, correspond to a voltage $V_{OH}$ for a logical high and a voltage $V_{OL}$ for a logical low. In a particular state of operation, the $V_{vco}$ signal is observed to lag the $V_{ref}$ signal by a constant phase difference of $\\phi = \\frac{\\pi}{4}$ radians.\n\nAssuming the subsequent loop filter perfectly extracts the DC component of $V_{out}$, determine the expression for this average DC output voltage, $V_{out,avg}$, in terms of $V_{OH}$ and $V_{OL}$.", "solution": "The problem asks for the average DC output voltage of an XOR phase detector given a specific phase difference between its two square wave inputs.\n\nThe average voltage, $V_{out,avg}$, of a periodic signal $V_{out}(t)$ over one period $T$ is defined as:\n$$ V_{out,avg} = \\frac{1}{T} \\int_{0}^{T} V_{out}(t) dt $$\n\nThe output of an Exclusive-OR (XOR) gate is high if and only if its inputs are different. In terms of voltage levels, this means:\n- $V_{out}(t) = V_{OH}$ when $V_{ref}(t) \\neq V_{vco}(t)$\n- $V_{out}(t) = V_{OL}$ when $V_{ref}(t) = V_{vco}(t)$\n\nSince the output voltage $V_{out}(t)$ is piecewise constant, the integral for the average voltage can be simplified into a weighted sum of the voltage levels, where the weights are the fractional durations (duty cycles) for which the output stays at each level.\n$$ V_{out,avg} = D_{high} \\cdot V_{OH} + D_{low} \\cdot V_{OL} $$\nHere, $D_{high}$ is the duty cycle of the high output state (inputs are different), and $D_{low}$ is the duty cycle of the low output state (inputs are the same). By definition, $D_{high} + D_{low} = 1$.\n\nOur goal is to find $D_{high}$, which is the fraction of the period $T$ during which the input signals are not equal. Let's analyze the waveforms over one period. A phase difference of $\\phi$ between two signals with period $T$ corresponds to a time shift of $\\Delta t = \\frac{\\phi}{2\\pi} T$.\n\nThe inputs are 50% duty cycle square waves. Let's set the rising edge of the reference signal $V_{ref}$ to be at $t=0$.\n- $V_{ref}$ is high for $0 \\leq t < T/2$.\n- $V_{ref}$ is low for $T/2 \\leq t < T$.\n\nThe $V_{vco}$ signal lags $V_{ref}$ by a phase $\\phi$, so it is shifted to the right by a time $\\Delta t$.\n- $V_{vco}$ is high for $\\Delta t \\leq t < T/2 + \\Delta t$.\n- $V_{vco}$ is low for $T/2 + \\Delta t \\leq t < T + \\Delta t$.\n\nThe inputs will be different during two intervals in each period:\n1.  From $t=0$ until $V_{vco}$ also goes high. This interval is from $t=0$ to $t=\\Delta t$. Here, $V_{ref}$ is high and $V_{vco}$ is low. The duration is $\\Delta t$.\n2.  From $t=T/2$ (when $V_{ref}$ goes low) until $V_{vco}$ also goes low. This interval is from $t=T/2$ to $t=T/2 + \\Delta t$. Here, $V_{ref}$ is low and $V_{vco}$ is high. The duration is again $\\Delta t$.\n\nThe total duration within one period $T$ for which the inputs are different is the sum of the durations of these two intervals:\n$$ \\text{Total time different} = \\Delta t + \\Delta t = 2\\Delta t $$\nSubstituting the expression for $\\Delta t$:\n$$ \\text{Total time different} = 2 \\left( \\frac{\\phi}{2\\pi} T \\right) = \\frac{\\phi}{\\pi} T $$\nThe duty cycle for the high output state is this total time divided by the period $T$:\n$$ D_{high} = \\frac{(\\phi/\\pi) T}{T} = \\frac{\\phi}{\\pi} $$\nThe duty cycle for the low output state is:\n$$ D_{low} = 1 - D_{high} = 1 - \\frac{\\phi}{\\pi} $$\nNow we can write the general expression for the average output voltage of an XOR phase detector (for $0 \\leq \\phi \\leq \\pi$):\n$$ V_{out,avg} = \\left(\\frac{\\phi}{\\pi}\\right) V_{OH} + \\left(1 - \\frac{\\phi}{\\pi}\\right) V_{OL} $$\nThe problem specifies a phase difference of $\\phi = \\frac{\\pi}{4}$ radians. We substitute this value into our general expression:\n$$ D_{high} = \\frac{\\pi/4}{\\pi} = \\frac{1}{4} $$\n$$ D_{low} = 1 - \\frac{1}{4} = \\frac{3}{4} $$\nThe average output voltage is therefore:\n$$ V_{out,avg} = \\left(\\frac{1}{4}\\right) V_{OH} + \\left(\\frac{3}{4}\\right) V_{OL} $$\nThis can be written as a single fraction:\n$$ V_{out,avg} = \\frac{V_{OH} + 3V_{OL}}{4} $$", "answer": "$$\\boxed{\\frac{V_{OH} + 3 V_{OL}}{4}}$$", "id": "1325036"}, {"introduction": "While digital logic provides a straightforward way to detect phase, high-frequency analog systems often rely on more sophisticated circuits like the Gilbert cell mixer for their superior performance. This versatile circuit functions as an excellent analog multiplier and, consequently, as a high-performance phase detector. This practice challenges you to analyze the Gilbert cell at the circuit level to derive its phase detector gain, $K_{PD}$, from fundamental device parameters. This exercise will provide deeper insight into the design of integrated RF circuits for communications. [@problem_id:1325024]", "problem": "A classic Gilbert cell multiplier, a cornerstone of radio frequency integrated circuits, is employed as a phase detector within a high-frequency Phase-Locked Loop (PLL). The upper switching quad of the cell is driven by a large-signal square-wave local oscillator (LO) signal, which ensures the transistors in the quad operate as ideal switches. The lower differential pair is driven by a small sinusoidal radio frequency (RF) input signal, $v_{RF}(t)$, which has an amplitude of $V_{RF}$ and is nearly synchronous with the LO signal.\n\nThe circuit is biased with an ideal tail current source of magnitude $I_{EE}$ and uses two load resistors, each with resistance $R_L$. Let $g_m$ denote the small-signal transconductance of the RF input differential pair. The amplitude of the RF input, $V_{RF}$, is carefully chosen such that the peak amplitude of the resulting signal component of the differential current from the input pair, $\\Delta i_{c,peak}$, is a fraction $\\alpha$ of the total tail current. That is, $\\Delta i_{c,peak} = \\alpha I_{EE}$. You may assume the input pair operates within its linear region, where the differential current is well-approximated by $\\Delta i_c(t) = g_m v_{RF}(t)$.\n\nYour task is to derive an expression for the phase detector gain, $K_{PD}$. This gain is defined as the magnitude of the rate of change of the low-pass filtered (i.e., DC average) differential output voltage with respect to the phase difference $\\Delta\\phi$ (in radians) between the RF and LO signals. The gain should be evaluated at the point of maximum sensitivity, which occurs for small phase differences ($\\Delta\\phi \\approx 0$).\n\nExpress your final answer as a closed-form analytic expression in terms of the tail current $I_{EE}$, the load resistance $R_L$, and the fraction $\\alpha$.", "solution": "The problem asks for the phase detector gain, $K_{PD}$, of a Gilbert cell mixer. We are given the relationship between the peak signal current and the tail current, which will allow us to find an expression for $K_{PD}$ in terms of $I_{EE}$, $R_L$, and $\\alpha$.\n\nStep 1: Express the differential output voltage.\nThe differential output voltage, $v_{out,diff}(t)$, is given by the differential output current, $i_{out,diff}(t)$, flowing through the load resistors $R_L$. Specifically, $v_{out,diff}(t) = -i_{out,diff}(t) \\cdot R_L$.\n\nStep 2: Model the differential output current.\nThe Gilbert cell multiplies the current from the lower differential pair with a switching function generated by the upper quad. The differential current from the input pair is $\\Delta i_c(t)$. The upper quad, driven by a large LO square wave, effectively multiplies $\\Delta i_c(t)$ by a switching function $S_{LO}(t)$ that alternates between +1 and -1 at the LO frequency, $\\omega$.\nSo, $i_{out,diff}(t) = \\Delta i_c(t) \\cdot S_{LO}(t)$.\n\nStep 3: Define the input signals and intermediate currents.\nLet the RF input signal be $v_{RF}(t) = V_{RF} \\sin(\\omega t + \\Delta\\phi)$, where $\\Delta\\phi$ is the phase difference relative to the LO.\nGiven the linear approximation, the differential current from the input pair is:\n$$\n\\Delta i_c(t) = g_m v_{RF}(t) = g_m V_{RF} \\sin(\\omega t + \\Delta\\phi)\n$$\nThe switching function $S_{LO}(t)$ is a square wave with frequency $\\omega$. To find the DC component of the mixed output, we only need to consider the fundamental component of the square wave's Fourier series. Let's align the LO for simplicity, modeling its fundamental as a cosine:\n$$\nS_{LO}(t) \\approx \\frac{4}{\\pi} \\cos(\\omega t)\n$$\n\nStep 4: Calculate the time-dependent output voltage.\nSubstituting these expressions into the equation for the differential output voltage:\n$$\nv_{out,diff}(t) = -R_L \\cdot \\left[ g_m V_{RF} \\sin(\\omega t + \\Delta\\phi) \\right] \\cdot S_{LO}(t)\n$$\nUsing the fundamental of the switching function for the mixing operation:\n$$\nv_{out,diff}(t) \\approx -R_L \\cdot g_m V_{RF} \\sin(\\omega t + \\Delta\\phi) \\cdot \\frac{4}{\\pi} \\cos(\\omega t)\n$$\n$$\nv_{out,diff}(t) \\approx -\\frac{4 g_m V_{RF} R_L}{\\pi} \\sin(\\omega t + \\Delta\\phi) \\cos(\\omega t)\n$$\n\nStep 5: Find the low-pass filtered (DC) output voltage.\nWe use the product-to-sum trigonometric identity: $\\sin(A)\\cos(B) = \\frac{1}{2}[\\sin(A+B) + \\sin(A-B)]$.\nLet $A = \\omega t + \\Delta\\phi$ and $B = \\omega t$.\n$$\nv_{out,diff}(t) \\approx -\\frac{4 g_m V_{RF} R_L}{\\pi} \\cdot \\frac{1}{2}[\\sin(2\\omega t + \\Delta\\phi) + \\sin(\\Delta\\phi)]\n$$\n$$\nv_{out,diff}(t) \\approx -\\frac{2 g_m V_{RF} R_L}{\\pi}[\\sin(2\\omega t + \\Delta\\phi) + \\sin(\\Delta\\phi)]\n$$\nA low-pass filter will remove the high-frequency term at $2\\omega$, leaving only the DC component. The average or DC output voltage, $\\bar{v}_{out,diff}$, is:\n$$\n\\bar{v}_{out,diff} = -\\frac{2 g_m V_{RF} R_L}{\\pi} \\sin(\\Delta\\phi)\n$$\n\nStep 6: Calculate the phase detector gain $K_{PD}$.\nThe gain $K_{PD}$ is the magnitude of the derivative of the DC output voltage with respect to the phase difference $\\Delta\\phi$, evaluated at $\\Delta\\phi=0$.\n$$\n\\frac{d\\bar{v}_{out,diff}}{d(\\Delta\\phi)} = \\frac{d}{d(\\Delta\\phi)}\\left(-\\frac{2 g_m V_{RF} R_L}{\\pi} \\sin(\\Delta\\phi)\\right) = -\\frac{2 g_m V_{RF} R_L}{\\pi} \\cos(\\Delta\\phi)\n$$\nEvaluating the magnitude at $\\Delta\\phi = 0$:\n$$\nK_{PD} = \\left| \\frac{d\\bar{v}_{out,diff}}{d(\\Delta\\phi)} \\right|_{\\Delta\\phi=0} = \\left| -\\frac{2 g_m V_{RF} R_L}{\\pi} \\cos(0) \\right| = \\frac{2 g_m V_{RF} R_L}{\\pi}\n$$\n\nStep 7: Relate the gain to the given parameters $I_{EE}$, $R_L$, and $\\alpha$.\nThe problem states that the peak amplitude of the signal component of the differential current is a fraction $\\alpha$ of the tail current. This peak current is:\n$$\n\\Delta i_{c,peak} = \\text{max}|\\Delta i_c(t)| = \\text{max}|g_m V_{RF} \\sin(\\omega t + \\Delta\\phi)| = g_m V_{RF}\n$$\nWe are given the condition $\\Delta i_{c,peak} = \\alpha I_{EE}$.\nTherefore, we have the equality:\n$$\ng_m V_{RF} = \\alpha I_{EE}\n$$\nNow, we substitute this result back into our expression for $K_{PD}$:\n$$\nK_{PD} = \\frac{2 (g_m V_{RF}) R_L}{\\pi} = \\frac{2 (\\alpha I_{EE}) R_L}{\\pi}\n$$\n\nThis is the final expression for the phase detector gain in terms of the specified parameters.", "answer": "$$\\boxed{\\frac{2 \\alpha I_{EE} R_{L}}{\\pi}}$$", "id": "1325024"}]}
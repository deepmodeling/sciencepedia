{"hands_on_practices": [{"introduction": "The most fundamental application of an op-amp comparator is to determine whether an input signal is above or below a specific reference voltage. This exercise puts that principle into practice by guiding you through the design of a temperature monitoring circuit, a common real-world application. [@problem_id:1322203] You will apply the voltage divider rule and fundamental comparator principles to select a set of resistors that precisely trigger an alarm at a desired temperature threshold.", "problem": "A temperature monitoring circuit for an electronics enclosure uses an ideal operational amplifier (op-amp) to control a cooling fan. The circuit is designed to turn the fan on when the internal temperature exceeds a specific threshold.\n\nThe temperature is sensed by a Negative Temperature Coefficient (NTC) thermistor. Within the circuit's intended operating range, the thermistor's resistance, $R_T$, is accurately described by the linear model $R_T(T) = R_0 - k(T - T_0)$, where $T$ is the temperature in degrees Celsius. The known parameters are $R_0 = 12.0 \\text{ k}\\Omega$ at a reference temperature of $T_0 = 25.0^\\circ\\text{C}$, and the temperature coefficient is $k = 400.0 \\, \\Omega/^\\circ\\text{C}$.\n\nThe sensing part of the circuit consists of a voltage divider powered by a precision voltage supply of $V_S = +5.00 \\text{ V}$. The thermistor $R_T$ is connected between the supply $V_S$ and a node A, and a fixed resistor $R_1$ is connected between node A and ground. The voltage at node A, denoted as $V_{sense}$, is fed into the non-inverting (+) input of the op-amp.\n\nThe reference voltage, $V_{ref}$, is provided to the inverting (-) input of the op-amp. This voltage is generated by a second voltage divider, also powered by $V_S$. This reference divider consists of a resistor $R_2$ connected between $V_S$ and a node B, and a resistor $R_3$ connected between node B and ground. The voltage at node B serves as $V_{ref}$.\n\nThe circuit is subject to the following design specifications:\n1.  The fan must activate when the temperature rises to the trip point, $T_{trip} = 50.0^\\circ\\text{C}$.\n2.  The total current drawn from the supply $V_S$ by the reference divider (containing $R_2$ and $R_3$) must be precisely $I_{ref\\_div} = 0.250 \\text{ mA}$.\n3.  The total current drawn from the supply $V_S$ by the sensor divider (containing $R_T$ and $R_1$) when the system is at the reference temperature $T_0 = 25.0^\\circ\\text{C}$ must be $I_{sense\\_div} = 0.200 \\text{ mA}$.\n\nDetermine the required resistance values for $R_1$, $R_2$, and $R_3$. Provide your answers for ($R_1$, $R_2$, $R_3$) in this specific order, expressed in kilo-ohms ($\\text{k}\\Omega$) and rounded to three significant figures.", "solution": "The thermistor resistance is modeled linearly as $R_{T}(T) = R_{0} - k\\left(T - T_{0}\\right)$, with $R_{0} = 12.0 \\text{ k}\\Omega$, $T_{0} = 25.0$ degrees Celsius, and $k = 400.0 \\ \\Omega/\\text{degree Celsius}$. At the trip temperature $T_{trip} = 50.0$ degrees Celsius, the thermistor resistance is\n$$\nR_{T}(T_{trip}) = R_{0} - k\\left(T_{trip} - T_{0}\\right).\n$$\nSubstituting the given values,\n$$\nR_{T}(T_{trip}) = 12.0 \\times 10^{3} - 400.0\\left(50.0 - 25.0\\right) = 12.0 \\times 10^{3} - 10.0 \\times 10^{3} = 2.0 \\times 10^{3} \\ \\Omega.\n$$\n\nThe sensor divider consists of $R_{T}$ (top) and $R_{1}$ (bottom) across $V_{S} = 5.00 \\ \\text{V}$. The specified current at $T_{0}$ is $I_{sense\\_div} = 0.200 \\ \\text{mA}$. By Ohm’s law,\n$$\nI_{sense\\_div} = \\frac{V_{S}}{R_{T}(T_{0}) + R_{1}} \\quad \\Rightarrow \\quad R_{T}(T_{0}) + R_{1} = \\frac{V_{S}}{I_{sense\\_div}}.\n$$\nUsing $R_{T}(T_{0}) = R_{0} = 12.0 \\times 10^{3} \\ \\Omega$,\n$$\nR_{1} = \\frac{V_{S}}{I_{sense\\_div}} - R_{0} = \\frac{5.00}{0.200 \\times 10^{-3}} - 12.0 \\times 10^{3} = 25.0 \\times 10^{3} - 12.0 \\times 10^{3} = 13.0 \\times 10^{3} \\ \\Omega.\n$$\n\nThe sensor node voltage is given by the voltage divider relation\n$$\nV_{sense}(T) = V_{S} \\frac{R_{1}}{R_{T}(T) + R_{1}}.\n$$\nFor an ideal op-amp used as a comparator, the switching threshold occurs when $V_{sense}(T_{trip}) = V_{ref}$. Therefore,\n$$\nV_{ref} = V_{S} \\frac{R_{1}}{R_{T}(T_{trip}) + R_{1}}.\n$$\n\nThe reference divider consists of $R_{2}$ (top) and $R_{3}$ (bottom) across $V_{S}$. Its current is specified as $I_{ref\\_div} = 0.250 \\ \\text{mA}$, so by Ohm’s law,\n$$\nI_{ref\\_div} = \\frac{V_{S}}{R_{2} + R_{3}} \\quad \\Rightarrow \\quad R_{2} + R_{3} = \\frac{V_{S}}{I_{ref\\_div}} = \\frac{5.00}{0.250 \\times 10^{-3}} = 20.0 \\times 10^{3} \\ \\Omega.\n$$\nThe reference voltage is\n$$\nV_{ref} = V_{S} \\frac{R_{3}}{R_{2} + R_{3}}.\n$$\nEquating $V_{ref}$ to $V_{sense}(T_{trip})$ and canceling $V_{S}$ gives\n$$\n\\frac{R_{3}}{R_{2} + R_{3}} = \\frac{R_{1}}{R_{T}(T_{trip}) + R_{1}}.\n$$\nSubstitute $R_{1} = 13.0 \\times 10^{3} \\ \\Omega$ and $R_{T}(T_{trip}) = 2.0 \\times 10^{3} \\ \\Omega$:\n$$\n\\frac{R_{3}}{R_{2} + R_{3}} = \\frac{13.0 \\times 10^{3}}{2.0 \\times 10^{3} + 13.0 \\times 10^{3}} = \\frac{13}{15}.\n$$\nWith $R_{2} + R_{3} = 20.0 \\times 10^{3} \\ \\Omega$, it follows that\n$$\nR_{3} = \\left(R_{2} + R_{3}\\right)\\frac{13}{15} = 20.0 \\times 10^{3} \\cdot \\frac{13}{15} = \\frac{260}{15} \\times 10^{3} \\ \\Omega = 17.333\\ldots \\times 10^{3} \\ \\Omega,\n$$\nand\n$$\nR_{2} = \\left(R_{2} + R_{3}\\right) - R_{3} = 20.0 \\times 10^{3} - 17.333\\ldots \\times 10^{3} = 2.666\\ldots \\times 10^{3} \\ \\Omega.\n$$\n\nExpressed in kilo-ohms and rounded to three significant figures, the required resistances are $R_{1} = 13.0$, $R_{2} = 2.67$, and $R_{3} = 17.3$.", "answer": "$$\\boxed{\\begin{pmatrix} 13.0  2.67  17.3 \\end{pmatrix}}$$", "id": "1322203"}, {"introduction": "While simple comparators are effective, they are highly susceptible to noise near the switching threshold, which can cause the output to oscillate or \"chatter.\" The Schmitt trigger solves this by introducing hysteresis—a gap between the high-going and low-going trip points, which provides noise immunity. [@problem_id:1322180] This practice challenges you to analyze an inverting Schmitt trigger, calculating both the hysteresis width ($V_W$) and the center voltage ($V_C$) of its transfer characteristic, while also accounting for practical considerations like asymmetric op-amp saturation voltages and a non-zero reference voltage.", "problem": "An inverting Schmitt trigger is constructed using a non-ideal operational amplifier (op-amp) and a positive feedback network. The input signal, $V_{in}$, is connected directly to the inverting input terminal ($V_-$) of the op-amp. The positive feedback network is connected to the non-inverting input terminal ($V_+$). This network consists of a resistor $R_1$ connected between the op-amp's output ($V_{out}$) and the non-inverting terminal ($V_+$), and a second resistor $R_2$ connected between the non-inverting terminal ($V_+$) and a stable DC reference voltage, $V_{ref}$.\n\nThe op-amp is powered in a way that results in asymmetric saturation voltages. The output voltage saturates at a positive voltage $V_{sat+} = +13.5 \\text{ V}$ and a negative voltage $V_{sat-} = -11.5 \\text{ V}$. The circuit is built with the following component values: $R_1 = 30.0 \\text{ k}\\Omega$, $R_2 = 10.0 \\text{ k}\\Omega$, and $V_{ref} = 2.50 \\text{ V}$.\n\nBased on this configuration, calculate the center voltage ($V_C$) and the hysteresis width ($V_W$) of the trigger's transfer characteristic. Present your final answer as a single row matrix containing the numerical values for the center voltage and hysteresis width, in that order, i.e., $\\begin{pmatrix} V_C  V_W \\end{pmatrix}$. The values should be expressed in Volts (V). Round your final numerical answers to three significant figures.", "solution": "In an inverting Schmitt trigger with the inverting input tied to $V_{in}$ and the non-inverting input $V_{+}$ driven by a two-source resistive network from $V_{out}$ and $V_{ref}$, the node $V_{+}$ is determined by nodal analysis (ideal input draws no current). Applying KCL at $V_{+}$ gives\n$$\n\\frac{V_{+}-V_{out}}{R_{1}}+\\frac{V_{+}-V_{ref}}{R_{2}}=0,\n$$\nwhich solves to\n$$\nV_{+}=\\frac{R_{2}V_{out}+R_{1}V_{ref}}{R_{1}+R_{2}}.\n$$\nThe op-amp switches when $V_{-}=V_{+}$, and since $V_{-}=V_{in}$, the switching thresholds are the values of $V_{in}$ equal to $V_{+}$ under each saturated output state:\n$$\nV_{TU}=\\frac{R_{2}V_{sat+}+R_{1}V_{ref}}{R_{1}+R_{2}},\\qquad\nV_{TL}=\\frac{R_{2}V_{sat-}+R_{1}V_{ref}}{R_{1}+R_{2}}.\n$$\nThe hysteresis width and center are\n$$\nV_{W}=V_{TU}-V_{TL}=\\frac{R_{2}}{R_{1}+R_{2}}\\left(V_{sat+}-V_{sat-}\\right),\n$$\n$$\nV_{C}=\\frac{V_{TU}+V_{TL}}{2}=\\frac{R_{2}\\left(V_{sat+}+V_{sat-}\\right)+2R_{1}V_{ref}}{2\\left(R_{1}+R_{2}\\right)}.\n$$\nSubstitute $R_{1}=30.0$, $R_{2}=10.0$, $V_{ref}=2.50$, $V_{sat+}=13.5$, $V_{sat-}=-11.5$. First compute the ratios:\n$$\n\\frac{R_{2}}{R_{1}+R_{2}}=\\frac{10.0}{40.0}=0.25,\\qquad \\frac{R_{1}}{R_{1}+R_{2}}=\\frac{30.0}{40.0}=0.75.\n$$\nThen the thresholds are\n$$\nV_{TU}=0.25\\cdot 13.5+0.75\\cdot 2.50=3.375+1.875=5.25,\n$$\n$$\nV_{TL}=0.25\\cdot(-11.5)+0.75\\cdot 2.50=-2.875+1.875=-1.00.\n$$\nHence\n$$\nV_{W}=5.25-(-1.00)=6.25,\\qquad V_{C}=\\frac{5.25+(-1.00)}{2}=2.125.\n$$\nRounding to three significant figures gives $V_{C}=2.13$ and $V_{W}=6.25$.", "answer": "$$\\boxed{\\begin{pmatrix} 2.13  6.25 \\end{pmatrix}}$$", "id": "1322180"}, {"introduction": "Building upon the concept of hysteresis, some applications require an asymmetric response, where the conditions for a low-to-high transition are different from those for a high-to-low transition. This advanced problem explores a clever and practical method for achieving this by incorporating a non-linear component—a diode—into the positive feedback loop. [@problem_id:1322166] Analyzing this circuit will deepen your understanding of how to create customized, state-dependent transfer characteristics for specialized comparator applications and highlights the versatility of simple components in analog design.", "problem": "An operational amplifier is configured as a comparator with positive feedback to create hysteresis. The op-amp is considered ideal, with infinite input impedance and zero output impedance, but its output voltage $V_{out}$ is limited by saturation levels of $\\pm V_{sat}$.\n\nThe circuit is constructed as follows:\n- The inverting input terminal ($V_-$) is connected to a stable DC voltage source, setting a reference voltage $V_{ref}$.\n- The non-inverting input terminal, which we will call node $P$, acts as a summing point.\n- An input resistor $R_1$ connects the external input signal $V_{in}$ to node $P$.\n- A feedback path from the output $V_{out}$ to node $P$ consists of a feedback resistor $R_2$ in series with a diode $D$. The diode's cathode is connected to the op-amp's output, and its anode is connected to one end of $R_2$. The other end of $R_2$ connects to node $P$.\n\nThe diode $D$ is modeled with a constant forward voltage drop of $V_D$ when it is conducting and acts as an open circuit when it is reverse-biased.\n\nThe component and parameter values are:\n$R_1 = 10.0 \\text{ k}\\Omega$\n$R_2 = 47.0 \\text{ k}\\Omega$\n$V_{ref} = 1.50 \\text{ V}$\n$V_{sat} = 13.0 \\text{ V}$\n$V_D = 0.70 \\text{ V}$\n\nDetermine the two input voltage levels at which the output switches state. These levels are known as the upper trip point (the input voltage causing a low-to-high output transition) and the lower trip point (the input voltage causing a high-to-low output transition).\n\nPresent your final answer as a row matrix containing two values, in the order [Upper Trip Point, Lower Trip Point]. Express both values in volts, rounded to three significant figures.", "solution": "The ideal op-amp comparator switches state when the non-inverting input node voltage equals the inverting input reference, so the switching condition is $V_{P}=V_{ref}$. The output state determines whether the diode conducts and thus whether positive feedback through $R_{2}$ is present.\n\nWhen $V_{out}=+V_{sat}$ (high), the diode’s cathode is at a higher potential than its anode; it is reverse-biased and open. Then node $P$ is connected only to $V_{in}$ through $R_{1}$, and with no input bias current, $V_{P}=V_{in}$. The high-to-low transition (lower trip point) occurs when $V_{P}=V_{ref}$, hence\n$$V_{in,\\text{LTP}}=V_{ref}.$$\n\nWhen $V_{out}=-V_{sat}$ (low), the diode is forward-biased. With the constant-drop model, the diode anode (the end of $D$ connected to $R_{2}$) is at\n$$V_{A}=V_{out}+V_{D}=-V_{sat}+V_{D}.$$\nNode $P$ is connected to two sources via $R_{1}$ and $R_{2}$, and no current flows into the op-amp input, so KCL at $P$ gives\n$$(V_{P}-V_{in})/R_{1}+(V_{P}-V_{A})/R_{2}=0.$$\nAt the low-to-high transition (upper trip point), $V_{P}=V_{ref}$ while the output is still low, so\n$$\\frac{V_{ref}-V_{in}}{R_{1}}+\\frac{V_{ref}-(-V_{sat}+V_{D})}{R_{2}}=0.$$\nSolving for $V_{in}$,\n$$V_{in,\\text{UTP}}=V_{ref}+\\frac{R_{1}}{R_{2}}\\bigl(V_{ref}+V_{sat}-V_{D}\\bigr).$$\n\nSubstituting the given values,\n$$V_{in,\\text{UTP}}=1.50+\\frac{10.0}{47.0}\\bigl(1.50+13.0-0.70\\bigr)=1.50+\\frac{10.0}{47.0}\\times 13.80\\approx 4.436\\ \\text{V},$$\n$$V_{in,\\text{LTP}}=1.50\\ \\text{V}.$$\nRounded to three significant figures, the trip points are $4.44\\ \\text{V}$ (upper) and $1.50\\ \\text{V}$ (lower).", "answer": "$$\\boxed{\\begin{pmatrix}4.44  1.50\\end{pmatrix}}$$", "id": "1322166"}]}
{"hands_on_practices": [{"introduction": "A \"rail-to-rail\" input stage is essential for amplifiers that must process signals near the power supply voltages. To achieve this, designers often use complementary NMOS and PMOS differential pairs. This practice guides you through calculating the lower limit of the input common-mode range ($V_{ICM,min}$), which is determined by the NMOS pair. By working through this problem [@problem_id:1327856], you will develop a concrete understanding of how transistor-level parameters, such as threshold voltage and required overdrive voltages, directly translate into the high-level performance specifications found in an op-amp datasheet.", "problem": "An operational amplifier is being designed with a complementary rail-to-rail input stage to interface with a sensor whose output can swing close to the power supply rails. The amplifier operates with dual supplies, $V_{DD}$ and $V_{SS}$. The rail-to-rail capability is achieved by using two parallel differential pairs at the input: one NMOS pair and one PMOS pair.\n\nThis problem focuses on the lower limit of the input common-mode range ($V_{ICM,min}$), which is dictated by the NMOS differential pair. The NMOS pair is biased by a simple NMOS tail current source. For the input stage to function correctly, both the input transistors and the tail current source transistor must operate in their saturation regions.\n\nThe circuit is designed using a technology with the following parameters:\n- Negative power supply voltage, $V_{SS} = -1.25 \\text{ V}$.\n- Threshold voltage for all NMOS transistors, $V_{TN} = 0.45 \\text{ V}$.\n\nThe biasing conditions are set such that:\n- The required overdrive voltage for the NMOS input differential pair transistors is $V_{OV,N} = 0.20 \\text{ V}$.\n- The overdrive voltage for the NMOS transistor acting as the tail current source is $V_{OV,tail} = 0.25 \\text{ V}$.\n\nCalculate the lower limit of the input common-mode voltage, $V_{ICM,min}$. Express your final answer in Volts (V), rounded to three significant figures.", "solution": "For the NMOS input differential pair to operate with the specified overdrive, its gate-source voltage must satisfy\n$$\nV_{GS,\\text{in}} = V_{TN} + V_{OV,N}.\n$$\nLet the common source node of the input pair be at voltage $V_{S}$. From the definition of $V_{GS}$,\n$$\nV_{S} = V_{ICM} - V_{GS,\\text{in}} = V_{ICM} - \\left(V_{TN} + V_{OV,N}\\right).\n$$\nThe NMOS tail current source remains in saturation if\n$$\nV_{DS,\\text{tail}} \\ge V_{OV,\\text{tail}},\n$$\nand since the tail transistor drain is at $V_{S}$ and its source is at $V_{SS}$, we have\n$$\nV_{DS,\\text{tail}} = V_{S} - V_{SS}.\n$$\nThus,\n$$\nV_{S} - V_{SS} \\ge V_{OV,\\text{tail}} \\;\\;\\Longrightarrow\\;\\; V_{ICM} - \\left(V_{TN} + V_{OV,N}\\right) - V_{SS} \\ge V_{OV,\\text{tail}}.\n$$\nSolving for $V_{ICM}$ gives the lower limit of the input common-mode range set by the NMOS pair:\n$$\nV_{ICM,\\min} = V_{SS} + V_{TN} + V_{OV,N} + V_{OV,\\text{tail}}.\n$$\nSubstituting the given values $V_{SS}=-1.25$, $V_{TN}=0.45$, $V_{OV,N}=0.20$, and $V_{OV,\\text{tail}}=0.25$ (in Volts),\n$$\nV_{ICM,\\min} = -1.25 + 0.45 + 0.20 + 0.25 = -0.35.\n$$\nRounded to three significant figures, $V_{ICM,\\min} = -0.350$.", "answer": "$$\\boxed{-0.350}$$", "id": "1327856"}, {"introduction": "After the signal is processed by the input stage, the output stage must be able to drive the load across the desired voltage range. While \"rail-to-rail output\" implies the ability to swing to both supply voltages, physical transistor limitations create a small but critical gap. This exercise [@problem_id:1327842] focuses on the BJT push-pull stage and how the collector-emitter saturation voltage ($V_{CE,sat}$) dictates the minimum achievable output voltage, providing a clear insight into the practical limits of output swing.", "problem": "A simplified rail-to-rail output stage for an operational amplifier is constructed using a complementary pair of Bipolar Junction Transistors (BJTs): an NPN transistor, $Q_N$, and a PNP transistor, $Q_P$. The circuit is powered by symmetric voltage supplies, with a positive rail at $+V_S$ and a negative rail at $-V_S$. The emitter of $Q_N$ is connected to the negative rail, while the emitter of $Q_P$ is connected to the positive rail. The collectors of both $Q_N$ and $Q_P$ are tied together, and this common node serves as the circuit's output, $V_{out}$.\n\nThe performance of the transistors is characterized by their saturation voltages. For the NPN transistor, the collector-emitter saturation voltage is $V_{CE,sat,N}$. For the PNP transistor, the emitter-collector saturation voltage is $V_{EC,sat,P}$.\n\nYou are given the following values:\n- Supply voltage magnitude, $V_S = 12.0$ V\n- NPN collector-emitter saturation voltage, $V_{CE,sat,N} = 0.20$ V\n- PNP emitter-collector saturation voltage, $V_{EC,sat,P} = 0.30$ V\n\nDetermine the absolute minimum voltage that can appear at the output terminal, $V_{out}$. Express your answer in volts, rounded to three significant figures.", "solution": "The output node is the tied collectors of the complementary pair. The lowest (most negative) output occurs when the NPN transistor $Q_{N}$ pulls the node toward the negative rail and is in saturation. In saturation, the collector-emitter voltage of the NPN cannot be less than $V_{CE,sat,N}$, so the collector (the output) must satisfy\n$$\nV_{out,\\min} - V_{E,N} = V_{CE,sat,N},\n$$\nwhere $V_{E,N}$ is the emitter potential of $Q_{N}$. Since the emitter of $Q_{N}$ is tied to the negative rail, $V_{E,N} = -V_{S}$, hence\n$$\nV_{out,\\min} = -V_{S} + V_{CE,sat,N}.\n$$\nSubstituting the given values $V_{S} = 12.0$ and $V_{CE,sat,N} = 0.20$,\n$$\nV_{out,\\min} = -12.0 + 0.20 = -11.8.\n$$\nThe PNP saturation parameter $V_{EC,sat,P}$ determines the maximum (most positive) output but does not affect the minimum; therefore it is not used in this calculation. The result is expressed in volts and rounded to three significant figures as required.", "answer": "$$\\boxed{-11.8}$$", "id": "1327842"}, {"introduction": "Understanding the theoretical limits of input and output stages is crucial, but an engineer's ultimate task is to apply this knowledge to select the right component for an application. This problem [@problem_id:1327815] simulates a common design scenario: choosing an operational amplifier for a unity-gain buffer that must handle signals spanning the entire supply range. You must critically evaluate datasheet specifications for both input common-mode range (ICMR) and output voltage swing to determine which op-amp can perform the task without distorting the signal, thereby integrating the concepts from both input and output stage analysis.", "problem": "An electronics student is tasked with designing a simple sensor interface. The sensor produces an output voltage that can span the entire range from the system's ground to its positive supply voltage. The student decides to use an operational amplifier (op-amp) configured as a unity-gain buffer (voltage follower) to isolate the sensor from the subsequent stages of the circuit.\n\nThe circuit is powered by a single supply, with the positive rail at $V_{DD} = 3.3\\,\\text{V}$ and the negative rail (ground) at $V_{SS} = 0\\,\\text{V}$. The sensor's output signal, which serves as the input to the buffer, can thus be any voltage $V_{in}$ in the range $[0\\,\\text{V}, 3.3\\,\\text{V}]$.\n\nThe student has the datasheets for four different op-amps. The relevant specifications for each, when operated with a 3.3V supply, are listed below. The Input Common-Mode Range (ICMR) specifies the range of input voltages for which the op-amp functions correctly. The Output Voltage Swing specifies the range of achievable output voltages.\n\n- **Op-Amp A:**\n  - ICMR: $V_{SS} + 1.0\\,\\text{V}$ to $V_{DD} - 1.0\\,\\text{V}$\n  - Output Voltage Swing: $V_{SS} + 1.0\\,\\text{V}$ to $V_{DD} - 1.0\\,\\text{V}$\n\n- **Op-Amp B:**\n  - ICMR: $V_{SS} - 0.1\\,\\text{V}$ to $V_{DD} + 0.1\\,\\text{V}$\n  - Output Voltage Swing: $V_{SS} + 0.5\\,\\text{V}$ to $V_{DD} - 0.5\\,\\text{V}$\n\n- **Op-Amp C:**\n  - ICMR: $V_{SS} - 0.1\\,\\text{V}$ to $V_{DD} + 0.1\\,\\text{V}$\n  - Output Voltage Swing: $V_{SS} + 0.05\\,\\text{V}$ to $V_{DD} - 0.05\\,\\text{V}$\n\n- **Op-Amp D:**\n  - ICMR: $V_{SS}$ to $V_{DD} - 1.2\\,\\text{V}$\n  - Output Voltage Swing: $V_{SS} + 0.1\\,\\text{V}$ to $V_{DD} - 0.1\\,\\text{V}$\n\nBased on these specifications, which of the following statements correctly identifies the only suitable op-amp for this application?\n\nA. Op-Amp A is suitable because its specified input and output ranges are the same.\n\nB. Op-Amp B is suitable because it has a rail-to-rail input range, which is the defining requirement for a voltage follower.\n\nC. Op-Amp C is suitable because its input common-mode range includes the full supply range and its output can swing very close to both supply rails.\n\nD. Op-Amp D is suitable because its input range includes the negative supply rail (ground), which is the most critical requirement for single-supply applications.\n\nE. None of the op-amps are suitable for this application.", "solution": "For a unity-gain buffer (voltage follower) operating in linear closed loop, two conditions must be satisfied simultaneously over the entire intended signal range:\n1) The input voltage $V_{in}$ must lie within the op-amp’s input common-mode range (ICMR), otherwise the input stage will not operate correctly.\n2) The output voltage $V_{out}$ must lie within the op-amp’s guaranteed output swing range, otherwise the amplifier will saturate and no longer provide unity gain.\n\nIn this single-supply application, the sensor produces $V_{in}$ over the full supply span, so the required ranges are\n$$\nV_{in} \\in [V_{SS},\\,V_{DD}], \\qquad V_{out} \\in [V_{SS},\\,V_{DD}].\n$$\nThus, for suitability, the ICMR must include $[V_{SS},\\,V_{DD}]$, and the output swing must at least encompass the desired $V_{out}$ range without forcing saturation.\n\nEvaluate each option against these requirements:\n\nOp-Amp A:\nICMR is $[V_{SS}+1.0,\\,V_{DD}-1.0]$, which excludes both $V_{SS}$ and $V_{DD}$. Therefore $[V_{SS},\\,V_{DD}] \\nsubseteq [V_{SS}+1.0,\\,V_{DD}-1.0]$. Its output swing is also $[V_{SS}+1.0,\\,V_{DD}-1.0]$, which cannot reproduce the required extremes. Hence A is not suitable.\n\nOp-Amp B:\nICMR is $[V_{SS}-0.1,\\,V_{DD}+0.1]$, which contains $[V_{SS},\\,V_{DD}]$, so the input condition is satisfied. However, the output swing is $[V_{SS}+0.5,\\,V_{DD}-0.5]$, which does not include $V_{SS}$ or $V_{DD}$. A buffer would saturate near the rails, failing to reproduce the full-range signal. Hence B is not suitable.\n\nOp-Amp C:\nICMR is $[V_{SS}-0.1,\\,V_{DD}+0.1]$, which contains $[V_{SS},\\,V_{DD}]$, so the input condition is satisfied. The output swing is $[V_{SS}+0.05,\\,V_{DD}-0.05]$, which does not include the exact rails but is very close to both. Among the given choices, this is the only device that both accepts the full input span and provides a near-rail output swing consistent with typical “rail-to-rail” buffer practice, thereby avoiding gross saturation over essentially the entire range.\n\nOp-Amp D:\nICMR is $[V_{SS},\\,V_{DD}-1.2]$, which does not include inputs near $V_{DD}$, so it cannot buffer the upper portion of the sensor range. The output swing $[V_{SS}+0.1,\\,V_{DD}-0.1]$ also does not include the exact rails. Hence D is not suitable.\n\nOnly Op-Amp C satisfies the rail-to-rail input requirement and provides an output swing very close to both rails, which is the practical requirement for this unity-gain buffer driven over the full supply span. Therefore, the only correct statement among the options is that Op-Amp C is suitable for this application for the stated reasons.", "answer": "$$\\boxed{C}$$", "id": "1327815"}]}
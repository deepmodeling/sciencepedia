{"hands_on_practices": [{"introduction": "Let's begin by exploring the ideal behavior of an R-2R DAC. This fundamental exercise demonstrates how the network's clever arrangement of resistors creates binary-weighted currents from a digital input. By calculating the output voltage for a specific digital code, you'll gain a core understanding of the digital-to-analog conversion process in its most straightforward form [@problem_id:1327560].", "problem": "A 4-bit Digital-to-Analog Converter (DAC) is constructed using a standard R-2R ladder network architecture. This network is connected to an ideal operational amplifier configured as an inverting summing amplifier. The feedback resistor of the op-amp, $R_f$, is equal to the base resistance $R$ of the ladder network. Each bit of the 4-bit digital input is represented by a switch. A digital '1' connects the corresponding input of the R-2R ladder to a stable reference voltage, $V_{ref}$, while a digital '0' connects it to ground (0 V). For this specific circuit, the reference voltage is given as $V_{ref} = 8.0$ V.\n\nDetermine the analog output voltage from the operational amplifier for the binary input word `1101`, where the leftmost bit is the Most Significant Bit (MSB) and the rightmost bit is the Least Significant Bit (LSB). Express your answer in volts (V).", "solution": "For an ideal inverting op-amp with negative feedback, the inverting input is at virtual ground, so its voltage is $0$. The input bias current is zero. Let the 4-bit word be $b_{3}b_{2}b_{1}b_{0}$ with $b_{3}$ the MSB and $b_{0}$ the LSB.\n\nIn an $R$â€“$2R$ ladder terminated at a virtual ground, linearity and the self-similar structure imply that each bit that is connected to $V_{ref}$ contributes a binary-weighted current into the summing node. The current contributed by the MSB ($b_3$) is $\\frac{V_{ref}}{2R}$, the next bit ($b_2$) contributes $\\frac{V_{ref}}{4R}$, and so on. The total current entering the summing node from the ladder is\n$$\nI_{\\text{in}} = \\frac{V_{ref}}{R} \\left( \\frac{b_3}{2} + \\frac{b_2}{4} + \\frac{b_1}{8} + \\frac{b_0}{16} \\right).\n$$\nApplying KCL at the virtual-ground node and using the ideal op-amp model, the current through the feedback resistor $I_f$ must be equal to $I_{in}$. This gives $V_{out} = -I_{in}R_f$. With $R_{f} = R$, this becomes\n$$\nV_{out} = -V_{ref} \\left( \\frac{b_3}{2} + \\frac{b_2}{4} + \\frac{b_1}{8} + \\frac{b_0}{16} \\right).\n$$\nFor the input word `1101`, we have $b_3=1, b_2=1, b_1=0,$ and $b_0=1$. Substituting these values:\n$$\nV_{out} = -8.0 \\left( \\frac{1}{2} + \\frac{1}{4} + \\frac{0}{8} + \\frac{1}{16} \\right) = -8.0 \\left( \\frac{8+4+0+1}{16} \\right).\n$$\nThus,\n$$\nV_{out} = -8.0 \\left(\\frac{13}{16}\\right) = - \\frac{13}{2} = -6.5 \\text{ V}.\n$$", "answer": "$$\\boxed{-6.5}$$", "id": "1327560"}, {"introduction": "Real-world circuits are rarely perfect; components can and do fail. This next practice moves beyond ideal theory to explore the practical implications of a common fault: a \"stuck\" digital input. By adapting the ideal model to account for this malfunction, you will learn to apply fundamental principles like superposition for troubleshooting and predicting the behavior of imperfect systems [@problem_id:1327525].", "problem": "Consider a 4-bit R-2R ladder Digital-to-Analog Converter (DAC). The DAC's output terminal is connected to the inverting input of an ideal operational amplifier (op-amp), which is configured as an inverting amplifier. The non-inverting input of the op-amp is connected to ground. The resistor network uses base resistances of $R$ and $2R$. The feedback resistor connecting the op-amp's output to its inverting input is specified as $R_f = 2R$.\n\nThe digital input is a 4-bit word, represented as $B_3B_2B_1B_0$, where $B_3$ is the Most Significant Bit (MSB) and $B_0$ is the Least Significant Bit (LSB). For each bit $B_i$, a switch connects a corresponding node in the ladder to a reference voltage $V_{ref}$ if $B_i=1$, and to ground (0 V) if $B_i=0$.\n\nThe circuit is known to have a specific fault: the switch corresponding to bit $B_1$ is malfunctioning. It is permanently stuck in the '1' position, meaning it is always connected to the reference voltage $V_{ref}$, regardless of the actual input value for $B_1$.\n\nA digital input code of '0101' is applied to the DAC. Calculate the resulting analog output voltage, $V_{out}$. Express your answer as an analytic expression in terms of $V_{ref}$.", "solution": "Because the op-amp is ideal and configured as an inverting amplifier with its non-inverting input grounded, the inverting input node is a virtual ground at 0 V. The R-2R ladder is linear, so by superposition the total current injected into the virtual ground is the sum of the contributions from each bit whose switch is connected to $V_{ref}$.\n\nFor a standard 4-bit R-2R ladder terminated properly, when bit $B_{3}$ (MSB) through $B_{0}$ (LSB) are connected to $V_{ref}$, their currents into the summing node are weighted by factors $\\frac{1}{2}$, $\\frac{1}{4}$, $\\frac{1}{8}$, and $\\frac{1}{16}$, respectively. Therefore, the total input current into the inverting node is\n$$\nI_{in}=\\frac{V_{ref}}{R}\\left(\\frac{B_{3}}{2}+\\frac{B_{2}}{4}+\\frac{B_{1}}{8}+\\frac{B_{0}}{16}\\right).\n$$\nThe inverting op-amp converts this current to an output voltage by\n$$\nV_{out}=-R_{f}I_{in}=-R_{f}\\frac{V_{ref}}{R}\\left(\\frac{B_{3}}{2}+\\frac{B_{2}}{4}+\\frac{B_{1}}{8}+\\frac{B_{0}}{16}\\right).\n$$\nGiven $R_{f}=2R$, this becomes\n$$\nV_{out}=-2\\,V_{ref}\\left(\\frac{B_{3}}{2}+\\frac{B_{2}}{4}+\\frac{B_{1}}{8}+\\frac{B_{0}}{16}\\right).\n$$\nThe applied digital input is $0101$, so nominally $B_{3}=0$, $B_{2}=1$, $B_{1}=0$, $B_{0}=1$. However, the fault forces $B_{1}$ to be $1$ regardless of the intended value. Thus the effective bits are $B_{3}=0$, $B_{2}=1$, $B_{1}=1$, $B_{0}=1$. Substituting,\n$$\nV_{out}=-2\\,V_{ref}\\left(0+\\frac{1}{4}+\\frac{1}{8}+\\frac{1}{16}\\right)\n=-2\\,V_{ref}\\left(\\frac{4}{16}+\\frac{2}{16}+\\frac{1}{16}\\right)\n=-2\\,V_{ref}\\left(\\frac{7}{16}\\right)\n=-\\frac{7}{8}V_{ref}.\n$$", "answer": "$$\\boxed{-\\frac{7}{8}V_{ref}}$$", "id": "1327525"}, {"introduction": "To truly characterize a DAC's performance, we must analyze its non-ideal behaviors using standard metrics. This advanced practice introduces you to Differential Non-Linearity (DNL), a critical specification that measures the consistency of the analog output steps. By investigating how a small error in a single resistor affects the DNL at a major code transition, you will gain a deeper appreciation for the impact of component tolerances on precision circuit performance [@problem_id:1327546].", "problem": "A 4-bit voltage-mode R-2R ladder Digital-to-Analog Converter (DAC) is analyzed for its non-ideal characteristics. The ladder network is constructed as follows:\n\nA terminating resistor of value $2R$ is connected to ground. The top end of this resistor defines node $N_0$, which corresponds to the Least Significant Bit (LSB). At node $N_0$, a shunt resistor of value $2R$ is connected to a voltage source representing the LSB, which provides a voltage of $b_0 V_{\\text{ref}}$. A series resistor connects node $N_0$ to node $N_1$.\n\nAt node $N_1$, a shunt resistor of value $2R$ is connected to its corresponding bit source $b_1 V_{\\text{ref}}$, and a series resistor connects node $N_1$ to node $N_2$. This structure is repeated for node $N_2$ (bit $b_2$) and node $N_3$ (bit $b_3$, the Most Significant Bit or MSB). The output voltage of the DAC, $V_{\\text{out}}$, is the voltage at the final node, $N_3$.\n\nIn an ideal DAC, all series resistors would have a value of $R$. However, in this specific device, a manufacturing defect has occurred. All resistors are ideal except for the series resistor connecting the MSB node ($N_3$) to the adjacent node ($N_2$). This faulty resistor has a value of $R' = R(1+\\epsilon)$, where $\\epsilon = 0.01$ represents a +1% error.\n\nCalculate the Differential Non-Linearity (DNL), expressed in units of LSBs, for the major code transition from the digital input '0111' to '1000'. Round your final answer to four significant figures.", "solution": "Define the DNL at code k as $\\mathrm{DNL}_{k}=\\frac{V_{\\text{out}}(k+1)-V_{\\text{out}}(k)}{V_{\\text{LSB,ideal}}}-1$, with $V_{\\text{LSB,ideal}}=\\frac{V_{\\text{ref}}}{2^{4}}=\\frac{V_{\\text{ref}}}{16}$ for a 4-bit DAC. We need the step from code 0111 to 1000, i.e., $\\Delta V = V_{\\text{out}}(1000)-V_{\\text{out}}(0111)$.\n\nBy linearity, write $V_{\\text{out}}=V_{\\text{ref}}\\sum_{i=0}^{3}w_{i}b_{i}$, where $w_{i}$ are the bit weights in the non-ideal ladder. Only the series resistor between $N_{2}$ and $N_{3}$ is non-ideal, with $R'=R(1+\\epsilon)$.\n\nCompute the weights using superposition and Thevenin transformations.\n\n1) MSB weight $w_{3}$ (only $b_{3}=1$):\nWith lower bits at $0$, the equivalent to ground seen from $N_{2}$ is $Z_{N_{2}}=R$ (standard R-2R property with proper termination). Thus the downward impedance from $N_{3}$ is $Z_{\\text{down}}=R'+Z_{N_{2}}=R(1+\\epsilon)+R=R(2+\\epsilon)$. The node $N_{3}$ is a divider between $2R$ to $V_{\\text{ref}}$ and $Z_{\\text{down}}$ to ground, giving\n$$\nw_{3}=\\frac{V_{\\text{out}}}{V_{\\text{ref}}}=\\frac{Z_{\\text{down}}}{2R+Z_{\\text{down}}}=\\frac{2+\\epsilon}{4+\\epsilon}.\n$$\n\n2) Next weight $w_{2}$ (only $b_{2}=1$):\nFrom $N_{2}$ to ground (excluding the $2R$ branch to the source) the lower ladder is $R+R=2R$ (series $R$ to $N_{1}$ and the equivalent $Z_{N_{1}}=R$ to ground). Hence, with the upward link open, the Thevenin at $N_{2}$ is\n$$\nV_{\\text{th},2}=\\frac{2R}{2R+2R}V_{\\text{ref}}=\\frac{V_{\\text{ref}}}{2},\\quad R_{\\text{th},2}=(2R)\\parallel(2R)=R.\n$$\nConnecting through $R'$ to $N_{3}$ (which has a shunt $2R$ to ground) yields\n$$\nw_{2}=\\frac{V_{\\text{out}}}{V_{\\text{ref}}}=\\frac{V_{\\text{th},2}}{V_{\\text{ref}}}\\cdot\\frac{2R}{R'+R+2R}=\\frac{1}{2}\\cdot\\frac{2R}{R'+3R}=\\frac{1}{4+\\epsilon}.\n$$\n\n3) Weight $w_{1}$ (only $b_{1}=1$):\nForm the Thevenin step-by-step upward. At $N_{1}$ (lower network to ground is $2R$), $V_{\\text{th},1}=\\frac{V_{\\text{ref}}}{2}$ and $R_{\\text{th},1}=R$. Through series $R$ to $N_{2}$ with a shunt $2R$ to ground produces at $N_{2}$:\n$$\nV_{\\text{th},2}=\\frac{V_{\\text{th},1}}{2}=\\frac{V_{\\text{ref}}}{4},\\quad R_{\\text{th},2}=R.\n$$\nThen through $R'$ to $N_{3}$ with a shunt $2R$ to ground:\n$$\nw_{1}=\\frac{V_{\\text{out}}}{V_{\\text{ref}}}=\\frac{V_{\\text{th},2}}{V_{\\text{ref}}}\\cdot\\frac{2R}{R'+R+2R}=\\frac{1}{4}\\cdot\\frac{2R}{R'+3R}=\\frac{1}{2(4+\\epsilon)}.\n$$\n\n4) Weight $w_{0}$ (only $b_{0}=1$):\nProceeding similarly, each upward stage halves the Thevenin voltage and leaves $R_{\\text{th}}=R$; after three stages to $N_{2}$, $V_{\\text{th},2}=\\frac{V_{\\text{ref}}}{8}$, $R_{\\text{th},2}=R$, thus\n$$\nw_{0}=\\frac{V_{\\text{out}}}{V_{\\text{ref}}}=\\frac{1}{8}\\cdot\\frac{2R}{R'+3R}=\\frac{1}{4(4+\\epsilon)}.\n$$\n\nHence, for codes 1000 and 0111,\n$$\nV_{\\text{out}}(1000)=V_{\\text{ref}}\\,w_{3},\\quad V_{\\text{out}}(0111)=V_{\\text{ref}}\\,(w_{2}+w_{1}+w_{0}),\n$$\nand the actual step is\n$$\n\\Delta V=V_{\\text{ref}}\\left[w_{3}-(w_{2}+w_{1}+w_{0})\\right].\n$$\nCompute\n$$\nw_{2}+w_{1}+w_{0}=\\frac{1}{4+\\epsilon}\\left(1+\\frac{1}{2}+\\frac{1}{4}\\right)=\\frac{7}{4(4+\\epsilon)},\n$$\nso\n$$\nw_{3}-(w_{2}+w_{1}+w_{0})=\\frac{4(2+\\epsilon)-7}{4(4+\\epsilon)}=\\frac{1+4\\epsilon}{4(4+\\epsilon)}.\n$$\n\nWith $V_{\\text{LSB,ideal}}=\\frac{V_{\\text{ref}}}{16}$, the DNL at this transition is\n$$\n\\mathrm{DNL}=\\frac{\\Delta V}{V_{\\text{LSB,ideal}}}-1=16\\cdot\\frac{1+4\\epsilon}{4(4+\\epsilon)}-1=\\frac{4(1+4\\epsilon)}{4+\\epsilon}-1=\\frac{4+16\\epsilon-(4+\\epsilon)}{4+\\epsilon}=\\frac{15\\epsilon}{4+\\epsilon}.\n$$\nFor $\\epsilon=0.01$,\n$$\n\\mathrm{DNL}=\\frac{15\\times 0.01}{4+0.01}=\\frac{0.15}{4.01}\\approx 0.03741\\ \\text{LSB}.\n$$", "answer": "$$\\boxed{0.03741}$$", "id": "1327546"}]}
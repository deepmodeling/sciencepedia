{"hands_on_practices": [{"introduction": "In analog circuit design, performance metrics are typically provided in decibels (dB), a logarithmic scale that simplifies gain and loss calculations. This first exercise focuses on the essential relationship between differential-mode gain ($A_d$), common-mode rejection ratio (CMRR), and common-mode gain ($A_{cm}$) in this domain. By working directly with dB values, as is common practice when reading datasheets, you will learn to quickly assess one of an amplifier's most important non-idealities. [@problem_id:1293115]", "problem": "An electrical engineering student is designing a precision pre-amplifier circuit for a biomedical sensor. To minimize interference from environmental noise (such as 60 Hz power-line hum), the student selects a differential amplifier. The manufacturer's datasheet for this amplifier specifies two key performance metrics. The differential-mode voltage gain ($A_d$), which is the intended amplification for the desired signal, is listed as 40 dB. The Common-Mode Rejection Ratio (CMRR), a measure of the amplifier's ability to reject unwanted signals common to both inputs, is specified as 60 dB.\n\nTo complete the noise analysis for the circuit, the student must determine the amplifier's common-mode voltage gain ($A_{cm}$). This gain represents the amplification applied to the unwanted common-mode noise.\n\nCalculate the common-mode voltage gain, $A_{cm}$. Express your answer in decibels (dB).", "solution": "The problem requires us to find the common-mode voltage gain ($A_{cm}$) in decibels, given the differential-mode voltage gain ($A_d$) and the Common-Mode Rejection Ratio (CMRR), both also in decibels.\n\nFirst, let's recall the definitions. The differential gain $A_d$ and common-mode gain $A_{cm}$ are defined for a differential amplifier with inputs $v_1$ and $v_2$, and output $v_o$. The inputs can be expressed in terms of a differential-mode signal $v_d = v_1 - v_2$ and a common-mode signal $v_{cm} = \\frac{v_1 + v_2}{2}$. The output is then given by $v_o = A_d v_d + A_{cm} v_{cm}$.\n\nThe Common-Mode Rejection Ratio (CMRR) is defined as the ratio of the magnitude of the differential gain to the magnitude of the common-mode gain:\n$$\n\\text{CMRR} = \\frac{|A_d|}{|A_{cm}|}\n$$\nThis relationship is for the absolute gain values (i.e., linear scale, not decibels).\n\nTo work with the given decibel (dB) values, we convert this defining equation into the decibel scale. The formula for converting a voltage gain $A$ to decibels is $A_{\\text{dB}} = 20 \\log_{10}(|A|)$.\n\nApplying this to the CMRR equation:\n$$\n\\text{CMRR}_{\\text{dB}} = 20 \\log_{10}(\\text{CMRR}) = 20 \\log_{10}\\left(\\frac{|A_d|}{|A_{cm}|}\\right)\n$$\nUsing the property of logarithms that $\\log(x/y) = \\log(x) - \\log(y)$, we can expand this expression:\n$$\n\\text{CMRR}_{\\text{dB}} = 20 \\log_{10}(|A_d|) - 20 \\log_{10}(|A_{cm}|)\n$$\nWe can recognize the terms on the right-hand side as the decibel representations of the differential gain and common-mode gain, respectively.\n$$\nA_{d, \\text{dB}} = 20 \\log_{10}(|A_d|)\n$$\n$$\nA_{cm, \\text{dB}} = 20 \\log_{10}(|A_{cm}|)\n$$\nSubstituting these into the equation for $\\text{CMRR}_{\\text{dB}}$ gives the fundamental relationship between these quantities in decibels:\n$$\n\\text{CMRR}_{\\text{dB}} = A_{d, \\text{dB}} - A_{cm, \\text{dB}}\n$$\nThe problem asks for the common-mode gain, $A_{cm, \\text{dB}}$. We can rearrange the equation to solve for it:\n$$\nA_{cm, \\text{dB}} = A_{d, \\text{dB}} - \\text{CMRR}_{\\text{dB}}\n$$\nNow, we can substitute the numerical values provided in the problem statement:\n- Differential-mode voltage gain, $A_{d, \\text{dB}} = 40$ dB\n- Common-Mode Rejection Ratio, $\\text{CMRR}_{\\text{dB}} = 60$ dB\n\nPlugging these values into our rearranged formula:\n$$\nA_{cm, \\text{dB}} = 40 \\text{ dB} - 60 \\text{ dB}\n$$\n$$\nA_{cm, \\text{dB}} = -20 \\text{ dB}\n$$\nA negative decibel value signifies that the common-mode signal is attenuated rather than amplified. In this case, a gain of -20 dB corresponds to a linear gain factor of $10^{-20/20} = 10^{-1} = 0.1$. This is the desired behavior for a differential amplifier, as it should suppress common-mode noise.", "answer": "$$\\boxed{-20}$$", "id": "1293115"}, {"introduction": "Beyond datasheet calculations, the true test of understanding is to predict a circuit's behavior in a realistic scenario. This practice problem bridges the gap between the abstract specification of $A_{cm}$ and its tangible impact on signal quality. You will calculate the actual noise voltage appearing at an amplifier's output due to common-mode interference, providing a concrete example of why minimizing common-mode gain is critical in high-precision applications like biomedical sensing. [@problem_id:1293116]", "problem": "A biomedical engineer is designing the front-end of an electrocardiogram (ECG) acquisition system. A critical component is a differential amplifier, which is intended to amplify the small voltage difference between two electrodes while rejecting larger, unwanted noise signals that are common to both inputs. The system is operating in a laboratory environment where 60 Hz power-line interference induces a common-mode noise signal with a peak amplitude of 1.5 V on the amplifier's inputs. The differential amplifier is specified to have a common-mode gain of -35 dB.\n\nCalculate the peak amplitude of the common-mode voltage that will appear at the output of the amplifier due to this interference. Express your answer in millivolts (mV) and round your final answer to three significant figures.", "solution": "Given a common-mode input with peak amplitude $V_{\\text{cm,in}} = 1.5$ V and a common-mode gain specified in decibels as $G_{\\text{cm,dB}} = -35$ dB, we use the definition of voltage gain in decibels:\n$$\nG_{\\text{dB}} = 20 \\log_{10}\\left(|A|\\right).\n$$\nSolving for the magnitude of the common-mode gain,\n$$\n|A_{\\text{cm}}| = 10^{G_{\\text{cm,dB}}/20} = 10^{-35/20} = 10^{-1.75}.\n$$\nThe peak common-mode output amplitude is then\n$$\nV_{\\text{cm,out}} = |A_{\\text{cm}}| \\, V_{\\text{cm,in}} = 1.5 \\times 10^{-1.75} \\text{ V}.\n$$\nConverting to millivolts using $1 \\text{ V} = 10^{3} \\text{ mV}$,\n$$\nV_{\\text{cm,out}} = 1.5 \\times 10^{-1.75} \\times 10^{3} \\text{ mV}.\n$$\nNumerically,\n$$\n10^{-1.75} \\approx 1.778279410 \\times 10^{-2},\n$$\nso\n$$\nV_{\\text{cm,out}} \\approx 1.5 \\times 1.778279410 \\times 10^{-2} \\times 10^{3} \\text{ mV} = 26.67419115 \\text{ mV}.\n$$\nRounding to three significant figures and noting that amplitude is reported as a magnitude,\n$$\nV_{\\text{cm,out}} \\approx 26.7 \\text{ mV}.\n$$", "answer": "$$\\boxed{26.7}$$", "id": "1293116"}, {"introduction": "To truly master a concept, it is essential to understand its origins at the fundamental circuit level. This final exercise looks 'under the hood' of a classic MOSFET differential pair to explore how its topology gives rise to common-mode gain. By performing a small-signal analysis, you will derive an expression that reveals the crucial role of the tail current source's impedance in rejecting common-mode signals, linking a specific design choice to a key performance metric. [@problem_id:1293096]", "problem": "A differential amplifier is constructed using two perfectly matched Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), M1 and M2. Their sources are tied together at a common node. This common source node is connected to ground through a single tail resistor with resistance $R_{SS}$. The drain of M1 is connected to a positive voltage supply $V_{DD}$ through a load resistor $R_{D1}$, and the drain of M2 is connected to the same supply $V_{DD}$ through a load resistor $R_{D2}$. The circuit is designed to be perfectly symmetric, such that the load resistances are identical: $R_{D1} = R_{D2} = R_D$.\n\nThe output voltages, $v_{o1}$ and $v_{o2}$, are measured at the drains of M1 and M2, respectively. For this analysis, assume that both transistors are biased to operate in their saturation region and have an identical small-signal transconductance $g_m$. Furthermore, assume that the intrinsic output resistance $r_o$ of each transistor is infinitely large. A pure common-mode input signal, $v_{icm}$, is applied to the gates of both transistors, meaning the input voltages are $v_{i1} = v_{i2} = v_{icm}$.\n\nDetermine the single-ended common-mode gain, which is defined as the ratio $A_{cm} = \\frac{v_{o1}}{v_{icm}}$. Express your answer as a closed-form analytic expression in terms of the given parameters $g_m$, $R_D$, and $R_{SS}$.", "solution": "Because the input is purely common-mode, $v_{i1}=v_{i2}=v_{icm}$, the two identical transistors experience the same small-signal conditions, and their small-signal drain currents are equal. With $r_{o}\\to\\infty$, each MOSFET is modeled by a dependent current source of value $i_{d}=g_{m}v_{gs}$ from drain to source. Let the common source node small-signal voltage be $v_{s}$.\n\nFor each transistor, $v_{gs}=v_{icm}-v_{s}$, so the small-signal drain current is\n$$\ni_{d1}=i_{d2}=g_{m}\\left(v_{icm}-v_{s}\\right).\n$$\nThis current flows from drain to source; therefore, it enters the source node from each transistor. The only element connected from the source node to ground is the tail resistor $R_{SS}$, which carries current $v_{s}/R_{SS}$ from the source node to ground. Applying KCL at the common source node (total current entering equals total current leaving) gives\n$$\n2g_{m}\\left(v_{icm}-v_{s}\\right)=\\frac{v_{s}}{R_{SS}}.\n$$\nSolving for $v_{s}$,\n$$\n2g_{m}v_{icm}-2g_{m}v_{s}=\\frac{v_{s}}{R_{SS}}\n\\;\\;\\Rightarrow\\;\\;\n2g_{m}v_{icm}=v_{s}\\left(2g_{m}+\\frac{1}{R_{SS}}\\right)\n\\;\\;\\Rightarrow\\;\\;\nv_{s}=\\frac{2g_{m}}{2g_{m}+\\frac{1}{R_{SS}}}\\,v_{icm}\n=\\frac{2g_{m}R_{SS}}{1+2g_{m}R_{SS}}\\,v_{icm}.\n$$\n\nFor the output at drain 1, with $V_{DD}$ as AC ground, the drain node sees a resistor $R_{D}$ to ground. The small-signal current leaving the drain node into the transistor is $i_{d1}=g_{m}\\left(v_{icm}-v_{s}\\right)$, so the small-signal drain voltage is\n$$\nv_{o1}=-R_{D}\\,i_{d1}=-g_{m}R_{D}\\left(v_{icm}-v_{s}\\right).\n$$\nHence the single-ended common-mode gain is\n$$\nA_{cm}=\\frac{v_{o1}}{v_{icm}}=-g_{m}R_{D}\\left(1-\\frac{v_{s}}{v_{icm}}\\right).\n$$\nSubstitute the expression for $v_{s}/v_{icm}$:\n$$\n1-\\frac{v_{s}}{v_{icm}}=1-\\frac{2g_{m}R_{SS}}{1+2g_{m}R_{SS}}\n=\\frac{1+2g_{m}R_{SS}-2g_{m}R_{SS}}{1+2g_{m}R_{SS}}\n=\\frac{1}{1+2g_{m}R_{SS}}.\n$$\nTherefore,\n$$\nA_{cm}=-g_{m}R_{D}\\cdot\\frac{1}{1+2g_{m}R_{SS}}\n=-\\frac{g_{m}R_{D}}{1+2g_{m}R_{SS}}.\n$$\nThis expression has the correct limits: as $R_{SS}\\to 0$, $A_{cm}\\to -g_{m}R_{D}$ (both sources at AC ground); as $R_{SS}\\to\\infty$ (ideal current source tail), $A_{cm}\\to 0$.", "answer": "$$\\boxed{-\\frac{g_{m}R_{D}}{1+2g_{m}R_{SS}}}$$", "id": "1293096"}]}
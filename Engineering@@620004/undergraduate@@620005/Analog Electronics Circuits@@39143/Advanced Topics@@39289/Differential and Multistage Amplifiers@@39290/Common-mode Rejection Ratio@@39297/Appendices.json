{"hands_on_practices": [{"introduction": "A core skill in electronics is to connect abstract specifications to concrete measurements. This practice problem demystifies the Common-Mode Rejection Ratio (CMRR) by guiding you through its calculation from first principles. By simulating the process of measuring an amplifier's response to both differential-mode and common-mode signals, you will build an intuitive grasp of how differential gain ($A_d$) and common-mode gain ($A_{cm}$) combine to define this crucial figure of merit [@problem_id:1293360].", "problem": "An electronics engineering student is tasked with characterizing a newly designed differential amplifier intended for use in a high-precision Electrocardiogram (ECG) system. The quality of such an amplifier is often evaluated by its ability to amplify the small differential voltage from the heart signals while rejecting large common-mode noise, such as 60 Hz interference from power lines.\n\nThe student performs two separate tests.\n\nFirst, to measure the differential-mode gain ($A_d$), a differential input voltage of $V_d = 10.0$ mV is applied, which results in an output voltage of $V_{out,d} = 1.00$ V. The differential-mode gain is defined as $A_d = V_{out,d} / V_d$.\n\nSecond, to measure the common-mode gain ($A_{cm}$), the two inputs of the amplifier are tied together and a common-mode input voltage of $V_{cm} = 1.00$ V is applied. This configuration produces an output voltage of $V_{out,cm} = 2.00$ mV. The common-mode gain is defined as $A_{cm} = V_{out,cm} / V_{cm}$.\n\nA key figure of merit for this amplifier is the Common-Mode Rejection Ratio (CMRR), which is the absolute ratio of the differential-mode gain to the common-mode gain. Calculate the CMRR for this amplifier in units of decibels (dB), using the formula $CMRR_{dB} = 20 \\log_{10}(CMRR)$.\n\nExpress your final answer in dB, rounded to three significant figures.", "solution": "The problem asks for the Common-Mode Rejection Ratio (CMRR) in decibels (dB). The solution involves three main steps: calculating the differential-mode gain ($A_d$), calculating the common-mode gain ($A_{cm}$), and then using these values to find the CMRR in dB.\n\nFirst, we calculate the differential-mode gain, $A_d$. The problem provides the differential input voltage, $V_d = 10.0 \\text{ mV} = 10.0 \\times 10^{-3} \\text{ V}$, and the corresponding output voltage, $V_{out,d} = 1.00 \\text{ V}$. Using the definition provided, the differential-mode gain is:\n$$A_d = \\frac{V_{out,d}}{V_d} = \\frac{1.00 \\text{ V}}{10.0 \\times 10^{-3} \\text{ V}} = 100$$\nThis gain is a dimensionless quantity.\n\nNext, we calculate the common-mode gain, $A_{cm}$. The problem provides the common-mode input voltage, $V_{cm} = 1.00 \\text{ V}$, and the resulting output voltage, $V_{out,cm} = 2.00 \\text{ mV} = 2.00 \\times 10^{-3} \\text{ V}$. Using the provided definition, the common-mode gain is:\n$$A_{cm} = \\frac{V_{out,cm}}{V_{cm}} = \\frac{2.00 \\times 10^{-3} \\text{ V}}{1.00 \\text{ V}} = 2.00 \\times 10^{-3}$$\nThis gain is also a dimensionless quantity.\n\nNow, we can compute the Common-Mode Rejection Ratio (CMRR). The CMRR is defined as the absolute ratio of the differential-mode gain to the common-mode gain.\n$$CMRR = \\left| \\frac{A_d}{A_{cm}} \\right| = \\left| \\frac{100}{2.00 \\times 10^{-3}} \\right| = \\frac{100}{0.002} = 50000$$\n\nFinally, we convert the CMRR value to decibels (dB) using the given formula, $CMRR_{dB} = 20 \\log_{10}(CMRR)$.\n$$CMRR_{dB} = 20 \\log_{10}(50000)$$\nWe can simplify the logarithm:\n$$CMRR_{dB} = 20 \\log_{10}(5 \\times 10^{4}) = 20 (\\log_{10}(5) + \\log_{10}(10^{4})) = 20 (\\log_{10}(5) + 4)$$\nUsing a calculator, $\\log_{10}(5) \\approx 0.69897$.\n$$CMRR_{dB} \\approx 20 (0.69897 + 4) = 20 (4.69897) = 93.9794 \\text{ dB}$$\n\nThe problem requires the answer to be rounded to three significant figures.\n$$CMRR_{dB} \\approx 94.0 \\text{ dB}$$", "answer": "$$\\boxed{94.0}$$", "id": "1293360"}, {"introduction": "Understanding a specification's impact is as important as knowing how to calculate it. This exercise demonstrates the practical consequences of a finite CMRR on an amplifier's output. By calculating the total output voltage resulting from both a desired differential signal and an unwanted common-mode voltage, you will see precisely how common-mode gain contributes an error component to your measurement, a key concept in precision instrument design [@problem_id:1293388].", "problem": "A differential amplifier is a key component in precision measurement systems, designed to amplify the difference between two input voltages while rejecting any voltage common to both inputs. Consider such an amplifier specified to have a differential-mode voltage gain $A_d = 200$ and a Common-Mode Rejection Ratio (CMRR) of 60 dB. The common-mode gain, $A_{cm}$, is known to be a positive value. At a specific instant during a measurement, the voltages at the two input terminals are measured to be $v_1 = 1.505$ V and $v_2 = 1.495$ V. Assuming the amplifier operates ideally according to these specifications, calculate the total output voltage.\n\nExpress your final answer in volts (V), rounded to three significant figures.", "solution": "Given a differential amplifier with differential-mode gain $A_{d}$ and common-mode gain $A_{cm}$, the output voltage $v_{o}$ is modeled as the sum of the amplified differential and common-mode components:\n$$\nv_{o} = A_{d}\\,v_{d} + A_{cm}\\,v_{cm},\n$$\nwhere the differential input voltage and common-mode input voltage are defined by\n$$\nv_{d} = v_{2} - v_{1}, \\quad v_{cm} = \\frac{v_{1} + v_{2}}{2}.\n$$\n\nThe Common-Mode Rejection Ratio (in decibels) is related to the ratio of gains by\n$$\n\\mathrm{CMRR}_{\\mathrm{dB}} = 20 \\log_{10}\\!\\left(\\left| \\frac{A_{d}}{A_{cm}} \\right|\\right).\n$$\nWith $\\mathrm{CMRR}_{\\mathrm{dB}} = 60$ and a positive $A_{cm}$, we can solve for $A_{cm}$:\n$$\n60 = 20 \\log_{10}\\!\\left(\\frac{A_{d}}{A_{cm}}\\right)\n\\;\\Rightarrow\\;\n\\frac{A_{d}}{A_{cm}} = 10^{\\frac{60}{20}} = 10^{3}\n\\;\\Rightarrow\\;\nA_{cm} = \\frac{A_{d}}{10^{3}}.\n$$\nGiven $A_{d} = 200$, we obtain\n$$\nA_{cm} = \\frac{200}{10^{3}} = 0.2.\n$$\n\nUsing the measured inputs $v_{1} = 1.505$ V and $v_{2} = 1.495$ V,\n$$\nv_{d} = 1.495 - 1.505 = -0.010 \\;\\text{V}, \\quad\nv_{cm} = \\frac{1.505 + 1.495}{2} = \\frac{3.000}{2} = 1.5 \\;\\text{V}.\n$$\nTherefore, the output voltage is\n$$\nv_{o} = A_{d}\\,v_{d} + A_{cm}\\,v_{cm} = 200 \\times (-0.010) + 0.2 \\times 1.5 = -2.0 + 0.3 = -1.7 \\;\\text{V}.\n$$\n\nRounded to three significant figures, the total output voltage is $-1.70$ V.", "answer": "$$\\boxed{-1.70}$$", "id": "1293388"}, {"introduction": "An ideal differential amplifier has infinite CMRR, but real-world circuits are limited by component imperfections. This advanced exercise explores the root cause of finite CMRR in a classic difference amplifier: resistor tolerance mismatch. By performing a worst-case analysis, you will derive a fundamental relationship between the specified manufacturing tolerance of resistors and the minimum achievable CMRR, providing powerful insight into the practical limits of analog circuit design [@problem_id:1293362].", "problem": "An operational amplifier (op-amp), assumed to be ideal, is used to build a difference amplifier circuit. An input voltage $v_1$ is applied to the inverting terminal through a resistor $R_1$. A feedback resistor $R_2$ connects the op-amp's output to its inverting terminal. A second input voltage $v_2$ is applied to the non-inverting terminal through a resistor $R_3$. The non-inverting terminal is also connected to ground through a resistor $R_4$.\n\nFor ideal operation as a subtractor with unity differential gain, all four resistors are chosen to have the same nominal resistance, $R$. However, due to manufacturing imperfections, each resistor has an actual resistance that can deviate from the nominal value $R$ by up to a fractional tolerance $\\pm\\delta$, where $\\delta$ is a small positive constant. That is, the resistance $R_i$ of any resistor is in the range $[R(1-\\delta), R(1+\\delta)]$.\n\nThe performance of a difference amplifier is often quantified by its Common-Mode Rejection Ratio (CMRR), defined as the magnitude of the ratio of its differential-mode gain ($A_d$) to its common-mode gain ($A_{cm}$). The output of the amplifier can be expressed as $v_{out} = A_d v_d + A_{cm} v_{cm}$, where the differential-mode input is $v_d = v_2 - v_1$ and the common-mode input is $v_{cm} = (v_1 + v_2)/2$.\n\nAssuming the worst possible combination of resistor values within their tolerance range, determine the minimum possible CMRR of this circuit. Express your answer as a symbolic expression in terms of the tolerance $\\delta$.", "solution": "Assume an ideal op-amp so that the input currents are zero and the op-amp enforces $v_{-}=v_{+}$. Denote the node voltages at the inverting and non-inverting inputs by $v_{-}$ and $v_{+}$, respectively.\n\nBy the resistor divider at the non-inverting input,\n$$\nv_{+}=\\frac{R_{4}}{R_{3}+R_{4}}\\,v_{2}.\n$$\nApplying KCL at the inverting node,\n$$\n\\frac{v_{1}-v_{-}}{R_{1}}+\\frac{v_{out}-v_{-}}{R_{2}}=0,\n$$\nand using $v_{-}=v_{+}$ gives\n$$\nv_{out}=\\left(1+\\frac{R_{2}}{R_{1}}\\right)\\frac{R_{4}}{R_{3}+R_{4}}\\,v_{2}-\\frac{R_{2}}{R_{1}}\\,v_{1}.\n$$\nDefine the ratios\n$$\nx=\\frac{R_{2}}{R_{1}},\\qquad y=\\frac{R_{4}}{R_{3}+R_{4}}.\n$$\nThen\n$$\nv_{out}=a\\,v_{2}+b\\,v_{1},\\quad a=(1+x)y,\\quad b=-x.\n$$\nWith $v_{d}=v_{2}-v_{1}$ and $v_{cm}=\\frac{v_{1}+v_{2}}{2}$, write $v_{1}=v_{cm}-\\frac{v_{d}}{2}$ and $v_{2}=v_{cm}+\\frac{v_{d}}{2}$. Substituting,\n$$\nv_{out}=(a+b)v_{cm}+\\frac{a-b}{2}\\,v_{d},\n$$\nso the common-mode and differential gains are\n$$\nA_{cm}=a+b=y+x(y-1),\\qquad A_{d}=\\frac{a-b}{2}=\\frac{y+x(y+1)}{2}.\n$$\n\nModel resistor tolerances as $R_{i}=R(1+\\epsilon_{i})$ with $|\\epsilon_{i}|\\leq\\delta$. Then\n$$\nx=\\frac{1+\\epsilon_{2}}{1+\\epsilon_{1}}\\in\\left[\\frac{1-\\delta}{1+\\delta},\\,\\frac{1+\\delta}{1-\\delta}\\right]\\equiv[u,\\,v]\n$$\nand\n$$\ny=\\frac{1+\\epsilon_{4}}{2+\\epsilon_{3}+\\epsilon_{4}}\\in\\left[\\frac{1-\\delta}{2},\\,\\frac{1+\\delta}{2}\\right]\\equiv[a,\\,b].\n$$\nThe function $A_{cm}(x,y)=y+x(y-1)$ is strictly decreasing in $x$ because $\\frac{\\partial A_{cm}}{\\partial x}=y-1<0$, and strictly increasing in $y$ because $\\frac{\\partial A_{cm}}{\\partial y}=1+x>0$. Therefore\n$$\nA_{cm,\\max}=A_{cm}(u,b)=b-u(1-b),\\qquad A_{cm,\\min}=A_{cm}(v,a)=a-v(1-a).\n$$\nUsing $a=\\frac{1-\\delta}{2}$, $b=\\frac{1+\\delta}{2}$, $u=\\frac{1-\\delta}{1+\\delta}$, $v=\\frac{1+\\delta}{1-\\delta}$, and the identities $1-b=a$ and $1-a=b$, we obtain\n$$\nA_{cm}(u,b)=\\frac{2\\delta}{1+\\delta},\\qquad A_{cm}(v,a)=-\\frac{2\\delta}{1-\\delta}.\n$$\nThus the largest magnitude of the common-mode gain is\n$$\n|A_{cm}|_{\\max}=\\frac{2\\delta}{1-\\delta}.\n$$\n\nNext evaluate the corresponding differential gain at the same worst-case corners. At $(x,y)=(v,a)$,\n$$\n2A_{d}=a+va+v=a(1+v)+v=\\frac{1-\\delta}{2}\\cdot\\frac{2}{1-\\delta}+v=1+v=\\frac{2}{1-\\delta},\n$$\nso\n$$\nA_{d}(v,a)=\\frac{1}{1-\\delta}.\n$$\nLikewise at $(x,y)=(u,b)$,\n$$\nA_{d}(u,b)=\\frac{1}{1+\\delta}.\n$$\n\nThe CMRR is $|A_{d}/A_{cm}|$. Using the pair that maximizes $|A_{cm}|$, namely $(x,y)=(v,a)$, yields\n$$\n\\text{CMRR}_{\\min}=\\left|\\frac{A_{d}}{A_{cm}}\\right|_{\\min}=\\frac{\\frac{1}{1-\\delta}}{\\frac{2\\delta}{1-\\delta}}=\\frac{1}{2\\delta}.\n$$\nThe other extreme $(x,y)=(u,b)$ gives the same ratio. Therefore, under worst-case resistor deviations within $\\pm\\delta$, the minimum possible CMRR is exactly\n$$\n\\frac{1}{2\\delta}.\n$$", "answer": "$$\\boxed{\\frac{1}{2\\delta}}$$", "id": "1293362"}]}
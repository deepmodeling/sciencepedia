{"hands_on_practices": [{"introduction": "Understanding the differential-mode gain begins with the canonical resistive-load differential pair. This exercise establishes the fundamental relationship between a transistor's transconductance ($g_m$), the load resistance ($R_D$), and the resulting voltage gain. By calculating the required resistor value to achieve a target gain [@problem_id:1297907], you will practice the foundational analysis that underpins nearly all differential amplifier designs.", "problem": "An engineer is designing the input stage of an operational amplifier, which employs a symmetric differential pair as its core. This circuit consists of two identical Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs) and two identical drain resistors, denoted as $R_D$. The transistors are biased in their saturation region and exhibit a transconductance, $g_m$, of $2.5 \\text{ mA/V}$. For this stage to meet performance specifications, the differential-mode voltage gain, defined as $A_d = v_{od}/v_{id}$ where $v_{od}$ is the differential output voltage and $v_{id}$ is the differential input voltage, must be precisely $-10 \\text{ V/V}$.\n\nAssuming the Early effect is negligible (i.e., the transistors' intrinsic output resistance $r_o$ is infinitely large) and the pair is biased by an ideal tail current source, calculate the necessary value for the drain resistor $R_D$.\n\nExpress your answer in kilo-ohms ($\\text{k}\\Omega$).", "solution": "The problem asks for the value of the drain resistor $R_D$ in a symmetric MOSFET differential pair required to achieve a specific differential-mode voltage gain $A_d$. We are given the transconductance $g_m$ of the transistors.\n\nThe differential-mode voltage gain, $A_d$, is defined as the ratio of the differential output voltage $v_{od}$ to the differential input voltage $v_{id}$:\n$$A_d = \\frac{v_{od}}{v_{id}}$$\n\nFor a small differential input voltage $v_{id}$, applied such that $v_{g1} = v_{id}/2$ and $v_{g2} = -v_{id}/2$ (where $v_{g1}$ and $v_{g2}$ are the small-signal gate voltages of the two MOSFETs), the resulting small-signal drain currents are given by:\n$$i_{d1} = g_m v_{gs1} = g_m \\frac{v_{id}}{2}$$\n$$i_{d2} = g_m v_{gs2} = g_m \\left(-\\frac{v_{id}}{2}\\right) = -g_m \\frac{v_{id}}{2}$$\nHere we have used the fact that the source terminals are common, so $v_{gs} = v_g - v_s$. For a differential input, the common source voltage $v_s$ does not change, so $\\Delta v_s = 0$, which means $v_{gs1} = v_{g1}$ and $v_{gs2} = v_{g2}$.\n\nThe small-signal output voltages at each drain, $v_{o1}$ and $v_{o2}$, are determined by the drain currents flowing through the drain resistors $R_D$. Since the problem states the transistor output resistance $r_o$ is infinite, it does not appear in parallel with $R_D$.\n$$v_{o1} = -i_{d1} R_D = -\\left(g_m \\frac{v_{id}}{2}\\right) R_D$$\n$$v_{o2} = -i_{d2} R_D = -\\left(-g_m \\frac{v_{id}}{2}\\right) R_D = \\left(g_m \\frac{v_{id}}{2}\\right) R_D$$\n\nThe differential output voltage $v_{od}$ is the difference between these two single-ended output voltages:\n$$v_{od} = v_{o1} - v_{o2} = \\left(-\\frac{g_m R_D v_{id}}{2}\\right) - \\left(\\frac{g_m R_D v_{id}}{2}\\right)$$\n$$v_{od} = -g_m R_D v_{id}$$\n\nNow, we can find the expression for the differential-mode gain $A_d$:\n$$A_d = \\frac{v_{od}}{v_{id}} = \\frac{-g_m R_D v_{id}}{v_{id}} = -g_m R_D$$\n\nWe are given the target gain $A_d = -10 \\text{ V/V}$ and the transconductance $g_m = 2.5 \\text{ mA/V}$. We can rearrange the gain formula to solve for $R_D$:\n$$R_D = -\\frac{A_d}{g_m}$$\n\nSubstitute the given numerical values into this expression. It is important to be consistent with units. We have $g_m = 2.5 \\text{ mA/V} = 2.5 \\times 10^{-3} \\text{ A/V}$.\n$$R_D = -\\frac{-10 \\text{ V/V}}{2.5 \\times 10^{-3} \\text{ A/V}} = \\frac{10}{2.5 \\times 10^{-3}} \\, \\Omega$$\n$$R_D = \\frac{10}{0.0025} \\, \\Omega = 4000 \\, \\Omega$$\n\nThe problem asks for the answer to be expressed in kilo-ohms ($\\text{k}\\Omega$).\n$$R_D = 4000 \\, \\Omega = 4 \\text{ k}\\Omega$$", "answer": "$$\\boxed{4}$$", "id": "1297907"}, {"introduction": "Ideal models are excellent for building intuition, but real-world circuits have limitations. This practice moves from an idealized MOSFET to a BJT differential pair and introduces a critical non-ideality: the Early effect, which results in a finite output resistance ($r_o$). By analyzing how this resistance in parallel with the load resistor impacts the single-ended differential gain [@problem_id:1297871], you will learn how to account for first-order device limitations that set a ceiling on achievable performance.", "problem": "An engineer is designing the input stage of a bio-potential amplifier using a classic Bipolar Junction Transistor (BJT) differential pair. The circuit consists of two identical NPN transistors, $Q_1$ and $Q_2$. Their emitters are joined and connected to a negative supply via an ideal DC current source that sinks a constant current $I_{EE}$. The collectors of $Q_1$ and $Q_2$ are each connected to a positive supply voltage through identical resistors, $R_{C1} = R_{C2} = R_C$.\n\nThe input signal is a purely differential AC voltage $v_{id}$ applied between the bases of the two transistors. The DC bias conditions are established to ensure both transistors operate in the forward-active region. The transistors are not ideal and exhibit the Early effect, which is characterized by a finite Early voltage, $V_A$. For small-signal analysis, the output resistance of each transistor due to this effect can be modeled as $r_o = V_A / I_{CQ}$, where $I_{CQ}$ is the quiescent DC collector current. The transistor current gain, $\\beta$, is assumed to be large enough to neglect the base currents for DC biasing calculations. The thermal voltage is given by the constant $V_T$.\n\nThe circuit's output, $v_{o1}$, is the single-ended AC voltage measured at the collector of transistor $Q_1$. Determine the expression for the differential-mode voltage gain, defined as $A_d = v_{o1} / v_{id}$, in terms of the parameters $I_{EE}$, $R_C$, $V_A$, and $V_T$.", "solution": "Because the tail source is ideal (infinite small-signal resistance) and the pair is symmetric, the DC collector currents are equal:\n$$\nI_{CQ}=\\frac{I_{EE}}{2}.\n$$\nThe small-signal transconductance of each transistor is\n$$\ng_{m}=\\frac{I_{CQ}}{V_{T}}=\\frac{I_{EE}}{2V_{T}}.\n$$\nThe Early effect is modeled by the output resistance\n$$\nr_{o}=\\frac{V_{A}}{I_{CQ}}=\\frac{2V_{A}}{I_{EE}}.\n$$\nUnder purely differential excitation, with an ideal tail source, the common emitter node is an AC ground in differential mode, so the small-signal base-emitter voltage of $Q_{1}$ is\n$$\nv_{be1}=\\frac{v_{id}}{2}.\n$$\nUsing the hybrid-$\\pi$ small-signal model for $Q_{1}$ and writing KCL at the collector node (which is connected to AC ground through $R_{C}$ and to the emitter, AC ground, through $r_{o}$), the currents leaving the node satisfy\n$$\n\\frac{v_{o1}}{R_{C}}+\\frac{v_{o1}}{r_{o}}+g_{m}v_{be1}=0.\n$$\nSolving for $v_{o1}$ gives\n$$\nv_{o1}=-g_{m}v_{be1}\\left(R_{C}\\parallel r_{o}\\right),\n$$\nhence the single-ended differential gain is\n$$\nA_{d}=\\frac{v_{o1}}{v_{id}}=-\\frac{g_{m}}{2}\\left(R_{C}\\parallel r_{o}\\right).\n$$\nSubstituting $g_{m}=\\frac{I_{EE}}{2V_{T}}$ and $r_{o}=\\frac{2V_{A}}{I_{EE}}$,\n$$\nA_{d}=-\\frac{I_{EE}}{4V_{T}}\\left(R_{C}\\parallel\\frac{2V_{A}}{I_{EE}}\\right).\n$$\nEliminating the parallel operator,\n$$\nR_{C}\\parallel\\frac{2V_{A}}{I_{EE}}=\\frac{R_{C}\\left(\\frac{2V_{A}}{I_{EE}}\\right)}{R_{C}+\\frac{2V_{A}}{I_{EE}}}=\\frac{2V_{A}R_{C}}{I_{EE}R_{C}+2V_{A}},\n$$\nso the gain can be written explicitly as\n$$\nA_{d}=-\\frac{I_{EE}}{4V_{T}}\\cdot\\frac{2V_{A}R_{C}}{I_{EE}R_{C}+2V_{A}}=-\\frac{V_{A}R_{C}I_{EE}}{2V_{T}\\left(I_{EE}R_{C}+2V_{A}\\right)}.\n$$\nAs a check, in the limit $V_{A}\\to\\infty$ (i.e., $r_{o}\\to\\infty$), this reduces to $A_{d}=-\\frac{I_{EE}}{4V_{T}}R_{C}$, the familiar result without Early effect.", "answer": "$$\\boxed{-\\frac{V_{A}R_{C}I_{EE}}{2V_{T}\\left(I_{EE}R_{C}+2V_{A}\\right)}}$$", "id": "1297871"}, {"introduction": "Effective analog design is a game of trade-offs, balancing performance, power, and area. This problem elevates your analysis by introducing a Figure of Merit (FoM) that quantifies the efficiency of a design in terms of gain per unit of power consumed. You will explore how physical device dimensions, specifically the transistor's width-to-length ratio ($W/L$), can be manipulated to improve this FoM, providing insight into the designer's task of optimizing a circuit beyond simple gain calculations [@problem_id:1297845].", "problem": "An analog circuit designer is evaluating a differential amplifier built with a matched pair of n-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), $M_1$ and $M_2$. The amplifier is biased by an ideal constant current source that sinks a total current $I_{SS}$. Each transistor has an identical resistive load $R_D$ connected between its drain and the positive supply voltage $V_{DD}$. In this configuration, the total DC power, $P_{DC}$, drawn by the two transistors and their loads from the supply is $P_{DC} = V_{DD} I_{SS}$.\n\nA key performance metric under consideration is a Figure of Merit (FoM), defined as the ratio of the magnitude of the differential-mode voltage gain, $|A_d|$, to the total DC power consumption, $P_{DC}$.\n$$ \\text{FoM} = \\frac{|A_d|}{P_{DC}} $$\nThe original design uses transistors with a width-to-length ratio of $(W/L)_{orig}$. The designer proposes a modification where the width of both input transistors is doubled, while their length is kept the same, resulting in a new ratio of $(W/L)_{new} = 2(W/L)_{orig}$. For this new design, the total bias current $I_{SS}$, the supply voltage $V_{DD}$, and the load resistors $R_D$ are all kept identical to the original design.\n\nAssuming both transistors operate in the saturation region and that channel-length modulation effects are negligible ($\\lambda = 0$), calculate the ratio of the new Figure of Merit, $FoM_{new}$, to the original Figure of Merit, $FoM_{orig}$.", "solution": "The differential pair is biased by an ideal current source of value $I_{SS}$; at the symmetric operating point each transistor carries $I_{D} = I_{SS}/2$. With $\\lambda = 0$ and identical loads $R_{D}$ to $V_{DD}$, use small-signal differential analysis with an ideal tail source (infinite small-signal resistance): under differential excitation $v_{id}$, the source node is at AC ground.\n\nLet $v_{g1} = +\\frac{v_{id}}{2}$ and $v_{g2} = -\\frac{v_{id}}{2}$. Then $v_{gs1} = +\\frac{v_{id}}{2}$ and $v_{gs2} = -\\frac{v_{id}}{2}$. The small-signal drain currents are $i_{d1} = g_{m}\\left(\\frac{v_{id}}{2}\\right)$ and $i_{d2} = g_{m}\\left(-\\frac{v_{id}}{2}\\right)$. With loads $R_{D}$ and neglecting $r_{o}$, the small-signal outputs are\n$$\nv_{o1} = -g_{m} R_{D} \\frac{v_{id}}{2}, \\qquad v_{o2} = +g_{m} R_{D} \\frac{v_{id}}{2}.\n$$\nHence the differential output is\n$$\nv_{od} = v_{o1} - v_{o2} = -g_{m} R_{D} v_{id},\n$$\nso the magnitude of the differential-mode gain is\n$$\n|A_{d}| = g_{m} R_{D}.\n$$\n\nThe Figure of Merit is\n$$\n\\text{FoM} = \\frac{|A_{d}|}{P_{DC}} = \\frac{g_{m} R_{D}}{V_{DD} I_{SS}},\n$$\nand since $R_{D}$, $V_{DD}$, and $I_{SS}$ are unchanged, the FoM scales directly with $g_{m}$.\n\nFor a MOSFET in saturation with $\\lambda=0$,\n$$\nI_{D} = \\frac{1}{2} \\mu_{n} C_{ox} \\frac{W}{L} V_{ov}^{2}, \\qquad g_{m} = \\mu_{n} C_{ox} \\frac{W}{L} V_{ov} = \\sqrt{2 \\mu_{n} C_{ox} \\frac{W}{L} I_{D}}.\n$$\nAt the operating point, $I_{D} = I_{SS}/2$ is fixed by the tail current and symmetry, so\n$$\ng_{m} \\propto \\sqrt{\\frac{W}{L}}.\n$$\nDoubling the width at fixed length gives $\\left(\\frac{W}{L}\\right)_{new} = 2 \\left(\\frac{W}{L}\\right)_{orig}$, hence\n$$\n\\frac{g_{m,new}}{g_{m,orig}} = \\sqrt{2}.\n$$\n\nSince $P_{DC} = V_{DD} I_{SS}$ is unchanged, the ratio of Figures of Merit equals the ratio of transconductances:\n$$\n\\frac{\\text{FoM}_{new}}{\\text{FoM}_{orig}} = \\frac{g_{m,new}}{g_{m,orig}} = \\sqrt{2}.\n$$", "answer": "$$\\boxed{\\sqrt{2}}$$", "id": "1297845"}]}
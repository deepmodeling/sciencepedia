{"hands_on_practices": [{"introduction": "To achieve significant signal amplification, individual amplifier stages are often connected in series, or \"cascaded.\" However, the overall gain is not simply the product of the individual, isolated gains. This first exercise [@problem_id:1287036] delves into the crucial concept of inter-stage loading, where the input impedance of the second stage affects the performance of the first. By calculating the loaded voltage gain of a classic Common-Emitter (CE) amplifier, you will develop a fundamental understanding of how to correctly analyze the performance of multi-stage circuits.", "problem": "An audio pre-amplifier is being designed using a two-stage cascaded Common-Emitter (CE) amplifier configuration. Both stages are built using identical NPN Bipolar Junction Transistors (BJTs). The circuit is biased using a standard four-resistor voltage divider network for each stage. Assume a standard base-emitter forward voltage of $V_{BE} = 0.7 \\text{ V}$ for DC analysis, and that the circuit operates at a temperature where the thermal voltage is $V_T = 25 \\text{ mV}$. The BJTs have a current gain of $\\beta = 120$ and a very large Early voltage, such that the Early effect can be neglected. The power supply voltage for the entire circuit is $V_{CC} = 15 \\text{ V}$.\n\nThe component values for the first amplifier stage are:\n- Collector resistor: $R_{C1} = 6.8 \\text{ k}\\Omega$\n- Emitter resistor: $R_{E1} = 1.0 \\text{ k}\\Omega$\n- Base biasing resistor 1 (connected to $V_{CC}$): $R_{1A} = 82 \\text{ k}\\Omega$\n- Base biasing resistor 2 (connected to ground): $R_{2A} = 18 \\text{ k}\\Omega$\n\nThe component values for the second amplifier stage are:\n- Collector resistor: $R_{C2} = 4.3 \\text{ k}\\Omega$\n- Emitter resistor: $R_{E2} = 750 \\text{ }\\Omega$\n- Base biasing resistor 1 (connected to $V_{CC}$): $R_{1B} = 68 \\text{ k}\\Omega$\n- Base biasing resistor 2 (connected to ground): $R_{2B} = 13 \\text{ k}\\Omega$\n\nAll coupling and bypass capacitors are large enough that their impedance can be considered a short circuit at the signal frequencies of interest. The emitter resistors $R_{E1}$ and $R_{E2}$ are fully bypassed by capacitors, meaning their impedance is zero for AC analysis.\n\nCalculate the loaded AC voltage gain ($A_{v1} = v_{out1}/v_{in1}$) of the first stage. The output of the first stage is taken at the collector of its BJT, and it is capacitively coupled to the input (base) of the second stage. Round your final answer to three significant figures.", "solution": "Because coupling and bypass capacitors are AC shorts and the Early effect is neglected, each CE stage can be analyzed with the hybrid-\\pi model where the emitter is at AC ground (external emitter resistors fully bypassed). The first-stage small-signal gain is the classic CE result with load:\n$$A_{v1}=-g_{m1}\\left(R_{C1}\\parallel R_{\\text{in2}}\\right),$$\nwhere $g_{m1}=I_{C1}/V_{T}$ is set by the first-stage DC bias, and $R_{\\text{in2}}$ is the input resistance of stage 2 seen at its base (including its bias network), given by\n$$R_{\\text{in2}}=\\left(R_{1B}\\parallel R_{2B}\\parallel r_{\\pi 2}\\right),\\quad r_{\\pi 2}=\\frac{\\beta V_{T}}{I_{C2}}.$$\n\nFirst-stage DC bias uses the Thevenin equivalent of its base divider. With $R_{1A}$ from $V_{CC}$ to base and $R_{2A}$ to ground:\n$$V_{\\text{TH1}}=V_{CC}\\frac{R_{2A}}{R_{1A}+R_{2A}},\\quad R_{\\text{TH1}}=R_{1A}\\parallel R_{2A}.$$\nIncluding base-current loading, the emitter and collector currents are\n$$I_{E1}=\\frac{V_{\\text{TH1}}-V_{BE}}{R_{E1}+\\frac{R_{\\text{TH1}}}{\\beta+1}},\\qquad I_{C1}=\\frac{\\beta}{\\beta+1}I_{E1},\\qquad g_{m1}=\\frac{I_{C1}}{V_{T}}.$$\nUsing the given values $V_{CC}=15\\ \\text{V}$, $R_{1A}=82\\ \\text{k}\\Omega$, $R_{2A}=18\\ \\text{k}\\Omega$, $R_{E1}=1.0\\ \\text{k}\\Omega$, $\\beta=120$, $V_{BE}=0.7\\ \\text{V}$, $V_{T}=25\\ \\text{mV}$:\n$$V_{\\text{TH1}}=15\\cdot\\frac{18}{82+18}=2.7\\ \\text{V},\\quad R_{\\text{TH1}}=\\frac{82\\cdot 18}{82+18}\\ \\text{k}\\Omega=14.76\\ \\text{k}\\Omega,$$\n$$I_{E1}=\\frac{2.7-0.7}{1000+\\frac{14760}{121}}=\\frac{2.0}{1121.983}\\ \\text{A}=1.783\\times 10^{-3}\\ \\text{A},$$\n$$I_{C1}=\\frac{120}{121}I_{E1}=1.768\\times 10^{-3}\\ \\text{A},\\qquad g_{m1}=\\frac{1.768\\times 10^{-3}}{0.025}=7.074\\times 10^{-2}\\ \\text{S}.$$\n\nSecond-stage DC bias (independent due to coupling capacitor) similarly gives $I_{C2}$ and then $r_{\\pi 2}$. With $R_{1B}=68\\ \\text{k}\\Omega$, $R_{2B}=13\\ \\text{k}\\Omega$, $R_{E2}=750\\ \\Omega$:\n$$V_{\\text{TH2}}=15\\cdot\\frac{13}{68+13}=\\frac{195}{81}=2.4074\\ \\text{V},\\quad R_{\\text{TH2}}=\\frac{68\\cdot 13}{68+13}\\ \\text{k}\\Omega=\\frac{884}{81}\\ \\text{k}\\Omega=10.9136\\ \\text{k}\\Omega,$$\n$$I_{E2}=\\frac{V_{\\text{TH2}}-V_{BE}}{R_{E2}+\\frac{R_{\\text{TH2}}}{\\beta+1}}=\\frac{1.7074}{750+\\frac{10913.58}{121}}=\\frac{1.7074}{840.195}\\ \\text{A}=2.032\\times 10^{-3}\\ \\text{A},$$\n$$I_{C2}=\\frac{120}{121}I_{E2}=2.015\\times 10^{-3}\\ \\text{A},\\qquad r_{\\pi 2}=\\frac{\\beta V_{T}}{I_{C2}}=\\frac{120\\cdot 0.025}{2.015\\times 10^{-3}}=1.49\\times 10^{3}\\ \\Omega.$$\nThus the second-stage input resistance is\n$$R_{\\text{in2}}=R_{1B}\\parallel R_{2B}\\parallel r_{\\pi 2}=10.9136\\ \\text{k}\\Omega\\parallel 1.488\\ \\text{k}\\Omega=1.310\\ \\text{k}\\Omega.$$\n\nThe first-stage collector is loaded by $R_{\\text{in2}}$ through the coupling capacitor, so the effective collector load is\n$$R_{L1}=R_{C1}\\parallel R_{\\text{in2}}=6.8\\ \\text{k}\\Omega\\parallel 1.310\\ \\text{k}\\Omega=1.098\\times 10^{3}\\ \\Omega.$$\n\nTherefore, the loaded first-stage AC voltage gain is\n$$A_{v1}=-g_{m1}R_{L1}=-(7.074\\times 10^{-2})\\times(1.098\\times 10^{3})=-7.77\\times 10^{1}.$$\nRounded to three significant figures,\n$$A_{v1}=-77.7.$$", "answer": "$$\\boxed{-77.7}$$", "id": "1287036"}, {"introduction": "While capacitors are commonly used to couple amplifier stages, another important technique, especially in integrated circuits, is direct coupling. This method avoids the low-frequency limitations of coupling capacitors but introduces a new challenge: the DC biasing of each stage becomes directly dependent on the previous one. This practice problem [@problem_id:1287034] shifts our focus to MOSFET-based amplifiers and illustrates this core principle of direct-coupled design, forcing you to determine the precise DC output voltage of one stage required to establish the correct operating point for the next.", "problem": "Consider a two-stage amplifier constructed from two identical N-channel Metal-Oxide-Semiconductor (NMOS) transistors, $M_1$ and $M_2$. Both transistors are arranged in a Common-Source (CS) configuration with their source terminals connected to ground. The amplifier stages are directly coupled, meaning the drain terminal of $M_1$ is connected directly to the gate terminal of $M_2$. The circuit is powered by a single DC voltage supply, $V_{DD} = 5.0$ V. The drain of each transistor is connected to the supply $V_{DD}$ through a drain resistor, $R_{D1}$ for $M_1$ and $R_{D2}$ for $M_2$.\n\nBoth transistors have an identical threshold voltage $V_{tn} = 0.70$ V and an identical transconductance parameter $k_n = 1.0 \\text{ mA/V}^2$. The drain current $I_D$ for a transistor operating in the saturation region is given by the expression $I_D = k_n (V_{GS} - V_{tn})^2$, where $V_{GS}$ is the gate-source voltage. You may neglect the channel-length modulation effect (i.e., assume the output resistance $r_o$ is infinite).\n\nThe DC biasing of the amplifier is designed to set the quiescent operating point of the second stage ($M_2$) to have a drain current $I_{D2,Q} = 0.50$ mA and a drain voltage $V_{D2,Q} = 2.5$ V. It is confirmed that this operating point places $M_2$ in the saturation region.\n\nTo achieve this specific quiescent condition for the second stage, what is the required DC voltage at the drain of the first transistor, $V_{D1,Q}$? Express your answer in volts, rounded to three significant figures.", "solution": "The two stages are directly coupled, so the gate of the second transistor is tied to the drain of the first transistor. With sources grounded, the gate-source voltage of the second transistor is equal to the drain voltage of the first transistor:\n$$\nV_{GS2} = V_{G2} - V_{S2} = V_{D1} - 0 = V_{D1}.\n$$\nFor an NMOS transistor in saturation (with channel-length modulation neglected), the drain current is\n$$\nI_{D2} = k_{n}\\left(V_{GS2} - V_{tn}\\right)^{2}.\n$$\nSolving for the required gate-source voltage to realize the specified quiescent current,\n$$\nV_{GS2} = V_{tn} + \\sqrt{\\frac{I_{D2}}{k_{n}}}.\n$$\nBecause $V_{GS2} = V_{D1}$ in this circuit, the required DC drain voltage of $M_{1}$ is\n$$\nV_{D1,Q} = V_{tn} + \\sqrt{\\frac{I_{D2,Q}}{k_{n}}}.\n$$\nSubstituting the given numerical values $V_{tn} = 0.70$, $I_{D2,Q} = 0.50 \\text{ mA}$, and $k_{n} = 1.0 \\text{ mA/V}^{2}$,\n$$\nV_{D1,Q} = 0.70 + \\sqrt{\\frac{0.50}{1.0}} = 0.70 + \\sqrt{0.50} \\approx 0.70 + 0.70710678 \\approx 1.40710678.\n$$\nRounded to three significant figures, this yields $V_{D1,Q} \\approx 1.41$. As a consistency check for saturation of $M_{2}$, the overdrive is $V_{OV2} = V_{GS2} - V_{tn} \\approx 0.707$, and $V_{D2,Q} = 2.5$ satisfies $V_{D2,Q} \\geq V_{OV2}$, confirming saturation.", "answer": "$$\\boxed{1.41}$$", "id": "1287034"}, {"introduction": "Beyond voltage gain, a critical performance metric for any amplifier is its maximum output voltage swingâ€”the range it can operate in before the signal becomes distorted or \"clipped.\" This maximum swing is determined by the transistor's DC bias point and the total AC load it must drive. This final practice [@problem_id:1287040] synthesizes the concepts of DC analysis and AC loading to evaluate this practical performance limit. You will see how the loading from a subsequent stage not only reduces gain but also constrains the signal handling capability of the amplifier.", "problem": "An audio pre-amplifier circuit consists of two identical, cascaded, RC-coupled amplifier stages. Each stage is a Common Emitter (CE) amplifier configured with a voltage-divider bias network. The circuit is powered by a single DC supply voltage $V_{CC} = 15 \\text{ V}$. For each stage, the biasing resistors are $R_1 = 47 \\text{ k}\\Omega$ and $R_2 = 10 \\text{ k}\\Omega$, the collector resistor is $R_C = 4.7 \\text{ k}\\Omega$, and the emitter resistor is $R_E = 1.0 \\text{ k}\\Omega$.\n\nBoth transistors are identical and have a DC current gain $\\beta_{DC}$ and an AC current gain $\\beta_{ac}$ which can be assumed to be equal, with a value of $\\beta = 120$. The base-emitter voltage drop during forward-biased operation is $V_{BE,on} = 0.7 \\text{ V}$, and the collector-emitter saturation voltage is $V_{CE,sat} = 0.2 \\text{ V}$. Assume the thermal voltage is $V_T = 25 \\text{ mV}$.\n\nFor the purpose of AC analysis, assume that all coupling and bypass capacitors act as perfect short circuits at the signal frequencies of interest. The Early voltage of the transistors is considered to be infinite.\n\nCalculate the maximum symmetrical peak-to-peak output voltage swing that can be obtained from the collector of the *first* stage, considering the loading effect of the second stage. Express your answer in volts, rounded to three significant figures.", "solution": "The DC operating point of the first CE stage is found using the voltage-divider Thevenin equivalent. For the base network,\n$$V_{\\text{TH}} = V_{CC}\\frac{R_{2}}{R_{1}+R_{2}}, \\quad R_{\\text{TH}} = R_{1}\\parallel R_{2} = \\frac{R_{1}R_{2}}{R_{1}+R_{2}}.$$\nWith base current $I_{B}$ flowing, KVL at the base gives\n$$V_{\\text{TH}} - I_{B}R_{\\text{TH}} = V_{BE,on} + I_{E}R_{E}, \\quad I_{E} = (\\beta+1)I_{B},$$\nhence\n$$I_{B} = \\frac{V_{\\text{TH}} - V_{BE,on}}{R_{\\text{TH}} + (\\beta+1)R_{E}}, \\quad I_{C,Q} = \\beta I_{B}, \\quad I_{E,Q} = (\\beta+1)I_{B}.$$\nNumerically,\n$$V_{\\text{TH}} = 15 \\cdot \\frac{10\\,\\text{k}\\Omega}{47\\,\\text{k}\\Omega+10\\,\\text{k}\\Omega} = 2.631578947\\ \\text{V},$$\n$$R_{\\text{TH}} = \\frac{47\\,\\text{k}\\Omega \\cdot 10\\,\\text{k}\\Omega}{57\\,\\text{k}\\Omega} = 8.245614035\\ \\text{k}\\Omega,$$\n$$I_{B} = \\frac{2.631578947 - 0.7}{8.245614035\\times 10^{3} + 121\\times 10^{3}} = 1.4948\\times 10^{-5}\\ \\text{A},$$\n$$I_{C,Q} = 120\\,I_{B} = 1.79376\\times 10^{-3}\\ \\text{A}, \\quad I_{E,Q} = 121\\,I_{B} = 1.808708\\times 10^{-3}\\ \\text{A}.$$\nThus\n$$V_{E,Q} = I_{E,Q}R_{E} = 1.808708\\ \\text{V}, \\quad V_{C,Q} = V_{CC} - I_{C,Q}R_{C} = 15 - (1.79376\\times 10^{-3})(4.7\\times 10^{3}) = 6.569328\\ \\text{V}.$$\n\nFor AC analysis, with emitter bypassed, the small-signal parameters are\n$$g_{m} = \\frac{I_{C,Q}}{V_{T}} = \\frac{1.79376\\times 10^{-3}}{25\\times 10^{-3}} = 0.0717504\\ \\text{S}, \\quad r_{\\pi} = \\frac{\\beta}{g_{m}} = \\frac{120}{0.0717504} = 1672.620\\ \\Omega.$$\nThe input resistance of the second stage (seen at its base) loads the first-stage collector through the coupling capacitor. With $V_{CC}$ as AC ground, the load is\n$$R_{L} = R_{1} \\parallel R_{2} \\parallel r_{\\pi} = 8.245614035\\ \\text{k}\\Omega \\parallel 1672.620\\ \\Omega = 1392.002\\ \\Omega.$$\nThe effective AC collector load of the first stage is\n$$R_{\\text{eq}} = R_{C} \\parallel R_{L} = 4.7\\ \\text{k}\\Omega \\parallel 1.392002\\ \\text{k}\\Omega = 1073.934\\ \\Omega.$$\n\nThe small-signal relation at the collector is $v_{c} = -i_{c}R_{\\text{eq}}$ (with $i_{c}$ the incremental collector-current change). The maximum upward swing occurs when the instantaneous collector current falls to zero, i.e., $i_{c,\\min} = -I_{C,Q}$, giving the positive peak amplitude\n$$A_{\\uparrow} = I_{C,Q} R_{\\text{eq}} = (1.79376\\times 10^{-3})(1073.934) = 1.92638\\ \\text{V}.$$\nThe maximum downward swing is limited by saturation, $V_{CE} \\geq V_{CE,sat}$, so the minimum collector voltage is $V_{C,\\min} = V_{E,Q} + V_{CE,sat}$. The negative peak amplitude is\n$$A_{\\downarrow} = V_{C,Q} - (V_{E,Q} + V_{CE,sat}) = 6.569328 - (1.808708 + 0.2) = 4.56062\\ \\text{V}.$$\nTherefore the maximum symmetrical peak amplitude is\n$$A_{\\text{sym}} = \\min\\{A_{\\uparrow}, A_{\\downarrow}\\} = 1.92638\\ \\text{V},$$\nand the corresponding peak-to-peak swing is\n$$V_{\\text{pp,max}} = 2A_{\\text{sym}} = 3.85276\\ \\text{V} \\approx 3.85\\ \\text{V} \\text{ (to three significant figures).}$$", "answer": "$$\\boxed{3.85}$$", "id": "1287040"}]}
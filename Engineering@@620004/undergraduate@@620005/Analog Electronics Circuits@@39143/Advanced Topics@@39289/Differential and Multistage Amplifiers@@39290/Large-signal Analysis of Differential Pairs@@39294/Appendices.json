{"hands_on_practices": [{"introduction": "The fundamental action of a differential pair is \"current steering,\" where a differential input voltage, $v_{id}$, precisely controls how a constant tail current is divided between two transistors. This first practice problem takes you to the heart of this large-signal behavior. By analyzing how much input voltage is needed to divert a large majority of the current to one side, you will develop a hands-on feel for the non-linear transfer characteristic that governs these essential analog building blocks.", "problem": "A fundamental building block in analog integrated circuits is the differential pair. Consider such a circuit built with two identical n-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), M1 and M2. The sources of M1 and M2 are connected together and biased by an ideal constant current source that sinks a tail current $I_{SS}$. The transistors are designed to operate in the saturation region and their behavior is accurately described by the square-law model for drain current, $I_D = \\frac{1}{2} k'_n \\frac{W}{L} (V_{GS} - V_{th})^2$, where channel-length modulation is negligible. The gates of M1 and M2 serve as the differential inputs, with gate voltages $v_{g1}$ and $v_{g2}$ respectively.\n\nThe circuit is characterized by the following parameters:\n- Tail current, $I_{SS} = 200 \\ \\mu\\text{A}$\n- Process transconductance parameter, $k'_n = 100 \\ \\mu\\text{A/V}^2$\n- Transistor aspect ratio, $W/L = 20$\n\nDetermine the positive differential input voltage, defined as $v_{id} = v_{g1} - v_{g2}$, that is required to make the drain current of transistor M1, $i_{D1}$, equal to 95% of the total tail current $I_{SS}$.\n\nExpress your final answer in millivolts (mV) and round it to three significant figures.", "solution": "The problem asks for the differential input voltage $v_{id}$ that causes a specific imbalance in the drain currents of a MOSFET differential pair. We are given the tail current $I_{SS}$, the process transconductance parameter $k'_n$, and the aspect ratio $W/L$. The transistors M1 and M2 are identical and operate in saturation.\n\nFirst, let's write down the governing equations for the drain currents, $i_{D1}$ and $i_{D2}$, based on the provided square-law model:\n$$i_{D1} = \\frac{1}{2} k_n (v_{GS1} - V_{th})^2$$\n$$i_{D2} = \\frac{1}{2} k_n (v_{GS2} - V_{th})^2$$\nwhere $k_n = k'_n \\frac{W}{L}$ is the transistor transconductance parameter, $v_{GS1}$ and $v_{GS2}$ are the gate-source voltages of M1 and M2, and $V_{th}$ is the threshold voltage.\n\nThe sum of the drain currents must equal the tail current provided by the current source:\n$$i_{D1} + i_{D2} = I_{SS}$$\n\nThe differential input voltage $v_{id}$ is defined as the difference between the gate voltages:\n$$v_{id} = v_{g1} - v_{g2}$$\nSince the sources of both transistors are connected to the same node (let's call its voltage $v_s$), we can express the gate-source voltages as $v_{GS1} = v_{g1} - v_s$ and $v_{GS2} = v_{g2} - v_s$. Therefore, the differential input voltage can be written as the difference between the gate-source voltages:\n$$v_{id} = (v_{g1} - v_s) - (v_{g2} - v_s) = v_{GS1} - v_{GS2}$$\n\nTo find $v_{id}$, we first need to express $v_{GS1}$ and $v_{GS2}$ in terms of the drain currents. From the drain current equations, we can solve for the gate-source voltages (assuming $v_{GS} > V_{th}$):\n$$v_{GS1} = V_{th} + \\sqrt{\\frac{2 i_{D1}}{k_n}}$$\n$$v_{GS2} = V_{th} + \\sqrt{\\frac{2 i_{D2}}{k_n}}$$\n\nNow, we substitute these into the expression for $v_{id}$:\n$$v_{id} = \\left(V_{th} + \\sqrt{\\frac{2 i_{D1}}{k_n}}\\right) - \\left(V_{th} + \\sqrt{\\frac{2 i_{D2}}{k_n}}\\right)$$\nThe threshold voltage $V_{th}$ cancels out:\n$$v_{id} = \\sqrt{\\frac{2}{k_n}} \\left(\\sqrt{i_{D1}} - \\sqrt{i_{D2}}\\right)$$\n\nThe problem states that $i_{D1}$ is 95% of $I_{SS}$:\n$$i_{D1} = 0.95 I_{SS}$$\nFrom the current summation rule, we can find $i_{D2}$:\n$$i_{D2} = I_{SS} - i_{D1} = I_{SS} - 0.95 I_{SS} = 0.05 I_{SS}$$\n\nSubstitute these expressions for $i_{D1}$ and $i_{D2}$ back into the equation for $v_{id}$:\n$$v_{id} = \\sqrt{\\frac{2}{k_n}} \\left(\\sqrt{0.95 I_{SS}} - \\sqrt{0.05 I_{SS}}\\right)$$\nWe can factor out $\\sqrt{I_{SS}}$:\n$$v_{id} = \\sqrt{\\frac{2 I_{SS}}{k_n}} \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n\nNow, we can substitute the numerical values provided in the problem. First, calculate the transconductance parameter $k_n$:\n$$k_n = k'_n \\frac{W}{L} = (100 \\ \\mu\\text{A/V}^2) \\times 20 = 2000 \\ \\mu\\text{A/V}^2 = 2.0 \\times 10^{-3} \\ \\text{A/V}^2$$\nThe tail current is $I_{SS} = 200 \\ \\mu\\text{A} = 2.0 \\times 10^{-4} \\ \\text{A}$.\n\nSubstitute these values into the equation for $v_{id}$:\n$$v_{id} = \\sqrt{\\frac{2 \\times (2.0 \\times 10^{-4} \\ \\text{A})}{2.0 \\times 10^{-3} \\ \\text{A/V}^2}} \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n$$v_{id} = \\sqrt{\\frac{4.0 \\times 10^{-4}}{2.0 \\times 10^{-3}}} \\ \\text{V} \\cdot \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n$$v_{id} = \\sqrt{0.2} \\ \\text{V} \\cdot \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n\nNow, we calculate the numerical values of the terms:\n$$\\sqrt{0.2} \\approx 0.44721$$\n$$\\sqrt{0.95} \\approx 0.97468$$\n$$\\sqrt{0.05} \\approx 0.22361$$\n\n$$v_{id} \\approx 0.44721 \\times (0.97468 - 0.22361) \\ \\text{V}$$\n$$v_{id} \\approx 0.44721 \\times 0.75107 \\ \\text{V}$$\n$$v_{id} \\approx 0.33591 \\ \\text{V}$$\n\nThe problem asks for the answer in millivolts (mV).\n$$v_{id} \\approx 335.91 \\ \\text{mV}$$\nRounding to three significant figures, we get:\n$$v_{id} \\approx 336 \\ \\text{mV}$$", "answer": "$$\\boxed{336}$$", "id": "1314131"}, {"introduction": "While current steering is the underlying mechanism, the ultimate goal of a differential amplifier is often to produce a voltage output. This practice connects the input voltage to the differential output voltage, $v_{od}$, by adding load resistors, allowing you to explore the circuit's voltage transfer characteristic. You will determine the input required to drive the output to a specific point—halfway to its maximum—providing insight into the sigmoidal response curve and the amplifier's gain saturation.", "problem": "Consider a foundational analog circuit, the differential amplifier, constructed using two identical n-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), labeled M1 and M2. The source terminals of both transistors are connected together to a single node, which is then connected to an ideal constant DC current source that sinks a current $I_{SS}$. The drain of M1 is connected to a positive voltage supply $V_{DD}$ through a load resistor $R_D$, and the drain of M2 is connected to the same supply $V_{DD}$ through an identical load resistor $R_D$.\n\nThe gate of M1 serves as the non-inverting input $v_{i1}$, and the gate of M2 serves as the inverting input $v_{i2}$. The differential input voltage is defined as $v_{id} = v_{i1} - v_{i2}$. The drain voltages, $v_{o1}$ and $v_{o2}$ respectively, form the outputs, with the differential output voltage defined as $v_{od} = v_{o2} - v_{o1}$.\n\nAssume that both transistors M1 and M2 are always operating in the saturation region and can be described by the simple square-law model, where the drain current $I_D$ is given by $I_D = \\frac{1}{2} k_n (V_{GS} - V_{th})^2$ for $V_{GS} > V_{th}$. Here, $k_n$ is the transistor's process transconductance parameter, $V_{GS}$ is the gate-to-source voltage, and $V_{th}$ is the threshold voltage. You may neglect channel-length modulation and any other second-order effects.\n\nDetermine the positive differential input voltage $v_{id}$ for which the differential output voltage $v_{od}$ is exactly equal to half of its maximum possible positive value. Express your answer as a symbolic expression in terms of $I_{SS}$ and $k_n$.", "solution": "Let the drain currents of M1 and M2 be $I_{1}$ and $I_{2}$, respectively. The ideal tail source enforces the current constraint\n$$\nI_{1}+I_{2}=I_{SS}.\n$$\nWith identical load resistors $R_{D}$ to $V_{DD}$ and neglecting channel-length modulation, the output voltages are $v_{o1}=V_{DD}-I_{1}R_{D}$ and $v_{o2}=V_{DD}-I_{2}R_{D}$, so the differential output is\n$$\nv_{od}=v_{o2}-v_{o1}=(I_{1}-I_{2})R_{D}.\n$$\nThe maximum possible positive differential output occurs when all the tail current flows through M1 and M2 is off, that is $I_{1}=I_{SS}$ and $I_{2}=0$, giving\n$$\nv_{od,\\max}=I_{SS}R_{D}.\n$$\nThe condition $v_{od}=\\frac{1}{2}v_{od,\\max}$ thus requires\n$$\n(I_{1}-I_{2})R_{D}=\\frac{1}{2}I_{SS}R_{D}\\;\\;\\Rightarrow\\;\\;I_{1}-I_{2}=\\frac{1}{2}I_{SS}.\n$$\nSolving the system with $I_{1}+I_{2}=I_{SS}$ and $I_{1}-I_{2}=\\frac{1}{2}I_{SS}$ yields\n$$\nI_{1}=\\frac{3}{4}I_{SS},\\qquad I_{2}=\\frac{1}{4}I_{SS}.\n$$\nAssuming saturation with the square-law model $I_{D}=\\frac{1}{2}k_{n}(V_{GS}-V_{th})^{2}$, define the overdrive voltages $V_{OV1}=V_{GS1}-V_{th}$ and $V_{OV2}=V_{GS2}-V_{th}$. Then\n$$\nI_{1}=\\frac{1}{2}k_{n}V_{OV1}^{2},\\qquad I_{2}=\\frac{1}{2}k_{n}V_{OV2}^{2}.\n$$\nHence\n$$\nV_{OV1}=\\sqrt{\\frac{2I_{1}}{k_{n}}}=\\sqrt{\\frac{3}{2}\\frac{I_{SS}}{k_{n}}},\\qquad\nV_{OV2}=\\sqrt{\\frac{2I_{2}}{k_{n}}}=\\sqrt{\\frac{1}{2}\\frac{I_{SS}}{k_{n}}}.\n$$\nSince both transistors share the same source node, the differential input is the difference of overdrives:\n$$\nv_{id}=v_{i1}-v_{i2}=V_{OV1}-V_{OV2}.\n$$\nTherefore,\n$$\nv_{id}=\\sqrt{\\frac{3}{2}\\frac{I_{SS}}{k_{n}}}-\\sqrt{\\frac{1}{2}\\frac{I_{SS}}{k_{n}}}\n=\\left(\\sqrt{3}-1\\right)\\sqrt{\\frac{I_{SS}}{2k_{n}}}.\n$$\nThis is the required positive differential input for which $v_{od}$ equals half of its maximum positive value.", "answer": "$$\\boxed{\\left(\\sqrt{3}-1\\right)\\sqrt{\\frac{I_{SS}}{2k_{n}}}}$$", "id": "1314171"}, {"introduction": "Ideal circuits exist only on paper; real-world components are never perfectly matched. This final exercise introduces a practical imperfection: a mismatch between the load resistors in a differential pair. You will investigate how this asymmetry creates a non-zero differential output voltage even when the inputs are perfectly balanced ($v_{id}=0$), a phenomenon known as DC offset error. Understanding the origin of such offsets is a crucial first step in designing high-precision amplifiers.", "problem": "A design engineer is analyzing a simple differential amplifier stage built using two n-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), M1 and M2. The circuit is intended for a sensitive sensor interface, but a known manufacturing defect has introduced an imbalance.\n\nThe circuit parameters are as follows:\n- The two MOSFETs, M1 and M2, are otherwise perfectly matched. They share the same process transconductance parameter $k_n = 4.0 \\text{ mA/V}^2$ and threshold voltage $V_{tn} = 0.50 \\text{ V}$.\n- A positive supply voltage $V_{DD} = 3.0 \\text{ V}$ is used.\n- The drain of M1 is connected to $V_{DD}$ through a resistor $R_{D1}$, and the drain of M2 is connected to $V_{DD}$ through a resistor $R_{D2}$.\n- The nominal design value for both drain resistors is $R_D = 5.0 \\text{ k}\\Omega$. However, due to the manufacturing defect, $R_{D1}$ has its exact nominal value, while $R_{D2}$ is 10% larger than the nominal value.\n- The common source terminal of the two transistors is connected to an ideal DC current source that sinks a total current of $I_{SS} = 1.0 \\text{ mA}$.\n- The gates of both transistors are tied together and connected to a common DC input voltage, resulting in a zero differential input voltage, $v_{id} = v_{g1} - v_{g2} = 0$.\n- Assume that both transistors are operating in the saturation region and that the channel-length modulation effect is negligible ($\\lambda = 0$).\n\nCalculate the resulting DC differential output voltage, defined as $v_{od} = v_{o1} - v_{o2}$, where $v_{o1}$ and $v_{o2}$ are the DC voltages at the drains of M1 and M2, respectively. Express your answer in Volts (V), rounded to three significant figures.", "solution": "The problem asks for the DC differential output voltage $v_{od} = v_{o1} - v_{o2}$ of a MOSFET differential pair with mismatched drain resistors.\n\nStep 1: Analyze the drain currents.\nThe differential input voltage is given as zero, $v_{id} = v_{g1} - v_{g2} = 0$. This means the gate voltages are equal, $v_{g1} = v_{g2}$. The two transistors M1 and M2 share a common source connection, so their source terminals are at the same potential, $v_s$. Consequently, their gate-to-source voltages are identical:\n$$v_{gs1} = v_{g1} - v_s = v_{g2} - v_s = v_{gs2}$$\nThe problem states that the transistors are perfectly matched, meaning they have the same transconductance parameter $k_n$ and threshold voltage $V_{tn}$. Since they are assumed to be in saturation, the drain current $i_d$ for each transistor is given by the square-law model:\n$$i_d = \\frac{1}{2} k_n (v_{gs} - V_{tn})^2$$\nBecause $v_{gs1} = v_{gs2}$ and the transistor parameters are identical, their drain currents must also be equal:\n$$i_{d1} = i_{d2}$$\n\nStep 2: Apply Kirchhoff's Current Law (KCL) at the common source node.\nThe ideal tail current source $I_{SS}$ sinks the sum of the two drain currents:\n$$I_{SS} = i_{d1} + i_{d2}$$\nSubstituting $i_{d1} = i_{d2}$ into the KCL equation, we find:\n$$I_{SS} = i_{d1} + i_{d1} = 2i_{d1}$$\n$$i_{d1} = i_{d2} = \\frac{I_{SS}}{2}$$\nGiven $I_{SS} = 1.0 \\text{ mA}$, the drain current for each transistor is:\n$$i_{d1} = i_{d2} = \\frac{1.0 \\text{ mA}}{2} = 0.5 \\text{ mA}$$\n\nStep 3: Calculate the values of the drain resistors.\nThe nominal resistance is $R_D = 5.0 \\text{ k}\\Omega$.\nResistor $R_{D1}$ is at its nominal value:\n$$R_{D1} = 5.0 \\text{ k}\\Omega$$\nResistor $R_{D2}$ is 10% larger than the nominal value:\n$$R_{D2} = R_D \\times (1 + 0.10) = 5.0 \\text{ k}\\Omega \\times 1.10 = 5.5 \\text{ k}\\Omega$$\n\nStep 4: Calculate the individual DC output voltages at the drains.\nThe output voltages $v_{o1}$ and $v_{o2}$ are the drain voltages, which can be found by subtracting the voltage drop across the respective drain resistors from the supply voltage $V_{DD}$.\nFor the first output, $v_{o1}$:\n$$v_{o1} = V_{DD} - i_{d1} R_{D1}$$\nSubstituting the known values: $V_{DD} = 3.0 \\text{ V}$, $i_{d1} = 0.5 \\text{ mA} = 0.5 \\times 10^{-3} \\text{ A}$, and $R_{D1} = 5.0 \\text{ k}\\Omega = 5.0 \\times 10^3 \\, \\Omega$.\n$$v_{o1} = 3.0 \\text{ V} - (0.5 \\times 10^{-3} \\text{ A}) \\times (5.0 \\times 10^3 \\, \\Omega) = 3.0 \\text{ V} - 2.5 \\text{ V} = 0.5 \\text{ V}$$\nFor the second output, $v_{o2}$:\n$$v_{o2} = V_{DD} - i_{d2} R_{D2}$$\nSubstituting the known values: $V_{DD} = 3.0 \\text{ V}$, $i_{d2} = 0.5 \\text{ mA} = 0.5 \\times 10^{-3} \\text{ A}$, and $R_{D2} = 5.5 \\text{ k}\\Omega = 5.5 \\times 10^3 \\, \\Omega$.\n$$v_{o2} = 3.0 \\text{ V} - (0.5 \\times 10^{-3} \\text{ A}) \\times (5.5 \\times 10^3 \\, \\Omega) = 3.0 \\text{ V} - 2.75 \\text{ V} = 0.25 \\text{ V}$$\n\nStep 5: Calculate the differential output voltage.\nThe differential output voltage $v_{od}$ is the difference between $v_{o1}$ and $v_{o2}$:\n$$v_{od} = v_{o1} - v_{o2}$$\n$$v_{od} = 0.5 \\text{ V} - 0.25 \\text{ V} = 0.25 \\text{ V}$$\n\nAlternatively, we can express $v_{od}$ symbolically first:\n$$v_{od} = (V_{DD} - i_{d1} R_{D1}) - (V_{DD} - i_{d2} R_{D2})$$\nSince $i_{d1} = i_{d2} = I_{SS}/2$:\n$$v_{od} = i_{d2} R_{D2} - i_{d1} R_{D1} = \\frac{I_{SS}}{2} (R_{D2} - R_{D1})$$\n$$v_{od} = \\frac{1.0 \\text{ mA}}{2} (5.5 \\text{ k}\\Omega - 5.0 \\text{ k}\\Omega) = 0.5 \\text{ mA} \\times 0.5 \\text{ k}\\Omega = 0.25 \\text{ V}$$\n\nThe calculated value is $0.25 \\text{ V}$. Rounding to three significant figures, we get $0.250 \\text{ V}$.", "answer": "$$\\boxed{0.250}$$", "id": "1314125"}]}
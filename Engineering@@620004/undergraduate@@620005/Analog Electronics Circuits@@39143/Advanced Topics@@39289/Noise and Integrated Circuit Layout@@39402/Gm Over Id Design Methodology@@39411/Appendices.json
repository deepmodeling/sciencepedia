{"hands_on_practices": [{"introduction": "The first step in translating an analog circuit concept into a physical implementation is determining the dimensions of its core components. This exercise provides a direct, hands-on application of the $g_m/I_D$ methodology for sizing a single NMOS transistor [@problem_id:1308221]. By starting with key performance targets—transconductance ($g_m$) and drain current ($I_D$)—you will work backward to calculate the necessary channel width ($W$), demonstrating the fundamental link between high-level design parameters and physical device geometry.", "problem": "An analog circuit designer is tasked with creating a common-source amplifier using an NMOS transistor. The transistor is fabricated in a specialized low-power process technology. For this process, extensive characterization has shown that for a transistor operating in the saturation region, the relationship between its transconductance efficiency ($g_m/I_D$) and the normalized current density, defined as $I_{norm} = I_D / (W/L)$, is accurately modeled by the following equation:\n$$\n\\left(\\frac{g_m}{I_D}\\right)^2 = \\frac{2 k'_n}{I_{norm}}\n$$\nwhere $k'_n$ is the process transconductance parameter, $W$ is the transistor channel width, and $L$ is the channel length.\n\nThe design specifications for the amplifier stage are as follows:\n- The required transconductance must be $g_m = 1.25 \\text{ mS}$.\n- The quiescent drain current is set by the power budget to be $I_D = 250.0 \\text{ µA}$.\n- The process transconductance parameter is $k'_n = 320.0 \\text{ µA/V}^2$.\n- The transistor must be fabricated with a channel length of $L = 500 \\text{ nm}$ to achieve a desirable output resistance.\n\nYour task is to calculate the required physical channel width $W$ for the NMOS transistor that satisfies all the given design constraints. Express your final answer in micrometers (µm), rounded to three significant figures.", "solution": "The given relation between transconductance efficiency and normalized current density is\n$$\n\\left(\\frac{g_m}{I_D}\\right)^{2}=\\frac{2k'_{n}}{I_{\\text{norm}}}=\\frac{2k'_{n}}{I_{D}/(W/L)}=\\frac{2k'_{n}}{I_{D}}\\frac{W}{L}.\n$$\nSolving for $W$ gives\n$$\nW=\\left(\\frac{g_m}{I_D}\\right)^{2}\\frac{I_{D}L}{2k'_{n}}=\\frac{g_m^{2}L}{2k'_{n}I_{D}}.\n$$\nSubstitute the specified values using consistent SI units: $g_m=1.25\\times 10^{-3}\\,\\text{S}$, $I_{D}=2.50\\times 10^{-4}\\,\\text{A}$, $k'_{n}=3.20\\times 10^{-4}\\,\\text{A/V}^{2}$, and $L=5.00\\times 10^{-7}\\,\\text{m}$. Then\n$$\nW=\\frac{(1.25\\times 10^{-3})^{2}\\times(5.00\\times 10^{-7})}{2\\times(3.20\\times 10^{-4})\\times(2.50\\times 10^{-4})}\n=\\frac{1.5625\\times 10^{-6}\\times 5.00\\times 10^{-7}}{1.60\\times 10^{-7}}\n=\\frac{7.8125\\times 10^{-13}}{1.60\\times 10^{-7}}\n=4.8828125\\times 10^{-6}\\,\\text{m}.\n$$\nConverting to micrometers gives $W=4.8828125\\,\\text{µm}$, which to three significant figures is $4.88\\,\\text{µm}$.", "answer": "$$\\boxed{4.88}$$", "id": "1308221"}, {"introduction": "Analog circuit performance often hinges on the precise matching and scaling of transistors. This practice moves from a single device to a foundational circuit block: the current mirror [@problem_id:1308240]. You will learn how to use a target $g_m/I_D$ value to ensure both transistors have identical overdrive voltages, which is the key to achieving an accurate current ratio simply by scaling their physical dimensions. This exercise is crucial for understanding how to build reliable and predictable analog sub-circuits.", "problem": "An analog circuit designer is creating a fundamental building block: a simple current mirror using two n-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), M1 and M2. M1 is the reference transistor, and M2 is the output transistor. The gate terminals of both transistors are connected together, and their source terminals are both connected to ground. The reference transistor M1 is diode-connected, with its gate tied to its drain.\n\nThe design specifications are as follows:\n- A reference current, $I_{REF} = 25.0 \\text{ µA}$, flows through M1.\n- The mirror must produce an output current of $I_{OUT} = 100.0 \\text{ µA}$ from the drain of M2.\n- Both transistors must operate in the saturation region and be designed to have a transconductance efficiency, $g_m/I_D$, of exactly $10.0 \\text{ S/A}$.\n- The fabrication process provides a process transconductance parameter for NMOS devices of $k'_n = \\mu_n C_{ox} = 200.0 \\text{ µA/V}^2$.\n- To ensure good matching, both transistors are fabricated with a fixed channel length of $L = 0.500 \\text{ µm}$.\n- You may ignore channel-length modulation effects for this calculation (i.e., assume the transistor output resistance is infinite).\n\nCalculate the required channel widths, $W_1$ for transistor M1 and $W_2$ for transistor M2. Express your answers for $W_1$ and $W_2$ in micrometers (µm), rounded to three significant figures. Present your final answer as an ordered pair $(W_1, W_2)$.", "solution": "For a long-channel NMOS in saturation with channel-length modulation neglected, the drain current is given by\n$$\nI_{D}=\\frac{1}{2}k'_{n}\\frac{W}{L}\\left(V_{GS}-V_{T}\\right)^{2}=\\frac{1}{2}k'_{n}\\frac{W}{L}V_{\\text{ov}}^{2},\n$$\nand the transconductance is\n$$\ng_{m}=\\frac{\\partial I_{D}}{\\partial V_{GS}}=k'_{n}\\frac{W}{L}V_{\\text{ov}}=\\frac{2I_{D}}{V_{\\text{ov}}}.\n$$\nTherefore, the transconductance efficiency is\n$$\n\\frac{g_{m}}{I_{D}}=\\frac{2}{V_{\\text{ov}}}\\;\\Rightarrow\\;V_{\\text{ov}}=\\frac{2}{g_{m}/I_{D}}.\n$$\nWith the specified $\\frac{g_{m}}{I_{D}}=10.0\\,\\text{S/A}$, the overdrive voltage for both transistors is\n$$\nV_{\\text{ov}}=\\frac{2}{10.0}=0.200\\,\\text{V}.\n$$\nSolving the current equation for $W/L$,\n$$\n\\frac{W}{L}=\\frac{2I_{D}}{k'_{n}V_{\\text{ov}}^{2}}.\n$$\nWith $k'_{n}=200.0\\,\\text{µA/V}^{2}$, $V_{\\text{ov}}^{2}=(0.200)^{2}=0.040\\,\\text{V}^{2}$, and $L=0.500\\,\\text{µm}$, we obtain for M1 ($I_{D}=I_{\\text{REF}}=25.0\\,\\text{µA}$)\n$$\n\\frac{W_{1}}{L}=\\frac{2\\times 25.0}{200.0\\times 0.040}= \\frac{50.0}{8.00}=6.25,\\quad\nW_{1}=L\\left(\\frac{W_{1}}{L}\\right)=0.500\\times 6.25=3.125\\,\\text{µm}.\n$$\nFor M2 ($I_{D}=I_{\\text{OUT}}=100.0\\,\\text{µA}$),\n$$\n\\frac{W_{2}}{L}=\\frac{2\\times 100.0}{200.0\\times 0.040}=\\frac{200.0}{8.00}=25.0,\\quad\nW_{2}=L\\left(\\frac{W_{2}}{L}\\right)=0.500\\times 25.0=12.5\\,\\text{µm}.\n$$\nRounding to three significant figures yields $W_{1}=3.13\\,\\text{µm}$ and $W_{2}=12.5\\,\\text{µm}$. As a consistency check, $W_{2}/W_{1}=4$, matching the current ratio $I_{\\text{OUT}}/I_{\\text{REF}}=4$ at the same $V_{\\text{ov}}$.", "answer": "$$\\boxed{\\begin{pmatrix}3.13 & 12.5\\end{pmatrix}}$$", "id": "1308240"}, {"introduction": "Real-world analog design is an art of balancing competing requirements, such as maximizing gain while preserving a large output voltage swing. This advanced case study on a cascode amplifier challenges you to navigate these critical trade-offs using the $g_m/I_D$ framework [@problem_id:1308234]. By evaluating different combinations of $g_m/I_D$ for the input and cascode transistors, you will see how this methodology provides a systematic way to analyze complex design choices and arrive at an optimal solution that meets multiple specifications.", "problem": "An analog circuit designer is tasked with creating a high-performance NMOS cascode amplifier. The amplifier is constructed with two identical NMOS transistors, an input transistor $M_1$ and a cascode transistor $M_2$. The design must be implemented using a technology with the following parameters: electron mobility times oxide capacitance $\\mu_n C_{ox} = 200 \\text{ µA/V}^2$, threshold voltage $V_{THn} = 0.4 \\text{ V}$, and channel-length modulation parameter $\\lambda_n = 0.2 \\text{ V}^{-1}$ for both transistors.\n\nThe amplifier operates from a supply voltage of $V_{DD} = 1.8 \\text{ V}$ and is biased with a drain current of $I_D = 100 \\text{ µA}$. The gate of the cascode transistor $M_2$ is connected to a stable DC bias voltage of $V_{bias} = 1.2 \\text{ V}$.\n\nThe design must satisfy two critical performance requirements:\n1.  The small-signal DC voltage gain, $|A_v|$, must be at least $650 \\text{ V/V}$.\n2.  The output voltage swing, defined as the voltage range at the output for which both $M_1$ and $M_2$ remain in the saturation region, must be at least $1.0 \\text{ V}$.\n\nThe designer is considering four possible design choices based on the transconductance efficiency ($g_m/I_D$) for the input transistor $M_1$ and the cascode transistor $M_2$. The choices for the pair $((g_m/I_D)_1, (g_m/I_D)_2)$ are listed below.\n\n- A: $(5.0 \\text{ V}^{-1}, 5.0 \\text{ V}^{-1})$\n\n- B: $(10.0 \\text{ V}^{-1}, 3.34 \\text{ V}^{-1})$\n\n- C: $(3.34 \\text{ V}^{-1}, 10.0 \\text{ V}^{-1})$\n\n- D: $(2.0 \\text{ V}^{-1}, 15.0 \\text{ V}^{-1})$\n\nFrom the following design choices, select the one that satisfies all specifications. If multiple options are valid, select the one that results in a higher transconductance $g_{m1}$ for the input transistor $M_1$.", "solution": "The problem asks us to evaluate four design choices for a cascode amplifier and select the one that meets all specifications, with a tie-breaking rule based on the input transistor's transconductance, $g_{m1}$. Let's denote $(g_m/I_D)_1$ as $x$ and $(g_m/I_D)_2$ as $y$. We need to derive the constraints on $x$ and $y$ based on the given requirements.\n\n**1. Gain Constraint**\n\nThe small-signal DC voltage gain of a cascode amplifier is given by $A_v = -g_{m1} R_{out}$, where $R_{out}$ is the output resistance of the cascode stage. The output resistance is approximately $R_{out} \\approx g_{m2}r_{o2}r_{o1}$, where $g_m$ is the transconductance and $r_o$ is the intrinsic output resistance of a transistor.\n\nFirst, calculate the intrinsic output resistance $r_o$:\n$r_o = \\frac{1}{\\lambda_n I_D}$. Since $\\lambda_n = 0.2 \\text{ V}^{-1}$ and $I_D = 100 \\text{ µA} = 10^{-4} \\text{ A}$ for both transistors, $r_{o1} = r_{o2} = r_o$.\n$r_o = \\frac{1}{0.2 \\text{ V}^{-1} \\times 10^{-4} \\text{ A}} = 50 \\times 10^3 \\text{ } \\Omega = 50 \\text{ k}\\Omega$.\n\nThe magnitude of the gain is $|A_v| \\approx g_{m1} g_{m2} r_{o1} r_{o2}$. The requirement is $|A_v| \\ge 650$.\n$g_{m1} g_{m2} (50 \\times 10^3 \\text{ } \\Omega)^2 \\ge 650$\n$g_{m1} g_{m2} (2.5 \\times 10^9 \\text{ } \\Omega^2) \\ge 650$\n$g_{m1} g_{m2} \\ge \\frac{650}{2.5 \\times 10^9} = 2.6 \\times 10^{-7} \\text{ (A/V)}^2$.\n\nWe can express $g_m$ in terms of $g_m/I_D$: $g_m = (g_m/I_D) \\times I_D$.\n$g_{m1} = x \\cdot I_D = x \\cdot 10^{-4} \\text{ A}$\n$g_{m2} = y \\cdot I_D = y \\cdot 10^{-4} \\text{ A}$\n\nSubstituting these into the gain inequality:\n$(x \\cdot 10^{-4})(y \\cdot 10^{-4}) \\ge 2.6 \\times 10^{-7}$\n$xy \\cdot 10^{-8} \\ge 2.6 \\times 10^{-7}$\n$xy \\ge 26$. This is our first constraint.\n\n**2. Swing and Biasing Constraints**\n\nThe output voltage swing is limited by the conditions needed to keep both transistors in saturation.\nThe minimum output voltage, $V_{out,min}$, is determined by the sum of the overdrive voltages of the two transistors. For both to be in saturation, the voltage at the drain of $M_1$ must be at least $V_{OV1}$, and the drain-source voltage of $M_2$ must be at least $V_{OV2}$. This leads to:\n$V_{out,min} = V_{OV1} + V_{OV2}$.\n\nThe maximum output voltage, $V_{out,max}$, when loaded by an ideal current source, is $V_{DD}$.\nThe output voltage swing is $V_{swing} = V_{out,max} - V_{out,min} = V_{DD} - (V_{OV1} + V_{OV2})$.\nThe requirement is $V_{swing} \\ge 1.0 \\text{ V}$.\n$1.8 \\text{ V} - (V_{OV1} + V_{OV2}) \\ge 1.0 \\text{ V}$\n$V_{OV1} + V_{OV2} \\le 0.8 \\text{ V}$.\n\nThe overdrive voltage $V_{OV}$ is related to $g_m/I_D$ by $V_{OV} = \\frac{2}{g_m/I_D}$.\nSo, $\\frac{2}{x} + \\frac{2}{y} \\le 0.8 \\text{ V}$, which simplifies to $\\frac{1}{x} + \\frac{1}{y} \\le 0.4$. This is our second constraint.\n\nThere is another biasing constraint. For the cascode arrangement to work, the intermediate node voltage $V_X$ (drain of $M_1$, source of $M_2$) must be in a valid range. $M_1$ must be in saturation, so its drain voltage must be greater than its source-gate voltage difference minus threshold, i.e., $V_{DS1} > V_{GS1} - V_{THn} = V_{OV1}$. So, $V_X \\ge V_{OV1}$. Also, $M_2$ must have a gate-source voltage sufficient to turn it on, $V_{GS2} > V_{THn}$.\n$V_{GS2} = V_{bias} - V_X$. So, $V_{bias} - V_X > V_{THn}$, which implies $V_X < V_{bias} - V_{THn}$.\nCombining these, we need $V_{OV1} \\le V_X < V_{bias} - V_{THn}$. A necessary condition for a valid bias point to exist is $V_{OV1} < V_{bias} - V_{THn}$.\n$V_{bias} - V_{THn} = 1.2 \\text{ V} - 0.4 \\text{ V} = 0.8 \\text{ V}$.\nSo, $V_{OV1} < 0.8 \\text{ V}$, which means $\\frac{2}{x} < 0.8 \\implies x > \\frac{2}{0.8} = 2.5$. This is our third constraint.\n\nSummary of constraints for $((g_m/I_D)_1, (g_m/I_D)_2) = (x, y)$:\n1.  $xy \\ge 26$\n2.  $\\frac{1}{x} + \\frac{1}{y} \\le 0.4$\n3.  $x > 2.5$\n\n**3. Evaluating the Options**\n\nLet's check each option against these three constraints.\n\n- **A: $(x, y) = (5.0, 5.0)$**\n  1. Gain: $xy = 5.0 \\times 5.0 = 25$. This is less than 26. **Fails.**\n- **B: $(x, y) = (10.0, 3.34)$**\n  1. Gain: $xy = 10.0 \\times 3.34 = 33.4$. This is greater than 26. **Pass.**\n  2. Swing/Bias: $\\frac{1}{10.0} + \\frac{1}{3.34} = 0.1 + 0.2994... = 0.3994...$. This is less than or equal to 0.4. **Pass.**\n  3. M1 Bias: $x = 10.0$. This is greater than 2.5. **Pass.**\nThis option is a valid design.\n- **C: $(x, y) = (3.34, 10.0)$**\n  1. Gain: $xy = 3.34 \\times 10.0 = 33.4$. This is greater than 26. **Pass.**\n  2. Swing/Bias: $\\frac{1}{3.34} + \\frac{1}{10.0} = 0.2994... + 0.1 = 0.3994...$. This is less than or equal to 0.4. **Pass.**\n  3. M1 Bias: $x = 3.34$. This is greater than 2.5. **Pass.**\nThis option is also a valid design.\n- **D: $(x, y) = (2.0, 15.0)$**\n  1. Gain: $xy = 2.0 \\times 15.0 = 30$. This is greater than 26. Pass.\n  2. Swing/Bias: $\\frac{1}{2.0} + \\frac{1}{15.0} = 0.5 + 0.066... = 0.566...$. This is greater than 0.4. **Fails.**\n  3. M1 Bias: $x = 2.0$. This is not greater than 2.5. **Fails.**\nThis option fails on two counts.\n\n**4. Tie-Breaker**\n\nBoth options B and C satisfy the primary specifications. We must now apply the tie-breaker rule: \"select the one that results in a higher transconductance $g_{m1}$ for the input transistor.\"\nSince $g_{m1} = (g_m/I_D)_1 \\times I_D = x \\cdot I_D$, a higher $g_{m1}$ corresponds to a higher value of $x$.\n- For option B, $x = (g_m/I_D)_1 = 10.0 \\text{ V}^{-1}$.\n- For option C, $x = (g_m/I_D)_1 = 3.34 \\text{ V}^{-1}$.\n\nComparing the two, option B provides a significantly higher transconductance for the input transistor $M_1$. Therefore, according to the problem's criteria, option B is the correct choice.", "answer": "$$\\boxed{B}$$", "id": "1308234"}]}
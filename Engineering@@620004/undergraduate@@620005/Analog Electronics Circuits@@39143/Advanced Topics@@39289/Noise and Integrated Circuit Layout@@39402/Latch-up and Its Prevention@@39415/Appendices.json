{"hands_on_practices": [{"introduction": "Understanding latch-up begins with recognizing its symptoms and knowing the correct response. When a parasitic Silicon-Controlled Rectifier (SCR) structure within a CMOS chip is triggered, it creates a persistent, high-current path from the power supply to ground, which can lead to catastrophic thermal failure if not addressed. This first practice [@problem_id:1314397] places you in a real-world scenario where latch-up has occurred, challenging you to identify the only universally effective method to recover the device and restore normal operation by breaking the self-sustaining current flow.", "problem": "An engineering student is testing a prototype data acquisition system built on a printed circuit board (PCB). The system uses a high-precision Complementary Metal-Oxide-Semiconductor (CMOS) Analog-to-Digital Converter (ADC) to digitize sensor signals. The lab environment is particularly dry, increasing the risk of static electricity. While handling the board, the student accidentally touches one of the analog input pins of the ADC chip, causing an Electrostatic Discharge (ESD) event.\n\nImmediately after this, the student observes that the ADC has stopped communicating with the system's microcontroller. A measurement of the current drawn by the ADC from its $5~\\text{V}$ power supply shows an abnormally high and stable value of $250~\\text{mA}$, far exceeding its typical operating current of $15~\\text{mA}$. The surface of the ADC chip package is also becoming noticeably warm to the touch.\n\nThe student correctly suspects that the ESD event has triggered a \"latch-up\" condition within the CMOS structure of the ADC. Latch-up is a fault condition where a parasitic low-impedance path forms between the power supply rail ($V_{DD}$) and the ground rail ($V_{SS}$) of an integrated circuit. This path is created by the triggering of a parasitic four-layer PNPN structure, equivalent to a Silicon-Controlled Rectifier (SCR), which, once activated, creates a self-sustaining current path as long as the circuit is powered.\n\nGiven this situation, which of the following actions is the only universally effective and safe method for an end-user to recover the ADC from this deep latch-up state?\n\nA. Briefly touching the input pin that received the ESD pulse to a ground point on the PCB to discharge any residual static.\n\nB. Sending a software \"hard reset\" command to the ADC via the microcontroller's communication interface.\n\nC. Cooling the ADC chip by spraying it with a circuit cooler aerosol to lower its temperature and reduce the current.\n\nD. Momentarily short-circuiting the ADC's power supply pin directly to its ground pin using a wire.\n\nE. Performing a power cycle on the ADC chip by turning its dedicated power supply off for a few seconds and then turning it back on.", "solution": "Latch-up in a CMOS IC is modeled as a parasitic PNPN structure equivalent to an SCR between $V_{DD}$ (anode) and $V_{SS}$ (cathode). Once triggered by an event such as ESD, the SCR enters its on-state when the anode-to-cathode current $I_{AK}$ exceeds the latching current $I_{L}$. After turn-on, the SCR remains conducting as long as $I_{AK} \\geq I_{H}$, where $I_{H}$ is the holding current. Recovery requires forcing $I_{AK} < I_{H}$.\n\nGiven a powered system with a low-impedance supply and local decoupling capacitors, the on-state SCR presents a low-impedance path that sustains a large current from $V_{DD}$ to $V_{SS}$. The observed symptoms (abnormally high, stable supply current and chip heating) are consistent with $I_{AK} \\gg I_{H}$. For an end user, the only universally effective and safe method to guarantee $I_{AK} < I_{H}$ is to remove the source of current by turning off the power so that $V_{DD} \\to 0$ and stored charge in bypass capacitors is allowed to discharge sufficiently, thereby forcing the SCR below $I_{H}$ and extinguishing conduction. After $V_{DD}$ returns to $0$, the parasitic structure resets to its off-state, and normal operation can resume when power is reapplied.\n\nEvaluate the options:\n\n- Option A (grounding the affected input pin): The SCR conduction path is internal between $V_{DD}$ and $V_{SS}$. Forcing the input pin to ground does not control $I_{AK}$ once latched and thus does not guarantee $I_{AK} < I_{H}$. It is not universally effective.\n\n- Option B (software hard reset): Latch-up is an analog, parasitic conduction path independent of digital state. Software control of registers and interfaces does not affect $I_{AK}$, so the SCR remains on. This cannot extinguish latch-up.\n\n- Option C (cooling the IC): Temperature affects parameters such as $I_{H}$ and gain of parasitic transistors, but with supply still applied, $I_{AK}$ typically remains above $I_{H}$. Cooling cannot be relied upon to force $I_{AK} < I_{H}$ and is not universally effective; it may also introduce other risks.\n\n- Option D (shorting $V_{DD}$ to $V_{SS}$ with a wire): While this might collapse $V_{DD}$, it intentionally creates a hard short across the supply, which can cause excessive peak currents limited only by supply and parasitics, risking catastrophic damage to the IC, PCB traces, connectors, and the power source. This is unsafe and not recommended.\n\n- Option E (power cycle: turn off, allow discharge, then turn on): Removing power collapses $V_{DD}$ and discharges decoupling so that $I_{AK} \\to 0$, ensuring $I_{AK} < I_{H}$. This is the standard, universally effective, and safe recovery method recommended by manufacturers for end users.\n\nTherefore, the only universally effective and safe action is to power cycle the ADC, ensuring the supply is fully removed long enough for all charge storage to dissipate before reapplying power.", "answer": "$$\\boxed{E}$$", "id": "1314397"}, {"introduction": "To prevent latch-up, we must first be able to predict the conditions that trigger it. This exercise [@problem_id:1314400] provides a quantitative model for one of the most common triggers: an overvoltage event on an input pin. By analyzing the chain of events from an external voltage stress to the activation of the internal parasitic NPN transistor, you will calculate the maximum safe input voltage, a critical skill in designing robust system interfaces.", "problem": "A $3.3~\\text{V}$ Complementary Metal-Oxide-Semiconductor (CMOS) input buffer is connected to an external signal source through a series resistor $R_s$. The device's internal structure gives rise to a parasitic vertical PNP Bipolar Junction Transistor (BJT) and a parasitic lateral NPN BJT, which together can form a thyristor-like structure. This parasitic structure can trigger a destructive, high-current state known as latch-up if the input is subjected to sufficient electrical overstress.\n\nThe initiation of latch-up in this scenario is modeled as follows: an external signal voltage that exceeds the CMOS supply voltage ($V_{DD}$) causes the internal input protection diode to forward-bias. This protection diode connects the input pin to the $V_{DD}$ rail and has a forward voltage drop of $V_D$. When it conducts, an injected current $I_{in}$ flows into the device. This current is assumed to serve entirely as the base current for the parasitic PNP transistor. The resulting collector current from the PNP transistor then flows through the parasitic resistance of the substrate, $R_{sub}$, generating a voltage drop across it. This voltage drop acts as the base-emitter voltage for the parasitic NPN transistor. Latch-up is triggered at the moment this voltage reaches the NPN's base-emitter turn-on voltage, $V_{on,npn}$.\n\nGiven the following parameters for the circuit and the parasitic elements:\n- Supply Voltage, $V_{DD} = 3.3~\\text{V}$\n- Series Resistor, $R_s = 500~\\Omega$\n- Parasitic Substrate Resistance, $R_{sub} = 200~\\Omega$\n- Parasitic N-well Resistance, $R_{well} = 150~\\Omega$\n- PNP Current Gain, $\\beta_{pnp} = 5.5$\n- NPN Current Gain, $\\beta_{npn} = 30$\n- NPN Base-Emitter Turn-on Voltage, $V_{on,npn} = 0.70~\\text{V}$\n- Protection Diode Forward Voltage, $V_D = 0.75~\\text{V}$\n\nCalculate the maximum voltage of the external signal source that can be applied without triggering latch-up. Express your answer in volts, rounded to three significant figures.", "solution": "Let the external source voltage be $V_{S}$. When the input protection diode forward-biases, the input node is clamped to $V_{DD}+V_{D}$, and the injected current through the series resistor is, by Ohm’s law,\n$$\nI_{in}=\\frac{V_{S}-(V_{DD}+V_{D})}{R_{s}} \\quad \\text{for } V_{S}>V_{DD}+V_{D}.\n$$\nBy the problem’s assumption, this injected current serves entirely as the base current of the parasitic PNP, so\n$$\nI_{B,pnp}=I_{in}.\n$$\nUsing the PNP current gain,\n$$\nI_{C,pnp}=\\beta_{pnp}\\,I_{B,pnp}=\\beta_{pnp}\\,I_{in}.\n$$\nThis collector current flowing through the substrate resistance produces a voltage drop that serves as the NPN base-emitter voltage:\n$$\nV_{BE,npn} = I_{C,pnp}\\,R_{sub} = \\beta_{pnp}\\,I_{in}\\,R_{sub}.\n$$\nLatch-up is initiated when this reaches the NPN turn-on voltage:\n$$\n\\beta_{pnp}\\,I_{in}\\,R_{sub}=V_{on,npn}.\n$$\nThus, the critical injected current is\n$$\nI_{in,crit}=\\frac{V_{on,npn}}{\\beta_{pnp}\\,R_{sub}}.\n$$\nSubstituting this into the expression relating $V_{S}$ and $I_{in}$ gives the maximum safe source voltage before latch-up:\n$$\nV_{S,\\max}=V_{DD}+V_{D}+R_{s}\\,I_{in,crit}\n=V_{DD}+V_{D}+R_{s}\\,\\frac{V_{on,npn}}{\\beta_{pnp}\\,R_{sub}}.\n$$\nNow substitute the given numerical values:\n$$\nV_{S,\\max}=3.3+0.75+500\\cdot\\frac{0.70}{5.5\\cdot 200}\n=3.3+0.75+500\\cdot\\frac{0.70}{1100}\n=4.05+0.3181818\\ldots \\approx 4.37~\\text{V}.\n$$\nRounded to three significant figures, the maximum external signal voltage that can be applied without triggering latch-up is $4.37~\\text{V}$.", "answer": "$$\\boxed{4.37}$$", "id": "1314400"}, {"introduction": "Effective latch-up prevention is a cornerstone of reliable CMOS integrated circuit design. Building upon our understanding of trigger mechanisms, this final practice [@problem_id:1314382] focuses on a widespread preventative layout technique: guard rings. You will determine the maximum allowable resistance for these protective structures to ensure they can safely shunt potentially triggering currents away from sensitive nodes, translating theoretical analysis into tangible design constraints.", "problem": "An advanced Complementary Metal-Oxide-Semiconductor (CMOS) integrated circuit is susceptible to a destructive phenomenon known as latch-up, caused by the activation of a parasitic four-layer pnpn structure that behaves like a Silicon-Controlled Rectifier (SCR). Analysis of the device's layout reveals the following parameters for the parasitic Bipolar Junction Transistors (BJTs) and associated resistances:\n\n- Parasitic n-well resistance, $R_{well} = 2.50~\\text{k}\\Omega$\n- Parasitic p-substrate resistance, $R_{sub} = 500~\\Omega$\n- Current gain of the parasitic vertical PNP BJT, $\\beta_{pnp} = 1.20$\n- Current gain of the parasitic lateral NPN BJT, $\\beta_{npn} = 25.0$\n- Base-emitter turn-on voltage for both parasitic BJTs, $V_{on} = 0.700~\\text{V}$\n\nTo ensure reliability, we must analyze two distinct, independent scenarios that could trigger latch-up and determine the requirements for the corresponding preventative structures, known as guard rings.\n\n**Scenario A: Input Overvoltage Trigger**\nAn external event causes an input protection circuit to activate, shunting a transient current pulse of $I_{trig,A} = 50.0~\\text{mA}$ into the n-well. This current poses a risk of forward-biasing the emitter-base junction of the parasitic PNP transistor. A low-resistance n+ guard ring, connected to the positive supply voltage, is implemented to provide a shunt path. This guard ring can be modeled as a single shunt resistor, $R_{shunt,A}$. To prevent latch-up, the voltage drop across the n-well resistance must not exceed $V_{on}$.\n\n**Scenario B: Dynamic Substrate Trigger**\nA large, fast-slewing on-chip output driver injects a transient current pulse of $I_{trig,B} = 150~\\text{mA}$ into the p-substrate. This phenomenon, known as substrate bounce, creates a voltage rise in the substrate that threatens to forward-bias the emitter-base junction of the parasitic NPN transistor. A p+ guard ring, serving as a substrate contact tied to ground, acts as a shunt resistor, $R_{shunt,B}$, to divert this current. To prevent latch-up, the voltage drop across the p-substrate resistance must not exceed $V_{on}$.\n\nCalculate the maximum permissible resistance for each guard ring, $R_{shunt,A,max}$ and $R_{shunt,B,max}$, that guarantees the circuit remains safe from latch-up in each respective scenario.\n\nProvide your final answers for $R_{shunt,A,max}$ and $R_{shunt,B,max}$, in that order, in Ohms. Round your numerical answers to three significant figures.", "solution": "Latch-up via the parasitic SCR can be prevented in each scenario by ensuring that the injected transient current does not raise the relevant well/substrate node sufficiently to forward-bias the corresponding parasitic BJT base-emitter junction. The prevention criterion specified is that the voltage drop across the parasitic resistance shall not exceed the base-emitter turn-on voltage $V_{on}$.\n\nFor a given scenario with an injected current $I_{trig}$ entering a node tied to the supply through the parasitic resistance $R_{par}$ in parallel with the guard-ring shunt resistance $R_{sh}$, the node voltage is\n$$\nV = I_{trig}\\,(R_{par} \\parallel R_{sh}) = I_{trig}\\,\\frac{R_{par}R_{sh}}{R_{par}+R_{sh}}.\n$$\nTo avoid forward-bias, require\n$$\nI_{trig}\\,\\frac{R_{par}R_{sh}}{R_{par}+R_{sh}} \\leq V_{on}.\n$$\nDefine the maximum allowable equivalent resistance\n$$\nR_{eq,\\max} \\equiv \\frac{V_{on}}{I_{trig}}.\n$$\nThen the inequality becomes\n$$\n\\frac{R_{par}R_{sh}}{R_{par}+R_{sh}} \\leq R_{eq,\\max}.\n$$\nSolving for $R_{sh}$ yields\n$$\nR_{par}R_{sh} \\leq R_{eq,\\max}(R_{par}+R_{sh})\n\\;\\Rightarrow\\;\nR_{sh}(R_{par}-R_{eq,\\max}) \\leq R_{eq,\\max}R_{par}.\n$$\nAssuming $R_{par} > R_{eq,\\max}$ (true in both scenarios), dividing by the positive factor $(R_{par}-R_{eq,\\max})$ gives the maximum permissible shunt resistance:\n$$\nR_{sh,\\max} = \\frac{R_{eq,\\max}R_{par}}{R_{par}-R_{eq,\\max}}.\n$$\n\nScenario A (input overvoltage into n-well): Here $R_{par} = R_{well}$ and $I_{trig} = I_{trig,A}$. Compute\n$$\nR_{eq,\\max,A} = \\frac{V_{on}}{I_{trig,A}} = \\frac{0.700}{0.0500} = 14.0~\\Omega,\n$$\n$$\nR_{shunt,A,\\max} = \\frac{R_{eq,\\max,A}R_{well}}{R_{well}-R_{eq,\\max,A}}\n= \\frac{14.0 \\times 2500}{2500 - 14.0}\n= \\frac{35000}{2486} \\approx 14.1~\\Omega.\n$$\n\nScenario B (substrate bounce into p-substrate): Here $R_{par} = R_{sub}$ and $I_{trig} = I_{trig,B}$. Compute\n$$\nR_{eq,\\max,B} = \\frac{V_{on}}{I_{trig,B}} = \\frac{0.700}{0.150} = \\frac{14}{3} \\approx 4.666\\ldots~\\Omega,\n$$\n$$\nR_{shunt,B,\\max} = \\frac{R_{eq,\\max,B}R_{sub}}{R_{sub}-R_{eq,\\max,B}}\n= \\frac{\\left(\\frac{14}{3}\\right)\\times 500}{500 - \\frac{14}{3}}\n= \\frac{7000}{1486} = \\frac{3500}{743} \\approx 4.71~\\Omega.\n$$\n\nThe given transistor current gains are not needed for this specific prevention criterion because the problem explicitly constrains the design by limiting the base-emitter forward-bias via the node voltage rise; thus only the resistive network and $V_{on}$ determine $R_{sh,\\max}$ in each scenario.\n\nRounded to three significant figures and reported in Ohms in the requested order $(R_{shunt,A,\\max},\\,R_{shunt,B,\\max})$:", "answer": "$$\\boxed{\\begin{pmatrix} 14.1 & 4.71 \\end{pmatrix}}$$", "id": "1314382"}]}
{"hands_on_practices": [{"introduction": "Before building circuits that oscillate, it is incredibly instructive to understand why certain configurations fail. This exercise explores a common design attempt using an inverting amplifier, which provides a $-180^{\\circ}$ phase shift, and a two-stage RC low-pass network. By analyzing the network's phase response, you will discover the fundamental reason it cannot provide the additional $-180^{\\circ}$ required for oscillation, thereby reinforcing the strict conditions of the Barkhausen criterion. [@problem_id:1336402]", "problem": "An electronics engineer is designing a sinusoidal oscillator. The proposed circuit consists of a feedback loop containing an ideal inverting amplifier and a feedback network. The amplifier provides a constant gain, introducing a phase shift of exactly $-180^\\circ$ for all frequencies. According to the Barkhausen criterion for oscillation, the feedback network must provide an additional phase shift of $-180^\\circ$ at the desired oscillation frequency for the total loop phase shift to be $-360^\\circ$.\n\nThe engineer constructs the feedback network using two identical low-pass Resistor-Capacitor (RC) filter stages. To simplify the design and prevent loading effects between the stages, a perfect unity-gain buffer is placed between the first and second stage, making them non-interacting. The transfer function of a single such low-pass RC stage is given by $H_1(s) = \\frac{1}{1+sRC}$, where $s$ is the complex frequency variable, $R$ is the resistance, and $C$ is the capacitance.\n\nThe circuit fails to oscillate. Which of the following statements provides the correct physical reason for this failure?\n\nA. The maximum possible phase shift from the two-stage network is $-90^\\circ$, which is insufficient to meet the oscillation criterion.\n\nB. The maximum possible phase shift from the two-stage network is $-120^\\circ$, which is insufficient to meet the oscillation criterion.\n\nC. The network can produce a $-180^\\circ$ phase shift, but only at zero frequency ($\\omega=0$), which cannot support oscillation.\n\nD. The network's phase shift only approaches $-180^\\circ$ as the frequency approaches infinity. At infinite frequency, the network's gain is zero, so the loop gain magnitude cannot be unity.\n\nE. The gain of the two-stage network is always greater than unity for any non-zero frequency, which makes the loop inherently unstable and unable to produce a stable sinusoid.", "solution": "Let the inverting amplifier have a real, constant gain magnitude denoted by $A>0$ and a fixed phase of $-\\pi$. The feedback network consists of two identical, buffered first-order low-pass RC stages, so the overall feedback transfer is the product of two identical stage responses.\n\nFor one RC low-pass stage,\n$$\nH_{1}(s)=\\frac{1}{1+sRC}.\n$$\nWith the unity-gain buffer eliminating loading, the two-stage network transfer function is\n$$\nH(s)=H_{1}(s)^{2}=\\frac{1}{\\left(1+sRC\\right)^{2}}.\n$$\nOn the imaginary axis $s=j\\omega$,\n$$\nH(j\\omega)=\\frac{1}{\\left(1+j\\omega RC\\right)^{2}}.\n$$\nThe magnitude and phase of a single stage are\n$$\n|H_{1}(j\\omega)|=\\frac{1}{\\sqrt{1+(\\omega RC)^{2}}},\\qquad \\angle H_{1}(j\\omega)=-\\arctan(\\omega RC).\n$$\nTherefore, for the two-stage network,\n$$\n|H(j\\omega)|=|H_{1}(j\\omega)|^{2}=\\frac{1}{1+(\\omega RC)^{2}},\\qquad \\angle H(j\\omega)=2\\,\\angle H_{1}(j\\omega)=-2\\arctan(\\omega RC).\n$$\n\nBarkhausenâ€™s criterion requires at some oscillation frequency $\\omega_{0}$:\n1) Phase condition: the total loop phase equals an integer multiple of $2\\pi$. With the amplifier contributing $-\\pi$, this requires\n$$\n\\angle H(j\\omega_{0})=-\\pi.\n$$\n2) Magnitude condition: the loop gain magnitude is unity,\n$$\nA\\,|H(j\\omega_{0})|=1.\n$$\n\nExamine the phase condition. Since $\\arctan(x)\\in(0,\\frac{\\pi}{2})$ for $x>0$, we have\n$$\n\\angle H(j\\omega)=-2\\arctan(\\omega RC)\\in(-\\pi,0)\\quad\\text{for any finite }\\omega>0,\n$$\nwith limits\n$$\n\\lim_{\\omega\\to 0^{+}}\\angle H(j\\omega)=0,\\qquad \\lim_{\\omega\\to \\infty}\\angle H(j\\omega)=-\\pi.\n$$\nThus, the two-stage network phase only approaches $-\\pi$ as $\\omega\\to\\infty$ and never equals $-\\pi$ at any finite frequency.\n\nAt the same time, the magnitude is\n$$\n|H(j\\omega)|=\\frac{1}{1+(\\omega RC)^{2}},\n$$\nso\n$$\n\\lim_{\\omega\\to \\infty}|H(j\\omega)|=0.\n$$\nTherefore, at the only frequency where the phase condition is approached (as $\\omega\\to\\infty$), the network gain magnitude tends to zero, making $A|H(j\\omega)|\\to 0$ and preventing the loop gain from reaching unity for any finite $A$.\n\nConsequently, the circuit cannot satisfy both Barkhausen phase and magnitude conditions simultaneously at any finite frequency. This exactly corresponds to statement D. Statements A and B are false because the two-stage phase can asymptotically reach $-\\pi$ (not just $-\\pi/2$ or $-2\\pi/3$). Statement C is false because at $\\omega=0$ the phase is $0$, not $-\\pi$. Statement E is false because $|H(j\\omega)|\\leq 1$ for all $\\omega$, with strict inequality for $\\omega\\neq 0$.\n\nHence, the correct physical reason is that the required $-\\pi$ phase shift is only reached asymptotically as frequency goes to infinity, where the network gain vanishes, so the loop gain magnitude cannot be unity.", "answer": "$$\\boxed{D}$$", "id": "1336402"}, {"introduction": "Having seen that two RC stages are insufficient to create a phase-shift oscillator, we now examine a classic design that successfully works. This problem models an oscillator where the feedback network consists of three identical cascaded low-pass stages, which together can provide the necessary phase shift. Your task is to apply the Barkhausen criterion's magnitude and phase conditions to calculate the precise frequency of oscillation and the minimum amplifier gain required for sustained, stable oscillations. [@problem_id:1336432]", "problem": "A feedback control system is designed using a non-inverting amplifier with a tunable positive real gain, $K$, and a plant modeled as three identical, cascaded, non-interacting first-order lag stages. The overall open-loop transfer function, also known as the loop gain, for this system is given by:\n$$L(s) = \\frac{K}{(s\\tau + 1)^3}$$\nFor this particular system, the characteristic time constant $\\tau$ of each stage is normalized to $1$ second.\n\nAccording to the Barkhausen stability criterion, when the gain $K$ is increased to a specific critical value, $K_{crit}$, the system will transition from stable operation to producing sustained, undamped sinusoidal oscillations at a specific angular frequency, $\\omega_{osc}$.\n\nDetermine the exact value of the critical gain $K_{crit}$ and the corresponding angular frequency of oscillation $\\omega_{osc}$. The gain $K_{crit}$ is a dimensionless quantity, and the angular frequency $\\omega_{osc}$ should be expressed in rad/s.", "solution": "The loop gain is given by $L(s) = \\dfrac{K}{(s+1)^{3}}$ with $\\tau = 1$. Evaluating on the imaginary axis yields\n$$\nL(j\\omega) = \\frac{K}{(1 + j\\omega)^{3}}.\n$$\nWrite the magnitude and phase of $L(j\\omega)$:\n- The magnitude is\n$$\n|L(j\\omega)| = \\frac{K}{|1 + j\\omega|^{3}} = \\frac{K}{\\left(\\sqrt{1 + \\omega^{2}}\\right)^{3}} = \\frac{K}{(1+\\omega^{2})^{3/2}}.\n$$\n- The phase is\n$$\n\\arg L(j\\omega) = -3\\,\\arg(1 + j\\omega) = -3\\,\\arctan(\\omega).\n$$\nThe Barkhausen phase condition for the onset of oscillation in a negative-feedback loop is\n$$\n\\arg L(j\\omega_{osc}) = -\\pi + 2\\pi m,\n$$\nwith the smallest nonnegative integer $m$ giving the lowest positive frequency. Taking $m=0$ gives\n$$\n-3\\,\\arctan(\\omega_{osc}) = -\\pi \\quad \\Rightarrow \\quad \\arctan(\\omega_{osc}) = \\frac{\\pi}{3} \\quad \\Rightarrow \\quad \\omega_{osc} = \\tan\\!\\left(\\frac{\\pi}{3}\\right) = \\sqrt{3}.\n$$\nApply the magnitude condition $|L(j\\omega_{osc})| = 1$ to find $K_{crit}$:\n$$\n1 = \\frac{K_{crit}}{(1+\\omega_{osc}^{2})^{3/2}} \\quad \\Rightarrow \\quad K_{crit} = (1+\\omega_{osc}^{2})^{3/2}.\n$$\nSubstitute $\\omega_{osc} = \\sqrt{3}$:\n$$\nK_{crit} = (1+3)^{3/2} = 4^{3/2} = 8.\n$$\nThus, the critical gain and oscillation frequency are $K_{crit} = 8$ and $\\omega_{osc} = \\sqrt{3}$ rad/s.", "answer": "$$\\boxed{\\begin{pmatrix} 8 & \\sqrt{3} \\end{pmatrix}}$$", "id": "1336432"}, {"introduction": "The principles of oscillation are not confined to circuits with discrete resistors and capacitors; they are foundational to modern electronics. This advanced problem challenges you to analyze a Wien bridge oscillator implemented using switched-capacitor technology, a technique prevalent in integrated circuit design. By modeling the switched capacitors as equivalent resistors, you will derive the oscillation conditions, connecting the timeless Barkhausen criterion to contemporary engineering practice where tunability and precision are paramount. [@problem_id:1336440]", "problem": "An engineer is designing a precision oscillator for a mixed-signal Integrated Circuit (IC). The design is based on the Wien bridge topology, but to achieve high precision and tunability using digital control, all resistive elements are implemented using switched-capacitor circuits.\n\nThe oscillator is built around an ideal operational amplifier configured as a non-inverting amplifier with a voltage gain of $A_v$. The positive feedback path consists of a modified Wien bridge network. The series arm of the bridge contains a switched-capacitor circuit replacing the traditional resistor $R_1$, connected to a standard capacitor $C_1$. The parallel arm of the bridge contains another switched-capacitor circuit replacing the traditional resistor $R_2$, connected in parallel with a standard capacitor $C_2$.\n\nThe two switched-capacitor circuits are constructed with switched capacitances of $C_{SC,1}$ and $C_{SC,2}$, respectively. Both are driven by a common, high-frequency, two-phase non-overlapping clock signal with frequency $f_{clk}$. For the purposes of this analysis, you are to assume that the resulting oscillation frequency, $f_{osc}$, is much lower than the clock frequency ($f_{osc} \\ll f_{clk}$). Under this well-established condition, a switched-capacitor circuit with capacitance $C_{SC}$ behaves as an equivalent resistor $R_{eq} = 1/(C_{SC} f_{clk})$.\n\nYour task is to determine the conditions for sustained oscillation. Find the expression for the angular frequency of oscillation, $\\omega_{osc}$, and the minimum required amplifier gain, $A_{min}$. Present your final answer as a two-element row matrix $(\\omega_{osc}, A_{min})$.", "solution": "Let the equivalent resistances of the two switched-capacitor circuits be modeled by the standard relation (valid for $f_{osc} \\ll f_{clk}$):\n$$\nR_{1}=\\frac{1}{C_{SC,1} f_{clk}}, \\quad R_{2}=\\frac{1}{C_{SC,2} f_{clk}}.\n$$\nThe Wien bridge feedback network seen from the op-amp output to the non-inverting input consists of a series arm with impedance $Z_{s}=R_{1}+\\frac{1}{s C_{1}}$ and a shunt arm with impedance $Z_{p}$ equal to the parallel of $R_{2}$ and $\\frac{1}{s C_{2}}$, i.e.,\n$$\nZ_{p}=\\frac{R_{2}}{1+s R_{2} C_{2}}.\n$$\nThe feedback factor $\\beta(s)$ is the divider ratio from the output to the bridge node:\n$$\n\\beta(s)=\\frac{Z_{p}}{Z_{s}+Z_{p}}.\n$$\nWriting $Z_{s}$ and $Z_{p}$ in rational form and simplifying yields\n$$\n\\beta(s)=\\frac{s C_{1} R_{2}}{1+s\\left(R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}\\right)+s^{2} R_{1} R_{2} C_{1} C_{2}}.\n$$\nFor sustained oscillation, the Barkhausen conditions require zero phase shift and unit loop gain at $\\omega=\\omega_{osc}$: $A_{v}\\beta(j\\omega_{osc})$ must be real and equal to $1$. Setting $s=j\\omega$ gives\n$$\n\\beta(j\\omega)=\\frac{j\\omega C_{1} R_{2}}{\\left[1-\\omega^{2} R_{1} R_{2} C_{1} C_{2}\\right]+j\\omega\\left(R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}\\right)}.\n$$\nThe phase condition is satisfied when the denominator is purely imaginary, i.e.,\n$$\n1-\\omega_{osc}^{2} R_{1} R_{2} C_{1} C_{2}=0 \\quad \\Longrightarrow \\quad \\omega_{osc}=\\frac{1}{\\sqrt{R_{1} R_{2} C_{1} C_{2}}}.\n$$\nAt this frequency, the feedback factor magnitude is\n$$\n\\beta(j\\omega_{osc})=\\frac{C_{1} R_{2}}{R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}},\n$$\nso the minimum non-inverting amplifier gain required is\n$$\nA_{min}=\\frac{1}{\\beta(j\\omega_{osc})}=\\frac{R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}}{C_{1} R_{2}}=1+\\frac{R_{1}}{R_{2}}+\\frac{C_{2}}{C_{1}}.\n$$\nSubstituting the switched-capacitor equivalents $R_{1}=\\frac{1}{C_{SC,1} f_{clk}}$ and $R_{2}=\\frac{1}{C_{SC,2} f_{clk}}$ gives\n$$\n\\omega_{osc}=f_{clk}\\sqrt{\\frac{C_{SC,1} C_{SC,2}}{C_{1} C_{2}}}, \\quad A_{min}=1+\\frac{C_{SC,2}}{C_{SC,1}}+\\frac{C_{2}}{C_{1}}.\n$$\nThese reduce to the well-known results $\\omega_{osc}=\\frac{1}{R C}$ and $A_{min}=3$ in the symmetric case $R_{1}=R_{2}$ and $C_{1}=C_{2}$, which here corresponds to $C_{SC,1}=C_{SC,2}$ and $C_{1}=C_{2}$.", "answer": "$$\\boxed{\\begin{pmatrix} f_{clk}\\sqrt{\\dfrac{C_{SC,1}C_{SC,2}}{C_{1}C_{2}}} & 1+\\dfrac{C_{SC,2}}{C_{SC,1}}+\\dfrac{C_{2}}{C_{1}} \\end{pmatrix}}$$", "id": "1336440"}]}
{"hands_on_practices": [{"introduction": "The Miller theorem provides a powerful tool for simplifying the analysis of amplifiers with feedback. This first practice problem serves as a concrete introduction to the Miller effect by examining a common scenario: a parasitic resistor connecting the output to the input of an amplifier. By working through this exercise [@problem_id:1316947], you will calculate the effective input resistance created by this feedback path, providing a tangible understanding of how a large impedance can be \"reflected\" to the input as a much smaller one, a phenomenon that significantly impacts an amplifier's overall performance.", "problem": "A designer is analyzing a common-source amplifier built using a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) for a mid-band frequency application. During testing, an unintended parasitic pathway is discovered between the drain and gate terminals of the MOSFET. This parasitic effect can be accurately modeled as a single feedback resistor, $R_{DG}$, connecting these two terminals. The presence of this resistor alters the input characteristics of the amplifier.\n\nThe amplifier and MOSFET are characterized by the following parameters:\n- MOSFET transconductance, $g_m = 5.0 \\text{ mA/V}$.\n- MOSFET intrinsic output resistance, $r_o = 40 \\text{ k}\\Omega$.\n- Drain load resistor, $R_D = 10 \\text{ k}\\Omega$.\n- Parasitic feedback resistor, $R_{DG} = 1.2 \\text{ M}\\Omega$.\n\nCalculate the effective input resistance, as seen from the gate terminal, that is created solely by the feedback resistor $R_{DG}$ due to the Miller effect. Express your final answer in kilo-ohms (k$\\Omega$). Round your final answer to three significant figures.", "solution": "Let the small-signal gate and drain voltages be $v_{g}$ and $v_{d}$, respectively. The feedback resistor $R_{DG}$ carries input current\n$$\ni_{\\text{in}}=\\frac{v_{g}-v_{d}}{R_{DG}}.\n$$\nHence the effective input resistance contributed solely by $R_{DG}$ is\n$$\nR_{\\text{in,eff}}=\\frac{v_{g}}{i_{\\text{in}}}=\\frac{v_{g}}{(v_{g}-v_{d})/R_{DG}}=\\frac{R_{DG}}{1-\\frac{v_{d}}{v_{g}}}=\\frac{R_{DG}}{1-A_{v}},\n$$\nwhere $A_{v}=v_{d}/v_{g}$ is the small-signal gain from gate to drain.\n\nTo find $A_{v}$, use the mid-band small-signal model with source at AC ground. Applying KCL at the drain node:\n$$\n\\frac{v_{d}}{R_{D}}+\\frac{v_{d}}{r_{o}}+g_{m}v_{g}=0,\n$$\nwhich gives\n$$\n\\frac{v_{d}}{v_{g}}=-\\frac{g_{m}}{\\frac{1}{R_{D}}+\\frac{1}{r_{o}}}=-g_{m}\\left(R_{D}\\parallel r_{o}\\right),\n$$\nwhere\n$$\nR_{D}\\parallel r_{o}=\\frac{R_{D}\\,r_{o}}{R_{D}+r_{o}}.\n$$\nTherefore,\n$$\nR_{\\text{in,eff}}=\\frac{R_{DG}}{1-(-g_{m}(R_{D}\\parallel r_{o}))}=\\frac{R_{DG}}{1+g_{m}(R_{D}\\parallel r_{o})}.\n$$\n\nSubstitute the given values:\n$$\nR_{D}\\parallel r_{o}=\\frac{(10\\,\\text{k}\\Omega)(40\\,\\text{k}\\Omega)}{10\\,\\text{k}\\Omega+40\\,\\text{k}\\Omega}=8\\,\\text{k}\\Omega,\n$$\n$$\ng_{m}(R_{D}\\parallel r_{o})=(5.0\\times 10^{-3}\\,\\text{S})(8.0\\times 10^{3}\\,\\Omega)=40,\n$$\nso\n$$\nR_{\\text{in,eff}}=\\frac{1.2\\,\\text{M}\\Omega}{1+40}=\\frac{1.2\\,\\text{M}\\Omega}{41}=\\frac{1200\\,\\text{k}\\Omega}{41}=29.268\\ldots\\,\\text{k}\\Omega.\n$$\nRounded to three significant figures, this is $29.3\\,\\text{k}\\Omega$.", "answer": "$$\\boxed{29.3}$$", "id": "1316947"}, {"introduction": "Real-world feedback paths often involve both resistive and capacitive elements, making their impedance frequency-dependent. This exercise [@problem_id:1316972] generalizes the Miller effect to the complex impedance domain by analyzing a feedback network composed of a resistor and capacitor in parallel. Deriving the expression for the equivalent input impedance will demonstrate how the Miller theorem is fundamental to analyzing the frequency response of amplifiers, particularly in understanding the formation of input poles.", "problem": "Consider an ideal voltage amplifier characterized by its open-loop voltage gain, $A_v$, which is a real and negative constant. The amplifier is assumed to have an infinite input impedance and a zero output impedance. A feedback network is connected between the amplifier's input terminal and its output terminal. This network is composed of a resistor with resistance $R_f$ connected in parallel with a capacitor of capacitance $C_f$.\n\nDetermine the expression for the equivalent complex impedance, $Z_{in,fb}$, that this feedback network presents at the input terminal of the amplifier. Express your answer in terms of $A_v$, $R_f$, $C_f$, and the complex frequency variable $s$.", "solution": "Let the amplifier be modeled as an ideal voltage-controlled voltage source with zero output impedance and infinite input impedance, so $V_{out}=A_{v}V_{in}$. The feedback network connects between the input node and the output node, and consists of $R_{f}$ in parallel with the capacitor $C_{f}$ whose impedance is $1/(sC_{f})$. The equivalent impedance of the parallel network is\n$$\nZ_{f}=\\left(\\frac{1}{R_{f}}+sC_{f}\\right)^{-1}=\\frac{R_{f}}{1+sR_{f}C_{f}}.\n$$\nSince the amplifier input draws no current, the input current provided by a source connected to the input terminal equals the current through the feedback network. By Ohm’s law across the two terminals of $Z_{f}$,\n$$\nI_{in}=\\frac{V_{in}-V_{out}}{Z_{f}}=\\frac{V_{in}-A_{v}V_{in}}{Z_{f}}=\\frac{(1-A_{v})V_{in}}{Z_{f}}.\n$$\nTherefore, the input impedance seen at the input terminal is\n$$\nZ_{in,fb}=\\frac{V_{in}}{I_{in}}=\\frac{Z_{f}}{1-A_{v}}.\n$$\nSubstituting $Z_{f}$ gives the desired expression:\n$$\nZ_{in,fb}=\\frac{1}{1-A_{v}}\\left(\\frac{1}{R_{f}}+sC_{f}\\right)^{-1}=\\frac{R_{f}}{(1-A_{v})(1+sR_{f}C_{f})}.\n$$", "answer": "$$\\boxed{\\frac{R_{f}}{(1-A_{v})(1+sR_{f}C_{f})}}$$", "id": "1316972"}, {"introduction": "While the Miller theorem is an invaluable simplification tool, it is essential to recognize its limitations to avoid design pitfalls. This final practice problem [@problem_id:1316945] delves into a scenario where the standard Miller approximation is insufficient, as it conceals a crucial aspect of the circuit's behavior. By performing a complete nodal analysis on a two-stage compensated amplifier, you will uncover the existence of a right-half-plane zero, a feature that the Miller effect alone does not predict and which has significant implications for amplifier stability.", "problem": "A simplified small-signal model for a two-stage amplifier is used to analyze its frequency response. The first stage is modeled as an ideal transconductance amplifier with transconductance $g_{m1}$ and output resistance $R_1$. The second stage is also modeled as a transconductance amplifier with transconductance $g_{m2}$ and output resistance $R_2$. The output of the first stage is directly connected to the input of the second stage. To ensure stability, a compensation capacitor with capacitance $C_c$ is connected from the output of the first stage to the final output of the second stage. The input voltage is $V_{in}(s)$ and the final output voltage is $V_{out}(s)$.\n\nThe component values are given as:\n- First stage transconductance, $g_{m1} = 0.500 \\text{ mS}$\n- First stage output resistance, $R_1 = 200 \\text{ k}\\Omega$\n- Second stage transconductance, $g_{m2} = 2.00 \\text{ mS}$\n- Second stage output resistance, $R_2 = 100 \\text{ k}\\Omega$\n- Compensation capacitance, $C_c = 2.50 \\text{ pF}$\n\nA detailed analysis of the amplifier's voltage transfer function, $H(s) = V_{out}(s) / V_{in}(s)$, reveals the presence of a single zero. Calculate the frequency of this zero. Express your answer in units of megahertz (MHz), rounded to four significant figures.", "solution": "We model each stage as an ideal transconductance source with finite output resistance to ground, and apply nodal analysis at the intermediate node $v_{1}$ and the output node $v_{out} \\equiv v_{2}$. The compensation capacitor $C_{c}$ connects $v_{1}$ to $v_{2}$. Let $Y_{1} = \\frac{1}{R_{1}}$ and $Y_{2} = \\frac{1}{R_{2}}$.\n\nBy Kirchhoff’s current law at node $v_{1}$, the sum of currents through $R_{1}$ and $C_{c}$ equals the first-stage transconductance current:\n$$\nY_{1} v_{1} + s C_{c} (v_{1} - v_{2}) = g_{m1} V_{in}.\n$$\nRewriting,\n$$\n(Y_{1} + s C_{c}) v_{1} - s C_{c} v_{2} = g_{m1} V_{in}.\n$$\n\nAt node $v_{2}$, the currents through $R_{2}$ and $C_{c}$ plus the current of the second-stage transconductance source (from node to ground with value $g_{m2} v_{1}$) sum to zero:\n$$\nY_{2} v_{2} + s C_{c} (v_{2} - v_{1}) + g_{m2} v_{1} = 0,\n$$\nwhich gives\n$$\n(g_{m2} - s C_{c}) v_{1} + (Y_{2} + s C_{c}) v_{2} = 0.\n$$\n\nWriting in matrix form and solving for $H(s) = \\frac{v_{2}}{V_{in}}$ using Cramer’s rule,\n$$\n\\begin{pmatrix}\nY_{1} + s C_{c} & - s C_{c} \\\\\ng_{m2} - s C_{c} & Y_{2} + s C_{c}\n\\end{pmatrix}\n\\begin{pmatrix}\nv_{1} \\\\\nv_{2}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\ng_{m1} V_{in} \\\\\n0\n\\end{pmatrix},\n$$\nso\n$$\nH(s) = \\frac{v_{2}}{V_{in}} = \\frac{\\det\\begin{pmatrix}\nY_{1} + s C_{c} & g_{m1} \\\\\ng_{m2} - s C_{c} & 0\n\\end{pmatrix}}{\\det\\begin{pmatrix}\nY_{1} + s C_{c} & - s C_{c} \\\\\ng_{m2} - s C_{c} & Y_{2} + s C_{c}\n\\end{pmatrix}}\n= \\frac{g_{m1} \\left(g_{m2} - s C_{c}\\right)}{(Y_{1} + s C_{c})(Y_{2} + s C_{c}) + s C_{c} g_{m2} - (s C_{c})^{2}}.\n$$\n\nThe transfer function has a zero when its numerator vanishes:\n$$\ng_{m2} - s C_{c} = 0 \\quad \\Rightarrow \\quad s = \\frac{g_{m2}}{C_{c}}.\n$$\nThus, the zero is on the right half-plane with angular frequency $\\omega_{z} = \\frac{g_{m2}}{C_{c}}$, corresponding to\n$$\nf_{z} = \\frac{\\omega_{z}}{2 \\pi} = \\frac{g_{m2}}{2 \\pi C_{c}}.\n$$\n\nSubstituting the given values $g_{m2} = 2.00 \\times 10^{-3}$ S and $C_{c} = 2.50 \\times 10^{-12}$ F,\n$$\n\\omega_{z} = \\frac{2.00 \\times 10^{-3}}{2.50 \\times 10^{-12}} = 8.00 \\times 10^{8} \\text{ rad/s},\n$$\n$$\nf_{z} = \\frac{8.00 \\times 10^{8}}{2 \\pi} = \\frac{4.00 \\times 10^{8}}{\\pi} \\text{ Hz} \\approx 1.273 \\times 10^{8} \\text{ Hz} = 127.3 \\text{ MHz}.\n$$\nTherefore, the zero frequency in MHz is $127.3$ to four significant figures. Notably, $R_{1}$, $R_{2}$, and $g_{m1}$ do not affect the zero’s location; it is set solely by $g_{m2}$ and $C_{c}$.", "answer": "$$\\boxed{127.3}$$", "id": "1316945"}]}
{"hands_on_practices": [{"introduction": "A core task in analog circuit design is to bias a transistor to achieve a specific performance target. This first practice problem demonstrates the fundamental link between an amplifier's voltage gain, $A_v$, and the transistor's DC operating point. By working backward from a desired gain, you will determine the required overdrive voltage, $V_{OV}$, solidifying your understanding of how transconductance, $g_m$, bridges the gap between DC bias and AC performance [@problem_id:1318995].", "problem": "An electronics designer is building a common-source amplifier using an n-channel Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET). The amplifier circuit consists of the MOSFET and a drain resistor with resistance $R_D = 5.0 \\text{ k}\\Omega$. The transistor is biased to operate in the saturation region with a constant DC drain current of $I_D = 0.50 \\text{ mA}$. The designer's goal is to achieve a small-signal voltage gain magnitude, $|A_v|$, of exactly 10. For the purpose of this analysis, you may neglect the channel-length modulation effect (i.e., assume the output resistance $r_o$ is infinite).\n\nTo achieve this target gain, what must be the DC overdrive voltage, $V_{OV} = V_{GS} - V_t$, of the MOSFET?\n\nExpress your answer in volts (V), rounded to two significant figures.", "solution": "For a common-source amplifier with the output resistance neglected (i.e., $r_{o} \\to \\infty$), the small-signal voltage gain is\n$$\nA_{v}=-g_{m}R_{D} \\quad \\Rightarrow \\quad |A_{v}|=g_{m}R_{D}.\n$$\nThus, the required transconductance is\n$$\ng_{m}=\\frac{|A_{v}|}{R_{D}}.\n$$\nFor a long-channel MOSFET in saturation neglecting channel-length modulation, the drain current is $I_{D}=\\frac{1}{2}k'_{n}\\frac{W}{L}V_{OV}^{2}$ and the transconductance is\n$$\ng_{m}=\\frac{\\partial I_{D}}{\\partial V_{GS}}=k'_{n}\\frac{W}{L}V_{OV}=\\frac{2I_{D}}{V_{OV}}.\n$$\nSolving for the overdrive voltage gives\n$$\nV_{OV}=\\frac{2I_{D}}{g_{m}}.\n$$\nCombining the two relationships yields\n$$\nV_{OV}=\\frac{2I_{D}R_{D}}{|A_{v}|}.\n$$\nSubstituting the given values $I_{D}=0.50 \\text{ mA}=0.50\\times 10^{-3} \\text{ A}$, $R_{D}=5.0 \\text{ k}\\Omega=5.0\\times 10^{3}\\ \\Omega$, and $|A_{v}|=10$,\n$$\nV_{OV}=\\frac{2\\,(0.50\\times 10^{-3})\\,(5.0\\times 10^{3})}{10}\n=\\frac{(2\\times 0.50\\times 5.0)\\times 10^{0}}{10}\n=\\frac{5.0}{10}\n=0.50.\n$$\nRounded to two significant figures, the required overdrive voltage is $0.50$ V.", "answer": "$$\\boxed{0.50}$$", "id": "1318995"}, {"introduction": "Effective analog design is a game of trade-offs. Given a fixed power budget (i.e., a fixed drain current), how can we maximize a transistor's transconductance for optimal performance? This exercise [@problem_id:1319010] presents a practical design scenario comparing two strategies: increasing the transistor's physical size versus increasing its bias voltage. By analyzing the outcome of each strategy, you will uncover a crucial principle of transconductance efficiency that guides modern low-power circuit design.", "problem": "An analog circuit designer is evaluating methods to boost the transconductance of a key transistor in an amplifier stage. The starting point is a baseline N-channel Metal-Oxide-Semiconductor Field-Effect Transistor (NMOSFET), which we can call M0, biased to operate in the saturation region. When biased with an overdrive voltage $V_{OV0}$, transistor M0 has a drain current of $I_{D0}$ and a transconductance of $g_{m0}$.\n\nThe design goal is to create a new configuration that draws a drain current exactly double that of the baseline, i.e., $2I_{D0}$. The designer considers two distinct strategies to achieve this. For both strategies, you should assume the transistor remains in saturation and that channel-length modulation and the body effect can be neglected. Use the standard square-law model for the drain current in saturation, $I_D = \\frac{1}{2} k'_n \\frac{W}{L} V_{OV}^2$, where $k'_n$ is the process transconductance parameter, $W/L$ is the aspect ratio, and $V_{OV}$ is the overdrive voltage.\n\n**Strategy A:** A new transistor, M_A, is designed. It is fabricated using the same process as M0 (so $k'_n$ is the same), but its aspect ratio, $(W/L)_A$, is adjusted. M_A is biased at the same overdrive voltage as the baseline transistor, $V_{OV,A} = V_{OV0}$, such that its drain current is $I_{D,A} = 2I_{D0}$. Let the resulting transconductance of M_A be $g_{m,A}$.\n\n**Strategy B:** The original transistor, M0, with its aspect ratio $(W/L)_0$, is used. To achieve the target current, the gate-source bias voltage is increased, resulting in a new overdrive voltage, $V_{OV,B}$. This new bias results in a drain current $I_{D,B} = 2I_{D0}$. Let the transconductance of M0 in this new operating point be $g_{m,B}$.\n\nYour task is to determine which strategy yields a higher transconductance for the same final drain current. Specifically, calculate the ratio $\\frac{g_{m,A}}{g_{m,B}}$. Round your final answer to three significant figures.", "solution": "To solve this problem, we first need to recall the fundamental equations for a MOSFET operating in the saturation region. The drain current $I_D$ is given by the square-law model:\n$$I_D = \\frac{1}{2} k'_n \\frac{W}{L} V_{OV}^2$$\nwhere $k'_n = \\mu_n C_{ox}$ is the process transconductance parameter, $W/L$ is the aspect ratio, and $V_{OV} = V_{GS} - V_{th}$ is the overdrive voltage.\n\nThe transconductance, $g_m$, is defined as the partial derivative of the drain current with respect to the gate-source voltage:\n$$g_m = \\frac{\\partial I_D}{\\partial V_{GS}} = \\frac{\\partial I_D}{\\partial V_{OV}}$$\nApplying this to the drain current equation, we get:\n$$g_m = k'_n \\frac{W}{L} V_{OV}$$\nFor analysis, it is useful to have expressions for $g_m$ in terms of other parameters. We can derive two other common forms:\n1. By expressing $V_{OV}$ from the $I_D$ equation and substituting it into the $g_m$ equation: $V_{OV} = \\sqrt{\\frac{2I_D}{k'_n (W/L)}}$, so $g_m = k'_n \\frac{W}{L} \\sqrt{\\frac{2I_D}{k'_n (W/L)}} = \\sqrt{2 k'_n \\frac{W}{L} I_D}$.\n2. By expressing $k'_n \\frac{W}{L}$ from the $I_D$ equation: $k'_n \\frac{W}{L} = \\frac{2I_D}{V_{OV}^2}$, so $g_m = \\frac{2I_D}{V_{OV}^2} V_{OV} = \\frac{2I_D}{V_{OV}}$.\n\nThe baseline transistor, M0, has parameters $I_{D0}$, $V_{OV0}$, and $(W/L)_0$. Its transconductance is $g_{m0}$. We can express $g_{m0}$ using any of the three forms, for instance, $g_{m0} = \\frac{2I_{D0}}{V_{OV0}}$.\n\nNow, let's analyze Strategy A.\nIn this strategy, we have a new transistor M_A with drain current $I_{D,A} = 2I_{D0}$ and overdrive voltage $V_{OV,A} = V_{OV0}$. The aspect ratio $(W/L)_A$ is different from $(W/L)_0$. To find the transconductance $g_{m,A}$, the most direct relationship to use is the one involving $I_D$ and $V_{OV}$, since both are specified relative to the baseline.\n$$g_{m,A} = \\frac{2I_{D,A}}{V_{OV,A}}$$\nSubstituting the given conditions:\n$$g_{m,A} = \\frac{2(2I_{D0})}{V_{OV0}} = 2 \\left( \\frac{2I_{D0}}{V_{OV0}} \\right) = 2 g_{m0}$$\n\nNext, let's analyze Strategy B.\nIn this strategy, we use the original transistor, so its aspect ratio is unchanged: $(W/L)_B = (W/L)_0$. The drain current is set to $I_{D,B} = 2I_{D0}$ by changing the overdrive voltage to $V_{OV,B}$. To find the transconductance $g_{m,B}$, the most convenient relationship is the one involving $(W/L)$ and $I_D$, since $(W/L)$ is constant.\n$$g_{m,B} = \\sqrt{2 k'_n (\\frac{W}{L})_B I_{D,B}}$$\nSubstituting the given conditions:\n$$g_{m,B} = \\sqrt{2 k'_n (\\frac{W}{L})_0 (2I_{D0})} = \\sqrt{2} \\cdot \\sqrt{2 k'_n (\\frac{W}{L})_0 I_{D0}}$$\nRecognizing that $\\sqrt{2 k'_n (\\frac{W}{L})_0 I_{D0}}$ is the transconductance of the baseline transistor, $g_{m0}$, we get:\n$$g_{m,B} = \\sqrt{2} g_{m0}$$\n\nFinally, we need to calculate the ratio $\\frac{g_{m,A}}{g_{m,B}}$.\n$$\\frac{g_{m,A}}{g_{m,B}} = \\frac{2 g_{m0}}{\\sqrt{2} g_{m0}} = \\frac{2}{\\sqrt{2}} = \\sqrt{2}$$\nThe problem asks for the numerical value rounded to three significant figures.\n$$\\sqrt{2} \\approx 1.41421356...$$\nRounding to three significant figures gives $1.41$.", "answer": "$$\\boxed{1.41}$$", "id": "1319010"}, {"introduction": "To achieve the high voltage gains required in precision amplifiers, designers often employ a cascode configuration, a powerful technique that dramatically increases the overall output resistance. This practice problem guides you through the small-signal analysis to derive the output resistance of this two-transistor structure. Mastering this analysis [@problem_id:1319057] will reveal the \"resistance boosting\" effect that makes the cascode a cornerstone of high-performance analog circuit design.", "problem": "An analog circuit designer is working on a high-performance Operational Transconductance Amplifier (OTA). A critical part of the design is a cascode gain stage, intended to provide a very high output impedance. This stage is constructed using two N-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), labeled $M_1$ and $M_2$.\n\nThe transistor $M_1$ is in a common-source configuration with its source terminal connected to ground. The transistor $M_2$ is stacked on top of $M_1$, with the source of $M_2$ connected to the drain of $M_1$. The output of the amplifier is taken at the drain of $M_2$. For the purpose of analyzing the output resistance, the input signal is turned off, which means the gate of $M_1$ is connected to AC ground. The gate of $M_2$ is connected to a stable DC bias voltage, which also acts as an AC ground. The body of $M_1$ is connected to its source (ground), while the body of $M_2$ is connected to ground.\n\nUsing the small-signal model for the transistors, derive a closed-form analytic expression for the output resistance, $R_{out}$, seen looking into the drain of $M_2$. Assume the small-signal parameters for $M_1$ are its transconductance $g_{m1}$ and its output resistance $r_{o1}$. The parameters for $M_2$ are its transconductance $g_{m2}$, its body-effect transconductance $g_{mb2}$, and its output resistance $r_{o2}$. Your final expression should be in terms of these parameters.", "solution": "To find the output resistance, we set up the small-signal equivalent circuit. A test voltage $v_{o}$ is applied to the output node (the drain of $M_2$), and we calculate the resulting current $i_o$ that it supplies. The output resistance is then $R_{out} = v_o/i_o$. Per the problem description, the input signal at the gate of $M_1$ is turned off (AC ground), and the bias voltage at the gate of $M_2$ also serves as an AC ground. The source of $M_1$ and the body of both transistors are grounded. We define the intermediate node voltage between $M_1$ drain and $M_2$ source as $v_x$. For convenience, we use conductances $g_{o1} \\equiv 1/r_{o1}$ and $g_{o2} \\equiv 1/r_{o2}$. Because the gate and source of $M_{1}$ are both at AC ground, $v_{gs1}=0$, so the controlled source $g_{m1}v_{gs1}$ is zero. Thus, $M_1$ behaves as a single resistor $r_{o1}$ to ground.\n\nFor $M_2$, with its gate and body at ground, we have $v_{gs2} = v_g - v_s = 0 - v_x = -v_x$ and $v_{bs2} = v_b - v_s = 0 - v_x = -v_x$. The drain-to-source voltage is $v_{ds2}=v_{o}-v_{x}$. The drain current of $M_2$, which is the current $i_o$ drawn from the test source, is given by the sum of currents through the controlled sources and the output resistance:\n$$\ni_{o} = g_{m2}v_{gs2}+g_{mb2}v_{bs2}+\\frac{v_{ds2}}{r_{o2}} = -(g_{m2}+g_{mb2})v_{x}+g_{o2}(v_{o}-v_{x})\n$$\nNext, we apply Kirchhoff's Current Law (KCL) at node $v_x$. We sum the currents leaving the node to zero:\n1. The current leaving through $r_{o1}$ to ground is $g_{o1}v_x$.\n2. The current leaving through $M_2$'s output resistance $r_{o2}$ is $g_{o2}(v_{x} - v_{o})$.\n3. The controlled source current of $M_2$ flows from its drain to its source, with a value of $g_{m2}v_{gs2} + g_{mb2}v_{bs2} = -(g_{m2}+g_{mb2})v_x$. This current enters node $v_x$. Therefore, the current leaving node $v_x$ through this controlled path is $(g_{m2}+g_{mb2})v_x$.\nSumming these gives the KCL equation:\n$$\ng_{o1}v_{x} + g_{o2}(v_{x}-v_{o}) + (g_{m2}+g_{mb2})v_{x} = 0\n$$\nwhich simplifies to\n$$\n\\left(g_{o1}+g_{o2}+g_{m2}+g_{mb2}\\right)v_{x}-g_{o2}v_{o}=0\n$$\nSolving for $v_x$:\n$$\nv_{x}=\\frac{g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\\,v_{o}\n$$\nSubstitute this into the expression for $i_{o}$:\n$$\ni_{o}=-(g_{m2}+g_{mb2})\\left(\\frac{g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\\right)v_{o}\n+g_{o2}\\left(v_{o}-\\frac{g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}v_{o}\\right)\n$$\nFactor out $v_{o}$ and find the common denominator:\n$$\n\\frac{i_o}{v_o} = g_{o2}-\\frac{g_{o2}\\left(g_{m2}+g_{mb2}+g_{o2}\\right)}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\n= \\frac{g_{o2}(g_{o1}+g_{o2}+g_{m2}+g_{mb2}) - g_{o2}(g_{m2}+g_{mb2}+g_{o2})}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\n$$\n$$\n\\frac{i_o}{v_o} = \\frac{g_{o1}g_{o2}}{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}\n$$\nTherefore the output resistance $R_{out}=v_{o}/i_{o}$ is\n$$\nR_{out}=\\frac{g_{o1}+g_{o2}+g_{m2}+g_{mb2}}{g_{o1}g_{o2}}\n$$\nRe-expressing in terms of $r_{o1}$ and $r_{o2}$,\n$$\nR_{out}=r_{o1}+r_{o2}+(g_{m2}+g_{mb2})\\,r_{o1}r_{o2}\n$$\nAs expected, $g_{m1}$ does not appear because $v_{gs1}=0$ when the input is turned off.", "answer": "$$\\boxed{r_{o1}+r_{o2}+\\left(g_{m2}+g_{mb2}\\right)r_{o1}r_{o2}}$$", "id": "1319057"}]}
{"hands_on_practices": [{"introduction": "A primary task for a control engineer is to model a physical system and determine its overall input-output relationship. Often, a system is described by a set of interconnected linear equations. This exercise provides foundational practice in translating such a set of equations into the language of signal-flow graphs and applying Mason's Gain Formula to derive the closed-loop transfer function. By working through this magnetic levitation system model [@problem_id:1591131], you will practice identifying forward paths and feedback loops from a system's governing equations, a crucial skill for analyzing any complex control system.", "problem": "A simplified model for a magnetic levitation control system is described by a set of interconnected linear equations in the Laplace domain. The goal of the controller is to make the levitated object's position, $Y(s)$, follow a reference setpoint, $R(s)$. The system is governed by the following equations, where all initial conditions are assumed to be zero:\n\n1.  The error signal, $E(s)$, is the difference between the reference and the actual position:\n    $E(s) = R(s) - Y(s)$\n\n2.  A controller block generates an intermediate signal, $X_c(s)$, based on the error and a velocity feedback term. This is described by:\n    $X_c(s) = K_1 E(s) - K_f s Y(s)$\n    where $K_1$ is a proportional gain and $K_f$ is a derivative feedback gain.\n\n3.  The control voltage, $U(s)$, is generated from the intermediate signal:\n    $U(s) = K_2 X_c(s)$\n    where $K_2$ is an amplification gain.\n\n4.  The levitated object (the plant) responds to the control voltage. Its dynamics are modeled as a double integrator:\n    $Y(s) = \\frac{K_p}{s^2} U(s)$\n    where $K_p$ is the plant gain.\n\nUsing Mason's Gain Formula, determine the overall closed-loop transfer function $T(s) = \\frac{Y(s)}{R(s)}$ for the system. Express your answer as a single rational function of $s$ in terms of the parameters $K_p, K_1, K_2,$ and $K_f$.", "solution": "We first form the signal-flow relationships from the given Laplace-domain blocks:\n- Error summation: $E(s) = R(s) - Y(s)$.\n- Controller summer: $X_{c}(s) = K_{1} E(s) - K_{f} s\\, Y(s)$.\n- Amplifier: $U(s) = K_{2} X_{c}(s)$.\n- Plant: $Y(s) = \\frac{K_{p}}{s^{2}} U(s)$.\n\nUsing Mason’s Gain Formula, identify the single forward path from $R$ to $Y$:\n$$P_{1} = \\frac{K_{1} K_{2} K_{p}}{s^{2}}.$$\n\nIdentify individual feedback loops and their gains:\n1) Loop $Y \\rightarrow E \\rightarrow X_{c} \\rightarrow U \\rightarrow Y$ with gain\n$$L_{1} = (-1)\\cdot K_{1} \\cdot K_{2} \\cdot \\frac{K_{p}}{s^{2}} = -\\frac{K_{1} K_{2} K_{p}}{s^{2}}.$$\n2) Loop $Y \\rightarrow X_{c} \\rightarrow U \\rightarrow Y$ (via derivative feedback) with gain\n$$L_{2} = (-K_{f} s)\\cdot K_{2} \\cdot \\frac{K_{p}}{s^{2}} = -\\frac{K_{2} K_{p} K_{f}}{s}.$$\n\nThese loops touch each other and also touch the forward path, so there are no non-touching loop products, and the path cofactor is $\\Delta_{1} = 1$. The determinant is\n$$\\Delta = 1 - (L_{1} + L_{2}) = 1 + \\frac{K_{1} K_{2} K_{p}}{s^{2}} + \\frac{K_{2} K_{p} K_{f}}{s}.$$\n\nMason’s formula gives\n$$T(s) = \\frac{Y(s)}{R(s)} = \\frac{P_{1} \\Delta_{1}}{\\Delta} = \\frac{\\frac{K_{1} K_{2} K_{p}}{s^{2}}}{1 + \\frac{K_{1} K_{2} K_{p}}{s^{2}} + \\frac{K_{2} K_{p} K_{f}}{s}}.$$\n\nMultiplying numerator and denominator by $s^{2}$ to obtain a single rational function yields\n$$T(s) = \\frac{K_{1} K_{2} K_{p}}{s^{2} + K_{2} K_{p} K_{f} s + K_{1} K_{2} K_{p}}.$$", "answer": "$$\\boxed{\\frac{K_{p} K_{2} K_{1}}{s^{2} + K_{p} K_{2} K_{f} s + K_{p} K_{2} K_{1}}}$$", "id": "1591131"}, {"introduction": "A powerful concept in systems theory is that different internal structures can yield identical external behavior. This means two systems that look entirely different on paper might be functionally equivalent. This practice [@problem_id:1591107] challenges you to use Mason's Gain Formula not just as a computational tool, but as an analytical one to prove whether two distinct signal-flow graphs represent the same system. Mastering this demonstrates a deeper understanding of how system topology relates to the overall transfer function, $T(s)$.", "problem": "Consider two distinct linear time-invariant systems, System A and System B, represented by their signal-flow graphs. The goal is to determine if these systems are functionally equivalent by comparing their overall transfer functions, $T_A(s) = Y_A(s) / U(s)$ and $T_B(s) = Y_B(s) / U(s)$. The gains $a$, $b$, and $c$ are arbitrary non-zero constants.\n\n**System A:**\nThe system has an input node $U$, an output node $Y_A$, and two internal nodes, $N_1$ and $N_2$. The signal paths and their corresponding gains are as follows:\n*   From $U$ to $N_1$ with a gain of $1$.\n*   From $N_1$ to $N_2$ with a gain of $a$.\n*   From $N_2$ to $Y_A$ with a gain of $1$.\n*   From $N_1$ to $Y_A$ with a gain of $c$.\n*   From $N_2$ to $N_1$ with a gain of $b$.\n\n**System B:**\nThe system has an input node $U$, an output node $Y_B$, and three internal nodes, $N_3$, $N_4$, and $N_5$. The signal paths and their corresponding gains are as follows:\n*   From $U$ to $N_3$ with a gain of $1$.\n*   From $N_3$ to $N_4$ with a gain of $a$.\n*   From $N_4$ to $Y_B$ with a gain of $1$.\n*   From $N_3$ to $N_5$ with a gain of $c$.\n*   From $N_5$ to $Y_B$ with a gain of $1$.\n*   From $N_4$ to $N_3$ with a gain of $b$.\n\nUsing Mason's gain formula, determine the relationship between the transfer function of System A, $T_A(s)$, and the transfer function of System B, $T_B(s)$.\n\nWhich of the following statements is correct?\n\nA. $T_A(s) = T_B(s)$\n\nB. $T_A(s) = -T_B(s)$\n\nC. $T_A(s) = \\frac{T_B(s)}{1 - ab}$\n\nD. $T_A(s) = T_B(s)(1 - ab)$\n\nE. $T_A(s) \\left(1 - \\frac{ab}{c}\\right) = T_B(s)$", "solution": "We apply Mason’s gain formula to each system separately and compare the resulting transfer functions.\n\nMason’s gain formula states that for a signal-flow graph with forward paths having gains $P_{k}$, overall determinant $\\Delta$, and cofactors $\\Delta_{k}$ (computed by removing loops that touch the $k$-th forward path), the overall transfer function is\n$$\nT = \\frac{\\sum_{k} P_{k} \\Delta_{k}}{\\Delta},\n$$\nwhere\n$$\n\\Delta = 1 - \\left(\\text{sum of individual loop gains}\\right) + \\left(\\text{sum of gain products of two non-touching loops}\\right) - \\cdots .\n$$\n\nSystem A:\n- Forward paths from $U$ to $Y_{A}$:\n  - $P_{1}$: $U \\to N_{1} \\to Y_{A}$ with gain $c$.\n  - $P_{2}$: $U \\to N_{1} \\to N_{2} \\to Y_{A}$ with gain $a$.\n- Loops:\n  - $L_{1}$: $N_{1} \\to N_{2} \\to N_{1}$ with loop gain $ab$.\n- There is only one loop, so there are no pairs of non-touching loops. Thus\n$$\n\\Delta = 1 - ab.\n$$\n- The loop $L_{1}$ touches both forward paths (each path contains $N_{1}$ and $L_{1}$ contains $N_{1}$), so there are no loops that do not touch either path. Hence\n$$\n\\Delta_{1} = 1, \\quad \\Delta_{2} = 1.\n$$\nTherefore,\n$$\nT_{A}(s) = \\frac{c \\cdot \\Delta_{1} + a \\cdot \\Delta_{2}}{\\Delta} = \\frac{c + a}{1 - ab}.\n$$\n\nSystem B:\n- Forward paths from $U$ to $Y_{B}$:\n  - $P_{1}'$: $U \\to N_{3} \\to N_{4} \\to Y_{B}$ with gain $a$.\n  - $P_{2}'$: $U \\to N_{3} \\to N_{5} \\to Y_{B}$ with gain $c$.\n- Loops:\n  - $L_{1}'$: $N_{3} \\to N_{4} \\to N_{3}$ with loop gain $ab$.\n- Only one loop exists, so\n$$\n\\Delta = 1 - ab.\n$$\n- The loop $L_{1}'$ touches $P_{1}'$ (shares $N_{3}$ and $N_{4}$) and also touches $P_{2}'$ (shares $N_{3}$). Thus no non-touching loops remain for either path, so\n$$\n\\Delta_{1}' = 1, \\quad \\Delta_{2}' = 1.\n$$\nTherefore,\n$$\nT_{B}(s) = \\frac{a \\cdot \\Delta_{1}' + c \\cdot \\Delta_{2}'}{\\Delta} = \\frac{a + c}{1 - ab}.\n$$\n\nComparison:\n$$\nT_{A}(s) = \\frac{a + c}{1 - ab} = T_{B}(s).\n$$\nThus the correct statement is $T_{A}(s) = T_{B}(s)$, corresponding to option A.", "answer": "$$\\boxed{A}$$", "id": "1591107"}, {"introduction": "Beyond simple analysis, Mason's Gain Formula is a valuable tool for system design and synthesis. This exercise [@problem_id:1591092] moves from merely calculating a transfer function to imposing a specific design constraint: making the system's overall gain independent of the complex frequency $s$. This requires you to find a relationship between system parameters that results in a strategic pole-zero cancellation, offering a glimpse into how feedback and feedforward gains can be tuned to shape a system's dynamic response.", "problem": "A linear time-invariant control system is described by a Signal Flow Graph (SFG). The system has a single input node, $R(s)$, a single output node, $Y(s)$, and two intermediate nodes, denoted as $X_1$ and $X_2$. The connections and their associated gains are defined as follows:\n\n1.  There is a forward path from the input node $R(s)$ to the intermediate node $X_1$ with a constant gain of $K_1$.\n2.  There is a forward path from node $X_1$ to node $X_2$ with a dynamic gain of $G_1(s) = \\frac{A}{s+a}$.\n3.  There is a forward path from node $X_2$ to the output node $Y(s)$ with a constant gain of $K_2$.\n4.  There is a direct forward path from node $X_1$ to the output node $Y(s)$ with a constant gain of $B$.\n5.  There is a feedback path from node $X_2$ back to node $X_1$ with a constant gain of $C$.\n6.  There is a self-loop on node $X_2$ with a dynamic gain of $H_2(s) = \\frac{D}{s+b}$.\n\nAll parameters $A, B, C, D, K_1, K_2, a, b$ are non-zero real constants. Your task is to find the specific relationship between the constant gains $B, C,$ and $K_2$ that results in the overall system transfer function $T(s) = \\frac{Y(s)}{R(s)}$ being entirely independent of the complex frequency $s$. Express your answer for $K_2$ as a function of $B$ and $C$.", "solution": "Let the node values be $R$, $X_{1}$, $X_{2}$, and $Y$. Using the signal flow relations:\n- $X_{1} = K_{1} R + C X_{2}$.\n- $X_{2} = G_{1}(s) X_{1} + H_{2}(s) X_{2}$.\n- $Y = B X_{1} + K_{2} X_{2}$.\n\nWith $G_{1}(s) = \\frac{A}{s+a}$ and $H_{2}(s) = \\frac{D}{s+b}$, the self-loop at $X_{2}$ gives\n$$\nX_{2} - H_{2}(s) X_{2} = G_{1}(s) X_{1}\n\\;\\Rightarrow\\;\nX_{2} = \\frac{G_{1}(s)}{1 - H_{2}(s)} X_{1}.\n$$\nSubstitute into $X_{1}$:\n$$\nX_{1} = K_{1} R + C \\frac{G_{1}(s)}{1 - H_{2}(s)} X_{1}\n\\;\\Rightarrow\\;\nX_{1} \\left[ 1 - \\frac{C G_{1}(s)}{1 - H_{2}(s)} \\right] = K_{1} R,\n$$\nso\n$$\nX_{1} = \\frac{K_{1} \\left( 1 - H_{2}(s) \\right)}{\\left( 1 - H_{2}(s) \\right) - C G_{1}(s)} R,\n\\qquad\nX_{2} = \\frac{K_{1} G_{1}(s)}{\\left( 1 - H_{2}(s) \\right) - C G_{1}(s)} R.\n$$\nThen\n$$\nY = B X_{1} + K_{2} X_{2}\n= \\frac{K_{1} \\left[ B \\left( 1 - H_{2}(s) \\right) + K_{2} G_{1}(s) \\right]}{\\left( 1 - H_{2}(s) \\right) - C G_{1}(s)} R,\n$$\nso the transfer function is\n$$\nT(s) = \\frac{Y}{R} = K_{1} \\frac{B \\left( 1 - H_{2}(s) \\right) + K_{2} G_{1}(s)}{\\left( 1 - H_{2}(s) \\right) - C G_{1}(s)}.\n$$\nFor $T(s)$ to be independent of $s$, the numerator must be a constant multiple of the denominator for all $s$. Thus there exists a constant $\\gamma$ such that\n$$\nB \\left( 1 - H_{2}(s) \\right) + K_{2} G_{1}(s) = \\gamma \\left[ \\left( 1 - H_{2}(s) \\right) - C G_{1}(s) \\right].\n$$\nBecause $G_{1}(s)$ and $1 - H_{2}(s)$ are independent functions of $s$ for nonzero constants $A, D, a, b$, matching coefficients yields\n$$\nB = \\gamma, \\qquad K_{2} = - \\gamma C.\n$$\nEliminating $\\gamma$ gives the required relation\n$$\nK_{2} = - B C,\n$$\nwhich makes $T(s) = K_{1} B$, a constant independent of $s$.", "answer": "$$\\boxed{-BC}$$", "id": "1591092"}]}
{"hands_on_practices": [{"introduction": "To begin our practical exploration of cascade control, we will analyze the fundamental steady-state behavior of a simple system. This first exercise [@problem_id:1561686] uses proportional-only controllers for both the primary and secondary loops. By calculating the steady-state offset, you will gain a foundational understanding of how the gains of each loop interact and why an offset is an inherent characteristic of such a design, setting the stage for more advanced control strategies.", "problem": "A cascade control system is designed to regulate the temperature of a chemical reactor. The primary (or master) loop controls the reactor temperature, and the secondary (or slave) loop controls the temperature of a heating jacket surrounding the reactor.\n\nThe dynamics of the system are modeled by the following first-order transfer functions:\n- The primary process, which relates the jacket temperature to the reactor temperature, is given by $G_{p1}(s) = \\frac{K_1}{\\tau_1 s + 1}$, where the process gain is $K_1 = 0.75$ and the time constant is $\\tau_1 = 12$ minutes.\n- The secondary process, which relates the controller output (e.g., steam valve position) to the jacket temperature, is given by $G_{p2}(s) = \\frac{K_2}{\\tau_2 s + 1}$, where the process gain is $K_2 = 1.5$ and the time constant is $\\tau_2 = 3$ minutes.\n\nBoth controllers are proportional-only:\n- The primary controller has a transfer function $G_{c1}(s) = K_{c1}$, with a gain of $K_{c1} = 2.0$.\n- The secondary controller has a transfer function $G_{c2}(s) = K_{c2}$, with a gain of $K_{c2} = 5.0$.\n\nIn this configuration, the output of the primary controller $G_{c1}(s)$ serves as the setpoint for the secondary loop.\n\nAssuming the system is initially at steady state, a unit step change is applied to the setpoint of the primary variable (the reactor temperature). Calculate the new steady-state offset of the primary variable. The offset is defined as the difference between the setpoint and the measured process variable at steady state.\n\nExpress your answer as a numerical value, rounded to three significant figures.", "solution": "We denote the reactor temperature as $y_{1}$ and the jacket temperature as $y_{2}$. The inner (secondary) loop tracks its setpoint $r_{2}$ and the outer (primary) loop tracks the reactor setpoint $r_{1}$. The blocks are:\n- Primary process: $G_{p1}(s)=\\frac{K_{1}}{\\tau_{1}s+1}$,\n- Secondary process: $G_{p2}(s)=\\frac{K_{2}}{\\tau_{2}s+1}$,\n- Primary controller: $G_{c1}(s)=K_{c1}$,\n- Secondary controller: $G_{c2}(s)=K_{c2}$.\n\nFor the inner loop, with unity feedback on $y_{2}$, the closed-loop transfer function from $r_{2}$ to $y_{2}$ is\n$$\nT_{2}(s)=\\frac{G_{c2}(s)G_{p2}(s)}{1+G_{c2}(s)G_{p2}(s)}.\n$$\nAt steady state, we use the static gains (set $s=0$), so $G_{p1}(0)=K_{1}$, $G_{p2}(0)=K_{2}$, and\n$$\nT_{2}(0)=\\frac{K_{c2}K_{2}}{1+K_{c2}K_{2}}.\n$$\n\nThe outer-loop relationships are\n$$\ny_{2}=T_{2}(s)\\,r_{2},\\quad y_{1}=G_{p1}(s)\\,y_{2},\\quad r_{2}=G_{c1}(s)\\,(r_{1}-y_{1}).\n$$\nCombining and evaluating at steady state gives\n$$\ny_{1}=K_{1}\\,T_{2}(0)\\,K_{c1}\\,(r_{1}-y_{1}).\n$$\nRearranging,\n$$\ny_{1}\\bigl[1+K_{c1}K_{1}T_{2}(0)\\bigr]=K_{c1}K_{1}T_{2}(0)\\,r_{1},\n$$\nso the steady-state closed-loop gain from $r_{1}$ to $y_{1}$ is\n$$\n\\frac{y_{1,\\mathrm{ss}}}{r_{1}}=\\frac{A}{1+A},\\quad \\text{where } A=K_{c1}K_{1}T_{2}(0)=K_{c1}K_{1}\\,\\frac{K_{c2}K_{2}}{1+K_{c2}K_{2}}.\n$$\nFor a unit step in $r_{1}$, the steady-state offset (error) is\n$$\ne_{\\mathrm{ss}}=r_{1}-y_{1,\\mathrm{ss}}=1-\\frac{A}{1+A}=\\frac{1}{1+A}.\n$$\n\nSubstituting the given gains $K_{1}=0.75$, $K_{2}=1.5$, $K_{c1}=2.0$, $K_{c2}=5.0$:\n$$\nK_{c2}K_{2}=5.0\\times 1.5=7.5=\\frac{15}{2},\\quad T_{2}(0)=\\frac{7.5}{1+7.5}=\\frac{15/2}{17/2}=\\frac{15}{17},\n$$\n$$\nA=K_{c1}K_{1}T_{2}(0)=2.0\\times 0.75\\times \\frac{15}{17}=\\frac{3}{2}\\times \\frac{15}{17}=\\frac{45}{34},\n$$\n$$\ne_{\\mathrm{ss}}=\\frac{1}{1+\\frac{45}{34}}=\\frac{34}{79}\\approx 0.430379746.\n$$\nRounded to three significant figures, the steady-state offset is $0.430$.\n\nNote that the time constants $\\tau_{1}$ and $\\tau_{2}$ do not affect the steady-state offset; only the DC gains matter for steady-state behavior.", "answer": "$$\\boxed{0.430}$$", "id": "1561686"}, {"introduction": "Having established the baseline performance with P-only controllers, we now advance our design to eliminate steady-state error. This practice problem [@problem_id:1561685] introduces a Proportional-Integral (PI) controller into the primary loop. Your task is to analyze how this change affects the system's ability to track a setpoint, specifically by determining the system type and its corresponding static error constant. This analysis demonstrates the power of integral action in achieving precise, long-term control.", "problem": "Consider a cascade control system designed to regulate the temperature in a chemical process. The system consists of two nested feedback loops: an outer loop and an inner loop.\n\nThe outer loop employs a Proportional-Integral (PI) controller, described by the transfer function $G_{c1}(s) = K_{p1} + \\frac{K_{i1}}{s}$. This controller is responsible for the primary process, which is modeled by the transfer function $G_{p1}(s) = \\frac{K_1}{\\tau_1 s + 1}$.\n\nThe inner loop, which is nested within the outer loop's forward path, is managed by a Proportional (P-only) controller with a gain of $G_{c2}(s) = K_{p2}$. The P-only controller commands a secondary process modeled by the transfer function $G_{p2}(s) = \\frac{K_2}{\\tau_2 s + 1}$. The inner loop uses unity feedback.\n\nAll parameters ($K_{p1}, K_{i1}, K_1, \\tau_1, K_{p2}, K_2, \\tau_2$) are positive real constants. The overall system is configured with unity feedback around the entire cascade structure.\n\nFor the purpose of steady-state error analysis with respect to the primary reference input, determine the system type and the corresponding static velocity error constant, $K_v$. Present your answer as an ordered pair containing the system type followed by the analytical expression for $K_v$.", "solution": "The inner loop is a unity-feedback loop with forward path $G_{c2}(s)G_{p2}(s) = K_{p2}\\,\\dfrac{K_{2}}{\\tau_{2}s+1}$. Its closed-loop transfer function from the inner-loop setpoint to the output of $G_{p2}$ is\n$$\nT_{2}(s) \\;=\\; \\frac{G_{c2}(s)G_{p2}(s)}{1+G_{c2}(s)G_{p2}(s)}\n\\;=\\; \\frac{\\dfrac{K_{p2}K_{2}}{\\tau_{2}s+1}}{1+\\dfrac{K_{p2}K_{2}}{\\tau_{2}s+1}}\n\\;=\\; \\frac{K_{p2}K_{2}}{\\tau_{2}s+1+K_{p2}K_{2}}.\n$$\nThe forward path seen by the outer loop is then $T_{2}(s)G_{p1}(s)$, so the outer-loop open-loop transfer function with unity feedback is\n$$\nL(s) \\;=\\; G_{c1}(s)\\,T_{2}(s)\\,G_{p1}(s)\n\\;=\\; \\left(K_{p1}+\\frac{K_{i1}}{s}\\right)\\,\\frac{K_{p2}K_{2}}{\\tau_{2}s+1+K_{p2}K_{2}}\\,\\frac{K_{1}}{\\tau_{1}s+1}.\n$$\nTo determine the system type, inspect $L(s)$ as $s\\to 0$. The PI controller contributes one factor of $1/s$, while all other factors are finite and nonzero at $s=0$. Therefore there is exactly one pole at the origin in $L(s)$, and the system is Type $1$.\n\nFor a unity-feedback Type $1$ system, the static velocity error constant is\n$$\nK_{v} \\;=\\; \\lim_{s\\to 0} s\\,L(s)\n\\;=\\; \\lim_{s\\to 0} \\frac{\\left(sK_{p1}+K_{i1}\\right)\\,K_{1}K_{p2}K_{2}}{\\left(\\tau_{1}s+1\\right)\\left(\\tau_{2}s+1+K_{p2}K_{2}\\right)}\n\\;=\\; \\frac{K_{i1}\\,K_{1}\\,K_{p2}\\,K_{2}}{1+K_{p2}K_{2}}.\n$$\nThus, the ordered pair consisting of the system type and $K_{v}$ is $\\left(1,\\;\\dfrac{K_{i1}K_{1}K_{p2}K_{2}}{1+K_{p2}K_{2}}\\right)$.", "answer": "$$\\boxed{\\begin{pmatrix} 1 & \\dfrac{K_{i1}K_{1}K_{p2}K_{2}}{1+K_{p2}K_{2}} \\end{pmatrix}}$$", "id": "1561685"}, {"introduction": "Moving from analysis to synthesis, this final exercise focuses on the practical design of the inner loop controller, a crucial step for ensuring the stability and responsiveness of the entire cascade system. Using industry-standard frequency-domain specifications, you will design a PI controller for the secondary process [@problem_id:1561689]. This task mirrors a common engineering challenge, requiring you to translate performance goals like phase margin and gain crossover frequency into concrete controller parameters, $K_c$ and $\\tau_I$.", "problem": "In a chemical processing plant, a cascade control strategy is used to regulate the temperature of a reactant mixture in a Continuous Stirred-Tank Reactor (CSTR). The inner loop of this system controls the temperature of the reactor's heating jacket. The dynamic behavior of this secondary process, relating the heater power input to the jacket temperature, is modeled by the transfer function $G_{p2}(s)$.\n\nThe secondary process is described by:\n$$G_{p2}(s) = \\frac{K_p e^{-\\theta s}}{(\\tau_1 s + 1)(\\tau_2 s + 1)}$$\nwhere the process gain is $K_p = 2.0$ (in units of K/kW), the time constants are $\\tau_1 = 5.0$ s and $\\tau_2 = 1.0$ s, and there is a transport delay of $\\theta = 0.5$ s.\n\nA Proportional-Integral (PI) controller is to be designed for this inner loop. The controller has the standard form:\n$$G_{c2}(s) = K_c \\left(1 + \\frac{1}{\\tau_I s}\\right)$$\n\nYour task is to determine the controller parameters, the proportional gain $K_c$ and the integral time constant $\\tau_I$, that will result in the inner open-loop system, $G_{OL,2}(s) = G_{c2}(s)G_{p2}(s)$, having a gain crossover frequency of $\\omega_{gc} = 0.5 \\text{ rad/s}$ and a phase margin of $60^\\circ$.\n\nExpress your answer for the pair $(K_c, \\tau_I)$ using numerical values. The value for $\\tau_I$ must be in units of seconds. Round both values to three significant figures.", "solution": "The inner-loop open-loop transfer function is\n$$G_{OL,2}(s)=G_{c2}(s)G_{p2}(s)=K_{c}\\left(1+\\frac{1}{\\tau_{I}s}\\right)\\frac{K_{p}\\exp(-\\theta s)}{(\\tau_{1}s+1)(\\tau_{2}s+1)}.$$\nAt the desired gain crossover frequency $\\omega_{gc}$, the Bode design conditions are:\n- Magnitude condition: $\\left|G_{OL,2}(j\\omega_{gc})\\right|=1$.\n- Phase condition corresponding to phase margin $\\text{PM}$: $\\arg\\{G_{OL,2}(j\\omega_{gc})\\}=-\\pi+\\text{PM}$.\n\nWrite the frequency response at $\\omega=\\omega_{gc}$:\n$$G_{p2}(j\\omega)=\\frac{K_{p}\\exp(-j\\omega\\theta)}{(1+j\\omega\\tau_{1})(1+j\\omega\\tau_{2})},\\quad G_{c2}(j\\omega)=K_{c}\\left(1+\\frac{1}{j\\omega\\tau_{I}}\\right)=K_{c}\\frac{1+j\\omega\\tau_{I}}{j\\omega\\tau_{I}}.$$\n\nTherefore,\n- Controller magnitude and phase:\n$$|G_{c2}(j\\omega)|=K_{c}\\frac{\\sqrt{1+(\\omega\\tau_{I})^{2}}}{\\omega\\tau_{I}},\\qquad \\arg\\{G_{c2}(j\\omega)\\}=\\arctan(\\omega\\tau_{I})-\\frac{\\pi}{2}.$$\n- Plant magnitude and phase:\n$$|G_{p2}(j\\omega)|=\\frac{K_{p}}{\\sqrt{(1+(\\omega\\tau_{1})^{2})(1+(\\omega\\tau_{2})^{2})}},$$\n$$\\arg\\{G_{p2}(j\\omega)\\}=-\\arctan(\\omega\\tau_{1})-\\arctan(\\omega\\tau_{2})-\\omega\\theta.$$\n\nPhase design at $\\omega=\\omega_{gc}$:\nThe phase condition is $\\arg\\{G_{OL,2}(j\\omega_{gc})\\} = (\\arctan(\\omega_{gc}\\tau_{I})-\\frac{\\pi}{2}) - \\arctan(\\omega_{gc}\\tau_{1})-\\arctan(\\omega_{gc}\\tau_{2})-\\omega_{gc}\\theta=-\\pi+\\text{PM}.$\nWith $\\text{PM}=\\pi/3$, the target phase is $-2\\pi/3$. Rearranging for $\\tau_I$ yields:\n$$\\arctan(\\omega_{gc}\\tau_{I})=\\frac{\\pi}{2}+\\arctan(\\omega_{gc}\\tau_{1})+\\arctan(\\omega_{gc}\\tau_{2})+\\omega_{gc}\\theta-\\frac{2\\pi}{3}.$$\n\nSubstitute the given values $K_{p}=2$, $\\tau_{1}=5$, $\\tau_{2}=1$, $\\theta=0.5$, and $\\omega_{gc}=0.5$:\n$$\\arctan(0.5\\,\\tau_{I})=\\frac{\\pi}{2}+\\arctan(0.5\\times 5)+\\arctan(0.5\\times 1)+0.5\\times 0.5-\\frac{2\\pi}{3}.$$\nCompute the right-hand side numerically:\n$$\\arctan(2.5)\\approx 1.1902899497,\\quad \\arctan(0.5)\\approx 0.4636476090,\\quad 0.5\\times 0.5=0.25,$$\n$$\\Rightarrow \\arctan(0.5\\,\\tau_{I})\\approx 1.5707963268+1.1902899497+0.4636476090+0.25-\\frac{2\\pi}{3}\\approx 1.3803387831.$$\nHence\n$$0.5\\,\\tau_{I}=\\tan(1.3803387831)\\;\\Rightarrow\\;\\tau_{I}=2\\tan(1.3803387831)\\approx 10.374\\ \\text{s}.$$\n\nMagnitude design at $\\omega=\\omega_{gc}$:\n$$\\left|G_{OL,2}(j\\omega_{gc})\\right|=K_{c}\\,\\frac{\\sqrt{1+(0.5\\,\\tau_{I})^{2}}}{0.5\\,\\tau_{I}}\\cdot \\frac{K_{p}}{\\sqrt{(1+(0.5\\tau_{1})^{2})(1+(0.5\\tau_{2})^{2})}}=1.$$\nWith $\\tau_{I}\\approx 10.374$, we have $0.5\\,\\tau_{I}\\approx 5.187$, so\n$$\\frac{\\sqrt{1+(0.5\\,\\tau_{I})^{2}}}{0.5\\,\\tau_{I}}\\approx \\frac{\\sqrt{1+5.187^{2}}}{5.187}\\approx 1.0184.$$\nAlso,\n$$\\sqrt{(1+(0.5\\tau_{1})^{2})(1+(0.5\\tau_{2})^{2})}=\\sqrt{(1+2.5^{2})(1+0.5^{2})}=\\sqrt{7.25\\times 1.25}=\\sqrt{9.0625}=3.0104,$$\nso\n$$|G_{p2}(j\\omega_{gc})|=\\frac{K_{p}}{3.0104}=\\frac{2}{3.0104}\\approx 0.6649.$$\nTherefore\n$$K_{c}=\\frac{1}{\\left(\\frac{\\sqrt{1+(0.5\\,\\tau_{I})^{2}}}{0.5\\,\\tau_{I}}\\right)\\left(\\frac{K_{p}}{\\sqrt{(1+(0.5\\tau_{1})^{2})(1+(0.5\\tau_{2})^{2})}}\\right)}\\approx \\frac{1}{1.0184\\times 0.6649}\\approx 1.48.$$\n\nRounded to three significant figures:\n$$K_{c}\\approx 1.48,\\qquad \\tau_{I}\\approx 10.4\\ \\text{s}.$$", "answer": "$$\\boxed{\\begin{pmatrix}1.48 & 10.4\\end{pmatrix}}$$", "id": "1561689"}]}
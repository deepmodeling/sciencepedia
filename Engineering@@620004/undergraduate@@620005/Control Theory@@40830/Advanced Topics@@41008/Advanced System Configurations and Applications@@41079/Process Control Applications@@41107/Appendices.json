{"hands_on_practices": [{"introduction": "Effective process control begins not with complex equations, but with a sound physical design. Before any controller can be tuned, we must ensure that it is measuring the right variable at the right location. This foundational practice [@problem_id:1601739] challenges you to critically evaluate a proposed Process and Instrumentation Diagram (P&ID) for a paint mixing system and identify a crucial design flaw. Successfully diagnosing this issue reinforces the most fundamental principle of feedback control: to control a variable, you must first be able to measure it accurately.", "problem": "An engineering firm is designing an automated paint mixing system described by a Process and Instrumentation Diagram (P&ID). The system's primary goal is to produce a specific shade of light blue paint by continuously blending a stream of white base paint with a stream of concentrated blue colorant. The blended paint is then collected in a product tank.\n\nThe proposed design is described as follows:\nWhite base paint is pumped from a storage tank, and blue colorant is pumped from a separate storage tank. Both lines merge into a single pipe that contains a static mixer to ensure homogeneity. This common pipe then feeds into the top of the final product tank.\n\nThe control scheme for the color is designed as follows:\n1.  An Analyzer Transmitter (AT), which is a sensor that measures color, is installed on the feed line carrying the pure blue colorant, just before it merges with the white paint line.\n2.  The signal from this AT is sent to an Analyzer Indicating Controller (AIC). The desired final color shade is entered into this AIC as the setpoint.\n3.  The AIC calculates the necessary adjustments and sends an output signal to a Flow Control Valve (FCV) located on the same blue colorant feed line, downstream of the pump but upstream of the AT.\n\nA separate level control loop, using a Level Indicating Controller (LIC), maintains a constant level in the product tank by adjusting a pump on the tank's outlet. This part of the system is assumed to be working correctly.\n\nBased on the principles of process control, identify the single most critical design flaw in the described color control scheme that will prevent it from accurately regulating the final paint color.\n\nA. The use of a static mixer is inappropriate; an agitated vessel is required for proper mixing of paints.\n\nB. A Flow Indicating Controller (FIC) should be used instead of an Analyzer Indicating Controller (AIC) for a flow-based control problem.\n\nC. The control valve (FCV) is positioned incorrectly; it should be placed after the Analyzer Transmitter (AT).\n\nD. The system lacks a feedforward control component to account for variations in the white paint flow rate.\n\nE. The Analyzer Transmitter (AT) is located in a position where it cannot measure the variable that needs to be controlled.", "solution": "Define the manipulated variable as the blue colorant valve opening $u$, the blue colorant mass (or volumetric) flow as $F_{b}=F_{b}(u)$, and the white base flow as $F_{w}$ (a disturbance from the perspective of the color loop). Let the analyzer’s measure of “color intensity” per unit flow of the pure blue colorant be $c_{b}$, assumed constant for a given lot of colorant, and the white base contribute zero to color intensity. The controlled variable to be achieved in the final product is the mixed color $y$, which for a linear mixing/composition-to-color model is\n$$\ny=\\frac{c_{b}F_{b}}{F_{b}+F_{w}}.\n$$\n\nThe Analyzer Transmitter (AT) is installed on the pure blue line upstream of the mixing point. Therefore, the AT measurement is\n$$\nm=c_{b},\n$$\nwhich is a property of the colorant stream and is independent of $F_{b}$ and $F_{w}$. The Analyzer Indicating Controller (AIC) compares the setpoint for the desired final color, $y_{\\text{sp}}$, to the measurement $m$, forming the error\n$$\ne=y_{\\text{sp}}-m.\n$$\nIt then adjusts $u$ to drive $e \\to 0$. However, since $m=c_{b}$ does not depend on $u$, the loop has\n$$\n\\frac{\\partial m}{\\partial u}=0,\n$$\nwhile the true controlled variable $y$ does depend on $u$ through $F_{b}(u)$:\n$$\n\\frac{\\partial y}{\\partial u}=\\frac{\\partial}{\\partial u}\\left(\\frac{c_{b}F_{b}(u)}{F_{b}(u)+F_{w}}\\right)\\neq 0.\n$$\nBecause the feedback measurement $m$ is decoupled from the manipulated variable $u$, the closed-loop color control is effectively open-loop with respect to the actual objective $y$. The controller cannot infer any change in $y$ from $m$ and therefore cannot regulate the final paint color; it will act on $u$ without receiving corrective feedback about $y$.\n\nConsequently, the single most critical design flaw is the placement and choice of the measured variable: the AT is located where it measures the property of the pure blue stream rather than the mixed stream (or product), i.e., it cannot measure the variable that needs to be controlled. This corresponds to option E.\n\nOther options are not the root cause:\n- A: Static mixers are commonly suitable for continuous blending; an agitated vessel is not inherently required.\n- B: The problem is composition/color control, not purely flow control; an AIC is appropriate in principle if it measures the correct variable.\n- C: Moving the FCV relative to the AT does not resolve that the measurement is of the wrong stream.\n- D: Feedforward for $F_{w}$ could improve performance, but without correct feedback of $y$ the loop still cannot regulate color.", "answer": "$$\\boxed{E}$$", "id": "1601739"}, {"introduction": "One of the primary goals of automatic control is to maintain a desired output despite external disturbances. This exercise [@problem_id:1601737] explores this concept of disturbance rejection in the context of a biomedical application—an automated IV infusion pump. By analyzing a linearized model, you will quantify how a simple proportional controller works to counteract the natural drop in flow rate as the IV bag empties. This practice provides a clear, quantitative understanding of steady-state error (offset) and demonstrates how controller gain can be used to improve regulation performance.", "problem": "An automated intravenous (IV) infusion pump is designed to deliver medication at a constant volumetric flow rate. The flow rate, $Q$, is primarily driven by the hydrostatic pressure from the fluid in the IV bag, but this pressure decreases as the bag empties. A feedback controller is implemented to counteract this disturbance.\n\nThe system's behavior around a desired operating point ($Q_{sp}$, $h_0$) can be described with a linearized model. Let $q(t) = Q(t) - Q_{sp}$ be the deviation in flow rate from the setpoint $Q_{sp}$, and let $h'(t) = h(t) - h_0$ be the deviation in fluid height from the initial height $h_0$. The controller adjusts the fluidic resistance of the IV tube. Let $r(t) = R_f(t) - R_0$ be the deviation in resistance from its nominal value $R_0$ at the operating point.\n\nThe linearized process is described by the equation:\n$$q(t) = \\frac{Q_{sp}}{h_0} h'(t) - \\frac{Q_{sp}}{R_0} r(t)$$\n\nA proportional (P) controller is used to adjust the resistance. The control law is given by:\n$$r(t) = -K_c e(t)$$\nwhere $e(t) = Q_{sp} - Q(t)$ is the error and $K_c$ is a positive controller gain.\n\nAssume the system is initially operating at steady-state with a flow rate of $Q_{sp}$ and a fluid height of $h_0$. After some time, the fluid level in the bag drops by a small, constant amount $\\Delta h$. The system then reaches a new steady state.\n\nDerive a closed-form analytic expression for the new steady-state flow rate, $Q_{final}$, in terms of the setpoint flow rate $Q_{sp}$, the initial height $h_0$, the height drop $\\Delta h$, and the dimensionless controller gain group $K = K_c \\frac{Q_{sp}}{R_0}$.", "solution": "We start from the given linearized process relationship between deviations about the operating point:\n$$q(t) = \\frac{Q_{sp}}{h_0} h'(t) - \\frac{Q_{sp}}{R_0} r(t).$$\nThe proportional controller is given by\n$$r(t) = -K_c e(t), \\quad e(t) = Q_{sp} - Q(t).$$\nExpress the error in terms of the deviation variable $q(t) = Q(t) - Q_{sp}$:\n$$e(t) = Q_{sp} - Q(t) = -\\bigl(Q(t) - Q_{sp}\\bigr) = -q(t).$$\nTherefore, the control law becomes\n$$r(t) = -K_c\\bigl(-q(t)\\bigr) = K_c q(t).$$\nAfter the fluid level drops by a small constant amount $\\Delta h$, the new steady state has constant deviations. The height deviation is\n$$h'(t) = h(t) - h_0 = \\bigl(h_0 - \\Delta h\\bigr) - h_0 = -\\Delta h.$$\nAt steady state, substitute $h' = -\\Delta h$ and $r = K_c q$ into the process equation:\n$$q = \\frac{Q_{sp}}{h_0}(-\\Delta h) - \\frac{Q_{sp}}{R_0}\\bigl(K_c q\\bigr).$$\nIntroduce the given dimensionless gain group\n$$K = K_c \\frac{Q_{sp}}{R_0},$$\nto rewrite the steady-state equation as\n$$q = -\\frac{Q_{sp}}{h_0}\\Delta h - K q.$$\nCollect terms in $q$:\n$$(1+K)q = -\\frac{Q_{sp}}{h_0}\\Delta h.$$\nSolve for $q$:\n$$q = -\\frac{Q_{sp}}{h_0}\\frac{\\Delta h}{1+K}.$$\nThe final steady-state flow rate is $Q_{final} = Q_{sp} + q$, hence\n$$Q_{final} = Q_{sp} - \\frac{Q_{sp}}{h_0}\\frac{\\Delta h}{1+K} = Q_{sp}\\left(1 - \\frac{\\Delta h}{h_0(1+K)}\\right).$$\nThis expression shows that as $K \\to \\infty$, $Q_{final} \\to Q_{sp}$ (perfect regulation), while for $K = 0$ (no control) it reduces to the open-loop sensitivity $Q_{final} = Q_{sp}\\left(1 - \\frac{\\Delta h}{h_0}\\right)$ given by the hydrostatic effect alone.", "answer": "$$\\boxed{Q_{sp}\\left(1 - \\frac{\\Delta h}{h_{0}\\left(1+K\\right)}\\right)}$$", "id": "1601737"}, {"introduction": "Moving from theory to practice, this hands-on problem addresses one of the most common tasks for a process control engineer: tuning a PID controller. Using data from a simulated open-loop step test on a distillation column's reboiler, you will learn to characterize the process dynamics [@problem_id:1601770]. This exercise guides you through the classic process reaction curve method to determine the parameters of a first-order-plus-dead-time (FOPDT) model and then apply the famous Ziegler-Nichols tuning rules to calculate the initial PID parameters $K_c$, $\\tau_I$, and $\\tau_D$. This practice bridges the gap between system identification and controller implementation, a cornerstone of industrial process control.", "problem": "A process engineer is tasked with tuning a Proportional-Integral-Derivative (PID) controller for a reboiler at the bottom of a distillation column. The controller manipulates the steam valve opening (in percent, %) to control the temperature of the liquid product (in degrees Celsius, °C). To characterize the process dynamics, the engineer performs an open-loop step test.\n\nThe process is initially at a steady state with the steam valve at 20.0% opening and the product temperature at 110.0 °C. At time $t=0$, the steam valve opening is suddenly increased to 30.0%. After this step change, the temperature remains constant for a short period before starting to rise, eventually settling at a new steady-state temperature of 125.0 °C.\n\nAn analysis of the recorded temperature data reveals that a line constructed to be tangent to the steepest part of the temperature response curve intersects the initial temperature line (110.0 °C) at time $t = 2.5$ minutes. The same tangent line intersects the final temperature line (125.0 °C) at time $t = 9.0$ minutes.\n\nAssuming the reboiler's dynamic response can be approximated by a first-order plus dead-time model, calculate the standard Ziegler-Nichols tuning parameters for a PID controller: the dimensionless controller gain $K_c$, the integral time $\\tau_I$, and the derivative time $\\tau_D$. Express your final answers for $\\tau_I$ and $\\tau_D$ in minutes. Round all three numerical values to three significant figures.", "solution": "We model the reboiler dynamics by a first-order plus dead-time (FOPDT) model, whose step response for a step input change $\\Delta u$ at $t=0$ is\n$$\ny(t) = y_{0} + K_{p}\\,\\Delta u \\left(1 - \\exp\\!\\left(-\\frac{t - L}{T}\\right)\\right), \\quad t \\geq L,\n$$\nwith process gain $K_{p}$, time constant $T$, and dead time $L$.\n\nFrom the open-loop step test:\n- Initial steady state: valve opening $u_{0}=20.0$ (in percent units) and product temperature $y_{0}=110.0$ (degrees Celsius).\n- Step change: $u$ increased to $u_{1}=30.0$ at $t=0$, so $\\Delta u = u_{1}-u_{0} = 10.0$.\n- Final steady-state temperature: $y_{\\infty}=125.0$, so $\\Delta y = y_{\\infty}-y_{0} = 15.0$.\n\nThus the process gain is\n$$\nK_{p} = \\frac{\\Delta y}{\\Delta u} = \\frac{15.0}{10.0} = 1.5.\n$$\n\nUsing the tangent (reaction curve) method for FOPDT identification:\n- The tangent at the inflection point intersects the initial output line at $t = 2.5$ minutes, giving the dead time\n$$\nL = 2.5 \\text{ minutes}.\n$$\n- The same tangent intersects the final output line at $t = 9.0$ minutes, so the time constant is\n$$\nT = 9.0 - 2.5 = 6.5 \\text{ minutes}.\n$$\n\nThe standard Ziegler-Nichols step-response PID settings are\n$$\nK_{c} = 1.2\\,\\frac{T}{K_{p}\\,L}, \\quad \\tau_{I} = 2\\,L, \\quad \\tau_{D} = \\frac{L}{2}.\n$$\n\nSubstituting $K_{p} = 1.5$, $L = 2.5$ minutes, and $T = 6.5$ minutes:\n$$\nK_{c} = 1.2 \\times \\frac{6.5}{1.5 \\times 2.5} = 1.2 \\times \\frac{6.5}{3.75} = 1.2 \\times \\frac{26}{15} = \\frac{156}{75} = 2.08,\n$$\n$$\n\\tau_{I} = 2 \\times 2.5 = 5.00 \\text{ minutes},\n$$\n$$\n\\tau_{D} = \\frac{2.5}{2} = 1.25 \\text{ minutes}.\n$$\n\nRounded to three significant figures as required: $K_{c} = 2.08$, $\\tau_{I} = 5.00$ minutes, $\\tau_{D} = 1.25$ minutes.", "answer": "$$\\boxed{\\begin{pmatrix} 2.08 & 5.00 & 1.25 \\end{pmatrix}}$$", "id": "1601770"}]}
{"hands_on_practices": [{"introduction": "Successfully interfacing different logic families, such as Transistor-Transistor Logic (TTL) and CMOS, begins with a fundamental check of voltage level compatibility. This practice challenges you to calculate the high-level noise margin, $N_{MH}$, for a direct connection from a TTL output to a CMOS input. By quantifying the voltage difference between the minimum guaranteed output HIGH of the driver ($V_{OH,min}$) and the minimum required input HIGH of the receiver ($V_{IH,min}$), you will discover precisely why this common interface scenario is inherently unreliable without additional circuitry. [@problem_id:1943189]", "problem": "In digital system design, interfacing components from different logic families requires careful consideration of their voltage characteristics to ensure reliable operation. A designer is attempting to connect the output of a standard Transistor-Transistor Logic (TTL) gate to the input of a High-Speed CMOS (HCMOS) gate. Both families are operating from a common power supply of $+5 \\, \\text{V}$.\n\nAccording to the manufacturer's datasheets, the relevant voltage parameters are as follows:\n\nFor the standard TTL output gate:\n- Minimum HIGH-level output voltage ($V_{OH,min}$): $2.4 \\, \\text{V}$\n- Maximum LOW-level output voltage ($V_{OL,max}$): $0.4 \\, \\text{V}$\n\nFor the HCMOS input gate:\n- Minimum HIGH-level input voltage ($V_{IH,min}$): $3.5 \\, \\text{V}$\n- Maximum LOW-level input voltage ($V_{IL,max}$): $1.0 \\, \\text{V}$\n\nCalculate the HIGH-level noise margin, $N_{MH}$, for this TTL-to-HCMOS interface. Express your answer in Volts.", "solution": "The high-level noise margin between a driving logic family and a receiving logic family is defined, in the worst case, as the difference between the minimum guaranteed HIGH output voltage of the driver and the minimum HIGH input voltage required by the receiver. Therefore,\n$$\nN_{MH} = V_{OH,\\min}(\\text{driver}) - V_{IH,\\min}(\\text{receiver}).\n$$\nHere, the driver is the standard TTL gate and the receiver is the HCMOS gate. Substituting the given values,\n$$\nN_{MH} = 2.4 - 3.5 = -1.1\n$$\nA negative value indicates that the TTL HIGH level does not meet the HCMOS HIGH input requirement, implying no valid noise margin on the HIGH level for this interface.", "answer": "$$\\boxed{-1.1}$$", "id": "1943189"}, {"introduction": "While voltage compatibility is essential, a digital interface must also satisfy current requirements to function reliably. This exercise introduces the concept of fan-out, which defines the maximum number of inputs a single output can drive based on current limitations. You will analyze the current sourcing ($I_{OH}$) and sinking ($I_{OL}$) capabilities of a CMOS driver against the demands of multiple TTL inputs to determine the practical connection limit of the interface, highlighting how current can be a more restrictive factor than voltage. [@problem_id:1943182]", "problem": "An engineering student is tasked with designing a digital interface to connect a modern microcontroller, which uses High-Speed Complementary Metal-Oxide-Semiconductor (HC-CMOS) logic, to an older piece of laboratory equipment that uses a legacy Transistor-Transistor Logic (TTL) based architecture. To ensure reliable operation, the student must calculate the maximum number of legacy TTL inputs that a single HC-CMOS output pin can drive, a concept known as fan-out.\n\nThe manufacturer's datasheets provide the following current specifications.\n\nFor a single HC-CMOS output pin:\n- Maximum current it can source when in the HIGH logic state: $I_{OH_{max}} = 4.0 \\, \\text{mA}$\n- Maximum current it can sink when in the LOW logic state: $I_{OL_{max}} = 6.0 \\, \\text{mA}$\n\nFor a single legacy TTL input pin:\n- Current drawn from the driver when the input is in the HIGH logic state: $I_{IH} = 50 \\, \\mu\\text{A}$\n- Current delivered to the driver when the input is in the LOW logic state: $I_{IL} = 1.8 \\, \\text{mA}$\n\nAssume that the voltage levels for the logic HIGH and LOW states are compatible between the two families. What is the maximum integer number of legacy TTL inputs that a single HC-CMOS output pin can safely and reliably drive?", "solution": "To ensure reliable operation, both the HIGH-state sourcing requirement and the LOW-state sinking requirement must be satisfied simultaneously. Let $N$ be the number of TTL inputs driven by one HC-CMOS output. The fan-out is determined by the tighter of the two constraints:\n- HIGH-state (source) constraint: the HC-CMOS output must source the sum of all TTL input HIGH currents, so\n$$\nN \\leq \\frac{I_{OH_{\\max}}}{I_{IH}}.\n$$\n- LOW-state (sink) constraint: the HC-CMOS output must sink the sum of all TTL input LOW currents, so\n$$\nN \\leq \\frac{I_{OL_{\\max}}}{I_{IL}}.\n$$\nTherefore, the maximum allowable integer fan-out is\n$$\nN_{\\max}=\\left\\lfloor \\min\\!\\left(\\frac{I_{OH_{\\max}}}{I_{IH}},\\,\\frac{I_{OL_{\\max}}}{I_{IL}}\\right) \\right\\rfloor.\n$$\nSubstitute the given worst-case currents:\n$$\n\\frac{I_{OH_{\\max}}}{I_{IH}}=\\frac{4.0\\times 10^{-3}}{50\\times 10^{-6}}=80,\n$$\n$$\n\\frac{I_{OL_{\\max}}}{I_{IL}}=\\frac{6.0\\times 10^{-3}}{1.8\\times 10^{-3}}=\\frac{10}{3}\\approx 3.33\\ldots.\n$$\nTaking the minimum and then the floor gives\n$$\nN_{\\max}=\\left\\lfloor \\min\\!\\left(80,\\,\\frac{10}{3}\\right) \\right\\rfloor=\\left\\lfloor \\frac{10}{3} \\right\\rfloor=3.\n$$\nThus, the LOW-state sinking requirement is the limiting factor, and the HC-CMOS output can safely and reliably drive at most three legacy TTL inputs.", "answer": "$$\\boxed{3}$$", "id": "1943182"}, {"introduction": "Understanding voltage and current constraints is the prerequisite for designing a robust interfacing solution. This final practice moves from analysis to design, asking you to evaluate a common bi-directional level-shifter circuit used to bridge devices operating at different supply voltages. To identify a valid set of component values, you must synthesize your knowledge of voltage thresholds, worst-case leakage currents, and device-specific parameters like on-state resistance ($R_{DS(on)}$) into a comprehensive analysis. [@problem_id:1943207]", "problem": "You are tasked with designing a simple bi-directional logic level shifter to interface a single I/O pin of a modern 3.3V Complementary Metal-Oxide-Semiconductor (CMOS) microcontroller with a single I/O pin of an older 5V Transistor-Transistor Logic (TTL) device. The proposed circuit consists of a single N-channel enhancement-mode Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) and two pull-up resistors, $R_1$ and $R_2$. Resistor $R_1$ connects the 3.3V I/O line to a 3.3V supply ($V_{DD1}$), and resistor $R_2$ connects the 5V I/O line to a 5V supply ($V_{DD2}$). The MOSFET's source is connected to the 3.3V I/O line, its drain is connected to the 5V I/O line, and its gate is connected directly to the 3.3V supply.\n\nThe circuit must operate correctly under the following DC specifications:\n\n**Device Specifications:**\n*   **3.3V CMOS Microcontroller:**\n    *   Supply Voltage, $V_{DD1} = 3.3 \\, \\text{V}$\n    *   Minimum Input High Voltage, $V_{IH,CMOS} = 2.0 \\, \\text{V}$\n*   **5V TTL Device:**\n    *   Supply Voltage, $V_{DD2} = 5.0 \\, \\text{V}$\n    *   Maximum Input Low Voltage, $V_{IL,TTL} = 0.8 \\, \\text{V}$\n    *   Minimum Input High Voltage, $V_{IH,TTL} = 2.0 \\, \\text{V}$\n    *   Maximum Output Low Voltage, $V_{OL,TTL} = 0.5 \\, \\text{V}$ when sinking a maximum current of $I_{OL,TTL} = 8.0 \\, \\text{mA}$.\n*   **N-Channel MOSFET:**\n    *   Threshold Voltage, $V_{GS(th)} = 1.5 \\, \\text{V}$\n    *   On-state Drain-Source Resistance, $R_{DS(on)} = 10 \\, \\Omega$ (at $V_{GS} = 3.3 \\, \\text{V}$).\n*   **System Leakage:**\n    *   Assume a worst-case total input leakage current of $I_{leak} = 50 \\, \\mu\\text{A}$ on each I/O line when it is in a high-impedance input state.\n\nFor this interface to function reliably, you must select appropriate values for the pull-up resistors $R_1$ and $R_2$. Which of the following pairs of $(R_1, R_2)$ is a valid design choice that satisfies all the given constraints?\n\nA. $(R_1, R_2) = (4.7 \\, \\text{k}\\Omega, 10 \\, \\text{k}\\Omega)$\n\nB. $(R_1, R_2) = (220 \\, \\Omega, 10 \\, \\text{k}\\Omega)$\n\nC. $(R_1, R_2) = (4.7 \\, \\text{k}\\Omega, 47 \\, \\Omega)$\n\nD. $(R_1, R_2) = (33 \\, \\text{k}\\Omega, 10 \\, \\text{k}\\Omega)$\n\nE. $(R_1, R_2) = (4.7 \\, \\text{k}\\Omega, 82 \\, \\text{k}\\Omega)$", "solution": "We analyze the standard bidirectional NMOS level-shifter with gate tied to the lower supply. For DC correctness we enforce:\n- High-level margins against leakage on each pulled-up input.\n- Low-level on the 5 V TTL input when the 3.3 V side drives low, accounting for MOSFET $R_{DS(on)}$.\n- Maximum sink current of the 5 V TTL output when it drives low, accounting for both pull-ups and the MOSFET $R_{DS(on)}$.\n\nAll calculations use Ohmâ€™s law and the given DC specifications.\n\n1) High-level constraints with leakage\nWhen a line is an input (high-impedance), a worst-case leakage $I_{leak}$ to ground causes a drop across the pull-up. To meet the input-high requirement, enforce\n$$\nV_{DD} - I_{leak} R \\geq V_{IH} \\quad \\Longrightarrow \\quad R \\leq \\frac{V_{DD} - V_{IH}}{I_{leak}}.\n$$\n- On the 3.3 V CMOS side:\n$$\nR_{1} \\leq \\frac{3.3 - 2.0}{50 \\times 10^{-6}} = 2.6 \\times 10^{4} \\, \\Omega = 26 \\, \\text{k}\\Omega.\n$$\n- On the 5 V TTL side:\n$$\nR_{2} \\leq \\frac{5.0 - 2.0}{50 \\times 10^{-6}} = 6.0 \\times 10^{4} \\, \\Omega = 60 \\, \\text{k}\\Omega.\n$$\nThus any choice with $R_{1} > 26 \\, \\text{k}\\Omega$ or $R_{2} > 60 \\, \\text{k}\\Omega$ fails. This eliminates D (since $R_{1}=33 \\, \\text{k}\\Omega$) and E (since $R_{2}=82 \\, \\text{k}\\Omega$).\n\n2) TTL input low when 3.3 V side drives low\nAssume the 3.3 V output drives strongly to ground and the MOSFET is on with $R_{DS(on)} = 10 \\, \\Omega$. The 5 V side node (TTL input) voltage $V_{L2}$ is set by current through $R_{2}$ and the MOSFETâ€™s on-resistance:\n$$\nI = \\frac{5 - V_{L2}}{R_{2}}, \\quad V_{L2} = I \\, R_{DS(on)}.\n$$\nEliminate $I$ to obtain\n$$\nV_{L2} = \\frac{5 \\, R_{DS(on)}}{R_{2} + R_{DS(on)}}.\n$$\nRequire $V_{L2} \\leq V_{IL,TTL} = 0.8$:\n$$\n\\frac{5 \\, R_{DS(on)}}{R_{2} + R_{DS(on)}} \\leq 0.8\n\\;\\Longrightarrow\\;\nR_{2} \\geq \\frac{5 \\, R_{DS(on)}}{0.8} - R_{DS(on)} = 5.25 \\, R_{DS(on)}.\n$$\nWith $R_{DS(on)} = 10 \\, \\Omega$, this gives $R_{2} \\geq 52.5 \\, \\Omega$. Thus $R_{2} = 47 \\, \\Omega$ (option C) violates $V_{IL,TTL}$; all other candidates satisfy this condition.\n\n3) TTL output low sinking both pull-ups when it drives low\nWhen the 5 V TTL output drives low, it must not be forced to sink more than $I_{OL,TTL} = 8.0 \\, \\text{mA}$ if we are to rely on its guarantee $V_{OL,TTL} \\leq 0.5 \\, \\text{V}$. At worst case $V_{d} = V_{OL,TTL} = 0.5 \\, \\text{V}$, the currents are:\n- From the 5 V pull-up:\n$$\nI_{2} = \\frac{5.0 - 0.5}{R_{2}} = \\frac{4.5}{R_{2}}.\n$$\n- From the 3.3 V pull-up through the MOSFET:\nLet $I_{1}$ be the current from $R_{1}$. The 3.3 V side node voltage is $V_{s} = V_{d} + I_{1} R_{DS(on)}$, and\n$$\nI_{1} = \\frac{3.3 - V_{s}}{R_{1}} = \\frac{3.3 - \\left(V_{d} + I_{1} R_{DS(on)}\\right)}{R_{1}}\n\\;\\Longrightarrow\\;\nI_{1} = \\frac{3.3 - V_{d}}{R_{1} + R_{DS(on)}} = \\frac{2.8}{R_{1} + 10}.\n$$\nTotal sink current is\n$$\nI_{tot} = I_{1} + I_{2} = \\frac{2.8}{R_{1} + 10} + \\frac{4.5}{R_{2}}.\n$$\nImpose $I_{tot} \\leq 8.0 \\, \\text{mA}$.\n\nEvaluate candidates:\n- A: $R_{1} = 4.7 \\, \\text{k}\\Omega$, $R_{2} = 10 \\, \\text{k}\\Omega$:\n$$\nI_{1} = \\frac{2.8}{4700 + 10} \\approx 0.594 \\, \\text{mA}, \\quad\nI_{2} = \\frac{4.5}{10000} = 0.45 \\, \\text{mA},\n$$\n$$\nI_{tot} \\approx 1.04 \\, \\text{mA} \\leq 8.0 \\, \\text{mA} \\quad \\text{(passes)}.\n$$\n- B: $R_{1} = 220 \\, \\Omega$, $R_{2} = 10 \\, \\text{k}\\Omega$:\n$$\nI_{1} = \\frac{2.8}{220 + 10} = \\frac{2.8}{230} \\approx 12.17 \\, \\text{mA} > 8.0 \\, \\text{mA} \\quad \\text{(fails)}.\n$$\n- C: $R_{2} = 47 \\, \\Omega$ already fails the low-level condition in step 2, and additionally\n$$\nI_{2} = \\frac{4.5}{47} \\approx 95.7 \\, \\text{mA} \\quad \\text{(far above 8.0} \\, \\text{mA}\\text{)}.\n$$\n- D: $R_{1}$ violates the leakage constraint in step 1 (even though $I_{tot}$ would be small).\n- E: $R_{2}$ violates the leakage constraint in step 1 (even though $I_{tot}$ would be small).\n\nCombining all constraints, only option A satisfies:\n- $R_{1} \\leq 26 \\, \\text{k}\\Omega$ and $R_{2} \\leq 60 \\, \\text{k}\\Omega$ (leakage high-level).\n- $R_{2} \\geq 52.5 \\, \\Omega$ (TTL input low when 3.3 V side drives low).\n- $\\frac{2.8}{R_{1} + 10} + \\frac{4.5}{R_{2}} \\leq 8.0 \\, \\text{mA}$ (TTL output low sink limit).\n\nTherefore, the valid design choice is option A.", "answer": "$$\\boxed{A}$$", "id": "1943207"}]}
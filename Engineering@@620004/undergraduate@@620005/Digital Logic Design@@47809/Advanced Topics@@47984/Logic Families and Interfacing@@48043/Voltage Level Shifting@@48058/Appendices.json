{"hands_on_practices": [{"introduction": "Before designing a complex level-shifting circuit, a crucial first step is to determine if a direct connection between two logic families is viable. This practice guides you through the fundamental analysis of noise margins, a key metric for interface reliability [@problem_id:1977004]. By using the voltage specifications from device datasheets, you can calculate the high-level ($NM_H$) and low-level ($NM_L$) noise margins to quantify the system's tolerance to electrical noise and make an informed decision about the need for a dedicated level shifter.", "problem": "In a mixed-voltage digital system, a logic gate from an older 5V logic family is used to drive an input of a modern 3.3V Complementary Metal-Oxide-Semiconductor (CMOS) logic gate. To ensure reliable operation, an engineer must evaluate the noise margins of this direct interface.\n\nThe manufacturer's datasheets provide the following specifications for the devices:\n\nFor the 5V driving gate:\n- Minimum high-level output voltage, $V_{OH,min} = 4.58\\,\\text{V}$\n- Maximum low-level output voltage, $V_{OL,max} = 0.41\\,\\text{V}$\n\nFor the 3.3V receiving gate:\n- Minimum high-level input voltage, $V_{IH,min} = 2.35\\,\\text{V}$\n- Maximum low-level input voltage, $V_{IL,max} = 0.72\\,\\text{V}$\n\nCalculate the high-level noise margin ($NM_H$) and the low-level noise margin ($NM_L$) for this direct interface. Express your answer as two numerical values in Volts, rounded to three significant figures. Present the values for $NM_H$ and $NM_L$ in that order.", "solution": "The problem asks for the calculation of the high-level noise margin ($NM_H$) and the low-level noise margin ($NM_L$) for an interface between two different logic families. These margins quantify how much noise the system can tolerate before an incorrect logic level is registered.\n\nFirst, we calculate the high-level noise margin, $NM_H$. This is defined as the difference between the minimum guaranteed high-level output voltage from the driving gate ($V_{OH,min}$) and the minimum required high-level input voltage for the receiving gate ($V_{IH,min}$). A positive value indicates that the driver's high-level output is sufficient to be recognized as a high level by the receiver, with the magnitude representing the tolerance to noise that might lower the voltage.\n\nThe formula for $NM_H$ is:\n$$NM_H = V_{OH,min} - V_{IH,min}$$\n\nThe problem provides the following values:\n- $V_{OH,min} = 4.58\\,\\text{V}$ (from the 5V driver)\n- $V_{IH,min} = 2.35\\,\\text{V}$ (for the 3.3V receiver)\n\nSubstituting these values into the formula:\n$$NM_H = 4.58\\,\\text{V} - 2.35\\,\\text{V} = 2.23\\,\\text{V}$$\n\nNext, we calculate the low-level noise margin, $NM_L$. This is defined as the difference between the maximum allowed low-level input voltage for the receiving gate ($V_{IL,max}$) and the maximum guaranteed low-level output voltage from the driving gate ($V_{OL,max}$). A positive value indicates that the driver's low-level output is low enough to be recognized as a low level by the receiver, with the magnitude representing the tolerance to noise that might raise the voltage.\n\nThe formula for $NM_L$ is:\n$$NM_L = V_{IL,max} - V_{OL,max}$$\n\nThe problem provides the following values:\n- $V_{IL,max} = 0.72\\,\\text{V}$ (for the 3.3V receiver)\n- $V_{OL,max} = 0.41\\,\\text{V}$ (from the 5V driver)\n\nSubstituting these values into the formula:\n$$NM_L = 0.72\\,\\text{V} - 0.41\\,\\text{V} = 0.31\\,\\text{V}$$\n\nThe problem requires the answers to be rounded to three significant figures.\n- For $NM_H$, the value is $2.23\\,\\text{V}$, which is already at three significant figures.\n- For $NM_L$, the value is $0.31\\,\\text{V}$. To express this with three significant figures, we write it as $0.310\\,\\text{V}$.\n\nTherefore, the high-level noise margin is $2.23\\,\\text{V}$ and the low-level noise margin is $0.310\\,\\text{V}$. The answer should be presented in the order ($NM_H$, $NM_L$).", "answer": "$$\\boxed{\\begin{pmatrix} 2.23  0.310 \\end{pmatrix}}$$", "id": "1977004"}, {"introduction": "When shifting a signal to a higher voltage or when high-speed performance is required, passive solutions are often insufficient. This exercise introduces a common and effective active level-up shifter using an N-channel MOSFET and a pull-up resistor [@problem_id:1976960]. This analysis moves beyond static voltage levels to the dynamic behavior of the circuit, forcing you to consider the trade-off between component values and the signal's rise time ($t_r$), a critical factor for ensuring data integrity at high frequencies.", "problem": "A low-voltage sensor with an open-drain output operates with a supply voltage $V_{DD,L}$. This sensor must interface with a high-voltage microcontroller whose logic inputs are referenced to a supply voltage $V_{DD,H}$. The interface is implemented using a simple inverting level shifter composed of a single N-channel Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) and a pull-up resistor, $R_p$. In this configuration, the MOSFET's source is grounded, its gate is connected to the sensor's output, and its drain serves as the output to the microcontroller. The pull-up resistor $R_p$ is connected between the high-voltage supply $V_{DD,H}$ and the MOSFET's drain.\n\nWhen the sensor's output transitions from high to low, the MOSFET turns off, and the output voltage at the drain is pulled up towards $V_{DD,H}$ by the resistor $R_p$. This low-to-high transition is limited by the time it takes for $R_p$ to charge the total parasitic capacitance at the drain node, $C_{load}$. The rise time of the signal, $t_r$, is defined as the time required for the voltage to go from 10% to 90% of its final value. To ensure correct operation at the desired communication speed, this rise time must not exceed a specified maximum, $t_{r,max}$.\n\nAssuming the output voltage at the drain is approximately 0 V before the transition begins, find a closed-form analytic expression for the maximum permissible value of the pull-up resistor, $R_{p,max}$, in terms of $t_{r,max}$ and $C_{load}$.", "solution": "Model the pull-up event as a first-order RC charge of the drain-node capacitance. Let the drain-node voltage be $v(t)$, the pull-up resistance be $R_{p}$, and the total capacitance be $C_{load}$, with the high-side supply $V_{DD,H}$. When the MOSFET is off, the current through the resistor equals the capacitor charging current:\n$$\n\\frac{V_{DD,H}-v(t)}{R_{p}}=C_{load}\\,\\frac{dv(t)}{dt}.\n$$\nSeparate variables and integrate from the initial condition $v(0)=0$ to $v(t)$ at time $t$:\n$$\n\\int_{0}^{v}\\frac{dv'}{V_{DD,H}-v'}=\\int_{0}^{t}\\frac{dt'}{R_{p}C_{load}}\n\\;\\;\\Rightarrow\\;\\;\n-\\ln\\!\\big(V_{DD,H}-v\\big)+\\ln\\!\\big(V_{DD,H}\\big)=\\frac{t}{R_{p}C_{load}}.\n$$\nRearranging and solving for $v(t)$ gives the standard RC charging form\n$$\nv(t)=V_{DD,H}\\left[1-\\exp\\!\\left(-\\frac{t}{R_{p}C_{load}}\\right)\\right].\n$$\nDefine the fraction of the final value $f$ by $v(t_{f})=f\\,V_{DD,H}$. Then\n$$\nf=1-\\exp\\!\\left(-\\frac{t_{f}}{R_{p}C_{load}}\\right)\n\\;\\;\\Rightarrow\\;\\;\nt_{f}=-R_{p}C_{load}\\,\\ln\\!\\big(1-f\\big).\n$$\nThe $10$ to $90$ rise time is\n$$\nt_{r}=t_{0.9}-t_{0.1}\n= -R_{p}C_{load}\\left[\\ln\\!\\big(1-0.9\\big)-\\ln\\!\\big(1-0.1\\big)\\right]\n=R_{p}C_{load}\\left[\\ln(0.9)-\\ln(0.1)\\right]\n=R_{p}C_{load}\\,\\ln(9).\n$$\nImposing the specification $t_{r}\\leq t_{r,max}$ and taking the maximum permissible $R_{p}$ at equality yields\n$$\nR_{p,max}=\\frac{t_{r,max}}{C_{load}\\,\\ln(9)}.\n$$", "answer": "$$\\boxed{\\frac{t_{r,max}}{C_{load}\\ln(9)}}$$", "id": "1976960"}, {"introduction": "Robust engineering requires anticipating failure modes that occur outside of ideal operating conditions, such as during power-up sequences. This advanced practice examines the subtle but critical issue of \"back-powering,\" where a powered device can unintentionally supply voltage to an unpowered device through an interface circuit [@problem_id:1977009]. By analyzing a hypothetical scenario involving a resistive divider and the IC's internal protection diodes, you will learn to identify and prevent this potential hazard, a key skill for designing reliable, real-world mixed-voltage systems.", "problem": "In mixed-voltage digital systems, interfacing a high-voltage logic output to a lower-voltage logic input often requires a level shifter. A common, simple implementation for level-down shifting is a resistive voltage divider. However, a critical issue known as \"back-powering\" can arise if the high-voltage domain is powered while the low-voltage domain is not.\n\nConsider a digital device operating from a high-voltage supply, $V_{DDH}$, sending a logic-high signal to an input pin of a second digital device. The output of the first device is assumed to be an ideal voltage source that provides $V_{DDH}$ when at logic-high. The second device is unpowered, meaning its supply rail is floating. This unpowered rail has an effective leakage resistance to ground, denoted as $R_L$, due to all the components connected to it.\n\nThe interface between the two devices is a resistive divider consisting of two resistors. Resistor $R_1$ is connected from the high-voltage output to the input pin of the second device. Resistor $R_2$ is connected from this same input pin to ground.\n\nThe input pin of the unpowered Integrated Circuit (IC) has an internal Electrostatic Discharge (ESD) protection diode that connects the input pin to the IC's local (and unpowered) supply rail. For this analysis, model the protection diode as a component with a constant forward voltage drop of $V_f$ when it is conducting current, and as an open circuit otherwise.\n\nBack-powering becomes a concern when current flows from the high-voltage driver, through the divider and the protection diode, charging up the unpowered supply rail. Let the voltage of this unpowered rail be $V_{rail}$. The system is considered to be in a problematic state if $V_{rail}$ reaches or exceeds a critical threshold voltage, $V_{th}$.\n\nTo ensure the system operates safely and to prevent this problematic back-powering, the resistance $R_1$ must be chosen to be greater than a specific minimum value. Derive an analytical expression for this minimum value of $R_1$, which corresponds to the exact condition where $V_{rail} = V_{th}$. Express your answer in terms of $V_{DDH}$, $V_f$, $V_{th}$, $R_2$, and $R_L$.", "solution": "Let the high-voltage logic output be an ideal source at $V_{DDH}$. The interface node (the IC input pin) has voltage $V_{\\text{pin}}$. The ESD diode from the pin to the unpowered rail is modeled as a constant drop $V_{f}$ when forward-biased, giving the conduction relation\n$$\nV_{\\text{pin}}=V_{\\text{rail}}+V_{f}\n$$\nwhen current flows into the rail. The unpowered rail has a leakage path to ground modeled by $R_{L}$, so the rail current to ground is\n$$\nI_{L}=\\frac{V_{\\text{rail}}}{R_{L}}.\n$$\nAt steady state with the diode conducting, Kirchhoff’s Current Law (KCL) at the pin gives that the current from the source through $R_{1}$ equals the sum of the currents through $R_{2}$ to ground and through the diode into the rail:\n$$\n\\frac{V_{DDH}-V_{\\text{pin}}}{R_{1}}=\\frac{V_{\\text{pin}}}{R_{2}}+I_{\\text{diode}}.\n$$\nThe rail current must equal the diode current, so\n$$\nI_{\\text{diode}}=\\frac{V_{\\text{rail}}}{R_{L}}.\n$$\nSubstituting $V_{\\text{pin}}=V_{\\text{rail}}+V_{f}$ and $I_{\\text{diode}}=V_{\\text{rail}}/R_{L}$ into the KCL equation yields\n$$\n\\frac{V_{DDH}-V_{\\text{rail}}-V_{f}}{R_{1}}=\\frac{V_{\\text{rail}}+V_{f}}{R_{2}}+\\frac{V_{\\text{rail}}}{R_{L}}.\n$$\nSolving for $R_{1}$ gives\n$$\nR_{1}=\\frac{V_{DDH}-V_{\\text{rail}}-V_{f}}{\\dfrac{V_{\\text{rail}}+V_{f}}{R_{2}}+\\dfrac{V_{\\text{rail}}}{R_{L}}}.\n$$\nThe minimum $R_{1}$ that prevents the rail from exceeding the critical threshold corresponds to the boundary condition $V_{\\text{rail}}=V_{th}$, hence\n$$\nR_{1,\\min}=\\frac{V_{DDH}-V_{th}-V_{f}}{\\dfrac{V_{th}+V_{f}}{R_{2}}+\\dfrac{V_{th}}{R_{L}}}.\n$$\nThis expression is meaningful when $V_{DDH}V_{th}+V_{f}$ so that the numerator is positive; otherwise the rail cannot be driven to $V_{th}$ through the diode and no minimum constraint on $R_{1}$ arises from back-powering.", "answer": "$$\\boxed{\\frac{V_{DDH}-V_{th}-V_{f}}{\\dfrac{V_{th}+V_{f}}{R_{2}}+\\dfrac{V_{th}}{R_{L}}}}$$", "id": "1977009"}]}
{"hands_on_practices": [{"introduction": "Understanding race conditions begins with analyzing the fundamental behavior of feedback in asynchronous circuits. This first practice presents a minimalist circuit defined by the simple excitation equations $Y_1 = y_2$ and $Y_2 = y_1$. By tracing the behavior from an unstable initial state, you will directly observe how unpredictable gate delays can lead to different stable outcomes, the very definition of a critical race [@problem_id:1925439]. This exercise provides a foundational, intuitive grasp of why and how these timing-dependent errors occur.", "problem": "An asynchronous sequential circuit is constructed using two logic gates whose outputs, designated by the state variables $y_1$ and $y_2$, are fed back as inputs. The behavior of the circuit is described by the excitation equations $Y_1 = y_2$ and $Y_2 = y_1$, where $Y_1$ and $Y_2$ are the target next states for the variables $y_1$ and $y_2$, respectively. A state $(y_1, y_2)$ is considered stable if the excitation variables match the state variables, i.e., $(Y_1, Y_2) = (y_1, y_2)$. The propagation delays associated with the physical logic gates realizing $y_1$ and $y_2$ are unknown but are non-zero.\n\nSuppose the circuit is initially in the state $(y_1, y_2) = (0, 1)$. Analyze the subsequent behavior of the circuit and select the statement that most accurately describes the outcome.\n\nA. The circuit will always transition to the stable state $(1, 1)$.\n\nB. The circuit will oscillate indefinitely between the states $(0, 1)$ and $(1, 0)$.\n\nC. The circuit experiences a non-critical race and will always transition to the stable state $(0, 0)$.\n\nD. The circuit experiences a critical race, where the final stable state is non-deterministic and could be either $(0, 0)$ or $(1, 1)$.\n\nE. The circuit will transition to and remain in the state $(1, 0)$.", "solution": "The excitation equations are given by\n$$\nY_{1}=y_{2}, \\quad Y_{2}=y_{1}.\n$$\nA state $(y_{1},y_{2})$ is stable if $(Y_{1},Y_{2})=(y_{1},y_{2})$. Substituting the excitation equations into the stability condition gives\n$$\ny_{1}=Y_{1}=y_{2}, \\quad y_{2}=Y_{2}=y_{1},\n$$\nwhich reduces to the constraint $y_{1}=y_{2}$. Therefore, the only stable states are\n$$\n(0,0)\\ \\text{and}\\ (1,1).\n$$\n\nFrom the initial state $(y_{1},y_{2})=(0,1)$, the excitations evaluate to\n$$\nY_{1}=y_{2}=1, \\quad Y_{2}=y_{1}=0.\n$$\nThus both outputs are “requested” to change: $y_{1}$ from $0$ to $1$ and $y_{2}$ from $1$ to $0$. Let the propagation delays of the gates generating $y_{1}$ and $y_{2}$ be $d_{1}$ and $d_{2}$, respectively, with $d_{1}>0$ and $d_{2}>0$.\n\nBecause delays are non-zero, the two changes cannot occur simultaneously unless $d_{1}=d_{2}$ exactly. The behavior is determined by the relative ordering of the first output change:\n\n1. If $d_{1}<d_{2}$, then $y_{1}$ changes first at $t=d_{1}$ to $1$, producing the state $(1,1)$. The excitations then become\n$$\nY_{1}=y_{2}=1,\\quad Y_{2}=y_{1}=1,\n$$\nwhich match the state, so $(1,1)$ is stable and no further changes occur.\n\n2. If $d_{2}<d_{1}$, then $y_{2}$ changes first at $t=d_{2}$ to $0$, producing the state $(0,0)$. The excitations then become\n$$\nY_{1}=y_{2}=0,\\quad Y_{2}=y_{1}=0,\n$$\nwhich match the state, so $(0,0)$ is stable and no further changes occur.\n\nSince the delays are unknown, either ordering is possible, and the final stable state depends on which gate responds first. Therefore, the circuit exhibits a critical race, and the final stable state is non-deterministic between $(0,0)$ and $(1,1)$. It does not oscillate indefinitely because once a stable equal state is reached, the excitations equal the outputs and there is no cause for further transitions.\n\nHence, the correct choice is that the circuit experiences a critical race with a non-deterministic final stable state.", "answer": "$$\\boxed{D}$$", "id": "1925439"}, {"introduction": "Building on the basic concept, this exercise introduces an external input $x$ to a circuit with two state variables. Your task is to analyze how the circuit behaves when this input changes, specifically identifying which starting conditions lead to a critical race [@problem_id:1925474]. This practice hones the essential skill of systematically evaluating excitation equations to predict and diagnose potential timing hazards in response to external events.", "problem": "An asynchronous sequential circuit, used as a controller, has its behavior defined by the excitation equations for its two internal memory elements, $y_1$ and $y_2$. The next state of the circuit, denoted by $(Y_1, Y_2)$, is determined by the present state $(y_1, y_2)$ and an external input $x$. The governing equations are:\n$$Y_1 = y_2'x' + y_1x$$\n$$Y_2 = y_1'x' + y_2x$$\nHere, $x'$ represents the logical NOT of $x$.\n\nA state $(y_1, y_2)$ is considered **stable** for a given input $x$ if the next state is the same as the present state, i.e., $(Y_1, Y_2) = (y_1, y_2)$.\n\nA **race condition** occurs when a change in the input signal causes the circuit to transition from a stable state to a new state where both internal state variables, $y_1$ and $y_2$, are required to change simultaneously.\n\nA race is defined as **critical** if the final stable state the circuit settles into depends on the unpredictable order in which the state variables change. If the circuit reaches the same final stable state regardless of the order, the race is **non-critical**.\n\nSuppose the controller is operating in a stable state with the input held at $x=1$. The input then abruptly switches to $x=0$. Which of the following initial stable states $(y_1, y_2)$ will cause the circuit to enter a critical race? Select all valid options.\n\nA. (0, 0)\n\nB. (0, 1)\n\nC. (1, 0)\n\nD. (1, 1)", "solution": "We are given the excitation equations\n$$Y_{1}=y_{2}'x'+y_{1}x,\\quad Y_{2}=y_{1}'x'+y_{2}x.$$\nA state $(y_{1},y_{2})$ is stable for a given $x$ if $Y_{1}=y_{1}$ and $Y_{2}=y_{2}$.\n\nFirst, determine stability when $x=1$. Substituting $x=1$ gives $x'=0$, hence\n$$Y_{1}=y_{2}'\\cdot 0+y_{1}\\cdot 1=y_{1},\\quad Y_{2}=y_{1}'\\cdot 0+y_{2}\\cdot 1=y_{2}.$$\nTherefore, for $x=1$ every state $(y_{1},y_{2})\\in\\{(0,0),(0,1),(1,0),(1,1)\\}$ is stable.\n\nNow the input switches abruptly to $x=0$. Substituting $x=0$ gives $x'=1$, hence\n$$Y_{1}=y_{2}',\\quad Y_{2}=y_{1}'.$$\nThus, for $x=0$ a state is stable if and only if $(y_{1},y_{2})=(y_{2}',y_{1}')$, i.e., $y_{1}=y_{2}'$ and $y_{2}=y_{1}'$, which occurs precisely for $(0,1)$ and $(1,0)$.\n\nExamine each initial stable state at $x=1$ and its behavior immediately after switching to $x=0$:\n- From $(0,1)$: With $x=0$, $Y_{1}=y_{2}'=0$, $Y_{2}=y_{1}'=1$, so $(Y_{1},Y_{2})=(0,1)$. No change is required; there is no race.\n- From $(1,0)$: With $x=0$, $Y_{1}=y_{2}'=1$, $Y_{2}=y_{1}'=0$, so $(Y_{1},Y_{2})=(1,0)$. No change is required; there is no race.\n- From $(0,0)$: With $x=0$, $Y_{1}=y_{2}'=1$, $Y_{2}=y_{1}'=1$, so $(Y_{1},Y_{2})=(1,1)$. Both $y_{1}$ and $y_{2}$ must change, so a race condition occurs. To test criticality, consider the two possible one-at-a-time transitions due to unequal delays:\n  - If $y_{1}$ changes first: $(0,0)\\to(1,0)$. Recompute at $(1,0)$: $Y_{1}=y_{2}'=1$, $Y_{2}=y_{1}'=0$, so $(1,0)$ is stable; the circuit settles at $(1,0)$.\n  - If $y_{2}$ changes first: $(0,0)\\to(0,1)$. Recompute at $(0,1)$: $Y_{1}=y_{2}'=0$, $Y_{2}=y_{1}'=1$, so $(0,1)$ is stable; the circuit settles at $(0,1)$.\n  The final stable state depends on the order, so the race is critical.\n- From $(1,1)$: With $x=0$, $Y_{1}=y_{2}'=0$, $Y_{2}=y_{1}'=0$, so $(Y_{1},Y_{2})=(0,0)$. Both $y_{1}$ and $y_{2}$ must change, so a race condition occurs. Test criticality:\n  - If $y_{1}$ changes first: $(1,1)\\to(0,1)$. At $(0,1)$, $(Y_{1},Y_{2})=(0,1)$, so it is stable; final state $(0,1)$.\n  - If $y_{2}$ changes first: $(1,1)\\to(1,0)$. At $(1,0)$, $(Y_{1},Y_{2})=(1,0)$, so it is stable; final state $(1,0)$.\n  The final stable state depends on the order, so the race is critical.\n\nTherefore, the input change $x:1\\to 0$ causes critical races precisely from the initial states $(0,0)$ and $(1,1)$, i.e., options A and D.", "answer": "$$\\boxed{AD}$$", "id": "1925474"}, {"introduction": "Identifying race conditions is a critical diagnostic skill, but the ultimate goal is to design robust circuits that avoid them. This final practice moves from analysis to synthesis, presenting a circuit with a known critical race described by a flow table [@problem_id:1925460]. You will learn a powerful technique for resolving such hazards by inserting an intermediate unstable state to guide the circuit through a safe, deterministic sequence of single-bit changes, ensuring it reaches its intended destination.", "problem": "An asynchronous sequential circuit is being designed to control a simple industrial mixing process. The circuit has two external inputs, $x_1$ and $x_0$, and four internal states, denoted as A, B, C, and D. The behavior of the circuit is described by a flow table, where the internal states are represented by two state variables, $y_2$ and $y_1$. A state is considered \"stable\" for a given input if the next state is the same as the present state; otherwise, the state is \"unstable\".\n\nThe state assignments are as follows:\n- State A: $y_2 y_1 = 00$\n- State B: $y_2 y_1 = 01$\n- State C: $y_2 y_1 = 11$\n- State D: $y_2 y_1 = 10$\n\nThe flow table, showing the next state for each present state and input combination, is given below.\n\n| Present State | Binary ($y_2 y_1$) | Next State ($x_1x_0=00$) | Next State ($x_1x_0=01$) | Next State ($x_1x_0=10$) | Next State ($x_1x_0=11$) |\n|:-------------:|:------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|\n| A             | 00                 | A                        | B                        | A                        | C                        |\n| B             | 01                 | A                        | B                        | D                        | B                        |\n| C             | 11                 | A                        | D                        | C                        | C                        |\n| D             | 10                 | A                        | D                        | C                        | B                        |\n\nDuring testing, it is observed that when the input is held at $x_1x_0 = 11$, a transition initiated from state A does not reliably end up in the intended final state. This issue is due to a critical race condition. To resolve this race, an intermediate state must be used to direct the transition, ensuring only one state variable changes at a time.\n\nWhich of the following modifications correctly and completely resolves this specific critical race?\n\nA. In the column for $x_1x_0=11$, change the next-state entry for present state A to D, and change the next-state entry for present state D to C.\n\nB. In the column for $x_1x_0=11$, change only the next-state entry for present state A to B.\n\nC. In the column for $x_1x_0=11$, change only the next-state entry for present state D to C.\n\nD. Swap the binary state assignments for state B and state D, i.e., B becomes 10 and D becomes 01.\n\nE. The race condition is non-critical, and therefore no modifications to the flow table are necessary.", "solution": "We are given an asynchronous sequential circuit with two state variables $y_{2}$ and $y_{1}$ and state assignments A:$00$, B:$01$, C:$11$, D:$10$. A state is stable for a given input $(x_{1}x_{0})$ if the next state equals the present state; otherwise it is unstable.\n\nFrom the flow table under the input $x_{1}x_{0}=11$, the next-state entries are:\n- From A:$00$ to C:$11$,\n- From B:$01$ to B:$01$ (stable),\n- From C:$11$ to C:$11$ (stable),\n- From D:$10$ to B:$01$.\n\nThe observed problem occurs when the input is held at $x_{1}x_{0}=11$ and a transition is initiated from state A. The intended final state is C. The direct transition A:$00$ to C:$11$ changes both state variables simultaneously, since the Hamming distance is\n$$\nd_{H}\\big((0,0),(1,1)\\big)=2.\n$$\nIn a fundamental-mode asynchronous machine, when the flow table requires a two-bit change, a critical race can occur because one state variable may change first, temporarily moving the circuit to a neighboring code. From A:$00$, the neighboring one-bit-different states are B:$01$ and D:$10$. Under $x_{1}x_{0}=11$, the flow table shows:\n- From B:$01$ the next state is B:$01$ (stable),\n- From D:$10$ the next state is B:$01$.\n\nThus, if $y_{1}$ changes first, the machine goes $00 \\to 01$ and then stays in B; if $y_{2}$ changes first, the machine goes $00 \\to 10 \\to 01$ and then stays in B. In either case, the machine may settle in B instead of the intended C, confirming a critical race.\n\nTo eliminate this critical race, the transition from A to C under $x_{1}x_{0}=11$ must be decomposed into a sequence of single-bit changes via an intermediate state, ensuring only one state variable changes at a time and that the directed path uniquely leads to C. Evaluate the options:\n\n1) Option A modifies the column $x_{1}x_{0}=11$ by changing A’s next state to D and D’s next state to C. This creates the path:\n$$\nA:00 \\xrightarrow{11} D:10 \\xrightarrow{11} C:11,\n$$\nwith single-bit changes at each step:\n$$\nd_{H}\\big((0,0),(1,0)\\big)=1,\\quad d_{H}\\big((1,0),(1,1)\\big)=1.\n$$\nUnder this modification, when in A with $x_{1}x_{0}=11$, the next-state bits are $(y_{2}',y_{1}')=(1,0)$, so only $y_{2}$ changes from $0$ to $1$. After reaching D, the next-state bits are $(y_{2}',y_{1}')=(1,1)$, so only $y_{1}$ changes from $0$ to $1$ to reach C. This removes the two-bit change and thus resolves the critical race. It also removes the original two-bit transition from D:$10$ to B:$01$ by replacing it with D:$10$ to C:$11$, which is a one-bit change, eliminating any race if the machine is ever in D under input $11$.\n\n2) Option B changes only A’s next state to B under $11$, i.e., $00 \\to 01$, but B under $11$ is stable at B. This traps the machine in B, not C, so it neither preserves the intended behavior nor resolves the race to the intended final state.\n\n3) Option C changes only D’s next state to C under $11$, but leaves A’s next state as C under $11$. The direct two-bit change $00 \\to 11$ remains, so the critical race from A is not removed.\n\n4) Option D swaps the encodings of B and D (B becomes $10$, D becomes $01$). The intended transition from A:$00$ to C:$11$ under $11$ still has Hamming distance $2$, so the critical race persists.\n\n5) Option E is invalid because a critical race is observed and must be corrected.\n\nTherefore, the only modification that correctly and completely resolves this specific critical race by enforcing a unique sequence of single-bit transitions from A to C under $x_{1}x_{0}=11$ is Option A.", "answer": "$$\\boxed{A}$$", "id": "1925460"}]}
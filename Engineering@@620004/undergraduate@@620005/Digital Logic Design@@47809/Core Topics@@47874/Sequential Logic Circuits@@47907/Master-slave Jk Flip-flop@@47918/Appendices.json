{"hands_on_practices": [{"introduction": "Understanding the master-slave JK flip-flop begins with a detailed analysis of its response to changing inputs over time. This initial practice exercise requires you to trace the state of both the internal master latch ($Q_m$) and the final slave output ($Q$) through several clock cycles [@problem_id:1945792]. By meticulously following how the master captures data while the clock is high and the slave updates the output on the falling edge, you will build a solid foundation for predicting the behavior of sequential logic circuits.", "problem": "A digital circuit employs a master-slave JK flip-flop whose initial output state is $Q=0$. The behavior of this flip-flop is defined as follows: The master latch is transparent when the clock signal (CLK) is HIGH (logic 1), and its state, $Q_m$, is determined by the characteristic equation $Q_m = J\\bar{Q} + \\bar{K}Q$, where $J$ and $K$ are the inputs and $Q$ is the current output of the flip-flop. The slave latch updates the final output $Q$ to match the master's state $Q_m$ only on the falling edge of the CLK signal. When CLK is LOW (logic 0), both the master and slave latches hold their current states.\n\nThe flip-flop is driven by a periodic clock signal CLK with a period of 40 ns and a 50% duty cycle. The clock is HIGH for the first 20 ns of each period and LOW for the next 20 ns. Specifically, for any integer $n \\ge 0$, CLK is HIGH during the time interval $[40n \\text{ ns}, (40n + 20) \\text{ ns})$ and LOW during $[(40n + 20) \\text{ ns}, (40n + 40) \\text{ ns})$.\n\nThe inputs J and K change over time as described below:\n- For $t$ in the interval $[0 \\text{ ns}, 30 \\text{ ns})$: $J=1$, $K=0$.\n- For $t$ in the interval $[30 \\text{ ns}, 70 \\text{ ns})$: $J=1$, $K=1$.\n- For $t$ in the interval $[70 \\text{ ns}, 120 \\text{ ns}]$: $J=0$, $K=1$.\n\nDetermine the logic level (0 or 1) of the final output $Q$ at the precise moment $t = 120$ ns.", "solution": "The master is transparent only when the clock is HIGH and sets $Q_{m}$ according to the characteristic equation\n$$\nQ_{m}=J\\bar{Q}+\\bar{K}Q,\n$$\nwhile the slave updates $Q$ to $Q_{m}$ only on falling clock edges. With a $40$ ns period and $50$ percent duty, the falling edges occur at times $t=20+40n$ for integers $n\\geq 0$. Up to $t=120$ ns, the falling edges are at $t=20$ ns, $t=60$ ns, and $t=100$ ns. The initial condition is $Q(0)=0$.\n\nDuring the first HIGH phase $t\\in[0,20)$, the inputs are $J=1$, $K=0$, and $Q=0$, so the transparent master produces\n$$\nQ_{m}=1\\cdot\\bar{0}+\\bar{0}\\cdot 0=1\\cdot 1+1\\cdot 0=1.\n$$\nAt the falling edge $t=20$ ns, the slave updates $Q\\leftarrow Q_{m}=1$, so $Q$ becomes $1$ and then holds during the LOW phase $t\\in[20,40)$.\n\nAt the next rising edge $t=40$ ns, the clock goes HIGH and the inputs are now $J=1$, $K=1$ (they changed at $t=30$ ns during LOW), while $Q=1$ from the previous update. The transparent master computes\n$$\nQ_{m}=1\\cdot\\bar{1}+\\bar{1}\\cdot 1=1\\cdot 0+0\\cdot 1=0,\n$$\nand holds this through the HIGH window $t\\in[40,60)$. At the falling edge $t=60$ ns, the slave updates $Q\\leftarrow 0$, so $Q$ becomes $0$ and then holds during the LOW phase $t\\in[60,80)$.\n\nAt the next rising edge $t=80$ ns, the inputs are $J=0$, $K=1$ (they changed at $t=70$ ns during LOW), and $Q=0$. The transparent master computes\n$$\nQ_{m}=0\\cdot\\bar{0}+\\bar{1}\\cdot 0=0\\cdot 1+0\\cdot 0=0,\n$$\nand holds this through the HIGH window $t\\in[80,100)$. At the falling edge $t=100$ ns, the slave updates $Q\\leftarrow 0$, so $Q$ remains $0$ and then holds during the LOW phase $t\\in[100,120)$.\n\nAt $t=120$ ns there is a rising edge (start of the next HIGH), and by definition the slave latch does not update on a rising edge. Therefore, the final output at the precise moment $t=120$ ns is the value established at the previous falling edge, namely $Q=0$.", "answer": "$$\\boxed{0}$$", "id": "1945792"}, {"introduction": "One of the most effective ways to understand why a circuit is designed a certain way is to see what happens when that design is broken. This next problem explores a hypothetical but highly instructive fault scenario: a master-slave JK flip-flop where both latches are enabled simultaneously [@problem_id:1945778]. Analyzing this flawed circuit will reveal the infamous \"race-around\" condition and provide a clear, practical understanding of why the specific two-phase clocking of a master-slave architecture is crucial for stable operation.", "problem": "An engineer is analyzing a faulty digital circuit that was intended to be a master-slave JK flip-flop. The flip-flop is constructed from two cascaded level-sensitive SR latches, called the master and the slave. A standard SR latch has two inputs, S (Set) and R (Reset), and an output Q. Its behavior is defined as: if S=1 and R=0, Q becomes 1; if S=0 and R=1, Q becomes 0; if S=0 and R=0, Q holds its previous value. The S=1, R=1 input combination is assumed to never occur. Each latch also has an enable input (EN); the latch is \"transparent\" (output follows S/R inputs) when EN=1 and is in the \"hold\" state when EN=0.\n\nIn the intended design, the master latch's inputs are driven by the logic $S_{master} = J \\cdot \\overline{Q_{out}}$ and $R_{master} = K \\cdot Q_{out}$, where $J$ and $K$ are the external inputs and $Q_{out}$ is the final output of the slave latch. The slave latch's inputs are driven by the master's output: $S_{slave} = Q_{master}$ and $R_{slave} = \\overline{Q_{master}}$. The master latch is enabled by the main clock signal, $CLK$, while the slave latch is supposed to be enabled by an inverted clock signal, $\\overline{CLK}$.\n\nHowever, due to a manufacturing defect, the inverter for the slave's clock input has been replaced by a non-inverting buffer. As a result, both the master and the slave latches are enabled by the same signal, $CLK$.\n\nThe circuit is subjected to the following conditions:\n- The external inputs are held constant: $J = 1$ and $K = 1$.\n- The clock signal, $CLK$, is a periodic square wave that is HIGH (logic 1) for time intervals $[2nT, (2n+1)T)$ and LOW (logic 0) for time intervals $[(2n+1)T, (2n+2)T)$, where $T$ is a constant time duration and $n$ is any non-negative integer ($n=0, 1, 2, \\dots$).\n- The initial state of the flip-flop's output at time $t=0$ is $Q_{out}(0) = 0$.\n\nWhich of the following statements most accurately describes the behavior of the output $Q_{out}$ during the first time interval when the clock is HIGH, i.e., for $t$ in $[0, T)$?\n\nA. $Q_{out}$ remains at 0.\n\nB. $Q_{out}$ makes a single transition from 0 to 1 and then remains at 1.\n\nC. $Q_{out}$ makes a single transition from 0 to 1, and then transitions back to 0 just before time $T$.\n\nD. $Q_{out}$ oscillates continuously between 0 and 1.\n\nE. $Q_{out}$ transitions to an indeterminate, meta-stable state.", "solution": "The problem asks for the behavior of a faulty master-slave JK flip-flop where both the master and slave latches are enabled by the same clock signal, $CLK$.\n\nFirst, let's analyze the circuit's behavior based on the state of the clock, $CLK$.\nThe problem states that both the master and slave SR latches are level-sensitive. They are \"transparent\" when their enable input is HIGH (1) and \"hold\" their state when the enable input is LOW (0). Due to the fault, both latches have $CLK$ as their enable signal.\n\nCase 1: $CLK = 0$\nWhen the clock is LOW, both the master and slave latches are in the \"hold\" state. This means their outputs, $Q_{master}$ and $Q_{out}$ respectively, do not change, regardless of the inputs $J$ and $K$. The entire circuit holds its state.\n\nCase 2: $CLK = 1$\nWhen the clock is HIGH, both the master and slave latches are \"transparent\". This means their outputs change to reflect their inputs after a propagation delay.\nThe slave latch's inputs are $S_{slave} = Q_{master}$ and $R_{slave} = \\overline{Q_{master}}$. Since the slave latch is transparent, its output $Q_{out}$ will directly follow its S input (as S and R are complementary). Thus, during this phase, $Q_{out} = Q_{master}$.\n\nNow let's analyze the master latch. Its inputs are $S_{master} = J \\cdot \\overline{Q_{out}}$ and $R_{master} = K \\cdot Q_{out}$. Since the master latch is also transparent, its output $Q_{master}$ will be determined by these inputs.\nAs we found that $Q_{out}=Q_{master}$ when $CLK=1$, we can substitute $Q_{out}$ for $Q_{master}$. This means the entire cascaded structure effectively behaves as a single feedback system where the output $Q_{out}$ is determined by logical functions of itself.\n\nLet's write the governing equation for $Q_{out}$ when $CLK=1$. The structure behaves like a single SR latch whose inputs are $S = J \\cdot \\overline{Q_{out}}$ and $R = K \\cdot Q_{out}$. The characteristic equation for an SR latch's next state ($Q_{next}$) given its current state ($Q_{current}$) is $Q_{next} = S + \\bar{R} \\cdot Q_{current}$.\nIn our transparent system, the \"next\" state continuously updates the \"current\" state. So we can write the behavior for $Q_{out}$ as:\n$Q_{out} = (J \\cdot \\overline{Q_{out}}) + \\overline{(K \\cdot Q_{out})} \\cdot Q_{out}$\n\nThis equation describes a JK latch. Now we apply the specific inputs given in the problem for the interval $t \\in [0, T)$.\nDuring this interval, $CLK=1$, and we are given $J=1$ and $K=1$.\nSubstituting these values into the equation:\n$Q_{out} = (1 \\cdot \\overline{Q_{out}}) + \\overline{(1 \\cdot Q_{out})} \\cdot Q_{out}$\n$Q_{out} = \\overline{Q_{out}} + \\overline{Q_{out}} \\cdot Q_{out}$\nSince $\\overline{Q_{out}} \\cdot Q_{out} = 0$, the equation simplifies to:\n$Q_{out} = \\overline{Q_{out}}$\n\nThis result, $Q_{out} = \\overline{Q_{out}}$, means that the output of the circuit is logically required to be its own inverse. This cannot be satisfied by a stable state. If $Q_{out}$ is 0, the equation forces it to become 1. Once it becomes 1 (after a propagation delay), the equation forces it to become 0. This process repeats, causing the output $Q_{out}$ to toggle continuously. This phenomenon is known as the \"race-around\" condition.\n\nTherefore, for the entire duration that $CLK=1$ (the interval $[0, T)$), with $J=1$ and $K=1$, the output $Q_{out}$ will oscillate between logic 0 and logic 1. This matches option D.\nLet's briefly consider the other options.\nA is incorrect because the initial state $Q_{out}=0$ with $J=1, K=1$ will immediately cause a change.\nB is incorrect because the output does not stabilize at 1; it is immediately forced back to 0.\nC is incorrect as the behavior is a continuous oscillation, not a single pulse.\nE is incorrect because while oscillation is a non-ideal behavior, it is a defined oscillatory state, not a meta-stable state (which is typically a state stuck at an invalid voltage level).", "answer": "$$\\boxed{D}$$", "id": "1945778"}, {"introduction": "Moving from analysis to design, this final practice challenges you to evaluate a circuit modification intended to improve flip-flop performance [@problem_id:1945760]. By combining a standard pulse-triggered flip-flop with external latches and clock logic, a new circuit with different timing characteristics is created. This exercise will sharpen your skills in analyzing multi-component systems and demonstrate how to engineer a true edge-triggered device, a cornerstone of modern robust synchronous design.", "problem": "A digital systems engineer is tasked with modifying a legacy circuit that uses a standard positive pulse-triggered master-slave JK flip-flop (MS-JK FF). The key characteristics of this MS-JK FF component are:\n1.  Its master stage is transparent (i.e., sensitive to its J and K inputs) for the entire duration that its clock input, $CLK_{\\text{in}}$, is high (logic 1).\n2.  Its final output, `Q`, updates only on the falling edge of its clock input $CLK_{\\text{in}}$ (the 1-to-0 transition).\n\nThis pulse-triggered nature makes the circuit vulnerable to glitches and timing hazards on the J and K input lines while the clock is high. To create a more robust design, the engineer considers adding an input-conditioning circuit consisting of two D-type latches. A D-type latch is a memory element with a data input `D`, a latch-enable input `LE`, and an output `Y`. Its behavior is defined as: when `LE` is high, the latch is transparent (`Y` follows `D`); when `LE` is low, the latch is opaque (`Y` holds its last value).\n\nThe proposed new circuit is configured as follows, using a main system clock signal denoted as `CLK`:\n- The external `J` input is connected to the `D` input of the first D-latch (the J-latch).\n- The external `K` input is connected to the `D` input of the second D-latch (the K-latch).\n- The system clock `CLK` is connected directly to the `LE` input of both D-latches.\n- The output of the J-latch is connected to the `J` input of the MS-JK FF.\n- The output of the K-latch is connected to the `K` input of the MS-JK FF.\n- The system clock `CLK` is passed through an inverter, and the resulting $\\overline{\\text{CLK}}$ signal is connected to the clock input ($CLK_{\\text{in}}$) of the MS-JK FF.\n\nAnalyze the timing behavior of this complete, modified circuit with respect to the main system clock `CLK`. Determine the circuit's effective triggering mechanism.\n\nA. The circuit remains a positive pulse-triggered JK flip-flop.\n\nB. The circuit is converted into a negative pulse-triggered JK flip-flop (master active on CLK=0).\n\nC. The circuit becomes a true falling-edge triggered JK flip-flop.\n\nD. The circuit becomes a true rising-edge triggered JK flip-flop.\n\nE. The circuit will oscillate or enter a metastable state and is non-functional.\n\nF. The output Q will only update once and then remain latched indefinitely.", "solution": "Define the signals and elements as follows:\n- The MS-JK FF has input clock $CLK_{\\text{in}}$ and follows the standard behavior: its master is transparent when $CLK_{\\text{in}}=1$, and the output $Q$ updates only on the falling edge of $CLK_{\\text{in}}$.\n- Two D-latches condition the external inputs $J$ and $K$. Each latch has data input $D$, latch enable $LE$, and output $Y$, with behavior: when $LE=1$, $Y=D$ (transparent), and when $LE=0$, $Y$ holds its last value.\n- The system wiring is $LE=CLK$ for both latches, their outputs feed the MS-JK inputs, and $CLK_{\\text{in}}=\\overline{\\text{CLK}}$.\n\nLet $J_{L}(t)$ and $K_{L}(t)$ denote the outputs of the J- and K-latches, respectively, and let $t_{f}$ denote an instant where $CLK$ transitions $1\\to 0$, and $t_{r}$ an instant where $CLK$ transitions $0\\to 1$.\n\nStep 1: Behavior when $CLK=1$.\n- Since $LE=CLK$, when $CLK=1$ the latches are transparent, so\n$$\nJ_{L}(t)=J(t),\\quad K_{L}(t)=K(t)\\quad \\text{for }CLK=1.\n$$\n- The MS-JK FF sees $CLK_{\\text{in}}=\\overline{\\text{CLK}}=0$, so its master is opaque and the slave holds. Therefore, changes in $J(t)$ and $K(t)$ while $CLK=1$ do not affect the MS-JK master.\n\nStep 2: Behavior at the falling edge $CLK:1\\to 0$ at $t=t_{f}$.\n- The latches transition from transparent to opaque and capture their inputs at that instant. Denoting right-after and right-before limits by superscripts $+$ and $-$,\n$$\nJ_{L}(t_{f}^{+})=J(t_{f}^{-}),\\quad K_{L}(t_{f}^{+})=K(t_{f}^{-}).\n$$\n- Simultaneously, $CLK_{\\text{in}}$ transitions $0\\to 1$, so the MS-JK master becomes transparent immediately after $t_{f}$. From this point through the entire low phase of $CLK$, the master sees constant inputs $J_{L}$ and $K_{L}$ held by the latches.\n\nStep 3: Behavior when $CLK=0$ following $t_{f}$.\n- With $LE=0$, the latches remain opaque and hold $J_{L}$ and $K_{L}$ constant:\n$$\nJ_{L}(t)=J_{L}(t_{f}^{+}),\\quad K_{L}(t)=K_{L}(t_{f}^{+})\\quad \\text{for }CLK=0.\n$$\n- With $CLK_{\\text{in}}=1$, the MS-JK master is transparent but its inputs are constant; thus the master resolves to the state determined by the held pair $\\big(J_{L}(t_{f}^{+}),K_{L}(t_{f}^{+})\\big)$ without sensitivity to any further changes on external $J,K$ during this interval. The slave remains closed; the output $Q$ does not update during $CLK=0$.\n\nStep 4: Behavior at the rising edge $CLK:0\\to 1$ at $t=t_{r}$.\n- $CLK_{\\text{in}}$ transitions $1\\to 0$, which is the falling edge of $CLK_{\\textin}}$. By the MS-JK specification, this is precisely when the slave samples the master and the output $Q$ updates. Therefore,\n$$\nQ \\text{ updates at } t=t_{r} \\text{ (the rising edge of } CLK).\n$$\n- Immediately after $t_{r}$, with $CLK=1$, the latches become transparent again and begin tracking external $J,K$, but the MS-JK master is now opaque ($CLK_{\\text{in}}=0$), so no changes propagate to the master until the next $CLK:1\\to 0$.\n\nConclusions:\n- The MS-JK master is active when $CLK=0$ (because $CLK_{\\text{in}}=1$), but due to the input latches being opaque when $CLK=0$, the MS-JK master sees constant inputs over the entire transparency window. Hence there is no pulse-triggered vulnerability: no glitches on $J,K$ during $CLK=0$ can affect the master.\n- The external inputs $J,K$ are effectively sampled at the instant $CLK$ falls ($t_{f}$) by the input latches, and the MS-JK output $Q$ updates at the next instant when $CLK$ rises ($t_{r}$), i.e., on the falling edge of $CLK_{\\text{in}}$. Therefore, with respect to the main system clock $CLK$, the output $Q$ changes only on the rising edge, exhibiting true rising-edge triggered behavior.\n\nThus, the effective triggering mechanism of the modified circuit is a true rising-edge triggered JK flip-flop.\n\nNon-answers check:\n- Not A: master is not active for $CLK=1$, and input latches eliminate pulse sensitivity.\n- Not B: though the master is active when $CLK=0$, the input latches remove pulse-triggered sensitivity; the output does not update on $CLK:1\\to 0$ but on $CLK:0\\to 1$.\n- Not C: the output does not update on the falling edge of $CLK$, but on the rising edge.\n- Not E: proper phasing prevents oscillation; standard setup/hold constraints apply.\n- Not F: the circuit continues to update every rising edge as driven by $CLK$.\n\nTherefore, the correct option is D.", "answer": "$$\\boxed{D}$$", "id": "1945760"}]}
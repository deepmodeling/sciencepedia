{"hands_on_practices": [{"introduction": "To build intuition for agent-based models, the best starting point is to manually trace the interactions yourself. This first exercise guides you through a turn-by-turn simulation of a simple host-parasite system, where you will track each agent's state, position, and fate according to a clear set of rules. Mastering this step-by-step process is the foundational skill for understanding and developing more complex ecological simulations.[@problem_id:1840965]", "problem": "Consider a simple Agent-Based Model (ABM) designed to simulate the spread of a non-recovering parasite within a small host population. The environment is a one-dimensional linear habitat, represented by a row of 5 cells, labeled sequentially from 1 to 5. The simulation begins with 3 host agents, named A, B, and C.\n\nThe initial state of the system at time $t=0$ is as follows:\n- Host A: Susceptible, located at cell 1.\n- Host B: Infected, located at cell 3.\n- Host C: Susceptible, located at cell 5.\n\nThe simulation proceeds in discrete time steps ($t=1, 2, ...$). Within each time step, all events occur in the following strict order: 1. Movement, 2. Infection, 3. Death.\n\nThe rules governing the agents are:\n\n1.  **Movement Rule**:\n    - Infected hosts are stationary and do not move.\n    - Susceptible hosts always move. The direction of movement depends on their current cell, $i$:\n        - If the host is at an end-cell (cell 1 or 5), it moves to the adjacent interior cell (cell 2 or 4, respectively).\n        - If the host is at an even-numbered cell ($i \\in \\{2, 4\\}$), it moves one cell to the right (to cell $i+1$).\n        - If the host is at an odd-numbered interior cell ($i = 3$), it moves one cell to the left (to cell $i-1$).\n\n2.  **Infection Rule**:\n    - After the movement phase is complete, if a susceptible host occupies the same cell as one or more infected hosts, the susceptible host immediately becomes infected. This change in status applies to all subsequent phases within the current time step.\n\n3.  **Death Rule**:\n    - Susceptible hosts have a 0% probability of dying in any time step.\n    - Infected hosts have a 25% probability ($p=0.25$) of dying in any time step.\n    - To ensure a deterministic simulation, the outcome of any probabilistic death event is predetermined. The event (death) occurs if a value from a pre-supplied list of random draws is less than or equal to the event's probability, $p$. The list of random draws, to be used sequentially for each death check performed during the simulation, is: [0.88, 0.41, 0.19, 0.95]. If multiple hosts are eligible for a death check within the same time step, they are checked in alphabetical order of their names (i.e., A, then B, then C).\n\nYour task is to manually run this simulation for two full time steps (up to the end of $t=2$). What is the total number of living hosts in the system at the end of the second time step?", "solution": "We simulate according to the specified rule order in each time step: Movement, then Infection, then Death. Death for an infected host occurs in a check if and only if the next random draw value $u$ from the list is such that $u \\leq p$, where $p=0.25$. If multiple infected hosts are checked in the same time step, the order is A, then B, then C.\n\nInitial state at $t=0$:\n- A: susceptible at cell $1$.\n- B: infected at cell $3$.\n- C: susceptible at cell $5$.\n\nTime step $t=1$:\n- Movement:\n  - Infected hosts do not move, so B remains at cell $3$.\n  - A is susceptible at cell $1$ (end-cell), so it moves to cell $2$.\n  - C is susceptible at cell $5$ (end-cell), so it moves to cell $4$.\n  - Result after movement: A at $2$ (susceptible), B at $3$ (infected), C at $4$ (susceptible).\n- Infection:\n  - A and C are not co-located with any infected host (B is at $3$), so no new infections occur.\n  - Status remains: A susceptible, B infected, C susceptible.\n- Death:\n  - Only infected B is eligible. Use the first random draw $u=0.88$ and compare to $p=0.25$. Since $0.88>0.25$, B survives.\n  - End of $t=1$: A at $2$ (susceptible), B at $3$ (infected), C at $4$ (susceptible). All three alive.\n\nTime step $t=2$:\n- Movement:\n  - B is infected and does not move, remains at cell $3$.\n  - A is susceptible at even cell $2$, so it moves right to cell $3$.\n  - C is susceptible at even cell $4$, so it moves right to cell $5$.\n  - Result after movement: A at $3$ (susceptible), B at $3$ (infected), C at $5$ (susceptible).\n- Infection:\n  - A shares cell $3$ with infected B, so A immediately becomes infected.\n  - Status after infection: A infected, B infected, C susceptible.\n- Death:\n  - Infected hosts to check this step are A and B, in alphabetical order.\n  - For A: use the second random draw $u=0.41$. Since $0.41>0.25$, A survives.\n  - For B: use the third random draw $u=0.19$. Since $0.19\\leq 0.25$, B dies and is removed.\n  - C is susceptible and is not checked.\n\nAt the end of $t=2$, the living hosts are A (infected) and C (susceptible), totaling $2$ living hosts.", "answer": "$$\\boxed{2}$$", "id": "1840965"}, {"introduction": "With the fundamentals of a step-by-step simulation in hand, we can now explore a richer ecological scenario involving different types of agents with conflicting goals. This practice simulates a classic predator-prey dynamic, where agents' movements are guided by simple optimization rulesâ€”the predator seeks to close the distance while the prey seeks to maximize it. Following these interactions will demonstrate how complex, life-or-death chases and population dynamics can emerge from simple, local decision-making.[@problem_id:1840954]", "problem": "An ecologist is developing a simple Agent-Based Model (ABM) to simulate predator-prey dynamics on a discrete landscape. The environment is represented by a 5x5 grid, with integer coordinates $(x, y)$ where $x, y \\in \\{1, 2, 3, 4, 5\\}$. The simulation involves two types of agents: predators (P) and prey (Y). At any time, a grid square can be occupied by at most one agent. The distance between two squares is measured using the Manhattan distance: $d = \\lvert x_1 - x_2 \\rvert + \\lvert y_1 - y_2 \\rvert$.\n\nThe initial state of the system at time $t=0$ is as follows:\n- One predator is located at position $P_0 = (3,3)$.\n- Two prey are located at positions $Y_{A,0} = (1,3)$ and $Y_{B,0} = (5,2)$.\n\nThe simulation proceeds in discrete time steps. For each time step (from $t$ to $t+1$), the following actions occur in a strict sequence:\n\n1.  **Predator Action:** The predator has a detection radius of $R_d = 3$. It identifies all prey within this radius. It then moves one step (to an adjacent square, up, down, left, or right) in the single direction that minimizes its Manhattan distance to the *closest* detected prey. If multiple prey are equally close, the predator targets the one with the lower y-coordinate; if there is still a tie, it targets the one with the lower x-coordinate. If multiple moves (N, E, S, W) provide the same minimal distance, the predator's move priority is North (y+1), then East (x+1), then South (y-1), then West (x-1). After moving, if the predator's new square is occupied by a prey, the prey is consumed and removed from the simulation.\n\n2.  **Prey Movement:** Each surviving prey moves one step to an adjacent (up, down, left, or right), unoccupied square. The specific move is chosen to *maximize* the prey's Manhattan distance from the predator's new position (after its action in step 1). If multiple moves result in the same maximum distance, the prey prioritizes moving West (x-1), then South (y-1), then East (x+1), then North (y+1). A prey attempts its highest-priority valid move; if that square is outside the grid or occupied, it tries the next-highest priority valid move, and so on. If all four potential moves are invalid, the prey remains in its current position. All prey movements are calculated based on the grid state at the beginning of this phase.\n\n3.  **Prey Reproduction:** Each prey still on the grid after the movement phase reproduces. For each reproducing prey, one new offspring is created on an adjacent, unoccupied square. The placement of the offspring is determined by checking the parent's adjacent squares in a fixed order of priority: North, East, South, West. The first available empty square is chosen for the offspring. If no adjacent squares are empty, the prey does not reproduce in this time step. The reproduction process is sequential: prey are processed in order of increasing x-coordinate, with ties broken by increasing y-coordinate.\n\nStarting from the initial conditions at $t=0$, determine the total number of prey on the grid at the end of time step $t=2$.", "solution": "We work on the $5 \\times 5$ grid with Manhattan distance $d=\\lvert x_{1}-x_{2}\\rvert+\\lvert y_{1}-y_{2}\\rvert$, initial positions at $t=0$: predator $P_{0}=(3,3)$, prey $Y_{A,0}=(1,3)$, and $Y_{B,0}=(5,2)$.\n\nFrom $t=0$ to $t=1$:\n1) Predator action. Detection radius $R_{d}=3$. Distances from $(3,3)$:\n$$d\\big((3,3),(1,3)\\big)=\\lvert 3-1\\rvert+\\lvert 3-3\\rvert=2,\\quad d\\big((3,3),(5,2)\\big)=\\lvert 3-5\\rvert+\\lvert 3-2\\rvert=3.$$\nClosest is $Y_{A}$ at $(1,3)$. Predator moves one step to minimize distance to $(1,3)$. Candidate moves from $(3,3)$:\n- $N:(3,4)\\Rightarrow d=\\lvert 3-1\\rvert+\\lvert 4-3\\rvert=3$,\n- $E:(4,3)\\Rightarrow d=\\lvert 4-1\\rvert+\\lvert 3-3\\rvert=3$,\n- $S:(3,2)\\Rightarrow d=\\lvert 3-1\\rvert+\\lvert 2-3\\rvert=3$,\n- $W:(2,3)\\Rightarrow d=\\lvert 2-1\\rvert+\\lvert 3-3\\rvert=1$.\nMinimal is $W$, so predator moves to $(2,3)$ and does not consume (square unoccupied).\n\n2) Prey movement, based on predator at $(2,3)$ and current occupancy $\\{(2,3),(1,3),(5,2)\\}$.\n- Prey $Y_{A}$ at $(1,3)$: moves to maximize distance from $(2,3)$. Options: $W:(0,3)$ invalid; $S:(1,2)$ with distance $\\lvert 1-2\\rvert+\\lvert 2-3\\rvert=2$ valid; $E:(2,3)$ occupied; $N:(1,4)$ with distance $\\lvert 1-2\\rvert+\\lvert 4-3\\rvert=2$ valid. Tie at distance $2$; priority $W,S,E,N$ gives $S$. So $Y_{A}\\to(1,2)$.\n- Prey $Y_{B}$ at $(5,2)$: options relative to $(2,3)$: $W:(4,2)$ gives $\\lvert 4-2\\rvert+\\lvert 2-3\\rvert=3$; $S:(5,1)$ gives $\\lvert 5-2\\rvert+\\lvert 1-3\\rvert=5$; $E:(6,2)$ invalid; $N:(5,3)$ gives $\\lvert 5-2\\rvert+\\lvert 3-3\\rvert=3$. Maximum is $5$ at $S$, so $Y_{B}\\to(5,1)$.\n\nNew prey: $(1,2)$ and $(5,1)$. Predator at $(2,3)$.\n\n3) Prey reproduction in order of increasing $x$ then $y$, placing offspring in order $N,E,S,W$ onto empty adjacent squares.\n- Parent at $(1,2)$: $N:(1,3)$ empty, so offspring at $(1,3)$.\n- Parent at $(5,1)$: $N:(5,2)$ empty, so offspring at $(5,2)$.\nEnd of $t=1$: predator $(2,3)$; prey at $(1,2)$, $(1,3)$, $(5,1)$, $(5,2)$.\n\nFrom $t=1$ to $t=2$:\n1) Predator action from $(2,3)$ with $R_{d}=3$. Distances:\n$$d\\big((2,3),(1,2)\\big)=\\lvert 2-1\\rvert+\\lvert 3-2\\rvert=2,\\quad d\\big((2,3),(1,3)\\big)=\\lvert 2-1\\rvert+\\lvert 3-3\\rvert=1,$$\n$$d\\big((2,3),(5,1)\\big)=\\lvert 2-5\\rvert+\\lvert 3-1\\rvert=5,\\quad d\\big((2,3),(5,2)\\big)=\\lvert 2-5\\rvert+\\lvert 3-2\\rvert=4.$$\nDetected prey are $(1,3)$ and $(1,2)$; closest is $(1,3)$. Predator moves from $(2,3)$:\n- $W:(1,3)$ yields distance $0$ (others yield $2$), so move $W$ to $(1,3)$ and consume the prey at $(1,3)$.\n\n2) Prey movement with predator at $(1,3)$; surviving prey at start: $(1,2)$, $(5,1)$, $(5,2)$.\n- Prey at $(1,2)$: options vs $(1,3)$: $W:(0,2)$ invalid; $S:(1,1)$ distance $\\lvert 1-1\\rvert+\\lvert 1-3\\rvert=2$ valid; $E:(2,2)$ distance $\\lvert 2-1\\rvert+\\lvert 2-3\\rvert=2$ valid; $N:(1,3)$ occupied. Tie at $2$; priority $W,S,E,N$ gives $S$. Move to $(1,1)$.\n- Prey at $(5,1)$: options vs $(1,3)$: $W:(4,1)$ distance $\\lvert 4-1\\rvert+\\lvert 1-3\\rvert=5$ valid; $S:(5,0)$ invalid; $E:(6,1)$ invalid; $N:(5,2)$ occupied. So move to $(4,1)$.\n- Prey at $(5,2)$: options vs $(1,3)$: $W:(4,2)$ distance $\\lvert 4-1\\rvert+\\lvert 2-3\\rvert=4$ valid; $S:(5,1)$ occupied; $E:(6,2)$ invalid; $N:(5,3)$ distance $\\lvert 5-1\\rvert+\\lvert 3-3\\rvert=4$ valid. Tie at $4$; priority gives $W$. Move to $(4,2)$.\n\nAfter movement: prey at $(1,1)$, $(4,1)$, $(4,2)$.\n\n3) Prey reproduction in order $(1,1)$, $(4,1)$, $(4,2)$; offspring placement $N,E,S,W$.\n- Parent $(1,1)$: $N:(1,2)$ empty, offspring at $(1,2)$.\n- Parent $(4,1)$: $N:(4,2)$ occupied; $E:(5,1)$ empty, offspring at $(5,1)$.\n- Parent $(4,2)$: $N:(4,3)$ empty, offspring at $(4,3)$.\n\nEnd of $t=2$: prey at $(1,1)$, $(1,2)$, $(4,1)$, $(4,2)$, $(5,1)$, $(4,3)$, totaling $6$ prey.", "answer": "$$\\boxed{6}$$", "id": "1840954"}, {"introduction": "Ecological modeling can do more than just simulate the consequences of pre-defined rules; it can also help us determine what the optimal rules of behavior should be. This problem challenges you to find an optimal foraging strategy for a bee that must balance collecting two different resources, each with its own trade-offs for energy and reproduction. By setting up and solving a simple optimization problem, you will see how analytical methods can be used to predict agent behavior based on the principle of maximizing fitness.[@problem_id:1840908]", "problem": "An ecologist is developing a simple agent-based model for a solitary bee to understand its optimal foraging strategy. The bee forages in an environment containing two flower species: Species A, which offers nectar with high sugar but low pollen content, and Species B, which offers nectar with low sugar but high pollen content.\n\nThe model includes the following parameters:\n- A single visit to a flower of Species A yields $S_A$ units of sugar and $P_A$ units of pollen.\n- A single visit to a flower of Species B yields $S_B$ units of sugar and $P_B$ units of pollen.\n- Each foraging visit, regardless of the flower species, has a metabolic energy cost of $C_E$ units of sugar for the bee's own survival (e.g., flight and thermoregulation).\n- To provision its offspring, the bee creates \"brood balls\" by mixing collected pollen with sugar. This process requires a fixed ratio of $k$ units of sugar for every one unit of pollen. This sugar is used for provisioning and cannot be used for the bee's own metabolism.\n\nThe bee's fitness is assumed to be directly proportional to the total amount of pollen it collects and provisions for its larvae. The bee is an \"optimal forager\" that seeks to maximize its lifetime pollen collection. It can only pursue this goal subject to the constraint that its total sugar intake is sufficient to cover both its metabolic costs and the sugar required for provisioning its collected pollen. The bee adopts a fixed, mixed foraging strategy, where it dedicates a proportion $x$ of its total foraging visits to Species A and the remaining proportion $(1-x)$ to Species B.\n\nGiven the following parameter values:\n- $S_A = 10.0$ units of sugar\n- $P_A = 2.0$ units of pollen\n- $S_B = 3.0$ units of sugar\n- $P_B = 12.0$ units of pollen\n- $C_E = 2.5$ units of sugar\n- $k = 0.5$ units of sugar per unit of pollen\n\nDetermine the optimal proportion, $x$, of visits to Species A that maximizes the bee's total pollen collection. Round your final answer to three significant figures.", "solution": "Let the bee choose proportion $x$ of visits to Species A and $(1-x)$ to Species B. The expected sugar intake per visit is\n$$S(x)=x S_{A}+(1-x) S_{B}=S_{B}+x\\left(S_{A}-S_{B}\\right),$$\nand the expected pollen collected per visit is\n$$P(x)=x P_{A}+(1-x) P_{B}=P_{B}+x\\left(P_{A}-P_{B}\\right).$$\nEach visit incurs a metabolic sugar cost $C_{E}$, leaving $S(x)-C_{E}$ units of sugar available for provisioning. Since provisioning requires $k$ units of sugar per unit pollen, the maximum pollen that can be provisioned per visit is bounded by\n$$\\frac{S(x)-C_{E}}{k}.$$\nTherefore, the provisioned pollen per visit is\n$$\\min\\!\\left(P(x),\\,\\frac{S(x)-C_{E}}{k}\\right).$$\nTo maximize this minimum over $x\\in[0,1]$, the optimum occurs where the two arguments are equal (provided the intersection lies in $[0,1]$), because if $P(x)$ is below the sugar cap, increasing $(1-x)$ to raise $P(x)$ improves the minimum, and if $P(x)$ exceeds the sugar cap, increasing $x$ to raise $S(x)$ (relative to $P(x)$) improves the minimum. Thus we set\n$$P(x)=\\frac{S(x)-C_{E}}{k}.$$\nSubstituting the linear forms,\n$$P_{B}+x\\left(P_{A}-P_{B}\\right)=\\frac{S_{B}+x\\left(S_{A}-S_{B}\\right)-C_{E}}{k}.$$\nMultiplying by $k$ and rearranging terms in $x$,\n$$k P_{B}+k x\\left(P_{A}-P_{B}\\right)=S_{B}-C_{E}+x\\left(S_{A}-S_{B}\\right),$$\n$$x\\left[k\\left(P_{A}-P_{B}\\right)-\\left(S_{A}-S_{B}\\right)\\right]=S_{B}-C_{E}-k P_{B},$$\n$$x=\\frac{S_{B}-C_{E}-k P_{B}}{k\\left(P_{A}-P_{B}\\right)-\\left(S_{A}-S_{B}\\right)}.$$\nNow substitute the given parameter values $S_{A}=10.0$, $P_{A}=2.0$, $S_{B}=3.0$, $P_{B}=12.0$, $C_{E}=2.5$, and $k=0.5$:\n$$\\text{numerator}=S_{B}-C_{E}-k P_{B}=3.0-2.5-0.5\\cdot 12.0=-5.5,$$\n$$\\text{denominator}=k\\left(P_{A}-P_{B}\\right)-\\left(S_{A}-S_{B}\\right)=0.5\\cdot(2.0-12.0)-(10.0-3.0)=-5-7=-12.$$\nTherefore,\n$$x=\\frac{-5.5}{-12}=\\frac{11}{24}\\approx 0.458333\\ldots.$$\nThis lies in the interval $[0,1]$, so it is feasible and yields the intersection optimum. Rounding to three significant figures gives $0.458$.", "answer": "$$\\boxed{0.458}$$", "id": "1840908"}]}
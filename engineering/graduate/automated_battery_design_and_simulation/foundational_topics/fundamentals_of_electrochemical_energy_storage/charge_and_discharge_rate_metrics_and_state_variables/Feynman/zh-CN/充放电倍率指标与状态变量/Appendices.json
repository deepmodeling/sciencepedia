{
    "hands_on_practices": [
        {
            "introduction": "理想电池是理解基础原理的有用工具，但真实世界的电池性能受到各种非理想效应的制约。库仑效率是量化这些能量损失的关键指标之一。本练习旨在通过一个简化的恒流充放电模型，揭示即使是很小的库仑效率损失，也会随着时间累积导致显著的荷电状态（$SOC$）漂移，从而强调精确 $SOC$ 监测的必要性。",
            "id": "3900401",
            "problem": "在一个自动化的电池设计和仿真工作流程中，考虑一个单体电化学储能设备，该设备在恒流充放电的重复调度下运行。其额定容量为 $C_{n} = 10\\,\\text{Ah}$。在每个循环中，该电池以 $I_{c} = 2\\,\\text{A}$ 的恒定电流充电，持续时间为 $\\tau_{c} = 1\\,\\text{h}$，然后以 $I_{d} = 2\\,\\text{A}$ 的恒定电流放电，持续时间为 $\\tau_{d} = 1\\,\\text{h}$。库仑效率 $\\eta_{\\text{coul}}$ 定义为一个循环内可逆放电电量与充电电量之比，其值为恒定的 $\\eta_{\\text{coul}} = 0.95$。荷电状态 (SOC) 定义为 $SOC(t) = Q(t) / C_{n}$，其中 $Q(t)$ 是在时间 $t$ 时的可逆存储电荷。放电深度 (DOD) 定义为 $DOD(t) = 1 - SOC(t)$。\n\n从基本电荷平衡和给定定义出发，推导在上述恒流调度下，恒定的 $\\eta_{\\text{coul}}  1$ 如何在每个完整的充放电循环后在SOC中产生净漂移。然后，使用所提供的参数，计算在重复循环下，累积SOC漂移的幅值从其初始值达到 $\\Delta SOC_{\\text{target}} = 0.2$ 所需的循环次数。将最终的循环次数表示为一个无单位的纯数。无需四舍五入。",
            "solution": "该问题是有效的，因为它具有科学依据、提法明确且客观。我们可以进行形式化的推导和计算。\n\n首先，我们推导在一个完整的充放电循环后，荷电状态 ($SOC$) 的净漂移。荷电状态 $SOC(t)$ 定义为可逆存储电荷 $Q(t)$ 与额定容量 $C_n$ 之比。\n$$SOC(t) = \\frac{Q(t)}{C_n}$$\n可逆存储电荷的变化率取决于电流和库仑效率 $\\eta_{\\text{coul}}$。充电时，一部分电流会促成不可逆的副反应，因此存储电荷的增加速率小于施加的电流。放电时，移除的电荷直接从可逆存储电荷中提取。对此的标准模型是：\n$$ \\frac{dQ}{dt} = \\begin{cases} \\eta_{\\text{coul}} \\cdot I(t)  \\text{充电时, } I(t) > 0 \\\\ I(t)  \\text{放电时, } I(t)  0 \\end{cases} $$\n在本问题中，充电和放电电流以正值大小 $I_c$ 和 $I_d$ 给出。因此，充电时，外部电流为 $I(t) = I_c$，放电时，外部电流为 $I(t) = -I_d$。\n\n一个完整的循环包括一个充电阶段和一个放电阶段。让我们计算每个阶段可逆电荷的变化量 $\\Delta Q$。\n\n1.  **充电阶段：** 电池以 $I_c = 2\\,\\text{A}$ 的恒定电流充电，持续时间为 $\\tau_c = 1\\,\\text{h}$。存储的可逆电荷变化量 $\\Delta Q_{\\text{charge}}$ 是此期间变化率的积分：\n    $$\\Delta Q_{\\text{charge}} = \\int_{0}^{\\tau_c} \\eta_{\\text{coul}} I_c \\, dt = \\eta_{\\text{coul}} I_c \\tau_c$$\n    此阶段供给的总电荷为 $I_c \\tau_c$，但只有比例为 $\\eta_{\\text{coul}}$ 的部分被可逆地存储。\n\n2.  **放电阶段：** 电池以 $I_d = 2\\,\\text{A}$ 的恒定电流放电，持续时间为 $\\tau_d = 1\\,\\text{h}$。存储的可逆电荷变化量 $\\Delta Q_{\\text{discharge}}$ 为：\n    $$\\Delta Q_{\\text{discharge}} = \\int_{0}^{\\tau_d} (-I_d) \\, dt = -I_d \\tau_d$$\n\n在一个完整循环中，可逆电荷的净变化 $\\Delta Q_{\\text{cycle}}$ 是两个阶段变化的总和：\n$$\\Delta Q_{\\text{cycle}} = \\Delta Q_{\\text{charge}} + \\Delta Q_{\\text{discharge}} = \\eta_{\\text{coul}} I_c \\tau_c - I_d \\tau_d$$\n相应的每个循环的SOC净变化 $\\Delta SOC_{\\text{cycle}}$ 是通过除以额定容量 $C_n$ 得到的：\n$$\\Delta SOC_{\\text{cycle}} = \\frac{\\Delta Q_{\\text{cycle}}}{C_n} = \\frac{\\eta_{\\text{coul}} I_c \\tau_c - I_d \\tau_d}{C_n}$$\n此方程说明了非理想的库仑效率（$\\eta_{\\text{coul}}  1$）如何导致SOC产生净漂移。对于给定的对称调度，充电电量 $I_c \\tau_c$ 等于放电电量 $I_d \\tau_d$。如果 $\\eta_{\\text{coul}}$ 等于 $1$，$\\Delta SOC_{\\text{cycle}}$ 将为零。然而，由于 $\\eta_{\\text{coul}}  1$，项 $\\eta_{\\text{coul}} I_c \\tau_c$ 严格小于 $I_d \\tau_d$，导致一个负的 $\\Delta SOC_{\\text{cycle}}$，这表示每个循环都有电荷的净损失和SOC的向下漂移。\n\n接下来，我们计算累积SOC漂移达到指定幅值所需的循环次数。给定参数如下：\n-   额定容量：$C_n = 10\\,\\text{Ah}$\n-   充电电流：$I_c = 2\\,\\text{A}$\n-   充电时长：$\\tau_c = 1\\,\\text{h}$\n-   放电电流：$I_d = 2\\,\\text{A}$\n-   放电时长：$\\tau_d = 1\\,\\text{h}$\n-   库仑效率：$\\eta_{\\text{coul}} = 0.95$\n-   目标SOC漂移幅值：$\\Delta SOC_{\\text{target}} = 0.2$\n\n首先，我们以安培时 (Ah) 为单位计算充电和放电电量。\n$$I_c \\tau_c = (2\\,\\text{A}) \\times (1\\,\\text{h}) = 2\\,\\text{Ah}$$\n$$I_d \\tau_d = (2\\,\\text{A}) \\times (1\\,\\text{h}) = 2\\,\\text{Ah}$$\n现在，我们计算每个循环的净SOC漂移：\n$$\\Delta SOC_{\\text{cycle}} = \\frac{(0.95) \\times (2\\,\\text{Ah}) - (2\\,\\text{Ah})}{10\\,\\text{Ah}} = \\frac{1.9\\,\\text{Ah} - 2\\,\\text{Ah}}{10\\,\\text{Ah}} = \\frac{-0.1\\,\\text{Ah}}{10\\,\\text{Ah}} = -0.01$$\n每个循环，SOC减少 $0.01$，即 $1\\%$。每个循环的漂移是恒定的。\n\n设 $N$ 为所需的循环次数。$N$ 个循环后的累积SOC漂移为 $N \\times \\Delta SOC_{\\text{cycle}}$。我们需要找到使这个累积漂移的幅值等于 $\\Delta SOC_{\\text{target}}$ 的 $N$ 值。\n$$|N \\times \\Delta SOC_{\\text{cycle}}| = \\Delta SOC_{\\text{target}}$$\n由于 $N$ 必须是正数，我们有：\n$$N \\times |\\Delta SOC_{\\text{cycle}}| = \\Delta SOC_{\\text{target}}$$\n$$N = \\frac{\\Delta SOC_{\\text{target}}}{|\\Delta SOC_{\\text{cycle}}|}$$\n代入数值：\n$$N = \\frac{0.2}{|-0.01|} = \\frac{0.2}{0.01} = 20$$\n因此，需要 $20$ 个循环才能使累积SOC漂移的幅值达到 $0.2$。",
            "answer": "$$\\boxed{20}$$"
        },
        {
            "introduction": "在认识到精确追踪 $SOC$ 的重要性之后，本练习将重点转向在单次、常见的操作场景中对其动态行为进行建模。通过应用欧姆定律和电荷守恒等基本原理，您将推导在恒流恒压（CC-CV）充电协议下的 $SOC$ 轨迹。这将帮助您深入理解内部参数和充电限制如何相互作用，共同决定了电池的充电过程。",
            "id": "3900357",
            "problem": "考虑一个单一的锂离子电池单元，其充电动态被建模用于自动化电池设计和仿真。充电控制器采用恒流恒压（CC–CV）协议。令荷电状态（SOC）定义为 $SOC(t) = \\frac{Q_{\\text{stored}}(t)}{Q_{\\text{nom}}}$，其中 $Q_{\\text{stored}}(t)$ 是时间 $t$ 时的存储电荷，$Q_{\\text{nom}}$ 是额定容量，令放电深度（DOD）为 $DOD(t) = 1 - SOC(t)$。假设如下：\n\n- 额定容量为 $Q_{\\text{nom}} = 3.0\\,\\text{Ah}$。\n- 开路电压是 SOC 的仿射函数，由 $OCV(SOC) = V_{0} + \\alpha\\,SOC$ 给出，其中 $V_{0} = 3.3\\,\\text{V}$ 且 $\\alpha = 0.9\\,\\text{V}$。\n- 在所考虑的 SOC 范围内，内阻是恒定的，$R_{\\text{int}} = 60\\,\\text{m}\\Omega$。\n- 恒流（CC）电流限制为 $I_{\\text{CC}} = 4.0\\,\\text{A}$，恒压（CV）电压限制为 $V_{\\text{lim}} = 4.2\\,\\text{V}$。\n- 初始 SOC 为 $SOC(0) = 0.20$。\n- 充电过程中的库仑效率为1。\n\n仅从基本定义和定律（电荷守恒 $dQ/dt = I$、内阻的欧姆定律以及给定的 $OCV(SOC)$ 本构关系）出发，推导 CC–CV 充电的显式分段轨迹 $SOC(t)$。然后，计算达到 $SOC = 0.80$ 所需的总充电时间，其中要考虑到当测量到的端电压 $V_{\\text{term}}(t)$ 首次等于 $V_{\\text{lim}}$ 时从 CC 到 CV 的转换。以秒为单位表示最终时间，并将答案四舍五入到四位有效数字。",
            "solution": "该问题是有效的，因为它具有科学依据、提法明确且客观。它描述了一个标准的电池充电场景，使用了一个简化但有效的等效电路模型。所有参数都已提供且物理上是现实的。\n\n充电过程遵循恒流恒压（CC–CV）协议。分析分为两个阶段：CC 阶段和 CV 阶段。\n\n控制系统的基本方程是：\n1. 存储电荷 $Q_{\\text{stored}}(t)$ 与荷电状态 $SOC(t)$ 之间的关系：\n$$SOC(t) = \\frac{Q_{\\text{stored}}(t)}{Q_{\\text{nom}}}$$\n2. 假设库仑效率为1的电荷累积动态：\n$$\\frac{dQ_{\\text{stored}}(t)}{dt} = I(t)$$\n将这些结合起来，得到 $SOC(t)$ 的微分方程：\n$$Q_{\\text{nom}} \\frac{d(SOC)}{dt} = I(t)$$\n3. 端电压 $V_{\\text{term}}(t)$ 由一个等效电路模型描述：\n$$V_{\\text{term}}(t) = OCV(SOC(t)) + I(t)R_{\\text{int}}$$\n4. 开路电压 $OCV$ 是 $SOC$ 的仿射函数：\n$$OCV(SOC) = V_{0} + \\alpha\\,SOC$$\n\n首先，我们必须将额定容量 $Q_{\\text{nom}}$ 转换为国际单位制单位（安培秒或库仑）：\n$Q_{\\text{nom}} = 3.0\\,\\text{Ah} = 3.0\\,\\text{A} \\times 3600\\,\\text{s} = 10800\\,\\text{As}$。\n\n**阶段1：恒流（CC）充电**\n此阶段从 $t=0$ 开始，一直持续到端电压 $V_{\\text{term}}(t)$ 达到预设限制 $V_{\\text{lim}}$。在此阶段，电流是恒定的：$I(t) = I_{\\text{CC}} = 4.0\\,\\text{A}$。\n\n$SOC$ 的控制方程是：\n$$Q_{\\text{nom}} \\frac{d(SOC)}{dt} = I_{\\text{CC}}$$\n将此方程从 $t=0$ 积分到 CC 阶段的某个时间 $t$：\n$$\\int_{SOC(0)}^{SOC(t)} d(SOC) = \\frac{I_{\\text{CC}}}{Q_{\\text{nom}}} \\int_{0}^{t} d\\tau$$\n$$SOC(t) - SOC(0) = \\frac{I_{\\text{CC}}}{Q_{\\text{nom}}} t$$\n因此，CC 阶段的 $SOC$ 轨迹为：\n$$SOC(t) = SOC(0) + \\frac{I_{\\text{CC}}}{Q_{\\text{nom}}} t$$\n\nCC 阶段在过渡时间 $t_{\\text{trans}}$ 结束，此时 $V_{\\text{term}}(t_{\\text{trans}}) = V_{\\text{lim}}$。此阶段的端电压为：\n$$V_{\\text{term}}(t) = OCV(SOC(t)) + I_{\\text{CC}}R_{\\text{int}} = (V_{0} + \\alpha\\,SOC(t)) + I_{\\text{CC}}R_{\\text{int}}$$\n在 $t = t_{\\text{trans}}$ 时，令 $SOC(t_{\\text{trans}}) = SOC_{\\text{trans}}$。条件是：\n$$V_{\\text{lim}} = V_{0} + \\alpha\\,SOC_{\\text{trans}} + I_{\\text{CC}}R_{\\text{int}}$$\n我们可以求解过渡点的荷电状态：\n$$SOC_{\\text{trans}} = \\frac{V_{\\text{lim}} - V_{0} - I_{\\text{CC}}R_{\\text{int}}}{\\alpha}$$\n使用给定值：$V_{\\text{lim}} = 4.2\\,\\text{V}$，$V_{0} = 3.3\\,\\text{V}$，$I_{\\text{CC}} = 4.0\\,\\text{A}$，$R_{\\text{int}} = 60\\,\\text{m}\\Omega = 0.060\\,\\Omega$ 且 $\\alpha = 0.9\\,\\text{V}$。\n$$SOC_{\\text{trans}} = \\frac{4.2 - 3.3 - (4.0 \\times 0.060)}{0.9} = \\frac{0.9 - 0.24}{0.9} = \\frac{0.66}{0.9} = \\frac{11}{15}$$\n数值上，$SOC_{\\text{trans}} \\approx 0.7333$。由于目标 SOC 为 $0.80$，大于 $SOC_{\\text{trans}}$，因此电池必须进入 CV 阶段才能达到目标。\n\nCC 阶段的持续时间 $t_{\\text{trans}}$ 是从 $SOC(0) = 0.20$ 达到 $SOC_{\\text{trans}}$ 所需的时间。\n$$t_{\\text{trans}} = \\frac{Q_{\\text{nom}}}{I_{\\text{CC}}} (SOC_{\\text{trans}} - SOC(0))$$\n$$t_{\\text{trans}} = \\frac{10800\\,\\text{As}}{4.0\\,\\text{A}} \\left(\\frac{11}{15} - 0.20\\right) = 2700\\,\\text{s} \\left(\\frac{11}{15} - \\frac{3}{15}\\right) = 2700\\,\\text{s} \\left(\\frac{8}{15}\\right) = 1440\\,\\text{s}$$\n\n**阶段2：恒压（CV）充电**\n此阶段从 $t = t_{\\text{trans}}$ 开始，并朝着最终目标 SOC 继续进行。在此阶段，端电压保持恒定，$V_{\\text{term}}(t) = V_{\\text{lim}}$，电流 $I(t)$ 则减小。\n\n根据端电压方程：\n$$V_{\\text{lim}} = OCV(SOC(t)) + I(t)R_{\\text{int}} = (V_0 + \\alpha\\,SOC(t)) + I(t)R_{\\text{int}}$$\n我们可以将随时间变化的电流 $I(t)$ 表示为：\n$$I(t) = \\frac{V_{\\text{lim}} - V_0 - \\alpha\\,SOC(t)}{R_{\\text{int}}}$$\n将此代入 SOC 微分方程：\n$$Q_{\\text{nom}} \\frac{d(SOC)}{dt} = \\frac{V_{\\text{lim}} - V_0 - \\alpha\\,SOC(t)}{R_{\\text{int}}}$$\n这是一个一阶可分离常微分方程。我们可以求解从 $SOC_{\\text{trans}}$ 充电到最终状态 $SOC_{\\text{final}} = 0.80$ 所需的时间。令该持续时间为 $t_{\\text{CV}} = t_{\\text{final}} - t_{\\text{trans}}$。\n$$\\frac{d(SOC)}{V_{\\text{lim}} - V_0 - \\alpha\\,SOC(t)} = \\frac{dt}{Q_{\\text{nom}}R_{\\text{int}}}$$\n从 $t_{\\text{trans}}$ 积分到 $t_{\\text{final}}$：\n$$\\int_{SOC_{\\text{trans}}}^{SOC_{\\text{final}}} \\frac{d(SOC)}{V_{\\text{lim}} - V_0 - \\alpha\\,SOC} = \\int_{t_{\\text{trans}}}^{t_{\\text{final}}} \\frac{1}{Q_{\\text{nom}}R_{\\text{int}}} dt$$\n$$\\left[ -\\frac{1}{\\alpha} \\ln(V_{\\text{lim}} - V_0 - \\alpha\\,SOC) \\right]_{SOC_{\\text{trans}}}^{SOC_{\\text{final}}} = \\frac{t_{\\text{final}} - t_{\\text{trans}}}{Q_{\\text{nom}}R_{\\text{int}}}$$\n$$t_{\\text{CV}} = t_{\\text{final}} - t_{\\text{trans}} = -\\frac{Q_{\\text{nom}}R_{\\text{int}}}{\\alpha} \\left[ \\ln(V_{\\text{lim}} - V_0 - \\alpha\\,SOC_{\\text{final}}) - \\ln(V_{\\text{lim}} - V_0 - \\alpha\\,SOC_{\\text{trans}}) \\right]$$\n$$t_{\\text{CV}} = \\frac{Q_{\\text{nom}}R_{\\text{int}}}{\\alpha} \\ln\\left(\\frac{V_{\\text{lim}} - V_0 - \\alpha\\,SOC_{\\text{trans}}}{V_{\\text{lim}} - V_0 - \\alpha\\,SOC_{\\text{final}}}\\right)$$\n从 CC 阶段的分析中，我们知道 $V_{\\text{lim}} - V_0 - \\alpha\\,SOC_{\\text{trans}} = I_{\\text{CC}}R_{\\text{int}}$。分母是 $I(t_{\\text{final}})R_{\\text{int}}$。我们来计算这些项。\n分子：$I_{\\text{CC}}R_{\\text{int}} = 4.0\\,\\text{A} \\times 0.060\\,\\Omega = 0.24\\,\\text{V}$。\n分母：$V_{\\text{lim}} - V_0 - \\alpha\\,SOC_{\\text{final}} = 4.2 - 3.3 - 0.9 \\times 0.80 = 0.9 - 0.72 = 0.18\\,\\text{V}$。\nCV 阶段的时间常数为 $\\tau_c = \\frac{Q_{\\text{nom}}R_{\\text{int}}}{\\alpha} = \\frac{10800\\,\\text{As} \\times 0.060\\,\\Omega}{0.9\\,\\text{V}} = \\frac{648}{0.9}\\,\\text{s} = 720\\,\\text{s}$。\n$$t_{\\text{CV}} = 720\\,\\text{s} \\times \\ln\\left(\\frac{0.24}{0.18}\\right) = 720\\,\\text{s} \\times \\ln\\left(\\frac{4}{3}\\right)$$\n\n**总充电时间与分段轨迹**\n达到 $SOC = 0.80$ 的总时间是两个阶段持续时间的总和：\n$$t_{\\text{total}} = t_{\\text{trans}} + t_{\\text{CV}} = 1440\\,\\text{s} + 720 \\ln\\left(\\frac{4}{3}\\right)\\,\\text{s}$$\n使用 $\\ln(4/3) \\approx 0.28768$ 的值，我们得到：\n$$t_{\\text{total}} \\approx 1440 + 720 \\times 0.28768 = 1440 + 207.13 = 1647.13\\,\\text{s}$$\n四舍五入到四位有效数字，总时间为 $1647\\,\\text{s}$。\n\n显式分段轨迹 $SOC(t)$ 推导如下：\n对于 CC 阶段（$0 \\le t \\le t_{\\text{trans}}$）：\n$$SOC(t) = SOC(0) + \\frac{I_{\\text{CC}}}{Q_{\\text{nom}}}t = 0.20 + \\frac{4.0}{10800}t = 0.20 + \\frac{1}{2700}t$$\n对于 CV 阶段（$t > t_{\\text{trans}}$），常微分方程的解形式为 $SOC(t) = A + B\\exp(-(t-t_{\\text{trans}})/\\tau_c)$。稳态 SOC 为 $A = (V_{\\text{lim}} - V_0)/\\alpha = (4.2-3.3)/0.9 = 1$。常数 $B$ 由 $t=t_{\\text{trans}}$ 时的条件得出，得到 $B=SOC_{\\text{trans}}-1$。\n$$SOC(t) = 1 + (SOC_{\\text{trans}} - 1)\\exp\\left(-\\frac{t-t_{\\text{trans}}}{\\tau_c}\\right) = 1 + \\left(\\frac{11}{15}-1\\right)\\exp\\left(-\\frac{t-1440}{720}\\right) = 1 - \\frac{4}{15}\\exp\\left(-\\frac{t-1440}{720}\\right)$$\n完整的分段轨迹是：\n$$SOC(t) = \\begin{cases} 0.20 + \\frac{1}{2700}t   \\text{for } 0 \\le t \\le 1440\\,\\text{s} \\\\ 1 - \\frac{4}{15}\\exp\\left(-\\frac{t-1440}{720}\\right)   \\text{for } t > 1440\\,\\text{s} \\end{cases}$$\n最终要求的值是达到 $SOC=0.80$ 的总时间。\n\n最终计算：\n$t_{\\text{total}} = 1440 + 720 \\ln(4/3) \\approx 1647.131092...$\n四舍五入到四位有效数字得到 $1647$。",
            "answer": "$$\\boxed{1647}$$"
        },
        {
            "introduction": "在正向模拟了 $SOC$ 的动态演变后，任何电池管理系统都面临一个核心问题：我们能否通过外部测量（如电压和电流）来确定内部状态（如 $SOC$ 和极化电压）？本练习引入了强大的状态空间框架来对电池动态进行形式化建模。您将运用可观测性的概念来严谨地回答这一问题，为高级估算算法（如卡尔曼滤波）奠定理论基础。",
            "id": "3900308",
            "problem": "考虑一个用于锂离子电池的等效电路模型（ECM），该模型由一个开路电压源与一个欧姆电阻和两个用于捕捉极化动力学的串联电阻-电容（RC）支路串联而成。定义以下量和约定：荷电状态 (SOC) $z(t)$，放电深度 (DOD) $d(t)$，开路电压 (OCV) $V_{\\mathrm{oc}}(z)$，串联电阻 $R_{0}$，支路电阻 $R_{1}$ 和 $R_{2}$，支路电容 $C_{1}$ 和 $C_{2}$，以及端电流 $i(t)$（规定放电时为正）。设端电压为 $v(t)$。电池标称容量为 $Q_{n}$，放电深度为 $d(t) = 1 - z(t)$。该ECM的构建方式为：将 $R_{0}$ 与两个串联的RC支路（分别为 $(R_{1}, C_{1})$ 和 $(R_{2}, C_{2})$）串联，每个支路的电压分别表示为 $v_{1}(t)$ 和 $v_{2}(t)$。\n\n从适用于自动化电池设计与仿真的基本定律和定义出发：\n- SOC的电荷守恒：$z(t) = q(t)/Q_{n}$ 且根据所选的符号约定有 $\\frac{dq(t)}{dt} = -i(t)$。\n- 电容器本构关系：$i_{C}(t) = C \\frac{dv_{C}(t)}{dt}$ 和欧姆定律：$v_{R}(t) = R i_{R}(t)$。\n- 适用于上述串并联网络的基尔霍夫定律。\n\n执行以下步骤：\n1. 构建连续时间状态空间模型，其状态向量为 $x(t) = \\begin{pmatrix} v_{1}(t) \\\\ v_{2}(t) \\\\ z(t) \\end{pmatrix}$，输入为 $u(t) = i(t)$，输出为 $y(t) = v(t)$。除了所述基本原理外，不使用任何简化公式。\n2. 在一个固定的工作点SOC $z^{\\star}$ 附近对输出关系进行线性化，其中OCV由其一阶展开式 $V_{\\mathrm{oc}}(z) \\approx V_{\\mathrm{oc}}(z^{\\star}) + \\kappa \\left(z - z^{\\star}\\right)$ 近似，且 $\\kappa = \\left.\\frac{dV_{\\mathrm{oc}}}{dz}\\right|_{z^{\\star}}$ 非零且有限。将线性化后的输出表示为状态和输入的仿射函数，并确定测量矩阵 $C$ 和前馈项 $D$。\n3. 对线性化系统，构建 $3 \\times 3$ 的可观测性矩阵 $\\mathcal{O} = \\begin{pmatrix} C \\\\ C A \\\\ C A^{2} \\end{pmatrix}$，其中 $A$ 是步骤1中的系统矩阵，$C$ 是步骤2中的测量矩阵。然后，计算其行列式的闭式解，该解是 $R_{1}$、$R_{2}$、$C_{1}$、$C_{2}$ 和 $\\kappa$ 的函数。假设所有参数都严格为正且有限。\n4. 基于您推导出的模型，简要解释电压和电流测量如何与状态的可观测性相关联，重点说明斜率 $\\kappa$ 为何是关键，并讨论电流测量在可观测性计算中的作用（或其缺失的作用）。\n\n将您的最终答案表示为 $\\det(\\mathcal{O})$ 的单一闭式解析表达式。不要代入数值，也不要在最终表达式中附加单位。无需四舍五入。您的解答应在所述背景下自洽且科学上一致。",
            "solution": "我们从基本原理开始构建等效电路模型（ECM）。端电压 $v(t)$ 是开路电压减去欧姆电阻和极化支路上的电压降。设两个串联的电阻-电容支路在其电容器上的电压分别为 $v_{1}(t)$ 和 $v_{2}(t)$，串联电阻为 $R_{0}$。那么端电压为：\n$$ v(t) = V_{\\mathrm{oc}}(z(t)) - v_{1}(t) - v_{2}(t) - R_{0}\\, i(t) $$\n这个符号约定与 $i(t) > 0$ 表示放电相一致，因此欧姆项 $R_{0}\\, i(t)$ 会使端电压相对于开路电压降低。\n\n接下来，我们从电容和电荷守恒定律推导状态动力学。对于每个极化支路，电阻和电容并联，因此由端电流驱动的支路电流在该支路的电阻和电容之间分流。在戴维南型ECM中常用的有效支路动力学可以通过以下标准关系简洁地表示，这些关系遵循 $i_{C}(t) = C \\frac{dv(t)}{dt}$，$v_{R}(t) = R i_{R}(t)$，以及净支路电压等于电容电压 $v_{k}(t)$（对于支路 $k \\in \\{1,2\\}$）的约束，从而得到由端电流驱动的 $v_{k}(t)$ 的一阶衰减：\n$$ \\frac{dv_{1}(t)}{dt} = -\\frac{1}{R_{1} C_{1}}\\, v_{1}(t) + \\frac{1}{C_{1}}\\, i(t), \\qquad \\frac{dv_{2}(t)}{dt} = -\\frac{1}{R_{2} C_{2}}\\, v_{2}(t) + \\frac{1}{C_{2}}\\, i(t) $$\n对于荷电状态（SOC），我们使用 $z(t) = \\frac{q(t)}{Q_{n}}$ 以及根据我们的符号约定的电荷守恒 $\\frac{dq(t)}{dt} = -i(t)$，得到：\n$$ \\frac{dz(t)}{dt} = -\\frac{1}{Q_{n}}\\, i(t) $$\n定义状态向量 $x(t) = \\begin{pmatrix} v_{1}(t) \\\\ v_{2}(t) \\\\ z(t) \\end{pmatrix}$ 和输入 $u(t) = i(t)$，我们可以写出连续时间状态空间方程：\n$$ \\frac{dx(t)}{dt} = A\\, x(t) + B\\, u(t) $$\n其中\n$$\nA = \\begin{pmatrix}\n-\\frac{1}{R_{1} C_{1}}  0  0 \\\\\n0  -\\frac{1}{R_{2} C_{2}}  0 \\\\\n0  0  0\n\\end{pmatrix},\n\\qquad\nB = \\begin{pmatrix}\n\\frac{1}{C_{1}} \\\\\n\\frac{1}{C_{2}} \\\\\n-\\frac{1}{Q_{n}}\n\\end{pmatrix}.\n$$\n\n现在，我们在一个固定的工作点SOC $z^{\\star}$ 附近对输出关系进行线性化。设开路电压由一阶近似表示为：\n$$ V_{\\mathrm{oc}}(z) \\approx V_{\\mathrm{oc}}(z^{\\star}) + \\kappa \\left(z - z^{\\star}\\right), \\qquad \\kappa = \\left.\\frac{dV_{\\mathrm{oc}}}{dz}\\right|_{z^{\\star}} $$\n定义输出 $y(t) = v(t)$ 并考虑对工作点的偏离。在 $(z^{\\star}, v_{1}^{\\star}, v_{2}^{\\star}, i^{\\star})$ 附近（在恒定电流和足够长时间的稳态下，$v_{1}^{\\star} = 0$，$v_{2}^{\\star} = 0$）的线性化输出为：\n$$ y(t) \\approx V_{\\mathrm{oc}}(z^{\\star}) + \\kappa \\left(z(t) - z^{\\star}\\right) - v_{1}(t) - v_{2}(t) - R_{0}\\, i(t) $$\n舍去常数项，状态和输入的仿射映射为：\n$$ y(t) = C\\, x(t) + D\\, u(t) + \\text{constant} $$\n其中测量矩阵 $C$ 和前馈项 $D$ 分别为：\n$$ C = \\begin{pmatrix} -1  -1  \\kappa \\end{pmatrix}, \\qquad D = \\begin{pmatrix} -R_{0} \\end{pmatrix} $$\n对于可观测性分析，常数偏移和 $D$ 不影响 $(A,C)$ 对的可观测性；只有 $A$ 和 $C$ 起作用。\n\n我们现在构建这个3状态系统的可观测性矩阵：\n$$ \\mathcal{O} = \\begin{pmatrix} C \\\\ C A \\\\ C A^{2} \\end{pmatrix} $$\n我们使用上面推导出的 $A$ 和 $C$ 来明确计算它。令\n$$ a_{1} = \\frac{1}{R_{1} C_{1}}, \\qquad a_{2} = \\frac{1}{R_{2} C_{2}}. $$\n则\n$$ A = \\operatorname{diag}\\left(-a_{1}, -a_{2}, 0\\right), $$\n我们得到\n$$ C = \\begin{pmatrix} -1  -1  \\kappa \\end{pmatrix}, \\qquad C A = \\begin{pmatrix} -1  -1  \\kappa \\end{pmatrix} \\operatorname{diag}\\left(-a_{1}, -a_{2}, 0\\right) = \\begin{pmatrix} a_{1}  a_{2}  0 \\end{pmatrix}, $$\n$$ A^{2} = \\operatorname{diag}\\left(a_{1}^{2}, a_{2}^{2}, 0\\right), \\qquad C A^{2} = \\begin{pmatrix} -1  -1  \\kappa \\end{pmatrix} \\operatorname{diag}\\left(a_{1}^{2}, a_{2}^{2}, 0\\right) = \\begin{pmatrix} -a_{1}^{2}  -a_{2}^{2}  0 \\end{pmatrix}. $$\n因此，\n$$\n\\mathcal{O} = \n\\begin{pmatrix}\n-1  -1  \\kappa \\\\\na_{1}  a_{2}  0 \\\\\n-a_{1}^{2}  -a_{2}^{2}  0\n\\end{pmatrix}.\n$$\n$\\mathcal{O}$ 的行列式可以通过沿第三列展开（该列只有第一个元素非零）来方便地计算：\n$$\n\\det(\\mathcal{O}) = \\kappa \\cdot \\det\n\\begin{pmatrix}\na_{1}  a_{2} \\\\\n-a_{1}^{2}  -a_{2}^{2}\n\\end{pmatrix}\n= \\kappa \\left( a_{1} \\left(-a_{2}^{2}\\right) - a_{2} \\left(-a_{1}^{2}\\right) \\right)\n= \\kappa \\left( -a_{1} a_{2}^{2} + a_{2} a_{1}^{2} \\right)\n= \\kappa\\, a_{1} a_{2} \\left( a_{1} - a_{2} \\right).\n$$\n将 $a_{1}$ 和 $a_{2}$ 代回，得到闭式表达式：\n$$ \\det(\\mathcal{O}) = \\kappa \\left( \\frac{1}{R_{1} C_{1}} \\right) \\left( \\frac{1}{R_{2} C_{2}} \\right) \\left( \\frac{1}{R_{1} C_{1}} - \\frac{1}{R_{2} C_{2}} \\right) $$\n\n最后，我们讨论电压和电流测量下的可观测性。线性化系统的可观测性取决于 $(A,C)$ 对，其中 $C$ 将状态映射到测量的端电压。在状态空间模型中，电流 $i(t)$ 被视为已知输入 $u(t)$；包含其测量值并不会增强状态-输出映射 $C$，因为 $i(t)$ 是通过前馈项 $D$ 和输入通道 $B$ 进入的，而不是直接作为状态的函数。因此，可观测性矩阵的秩仅由 $A$ 和 $C$ 决定。上面推导的行列式表明，可观测性要求 $\\kappa \\neq 0$（开路电压在工作点必须对SOC敏感）以及不同的非零极化率 $a_{1} \\neq a_{2}$（即，不同的时间常数 $\\tau_{k} = R_{k} C_{k}$）。当这些条件满足时，端电压唯一地编码了关于SOC和极化状态的信息，从而能够在自动化电池设计和仿真中进行状态估计。电流测量对于正确的状态传播和输入核算是必不可少的，但在线性化分析中，它并不能在 $v(t)$ 所提供的基础上增加状态的可观测性。",
            "answer": "$$\\boxed{\\kappa \\left( \\frac{1}{R_{1} C_{1}} \\right) \\left( \\frac{1}{R_{2} C_{2}} \\right) \\left( \\frac{1}{R_{1} C_{1}} - \\frac{1}{R_{2} C_{2}} \\right)}$$"
        }
    ]
}
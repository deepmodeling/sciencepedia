{
    "hands_on_practices": [
        {
            "introduction": "A battery's power capability is fundamentally constrained by the rate at which ions can be transported through the electrolyte to the electrode surface. This exercise guides you through a first-principles derivation of the mass-transfer limiting current density, a critical parameter in cell design and analysis. By applying this model to different hydrodynamic conditions , you will develop a quantitative understanding of how convection enhances performance.",
            "id": "3942739",
            "problem": "A planar lithium plating electrode in a nonaqueous Lithium-Ion Battery (LIB) electrolyte is tested in an automated design and simulation rig. The electrolyte contains solvated lithium ions with bulk concentration $c_{\\infty}$, and near the electrode a hydrodynamic boundary layer of thickness $\\delta$ establishes a one-dimensional diffusion path normal to the surface. Assume isothermal operation, constant diffusion coefficient $D$, and steady state. Under mass-transfer limiting conditions, the interfacial lithium ion concentration approaches zero.\n\nStarting from the fundamental base consisting of Fick’s first law of diffusion and charge conservation (Faraday’s law), derive the expression for the mass-transfer limiting current density $i_{\\mathrm{lim}}$ for a planar electrode in terms of $n$, $F$, $D$, $c_{\\infty}$, and $\\delta$. Treat the concentration profile across the boundary layer as linear at steady state.\n\nThen, using your derived expression, evaluate the limiting current density for two hydrodynamic conditions that differ only in boundary layer thickness:\n- Quiescent: $\\delta_{\\mathrm{q}} = 2.5 \\times 10^{-4}\\ \\text{m}$,\n- Stirred: $\\delta_{\\mathrm{s}} = 4.0 \\times 10^{-5}\\ \\text{m}$,\nwith $n = 1$, $F = 96485\\ \\text{C mol}^{-1}$, $D = 1.5 \\times 10^{-9}\\ \\text{m}^{2}\\ \\text{s}^{-1}$, and $c_{\\infty} = 1.2\\ \\text{mol L}^{-1}$ (use $1\\ \\text{mol L}^{-1} = 1000\\ \\text{mol m}^{-3}$). Express the two current densities in amperes per square meter (A/m$^{2}$).\n\nFinally, explain qualitatively, based on your derivation, how stirring modifies $\\delta$ and therefore $i_{\\mathrm{lim}}$, connecting your reasoning to how automated battery design simulations infer $\\delta$ from flow fields.\n\nReport as your final answer the dimensionless ratio $i_{\\mathrm{lim},\\mathrm{s}}/i_{\\mathrm{lim},\\mathrm{q}}$ rounded to four significant figures. No unit is required for the ratio.",
            "solution": "The first step is to derive the expression for the mass-transfer limiting current density, $i_{\\mathrm{lim}}$. The problem involves one-dimensional diffusion of lithium ions, Li$^+$, towards a planar electrode. Let $x$ be the coordinate normal to the electrode surface, with $x=0$ at the electrode and $x=\\delta$ at the edge of the hydrodynamic boundary layer.\n\nAccording to Fick's first law of diffusion, the molar flux $J$ of a species is proportional to the concentration gradient. In one dimension, this is expressed as:\n$$J(x) = -D \\frac{dc(x)}{dx}$$\nwhere $D$ is the diffusion coefficient and $c(x)$ is the molar concentration of Li$^+$ at position $x$. The negative sign indicates that the net movement of ions is from a region of higher concentration to a region of lower concentration.\n\nThe problem specifies to assume a linear concentration profile across the boundary layer at steady state. This is a key simplifying assumption of the Nernst diffusion layer model. The boundary conditions are:\n1.  At the edge of the diffusion layer ($x=\\delta$): the concentration is equal to the bulk concentration, $c(\\delta) = c_{\\infty}$.\n2.  Under mass-transfer limiting conditions ($x=0$): the electrochemical reaction is so fast that it consumes ions as soon as they arrive at the surface. Thus, the interfacial concentration approaches zero, $c(0) = 0$.\n\nFor a linear profile, the concentration gradient $\\frac{dc}{dx}$ is constant throughout the layer ($0 \\le x \\le \\delta$) and can be calculated as the slope between the two boundary points:\n$$\\frac{dc}{dx} = \\frac{c(\\delta) - c(0)}{\\delta - 0} = \\frac{c_{\\infty} - 0}{\\delta} = \\frac{c_{\\infty}}{\\delta}$$\nSubstituting this constant gradient into Fick's first law gives the steady-state flux:\n$$J = -D \\left( \\frac{c_{\\infty}}{\\delta} \\right)$$\nThe flux $J$ has units of mol m$^{-2}$ s$^{-1}$. The negative sign signifies that the flux is in the negative $x$ direction, i.e., towards the electrode at $x=0$. The magnitude of the flux of ions arriving at the electrode surface is therefore:\n$$|J| = \\frac{Dc_{\\infty}}{\\delta}$$\nThis represents the maximum possible rate at which ions can be supplied to the electrode by diffusion.\n\nNext, we relate this molar flux to an electric current density using Faraday's law. The current density, $i$, is the total charge transferred per unit area per unit time. The plating reaction is $\\text{Li}^+ + e^- \\rightarrow \\text{Li}(s)$. For each mole of Li$^+$ ions that reacts, a charge of $nF$ is transferred, where $n$ is the number of moles of electrons per mole of reactant (here, $n=1$) and $F$ is the Faraday constant (charge per mole of electrons).\n\nThe current density is directly proportional to the magnitude of the molar flux at the electrode surface:\n$$i = nF|J|$$\nUnder mass-transfer limiting conditions, this current density is the limiting current density, $i_{\\mathrm{lim}}$. Substituting the expression for $|J|$:\n$$i_{\\mathrm{lim}} = nF \\left( \\frac{Dc_{\\infty}}{\\delta} \\right)$$\nThis is the required expression for the mass-transfer limiting current density for a planar electrode.\n\nThe second task is to evaluate $i_{\\mathrm{lim}}$ for the two given hydrodynamic conditions. First, we must ensure all parameters are in consistent SI units. The bulk concentration is given as $c_{\\infty} = 1.2\\ \\text{mol L}^{-1}$. Using the provided conversion, $1\\ \\text{mol L}^{-1} = 1000\\ \\text{mol m}^{-3}$:\n$$c_{\\infty} = 1.2\\ \\text{mol L}^{-1} \\times \\frac{1000\\ \\text{mol m}^{-3}}{1\\ \\text{mol L}^{-1}} = 1200\\ \\text{mol m}^{-3}$$\nThe other parameters are:\n$n = 1$\n$F = 96485\\ \\text{C mol}^{-1}$\n$D = 1.5 \\times 10^{-9}\\ \\text{m}^{2}\\ \\text{s}^{-1}$\n\nLet's compute the common factor $nFDc_{\\infty}$:\n$$nFDc_{\\infty} = (1) \\times (96485\\ \\text{C mol}^{-1}) \\times (1.5 \\times 10^{-9}\\ \\text{m}^{2}\\ \\text{s}^{-1}) \\times (1200\\ \\text{mol m}^{-3})$$\n$$nFDc_{\\infty} = 0.173673\\ \\text{C} \\cdot \\text{m}^{-1} \\cdot \\text{s}^{-1} = 0.173673\\ \\text{A} \\cdot \\text{m}^{-1}$$\nsince $1\\ \\text{A} = 1\\ \\text{C s}^{-1}$.\n\nNow, we can calculate the limiting current density for each case:\n1.  Quiescent condition: $\\delta_{\\mathrm{q}} = 2.5 \\times 10^{-4}\\ \\text{m}$\n$$i_{\\mathrm{lim},\\mathrm{q}} = \\frac{nFDc_{\\infty}}{\\delta_{\\mathrm{q}}} = \\frac{0.173673\\ \\text{A} \\cdot \\text{m}^{-1}}{2.5 \\times 10^{-4}\\ \\text{m}} \\approx 694.69\\ \\text{A m}^{-2}$$\n2.  Stirred condition: $\\delta_{\\mathrm{s}} = 4.0 \\times 10^{-5}\\ \\text{m}$\n$$i_{\\mathrm{lim},\\mathrm{s}} = \\frac{nFDc_{\\infty}}{\\delta_{\\mathrm{s}}} = \\frac{0.173673\\ \\text{A} \\cdot \\text{m}^{-1}}{4.0 \\times 10^{-5}\\ \\text{m}} \\approx 4341.83\\ \\text{A m}^{-2}$$\n\nThe third task is a qualitative explanation. The derived relationship $i_{\\mathrm{lim}} = nFDc_{\\infty}/\\delta$ shows that the limiting current density is inversely proportional to the thickness of the diffusion boundary layer, $\\delta$. Stirring introduces forced convection, which is the movement of the bulk fluid. This convective flow transports the electrolyte, rich in Li$^+$ ions, from the bulk region much closer to the electrode surface than diffusion alone could. This enhanced transport \"thins\" the diffusion layer; that is, the region where diffusion is the dominant transport mechanism becomes compressed against the surface. Consequently, stirring reduces the value of $\\delta$. Based on the inverse relationship, a smaller $\\delta$ results in a larger concentration gradient and therefore a higher limiting current density, $i_{\\mathrm{lim}}$.\nIn the context of automated battery design and simulation, computational fluid dynamics (CFD) is employed to model the electrolyte flow field within the complex geometry of a battery cell. These simulations solve the governing equations for fluid motion (e.g., Navier-Stokes equations) to determine the velocity profiles throughout the cell. From these velocity fields, specialized mass transport correlations or direct simulation of the concentration field can be used to determine the local effective boundary layer thickness, $\\delta$, at all points on an electrode surface. This allows for prediction of the spatial distribution of $i_{\\mathrm{lim}}$, helping to identify potential \"hot spots\" of high current or \"dead zones\" prone to premature mass-transfer limitations and lithium plating, thereby guiding improved cell design.\n\nFinally, we calculate the dimensionless ratio $i_{\\mathrm{lim},\\mathrm{s}}/i_{\\mathrm{lim},\\mathrm{q}}$. Using the derived expression for $i_{\\mathrm{lim}}$:\n$$\\frac{i_{\\mathrm{lim},\\mathrm{s}}}{i_{\\mathrm{lim},\\mathrm{q}}} = \\frac{\\frac{nFDc_{\\infty}}{\\delta_{\\mathrm{s}}}}{\\frac{nFDc_{\\infty}}{\\delta_{\\mathrm{q}}}}$$\nThe constants $n$, $F$, $D$, and $c_{\\infty}$ cancel, leaving a simple ratio of the boundary layer thicknesses:\n$$\\frac{i_{\\mathrm{lim},\\mathrm{s}}}{i_{\\mathrm{lim},\\mathrm{q}}} = \\frac{\\delta_{\\mathrm{q}}}{\\delta_{\\mathrm{s}}}$$\nSubstituting the given numerical values:\n$$\\frac{i_{\\mathrm{lim},\\mathrm{s}}}{i_{\\mathrm{lim},\\mathrm{q}}} = \\frac{2.5 \\times 10^{-4}\\ \\text{m}}{4.0 \\times 10^{-5}\\ \\text{m}} = \\frac{2.5}{0.4} = 6.25$$\nThe problem requires the answer to be rounded to four significant figures. Thus, the ratio is $6.250$.",
            "answer": "$$\n\\boxed{6.250}\n$$"
        },
        {
            "introduction": "Operating a battery at high currents generates significant heat, which must be managed to ensure both safety and a long operational life. This practice introduces the lumped capacitance method, a powerful and widely used simplification for modeling the thermal behavior of an entire cell. By solving for the temperature evolution under a dynamic load profile , you will learn to predict thermal limits and understand the concept of a thermal time constant.",
            "id": "3942743",
            "problem": "A single-layer pouch cell is thermally modeled as a lumped body with a single thermal capacitance and a single thermal resistance to an isothermal coolant environment. Starting from conservation of energy applied to the cell, treat the internal electrochemical heat generation as a prescribed input power and the heat loss to the environment as a linear thermal resistance. The cell has mass $m = 0.075\\,\\mathrm{kg}$ and effective specific heat capacity $c_{p} = 900\\,\\mathrm{J\\,kg^{-1}\\,K^{-1}}$, so its lumped thermal capacitance is $C_{\\mathrm{th}} = m c_{p}$. The cell is connected to a thermal management plate with an effective thermal resistance $R_{\\mathrm{th}} = 2.4\\,\\mathrm{K\\,W^{-1}}$ to an ambient coolant at temperature $T_{\\infty} = 298\\,\\mathrm{K}$. The initial cell temperature equals the ambient, $T(0) = T_{\\infty}$.\n\nThe internal heat generation power profile $P(t)$ over a drive cycle is piecewise constant:\n- For $0 \\leq t < 450\\,\\mathrm{s}$, $P(t) = 18\\,\\mathrm{W}$.\n- For $450\\,\\mathrm{s} \\leq t < 1200\\,\\mathrm{s}$, $P(t) = 6\\,\\mathrm{W}$.\n- For $1200\\,\\mathrm{s} \\leq t \\leq 1500\\,\\mathrm{s}$, $P(t) = 0\\,\\mathrm{W}$.\n\nA thermal safety limit for the cell jellyroll is specified as $T_{\\mathrm{lim}} = 333\\,\\mathrm{K}$. Using the lumped thermal capacitance and thermal resistance model, derive the temperature trajectory $T(t)$ for this power profile from first principles, determine the maximum cell temperature attained during the entire cycle, and assess whether the thermal safety limit is reached or exceeded.\n\nReport the single maximum temperature attained during the cycle. Express the final answer in degrees Celsius and round to four significant figures.",
            "solution": "The lumped-body thermal model is based on the principle of conservation of energy. The rate of change of the internal energy of the cell is equal to the rate of heat generated internally minus the rate of heat lost to the surroundings. This principle can be expressed as the following first-order ordinary differential equation (ODE):\n$$C_{\\mathrm{th}} \\frac{dT(t)}{dt} = P(t) - Q_{\\mathrm{loss}}(t)$$\nwhere $T(t)$ is the cell temperature, $C_{\\mathrm{th}}$ is the lumped thermal capacitance, $P(t)$ is the internal heat generation rate, and $Q_{\\mathrm{loss}}(t)$ is the rate of heat loss to the ambient coolant. The heat loss is modeled through a linear thermal resistance $R_{\\mathrm{th}}$ to an isothermal environment at temperature $T_{\\infty}$:\n$$Q_{\\mathrm{loss}}(t) = \\frac{T(t) - T_{\\infty}}{R_{\\mathrm{th}}}$$\nSubstituting this into the energy balance equation gives the governing ODE for the cell temperature:\n$$C_{\\mathrm{th}} \\frac{dT}{dt} = P(t) - \\frac{T(t) - T_{\\infty}}{R_{\\mathrm{th}}}$$\nThis equation can be rearranged into the standard form for a first-order linear ODE:\n$$\\frac{dT}{dt} + \\frac{1}{R_{\\mathrm{th}} C_{\\mathrm{th}}} T(t) = \\frac{P(t)}{C_{\\mathrm{th}}} + \\frac{T_{\\infty}}{R_{\\mathrm{th}} C_{\\mathrm{th}}}$$\nWe define the thermal time constant $\\tau = R_{\\mathrm{th}} C_{\\mathrm{th}}$. The equation becomes:\n$$\\frac{dT}{dt} + \\frac{1}{\\tau} T(t) = \\frac{P(t) R_{\\mathrm{th}} + T_{\\infty}}{\\tau}$$\nFor a piecewise constant power input $P$, the solution to this ODE over a time interval starting at $t_i$ with initial temperature $T(t_i)$ is:\n$$T(t) = T_{ss} + (T(t_i) - T_{ss}) \\exp\\left(-\\frac{t - t_i}{\\tau}\\right)$$\nwhere $T_{ss}$ is the steady-state temperature for the constant power $P$, found by setting $\\frac{dT}{dt}=0$:\n$$0 = P - \\frac{T_{ss} - T_{\\infty}}{R_{\\mathrm{th}}} \\implies T_{ss} = T_{\\infty} + P R_{\\mathrm{th}}$$\n\nFirst, we calculate the values of the thermal constants from the givens:\n- Thermal capacitance: $C_{\\mathrm{th}} = m c_{p} = (0.075\\,\\mathrm{kg}) \\times (900\\,\\mathrm{J\\,kg^{-1}\\,K^{-1}}) = 67.5\\,\\mathrm{J\\,K^{-1}}$\n- Thermal time constant: $\\tau = R_{\\mathrm{th}} C_{\\mathrm{th}} = (2.4\\,\\mathrm{K\\,W^{-1}}) \\times (67.5\\,\\mathrm{J\\,K^{-1}}) = 162\\,\\mathrm{s}$\n- Ambient temperature: $T_{\\infty} = 298\\,\\mathrm{K}$\n- Initial temperature: $T(0) = 298\\,\\mathrm{K}$\n\nWe now solve for the temperature trajectory in each of the three time intervals.\n\n**Interval 1: $0 \\leq t < 450\\,\\mathrm{s}$**\n- Power: $P_1 = 18\\,\\mathrm{W}$\n- Initial condition: $T(0) = 298\\,\\mathrm{K}$\n- Steady-state temperature for this interval:\n$$T_{ss,1} = T_{\\infty} + P_1 R_{\\mathrm{th}} = 298\\,\\mathrm{K} + (18\\,\\mathrm{W})(2.4\\,\\mathrm{K\\,W^{-1}}) = 298\\,\\mathrm{K} + 43.2\\,\\mathrm{K} = 341.2\\,\\mathrm{K}$$\n- The temperature evolution is:\n$$T(t) = T_{ss,1} + (T(0) - T_{ss,1}) \\exp\\left(-\\frac{t}{\\tau}\\right) = 341.2 + (298 - 341.2) \\exp\\left(-\\frac{t}{162}\\right)$$\n$$T(t) = 341.2 - 43.2 \\exp\\left(-\\frac{t}{162}\\right)$$\nAt the end of this interval, $t_1 = 450\\,\\mathrm{s}$, the temperature is:\n$$T(450) = 341.2 - 43.2 \\exp\\left(-\\frac{450}{162}\\right) \\approx 341.2 - 43.2 \\exp(-2.777...) \\approx 341.2 - 43.2(0.06217) \\approx 338.514\\,\\mathrm{K}$$\n\n**Interval 2: $450\\,\\mathrm{s} \\leq t < 1200\\,\\mathrm{s}$**\n- Power: $P_2 = 6\\,\\mathrm{W}$\n- Initial condition for this interval is $T(450) \\approx 338.514\\,\\mathrm{K}$. Let $t' = t - 450$.\n- Steady-state temperature for this interval:\n$$T_{ss,2} = T_{\\infty} + P_2 R_{\\mathrm{th}} = 298\\,\\mathrm{K} + (6\\,\\mathrm{W})(2.4\\,\\mathrm{K\\,W^{-1}}) = 298\\,\\mathrm{K} + 14.4\\,\\mathrm{K} = 312.4\\,\\mathrm{K}$$\n- The temperature evolution is:\n$$T(t) \\approx 312.4 + (338.514 - 312.4) \\exp\\left(-\\frac{t-450}{162}\\right)$$\n$$T(t) \\approx 312.4 + 26.114 \\exp\\left(-\\frac{t-450}{162}\\right)$$\n\n**Interval 3: $1200\\,\\mathrm{s} \\leq t \\leq 1500\\,\\mathrm{s}$**\n- Power: $P_3 = 0\\,\\mathrm{W}$\n- The initial condition would be $T(1200)$.\n- Steady-state temperature for this interval:\n$$T_{ss,3} = T_{\\infty} + P_3 R_{\\mathrm{th}} = 298\\,\\mathrm{K} + (0\\,\\mathrm{W})(2.4\\,\\mathrm{K\\,W^{-1}}) = 298\\,\\mathrm{K}$$\n\nTo find the maximum temperature, we analyze the rate of change of temperature, $\\frac{dT}{dt} = \\frac{1}{C_{\\mathrm{th}}} \\left( P(t) - \\frac{T(t)-T_{\\infty}}{R_{\\mathrm{th}}} \\right)$. The temperature increases if $P(t) > (T(t)-T_{\\infty}) / R_{\\mathrm{th}}$ and decreases otherwise. This is equivalent to saying temperature increases if $T(t) < T_\\infty + P(t) R_\\mathrm{th}$.\n\n- In Interval 1 ($0 \\leq t < 450\\,\\mathrm{s}$): $T(t)$ starts at $T(0)=298\\,\\mathrm{K}$ and increases towards $T_{ss,1} = 341.2\\,\\mathrm{K}$. Since it never reaches this steady state within the interval ($T(450) \\approx 338.514\\,\\mathrm{K} < 341.2\\,\\mathrm{K}$), the temperature is monotonically increasing throughout this interval.\n\n- In Interval 2 ($450\\,\\mathrm{s} \\leq t < 1200\\,\\mathrm{s}$): At the start of this interval, $T(450) \\approx 338.514\\,\\mathrm{K}$. The new steady-state temperature is $T_{ss,2} = 312.4\\,\\mathrm{K}$. Since the initial temperature for this interval is greater than its target steady-state temperature ($338.514\\,\\mathrm{K} > 312.4\\,\\mathrm{K}$), the temperature will monotonically decrease, approaching $T_{ss,2}$.\n\n- In Interval 3 ($1200\\,\\mathrm{s} \\leq t \\leq 1500\\,\\mathrm{s}$): The temperature at $t=1200\\,\\mathrm{s}$ will be above $T_{ss,2}=312.4\\,\\mathrm{K}$ and thus well above the new steady state of $T_{ss,3} = T_\\infty = 298\\,\\mathrm{K}$. Therefore, the cell continues to cool towards $T_\\infty$.\n\nThe temperature increases during the first interval, peaks at the moment the power is reduced, and then decreases for the rest of the cycle. The maximum temperature is therefore attained at $t=450\\,\\mathrm{s}$.\n$$T_{\\mathrm{max}} = T(450) = 341.2 - 43.2 \\exp\\left(-\\frac{450}{162}\\right) \\approx 338.514066\\,\\mathrm{K}$$\nThe problem asks for this temperature in degrees Celsius, rounded to four significant figures. The conversion is $T_{^\\circ\\mathrm{C}} = T_{\\mathrm{K}} - 273.15$.\n$$T_{\\mathrm{max}}(^\\circ\\mathrm{C}) = 338.514066 - 273.15 = 65.364066\\,^\\circ\\mathrm{C}$$\nRounding to four significant figures gives $65.36\\,^\\circ\\mathrm{C}$.\n\nThe thermal safety limit is $T_{\\mathrm{lim}} = 333\\,\\mathrm{K}$. Since $T_{\\mathrm{max}} \\approx 338.51\\,\\mathrm{K}$, the safety limit is exceeded during the cycle. The question asks only for the maximum temperature value.",
            "answer": "$$\n\\boxed{65.36}\n$$"
        },
        {
            "introduction": "The useful life of a battery is determined by the slow accumulation of irreversible degradation, with Solid Electrolyte Interphase (SEI) growth being a primary factor. This exercise challenges you to translate fundamental physical laws into a working computational model that simulates SEI growth and its impact on coulombic efficiency over many cycles. This practice  provides direct experience in modeling degradation, a core task in predicting battery lifetime.",
            "id": "3942723",
            "problem": "You are tasked with constructing a mathematically consistent coupled model that captures Solid Electrolyte Interphase (SEI) growth and cyclable lithium inventory loss in a lithium-ion cell negative electrode under galvanostatic cycling, and then using this model to simulate how the coulombic efficiency evolves with cycle number. The program must implement the model and compute the coulombic efficiency sequence for a given set of physically plausible parameters, and produce a single line of output containing the results for a specified test suite.\n\nFundamental base and model assumptions:\n- Begin from Faraday's law of electrolysis: the rate at which charge is consumed by an electrochemical reaction is proportional to the stoichiometric rates of reactants and products. Let the SEI thickness be denoted by $\\delta(t)$ in meters, and let the parasitic SEI formation current density be denoted by $j_{\\text{sei}}(t)$ in amperes per square meter.\n- Assume diffusion-limited solvent reduction through the SEI yields a current density inversely proportional to thickness, $j_{\\text{sei}}(t) = \\kappa/\\delta(t)$, where $\\kappa$ is an effective transport-kinetic prefactor with units of amperes per meter.\n- Assume the effective prefactor $\\kappa$ obeys an Arrhenius temperature dependence, $\\kappa = k_0 \\exp\\!\\left(-\\frac{E_a}{R T}\\right)$, where $k_0$ is a pre-exponential factor in amperes per meter, $E_a$ is the activation energy in joules per mole, $R$ is the universal molar gas constant in joules per mole per kelvin, and $T$ is temperature in kelvins.\n- Relate SEI thickness growth to consumed charge via Faraday’s law and a constant thickness-per-charge coefficient $\\Gamma$ such that $\\frac{d\\delta}{dt} = \\Gamma j_{\\text{sei}}(t)$. The coefficient is defined by $\\Gamma = \\frac{M_{\\text{sei}}}{\\rho_{\\text{sei}} F n_e}$, where $M_{\\text{sei}}$ is the molar mass of the dominant SEI compound in kilograms per mole, $\\rho_{\\text{sei}}$ is its mass density in kilograms per cubic meter, $F$ is Faraday’s constant in coulombs per mole, and $n_e$ is the number of electrons per SEI formula unit produced by the reduction reaction (dimensionless). All symbols must be used in their physically consistent units.\n- Let the cyclable lithium inventory per area be $N_{\\text{Li}}(t)$ in moles per square meter. Coupling between SEI growth and lithium inventory loss is given by $\\frac{dN_{\\text{Li}}}{dt} = -\\frac{j_{\\text{sei}}(t)}{F}$, assuming one electron consumed irreversibly per lithium ion incorporated in the SEI; the sign convention is that inventory decreases when the SEI consumes charge.\n\nCycling protocol and quantities to compute:\n- The cell is cycled galvanostatically at a constant applied charge per cycle $Q_{\\text{ch}}$ in coulombs and constant current $I$ in amperes during charge. The charge duration per cycle is $t_{\\text{ch}} = \\frac{Q_{\\text{ch}}}{I}$ in seconds. Assume SEI formation occurs predominantly during charge, and neglect SEI formation during discharge for the purposes of computing coulombic efficiency.\n- The electrode geometric area is $A$ in square meters.\n- The coulombic efficiency for cycle $n$, denoted by $\\mathrm{CE}_n$, is defined as the ratio of measured discharge capacity to applied charge capacity. Under the above assumptions, this is given by the reversible capacity delivered divided by the applied charge. As a direct consequence of parasitic charge consumption by SEI growth during charge, this can be computed from the parasitic charge $Q_{\\text{loss},n}$ irreversibly consumed by SEI formation during cycle $n$ as $\\mathrm{CE}_n = 1 - \\frac{Q_{\\text{loss},n}}{Q_{\\text{ch}}}$, where $Q_{\\text{loss},n}$ is the total side-reaction charge in coulombs in that cycle. The side-reaction charge for cycle $n$ must be obtained from the above coupled model, using the physically consistent relationship between $j_{\\text{sei}}$, $\\delta(t)$, and $\\Gamma$.\n\nImplementation requirements:\n- Use the fundamental laws and definitions above to construct the cycle-by-cycle update for $\\delta$ and $N_{\\text{Li}}$, and compute $\\mathrm{CE}_n$ for each cycle, starting from specified initial conditions $\\delta(0) = \\delta_0$ and $N_{\\text{Li}}(0) = N_{\\text{Li},0}$.\n- Express all physical quantities in their correct units:\n  - SEI thickness in meters.\n  - Area in square meters.\n  - Current in amperes.\n  - Charge in coulombs.\n  - Temperature in kelvins.\n  - Activation energy in joules per mole.\n  - Molar mass in kilograms per mole.\n  - Mass density in kilograms per cubic meter.\n  - Report coulombic efficiency as a decimal number (unitless).\n- Your program must compute the sequence $\\left[\\mathrm{CE}_1, \\mathrm{CE}_2, \\ldots, \\mathrm{CE}_N\\right]$ for each test case in the test suite described below, where $N$ is the number of cycles to simulate.\n\nTest suite:\nFor each test case, simulate $N$ cycles and output the list of $\\mathrm{CE}_n$ values. Use $R = 8.314$ joules per mole per kelvin and $F = 96485$ coulombs per mole. The material properties for the SEI are taken as the carbonate-rich SEI approximation with $M_{\\text{sei}} = 0.074$ kilograms per mole and $\\rho_{\\text{sei}} = 2110$ kilograms per cubic meter, and $n_e = 1$. The initial cyclable lithium inventory per area is $N_{\\text{Li},0} = 0.05$ moles per square meter. The charge per cycle is $Q_{\\text{ch}} = 3600$ coulombs.\n\nProvide four test cases:\n- Case $1$ (happy path): $A = 0.01$, $\\delta_0 = 3\\times 10^{-9}$, $k_0 = 0.15$, $E_a = 50000$, $T = 298$, $I = 1$, $N = 50$.\n- Case $2$ (shorter charge duration due to higher current): $A = 0.01$, $\\delta_0 = 3\\times 10^{-9}$, $k_0 = 0.15$, $E_a = 50000$, $T = 298$, $I = 4$, $N = 50$.\n- Case $3$ (lower temperature): $A = 0.01$, $\\delta_0 = 3\\times 10^{-9}$, $k_0 = 0.15$, $E_a = 50000$, $T = 258$, $I = 1$, $N = 50$.\n- Case $4$ (thin initial SEI): $A = 0.01$, $\\delta_0 = 5\\times 10^{-10}$, $k_0 = 0.15$, $E_a = 50000$, $T = 298$, $I = 1$, $N = 50$.\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, with each element being the list of coulombic efficiencies per cycle for the corresponding test case, in the order of cases $1$ to $4$. For example, the output should look like $[[\\mathrm{CE}_1^{(1)},\\ldots,\\mathrm{CE}_{N}^{(1)}],[\\mathrm{CE}_1^{(2)},\\ldots],[\\mathrm{CE}_1^{(3)},\\ldots],[\\mathrm{CE}_1^{(4)},\\ldots]]$, where superscripts denote the case index. No other text should be printed.",
            "solution": "The starting point is the set of provided differential equations and definitions. We will first derive the cycle-by-cycle update rules from these continuous-time equations. We are given that SEI growth occurs predominantly during the charging phase of each cycle.\n\nFirst, we address the SEI thickness, $\\delta(t)$. The growth rate is given by $\\frac{d\\delta}{dt} = \\Gamma j_{\\text{sei}}(t)$, where the parasitic current density is $j_{\\text{sei}}(t) = \\kappa/\\delta(t)$. Here, $\\Gamma$ is the thickness-per-charge coefficient and $\\kappa$ is an effective transport-kinetic prefactor. Combining these equations gives a single differential equation for $\\delta(t)$:\n$$\n\\frac{d\\delta}{dt} = \\frac{\\Gamma \\kappa}{\\delta(t)}\n$$\nThis is a separable ordinary differential equation. We can rearrange it to $\\delta(t) d\\delta = \\Gamma \\kappa dt$. To find the thickness change over a single cycle, we integrate this equation over the charging period, $t_{\\text{ch}}$. Let $\\delta_{n-1}$ be the SEI thickness at the beginning of cycle $n$ (i.e., at time $t=0$ for that cycle's charge step), and $\\delta_n$ be the thickness at the end of the charge period, $t_{\\text{ch}} = Q_{\\text{ch}}/I$.\n$$\n\\int_{\\delta_{n-1}}^{\\delta_n} \\delta \\, d\\delta = \\int_{0}^{t_{\\text{ch}}} \\Gamma \\kappa \\, dt\n$$\nSince $\\Gamma$ and $\\kappa$ are considered constant throughout a single charging step at a fixed temperature, the integration yields:\n$$\n\\frac{1}{2}\\delta_n^2 - \\frac{1}{2}\\delta_{n-1}^2 = \\Gamma \\kappa t_{\\text{ch}}\n$$\nThis provides a discrete update rule for the square of the thickness from one cycle to the next:\n$$\n\\delta_n^2 = \\delta_{n-1}^2 + 2 \\Gamma \\kappa t_{\\text{ch}}\n$$\nThus, the SEI thickness at the end of the charge period of cycle $n$ is:\n$$\n\\delta_n = \\sqrt{\\delta_{n-1}^2 + 2 \\Gamma \\kappa t_{\\text{ch}}}\n$$\nThe simulation will start with the initial thickness $\\delta_0$.\n\nNext, we derive the expression for the total parasitic charge lost to SEI formation during cycle $n$, denoted $Q_{\\text{loss},n}$. The total parasitic current is $I_{\\text{sei}}(t) = A \\cdot j_{\\text{sei}}(t)$, where $A$ is the electrode area. Integrating this current over the charge time gives the lost charge:\n$$\nQ_{\\text{loss},n} = \\int_{0}^{t_{\\text{ch}}} I_{\\text{sei}}(t) \\, dt = A \\int_{0}^{t_{\\text{ch}}} j_{\\text{sei}}(t) \\, dt\n$$\nUsing the relation $j_{\\text{sei}}(t) = \\frac{1}{\\Gamma} \\frac{d\\delta}{dt}$, we can change the variable of integration from time $t$ to thickness $\\delta$:\n$$\nQ_{\\text{loss},n} = A \\int_{\\delta_{n-1}}^{\\delta_n} \\frac{1}{\\Gamma} \\, d\\delta = \\frac{A}{\\Gamma} (\\delta_n - \\delta_{n-1})\n$$\nThis equation directly relates the charge loss in a cycle to the change in SEI thickness during that cycle.\n\nThe coulombic efficiency for cycle $n$, $\\mathrm{CE}_n$, is defined as $\\mathrm{CE}_n = 1 - \\frac{Q_{\\text{loss},n}}{Q_{\\text{ch}}}$. Substituting our expression for $Q_{\\text{loss},n}$:\n$$\n\\mathrm{CE}_n = 1 - \\frac{A(\\delta_n - \\delta_{n-1})}{\\Gamma Q_{\\text{ch}}}\n$$\nThis allows for the calculation of $\\mathrm{CE}_n$ at each cycle, using the thickness values $\\delta_{n-1}$ and $\\delta_n$.\n\nFinally, we consider the cyclable lithium inventory per area, $N_{\\text{Li}}(t)$. Its rate of change is given by $\\frac{dN_{\\text{Li}}}{dt} = -\\frac{j_{\\text{sei}}(t)}{F}$. Integrating over the charge period of cycle $n$ gives the total loss of cyclable lithium in that cycle:\n$$\n\\Delta N_{\\text{Li},n} = N_{\\text{Li},n} - N_{\\text{Li},n-1} = -\\int_{0}^{t_{\\text{ch}}} \\frac{j_{\\text{sei}}(t)}{F} \\, dt = -\\frac{1}{F} \\frac{Q_{\\text{loss},n}}{A}\n$$\nThe update rule for the lithium inventory is therefore:\n$$\nN_{\\text{Li},n} = N_{\\text{Li},n-1} - \\frac{Q_{\\text{loss},n}}{A F}\n$$\nWhile the value of $N_{\\text{Li},n}$ is not directly used to compute $\\mathrm{CE}_n$, its calculation is required by the problem statement to form a complete model implementation.\n\nThe computational procedure for each test case is as follows:\n1.  Establish the values of the fundamental constants $R = 8.314 \\, \\text{J/(mol}\\cdot\\text{K)}$ and $F = 96485 \\, \\text{C/mol}$.\n2.  Define the material properties for the SEI ($M_{\\text{sei}} = 0.074 \\, \\text{kg/mol}$, $\\rho_{\\text{sei}} = 2110 \\, \\text{kg/m}^3$, $n_e=1$) and the cycling parameter $Q_{\\text{ch}} = 3600 \\, \\text{C}$.\n3.  For each specific test case, initialize parameters $A$, $\\delta_0$, $k_0$, $E_a$, $T$, $I$, and $N$.\n4.  Calculate the derived parameters:\n    -   $\\Gamma = \\frac{M_{\\text{sei}}}{\\rho_{\\text{sei}} F n_e}$\n    -   $\\kappa = k_0 \\exp\\left(-\\frac{E_a}{R T}\\right)$\n    -   $t_{\\text{ch}} = \\frac{Q_{\\text{ch}}}{I}$\n5.  Initialize the state variables: $\\delta_{\\text{current}} \\leftarrow \\delta_0$ and $N_{\\text{Li},\\text{current}} \\leftarrow N_{\\text{Li},0}$.\n6.  Iterate from cycle $n = 1$ to $N$:\n    a. Store the current thickness: $\\delta_{\\text{previous}} \\leftarrow \\delta_{\\text{current}}$.\n    b. Update the thickness: $\\delta_{\\text{current}} \\leftarrow \\sqrt{\\delta_{\\text{previous}}^2 + 2 \\Gamma \\kappa t_{\\text{ch}}}$.\n    c. Calculate the charge loss: $Q_{\\text{loss},n} \\leftarrow \\frac{A}{\\Gamma}(\\delta_{\\text{current}} - \\delta_{\\text{previous}})$.\n    d. Calculate the coulombic efficiency: $\\mathrm{CE}_n \\leftarrow 1 - \\frac{Q_{\\text{loss},n}}{Q_{\\text{ch}}}$. Store this value.\n    e. Update the lithium inventory: $N_{\\text{Li},\\text{current}} \\leftarrow N_{\\text{Li},\\text{current}} - \\frac{Q_{\\text{loss},n}}{A F}$.\n7.  Collect the sequence of $\\mathrm{CE}_n$ values for the test case.\nThe final program implements this algorithm for all specified test cases and formats the output as required.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the SEI growth and coulombic efficiency problem for a suite of test cases.\n    \"\"\"\n\n    # Global constants\n    R = 8.314  # J/(mol*K)\n    F = 96485  # C/mol\n\n    # SEI properties (carbonate-rich approximation)\n    M_sei = 0.074   # kg/mol\n    rho_sei = 2110  # kg/m^3\n    n_e = 1.0       # dimensionless\n\n    # General cycle parameters\n    N_li_0 = 0.05   # mol/m^2\n    Q_ch = 3600.0   # C\n\n    def compute_ce_sequence(A, delta_0, k_0, E_a, T, I, N):\n        \"\"\"\n        Computes the sequence of coulombic efficiencies for a single test case.\n\n        Args:\n            A (float): Electrode geometric area in m^2.\n            delta_0 (float): Initial SEI thickness in m.\n            k_0 (float): Pre-exponential factor in A/m.\n            E_a (float): Activation energy in J/mol.\n            T (float): Temperature in K.\n            I (float): Charge current in A.\n            N (int): Number of cycles to simulate.\n\n        Returns:\n            list: A list of coulombic efficiencies for N cycles.\n        \"\"\"\n        # Calculate derived constants based on the provided parameters\n        # Thickness-per-charge coefficient Gamma in m^3/C\n        Gamma = M_sei / (rho_sei * F * n_e)\n        \n        # Effective transport-kinetic prefactor kappa in A/m\n        kappa = k_0 * np.exp(-E_a / (R * T))\n        \n        # Charge duration per cycle t_ch in s\n        t_ch = Q_ch / I\n\n        # Initialize state variables\n        delta_current = delta_0\n        n_li_current = N_li_0\n        ce_list = []\n\n        # Loop through each cycle\n        for _ in range(N):\n            delta_previous = delta_current\n            \n            # Update SEI thickness using the derived discrete update rule\n            delta_current = np.sqrt(delta_previous**2 + 2 * Gamma * kappa * t_ch)\n            \n            # Calculate parasitic charge loss in this cycle\n            q_loss_n = (A / Gamma) * (delta_current - delta_previous)\n            \n            # Calculate Coulombic Efficiency for the cycle\n            ce_n = 1.0 - (q_loss_n / Q_ch)\n            ce_list.append(ce_n)\n            \n            # Update cyclable lithium inventory (as required, though unused for CE list)\n            n_li_current -= q_loss_n / (A * F)\n\n        return ce_list\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # Case 1 (happy path)\n        {'A': 0.01, 'delta_0': 3e-9, 'k_0': 0.15, 'E_a': 50000, 'T': 298, 'I': 1, 'N': 50},\n        # Case 2 (shorter charge duration due to higher current)\n        {'A': 0.01, 'delta_0': 3e-9, 'k_0': 0.15, 'E_a': 50000, 'T': 298, 'I': 4, 'N': 50},\n        # Case 3 (lower temperature)\n        {'A': 0.01, 'delta_0': 3e-9, 'k_0': 0.15, 'E_a': 50000, 'T': 258, 'I': 1, 'N': 50},\n        # Case 4 (thin initial SEI)\n        {'A': 0.01, 'delta_0': 5e-10, 'k_0': 0.15, 'E_a': 50000, 'T': 298, 'I': 1, 'N': 50},\n    ]\n\n    all_results = []\n    for case_params in test_cases:\n        result = compute_ce_sequence(**case_params)\n        all_results.append(result)\n\n    # Format the final output string exactly as specified: [[...],[...],...]\n    formatted_results = [f\"[{','.join(map(str, res))}]\" for res in all_results]\n    print(f\"[{','.join(formatted_results)}]\")\n\nsolve()\n```"
        }
    ]
}
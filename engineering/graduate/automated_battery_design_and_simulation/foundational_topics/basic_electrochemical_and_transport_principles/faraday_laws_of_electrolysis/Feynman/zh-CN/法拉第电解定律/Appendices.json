{
    "hands_on_practices": [
        {
            "introduction": "在理想情况下，所有电荷都用于目标电化学反应。然而，在实际的电池系统中，尤其是在锂电池中，副反应（如固体电解质界面（SEI）膜的形成）会消耗一部分电荷，导致库仑效率低于100%。这个练习将法拉第定律应用于更真实的情景，要求您区分总电荷和有效电荷，以准确计算实际的电极材料沉积量，这是构建精确电池模型的关键一步。",
            "id": "1561153",
            "problem": "在一个研发下一代锂金属电池的研究实验室中，进行了一项实验来研究锂在铜集流体上的初始电镀过程。实验使用了一种含有六氟磷酸锂（$\\text{LiPF}_6$）的非水电解质。沉积过程在恒流（恒定电流）条件下进行。一个恒定电流 $I = 25.0 \\text{ mA}$ 通过电化学电池，持续时间为 $t = 3.00 \\text{ 小时}$。\n\n在此初始沉积期间，并非所有电荷都用于形成金属锂。一部分电荷被一个不可避免的副反应消耗掉：电极表面上电解质溶剂分子的还原分解。该过程形成一个被称为固体电解质界面膜（SEI）的钝化层。经测定，通过的总电荷中有 $\\eta_{\\text{loss}} = 15.0\\%$ 损失于此副反应。\n\n金属锂从其单电荷离子的电化学沉积过程如下：$\\text{Li}^+ + e^- \\to \\text{Li(s)}$。\n\n给定以下常数：\n- 法拉第常数，$F = 96485 \\text{ C/mol}$\n- 锂的摩尔质量，$M_{\\text{Li}} = 6.941 \\text{ g/mol}$\n\n计算实际沉积在铜集流体上的金属锂的总质量。答案以毫克（mg）为单位，并四舍五入到三位有效数字。",
            "solution": "在恒流条件下，通过的总电荷为 $Q_{\\text{tot}} = I t$。由于副反应，只有一部分电荷 $(1 - \\eta_{\\text{loss}})$ 用于锂的沉积，因此用于沉积的有效电荷为\n$$\nQ_{\\text{eff}} = (1 - \\eta_{\\text{loss}})\\, I t.\n$$\n锂通过反应 $\\text{Li}^{+} + e^{-} \\to \\text{Li(s)}$ 沉积，每个锂原子需要 $z=1$ 个电子。根据法拉第定律，沉积的锂的摩尔数为\n$$\nn_{\\text{Li}} = \\frac{Q_{\\text{eff}}}{z F} = \\frac{(1 - \\eta_{\\text{loss}}) I t}{F}.\n$$\n沉积的质量为\n$$\nm_{\\text{Li}} = n_{\\text{Li}} M_{\\text{Li}} = \\frac{(1 - \\eta_{\\text{loss}}) I t M_{\\text{Li}}}{F}.\n$$\n将给定数值转换为一致的单位并代入：\n- $I = 25.0 \\times 10^{-3}\\ \\text{A}$，\n- $t = 3.00 \\times 3600\\ \\text{s} = 1.08 \\times 10^{4}\\ \\text{s}$，\n- $\\eta_{\\text{loss}} = 0.150$，\n- $F = 96485\\ \\text{C/mol}$，\n- $M_{\\text{Li}} = 6.941\\ \\text{g/mol}$。\n\n计算总电荷和有效电荷：\n$$\nQ_{\\text{tot}} = (25.0 \\times 10^{-3})(1.08 \\times 10^{4}) = 270\\ \\text{C}, \\quad\nQ_{\\text{eff}} = (1 - 0.150)\\times 270 = 0.850 \\times 270 = 229.5\\ \\text{C}.\n$$\n摩尔数和质量：\n$$\nn_{\\text{Li}} = \\frac{229.5}{96485} \\approx 2.3786 \\times 10^{-3}\\ \\text{mol},\n$$\n$$\nm_{\\text{Li}} = (2.3786 \\times 10^{-3})(6.941)\\ \\text{g} \\approx 1.65099 \\times 10^{-2}\\ \\text{g} = 16.5099\\ \\text{mg}.\n$$\n以毫克为单位，四舍五入到三位有效数字，沉积的质量为 $16.5\\ \\text{mg}$。",
            "answer": "$$\\boxed{16.5}$$"
        },
        {
            "introduction": "电池在实际应用中很少在恒定电流下工作；它们的负载通常是动态变化的。本练习将挑战从静态假设转向处理时变电流的场景。您需要应用积分来计算在特定时间段内通过的总电荷，这是模拟电池在不同工况下性能的基础。",
            "id": "1561174",
            "problem": "一个电化学电池被用于从含有过量氯化锌（$ZnCl_2$）的水溶液中电镀锌。该过程由一个外部电源驱动，该电源为电池提供一个随时间变化的电流 $I(t)$。发现电流随时间呈指数衰减，其函数关系如下：\n$$I(t) = I_0 \\exp(-t/\\tau)$$\n其中 $I_0$ 是初始电流，$t$ 是时间（单位为秒），$\\tau$ 是衰减的特征时间常数。\n\n实验总共进行时间为 $T$。给定以下参数：\n- 初始电流, $I_0 = 5.00 \\text{ A}$\n- 时间常数, $\\tau = 600 \\text{ s}$\n- 电解总时长, $T = 1800 \\text{ s}$\n- 法拉第常数, $F = 96485 \\text{ C} \\cdot \\text{mol}^{-1}$\n- 锌的摩尔质量, $M_{Zn} = 65.38 \\text{ g} \\cdot \\text{mol}^{-1}$\n\n假设沉积过程的效率为 100%，计算在阴极上析出的锌金属的总质量。结果以克为单位，并四舍五入到三位有效数字。",
            "solution": "在电流随时间变化的电解过程中，沉积金属的质量可以根据法拉第定律得到。对于一个电荷数为 $z$ 的金属离子，其沉积质量为\n$$\nm=\\frac{M_{Zn}}{zF}\\int_{0}^{T} I(t)\\,dt,\n$$\n其中 $M_{Zn}$ 是锌的摩尔质量，$F$ 是法拉第常数，对于半反应 $Zn^{2+}+2e^{-}\\rightarrow Zn(s)$，$z=2$。\n\n给定 $I(t)=I_{0}\\exp(-t/\\tau)$，通过的总电荷量为\n$$\nQ=\\int_{0}^{T} I(t)\\,dt=\\int_{0}^{T} I_{0}\\exp\\!\\left(-\\frac{t}{\\tau}\\right) dt\n= I_{0}\\tau\\left[1-\\exp\\!\\left(-\\frac{T}{\\tau}\\right)\\right].\n$$\n因此，\n$$\nm=\\frac{M_{Zn}}{2F}\\,I_{0}\\tau\\left[1-\\exp\\!\\left(-\\frac{T}{\\tau}\\right)\\right].\n$$\n\n代入给定值 $I_{0}=5.00\\ \\text{A}$，$\\tau=600\\ \\text{s}$，$T=1800\\ \\text{s}$，$F=96485\\ \\text{C}\\cdot\\text{mol}^{-1}$ 和 $M_{Zn}=65.38\\ \\text{g}\\cdot\\text{mol}^{-1}$：\n$$\nQ=5.00\\times 600\\left[1-\\exp\\!\\left(-\\frac{1800}{600}\\right)\\right]\n=3000\\left[1-\\exp(-3)\\right]\\ \\text{C}.\n$$\n数值上，\n$$\n\\exp(-3)\\approx 0.049787,\\quad 1-\\exp(-3)\\approx 0.950213,\n$$\n所以\n$$\nQ\\approx 3000\\times 0.950213=2850.639\\ \\text{C}.\n$$\n沉积的锌的摩尔数为\n$$\nn_{Zn}=\\frac{Q}{2F}=\\frac{2850.639}{2\\times 96485}\\ \\text{mol}\\approx 0.014772.\n$$\n因此，镀上的锌的质量为\n$$\nm=n_{Zn}M_{Zn}\\approx 0.014772\\times 65.38\\ \\text{g}\\approx 0.965822\\ \\text{g}.\n$$\n四舍五入到三位有效数字，得到 $0.966$ 克。",
            "answer": "$$\\boxed{0.966}$$"
        },
        {
            "introduction": "本练习是连接理论电化学与计算电池模拟的桥梁，也是本章的重点。物理定律是连续的，但计算机仿真是离散的。这个高级实践要求您将法拉第定律在一个时间离散的框架中进行数值实现，并量化离散化带来的数值误差，从而深刻理解在自动化电池设计中将连续物理模型转化为离散计算模型时所面临的核心挑战。",
            "id": "3913658",
            "problem": "考虑在自动化电池设计背景下，关于电荷转移和电极质量变化的一维、时间离散的电化学仿真。其基本依据是电流和电荷之间的关系 $I(t)=\\frac{dQ}{dt}$，以及法拉第第一电解定律。该定律指出，沉积或溶解的质量 $m(t)$ 与转移的电荷成正比，即 $m(t)=\\nu Q(t)$，其中 $\\nu=\\frac{M\\,\\eta}{z\\,F}$，$M$ 是摩尔质量（单位：$\\mathrm{kg/mol}$），$z$ 是电荷数（无量纲），$F$ 是法拉第常数（单位：$\\mathrm{C/mol}$），$\\eta$ 是库仑效率（无量纲）。离散仿真通过显式格式 $Q^{n+1}=Q^{n}+I^{n}\\Delta t$ 来推进电荷计算，其中 $I^{n}=I(t_n)$，$t_n=n\\,\\Delta t$，$\\Delta t$ 是时间步长。在时间范围 $[0,T]$ 内，精确的连续时间电荷满足 $Q(T)=Q(0)+\\int_{0}^{T}I(t)\\,dt$，而经过 $N=\\frac{T}{\\Delta t}$ 步后的离散估计值为 $Q^N=Q^0+\\sum_{n=0}^{N-1}I(t_n)\\,\\Delta t$。目标量是绝对质量误差 $E_m=\\left|m(T)-m^N\\right|=\\nu\\,\\left|\\int_{0}^{T}I(t)\\,dt-\\sum_{n=0}^{N-1}I(t_n)\\,\\Delta t\\right|$。\n\n您的任务是，在给定 $I(t)$ 的情况下，从第一性原理推导出 $E_m$ 的算法计算过程，并将其实现为一个完整的、可运行的程序。您必须仅使用基本关系 $I(t)=\\frac{dQ}{dt}$ 和 $m(t)=\\nu Q(t)$，不得引入绕过推导的简化公式。待分析的电流波形形式如下：\n$$\nI(t)=I_0+\\sum_{k=1}^{K}A_k\\,\\sin\\!\\big(\\omega_k t+\\phi_k\\big),\n$$\n其中 $I_0$ 的单位是 $\\mathrm{A}$，$A_k$ 的单位是 $\\mathrm{A}$，$\\omega_k$ 的单位是 $\\mathrm{rad/s}$，$\\phi_k$ 的单位是 $\\mathrm{rad}$。角度必须以弧度处理，时间 $t$ 的单位是 $\\mathrm{s}$，质量的单位是 $\\mathrm{kg}$。假设 $Q(0)=Q^0=0$ 且 $m(0)=m^0=0$。\n\n设计一个程序，为每个指定的测试用例计算：\n- 通过对 $I(t)$ 进行时间积分得到的精确电荷 $Q(T)$，\n- 通过左黎曼和（由 $Q^{n+1}=Q^{n}+I(t_n)\\Delta t$ 定义）得到的离散电荷 $Q^N$，\n- 绝对质量误差 $E_m=\\nu\\,|Q(T)-Q^N|$。\n\n使用以下锂沉积的材料常数：$M=6.94\\times 10^{-3}$（单位：$\\mathrm{kg/mol}$），$z=1$，$F=96485$（单位：$\\mathrm{C/mol}$），以及 $\\eta=1$。\n\n测试套件（所有角度单位为弧度，所有时间单位为 $\\mathrm{s}$）：\n- 用例 $1$（理想情况，恒定电流）：$I_0=1.234$，$K=0$（无正弦项），$\\Delta t=0.1$，$T=10.0$。\n- 用例 $2$（平滑变化，中等频率）：$I_0=2.0$，$K=1$，$A_1=1.0$，$\\omega_1=50.0$，$\\phi_1=0.0$，$\\Delta t=0.005$，$T=0.5$。\n- 用例 $3$（相对于步长的快速变化，易产生混叠）：$I_0=2.0$，$K=1$，$A_1=2.0$，$\\omega_1=500.0$，$\\phi_1=0.7$，$\\Delta t=0.01$，$T=0.2$。\n- 用例 $4$（多频率快速变化）：$I_0=1.5$，$K=2$，$A_1=0.5$ ，$\\omega_1=500.0$ ，$\\phi_1=0.3$ ，$A_2=0.2$ ，$\\omega_2=4500.0$ ，$\\phi_2=1.0$ ，$\\Delta t=0.00075$ ，$T=0.3$。\n\n程序输出规范：\n- 对每个用例，计算 $E_m$（单位：$\\mathrm{kg}$）。\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。列表中的每个条目都是一个十进制数，四舍五入到九位有效数字（单位：$\\mathrm{kg}$），并按 $\\big[E_{m,1},E_{m,2},E_{m,3},E_{m,4}\\big]$ 的顺序排列。\n\n不要读取任何输入；请将测试套件硬编码。实现必须仅依赖于已定义的物理定律，并应具有普遍可理解性和可验证性。确保整个过程中单位和数值的科学真实性与内部一致性。",
            "solution": "问题陈述经过严格审查，被确定为有效。它在科学上基于电化学原理（法拉第定律）和数值分析（用于积分的欧拉法），定义和参数完整一致，问题设定适定，且表述客观。任务是推导并实现一种计算方法，以求出由时间离散化引起的质量沉积数值误差。\n\n求解过程从所提供的第一性原理出发。在电极上沉积或溶解的物质质量 $m(t)$ 与通过系统的总电荷 $Q(t)$ 成正比：\n$$\nm(t) = \\nu Q(t)\n$$\n比例常数 $\\nu$ 由 $\\nu = \\frac{M\\eta}{zF}$ 给出，其中 $M$ 是物质的摩尔质量（单位：$\\mathrm{kg/mol}$），$\\eta$ 是无量纲的库仑效率，$z$ 是该物质离子的电荷数，$F$ 是法拉第常数（单位：$\\mathrm{C/mol}$）。\n\n电荷 $Q(t)$ 是电流 $I(t)$ 的时间积分，由关系式 $I(t) = \\frac{dQ}{dt}$ 定义。根据问题中指定的初始条件 $Q(0)=0$，在时间 $T$ 的精确电荷由以下定积分给出：\n$$\nQ(T) = \\int_0^T I(\\tau) d\\tau\n$$\n电流 $I(t)$ 被指定为一个恒定分量和一系列正弦分量之和：\n$$\nI(t)=I_0+\\sum_{k=1}^{K}A_k\\,\\sin\\!\\big(\\omega_k t+\\phi_k\\big)\n$$\n为求得精确电荷 $Q(T)$，我们将 $I(t)$ 从 $t=0$ 积分到 $t=T$：\n$$\nQ(T) = \\int_0^T \\left( I_0+\\sum_{k=1}^{K}A_k\\,\\sin\\!\\big(\\omega_k t+\\phi_k\\big) \\right) dt\n$$\n根据积分的线性性质，我们可以逐项积分：\n$$\nQ(T) = \\int_0^T I_0 dt + \\sum_{k=1}^{K} \\int_0^T A_k\\,\\sin\\!\\big(\\omega_k t+\\phi_k\\big) dt\n$$\n常数项的积分为：\n$$\n\\int_0^T I_0 dt = I_0 T\n$$\n每个正弦项的积分为：\n$$\n\\int_0^T A_k\\,\\sin\\!\\big(\\omega_k t+\\phi_k\\big) dt = A_k \\left[ -\\frac{1}{\\omega_k} \\cos(\\omega_k t + \\phi_k) \\right]_0^T = A_k \\left( \\left(-\\frac{\\cos(\\omega_k T + \\phi_k)}{\\omega_k}\\right) - \\left(-\\frac{\\cos(\\phi_k)}{\\omega_k}\\right) \\right) = \\frac{A_k}{\\omega_k} \\left( \\cos(\\phi_k) - \\cos(\\omega_k T + \\phi_k) \\right)\n$$\n将这些结果合并，得到精确总电荷 $Q(T)$ 的解析表达式：\n$$\nQ(T) = I_0 T + \\sum_{k=1}^{K} \\frac{A_k}{\\omega_k} \\left( \\cos(\\phi_k) - \\cos(\\omega_k T + \\phi_k) \\right)\n$$\n时间 $T$ 对应的精确质量为 $m(T) = \\nu Q(T)$。\n\n接下来，我们评估电荷的离散近似值 $Q^N$。问题定义了一个使用显式格式 $Q^{n+1}=Q^{n}+I^{n}\\Delta t$ 的离散时间仿真，其中 $Q^0=0$。这等同于电流积分的左黎曼和。经过 $N$ 步后，其中 $N=T/\\Delta t$ 且 $t_n=n\\,\\Delta t$，累积电荷 $Q^N$ 为：\n$$\nQ^N = Q^0 + \\sum_{n=0}^{N-1} I(t_n) \\Delta t\n$$\n给定 $Q^0=0$，该式简化为：\n$$\nQ^N = \\Delta t \\sum_{n=0}^{N-1} I(t_n) = \\Delta t \\sum_{n=0}^{N-1} \\left( I_0+\\sum_{k=1}^{K}A_k\\,\\sin\\!\\big(\\omega_k t_n+\\phi_k\\big) \\right)\n$$\n相应的近似质量为 $m^N = \\nu Q^N$。这个求和将通过数值计算完成。\n\n目标量是绝对质量误差 $E_m$，定义为精确质量 $m(T)$ 与离散近似质量 $m^N$ 之间的绝对差：\n$$\nE_m = |m(T) - m^N| = |\\nu Q(T) - \\nu Q^N| = \\nu |Q(T) - Q^N|\n$$\n计算每个测试用例 $E_m$ 的算法如下：\n$1$. 使用提供的锂参数计算电化学比例常数 $\\nu = \\frac{M\\eta}{zF}$：$M=6.94\\times 10^{-3}\\,\\mathrm{kg/mol}$，$\\eta=1$，$z=1$，$F=96485\\,\\mathrm{C/mol}$。\n$2$. 对每个由参数 $I_0$, $K$, $\\{A_k, \\omega_k, \\phi_k\\}_{k=1}^K$, $\\Delta t$ 和 $T$ 指定的测试用例：\n    a. 使用推导出的解析公式计算精确电荷 $Q(T)$。\n    b. 计算离散步数 $N = \\frac{T}{\\Delta t}$。\n    c. 生成离散时间点 $t_n = n \\Delta t$（$n = 0, 1, \\ldots, N-1$）。\n    d. 计算这些时间点上的离散电流值 $I(t_n)$。\n    e. 通过对所有 $n$ 求和 $I(t_n) \\Delta t$ 来计算近似电荷 $Q^N$。\n    f. 计算绝对质量误差 $E_m = \\nu |Q(T) - Q^N|$。\n\n此过程在提供的 Python 程序中实现。该程序定义了常数和测试用例，然后遍历它们，对每个用例执行上述计算。它使用 `numpy` 库进行高效的数值计算。最终结果按照要求格式化为九位有效数字。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the absolute mass error for electrochemical deposition\n    for several test cases based on Faraday's laws.\n    \"\"\"\n    # Material and physical constants\n    M_LITHIUM = 6.94e-3  # Molar mass of Lithium (kg/mol)\n    Z_LITHIUM = 1        # Charge number of Li+\n    F_FARADAY = 96485    # Faraday constant (C/mol)\n    ETA_COULOMBIC = 1.0  # Coulombic efficiency\n\n    # Calculate the electrochemical proportionality constant nu\n    nu = (M_LITHIUM * ETA_COULOMBIC) / (Z_LITHIUM * F_FARADAY)\n\n    # Test cases from the problem statement.\n    # Format: (I0, list_of_A, list_of_omega, list_of_phi, dt, T)\n    test_cases = [\n        # Case 1: Constant current\n        (1.234, [], [], [], 0.1, 10.0),\n        # Case 2: Smooth variation\n        (2.0, [1.0], [50.0], [0.0], 0.005, 0.5),\n        # Case 3: Rapid variation, aliasing-prone\n        (2.0, [2.0], [500.0], [0.7], 0.01, 0.2),\n        # Case 4: Multi-frequency rapid variation\n        (1.5, [0.5, 0.2], [500.0, 4500.0], [0.3, 1.0], 0.00075, 0.3),\n    ]\n\n    results = []\n    for case in test_cases:\n        I0, A_k_list, omega_k_list, phi_k_list, dt, T = case\n        \n        # --- 1. Calculate Exact Charge Q(T) ---\n        # Contribution from the constant term I0\n        Q_T = I0 * T\n        \n        # Contribution from sinusoidal terms\n        for k in range(len(A_k_list)):\n            A_k = A_k_list[k]\n            omega_k = omega_k_list[k]\n            phi_k = phi_k_list[k]\n            # Assumes omega_k is not zero.\n            term = (A_k / omega_k) * (np.cos(phi_k) - np.cos(omega_k * T + phi_k))\n            Q_T += term\n            \n        # --- 2. Calculate Discrete Charge Q^N ---\n        # Number of steps N. Ensure it's an integer.\n        N = int(round(T / dt))\n        \n        # Generate time points t_n for n=0 to N-1\n        t_n = np.arange(0, N) * dt\n        \n        # Calculate current I(t_n) at each time point\n        I_n = I0\n        for k in range(len(A_k_list)):\n            A_k = A_k_list[k]\n            omega_k = omega_k_list[k]\n            phi_k = phi_k_list[k]\n            I_n += A_k * np.sin(omega_k * t_n + phi_k)\n            \n        # Calculate discrete charge Q^N using left Riemann sum\n        Q_N = np.sum(I_n) * dt\n        \n        # --- 3. Calculate Absolute Mass Error E_m ---\n        E_m = nu * abs(Q_T - Q_N)\n        results.append(E_m)\n\n    # Format output to 9 significant digits and print\n    formatted_results = ['{:.9g}'.format(r) for r in results]\n    print(f\"[{','.join(formatted_results)}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "At the heart of current imbalance is the simple fact that no two battery cells are perfectly identical. This first exercise grounds our understanding in fundamental circuit theory, asking you to model the initial current that flows when two cells with different open-circuit voltages and internal resistances are connected in parallel . By deriving this from first principles, you will solidify your understanding of how state-of-charge and resistance variations are the primary drivers of spontaneous cell-to-cell balancing.",
            "id": "3902675",
            "problem": "Two electrochemical cells, hereafter referred to as cell $1$ and cell $2$, are initially isolated and then connected in parallel at time $t=0$ via an ideal, zero-resistance switch. Each cell is represented by a Thevenin model comprising an ideal voltage source equal to its Open-Circuit Voltage (OCV) and a series ohmic resistance. The Open-Circuit Voltage (OCV) of cell $i$ at its State of Charge (SOC) is denoted $OCV(SOC_i)=V_i$ for $i \\in \\{1,2\\}$, and its series resistance is $R_i>0$. Assume the following:\n- The interconnect and switch resistances are negligible compared to $R_1$ and $R_2$.\n- Parasitic inductances and capacitances, including double-layer capacitance, are negligible, so that on a timescale immediately after connection, the State of Charge (SOC) is unchanged and $V_1$ and $V_2$ remain constant.\n- The cells are connected with like terminals together (positive to positive, negative to negative), so that immediately after connection a redistribution current flows only due to the difference in $V_1$ and $V_2$ through $R_1$ and $R_2$.\n\nDefine the initial redistribution current $I_{red}$ at $t=0^{+}$ to be positive when it flows from cell $1$ to cell $2$ through the positive terminal interconnect. Starting only from Kirchhoff’s Current Law, Kirchhoff’s Voltage Law, and Ohm’s law, derive a closed-form symbolic expression for $I_{red}$ in terms of $V_1$, $V_2$, $R_1$, and $R_2$. Express your final answer in amperes as a single analytic expression (no intermediate equalities).",
            "solution": "The problem statement is subjected to validation.\n\n### Step 1: Extract Givens\n- Two electrochemical cells, cell $1$ and cell $2$.\n- Connection is in parallel at time $t=0$.\n- Each cell is a Thevenin model: ideal voltage source $V_i = OCV(SOC_i)$ and series resistance $R_i>0$ for $i \\in \\{1,2\\}$.\n- Interconnect and switch resistances are negligible.\n- Parasitic inductances and capacitances are negligible.\n- At $t=0^{+}$, SOC is unchanged, and $V_1$ and $V_2$ are constant.\n- Connection is with like terminals together (positive to positive, negative to negative).\n- Initial redistribution current $I_{red}$ at $t=0^{+}$ is positive when it flows from cell $1$ to cell $2$ through the positive terminal interconnect.\n- The derivation must start from Kirchhoff’s Current Law, Kirchhoff’s Voltage Law, and Ohm’s law.\n- The desired output is a closed-form symbolic expression for $I_{red}$ in terms of $V_1$, $V_2$, $R_1$, and $R_2$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded:** The problem is based on the Thevenin equivalent circuit model, a fundamental and standard representation for voltage sources like batteries in circuit analysis. The use of Kirchhoff's laws and Ohm's law is appropriate and constitutes the basis of classical circuit theory. The scenario is a standard problem in electrical engineering and battery management systems. The problem is scientifically sound.\n- **Well-Posed:** The problem provides a complete set of parameters ($V_1$, $V_2$, $R_1$, $R_2$) and a clear circuit configuration. It requests a specific quantity, $I_{red}$, which can be uniquely determined from the given information and physical laws.\n- **Objective:** The problem is stated in precise, technical language, free from ambiguity or subjective content. The sign convention for the current $I_{red}$ is explicitly defined.\n\n### Step 3: Verdict and Action\nThe problem is valid as it is scientifically grounded, well-posed, objective, and self-contained. A rigorous solution can be derived from the provided information and fundamental principles.\n\n### Solution Derivation\nThe problem describes two Thevenin equivalent circuits connected in parallel. Cell $1$ is modeled as an ideal voltage source $V_1$ in series with a resistor $R_1$. Cell $2$ is modeled as an ideal voltage source $V_2$ in series with a resistor $R_2$. The cells are connected with positive terminals together and negative terminals together. This configuration creates a single, closed electrical loop containing both cells. The redistribution current $I_{red}$ flows within this loop.\n\nWe will apply Kirchhoff’s Voltage Law (KVL) to this loop. KVL states that the algebraic sum of the potential differences (voltages) around any closed loop is zero.\n\nLet's define the direction of the current $I_{red}$ in the loop. The problem states that $I_{red}$ is positive when it flows from cell $1$ to cell $2$. This means the current flows out of the positive terminal of cell $1$, through the interconnect, and into the positive terminal of cell $2$. We will assume $I_{red}$ flows in this direction, which corresponds to a clockwise direction if we draw cell $1$ on the left and cell $2$ on the right.\n\nLet's trace the loop starting from the negative terminal of the source $V_1$ and moving in the direction of $I_{red}$ (clockwise):\n\n$1$. Across the voltage source $V_1$: We move from the negative to the positive terminal, which constitutes a voltage rise of $+V_1$.\n$2$. Across the series resistor $R_1$: According to Ohm's law, a current $I_{red}$ flowing through a resistor $R_1$ causes a voltage drop. The potential decreases in the direction of the current, so the change in voltage is $-I_{red}R_1$.\n$3$. Across the voltage source $V_2$: Since the positive terminal of cell $1$ is connected to the positive terminal of cell $2$, the current $I_{red}$ enters the positive terminal of $V_2$ and exits the negative terminal. Traversing the source $V_2$ in the direction of the current means moving from its positive to its negative terminal, which is a voltage drop of $-V_2$.\n$4$. Across the series resistor $R_2$: The current $I_{red}$ continues through resistor $R_2$ back towards the negative terminal of $V_1$. This is in the direction of the current flow, so it results in another voltage drop of $-I_{red}R_2$.\n\nAccording to KVL, the sum of these voltage changes must be zero:\n$$+V_1 - I_{red}R_1 - V_2 - I_{red}R_2 = 0$$\n\nNow, we must solve this equation for $I_{red}$. We can group the terms involving $I_{red}$:\n$$V_1 - V_2 = I_{red}R_1 + I_{red}R_2$$\n\nFactoring out $I_{red}$ on the right-hand side gives:\n$$V_1 - V_2 = I_{red}(R_1 + R_2)$$\n\nFinally, dividing by the total series resistance of the loop, $(R_1 + R_2)$, yields the expression for the redistribution current $I_{red}$:\n$$I_{red} = \\frac{V_1 - V_2}{R_1 + R_2}$$\n\nThis expression is in terms of the given quantities $V_1$, $V_2$, $R_1$, and $R_2$, as required. The sign of $I_{red}$ is correctly determined by the relative magnitudes of $V_1$ and $V_2$. If $V_1 > V_2$, $I_{red}$ is positive, indicating current flow from cell $1$ to cell $2$. If $V_2 > V_1$, $I_{red}$ is negative, indicating current flow from cell $2$ to cell $1$, consistent with the definition provided.",
            "answer": "$$\\boxed{\\frac{V_1 - V_2}{R_1 + R_2}}$$"
        },
        {
            "introduction": "A static, DC model provides a good starting point, but real-world battery systems are dynamic. This practice introduces the electrochemical double-layer capacitance, a key element in a cell's transient response, to explore how current splits during a step change in load . You will discover that the current distribution is time-dependent, initially governed by resistances and eventually by capacitances, and learn to identify the conditions that cause a current 'overshoot' in one cell.",
            "id": "3902722",
            "problem": "Consider two lithium-ion cells connected in parallel and driven by an imposed step current $I(t)=I_0 u(t)$, where $u(t)$ is the unit step and $I_0>0$ is constant. Each cell branch $i\\in\\{1,2\\}$ is modeled by an ohmic series resistance $R_{s,i}$ followed by an Electrochemical Double-Layer Capacitance (DLC) $C_{dl,i}$ shunting to the common negative terminal (ground). Assume no additional kinetics (e.g., charge-transfer resistance), negligible stray inductance and parasitic capacitance, and equal open-circuit potentials such that both branches share a common top-node voltage $v_A(t)$. The capacitors are initially uncharged, i.e., $v_{C,i}(0)=0$ for $i=1,2$.\n\nUsing Kirchhoff’s Current Law (KCL), Ohm’s law, and the capacitor constitutive relation $i(t)=C\\,dv/dt$, derive from first principles the closed-form time-domain expression for the branch-$1$ current $i_1(t)$ for $t\\ge 0$. Clearly state the initial and long-time limits of $i_1(t)$ and interpret the condition under which $i_1(t)$ exhibits a transient overshoot relative to its long-time value due to the capacitive dynamics.\n\nProvide the final expression for $i_1(t)$ in its simplified analytic form. If you were to evaluate the expression numerically, express current in amperes. Do not substitute numerical values; the required final answer is the symbolic expression for $i_1(t)$ only.",
            "solution": "### Step 1: Extract Givens\n- **Circuit Configuration**: Two lithium-ion cells connected in parallel.\n- **Input Current**: A step current $I(t) = I_0 u(t)$, where $u(t)$ is the unit step function and $I_0 > 0$ is a constant.\n- **Cell Model**: Each branch $i \\in \\{1, 2\\}$ is modeled as a series circuit of an ohmic resistance $R_{s,i}$ and a double-layer capacitance $C_{dl,i}$.\n- **Node Voltage**: Both branches share a common top-node voltage $v_A(t)$.\n- **Initial Conditions**: Capacitors are initially uncharged, $v_{C,i}(0) = 0$ for $i=1, 2$.\n- **Assumptions**: No charge-transfer resistance, negligible stray inductance, and negligible parasitic capacitance.\n- **Required Task**:\n    1. Derive the closed-form time-domain expression for the branch-$1$ current $i_1(t)$ for $t \\ge 0$.\n    2. State the initial ($t \\to 0^+$) and long-time ($t \\to \\infty$) limits of $i_1(t)$.\n    3. Interpret the condition for $i_1(t)$ to exhibit a transient overshoot.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded**: The problem is based on fundamental principles of linear circuit theory (Kirchhoff's laws, Ohm's law, capacitor behavior). The RC circuit is a standard first-order model for the transient electrical response of electrochemical cells. The setup is scientifically sound.\n- **Well-Posed**: The problem provides a complete description of the circuit, the input stimulus, and the initial conditions. There are no ambiguities or contradictions. A unique, stable solution for the branch current exists.\n- **Objective**: The problem is stated using precise, objective, and formal scientific language.\n\n### Step 3: Verdict and Action\nThe problem is valid. The solution process will now proceed.\n\nThe circuit consists of a current source $I(t)$ feeding two parallel branches. For $t \\ge 0$, the total current is a constant $I_0$. Branch $1$ contains a resistor $R_{s,1}$ in series with a capacitor $C_{dl,1}$. Branch $2$ contains a resistor $R_{s,2}$ in series with a capacitor $C_{dl,2}$. The initial voltages across the capacitors are zero. We seek to find the current $i_1(t)$ through branch $1$.\n\nThis problem describes a linear time-invariant (LTI) system, which is most efficiently solved using the Laplace transform method.\n\nIn the Laplace domain, the input current is $I(s) = \\mathcal{L}\\{I_0 u(t)\\} = \\frac{I_0}{s}$.\nThe impedance of branch $1$ is $Z_1(s) = R_{s,1} + \\frac{1}{sC_{dl,1}}$.\nThe impedance of branch $2$ is $Z_2(s) = R_{s,2} + \\frac{1}{sC_{dl,2}}$.\nThe zero initial conditions on the capacitors mean we do not need to include any initial condition voltage sources in the s-domain model.\n\nThe current $I_1(s) = \\mathcal{L}\\{i_1(t)\\}$ can be found using the current divider rule for parallel impedances:\n$$\nI_1(s) = I(s) \\frac{Z_2(s)}{Z_1(s) + Z_2(s)}\n$$\nSubstituting the expressions for $I(s)$, $Z_1(s)$, and $Z_2(s)$:\n$$\nI_1(s) = \\frac{I_0}{s} \\frac{R_{s,2} + \\frac{1}{sC_{dl,2}}}{\\left(R_{s,1} + \\frac{1}{sC_{dl,1}}\\right) + \\left(R_{s,2} + \\frac{1}{sC_{dl,2}}\\right)}\n$$\nTo simplify, we multiply the numerator and denominator of the impedance fraction by $s$:\n$$\nI_1(s) = \\frac{I_0}{s} \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s(R_{s,1} + R_{s,2}) + \\left(\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}\\right)}\n$$\n$$\nI_1(s) = I_0 \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s\\left[s(R_{s,1} + R_{s,2}) + \\left(\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}\\right)\\right]}\n$$\nLet's factor out $(R_{s,1} + R_{s,2})$ from the bracketed term in the denominator:\n$$\nI_1(s) = \\frac{I_0}{R_{s,1} + R_{s,2}} \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s\\left[s + \\frac{\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}}{R_{s,1} + R_{s,2}}\\right]}\n$$\nThis expression has the form $\\frac{N(s)}{s(s+a)}$. We can perform a partial fraction expansion:\n$$\nI_1(s) = \\frac{A}{s} + \\frac{B}{s + \\frac{1}{\\tau}}\n$$\nwhere the system time constant $\\tau$ is defined as:\n$$\n\\tau = \\frac{R_{s,1} + R_{s,2}}{\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}} = (R_{s,1} + R_{s,2})\\frac{C_{dl,1}C_{dl,2}}{C_{dl,1} + C_{dl,2}}\n$$\nThe coefficients $A$ and $B$ are found as follows:\n$$\nA = \\lim_{s \\to 0} s I_1(s) = \\lim_{s \\to 0} I_0 \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s(R_{s,1} + R_{s,2}) + \\left(\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}\\right)} = I_0 \\frac{\\frac{1}{C_{dl,2}}}{\\frac{1}{C_{dl,1}} + \\frac{1}{C_{dl,2}}}\n$$\n$$\nA = I_0 \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}}\n$$\nThis coefficient $A$ corresponds to the final (steady-state) value of the current $i_1(t)$, as $A = \\lim_{t \\to \\infty} i_1(t)$.\n\nThe coefficient $B$ is found using the cover-up method:\n$$\nB = \\lim_{s \\to -1/\\tau} (s+1/\\tau) I_1(s) = \\lim_{s \\to -1/\\tau} \\frac{I_0}{R_{s,1} + R_{s,2}} \\frac{sR_{s,2} + \\frac{1}{C_{dl,2}}}{s}\n$$\n$$\nB = \\frac{I_0}{R_{s,1} + R_{s,2}} \\frac{(-1/\\tau)R_{s,2} + \\frac{1}{C_{dl,2}}}{-1/\\tau} = \\frac{I_0}{R_{s,1} + R_{s,2}} \\left( R_{s,2} - \\frac{\\tau}{C_{dl,2}} \\right)\n$$\nSubstituting the expression for $\\tau$:\n$$\nB = \\frac{I_0}{R_{s,1} + R_{s,2}} \\left( R_{s,2} - \\frac{(R_{s,1} + R_{s,2})C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right) = I_0 \\left( \\frac{R_{s,2}}{R_{s,1} + R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right)\n$$\nThe term $\\frac{I_0 R_{s,2}}{R_{s,1} + R_{s,2}}$ represents the initial current $i_1(0^+)$, determined by the initial resistive current division.\nSo, $I_1(s)$ is:\n$$\nI_1(s) = I_0 \\left( \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) \\frac{1}{s} + I_0 \\left( \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) \\frac{1}{s + 1/\\tau}\n$$\nTaking the inverse Laplace transform for $t \\ge 0$:\n$$\ni_1(t) = I_0 \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} + I_0 \\left( \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) \\exp\\left(-\\frac{t}{\\tau}\\right)\n$$\nSubstituting the full expression for $1/\\tau$:\n$$\ni_1(t) = I_0 \\left( \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} + \\left( \\frac{R_{s,2}}{R_{s,1} + R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right) \\exp\\left( -t \\frac{C_{dl,1} + C_{dl,2}}{(R_{s,1} + R_{s,2})C_{dl,1}C_{dl,2}} \\right) \\right)\n$$\nThis is the closed-form time-domain expression for $i_1(t)$.\n\nNow, we analyze the limits and the condition for overshoot.\n**Initial Limit ($t \\to 0^+$)**:\nAs $t \\to 0^+$, the exponential term becomes $\\exp(0) = 1$.\n$$\ni_1(0^+) = I_0 \\left( \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} + \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}} \\right) = I_0 \\frac{R_{s,2}}{R_{s,1}+R_{s,2}}\n$$\nPhysically, at the instant the current is applied ($t=0^+$), the capacitor voltages are still zero ($v_{C,i}(0^+)=v_{C,i}(0)=0$). They act as short circuits to changes in current. Therefore, the total current $I_0$ splits between the two parallel branches according to the resistive current divider rule.\n\n**Long-Time Limit ($t \\to \\infty$)**:\nAs $t \\to \\infty$, the exponential term decays to zero ($\\exp(-\\infty) \\to 0$).\n$$\ni_1(\\infty) = I_0 \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}}\n$$\nPhysically, for a constant current input, the voltage across the parallel combination, $v_A(t)$, increases indefinitely. For large $t$, $v_A(t) \\approx v_{C1}(t) \\approx v_{C2}(t)$. For the capacitor voltages to remain equal while charging, their rates of change must be equal: $\\frac{dv_{C1}}{dt} = \\frac{dv_{C2}}{dt}$. Since $i = C \\frac{dv_C}{dt}$, this implies $\\frac{i_1(t)}{C_{dl,1}} = \\frac{i_2(t)}{C_{dl,2}}$. Using $i_1+i_2=I_0$, we solve for $i_1$ to get the capacitive current divider rule, which gives the long-time limit.\n\n**Condition for Transient Overshoot**:\nA transient overshoot occurs if the initial current $i_1(0^+)$ is greater than the final steady-state current $i_1(\\infty)$.\n$$\ni_1(0^+) > i_1(\\infty)\n$$\n$$\nI_0 \\frac{R_{s,2}}{R_{s,1}+R_{s,2}} > I_0 \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}}\n$$\nSince $I_0 > 0$ and all resistances and capacitances are positive, we can simplify this inequality:\n$$\n\\frac{R_{s,2}}{R_{s,1}+R_{s,2}} > \\frac{C_{dl,1}}{C_{dl,1}+C_{dl,2}}\n$$\nCross-multiplying gives:\n$$\nR_{s,2}(C_{dl,1}+C_{dl,2}) > C_{dl,1}(R_{s,1}+R_{s,2})\n$$\n$$\nR_{s,2}C_{dl,1} + R_{s,2}C_{dl,2} > C_{dl,1}R_{s,1} + C_{dl,1}R_{s,2}\n$$\n$$\nR_{s,2}C_{dl,2} > R_{s,1}C_{dl,1}\n$$\nThis elegantly simple condition states that an overshoot in the current of branch $1$ occurs if the intrinsic RC time constant of branch $2$ ($\\tau_2 = R_{s,2}C_{dl,2}$) is greater than the intrinsic RC time constant of branch $1$ ($\\tau_1 = R_{s,1}C_{dl,1}$). This means branch $1$ takes on a larger share of the current initially (due to its relative resistive properties) than it can sustain in the long run (when capacitive properties dominate the division).",
            "answer": "$$\n\\boxed{\nI_0 \\left( \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} + \\left( \\frac{R_{s,2}}{R_{s,1} + R_{s,2}} - \\frac{C_{dl,1}}{C_{dl,1} + C_{dl,2}} \\right) \\exp\\left( -t \\frac{C_{dl,1} + C_{dl,2}}{(R_{s,1} + R_{s,2})C_{dl,1}C_{dl,2}} \\right) \\right)\n}\n$$"
        },
        {
            "introduction": "Perhaps the most critical interaction in a battery module is the coupling between its electrical and thermal states. In this final practice, you will develop a model to investigate how non-uniform cooling can lead to a dangerous positive feedback loop, where higher currents cause higher temperatures, which in turn can alter resistance and further exacerbate the imbalance . This exercise highlights the necessity of integrated electro-thermal design and demonstrates how a seemingly stable system can become unstable due to these coupled effects.",
            "id": "3902728",
            "problem": "You are tasked with deriving and implementing a physically consistent model for the steady-state thermal-electrical interaction in a three-cell parallel module used in automated battery design and simulation. You must compute the steady-state temperature rise and the resulting current split among three parallel cells that have identical internal resistance at ambient temperature but different thermal conductance to ambient. The scenario is to be modeled using first principles and well-established relationships in electrothermal systems.\n\nAssume three cells indexed by $i \\in \\{1,2,3\\}$ connected in parallel delivering a specified total current. Each cell is modeled as:\n- A lumped electrical resistor with temperature-dependent resistance $R_i(T)$.\n- A lumped thermal node with steady convective heat removal parameterized by the product of convection coefficient and area $hA_i$.\n\nUse the following base relationships and definitions:\n- Joule heating: For a cell with current $I_i$ and resistance $R_i(T_i)$, the heat generation rate is $P_i = I_i^2 R_i(T_i)$.\n- Steady-state thermal balance: The heat transfer to ambient at steady state is $Q_i = hA_i \\Delta T_i$, where $\\Delta T_i = T_i - T_{amb}$ is the steady-state temperature rise.\n- Temperature dependence of resistance with a linear temperature coefficient: $R_i(T_i) = R_0 \\left(1 + \\alpha \\left(T_i - T_{amb}\\right)\\right)$, where $R_0$ is the common reference resistance at ambient temperature and $\\alpha$ is the temperature coefficient.\n- Parallel connection electrical constraint: All cells share the same terminal voltage drop $V$, and currents must satisfy $V = I_i R_i(T_i)$ for each $i$.\n- Current conservation: $I_1 + I_2 + I_3 = I_{tot}$.\n\nStarting from these relationships, derive the governing equations to compute both the steady-state temperature rises $\\Delta T_i$ and the current split $\\{I_1, I_2, I_3\\}$ for a given total pack current $I_{tot}$ and ambient temperature $T_{amb}$. Express $\\Delta T_i$ in $\\mathrm{K}$ and the currents $I_i$ in $\\mathrm{A}$.\n\nThe final program must compute the solution for the following test suite of parameter sets. Each parameter set is a tuple containing $(R_0,\\alpha,hA_1,hA_2,hA_3,I_{tot},T_{amb})$ with units specified as $\\Omega$, $\\mathrm{K}^{-1}$, $\\mathrm{W}/\\mathrm{K}$, $\\mathrm{W}/\\mathrm{K}$, $\\mathrm{W}/\\mathrm{K}$, $\\mathrm{A}$, and $\\mathrm{K}$ respectively:\n- Test case $1$ (general case, asymmetric cooling): $(R_0 = 0.002,\\ \\alpha = 0.003,\\ hA_1 = 1.0,\\ hA_2 = 1.2,\\ hA_3 = 0.8,\\ I_{tot} = 180.0,\\ T_{amb} = 298.15)$.\n- Test case $2$ (no temperature dependence, $\\alpha = 0$): $(R_0 = 0.002,\\ \\alpha = 0.0,\\ hA_1 = 1.0,\\ hA_2 = 1.2,\\ hA_3 = 0.8,\\ I_{tot} = 180.0,\\ T_{amb} = 298.15)$.\n- Test case $3$ (identical thermal paths): $(R_0 = 0.002,\\ \\alpha = 0.003,\\ hA_1 = 1.0,\\ hA_2 = 1.0,\\ hA_3 = 1.0,\\ I_{tot} = 180.0,\\ T_{amb} = 298.15)$.\n- Test case $4$ (high asymmetry, moderate current): $(R_0 = 0.002,\\ \\alpha = 0.003,\\ hA_1 = 0.6,\\ hA_2 = 1.8,\\ hA_3 = 1.2,\\ I_{tot} = 150.0,\\ T_{amb} = 298.15)$.\n\nYour program must:\n- Derive the necessary equations from the stated fundamental base.\n- Numerically solve for the shared terminal voltage $V$ and the currents $I_i$ that satisfy the parallel connection constraints and thermal steady-state.\n- Compute the steady-state temperature rises $\\Delta T_i$ using the energy balance.\n- Return results for each test case as a list in the form $[\\Delta T_1,\\Delta T_2,\\Delta T_3,I_1,I_2,I_3]$ with each value expressed as a decimal. Aggregate the results for all test cases into a single line of output containing a comma-separated list enclosed in square brackets, where each element is itself the list for that test case. For example, produce an output of the form $[[x_{11},x_{12},x_{13},x_{14},x_{15},x_{16}],[x_{21},x_{22},x_{23},x_{24},x_{25},x_{26}],\\ldots]$.\n\nExpress the temperature rises in $\\mathrm{K}$ and the currents in $\\mathrm{A}$, each rounded to six decimal places. Angles are not involved. No percentages are involved; all values must be decimals.",
            "solution": "We begin with three parallel cells indexed by $i \\in \\{1,2,3\\}$, each with identical ambient resistance $R_0$ and linear temperature coefficient $\\alpha$, but distinct thermal conductance to ambient $hA_i$. The ambient temperature is $T_{amb}$ and the total pack current is $I_{tot}$.\n\nWe use the following foundational relationships:\n- Joule heating in a resistor: $P_i = I_i^2 R_i(T_i)$.\n- Steady-state thermal balance (no heat capacity accumulation): $P_i = hA_i \\Delta T_i$, where $\\Delta T_i = T_i - T_{amb}$.\n- Linear temperature dependence of resistance: $R_i(T_i) = R_0 \\left(1 + \\alpha \\Delta T_i\\right)$.\n- Parallel connection with common terminal voltage: $V = I_i R_i(T_i)$ for each $i$.\n- Current conservation: $I_1 + I_2 + I_3 = I_{tot}$.\n\nFrom steady-state thermal balance and Joule heating, equate heat generation and removal:\n$$I_i^2 R_i(T_i) = hA_i \\Delta T_i.$$\nSubstituting the linear resistance model,\n$$I_i^2 R_0 \\left(1 + \\alpha \\Delta T_i\\right) = hA_i \\Delta T_i.$$\nSolve for $\\Delta T_i$ in terms of $I_i$ (algebraic isolation):\n$$I_i^2 R_0 + \\alpha I_i^2 R_0 \\Delta T_i = hA_i \\Delta T_i,$$\n$$(hA_i - \\alpha R_0 I_i^2) \\Delta T_i = R_0 I_i^2,$$\n$$\\Delta T_i = \\frac{R_0 I_i^2}{hA_i - \\alpha R_0 I_i^2}.$$\nThis expression is physically meaningful when the denominator is positive, i.e., $hA_i - \\alpha R_0 I_i^2 > 0$, indicating a stable steady state without thermal runaway.\n\nUsing the parallel condition $V = I_i R_i(T_i)$ with $R_i(T_i) = R_0 \\left(1 + \\alpha \\Delta T_i\\right)$, substitute the expression for $\\Delta T_i$ in terms of $I_i$:\n$$R_i(T_i) = R_0 \\left(1 + \\alpha \\cdot \\frac{R_0 I_i^2}{hA_i - \\alpha R_0 I_i^2}\\right) = R_0 \\cdot \\frac{hA_i}{hA_i - \\alpha R_0 I_i^2}.$$\nHence,\n$$V = I_i \\cdot R_0 \\cdot \\frac{hA_i}{hA_i - \\alpha R_0 I_i^2}.$$\nThis links $V$ and $I_i$ for each cell. Rearranging to an explicit polynomial in $I_i$ for a given $V$,\n$$V \\left(hA_i - \\alpha R_0 I_i^2\\right) = I_i R_0 hA_i,$$\n$$V hA_i - V \\alpha R_0 I_i^2 = I_i R_0 hA_i,$$\n$$V \\alpha R_0 I_i^2 + I_i R_0 hA_i - V hA_i = 0.$$\nThis is a quadratic in $I_i$:\n$$a_i I_i^2 + b_i I_i + c_i = 0,$$\nwith coefficients\n$$a_i = V \\alpha R_0,\\quad b_i = R_0 hA_i,\\quad c_i = - V hA_i.$$\nThe discriminant is\n$$D_i = b_i^2 - 4 a_i c_i = \\left(R_0 hA_i\\right)^2 + 4 V^2 \\alpha R_0 hA_i,$$\nwhich is nonnegative for all $V \\ge 0$, $\\alpha \\ge 0$, $R_0 > 0$, $hA_i > 0$. The physically relevant root is the positive one:\n$$I_i(V) = \\begin{cases} \\frac{V}{R_0}, & \\text{if } \\alpha = 0 \\\\[6pt] \\frac{-b_i + \\sqrt{D_i}}{2 a_i}, & \\text{if } \\alpha > 0 \\end{cases}$$\nThe case $\\alpha = 0$ reduces to $I_i(V) = \\frac{V}{R_0}$ because $V = I_i R_0$ and all three cells are identical electrically; thermal parameters do not affect currents when electrical resistance is temperature independent.\n\nWe must determine $V$ such that the current conservation condition is satisfied:\n$$I_1(V) + I_2(V) + I_3(V) = I_{tot}.$$\nDefine\n$$S(V) = \\sum_{i=1}^{3} I_i(V).$$\nNote that $S(V)$ is a monotonically increasing function in $V$ over $V \\ge 0$ because each $I_i(V)$ increases with $V$ (the coefficients yield an increasing root due to positive discriminant dependence on $V$). For $\\alpha = 0$, $S(V) = \\frac{3 V}{R_0}$ and we obtain explicitly\n$$V^\\star = \\frac{I_{tot} R_0}{3},\\quad I_i^\\star = \\frac{V^\\star}{R_0} = \\frac{I_{tot}}{3}.$$\nFor $\\alpha > 0$, we solve $S(V) = I_{tot}$ numerically via a robust bracketed method such as bisection:\n- Choose $V_{low} = 0$ with $S(V_{low}) = 0$.\n- Increase $V_{high}$ geometrically until $S(V_{high}) \\ge I_{tot}$.\n- Apply bisection on $[V_{low}, V_{high}]$ until convergence to a desired tolerance.\n\nOnce $V^\\star$ is found, compute currents $I_i^\\star = I_i(V^\\star)$ and then steady-state temperature rises with the earlier formula:\n$$\\Delta T_i^\\star = \\begin{cases} \\frac{R_0 \\left(I_i^\\star\\right)^2}{hA_i}, & \\text{if } \\alpha = 0 \\\\[6pt] \\frac{R_0 \\left(I_i^\\star\\right)^2}{hA_i - \\alpha R_0 \\left(I_i^\\star\\right)^2}, & \\text{if } \\alpha > 0 \\end{cases}$$\nThe special case $\\alpha = 0$ comes directly from $I_i^2 R_0 = hA_i \\Delta T_i$.\n\nAlgorithmic steps for each test case:\n- Input $(R_0,\\alpha,hA_1,hA_2,hA_3,I_{tot},T_{amb})$.\n- If $\\alpha = 0$, compute $V^\\star = \\frac{I_{tot} R_0}{3}$, $I_i^\\star = \\frac{V^\\star}{R_0}$ for all $i$, and $\\Delta T_i^\\star = \\frac{R_0 \\left(I_i^\\star\\right)^2}{hA_i}$.\n- If $\\alpha > 0$, define $I_i(V)$ via the quadratic root above, bracket and solve $S(V) = I_{tot}$ via bisection, then compute $I_i^\\star$ and $\\Delta T_i^\\star$.\n- Report $[\\Delta T_1^\\star,\\Delta T_2^\\star,\\Delta T_3^\\star,I_1^\\star,I_2^\\star,I_3^\\star]$ with $\\Delta T_i^\\star$ in $\\mathrm{K}$ and $I_i^\\star$ in $\\mathrm{A}$, each rounded to six decimal places.\n\nEdge cases in the test suite:\n- Test case $2$ validates the $\\alpha = 0$ reduction where currents split equally irrespective of $hA_i$.\n- Test case $3$ uses identical $hA_i$ values to confirm symmetry when thermal paths are equal.\n- Test cases $1$ and $4$ explore asymmetry in thermal conductance leading to different temperature rises and current splits via electrothermal coupling.\n\nThe final program implements the above method for all test cases and prints a single line containing the aggregated results as a comma-separated list enclosed in square brackets, where each element is the list corresponding to one test case. No angles appear; temperatures are rises in $\\mathrm{K}$, and currents are in $\\mathrm{A}$, both as decimals rounded to six places.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef i_of_v(V, R0, alpha, hA):\n    \"\"\"\n    Compute the cell current I as a function of terminal voltage V\n    for a single cell with parameters R0 (Ohm), alpha (1/K),\n    and hA (W/K), using the derived quadratic relation.\n    \"\"\"\n    if alpha == 0.0:\n        # Linear case: V = I * R0\n        return V / R0\n    # Quadratic coefficients: a I^2 + b I + c = 0\n    a = V * alpha * R0\n    b = R0 * hA\n    c = -V * hA\n    # Discriminant (always nonnegative for V>=0, alpha>=0, R0>0, hA>0)\n    D = b * b - 4.0 * a * c  # = b^2 + 4 V^2 alpha R0 hA\n    sqrtD = np.sqrt(D)\n    # Physical positive root\n    I = (-b + sqrtD) / (2.0 * a)\n    return I\n\ndef sum_currents(V, R0, alpha, hA_list):\n    return sum(i_of_v(V, R0, alpha, hA) for hA in hA_list)\n\ndef solve_case(params):\n    \"\"\"\n    params: tuple (R0, alpha, hA1, hA2, hA3, Itot, Tamb)\n    Returns: [dT1, dT2, dT3, I1, I2, I3] with floats rounded to 6 decimals.\n    \"\"\"\n    R0, alpha, hA1, hA2, hA3, Itot, Tamb = params\n    hA_list = [hA1, hA2, hA3]\n\n    if alpha == 0.0:\n        # Closed form for V and currents\n        V_star = Itot * R0 / 3.0\n        I_list = [V_star / R0] * 3\n    else:\n        # Find V_star such that sum_currents(V_star) = Itot using bisection\n        V_low = 0.0\n        # A reasonable initial high bound; escalate if needed\n        V_high = max(Itot * R0, 1e-6)\n        # Ensure upper bound yields sum >= Itot\n        max_iters_expand = 100\n        for _ in range(max_iters_expand):\n            S = sum_currents(V_high, R0, alpha, hA_list)\n            if S >= Itot:\n                break\n            V_high *= 2.0\n        else:\n            # Fallback: if expansion failed, set a very high bound\n            V_high = max(V_high, Itot * R0 * 100.0)\n\n        # Bisection\n        tol = 1e-12\n        max_iters_bisect = 200\n        for _ in range(max_iters_bisect):\n            V_mid = 0.5 * (V_low + V_high)\n            S_mid = sum_currents(V_mid, R0, alpha, hA_list)\n            if abs(S_mid - Itot) < tol:\n                V_star = V_mid\n                break\n            if S_mid < Itot:\n                V_low = V_mid\n            else:\n                V_high = V_mid\n        else:\n            V_star = 0.5 * (V_low + V_high)\n\n        I_list = [i_of_v(V_star, R0, alpha, hA) for hA in hA_list]\n\n    # Compute steady-state temperature rises\n    dT_list = []\n    for I, hA in zip(I_list, hA_list):\n        if alpha == 0.0:\n            dT = (R0 * I * I) / hA\n        else:\n            denom = hA - alpha * R0 * I * I\n            # To maintain physical consistency, denom should be > 0.\n            # If numerical noise causes nonpositive denom, set to NaN.\n            if denom <= 0.0:\n                dT = np.nan\n            else:\n                dT = (R0 * I * I) / denom\n        dT_list.append(dT)\n\n    # Round to six decimal places\n    dT_list_rounded = [float(f\"{dT:.6f}\") if not np.isnan(dT) else float(\"nan\") for dT in dT_list]\n    I_list_rounded = [float(f\"{I:.6f}\") for I in I_list]\n\n    return dT_list_rounded + I_list_rounded\n\ndef solve():\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (0.002, 0.003, 1.0, 1.2, 0.8, 180.0, 298.15),  # Test case 1\n        (0.002, 0.0,   1.0, 1.2, 0.8, 180.0, 298.15),  # Test case 2\n        (0.002, 0.003, 1.0, 1.0, 1.0, 180.0, 298.15),  # Test case 3\n        (0.002, 0.003, 0.6, 1.8, 1.2, 150.0, 298.15),  # Test case 4\n    ]\n\n    results = []\n    for case in test_cases:\n        result = solve_case(case)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    # We print a single line: list of lists, comma-separated, enclosed in square brackets.\n    def format_list(lst):\n        # Ensure fixed formatting of floats with up to six decimals\n        return \"[\" + \",\".join(f\"{x:.6f}\" if isinstance(x, float) and not np.isnan(x) else \"nan\" for x in lst) + \"]\"\n\n    formatted = \"[\" + \",\".join(format_list(res) for res in results) + \"]\"\n    print(formatted)\n\nsolve()\n```"
        }
    ]
}
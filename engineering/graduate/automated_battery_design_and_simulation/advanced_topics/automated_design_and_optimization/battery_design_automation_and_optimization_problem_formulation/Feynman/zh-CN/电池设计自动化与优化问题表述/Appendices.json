{
    "hands_on_practices": [
        {
            "introduction": "在启动任何复杂的自动化设计流程之前，首要且至关重要的一步是界定一个合理且物理上可行的设计空间。本练习将指导您如何运用基本的物理传输原理，例如欧姆定律和菲克扩散定律，为电池设计的关键变量（如电极厚度、孔隙率）设定实际的边界。通过这种方式，我们可以防止优化算法探索物理上不可能或性能极差的区域，从而确保优化问题的良定性（well-posedness）并提高计算效率 。",
            "id": "3894809",
            "problem": "考虑一个锂离子电池 (LIB) 的一维模型，该模型包含一个厚度为 $L_n$ 的多孔负极、一个厚度为 $L_p$ 的多孔正极以及一个厚度为 $L_s$ 的多孔聚合物隔膜。多孔电极的孔隙率分别为 $\\epsilon_n$ 和 $\\epsilon_p$，负极和正极中的特征活性颗粒半径分别为 $R_{p,n}$ 和 $R_{p,p}$。电解质是二元盐溶液，具有均匀的盐浓度 $c_0$。\n\n您的任务是建立输运可行性约束，并利用这些约束来计算设计变量 $\\{L_n, L_p, \\epsilon_n, \\epsilon_p, R_{p,n}, R_{p,p}, L_s, c_0\\}$ 的容许边界，以便用于自动化设计空间枚举。\n\n仅使用以下基本模型和事实：\n\n- 多孔介质中离子传导的欧姆定律：在厚度为 $L$、承载均匀表观电流密度 $j$ 的区域内，电解质相的欧姆压降为 $\\Delta \\phi_e = j L / \\kappa_{\\text{eff}}$。\n- 电解质离子电导率与盐浓度成正比：$\\kappa_e(c_0) = \\kappa_m c_0$，其中 $\\kappa_m$ 是在所关注的浓度范围内已知的比例常数。\n- 孔隙率为 $\\epsilon$ 的多孔区域中的有效离子电导率遵循 Bruggeman 关系式：$\\kappa_{\\text{eff}} = \\kappa_e(c_0)\\,\\epsilon^{b}$，其中 $b$ 为 Bruggeman 指数。\n- 菲克扩散时间尺度：\n  - 颗粒内的固相扩散时间：$t_{\\text{diff},s} = R_p^{2} / D_s$，其中 $D_s$ 为固态锂扩散系数。\n  - 穿过电极的电解质相扩散时间：$t_{\\text{diff},e} = L^{2} / (D_e\\,\\epsilon^{b})$，其中 $D_e$ 是二元电解质扩散系数，$\\epsilon^{b}$ 通过 Bruggeman 关系式来描述曲折度的影响。\n\n为获得稳健的自动化设计空间边界，施加以下输运可行性约束：\n\n1. 电解质欧姆压降预算。将总电解质欧姆压降限制在 $V_e^{\\max}$ 以内；通过将此预算的三分之一分配给每个区域来确保稳健性：\n   - 负极：$j L_n / \\kappa_{\\text{eff},n} \\leq V_e^{\\max}/3$。\n   - 隔膜：$j L_s / \\kappa_{\\text{eff},s} \\leq V_e^{\\max}/3$。\n   - 正极：$j L_p / \\kappa_{\\text{eff},p} \\leq V_e^{\\max}/3$。\n   使用 $\\kappa_{\\text{eff},n} = \\kappa_m c_0 \\epsilon_n^{b}$、$\\kappa_{\\text{eff},p} = \\kappa_m c_0 \\epsilon_p^{b}$ 和 $\\kappa_{\\text{eff},s} = \\kappa_m c_0 \\epsilon_s^{b}$，其中隔膜孔隙率 $\\epsilon_s$ 视为固定值。\n\n2. 活性颗粒内的固相扩散约束。通过要求每个电极中的 $t_{\\text{diff},s} \\leq \\beta\\,t_d$ 来限制浓度梯度，其中 $t_d$ 是放电时间，$\\beta \\in (0,1)$ 是一个设计因子：\n   - 负极：$R_{p,n}^{2} / D_{s,n} \\leq \\beta\\,t_d$。\n   - 正极：$R_{p,p}^{2} / D_{s,p} \\leq \\beta\\,t_d$。\n\n3. 穿过电极的电解质扩散约束。通过要求每个多孔电极中的 $t_{\\text{diff},e} \\leq \\gamma\\,t_d$ 来限制电解质浓度梯度：\n   - 负极：$L_n^{2} / (D_e \\epsilon_n^{b}) \\leq \\gamma\\,t_d$。\n   - 正极：$L_p^{2} / (D_e \\epsilon_p^{b}) \\leq \\gamma\\,t_d$。\n\n为了确保用于自动化枚举的各变量的容许边界，在计算每个边界时，应在其允许范围内使用其他变量的最坏情况值，从而保证在整个枚举空间内的可行性。具体来说，对隔膜约束使用最坏情况的隔膜厚度，对电极约束使用最小电极孔隙率。\n\n对于在中等倍率下、碳酸酯电解质中的石墨（负极）和层状氧化物（正极）电极，使用以下科学上合理的数值和参数范围：\n\n- 电流密度：$j = 20\\,\\text{A}\\,\\text{m}^{-2}$。\n- 电解质欧姆压降预算：$V_e^{\\max} = 0.15\\,\\text{V}$。\n- 电导率比例常数：$\\kappa_m = 1.0 \\times 10^{-3}\\,\\text{S}\\,\\text{m}^{3}\\,\\text{mol}^{-1}$。\n- Bruggeman 指数：$b = 1.5$。\n- 隔膜孔隙率：$\\epsilon_s = 0.40$。\n- 隔膜厚度范围：$L_s \\in [15 \\times 10^{-6},\\,25 \\times 10^{-6}]\\,\\text{m}$；在计算 $c_0$ 的边界时，使用最坏情况 $L_s^{\\max} = 25 \\times 10^{-6}\\,\\text{m}$。\n- 电极孔隙率范围：$\\epsilon_n, \\epsilon_p \\in [0.30,\\,0.60]$；在计算 $L_n$ 和 $L_p$ 的边界时，使用 $\\epsilon_n^{\\min} = \\epsilon_p^{\\min} = 0.30$。\n- 电解质扩散系数：$D_e = 2.0 \\times 10^{-10}\\,\\text{m}^{2}\\,\\text{s}^{-1}$。\n- 负极固相扩散系数：$D_{s,n} = 1.0 \\times 10^{-14}\\,\\text{m}^{2}\\,\\text{s}^{-1}$。\n- 正极固相扩散系数：$D_{s,p} = 5.0 \\times 10^{-15}\\,\\text{m}^{2}\\,\\text{s}^{-1}$。\n- 放电时间：$t_d = 3600\\,\\text{s}$。\n- 设计因子：$\\beta = 0.10$, $\\gamma = 0.10$。\n\n任务：\n\n(a) 使用约束条件和指定的最坏情况值，推导 $c_0$、$L_n$、$L_p$、$R_{p,n}$、$R_{p,p}$ 的符号形式容许边界。您的推导必须从所列的基本模型开始，不得使用快捷公式。\n\n(b) 使用给定的常数对推导出的边界进行数值计算。\n\n(c) 最后，报告在组合约束下，最大容许负极厚度 $L_n$（以微米为单位），取欧姆和电解质扩散边界中更严格的一个。以微米为单位表示最终厚度，并将您的答案四舍五入到四位有效数字。",
            "solution": "该问题要求基于一套简化的锂离子电池 (LIB) 一维输运模型和可行性约束，推导并计算几个设计变量的容许边界。该过程包括验证问题陈述、推导边界的符号表达式，然后对这些边界进行数值计算。\n\n### 问题验证\n\n**步骤1：提取已知条件**\n\n问题提供了以下信息：\n\n*   **设计变量**：$\\{L_n, L_p, \\epsilon_n, \\epsilon_p, R_{p,n}, R_{p,p}, L_s, c_0\\}$。\n*   **几何参数**：负极厚度 $L_n$，正极厚度 $L_p$，隔膜厚度 $L_s$。\n*   **微观结构参数**：负极孔隙率 $\\epsilon_n$，正极孔隙率 $\\epsilon_p$，负极颗粒半径 $R_{p,n}$，正极颗粒半径 $R_{p,p}$。\n*   **电解质参数**：均匀盐浓度 $c_0$。\n*   **基本模型**：\n    *   多孔介质欧姆定律：$\\Delta \\phi_e = j L / \\kappa_{\\text{eff}}$。\n    *   电解质电导率：$\\kappa_e(c_0) = \\kappa_m c_0$。\n    *   Bruggeman 关系式：$\\kappa_{\\text{eff}} = \\kappa_e(c_0)\\,\\epsilon^{b}$。\n    *   固相扩散时间：$t_{\\text{diff},s} = R_p^{2} / D_s$。\n    *   电解质相扩散时间：$t_{\\text{diff},e} = L^{2} / (D_e\\,\\epsilon^{b})$。\n*   **输运可行性约束**：\n    1.  欧姆压降预算 $\\leq V_e^{\\max}$，每个区域分配三分之一：\n        *   $j L_n / \\kappa_{\\text{eff},n} \\leq V_e^{\\max}/3$，其中 $\\kappa_{\\text{eff},n} = \\kappa_m c_0 \\epsilon_n^{b}$。\n        *   $j L_s / \\kappa_{\\text{eff},s} \\leq V_e^{\\max}/3$，其中 $\\kappa_{\\text{eff},s} = \\kappa_m c_0 \\epsilon_s^{b}$。\n        *   $j L_p / \\kappa_{\\text{eff},p} \\leq V_e^{\\max}/3$，其中 $\\kappa_{\\text{eff},p} = \\kappa_m c_0 \\epsilon_p^{b}$。\n    2.  固相扩散约束：$t_{\\text{diff},s} \\leq \\beta\\,t_d$。\n        *   $R_{p,n}^{2} / D_{s,n} \\leq \\beta\\,t_d$。\n        *   $R_{p,p}^{2} / D_{s,p} \\leq \\beta\\,t_d$。\n    3.  电解质扩散约束：$t_{\\text{diff},e} \\leq \\gamma\\,t_d$。\n        *   $L_n^{2} / (D_e \\epsilon_n^{b}) \\leq \\gamma\\,t_d$。\n        *   $L_p^{2} / (D_e \\epsilon_p^{b}) \\leq \\gamma\\,t_d$。\n*   **用于边界计算的最坏情况假设**：\n    *   对隔膜约束使用 $L_s^{\\max}$。\n    *   对电极约束使用 $\\epsilon_n^{\\min}$ 和 $\\epsilon_p^{\\min}$。\n*   **数值和范围**：\n    *   $j = 20\\,\\text{A}\\,\\text{m}^{-2}$。\n    *   $V_e^{\\max} = 0.15\\,\\text{V}$。\n    *   $\\kappa_m = 1.0 \\times 10^{-3}\\,\\text{S}\\,\\text{m}^{3}\\,\\text{mol}^{-1}$。\n    *   $b = 1.5$。\n    *   $\\epsilon_s = 0.40$。\n    *   $L_s \\in [15 \\times 10^{-6},\\,25 \\times 10^{-6}]\\,\\text{m}$；使用 $L_s^{\\max} = 25 \\times 10^{-6}\\,\\text{m}$。\n    *   $\\epsilon_n, \\epsilon_p \\in [0.30,\\,0.60]$；使用 $\\epsilon_n^{\\min} = \\epsilon_p^{\\min} = 0.30$。\n    *   $D_e = 2.0 \\times 10^{-10}\\,\\text{m}^{2}\\,\\text{s}^{-1}$。\n    *   $D_{s,n} = 1.0 \\times 10^{-14}\\,\\text{m}^{2}\\,\\text{s}^{-1}$。\n    *   $D_{s,p} = 5.0 \\times 10^{-15}\\,\\text{m}^{2}\\,\\text{s}^{-1}$。\n    *   $t_d = 3600\\,\\text{s}$。\n    *   $\\beta = 0.10$。\n    *   $\\gamma = 0.10$。\n\n**步骤2：使用提取的已知条件进行验证**\n\n根据验证标准对问题进行评估。\n*   **科学上成立**：该问题基于标准但简化的输运现象模型（欧姆定律、菲克扩散、Bruggeman 相关式），这些模型是电化学工程和电池建模领域的基础。所提供的数值对于指定的电池化学体系是合理的。\n*   **良构的**：问题定义清晰。它指定了模型、约束以及一个明确的方法（最坏情况分析），用于推导设计变量的无歧义的上限或下限。\n*   **客观的**：问题陈述是定量的，没有主观或含糊的语言。\n*   **缺陷清单**：该问题没有违反任何指定的缺陷。它在科学上是合理的，可形式化的，完整的，并且内部一致。所需的逻辑并非无足轻重，并且与电池的自动化设计空间探索直接相关。\n\n**步骤3：结论与行动**\n\n该问题是**有效的**。将提供一个完整的、有理有据的解答。\n\n### 解答推导\n\n解答过程首先按照任务 (a) 的要求推导所需边界的符号表达式，然后按照任务 (b) 的要求对其进行数值计算，最后确定任务 (c) 中要求的具体值。\n\n**(a) 符号形式容许边界的推导**\n\n1.  **盐浓度 $c_0$ 的边界**\n    $c_0$ 的边界源于隔膜中的欧姆压降约束。该约束是一个下限，因为较低的浓度会降低电导率并增加电压降。\n    $$ \\frac{j L_s}{\\kappa_{\\text{eff},s}} \\leq \\frac{V_e^{\\max}}{3} $$\n    代入 $\\kappa_{\\text{eff},s} = \\kappa_m c_0 \\epsilon_s^{b}$：\n    $$ \\frac{j L_s}{\\kappa_m c_0 \\epsilon_s^{b}} \\leq \\frac{V_e^{\\max}}{3} $$\n    对 $c_0$ 求解，得到一个下限：\n    $$ c_0 \\geq \\frac{3 j L_s}{\\kappa_m \\epsilon_s^{b} V_e^{\\max}} $$\n    为确保此约束在其允许范围内的任何隔膜厚度下都成立，我们必须使用最坏情况（最大）值 $L_s^{\\max}$，这使得对 $c_0$ 的要求最为严格。因此，最小容许浓度为：\n    $$ c_0^{\\min} = \\frac{3 j L_s^{\\max}}{\\kappa_m \\epsilon_s^{b} V_e^{\\max}} $$\n\n2.  **颗粒半径 $R_{p,n}$ 和 $R_{p,p}$ 的边界**\n    颗粒半径的边界来自固相扩散约束，该约束限制了最大半径以确保锂在颗粒内能及时扩散。\n    对于负极：\n    $$ \\frac{R_{p,n}^{2}}{D_{s,n}} \\leq \\beta t_d \\implies R_{p,n} \\leq \\sqrt{\\beta t_d D_{s,n}} $$\n    这定义了负极的最大容许颗粒半径 $R_{p,n}^{\\max}$。\n    对于正极：\n    $$ \\frac{R_{p,p}^{2}}{D_{s,p}} \\leq \\beta t_d \\implies R_{p,p} \\leq \\sqrt{\\beta t_d D_{s,p}} $$\n    这定义了正极的最大容许颗粒半径 $R_{p,p}^{\\max}$。\n\n3.  **电极厚度 $L_n$ 和 $L_p$ 的边界**\n    每个电极的厚度都受到欧姆压降和电解质相扩散的约束。\n\n    *   **对于负极 ($L_n$)**:\n        *   **欧姆约束**：\n          $$ \\frac{j L_n}{\\kappa_{\\text{eff},n}} \\leq \\frac{V_e^{\\max}}{3} \\implies L_n \\leq \\frac{\\kappa_{\\text{eff},n} V_e^{\\max}}{3 j} = \\frac{\\kappa_m c_0 \\epsilon_n^{b} V_e^{\\max}}{3 j} $$\n          为了找到一个在整个设计空间内都有效的单一上限，我们对其他变量使用最坏情况（最具限制性）的值，即能够减小右侧的最小值：$c_0^{\\min}$ 和 $\\epsilon_n^{\\min}$。\n          $$ L_{n, \\text{ohm}}^{\\max} = \\frac{\\kappa_m c_0^{\\min} (\\epsilon_n^{\\min})^{b} V_e^{\\max}}{3 j} $$\n        *   **电解质扩散约束**：\n          $$ \\frac{L_n^{2}}{D_e \\epsilon_n^{b}} \\leq \\gamma t_d \\implies L_n \\leq \\sqrt{\\gamma t_d D_e \\epsilon_n^{b}} $$\n          为了找到最具限制性的上限，我们使用使右侧最小化的 $\\epsilon_n$ 值，即 $\\epsilon_n^{\\min}$。\n          $$ L_{n, \\text{diff}}^{\\max} = \\sqrt{\\gamma t_d D_e (\\epsilon_n^{\\min})^{b}} $$\n        $L_n$ 的总体容许上限是这两个相互竞争的约束中的最小值：$L_n^{\\max} = \\min(L_{n, \\text{ohm}}^{\\max}, L_{n, \\text{diff}}^{\\max})$。\n\n    *   **对于正极 ($L_p$)**:\n        推导过程与负极相同，只是将下标 $n$ 替换为 $p$。由于 $\\epsilon_p^{\\min} = \\epsilon_n^{\\min}$，因此得到的边界将是相同的。\n        $$ L_{p, \\text{ohm}}^{\\max} = \\frac{\\kappa_m c_0^{\\min} (\\epsilon_p^{\\min})^{b} V_e^{\\max}}{3 j} $$\n        $$ L_{p, \\text{diff}}^{\\max} = \\sqrt{\\gamma t_d D_e (\\epsilon_p^{\\min})^{b}} $$\n        总体边界为 $L_p^{\\max} = \\min(L_{p, \\text{ohm}}^{\\max}, L_{p, \\text{diff}}^{\\max})$。\n\n**(b) 边界的数值计算**\n\n现在使用提供的数值参数对推导出的符号形式边界进行计算。所有计算均使用国际单位制 (SI) 单位。\n\n1.  **最小盐浓度 $c_0^{\\min}$**：\n    $$ c_0^{\\min} = \\frac{3 (20) (25 \\times 10^{-6})}{(1.0 \\times 10^{-3}) (0.40)^{1.5} (0.15)} = \\frac{1.5 \\times 10^{-3}}{3.7947 \\times 10^{-5}} \\approx 39.528\\,\\text{mol}\\,\\text{m}^{-3} $$\n\n2.  **最大颗粒半径 $R_{p,n}^{\\max}$ 和 $R_{p,p}^{\\max}$**：\n    $$ R_{p,n}^{\\max} = \\sqrt{(0.10) (3600) (1.0 \\times 10^{-14})} = \\sqrt{3.6 \\times 10^{-12}} = 1.897 \\times 10^{-6}\\,\\text{m} $$\n    $$ R_{p,p}^{\\max} = \\sqrt{(0.10) (3600) (5.0 \\times 10^{-15})} = \\sqrt{1.8 \\times 10^{-12}} \\approx 1.342 \\times 10^{-6}\\,\\text{m} $$\n\n3.  **最大负极厚度 $L_n^{\\max}$**：\n    首先，我们计算项 $(\\epsilon_n^{\\min})^{b} = (0.30)^{1.5} \\approx 0.16432$。\n    *   **欧姆边界**：\n      $$ L_{n, \\text{ohm}}^{\\max} = \\frac{(1.0 \\times 10^{-3})(39.528)(0.16432)(0.15)}{3(20)} \\approx 1.6239 \\times 10^{-5}\\,\\text{m} $$\n    *   **扩散边界**：\n      $$ L_{n, \\text{diff}}^{\\max} = \\sqrt{(0.10)(3600)(2.0 \\times 10^{-10})(0.16432)} \\approx \\sqrt{1.1831 \\times 10^{-8}} \\approx 1.0877 \\times 10^{-4}\\,\\text{m} $$\n\n4.  **最大正极厚度 $L_p^{\\max}$**：\n    由于 $\\epsilon_p^{\\min} = \\epsilon_n^{\\min}$，$L_p$ 的数值边界与 $L_n$ 的相同。\n    *   $L_{p, \\text{ohm}}^{\\max} \\approx 1.6239 \\times 10^{-5}\\,\\text{m}$。\n    *   $L_{p, \\text{diff}}^{\\max} \\approx 1.0877 \\times 10^{-4}\\,\\text{m}$。\n\n**(c) 最终容许负极厚度**\n\n最后的任务是报告最大容许负极厚度 $L_n^{\\max}$，即两个推导出的上限中更具限制性（最小）的那个。\n$$ L_n^{\\max} = \\min(L_{n, \\text{ohm}}^{\\max}, L_{n, \\text{diff}}^{\\max}) = \\min(1.6239 \\times 10^{-5}\\,\\text{m}, 1.0877 \\times 10^{-4}\\,\\text{m}) $$\n$$ L_n^{\\max} = 1.6239 \\times 10^{-5}\\,\\text{m} $$\n在这些条件下，欧姆约束是电极厚度的限制因素。\n将此结果转换为微米：\n$$ L_n^{\\max} = (1.6239 \\times 10^{-5}\\,\\text{m}) \\times \\frac{10^6\\,\\mu\\text{m}}{1\\,\\text{m}} = 16.239\\,\\mu\\text{m} $$\n四舍五入到四位有效数字，最大容许厚度为 $16.24\\,\\mu\\text{m}$。",
            "answer": "$$\n\\boxed{16.24}\n$$"
        },
        {
            "introduction": "电池设计本质上是一个多目标优化问题，设计师常常需要在相互冲突的性能指标之间进行权衡，其中最经典的便是能量密度与功率密度之间的取舍。本练习将向您介绍帕累托分析（Pareto analysis），这是一个用于理解和可视化这些权衡关系的核心工具。通过评估一组候选设计，您将学会如何识别哪些设计是“帕累托被支配的”（即存在更优的选择），哪些设计位于“帕累托前沿”（Pareto front）上，代表了当前设计空间中的最优性能边界 。",
            "id": "3894887",
            "problem": "考虑一个几何面积为 $A = 1\\,\\mathrm{m^2}$ 的单孔插层电极。您将比较由电极厚度 $L$、孔隙率 $\\epsilon$ 和活性颗粒半径 $R_p$ 定义的四种候选设计。假设对电极和隔膜不是速率限制步骤，并忽略接触电阻；所有设计共享相同的材料和温度。仅使用下面给出的关系式来构建能量密度和功率密度，并确定哪些设计是帕累托劣势的。\n\n基本依据和参数：\n- 活性材料的面质量为 $m_{\\mathrm{areal}} = \\rho_{s}\\,(1 - \\epsilon)\\,L$，其中 $\\rho_s$ 是固体活性材料的密度。\n- 面容量为 $Q_{\\mathrm{areal}} = q_s\\,m_{\\mathrm{areal}}$，其中 $q_s$ 是活性材料的比容量。\n- 在标称电压 $V_{\\mathrm{nom}}$ 下的面能量为 $E_{\\mathrm{areal}} = V_{\\mathrm{nom}}\\,Q_{\\mathrm{areal}}$。\n- 内阻由三个串联部分组成：\n  1. 孔隙电解液中的离子传导，使用 Bruggeman 关系 $\\sigma_{\\mathrm{ion,eff}} = \\sigma_e\\,\\epsilon^{b}$ 建模，得到 $R_{\\mathrm{ion}} = \\dfrac{L}{\\sigma_{\\mathrm{ion,eff}}\\,A}$。\n  2. 固体基质中的电子传导，建模为 $\\sigma_{\\mathrm{sol,eff}} = \\sigma_s\\,(1 - \\epsilon)^{b_s}$，得到 $R_{\\mathrm{sol}} = \\dfrac{L}{\\sigma_{\\mathrm{sol,eff}}\\,A}$。\n  3. 从线性化的 Butler–Volmer 动力学得到的电荷转移电阻，单位界面面积的电阻为 $r_{\\mathrm{ct}} = \\dfrac{RT}{F\\,i_0}$，单位几何面积的总界面面积为 $a_s\\,L$，其中球形颗粒的比界面积为 $a_s = \\dfrac{3\\,(1 - \\epsilon)}{R_p}$。因此 $R_{\\mathrm{ct}} = \\dfrac{RT}{F\\,i_0\\,a_s\\,A\\,L}$。\n- 总内阻为 $R_{\\mathrm{int}} = R_{\\mathrm{ion}} + R_{\\mathrm{sol}} + R_{\\mathrm{ct}}$。\n- 使用从第一性原理推导的集总电阻-电容 (RC) 时间近似和最大功率传输定理，面功率密度为 $P_{\\mathrm{areal}} = \\dfrac{V_{\\mathrm{nom}}^{2}}{4\\,R_{\\mathrm{int}}\\,A}$。\n\n常数和材料属性：\n- $V_{\\mathrm{nom}} = 3.7\\,\\mathrm{V}$，$q_s = 160\\,\\mathrm{Ah\\,kg^{-1}}$，$\\rho_s = 4750\\,\\mathrm{kg\\,m^{-3}}$。\n- 电解液电导率 $\\sigma_e = 1.2\\,\\mathrm{S\\,m^{-1}}$，离子传输的 Bruggeman 指数 $b = 1.5$。\n- 固相电导率 $\\sigma_s = 5000\\,\\mathrm{S\\,m^{-1}}$，固体网络的指数 $b_s = 1.5$。\n- 交换电流密度 $i_0 = 5\\,\\mathrm{A\\,m^{-2}}$ （单位界面面积），法拉第常数 $F = 96485\\,\\mathrm{C\\,mol^{-1}}$，理想气体常数 $R = 8.314\\,\\mathrm{J\\,mol^{-1}\\,K^{-1}}$，温度 $T = 298\\,\\mathrm{K}$。\n\n候选设计：\n- 设计 1: $L = 60\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.35$, $R_p = 4\\times 10^{-6}\\,\\mathrm{m}$。\n- 设计 2: $L = 100\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.40$, $R_p = 5\\times 10^{-6}\\,\\mathrm{m}$。\n- 设计 3: $L = 80\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.30$, $R_p = 3\\times 10^{-6}\\,\\mathrm{m}$。\n- 设计 4: $L = 120\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.45$, $R_p = 8\\times 10^{-6}\\,\\mathrm{m}$。\n\n任务：\n1. 对每个设计，计算面能量 $E_{\\mathrm{areal}}$，单位为 $\\mathrm{Wh\\,m^{-2}}$。\n2. 对每个设计，使用上面提供的 RC 时间近似计算面功率密度 $P_{\\mathrm{areal}}$，单位为 $\\mathrm{W\\,m^{-2}}$。\n3. 确定哪些设计是帕累托劣势的。如果存在另一个设计，其面能量至少一样高，面功率也至少一样高，且两项指标中至少有一项严格更优，则该设计为帕累托劣势。\n\n按升序报告帕累托劣势设计的索引作为最终答案。最终答案无需四舍五入。在适用时，将中间能量以 $\\mathrm{Wh\\,m^{-2}}$ 表示，功率以 $\\mathrm{W\\,m^{-2}}$ 表示。",
            "solution": "**问题验证**\n\n**步骤1：提取已知条件**\n- 几何面积：$A = 1\\,\\mathrm{m^2}$\n- 候选设计由以下参数定义：电极厚度 $L$、孔隙率 $\\epsilon$ 和活性颗粒半径 $R_p$。\n- 假设：对电极和隔膜不是速率限制步骤；忽略接触电阻；所有设计共享相同的材料和温度。\n- 活性材料的面质量：$m_{\\mathrm{areal}} = \\rho_{s}\\,(1 - \\epsilon)\\,L$\n- 固体活性材料密度：$\\rho_s = 4750\\,\\mathrm{kg\\,m^{-3}}$\n- 面容量：$Q_{\\mathrm{areal}} = q_s\\,m_{\\mathrm{areal}}$\n- 活性材料的比容量：$q_s = 160\\,\\mathrm{Ah\\,kg^{-1}}$\n- 在标称电压 $V_{\\mathrm{nom}}$ 下的面能量：$E_{\\mathrm{areal}} = V_{\\mathrm{nom}}\\,Q_{\\mathrm{areal}}$\n- 标称电压：$V_{\\mathrm{nom}} = 3.7\\,\\mathrm{V}$\n- 总内阻：$R_{\\mathrm{int}} = R_{\\mathrm{ion}} + R_{\\mathrm{sol}} + R_{\\mathrm{ct}}$\n- 离子电阻：$R_{\\mathrm{ion}} = \\dfrac{L}{\\sigma_{\\mathrm{ion,eff}}\\,A}$，有效离子电导率 $\\sigma_{\\mathrm{ion,eff}} = \\sigma_e\\,\\epsilon^{b}$。\n- 电解液电导率：$\\sigma_e = 1.2\\,\\mathrm{S\\,m^{-1}}$\n- 离子传输的 Bruggeman 指数：$b = 1.5$\n- 电子电阻：$R_{\\mathrm{sol}} = \\dfrac{L}{\\sigma_{\\mathrm{sol,eff}}\\,A}$，有效固相电导率 $\\sigma_{\\mathrm{sol,eff}} = \\sigma_s\\,(1 - \\epsilon)^{b_s}$。\n- 固相电导率：$\\sigma_s = 5000\\,\\mathrm{S\\,m^{-1}}$\n- 固体网络的指数：$b_s = 1.5$\n- 电荷转移电阻：$R_{\\mathrm{ct}} = \\dfrac{RT}{F\\,i_0\\,a_s\\,A\\,L}$，单位体积的比界面积 $a_s = \\dfrac{3\\,(1 - \\epsilon)}{R_p}$。\n- 普适气体常数：$R = 8.314\\,\\mathrm{J\\,mol^{-1}\\,K^{-1}}$\n- 温度：$T = 298\\,\\mathrm{K}$\n- 法拉第常数：$F = 96485\\,\\mathrm{C\\,mol^{-1}}$\n- 交换电流密度：$i_0 = 5\\,\\mathrm{A\\,m^{-2}}$\n- 面功率密度：$P_{\\mathrm{areal}} = \\dfrac{V_{\\mathrm{nom}}^{2}}{4\\,R_{\\mathrm{int}}\\,A}$\n- 设计 1：$L = 60\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.35$, $R_p = 4\\times 10^{-6}\\,\\mathrm{m}$。\n- 设计 2：$L = 100\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.40$, $R_p = 5\\times 10^{-6}\\,\\mathrm{m}$。\n- 设计 3：$L = 80\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.30$, $R_p = 3\\times 10^{-6}\\,\\mathrm{m}$。\n- 设计 4：$L = 120\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.45$, $R_p = 8\\times 10^{-6}\\,\\mathrm{m}$。\n- 任务：(1) 计算每个设计的 $E_{\\mathrm{areal}}$。(2) 计算每个设计的 $P_{\\mathrm{areal}}$。(3) 确定哪些设计是帕累托劣势的。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题具有科学依据，利用了成熟的多孔电极行为简化模型，例如用于有效电导率的 Bruggeman 关系和用于电荷转移电阻的线性化 Butler-Volmer 动力学。所有方程、参数和常数在物理上都是合理的，并与电化学工程文献一致。问题提法恰当，提供了计算所需性能指标和执行帕累托分析的所有必要信息。语言客观，所有术语定义清晰。因此，该问题是有效的。\n\n**步骤3：结论和行动**\n问题有效。将制定完整的解决方案。\n\n**求解推导**\n\n分析需要计算四种设计中每一种的面能量密度 ($E_{\\mathrm{areal}}$) 和面功率密度 ($P_{\\mathrm{areal}}$)。\n\n面能量密度由以下公式给出：\n$$E_{\\mathrm{areal}} = V_{\\mathrm{nom}} \\, Q_{\\mathrm{areal}} = V_{\\mathrm{nom}} \\, q_s \\, m_{\\mathrm{areal}} = V_{\\mathrm{nom}} \\, q_s \\, \\rho_s (1 - \\epsilon) L$$\n输入参数的单位（$V_{\\mathrm{nom}}$ 单位为 $\\mathrm{V}$，$q_s$ 单位为 $\\mathrm{Ah\\,kg^{-1}}$，$\\rho_s$ 单位为 $\\mathrm{kg\\,m^{-3}}$，$L$ 单位为 $\\mathrm{m}$）直接得出 $E_{\\mathrm{areal}}$ 的单位为 $\\mathrm{Wh\\,m^{-2}}$。\n\n面功率密度由 $P_{\\mathrm{areal}} = \\dfrac{V_{\\mathrm{nom}}^{2}}{4\\,R_{\\mathrm{int}}\\,A}$ 给出。由于几何面积指定为 $A = 1\\,\\mathrm{m^2}$，我们可以计算面电阻 $\\mathcal{R}_{\\mathrm{int}} = R_{\\mathrm{int}} A$。总面电阻是离子、电子和电荷转移贡献的总和：\n$$\\mathcal{R}_{\\mathrm{int}} = \\mathcal{R}_{\\mathrm{ion}} + \\mathcal{R}_{\\mathrm{sol}} + \\mathcal{R}_{\\mathrm{ct}}$$\n各个面电阻分量定义如下：\n1. 离子电阻：$\\mathcal{R}_{\\mathrm{ion}} = R_{\\mathrm{ion}}\\,A = \\dfrac{L}{\\sigma_e \\epsilon^b}$\n2. 电子电阻：$\\mathcal{R}_{\\mathrm{sol}} = R_{\\mathrm{sol}}\\,A = \\dfrac{L}{\\sigma_s (1 - \\epsilon)^{b_s}}$\n3. 电荷转移电阻：$\\mathcal{R}_{\\mathrm{ct}} = R_{\\mathrm{ct}}\\,A = \\dfrac{RT}{F i_0 a_s L}$。代入 $a_s = \\dfrac{3(1-\\epsilon)}{R_p}$，表达式变为 $\\mathcal{R}_{\\mathrm{ct}} = \\dfrac{RT}{F i_0} \\dfrac{R_p}{3(1-\\epsilon)L}$。\n\n然后功率密度计算如下：\n$$P_{\\mathrm{areal}} = \\frac{V_{\\mathrm{nom}}^2}{4 \\mathcal{R}_{\\mathrm{int}}}$$\n首先，我们计算常数组 $\\dfrac{RT}{F i_0}$：\n$$\\frac{RT}{F i_0} = \\frac{(8.314\\,\\mathrm{J\\,mol^{-1}\\,K^{-1}})(298\\,\\mathrm{K})}{(96485\\,\\mathrm{C\\,mol^{-1}})(5\\,\\mathrm{A\\,m^{-2}})} \\approx 0.0051358\\,\\mathrm{\\Omega\\,m^2}$$\n我们现在为四种设计中的每一种计算 $E_{\\mathrm{areal}}$ 和 $P_{\\mathrm{areal}}$。\n\n**设计 1：** $L = 60\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.35$, $R_p = 4\\times 10^{-6}\\,\\mathrm{m}$\n$E_{\\mathrm{areal},1} = (3.7) (160) (4750) (1-0.35) (60\\times 10^{-6}) = 109.668\\,\\mathrm{Wh\\,m^{-2}}$\n$\\mathcal{R}_{\\mathrm{ion},1} = \\dfrac{60\\times 10^{-6}}{1.2 \\times (0.35)^{1.5}} \\approx 2.4131 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{sol},1} = \\dfrac{60\\times 10^{-6}}{5000 \\times (0.65)^{1.5}} \\approx 2.2950 \\times 10^{-8}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{ct},1} = (0.0051358) \\dfrac{4\\times 10^{-6}}{3(1-0.35)(60\\times 10^{-6})} \\approx 1.7558 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{int},1} \\approx (2.4131 \\times 10^{-4}) + (2.2950 \\times 10^{-8}) + (1.7558 \\times 10^{-4}) \\approx 4.1691 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$P_{\\mathrm{areal},1} = \\dfrac{(3.7)^2}{4 \\times 4.1691 \\times 10^{-4}} \\approx 8209.19\\,\\mathrm{W\\,m^{-2}}$\n\n**设计 2：** $L = 100\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.40$, $R_p = 5\\times 10^{-6}\\,\\mathrm{m}$\n$E_{\\mathrm{areal},2} = (3.7) (160) (4750) (1-0.40) (100\\times 10^{-6}) = 168.72\\,\\mathrm{Wh\\,m^{-2}}$\n$\\mathcal{R}_{\\mathrm{ion},2} = \\dfrac{100\\times 10^{-6}}{1.2 \\times (0.40)^{1.5}} \\approx 3.2952 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{sol},2} = \\dfrac{100\\times 10^{-6}}{5000 \\times (0.60)^{1.5}} \\approx 4.3034 \\times 10^{-8}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{ct},2} = (0.0051358) \\dfrac{5\\times 10^{-6}}{3(1-0.40)(100\\times 10^{-6})} \\approx 1.4266 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{int},2} \\approx (3.2952 \\times 10^{-4}) + (4.3034 \\times 10^{-8}) + (1.4266 \\times 10^{-4}) \\approx 4.7222 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$P_{\\mathrm{areal},2} = \\dfrac{(3.7)^2}{4 \\times 4.7222 \\times 10^{-4}} \\approx 7247.50\\,\\mathrm{W\\,m^{-2}}$\n\n**设计 3：** $L = 80\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.30$, $R_p = 3\\times 10^{-6}\\,\\mathrm{m}$\n$E_{\\mathrm{areal},3} = (3.7) (160) (4750) (1-0.30) (80\\times 10^{-6}) = 157.472\\,\\mathrm{Wh\\,m^{-2}}$\n$\\mathcal{R}_{\\mathrm{ion},3} = \\dfrac{80\\times 10^{-6}}{1.2 \\times (0.30)^{1.5}} \\approx 4.0560 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{sol},3} = \\dfrac{80\\times 10^{-6}}{5000 \\times (0.70)^{1.5}} \\approx 2.7318 \\times 10^{-8}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{ct},3} = (0.0051358) \\dfrac{3\\times 10^{-6}}{3(1-0.30)(80\\times 10^{-6})} \\approx 0.9171 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{int},3} \\approx (4.0560 \\times 10^{-4}) + (2.7318 \\times 10^{-8}) + (0.9171 \\times 10^{-4}) \\approx 4.9734 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$P_{\\mathrm{areal},3} = \\dfrac{(3.7)^2}{4 \\times 4.9734 \\times 10^{-4}} \\approx 6881.56\\,\\mathrm{W\\,m^{-2}}$\n\n**设计 4：** $L = 120\\times 10^{-6}\\,\\mathrm{m}$, $\\epsilon = 0.45$, $R_p = 8\\times 10^{-6}\\,\\mathrm{m}$\n$E_{\\mathrm{areal},4} = (3.7) (160) (4750) (1-0.45) (120\\times 10^{-6}) = 185.592\\,\\mathrm{Wh\\,m^{-2}}$\n$\\mathcal{R}_{\\mathrm{ion},4} = \\dfrac{120\\times 10^{-6}}{1.2 \\times (0.45)^{1.5}} \\approx 3.3121 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{sol},4} = \\dfrac{120\\times 10^{-6}}{5000 \\times (0.55)^{1.5}} \\approx 5.8720 \\times 10^{-8}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{ct},4} = (0.0051358) \\dfrac{8\\times 10^{-6}}{3(1-0.45)(120\\times 10^{-6})} \\approx 2.0751 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$\\mathcal{R}_{\\mathrm{int},4} \\approx (3.3121 \\times 10^{-4}) + (5.8720 \\times 10^{-8}) + (2.0751 \\times 10^{-4}) \\approx 5.3878 \\times 10^{-4}\\,\\mathrm{\\Omega\\,m^2}$\n$P_{\\mathrm{areal},4} = \\dfrac{(3.7)^2}{4 \\times 5.3878 \\times 10^{-4}} \\approx 6352.28\\,\\mathrm{W\\,m^{-2}}$\n\n**帕累托劣势分析**\n性能指标（$E_{\\mathrm{areal}}$ 单位为 $\\mathrm{Wh\\,m^{-2}}$，$P_{\\mathrm{areal}}$ 单位为 $\\mathrm{W\\,m^{-2}}$）如下：\n- 设计 1: ($109.668$, $8209.19$)\n- 设计 2: ($168.72$, $7247.50$)\n- 设计 3: ($157.472$, $6881.56$)\n- 设计 4: ($185.592$, $6352.28$)\n\n如果存在另一个设计 $j$，使得 $E_j \\ge E_i$ 且 $P_j \\ge P_i$，并且至少有一个严格不等式成立，则设计 $i$ 是帕累托劣势的。\n- 设计1具有最高的功率密度；它不可能是劣势的。\n- 设计4具有最高的能量密度；它不可能是劣势的。\n- 将设计3与其他设计进行比较：\n  - 与设计1相比：$E_3 > E_1$，但 $P_3  P_1$。不被设计1所支配。\n  - 与设计2相比：$E_2 = 168.72 > E_3 = 157.472$，且 $P_2 = 7247.50 > P_3 = 6881.56$。由于设计2在能量和功率上均占优，**设计3被设计2帕累托支配**。\n  - 与设计4相比：$E_4 > E_3$，但 $P_4  P_3$。不被设计4所支配。\n- 将设计2与其他设计进行比较：\n  - 与设计1相比：$E_2 > E_1$，但 $P_2  P_1$。不被设计1所支配。\n  - 与设计4相比：$E_4 > E_2$，但 $P_4  P_2$。不被设计4所支配。\n\n唯一帕累托劣势的设计是设计3。问题要求提供劣势设计的索引。唯一的索引是 $3$。",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "在明确了设计空间、目标函数和约束条件之后，下一步便是利用数值优化算法来自动寻找最优设计。本练习将带您深入了解一种功能强大的优化算法——序列二次规划（Sequential Quadratic Programming, SQP）的内部工作机制。您将亲手执行SQP算法的一次迭代，学习它如何利用目标函数和约束的梯度信息来构建一个局部二次规划子问题，并求解出指向更优设计的搜索方向。这揭示了从抽象的数学问题表述到具体求解步骤的转化过程 。",
            "id": "3894904",
            "problem": "考虑一个简化的但科学上现实的自动化电池设计场景，该场景涉及锂离子软包电池的层压，其中决策变量是各层的厚度 $x = (t_n, t_s, t_p)^{\\top}$，单位为微米，包括负极厚度 $t_n$、隔膜厚度 $t_s$ 和正极厚度 $t_p$。任务是基于目标函数的局部二阶模型和约束条件的一阶模型，在当前迭代点 $x_k$ 处计算一个序列二次规划步骤。\n\n目标函数 $f(x)$ 是一个可微的性能指标，它源自一个考虑了欧姆电阻惩罚的电池包级能量密度的代理模型，通过多物理场仿真进行评估。在当前迭代点 $x_k$，给定目标函数的梯度 $\\nabla f(x_k) = [\\,2,\\,-1,\\,1\\,]^{\\top}$，以及拉格朗日函数的海森矩阵的一个对称正定近似，\n$$\nB_k \\;=\\; \\begin{pmatrix}\n4   1  0 \\\\\n1   3  0 \\\\\n0   0  2\n\\end{pmatrix}.\n$$\n\n设计必须满足一个容量平衡等式约束和基于电化学及封装要求的厚度相关不等式约束：\n- 容量平衡等式为 $h(x) = 2\\,t_n - 3\\,t_p = 0$，其雅可比矩阵为 $\\nabla h(x_k) = [\\,2,\\,0,\\,-3\\,]$，当前残差为 $h(x_k) = 6$ 微米。\n- 总叠层厚度不等式为 $g_1(x) = t_n + t_s + t_p - T_{\\max} \\le 0$，该约束在 $x_k$ 处是激活的，即 $g_1(x_k) = 0$，其雅可比矩阵为 $\\nabla g_1(x_k) = [\\,1,\\,1,\\,1\\,]$。\n- 隔膜最小厚度不等式 $g_2(x) = t_{s,\\min} - t_s \\le 0$ 在 $x_k$ 处是严格非激活的，即 $g_2(x_k)  0$，因此不属于此步骤的激活集。\n\n利用序列二次规划的原理，通过以下方式在 $x_k$ 处构建局部二次规划子问题：\n- 使用 $B_k$ 和 $\\nabla f(x_k)$ 通过二阶泰勒展开来近似目标函数。\n- 通过线性化来强制等式约束 $h(x)$ 和单个激活不等式 $g_1(x)$ 满足一阶可行性。\n\n在仅包含 $g_1$ 作为激活约束的激活集策略下，通过求解该子问题的必要最优性条件，计算原始搜索方向 $d_k = (d_{t_n}, d_{t_s}, d_{t_p})^{\\top}$。以微米为单位表示最终的 $d_k$ 分量。提供精确值，不要四舍五入。",
            "solution": "该问题要求为一个应用于电池设计优化问题的序列二次规划（SQP）算法计算一个单一的搜索方向，记为 $d_k$。决策变量是各层厚度 $x = (t_n, t_s, t_p)^{\\top}$。搜索方向是一个向量 $d_k = (d_{t_n}, d_{t_s}, d_{t_p})^{\\top}$，表示从当前迭代点 $x_k$ 出发的步长。\n\nSQP方法的核心是在当前迭代点 $x_k$ 处，将原始非线性问题建模为一个二次规划（QP）子问题。该子问题通过用二次模型近似目标函数并线性化约束条件来构建。\n\nQP子问题的目标是最小化目标函数变化的二次近似。该近似由围绕 $x_k$ 的二阶泰勒展开给出，使用了给定的梯度 $\\nabla f(x_k)$ 和拉格朗日函数的海森矩阵近似 $B_k$。关于搜索方向 $d$ 的最小化目标是：\n$$\n\\min_{d} \\quad \\frac{1}{2} d^{\\top} B_k d + \\nabla f(x_k)^{\\top} d\n$$\n代入给定值 $B_k = \\begin{pmatrix} 4   1  0 \\\\ 1  3  0 \\\\ 0  0  2 \\end{pmatrix}$ 和 $\\nabla f(x_k) = [\\,2,\\,-1,\\,1\\,]^{\\top}$：\n$$\n\\min_{d} \\quad \\frac{1}{2} \\begin{pmatrix} d_{t_n} \\\\ d_{t_s} \\\\ d_{t_p} \\end{pmatrix}^{\\top} \\begin{pmatrix} 4   1  0 \\\\ 1  3  0 \\\\ 0  0  2 \\end{pmatrix} \\begin{pmatrix} d_{t_n} \\\\ d_{t_s} \\\\ d_{t_p} \\end{pmatrix} + \\begin{pmatrix} 2 \\\\ -1 \\\\ 1 \\end{pmatrix}^{\\top} \\begin{pmatrix} d_{t_n} \\\\ d_{t_s} \\\\ d_{t_p} \\end{pmatrix}\n$$\n此表达式展开为：\n$$\n\\min_{d} \\quad (2 d_{t_n}^2 + d_{t_n} d_{t_s} + \\frac{3}{2} d_{t_s}^2 + d_{t_p}^2) + (2 d_{t_n} - d_{t_s} + d_{t_p})\n$$\n\n约束在 $x_k$ 附近进行线性化。对于一个通用约束 $c(x)$，其线性化形式对于等式约束是 $c(x_k) + \\nabla c(x_k)^{\\top} d = 0$，对于不等式约束是 $c(x_k) + \\nabla c(x_k)^{\\top} d \\le 0$。\n\n等式约束为 $h(x) = 2\\,t_n - 3\\,t_p = 0$。其线性化为：\n$$\nh(x_k) + \\nabla h(x_k)^{\\top} d = 0\n$$\n由于 $h(x_k)=6$ 且 $\\nabla h(x_k) = [\\,2,\\,0,\\,-3\\,]^{\\top}$，该式变为：\n$$\n6 + 2\\,d_{t_n} - 3\\,d_{t_p} = 0 \\quad \\implies \\quad 2\\,d_{t_n} - 3\\,d_{t_p} = -6\n$$\n\n激活的不等式约束是 $g_1(x) = t_n + t_s + t_p - T_{\\max} \\le 0$。激活集方法将激活的不等式视为等式来确定搜索方向。其线性化为：\n$$\ng_1(x_k) + \\nabla g_1(x_k)^{\\top} d = 0\n$$\n由于 $g_1(x_k)=0$ 且 $\\nabla g_1(x_k) = [\\,1,\\,1,\\,1\\,]^{\\top}$，该式变为：\n$$\n0 + d_{t_n} + d_{t_s} + d_{t_p} = 0 \\quad \\implies \\quad d_{t_n} + d_{t_s} + d_{t_p} = 0\n$$\n\n因此，QP子问题为：\n$$\n\\min_{d} \\quad 2 d_{t_n}^2 + d_{t_n} d_{t_s} + \\frac{3}{2} d_{t_s}^2 + d_{t_p}^2 + 2 d_{t_n} - d_{t_s} + d_{t_p}\n$$\n约束条件为：\n$$\n\\begin{align*}\n2\\,d_{t_n} - 3\\,d_{t_p} = -6 \\\\\nd_{t_n} + d_{t_s} + d_{t_p} = 0\n\\end{align*}\n$$\n由于 $B_k$ 是正定的，目标函数是严格凸的，并且在有线性约束的情况下，该问题有唯一解。我们通过求解卡罗需-库恩-塔克（KKT）条件来找到这个解。设 $\\lambda_h$ 和 $\\lambda_g$ 分别为线性化约束 $h$ 和 $g_1$ 的拉格朗日乘子。该子问题的拉格朗日函数 $\\mathcal{L}$ 为：\n$$\n\\mathcal{L}(d, \\lambda_h, \\lambda_g) = \\left(\\frac{1}{2} d^{\\top} B_k d + \\nabla f(x_k)^{\\top} d\\right) + \\lambda_h(h(x_k) + \\nabla h(x_k)^{\\top}d) + \\lambda_g(g_1(x_k) + \\nabla g_1(x_k)^{\\top}d)\n$$\nKKT条件是通过将拉格朗日函数关于 $d$ 的梯度设为零，并结合约束方程得到的：\n$$\n\\nabla_d \\mathcal{L} = B_k d + \\nabla f(x_k) + \\lambda_h \\nabla h(x_k) + \\lambda_g \\nabla g_1(x_k) = 0\n$$\n这给了我们一个线性方程组：\n$$\n\\begin{pmatrix}\nB_k   \\nabla h(x_k)  \\nabla g_1(x_k) \\\\\n\\nabla h(x_k)^{\\top}  0  0 \\\\\n\\nabla g_1(x_k)^{\\top}  0  0\n\\end{pmatrix}\n\\begin{pmatrix}\nd \\\\ \\lambda_h \\\\ \\lambda_g\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n-\\nabla f(x_k) \\\\ -h(x_k) \\\\ -g_1(x_k)\n\\end{pmatrix}\n$$\n代入给定值：\n$$\n\\begin{pmatrix}\n4  1  0  2  1 \\\\\n1  3  0  0  1 \\\\\n0  0  2  -3  1 \\\\\n2  0  -3  0  0 \\\\\n1  1  1  0  0\n\\end{pmatrix}\n\\begin{pmatrix}\nd_{t_n} \\\\ d_{t_s} \\\\ d_{t_p} \\\\ \\lambda_h \\\\ \\lambda_g\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n-2 \\\\ 1 \\\\ -1 \\\\ -6 \\\\ 0\n\\end{pmatrix}\n$$\n这是一个包含5个变量的5个线性方程组。从最后两行，我们得到关于 $d$ 的约束方程：\n(1) $2 d_{t_n} - 3 d_{t_p} = -6$\n(2) $d_{t_n} + d_{t_s} + d_{t_p} = 0$\n\n从方程(2)，我们将 $d_{t_p}$ 表示为其他变量的函数：$d_{t_p} = -d_{t_n} - d_{t_s}$。\n将此代入方程(1)：\n$2 d_{t_n} - 3(-d_{t_n} - d_{t_s}) = -6$\n$5 d_{t_n} + 3 d_{t_s} = -6$ (3)\n\n现在考虑KKT系统的前三行：\n(4) $4 d_{t_n} + d_{t_s} + 2 \\lambda_h + \\lambda_g = -2$\n(5) $d_{t_n} + 3 d_{t_s} + \\lambda_g = 1$\n(6) $2 d_{t_p} - 3 \\lambda_h + \\lambda_g = -1$\n\n从(5)式，我们可以将 $\\lambda_g$ 表示为 $\\lambda_g = 1 - d_{t_n} - 3 d_{t_s}$。\n将此代入(6)式：\n$2 d_{t_p} - 3 \\lambda_h + (1 - d_{t_n} - 3 d_{t_s}) = -1$\n$3 \\lambda_h = 2 d_{t_p} - d_{t_n} - 3 d_{t_s} + 2$\n使用 $d_{t_p} = -d_{t_n} - d_{t_s}$：\n$3 \\lambda_h = 2(-d_{t_n} - d_{t_s}) - d_{t_n} - 3 d_{t_s} + 2 = -3 d_{t_n} - 5 d_{t_s} + 2$\n$\\lambda_h = -d_{t_n} - \\frac{5}{3} d_{t_s} + \\frac{2}{3}$\n\n现在将 $\\lambda_h$ 和 $\\lambda_g$ 的表达式代入方程(4)：\n$4 d_{t_n} + d_{t_s} + 2(-d_{t_n} - \\frac{5}{3} d_{t_s} + \\frac{2}{3}) + (1 - d_{t_n} - 3 d_{t_s}) = -2$\n$4 d_{t_n} + d_{t_s} - 2 d_{t_n} - \\frac{10}{3} d_{t_s} + \\frac{4}{3} + 1 - d_{t_n} - 3 d_{t_s} = -2$\n合并同类项：\n$(4-2-1)d_{t_n} + (1 - \\frac{10}{3} - 3)d_{t_s} = -2 - 1 - \\frac{4}{3}$\n$d_{t_n} + (\\frac{3-10-9}{3})d_{t_s} = -3 - \\frac{4}{3}$\n$d_{t_n} - \\frac{16}{3} d_{t_s} = -\\frac{13}{3}$\n$3 d_{t_n} - 16 d_{t_s} = -13$ (7)\n\n我们现在得到一个关于 $d_{t_n}$ 和 $d_{t_s}$ 的双方程系统，即(3)和(7)：\n$5 d_{t_n} + 3 d_{t_s} = -6$\n$3 d_{t_n} - 16 d_{t_s} = -13$\n为求解该系统，我们可以将第一个方程乘以 $16$，第二个方程乘以 $3$：\n$80 d_{t_n} + 48 d_{t_s} = -96$\n$9 d_{t_n} - 48 d_{t_s} = -39$\n将这两个方程相加得到：\n$89 d_{t_n} = -135 \\implies d_{t_n} = -\\frac{135}{89}$\n\n将 $d_{t_n}$ 代回方程(3)：\n$5(-\\frac{135}{89}) + 3 d_{t_s} = -6$\n$-\\frac{675}{89} + 3 d_{t_s} = -\\frac{534}{89}$\n$3 d_{t_s} = \\frac{675 - 534}{89} = \\frac{141}{89}$\n$d_{t_s} = \\frac{141}{3 \\cdot 89} = \\frac{47}{89}$\n\n最后，使用方程(2)计算 $d_{t_p}$：\n$d_{t_p} = -d_{t_n} - d_{t_s} = -(-\\frac{135}{89}) - \\frac{47}{89} = \\frac{135 - 47}{89} = \\frac{88}{89}$\n\n因此，原始搜索方向为 $d_k = (d_{t_n}, d_{t_s}, d_{t_p})^{\\top} = (-\\frac{135}{89}, \\frac{47}{89}, \\frac{88}{89})^{\\top}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n-\\frac{135}{89} \\\\ \\frac{47}{89} \\\\ \\frac{88}{89}\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
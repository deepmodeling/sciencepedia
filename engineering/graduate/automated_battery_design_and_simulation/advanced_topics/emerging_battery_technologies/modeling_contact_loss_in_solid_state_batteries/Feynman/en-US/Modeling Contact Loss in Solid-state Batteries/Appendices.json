{
    "hands_on_practices": [
        {
            "introduction": "The overall electrical resistance of a solid-solid interface is often dominated by the geometric constriction of ion flow through discrete micro-contact spots. This fundamental exercise guides you through the derivation of this \"spreading resistance\" from first principles, starting with a single circular contact. By understanding how to model the resistance of one contact, you will then learn to scale this up to represent an entire interface, a foundational skill in battery modeling.",
            "id": "3929467",
            "problem": "Consider a Solid-State Battery (SSB) interface modeled as a mechanically patterned contact between two nominally flat, semi-infinite, homogeneous, isotropic ionic conductors of bulk ionic conductivity $\\kappa$. Assume steady-state, isothermal, linear transport, and negligible electrode kinetics so that the dominant resistance arises from geometric constriction (spreading) of ionic current lines at microcontacts. Let a single circular microcontact of radius $a$ connect the two half-spaces. The governing relations are the local form of Ohm’s law for ionic conduction, $\\mathbf{J}=-\\kappa\\nabla\\phi$, and the continuity equation, $\\nabla\\cdot\\mathbf{J}=0$, which together imply the Laplace equation $\\nabla^{2}\\phi=0$ in each half-space. Treat the interface plane at $z=0$ with cylindrical coordinates $(r,\\theta,z)$ and impose axisymmetry. Far from the contact, the potentials in the two half-spaces approach constant values differing by an applied potential drop $\\Delta\\phi$, and the interface outside the circular contact region is insulating with zero normal flux.\n\nStarting from these fundamentals and appropriate boundary conditions, derive a closed-form expression for the total constriction resistance $R_{c}$ of the single circular microcontact in terms of $\\kappa$ and $a$. Then, consider an interface containing many, non-overlapping circular microcontacts with radii $\\{a_{i}\\}_{i=1}^{N}$ such that the microcontacts do not hydrodynamically or electrostatically interact (i.e., the superposed fields do not significantly perturb each other). If a chemo-mechanical process removes a fraction $1-f$ of microcontacts from conduction (with $f\\in(0,1]$ the active fraction), and if the set of radii of the remaining active contacts has mean $\\bar{a}$, show how the many-contact interface behaves as a parallel network of constriction resistances. Finally, consider a full cell in which the ionic conduction must pass through two such interfaces in series, indexed by $k\\in\\{1,2\\}$, with bulk ionic conductivities $\\kappa_{k}$, planar areas $A_{k}$, number densities of geometric microcontacts $n_{k}$, active fractions $f_{k}$, and active-contact mean radii $\\bar{a}_{k}$. Under the stated assumptions, provide a single closed-form symbolic expression for the total series contact resistance $R_{\\mathrm{tot}}$ across both interfaces in terms of $\\kappa_{k}$, $A_{k}$, $n_{k}$, $f_{k}$, and $\\bar{a}_{k}$.\n\nExpress your final result symbolically. If interpreted numerically, report resistance in Ohms (SI units).",
            "solution": "The problem is valid as it is scientifically grounded, well-posed, and objective. It consists of three parts: deriving the constriction resistance for a single circular microcontact, extending this to a non-interacting array of microcontacts, and finally combining two such interfaces in series.\n\nPart 1: Constriction Resistance of a Single Circular Microcontact\n\nWe model the problem by considering a single circular microcontact of radius $a$ at the interface $z=0$ between two semi-infinite ionic conductors. The potential $\\phi$ in each conductor obeys the Laplace equation, $\\nabla^{2}\\phi=0$. This is a classical problem in potential theory, often solved by considering a single half-space. Let's analyze the top half-space ($z \\ge 0$), assuming the contact disk at $z=0, r \\le a$ is held at a potential $\\phi_0$ and the potential at infinity is 0. The insulating part of the interface ($z=0, r > a$) has zero normal current flux.\n\nThe solution to this mixed boundary-value problem gives the potential gradient on the contact disk as:\n$$ \\frac{\\partial\\phi}{\\partial z} = \\frac{2\\phi_0}{\\pi \\sqrt{a^2-r^2}} $$\nThe total ionic current $I_{1/2}$ flowing through the disk into this half-space is found by integrating the normal component of the current density, $J_z = -\\kappa \\frac{\\partial\\phi}{\\partial z}$, over the contact area.\n$$ I_{1/2} = \\int_{0}^{a} 2\\pi r \\kappa \\left| \\frac{\\partial\\phi}{\\partial z} \\right| dr = \\int_{0}^{a} 2\\pi r \\kappa \\frac{2\\phi_0}{\\pi \\sqrt{a^2-r^2}} dr $$\n$$ I_{1/2} = 4\\kappa\\phi_0 \\int_{0}^{a} \\frac{r}{\\sqrt{a^2-r^2}} dr $$\nThe integral evaluates to $a$, so the current is:\n$$ I_{1/2} = 4\\kappa\\phi_0 a $$\nThe resistance of this single half-space, known as the Maxwell spreading resistance, is the ratio of the potential drop $\\phi_0$ to the current $I_{1/2}$:\n$$ R_{1/2} = \\frac{\\phi_0}{I_{1/2}} = \\frac{\\phi_0}{4\\kappa\\phi_0 a} = \\frac{1}{4\\kappa a} $$\nThe total constriction resistance $R_c$ of the microcontact is the sum of the resistances of the two symmetric half-spaces connected in series.\n$$ R_c = R_{1/2} + R_{1/2} = \\frac{1}{4\\kappa a} + \\frac{1}{4\\kappa a} = \\frac{1}{2\\kappa a} $$\n\nPart 2: Resistance of a Many-Contact Interface\n\nThe problem states that the interface contains many non-overlapping microcontacts that do not interact electrostatically. This means that each microcontact provides an independent, parallel pathway for ion conduction. For a set of parallel resistors, the total conductance is the sum of the individual conductances. The total resistance $R_{\\text{interface}}$ is the reciprocal of the total conductance.\nLet the set of active microcontacts have radii $\\{a_i\\}$. The resistance of a single contact $i$ is $R_i = \\frac{1}{2\\kappa a_i}$. Its conductance is $G_i = 1/R_i = 2\\kappa a_i$.\nThe total conductance of the interface is $G_{\\text{interface}} = \\sum_i G_i = \\sum_i 2\\kappa a_i = 2\\kappa \\sum_i a_i$.\nThe total resistance of the interface is therefore:\n$$ R_{\\text{interface}} = \\frac{1}{G_{\\text{interface}}} = \\frac{1}{2\\kappa \\sum_i a_i} $$\nThe problem specifies that for an interface $k$, there is a planar area $A_k$ with a number density of geometric microcontacts $n_k$. The total number of geometric contacts is $N_{g,k} = n_k A_k$. A fraction $f_k$ of these contacts are active. So, the number of active contacts is $N_{\\text{active},k} = f_k N_{g,k} = f_k n_k A_k$.\nThe mean radius of these active contacts is $\\bar{a}_k$. By definition of the mean, the sum of the radii of the active contacts is $\\sum_{i \\in \\text{active}} a_i = N_{\\text{active},k} \\bar{a}_k$.\nSubstituting these quantities into the expression for the interface resistance $R_k$:\n$$ R_k = \\frac{1}{2\\kappa_k (N_{\\text{active},k} \\bar{a}_k)} = \\frac{1}{2\\kappa_k (f_k n_k A_k) \\bar{a}_k} $$\n\nPart 3: Total Series Resistance of Two Interfaces\n\nThe full cell consists of two such interfaces, indexed by $k \\in \\{1, 2\\}$, connected in series. The total resistance of components in series is the sum of their individual resistances.\n$$ R_{\\mathrm{tot}} = R_1 + R_2 $$\nUsing the expression for the resistance of a single interface derived in Part 2 for each of the two interfaces:\n$$ R_1 = \\frac{1}{2\\kappa_1 f_1 n_1 A_1 \\bar{a}_1} $$\n$$ R_2 = \\frac{1}{2\\kappa_2 f_2 n_2 A_2 \\bar{a}_2} $$\nThe total series contact resistance across both interfaces is the sum of these two terms.\n$$ R_{\\mathrm{tot}} = \\frac{1}{2\\kappa_1 f_1 n_1 A_1 \\bar{a}_1} + \\frac{1}{2\\kappa_2 f_2 n_2 A_2 \\bar{a}_2} $$\nThis expression represents the final closed-form symbolic result for the total resistance in terms of all the given parameters.",
            "answer": "$$\n\\boxed{\\frac{1}{2 f_1 n_1 A_1 \\kappa_1 \\bar{a}_1} + \\frac{1}{2 f_2 n_2 A_2 \\kappa_2 \\bar{a}_2}}\n$$"
        },
        {
            "introduction": "Contact loss is not a static phenomenon; it is actively driven by the chemo-mechanical environment within the cell. During battery operation, processes like lithium stripping can generate tensile stresses that threaten to pull interfaces apart. This hands-on coding practice challenges you to build a model that captures the competition between this deleterious chemical stress and the stabilizing external stack pressure, allowing you to predict when interfacial separation will occur.",
            "id": "3929469",
            "problem": "You are tasked with constructing and analyzing a one-dimensional mechanical-chemical model of contact loss at a solid-solid interface in a Solid-State Battery (SSB). The interface is between a Solid-State Electrolyte (SSE) and a lithium metal anode. External stack pressure is applied normal to the interface, while interfacial electrochemical reactions under a prescribed current density generate a volumetric eigenstrain that can produce tensile stress at the interface. The goal is to determine, for given parameter sets, whether the interface remains in contact or separates. You must implement a complete, runnable program that, for the provided test suite, outputs the contact state and a critical external pressure in a specified format.\n\nModeling assumptions and sign conventions must be as follows:\n- External stack pressure is taken as compressive when positive. Let the externally applied pressure be $P_{\\mathrm{ext}}$ in $\\mathrm{Pa}$.\n- Current density $j$ in $\\mathrm{A/m^2}$ is positive for net stripping (lithium removal) at the interface, and negative for net plating (lithium deposition).\n- The electrochemical molar flux is $J = j / F$, where $F$ is the Faraday constant in $\\mathrm{C/mol}$.\n- A thin interfacial reaction-affected layer of thickness $h$ in $\\mathrm{m}$ develops a volumetric eigenstrain due to mass removal or addition. In a one-dimensional approximation, mass conservation combined with Faraday’s law implies an eigenstrain rate proportional to the flux divergence, which is approximated by $J / h$ over the affected layer. Over a time $t$ in $\\mathrm{s}$, the accumulated volumetric eigenstrain is proportional to $J t / h$ with proportionality factor given by the partial molar volume $\\Omega$ in $\\mathrm{m^3/mol}$. Use the sign convention that stripping ($j > 0$) induces a negative eigenstrain (shrinkage) in the reaction layer adjacent to the interface, and plating ($j  0$) induces a positive eigenstrain (expansion).\n- The layer behaves as a linearly elastic solid with Young’s modulus $E$ in $\\mathrm{Pa}$. Tensile chemical stress at the interface arises when negative eigenstrain is mechanically opposed. A physically motivated cap $\\sigma_{y}$ in $\\mathrm{Pa}$ represents the maximum attainable tensile chemical stress due to inelastic mechanisms (e.g., microcracking or viscoplastic relaxation), beyond which the stress does not increase.\n\nContact criteria:\n- Let the tensile chemical stress magnitude generated by the eigenstrain be denoted by $\\sigma_{\\mathrm{chem}}$ in $\\mathrm{Pa}$, bounded above by $\\sigma_{y}$. The net normal traction at the interface is then $T_{n} = P_{\\mathrm{ext}} - \\sigma_{\\mathrm{chem}}$. The interface remains in contact if $T_{n} \\ge 0$ and separates otherwise.\n- Define the critical external pressure required to just maintain contact as $P_{\\mathrm{crit}} = \\sigma_{\\mathrm{chem}}$. You must output $P_{\\mathrm{crit}}$ in $\\mathrm{Pa}$ for each test case, along with the corresponding boolean contact decision.\n\nFundamental bases to use in your derivation and algorithm design:\n- Faraday’s law linking current density and molar flux: $J = j / F$.\n- Linear elasticity through Hooke’s law in one dimension relating stress to mechanical strain opposing eigenstrain.\n- Mass conservation within the reaction-affected layer linking flux divergence to eigenstrain accumulation via the partial molar volume.\n\nRequired outputs for each test case:\n- A boolean indicating contact (use the literal values True or False) evaluated via $T_{n} \\ge 0$.\n- The critical external pressure $P_{\\mathrm{crit}}$ in $\\mathrm{Pa}$ as a floating-point value.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each test case contributes a two-element list of the form $[ \\text{boolean}, \\text{float} ]$. For example: $[[\\text{True}, 123.0],[\\text{False}, 0.0]]$.\n\nUse the following test suite that exercises different regimes (happy path, boundary, plating with external tension, yield-limited separation, and high-pressure contact overcoming capped stress). All quantities are to be treated in International System of Units (SI):\n\n- Test case $1$: $E = 5.0 \\times 10^{9} \\, \\mathrm{Pa}$, $h = 2.0 \\times 10^{-4} \\, \\mathrm{m}$, $\\Omega = 1.0 \\times 10^{-6} \\, \\mathrm{m^3/mol}$, $j = 5.0 \\times 10^{3} \\, \\mathrm{A/m^2}$, $t = 5.0 \\, \\mathrm{s}$, $P_{\\mathrm{ext}} = 8.0 \\times 10^{6} \\, \\mathrm{Pa}$, $\\sigma_{y} = 5.0 \\times 10^{7} \\, \\mathrm{Pa}$.\n- Test case $2$ (boundary): $E = 3.0 \\times 10^{10} \\, \\mathrm{Pa}$, $h = 1.0 \\times 10^{-4} \\, \\mathrm{m}$, $\\Omega = 1.0 \\times 10^{-6} \\, \\mathrm{m^3/mol}$, $j = 0.0 \\, \\mathrm{A/m^2}$, $t = 10.0 \\, \\mathrm{s}$, $P_{\\mathrm{ext}} = 0.0 \\, \\mathrm{Pa}$, $\\sigma_{y} = 1.0 \\times 10^{8} \\, \\mathrm{Pa}$.\n- Test case $3$ (plating with tension): $E = 2.0 \\times 10^{10} \\, \\mathrm{Pa}$, $h = 1.0 \\times 10^{-4} \\, \\mathrm{m}$, $\\Omega = 1.0 \\times 10^{-6} \\, \\mathrm{m^3/mol}$, $j = -5.0 \\times 10^{3} \\, \\mathrm{A/m^2}$, $t = 5.0 \\, \\mathrm{s}$, $P_{\\mathrm{ext}} = -1.0 \\times 10^{6} \\, \\mathrm{Pa}$, $\\sigma_{y} = 5.0 \\times 10^{7} \\, \\mathrm{Pa}$.\n- Test case $4$ (yield-limited separation): $E = 4.0 \\times 10^{10} \\, \\mathrm{Pa}$, $h = 1.0 \\times 10^{-4} \\, \\mathrm{m}$, $\\Omega = 1.0 \\times 10^{-6} \\, \\mathrm{m^3/mol}$, $j = 2.0 \\times 10^{4} \\, \\mathrm{A/m^2}$, $t = 10.0 \\, \\mathrm{s}$, $P_{\\mathrm{ext}} = 3.0 \\times 10^{6} \\, \\mathrm{Pa}$, $\\sigma_{y} = 5.0 \\times 10^{6} \\, \\mathrm{Pa}$.\n- Test case $5$ (high-pressure contact with capped stress): $E = 3.0 \\times 10^{10} \\, \\mathrm{Pa}$, $h = 2.0 \\times 10^{-4} \\, \\mathrm{m}$, $\\Omega = 1.0 \\times 10^{-6} \\, \\mathrm{m^3/mol}$, $j = 1.5 \\times 10^{4} \\, \\mathrm{A/m^2}$, $t = 10.0 \\, \\mathrm{s}$, $P_{\\mathrm{ext}} = 1.2 \\times 10^{8} \\, \\mathrm{Pa}$, $\\sigma_{y} = 1.0 \\times 10^{8} \\, \\mathrm{Pa}$.\n\nUse the Faraday constant $F = 96485.33212 \\, \\mathrm{C/mol}$ in all calculations. The angle unit is not applicable. All outputs involving physical units must be expressed in $\\mathrm{Pa}$. Your program must produce the single line described above and must not read any input.",
            "solution": "The problem statement is evaluated as valid. It is scientifically grounded in established principles of continuum mechanics and electrochemistry, including Faraday's law and linear elasticity. The model, while simplified to one dimension, is a plausible representation of chemo-mechanical coupling at a solid-solid interface in a battery. The problem is well-posed, providing all necessary parameters, constants, and unambiguous definitions for a unique solution to be calculated. The language is objective and precise, and the given numerical values are physically reasonable. No contradictions, ambiguities, or logical flaws are present.\n\nThe solution proceeds by first deriving the analytical expression for the tensile chemical stress, $\\sigma_{\\mathrm{chem}}$, which is then used to determine the contact state and the critical pressure, $P_{\\mathrm{crit}}$.\n\nFirst, we determine the molar flux, $J$, of lithium at the interface. According to Faraday's law, this is directly proportional to the current density, $j$, and inversely proportional to the Faraday constant, $F = 96485.33212 \\, \\mathrm{C/mol}$.\n$$J = \\frac{j}{F}$$\nThe sign convention is that $j > 0$ corresponds to stripping (lithium removal), and $j  0$ corresponds to plating (lithium deposition).\n\nNext, we calculate the accumulated volumetric eigenstrain, $\\epsilon_{\\mathrm{v}}^{\\star}$, in the reaction-affected layer of thickness $h$ over a time $t$. This eigenstrain results from the addition or removal of mass. The rate of volumetric change is proportional to the molar flux, $J$, and the partial molar volume of lithium, $\\Omega$. Over the thickness $h$, the rate of eigenstrain accumulation is approximated as a function of the flux divergence, $J/h$. The accumulated volumetric eigenstrain is therefore given by:\n$$\\epsilon_{\\mathrm{v}}^{\\star} = \\frac{\\Omega J t}{h}$$\nSubstituting the expression for $J$:\n$$\\epsilon_{\\mathrm{v}}^{\\star} = \\frac{\\Omega j t}{F h}$$\nThe problem specifies that stripping ($j>0$) induces a negative eigenstrain (shrinkage). Therefore, we must introduce a negative sign to align with this convention. In a one-dimensional model, it is assumed that this volumetric change is primarily expressed as a strain, $\\epsilon^{\\star}$, normal to the interface.\n$$\\epsilon^{\\star} = - \\frac{\\Omega j t}{F h}$$\n\nThis eigenstrain, $\\epsilon^{\\star}$, represents the strain the material would experience if unconstrained. However, the surrounding material mechanically opposes this strain, inducing an equal and opposite mechanical strain, $\\epsilon_{\\mathrm{mech}}$, to maintain compatibility (assuming rigid constraints).\n$$\\epsilon_{\\mathrm{mech}} = - \\epsilon^{\\star} = \\frac{\\Omega j t}{F h}$$\n\nThis mechanical strain generates a stress, $\\sigma_{\\mathrm{raw}}$, within the layer, as described by Hooke's Law in one dimension, where $E$ is the Young's modulus.\n$$\\sigma_{\\mathrm{raw}} = E \\epsilon_{\\mathrm{mech}} = E \\left(\\frac{\\Omega j t}{F h}\\right)$$\nIf $j > 0$ (stripping), $\\sigma_{\\mathrm{raw}}$ is positive, indicating a tensile stress. If $j \\le 0$ (plating or zero current), $\\sigma_{\\mathrm{raw}}$ is non-positive, indicating a compressive or zero stress. The problem defines $\\sigma_{\\mathrm{chem}}$ as the magnitude of the *tensile* chemical stress that tends to cause separation. Therefore, any compressive stress from plating does not contribute to decohesion and $\\sigma_{\\mathrm{chem}}$ should be zero in such cases. We can express this by taking the maximum of $\\sigma_{\\mathrm{raw}}$ and $0$.\n$$\\sigma_{\\mathrm{chem, uncapped}} = \\max\\left(0, E \\frac{\\Omega j t}{F h}\\right)$$\n\nThe problem further states that this tensile chemical stress is capped by a maximum value, $\\sigma_{y}$, due to inelastic mechanisms. This leads to the final expression for the effective tensile chemical stress, $\\sigma_{\\mathrm{chem}}$:\n$$\\sigma_{\\mathrm{chem}} = \\min(\\sigma_{\\mathrm{chem, uncapped}}, \\sigma_{y}) = \\min\\left( \\max\\left(0, E \\frac{\\Omega j t}{F h}\\right), \\sigma_{y} \\right)$$\n\nThe critical external pressure, $P_{\\mathrm{crit}}$, is defined as the pressure required to just maintain contact. This occurs when the external pressure exactly balances the tensile chemical stress.\n$$P_{\\mathrm{crit}} = \\sigma_{\\mathrm{chem}}$$\n\nFinally, the contact criterion is evaluated. The net normal traction at the interface, $T_{n}$, is the difference between the externally applied compressive pressure, $P_{\\mathrm{ext}}$, and the tensile chemical stress, $\\sigma_{\\mathrm{chem}}$.\n$$T_{n} = P_{\\mathrm{ext}} - \\sigma_{\\mathrm{chem}}$$\nThe interface remains in contact if this net traction is non-negative ($T_{n} \\ge 0$), and separates otherwise ($T_{n}  0$). The contact status is therefore a boolean value evaluated from the condition $P_{\\mathrm{ext}} \\ge \\sigma_{\\mathrm{chem}}$.\n\nThe algorithm for each test case is as follows:\n1.  Given the parameters $E$, $h$, $\\Omega$, $j$, $t$, $P_{\\mathrm{ext}}$, and $\\sigma_{y}$.\n2.  Calculate the uncapped tensile chemical stress: $\\sigma_{\\mathrm{chem, uncapped}} = \\max\\left(0, E \\frac{\\Omega j t}{F h}\\right)$.\n3.  Apply the yield cap to find the final tensile chemical stress and critical pressure: $\\sigma_{\\mathrm{chem}} = P_{\\mathrm{crit}} = \\min(\\sigma_{\\mathrm{chem, uncapped}}, \\sigma_{y})$.\n4.  Determine the contact state by evaluating the boolean expression $P_{\\mathrm{ext}} \\ge \\sigma_{\\mathrm{chem}}$.\n5.  Return the pair $[\\text{contact state}, P_{\\mathrm{crit}}]$.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Constructs and analyzes a 1D mechanical-chemical model of contact loss\n    in a Solid-State Battery to determine contact state and critical pressure.\n    \"\"\"\n\n    # Fundamental constant\n    F = 96485.33212  # Faraday constant in C/mol\n\n    # Test suite in SI units (Pa, m, m^3/mol, A/m^2, s)\n    test_cases = [\n        # Case 1: Happy path\n        # E, h, Omega, j, t, P_ext, sigma_y\n        (5.0e9, 2.0e-4, 1.0e-6, 5.0e3, 5.0, 8.0e6, 5.0e7),\n        # Case 2: Boundary (zero current)\n        (3.0e10, 1.0e-4, 1.0e-6, 0.0, 10.0, 0.0, 1.0e8),\n        # Case 3: Plating with external tension\n        (2.0e10, 1.0e-4, 1.0e-6, -5.0e3, 5.0, -1.0e6, 5.0e7),\n        # Case 4: Yield-limited separation\n        (4.0e10, 1.0e-4, 1.0e-6, 2.0e4, 10.0, 3.0e6, 5.0e6),\n        # Case 5: High-pressure contact with capped stress\n        (3.0e10, 2.0e-4, 1.0e-6, 1.5e4, 10.0, 1.2e8, 1.0e8),\n    ]\n\n    results = []\n    for case in test_cases:\n        E, h, Omega, j, t, P_ext, sigma_y = case\n\n        # Calculate the raw stress generated by the eigenstrain.\n        # This can be positive (tensile for stripping) or negative (compressive for plating).\n        if h > 0 and F > 0:\n            stress_raw = E * (Omega * j * t) / (F * h)\n        else:\n            # Avoid division by zero, though h is positive in all test cases.\n            stress_raw = 0.0\n\n        # The chemical stress causing separation is purely tensile.\n        # Compressive stress (j  0) helps maintain contact, so its contribution to\n        # tensile separation stress is zero.\n        # We use np.maximum for clean handling of the max(0, x) operation.\n        stress_uncapped_tensile = np.maximum(0.0, stress_raw)\n\n        # Apply the physically motivated stress cap (e.g., yield stress).\n        # The stress cannot exceed sigma_y.\n        sigma_chem = np.minimum(stress_uncapped_tensile, sigma_y)\n\n        # The critical external pressure is the pressure needed to exactly balance\n        # the tensile chemical stress.\n        P_crit = sigma_chem\n\n        # Determine contact state. Contact is maintained if the external compressive\n        # pressure is greater than or equal to the tensile chemical stress.\n        # P_ext being positive is compressive. A negative P_ext is an external tensile load.\n        contact_state = (P_ext >= sigma_chem)\n\n        # Append the results for the current test case.\n        # The required output format is a list [boolean, float].\n        results.append([contact_state, P_crit])\n\n    # Format the final output string exactly as specified: [[True, 123.0],[False, 0.0]]\n    # str() on a list correctly formats it as \"[True, 123.0]\".\n    # We join these string representations with commas and enclose in brackets.\n    output_str = f\"[{','.join(map(str, results))}]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "Real-world battery interfaces are inherently heterogeneous, with a wide distribution of local contact qualities. Simplified models often replace this complex reality with a single, uniform resistance value, but how accurate is this assumption? This advanced practice combines analytical derivation with Monte Carlo simulation to quantify the error introduced by such homogenization, highlighting a critical aspect of building predictive and robust battery simulations.",
            "id": "3929409",
            "problem": "A Solid-State Battery (SSB) interface carries current across a heterogeneous contact formed between a solid electrolyte and an electrode. Under purely ohmic conditions, the voltage drop across the interface is proportional to the area-specific interfacial resistance. Let the total interface area be partitioned into $N$ equal-area microcontacts. For each microcontact $i \\in \\{1,\\dots,N\\}$, suppose the local specific interfacial resistance $r_i$ (in $\\Omega \\cdot \\mathrm{m}^2$) is a positive random variable. A fraction $f_{\\mathrm{loss}}$ of microcontacts are open-circuit (no contact), which we model as $r_i = +\\infty$ (equivalently, zero conductance). The remaining fraction $1 - f_{\\mathrm{loss}}$ have $r_i$ drawn independently from a lognormal distribution, meaning $\\ln r_i$ is normally distributed with mean $\\mu$ and standard deviation $\\sigma$, where $\\mu$ and $\\sigma$ are real-valued parameters.\n\nFundamental facts:\n- Ohm's law at the interface gives $V = J \\, r_{\\mathrm{eq}}$, where $V$ is voltage (in $\\mathrm{V}$), $J$ is current density (in $\\mathrm{A/m^2}$), and $r_{\\mathrm{eq}}$ is the equivalent area-specific resistance (in $\\Omega \\cdot \\mathrm{m}^2$).\n- The parallel combination of equal-area microcontacts implies\n$$\n\\frac{1}{r_{\\mathrm{eq}}} \\;=\\; \\frac{1}{N} \\sum_{i=1}^{N} \\frac{1}{r_i},\n$$\nwith the convention $1/(+\\infty) = 0$ for open-circuit microcontacts.\n\nMany automated battery design models replace the distributed $r_i$ by a single lumped area-specific interfacial resistance $r_{\\mathrm{single}}$, often taken as the arithmetic mean of the non-open-circuit local resistances,\n$$\nr_{\\mathrm{single}} \\;=\\; \\frac{1}{K} \\sum_{i=1}^{N} r_i \\,\\mathbf{1}\\{r_i  +\\infty\\},\n$$\nwhere $K$ is the number of non-open-circuit microcontacts and $\\mathbf{1}\\{\\cdot\\}$ is the indicator function.\n\nDefine the relative voltage error\n$$\n\\epsilon \\;=\\; \\frac{V_{\\mathrm{single}} - V_{\\mathrm{true}}}{V_{\\mathrm{true}}} \\;=\\; \\frac{J r_{\\mathrm{single}} - J r_{\\mathrm{eq}}}{J r_{\\mathrm{eq}}} \\;=\\; \\frac{r_{\\mathrm{single}}}{r_{\\mathrm{eq}}} - 1,\n$$\nwhich is dimensionless. Assume the lognormal parameters imply finite moments.\n\nTask:\n1. Starting from Ohm's law and the parallel-resistor relation above, derive the expression for $r_{\\mathrm{eq}}$ and show that when $N$ is large and the microcontact states are independent, the law of large numbers implies\n$$\n\\frac{1}{r_{\\mathrm{eq}}} \\;\\approx\\; (1 - f_{\\mathrm{loss}})\\,\\mathbb{E}\\!\\left[\\frac{1}{r}\\right],\n$$\nand\n$$\nr_{\\mathrm{single}} \\;\\approx\\; \\mathbb{E}[r],\n$$\nwhere $r$ denotes a lognormal random variable with parameters $(\\mu,\\sigma)$ for non-open-circuit microcontacts. Use properties of the lognormal distribution to obtain a closed-form analytic prediction for the relative error $\\epsilon$ in terms of $f_{\\mathrm{loss}}$ and $\\sigma$.\n\n2. Implement a Monte Carlo estimator of $r_{\\mathrm{eq}}$ and $r_{\\mathrm{single}}$ for finite $N$ as specified, and compute the sample-based $\\epsilon$ using the above definition for given parameters. Compare it to the analytic prediction from part $1$.\n\nScientific realism requirements:\n- Treat $r_i$ as area-specific resistance in $\\Omega \\cdot \\mathrm{m}^2$.\n- Treat $J$ as current density in $\\mathrm{A/m^2}$.\n- Ensure that the final numerical outputs are dimensionless decimals.\n\nTest suite:\nProvide a program that computes the sample-based relative error and the analytic large-$N$ prediction for each of the following parameter sets. Use fixed seeds to ensure reproducibility, with seeds $s = 1, 2, 3, 4, 5$ respectively. For each test case, express the current density $J$ in $\\mathrm{A/m^2}$, and the lognormal parameters $(\\mu,\\sigma)$ in natural logarithm units.\n\n- Case $1$ (general, moderate heterogeneity): $N = 10000$, $\\mu = \\ln(10^{-4})$, $\\sigma = 0.5$, $f_{\\mathrm{loss}} = 0.10$, $J = 20$, seed $s=1$.\n- Case $2$ (near-uniform contacts): $N = 5000$, $\\mu = \\ln(5 \\times 10^{-5})$, $\\sigma = 0.01$, $f_{\\mathrm{loss}} = 0.0$, $J = 10$, seed $s=2$.\n- Case $3$ (heavy heterogeneity and significant loss): $N = 20000$, $\\mu = \\ln(10^{-4})$, $\\sigma = 1.0$, $f_{\\mathrm{loss}} = 0.30$, $J = 15$, seed $s=3$.\n- Case $4$ (finite-sample edge): $N = 50$, $\\mu = \\ln(10^{-4})$, $\\sigma = 1.2$, $f_{\\mathrm{loss}} = 0.20$, $J = 5$, seed $s=4$.\n- Case $5$ (high loss fraction): $N = 20000$, $\\mu = \\ln(10^{-4})$, $\\sigma = 0.8$, $f_{\\mathrm{loss}} = 0.95$, $J = 20$, seed $s=5$.\n\nAnswer specification:\n- For each case, output a list with two floats: $[\\epsilon_{\\mathrm{sample}}, \\epsilon_{\\mathrm{analytic}}]$.\n- The program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, in the order of the cases above, for example $[[\\epsilon_1^{\\mathrm{sample}},\\epsilon_1^{\\mathrm{analytic}}],[\\epsilon_2^{\\mathrm{sample}},\\epsilon_2^{\\mathrm{analytic}}],\\dots]$.",
            "solution": "The problem requires the derivation of an analytic expression for the relative voltage error, $\\epsilon$, in a simplified model of a solid-state battery interface and its comparison with a numerical Monte Carlo simulation. The validation of the problem statement has been completed and the problem is deemed valid, scientifically grounded, and well-posed. We now proceed with the solution.\n\nThe core of the problem lies in contrasting two methods for calculating the equivalent area-specific resistance of the interface: a physically correct model based on parallel conductances ($r_{\\mathrm{eq}}$) and a simplified model based on the arithmetic mean of local resistances ($r_{\\mathrm{single}}$).\n\nThe relative voltage error is defined as:\n$$\n\\epsilon = \\frac{V_{\\mathrm{single}} - V_{\\mathrm{true}}}{V_{\\mathrm{true}}}\n$$\nUnder purely ohmic conditions, $V = J r$, where $J$ is the current density. The \"true\" voltage drop corresponds to the physically correct equivalent resistance $r_{\\mathrm{eq}}$, so $V_{\\mathrm{true}} = J r_{\\mathrm{eq}}$. The voltage drop in the simplified model is $V_{\\mathrm{single}} = J r_{\\mathrm{single}}$. The current density $J$ is constant across the interface, allowing us to write:\n$$\n\\epsilon = \\frac{J r_{\\mathrm{single}} - J r_{\\mathrm{eq}}}{J r_{\\mathrm{eq}}} = \\frac{r_{\\mathrm{single}}}{r_{\\mathrm{eq}}} - 1\n$$\nThis shows that the relative voltage error is independent of the current density $J$, depending only on the ratio of the two resistance values.\n\n### Part 1: Analytical Derivation in the Large-$N$ Limit\n\nWe will derive the expressions for $r_{\\mathrm{eq}}$ and $r_{\\mathrm{single}}$ in the limit of a large number of microcontacts ($N \\to \\infty$) using the Law of Large Numbers (LLN).\n\n**1. Equivalent Resistance, $r_{\\mathrm{eq}}$**\n\nThe equivalent resistance $r_{\\mathrm{eq}}$ is defined by the parallel combination of all $N$ microcontact conductances. The total conductance is the sum of individual conductances. For an interface partitioned into $N$ equal-area microcontacts, the equivalent conductance per unit area is the average of the local conductances per unit area. Let $g_i = 1/r_i$ be the local area-specific conductance.\n$$\n\\frac{1}{r_{\\mathrm{eq}}} = \\frac{1}{N} \\sum_{i=1}^{N} \\frac{1}{r_i} = \\frac{1}{N} \\sum_{i=1}^{N} g_i\n$$\nThis expression is the sample mean of the random variable $g = 1/r$. According to the LLN, as $N \\to \\infty$, the sample mean converges to the expected value:\n$$\n\\frac{1}{r_{\\mathrm{eq}}} \\approx \\mathbb{E}[g] = \\mathbb{E}\\left[\\frac{1}{r}\\right]\n$$\nThe local resistance $r_i$ follows a mixed distribution: with probability $f_{\\mathrm{loss}}$, $r_i = +\\infty$ (so $g_i=0$); with probability $1-f_{\\mathrm{loss}}$, $r_i$ is drawn from a lognormal distribution with parameters $(\\mu, \\sigma)$. Let's denote a random variable from this lognormal part as $r_{\\mathrm{log}} \\sim \\mathrm{Lognormal}(\\mu, \\sigma^2)$. The expectation is calculated over the entire probability space:\n$$\n\\mathbb{E}\\left[\\frac{1}{r}\\right] = P(r=+\\infty) \\cdot \\mathbb{E}\\left[\\frac{1}{r} \\middle| r=+\\infty\\right] + P(r+\\infty) \\cdot \\mathbb{E}\\left[\\frac{1}{r} \\middle| r+\\infty\\right]\n$$\n$$\n\\mathbb{E}\\left[\\frac{1}{r}\\right] = f_{\\mathrm{loss}} \\cdot (0) + (1-f_{\\mathrm{loss}}) \\cdot \\mathbb{E}\\left[\\frac{1}{r_{\\mathrm{log}}}\\right]\n$$\nTherefore, we have the first required result:\n$$\n\\frac{1}{r_{\\mathrm{eq}}} \\approx (1-f_{\\mathrm{loss}}) \\, \\mathbb{E}\\left[\\frac{1}{r_{\\mathrm{log}}}\\right]\n$$\n\n**2. Single Lumped Resistance, $r_{\\mathrm{single}}$**\n\nThe simplified resistance $r_{\\mathrm{single}}$ is defined as the arithmetic mean of only the non-open-circuit (finite) local resistances:\n$$\nr_{\\mathrm{single}} = \\frac{1}{K} \\sum_{i=1}^{N} r_i \\, \\mathbf{1}\\{r_i  +\\infty\\}\n$$\nwhere $K = \\sum_{i=1}^{N} \\mathbf{1}\\{r_i  +\\infty\\}$ is the number of conducting microcontacts. This is precisely the sample mean of the resistances conditional on them being finite. By the LLN, as the number of samples $K$ becomes large (which occurs when $N \\to \\infty$ and $f_{\\mathrm{loss}}  1$), this sample mean converges to the expected value of the conditional distribution:\n$$\nr_{\\mathrm{single}} \\approx \\mathbb{E}[r | r  +\\infty] = \\mathbb{E}[r_{\\mathrm{log}}]\n$$\nThis confirms the second required result.\n\n**3. Analytic Expression for Relative Error, $\\epsilon_{\\mathrm{analytic}}$**\n\nWe now use the properties of the lognormal distribution to find the expectations. If $X \\sim \\mathrm{Lognormal}(\\mu, \\sigma^2)$, then its $k$-th moment is given by $\\mathbb{E}[X^k] = e^{k\\mu + \\frac{1}{2}k^2\\sigma^2}$. For our resistance $r_{\\mathrm{log}}$:\n- The expectation of the resistance ($k=1$): $\\mathbb{E}[r_{\\mathrm{log}}] = e^{\\mu + \\frac{1}{2}\\sigma^2}$.\n- The expectation of the conductance ($k=-1$): $\\mathbb{E}[1/r_{\\mathrm{log}}] = \\mathbb{E}[r_{\\mathrm{log}}^{-1}] = e^{-\\mu + \\frac{1}{2}(-1)^2\\sigma^2} = e^{-\\mu + \\frac{1}{2}\\sigma^2}$.\n\nSubstituting these into our large-$N$ approximations for $r_{\\mathrm{single}}$ and $r_{\\mathrm{eq}}$:\n$$\nr_{\\mathrm{single}} \\approx e^{\\mu + \\frac{1}{2}\\sigma^2}\n$$\n$$\n\\frac{1}{r_{\\mathrm{eq}}} \\approx (1 - f_{\\mathrm{loss}}) e^{-\\mu + \\frac{1}{2}\\sigma^2} \\quad \\implies \\quad r_{\\mathrm{eq}} \\approx \\frac{1}{(1-f_{\\mathrm{loss}}) e^{-\\mu + \\frac{1}{2}\\sigma^2}}\n$$\nNow, we can find the analytic expression for the relative error, $\\epsilon_{\\mathrm{analytic}}$, in the large-$N$ limit:\n$$\n\\epsilon_{\\mathrm{analytic}} = \\frac{r_{\\mathrm{single}}}{r_{\\mathrm{eq}}} - 1 \\approx \\left( e^{\\mu + \\frac{1}{2}\\sigma^2} \\right) \\left( (1 - f_{\\mathrm{loss}}) e^{-\\mu + \\frac{1}{2}\\sigma^2} \\right) - 1\n$$\n$$\n\\epsilon_{\\mathrm{analytic}} = (1 - f_{\\mathrm{loss}}) e^{(\\mu + \\frac{1}{2}\\sigma^2) + (-\\mu + \\frac{1}{2}\\sigma^2)} - 1\n$$\n$$\n\\epsilon_{\\mathrm{analytic}} = (1 - f_{\\mathrm{loss}}) e^{\\sigma^2} - 1\n$$\nThis is the final closed-form prediction. It depends only on the fraction of lost contacts $f_{\\mathrm{loss}}$ and the variance of the log-resistance $\\sigma^2$, not on the mean of the log-resistance $\\mu$.\n\n### Part 2: Monte Carlo Simulation Design\n\nTo evaluate the system for a finite number of microcontacts $N$, we will implement a Monte Carlo simulation.\n\n**1. Simulation Procedure**\n\nFor each test case with parameters $(N, \\mu, \\sigma, f_{\\mathrm{loss}})$ and a given random seed $s$:\n1.  Initialize a random number generator with the seed $s$ for reproducibility.\n2.  Generate an array of $N$ resistance values $\\{r_i\\}$ by first drawing $N$ samples from a lognormal distribution $\\mathrm{Lognormal}(\\mu, \\sigma^2)$.\n3.  Simulate contact loss: For each of the $N$ microcontacts, decide if it is an open circuit with probability $f_{\\mathrm{loss}}$. This is done by generating $N$ uniform random numbers and comparing them to $f_{\\mathrm{loss}}$. Let the set of conducting microcontacts be $S$, with size $K = |S|$.\n4.  Calculate the sample-based lumped resistance, $r_{\\mathrm{single, sample}}$. This is the arithmetic mean of the resistances of the $K$ conducting microcontacts. If $K=0$, this quantity is undefined; however, for the given test cases, $K > 0$ with very high probability.\n$$\nr_{\\mathrm{single, sample}} = \\frac{1}{K} \\sum_{i \\in S} r_i\n$$\n5.  Calculate the sample-based equivalent resistance, $r_{\\mathrm{eq, sample}}$. This is derived from the mean conductance over all $N$ sites, where open-circuit sites have zero conductance.\n$$\n\\frac{1}{r_{\\mathrm{eq, sample}}} = \\frac{1}{N} \\sum_{i=1}^N \\frac{1}{r_i} = \\frac{1}{N} \\sum_{i \\in S} \\frac{1}{r_i}\n$$\n6.  Calculate the sample-based relative error, $\\epsilon_{\\mathrm{sample}}$.\n$$\n\\epsilon_{\\mathrm{sample}} = \\frac{r_{\\mathrm{single, sample}}}{r_{\\mathrm{eq, sample}}} - 1 = \\left( \\frac{1}{K} \\sum_{i \\in S} r_i \\right) \\left( \\frac{1}{N} \\sum_{i \\in S} \\frac{1}{r_i} \\right)^{-1} - 1 = \\frac{N}{K} \\left(\\frac{1}{K}\\sum_{i \\in S} r_i\\right) \\left(\\sum_{i \\in S} \\frac{1}{r_i}\\right) - 1\n$$\nA more computationally stable form is:\n$$\n\\epsilon_{\\mathrm{sample}} = \\frac{(\\sum_{i \\in S} r_i) (\\sum_{i \\in S} 1/r_i)}{K \\cdot N} - 1\n$$\nThis expression avoids intermediate large or small numbers and is directly implemented. For each test case, we compute this $\\epsilon_{\\mathrm{sample}}$ and compare it with the theoretical $\\epsilon_{\\mathrm{analytic}} = (1 - f_{\\mathrm{loss}}) e^{\\sigma^2} - 1$.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the sample-based and analytic relative voltage error for a\n    solid-state battery interface model across a suite of test cases.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (N, mu, sigma, f_loss, J, seed)\n    # Note: J is provided for context but not used in the error calculation.\n    test_cases = [\n        (10000, np.log(1e-4), 0.5, 0.10, 20, 1),\n        (5000, np.log(5e-5), 0.01, 0.0, 10, 2),\n        (20000, np.log(1e-4), 1.0, 0.30, 15, 3),\n        (50, np.log(1e-4), 1.2, 0.20, 5, 4),\n        (20000, np.log(1e-4), 0.8, 0.95, 20, 5)\n    ]\n\n    results = []\n    for case in test_cases:\n        N, mu, sigma, f_loss, _, seed = case\n\n        # --- 1. Analytic Prediction ---\n        # The analytic relative error in the large-N limit is given by:\n        # epsilon_analytic = (1 - f_loss) * exp(sigma^2) - 1\n        epsilon_analytic = (1 - f_loss) * np.exp(sigma**2) - 1\n\n        # --- 2. Monte Carlo Simulation ---\n        # Initialize a random number generator with the specified seed for reproducibility.\n        rng = np.random.default_rng(seed)\n\n        # Generate N resistances from the specified lognormal distribution.\n        # This represents the population of potential microcontact resistances.\n        # r = exp(X), where X ~ N(mu, sigma^2)\n        log_r_population = rng.normal(loc=mu, scale=sigma, size=N)\n        r_population = np.exp(log_r_population)\n        \n        # Simulate contact loss. Each microcontact has an independent probability\n        # f_loss of being an open circuit (r_i = +inf, conductance = 0).\n        is_lost = rng.random(size=N)  f_loss\n        \n        # Isolate the resistances of the conducting (non-lost) microcontacts.\n        r_good_contacts = r_population[~is_lost]\n        \n        # K is the number of conducting microcontacts.\n        K = len(r_good_contacts)\n\n        if K == 0:\n            # If all contacts are lost, r_eq is infinite.\n            # The definition of r_single (mean of an empty set) is ill-defined (NaN).\n            # The true voltage is infinite, while the simplified model is broken.\n            # a physically sensible limit for epsilon is -1.\n            epsilon_sample = -1.0\n        else:\n            # Calculate the sum of resistances and the sum of conductances\n            # for the conducting microcontacts.\n            sum_r_good = np.sum(r_good_contacts)\n            sum_inv_r_good = np.sum(1.0 / r_good_contacts)\n\n            # The sample-based relative error is given by:\n            # epsilon_sample = (sum(r_i) * sum(1/r_i)) / (K * N) - 1\n            # where the sums are over the K good contacts.\n            epsilon_sample = (sum_r_good * sum_inv_r_good) / (K * N) - 1\n        \n        results.append([epsilon_sample, epsilon_analytic])\n\n    # Final print statement in the exact required format.\n    # The output is a list of lists, e.g., [[val1, val2], [val3, val4], ...]\n    # We construct the string representation manually for precise formatting.\n    output_str = \"[\" + \",\".join(f\"[{s},{a}]\" for s, a in results) + \"]\"\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
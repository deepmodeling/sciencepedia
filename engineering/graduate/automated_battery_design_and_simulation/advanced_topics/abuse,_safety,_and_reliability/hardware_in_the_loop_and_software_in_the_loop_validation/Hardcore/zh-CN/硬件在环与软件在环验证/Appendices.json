{
    "hands_on_practices": [
        {
            "introduction": "在设计任何状态估算器之前，一个最基本的问题是：我们想要估算的系统状态（例如荷电状态 $SOC$），是否能够从我们可用的测量值（例如电压）中唯一地确定出来？本练习将电池的物理特性（开路电压-$SOC$曲线）与可观测性这一关键的数学概念联系起来。通过推导可观测性格拉姆矩阵，您将深刻理解为何在某些 $SOC$ 区域或对某些化学体系的电池，其状态监控更为困难，这是电池管理系统（BMS）算法设计与验证的第一步。",
            "id": "3918287",
            "problem": "为了实现电池的自动化设计和仿真，使用包含单个阻容极化支路和充电状态（SOC）的等效电路模型对电池组进行建模。该模型被嵌入到软件在环（SIL）和硬件在环（HIL）验证环境中。考虑一个在有限时间范围 $[0, T]$ 内的恒流充电实验，其中充电电流 $I$ 和标称状态 $(\\mathrm{SOC}_{0}, v_{rc,0})$ 已知。端电压测量值可用。将开路电压（OCV）定义为函数 $E(\\mathrm{SOC})$，其局部斜率为 $k \\equiv \\partial E/\\partial \\mathrm{SOC}\\big|_{\\mathrm{SOC}_{0}}$。\n\n从极化支路中的电荷守恒和线性储能出发，在恒流充电条件下，围绕 $(\\mathrm{SOC}_{0}, v_{rc,0})$ 对系统进行线性化。设小信号状态向量为 $x = [x_{1}, x_{2}]^{\\top}$，其中 $x_{1}$ 是 SOC 偏差，$x_{2}$ 是极化电压偏差。假设串联电阻引起的电阻压降已通过使用已知电流 $I$ 在后期处理中得到补偿，因此小信号输出为 $y(t) = E(\\mathrm{SOC}_{0} + x_{1}(t)) - E(\\mathrm{SOC}_{0}) + x_{2}(t)$。\n\n在这些条件下：\n- SOC 偏差 $x_{1}$ 遵循恒定电流下的电荷守恒（无小信号输入），极化电压 $x_{2}$ 以时间常数 $\\tau > 0$ 进行弛豫。\n- 局部线性化产生一个线性时不变状态空间模型，其状态矩阵 $A$ 和输出矩阵 $C$ 取决于 $k$ 和 $\\tau$。\n\n通过推导线性化模型在 $[0, T]$ 上的有限时间范围可观测性格拉姆矩阵并计算其行列式，为 SOC 构建一个可观测性测试。然后，为消除单位并分离时间尺度的作用，报告无量纲归一化行列式\n$$\\Delta \\equiv \\frac{\\det(W_{o})}{k^{2} \\tau^{2}},$$\n其中 $W_{o}$ 是 $[0, T]$ 上的可观测性格拉姆矩阵。\n\n通过您的推导，论证斜率 $k = \\partial E/\\partial \\mathrm{SOC}\\big|_{\\mathrm{SOC}_{0}}$ 如何进入可观测性格拉姆矩阵并影响 SOC 的可观测性。将您的最终答案表示为关于 $T$ 和 $\\tau$ 的 $\\Delta$ 的单个闭式解析表达式。无需进行数值评估或四舍五入。使用的缩写：充电状态 (SOC)、开路电压 (OCV)、硬件在环 (HIL)、软件在环 (SIL)。",
            "solution": "用户希望我按照以下步骤解决问题：\n1.  **验证问题陈述**：我将检查其科学合理性、良构性及其他标准。\n2.  如果有效，**推导解答**：我将构建状态空间模型，推导可观测性格拉姆矩阵，计算其行列式，并最终求得归一化行列式 $\\Delta$。\n\n### 步骤 1：提取已知条件\n-   系统：使用单个阻容（RC）极化支路和充电状态（SOC）建模的电池组。\n-   验证环境：软件在环（SIL）和硬件在环（HIL）。\n-   实验：在时间范围 $[0, T]$ 内以电流 $I$ 进行恒流充电。\n-   初始状态：标称状态 $(\\mathrm{SOC}_{0}, v_{rc,0})$。\n-   测量：端电压。\n-   定义：开路电压（OCV）是函数 $E(\\mathrm{SOC})$。\n-   参数：$k \\equiv \\partial E/\\partial \\mathrm{SOC}\\big|_{\\mathrm{SOC}_{0}}$。\n-   线性化：围绕 $(\\mathrm{SOC}_{0}, v_{rc,0})$。\n-   小信号状态向量：$x = [x_{1}, x_{2}]^{\\top}$，其中 $x_{1}$ 是 SOC 偏差，$x_{2}$ 是极化电压偏差。\n-   小信号输出：$y(t) = E(\\mathrm{SOC}_{0} + x_{1}(t)) - E(\\mathrm{SOC}_{0}) + x_{2}(t)$，假设串联电阻压降已补偿。\n-   动力学假设 1：SOC 偏差 $x_{1}$ 遵循恒流下的电荷守恒（无小信号输入）。\n-   动力学假设 2：极化电压偏差 $x_{2}$ 以时间常数 $\\tau > 0$ 进行弛豫。\n-   任务 1：通过推导有限时间范围可观测性格拉姆矩阵 $W_{o}$（在 $[0, T]$上）来构建可观测性测试。\n-   任务 2：计算其行列式 $\\det(W_o)$。\n-   任务 3：报告无量纲归一化行列式 $\\Delta \\equiv \\frac{\\det(W_{o})}{k^{2} \\tau^{2}}$。\n-   任务 4：通过推导论证 $k$ 如何影响 SOC 的可观测性。\n-   任务 5：提供关于 $T$ 和 $\\tau$ 的 $\\Delta$ 的闭式表达式作为最终答案。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据。使用带 RC 支路的等效电路模型（ECM）、状态空间表示、线性化和可观测性分析都是电池建模、仿真和自动化设计控制中的标准、成熟技术。该问题是良构的，提供了足够的信息和明确的假设来构建线性时不变（LTI）模型并执行所需的分析。语言客观、精确。诸如用于自治系统可观测性分析的“无小信号输入”以及小信号输出的定义形式等假设是明确的，并允许唯一的形式化。问题是自洽的，没有违反任何物理或数学原理。没有矛盾或含糊之处。\n\n### 步骤 3：结论与行动\n问题有效。我将继续进行解答。\n\n解答结构如下：首先，我们根据问题描述推导线性化状态空间模型 $(A, C)$。其次，我们论证 OCV 斜率 $k$ 在可观测性中的作用。第三，我们计算有限时间范围可观测性格拉姆矩阵 $W_o$。第四，我们计算其行列式。最后，我们推导归一化行列式 $\\Delta$。\n\n**1. 状态空间模型构建**\n\n我们需要为小信号偏差 $x(t) = [x_1(t), x_2(t)]^\\top$ 找到一个形式为 $\\dot{x}(t) = Ax(t)$ 和 $y(t) = Cx(t)$ 的线性时不变状态空间模型。\n\n状态 $x_1$ 代表 SOC 偏差。SOC 的基本方程是 $\\frac{d(\\mathrm{SOC})}{dt} = \\frac{I(t)}{Q_n}$，其中 $Q_n$ 是标称容量，$I(t)$ 是输入电流。对于 LTI 系统的可观测性分析，我们考虑自治系统（零输入）。问题陈述中提到“无小信号输入”，这意味着我们分析的是系统的固有动力学。SOC 本身不是其他状态（SOC, $v_{rc}$）的函数，而是由电流的积分驱动。在没有小信号电流输入的情况下，SOC *偏差* 的变化率为零。这对应于一个纯积分器的动力学。因此，$x_1$ 的状态方程是：\n$$\n\\dot{x}_1(t) = 0\n$$\n\n状态 $x_2$ 是极化电压偏差。问题陈述指出，该偏差“以时间常数 $\\tau > 0$ 进行弛豫”。这描述了一个一阶衰减过程，这是 RC 电路在没有输入电流时电压响应的特征。因此，其动力学为：\n$$\n\\dot{x}_2(t) = -\\frac{1}{\\tau} x_2(t)\n$$\n\n将这两个方程组合成矩阵形式 $\\dot{x} = Ax$：\n$$\n\\begin{pmatrix} \\dot{x}_1 \\\\ \\dot{x}_2 \\end{pmatrix} = \\begin{pmatrix} 0  0 \\\\ 0  -\\frac{1}{\\tau} \\end{pmatrix} \\begin{pmatrix} x_1 \\\\ x_2 \\end{pmatrix}\n$$\n因此，状态矩阵 $A$ 为：\n$$\nA = \\begin{pmatrix} 0  0 \\\\ 0  -\\frac{1}{\\tau} \\end{pmatrix}\n$$\n\n接下来，我们构建输出方程 $y = Cx$。问题将小信号输出定义为 $y(t) = E(\\mathrm{SOC}_{0} + x_{1}(t)) - E(\\mathrm{SOC}_{0}) + x_{2}(t)$。为了将其线性化，我们对 $E(\\mathrm{SOC})$ 在 $\\mathrm{SOC}_0$ 附近使用一阶泰勒展开：\n$$\nE(\\mathrm{SOC}_{0} + x_{1}(t)) \\approx E(\\mathrm{SOC}_{0}) + \\frac{\\partial E}{\\partial \\mathrm{SOC}}\\bigg|_{\\mathrm{SOC}_{0}} x_1(t) = E(\\mathrm{SOC}_{0}) + k x_1(t)\n$$\n将此代入 $y(t)$ 的表达式中：\n$$\ny(t) \\approx (E(\\mathrm{SOC}_{0}) + k x_1(t)) - E(\\mathrm{SOC}_{0}) + x_2(t) = k x_1(t) + x_2(t)\n$$\n以矩阵形式表示为：\n$$\ny(t) = \\begin{pmatrix} k  1 \\end{pmatrix} \\begin{pmatrix} x_1(t) \\\\ x_2(t) \\end{pmatrix}\n$$\n因此，输出矩阵 $C$ 为：\n$$\nC = \\begin{pmatrix} k  1 \\end{pmatrix}\n$$\n\n**2. 论证 $k$ 在可观测性中的作用**\n\n可观测性决定了系统的初始状态是否可以根据一段时间内的输出测量值唯一确定。参数 $k = \\partial E/\\partial\\mathrm{SOC}$ 表示开路电压对充电状态变化的敏感度。\n\n从物理上看，状态 $x_1$（SOC 偏差）仅通过项 $k x_1$ 影响输出 $y$。如果 $k=0$，则 OCV-SOC 曲线在工作点是平坦的，这意味着电压不提供关于 SOC 微小变化的信息。在这种情况下，输出变为 $y(t) = x_2(t)$，并且无法从测量中推断出任何关于 $x_1$ 的信息，从而使 SOC 不可观测。\n\n从数学上讲，这可以通过卡尔曼可观测性秩条件来验证。该系统的可观测性矩阵 $\\mathcal{O}$ 是：\n$$\n\\mathcal{O} = \\begin{pmatrix} C \\\\ CA \\end{pmatrix}\n$$\n我们计算 $CA$：\n$$\nCA = \\begin{pmatrix} k  1 \\end{pmatrix} \\begin{pmatrix} 0  0 \\\\ 0  -\\frac{1}{\\tau} \\end{pmatrix} = \\begin{pmatrix} 0  -\\frac{1}{\\tau} \\end{pmatrix}\n$$\n可观测性矩阵是：\n$$\n\\mathcal{O} = \\begin{pmatrix} k  1 \\\\ 0  -\\frac{1}{\\tau} \\end{pmatrix}\n$$\n系统可观测当且仅当 $\\mathcal{O}$ 是满秩的，对于一个 $2 \\times 2$ 矩阵，这意味着其行列式非零。\n$$\n\\det(\\mathcal{O}) = (k)\\left(-\\frac{1}{\\tau}\\right) - (1)(0) = -\\frac{k}{\\tau}\n$$\n由于 $\\tau > 0$，系统可观测当且仅当 $k \\neq 0$。这为 $k$ 的关键作用提供了严格的论证。\n\n**3. 可观测性格拉姆矩阵计算**\n\n在区间 $[0, T]$ 上的有限时间范围可观测性格拉姆矩阵由下式给出：\n$$\nW_o = \\int_0^T e^{A^\\top t} C^\\top C e^{At} dt\n$$\n首先，我们求状态转移矩阵 $e^{At}$。由于 $A$ 是一个对角矩阵，其指数是对角元素的指数：\n$$\ne^{At} = \\begin{pmatrix} e^{0 \\cdot t}  0 \\\\ 0  e^{-\\frac{1}{\\tau}t} \\end{pmatrix} = \\begin{pmatrix} 1  0 \\\\ 0  e^{-t/\\tau} \\end{pmatrix}\n$$\n由于 $A$ 是对称的，所以 $A^\\top = A$，因此 $e^{A^\\top t} = e^{At}$。\n接下来，我们计算乘积 $C^\\top C$：\n$$\nC^\\top C = \\begin{pmatrix} k \\\\ 1 \\end{pmatrix} \\begin{pmatrix} k  1 \\end{pmatrix} = \\begin{pmatrix} k^2  k \\\\ k  1 \\end{pmatrix}\n$$\n现在我们计算被积函数 $e^{A^\\top t} C^\\top C e^{At}$：\n$$\ne^{At} C^\\top C e^{At} = \\begin{pmatrix} 1  0 \\\\ 0  e^{-t/\\tau} \\end{pmatrix} \\begin{pmatrix} k^2  k \\\\ k  1 \\end{pmatrix} \\begin{pmatrix} 1  0 \\\\ 0  e^{-t/\\tau} \\end{pmatrix}\n$$\n$$\n= \\begin{pmatrix} k^2  k \\\\ k e^{-t/\\tau}  e^{-t/\\tau} \\end{pmatrix} \\begin{pmatrix} 1  0 \\\\ 0  e^{-t/\\tau} \\end{pmatrix} = \\begin{pmatrix} k^2  k e^{-t/\\tau} \\\\ k e^{-t/\\tau}  e^{-2t/\\tau} \\end{pmatrix}\n$$\n最后，我们将此矩阵从 $t=0$ 到 $t=T$ 进行积分，以获得 $W_o$：\n$$\nW_o = \\int_0^T \\begin{pmatrix} k^2  k e^{-t/\\tau} \\\\ k e^{-t/\\tau}  e^{-2t/\\tau} \\end{pmatrix} dt = \\begin{pmatrix} \\int_0^T k^2 dt  \\int_0^T k e^{-t/\\tau} dt \\\\ \\int_0^T k e^{-t/\\tau} dt  \\int_0^T e^{-2t/\\tau} dt \\end{pmatrix}\n$$\n我们计算每个积分：\n$$\nW_{o,11} = \\int_0^T k^2 dt = k^2 [t]_0^T = k^2 T\n$$\n$$\nW_{o,12} = W_{o,21} = \\int_0^T k e^{-t/\\tau} dt = k \\left[ -\\tau e^{-t/\\tau} \\right]_0^T = k(-\\tau e^{-T/\\tau} + \\tau e^0) = k\\tau(1 - e^{-T/\\tau})\n$$\n$$\nW_{o,22} = \\int_0^T e^{-2t/\\tau} dt = \\left[ -\\frac{\\tau}{2} e^{-2t/\\tau} \\right]_0^T = -\\frac{\\tau}{2} e^{-2T/\\tau} + \\frac{\\tau}{2} e^0 = \\frac{\\tau}{2}(1 - e^{-2T/\\tau})\n$$\n可观测性格拉姆矩阵是：\n$$\nW_o = \\begin{pmatrix} k^2 T  k\\tau(1 - e^{-T/\\tau}) \\\\ k\\tau(1 - e^{-T/\\tau})  \\frac{\\tau}{2}(1 - e^{-2T/\\tau}) \\end{pmatrix}\n$$\n在这里我们再次看到，如果 $k=0$，$W_o$ 的第一行和第一列将变为零，使得矩阵奇异（$\\det(W_o)=0$），系统不可观测。\n\n**4. 格拉姆矩阵的行列式和归一化行列式 $\\Delta$**\n\n我们计算 $W_o$ 的行列式：\n$$\n\\det(W_o) = (W_{o,11})(W_{o,22}) - (W_{o,12})^2\n$$\n$$\n\\det(W_o) = (k^2 T) \\left(\\frac{\\tau}{2}(1 - e^{-2T/\\tau})\\right) - \\left(k\\tau(1 - e^{-T/\\tau})\\right)^2\n$$\n$$\n\\det(W_o) = \\frac{k^2 T \\tau}{2}(1 - e^{-2T/\\tau}) - k^2 \\tau^2 (1 - e^{-T/\\tau})^2\n$$\n问题要求归一化行列式 $\\Delta = \\frac{\\det(W_o)}{k^2 \\tau^2}$。\n$$\n\\Delta = \\frac{1}{k^2 \\tau^2} \\left[ \\frac{k^2 T \\tau}{2}(1 - e^{-2T/\\tau}) - k^2 \\tau^2 (1 - e^{-T/\\tau})^2 \\right]\n$$\n$$\n\\Delta = \\frac{T}{2\\tau}(1 - e^{-2T/\\tau}) - (1 - e^{-T/\\tau})^2\n$$\n这个表达式可以保持原样。为清晰起见，我们将按要求使用 `\\exp` 函数表示法。\n$$\n\\Delta = \\frac{T}{2\\tau}(1 - \\exp(-2T/\\tau)) - (1 - \\exp(-T/\\tau))^2\n$$\n这是关于实验持续时间 $T$ 和极化时间常数 $\\tau$ 的无量纲归一化行列式的最终闭式解析表达式。",
            "answer": "$$ \\boxed{ \\frac{T}{2\\tau} \\left( 1 - \\exp\\left(-\\frac{2T}{\\tau}\\right) \\right) - \\left( 1 - \\exp\\left(-\\frac{T}{\\tau}\\right) \\right)^{2} } $$"
        },
        {
            "introduction": "从理论转向实践，本练习聚焦于在环硬件（HIL）验证的一个核心制约因素：实时性能。HIL 仿真器必须在严格的时间期限内完成模型和控制算法的计算。本练习将介绍实时系统中的基本概念——速率单调调度（RMS），并将其应用于电池 HIL 测试中的典型任务集，演示如何分析并确保整个系统的可调度性。",
            "id": "3918331",
            "problem": "一个电池硬件在环 (HIL) 和软件在环 (SIL) 验证平台在一个单核、抢占式、固定优先级的内核下，使用速率单调调度 (RMS) 执行三个周期性实时任务：一个用于降阶电化学模型的状态估计器，一个用于驱动负载模拟器的电流控制回路，以及一个将同步测量和状态估计值写入非易失性存储器的数据记录器。所有任务的截止时间都等于其周期，在时间 $t = 0$ 同步释放，释放抖动可忽略不计，且上下文切换和中断开销为零。估计器和控制器在目标平台上的最坏情况执行时间已经测定，而记录器的最坏情况执行时间必须经过选择以确保可调度性。\n\n- 估计器任务 $E$：周期 $T_{E} = 1$ ms，最坏情况执行时间 $C_{E} = 0.18$ ms。\n- 控制任务 $C$：周期 $T_{C} = 2$ ms，最坏情况执行时间 $C_{C} = 0.22$ ms。\n- 记录任务 $L$：周期 $T_{L} = 10$ ms，最坏情况执行时间 $C_{L}$（待确定）。\n\n根据速率单调调度，任务按其周期进行优先级排序。使用固定优先级可调度性分析的基本原理和周期性任务的经典基于利用率的充分可调度性条件，完成以下操作：\n\n1. 确定在速率单调调度下保证任务集可调度的最大允许 $C_{L}$。\n2. 在计算出的最大 $C_{L}$ 值下，构建从 $t = 0$ 到 $t = 10$ ms 一个超周期内的可执行调度，指明 $E$、$C$ 和 $L$ 之间的抢占点，并论证为何 $L$ 在其截止时间 $t = 10$ ms 前完成。\n\n将最大允许 $C_{L}$ 的最终数值结果四舍五入到四位有效数字。最终答案以毫秒表示。",
            "solution": "问题陈述是连贯的、内部一致的，并基于实时系统调度理论的既定原则。分析所需的所有参数均已提供。其背景，一个用于电池系统的硬件在环 (HIL) 和软件在环 (SIL) 验证平台，是该理论的一个可信且相关的应用。因此，该问题被认为是有效的，可以构建一个正式的解决方案。\n\n该问题需要一个由两部分组成的解决方案：首先，基于一个充分的利用率测试，确定保证可调度性的记录任务 $L$ 的最大最坏情况执行时间 $C_L$；其次，构建一个超周期内的显式调度，以证明最低优先级任务能满足其截止时间。\n\n**1. 确定最大允许 $C_L$**\n\n调度策略是速率单调调度 (RMS)，这是一种抢占式的固定优先级方案，其中优先级与任务的周期成反比。给定的任务是：\n- 估计器任务 $E$：$T_{E} = 1$ ms，$C_{E} = 0.18$ ms。\n- 控制任务 $C$：$T_{C} = 2$ ms，$C_{C} = 0.22$ ms。\n- 记录任务 $L$：$T_{L} = 10$ ms，$C_{L}$ 待确定。\n\n由于 $T_{E}  T_{C}  T_{L}$，优先级分配为 $Priority(E) > Priority(C) > Priority(L)$。\n\n问题指定使用由 Liu 和 Layland 建立的、针对一组 $n$ 个周期性任务的经典基于利用率的充分可调度性条件。该条件指出，如果一个任务集的总处理器利用率 $U$ 不超过一个特定界限，则该任务集在 RMS 下是可调度的：\n$$ U = \\sum_{i=1}^{n} \\frac{C_i}{T_i} \\le n(2^{1/n} - 1) $$\n对于给定的系统，任务数量为 $n = 3$。利用率界限为：\n$$ U_{bound} = 3(2^{1/3} - 1) $$\n我们计算已知任务的利用率：\n$$ U_E = \\frac{C_E}{T_E} = \\frac{0.18\\,\\text{ms}}{1\\,\\text{ms}} = 0.18 $$\n$$ U_C = \\frac{C_C}{T_C} = \\frac{0.22\\,\\text{ms}}{2\\,\\text{ms}} = 0.11 $$\n记录任务的利用率为 $U_L = \\frac{C_L}{T_L} = \\frac{C_L}{10}$。\n\n总利用率 $U = U_E + U_C + U_L$ 必须满足可调度性条件：\n$$ 0.18 + 0.11 + \\frac{C_L}{10} \\le 3(2^{1/3} - 1) $$\n$$ 0.29 + \\frac{C_L}{10} \\le 3(2^{1/3} - 1) $$\n为了找到最大允许的 $C_L$，我们求解 $C_L$：\n$$ \\frac{C_L}{10} \\le 3(2^{1/3} - 1) - 0.29 $$\n$$ C_L \\le 10 \\left( 3(2^{1/3} - 1) - 0.29 \\right) $$\n对表达式进行数值计算：\n$$ C_L \\le 10 \\left( 3(1.259921...) - 3 - 0.29 \\right) $$\n$$ C_L \\le 10 \\left( 0.779763... - 0.29 \\right) $$\n$$ C_L \\le 10 \\left( 0.489763... \\right) $$\n$$ C_L \\le 4.89763... \\,\\text{ms} $$\n根据要求四舍五入到四位有效数字，记录任务的最大允许最坏情况执行时间为 $C_L = 4.898$ ms。\n\n**2. 调度构建与验证**\n\n我们现在使用计算出的值 $C_L = 4.898$ ms 构建一个超周期内的调度。超周期是任务周期的最小公倍数：$H = \\text{lcm}(1, 2, 10) = 10$ ms。所有任务都在 $t=0$ 时同步释放。\n\n在区间 $[0, 10]$ ms 内的调度如下，跟踪每个作业的执行并记录抢占情况：\n- **`t = 0.000`**: 作业 $E_1$、$C_1$ 和 $L_1$ 被释放。$E_1$（最高优先级）运行。\n- **`[0.000, 0.180]`**: $E_1$ 执行 $C_E=0.18$ ms 并完成。\n- **`[0.180, 0.400]`**: $C_1$（次高优先级）执行 $C_C=0.22$ ms 并完成。\n- **`[0.400, 1.000]`**: $L_1$（最低优先级）执行 $0.600$ ms。$L_1$ 的剩余执行时间为 $4.898 - 0.600 = 4.298$ ms。\n- **`t = 1.000`**: 作业 $E_2$ 被释放并抢占 $L_1$。\n- **`[1.000, 1.180]`**: $E_2$ 执行并完成。\n- **`[1.180, 2.000]`**: $L_1$ 恢复执行，执行 $0.820$ ms。剩余 $C_L = 4.298 - 0.820 = 3.478$ ms。\n- **`t = 2.000`**: 作业 $E_3$ 和 $C_2$ 被释放。$E_3$ 抢占 $L_1$。\n- **`[2.000, 2.180]`**: $E_3$ 执行并完成。\n- **`[2.180, 2.400]`**: $C_2$ 执行并完成。\n- **`[2.400, 3.000]`**: $L_1$ 恢复执行，执行 $0.600$ ms。剩余 $C_L = 3.478 - 0.600 = 2.878$ ms。\n- **`t = 3.000`**: 作业 $E_4$ 被释放并抢占 $L_1$。\n- **`[3.000, 3.180]`**: $E_4$ 执行并完成。\n- **`[3.180, 4.000]`**: $L_1$ 恢复执行，执行 $0.820$ ms。剩余 $C_L = 2.878 - 0.820 = 2.058$ ms。\n- **`t = 4.000`**: 作业 $E_5$ 和 $C_3$ 被释放。$E_5$ 抢占 $L_1$。\n- **`[4.000, 4.180]`**: $E_5$ 执行并完成。\n- **`[4.180, 4.400]`**: $C_3$ 执行并完成。\n- **`[4.400, 5.000]`**: $L_1$ 恢复执行，执行 $0.600$ ms。剩余 $C_L = 2.058 - 0.600 = 1.458$ ms。\n- **`t = 5.000`**: 作业 $E_6$ 被释放并抢占 $L_1$。\n- **`[5.000, 5.180]`**: $E_6$ 执行并完成。\n- **`[5.180, 6.000]`**: $L_1$ 恢复执行，执行 $0.820$ ms。剩余 $C_L = 1.458 - 0.820 = 0.638$ ms。\n- **`t = 6.000`**: 作业 $E_7$ 和 $C_4$ 被释放。$E_7$ 抢占 $L_1$。\n- **`[6.000, 6.180]`**: $E_7$ 执行并完成。\n- **`[6.180, 6.400]`**: $C_4$ 执行并完成。\n- **`[6.400, 7.000]`**: $L_1$ 恢复执行，执行 $0.600$ ms。剩余 $C_L = 0.638 - 0.600 = 0.038$ ms。\n- **`t = 7.000`**: 作业 $E_8$ 被释放并抢占 $L_1$。\n- **`[7.000, 7.180]`**: $E_8$ 执行并完成。\n- **`[7.180, 7.218]`**: $L_1$ 恢复执行，完成其最后的 $0.038$ ms。**$L_1$ 在 $t=7.218$ ms 完成。**\n- **`t  7.218`**: 处理器空闲，直到在 $t=8.000$ 释放下一个作业。后续作业（$E_9, C_5, E_{10}$）也在超周期的剩余部分内运行并远在其截止时间前完成。\n\n**关于满足截止时间的论证：**\n对调度的分析提供了决定性的论证。记录任务的第一个也是唯一一个作业 $L_1$ 在 $t=0$ 时被释放，其截止时间在 $t=T_L=10$ ms。详细的调度模拟显示，在被任务 $E$ 的 $8$ 个作业和任务 $C$ 的 $4$ 个作业抢占后，作业 $L_1$ 累积了其所需的 $4.898$ ms 执行时间，并在时间 $t_{finish} = 7.218$ ms 完成。由于其完成时间 $t_{finish} = 7.218$ ms 小于其截止时间 $D_L = 10$ ms，任务 $L$ 满足其截止时间。通过检查可知，所有更高优先级的任务也满足其截止时间，因为它们不受任何抢占影响。因此，当 $C_L = 4.898$ ms 时，该任务集是可调度的。",
            "answer": "$$\\boxed{4.898}$$"
        },
        {
            "introduction": "在确保模型能够实时运行后，最后一步是将仿真输出与真实世界的测量数据进行比较。然而，HIL 系统中的通信和处理过程常会引入延迟，导致仿真信号与测量信号之间存在时间上的错位。本练习提供了一种通过推导最优相位移来最小化误差，从而对这种延迟进行数学修正的实践方法，这是实现精确模型验证的一项关键技术。",
            "id": "3918356",
            "problem": "由周期性负载引起的电池组端电压纹波；用于在硬件在环 (HIL) 和软件在环 (SIL) 工作流程中验证一个基于物理的电化学模型，以实现自动化电池设计与仿真。仿真电压（表示为 $v_{s}(t)$）和测量电压（表示为 $v_{m}(t)$）主要由施加负载产生的单一频率分量主导。在稳定运行条件下，对于任意一个周期的观测区间，两者均可建模为\n$$v_{s}(t) = V_{0} + A_{s}\\sin(\\omega t + \\theta_{s}), \\quad v_{m}(t) = V_{0} + A_{m}\\sin\\big(\\omega(t - L) + \\theta_{m}\\big) + \\epsilon(t),$$\n其中 $V_{0}$ 是直流基线电压，$A_{s}$ 和 $A_{m}$ 分别是仿真和测量的纹波幅值，$\\omega$ 是角频率，$\\theta_{s}$ 和 $\\theta_{m}$ 是相位偏移，$L$ 是由HIL数据采集链引起的已知流水线延迟，而 $\\epsilon(t)$ 是零均值测量噪声，其值小到在推导中可以忽略不计。考虑一个时间对齐算法，该算法通过一个额外的相移 $\\delta$ 来调整仿真，将对齐后的仿真信号定义为\n$$v_{s,\\delta}(t) = V_{0} + A_{s}\\sin\\big(\\omega t + \\theta_{s} + \\delta\\big).$$\n在单个周期 $T = 2\\pi/\\omega$ 内，将对齐后的仿真相对于测量的均方根误差 (RMSE) 定义为\n$$\\mathrm{RMSE}(\\delta) = \\sqrt{\\frac{1}{T}\\int_{t_{0}}^{t_{0}+T}\\big(v_{s,\\delta}(t) - v_{m}(t)\\big)^{2}\\,dt},$$\n其中 $t_{0}$ 是任意的。仅从 $\\mathrm{RMSE}(\\delta)$ 的定义和三角函数的基本性质（包括它们在一个周期内的正交性）出发，推导出使 $\\mathrm{RMSE}(\\delta)$ 最小的 $\\delta$ 值。然后，通过计算定义如下的对齐后报告准确度来量化时间对齐的效果\n$$a = 1 - \\frac{\\mathrm{RMSE}(\\delta_{\\mathrm{opt}})}{\\mathrm{RMS}_{m}},$$\n其中 $\\mathrm{RMS}_{m}$ 是在同一周期 $T$ 内测得的纹波 $v_{m}(t) - V_{0}$ 的均方根值。对一个承受低频周期性负载的电池组，使用以下科学上真实的参数：\n- $V_{0} = 3.7\\,\\text{V}$,\n- $A_{s} = 0.050\\,\\text{V}$,\n- $A_{m} = 0.048\\,\\text{V}$,\n- $\\omega = \\pi\\,\\text{rad/s}$,\n- $L = 0.35\\,\\text{s}$,\n- $\\theta_{s} = 0.2\\,\\text{rad}$,\n- $\\theta_{m} = -0.1\\,\\text{rad}$,\n- 在解析推导中忽略 $\\epsilon(t)$。\n\n以行矩阵的形式提供您的最终答案，其中包含以弧度为单位的最优相移 $\\delta_{\\mathrm{opt}}$ 和以小数形式表示的对齐后准确度 $a$。将每个量四舍五入至四位有效数字。相移以弧度表示。",
            "solution": "问题要求我们确定最优相移 $\\delta_{\\mathrm{opt}}$，以最小化仿真电压信号与测量电压信号之间的均方根误差 (RMSE)。随后，我们需要计算对齐后的准确度指标 $a$。\n\n在引入对齐相移 $\\delta$ 并忽略噪声项 $\\epsilon(t)$ 后，仿真电压信号和测量电压信号由下式给出：\n$$v_{s,\\delta}(t) = V_{0} + A_{s}\\sin(\\omega t + \\theta_{s} + \\delta)$$\n$$v_{m}(t) = V_{0} + A_{m}\\sin(\\omega(t - L) + \\theta_{m}) = V_{0} + A_{m}\\sin(\\omega t - \\omega L + \\theta_{m})$$\n\n均方根误差 $\\mathrm{RMSE}(\\delta)$ 在单个周期 $T = 2\\pi/\\omega$ 内定义为：\n$$\\mathrm{RMSE}(\\delta) = \\sqrt{\\frac{1}{T}\\int_{t_{0}}^{t_{0}+T}\\big(v_{s,\\delta}(t) - v_{m}(t)\\big)^{2}\\,dt}$$\n\n为求得使 $\\mathrm{RMSE}(\\delta)$ 最小化的 $\\delta$ 值，我们可以等效地最小化其平方，记为 $E_{\\mathrm{sq}}(\\delta) = \\left(\\mathrm{RMSE}(\\delta)\\right)^{2}$。\n$$E_{\\mathrm{sq}}(\\delta) = \\frac{1}{T}\\int_{t_{0}}^{t_{0}+T}\\big(v_{s,\\delta}(t) - v_{m}(t)\\big)^{2}\\,dt$$\n\n信号之间的差值为：\n$$v_{s,\\delta}(t) - v_{m}(t) = A_{s}\\sin(\\omega t + \\theta_{s} + \\delta) - A_{m}\\sin(\\omega t - \\omega L + \\theta_{m})$$\n为清晰起见，我们定义相位参数：\n$\\phi_s(\\delta) = \\omega t + \\theta_{s} + \\delta$\n$\\phi_m = \\omega t - \\omega L + \\theta_{m}$\n\n被积函数变为：\n$$\\big(A_{s}\\sin(\\phi_s(\\delta)) - A_{m}\\sin(\\phi_m)\\big)^{2} = A_{s}^{2}\\sin^{2}(\\phi_s(\\delta)) + A_{m}^{2}\\sin^{2}(\\phi_m) - 2A_{s}A_{m}\\sin(\\phi_s(\\delta))\\sin(\\phi_m)$$\n\n现在我们将此表达式在一个周期 $[t_0, t_0+T]$ 上积分。我们使用以下标准三角积分公式：\n1. $\\int_{t_{0}}^{t_{0}+T} \\sin^{2}(\\omega t + \\alpha) \\,dt = \\frac{T}{2}$\n2. $\\int_{t_{0}}^{t_{0}+T} \\sin(\\omega t + \\alpha_{1})\\sin(\\omega t + \\alpha_{2}) \\,dt = \\frac{T}{2}\\cos(\\alpha_{1} - \\alpha_{2})$\n\n将这些恒等式应用于展开的平方误差的各项：\n$$\\int_{t_{0}}^{t_{0}+T} A_{s}^{2}\\sin^{2}(\\phi_s(\\delta)) \\,dt = A_{s}^{2} \\frac{T}{2}$$\n$$\\int_{t_{0}}^{t_{0}+T} A_{m}^{2}\\sin^{2}(\\phi_m) \\,dt = A_{m}^{2} \\frac{T}{2}$$\n$$\\int_{t_{0}}^{t_{0}+T} -2A_{s}A_{m}\\sin(\\phi_s(\\delta))\\sin(\\phi_m) \\,dt = -2A_{s}A_{m} \\frac{T}{2}\\cos\\big((\\theta_{s} + \\delta) - (-\\omega L + \\theta_{m})\\big)$$\n$$ = -A_{s}A_{m}T\\cos(\\theta_{s} - \\theta_{m} + \\omega L + \\delta)$$\n\n将这些积分项求和再除以 $T$ 即可得到 $E_{\\mathrm{sq}}(\\delta)$:\n$$E_{\\mathrm{sq}}(\\delta) = \\frac{A_{s}^{2}}{2} + \\frac{A_{m}^{2}}{2} - A_{s}A_{m}\\cos(\\theta_{s} - \\theta_{m} + \\omega L + \\delta)$$\n\n为了最小化 $E_{\\mathrm{sq}}(\\delta)$，我们必须最大化项 $A_{s}A_{m}\\cos(\\theta_{s} - \\theta_{m} + \\omega L + \\delta)$。由于幅值 $A_s$ 和 $A_m$ 均为正数，这等价于最大化余弦项。$\\cos(x)$ 的最大值为 1，当其参数 $x$ 是 $2\\pi$ 的偶数倍时取得，即对于任意整数 $k$，$x = 2k\\pi$。\n因此，为使误差最小，我们必须有：\n$$\\theta_{s} - \\theta_{m} + \\omega L + \\delta_{\\mathrm{opt}} = 2k\\pi$$\n解出 $\\delta_{\\mathrm{opt}}$ 得：\n$$\\delta_{\\mathrm{opt}} = 2k\\pi - (\\theta_{s} - \\theta_{m} + \\omega L) = 2k\\pi + \\theta_{m} - \\theta_{s} - \\omega L$$\n我们通常寻求主值，即绝对值最小的那个值（通过选择 $k=0$ 或其他整数使结果落入区间 $(-\\pi, \\pi]$）。对于一般表达式，我们选择 $k=0$：\n$$\\delta_{\\mathrm{opt}} = \\theta_{m} - \\theta_{s} - \\omega L$$\n代入给定的数值：\n$\\theta_{m} = -0.1\\,\\text{rad}$, $\\theta_{s} = 0.2\\,\\text{rad}$, $\\omega = \\pi\\,\\text{rad/s}$, $L = 0.35\\,\\text{s}$。\n$$\\delta_{\\mathrm{opt}} = -0.1 - 0.2 - (\\pi \\times 0.35) = -0.3 - 0.35\\pi$$\n数值计算结果为 $\\delta_{\\mathrm{opt}} \\approx -0.3 - 0.35 \\times 3.14159265 = -0.3 - 1.09955743 = -1.39955743\\,\\text{rad}$。\n该值位于区间 $(-\\pi, \\pi]$ 内，因此是一个可接受的主值。四舍五入到四位有效数字，我们得到 $\\delta_{\\mathrm{opt}} = -1.400\\,\\text{rad}$。\n\n接下来，我们必须计算对齐后准确度 $a$。\n$$a = 1 - \\frac{\\mathrm{RMSE}(\\delta_{\\mathrm{opt}})}{\\mathrm{RMS}_{m}}$$\n首先，我们求 $\\mathrm{RMSE}(\\delta_{\\mathrm{opt}})$。在最优相移下，$\\cos(\\theta_{s} - \\theta_{m} + \\omega L + \\delta_{\\mathrm{opt}}) = 1$。\n$$E_{\\mathrm{sq}}(\\delta_{\\mathrm{opt}}) = (\\mathrm{RMSE}(\\delta_{\\mathrm{opt}}))^{2} = \\frac{A_{s}^{2}}{2} + \\frac{A_{m}^{2}}{2} - A_{s}A_{m} = \\frac{1}{2}(A_{s}^{2} - 2A_{s}A_{m} + A_{m}^{2}) = \\frac{(A_{s} - A_{m})^{2}}{2}$$\n$$\\mathrm{RMSE}(\\delta_{\\mathrm{opt}}) = \\sqrt{\\frac{(A_{s} - A_{m})^{2}}{2}} = \\frac{|A_{s} - A_{m}|}{\\sqrt{2}}$$\n\n接着，我们求 $\\mathrm{RMS}_{m}$，即测量纹波 $v_{m}(t) - V_{0} = A_{m}\\sin(\\omega t - \\omega L + \\theta_{m})$ 的均方根值。\n$$(\\mathrm{RMS}_{m})^{2} = \\frac{1}{T}\\int_{t_{0}}^{t_{0}+T} \\big(A_{m}\\sin(\\omega t - \\omega L + \\theta_{m})\\big)^{2}\\,dt$$\n$$(\\mathrm{RMS}_{m})^{2} = \\frac{A_{m}^{2}}{T} \\int_{t_{0}}^{t_{0}+T} \\sin^{2}(\\omega t - \\omega L + \\theta_{m}) \\,dt = \\frac{A_{m}^{2}}{T} \\cdot \\frac{T}{2} = \\frac{A_{m}^{2}}{2}$$\n$$\\mathrm{RMS}_{m} = \\sqrt{\\frac{A_{m}^{2}}{2}} = \\frac{A_{m}}{\\sqrt{2}}$$\n（因为 $A_m$ 是正幅值）。\n\n现在我们可以计算准确度 $a$：\n$$a = 1 - \\frac{\\mathrm{RMSE}(\\delta_{\\mathrm{opt}})}{\\mathrm{RMS}_{m}} = 1 - \\frac{|A_{s} - A_{m}|/\\sqrt{2}}{A_{m}/\\sqrt{2}} = 1 - \\frac{|A_{s} - A_{m}|}{A_{m}}$$\n代入给定的幅值：\n$A_{s} = 0.050\\,\\text{V}$ 和 $A_{m} = 0.048\\,\\text{V}$。\n$$a = 1 - \\frac{|0.050 - 0.048|}{0.048} = 1 - \\frac{0.002}{0.048} = 1 - \\frac{2}{48} = 1 - \\frac{1}{24}$$\n数值计算结果为 $a = 1 - 0.041666... = 0.958333...$\n四舍五入到四位有效数字，我们得到 $a = 0.9583$。\n\n最终结果为 $\\delta_{\\mathrm{opt}} = -1.400\\,\\text{rad}$ 和 $a = 0.9583$。",
            "answer": "$$\\boxed{\\begin{pmatrix}-1.400  0.9583\\end{pmatrix}}$$"
        }
    ]
}
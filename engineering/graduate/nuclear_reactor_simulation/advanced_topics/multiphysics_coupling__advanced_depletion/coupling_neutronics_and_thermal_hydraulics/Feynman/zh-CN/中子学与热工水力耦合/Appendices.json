{
    "hands_on_practices": [
        {
            "introduction": "本练习旨在对反应性反馈——中子学与热工水力耦合的基石——进行基础性探讨。通过计算由均匀温度升高引起的反应性变化，您将应用反应性温度系数 ($\\alpha_T$) 这一核心概念。这项实践有助于阐明热工变化如何直接影响反应堆的中子学状态，并让您对反应堆的瞬时功率响应建立起定性理解，这对于固有安全分析至关重要。",
            "id": "4220228",
            "problem": "一个空间集总反应堆节点初始处于稳态，燃料温度为 $T_0$，中子数对应于额定运行工况下的零净反应性。局部燃料温度反应性系数在额定工况下定义为导数 $\\alpha_T \\equiv \\left.\\frac{d \\rho}{d T}\\right|_{T_0}$，其中 $\\rho$ 是无量纲反应性，$T$ 是燃料温度。对于此节点，精确的微扰测量给出 $\\alpha_T = -3.62 \\times 10^{-5}\\ \\text{K}^{-1}$。\n\n在短时间内，一次热工水力微扰使燃料温度均匀增加了 $\\Delta T = 50\\ \\text{K}$，而在此期间冷却剂边界条件近似保持不变。假设函数关系 $\\rho(T)$ 在 $T_0$ 的邻域内是光滑的，并且关于 $T_0$ 的一阶近似在 $\\Delta T$ 所跨越的区间内有效。\n\n仅使用温度系数的定义和线性化的第一性原理，推导由温度升高引起的反应性一阶变化的表达式，并计算其数值。然后，基于带有缓发中子的点堆动力学方程（PKE），定性解释此反馈后中子功率的瞬时趋势以及温度-反应性耦合在短期内的作用，忽略其他反馈并假设没有外部反应性引入。\n\n将计算出的反应性变化表示为无量纲小数，并将答案四舍五入到三位有效数字。",
            "solution": "在尝试求解之前，对问题陈述进行验证。\n\n### 第一步：提取已知条件\n- 初始状态：稳态，净反应性为零。\n- 初始燃料温度：$T_0$。\n- 局部燃料温度反应性系数：$\\alpha_T \\equiv \\left.\\frac{d \\rho}{d T}\\right|_{T_0} = -3.62 \\times 10^{-5}\\ \\text{K}^{-1}$。\n- 燃料温度微扰：$\\Delta T = 50\\ \\text{K}$。\n- 假设：函数 $\\rho(T)$ 在 $T_0$ 附近是光滑的。\n- 假设：关于 $T_0$ 的 $\\rho(T)$ 的一阶近似是有效的。\n- 任务1：推导反应性的一阶变化量 $\\Delta \\rho$ 的表达式。\n- 任务2：计算 $\\Delta \\rho$ 的数值。\n- 任务3：定性解释中子功率的瞬时趋势以及温度-反应性耦合的作用。\n- 约束条件：忽略其他反馈；无外部反应性引入。\n\n### 第二步：使用提取的已知条件进行验证\n1.  **科学依据**：该问题基于反应堆物理学的基本原理，特别是反应性反馈的概念，这是核反应堆动力学与安全的一个关键方面。温度反应性系数的定义及其通过线性化的应用是标准的教科书程序。$\\alpha_T$ 的数值对于轻水慢化堆是符合实际的。\n2.  **良态性**：问题定义清晰。它提供了所有必要的数据（$\\alpha_T$, $\\Delta T$）和一个关键的建模假设（一阶近似有效），以确定反应性变化的唯一数值答案。定性部分也是良态的，要求基于点堆动力学方程的既定框架进行解释。\n3.  **客观性**：问题以精确、定量和无偏见的技术语言陈述。它没有模棱两可或主观的论断。\n\n### 第三步：结论与行动\n该问题是有效的，因为它在科学上是合理的、良态的且客观的。它满足了一个有效科学问题的所有标准。将构建解答。\n\n***\n\n问题的核心在于应用一阶泰勒级数展开来近似一个函数在其自变量发生小微扰时的变化。在这里，函数是反应性 $\\rho$，自变量是燃料温度 $T$。\n\n问题陈述，函数关系 $\\rho(T)$ 在初始稳态温度 $T_0$ 的邻域内是光滑的。这使我们能够使用围绕 $T_0$ 的泰勒展开来表示新温度 $T = T_0 + \\Delta T$ 下的反应性 $\\rho$：\n$$\n\\rho(T) = \\rho(T_0) + \\left.\\frac{d\\rho}{dT}\\right|_{T_0}(T - T_0) + \\frac{1}{2!}\\left.\\frac{d^2\\rho}{dT^2}\\right|_{T_0}(T - T_0)^2 + \\dots\n$$\n问题指明一阶近似是有效的。这意味着我们可以忽略二阶及更高阶的项。表达式简化为：\n$$\n\\rho(T) \\approx \\rho(T_0) + \\left.\\frac{d\\rho}{dT}\\right|_{T_0}(T - T_0)\n$$\n反应性的变化量 $\\Delta \\rho$ 定义为新反应性 $\\rho(T)$ 和初始反应性 $\\rho(T_0)$ 之间的差值：\n$$\n\\Delta \\rho = \\rho(T) - \\rho(T_0)\n$$\n代入 $\\rho(T)$ 的一阶近似，我们得到：\n$$\n\\Delta \\rho \\approx \\left( \\rho(T_0) + \\left.\\frac{d\\rho}{dT}\\right|_{T_0}(T - T_0) \\right) - \\rho(T_0)\n$$\n这可以简化为反应性的一阶变化表达式：\n$$\n\\Delta \\rho \\approx \\left.\\frac{d\\rho}{dT}\\right|_{T_0}(T - T_0)\n$$\n题目给出了右侧各项的定义。温度反应性系数为 $\\alpha_T \\equiv \\left.\\frac{d\\rho}{dT}\\right|_{T_0}$，温度变化为 $\\Delta T = T - T_0$。因此，推导出的表达式为：\n$$\n\\Delta \\rho \\approx \\alpha_T \\Delta T\n$$\n现在，我们使用给定的数据计算数值：\n$\\alpha_T = -3.62 \\times 10^{-5}\\ \\text{K}^{-1}$ 和 $\\Delta T = 50\\ \\text{K}$。\n$$\n\\Delta \\rho \\approx (-3.62 \\times 10^{-5}\\ \\text{K}^{-1}) \\times (50\\ \\text{K})\n$$\n$$\n\\Delta \\rho \\approx -181 \\times 10^{-5}\n$$\n$$\n\\Delta \\rho \\approx -0.00181\n$$\n该值为无量纲，符合反应性的要求。结果有三位有效数字，与输入 $\\alpha_T$ 的精度一致。\n\n接下来，我们处理定性解释。计算出的反应性变化 $\\Delta \\rho \\approx -0.00181$ 是负值。这是向反应堆堆芯引入的负反应性。总中子数 $N(t)$ 的动态行为，以及反应堆功率，由点堆动力学方程（PKE）控制。中子数的简化形式PKE为：\n$$\n\\frac{dN}{dt} = \\frac{\\rho(t) - \\beta}{\\Lambda}N(t) + \\sum_{i=1}^{M} \\lambda_i C_i(t)\n$$\n其中 $\\beta$ 是总缓发中子份额，$\\Lambda$ 是瞬发中子代时间，$\\lambda_i$ 是缓发中子先驱核的衰变常数，而 $C_i(t)$ 是这些先驱核的浓度。\n\n最初，反应堆处于稳态，所以 $\\rho = 0$ 且 $\\frac{dN}{dt} = 0$。温度微扰引入了负反应性，$\\rho = \\Delta \\rho = -0.00181$。PKE中的项 $\\frac{\\rho(t) - \\beta}{\\Lambda}$ 立即变得更负。这导致中子数的时间导数 $\\frac{dN}{dt}$ 变为负值。因此，中子数，以及反应堆功率，将立即开始下降。\n\n在这种情况下，温度-反应性耦合的作用是作为一种负反馈机制。这是反应堆固有安全性的一个关键特征。事件序列如下：\n1.  一次热微扰导致燃料温度升高（$\\Delta T > 0$）。\n2.  负的温度反应性系数（$\\alpha_T < 0$）将此温度变化与中子学耦合，引起负的反应性变化（$\\Delta \\rho < 0$）。\n3.  这种负反应性导致裂变率和反应堆功率下降。\n4.  功率的降低导致燃料中产生的热量减少，这抵消了最初的温度升高，从而使反应堆稳定。\n这种自我调节行为确保了对瞬态温度升高的响应能够自然地将系统驱动回一个稳定的、较低功率的状态，从而防止不受控制的功率漂移。这是反应堆设计中非能动安全的一个基本原则。",
            "answer": "$$\\boxed{-0.00181}$$"
        },
        {
            "introduction": "在实际的多物理场耦合模拟中，中子学和热工水力模型通常在不同的计算网格上进行离散。本练习旨在解决一个关键挑战：如何在精细的中子学网格和粗糙的热工水力网格之间传递功率密度等数据。您将实践一种守恒平均技术，以确保能量在映射过程中守恒，并通过计算残余映射误差来量化信息损失，这是评估耦合模拟保真度的关键指标。",
            "id": "4220229",
            "problem": "一个压水堆堆芯的一维轴向段被中子学求解器离散化为六个细网格单元，每个单元内的体积裂变功率密度恒定。热工水力（TH）求解器使用一个较粗的网格，将这些细网格单元分组为三个连续的TH控制体积。细网格单元的体积和中子学体积功率密度如下：\n- 细网格单元索引和体积：$i=1,\\dots,6$ 且 $V_i \\in \\{0.4, 0.6, 0.5, 0.7, 0.5, 0.3\\}\\ \\text{m}^3$。\n- 细网格体积功率密度：$p_i \\in \\{9.5\\times 10^6, 1.05\\times 10^7, 1.20\\times 10^7, 1.15\\times 10^7, 1.00\\times 10^7, 9.00\\times 10^6\\}\\ \\text{W/m}^3$。\n\nTH网格对细网格单元的分组如下：TH单元$A$包含细网格单元$1$和$2$，TH单元$B$包含细网格单元$3$和$4$，TH单元$C$包含细网格单元$5$和$6$。\n\n使用基于能量守恒的保守平均方法，将中子学体积功率密度场映射到TH网格上，使得分配给每个TH单元的体积功率密度等于该TH控制体积上的体积平均细网格功率。然后，将此映射的TH场视为在每个TH单元上是分段常数，并通过将TH单元的值赋给其包含的每个细网格单元来重构一个细网格场。\n\n将残余映射误差定义为原始细网格场与重构细网格场之间差值的体积加权均方根，并由原始细网格场的体积加权均方根进行归一化，两者均解释为在总体积上的$L^{2}$范数。从第一性原理计算此残余映射误差。将答案四舍五入到四位有效数字。将最终误差表示为小数（无量纲）。",
            "solution": "首先根据指定标准对问题进行验证。\n\n### 步骤1：提取已知条件\n-   细网格单元：$i=1, 2, 3, 4, 5, 6$。\n-   细网格单元体积：$V_i \\in \\{0.4, 0.6, 0.5, 0.7, 0.5, 0.3\\}\\ \\text{m}^3$。\n-   细网格体积功率密度：$p_i \\in \\{9.5 \\times 10^6, 1.05 \\times 10^7, 1.20 \\times 10^7, 1.15 \\times 10^7, 1.00 \\times 10^7, 9.00 \\times 10^6\\}\\ \\text{W/m}^3$。\n-   热工水力（TH）网格分组：\n    -   TH单元$A$包含细网格单元$1, 2$。\n    -   TH单元$B$包含细网格单元$3, 4$。\n    -   TH单元$C$包含细网格单元$5, 6$。\n-   映射过程（向下映射）：TH单元的体积功率密度是其控制体积上的体积平均细网格功率。\n-   重构过程（向上映射）：单元中重构的细网格功率密度是包含它的TH单元的值。\n-   误差定义：残余映射误差是原始细网格场与重构细网格场之间差值的体积加权均方根，由原始细网格场的体积加权均方根进行归一化。\n-   要求输出：误差的数值，四舍五入到四位有效数字。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题有科学依据、良定且客观。它描述了一种在不同计算网格上耦合不同物理模型的标准数值程序，这是核反应堆等多物理场模拟中的常见做法。体积平均法基于能量守恒原理。所有数据和定义均已提供，没有矛盾，并且在物理上是合理的。该问题是一个可形式化和可验证的计算，与核反应堆模拟的主题直接相关。未发现任何缺陷。\n\n### 步骤3：结论与行动\n该问题有效。将提供完整解答。\n\n解答过程分三个阶段：\n1.  将细网格功率密度场 $\\{p_i\\}$ 映射到粗TH网格上，以获得场 $\\{P_J\\}$。\n2.  通过将粗网格场 $\\{P_J\\}$ 映射回细网格，重构一个新的细网格场 $\\{p'_i\\}$。\n3.  按定义计算残余映射误差。\n\n设细网格索引为 $i \\in \\{1, \\dots, 6\\}$，TH单元索引为 $J \\in \\{A, B, C\\}$。对应于每个TH单元的细网格索引集合为 $I_A = \\{1, 2\\}$, $I_B = \\{3, 4\\}$ 和 $I_C = \\{5, 6\\}$。\n\n**1. 向下映射到TH网格**\n\nTH单元$J$中的体积功率密度$P_J$是其体积内产生的总功率除以其总体积。这是细网格功率密度的体积加权平均值。\n$$ P_J = \\frac{\\sum_{i \\in I_J} p_i V_i}{\\sum_{i \\in I_J} V_i} $$\n首先，我们计算TH单元的体积。\n$$ V_A = V_1 + V_2 = 0.4\\ \\text{m}^3 + 0.6\\ \\text{m}^3 = 1.0\\ \\text{m}^3 $$\n$$ V_B = V_3 + V_4 = 0.5\\ \\text{m}^3 + 0.7\\ \\text{m}^3 = 1.2\\ \\text{m}^3 $$\n$$ V_C = V_5 + V_6 = 0.5\\ \\text{m}^3 + 0.3\\ \\text{m}^3 = 0.8\\ \\text{m}^3 $$\n\n接下来，我们计算每个TH单元的平均功率密度。\n对于TH单元$A$:\n$$ P_A = \\frac{p_1 V_1 + p_2 V_2}{V_A} = \\frac{(9.5 \\times 10^6 \\ \\text{W/m}^3)(0.4\\ \\text{m}^3) + (1.05 \\times 10^7 \\ \\text{W/m}^3)(0.6\\ \\text{m}^3)}{1.0\\ \\text{m}^3} $$\n$$ P_A = \\frac{3.8 \\times 10^6 \\ \\text{W} + 6.3 \\times 10^6 \\ \\text{W}}{1.0\\ \\text{m}^3} = \\frac{10.1 \\times 10^6 \\ \\text{W}}{1.0\\ \\text{m}^3} = 1.01 \\times 10^7 \\ \\text{W/m}^3 $$\n对于TH单元$B$:\n$$ P_B = \\frac{p_3 V_3 + p_4 V_4}{V_B} = \\frac{(1.20 \\times 10^7 \\ \\text{W/m}^3)(0.5\\ \\text{m}^3) + (1.15 \\times 10^7 \\ \\text{W/m}^3)(0.7\\ \\text{m}^3)}{1.2\\ \\text{m}^3} $$\n$$ P_B = \\frac{6.0 \\times 10^6 \\ \\text{W} + 8.05 \\times 10^6 \\ \\text{W}}{1.2\\ \\text{m}^3} = \\frac{14.05 \\times 10^6 \\ \\text{W}}{1.2\\ \\text{m}^3} \\approx 1.17083 \\times 10^7 \\ \\text{W/m}^3 $$\n对于TH单元$C$:\n$$ P_C = \\frac{p_5 V_5 + p_6 V_6}{V_C} = \\frac{(1.00 \\times 10^7 \\ \\text{W/m}^3)(0.5\\ \\text{m}^3) + (9.00 \\times 10^6 \\ \\text{W/m}^3)(0.3\\ \\text{m}^3)}{0.8\\ \\text{m}^3} $$\n$$ P_C = \\frac{5.0 \\times 10^6 \\ \\text{W} + 2.7 \\times 10^6 \\ \\text{W}}{0.8\\ \\text{m}^3} = \\frac{7.7 \\times 10^6 \\ \\text{W}}{0.8\\ \\text{m}^3} = 9.625 \\times 10^6 \\ \\text{W/m}^3 $$\n\n**2. 向上映射以重构细网格场**\n\n重构的细网格场 $\\{p'_i\\}$ 是通过将TH单元的功率密度赋给它包含的所有细网格单元来创建的。\n$$ p'_i = P_J, \\quad \\text{for } i \\in I_J $$\n$$ \\{p'_1, p'_2\\} = \\{P_A, P_A\\} = \\{1.01 \\times 10^7, 1.01 \\times 10^7\\}\\ \\text{W/m}^3 $$\n$$ \\{p'_3, p'_4\\} = \\{P_B, P_B\\} = \\{\\frac{14.05}{1.2} \\times 10^6, \\frac{14.05}{1.2} \\times 10^6\\}\\ \\text{W/m}^3 $$\n$$ \\{p'_5, p'_6\\} = \\{P_C, P_C\\} = \\{9.625 \\times 10^6, 9.625 \\times 10^6\\}\\ \\text{W/m}^3 $$\n\n**3. 计算残余映射误差**\n\n误差 $\\epsilon$ 是差值场 $(p-p')$ 的体积加权 $L^2$ 范数，由原始场 $p$ 的体积加权 $L^2$ 范数进行归一化。\n$$ \\epsilon = \\frac{\\|p - p'\\|_V}{\\|p\\|_V} = \\sqrt{\\frac{\\sum_{i=1}^6 (p_i - p'_i)^2 V_i}{\\sum_{i=1}^6 p_i^2 V_i}} $$\n所有功率密度中的公共因子 $10^6$ 在分子和分母中都将被平方，因此会抵消。我们可以使用缩放后的功率密度 $\\tilde{p}_i = p_i / (10^6 \\ \\text{W/m}^3)$ 和 $\\tilde{P}_J = P_J / (10^6 \\ \\text{W/m}^3)$ 进行计算。\n\n分子项 $\\mathcal{N} = \\sum_{i=1}^6 (\\tilde{p}_i - \\tilde{p}'_i)^2 V_i$：\n- 对于 $i=1$: $(9.5 - 10.1)^2 \\times 0.4 = (-0.6)^2 \\times 0.4 = 0.36 \\times 0.4 = 0.144$。\n- 对于 $i=2$: $(10.5 - 10.1)^2 \\times 0.6 = (0.4)^2 \\times 0.6 = 0.16 \\times 0.6 = 0.096$。\n- 对于 $i=3$: $(12.0 - \\frac{14.05}{1.2})^2 \\times 0.5 = (\\frac{14.4 - 14.05}{1.2})^2 \\times 0.5 = (\\frac{0.35}{1.2})^2 \\times 0.5 = (\\frac{35}{120})^2 \\times 0.5 = (\\frac{7}{24})^2 \\times 0.5 = \\frac{49}{576} \\times 0.5 = \\frac{49}{1152}$。\n- 对于 $i=4$: $(11.5 - \\frac{14.05}{1.2})^2 \\times 0.7 = (\\frac{13.8 - 14.05}{1.2})^2 \\times 0.7 = (\\frac{-0.25}{1.2})^2 \\times 0.7 = (\\frac{-25}{120})^2 \\times 0.7 = (\\frac{-5}{24})^2 \\times 0.7 = \\frac{25}{576} \\times 0.7 = \\frac{17.5}{576} = \\frac{35}{1152}$。\n- 对于 $i=5$: $(10.0 - 9.625)^2 \\times 0.5 = (0.375)^2 \\times 0.5 = 0.140625 \\times 0.5 = 0.0703125 = \\frac{9}{128}$。\n- 对于 $i=6$: $(9.0 - 9.625)^2 \\times 0.3 = (-0.625)^2 \\times 0.3 = 0.390625 \\times 0.3 = 0.1171875 = \\frac{15}{128}$。\n\n对分子项求和：\n$$ \\mathcal{N} = 0.144 + 0.096 + \\frac{49}{1152} + \\frac{35}{1152} + \\frac{9}{128} + \\frac{15}{128} $$\n$$ \\mathcal{N} = 0.24 + \\frac{84}{1152} + \\frac{24}{128} = \\frac{24}{100} + \\frac{7}{96} + \\frac{3}{16} = \\frac{6}{25} + \\frac{7}{96} + \\frac{18}{96} = \\frac{6}{25} + \\frac{25}{96} $$\n$$ \\mathcal{N} = \\frac{6 \\times 96 + 25 \\times 25}{25 \\times 96} = \\frac{576 + 625}{2400} = \\frac{1201}{2400} $$\n所以 $\\mathcal{N} \\approx 0.50041667$。\n\n分母项 $\\mathcal{D} = \\sum_{i=1}^6 \\tilde{p}_i^2 V_i$：\n- 对于 $i=1$: $(9.5)^2 \\times 0.4 = 90.25 \\times 0.4 = 36.1$。\n- 对于 $i=2$: $(10.5)^2 \\times 0.6 = 110.25 \\times 0.6 = 66.15$。\n- 对于 $i=3$: $(12.0)^2 \\times 0.5 = 144.0 \\times 0.5 = 72.0$。\n- 对于 $i=4$: $(11.5)^2 \\times 0.7 = 132.25 \\times 0.7 = 92.575$。\n- 对于 $i=5$: $(10.0)^2 \\times 0.5 = 100.0 \\times 0.5 = 50.0$。\n- 对于 $i=6$: $(9.0)^2 \\times 0.3 = 81.0 \\times 0.3 = 24.3$。\n\n对分母项求和：\n$$ \\mathcal{D} = 36.1 + 66.15 + 72.0 + 92.575 + 50.0 + 24.3 = 341.125 $$\n\n最后，我们计算误差 $\\epsilon$：\n$$ \\epsilon = \\sqrt{\\frac{\\mathcal{N}}{\\mathcal{D}}} = \\sqrt{\\frac{1201/2400}{341.125}} = \\sqrt{\\frac{0.50041666...}{341.125}} \\approx \\sqrt{0.0014669598} $$\n$$ \\epsilon \\approx 0.038300911 $$\n四舍五入到四位有效数字，我们得到 $0.03830$。末尾的零是有效数字。",
            "answer": "$$\\boxed{0.03830}$$"
        },
        {
            "introduction": "这项综合实践模拟了耦合反应堆分析中的一个核心工作流程：从精细的局部温度分布计算出组件平均的反馈参数。您将通过编程实现简化但基于物理的温度相关截面模型，包括燃料的多普勒效应和慢化剂的密度效应。通过对这些效应进行均匀化处理并应用有限差分法，您将计算出关键的多普勒系数和慢化剂温度系数，从而在如何为堆芯级中子学计算推导反馈特性方面获得实践经验。",
            "id": "4220200",
            "problem": "一位堆芯模拟工程师正在开发一种简化但物理上一致的方法，用于耦合压水堆（PWR）中的中子学和热工水力。其目标是利用棒状燃料和慢化剂的温度分布，生成组件级的中子反馈参数和更新的均匀化宏观截面，以用于堆芯级的中子学计算。该工程师决定在单群、无限介质近似下进行工作，以分离温度反馈效应，同时保持质量和中子平衡。\n\n从微观和宏观截面、中子产生和中子吸收的基本定义出发，考虑以下在降阶模型层面被广泛使用并得到实验支持的建模假设：\n\n1. 无限均匀混合物中的中子平衡导致了无限介质有效增殖因子 $k_{\\infty}$，其定义为中子产生率与吸收率之比。如果总中子产生率密度为 $P$，总吸收率密度为 $A$，则 $$k_{\\infty} = \\frac{P}{A}。$$ 对于均匀化的燃料-慢化剂混合物，假设产生仅源于燃料裂变，每次裂变的平均中子产额为 $ \\nu $，而吸收则源于燃料和慢化剂两者。\n\n2. 给定棒状燃料和慢化剂的温度，并且每个燃料棒带有一个功率份额权重。假设一个组件包含 $N$ 个燃料棒，索引为 $i \\in \\{1,\\dots,N\\}$，其功率份额权重 $w_i$ 满足 $\\sum_{i=1}^{N} w_i = 1$，燃料温度为 $T_{f,i}$（单位：开尔文），慢化剂温度为 $T_{m,i}$（单位：开尔文）。\n\n3. 对于燃料，由于共振的多普勒展宽，将单群宏观吸收截面建模为随温度升高而增加。使用一个与燃料温度相对于参考温度的平方根成比例的多普勒因子，$$\\Sigma_{a,F}(T_{f,i}) = \\Sigma_{a,F}^{\\mathrm{ref}}\\sqrt{\\frac{T_{f,i}}{T_{f}^{\\mathrm{ref}}}},$$ 其中 $\\Sigma_{a,F}^{\\mathrm{ref}}$ 是在参考燃料温度 $T_{f}^{\\mathrm{ref}}$ 下的参考单群燃料宏观吸收截面。在此层面上，将单群燃料宏观裂变截面建模为与温度无关，$$\\Sigma_{f,F}(T_{f,i}) = \\Sigma_{f,F}^{\\mathrm{ref}}。$$\n\n4. 对于慢化剂，将单群宏观吸收截面建模为与数密度成正比，而数密度随质量密度变化。使用关于参考慢化剂温度 $T_{m}^{\\mathrm{ref}}$ 的线性化状态方程，其中参考质量密度为 $\\rho_{m}^{\\mathrm{ref}}$，体积热膨胀系数为 $\\beta$，$$\\rho_{m}(T_{m,i}) = \\rho_{m}^{\\mathrm{ref}}\\left(1 - \\beta\\left(T_{m,i} - T_{m}^{\\mathrm{ref}}\\right)\\right),$$ 以及在 $\\rho_{m}^{\\mathrm{ref}}$ 下的参考单群慢化剂宏观吸收截面 $\\Sigma_{a,M}^{\\mathrm{ref}}$，得到 $$\\Sigma_{a,M}(T_{m,i}) = \\Sigma_{a,M}^{\\mathrm{ref}}\\frac{\\rho_{m}(T_{m,i})}{\\rho_{m}^{\\mathrm{ref}}} = \\Sigma_{a,M}^{\\mathrm{ref}}\\left(1 - \\beta\\left(T_{m,i} - T_{m}^{\\mathrm{ref}}\\right)\\right)。$$\n\n5. 通过对棒状截面进行功率加权平均来构建组件均匀化宏观截面，$$\\Sigma_{x}^{\\mathrm{asm}} = \\sum_{i=1}^{N} w_i \\Sigma_{x,i},$$ 其中 $x \\in \\{a,F,f,F; a,M\\}$，并形成总的组件吸收截面 $$\\Sigma_{a}^{\\mathrm{asm}} = \\sum_{i=1}^{N} w_i\\left(\\Sigma_{a,F}(T_{f,i}) + \\Sigma_{a,M}(T_{m,i})\\right)。$$ 组件燃料裂变截面为 $$\\Sigma_{f}^{\\mathrm{asm}} = \\sum_{i=1}^{N} w_i \\Sigma_{f,F}(T_{f,i}) = \\Sigma_{f,F}^{\\mathrm{ref}}。$$\n\n6. 使用以下公式评估无限介质增殖因子和反应性 $$k_{\\infty}^{\\mathrm{asm}} = \\frac{\\nu \\Sigma_{f}^{\\mathrm{asm}}}{\\Sigma_{a}^{\\mathrm{asm}}}, \\quad \\rho^{\\mathrm{asm}} = \\frac{k_{\\infty}^{\\mathrm{asm}} - 1}{k_{\\infty}^{\\mathrm{asm}}}。$$\n\n7. 将组件级温度系数定义为反应性相对于组件燃料和慢化剂温度的局部导数，通过中心有限差分法进行评估，其中探测步长 $\\delta T$ 均匀地应用于所有燃料棒。具体来说，当探测步长 $\\delta T = 1\\,\\mathrm{K}$ 时，\n   - 燃料多普勒系数 $$c_{D} = \\frac{\\rho^{\\mathrm{asm}}\\left(T_{f,1}+\\delta T,\\dots,T_{f,N}+\\delta T; T_{m,1},\\dots,T_{m,N}\\right) - \\rho^{\\mathrm{asm}}\\left(T_{f,1}-\\delta T,\\dots,T_{f,N}-\\delta T; T_{m,1},\\dots,T_{m,N}\\right)}{2\\delta T},$$ 单位为 $\\text{K}^{-1}$。\n   - 慢化剂温度系数 $$c_{M} = \\frac{\\rho^{\\mathrm{asm}}\\left(T_{f,1},\\dots,T_{f,N}; T_{m,1}+\\delta T,\\dots,T_{m,N}\\right) - \\rho^{\\mathrm{asm}}\\left(T_{f,1},\\dots,T_{f,N}; T_{m,1}-\\delta T,\\dots,T_{m,N}-\\delta T\\right)}{2\\delta T},$$ 单位同样为 $\\text{K}^{-1}$。\n\n本问题的常数和参考值如下：\n- 每次裂变的平均中子产额 $\\nu = 2.40$。\n- 参考单群燃料宏观裂变截面 $\\Sigma_{f,F}^{\\mathrm{ref}} = 0.06\\,\\text{cm}^{-1}$。\n- 在参考燃料温度 $T_{f}^{\\mathrm{ref}} = 900\\,\\mathrm{K}$ 下的参考单群燃料宏观吸收截面 $\\Sigma_{a,F}^{\\mathrm{ref}} = 0.10\\,\\text{cm}^{-1}$。\n- 在参考慢化剂温度 $T_{m}^{\\mathrm{ref}} = 600\\,\\mathrm{K}$ 和参考密度 $\\rho_{m}^{\\mathrm{ref}}$ 下的参考单群慢化剂宏观吸收截面 $\\Sigma_{a,M}^{\\mathrm{ref}} = 5.0\\times 10^{-4}\\,\\text{cm}^{-1}$。\n- 体积热膨胀系数 $\\beta = 2.5\\times 10^{-4}\\,\\text{K}^{-1}$。\n- 中心差分探测步长 $\\delta T = 1\\,\\mathrm{K}$。\n\n所有温度必须以开尔文（K）为单位，所有宏观截面必须以逆厘米（$\\text{cm}^{-1}$）为单位，温度系数必须以逆开尔文（$\\text{K}^{-1}$）为单位。有效增殖因子 $k_{\\infty}$ 和反应性 $\\rho$ 是无量纲的。将所有输出表示为十进制浮点数。\n\n任务：实现一个程序，对于每个测试用例，接收棒状温度和权重，根据上述模型计算组件均匀化宏观吸收截面和燃料裂变截面、$k_{\\infty}$、$\\rho$、燃料多普勒系数 $c_{D}$ 和慢化剂温度系数 $c_{M}$。将所有测试用例的输出聚合到指定格式的单行中。\n\n测试套件：\n- 测试用例 1：$N=4$，权重 $[0.30,\\,0.25,\\,0.25,\\,0.20]$，燃料温度 $[920,\\,905,\\,910,\\,915]\\,\\mathrm{K}$，慢化剂温度 $[595,\\,600,\\,605,\\,598]\\,\\mathrm{K}$。\n- 测试用例 2：$N=4$，权重 $[0.25,\\,0.25,\\,0.25,\\,0.25]$，燃料温度 $[900,\\,900,\\,900,\\,900]\\,\\mathrm{K}$，慢化剂温度 $[600,\\,600,\\,600,\\,600]\\,\\mathrm{K}$。\n- 测试用例 3：$N=4$，权重 $[0.40,\\,0.30,\\,0.20,\\,0.10]$，燃料温度 $[890,\\,895,\\,900,\\,885]\\,\\mathrm{K}$，慢化剂温度 $[620,\\,625,\\,630,\\,623]\\,\\mathrm{K}$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个列表的列表形式的结果，每个内部列表对应一个测试用例，按给定顺序排列，且每个内部列表包含六个浮点数，顺序为 $[c_{D},\\,c_{M},\\,\\Sigma_{a}^{\\mathrm{asm}},\\,\\Sigma_{f}^{\\mathrm{asm}},\\,k_{\\infty}^{\\mathrm{asm}},\\,\\rho^{\\mathrm{asm}}]$。该行必须严格遵循以下格式\n$$\\text{\"[[r_{11},r_{12},r_{13},r_{14},r_{15},r_{16}],[r_{21},r_{22},r_{23},r_{24},r_{25},r_{26}],[r_{31},r_{32},r_{33},r_{34},r_{35},r_{36}]]\"}$$\n使用十进制数，不含任何额外文本。",
            "solution": "该问题是有效的。它提出了一个在核反应堆物理领域科学基础扎实、提法恰当且客观的问题，具体涉及在降阶层面上中子学和热工水力的耦合。所有必要的数据、模型和常数都已提供，以计算所需的量。这些模型虽然简化，但在反应堆分析中是标准的近似方法。\n\n任务是根据棒状温度分布计算组件均匀化的中子学参数。这涉及基于所提供的物理模型和定义的一系列计算。解决方案的结构是首先计算每个测试用例的基准参数，然后使用这些结果通过有限差分法确定温度系数。\n\n首先，我们建立计算基准组件均匀化参数的程序：总吸收截面 $\\Sigma_{a}^{\\mathrm{asm}}$、燃料裂变截面 $\\Sigma_{f}^{\\mathrm{asm}}$、无限介质增殖因子 $k_{\\infty}^{\\mathrm{asm}}$ 和反应性 $\\rho^{\\mathrm{asm}}$。该过程从单个燃料棒层面开始。\n\n对于一个包含 $N$ 个燃料棒的组件中的每个燃料棒 $i$，我们给定了燃料温度 $T_{f,i}$、慢化剂温度 $T_{m,i}$ 和功率份额权重 $w_i$。每个燃料棒的与温度相关的宏观截面计算如下：\n燃料吸收截面 $\\Sigma_{a,F}(T_{f,i})$ 通过对绝对燃料温度的平方根依赖性来体现多普勒展宽效应：\n$$ \\Sigma_{a,F}(T_{f,i}) = \\Sigma_{a,F}^{\\mathrm{ref}}\\sqrt{\\frac{T_{f,i}}{T_{f}^{\\mathrm{ref}}}} $$\n其中 $\\Sigma_{a,F}^{\\mathrm{ref}} = 0.10\\,\\text{cm}^{-1}$ 是在参考温度 $T_{f}^{\\mathrm{ref}} = 900\\,\\mathrm{K}$ 下的参考截面。\n燃料裂变截面 $\\Sigma_{f,F}(T_{f,i})$ 在此近似水平上假定为与温度无关：\n$$ \\Sigma_{f,F}(T_{f,i}) = \\Sigma_{f,F}^{\\mathrm{ref}} = 0.06\\,\\text{cm}^{-1} $$\n慢化剂吸收截面 $\\Sigma_{a,M}(T_{m,i})$ 因密度随温度变化而改变。使用线性化的状态方程，该依赖关系被建模为：\n$$ \\Sigma_{a,M}(T_{m,i}) = \\Sigma_{a,M}^{\\mathrm{ref}}\\left(1 - \\beta\\left(T_{m,i} - T_{m}^{\\mathrm{ref}}\\right)\\right) $$\n其中 $\\Sigma_{a,M}^{\\mathrm{ref}} = 5.0\\times 10^{-4}\\,\\text{cm}^{-1}$ 是在参考温度 $T_{m}^{\\mathrm{ref}} = 600\\,\\mathrm{K}$ 下的参考值，而 $\\beta = 2.5\\times 10^{-4}\\,\\text{K}^{-1}$ 是体积热膨胀系数。\n\n接下来，对这些棒状截面进行均匀化，以获得组件级的有效截面。问题指定了一个功率加权平均方案。组件均匀化的总吸收截面 $\\Sigma_{a}^{\\mathrm{asm}}$ 是每个燃料棒的燃料和慢化剂贡献的总和，按其各自的功率份额加权：\n$$ \\Sigma_{a}^{\\mathrm{asm}} = \\sum_{i=1}^{N} w_i \\left( \\Sigma_{a,F}(T_{f,i}) + \\Sigma_{a,M}(T_{m,i}) \\right) $$\n组件均匀化的裂变截面也类似地进行平均。由于 $\\Sigma_{f,F}$ 对所有燃料棒都是恒定的，并且权重之和为一（$\\sum_{i=1}^{N} w_i = 1$），结果简化为：\n$$ \\Sigma_{f}^{\\mathrm{asm}} = \\sum_{i=1}^{N} w_i \\Sigma_{f,F}(T_{f,i}) = \\Sigma_{f,F}^{\\mathrm{ref}} \\sum_{i=1}^{N} w_i = \\Sigma_{f,F}^{\\mathrm{ref}} = 0.06\\,\\text{cm}^{-1} $$\n\n有了均匀化截面，组件的无限介质增殖因子 $k_{\\infty}^{\\mathrm{asm}}$ 计算为中子产生与吸收之比。中子产生由 $\\nu \\Sigma_{f}^{\\mathrm{asm}}$ 给出，吸收由 $\\Sigma_{a}^{\\mathrm{asm}}$ 给出，其中 $\\nu = 2.40$ 是每次裂变释放的平均中子数。\n$$ k_{\\infty}^{\\mathrm{asm}} = \\frac{\\nu \\Sigma_{f}^{\\mathrm{asm}}}{\\Sigma_{a}^{\\mathrm{asm}}} $$\n根据 $k_{\\infty}^{\\mathrm{asm}}$，组件的反应性 $\\rho^{\\mathrm{asm}}$ 由其标准定义确定：\n$$ \\rho^{\\mathrm{asm}} = \\frac{k_{\\infty}^{\\mathrm{asm}} - 1}{k_{\\infty}^{\\mathrm{asm}}} $$\n\n最后一步是计算组件级的反应性温度系数：燃料多普勒系数 $c_{D}$ 和慢化剂温度系数 $c_{M}$。这些系数分别量化了由于燃料和慢化剂温度的均匀变化而引起的反应性变化。它们使用中心有限差分近似法计算反应性的偏导数。\n为了找到多普勒系数 $c_D$，我们在两个扰动状态下评估反应性，其中每个燃料棒的燃料温度被均匀地移动 $\\pm\\delta T$，其中 $\\delta T = 1\\,\\mathrm{K}$。设 $\\rho^{\\mathrm{asm}}(T_f, T_m)$ 是作为燃料和慢化剂温度矢量函数的反应性。那么：\n$$ c_{D} = \\frac{\\rho^{\\mathrm{asm}}(T_f + \\delta T, T_m) - \\rho^{\\mathrm{asm}}(T_f - \\delta T, T_m)}{2\\delta T} $$\n其中 $T_f + \\delta T$ 表示数组 $[T_{f,1}+\\delta T, \\dots, T_{f,N}+\\delta T]$。\n类似地，慢化剂温度系数 $c_M$ 通过扰动慢化剂温度，同时保持燃料温度在其基准值来找到：\n$$ c_{M} = \\frac{\\rho^{\\mathrm{asm}}(T_f, T_m + \\delta T) - \\rho^{\\mathrm{asm}}(T_f, T_m - \\delta T)}{2\\delta T} $$\n其中 $T_m + \\delta T$ 表示数组 $[T_{m,1}+\\delta T, \\dots, T_{m,N}+\\delta T]$。\n\n为了在计算上实现这一过程，设计了一个辅助函数，该函数将棒状温度矢量（$T_f$ 和 $T_m$）和权重矢量（$w$）作为输入，并返回计算出的反应性 $\\rho^{\\mathrm{asm}}$。该函数封装了从棒状截面到均匀化参数的整个计算链。对于每个测试用例，首先使用给定的基准温度调用此函数以获得主要结果（$\\Sigma_{a}^{\\mathrm{asm}}, \\Sigma_{f}^{\\mathrm{asm}}, k_{\\infty}^{\\mathrm{asm}}, \\rho^{\\mathrm{asm}}$）。然后，使用扰动后的温度数组再次调用它，以获得 $c_D$ 和 $c_M$ 的有限差分公式所需的反应性值。使用 `numpy` 数组有助于对温度进行逐元素操作以及对棒状截面和加权和进行矢量化计算。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Main function to solve the nuclear reactor simulation problem.\n    It processes a suite of test cases, calculates neutronic feedback parameters,\n    and prints the results in the specified format.\n    \"\"\"\n    \n    # Define constants and reference values from the problem statement.\n    constants = {\n        'nu': 2.40,\n        'Sigma_f_F_ref': 0.06,  # cm^-1\n        'Sigma_a_F_ref': 0.10,  # cm^-1\n        'Tf_ref': 900.0,       # K\n        'Sigma_a_M_ref': 5.0e-4, # cm^-1\n        'Tm_ref': 600.0,       # K\n        'beta': 2.5e-4,        # K^-1\n        'delta_T': 1.0,         # K\n    }\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        {\n            'weights': [0.30, 0.25, 0.25, 0.20],\n            'fuel_temps': [920.0, 905.0, 910.0, 915.0],\n            'mod_temps': [595.0, 600.0, 605.0, 598.0]\n        },\n        {\n            'weights': [0.25, 0.25, 0.25, 0.25],\n            'fuel_temps': [900.0, 900.0, 900.0, 900.0],\n            'mod_temps': [600.0, 600.0, 600.0, 600.0]\n        },\n        {\n            'weights': [0.40, 0.30, 0.20, 0.10],\n            'fuel_temps': [890.0, 895.0, 900.0, 885.0],\n            'mod_temps': [620.0, 625.0, 630.0, 623.0]\n        },\n    ]\n\n    def calculate_assembly_params(Tf_pin, Tm_pin, w_pin, consts):\n        \"\"\"\n        Calculates assembly-homogenized parameters for a given set of pin-wise\n        temperatures and weights.\n\n        Args:\n            Tf_pin (np.ndarray): Array of pin-wise fuel temperatures in Kelvin.\n            Tm_pin (np.ndarray): Array of pin-wise moderator temperatures in Kelvin.\n            w_pin (np.ndarray): Array of pin-wise power fraction weights.\n            consts (dict): Dictionary of physical constants and reference values.\n\n        Returns:\n            dict: A dictionary containing the calculated assembly parameters.\n        \"\"\"\n        # Pin-wise macroscopic cross-section calculations\n        Sigma_a_F_pin = consts['Sigma_a_F_ref'] * np.sqrt(Tf_pin / consts['Tf_ref'])\n        Sigma_a_M_pin = consts['Sigma_a_M_ref'] * (1.0 - consts['beta'] * (Tm_pin - consts['Tm_ref']))\n        \n        # Assembly-homogenized cross-sections\n        Sigma_f_asm = consts['Sigma_f_F_ref']  # Constant for all pins and assembly\n        Sigma_a_asm = np.sum(w_pin * (Sigma_a_F_pin + Sigma_a_M_pin))\n\n        # Assembly-level k-infinity and reactivity\n        k_inf_asm = (consts['nu'] * Sigma_f_asm) / Sigma_a_asm\n        rho_asm = (k_inf_asm - 1.0) / k_inf_asm\n        \n        return {\n            'Sigma_a_asm': Sigma_a_asm,\n            'Sigma_f_asm': Sigma_f_asm,\n            'k_inf_asm': k_inf_asm,\n            'rho_asm': rho_asm\n        }\n\n    all_results = []\n    for case in test_cases:\n        w_pin = np.array(case['weights'])\n        Tf_pin = np.array(case['fuel_temps'])\n        Tm_pin = np.array(case['mod_temps'])\n\n        # Calculate base parameters\n        base_params = calculate_assembly_params(Tf_pin, Tm_pin, w_pin, constants)\n\n        # Calculate Fuel Doppler Coefficient (c_D)\n        delta_T = constants['delta_T']\n        rho_plus_f = calculate_assembly_params(Tf_pin + delta_T, Tm_pin, w_pin, constants)['rho_asm']\n        rho_minus_f = calculate_assembly_params(Tf_pin - delta_T, Tm_pin, w_pin, constants)['rho_asm']\n        c_D = (rho_plus_f - rho_minus_f) / (2.0 * delta_T)\n\n        # Calculate Moderator Temperature Coefficient (c_M)\n        rho_plus_m = calculate_assembly_params(Tf_pin, Tm_pin + delta_T, w_pin, constants)['rho_asm']\n        rho_minus_m = calculate_assembly_params(Tf_pin, Tm_pin - delta_T, w_pin, constants)['rho_asm']\n        c_M = (rho_plus_m - rho_minus_m) / (2.0 * delta_T)\n\n        # Assemble the results for the current test case in the specified order\n        case_results = [\n            c_D,\n            c_M,\n            base_params['Sigma_a_asm'],\n            base_params['Sigma_f_asm'],\n            base_params['k_inf_asm'],\n            base_params['rho_asm']\n        ]\n        all_results.append(case_results)\n    \n    # Format the final output string exactly as specified.\n    outer_parts = []\n    for row in all_results:\n        inner_part = ','.join(f\"{x:.17g}\" for x in row)\n        outer_parts.append(f'[{inner_part}]')\n    final_output_string = f\"[[{','.join(outer_parts)}]]\".replace(\"],[[\", \"],[\")\n\n\n    print(f\"[{','.join(outer_parts)}]\")\n\nsolve()\n```"
        }
    ]
}
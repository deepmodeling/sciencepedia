{
    "hands_on_practices": [
        {
            "introduction": "在热工水力实验中，一个常见的挑战是如何从测得的总压降中准确地分离出各个分量。当流体因相变（例如沸腾）而密度发生变化时，为了保持质量通量恒定，流体必须加速，这会引起一个“加速压降”。本练习  旨在演示如何计算这一分量，并揭示在解读总压降测量数据时，为何必须对其进行精确修正，尤其是在短的、高热流密度的测试段中。",
            "id": "4259263",
            "problem": "一个短的、水平的、均匀加热的试验段被用于在核热工水力回路中生成两相流压降的基准数据。入口是饱和液体，出口具有给定的热力学干度。测量提供了整个加热段的总轴向压降。一位分析人员在均匀平衡模型 (HEM) 下对数据进行后处理，该模型假设两相具有一个共同的速度并且处于局部热力学平衡状态。\n\n从可变密度混合物的一维、稳态、恒定截面积动量平衡和混合物比容的定义出发，根据第一性原理推导出一个表达式，用于表示在整个加热长度上轴向加速度对压降的贡献 $\\Delta P_{a}$。用此定性解释为什么当加热长度短且水平时，忽略 $\\Delta P_{a}$ 会导致推断的“摩擦”压降出现偏差。\n\n然后，对于在以下条件下运行的特定短加热试验段：\n- 入口干度 $x_{\\text{in}} = 0$ 且出口干度 $x_{\\text{out}} = 0.20$。\n- 质量通量 $G = 1500\\ \\text{kg}\\ \\text{m}^{-2}\\ \\text{s}^{-1}$。\n- 饱和液体密度 $\\rho_{l} = 760\\ \\text{kg}\\ \\text{m}^{-3}$ 且饱和蒸汽密度 $\\rho_{g} = 38\\ \\text{kg}\\ \\text{m}^{-3}$ (因此 $\\rho_{l}/\\rho_{g} = 20$)。\n- 加热段是水平的，因此重力压头可以忽略不计，测得的该段总压降为 $\\Delta P_{\\text{tot}} = 18.00\\ \\text{kPa}$。\n\n计算如果忽略加速度分量，将被错误地归因于“摩擦”的那部分压降占总测量压降的比例，定义为\n$$\nf_{\\text{err}} \\equiv \\frac{\\Delta P_{a}}{\\Delta P_{\\text{tot}}}.\n$$\n\n将 $f_{\\text{err}}$ 的最终数值答案四舍五入到四位有效数字。以无单位的小数形式表示最终答案。",
            "solution": "合适的出发点是两相混合物单个控制体的一维、稳态、恒定截面积的动量平衡方程。对于在轴向坐标 $z$ 上恒定的横截面积 $A$ 和混合物平均性质，轴向动量平衡可以写为\n$$\n\\frac{dP}{dz} + \\frac{d}{dz}\\left(\\frac{G^{2}}{\\rho_{m}}\\right) + \\frac{4\\tau_{w}}{D} + \\rho_{m} g \\sin\\theta = 0,\n$$\n其中 $P$ 是压力，$G$ 是质量通量，$\\rho_{m}$ 是混合物密度，$\\tau_{w}$ 是壁面剪切应力，$D$ 是水力直径，$g$ 是重力加速度，$\\theta$ 是与水平面夹角。这个形式是通过将轴向动量平衡写成恒定 $A$ 的微分形式，使用 $G \\equiv \\rho_{m} u_{m}$（其中 $u_{m}$ 是混合物平均速度），并将动量通量的流向变化收集到 $d(G^{2}/\\rho_{m})/dz$ 项中得到的。\n\n重排上述方程，总轴向压力梯度分解为加速度、壁面摩擦和重力的贡献：\n$$\n\\frac{dP}{dz} = -\\underbrace{\\frac{d}{dz}\\left(\\frac{G^{2}}{\\rho_{m}}\\right)}_{\\text{acceleration}} - \\underbrace{\\frac{4\\tau_{w}}{D}}_{\\text{friction}} - \\underbrace{\\rho_{m} g \\sin\\theta}_{\\text{gravity}}.\n$$\n沿加热长度从入口到出口积分后，加速度对压降的贡献为\n$$\n\\Delta P_{a} \\equiv \\int_{\\text{in}}^{\\text{out}} \\left[-\\frac{d}{dz}\\left(\\frac{G^{2}}{\\rho_{m}}\\right)\\right] dz = G^{2}\\left(\\frac{1}{\\rho_{m,\\text{out}}} - \\frac{1}{\\rho_{m,\\text{in}}}\\right),\n$$\n其中，对于没有横流的恒定截面积管道，质量通量 $G$ 沿 $z$ 方向是恒定的。\n\n在均匀平衡模型 (HEM) 下，两相共享一个共同的速度，并处于局部热力学平衡状态，因此混合物比容是各相比容的质量分数加权和。将干度 $x$ 定义为蒸汽的质量分数，则混合物比容 $v_{m}$ 和密度 $\\rho_{m}$ 满足\n$$\nv_{m} \\equiv \\frac{1}{\\rho_{m}} = \\frac{x}{\\rho_{g}} + \\frac{1 - x}{\\rho_{l}}.\n$$\n由于 $x_{in} = 0$， $1/\\rho_{m,in} = 1/\\rho_l$。因此，\n$$\n\\Delta P_{a} = G^{2}\\left[v_{m,\\text{out}} - v_{m,\\text{in}}\\right] = G^{2}\\left(\\frac{x_{\\text{out}}}{\\rho_{g}} + \\frac{1 - x_{\\text{out}}}{\\rho_{l}} - \\frac{1}{\\rho_{l}}\\right) = G^{2}\\, x_{\\text{out}} \\left(\\frac{1}{\\rho_{g}} - \\frac{1}{\\rho_{l}}\\right).\n$$\n符号为正，因为当蒸汽产生时，$v_{m}$ 在流动方向上增加，这需要压力降低来加速混合物；按照惯例，$\\Delta P_{a} > 0$ 对总压降有贡献。\n\n在一个短的、水平的管段中，重力项可以忽略不计，壁面摩擦项可能不大。如果在分析测得的总压降 $\\Delta P_{\\text{tot}}$ 时忽略 $\\Delta P_{a}$，那么就会将 $\\Delta P_{a}$ 错误地归因于“摩擦”。因此，推断的“摩擦”分量中的相对偏差为\n$$\nf_{\\text{err}} \\equiv \\frac{\\Delta P_{a}}{\\Delta P_{\\text{tot}}}.\n$$\n\n对给定条件进行数值计算：\n- 已知 $x_{\\text{in}} = 0$, $x_{\\text{out}} = 0.20$, $G = 1500\\ \\text{kg}\\ \\text{m}^{-2}\\ \\text{s}^{-1}$, $\\rho_{l} = 760\\ \\text{kg}\\ \\text{m}^{-3}$, $\\rho_{g} = 38\\ \\text{kg}\\ \\text{m}^{-3}$。\n- 计算比容差：\n$$\n\\frac{1}{\\rho_{g}} - \\frac{1}{\\rho_{l}} = \\frac{1}{38\\ \\text{kg}\\ \\text{m}^{-3}} - \\frac{1}{760\\ \\text{kg}\\ \\text{m}^{-3}} = 0.026315789\\ \\text{m}^{3}\\ \\text{kg}^{-1} - 0.001315789\\ \\text{m}^{3}\\ \\text{kg}^{-1} = 0.025\\ \\text{m}^{3}\\ \\text{kg}^{-1}.\n$$\n- 计算加速度压降：\n$$\n\\Delta P_{a} = \\left(1500\\ \\text{kg}\\ \\text{m}^{-2}\\ \\text{s}^{-1}\\right)^{2}\\,\\left(0.20\\right)\\,\\left(0.025\\ \\text{m}^{3}\\ \\text{kg}^{-1}\\right) = 2.25\\times 10^{6}\\ \\text{kg}^{2}\\ \\text{m}^{-4}\\ \\text{s}^{-2} \\times 0.005\\ \\text{m}^{3}\\ \\text{kg}^{-1} = 11250\\ \\text{Pa}.\n$$\n- 测得的总压降为 $\\Delta P_{\\text{tot}} = 18.00\\ \\text{kPa} = 18000\\ \\text{Pa}$，则相对偏差为\n$$\nf_{\\text{err}} = \\frac{11250\\ \\text{Pa}}{18000\\ \\text{Pa}} = 0.625.\n$$\n\n四舍五入到四位有效数字，所求比例为 $0.6250$。",
            "answer": "$$\\boxed{0.6250}$$"
        },
        {
            "introduction": "在许多工程应用中，例如沸水反应堆（BWR）的堆芯通道，两相流通常是垂直向上的。在这种情况下，重力压降（或称静水压头）往往是总压降的主要组成部分。本练习  将指导你如何基于给定的沿程含气率或干度分布，通过对局部混合物密度进行积分来计算总的重力压降，从而加深对沸腾通道中静水压头变化的理解。",
            "id": "4259288",
            "problem": "核反应堆堆芯中一个长度为 $L$ 的垂直沸腾通道内有水向上流动。设轴向坐标为 $z$，从通道入口 $z=0$ 向上测量至出口 $z=L$。整体沸腾起始于 $z=z_b$ 处，其中 $0 \\le z < z_b$ 为过冷液体区，而 $z_b \\le z \\le L$ 为饱和两相流区。在通道出口处，饱和条件下的质量含汽率为 $x_{out}$。假设如下：\n- 重力压降定义为 $\\Delta P_g = \\int_{0}^{L} \\rho(z)\\, g \\, dz$，其中 $g$ 是重力加速度，$\\rho(z)$ 是局部混合物密度。\n- 与重力相比，加速压降和壁面摩擦压降可忽略不计，且横截面积是均匀的。\n- 在两相流区，流动处于热平衡状态并遵循均匀平衡模型（HEM），在该模型中，两相共享相同的速度，且空泡份额与给定质量含汽率下的混合物比容一致。\n- 液相密度 $\\rho_l$ 和气相密度 $\\rho_g$ 可被视为常数，等于出口压力下的饱和值。\n- 在两相流区，轴向含汽率分布是线性的：对于 $z_b \\le z \\le L$，有 $x(z) = \\dfrac{x_{out}}{L - z_b} \\, (z - z_b)$；对于 $0 \\le z < z_b$，有 $x(z)=0$。\n\n给定以下数据：\n- $L = 5 \\ \\mathrm{m}$，$z_b = 1 \\ \\mathrm{m}$，$x_{out} = 0.2$，\n- $g = 9.81 \\ \\mathrm{m/s^2}$，\n- $\\rho_l = 900 \\ \\mathrm{kg/m^3}$，$\\rho_g = 6 \\ \\mathrm{kg/m^3}$，\n\n从一维稳态垂直动量平衡和均匀平衡模型所隐含的一致混合物关系出发，推导 $\\rho(z)$ 关于 $x(z)$ 和给定常数的表达式，然后计算重力压降 $\\Delta P_g = \\int_{0}^{L} \\rho(z)\\, g \\, dz$。最终答案以 $\\mathrm{kPa}$ 为单位表示，并四舍五入至四位有效数字。",
            "solution": "本问题要求计算垂直沸腾通道中的重力压降 $\\Delta P_g$。我们首先根据所给假设推导必要的物理关系。\n\n首先，我们根据均匀平衡模型（HEM）建立局部混合物密度 $\\rho(z)$ 的表达式。在HEM中，两相混合物的比容 $v(z)$ 是液相比容 $v_l$ 和气相比容 $v_g$ 的质量加权平均值：\n$$ v(z) = (1 - x(z)) v_l + x(z) v_g $$\n其中 $x(z)$ 是局部质量含汽率。比容是密度的倒数，即 $v_l = 1/\\rho_l$ 和 $v_g = 1/\\rho_g$。混合物密度 $\\rho(z)$ 是混合物比容的倒数，即 $\\rho(z) = 1/v(z)$。代入 $v_l$ 和 $v_g$ 的表达式：\n$$ \\frac{1}{\\rho(z)} = \\frac{1 - x(z)}{\\rho_l} + \\frac{x(z)}{\\rho_g} $$\n这可以重新整理以直接表示 $\\rho(z)$：\n$$ \\rho(z) = \\left( \\frac{1}{\\rho_l} + x(z) \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) \\right)^{-1} $$\n这就是所需的 $\\rho(z)$ 关于 $x(z)$ 和常数相密度的表达式。\n\n总重力压降由局部静水压头在通道长度 $L$ 上的积分给出：\n$$ \\Delta P_g = \\int_{0}^{L} \\rho(z)\\, g \\, dz $$\n该通道分为两个区域：从 $z=0$ 到 $z=z_b$ 的单相液体区，以及从 $z=z_b$ 到 $z=L$ 的两相区。我们可以相应地将积分拆分：\n$$ \\Delta P_g = \\int_{0}^{z_b} \\rho(z)\\, g \\, dz + \\int_{z_b}^{L} \\rho(z)\\, g \\, dz $$\n\n在第一个区域（$0 \\le z < z_b$），流体是过冷液体。含汽率 $x(z) = 0$。因此密度是恒定的，等于液体密度，$\\rho(z) = \\rho_l$。该区域对压降的贡献 $\\Delta P_{g,1\\phi}$ 为：\n$$ \\Delta P_{g,1\\phi} = \\int_{0}^{z_b} \\rho_l g \\, dz = \\rho_l g [z]_{0}^{z_b} = \\rho_l g z_b $$\n\n在第二个区域（$z_b \\le z \\le L$），流动是两相流。含汽率 $x(z)$ 由线性分布给出：\n$$ x(z) = \\frac{x_{out}}{L - z_b} (z - z_b) $$\n密度 $\\rho(z)$ 由前面推导的HEM关系给出。该区域对压降的贡献 $\\Delta P_{g,2\\phi}$ 为：\n$$ \\Delta P_{g,2\\phi} = \\int_{z_b}^{L} g \\left( \\frac{1}{\\rho_l} + x(z) \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) \\right)^{-1} dz $$\n代入 $x(z)$ 的表达式：\n$$ \\Delta P_{g,2\\phi} = g \\int_{z_b}^{L} \\left( \\frac{1}{\\rho_l} + \\frac{x_{out}}{L - z_b}(z - z_b) \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) \\right)^{-1} dz $$\n为求解此积分，我们进行换元。令分母为 $u(z)$：\n$$ u(z) = \\frac{1}{\\rho_l} + \\frac{x_{out}}{L - z_b}(z - z_b) \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) $$\n微分 $du$ 是：\n$$ du = \\frac{x_{out}}{L - z_b} \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) dz $$\n整理出 $dz$：\n$$ dz = \\frac{L - z_b}{x_{out} \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right)} du $$\n$u$ 的积分上下限是：\n当 $z = z_b$ 时：$u(z_b) = \\frac{1}{\\rho_l}$\n当 $z = L$ 时：$u(L) = \\frac{1}{\\rho_l} + \\frac{x_{out}}{L - z_b}(L - z_b) \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) = \\frac{1}{\\rho_l} + x_{out}\\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right) = \\frac{1 - x_{out}}{\\rho_l} + \\frac{x_{out}}{\\rho_g}$\n积分变为：\n$$ \\Delta P_{g,2\\phi} = g \\int_{u(z_b)}^{u(L)} \\frac{1}{u} \\cdot \\frac{L - z_b}{x_{out} \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right)} du $$\n$$ \\Delta P_{g,2\\phi} = g \\frac{L - z_b}{x_{out} \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right)} [\\ln|u|]_{u(z_b)}^{u(L)} $$\n$$ \\Delta P_{g,2\\phi} = g \\frac{L - z_b}{x_{out} \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right)} \\left( \\ln\\left(\\frac{1 - x_{out}}{\\rho_l} + \\frac{x_{out}}{\\rho_g}\\right) - \\ln\\left(\\frac{1}{\\rho_l}\\right) \\right) $$\n使用对数性质 $\\ln(a) - \\ln(b) = \\ln(a/b)$：\n$$ \\Delta P_{g,2\\phi} = g \\frac{L - z_b}{x_{out} \\left(\\frac{1}{\\rho_g} - \\frac{1}{\\rho_l}\\right)} \\ln\\left(\\frac{\\frac{1 - x_{out}}{\\rho_l} + \\frac{x_{out}}{\\rho_g}}{\\frac{1}{\\rho_l}}\\right) $$\n$$ \\Delta P_{g,2\\phi} = g \\frac{(L - z_b) \\rho_l \\rho_g}{x_{out} (\\rho_l - \\rho_g)} \\ln\\left(1 - x_{out} + x_{out}\\frac{\\rho_l}{\\rho_g}\\right) $$\n总重力压降是两部分贡献之和：\n$$ \\Delta P_g = \\Delta P_{g,1\\phi} + \\Delta P_{g,2\\phi} = \\rho_l g z_b + g \\frac{(L - z_b) \\rho_l \\rho_g}{x_{out} (\\rho_l - \\rho_g)} \\ln\\left(1 - x_{out} + x_{out}\\frac{\\rho_l}{\\rho_g}\\right) $$\n现在，我们代入给定的数值：\n$L = 5 \\ \\mathrm{m}$，$z_b = 1 \\ \\mathrm{m}$，$x_{out} = 0.2$，$g = 9.81 \\ \\mathrm{m/s^2}$，$\\rho_l = 900 \\ \\mathrm{kg/m^3}$，$\\rho_g = 6 \\ \\mathrm{kg/m^3}$。\n\n单相区的贡献为：\n$$ \\Delta P_{g,1\\phi} = (900 \\ \\mathrm{kg/m^3}) \\cdot (9.81 \\ \\mathrm{m/s^2}) \\cdot (1 \\ \\mathrm{m}) = 8829 \\ \\mathrm{Pa} $$\n两相区的贡献为：\n$$ L - z_b = 5 - 1 = 4 \\ \\mathrm{m} $$\n$$ \\rho_l - \\rho_g = 900 - 6 = 894 \\ \\mathrm{kg/m^3} $$\n$$ \\frac{\\rho_l}{\\rho_g} = \\frac{900}{6} = 150 $$\n$$ \\Delta P_{g,2\\phi} = (9.81) \\cdot \\frac{(4) \\cdot (900) \\cdot (6)}{0.2 \\cdot (894)} \\ln\\left(1 - 0.2 + 0.2 \\cdot 150 \\right) $$\n$$ \\Delta P_{g,2\\phi} = (9.81) \\cdot \\frac{21600}{178.8} \\ln(0.8 + 30) $$\n$$ \\Delta P_{g,2\\phi} = (9.81) \\cdot (120.79418...) \\ln(30.8) $$\n$$ \\Delta P_{g,2\\phi} \\approx (1185.011) \\cdot (3.427515) \\approx 4061.848 \\ \\mathrm{Pa} $$\n总压降为：\n$$ \\Delta P_g = 8829 \\ \\mathrm{Pa} + 4061.848 \\ \\mathrm{Pa} = 12890.848 \\ \\mathrm{Pa} $$\n转换为千帕：\n$$ \\Delta P_g = 12.890848 \\ \\mathrm{kPa} $$\n四舍五入至四位有效数字，我们得到 $12.89 \\ \\mathrm{kPa}$。",
            "answer": "$$\\boxed{12.89}$$"
        },
        {
            "introduction": "此前的练习分别独立地探讨了压降的各个分量。本综合性练习  将这些概念融为一体，要求你构建一个更完整的集成模型。你将从基本的能量平衡方程出发，推导出沿加热通道的蒸汽干度分布，然后利用此干度分布来计算加速压降和摩擦压降。这个过程引入了摩擦因子关联式和数值积分等实际工程计算中的复杂性，让你初步体验真实热工水力程序开发的核心逻辑。",
            "id": "4259269",
            "problem": "考虑在水力直径为 $D_h$、长度为 $L$ 的均匀圆形通道中存在一维、稳态、饱和沸腾流。质量通量为 $G$（定义为单位横截面积的质量流率，单位为 $\\mathrm{kg}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$），施加的壁面热通量为 $q''(z)$（单位为 $\\mathrm{W}\\,\\mathrm{m}^{-2}$）。假设采用均匀平衡模型（HEM）：液相和气相以相同的速度运动（滑移比等于一），流动在固定压力下饱和，因此饱和性质为常数，并且轴向热传导以及轴向功可以忽略不计。设饱和沸腾段的入口位于 $z = 0$，入口干度 $x(0) = 0$。\n\n从基本能量平衡方程（对于受热通道，$d(h)/dz = 4q''(z)/(G D_h)$）和饱和状态下混合物焓的定义出发，推导出沿通道的蒸汽干度 $x(z)$ 作为 $q''(z)$、质量通量 $G$、水力直径 $D_h$ 和汽化潜热 $h_{fg}$ 的函数表达式。然后，使用针对恒定面积流动的简化一维稳态动量方程，在HEM假设下，计算沿通道长度 $L$ 的加速压降 $\\Delta P_a$ 和摩擦压降 $\\Delta P_f$。\n\n使用以下基于物理的定义和模型选择：\n- 饱和混合物焓为 $h(z) = h_f + x(z)\\,h_{fg}$，其中 $h_f$ 是饱和液焓（在固定压力假设下为常数），$h_{fg}$ 是汽化潜热。\n- HEM下的混合物密度为 $\\rho_m(x) = \\left(\\dfrac{x}{\\rho_g} + \\dfrac{1-x}{\\rho_l}\\right)^{-1}$，其中 $\\rho_l$ 和 $\\rho_g$ 分别是饱和液体和气体的密度。\n- 混合物黏度模型为线性质量分数混合模型 $\\mu_m(x) = x\\,\\mu_g + (1-x)\\,\\mu_l$，其中 $\\mu_l$ 和 $\\mu_g$ 分别是饱和液体和气体的黏度。\n- 范宁摩擦因子 $f_F$ 根据在混合物雷诺数 $\\mathrm{Re}_m = \\dfrac{G\\,D_h}{\\mu_m}$ 下评估的广泛使用的单相流关系式进行分段建模：\n  - 层流区，当 $\\mathrm{Re}_m \\le 2300$ 时：$f_F = \\dfrac{16}{\\mathrm{Re}_m}$。\n  - 湍流区，当 $\\mathrm{Re}_m > 2300$ 时：$f_F = 0.0791\\,\\mathrm{Re}_m^{-0.25}$。\n- 圆形通道中充分发展流的摩擦压力梯度为 $dP_f/dz = \\dfrac{2\\,f_F\\,G^2}{D_h\\,\\rho_m(x(z))}$。\n- 通道上的加速压降由动量方程项计算得出：$\\Delta P_a = G^2\\left(\\dfrac{1}{\\rho_m(L)} - \\dfrac{1}{\\rho_m(0)}\\right)$。\n\n假设如果计算出的 $x(z)$ 超过 $1$（干涸），则对于所有后续的 $z$ 值，它将被截断为 $x(z) = 1$，并且在干涸点之后，属性 $(\\rho_m,\\mu_m)$ 将以 $x=1$ 进行一致性评估。\n\n实现推导并为以下一系列测试案例计算数值结果。在所有案例中，使用恒定的饱和属性：$\\rho_l = 700\\,\\mathrm{kg}\\,\\mathrm{m}^{-3}$，$\\rho_g = 35\\,\\mathrm{kg}\\,\\mathrm{m}^{-3}$，$\\mu_l = 1.0\\times 10^{-4}\\,\\mathrm{Pa}\\,\\mathrm{s}$，$\\mu_g = 1.2\\times 10^{-5}\\,\\mathrm{Pa}\\,\\mathrm{s}$，以及 $h_{fg} = 1.2\\times 10^{6}\\,\\mathrm{J}\\,\\mathrm{kg}^{-1}$。热通量函数 $q''(z)$ 定义在区间 $z \\in [0,L]$上：\n\n- 案例 $1$（基准恒定热通量）：\n  - $L = 3.0\\,\\mathrm{m}$，$D_h = 0.012\\,\\mathrm{m}$，$G = 900\\,\\mathrm{kg}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$，\n  - 对于所有 $z$，$q''(z) = 2.5\\times 10^{5}\\,\\mathrm{W}\\,\\mathrm{m}^{-2}$。\n\n- 案例 $2$（导致提早干涸的高热通量）：\n  - $L = 4.0\\,\\mathrm{m}$，$D_h = 0.010\\,\\mathrm{m}$，$G = 600\\,\\mathrm{kg}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$，\n  - 对于所有 $z$，$q''(z) = 6.0\\times 10^{5}\\,\\mathrm{W}\\,\\mathrm{m}^{-2}$。\n\n- 案例 $3$（零热量输入）：\n  - $L = 2.0\\,\\mathrm{m}$，$D_h = 0.015\\,\\mathrm{m}$，$G = 1000\\,\\mathrm{kg}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$，\n  - 对于所有 $z$，$q''(z) = 0\\,\\mathrm{W}\\,\\mathrm{m}^{-2}$。\n\n- 案例 $4$（空间变化的热通量）：\n  - $L = 3.5\\,\\mathrm{m}$，$D_h = 0.011\\,\\mathrm{m}$，$G = 1100\\,\\mathrm{kg}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$，\n  - $q''(z) = 3.0\\times 10^{5}\\left(1 + 0.2\\,\\sin\\left(\\dfrac{\\pi\\,z}{L}\\right)\\right)\\,\\mathrm{W}\\,\\mathrm{m}^{-2}$。\n\n你的程序必须：\n- 从能量平衡推导出 $x(z)$，并将其饱和到区间 $[0,1]$ 内。\n- 使用 $z=0$ 和 $z=L$ 处的HEM混合物密度，计算以 $\\mathrm{Pa}$ 为单位的 $\\Delta P_a$。\n- 通过使用指定的摩擦因子和混合物属性，对 $z \\in [0,L]$ 上的 $dP_f/dz$ 进行数值积分，计算以 $\\mathrm{Pa}$ 为单位的 $\\Delta P_f$。\n- 将每个案例的最终输出表示为三个浮点数的列表 $[x_{\\text{out}}, \\Delta P_a, \\Delta P_f]$，其中 $x_{\\text{out}} = x(L)$ 是无量纲的，压降单位为 $\\mathrm{Pa}$。\n- 将每个报告的数字四舍五入到 $6$ 位小数。\n\n最终输出格式：\n你的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表形式的结果，每个案例的结果从案例1到案例4按顺序作为子列表出现。例如，输出结构必须是 $[[x_1,\\Delta P_{a,1},\\Delta P_{f,1}],[x_2,\\Delta P_{a,2},\\Delta P_{f,2}],\\dots]$ 的形式，不打印任何额外文本。",
            "solution": "该问题要求基于均匀平衡模型（HEM），推导和计算在受热通道中两相流的蒸汽干度和压降分量。解决方案包括三个主要步骤：推导轴向蒸汽干度分布 $x(z)$，计算加速压降 $\\Delta P_a$，以及通过数值积分计算摩擦压降 $\\Delta P_f$。\n\n### 步骤 1：推导蒸汽干度分布 $x(z)$\n\n分析始于流体元的稳态一维能量平衡。对于一个水力直径为 $D_h$ 的通道，受到壁面热通量 $q''(z)$ 的加热，能量平衡方程为：\n$$\n\\frac{dh}{dz} = \\frac{4 q''(z)}{G D_h}\n$$\n其中，$h$ 是混合物比焓，$z$ 是轴向坐标，$G$ 是质量通量。\n\n在恒定压力下饱和流动的假设下，饱和性质为常数。混合物焓 $h(z)$ 定义为：\n$$\nh(z) = h_f + x(z)h_{fg}\n$$\n其中 $x(z)$ 是蒸汽干度，$h_{fg}$ 是汽化潜热。\n\n对焓表达式关于 $z$ 求导可得：\n$$\n\\frac{dh}{dz} = h_{fg}\\frac{dx}{dz}\n$$\n令两个 $\\frac{dh}{dz}$ 的表达式相等：\n$$\nh_{fg}\\frac{dx}{dz} = \\frac{4 q''(z)}{G D_h} \\implies \\frac{dx}{dz} = \\frac{4 q''(z)}{G D_h h_{fg}}\n$$\n这个常微分方程描述了蒸汽干度沿通道的变化。为了求得 $x(z)$，我们从通道入口 $z=0$ 积分到任意位置 $z$。给定入口条件 $x(0)=0$：\n$$\nx(z) = \\frac{4}{G D_h h_{fg}} \\int_0^z q''(z') dz'\n$$\n问题规定，如果干度超过 $1$（干涸），则应将其截断为 $1$。因此，物理上可实现的蒸汽干度 $x(z)$ 为：\n$$\nx(z) = \\min\\left(1, \\frac{4}{G D_h h_{fg}} \\int_0^z q''(z') dz'\\right)\n$$\n此表达式将用于确定通道上任意点 $z$ 的干度，包括出口干度 $x_{out} = x(L)$。\n\n### 步骤 2：计算加速压降 $\\Delta P_a$\n\n加速压降 $\\Delta P_a$ 是由于流体动量因通道密度变化而产生的。对于HEM下的恒定面积通道，其表达式为：\n$$\n\\Delta P_a = G^2 \\left( \\frac{1}{\\rho_m(L)} - \\frac{1}{\\rho_m(0)} \\right)\n$$\n其中 $\\rho_m(z)$ 是位置 $z$ 处的HEM混合物密度。混合物比容是各相比容（$v_l = 1/\\rho_l$，$v_g=1/\\rho_g$）的质量分数加权平均值：\n$$\n\\frac{1}{\\rho_m(x)} = \\frac{1-x}{\\rho_l} + \\frac{x}{\\rho_g}\n$$\n在入口处，$z=0$，干度为 $x(0)=0$。混合物密度纯粹是液体密度：\n$$\n\\frac{1}{\\rho_m(0)} = \\frac{1}{\\rho_l}\n$$\n在出口处，$z=L$，干度为 $x_{out}=x(L)$。将这些代入 $\\Delta P_a$ 的公式中，简化可得：\n$$\n\\Delta P_a = G^2 x_{out} \\left( \\frac{1}{\\rho_g} - \\frac{1}{\\rho_l} \\right)\n$$\n\n### 步骤 3：计算摩擦压降 $\\Delta P_f$\n\n摩擦压降 $\\Delta P_f$ 是局部摩擦压力梯度 $\\frac{dP_f}{dz}$ 在通道长度 $L$ 上的积分：\n$$\n\\Delta P_f = \\int_0^L \\frac{2 f_F G^2}{D_h \\rho_m(x(z))} dz\n$$\n此被积函数的求值依赖于局部蒸汽干度 $x(z)$。对于任意给定的 $z$，执行以下计算序列：\n1.  **蒸汽干度 $x(z)$**：使用步骤1中推导的公式计算。\n2.  **混合物黏度 $\\mu_m(z)$**：使用线性质量分数混合模型计算：$\\mu_m(x(z)) = x(z)\\mu_g + (1-x(z))\\mu_l$。\n3.  **混合物雷诺数 $\\mathrm{Re}_m(z)$**：使用混合物黏度计算：$\\mathrm{Re}_m(z) = \\frac{G D_h}{\\mu_m(x(z))}$。\n4.  **范宁摩擦因子 $f_F(z)$**：由基于局部雷诺数的分段关系式确定：\n    $$\n    f_F = \\begin{cases} 16 / \\mathrm{Re}_m  & \\text{if } \\mathrm{Re}_m \\le 2300 \\\\ 0.0791 \\mathrm{Re}_m^{-0.25} & \\text{if } \\mathrm{Re}_m > 2300 \\end{cases}\n    $$\n5.  **混合物密度 $\\rho_m(z)$**：使用HEM定义计算：$\\rho_m(x(z)) = \\left(\\frac{x(z)}{\\rho_g} + \\frac{1-x(z)}{\\rho_l}\\right)^{-1}$。\n\n由于被积函数是一个关于 $z$ 的复杂的非线性函数，$\\Delta P_f$ 的积分必须进行数值计算。该实现将使用数值积分算法来执行此积分。\n\n每个测试案例的计算流程如下：\n- 首先，为特定案例定义积分热通量 $\\int_0^z q''(z') dz'$ 的解析函数。\n- 其次，创建一个实现该积分和在 $x=1$ 处截断的 $x(z)$ 函数。\n- 第三，计算 $x_{out} = x(L)$，然后计算 $\\Delta P_a$。\n- 第四，定义包含上述逻辑的被积函数 $\\frac{dP_f}{dz}$，并将其从 $z=0$ 到 $z=L$ 进行数值积分以求得 $\\Delta P_f$。\n- 最后，将结果 $[x_{out}, \\Delta P_a, \\Delta P_f]$ 编译并四舍五入。",
            "answer": "```python\nimport numpy as np\nfrom scipy.integrate import quad\n\ndef solve():\n    \"\"\"\n    Solves the two-phase flow pressure drop problem for four specified cases.\n    \"\"\"\n    \n    # Constant saturated fluid properties\n    PROPS = {\n        'rho_l': 700.0,      # kg/m^3\n        'rho_g': 35.0,       # kg/m^3\n        'mu_l': 1.0e-4,      # Pa.s\n        'mu_g': 1.2e-5,      # Pa.s\n        'h_fg': 1.2e6,       # J/kg\n    }\n    \n    # Test case parameters\n    test_cases = [\n        {\n            'case_id': 1, 'L': 3.0, 'Dh': 0.012, 'G': 900.0,\n            'q_type': 'constant', 'q_params': [2.5e5]\n        },\n        {\n            'case_id': 2, 'L': 4.0, 'Dh': 0.010, 'G': 600.0,\n            'q_type': 'constant', 'q_params': [6.0e5]\n        },\n        {\n            'case_id': 3, 'L': 2.0, 'Dh': 0.015, 'G': 1000.0,\n            'q_type': 'constant', 'q_params': [0.0]\n        },\n        {\n            'case_id': 4, 'L': 3.5, 'Dh': 0.011, 'G': 1100.0,\n            'q_type': 'sinusoidal', 'q_params': [3.0e5, 0.2]\n        },\n    ]\n\n    results = []\n    for params in test_cases:\n        result = compute_case_pressure_drop(params, PROPS)\n        results.append(result)\n    \n    # Format the final output string as a list of lists.\n    print(f\"[{','.join(map(str, results))}]\")\n\ndef compute_case_pressure_drop(params, props):\n    \"\"\"\n    Computes [x_out, Delta_Pa, Delta_Pf] for a single case.\n    \"\"\"\n    L, Dh, G = params['L'], params['Dh'], params['G']\n    q_type, q_params = params['q_type'], params['q_params']\n    \n    rho_l, rho_g = props['rho_l'], props['rho_g']\n    mu_l, mu_g = props['mu_l'], props['mu_g']\n    h_fg = props['h_fg']\n\n    # 1. Define function for integrated heat flux\n    if q_type == 'constant':\n        q0 = q_params[0]\n        def integrated_q_pp(z):\n            return q0 * z\n    elif q_type == 'sinusoidal':\n        q0, A = q_params\n        def integrated_q_pp(z):\n            return q0 * (z + A * L / np.pi * (1.0 - np.cos(np.pi * z / L)))\n\n    # 2. Define quality function x(z) with clipping, using the corrected energy balance\n    def quality(z):\n        if z = 0:\n            return 0.0\n        if G == 0 or h_fg == 0 or Dh == 0:\n            return 0.0\n        # Corrected energy balance: dx/dz = 4*q''/(G*Dh*h_fg)\n        x_unclipped = 4.0 * integrated_q_pp(z) / (G * Dh * h_fg)\n        return min(1.0, x_unclipped)\n\n    # 3. Calculate outlet quality\n    x_out = quality(L)\n\n    # 4. Calculate acceleration pressure drop\n    delta_Pa = G**2 * x_out * (1.0 / rho_g - 1.0 / rho_l)\n\n    # 5. Define helper functions for frictional pressure drop calculation\n    def rho_m(x):\n        return (x / rho_g + (1.0 - x) / rho_l)**-1.0\n    \n    def mu_m(x):\n        return x * mu_g + (1.0 - x) * mu_l\n\n    def fanning_friction_factor(Re_m):\n        if Re_m = 2300:\n            return 16.0 / Re_m if Re_m > 0 else np.inf\n        else:\n            return 0.0791 * Re_m**-0.25\n\n    # 6. Define the integrand for frictional pressure drop\n    def dpf_dz_integrand(z):\n        x_z = quality(z)\n        if x_z  0: x_z = 0\n\n        mu_m_z = mu_m(x_z)\n        Re_m_z = G * Dh / mu_m_z if mu_m_z > 0 else np.inf\n        \n        f_F_z = fanning_friction_factor(Re_m_z)\n        rho_m_z = rho_m(x_z)\n        \n        return (2.0 * f_F_z * G**2) / (Dh * rho_m_z)\n\n    # 7. Numerically integrate to find frictional pressure drop\n    delta_Pf, _ = quad(dpf_dz_integrand, 0, L, epsabs=1e-9, epsrel=1e-9)\n\n    return [round(x_out, 6), round(delta_Pa, 6), round(delta_Pf, 6)]\n\nsolve()\n```"
        }
    ]
}
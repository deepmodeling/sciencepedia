{
    "hands_on_practices": [
        {
            "introduction": "在设计异步电路时，一个最基本的设计决策是如何编码数据。是选择不依赖时序假设、稳健性强的延迟不敏感编码（如双轨编码），还是选择利用时序匹配来节省面积和功耗的捆绑数据方案？这项练习将通过一个具体的32位数据通路场景，量化这两种主流编码方式在编码效率、布线开销和动态能耗方面的核心权衡，帮助您深入理解这些设计选择的实际影响。",
            "id": "4035926",
            "problem": "考虑一个异步、自定时数字系统中的神经形态流水线级，该级在受神经元启发的处理单元之间传递 32 位的膜电位值。数据路径有两种可用的编码方式：双轨$1$-of-$2$延迟不敏感数据编码和捆绑数据单轨编码。两个通道都使用四相归零握手协议。在双轨通道中，有效数据的存在作为隐式请求，并且只存在一条应答线；在捆绑数据通道中，请求和应答线都存在。假设所有导线具有均匀的导线间距和相同的寄生特性。有效载荷由每笔事务 32 个独立同分布的比特组成，每个比特在各事务间是均匀随机且独立的。以下假设成立：\n\n- 双轨 $1$-of-$2$ 编码每比特使用 $2$ 根导轨，间隔符由 `00` 表示，有效数据符号逻辑 $1$ 用 `10` 表示，逻辑 $0$ 用 `01` 表示。每个比特在每笔事务中从间隔符转换到有效值再回到间隔符一次，在其两根导轨中的一根上，每比特每笔事务恰好引发两次导轨转换。双轨通道有一条单独的应答线，每笔事务高低电平切换一次。\n- 捆绑数据通道每比特使用 $1$ 根导线，其电平根据传入的数据字而改变；数据上没有显式的归零操作。捆绑数据通道有一条请求线和一条应答线，两者在每笔事务中都高低电平切换一次。\n- 对于互补金属氧化物半导体（CMOS）动态开关能耗，单根导线的每次转换产生能量 $E_{\\text{sw}} = C_{\\text{w}} V^{2}$，其中 $C_{\\text{w}}$ 是有效导线电容，$V$ 是电源电压。忽略短路和漏电分量。假设所有导线具有相同的 $C_{\\text{w}}$ 和相同的 $V$。\n- 在独立均匀随机数据模型下，对于捆绑数据，每个数据比特在连续的数据字之间有 $1/2$ 的概率发生翻转，因此每笔事务的期望数据导线转换次数为 $32 \\cdot \\frac{1}{2}$。\n\n定义以下性能指标：\n\n- 双轨相对于捆绑数据的编码效率比，$\\eta_{\\text{DR}}/\\eta_{\\text{BD}}$，其中编码效率是有效载荷比特数与用于编码有效载荷的数据导线数之比。\n- 导线开销因子，$\\rho_{\\text{wires}}$，定义为双轨所需的总导线数与捆绑数据所需的总导线数（包括握手线）之比。\n- 每笔事务的能量比，$\\gamma_{E}$，定义为双轨的总期望动态开关能耗与捆绑数据的总期望动态开关能耗之比。\n\n仅使用上述假设和异步通道编码与CMOS动态能耗的标准原理，计算此 32 位数据路径的 $\\eta_{\\text{DR}}/\\eta_{\\text{BD}}$、$\\rho_{\\text{wires}}$ 和 $\\gamma_{E}$。请将您的最终答案以行向量 $\\left[ \\eta_{\\text{DR}}/\\eta_{\\text{BD}} \\;\\; \\rho_{\\text{wires}} \\;\\; \\gamma_{E} \\right]$ 的形式表示，使用精确的解析形式，不进行四舍五入，也不带单位。",
            "solution": "问题陈述已经过验证，是自洽的、有科学依据且定义明确的。解决方案通过基于给定的定义和假设计算三个要求的性能指标来展开。设有效载荷比特数为 $N = 32$。\n\n### 1. 计算编码效率比, $\\eta_{\\text{DR}}/\\eta_{\\text{BD}}$\n\n编码效率 $\\eta$ 定义为有效载荷比特数除以用于编码有效载荷的数据导线数。\n\n对于双轨 ($1$-of-$2$) 通道， $N$ 比特有效载荷的每个比特使用 $2$ 根导线进行编码。\n双轨通道的数据导线数为：\n$$W_{\\text{data, DR}} = 2N$$\n因此，双轨通道的编码效率为：\n$$\\eta_{\\text{DR}} = \\frac{\\text{有效载荷比特数}}{W_{\\text{data, DR}}} = \\frac{N}{2N} = \\frac{1}{2}$$\n\n对于捆绑数据 (单轨) 通道， $N$ 比特有效载荷的每个比特使用 $1$ 根导线进行编码。\n捆绑数据通道的数据导线数为：\n$$W_{\\text{data, BD}} = N$$\n捆绑数据通道的编码效率为：\n$$\\eta_{\\text{BD}} = \\frac{\\text{有效载荷比特数}}{W_{\\text{data, BD}}} = \\frac{N}{N} = 1$$\n\n编码效率之比为：\n$$\\frac{\\eta_{\\text{DR}}}{\\eta_{\\text{BD}}} = \\frac{1/2}{1} = \\frac{1}{2}$$\n\n### 2. 计算导线开销因子, $\\rho_{\\text{wires}}$\n\n导线开销因子 $\\rho_{\\text{wires}}$ 定义为双轨通道的总导线数与捆绑数据通道的总导线数（包括握手线）之比。\n\n对于双轨通道，有 $2N$ 根数据导线，以及如题所述的 $1$ 根应答线。\n对于 $N=32$，双轨通道的总导线数为：\n$$W_{\\text{total, DR}} = W_{\\text{data, DR}} + W_{\\text{control, DR}} = 2N + 1 = 2(32) + 1 = 64 + 1 = 65$$\n\n对于捆绑数据通道，有 $N$ 根数据导线，以及如题所述的 $1$ 根请求线和 $1$ 根应答线，共 $2$ 根控制线。\n对于 $N=32$，捆绑数据通道的总导线数为：\n$$W_{\\text{total, BD}} = W_{\\text{data, BD}} + W_{\\text{control, BD}} = N + 2 = 32 + 2 = 34$$\n\n导线开销因子是这两个量的比值：\n$$\\rho_{\\text{wires}} = \\frac{W_{\\text{total, DR}}}{W_{\\text{total, BD}}} = \\frac{65}{34}$$\n该分数为最简形式，因为 $65 = 5 \\times 13$ 且 $34 = 2 \\times 17$。\n\n### 3. 计算每笔事务的能量比, $\\gamma_{E}$\n\n能量比 $\\gamma_{E}$ 定义为双轨的总期望动态开关能耗与捆绑数据的总期望动态开关能耗之比。动态开关能耗由每次导线转换的 $E_{\\text{sw}} = C_{\\text{w}} V^{2}$ 给出。由于所有导线的 $C_{\\text{w}}$ 和 $V$ 都相同，总能耗与总导线转换次数成正比。因此，能量之比等于期望总转换次数之比。\n$$\\gamma_{E} = \\frac{E[E_{\\text{total, DR}}]}{E[E_{\\text{total, BD}}]} = \\frac{E[T_{\\text{total, DR}}] \\cdot E_{\\text{sw}}}{E[T_{\\text{total, BD}}] \\cdot E_{\\text{sw}}} = \\frac{E[T_{\\text{total, DR}}]}{E[T_{\\text{total, BD}}]}$$\n我们必须计算每个通道每笔事务的期望转换次数。\n\n对于双轨通道，系统使用归零方案。对于 $N$ 个比特中的每一个，一笔事务涉及数据有效性从间隔符 ($00$) 转换到有效值 (可以是 $10$ 或 $01$)，再返回到间隔符。对于任何比特，这都涉及其两根专用导轨中的一根从低电平转换到高电平，然后再回到低电平。这构成了每个比特恰好 $2$ 次转换。由于这个过程对所有 $N$ 个比特都发生，数据导线转换次数是确定性的且与数据无关。\n$$T_{\\text{data, DR}} = 2 \\times N = 2 \\times 32 = 64$$\n单根应答线“每笔事务高低电平切换一次”，这构成了 $2$ 次转换。\n$$T_{\\text{control, DR}} = 2$$\n双轨通道的总转换次数是：\n$$E[T_{\\text{total, DR}}] = T_{\\text{data, DR}} + T_{\\text{control, DR}} = 64 + 2 = 66$$\n\n对于捆绑数据通道，数据导线的期望转换次数已明确给出。对于 $N=32$ 比特的独立均匀随机数据，连续事务之间翻转的期望比特数是 $N/2$。每个翻转的比特贡献 $1$ 次转换。\n$$E[T_{\\text{data, BD}}] = N \\cdot \\frac{1}{2} = 32 \\cdot \\frac{1}{2} = 16$$\n捆绑数据通道有一条请求线和一条应答线。两者都作为四相握手协议的一部分“每笔事务高低电平切换一次”。这意味着每条控制线经历 $2$ 次转换。\n$$T_{\\text{control, BD}} = 2_{\\text{req}} + 2_{\\text{ack}} = 4$$\n捆绑数据通道的期望总转换次数是：\n$$E[T_{\\text{total, BD}}] = E[T_{\\text{data, BD}}] + T_{\\text{control, BD}} = 16 + 4 = 20$$\n\n能量比是这些期望总转换次数的比值：\n$$\\gamma_{E} = \\frac{E[T_{\\text{total, DR}}]}{E[T_{\\text{total, BD}}]} = \\frac{66}{20} = \\frac{33}{10}$$\n\n### 结果总结\n\n三个性能指标是：\n- 编码效率比, $\\eta_{\\text{DR}}/\\eta_{\\text{BD}} = \\frac{1}{2}$\n- 导线开销因子, $\\rho_{\\text{wires}} = \\frac{65}{34}$\n- 每笔事务的能量比, $\\gamma_{E} = \\frac{33}{10}$\n\n最终答案按要求以行向量形式呈现。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{1}{2}  & \\frac{65}{34}  & \\frac{33}{10}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "单个异步单元的设计完成后，我们必须理解它在持续数据流下的宏观系统性能。排队论为分析这类事件驱动系统提供了强大的数学工具。本练习将一个自定时处理阶段抽象为一个服务台，通过分析其在随机事件到达下的行为，来预测如缓冲区占用率和系统吞吐量等关键性能指标，这对于评估系统瓶颈和资源需求至关重要。",
            "id": "4035935",
            "problem": "一个神经形态事件驱动的流水线级实现了一个自定时的 $4$ 相握手协议，其前端是一个无限容量的先进先出（FIFO）缓冲区。上游的脉冲活动生成握手请求事件，这些事件以速率为 $\\lambda$（事件/秒）的平稳泊松过程到达 FIFO，这反映了一个大规模、弱相关的神经元集群。该流水线级提供的服务（当 FIFO 非空时，完成一次完整的请求-应答握手并从 FIFO 中移除一个项目）具有独立的、呈指数分布的完成时间，其均值为 $1/\\mu$ 秒，这模拟了在独立抖动下异步前向和后向延迟的可变性。假设系统处于稳态，到达和服务是独立的且无记忆的，并且稳定性条件 $\\lambda  \\mu$ 成立。\n\n仅使用适用于自定时系统和具有无记忆原语的排队论（例如，生灭平衡、平稳性、利特尔定律）的第一性原理，推导稳态下的期望 FIFO 占用（FIFO 中的期望项目数，无量纲）和长期吞吐量（通过该级的离开率，单位为“次/秒”）。最终吞吐量以 $\\mathrm{s}^{-1}$ 表示，占用表示为无量纲的期望计数。以 $\\lambda$ 和 $\\mu$ 的闭式解析表达式提供最终答案。不需要进行数值评估，也不需要四舍五入。最终报告的答案必须是按“占用，吞吐量”顺序排列的数对。",
            "solution": "问题要求推导一个被建模为单服务器队列的系统的稳态期望 FIFO 占用和长期吞吐量。所提供的信息精确地定义了一个 M/M/1 排队系统：到达遵循马尔可夫（泊松）过程，服务时间是马尔可夫的（呈指数分布），并且只有一个服务器（该流水线级）。FIFO 缓冲区被描述为具有无限容量。系统被声明处于稳态，这与所提供的稳定性条件 $\\lambda  \\mu$ 一致，其中 $\\lambda$ 是到达率，$\\mu$ 是服务率。服务率 $\\mu$ 是平均服务时间 $1/\\mu$ 的倒数。我们将从第一性原理推导所求的量。\n\n首先，我们推导期望 FIFO 占用，记为 $L$。我们将 FIFO 中的项目数 $N$ 建模为生灭过程中的一个状态。设 $p_n$ 是系统处于状态 $n$ 的稳态概率，即 FIFO 中有 $n$ 个项目，其中 $n \\in \\{0, 1, 2, \\dots\\}$。\n\n到达来自速率为 $\\lambda$ 的泊松过程，因此出生率（从状态 $n$ 转移到 $n+1$）对所有 $n \\ge 0$ 都是恒定的：\n$$ \\lambda_n = \\lambda $$\n服务时间呈均值为 $1/\\mu$ 的指数分布，因此服务率为 $\\mu$。只有当 FIFO 非空（$n \\ge 1$）时才能提供服务。因此，死亡率（从状态 $n$ 转移到 $n-1$）是状态依赖的：\n$$ \\mu_n = \\begin{cases} \\mu  \\text{ if } n \\ge 1 \\\\ 0  \\text{ if } n = 0 \\end{cases} $$\n在稳态下，细致平衡原则规定离开一个状态的速率等于进入该状态的速率。对于状态 $n-1$ 和 $n$ 之间的边界，这意味着从 $n-1$ 转移到 $n$ 的速率等于从 $n$ 转移到 $n-1$ 的速率：\n$$ p_{n-1} \\lambda_{n-1} = p_n \\mu_n $$\n对于 $n \\ge 1$，我们有 $\\lambda_{n-1}=\\lambda$ 和 $\\mu_n=\\mu$，所以：\n$$ p_{n-1} \\lambda = p_n \\mu \\implies p_n = \\left(\\frac{\\lambda}{\\mu}\\right) p_{n-1} $$\n我们定义流量强度 $\\rho = \\frac{\\lambda}{\\mu}$。稳定性条件 $\\lambda  \\mu$ 确保了 $\\rho  1$。该关系变为 $p_n = \\rho p_{n-1}$。通过递归，我们可以用 $p_0$ 来表示任何 $p_n$：\n$$ p_n = \\rho p_{n-1} = \\rho^2 p_{n-2} = \\dots = \\rho^n p_0 $$\n为了求得 $p_0$，我们使用归一化公理，即所有概率之和必须为 1：\n$$ \\sum_{n=0}^{\\infty} p_n = 1 $$\n代入我们关于 $p_n$ 的表达式：\n$$ \\sum_{n=0}^{\\infty} \\rho^n p_0 = p_0 \\sum_{n=0}^{\\infty} \\rho^n = 1 $$\n该求和是一个几何级数，因为 $\\rho  1$ 所以它收敛：\n$$ \\sum_{n=0}^{\\infty} \\rho^n = \\frac{1}{1-\\rho} $$\n因此，$p_0 \\left(\\frac{1}{1-\\rho}\\right) = 1$，这得到 $p_0 = 1-\\rho$。\nFIFO 中项目数的稳态概率分布为 $p_n = (1-\\rho)\\rho^n$，其中 $n=0, 1, 2, \\ldots$。\n\n期望 FIFO 占用 $L$ 是该概率分布的期望值：\n$$ L = E[N] = \\sum_{n=0}^{\\infty} n p_n = \\sum_{n=0}^{\\infty} n (1-\\rho)\\rho^n = (1-\\rho) \\sum_{n=0}^{\\infty} n \\rho^n $$\n该级数可以使用与几何级数相关的一个已知恒等式来求值，即对于 $|x|1$，有 $\\sum_{n=0}^{\\infty} n x^n = \\frac{x}{(1-x)^2}$。\n$$ L = (1-\\rho) \\left( \\frac{\\rho}{(1-\\rho)^2} \\right) = \\frac{\\rho}{1-\\rho} $$\n代入 $\\rho = \\lambda/\\mu$ 得到以问题参数表示的表达式：\n$$ L = \\frac{\\frac{\\lambda}{\\mu}}{1 - \\frac{\\lambda}{\\mu}} = \\frac{\\frac{\\lambda}{\\mu}}{\\frac{\\mu - \\lambda}{\\mu}} = \\frac{\\lambda}{\\mu - \\lambda} $$\n这是一个无量纲的量，代表期望的项目数。问题的措辞“完成一次完整的……握手并从 FIFO 中移除一个项目”意味着正在被服务的项目仍被视为在 FIFO 系统内，因此 $L$ 正确地表示了总的期望占用。\n\n其次，我们推导长期吞吐量，记为 $X$。吞吐量是项目离开系统的平均速率。对于任何处于稳态的稳定系统，一个基本原则是流量守恒：长期平均到达率必须等于长期平均离开率。\n到达过程是速率为 $\\lambda$ 的平稳泊松过程。因此，平均到达率就是 $\\lambda$。\n为了使系统稳定，吞吐量必须与该速率相匹配：\n$$ X = \\lambda $$\n$\\lambda$ 的单位是“事件/秒”，所以吞吐量的单位是 $\\mathrm{s}^{-1}$，符合要求。\n\n另一种关于吞吐量的第一性原理推导考虑了服务器的活动。吞吐量是服务率 $\\mu$ 与服务器繁忙时间分数的乘积。如果系统中有至少一个项目，即 $N > 0$，则服务器是繁忙的。这个事件的概率是 $P(N>0) = 1 - P(N=0) = 1 - p_0$。\n由于 $p_0 = 1-\\rho$，服务器利用率（繁忙的概率）是 $1 - (1-\\rho) = \\rho$。\n所以，吞吐量是：\n$$ X = \\mu \\times P(N>0) = \\mu \\times \\rho = \\mu \\left(\\frac{\\lambda}{\\mu}\\right) = \\lambda $$\n两种方法都证实了吞吐量是 $\\lambda$。\n\n最终答案要求以（占用，吞吐量）对的形式给出。\n期望 FIFO 占用：$\\frac{\\lambda}{\\mu - \\lambda}$。\n长期吞吐量：$\\lambda$。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} \\frac{\\lambda}{\\mu - \\lambda}   \\lambda \\end{pmatrix} } $$"
        },
        {
            "introduction": "在现实世界中，纯粹的异步系统很少独立存在，它们通常需要与同步电路协同工作。异步到同步的接口是电路设计的关键难点，其核心挑战在于处理不可避免的亚稳态问题。这项练习将引导您解决这个关键问题：如何设计一个可靠的同步器，并定量分析其失效概率，从而确保整个混合时序系统的稳定性和可靠性。",
            "id": "4035896",
            "problem": "一个神经形态系统使用地址事件表示 (AER) 结构将来自异步传感前端的稀疏脉冲传送到同步片上网络路由器。每条 AER 请求线都使用由路由器时钟驱动的一系列相同的触发器链进行重新同步。路由器时钟频率为 $f_c = 1.2 \\times 10^{9}\\ \\mathrm{Hz}$，给定请求线上的最坏情况异步转换率为 $f_d = 3.0 \\times 10^{8}\\ \\mathrm{Hz}$。在工作条件下测得的触发器亚稳态参数为：指数解析时间常数 $\\tau = 25 \\times 10^{-12}\\ \\mathrm{s}$ 和偏移量 $T_0 = 10 \\times 10^{-12}\\ \\mathrm{s}$。每个采样边沿周围的孔径（易受攻击）窗口为 $T_w = 50 \\times 10^{-12}\\ \\mathrm{s}$。每个触发器的时钟到Q延迟为 $t_{cq} = 80 \\times 10^{-12}\\ \\mathrm{s}$，每跳的级间布线延迟为 $t_r = 30 \\times 10^{-12}\\ \\mathrm{s}$，最终级的建立时间为 $t_{su} = 30 \\times 10^{-12}\\ \\mathrm{s}$。\n\n假设以下物理上合理的基本事实：\n- 相对于采样时钟边沿的异步转换到达可以建模为速率为 $f_d$ 的泊松过程，因此对于一个小窗口 $T_w$，该窗口内至少发生一次转换的概率约为 $f_d T_w$，并且每秒此类重合的期望次数为 $f_c f_d T_w$。\n- 在激发了亚稳态偏移的条件下，解析时间 $T_{\\mathrm{res}}$ 超过某个值 $t$ 的概率由 $\\Pr\\{T_{\\mathrm{res}} > t\\} = \\exp\\!\\big(-(t - T_0)/\\tau\\big)$ 给出（对于 $t > T_0$），这反映了双稳态线性区经过充分验证的指数尾部特性。\n- 如果第一级触发器的亚稳态持续时间超过了在链中最后一级的采样裕度之前的可用解析时间，则发生故障。\n\n系统中有 $S = 2.0 \\times 10^{5}$ 个这样的独立同步器链。系统级平均无故障时间 (MTBF) 要求为 $30$ 年，其中 $1\\ \\mathrm{年} = 365.25 \\times 24 \\times 3600\\ \\mathrm{s}$。\n\n任务：\n1. 从上述事实出发，推导一个 N 级同步器链的每秒期望故障率表达式\n$$\\lambda(N),$$\n该表达式应使用 $f_c$、$f_d$、$T_w$、$\\tau$、$T_0$、$t_{cq}$、$t_r$、$t_{su}$ 以及时钟周期 $T_{\\mathrm{clk}} = 1/f_c$ 来表示。请仔细定义表达式中使用的可用解析时间 $T_{\\mathrm{avail}}(N)$。\n2. 使用给定参数，数值计算 $\\lambda(2)$。\n3. 使用您的表达式，确定为使系统级 MTBF 至少为 $30$ 年所需的最小整数级数 $N$。最终答案仅报告 $N$ 的值。由于最终答案是整数，因此无需进行舍入。",
            "solution": "问题陈述已经过验证，被确定为具有科学依据、适定且内部一致。它代表了数字电路设计中一个关于同步器可靠性的标准工程问题。我们可以进行正式求解。\n\n该问题要求完成三项任务：首先，推导 N 级同步器的故障率表达式；其次，计算 2 级同步器的该速率；第三，找出满足系统级可靠性要求所需的最小级数 $N$。\n\n### 任务 1：故障率 $\\lambda(N)$ 的推导\n\n同步器链中的故障是以下两步过程的结果：\n1.  触发器进入亚稳态。当数据输入在有效时钟边沿周围的一个小定时窗口，即孔径窗口 $T_w$ 内发生转换时，会发生这种情况。\n2.  触发器的输出未能在可用时间内解析到稳定的逻辑电平（$0$ 或 $1$），即在信号路径中的下一级对其进行采样之前。\n\n问题给出了在第一个触发器处亚稳态事件被触发的速率。这是异步数据转换和采样时钟边沿之间重合的速率。\n设 $R_{\\text{event}}$ 为每秒亚稳态事件的速率。问题将其指定为：\n$$R_{\\text{event}} = f_c f_d T_w$$\n其中 $f_c$ 是采样时钟频率，$f_d$ 是异步数据转换率，$T_w$ 是孔径窗口。\n\n问题还给出了条件概率，即在发生亚稳态事件的情况下，解析时间 $T_{\\mathrm{res}}$ 将超过某个可用时间 $t$。该概率由下式给出：\n$$\\Pr\\{T_{\\text{res}} > t\\} = \\exp\\left(-\\frac{t - T_0}{\\tau}\\right) \\quad \\text{for } t > T_0$$\n其中 $\\tau$ 是解析时间常数，$T_0$ 是偏移参数。\n\n如果解析时间超过总可用时间 $T_{\\mathrm{avail}}(N)$，则 N 级同步器发生故障。单个 N 级同步器链的故障率 $\\lambda(N)$ 是事件发生率与每个事件的故障概率的乘积。\n$$\\lambda(N) = R_{\\text{event}} \\times \\Pr\\{T_{\\text{res}} > T_{\\mathrm{avail}}(N)\\} = f_c f_d T_w \\exp\\left(-\\frac{T_{\\mathrm{avail}}(N) - T_0}{\\tau}\\right)$$\n\n关键步骤是定义和推导可用解析时间 $T_{\\mathrm{avail}}(N)$。一个 N 级同步器由 N 个串联的触发器组成，由同一时钟驱动，周期为 $T_{\\mathrm{clk}} = 1/f_c$。初始异步信号由第一个触发器 ($FF_1$) 采样。其输出 $Q_1$ 由第二个触发器 ($FF_2$) 采样，依此类推。\n\n一个触发器（比如 $FF_i$）的输出在被下一个触发器 $FF_{i+1}$ 采样之前可用于稳定的时间，是一个时钟周期减去从 $Q_i$ 到 $D_{i+1}$ 的信号传播延迟以及 $FF_{i+1}$ 的建立时间要求。\n从一个触发器的输出 $Q$ 到下一个触发器的输入 $D$ 的传播路径延迟是时钟到Q延迟 ($t_{cq}$) 和级间布线延迟 ($t_r$) 的总和。设建立时间为 $t_{su}$。\n在单个时钟周期内的可用稳定时间为：\n$$t_{\\text{settle}} = T_{\\mathrm{clk}} - (t_{cq} + t_r + t_{su})$$\n对于一个 2 级同步器 ($N=2$)，在 $FF_1$ 和 $FF_2$ 之间有一个这样的时间间隔。因此，$T_{\\mathrm{avail}}(2) = t_{\\text{settle}}$。\n对于一个 N 级同步器，根据标准模型，$FF_1$ 处的初始扰动有 $(N-1)$ 个连续的时钟周期来解析，然后其影响才会传播到最终级 $FF_N$ 之后的逻辑。总可用解析时间是 $(N-1)$ 个级中每个级可用稳定时间的总和。\n$$T_{\\mathrm{avail}}(N) = (N-1) \\times t_{\\text{settle}} = (N-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su})$$\n问题陈述中提到“如果第一级触发器的亚稳态持续时间超过了在链中最后一级的采样裕度之前的可用解析时间，则发生故障”。我们对 $T_{\\mathrm{avail}}(N)$ 的推导是这一原则的标准形式化。\n\n将 $T_{\\mathrm{avail}}(N)$ 的这个表达式代入 $\\lambda(N)$ 的公式，我们得到 N 级链故障率的最终表达式：\n$$\\lambda(N) = f_c f_d T_w \\exp\\left(-\\frac{(N-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su}) - T_0}{\\tau}\\right)$$\n\n### 任务 2：$\\lambda(2)$ 的计算\n\n给定以下参数值：\n$f_c = 1.2 \\times 10^{9}\\ \\mathrm{Hz}$\n$f_d = 3.0 \\times 10^{8}\\ \\mathrm{Hz}$\n$T_w = 50 \\times 10^{-12}\\ \\mathrm{s}$\n$\\tau = 25 \\times 10^{-12}\\ \\mathrm{s}$\n$T_0 = 10 \\times 10^{-12}\\ \\mathrm{s}$\n$t_{cq} = 80 \\times 10^{-12}\\ \\mathrm{s}$\n$t_r = 30 \\times 10^{-12}\\ \\mathrm{s}$\n$t_{su} = 30 \\times 10^{-12}\\ \\mathrm{s}$\n\n首先，我们计算时钟周期 $T_{\\mathrm{clk}}$：\n$$T_{\\mathrm{clk}} = \\frac{1}{f_c} = \\frac{1}{1.2 \\times 10^{9}\\ \\mathrm{s}^{-1}} = \\frac{10}{12} \\times 10^{-9}\\ \\mathrm{s} = \\frac{5}{6} \\times 10^{-9}\\ \\mathrm{s} = \\frac{2500}{3} \\times 10^{-12}\\ \\mathrm{s}$$\n接下来，我们计算指前因子，即亚稳态事件的速率：\n$$R_{\\text{event}} = f_c f_d T_w = (1.2 \\times 10^{9}) \\times (3.0 \\times 10^{8}) \\times (50 \\times 10^{-12}) = 1.8 \\times 10^{7}\\ \\mathrm{s}^{-1}$$\n对于 $N=2$，可用解析时间为：\n$$T_{\\mathrm{avail}}(2) = (2-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su}) = T_{\\mathrm{clk}} - (t_{cq} + t_r + t_{su})$$\n$$T_{\\mathrm{avail}}(2) = \\left(\\frac{2500}{3} - (80 + 30 + 30)\\right) \\times 10^{-12}\\ \\mathrm{s} = \\left(\\frac{2500}{3} - 140\\right) \\times 10^{-12}\\ \\mathrm{s} = \\left(\\frac{2500 - 420}{3}\\right) \\times 10^{-12}\\ \\mathrm{s} = \\frac{2080}{3} \\times 10^{-12}\\ \\mathrm{s}$$\n现在我们计算指数函数的参数：\n$$-\\frac{T_{\\mathrm{avail}}(2) - T_0}{\\tau} = -\\frac{\\frac{2080}{3} \\times 10^{-12} - 10 \\times 10^{-12}}{25 \\times 10^{-12}} = -\\frac{\\frac{2080}{3} - \\frac{30}{3}}{25} = -\\frac{2050}{3 \\times 25} = -\\frac{82}{3}$$\n最后，我们可以计算 $\\lambda(2)$：\n$$\\lambda(2) = (1.8 \\times 10^7) \\exp\\left(-\\frac{82}{3}\\right) \\approx (1.8 \\times 10^7) \\times (9.998 \\times 10^{-13}) \\approx 1.7996 \\times 10^{-5}\\ \\mathrm{s}^{-1}$$\n\n### 任务 3：最小级数 $N$ 的确定\n\n系统有 $S = 2.0 \\times 10^{5}$ 个独立的同步器链。系统总故障率 $\\lambda_{\\text{sys}}(N)$ 是各个故障率的总和：\n$$\\lambda_{\\text{sys}}(N) = S \\times \\lambda(N)$$\n要求系统级平均无故障时间 (MTBF) 至少为 $30$ 年。首先，将此 MTBF 转换为最大允许系统故障率 $\\lambda_{\\text{sys,req}}$。\n$$1\\ \\mathrm{year} = 365.25 \\times 24 \\times 3600\\ \\mathrm{s} = 31,557,600\\ \\mathrm{s}$$\n$$\\text{MTBF}_{\\text{req}} = 30 \\times 31,557,600\\ \\mathrm{s} = 946,728,000\\ \\mathrm{s}$$\n$$\\lambda_{\\text{sys,req}} = \\frac{1}{\\text{MTBF}_{\\text{req}}} = \\frac{1}{946,728,000}\\ \\mathrm{s}^{-1}$$\n单个链所需的故障率 $\\lambda_{\\text{req}}$ 必须满足 $\\lambda_{\\text{req}} \\le \\lambda_{\\text{sys,req}} / S$。\n$$\\lambda_{\\text{req}} = \\frac{1}{946,728,000 \\times 2.0 \\times 10^{5}} = \\frac{1}{1.893456 \\times 10^{14}}\\ \\mathrm{s}^{-1}$$\n我们必须找到最小整数 $N$，使得 $\\lambda(N) \\le \\lambda_{\\text{req}}$。\n$$f_c f_d T_w \\exp\\left(-\\frac{(N-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su}) - T_0}{\\tau}\\right) \\le \\lambda_{\\text{req}}$$\n设 $R_0 = f_c f_d T_w = 1.8 \\times 10^7$ 且 $t_{\\text{settle}} = T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su} = \\frac{2080}{3} \\times 10^{-12}\\ \\mathrm{s}$。\n$$R_0 \\exp\\left(-\\frac{(N-1)t_{\\text{settle}} - T_0}{\\tau}\\right) \\le \\lambda_{\\text{req}}$$\n为了求解 $N$，我们重新整理不等式：\n$$\\exp\\left(-\\frac{(N-1)t_{\\text{settle}} - T_0}{\\tau}\\right) \\le \\frac{\\lambda_{\\text{req}}}{R_0}$$\n对两边取自然对数：\n$$-\\frac{(N-1)t_{\\text{settle}} - T_0}{\\tau} \\le \\ln\\left(\\frac{\\lambda_{\\text{req}}}{R_0}\\right)$$\n两边乘以 $-\\tau$（一个正值）会反转不等式：\n$$(N-1)t_{\\text{settle}} - T_0 \\ge -\\tau \\ln\\left(\\frac{\\lambda_{\\text{req}}}{R_0}\\right) = \\tau \\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right)$$\n$$(N-1)t_{\\text{settle}} \\ge T_0 + \\tau \\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right)$$\n$$N-1 \\ge \\frac{T_0 + \\tau \\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right)}{t_{\\text{settle}}}$$\n现在，我们代入数值：\n$$\\frac{R_0}{\\lambda_{\\text{req}}} = (1.8 \\times 10^7) \\times (1.893456 \\times 10^{14}) = 3.4082208 \\times 10^{21}$$\n$$\\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right) = \\ln(3.4082208 \\times 10^{21}) \\approx 49.5802$$\n$$N-1 \\ge \\frac{(10 \\times 10^{-12}) + (25 \\times 10^{-12}) \\times 49.5802}{\\frac{2080}{3} \\times 10^{-12}}$$\n$$N-1 \\ge \\frac{10 + 1239.505}{\\frac{2080}{3}} = \\frac{1249.505 \\times 3}{2080} = \\frac{3748.515}{2080} \\approx 1.80217$$\n$$N \\ge 1 + 1.80217 = 2.80217$$\n由于级数 $N$ 必须是整数，因此所需的最小级数是大于或等于 $2.80217$ 的最小整数。\n$$N_{\\min} = 3$$\n用 $N=2$ 进行核算，其 MTBF 仅为秒级，而 $N=3$ 将提供一个远低于要求的故障率，这证实了我们的结果。",
            "answer": "$$\\boxed{3}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "A foundational decision in asynchronous circuit design is how to represent data. The choice between a timing-dependent scheme like bundled-data and a delay-insensitive encoding like dual-rail has far-reaching consequences for a system's robustness, area, and power consumption. This practice challenges you to perform a quantitative trade-off analysis, comparing these two common styles on key metrics such as coding efficiency, wire overhead, and the expected energy per transaction . Mastering this type of analysis is crucial for making informed architectural decisions in energy-efficient neuromorphic hardware.",
            "id": "4035926",
            "problem": "Consider a neuromorphic pipeline stage in an asynchronous, self-timed digital system that communicates 32-bit membrane potential values between neuron-inspired processing elements. Two encoding styles are available for the datapath: dual-rail $1$-of-$2$ delay-insensitive data encoding and bundled-data single-rail encoding. Both channels use a four-phase return-to-zero handshake. In the dual-rail channel, the presence of valid data serves as an implicit request, and only an acknowledge line is present; in the bundled-data channel, both request and acknowledge lines are present. Assume a uniform wire pitch and identical parasitic properties for all wires. The payload consists of $32$ independent and identically distributed bits per transaction, each uniformly random and independent across transactions. The following assumptions hold:\n\n- The dual-rail $1$-of-$2$ code uses $2$ rails per bit, with a spacer symbol given by $00$, and a valid data symbol represented by $10$ for logic $1$ or $01$ for logic $0$. Each bit transitions from spacer to valid and back to spacer once per transaction, eliciting exactly two rail transitions per bit per transaction on one of its two rails. The dual-rail channel has a single acknowledge line that toggles high then low once per transaction.\n- The bundled-data channel uses $1$ wire per bit and changes its level according to the incoming data word; there is no explicit return-to-zero on data. The bundled-data channel has one request and one acknowledge line, both toggling high then low once per transaction.\n- For Complementary Metal–Oxide–Semiconductor (CMOS) dynamic switching energy, each transition of a single wire incurs energy $E_{\\text{sw}} = C_{\\text{w}} V^{2}$, where $C_{\\text{w}}$ is the effective wire capacitance and $V$ is the supply voltage. Ignore short-circuit and leakage components. Assume all wires have the same $C_{\\text{w}}$ and the same $V$.\n- Under the independent uniformly random data model, for bundled-data, each data bit has probability $1/2$ of toggling between successive data words, so the expected number of data-wire transitions per transaction is $32 \\cdot \\frac{1}{2}$.\n\nDefine the following performance measures:\n\n- Coding efficiency ratio of dual-rail relative to bundled-data, $\\eta_{\\text{DR}}/\\eta_{\\text{BD}}$, where coding efficiency is the payload bits per data wire used to encode the payload.\n- Wire overhead factor, $\\rho_{\\text{wires}}$, defined as the ratio of total wires required for dual-rail to the total wires required for bundled-data, including handshake wires.\n- Energy ratio per transaction, $\\gamma_{E}$, defined as the ratio of the total expected dynamic switching energy for dual-rail to that of bundled-data.\n\nUsing only the assumptions stated above and standard principles of asynchronous channel encoding and CMOS dynamic energy, compute $\\eta_{\\text{DR}}/\\eta_{\\text{BD}}$, $\\rho_{\\text{wires}}$, and $\\gamma_{E}$ for the $32$-bit datapath. Provide your final answer as a row vector $\\left[ \\eta_{\\text{DR}}/\\eta_{\\text{BD}} \\;\\; \\rho_{\\text{wires}} \\;\\; \\gamma_{E} \\right]$ in exact analytical form with no rounding and no units.",
            "solution": "The problem statement has been validated and found to be self-contained, scientifically grounded, and well-posed. The solution proceeds by calculating the three requested performance metrics based on the provided definitions and assumptions. Let the number of payload bits be $N = 32$.\n\n### 1. Calculation of the Coding Efficiency Ratio, $\\eta_{\\text{DR}}/\\eta_{\\text{BD}}$\n\nCoding efficiency, $\\eta$, is defined as the number of payload bits divided by the number of data wires used to encode the payload.\n\nFor the dual-rail ($1$-of-$2$) channel, each bit of the $N$-bit payload is encoded using $2$ wires.\nThe number of data wires for the dual-rail channel is:\n$$W_{\\text{data, DR}} = 2N$$\nThe coding efficiency for the dual-rail channel is therefore:\n$$\\eta_{\\text{DR}} = \\frac{\\text{Payload bits}}{W_{\\text{data, DR}}} = \\frac{N}{2N} = \\frac{1}{2}$$\n\nFor the bundled-data (single-rail) channel, each bit of the $N$-bit payload is encoded using $1$ wire.\nThe number of data wires for the bundled-data channel is:\n$$W_{\\text{data, BD}} = N$$\nThe coding efficiency for the bundled-data channel is:\n$$\\eta_{\\text{BD}} = \\frac{\\text{Payload bits}}{W_{\\text{data, BD}}} = \\frac{N}{N} = 1$$\n\nThe ratio of the coding efficiencies is:\n$$\\frac{\\eta_{\\text{DR}}}{\\eta_{\\text{BD}}} = \\frac{1/2}{1} = \\frac{1}{2}$$\n\n### 2. Calculation of the Wire Overhead Factor, $\\rho_{\\text{wires}}$\n\nThe wire overhead factor, $\\rho_{\\text{wires}}$, is defined as the ratio of the total number of wires for the dual-rail channel to the total number of wires for the bundled-data channel, including handshake wires.\n\nFor the dual-rail channel, there are $2N$ data wires and, as stated, $1$ acknowledge line.\nThe total number of wires for the dual-rail channel, for $N=32$, is:\n$$W_{\\text{total, DR}} = W_{\\text{data, DR}} + W_{\\text{control, DR}} = 2N + 1 = 2(32) + 1 = 64 + 1 = 65$$\n\nFor the bundled-data channel, there are $N$ data wires and, as stated, $1$ request line and $1$ acknowledge line, for a total of $2$ control lines.\nThe total number of wires for the bundled-data channel, for $N=32$, is:\n$$W_{\\text{total, BD}} = W_{\\text{data, BD}} + W_{\\text{control, BD}} = N + 2 = 32 + 2 = 34$$\n\nThe wire overhead factor is the ratio of these two quantities:\n$$\\rho_{\\text{wires}} = \\frac{W_{\\text{total, DR}}}{W_{\\text{total, BD}}} = \\frac{65}{34}$$\nThis fraction is in its simplest form since $65 = 5 \\times 13$ and $34 = 2 \\times 17$.\n\n### 3. Calculation of the Energy Ratio per Transaction, $\\gamma_{E}$\n\nThe energy ratio, $\\gamma_{E}$, is defined as the ratio of the total expected dynamic switching energy for dual-rail to that of bundled-data. The dynamic switching energy is given as $E_{\\text{sw}} = C_{\\text{w}} V^{2}$ per wire transition. Since $C_{\\text{w}}$ and $V$ are identical for all wires, the total energy is directly proportional to the total number of wire transitions. The ratio of energies is therefore equal to the ratio of the expected total number of transitions.\n$$\\gamma_{E} = \\frac{E[E_{\\text{total, DR}}]}{E[E_{\\text{total, BD}}]} = \\frac{E[T_{\\text{total, DR}}] \\cdot E_{\\text{sw}}}{E[T_{\\text{total, BD}}] \\cdot E_{\\text{sw}}} = \\frac{E[T_{\\text{total, DR}}]}{E[T_{\\text{total, BD}}]}$$\nWe must calculate the expected number of transitions per transaction for each channel.\n\nFor the dual-rail channel, the system uses a return-to-zero scheme. For each of the $N$ bits, a transaction involves the data validity transitioning from spacer ($00$) to valid (either $10$ or $01$) and back to spacer. For any bit, this involves one of its two dedicated rails transitioning from low to high and then back to low. This constitutes exactly $2$ transitions per bit. As this process occurs for all $N$ bits, the number of data wire transitions is deterministic and data-independent.\n$$T_{\\text{data, DR}} = 2 \\times N = 2 \\times 32 = 64$$\nThe single acknowledge line \"toggles high then low once per transaction\", which constitutes $2$ transitions.\n$$T_{\\text{control, DR}} = 2$$\nThe total number of transitions for the dual-rail channel is the sum:\n$$E[T_{\\text{total, DR}}] = T_{\\text{data, DR}} + T_{\\text{control, DR}} = 64 + 2 = 66$$\n\nFor the bundled-data channel, the expected number of data-wire transitions is explicitly given. For $N=32$ bits of independent, uniformly random data, the expected number of bits that toggle between successive transactions is $N/2$. Each toggling bit contributes $1$ transition.\n$$E[T_{\\text{data, BD}}] = N \\cdot \\frac{1}{2} = 32 \\cdot \\frac{1}{2} = 16$$\nThe bundled-data channel has a request line and an acknowledge line. Both \"toggling high then low once per transaction\" as part of the four-phase handshake. This means each control line undergoes $2$ transitions.\n$$T_{\\text{control, BD}} = 2_{\\text{req}} + 2_{\\text{ack}} = 4$$\nThe total expected number of transitions for the bundled-data channel is the sum:\n$$E[T_{\\text{total, BD}}] = E[T_{\\text{data, BD}}] + T_{\\text{control, BD}} = 16 + 4 = 20$$\n\nThe energy ratio is the ratio of these total expected transitions:\n$$\\gamma_{E} = \\frac{E[T_{\\text{total, DR}}]}{E[T_{\\text{total, BD}}]} = \\frac{66}{20} = \\frac{33}{10}$$\n\n### Summary of Results\n\nThe three performance measures are:\n- Coding efficiency ratio, $\\eta_{\\text{DR}}/\\eta_{\\text{BD}} = \\frac{1}{2}$\n- Wire overhead factor, $\\rho_{\\text{wires}} = \\frac{65}{34}$\n- Energy ratio per transaction, $\\gamma_{E} = \\frac{33}{10}$\n\nThe final answer is presented as a row vector as requested.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{1}{2} & \\frac{65}{34} & \\frac{33}{10}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Asynchronous circuits excel in event-driven systems like neuromorphic processors, where activity is sparse and stochastic. To understand their performance, we must move beyond static analysis and model their dynamic behavior under realistic workloads. This exercise applies concepts from queueing theory to model a self-timed pipeline stage, treating it as a server handling a stream of incoming events . By deriving the expected buffer occupancy and throughput, you will gain insight into how fundamental parameters like arrival rate ($\\lambda$) and service rate ($\\mu$) govern system-level stability and performance.",
            "id": "4035935",
            "problem": "A neuromorphic event-driven pipeline stage implements a self-timed 4-phase handshake and is fronted by an infinite-capacity first-in first-out (FIFO) buffer. Upstream spiking activity generates handshake request events that arrive to the FIFO as a stationary Poisson process of rate $\\lambda$ (events per second), reflecting a large, weakly correlated ensemble of neurons. The service provided by the stage (completion of a full request–acknowledge handshake and removal of one item from the FIFO, when nonempty) has independent, exponentially distributed completion times with mean $1/\\mu$ seconds, modeling variability in asynchronous forward and backward latency under independent jitter. Assume the system is in steady state, that arrivals and services are independent and memoryless, and that the stability condition $\\lambda < \\mu$ holds.\n\nUsing only first principles appropriate to self-timed systems and queueing with memoryless primitives (e.g., birth–death balance, stationarity, and Little’s law), derive the steady-state expected FIFO occupancy (the expected number of items in the FIFO, dimensionless) and the long-run throughput (departures per second through the stage). Express the final throughput in $\\mathrm{s}^{-1}$ and the occupancy as a dimensionless expected count. Provide your final answer as closed-form analytic expressions in terms of $\\lambda$ and $\\mu$. No numerical evaluation is required, and no rounding is needed. The final reported answer must be the pair “occupancy, throughput” in that order.",
            "solution": "The problem asks for the derivation of the steady-state expected FIFO occupancy and the long-run throughput of a system modeled as a single-server queue. The provided information precisely defines an M/M/1 queueing system: the arrivals follow a Markovian (Poisson) process, the service times are Markovian (exponentially distributed), and there is one server (the pipeline stage). The FIFO buffer is described as having infinite capacity. The system is stated to be in steady state, which is consistent with the provided stability condition $\\lambda < \\mu$, where $\\lambda$ is the arrival rate and $\\mu$ is the service rate. The service rate $\\mu$ is the reciprocal of the mean service time, $1/\\mu$. We will derive the requested quantities from first principles.\n\nFirst, we derive the expected FIFO occupancy, which we denote as $L$. We model the number of items in the FIFO, $N$, as a state in a birth-death process. Let $p_n$ be the steady-state probability that the system is in state $n$, meaning there are $n$ items in the FIFO, for $n \\in \\{0, 1, 2, \\dots\\}$.\n\nThe arrivals are from a Poisson process with rate $\\lambda$, so the birth rate (transition from state $n$ to $n+1$) is constant for all $n \\ge 0$:\n$$ \\lambda_n = \\lambda $$\nThe service times are exponentially distributed with mean $1/\\mu$, so the service rate is $\\mu$. Service can only occur if the FIFO is non-empty ($n \\ge 1$). Thus, the death rate (transition from state $n$ to $n-1$) is state-dependent:\n$$ \\mu_n = \\begin{cases} \\mu & \\text{if } n \\ge 1 \\\\ 0 & \\text{if } n = 0 \\end{cases} $$\nIn steady state, the principle of detailed balance dictates that the rate of leaving a state equals the rate of entering it. For the boundary between state $n-1$ and $n$, this means the rate of transitions from $n-1$ to $n$ equals the rate of transitions from $n$ to $n-1$:\n$$ p_{n-1} \\lambda_{n-1} = p_n \\mu_n $$\nFor $n \\ge 1$, we have $\\lambda_{n-1}=\\lambda$ and $\\mu_n=\\mu$, so:\n$$ p_{n-1} \\lambda = p_n \\mu \\implies p_n = \\left(\\frac{\\lambda}{\\mu}\\right) p_{n-1} $$\nLet us define the traffic intensity, $\\rho = \\frac{\\lambda}{\\mu}$. The stability condition $\\lambda < \\mu$ ensures $\\rho < 1$. The relationship becomes $p_n = \\rho p_{n-1}$. By recursion, we can express any $p_n$ in terms of $p_0$:\n$$ p_n = \\rho p_{n-1} = \\rho^2 p_{n-2} = \\dots = \\rho^n p_0 $$\nTo find $p_0$, we use the normalization axiom that the sum of all probabilities must be unity:\n$$ \\sum_{n=0}^{\\infty} p_n = 1 $$\nSubstituting our expression for $p_n$:\n$$ \\sum_{n=0}^{\\infty} \\rho^n p_0 = p_0 \\sum_{n=0}^{\\infty} \\rho^n = 1 $$\nThe summation is a geometric series which converges because $\\rho < 1$:\n$$ \\sum_{n=0}^{\\infty} \\rho^n = \\frac{1}{1-\\rho} $$\nTherefore, $p_0 \\left(\\frac{1}{1-\\rho}\\right) = 1$, which gives $p_0 = 1-\\rho$.\nThe steady-state probability distribution for the number of items in the FIFO is $p_n = (1-\\rho)\\rho^n$ for $n=0, 1, 2, \\ldots$.\n\nThe expected FIFO occupancy, $L$, is the expected value of this probability distribution:\n$$ L = E[N] = \\sum_{n=0}^{\\infty} n p_n = \\sum_{n=0}^{\\infty} n (1-\\rho)\\rho^n = (1-\\rho) \\sum_{n=0}^{\\infty} n \\rho^n $$\nThe series can be evaluated using a known identity related to geometric series, $\\sum_{n=0}^{\\infty} n x^n = \\frac{x}{(1-x)^2}$ for $|x|<1$.\n$$ L = (1-\\rho) \\left( \\frac{\\rho}{(1-\\rho)^2} \\right) = \\frac{\\rho}{1-\\rho} $$\nSubstituting $\\rho = \\lambda/\\mu$ gives the expression in terms of the problem parameters:\n$$ L = \\frac{\\frac{\\lambda}{\\mu}}{1 - \\frac{\\lambda}{\\mu}} = \\frac{\\frac{\\lambda}{\\mu}}{\\frac{\\mu - \\lambda}{\\mu}} = \\frac{\\lambda}{\\mu - \\lambda} $$\nThis is a dimensionless quantity representing the expected number of items. The problem phrasing \"completion of a full...handshake and removal of one item from the FIFO\" implies an item being serviced is still within the FIFO system, so $L$ correctly represents the total expected occupancy.\n\nSecond, we derive the long-run throughput, which we denote as $X$. Throughput is the average rate at which items depart the system. A fundamental principle for any stable system in steady state is the conservation of flow: the long-run average arrival rate must equal the long-run average departure rate.\nThe arrival process is a stationary Poisson process with rate $\\lambda$. Thus, the average arrival rate is simply $\\lambda$.\nFor the system to be stable, the throughput must match this rate:\n$$ X = \\lambda $$\nThe units of $\\lambda$ are events per second, so the throughput is in $\\mathrm{s}^{-1}$ as required.\n\nAn alternative first-principles derivation for throughput considers the server's activity. The throughput is the product of the service rate $\\mu$ and the fraction of time the server is busy. The server is busy if there is at least one item in the system, i.e., $N > 0$. The probability of this is $P(N>0) = 1 - P(N=0) = 1 - p_0$.\nSince $p_0 = 1-\\rho$, the server utilization (probability of being busy) is $1 - (1-\\rho) = \\rho$.\nSo, the throughput is:\n$$ X = \\mu \\times P(N>0) = \\mu \\times \\rho = \\mu \\left(\\frac{\\lambda}{\\mu}\\right) = \\lambda $$\nBoth methods confirm the throughput is $\\lambda$.\n\nThe final answer requires the pair (occupancy, throughput).\nExpected FIFO occupancy: $\\frac{\\lambda}{\\mu - \\lambda}$.\nLong-run throughput: $\\lambda$.",
            "answer": "$$ \\boxed{ \\begin{pmatrix} \\frac{\\lambda}{\\mu - \\lambda} & \\lambda \\end{pmatrix} } $$"
        },
        {
            "introduction": "Few large-scale digital systems are purely asynchronous; most require robust interfaces to synchronous components. This boundary is a notorious source of system failure due to the physical phenomenon of metastability. This practice delves into the critical task of designing a reliable synchronizer, a circuit that safely passes signals across clock domains . You will derive the failure rate of a multi-stage synchronizer from first principles and determine the necessary design parameters to achieve a demanding system-level Mean Time Between Failures (MTBF), a vital skill for building dependable mixed-timing systems.",
            "id": "4035896",
            "problem": "A neuromorphic system uses an Address-Event Representation (AER) fabric to communicate sparse spikes from asynchronous sensory front-ends to a synchronous network-on-chip router. Each AER request line is resynchronized using a chain of identical flip-flops clocked by the router clock. The router clock frequency is $f_c = 1.2 \\times 10^{9}\\ \\mathrm{Hz}$, and the worst-case asynchronous transition rate on a given request line is $f_d = 3.0 \\times 10^{8}\\ \\mathrm{Hz}$. The flip-flop metastability parameters, measured under operating conditions, are an exponential resolution time constant $\\tau = 25 \\times 10^{-12}\\ \\mathrm{s}$ and an offset $T_0 = 10 \\times 10^{-12}\\ \\mathrm{s}$. The aperture (vulnerability) window around each sampling edge is $T_w = 50 \\times 10^{-12}\\ \\mathrm{s}$. Each flip-flop has a clock-to-$Q$ delay $t_{cq} = 80 \\times 10^{-12}\\ \\mathrm{s}$, the interstage routing delay per hop is $t_r = 30 \\times 10^{-12}\\ \\mathrm{s}$, and the setup time at the final stage is $t_{su} = 30 \\times 10^{-12}\\ \\mathrm{s}$.\n\nAssume the following physically justified base facts:\n- Asynchronous transition arrivals relative to the sampling clock edges can be modeled as a Poisson process of rate $f_d$, so that for a small window $T_w$ the probability that at least one transition occurs in that window is approximately $f_d T_w$, and the expected number of such coincidences per second is $f_c f_d T_w$.\n- Conditional on a metastable excursion being excited, the probability that the resolution time $T_{\\mathrm{res}}$ exceeds a value $t$ is given by $\\Pr\\{T_{\\mathrm{res}} > t\\} = \\exp\\!\\big(-(t - T_0)/\\tau\\big)$ for $t > T_0$, reflecting the well-validated exponential tail of the bistable’s linear region.\n- A failure occurs if the metastable state of the first-stage flip-flop persists longer than the available resolution time before the sampling margin of the last stage in the chain.\n\nThere are $S = 2.0 \\times 10^{5}$ such independent synchronizer chains in the system. A system-level Mean Time Between Failures (MTBF) requirement of $30$ years is imposed, using $1\\ \\mathrm{year} = 365.25 \\times 24 \\times 3600\\ \\mathrm{s}$.\n\nTasks:\n1. Starting from the facts above, derive an expression for the expected failure rate per second of an $N$-stage synchronizer chain,\n$$\\lambda(N),$$\nin terms of $f_c$, $f_d$, $T_w$, $\\tau$, $T_0$, $t_{cq}$, $t_r$, $t_{su}$, and the clock period $T_{\\mathrm{clk}} = 1/f_c$. Carefully define the available resolution time $T_{\\mathrm{avail}}(N)$ that enters your expression.\n2. Evaluate $\\lambda(2)$ numerically using the parameters given.\n3. Using your expression, determine the minimum integer number of stages $N$ required so that the system-level MTBF is at least $30$ years. Report only the value of $N$ as your final answer. No rounding instruction is necessary for the final answer because it is an integer.",
            "solution": "The problem statement has been validated and is determined to be scientifically grounded, well-posed, and internally consistent. It represents a standard engineering problem in digital circuit design concerning the reliability of synchronizers. We may proceed with a formal solution.\n\nThe problem asks for three tasks: first, to derive an expression for the failure rate of an $N$-stage synchronizer; second, to evaluate this rate for a $2$-stage synchronizer; and third, to find the minimum number of stages $N$ to meet a system-level reliability requirement.\n\n### Task 1: Derivation of the Failure Rate $\\lambda(N)$\n\nA failure in a synchronizer chain occurs as a result of a two-step process:\n1.  A flip-flop enters a metastable state. This happens when the data input transitions within a small timing window, the aperture window $T_w$, around the active clock edge.\n2.  The flip-flop's output does not resolve to a stable logic level ($0$ or $1$) within the time available for it to do so before the next stage in the signal path samples it.\n\nThe problem provides the rate at which metastable events are initiated at the first flip-flop. This is the rate of coincidences between asynchronous data transitions and the sampling clock edges.\nLet $R_{\\text{event}}$ be the rate of metastable events per second. The problem specifies this as:\n$$R_{\\text{event}} = f_c f_d T_w$$\nwhere $f_c$ is the sampling clock frequency, $f_d$ is the asynchronous data transition rate, and $T_w$ is the aperture window.\n\nThe problem also provides the conditional probability that, given a metastable event has occurred, the resolution time $T_{\\text{res}}$ will exceed some available time $t$. This probability is given by:\n$$\\Pr\\{T_{\\text{res}} > t\\} = \\exp\\left(-\\frac{t - T_0}{\\tau}\\right) \\quad \\text{for } t > T_0$$\nwhere $\\tau$ is the resolution time constant and $T_0$ is an offset parameter.\n\nA failure of the $N$-stage synchronizer occurs if the resolution time exceeds the total available time, $T_{\\mathrm{avail}}(N)$. The failure rate of a single N-stage synchronizer chain, $\\lambda(N)$, is the product of the event rate and the probability of failure per event.\n$$\\lambda(N) = R_{\\text{event}} \\times \\Pr\\{T_{\\text{res}} > T_{\\mathrm{avail}}(N)\\} = f_c f_d T_w \\exp\\left(-\\frac{T_{\\mathrm{avail}}(N) - T_0}{\\tau}\\right)$$\n\nThe crucial step is to define and derive the available resolution time, $T_{\\mathrm{avail}}(N)$. An $N$-stage synchronizer consists of $N$ flip-flops in series, clocked by the same clock of period $T_{\\mathrm{clk}} = 1/f_c$. The initial asynchronous signal is sampled by the first flip-flop ($FF_1$). Its output, $Q_1$, is sampled by the second flip-flop ($FF_2$), and so on.\n\nThe time available for the output of one flip-flop, say $FF_i$, to settle before being sampled by the next, $FF_{i+1}$, is one clock period minus the signal propagation delay from $Q_i$ to $D_{i+1}$ and the setup time requirement of $FF_{i+1}$.\nThe propagation path delay from the output $Q$ of one flip-flop to the input $D$ of the next is the sum of the clock-to-Q delay ($t_{cq}$) and the interstage routing delay ($t_r$). Let the setup time be $t_{su}$.\nThe available settling time in a single clock cycle is:\n$$t_{\\text{settle}} = T_{\\mathrm{clk}} - (t_{cq} + t_r + t_{su})$$\nFor a $2$-stage synchronizer ($N=2$), there is one such interval between $FF_1$ and $FF_2$. Thus, $T_{\\mathrm{avail}}(2) = t_{\\text{settle}}$.\nFor an $N$-stage synchronizer, according to the standard model, the initial disturbance at $FF_1$ has $(N-1)$ successive clock periods to resolve before its effect propagates to the logic following the final stage, $FF_N$. The total available resolution time is the sum of the settling times available in each of the $(N-1)$ stages.\n$$T_{\\mathrm{avail}}(N) = (N-1) \\times t_{\\text{settle}} = (N-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su})$$\nThe problem states that \"A failure occurs if the metastable state of the first-stage flip-flop persists longer than the available resolution time before the sampling margin of the last stage in the chain\". Our derivation of $T_{\\mathrm{avail}}(N)$ is the standard formalization of this principle.\n\nSubstituting this expression for $T_{\\mathrm{avail}}(N)$ into the formula for $\\lambda(N)$, we obtain the final expression for the failure rate of an $N$-stage chain:\n$$\\lambda(N) = f_c f_d T_w \\exp\\left(-\\frac{(N-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su}) - T_0}{\\tau}\\right)$$\n\n### Task 2: Evaluation of $\\lambda(2)$\n\nWe are given the following parameter values:\n$f_c = 1.2 \\times 10^{9}\\ \\mathrm{Hz}$\n$f_d = 3.0 \\times 10^{8}\\ \\mathrm{Hz}$\n$T_w = 50 \\times 10^{-12}\\ \\mathrm{s}$\n$\\tau = 25 \\times 10^{-12}\\ \\mathrm{s}$\n$T_0 = 10 \\times 10^{-12}\\ \\mathrm{s}$\n$t_{cq} = 80 \\times 10^{-12}\\ \\mathrm{s}$\n$t_r = 30 \\times 10^{-12}\\ \\mathrm{s}$\n$t_{su} = 30 \\times 10^{-12}\\ \\mathrm{s}$\n\nFirst, we calculate the clock period $T_{\\mathrm{clk}}$:\n$$T_{\\mathrm{clk}} = \\frac{1}{f_c} = \\frac{1}{1.2 \\times 10^{9}\\ \\mathrm{s}^{-1}} = \\frac{10}{12} \\times 10^{-9}\\ \\mathrm{s} = \\frac{5}{6} \\times 10^{-9}\\ \\mathrm{s} = \\frac{2500}{3} \\times 10^{-12}\\ \\mathrm{s}$$\nNext, we calculate the pre-exponential factor, which is the rate of metastable events:\n$$R_{\\text{event}} = f_c f_d T_w = (1.2 \\times 10^{9}) \\times (3.0 \\times 10^{8}) \\times (50 \\times 10^{-12}) = 1.8 \\times 10^{7}\\ \\mathrm{s}^{-1}$$\nFor $N=2$, the available resolution time is:\n$$T_{\\mathrm{avail}}(2) = (2-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su}) = T_{\\mathrm{clk}} - (t_{cq} + t_r + t_{su})$$\n$$T_{\\mathrm{avail}}(2) = \\left(\\frac{2500}{3} - (80 + 30 + 30)\\right) \\times 10^{-12}\\ \\mathrm{s} = \\left(\\frac{2500}{3} - 140\\right) \\times 10^{-12}\\ \\mathrm{s} = \\left(\\frac{2500 - 420}{3}\\right) \\times 10^{-12}\\ \\mathrm{s} = \\frac{2080}{3} \\times 10^{-12}\\ \\mathrm{s}$$\nNow we compute the argument of the exponential function:\n$$-\\frac{T_{\\mathrm{avail}}(2) - T_0}{\\tau} = -\\frac{\\frac{2080}{3} \\times 10^{-12} - 10 \\times 10^{-12}}{25 \\times 10^{-12}} = -\\frac{\\frac{2080}{3} - \\frac{30}{3}}{25} = -\\frac{2050}{3 \\times 25} = -\\frac{82}{3}$$\nFinally, we can compute $\\lambda(2)$:\n$$\\lambda(2) = (1.8 \\times 10^7) \\exp\\left(-\\frac{82}{3}\\right) \\approx (1.8 \\times 10^7) \\times (9.998 \\times 10^{-13}) \\approx 1.7996 \\times 10^{-5}\\ \\mathrm{s}^{-1}$$\n\n### Task 3: Determination of Minimum Number of Stages $N$\n\nThe system has $S = 2.0 \\times 10^{5}$ independent synchronizer chains. The total system failure rate, $\\lambda_{\\text{sys}}(N)$, is the sum of the individual failure rates:\n$$\\lambda_{\\text{sys}}(N) = S \\times \\lambda(N)$$\nThe requirement is for a system-level Mean Time Between Failures (MTBF) of at least $30$ years. First, convert this MTBF to a maximum allowable system failure rate, $\\lambda_{\\text{sys,req}}$.\n$$1\\ \\mathrm{year} = 365.25 \\times 24 \\times 3600\\ \\mathrm{s} = 31,557,600\\ \\mathrm{s}$$\n$$\\text{MTBF}_{\\text{req}} = 30 \\times 31,557,600\\ \\mathrm{s} = 946,728,000\\ \\mathrm{s}$$\n$$\\lambda_{\\text{sys,req}} = \\frac{1}{\\text{MTBF}_{\\text{req}}} = \\frac{1}{946,728,000}\\ \\mathrm{s}^{-1}$$\nThe required failure rate for a single chain, $\\lambda_{\\text{req}}$, must satisfy $\\lambda_{\\text{req}} \\le \\lambda_{\\text{sys,req}} / S$.\n$$\\lambda_{\\text{req}} = \\frac{1}{946,728,000 \\times 2.0 \\times 10^{5}} = \\frac{1}{1.893456 \\times 10^{14}}\\ \\mathrm{s}^{-1}$$\nWe must find the minimum integer $N$ such that $\\lambda(N) \\le \\lambda_{\\text{req}}$.\n$$f_c f_d T_w \\exp\\left(-\\frac{(N-1)(T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su}) - T_0}{\\tau}\\right) \\le \\lambda_{\\text{req}}$$\nLet $R_0 = f_c f_d T_w = 1.8 \\times 10^7$ and $t_{\\text{settle}} = T_{\\mathrm{clk}} - t_{cq} - t_r - t_{su} = \\frac{2080}{3} \\times 10^{-12}\\ \\mathrm{s}$.\n$$R_0 \\exp\\left(-\\frac{(N-1)t_{\\text{settle}} - T_0}{\\tau}\\right) \\le \\lambda_{\\text{req}}$$\nTo solve for $N$, we rearrange the inequality:\n$$\\exp\\left(-\\frac{(N-1)t_{\\text{settle}} - T_0}{\\tau}\\right) \\le \\frac{\\lambda_{\\text{req}}}{R_0}$$\nTaking the natural logarithm of both sides:\n$$-\\frac{(N-1)t_{\\text{settle}} - T_0}{\\tau} \\le \\ln\\left(\\frac{\\lambda_{\\text{req}}}{R_0}\\right)$$\nMultiplying by $-\\tau$ (a positive value) reverses the inequality:\n$$(N-1)t_{\\text{settle}} - T_0 \\ge -\\tau \\ln\\left(\\frac{\\lambda_{\\text{req}}}{R_0}\\right) = \\tau \\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right)$$\n$$(N-1)t_{\\text{settle}} \\ge T_0 + \\tau \\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right)$$\n$$N-1 \\ge \\frac{T_0 + \\tau \\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right)}{t_{\\text{settle}}}$$\nNow, we substitute the numerical values:\n$$\\frac{R_0}{\\lambda_{\\text{req}}} = (1.8 \\times 10^7) \\times (1.893456 \\times 10^{14}) = 3.4082208 \\times 10^{21}$$\n$$\\ln\\left(\\frac{R_0}{\\lambda_{\\text{req}}}\\right) = \\ln(3.4082208 \\times 10^{21}) \\approx 49.5802$$\n$$N-1 \\ge \\frac{(10 \\times 10^{-12}) + (25 \\times 10^{-12}) \\times 49.5802}{\\frac{2080}{3} \\times 10^{-12}}$$\n$$N-1 \\ge \\frac{10 + 1239.505}{\\frac{2080}{3}} = \\frac{1249.505 \\times 3}{2080} = \\frac{3748.515}{2080} \\approx 1.80217$$\n$$N \\ge 1 + 1.80217 = 2.80217$$\nSince the number of stages $N$ must be an integer, the minimum number of stages required is the smallest integer greater than or equal to $2.80217$.\n$$N_{\\min} = 3$$\nA check with $N=2$ gave an MTBF of seconds, while $N=3$ will provide a failure rate well below the requirement, confirming our result.",
            "answer": "$$\\boxed{3}$$"
        }
    ]
}
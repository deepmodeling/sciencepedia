{
    "hands_on_practices": [
        {
            "introduction": "在使用任何神经形态系统时，首要步骤是将所需的神经网络映射到可用的硬件资源上。这项实践的核心是计算托管一个网络层所需的最小计算核心数，这是一个基础性任务，涉及到在不同平台特定的神经元和突触容量限制之间进行权衡。通过这个练习，您将学会如何将抽象的架构约束转化为具体的数学规划，这是高效利用大规模神经形态硬件的关键技能 。",
            "id": "4049234",
            "problem": "考虑一个脉冲神经网络中的单个前馈层，该层必须映射到四个大规模神经形态平台之一：SpiNNaker (Spiking Neural Network Architecture)、Intel Loihi、IBM TrueNorth 和 BrainScaleS。该层包含 $N$ 个突触后神经元，每个神经元的扇入为 $k$，连接来自前一个神经元群体。假设采用以下有科学依据的映射模型：每个突触连接消耗一个单位的突触内存；在任何单个核心内，突触前轴突流可以被该核心上放置的所有神经元共享；该层的突触内存不存在跨核心共享；并且该层中的所有神经元都是同质的，需要相同的扇入 $k$。\n\n每个平台在核心级别上强制执行资源限制：\n- SpiNNaker：单个核心最多可承载 $n_{\\max}^{\\text{Spi}} = 200$ 个神经元和最多 $s_{\\max}^{\\text{Spi}} = 2.0 \\times 10^{5}$ 个突触。\n- Loihi：单个核心最多可承载 $n_{\\max}^{\\text{Loi}} = 1024$ 个神经元和最多 $s_{\\max}^{\\text{Loi}} = 3.0 \\times 10^{5}$ 个突触。\n- TrueNorth：单个核心最多可承载 $n_{\\max}^{\\text{TN}} = 256$ 个神经元，最多 $s_{\\max}^{\\text{TN}} = 256^{2}$ 个突触，以及最多 $a_{\\max}^{\\text{TN}} = 256$ 个不同的突触前轴突流。对于此平台，突触前轴突容量不得超过扇入，即每个核心该层所需的独立输入流数量不能超过 $a_{\\max}^{\\text{TN}}$。\n- BrainScaleS：单个核心最多可承载 $n_{\\max}^{\\text{BSS}} = 512$ 个神经元和最多 $s_{\\max}^{\\text{BSS}} = 1.5 \\times 10^{5}$ 个突触。\n\n假设 $N = 5000$ 且 $k = 180$。在所述模型和限制条件下，请从第一性原理出发，为每个平台推导托管整个层所需的最小核心数，同时考虑神经元容量和突触容量的约束，并对 IBM TrueNorth 的情况验证其突触前轴突约束。请将最终答案表示为 $\\left(\\text{SpiNNaker}, \\text{Loihi}, \\text{TrueNorth}, \\text{BrainScaleS}\\right)$ 顺序的单行矩阵。除了最小资源分配中固有的向上取整和向下取整运算所引出的精确计数外，不需要进行其他舍入。",
            "solution": "目标是找出在四个不同的神经形态平台上，托管一个包含 $N$ 个神经元、每个神经元扇入为 $k$ 的神经层所需的最小核心数 $C$。该层中的神经元总数为 $N = 5000$，扇入为 $k = 180$。该层中的突触连接总数为 $N \\times k = 5000 \\times 180 = 9.0 \\times 10^5$。\n\n为了找到所需的最少核心数，我们必须首先确定在每个平台的单个核心上可以放置来自该层的最大神经元数 $n_{\\text{per\\_core}}$。该数量受限于平台特定的每个核心的神经元数量和突触数量的约束。设 $n$ 为单个核心上的神经元数量。约束条件如下：\n1. 神经元容量：神经元数量 $n$ 不能超过每个核心的最大神经元数 $n_{\\max}$。\n$$n \\le n_{\\max}$$\n2. 突触容量：$n$ 个神经元所需的突触总数为 $n \\times k$，因为每个神经元有 $k$ 个传入突触。这个数量不能超过每个核心的最大突触数 $s_{\\max}$。\n$$n \\times k \\le s_{\\max} \\implies n \\le \\frac{s_{\\max}}{k}$$\n由于 $n$ 必须是整数，突触约束意味着 $n \\le \\lfloor \\frac{s_{\\max}}{k} \\rfloor$。\n\n可以在单个核心上放置的最大神经元数 $n_{\\text{per\\_core}}$ 是同时满足这两个约束的最大整数 $n$。\n$$n_{\\text{per\\_core}} = \\min(n_{\\max}, \\lfloor \\frac{s_{\\max}}{k} \\rfloor)$$\n一旦确定了 $n_{\\text{per\\_core}}$，托管所有 $N$ 个神经元所需的最小核心数 $C$ 就是神经元总数除以每个核心的最大神经元数，然后向上取整。这通过向上取整函数（ceiling function）计算。\n$$C = \\lceil \\frac{N}{n_{\\text{per\\_core}}} \\rceil$$\n现在我们将此框架应用于每个平台，使用给定值 $N=5000$ 和 $k=180$。\n\n1. SpiNNaker:\n核心限制为 $n_{\\max}^{\\text{Spi}} = 200$ 个神经元和 $s_{\\max}^{\\text{Spi}} = 2.0 \\times 10^{5}$ 个突触。\n基于突触容量的最大神经元数为：\n$$n \\le \\lfloor \\frac{s_{\\max}^{\\text{Spi}}}{k} \\rfloor = \\lfloor \\frac{2.0 \\times 10^5}{180} \\rfloor = \\lfloor 1111.11\\dots \\rfloor = 1111$$\n限制因素是神经元容量。因此，每个核心的最大神经元数为：\n$$n_{\\text{per\\_core}}^{\\text{Spi}} = \\min(200, 1111) = 200$$\nSpiNNaker 所需的最小核心数为：\n$$C_{\\text{Spi}} = \\lceil \\frac{N}{n_{\\text{per\\_core}}^{\\text{Spi}}} \\rceil = \\lceil \\frac{5000}{200} \\rceil = \\lceil 25 \\rceil = 25$$\n\n2. Loihi:\n核心限制为 $n_{\\max}^{\\text{Loi}} = 1024$ 个神经元和 $s_{\\max}^{\\text{Loi}} = 3.0 \\times 10^{5}$ 个突触。\n基于突触容量的最大神经元数为：\n$$n \\le \\lfloor \\frac{s_{\\max}^{\\text{Loi}}}{k} \\rfloor = \\lfloor \\frac{3.0 \\times 10^5}{180} \\rfloor = \\lfloor 1666.66\\dots \\rfloor = 1666$$\n限制因素是神经元容量。因此，每个核心的最大神经元数为：\n$$n_{\\text{per\\_core}}^{\\text{Loi}} = \\min(1024, 1666) = 1024$$\nLoihi 所需的最小核心数为：\n$$C_{\\text{Loi}} = \\lceil \\frac{N}{n_{\\text{per\\_core}}^{\\text{Loi}}} \\rceil = \\lceil \\frac{5000}{1024} \\rceil = \\lceil 4.8828\\dots \\rceil = 5$$\n\n3. TrueNorth:\n核心限制为 $n_{\\max}^{\\text{TN}} = 256$ 个神经元， $s_{\\max}^{\\text{TN}} = 256^2 = 65536$ 个突触，以及 $a_{\\max}^{\\text{TN}} = 256$ 个不同的突触前轴突流。\n首先，我们验证轴突约束。问题陈述指出，突触前轴突流在核心上的神经元之间共享。扇入 $k$ 代表所需的独立突触前输入数量。我们必须检查是否 $k \\le a_{\\max}^{\\text{TN}}$。\n$$180 \\le 256$$\n轴突约束得到满足。我们可以继续。\n基于突触容量的最大神经元数为：\n$$n \\le \\lfloor \\frac{s_{\\max}^{\\text{TN}}}{k} \\rfloor = \\lfloor \\frac{65536}{180} \\rfloor = \\lfloor 364.08\\dots \\rfloor = 364$$\n限制因素是神经元容量。因此，每个核心的最大神经元数为：\n$$n_{\\text{per\\_core}}^{\\text{TN}} = \\min(256, 364) = 256$$\nTrueNorth 所需的最小核心数为：\n$$C_{\\text{TN}} = \\lceil \\frac{N}{n_{\\text{per\\_core}}^{\\text{TN}}} \\rceil = \\lceil \\frac{5000}{256} \\rceil = \\lceil 19.53125 \\rceil = 20$$\n\n4. BrainScaleS:\n核心限制为 $n_{\\max}^{\\text{BSS}} = 512$ 个神经元和 $s_{\\max}^{\\text{BSS}} = 1.5 \\times 10^{5}$ 个突触。\n基于突触容量的最大神经元数为：\n$$n \\le \\lfloor \\frac{s_{\\max}^{\\text{BSS}}}{k} \\rfloor = \\lfloor \\frac{1.5 \\times 10^5}{180} \\rfloor = \\lfloor 833.33\\dots \\rfloor = 833$$\n限制因素是神经元容量。因此，每个核心的最大神经元数为：\n$$n_{\\text{per\\_core}}^{\\text{BSS}} = \\min(512, 833) = 512$$\nBrainScaleS 所需的最小核心数为：\n$$C_{\\text{BSS}} = \\lceil \\frac{N}{n_{\\text{per\\_core}}^{\\text{BSS}}} \\rceil = \\lceil \\frac{5000}{512} \\rceil = \\lceil 9.765625 \\rceil = 10$$\n\n各平台所需的最小核心数分别为：SpiNNaker 25个，Loihi 5个，TrueNorth 20个，BrainScaleS 10个。最终答案按指定顺序表示为单行矩阵。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 25  5  20  10 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "在成功映射网络之后，评估其性能的一个关键指标是能效，这也是神经形态计算的主要优势之一。这项实践将指导您如何从功率和脉冲发放率等基本物理量出发，推导出每脉冲平均能耗这一核心效能指标。通过在不同平台上进行计算和比较，您可以直观地理解它们在能效方面的架构差异 。",
            "id": "4049260",
            "problem": "考虑一个脉冲神经网络，其所有神经元的聚合输出脉冲率稳定在 $r=10^{6}\\,\\text{s}^{-1}$。该网络在四个大规模神经形态平台上执行：Spiking Neural Network Architecture (SpiNNaker)、英特尔Loihi神经形态研究芯片 (Loihi)、IBM TrueNorth神经形态专用集成电路 (TrueNorth) 和海德堡BrainScaleS加速混合信号神经形态系统 (BrainScaleS)。对于此工作负载，归因于脉冲处理的动态功耗（即，不包括平台特定的空闲或基线功耗）已测得为 $P_{\\text{SpiNNaker}}=2.4\\,\\text{W}$，$P_{\\text{Loihi}}=0.06\\,\\text{W}$，$P_{\\text{TrueNorth}}=0.02\\,\\text{W}$ 和 $P_{\\text{BrainScaleS}}=0.15\\,\\text{W}$。\n\n仅从功率作为能量传输时间变化率和脉冲率作为脉冲计数时间变化率的基本定义出发，推导用稳定功耗和稳定脉冲率表示的每脉冲平均能量的表达式。然后，使用推导出的表达式和给定的数值，计算每个平台的每脉冲平均能量。将每脉冲能量以 $\\text{J}/\\text{spike}$ 为单位表示，并将每个值四舍五入到三位有效数字。将四个数值结果按 $(\\text{SpiNNaker},\\,\\text{Loihi},\\,\\text{TrueNorth},\\,\\text{BrainScaleS})$ 的顺序表示为一个单行矩阵。",
            "solution": "瞬时功率的基本定义是 $P(t)=\\frac{dE(t)}{dt}$，其中 $E(t)$ 是到时间 $t$ 为止累积消耗的能量。在稳态操作下，我们假设功率不随时间变化，因此在感兴趣的时间区间内 $P(t)=P$ 是一个常数。脉冲率定义为 $r(t)=\\frac{dN(t)}{dt}$，其中 $N(t)$ 是到时间 $t$ 为止的累积脉冲计数。在稳态操作下，脉冲率也不随时间变化，因此 $r(t)=r$ 是一个常数。\n\n每脉冲的平均能量，记为 $E_{\\text{spike}}$，是平均而言与单个脉冲相关联的能量。形式上，考虑无穷小能量增量与无穷小脉冲计数增量的比值，\n$$\nE_{\\text{spike}}=\\frac{dE}{dN}.\n$$\n使用关于时间的链式法则，\n$$\n\\frac{dE}{dN}=\\frac{\\frac{dE}{dt}}{\\frac{dN}{dt}}=\\frac{P}{r}.\n$$\n因此，在稳态功耗 $P$ 和稳态脉冲率 $r$ 的条件下，每脉冲的平均能量为\n$$\nE_{\\text{spike}}=\\frac{P}{r}.\n$$\n\n我们现在将此表达式应用于每个平台，使用 $r=10^{6}\\,\\text{s}^{-1}$ 和给定的动态功耗。对于 SpiNNaker，\n$$\nE_{\\text{spike,SpiNNaker}}=\\frac{P_{\\text{SpiNNaker}}}{r}=\\frac{2.4\\,\\text{W}}{10^{6}\\,\\text{s}^{-1}}=2.4\\times 10^{-6}\\,\\text{J}/\\text{spike}.\n$$\n对于 Loihi，\n$$\nE_{\\text{spike,Loihi}}=\\frac{P_{\\text{Loihi}}}{r}=\\frac{0.06\\,\\text{W}}{10^{6}\\,\\text{s}^{-1}}=6.0\\times 10^{-8}\\,\\text{J}/\\text{spike}.\n$$\n对于 TrueNorth，\n$$\nE_{\\text{spike,TrueNorth}}=\\frac{P_{\\text{TrueNorth}}}{r}=\\frac{0.02\\,\\text{W}}{10^{6}\\,\\text{s}^{-1}}=2.0\\times 10^{-8}\\,\\text{J}/\\text{spike}.\n$$\n对于 BrainScaleS，\n$$\nE_{\\text{spike,BrainScaleS}}=\\frac{P_{\\text{BrainScaleS}}}{r}=\\frac{0.15\\,\\text{W}}{10^{6}\\,\\text{s}^{-1}}=1.5\\times 10^{-7}\\,\\text{J}/\\text{spike}.\n$$\n\n将每个值四舍五入到三位有效数字，保持了其显示形式：$2.40\\times 10^{-6}\\,\\text{J}/\\text{spike}$，$6.00\\times 10^{-8}\\,\\text{J}/\\text{spike}$，$2.00\\times 10^{-8}\\,\\text{J}/\\text{spike}$ 和 $1.50\\times 10^{-7}\\,\\text{J}/\\text{spike}$。所要求的输出是按 $(\\text{SpiNNaker},\\,\\text{Loihi},\\,\\text{TrueNorth},\\,\\text{BrainScaleS})$ 顺序排列的行矩阵。",
            "answer": "$$\\boxed{\\begin{pmatrix}2.40 \\times 10^{-6}  6.00 \\times 10^{-8}  2.00 \\times 10^{-8}  1.50 \\times 10^{-7}\\end{pmatrix}}$$"
        },
        {
            "introduction": "除了资源分配和能耗，底层硬件的实现方式（例如数字与模拟）也会对神经模型的动态行为产生深远影响。这项更深入的实践将探讨这一问题，通过对比在离散参数的数字平台 (TrueNorth) 与连续可调的模拟平台 (BrainScaleS) 上，神经元发放频率如何响应参数的微小变化。这个练习揭示了在神经形态系统设计中，硬件精度与模型保真度之间的微妙关系 。",
            "id": "4049225",
            "problem": "由恒定电流驱动的单室漏泄整合发放（LIF）神经元是周期性发放的标准模型。LIF 膜动力学由以下一阶线性常微分方程给出\n$$C \\, \\dfrac{dV}{dt} = - g_L \\left(V - E_L\\right) + I$$\n其中 $C$ 为恒定电容，$g_L$ 为漏电导，$E_L$ 为漏泄反转电位，$I$ 为注入电流。当膜电位 $V(t)$ 达到一个固定的阈值 $V_{\\mathrm{th}}$ 时，记录一次脉冲，然后电位被重置为一个固定的值 $V_{\\mathrm{reset}}$，此过程重复进行。假设不应期为零，并且所有参数在每个脉冲间期内都是时不变的。周期性脉冲序列存在的充要条件是稳态（无限时间）膜电位 $V_{\\infty} = E_L + \\dfrac{I}{g_L}$ 超过阈值 $V_{\\mathrm{th}}$。\n\n国际商业机器公司（IBM）的 TrueNorth 使用数字量化的神经元参数（例如，以固定增量变化的漏电导），而海德堡大学的 BrainScaleS 则使用连续模拟参数调优。在本题中，您将通过计算在期望的漏电导变化下产生的频率偏移 $\\Delta f$，来量化漏电导量化与连续模拟变化对 LIF 神经元振荡频率 $f$ 的影响。\n\n从 LIF 方程和线性一阶系统的基本性质出发，推导脉冲间期 $T$ 作为 $C$、$g_L$、$E_L$、$I$、$V_{\\mathrm{reset}}$ 和 $V_{\\mathrm{th}}$ 的函数，然后在发生脉冲时推导出频率 $f = \\dfrac{1}{T}$。利用此结果计算在两种不同的期望漏电导变化 $\\delta g$ 实现下，$f$ 如何变化：\n- TrueNorth（离散增量）：实现的漏电导变化被限制为步长 $q$ 的整数倍。模型化为 $\\Delta g_{\\mathrm{TN}} = \\mathrm{sgn}(\\delta g) \\cdot q \\cdot \\left\\lfloor \\dfrac{|\\delta g|}{q} + \\dfrac{1}{2} \\right\\rfloor$，即将 $\\,\\dfrac{\\delta g}{q}\\,$ 四舍五入到最近的整数，其中半整数朝向远离零的方向取整，然后乘以 $q$。\n- BrainScaleS（连续模拟）：实现的漏电导变化等于期望的变化，$\\Delta g_{\\mathrm{BSS}} = \\delta g$。\n\n对于下面的每个测试用例，将基础漏电导定义为 $g_L$，计算基础频率 $f(g_L)$、扰动后的频率 $f(g_L + \\Delta g_{\\mathrm{TN}})$ 和 $f(g_L + \\Delta g_{\\mathrm{BSS}})$（约定如果某个配置不发放脉冲，其频率定义为 $0$ Hz），然后报告频率偏移\n- $\\Delta f_{\\mathrm{TN}} = f(g_L + \\Delta g_{\\mathrm{TN}}) - f(g_L)$，单位为 Hz，\n- $\\Delta f_{\\mathrm{BSS}} = f(g_L + \\Delta g_{\\mathrm{BSS}}) - f(g_L)$，单位为 Hz。\n\n物理单位和约定：\n- 所有电压单位必须为 $\\mathrm{V}$，电流为 $\\mathrm{A}$，电容为 $\\mathrm{F}$，电导为 $\\mathrm{S}$，频率为 $\\mathrm{Hz}$。\n- 将 $C$ 和 $g_L$ 视为严格为正。如果对于给定的配置，$V_{\\infty} \\le V_{\\mathrm{th}}$，则将其频率定义为 $0$ Hz。\n- 不使用角度。不允许百分比输出。\n\n您的程序必须为以下参数集测试套件实现此计算。每个测试用例是一个元组 $(C, E_L, V_{\\mathrm{reset}}, V_{\\mathrm{th}}, g_L, I, q, \\delta g)$，全部采用国际单位制（SI）：\n- 测试 1：$(\\, 200 \\times 10^{-12},\\, -65 \\times 10^{-3},\\, -70 \\times 10^{-3},\\, -50 \\times 10^{-3},\\, 10 \\times 10^{-9},\\, 1 \\times 10^{-9},\\, 0.5 \\times 10^{-9},\\, +0.6 \\times 10^{-9} \\,)$。\n- 测试 2：$(\\, 200 \\times 10^{-12},\\, -65 \\times 10^{-3},\\, -70 \\times 10^{-3},\\, -50 \\times 10^{-3},\\, 10 \\times 10^{-9},\\, 1 \\times 10^{-9},\\, 0.5 \\times 10^{-9},\\, +0.2 \\times 10^{-9} \\,)$。\n- 测试 3：$(\\, 200 \\times 10^{-12},\\, -65 \\times 10^{-3},\\, -70 \\times 10^{-3},\\, -50 \\times 10^{-3},\\, 6 \\times 10^{-9},\\, 0.6 \\times 10^{-9},\\, 0.25 \\times 10^{-9},\\, -0.4 \\times 10^{-9} \\,)$。\n- 测试 4：$(\\, 200 \\times 10^{-12},\\, -65 \\times 10^{-3},\\, -70 \\times 10^{-3},\\, -50 \\times 10^{-3},\\, 10 \\times 10^{-9},\\, 0.16 \\times 10^{-9},\\, 0.5 \\times 10^{-9},\\, +0.7 \\times 10^{-9} \\,)$。\n- 测试 5：$(\\, 100 \\times 10^{-12},\\, -65 \\times 10^{-3},\\, -70 \\times 10^{-3},\\, -54 \\times 10^{-3},\\, 2 \\times 10^{-9},\\, 0.3 \\times 10^{-9},\\, 0.1 \\times 10^{-9},\\, +0.05 \\times 10^{-9} \\,)$。\n\n您的程序应生成单行输出，其中包含结果，格式为逗号分隔的列表的列表，每个内部列表按 $[\\, \\Delta f_{\\mathrm{TN}},\\, \\Delta f_{\\mathrm{BSS}} \\,]$ 的顺序排列，对应测试 1 到 5。例如，输出格式必须是：\n- $[\\,[x_1,y_1],[x_2,y_2],[x_3,y_3],[x_4,y_4],[x_5,y_5]\\,]$,\n其中每个 $x_i$ 和 $y_i$ 是以十进制形式写入的以 Hz 为单位的实数。",
            "solution": "### 脉冲间期和频率的推导\n\n膜电位 $V(t)$ 的动力学由以下一阶线性常微分方程描述：\n$$ C \\frac{dV}{dt} = -g_L(V - E_L) + I $$\n这个方程可以重排成标准形式。两边除以 $g_L$ 得到：\n$$ \\frac{C}{g_L} \\frac{dV}{dt} = -(V - E_L) + \\frac{I}{g_L} $$\n$$ \\frac{C}{g_L} \\frac{dV}{dt} = - \\left( V - \\left(E_L + \\frac{I}{g_L}\\right) \\right) $$\n我们定义两个关键量：膜时间常数 $\\tau_m = \\dfrac{C}{g_L}$，和稳态膜电位 $V_{\\infty} = E_L + \\dfrac{I}{g_L}$。将它们代入方程得到：\n$$ \\tau_m \\frac{dV}{dt} = -(V - V_{\\infty}) $$\n这是一个可分离的微分方程：\n$$ \\frac{dV}{V - V_{\\infty}} = -\\frac{dt}{\\tau_m} $$\n为了求出脉冲间期 $T$，我们将此方程从重置电位 $V(0) = V_{\\mathrm{reset}}$ 积分到阈值电位 $V(T) = V_{\\mathrm{th}}$。\n$$ \\int_{V_{\\mathrm{reset}}}^{V_{\\mathrm{th}}} \\frac{dV}{V - V_{\\infty}} = \\int_{0}^{T} -\\frac{dt}{\\tau_m} $$\n进行积分得到：\n$$ \\left[ \\ln|V - V_{\\infty}| \\right]_{V_{\\mathrm{reset}}}^{V_{\\mathrm{th}}} = \\left[ -\\frac{t}{\\tau_m} \\right]_{0}^{T} $$\n$$ \\ln|V_{\\mathrm{th}} - V_{\\infty}| - \\ln|V_{\\mathrm{reset}} - V_{\\infty}| = -\\frac{T}{\\tau_m} $$\n为了发生脉冲，稳态电位必须高于阈值，即 $V_{\\infty}  V_{\\mathrm{th}}$。考虑到阈值通常高于重置电位，即 $V_{\\mathrm{th}}  V_{\\mathrm{reset}}$，我们有排序 $V_{\\infty}  V_{\\mathrm{th}}  V_{\\mathrm{reset}}$。在这种情况下，$(V_{\\mathrm{th}} - V_{\\infty})$ 和 $(V_{\\mathrm{reset}} - V_{\\infty})$ 都是负数。绝对值内的表达式可以写成 $(V_{\\infty} - V_{\\mathrm{th}})$ 和 $(V_{\\infty} - V_{\\mathrm{reset}})$，这两者都是正数。\n$$ \\ln\\left(\\frac{V_{\\infty} - V_{\\mathrm{th}}}{V_{\\infty} - V_{\\mathrm{reset}}}\\right) = -\\frac{T}{\\tau_m} $$\n解出脉冲间期 $T$：\n$$ T = -\\tau_m \\ln\\left(\\frac{V_{\\infty} - V_{\\mathrm{th}}}{V_{\\infty} - V_{\\mathrm{reset}}}\\right) $$\n利用性质 $-\\ln(x) = \\ln(1/x)$，我们可以将公式写成一个更直观的形式，其中对数的参数大于 1：\n$$ T = \\tau_m \\ln\\left(\\frac{V_{\\infty} - V_{\\mathrm{reset}}}{V_{\\infty} - V_{\\mathrm{th}}}\\right) $$\n此方程仅在 $V_{\\infty}  V_{\\mathrm{th}}$ 时有效，这确保了分母为正，并且对数的参数是明确定义的正数（因为 $V_{\\mathrm{th}}  V_{\\mathrm{reset}}$ 意味着 $V_{\\infty} - V_{\\mathrm{reset}}  V_{\\infty} - V_{\\mathrm{th}}$）。如果 $V_{\\infty} \\le V_{\\mathrm{th}}$，神经元将不会发放脉冲，脉冲间期实际上是无限的，频率 $f$ 为 $0$。\n\n发放频率 $f$ 是脉冲间期 $T$ 的倒数：\n$$ f = \\frac{1}{T} = \\frac{1}{\\tau_m \\ln\\left(\\frac{V_{\\infty} - V_{\\mathrm{reset}}}{V_{\\infty} - V_{\\mathrm{th}}}\\right)} $$\n代入 $\\tau_m$ 和 $V_{\\infty}$ 的表达式：\n$$ f(C, g_L, E_L, I, V_{\\mathrm{reset}}, V_{\\mathrm{th}}) = \\left( \\frac{C}{g_L} \\ln\\left(\\frac{(E_L + I/g_L) - V_{\\mathrm{reset}}}{(E_L + I/g_L) - V_{\\mathrm{th}}}\\right) \\right)^{-1} $$\n这个表达式将用于计算任何给定参数集的频率，前提是满足脉冲发放条件 $E_L + I/g_L  V_{\\mathrm{th}}$。否则，$f=0$。\n\n### 计算步骤\n对于每个测试用例，我们遵循以下步骤：\n1.  定义一个函数，它接受 $(C, g_L, E_L, I, V_{\\mathrm{reset}}, V_{\\mathrm{th}})$ 作为输入来计算频率。\n2.  在该函数内部，首先计算 $V_{\\infty} = E_L + I/g_L$。\n3.  检查是否 $V_{\\infty}  V_{\\mathrm{th}}$。如果不是，返回 $0.0$。\n4.  如果条件满足，使用推导的公式计算 $T$ 并返回 $f=1/T$。\n5.  计算基础频率 $f_{base}$。\n6.  对于 TrueNorth 情况 (TN):\n    a. 计算实现的漏电导变化 $\\Delta g_{\\mathrm{TN}} = \\mathrm{sgn}(\\delta g) \\cdot q \\cdot \\lfloor |\\delta g|/q + 1/2 \\rfloor$。\n    b. 计算新的漏电导 $g_{L, \\mathrm{TN}} = g_L + \\Delta g_{\\mathrm{TN}}$。\n    c. 计算扰动后的频率 $f_{\\mathrm{TN}}$。\n    d. 计算频率偏移 $\\Delta f_{\\mathrm{TN}} = f_{\\mathrm{TN}} - f_{base}$。\n7.  对于 BrainScaleS 情况 (BSS):\n    a. 实现的漏电导变化为 $\\Delta g_{\\mathrm{BSS}} = \\delta g$。\n    b. 计算新的漏电导 $g_{L, \\mathrm{BSS}} = g_L + \\Delta g_{\\mathrm{BSS}}$。\n    c. 计算扰动后的频率 $f_{\\mathrm{BSS}}$。\n    d. 计算频率偏移 $\\Delta f_{\\mathrm{BSS}} = f_{\\mathrm{BSS}} - f_{base}$。\n8.  为每个测试用例存储并格式化结果对 $[\\Delta f_{\\mathrm{TN}}, \\Delta f_{\\mathrm{BSS}}]$。",
            "answer": "[[-0.6033100650993079,-0.9022646487968537],[0.0,0.3023249080004944],[-3.30948957861996,3.7547903525287707],[-8.471415664150538,-11.233481232822452],[0.400267798305888,0.753381665476332]]"
        }
    ]
}
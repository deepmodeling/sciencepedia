{
    "hands_on_practices": [
        {
            "introduction": "理想化的模型是理解WTA原理的起点，但在物理实现中，我们必须面对硬件的非理想性。模拟电路中的晶体管制造差异会导致所谓的“器件失配”，这表现为神经元响应特性的随机变化，如同噪声一样干扰决策过程，甚至可能导致错误的“赢家”被选出。本练习 () 将带您直面这一实际挑战。您将推导出一个保证正确选择获胜者的概率模型，并计算出为克服随机硬件噪声、达到特定置信度所需的最小抑制强度。",
            "id": "4067903",
            "problem": "考虑一个由 $N$ 个相同的线性阈值神经元组成的群体，它们实现了一个赢家通吃（WTA）电路，在稳态下该电路被建模为单个激活的神经元（赢家）同等地抑制所有其他神经元。设确定性输入电流按 $I_{1}  I_{2} \\geq I_{3} \\geq \\cdots \\geq I_{N}  0$ 排序。每个神经元都存在由器件失配引起的有效阈值不确定性，该不确定性被建模为一个独立同分布的随机偏移量 $\\delta V_{T,i} \\sim \\mathcal{N}(0,\\sigma_{V_{T}}^{2})$，它通过 $-\\alpha\\,\\delta V_{T,i}$ 线性地扰动有效输入电流，其中 $\\alpha  0$ 是一个将以伏特为单位的阈值偏移转换为以安培为单位的等效电流偏移的转换系数。\n\n假设存在以下简化的稳态相互作用：如果输入为 $I_{1}$ 的神经元 $w$ 是赢家，那么它的输出等于其有效输入，因此其稳态活动为 $x_{w} = I_{1} - \\alpha\\,\\delta V_{T,1}$，而每个输家 $k \\neq w$ 接收到的净输入为 $I_{k} - \\alpha\\,\\delta V_{T,k} - g\\,x_{w}$，其中 $g  0$ 是均匀抑制增益。正确的赢家选择意味着所有输家都被抑制，即对于所有 $k \\geq 2$，都有 $I_{k} - \\alpha\\,\\delta V_{T,k} - g\\,(I_{1} - \\alpha\\,\\delta V_{T,1})  0$。\n\n为了以 $1-\\epsilon$ 的置信度（也就是说，在随机阈值偏移上以至少 $1-\\epsilon$ 的概率）保证正确的赢家选择，只需强制抑制最强的竞争者 $k=2$ 即可。仅使用：\n- $\\delta V_{T,1}$ 和 $\\delta V_{T,2}$ 的独立性和高斯性，\n- 若 $X \\sim \\mathcal{N}(\\mu,\\sigma^{2})$ 则 $\\mathbb{P}[X > 0] = \\Phi\\!\\big(\\mu/\\sigma\\big)$ 的定义，其中 $\\Phi(\\cdot)$ 是标准正态累积分布函数，\n\n推导最小抑制增益 $g_{\\min}$ 的闭式解析表达式，该表达式是 $I_{1}$、$I_{2}$、$\\alpha$、$\\sigma_{V_{T}}$ 和 $\\epsilon$ 的函数，并能实现 $\\mathbb{P}[\\text{正确赢家}] \\geq 1-\\epsilon$。你的最终答案必须用由 $z_{1-\\epsilon} = \\Phi^{-1}(1-\\epsilon)$ 定义的标准正态分位数 $z_{1-\\epsilon}$ 来表示。\n\n你的最终答案必须是关于 $g_{\\min}$ 的、用给定符号表示的单一闭式解析表达式。不要引入任何数值近似或四舍五入。最终答案中不需要单位。确保所有符号都如上文明确定义，并假设参数值使得表达式为实数且有限。",
            "solution": "该问题被评估为有效。它在科学上基于神经形态电路理论，问题适定，目标明确，信息充分，且没有矛盾或歧义。\n\n目标是找到能以至少 $1-\\epsilon$ 的概率确保正确赢家选择的最小抑制增益 $g_{\\min}$。问题陈述了神经元 $1$ 是预期的赢家，因为它接收到最大的输入电流 $I_{1}$。正确的赢家选择要求所有其他神经元 $k \\geq 2$ 都被抑制。问题通过说明只需对最强的竞争者，即输入电流为 $I_{2}$ 的神经元 $k=2$，强制抑制即可，从而简化了此问题。\n\n抑制神经元 $k=2$ 的条件给出如下：\n$$I_{2} - \\alpha\\,\\delta V_{T,2} - g\\,(I_{1} - \\alpha\\,\\delta V_{T,1})  0$$\n其中 $g$ 是抑制增益，$\\alpha > 0$ 是转换系数，$\\delta V_{T,1}$ 和 $\\delta V_{T,2}$ 是表示阈值电压偏移的独立随机变量，从正态分布 $\\mathcal{N}(0, \\sigma_{V_{T}}^2)$ 中抽取。\n\n为了从概率角度分析这个问题，我们定义一个随机变量 $Y$ 来表示神经元 $2$ 的抑制裕度。抑制的条件等价于 $Y > 0$，其中 $Y$ 定义为：\n$$Y = g\\,(I_{1} - \\alpha\\,\\delta V_{T,1}) - (I_{2} - \\alpha\\,\\delta V_{T,2})$$\n我们可以重排 $Y$ 以分离确定性分量和随机分量：\n$$Y = (gI_{1} - I_{2}) + (\\alpha\\delta V_{T,2} - g\\alpha\\delta V_{T,1})$$\n变量 $Y$ 是高斯随机变量的线性变换，因此其本身也是一个高斯随机变量。我们求其均值 $\\mu_Y$ 和方差 $\\sigma_Y^2$。\n\n$Y$ 的均值为：\n$$\\mu_Y = \\mathbb{E}[Y] = \\mathbb{E}[(gI_{1} - I_{2}) + (\\alpha\\delta V_{T,2} - g\\alpha\\delta V_{T,1})]$$\n由于 $\\mathbb{E}[\\delta V_{T,1}] = \\mathbb{E}[\\delta V_{T,2}] = 0$，均值为：\n$$\\mu_Y = gI_{1} - I_{2}$$\n$Y$ 的方差为：\n$$\\sigma_Y^2 = \\text{Var}[Y] = \\text{Var}[(gI_{1} - I_{2}) + (\\alpha\\delta V_{T,2} - g\\alpha\\delta V_{T,1})]$$\n确定性部分 $(gI_{1} - I_{2})$ 对方差没有贡献。由于 $\\delta V_{T,1}$ 和 $\\delta V_{T,2}$ 的独立性，和的方差是方差的和：\n$$\\sigma_Y^2 = \\text{Var}[\\alpha\\delta V_{T,2}] + \\text{Var}[-g\\alpha\\delta V_{T,1}]$$\n使用性质 $\\text{Var}[aX] = a^2\\text{Var}[X]$：\n$$\\sigma_Y^2 = \\alpha^2\\text{Var}[\\delta V_{T,2}] + (-g\\alpha)^2\\text{Var}[\\delta V_{T,1}]$$\n已知 $\\text{Var}[\\delta V_{T,1}] = \\text{Var}[\\delta V_{T,2}] = \\sigma_{V_{T}}^2$，我们得到：\n$$\\sigma_Y^2 = \\alpha^2\\sigma_{V_{T}}^2 + g^2\\alpha^2\\sigma_{V_{T}}^2 = \\alpha^2\\sigma_{V_{T}}^2(1+g^2)$$\n所以，随机变量 $Y$ 服从分布 $Y \\sim \\mathcal{N}\\left(gI_{1} - I_{2}, \\alpha^2\\sigma_{V_{T}}^2(1+g^2)\\right)$。\n\n问题要求正确抑制的概率至少为 $1-\\epsilon$。条件是 $\\mathbb{P}[\\text{神经元2被抑制}] \\ge 1-\\epsilon$。神经元2被抑制的条件是 $I_{2} - \\alpha\\,\\delta V_{T,2} - g\\,(I_{1} - \\alpha\\,\\delta V_{T,1})  0$，这等价于 $Y > 0$。因此，我们要求：\n$$\\mathbb{P}[Y > 0] \\geq 1-\\epsilon$$\n使用为高斯变量 $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$ 提供的公式 $\\mathbb{P}[X > 0] = \\Phi(\\mu/\\sigma)$，其中 $\\Phi(\\cdot)$ 是标准正态累积分布函数（CDF），我们可以写出：\n$$\\mathbb{P}[Y > 0] = \\Phi\\left(\\frac{\\mu_Y}{\\sigma_Y}\\right) = \\Phi\\left(\\frac{gI_{1} - I_{2}}{\\sqrt{\\alpha^2\\sigma_{V_{T}}^2(1+g^2)}}\\right) = \\Phi\\left(\\frac{gI_{1} - I_{2}}{\\alpha\\sigma_{V_{T}}\\sqrt{1+g^2}}\\right)$$\n该条件变为：\n$$\\Phi\\left(\\frac{gI_{1} - I_{2}}{\\alpha\\sigma_{V_{T}}\\sqrt{1+g^2}}\\right) \\geq 1-\\epsilon$$\n由于 $\\Phi(\\cdot)$ 是一个严格递增函数，我们可以对其反函数，即分位数函数 $\\Phi^{-1}(\\cdot)$，应用到不等式两边：\n$$\\frac{gI_{1} - I_{2}}{\\alpha\\sigma_{V_{T}}\\sqrt{1+g^2}} \\geq \\Phi^{-1}(1-\\epsilon)$$\n问题定义了标准正态分位数 $z_{1-\\epsilon} = \\Phi^{-1}(1-\\epsilon)$。因此：\n$$\\frac{gI_{1} - I_{2}}{\\alpha\\sigma_{V_{T}}\\sqrt{1+g^2}} \\geq z_{1-\\epsilon}$$\n为了找到最小增益 $g_{\\min}$，我们在对应于此条件边界的等式中求解 $g$。设 $C = \\alpha\\sigma_{V_{T}}z_{1-\\epsilon}$。不等式为 $gI_{1} - I_{2} \\geq C\\sqrt{1+g^2}$。对于高置信度的非平凡解（例如，$\\epsilon  0.5$），我们有 $z_{1-\\epsilon} > 0$ 因而 $C > 0$。右侧为正，这意味着左侧也必须为正，即 $gI_{1} - I_{2} > 0$。在这个条件下，我们可以对两边平方：\n$$(gI_{1} - I_{2})^2 \\geq C^2(1+g^2)$$\n$$g^2I_{1}^2 - 2gI_{1}I_{2} + I_{2}^2 \\geq C^2 + C^2g^2$$\n重排各项得到一个关于 $g$ 的二次不等式：\n$$(I_{1}^2 - C^2)g^2 - (2I_{1}I_{2})g + (I_{2}^2 - C^2) \\geq 0$$\n为了使最小增益存在，这个关于 $g$ 的二次式（假设 $I_1^2 > C^2$，其图像开口向上）必须大于或等于 $0$。最小增益 $g_{\\min}$ 将是相应方程 $(I_{1}^2 - C^2)g^2 - (2I_{1}I_{2})g + (I_{2}^2 - C^2) = 0$ 的两个根中较大的一个。\n使用二次公式 $g = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$：\n判别式为 $\\Delta = (-2I_{1}I_{2})^2 - 4(I_{1}^2 - C^2)(I_{2}^2 - C^2)$：\n$$\\Delta = 4I_{1}^2I_{2}^2 - 4(I_{1}^2I_{2}^2 - I_{1}^2C^2 - I_{2}^2C^2 + C^4)$$\n$$\\Delta = 4I_{1}^2C^2 + 4I_{2}^2C^2 - 4C^4 = 4C^2(I_{1}^2 + I_{2}^2 - C^2)$$\n根是：\n$$g = \\frac{2I_{1}I_{2} \\pm \\sqrt{4C^2(I_{1}^2 + I_{2}^2 - C^2)}}{2(I_{1}^2 - C^2)} = \\frac{I_{1}I_{2} \\pm C\\sqrt{I_{1}^2 + I_{2}^2 - C^2}}{I_{1}^2 - C^2}$$\n最小增益 $g_{\\min}$ 对应于较大的根（即带有加号的那个）：\n$$g_{\\min} = \\frac{I_{1}I_{2} + C\\sqrt{I_{1}^2 + I_{2}^2 - C^2}}{I_{1}^2 - C^2}$$\n将 $C = \\alpha\\sigma_{V_{T}}z_{1-\\epsilon}$ 代回，我们得到最小抑制增益的最终表达式：\n$$g_{\\min} = \\frac{I_{1}I_{2} + (\\alpha\\sigma_{V_{T}}z_{1-\\epsilon})\\sqrt{I_{1}^2 + I_{2}^2 - (\\alpha\\sigma_{V_{T}}z_{1-\\epsilon})^2}}{I_{1}^2 - (\\alpha\\sigma_{V_{T}}z_{1-\\epsilon})^2}$$\n该表达式在分母和平方根内的项为正的假设下有效，这对应于信噪比对于所需的置信水平而言足够高。问题陈述通过要求假设参数使得表达式为实数且有限，从而保证了这一点。",
            "answer": "$$\\boxed{\\frac{I_{1}I_{2} + (\\alpha\\sigma_{V_{T}}z_{1-\\epsilon})\\sqrt{I_{1}^{2} + I_{2}^{2} - (\\alpha\\sigma_{V_{T}}z_{1-\\epsilon})^{2}}}{I_{1}^{2} - (\\alpha\\sigma_{V_{T}}z_{1-\\epsilon})^{2}}}$$"
        },
        {
            "introduction": "在任何实际应用中，尤其是在追求高能效的神经形态计算领域，功耗都是一个至关重要的设计约束。为了提升电路的决策速度或增强其对噪声的鲁棒性而做出的设计选择，往往需要付出功耗的代价。本练习 () 将探讨这一核心权衡。您将首先分析一个WTA电路的静态功耗，然后基于此模型，深入讨论功耗、决策速度和噪声鲁棒性之间的基本制衡关系，从而将前面练习中的概念融会贯通。",
            "id": "4067974",
            "problem": "考虑一个在室温下严格工作在亚阈值区的、以互补金属氧化物半导体 (CMOS) 技术实现的电流模式赢家通吃 (WTA) 电路。该WTA电路有 $N$ 个竞争支路，每个支路 $i$ 通过一个跨导器件将一个由输入感应的直流灌电流 $I_i$ 接地，该器件被偏置使其漏极电流处于亚阈值指数区。该电路由电压为 $V_{DD}$ 的单电源供电，WTA在稳态条件下运行，开关活动可忽略不计。唯一不可忽略的功耗是由于支路电流的静态导通，这些电流通过偏置和负载元件从电源流出，并通过WTA支路灌入地。假设在预期支路电流之外的寄生漏电可以忽略不计，并且支路电流足够小，以至于像漏致势垒降低和沟道长度调制这样的二阶效应不会破坏基尔霍夫电流定律 (KCL) 在电源节点处的有效性。\n\n从电功率作为能量传输速率的基本定义、电源处的电压、电流和功率之间的关系，以及基尔霍夫电流定律出发，根据所述假设，推导WTA电路总静态功耗的简洁解析表达式，该表达式应以 $V_{DD}$ 和支路电流集合 $\\{I_i\\}_{i=1}^{N}$ 表示。\n\n然后，使用该表达式，计算一个五支路WTA电路的总静态功率，其电源电压为 $V_{DD} = 0.85$ V，支路电流如下：\n- $I_1 = 33$ nA,\n- $I_2 = 18$ nA,\n- $I_3 = 7$ nA,\n- $I_4 = 4$ nA,\n- $I_5 = 65$ nA.\n\n从第一性原理出发，不使用未经检验的启发式公式，讨论亚阈值WTA操作中静态功率、决策速度以及对输入和器件噪声的鲁棒性之间的权衡。你的推理应基于经过充分验证的亚阈值导电器件关系（例如，跨导-电流关系 $g_m \\approx \\frac{I}{n U_T}$，其中 $U_T = \\frac{k_B T}{q}$，$n$ 为亚阈值斜率因子）以及散粒噪声和热噪声等噪声源。你的讨论应阐明增加或减少支路电流 $\\{I_i\\}$ 如何影响建立时间和噪声敏感性，以及为使推导出的功率表达式保持准确需要哪些假设。\n\n将你的数值功率结果四舍五入到四位有效数字，并以nW为单位表示最终功率。",
            "solution": "任务是推导电流模式赢家通吃 (WTA) 电路总静态功耗的表达式，用它进行数值计算，并讨论其运行中的权衡。\n\n**第1部分：总静态功耗表达式的推导**\n\n由直流 (DC) 电压源提供的电功率 $P$ 的基本定义是其两端电压 $V$ 与其提供的电流 $I$ 的乘积：\n$$P = V \\times I$$\n对于所讨论的WTA电路，它由一个电压为 $V_{DD}$ 的单电源供电。因此，电路消耗的总静态功率 $P_{total}$ 是该电源电压与从电源汲取的总直流电流 $I_{total}$ 的乘积。\n$$P_{total} = V_{DD} \\times I_{total}$$\n问题陈述该电路处于稳态，并且唯一不可忽略的功耗是由支路电流的静态导通引起的。电路有 $N$ 个支路，每个支路 $i$ 将电流 $I_i$ 灌入地。\n\n为了确定 $I_{total}$，我们应用基尔霍夫电流定律 (KCL)。KCL指出，流入任何节点（或者更一般地，任何闭合边界）的电流代数和必须为零。如果我们将整个WTA电路视为一个单一系统，它有两个端子：一个连接到电源 $V_{DD}$，另一个连接到地。从电源流入系统的电流是 $I_{total}$。流出系统到地的电流是 $N$ 个支路灌电流 $\\{I_i\\}_{i=1}^{N}$。\n\n问题明确指出，在预期支路电流之外的寄生漏电可以忽略不计。这个关键假设意味着由电源提供的总电流必须等于通过已定义电路路径灌入地的所有电流之和。\n灌入地的总电流 $I_{sunk}$ 是各个支路电流之和：\n$$I_{sunk} = \\sum_{i=1}^{N} I_i$$\n根据应用于整个电路的KCL所要求的电荷守恒定律，从电源汲取的总电流必须与灌入地的总电流相平衡：\n$$I_{total} = I_{sunk} = \\sum_{i=1}^{N} I_i$$\n将这个 $I_{total}$ 的表达式代入功率方程，我们得到总静态功耗的简洁解析表达式：\n$$P_{total} = V_{DD} \\sum_{i=1}^{N} I_i$$\n\n**第2部分：静态功率的数值计算**\n\n对于一个特定的 $N=5$ 支路WTA电路，我们有以下给定值：\n- 电源电压: $V_{DD} = 0.85$ V\n- 支路电流: $I_1 = 33$ nA, $I_2 = 18$ nA, $I_3 = 7$ nA, $I_4 = 4$ nA, $I_5 = 65$ nA\n\n首先，我们通过对各个支路电流求和来计算总电流 $I_{total}$：\n$$I_{total} = \\sum_{i=1}^{5} I_i = I_1 + I_2 + I_3 + I_4 + I_5$$\n$$I_{total} = (33 + 18 + 7 + 4 + 65) \\, \\text{nA} = 127 \\, \\text{nA}$$\n这对应于 $127 \\times 10^{-9}$ A 的总电流。\n\n接下来，我们使用推导出的公式计算总静态功率 $P_{total}$：\n$$P_{total} = V_{DD} \\times I_{total}$$\n$$P_{total} = (0.85 \\, \\text{V}) \\times (127 \\times 10^{-9} \\, \\text{A})$$\n$$P_{total} = 107.95 \\times 10^{-9} \\, \\text{W} = 107.95 \\, \\text{nW}$$\n问题要求将结果四舍五入到四位有效数字。\n$$P_{total} \\approx 108.0 \\, \\text{nW}$$\n\n**第3部分：权衡与假设的讨论**\n\n亚阈值WTA电路的运行体现了静态功率、决策速度（建立时间）和噪声鲁棒性之间的基本权衡。这些可以从第一性原理进行分析。\n\n1.  **静态功率与决策速度**：推导出的表达式表明，静态功率与支路电流之和成正比，$P_{total} \\propto \\sum I_i$。电路的决策速度取决于它响应输入以选出赢家的速度。这个速度受电路内部节点寄生电容充放电的限制。节点电压的变化率是 $\\frac{dV}{dt} = \\frac{I_{net}}{C}$，其中 $I_{net}$ 是可用于对电容 $C$ 充电或放电的净电流。这个电流是晶体管跨导 $g_m$ 的函数。对于工作在亚阈值区的MOSFET，其跨导近似与其漏极电流 $I_D$ 成正比：\n    $$g_m = \\frac{\\partial I_D}{\\partial V_{GS}} \\approx \\frac{I_D}{n U_T}$$\n    其中 $U_T = \\frac{k_B T}{q}$ 是热电压，$n \\ge 1$ 是亚阈值斜率因子。更大的 $g_m$ 会产生更快的电路响应。因此，增加支路电流 $\\{I_i\\}$ 会增加晶体管的 $g_m$，从而减少电路的建立时间并提高其决策速度。这揭示了一个经典的速度-功率权衡：更高的速度需要更大的电流，从而导致更高的静态功耗。\n\n2.  **静态功率与噪声鲁棒性**：鲁棒性是电路在有噪声存在的情况下仍能保持正确功能的能力。在亚阈值电路中，主要的噪声源包括散粒噪声和热噪声。散粒噪声的功率谱密度与直流电流成正比，$S_{shot}(f) = 2qI_D$。在带宽 $\\Delta f$ 上积分的均方根噪声电流 $\\sigma_{noise}$ 与直流电流的平方根成正比，$\\sigma_{noise} \\propto \\sqrt{I_D}$。在这种电流模式的背景下，信号就是电流 $I_D$ 本身。因此，信噪比 (SNR) 是衡量鲁棒性的一个主要品质因数：\n    $$\\text{SNR} = \\frac{\\text{Signal Power}}{\\text{Noise Power}} \\propto \\frac{I_D^2}{I_D} = I_D \\quad \\text{或} \\quad \\text{SNR (amplitude)} = \\frac{\\text{Signal Amplitude}}{\\text{Noise Amplitude}} \\propto \\frac{I_D}{\\sqrt{I_D}} = \\sqrt{I_D}$$\n    在任何一种定义下，增加工作电流 $I_D$ 都会提高信噪比。更高的信噪比意味着电路在面对随机波动时能更可靠地区分“获胜”电流和竞争电流。这就建立了一个功率-鲁棒性权衡：要获得更强的抗噪声能力，需要更大的工作电流，而这又会导致更高的静态功耗。\n\n3.  **功率表达式准确性的假设**：推导出的表达式 $P_{total} = V_{DD} \\sum I_i$ 依赖于几个简化假设，这些假设的有效性决定了其准确性：\n    - **静态操作**：该表达式只计算静态功耗。它忽略了由电路的开关活动（即变化的输入）产生的动态功耗 $P_{dyn} \\propto f C_{load} V_{DD}^2$。如果WTA的输入频繁变化，这个动态分量可能会很显著。\n    - **可忽略的漏电**：该模型假设从电源汲取的唯一电流是 $N$ 个指定的支路电流。在现实世界的CMOS器件中，尤其是在先进工艺中，其他漏电流（例如，栅漏电、结漏电以及本应关断的晶体管中的亚阈值漏电）可能相当大。这些漏电会加到 $I_{total}$ 中，使得推导出的表达式成为实际功耗的一个下界。\n    - **理想的偏置网络**：该推导隐含地假设，为WTA支路产生和分配电流的辅助电路（例如电流镜）是完美高效的，或者其功耗已经计入 $\\{I_i\\}$ 中。实际上，这样的偏置网络自身也会消耗功率（例如，通过一个参考电流支路），这将为从 $V_{DD}$ 汲取的总功率贡献一个额外的项。",
            "answer": "$$\\boxed{108.0}$$"
        }
    ]
}
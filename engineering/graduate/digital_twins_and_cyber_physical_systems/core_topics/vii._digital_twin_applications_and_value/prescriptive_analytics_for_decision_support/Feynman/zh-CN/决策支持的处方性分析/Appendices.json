{
    "hands_on_practices": [
        {
            "introduction": "优化共享资源的使用是管理赛博物理系统的数字孪生的一项基本任务。本练习将引导你解决一个核心的规定性分析问题：通过求解一个凸二次规划来为系统找到最优的操作设定点。更重要的是，通过推导和应用拉格朗日对偶原理，你将学会计算受限资源的“影子价格”，从而为其给系统带来的边际价值提供一个强有力的经济学解释。",
            "id": "4235979",
            "problem": "一个信息物理系统（CPS）的数字孪生协调了$2$个共享通信带宽资源的联网控制子系统。令 $x \\in \\mathbb{R}^n$ 表示一个由CPS控制器部署的指令性设定点（例如，驱动速率）向量。数字孪生使用指令性分析方法，通过最小化一个形式为 $f(x) = \\frac{1}{2} x^{\\top} Q x + c^{\\top} x$ 的严格凸二次性能指标来选择 $x$，其中 $Q \\in \\mathbb{R}^{n \\times n}$ 满足 $Q \\succ 0$ 且 $c \\in \\mathbb{R}^n$。这些设定点受到代表CPS资源限制和协调要求的线性约束。\n\n从凸规划的拉格朗日函数和拉格朗日对偶函数的定义出发，且不假设任何预先推导出的公式，请完成以下任务：\n\n$1.$ 考虑带线性约束的严格凸二次规划问题\n$$\n\\begin{aligned}\n\\min_{x \\in \\mathbb{R}^n} \\quad  \\frac{1}{2} x^{\\top} Q x + c^{\\top} x \\\\\n\\text{s.t.} \\quad  A x \\leq b, \\\\\n E x = h,\n\\end{aligned}\n$$\n其中 $Q \\succ 0$, $A \\in \\mathbb{R}^{m \\times n}$, $b \\in \\mathbb{R}^m$, $E \\in \\mathbb{R}^{p \\times n}$ 且 $h \\in \\mathbb{R}^p$。推导拉格朗日函数、拉格朗日对偶函数和对偶优化问题，包括对偶变量的定义域。明确说明对偶变量的符号或自由域条件。将对偶变量的经济意义解释为CPS资源的影子价格。\n\n$2.$ 现在，将问题具体化为一个 $2$ 子系统的CPS，其中 $n=2$，共享带宽资源由单个等式约束 $a^{\\top} x = b$ 表示，其中 $a = \\begin{bmatrix} 1 \\\\ 1 \\end{bmatrix}$ 且 $b \\in \\mathbb{R}$，以及非负性约束 $x \\geq 0$。令\n$$\nQ = \\begin{bmatrix} 4  2 \\\\ 2  3 \\end{bmatrix}, \n\\qquad\nc = \\begin{bmatrix} -8 \\\\ -5 \\end{bmatrix},\n\\qquad\nb = 5.\n$$\n使用第1部分中从第一性原理推导出的Karush–Kuhn–Tucker (KKT) 最优性条件，计算与等式约束 $a^{\\top} x = b$ 相关的最优拉格朗日乘子，并将其解释为CPS中带宽资源的影子价格。然后，使用对偶变量的包络解释，确定当 $b=5$ 时，最优目标值相对于 $b$ 的边际变化。将此边际变化以“成本单位/单位带宽”表示。将最终答案以单个精确实数的形式给出。无需四舍五入。最终答案框中不要包含单位。",
            "solution": "用户希望我首先验证问题，然后解决它。\n\n### 第1步：提取已知条件\n问题提供了以下信息：\n- 一个数字孪生协调了 $2$ 个联网控制子系统。\n- 控制设定点是一个向量 $x \\in \\mathbb{R}^n$。\n- 需要最小化的性能指标是一个严格凸二次函数：$f(x) = \\frac{1}{2} x^{\\top} Q x + c^{\\top} x$，其中 $Q \\in \\mathbb{R}^{n \\times n}$ 是一个满足 $Q \\succ 0$（严格正定）的矩阵，而 $c \\in \\mathbb{R}^n$ 是一个向量。\n- 对 $x$ 的约束是线性的。\n- **第1部分**：一般问题是一个严格凸二次规划 (QP)：\n$$\n\\begin{aligned}\n\\min_{x \\in \\mathbb{R}^n} \\quad  \\frac{1}{2} x^{\\top} Q x + c^{\\top} x \\\\\n\\text{s.t.} \\quad  A x \\leq b, \\\\\n E x = h,\n\\end{aligned}\n$$\n其中 $Q \\succ 0$, $A \\in \\mathbb{R}^{m \\times n}$, $b \\in \\mathbb{R}^m$, $E \\in \\mathbb{R}^{p \\times n}$ 且 $h \\in \\mathbb{R}^p$。\n- **第2部分**：一个针对 $n=2$ 的 $2$ 子系统CPS的特定问题。\n- 约束条件是共享带宽资源 $a^{\\top} x = b$ 和非负性 $x \\geq 0$。\n- 具体参数为：\n$$\nQ = \\begin{bmatrix} 4  2 \\\\ 2  3 \\end{bmatrix}, \n\\qquad\nc = \\begin{bmatrix} -8 \\\\ -5 \\end{bmatrix},\n\\qquad\na = \\begin{bmatrix} 1 \\\\ 1 \\end{bmatrix},\n\\qquad\nb = 5.\n$$\n- 任务是计算等式约束的最优拉格朗日乘子，将其解释为影子价格，并确定最优目标值相对于 $b$ 的边际变化。\n\n### 第2步：使用提取的已知条件进行验证\n1.  **科学基础**：该问题基于凸优化这一成熟领域，特别是二次规划。将其应用于信息物理系统 (CPS) 中的资源分配是此类模型的标准且现实的用例。条件 $Q \\succ 0$ 确保了目标函数是严格凸的，这是保证唯一最小化解的基本属性。对于第2部分中的特定矩阵 $Q = \\begin{bmatrix} 4  2 \\\\ 2  3 \\end{bmatrix}$，其顺序主子式为 $4 > 0$ 和 $\\det(Q) = (4)(3) - (2)(2) = 12 - 4 = 8 > 0$。由于所有顺序主子式均为正，因此 $Q$ 确实是正定的，满足所述条件。\n2.  **适定性**：该问题是适定的。在一个非空、闭合、凸的可行点集上最小化一个严格凸目标函数，存在唯一的全局最小值。第1部分和第2部分中的约束都是线性的，定义了一个凸可行集。第2部分中的可行集 $\\{x \\in \\mathbb{R}^2 \\mid x_1+x_2=5, x_1 \\ge 0, x_2 \\ge 0 \\}$ 是一个非空的紧致线段，确保解存在且唯一。\n3.  **客观性**：问题陈述使用了精确、无歧义的数学语言。没有主观或基于观点的元素。\n4.  **完整性**：问题提供了进行推导和计算所需的所有数据和定义。它是自洽的。\n5.  **其他缺陷**：该问题不存在任何其他列出的无效标准。它不是矛盾的、不切实际的、琐碎的或无法验证的。\n\n### 第3步：结论与行动\n问题有效且适定。我将继续进行求解。\n\n### 第1部分：对偶问题的推导\n\n原始问题是一个凸二次规划，由下式给出：\n$$\n\\begin{aligned}\np^* = \\min_{x \\in \\mathbb{R}^n} \\quad  \\frac{1}{2} x^{\\top} Q x + c^{\\top} x \\\\\n\\text{s.t.} \\quad  A x \\leq b, \\\\\n E x = h.\n\\end{aligned}\n$$\n为了构造拉格朗日函数，我们引入拉格朗日乘子（对偶变量）。令 $\\lambda \\in \\mathbb{R}^m$ 为与 $m$ 个不等式约束 $A x - b \\leq 0$ 相关联的乘子向量，令 $\\nu \\in \\mathbb{R}^p$ 为与 $p$ 个等式约束 $E x - h = 0$ 相关联的乘子向量。按照惯例，形式为 $g(x) \\leq 0$ 的不等式约束的乘子必须是非负的。因此，对偶变量的定义域为 $\\lambda \\geq 0$（逐元素）和 $\\nu \\in \\mathbb{R}^p$。\n\n拉格朗日函数 $L(x, \\lambda, \\nu)$ 定义为：\n$$\nL(x, \\lambda, \\nu) = \\frac{1}{2} x^{\\top} Q x + c^{\\top} x + \\lambda^{\\top}(A x - b) + \\nu^{\\top}(E x - h)\n$$\n我们可以重新排列各项，将包含 $x$ 的项组合在一起：\n$$\nL(x, \\lambda, \\nu) = \\frac{1}{2} x^{\\top} Q x + (c + A^{\\top}\\lambda + E^{\\top}\\nu)^{\\top} x - \\lambda^{\\top}b - \\nu^{\\top}h\n$$\n拉格朗日对偶函数 $g(\\lambda, \\nu)$ 是拉格朗日函数关于原始变量 $x$ 的下确界：\n$$\ng(\\lambda, \\nu) = \\inf_{x \\in \\mathbb{R}^n} L(x, \\lambda, \\nu)\n$$\n对于固定的 $\\lambda$ 和 $\\nu$，$L(x, \\lambda, \\nu)$ 是关于 $x$ 的二次函数。由于 $Q \\succ 0$，该函数关于 $x$ 是严格凸的。其下确界在关于 $x$ 的梯度为零的唯一点处取得：\n$$\n\\nabla_x L(x, \\lambda, \\nu) = Q x + c + A^{\\top}\\lambda + E^{\\top}\\nu = 0\n$$\n求解 $x$，我们得到最小化点 $x^*(\\lambda, \\nu)$：\n$$\nx^*(\\lambda, \\nu) = -Q^{-1}(c + A^{\\top}\\lambda + E^{\\top}\\nu)\n$$\n注意，由于 $Q$ 是正定的，因此它是可逆的。\n\n为了求得对偶函数 $g(\\lambda, \\nu)$，我们将 $x^*$ 代回到 $L(x, \\lambda, \\nu)$ 的表达式中：\n$$\ng(\\lambda, \\nu) = \\frac{1}{2} (x^*)^{\\top} Q x^* + (c + A^{\\top}\\lambda + E^{\\top}\\nu)^{\\top} x^* - \\lambda^{\\top}b - \\nu^{\\top}h\n$$\n根据驻点条件，我们有 $(c + A^{\\top}\\lambda + E^{\\top}\\nu) = -Qx^*$。将其代入第二项可得：\n$$\ng(\\lambda, \\nu) = \\frac{1}{2} (x^*)^{\\top} Q x^* + (-Qx^*)^{\\top} x^* - \\lambda^{\\top}b - \\nu^{\\top}h = \\frac{1}{2} (x^*)^{\\top} Q x^* - (x^*)^{\\top} Q x^* - \\lambda^{\\top}b - \\nu^{\\top}h\n$$\n$$\ng(\\lambda, \\nu) = -\\frac{1}{2} (x^*)^{\\top} Q x^* - \\lambda^{\\top}b - \\nu^{\\top}h\n$$\n现在，我们代入 $x^*$ 的表达式：\n$$\n(x^*)^{\\top} Q x^* = \\left(-Q^{-1}(c + A^{\\top}\\lambda + E^{\\top}\\nu)\\right)^{\\top} Q \\left(-Q^{-1}(c + A^{\\top}\\lambda + E^{\\top}\\nu)\\right)\n$$\n由于 $Q$ 和 $Q^{-1}$ 是对称的，这可以简化为：\n$$\n(x^*)^{\\top} Q x^* = (c + A^{\\top}\\lambda + E^{\\top}\\nu)^{\\top} (Q^{-1})^{\\top} Q Q^{-1} (c + A^{\\top}\\lambda + E^{\\top}\\nu) = (c + A^{\\top}\\lambda + E^{\\top}\\nu)^{\\top} Q^{-1} (c + A^{\\top}\\lambda + E^{\\top}\\nu)\n$$\n因此，拉格朗日对偶函数为：\n$$\ng(\\lambda, \\nu) = -\\frac{1}{2} (c + A^{\\top}\\lambda + E^{\\top}\\nu)^{\\top} Q^{-1} (c + A^{\\top}\\lambda + E^{\\top}\\nu) - b^{\\top}\\lambda - h^{\\top}\\nu\n$$\n对偶问题是在对偶变量的约束下最大化对偶函数：\n$$\n\\begin{aligned}\n\\max_{\\lambda, \\nu} \\quad  g(\\lambda, \\nu) \\\\\n\\text{s.t.} \\quad  \\lambda \\geq 0.\n\\end{aligned}\n$$\n对偶变量的定义域要求对于每个 $i=1, \\dots, m$，$\\lambda_i \\geq 0$，而变量 $\\nu_j$（对于 $j=1, \\dots, p$）是自由的（符号无约束）。\n\n对偶变量的经济解释是影子价格。在一个问题中，如果 $b$ 代表资源限制，$h$ 代表性能目标，则最优对偶变量 $(\\lambda^*, \\nu^*)$ 量化了最优目标值 $p^*$ 对这些约束扰动的敏感度。根据包络定理，在最优点，我们有 $\\frac{\\partial p^*}{\\partial b_i} = -\\lambda_i^*$ 和 $\\frac{\\partial p^*}{\\partial h_j} = -\\nu_j^*$。因此，$\\lambda_i^*$ 是当第 $i$ 个资源限制 $b_i$ 增加时，最优成本*下降*的边际率。$\\lambda_i^*>0$ 的值表示第 $i$ 个约束是活跃且稀缺的，增加供给 $b_i$ 将会改善目标值。类似地，$-\\nu_j^*$ 是当第 $j$ 个目标 $h_j$ 增加时，成本变化的边际率。\n\n### 第2部分：具体计算与解释\n\n我们得到以下具体问题：\n$$\n\\begin{aligned}\n\\min_{x \\in \\mathbb{R}^2} \\quad  f(x) = \\frac{1}{2} x^{\\top} \\begin{bmatrix} 4  2 \\\\ 2  3 \\end{bmatrix} x + \\begin{bmatrix} -8 \\\\ -5 \\end{bmatrix}^{\\top} x \\\\\n\\text{s.t.} \\quad  x_1 + x_2 = 5, \\\\\n x_1 \\geq 0, \\quad x_2 \\geq 0.\n\\end{aligned}\n$$\n约束可以写为 $x_1+x_2-5=0$, $-x_1 \\le 0$ 和 $-x_2 \\le 0$。我们为等式约束引入拉格朗日乘子 $\\nu$，为非负性约束引入乘子 $\\mu_1, \\mu_2$。拉格朗日函数是：\n$$\nL(x_1, x_2, \\mu_1, \\mu_2, \\nu) = \\frac{1}{2}(4x_1^2 + 4x_1x_2 + 3x_2^2) - 8x_1 - 5x_2 - \\mu_1 x_1 - \\mu_2 x_2 + \\nu(x_1+x_2-5)\n$$\n最优解 $(x^*, \\mu^*, \\nu^*)$ 的 Karush-Kuhn-Tucker (KKT) 条件是：\n1.  **驻点性**：$\\nabla_x L = 0$\n    $$ \\frac{\\partial L}{\\partial x_1} = 4x_1 + 2x_2 - 8 - \\mu_1 + \\nu = 0 $$\n    $$ \\frac{\\partial L}{\\partial x_2} = 2x_1 + 3x_2 - 5 - \\mu_2 + \\nu = 0 $$\n2.  **原始可行性**：\n    $$ x_1 + x_2 = 5 $$\n    $$ x_1 \\geq 0, \\quad x_2 \\geq 0 $$\n3.  **对偶可行性**：\n    $$ \\mu_1 \\geq 0, \\quad \\mu_2 \\geq 0 $$\n4.  **互补松弛性**：\n    $$ \\mu_1 x_1 = 0, \\quad \\mu_2 x_2 = 0 $$\n\n我们求解这个系统。互补松弛性条件建议根据哪些非负性约束是活跃的来分情况分析。让我们假设最优解位于 $x$ 的可行域内部，即 $x_1 > 0$ 且 $x_2 > 0$。\n\n情况1：$x_1 > 0$ 且 $x_2 > 0$。\n根据互补松弛性，我们必须有 $\\mu_1 = 0$ 和 $\\mu_2 = 0$。驻点性条件简化为：\n(1) $4x_1 + 2x_2 + \\nu = 8$\n(2) $2x_1 + 3x_2 + \\nu = 5$\n我们还有原始可行性条件：\n(3) $x_1 + x_2 = 5$\n\n方程 (1) 减去方程 (2) 消去 $\\nu$：\n$(4x_1 - 2x_1) + (2x_2 - 3x_2) = 8 - 5 \\implies 2x_1 - x_2 = 3$。\n我们现在得到一个关于 $x_1$ 和 $x_2$ 的二元线性方程组：\n$$ 2x_1 - x_2 = 3 $$\n$$ x_1 + x_2 = 5 $$\n将这两个方程相加得到 $3x_1 = 8$，所以 $x_1 = \\frac{8}{3}$。\n代回到 $x_1 + x_2 = 5$ 中得到 $x_2 = 5 - \\frac{8}{3} = \\frac{15-8}{3} = \\frac{7}{3}$。\n我们必须验证我们的初始假设：$x_1 = \\frac{8}{3} > 0$ 且 $x_2 = \\frac{7}{3} > 0$。该假设是一致的。\n现在我们使用方程 (2) 来求 $\\nu$ 的值：\n$2(\\frac{8}{3}) + 3(\\frac{7}{3}) + \\nu = 5$\n$\\frac{16}{3} + \\frac{21}{3} + \\nu = 5$\n$\\frac{37}{3} + \\nu = 5 \\implies \\nu = 5 - \\frac{37}{3} = \\frac{15-37}{3} = -\\frac{22}{3}$。\n\n候选解是 $x^* = (\\frac{8}{3}, \\frac{7}{3})$，$\\mu^* = (0, 0)$，$\\nu^* = -\\frac{22}{3}$。所有 KKT 条件都满足：原始可行性 ($x_1+x_2 = \\frac{15}{3} = 5$, $x_1,x_2 > 0$)、对偶可行性 ($\\mu_1, \\mu_2 \\geq 0$) 和互补松弛性均成立。由于问题是严格凸的，这是唯一的全局最优解。\n\n与等式约束 $a^{\\top}x = b$ 相关的最优拉格朗日乘子是 $\\nu^* = -\\frac{22}{3}$。\n在CPS的背景下，约束 $x_1 + x_2 = 5$ 代表总共享带宽为 $5$ 个单位。变量 $x_1$ 和 $x_2$ 是分配给两个子系统的带宽。乘子 $\\nu^*$ 是与此资源约束相关的影子价格。\n根据第1部分推导的包络定理的解释，最优成本 $p^*(b)$ 相对于资源限制 $b$ 的导数由 $\\frac{dp^*}{db} = -\\nu^*$ 给出。\n在 $b=5$ 时，最优目标值相对于 $b$ 的边际变化是：\n$$ -\\nu^* = - \\left(-\\frac{22}{3}\\right) = \\frac{22}{3} $$\n这个值代表了增加共享带宽的边际效益。总带宽增加一个单位，将导致可达到的最低性能成本下降 $\\frac{22}{3}$ 个成本单位。因此，带宽资源的边际价值（或影子价格）是每单位带宽 $\\frac{22}{3}$ 个成本单位。所要求的量就是这个边际变化。",
            "answer": "$$\n\\boxed{\\frac{22}{3}}\n$$"
        },
        {
            "introduction": "现实世界中的决策很少只取决于单一目标；更多时候，我们必须在相互竞争的目标（如性能和效率）之间进行权衡。本练习旨在应对多目标优化的挑战，演示如何使用加权和标量化方法系统地处理不同标准之间的权衡。你将探索帕累托最优的基本概念，并发现当可行结果集为非凸时，这种常用技术的局限性。",
            "id": "4235973",
            "problem": "一个信息物理系统（CPS）的数字孪生（DT）被用于支持一个制造单元的规定性决策，该制造单元可以在多种控制策略下运行。该DT持续为每种策略估计两个相互竞争的运营绩效结果：单位平均能耗，记为 $f_{1}(x)$，单位为 $\\mathrm{kJ}$；以及平均周期时间与目标的偏差，记为 $f_{2}(x)$，单位为 $\\mathrm{s}$。决策者寻求同时最小化这两个目标。\n\n从多目标最小化问题中帕累托支配和帕累托最优的核心定义出发，并假设决策者对向量值成本进行标量化时遵循以下基本原则：\n- 关于每个目标的单调性（如果所有目标值都弱改进，且至少一个严格改进，则标量化值也严格改进），\n- 关于目标量值缩放的正齐次性，\n- 对于可分离目标的可加性，\n\n推导出一个标量目标 $g(x)$，该目标能导出一个与帕累托改进一致的决策全预序。然后，利用目标空间中可达目标集的凸分析，建立当帕累托前沿为凸时，最小化 $g(x)$ 能产生帕累托最优解的条件，并解释当帕累托前沿为非凸时出现的局限性。\n\n该DT评估了三种离散的控制策略 $x_{A}$、$x_{B}$ 和 $x_{C}$，得到如下的二维目标向量：\n- $f(x_{A}) = (10\\,\\mathrm{kJ},\\, 6\\,\\mathrm{s})$，\n- $f(x_{B}) = (12\\,\\mathrm{kJ},\\, 5.3\\,\\mathrm{s})$，\n- $f(x_{C}) = (14\\,\\mathrm{kJ},\\, 3.8\\,\\mathrm{s})$。\n\n假设您推导的标量化方法有一个双目标特例，其中单个权重 $w \\in (0,1)$ 以符合上述原则的方式调节 $f_{1}(x)$ 与 $f_{2}(x)$ 的相对重要性。确定唯一的 $w^{\\star} \\in (0,1)$ 值，在该值下，决策 $x_{A}$ 和 $x_{C}$ 在标量化后完全相等。基于此分析以及可达目标集的几何结构，论证当帕累托前沿为非凸时，$x_{B}$ 是否可以被任何 $w \\in (0,1)$ 选中。\n\n将 $w^{\\star}$ 的最终值表示为最简分数。无需四舍五入，且 $w^{\\star}$ 不应包含单位。",
            "solution": "该决策问题涉及两个待最小化的目标 $f_{1}(x)$ 和 $f_{2}(x)$，其向量目标为 $\\mathbf{f}(x) = \\big(f_{1}(x), f_{2}(x)\\big)$。如果 $\\mathbf{f}(x) \\le \\mathbf{f}(y)$ 逐分量成立，且至少有一个不等式是严格的，则称决策 $x$ 帕累托支配 $y$。如果没有其他决策能支配某个决策，则该决策是帕累托最优的。\n\n我们寻求一个标量化函数 $g(x)$，它将 $\\mathbf{f}(x)$ 映射为一个标量，并与决策者的原则保持一致：\n- 单调性：如果 $\\mathbf{z}, \\mathbf{z}' \\in \\mathbb{R}^{m}$ 满足 $\\mathbf{z} \\le \\mathbf{z}'$ 逐分量成立，且对于某个 $i$ 有 $z_{i}  z'_{i}$，则 $g(\\mathbf{z})  g(\\mathbf{z}')$。\n- 正齐次性：对于 $\\alpha \\ge 0$，有 $g(\\alpha \\mathbf{z}) = \\alpha g(\\mathbf{z})$。\n- 对于可分离目标的可加性：对于 $\\mathbf{z}, \\mathbf{z}' \\in \\mathbb{R}^{m}$，有 $g(\\mathbf{z} + \\mathbf{z}') = g(\\mathbf{z}) + g(\\mathbf{z}')$。\n\n假设在各分量上可分离，设 $g(\\mathbf{z}) = \\sum_{i=1}^{m} h_{i}(z_{i})$。可加性与正齐次性共同约束每个 $h_{i}$ 为一个线性函数：对于所有 $u, v \\in \\mathbb{R}$ 和 $\\alpha \\ge 0$，有 $h_{i}(u+v) = h_{i}(u) + h_{i}(v)$ 和 $h_{i}(\\alpha u) = \\alpha h_{i}(u)$，而单调性要求 $h_{i}$ 是严格递增的。唯一满足这些性质以及连续性（工程系统中决策支持的一个标准正则性假设）的函数是 $h_{i}(z_{i}) = w_{i} z_{i}$，其中权重 $w_{i} > 0$。因此，\n$$\ng(\\mathbf{f}(x)) \\;=\\; \\sum_{i=1}^{m} w_{i} f_{i}(x),\n$$\n其中 $w_{i} > 0$ 编码了决策者的相对侧重。由于 $w_{i}$ 的正性，这种标量化方法对于帕累托支配是保序的：如果 $\\mathbf{f}(x) \\le \\mathbf{f}(y)$ 且至少有一个不等式是严格的，则 $g(\\mathbf{f}(x))  g(\\mathbf{f}(y))$。\n\n当可达目标集 $\\mathcal{Y} = \\{\\mathbf{f}(x) : x \\in \\mathcal{X}\\} \\subset \\mathbb{R}^{m}$ 是凸集时，我们考虑在 $\\mathbf{y} \\in \\mathcal{Y}$ 上用 $w_{i} > 0$ 最小化 $g(\\mathbf{y})$，其最小化点是帕累托最优的，因为任何分量的严格改进都会减小标量化值。此外，根据凸分析中的支撑超平面定理，$\\mathcal{Y}$ 的凸下边界上的每个帕累托最优点都容许一个具有正法向量 $\\mathbf{w} \\in \\mathbb{R}^{m}_{++}$ 的支撑超平面，使得该点在 $\\mathcal{Y}$ 上最小化 $\\mathbf{w}^{\\top} \\mathbf{y}$。因此，在凸环境下，加权和标量化可以找到所有的帕累托最优点。\n\n相反，当帕累托前沿为非凸时，存在一些无法由任何具有正法向量的超平面支撑的帕累托最优点；这些点被称为不被支持的帕累托点。对于任何正权重选择，使用 $\\sum_{i} w_{i} f_{i}(x)$ 的线性标量化都无法选择这些点，这是一个根本性的局限。\n\n现在我们将其特化到两个目标和给定的三个策略。设 $w \\in (0,1)$ 是 $f_{1}(x)$ 的权重，$1-w$ 是 $f_{2}(x)$ 的权重。标量化目标为\n$$\ng_{w}(x) \\;=\\; w f_{1}(x) + (1-w) f_{2}(x).\n$$\n计算每种策略的标量化值：\n- 对于策略 $x_{A}$，其 $f(x_{A}) = (10, 6)$:\n$$\ng_{w}(x_{A}) \\;=\\; w \\cdot 10 + (1-w) \\cdot 6 \\;=\\; 6 + 4w.\n$$\n- 对于策略 $x_{B}$，其 $f(x_{B}) = (12, 5.3)$:\n$$\ng_{w}(x_{B}) \\;=\\; w \\cdot 12 + (1-w) \\cdot 5.3 \\;=\\; 5.3 + 6.7w.\n$$\n- 对于策略 $x_{C}$，其 $f(x_{C}) = (14, 3.8)$:\n$$\ng_{w}(x_{C}) \\;=\\; w \\cdot 14 + (1-w) \\cdot 3.8 \\;=\\; 3.8 + 10.2w.\n$$\n\n确定唯一的 $w^{\\star} \\in (0,1)$，使得 $g_{w^{\\star}}(x_{A}) = g_{w^{\\star}}(x_{C})$：\n$$\n6 + 4w^{\\star} \\;=\\; 3.8 + 10.2 w^{\\star}\n\\;\\;\\Longrightarrow\\;\\;\n6 - 3.8 \\;=\\; (10.2 - 4) w^{\\star}\n\\;\\;\\Longrightarrow\\;\\;\n2.2 \\;=\\; 6.2\\, w^{\\star}\n\\;\\;\\Longrightarrow\\;\\;\nw^{\\star} \\;=\\; \\frac{2.2}{6.2} \\;=\\; \\frac{11}{31}.\n$$\n\n为了分析 $x_{B}$ 是否可能对任何 $w \\in (0,1)$ 是最优的，我们将 $g_{w}(x_{B})$ 与 $g_{w}(x_{A})$ 和 $g_{w}(x_{C})$ 进行比较：\n- 比较 $x_{B}$ 与 $x_{A}$：\n$$\ng_{w}(x_{B}) - g_{w}(x_{A})\n\\;=\\; (5.3 + 6.7w) - (6 + 4w)\n\\;=\\; -0.7 + 2.7w.\n$$\n当 $w \\ge \\frac{0.7}{2.7} = \\frac{7}{27} \\approx 0.259259$ 时，该值为非负，因此对于 $w \\ge \\frac{7}{27}$，在标量化下 $x_{B}$ 比 $x_{A}$ 差或相等。\n- 比较 $x_{B}$ 与 $x_{C}$：\n$$\ng_{w}(x_{B}) - g_{w}(x_{C})\n\\;=\\; (5.3 + 6.7w) - (3.8 + 10.2w)\n\\;=\\; 1.5 - 3.5w.\n$$\n当 $w \\le \\frac{1.5}{3.5} = \\frac{3}{7} \\approx 0.428571$ 时，该值为非负，因此对于 $w \\le \\frac{3}{7}$，在标量化下 $x_{B}$ 比 $x_{C}$ 差或相等。\n\n综合这些，对于 $w \\in (0, \\frac{7}{27})$，$x_{C}$ 严格优于 $x_{B}$；对于 $w \\in [\\frac{7}{27}, \\frac{3}{7}]$，$x_{B}$ 比 $x_{A}$ 和 $x_{C}$ 都差；对于 $w \\in (\\frac{3}{7}, 1)$，$x_{A}$ 严格优于 $x_{B}$。因此，对于任何 $w \\in (0,1)$，$x_{B}$ 都不是最优的。\n\n从几何上看，可达的目标点是 $\\{(10,6), (12,5.3), (14,3.8)\\}$。由于在最小化问题的目标空间中，点 $(12,5.3)$ 严格位于连接 $(10,6)$ 和 $(14,3.8)$ 的线段之上，因此它是一个不被支持的帕累托点。线性标量化对应于移动一条法向量为 $(w, 1-w)$ 的直线，使其接触到下凸包；只有被支持的极值点 $(10,6)$ 和 $(14,3.8)$ 会被选中。这说明了当帕累托前沿非凸时，加权和标量化方法的局限性。\n\n因此，唯一的使结果相等的权重是 $w^{\\star} = \\frac{11}{31}$，并且在所推导的标量化方法下，$x_{B}$ 对于任何 $w \\in (0,1)$ 都不是最优的。",
            "answer": "$$\\boxed{\\frac{11}{31}}$$"
        },
        {
            "introduction": "高效的规定性分析必须考虑操作环境中的不确定性，例如处理时间的变化或需求的波动。本练习介绍了鲁棒优化，这是一个强大的框架，用于制定能够抵御此类不确定性的决策。你将构建一个在预算不确定性模型下最小化最坏情况总完工时间的调度问题，并在此过程中分析关键的“鲁棒性代价”——即名义性能与抵御不确定性的稳健性之间不可避免的权衡。",
            "id": "4235993",
            "problem": "一个用于信息物理系统的数字孪生中的单机调度模块，必须对处理时间不确定的作业进行排序。规定性分析的要求是，使用预算不确定性模型计算一个对有界不确定性具有鲁棒性的调度，并量化鲁棒性与标称性能之间的权衡。考虑一组 $n$ 个独立的作业，在一台机器上进行非抢占式处理。设作业 $i$ 的标称处理时间为 $\\bar{p}_i \\ge 0$，处理时间不确定性界为 $\\hat{d}_i \\ge 0$。实际处理时间为 $p_i = \\bar{p}_i + \\hat{d}_i \\xi_i$，其中不确定性向量 $\\xi \\in \\mathbb{R}^n$ 满足对所有 $i$ 都有 $0 \\le \\xi_i \\le 1$，且对于给定的不确定性预算 $\\Gamma \\ge 0$，有 $\\sum_{i=1}^n \\xi_i \\le \\Gamma$。目标是在不确定性集合上最小化最坏情况下的总完工时间，并满足有效分配的约束（每个作业只出现一次，且每个位置只由一个作业填充）。所有建模假设必须遵循标准的单机调度定义（无抢占、确定性排序、以及完工时间由沿序列的累积处理定义）。您必须从完工时间和预算不确定性集合的基本定义出发，得到一个可作为混合整数优化问题求解的鲁棒规划模型。\n\n任务：\n1) 从完工时间和预算不确定性集合的基本定义出发，针对指定的不确定性模型，为总完工时间目标建立最小-最大鲁棒优化问题。然后，通过对内层最大化问题进行标准对偶化，推导出一个不含最大化算子的等价鲁棒混合整数线性优化模型。\n2) 对于任意固定序列，用一种无需解混合整数优化问题即可在多项式时间内计算的方法，表示预算不确定性下的最坏情况总完工时间。利用预算不确定性集合的结构以及目标函数关于处理时间的线性性来证明您表达式的正确性。\n3) 实现一个算法，在给定少量作业的情况下，枚举所有可行序列，并计算指定 $\\Gamma$ 下的鲁棒最优值以及 $\\Gamma = 0$ 时的标称最优值。将鲁棒性代价定义为 $\\text{PoR}(\\Gamma) = V_{\\text{robust}}(\\Gamma) / V_{\\text{nominal}}(0)$，其中 $V_{\\text{robust}}(\\Gamma)$ 是最优的鲁棒最坏情况总完工时间，$V_{\\text{nominal}}(0)$ 是没有不确定性时的最优总完工时间。使用该算法解决下面的测试套件。\n\n测试套件（每个测试用例由 $(\\bar{p}, \\hat{d}, \\Gamma)$ 指定）：\n- 测试 1：$n = 5$, $\\bar{p} = [3, 6, 2, 7, 4]$, $\\hat{d} = [1, 2, 1, 3, 2]$, $\\Gamma = 1.5$。\n- 测试 2：$n = 5$, $\\bar{p} = [3, 6, 2, 7, 4]$, $\\hat{d} = [1, 2, 1, 3, 2]$, $\\Gamma = 0$。\n- 测试 3：$n = 5$, $\\bar{p} = [3, 6, 2, 7, 4]$, $\\hat{d} = [1, 2, 1, 3, 2]$, $\\Gamma = 5$。\n- 测试 4：$n = 4$, $\\bar{p} = [5, 5, 5, 5]$, $\\hat{d} = [0, 1, 0, 2]$, $\\Gamma = 2$。\n- 测试 5：$n = 3$, $\\bar{p} = [2, 9, 4]$, $\\hat{d} = [5, 1, 0]$, $\\Gamma = 0.7$。\n\n输出规范：\n- 对于每个测试用例，计算数对 $[V_{\\star}, \\text{PoR}]$，其中 $V_{\\star}$ 是指定 $\\Gamma$ 下的最优鲁棒最坏情况总完工时间，$\\text{PoR}$ 是如上定义的鲁棒性代价。$V_{\\star}$ 和 $\\text{PoR}$ 都必须以实数（浮点数）形式输出。\n- 您的程序应生成单行输出，其中包含所有测试用例的结果，格式为一个用方括号括起来的逗号分隔列表，其中每个测试用例的结果本身是一个双元素列表。例如，包含两个测试用例的输出看起来像 $[[v_1, r_1],[v_2, r_2]]$。\n- 将所有实数四舍五入到六位小数。不涉及物理单位。不使用角度。不要将任何数字表示为百分比；如果需要分数，请以小数形式输出。",
            "solution": "该问题具有科学依据、适定、客观且内部一致。它提出了鲁棒调度理论中的一个标准问题，具体是在预算不确定性下最小化单机上的最坏情况总完工时间。所提供的参数和约束是完整且足以推导出解决方案的。这些任务指导了从第一性原理到算法实现的原则性推导，这对于此类性质的问题是合适的。因此，该问题被认为是有效的。\n\n解决方案按要求分三部分进行。首先，我们推导混合整数线性规划（MILP）模型。其次，我们为评估固定序列的最坏情况目标开发一个多项式时间算法。第三，我们描述通过枚举解决问题实例的实现策略。\n\n### 第1部分：鲁棒混合整数优化模型\n\n设作业集合为 $\\mathcal{N} = \\{1, 2, \\dots, n\\}$。一个调度是这些作业的一个排列。我们引入二元决策变量 $x_{ij}$，如果作业 $i \\in \\mathcal{N}$ 被安排在位置 $j \\in \\{1, \\dots, n\\}$，则 $x_{ij} = 1$，否则 $x_{ij} = 0$。确保 $x$ 代表一个有效排列的约束是：\n$$ \\sum_{i=1}^n x_{ij} = 1 \\quad \\forall j \\in \\{1, \\dots, n\\} $$\n$$ \\sum_{j=1}^n x_{ij} = 1 \\quad \\forall i \\in \\mathcal{N} $$\n$$ x_{ij} \\in \\{0, 1\\} \\quad \\forall i \\in \\mathcal{N}, j \\in \\{1, \\dots, n\\} $$\n\n作业 $i$ 的处理时间由 $p_i = \\bar{p}_i + \\hat{d}_i \\xi_i$ 给出，其中不确定性向量 $\\xi = (\\xi_1, \\dots, \\xi_n)$ 属于不确定性集合 $U$：\n$$ U = \\left\\{ \\xi \\in \\mathbb{R}^n \\mid \\sum_{i=1}^n \\xi_i \\le \\Gamma, 0 \\le \\xi_i \\le 1, \\forall i \\in \\mathcal{N} \\right\\} $$\n\n对于一个给定的序列，总完工时间 $\\sum_{k=1}^n C_k$ 可以表示为处理时间的加权和。如果作业 $i$ 位于位置 $j$，其处理时间 $p_i$ 会对其自身的完工时间以及其后 $n-j$ 个作业的完工时间产生贡献。因此，$p_i$ 被加了 $n-j+1$ 次。作业 $i$ 的位置可以写为 $\\sum_{j=1}^n j \\cdot x_{ij}$。因此，总完工时间是：\n$$ \\sum C_k = \\sum_{i=1}^n \\left(n - \\left(\\sum_{j=1}^n j \\cdot x_{ij}\\right) + 1\\right) p_i $$\n\n代入 $p_i$ 的表达式，我们得到：\n$$ \\sum C_k = \\sum_{i=1}^n \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) (\\bar{p}_i + \\hat{d}_i \\xi_i) $$\n$$ = \\sum_{i=1}^n \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) \\bar{p}_i + \\sum_{i=1}^n \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) \\hat{d}_i \\xi_i $$\n\n目标是找到一个调度（一个分配 $x$），在 $\\xi \\in U$ 的所有可能实现中，最小化最坏情况下的总完工时间。这引出了最小-最大模型：\n$$ \\min_{x} \\left\\{ \\sum_{i=1}^n \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) \\bar{p}_i + \\max_{\\xi \\in U} \\left\\{ \\sum_{i=1}^n \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) \\hat{d}_i \\xi_i \\right\\} \\right\\} $$\n\n对于固定的 $x$，内层最大化问题是一个线性规划：\n$$\n\\begin{array}{lll}\n\\text{(Primal)}  \\max_{\\xi}  \\sum_{i=1}^n c_i(x) \\xi_i \\\\\n \\text{s.t.}  \\sum_{i=1}^n \\xi_i \\le \\Gamma \\\\\n \\xi_i \\le 1, \\quad \\forall i \\in \\mathcal{N} \\\\\n \\xi_i \\ge 0, \\quad \\forall i \\in \\mathcal{N}\n\\end{array}\n$$\n其中 $c_i(x) = (n+1 - \\sum_{j=1}^n j x_{ij}) \\hat{d}_i$。我们可以对这个LP进行对偶化。设 $\\theta \\ge 0$ 是预算约束 $\\sum \\xi_i \\le \\Gamma$ 的对偶变量，$\\lambda_i \\ge 0$ 是箱式约束 $\\xi_i \\le 1$ 的对偶变量。对偶问题是：\n$$\n\\begin{array}{lll}\n\\text{(Dual)}  \\min_{\\theta, \\lambda}  \\Gamma \\theta + \\sum_{i=1}^n \\lambda_i \\\\\n \\text{s.t.}  \\theta + \\lambda_i \\ge c_i(x), \\quad \\forall i \\in \\mathcal{N} \\\\\n \\theta \\ge 0, \\lambda_i \\ge 0, \\quad \\forall i \\in \\mathcal{N}\n\\end{array}\n$$\n\n根据强对偶性，原问题和对偶问题的最优值相等。我们可以用这个对偶最小化问题替换最小-最大模型中的内层最大化。这会得到一个单层最小化问题：\n$$ \\min_{x, \\theta, \\lambda} \\left\\{ \\sum_{i=1}^n \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) \\bar{p}_i + \\Gamma \\theta + \\sum_{i=1}^n \\lambda_i \\right\\} $$\n该问题受对偶约束、$x$ 的分配约束以及对偶变量的非负性约束。约束 $\\theta + \\lambda_i \\ge c_i(x)$ 可以写为：\n$$ \\theta + \\lambda_i \\ge \\left(n+1 - \\sum_{j=1}^n j x_{ij}\\right) \\hat{d}_i $$\n这对于 $x_{ij}$ 是线性的。目标函数对其所有变量也是线性的。因此，我们得到以下混合整数线性规划：\n$$\n\\begin{array}{lll}\n\\min  \\sum_{i=1}^n \\sum_{j=1}^n (n+1-j) \\bar{p}_i x_{ij} + \\Gamma \\theta + \\sum_{i=1}^n \\lambda_i \\\\\n\\text{s.t.}  \\theta + \\lambda_i \\ge (n+1)\\hat{d}_i - \\sum_{j=1}^n j \\hat{d}_i x_{ij},  \\forall i \\in \\mathcal{N} \\\\\n \\sum_{i=1}^n x_{ij} = 1,  \\forall j \\in \\{1, \\dots, n\\} \\\\\n \\sum_{j=1}^n x_{ij} = 1,  \\forall i \\in \\mathcal{N} \\\\\n x_{ij} \\in \\{0, 1\\},  \\forall i \\in \\mathcal{N}, j \\in \\{1, \\dots, n\\} \\\\\n \\theta \\ge 0, \\lambda_i \\ge 0,  \\forall i \\in \\mathcal{N}\n\\end{array}\n$$\n在目标函数中，我们使用了恒等式 $\\sum_{i=1}^n (n+1 - \\sum_j j x_{ij}) \\bar{p}_i = \\sum_{i=1}^n \\sum_{j=1}^n (n+1-j) \\bar{p}_i x_{ij}$。这就是所要求的MILP模型。\n\n### 第2部分：固定序列的多项式时间算法\n\n对于一个固定的序列 $\\pi$，每个作业 $i$ 的位置，记为 $pos_\\pi(i)$，是固定的。最坏情况下的总完工时间为：\n$$ WCT(\\pi) = \\sum_{i=1}^n (n+1-pos_\\pi(i))\\bar{p}_i + \\max_{\\xi \\in U} \\left\\{ \\sum_{i=1}^n (n+1-pos_\\pi(i))\\hat{d}_i \\xi_i \\right\\} $$\n令 $w_i = (n+1-pos_\\pi(i))\\hat{d}_i$。对于给定的 $\\pi$，这些是固定系数。内层最大化问题是一个连续背包问题：\n$$ \\max \\sum_{i=1}^n w_i \\xi_i \\quad \\text{s.t.} \\quad \\sum_{i=1}^n \\xi_i \\le \\Gamma, \\quad 0 \\le \\xi_i \\le 1 \\quad \\forall i $$\n这个线性规划的最优解可以通过贪心算法找到。增加每个 $\\xi_i$ 的“价值”是 $w_i$，而就预算 $\\Gamma$ 而言的“成本”是 1。该算法按其对应系数 $w_i$ 的降序对作业进行排序。设排序后的索引为 $k_1, k_2, \\dots, k_n$，使得 $w_{k_1} \\ge w_{k_2} \\ge \\dots \\ge w_{k_n}$。然后算法按此顺序将预算 $\\Gamma$ 分配给 $\\xi_i$ 变量。\n具体来说，设 $\\gamma = \\Gamma$ 为剩余预算。对于 $j = 1, \\dots, n$：\n1. 令 $i = k_j$。\n2. $\\xi_i$ 的最优值为 $\\xi_i^* = \\min(1, \\gamma)$。\n3. 更新预算：$\\gamma \\leftarrow \\gamma - \\xi_i^*$。\n\n如果 $\\Gamma$ 不是整数，比如说 $\\Gamma = K + f$，其中 $K = \\lfloor \\Gamma \\rfloor$ 且 $f \\in (0,1)$，这对应于对 $j=1, \\dots, K$ 设置 $\\xi_{k_j}^*=1$，$\\xi_{k_{K+1}}^* = f$，以及对 $j > K+1$ 设置 $\\xi_{k_j}^*=0$。\n这个过程的总复杂度由排序步骤主导，为 $O(n \\log n)$，因此它是一个多项式时间算法。\n\n### 第3部分：通过枚举的算法实现\n\n对于测试套件中给出的较小 $n$ 值（$n \\le 5$），可行序列的总数 $n!$ 很小（$5! = 120$）。我们可以通过枚举所有可能的序列，并对每个序列使用第2部分中的多项式时间算法计算其最坏情况下的总完工时间，来找到精确的鲁棒最优调度。具有最小最坏情况总完工时间的序列就是鲁棒最优解。\n\n该算法流程如下：\n1.  **计算标称最优值 $V_{\\text{nominal}}(0)$**：标称问题（其中所有 $p_i = \\bar{p}_i$）的最优调度由最短处理时间（SPT）规则给出。按作业的标称处理时间 $\\bar{p}_i$ 的非递减顺序排序。计算此序列的总完工时间。该值即为 $V_{\\text{nominal}}(0)$。\n2.  **计算鲁棒最优值 $V_{\\text{robust}}(\\Gamma)$**：\n    a. 将变量 `min_worst_case_tct` 初始化为一个非常大的数。\n    b. 生成作业 $\\{1, ..., n\\}$ 的每个排列 $\\pi$。\n    c. 对于每个排列 $\\pi$：\n        i. 计算总完工时间的标称部分：$\\sum_{i=1}^n (n+1-pos_\\pi(i))\\bar{p}_i$。\n        ii. 计算不确定性项的系数：$w_i = (n+1-pos_\\pi(i))\\hat{d}_i$，对所有 $i \\in \\mathcal{N}$。\n        iii. 使用第2部分中描述的贪心算法计算由不确定性引起的最大偏差 $\\max \\sum w_i\\xi_i$。\n        iv. 序列 $\\pi$ 的最坏情况总完工时间是标称部分与最大偏差之和。\n        v. 更新 `min_worst_case_tct = min(min_worst_case_tct, current_worst_case_tct)`。\n    d. `min_worst_case_tct` 的最终值即为 $V_{\\text{robust}}(\\Gamma)$。\n3.  **计算鲁棒性代价（PoR）**：计算 $\\text{PoR}(\\Gamma) = V_{\\text{robust}}(\\Gamma) / V_{\\text{nominal}}(0)$。如果 $V_{\\text{nominal}}(0) = 0$，则当 $V_{\\text{robust}}(\\Gamma)=0$ 时 PoR 取 1.0，否则取无穷大。对于给定的问题，$V_{\\text{nominal}}(0)>0$。\n\n此过程被实现用于解决所提供的测试套件。",
            "answer": "```python\nimport numpy as np\nimport itertools\n\ndef solve():\n    \"\"\"\n    Solves the robust single-machine scheduling problem for a given test suite.\n    \"\"\"\n    test_cases = [\n        {'p_bar': [3, 6, 2, 7, 4], 'd_hat': [1, 2, 1, 3, 2], 'Gamma': 1.5},\n        {'p_bar': [3, 6, 2, 7, 4], 'd_hat': [1, 2, 1, 3, 2], 'Gamma': 0},\n        {'p_bar': [3, 6, 2, 7, 4], 'd_hat': [1, 2, 1, 3, 2], 'Gamma': 5},\n        {'p_bar': [5, 5, 5, 5], 'd_hat': [0, 1, 0, 2], 'Gamma': 2},\n        {'p_bar': [2, 9, 4], 'd_hat': [5, 1, 0], 'Gamma': 0.7}\n    ]\n\n    results = []\n    for case in test_cases:\n        p_bar = np.array(case['p_bar'])\n        d_hat = np.array(case['d_hat'])\n        gamma = float(case['Gamma'])\n        n = len(p_bar)\n        job_indices = list(range(n))\n\n        # --- Part 1: Calculate V_nominal(0) ---\n        # Optimal nominal policy is Shortest Processing Time (SPT)\n        spt_jobs_with_p = sorted(zip(job_indices, p_bar), key=lambda x: x[1])\n        spt_sequence = [job_idx for job_idx, p_val in spt_jobs_with_p]\n        \n        # Calculate nominal TCT using the SPT sequence\n        v_nominal_0 = 0.0\n        current_completion_time = 0.0\n        for job_idx in spt_sequence:\n            current_completion_time += p_bar[job_idx]\n            v_nominal_0 += current_completion_time\n        \n        if v_nominal_0 == 0:\n            # Handle trivial case to avoid division by zero\n            # If nominal cost is zero, any robust cost > 0 would be infinitely worse\n            # If robust cost is also zero, a PoR of 1.0 is reasonable.\n            # However, for the given instances, v_nominal_0 > 0.\n            pass\n\n        # --- Part 2: Calculate V_robust(Gamma) by enumeration ---\n        min_worst_case_tct = float('inf')\n        \n        all_permutations = itertools.permutations(job_indices)\n        \n        for seq in all_permutations:\n            # For a given sequence `seq`, calculate its worst-case TCT\n            positions = {job_idx: pos for pos, job_idx in enumerate(seq)}\n            \n            nominal_tct_part = 0.0\n            uncertainty_coeffs = [] # Stores pairs of (w_i, job_idx)\n            \n            for i in job_indices:\n                # Position is 1-based, index is 0-based\n                pos_of_i = positions[i] + 1\n                tct_coeff = n - pos_of_i + 1\n                \n                nominal_tct_part += tct_coeff * p_bar[i]\n                \n                w_i = tct_coeff * d_hat[i]\n                uncertainty_coeffs.append((w_i, i))\n\n            # Sort jobs by descending uncertainty coefficient w_i\n            uncertainty_coeffs.sort(key=lambda x: x[0], reverse=True)\n            \n            # --- Solve continuous knapsack for max deviation ---\n            max_deviation = 0.0\n            gamma_rem = gamma\n            \n            for w_val, job_idx in uncertainty_coeffs:\n                if gamma_rem  1e-9: # Effectively zero\n                    break\n                \n                # Greedily assign xi\n                xi_val = min(1.0, gamma_rem)\n                max_deviation += w_val * xi_val\n                gamma_rem -= xi_val\n\n            current_worst_case_tct = nominal_tct_part + max_deviation\n            min_worst_case_tct = min(min_worst_case_tct, current_worst_case_tct)\n            \n        v_robust_gamma = min_worst_case_tct\n        \n        # --- Part 3: Calculate Price of Robustness ---\n        if v_nominal_0 > 0:\n            por = v_robust_gamma / v_nominal_0\n        else:\n            por = 1.0 if v_robust_gamma == 0 else float('inf')\n        \n        results.append([round(v_robust_gamma, 6), round(por, 6)])\n\n    # Format the final output string\n    output_str = \"[\" + \",\".join([f\"[{v},{r}]\" for v, r in results]) + \"]\"\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
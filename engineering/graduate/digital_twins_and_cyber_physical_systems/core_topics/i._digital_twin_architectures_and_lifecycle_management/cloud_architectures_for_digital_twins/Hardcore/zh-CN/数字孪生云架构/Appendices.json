{
    "hands_on_practices": [
        {
            "introduction": "在云上构建数字孪生不仅是一项技术挑战，也是一项经济决策。本练习将引导你完成一个基本但至关重要的任务：基于假设的使用数据和定价模型，估算数字孪生系统的月度运营成本。通过这个实践，你将学会如何分解云成本，识别主要成本驱动因素，这是设计成本效益高、可持续的云架构的基本技能。",
            "id": "4208230",
            "problem": "一个用于工业信息物理系统的云托管数字孪生被部署在多租户环境中。工作负载模型预测了月度资源消耗概况，包含三个组成部分：计算、存储和网络出口。计算工作负载以虚拟中央处理器 (vCPU) 小时为单位，存储占用以太字节-月为单位，数据出口以太字节为单位。运营商对存储和出口使用十进制计费单位，具体为 $1~\\mathrm{TB} = 1000~\\mathrm{GB}$，并采用无分级或折扣的线性按需定价。测得的月度用量为 $50{,}000$ vCPU-小时的计算， $100$ 太字节-月的存储，以及 $20$ 太字节的出口。单价为每 vCPU-小时 $\\$0.03$，每吉字节-月存储 $\\$0.02$，以及每吉字节出口 $\\$0.05$。设各组成部分的索引如下：计算 $i=1$，存储 $i=2$，出口 $i=3$。\n\n仅使用“线性资源定价模型产生的月度总成本等于各组成部分（用量乘以单价）之和”这一原则，计算月度总成本，并确定主要成本驱动因素（对总成本贡献最大的组成部分）的索引 $i$。月度总成本以美元 (USD) 表示。请将您的最终答案以行矩阵 $\\begin{pmatrix}C_{\\text{total}}  i_{\\text{dom}}\\end{pmatrix}$ 的形式给出，矩阵内不含单位。无需四舍五入；请提供精确值。",
            "solution": "首先验证问题以确保其自洽、一致且科学合理。\n\n### 步骤 1：提取已知条件\n- 资源组成部分：计算 ($i=1$)、存储 ($i=2$)、网络出口 ($i=3$)。\n- 计算用量：$U_1 = 50,000$ vCPU-小时。\n- 存储用量：$U_2 = 100$ 太字节-月。\n- 出口用量：$U_3 = 20$ 太字节。\n- 计算单价：$P_1 = \\$0.03$ 每 vCPU-小时。\n- 存储单价：$P_2 = \\$0.02$ 每吉字节-月。\n- 出口单价：$P_3 = \\$0.05$ 每吉字节。\n- 单位转换定义：$1~\\mathrm{TB} = 1000~\\mathrm{GB}$。\n- 计算原则：月度总成本是各组成部分（用量乘以单价）之和。\n- 要求输出：月度总成本 $C_{\\text{total}}$ 和主要成本驱动因素的索引 $i_{\\text{dom}}$。\n\n### 步骤 2：使用提取的已知条件进行验证\n问题陈述描述了云计算资源的标准成本计算方法。其术语（vCPU-小时、太字节-月）、定价模型（线性按需）和单位转换均符合行业惯例。问题定义明确，提供了所有必要的数据和清晰的计算原则。它是客观、真实的，不含任何矛盾或含糊之处。\n\n### 步骤 3：结论与行动\n问题有效。将提供完整解答。\n\n### 解题过程\n月度总成本 $C_{\\text{total}}$ 由“总成本是各独立组成部分成本之和”这一原则确定。设 $C_i$ 为组成部分 $i$ 的成本，计算方法为其用量 $U_i$ 与其单价 $P_i$ 的乘积。\n$$C_{\\text{total}} = \\sum_{i=1}^{3} C_i = \\sum_{i=1}^{3} (U_i \\cdot P_i)$$\n然而，在相乘之前必须注意确保每个组成部分的用量和价格单位是一致的。\n\n**组成部分 1：计算成本 ($C_1$)**\n给定用量为 $U_1 = 50,000$ vCPU-小时，单价为 $P_1 = \\$0.03$ 每 vCPU-小时。单位已经一致。\n$$C_1 = U_1 \\times P_1 = 50,000 \\times 0.03 = 1500$$\n计算成本为 $C_1 = \\$1500$。\n\n**组成部分 2：存储成本 ($C_2$)**\n给定用量为 $U_2 = 100$ 太字节-月，但价格为 $P_2 = \\$0.02$ 每吉字节-月。我们必须使用给定的转换因子 $1~\\mathrm{TB} = 1000~\\mathrm{GB}$ 将用量从太字节-月转换为吉字节-月。\n设 $U'_2$ 为以吉字节-月为单位的用量。\n$$U'_2 = 100~\\text{TB-months} \\times \\frac{1000~\\text{GB-months}}{1~\\text{TB-month}} = 100,000~\\text{GB-months}$$\n现在我们可以计算存储成本。\n$$C_2 = U'_2 \\times P_2 = 100,000 \\times 0.02 = 2000$$\n存储成本为 $C_2 = \\$2000$。\n\n**组成部分 3：出口成本 ($C_3$)**\n给定用量为 $U_3 = 20$ 太字节，但价格为 $P_3 = \\$0.05$ 每吉字节。我们必须将用量从太字节转换为吉字节。\n设 $U'_3$ 为以吉字节为单位的用量。\n$$U'_3 = 20~\\text{TB} \\times \\frac{1000~\\text{GB}}{1~\\text{TB}} = 20,000~\\text{GB}$$\n现在我们可以计算出口成本。\n$$C_3 = U'_3 \\times P_3 = 20,000 \\times 0.05 = 1000$$\n出口成本为 $C_3 = \\$1000$。\n\n**月度总成本 ($C_{\\text{total}}$)**\n总成本是各独立组成部分成本之和。\n$$C_{\\text{total}} = C_1 + C_2 + C_3 = 1500 + 2000 + 1000 = 4500$$\n月度总成本为 $C_{\\text{total}} = \\$4500$。\n\n**主要成本驱动因素 ($i_{\\text{dom}}$)**\n主要成本驱动因素是月度成本最高的组成部分。我们比较计算出的成本：\n- $C_1 = \\$1500$ (计算)\n- $C_2 = \\$2000$ (存储)\n- $C_3 = \\$1000$ (出口)\n最高成本为 $\\max(C_1, C_2, C_3) = \\max(1500, 2000, 1000) = 2000$。这对应于存储部分，其索引为 $i=2$。\n因此，主要成本驱动因素的索引是 $i_{\\text{dom}} = 2$。\n\n最终答案以行矩阵 $\\begin{pmatrix}C_{\\text{total}}  i_{\\text{dom}}\\end{pmatrix}$ 的形式呈现。\n代入计算出的值，我们得到 $\\begin{pmatrix}4500  2\\end{pmatrix}$。",
            "answer": "$$\\boxed{\\begin{pmatrix}4500  2\\end{pmatrix}}$$"
        },
        {
            "introduction": "对于与关键物理系统交互的数字孪生而言，高可用性不是一种奢侈，而是一种必需。本练习探讨了系统可靠性的核心原则，即如何通过其组件的可用性来量化整个系统的可用性。通过计算串行管道的端到端可用性，并评估引入主动-主动冗余带来的改进，你将掌握一种评估和加强架构韧性的基本方法。",
            "id": "4208208",
            "problem": "一个用于信息物理系统的云托管数字孪生管道由三个串行服务组成：一个摄取网关、一个流处理引擎以及一个可视化与警报前端。当且仅当所有三个服务同时处于正常运行时，该孪生系统才被认为是可用的。假设如下：\n\n- 摄取网关的稳态可用性为 $0.999$，流处理器的稳态可用性为 $0.9995$，可视化前端的稳态可用性为 $0.9999$。稳态可用性定义为服务可运行时间的长期比例，这等于在交替更新过程模型下，服务处于其正常运行状态的平稳概率。\n- 由于故障域不相交，各服务的正常/宕机状态在统计上是独立的，并且该孪生系统需要整个串行路径都可运行才能处理请求。\n- 一项架构变更通过部署两个相同且独立的实例为摄取网关引入了双活冗余，每个实例的稳态可用性为 $0.999$。只要这两个实例中至少有一个处于正常运行状态，该孪生系统在摄取阶段就保持可用。\n- 假设两个实例之间的切换时间可忽略不计，且不存在相关故障。\n\n基于上述将可用性定义为稳态正常运行概率以及事件独立性的基本定义和假设，计算管道原始的端到端可用性，计算为摄取网关引入双活冗余后的新端到端可用性，然后报告定义为新端到端可用性与原始端到端可用性之比的改进因子。将最终答案表示为一个无单位小数，并四舍五入到六位有效数字。请勿在任何地方使用百分号。",
            "solution": "该问题要求计算因架构变更而带来的系统可用性改进因子。我们首先根据所提供的定义来形式化描述系统的可用性。\n\n设 $A_1$、$A_2$ 和 $A_3$ 分别代表摄取网关、流处理引擎和可视化前端的稳态可用性。根据问题陈述，这些值如下：\n$A_1 = 0.999$\n$A_2 = 0.9995$\n$A_3 = 0.9999$\n\n一个组件的可用性是其可运行的概率。设 $U_i$ 为服务 $i$ 处于“正常运行”状态的事件。那么，$P(U_i) = A_i$。\n\n首先，我们计算管道的原始端到端可用性，记为 $A_{orig}$。问题陈述指出，该管道是一个串行系统，这意味着当且仅当所有三个服务同时可运行时，它才可用。问题还指出，这些服务在统计上是独立的。因此，整个系统处于正常运行状态的概率是各个服务可用性的乘积：\n$$A_{orig} = P(U_1 \\cap U_2 \\cap U_3) = P(U_1) \\times P(U_2) \\times P(U_3)$$\n$$A_{orig} = A_1 \\times A_2 \\times A_3$$\n代入给定值：\n$$A_{orig} = 0.999 \\times 0.9995 \\times 0.9999$$\n\n接下来，我们考虑架构变更，其中摄取网关被替换为双活冗余配置中的两个相同且独立的实例。设每个网关实例的可用性为 $A_{1,inst}$。根据问题，$A_{1,inst} = 0.999$，这与原始的 $A_1$ 相同。只要两个实例中至少有一个处于正常运行状态，新的摄取阶段就是可用的。\n\n计算这个冗余阶段的不可用性更为方便。单个实例的不可用性是 $1 - A_{1,inst}$。由于两个实例是独立的，它们同时都宕机（不可用）的概率是它们各自不可用性的乘积。\n$$P(\\text{ingestion stage is down}) = (1 - A_{1,inst}) \\times (1 - A_{1,inst}) = (1 - A_{1,inst})^2$$\n新摄取阶段的可用性，我们记为 $A'_{1}$，是 $1$ 减去该阶段宕机的概率：\n$$A'_{1} = 1 - (1 - A_{1,inst})^2$$\n代入 $A_{1,inst} = A_1 = 0.999$：\n$$A'_{1} = 1 - (1 - 0.999)^2 = 1 - (0.001)^2 = 1 - 0.000001 = 0.999999$$\n\n管道的新的端到端可用性 $A_{new}$，是新的摄取阶段、流处理器和前端的可用性的乘积。后两个组件保持不变。\n$$A_{new} = A'_{1} \\times A_2 \\times A_3$$\n$$A_{new} = (1 - (1 - A_1)^2) \\times A_2 \\times A_3$$\n\n最后，我们需要计算改进因子 $F$，它被定义为新的端到端可用性与原始端到端可用性之比。\n$$F = \\frac{A_{new}}{A_{orig}}$$\n代入 $A_{new}$ 和 $A_{orig}$ 的表达式：\n$$F = \\frac{(1 - (1 - A_1)^2) \\times A_2 \\times A_3}{A_1 \\times A_2 \\times A_3}$$\n$A_2$ 和 $A_3$ 项相互抵消，从而显著简化了改进因子的表达式：\n$$F = \\frac{1 - (1 - A_1)^2}{A_1}$$\n这表明改进因子仅取决于被设置为冗余的组件的可用性。\n\n现在，我们代入 $A_1$ 的数值：\n$$F = \\frac{1 - (1 - 0.999)^2}{0.999} = \\frac{1 - (0.001)^2}{0.999} = \\frac{1 - 0.000001}{0.999} = \\frac{0.999999}{0.999}$$\n进行除法计算：\n$$F = 1.001000001001...$$\n问题要求最终答案四舍五入到六位有效数字。前六位有效数字是 $1$、$0$、$0$、$1$、$0$ 和 $0$。第七位有效数字是 $0$，小于 $5$，所以我们向下取整（即，保持第六位数字不变）。\n$$F \\approx 1.00100$$",
            "answer": "$$\\boxed{1.00100}$$"
        },
        {
            "introduction": "现代数字孪生架构常常横跨边缘和云，带来了复杂的部署决策。我们应将计算任务放在哪里以平衡成本与性能？本练习将此架构挑战形式化为一个组合优化问题，你的任务是为数字孪生管道的每个组件确定最佳位置（边缘或云）。通过解决这个问题，你将综合运用排队论、网络延迟模型和资源约束，以做出数据驱动的架构决策，最大限度地降低成本，同时满足严格的延迟和服务质量要求。",
            "id": "4208217",
            "problem": "您的任务是为部署在采用混合边缘-云架构的信息物理系统（CPS）中的数字孪生（DT）管道设计组件的布局优化。每个管道是由 $n$ 个组件组成的线性链，以一个外生的到达速率 $ \\lambda $（任务/秒）处理数据流。对于每个组件 $i \\in \\{1,\\dots,n\\}$，您必须决定其布局 $x_i \\in \\{0,1\\}$，其中 $x_i = 0$ 表示部署在边缘，而 $x_i = 1$ 表示部署在云端。目标是最小化总云成本\n$$\nC(x) = \\sum_{i=1}^{n} c_i x_i,\n$$\n同时需满足端到端延迟和边缘内存的约束。\n\n科学与工程基础：\n- 对于每个组件 $i$，当放置在服务率为 $ \\mu_{i,p} $（任务/秒）的平台 $p \\in \\{\\mathrm{edge},\\mathrm{cloud}\\}$ 上时，且数据流到达速率 $ \\lambda $ 满足 $ \\lambda  \\mu_{i,p} $，在一个稳定的 $ \\mathrm{M/M/1} $ 队列中，其预期响应时间为\n$$\nW_{i,p} = \\frac{1}{\\mu_{i,p} - \\lambda} \\quad \\text{秒}.\n$$\n- 整个管道的端到端延迟等于各组件响应时间之和，加上在相邻组件之间数据跨越边缘-云边界时产生的任何网络传输延迟。对于组件 $j$ 和 $j+1$ 之间的一次跨越，数据大小为 $ s_j $ MB，单向传播延迟为 $ p $ 毫秒，可用带宽为 $ B $ MB/秒，其跨越延迟为\n$$\nL^{\\mathrm{net}}_{j} = p + \\frac{s_j}{B} \\cdot 1000 \\quad \\text{毫秒}.\n$$\n- 总端到端延迟（单位：毫秒）为\n$$\nL_{\\mathrm{e2e}}(x) = \\left( \\sum_{i=1}^{n} 1000 \\cdot W_{i,p(i)} \\right) + \\left( \\sum_{j=1}^{n-1} \\mathbf{1}\\{x_j \\neq x_{j+1}\\} \\cdot L^{\\mathrm{net}}_{j} \\right),\n$$\n其中，如果 $ x_i = 0 $，则 $ p(i) = \\mathrm{edge} $；如果 $ x_i = 1 $，则 $ p(i) = \\mathrm{cloud} $。$ \\mathbf{1}\\{\\cdot\\} $ 是指示函数。\n- 边缘内存约束要求\n$$\n\\sum_{i=1}^{n} m_i \\cdot \\mathbf{1}\\{x_i = 0\\} \\leq M_{\\mathrm{edge,max}},\n$$\n其中 $ m_i $ 是组件 $ i $ 的内存占用（单位：GB），$ M_{\\mathrm{edge,max}} $ 是边缘内存容量。\n\n优化约束：\n- 端到端延迟约束：$ L_{\\mathrm{e2e}}(x) \\leq L_{\\max} $，其中 $ L_{\\max} = 30\\,\\mathrm{ms} $。\n- 边缘内存约束：$ \\sum_{i=1}^{n} m_i \\cdot \\mathbf{1}\\{x_i = 0\\} \\leq 2\\,\\mathrm{GB} $。\n- 稳定性约束：对于每个组件 $ i $，如果 $ x_i = 0 $，则必须满足 $ \\lambda  \\mu_{i,\\mathrm{edge}} $；如果 $ x_i = 1 $，则必须满足 $ \\lambda  \\mu_{i,\\mathrm{cloud}} $。否则，该分配方案不可行。\n\n对于每个测试用例，您的程序必须对所有 $2^n$ 个二进制分配方案 $ x = (x_1,\\dots,x_n) $ 进行穷举搜索，计算在约束条件下的可行性，并返回最小的云成本 $ C(x) $ 以及达到该最小值的相应分配方案。如果不存在可行的分配方案，则返回 $ -1 $ 和一个空列表。\n\n所有涉及时间的答案都必须以毫秒为单位进行计算和检查，内存以GB为单位。不涉及角度。成本是无单位的标量。\n\n测试套件：\n- 案例 A (一般权衡)：\n  - $ n = 4 $,\n  - $ \\lambda = 150 $,\n  - $ \\mu_{\\mathrm{edge}} = [400,\\,330,\\,500,\\,380] $,\n  - $ \\mu_{\\mathrm{cloud}} = [800,\\,700,\\,900,\\,750] $,\n  - $ m = [0.6,\\,0.4,\\,0.8,\\,0.7] $,\n  - $ c = [3.0,\\,1.5,\\,4.0,\\,2.5] $,\n  - $ s = [1.5,\\,2.0,\\,1.0] $,\n  - $ B = 500 $,\n  - $ p = 2 $,\n  - $ M_{\\mathrm{edge,max}} = 2.0 $,\n  - $ L_{\\max} = 30 $.\n- 案例 B (边缘处边界可行)：\n  - $ n = 3 $,\n  - $ \\lambda = 120 $,\n  - $ \\mu_{\\mathrm{edge}} = [350,\\,360,\\,340] $,\n  - $ \\mu_{\\mathrm{cloud}} = [700,\\,720,\\,680] $,\n  - $ m = [0.8,\\,0.6,\\,0.6] $,\n  - $ c = [2.0,\\,3.0,\\,5.0] $,\n  - $ s = [1.0,\\,1.0] $,\n  - $ B = 800 $,\n  - $ p = 2 $,\n  - $ M_{\\mathrm{edge,max}} = 2.0 $,\n  - $ L_{\\max} = 30 $.\n- 案例 C (因不稳定性而不可行)：\n  - $ n = 4 $,\n  - $ \\lambda = 200 $,\n  - $ \\mu_{\\mathrm{edge}} = [180,\\,210,\\,190,\\,205] $,\n  - $ \\mu_{\\mathrm{cloud}} = [190,\\,220,\\,195,\\,215] $,\n  - $ m = [0.6,\\,0.5,\\,0.4,\\,0.4] $,\n  - $ c = [1.0,\\,1.0,\\,1.0,\\,1.0] $,\n  - $ s = [2.0,\\,2.0,\\,2.0] $,\n  - $ B = 400 $,\n  - $ p = 5 $,\n  - $ M_{\\mathrm{edge,max}} = 2.0 $,\n  - $ L_{\\max} = 30 $.\n\n要求的最终输出格式：\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。列表中的每个元素都是一个形式为 $[C^\\star, x^\\star]$ 的列表，其中 $ C^\\star $ 是最小成本（一个浮点数，如果不可行则为-1），$ x^\\star $ 是对应的分配方案，表示为一个整数列表（0代表边缘，1代表云）。例如：$[[2.5,[0,0,0,1]],[0.0,[0,0,0]],[-1,[]]]$。",
            "solution": "用户提供了一个定义明确的组合优化问题，该问题基于分布式计算机系统的性能建模。其目标是在满足端到端延迟、边缘内存容量和系统稳定性约束的前提下，找到在混合边缘-云基础设施上部署计算组件的最低成本布局。我将首先对问题陈述进行形式化验证，在确认其有效后，我将详细阐述解决方法。\n\n### 问题验证\n\n**步骤1：提取已知条件**\n\n- **目标函数**：最小化总云成本 $C(x) = \\sum_{i=1}^{n} c_i x_i$，其中 $x_i \\in \\{0, 1\\}$ 是组件 $i$ 的布局决策。\n- **决策变量**：$x = (x_1, \\dots, x_n)$，其中 $x_i=0$ 表示边缘部署，$x_i=1$ 表示云端部署。\n- **系统参数**：\n    - $n$：线性管道中的组件数量。\n    - $\\lambda$：任务到达速率（任务/秒）。\n    - $\\mu_{i,\\mathrm{edge}}, \\mu_{i,\\mathrm{cloud}}$：组件 $i$ 在边缘和云端的服务速率（任务/秒）。\n    - $c_i$：将组件 $i$ 放置在云端的相关成本。\n    - $m_i$：组件 $i$ 的内存占用（GB）。\n    - $s_j$：组件 $j$ 和 $j+1$ 之间的数据大小（MB）。\n    - $B$：网络带宽（MB/s）。\n    - $p$：单向网络传播延迟（毫秒）。\n- **性能模型**：\n    - 组件响应时间（M/M/1排队）：$W_{i,p} = \\frac{1}{\\mu_{i,p} - \\lambda}$（秒）。\n    - 网络跨越延迟：$L^{\\mathrm{net}}_{j} = p + \\frac{s_j}{B} \\cdot 1000$（毫秒）。\n    - 总端到端延迟：$L_{\\mathrm{e2e}}(x) = \\left( \\sum_{i=1}^{n} 1000 \\cdot W_{i,p(i)} \\right) + \\left( \\sum_{j=1}^{n-1} \\mathbf{1}\\{x_j \\neq x_{j+1}\\} \\cdot L^{\\mathrm{net}}_{j} \\right)$（毫秒）。\n- **约束条件**：\n    - 端到端延迟：$L_{\\mathrm{e2e}}(x) \\leq L_{\\max} = 30$ 毫秒。\n    - 边缘内存：$\\sum_{i=1}^{n} m_i \\cdot (1-x_i) \\leq M_{\\mathrm{edge,max}} = 2.0$ GB。注意 $\\mathbf{1}\\{x_i=0\\}$ 等价于 $1-x_i$。\n    - 稳定性：对于每个组件 $i$，只有当 $\\lambda  \\mu_{i,p}$ 时，在平台 $p$ 上的部署才有效。\n- **要求方法**：对所有 $2^n$ 种可能的 $x$ 分配方案进行穷举搜索。\n- **输出**：对于每个测试用例，输出最小成本 $C^\\star$ 和相应的最优分配方案 $x^\\star$。如果不存在可行解，则输出 $[-1, []]$。\n\n**步骤2：使用提取的已知条件进行验证**\n\n1.  **科学依据**：该问题基于计算机科学和性能工程领域的标准模型。使用 M/M/1 排队论计算响应时间，以及使用传播加传输模型计算网络延迟，是该领域公认且有效的简化方法。整个问题真实地反映了分布式系统中的资源分配问题。\n2.  **良态问题**：该问题要求在一个有限、离散的可能解集（$2^n$ 个布局向量）上找到一个明确定义的成本函数的最小值。约束条件定义了此搜索空间的一个可行子集。由于搜索空间是有限的，如果可行集非空，则保证存在最小值。通过穷举搜索找到这个最小值的指令是一个清晰且可解的指令。\n3.  **客观性**：所有术语、参数和约束都经过了精确的数学定义。语言没有歧义或主观性。\n4.  **完整性和一致性**：为每个测试用例提供了所有必要的参数。物理单位（秒、毫秒、GB、MB）都明确说明，并且公式正确地处理了单位转换（例如，将以秒为单位的响应时间乘以1000）。\n5.  **不现实或不可行**：服务速率、内存、网络带宽等的数值对于当代的边缘-云系统是合理的。\n6.  **其他缺陷**：该问题不是隐喻性的、琐碎的或无法验证的。它代表了一个非平凡的组合优化问题。\n\n**步骤3：结论与行动**\n该问题是**有效的**。它是一个结构良好、具有科学依据的优化任务。我现在将着手设计解决方案。\n\n### 基于原则的设计\n\n该问题旨在找到一个长度为 $n$ 的最优二进制向量 $x^\\star$，以在满足一系列约束条件的同时最小化成本函数 $C(x)$。搜索空间包含所有 $2^n$ 个可能的向量 $x$。由于测试用例中的 $n$ 值很小（3和4），穷举搜索在计算上是可行的（$2^3=8$ 和 $2^4=16$ 种可能性），并保证能找到全局最优解。\n\n对于每个测试用例，解决算法将按以下步骤进行：\n1.  将目前找到的最小成本 $C_{min}$ 初始化为无穷大，并将相应的最佳分配方案 $x^\\star$ 初始化为空列表。\n2.  生成每个可能的布局向量 $x = (x_1, \\dots, x_n)$，其中每个 $x_i \\in \\{0, 1\\}$。这可以通过迭代一个从 $0$ 到 $2^n-1$ 的整数，并使用其 $n$ 位二进制表示来作为 $x$ 来实现。\n3.  对于每个候选向量 $x$，通过评估所有约束来检查其可行性：\n    a.  **稳定性约束**：对于每个组件 $i \\in \\{1, \\dots, n\\}$，验证到达速率 $\\lambda$ 是否严格小于所选平台的服务速率。如果 $x_i=0$（边缘），则必须满足 $\\lambda  \\mu_{i,\\mathrm{edge}}$。如果 $x_i=1$（云），则必须满足 $\\lambda  \\mu_{i,\\mathrm{cloud}}$。如果任何组件违反了此条件，则分配方案 $x$ 是不可行的，我们将其舍弃。\n    b.  **边缘内存约束**：计算放置在边缘的组件所消耗的总内存：$M_{\\mathrm{used}} = \\sum_{i=1}^{n} m_i \\cdot (1-x_i)$。验证是否 $M_{\\mathrm{used}} \\leq M_{\\mathrm{edge,max}}$。如果不满足，则该分配方案不可行。\n    c.  **端到端延迟约束**：计算总延迟 $L_{\\mathrm{e2e}}(x)$。这涉及两个求和：\n        i.  处理延迟之和：$L_{\\mathrm{proc}} = \\sum_{i=1}^{n} 1000 \\cdot W_{i, p(i)}$，其中 $W_{i,p(i)} = (\\mu_{i,p(i)} - \\lambda)^{-1}$。\n        ii. 在不同平台上部署的相邻组件之间每次转换的网络延迟之和：$L_{\\mathrm{net}} = \\sum_{j=1}^{n-1} \\mathbf{1}\\{x_j \\neq x_{j+1}\\} \\cdot (p + \\frac{s_j}{B} \\cdot 1000)$。\n        总延迟为 $L_{\\mathrm{e2e}}(x) = L_{\\mathrm{proc}} + L_{\\mathrm{net}}$。验证是否 $L_{\\mathrm{e2e}}(x) \\leq L_{\\max}$。如果不满足，则该分配方案不可行。\n4.  如果一个分配方案 $x$ 通过了所有三个可行性检查，它就是一个有效的解。计算其成本：$C(x) = \\sum_{i=1}^{n} c_i x_i$。\n5.  将此成本 $C(x)$ 与当前最小成本 $C_{min}$ 进行比较。如果 $C(x)  C_{min}$，则更新 $C_{min} = C(x)$ 和 $x^{\\star} = x$。\n6.  在遍历所有 $2^n$ 个分配方案后，如果 $C_{min}$ 仍为其初始值无穷大，则意味着没有找到可行的解决方案。在这种情况下，结果为 $[-1, []]$。否则，结果为 $[C_{min}, x^\\star]$。\n\n对提供的每个测试用例重复此过程，并将结果汇总到一个最终列表中。",
            "answer": "[[4.0,[0,1,0,1]],[0.0,[0,0,0]],[-1,[]]]"
        }
    ]
}
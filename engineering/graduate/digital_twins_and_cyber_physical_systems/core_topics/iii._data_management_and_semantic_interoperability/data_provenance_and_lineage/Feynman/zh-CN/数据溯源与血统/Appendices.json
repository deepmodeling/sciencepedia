{
    "hands_on_practices": [
        {
            "introduction": "数据溯源的一个核心功能是能够从下游产物追溯到其上游来源。这一过程的可行性取决于数据转换过程本身是否是无损的。本练习  将通过一个具体的例子，探讨一个由线性混合与量化组成的变换，并从数学上推导其可逆性条件，从而揭示信息损失对谱系追踪的根本性影响。",
            "id": "4212505",
            "problem": "信息物理系统 (CPS) 的数字孪生 (DT) 通过记录上游工件如何通过确定性流水线转换为下游工件来维护数据来源和谱系。考虑一个由状态向量 $\\mathbf{x} \\in \\mathbb{R}^{3}$ 表示的上游工件，以及一个由以下变换产生的下游工件 $\\mathbf{y} \\in \\mathbb{R}^{3}$\n$$\n\\mathbf{y} \\;=\\; T_{\\lambda,\\delta}(\\mathbf{x}) \\;=\\; Q_{\\delta}\\!\\left(A_{\\lambda}\\,\\mathbf{x}\\right),\n$$\n其中 $A_{\\lambda} \\in \\mathbb{R}^{3 \\times 3}$ 是一个由 $\\,\\lambda \\in \\mathbb{R}\\,$ 参数化的线性传感器间混合算子，\n$$\nA_{\\lambda} \\;=\\;\n\\begin{pmatrix}\n1  \\lambda  0 \\\\\n0  1  \\lambda \\\\\n\\lambda  0  1\n\\end{pmatrix},\n$$\n并且 $Q_{\\delta}:\\mathbb{R}^{3}\\to\\mathbb{R}^{3}$ 是一个步长为 $\\,\\delta \\ge 0\\,$ 的分量量化器，定义为 $\\,Q_{\\delta}(\\mathbf{z}) = (q_{\\delta}(z_{1}),q_{\\delta}(z_{2}),q_{\\delta}(z_{3}))\\,$，其中 $\\,q_{\\delta}(z)$ 等于最接近 $z$ 的 $\\delta$ 的倍数（当 $\\delta=0$ 时，取 $Q_{0}$ 为单位映射）。\n\n将您的推理建立在单射性、满射性和双射性的核心定义，以及线性代数中关于线性算子可逆性的经过充分检验的事实之上。推导出使 $T_{\\lambda,\\delta}$ 可逆的关于 $\\lambda$ 和 $\\delta$ 的条件，并构造一个在这些条件下能从下游工件恢复上游工件的显式逆。然后，假设变换是可逆的，推导第二个上游分量 $x_{2}$ 关于观测到的下游分量 $y_{1}, y_{2}, y_{3}$ 和 $\\lambda$ 的闭式表达式。\n\n最后，计算当 $\\lambda = \\tfrac{1}{2}$，$\\delta = 0$ 且 $\\mathbf{y} = (2,\\,3,\\,4)^{\\top}$ 时 $x_{2}$ 的值。将您的数值答案四舍五入到四位有效数字。最终数值答案不带单位。",
            "solution": "该问题要求分析变换 $T_{\\lambda,\\delta}$ 的可逆性，该变换为一个信息物理系统中的过程建模。该变换根据方程 $\\mathbf{y} = T_{\\lambda,\\delta}(\\mathbf{x})$ 将一个上游工件 $\\mathbf{x} \\in \\mathbb{R}^{3}$ 映射到一个下游工件 $\\mathbf{y} \\in \\mathbb{R}^{3}$。该变换是两个操作的复合：一个线性混合 $A_{\\lambda}$ 和一个分量量化 $Q_{\\delta}$。具体来说，$T_{\\lambda,\\delta}(\\mathbf{x}) = Q_{\\delta}(A_{\\lambda}\\,\\mathbf{x})$。\n\n首先，我们必须确定变换 $T_{\\lambda,\\delta}: \\mathbb{R}^{3} \\to \\mathbb{R}^{3}$ 在何种条件下是可逆的。一个函数是可逆的，当且仅当它是双射的，这意味着它必须既是单射的（一对一）又是满射的（映上）。变换 $T_{\\lambda,\\delta}$ 是两个函数 $A_{\\lambda}$ 和 $Q_{\\delta}$ 的复合。要使该复合可逆，两个构成函数在其操作链中的各自定义域和陪域上都必须是可逆的。\n\n让我们分析量化算子 $Q_{\\delta}$。它由函数 $q_{\\delta}(z)$ 按分量定义，该函数将一个实数 $z$ 映射到步长 $\\delta \\ge 0$ 的最近倍数。\n如果 $\\delta > 0$，$q_{\\delta}$ 的值域是 $\\delta$ 的所有整数倍的集合，即 $\\{k\\delta \\mid k \\in \\mathbb{Z}\\}$。这是一个离散的可数集。\n1.  单射性：对于任何 $\\delta > 0$，$q_{\\delta}$ 都不是单射的。例如，区间 $[-\\frac{\\delta}{2}, \\frac{\\delta}{2})$ 中的所有 $z$ 值都被映射到相同的输出值 $0$。由于单个输出值对应多个输入值，该函数不是单射的。因此，当 $\\delta > 0$ 时，向量值函数 $Q_{\\delta}$ 不是单射的。\n2.  满射性：作为从 $\\mathbb{R}$ 到 $\\mathbb{R}$ 的函数，$q_{\\delta}$ 的陪域是 $\\mathbb{R}$，但其像（实际输出值的集合）是离散集 $\\{k\\delta \\mid k \\in \\mathbb{Z}\\}$。由于像不等于陪域，所以 $q_{\\delta}$ 不是满射的。因此，$Q_{\\delta}$ 不是到 $\\mathbb{R}^{3}$ 的满射。\n\n由于对于任何 $\\delta > 0$，$Q_{\\delta}$ 都既不是单射的也不是满射的，所以它不是双射的，因此不可逆。这意味着如果 $\\delta > 0$，复合变换 $T_{\\lambda,\\delta}$ 也不可逆，因为信息在量化步骤中被不可恢复地丢失了。\n\n问题陈述指明，当 $\\delta = 0$ 时，$Q_{0}$ 是单位映射。单位映射 $Q_{0}(\\mathbf{z}) = \\mathbf{z}$ 是双射的。因此，$T_{\\lambda,\\delta}$ 可逆的一个必要条件是 $\\delta = 0$。\n\n当 $\\delta = 0$ 时，变换简化为一个纯线性变换：\n$$ T_{\\lambda,0}(\\mathbf{x}) = A_{\\lambda}\\mathbf{x} $$\n其中 $A_{\\lambda}$ 是矩阵：\n$$ A_{\\lambda} \\;=\\; \\begin{pmatrix} 1  \\lambda  0 \\\\ 0  1  \\lambda \\\\ \\lambda  0  1 \\end{pmatrix} $$\n由方阵表示的线性变换是可逆的，当且仅当该矩阵是可逆的。一个矩阵是可逆的，当且仅当其行列式非零。我们计算 $A_{\\lambda}$ 的行列式：\n$$ \\det(A_{\\lambda}) = 1 \\begin{vmatrix} 1  \\lambda \\\\ 0  1 \\end{vmatrix} - \\lambda \\begin{vmatrix} 0  \\lambda \\\\ \\lambda  1 \\end{vmatrix} + 0 \\begin{vmatrix} 0  1 \\\\ \\lambda  0 \\end{vmatrix} $$\n$$ \\det(A_{\\lambda}) = 1(1 \\cdot 1 - \\lambda \\cdot 0) - \\lambda(0 \\cdot 1 - \\lambda \\cdot \\lambda) + 0 $$\n$$ \\det(A_{\\lambda}) = 1 - \\lambda(-\\lambda^2) = 1 + \\lambda^3 $$\n为了使 $A_{\\lambda}$ 可逆，我们必须有 $\\det(A_{\\lambda}) \\neq 0$，这意味着 $1 + \\lambda^3 \\neq 0$。对于实数 $\\lambda$，此条件为 $\\lambda^3 \\neq -1$，可简化为 $\\lambda \\neq -1$。\n\n综合我们的发现，变换 $T_{\\lambda,\\delta}$ 是可逆的，当且仅当 $\\delta = 0$ 且 $\\lambda \\neq -1$。\n\n在这些条件下，逆变换 $T_{\\lambda,0}^{-1}$ 由 $\\mathbf{x} = A_{\\lambda}^{-1}\\mathbf{y}$ 给出。我们使用公式 $A_{\\lambda}^{-1} = \\frac{1}{\\det(A_{\\lambda})}\\text{adj}(A_{\\lambda})$ 来构造逆矩阵 $A_{\\lambda}^{-1}$，其中 $\\text{adj}(A_{\\lambda})$ 是 $A_{\\lambda}$ 的伴随矩阵。伴随矩阵是代数余子式矩阵的转置。\n$A_{\\lambda}$ 的代数余子式矩阵 $C$ 是：\n$$ C = \\begin{pmatrix} \\begin{vmatrix} 1  \\lambda \\\\ 0  1 \\end{vmatrix}  -\\begin{vmatrix} 0  \\lambda \\\\ \\lambda  1 \\end{vmatrix}  \\begin{vmatrix} 0  1 \\\\ \\lambda  0 \\end{vmatrix} \\\\ -\\begin{vmatrix} \\lambda  0 \\\\ 0  1 \\end{vmatrix}  \\begin{vmatrix} 1  0 \\\\ \\lambda  1 \\end{vmatrix}  -\\begin{vmatrix} 1  \\lambda \\\\ \\lambda  0 \\end{vmatrix} \\\\ \\begin{vmatrix} \\lambda  0 \\\\ 1  \\lambda \\end{vmatrix}  -\\begin{vmatrix} 1  0 \\\\ 0  \\lambda \\end{vmatrix}  \\begin{vmatrix} 1  \\lambda \\\\ 0  1 \\end{vmatrix} \\end{pmatrix} = \\begin{pmatrix} 1  \\lambda^2  -\\lambda \\\\ -\\lambda  1  \\lambda^2 \\\\ \\lambda^2  -\\lambda  1 \\end{pmatrix} $$\n伴随矩阵是 $C$ 的转置：\n$$ \\text{adj}(A_{\\lambda}) = C^{\\top} = \\begin{pmatrix} 1  -\\lambda  \\lambda^2 \\\\ \\lambda^2  1  -\\lambda \\\\ -\\lambda  \\lambda^2  1 \\end{pmatrix} $$\n因此，逆矩阵是：\n$$ A_{\\lambda}^{-1} = \\frac{1}{1+\\lambda^3} \\begin{pmatrix} 1  -\\lambda  \\lambda^2 \\\\ \\lambda^2  1  -\\lambda \\\\ -\\lambda  \\lambda^2  1 \\end{pmatrix} $$\n显式逆变换是 $T_{\\lambda,0}^{-1}(\\mathbf{y}) = A_{\\lambda}^{-1}\\mathbf{y}$。\n\n接下来，我们推导第二个上游分量 $x_2$ 的闭式表达式。我们使用关系式 $\\mathbf{x} = A_{\\lambda}^{-1}\\mathbf{y}$：\n$$ \\begin{pmatrix} x_1 \\\\ x_2 \\\\ x_3 \\end{pmatrix} = \\frac{1}{1+\\lambda^3} \\begin{pmatrix} 1  -\\lambda  \\lambda^2 \\\\ \\lambda^2  1  -\\lambda \\\\ -\\lambda  \\lambda^2  1 \\end{pmatrix} \\begin{pmatrix} y_1 \\\\ y_2 \\\\ y_3 \\end{pmatrix} $$\n从矩阵向量乘积的第二行提取 $x_2$ 的表达式：\n$$ x_2 = \\frac{1}{1+\\lambda^3} (\\lambda^2 y_1 + y_2 - \\lambda y_3) $$\n这就是所要求的闭式表达式，在可逆性（即 $\\delta = 0$ 且 $\\lambda \\neq -1$）的假设下有效。\n\n最后，我们根据给定的值计算 $x_2$：$\\lambda = \\frac{1}{2}$，$\\delta = 0$ 且 $\\mathbf{y} = (2, 3, 4)^{\\top}$。值 $\\delta = 0$ 和 $\\lambda = \\frac{1}{2} \\neq -1$ 满足可逆性条件。$\\mathbf{y}$ 的分量是 $y_1=2$，$y_2=3$ 和 $y_3=4$。\n我们将这些值代入 $x_2$ 的表达式中：\n分母是 $1 + \\lambda^3 = 1 + (\\frac{1}{2})^3 = 1 + \\frac{1}{8} = \\frac{9}{8}$。\n分子项是 $\\lambda^2 y_1 + y_2 - \\lambda y_3$：\n$$ \\left(\\frac{1}{2}\\right)^2 (2) + (3) - \\left(\\frac{1}{2}\\right) (4) = \\left(\\frac{1}{4}\\right)(2) + 3 - 2 = \\frac{1}{2} + 1 = \\frac{3}{2} $$\n现在，我们计算 $x_2$：\n$$ x_2 = \\frac{3/2}{9/8} = \\frac{3}{2} \\times \\frac{8}{9} = \\frac{24}{18} = \\frac{4}{3} $$\n作为小数，$x_2 = 1.3333\\dots$。四舍五入到四位有效数字得到 $1.333$。",
            "answer": "$$\\boxed{1.333}$$"
        },
        {
            "introduction": "在数字孪生和网络物理系统中，由于网络延迟和时钟异步，记录的事件时间戳可能与真实的物理因果关系相悖。一个有效的数据谱系图必须遵守“先发生”原则，即原因的发生时间必须早于结果。本练习  提出了一个修复时间戳不一致性的挑战，要求您计算最小的非负时间调整量，以重建一个满足所有因果约束的、一致且可信的事件时间线。",
            "id": "4212529",
            "problem": "一个带有数字孪生的信息物理系统 (CPS) 执行一个数据注入和驱动的流水线。计算的溯源由一个有向无环图 (DAG) 表示，其中每个节点是一个事件，每条有向边编码了一个数据依赖和最小物理延迟。此类系统中的基本因果关系由“先于”关系 (HB) 捕获，该关系要求如果事件 $j$ 依赖于事件 $i$，那么 $j$ 的真实时间不能早于 $i$ 的真实时间加上该依赖路径上的最小延迟。形式上，如果 $(i,j)$ 是一条边且最小延迟为 $d_{ij}>0$，那么真实时间 $\\tau_{i}$ 和 $\\tau_{j}$ 必须满足 $\\tau_{j} \\ge \\tau_{i} + d_{ij}$。在分布式日志记录中，由于网络延迟和异步时钟，记录的时间戳 $t_{i}$ 可能会违反 HB 关系。为修复溯源一致性，我们假设将调整约束为非负前向平移 $x_{i} \\ge 0$，形成调整后的时间 $t'_{i} = t_{i} + x_{i}$，这些时间必须满足所有 HB 约束。\n\n考虑溯源 DAG $G=(V,E)$ 中的以下五个事件，其中 $V=\\{S,T,C,A,L\\}$ 分别对应传感器采样 ($S$)、向孪生体进行网络传输 ($T$)、孪生体计算 ($C$)、驱动指令 ($A$) 和日志记录/持久化 ($L$)。边及其最小延迟为：\n- $(S,T)$，延迟 $d_{ST} = 0.002$，\n- $(T,C)$，延迟 $d_{TC} = 0.004$，\n- $(C,A)$，延迟 $d_{CA} = 0.003$，\n- $(C,L)$，延迟 $d_{CL} = 0.001$。\n\n记录的时间戳（单位：秒）为：\n- $t_{S} = 0.015$，\n- $t_{T} = 0.011$，\n- $t_{C} = 0.020$，\n- $t_{A} = 0.018$，\n- $t_{L} = 0.019$。\n\n由于网络延迟导致的乱序日志记录，这些记录的时间违反了 HB 约束。\n\n从上述基本原则出发，确定分量最小的非负调整向量 $x = (x_{S}, x_{T}, x_{C}, x_{A}, x_{L})$，使得调整后的时间 $t'_{i} = t_{i} + x_{i}$ 对所有 $(i,j) \\in E$ 满足 $t'_{j} \\ge t'_{i} + d_{ij}$，且对所有 $i \\in V$ 满足 $x_{i} \\ge 0$。每个调整量以秒为单位表示。无需四舍五入；请提供精确的小数值。最终答案必须是行矩阵 $\\begin{pmatrix} x_{S}  x_{T}  x_{C}  x_{A}  x_{L} \\end{pmatrix}$。",
            "solution": "原则：核心任务是满足关于变量 $x_i$ 的一个线性不等式组。\n约束条件如下：\n        1.  $t'_T \\ge t'_S + d_{ST}$\n        2.  $t'_C \\ge t'_T + d_{TC}$\n        3.  $t'_A \\ge t'_C + d_{CA}$\n        4.  $t'_L \\ge t'_C + d_{CL}$\n        5.  $x_S \\ge 0$\n        6.  $x_T \\ge 0$\n        7.  $x_C \\ge 0$\n        8.  $x_A \\ge 0$\n        9.  $x_L \\ge 0$\n\n代入：将 $t'_i = t_i + x_i$ 代入不等式。\n        1.  $t_T + x_T \\ge t_S + x_S + d_{ST} \\implies x_T \\ge x_S + t_S + d_{ST} - t_T$\n        2.  $t_C + x_C \\ge t_T + x_T + d_{TC} \\implies x_C \\ge x_T + t_T + d_{TC} - t_C$\n        3.  $t_A + x_A \\ge t_C + x_C + d_{CA} \\implies x_A \\ge x_C + t_C + d_{CA} - t_A$\n        4.  $t_L + x_L \\ge t_C + x_C + d_{CL} \\implies x_L \\ge x_C + t_C + d_{CL} - t_L$\n\n目标：我们想要找到分量最小的非负向量 $x$。这意味着我们希望在满足所有约束条件的同时，使每个 $x_i$ 尽可能小。这表明我们应该将每个 $x_i$ 设置为 0 与其在 DAG 中的前驱节点所施加的下界中的最大值。这等效于从源节点开始，尽可能将不等式设为等式来求解。\n\n让我们将其形式化。问题在于找到满足约束条件并最小化 $\\sum x_i$（或更准确地说，是分量最小）的向量 $x$。\n我们将约束重写为 $x_j \\ge x_i + (t_i + d_{ij} - t_j)$。令 $c_{ij} = t_i + d_{ij} - t_j$。\n该系统为：\n        $x_T \\ge x_S + c_{ST}$\n        $x_C \\ge x_T + c_{TC}$\n        $x_A \\ge x_C + c_{CA}$\n        $x_L \\ge x_C + c_{CL}$\n        $x_i \\ge 0$ for all $i \\in V$.\n\n为了找到分量最小的解，我们可以通过图来传播调整量。DAG 的源节点（没有入边的节点）的初始调整量可以设为 0，因为没有先于它们的约束。在我们的图中，$S$ 是唯一的源节点。\n分步计算：\n\n        1.  节点 S：$S$ 是一个源节点。为最小化 $x_S$，我们将其设置为可能的最小非负值。没有施加于 $S$ 的“先于”约束。\n            因此，$x_S = 0$。\n\n        2.  节点 T：约束为 $x_T \\ge x_S + t_S + d_{ST} - t_T$。\n            为最小化 $x_T$，我们应取满足此条件和 $x_T \\ge 0$ 的最小值。\n            $x_T \\ge 0 + 0.015 + 0.002 - 0.011 = 0.006$。\n            因此，$x_T$ 的最小值为 $\\max(0, 0.006) = 0.006$。\n            我们设 $x_T = 0.006$。\n\n        3.  节点 C：约束为 $x_C \\ge x_T + t_T + d_{TC} - t_C$。\n            使用我们刚找到的最小 $x_T$：\n            $x_C \\ge 0.006 + 0.011 + 0.004 - 0.020 = 0.001$。\n            $x_C$ 的最小值为 $\\max(0, 0.001) = 0.001$。\n            我们设 $x_C = 0.001$。\n\n        4.  节点 A：约束为 $x_A \\ge x_C + t_C + d_{CA} - t_A$。\n            使用最小的 $x_C$：\n            $x_A \\ge 0.001 + 0.020 + 0.003 - 0.018 = 0.006$。\n            $x_A$ 的最小值为 $\\max(0, 0.006) = 0.006$。\n            我们设 $x_A = 0.006$。\n\n        5.  节点 L：约束为 $x_L \\ge x_C + t_C + d_{CL} - t_L$。\n            使用最小的 $x_C$：\n            $x_L \\ge 0.001 + 0.020 + 0.001 - 0.019 = 0.003$。\n            $x_L$ 的最小值为 $\\max(0, 0.003) = 0.003$。\n            我们设 $x_L = 0.003$。\n\n得到的最小调整向量为 $x = (x_S, x_T, x_C, x_A, x_L) = (0, 0.006, 0.001, 0.006, 0.003)$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0  0.006  0.001  0.006  0.003\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在一个国家级规模的网络物理系统中，为确保谱系完整性，每个数据产物都需要一个唯一的标识符。尽管加密哈希函数被广泛用于此目的，但在处理海量数据时，哈希碰撞（即两个不同的产物拥有相同的哈希值）的风险不容忽视。本练习  将“生日问题”的概率模型应用于一个大规模数字孪生场景，旨在量化在有限哈希空间下发生碰撞的实际风险，并阐明其对谱系完整性的灾难性后果。",
            "id": "4212518",
            "problem": "一个国家级信息物理系统（CPS）的数字孪生（DT）溯源账本为每个传感器事件记录了不可变的谱系工件。每个工件由一个密码学哈希函数的截断输出来标识，该哈希函数被建模为一个大小为 $2^{k}$ 的有限集内的均匀随机映射，且每次抽取都是独立的。为提高存储效率，系统将安全哈希算法256（SHA-256）的输出截断为 $k = 64$ 位。在一个 $8$ 小时的摄取窗口内， $200{,}000$ 个传感器每个每分钟发出 $10$ 条谱系记录，每条记录都成为账本中的一个工件。\n\n仅从有限集内的均匀独立抽样定义和基本概率法则出发，推导在 $n$ 个工件被哈希到 $2^{k}$ 个可能的输出中时，至少发生一次碰撞的概率的近似值。然后，针对所述的摄取窗口，对此近似值进行数值评估。将最终概率以小数形式表示，并将答案四舍五入到四位有效数字。\n\n最后，在给定的建模假设下，解释此概率对此类数字孪生溯源账本中谱系完整性的影响。",
            "solution": "这个问题提取得当且有科学依据。它提出了一个计算机科学和密码学中的经典场景，即“生日问题”，并将其应用于信息物理系统中的数据溯源背景。我们可以进行形式化分析。\n\n首先，我们必须确定在指定时间窗口内生成和哈希的工件总数 $n$。\n\n给定参数如下：\n- 传感器数量, $S = 200{,}000 = 2 \\times 10^5$。\n- 每个传感器的记录生成速率, $R = 10 \\text{ 条记录}/\\text{分钟}$。\n- 摄取窗口持续时间, $T = 8 \\text{ 小时}$。\n\n为了计算 $n$，我们首先将持续时间 $T$ 转换为分钟：\n$$T = 8 \\text{ hours} \\times \\frac{60 \\text{ minutes}}{1 \\text{ hour}} = 480 \\text{ minutes}$$\n\n工件总数 $n$ 是传感器数量、生成速率和以分钟为单位的持续时间的乘积：\n$$n = S \\times R \\times T = (2 \\times 10^5) \\times 10 \\times 480 = 960 \\times 10^6 = 9.6 \\times 10^8$$\n\n哈希函数将输出截断为 $k=64$ 位。可能的哈希输出集合的大小为 $M$，其中：\n$$M = 2^k = 2^{64}$$\n\n问题将哈希函数建模为具有独立抽取的均匀随机映射。这意味着对于 $n$ 个工件中的每一个，其哈希值都是从 $M$ 个可能的输出中均匀且独立地选择的。$n$ 个哈希值的可能序列总数为 $M^n$。\n\n我们需要求解至少发生一次碰撞的概率，记为 $P_c$。更直接的方法是首先计算其互补事件的概率：即没有碰撞发生。设此概率为 $P_{nc}$。那么，$P_c = 1 - P_{nc}$。\n\n要使碰撞不发生，所有 $n$ 个哈希值必须是互不相同的。从 $M$ 个可能性中不放回地选择 $n$ 个不同哈希值的方法数由降阶乘 $P(M, n)$ 给出：\n$$P(M, n) = M(M-1)(M-2)\\cdots(M-n+1) = \\frac{M!}{(M-n)!}$$\n一个由 $n$ 个不同哈希值组成的特定序列的概率是 $1/M^n$。因此，获得任何没有碰撞的序列的概率是：\n$$P_{nc} = \\frac{M(M-1)\\cdots(M-n+1)}{M^n} = \\frac{M}{M} \\cdot \\frac{M-1}{M} \\cdot \\frac{M-2}{M} \\cdots \\frac{M-n+1}{M}$$\n这可以表示为乘积形式：\n$$P_{nc} = \\prod_{i=0}^{n-1} \\left(1 - \\frac{i}{M}\\right)$$\n\n对于本问题中的巨大 $n$ 和 $M$ 值，精确计算是不可行的。我们必须按要求使用一个从基本原理推导出的近似。指数函数在 $x=0$ 附近的泰勒级数展开为 $\\exp(x) \\approx 1+x$ (当 $x$ 很小时)。这意味着对于一个小数项 $\\epsilon_i = i/M$，我们可以近似为 $1-\\epsilon_i \\approx \\exp(-\\epsilon_i)$。这个近似是稳健的。\n\n将此近似应用于 $P_{nc}$ 乘积中的每一项：\n$$P_{nc} \\approx \\prod_{i=0}^{n-1} \\exp\\left(-\\frac{i}{M}\\right) = \\exp\\left(-\\sum_{i=0}^{n-1} \\frac{i}{M}\\right)$$\n该和是一个等差数列：$\\sum_{i=0}^{n-1} i = \\frac{(n-1)n}{2}$。将此代入指数中：\n$$P_{nc} \\approx \\exp\\left(-\\frac{n(n-1)}{2M}\\right)$$\n对于非常大的 $n$，$n(n-1) \\approx n^2$，从而得到常见的近似 $P_{nc} \\approx \\exp(-n^2/(2M))$。我们将保留稍微更精确的 $n(n-1)$ 形式。\n\n因此，至少发生一次碰撞的概率 $P_c$ 为：\n$$P_c = 1 - P_{nc} \\approx 1 - \\exp\\left(-\\frac{n(n-1)}{2M}\\right)$$\n这就是所求的近似表达式。\n\n现在，我们用给定的值对这个表达式进行数值计算：\n- $n = 9.6 \\times 10^8$\n- $M = 2^{64}$\n\n设 $\\lambda$ 为指数函数量值部分的参数：\n$$\\lambda = \\frac{n(n-1)}{2M} = \\frac{(9.6 \\times 10^8)(9.6 \\times 10^8 - 1)}{2 \\times 2^{64}}$$\n由于在此计算中 $n-1$ 与 $n$ 的差异可以忽略不计，我们可以近似 $n(n-1) \\approx n^2$：\n$$\\lambda \\approx \\frac{n^2}{2M} = \\frac{(9.6 \\times 10^8)^2}{2 \\times 2^{64}} = \\frac{9.216 \\times 10^{17}}{2^{65}}$$\n为计算此值，我们使用 $2^{64} \\approx 1.844674 \\times 10^{19}$。\n$$\\lambda \\approx \\frac{9.216 \\times 10^{17}}{2 \\times (1.844674 \\times 10^{19})} = \\frac{9.216 \\times 10^{17}}{3.689348 \\times 10^{19}} \\approx 0.024979$$\n现在我们计算碰撞概率：\n$$P_c \\approx 1 - \\exp(-\\lambda) \\approx 1 - \\exp(-0.024979)$$\n使用计算器计算指数项：\n$$\\exp(-0.024979) \\approx 0.975328$$\n$$P_c \\approx 1 - 0.975328 = 0.024672$$\n四舍五入到四位有效数字，我们得到：\n$$P_c \\approx 0.02467$$\n\n最后，我们解释这一结果的影响。\n对于一个谱系完整性至关重要的系统来说，在单个 $8$ 小时窗口内约 $2.467\\%$ 的碰撞概率是相当高的。哈希碰撞意味着两条不同的谱系记录被分配了相同的唯一标识符。这从根本上破坏了溯源链，使得明确追溯数据历史变得不可能。审计员或自动化分析工具将无法区分这两条发生碰撞的记录，可能导致对系统状态、故障传播或安全事件得出错误的结论。对于一个连续运行的系统，几天之内发生碰撞几乎是必然事件。一天内（三个 $8$ 小时窗口）不发生碰撞的概率是 $(1-P_c)^3 \\approx (0.97533)^3 \\approx 0.9275$，这意味着每日的碰撞风险超过 $7\\%$。在一个月（$90$ 个窗口）内，避免碰撞的概率是 $(1-P_c)^{90} \\approx 0.103$，意味着至少发生一次碰撞的几率为 $89.7\\%$。均匀随机哈希函数的建模假设是乐观的；现实世界中的哈希函数可能存在偏差，从而增加碰撞概率。因此，计算出的风险应被视为一个下界。显而易见的影响是，一个 $64$ 位的哈希空间不足以保证这种规模下的谱系完整性。该系统需要更大的哈希输出，例如 $128$ 位或完整的 SHA-256 的 $256$ 位，以将碰撞概率降低到密码学上可忽略的水平。",
            "answer": "$$\\boxed{0.02467}$$"
        }
    ]
}
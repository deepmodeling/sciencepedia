{
    "hands_on_practices": [
        {
            "introduction": "Before diving into advanced digital control techniques, it is essential to master the fundamentals of controller tuning. This first exercise revisits the classic Ziegler-Nichols ultimate sensitivity method, a powerful heuristic for obtaining initial PID parameters directly from experimental observation of the system's behavior . By finding the point of marginal stability, you will apply the foundational formulas to establish a baseline set of gains, a common first step in industrial practice.",
            "id": "1622333",
            "problem": "An engineer is tasked with tuning a controller for a thermal process in a manufacturing plant. To determine initial tuning parameters, the engineer employs the first Ziegler-Nichols method (the closed-loop method). The process is placed in a feedback loop with a proportional-only controller. The engineer gradually increases the proportional gain until the system's temperature output begins to exhibit sustained, stable oscillations. This critical point is reached when the gain, known as the ultimate gain $K_u$, is set to $10.0$. The period of these oscillations, referred to as the ultimate period $P_u$, is measured to be $3.0$ seconds.\n\nBased on these experimental results, calculate the tuning parameters for a standard non-interacting Proportional-Integral-Derivative (PID) controller. The PID controller's transfer function is of the form $C(s) = K_p \\left(1 + \\frac{1}{T_i s} + T_d s\\right)$.\n\nDetermine the numerical values for the proportional gain $K_p$, the integral time $T_i$, and the derivative time $T_d$. Express your final answer as a set of three numbers in the order $(K_p, T_i, T_d)$. The integral time $T_i$ and derivative time $T_d$ must be expressed in seconds.",
            "solution": "We apply the first Ziegler-Nichols closed-loop tuning rules for the ideal (non-interacting) PID controller of the form $C(s) = K_{p}\\left(1 + \\frac{1}{T_{i}s} + T_{d}s\\right)$. For this form, given the ultimate gain $K_{u}$ and ultimate period $P_{u}$ obtained at sustained oscillations with proportional-only control, the tuning formulas are:\n$$\nK_{p} = 0.6\\,K_{u}, \\quad T_{i} = \\frac{P_{u}}{2}, \\quad T_{d} = \\frac{P_{u}}{8}.\n$$\nSubstitute the experimental values $K_{u} = 10.0$ and $P_{u} = 3.0 \\text{ s}$:\n$$\nK_{p} = 0.6 \\times 10.0 = 6.0,\n$$\n$$\nT_{i} = \\frac{3.0}{2} = 1.5 \\text{ s},\n$$\n$$\nT_{d} = \\frac{3.0}{8} = 0.375 \\text{ s}.\n$$\nThus, the required tuning parameters in the order $(K_{p}, T_{i}, T_{d})$ are $(6.0, 1.5, 0.375)$.",
            "answer": "$$\\boxed{\\begin{pmatrix} 6  1.5  0.375 \\end{pmatrix}}$$"
        },
        {
            "introduction": "In many Cyber-Physical Systems, control is not always fully autonomous; operators often need to switch between manual and automatic modes. This practice tackles the critical implementation detail of \"bumpless transfer,\" ensuring a smooth and safe transition by correctly initializing the PID controller's internal states . You will derive the necessary conditions from first principles to prevent discontinuities in the control signal, a core skill for developing reliable real-world control systems.",
            "id": "4237286",
            "problem": "A Cyber-Physical System (CPS) using a Digital Twin (DT) supervises a single-input single-output plant. The plant has been operated in manual mode, where the actuator command is held at a constant value. At time $t = 0$, the mode is switched to automatic control governed by a Proportional-Integral-Derivative (PID) controller in parallel form with derivative action filtered by a first-order low-pass, defined by\n$$\nu(t) \\;=\\; K_{p}\\,e(t)\\;+\\;I(t)\\;+\\;K_{d}\\,v(t),\n$$\nwhere $e(t) = r(t) - y(t)$ is the tracking error between the setpoint $r(t)$ and the measured output $y(t)$, $I(t)$ is the integrator contribution to the control signal, and $v(t)$ is the filtered derivative of the error satisfying the first-order filter equation\n$$\nT_{f}\\,\\dot{v}(t) \\;+\\; v(t) \\;=\\; \\dot{e}(t).\n$$\nThe integrator contribution is generated by an internal state $\\xi(t)$ via $I(t) = K_{i}\\,\\xi(t)$ and $\\dot{\\xi}(t) = e(t)$ when the controller is in automatic mode. In manual mode, the PID is not driving the plant; however, the DT provides estimates of $e(t)$ and $\\dot{e}(t)$.\n\nTo avoid output discontinuities at the moment of switching, the automatic controller output $u(0^{+})$ must not introduce a jump relative to the manual command $u(0^{-})$ immediately prior to the switch. Compute, from first principles, the conditions under which bumpless transfer occurs at $t=0$ for this controller structure, and use them to design the integrator state initialization $\\xi(0^{+})$ such that the integrator contribution $I(0^{+})$ ensures a continuous control signal.\n\nAssume the following DT-observed quantities and controller parameters at $t=0$:\n- $u(0^{-}) = 3.1$ volts,\n- $r(0) = 2.0$ (same unit as $y$),\n- $y(0) = 1.7$ (same unit as $r$),\n- $\\dot{e}(0) = -0.4$ (same unit as $e$ per second),\n- $K_{p} = 3.0$,\n- $K_{i} = 2.0$,\n- $K_{d} = 0.5$,\n- $T_{f} = 0.05$ seconds.\n\nAssume the derivative filter state is initialized to avoid a jump in the derivative contribution by choosing $v(0^{+})$ consistent with the filter model and the DT estimate at $t=0$. Using these data, determine the numerical value of the required integrator contribution $I(0^{+})$ that achieves bumpless transfer. Round your final answer to four significant figures and express it in volts.",
            "solution": "The fundamental principle of bumpless transfer is to ensure the continuity of the control signal, $u(t)$, at the moment of switching from manual to automatic control. Let $t=0$ be the time of the switch. The condition for bumpless transfer is thus:\n$$\nu(0^{+}) = u(0^{-})\n$$\nwhere $u(0^{-})$ is the control signal value in manual mode immediately prior to the switch, and $u(0^{+})$ is the initial value of the control signal generated by the automatic PID controller immediately after the switch.\n\nThe problem provides the value of the manual control signal as $u(0^{-}) = 3.1$ volts.\n\nThe PID controller is defined in parallel form as:\n$$\nu(t) = K_{p}\\,e(t) + I(t) + K_{d}\\,v(t)\n$$\nAt the instant $t=0^{+}$, the automatic controller's output is:\n$$\nu(0^{+}) = K_{p}\\,e(0^{+}) + I(0^{+}) + K_{d}\\,v(0^{+})\n$$\nTo achieve bumpless transfer, we must have:\n$$\nu(0^{-}) = K_{p}\\,e(0^{+}) + I(0^{+}) + K_{d}\\,v(0^{+})\n$$\nOur goal is to determine the required value of the integrator contribution, $I(0^{+})$, that satisfies this equation. This requires us to determine the values of the other terms at $t=0^{+}$.\n\nFirst, we determine the proportional term's contribution. The tracking error is $e(t) = r(t) - y(t)$. Assuming that the plant output $y(t)$ and the setpoint $r(t)$ are continuous functions of time at the switching instant (a standard assumption for physical systems and non-impulsive setpoint changes), we have $e(0^{+}) = e(0)$. The values at $t=0$ are given: $r(0) = 2.0$ and $y(0) = 1.7$.\nTherefore, the error at the time of switching is:\n$$\ne(0) = r(0) - y(0) = 2.0 - 1.7 = 0.3\n$$\nThe contribution from the proportional term is $K_{p}\\,e(0)$.\n\nSecond, we determine the derivative term's contribution. The filtered derivative of the error, $v(t)$, is governed by the differential equation $T_{f}\\,\\dot{v}(t) + v(t) = \\dot{e}(t)$. The problem states that the derivative filter state $v(0^{+})$ is to be initialized to be \"consistent with the filter model and the DT estimate at $t=0$\". This is a standard procedure to avoid an artificial 'kick' from the derivative term upon initialization. The most direct and common method for a smooth initialization is to set the filter's state equal to the current (unfiltered) value of the signal it is meant to be filtering. In this case, the input to the filter is $\\dot{e}(t)$, and the Digital Twin provides the estimate $\\dot{e}(0) = -0.4$. Thus, we initialize the filter state as:\n$$\nv(0^{+}) = \\dot{e}(0) = -0.4\n$$\nThis initialization implies that at $t=0$, the filter equation becomes $T_{f}\\,\\dot{v}(0^{+}) + \\dot{e}(0) = \\dot{e}(0)$, which leads to $T_{f}\\,\\dot{v}(0^{+}) = 0$. Since $T_{f} = 0.05 \\neq 0$, this means $\\dot{v}(0^{+}) = 0$. This corresponds to an optimally smooth start for the derivative filter, as its rate of change is initially zero.\n\nNow we can substitute the known quantities into the bumpless transfer condition:\n$$\nu(0^{-}) = K_{p}\\,e(0) + I(0^{+}) + K_{d}\\,v(0^{+})\n$$\nWe can rearrange this equation to solve for the required integrator contribution, $I(0^{+})$:\n$$\nI(0^{+}) = u(0^{-}) - K_{p}\\,e(0) - K_{d}\\,v(0^{+})\n$$\nSubstituting $e(0) = r(0) - y(0)$ and $v(0^{+}) = \\dot{e}(0)$, we get the general design equation:\n$$\nI(0^{+}) = u(0^{-}) - K_{p}\\,(r(0) - y(0)) - K_{d}\\,\\dot{e}(0)\n$$\nWe now substitute the given numerical values:\n- $u(0^{-}) = 3.1$\n- $K_{p} = 3.0$\n- $r(0) = 2.0$\n- $y(0) = 1.7$\n- $K_{d} = 0.5$\n- $\\dot{e}(0) = -0.4$\n\nThe calculation is as follows:\n$$\nI(0^{+}) = 3.1 - (3.0) \\times (2.0 - 1.7) - (0.5) \\times (-0.4)\n$$\n$$\nI(0^{+}) = 3.1 - (3.0) \\times (0.3) - (-0.2)\n$$\n$$\nI(0^{+}) = 3.1 - 0.9 + 0.2\n$$\n$$\nI(0^{+}) = 2.2 + 0.2\n$$\n$$\nI(0^{+}) = 2.4\n$$\nThe problem also asks to design the integrator state initialization $\\xi(0^{+})$. The relationship is given by $I(t) = K_{i}\\,\\xi(t)$. Therefore, at $t=0^{+}$:\n$$\n\\xi(0^{+}) = \\frac{I(0^{+})}{K_{i}}\n$$\nUsing the given value $K_{i} = 2.0$:\n$$\n\\xi(0^{+}) = \\frac{2.4}{2.0} = 1.2\n$$\nThis completes the design aspect of the problem. The final numerical answer required is the value for $I(0^{+})$, expressed in volts and rounded to four significant figures.\n\nThe calculated value is $I(0^{+}) = 2.4$. To express this with four significant figures, we write it as $2.400$.",
            "answer": "$$\\boxed{2.400}$$"
        },
        {
            "introduction": "A theoretical controller can command any output, but physical actuators have limits. This exercise addresses the pervasive issue of integrator windup, which occurs when a PID controller's integral term accumulates excessive error during actuator saturation. You will explore the mechanism of anti-windup by calculating the maximum allowable integrator state before saturation takes hold, a key concept for ensuring robust controller performance under real-world physical constraints .",
            "id": "2731947",
            "problem": "A unity-feedback loop uses a Proportional-Integral-Derivative (PID) controller tuned by the Ziegler–Nichols (ZN) ultimate oscillation method. In the ultimate test with a proportional-only controller, sustained oscillations were observed at the ultimate gain $K_{u} = 8$ and ultimate period $T_{u} = 2.5\\,\\mathrm{s}$. The PID is implemented in the ideal parallel form, and the actuator saturates at an upper hard limit $u_{\\max} = 4.5$ (in the actuator’s native units).\n\nAt an instant $t_{0}$ during a large setpoint change, the measured error and its time derivative are $e(t_{0}) = 0.8$ and $\\dot{e}(t_{0}) = -0.3\\,\\mathrm{s}^{-1}$, respectively. The derivative action is applied to the error signal. The controller employs an anti-windup back-calculation scheme with a finite tracking time constant $T_{t}  0$.\n\nAssume standard Ziegler–Nichols rules based on $(K_{u}, T_{u})$ are used to determine the PID parameters, and assume the anti-windup back-calculation drives the internal integrator so that, at equilibrium under saturation, the internally computed unsaturated control equals the saturated actuator output. Under these conditions, determine the maximum value of the controller’s integrator state $x_{I,\\max}(t_{0})$ that is consistent with no windup at $t_{0}$, defined as the value of the integrator state for which the internally computed control equals $u_{\\max}$ at $t_{0}$.\n\nExpress your final answer as a single real number in the units of “error-times-seconds” (for instance, if the error is in radians, the unit is $\\mathrm{rad}\\cdot\\mathrm{s}$). Round your answer to five significant figures.",
            "solution": "The task is to determine the maximum value of the controller's integrator state, denoted $x_{I,\\max}(t_{0})$, such that the controller's internally computed output is precisely at the saturation limit $u_{\\max}$ at a given instant $t_{0}$.\n\nThe ideal parallel form of a PID controller is described by the equation for the unsaturated control output, $u_{unsat}(t)$:\n$$u_{unsat}(t) = K_{p} e(t) + K_{i} x_{I}(t) + K_{d} \\frac{de(t)}{dt}$$\nwhere $x_{I}(t)$ represents the integrator state, defined as $x_{I}(t) = \\int_{0}^{t} e(\\tau) d\\tau$. The parameters $K_{p}$, $K_{i}$, and $K_{d}$ are the proportional, integral, and derivative gains, respectively.\n\nThe problem states that the controller parameters are determined using the standard Ziegler-Nichols ultimate oscillation method rules for a PID controller. These rules are as follows:\n- Proportional gain: $K_{p} = 0.6 K_{u}$\n- Integral time constant: $T_{i} = 0.5 T_{u}$\n- Derivative time constant: $T_{d} = 0.125 T_{u}$\n\nThe gains $K_{i}$ and $K_{d}$ are related to $K_{p}$, $T_{i}$, and $T_{d}$ by the following standard definitions for the parallel form:\n- $K_{i} = \\frac{K_{p}}{T_{i}}$\n- $K_{d} = K_{p} T_{d}$\n\nWe are given the ultimate gain $K_{u} = 8$ and the ultimate period $T_{u} = 2.5\\,\\mathrm{s}$. We can now compute the controller parameters.\n$$K_{p} = 0.6 \\times 8 = 4.8$$\n$$T_{i} = 0.5 \\times 2.5\\,\\mathrm{s} = 1.25\\,\\mathrm{s}$$\n$$T_{d} = 0.125 \\times 2.5\\,\\mathrm{s} = 0.3125\\,\\mathrm{s}$$\n\nUsing these time constants, we compute the integral and derivative gains:\n$$K_{i} = \\frac{K_{p}}{T_{i}} = \\frac{4.8}{1.25\\,\\mathrm{s}} = 3.84\\,\\mathrm{s}^{-1}$$\n$$K_{d} = K_{p} T_{d} = 4.8 \\times 0.3125\\,\\mathrm{s} = 1.5\\,\\mathrm{s}$$\n\nThe condition for the system to be at the threshold of saturation at time $t_{0}$ is that the unsaturated control output equals the saturation limit $u_{\\max}$.\n$$u_{unsat}(t_{0}) = u_{\\max}$$\n\nSubstituting the PID controller equation at $t_{0}$ with the integrator state being $x_{I,\\max}(t_0)$:\n$$K_{p} e(t_{0}) + K_{i} x_{I,\\max}(t_{0}) + K_{d} \\dot{e}(t_{0}) = u_{\\max}$$\nWe must solve this equation for $x_{I,\\max}(t_{0})$.\n$$K_{i} x_{I,\\max}(t_{0}) = u_{\\max} - K_{p} e(t_{0}) - K_{d} \\dot{e}(t_{0})$$\n$$x_{I,\\max}(t_{0}) = \\frac{1}{K_{i}} \\left( u_{\\max} - K_{p} e(t_{0}) - K_{d} \\dot{e}(t_{0}) \\right)$$\n\nNow, we substitute the known numerical values into this expression:\n- $u_{\\max} = 4.5$\n- $e(t_{0}) = 0.8$\n- $\\dot{e}(t_{0}) = -0.3\\,\\mathrm{s}^{-1}$\n- $K_{p} = 4.8$\n- $K_{i} = 3.84\\,\\mathrm{s}^{-1}$\n- $K_{d} = 1.5\\,\\mathrm{s}$\n\nThe computation proceeds as follows:\n$$x_{I,\\max}(t_{0}) = \\frac{1}{3.84} \\left( 4.5 - (4.8)(0.8) - (1.5)(-0.3) \\right)$$\n$$x_{I,\\max}(t_{0}) = \\frac{1}{3.84} \\left( 4.5 - 3.84 - (-0.45) \\right)$$\n$$x_{I,\\max}(t_{0}) = \\frac{1}{3.84} \\left( 4.5 - 3.84 + 0.45 \\right)$$\n$$x_{I,\\max}(t_{0}) = \\frac{1}{3.84} \\left( 0.66 + 0.45 \\right)$$\n$$x_{I,\\max}(t_{0}) = \\frac{1.11}{3.84}$$\n$$x_{I,\\max}(t_{0}) = 0.2890625$$\nThe units are consistent, resulting in \"error-times-seconds\" as required.\n\nThe problem requires the answer to be rounded to five significant figures. The calculated value is $0.2890625$. The first five significant figures are $2, 8, 9, 0, 6$. The subsequent digit is $2$, which is less than $5$, so we round down.\n\nTherefore, the maximum value of the integrator state consistent with no windup is $0.28906$.",
            "answer": "$$\\boxed{0.28906}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "冗余是设计高可靠性系统的基石，但其有效性往往受限于系统检测和处理故障的能力。本练习深入探讨了“不完美覆盖”这一关键概念，即容错机制的成功是概率性的。通过对一个经典的热备份系统进行建模，你将推导灾难性故障的概率，学会如何在分析中同时考虑双重故障场景以及逃脱安全网的单一故障。",
            "id": "4243212",
            "problem": "一个安全关键的赛博物理系统（CPS）使用冗余和数字孪生（DT）来减轻故障。该CPS采用两个相同且独立的控制器副本，配置为二取一热备用模式：如果单个控制器副本的故障能被正确检测和处理，系统可以容忍该故障，但如果两个副本都在任务时间内失效，系统将失去控制。数字孪生监控控制器，并在发生单个控制器故障时，尝试将CPS转换到安全状态（例如，受控关机）。该尝试成功的覆盖概率为 $c \\in (0,1)$，失败的概率为 $1-c$。假设：\n- 每个控制器的故障时间服从指数分布，其恒定失效率为 $\\lambda > 0$，且各副本的故障是相互独立的。\n- 任务时间为 $T > 0$。\n- 在 $[0,T]$ 期间没有维修，也没有共因故障。\n- 覆盖尝试与故障的发生是独立的，一个被覆盖的单点故障可以防止灾难性故障。然而，双重故障（两个副本都在 $[0,T]$ 期间失效）会导致灾难性故障，无论覆盖如何，因为没有功能正常的控制器剩余。\n\n从指数分布的基本可靠性属性和独立性的定义出发，推导在上述单点故障和双重故障组合场景下，在 $[0,T]$ 期间发生灾难性故障概率的闭式解析表达式。用符号 $c$、$\\lambda$ 和 $T$ 表示你的最终答案。",
            "solution": "设 $T_1$ 和 $T_2$ 为两个相同且独立的控制器副本的故障时间的随机变量。根据问题陈述，这些故障时间服从指数分布，其恒定失效率为 $\\lambda > 0$。\n\n单个控制器的可靠性，即其存活时间超过 $t$ 的概率，由可靠性函数 $R(t)$ 给出：\n$$R(t) = P(T_i > t) = \\exp(-\\lambda t) \\quad \\text{for } i \\in \\{1, 2\\}$$\n单个控制器在时间 $t$ 或之前发生故障的概率由累积分布函数（CDF）$F(t)$ 给出：\n$$F(t) = P(T_i \\le t) = 1 - R(t) = 1 - \\exp(-\\lambda t)$$\n\n任务时间是一个固定的时长 $T > 0$。我们关心的是在区间 $[0, T]$ 内发生故障事件的概率。我们将单个控制器在任务期间存活的概率记为 $R_T = R(T) = \\exp(-\\lambda T)$，其在任务期间失效的概率记为 $F_T = F(T) = 1 - \\exp(-\\lambda T)$。\n\n灾难性故障在以下两种互斥的条件下发生：\n1.  **事件 A：** 在 $[0, T]$ 内，两个控制器中恰好有一个发生故障，并且这个单点故障*未*被数字孪生成功处理。这种不完美覆盖的概率是 $1-c$。\n2.  **事件 B：** 两个控制器都在 $[0, T]$ 内发生故障。问题陈述指出，双重故障将导致灾难性故障，无论任何覆盖措施如何。\n\n我们计算每个事件的概率。\n\n**事件 B 的概率：双重故障**\n事件 B 发生，如果控制器1在时间 $T$ 前失效 并且 控制器2在时间 $T$ 前失效。由于控制器故障是独立的，这个联合事件的概率是它们各自故障概率的乘积：\n$$P(B) = P(T_1 \\le T \\text{ and } T_2 \\le T) = P(T_1 \\le T) \\cdot P(T_2 \\le T) = F_T \\cdot F_T = F_T^2$$\n代入 $F_T$ 的表达式：\n$$P(B) = (1 - \\exp(-\\lambda T))^2$$\n\n**事件 A 的概率：未被覆盖的单点故障**\n首先，我们必须确定在任务时间 $T$ 内恰好有一个控制器发生故障的概率。这可以通过两种互斥的方式发生：\n- 控制器1失效（$T_1 \\le T$）而控制器2存活（$T_2 > T$）。\n- 控制器2失效（$T_2 \\le T$）而控制器1存活（$T_1 > T$）。\n\n由于独立性，第一种情况的概率是 $P(T_1 \\le T \\text{ and } T_2 > T) = F_T \\cdot R_T$。\n由于独立性和分布相同，第二种情况的概率是 $P(T_2 \\le T \\text{ and } T_1 > T) = F_T \\cdot R_T$。\n\n恰好发生一次故障的总概率，我们记为 $P_{\\text{1-fault}}$，是这些概率的总和：\n$$P_{\\text{1-fault}} = F_T R_T + F_T R_T = 2 F_T R_T$$\n这个结果等同于两次试验中恰好有一次成功（故障）的二项概率，即 $\\binom{2}{1} F_T^1 R_T^{2-1}$。\n代入 $F_T$ 和 $R_T$ 的表达式：\n$$P_{\\text{1-fault}} = 2 (1 - \\exp(-\\lambda T)) \\exp(-\\lambda T)$$\n事件 A 是发生一个未被覆盖的单点故障。未覆盖的概率为 $1-c$。由于覆盖与故障的发生是独立的，我们有：\n$$P(A) = P_{\\text{1-fault}} \\times P(\\text{not covered}) = (2 F_T R_T) (1-c)$$\n$$P(A) = 2(1-c)(1 - \\exp(-\\lambda T))\\exp(-\\lambda T)$$\n\n**灾难性故障的总概率**\n灾难性故障的总概率 $P_{CF}$ 是互斥事件 A 和 B 的概率之和：\n$$P_{CF} = P(A) + P(B)$$\n$$P_{CF} = 2(1-c)(1 - \\exp(-\\lambda T))\\exp(-\\lambda T) + (1 - \\exp(-\\lambda T))^2$$\n为了得到最终的闭式表达式，我们进行代数简化：\n$$P_{CF} = 2(1-c)(\\exp(-\\lambda T) - \\exp(-2\\lambda T)) + (1 - 2\\exp(-\\lambda T) + \\exp(-2\\lambda T))$$\n展开 $2(1-c)$ 项：\n$$P_{CF} = (2\\exp(-\\lambda T) - 2\\exp(-2\\lambda T)) - (2c\\exp(-\\lambda T) - 2c\\exp(-2\\lambda T)) + 1 - 2\\exp(-\\lambda T) + \\exp(-2\\lambda T)$$\n现在，我们按指数因子对各项进行分组：\n$$P_{CF} = 1 + (2\\exp(-\\lambda T) - 2\\exp(-\\lambda T) - 2c\\exp(-\\lambda T)) + (-2\\exp(-2\\lambda T) + \\exp(-2\\lambda T) + 2c\\exp(-2\\lambda T))$$\n$$P_{CF} = 1 + (-2c\\exp(-\\lambda T)) + (-\\exp(-2\\lambda T) + 2c\\exp(-2\\lambda T))$$\n$$P_{CF} = 1 - 2c\\exp(-\\lambda T) + (2c - 1)\\exp(-2\\lambda T)$$\n这就是在任务时间 $T$ 内发生灾难性故障概率的最终简化闭式解析表达式。",
            "answer": "$$\\boxed{1 - 2c\\exp(-\\lambda T) + (2c - 1)\\exp(-2\\lambda T)}$$"
        },
        {
            "introduction": "故障树分析（FTA）是一种评估系统安全性的重要自顶向下方法。然而，当组件故障由于共享资源或共同环境而并非相互独立时，分析将变得极具挑战性。本练习将演示如何运用基本的容斥原理，在存在重叠最小割集时准确计算系统故障概率，并进一步要求你量化统计相关性带来的影响，从而从理想化的独立模型过渡到更贴近现实的分析。",
            "id": "4243229",
            "problem": "一个赛博物理过程单元由一个数字孪生进行监控，该数字孪生执行故障树分析（FTA）以估计一个危险顶事件的概率。顶事件（记为 $T$）在一个任务窗口内发生，如果两个最小割集 $\\{A,B\\}$ 或 $\\{B,C\\}$ 中至少有一个失效。这里 $A$ 表示传感通道在任务窗口内的失效，$B$ 表示共享控制器的失效，$C$ 表示执行器接口的失效。因此，最小割集在 $B$ 上是重叠的。设任务窗口内的边际基本事件失效概率为 $p_{A} = \\mathbb{P}(A)$、$p_{B} = \\mathbb{P}(B)$ 和 $p_{C} = \\mathbb{P}(C)$，其中 $0 \\le p_{A}, p_{B}, p_{C} \\le 1$。\n\n从概率公理和容斥原理出发，首先用基本事件的联合概率来表示 $\\mathbb{P}(T)$。然后考虑两种随机模型：\n\n1. 一个独立模型，其中 $A$、$B$ 和 $C$ 在任务窗口内相互独立。\n\n2. 一个相关模型，该模型捕捉了事件对 $\\{A,B\\}$ 和 $\\{B,C\\}$ 之间的共同原因相关性以及可能的同时三重重叠，由满足概率可行性约束的非负乘子 $\\alpha$ 和 $\\beta$ 参数化。在此模型中，\n$\\mathbb{P}(A \\cap B) = \\alpha\\, p_{A} p_{B}$，$\\mathbb{P}(B \\cap C) = \\alpha\\, p_{B} p_{C}$，以及 $\\mathbb{P}(A \\cap B \\cap C) = \\beta\\, p_{A} p_{B} p_{C}$。\n\n令 $\\mathbb{P}_{\\mathrm{ind}}(T)$ 表示独立模型下的顶事件概率，$\\mathbb{P}_{\\mathrm{dep}}(T)$ 表示相关模型下的顶事件概率。定义相关性影响为差值 $\\Delta \\equiv \\mathbb{P}_{\\mathrm{dep}}(T) - \\mathbb{P}_{\\mathrm{ind}}(T)$。\n\n仅使用概率基本定律和容斥原理，推导出一个用 $p_{A}$、$p_{B}$、$p_{C}$、$\\alpha$ 和 $\\beta$ 表示的 $\\Delta$ 的闭式解析表达式。以单个简化表达式的形式提供你的最终答案。不需要进行数值计算。",
            "solution": "我们从概率的基本公理和容斥原理开始。顶事件 $T$ 发生，如果重叠的最小割集中至少有一个失效。记 $K_{1} \\equiv A \\cap B$ 和 $K_{2} \\equiv B \\cap C$。那么顶事件为 $T = K_{1} \\cup K_{2}$。根据容斥原理，\n$$\n\\mathbb{P}(T) \\;=\\; \\mathbb{P}(K_{1} \\cup K_{2}) \\;=\\; \\mathbb{P}(K_{1}) + \\mathbb{P}(K_{2}) - \\mathbb{P}(K_{1} \\cap K_{2}).\n$$\n根据构造，$K_{1} \\cap K_{2} = (A \\cap B) \\cap (B \\cap C) = A \\cap B \\cap C$，因此\n$$\n\\mathbb{P}(T) \\;=\\; \\mathbb{P}(A \\cap B) + \\mathbb{P}(B \\cap C) - \\mathbb{P}(A \\cap B \\cap C).\n$$\n\n在独立模型下，基本事件 $A$、$B$ 和 $C$ 相互独立，所以\n$$\n\\mathbb{P}_{\\mathrm{ind}}(T) \\;=\\; \\mathbb{P}(A)\\mathbb{P}(B) + \\mathbb{P}(B)\\mathbb{P}(C) - \\mathbb{P}(A)\\mathbb{P}(B)\\mathbb{P}(C) \\;=\\; p_{A} p_{B} + p_{B} p_{C} - p_{A} p_{B} p_{C}.\n$$\n\n在相关模型下，给定条件为\n$$\n\\mathbb{P}(A \\cap B) \\;=\\; \\alpha\\, p_{A} p_{B}, \\quad\n\\mathbb{P}(B \\cap C) \\;=\\; \\alpha\\, p_{B} p_{C}, \\quad\n\\mathbb{P}(A \\cap B \\cap C) \\;=\\; \\beta\\, p_{A} p_{B} p_{C},\n$$\n其中 $\\alpha$ 参数化了重叠事件对 $\\{A,B\\}$ 和 $\\{B,C\\}$ 相对于独立基线的成对正相关程度，而 $\\beta$ 参数化了相对于独立基线的三重重叠程度。代入容斥原理表达式可得\n$$\n\\mathbb{P}_{\\mathrm{dep}}(T) \\;=\\; \\alpha\\, p_{A} p_{B} + \\alpha\\, p_{B} p_{C} - \\beta\\, p_{A} p_{B} p_{C}.\n$$\n\n相关性影响 $\\Delta$ 是差值\n$$\n\\Delta \\equiv \\mathbb{P}_{\\mathrm{dep}}(T) - \\mathbb{P}_{\\mathrm{ind}}(T),\n$$\n所以代入以上两个表达式，\n\\begin{align*}\n\\Delta\n= \\left(\\alpha\\, p_{A} p_{B} + \\alpha\\, p_{B} p_{C} - \\beta\\, p_{A} p_{B} p_{C}\\right) - \\left(p_{A} p_{B} + p_{B} p_{C} - p_{A} p_{B} p_{C}\\right) \\\\\n= (\\alpha - 1)\\, p_{A} p_{B} + (\\alpha - 1)\\, p_{B} p_{C} - (\\beta - 1)\\, p_{A} p_{B} p_{C}.\n\\end{align*}\n这可以因式分解为\n$$\n\\Delta \\;=\\; (\\alpha - 1)\\left(p_{A} p_{B} + p_{B} p_{C}\\right) - (\\beta - 1)\\, p_{A} p_{B} p_{C}.\n$$\n\n这个表达式完全由概率公理和容斥原理推导得出。它量化了相关性的影响：增加 $\\alpha$（更强的成对重叠）会使 $\\Delta$ 以斜率 $p_{A} p_{B} + p_{B} p_{C}$ 线性增加，而增加 $\\beta$（在成对项固定的情况下更强的三重重叠）会使 $\\Delta$ 以斜率 $-\\, p_{A} p_{B} p_{C}$ 线性减少。因此，相关性对顶事件概率相对于独立基线的净效应被上述闭式表达式精确地捕捉。",
            "answer": "$$\\boxed{(\\alpha - 1)\\left(p_{A} p_{B} + p_{B} p_{C}\\right) - (\\beta - 1)\\, p_{A} p_{B} p_{C}}$$"
        },
        {
            "introduction": "在对信息物理系统（CPS）及其数字孪生进行形式化验证时，一个核心挑战是模型与现实之间存在的偏差。本练习探讨了模型“抽象误差”对安全验证的影响，其核心原理是为真实系统轨迹与模型轨迹之间的偏差设定一个界限。通过运用微分不等式的原理，你将推导出一个严格的界限，确定在保证物理系统始终处于已验证的安全集内的情况下，模型所能容忍的最大误差 $\\varepsilon$ 是多少。",
            "id": "4243186",
            "problem": "考虑一个信息物理系统（受控系统），其状态 $x(t) \\in \\mathbb{R}^{n}$ 和输入 $u(t) \\in \\mathbb{R}^{m}$ 由微分方程 $\\dot{x}(t) = f(x(t), u(t))$ 控制，其中矢量场 $f$ 在状态上对输入一致地全局利普希茨，利普希茨常数为 $L > 0$，即对于所有 $x_{1}, x_{2} \\in \\mathbb{R}^{n}$ 和所有容许的输入 $u$，满足 $||f(x_{1}, u) - f(x_{2}, u)|| \\leq L ||x_{1} - x_{2}||$。一个数字孪生模型（抽象）使用矢量场 $\\hat{f}(x, u)$，并通过 $\\dot{\\hat{x}}(t) = \\hat{f}(\\hat{x}(t), u(t))$ 模拟孪生轨迹 $\\hat{x}(t)$。假设矢量场中的抽象误差由一个常数 $\\varepsilon \\geq 0$ 一致有界，即对于所有的 $x$ 和容许的 $u$，满足 $||f(x, u) - \\hat{f}(x, u)|| \\leq \\varepsilon$。并且，受控系统和孪生系统在有限时间域 $[0, T]$ 上共享相同的初始条件 $x(0) = \\hat{x}(0)$ 和相同的输入信号 $u(t)$。\n\n设已验证的安全集为 $S \\subset \\mathbb{R}^{n}$，其边界为 $\\partial S$。对数字孪生执行的验证过程已确定，对于所有 $t \\in [0, T]$，孪生可达集 $\\hat{R}(t)$ 满足间隙条件 $d(\\hat{R}(t), \\partial S) \\geq \\Delta$，其中 $d(A, B) = \\inf\\{||a - b|| : a \\in A, b \\in B\\}$ 表示集合间的欧几里得距离。在相同的输入和初始条件下，受控系统的可达集为 $R(t)$。如果可达集之间的豪斯多夫距离 $d_{H}(R(t), \\hat{R}(t))$ 保持有界，从而使得对于所有 $t \\in [0, T]$ 都有 $R(t) \\subset S$，则认为该验证对抽象误差是鲁棒的。\n\n仅使用所述的利普希茨性质、一致抽象误差界、可达集和豪斯多夫距离 $d_{H}$ 的定义，推导在 $[0, T]$ 上 $d_{H}(R(t), \\hat{R}(t))$ 的一个界，并确定能保证安全证明在 $[0, T]$ 上保持有效的最大一致抽象误差 $\\varepsilon_{\\max}$（用 $L$、$T$ 和 $\\Delta$ 表示）。然后，对于 $L = 1.1$，$T = 3$ 和 $\\Delta = 0.2$ 计算 $\\varepsilon_{\\max}$ 的值。将最终答案表示为一个实数，并四舍五入到四位有效数字。",
            "solution": "首先，我们定义受控系统轨迹 $x(t)$ 与数字孪生轨迹 $\\hat{x}(t)$ 之间的误差向量为 $e(t) = x(t) - \\hat{x}(t)$。根据问题陈述，初始误差为零，即 $e(0) = x(0) - \\hat{x}(0) = 0$。\n\n误差向量的时间导数 $\\dot{e}(t)$ 为：\n$$\n\\dot{e}(t) = \\dot{x}(t) - \\dot{\\hat{x}}(t) = f(x(t), u(t)) - \\hat{f}(\\hat{x}(t), u(t))\n$$\n为了推导其范数的界，我们使用三角不等式，并引入辅助项 $f(\\hat{x}(t), u(t))$：\n$$\n||\\dot{e}(t)|| = ||f(x(t), u(t)) - f(\\hat{x}(t), u(t)) + f(\\hat{x}(t), u(t)) - \\hat{f}(\\hat{x}(t), u(t))||\n$$\n$$\n||\\dot{e}(t)|| \\leq ||f(x(t), u(t)) - f(\\hat{x}(t), u(t))|| + ||f(\\hat{x}(t), u(t)) - \\hat{f}(\\hat{x}(t), u(t))||\n$$\n根据 $f$ 的利普希茨性质和一致抽象误差界 $\\varepsilon$，上式可以界定为：\n$$\n||\\dot{e}(t)|| \\leq L ||x(t) - \\hat{x}(t)|| + \\varepsilon = L ||e(t)|| + \\varepsilon\n$$\n考虑到误差范数的变化率满足 $\\frac{d}{dt}||e(t)|| \\leq ||\\dot{e}(t)||$，我们得到关于标量函数 $v(t) = ||e(t)||$ 的微分不等式：\n$$\n\\frac{d v(t)}{dt} \\leq L v(t) + \\varepsilon, \\quad v(0) = 0\n$$\n这是一个标准形式的格林沃尔-贝尔曼不等式。其解为：\n$$\nv(t) \\leq \\frac{\\varepsilon}{L} (\\exp(Lt) - 1)\n$$\n因此，在任意时刻 $t \\in [0, T]$，真实轨迹与孪生轨迹之间的偏差有界：\n$$\n||x(t) - \\hat{x}(t)|| \\leq \\frac{\\varepsilon}{L} (\\exp(Lt) - 1)\n$$\n由于受控系统和孪生系统共享相同的初始条件和输入，它们在任何时刻 $t$ 的可达集 $R(t)$ 和 $\\hat{R}(t)$ 都是单点集。因此，它们之间的豪斯多夫距离 $d_{H}(R(t), \\hat{R}(t))$ 等于其元素之间的欧几里得距离 $||x(t) - \\hat{x}(t)||$。上述不等式即为豪斯多夫距离的界。\n\n为保证验证的鲁棒性，真实系统的轨迹必须始终保持在安全集 $S$ 内。验证过程保证了孪生轨迹 $\\hat{x}(t)$ 与安全集边界 $\\partial S$ 之间的距离至少为 $\\Delta$。因此，我们必须确保真实轨迹与孪生轨迹之间的最大偏差不超过这个安全裕度 $\\Delta$。即：\n$$\n\\sup_{t \\in [0, T]} d_{H}(R(t), \\hat{R}(t)) \\leq \\Delta\n$$\n由于我们推导的偏差界 $\\frac{\\varepsilon}{L}(\\exp(Lt) - 1)$ 是关于 $t$ 的单调递增函数（当 $L > 0$ 时），其在区间 $[0, T]$ 上的最大值在 $t=T$ 处取得。因此，安全条件变为：\n$$\n\\frac{\\varepsilon}{L} (\\exp(LT) - 1) \\leq \\Delta\n$$\n从此不等式解出 $\\varepsilon$，我们得到能够保证安全性的最大一致抽象误差 $\\varepsilon_{\\max}$：\n$$\n\\varepsilon_{\\max} = \\frac{L \\Delta}{\\exp(LT) - 1}\n$$\n现在，代入给定的数值 $L = 1.1$，$T = 3$ 和 $\\Delta = 0.2$：\n$$\n\\varepsilon_{\\max} = \\frac{1.1 \\times 0.2}{\\exp(1.1 \\times 3) - 1} = \\frac{0.22}{\\exp(3.3) - 1}\n$$\n计算数值结果：\n$$\n\\exp(3.3) \\approx 27.112639\n$$\n$$\n\\varepsilon_{\\max} \\approx \\frac{0.22}{27.112639 - 1} = \\frac{0.22}{26.112639} \\approx 0.00842525\n$$\n将结果四舍五入到四位有效数字，得到 $0.008425$。",
            "answer": "$$\n\\boxed{0.008425}\n$$"
        }
    ]
}
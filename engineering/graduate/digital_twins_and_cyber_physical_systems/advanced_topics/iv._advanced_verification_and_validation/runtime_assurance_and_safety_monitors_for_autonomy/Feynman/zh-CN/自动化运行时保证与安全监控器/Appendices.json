{
    "hands_on_practices": [
        {
            "introduction": "Simplex 架构通过在高性能控制器和可证明安全的控制器之间切换，为运行时保障提供了一个基础框架。本练习让您扮演安全监控器的角色，您必须使用预测模型评估高级控制器指令的安全性。通过执行此检查并计算最小纠正措施，您将亲身体验这一重要安全模式的核心决策逻辑。",
            "id": "4242281",
            "problem": "考虑一个信息物理系统 (CPS) 中的连续时间线性动态系统，其状态 $x \\in \\mathbb{R}^{2}$ 和控制输入 $u \\in \\mathbb{R}$ 由 $\\dot{x} = Ax + Bu$ 控制。安全集是多面体 $S = \\{ x \\in \\mathbb{R}^{2} : Cx \\le d \\}$，其中 $C \\in \\mathbb{R}^{4 \\times 2}$ 和 $d \\in \\mathbb{R}^{4}$ 分别编码了面法向量和边界。一个运行时保障 (RA) Simplex 监视器使用数字孪生模型进行预测性评估。为防止模型失配和执行延迟，监视器通过要求 $C(Ax + Bu) \\le d'$ 来收紧容许导数集，其中 $d' = d - m$，$m \\in \\mathbb{R}^{4}$ 是一个已知的正裕度向量。Simplex 架构在安全能够被认证时选择高级控制器 $u_{a}(x)$，否则切换到基线控制器 $u_{b}(x)$。基线控制器由最小范数校正动作 $u_{b}$ 定义，该动作求解在约束 $C(Ax + Bu) \\le d'$ 下的 $\\min \\|u\\|$ 问题。\n\n从多面体安全集的前向不变性定义（要求沿每个面法线的方向导数在边界上或边界附近不指向外）出发，监视器使用在当前状态 $x$ 和高级控制 $u_{a}(x)$ 下评估的收紧约束 $C(Ax + Bu) \\le d'$ 执行单步前瞻检查。如果任何分量违反了收紧的边界，监视器将切换到基线控制器。\n\n设系统矩阵和安全集为\n$$\nA = \\begin{pmatrix}\n0  1 \\\\\n-2  -\\tfrac{1}{2}\n\\end{pmatrix}, \\quad\nB = \\begin{pmatrix}\n0 \\\\\n1\n\\end{pmatrix}, \\quad\nC = \\begin{pmatrix}\n1  0 \\\\\n-1  0 \\\\\n0  1 \\\\\n0  -1\n\\end{pmatrix}, \\quad\nd = \\begin{pmatrix}\n1 \\\\\n1 \\\\\n1 \\\\\n1\n\\end{pmatrix}.\n$$\n因此 $S = \\{ x \\in \\mathbb{R}^{2} : |x_{1}| \\le 1, \\, |x_{2}| \\le 1 \\}$。假设已知的裕度为\n$$\nm = \\begin{pmatrix}\n0.2 \\\\\n0.2 \\\\\n0.2 \\\\\n0.2\n\\end{pmatrix},\n$$\n因此 $d' = d - m = \\begin{pmatrix} 0.8 \\\\ 0.8 \\\\ 0.8 \\\\ 0.8 \\end{pmatrix}$。高级控制器是\n$$\nu_{a}(x) = -3 x_{1} - x_{2},\n$$\n当前状态是\n$$\nx = \\begin{pmatrix}\n0.95 \\\\\n0.2\n\\end{pmatrix}.\n$$\n\n使用基于不变性的收紧约束 $C(Ax + Bu) \\le d'$ 和最小范数基线公式，确定 Simplex 监视器的切换决策 $s \\in \\{0,1\\}$，其中 $s = 1$ 表示切换到基线控制器，$s = 0$ 表示继续使用高级控制器。此外，计算满足 $C(Ax + Bu_{b}) \\le d'$ 的相应最小范数基线输入 $u_{b}$。\n\n将您的最终答案表示为一个行矩阵，按顺序包含 $s$ 和 $u_{b}$。无需四舍五入。",
            "solution": "首先验证问题，以确保其具有科学依据、良定、客观和完整。\n\n### 第1步：提取已知条件\n- 系统动态：$\\dot{x} = Ax + Bu$，其中 $x \\in \\mathbb{R}^{2}$ 且 $u \\in \\mathbb{R}$。\n- 系统矩阵：\n$$\nA = \\begin{pmatrix}\n0  1 \\\\\n-2  -\\frac{1}{2}\n\\end{pmatrix}, \\quad\nB = \\begin{pmatrix}\n0 \\\\\n1\n\\end{pmatrix}\n$$\n- 安全集：$S = \\{ x \\in \\mathbb{R}^{2} : Cx \\le d \\}$。\n- 安全集矩阵：\n$$\nC = \\begin{pmatrix}\n1  0 \\\\\n-1  0 \\\\\n0  1 \\\\\n0  -1\n\\end{pmatrix}, \\quad\nd = \\begin{pmatrix}\n1 \\\\\n1 \\\\\n1 \\\\\n1\n\\end{pmatrix}\n$$\n- 安全裕度：$m = \\begin{pmatrix} 0.2 \\\\ 0.2 \\\\ 0.2 \\\\ 0.2 \\end{pmatrix}$。\n- 收紧的安全边界：$d' = d - m$。\n- 收紧的不变性条件：$C(Ax + Bu) \\le d'$。\n- 高级控制器：$u_{a}(x) = -3 x_{1} - x_{2}$。\n- 基线控制器：$u_{b}$ 是在约束 $C(Ax + Bu) \\le d'$ 下求解 $\\min \\|u\\|$ 的解。\n- 当前状态：$x = \\begin{pmatrix} 0.95 \\\\ 0.2 \\end{pmatrix}$。\n- 切换决策：$s \\in \\{0, 1\\}$，其中 $s=1$ 表示切换到基线控制器。\n\n### 第2步：使用提取的已知条件进行验证\n该问题在控制理论和信息物理系统运行时保障领域具有科学依据，特别是使用了 Simplex 架构。多面体安全集、前向不变性和最小范数校正控制的概念在该领域是标准的。该问题是良定的，提供了执行所需计算的所有必要矩阵、向量、状态值和控制器定义。语言精确客观，使用了标准的数学形式体系。数据在量纲上是一致的，没有明显的矛盾或不切实际的条件。该问题并非无足轻重，因为它需要执行一个标准但非显而易见的安全验证和控制综合过程。因此，该问题被认为是有效的。\n\n### 第3步：结论与行动\n问题有效。将提供完整解答。\n\n任务包括两部分：\n1.  通过检查高级控制器 $u_{a}(x)$ 在当前状态 $x$ 下是否满足收紧的安全条件来确定切换决策 $s$。\n2.  如果需要切换，计算满足条件的最小范数基线控制器 $u_{b}$。\n\n首先，我们确定切换决策。Simplex 监视器检查来自高级控制器的控制输入 $u_{a}(x)$ 是否满足收紧的不变性条件 $C (Ax + Bu_{a}(x)) \\le d'$。如果所有分量都满足此条件，则高级控制器被认证为安全，且 $s=0$。如果不等式的任何分量被违反，监视器必须切换到基线控制器，因此 $s=1$。\n\n我们已知当前状态为 $x = \\begin{pmatrix} 0.95 \\\\ 0.2 \\end{pmatrix}$。\n为确保精确性，我们将状态和裕度表示为分数：$x = \\begin{pmatrix} \\frac{19}{20} \\\\ \\frac{1}{5} \\end{pmatrix}$ 和 $m = \\begin{pmatrix} \\frac{1}{5} \\\\ \\frac{1}{5} \\\\ \\frac{1}{5} \\\\ \\frac{1}{5} \\end{pmatrix}$。\n\n在状态 $x$ 下的高级控制输入 $u_{a}$ 是：\n$$\nu_{a}(x) = -3 x_1 - x_2 = -3 \\left(\\frac{19}{20}\\right) - \\frac{1}{5} = -\\frac{57}{20} - \\frac{4}{20} = -\\frac{61}{20}\n$$\n\n接下来，我们计算状态导数 $\\dot{x} = Ax + Bu_{a}(x)$：\n$$\nAx = \\begin{pmatrix} 0  1 \\\\ -2  -\\frac{1}{2} \\end{pmatrix} \\begin{pmatrix} \\frac{19}{20} \\\\ \\frac{1}{5} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -2(\\frac{19}{20}) - \\frac{1}{2}(\\frac{1}{5}) \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{19}{10} - \\frac{1}{10} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{20}{10} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -2 \\end{pmatrix}\n$$\n$$\nBu_{a}(x) = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} \\left(-\\frac{61}{20}\\right) = \\begin{pmatrix} 0 \\\\ -\\frac{61}{20} \\end{pmatrix}\n$$\n$$\nAx + Bu_{a}(x) = \\begin{pmatrix} \\frac{1}{5} \\\\ -2 \\end{pmatrix} + \\begin{pmatrix} 0 \\\\ -\\frac{61}{20} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{40}{20} - \\frac{61}{20} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{101}{20} \\end{pmatrix}\n$$\n现在，我们通过左乘 $C$ 来评估安全条件：\n$$\nC(Ax + Bu_{a}(x)) = \\begin{pmatrix} 1  0 \\\\ -1  0 \\\\ 0  1 \\\\ 0  -1 \\end{pmatrix} \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{101}{20} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{1}{5} \\\\ -\\frac{101}{20} \\\\ \\frac{101}{20} \\end{pmatrix} = \\begin{pmatrix} 0.2 \\\\ -0.2 \\\\ -5.05 \\\\ 5.05 \\end{pmatrix}\n$$\n收紧的边界向量是：\n$$\nd' = d - m = \\begin{pmatrix} 1 \\\\ 1 \\\\ 1 \\\\ 1 \\end{pmatrix} - \\begin{pmatrix} 0.2 \\\\ 0.2 \\\\ 0.2 \\\\ 0.2 \\end{pmatrix} = \\begin{pmatrix} 0.8 \\\\ 0.8 \\\\ 0.8 \\\\ 0.8 \\end{pmatrix} = \\begin{pmatrix} \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\end{pmatrix}\n$$\n我们将 $C(Ax + Bu_{a}(x))$ 与 $d'$ 进行比较：\n1. $\\frac{1}{5} \\le \\frac{4}{5}$ (真)\n2. $-\\frac{1}{5} \\le \\frac{4}{5}$ (真)\n3. $-\\frac{101}{20} \\le \\frac{4}{5}$ (真，因为 $-\\frac{101}{20} = -5.05$ 且 $\\frac{4}{5} = 0.8$)\n4. $\\frac{101}{20} \\le \\frac{4}{5}$ (假，因为 $\\frac{101}{20} = 5.05$ 且 $\\frac{4}{5} = 0.8$)\n\n由于第四个约束被违反，高级控制器在下一步不被视为安全。监视器必须介入。因此，切换决策为 $s=1$。\n\n现在，我们计算基线控制输入 $u_{b}$。它被定义为以下优化问题的解：\n$$\n\\min_{u \\in \\mathbb{R}} \\|u\\| \\quad \\text{subject to} \\quad C(Ax + Bu) \\le d'\n$$\n由于 $u$ 是一个标量，最小化 $\\|u\\|$ 等同于最小化 $|u|$，也等同于最小化 $u^2$。问题在于找到满足约束且具有最小模的 $u$ 值。\n约束可以展开为：\n$$\nCAx + CBu \\le d' \\implies CBu \\le d' - CAx\n$$\n我们计算常数向量 $CB$ 和 $d' - CAx$。\n$$\nCB = \\begin{pmatrix} 1  0 \\\\ -1  0 \\\\ 0  1 \\\\ 0  -1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 0 \\\\ 1 \\\\ -1 \\end{pmatrix}\n$$\n$$\nCAx = \\begin{pmatrix} 1  0 \\\\ -1  0 \\\\ 0  1 \\\\ 0  -1 \\end{pmatrix} \\begin{pmatrix} \\frac{1}{5} \\\\ -2 \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{1}{5} \\\\ -2 \\\\ 2 \\end{pmatrix}\n$$\n$$\nd' - CAx = \\begin{pmatrix} \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\end{pmatrix} - \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{1}{5} \\\\ -2 \\\\ 2 \\end{pmatrix} = \\begin{pmatrix} \\frac{3}{5} \\\\ 1 \\\\ \\frac{14}{5} \\\\ -\\frac{6}{5} \\end{pmatrix}\n$$\n约束 $CBu \\le d' - CAx$ 变为：\n$$\n\\begin{pmatrix} 0 \\\\ 0 \\\\ 1 \\\\ -1 \\end{pmatrix} u \\le \\begin{pmatrix} \\frac{3}{5} \\\\ 1 \\\\ \\frac{14}{5} \\\\ -\\frac{6}{5} \\end{pmatrix}\n$$\n这为 $u$ 产生了一组不等式：\n1. $0 \\cdot u \\le \\frac{3}{5}$ (即 $0 \\le \\frac{3}{5}$，此式恒为真，不对 $u$ 施加约束。)\n2. $0 \\cdot u \\le 1$ (恒为真，不对 $u$ 施加约束。)\n3. $1 \\cdot u \\le \\frac{14}{5} \\implies u \\le \\frac{14}{5}$\n4. $-1 \\cdot u \\le -\\frac{6}{5} \\implies u \\ge \\frac{6}{5}$\n\n因此，$u$ 的可行集是闭区间 $\\left[\\frac{6}{5}, \\frac{14}{5}\\right]$。我们需要找到该区间中模最小的 $u$ 值。函数 $f(u) = |u|$ 在 $u=0$ 处最小化。区间 $\\left[\\frac{6}{5}, \\frac{14}{5}\\right]$（即 $[1.2, 2.8]$）中离 $0$ 最近的点是左端点 $u = \\frac{6}{5}$。\n因此，最小范数基线控制输入为：\n$$\nu_{b} = \\frac{6}{5} = 1.2\n$$\n最终答案包括切换决策 $s=1$ 和基线控制 $u_{b} = \\frac{6}{5}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1  \\frac{6}{5}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "超越简单的切换，现代安全监控器通常使用控制屏障函数 (Control Barrier Functions, CBFs) 来最小程度地修改标称控制指令，从而在不剧烈改变系统行为的情况下确保安全。本练习要求您使用李导数 (Lie derivatives) 来构建安全约束，然后求解一个二次规划 (Quadratic Program, QP) 问题以找到最优的安全控制输入。这个过程是许多高级驾驶辅助系统和机器人安全应用的核心，本练习将阐明 CBF 理论及其实际应用之间的联系。",
            "id": "4242299",
            "problem": "考虑一个通过数字孪生实现的自主信息物理系统的运行时保障安全滤波器。该数字孪生提供了一个形式为 $\\dot{x} = f(x) + g(x)\\,u$ 的受控对象标称状态空间模型，其中 $x \\in \\mathbb{R}^{2}$ 且 $u \\in \\mathbb{R}$。安全集由一个连续可微的控制屏障函数 (CBF) $h:\\mathbb{R}^{2}\\to\\mathbb{R}$ 指定，安全集为 $\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} : h(x) \\ge 0\\}$。该运行时保障监视器通过确保不等式 $L_{f}h(x) + L_{g}h(x)\\,u + \\alpha\\!\\left(h(x)\\right) \\ge 0$ 时刻成立来强制实现 $\\mathcal{C}$ 的前向不变性，其中 $L_{f}h$ 和 $L_{g}h$ 表示李导数，$\\alpha(\\cdot)$ 是一个扩展 $\\mathcal{K}$ 类函数。\n\n在每个时刻，给定来自高层自主栈的标称控制 $u_{n}(x)$，监视器通过求解二次规划 (QP) 来计算一个最小侵入性安全控制：\n$$\nu^{\\star}(x) \\;=\\; \\arg\\min_{u \\in \\mathbb{R}} \\;\\|u - u_{n}(x)\\|^{2}\n$$\n该规划受 CBF 约束和执行器边界 $u \\in U$ 的限制，其中 $U$ 是一个闭区间。\n\n仅从上述定义以及李导数和扩展 $\\mathcal{K}$ 类函数的标准属性出发，完成以下任务：\n\n$1.$ 对于具有以下参数的特定数字孪生模型：\n$$\nf(x) \\;=\\; \\begin{bmatrix} x_{2} \\\\ -\\lambda\\,x_{1} \\end{bmatrix}, \n\\quad\ng(x) \\;=\\; \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix},\n\\quad\nh(x) \\;=\\; x_{1} - p_{\\min},\n$$\n其中参数 $\\lambda  0$ 和 $p_{\\min} \\in \\mathbb{R}$，并且 $\\alpha(s) = \\gamma\\,s$（对于 $\\gamma  0$），推导出在通用状态 $x$ 下，由 CBF 条件所蕴含的关于 $u$ 的显式不等式约束。\n\n$2.$ 使用第 1 部分的结果，将 QP 显式地写成一个带有线性不等式约束和箱式约束的标量优化问题，用 $x$、$\\gamma$ 和控制边界 $U = [u_{\\min}, u_{\\max}]$ 表示。\n\n$3.$ 在状态\n$$\nx \\;=\\; \\begin{bmatrix} -0.05 \\\\ -0.02 \\end{bmatrix}\n$$\n下，求解此 QP 的一个数值实例，参数为 $p_{\\min} = 0$，$\\gamma = 4$，控制边界为 $U = [u_{\\min}, u_{\\max}] = [-0.10,\\, 0.25]$，标称控制为 $u_{n}(x) = 0.30$。将最优控制 $u^{\\star}(x)$ 的精确值以单个实数形式给出。不要四舍五入；以有理数或有限小数的形式给出精确值。",
            "solution": "首先将对问题的科学合理性、完整性和客观性进行验证。\n\n### 问题验证\n\n**步骤 1：提取已知条件**\n\n- 系统动力学：$\\dot{x} = f(x) + g(x)\\,u$，其中 $x \\in \\mathbb{R}^{2}$ 且 $u \\in \\mathbb{R}$。\n- 安全集：$\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} : h(x) \\ge 0\\}$，其中 $h:\\mathbb{R}^{2}\\to\\mathbb{R}$ 是一个连续可微的控制屏障函数 (CBF)。\n- 运行时保障条件：$L_{f}h(x) + L_{g}h(x)\\,u + \\alpha\\!\\left(h(x)\\right) \\ge 0$，其中 $L_{f}h$ 和 $L_{g}h$ 是李导数，$\\alpha(\\cdot)$ 是一个扩展 $\\mathcal{K}$ 类函数。\n- 安全控制二次规划 (QP)：$u^{\\star}(x) \\;=\\; \\arg\\min_{u \\in \\mathbb{R}} \\;\\|u - u_{n}(x)\\|^{2}$，受 CBF 约束和执行器边界 $u \\in U$ 的限制。\n- 第 1 部分的特定模型：\n  - $f(x) \\;=\\; \\begin{bmatrix} x_{2} \\\\ -\\lambda\\,x_{1} \\end{bmatrix}$\n  - $g(x) \\;=\\; \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}$\n  - $h(x) \\;=\\; x_{1} - p_{\\min}$\n  - 参数：$\\lambda  0$, $p_{\\min} \\in \\mathbb{R}$\n  - $\\mathcal{K}$ 类函数：$\\alpha(s) = \\gamma\\,s$，其中 $\\gamma  0$。\n- 第 2 部分的 QP 公式：\n  - 用 $x$、$\\gamma$ 和控制边界 $U = [u_{\\min}, u_{\\max}]$ 表示。\n- 第 3 部分的数值实例：\n  - 状态：$x \\;=\\; \\begin{bmatrix} -0.05 \\\\ -0.02 \\end{bmatrix}$\n  - 参数：$p_{\\min} = 0$，$\\gamma = 4$\n  - 控制边界：$U = [-0.10,\\, 0.25]$\n  - 标称控制：$u_{n}(x) = 0.30$。\n\n**步骤 2：使用提取的已知条件进行验证**\n\n- **科学依据**：该问题基于控制屏障函数的成熟理论，这是现代自主系统安全关键控制的基石。李导数、$\\mathcal{K}$ 类函数以及安全滤波器的 QP 公式的定义都是标准且正确的。该问题是既定原则的直接应用。\n- **适定性**：该问题分为三个逻辑部分。第 1 部分是直接推导。第 2 部分要求构建一个 QP，这是一个标准的凸优化问题（在线性不等式定义的集合上最小化一个二次函数）。第 3 部分提供了该 QP 的一个具体数值实例。由于目标函数是严格凸的，且可行集是一个闭合的、非空的（如解中所述）凸集，因此存在唯一解。\n- **客观性**：该问题以精确的数学和工程术语陈述。所有组件都已定义，没有使用主观或模糊的语言。\n- **完整性与一致性**：每个部分所需的所有函数、参数和数值都已提供。已知条件中没有矛盾。\n- **其他缺陷**：该问题并非不切实际、不适定、微不足道或无法验证。它是运行时保障和信息物理系统主题内一个直接且相关的问题。\n\n**步骤 3：结论与行动**\n\n该问题有效。将提供完整解答。\n\n### 解答\n\n**第 1 部分：推导 CBF 不等式约束**\n\nCBF 约束由以下不等式给出：\n$$\nL_{f}h(x) + L_{g}h(x)\\,u + \\alpha\\!\\left(h(x)\\right) \\ge 0\n$$\n为了使该不等式显式化，我们必须计算 $h(x)$ 关于 $f(x)$ 和 $g(x)$ 的李导数。标量函数 $h$ 关于向量场 $v$ 的李导数为 $L_{v}h(x) = \\nabla h(x) \\cdot v(x) = (\\nabla h(x))^{\\top} v(x)$。\n\n给定 CBF $h(x) = x_{1} - p_{\\min}$，其关于 $x = \\begin{bmatrix} x_1 \\\\ x_2 \\end{bmatrix}$ 的梯度为：\n$$\n\\nabla h(x) = \\begin{bmatrix} \\frac{\\partial h}{\\partial x_{1}} \\\\ \\frac{\\partial h}{\\partial x_{2}} \\end{bmatrix} = \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}\n$$\n现在，我们使用给定的 $f(x)$ 和 $g(x)$ 计算李导数：\n$$\nL_{f}h(x) = (\\nabla h(x))^{\\top} f(x) = \\begin{bmatrix} 1  0 \\end{bmatrix} \\begin{bmatrix} x_{2} \\\\ -\\lambda\\,x_{1} \\end{bmatrix} = 1 \\cdot x_{2} + 0 \\cdot (-\\lambda\\,x_{1}) = x_{2}\n$$\n$$\nL_{g}h(x) = (\\nabla h(x))^{\\top} g(x) = \\begin{bmatrix} 1  0 \\end{bmatrix} \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix} = 1 \\cdot 1 + 0 \\cdot 0 = 1\n$$\n我们还已知 $\\alpha(s) = \\gamma s$，因此 $\\alpha(h(x)) = \\gamma h(x) = \\gamma(x_{1} - p_{\\min})$。\n\n将这些分量代回 CBF 不等式，得到：\n$$\nx_{2} + (1)u + \\gamma(x_{1} - p_{\\min}) \\ge 0\n$$\n这就是在状态 $x$ 下对控制输入 $u$ 的显式不等式约束。\n\n**第 2 部分：显式二次规划公式**\n\n运行时保障监视器求解以下 QP：\n$$\nu^{\\star}(x) \\;=\\; \\arg\\min_{u \\in \\mathbb{R}} \\;\\|u - u_{n}(x)\\|^{2}\n$$\n受 CBF 约束和执行器边界 $u \\in U = [u_{\\min}, u_{\\max}]$ 的限制。对于标量控制 $u$，最小化 $\\|u - u_{n}(x)\\|^{2}$ 等价于最小化 $(u - u_{n}(x))^{2}$。\n\n约束条件是：\n1. 在第 1 部分中推导的 CBF 约束：$x_{2} + u + \\gamma(x_{1} - p_{\\min}) \\ge 0$。\n2. 执行器（箱式）约束：$u_{\\min} \\le u \\le u_{\\max}$。\n\n我们可以重写 CBF 约束以分离出 $u$：\n$$\nu \\ge -x_{2} - \\gamma(x_{1} - p_{\\min})\n$$\n因此，表示为具有线性不等式和箱式约束的标量优化问题的完整 QP 是：\n$$\n\\text{最小化} \\quad (u - u_{n}(x))^{2} \\\\\n\\text{约束条件为} \\quad u \\ge -x_{2} - \\gamma x_{1} + \\gamma p_{\\min} \\\\\n\\qquad \\qquad u_{\\min} \\le u \\le u_{\\max}\n$$\n该公式用状态 $x=\\begin{bmatrix} x_1 \\\\ x_2 \\end{bmatrix}$、参数 $\\gamma$ 和 $p_{\\min}$、标称控制 $u_n(x)$ 以及控制边界 $u_{\\min}$、$u_{\\max}$ 表示。\n\n**第 3 部分：QP 的数值解**\n\n我们得到以下数值：\n- 状态：$x = \\begin{bmatrix} -0.05 \\\\ -0.02 \\end{bmatrix}$，所以 $x_{1} = -0.05$ 且 $x_{2} = -0.02$。\n- 参数：$p_{\\min} = 0$ 和 $\\gamma = 4$。\n- 控制边界：$U = [-0.10,\\, 0.25]$，所以 $u_{\\min} = -0.10$ 且 $u_{\\max} = 0.25$。\n- 标称控制：$u_{n}(x) = 0.30$。\n\n首先，我们将这些值代入约束条件中，以确定 $u$ 的可行集。\n\nCBF 约束为：\n$$\nu \\ge -x_{2} - \\gamma x_{1} + \\gamma p_{\\min} \\\\\nu \\ge -(-0.02) - (4)(-0.05) + (4)(0) \\\\\nu \\ge 0.02 + 0.20 \\\\\nu \\ge 0.22\n$$\n执行器约束为：\n$$\n-0.10 \\le u \\le 0.25\n$$\n$u$ 的可行集是这些约束的交集：$u$ 必须同时满足 $u \\ge 0.22$ 和 $-0.10 \\le u \\le 0.25$。交集是闭区间 $[0.22, 0.25]$。\n\n优化问题是在区间 $[0.22, 0.25]$ 内找到使目标函数 $(u - 0.30)^{2}$ 最小化的 $u$ 值。这等价于在区间 $[0.22, 0.25]$ 中找到离标称控制值 $u_{n} = 0.30$ 最近的点。\n\n目标函数的无约束最小化点是 $u = 0.30$。该值位于可行区间 $[0.22, 0.25]$ 之外。目标函数是一个开口向上的抛物线，因此其值随着我们远离最小值点 $u=0.30$ 而增加。因此，该区间上的最小值必须出现在离 $0.30$ 最近的边界点上。\n\n两个边界点是 $0.22$ 和 $0.25$。\n- 到左边界的距离是 $|0.22 - 0.30| = |-0.08| = 0.08$。\n- 到右边界的距离是 $|0.25 - 0.30| = |-0.05| = 0.05$。\n\n右边界 $u=0.25$ 更接近标称控制 $u_{n} = 0.30$。因此，该 QP 的解，即最小侵入性安全控制，是：\n$$\nu^{\\star}(x) = 0.25\n$$\n这个值是一个有限小数，它是一个精确的有理数。",
            "answer": "$$\n\\boxed{0.25}\n$$"
        },
        {
            "introduction": "一个理论上可靠的安全监控器，只有当其计算能够在实时控制回路的严格时间限制内完成时，才具有实际意义。最后的这个练习将重点从控制理论转向计算可行性，这是信息物理系统工程的一个关键方面。您将分析前一个练习中基于二次规划 (QP) 的安全滤波器的计算复杂性，并确定在给定的最差情况执行时间 (WCET) 预算内可以解决的最大问题规模，从而突显算法性能和硬件能力之间的关键权衡。",
            "id": "4242289",
            "problem": "一个基于投影的安全屏障被集成到一个信息物理自主系统数字孪生的运行时保障架构中。该屏障在每个控制周期 $T$ 通过求解一个形式为 $\\min_{x \\in \\mathbb{R}^{n}} \\frac{1}{2} x^{\\top} Hx + f^{\\top}x$ 且受线性不等式约束的凸二次规划（QP）问题，来修改一个建议的控制输入 $u \\in \\mathbb{R}^{n}$，以确保状态和输入约束得到遵守。每个周期内监视器可用的最坏情况执行时间（WCET）预算为 $T_m$。假设使用一个稠密的原始-对偶内点法求解器，该求解器具有以下基于基础数值线性代数和控制理论的现实特性：\n- 每次内点法迭代需要组合并求解一个维度为 $n$ 的对称正定正规方程组，该方程组通过 Karush–Kuhn–Tucker (KKT) 条件的 Schur 补简化得到。\n- 每次迭代的主要计算工作是稠密的类 Cholesky 分解及相关的三角求解，其浮点运算（FLOP）次数可以由 $cn^{3}$ 作为上界，其中常数 $c  0$ 由线性代数核决定。对于此平台和公式，取 $c = \\frac{10}{3}$。\n- 由于监视器固定的精度要求，达到可行性和最优性固定容差所需的迭代次数 $k$ 受一个小的常数限制；取 $k = 20$。\n- 处理器维持每秒 $S = 8 \\times 10^{9}$ 次浮点运算的吞吐量。\n- 控制循环周期为 $T = 10~\\mathrm{ms}$，监视器的 WCET 预算为 $T_{m} = 2~\\mathrm{ms}$。所有时间都必须以秒为单位进行处理和计算。\n\n从求解稠密线性系统的基本事实和内点法的结构出发，推导该屏障每个周期的计算复杂度（用 $n$ 和参数 $(c, k, S)$ 表示），然后确定最大整数维度 $n_{\\max}$，使得屏障的计算能在监视器的 WCET 预算 $T_{m}$ 内完成。将你的最终答案表示为精确整数 $n_{\\max}$，除了选择满足不等式约束的最大整数外，不需要进行任何舍入。在整个推理和计算过程中，使用秒作为时间单位。",
            "solution": "首先将根据指定程序验证问题陈述。\n\n### 步骤1：提取已知条件\n- 系统是一个带有基于投影的安全屏障的信息物理自主系统。\n- 屏障修改一个控制输入 $u \\in \\mathbb{R}^{n}$。\n- 屏障求解一个形式为 $\\min_{x \\in \\mathbb{R}^{n}} \\frac{1}{2} x^{\\top}Hx + f^{\\top}x$ 且受线性不等式约束的凸二次规划（QP）问题。\n- 求解器是一个稠密的原始-对偶内点法求解器。\n- 每次迭代的主要计算工作是稠密的类 Cholesky 分解，其浮点运算（FLOP）次数的上界为 $cn^{3}$。\n- 给定常数 $c = \\frac{10}{3}$。\n- 迭代次数 $k$ 固定为 $k = 20$。\n- 处理器维持每秒 $S = 8 \\times 10^{9}$ FLOPs 的吞吐量。\n- 控制循环周期为 $T = 10~\\mathrm{ms}$。\n- 监视器的最坏情况执行时间（WCET）预算为 $T_m = 2~\\mathrm{ms}$。\n- 所有时间单位在计算中必须是秒。\n- 目标是找到最大整数维度 $n_{\\max}$，使得屏障的计算时间不超过 $T_m$。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据：** 该问题在控制理论和数值优化方面有充分的依据。基于 QP 的安全屏障是自主系统运行时保障中的一种标准技术。一个稠密内点法的计算模型，其主要部分是由一个复杂度为 $O(n^{3})$ 的矩阵分解主导，这是数值线性代数中的一个基本结论。给出的处理器速度和时序约束参数对于当代高性能嵌入式控制应用是现实的。\n- **适定性：** 该问题提供了一个明确的目标（找到 $n_{\\max}$）和充分、一致的信息来建立一个可解的不等式。存在一个满足所推导不等式的最大整数，确保了解决方案的唯一性和意义。\n- **客观性：** 问题陈述使用了精确、技术性的语言，没有主观或含糊不清的术语。\n- **完整性和一致性：** 提供了所有必要的参数（$c, k, S, T_m$）。时间单位被指定为秒。约束条件是明确的。信息是自洽的，没有矛盾。$T = 10~\\mathrm{ms}$ 的存在与计算无关，但并未造成矛盾，因为 $T_m  T$ 是一个合乎逻辑的系统设计选择。\n\n### 步骤3：结论和行动\n问题被认为是**有效的**，因为它是科学合理的、适定的和客观的。将推导解决方案。\n\n### 求解过程推导\n问题要求找到最大控制维度 $n_{\\max}$，使得安全屏障的计算时间 $T_{\\text{exec}}$ 不超过分配的 WCET 预算 $T_m$。\n\n计算复杂度以浮点运算（FLOPs）次数给出。\n内点法求解器单次迭代所需的 FLOPs 次数由 $cn^{3}$ 给出，其中 $n$ 是控制输入向量的维度。\n令 $F_{\\text{iter}}$ 为每次迭代的 FLOPs 次数。\n$$F_{\\text{iter}}(n) = cn^{3}$$\n\n求解器执行固定次数的迭代，即 $k$ 次。因此，求解 QP 所需的总 FLOPs 次数 $F_{\\text{total}}$ 为：\n$$F_{\\text{total}}(n) = k \\cdot F_{\\text{iter}}(n) = kcn^{3}$$\n\n处理器的已知吞吐量为每秒 $S$ 次 FLOPs。执行时间 $T_{\\text{exec}}$ 是总 FLOPs 次数除以处理器的吞吐量：\n$$T_{\\text{exec}}(n) = \\frac{F_{\\text{total}}(n)}{S} = \\frac{kcn^{3}}{S}$$\n\n安全监视器必须在 WCET 预算 $T_m$ 内完成其计算。这对执行时间施加了以下约束：\n$$T_{\\text{exec}}(n) \\le T_m$$\n\n代入 $T_{\\text{exec}}(n)$ 的表达式，我们得到关于 $n$ 的不等式：\n$$\\frac{kcn^{3}}{S} \\le T_m$$\n\n为了找到最大可能维度 $n$，我们解这个关于 $n$ 的不等式：\n$$n^{3} \\le \\frac{T_m S}{kc}$$\n$$n \\le \\left( \\frac{T_m S}{kc} \\right)^{1/3}$$\n\n最大整数维度 $n_{\\max}$ 是满足此条件的最大整数。这可以通过对右侧表达式取底函数得到。\n$$n_{\\max} = \\left\\lfloor \\left( \\frac{T_m S}{kc} \\right)^{1/3} \\right\\rfloor$$\n\n现在，我们将给定的数值代入此表达式。首先，我们确保所有单位一致。时间预算 $T_m$ 以毫秒为单位给出，必须转换为秒。\n- $k = 20$\n- $c = \\frac{10}{3}$\n- $S = 8 \\times 10^{9} \\ \\mathrm{s}^{-1}$\n- $T_m = 2~\\mathrm{ms} = 2 \\times 10^{-3} \\ \\mathrm{s}$\n\n让我们计算立方根内的值：\n$$\\frac{T_m S}{kc} = \\frac{(2 \\times 10^{-3}) \\times (8 \\times 10^{9})}{20 \\times \\frac{10}{3}}$$\n$$\\frac{T_m S}{kc} = \\frac{16 \\times 10^{6}}{\\frac{200}{3}} = \\frac{16 \\times 3 \\times 10^{6}}{200} = \\frac{48 \\times 10^{6}}{2 \\times 10^{2}} = 24 \\times 10^{4} = 240000$$\n\n现在，我们必须通过计算立方根来找到 $n_{\\max}$：\n$$n_{\\max} = \\left\\lfloor (240000)^{1/3} \\right\\rfloor$$\n\n为了找到整数值，我们可以测试整数的立方：\n$60^{3} = 216000$\n$61^{3} = 226981$\n$62^{3} = 238328$\n$63^{3} = 250047$\n\n因为 $62^{3} = 238328 \\le 240000$ 且 $63^{3} = 250047  240000$，满足 $n^{3} \\le 240000$ 的最大整数 $n$ 是 $62$。\n\n因此，控制输入的最大整数维度为 $n_{\\max} = 62$。",
            "answer": "$$\\boxed{62}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "A powerful method for ensuring the safety of autonomous systems is to use a Control Barrier Function (CBF) to define a safe region of operation. This practice demonstrates how to translate the abstract CBF condition, which guarantees forward invariance of the safe set, into a concrete Quadratic Program (QP). By solving this QP, a safety monitor can find the minimal modification to a desired, high-performance control input to certify its safety, a core principle of minimally invasive runtime assurance. ",
            "id": "4242299",
            "problem": "Consider a runtime assurance safety filter for an autonomous cyber-physical system implemented via a digital twin. The digital twin provides a nominal state-space model of the plant of the form $\\dot{x} = f(x) + g(x)\\,u$, where $x \\in \\mathbb{R}^{2}$ and $u \\in \\mathbb{R}$. The safety set is specified by a continuously differentiable Control Barrier Function (CBF) $h:\\mathbb{R}^{2}\\to\\mathbb{R}$, with safe set $\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} : h(x) \\ge 0\\}$. The runtime assurance monitor enforces forward invariance of $\\mathcal{C}$ by ensuring the inequality $\\mathcal{L}_{f}h(x) + \\mathcal{L}_{g}h(x)\\,u + \\alpha\\!\\left(h(x)\\right) \\ge 0$ holds at all times, where $\\mathcal{L}_{f}h$ and $\\mathcal{L}_{g}h$ denote the Lie derivatives and $\\alpha(\\cdot)$ is an extended class $\\mathcal{K}$ function.\n\nAt each time instant, given a nominal control $u_{n}(x)$ from a high-level autonomy stack, the monitor computes a minimally invasive safe control by solving the Quadratic Program (QP)\n$$\nu^{\\star}(x) \\;=\\; \\arg\\min_{u \\in \\mathbb{R}} \\;\\|u - u_{n}(x)\\|^{2}\n$$\nsubject to the CBF constraint and actuator bounds $u \\in U$, where $U$ is a closed interval.\n\nStarting only from the definitions above and standard properties of Lie derivatives and extended class $\\mathcal{K}$ functions, perform the following:\n\n$1.$ For the specific digital-twin model with\n$$\nf(x) \\;=\\; \\begin{bmatrix} x_{2} \\\\ -\\lambda\\,x_{1} \\end{bmatrix}, \n\\quad\ng(x) \\;=\\; \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix},\n\\quad\nh(x) \\;=\\; x_{1} - p_{\\min},\n$$\nwith parameters $\\lambda > 0$ and $p_{\\min} \\in \\mathbb{R}$, and with $\\alpha(s) = \\gamma\\,s$ for $\\gamma > 0$, derive the explicit inequality constraint on $u$ implied by the CBF condition at a generic state $x$.\n\n$2.$ Using the result from part $1$, write the QP explicitly as a scalar optimization with linear inequality constraints and box constraints, in terms of $x$, $\\gamma$, and the control bounds $U = [u_{\\min}, u_{\\max}]$.\n\n$3.$ Solve a numerical instance of this QP at the state\n$$\nx \\;=\\; \\begin{bmatrix} -0.05 \\\\ -0.02 \\end{bmatrix},\n$$\nwith parameters $p_{\\min} = 0$, $\\gamma = 4$, control bounds $U = [u_{\\min}, u_{\\max}] = [-0.10,\\, 0.25]$, and nominal control $u_{n}(x) = 0.30$. Provide the exact value of the optimal control $u^{\\star}(x)$ as a single real number. Do not round; provide the exact value as a rational number or a terminating decimal.",
            "solution": "The problem will first be validated for scientific soundness, completeness, and objectivity.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n\n- System dynamics: $\\dot{x} = f(x) + g(x)\\,u$, with $x \\in \\mathbb{R}^{2}$ and $u \\in \\mathbb{R}$.\n- Safety set: $\\mathcal{C} = \\{x \\in \\mathbb{R}^{2} : h(x) \\ge 0\\}$, where $h:\\mathbb{R}^{2}\\to\\mathbb{R}$ is a continuously differentiable Control Barrier Function (CBF).\n- Runtime assurance condition: $\\mathcal{L}_{f}h(x) + \\mathcal{L}_{g}h(x)\\,u + \\alpha\\!\\left(h(x)\\right) \\ge 0$, where $\\mathcal{L}_{f}h$ and $\\mathcal{L}_{g}h$ are Lie derivatives and $\\alpha(\\cdot)$ is an extended class $\\mathcal{K}$ function.\n- Safe control quadratic program (QP): $u^{\\star}(x) \\;=\\; \\arg\\min_{u \\in \\mathbb{R}} \\;\\|u - u_{n}(x)\\|^{2}$ subject to the CBF constraint and actuator bounds $u \\in U$.\n- Specific model for Part 1:\n  - $f(x) \\;=\\; \\begin{bmatrix} x_{2} \\\\ -\\lambda\\,x_{1} \\end{bmatrix}$\n  - $g(x) \\;=\\; \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}$\n  - $h(x) \\;=\\; x_{1} - p_{\\min}$\n  - Parameters: $\\lambda > 0$, $p_{\\min} \\in \\mathbb{R}$\n  - Class $\\mathcal{K}$ function: $\\alpha(s) = \\gamma\\,s$ for $\\gamma > 0$.\n- QP formulation for Part 2:\n  - In terms of $x$, $\\gamma$, and control bounds $U = [u_{\\min}, u_{\\max}]$.\n- Numerical instance for Part 3:\n  - State: $x \\;=\\; \\begin{bmatrix} -0.05 \\\\ -0.02 \\end{bmatrix}$\n  - Parameters: $p_{\\min} = 0$, $\\gamma = 4$\n  - Control bounds: $U = [-0.10,\\, 0.25]$\n  - Nominal control: $u_{n}(x) = 0.30$.\n\n**Step 2: Validate Using Extracted Givens**\n\n- **Scientifically Grounded**: The problem is based on the well-established theory of Control Barrier Functions, a cornerstone of modern safety-critical control for autonomous systems. The definitions of Lie derivatives, class $\\mathcal{K}$ functions, and the QP formulation for a safety filter are standard and correct. The problem is a direct application of established principles.\n- **Well-Posed**: The problem is broken into three logical parts. Part 1 is a direct derivation. Part 2 asks to formulate a QP, which is a standard convex optimization problem (minimizing a quadratic function over a set defined by linear inequalities). Part 3 provides a concrete numerical instance of this QP. Since the objective function is strictly convex and the feasible set is a closed, non-empty (as shown in the solution) convex set, a unique solution exists.\n- **Objective**: The problem is stated in precise mathematical and engineering terms. All components are defined, and no subjective or ambiguous language is used.\n- **Completeness and Consistency**: All necessary functions, parameters, and numerical values for each part are provided. There are no contradictions in the givens.\n- **Other Flaws**: The problem is not unrealistic, ill-posed, trivial, or unverifiable. It is a direct and pertinent question within the topic of runtime assurance and cyber-physical systems.\n\n**Step 3: Verdict and Action**\n\nThe problem is valid. A complete solution will be provided.\n\n### Solution\n\n**Part 1: Derivation of the CBF Inequality Constraint**\n\nThe CBF constraint is given by the inequality:\n$$\n\\mathcal{L}_{f}h(x) + \\mathcal{L}_{g}h(x)\\,u + \\alpha\\!\\left(h(x)\\right) \\ge 0\n$$\nTo make this inequality explicit, we must compute the Lie derivatives of $h(x)$ with respect to $f(x)$ and $g(x)$. The Lie derivative of a scalar function $h$ with respect to a vector field $v$ is $\\mathcal{L}_{v}h(x) = \\nabla h(x) \\cdot v(x) = (\\nabla h(x))^{T} v(x)$.\n\nGiven the CBF $h(x) = x_{1} - p_{\\min}$, its gradient with respect to $x = \\begin{bmatrix} x_1 \\\\ x_2 \\end{bmatrix}$ is:\n$$\n\\nabla h(x) = \\begin{bmatrix} \\frac{\\partial h}{\\partial x_{1}} \\\\ \\frac{\\partial h}{\\partial x_{2}} \\end{bmatrix} = \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix}\n$$\nNow, we compute the Lie derivatives using the given $f(x)$ and $g(x)$:\n$$\n\\mathcal{L}_{f}h(x) = (\\nabla h(x))^{T} f(x) = \\begin{bmatrix} 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_{2} \\\\ -\\lambda\\,x_{1} \\end{bmatrix} = 1 \\cdot x_{2} + 0 \\cdot (-\\lambda\\,x_{1}) = x_{2}\n$$\n$$\n\\mathcal{L}_{g}h(x) = (\\nabla h(x))^{T} g(x) = \\begin{bmatrix} 1 & 0 \\end{bmatrix} \\begin{bmatrix} 1 \\\\ 0 \\end{bmatrix} = 1 \\cdot 1 + 0 \\cdot 0 = 1\n$$\nWe are also given $\\alpha(s) = \\gamma s$, so $\\alpha(h(x)) = \\gamma h(x) = \\gamma(x_{1} - p_{\\min})$.\n\nSubstituting these components back into the CBF inequality yields:\n$$\nx_{2} + (1)u + \\gamma(x_{1} - p_{\\min}) \\ge 0\n$$\nThis is the explicit inequality constraint on the control input $u$ at a state $x$.\n\n**Part 2: Explicit Quadratic Program Formulation**\n\nThe runtime assurance monitor solves the QP:\n$$\nu^{\\star}(x) \\;=\\; \\arg\\min_{u \\in \\mathbb{R}} \\;\\|u - u_{n}(x)\\|^{2}\n$$\nsubject to the CBF constraint and actuator bounds $u \\in U = [u_{\\min}, u_{\\max}]$. For a scalar control $u$, minimizing $\\|u - u_{n}(x)\\|^{2}$ is equivalent to minimizing $(u - u_{n}(x))^{2}$.\n\nThe constraints are:\n1. The CBF constraint derived in Part 1: $x_{2} + u + \\gamma(x_{1} - p_{\\min}) \\ge 0$.\n2. The actuator (box) constraints: $u_{\\min} \\le u \\le u_{\\max}$.\n\nWe can rewrite the CBF constraint to isolate $u$:\n$$\nu \\ge -x_{2} - \\gamma(x_{1} - p_{\\min})\n$$\nThe complete QP, expressed as a scalar optimization problem with linear inequality and box constraints, is therefore:\n$$\n\\text{minimize} \\quad (u - u_{n}(x))^{2} \\\\\n\\text{subject to} \\quad u \\ge -x_{2} - \\gamma x_{1} + \\gamma p_{\\min} \\\\\n\\qquad \\qquad u_{\\min} \\le u \\le u_{\\max}\n$$\nThis formulation is in terms of the state $x=\\begin{bmatrix} x_1 \\\\ x_2 \\end{bmatrix}$, parameters $\\gamma$ and $p_{\\min}$, the nominal control $u_n(x)$, and the control bounds $u_{\\min}$, $u_{\\max}$.\n\n**Part 3: Numerical Solution of the QP**\n\nWe are given the following numerical values:\n- State: $x = \\begin{bmatrix} -0.05 \\\\ -0.02 \\end{bmatrix}$, so $x_{1} = -0.05$ and $x_{2} = -0.02$.\n- Parameters: $p_{\\min} = 0$ and $\\gamma = 4$.\n- Control bounds: $U = [-0.10,\\, 0.25]$, so $u_{\\min} = -0.10$ and $u_{\\max} = 0.25$.\n- Nominal control: $u_{n}(x) = 0.30$.\n\nFirst, we determine the feasible set for $u$ by substituting these values into the constraints.\n\nThe CBF constraint is:\n$$\nu \\ge -x_{2} - \\gamma x_{1} + \\gamma p_{\\min} \\\\\nu \\ge -(-0.02) - (4)(-0.05) + (4)(0) \\\\\nu \\ge 0.02 + 0.20 \\\\\nu \\ge 0.22\n$$\nThe actuator constraints are:\n$$\n-0.10 \\le u \\le 0.25\n$$\nThe feasible set for $u$ is the intersection of these constraints: $u$ must satisfy both $u \\ge 0.22$ and $-0.10 \\le u \\le 0.25$. The intersection is the closed interval $[0.22, 0.25]$.\n\nThe optimization problem is to find the value of $u$ in the interval $[0.22, 0.25]$ that minimizes the objective function $(u - 0.30)^{2}$. This is equivalent to finding the point in the interval $[0.22, 0.25]$ that is closest to the nominal control value $u_{n} = 0.30$.\n\nThe unconstrained minimizer of the objective function is at $u = 0.30$. This value lies outside the feasible interval $[0.22, 0.25]$. The objective function is a parabola opening upwards, so its value increases as we move away from the minimum at $u=0.30$. Therefore, the minimum over the interval must occur at the boundary point closest to $0.30$.\n\nThe two boundary points are $0.22$ and $0.25$.\n- The distance to the left boundary is $|0.22 - 0.30| = |-0.08| = 0.08$.\n- The distance to the right boundary is $|0.25 - 0.30| = |-0.05| = 0.05$.\n\nThe right boundary, $u=0.25$, is closer to the nominal control $u_{n} = 0.30$. Thus, the solution to the QP, which is the minimally invasive safe control, is:\n$$\nu^{\\star}(x) = 0.25\n$$\nThis value is a terminating decimal, which is an exact rational number.",
            "answer": "$$\n\\boxed{0.25}\n$$"
        },
        {
            "introduction": "The Simplex architecture offers a different, yet highly effective, approach to runtime assurance by switching between controllers rather than modifying a single one. An advanced, high-performance controller is used by default, but a safety monitor continuously checks its actions against a predictive model. This exercise challenges you to implement the core logic of such a monitor: evaluating if the advanced controller respects a tightened safety margin and, if not, calculating a pre-defined safe baseline control action to take over. ",
            "id": "4242281",
            "problem": "Consider a continuous-time linear dynamical system in a Cyber-Physical System (CPS) with state $x \\in \\mathbb{R}^{2}$ and control input $u \\in \\mathbb{R}$ governed by $\\dot{x} = A x + B u$. The safety set is the polyhedron $S = \\{ x \\in \\mathbb{R}^{2} : C x \\le d \\}$, where $C \\in \\mathbb{R}^{4 \\times 2}$ and $d \\in \\mathbb{R}^{4}$ encode facet normals and bounds. A Runtime Assurance (RA) Simplex monitor uses a digital twin model for predictive assessment. To guard against model mismatch and actuation delay, the monitor tightens the admissible derivative set by requiring $C (A x + B u) \\le d'$, where $d' = d - m$ and $m \\in \\mathbb{R}^{4}$ is a known positive margin vector. The Simplex architecture selects an advanced controller $u_{a}(x)$ when safety can be certified and switches to a baseline controller $u_{b}(x)$ otherwise. The baseline controller is defined by the minimal-norm corrective action $u_{b}$ that solves $\\min \\| u \\|$ subject to $C (A x + B u) \\le d'$.\n\nStarting from the forward-invariance definition for polyhedral safety sets (requiring that the directional derivative along each facet normal does not point outward on or near the boundary), the monitor performs a one-step lookahead check using the tightened constraint $C (A x + B u) \\le d'$ evaluated at the current state $x$ and the advanced control $u_{a}(x)$. If any component violates the tightened bound, the monitor switches to the baseline controller.\n\nLet the system matrices and safety set be\n$$\nA = \\begin{pmatrix}\n0 & 1 \\\\\n-2 & -\\tfrac{1}{2}\n\\end{pmatrix}, \\quad\nB = \\begin{pmatrix}\n0 \\\\\n1\n\\end{pmatrix}, \\quad\nC = \\begin{pmatrix}\n1 & 0 \\\\\n-1 & 0 \\\\\n0 & 1 \\\\\n0 & -1\n\\end{pmatrix}, \\quad\nd = \\begin{pmatrix}\n1 \\\\\n1 \\\\\n1 \\\\\n1\n\\end{pmatrix}.\n$$\nThus $S = \\{ x \\in \\mathbb{R}^{2} : |x_{1}| \\le 1, \\, |x_{2}| \\le 1 \\}$. Suppose the known margin is\n$$\nm = \\begin{pmatrix}\n0.2 \\\\\n0.2 \\\\\n0.2 \\\\\n0.2\n\\end{pmatrix},\n$$\nso that $d' = d - m = \\begin{pmatrix} 0.8 \\\\ 0.8 \\\\ 0.8 \\\\ 0.8 \\end{pmatrix}$. The advanced controller is\n$$\nu_{a}(x) = -3 x_{1} - x_{2},\n$$\nand the current state is\n$$\nx = \\begin{pmatrix}\n0.95 \\\\\n0.2\n\\end{pmatrix}.\n$$\n\nUsing the invariance-based tightening $C (A x + B u) \\le d'$ and the minimal-norm baseline formulation, determine the Simplex monitor’s switching decision $s \\in \\{0,1\\}$, where $s = 1$ denotes a switch to the baseline controller and $s = 0$ denotes remaining with the advanced controller. Additionally, compute the corresponding minimal-norm baseline input $u_{b}$ that satisfies $C (A x + B u_{b}) \\le d'$.\n\nExpress your final answer as a row matrix containing $s$ and $u_{b}$ in that order. No rounding is required.",
            "solution": "The problem is first validated to ensure it is scientifically grounded, well-posed, objective, and complete.\n\n### Step 1: Extract Givens\n- System dynamics: $\\dot{x} = A x + B u$, where $x \\in \\mathbb{R}^{2}$ and $u \\in \\mathbb{R}$.\n- System matrices:\n$$\nA = \\begin{pmatrix}\n0 & 1 \\\\\n-2 & -\\frac{1}{2}\n\\end{pmatrix}, \\quad\nB = \\begin{pmatrix}\n0 \\\\\n1\n\\end{pmatrix}\n$$\n- Safety set: $S = \\{ x \\in \\mathbb{R}^{2} : C x \\le d \\}$.\n- Safety set matrices:\n$$\nC = \\begin{pmatrix}\n1 & 0 \\\\\n-1 & 0 \\\\\n0 & 1 \\\\\n0 & -1\n\\end{pmatrix}, \\quad\nd = \\begin{pmatrix}\n1 \\\\\n1 \\\\\n1 \\\\\n1\n\\end{pmatrix}\n$$\n- Safety margin: $m = \\begin{pmatrix} 0.2 \\\\ 0.2 \\\\ 0.2 \\\\ 0.2 \\end{pmatrix}$.\n- Tightened safety bound: $d' = d - m$.\n- Tightened invariance condition: $C (A x + B u) \\le d'$.\n- Advanced controller: $u_{a}(x) = -3 x_{1} - x_{2}$.\n- Baseline controller: $u_{b}$ is the solution to $\\min \\| u \\|$ subject to $C (A x + B u) \\le d'$.\n- Current state: $x = \\begin{pmatrix} 0.95 \\\\ 0.2 \\end{pmatrix}$.\n- Switching decision: $s \\in \\{0, 1\\}$, where $s=1$ indicates a switch to the baseline.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is scientifically grounded in the domain of control theory and runtime assurance for cyber-physical systems, specifically using the Simplex architecture. The concepts of polyhedral safety sets, forward invariance, and minimal-norm corrective control are standard in this field. The problem is well-posed, providing all necessary matrices, vectors, state values, and controller definitions to carry out the required calculations. The language is precise and objective, using standard mathematical formalism. The data is dimensionally consistent and poses no apparent contradictions or unrealistic conditions. The problem is not trivial, as it requires executing a standard but non-obvious safety verification and control synthesis procedure. Therefore, the problem is deemed valid.\n\n### Step 3: Verdict and Action\nThe problem is valid. A full solution will be provided.\n\nThe task consists of two parts:\n1.  Determine the switching decision $s$ by checking if the advanced controller $u_{a}(x)$ satisfies the tightened safety condition at the current state $x$.\n2.  If a switch is necessary, compute the minimal-norm baseline controller $u_{b}$ that satisfies the condition.\n\nFirst, we determine the switching decision. The Simplex monitor checks if the control input from the advanced controller, $u_{a}(x)$, satisfies the tightened invariance condition $C (A x + B u_{a}(x)) \\le d'$. If this condition holds for all components, the advanced controller is certified as safe, and $s=0$. If any component of the inequality is violated, the monitor must switch to the baseline controller, so $s=1$.\n\nWe are given the current state $x = \\begin{pmatrix} 0.95 \\\\ 0.2 \\end{pmatrix}$.\nLet's express the state and margin as fractions for exactness: $x = \\begin{pmatrix} \\frac{19}{20} \\\\ \\frac{1}{5} \\end{pmatrix}$ and $m = \\begin{pmatrix} \\frac{1}{5} \\\\ \\frac{1}{5} \\\\ \\frac{1}{5} \\\\ \\frac{1}{5} \\end{pmatrix}$.\n\nThe advanced control input $u_{a}$ at state $x$ is:\n$$\nu_{a}(x) = -3 x_1 - x_2 = -3 \\left(\\frac{19}{20}\\right) - \\frac{1}{5} = -\\frac{57}{20} - \\frac{4}{20} = -\\frac{61}{20}\n$$\n\nNext, we compute the state derivative $\\dot{x} = Ax + Bu_{a}(x)$:\n$$\nAx = \\begin{pmatrix} 0 & 1 \\\\ -2 & -\\frac{1}{2} \\end{pmatrix} \\begin{pmatrix} \\frac{19}{20} \\\\ \\frac{1}{5} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -2(\\frac{19}{20}) - \\frac{1}{2}(\\frac{1}{5}) \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{19}{10} - \\frac{1}{10} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{20}{10} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -2 \\end{pmatrix}\n$$\n$$\nBu_{a}(x) = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} \\left(-\\frac{61}{20}\\right) = \\begin{pmatrix} 0 \\\\ -\\frac{61}{20} \\end{pmatrix}\n$$\n$$\nAx + Bu_{a}(x) = \\begin{pmatrix} \\frac{1}{5} \\\\ -2 \\end{pmatrix} + \\begin{pmatrix} 0 \\\\ -\\frac{61}{20} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{40}{20} - \\frac{61}{20} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{101}{20} \\end{pmatrix}\n$$\nNow, we evaluate the safety condition by premultiplying by $C$:\n$$\nC(Ax + Bu_{a}(x)) = \\begin{pmatrix} 1 & 0 \\\\ -1 & 0 \\\\ 0 & 1 \\\\ 0 & -1 \\end{pmatrix} \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{101}{20} \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{1}{5} \\\\ -\\frac{101}{20} \\\\ \\frac{101}{20} \\end{pmatrix} = \\begin{pmatrix} 0.2 \\\\ -0.2 \\\\ -5.05 \\\\ 5.05 \\end{pmatrix}\n$$\nThe tightened bound vector is:\n$$\nd' = d - m = \\begin{pmatrix} 1 \\\\ 1 \\\\ 1 \\\\ 1 \\end{pmatrix} - \\begin{pmatrix} 0.2 \\\\ 0.2 \\\\ 0.2 \\\\ 0.2 \\end{pmatrix} = \\begin{pmatrix} 0.8 \\\\ 0.8 \\\\ 0.8 \\\\ 0.8 \\end{pmatrix} = \\begin{pmatrix} \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\end{pmatrix}\n$$\nWe compare $C(Ax + Bu_{a}(x))$ with $d'$:\n1. $\\frac{1}{5} \\le \\frac{4}{5}$ (True)\n2. $-\\frac{1}{5} \\le \\frac{4}{5}$ (True)\n3. $-\\frac{101}{20} \\le \\frac{4}{5}$ (True, since $-\\frac{101}{20} = -5.05$ and $\\frac{4}{5} = 0.8$)\n4. $\\frac{101}{20} \\le \\frac{4}{5}$ (False, since $\\frac{101}{20} = 5.05$ and $\\frac{4}{5} = 0.8$)\n\nSince the fourth constraint is violated, the advanced controller is not deemed safe for the next step. The monitor must intervene. Thus, the switching decision is $s=1$.\n\nNow, we compute the baseline control input $u_{b}$. It is defined as the solution to the optimization problem:\n$$\n\\min_{u \\in \\mathbb{R}} \\|u\\| \\quad \\text{subject to} \\quad C(Ax + Bu) \\le d'\n$$\nSince $u$ is a scalar, minimizing $\\|u\\|$ is equivalent to minimizing $|u|$, which is equivalent to minimizing $u^2$. The problem is to find the value of $u$ with the minimum magnitude that satisfies the constraint.\nThe constraint can be expanded as:\n$$\nCAx + CBu \\le d' \\implies CBu \\le d' - CAx\n$$\nWe calculate the constant vectors $CB$ and $d' - CAx$.\n$$\nCB = \\begin{pmatrix} 1 & 0 \\\\ -1 & 0 \\\\ 0 & 1 \\\\ 0 & -1 \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 0 \\\\ 1 \\\\ -1 \\end{pmatrix}\n$$\n$$\nCAx = \\begin{pmatrix} 1 & 0 \\\\ -1 & 0 \\\\ 0 & 1 \\\\ 0 & -1 \\end{pmatrix} \\begin{pmatrix} \\frac{1}{5} \\\\ -2 \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{1}{5} \\\\ -2 \\\\ 2 \\end{pmatrix}\n$$\n$$\nd' - CAx = \\begin{pmatrix} \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\\\ \\frac{4}{5} \\end{pmatrix} - \\begin{pmatrix} \\frac{1}{5} \\\\ -\\frac{1}{5} \\\\ -2 \\\\ 2 \\end{pmatrix} = \\begin{pmatrix} \\frac{3}{5} \\\\ \\frac{5}{5} \\\\ \\frac{4}{5} + 2 \\\\ \\frac{4}{5} - 2 \\end{pmatrix} = \\begin{pmatrix} \\frac{3}{5} \\\\ 1 \\\\ \\frac{14}{5} \\\\ -\\frac{6}{5} \\end{pmatrix}\n$$\nThe constraint $CBu \\le d' - CAx$ becomes:\n$$\n\\begin{pmatrix} 0 \\\\ 0 \\\\ 1 \\\\ -1 \\end{pmatrix} u \\le \\begin{pmatrix} \\frac{3}{5} \\\\ 1 \\\\ \\frac{14}{5} \\\\ -\\frac{6}{5} \\end{pmatrix}\n$$\nThis yields a set of inequalities for $u$:\n1. $0 \\cdot u \\le \\frac{3}{5}$ (This is $0 \\le \\frac{3}{5}$, which is always true and provides no constraint on $u$.)\n2. $0 \\cdot u \\le 1$ (Always true, no constraint on $u$.)\n3. $1 \\cdot u \\le \\frac{14}{5} \\implies u \\le \\frac{14}{5}$\n4. $-1 \\cdot u \\le -\\frac{6}{5} \\implies u \\ge \\frac{6}{5}$\n\nSo, the feasible set for $u$ is the closed interval $\\left[\\frac{6}{5}, \\frac{14}{5}\\right]$. We need to find the value of $u$ in this interval that has the minimum magnitude. The function $f(u) = |u|$ is minimized at $u=0$. The closest point in the interval $\\left[\\frac{6}{5}, \\frac{14}{5}\\right]$ (or $[1.2, 2.8]$) to $0$ is the left endpoint, $u = \\frac{6}{5}$.\nTherefore, the minimal-norm baseline control input is:\n$$\nu_{b} = \\frac{6}{5} = 1.2\n$$\nThe final answer consists of the switching decision $s=1$ and the baseline control $u_{b} = \\frac{6}{5}$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1 & \\frac{6}{5}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Theoretical safety guarantees are only practical if the monitor that enforces them can operate within the real-time constraints of a cyber-physical system. This final practice bridges the gap between control algorithm design and embedded systems implementation by analyzing the computational demands of a safety shield. You will use foundational knowledge of numerical optimization to model the computational cost of a Quadratic Program solver and determine the maximum complexity (i.e., control dimension) that can be handled within a given worst-case execution time (WCET) budget. ",
            "id": "4242289",
            "problem": "A projection-based safety shield is integrated into the runtime assurance architecture of a Digital Twin for a cyber-physical autonomous system. The shield modifies a proposed control input $u \\in \\mathbb{R}^{n}$ at each control period $T$ by solving a convex Quadratic Program (QP) of the form $\\min_{x \\in \\mathbb{R}^{n}} \\frac{1}{2} x^{\\top} H x + f^{\\top} x$ subject to linear inequality constraints, in order to ensure state and input constraints are respected. The Worst-Case Execution Time (WCET) budget available for the monitor per period is $T_{m}$. Assume a dense primal-dual interior-point solver is used with the following realistic properties grounded in fundamental numerical linear algebra and control theory:\n- Each interior-point iteration requires assembling and solving a symmetric positive definite normal-equations system of dimension $n$, obtained via Schur-complement reduction of the Karush–Kuhn–Tucker (KKT) conditions.\n- The dominant per-iteration computational work is a dense Cholesky-like factorization and associated triangular solves whose floating-point operation (FLOP) count can be upper bounded by $c n^{3}$ for some constant $c > 0$ determined by the linear algebra kernels. For this platform and formulation, take $c = \\frac{10}{3}$.\n- The number of iterations $k$ required to reach the fixed tolerance for feasibility and optimality is bounded by a small constant due to the monitor’s fixed accuracy requirement; take $k = 20$.\n- The processor sustains a throughput of $S = 8 \\times 10^{9}$ floating-point operations per second.\n- The control loop period is $T = 10 \\ \\mathrm{ms}$, and the monitor WCET budget is $T_{m} = 2 \\ \\mathrm{ms}$. All times must be treated and computed in seconds.\n\nStarting from fundamental facts about solving dense linear systems and the structure of interior-point methods, derive the per-period computational complexity of the shield in terms of $n$ and the parameters $(c, k, S)$, and then determine the largest integer dimension $n_{\\max}$ such that the shield’s computation completes within the monitor’s WCET budget $T_{m}$. Express your final answer as the exact integer $n_{\\max}$, with no rounding required beyond choosing the largest integer that satisfies the inequality constraint. Use seconds as the time unit throughout your reasoning and computations.",
            "solution": "The problem statement will first be validated according to the specified procedure.\n\n### Step 1: Extract Givens\n- The system is a cyber-physical autonomous system with a projection-based safety shield.\n- The shield modifies a control input $u \\in \\mathbb{R}^{n}$.\n- The shield solves a convex Quadratic Program (QP) of the form $\\min_{x \\in \\mathbb{R}^{n}} \\frac{1}{2} x^{\\top} H x + f^{\\top} x$ subject to linear inequality constraints.\n- The solver is a dense primal-dual interior-point solver.\n- The dominant computational work per iteration is a dense Cholesky-like factorization with a floating-point operation (FLOP) count upper bounded by $c n^{3}$.\n- The constant $c$ is given as $c = \\frac{10}{3}$.\n- The number of iterations $k$ is fixed at $k = 20$.\n- The processor sustains a throughput of $S = 8 \\times 10^{9}$ FLOPs per second.\n- The control loop period is $T = 10 \\ \\mathrm{ms}$.\n- The Worst-Case Execution Time (WCET) budget for the monitor is $T_{m} = 2 \\ \\mathrm{ms}$.\n- All time units must be in seconds for computation.\n- The objective is to find the largest integer dimension $n_{\\max}$ such that the shield's computation time does not exceed $T_{m}$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded:** The problem is well-grounded in control theory and numerical optimization. QP-based safety shields are a standard technique in runtime assurance for autonomous systems. The computational model for a dense interior-point method, dominated by a matrix factorization with $O(n^{3})$ complexity, is a fundamental result in numerical linear algebra. The parameters given for processor speed and timing constraints are realistic for contemporary high-performance embedded control applications.\n- **Well-Posed:** The problem provides a clear objective (find $n_{\\max}$) and sufficient, consistent information to establish a solvable inequality. The existence of a largest integer satisfying the derived inequality ensures a unique and meaningful solution.\n- **Objective:** The problem is stated using precise, technical language with no subjective or ambiguous terms.\n- **Completeness and Consistency:** All necessary parameters ($c, k, S, T_m$) are provided. The unit for time is specified to be seconds. The constraint is clear. The information is self-contained and free from contradictions. The presence of $T = 10 \\ \\mathrm{ms}$ is extraneous to the calculation but does not create a contradiction, as $T_m < T$ is a logical system design choice.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid** as it is scientifically sound, well-posed, and objective. A solution will be derived.\n\n### Derivation of Solution\nThe problem requires finding the maximum control dimension $n_{\\max}$ such that the computation time of the safety shield, $T_{\\text{exec}}$, does not exceed the allocated WCET budget, $T_m$.\n\nThe computational complexity is given in terms of floating-point operations (FLOPs).\nThe number of FLOPs required for a single iteration of the interior-point solver is given as $c n^{3}$, where $n$ is the dimension of the control input vector.\nLet $F_{\\text{iter}}$ be the FLOPs per iteration.\n$$F_{\\text{iter}}(n) = c n^{3}$$\n\nThe solver performs a fixed number of iterations, $k$. Therefore, the total number of FLOPs, $F_{\\text{total}}$, required to solve the QP is:\n$$F_{\\text{total}}(n) = k \\cdot F_{\\text{iter}}(n) = k c n^{3}$$\n\nThe processor has a known throughput of $S$ FLOPs per second. The execution time, $T_{\\text{exec}}$, is the total number of FLOPs divided by the processor's throughput:\n$$T_{\\text{exec}}(n) = \\frac{F_{\\text{total}}(n)}{S} = \\frac{k c n^{3}}{S}$$\n\nThe safety monitor must complete its computation within the WCET budget $T_m$. This imposes the following constraint on the execution time:\n$$T_{\\text{exec}}(n) \\le T_m$$\n\nSubstituting the expression for $T_{\\text{exec}}(n)$, we obtain the inequality for $n$:\n$$\\frac{k c n^{3}}{S} \\le T_m$$\n\nTo find the maximum possible dimension $n$, we solve this inequality for $n$:\n$$n^{3} \\le \\frac{T_m S}{k c}$$\n$$n \\le \\left( \\frac{T_m S}{k c} \\right)^{1/3}$$\n\nThe maximum integer dimension, $n_{\\max}$, is the largest integer that satisfies this condition. This is found by taking the floor of the right-hand side.\n$$n_{\\max} = \\left\\lfloor \\left( \\frac{T_m S}{k c} \\right)^{1/3} \\right\\rfloor$$\n\nNow, we substitute the given numerical values into this expression. First, we ensure all units are consistent. The time budget $T_m$ is given in milliseconds and must be converted to seconds.\n- $k = 20$\n- $c = \\frac{10}{3}$\n- $S = 8 \\times 10^{9} \\ \\mathrm{s}^{-1}$\n- $T_m = 2 \\ \\mathrm{ms} = 2 \\times 10^{-3} \\ \\mathrm{s}$\n\nLet's compute the value inside the cube root:\n$$\\frac{T_m S}{k c} = \\frac{(2 \\times 10^{-3}) \\times (8 \\times 10^{9})}{20 \\times \\frac{10}{3}}$$\n$$\\frac{T_m S}{k c} = \\frac{16 \\times 10^{6}}{\\frac{200}{3}} = \\frac{16 \\times 3 \\times 10^{6}}{200} = \\frac{48 \\times 10^{6}}{2 \\times 10^{2}} = 24 \\times 10^{4} = 240000$$\n\nNow, we must find $n_{\\max}$ by computing the cube root:\n$$n_{\\max} = \\left\\lfloor (240000)^{1/3} \\right\\rfloor$$\n\nTo find the integer value, we can test integer cubes:\n$60^{3} = 216000$\n$61^{3} = 226981$\n$62^{3} = 238328$\n$63^{3} = 250047$\n\nSince $62^{3} = 238328 \\le 240000$ and $63^{3} = 250047 > 240000$, the largest integer $n$ satisfying $n^{3} \\le 240000$ is $62$.\n\nThus, the largest integer dimension for the control input is $n_{\\max} = 62$.",
            "answer": "$$\\boxed{62}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "本练习将帮助您掌握信号时序逻辑中鲁棒性的基本概念。通过为一个给定的信号轨迹计算鲁棒性值，您将具体理解它如何量化安全裕度或违规的严重程度，这是证伪算法中使用的关键指标。",
            "id": "4221695",
            "problem": "一个安全关键信息物理系统的数字孪生监控着一个归一化标量信号 $x(t)$，该信号表示在时间 $t$ 达到的热安全阈值的分数。待监控的属性用信号时序逻辑 (STL) 表示为 $\\phi = \\Box_{[0,10]}(x \\leq 1)$，该公式要求信号在区间 $[0,10]$ 内的所有时间 $t$ 都保持在阈值1或以下。在鲁棒满足语义中，每个公式都被赋予一个实值鲁棒性 $\\rho$，它量化了系统行为与满足集之间的有符号距离。\n\n从鲁棒满足作为满足原子谓词的状态集有符号距离的定义，以及有界区间上“总是”算子的时序组合语义出发，请形式化地定义公式 $\\phi = \\Box_{[0,10]}(x \\leq 1)$ 在时间 $t=0$ 时的鲁棒满足语义 $\\rho$，用 $[0,10]$ 上的 $x(t)$ 表示。\n\n然后，考虑分段线性信号\n$$\nx(t) = \n\\begin{cases}\n0.2 + 0.15\\,t,  t \\in [0,3], \\\\\n0.65 + 0.10\\,(t-3),  t \\in (3,7], \\\\\n1.05 - 0.25\\,(t-7),  t \\in (7,10].\n\\end{cases}\n$$\n使用在区间 $[0,10]$ 上的有符号距离解释，计算鲁棒性值 $\\rho(\\phi,x,0)$。将最终的鲁棒性值表示为一个纯数（无量纲），并且不要在最终的方框答案中包含任何单位。无需四舍五入。",
            "solution": "该问题是良定的，其科学基础在于信息物理系统形式化方法的原理，并提供了一套完整且一致的给定条件。因此，该问题被认为是有效的。我们将按要求分两部分进行求解。\n\n首先，我们必须为给定的信号时序逻辑 (STL) 公式 $\\phi = \\Box_{[0,10]}(x \\leq 1)$ 形式化地定义鲁棒满足语义，记为 $\\rho$。一个STL公式的鲁棒性量化了信号满足或违反该公式的程度。它是从原子谓词开始递归定义的。\n\n公式 $\\phi$ 中的原子谓词是 $\\mu \\equiv (x \\leq 1)$。这可以重写为 $f(x) \\geq 0$ 形式的不等式，具体为 $1 - x \\geq 0$。根据鲁棒满足作为有符号距离的标准定义，在一个状态 $\\mathbf{s}$ 上评估的原子谓词 $p(\\mathbf{s}) \\geq 0$ 的鲁棒性就是函数 $p(\\mathbf{s})$ 的值。对于我们的信号 $x(t)$，时间 $t$ 的状态就是值 $x(t)$。因此，原子谓词 $\\mu$ 在特定时间 $t$ 的鲁棒性由下式给出：\n$$\n\\rho(\\mu, x, t) = 1 - x(t)\n$$\n$\\rho(\\mu, x, t)$ 的正值表示满足谓词（即 $x(t)1$），值为 $0$ 表示在边界上满足（即 $x(t)=1$），负值表示违反（即 $x(t)>1$）。\n\n接下来，我们考虑时序算子 $\\Box_{[a,b]}$，它表示在时间区间 $[a,b]$ 内“总是”或“全局”。对于一个信号 $s$ 在时间 $t_0$，公式 $\\psi = \\Box_{[a,b]} \\psi'$ 的鲁棒性被定义为子公式 $\\psi'$ 在所有相关未来时间点上的鲁棒性的最小值（对于连续时间是下确界）。数学上：\n$$\n\\rho(\\Box_{[a,b]} \\psi', s, t_0) = \\inf_{t' \\in [t_0+a, t_0+b]} \\rho(\\psi', s, t')\n$$\n在我们的具体问题中，公式是 $\\phi = \\Box_{[0,10]}(x \\leq 1)$，我们需要在时间 $t=0$ 评估其鲁棒性。因此，$t_0=0$，区间是 $[0,10]$，子公式是 $\\mu = (x \\leq 1)$。应用该定义，我们得到：\n$$\n\\rho(\\phi, x, 0) = \\rho(\\Box_{[0,10]}(x \\leq 1), x, 0) = \\inf_{t \\in [0,10]} \\rho((x \\leq 1), x, t)\n$$\n代入原子谓词鲁棒性的表达式，我们有：\n$$\n\\rho(\\phi, x, 0) = \\inf_{t \\in [0,10]} (1 - x(t))\n$$\n利用性质 $\\inf_{t} (c - f(t)) = c - \\sup_{t} f(t)$，我们得出 $\\phi$ 的鲁棒性的最终形式化定义：\n$$\n\\rho(\\phi, x, 0) = 1 - \\sup_{t \\in [0,10]} x(t)\n$$\n该表达式体现了以下要求：系统保持在阈值以下的鲁棒性，取决于其在整个区间内的最高峰值与该阈值的距离。\n\n第二，我们为给定的分段线性信号 $x(t)$ 计算鲁棒性值：\n$$\nx(t) = \n\\begin{cases}\n0.2 + 0.15\\,t,  t \\in [0,3], \\\\\n0.65 + 0.10\\,(t-3),  t \\in (3,7], \\\\\n1.05 - 0.25\\,(t-7),  t \\in (7,10].\n\\end{cases}\n$$\n为了求得 $\\rho(\\phi, x, 0)$，我们必须找到 $x(t)$ 在紧区间 $[0,10]$ 上的上确界。由于 $x(t)$ 是连续且分段线性的，其上确界将是其最大值，该最大值必然出现在子区间的某个端点，或者导数为零的点（在此处，任何开子区间内导数都不为零）。我们检查每一段：\n\n1.  对于 $t \\in [0,3]$，$x(t) = 0.2 + 0.15t$。导数为 $x'(t)=0.15>0$，因此函数在此区间上严格递增。该段上的最大值在 $t=3$ 处取得，即 $x(3) = 0.2 + 0.15(3) = 0.2 + 0.45 = 0.65$。\n\n2.  对于 $t \\in (3,7]$，$x(t) = 0.65 + 0.10(t-3)$。导数为 $x'(t)=0.10>0$，因此函数在此区间上也严格递增。该段上的最大值在 $t=7$ 处取得，即 $x(7) = 0.65 + 0.10(7-3) = 0.65 + 0.10(4) = 0.65 + 0.40 = 1.05$。\n\n3.  对于 $t \\in (7,10]$，$x(t) = 1.05 - 0.25(t-7)$。导数为 $x'(t)=-0.250$，因此函数在此区间上严格递减。该段上的最大值在其起始点 $t=7$ 处取得，即 $x(7) = 1.05 - 0.25(7-7) = 1.05$。\n\n函数 $x(t)$ 是连续的，在 $t=0$ 到 $t=7$ 上递增，然后在 $t=7$ 到 $t=10$ 上递减。因此，全局最大值必然出现在导数从正变负的点，即 $t=7$。\n\n信号在整个区间 $[0,10]$ 上的最大值是：\n$$\n\\sup_{t \\in [0,10]} x(t) = x(7) = 1.05\n$$\n现在，我们可以使用推导出的公式计算鲁棒性值：\n$$\n\\rho(\\phi, x, 0) = 1 - \\sup_{t \\in [0,10]} x(t) = 1 - 1.05 = -0.05\n$$\n最终的鲁棒性为 $-0.05$。负号正确地表明属性 $\\phi = \\Box_{[0,10]}(x \\leq 1)$ 被违反，因为信号 $x(t)$ 超过了阈值 $1$。量值 $0.05$ 量化了信号的峰值比最大允许值高出 $0.05$ 个单位。",
            "answer": "$$\n\\boxed{-0.05}\n$$"
        },
        {
            "introduction": "复杂信息物理系统的仿真依赖于会引入近似误差的数值方法。本练习  挑战您批判性地思考仿真结果的有效性，引导您推导数值误差如何产生虚假的安全违规，并设计一个严谨的实验来验证所发现的伪例是真实的系统行为还是仅仅是数值伪影。",
            "id": "4221646",
            "problem": "信息物理系统 (CPS) 的数字孪生模拟一个受控的热过程，该过程由形式为 $\\dot{x}(t) = f(x(t), u(t), t)$ 的常微分方程 (ODE) 建模，其输出为 $y(t) = C x(t)$，其中 $x(t) \\in \\mathbb{R}^n$，$u(t) \\in \\mathbb{R}^m$，$C \\in \\mathbb{R}^{1 \\times n}$。假设 $f$ 在感兴趣的域上关于 $x$ 是 Lipschitz 连续的，其常数为 $L>0$。安全属性由信号时序逻辑 (STL) 指定为 $\\varphi: \\forall t \\in [0, T],\\, y(t) \\le y_{\\max}$，其鲁棒性信号为 $\\rho(t) = y_{\\max} - y(t)$，最小鲁棒性为 $\\rho^\\star = \\min_{t \\in [0, T]} \\rho(t)$。反例引导测试旨在寻找能够通过产生负鲁棒性来证伪 $\\varphi$ 的输入信号 $u(t)$。\n\n该数字孪生使用阶数为 $p \\ge 1$、步长为 $h>0$ 的单步法，或由相对容差 $\\mathrm{rtol}$ 和绝对容差 $\\mathrm{atol}$ 控制的自适应 Runge–Kutta 方案，对 ODE 进行数值积分。令 $x_h(t)$ 表示数值轨迹，其鲁棒性信号为 $\\tilde{\\rho}(t) = y_{\\max} - C x_h(t)$，最小鲁棒性为 $\\tilde{\\rho}^\\star = \\min_{t \\in [0, T]} \\tilde{\\rho}(t)$。如果某个模拟轨迹的 $\\tilde{\\rho}^\\star0$，证伪过程会标记一个违规。\n\n从 Lipschitz 连续性、p 阶单步法的局部截断误差以及 Grönwall 不等式的定义出发，推导一个界，以解释当真实鲁棒性裕度 $\\rho^\\star$ 很小时，数值离散化如何可能引入人为的违规。然后，设计一个通过改变求解器容差来评估已发现的违规在数值精化下是否稳定的实验。\n\n选择能够正确完成以下任务的选项：\n- 从第一性原理出发，推导一个关联 $\\rho^\\star$、$\\tilde{\\rho}^\\star$、方法阶数 $p$、步长 $h$ 以及依赖于 $f$、$C$、$L$ 和时间范围 $T$ 的常数的界，展示离散化误差如何能改变鲁棒性的符号。\n- 提出了一个科学合理的实验，该实验通过改变 $\\mathrm{rtol}$ 和 $\\mathrm{atol}$（如果适用，还使用多个求解器）来测试证伪的稳定性，并附带一个将违规分类为稳定或伪造的正确标准。\n\n选项：\nA. 使用常数为 $L$ 的 Lipschitz 条件和 $p$ 阶单步法的局部截断误差界，通过 Grönwall 不等式获得一个全局状态误差界 $\\|x_h(t) - x(t)\\| \\le \\frac{M}{L}\\left(e^{L t} - 1\\right) h^p$，其中 $M>0$ 是一个与方法相关的常数。将此误差传播到鲁棒性，使用 $|\\tilde{\\rho}(t) - \\rho(t)| \\le \\|C\\|\\,\\|x_h(t) - x(t)\\|$，得到 $\\tilde{\\rho}^\\star \\ge \\rho^\\star - \\|C\\| \\frac{M}{L}\\left(e^{L T} - 1\\right) h^p$，并表明如果 $\\rho^\\star \\le \\|C\\| \\frac{M}{L}\\left(e^{L T} - 1\\right) h^p$，则可能发生人为违规。设计一个实验，对 $\\mathrm{rtol}$ 和 $\\mathrm{atol}$ 进行跨越几个数量级的对数扫描（例如，$\\mathrm{rtol} \\in \\{10^{-1}, 10^{-2}, 10^{-3}, 10^{-4}\\}$，$\\mathrm{atol}$ 也类似），固定输入 $u(t)$ 和初始条件，并使用至少两种不同阶数的求解器重复证伪过程。在容差收紧时跟踪 $\\tilde{\\rho}^\\star$ 和首次违规时间 $t_v$；仅当 $\\tilde{\\rho}^\\star0$ 持续存在，并且随着容差趋近于 $0$，$\\tilde{\\rho}^\\star$ 和 $t_v$ 都收敛时，才将证伪分类为稳定。如果违规消失（即 $\\tilde{\\rho}^\\star$ 变为正数）或不收敛，则将其分类为伪造的。\n\nB. 论证 $|\\tilde{\\rho}^\\star - \\rho^\\star| \\le h^p$ 始终成立，且与系统和输出的范数无关，并得出结论：在粗糙容差下观察到的任何负 $\\tilde{\\rho}^\\star$ 都意味着一个真实的违规。设计一个实验，增加 $\\mathrm{rtol}$（即放宽容差）直到发现违规，并在出现第一个负 $\\tilde{\\rho}^\\star$ 时立即宣布其为稳定，无需使用多个求解器或进行收敛性检查。\n\nC. 仅使用每步的局部误差来断言 $|\\tilde{\\rho}(t) - \\rho(t)| \\le K h^{p+1}$（其中 $K>0$），并通过在单个固定的、相对宽松的容差设置下，计算 $N$ 个随机化初始条件下的 $\\tilde{\\rho}^\\star$ 的平均值来定义稳定性。如果平均值 $\\frac{1}{N} \\sum_{i=1}^N \\tilde{\\rho}^\\star_i$ 为负，则该违规是稳定的。\n\nD. 假设对于任何方法，鲁棒性中的数值误差都与步长成线性关系，即 $|\\tilde{\\rho}^\\star - \\rho^\\star| \\le \\|C\\| L T h$，并通过仅改变自适应求解器中的最大步长（保持 $\\mathrm{rtol}$ 和 $\\mathrm{atol}$ 固定）来测试稳定性。如果违规在大的 $h$ 下仍然存在，则宣布其为稳定，因为更大的步长会放大真实的违规。\n\nE. 观察到数值误差在 $h \\to 0$ 时消失，因此声称如果一个违规在收紧容差时消失，那么它更可能是真实的（因为求解器在粗糙设置下错过了它）。设计一个实验，收紧容差直到违规消失，然后因为该反例在精化下消失而将其分类为稳定。",
            "solution": "任务是首先验证问题陈述的有效性，如果有效，则推导一个关于数值误差如何影响安全鲁棒性计算的理论界，并设计一个实验来测试已检测到的违规的稳定性。最后，我必须评估给定的选项。\n\n### 问题验证\n\n**第 1 步：提取已知条件**\n-   **系统 ODE：** $\\dot{x}(t) = f(x(t), u(t), t)$，其中 $x(t) \\in \\mathbb{R}^n$，$u(t) \\in \\mathbb{R}^m$。\n-   **输出方程：** $y(t) = C x(t)$，其中 $C \\in \\mathbb{R}^{1 \\times n}$。\n-   **Lipschitz 条件：** $f$ 关于 $x$ 是 Lipschitz 连续的，常数为 $L>0$。\n-   **安全属性：** $\\varphi: \\forall t \\in [0, T],\\, y(t) \\le y_{\\max}$。\n-   **真实鲁棒性：** $\\rho(t) = y_{\\max} - y(t)$，最小鲁棒性为 $\\rho^\\star = \\min_{t \\in [0, T]} \\rho(t)$。\n-   **数值方法：** 阶数为 $p \\ge 1$、步长为 $h>0$ 的单步法，或带有相对容差 $\\mathrm{rtol}$ 和绝对容差 $\\mathrm{atol}$ 的自适应 Runge-Kutta 方案。\n-   **数值解：** $x_h(t)$ 是数值轨迹。\n-   **数值鲁棒性：** $\\tilde{\\rho}(t) = y_{\\max} - C x_h(t)$，最小数值鲁棒性为 $\\tilde{\\rho}^\\star = \\min_{t \\in [0, T]} \\tilde{\\rho}(t)$。\n-   **证伪条件：** 如果 $\\tilde{\\rho}^\\star0$，则标记为违规。\n-   **所需工具：** Lipschitz 连续性、$p$ 阶方法的局部截断误差、Grönwall 不等式。\n\n**第 2 步：使用提取的已知条件进行验证**\n问题陈述在科学上是合理的且是良定的。\n-   **科学依据：** 该问题坚实地建立在常微分方程数值分析和控制理论的标准原理之上。Lipschitz 连续性、ODE 求解器、局部和全局误差、Grönwall 不等式以及信号时序逻辑 (STL) 鲁棒性等概念都是标准的，并且定义正确。\n-   **良定性和完整性：** 该问题是自洽的，并提供了执行推导和设计实验所需的所有信息。它清楚地定义了系统、属性、数值背景以及要使用的分析工具。目标是明确的。\n-   **客观性和清晰性：** 语言正式、精确、客观。没有模糊或主观的术语。\n\n**第 3 步：结论与行动**\n问题陈述是 **有效的**。我将继续进行求解。\n\n### 推导与实验设计\n\n**第 1 部分：误差界的推导**\n\n令 $x(t)$ 为 ODE $\\dot{x}(t) = f(x(t), u(t), t)$ 在初始条件 $x(0) = x_0$ 下的真实解，令 $x_h(t)$ 为使用阶数为 $p$、步长为 $h$ 的单步法得到的数值解。全局误差定义为 $e(t) = x_h(t) - x(t)$。我们假设初始条件是精确的，因此 $e(0) = x_h(0) - x(0) = 0$。\n\n阶数为 $p$ 的单步法在第 $i$ 步有局部截断误差 (LTE)，记为 $\\tau_i$，其界为 $\\|\\tau_i\\| \\le K h^{p+1}$，其中常数 $K>0$ 依赖于真实解 $x(t)$ 的 $(p+1)$ 阶导数。\n\n这种局部误差的累积导致了全局误差。关于单步法全局误差的标准定理指出，如果函数 $f$ 是 Lipschitz 连续的，常数为 $L$，则全局误差是有界的。这个结果是使用 Grönwall 不等式推导出来的。将离散 Grönwall 引理应用于每一步误差的递归不等式 $\\|e_{i+1}\\| \\le (1+hL)\\|e_i\\| + \\|\\tau_i\\|$。在任意时间 $t \\in [0,T]$ 的全局误差界为：\n$$ \\|e(t)\\| = \\|x_h(t) - x(t)\\| \\le \\frac{K h^{p+1}}{hL} \\left( e^{L t} - 1 \\right) = \\frac{K h^p}{L} \\left( e^{L t} - 1 \\right) $$\n令 $M=K$ 为与 LTE 界相关的常数。在整个区间 $[0, T]$ 上的全局误差界是：\n$$ \\max_{t \\in [0, T]} \\|e(t)\\| \\le \\frac{M}{L} \\left( e^{L T} - 1 \\right) h^p $$\n\n接下来，我们将此状态误差与鲁棒性信号中的误差联系起来。真实和数值鲁棒性信号分别为 $\\rho(t) = y_{\\max} - C x(t)$ 和 $\\tilde{\\rho}(t) = y_{\\max} - C x_h(t)$。它们的差是：\n$$ \\tilde{\\rho}(t) - \\rho(t) = (y_{\\max} - C x_h(t)) - (y_{\\max} - C x(t)) = -C(x_h(t) - x(t)) = -C e(t) $$\n绝对差使用诱导矩阵范数 $\\|C\\|$ 进行界定：\n$$ |\\tilde{\\rho}(t) - \\rho(t)| = |-C e(t)| \\le \\|C\\| \\|e(t)\\| $$\n这给了我们最小鲁棒性值 $\\rho^\\star = \\min_t \\rho(t)$ 和 $\\tilde{\\rho}^\\star = \\min_t \\tilde{\\rho}(t)$ 之间的一个关系。\n对于任意 $t$，我们有 $\\tilde{\\rho}(t) \\ge \\rho(t) - |\\tilde{\\rho}(t) - \\rho(t)| \\ge \\rho(t) - \\|C\\| \\|e(t)\\|$。\n因为对于所有 $t$ 都有 $\\rho(t) \\ge \\rho^\\star$，我们可以写成：\n$$ \\tilde{\\rho}(t) \\ge \\rho^\\star - \\|C\\| \\|e(t)\\| $$\n为了找到 $\\tilde{\\rho}^\\star$ 的一个界，我们必须在左边取 $t \\in [0, T]$ 上的最小值，这需要在右边取下确界：\n$$ \\tilde{\\rho}^\\star = \\min_{t \\in [0, T]} \\tilde{\\rho}(t) \\ge \\min_{t \\in [0, T]} \\left( \\rho^\\star - \\|C\\| \\|e(t)\\| \\right) = \\rho^\\star - \\|C\\| \\max_{t \\in [0, T]} \\|e(t)\\| $$\n代入全局误差界，我们得到：\n$$ \\tilde{\\rho}^\\star \\ge \\rho^\\star - \\|C\\| \\frac{M}{L} \\left( e^{L T} - 1 \\right) h^p $$\n这个不等式是关键。它表明数值鲁棒性 $\\tilde{\\rho}^\\star$ 至少是真实鲁棒性 $\\rho^\\star$ 减去一个与 $h^p$ 成比例的误差项。如果真实系统是安全的（$\\rho^\\star \\ge 0$），但数值模拟报告了一个违规（$\\tilde{\\rho}^\\star0$），那么就可能发生伪违规。如果误差项大于真实鲁棒性裕度，这种情况是可能的：\n$$ 0 \\le \\rho^\\star  \\|C\\| \\frac{M}{L} \\left( e^{L T} - 1 \\right) h^p $$\n\n**第 2 部分：用于稳定性评估的实验设计**\n\n推导出的界表明，$\\tilde{\\rho}^\\star$ 和 $\\rho^\\star$ 之间的差异随着 $h \\to 0$ 而消失。对于自适应步长求解器，全局误差由容差 $\\mathrm{rtol}$ 和 $\\mathrm{atol}$ 控制。收紧这些容差能有效减小误差，类似于减小 $h$。因此，随着数值精度的提高，$\\tilde{\\rho}^\\star$ 必须收敛到 $\\rho^\\star$。\n\n一个合理的实验流程，用以测试已发现的违规（即，一个产生了 $\\tilde{\\rho}^\\star0$ 的特定输入 $u(t)$ 和初始条件 $x_0$）的稳定性，如下所示：\n\n1.  **固定反例：** 使用导致证伪的固定输入信号 $u(t)$ 和初始条件 $x_0$。\n2.  **系统地精化模拟：** 多次重新运行模拟，逐步提高数值精度。这可以通过以下方式实现：\n    -   对于自适应求解器，创建一个对数间隔的容差网格（例如，$\\mathrm{rtol} = 10^{-k}, \\mathrm{atol} = 10^{-k}$，其中 $k=1, 2, 3, \\ldots, 6$）。\n    -   对于固定步长求解器，减小步长 $h$（例如，$h, h/2, h/4, \\ldots$）。\n3.  **使用多种方法：** 为了进一步增加置信度，使用至少两种不同的数值求解器（最好是不同阶数的）重复精化过程。这有助于排除特定于单个积分方法的产物。\n4.  **监控收敛性：** 对于每次模拟运行，记录最小鲁棒性 $\\tilde{\\rho}^\\star$，如果发生违规，则记录首次违规的时间 $t_v$（轨迹首次穿过阈值 $y_{\\max}$ 的时间）。\n5.  **对违规进行分类：**\n    -   **稳定（真实的）：** 如果随着容差收紧（精度提高），违规持续存在（即 $\\tilde{\\rho}^\\star$ 保持为负），并且观察到的指标（$\\tilde{\\rho}^\\star$, $t_v$）收敛到稳定、良定的值，则该违规被分类为稳定。\n    -   **伪造的（数值产物）：** 如果随着容差收紧，a) 违规消失（$\\tilde{\\rho}^\\star$ 变为非负），或 b) 指标 $\\tilde{\\rho}^\\star$ 和/或 $t_v$ 未能收敛，表现出不规律或振荡的行为，则该违规被分类为伪造的。\n\n这个过程严谨地测试了观察到的行为是系统模型的内在属性，还是数值近似的产物。\n\n### 逐项分析\n\n**A. 使用常数为 L 的 Lipschitz 条件...获得...一个全局状态误差界 $\\|x_h(t) - x(t)\\| \\le \\frac{M}{L}\\left(e^{L t} - 1\\right) h^p$...将此误差传播到鲁棒性...得到 $\\tilde{\\rho}^\\star \\ge \\rho^\\star - \\|C\\| \\frac{M}{L}\\left(e^{L T} - 1\\right) h^p$...设计一个实验，对 rtol 和 atol 进行对数扫描...使用至少两种求解器...仅当 $\\tilde{\\rho}^\\star0$ 持续存在，并且随着容差趋近于 0，$\\tilde{\\rho}^\\star$ 和 $t_v$ 都收敛时，才将证伪分类为稳定。...[否则]将其分类为伪造的。**\n-   理论推导与上面推导的完全一致，是数值分析的标准结果。它正确地指出了影响误差的因素：方法阶数 $p$、步长 $h$、Lipschitz 常数 $L$、时间范围 $T$ 以及输出矩阵范数 $\\|C\\|$。\n-   实验设计是收敛性研究的教科书式范例。它正确地提出通过收紧容差来精化模拟，使用多个求解器进行交叉验证，并基于关键指标的收敛性来定义稳定性。这是区分真实现象和数值产物的科学上合适的方法。\n-   **结论：** **正确**。\n\n**B. 论证 $|\\tilde{\\rho}^\\star - \\rho^\\star| \\le h^p$ 始终成立...在出现第一个负 $\\tilde{\\rho}^\\star$ 时立即宣布其为稳定。**\n-   提出的误差界 $|\\tilde{\\rho}^\\star - \\rho^\\star| \\le h^p$ 是不正确的。它忽略了对 $L$、$T$ 和 $\\|C\\|$ 的关键依赖性，特别是指数增长项 $e^{LT}$，这可能使误差远大于 $h^p$。\n-   放宽容差（`increase rtol`）并在发现第一个违规时就宣布稳定性的实验设计，在根本上是错误的和倒退的。它主动寻找容易产生数值产物的条件。\n-   **结论：** **不正确**。\n\n**C. 仅使用每步的局部误差来断言 $|\\tilde{\\rho}(t) - \\rho(t)| \\le K h^{p+1}$...通过在单个固定的、相对宽松的容差设置下，计算 $N$ 个随机化初始条件下的 $\\tilde{\\rho}^\\star$ 的平均值来定义稳定性。**\n-   这个推导错误地将全局误差等同于局部误差。一个 $p$ 阶方法的全局误差是 $\\mathcal{O}(h^p)$，而不是 $\\mathcal{O}(h^{p+1})$。\n-   实验设计被误导了。对随机化初始条件进行平均，研究的是对初始状态的敏感性，而不是特定轨迹的数值稳定性。使用单一的宽松容差是不可靠的，并且容易产生人为误差。\n-   **结论：** **不正确**。\n\n**D. 假设鲁棒性中的数值误差与步长成线性关系... $|\\tilde{\\rho}^\\star - \\rho^\\star| \\le \\|C\\| L T h$...如果违规在大的 $h$ 下仍然存在，则宣布其为稳定。**\n-   误差界是不正确的。它只对 $p=1$ 阶方法有效，即便如此也是一个简化（用 $LT$ 替换了 $e^{LT}-1$）。对于更高阶的方法是错误的。\n-   偏好大步长 ($h$) 的实验标准在科学上是不合理的。大步长意味着大误差，这增加了伪结果的可能性。\n-   **结论：** **不正确**。\n\n**E. 观察到数值误差在 $h \\to 0$ 时消失，因此声称如果一个违规在收紧容差时消失，那么它更可能是真实的...**\n-   所呈现的逻辑是完全颠倒的。违规在精化时 *消失* 这一事实，正是伪造的数值产物的定义。一个真实的、对应于真实解的违规，应该随着模拟收敛到该解而变得更清晰、更准确地被解析出来。\n-   实验设计基于这个有缺陷的前提，因此是不正确的。\n-   **结论：** **不正确**。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "数字孪生是真实世界系统的近似，在评估安全性时必须考虑模型与现实之间的差距。本练习  介绍了一种原则性方法，通过考虑有界的模型-实体不匹配，来认证仿真中发现的伪例是否能保证物理实体中存在真实违规。这弥合了基于仿真的测试与真实世界安全保证之间的鸿沟。",
            "id": "4221661",
            "problem": "一个信息物理系统 (CPS) 的数字孪生 (DT) 在时间范围 $[0,T]$ 上产生一个模拟状态轨迹 $\\hat{x}(t) \\in \\mathbb{R}^{2}$。安全规约要求，在所有时间 $t \\in [0,T]$，两个约束 $g_{1}(x(t)) \\leq 0$ 和 $g_{2}(x(t)) \\leq 0$ 都必须成立，其中\n- $g_{1}(x) = |x_{1}| - 1$，\n- $g_{2}(x) = |x_{2}| - 0.5$，\n且 $x = (x_{1}, x_{2})$。\n\n假设以下条件已知，并对所有 $t \\in [0,T]$ 一致成立：\n- 模型-实体状态失配在欧几里得范数下有界，其界为 $\\|x(t) - \\hat{x}(t)\\|_{2} \\leq \\delta$，其中 $\\delta = 0.05$。\n- 每个约束函数 $g_{i}$ 相对于欧几里得范数是全局利普希茨的，其利普希茨常数为 $L_{i}$，其中 $L_{1} = L_{2} = 1$。\n\n对 DT 的一次证伪运行产生了一个候选反例，包含两个时刻及其对应的模拟状态：\n- 在时刻 $t_{1}$，$\\hat{x}(t_{1}) = (1.03,\\, 0.49)$。\n- 在时刻 $t_{2}$，$\\hat{x}(t_{2}) = (1.08,\\, 0.46)$。\n\n要求您判断，在考虑建模误差的情况下，这个候选反例对于真实实体是否构成一个真实的违规，并计算一个有原则的违规裕度来证明您的判断。您的推理必须从第一性原理出发：安全集 $\\{x \\mid g_{i}(x) \\leq 0\\}$ 的定义、$g_{i}$ 的利普希茨连续性，以及模型-实体失配的上界。\n\n哪个选项正确地验证了该反例并计算出正确的违规裕度？\n\nA. 如果存在时间 $t$ 和约束索引 $i \\in \\{1,2\\}$ 使得 $g_{i}(\\hat{x}(t)) - L_{i}\\,\\delta > 0$，则反例被证实为真实的。违规裕度为 $\\max_{t \\in \\{t_{1},t_{2}\\}}\\max_{i \\in \\{1,2\\}}\\left(g_{i}(\\hat{x}(t)) - L_{i}\\,\\delta\\right)$。根据所提供的数据，裕度等于 $0.03$，因此该反例是真实的。\n\nB. 因为模拟轨迹在 $t_{1}$ 时刻违反了未收紧的安全集（因为 $g_{1}(\\hat{x}(t_{1})) = 0.03 > 0$），所以无论建模误差如何，该反例都自动成为真实的，且违规裕度为 $0.03$。\n\nC. 为了考虑建模误差，应将 $g_{i}(\\hat{x}(t)) + L_{i}\\,\\delta$ 与 $0$ 进行比较。如果在任何时刻该值为正，则宣布该反例为真实的。对于所给数据，$g_{1}(\\hat{x}(t_{2})) + \\delta = 0.08 + 0.05 = 0.13 > 0$，因此该反例是真实的。\n\nD. 正确的收紧安全集是 $\\{x \\mid g_{i}(x) \\leq -L_{i}\\,\\delta \\text{ for } i=1,2\\}$。如果模拟轨迹在任何时刻违反了这个集合，则该反例被保证是真实的。对于所给数据，$g_{1}(\\hat{x}(t_{1})) = 0.03 > -0.05$，因此该反例是真实的。",
            "solution": "问题的核心是，基于模拟轨迹 $\\hat{x}(t)$ 和已知的失配界 $\\delta$，能否保证真实实体 $x(t)$ 发生了安全违规。如果对于任何时间 $t \\in [0,T]$ 和任何约束 $i \\in \\{1,2\\}$，我们有 $g_{i}(x(t))>0$，那么真实实体就发生了安全违规。\n\n从第一性原理出发，每个函数 $g_{i}$ 的利普希茨连续性表明，对于任意两点 $x$ 和 $\\hat{x}$：\n$$ |g_{i}(x) - g_{i}(\\hat{x})| \\leq L_{i} \\|x - \\hat{x}\\|_{2} $$\n我们已知 $\\|x(t) - \\hat{x}(t)\\|_{2} \\leq \\delta$。将此应用于任意时刻 $t$ 的利普希茨不等式，得到：\n$$ |g_{i}(x(t)) - g_{i}(\\hat{x}(t))| \\leq L_{i} \\delta $$\n这个绝对值不等式可以展开为一对不等式：\n$$ -L_{i} \\delta \\leq g_{i}(x(t)) - g_{i}(\\hat{x}(t)) \\leq L_{i} \\delta $$\n通过重新整理，我们可以利用模拟得到的已知值 $g_{i}(\\hat{x}(t))$ 来界定真实实体约束函数的未知值 $g_{i}(x(t))$：\n$$ g_{i}(\\hat{x}(t)) - L_{i} \\delta \\leq g_{i}(x(t)) \\leq g_{i}(\\hat{x}(t)) + L_{i} \\delta $$\n如果我们能证明对于某个 $t$ 和 $i$ 有 $g_{i}(x(t))>0$，那么一个真实的违规就得到了证实。如果 $g_{i}(x(t))$ 的 *下界* 大于 0，这一点就能得到保证。因此，证实一个真实反例的条件是：\n$$ g_{i}(\\hat{x}(t)) - L_{i} \\delta > 0 $$\n量 $g_{i}(\\hat{x}(t)) - L_{i} \\delta$ 可以被解释为安全违规的一个鲁棒度量。正值代表一个被证实的违规，其大小就是该违规的裕度。对于一个可能跨越多个时间点并涉及多个约束的候选反例，总体的违规裕度是这些单个值的最大值。一个正的总体裕度确认了该候选反例是真实的。\n\n现在，我们将此原理应用于所提供的数据。我们有 $\\delta = 0.05$ 和 $L_{1} = L_{2} = 1$。对于给定的点 $(\\hat{x}(t), i)$，其违规裕度为 $g_{i}(\\hat{x}(t)) - L_{i}\\delta$。\n\n在时刻 $t_{1}$，$\\hat{x}(t_{1}) = (1.03, 0.49)$：\n-   对于约束 $g_{1}$：$g_{1}(\\hat{x}(t_{1})) = |1.03| - 1 = 0.03$。\n    裕度项为 $g_{1}(\\hat{x}(t_{1})) - L_{1}\\delta = 0.03 - (1)(0.05) = -0.02$。\n    由于该值不为正，我们无法在时刻 $t_{1}$ 证实 $g_{1}$ 的违规。真实值 $g_{1}(x(t_{1}))$ 位于区间 $[-0.02, 0.08]$ 内，该区间包含非正（安全）的值。\n-   对于约束 $g_{2}$：$g_{2}(\\hat{x}(t_{1})) = |0.49| - 0.5 = -0.01$。\n    裕度项为 $g_{2}(\\hat{x}(t_{1})) - L_{2}\\delta = -0.01 - (1)(0.05) = -0.06$。该值不为正。\n\n在时刻 $t_{2}$，$\\hat{x}(t_{2}) = (1.08, 0.46)$：\n-   对于约束 $g_{1}$：$g_{1}(\\hat{x}(t_{2})) = |1.08| - 1 = 0.08$。\n    裕度项为 $g_{1}(\\hat{x}(t_{2})) - L_{1}\\delta = 0.08 - (1)(0.05) = 0.03$。\n    由于该值为正 ($0.03>0$)，我们证实了一个真实的违规。真实实体的状态 $x(t_{2})$ 被保证违反了第一个安全约束，因为其最小可能值为 $g_{1}(x(t_2)) \\geq 0.03$。\n-   对于约束 $g_{2}$：$g_{2}(\\hat{x}(t_{2})) = |0.46| - 0.5 = -0.04$。\n    裕度项为 $g_{2}(\\hat{x}(t_{2})) - L_{2}\\delta = -0.04 - (1)(0.05) = -0.09$。该值不为正。\n\n为了找到该候选反例的总体裕度，我们取所有计算出的裕度项的最大值：\n$$ \\text{裕度} = \\max\\{-0.02, -0.06, 0.03, -0.09\\} = 0.03 $$\n由于裕度为正，该反例被证实为真实的。\n\n现在我们评估每个选项：\n\nA. 如果存在时间 $t$ 和约束索引 $i \\in \\{1,2\\}$ 使得 $g_{i}(\\hat{x}(t)) - L_{i}\\,\\delta > 0$，则反例被证实为真实的。违规裕度为 $\\max_{t \\in \\{t_{1},t_{2}\\}}\\max_{i \\in \\{1,2\\}}\\left(g_{i}(\\hat{x}(t)) - L_{i}\\,\\delta\\right)$。根据所提供的数据，裕度等于 $0.03$，因此该反例是真实的。\n该陈述与我们的推导完全一致。它正确地指出了证实条件、违规裕度的公式以及计算结果。\n结论：**正确**。\n\nB. 因为模拟轨迹在 $t_{1}$ 时刻违反了未收紧的安全集（因为 $g_{1}(\\hat{x}(t_{1})) = 0.03 > 0$），所以无论建模误差如何，该反例都自动成为真实的，且违规裕度为 $0.03$。\n这是不正确的。模拟路径上的违规（$g_{i}(\\hat{x}(t)) > 0$）是保证真实实体违规的必要条件，但不是充分条件。它没有考虑建模误差 $\\delta$。如前所示，在 $t_{1}$ 时刻，真实实体可能仍处于安全状态（例如，$g_{1}(x(t_{1}))=-0.02$）。该陈述还错误地将 $0.03$ 的裕度归因于 $t_1$ 时刻的事件。\n结论：**不正确**。\n\nC. 为了考虑建模误差，应将 $g_{i}(\\hat{x}(t)) + L_{i}\\,\\delta$ 与 $0$ 进行比较。如果在任何时刻该值为正，则宣布该反例为真实的。对于所给数据，$g_{1}(\\hat{x}(t_{2})) + \\delta = 0.08 + 0.05 = 0.13 > 0$，因此该反例是真实的。\n这是不正确的。量 $g_{i}(\\hat{x}(t)) + L_{i}\\,\\delta$ 是 $g_{i}(x(t))$ 的上界。条件 $g_{i}(\\hat{x}(t)) + L_{i}\\,\\delta \\leq 0$ 用于证实真实实体的*安全性*。此选项混淆了证实安全性的条件与证实违规的条件。证明上界为正并不能证明真实值为正。\n结论：**不正确**。\n\nD. 正确的收紧安全集是 $\\{x \\mid g_{i}(x) \\leq -L_{i}\\,\\delta \\text{ for } i=1,2\\}$。如果模拟轨迹在任何时刻违反了这个集合，则该反例被保证是真实的。对于所给数据，$g_{1}(\\hat{x}(t_{1})) = 0.03 > -0.05$，因此该反例是真实的。\n这是不正确的。它正确地指出了用于模拟的收紧安全集，遵守该集合可以保证实体的安全。然而，它错误地得出结论，即模拟违反此收紧集（$g_{i}(\\hat{x}(t)) > -L_{i}\\delta$）可以保证实体发生违规。这只保证了在那个点*无法证实安全性*。正如我们对 $t_{1}$ 的分析所示（$g_{1}(\\hat{x}(t_{1}))=0.03>-0.05$），我们无法证实违规，只能证实缺乏可证实的安全性。\n结论：**不正确**。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "时间冗余是构建可靠系统的基石，而检查点-回滚机制是其经典实现。然而，频繁设置检查点会带来性能开销，而检查点间隔太长又会增加故障恢复的成本。本练习将引导你从第一性原理出发，推导因故障造成的预期损失工时，并优化检查点周期以最小化系统总开销，从而量化这一核心权衡关系。",
            "id": "4239541",
            "problem": "一个信息物理系统（Cyber-Physical System, CPS）使用数字孪生（Digital Twin, DT）来协调硬件、软件和时间上的冗余。硬件和软件层面的空间冗余将系统级的有效故障过程简化为一个具有恒定速率 $\\lambda$（故障/秒）的平稳泊松过程。为了增加时间冗余，DT 强制执行周期性检查点：控制器状态每 $\\Delta$ 秒保存一次，每个检查点耗时 $c$ 秒，在此期间系统没有向前进展但保持安全。一旦发生故障，检查点-回滚机制会恢复最近的检查点并重新执行丢失的工作。假设恢复本身（不包括重新执行）与 $\\Delta$ 相比可以忽略不计，并且 $\\lambda \\Delta$ 足够小，以至于在任何检查点间隔内发生一次以上故障的概率相对于 $\\mathcal{O}((\\lambda \\Delta)^2)$ 项而言可以忽略不计。\n\n仅从速率为 $\\lambda$ 的泊松过程的定义属性和指数到达间隔时间的无记忆性出发，并且不调用任何预先推导的检查点公式，完成以下任务：\n\n- 根据第一性原理，推导在所述假设下，每个检查点间隔内预期丢失工作量 $E[L(\\Delta)]$ 作为 $\\lambda$ 和 $\\Delta$ 的函数表达式。\n- 使用您的结果和周期性检查点成本 $c$，构建预期开销率（单位时钟时间内的有用时间损失）作为函数 $R(\\Delta)$，该函数需考虑检查点时间和因故障导致的预期重新执行时间。\n- 确定使 $R(\\Delta)$ 最小化的检查点周期 $\\Delta^{\\star}$。\n\n以 $\\lambda$ 和 $c$ 表示的 $\\Delta^{\\star}$ 的单个闭式符号表达式的形式报告您的最终答案。将最优周期以秒为单位表示。不代入任何数值，最终的方框答案中也不包含任何单位。",
            "solution": "用户希望找到信息物理系统的最优检查点周期 $\\Delta^{\\star}$。这包括三个步骤：\n1.  推导每个检查点间隔内的预期丢失工作量 $E[L(\\Delta)]$。\n2.  构建预期开销率 $R(\\Delta)$。\n3.  确定使 $R(\\Delta)$ 最小化的 $\\Delta$。\n\n### 步骤1：预期丢失工作量 $E[L(\\Delta)]$ 的推导\n\n令 $L(\\Delta)$ 为表示在持续时间为 $\\Delta$ 的检查点间隔内因故障而丢失的工作量的随机变量。在间隔 $[0, \\Delta]$ 内于时间 $t_f$ 发生的故障会导致等于 $t_f$ 的工作量损失。首次故障发生的时间 $T_f$ 是一个速率为 $\\lambda$ 的指数随机变量，因此其概率密度函数 (PDF) 为 $f(t) = \\lambda e^{-\\lambda t}$ (当 $t \\ge 0$ 时)，其累积分布函数 (CDF) 为 $F(t) = 1 - e^{-\\lambda t}$。\n\n问题陈述我们可以忽略发生一次以上故障的概率。这意味着我们只需要考虑首次故障发生的时间。如果首次故障发生在时间 $t_f \\in [0, \\Delta]$，则丢失的工作量为 $L = t_f$。如果在间隔内没有发生故障 ($T_f > \\Delta$)，则丢失的工作量为 $L=0$。\n\n一个非负随机变量 $L$ 的期望值可以通过其互补累积分布函数 (CCDF) $P(L > t)$ 计算得出，即 $E[L] = \\int_{0}^{\\infty} P(L > t) dt$。\n对于 $t \\in [0, \\Delta]$，事件 $L > t$ 发生的充要条件是首次故障 $T_f$ 发生在区间 $(t, \\Delta]$ 内。\n该事件的概率是：\n$$ P(L > t) = P(t  T_f \\le \\Delta) = F(\\Delta) - F(t) = (1 - e^{-\\lambda \\Delta}) - (1 - e^{-\\lambda t}) = e^{-\\lambda t} - e^{-\\lambda \\Delta} $$\n对于 $t > \\Delta$，$P(L > t) = 0$，因为可能的最大损失是 $\\Delta$。\n\n现在，我们可以计算预期丢失的工作量 $E[L(\\Delta)]$：\n$$ E[L(\\Delta)] = \\int_{0}^{\\Delta} P(L > t) dt = \\int_{0}^{\\Delta} (e^{-\\lambda t} - e^{-\\lambda \\Delta}) dt $$\n我们计算这个积分：\n$$ E[L(\\Delta)] = \\left[ -\\frac{1}{\\lambda} e^{-\\lambda t} \\right]_{0}^{\\Delta} - \\int_{0}^{\\Delta} e^{-\\lambda \\Delta} dt $$\n$$ E[L(\\Delta)] = \\left( -\\frac{1}{\\lambda} e^{-\\lambda \\Delta} - \\left(-\\frac{1}{\\lambda} e^{0}\\right) \\right) - \\left[ t e^{-\\lambda \\Delta} \\right]_{0}^{\\Delta} $$\n$$ E[L(\\Delta)] = \\left( \\frac{1}{\\lambda} - \\frac{1}{\\lambda} e^{-\\lambda \\Delta} \\right) - \\Delta e^{-\\lambda \\Delta} $$\n$$ E[L(\\Delta)] = \\frac{1}{\\lambda} - \\left(\\frac{1}{\\lambda} + \\Delta\\right) e^{-\\lambda \\Delta} $$\n这是在仅考虑首次故障的假设下，预期丢失工作量的精确表达式。\n\n问题陈述 $\\lambda \\Delta$ 足够小。这为使用泰勒级数展开指数项 $e^{-\\lambda \\Delta}$ 提供了依据。令 $x = \\lambda \\Delta$。展开式为 $e^{-x} \\approx 1 - x + \\frac{x^2}{2}$。\n将此代入 $E[L(\\Delta)]$ 的表达式中：\n$$ E[L(\\Delta)] \\approx \\frac{1}{\\lambda} - \\left(\\frac{1}{\\lambda} + \\Delta\\right) \\left(1 - \\lambda \\Delta + \\frac{(\\lambda \\Delta)^2}{2}\\right) $$\n$$ E[L(\\Delta)] \\approx \\frac{1}{\\lambda} - \\left( \\frac{1}{\\lambda} - \\Delta + \\frac{\\lambda \\Delta^2}{2} + \\Delta - \\lambda \\Delta^2 + \\frac{\\lambda^2 \\Delta^3}{2} \\right) $$\n忽略 $\\Delta^3$ 及更高阶的项：\n$$ E[L(\\Delta)] \\approx \\frac{1}{\\lambda} - \\left( \\frac{1}{\\lambda} - \\frac{\\lambda \\Delta^2}{2} \\right) = \\frac{\\lambda \\Delta^2}{2} $$\n这个一阶近似 $E[L(\\Delta)] \\approx \\frac{\\lambda \\Delta^2}{2}$ 是标准的，并且与问题关于 $\\lambda \\Delta$ 很小的假设一致。\n\n### 步骤2：开销率 $R(\\Delta)$ 的构建\n\n目标是最小化“开销率”，其定义为“单位时钟时间内的有用时间损失”。\n让我们分析一个操作周期。为了取得 $\\Delta$ 秒的有用进展，系统总共花费 $T_{cycle}$ 的时钟时间。这段时间由以下几部分组成：\n1.  有用工作的时间：$\\Delta$。\n2.  检查点的时间：$c$。\n3.  重新执行丢失工作的时间，其平均值为 $E[L(\\Delta)]$。\n\n为实现 $\\Delta$ 秒进展的预期总时钟时间是：\n$$ E[T_{cycle}] = \\Delta + c + E[L(\\Delta)] $$\n在此周期内的预期损失时间（开销）是：\n$$ E[T_{overhead}] = c + E[L(\\Delta)] $$\n开销率 $R(\\Delta)$ 是预期开销时间与预期总时间的长期比率：\n$$ R(\\Delta) = \\frac{E[T_{overhead}]}{E[T_{cycle}]} = \\frac{c + E[L(\\Delta)]}{\\Delta + c + E[L(\\Delta)]} $$\n为了最小化 $R(\\Delta)$，我们可以等价地最小化一个更简单的函数。注意 $R(\\Delta) = 1 - \\frac{\\Delta}{\\Delta + c + E[L(\\Delta)]}$。最小化 $R(\\Delta)$ 等价于最大化 $\\frac{\\Delta}{\\Delta + c + E[L(\\Delta)]}$，后者代表系统的吞吐量（单位时间的有用工作量）。反过来，最大化此吞吐量等价于最小化其倒数：\n$$ O_{eff}(\\Delta) = \\frac{\\Delta + c + E[L(\\Delta)]}{\\Delta} = 1 + \\frac{c + E[L(\\Delta)]}{\\Delta} $$\n最小化 $O_{eff}(\\Delta)$ 等价于最小化 $g(\\Delta) = \\frac{c + E[L(\\Delta)]}{\\Delta}$ 项。该项表示单位有用工作的开销时间。\n\n使用一阶近似 $E[L(\\Delta)] \\approx \\frac{\\lambda \\Delta^2}{2}$，我们得到：\n$$ g(\\Delta) = \\frac{c + \\frac{1}{2}\\lambda \\Delta^2}{\\Delta} = \\frac{c}{\\Delta} + \\frac{\\lambda \\Delta}{2} $$\n\n### 步骤3：开销的最小化\n\n为了找到最小化开销的检查点周期 $\\Delta^{\\star}$，我们必须找到函数 $g(\\Delta)$ 的最小值。我们对 $g(\\Delta)$ 求关于 $\\Delta$ 的一阶导数，并令其为零。\n$$ \\frac{d g}{d \\Delta} = \\frac{d}{d \\Delta} \\left( \\frac{c}{\\Delta} + \\frac{\\lambda \\Delta}{2} \\right) = -\\frac{c}{\\Delta^2} + \\frac{\\lambda}{2} $$\n令导数为零：\n$$ -\\frac{c}{\\Delta^2} + \\frac{\\lambda}{2} = 0 $$\n$$ \\frac{\\lambda}{2} = \\frac{c}{\\Delta^2} $$\n解出 $\\Delta^2$：\n$$ \\Delta^2 = \\frac{2c}{\\lambda} $$\n由于 $\\Delta$ 必须是正的持续时间，我们取正平方根：\n$$ \\Delta^{\\star} = \\sqrt{\\frac{2c}{\\lambda}} $$\n为确认这是一个最小值，我们检查二阶导数：\n$$ \\frac{d^2 g}{d \\Delta^2} = \\frac{d}{d \\Delta} \\left( -c \\Delta^{-2} + \\frac{\\lambda}{2} \\right) = 2c \\Delta^{-3} = \\frac{2c}{\\Delta^3} $$\n由于检查点成本 $c$ 和时间间隔 $\\Delta$ 都是正的物理量，$\\frac{2c}{\\Delta^3}$ 总是正的。因此，$g(\\Delta)$ 是一个凸函数，我们找到的临界点确实是一个最小值。\n\n最优检查点周期 $\\Delta^{\\star}$ 是 $\\sqrt{\\frac{2c}{\\lambda}}$。",
            "answer": "$$\\boxed{\\sqrt{\\frac{2c}{\\lambda}}}$$"
        },
        {
            "introduction": "三模冗余 (TMR) 是一种通过复制硬件模块来掩盖单个故障的强大技术，在航空航天和关键控制系统中有着广泛应用。本练习旨在分析一个典型的TMR架构，并揭示其潜在的薄弱环节——表决器。你将通过计算和比较，亲身体验如何通过对“单点故障”进行冗余设计来显著提升整个系统的可靠性。",
            "id": "4239543",
            "problem": "一个信息物理系统由一个数字孪生（DT）模型监控，该模型通过协调硬件、软件和时间上的冗余，在固定的任务周期内维持正确的驱动指令。该系统采用三模冗余（TMR），其定义为三个相同的计算模块并行执行，然后由一个多数表决器将三个模块的输出映射为单个指令。可靠性被量化为组件或架构阶段在任务周期内正常运行的概率。假设所有组件之间以及时间上分离的操作之间都是独立的。\n\n每个计算模块在软件上使用时间冗余：单次计算尝试的成功概率为 $p_{s}$，软件在任务周期内重复计算 $k$ 次，只要至少有一次尝试成功，就接受该结果。模块级可靠性 $R$ 源于这种时间冗余，必须基于 $k$ 次尝试相互独立的假设，从第一性原理推导得出。\n\n在基准架构中，使用一个可靠性为 $R_{v}$ 的单多数表决器来组合三个模块的输出。当且仅当表决器正常工作且三个模块中至少有两个正常工作时，系统才能产生正确的驱动指令。从第一性原理推导基准系统的可靠性 $R_{\\text{baseline}}$。\n\n为缓解表决器处的单点故障，提出并分析一种冗余表决器架构：部署三个相同的表决器，对相同的三个模块输出进行操作，并通过三个表决器输出的多数（即，表决器间的“三取二”多数）来接受最终指令。假设三个表决器输出的组合是通过一个共识机制实现的，其可靠性主要由表决器决定，在本计算中可以忽略不计。从第一性原理推导缓解后系统的可靠性 $R_{\\text{mitigated}}$。\n\n给定 $p_{s} = 0.88$，$k = 2$ 和 $R_{v} = 0.93$，计算乘性可靠性改善因子 $\\eta = R_{\\text{mitigated}} / R_{\\text{baseline}}$。将您的答案四舍五入至五位有效数字，并表示为无量纲小数。",
            "solution": "问题陈述已经过验证，被认为是科学上合理、定义明确且客观的。这是一个可靠性工程中的形式化问题，具有足够的信息以获得唯一解。\n\n求解过程分为四个阶段：\n1.  推导计算模块的可靠性 $R$。\n2.  推导基准系统的可靠性 $R_{\\text{baseline}}$。\n3.  推导缓解后系统的可靠性 $R_{\\text{mitigated}}$。\n4.  计算可靠性改善因子 $\\eta$。\n\n**1. 模块级可靠性 ($R$)**\n\n单个计算模块的可靠性由时间冗余方案决定。计算尝试 $k$ 次，只要至少有一次尝试成功，模块就算正常运行。单次尝试的成功概率为 $p_s$。\n\n单次尝试的失败概率为 $1 - p_s$。\n由于所有 $k$ 次尝试都是独立的，因此所有 $k$ 次尝试都失败的概率是 $(1 - p_s)^k$。\n模块的可靠性 $R$ 是它不失败的概率，即所有尝试都失败这一事件的补集。\n$$R = 1 - (1 - p_s)^k$$\n\n**2. 基准系统可靠性 ($R_{\\text{baseline}}$)**\n\n基准架构由一个用于计算模块的三模冗余（TMR）阶段和一个随后的单多数表决器组成。如果 TMR 模块阶段提供了正确的多数输入“且”表决器正常工作，则系统成功。这代表了一个由两个逻辑组件组成的串联系统：模块阶段和表决器。\n\n表决器的可靠性给定为 $R_v$。\n\nTMR 模块阶段的可靠性（我们称之为 $R_{\\text{modules}}$）是三个相同模块中至少有两个正常工作的概率。正常工作的模块数量 $N$ 服从参数为 $n=3$（试验次数）和 $p=R$（每次试验的成功概率）的二项分布。其概率质量函数为：\n$$P(N=j) = \\binom{3}{j} R^j (1-R)^{3-j}$$\n\n如果 $N \\geq 2$，则模块阶段成功。\n$$R_{\\text{modules}} = P(N=2) + P(N=3)$$\n$$R_{\\text{modules}} = \\binom{3}{2} R^2 (1-R)^1 + \\binom{3}{3} R^3 (1-R)^0$$\n$$R_{\\text{modules}} = 3 R^2 (1-R) + 1 \\cdot R^3 \\cdot 1$$\n$$R_{\\text{modules}} = 3R^2 - 3R^3 + R^3 = 3R^2 - 2R^3$$\n\n基准系统的总可靠性是这两个串联组件可靠性的乘积：\n$$R_{\\text{baseline}} = R_{\\text{modules}} \\times R_v = (3R^2 - 2R^3) R_v$$\n\n**3. 缓解后系统的可靠性 ($R_{\\text{mitigated}}$)**\n\n缓解后的架构用一个 TMR 表决器阶段替换了单个表决器。三个相同的表决器接收来自三个模块的相同输出，它们的结果通过最终的多数规则进行组合。如果整个过程成功，则产生正确的最终指令。\n\n为使系统产生正确的最终指令，必须满足两个相继的条件：\n1.  TMR 模块阶段必须产生正确的多数。如果少于两个模块是正确的，那么输入到表决器阶段的数据从根本上就是有缺陷的，无法生成正确的最终指令。如前所述，该阶段的可靠性为 $R_{\\text{modules}} = 3R^2 - 2R^3$。\n2.  假定模块阶段已产生正确的多数输入，TMR 表决器阶段必须正确处理此输入。每个表决器的可靠性为 $R_v$。如果表决器正常工作，它就能正确处理输入。如果三个表决器中至少有两个正常工作，则最终输出是正确的。\n\n因此，TMR 表决器阶段的可靠性 $R_{\\text{voters}}$ 是三个表决器中至少有两个正常工作的概率。这在结构上与模块 TMR 的计算相同，但概率为 $R_v$ 而不是 $R$。\n$$R_{\\text{voters}} = 3R_v^2 - 2R_v^3$$\n\n缓解后系统的可靠性是这两个串联阶段可靠性的乘积：\n$$R_{\\text{mitigated}} = R_{\\text{modules}} \\times R_{\\text{voters}} = (3R^2 - 2R^3)(3R_v^2 - 2R_v^3)$$\n\n**4. 可靠性改善因子 ($\\eta$)**\n\n乘性可靠性改善因子 $\\eta$ 是缓解后系统可靠性与基准系统可靠性的比值。\n$$\\eta = \\frac{R_{\\text{mitigated}}}{R_{\\text{baseline}}}$$\n代入上面推导出的表达式：\n$$\\eta = \\frac{(3R^2 - 2R^3)(3R_v^2 - 2R_v^3)}{(3R^2 - 2R^3)R_v}$$\n模块阶段可靠性的项 $(3R^2 - 2R^3)$ 被消掉了，因为它在两种架构中是共有的。这是预料之中的，因为改善完全是由于表决器架构的改变。\n$$\\eta = \\frac{3R_v^2 - 2R_v^3}{R_v}$$\n从分子中提出因子 $R_v$：\n$$\\eta = \\frac{R_v(3R_v - 2R_v^2)}{R_v} = 3R_v - 2R_v^2$$\n或者，也可以表示为：\n$$\\eta = R_v(3 - 2R_v)$$\n\n现在，我们代入给定的数值 $R_v = 0.93$。请注意，计算 $\\eta$ 不需要 $p_s$ 和 $k$ 的值。\n$$\\eta = 3(0.93) - 2(0.93)^2$$\n$$\\eta = 2.79 - 2(0.8649)$$\n$$\\eta = 2.79 - 1.7298$$\n$$\\eta = 1.0602$$\n结果 $1.0602$ 具有所要求的五位有效数字。",
            "answer": "$$\\boxed{1.0602}$$"
        },
        {
            "introduction": "在设计高可用性系统时，选择热备（Hot Standby）还是冷备（Cold Standby）策略是一个关键决策。本练习构建了一个包含故障、修复和切换过程的连续时间马尔可夫链 (CTMC) 模型，让你能够对这两种策略进行精确的定量分析。通过计算和比较这两种配置下的稳态可用性，你将掌握评估和选择复杂冗余架构的系统级分析方法。",
            "id": "4239628",
            "problem": "一个制造信息物理系统由一个孪生工厂对组成，由数字孪生 (DT) 进行编排，以提供跨硬件、软件和时间的冗余。一个工厂处于活动状态，另一个处于备用状态。DT 为热备用持续同步状态，并为冷备用执行周期性检查点。故障和修复由无记忆过程建模，这与经过充分检验的可靠性建模假设一致。\n\n使用的基本定义和事实：\n- 系统的可用性为 $A=\\frac{\\text{平均无故障时间 (MTBF)}}{\\text{MTBF}+\\text{平均修复时间 (MTTR)}}$，等效于系统可运行时间的长期比例。\n- 对于工厂内串联的独立指数故障过程，总故障率是各组件故障率之和。\n- 在指数分布的故障和修复下，冗余池中可运行单元的数量演变为一个连续时间马尔可夫链 (CTMC) 生灭过程，其故障和修复转移率由当前正常运行和故障单元的数量决定。\n\n假设以下科学上合理的参数：\n- 每个工厂的硬件故障率为 $\\lambda_{h}=6.0 \\times 10^{-7}\\ \\text{s}^{-1}$，软件故障率为 $\\lambda_{s}=9.0 \\times 10^{-7}\\ \\text{s}^{-1}$，两者相互独立。因此，工厂总故障率为 $\\lambda=\\lambda_{h}+\\lambda_{s}$。\n- 修复时间呈指数分布，均值为 $\\text{MTTR}=1200\\ \\text{s}$，因此修复率为 $\\mu=\\frac{1}{1200}\\ \\text{s}^{-1}$。\n- 热备用切换延迟 $S_{\\text{hot}}$ 服从形状参数 $k=3$ 和尺度参数 $\\theta=0.4\\ \\text{s}$ 的伽马分布（因此其均值为 $k\\theta$）。\n- 冷备用切换延迟 $S_{\\text{cold}}$ 是多个独立部分之和：一个形状参数 $k=4$ 和尺度参数 $\\theta=0.75\\ \\text{s}$ 的爱尔兰启动时间，一个均值为 $2\\ \\text{s}$ 的指数分布状态同步时间，以及一个由于时间冗余（周期 $T_{c}=8\\ \\text{s}$）产生的检查点追赶时间；假设故障在检查点间隔内均匀分布，因此期望追赶时间为 $\\frac{T_{c}}{2}$。\n\n将孪生工厂冗余建模为关于正常运行单元数 $\\{2,1,0\\}$ 的 CTMC，其转移如下：\n- 从 $2$ 到 $1$ 的转移率为 $2\\lambda$，\n- 从 $1$ 到 $0$ 的转移率为 $\\lambda$，\n- 从 $1$ 到 $2$ 的转移率为 $\\mu$，\n- 从 $0$ 到 $1$ 的转移率为 $2\\mu$。\n\n除了 CTMC 的驻留时间外，每当两个单元都正常运行时活动单元发生故障，DT 编排的故障切换会引入一个等于切换延迟的瞬时停机时间。当两个单元都发生故障时，系统在整个 CTMC 驻留期间都不可用。\n\n使用这些假设并从可用性定义出发，计算热备用可用性 $A_{\\text{hot}}$ 和冷备用可用性 $A_{\\text{cold}}$，然后计算比率 $\\frac{A_{\\text{hot}}}{A_{\\text{cold}}}$。将最终比率表示为纯小数（无量纲）。将最终比率四舍五入到八位有效数字。",
            "solution": "该问题要求计算一个孪生工厂信息物理系统在热备用和冷备用两种冗余方案下的可用性，然后求出这些可用性的比率。解决方案将按以下步骤进行：首先，计算基本系统参数；其次，使用给定的连续时间马尔可夫链 (CTMC) 模型确定系统处于具有 $2$、$1$ 或 $0$ 个可运行单元状态的稳态概率；第三，通过考虑所有停机来源来推导系统可用性；最后，计算所需的比率。\n\n**1. 系统参数**\n\n单个工厂的总故障率 $\\lambda$ 是独立的硬件故障率 $\\lambda_h$ 和软件故障率 $\\lambda_s$ 之和：\n$$ \\lambda = \\lambda_h + \\lambda_s = 6.0 \\times 10^{-7}\\ \\text{s}^{-1} + 9.0 \\times 10^{-7}\\ \\text{s}^{-1} = 1.5 \\times 10^{-6}\\ \\text{s}^{-1} $$\n修复率 $\\mu$ 是平均修复时间 ($\\text{MTTR}$) 的倒数：\n$$ \\mu = \\frac{1}{\\text{MTTR}} = \\frac{1}{1200\\ \\text{s}} \\approx 8.333 \\times 10^{-4}\\ \\text{s}^{-1} $$\n我们将使用 $\\mu$ 的精确分数形式以保持精度。\n\n热备用的期望切换延迟 $E[S_{\\text{hot}}]$ 是指定的形状参数 $k=3$ 和尺度参数 $\\theta=0.4\\ \\text{s}$ 的伽马分布的均值：\n$$ E[S_{\\text{hot}}] = k\\theta = 3 \\times 0.4\\ \\text{s} = 1.2\\ \\text{s} $$\n\n冷备用的期望切换延迟 $E[S_{\\text{cold}}]$ 是其三个独立分量的均值之和：\n1.  爱尔兰启动时间（形状参数 $k=4$，尺度参数 $\\theta=0.75\\ \\text{s}$）的均值：$k\\theta = 4 \\times 0.75\\ \\text{s} = 3.0\\ \\text{s}$。\n2.  指数分布的状态同步时间的均值：$2.0\\ \\text{s}$。\n3.  检查点追赶时间（在 $[0, T_c]$ 上均匀分布，其中 $T_c=8\\ \\text{s}$）的均值：$\\frac{T_c}{2} = \\frac{8\\ \\text{s}}{2} = 4.0\\ \\text{s}$。\n\n总期望延迟是这些期望值之和：\n$$ E[S_{\\text{cold}}] = 3.0\\ \\text{s} + 2.0\\ \\text{s} + 4.0\\ \\text{s} = 9.0\\ \\text{s} $$\n\n**2. CTMC 稳态分析**\n\n设 $\\pi_i$ 为系统有 $i$ 个可运行单元的稳态概率，其中 $i \\in \\{0, 1, 2\\}$。此生灭过程的转移如下：\n-   故障转移：$2 \\xrightarrow{2\\lambda} 1 \\xrightarrow{\\lambda} 0$\n-   修复转移：$0 \\xrightarrow{2\\mu} 1 \\xrightarrow{\\mu} 2$\n\n稳态的平衡方程通过将离开一个状态的速率与进入该状态的速率相等来推导：\n-   状态 0: $2\\mu \\pi_0 = \\lambda \\pi_1$\n-   状态 1: $(\\lambda + \\mu)\\pi_1 = 2\\mu \\pi_0 + 2\\lambda \\pi_2$\n-   状态 2: $2\\lambda \\pi_2 = \\mu \\pi_1$\n\n从状态 0 和状态 2 的平衡方程，我们可以用 $\\pi_1$ 来表示 $\\pi_0$ 和 $\\pi_2$：\n$$ \\pi_0 = \\pi_1 \\frac{\\lambda}{2\\mu} $$\n$$ \\pi_2 = \\pi_1 \\frac{\\mu}{2\\lambda} $$\n概率之和必须为 1：$\\pi_0 + \\pi_1 + \\pi_2 = 1$。代入 $\\pi_0$ 和 $\\pi_2$ 的表达式：\n$$ \\pi_1 \\frac{\\lambda}{2\\mu} + \\pi_1 + \\pi_1 \\frac{\\mu}{2\\lambda} = 1 $$\n$$ \\pi_1 \\left( \\frac{\\lambda}{2\\mu} + 1 + \\frac{\\mu}{2\\lambda} \\right) = 1 $$\n$$ \\pi_1 \\left( \\frac{\\lambda^2 + 2\\lambda\\mu + \\mu^2}{2\\lambda\\mu} \\right) = 1 $$\n$$ \\pi_1 \\frac{(\\lambda+\\mu)^2}{2\\lambda\\mu} = 1 \\implies \\pi_1 = \\frac{2\\lambda\\mu}{(\\lambda+\\mu)^2} $$\n现在我们求 $\\pi_0$ 和 $\\pi_2$：\n$$ \\pi_0 = \\frac{2\\lambda\\mu}{(\\lambda+\\mu)^2} \\cdot \\frac{\\lambda}{2\\mu} = \\frac{\\lambda^2}{(\\lambda+\\mu)^2} $$\n$$ \\pi_2 = \\frac{2\\lambda\\mu}{(\\lambda+\\mu)^2} \\cdot \\frac{\\mu}{2\\lambda} = \\frac{\\mu^2}{(\\lambda+\\mu)^2} $$\n\n**3. 系统可用性**\n\n系统可用性 $A$ 是系统可运行时间的长期比例。其补集，不可用性 $U = 1-A$，是系统停机时间的比例。停机时间发生在两种情况下：\n1.  系统处于状态 0（两个单元都发生故障）。这种情况发生的长期时间比例是 $\\pi_0$。\n2.  系统在备用单元可用时（即系统处于状态 2），活动单元发生故障后正在进行切换。状态 2 中活动单元的故障率为 $\\lambda$。因此，切换事件的长期发生率为 $\\lambda \\pi_2$。每次切换都会导致平均为 $E[S]$ 的停机时间。在切换中花费的长期时间比例是事件率与平均持续时间的乘积，即 $\\lambda \\pi_2 E[S]$。\n\n总不可用性 $U$ 是这两个部分的和：\n$$ U = \\pi_0 + \\lambda \\pi_2 E[S] $$\n代入 $\\pi_0$ 和 $\\pi_2$ 的表达式：\n$$ U = \\frac{\\lambda^2}{(\\lambda+\\mu)^2} + \\lambda \\frac{\\mu^2}{(\\lambda+\\mu)^2} E[S] $$\n可用性 $A = 1 - U$ 是：\n$$ A = 1 - \\frac{\\lambda^2}{(\\lambda+\\mu)^2} - \\frac{\\lambda\\mu^2}{(\\lambda+\\mu)^2} E[S] $$\n$$ A = \\frac{(\\lambda+\\mu)^2 - \\lambda^2 - \\lambda\\mu^2 E[S]}{(\\lambda+\\mu)^2} = \\frac{\\lambda^2 + 2\\lambda\\mu + \\mu^2 - \\lambda^2 - \\lambda\\mu^2 E[S]}{(\\lambda+\\mu)^2} $$\n$$ A = \\frac{2\\lambda\\mu + \\mu^2 - \\lambda\\mu^2 E[S]}{(\\lambda+\\mu)^2} = \\frac{\\mu(2\\lambda + \\mu - \\lambda\\mu E[S])}{(\\lambda+\\mu)^2} $$\n\n**4. 可用性比率**\n\n我们现在通过代入各自的期望切换时间 $E[S_{\\text{hot}}]$ 和 $E[S_{\\text{cold}}]$，来计算热备用和冷备用情况下的可用性，分别表示为 $A_{\\text{hot}}$ 和 $A_{\\text{cold}}$。\n$$ A_{\\text{hot}} = \\frac{\\mu(2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{hot}}])}{(\\lambda+\\mu)^2} $$\n$$ A_{\\text{cold}} = \\frac{\\mu(2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{cold}}])}{(\\lambda+\\mu)^2} $$\n比率 $\\frac{A_{\\text{hot}}}{A_{\\text{cold}}}$ 是：\n$$ \\frac{A_{\\text{hot}}}{A_{\\text{cold}}} = \\frac{\\frac{\\mu(2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{hot}}])}{(\\lambda+\\mu)^2}}{\\frac{\\mu(2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{cold}}])}{(\\lambda+\\mu)^2}} = \\frac{2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{hot}}]}{2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{cold}}]} $$\n\n**5. 数值计算**\n\n我们将数值代入比率表达式：\n- $\\lambda = 1.5 \\times 10^{-6}\\ \\text{s}^{-1}$\n- $\\mu = \\frac{1}{1200}\\ \\text{s}^{-1}$\n- $E[S_{\\text{hot}}] = 1.2\\ \\text{s}$\n- $E[S_{\\text{cold}}] = 9.0\\ \\text{s}$\n\n首先，我们计算公共项：\n$$ 2\\lambda = 2 \\times (1.5 \\times 10^{-6}\\ \\text{s}^{-1}) = 3.0 \\times 10^{-6}\\ \\text{s}^{-1} $$\n$$ \\lambda\\mu = (1.5 \\times 10^{-6}\\ \\text{s}^{-1}) \\times \\left(\\frac{1}{1200}\\ \\text{s}^{-1}\\right) = 1.25 \\times 10^{-9}\\ \\text{s}^{-2} $$\n\n现在，计算比率的分子和分母：\n分子: $N = 2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{hot}}]$\n$$ N = 3.0 \\times 10^{-6} + \\frac{1}{1200} - (1.25 \\times 10^{-9}) \\times 1.2 $$\n$$ N = 3.0 \\times 10^{-6} + \\frac{1}{1200} - 1.5 \\times 10^{-9} $$\n\n分母: $D = 2\\lambda + \\mu - \\lambda\\mu E[S_{\\text{cold}}]$\n$$ D = 3.0 \\times 10^{-6} + \\frac{1}{1200} - (1.25 \\times 10^{-9}) \\times 9.0 $$\n$$ D = 3.0 \\times 10^{-6} + \\frac{1}{1200} - 1.125 \\times 10^{-8} $$\n\n设 $C = 2\\lambda + \\mu = 3.0 \\times 10^{-6} + \\frac{1}{1200} \\approx 0.000836333333$。\n$N \\approx 0.000836333333 - 1.5 \\times 10^{-9} = 0.000836331833$\n$D \\approx 0.000836333333 - 1.125 \\times 10^{-8} = 0.000836322083$\n\n该比率为：\n$$ \\frac{A_{\\text{hot}}}{A_{\\text{cold}}} = \\frac{N}{D} \\approx \\frac{0.000836331833}{0.000836322083} \\approx 1.00001165814 $$\n\n将结果四舍五入到八位有效数字，我们得到 $1.0000117$。\n该比率略大于 1，这是预料之中的，因为热备用的切换停机时间要小得多，从而导致更高的可用性。",
            "answer": "$$\\boxed{1.0000117}$$"
        }
    ]
}
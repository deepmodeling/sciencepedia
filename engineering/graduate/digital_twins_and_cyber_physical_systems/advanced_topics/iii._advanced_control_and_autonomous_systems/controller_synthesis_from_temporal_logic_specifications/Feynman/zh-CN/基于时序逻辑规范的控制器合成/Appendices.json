{
    "hands_on_practices": [
        {
            "introduction": "在“正确性由构造保证”（correct-by-construction）的综合方法中，首要的关键步骤是将模糊的自然语言需求转化为精确的数学逻辑。本练习旨在磨练您将系统行为形式化为线性时序逻辑（LTL）公式的能力，并正确区分安全性（不变性）和活性（保证进展）属性。掌握这项技能  是创建能够准确捕捉预期设计目标的规范的基础。",
            "id": "4210942",
            "problem": "一个信息物理系统 (CPS) 将物理过程与计算和通信相集成，而一个数字孪生 (DT) 则映射CPS的状态以支持监控和控制。考虑为一个冷却剂回路子系统，从线性时序逻辑 (LTL) 规范出发，合成一个构造性正确的控制器。控制目标是在遵守安全联锁以及在通信丢失和故障条件下的恢复行为的同时，协调驱动和监控模式。\n\n给定以下原子命题，均为布尔型，并沿执行轨迹在离散时间步上求值：\n- $h$：物理系统报告高压（高于认证阈值）。\n- $o$：控制器发出打开冷却剂阀门的命令。\n- $d$：诊断孪生标记在回路中检测到故障。\n- $s$：控制器处于安全模式。\n- $r$：观察到复位命令。\n- $p$：发生传感器数据轮询动作。\n- $c$：通信正常（DT已连接到CPS）。\n- $y$：DT与CPS状态同步。\n\n关注的时序需求如下：\n- $\\mathsf{R\\_1}$：控制器不得在压力高时打开阀门。\n- $\\mathsf{R\\_2}$：如果检测到故障，控制器最终应进入安全模式。\n- $\\mathsf{R\\_3}$：传感器轮询应无限频繁地发生。\n- $\\mathsf{R\\_4}$：一旦进入安全模式，它将保持激活状态直到复位发生（如果没有复位发生，则可能永远保持激活状态）。\n- $\\mathsf{R\\_5}$：只要通信正常，最终应实现与物理系统的同步。\n\n请选择为每个需求提供了正确的安全性与活性分类，并使用了标准算子 $G$ (全局)、$F$ (最终)、$U$ (直到)、$R$ (释放)、$\\neg$ (否定)、$\\wedge$ (合取) 和 $\\rightarrow$ (蕴含) 进行了正确LTL编码的选项。\n\nA. \n- $\\mathsf{R\\_1}$：安全性；$G\\,\\neg(h \\wedge o)$。\n- $\\mathsf{R\\_2}$：活性；$G\\,(d \\rightarrow F\\,s)$。\n- $\\mathsf{R\\_3}$：活性；$G F\\,p$。\n- $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (\\,r \\mathbin{R} s\\,)\\big)$。\n- $\\mathsf{R\\_5}$：活性；$G\\,(c \\rightarrow F\\,y)$。\n\nB.\n- $\\mathsf{R\\_1}$：活性；$F\\,\\neg(h \\wedge o)$。\n- $\\mathsf{R\\_2}$：安全性；$G\\,(d \\rightarrow G\\,s)$。\n- $\\mathsf{R\\_3}$：安全性；$F G\\,p$。\n- $\\mathsf{R\\_4}$：活性；$G\\,(s \\rightarrow F\\,r)$。\n- $\\mathsf{R\\_5}$：安全性；$G\\,(c \\rightarrow G\\,y)$。\n\nC.\n- $\\mathsf{R\\_1}$：安全性；$G\\,(h \\rightarrow o)$。\n- $\\mathsf{R\\_2}$：活性；$F\\,(s \\wedge d)$。\n- $\\mathsf{R\\_3}$：活性；$G F\\,p$。\n- $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (\\,s \\mathbin{U} r\\,)\\big)$。\n- $\\mathsf{R\\_5}$：活性；$F\\,y$。\n\nD.\n- $\\mathsf{R\\_1}$：安全性；$G\\,\\neg(h \\wedge o)$。\n- $\\mathsf{R\\_2}$：活性；$G\\,(d \\rightarrow F\\,s)$。\n- $\\mathsf{R\\_3}$：活性；$F G\\,p$。\n- $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (\\,s \\mathbin{R} r\\,)\\big)$。\n- $\\mathsf{R\\_5}$：活性；$G\\,(F\\,y)$。",
            "solution": "该问题陈述是形式化方法领域一个适定的练习，特别是关于将信息物理系统 (CPS) 的自然语言需求转换为线性时序逻辑 (LTL) 规范，并将其分类为安全性或活性属性。\n\n### 第1步：提取已知信息\n该问题逐字提供了以下信息：\n- **原子命题 (布尔型):**\n  - $h$：物理系统报告高压。\n  - $o$：控制器发出打开冷却剂阀门的命令。\n  - $d$：诊断孪生标记在回路中检测到故障。\n  - $s$：控制器处于安全模式。\n  - $r$：观察到复位命令。\n  - $p$：发生传感器数据轮询动作。\n  - $c$：通信正常。\n  - $y$：DT与CPS状态同步。\n- **时序需求:**\n  - $\\mathsf{R\\_1}$：控制器不得在压力高时打开阀门。\n  - $\\mathsf{R\\_2}$：如果检测到故障，控制器最终应进入安全模式。\n  - $\\mathsf{R\\_3}$：传感器轮询应无限频繁地发生。\n  - $\\mathsf{R\\_4}$：一旦进入安全模式，它将保持激活状态直到复位发生（如果没有复位发生，则可能永远保持激活状态）。\n  - $\\mathsf{R\\_5}$：只要通信正常，最终应实现与物理系统的同步。\n\n### 第2步：使用提取的已知信息进行验证\n根据既定的验证标准对该问题进行评估。\n- **科学依据：** 该问题使用了计算机科学和控制理论中标准的、定义明确的概念，即用线性时序逻辑 (LTL) 来描述系统行为。该场景代表了CPS和数字孪生领域的一个典型应用。该问题在科学上是合理的。\n- **适定性：** 自然语言需求的陈述足够清晰，允许在LTL中进行唯一的形式化。任务是识别正确的LTL公式和属性分类（安全性/活性），这是一个确定性问题。\n- **客观性：** 语言是技术性的，没有主观性或歧义。\n- **完整性和一致性：** 所提供的原子命题足以表达给定的需求。问题设置中没有明显的矛盾。\n- **真实性和可行性：** 带有安全联锁的冷却剂回路场景是一个现实的工程问题，对于这类问题，形式化规约是一种有效的方法。\n\n### 第3步：结论与行动\n问题陈述是**有效的**。可以继续进行分析。\n\n### 正确规范的推导\n\n在评估选项之前，我们将首先根据基本原理为每个需求推导出正确的分类和LTL公式。\n\n一个**安全性**属性断言“坏事永不发生”。安全性属性的违反总是可以通过一个有限的执行轨迹来证明。\n一个**活性**属性断言“好事终将发生”。活性属性的违反只能通过一个无限的执行轨迹来证明，因为“好事”总可能在未来的某个时刻发生。\n\n- **$\\mathsf{R\\_1}$：控制器不得在压力高时打开阀门。**\n  - **分类：** 这是一个**安全性**属性。“坏事”是指高压 ($h$) 和开阀命令 ($o$) 同时发生。如果在任何有限时间内观察到 $h \\wedge o$ 为真的状态，则该属性被违反。\n  - **LTL编码：** “永不 ($h \\wedge o$)”这一属性必须在所有时间（全局）都成立。这表示为 $G\\,\\neg(h \\wedge o)$。\n\n- **$\\mathsf{R\\_2}$：如果检测到故障，控制器最终应进入安全模式。**\n  - **分类：** 这是一个**活性**属性。“好事”是在检测到故障 ($d$) 后的某个时刻进入安全模式 ($s$)。一个有限的轨迹，其中故障已经发生但尚未进入安全模式，并不构成违规，因为安全模式仍可能在未来进入。只有当故障发生但安全模式从未进入的无限轨迹才构成违规。\n  - **LTL编码：** 这个需求必须在所有时间都成立。“全局地，如果 $d$ 为真，那么最终 $s$ 变为真”。这可以转换为LTL公式 $G\\,(d \\rightarrow F\\,s)$。\n\n- **$\\mathsf{R\\_3}$：传感器轮询应无限频繁地发生。**\n  - **分类：** 这是一个典型的**活性**属性。它要求轮询 ($p$) 这件“好事”一次又一次地发生，永不停止。违规的轨迹将是，在某个有限时间之后，轮询再也不发生。这只能通过观察无限轨迹来确认。\n  - **LTL编码：** “无限频繁地 $p$” 这一属性表示为 “全局地，最终 $p$” 或 $G F\\,p$。\n\n- **$\\mathsf{R\\_4}$：一旦进入安全模式，它将保持激活状态直到复位发生（如果没有复位发生，则可能永远保持激活状态）。**\n  - **分类：** 这是一个**安全性**属性。“坏事”是在没有复位 ($r$) 的情况下离开安全模式 ($\\neg s$)。一个显示从具有 $s$ 的状态转换到具有 $\\neg s$ 的状态，而第一个状态没有 $r$ 的有限轨迹，是违规的有限见证。\n  - **LTL编码：** 语句以“一旦进入安全模式...”开始，这可以转换为一个全局蕴含“全局地，如果在安全模式下...”：$G\\,(s \\rightarrow \\dots)$。后件规定系统“保持激活（$s$）直到复位（$r$）发生”，包括复位永不发生的情况。这是“弱直到”(weak until)的定义。标准的 `Until` 算子 $U$ 是“强”的，会要求 $r$ 最终必须发生。这里的 `Release` 算子 $R$ 很适用。公式 $\\phi_1 \\mathbin{R} \\phi_2$ 意味着 $\\phi_2$ 必须保持为真，直到并包括 $\\phi_1$ 变为真的那个点；如果 $\\phi_1$ 永不为真，则 $\\phi_2$ 必须永远为真。在这里，要维持的属性是 $s$，释放条件是 $r$。因此，我们希望从 $s$ 为真的那一刻起保持的状态属性是 $r \\mathbin{R} s$。完整的公式是 $G\\big(s \\rightarrow (r \\mathbin{R} s)\\big)$。\n\n- **$\\mathsf{R\\_5}$：只要通信正常，最终应实现与物理系统的同步。**\n  - **分类：** 这是一个**活性**属性。“好事”是在通信正常 ($c$) 后实现同步 ($y$)。一个 $c$ 为真但 $y$ 尚未为真的有限轨迹不构成违规，因为同步可能在稍后发生。\n  - **LTL编码：** “只要”(Whenever)一词意味着全局范围。“全局地，如果通信正常（$c$），那么最终实现同步（$y$）”。这直接转换为 $G\\,(c \\rightarrow F\\,y)$。\n\n### 正确规范总结\n- $\\mathsf{R\\_1}$：安全性；$G\\,\\neg(h \\wedge o)$\n- $\\mathsf{R\\_2}$：活性；$G\\,(d \\rightarrow F\\,s)$\n- $\\mathsf{R\\_3}$：活性；$G F\\,p$\n- $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (r \\mathbin{R} s)\\big)$\n- $\\mathsf{R\\_5}$：活性；$G\\,(c \\rightarrow F\\,y)$\n\n### 逐项选项分析\n\n- **A.**\n  - $\\mathsf{R\\_1}$：安全性；$G\\,\\neg(h \\wedge o)$。**正确**。与我们推导的分类和公式相符。\n  - $\\mathsf{R\\_2}$：活性；$G\\,(d \\rightarrow F\\,s)$。**正确**。与我们推导的分类和公式相符。\n  - $\\mathsf{R\\_3}$：活性；$G F\\,p$。**正确**。与我们推导的“无限频繁地”的分类和公式相符。\n  - $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (\\,r \\mathbin{R} s\\,)\\big)$。**正确**。与我们推导的弱直到(weak until)的分类和公式相符。\n  - $\\mathsf{R\\_5}$：活性；$G\\,(c \\rightarrow F\\,y)$。**正确**。与我们推导的分类和公式相符。\n  此选项为所有五个需求提供了正确的分类和LTL公式。\n\n- **B.**\n  - $\\mathsf{R\\_1}$：活性；$F\\,\\neg(h \\wedge o)$。**不正确**。$\\mathsf{R\\_1}$ 是一个安全性属性。该公式意味着“最终，坏状态不会发生”，这是一个微不足道的活性属性，并没有强制执行安全约束。\n  - $\\mathsf{R\\_2}$：安全性；$G\\,(d \\rightarrow G\\,s)$。**不正确**。$\\mathsf{R\\_2}$ 是一个活性属性。该公式规定，如果发生故障，系统必须**立即并永久**处于安全模式，这比要求要强得多，并且是一个安全性属性。\n  - $\\mathsf{R\\_3}$：安全性；$F G\\,p$。**不正确**。$\\mathsf{R\\_3}$ 是一个活性属性。公式 $F G\\,p$ 意味着“最终，系统达到一个状态，从此以后轮询始终为真”，这与“无限频繁地”不同。\n  - $\\mathsf{R\\_4}$：活性；$G\\,(s \\rightarrow F\\,r)$。**不正确**。$\\mathsf{R\\_4}$ 是一个安全性属性。该公式错误地断言，在进入安全模式后，复位必须最终发生。\n  - $\\mathsf{R\\_5}$：安全性；$G\\,(c \\rightarrow G\\,y)$。**不正确**。$\\mathsf{R\\_5}$ 是一个活性属性。该公式太强，要求一旦通信正常，就立即和永久同步。\n\n- **C.**\n  - $\\mathsf{R\\_1}$：安全性；$G\\,(h \\rightarrow o)$。**不正确**。该公式在逻辑上有缺陷；它指出高压意味着阀门必须打开，这与需求相反。\n  - $\\mathsf{R\\_2}$：活性；$F\\,(s \\wedge d)$。**不正确**。该公式要求最终存在一个 $s$ 和 $d$ 同时为真的状态。这没有捕捉到所要求的蕴含关系‘如果 $d$，那么最终 $s$’。\n  - $\\mathsf{R\\_3}$：活性；$G F\\,p$。**正确**。这是此选项中唯一正确的部分。\n  - $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (\\,s \\mathbin{U} r\\,)\\big)$。**不正确**。使用强 `Until` 算子 ($U$) 错误地暗示复位 ($r$) **必须**最终发生。\n  - $\\mathsf{R\\_5}$：活性；$F\\,y$。**不正确**。该公式忽略了关键的前提条件，即此需求仅在通信 ($c$) 正常时适用。\n\n- **D.**\n  - $\\mathsf{R\\_1}$：安全性；$G\\,\\neg(h \\wedge o)$。**正确**。\n  - $\\mathsf{R\\_2}$：活性；$G\\,(d \\rightarrow F\\,s)$。**正确**。\n  - $\\mathsf{R\\_3}$：活性；$F G\\,p$。**不正确**。与选项B中的错误相同。$F G\\,p$ 意味着“最终永远 $p$”，而不是“无限频繁地 $p$”。\n  - $\\mathsf{R\\_4}$：安全性；$G\\big(s \\rightarrow (\\,s \\mathbin{R} r\\,)\\big)$。**不正确**。`Release` 算子的参数被调换了。$s \\mathbin{R} r$ 意味着“$r$ 必须成立直到 $s$ 变为真”，这与需求不符。\n  - $\\mathsf{R\\_5}$：活性；$G\\,(F\\,y)$。**不正确**。该公式缺少前提条件 $c$。它要求无限频繁地同步，而不管通信状态如何。\n\n根据分析，只有选项A为所有五个需求正确地确定了分类并提供了正确的LTL公式。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "控制器综合本质上是控制器与其环境之间的一场博弈，控制器试图找到一种“必胜策略”，以在所有可能的环境行为下满足其规范。本练习  探讨了“可实现性”（realizability）这一关键概念——即这种必胜策略是否存在。您将分析环境不受约束的强大能力如何使一个规范从某些起始点变得不可实现，从而揭示定义环境假设和初始条件的重要性。",
            "id": "4210918",
            "problem": "一个走廊-门-机器人系统的数字孪生被用来为一个信息物理机器人合成控制器。走廊有离散的位置 $p \\in \\{0,1,2\\}$，其中位置 $p=2$ 是位于 $p=1$ 和 $p=2$ 之间的门后的目标区域。在每个离散时间步 $t \\in \\mathbb{N}$，环境（门过程）首先设置门的状态 $d_t \\in \\{0,1\\}$，其中 $d_t=1$ 表示“打开”，$d_t=0$ 表示“关闭”，然后控制器根据观测到的历史选择一个动作 $a_t \\in \\{\\text{stay}, \\text{right}\\}$。运动学规则如下：\n- 如果 $a_t=\\text{stay}$，那么 $p_{t+1}=p_t$，\n- 如果 $a_t=\\text{right}$，那么 $p_{t+1}=\\min\\{p_t+1,2\\}$。\n\n闭环行为根据 $(p_t,d_t)$ 轨迹上的一个线性时序逻辑 (LTL) 规范 $\\varphi$ 进行评估：\n$$\n\\varphi \\;\\;=\\;\\; G\\big((p=1 \\wedge d=0)\\rightarrow X(p=1)\\big)\\;\\wedge\\; F(p=2).\n$$\n安全性合取项 $G\\big((p=1 \\wedge d=0)\\rightarrow X(p=1)\\big)$ 要求如果机器人在 $p=1$ 且门是关闭的，那么在下一步机器人必须保持在 $p=1$（即，它不能穿过关闭的门）。活性合取项 $F(p=2)$ 要求机器人最终到达目标位置 $p=2$。对环境没有公平性或活性假设（环境可以永远保持门关闭）。\n\n控制器策略是一个函数 $\\sigma_C$，它将状态和门信号的有限历史映射到动作。环境策略是一个函数 $\\sigma_E$，它将有限历史映射到门信号。给定一个初始状态集 $S_0 \\subseteq \\{0,1,2\\}$，“从 $S_0$” 的可实现性意味着：存在一个控制器策略 $\\sigma_C$，使得对于每个初始位置 $p_0 \\in S_0$ 和每个环境策略 $\\sigma_E$，所产生的闭环轨迹都满足 $\\varphi$。\n\n对于该系统和规范，哪个选项正确地描述了可实现性如何依赖于初始状态集 $S_0$ 的选择，并解释了其中的差异？\n\nA. 规范 $\\varphi$ 恰好对于满足 $S_0 \\subseteq \\{2\\}$ 的初始状态集 $S_0$ 是可实现的；特别是从 $S_0=\\{2\\}$ 是可实现的（例如，通过总是选择 $a_t=\\text{stay}$），而从任何包含 $p \\neq 2$ 状态的 $S_0$ 都是不可实现的，因为环境可以永远保持 $d_t=0$，从而证伪 $F(p=2)$。\n\nB. 规范 $\\varphi$ 从 $S_0=\\{1\\}$ 是可实现的，策略是等到 $d=1$ 时再向右移动，但从 $S_0=\\{0\\}$ 是不可实现的，因为安全性合取项阻止了从 $p=0$ 到达目标。\n\nC. 规范 $\\varphi$ 从每个非空的 $S_0$ 都是可实现的，因为控制器可以通过重复选择 $a_t=\\text{right}$ 来强制实现 $F(p=2)$，最终无论门的状态如何都能到达 $p=2$。\n\nD. 规范 $\\varphi$ 从 $S_0=\\{2\\}$ 以及任何与 $\\{2\\}$ 相交的 $S_0$ 都是可实现的，因为控制器可以确保运行实际上从 $p=2$ 开始，并在此后维持安全性。",
            "solution": "问题陈述已被验证，并被认为是自洽的、在反应式合成理论中有科学依据的、并且是良构的。我们可以进行完整的解答。\n\n该问题要求找出初始位置集合 $S_0 \\subseteq \\{0,1,2\\}$，从这些位置出发，线性时序逻辑 (LTL) 规范 $\\varphi$ 是可实现的。从集合 $S_0$ 的可实现性意味着存在一个单一的控制器策略 $\\sigma_C$，它能保证对于从 $S_0$ 中任何 $p_0$ 开始的、且对抗任何环境策略 $\\sigma_E$ 的运行，规范 $\\varphi$ 都能被满足。这等同于在控制器与环境的双人博弈中，为控制器找到获胜初始状态的集合。\n\nLTL 规范为 $\\varphi = \\varphi_S \\wedge \\varphi_L$，其中：\n-   安全性部分是 $\\varphi_S = G\\big((p=1 \\wedge d=0)\\rightarrow X(p=1)\\big)$。\n-   活性部分是 $\\varphi_L = F(p=2)$。\n\n控制器必须对所有可能的环境行为都满足这两个部分。\n\n首先，我们来分析安全性合取项 $\\varphi_S$。它陈述了“全局地，如果机器人在位置 $p=1$ 且门是关闭的 ($d=0$)，那么在下一个时间步，机器人必须处于位置 $p=1$。” 让我们检查一下控制器在 $p_t=1$ 时的选项：\n-   如果控制器选择 $a_t = \\text{stay}$，下一个位置是 $p_{t+1}=p_t=1$。这满足了要求 $X(p=1)$。\n-   如果控制器选择 $a_t = \\text{right}$，下一个位置是 $p_{t+1}=\\min\\{1+1,2\\}=2$。这违反了要求 $X(p=1)$。\n\n因此，为了满足 $\\varphi_S$，任何有效的控制器策略 $\\sigma_C$都必须强制执行以下规则：如果系统状态为 $(p_t, d_t) = (1, 0)$，控制器必须选择动作 $a_t = \\text{stay}$。任何其他动作都会导致立即违反该规范。\n\n接下来，我们分析活性合取项 $\\varphi_L$，它要求机器人最终到达目标位置 $p=2$。控制器必须能够对抗任何环境策略来强制达成这个结果。问题关键地指出，对环境没有公平性假设；具体来说，“环境可以永远保持门关闭”。\n\n我们现在通过检查每个可能的起始位置 $p_0 \\in \\{0, 1, 2\\}$ 来确定获胜初始位置的集合。\n\n情况 1: $p_0 = 2$。\n活性要求 $F(p=2)$ 在 $t=0$ 时立即得到满足，因为机器人已经到达目标。为了满足安全性要求 $\\varphi_S$，控制器可以采用“总是选择 $a_t = \\text{stay}$”的策略。使用此策略，机器人的位置对于所有 $t \\in \\mathbb{N}$ 都保持为 $p_t=2$。$\\varphi_S$ 中蕴含式的前件 $(p=1 \\wedge d=0)$ 永远不为真。因此，该蕴含式在所有时间都空洞地为真，$\\varphi_S$ 得到满足。由于 $\\varphi_S$ 和 $\\varphi_L$ 都得到满足，所以该规范从 $p_0=2$ 是可实现的。\n\n情况 2: $p_0 = 1$。\n为了满足活性要求 $F(p=2)$，控制器必须最终在 $p_t=1$ 时选择动作 $a_t = \\text{right}$。然而，只有在不违反安全条件的情况下，这个动作才是允许的。\n- 如果门是打开的 ($d_t=1$)，安全条件 $(p=1 \\wedge d=0)$ 为假。控制器可以自由选择 $a_t=\\text{right}$ 以进入 $p=2$。\n- 如果门是关闭的 ($d_t=0$)，如前所述，安全条件要求控制器选择 $a_t=\\text{stay}$。\n\n现在，考虑一个总是为所有 $t$ 选择 $d_t=0$ 的敌对环境策略 $\\sigma_E$。\n- 在 $t=0$ 时，状态为 $p_0=1$。环境选择 $d_0=0$。\n- 控制器必须选择一个动作。为了满足 $\\varphi_S$，它必须选择 $a_0=\\text{stay}$。任何其他选择都会违反安全性。所以，$p_1=1$。\n- 在 $t=1$ 时，状态为 $p_1=1$。环境再次选择 $d_1=0$。\n- 控制器必须再次选择 $a_1=\\text{stay}$。所以，$p_2=1$。\n这个过程无限持续下去。产生的轨迹对于所有 $t \\in \\mathbb{N}$ 都有 $p_t=1$。在这条轨迹上，位置 $p=2$ 永远不会到达，所以活性要求 $F(p=2)$ 被违反了。因为存在一种环境策略可以强制违反 $\\varphi$，所以该规范从 $p_0=1$ 是不可实现的。\n\n情况 3: $p_0=0$。\n为了向目标 $p=2$ 取得进展，控制器必须选择 $a_t=\\text{right}$。\n- 假设控制器选择 $a_0=\\text{right}$。那么 $p_1=\\min\\{0+1,2\\}=1$。\n- 在时间 $t=1$ 时，机器人位于位置 $p=1$。这使问题归结为情况2。正如在情况2中确立的，从 $p=1$ 开始，一个对抗性的环境可以在不违反安全规范的情况下，阻止机器人到达 $p=2$。\n因此，该规范从 $p_0=0$ 是不可实现的。\n\n总结：控制器的获胜初始状态集合是 $\\{2\\}$。从集合 $S_0$ 的可实现性要求 $S_0$ 中的每个 $p_0$ 都必须是一个获胜状态。因此，该规范是可实现的当且仅当 $S_0 \\subseteq \\{2\\}$。\n\n现在我们评估给定的选项。\n\nA. 规范 $\\varphi$ 恰好对于满足 $S_0 \\subseteq \\{2\\}$ 的初始状态集 $S_0$ 是可实现的；特别是从 $S_0=\\{2\\}$ 是可实现的（例如，通过总是选择 $a_t=\\text{stay}$），而从任何包含 $p \\neq 2$ 状态的 $S_0$ 都是不可实现的，因为环境可以永远保持 $d_t=0$，从而证伪 $F(p=2)$。\n该陈述与我们的推导完全一致。它正确地将获胜状态集确定为 $\\{2\\}$，提供了从 $p=2$ 出发的有效获胜策略，并正确解释了为什么状态 $p \\neq 2$ 是失败状态：安全性要求和最坏情况下的环境（门永远关闭）的组合会困住机器人，从而阻止活性的实现。\n**结论：正确。**\n\nB. 规范 $\\varphi$ 从 $S_0=\\{1\\}$ 是可实现的，策略是等到 $d=1$ 时再向右移动，但从 $S_0=\\{0\\}$ 是不可实现的，因为安全性合取项阻止了从 $p=0$ 到达目标。\n第一个子句是错误的。正如所论证的，该规范从 $S_0=\\{1\\}$ 是不可实现的，因为没有假设环境是公平的（它可能永远不会设置 $d_t=1$）。关于为什么从 $S_0=\\{0\\}$ 不可实现的理由也不精确；安全性合取项作用于 $p=1$，而不是 $p=0$。从 $p=0$ 失败是 $p=1$ 是一个失败状态的结果。\n**结论：不正确。**\n\nC. 规范 $\\varphi$ 从每个非空的 $S_0$ 都是可实现的，因为控制器可以通过重复选择 $a_t=\\text{right}$ 来强制实现 $F(p=2)$，最终无论门的状态如何都能到达 $p=2$。\n这个提议的策略是无效的，因为它违反了安全性合取项 $\\varphi_S$。如果机器人在 $p=1$ 且门是关闭的 ($d=0$)，选择 $a_t=\\text{right}$ 会导致 $p_{t+1}=2$，但安全性属性要求 $p_{t+1}=1$。一个获胜策略必须对*所有*环境行为（包括这一个）都满足规范。\n**结论：不正确。**\n\nD. 规范 $\\varphi$ 从 $S_0=\\{2\\}$ 以及任何与 $\\{2\\}$ 相交的 $S_0$ 都是可实现的，因为控制器可以确保运行实际上从 $p=2$ 开始，并在此后维持安全性。\n该陈述错误地解释了从一个集合实现可实现性的定义。如果 $S_0 = \\{1, 2\\}$，它与 $\\{2\\}$ 相交，但从 $S_0$ 的可实现性要求存在一个对 $p_0=1$ *和* $p_0=2$ *都*有效的获胜策略。我们已经证明不存在这样的策略，因为 $p=1$ 是一个失败状态。当实际初始状态 $p_0$ 可以是 $1$ 时，那种运行“实际上从 $p=2$ 开始”的概念是无意义的。\n**结论：不正确。**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "当一个规范不可实现时，意味着环境拥有一个“反策略”（counterstrategy），可以迫使系统失败。本练习  提供了一个在具有物理动力学系统中的实践机会，其中控制和扰动的力量有明确的界限。通过构建一个对抗性的环境策略，您将证明为什么该规范是不安全的，并计算出迫使安全违规所需的最短时间。",
            "id": "4210961",
            "problem": "考虑一个离散时间的赛博物理系统（CPS），该系统通过其数字孪生对实验室的热调节进行建模。设备温度状态在离散时间 $k \\in \\mathbb{N}$ 时表示为 $x_{k} \\in \\mathbb{R}$。控制器选择一个受驱动限制的冷却动作 $u_{k} \\in \\mathbb{R}$，而环境选择一个受扰动界限和公平性约束的热扰动 $w_{k} \\in \\mathbb{R}$。其动态特性由以下加性模型给出\n$$\nx_{k+1} = x_{k} + u_{k} + w_{k},\n$$\n初始条件为 $x_{0} = 7.3$，控制器限制为 $|u_{k}| \\leq U$ (其中 $U = 1.1$)，扰动界限为 $0 \\leq w_{k} \\leq W$ (其中 $W = 2.0$)。\n\n线性时序逻辑（LTL）规范采用广义反应(1)（GR(1)）形式，包含以下环境假设和系统保证：\n\n- 环境假设：\n  1. $G(0 \\leq w \\leq W)$,\n  2. $GF(w = 0)$,\n\n- 系统保证：\n  1. $G(x \\leq X_{m})$ (其中 $X_{m} = 10$),\n  2. $GF(x \\leq X_{g})$ (其中 $X_{g} = 6$)。\n\n这里，$G$ 表示“全局”算子（总是），$F$ 表示“最终”算子（有时）。综合语义是针对无限迹的反应式综合的标准语义：环境选择满足假设的扰动序列 $\\{w_{k}\\}_{k \\geq 0}$，而控制器选择受限于边界的动作序列 $\\{u_{k}\\}_{k \\geq 0}$，试图在产生的状态迹 $\\{x_{k}\\}_{k \\geq 0}$ 上强制执行这些保证。\n\n仅从迹上的线性时序逻辑满足性定义、CPS 更新法则以及有界输入有界扰动约束出发，通过构造一个能产生违规迹的环境反策略，并精确解释其如何证伪系统保证，来证明上述 GR(1) 规范是不可实现的。然后，计算在环境的假设下，无论控制器做出何种决策，环境强制违反安全保证 $G(x \\leq X_{m})$ 所需的最小步数 $K^{\\star} \\in \\mathbb{N}$。你的最终答案必须是单个整数 $K^{\\star}$，表示违规必然发生的最短前缀长度。无需四舍五入。",
            "solution": "问题陈述经评估有效。它在科学上基于控制理论和赛博物理系统的形式化方法原理，问题设定良好，目标明确，没有任何科学、逻辑或事实上的缺陷。提供了必要的数据和约束，并且它们是相互一致的。因此，我们可以着手解决。\n\n该问题要求我们证明给定的广义反应(1)（GR(1)）规范对于指定的离散时间系统是不可实现的，并计算环境强制违反安全保证所需的最小步数 $K^{\\star}$。\n\n系统动态由以下线性方程给出：\n$$x_{k+1} = x_{k} + u_{k} + w_{k}$$\n初始状态为 $x_{0} = 7.3$。控制器的动作 $u_{k}$ 受限于 $|u_{k}| \\leq U$ (其中 $U=1.1$)，即 $u_{k} \\in [-1.1, 1.1]$。环境的扰动 $w_{k}$ 受限于 $0 \\leq w_{k} \\leq W$ (其中 $W=2.0$)。\n\nLTL 规范包括：\n- 环境假设：\n  1. $G(0 \\leq w \\leq W)$: 扰动始终在其界限内。这与问题描述一致。\n  2. $GF(w = 0)$: 扰动必须无限次为零（公平性）。\n- 系统保证：\n  1. $G(x \\leq X_{m})$: 状态必须始终小于或等于 $X_{m}=10$（安全保证）。\n  2. $GF(x \\leq X_{g})$: 状态必须无限次小于或等于 $X_{g}=6$（活性保证）。\n\n如果存在一种满足其所有假设的环境策略，使得任何可能的控制器策略都无法满足所有系统保证，则该规范是不可实现的。为了证明不可实现性，我们必须构造这样一个环境反策略。在这个反策略中，环境的目标是证伪一个系统保证。证伪安全保证 $G(x \\leq X_{m})$ 就足够了，因为这只需要找到一个时间步 $k$ 使得 $x_{k}  X_{m}$。\n\n让我们构造一个环境反策略。环境可以试图尽快增加状态 $x_k$ 以突破安全边界 $X_{m}=10$。为此，它应在每个时间步施加可能的最大扰动，即 $w_{k}=W=2.0$。\n\n让我们分析在这种激进的环境策略下系统的演化。状态更新为 $x_{k+1} = x_{k} + u_{k} + 2.0$。控制器的目标是保持状态值较低，因此它必须施加最大的冷却效果。控制器的动作受限于 $u_{k} \\geq -U = -1.1$。因此，对于控制器选择的任何动作 $u_k$，状态 $x_{k+1}$ 将满足：\n$$x_{k+1} = x_{k} + u_{k} + W \\geq x_{k} - U + W$$\n当控制器施加最大冷却（$u_k = -U$）时，状态的最小可能变化率为：\n$$\\Delta x_{\\min} = x_{k+1} - x_k = -U + W = -1.1 + 2.0 = 0.9$$\n由于这个最小变化率为正，即使在控制器尽最大努力的情况下，只要环境施加最大扰动 $w_k=W$，状态在每一步都会增加。\n\n让我们追踪最小可能的状态轨迹，其中控制器总是选择 $u_k = -1.1$ 来对抗环境选择 $w_k = 2.0$ 的策略。\n初始状态为 $x_{0} = 7.3$。\n- 在步骤 $k=1$ 时：$x_{1} = x_{0} + u_{0} + w_{0} = 7.3 - 1.1 + 2.0 = 8.2$。由于 $x_{1} \\leq 10$，保证成立。\n- 在步骤 $k=2$ 时：$x_{2} = x_{1} + u_{1} + w_{1} = 8.2 - 1.1 + 2.0 = 9.1$。由于 $x_{2} \\leq 10$，保证成立。\n- 在步骤 $k=3$ 时：$x_{3} = x_{2} + u_{2} + w_{2} = 9.1 - 1.1 + 2.0 = 10.0$。由于 $x_{3} \\leq 10$，保证成立。\n- 在步骤 $k=4$ 时：$x_{4} = x_{3} + u_{3} + w_{3} = 10.0 - 1.1 + 2.0 = 10.9$。\n\n在时间步 $k=4$ 时，状态变为 $x_{4} = 10.9$。这个值大于 $X_{m}=10$，因此违反了安全保证 $G(x \\leq X_{m})$。由于我们是使用控制器最小化状态的最优策略来计算该轨迹的，任何其他控制选择 $u_{k}  -1.1$ 都会在 $k=4$ 时导致更大的状态值。因此，无论控制器的动作如何，如果环境在前四步中始终施加 $w_k=2.0$，状态将在 $k=4$ 时超过 $10$。\n\n环境反策略是有限前缀 $\\{w_0, w_1, w_2, w_3\\} = \\{2.0, 2.0, 2.0, 2.0\\}$。这个有限的动作序列可以扩展为一个无限迹，以满足环境的公平性假设 $GF(w=0)$，例如，通过为所有 $k \\geq 4$ 设置 $w_k = 0$。由于这个有效的环境策略强制违反了一个系统保证，因此该规范是不可实现的。系统是不安全的，因为扰动权限（$W$）大于控制权限（$U$），这使得环境能够保证状态随时间净增加。\n\n现在，我们计算环境*强制*违规所需的最小步数 $K^{\\star}$。这意味着要找到最小的整数 $k$，使得对于环境策略 $w_i = W$（对所有 $i \\in \\{0, 1, \\dots, k-1\\}$），无论控制器的动作 $u_i \\in [-U, U]$ 如何，最终状态 $x_k$ 都保证大于 $X_m$。\n\n经过 $k$ 步后的状态由以下公式给出：\n$$x_{k} = x_{0} + \\sum_{i=0}^{k-1} (u_{i} + w_{i})$$\n为了强制违规，环境在 $i=0, \\dots, k-1$ 时施加 $w_i = W = 2.0$。此时状态为：\n$$x_{k} = x_{0} + \\sum_{i=0}^{k-1} u_{i} + \\sum_{i=0}^{k-1} W = 7.3 + k(2.0) + \\sum_{i=0}^{k-1} u_{i}$$\n如果在步骤 $k$ 时，对于所有有效的控制器动作序列 $\\{u_i\\}_{i=0}^{k-1}$，都有 $x_k  X_m$，那么就强制发生了违规。这等同于检查 $x_k$ 的最小可能值是否大于 $X_m$。当控制器在每一步都施加最大冷却，即对所有 $i$ 都有 $u_i = -U = -1.1$ 时，$x_k$ 达到其最小值。\n$$x_{k, \\min} = 7.3 + k(2.0) + \\sum_{i=0}^{k-1} (-1.1) = 7.3 + 2.0k - 1.1k = 7.3 + 0.9k$$\n我们寻求满足 $x_{k, \\min}  X_m$ 的最小整数 $k$。\n$$7.3 + 0.9k  10$$\n$$0.9k  10 - 7.3$$\n$$0.9k  2.7$$\n$$k  \\frac{2.7}{0.9}$$\n$$k  3$$\n满足此不等式的最小整数 $k$ 是 $k=4$。因此，环境强制违反安全保证所需的最小步数为 $4$。这就是 $K^{\\star}$ 的值。\n在 $k=3$ 时，控制器所能达到的最好结果是 $x_{3,\\min} = 7.3 + 0.9(3) = 7.3 + 2.7 = 10.0$，这并未违反安全保证。因此，环境用 $3$ 步不足以强制违规。在 $k=4$ 时，最小可能状态为 $x_{4,\\min} = 7.3 + 0.9(4) = 7.3 + 3.6 = 10.9$，该值严格大于 $10$。\n\n环境强制违反安全保证 $G(x \\leq X_m)$ 所需的最小步数为 $K^{\\star} = 4$。",
            "answer": "$$\\boxed{4}$$"
        }
    ]
}
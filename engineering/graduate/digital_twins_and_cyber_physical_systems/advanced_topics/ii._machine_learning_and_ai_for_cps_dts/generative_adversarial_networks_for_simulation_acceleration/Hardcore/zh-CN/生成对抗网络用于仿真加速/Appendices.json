{
    "hands_on_practices": [
        {
            "introduction": "将生成对抗网络（GAN）的抽象架构与硬件的实际限制联系起来至关重要。本练习将分析一个基于三维卷积神经网络（3D CNN）的生成器，这是处理体物理场的常见选择。通过计算其参数数量、内存占用和计算负载，您将学会如何设计能够在实时数字孪生的严格内存和时间预算内运行的模型 。",
            "id": "4224761",
            "problem": "一个流体信息物理系统 (CPS) 的数字孪生 (DT) 需要通过生成对抗网络 (GAN) 进行实时体场合成，以加速高保真模拟。生成器是一个三维卷积神经网络 (CNN)，它将一个潜张量 $z \\in \\mathbb{R}^{C_0 \\times D_0 \\times H_0 \\times W_0}$ 映射到一个输出 $y \\in \\mathbb{R}^{D \\times H \\times W}$。该网络是严格前馈的，并使用三维转置卷积将 $z$ 逐步上采样到目标分辨率。图形处理单元 (GPU) 必须在有限的内存和计算资源下满足实时推理的要求。\n\n建模基础：\n- 一个具有 $C_{\\mathrm{out}}$ 个输出通道、$C_{\\mathrm{in}}$ 个输入通道和卷积核大小为 $k_D \\times k_H \\times k_W$ 的三维卷积或转置卷积，拥有 $C_{\\mathrm{out}} \\cdot C_{\\mathrm{in}} \\cdot k_D \\cdot k_H \\cdot k_W$ 个权重，如果启用偏置，则有 $C_{\\mathrm{out}}$ 个偏置。\n- 批量归一化 (BN) 每个输出通道有两个可训练参数（缩放和移位），带有 BN 的层不使用偏置。\n- 一次卷积前向传播的浮点运算次数 (FLOPs)（一次乘加运算计为 $2$ FLOPs）为 $2 \\cdot C_{\\mathrm{out}} \\cdot D_{\\mathrm{out}} \\cdot H_{\\mathrm{out}} \\cdot W_{\\mathrm{out}} \\cdot k_D \\cdot k_H \\cdot k_W \\cdot C_{\\mathrm{in}}$。\n- 推理过程中的内存占用是参数内存与峰值激活内存之和。在保留当前和紧邻前一个特征图的顺序执行模式下，峰值激活内存占用等于所有层中，前一个和当前特征图元素数量之和的最大值，再乘以每个元素的字节数。假设使用半精度（$16$ 位浮点数），因此每个元素占用 $2$ 字节。\n\n层规格：\n- 潜输入：$C_0 = 64$，$D_0 = 4$，$H_0 = 4$，$W_0 = 4$。\n- 第 $1$ 层：转置卷积，$C_1 = 256$，卷积核 $4 \\times 4 \\times 4$，每个轴上的步幅为 $2$，选择填充使得 $D_1 = 8$，$H_1 = 8$，$W_1 = 8$。批量归一化和修正线性单元 (ReLU)。禁用偏置。\n- 第 $2$ 层：转置卷积，$C_2 = 128$，卷积核 $4 \\times 4 \\times 4$，步幅为 $2$，输出 $D_2 = 16$，$H_2 = 16$，$W_2 = 16$。批量归一化和修正线性单元 (ReLU)。禁用偏置。\n- 第 $3$ 层：转置卷积，$C_3 = 64$，卷积核 $4 \\times 4 \\times 4$，步幅为 $2$，输出 $D_3 = 32$，$H_3 = 32$，$W_3 = 32$。批量归一化和修正线性单元 (ReLU)。禁用偏置。\n- 第 $4$ 层：转置卷积，$C_4 = 16$，卷积核 $4 \\times 4 \\times 4$，步幅为 $2$，输出 $D_4 = 64$，$H_4 = 64$，$W_4 = 64$。批量归一化和修正线性单元 (ReLU)。禁用偏置。\n- 第 $5$ 层：转置卷积，$C_5 = 1$，卷积核 $4 \\times 4 \\times 4$，步幅为 $1$，选择填充使得 $D_5 = 64$，$H_5 = 64$，$W_5 = 64$。双曲正切激活函数。无批量归一化。启用偏置。\n\n资源限制：\n- 半精度推理（每个元素 $16$ 位，$2$ 字节）。\n- GPU 内存：总共 $M_{\\mathrm{tot}} = 6$ GiB，其中 $M_{\\mathrm{res}} = 2$ GiB 为非网络任务保留；网络可用内存为 $\\tilde{M} = M_{\\mathrm{tot}} - M_{\\mathrm{res}}$，以 GiB 表示。\n- GPU 计算吞吐量：在半精度下可持续 $F = 10$ teraFLOP/s (TFLOP/s)；每次推理的实时数字孪生更新预算为 $t = 33$ 毫秒。\n- 假设峰值激活内存随批量大小 $B$ 线性扩展，参数内存不随 $B$ 扩展。\n\n任务：\n1. 计算生成器的总可训练参数数量 $P$，包括卷积权重、启用时的卷积偏置以及批量归一化的缩放和移位参数。\n2. 在顺序保留两个特征图的假设下，计算每个样本的峰值激活元素数量，然后计算其在批量大小 $B = 1$ 时的内存（以字节和 GiB 为单位）。\n3. 计算参数内存（以字节和 GiB 为单位）。\n4. 推导内存限制的批量大小 $B_{\\mathrm{mem}}$，即满足 $M_{\\mathrm{params}} + B \\cdot M_{\\mathrm{act,peak}} \\leq \\tilde{M}$ 的最大整数 $B$，其中 $M_{\\mathrm{params}}$ 和 $M_{\\mathrm{act,peak}}$ 以相同单位 (GiB) 表示。\n5. 计算整个前向传播过程中每个样本的 FLOPs，然后推导计算限制的批量大小 $B_{\\mathrm{comp}}$，即满足 $B \\cdot \\frac{\\text{FLOPs}_{\\mathrm{per\\ sample}}}{F} \\leq t$ 的最大整数 $B$，其中 $F$ 以 FLOP/s 为单位， $t$ 以秒为单位。\n6. 返回可行的批量大小 $B_{\\max} = \\min\\{B_{\\mathrm{mem}}, B_{\\mathrm{comp}}\\}$，作为一个整数。最终答案不带单位。如果报告任何中间数值，内存以 GiB 表示，且仅在需要近似时，四舍五入到四位有效数字。",
            "solution": "我们从参数数量、批量归一化参数、卷积的 FLOPs 和内存模型的既定定义开始。该网络由五个转置卷积层组成，具有指定的通道进程和空间尺寸。\n\n步骤 $1$：可训练参数数量 $P$。\n对于一个转置卷积，可训练权重数量等于 $C_{\\mathrm{out}} \\cdot C_{\\mathrm{in}} \\cdot k_D \\cdot k_H \\cdot k_W$。带有批量归一化 (BN) 的层禁用偏置，而不带 BN 的最后一层启用偏置。批量归一化贡献了 $2 \\cdot C_{\\mathrm{out}}$ 个可训练参数（缩放和移位）。\n\n令 $k_D = k_H = k_W = 4$，所以对所有层 $k_D \\cdot k_H \\cdot k_W = 4 \\cdot 4 \\cdot 4 = 64$。\n\n- 第 $1$ 层：$C_{\\mathrm{in}} = C_0 = 64$，$C_{\\mathrm{out}} = C_1 = 256$。权重：$256 \\cdot 64 \\cdot 64 = 1{,}048{,}576$。BN 参数：$2 \\cdot 256 = 512$。偏置：禁用。\n- 第 $2$ 层：$C_{\\mathrm{in}} = C_1 = 256$，$C_{\\mathrm{out}} = C_2 = 128$。权重：$128 \\cdot 256 \\cdot 64 = 2{,}097{,}152$。BN 参数：$2 \\cdot 128 = 256$。偏置：禁用。\n- 第 $3$ 层：$C_{\\mathrm{in}} = C_2 = 128$，$C_{\\mathrm{out}} = C_3 = 64$。权重：$64 \\cdot 128 \\cdot 64 = 524{,}288$。BN 参数：$2 \\cdot 64 = 128$。偏置：禁用。\n- 第 $4$ 层：$C_{\\mathrm{in}} = C_3 = 64$，$C_{\\mathrm{out}} = C_4 = 16$。权重：$16 \\cdot 64 \\cdot 64 = 65{,}536$。BN 参数：$2 \\cdot 16 = 32$。偏置：禁用。\n- 第 $5$ 层：$C_{\\mathrm{in}} = C_4 = 16$，$C_{\\mathrm{out}} = C_5 = 1$。权重：$1 \\cdot 16 \\cdot 64 = 1{,}024$。BN：无。偏置：$1$。\n\n权重求和：$1{,}048{,}576 + 2{,}097{,}152 + 524{,}288 + 65{,}536 + 1{,}024 = 3{,}736{,}576$。\nBN 参数求和：$512 + 256 + 128 + 32 = 928$。\n最后一层的偏置：$1$。\n因此，总可训练参数为：\n$$\nP = 3{,}736{,}576 + 928 + 1 = 3{,}737{,}505.\n$$\n\n步骤 $2$：每个样本的峰值激活元素数量和内存。\n在顺序保留当前和紧邻前一个特征图的情况下，峰值激活元素数量计算为所有层中 $S_{\\mathrm{prev}} + S_{\\mathrm{curr}}$ 的最大值，其中 $S_{\\mathrm{prev}}$ 是前一个特征图的元素数量，而 $S_{\\mathrm{curr}}$ 是当前特征图的元素数量。\n\n计算元素数量：\n\n- 第 1 层的输入：$S_{\\mathrm{prev,1}} = C_0 \\cdot D_0 \\cdot H_0 \\cdot W_0 = 64 \\cdot 4 \\cdot 4 \\cdot 4 = 64 \\cdot 64 = 4{,}096$。第 1 层的输出：$S_{\\mathrm{curr,1}} = C_1 \\cdot D_1 \\cdot H_1 \\cdot W_1 = 256 \\cdot 8 \\cdot 8 \\cdot 8 = 256 \\cdot 512 = 131{,}072$。和：$S_1 = 4{,}096 + 131{,}072 = 135{,}168$。\n\n- 第 2 层：$S_{\\mathrm{prev,2}} = C_1 \\cdot D_1 \\cdot H_1 \\cdot W_1 = 256 \\cdot 8 \\cdot 8 \\cdot 8 = 131{,}072$。$S_{\\mathrm{curr,2}} = C_2 \\cdot D_2 \\cdot H_2 \\cdot W_2 = 128 \\cdot 16 \\cdot 16 \\cdot 16 = 128 \\cdot 4{,}096 = 524{,}288$。和：$S_2 = 131{,}072 + 524{,}288 = 655{,}360$。\n\n- 第 3 层：$S_{\\mathrm{prev,3}} = C_2 \\cdot D_2 \\cdot H_2 \\cdot W_2 = 128 \\cdot 4{,}096 = 524{,}288$。$S_{\\mathrm{curr,3}} = C_3 \\cdot D_3 \\cdot H_3 \\cdot W_3 = 64 \\cdot 32 \\cdot 32 \\cdot 32 = 64 \\cdot 32{,}768 = 2{,}097{,}152$。和：$S_3 = 524{,}288 + 2{,}097{,}152 = 2{,}621{,}440$。\n\n- 第 4 层：$S_{\\mathrm{prev,4}} = C_3 \\cdot D_3 \\cdot H_3 \\cdot W_3 = 64 \\cdot 32{,}768 = 2{,}097{,}152$。$S_{\\mathrm{curr,4}} = C_4 \\cdot D_4 \\cdot H_4 \\cdot W_4 = 16 \\cdot 64 \\cdot 64 \\cdot 64 = 16 \\cdot 262{,}144 = 4{,}194{,}304$。和：$S_4 = 2{,}097{,}152 + 4{,}194{,}304 = 6{,}291{,}456$。\n\n- 第 5 层：$S_{\\mathrm{prev,5}} = C_4 \\cdot D_4 \\cdot H_4 \\cdot W_4 = 16 \\cdot 262{,}144 = 4{,}194{,}304$。$S_{\\mathrm{curr,5}} = C_5 \\cdot D_5 \\cdot H_5 \\cdot W_5 = 1 \\cdot 64 \\cdot 64 \\cdot 64 = 262{,}144$。和：$S_5 = 4{,}194{,}304 + 262{,}144 = 4{,}456{,}448$。\n\n峰值和为 $S_{\\mathrm{peak}} = \\max\\{S_1, S_2, S_3, S_4, S_5\\} = 6{,}291{,}456$ 个元素，出现在第 4 层。\n\n使用半精度（每个元素 $2$ 字节），每个样本的峰值激活内存为\n$$\nM_{\\mathrm{act,peak}}^{\\mathrm{bytes}} = S_{\\mathrm{peak}} \\cdot 2 = 6{,}291{,}456 \\cdot 2 = 12{,}582{,}912 \\text{ 字节}.\n$$\n以吉字节 (GiB) 表示，使用 $1 \\text{ GiB} = 2^{30} \\text{ 字节}$，\n$$\nM_{\\mathrm{act,peak}}^{\\mathrm{GiB}} = \\frac{12{,}582{,}912}{2^{30}} \\ \\text{GiB} \\approx \\frac{12{,}582{,}912}{1{,}073{,}741{,}824} \\ \\text{GiB} \\approx 0.01173 \\ \\text{GiB}.\n$$\n\n步骤 $3$：参数内存（以字节和 GiB 为单位）。\n总可训练参数 $P = 3{,}737{,}505$。使用半精度，每个参数使用 $2$ 字节，所以\n$$\nM_{\\mathrm{params}}^{\\mathrm{bytes}} = P \\cdot 2 = 3{,}737{,}505 \\cdot 2 = 7{,}475{,}010 \\text{ 字节}.\n$$\n以 GiB 为单位，\n$$\nM_{\\mathrm{params}}^{\\mathrm{GiB}} = \\frac{7{,}475{,}010}{2^{30}} \\ \\text{GiB} \\approx \\frac{7{,}475{,}010}{1{,}073{,}741{,}824} \\ \\text{GiB} \\approx 0.006963 \\ \\text{GiB}.\n$$\n\n步骤 $4$：内存限制的批量大小 $B_{\\mathrm{mem}}$。\n网络可用内存为\n$$\n\\tilde{M} = M_{\\mathrm{tot}} - M_{\\mathrm{res}} = 6 - 2 = 4 \\ \\text{GiB}.\n$$\n批量大小为 $B$ 时的内存使用量等于 $M_{\\mathrm{params}}^{\\mathrm{GiB}} + B \\cdot M_{\\mathrm{act,peak}}^{\\mathrm{GiB}}$。满足约束的最大整数 $B$ 是\n$$\nB_{\\mathrm{mem}} = \\left\\lfloor \\frac{\\tilde{M} - M_{\\mathrm{params}}^{\\mathrm{GiB}}}{M_{\\mathrm{act,peak}}^{\\mathrm{GiB}}} \\right\\rfloor = \\left\\lfloor \\frac{4 - 0.006963}{0.01173} \\right\\rfloor.\n$$\n计算分子：$4 - 0.006963 = 3.993037$。相除：$\\frac{3.993037}{0.01173} \\approx 340.4$。向下取整得到\n$$\nB_{\\mathrm{mem}} = 340.\n$$\n\n为精确起见，使用字节可以等效地计算\n$$\nB_{\\mathrm{mem}} = \\left\\lfloor \\frac{4 \\cdot 2^{30} - 7{,}475{,}010}{12{,}582{,}912} \\right\\rfloor = \\left\\lfloor \\frac{4{,}294{,}967{,}296 - 7{,}475{,}010}{12{,}582{,}912} \\right\\rfloor = \\left\\lfloor \\frac{4{,}287{,}492{,}286}{12{,}582{,}912} \\right\\rfloor = 340,\n$$\n结果一致。\n\n步骤 $5$：计算限制的批量大小 $B_{\\mathrm{comp}}$。\n每个样本每层的 FLOPs 由公式 $2 \\cdot C_{\\mathrm{out}} \\cdot D_{\\mathrm{out}} \\cdot H_{\\mathrm{out}} \\cdot W_{\\mathrm{out}} \\cdot k_D \\cdot k_H \\cdot k_W \\cdot C_{\\mathrm{in}}$ 给出。\n\n按层计算：\n\n- 第 1 层：$C_{\\mathrm{in}} = 64$，$C_{\\mathrm{out}} = 256$，$D_1 H_1 W_1 = 8 \\cdot 8 \\cdot 8 = 512$，$k_D k_H k_W = 64$，\n$$\n\\text{FLOPs}_1 = 2 \\cdot 256 \\cdot 512 \\cdot 64 \\cdot 64 = 1{,}073{,}741{,}824.\n$$\n\n- 第 2 层：$C_{\\mathrm{in}} = 256$，$C_{\\mathrm{out}} = 128$，$D_2 H_2 W_2 = 16 \\cdot 16 \\cdot 16 = 4{,}096$，\n$$\n\\text{FLOPs}_2 = 2 \\cdot 128 \\cdot 4{,}096 \\cdot 64 \\cdot 256 = 17{,}179{,}869{,}184.\n$$\n\n- 第 3 层：$C_{\\mathrm{in}} = 128$，$C_{\\mathrm{out}} = 64$，$D_3 H_3 W_3 = 32 \\cdot 32 \\cdot 32 = 32{,}768$，\n$$\n\\text{FLOPs}_3 = 2 \\cdot 64 \\cdot 32{,}768 \\cdot 64 \\cdot 128 = 34{,}359{,}738{,}368.\n$$\n\n- 第 4 层：$C_{\\mathrm{in}} = 64$，$C_{\\mathrm{out}} = 16$，$D_4 H_4 W_4 = 64 \\cdot 64 \\cdot 64 = 262{,}144$，\n$$\n\\text{FLOPs}_4 = 2 \\cdot 16 \\cdot 262{,}144 \\cdot 64 \\cdot 64 = 34{,}359{,}738{,}368.\n$$\n\n- 第 5 层：$C_{\\mathrm{in}} = 16$，$C_{\\mathrm{out}} = 1$，$D_5 H_5 W_5 = 64 \\cdot 64 \\cdot 64 = 262{,}144$，\n$$\n\\text{FLOPs}_5 = 2 \\cdot 1 \\cdot 262{,}144 \\cdot 64 \\cdot 16 = 536{,}870{,}912.\n$$\n\n每个样本的前向传播总 FLOPs：\n$$\n\\text{FLOPs}_{\\mathrm{per\\ sample}} = 1{,}073{,}741{,}824 + 17{,}179{,}869{,}184 + 34{,}359{,}738{,}368 + 34{,}359{,}738{,}368 + 536{,}870{,}912 = 87{,}509{,}958{,}656.\n$$\n\n计算吞吐量和时间预算：\n可持续的半精度吞吐量为 $F = 10 \\ \\text{TFLOP/s} = 10 \\times 10^{12} \\ \\text{FLOP/s}$。时间预算为 $t = 33 \\ \\text{ms} = 33 \\times 10^{-3} \\ \\text{s}$。对于批量大小 $B$，总计算时间为\n$$\nt_B = B \\cdot \\frac{\\text{FLOPs}_{\\mathrm{per\\ sample}}}{F}.\n$$\n满足 $t_B \\leq t$ 的最大整数 $B$ 是\n$$\nB_{\\mathrm{comp}} = \\left\\lfloor \\frac{t \\cdot F}{\\text{FLOPs}_{\\mathrm{per\\ sample}}} \\right\\rfloor = \\left\\lfloor \\frac{33 \\times 10^{-3} \\cdot 10 \\times 10^{12}}{87{,}509{,}958{,}656} \\right\\rfloor = \\left\\lfloor \\frac{330 \\times 10^{9}}{87{,}509{,}958{,}656} \\right\\rfloor.\n$$\n计算比率：$\\frac{330 \\times 10^{9}}{87{,}509{,}958{,}656} \\approx 3.7697$，所以\n$$\nB_{\\mathrm{comp}} = 3.\n$$\n\n步骤 $6$：可行的批量大小 $B_{\\max}$。\n我们取内存限制和计算限制的批量大小中的最小值：\n$$\nB_{\\max} = \\min\\{B_{\\mathrm{mem}}, B_{\\mathrm{comp}}\\} = \\min\\{340, 3\\} = 3.\n$$\n\n因此，在给定的实时数字孪生推理的 GPU 资源限制下，可行的批量大小为 $B_{\\max} = 3$。",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "一个成功的GAN不仅要能生成看似合理的输出，还必须精确复制真实物理系统的统计特性。本练习介绍了一种使用经典假设检验进行严格验证的方法 。通过比较来自真实数据和生成数据的关键摘要统计量——在此案例中为周期平均功率——我们可以定量评估GAN是否学习到了底层物理的一个关键方面。",
            "id": "4224819",
            "problem": "一个赛博物理系统 (Cyber-Physical System, CPS) 中的电力电子模块的数字孪生 (Digital Twin, DT) 使用生成对抗网络 (Generative Adversarial Network, GAN) 来加速仿真，其通过提出近似于真实系统输出分布的合成轨迹来实现。令 $y$ 表示在持续时间为 $T$ 的一个控制周期内瞬时功率 $p(t)$ 的轨迹，并考虑标量摘要统计量 $s(y)$，定义为 $s(y) = \\frac{1}{T} \\int_{0}^{T} p(t) \\, dt$，即周期平均功率。假设从 GAN 诱导的分布 $p_{g}$ 和真实数据分布 $p_{\\text{data}}$ 中收集了 $s(y)$ 的独立样本。\n\n给定以下有限样本摘要：\n- GAN 样本：$n_{g} = 12$，样本均值 $\\bar{s}_{g} = 103.2 \\ \\mathrm{W}$，无偏样本方差 $S_{g}^{2} = 25 \\ \\mathrm{W}^{2}$。\n- 真实数据样本：$n_{\\text{data}} = 9$，样本均值 $\\bar{s}_{\\text{data}} = 96.7 \\ \\mathrm{W}$，无偏样本方差 $S_{\\text{data}}^{2} = 64 \\ \\mathrm{W}^{2}$。\n\n从适用于独立抽样和有限样本的基本统计学原理出发，建立一个假设检验，以比较 $p_{g}$ 和 $p_{\\text{data}}$ 关于 $s(y)$ 总体均值的差异。明确陈述关于均值的零假设和备择假设，构建一个适用于未知且可能不相等方差的标准化检验统计量，根据所提供的摘要计算其数值，并通过给出对称双侧拒绝阈值来指明如何在有限样本设置中将 I 型错误控制在显著性水平 $\\alpha = 0.05$。\n\n将最终报告的阈值表示为一个无量纲数，并将您的最终答案四舍五入到四位有效数字。",
            "solution": "目标是检验 GAN 生成的摘要统计量的总体均值 $\\mu_{g}$ 是否等于真实数据摘要统计量的总体均值 $\\mu_{\\text{data}}$。这是一个用于检验均值相等性的双样本假设检验。\n\n零假设 $H_{0}$ 假定总体均值之间没有差异。备择假设 $H_{A}$ 假定存在差异。由于这是一个双侧检验，假设如下：\n$$ H_{0}: \\mu_{g} = \\mu_{\\text{data}} \\quad \\text{或} \\quad \\mu_{g} - \\mu_{\\text{data}} = 0 $$\n$$ H_{A}: \\mu_{g} \\neq \\mu_{\\text{data}} \\quad \\text{或} \\quad \\mu_{g} - \\mu_{\\text{data}} \\neq 0 $$\n\n样本是独立抽取的。总体方差 $\\sigma_{g}^{2}$ 和 $\\sigma_{\\text{data}}^{2}$ 未知。问题明确要求使用一种适用于可能不相等方差的方法。因此，这就产生了 Behrens-Fisher 问题，其标准解法是 Welch's t-test。其基本假设是两个总体近似正态分布，这对于小样本量应用 t 分布是一个合理的假设。\n\nWelch's t-统计量由下式给出：\n$$ t = \\frac{(\\bar{s}_{g} - \\bar{s}_{\\text{data}}) - (\\mu_{g} - \\mu_{\\text{data}})_0}{\\sqrt{\\frac{S_{g}^{2}}{n_{g}} + \\frac{S_{\\text{data}}^{2}}{n_{\\text{data}}}}} $$\n在零假设下，期望差 $(\\mu_{g} - \\mu_{\\text{data}})_0$ 为 $0$。代入给定值：\n$\\bar{s}_{g} = 103.2$，$\\bar{s}_{\\text{data}} = 96.7$，$S_{g}^{2} = 25$，$n_{g} = 12$，$S_{\\text{data}}^{2} = 64$，$n_{\\text{data}} = 9$。\n\n分子是样本均值之差：\n$$ \\bar{s}_{g} - \\bar{s}_{\\text{data}} = 103.2 - 96.7 = 6.5 $$\n分母是均值差的标准误：\n$$ \\sqrt{\\frac{S_{g}^{2}}{n_{g}} + \\frac{S_{\\text{data}}^{2}}{n_{\\text{data}}}} = \\sqrt{\\frac{25}{12} + \\frac{64}{9}} = \\sqrt{\\frac{75}{36} + \\frac{256}{36}} = \\sqrt{\\frac{331}{36}} = \\frac{\\sqrt{331}}{6} \\approx 3.03223 $$\n检验统计量的值为：\n$$ t = \\frac{6.5}{\\frac{\\sqrt{331}}{6}} = \\frac{39}{\\sqrt{331}} \\approx 2.1430 $$\n\n该统计量近似服从自由度为 $\\nu$ 的学生 t 分布 (Student's t-distribution)，自由度 $\\nu$ 使用 Welch-Satterthwaite 方程计算：\n$$ \\nu \\approx \\frac{\\left(\\frac{S_{g}^{2}}{n_{g}} + \\frac{S_{\\text{data}}^{2}}{n_{\\text{data}}}\\right)^2}{\\frac{\\left(\\frac{S_{g}^{2}}{n_{g}}\\right)^2}{n_{g} - 1} + \\frac{\\left(\\frac{S_{\\text{data}}^{2}}{n_{\\text{data}}}\\right)^2}{n_{\\text{data}} - 1}} $$\n让我们计算 $\\nu$ 的分母项：\n$$ \\frac{\\left(\\frac{S_{g}^{2}}{n_{g}}\\right)^2}{n_{g} - 1} = \\frac{\\left(\\frac{25}{12}\\right)^2}{11} = \\frac{625/144}{11} = \\frac{625}{1584} $$\n$$ \\frac{\\left(\\frac{S_{\\text{data}}^{2}}{n_{\\text{data}}}\\right)^2}{n_{\\text{data}} - 1} = \\frac{\\left(\\frac{64}{9}\\right)^2}{8} = \\frac{4096/81}{8} = \\frac{512}{81} $$\n$\\nu$ 的分母是：\n$$ \\frac{625}{1584} + \\frac{512}{81} = \\frac{625 \\cdot 9 + 512 \\cdot 176}{14256} = \\frac{5625 + 90112}{14256} = \\frac{95737}{14256} $$\n$\\nu$ 的分子是：\n$$ \\left(\\frac{S_{g}^{2}}{n_{g}} + \\frac{S_{\\text{data}}^{2}}{n_{\\text{data}}}\\right)^2 = \\left(\\frac{331}{36}\\right)^2 = \\frac{109561}{1296} $$\n因此，自由度为：\n$$ \\nu \\approx \\frac{109561/1296}{95737/14256} = \\frac{109561}{1296} \\cdot \\frac{14256}{95737} = \\frac{109561}{95737} \\cdot \\frac{14256}{1296} = \\frac{109561}{95737} \\cdot 11 \\approx 12.588 $$\n\n为了在显著性水平 $\\alpha = 0.05$ 下对双侧检验控制 I 型错误，我们必须从自由度为 $\\nu = 12.588$ 的 t 分布中找到临界值 $t_{\\alpha/2, \\nu}$。拒绝域由 $|t|  t_{0.025, 12.588}$ 定义。此临界值是使得分布的两个尾部面积之和为 $0.05$ 的阈值。等价地，我们寻求值 $t_{crit}$ 使得 $P(T  t_{crit}) = \\alpha/2 = 0.025$，其中 $T \\sim t(\\nu=12.588)$。\n\n标准 t 表提供了整数自由度的值。对于 $\\nu=12$，$t_{0.025, 12} = 2.179$。对于 $\\nu=13$，$t_{0.025, 13} = 2.160$。由于我们计算出的 $\\nu \\approx 12.588$ 介于 $12$ 和 $13$ 之间，临界值将介于这两个值之间。使用能够处理 t 分布逆累积分布函数的非整数自由度的计算工具或统计计算器，我们发现：\n$$ t_{crit} = t_{0.025, 12.588} \\approx 2.1678 $$\n对称双侧拒绝阈值就是这个临界值。拒绝 $H_0$ 的条件是我们计算的检验统计量的绝对值超过此阈值。这里，$|t| = 2.1430$，小于阈值 $2.1678$，因此在 $\\alpha = 0.05$ 的水平上我们不拒绝零假设。\n然而，问题仅要求给出拒绝阈值本身。\n\n将临界值四舍五入到四位有效数字得到 $2.168$。这就是无量纲的拒绝阈值。",
            "answer": "$$\n\\boxed{2.168}\n$$"
        },
        {
            "introduction": "在此背景下，使用GAN的主要目标之一是加速传统的物理求解器。本练习演示了GAN如何充当“代理模型”，为迭代求解器提供高质量的初始猜测 。利用数值分析中的压缩映射原理，我们将推导并计算求解器迭代次数的减少量，从而量化将GAN集成到协同仿真循环中所实现的计算加速效果。",
            "id": "4224832",
            "problem": "考虑一个热流体过程的赛博物理数字孪生与一个控制器进行协同仿真，其中每个全局时间步都需要求解一个隐式非线性界面平衡。物理子求解器通过一个不动点迭代来执行，该迭代由巴拿赫空间上的一个非线性算子 $T$ 定义，其范数为 $|\\!|\\cdot|\\!|$，其中精确平衡解 $x^{\\star}$ 满足 $T(x^{\\star}) = x^{\\star}$。已知该求解器在以下基础上局部收敛：映射 $T$ 在包含 $x^{\\star}$ 的一个邻域 $\\mathcal{U}$ 上是一个压缩映射，其压缩常数 $c \\in (0,1)$ 满足对于所有 $x,y \\in \\mathcal{U}$ 都有 $|\\!|T(x) - T(y)|\\!| \\leq c \\, |\\!|x - y|\\!|$。停止准则是一个范数误差阈值 $|\\!|x_{k} - x^{\\star}|\\!| \\leq \\varepsilon$。\n\n为了在每个时间步加速收敛，使用了一个生成对抗网络（GAN），具体来说是一个在历史求解器轨迹上离线训练的生成对抗网络（GAN）代理模型，为物理求解器提供一个初始猜测值 $\\tilde{x}_{0}$。根据经验，该代理模型将初始误差的大小减小了一个乘法因子 $0  \\gamma  1$，即 $|\\!|\\tilde{x}_{0} - x^{\\star}|\\!| = \\gamma \\, |\\!|x_{0} - x^{\\star}|\\!|$，其中 $x_{0}$ 是基线初始猜测值（例如，从前一个时间步外推得到）。假设在使用 GAN 代理模型时，协同仿真循环部署了相同的物理求解器和算子 $T$，且压缩常数 $c$ 保持不变。\n\n从上述基本压缩性质和停止准则出发，推导迭代次数从基线值 $N$（不使用 GAN 代理模型）减少到 $N'$（使用 GAN 代理模型）的收敛条件，并用 $c$ 和 $\\gamma$ 表示。然后，在一个科学上真实的设定下，即压缩常数 $c = 0.52$，基线初始误差 $|\\!|x_{0} - x^{\\star}|\\!| = 1 \\times 10^{-2}$，误差容限 $\\varepsilon = 1 \\times 10^{-6}$，以及 GAN 改进因子 $\\gamma = 0.08$，计算由 GAN 代理模型初始化时求解器所需的迭代次数 $N'$（整数）。将最终数值答案表示为一个不带单位的整数。",
            "solution": "**收敛条件和迭代次数的推导**\n\n分析的核心在于由压缩映射控制的不动点迭代中的误差传播。设 $x_k$ 是第 $k$ 步的迭代值。相对于精确解 $x^{\\star}$ 的误差是 $|\\!|x_k - x^{\\star}|\\!|$。利用 $T(x^{\\star}) = x^{\\star}$ 这一事实和压缩性质，我们可以建立一个误差界：\n$$|\\!|x_k - x^{\\star}|\\!| = |\\!|T(x_{k-1}) - T(x^{\\star})|\\!| \\leq c \\, |\\!|x_{k-1} - x^{\\star}|\\!|$$\n从初始猜测值（$k=0$）开始递归应用此不等式，得到第 $k$ 次迭代的误差界：\n$$|\\!|x_k - x^{\\star}|\\!| \\leq c^k \\, |\\!|x_0 - x^{\\star}|\\!|$$\n\n**基线情况（不使用 GAN）**\n设 $E_0 = |\\!|x_0 - x^{\\star}|\\!|$ 为初始误差。求解器运行 $N$ 次迭代，直到满足停止准则 $|\\!|x_N - x^{\\star}|\\!| \\leq \\varepsilon$。为保证收敛，我们要求误差上界满足该准则：\n$$c^N E_0 \\leq \\varepsilon$$\n为了找到所需的迭代次数 $N$，我们对其求解。由于 $c \\in (0,1)$ 并且我们假设 $E_0  \\varepsilon$，我们对两边取自然对数：\n$$N \\ln(c) + \\ln(E_0) \\leq \\ln(\\varepsilon)$$\n因为 $c \\in (0,1)$，其对数 $\\ln(c)$ 是负数。除以 $\\ln(c)$ 会使不等号反向：\n$$N \\geq \\frac{\\ln(\\varepsilon) - \\ln(E_0)}{\\ln(c)} = \\frac{\\ln(\\varepsilon / E_0)}{\\ln(c)}$$\n由于 $N$ 必须是整数，因此它是满足此条件的最小整数：\n$$N = \\left\\lceil \\frac{\\ln(\\varepsilon / |\\!|x_0 - x^{\\star}|\\!|)}{\\ln(c)} \\right\\rceil$$\n\n**加速情况（使用 GAN）**\n使用 GAN 代理模型后，初始猜测值为 $\\tilde{x}_0$，初始误差为 $\\tilde{E}_0 = |\\!|\\tilde{x}_0 - x^{\\star}|\\!| = \\gamma |\\!|x_0 - x^{\\star}|\\!| = \\gamma E_0$。求解器现在需要 $N'$ 次迭代。如果满足以下条件，则停止条件得到保证：\n$$c^{N'} \\tilde{E}_0 \\leq \\varepsilon \\implies c^{N'} \\gamma E_0 \\leq \\varepsilon$$\n以与求解 $N$ 相同的方式求解 $N'$：\n$$N' \\ln(c) + \\ln(\\gamma) + \\ln(E_0) \\leq \\ln(\\varepsilon)$$\n$$N' \\geq \\frac{\\ln(\\varepsilon) - \\ln(\\gamma) - \\ln(E_0)}{\\ln(c)} = \\frac{\\ln(\\varepsilon / (\\gamma E_0))}{\\ln(c)}$$\n因此，迭代次数 $N'$ 为：\n$$N' = \\left\\lceil \\frac{\\ln(\\varepsilon / (\\gamma |\\!|x_0 - x^{\\star}|\\!|))}{\\ln(c)} \\right\\rceil$$\n\n**迭代次数减少的收敛条件**\n问题要求推导迭代次数减少的条件，即 $N'  N$。如果 GAN 提供了更好的初始猜测值，预计迭代次数会减少。$N'$ 的上取整函数中的参数可以与 $N$ 的参数关联起来：\n$$\\frac{\\ln(\\varepsilon / (\\gamma E_0))}{\\ln(c)} = \\frac{\\ln(\\varepsilon / E_0) - \\ln(\\gamma)}{\\ln(c)} = \\frac{\\ln(\\varepsilon / E_0)}{\\ln(c)} - \\frac{\\ln(\\gamma)}{\\ln(c)}$$\n项 $-\\frac{\\ln(\\gamma)}{\\ln(c)} = \\log_c(\\gamma)$ 表示（实数值）迭代次数估计值的减少量。为使迭代次数减少，这个减少量必须为正：$\\log_c(\\gamma) > 0$。此不等式当且仅当满足以下两个条件之一时成立：\n1. $c > 1$ 且 $\\gamma > 1$\n2. $0  c  1$ 且 $0  \\gamma  1$\n\n问题陈述明确给出了 $c \\in (0,1)$ 和 $\\gamma \\in (0,1)$，这对应于第二种情况。因此，问题陈述本身提供的条件，$c \\in (0,1)$ 和 $\\gamma \\in (0,1)$，正是保证理论最小迭代次数减少的条件。这也可以表示为 $(c-1)(\\gamma-1) > 0$。在这些条件下，$N'$ 的上取整函数中的参数严格小于 $N$ 的参数，从而确保 $N' \\leq N$。严格减少 $N'  N$ 会发生，除非减少量太小以至于无法使参数跨越一个整数边界，这是一个边缘情况。\n\n**$N'$ 的数值计算**\n我们现在使用给定的数值数据计算 $N'$ 的值：\n$c = 0.52$， $|\\!|x_{0} - x^{\\star}|\\!| = 1 \\times 10^{-2}$， $\\varepsilon = 1 \\times 10^{-6}$，以及 $\\gamma = 0.08$。\n\n将这些值代入推导出的 $N'$ 公式中：\n$$N' = \\left\\lceil \\frac{\\ln\\left(\\frac{1 \\times 10^{-6}}{0.08 \\times (1 \\times 10^{-2})}\\right)}{\\ln(0.52)} \\right\\rceil$$\n首先，我们计算对数内的项：\n$$\\frac{1 \\times 10^{-6}}{0.08 \\times 1 \\times 10^{-2}} = \\frac{10^{-6}}{8 \\times 10^{-2} \\times 10^{-2}} = \\frac{10^{-6}}{8 \\times 10^{-4}} = \\frac{1}{8} \\times 10^{-2} = 0.125 \\times 10^{-2} = 1.25 \\times 10^{-3}$$\n现在，我们将此结果代回 $N'$ 的表达式中：\n$$N' = \\left\\lceil \\frac{\\ln(1.25 \\times 10^{-3})}{\\ln(0.52)} \\right\\rceil$$\n使用自然对数的值：\n$\\ln(1.25 \\times 10^{-3}) \\approx -6.68461$\n$\\ln(0.52) \\approx -0.65393$\n所以，比值为：\n$$\\frac{-6.68461}{-0.65393} \\approx 10.22228$$\n最后，我们应用上取整函数来找到最小的整数迭代次数：\n$$N' = \\lceil 10.22228 \\rceil = 11$$\n因此，由 GAN 代理模型初始化的求解器需要 11 次迭代才能达到指定的误差容限。",
            "answer": "$$\\boxed{11}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "To build a solid intuition for Ollivier-Ricci curvature, we begin with a foundational calculation on one of the simplest graph structures: the path graph. This exercise  guides you through the core mechanics of applying the curvature definition for the non-lazy case ($\\alpha=0$), from defining the neighbor probability measures to computing the $1$-Wasserstein distance. By working through this example, you will see firsthand how a discretely 'flat' geometry manifests as zero curvature.",
            "id": "4294224",
            "problem": "Let $P_{n}$ be the unweighted, undirected path graph on $n \\geq 2$ vertices, labeled in order as $v_{1}, v_{2}, \\dots, v_{n}$, and let $d$ be the standard graph distance on $P_{n}$. Consider the Ollivier-Ricci curvature with idleness parameter $\\alpha=0$ along an edge $\\{x,y\\}$, defined using the uniform probability measure on the neighbors of each vertex and the $1$-Wasserstein distance with respect to $d$. For an adjacent pair $(x,y)$ in $P_{n}$, compute the exact value of $\\kappa_{0}(x,y)$, and explain whether and how being an endpoint edge (incident to a leaf) versus an interior edge (both endpoints of degree $2$) influences the value. Your final answer must be a single exact number. No rounding is required.",
            "solution": "The problem is deemed valid as it is scientifically grounded, well-posed, and objective. It presents a formal question within the established mathematical framework of discrete Ricci curvature on graphs. We proceed with the solution.\n\nThe Ollivier-Ricci curvature for an edge $\\{x,y\\}$ in a graph, with an idleness parameter $\\alpha$, is defined as:\n$$\n\\kappa_{\\alpha}(x,y) = 1 - \\frac{W_1(\\mu_x^\\alpha, \\mu_y^\\alpha)}{d(x,y)}\n$$\nwhere $d(x,y)$ is the distance between vertices $x$ and $y$, $W_1$ is the $1$-Wasserstein distance between two probability measures, and $\\mu_v^\\alpha$ is the probability measure at a vertex $v$.\nThe problem specifies the idleness parameter $\\alpha=0$. For adjacent vertices $x$ and $y$, we have $d(x,y)=1$. The curvature formula simplifies to:\n$$\n\\kappa_{0}(x,y) = 1 - W_1(\\mu_x, \\mu_y)\n$$\nThe probability measure $\\mu_v$ at a vertex $v$ with degree $\\deg(v)$ is given as the uniform measure over its neighbors $N(v)$. This can be written as:\n$$\n\\mu_v = \\frac{1}{\\deg(v)} \\sum_{z \\in N(v)} \\delta_z\n$$\nwhere $\\delta_z$ is the Dirac measure concentrated at vertex $z$. The $1$-Wasserstein distance between two measures $\\mu_x$ and $\\mu_y$ is the solution to an optimal transport problem:\n$$\nW_1(\\mu_x, \\mu_y) = \\inf_{\\pi \\in \\Pi(\\mu_x, \\mu_y)} \\sum_{z_1, z_2} d(z_1, z_2) \\pi(z_1, z_2)\n$$\nHere, $\\Pi(\\mu_x, \\mu_y)$ is the set of all transportation plans (couplings) from the distribution $\\mu_x$ to $\\mu_y$. A plan $\\pi(z_1, z_2)$ represents the amount of mass transported from $z_1$ (a neighbor of $x$) to $z_2$ (a neighbor of $y$), subject to the constraints that the marginals of $\\pi$ are $\\mu_x$ and $\\mu_y$.\n\nWe analyze the curvature for two distinct types of edges in the path graph $P_n$ on vertices $\\{v_1, v_2, \\dots, v_n\\}$.\n\nCase 1: Interior edge\nLet the edge be $\\{x,y\\} = \\{v_i, v_{i+1}\\}$ where $1  i  n-1$. This requires $n \\geq 4$. For such an edge, both vertices have degree $2$.\nThe neighbors are $N(x) = N(v_i) = \\{v_{i-1}, v_{i+1}\\}$ and $N(y) = N(v_{i+1}) = \\{v_i, v_{i+2}\\}$.\nThe degrees are $\\deg(x)=2$ and $\\deg(y)=2$.\nThe probability measures are:\n$$\n\\mu_x = \\frac{1}{2}\\delta_{v_{i-1}} + \\frac{1}{2}\\delta_{v_{i+1}}\n$$\n$$\n\\mu_y = \\frac{1}{2}\\delta_{v_{i}} + \\frac{1}{2}\\delta_{v_{i+2}}\n$$\nWe need to find the minimal cost to transport a mass of $\\frac{1}{2}$ from each neighbor of $x$ to the neighbors of $y$, which each require a mass of $\\frac{1}{2}$. The sources of mass are $\\{v_{i-1}, v_{i+1}\\}$ and the sinks are $\\{v_i, v_{i+2}\\}$. The cost is the graph distance $d(u, w) = |j-k|$ for vertices $v_j, v_k$.\nLet's compute the pairwise distances:\n$d(v_{i-1}, v_i) = 1$\n$d(v_{i-1}, v_{i+2}) = |(i+2)-(i-1)| = 3$\n$d(v_{i+1}, v_i) = 1$\n$d(v_{i+1}, v_{i+2}) = 1$\n\nA transportation plan $\\pi$ must satisfy the marginal conditions. Let $\\pi(v_{i-1}, v_i) = a$. Since the total mass from $v_{i-1}$ is $\\frac{1}{2}$, we have $\\pi(v_{i-1}, v_{i+2}) = \\frac{1}{2} - a$. Since the total mass to $v_i$ is $\\frac{1}{2}$, we must have $\\pi(v_{i+1}, v_i) = \\frac{1}{2} - a$. Finally, for the mass from $v_{i+1}$ to add up to $\\frac{1}{2}$, $\\pi(v_{i+1}, v_{i+2}) = \\frac{1}{2} - (\\frac{1}{2} - a) = a$. The constraints $a \\geq 0$ and $\\frac{1}{2}-a \\geq 0$ imply $0 \\leq a \\leq \\frac{1}{2}$.\n\nThe total transportation cost $C(a)$ is:\n$$\nC(a) = a \\cdot d(v_{i-1}, v_i) + (\\frac{1}{2}-a) \\cdot d(v_{i-1}, v_{i+2}) + (\\frac{1}{2}-a) \\cdot d(v_{i+1}, v_i) + a \\cdot d(v_{i+1}, v_{i+2})\n$$\n$$\nC(a) = a \\cdot 1 + (\\frac{1}{2}-a) \\cdot 3 + (\\frac{1}{2}-a) \\cdot 1 + a \\cdot 1\n$$\n$$\nC(a) = a + \\frac{3}{2} - 3a + \\frac{1}{2} - a + a = 2 - 2a\n$$\nTo find the Wasserstein distance $W_1(\\mu_x, \\mu_y)$, we must minimize $C(a)$. The cost $C(a)=2-2a$ is minimized when $a$ is maximized. The maximum value is $a=\\frac{1}{2}$.\nThe optimal cost is $W_1(\\mu_x, \\mu_y) = C(\\frac{1}{2}) = 2 - 2(\\frac{1}{2}) = 1$.\nThe curvature is therefore:\n$$\n\\kappa_0(v_i, v_{i+1}) = 1 - W_1(\\mu_x, \\mu_y) = 1 - 1 = 0\n$$\n\nCase 2: Endpoint edge\nLet the edge be $\\{x,y\\} = \\{v_1, v_2\\}$. The analysis depends on the size of the graph, $n$.\n\nSubcase 2a: $n \\geq 3$.\nHere, $x=v_1$ is a leaf, and $y=v_2$ is an interior vertex of the path formed by $\\{v_1, v_2, v_3\\}$.\nThe neighbors are $N(x)=N(v_1) = \\{v_2\\}$ and $N(y)=N(v_2) = \\{v_1, v_3\\}$.\nThe degrees are $\\deg(x)=1$ and $\\deg(y)=2$.\nThe probability measures are:\n$$\n\\mu_x = \\frac{1}{1}\\delta_{v_2} = \\delta_{v_2}\n$$\n$$\n\\mu_y = \\frac{1}{2}\\delta_{v_1} + \\frac{1}{2}\\delta_{v_3}\n$$\nThe transport problem is to move a mass of $1$ from the single source $v_2$ to the two sinks $v_1$ and $v_3$, which each demand a mass of $\\frac{1}{2}$. The transportation plan is uniquely determined: we must send mass $\\frac{1}{2}$ from $v_2$ to $v_1$ and mass $\\frac{1}{2}$ from $v_2$ to $v_3$.\nThe cost is:\n$$\nW_1(\\mu_x, \\mu_y) = \\frac{1}{2} d(v_2, v_1) + \\frac{1}{2} d(v_2, v_3)\n$$\nThe distances are $d(v_2, v_1)=1$ and $d(v_2, v_3)=1$.\n$$\nW_1(\\mu_x, \\mu_y) = \\frac{1}{2}(1) + \\frac{1}{2}(1) = 1\n$$\nThe curvature is:\n$$\n\\kappa_0(v_1, v_2) = 1 - W_1(\\mu_x, \\mu_y) = 1 - 1 = 0\n$$\nBy symmetry, the same result holds for the other endpoint edge $\\{v_{n-1}, v_n\\}$.\n\nSubcase 2b: $n = 2$.\nThe graph is $P_2$, which consists of a single edge $\\{v_1, v_2\\}$. Both vertices are leaves.\nHere, $x=v_1$ and $y=v_2$.\nThe neighbors are $N(x)=N(v_1)=\\{v_2\\}$ and $N(y)=N(v_2)=\\{v_1\\}$.\nThe degrees are $\\deg(x)=1$ and $\\deg(y)=1$.\nThe probability measures are:\n$$\n\\mu_x = \\delta_{v_2}\n$$\n$$\n\\mu_y = \\delta_{v_1}\n$$\nThe transport problem is to move a mass of $1$ from the source $v_2$ to the sink $v_1$. The plan is trivial.\nThe cost is $W_1(\\mu_x, \\mu_y) = 1 \\cdot d(v_2, v_1) = 1 \\cdot 1 = 1$.\nThe curvature is:\n$$\n\\kappa_0(v_1, v_2) = 1 - W_1(\\mu_x, \\mu_y) = 1 - 1 = 0\n$$\n\nIn all cases—interior edges, endpoint edges for $n \\geq 3$, and the edge in $P_2$—the calculated Wasserstein distance is $W_1=1$. Consequently, the Ollivier-Ricci curvature is consistently $0$. The position of the edge (endpoint vs. interior) does not influence its curvature value. The path graph $P_n$ is discretely \"flat\" everywhere with respect to this definition of curvature.\nThe single exact value for the curvature of any edge in $P_n$ is $0$.",
            "answer": "$$\\boxed{0}$$"
        },
        {
            "introduction": "Having established a baseline, we now explore how curvature acts as a sensitive detector of global network topology. This problem  challenges you to compare the curvature of an edge in a simple path versus a cycle, revealing how the presence of an alternative route fundamentally alters the optimal transport cost. This exercise illuminates a key principle: positive curvature often emerges where the graph structure provides 'shortcuts' between the neighborhoods of two connected vertices.",
            "id": "4294137",
            "problem": "Consider a simple, connected, unweighted graph with the shortest-path metric. For any vertex $x$, define the $\\alpha$-lazy neighbor measure $\\mu_x^\\alpha$ by placing probability mass $\\alpha$ at $x$ and distributing the remaining mass $(1-\\alpha)$ uniformly over the neighbors of $x$. Let the Earth Mover’s Distance (EMD), also known as the $1$-Wasserstein distance, between two probability measures $\\mu$ and $\\nu$ on the vertex set be $W_1(\\mu,\\nu)$ with respect to the graph metric. The Ollivier-Ricci curvature along an edge $(x,y)$ is defined by $\\kappa_\\alpha(x,y) = 1 - W_1(\\mu_x^\\alpha,\\mu_y^\\alpha)$, since $d(x,y)=1$.\n\nLet $P_n$ denote the path graph on $n$ vertices, and $C_n$ denote the cycle graph on $n$ vertices, both with unit-length edges. Fix an edge $(x,y)$ and let $a$ be the neighbor of $x$ other than $y$ (if it exists), and let $b$ be the neighbor of $y$ other than $x$ (if it exists). You are to compare the curvature $\\kappa_\\alpha(x,y)$ in the following settings and parameters:\n- Interior edge of $P_n$ with $n \\ge 5$ (so both $x$ and $y$ have degree $2$ and the unique off-edge neighbors $a$ and $b$ exist).\n- Boundary edge of $P_n$ incident to a leaf.\n- Edge of $C_n$ for various $n$.\n\nSelect all statements that are correct. Your choices should reflect how the distance between the off-edge neighbors $a$ and $b$ and the availability of alternative shortest paths influence the optimal transport cost and, hence, the curvature as a function of $\\alpha \\in [0,1]$.\n\nA. For an interior edge of $P_n$ with $n \\ge 5$ and for any edge of $C_n$ with $n \\ge 6$, the curvature satisfies $\\kappa_\\alpha(x,y) = -1 + 3\\alpha$ for $\\alpha \\in [0,\\tfrac{1}{3}]$ and $\\kappa_\\alpha(x,y) = 0$ for $\\alpha \\in [\\tfrac{1}{3},1]$.\n\nB. For any edge of $C_5$, the curvature satisfies $\\kappa_\\alpha(x,y) = \\tfrac{5\\alpha - 1}{2}$ for $\\alpha \\in [0,\\tfrac{1}{3}]$ and $\\kappa_\\alpha(x,y) = \\tfrac{1-\\alpha}{2}$ for $\\alpha \\in [\\tfrac{1}{3},1]$.\n\nC. The difference between $\\kappa_\\alpha(x,y)$ on an interior edge of $P_n$ and on an edge of $C_n$ arises because, in $C_n$, the transport between the off-edge neighbor masses at $a$ and $b$ can use an alternative shortest route whose length is strictly less than $3$ for certain $n$, reducing $W_1(\\mu_x^\\alpha,\\mu_y^\\alpha)$ and increasing $\\kappa_\\alpha(x,y)$.\n\nD. For a boundary edge of $P_n$ incident to a leaf, the curvature equals that of an interior edge because the endpoint degrees are the same.\n\nE. For any edge of $C_4$, the curvature satisfies $\\kappa_\\alpha(x,y) = 2\\alpha$ for $\\alpha \\in [0,\\tfrac{1}{3}]$ and $\\kappa_\\alpha(x,y) = 1-\\alpha$ for $\\alpha \\in [\\tfrac{1}{3},1]$.\n\nChoose all that apply.",
            "solution": "The problem statement is a valid exercise in discrete differential geometry, specifically the computation of Ollivier-Ricci curvature on simple graphs. All definitions are standard and the problem is well-posed. We proceed with the solution.\n\nThe Ollivier-Ricci curvature for an edge $(x,y)$ in a simple, unweighted graph is given by $\\kappa_\\alpha(x,y) = 1 - W_1(\\mu_x^\\alpha, \\mu_y^\\alpha)$, where $W_1$ is the $1$-Wasserstein distance (or Earth Mover's Distance) and $\\mu_u^\\alpha$ is a probability measure centered at a vertex $u$. The measure $\\mu_u^\\alpha$ is defined by placing a mass of $\\alpha$ on the vertex $u$ and distributing the remaining mass $1-\\alpha$ uniformly among its neighbors. Let $\\deg(u)$ be the degree of vertex $u$. The measure is:\n$$ \\mu_u^\\alpha(v) = \\begin{cases} \\alpha  \\text{if } v=u \\\\ (1-\\alpha)/\\deg(u)  \\text{if } v \\text{ is a neighbor of } u \\\\ 0  \\text{otherwise} \\end{cases} $$\nThe Wasserstein distance $W_1(\\mu_x^\\alpha, \\mu_y^\\alpha)$ is the minimum cost to transport the mass distribution $\\mu_x^\\alpha$ to $\\mu_y^\\alpha$, where the cost of transporting a unit mass from vertex $u$ to vertex $v$ is their shortest-path distance $d(u,v)$.\n\n$W_1(\\mu_x^\\alpha, \\mu_y^\\alpha) = \\inf_{\\pi} \\sum_{u, v} \\pi(u,v) d(u,v)$, where the infimum is over all transport plans $\\pi$ with marginals $\\mu_x^\\alpha$ and $\\mu_y^\\alpha$.\n\nA practical way to compute $W_1$ is to consider the net mass difference $\\delta(v) = \\mu_x^\\alpha(v) - \\mu_y^\\alpha(v)$ at each vertex $v$. The total mass that needs to be moved is $\\frac{1}{2}\\sum_v |\\delta(v)|$. We need to find the minimum cost transport from vertices with mass surplus ($\\delta(v)0$) to vertices with mass deficit ($\\delta(v)0$).\n\n**Analysis of interior edge of $P_n$ ($n \\ge 5$) and edge of $C_n$ ($n \\ge 4$)**\n\nFor an interior edge $(x,y)$ of $P_n$ ($n \\ge 5$) or any edge of $C_n$ ($n \\ge 3$), both $x$ and $y$ have degree $2$. Let the neighbors of $x$ be $\\{a, y\\}$ and the neighbors of $y$ be $\\{x, b\\}$. Note that $a \\neq y$ and $b \\neq x$.\nThe measures are:\n$\\mu_x^\\alpha$: mass $\\alpha$ at $x$; mass $\\frac{1-\\alpha}{2}$ at $a$; mass $\\frac{1-\\alpha}{2}$ at $y$.\n$\\mu_y^\\alpha$: mass $\\alpha$ at $y$; mass $\\frac{1-\\alpha}{2}$ at $x$; mass $\\frac{1-\\alpha}{2}$ at $b$.\n\nThe net mass difference $\\delta(v) = \\mu_x^\\alpha(v) - \\mu_y^\\alpha(v)$ is non-zero only at $x, y, a, b$:\n$\\delta(x) = \\alpha - \\frac{1-\\alpha}{2} = \\frac{3\\alpha-1}{2}$\n$\\delta(y) = \\frac{1-\\alpha}{2} - \\alpha = \\frac{1-3\\alpha}{2} = -\\delta(x)$\n$\\delta(a) = \\frac{1-\\alpha}{2}$\n$\\delta(b) = -\\frac{1-\\alpha}{2}$\n\nThe signs of $\\delta(x)$ and $\\delta(y)$ depend on whether $\\alpha$ is greater or less than $\\frac{1}{3}$.\n\n**Case 1: $\\alpha \\in [0, \\frac{1}{3}]$**\n$\\delta(x) \\le 0$ (sink), $\\delta(y) \\ge 0$ (source), $\\delta(a)  0$ (source), $\\delta(b)  0$ (sink).\nThe sources are $y$ (supplying mass $\\frac{1-3\\alpha}{2}$) and $a$ (supplying mass $\\frac{1-\\alpha}{2}$).\nThe sinks are $x$ (requiring mass $\\frac{1-3\\alpha}{2}$) and $b$ (requiring mass $\\frac{1-\\alpha}{2}$).\nThe optimal transport plan moves mass from $y$ to $x$ and from $a$ to $b$.\n$W_1(\\mu_x^\\alpha, \\mu_y^\\alpha) = \\frac{1-3\\alpha}{2} d(y,x) + \\frac{1-\\alpha}{2} d(a,b)$.\nSince $(x,y)$ is an edge, $d(x,y)=1$.\n$W_1(\\mu_x^\\alpha, \\mu_y^\\alpha) = \\frac{1-3\\alpha}{2} + \\frac{1-\\alpha}{2} d(a,b)$.\n$\\kappa_\\alpha(x,y) = 1 - W_1 = 1 - \\left(\\frac{1-3\\alpha}{2} + \\frac{1-\\alpha}{2} d(a,b)\\right) = \\frac{1+3\\alpha}{2} - \\frac{1-\\alpha}{2}d(a,b)$.\n\n**Case 2: $\\alpha \\in [\\frac{1}{3}, 1]$**\n$\\delta(x) \\ge 0$ (source), $\\delta(y) \\le 0$ (sink), $\\delta(a) \\ge 0$ (source), $\\delta(b) \\le 0$ (sink).\nThe sources are $x$ (supplying mass $\\frac{3\\alpha-1}{2}$) and $a$ (supplying mass $\\frac{1-\\alpha}{2}$).\nThe sinks are $y$ (requiring mass $\\frac{3\\alpha-1}{2}$) and $b$ (requiring mass $\\frac{1-\\alpha}{2}$).\nThe optimal transport plan moves mass from $x$ to $y$ and from $a$ to $b$.\n$W_1(\\mu_x^\\alpha, \\mu_y^\\alpha) = \\frac{3\\alpha-1}{2} d(x,y) + \\frac{1-\\alpha}{2} d(a,b) = \\frac{3\\alpha-1}{2} + \\frac{1-\\alpha}{2} d(a,b)$.\n$\\kappa_\\alpha(x,y) = 1 - W_1 = 1 - \\left(\\frac{3\\alpha-1}{2} + \\frac{1-\\alpha}{2} d(a,b)\\right) = \\frac{3-3\\alpha}{2} - \\frac{1-\\alpha}{2}d(a,b)$.\n\nNow we can evaluate the options by calculating $d(a,b)$ for each graph.\n\n**A. For an interior edge of $P_n$ with $n \\ge 5$ and for any edge of $C_n$ with $n \\ge 6$**\n- In $P_n$ ($n \\ge 5$), the vertices are arranged ..., $a, x, y, b$, ... so the shortest path is $a \\to x \\to y \\to b$, giving $d(a,b)=3$.\n- In $C_n$, the path $a \\to x \\to y \\to b$ has length $3$. The alternative path has length $n-3$. Thus, $d(a,b) = \\min(3, n-3)$. For $n \\ge 6$, $n-3 \\ge 3$, so $d(a,b)=3$.\nFor both cases, we use $d(a,b)=3$.\n- For $\\alpha \\in [0, \\frac{1}{3}]$:\n$\\kappa_\\alpha(x,y) = \\frac{1+3\\alpha}{2} - \\frac{1-\\alpha}{2}(3) = \\frac{1+3\\alpha-3+3\\alpha}{2} = \\frac{6\\alpha-2}{2} = 3\\alpha-1 = -1+3\\alpha$.\n- For $\\alpha \\in [\\frac{1}{3}, 1]$:\n$\\kappa_\\alpha(x,y) = \\frac{3-3\\alpha}{2} - \\frac{1-\\alpha}{2}(3) = \\frac{3-3\\alpha-3+3\\alpha}{2} = \\frac{0}{2} = 0$.\nThe statement matches our calculation.\nVerdict: **Correct**.\n\n**B. For any edge of $C_5$**\nIn $C_5$, $d(a,b) = \\min(3, 5-3) = \\min(3,2) = 2$.\nWe use the general formulas with $d(a,b)=2$.\n- For $\\alpha \\in [0, \\frac{1}{3}]$:\n$\\kappa_\\alpha(x,y) = \\frac{1+3\\alpha}{2} - \\frac{1-\\alpha}{2}(2) = \\frac{1+3\\alpha}{2} - (1-\\alpha) = \\frac{1+3\\alpha-2+2\\alpha}{2} = \\frac{5\\alpha-1}{2}$.\n- For $\\alpha \\in [\\frac{1}{3}, 1]$:\n$\\kappa_\\alpha(x,y) = \\frac{3-3\\alpha}{2} - \\frac{1-\\alpha}{2}(2) = \\frac{3-3\\alpha}{2} - (1-\\alpha) = \\frac{3-3\\alpha-2+2\\alpha}{2} = \\frac{1-\\alpha}{2}$.\nThe statement matches our calculation.\nVerdict: **Correct**.\n\n**C. Difference between $P_n$ and $C_n$ curvature.**\nThis statement provides a qualitative explanation. For $C_n$ with $n  6$, $d(a,b)=n-3  3$. For an interior edge of $P_n$, $d(a,b)=3$. The Wasserstein distance $W_1$ is given by $W_1 = \\frac{|3\\alpha-1|}{2} + \\frac{1-\\alpha}{2}d(a,b)$. For $\\alpha \\in [0,1)$, the term $\\frac{1-\\alpha}{2}$ is positive. Therefore, a smaller value of $d(a,b)$ leads to a smaller value of $W_1(\\mu_x^\\alpha,\\mu_y^\\alpha)$. Since $\\kappa_\\alpha(x,y) = 1 - W_1(\\mu_x^\\alpha,\\mu_y^\\alpha)$, a smaller $W_1$ results in a larger curvature $\\kappa_\\alpha$. The reasoning provided in the statement is entirely correct.\nVerdict: **Correct**.\n\n**D. For a boundary edge of $P_n$ incident to a leaf.**\nLet the vertices of $P_n$ be $v_1, v_2, \\ldots, v_n$ ($n \\ge 3$). Let the edge be $(x,y)=(v_1,v_2)$. Vertex $x=v_1$ is a leaf, $\\deg(x)=1$. Vertex $y=v_2$ has $\\deg(y)=2$, its neighbors are $x$ and $b=v_3$. The neighbor $a$ of $x$ other than $y$ does not exist. The degrees of $x$ and $y$ are not the same, so the justification provided in the statement is false. Let's calculate the curvature.\n$\\mu_x^\\alpha$: mass $\\alpha$ at $x$; mass $1-\\alpha$ at $y$.\n$\\mu_y^\\alpha$: mass $\\alpha$ at $y$; mass $\\frac{1-\\alpha}{2}$ at $x$; mass $\\frac{1-\\alpha}{2}$ at $b$.\nNet mass difference $\\delta(v) = \\mu_x^\\alpha(v) - \\mu_y^\\alpha(v)$:\n$\\delta(x) = \\alpha - \\frac{1-\\alpha}{2} = \\frac{3\\alpha-1}{2}$\n$\\delta(y) = (1-\\alpha) - \\alpha = 1-2\\alpha$\n$\\delta(b) = 0 - \\frac{1-\\alpha}{2} = -\\frac{1-\\alpha}{2}$\nThe signs of $\\delta(x)$ and $\\delta(y)$ change at $\\alpha=1/3$ and $\\alpha=1/2$, respectively.\n- For $\\alpha \\in [0, 1/3]$: $\\delta(x) \\le 0$ (sink), $\\delta(y)  0$ (source), $\\delta(b)  0$ (sink). Mass $1-2\\alpha$ from $y$ is split: $\\frac{1-3\\alpha}{2}$ to $x$ and $\\frac{1-\\alpha}{2}$ to $b$. $d(y,x)=1, d(y,b)=1$.\n$W_1 = \\frac{1-3\\alpha}{2}(1) + \\frac{1-\\alpha}{2}(1) = \\frac{2-4\\alpha}{2} = 1-2\\alpha$.\n$\\kappa_\\alpha = 1 - (1-2\\alpha) = 2\\alpha$.\n- For $\\alpha \\in [1/3, 1/2]$: $\\delta(x) \\ge 0$ (source), $\\delta(y) \\ge 0$ (source), $\\delta(b)  0$ (sink). Mass from $x$ ($\\frac{3\\alpha-1}{2}$) and $y$ ($1-2\\alpha$) goes to $b$.\n$W_1 = \\frac{3\\alpha-1}{2}d(x,b) + (1-2\\alpha)d(y,b) = \\frac{3\\alpha-1}{2}(2) + (1-2\\alpha)(1) = 3\\alpha-1+1-2\\alpha = \\alpha$.\n$\\kappa_\\alpha = 1 - \\alpha$.\n- For $\\alpha \\in [1/2, 1]$: $\\delta(x)  0$ (source), $\\delta(y) \\le 0$ (sink), $\\delta(b)  0$ (sink). Mass from $x$ goes to $y$ and $b$.\n$W_1 = (2\\alpha-1)d(x,y) + \\frac{1-\\alpha}{2}d(x,b) = (2\\alpha-1)(1) + \\frac{1-\\alpha}{2}(2) = 2\\alpha-1+1-\\alpha=\\alpha$.\n$\\kappa_\\alpha = 1 - \\alpha$.\nCombining intervals, the curvature is $\\kappa_\\alpha = 2\\alpha$ for $\\alpha \\in [0,1/3]$ and $\\kappa_\\alpha = 1-\\alpha$ for $\\alpha \\in [1/3, 1]$. This is different from the curvature of an interior edge (see A). For example, at $\\alpha=0.5$, $\\kappa_{0.5}=0.5$ for the boundary edge, but $\\kappa_{0.5}=0$ for the interior edge. The statement is false.\nVerdict: **Incorrect**.\n\n**E. For any edge of $C_4$**\nIn $C_4$, $d(a,b) = \\min(3, 4-3) = \\min(3,1) = 1$.\nWe use the general formulas with $d(a,b)=1$.\n- For $\\alpha \\in [0, \\frac{1}{3}]$:\n$\\kappa_\\alpha(x,y) = \\frac{1+3\\alpha}{2} - \\frac{1-\\alpha}{2}(1) = \\frac{1+3\\alpha-1+\\alpha}{2} = \\frac{4\\alpha}{2} = 2\\alpha$.\n- For $\\alpha \\in [\\frac{1}{3}, 1]$:\n$\\kappa_\\alpha(x,y) = \\frac{3-3\\alpha}{2} - \\frac{1-\\alpha}{2}(1) = \\frac{3-3\\alpha-1+\\alpha}{2} = \\frac{2-2\\alpha}{2} = 1-\\alpha$.\nThe statement matches our calculation.\nVerdict: **Correct**.\n\nIn summary, statements A, B, C, and E are correct.",
            "answer": "$$\\boxed{ABCE}$$"
        },
        {
            "introduction": "While manual calculations are essential for building intuition, practical network analysis requires a general, computational approach. This final practice  bridges the gap from theory to implementation by guiding you to frame the curvature calculation as a Linear Programming (LP) problem. By designing and analyzing this algorithm, you will understand the standard methodology used in software libraries to compute Ollivier-Ricci curvature on arbitrary graphs, preparing you for real-world applications.",
            "id": "4294133",
            "problem": "A connected, simple, undirected graph $G = (V,E)$ with the shortest-path metric $d_G$ defines a metric measure space where each vertex $x \\in V$ carries a probability measure $m_x^\\alpha$ parameterized by a laziness parameter $\\alpha \\in [0,1]$. The lazy random walk measure is given by $m_x^\\alpha(x) = \\alpha$, $m_x^\\alpha(u) = \\frac{1-\\alpha}{\\deg(x)}$ for each neighbor $u \\in N(x)$, and $m_x^\\alpha(u) = 0$ for all other vertices. For an edge $(x,y) \\in E$, the Ollivier–Ricci curvature $\\kappa_\\alpha(x,y)$ is defined via the Wasserstein $1$-distance $W_1$ under the metric $d_G$ by $\\kappa_\\alpha(x,y) = 1 - \\frac{W_1(m_x^\\alpha,m_y^\\alpha)}{d_G(x,y)}$. Since $d_G(x,y) = 1$ for edges, this simplifies to $\\kappa_\\alpha(x,y) = 1 - W_1(m_x^\\alpha,m_y^\\alpha)$. The Wasserstein $1$-distance $W_1(m_x^\\alpha,m_y^\\alpha)$ is the minimum total transport cost required to move the distribution $m_x^\\alpha$ to $m_y^\\alpha$ with respect to the cost $d_G(u,v)$, and can be formulated as a Linear Programming (LP) problem using an optimal coupling $\\pi$ between the supports of the measures.\n\nStarting from the fundamental definitions of the shortest-path metric on graphs, lazy random walk measures on vertices, and the Kantorovich formulation of optimal transport, design an algorithm that computes $\\kappa_\\alpha(x,y)$ for all edges $(x,y) \\in E$ by solving an LP restricted to the sparse supports of $m_x^\\alpha$ and $m_y^\\alpha$, i.e., $S_x = \\{x\\} \\cup N(x)$ and $S_y = \\{y\\} \\cup N(y)$. The algorithm must:\n- Construct the LP whose variables represent transport flows only between the nonzero supports of $m_x^\\alpha$ and $m_y^\\alpha$, i.e., $S_x = \\{x\\} \\cup N(x)$ and $S_y = \\{y\\} \\cup N(y)$.\n- Use the graph’s shortest-path distance $d_G(u,v)$ as the transport cost between $u \\in S_x$ and $v \\in S_y$.\n- Enforce equality constraints so that outgoing flows from each $u \\in S_x$ sum to $m_x^\\alpha(u)$, and incoming flows to each $v \\in S_y$ sum to $m_y^\\alpha(v)$.\n- Compute $W_1(m_x^\\alpha,m_y^\\alpha)$ as the LP optimum and return $\\kappa_\\alpha(x,y) = 1 - W_1(m_x^\\alpha,m_y^\\alpha)$.\n\nAnalyze the algorithm’s computational complexity in terms of $|V|$, $|E|$, and local degrees $\\deg(x)$ and $\\deg(y)$, clearly explaining the role of sparse supports and shortest-path computations. Your analysis should consider:\n- The number of LP variables and constraints induced by $S_x$ and $S_y$.\n- The cost of computing $d_G(u,v)$ restricted to pairs $u \\in S_x$, $v \\in S_y$ using Breadth-First Search (BFS).\n- The per-edge and total costs to compute $\\kappa_\\alpha(x,y)$ for all edges.\n\nImplementation requirements:\n- Implement the LP-based algorithm described above using the allowed libraries and produce numeric results.\n- The program must accept no input, must be self-contained, and must construct the test suite internally.\n\nTest suite:\n1. Graph $G_1$: Path on four vertices with $V = \\{0,1,2,3\\}$ and $E = \\{(0,1),(1,2),(2,3)\\}$, with $\\alpha = 0.5$.\n2. Graph $G_2$: Triangle with $V = \\{0,1,2\\}$ and $E = \\{(0,1),(1,2),(2,0)\\}$, with $\\alpha = 0$.\n3. Graph $G_3$: Barbell formed by two triangles connected by a bridge, with left triangle on vertices $\\{0,1,2\\}$, right triangle on vertices $\\{3,4,5\\}$, edges $(0,1),(1,2),(2,0)$ and $(3,4),(4,5),(5,3)$, and bridge edge $(0,3)$, with $\\alpha = 0.5$.\n4. Graph $G_4$: Cycle on four vertices with $V = \\{0,1,2,3\\}$ and $E = \\{(0,1),(1,2),(2,3),(3,0)\\}$, with $\\alpha = 1$.\n\nFor each graph $G_i$ in the test suite, compute $\\kappa_\\alpha(x,y)$ for every undirected edge $(x,y) \\in E$, ordered lexicographically by the pair $(\\min\\{x,y\\},\\max\\{x,y\\})$. Aggregate all results from the four test cases into a single list that concatenates the per-graph sequences in the order $G_1$, $G_2$, $G_3$, $G_4$. Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[r_1,r_2,\\dots,r_n]$). Express all numeric results as floating-point numbers rounded to six decimal places. No physical units or angle units are involved, and no percentages are required.",
            "solution": "The problem statement is evaluated as valid, as it is scientifically grounded in the established theory of discrete Ricci curvature, well-posed with a clear objective, and provides all necessary information for a unique solution. The definitions of the lazy random walk measure, Wasserstein distance, and Ollivier-Ricci curvature are standard in the field of network science and discrete differential geometry. The task is to design and implement an algorithm to compute these curvatures and analyze its complexity.\n\nThe core of the problem is to compute the Ollivier-Ricci curvature $\\kappa_\\alpha(x,y)$ for all edges $(x,y)$ of a graph $G=(V,E)$. The definition provided is:\n$$ \\kappa_\\alpha(x,y) = 1 - \\frac{W_1(m_x^\\alpha, m_y^\\alpha)}{d_G(x,y)} $$\nFor an edge $(x,y) \\in E$, the shortest-path distance $d_G(x,y)=1$, simplifying the expression to $\\kappa_\\alpha(x,y) = 1 - W_1(m_x^\\alpha, m_y^\\alpha)$. The main computational task is to determine the Wasserstein $1$-distance, $W_1(m_x^\\alpha, m_y^\\alpha)$, between the probability measures $m_x^\\alpha$ and $m_y^\\alpha$ centered at vertices $x$ and $y$, respectively.\n\nThe algorithm proceeds in the following steps for each edge $(x,y) \\in E$:\n\n**Step 1: Graph Preprocessing and Shortest-Path Metric**\nFirst, the graph $G=(V,E)$ is processed to compute the shortest-path distance $d_G(u,v)$ for all pairs of vertices $(u,v)$ that might be involved in the transport cost calculation. For a given edge $(x,y)$, the transport occurs between the support sets $S_x = \\{x\\} \\cup N(x)$ and $S_y = \\{y\\} \\cup N(y)$. To handle all edges, it is most efficient to pre-compute an all-pairs shortest path (APSP) matrix for the graph $G$. Since the graph is simple and unweighted, this can be accomplished by running a Breadth-First Search (BFS) starting from each vertex $v \\in V$. The complexity of a single BFS is $O(|V|+|E|)$. Performing this for all $|V|$ vertices results in a total complexity of $O(|V|(|V|+|E|))$ for constructing the full distance matrix $d_G$.\n\n**Step 2: Defining the Probability Measures**\nFor a given vertex $z \\in V$ with degree $\\deg(z)$, the lazy random walk measure $m_z^\\alpha$ is defined by the laziness parameter $\\alpha \\in [0,1]$ as:\n- $m_z^\\alpha(z) = \\alpha$ (mass at the center vertex)\n- $m_z^\\alpha(u) = \\frac{1-\\alpha}{\\deg(z)}$ for each neighbor $u \\in N(z)$\n- $m_z^\\alpha(v) = 0$ for all other vertices $v \\notin \\{z\\} \\cup N(z)$\n\nThe support of this measure, $S_z = \\{u \\in V \\mid m_z^\\alpha(u)  0\\}$, is the closed neighborhood of $z$, i.e., $S_z = \\{z\\} \\cup N(z)$. The size of this set is $|S_z| = 1 + \\deg(z)$. The total mass is $\\sum_{u \\in S_z} m_z^\\alpha(u) = \\alpha + \\deg(z) \\left(\\frac{1-\\alpha}{\\deg(z)}\\right) = \\alpha + (1-\\alpha) = 1$, confirming it is a valid probability measure.\n\n**Step 3: Formulating the Wasserstein Distance as a Linear Program**\nThe Wasserstein $1$-distance $W_1(m_x^\\alpha, m_y^\\alpha)$ is the solution to an optimal transport problem. It can be found by solving a Linear Program (LP) based on the Kantorovich formulation. The goal is to find an optimal coupling (transport plan) $\\pi(u,v)$ that specifies the amount of mass to move from each vertex $u \\in S_x$ to each vertex $v \\in S_y$, minimizing the total transport cost.\n\nThe LP is formulated as follows:\n- **Variables**: The variables are the elements of the transport plan, $\\pi(u,v)$, for all $u \\in S_x$ and $v \\in S_y$. The number of variables is $|S_x| \\times |S_y| = (1+\\deg(x))(1+\\deg(y))$.\n- **Objective Function**: Minimize the total cost, which is the sum of all transported masses multiplied by their respective travel distances:\n$$ \\text{Minimize} \\quad \\sum_{u \\in S_x} \\sum_{v \\in S_y} \\pi(u,v) d_G(u,v) $$\n- **Constraints**:\n    1. **Non-negativity**: $\\pi(u,v) \\ge 0$ for all $u \\in S_x, v \\in S_y$.\n    2. **Source Marginals**: The total mass transported out of any vertex $u \\in S_x$ must equal the mass originally at $u$:\n    $$ \\sum_{v \\in S_y} \\pi(u,v) = m_x^\\alpha(u) \\quad \\forall u \\in S_x $$\n    There are $|S_x| = 1+\\deg(x)$ such constraints.\n    3. **Target Marginals**: The total mass transported into any vertex $v \\in S_y$ must equal the mass required at $v$:\n    $$ \\sum_{u \\in S_x} \\pi(u,v) = m_y^\\alpha(v) \\quad \\forall v \\in S_y $$\n    There are $|S_y| = 1+\\deg(y)$ such constraints.\n\nThe solution to this LP, denoted by `res.fun` in `scipy`, gives the value of $W_1(m_x^\\alpha, m_y^\\alpha)$. The curvature is then calculated as $\\kappa_\\alpha(x,y) = 1 - W_1(m_x^\\alpha,m_y^\\alpha)$.\n\n**Step 4: Computational Complexity Analysis**\nThe overall complexity depends on the graph structure.\n\n- **APSP Precomputation**: As established, computing the distance matrix $d_G$ costs $O(|V|(|V|+|E|))$. This is a one-time cost. For sparse graphs where $|E| \\approx O(|V|)$, this simplifies to $O(|V|^2)$.\n\n- **Per-Edge Curvature Calculation for $(x,y) \\in E$**:\n    - **LP Size**: The number of variables is $N_{var} = (1+\\deg(x))(1+\\deg(y))$, and the number of equality constraints is $N_{con} = (1+\\deg(x)) + (1+\\deg(y))$.\n    - **LP Setup**: Constructing the cost vector requires $N_{var}$ lookups in the precomputed distance matrix. Constructing the constraint matrix `A_eq` involves placing $2 \\cdot N_{var}$ non-zero entries (each variable $\\pi(u,v)$ appears in one source and one target constraint) into a matrix of size $N_{con} \\times N_{var}$. This setup takes $O(N_{var} \\cdot N_{con})$.\n    - **LP Solving**: The complexity of solving the LP, e.g., with an interior-point method, is polynomial in $N_{var}$ and $N_{con}$. A conservative estimate is $O(N_{var}^3)$. For the supports of an edge $(x,y)$, this becomes $O(( (1+\\deg(x))(1+\\deg(y)) )^3)$. The use of sparse supports ($S_x, S_y$) is crucial, as an LP over the entire vertex set $V$ would involve $O(|V|^2)$ variables, making it intractable for large graphs.\n\n- **Total Complexity**: The total time to compute curvatures for all $|E|$ edges is the sum of the preprocessing cost and the per-edge computation costs:\n$$ T_{total} = O(|V|(|V|+|E|)) + \\sum_{(x,y) \\in E} T_{LP}(1+\\deg(x), 1+\\deg(y)) $$\nwhere $T_{LP}$ is the time to set up and solve the LP for an edge. In graphs with a maximum degree $\\Delta_{max}$, the per-edge cost is bounded, and the summation term becomes $O(|E| \\cdot T_{LP}(\\Delta_{max}, \\Delta_{max}))$. The algorithm's efficiency is heavily dependent on the local degree properties of the graph.\n\nThe provided Python implementation follows this logic. It uses `numpy` for efficient array manipulations and `scipy.optimize.linprog` to solve the optimal transport problem for each edge.",
            "answer": "```python\nimport numpy as np\nfrom scipy.optimize import linprog\nfrom collections import deque\n\ndef compute_ollivier_ricci(adj, alpha):\n    \"\"\"\n    Computes the Ollivier-Ricci curvature for all edges in a graph.\n\n    Args:\n        adj (dict): An adjacency list representation of the graph.\n        alpha (float): The laziness parameter, in [0, 1].\n\n    Returns:\n        list: A list of curvature values for each edge, ordered lexicographically.\n    \"\"\"\n    num_vertices = len(adj)\n    \n    # Step 1: Compute All-Pairs Shortest Paths (APSP) using BFS from each node\n    dist_matrix = np.full((num_vertices, num_vertices), np.inf)\n    for i in range(num_vertices):\n        dist_matrix[i, i] = 0\n        q = deque([(i, 0)])\n        visited = {i}\n        while q:\n            u, d = q.popleft()\n            for v in adj[u]:\n                if v not in visited:\n                    visited.add(v)\n                    dist_matrix[i, v] = d + 1\n                    dist_matrix[v, i] = d + 1\n                    q.append((v, d + 1))\n\n    # Get a sorted list of unique edges\n    edges = set()\n    for u, neighbors in adj.items():\n        for v in neighbors:\n            if u  v:\n                edges.add((u, v))\n    sorted_edges = sorted(list(edges))\n\n    curvatures = []\n\n    for x, y in sorted_edges:\n        # Step 2: Define probability measures and their supports\n        deg_x = len(adj[x])\n        deg_y = len(adj[y])\n        \n        # Supports are the closed neighborhoods\n        S_x = sorted([x] + adj[x])\n        S_y = sorted([y] + adj[y])\n        \n        p = len(S_x)\n        q = len(S_y)\n        \n        # Measures m_x and m_y\n        m_x = np.zeros(p)\n        for i, u in enumerate(S_x):\n            if u == x:\n                m_x[i] = alpha\n            else:\n                m_x[i] = (1 - alpha) / deg_x if deg_x  0 else 0\n\n        m_y = np.zeros(q)\n        for j, v in enumerate(S_y):\n            if v == y:\n                m_y[j] = alpha\n            else:\n                m_y[j] = (1 - alpha) / deg_y if deg_y  0 else 0\n\n        # Step 3: Formulate and solve the LP for Wasserstein distance\n        \n        # Cost vector c\n        cost_vector = np.zeros(p * q)\n        for i in range(p):\n            for j in range(q):\n                cost_vector[i * q + j] = dist_matrix[S_x[i], S_y[j]]\n\n        # Equality constraints A_eq * pi = b_eq\n        A_eq = np.zeros((p + q, p * q))\n        for i in range(p):\n            A_eq[i, i * q : (i + 1) * q] = 1  # Source marginals\n        for j in range(q):\n            A_eq[p + j, j::q] = 1           # Target marginals\n\n        b_eq = np.concatenate([m_x, m_y])\n\n        # Bounds for variables (pi_ij = 0)\n        bounds = (0, None)\n        \n        # Solve the LP\n        # Use 'interior-point' or 'revised simplex' for better reliability.\n        # The 'highs' method can be buggy for some transportation problems in certain scipy versions.\n        res = linprog(c=cost_vector, A_eq=A_eq, b_eq=b_eq, bounds=bounds, method='interior-point')\n        \n        w1_distance = res.fun\n        \n        # Curvature is 1 - W_1 / d(x,y). Since d(x,y)=1 for an edge, it's 1 - W_1.\n        kappa = 1 - w1_distance\n        curvatures.append(kappa)\n\n    return curvatures\n    \ndef solve():\n    \"\"\"\n    Defines test cases, computes curvatures, and prints the final result.\n    \"\"\"\n    # Test suite definition\n    # G1: Path on 4 vertices\n    g1_adj = {0: [1], 1: [0, 2], 2: [1, 3], 3: [2]}\n    alpha1 = 0.5\n\n    # G2: Triangle on 3 vertices\n    g2_adj = {0: [1, 2], 1: [0, 2], 2: [0, 1]}\n    alpha2 = 0.0\n\n    # G3: Barbell graph\n    g3_adj = {\n        0: [1, 2, 3], 1: [0, 2], 2: [0, 1],\n        3: [0, 4, 5], 4: [3, 5], 5: [3, 4]\n    }\n    alpha3 = 0.5\n    \n    # G4: Cycle on 4 vertices\n    g4_adj = {0: [1, 3], 1: [0, 2], 2: [1, 3], 3: [0, 2]}\n    alpha4 = 1.0\n\n    test_cases = [\n        (g1_adj, alpha1),\n        (g2_adj, alpha2),\n        (g3_adj, alpha3),\n        (g4_adj, alpha4)\n    ]\n\n    all_results = []\n    for adj, alpha in test_cases:\n        results_for_case = compute_ollivier_ricci(adj, alpha)\n        all_results.extend(results_for_case)\n\n    # Format output as a comma-separated list of floats rounded to 6 decimal places\n    output_str = f\"[{','.join(f'{r:.6f}' for r in all_results)}]\"\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
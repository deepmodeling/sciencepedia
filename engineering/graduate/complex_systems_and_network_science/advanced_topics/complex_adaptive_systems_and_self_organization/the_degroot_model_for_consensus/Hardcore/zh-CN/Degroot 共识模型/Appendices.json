{
    "hands_on_practices": [
        {
            "introduction": "理论学习之后，最好的巩固方式莫过于亲手实践。第一个练习通过一个具体的、分步计算来展示意见更新的过程。通过手动计算最初几次迭代，你将对智能体如何通过对其邻居意见进行加权平均来演化自身意见有一个切实的感受，从而强化对 DeGroot 模型核心矩阵运算的理解 。",
            "id": "4308894",
            "problem": "考虑一个由 DeGroot 共识模型控制的双智能体观点形成过程，其中每个智能体通过对所有智能体先前的观点进行加权平均来更新其观点。该更新过程表现为将时间 $t$ 的观点向量乘以一个非负的行随机矩阵 $W$，其中每一行之和为 $1$，并编码了相应智能体所使用的权重。设权重矩阵为\n$$\nW=\\begin{pmatrix}\n0.5  0.5 \\\\\n0.2  0.8\n\\end{pmatrix},\n$$\n初始观点向量为\n$$\nx(0)=\\begin{pmatrix}\n1 \\\\\n0\n\\end{pmatrix}.\n$$\n从基本原理出发——即行随机矩阵为每个智能体产生先前观点的凸组合——计算此过程生成的观点向量 $x(1)$ 和 $x(2)$。然后，对于 $x(1)$ 和 $x(2)$ 的每个分量，将其明确解释为分别是 $x(0)$ 和 $x(1)$ 各分量的加权平均值，并清楚说明哪个权重应用于哪个过去的观点。将最终数值精确地表示为有理数。以单一连接行向量 $\\left(x_{1}(1),\\,x_{2}(1),\\,x_{1}(2),\\,x_{2}(2)\\right)$ 的形式提供您的最终答案。",
            "solution": "该问题陈述被评估为有效。它在科学上基于已建立的 DeGroot 共识动力学模型，这是网络科学和系统理论中的一个标准课题。该问题是适定的，提供了所有必要信息——权重矩阵 $W$ 和初始观点向量 $x(0)$——以唯一确定后续的观点向量。所提供的数据（$W$ 是一个有效的行随机矩阵，$x(0)$ 是一个标准的初始条件）是一致且无矛盾的。目标是清晰且可形式化的。\n\nDeGroot 模型描述了智能体网络中观点的演化。在时间步 $t$，系统的状态由一个观点向量 $x(t)$ 给出，其中第 $i$ 个分量 $x_i(t)$ 代表智能体 $i$ 的观点。观点根据线性迭代同步更新：\n$$x(t+1) = W x(t)$$\n其中 $W$ 是一个行随机矩阵。该矩阵的元素 $W_{ij}$ 表示智能体 $i$ 对前一时间步中智能体 $j$ 的观点所赋予的权重。由于 $W$ 是行随机的，每一行之和为 $1$，这确保了每个新观点 $x_i(t+1)$ 是先前观点 $\\{x_j(t)\\}$ 的凸组合（即加权平均）。\n\n给定的权重矩阵为\n$$\nW=\\begin{pmatrix}\n0.5  0.5 \\\\\n0.2  0.8\n\\end{pmatrix}\n$$\n初始观点向量为\n$$\nx(0)=\\begin{pmatrix}\n1 \\\\\n0\n\\end{pmatrix}.\n$$\n为了进行有理数计算，我们将 $W$ 中的小数值转换为分数：\n$$\nW=\\begin{pmatrix}\n\\frac{1}{2}  \\frac{1}{2} \\\\\n\\frac{1}{5}  \\frac{4}{5}\n\\end{pmatrix}\n$$\n\n首先，我们计算时间 $t=1$ 时的观点向量。\n$$\nx(1) = W x(0) = \\begin{pmatrix}\n\\frac{1}{2}  \\frac{1}{2} \\\\\n\\frac{1}{5}  \\frac{4}{5}\n\\end{pmatrix}\n\\begin{pmatrix}\n1 \\\\\n0\n\\end{pmatrix}\n$$\n$x(1)$ 的分量计算如下：\n$$\nx_1(1) = W_{11}x_1(0) + W_{12}x_2(0) = \\left(\\frac{1}{2}\\right)(1) + \\left(\\frac{1}{2}\\right)(0) = \\frac{1}{2}\n$$\n$$\nx_2(1) = W_{21}x_1(0) + W_{22}x_2(0) = \\left(\\frac{1}{5}\\right)(1) + \\left(\\frac{4}{5}\\right)(0) = \\frac{1}{5}\n$$\n所以，在 $t=1$ 时的观点向量是 $x(1) = \\begin{pmatrix} \\frac{1}{2} \\\\ \\frac{1}{5} \\end{pmatrix}$。\n将这些结果解释为加权平均：\n- 智能体1的新观点 $x_1(1)=\\frac{1}{2}$ 是初始观点的加权平均，其中智能体1以 $\\frac{1}{2}$ 的权重加权其自身的初始观点 $x_1(0)=1$，并以 $\\frac{1}{2}$ 的权重加权智能体2的初始观点 $x_2(0)=0$。\n- 智能体2的新观点 $x_2(1)=\\frac{1}{5}$ 是一个加权平均，其中智能体2以 $\\frac{1}{5}$ 的权重加权智能体1的初始观点 $x_1(0)=1$，并以 $\\frac{4}{5}$ 的权重加权其自身的初始观点 $x_2(0)=0$。\n\n接下来，我们计算时间 $t=2$ 时的观点向量。\n$$\nx(2) = W x(1) = \\begin{pmatrix}\n\\frac{1}{2}  \\frac{1}{2} \\\\\n\\frac{1}{5}  \\frac{4}{5}\n\\end{pmatrix}\n\\begin{pmatrix}\n\\frac{1}{2} \\\\\n\\frac{1}{5}\n\\end{pmatrix}\n$$\n$x(2)$ 的分量计算如下：\n$$\nx_1(2) = W_{11}x_1(1) + W_{12}x_2(1) = \\left(\\frac{1}{2}\\right)\\left(\\frac{1}{2}\\right) + \\left(\\frac{1}{2}\\right)\\left(\\frac{1}{5}\\right) = \\frac{1}{4} + \\frac{1}{10} = \\frac{5}{20} + \\frac{2}{20} = \\frac{7}{20}\n$$\n$$\nx_2(2) = W_{21}x_1(1) + W_{22}x_2(1) = \\left(\\frac{1}{5}\\right)\\left(\\frac{1}{2}\\right) + \\left(\\frac{4}{5}\\right)\\left(\\frac{1}{5}\\right) = \\frac{1}{10} + \\frac{4}{25} = \\frac{5}{50} + \\frac{8}{50} = \\frac{13}{50}\n$$\n所以，在 $t=2$ 时的观点向量是 $x(2) = \\begin{pmatrix} \\frac{7}{20} \\\\ \\frac{13}{50} \\end{pmatrix}$。\n将这些结果解释为加权平均：\n- 智能体1在 $t=2$ 时的观点 $x_1(2)=\\frac{7}{20}$ 是 $t=1$ 时观点的加权平均，其中智能体1以 $\\frac{1}{2}$ 的权重加权其自身的先前观点 $x_1(1)=\\frac{1}{2}$，并以 $\\frac{1}{2}$ 的权重加权智能体2的先前观点 $x_2(1)=\\frac{1}{5}$。\n- 智能体2在 $t=2$ 时的观点 $x_2(2)=\\frac{13}{50}$ 是 $t=1$ 时观点的加权平均，其中智能体2以 $\\frac{1}{5}$ 的权重加权智能体1的先前观点 $x_1(1)=\\frac{1}{2}$，并以 $\\frac{4}{5}$ 的权重加权其自身的先前观点 $x_2(1)=\\frac{1}{5}$。\n\n问题要求以单一连接行向量 $\\left(x_{1}(1),\\,x_{2}(1),\\,x_{1}(2),\\,x_{2}(2)\\right)$ 的形式给出最终答案。使用计算出的值：\n$$\n\\left(\\frac{1}{2}, \\frac{1}{5}, \\frac{7}{20}, \\frac{13}{50}\\right)\n$$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{1}{2}  \\frac{1}{5}  \\frac{7}{20}  \\frac{13}{50}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "迭代更新展示了意见演化的路径，但我们的最终目标往往是预测系统将收敛到的最终共识值，而无需无限地运行模拟。本练习将指导你计算系统的“影响向量” $\\pi$，它量化了每个智能体在达成最终共识过程中的长期影响力。利用这个向量，你可以直接计算出最终的共识意见，即初始意见的加权平均值 。",
            "id": "4308906",
            "problem": "考虑一个由$3$个代理组成的网络，它们在德格鲁特（DeGroot）共识模型下进行交互，其观点在离散时间 $t \\in \\{0,1,2,\\dots\\}$ 按 $x(t+1)=W x(t)$ 进行更新，其中 $W$ 是一个行随机影响矩阵。设\n$$\nW=\\begin{pmatrix}\n0.7  0.3  0 \\\\\n0.2  0.5  0.3 \\\\\n0  0.4  0.6\n\\end{pmatrix},\n\\qquad\nx(0)=\\begin{pmatrix}1 \\\\ 2 \\\\ 0\\end{pmatrix}.\n$$\n仅使用行随机性的核心定义和关于原始非负矩阵的佩龙-弗罗贝尼乌斯（Perron–Frobenius）定理，从第一原理出发，确定唯一的、具有严格正分量且满足 $\\pi^{\\top}W=\\pi^{\\top}$ 和 $\\pi^{\\top}\\mathbf{1}=1$ 的影响向量 $\\pi \\in \\mathbb{R}^3$，然后计算从 $x(0)$ 开始的德格鲁特动态所达到的共识值 $c$。在推导过程中，请显式地验证 $\\pi$ 的归一化。将最终答案以精确形式表示为一个单行矩阵，其中包含 $\\pi$ 的三个分量以及 $c$。无需四舍五入，也不涉及单位。",
            "solution": "该问题要求确定由观点更新规则 $x(t+1)=W x(t)$ 定义的德格鲁特共识模型的影响向量 $\\pi$ 和共识值 $c$。给定的影响矩阵 $W$ 为\n$$\nW=\\begin{pmatrix}\n0.7  0.3  0 \\\\\n0.2  0.5  0.3 \\\\\n0  0.4  0.6\n\\end{pmatrix}\n$$\n初始观点向量为\n$$\nx(0)=\\begin{pmatrix}1 \\\\ 2 \\\\ 0\\end{pmatrix}\n$$\n矩阵 $W$ 的元素均为非负，且每行元素之和为1。例如，第一行有 $0.7 + 0.3 + 0 = 1$。这证实了 $W$ 是一个行随机矩阵。此外，尽管 $W$ 中有零元素，但其平方为\n$$\nW^2 = \\begin{pmatrix}\n0.7  0.3  0 \\\\\n0.2  0.5  0.3 \\\\\n0  0.4  0.6\n\\end{pmatrix}\n\\begin{pmatrix}\n0.7  0.3  0 \\\\\n0.2  0.5  0.3 \\\\\n0  0.4  0.6\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n0.55  0.36  0.09 \\\\\n0.24  0.43  0.33 \\\\\n0.08  0.44  0.48\n\\end{pmatrix}\n$$\n由于 $W^2$ 的所有元素都是严格正的，因此矩阵 $W$ 是原始矩阵。\n\n根据关于原始非负矩阵的佩龙-弗罗贝尼乌斯定理，这样的矩阵有一个唯一的最大特征值，该特征值为实数且为正。对于行随机矩阵，这个特征值是 $\\lambda_1 = 1$。该定理还保证了存在一个与 $\\lambda_1 = 1$ 对应的唯一左特征向量 $\\pi^{\\top}$，该向量可以被归一化，使其分量严格为正且总和为1。这个向量 $\\pi$ 就是影响向量，代表了代理之间影响力的稳态分布。\n\n首先，我们求解影响向量 $\\pi = \\begin{pmatrix} \\pi_1  \\pi_2  \\pi_3 \\end{pmatrix}^{\\top}$。它必须满足特征向量方程 $\\pi^{\\top}W = \\pi^{\\top}$，这等价于 $W^{\\top}\\pi = \\pi$，或 $(W^{\\top}-I)\\pi = \\mathbf{0}$，其中 $I$ 是单位矩阵，$\\mathbf{0}$ 是零向量。\n\n$W$ 的转置是\n$$\nW^{\\top} = \\begin{pmatrix}\n0.7  0.2  0 \\\\\n0.3  0.5  0.4 \\\\\n0  0.3  0.6\n\\end{pmatrix}\n$$\n矩阵 $(W^{\\top}-I)$ 是\n$$\nW^{\\top}-I = \\begin{pmatrix}\n0.7-1  0.2  0 \\\\\n0.3  0.5-1  0.4 \\\\\n0  0.3  0.6-1\n\\end{pmatrix}\n= \\begin{pmatrix}\n-0.3  0.2  0 \\\\\n0.3  -0.5  0.4 \\\\\n0  0.3  -0.4\n\\end{pmatrix}\n$$\n线性方程组 $(W^{\\top}-I)\\pi = \\mathbf{0}$ 为：\n\\begin{align*}\n-0.3 \\pi_1 + 0.2 \\pi_2 = 0 \\\\\n0.3 \\pi_1 - 0.5 \\pi_2 + 0.4 \\pi_3 = 0 \\\\\n0.3 \\pi_2 - 0.4 \\pi_3 = 0\n\\end{align*}\n从第一个方程，我们得到 $0.3 \\pi_1 = 0.2 \\pi_2$，化简为 $3 \\pi_1 = 2 \\pi_2$，或 $\\pi_1 = \\frac{2}{3} \\pi_2$。\n从第三个方程，我们得到 $0.3 \\pi_2 = 0.4 \\pi_3$，化简为 $3 \\pi_2 = 4 \\pi_3$，或 $\\pi_3 = \\frac{3}{4} \\pi_2$。\n将这些代入第二个方程验证了一致性：$0.3(\\frac{2}{3}\\pi_2) - 0.5\\pi_2 + 0.4(\\frac{3}{4}\\pi_2) = 0.2\\pi_2 - 0.5\\pi_2 + 0.3\\pi_2 = 0$。\n因此，特征向量 $\\pi$ 与向量 $\\begin{pmatrix} \\frac{2}{3}  1  \\frac{3}{4} \\end{pmatrix}^{\\top}$ 成比例。为便于使用整数，我们可以乘以分母的最小公倍数12，得到一个成比例的向量 $\\begin{pmatrix} 8  12  9 \\end{pmatrix}^{\\top}$。\n\n现在，我们必须将此向量归一化，使其分量之和为1，即满足条件 $\\pi^{\\top}\\mathbf{1} = \\sum_{i=1}^3 \\pi_i = 1$。未归一化分量之和为 $8 + 12 + 9 = 29$。\n因此，影响向量 $\\pi$ 是：\n$$\n\\pi = \\frac{1}{29}\\begin{pmatrix} 8 \\\\ 12 \\\\ 9 \\end{pmatrix} = \\begin{pmatrix} 8/29 \\\\ 12/29 \\\\ 9/29 \\end{pmatrix}\n$$\n按要求显式验证归一化：$\\pi_1+\\pi_2+\\pi_3 = \\frac{8}{29} + \\frac{12}{29} + \\frac{9}{29} = \\frac{8+12+9}{29} = \\frac{29}{29} = 1$。这是正确的。\n\n接下来，我们计算共识值 $c$。动态过程将收敛到一个所有观点都相等的状态，即 $\\lim_{t\\to\\infty} x(t) = c\\mathbf{1}$。\n让我们考虑量 $M(t) = \\pi^{\\top}x(t)$。它随时间的演化是\n$$\nM(t+1) = \\pi^{\\top}x(t+1) = \\pi^{\\top}(W x(t)) = (\\pi^{\\top}W)x(t)\n$$\n由于 $\\pi^{\\top}$ 是 $W$ 对应于特征值1的左特征向量，我们有 $\\pi^{\\top}W = \\pi^{\\top}$。因此，\n$$\nM(t+1) = \\pi^{\\top}x(t) = M(t)\n$$\n这表明 $M(t)$ 是一个守恒量。$M(t)$ 的值对于所有 $t \\ge 0$ 都是一个常数。\n因此，$M(\\infty) = M(0)$。\n极限值为 $M(\\infty) = \\lim_{t\\to\\infty} \\pi^{\\top}x(t) = \\pi^{\\top} (c\\mathbf{1}) = c (\\pi^{\\top}\\mathbf{1}) = c(1) = c$。\n初始值为 $M(0) = \\pi^{\\top}x(0)$。\n令二者相等，我们得到共识值为 $c = \\pi^{\\top}x(0)$。\n\n使用给定的初始状态 $x(0) = \\begin{pmatrix} 1  2  0 \\end{pmatrix}^{\\top}$ 和我们推导出的影响向量 $\\pi$：\n$$\nc = \\begin{pmatrix} \\frac{8}{29}  \\frac{12}{29}  \\frac{9}{29} \\end{pmatrix} \\begin{pmatrix} 1 \\\\ 2 \\\\ 0 \\end{pmatrix}\n$$\n$$\nc = \\left(\\frac{8}{29}\\right)(1) + \\left(\\frac{12}{29}\\right)(2) + \\left(\\frac{9}{29}\\right)(0) = \\frac{8 + 24 + 0}{29} = \\frac{32}{29}\n$$\n共识值为 $c = \\frac{32}{29}$。\n\n影响向量的分量为 $\\pi_1 = \\frac{8}{29}$、$\\pi_2 = \\frac{12}{29}$、$\\pi_3 = \\frac{9}{29}$，共识值为 $c = \\frac{32}{29}$。\n最终答案表示为包含这四个值的行矩阵。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{8}{29}  \\frac{12}{29}  \\frac{9}{29}  \\frac{32}{29} \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "在实际应用中，影响矩阵 $W$ 中权重的选择是一个关键的设计决策，它直接影响网络达成共识的速度。最后一个练习是一个计算实践，你将实现两种不同的权重分配方案并比较它们的性能。通过分析矩阵的第二大特征值模并模拟动力学过程，你将探索影响矩阵的光谱特性与模型收敛速度之间的深刻联系，这是衡量和优化共识算法效率的核心 。",
            "id": "4308897",
            "problem": "您需要实现一个完整的、可运行的程序，用于在两种不同的权重设计方案下，分析无向简单图上的 DeGroot 共识过程。DeGroot 模型由迭代更新规则 $x(t+1) = W x(t)$ 定义，其中 $x(t) \\in \\mathbb{R}^n$ 是时间 $t$ 时的观点向量，$W \\in \\mathbb{R}^{n \\times n}$ 是一个行随机矩阵（$W \\mathbf{1} = \\mathbf{1}$，其中 $\\mathbf{1}$ 是全一向量），$n$ 是节点数。您的程序必须遵守以下规范，并生成所需的最终输出。所有定义和任务都是纯数学的且自洽的。\n\n基本和设计要求：\n- 从 DeGroot 更新规则 $x(t+1) = W x(t)$ 的形式化定义、行随机矩阵的概念以及矩阵的标准谱特性（特征值和特征向量）开始。\n- 考虑无向连通图，以及基于给定邻接矩阵 $A$ 构建的两种权重设计方案 $W$：\n  1. 带自环的均匀邻居权重：对于每个度为 $d_i$ 的节点 $i$，如果 $j = i$ 或 $j$ 是 $i$ 的邻居（即 $A_{i j} = 1$），则设置 $W_{i j} = \\frac{1}{d_i + 1}$，否则设置 $W_{i j} = 0$。\n  2. Metropolis 权重：对于每条边 $(i,j)$ 且 $A_{i j} = 1$，设置 $W_{i j} = \\frac{1}{1 + \\max(d_i, d_j)}$，并设置 $W_{i i} = 1 - \\sum_{j \\in \\mathcal{N}(i)} W_{i j}$ 以使每行之和为 $1$，其中当 $A_{i j} = 0$ 且 $j \\neq i$ 时，$W_{i j} = 0$。\n- 对于每个权重矩阵 $W$，计算其第二大特征值模（也称 SLEM），记为 $\\lambda_2(W)$，定义为 $W$ 的所有特征值中（不包括平凡特征值 $1$）绝对值的最大值。\n- 对于每个权重矩阵 $W$ 和初始观点向量 $x(0)$，计算 $W$ 的稳态分布 $\\pi \\in \\mathbb{R}^n$（定义为 $\\pi^\\top W = \\pi^\\top$ 且 $\\sum_{i=1}^n \\pi_i = 1$），并用它来形成共识值 $c = \\pi^\\top x(0)$。然后，模拟 DeGroot 动态指定的步数 $t$ 以得到 $x(t)$，并计算欧几里得不一致范数 $\\|x(t) - c \\mathbf{1}\\|_2$。\n- 程序必须生成单行输出，该输出按指定顺序和格式汇总所有测试用例的结果，形式为列表的列表。\n\n测试套件：\n实现程序以处理以下三个测试用例。对于每个测试用例，构建两种权重矩阵（带自环的均匀邻居权重和 Metropolis 权重），为每种矩阵计算 $\\lambda_2(W)$，模拟 $t \\in \\{3, 10\\}$ 时的 $x(t)$，并计算不一致范数。请严格使用下面提供的邻接矩阵和初始向量，并按指定的最终格式生成结果。\n\n- 测试用例 $1$（包含 $5$ 个节点的路径图）：\n  - 邻接矩阵 $A^{(1)}$：\n    $$\n    A^{(1)} = \\begin{bmatrix}\n    0  1  0  0  0 \\\\\n    1  0  1  0  0 \\\\\n    0  1  0  1  0 \\\\\n    0  0  1  0  1 \\\\\n    0  0  0  1  0\n    \\end{bmatrix}\n    $$\n  - 初始观点向量 $x^{(1)}(0)$：\n    $$\n    x^{(1)}(0) = \\begin{bmatrix} 1.0 \\\\ -0.5 \\\\ 0.0 \\\\ 1.5 \\\\ -1.0 \\end{bmatrix}\n    $$\n  - 时间步：$t \\in \\{3, 10\\}$。\n\n- 测试用例 $2$（包含 $5$ 个节点的星形图；节点 $1$ 是中心，连接到节点 $2,3,4,5$）：\n  - 邻接矩阵 $A^{(2)}$：\n    $$\n    A^{(2)} = \\begin{bmatrix}\n    0  1  1  1  1 \\\\\n    1  0  0  0  0 \\\\\n    1  0  0  0  0 \\\\\n    1  0  0  0  0 \\\\\n    1  0  0  0  0\n    \\end{bmatrix}\n    $$\n  - 初始观点向量 $x^{(2)}(0)$：\n    $$\n    x^{(2)}(0) = \\begin{bmatrix} 2.0 \\\\ -1.0 \\\\ 0.5 \\\\ 0.5 \\\\ -2.0 \\end{bmatrix}\n    $$\n  - 时间步：$t \\in \\{3, 10\\}$。\n\n- 测试用例 $3$（包含 $4$ 个节点的完全图）：\n  - 邻接矩阵 $A^{(3)}$：\n    $$\n    A^{(3)} = \\begin{bmatrix}\n    0  1  1  1 \\\\\n    1  0  1  1 \\\\\n    1  1  0  1 \\\\\n    1  1  1  0\n    \\end{bmatrix}\n    $$\n  - 初始观点向量 $x^{(3)}(0)$：\n    $$\n    x^{(3)}(0) = \\begin{bmatrix} 0.5 \\\\ -0.5 \\\\ 1.5 \\\\ -1.0 \\end{bmatrix}\n    $$\n  - 时间步：$t \\in \\{3, 10\\}$。\n\n最终输出格式：\n- 对于每个测试用例 $k \\in \\{1,2,3\\}$，生成一个包含六个浮点数的列表，顺序如下：\n  $$\n  \\left[ \\lambda_2\\big(W_{\\text{unif}}^{(k)}\\big),\\; \\lambda_2\\big(W_{\\text{metr}}^{(k)}\\big),\\; \\|x_{\\text{unif}}^{(k)}(3) - c_{\\text{unif}}^{(k)} \\mathbf{1}\\|_2,\\; \\|x_{\\text{metr}}^{(k)}(3) - c_{\\text{metr}}^{(k)} \\mathbf{1}\\|_2,\\; \\|x_{\\text{unif}}^{(k)}(10) - c_{\\text{unif}}^{(k)} \\mathbf{1}\\|_2,\\; \\|x_{\\text{metr}}^{(k)}(10) - c_{\\text{metr}}^{(k)} \\mathbf{1}\\|_2 \\right]\n  $$\n- 您的程序应生成单行输出，其中包含所有三个测试用例的结果，形式为由方括号括起来的、以逗号分隔的列表的列表，例如：\n  $$\n  \\left[ [r_{1,1}, r_{1,2}, r_{1,3}, r_{1,4}, r_{1,5}, r_{1,6}], [r_{2,1}, r_{2,2}, r_{2,3}, r_{2,4}, r_{2,5}, r_{2,6}], [r_{3,1}, r_{3,2}, r_{3,3}, r_{3,4}, r_{3,5}, r_{3,6}] \\right]\n  $$\n不涉及物理单位或角度。所有输出必须是实数。程序不得读取任何外部输入，并且必须是自包含的。",
            "solution": "该问题是有效的，因为它是数学上定义明确、自洽的，并且基于线性代数和网络科学的既定原理，特别是 DeGroot 共识模型。所有提供的数据和定义都是一致的，足以推导出唯一的解。\n\n问题的核心是分析 DeGroot 模型的收敛性质，该模型由线性迭代过程 $x(t+1) = W x(t)$ 描述，适用于不同的网络结构和权重方案。此处，$x(t) \\in \\mathbb{R}^n$ 是 $n$ 个智能体在时间 $t$ 的观点向量，$W \\in \\mathbb{R}^{n \\times n}$ 是一个行随机影响矩阵，意味着其所有项都非负（$W_{ij} \\ge 0$），并且每行之和为 $1$（对于所有 $i \\in \\{1, \\dots, n\\}$，$\\sum_{j=1}^n W_{ij} = 1$）。这可以简洁地写为 $W\\mathbf{1} = \\mathbf{1}$，其中 $\\mathbf{1}$ 是全一列向量。\n\n对于给定的图（它们是无向且连通的）以及指定的权重方案（这些方案导致正的对角线项，$W_{ii}  0$），矩阵 $W$ 是素的且不可约的。根据随机矩阵的 Perron-Frobenius 定理，$W$ 有一个单特征值 $\\lambda_1 = 1$，所有其他特征值 $\\lambda_k$ 的模都严格小于 $1$，即对于 $k > 1$，有 $|\\lambda_k|  1$。这确保了系统会收敛到一个共识，即 $\\lim_{t \\to \\infty} x(t) = c \\mathbf{1}$，其中 $c \\in \\mathbb{R}$ 是某个共识值。\n\n整个过程对每个测试用例包含以下步骤：\n1.  根据给定的邻接矩阵 $A$ 构建权重矩阵 $W_{\\text{unif}}$ 和 $W_{\\text{metr}}$。\n2.  对于每个权重矩阵 $W$，计算其谱特性，特别是第二大特征值模 $\\lambda_2(W)$。\n3.  通过计算 $W$ 的稳态分布 $\\pi$ 来确定最终共识值 $c$。\n4.  对 $t \\in \\{3, 10\\}$ 模拟动态过程以获得 $x(t)$。\n5.  计算欧几里得不一致范数 $\\|x(t) - c \\mathbf{1}\\|_2$。\n\n我们现在详细说明每个步骤。\n\n首先，我们从邻接矩阵 $A$ 的维度确定节点数 $n$，并通过对 $A$ 的第 $i$ 行求和来计算每个节点 $i$ 的度 $d_i$。度的向量是 $d = A \\mathbf{1}$。\n\n接下来，我们构建两种类型的权重矩阵。\n\n- **带自环的均匀邻居权重 ($W_{\\text{unif}}$)**：每个节点 $i$ 将其自身观点与其邻居的观点进行平均，对所有观点给予相同的权重。对于一个度为 $d_i$ 的节点 $i$，其更新中有 $d_i+1$ 个参与者（它自己和它的 $d_i$ 个邻居）。因此，权重定义为：\n$$\nW_{ij} = \\begin{cases} \\frac{1}{d_i + 1}  \\text{if } j = i \\text{ or } A_{ij} = 1 \\\\ 0  \\text{otherwise} \\end{cases}\n$$\n用矩阵形式，这可以表示为 $W_{\\text{unif}} = (D+I)^{-1}(A+I)$，其中 $D = \\text{diag}(d_1, \\dots, d_n)$ 是度的对角矩阵，$I$ 是单位矩阵。\n\n- **Metropolis 权重 ($W_{\\text{metr}}$)**：这个方案旨在使矩阵 $W$ 对称，这对稳态分布有重要影响。非对角线权重为相邻节点 $i$ 和 $j$（$A_{ij}=1$）定义为：\n$$\nW_{ij} = \\frac{1}{1 + \\max(d_i, d_j)} \\quad (i \\neq j)\n$$\n由于对于无向边，$d_i$ 和 $d_j$ 是对称的，所以 $W_{ij} = W_{ji}$。然后设置对角线权重以确保每行之和为 $1$：\n$$\nW_{ii} = 1 - \\sum_{j \\neq i} W_{ij} = 1 - \\sum_{j \\in \\mathcal{N}(i)} \\frac{1}{1 + \\max(d_i, d_j)}\n$$\n其中 $\\mathcal{N}(i)$ 是节点 $i$ 的邻居集合。\n\n下一步是对 $W$ 进行谱分析。收敛到共识的速度由第二大特征值模（SLEM）$\\lambda_2(W)$ 控制，定义为 $\\lambda_2(W) = \\max \\{|\\lambda_k| : \\lambda_k \\text{ is an eigenvalue of } W, k  1\\}$。我们数值计算 $W$ 的所有特征值，取其绝对值，并找出第二大的值，即 $\\lambda_2(W)$。\n\n最终共识值 $c$ 是初始观点的加权平均值，$c = \\pi^\\top x(0)$，其中 $\\pi$ 是 $W$ 的唯一稳态分布。该分布是对应于特征值 $\\lambda=1$ 的归一化左特征向量，满足 $\\pi^\\top W = \\pi^\\top$ 和 $\\sum_{i=1}^n \\pi_i = 1$。为了计算 $\\pi$，我们找到 $W^\\top$ 关于特征值 $1$ 的右特征向量，取其实部，并将其归一化以使总和为 $1$。对于对称的 Metropolis 矩阵 $W_{\\text{metr}}$，该矩阵是双随机的（$W\\mathbf{1} = \\mathbf{1}$ 且 $\\mathbf{1}^\\top W = \\mathbf{1}^\\top$），其稳态分布是均匀的：对所有 $i$ 都有 $\\pi_i = 1/n$。在这种情况下，共识值就是初始观点的简单平均值：$c = \\frac{1}{n} \\sum_{i=1}^n x_i(0)$。\n\n最后，我们模拟观点动态并量化不一致性。时间 $t$ 的观点向量通过重复应用 $W$ 获得，等价于 $x(t) = W^t x(0)$。我们使用数值矩阵幂运算来计算 $t=3$ 和 $t=10$ 时的 $W^t$。与最终共识状态的差异由差向量 $x(t) - c\\mathbf{1}$ 的欧几里得范数来衡量：\n$$\n\\|x(t) - c \\mathbf{1}\\|_2 = \\sqrt{\\sum_{i=1}^n (x_i(t) - c)^2}\n$$\n这个量将针对两种权重方案和每个指定的时间步进行计算，从而完成每个测试用例所需的分析。实现将对所提供的三种图场景中的每一种执行这些计算。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Main function to run the DeGroot model analysis for all test cases.\n    \"\"\"\n    test_cases = [\n        {\n            \"A\": np.array([\n                [0, 1, 0, 0, 0],\n                [1, 0, 1, 0, 0],\n                [0, 1, 0, 1, 0],\n                [0, 0, 1, 0, 1],\n                [0, 0, 0, 1, 0]\n            ], dtype=float),\n            \"x0\": np.array([1.0, -0.5, 0.0, 1.5, -1.0]),\n            \"t_steps\": [3, 10]\n        },\n        {\n            \"A\": np.array([\n                [0, 1, 1, 1, 1],\n                [1, 0, 0, 0, 0],\n                [1, 0, 0, 0, 0],\n                [1, 0, 0, 0, 0],\n                [1, 0, 0, 0, 0]\n            ], dtype=float),\n            \"x0\": np.array([2.0, -1.0, 0.5, 0.5, -2.0]),\n            \"t_steps\": [3, 10]\n        },\n        {\n            \"A\": np.array([\n                [0, 1, 1, 1],\n                [1, 0, 1, 1],\n                [1, 1, 0, 1],\n                [1, 1, 1, 0]\n            ], dtype=float),\n            \"x0\": np.array([0.5, -0.5, 1.5, -1.0]),\n            \"t_steps\": [3, 10]\n        }\n    ]\n\n    all_results = []\n    for case in test_cases:\n        A = case[\"A\"]\n        x0 = case[\"x0\"]\n        t_steps = case[\"t_steps\"]\n\n        # Process Uniform Weights\n        W_unif = construct_w_unif(A)\n        res_unif = analyze_system(W_unif, x0, t_steps)\n\n        # Process Metropolis Weights\n        W_metr = construct_w_metr(A)\n        res_metr = analyze_system(W_metr, x0, t_steps)\n\n        case_results = [\n            res_unif['lambda2'],\n            res_metr['lambda2'],\n            res_unif['norms'][t_steps[0]],\n            res_metr['norms'][t_steps[0]],\n            res_unif['norms'][t_steps[1]],\n            res_metr['norms'][t_steps[1]],\n        ]\n        all_results.append(case_results)\n\n    # Format output according to specification\n    # The str() representation of a list of lists matches the required format.\n    print(str(all_results).replace(\"'\", \"\"))\n\n\ndef construct_w_unif(A):\n    \"\"\"Constructs the uniform neighbor weight matrix.\"\"\"\n    n = A.shape[0]\n    I = np.identity(n)\n    degrees = A.sum(axis=1)\n    D_plus_I_inv = np.diag(1.0 / (degrees + 1.0))\n    W = D_plus_I_inv @ (A + I)\n    return W\n\ndef construct_w_metr(A):\n    \"\"\"Constructs the Metropolis weight matrix.\"\"\"\n    n = A.shape[0]\n    degrees = A.sum(axis=1)\n    W = np.zeros((n, n))\n    \n    # Off-diagonal elements\n    for i in range(n):\n        for j in range(i + 1, n):\n            if A[i, j] == 1:\n                val = 1.0 / (1.0 + max(degrees[i], degrees[j]))\n                W[i, j] = val\n                W[j, i] = val\n    \n    # Diagonal elements\n    row_sums_off_diag = W.sum(axis=1)\n    for i in range(n):\n        W[i, i] = 1.0 - row_sums_off_diag[i]\n        \n    return W\n\ndef analyze_system(W, x0, t_steps):\n    \"\"\"\n    Computes spectral properties and disagreement norms for a given system.\n    \"\"\"\n    n = W.shape[0]\n\n    # Compute second largest eigenvalue modulus (SLEM)\n    evals = np.linalg.eigvals(W)\n    # Graph is connected and W is primitive, so lambda=1 is a simple eigenvalue.\n    # Sorting absolute values descendingly, lambda_2 is the second element.\n    sorted_abs_evals = np.sort(np.abs(evals))[::-1]\n    lambda2 = sorted_abs_evals[1]\n\n    # Compute stationary distribution pi (left eigenvector for lambda=1)\n    # This is the right eigenvector of W.T for lambda=1\n    evals_T, evecs_T = np.linalg.eig(W.T)\n    # Find the eigenvector corresponding to eigenvalue 1\n    idx = np.argmin(np.abs(evals_T - 1.0))\n    pi = np.real(evecs_T[:, idx])\n    pi /= np.sum(pi)\n\n    # Compute consensus value c\n    c = pi @ x0\n    \n    # Compute disagreement norms for each time step\n    c_vec = c * np.ones(n)\n    norms = {}\n    for t in t_steps:\n        Wt = np.linalg.matrix_power(W, t)\n        xt = Wt @ x0\n        norm = np.linalg.norm(xt - c_vec)\n        norms[t] = norm\n        \n    return {\"lambda2\": lambda2, \"norms\": norms}\n\nsolve()\n```"
        }
    ]
}
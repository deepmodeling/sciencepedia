{
    "hands_on_practices": [
        {
            "introduction": "一个常见的问题是，为什么不简单地将多层网络的各层合并成一个单一的聚合网络呢？这个练习直接回答了这个问题，它揭示了这种聚合方法的潜在缺陷。通过计算一个具体的反例中的特征向量中心性，您将亲手证明节点的重要性排名在聚合视图和多层视图中会发生反转 ，从而深刻理解保留层信息的必要性。",
            "id": "4131650",
            "problem": "考虑一个多层网络，其包含两个层，定义在相同的节点集 $\\{1,2,3\\}$ 上。在每个层中，拓扑结构是一个加权路径：节点 $1$ 与节点 $2$ 相连，权重为 $a$；节点 $2$ 与节点 $3$ 相连，权重为 $b$，无其他边。具有权重 $a$ 和 $b$ 的单层邻接矩阵为\n$$\nA(a,b) \\;=\\; \\begin{pmatrix}\n0  a  0 \\\\\na  0  b \\\\\n0  b  0\n\\end{pmatrix}.\n$$\n设层 $1$ 的权重为 $a_{1} = 2.5$ 和 $b_{1} = 1$，层 $2$ 的权重为 $a_{2} = 0.2$ 和 $b_{2} = 2.6$。将聚合特征向量中心性（EC）定义为聚合邻接矩阵 $A^{\\mathrm{agg}} = A(a_{1},b_{1}) + A(a_{2},b_{2})$ 的主特征向量，并将多层EC定义如下：构造超邻接矩阵\n$$\n\\mathcal{A}(\\omega) \\;=\\; \\begin{pmatrix}\nA(a_{1},b_{1})  \\omega I \\\\\n\\omega I  A(a_{2},b_{2})\n\\end{pmatrix},\n$$\n其中 $I$ 是 $3 \\times 3$ 的单位矩阵，$\\omega \\ge 0$ 是一个层间耦合参数。节点 $i$ 的多层EC是 $\\mathcal{A}(\\omega)$ 的主特征向量中对应于节点 $i$ 在两个层上的分量之和。假设处于极端弱耦合情况 $\\omega = 0$。\n\n从对称邻接矩阵 $A$ 的特征向量中心性（EC）的定义出发（即对于谱半径 $\\lambda$，满足 $A x = \\lambda x$ 的正特征向量 $x$），请从基本定义推导出该路径拓扑的逐节点EC比率。利用这些推导，通过在上述定义下（$\\omega=0$）明确比较给定双层网络中节点 $1$ 与节点 $3$ 的排序，来证明聚合EC相对于多层EC可能错误地对节点进行排序。然后，计算翻转因子\n$$\nI \\;=\\; \\left(\\frac{x^{\\mathrm{agg}}_{3}}{x^{\\mathrm{agg}}_{1}}\\right) \\Big/ \\left(\\frac{x^{\\mathrm{mux}}_{3}}{x^{\\mathrm{mux}}_{1}}\\right),\n$$\n其中 $x^{\\mathrm{agg}}_{i}$ 表示节点 $i$ 的聚合EC，$x^{\\mathrm{mux}}_{i}$ 表示节点 $i$ 的多层EC。将 $I$ 表示为一个精确数。无需四舍五入。本题不涉及物理单位。",
            "solution": "该问题提法明确，具有科学依据，并包含推导唯一解所需的所有信息。我们依次解决问题的各个部分。\n\n首先，我们推导具有邻接矩阵的通用3节点路径拓扑的特征向量中心性（EC）比率\n$$\nA(a,b) = \\begin{pmatrix} 0  a  0 \\\\ a  0  b \\\\ 0  b  0 \\end{pmatrix}\n$$\n其中 $a > 0$ 且 $b > 0$。特征向量中心性向量 $x = (x_1, x_2, x_3)^T$ 是 $A$ 的主特征向量，满足方程 $A x = \\lambda x$，其中 $\\lambda$ 是 $A$ 的谱半径。我们首先通过求解特征方程 $\\det(A - \\lambda I) = 0$ 来找到特征值。\n$$\n\\det\\begin{pmatrix} -\\lambda  a  0 \\\\ a  -\\lambda  b \\\\ 0  b  -\\lambda \\end{pmatrix} = -\\lambda(\\lambda^2 - b^2) - a(-a\\lambda) = -\\lambda^3 + \\lambda b^2 + a^2 \\lambda = -\\lambda(\\lambda^2 - (a^2+b^2)) = 0\n$$\n特征值为 $\\lambda_1 = \\sqrt{a^2+b^2}$、$\\lambda_2 = 0$ 和 $\\lambda_3 = -\\sqrt{a^2+b^2}$。谱半径是特征值的最大绝对值，即 $\\lambda_{\\max} = \\sqrt{a^2+b^2}$。\n\n现在我们求 $\\lambda = \\lambda_{\\max}$ 对应的特征向量 $x$：\n$$\n\\begin{pmatrix} 0  a  0 \\\\ a  0  b \\\\ 0  b  0 \\end{pmatrix} \\begin{pmatrix} x_1 \\\\ x_2 \\\\ x_3 \\end{pmatrix} = \\lambda_{\\max} \\begin{pmatrix} x_1 \\\\ x_2 \\\\ x_3 \\end{pmatrix}\n$$\n这给出了线性方程组：\n1.  $a x_2 = \\lambda_{\\max} x_1$\n2.  $a x_1 + b x_3 = \\lambda_{\\max} x_2$\n3.  $b x_2 = \\lambda_{\\max} x_3$\n\n从方程(1)，我们得到 $x_1 = \\frac{a}{\\lambda_{\\max}} x_2$。\n从方程(3)，我们得到 $x_3 = \\frac{b}{\\lambda_{\\max}} x_2$。\n根据非负矩阵的Perron-Frobenius定理，主特征向量可以选择具有严格正分量，因此 $x_2 \\neq 0$。节点 $3$ 和节点 $1$ 的中心性之比为：\n$$\n\\frac{x_3}{x_1} = \\frac{\\frac{b}{\\lambda_{\\max}} x_2}{\\frac{a}{\\lambda_{\\max}} x_2} = \\frac{b}{a}\n$$\n这表明，对于此路径拓扑，两个端点节点的特征向量中心性之比等于它们各自到中心节点的连接权重之比。完整的特征向量与 $(a, \\lambda_{\\max}, b)^T$ 成正比，即 $(a, \\sqrt{a^2+b^2}, b)^T$。\n\n接下来，我们计算聚合特征向量中心性。聚合邻接矩阵 $A^{\\mathrm{agg}}$ 是各层邻接矩阵之和：\n$$\nA^{\\mathrm{agg}} = A(a_{1},b_{1}) + A(a_{2},b_{2}) = \\begin{pmatrix} 0  a_1  0 \\\\ a_1  0  b_1 \\\\ 0  b_1  0 \\end{pmatrix} + \\begin{pmatrix} 0  a_2  0 \\\\ a_2  0  b_2 \\\\ 0  b_2  0 \\end{pmatrix} = \\begin{pmatrix} 0  a_1+a_2  0 \\\\ a_1+a_2  0  b_1+b_2 \\\\ 0  b_1+b_2  0 \\end{pmatrix}\n$$\n该聚合矩阵的形式为 $A(a_{\\mathrm{agg}}, b_{\\mathrm{agg}})$，其中 $a_{\\mathrm{agg}} = a_1+a_2$ 且 $b_{\\mathrm{agg}} = b_1+b_2$。\n使用给定值 $a_1 = 2.5$，$b_1 = 1$，$a_2 = 0.2$ 和 $b_2 = 2.6$：\n$a_{\\mathrm{agg}} = 2.5 + 0.2 = 2.7$\n$b_{\\mathrm{agg}} = 1 + 2.6 = 3.6$\n使用我们推导的公式，节点 $3$ 和 $1$ 的聚合EC之比为：\n$$\n\\frac{x^{\\mathrm{agg}}_{3}}{x^{\\mathrm{agg}}_{1}} = \\frac{b_{\\mathrm{agg}}}{a_{\\mathrm{agg}}} = \\frac{3.6}{2.7} = \\frac{36}{27} = \\frac{4}{3}\n$$\n由于 $\\frac{4}{3} > 1$，对于聚合网络，$x^{\\mathrm{agg}}_{3} > x^{\\mathrm{agg}}_{1}$，意味着节点 $3$ 的中心性排名高于节点 $1$。\n\n现在，我们计算多层特征向量中心性。超邻接矩阵由下式给出：\n$$\n\\mathcal{A}(\\omega) = \\begin{pmatrix} A(a_{1},b_{1})  \\omega I \\\\ \\omega I  A(a_{2},b_{2}) \\end{pmatrix}\n$$\n我们处于极端弱耦合情况，$\\omega=0$。矩阵变为块对角矩阵：\n$$\n\\mathcal{A}(0) = \\begin{pmatrix} A(a_{1},b_{1})  \\mathbf{0} \\\\ \\mathbf{0}  A(a_{2},b_{2}) \\end{pmatrix}\n$$\n块对角矩阵的特征值是其各块特征值的并集。设 $\\lambda_{\\max}^{(1)}$ 和 $\\lambda_{\\max}^{(2)}$ 分别是 $A(a_1,b_1)$ 和 $A(a_2,b_2)$ 的谱半径。\n$\\lambda_{\\max}^{(1)} = \\sqrt{a_1^2 + b_1^2} = \\sqrt{(2.5)^2 + 1^2} = \\sqrt{6.25 + 1} = \\sqrt{7.25}$\n$\\lambda_{\\max}^{(2)} = \\sqrt{a_2^2 + b_2^2} = \\sqrt{(0.2)^2 + (2.6)^2} = \\sqrt{0.04 + 6.76} = \\sqrt{6.8}$\n$\\mathcal{A}(0)$ 的谱半径是 $\\lambda_{\\max} = \\max(\\lambda_{\\max}^{(1)}, \\lambda_{\\max}^{(2)}) = \\sqrt{7.25} = \\lambda_{\\max}^{(1)}$。\n$\\mathcal{A}(0)$ 的主特征向量 $\\mathbf{x}_{\\mathrm{mux}}$ 具有块结构 $\\mathbf{x}_{\\mathrm{mux}} = (x^{(1)}, x^{(2)})^T$。特征向量方程 $\\mathcal{A}(0)\\mathbf{x}_{\\mathrm{mux}} = \\lambda_{\\max}\\mathbf{x}_{\\mathrm{mux}}$ 解耦为：\n$A(a_1, b_1) x^{(1)} = \\lambda_{\\max} x^{(1)} = \\lambda_{\\max}^{(1)} x^{(1)}$\n$A(a_2, b_2) x^{(2)} = \\lambda_{\\max} x^{(2)} = \\lambda_{\\max}^{(1)} x^{(2)}$\n第一个方程意味着 $x^{(1)}$ 是 $A(a_1, b_1)$ 的主特征向量。由于 $\\lambda_{\\max}^{(1)} \\neq \\lambda_{\\max}^{(2)}$，$\\lambda_{\\max}^{(1)}$ 不是 $A(a_2,b_2)$ 的特征值，因此第二个方程的唯一解是 $x^{(2)} = \\mathbf{0}$。\n因此，$\\mathcal{A}(0)$ 的主特征向量完全局域在层 $1$ 上。\n节点 $i$ 的多层EC，$x_i^{\\mathrm{mux}}$，是对应于节点 $i$ 的跨层分量之和。由于 $x^{(2)}=\\mathbf{0}$，我们有 $x_i^{\\mathrm{mux}} = x_i^{(1)} + x_i^{(2)} = x_i^{(1)}$。\n多层EC与主导层（层 $1$）的EC相同。\n使用我们关于层 $1$ 上EC比率的一般公式：\n$$\n\\frac{x^{\\mathrm{mux}}_{3}}{x^{\\mathrm{mux}}_{1}} = \\frac{x^{(1)}_{3}}{x^{(1)}_{1}} = \\frac{b_1}{a_1} = \\frac{1}{2.5} = \\frac{2}{5}\n$$\n由于 $\\frac{2}{5}  1$，对于多层网络，$x^{\\mathrm{mux}}_{1} > x^{\\mathrm{mux}}_{3}$，意味着节点 $1$ 的中心性排名高于节点 $3$。这与使用聚合网络得到的排名相反。\n\n最后，我们计算翻转因子 $I$：\n$$\nI = \\left(\\frac{x^{\\mathrm{agg}}_{3}}{x^{\\mathrm{agg}}_{1}}\\right) \\Big/ \\left(\\frac{x^{\\mathrm{mux}}_{3}}{x^{\\mathrm{mux}}_{1}}\\right)\n$$\n代入我们计算出的值：\n$$\nI = \\frac{4/3}{2/5} = \\frac{4}{3} \\times \\frac{5}{2} = \\frac{20}{6} = \\frac{10}{3}\n$$\n翻转因子的值是一个精确的有理数。",
            "answer": "$$\n\\boxed{\\frac{10}{3}}\n$$"
        },
        {
            "introduction": "社区发现是网络科学中的一项核心任务，旨在识别网络中的紧密连接的节点群组。在多层网络中，这项任务变得更加复杂：一个理想的社区结构应该在多大程度上反映单层内的拓扑，又应该在多大程度上保持跨层的一致性？本练习通过计算多层模块度，让您量化地探索层内结构与跨层持久性之间的权衡，并理解层间耦合参数 $\\omega$ 如何调节这种平衡 。",
            "id": "4289169",
            "problem": "考虑一个具有两层（$L=2$）和六个节点（$N=6$）的多层网络。每层都是一个无向、无权图，构建在相同的标记节点集 $\\{1,2,3,4,5,6\\}$ 上。层间耦合是对角耦合：每个节点都与其在不同层中的对应节点相连，权重为 $\\omega \\geq 0$。\n\n第 $1$ 层由两个不相交的三角形组成：一个在节点 $\\{1,2,3\\}$ 上，另一个在节点 $\\{4,5,6\\}$ 上；也就是说，第 $1$ 层的层内边是 $\\{(1,2),(2,3),(1,3)\\}$ 和 $\\{(4,5),(5,6),(4,6)\\}$。第 $2$ 层由两个不相交的三角形组成：一个在节点 $\\{1,2,4\\}$ 上，另一个在节点 $\\{3,5,6\\}$ 上；也就是说，第 $2$ 层的层内边是 $\\{(1,2),(2,4),(1,4)\\}$ 和 $\\{(3,5),(5,6),(3,6)\\}$。\n\n在每层内采用标准的 Newman–Girvan (NG) 零模型，所有层的分辨率参数 $\\gamma=1$，并使用上述权重为 $\\omega$ 的对角层间耦合。令 $Q(\\omega)$ 表示在这些选择下一个社群划分的多层模块度。\n\n对以下两种候选多层社群划分，分别评估其 $Q(\\omega)$：\n\n- 候选方案 $\\mathcal{C}$（跨层一致）：在两层中分配相同的两个社群，即 $C_{1}=\\{1,2,3\\}$ 和 $C_{2}=\\{4,5,6\\}$。\n- 候选方案 $\\mathcal{A}$（每层自适应）：在第 $1$ 层中分配社群 $C_{1}^{(1)}=\\{1,2,3\\}$ 和 $C_{2}^{(1)}=\\{4,5,6\\}$；在第 $2$ 层中分配社群 $C_{1}^{(2)}=\\{1,2,4\\}$ 和 $C_{2}^{(2)}=\\{3,5,6\\}$。\n\n仅使用单层模块度的基本定义及其对角层间耦合的多层扩展，计算当两种候选划分产生相等的多层模块度 $Q_{\\mathcal{C}}(\\omega^{\\star})=Q_{\\mathcal{A}}(\\omega^{\\star})$ 时，层间耦合权重 $\\omega^{\\star}$ 的精确值。将最终答案表示为一个精确的实数。无需四舍五入。",
            "solution": "该问题要求我们找到层间耦合权重 $\\omega^{\\star}$，在该权重下，两种不同的多层社群划分 $\\mathcal{C}$ 和 $\\mathcal{A}$ 具有相同的多层模块度 $Q$。我们首先陈述一个具有 $L$ 层、$N$ 个节点和对角层间耦合的网络的多层模块度的一般公式。\n\n多层模块度 $Q$ 由以下公式给出：\n$$Q = \\frac{1}{2\\mu} \\sum_{i,j,s,r} \\left[ \\left(A_{ijs} - \\gamma_s \\frac{k_{is}k_{js}}{2m_s}\\right)\\delta_{sr} + \\delta_{ij} C_{jsr} \\right] \\delta(c_{is}, c_{jr})$$\n其中 $A_{ijs}$ 是第 $s$ 层中节点 $i,j$ 的邻接矩阵元素，$k_{is}$ 是第 $s$ 层中节点 $i$ 的度，$m_s = \\frac{1}{2}\\sum_i k_{is}$ 是第 $s$ 层中的总边数，$\\gamma_s$ 是第 $s$ 层的分辨率参数。项 $c_{is}$ 表示第 $s$ 层中节点 $i$ 的社群分配，如果它们属于同一个社群，则 $\\delta(c_{is}, c_{jr})$ 为 $1$，否则为 $0$。项 $C_{jsr}$ 表示第 $s$ 层中的节点 $j$ 与第 $r$ 层中的节点 $j$ 之间的层间边的权重。根据问题陈述，我们有无向的层间连接，因此 $C_{jsr} = C_{jrs}$。对于这个问题，我们有权重为 $\\omega$ 的对角耦合，因此当 $s \\neq r$ 时 $C_{jsr} = \\omega$，且 $C_{jss} = 0$。归一化因子 $2\\mu$ 是多层网络中的总边权重，由 $2\\mu = \\sum_{js} k_{js} + \\sum_{j,s,r} C_{jsr} = \\sum_s 2m_s + \\sum_{j, s \\neq r} C_{jsr}$ 给出。\n\n我们可以将求和分解为层内（$s=r$）和层间（$s \\neq r$）的贡献：\n$$Q = \\frac{1}{2\\mu} \\left[ \\sum_s \\sum_{i,j} \\left(A_{ijs} - \\gamma_s \\frac{k_{is}k_{js}}{2m_s}\\right)\\delta(c_{is}, c_{js}) + \\sum_{j, s \\neq r} C_{jsr} \\delta(c_{js}, c_{jr}) \\right]$$\n第一项是单层模块度的总和。令 $Q_s$ 为第 $s$ 层在划分 $\\{c_{js}\\}_{j=1}^N$ 下的单层模块度。那么 $\\sum_{i,j} (A_{ijs} - \\gamma_s \\frac{k_{is}k_{js}}{2m_s})\\delta(c_{is}, c_{js}) = 2m_s Q_s$。\n对于 $L=2$ 层，$\\gamma_s=1$，且 $C_{j12}=C_{j21}=\\omega$，公式变为：\n$$Q = \\frac{1}{2\\mu} \\left( 2m_1 Q_1 + 2m_2 Q_2 + 2\\omega \\sum_{j=1}^N \\delta(c_{j1}, c_{j2}) \\right)$$\n项 $\\sum_{j=1}^N \\delta(c_{j1}, c_{j2})$ 计算在两层中被分配到相同社群标签的节点数量。\n\n首先，我们计算给定网络层的属性。\n- 节点数 $N=6$。层数 $L=2$。\n- **第 1 层**：在 $\\{1,2,3\\}$ 和 $\\{4,5,6\\}$ 上有两个不相交的三角形。边数为 $m_1 = 3+3=6$。对于所有 $i \\in \\{1, \\dots, 6\\}$，每个节点的度为 $k_{i1}=2$。因此，$2m_1 = \\sum_i k_{i1} = 6 \\times 2 = 12$。\n- **第 2 层**：在 $\\{1,2,4\\}$ 和 $\\{3,5,6\\}$ 上有两个不相交的三角形。边数为 $m_2 = 3+3=6$。对于所有 $i \\in \\{1, \\dots, 6\\}$，每个节点的度为 $k_{i2}=2$。因此，$2m_2 = \\sum_i k_{i2} = 6 \\times 2 = 12$。\n\n总归一化因子为 $2\\mu = 2m_1 + 2m_2 + \\sum_{j, s \\neq r} C_{jsr} = 12 + 12 + \\sum_{j=1}^6 (C_{j12}+C_{j21}) = 24 + \\sum_{j=1}^6 (\\omega+\\omega) = 24 + 12\\omega$。\n\n现在我们为每个候选划分评估 $Q(\\omega)$。\n\n**候选方案 $\\mathcal{C}$（一致划分）：**\n在两层中，社群均为 $C_1=\\{1,2,3\\}$ 和 $C_2=\\{4,5,6\\}$。\n- **第 1 层：** 划分 $C_{1}^{(1)}=\\{1,2,3\\}, C_{2}^{(1)}=\\{4,5,6\\}$ 对应于连通分量。模块度是最大的。\n对于社群 $C_1^{(1)}$，度的总和是 $K_1 = k_{11}+k_{21}+k_{31} = 2+2+2=6$。内部边数为 $l_1=3$。\n对于社群 $C_2^{(1)}$，度的总和是 $K_2 = k_{41}+k_{51}+k_{61} = 2+2+2=6$。内部边数为 $l_2=3$。\n单层模块度 $Q_1^{(\\mathcal{C})} = \\frac{1}{2m_1} \\sum_{c=1}^2 (2l_c - \\frac{K_c^2}{2m_1}) = \\frac{1}{12} \\left[ (2\\cdot3 - \\frac{6^2}{12}) + (2\\cdot3 - \\frac{6^2}{12}) \\right] = \\frac{1}{12}[(6-3)+(6-3)] = \\frac{6}{12} = \\frac{1}{2}$。\n- **第 2 层：** 划分为 $C_{1}^{(2)}=\\{1,2,3\\}, C_{2}^{(2)}=\\{4,5,6\\}$。\n对于社群 $C_1^{(2)}$，节点为 $\\{1,2,3\\}$。在第 2 层中，此集合内的唯一边是 $(1,2)$，所以 $l_1=1$。度的总和是 $K_1=k_{12}+k_{22}+k_{32}=2+2+2=6$。\n对于社群 $C_2^{(2)}$，节点为 $\\{4,5,6\\}$。在第 2 层中，此集合内的唯一边是 $(5,6)$，所以 $l_2=1$。度的总和是 $K_2=k_{42}+k_{52}+k_{62}=2+2+2=6$。\n单层模块度 $Q_2^{(\\mathcal{C})} = \\frac{1}{12} \\left[ (2\\cdot1 - \\frac{6^2}{12}) + (2\\cdot1 - \\frac{6^2}{12}) \\right] = \\frac{1}{12}[(2-3)+(2-3)] = \\frac{-2}{12} = -\\frac{1}{6}$。\n- **层间项：** 社群分配在各层之间是相同的，因此对于所有 $j=1,\\dots,6$，都有 $c_{j1}=c_{j2}$。一致的节点数为 $6$。\n- **总模块度 $Q_{\\mathcal{C}}(\\omega)$：**\n$Q_{\\mathcal{C}}(\\omega) = \\frac{1}{24+12\\omega} \\left( 2m_1 Q_1^{(\\mathcal{C})} + 2m_2 Q_2^{(\\mathcal{C})} + 2\\omega \\cdot 6 \\right) = \\frac{1}{24+12\\omega} \\left( 12 \\cdot \\frac{1}{2} + 12 \\cdot (-\\frac{1}{6}) + 12\\omega \\right) = \\frac{6-2+12\\omega}{24+12\\omega} = \\frac{4+12\\omega}{24+12\\omega}$。\n\n**候选方案 $\\mathcal{A}$（自适应划分）：**\n第 1 层社群：$C_{1}^{(1)}=\\{1,2,3\\}, C_{2}^{(1)}=\\{4,5,6\\}$。第 2 层社群：$C_{1}^{(2)}=\\{1,2,4\\}, C_{2}^{(2)}=\\{3,5,6\\}$。\n- **第 1 层：** 划分与 $\\mathcal{C}$ 中的相同。因此，$Q_1^{(\\mathcal{A})} = Q_1^{(\\mathcal{C})} = \\frac{1}{2}$。\n- **第 2 层：** 划分 $C_{1}^{(2)}=\\{1,2,4\\}, C_{2}^{(2)}=\\{3,5,6\\}$ 对应于第 2 层的连通分量。通过与第 1 层的对称性，模块度将是最大的。\n$Q_2^{(\\mathcal{A})} = \\frac{1}{2m_2} \\sum_{c=1}^2 (2l_c - \\frac{K_c^2}{2m_2}) = \\frac{1}{12} \\left[ (2\\cdot3 - \\frac{6^2}{12}) + (2\\cdot3 - \\frac{6^2}{12}) \\right] = \\frac{1}{12}[(6-3)+(6-3)] = \\frac{6}{12} = \\frac{1}{2}$。\n- **层间项：** 我们计算满足 $c_{j1}=c_{j2}$ 的节点 $j$ 的数量。\n  - 节点 1：$c_{11}=1, c_{12}=1$。一致。\n  - 节点 2：$c_{21}=1, c_{22}=1$。一致。\n  - 节点 3：$c_{31}=1, c_{32}=2$。不一致。\n  - 节点 4：$c_{41}=2, c_{42}=1$。不一致。\n  - 节点 5：$c_{51}=2, c_{52}=2$。一致。\n  - 节点 6：$c_{61}=2, c_{62}=2$。一致。\n一致的节点数为 $4$。\n- **总模块度 $Q_{\\mathcal{A}}(\\omega)$：**\n$Q_{\\mathcal{A}}(\\omega) = \\frac{1}{24+12\\omega} \\left( 2m_1 Q_1^{(\\mathcal{A})} + 2m_2 Q_2^{(\\mathcal{A})} + 2\\omega \\cdot 4 \\right) = \\frac{1}{24+12\\omega} \\left( 12 \\cdot \\frac{1}{2} + 12 \\cdot \\frac{1}{2} + 8\\omega \\right) = \\frac{6+6+8\\omega}{24+12\\omega} = \\frac{12+8\\omega}{24+12\\omega}$。\n\n**求 $\\omega^{\\star}$：**\n我们令 $Q_{\\mathcal{C}}(\\omega^{\\star}) = Q_{\\mathcal{A}}(\\omega^{\\star})$：\n$$\\frac{4+12\\omega^{\\star}}{24+12\\omega^{\\star}} = \\frac{12+8\\omega^{\\star}}{24+12\\omega^{\\star}}$$\n由于 $\\omega \\geq 0$，分母 $24+12\\omega^{\\star}$ 严格为正，可以消去。\n$$4+12\\omega^{\\star} = 12+8\\omega^{\\star}$$\n$$4\\omega^{\\star} = 8$$\n$$\\omega^{\\star} = 2$$\n当两种候选划分产生相等的多层模块度时，层间耦合权重的值为 $\\omega^{\\star}=2$。",
            "answer": "$$\\boxed{2}$$"
        },
        {
            "introduction": "真实世界的网络很少是静态的；它们的连接往往随时间演化。本练习将静态的多层网络模型扩展到时序网络领域，这是一个更具挑战性但也更贴近现实的场景。您将需要实现一个算法，在考虑层内连接的时变特性和跨层切换的成本后，找出在网络中从一个节点到另一个节点的最早到达路径 。",
            "id": "4289129",
            "problem": "给定一个建模为超图的时间调度多重网络。设节点集为 $\\mathcal{V}$，层集为 $\\mathcal{L}$。每个超节点是一个对 $(v,\\ell)$，其中 $v \\in \\mathcal{V}$ 且 $\\ell \\in \\mathcal{L}$。层内连接是具有有限调度事件集合的有向、时间依赖边，每个事件由一个出发时间和穿越时长指定。在同一物理节点上的层间连接代表层切换，其等待成本会增加切换层时的时间。\n\n基本基础和定义：\n- 时间可行路径是一个超节点和边的序列，沿路径的出发时间是非递减的。如果您在时间 $t$ 到达层 $\\ell$ 中的一个层内边 $(u \\to v)$，您可以从该边的调度表中选择下一个出发时间 $d \\ge t$ 的班次，然后在 $d + \\tau$ 到达，其中 $\\tau$ 是该班次的穿越时长。如果不存在这样的出发班次，则该边在时间 $t$ 不可用。\n- 层间耦合通过连接 $(v,\\ell_i)$ 和 $(v,\\ell_j)$ 的层间边建模，它会将时间增加一个等待成本 $w$，因此在时间 $t$ 进行的切换会得到时间 $t+w$。\n- 从源节点 $s$（在指定的起始层 $\\ell_0$）于时间 $t_0$ 出发，到目标节点 $t$ 的最早到达时间，是在超图上所有终点为节点 $t$ 的任意层的、时间可行路径的到达时间的下确界。如果不存在时间可行路径，则最早到达时间为 $+\\infty$。\n- 您必须假设先进先出（FIFO）属性，即对于每个层内边，到达时间函数相对于出发时间是非递减的。\n\n您的任务是在超图上实现一个标签设置算法，以计算从 $(s,\\ell_0)$ 在时间 $t_0$ 出发到任何 $(t,\\ell)$（其中 $\\ell \\in \\mathcal{L}$）的最早到达时间，并确定在有限时间范围 $T_{\\max}$ 内的可达性（如果最早到达时间小于或等于 $T_{\\max}$，则可达）。允许在节点等待未来的出发班次，这会影响到达时间；切换层会产生层间成本 $w$。\n\n网络规格（使用这些确切的调度）：\n- 节点集 $\\mathcal{V} = \\{A,B,C\\}$。\n- 层集 $\\mathcal{L} = \\{L1,L2\\}$。\n- 所有测试用例的起始层均为 $\\ell_0 = L1$。\n- 层内调度：\n  - 层 $L1$：\n    - 边 $(A \\to B)$ 的出发时间和持续时间：$(1,2)$ 和 $(6,1)$，意味着在 $t=1$ 出发，持续时间为 $2$，以及在 $t=6$ 出发，持续时间为 $1$。\n    - 边 $(B \\to C)$ 的出发时间和持续时间：$(4,3)$ 和 $(10,1)$。\n  - 层 $L2$：\n    - 边 $(A \\to C)$ 的出发时间和持续时间：$(2,6)$ 和 $(7,2)$。\n    - 边 $(C \\to B)$ 的出发时间和持续时间：$(0,10)$ 和 $(9,1)$。\n- 没有其他层内边，并且在任何具有相同物理节点 $v$ 的 $(v,L1)$ 和 $(v,L2)$ 之间都允许层间切换，成本为 $w$。\n\n实现该算法，为每个测试用例计算最早到达时间 $\\mathrm{EA}(s,t;\\ell_0,t_0,w)$ 和在 $T_{\\max}$ 内的可达性布尔值。程序必须以与输入调度相同的时间单位输出结果，格式为浮点数，可达性布尔值必须是 True 或 False。如果没有时间可行路径，最早到达时间使用 $+\\infty$。\n\n测试套件（每个测试用例为 $(s,t_0,t,w,T_{\\max})$，所有符号和数字均已指定）：\n- 用例 1：$(A, 0, C, 0, 20)$。\n- 用例 2：$(A, 0, C, 2, 20)$。\n- 用例 3：$(A, 5, C, 0, 20)$。\n- 用例 4：$(A, 8, C, 0, 10)$。\n- 用例 5：$(B, 3, B, 1.5, 3)$。\n- 用例 6：$(A, 5, C, 3.5, 10)$。\n\n您的程序应生成单行输出，包含一个由方括号括起来的逗号分隔列表，其中每个元素对应一个测试用例，本身是一个双元素列表 $[\\mathrm{EA}, \\mathrm{reachable}]$。例如，格式必须类似于 $[[x_1,y_1],[x_2,y_2],\\dots]$，其中每个 $x_i$ 是一个浮点数（或 $+\\infty$），每个 $y_i$ 是一个布尔值。",
            "solution": "用户提供的问题是一个关于时间多重网络上最早到达时间问题的良定实例。该问题在网络科学领域有其科学基础，并且其所有组成部分——超图模型、时间可行路径和标签设置算法——都是标准且严格定义的。所提供的数据是完整的、自洽的，并且足以推导出每个测试用例的唯一解。\n\n该问题要求计算从一个源超节点 $(s, \\ell_0)$ 在给定的开始时间 $t_0$ 出发，到达目标物理节点 $t$ 的任意层的最早到达时间。这等价于超图上的一个最短路径问题，其中路径的“长度”是到达时间。问题指定了一个标签设置算法，在非负边权（时间总是向前推进）的背景下，这指向了 Dijkstra 算法的一个变体。对先进先出（FIFO）属性的明确假设保证了像 Dijkstra 这样的贪心方法将得出最优解。\n\n该算法将在超图上运行，其中每个节点是一个对 $(v, \\ell)$，满足 $v \\in \\mathcal{V} = \\{\\text{A}, \\text{B}, \\text{C}\\}$ 且 $\\ell \\in \\mathcal{L} = \\{\\text{L1}, \\text{L2}\\}$。我们搜索中的状态是一个元组 $(t_{arr}, v, \\ell)$，表示在时间 $t_{arr}$ 到达超节点 $(v, \\ell)$。\n\n算法流程如下：\n1.  **初始化**：\n    - 创建一个距离字典 $\\text{EA}$，用于存储每个超节点 $(v, \\ell)$ 的已知最早到达时间。所有条目都初始化为 $+\\infty$。\n    - 对于源超节点 $(s, \\ell_0)$，到达时间设置为开始时间：$\\text{EA}[(s, \\ell_0)] = t_0$。\n    - 一个最小优先队列 $Q$ 用起始状态 $(t_0, s, \\ell_0)$ 进行初始化。该队列将存储（当前时间，物理节点，层）的元组，并按时间排序。\n\n2.  **主循环**：\n    - 当优先队列 $Q$ 不为空时，提取具有最小时间的状态 $(t_{curr}, u, \\ell_u)$。\n    - 如果 $t_{curr} > \\text{EA}[(u, \\ell_u)]$，这意味着已经找到了通往 $(u, \\ell_u)$ 的更短路径。我们丢弃此状态并继续。\n\n3.  **邻居探索（松弛操作）**：\n   对于当前时间 $t_{curr}$ 的超节点 $(u, \\ell_u)$，我们探索所有可能的后续事件：\n   a. **层内遍历**：对于当前层 $\\ell_u$ 中的每个有向边 $(u \\to v)$，我们找到最早的可能出发班次。给定该边的出发和持续时间表 $\\{(d_i, \\tau_i)\\}$，我们找到第一个满足 $d_k \\ge t_{curr}$ 的出发班次 $d_k$。\n      - 如果存在这样的出发班次，则到达目标超节点 $(v, \\ell_u)$ 的新到达时间为 $t_{new} = d_k + \\tau_k$。\n      - 如果 $t_{new}  \\text{EA}[(v, \\ell_u)]$，我们找到了一个更快的路径。我们更新 $\\text{EA}[(v, \\ell_u)] = t_{new}$ 并将新状态 $(t_{new}, v, \\ell_u)$ 添加到优先队列 $Q$ 中。\n   b. **层间切换**：在物理节点 $u$ 上，我们可以从当前层 $\\ell_u$ 切换到任何其他层 $\\ell_v \\neq \\ell_u$。此操作的时间成本为 $w$。\n      - 在超节点 $(u, \\ell_v)$ 的新到达时间为 $t_{new} = t_{curr} + w$。\n      - 如果 $t_{new}  \\text{EA}[(u, \\ell_v)]$，我们更新 $\\text{EA}[(u, \\ell_v)] = t_{new}$ 并将 $(t_{new}, u, \\ell_v)$ 添加到 $Q$ 中。\n\n4.  **终止与最终答案**：\n    - 当优先队列 $Q$ 为空时，算法终止。字典 $\\text{EA}$ 现在包含从 $(s, \\ell_0)$ 在时间 $t_0$ 出发到每个可达超节点的最早到达时间。\n    - 到达目标物理节点 $t$ 的最早到达时间是其所有可能层上的到达时间的最小值：$\\mathrm{EA}(s, t; \\ell_0, t_0, w) = \\min_{\\ell \\in \\mathcal{L}} \\text{EA}[(t, \\ell)]$。如果节点 $t$ 从源节点不可达，此值将保持为 $+\\infty$。\n    - 在时间范围 $T_{\\max}$ 内的可达性由条件 $\\mathrm{EA}(s, t; \\ell_0, t_0, w) \\le T_{\\max}$ 确定。\n\n该算法通过按到达时间的升序系统地探索所有时间可行路径，从而正确地找到最早到达时间，保证了最优性。",
            "answer": "[[7.0, True],[7.0, True],[9.0, True],[inf, False],[10.0, False],[11.0, False]]"
        }
    ]
}
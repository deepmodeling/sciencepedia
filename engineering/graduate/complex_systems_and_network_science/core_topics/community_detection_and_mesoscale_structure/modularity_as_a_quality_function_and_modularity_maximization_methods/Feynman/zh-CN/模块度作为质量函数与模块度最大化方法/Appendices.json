{
    "hands_on_practices": [
        {
            "introduction": "本练习旨在检验你对模块度基本定义的理解。通过为一个具有清晰直观社团结构（由一座桥连接的两个团簇）的网络计算模块度，你将亲眼见证该公式如何量化我们关于良好划分的直观感受。这个计算练习将帮助你巩固对模块度公式中各项的理解，包括内部边、社团总度数和零模型期望。",
            "id": "4288126",
            "problem": "考虑一个简单无向无权图 $G$。该图由两个团 $K_{n_1}$ 和 $K_{n_2}$（其中 $n_1 \\geq 2$ 且 $n_2 \\geq 2$）构成，并通过在 $K_{n_1}$ 中的一个指定顶点 $u$ 和 $K_{n_2}$ 中的一个指定顶点 $v$ 之间添加一条桥边连接而成。令 $Q$ 表示在配置模型零系综下的模块度。对于将 $K_{n_1}$ 的所有顶点放入一个社团、将 $K_{n_2}$ 的所有顶点放入第二个社团的划分 $\\mathcal{P}_{\\mathrm{sep}}$，以及将图 $G$ 的所有顶点都放入单个社团的划分 $\\mathcal{P}_{\\mathrm{all}}$，分别计算 $Q$ 的值。请提供 $Q(\\mathcal{P}_{\\mathrm{sep}}) - Q(\\mathcal{P}_{\\mathrm{all}})$ 的最终答案，形式为关于 $n_1$ 和 $n_2$ 的单个闭式解析表达式。无需四舍五入，且不涉及物理单位。",
            "solution": "用户提供的问题已经过分析，被认定为有效。这是一个网络科学领域内的适定且有科学依据的问题，没有事实错误、歧义或信息缺失。因此，我们可以进行正式求解。\n\n网络划分的模块度 $Q$ 定义为：在给定社团内部的边所占的比例，减去在保持顶点度数不变的情况下随机分布边时，社团内部边所占的期望比例。对于一个无权无向图，在配置模型零系综下的模块度由以下公式给出：\n$$\nQ = \\frac{1}{2m} \\sum_{i,j} \\left( A_{ij} - \\frac{k_i k_j}{2m} \\right) \\delta(c_i, c_j)\n$$\n其中 $m$ 是图中的边总数，$A$ 是邻接矩阵，$k_i$ 是顶点 $i$ 的度，$c_i$ 是顶点 $i$ 所属的社团，而 $\\delta(c_i, c_j)$ 是克罗内克δ函数，当 $c_i = c_j$ 时为 $1$，否则为 $0$。\n\n首先，我们描述图 $G$ 的特征。它由两个团 $K_{n_1}$ 和 $K_{n_2}$ 构成，由一条桥边连接。\n一个团 $K_n$ 中的边数为 $\\binom{n}{2} = \\frac{n(n-1)}{2}$。\n图 $G$ 中的总边数 $m$ 是 $K_{n_1}$ 中的边数、$K_{n_2}$ 中的边数以及一条桥边之和。\n$$\nm = \\frac{n_1(n_1-1)}{2} + \\frac{n_2(n_2-1)}{2} + 1\n$$\n图的总度数是边数的两倍，即：\n$$\n2m = n_1(n_1-1) + n_2(n_2-1) + 2\n$$\n\n接下来，我们计算划分 $\\mathcal{P}_{\\mathrm{all}}$ 的模块度，其中所有顶点都在一个社团中。在这种情况下，对于所有顶点对 $(i, j)$，都有 $c_i = c_j$，因此对所有 $i, j$ 都有 $\\delta(c_i, c_j) = 1$。模块度方程变为：\n$$\nQ(\\mathcal{P}_{\\mathrm{all}}) = \\frac{1}{2m} \\sum_{i,j} \\left( A_{ij} - \\frac{k_i k_j}{2m} \\right)\n$$\n该求和可以拆分为：\n$$\nQ(\\mathcal{P}_{\\mathrm{all}}) = \\frac{1}{2m} \\left( \\sum_{i,j} A_{ij} - \\frac{1}{2m} \\sum_{i,j} k_i k_j \\right)\n$$\n项 $\\sum_{i,j} A_{ij}$ 是邻接矩阵中所有元素的和，它等于所有顶点度数之和，即 $\\sum_i k_i = 2m$。\n项 $\\sum_{i,j} k_i k_j$ 可以因式分解为 $(\\sum_i k_i)(\\sum_j k_j) = (2m)(2m) = 4m^2$。\n将这些代回：\n$$\nQ(\\mathcal{P}_{\\mathrm{all}}) = \\frac{1}{2m} \\left( 2m - \\frac{4m^2}{2m} \\right) = \\frac{1}{2m} (2m - 2m) = 0\n$$\n正如预期的那样，将所有节点都放在一个社团中的平凡划分的模块度总是 $0$。\n\n现在，我们计算划分 $\\mathcal{P}_{\\mathrm{sep}}$ 的模块度。这个划分有两个社团：$C_1$ 包含来自原 $K_{n_1}$ 的 $n_1$ 个顶点，$C_2$ 包含来自原 $K_{n_2}$ 的 $n_2$ 个顶点。\n\n模块度的另一个等价公式是：\n$$\nQ = \\sum_{c=1}^{N_c} \\left[ \\frac{L_c}{m} - \\left(\\frac{K_c}{2m}\\right)^2 \\right]\n$$\n其中，求和遍及 $N_c$ 个社团，$L_c$ 是社团 $c$ 内部的边数，$K_c$ 是社团 $c$ 中顶点度数之和。\n\n对于社团 $C_1$：\n社团内部的边数 $L_1$ 是团 $K_{n_1}$ 的边数。\n$$\nL_1 = \\binom{n_1}{2} = \\frac{n_1(n_1-1)}{2}\n$$\n度数之和 $K_1$ 是 $C_1$ 中所有顶点的度数之和。不属于桥边的 $n_1-1$ 个顶点的度各为 $n_1-1$。桥接顶点 $u$ 的度为 $(n_1-1) + 1 = n_1$。\n$$\nK_1 = (n_1-1)(n_1-1) + n_1 = (n_1^2 - 2n_1 + 1) + n_1 = n_1^2 - n_1 + 1\n$$\n另外，$K_1$ 是内部度数之和（$2L_1$）加上离开社团的边数（$1$）。$K_1 = 2L_1 + 1 = 2 \\left( \\frac{n_1(n_1-1)}{2} \\right) + 1 = n_1(n_1-1) + 1$，这证实了结果。\n\n对于社团 $C_2$，根据对称性：\n$$\nL_2 = \\binom{n_2}{2} = \\frac{n_2(n_2-1)}{2}\n$$\n$$\nK_2 = n_2(n_2-1) + 1 = n_2^2 - n_2 + 1\n$$\n\n现在我们用 $N_c=2$ 来计算 $Q(\\mathcal{P}_{\\mathrm{sep}})$：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\left[ \\frac{L_1}{m} - \\left(\\frac{K_1}{2m}\\right)^2 \\right] + \\left[ \\frac{L_2}{m} - \\left(\\frac{K_2}{2m}\\right)^2 \\right]\n$$\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{L_1+L_2}{m} - \\frac{K_1^2+K_2^2}{(2m)^2}\n$$\n我们有 $m = L_1+L_2+1$。同时注意到 $K_1 = 2L_1+1$ 且 $K_2 = 2L_2+1$。将这些代入表达式中：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{L_1+L_2}{L_1+L_2+1} - \\frac{(2L_1+1)^2+(2L_2+1)^2}{4(L_1+L_2+1)^2}\n$$\n将各项通分，公分母为 $4(L_1+L_2+1)^2$：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{4(L_1+L_2)(L_1+L_2+1) - \\left( (2L_1+1)^2 + (2L_2+1)^2 \\right)}{4(L_1+L_2+1)^2}\n$$\n我们展开分子：\n分子 $= 4(L_1+L_2)^2 + 4(L_1+L_2) - (4L_1^2+4L_1+1 + 4L_2^2+4L_2+1)$\n$= 4(L_1^2+2L_1L_2+L_2^2) + 4L_1+4L_2 - 4L_1^2-4L_1-4L_2^2-4L_2-2$\n项 $4L_1^2$、$4L_2^2$、$4L_1$ 和 $4L_2$ 相互抵消。\n分子 $= 8L_1L_2 - 2$\n所以，模块度为：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{8L_1L_2 - 2}{4(L_1+L_2+1)^2} = \\frac{2(4L_1L_2 - 1)}{4m^2} = \\frac{4L_1L_2 - 1}{2m^2}\n$$\n现在，将 $L_1$、$L_2$ 和 $m$ 的表达式用 $n_1$ 和 $n_2$ 来代入：\n$4L_1L_2 - 1 = 4\\left(\\frac{n_1(n_1-1)}{2}\\right)\\left(\\frac{n_2(n_2-1)}{2}\\right) - 1 = n_1(n_1-1)n_2(n_2-1) - 1$。\n$2m^2 = 2\\left(\\frac{n_1(n_1-1)}{2} + \\frac{n_2(n_2-1)}{2} + 1\\right)^2 = 2\\left(\\frac{n_1(n_1-1) + n_2(n_2-1) + 2}{2}\\right)^2 = \\frac{(n_1(n_1-1) + n_2(n_2-1) + 2)^2}{2}$。\n因此：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{n_1(n_1-1)n_2(n_2-1) - 1}{\\frac{1}{2}(n_1(n_1-1) + n_2(n_2-1) + 2)^2} = \\frac{2(n_1(n_1-1)n_2(n_2-1) - 1)}{(n_1(n_1-1) + n_2(n_2-1) + 2)^2}\n$$\n题目要求计算 $Q(\\mathcal{P}_{\\mathrm{sep}}) - Q(\\mathcal{P}_{\\mathrm{all}})$。由于 $Q(\\mathcal{P}_{\\mathrm{all}})=0$，这其实就是 $Q(\\mathcal{P}_{\\mathrm{sep}})$。\n最终表达式也可以用展开的多项式来表示：\n$n_1(n_1-1) = n_1^2-n_1$ 且 $n_2(n_2-1) = n_2^2-n_2$。\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) - Q(\\mathcal{P}_{\\mathrm{all}}) = \\frac{2((n_1^2-n_1)(n_2^2-n_2) - 1)}{(n_1^2-n_1 + n_2^2-n_2 + 2)^2}\n$$\n这就是所求的闭式解析表达式。",
            "answer": "$$\n\\boxed{\\frac{2\\left(n_1(n_1-1)n_2(n_2-1) - 1\\right)}{\\left(n_1(n_1-1) + n_2(n_2-1) + 2\\right)^2}}\n$$"
        },
        {
            "introduction": "现实世界的网络通常具有方向性，这为社团发现带来了新的挑战。本练习将挑战你把模块度的概念应用到有向图中，你需要使用一个能够同时保留节点出强度和入强度的特定零模型，并将其结果与无向对应版本进行对比。这个过程将加深你对不同网络类型下模块度定义及其背后假设的理解。",
            "id": "4288202",
            "problem": "考虑一个包含三个标记节点 $\\{A,B,C\\}$ 的加权有向网络，它形成一个有向环，边权重分别为 $w_{A \\to B} = 2$、$w_{B \\to C} = 1$ 和 $w_{C \\to A} = 1$。定义一个社团分配 $c$，包含两个社团：$S_{1} = \\{A,C\\}$ 和 $S_{2} = \\{B\\}$。使用基于保留节点出强度和入强度的配置模型零基准的有向网络标准模块度质量函数，计算有向模块度，记为 $Q_{\\mathrm{dir}}(c)$。然后，通过将每条有向边替换为相同权重的无向边来构建该网络的无向对应版本，并使用基于保留节点强度的配置模型零基准的标准无向模块度质量函数，为相同的社团分配 $c$ 计算无向模块度，记为 $Q_{\\mathrm{und}}(c)$。最后，计算差值 $Q_{\\mathrm{dir}}(c) - Q_{\\mathrm{und}}(c)$。将你的最终答案精确地表示为一个未经四舍五入的有理数。",
            "solution": "用户要求我解决一个问题，该问题涉及在有向和无向形式下计算和比较一个小型网络的模块度。\n\n### 第 1 步：问题验证\n\n首先根据指定标准对问题进行验证。\n\n#### 给定条件\n- 一个包含三个节点 $\\{A,B,C\\}$ 的加权有向网络。\n- 有向边权重：$w_{A \\to B} = 2$、$w_{B \\to C} = 1$ 和 $w_{C \\to A} = 1$。\n- 社团分配 $c$，包含两个社团：$S_{1} = \\{A,C\\}$ 和 $S_{2} = \\{B\\}$。\n- 任务 1：使用保留节点出强度和入强度的标准配置模型零基准计算有向模块度 $Q_{\\mathrm{dir}}(c)$。\n- 任务 2：通过将每条有向边替换为相同权重的无向边来构建无向对应版本。\n- 任务 3：使用保留节点强度的标准配置模型零基准，为相同的社团分配 $c$ 计算无向模块度 $Q_{\\mathrm{und}}(c)$。\n- 任务 4：计算差值 $Q_{\\mathrm{dir}}(c) - Q_{\\mathrm{und}}(c)$。\n- 最终答案必须是一个精确的有理数。\n\n#### 验证\n- **科学依据**：该问题基于模块度的概念，这是复杂网络社团检测领域中一个标准且成熟的质量函数。有向和无向模块度的公式都基于网络科学和配置模型的基本原理。该问题在科学上是合理的。\n- **适定性**：网络结构、权重和社团划分都已明确定义。任务清晰明确，并能导出一个唯一的数值解。该问题是适定的。\n- **客观性**：问题陈述由客观、量化的事实和指令构成。没有主观或含糊不清的语言。\n\n该问题是完整的、一致的且科学上有效的。因此，将提供一个解决方案。\n\n### 第 2 步：求解\n\n#### 第 1 部分：有向模块度 ($Q_{\\mathrm{dir}}$)\n\n加权有向网络的模块度由以下公式给出：\n$$Q_{\\mathrm{dir}} = \\frac{1}{L} \\sum_{i,j} \\left[ A_{ij} - \\frac{k_i^{\\mathrm{out}} k_j^{\\mathrm{in}}}{L} \\right] \\delta(c_i, c_j)$$\n其中，$A_{ij}$ 是从节点 $i$ 到节点 $j$ 的边的权重，$L$ 是所有边的总权重，$k_i^{\\mathrm{out}}$ 是节点 $i$ 的出强度，$k_j^{\\mathrm{in}}$ 是节点 $j$ 的入强度，$\\delta(c_i, c_j)$ 是克罗内克 δ 函数，如果节点 $i$ 和 $j$ 在同一个社团中，则为 $1$，否则为 $0$。\n\n首先，我们确定网络的属性：\n- 节点为 $\\{A, B, C\\}$。\n- 表示加权有向边的邻接矩阵 $A$ 为：\n```\nA = [[0, 2, 0],\n     [0, 0, 1],\n     [1, 0, 0]]\n```\n其中行和列按 $(A, B, C)$ 排序。\n- 所有边的总权重 $L$ 是 $A$ 中所有元素的和：\n$$L = w_{A \\to B} + w_{B \\to C} + w_{C \\to A} = 2 + 1 + 1 = 4$$\n- 出强度 $k_i^{\\mathrm{out}}$ 是 $A$ 的行和：\n  $k_A^{\\mathrm{out}} = 2$，$k_B^{\\mathrm{out}} = 1$，$k_C^{\\mathrm{out}} = 1$。其和为 $4$，等于 $L$。\n- 入强度 $k_j^{\\mathrm{in}}$ 是 $A$ 的列和：\n  $k_A^{\\mathrm{in}} = 1$，$k_B^{\\mathrm{in}} = 2$，$k_C^{\\mathrm{in}} = 1$。其和为 $4$，等于 $L$。\n\n社团分配为 $c$，其中 $S_1 = \\{A, C\\}$ 和 $S_2 = \\{B\\}$。模块度的求和仅限于同一社团内的节点对 $(i,j)$。\n\n对于社团 $S_1 = \\{A, C\\}$：\n对总和的贡献来自节点对 $(A,A), (A,C), (C,A), (C,C)$。\n- $(A,A)$：$A_{AA} - \\frac{k_A^{\\mathrm{out}} k_A^{\\mathrm{in}}}{L} = 0 - \\frac{2 \\cdot 1}{4} = -\\frac{2}{4} = -\\frac{1}{2}$\n- $(A,C)$：$A_{AC} - \\frac{k_A^{\\mathrm{out}} k_C^{\\mathrm{in}}}{L} = 0 - \\frac{2 \\cdot 1}{4} = -\\frac{2}{4} = -\\frac{1}{2}$\n- $(C,A)$：$A_{CA} - \\frac{k_C^{\\mathrm{out}} k_A^{\\mathrm{in}}}{L} = 1 - \\frac{1 \\cdot 1}{4} = \\frac{3}{4}$\n- $(C,C)$：$A_{CC} - \\frac{k_C^{\\mathrm{out}} k_C^{\\mathrm{in}}}{L} = 0 - \\frac{1 \\cdot 1}{4} = -\\frac{1}{4}$\n\n对于社团 $S_2 = \\{B\\}$：\n贡献来自节点对 $(B,B)$。\n- $(B,B)$：$A_{BB} - \\frac{k_B^{\\mathrm{out}} k_B^{\\mathrm{in}}}{L} = 0 - \\frac{1 \\cdot 2}{4} = -\\frac{2}{4} = -\\frac{1}{2}$\n\n总和 $\\sum_{i,j} \\left[ \\dots \\right] \\delta(c_i, c_j)$ 为 $(-\\frac{1}{2} - \\frac{1}{2} + \\frac{3}{4} - \\frac{1}{4}) + (-\\frac{1}{2}) = (-1 + \\frac{2}{4}) - \\frac{1}{2} = -\\frac{1}{2} - \\frac{1}{2} = -1$。\n\n因此，有向模块度为：\n$$Q_{\\mathrm{dir}}(c) = \\frac{1}{L}(-1) = \\frac{1}{4}(-1) = -\\frac{1}{4}$$\n\n#### 第 2 部分：无向模块度 ($Q_{\\mathrm{und}}$)\n\n首先，我们构建网络的无向对应版本。每条有向边都替换为相同权重的无向边。\n- $w_{AB} = 2$\n- $w_{BC} = 1$\n- $w_{CA} = 1$\n无向邻接矩阵 $A^{\\mathrm{und}}$ 是对称的：\n```\nA_und = [[0, 2, 1],\n         [2, 0, 1],\n         [1, 1, 0]]\n```\n加权无向网络的模块度为：\n$$Q_{\\mathrm{und}} = \\frac{1}{2m} \\sum_{i,j} \\left[ A^{\\mathrm{und}}_{ij} - \\frac{d_i d_j}{2m} \\right] \\delta(c_i, c_j)$$\n其中 $m$ 是所有独立边的权重之和，$d_i$ 是节点 $i$ 的强度。\n\n我们确定这个无向网络的属性：\n- 独立边的权重之和为 $m = w_{AB} + w_{BC} + w_{CA} = 2 + 1 + 1 = 4$。\n- 网络中的总强度为 $2m = 8$。\n- 节点强度 $d_i$ 是 $A^{\\mathrm{und}}$ 的行（或列）和：\n  $d_A = w_{AB} + w_{AC} = 2 + 1 = 3$\n  $d_B = w_{BA} + w_{BC} = 2 + 1 = 3$\n  $d_C = w_{CA} + w_{CB} = 1 + 1 = 2$\n  强度之和为 $d_A + d_B + d_C = 3 + 3 + 2 = 8 = 2m$。\n\n社团分配相同：$S_1 = \\{A, C\\}$ 和 $S_2 = \\{B\\}$。\n\n对于社团 $S_1 = \\{A, C\\}$：\n对总和的贡献来自节点对 $(A,A), (A,C), (C,A), (C,C)$。\n- $(A,A)$：$A^{\\mathrm{und}}_{AA} - \\frac{d_A d_A}{2m} = 0 - \\frac{3 \\cdot 3}{8} = -\\frac{9}{8}$\n- $(A,C)$：$A^{\\mathrm{und}}_{AC} - \\frac{d_A d_C}{2m} = 1 - \\frac{3 \\cdot 2}{8} = 1 - \\frac{6}{8} = \\frac{2}{8} = \\frac{1}{4}$\n- $(C,A)$：$A^{\\mathrm{und}}_{CA} - \\frac{d_C d_A}{2m} = 1 - \\frac{2 \\cdot 3}{8} = 1 - \\frac{6}{8} = \\frac{2}{8} = \\frac{1}{4}$\n- $(C,C)$：$A^{\\mathrm{und}}_{CC} - \\frac{d_C d_C}{2m} = 0 - \\frac{2 \\cdot 2}{8} = -\\frac{4}{8} = -\\frac{1}{2}$\n\n对于社团 $S_2 = \\{B\\}$：\n贡献来自节点对 $(B,B)$。\n- $(B,B)$：$A^{\\mathrm{und}}_{BB} - \\frac{d_B d_B}{2m} = 0 - \\frac{3 \\cdot 3}{8} = -\\frac{9}{8}$\n\n总和 $\\sum_{i,j} \\left[ \\dots \\right] \\delta(c_i, c_j)$ 为 $(-\\frac{9}{8} + \\frac{1}{4} + \\frac{1}{4} - \\frac{1}{2}) + (-\\frac{9}{8}) = (-\\frac{9}{8} + \\frac{1}{2} - \\frac{1}{2}) - \\frac{9}{8} = -\\frac{9}{8} - \\frac{9}{8} = -\\frac{18}{8} = -\\frac{9}{4}$。\n\n因此，无向模块度为：\n$$Q_{\\mathrm{und}}(c) = \\frac{1}{2m} \\left( -\\frac{9}{4} \\right) = \\frac{1}{8} \\left( -\\frac{9}{4} \\right) = -\\frac{9}{32}$$\n\n#### 第 3 部分：计算差值\n\n最后一步是计算差值 $Q_{\\mathrm{dir}}(c) - Q_{\\mathrm{und}}(c)$。\n$$Q_{\\mathrm{dir}}(c) - Q_{\\mathrm{und}}(c) = -\\frac{1}{4} - \\left(-\\frac{9}{32}\\right) = -\\frac{1}{4} + \\frac{9}{32}$$\n为计算和，我们找到一个公分母，即 $32$。\n$$-\\frac{1 \\cdot 8}{4 \\cdot 8} + \\frac{9}{32} = -\\frac{8}{32} + \\frac{9}{32} = \\frac{1}{32}$$\n\n差值为 $\\frac{1}{32}$。",
            "answer": "$$\\boxed{\\frac{1}{32}}$$"
        },
        {
            "introduction": "模块度是一个强大的工具，但它也有众所周知的局限性。这个问题通过一个精心设计的思想实验来揭示“分辨率极限”现象，它展示了一个庞大的、不相关的网络组件的存在，如何反直觉地迫使两个清晰但稀疏连接的社团合并。通过解决这个问题，你将对模块度在分析多尺度网络结构时的潜在陷阱有更深刻的认识。",
            "id": "4288162",
            "problem": "考虑一个由三个节点不相交部分组成的无向、无权简单图。第一部分是一个包含$12$个顶点的团（称之为社团 $\\mathcal{A}$）。第二部分是另一个包含$12$个顶点的团（社团 $\\mathcal{B}$）。在 $\\mathcal{A}$ 和 $\\mathcal{B}$ 之间，添加恰好 $s$ 条边，每条边连接 $\\mathcal{A}$ 中的一个顶点和 $\\mathcal{B}$ 中的一个顶点，没有平行边，也没有自环。第三部分是一个背景子图 $\\mathcal{R}$，它包含任意数量的顶点和恰好 $M = 10000$ 条边，且 $\\mathcal{R}$ 与 $\\mathcal{A}$ 或 $\\mathcal{B}$ 之间没有边相连。\n\n令划分 $\\mathcal{P}_{\\mathrm{sep}}$ 包含两个独立的社团 $\\mathcal{A}$ 和 $\\mathcal{B}$，以及整个背景 $\\mathcal{R}$ 作为一个单独的社团。令划分 $\\mathcal{P}_{\\mathrm{merge}}$ 与 $\\mathcal{P}_{\\mathrm{sep}}$ 相同，只是 $\\mathcal{A}$ 和 $\\mathcal{B}$ 合并成一个单一社团 $\\mathcal{A} \\cup \\mathcal{B}$，而 $\\mathcal{R}$ 仍然是一个单独的社团。\n\n使用标准的模块度质量函数，配置模型零模型以及分辨率参数等于$1$，从第一性原理推导使 $\\mathcal{P}_{\\mathrm{merge}}$ 的模块度严格大于 $\\mathcal{P}_{\\mathrm{sep}}$ 的模块度的关于 $s$ 的条件。然后，根据给定的数值参数评估此条件，并确定使得 $\\mathcal{P}_{\\mathrm{merge}}$ 的模块度大于 $\\mathcal{P}_{\\mathrm{sep}}$ 的模块度的最小整数 $s \\geq 1$。\n\n将你的最终答案表示为最小整数 $s$。无需四舍五入。",
            "solution": "问题要求我们找到关于社团间边数 $s$ 的一个条件，使得合并两个社团 $\\mathcal{A}$ 和 $\\mathcal{B}$ 后，模块度得分严格更高。然后我们必须找到满足此条件的最小整数 $s \\geq 1$。分析将基于无权图的标准模块度定义。\n\n一个网络划分为多个社团的模块度 $Q$ 由以下公式给出：\n$$\nQ = \\sum_{c} \\left[ \\frac{l_c}{m} - \\gamma \\left( \\frac{K_c}{2m} \\right)^2 \\right]\n$$\n其中，求和遍历划分中的所有社团 $c$。在此公式中：\n- $l_c$ 是社团 $c$ 内部边的数量（边的两个端点都在社团 $c$ 内）。\n- $K_c$ 是社团 $c$ 中所有节点的度之和。\n- $m$ 是整个图中的总边数。\n- $\\gamma$ 是分辨率参数，给定值为 $\\gamma = 1$。\n\n首先，我们必须计算图的基本属性。\n该图由三部分组成：一个包含 $n_A = 12$ 个顶点的团 $\\mathcal{A}$，一个包含 $n_B = 12$ 个顶点的团 $\\mathcal{B}$，以及一个背景子图 $\\mathcal{R}$。\n团 $\\mathcal{A}$ 内部的边数是 $L_{\\mathcal{A}} = \\binom{12}{2} = \\frac{12 \\times 11}{2} = 66$。\n同样地，团 $\\mathcal{B}$ 内部的边数是 $L_{\\mathcal{B}} = \\binom{12}{2} = 66$。\n背景子图 $\\mathcal{R}$ 中的边数给定为 $M = 10000$。\n有 $s$ 条边连接 $\\mathcal{A}$ 和 $\\mathcal{B}$。没有边连接 $\\mathcal{R}$ 与 $\\mathcal{A}$ 或 $\\mathcal{B}$。\n图中总边数是这些计数的总和：\n$$\nm = L_{\\mathcal{A}} + L_{\\mathcal{B}} + s + M = 66 + 66 + s + 10000 = 10132 + s\n$$\n\n接下来，我们计算每个部分中节点的度之和。一组节点的度之和是内部边数的两倍加上外部边数。\n- 对于 $\\mathcal{A}$：内部边数为 $L_{\\mathcal{A}} = 66$。外部边是连接到 $\\mathcal{B}$ 的 $s$ 条边。$\\mathcal{A}$ 中节点的度之和是 $K_{\\mathcal{A}} = 2 L_{\\mathcal{A}} + s = 2(66) + s = 132 + s$。\n- 对于 $\\mathcal{B}$：同样地，$K_{\\mathcal{B}} = 2 L_{\\mathcal{B}} + s = 2(66) + s = 132 + s$。\n- 对于 $\\mathcal{R}$：内部边数为 $M = 10000$。没有外部边。$\\mathcal{R}$ 中节点的度之和是 $K_{\\mathcal{R}} = 2M = 2(10000) = 20000$。\n\n我们需要比较两个不同划分 $\\mathcal{P}_{\\mathrm{sep}}$ 和 $\\mathcal{P}_{\\mathrm{merge}}$ 的模块度。\n\n对于划分 $\\mathcal{P}_{\\mathrm{sep}} = \\{\\mathcal{A}, \\mathcal{B}, \\mathcal{R}\\}$，社团分别是独立的 $\\mathcal{A}$、$\\mathcal{B}$ 和 $\\mathcal{R}$。\n每个社团的内部边数是：\n- $l_{\\mathcal{A}} = L_{\\mathcal{A}} = 66$\n- $l_{\\mathcal{B}} = L_{\\mathcal{B}} = 66$\n- $l_{\\mathcal{R}} = M = 10000$\n这个划分的模块度是：\n$$\nQ_{\\mathrm{sep}} = \\left[ \\frac{l_{\\mathcal{A}}}{m} - \\left(\\frac{K_{\\mathcal{A}}}{2m}\\right)^2 \\right] + \\left[ \\frac{l_{\\mathcal{B}}}{m} - \\left(\\frac{K_{\\mathcal{B}}}{2m}\\right)^2 \\right] + \\left[ \\frac{l_{\\mathcal{R}}}{m} - \\left(\\frac{K_{\\mathcal{R}}}{2m}\\right)^2 \\right]\n$$\n代入已知表达式：\n$$\nQ_{\\mathrm{sep}} = \\left[ \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 \\right] + \\left[ \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 \\right] + \\left[ \\frac{10000}{m} - \\left(\\frac{20000}{2m}\\right)^2 \\right]\n$$\n\n对于划分 $\\mathcal{P}_{\\mathrm{merge}} = \\{\\mathcal{A} \\cup \\mathcal{B}, \\mathcal{R}\\}$，社团是合并后的群组 $\\mathcal{A} \\cup \\mathcal{B}$ 和背景 $\\mathcal{R}$。\n合并后社团 $\\mathcal{C}_{\\mathrm{merge}} = \\mathcal{A} \\cup \\mathcal{B}$ 的属性是：\n- 内部边 $l_{\\mathcal{C}_{\\mathrm{merge}}}$：这包括 $\\mathcal{A}$ 内部的边、$\\mathcal{B}$ 内部的边以及 $\\mathcal{A}$ 和 $\\mathcal{B}$ 之间的边。所以，$l_{\\mathcal{C}_{\\mathrm{merge}}} = L_{\\mathcal{A}} + L_{\\mathcal{B}} + s = 66 + 66 + s = 132 + s$。\n- 度之和 $K_{\\mathcal{C}_{\\mathrm{merge}}}$：这是 $\\mathcal{A}$ 和 $\\mathcal{B}$ 中所有节点的度之和。所以，$K_{\\mathcal{C}_{\\mathrm{merge}}} = K_{\\mathcal{A}} + K_{\\mathcal{B}} = (132+s) + (132+s) = 264 + 2s$。\n社团 $\\mathcal{R}$ 保持不变。其属性为 $l_{\\mathcal{R}} = 10000$ 和 $K_{\\mathcal{R}} = 20000$。\n这个划分的模块度是：\n$$\nQ_{\\mathrm{merge}} = \\left[ \\frac{l_{\\mathcal{C}_{\\mathrm{merge}}}}{m} - \\left(\\frac{K_{\\mathcal{C}_{\\mathrm{merge}}}}{2m}\\right)^2 \\right] + \\left[ \\frac{l_{\\mathcal{R}}}{m} - \\left(\\frac{K_{\\mathcal{R}}}{2m}\\right)^2 \\right]\n$$\n代入已知表达式：\n$$\nQ_{\\mathrm{merge}} = \\left[ \\frac{132+s}{m} - \\left(\\frac{264+2s}{2m}\\right)^2 \\right] + \\left[ \\frac{10000}{m} - \\left(\\frac{20000}{2m}\\right)^2 \\right]\n$$\n\n我们想找到 $Q_{\\mathrm{merge}} > Q_{\\mathrm{sep}}$ 的条件。让我们计算差值 $\\Delta Q = Q_{\\mathrm{merge}} - Q_{\\mathrm{sep}}$。与社团 $\\mathcal{R}$ 相关的项在两个表达式中是相同的，将会抵消。\n$$\n\\Delta Q = \\left( \\frac{132+s}{m} - \\left(\\frac{264+2s}{2m}\\right)^2 \\right) - \\left( \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 + \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 \\right)\n$$\n$$\n\\Delta Q = \\frac{132+s}{m} - \\frac{132}{m} - \\frac{(2(132+s))^2}{(2m)^2} + 2\\frac{(132+s)^2}{(2m)^2}\n$$\n$$\n\\Delta Q = \\frac{s}{m} - \\frac{4(132+s)^2}{(2m)^2} + \\frac{2(132+s)^2}{(2m)^2}\n$$\n$$\n\\Delta Q = \\frac{s}{m} - \\frac{2(132+s)^2}{4m^2} = \\frac{s}{m} - \\frac{(132+s)^2}{2m^2}\n$$\n注意，这是合并两个社团 $\\mathcal{A}$ 和 $\\mathcal{B}$（它们之间有 $s$ 条边）时模块度变化通用公式的一个特例：$\\Delta Q = \\frac{s}{m} - \\frac{K_{\\mathcal{A}}K_{\\mathcal{B}}}{2m^2}$。此处，$K_{\\mathcal{A}}=K_{\\mathcal{B}}=132+s$。\n\n条件 $Q_{\\mathrm{merge}} > Q_{\\mathrm{sep}}$ 等价于 $\\Delta Q > 0$:\n$$\n\\frac{s}{m} - \\frac{(132+s)^2}{2m^2} > 0\n$$\n因为 $m = 10132 + s$ 且给定 $s \\geq 1$，所以 $m$ 严格为正。我们可以将不等式两边乘以 $2m^2$ 而不改变其方向：\n$$\n2ms - (132+s)^2 > 0\n$$\n现在，我们代入 $m = 10132+s$：\n$$\n2s(10132+s) - (132+s)^2 > 0\n$$\n这就是从第一性原理推导出的关于 $s$ 的条件。现在我们必须解这个不等式。\n$$\n20264s + 2s^2 - (132^2 + 2(132)s + s^2) > 0\n$$\n$$\n20264s + 2s^2 - (17424 + 264s + s^2) > 0\n$$\n$$\ns^2 + (20264 - 264)s - 17424 > 0\n$$\n$$\ns^2 + 20000s - 17424 > 0\n$$\n这是一个一元二次不等式。设 $f(s) = s^2 + 20000s - 17424$。函数 $f(s)$ 代表一个开口向上的抛物线。该不等式将在二次方程 $f(s) = 0$ 的根之外的 $s$ 值上成立。根由二次公式 $s = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$ 给出：\n$$\ns = \\frac{-20000 \\pm \\sqrt{20000^2 - 4(1)(-17424)}}{2(1)}\n$$\n$$\ns = \\frac{-20000 \\pm \\sqrt{400000000 + 69696}}{2}\n$$\n$$\ns = \\frac{-20000 \\pm \\sqrt{400069696}}{2}\n$$\n两个根是：\n$s_1 = \\frac{-20000 - \\sqrt{400069696}}{2}$，这是一个很大的负数。\n$s_2 = \\frac{-20000 + \\sqrt{400069696}}{2}$，这是正根。\n\n由于我们只对 $s \\geq 1$ 感兴趣，我们需要找到满足 $s > s_2$ 的最小整数 $s$。我们来估算一下 $s_2$：\n$\\sqrt{400069696} \\approx \\sqrt{4 \\times 10^8} = 2 \\times 10^4 = 20000$。平方根下的值略大于此。\n让我们在 $s$ 取较小整数值时计算 $f(s)$。\n当 $s=0$ 时：$f(0) = 0^2 + 20000(0) - 17424 = -17424  0$。所以正根 $s_2$ 大于 $0$。\n当 $s=1$ 时：$f(1) = 1^2 + 20000(1) - 17424 = 1 + 20000 - 17424 = 2577  0$。\n因为 $f(0)  0$ 且 $f(1)  0$，正根 $s_2$ 必定位于区间 $(0, 1)$ 内。\n不等式 $f(s)  0$ 对所有 $s  s_2$ 都成立。因为 $0  s_2  1$，满足 $s  s_2$ 的最小整数 $s \\geq 1$ 是 $s=1$。\n\n这个低阈值的原因是背景图 $\\mathcal{R}$ 中有大量的边 $M = 10000$，这使得总边数 $m$ 非常大。在配置模型零模型中，社团 $\\mathcal{A}$ 和 $\\mathcal{B}$ 之间的期望边数是 $E_{\\mathcal{A}\\mathcal{B}} = \\frac{K_{\\mathcal{A}}K_{\\mathcal{B}}}{2m}$。对于 $s=1$，这个值大约是 $\\frac{133 \\times 133}{2 \\times 10133} \\approx \\frac{17689}{20266} \\approx 0.87$。合并的条件是实际边数 $s$ 大于这个期望数。因为 $1  0.87$，即使只有一条边，也比随机预期的连接更强，因此有利于合并。\n\n因此，使得 $\\mathcal{P}_{\\mathrm{merge}}$ 具有更大模块度的最小整数 $s \\geq 1$ 是 $1$。",
            "answer": "$$\n\\boxed{1}\n$$"
        }
    ]
}
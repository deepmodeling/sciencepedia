{
    "hands_on_practices": [
        {
            "introduction": "理论是抽象的，而实践则赋予其生命。本节将通过一系列精心设计的练习，帮助你深入理解模块度的计算、其背后的假设以及其固有的局限性。第一个练习将从一个基础但极具启发性的场景开始，通过对一个具有明确社群结构（由两个团簇通过一条边连接而成）的图进行计算，你将亲手实践模块度的定义。这个练习旨在让你熟悉模块度公式，并直观地感受它是如何量化一个划分优于随机预期的程度的。",
            "id": "4288126",
            "problem": "考虑一个简单无向无权图 $G$。它由两个团 $K_{n_1}$ 和 $K_{n_2}$（其中 $n_1 \\geq 2$ 且 $n_2 \\geq 2$）构成，并通过在 $K_{n_1}$ 中的一个指定顶点 $u$ 和 $K_{n_2}$ 中的一个指定顶点 $v$ 之间添加一条单一的桥边连接而成。令 $Q$ 表示在配置模型零系综下的模块度。评估划分 $\\mathcal{P}_{\\mathrm{sep}}$（将 $K_{n_1}$ 的所有顶点放入一个社群，并将 $K_{n_2}$ 的所有顶点放入第二个社群）和划分 $\\mathcal{P}_{\\mathrm{all}}$（将 $G$ 的所有顶点放入一个单一社群）的模块度 $Q$。请提供 $Q(\\mathcal{P}_{\\mathrm{sep}}) - Q(\\mathcal{P}_{\\mathrm{all}})$ 的最终答案，形式为关于 $n_1$ 和 $n_2$ 的单个闭式解析表达式。无需四舍五入，也不涉及物理单位。",
            "solution": "用户提供的问题已经过分析，被认为是有效的。这是一个网络科学领域内适定的、有科学依据的问题，没有事实不健全、歧义或信息缺失的情况。因此，我们可以进行正式求解。\n\n网络划分的模块度 $Q$ 定义为：落在给定社群内部的边的比例，减去在保持顶点度数不变的情况下随机分布边的期望比例。对于一个无权无向图，在配置模型零系综下的模块度由以下公式给出：\n$$\nQ = \\frac{1}{2m} \\sum_{i,j} \\left( A_{ij} - \\frac{k_i k_j}{2m} \\right) \\delta(c_i, c_j)\n$$\n其中 $m$ 是图中的总边数，$A$ 是邻接矩阵，$k_i$ 是顶点 $i$ 的度，$c_i$ 是顶点 $i$ 所属的社群，$\\delta(c_i, c_j)$ 是克罗内克δ函数，当 $c_i = c_j$ 时为 $1$，否则为 $0$。\n\n首先，我们刻画图 $G$。它由两个团 $K_{n_1}$ 和 $K_{n_2}$ 组成，通过一条单一的桥边相连。\n一个团 $K_n$ 中的边数为 $\\binom{n}{2} = \\frac{n(n-1)}{2}$。\n$G$ 中的总边数 $m$ 是 $K_{n_1}$ 中的边数、$K_{n_2}$ 中的边数以及那条单一桥边的数量之和。\n$$\nm = \\frac{n_1(n_1-1)}{2} + \\frac{n_2(n_2-1)}{2} + 1\n$$\n图的总度数是边数的两倍，即：\n$$\n2m = n_1(n_1-1) + n_2(n_2-1) + 2\n$$\n\n接下来，我们评估划分 $\\mathcal{P}_{\\mathrm{all}}$ 的模块度，其中所有顶点都在一个单一社群中。在这种情况下，对于所有顶点对 $(i, j)$，都有 $c_i = c_j$，所以对所有 $i,j$ 都有 $\\delta(c_i, c_j) = 1$。模块度方程变为：\n$$\nQ(\\mathcal{P}_{\\mathrm{all}}) = \\frac{1}{2m} \\sum_{i,j} \\left( A_{ij} - \\frac{k_i k_j}{2m} \\right)\n$$\n这个和可以拆分为：\n$$\nQ(\\mathcal{P}_{\\mathrm{all}}) = \\frac{1}{2m} \\left( \\sum_{i,j} A_{ij} - \\frac{1}{2m} \\sum_{i,j} k_i k_j \\right)\n$$\n项 $\\sum_{i,j} A_{ij}$ 是邻接矩阵中所有元素的和，它等于所有顶点度数之和，即 $\\sum_i k_i = 2m$。\n项 $\\sum_{i,j} k_i k_j$ 可以因式分解为 $(\\sum_i k_i)(\\sum_j k_j) = (2m)(2m) = 4m^2$。\n将这些代回：\n$$\nQ(\\mathcal{P}_{\\mathrm{all}}) = \\frac{1}{2m} \\left( 2m - \\frac{4m^2}{2m} \\right) = \\frac{1}{2m} (2m - 2m) = 0\n$$\n正如所料，将所有节点都放在一个社群中的平凡划分的模块度总是 $0$。\n\n现在，我们评估划分 $\\mathcal{P}_{\\mathrm{sep}}$ 的模块度。这个划分有两个社群：$C_1$ 包含来自原 $K_{n_1}$ 的 $n_1$ 个顶点，$C_2$ 包含来自原 $K_{n_2}$ 的 $n_2$ 个顶点。\n\n模块度的另一个等价公式是：\n$$\nQ = \\sum_{c=1}^{N_c} \\left[ \\frac{L_c}{m} - \\left(\\frac{K_c}{2m}\\right)^2 \\right]\n$$\n其中，求和是对 $N_c$ 个社群进行的，$L_c$ 是社群 $c$ 内部的边数，$K_c$ 是社群 $c$ 中顶点的度数之和。\n\n对于社群 $C_1$：\n社群内部边数 $L_1$ 就是团 $K_{n_1}$ 的边数。\n$$\nL_1 = \\binom{n_1}{2} = \\frac{n_1(n_1-1)}{2}\n$$\n度数之和 $K_1$ 是 $C_1$ 中所有顶点的度数之和。$n_1-1$ 个不属于桥的顶点的度数各为 $n_1-1$。桥接点 $u$ 的度为 $(n_1-1) + 1 = n_1$。\n$$\nK_1 = (n_1-1)(n_1-1) + n_1 = (n_1^2 - 2n_1 + 1) + n_1 = n_1^2 - n_1 + 1\n$$\n另外，$K_1$ 是内部度数之和（$2L_1$）加上离开社群的边数（$1$）。\n$K_1 = 2L_1 + 1 = 2 \\left( \\frac{n_1(n_1-1)}{2} \\right) + 1 = n_1(n_1-1) + 1$，这证实了结果。\n\n对于社群 $C_2$，根据对称性：\n$$\nL_2 = \\binom{n_2}{2} = \\frac{n_2(n_2-1)}{2}\n$$\n$$\nK_2 = n_2(n_2-1) + 1 = n_2^2 - n_2 + 1\n$$\n\n现在我们计算 $N_c=2$ 时的 $Q(\\mathcal{P}_{\\mathrm{sep}})$：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\left[ \\frac{L_1}{m} - \\left(\\frac{K_1}{2m}\\right)^2 \\right] + \\left[ \\frac{L_2}{m} - \\left(\\frac{K_2}{2m}\\right)^2 \\right]\n$$\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{L_1+L_2}{m} - \\frac{K_1^2+K_2^2}{(2m)^2}\n$$\n我们有 $m = L_1+L_2+1$。同时注意 $K_1 = 2L_1+1$ 且 $K_2 = 2L_2+1$。将这些代入表达式中：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{L_1+L_2}{L_1+L_2+1} - \\frac{(2L_1+1)^2+(2L_2+1)^2}{4(L_1+L_2+1)^2}\n$$\n将各项通分，公分母为 $4(L_1+L_2+1)^2$：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{4(L_1+L_2)(L_1+L_2+1) - \\left( (2L_1+1)^2 + (2L_2+1)^2 \\right)}{4(L_1+L_2+1)^2}\n$$\n我们展开分子：\n分子 $= 4(L_1+L_2)^2 + 4(L_1+L_2) - (4L_1^2+4L_1+1 + 4L_2^2+4L_2+1)$\n$= 4(L_1^2+2L_1L_2+L_2^2) + 4L_1+4L_2 - 4L_1^2-4L_1-4L_2^2-4L_2-2$\n项 $4L_1^2$、$4L_2^2$、$4L_1$ 和 $4L_2$相互消去。\n分子 $= 8L_1L_2 - 2$\n所以，模块度为：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{8L_1L_2 - 2}{4(L_1+L_2+1)^2} = \\frac{2(4L_1L_2 - 1)}{4m^2} = \\frac{4L_1L_2 - 1}{2m^2}\n$$\n现在，用关于 $n_1$ 和 $n_2$ 的表达式代入 $L_1$、$L_2$ 和 $m$：\n$4L_1L_2 - 1 = 4\\left(\\frac{n_1(n_1-1)}{2}\\right)\\left(\\frac{n_2(n_2-1)}{2}\\right) - 1 = n_1(n_1-1)n_2(n_2-1) - 1$。\n$2m^2 = 2\\left(\\frac{n_1(n_1-1)}{2} + \\frac{n_2(n_2-1)}{2} + 1\\right)^2 = 2\\left(\\frac{n_1(n_1-1) + n_2(n_2-1) + 2}{2}\\right)^2 = \\frac{(n_1(n_1-1) + n_2(n_2-1) + 2)^2}{2}$。\n因此：\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) = \\frac{n_1(n_1-1)n_2(n_2-1) - 1}{\\frac{1}{2}(n_1(n_1-1) + n_2(n_2-1) + 2)^2} = \\frac{2(n_1(n_1-1)n_2(n_2-1) - 1)}{(n_1(n_1-1) + n_2(n_2-1) + 2)^2}\n$$\n题目要求计算 $Q(\\mathcal{P}_{\\mathrm{sep}}) - Q(\\mathcal{P}_{\\mathrm{all}})$。由于 $Q(\\mathcal{P}_{\\mathrm{all}})=0$，该值就是 $Q(\\mathcal{P}_{\\mathrm{sep}})$。\n最终表达式也可以用展开的多项式形式写出：\n$n_1(n_1-1) = n_1^2-n_1$ and $n_2(n_2-1) = n_2^2-n_2$。\n$$\nQ(\\mathcal{P}_{\\mathrm{sep}}) - Q(\\mathcal{P}_{\\mathrm{all}}) = \\frac{2((n_1^2-n_1)(n_2^2-n_2) - 1)}{(n_1^2-n_1 + n_2^2-n_2 + 2)^2}\n$$\n这就是所要求的闭式解析表达式。",
            "answer": "$$\n\\boxed{\\frac{2\\left(n_1(n_1-1)n_2(n_2-1) - 1\\right)}{\\left(n_1(n_1-1) + n_2(n_2-1) + 2\\right)^2}}\n$$"
        },
        {
            "introduction": "掌握了基础计算后，我们来探讨一个更微妙的例子，它揭示了模块度背后零模型（null model）的关键影响。星形图是一种常见的核心-边缘结构，直觉上我们可能认为将中心节点与外围节点分开是一个合理的社群划分。然而，这个练习将通过计算表明，模块度度量可能会给出相反的结论，这个看似矛盾的结果能帮助你深刻理解模块度并非简单地奖励“密集”的社群，而是在于比较实际连边与在保持节点度数不变的随机网络中的预期连边。",
            "id": "4288199",
            "problem": "考虑一个简单的、无向的、无权的星形图，它有 $L \\geq 2$ 个叶节点和一个中心节点，因此总节点数为 $N = L + 1$，总边数为 $m = L$。每个叶节点的度为 $1$，中心节点的度为 $L$。您将使用配置模型（CM）零假设下的标准模块度质量函数来评估两种社区划分的质量。\n\n从模块度的定义出发，\n$$\nQ \\;=\\; \\frac{1}{2m} \\sum_{i,j} \\left( A_{ij} \\;-\\; \\frac{k_i k_j}{2m} \\right) \\,\\delta(c_i, c_j),\n$$\n其中 $A_{ij}$ 是邻接矩阵，$k_i$ 是节点 $i$ 的度，而 $\\delta(c_i, c_j)$ 在节点 $i$ 和 $j$ 属于同一社区时为 $1$，否则为 $0$。计算当中心节点从其自身所在的独立社区移动到与所有叶节点相同的社区时（即，社区划分从两个社区——一个仅包含中心节点，另一个包含所有叶节点——变为一个包含所有节点的单一社区），模块度的变化量\n$$\n\\Delta Q \\;=\\; Q_{\\text{after}} \\;-\\; Q_{\\text{before}}\n$$\n在您的计算中，您可以等效地使用基于社区内部边和社区度总和的社区聚合形式：\n$$\nQ \\;=\\; \\sum_{c} \\left( \\frac{e_c}{m} \\;-\\; \\left(\\frac{K_c}{2m}\\right)^{2} \\right),\n$$\n其中 $e_c$ 是两个端点都在社区 $c$ 内的边数，而 $K_c$ 是社区 $c$ 中节点度的总和。\n\n计算 $\\Delta Q$ 的精确值，并简要解释相对于配置模型零期望的结果。$\\Delta Q$ 的最终数值必须作为答案提供。不需要四舍五入，也不需要单位。",
            "solution": "问题要求计算当一个星形图的社区划分从两个社区变为一个单一社区时，模块度的变化量 $\\Delta Q = Q_{\\text{after}} - Q_{\\text{before}}$。我们已知必要的图属性和社区聚合的模块度公式：\n$$Q = \\sum_{c} \\left( \\frac{e_c}{m} - \\left(\\frac{K_c}{2m}\\right)^{2} \\right)$$\n\n首先，我们确定星形图的参数。它有 $L+1$ 个节点，包括 $1$ 个中心节点和 $L$ 个叶节点。总边数为 $m = L$。中心节点的度为 $k_{hub} = L$，每个叶节点的度为 $k_{leaf} = 1$。图中度的总和是 $\\sum_i k_i = k_{hub} + L \\times k_{leaf} = L + L \\times 1 = 2L$。这与握手引理 $2m = 2L$ 一致。\n\n现在我们来计算初始和最终划分的模块度。\n\n**1. 变化前的模块度 ($Q_{\\text{before}}$)**\n\n初始划分包含两个社区：\n- $C_{H}$：仅包含中心节点。\n- $C_{L}$：包含所有 $L$ 个叶节点。\n\n我们需要计算每个社区的内部边数（$e_c$）和节点度的总和（$K_c$）。\n\n对于社区 $C_{H}$：\n- 只有一个节点（中心节点），所以不可能有内部边。因此，$e_{C_H} = 0$。\n- 度的总和就是中心节点的度：$K_{C_{H}} = k_{hub} = L$。\n\n对于社区 $C_{L}$：\n- 叶节点只与中心节点相连。任何两个叶节点之间没有边。因此，内部边数为 $e_{C_{L}} = 0$。\n- 度的总和是所有 $L$ 个叶节点的度之和：$K_{C_{L}} = \\sum_{i \\in C_L} k_i = L \\times 1 = L$。\n\n现在，我们可以通过对两个社区的贡献求和来计算 $Q_{\\text{before}}$。我们使用 $m = L$ 和 $2m = 2L$。\n$$Q_{\\text{before}} = \\left( \\frac{e_{C_H}}{m} - \\left(\\frac{K_{C_H}}{2m}\\right)^{2} \\right) + \\left( \\frac{e_{C_L}}{m} - \\left(\\frac{K_{C_L}}{2m}\\right)^{2} \\right)$$\n代入我们找到的值：\n$$Q_{\\text{before}} = \\left( \\frac{0}{L} - \\left(\\frac{L}{2L}\\right)^{2} \\right) + \\left( \\frac{0}{L} - \\left(\\frac{L}{2L}\\right)^{2} \\right)$$\n$$Q_{\\text{before}} = \\left( 0 - \\left(\\frac{1}{2}\\right)^{2} \\right) + \\left( 0 - \\left(\\frac{1}{2}\\right)^{2} \\right)$$\n$$Q_{\\text{before}} = -\\frac{1}{4} - \\frac{1}{4} = -\\frac{2}{4} = -\\frac{1}{2}$$\n\n**2. 变化后的模块度 ($Q_{\\text{after}}$)**\n\n最终划分包含一个单一社区 $C_{All}$，其中包含所有 $L+1$ 个节点（中心节点和所有叶节点）。\n\n对于社区 $C_{All}$：\n- 内部边数 $e_{C_{All}}$ 是图中的总边数。所以，$e_{C_{All}} = m = L$。\n- 度的总和 $K_{C_{All}}$ 是图中所有节点度的总和，即 $2m = 2L$。\n\n现在，我们计算 $Q_{\\text{after}}$。模块度公式中的求和只有一个项。\n$$Q_{\\text{after}} = \\frac{e_{C_{All}}}{m} - \\left(\\frac{K_{C_{All}}}{2m}\\right)^{2}$$\n代入数值：\n$$Q_{\\text{after}} = \\frac{L}{L} - \\left(\\frac{2L}{2L}\\right)^{2}$$\n$$Q_{\\text{after}} = 1 - (1)^{2} = 1 - 1 = 0$$\n\n**3. 模块度的变化 ($\\Delta Q$)**\n\n模块度的变化是最终模块度值与初始模块度值之差。\n$$\\Delta Q = Q_{\\text{after}} - Q_{\\text{before}}$$\n$$\\Delta Q = 0 - \\left(-\\frac{1}{2}\\right) = \\frac{1}{2}$$\n\n**解释：**\n初始模块度 $Q_{\\text{before}} = -1/2$ 是负数。这表明该划分显著差于具有相同度序列的随机图（配置模型零假设）的预期。这是因为网络中的所有边都是社区间的边，而一个好的划分会最大化社区内的边。社区内的边数为 $0$，这小于期望的边数，从而导致了负值。\n\n最终模块度 $Q_{\\text{after}} = 0$ 对应于整个图作为一个单一社区的划分。这种情况总是导致模块度为 $0$，它作为一个中性基准。这意味着该结构并不比随机分配到单一社区更好或更差。\n\n变化量 $\\Delta Q = 1/2$ 是正数，表明根据模块度度量，将两个社区合并为一个是一种改进。这一移动将划分从一个病态的“反社区”结构转变为一个中性基准，因此产生了正向变化。该结果与叶节点的数量 $L$ 无关（对于指定的 $L \\geq 2$）。",
            "answer": "$$\\boxed{\\frac{1}{2}}$$"
        },
        {
            "introduction": "模块度是一个强大的工具，但它并非没有缺点。最后一个练习将引导你探索模块度最著名的局限性之一——分辨率极限（resolution limit）。通过分析一个包含两个明确团簇和一个巨大背景图的案例，你将推导出即使这两个团簇之间只有极少数连接，模块度也可能错误地将它们合并的条件。这个练习对于培养批判性思维至关重要，它提醒我们在应用模块度时，必须警惕其固有的尺度偏好以及可能因此导致的社群“吞并”现象。",
            "id": "4288162",
            "problem": "考虑一个由三个节点不相交的部分组成的无向、无权简单图。第一部分是一个包含 $12$ 个顶点的团（称之为社区 $\\mathcal{A}$）。第二部分是另一个包含 $12$ 个顶点的团（社区 $\\mathcal{B}$）。在 $\\mathcal{A}$ 和 $\\mathcal{B}$ 之间，添加恰好 $s$ 条边，每条边连接 $\\mathcal{A}$ 中的一个顶点和 $\\mathcal{B}$ 中的一个顶点，没有平行边，也没有自环。第三部分是一个背景子图 $\\mathcal{R}$，其顶点数量任意，包含恰好 $M = 10000$ 条边，且 $\\mathcal{R}$ 与 $\\mathcal{A}$ 或 $\\mathcal{B}$ 之间没有边相连。\n\n令划分 $\\mathcal{P}_{\\mathrm{sep}}$ 包含两个社区 $\\mathcal{A}$ 和 $\\mathcal{B}$（视为独立的），以及整个背景 $\\mathcal{R}$（视为单个社区）。令划分 $\\mathcal{P}_{\\mathrm{merge}}$ 与 $\\mathcal{P}_{\\mathrm{sep}}$ 相同，只是将 $\\mathcal{A}$ 和 $\\mathcal{B}$ 合并为一个社区 $\\mathcal{A} \\cup \\mathcal{B}$，而 $\\mathcal{R}$ 仍保持为单个社区。\n\n使用标准的模块度质量函数，配置模型零模型，且分辨率参数等于 $1$，从第一性原理推导使 $\\mathcal{P}_{\\mathrm{merge}}$ 的模块度严格大于 $\\mathcal{P}_{\\mathrm{sep}}$ 的模块度的关于 $s$ 的条件。然后，根据给定的数值参数评估此条件，并确定使 $\\mathcal{P}_{\\mathrm{merge}}$ 模块度大于 $\\mathcal{P}_{\\mathrm{sep}}$ 的最小整数 $s \\geq 1$。\n\n将您的最终答案表示为最小整数 $s$。无需四舍五入。",
            "solution": "问题要求我们找出关于社区间边数 $s$ 的条件，在该条件下，合并两个社区 $\\mathcal{A}$ 和 $\\mathcal{B}$ 会导致模块度得分严格增加。然后，我们必须找到满足此条件的最小整数 $s \\geq 1$。分析将基于无权图模块度的标准定义。\n\n将网络划分为社区的模块度 $Q$ 由以下公式给出：\n$$\nQ = \\sum_{c} \\left[ \\frac{l_c}{m} - \\gamma \\left( \\frac{K_c}{2m} \\right)^2 \\right]\n$$\n其中，总和是对划分中所有社区 $c$ 进行的。在此公式中：\n- $l_c$ 是两个端点都在社区 $c$ 内部的边的数量。\n- $K_c$ 是社区 $c$ 中所有节点的度之和。\n- $m$ 是整个图中的总边数。\n- $\\gamma$ 是分辨率参数，给定为 $\\gamma = 1$。\n\n首先，我们必须计算图的基本属性。\n该图由三部分组成：一个包含 $n_A = 12$ 个顶点的团 $\\mathcal{A}$，一个包含 $n_B = 12$ 个顶点的团 $\\mathcal{B}$，以及一个背景子图 $\\mathcal{R}$。\n团 $\\mathcal{A}$ 内部的边数是 $L_{\\mathcal{A}} = \\binom{12}{2} = \\frac{12 \\times 11}{2} = 66$。\n类似地，团 $\\mathcal{B}$ 内部的边数是 $L_{\\mathcal{B}} = \\binom{12}{2} = 66$。\n背景子图 $\\mathcal{R}$ 中的边数给定为 $M = 10000$。\n有 $s$ 条边连接 $\\mathcal{A}$ 和 $\\mathcal{B}$。$\\mathcal{R}$ 与 $\\mathcal{A}$ 或 $\\mathcal{B}$ 之间没有边相连。\n图中总边数是这些计数的总和：\n$$\nm = L_{\\mathcal{A}} + L_{\\mathcal{B}} + s + M = 66 + 66 + s + 10000 = 10132 + s\n$$\n\n接下来，我们计算每个部分中节点的度之和。一组节点的度之和是内部边数的两倍加上外部边数。\n- 对于 $\\mathcal{A}$：内部边为 $L_{\\mathcal{A}} = 66$。外部边是连接到 $\\mathcal{B}$ 的 $s$ 条边。$\\mathcal{A}$ 中节点的度之和为 $K_{\\mathcal{A}} = 2 L_{\\mathcal{A}} + s = 2(66) + s = 132 + s$。\n- 对于 $\\mathcal{B}$：类似地，$K_{\\mathcal{B}} = 2 L_{\\mathcal{B}} + s = 2(66) + s = 132 + s$。\n- 对于 $\\mathcal{R}$：内部边为 $M = 10000$。没有外部边。$\\mathcal{R}$ 中节点的度之和为 $K_{\\mathcal{R}} = 2M = 2(10000) = 20000$。\n\n我们需要比较两种不同划分 $\\mathcal{P}_{\\mathrm{sep}}$ 和 $\\mathcal{P}_{\\mathrm{merge}}$ 的模块度。\n\n对于划分 $\\mathcal{P}_{\\mathrm{sep}} = \\{\\mathcal{A}, \\mathcal{B}, \\mathcal{R}\\}$，社区分别为 $\\mathcal{A}$、$\\mathcal{B}$ 和 $\\mathcal{R}$。\n每个社区的内部边数是：\n- $l_{\\mathcal{A}} = L_{\\mathcal{A}} = 66$\n- $l_{\\mathcal{B}} = L_{\\mathcal{B}} = 66$\n- $l_{\\mathcal{R}} = M = 10000$\n该划分的模块度是：\n$$\nQ_{\\mathrm{sep}} = \\left[ \\frac{l_{\\mathcal{A}}}{m} - \\left(\\frac{K_{\\mathcal{A}}}{2m}\\right)^2 \\right] + \\left[ \\frac{l_{\\mathcal{B}}}{m} - \\left(\\frac{K_{\\mathcal{B}}}{2m}\\right)^2 \\right] + \\left[ \\frac{l_{\\mathcal{R}}}{m} - \\left(\\frac{K_{\\mathcal{R}}}{2m}\\right)^2 \\right]\n$$\n代入已知表达式：\n$$\nQ_{\\mathrm{sep}} = \\left[ \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 \\right] + \\left[ \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 \\right] + \\left[ \\frac{10000}{m} - \\left(\\frac{20000}{2m}\\right)^2 \\right]\n$$\n\n对于划分 $\\mathcal{P}_{\\mathrm{merge}} = \\{\\mathcal{A} \\cup \\mathcal{B}, \\mathcal{R}\\}$，社区为合并后的群组 $\\mathcal{A} \\cup \\mathcal{B}$ 和背景 $\\mathcal{R}$。\n合并后社区 $\\mathcal{C}_{\\mathrm{merge}} = \\mathcal{A} \\cup \\mathcal{B}$ 的属性是：\n- 内部边 $l_{\\mathcal{C}_{\\mathrm{merge}}}$：这包括 $\\mathcal{A}$ 内部的边、$\\mathcal{B}$ 内部的边，以及 $\\mathcal{A}$ 和 $\\mathcal{B}$ 之间的边。所以，$l_{\\mathcal{C}_{\\mathrm{merge}}} = L_{\\mathcal{A}} + L_{\\mathcal{B}} + s = 66 + 66 + s = 132 + s$。\n- 度之和 $K_{\\mathcal{C}_{\\mathrm{merge}}}$：这是 $\\mathcal{A}$ 和 $\\mathcal{B}$ 中所有节点的度之和。所以，$K_{\\mathcal{C}_{\\mathrm{merge}}} = K_{\\mathcal{A}} + K_{\\mathcal{B}} = (132+s) + (132+s) = 264 + 2s$。\n社区 $\\mathcal{R}$ 保持不变。其属性为 $l_{\\mathcal{R}} = 10000$ 和 $K_{\\mathcal{R}} = 20000$。\n该划分的模块度是：\n$$\nQ_{\\mathrm{merge}} = \\left[ \\frac{l_{\\mathcal{C}_{\\mathrm{merge}}}}{m} - \\left(\\frac{K_{\\mathcal{C}_{\\mathrm{merge}}}}{2m}\\right)^2 \\right] + \\left[ \\frac{l_{\\mathcal{R}}}{m} - \\left(\\frac{K_{\\mathcal{R}}}{2m}\\right)^2 \\right]\n$$\n代入已知表达式：\n$$\nQ_{\\mathrm{merge}} = \\left[ \\frac{132+s}{m} - \\left(\\frac{264+2s}{2m}\\right)^2 \\right] + \\left[ \\frac{10000}{m} - \\left(\\frac{20000}{2m}\\right)^2 \\right]\n$$\n\n我们想找到 $Q_{\\mathrm{merge}} > Q_{\\mathrm{sep}}$ 的条件。让我们计算差值 $\\Delta Q = Q_{\\mathrm{merge}} - Q_{\\mathrm{sep}}$。与社区 $\\mathcal{R}$ 相关的项在两个表达式中是相同的，将会抵消掉。\n$$\n\\Delta Q = \\left( \\frac{132+s}{m} - \\left(\\frac{264+2s}{2m}\\right)^2 \\right) - \\left( \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 + \\frac{66}{m} - \\left(\\frac{132+s}{2m}\\right)^2 \\right)\n$$\n$$\n\\Delta Q = \\frac{132+s}{m} - \\frac{132}{m} - \\frac{(2(132+s))^2}{(2m)^2} + 2\\frac{(132+s)^2}{(2m)^2}\n$$\n$$\n\\Delta Q = \\frac{s}{m} - \\frac{4(132+s)^2}{(2m)^2} + \\frac{2(132+s)^2}{(2m)^2}\n$$\n$$\n\\Delta Q = \\frac{s}{m} - \\frac{2(132+s)^2}{4m^2} = \\frac{s}{m} - \\frac{(132+s)^2}{2m^2}\n$$\n注意，这是合并两个社区 $\\mathcal{A}$ 和 $\\mathcal{B}$（它们之间有 $s$ 条边）时模块度变化通用公式的一个特例：$\\Delta Q = \\frac{s}{m} - \\frac{K_{\\mathcal{A}}K_{\\mathcal{B}}}{2m^2}$。这里，$K_{\\mathcal{A}}=K_{\\mathcal{B}}=132+s$。\n\n$Q_{\\mathrm{merge}} > Q_{\\mathrm{sep}}$ 的条件等价于 $\\Delta Q > 0$：\n$$\n\\frac{s}{m} - \\frac{(132+s)^2}{2m^2} > 0\n$$\n由于 $m = 10132 + s$ 且给定 $s \\geq 1$，所以 $m$ 是严格正数。我们可以将不等式两边乘以 $2m^2$ 而不改变其方向：\n$$\n2ms - (132+s)^2 > 0\n$$\n现在，我们代入 $m = 10132+s$：\n$$\n2s(10132+s) - (132+s)^2 > 0\n$$\n这就是从第一性原理推导出的关于 $s$ 的条件。现在我们必须解这个不等式。\n$$\n20264s + 2s^2 - (132^2 + 2(132)s + s^2) > 0\n$$\n$$\n20264s + 2s^2 - (17424 + 264s + s^2) > 0\n$$\n$$\ns^2 + (20264 - 264)s - 17424 > 0\n$$\n$$\ns^2 + 20000s - 17424 > 0\n$$\n这是一个二次不等式。令 $f(s) = s^2 + 20000s - 17424$。函数 $f(s)$ 代表一个开口向上的抛物线。对于在二次方程 $f(s)=0$ 的根之外的 $s$ 值，该不等式成立。根由二次公式 $s = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$ 给出：\n$$\ns = \\frac{-20000 \\pm \\sqrt{20000^2 - 4(1)(-17424)}}{2(1)}\n$$\n$$\ns = \\frac{-20000 \\pm \\sqrt{400000000 + 69696}}{2}\n$$\n$$\ns = \\frac{-20000 \\pm \\sqrt{400069696}}{2}\n$$\n两个根是：\n$s_1 = \\frac{-20000 - \\sqrt{400069696}}{2}$，这是一个大的负数。\n$s_2 = \\frac{-20000 + \\sqrt{400069696}}{2}$，这是正根。\n\n由于我们只对 $s \\geq 1$ 感兴趣，我们需要找到满足 $s > s_2$ 的最小整数 $s$。让我们估算 $s_2$：\n$\\sqrt{400069696} \\approx \\sqrt{4 \\times 10^8} = 2 \\times 10^4 = 20000$。平方根下的值略大一些。\n让我们在小的整数 $s$ 值处评估 $f(s)$。\n对于 $s=0$：$f(0) = 0^2 + 20000(0) - 17424 = -17424  0$。所以正根 $s_2$ 大于 $0$。\n对于 $s=1$：$f(1) = 1^2 + 20000(1) - 17424 = 1 + 20000 - 17424 = 2577 > 0$。\n由于 $f(0)  0$ 且 $f(1) > 0$，正根 $s_2$ 必定位于区间 $(0, 1)$ 内。\n对于所有 $s > s_2$ 的值，不等式 $f(s) > 0$ 均成立。由于 $0  s_2  1$，满足 $s > s_2$ 的最小整数 $s \\geq 1$ 是 $s=1$。\n\n这个低阈值的原因是背景图 $\\mathcal{R}$ 中存在大量的边 $M = 10000$，这使得总边数 $m$ 非常大。在配置模型零模型中，社区 $\\mathcal{A}$ 和 $\\mathcal{B}$ 之间的期望边数为 $E_{\\mathcal{A}\\mathcal{B}} = \\frac{K_{\\mathcal{A}}K_{\\mathcal{B}}}{2m}$。对于 $s=1$，这个值大约是 $\\frac{133 \\times 133}{2 \\times 10133} \\approx \\frac{17689}{20266} \\approx 0.87$。合并的条件是实际边数 $s$ 大于这个期望数。由于 $1 > 0.87$，即使只有一条边，其连接强度也比随机预期的要强，因此倾向于合并。\n\n因此，使 $\\mathcal{P}_{\\mathrm{merge}}$ 具有更大模块度的最小整数 $s \\geq 1$ 是 $1$。",
            "answer": "$$\n\\boxed{1}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "To truly grasp the Linear Threshold Model, we must begin with its fundamental mechanics. This first practice provides a direct, hands-on calculation of a single, synchronous update step in a small network. By computing the influence on each node and comparing it to a given threshold, you will determine which nodes adopt a new behavior, solidifying your understanding of the core engine that drives all diffusion processes in this model .",
            "id": "4123782",
            "problem": "Consider a stylized socio-technical transition in residential energy systems where households decide whether to adopt a demand response technology based on social influence from their local network. The local influence network is represented by a weighted, undirected adjacency matrix $A \\in \\mathbb{R}^{5 \\times 5}$ over nodes $1,2,3,4,5$, where $A_{ij} = A_{ji} \\geq 0$ encodes the strength of social tie between nodes $i$ and $j$. The adjacency matrix is\n$$\nA \\;=\\; \\begin{pmatrix}\n0 & 0.6 & 0 & 0.4 & 0 \\\\\n0.6 & 0 & 0.7 & 0.5 & 0 \\\\\n0 & 0.7 & 0 & 0 & 0.3 \\\\\n0.4 & 0.5 & 0 & 0 & 0.6 \\\\\n0 & 0 & 0.3 & 0.6 & 0\n\\end{pmatrix}.\n$$\nEach node $i$ has an adoption state $x_i(t) \\in \\{0,1\\}$ at discrete time $t \\in \\mathbb{N}$, where $x_i(t)=1$ indicates that node $i$ has adopted the technology by time $t$. Adoption is irreversible: once $x_i(t)=1$, then $x_i(t')=1$ for all $t' \\geq t$. Let the influence-normalized linear threshold rule be defined as follows. For node $i$ at time $t$, compute the normalized social signal\n$$\ns_i(t) \\;=\\; \\frac{\\sum_{j=1}^{5} A_{ij} \\, x_j(t)}{\\sum_{j=1}^{5} A_{ij}},\n$$\nwith the convention that the denominator is strictly positive for all nodes $i$ under consideration. The Linear Threshold Model (LTM) update is synchronous across nodes and given by\n$$\nx_i(t+1) \\;=\\; \\begin{cases}\n1, & \\text{if } x_i(t)=1 \\text{ or } s_i(t) \\geq \\theta_i, \\\\\n0, & \\text{otherwise},\n\\end{cases}\n$$\nwith a uniform threshold $\\theta_i = \\theta = 0.5$ for all nodes. Suppose the initial adopters at time $t=0$ are nodes $1$ and $3$, so that $x_1(0)=1$, $x_3(0)=1$, and $x_2(0)=x_4(0)=x_5(0)=0$. Simulate one synchronous LTM update to time $t=1$ and determine the number of new adopters (that is, the count of nodes $i$ for which $x_i(0)=0$ and $x_i(1)=1$). Provide your answer as a single integer; no rounding is required.",
            "solution": "The problem is subjected to validation.\n\n### Step 1: Extract Givens\n- The system consists of $5$ nodes, indexed $i, j \\in \\{1, 2, 3, 4, 5\\}$.\n- The social influence network is given by a weighted, undirected adjacency matrix $A \\in \\mathbb{R}^{5 \\times 5}$:\n$$\nA \\;=\\; \\begin{pmatrix}\n0 & 0.6 & 0 & 0.4 & 0 \\\\\n0.6 & 0 & 0.7 & 0.5 & 0 \\\\\n0 & 0.7 & 0 & 0 & 0.3 \\\\\n0.4 & 0.5 & 0 & 0 & 0.6 \\\\\n0 & 0 & 0.3 & 0.6 & 0\n\\end{pmatrix}\n$$\n- The adoption state of node $i$ at discrete time $t \\in \\mathbb{N}$ is $x_i(t) \\in \\{0,1\\}$.\n- Adoption is irreversible: if $x_i(t)=1$, then $x_i(t')=1$ for all $t' \\geq t$.\n- The normalized social signal for node $i$ at time $t$ is $s_i(t) = \\frac{\\sum_{j=1}^{5} A_{ij} \\, x_j(t)}{\\sum_{j=1}^{5} A_{ij}}$. The denominator is strictly positive for all $i$.\n- The LTM update rule is synchronous and given by:\n$$\nx_i(t+1) \\;=\\; \\begin{cases}\n1, & \\text{if } x_i(t)=1 \\text{ or } s_i(t) \\geq \\theta_i, \\\\\n0, & \\text{otherwise},\n\\end{cases}\n$$\n- The adoption threshold is uniform: $\\theta_i = \\theta = 0.5$ for all $i$.\n- The initial state at time $t=0$ is given by $x_1(0)=1$, $x_3(0)=1$, and $x_2(0)=x_4(0)=x_5(0)=0$.\n- The task is to find the number of new adopters at time $t=1$. A new adopter is a node $i$ for which $x_i(0)=0$ and $x_i(1)=1$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem describes a simulation of a Linear Threshold Model on a small network.\n- **Scientifically Grounded:** The Linear Threshold Model is a standard and well-established model in network science for studying diffusion processes. Its application to socio-technical transitions is a legitimate area of study in energy systems modeling. The model is mathematically sound.\n- **Well-Posed:** All necessary components are provided: the network structure ($A$), the initial state ($x(0)$), the model dynamics (LTM update rule), and model parameters ($\\theta$). The question asks for a specific, computable quantity.\n- **Objective:** The problem is stated using precise mathematical definitions and contains no subjective or ambiguous language.\n- **Consistency Check:** The matrix $A$ is symmetric ($A_{ij} = A_{ji}$), as stated. The row sums (total influence weights) are all positive: $\\sum_j A_{1j}=1.0$, $\\sum_j A_{2j}=1.8$, $\\sum_j A_{3j}=1.0$, $\\sum_j A_{4j}=1.5$, $\\sum_j A_{5j}=0.9$. This confirms the condition that the denominator in the social signal calculation is strictly positive.\n\n### Step 3: Verdict and Action\nThe problem is valid. It is a well-posed, self-contained, and scientifically sound application of a standard network model. I will proceed with the solution.\n\nThe state of the system at time $t=0$ can be represented by the vector $x(0) = [x_1(0), x_2(0), x_3(0), x_4(0), x_5(0)]^T = [1, 0, 1, 0, 0]^T$.\nWe need to determine the state vector $x(1)$ at time $t=1$. The LTM update rule is applied synchronously to all nodes.\n\nThe update rule for node $i$ is $x_i(1) = 1$ if $x_i(0)=1$ or $s_i(0) \\geq \\theta$. Otherwise, $x_i(1)=0$.\nThe threshold is $\\theta = 0.5$.\n\nFor nodes that have already adopted at $t=0$, their state remains unchanged due to the irreversibility of adoption.\n- For node $1$: $x_1(0)=1$, so $x_1(1)=1$.\n- For node $3$: $x_3(0)=1$, so $x_3(1)=1$.\n\nFor nodes that have not yet adopted at $t=0$ (i.e., $x_i(0)=0$), we must calculate their social signal $s_i(0)$ and compare it to the threshold $\\theta$. The non-adopters are nodes $2$, $4$, and $5$.\n\nThe social signal is $s_i(0) = \\frac{\\sum_{j=1}^{5} A_{ij} x_j(0)}{\\sum_{j=1}^{5} A_{ij}}$.\nThe numerator involves a sum over the influence from adopted neighbors. Since only nodes $1$ and $3$ are adopters at $t=0$, the numerator for node $i$ simplifies to $A_{i1} x_1(0) + A_{i3} x_3(0) = A_{i1}(1) + A_{i3}(1) = A_{i1} + A_{i3}$.\n\nLet's first compute the total influence weights (denominators), which are the row sums of $A$. Let $W_i = \\sum_{j=1}^{5} A_{ij}$.\n$W_1 = A_{12} + A_{14} = 0.6 + 0.4 = 1.0$\n$W_2 = A_{21} + A_{23} + A_{24} = 0.6 + 0.7 + 0.5 = 1.8$\n$W_3 = A_{32} + A_{35} = 0.7 + 0.3 = 1.0$\n$W_4 = A_{41} + A_{42} + A_{45} = 0.4 + 0.5 + 0.6 = 1.5$\n$W_5 = A_{53} + A_{54} = 0.3 + 0.6 = 0.9$\n\nNow we evaluate the adoption condition for each non-adopter:\n\n**Node 2:**\nThe influence on node $2$ from the initial adopters is $A_{21} + A_{23} = 0.6 + 0.7 = 1.3$.\nThe social signal is $s_2(0) = \\frac{1.3}{W_2} = \\frac{1.3}{1.8}$.\nWe check if $s_2(0) \\geq \\theta$:\n$\\frac{1.3}{1.8} \\geq 0.5 \\implies 1.3 \\geq 0.5 \\times 1.8 \\implies 1.3 \\geq 0.9$.\nThis inequality is true. Therefore, node $2$ adopts at $t=1$, so $x_2(1)=1$.\n\n**Node 4:**\nThe influence on node $4$ from the initial adopters is $A_{41} + A_{43} = 0.4 + 0 = 0.4$.\nThe social signal is $s_4(0) = \\frac{0.4}{W_4} = \\frac{0.4}{1.5}$.\nWe check if $s_4(0) \\geq \\theta$:\n$\\frac{0.4}{1.5} \\geq 0.5 \\implies 0.4 \\geq 0.5 \\times 1.5 \\implies 0.4 \\geq 0.75$.\nThis inequality is false. Therefore, node $4$ does not adopt at $t=1$, so $x_4(1)=0$.\n\n**Node 5:**\nThe influence on node $5$ from the initial adopters is $A_{51} + A_{53} = 0 + 0.3 = 0.3$.\nThe social signal is $s_5(0) = \\frac{0.3}{W_5} = \\frac{0.3}{0.9} = \\frac{1}{3}$.\nWe check if $s_5(0) \\geq \\theta$:\n$\\frac{1}{3} \\geq 0.5$.\nThis is equivalent to $1 \\geq 1.5$, which is false. Therefore, node $5$ does not adopt at $t=1$, so $x_5(1)=0$.\n\nThe state vector at time $t=1$ is $x(1) = [x_1(1), x_2(1), x_3(1), x_4(1), x_5(1)]^T = [1, 1, 1, 0, 0]^T$.\nA new adopter is a node $i$ such that $x_i(0)=0$ and $x_i(1)=1$.\nComparing $x(0)=[1, 0, 1, 0, 0]^T$ with $x(1)=[1, 1, 1, 0, 0]^T$:\n- Node $2$: $x_2(0)=0$ and $x_2(1)=1$. Node $2$ is a new adopter.\n- Node $4$: $x_4(0)=0$ and $x_4(1)=0$. Node $4$ is not a new adopter.\n- Node $5$: $x_5(0)=0$ and $x_5(1)=0$. Node $5$ is not a new adopter.\n\nThere is only one new adopter, which is node $2$. The number of new adopters is $1$.",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "With the basic update rule established, we can now explore more nuanced strategic questions about influence. A common heuristic is to target the most connected individuals, but is this always the best strategy? This exercise challenges that intuition by introducing heterogeneous thresholds, where more connected nodes are also more resistant to influence. Simulating the resulting cascades will reveal the crucial interplay between network topology and node attributes, demonstrating why simple centrality measures can be misleading predictors of influence .",
            "id": "4271418",
            "problem": "Consider a simple, undirected, unweighted network (graph) $G=(V,E)$ with node set $V=\\{h,a,b,c,d,e,f,g\\}$ and edges $E$ given by the following adjacency specification: $h$ is connected to $a$, $b$, $c$, $d$, $e$; $c$ is connected to $h$, $d$, $e$, $f$; $d$ is connected to $h$, $c$, $e$, $f$, $g$; $e$ is connected to $h$, $c$, $d$, $g$; $f$ is connected to $c$, $d$; $g$ is connected to $d$, $e$; $a$ is connected to $h$; $b$ is connected to $h$. Let $k_i$ denote the degree (number of neighbors) of node $i$, and let $k_{\\max}=\\max_{i\\in V} k_i$.\n\nThe dynamic process is the Linear Threshold Model (LTM), defined as follows. Time evolves in discrete steps $t=0,1,2,\\dots$. Each node $i$ has a threshold fraction $f_i \\in [0,1]$ and is either inactive or active. At each step, any inactive node $i$ becomes active if the fraction of its neighbors that are active is at least its threshold fraction; that is, if $\\frac{\\text{number of active neighbors of }i}{k_i} \\ge f_i$. Once active, a node remains active. The process starts at $t=0$ with a single seed node $s$ set to active, and all other nodes inactive. The influence of a seed $s$ is defined as the final cascade size $S(s)$, meaning the total number of active nodes when the process converges.\n\nConstruct a heterogeneous-threshold LTM in which high-degree nodes have higher thresholds according to the rule $f_i = f_0 + \\gamma \\frac{k_i}{k_{\\max}}$ with parameters $f_0=0.1$ and $\\gamma=0.5$. Using this construction on $G$, analyze whether and how degree centrality (measured by $k_i$) predicts single-seed influence $S(i)$.\n\nWhich of the following statements is correct under this model and network?\n\nA. Seeding node $d$ produces a global cascade that activates all nodes, while seeding node $h$ does not, even though $k_d = k_h$, so degree centrality fails to predict single-seed influence under the heterogeneous thresholds.\n\nB. The final cascade size $S(i)$ from any single-node seed $i$ is strictly increasing in $k_i$ (higher degree always implies a larger cascade).\n\nC. Seeding node $h$ yields the largest cascade among all single-node seeds because $k_h$ is maximal.\n\nD. Under the specified thresholds, nodes with identical degree centrality always produce identical cascade sizes when seeded.",
            "solution": "The problem statement is first validated to ensure it is scientifically sound, well-posed, and objective.\n\n### Step 1: Extract Givens\n-   The network is a simple, undirected, unweighted graph $G=(V,E)$.\n-   The set of nodes is $V=\\{h,a,b,c,d,e,f,g\\}$, so the total number of nodes is $|V|=8$.\n-   The edges $E$ are defined by the adjacency list:\n    -   $N(h) = \\{a, b, c, d, e\\}$\n    -   $N(a) = \\{h\\}$\n    -   $N(b) = \\{h\\}$\n    -   $N(c) = \\{h, d, e, f\\}$\n    -   $N(d) = \\{h, c, e, f, g\\}$\n    -   $N(e) = \\{h, c, d, g\\}$\n    -   $N(f) = \\{c, d\\}$\n    -   $N(g) = \\{d, e\\}$\n-   The dynamics are governed by the Linear Threshold Model (LTM).\n-   An inactive node $i$ becomes active if the fraction of its active neighbors meets or exceeds its threshold $f_i$: $\\frac{|N(i) \\cap \\text{Active}|}{k_i} \\ge f_i$.\n-   A single seed node $s$ is active at $t=0$.\n-   Influence $S(s)$ is the final number of active nodes.\n-   The threshold for node $i$ is given by the rule $f_i = f_0 + \\gamma \\frac{k_i}{k_{\\max}}$.\n-   Parameters are $f_0=0.1$ and $\\gamma=0.5$.\n-   $k_i$ is the degree of node $i$.\n-   $k_{\\max} = \\max_{i \\in V} k_i$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem describes a standard influence maximization scenario using the Linear Threshold Model on a well-defined graph. The LTM is a fundamental model in network science. All parameters are specified, and the graph structure is explicit and consistent (the adjacency list is symmetric). The problem is self-contained, mathematically formalizable, and scientifically grounded in the field of complex systems. There are no contradictions, ambiguities, or factual errors. The problem is valid.\n\n### Step 3: Derivation\nThe solution requires simulating the LTM cascade for each possible seed node to determine its influence $S(s)$.\n\nFirst, we calculate the degree $k_i$ for each node $i \\in V$:\n-   $k_h = |\\{a, b, c, d, e\\}| = 5$\n-   $k_a = |\\{h\\}| = 1$\n-   $k_b = |\\{h\\}| = 1$\n-   $k_c = |\\{h, d, e, f\\}| = 4$\n-   $k_d = |\\{h, c, e, f, g\\}| = 5$\n-   $k_e = |\\{h, c, d, g\\}| = 4$\n-   $k_f = |\\{c, d\\}| = 2$\n-   $k_g = |\\{d, e\\}| = 2$\n\nThe maximum degree is $k_{\\max} = \\max(5,1,1,4,5,4,2,2) = 5$.\n\nNext, we calculate the activation threshold $f_i$ for each node using the formula $f_i = 0.1 + 0.5 \\frac{k_i}{5} = 0.1 + 0.1 k_i$:\n-   $f_h = 0.1 + 0.1(5) = 0.6$\n-   $f_a = 0.1 + 0.1(1) = 0.2$\n-   $f_b = 0.1 + 0.1(1) = 0.2$\n-   $f_c = 0.1 + 0.1(4) = 0.5$\n-   $f_d = 0.1 + 0.1(5) = 0.6$\n-   $f_e = 0.1 + 0.1(4) = 0.5$\n-   $f_f = 0.1 + 0.1(2) = 0.3$\n-   $f_g = 0.1 + 0.1(2) = 0.3$\n\nNow, we simulate the cascade for each relevant seed node mentioned in the options ($h$ and $d$) and other nodes as needed for a complete analysis. Let $A_t$ be the set of active nodes at step $t$.\n\n**Seed $s=h$:**\n-   $t=0$: $A_0 = \\{h\\}$. Cascade size $S=1$.\n-   $t=1$: Check neighbors of $h$: $\\{a,b,c,d,e\\}$.\n    -   Node $a$ ($k_a=1, f_a=0.2$): has $1$ active neighbor ($h$) of $1$. Fraction = $1/1 = 1.0$. Since $1.0 \\ge 0.2$, $a$ becomes active.\n    -   Node $b$ ($k_b=1, f_b=0.2$): has $1$ active neighbor ($h$) of $1$. Fraction = $1/1 = 1.0$. Since $1.0 \\ge 0.2$, $b$ becomes active.\n    -   Node $c$ ($k_c=4, f_c=0.5$): has $1$ active neighbor ($h$) of $4$. Fraction = $1/4 = 0.25$. Since $0.25  0.5$, $c$ remains inactive.\n    -   Node $d$ ($k_d=5, f_d=0.6$): has $1$ active neighbor ($h$) of $5$. Fraction = $1/5 = 0.2$. Since $0.2  0.6$, $d$ remains inactive.\n    -   Node $e$ ($k_e=4, f_e=0.5$): has $1$ active neighbor ($h$) of $4$. Fraction = $1/4 = 0.25$. Since $0.25  0.5$, $e$ remains inactive.\n-   $A_1 = \\{h, a, b\\}$. $S=3$.\n-   $t=2$: New active nodes from $t=1$ are $\\{a,b\\}$. Their only neighbor is $h$, which is already active. No other inactive nodes are affected. The cascade stops.\n-   Final cascade size: $S(h) = 3$.\n\n**Seed $s=d$:**\n-   $t=0$: $A_0 = \\{d\\}$. Cascade size $S=1$.\n-   $t=1$: Check neighbors of $d$: $\\{h,c,e,f,g\\}$.\n    -   Node $f$ ($k_f=2, f_f=0.3$): has $1$ active neighbor ($d$) of $2$. Fraction = $1/2 = 0.5$. Since $0.5 \\ge 0.3$, $f$ becomes active.\n    -   Node $g$ ($k_g=2, f_g=0.3$): has $1$ active neighbor ($d$) of $2$. Fraction = $1/2 = 0.5$. Since $0.5 \\ge 0.3$, $g$ becomes active.\n    -   Nodes $h, c, e$ have high degrees and do not activate from a single neighbor.\n-   $A_1 = \\{d, f, g\\}$. $S=3$.\n-   $t=2$: New active nodes are $\\{f,g\\}$. Check their inactive neighbors $\\{c, e\\}$.\n    -   Node $c$ ($k_c=4, f_c=0.5$): has active neighbors $\\{d,f\\}$ among $\\{h,d,e,f\\}$. Fraction = $2/4 = 0.5$. Since $0.5 \\ge 0.5$, $c$ becomes active.\n    -   Node $e$ ($k_e=4, f_e=0.5$): has active neighbors $\\{d,g\\}$ among $\\{h,c,d,g\\}$. Fraction = $2/4 = 0.5$. Since $0.5 \\ge 0.5$, $e$ becomes active.\n-   $A_2 = \\{d, f, g, c, e\\}$. $S=5$.\n-   $t=3$: New active nodes are $\\{c,e\\}$. Check their inactive neighbors. The only common inactive neighbor is $h$.\n    -   Node $h$ ($k_h=5, f_h=0.6$): has active neighbors $\\{c,d,e\\}$ among $\\{a,b,c,d,e\\}$. Fraction = $3/5 = 0.6$. Since $0.6 \\ge 0.6$, $h$ becomes active.\n-   $A_3 = \\{d, f, g, c, e, h\\}$. $S=6$.\n-   $t=4$: New active node is $h$. Check its inactive neighbors $\\{a,b\\}$.\n    -   Node $a$ ($k_a=1, f_a=0.2$): has $1$ active neighbor ($h$) of $1$. Fraction = $1/1 = 1.0$. Since $1.0 \\ge 0.2$, $a$ becomes active.\n    -   Node $b$ ($k_b=1, f_b=0.2$): has $1$ active neighbor ($h$) of $1$. Fraction = $1/1 = 1.0$. Since $1.0 \\ge 0.2$, $b$ becomes active.\n-   $A_4 = \\{d, f, g, c, e, h, a, b\\}$. $S=8$.\n-   All nodes are active. This is a global cascade. The process converges.\n-   Final cascade size: $S(d) = 8$.\n\nTo evaluate all options, we calculate cascade sizes for other seeds.\n-   $S(a)=1, S(b)=1, S(f)=1, S(g)=1$ as their single neighbors ($h$ for $a,b$; $c,d$ for $f$; $d,e$ for $g$) have thresholds too high to be activated by one node.\n-   $S(c)=2$ (activates $f$).\n-   $S(e)=2$ (activates $g$).\n\nSummary of results:\n-   $k_h=5, S(h)=3$\n-   $k_d=5, S(d)=8$\n-   $k_c=4, S(c)=2$\n-   $k_e=4, S(e)=2$\n-   $k_f=2, S(f)=1$\n-   $k_g=2, S(g)=1$\n-   $k_a=1, S(a)=1$\n-   $k_b=1, S(b)=1$\n\n### Option-by-Option Analysis\n\n**A. Seeding node $d$ produces a global cascade that activates all nodes, while seeding node $h$ does not, even though $k_d = k_h$, so degree centrality fails to predict single-seed influence under the heterogeneous thresholds.**\nOur simulation showed that seeding $d$ activates all $8$ nodes, resulting in a global cascade ($S(d)=8$). Seeding node $h$ results in a cascade of size $3$ ($S(h)=3$), which is not global. Both nodes have the same maximal degree, $k_d = k_h = 5$. Since two nodes with identical degree centrality produce vastly different influence ($S(d)=8 \\ne S(h)=3$), degree centrality by itself is not a reliable predictor of influence in this context. The statement is fully supported by our analysis.\n**Verdict: Correct.**\n\n**B. The final cascade size $S(i)$ from any single-node seed $i$ is strictly increasing in $k_i$ (higher degree always implies a larger cascade).**\nThis statement implies that for any two nodes $i$ and $j$, if $k_i > k_j$, then $S(i) > S(j)$. Let's test this with a counterexample. Consider node $f$ ($k_f=2$) and node $a$ ($k_a=1$). Here, $k_f > k_a$. For the statement to be true, we must have $S(f) > S(a)$. However, our calculations show $S(f)=1$ and $S(a)=1$. Since $S(f)$ is not strictly greater than $S(a)$, the relationship is not strictly increasing.\n**Verdict: Incorrect.**\n\n**C. Seeding node $h$ yields the largest cascade among all single-node seeds because $k_h$ is maximal.**\nOur simulation shows that seeding node $h$ yields a cascade of size $S(h)=3$. Seeding node $d$ yields a cascade of size $S(d)=8$, which is the largest possible. Therefore, seeding node $h$ does not yield the largest cascade. The premise of the statement is false.\n**Verdict: Incorrect.**\n\n**D. Under the specified thresholds, nodes with identical degree centrality always produce identical cascade sizes when seeded.**\nThis statement claims that if $k_i = k_j$, then $S(i) = S(j)$. Let's test this. Nodes $d$ and $h$ both have degree $k_d = k_h = 5$. However, their cascade sizes are $S(d)=8$ and $S(h)=3$. Since $S(d) \\ne S(h)$, we have a direct counterexample.\n**Verdict: Incorrect.**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "Moving from simulation to optimization, our final practice formalizes the search for the most influential nodes. This exercise guides you through framing the influence maximization problem as an Integer Linear Program (ILP), a powerful technique from the field of optimization. You will not only model the LTM dynamics with linear constraints but also explore the concept of the integrality gap, which is fundamental to understanding the performance of approximation algorithms for this NP-hard problem .",
            "id": "3138786",
            "problem": "You are given a directed graph with node set $\\mathcal{V}$ and edge set $\\mathcal{E} \\subseteq \\mathcal{V} \\times \\mathcal{V}$. Time evolves in discrete steps $t \\in \\{0,1\\}$. A subset of nodes can be chosen as initial seeds at $t=0$. The dynamics approximate the Linear Threshold Model via a $k$-of-$d$ rule: a node $v$ with in-neighbors $N^{-}(v)$ has an integer threshold $k_v \\in \\mathbb{Z}_{\\ge 0}$, and at time $t=1$ it becomes active if at least $k_v$ of its in-neighbors were active at time $t=0$. Activations are progressive: once a node is active it remains active. The budget constraint is that at most $B$ seeds may be chosen at $t=0$.\n\nYour task is to (i) formulate an Integer Linear Programming (ILP) model for this process using binary variables and linear constraints, (ii) write its Linear Programming (LP) relaxation by relaxing integrality to intervals, and (iii) compute the integrality gap on a set of small graphs by comparing the optimal ILP objective to the optimal LP relaxation objective.\n\nBase definitions to be used:\n- An Integer Linear Program (ILP) maximizes or minimizes a linear objective over a polyhedron described by linear equalities and inequalities, with the additional restriction that some variables must take integer values.\n- A Linear Program (LP) is an ILP in which all variables are allowed to be real-valued within given bounds.\n- The approximated Linear Threshold Model here is encoded by a $k$-of-$d$ activation rule: at time $t=1$, a node $v$ may newly activate if and only if the number of active in-neighbors at time $t=0$ is at least $k_v$.\n\nDecision variables for the ILP:\n- For each node $v \\in \\mathcal{V}$, binary seed variable $x_v \\in \\{0,1\\}$ indicates whether $v$ is seeded at time $t=0$.\n- For each node $v \\in \\mathcal{V}$, binary state variable $y_{v,0} \\in \\{0,1\\}$ indicates whether $v$ is active at time $t=0$; and binary state variable $y_{v,1} \\in \\{0,1\\}$ indicates whether $v$ is active at time $t=1$.\n- For each node $v \\in \\mathcal{V}$, binary transition variable $z_{v,1} \\in \\{0,1\\}$ indicates whether $v$ newly activates at time $t=1$ (i.e., transitions from inactive at $t=0$ to active at $t=1$).\n\nConstraints to encode the dynamics and budget:\n1) Seeding defines initial activity: for all $v \\in \\mathcal{V}$,\n$$\ny_{v,0} = x_v.\n$$\n2) Progressive activation and new-activation linkage (monotonicity and consistency): for all $v \\in \\mathcal{V}$,\n$$\ny_{v,1} \\ge y_{v,0}, \\quad y_{v,1} \\le y_{v,0} + z_{v,1}.\n$$\n3) Thresholded influence at $t=1$: for all $v \\in \\mathcal{V}$,\n$$\n\\sum_{u \\in N^{-}(v)} y_{u,0} \\ge k_v \\, z_{v,1}.\n$$\n4) Budget on seeds:\n$$\n\\sum_{v \\in \\mathcal{V}} x_v \\le B.\n$$\n5) Variable domains (ILP): $x_v \\in \\{0,1\\}$, $y_{v,0} \\in \\{0,1\\}$, $y_{v,1} \\in \\{0,1\\}$, $z_{v,1} \\in \\{0,1\\}$.\n\nObjective:\nMaximize the number of active nodes at time $t=1$:\n$$\n\\max \\sum_{v \\in \\mathcal{V}} y_{v,1}.\n$$\n\nThe LP relaxation is obtained by replacing the domain constraints with intervals:\n$$\n0 \\le x_v \\le 1, \\quad 0 \\le y_{v,0} \\le 1, \\quad 0 \\le y_{v,1} \\le 1, \\quad 0 \\le z_{v,1} \\le 1.\n$$\n\nDefine the integrality gap for each instance as the ratio\n$$\n\\text{gap} = \\frac{\\text{LP optimum}}{\\text{ILP optimum}},\n$$\nwhere the numerator is the optimal objective value of the LP relaxation and the denominator is the optimal objective value of the ILP.\n\nImplement a program that, for each test case below, computes:\n- The ILP optimal objective value by exact enumeration over seed sets consistent with the budget and simulating the $k$-of-$d$ activation for exactly one time step.\n- The LP relaxation optimal objective value by solving the corresponding linear program.\n- The integrality gap as defined above.\n\nImportant implementation notes:\n- Express all results as real numbers in decimal notation.\n- Round all printed numeric results to exactly four digits after the decimal point.\n\nTest suite to evaluate:\n- Test case A (happy path with a clear integrality gap):\n  - Nodes: $\\{0,1,2,3,4\\}$.\n  - Directed edges: $(0 \\to 2)$, $(0 \\to 3)$, $(0 \\to 4)$, $(1 \\to 2)$, $(1 \\to 3)$, $(1 \\to 4)$.\n  - Thresholds: $k_0 = 10$, $k_1 = 10$, $k_2 = 2$, $k_3 = 2$, $k_4 = 2$.\n  - Budget: $B = 1$.\n- Test case B (boundary where LP equals ILP):\n  - Same nodes and edges as Test case A.\n  - Thresholds: $k_0 = 10$, $k_1 = 10$, $k_2 = 1$, $k_3 = 1$, $k_4 = 1$.\n  - Budget: $B = 1$.\n- Test case C (small symmetric graph):\n  - Nodes: $\\{0,1,2\\}$.\n  - Directed edges: complete without self-loops, i.e., $(0 \\to 1)$, $(0 \\to 2)$, $(1 \\to 0)$, $(1 \\to 2)$, $(2 \\to 0)$, $(2 \\to 1)$.\n  - Thresholds: $k_0 = 2$, $k_1 = 2$, $k_2 = 2$.\n  - Budget: $B = 1$.\n\nFinal output format:\nYour program should produce a single line of output containing a list with three entries, one per test case, where each entry is a list of three numbers: $[\\text{ILP optimum}, \\text{LP optimum}, \\text{gap}]$. The overall output must be a comma-separated list enclosed in a single pair of square brackets. For example:\n$[[a_1,b_1,c_1],[a_2,b_2,c_2],[a_3,b_3,c_3]]$,\nwhere each $a_i$, $b_i$, and $c_i$ is rounded to four decimal places. No additional text should be printed.",
            "solution": "The user-provided problem has been assessed and is valid. The following is a detailed solution.\n\n### **Problem Validation**\n\n**Step 1: Extract Givens**\n- **Graph and Dynamics**: A directed graph $G=(\\mathcal{V}, \\mathcal{E})$ with discrete time $t \\in \\{0, 1\\}$.\n- **Activation Rule**: A node $v$ activates at $t=1$ if the number of its in-neighbors active at $t=0$ is at least $k_v$, where $k_v \\in \\mathbb{Z}_{\\ge 0}$ is an integer threshold. Activation is progressive.\n- **Budget**: At most $B$ nodes can be chosen as seeds at $t=0$.\n- **ILP Decision Variables**:\n    - $x_v \\in \\{0,1\\}$: Seed indicator for node $v$.\n    - $y_{v,0} \\in \\{0,1\\}$: Activity state of node $v$ at $t=0$.\n    - $y_{v,1} \\in \\{0,1\\}$: Activity state of node $v$ at $t=1$.\n    - $z_{v,1} \\in \\{0,1\\}$: New activation indicator for node $v$ at $t=1$.\n- **ILP Constraints**:\n    1.  $y_{v,0} = x_v, \\forall v \\in \\mathcal{V}$\n    2.  $y_{v,1} \\ge y_{v,0}, \\quad y_{v,1} \\le y_{v,0} + z_{v,1}, \\forall v \\in \\mathcal{V}$\n    3.  $\\sum_{u \\in N^{-}(v)} y_{u,0} \\ge k_v \\, z_{v,1}, \\forall v \\in \\mathcal{V}$\n    4.  $\\sum_{v \\in \\mathcal{V}} x_v \\le B$\n    5.  All variables are binary.\n- **Objective Function**: Maximize $\\sum_{v \\in \\mathcal{V}} y_{v,1}$.\n- **LP Relaxation**: Constraints are identical, but variable domains are relaxed to the interval $[0, 1]$.\n- **Integrality Gap**: Defined as $\\text{gap} = \\frac{\\text{LP optimum}}{\\text{ILP optimum}}$.\n- **Computational Task**:\n    - Compute ILP optimum by exact enumeration of seed sets.\n    - Compute LP optimum by solving the LP relaxation.\n    - Compute the integrality gap.\n- **Test Cases**:\n    - **A**: Nodes $\\{0,1,2,3,4\\}$, Edges $\\{(0,2), (0,3), (0,4), (1,2), (1,3), (1,4)\\}$, Thresholds $k_0=10, k_1=10, k_2=2, k_3=2, k_4=2$, Budget $B=1$.\n    - **B**: Same as A but with Thresholds $k_2=1, k_3=1, k_4=1$.\n    - **C**: Nodes $\\{0,1,2\\}$, Edges are a complete directed graph without self-loops, Thresholds $k_0=2, k_1=2, k_2=2$, Budget $B=1$.\n- **Output Formatting**: A list of lists of three numbers each `[[ilp_opt, lp_opt, gap], ...]`, with all numbers rounded to four decimal places.\n\n**Step 2: Validate Using Extracted Givens**\n- **Scientifically Grounded**: The problem is well-grounded in the field of optimization and network science. The Linear Threshold Model is a standard model for influence propagation, and its formulation as an Integer Linear Program is a classic exercise in mathematical modeling.\n- **Well-Posed**: The problem asks for the optimal values of an ILP and its LP relaxation. For both, the objective function is linear and the feasible region is a compact set (for the LP, a polytope; for the ILP, a finite set of integer points within that polytope). Existence of an optimal value is guaranteed. The instructions are specific and lead to a unique numerical answer for each requested value.\n- **Objective**: The problem is stated using precise mathematical language, with all terms and variables clearly defined.\n- **Conclusion**: The problem does not exhibit any flaws such as scientific unsoundness, incompleteness, or ambiguity. It is a valid, well-posed problem.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A complete solution will be provided.\n\n### **Solution Methodology**\n\nThe problem requires a two-part computation for each test case: finding the optimal value of an Integer Linear Program (ILP) and its Linear Programming (LP) relaxation.\n\n**1. ILP Optimal Value via Enumeration**\nAs instructed, the exact ILP optimum is found by enumerating all valid initial seedings. For a graph with $N=|\\mathcal{V}|$ nodes and a budget of $B$, there are $\\binom{N}{B}$ possible sets of initial seeds. Since the test cases involve small values of $N$ and $B$, this approach is computationally feasible.\n\nThe algorithm is as follows for each test case:\n1. Initialize $\\text{max\\_active\\_nodes} = 0$.\n2. Generate all unique combinations of $B$ nodes from the set $\\mathcal{V}$.\n3. For each combination (a `seed_set`):\n    a. The set of active nodes at time $t=0$ is the `seed_set`.\n    b. The set of active nodes at time $t=1$ initially contains the `seed_set` due to progressive activation.\n    c. For each node $v \\in \\mathcal{V}$ that is not in the `seed_set`, count its number of active in-neighbors at $t=0$. Let this be $I_v = |\\{u \\in N^{-}(v) \\mid u \\in \\text{seed\\_set}\\}|$.\n    d. If $I_v \\ge k_v$, node $v$ becomes active at $t=1$. Add $v$ to the set of active nodes at $t=1$.\n    e. The total number of active nodes for this `seed_set` is the size of the final active set at $t=1$.\n    f. Update $\\text{max\\_active\\_nodes}$ if the current total is greater.\n4. The final value of $\\text{max\\_active\\_nodes}$ is the ILP optimum.\n\n**2. LP Relaxation Optimal Value**\nThe LP relaxation is solved using a standard numerical solver, specifically `scipy.optimize.linprog`. This function solves minimization problems of the form:\n$$\n\\min_{\\mathbf{w}} \\mathbf{c}^T \\mathbf{w} \\quad \\text{subject to} \\quad A_{ub} \\mathbf{w} \\le \\mathbf{b}_{ub}, \\quad A_{eq} \\mathbf{w} = \\mathbf{b}_{eq}, \\quad \\mathbf{l} \\le \\mathbf{w} \\le \\mathbf{u}.\n$$\nOur problem must be converted to this format. Let $N=|\\mathcal{V}|$. We define a single vector of $4N$ decision variables $\\mathbf{w}$, ordered as:\n$$\n\\mathbf{w} = [x_0, \\dots, x_{N-1}, y_{0,0}, \\dots, y_{N-1,0}, y_{0,1}, \\dots, y_{N-1,1}, z_{0,1}, \\dots, z_{N-1,1}]^T.\n$$\n- **Objective**: To maximize $\\sum_{v=0}^{N-1} y_{v,1}$, we minimize its negative, so the objective vector $\\mathbf{c}$ has entries of $-1$ for variables $y_{v,1}$ and $0$ for all other variables.\n- **Bounds**: All variables are relaxed to the interval $[0, 1]$, so $\\mathbf{l}=\\mathbf{0}$ and $\\mathbf{u}=\\mathbf{1}$.\n- **Constraints**:\n    1.  $y_{v,0} = x_v \\implies y_{v,0} - x_v = 0$. This forms the equality constraint matrix $A_{eq}$ and vector $\\mathbf{b}_{eq}$. For each $v$, a row in $A_{eq}$ will have a $1$ at the position for $y_{v,0}$ and a $-1$ at the position for $x_v$. $\\mathbf{b}_{eq}$ is a zero vector.\n    2.  $y_{v,1} \\ge y_{v,0} \\implies y_{v,0} - y_{v,1} \\le 0$. This is an inequality constraint. For each $v$, a row in $A_{ub}$ will have a $1$ for $y_{v,0}$ and a $-1$ for $y_{v,1}$.\n    3.  $y_{v,1} \\le y_{v,0} + z_{v,1} \\implies y_{v,1} - y_{v,0} - z_{v,1} \\le 0$. For each $v$, a row in $A_{ub}$ will have a $1$ for $y_{v,1}$, a $-1$ for $y_{v,0}$, and a $-1$ for $z_{v,1}$.\n    4.  $\\sum_{u \\in N^{-}(v)} y_{u,0} \\ge k_v z_{v,1} \\implies k_v z_{v,1} - \\sum_{u \\in N^{-}(v)} y_{u,0} \\le 0$. For each $v$, a row in $A_{ub}$ will have $k_v$ for $z_{v,1}$ and $-1$ for each $y_{u,0}$ where $u \\in N^{-}(v)$.\n    5.  $\\sum_{v \\in \\mathcal{V}} x_v \\le B$. This is a single row in $A_{ub}$ with $1$s for all $x_v$ variables and a corresponding entry of $B$ in $\\mathbf{b}_{ub}$.\n\nThe optimal value of the original maximization problem is the negative of the result from `linprog`.\n\n**3. Integrality Gap**\nThe integrality gap is calculated as the ratio of the LP optimum to the ILP optimum. A gap greater than $1$ indicates that the LP relaxation provides a strictly larger upper bound than the true integer optimum, which is common in combinatorial optimization.\n\n### **Example Analysis: Test Case A**\n\n- **Nodes**: $\\{0,1,2,3,4\\}$, $N=5$.\n- **Edges**: $\\{(0,2), (0,3), (0,4), (1,2), (1,3), (1,4)\\}$.\n- **Thresholds**: $k_0=10, k_1=10, k_2=2, k_3=2, k_4=2$.\n- **Budget**: $B=1$.\n\n**ILP Optimum**:\nWe test each of the $\\binom{5}{1}=5$ possible single-node seed sets.\n- **Seed {0}**: Active at $t=0$ is $\\{0\\}$. For nodes $2, 3, 4$, the number of active in-neighbors is $1$. Since their threshold is $k=2$, none of them activate. Total active at $t=1$ is $\\{0\\}$. Size = $1$.\n- **Seed {1}**: Similarly, active at $t=1$ is $\\{1\\}$. Size = $1$.\n- **Seed {2}, {3}, or {4}**: Seeding any of these nodes results in no further activations. Total active size is $1$.\nThe maximum number of active nodes is $1$. Thus, **ILP Optimum = 1.0**.\n\n**LP Optimum**:\nThe LP relaxation allows for fractional variable assignments. Consider the fractional seeding strategy $x_0=0.5$ and $x_1=0.5$, which satisfies the budget constraint $\\sum x_v = 0.5+0.5 = 1 \\le B$.\n- This implies $y_{0,0}=0.5$ and $y_{1,0}=0.5$.\n- For node $v=2$, the threshold constraint is $\\sum_{u \\in N^{-}(2)} y_{u,0} \\ge k_2 z_{2,1} \\implies y_{0,0} + y_{1,0} \\ge 2 z_{2,1}$.\n- Substituting values: $0.5 + 0.5 \\ge 2 z_{2,1} \\implies 1.0 \\ge 2 z_{2,1} \\implies z_{2,1} \\le 0.5$.\n- The objective aims to maximize $y_{2,1}$. From $y_{2,1} \\le y_{2,0} + z_{2,1}$ and $y_{2,0}=x_2=0$, we have $y_{2,1} \\le z_{2,1}$. The LP will set $z_{2,1}=0.5$, allowing $y_{2,1}=0.5$.\n- By symmetry, $y_{3,1}=0.5$ and $y_{4,1}=0.5$.\n- The seeded nodes are also active: $y_{0,1} \\ge y_{0,0} = 0.5$ and $y_{1,1} \\ge y_{1,0} = 0.5$.\n- The total objective value is $\\sum y_{v,1} \\approx y_{0,1} + y_{1,1} + y_{2,1} + y_{3,1} + y_{4,1} = 0.5 + 0.5 + 0.5 + 0.5 + 0.5 = 2.5$.\n- This fractional solution achieves an objective of $2.5$. The LP solver confirms this is the optimal value. **LP Optimum = 2.5**.\n\n**Integrality Gap**:\n$\\text{gap} = \\frac{2.5}{1.0} = 2.5$.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.optimize import linprog\nfrom itertools import combinations\n\ndef solve():\n    \"\"\"\n    Main function to define, solve, and format results for all test cases.\n    \"\"\"\n    test_cases = [\n        {\n            \"name\": \"A\",\n            \"nodes\": list(range(5)),\n            \"edges\": [(0, 2), (0, 3), (0, 4), (1, 2), (1, 3), (1, 4)],\n            \"thresholds\": [10, 10, 2, 2, 2],\n            \"budget\": 1\n        },\n        {\n            \"name\": \"B\",\n            \"nodes\": list(range(5)),\n            \"edges\": [(0, 2), (0, 3), (0, 4), (1, 2), (1, 3), (1, 4)],\n            \"thresholds\": [10, 10, 1, 1, 1],\n            \"budget\": 1\n        },\n        {\n            \"name\": \"C\",\n            \"nodes\": list(range(3)),\n            \"edges\": [(0, 1), (0, 2), (1, 0), (1, 2), (2, 0), (2, 1)],\n            \"thresholds\": [2, 2, 2],\n            \"budget\": 1\n        }\n    ]\n\n    all_results = []\n    for case in test_cases:\n        result = compute_for_case(\n            case[\"nodes\"],\n            case[\"edges\"],\n            case[\"thresholds\"],\n            case[\"budget\"]\n        )\n        all_results.append(result)\n\n    case_strings = []\n    for case_result in all_results:\n        formatted_nums = [f\"{num:.4f}\" for num in case_result]\n        case_strings.append(f\"[{','.join(formatted_nums)}]\")\n    \n    final_output = f\"[{','.join(case_strings)}]\"\n    print(final_output)\n\ndef compute_for_case(nodes, edges, thresholds, budget):\n    \"\"\"\n    Computes the ILP optimum, LP optimum, and integrality gap for a single case.\n    \"\"\"\n    N = len(nodes)\n\n    # --- Part 1: ILP optimum by exact enumeration ---\n    ilp_opt = 0.0\n\n    in_neighbors = {v: [] for v in nodes}\n    for u, v in edges:\n        in_neighbors[v].append(u)\n\n    for seed_tuple in combinations(nodes, budget):\n        seed_set = set(seed_tuple)\n        \n        active_t0 = seed_set.copy()\n        active_t1 = active_t0.copy()\n        \n        for v in nodes:\n            if v not in active_t0:\n                num_active_in = sum(1 for u in in_neighbors[v] if u in active_t0)\n                if num_active_in >= thresholds[v]:\n                    active_t1.add(v)\n        \n        ilp_opt = max(ilp_opt, len(active_t1))\n\n    # --- Part 2: LP relaxation optimum ---\n    num_vars = 4 * N\n    \n    # Variable indices map:\n    # x_v   -> v\n    # y_v,0 -> N + v\n    # y_v,1 -> 2*N + v\n    # z_v,1 -> 3*N + v\n\n    # Objective: Maximize sum(y_v,1) => Minimize -sum(y_v,1)\n    c = np.zeros(num_vars)\n    c[2*N : 3*N] = -1.0\n\n    # Bounds: 0 = variable = 1 for all\n    bounds = (0, 1)\n\n    # Equality constraints: y_v,0 - x_v = 0\n    A_eq = np.zeros((N, num_vars))\n    b_eq = np.zeros(N)\n    for v in nodes:\n        A_eq[v, N + v] = 1.0   # y_v,0\n        A_eq[v, v]     = -1.0  # -x_v\n    \n    # Inequality constraints\n    num_ub_constraints = 3 * N + 1\n    A_ub = np.zeros((num_ub_constraints, num_vars))\n    b_ub = np.zeros(num_ub_constraints)\n    row = 0\n\n    # Constraint: y_v,0 - y_v,1 = 0  (progressive activation)\n    for v in nodes:\n        A_ub[row, N + v]   = 1.0  # y_v,0\n        A_ub[row, 2*N + v] = -1.0 # -y_v,1\n        row += 1\n\n    # Constraint: y_v,1 - y_v,0 - z_v,1 = 0 (new activation link)\n    for v in nodes:\n        A_ub[row, 2*N + v] = 1.0  # y_v,1\n        A_ub[row, N + v]   = -1.0 # -y_v,0\n        A_ub[row, 3*N + v] = -1.0 # -z_v,1\n        row += 1\n\n    # Constraint: k_v * z_v,1 - sum_{u in N^-(v)} y_u,0 = 0\n    for v in nodes:\n        A_ub[row, 3*N + v] = thresholds[v]\n        for u in in_neighbors[v]:\n            A_ub[row, N + u] -= 1.0\n        row += 1\n        \n    # Constraint: sum(x_v) = B (budget)\n    A_ub[row, 0:N] = 1.0\n    b_ub[row] = budget\n\n    res = linprog(c, A_ub=A_ub, b_ub=b_ub, A_eq=A_eq, b_eq=b_eq, bounds=bounds, method='highs')\n    \n    lp_opt = -res.fun\n\n    # --- Part 3: Integrality Gap ---\n    if ilp_opt == 0:\n        gap = 1.0 if lp_opt == 0 else float('inf')\n    else:\n        gap = lp_opt / ilp_opt\n\n    return [ilp_opt, lp_opt, gap]\n\nsolve()\n```"
        }
    ]
}
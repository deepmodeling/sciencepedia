{
    "hands_on_practices": [
        {
            "introduction": "本练习为后续学习奠定基础，旨在解决压缩储氢技术中的一个核心问题：精确确定储氢量。该练习强调了在高压下超越理想气体定律，考虑真实气体行为（通过压缩因子 $Z$）以及储罐物理膨胀（体积柔性 $\\kappa$）的重要性。这些因素对于设计和运行安全高效的车载储氢系统至关重要 。",
            "id": "4096338",
            "problem": "一辆氢燃料电池汽车使用一个IV型复合材料车载储氢罐，其在零表压下的内部自由容积为 $V_{0}$，其体积柔度与压力近似成线性关系，因此在压力 $P$ 下的内部容积为 $V(P) = V_{0}\\left(1 + \\kappa P\\right)$，其中 $\\kappa$ 是一个单位为 $\\mathrm{Pa}^{-1}$ 的小的正常量。该储氢罐根据广泛使用的行业加氢协议（如汽车工程师协会（SAE）标准J2601）进行加注，其目标是在加注后达到一个稳定状态，即当氢气温度与环境温度 $T_{\\mathrm{amb}}$ 达到平衡时，储氢罐压力等于额定工作压力（NWP）$P_{\\mathrm{nwp}}$。\n\n假设以下基于物理事实的建模框架：\n- 氢气的行为遵循真实气体模型，由压缩因子 $Z(P,T)$ 描述，该因子由真实气体状态方程 $P V = Z(P,T)\\, n R T$ 定义，其中 $n$ 是摩尔数，$R$ 是普适气体常数，$T$ 是绝对温度。\n- 氢气质量为 $m = n M$，其中 $M$ 是氢气的摩尔质量。在加注过程中，储氢罐内的成分不发生改变。\n- 当预测的稳定压力（热平衡后）在环境温度 $T_{\\mathrm{amb}}$ 下将等于 $P_{\\mathrm{nwp}}$ 时，加氢协议停止加注机。加注过程中的瞬时温度波动不改变稳定目标；泄漏和排污可忽略不计。\n\n初始时，储氢罐内含有压力为 $P_{0}$、温度为 $T_{0}$ 的氢气，占据内部容积 $V(P_{0})$。加注并随后达到热平衡后，最终稳定状态的压力为 $P_{\\mathrm{nwp}}$，温度为 $T_{\\mathrm{amb}}$，占据内部容积 $V(P_{\\mathrm{nwp}})$。\n\n从真实气体压缩因子的定义、理想气体定律以及所述的体积-压力关系出发，推导出一个闭式解析表达式，用于计算在加注事件中可加注的最大额外氢气质量 $\\Delta m$。该表达式应是初始压力 $P_{0}$ 和温度 $T_{0}$、环境温度 $T_{\\mathrm{amb}}$、额定工作压力 $P_{\\mathrm{nwp}}$、零压储氢罐容积 $V_{0}$、体积柔度系数 $\\kappa$、普适气体常数 $R$、摩尔质量 $M$ 以及在初始和最终稳定状态下评估的压缩因子的函数。\n\n使用国际单位制（SI）：压力以 $\\mathrm{Pa}$ 表示，温度以 $\\mathrm{K}$ 表示，体积以 $\\mathrm{m}^{3}$ 表示，普适气体常数以 $\\mathrm{J\\,mol^{-1}\\,K^{-1}}$ 表示，摩尔质量以 $\\mathrm{kg\\,mol^{-1}}$ 表示。最终质量以千克表示。您的最终答案必须是单一的闭式表达式；无需进行数值计算。",
            "solution": "目标是推导可加注到储氢罐的额外氢气质量 $\\Delta m$ 的表达式。该量是最终氢气质量 $m_{\\mathrm{f}}$ 与初始质量 $m_{0}$ 之差。\n$$\n\\Delta m = m_{\\mathrm{f}} - m_{0}\n$$\n为了找到 $m_{\\mathrm{f}}$ 和 $m_{0}$ 的表达式，我们从所提供的真实气体状态方程开始：\n$$\nP V = Z(P,T)\\, n R T\n$$\n在此，$Z(P,T)$ 是压缩因子，$R$ 是普适气体常数。气体质量 $m$ 通过摩尔质量 $M$ 与摩尔数 $n$ 相关联，$m = n M$。将 $n = m/M$ 代入真实气体方程，我们可以解出质量 $m$：\n$$\nm = \\frac{P V M}{Z(P,T) R T}\n$$\n这个通用表达式允许我们计算在任何给定状态 $(P, T, V)$ 下储氢罐中的气体质量。\n\n接下来，我们将这个通用表达式应用于系统的初始和最终状态。\n\n初始状态的特征是压力 $P_{0}$ 和温度 $T_{0}$。储氢罐的内部容积 $V$ 是内部压力的函数，由线性关系 $V(P) = V_{0}\\left(1 + \\kappa P\\right)$ 给出。因此，初始容积为：\n$$\nV(P_{0}) = V_{0}\\left(1 + \\kappa P_{0}\\right)\n$$\n初始状态下的压缩因子是 $Z(P_0, T_0)$。将这些代入通用质量方程，得到初始质量 $m_{0}$：\n$$\nm_{0} = \\frac{P_{0} V(P_{0}) M}{Z(P_{0}, T_{0}) R T_{0}} = \\frac{P_{0} \\left[V_{0}\\left(1 + \\kappa P_{0}\\right)\\right] M}{Z(P_{0}, T_{0}) R T_{0}}\n$$\n\n最终稳定状态的特征是额定工作压力 $P_{\\mathrm{nwp}}$ 和环境温度 $T_{\\mathrm{amb}}$。在此最终压力下储氢罐的容积为：\n$$\nV(P_{\\mathrm{nwp}}) = V_{0}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)\n$$\n最终状态下的压缩因子是 $Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}})$。将这些值代入通用质量方程，得到最终质量 $m_{\\mathrm{f}}$：\n$$\nm_{\\mathrm{f}} = \\frac{P_{\\mathrm{nwp}} V(P_{\\mathrm{nwp}}) M}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) R T_{\\mathrm{amb}}} = \\frac{P_{\\mathrm{nwp}} \\left[V_{0}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)\\right] M}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) R T_{\\mathrm{amb}}}\n$$\n\n最后，我们通过用最终质量减去初始质量来计算增加的质量 $\\Delta m$：\n$$\n\\Delta m = m_{\\mathrm{f}} - m_{0} = \\frac{P_{\\mathrm{nwp}} V_{0}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right) M}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) R T_{\\mathrm{amb}}} - \\frac{P_{0} V_{0}\\left(1 + \\kappa P_{0}\\right) M}{Z(P_{0}, T_{0}) R T_{0}}\n$$\n为了以更紧凑的闭式形式呈现，我们可以提取公因式 $\\frac{V_{0}M}{R}$：\n$$\n\\Delta m = \\frac{V_{0} M}{R} \\left[ \\frac{P_{\\mathrm{nwp}}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) T_{\\mathrm{amb}}} - \\frac{P_{0}\\left(1 + \\kappa P_{0}\\right)}{Z(P_{0}, T_{0}) T_{0}} \\right]\n$$\n此表达式代表可加注到储氢罐的最大额外氢气质量，它是根据问题陈述中提供的基本原理和定义推导出来的。",
            "answer": "$$\\boxed{\\frac{V_{0} M}{R} \\left[ \\frac{P_{\\mathrm{nwp}}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) T_{\\mathrm{amb}}} - \\frac{P_{0}\\left(1 + \\kappa P_{0}\\right)}{Z(P_{0}, T_{0}) T_{0}} \\right]}$$"
        },
        {
            "introduction": "在部件级分析的基础上，本练习探讨了低温液氢 (LH2) 输送过程中的动态挑战。练习引入了两相流的概念——这是由于热量泄漏在低温系统中常见的现象——并演示了如何使用均匀平衡模型来模拟其对压降的影响。这项实践对于设计高效、可靠的低温输送管线至关重要 。",
            "id": "4096234",
            "problem": "一根长度为 $L$、内径为 $D$ 的水平输送管线，输送温度为 $20\\,\\mathrm{K}$ 的饱和液氢 (LH2)。该管道的绝对粗糙度为 $\\varepsilon$，总质量流量为 $\\dot{m}$。在一次意外热泄漏下，形成了一个均匀的两相流，其干度为 $x$（蒸气的质量分数），而总质量流量保持为 $\\dot{m}$。假设采用均匀平衡模型（相速度相等，无滑移），并且流动为完全粗糙湍流，因此壁面摩擦系数仅取决于相对粗糙度。\n\n从直水平管道中控制体的一维稳态动量平衡和广为接受的本构关系出发，推导摩擦压降作为质量流量和流体密度的函数，并用此计算沿管线的额外摩擦压降（两相流减去单相液相）。取饱和液体密度为 $\\rho_{\\ell}$，饱和蒸汽密度为 $\\rho_{v}$。均匀混合物密度 $\\rho_{m}$ 由比容的可加性确定。\n\n使用以下数据：\n- $L = 50\\,\\mathrm{m}$，\n- $D = 0.05\\,\\mathrm{m}$，\n- $\\varepsilon = 2.0 \\times 10^{-5}\\,\\mathrm{m}$，\n- $\\dot{m} = 1.0\\,\\mathrm{kg}\\,\\mathrm{s}^{-1}$，\n- $x = 0.05$，\n- $\\rho_{\\ell} = 70.0\\,\\mathrm{kg}\\,\\mathrm{m}^{-3}$，\n- $\\rho_{v} = 1.30\\,\\mathrm{kg}\\,\\mathrm{m}^{-3}$。\n\n对于完全粗糙湍流区，达西摩擦系数 $f$ 取自科尔布鲁克 (Colebrook) 关系的粗糙度极限，$\\frac{1}{\\sqrt{f}} = -2 \\log_{10}\\!\\left(\\frac{\\varepsilon}{3.7 D}\\right)$。将额外摩擦压降以 $\\mathrm{kPa}$ 为单位表示，并将最终答案四舍五入至三位有效数字。",
            "solution": "我们的目标是计算由两相流引起的额外摩擦压降 $\\Delta p_{add}$，其定义为两相流压降 $\\Delta p_{tp}$ 与纯液相流压降 $\\Delta p_{\\ell}$ 之差。\n$$ \\Delta p_{add} = \\Delta p_{tp} - \\Delta p_{\\ell} $$\n\n**1. 通用摩擦压降公式**\n对于水平管道中的稳态流动，摩擦压降 $\\Delta p_f$ 可由达西-魏斯巴赫公式推导得出，并用质量流量 $\\dot{m}$ 表示：\n$$ \\Delta p_f = \\frac{8 f L \\dot{m}^2}{\\rho \\pi^2 D^5} $$\n其中 $f$ 是达西摩擦系数，$L$ 是管长，$D$ 是管径，$\\rho$ 是流体密度。\n\n**2. 达西摩擦系数 ($f$)**\n问题指出流动处于完全粗糙湍流区，摩擦系数仅取决于相对粗糙度 $\\varepsilon/D$。\n$$ \\frac{\\varepsilon}{D} = \\frac{2.0 \\times 10^{-5}\\,\\mathrm{m}}{0.05\\,\\mathrm{m}} = 4.0 \\times 10^{-4} $$\n使用给定的公式计算 $f$：\n$$ \\frac{1}{\\sqrt{f}} = -2 \\log_{10}\\!\\left(\\frac{\\varepsilon}{3.7 D}\\right) = -2 \\log_{10}\\!\\left(\\frac{4.0 \\times 10^{-4}}{3.7}\\right) \\approx -2(-3.9661) = 7.9322 $$\n$$ f \\approx (7.9322)^{-2} \\approx 0.015894 $$\n\n**3. 单相液体压降 ($\\Delta p_{\\ell}$)**\n当只有液相流动时，密度为 $\\rho_{\\ell}$。\n$$ \\Delta p_{\\ell} = \\frac{8 f L \\dot{m}^2}{\\rho_{\\ell} \\pi^2 D^5} = \\frac{8(0.015894)(50\\,\\mathrm{m})(1.0\\,\\mathrm{kg/s})^2}{(70.0\\,\\mathrm{kg/m^3}) \\pi^2 (0.05\\,\\mathrm{m})^5} \\approx 29456\\,\\mathrm{Pa} $$\n\n**4. 两相流压降 ($\\Delta p_{tp}$)**\n使用均匀平衡模型，我们可以通过两相摩擦乘子 $\\phi_{\\ell o}^2$ 来简化计算。额外压降可表示为：\n$$ \\Delta p_{add} = \\Delta p_{tp} - \\Delta p_{\\ell} = \\Delta p_{\\ell}(\\phi_{\\ell o}^2 - 1) $$\n对于均匀模型，乘子项由下式给出：\n$$ \\phi_{\\ell o}^2 - 1 = x\\left(\\frac{\\rho_{\\ell}}{\\rho_v} - 1\\right) $$\n其中 $x$ 是干度。\n\n**5. 计算最终结果**\n首先计算乘子项：\n$$ \\frac{\\rho_{\\ell}}{\\rho_v} = \\frac{70.0\\,\\mathrm{kg/m^3}}{1.30\\,\\mathrm{kg/m^3}} \\approx 53.846 $$\n$$ \\phi_{\\ell o}^2 - 1 = 0.05 \\times (53.846 - 1) = 2.6423 $$\n然后计算额外压降：\n$$ \\Delta p_{add} = 29456\\,\\mathrm{Pa} \\times 2.6423 \\approx 77833\\,\\mathrm{Pa} $$\n转换为千帕斯卡并四舍五入到三位有效数字：\n$$ \\Delta p_{add} \\approx 77.8\\,\\mathrm{kPa} $$",
            "answer": "$$\n\\boxed{77.8}\n$$"
        },
        {
            "introduction": "最后的这项练习将分析提升至系统层面，旨在解决氢气管网的运行优化问题。它展示了如何对管道和压缩机等部件的相互作用进行建模，并应用优化原理，在满足时变需求约束的同时，最大限度地降低能量消耗。通过这项练习，您可以深入了解大规模氢能基础设施的经济与能源性能 。",
            "id": "4096343",
            "problem": "考虑一个时间跨度为二十四（$24$）小时的串联氢气输送网络，该网络包含节点 $\\{n_0,n_1,n_2,n_3\\}$ 和边 $\\{e_1,e_2,e_3\\}$，方向为 $n_0\\to n_1\\to n_2\\to n_3$。边 $e_1$ 是从 $n_0$ 到 $n_1$ 的管道，边 $e_2$ 是从 $n_1$ 到 $n_2$ 的压缩机，边 $e_3$ 是从 $n_2$ 到 $n_3$ 的管道。源节点 $n_0$ 的压力固定为 $p_0$，需求节点 $n_3$ 必须维持不低于 $p_{\\min}$ 的压力，中间节点压力 $p_1(t)$ 和 $p_2(t)$ 由流量和压缩机设定点决定。在时间 $t$，边 $e$ 上的氢气质量流量表示为 $\\dot{m}_e(t)$，节点 $n_3$ 的终端用户需求表示为 $\\dot{m}_{\\mathrm{dem}}(t)$。\n\n基本定律和建模假设：\n- 节点连续性通过关联矩阵 $A\\in\\mathbb{R}^{4\\times 3}$ 来强制执行，使得对于每个小时 $t$ 都有 $A\\,\\dot{m}(t)=d(t)$，其中 $\\dot{m}(t)=\\begin{bmatrix}\\dot{m}_{e_1}(t)\\dot{m}_{e_2}(t)\\dot{m}_{e_3}(t)\\end{bmatrix}^{\\top}$ 且 $d(t)=\\begin{bmatrix}-\\dot{m}_{\\mathrm{dem}}(t)00+\\dot{m}_{\\mathrm{dem}}(t)\\end{bmatrix}^{\\top}$。该链的有向关联矩阵为\n$$\nA=\\begin{bmatrix}\n-1  0  0\\\\\n+1  -1  0\\\\\n0  +1  -1\\\\\n0  0  +1\n\\end{bmatrix}.\n$$\n- 线性化的稳态管道流定律（湍流但准稳态条件下动量平衡的一阶近似）给出\n$$\n\\dot{m}_{e}(t)=K_e\\left(p_{\\mathrm{in},e}(t)-p_{\\mathrm{out},e}(t)\\right),\n$$\n对于边 $e\\in\\{e_1,e_3\\}$，其导流系数 $K_e$ 的单位为 $\\mathrm{kg}/(\\mathrm{s}\\cdot\\mathrm{Pa})$，压力单位为 $\\mathrm{Pa}$。\n- 边 $e_2$ 上的压缩机强制\n$$\np_2(t)=r(t)\\,p_1(t),\\quad r(t)\\geq 1,\n$$\n并且压缩机两侧质量守恒，即 $\\dot{m}_{e_2}(t)=\\dot{m}_{e_1}(t)=\\dot{m}_{e_3}(t)$。\n- 对于具有理想气体行为的氢气，其等熵压缩功率建模为\n$$\nP(t)=\\frac{\\dot{m}(t)\\,c_p\\,T_{\\mathrm{in}}}{\\eta}\\left(r(t)^{\\frac{\\gamma-1}{\\gamma}}-1\\right),\n$$\n其中 $\\gamma$ 是比热比，$c_p$ 是定压比热容，$T_{\\mathrm{in}}$ 是入口温度，$\\eta$ 是压缩机等熵效率。\n\n根据节点连续性和边的方向，链式关联意味着对于所有时间 $t$，有 $\\dot{m}_{e_1}(t)=\\dot{m}_{e_2}(t)=\\dot{m}_{e_3}(t)=\\dot{m}(t)=\\dot{m}_{\\mathrm{dem}}(t)$。上游管道关系给出\n$$\np_1(t)=p_0-\\frac{\\dot{m}(t)}{K_1}.\n$$\n下游管道关系和节点 $n_3$ 的压力要求导出\n$$\n\\dot{m}(t)=K_2\\big(p_2(t)-p_3(t)\\big)=K_2\\big(r(t)\\,p_1(t)-p_3(t)\\big),\\quad p_3(t)\\geq p_{\\min}.\n$$\n因为当 $r(t)\\geq 1$ 时，压缩机功率 $P(t)$ 是关于 $r(t)$ 的严格递增函数，所以既能满足需求又能最小化能耗的设定点 $r(t)$ 会选择与下游管道和压力约束一致的最小 $r(t)$。如果最小压力是约束性的，则得出所需的压缩比\n$$\nr_{\\mathrm{req}}(t)=\\frac{\\frac{\\dot{m}(t)}{K_2}+p_{\\min}}{p_1(t)}.\n$$\n因此，在小时 $t$ 的最优压缩机设定点为\n$$\nr^{\\star}(t)=\\max\\left(1,\\,\\min\\left(r_{\\max},\\,r_{\\mathrm{req}}(t)\\right)\\right),\n$$\n前提是可行性成立，这要求 $p_1(t)>0$ 且 $r_{\\mathrm{req}}(t)\\leq r_{\\max}$。如果 $r_{\\mathrm{req}}(t)\\leq 1$，则 $r^{\\star}(t)=1$，下游压力调整为 $p_3(t)=r^{\\star}(t)p_1(t)-\\dot{m}(t)/K_2\\geq p_{\\min}$；如果 $r_{\\mathrm{req}}(t)>r_{\\max}$ 或 $p_1(t)\\leq 0$，则该小时在给定限制下是不可行的。\n\n任务：实现一个程序，对于每个小时 $t\\in\\{1,\\dots,24\\}$ 和每个测试用例，计算 $r^{\\star}(t)$、压缩机功率 $P(t)$ 以及 $24$ 小时内的总压缩机能耗，单位为兆瓦时（$\\mathrm{MWh}$）。一个用例的总能耗（$\\mathrm{MWh}$）为\n$$\nE_{\\mathrm{MWh}}=\\sum_{t=1}^{24}\\frac{P(t)}{10^{6}}.\n$$\n如果一个测试用例中的任何小时是不可行的，程序必须为该用例返回 $-1.0$。\n\n物理常数和参数（所有测试用例通用）：\n- $\\gamma=1.41$,\n- $c_p=14300\\,\\mathrm{J}/(\\mathrm{kg}\\cdot\\mathrm{K})$,\n- $T_{\\mathrm{in}}=300\\,\\mathrm{K}$,\n- $\\eta=0.70$,\n- $p_0=7.0\\times 10^{6}\\,\\mathrm{Pa}$,\n- $p_{\\min}=2.0\\times 10^{6}\\,\\mathrm{Pa}$,\n- $K_1=5.0\\times 10^{-8}\\,\\mathrm{kg}/(\\mathrm{s}\\cdot\\mathrm{Pa})$,\n- $K_2=4.0\\times 10^{-8}\\,\\mathrm{kg}/(\\mathrm{s}\\cdot\\mathrm{Pa})$,\n- $r_{\\max}=2.5$。\n\n测试套件：\n- 测试用例 1（一般情况）：每小时需求 $\\dot{m}_{\\mathrm{dem}}(t)$（单位：$\\mathrm{kg}/\\mathrm{s}$）为\n$$\n\\big[\\,0.08,\\,0.08,\\,0.09,\\,0.09,\\,0.10,\\,0.12,\\,0.15,\\,0.18,\\,0.20,\\,0.18,\\,0.15,\\,0.12,\\,0.10,\\,0.09,\\,0.08,\\,0.08,\\,0.09,\\,0.12,\\,0.15,\\,0.18,\\,0.20,\\,0.18,\\,0.12,\\,0.10\\,\\big].\n$$\n- 测试用例 2（边界低流量）：每小时需求（单位：$\\mathrm{kg}/\\mathrm{s}$）为\n$$\n\\big[\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02\\,\\big].\n$$\n- 测试用例 3（不可行高流量）：每小时需求（单位：$\\mathrm{kg}/\\mathrm{s}$）为\n$$\n\\big[\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25\\,\\big].\n$$\n\n要求的最终输出格式：您的程序应生成单行输出，其中包含三个测试用例的结果，形式为方括号括起来的逗号分隔列表，例如 $\\left[\\text{result}_1,\\text{result}_2,\\text{result}_3\\right]$。每个条目必须是一个浮点数，表示相应测试用例的总能耗（单位：$\\mathrm{MWh}$），并约定不可行的用例报告为 $-1.0$。",
            "solution": "本问题的目标是计算在一个串联输送网络中，针对三种不同的小时需求情景，氢气压缩机在 24 小时周期内消耗的总能量。计算过程通过分析每个小时的系统状态，检查运行可行性，然后确定能量最优的压缩机设置来进行。\n\n每个测试用例的方法都涉及逐小时的顺序分析。对于每个小时 $t \\in \\{1, \\dots, 24\\}$，给定质量需求 $\\dot{m}_{\\mathrm{dem}}(t)$：\n\n1.  **质量流量一致性**：根据问题描述，这是一个无中间存储的串联网络。因此，通过每个组件的流量等于终端用户需求：\n    $$ \\dot{m}(t) = \\dot{m}_{e_1}(t) = \\dot{m}_{e_2}(t) = \\dot{m}_{e_3}(t) = \\dot{m}_{\\mathrm{dem}}(t). $$\n\n2.  **压缩机入口压力**：压缩机入口处的压力 $p_1(t)$ 由上游管道的压降决定。应用所提供的流动定律：\n    $$ p_1(t) = p_0 - \\frac{\\dot{m}(t)}{K_1}. $$\n    一个基本的可行性条件是 $p_1(t) > 0$。如果此条件不满足，则该小时的需求在物理上不可行。\n\n3.  **所需压缩比**：为最小化能耗，压缩机应在满足下游压力约束的最低可能压缩比 $r(t)$ 下运行。下游压力约束为 $p_3(t) \\geq p_{\\min}$，最优策略是令 $p_3(t) = p_{\\min}$。结合下游管道的流动定律和压缩机压力关系 $p_2(t) = r(t)p_1(t)$，可求解得到满足此条件的所需压缩比 $r_{\\mathrm{req}}(t)$：\n    $$ r_{\\mathrm{req}}(t) = \\frac{\\frac{\\dot{m}(t)}{K_2} + p_{\\min}}{p_1(t)}. $$\n\n4.  **运行可行性**：如果所需的压缩比 $r_{\\mathrm{req}}(t)$ 超过了压缩机的最大机械限制 $r_{\\max}$，系统也将无法运行。因此，第二个可行性条件是 $r_{\\mathrm{req}}(t) \\leq r_{\\max}$。如果在任何小时内，上述两个可行性条件（$p_1(t)>0$ 和 $r_{\\mathrm{req}}(t) \\leq r_{\\max}$）有任何一个不满足，则整个 24 小时情景被视为不可行。\n\n5.  **最优压缩机设定点**：综合考虑所有约束，实际运行的最优压缩比 $r^{\\star}(t)$ 为：\n    $$ r^{\\star}(t) = \\max\\left(1, \\min\\left(r_{\\max}, r_{\\mathrm{req}}(t)\\right)\\right). $$\n    对于一个可行的小时，这简化为 $r^{\\star}(t) = \\max(1, r_{\\mathrm{req}}(t))$。\n\n6.  **每小时功耗**：在设定点 $r^{\\star}(t)$ 驱动压缩机所需的功率 $P(t)$，使用给定的等熵压缩公式计算：\n    $$ P(t) = \\frac{\\dot{m}(t) c_p T_{\\mathrm{in}}}{\\eta} \\left( (r^{\\star}(t))^{\\frac{\\gamma-1}{\\gamma}} - 1 \\right). $$\n    如果 $r^{\\star}(t)=1$，功耗为零。\n\n7.  **总能量计算**：24 小时内的总能耗（单位：MWh）是将每小时功率值（单位：W）求和，再转换为相应单位：\n    $$ E_{\\mathrm{MWh}} = \\frac{\\sum_{t=1}^{24} P(t)}{10^6} $$\n    如果任何小时不可行，该测试用例的总能量结果为 $-1.0$。\n\n该结构化程序被应用于每个测试用例以得出最终结果。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the total compressor energy for hydrogen transmission\n    over a 24-hour horizon for multiple test cases.\n    \"\"\"\n    # Define physical constants and system parameters\n    gamma = 1.41  # Ratio of specific heats for H2\n    c_p = 14300.0  # Specific heat at constant pressure [J/(kg*K)]\n    T_in = 300.0  # Compressor inlet temperature [K]\n    eta = 0.70  # Compressor isentropic efficiency\n    p_0 = 7.0e6  # Source pressure [Pa]\n    p_min = 2.0e6  # Minimum delivery pressure [Pa]\n    K1 = 5.0e-8  # Conductance of pipeline e1 [kg/(s*Pa)]\n    K2 = 4.0e-8  # Conductance of pipeline e2 [kg/(s*Pa)]\n    r_max = 2.5  # Maximum compression ratio\n\n    # Define the test cases from the problem statement\n    test_cases = [\n        # Test case 1 (general case)\n        np.array([\n            0.08, 0.08, 0.09, 0.09, 0.10, 0.12, 0.15, 0.18, 0.20, 0.18,\n            0.15, 0.12, 0.10, 0.09, 0.08, 0.08, 0.09, 0.12, 0.15, 0.18,\n            0.20, 0.18, 0.12, 0.10\n        ]),\n        # Test case 2 (boundary low flow)\n        np.array([0.02] * 24),\n        # Test case 3 (infeasible high flow)\n        np.array([0.25] * 24),\n    ]\n\n    results = []\n    \n    # Pre-calculate terms for power calculation\n    power_exponent = (gamma - 1) / gamma\n    power_coeff = (c_p * T_in) / eta\n\n    for m_dem_profile in test_cases:\n        total_power_Wh = 0.0\n        is_infeasible = False\n        \n        for t in range(24):\n            m_dot = m_dem_profile[t]  # Mass flow rate for the current hour [kg/s]\n\n            # Step 1: Calculate compressor inlet pressure\n            p1 = p_0 - (m_dot / K1)\n\n            # Step 2: Feasibility Check 1 (inlet pressure)\n            if p1 = 0:\n                is_infeasible = True\n                break\n\n            # Step 3: Calculate required compression ratio\n            r_req = ((m_dot / K2) + p_min) / p1\n\n            # Step 4: Feasibility Check 2 (maximum ratio)\n            if r_req > r_max:\n                is_infeasible = True\n                break\n\n            # Step 5: Determine optimal compressor set point\n            # Per problem: r_star = max(1, min(r_max, r_req))\n            # Since feasibility check r_req = r_max has passed, this simplifies.\n            r_star = max(1.0, r_req)\n            \n            # Step 6: Calculate hourly power consumption in Watts\n            # P(t) = (m_dot * c_p * T_in / eta) * (r_star**((gamma-1)/gamma) - 1)\n            if r_star > 1.0:\n                power_W = m_dot * power_coeff * (r_star**power_exponent - 1.0)\n            else:\n                power_W = 0.0\n            \n            # The sum of powers in Watts gives total energy in Watt-hours\n            # for 1-hour time intervals.\n            total_power_Wh += power_W\n\n        if is_infeasible:\n            results.append(-1.0)\n        else:\n            # Step 7: Convert total energy from Watt-hours to Megawatt-hours\n            total_energy_MWh = total_power_Wh / 1e6\n            results.append(total_energy_MWh)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(f'{r:.10f}' for r in results)}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "在为氢燃料电池汽车设计储氢系统时，精确计算高压储罐中可储存的氢气质量至关重要。这个实践练习将超越理想气体模型的简化假设，引导您考虑真实气体效应（即可压缩因子 $Z$）以及储罐材料的力学行为（即体积柔性）。通过推导在这些实际条件下可加注氢气质量的解析表达式，您将深入理解影响车载储氢容量的关键物理因素。",
            "id": "4096338",
            "problem": "一辆氢燃料电池汽车使用一个复合材料IV型车载储氢罐，其在表压为零时的内部自由容积为 $V_{0}$，其容积柔度与压力近似呈线性关系，因此在压力 $P$ 下的内部容积为 $V(P) = V_{0}\\left(1 + \\kappa P\\right)$，其中 $\\kappa$ 是一个单位为 $\\mathrm{Pa}^{-1}$ 的微小正常数。该储氢罐根据广泛使用的行业加氢协议（例如美国汽车工程师学会 (SAE) 的 J2601 标准）进行加注，该协议的目标是在加注后达到一个稳定状态，即当氢气温度与环境温度 $T_{\\mathrm{amb}}$ 平衡时，储氢罐压力等于其公称工作压力 (NWP) $P_{\\mathrm{nwp}}$。\n\n假设采用以下基于物理的模型框架：\n- 氢气表现为真实气体，其行为由可压缩因子 $Z(P,T)$ 描述，该因子由真实气体状态方程 $P V = Z(P,T)\\, n R T$ 定义，其中 $n$ 是摩尔数，$R$ 是通用气体常数，$T$ 是绝对温度。\n- 氢气的质量为 $m = n M$，其中 $M$ 是氢气的摩尔质量。在加注过程中，储氢罐内的成分不发生变化。\n- 当预测的稳定压力（热平衡后）在 $T_{\\mathrm{amb}}$ 下将等于 $P_{\\mathrm{nwp}}$ 时，加氢协议会停止加注机。加注过程中的瞬态温度波动不改变稳定目标；泄漏和排污可忽略不计。\n\n最初，储氢罐中含有压力为 $P_{0}$、温度为 $T_{0}$ 的氢气，占据内部容积 $V(P_{0})$。加注并随后进行热平衡后，最终的稳定状态为压力 $P_{\\mathrm{nwp}}$、温度 $T_{\\mathrm{amb}}$，占据内部容积 $V(P_{\\mathrm{nwp}})$。\n\n从真实气体可压缩因子的定义、理想气体定律以及给定的容积-压力关系出发，推导出一个封闭形式的解析表达式，用于计算在加注事件中可增加的最大额外氢气质量 $\\Delta m$。该表达式应是初始压力 $P_{0}$ 和温度 $T_{0}$、环境温度 $T_{\\mathrm{amb}}$、公称工作压力 $P_{\\mathrm{nwp}}$、零压储氢罐容积 $V_{0}$、容积柔度系数 $\\kappa$、通用气体常数 $R$、摩尔质量 $M$ 以及在初始和最终稳定状态下评估的可压缩因子的函数。\n\n使用国际单位制 (SI)：压力以 $\\mathrm{Pa}$ 表示，温度以 $\\mathrm{K}$ 表示，容积以 $\\mathrm{m}^{3}$ 表示，通用气体常数以 $\\mathrm{J\\,mol^{-1}\\,K^{-1}}$ 表示，摩尔质量以 $\\mathrm{kg\\,mol^{-1}}$ 表示。最终质量以千克 (kg) 表示。您的最终答案必须是单个封闭形式的表达式；不需要进行数值计算。",
            "solution": "问题陈述已经过评估并被确定为有效。它具有科学依据、问题明确、客观，并包含推导封闭形式解所需的所有必要信息。该问题是应用热力学和流体力学中的一个标准练习，与能源系统建模相关。\n\n目标是推导可添加到储氢罐中的额外氢气质量 $\\Delta m$ 的表达式。该量是最终氢气质量 $m_{\\mathrm{f}}$ 与初始质量 $m_{0}$ 之差。\n$$\n\\Delta m = m_{\\mathrm{f}} - m_{0}\n$$\n为了找到 $m_{\\mathrm{f}}$ 和 $m_{0}$ 的表达式，我们从所提供的真实气体状态方程开始，该方程关联了压力 $P$、容积 $V$、温度 $T$ 和摩尔数 $n$：\n$$\nP V = Z(P,T)\\, n R T\n$$\n这里，$Z(P,T)$ 是可压缩因子，是压力和温度的函数，$R$ 是通用气体常数。气体的质量 $m$ 通过摩尔质量 $M$ 与摩尔数 $n$ 相关联：\n$$\nm = n M\n$$\n通过将 $n = \\frac{m}{M}$ 代入真实气体方程，我们可以解出质量 $m$：\n$$\nP V = Z(P,T) \\left(\\frac{m}{M}\\right) R T\n$$\n$$\nm = \\frac{P V M}{Z(P,T) R T}\n$$\n这个通用表达式使我们能够计算储氢罐中在任何给定状态 $(P, T, V)$ 下的气体质量。\n\n接下来，我们将此通用表达式应用于系统的初始和最终状态。\n\n初始状态的特征是压力 $P_{0}$ 和温度 $T_{0}$。根据问题陈述，储氢罐的内部容积 $V$ 是内部压力的函数，由线性柔度关系 $V(P) = V_{0}\\left(1 + \\kappa P\\right)$ 给出。因此，初始容积为：\n$$\nV(P_{0}) = V_{0}\\left(1 + \\kappa P_{0}\\right)\n$$\n初始状态下的可压缩因子是 $Z(P_0, T_0)$。将这些代入通用质量方程，得到初始质量 $m_{0}$：\n$$\nm_{0} = \\frac{P_{0} V(P_{0}) M}{Z(P_{0}, T_{0}) R T_{0}} = \\frac{P_{0} \\left[V_{0}\\left(1 + \\kappa P_{0}\\right)\\right] M}{Z(P_{0}, T_{0}) R T_{0}}\n$$\n\n最终的稳定状态由公称工作压力 $P_{\\mathrm{nwp}}$ 和环境温度 $T_{\\mathrm{amb}}$ 表征。在此最终压力下，储氢罐的容积为：\n$$\nV(P_{\\mathrm{nwp}}) = V_{0}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)\n$$\n最终状态下的可压缩因子是 $Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}})$。将这些值代入通用质量方程，得到最终质量 $m_{\\mathrm{f}}$：\n$$\nm_{\\mathrm{f}} = \\frac{P_{\\mathrm{nwp}} V(P_{\\mathrm{nwp}}) M}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) R T_{\\mathrm{amb}}} = \\frac{P_{\\mathrm{nwp}} \\left[V_{0}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)\\right] M}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) R T_{\\mathrm{amb}}}\n$$\n\n最后，我们通过从最终质量中减去初始质量来计算增加的质量 $\\Delta m$：\n$$\n\\Delta m = m_{\\mathrm{f}} - m_{0}\n$$\n$$\n\\Delta m = \\frac{P_{\\mathrm{nwp}} V_{0}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right) M}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) R T_{\\mathrm{amb}}} - \\frac{P_{0} V_{0}\\left(1 + \\kappa P_{0}\\right) M}{Z(P_{0}, T_{0}) R T_{0}}\n$$\n为了以更紧凑的封闭形式表示，我们可以提出公因式 $\\frac{V_{0}M}{R}$：\n$$\n\\Delta m = \\frac{V_{0} M}{R} \\left[ \\frac{P_{\\mathrm{nwp}}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) T_{\\mathrm{amb}}} - \\frac{P_{0}\\left(1 + \\kappa P_{0}\\right)}{Z(P_{0}, T_{0}) T_{0}} \\right]\n$$\n该表达式代表了可以添加到储氢罐中的最大额外氢气质量，它是根据问题陈述中提供的基本原理和定义推导出来的。",
            "answer": "$$\\boxed{\\frac{V_{0} M}{R} \\left[ \\frac{P_{\\mathrm{nwp}}\\left(1 + \\kappa P_{\\mathrm{nwp}}\\right)}{Z(P_{\\mathrm{nwp}}, T_{\\mathrm{amb}}) T_{\\mathrm{amb}}} - \\frac{P_{0}\\left(1 + \\kappa P_{0}\\right)}{Z(P_{0}, T_{0}) T_{0}} \\right]}$$"
        },
        {
            "introduction": "液氢（LH2）储存面临着独特的挑战，其中最主要的就是“蒸发损失”（boil-off）。这个实践练习将探讨一个不那么直观但至关重要的热源：氢分子从正氢（ortho-hydrogen）到仲氢（para-hydrogen）的自发旋转换化过程。通过结合一级反应动力学和热力学原理来计算由此产生的额外蒸发率，您将体会到微观量子态如何对宏观储能系统的性能产生决定性影响。",
            "id": "4096224",
            "problem": "一个球形低温储罐中装有处于饱和状态的液氢（LH2）。在液化过程中，氢（H2）的正-仲自旋异构体转化仅被部分催化。因此，在储罐加注时，液体初始的正氢摩尔分数为 $x_{o,0} = 0.08$，而在 $20\\ \\mathrm{K}$ 时的热力学平衡正氢分数为 $x_{o}^{\\mathrm{eq}} = 0.002$。假设在液相中，正在进行的正-仲转化遵循一个向平衡态的一阶弛豫过程，其特征在于一个恒定的速率常数 $k = 5.0 \\times 10^{-8}\\ \\mathrm{s}^{-1}$。液体混合良好，因此其组分在空间上是均匀的，并且移除转化热的唯一途径是在自由表面的蒸发；忽略到罐壁的传导损失和任何外部热泄漏。储罐中含有总液态质量 $m_{\\mathrm{LH2}} = 5.0 \\times 10^{3}\\ \\mathrm{kg}$。氢的摩尔质量为 $M_{\\mathrm{H2}} = 2.016\\ \\mathrm{g/mol}$，饱和液氢的汽化潜热为 $\\ell_{v} = 4.46 \\times 10^{5}\\ \\mathrm{J/kg}$，在 $20\\ \\mathrm{K}$ 下每摩尔氢从正氢转化为仲氢所释放的焓为 $\\Delta h_{op} = 702\\ \\mathrm{J/mol}$。使用与这些假设和一阶动力学模型一致的集总能量平衡，推导在 $t = 0^{+}$ 时刻，由于正在进行的转化，液体中瞬时额外生热率的表达式。然后计算仅由此转化热引起的相应的初始额外蒸发质量流率，单位为千克/秒。以 $\\mathrm{kg/s}$ 为单位表示最终的质量流率，并将答案四舍五入到三位有效数字。",
            "solution": "该问题经评估是有效的，因为它具有科学依据、自洽且提法明确。所提供的数据对于低温液氢（LH2）中的正-仲氢转化现象是物理上现实的。该问题需要结合化学动力学和热力学原理来得出解决方案，这是能源系统建模中的标准程序。\n\n主要任务是确定由正-仲氢自发转化所释放的热量引起的初始蒸发质量流率 $\\dot{m}_{boil-off}(0)$。\n\n首先，我们对转化的动力学进行建模。问题陈述，正氢的摩尔分数 $x_o$ 遵循一阶过程向其平衡值 $x_o^{\\mathrm{eq}}$ 弛豫。正氢摩尔分数的变化率由下式给出：\n$$\n\\frac{dx_o}{dt} = -k (x_o(t) - x_o^{\\mathrm{eq}})\n$$\n其中 $k$ 是速率常数。负号表示正氢分数随时间减小，因为 $x_o(t)  x_o^{\\mathrm{eq}}$。\n\n罐中氢的总摩尔数 $N_{total}$ 是恒定的（在计算总摩尔量时，忽略蒸发的少量部分）。它可以根据液氢的总质量 $m_{\\mathrm{LH2}}$ 和氢的摩尔质量 $M_{\\mathrm{H2}}$ 计算得出：\n$$\nN_{total} = \\frac{m_{\\mathrm{LH2}}}{M_{\\mathrm{H2}}}\n$$\n我们必须注意单位。质量以 $\\mathrm{kg}$ 给出，摩尔质量以 $\\mathrm{g/mol}$ 给出。我们将摩尔质量转换为 $\\mathrm{kg/mol}$：\n$M_{\\mathrm{H2}} = 2.016\\ \\mathrm{g/mol} = 2.016 \\times 10^{-3}\\ \\mathrm{kg/mol}$。\n$$\nN_{total} = \\frac{5.0 \\times 10^{3}\\ \\mathrm{kg}}{2.016 \\times 10^{-3}\\ \\mathrm{kg/mol}} \\approx 2.4801587 \\times 10^{6}\\ \\mathrm{mol}\n$$\n\n正氢的摩尔数为 $N_o(t) = x_o(t) \\cdot N_{total}$。正氢的转化速率（单位为摩尔/秒），我们记为 $R(t)$，是正氢摩尔数减少的速率：\n$$\nR(t) = -\\frac{dN_o}{dt} = -N_{total} \\frac{dx_o}{dt}\n$$\n代入一阶速率定律：\n$$\nR(t) = -N_{total} [-k (x_o(t) - x_o^{\\mathrm{eq}})] = k N_{total} (x_o(t) - x_o^{\\mathrm{eq}})\n$$\n我们关心的是在 $t = 0^{+}$ 时的初始速率。此时，正氢的摩尔分数为其初始值 $x_o(0) = x_{o,0} = 0.08$。初始转化速率为：\n$$\nR(0) = k N_{total} (x_{o,0} - x_o^{\\mathrm{eq}})\n$$\n代入给定值：$k = 5.0 \\times 10^{-8}\\ \\mathrm{s}^{-1}$，$x_{o,0} = 0.08$，以及 $x_o^{\\mathrm{eq}} = 0.002$。\n$$\nR(0) = (5.0 \\times 10^{-8}\\ \\mathrm{s}^{-1}) \\times (2.4801587 \\times 10^{6}\\ \\mathrm{mol}) \\times (0.08 - 0.002)\n$$\n$$\nR(0) = (5.0 \\times 10^{-8}\\ \\mathrm{s}^{-1}) \\times (2.4801587 \\times 10^{6}\\ \\mathrm{mol}) \\times (0.078) \\approx 0.0096726\\ \\mathrm{mol/s}\n$$\n\n生热率 $\\dot{Q}_{gen}$ 是摩尔转化速率与每摩尔转化释放的焓 $\\Delta h_{op}$ 的乘积。\n$$\n\\dot{Q}_{gen}(t) = R(t) \\cdot \\Delta h_{op}\n$$\n问题要求在 $t=0^{+}$ 时瞬时额外生热率的表达式。即 $\\dot{Q}_{gen}(0)$：\n$$\n\\dot{Q}_{gen}(0) = R(0) \\cdot \\Delta h_{op} = k N_{total} (x_{o,0} - x_o^{\\mathrm{eq}}) \\Delta h_{op}\n$$\n代入总摩尔数的表达式，完整的表达式为：\n$$\n\\dot{Q}_{gen}(0) = k \\frac{m_{\\mathrm{LH2}}}{M_{\\mathrm{H2}}} (x_{o,0} - x_o^{\\mathrm{eq}}) \\Delta h_{op}\n$$\n使用计算出的 $R(0)$ 值和给定的 $\\Delta h_{op} = 702\\ \\mathrm{J/mol}$：\n$$\n\\dot{Q}_{gen}(0) \\approx (0.0096726\\ \\mathrm{mol/s}) \\times (702\\ \\mathrm{J/mol}) \\approx 6.79017\\ \\mathrm{J/s}\n$$\n\n根据问题的假设，产生的热量完全通过液氢的蒸发（boil-off）被移除。能量平衡为：\n$$\n\\dot{Q}_{gen}(t) = \\dot{m}_{boil-off}(t) \\cdot \\ell_v\n$$\n其中 $\\ell_v$ 是汽化潜热。我们需要求出初始蒸发质量流率 $\\dot{m}_{boil-off}(0)$。\n$$\n\\dot{m}_{boil-off}(0) = \\frac{\\dot{Q}_{gen}(0)}{\\ell_v}\n$$\n代入 $\\dot{Q}_{gen}(0)$ 的完整符号表达式：\n$$\n\\dot{m}_{boil-off}(0) = \\frac{k \\cdot m_{\\mathrm{LH2}} \\cdot (x_{o,0} - x_{o}^{\\mathrm{eq}}) \\cdot \\Delta h_{op}}{M_{\\mathrm{H2}} \\cdot \\ell_v}\n$$\n现在我们使用 $\\dot{Q}_{gen}(0) \\approx 6.79017\\ \\mathrm{J/s}$ 和给定的 $\\ell_v = 4.46 \\times 10^{5}\\ \\mathrm{J/kg}$ 来计算数值：\n$$\n\\dot{m}_{boil-off}(0) = \\frac{6.79017\\ \\mathrm{J/s}}{4.46 \\times 10^{5}\\ \\mathrm{J/kg}} \\approx 1.522459 \\times 10^{-5}\\ \\mathrm{kg/s}\n$$\n问题要求将答案四舍五入到三位有效数字。\n$$\n\\dot{m}_{boil-off}(0) \\approx 1.52 \\times 10^{-5}\\ \\mathrm{kg/s}\n$$",
            "answer": "$$\\boxed{1.52 \\times 10^{-5}}$$"
        },
        {
            "introduction": "高效的氢气输送是连接生产与消费的关键环节。本练习将视角从单个设备提升到系统层面，模拟一个由管道和压缩机组成的串联输氢网络。您的任务是根据时变的需求曲线，通过调整压缩机运行参数来最小化整个系统的能源消耗，同时满足所有物理约束（如管道压降和最低输送压力）。这个练习旨在培养系统化建模与优化求解的能力，这在设计和运营大规模能源基础设施时至关重要。",
            "id": "4096343",
            "problem": "考虑一个时间范围为二十四（$24$）小时的串联氢气输送网络，该网络有节点 $\\{n_0, n_1, n_2, n_3\\}$ 和边 $\\{e_1, e_2, e_3\\}$，方向为 $n_0 \\to n_1 \\to n_2 \\to n_3$。边 $e_1$ 是从 $n_0$ 到 $n_1$ 的管道，边 $e_2$ 是从 $n_1$ 到 $n_2$ 的压缩机，边 $e_3$ 是从 $n_2$ 到 $n_3$ 的管道。源节点 $n_0$ 的压力固定为 $p_0$，需求节点 $n_3$ 必须维持不低于 $p_{\\min}$ 的压力，中间节点压力 $p_1(t)$ 和 $p_2(t)$ 由流量和压缩机设定点决定。在时间 $t$ 边 $e$ 上的氢气质量流量表示为 $\\dot{m}_e(t)$，节点 $n_3$ 的终端用户需求表示为 $\\dot{m}_{\\mathrm{dem}}(t)$。\n\n基本定律和建模假设：\n- 节点连续性通过关联矩阵 $A\\in\\mathbb{R}^{4\\times 3}$ 强制执行，因此对每个小时 $t$ 都有 $A\\,\\dot{m}(t)=d(t)$，其中 $\\dot{m}(t)=\\begin{bmatrix}\\dot{m}_{e_1}(t)\\dot{m}_{e_2}(t)\\dot{m}_{e_3}(t)\\end{bmatrix}^{\\top}$ 且 $d(t)=\\begin{bmatrix}-\\dot{m}_{\\mathrm{dem}}(t)00+\\dot{m}_{\\mathrm{dem}}(t)\\end{bmatrix}^{\\top}$。该链条的有向关联矩阵为\n$$\nA=\\begin{bmatrix}\n-1   0   0\\\\\n+1   -1  0\\\\\n0    +1  -1\\\\\n0    0   +1\n\\end{bmatrix}.\n$$\n- 线性化的稳态管道流定律（湍流但准稳态条件下动量平衡的一阶近似）给出\n$$\n\\dot{m}_{e}(t)=K_e\\left(p_{\\mathrm{in},e}(t)-p_{\\mathrm{out},e}(t)\\right),\n$$\n对于边 $e\\in\\{e_1,e_3\\}$，其导率 $K_e$ 的单位为 $\\mathrm{kg}/(\\mathrm{s}\\cdot\\mathrm{Pa})$，压力单位为 $\\mathrm{Pa}$。\n- 边 $e_2$ 上的压缩机强制满足\n$$\np_2(t)=r(t)\\,p_1(t),\\quad r(t)\\geq 1,\n$$\n且压缩机两端的质量守恒为 $\\dot{m}_{e_2}(t)=\\dot{m}_{e_1}(t)=\\dot{m}_{e_3}(t)$。\n- 具有理想气体行为的氢气的等熵压缩功率建模为\n$$\nP(t)=\\frac{\\dot{m}(t)\\,c_p\\,T_{\\mathrm{in}}}{\\eta}\\left(r(t)^{\\frac{\\gamma-1}{\\gamma}}-1\\right),\n$$\n其中 $\\gamma$ 是比热比，$c_p$ 是定压比热，$T_{\\mathrm{in}}$ 是入口温度，$\\eta$ 是压缩机等熵效率。\n\n根据节点连续性和边的方向，链式关联意味着对所有 $t$ 都有 $\\dot{m}_{e_1}(t)=\\dot{m}_{e_2}(t)=\\dot{m}_{e_3}(t)=\\dot{m}(t)=\\dot{m}_{\\mathrm{dem}}(t)$。上游管道关系给出\n$$\np_1(t)=p_0-\\frac{\\dot{m}(t)}{K_1}.\n$$\n下游管道关系以及 $n_3$ 处的压力要求导致\n$$\n\\dot{m}(t)=K_2\\big(p_2(t)-p_3(t)\\big)=K_2\\big(r(t)\\,p_1(t)-p_3(t)\\big),\\quad p_3(t)\\geq p_{\\min}.\n$$\n由于当 $r(t)\\geq 1$ 时，压缩机功率 $P(t)$ 随 $r(t)$ 严格递增，因此能够满足需求的能量最小化设定点 $r(t)$ 会选择与下游管道和压力约束一致的最小 $r(t)$。如果最小压力是起约束作用的，则得到所需的压缩比\n$$\nr_{\\mathrm{req}}(t)=\\frac{\\frac{\\dot{m}(t)}{K_2}+p_{\\min}}{p_1(t)}.\n$$\n因此，在小时 $t$ 的最优压缩机设定点是\n$$\nr^{\\star}(t)=\\max\\left(1,\\,\\min\\left(r_{\\max},\\,r_{\\mathrm{req}}(t)\\right)\\right),\n$$\n前提是可行性成立，这要求 $p_1(t)0$ 和 $r_{\\mathrm{req}}(t)\\leq r_{\\max}$。如果 $r_{\\mathrm{req}}(t)\\leq 1$，则 $r^{\\star}(t)=1$，下游压力调整为 $p_3(t)=r^{\\star}(t)p_1(t)-\\dot{m}(t)/K_2\\geq p_{\\min}$；如果 $r_{\\mathrm{req}}(t)r_{\\max}$ 或 $p_1(t)\\leq 0$，则该小时在给定限制下是不可行的。\n\n任务：实现一个程序，对于每个小时 $t\\in\\{1,\\dots,24\\}$ 和每个测试用例，计算 $r^{\\star}(t)$、压缩机功率 $P(t)$ 以及 $24$ 小时内的总压缩机能量（单位：兆瓦时，$\\mathrm{MWh}$）。一个用例的总能量（单位：$\\mathrm{MWh}$）为\n$$\nE_{\\mathrm{MWh}}=\\sum_{t=1}^{24}\\frac{P(t)}{10^{6}}.\n$$\n如果一个测试用例中的任何一小时是不可行的，程序必须为该用例返回 $-1.0$。\n\n物理常数和参数（所有测试用例通用）：\n- $\\gamma=1.41$，\n- $c_p=14300\\,\\mathrm{J}/(\\mathrm{kg}\\cdot\\mathrm{K})$，\n- $T_{\\mathrm{in}}=300\\,\\mathrm{K}$，\n- $\\eta=0.70$，\n- $p_0=7.0\\times 10^{6}\\,\\mathrm{Pa}$，\n- $p_{\\min}=2.0\\times 10^{6}\\,\\mathrm{Pa}$，\n- $K_1=5.0\\times 10^{-8}\\,\\mathrm{kg}/(\\mathrm{s}\\cdot\\mathrm{Pa})$，\n- $K_2=4.0\\times 10^{-8}\\,\\mathrm{kg}/(\\mathrm{s}\\cdot\\mathrm{Pa})$，\n- $r_{\\max}=2.5$。\n\n测试套件：\n- 测试用例 1（一般情况）：每小时需求 $\\dot{m}_{\\mathrm{dem}}(t)$（单位：$\\mathrm{kg}/\\mathrm{s}$）为\n$$\n\\big[\\,0.08,\\,0.08,\\,0.09,\\,0.09,\\,0.10,\\,0.12,\\,0.15,\\,0.18,\\,0.20,\\,0.18,\\,0.15,\\,0.12,\\,0.10,\\,0.09,\\,0.08,\\,0.08,\\,0.09,\\,0.12,\\,0.15,\\,0.18,\\,0.20,\\,0.18,\\,0.12,\\,0.10\\,\\big].\n$$\n- 测试用例 2（边界低流量）：每小时需求（单位：$\\mathrm{kg}/\\mathrm{s}$）为\n$$\n\\big[\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02,\\,0.02\\,\\big].\n$$\n- 测试用例 3（不可行高流量）：每小时需求（单位：$\\mathrm{kg}/\\mathrm{s}$）为\n$$\n\\big[\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25,\\,0.25\\,\\big].\n$$\n\n要求的最终输出格式：您的程序应生成单行输出，其中包含三个测试用例的结果，格式为方括号内的逗号分隔列表，例如 $\\left[\\text{result}_1,\\text{result}_2,\\text{result}_3\\right]$。每个条目必须是一个浮点数，表示相应测试用例的总能量（单位：$\\mathrm{MWh}$），并约定不可行的用例报告为 $-1.0$。",
            "solution": "该问题被认为是有效的，因为它基于已建立的流体动力学和热力学原理，具有科学依据；问题陈述清晰，具有明确的计算路径，并且指定了所有必要的目标数据和常数。\n\n目标是计算在三种不同的小时需求情景下，串联输送网络中氢气压缩机在 $24$ 小时内消耗的总能量。计算过程通过分析系统在每个小时的状态，检查操作可行性，然后确定能量最优的压缩机设置。\n\n每个测试用例的方法都涉及一个连续的、逐小时的分析。对于每个小时 $t \\in \\{1, \\dots, 24\\}$，给定质量需求 $\\dot{m}_{\\mathrm{dem}}(t)$：\n\n1.  **质量流量一致性**：问题描述了一个串联网络（$n_0 \\to n_1 \\to n_2 \\to n_3$），在节点 $n_1$ 和 $n_2$ 没有中间存储或注入/抽取。质量守恒原理（由给定的关联矩阵 A 形式化）规定，质量流量在链条的所有边上必须恒定。因此，通过每个组件的流量等于终端用户需求：\n    $$\n    \\dot{m}(t) = \\dot{m}_{e_1}(t) = \\dot{m}_{e_2}(t) = \\dot{m}_{e_3}(t) = \\dot{m}_{\\mathrm{dem}}(t).\n    $$\n\n2.  **压缩机入口压力**：压缩机入口处的压力 $p_1(t)$ 由上游管道（$e_1$）的压降决定。应用所提供的线性化稳态流动定律，我们可以用固定的源压力 $p_0$ 和质量流量 $\\dot{m}(t)$ 来表示 $p_1(t)$：\n    $$\n    \\dot{m}(t) = K_1 \\left( p_0 - p_1(t) \\right) \\implies p_1(t) = p_0 - \\frac{\\dot{m}(t)}{K_1}.\n    $$\n    一个基本的可行性条件是压力必须保持为正，因此 $p_1(t)  0$。如果计算出的 $p_1(t)$ 为非正值，则在给定的源压力和管道导率下，所需求的流量在物理上无法实现，从而使该小时的情景不可行。\n\n3.  **所需压缩比**：为了最小化能耗，压缩机应以满足所有下游约束的最低可能压缩比 $r(t)$ 运行。关键约束是维持最终节点 $n_3$ 的压力不低于最小阈值，即 $p_3(t) \\geq p_{\\min}$。能量最优策略将 $p_3(t)$ 设为 $p_{\\min}$。利用下游管道（$e_3$）的流动定律和压缩机压力关系 $p_2(t) = r(t)p_1(t)$，我们推导出所需的压缩比 $r_{\\mathrm{req}}(t)$：\n    $$\n    \\dot{m}(t) = K_2 \\left( p_2(t) - p_3(t) \\right) = K_2 \\left( r(t)p_1(t) - p_{\\min} \\right).\n    $$\n    解出 $r(t)$，得到此约束条件下的所需压缩比：\n    $$\n    r_{\\mathrm{req}}(t) = \\frac{\\frac{\\dot{m}(t)}{K_2} + p_{\\min}}{p_1(t)}.\n    $$\n\n4.  **操作可行性**：压缩机的压缩比有其最大机械限制 $r_{\\max}$。如果所需的压缩比 $r_{\\mathrm{req}}(t)$ 超过此限制，系统将无法同时满足需求和压力要求。因此，第二个可行性条件是 $r_{\\mathrm{req}}(t) \\leq r_{\\max}$。如果在任何一小时内，此条件或 $p_1(t)0$ 条件不满足，则整个 $24$ 小时的情景被视为不可行。\n\n5.  **最优压缩机设定点**：实际运行的压缩比 $r^{\\star}(t)$ 必须至少为 $1$（因为压缩机不膨胀气体），必须满足系统要求（即，如果 $r_{\\mathrm{req}}(t)1$，则至少为 $r_{\\mathrm{req}}(t)$），并且不能超过 $r_{\\max}$。问题提供了选择最优压缩比的完整逻辑：\n    $$\n    r^{\\star}(t) = \\max\\left(1, \\min\\left(r_{\\max}, r_{\\mathrm{req}}(t)\\right)\\right).\n    $$\n    对于一个可行的小时，其中 $r_{\\mathrm{req}}(t) \\le r_{\\max}$，这简化为 $r^{\\star}(t) = \\max(1, r_{\\mathrm{req}}(t))$。如果 $r_{\\mathrm{req}}(t) \\leq 1$，则不需要压缩，因此 $r^{\\star}(t)=1$，压缩机实际上被旁路。\n\n6.  **每小时功耗**：在设定点 $r^{\\star}(t)$ 下驱动压缩机所需的功率 $P(t)$ 使用给定的等熵压缩公式计算，该公式考虑了气体性质（$\\gamma$, $c_p$）、入口条件（$T_{\\mathrm{in}}$）和压缩机效率（$\\eta$）：\n    $$\n    P(t) = \\frac{\\dot{m}(t) c_p T_{\\mathrm{in}}}{\\eta} \\left( (r^{\\star}(t))^{\\frac{\\gamma-1}{\\gamma}} - 1 \\right).\n    $$\n    功率 $P(t)$ 的单位是瓦特。注意，如果 $r^{\\star}(t)=1$，括号中的项变为零，因此 $P(t)=0$，这在物理上是正确的。\n\n7.  **总能量计算**：问题定义了离散的一小时时间步长。在小时 $t$ 消耗的能量是 $E(t) = P(t) \\times (1\\,\\mathrm{hour})$。$24$ 小时内的总能量（单位：瓦时）是每小时功率值的总和：$E_{\\mathrm{Wh}} = \\sum_{t=1}^{24} P(t)$。为了以兆瓦时（MWh）表示，我们除以 $10^6$：\n    $$\n    E_{\\mathrm{MWh}} = \\frac{E_{\\mathrm{Wh}}}{10^6} = \\frac{\\sum_{t=1}^{24} P(t)}{10^6},\n    $$\n    这与提供的公式一致。如果发现任何一小时不可行，该测试用例的计算将终止，总能量报告为 $-1.0$。\n\n这个结构化的、分步的过程被实施于每个测试用例，以得出最终结果。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the total compressor energy for hydrogen transmission\n    over a 24-hour horizon for multiple test cases.\n    \"\"\"\n    # Define physical constants and system parameters\n    gamma = 1.41  # Ratio of specific heats for H2\n    c_p = 14300.0  # Specific heat at constant pressure [J/(kg*K)]\n    T_in = 300.0  # Compressor inlet temperature [K]\n    eta = 0.70  # Compressor isentropic efficiency\n    p_0 = 7.0e6  # Source pressure [Pa]\n    p_min = 2.0e6  # Minimum delivery pressure [Pa]\n    K1 = 5.0e-8  # Conductance of pipeline e1 [kg/(s*Pa)]\n    K2 = 4.0e-8  # Conductance of pipeline e2 [kg/(s*Pa)]\n    r_max = 2.5  # Maximum compression ratio\n\n    # Define the test cases from the problem statement\n    test_cases = [\n        # Test case 1 (general case)\n        np.array([\n            0.08, 0.08, 0.09, 0.09, 0.10, 0.12, 0.15, 0.18, 0.20, 0.18,\n            0.15, 0.12, 0.10, 0.09, 0.08, 0.08, 0.09, 0.12, 0.15, 0.18,\n            0.20, 0.18, 0.12, 0.10\n        ]),\n        # Test case 2 (boundary low flow)\n        np.array([0.02] * 24),\n        # Test case 3 (infeasible high flow)\n        np.array([0.25] * 24),\n    ]\n\n    results = []\n    \n    # Pre-calculate terms for power calculation\n    power_exponent = (gamma - 1) / gamma\n    power_coeff = (c_p * T_in) / eta\n\n    for m_dem_profile in test_cases:\n        total_power_Wh = 0.0\n        is_infeasible = False\n        \n        for t in range(24):\n            m_dot = m_dem_profile[t]  # Mass flow rate for the current hour [kg/s]\n\n            # Step 1: Calculate compressor inlet pressure\n            p1 = p_0 - (m_dot / K1)\n\n            # Step 2: Feasibility Check 1 (inlet pressure)\n            if p1 = 0:\n                is_infeasible = True\n                break\n\n            # Step 3: Calculate required compression ratio\n            r_req = ((m_dot / K2) + p_min) / p1\n\n            # Step 4: Feasibility Check 2 (maximum ratio)\n            if r_req > r_max:\n                is_infeasible = True\n                break\n\n            # Step 5: Determine optimal compressor set point\n            # Per problem: r_star = max(1, min(r_max, r_req))\n            # Since feasibility check r_req = r_max has passed, this simplifies.\n            r_star = max(1.0, r_req)\n            \n            # Step 6: Calculate hourly power consumption in Watts\n            # P(t) = (m_dot * c_p * T_in / eta) * (r_star**((gamma-1)/gamma) - 1)\n            if r_star > 1.0:\n                power_W = m_dot * power_coeff * (r_star**power_exponent - 1.0)\n            else:\n                power_W = 0.0\n            \n            # The sum of powers in Watts gives total energy in Watt-hours\n            # for 1-hour time intervals.\n            total_power_Wh += power_W\n\n        if is_infeasible:\n            results.append(-1.0)\n        else:\n            # Step 7: Convert total energy from Watt-hours to Megawatt-hours\n            total_energy_MWh = total_power_Wh / 1e6\n            results.append(total_energy_MWh)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(f'{r:.10f}' for r in results)}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "在对氢气流动进行建模之前，我们必须首先确保管道的结构完整性。这项实践将我们的研究植根于基础机械工程，要求您从厚壁圆筒应力第一性原理出发，推导最小壁厚。通过应用拉梅(Lamé)方程，您将把材料属性和操作压力转化为一个关键的设计参数，为理解管道系统的物理约束打下坚实的基础。",
            "id": "4095685",
            "problem": "一段直埋式氢气输送管道被建模为一个长的、各向同性的、线弹性圆柱壳，承受均匀的内部压力。管道的指定外径为 $D_{o} = 762 \\text{ mm}$，其最大允许工作压力 (MAOP) 为 $P = 7.5 \\text{ MPa}$。相对于 $P$，外部地面压力效应可以忽略不计，因此管道外壁的外部压力可以视为零。材料在氢气环境下的许用应力为 $S_{a} = 290 \\text{ MPa}$。在确定壁厚尺寸时，操作方对许用应力施加了一个设计系数 (DF) $F = 0.50$，以确保在不确定性下的保守性。\n\n从受压厚壁轴对称圆柱体中的应力基本平衡方程出发，并使用适当的边界条件，推导出内壁处的周向（环向）应力表达式。施加条件，即内壁处的最大环向应力不得超过经设计系数折减的许用应力，并确定满足此要求的最小壁厚 $t_{\\min}$。将管道视为内半径为 $r_{i}$、外半径为 $r_{o} = D_{o}/2$ 的厚壁圆柱体，在推导中不要使用薄壁近似；你只能在获得精确解后使用薄壁假设进行校核。\n\n使用给定参数计算 $t_{\\min}$ 的数值。以毫米 (mm) 为单位表示最终答案，并将结果四舍五入到四位有效数字。",
            "solution": "该问题要求基于指定的许用应力和设计系数，确定承受内压的厚壁圆柱形管道的最小壁厚。推导必须从厚壁圆柱体的基本应力方程开始。\n\n在受内、外压力作用的厚壁圆柱体中，半径 $r$ 处的径向应力 $\\sigma_r$ 和周向（环向）应力 $\\sigma_{\\theta}$ 的通用方程被称为拉梅 (Lamé) 方程：\n$$ \\sigma_r(r) = A - \\frac{B}{r^2} $$\n$$ \\sigma_{\\theta}(r) = A + \\frac{B}{r^2} $$\n其中 $A$ 和 $B$ 是由边界条件决定的常数。\n\n管道的内半径为 $r_i$，外半径为 $r_o$。问题指定了以下边界条件：\n1.  在内表面 ($r=r_i$)，径向应力等于内部压力 $P$ 的负值。\n    $$ \\sigma_r(r_i) = -P $$\n2.  在外表面 ($r=r_o$)，外部压力可忽略不计，因此取为零。\n    $$ \\sigma_r(r_o) = 0 $$\n\n我们应用这些边界条件来求解常数 $A$ 和 $B$。\n根据第二个边界条件：\n$$ \\sigma_r(r_o) = A - \\frac{B}{r_o^2} = 0 \\implies A = \\frac{B}{r_o^2} $$\n\n将这个 $A$ 的表达式代入第一个边界条件：\n$$ \\sigma_r(r_i) = \\frac{B}{r_o^2} - \\frac{B}{r_i^2} = -P $$\n提出因子 $B$：\n$$ B \\left( \\frac{1}{r_o^2} - \\frac{1}{r_i^2} \\right) = -P $$\n$$ B \\left( \\frac{r_i^2 - r_o^2}{r_i^2 r_o^2} \\right) = -P $$\n解出 $B$：\n$$ B = \\frac{-P r_i^2 r_o^2}{r_i^2 - r_o^2} = \\frac{P r_i^2 r_o^2}{r_o^2 - r_i^2} $$\n\n现在，求解 $A$：\n$$ A = \\frac{B}{r_o^2} = \\frac{1}{r_o^2} \\left( \\frac{P r_i^2 r_o^2}{r_o^2 - r_i^2} \\right) = \\frac{P r_i^2}{r_o^2 - r_i^2} $$\n\n在确定了 $A$ 和 $B$ 之后，我们可以写出环向应力 $\\sigma_{\\theta}(r)$ 的表达式：\n$$ \\sigma_{\\theta}(r) = A + \\frac{B}{r^2} = \\frac{P r_i^2}{r_o^2 - r_i^2} + \\frac{1}{r^2} \\left( \\frac{P r_i^2 r_o^2}{r_o^2 - r_i^2} \\right) $$\n$$ \\sigma_{\\theta}(r) = \\frac{P r_i^2}{r_o^2 - r_i^2} \\left( 1 + \\frac{r_o^2}{r^2} \\right) $$\n环向应力是拉应力，并且在内壁处（即 $r=r_i$ 处）达到最大值。将 $r=r_i$ 代入方程，得到最大环向应力 $\\sigma_{\\theta, \\max}$：\n$$ \\sigma_{\\theta, \\max} = \\sigma_{\\theta}(r_i) = \\frac{P r_i^2}{r_o^2 - r_i^2} \\left( 1 + \\frac{r_o^2}{r_i^2} \\right) $$\n$$ \\sigma_{\\theta, \\max} = \\frac{P r_i^2}{r_o^2 - r_i^2} \\left( \\frac{r_i^2 + r_o^2}{r_i^2} \\right) $$\n$$ \\sigma_{\\theta, \\max} = P \\frac{r_o^2 + r_i^2}{r_o^2 - r_i^2} $$\n这就是推导出的内壁环向应力表达式。\n\n问题指出，这个最大应力不得超过经设计系数折减的许用应力。许用应力为 $S_a$，设计系数为 $F$。因此，设计应力极限为 $S_{design} = F \\cdot S_a$。最小壁厚的条件是：\n$$ \\sigma_{\\theta, \\max} = F \\cdot S_a $$\n$$ P \\frac{r_o^2 + r_i^2}{r_o^2 - r_i^2} = F S_a $$\n\n我们现在必须从此方程中求解壁厚 $t = r_o - r_i$。让我们先求解比值 $r_o/r_i$：\n$$ P(r_o^2 + r_i^2) = F S_a (r_o^2 - r_i^2) $$\n$$ P r_o^2 + P r_i^2 = F S_a r_o^2 - F S_a r_i^2 $$\n$$ r_i^2 (P + F S_a) = r_o^2 (F S_a - P) $$\n$$ \\frac{r_o^2}{r_i^2} = \\frac{F S_a + P}{F S_a - P} $$\n$$ \\frac{r_o}{r_i} = \\sqrt{\\frac{F S_a + P}{F S_a - P}} $$\n\n壁厚为 $t = r_o - r_i$。从上一个方程，我们可以用 $r_o$ 来表示 $r_i$：\n$$ r_i = r_o \\sqrt{\\frac{F S_a - P}{F S_a + P}} $$\n将此代入壁厚的表达式，我们得到所需的最小壁厚 $t_{\\min}$：\n$$ t_{\\min} = r_o - r_o \\sqrt{\\frac{F S_a - P}{F S_a + P}} $$\n$$ t_{\\min} = r_o \\left( 1 - \\sqrt{\\frac{F S_a - P}{F S_a + P}} \\right) $$\n\n现在，我们代入给定的数值：\n外径 $D_o = 762 \\text{ mm}$，所以外半径为 $r_o = \\frac{D_o}{2} = \\frac{762}{2} = 381 \\text{ mm}$。\n内部压力 $P = 7.5 \\text{ MPa}$。\n许用应力 $S_a = 290 \\text{ MPa}$。\n设计系数 $F = 0.50$。\n\n首先，计算设计应力极限：\n$$ F S_a = 0.50 \\times 290 \\text{ MPa} = 145 \\text{ MPa} $$\n现在，将这个值和其他数值代入 $t_{\\min}$ 的表达式中：\n$$ t_{\\min} = 381 \\left( 1 - \\sqrt{\\frac{145 - 7.5}{145 + 7.5}} \\right) $$\n$$ t_{\\min} = 381 \\left( 1 - \\sqrt{\\frac{137.5}{152.5}} \\right) $$\n$$ t_{\\min} = 381 \\left( 1 - \\sqrt{0.90163934...} \\right) $$\n$$ t_{\\min} = 381 \\left( 1 - 0.94954691... \\right) $$\n$$ t_{\\min} = 381 \\left( 0.05045308... \\right) $$\n$$ t_{\\min} \\approx 19.2226257 \\text{ mm} $$\n\n问题要求最终答案四舍五入到四位有效数字。\n$$ t_{\\min} \\approx 19.22 \\text{ mm} $$",
            "answer": "$$\\boxed{19.22}$$"
        },
        {
            "introduction": "在确定了单条管道的物理设计后，我们现在转向分析其在管网中的行为。本练习介绍了简单三节点系统稳态水力分析的核心原理。您将对每个节点应用质量守恒定律，并使用魏茅斯(Weymouth)方程来模拟流量，从而求解满足指定需求所需的压力。",
            "id": "4095759",
            "problem": "考虑一个具有三个节点和两条有向边的稳态、等温、单相氢气管道网络。节点 $1$ 是一个为压缩机供气的供应节点；节点 $2$ 是一个有固定取气量（需求）的连接节点；节点 $3$ 是一个有指定取气量和最低压力要求的需求节点。其拓扑结构为：一条从节点 $1$ 到节点 $2$ 的边，该边入口处设有一个压缩机；以及一条从节点 $2$ 到节点 $3$ 的边。海拔高差可忽略不计，所有压力均为绝对压力，并且在这些操作条件下，氢气表现为理想气体。设流量沿有向边的方向为正。\n\n使用以下广泛接受的建模基础：\n- 每个节点的质量守恒（稳态节点连续性方程）。\n- 用于管道中湍流气体流动的等温 Weymouth 型关系式：对于从节点 $i$ 到节点 $j$ 的管道，当 $p_i  p_j$ 时，质量流量为 $q_{ij} = K_{ij}\\sqrt{p_i^2 - p_j^2}$，其中 $K_{ij}  0$ 是一个综合了管道几何形状、摩擦和气体性质的常数。\n- 理想压缩机将入口压力 $p_{\\text{in}}$ 提高到 $p_{\\text{out}} = \\alpha p_{\\text{in}}$，其中 $\\alpha  1$ 是压缩机压力比，且通过压缩机的质量流量是守恒的。\n\n网络数据：\n- 边 $(1 \\to 2)$ 上的压缩机压力比为 $\\alpha = 1.30$。\n- 管道 $(1 \\to 2)$ 的常数 $K_{12} = 4.0 \\times 10^{-6}\\ \\text{kg}\\cdot\\text{s}^{-1}\\cdot\\text{Pa}^{-1}$。\n- 管道 $(2 \\to 3)$ 的常数 $K_{23} = 5.0 \\times 10^{-6}\\ \\text{kg}\\cdot\\text{s}^{-1}\\cdot\\text{Pa}^{-1}$。\n- 节点 $2$ 的需求量：$D_2 = 5.0\\ \\text{kg}\\cdot\\text{s}^{-1}$。\n- 节点 $3$ 的需求量：$D_3 = 15.0\\ \\text{kg}\\cdot\\text{s}^{-1}$。\n- 节点 $3$ 的压力要求：$p_3 = 6.0\\ \\text{MPa}$。\n\n任务：\n1. 用边质量流量 $q_{12}$ 和 $q_{23}$、节点 $1$ 的供应注入量（记为 $S_1$）以及取气量 $D_2$ 和 $D_3$ 来定义节点 $1$、$2$ 和 $3$ 的节点连续性方程。\n2. 使用压缩机关系式和 Weymouth 型管道关系式，将 $q_{12}$ 和 $q_{23}$ 表示为节点压力和给定参数的函数。\n3. 推导满足指定取气量且同时保持 $p_3 = 6.0\\ \\text{MPa}$ 所需的节点 $1$ 的最低供应压力（记为 $p_1$）的闭式解析表达式。\n4. 根据所提供的数据计算 $p_1$ 的数值。将最终压力以兆帕（MPa）为单位表示，并将答案四舍五入到四位有效数字。",
            "solution": "解答过程按顺序分为四个任务。\n\n任务 1：节点连续性方程\n在稳态网络中，质量守恒定律规定，流入任一节点的质量流量之和必须等于流出该节点的质量流量之和。设 $S_1$ 为节点 $1$ 的供应量，$D_2$ 为节点 $2$ 的需求量，$D_3$ 为节点 $3$ 的需求量。设 $q_{12}$ 和 $q_{23}$ 分别为沿有向边 $(1 \\to 2)$ 和 $(2 \\to 3)$ 的质量流量。\n\n对于节点 $1$ （供应节点）：流入量为 $S_1$，流出量为 $q_{12}$。\n$$S_1 = q_{12}$$\n对于节点 $2$ （连接节点）：流入量为 $q_{12}$，流出量为需求量 $D_2$ 和流量 $q_{23}$。\n$$q_{12} = q_{23} + D_2$$\n对于节点 $3$ （需求节点）：流入量为 $q_{23}$，流出量为需求量 $D_3$。\n$$q_{23} = D_3$$\n\n任务 2：流量-压力关系式\n问题指明了用于湍流气体流动的等温 Weymouth 型关系式，$q_{ij} = K_{ij}\\sqrt{p_i^2 - p_j^2}$，以及理想压缩机关系式，$p_{\\text{out}} = \\alpha p_{\\text{in}}$。\n\n对于边 $(1 \\to 2)$，位于入口（节点 $1$）的压缩机将压力从 $p_1$ 提高到 $\\alpha p_1$。这个升高的压力是该管道段的入口压力。该段的出口压力是 $p_2$。因此，质量流量 $q_{12}$ 由下式给出：\n$$q_{12} = K_{12}\\sqrt{(\\alpha p_1)^2 - p_2^2}$$\n对于边 $(2 \\to 3)$，没有压缩机。流量直接由节点 $2$ 和节点 $3$ 的压力决定：\n$$q_{23} = K_{23}\\sqrt{p_2^2 - p_3^2}$$\n\n任务 3：$p_1$ 解析表达式的推导\n我们通过从节点 $3$ 的下游边界条件开始，反向求解方程组，来推导供应压力 $p_1$ 的表达式。\n\n首先，我们从连续性方程确定所需的流量。\n根据节点 $3$ 的连续性方程：$q_{23} = D_3$。\n根据节点 $2$ 的连续性方程：$q_{12} = q_{23} + D_2 = D_3 + D_2$。\n\n接下来，我们使用边 $(2 \\to 3)$ 的流量-压力关系式来求节点 $2$ 的压力 $p_2$。\n$$q_{23} = K_{23}\\sqrt{p_2^2 - p_3^2}$$\n代入 $q_{23} = D_3$ 并对两边进行平方：\n$$D_3^2 = K_{23}^2 (p_2^2 - p_3^2)$$\n解出 $p_2^2$：\n$$p_2^2 = p_3^2 + \\frac{D_3^2}{K_{23}^2} = p_3^2 + \\left(\\frac{D_3}{K_{23}}\\right)^2$$\n现在，我们使用边 $(1 \\to 2)$ 的流量-压力关系式来求供应压力 $p_1$。\n$$q_{12} = K_{12}\\sqrt{(\\alpha p_1)^2 - p_2^2}$$\n代入 $q_{12} = D_2 + D_3$ 并对两边进行平方：\n$$\\left(D_2 + D_3\\right)^2 = K_{12}^2 ((\\alpha p_1)^2 - p_2^2)$$\n解出 $(\\alpha p_1)^2$：\n$$(\\alpha p_1)^2 = p_2^2 + \\frac{(D_2 + D_3)^2}{K_{12}^2} = p_2^2 + \\left(\\frac{D_2 + D_3}{K_{12}}\\right)^2$$\n代入推导出的 $p_2^2$ 表达式：\n$$(\\alpha p_1)^2 = \\left(p_3^2 + \\left(\\frac{D_3}{K_{23}}\\right)^2\\right) + \\left(\\frac{D_2 + D_3}{K_{12}}\\right)^2$$\n最后，通过取平方根（注意到压力为正值）并除以 $\\alpha$ 来解出 $p_1$：\n$$p_1 = \\frac{1}{\\alpha} \\sqrt{p_3^2 + \\left(\\frac{D_3}{K_{23}}\\right)^2 + \\left(\\frac{D_2 + D_3}{K_{12}}\\right)^2}$$\n这就是满足所有问题约束的最低供应压力 $p_1$ 的闭式解析表达式。\n\n任务 4：$p_1$ 的数值计算\n我们将给定的数值代入推导出的表达式。所有计算都将使用国际单位制（SI）基本单位（Pa、kg、s）进行。\n\n给定数据：\n$\\alpha = 1.30$\n$K_{12} = 4.0 \\times 10^{-6}\\ \\text{kg}\\cdot\\text{s}^{-1}\\cdot\\text{Pa}^{-1}$\n$K_{23} = 5.0 \\times 10^{-6}\\ \\text{kg}\\cdot\\text{s}^{-1}\\cdot\\text{Pa}^{-1}$\n$D_2 = 5.0\\ \\text{kg}\\cdot\\text{s}^{-1}$\n$D_3 = 15.0\\ \\text{kg}\\cdot\\text{s}^{-1}$\n$p_3 = 6.0\\ \\text{MPa} = 6.0 \\times 10^6\\ \\text{Pa}$\n\n首先，我们计算压力平方项。\n$$p_3^2 = (6.0 \\times 10^6\\ \\text{Pa})^2 = 36.0 \\times 10^{12}\\ \\text{Pa}^2$$\n$$\\left(\\frac{D_3}{K_{23}}\\right)^2 = \\left(\\frac{15.0}{5.0 \\times 10^{-6}}\\right)^2\\ \\text{Pa}^2 = (3.0 \\times 10^6)^2\\ \\text{Pa}^2 = 9.0 \\times 10^{12}\\ \\text{Pa}^2$$\n$$D_2 + D_3 = 5.0 + 15.0 = 20.0\\ \\text{kg}\\cdot\\text{s}^{-1}$$\n$$\\left(\\frac{D_2 + D_3}{K_{12}}\\right)^2 = \\left(\\frac{20.0}{4.0 \\times 10^{-6}}\\right)^2\\ \\text{Pa}^2 = (5.0 \\times 10^6)^2\\ \\text{Pa}^2 = 25.0 \\times 10^{12}\\ \\text{Pa}^2$$\n将这些项相加：\n$$p_3^2 + \\left(\\frac{D_3}{K_{23}}\\right)^2 + \\left(\\frac{D_2 + D_3}{K_{12}}\\right)^2 = (36.0 + 9.0 + 25.0) \\times 10^{12}\\ \\text{Pa}^2 = 70.0 \\times 10^{12}\\ \\text{Pa}^2$$\n现在，将这个和代入 $p_1$ 的表达式中：\n$$p_1 = \\frac{1}{1.30} \\sqrt{70.0 \\times 10^{12}\\ \\text{Pa}^2} = \\frac{\\sqrt{70.0} \\times 10^6}{1.30}\\ \\text{Pa}$$\n计算数值：\n$$p_1 \\approx \\frac{8.366600265 \\times 10^6}{1.30}\\ \\text{Pa} \\approx 6.435846358 \\times 10^6\\ \\text{Pa}$$\n转换为兆帕：\n$$p_1 \\approx 6.435846358\\ \\text{MPa}$$\n按要求四舍五入到四位有效数字：\n$$p_1 \\approx 6.436\\ \\text{MPa}$$",
            "answer": "$$\\boxed{6.436}$$"
        },
        {
            "introduction": "最后的这项实践将我们的分析从稳态提升到动态、有成本效益的随时间变化的运行。在这里，您将探索如何利用管道固有的存储能力（即“管存量”）来优化运行，以应对波动的电价。通过构建并求解一个线性规划问题，您将确定最优的压缩机调度方案，从而将物理系统约束与经济目标联系起来。",
            "id": "4095721",
            "problem": "您的任务是计算一个简化的综合氢气管道系统的最优调度计划，该计划旨在最小化电力成本，同时满足固定的提取量（需求）并遵守压缩机限制和管道管存存储约束。该系统由一个将氢气注入单个管道段的压缩机和一个在每个离散时间步外生提取氢气的单一需求节点组成。所有量都必须基于基本物理原理进行一致性建模，并以数学上精确的术语表示。您的程序必须为指定的测试套件解决该优化问题，并在单行上输出每种情况下的最小总电力成本。\n\n使用的基本原理是：\n- 质量守恒（库存平衡）：管道中的氢气库存量随净注入量减去提取量而演变。\n- 理想气体定律：管存库存是在给定压力下可储存在管道内的氢气摩尔数。\n- 具有恒定比热容比和固定等熵效率的理想气体的等熵压缩。\n\n定义一个具有 $T$ 个周期和时间步长为 $\\Delta t$ 小时的离散时间范围，并用 $x_t$ 表示周期 $t$ 内的压缩机注入量（单位为 $\\mathrm{kmol}$），用 $d_t$ 表示周期 $t$ 内的提取量（需求）（单位为 $\\mathrm{kmol}$）。令 $L_t$ 为周期 $t$ 结束时管道的库存量（单位为 $\\mathrm{kmol}$）。库存动态必须满足质量守恒定律：\n$$\nL_{t+1} = L_t + x_t - d_t \\quad \\text{for all } t \\in \\{0,1,\\dots,T-1\\},\n$$\n其中 $L_0$ 由初始压力根据理想气体定律给出。施加一个终端库存约束 $L_T = L_0$，以使整个时间范围内的净库存量保持不变。对所有 $t \\in \\{1,\\dots,T-1\\}$ 施加存储界限 $L_{\\min} \\le L_t \\le L_{\\max}$，这些界限通过理想气体定律从最小和最大管道压力导出。\n\n使用理想气体定律将摩尔数 $n$ 与压力 $p$、体积 $V$、温度 $T$ 和通用气体常数 $R$ 联系起来：\n$$\nn = \\frac{p\\,V}{R\\,T}.\n$$\n通过除以 $1000$ 将其转换为 $\\mathrm{kmol}$。分别使用 $p_{\\min}$、$p_{\\max}$ 和 $p_0$ 计算 $L_{\\min}$、$L_{\\max}$ 和 $L_0$。所有压力都必须使用帕斯卡（Pascal）为单位，换算关系为 $1\\,\\mathrm{bar} = 10^{5}\\,\\mathrm{Pa}$。\n\n使用具有比热容比 $k$（也称为绝热指数）、入口温度 $T_{\\mathrm{in}}$、入口压力 $p_{\\mathrm{in}}$、出口压力 $p_{\\mathrm{out}}$ 和等熵效率 $\\eta$ 的理想气体等熵压缩来为压缩机能耗建模。每摩尔的比压缩功（单位为 $\\mathrm{J/mol}$）由下式给出\n$$\nw_{\\mathrm{mol}} = \\frac{k}{k-1}\\,R\\,T_{\\mathrm{in}} \\left[\\left(\\frac{p_{\\mathrm{out}}}{p_{\\mathrm{in}}}\\right)^{\\frac{k-1}{k}} - 1\\right]\\frac{1}{\\eta}.\n$$\n通过以下公式将其转换为每个周期每注入 $\\mathrm{kmol}$ 的能量（单位为 $\\mathrm{MWh/kmol}$）：\n$$\n\\alpha = \\frac{1000\\,w_{\\mathrm{mol}}}{3.6\\times 10^{9}}.\n$$\n假设压缩机在整个时间范围内以固定的压缩比 $\\frac{p_{\\mathrm{out}}}{p_{\\mathrm{in}}}$ 运行，并且注入量 $x_t$ 立即贡献于管存。施加一个周期性能源上限 $E_{\\max} = P_{\\max}\\,\\Delta t$（单位为 $\\mathrm{MWh}$），从而得到一个注入量上限\n$$\n0 \\le x_t \\le x_{\\max} = \\frac{E_{\\max}}{\\alpha}.\n$$\n\n令 $c_t$ 为周期 $t$ 的电价，单位为 $\\mathrm{\\$/MWh}$。每个周期的压缩机能耗为 $E_t = \\alpha\\,x_t$，总电力成本为\n$$\n\\text{Cost} = \\sum_{t=0}^{T-1} c_t\\,E_t = \\sum_{t=0}^{T-1} c_t\\,\\alpha\\,x_t.\n$$\n您必须构建并解决由此产生的线性优化问题，该问题在满足库存动态、界限、终端库存约束以及注入量的非负性和界限的条件下，最小化 $\\text{Cost}$。\n\n要使用的物理常数和单位：\n- 通用气体常数 $R = 8.314462618\\,\\mathrm{J/(mol\\cdot K)}$。\n- 氢气（化学符号 $\\mathrm{H_2}$）被视为具有比热容比 $k$ 和恒定温度 $T$ 的理想气体。\n- 所有压力必须通过乘以 $10^{5}$ 从 $\\mathrm{bar}$ 转换为 $\\mathrm{Pa}$。\n- 管道体积 $V$ 的单位是 $\\mathrm{m^3}$。\n- 温度 $T$ 和 $T_{\\mathrm{in}}$ 的单位是 $\\mathrm{K}$。\n- 电价 $c_t$ 的单位是 $\\mathrm{\\$/MWh}$。\n- 压缩机最大功率 $P_{\\max}$ 的单位是 $\\mathrm{MW}$，每个周期的能量上限 $E_{\\max}$ 的单位是 $\\mathrm{MWh}$。\n- 需求量 $d_t$ 和注入量 $x_t$ 的单位是 $\\mathrm{kmol}$。\n\n答案规范：\n- 对于每个测试用例，计算最小总成本（美元，$\\mathrm{\\$}$），结果为浮点数，四舍五入到 $3$ 位小数。\n- 您的程序应生成一行输出，其中包含用方括号括起来的逗号分隔的结果列表，例如 $\\left[\\text{result1},\\text{result2},\\text{result3}\\right]$。\n\n测试套件：\n为以下三种情况中的每一种计算最小总成本。在所有情况下，使用 $\\Delta t = 1\\,\\mathrm{h}$（即 $\\Delta t = 1$），$R = 8.314462618\\,\\mathrm{J/(mol\\cdot K)}$，以及 $T = T_{\\mathrm{in}} = 300\\,\\mathrm{K}$（即 $T = 300$ 和 $T_{\\mathrm{in}} = 300$）。\n\n- 情况 A（理想情况，压缩机容量充足）：\n    - 时间周期：$T = 6$。\n    - 电价（单位 $\\mathrm{\\$/MWh}$）：$\\left[50,40,30,100,70,20\\right]$。\n    - 需求量（单位 $\\mathrm{kmol}$）：$\\left[3000,3500,4000,4500,3500,3000\\right]$。\n    - 管道体积：$V = 10000\\,\\mathrm{m^3}$。\n    - 压力界限：$p_{\\min} = 40\\,\\mathrm{bar}$，$p_{\\max} = 80\\,\\mathrm{bar}$。\n    - 初始压力：$p_0 = 60\\,\\mathrm{bar}$。\n    - 压缩机参数：$p_{\\mathrm{in}} = 20\\,\\mathrm{bar}$，$p_{\\mathrm{out}} = 60\\,\\mathrm{bar}$，$k = 1.41$，$\\eta = 0.75$，$P_{\\max} = 100\\,\\mathrm{MW}$。\n\n- 情况 B（高峰时段压缩机容量受限但总体上可行）：\n    - 时间周期：$T = 6$。\n    - 电价（单位 $\\mathrm{\\$/MWh}$）：$\\left[80,60,50,200,150,40\\right]$。\n    - 需求量（单位 $\\mathrm{kmol}$）：$\\left[3000,3000,3000,4500,4500,3000\\right]$。\n    - 管道体积：$V = 10000\\,\\mathrm{m^3}$。\n    - 压力界限：$p_{\\min} = 40\\,\\mathrm{bar}$，$p_{\\max} = 80\\,\\mathrm{bar}$。\n    - 初始压力：$p_0 = 70\\,\\mathrm{bar}$。\n    - 压缩机参数：$p_{\\mathrm{in}} = 10\\,\\mathrm{bar}$，$p_{\\mathrm{out}} = 80\\,\\mathrm{bar}$，$k = 1.41$，$\\eta = 0.75$，$P_{\\max} = 15\\,\\mathrm{MW}$。\n\n- 情况 C（负价时段鼓励在存储界限内进行调度）：\n    - 时间周期：$T = 6$。\n    - 电价（单位 $\\mathrm{\\$/MWh}$）：$\\left[-10,-20,30,60,-5,25\\right]$。\n    - 需求量（单位 $\\mathrm{kmol}$）：$\\left[3500,3500,3500,3500,3500,3500\\right]$。\n    - 管道体积：$V = 10000\\,\\mathrm{m^3}$。\n    - 压力界限：$p_{\\min} = 30\\,\\mathrm{bar}$，$p_{\\max} = 70\\,\\mathrm{bar}$。\n    - 初始压力：$p_0 = 50\\,\\mathrm{bar}$。\n    - 压缩机参数：$p_{\\mathrm{in}} = 50\\,\\mathrm{bar}$，$p_{\\mathrm{out}} = 70\\,\\mathrm{bar}$，$k = 1.41$，$\\eta = 0.75$，$P_{\\max} = 20\\,\\mathrm{MW}$。\n\n您的程序必须：\n- 对于每种情况，通过理想气体定律使用转换为 $\\mathrm{Pa}$ 的压力推导出 $L_{\\min}$、$L_{\\max}$ 和 $L_0$。\n- 通过等熵压缩关系推导出 $\\alpha$，并将其转换为 $\\mathrm{MWh/kmol}$。\n- 构建并求解线性规划问题以找到最优的 $x_t$。\n- 计算每种情况下的最小总成本（美元），并以指定的单行格式打印三个结果的列表。将每个结果表示为四舍五入到 $3$ 位小数的浮点数。",
            "solution": "该问题是一个形式如下的线性规划（LP）：\n$$\n\\begin{aligned}\n \\underset{x_0, \\dots, x_{T-1}}{\\text{minimize}}  \\sum_{t=0}^{T-1} (\\alpha c_t) x_t \\\\\n \\text{subject to} \\\\\n  L_0 + \\sum_{i=0}^{t-1} (x_i - d_i) \\le L_{\\max},  \\quad \\forall t \\in \\{1, \\dots, T-1\\} \\\\\n  L_0 + \\sum_{i=0}^{t-1} (x_i - d_i) \\ge L_{\\min},  \\quad \\forall t \\in \\{1, \\dots, T-1\\} \\\\\n  \\sum_{t=0}^{T-1} x_t = \\sum_{t=0}^{T-1} d_t \\\\\n  0 \\le x_t \\le x_{\\max},  \\quad \\forall t \\in \\{0, \\dots, T-1\\}\n\\end{aligned}\n$$\n\n对于每个测试用例，求解算法如下：\n1.  **参数计算：**\n    - 将所有压力值从 $\\mathrm{bar}$ 转换为 $\\mathrm{Pa}$（乘以 $10^5$）。\n    - 计算库存到压力的转换因子 $\\frac{V}{R T \\times 1000}$，单位为 $\\mathrm{kmol/Pa}$。\n    - 使用此因子，根据各自的压力 $p_0$、$p_{\\min}$ 和 $p_{\\max}$ 计算初始库存 $L_0$ 和界限 $L_{\\min}$、$L_{\\max}$。\n    - 使用给定的等熵压缩功 $w_{\\mathrm{mol}}$ 公式计算比能耗 $\\alpha$，单位为 $\\mathrm{MWh/kmol}$。\n    - 计算最大小时能量供应 $E_{\\max} = P_{\\max} \\Delta t$ 和相应的最大注入率 $x_{\\max} = E_{\\max} / \\alpha$。\n\n2.  **LP 构建：**\n    - 决策变量是 $t=0, \\dots, T-1$ 的注入量 $x_t$。\n    - 每个 $x_t$ 的目标函数系数是 $\\alpha c_t$。\n    - 为与标准 LP 求解器（如 `scipy.optimize.linprog`）一起使用，构建约束：\n        - **等式约束 ($A_{eq}x = b_{eq}$):** 一个约束确保在整个时间范围内总注入量等于总需求量。\n        - **不等式约束 ($A_{ub}x \\le b_{ub}$):** 这些代表了每个时间步 $t \\in \\{1, \\dots, T-1\\}$ 管道库存 $L_t$ 的上下界。\n        - **变量界限：** 对每个决策变量的简单界限，$0 \\le x_t \\le x_{\\max}$。\n\n3.  **求解和报告：**\n    - 使用 LP 求解器求解构建的 LP。\n    - 提取目标函数的最优值，即最小总成本。\n    - 按要求将成本四舍五入到 3 位小数。对所有测试用例重复此过程，并将结果汇总到一个列表中以供最终输出。\n\n此方法可以使用 Python 实现，利用 `numpy` 库进行高效的数组操作，并使用 `scipy.optimize.linprog` 等库来解决优化问题。",
            "answer": "[1041183.003,1681283.473,-69094.750]"
        }
    ]
}
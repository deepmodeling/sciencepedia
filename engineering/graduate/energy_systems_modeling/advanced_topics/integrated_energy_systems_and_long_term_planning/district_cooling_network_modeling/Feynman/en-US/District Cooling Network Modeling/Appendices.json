{
    "hands_on_practices": [
        {
            "introduction": "Our exploration begins with the most fundamental component of any fluid network: the pipe. This exercise grounds your understanding of hydraulic modeling by guiding you through a first-principles derivation of the pressure drop in a pipe under laminar flow conditions . By starting from the mechanical energy balance and applying key assumptions, you will derive the Hagen-Poiseuille equation and discover the critical relationship between pressure loss, flow rate, and pipe diameter.",
            "id": "4085937",
            "problem": "Consider a single straight supply pipe segment in a District Cooling Network (DCN) conveying chilled water under steady, incompressible, fully developed flow. The pipe of length $L$ and internal diameter $D$ connects a central plant to a building substation. Assume negligible minor losses, negligible elevation change, constant fluid properties (density $\\rho$ and dynamic viscosity $\\mu$), and that the flow regime in the pipe is laminar. The branch requires a specified mass flow rate $\\dot{m}$ to meet the building’s cooling demand. Starting from the mechanical energy balance for internal flow and appropriate constitutive relations for viscous dissipation, apply the continuity relation $\\dot{m} = \\rho A v$ to eliminate the mean velocity $v$ in favor of $\\dot{m}$ and $D$, and derive an analytic expression for the frictional pressure drop $\\Delta p$ across the pipe as a function of $\\dot{m}$ and $D$. Then, deduce how $\\Delta p$ scales with $D$ for fixed $\\dot{m}$. Express the final analytic expression for $\\Delta p$ in Pascals.",
            "solution": "The problem requires the derivation of an analytic expression for the frictional pressure drop, $\\Delta p$, in a straight pipe segment under specific conditions, and to determine its scaling with the pipe diameter, $D$. The derivation will begin from the general mechanical energy balance and incorporate the given constraints and physical laws.\n\nThe steady-state mechanical energy balance for an incompressible fluid flowing between two points, $1$ and $2$, along a streamline is given by:\n$$\n\\frac{p_1}{\\rho g} + \\alpha_1 \\frac{v_1^2}{2g} + z_1 + h_{pump,u} = \\frac{p_2}{\\rho g} + \\alpha_2 \\frac{v_2^2}{2g} + z_2 + h_{turbine,e} + h_L\n$$\nwhere $p$ is the pressure, $\\rho$ is the fluid density, $g$ is the acceleration due to gravity, $v$ is the mean fluid velocity, $\\alpha$ is the kinetic energy correction factor, $z$ is the elevation, $h_{pump,u}$ is the useful head added by a pump, $h_{turbine,e}$ is the head extracted by a turbine, and $h_L$ is the total head loss due to viscous effects.\n\nWe apply the conditions specified in the problem statement:\n$1$. The pipe has a constant internal diameter $D$. From the principle of mass conservation for incompressible flow ($A_1 v_1 = A_2 v_2$), this implies the mean velocity is constant, $v_1 = v_2 = v$.\n$2$. The flow is fully developed, which means the velocity profile is unchanged along the pipe length. Consequently, the kinetic energy correction factors are equal, $\\alpha_1 = \\alpha_2$.\n$3$. There are no pumps or turbines within the pipe segment, so $h_{pump,u} = 0$ and $h_{turbine,e} = 0$.\n$4$. The elevation change is negligible, so $z_1 = z_2$.\n\nSubstituting these conditions into the energy balance equation simplifies it considerably:\n$$\n\\frac{p_1}{\\rho g} = \\frac{p_2}{\\rho g} + h_L\n$$\nRearranging for the pressure drop, $\\Delta p = p_1 - p_2$, we find:\n$$\n\\Delta p = p_1 - p_2 = \\rho g h_L\n$$\nThe problem states that minor losses are negligible, so the total head loss $h_L$ is solely due to major losses from friction along the pipe wall, denoted as $h_f$.\n$$\nh_L = h_f = f \\frac{L}{D} \\frac{v^2}{2g}\n$$\nHere, $f$ is the Darcy friction factor, $L$ is the pipe length, and $D$ is the pipe diameter. Substituting this expression for $h_L$ into the equation for $\\Delta p$ yields the Darcy-Weisbach equation for pressure drop:\n$$\n\\Delta p = \\rho g \\left( f \\frac{L}{D} \\frac{v^2}{2g} \\right) = f \\frac{L}{D} \\frac{\\rho v^2}{2}\n$$\nThe problem specifies that the flow regime is laminar. For laminar flow in a circular pipe (typically for Reynolds numbers $Re < 2300$), the Darcy friction factor $f$ is related to the Reynolds number $Re$ by the exact theoretical relation:\n$$\nf = \\frac{64}{Re}\n$$\nThe Reynolds number is a dimensionless quantity defined as:\n$$\nRe = \\frac{\\rho v D}{\\mu}\n$$\nwhere $\\mu$ is the dynamic viscosity of the fluid.\n\nWe substitute the expression for $f$ into the pressure drop equation:\n$$\n\\Delta p = \\left( \\frac{64}{Re} \\right) \\frac{L}{D} \\frac{\\rho v^2}{2} = \\frac{32 L \\rho v^2}{D \\cdot Re}\n$$\nNow, substituting the definition of $Re$:\n$$\n\\Delta p = \\frac{32 L \\rho v^2}{D \\left( \\frac{\\rho v D}{\\mu} \\right)} = \\frac{32 L \\rho v^2 \\mu}{D \\rho v D}\n$$\nSimplifying this expression by canceling terms ($\\rho$ and one factor of $v$) gives the Hagen-Poiseuille equation for pressure drop as a function of mean velocity:\n$$\n\\Delta p = \\frac{32 \\mu L v}{D^2}\n$$\nThe problem requires this expression to be in terms of the mass flow rate $\\dot{m}$ and diameter $D$, not the mean velocity $v$. We use the specified continuity relation $\\dot{m} = \\rho A v$, where $A$ is the pipe's cross-sectional area. For a circular pipe of diameter $D$, the area is $A = \\frac{\\pi D^2}{4}$.\n\nWe solve for the mean velocity $v$ in terms of $\\dot{m}$:\n$$\nv = \\frac{\\dot{m}}{\\rho A} = \\frac{\\dot{m}}{\\rho \\left( \\frac{\\pi D^2}{4} \\right)} = \\frac{4 \\dot{m}}{\\pi \\rho D^2}\n$$\nNow, we substitute this expression for $v$ into the Hagen-Poiseuille equation:\n$$\n\\Delta p = \\frac{32 \\mu L}{D^2} \\left( \\frac{4 \\dot{m}}{\\pi \\rho D^2} \\right)\n$$\nCombining the terms yields the final analytical expression for the frictional pressure drop:\n$$\n\\Delta p = \\frac{128 \\mu L \\dot{m}}{\\pi \\rho D^4}\n$$\nThis expression gives the pressure drop in units of Pascals, provided all input parameters are in consistent SI units.\n\nThe second part of the task is to deduce the scaling of $\\Delta p$ with $D$ for a fixed mass flow rate $\\dot{m}$. Examining the derived expression, we can group the constant parameters ($\\mu, L, \\dot{m}, \\rho, \\pi$) together.\n$$\n\\Delta p = \\left( \\frac{128 \\mu L \\dot{m}}{\\pi \\rho} \\right) \\frac{1}{D^4}\n$$\nFor a fixed mass flow rate and constant fluid and geometric properties (other than $D$), the pressure drop is inversely proportional to the fourth power of the pipe's internal diameter. This relationship is expressed as:\n$$\n\\Delta p \\propto \\frac{1}{D^4} \\quad \\text{or} \\quad \\Delta p \\propto D^{-4}\n$$\nThis strong dependence on diameter is a critical consideration in the design of piping networks, where a small increase in pipe diameter can lead to a significant reduction in the pressure drop and, consequently, the required pumping power.",
            "answer": "$$\n\\boxed{\\frac{128 \\mu L \\dot{m}}{\\pi \\rho D^4}}\n$$"
        },
        {
            "introduction": "While the laminar flow model provides a solid theoretical foundation, real-world district cooling networks often operate in turbulent regimes where frictional losses are more complex. This practice challenges you to develop a robust computational model for the Darcy friction factor that is applicable across all flow regimes . You will combine theoretical derivation for laminar flow with numerical solution of the implicit Colebrook equation for turbulent flow, gaining essential skills used in professional hydraulic simulation software.",
            "id": "4085962",
            "problem": "Consider a chilled-water pipe segment in a District Cooling Network (DCN). The fluid is modeled as an incompressible Newtonian liquid. The task is to derive and implement regime-dependent friction factor evaluation for the Darcy–Weisbach formulation used in energy systems modeling of district cooling networks. You must start from fundamental principles and implement a program that, given a set of pipe and fluid parameters, computes the Darcy friction factor. The program must differentiate laminar and turbulent regimes, derive the laminar formula from first principles, and solve the turbulent case using the implicit Colebrook equation.\n\nUse the following fundamental base:\n- Conservation of mass and momentum for steady, fully developed, axisymmetric, incompressible Newtonian flow in a straight, horizontal circular pipe of constant diameter.\n- The Darcy–Weisbach pressure loss relation linking wall shear stress to the friction factor and mean velocity.\n- The definition of Reynolds number (first appearance of acronyms must be spelled out): Reynolds number (Re) quantifies inertial to viscous forces.\n\nDefinitions and relationships to be used and derived:\n- The mean velocity is given by $v = \\dot{m}/(\\rho A)$, where $\\dot{m}$ is mass flow rate, $\\rho$ is mass density, and $A$ is the cross-sectional area $A = \\pi D^{2}/4$ for a pipe of internal diameter $D$.\n- The Reynolds number is $Re = \\rho v D/\\mu$, where $\\mu$ is the dynamic viscosity.\n- The Darcy–Weisbach pressure drop over length $L$ is $\\Delta p = f \\left(\\dfrac{L}{D}\\right)\\left(\\dfrac{\\rho v^{2}}{2}\\right)$, where $f$ is the Darcy friction factor, dimensionless.\n- For laminar flow in a circular pipe, starting from the fully developed solution of the Navier–Stokes equations and the wall shear stress definition, derive $f = 64/Re$.\n- For turbulent flow, use the Colebrook equation for relative roughness $\\epsilon/D$ and Reynolds number $Re$:\n$$\n\\frac{1}{\\sqrt{f}} = -2 \\log_{10}\\left(\\frac{\\epsilon}{3.7 D} + \\frac{2.51}{Re \\sqrt{f}}\\right).\n$$\n\nRegime handling and edge cases:\n- Classify regimes by $Re$: laminar if $Re \\le 2300$, turbulent if $Re \\ge 4000$, transitional if $2300 < Re < 4000$.\n- For laminar, compute $f = 64/Re$.\n- For turbulent, solve the implicit Colebrook equation for $f$ numerically.\n- For transitional, construct a smooth bridging using linear blending between the laminar and turbulent predictions:\n$\\alpha = \\frac{4000 - Re}{4000 - 2300}, \\quad f_{\\text{blend}} = \\alpha f_{\\text{lam}} + (1-\\alpha) f_{\\text{turb}}.$\nThis avoids discontinuity while remaining scientifically plausible for network-level modeling.\n\nPhysical and numerical units:\n- Pipe diameter $D$ must be provided in $\\text{m}$.\n- Absolute roughness $\\epsilon$ must be provided in $\\text{m}$.\n- Mass density $\\rho$ must be provided in $\\text{kg}\\,\\text{m}^{-3}$.\n- Dynamic viscosity $\\mu$ must be provided in $\\text{Pa}\\cdot\\text{s}$.\n- Mass flow rate $\\dot{m}$ must be provided in $\\text{kg}\\,\\text{s}^{-1}$.\n- The Darcy friction factor $f$ is dimensionless. Express each friction factor value as a float rounded to $6$ decimal places.\n\nYour program must implement a robust numerical method to solve the Colebrook equation for $f$ in the turbulent regime. You must ensure convergence for the specified test cases by using a bracketed root-finding strategy or a monotone fixed-point iteration with a convergence criterion. Your algorithm must not require any user input.\n\nTest suite:\nFor each test case, compute $f$ using the regime rules above. The parameters are given as $(D, \\epsilon, \\rho, \\mu, \\dot{m})$ with units as specified.\n\n- Test case $1$ (laminar, chilled water, small diameter, low flow):\n  $(D, \\epsilon, \\rho, \\mu, \\dot{m}) = (0.05, 1\\times 10^{-5}, 998, 0.0013, 0.05)$.\n- Test case $2$ (boundary laminar at $Re = 2300$, same pipe and viscosity):\n  $(D, \\epsilon, \\rho, \\mu, \\dot{m}) = (0.05, 1\\times 10^{-5}, 998, 0.0013, 0.1174169)$.\n- Test case $3$ (boundary turbulent at $Re = 4000$, same pipe and viscosity):\n  $(D, \\epsilon, \\rho, \\mu, \\dot{m}) = (0.05, 1\\times 10^{-5}, 998, 0.0013, 0.2042035)$.\n- Test case $4$ (fully turbulent, commercial steel roughness, higher flow):\n  $(D, \\epsilon, \\rho, \\mu, \\dot{m}) = (0.15, 4.5\\times 10^{-5}, 999, 0.0013, 20.0)$.\n- Test case $5$ (fully turbulent, hydraulically smooth, moderate flow):\n  $(D, \\epsilon, \\rho, \\mu, \\dot{m}) = (0.20, 0.0, 998, 0.0012, 5.0)$.\n- Test case $6$ (fully turbulent, very rough pipe, high flow):\n  $(D, \\epsilon, \\rho, \\mu, \\dot{m}) = (0.30, 5\\times 10^{-3}, 1000, 0.0011, 100.0)$.\n\nFinal output format:\nYour program should produce a single line of output containing the friction factors for the test suite, as a comma-separated list enclosed in square brackets. Each friction factor must be rounded to $6$ decimal places and expressed as a dimensionless float. For example, an output with three cases should look like $[0.012345,0.045678,0.089101]$.",
            "solution": "The problem statement is evaluated to be valid. It is scientifically grounded in the principles of fluid dynamics, well-posed with a clear objective and sufficient data, and formulated objectively. All necessary equations, physical parameters, and boundary conditions are provided, and there are no internal contradictions. We may therefore proceed with the derivation and solution.\n\nThe objective is to determine the Darcy friction factor, denoted by $f$, for an incompressible Newtonian fluid in a circular pipe segment. The calculation of $f$ is dependent on the flow regime, which is characterized by the Reynolds number ($Re$).\n\nFirst, we establish the relationship between the given parameters and the Reynolds number. The givens for each case are the pipe internal diameter $D$, absolute roughness $\\epsilon$, fluid mass density $\\rho$, fluid dynamic viscosity $\\mu$, and mass flow rate $\\dot{m}$.\n\nThe cross-sectional area of the pipe is $A = \\pi D^2 / 4$. The mean fluid velocity, $v$, is defined by the conservation of mass for an incompressible fluid:\n$$v = \\frac{\\dot{m}}{\\rho A} = \\frac{\\dot{m}}{\\rho (\\pi D^2 / 4)} = \\frac{4\\dot{m}}{\\pi \\rho D^2}$$\n\nThe Reynolds number ($Re$), which represents the ratio of inertial forces to viscous forces, is defined as:\n$$Re = \\frac{\\rho v D}{\\mu}$$\nSubstituting the expression for $v$, we obtain a direct formula for $Re$ from the input parameters:\n$$Re = \\frac{\\rho D}{\\mu} \\left(\\frac{4\\dot{m}}{\\pi \\rho D^2}\\right) = \\frac{4\\dot{m}}{\\pi \\mu D}$$\n\nThe flow regime is determined based on the value of $Re$:\n- If $Re \\le 2300$, the flow is laminar.\n- If $2300 < Re < 4000$, the flow is transitional.\n- If $Re \\ge 4000$, the flow is turbulent.\n\nWe now derive the formula for the friction factor in each regime.\n\n**1. Laminar Flow Regime ($Re \\le 2300$)**\n\nFor steady, fully developed, axisymmetric, incompressible Newtonian flow in a straight, horizontal circular pipe, the Navier-Stokes equations simplify significantly. In cylindrical coordinates $(r, \\theta, z)$, with $z$ being the axial direction, the momentum equation in the $z$-direction reduces to a balance between the pressure gradient and viscous forces:\n$$\\frac{d p}{d z} = \\mu \\frac{1}{r} \\frac{d}{d r} \\left(r \\frac{d u_z}{d r}\\right)$$\nwhere $u_z$ is the axial velocity component. We integrate this equation twice with respect to $r$. The first integration gives:\n$$r \\frac{d u_z}{d r} = \\frac{1}{\\mu} \\frac{d p}{d z} \\frac{r^2}{2} + C_1$$\nDividing by $r$:\n$$\\frac{d u_z}{d r} = \\frac{1}{\\mu} \\frac{d p}{d z} \\frac{r}{2} + \\frac{C_1}{r}$$\nThe first boundary condition is that the velocity gradient must be zero at the centerline ($r=0$) due to axisymmetry, which implies $C_1 = 0$. Integrating again:\n$$u_z(r) = \\frac{1}{4\\mu} \\frac{d p}{d z} r^2 + C_2$$\nThe second boundary condition is the no-slip condition at the pipe wall, $u_z(R) = 0$, where $R = D/2$ is the pipe radius. This gives:\n$$0 = \\frac{1}{4\\mu} \\frac{d p}{d z} R^2 + C_2 \\implies C_2 = -\\frac{R^2}{4\\mu} \\frac{d p}{d z}$$\nSubstituting $C_2$ back, we obtain the parabolic velocity profile (Hagen-Poiseuille flow):\n$$u_z(r) = \\frac{1}{4\\mu} \\frac{d p}{d z} (r^2 - R^2) = -\\frac{1}{4\\mu} \\frac{d p}{d z} (R^2 - r^2)$$\nFor a pipe of length $L$, the pressure drop is $\\Delta p = p_1 - p_2 = -L (dp/dz)$, so $dp/dz = -\\Delta p / L$.\n$$u_z(r) = \\frac{\\Delta p}{4\\mu L} (R^2 - r^2)$$\nThe mean velocity $v$ is found by integrating $u_z(r)$ over the cross-sectional area $A$:\n$$v = \\frac{1}{A} \\int_A u_z(r) dA = \\frac{1}{\\pi R^2} \\int_0^R \\frac{\\Delta p}{4\\mu L} (R^2 - r^2) 2\\pi r dr = \\frac{\\Delta p R^2}{8\\mu L}$$\nReplacing $R$ with $D/2$, we get the Hagen-Poiseuille equation for pressure drop:\n$$\\Delta p = \\frac{32 \\mu L v}{D^2}$$\nThe Darcy-Weisbach equation provides an alternative definition for pressure drop:\n$$\\Delta p = f \\frac{L}{D} \\frac{\\rho v^2}{2}$$\nBy equating these two expressions for $\\Delta p$, we can solve for the Darcy friction factor $f$:\n$$f \\frac{L}{D} \\frac{\\rho v^2}{2} = \\frac{32 \\mu L v}{D^2}$$\n$$f = \\frac{32 \\mu L v}{D^2} \\cdot \\frac{D}{L} \\cdot \\frac{2}{\\rho v^2} = \\frac{64 \\mu}{\\rho v D}$$\nRecognizing the definition of the Reynolds number, $Re = \\rho v D / \\mu$, we arrive at the final expression for the friction factor in the laminar regime:\n$$f = \\frac{64}{Re}$$\n\n**2. Turbulent Flow Regime ($Re \\ge 4000$)**\n\nFor turbulent flow, we use the empirically derived Colebrook equation, which relates $f$, $Re$, and the relative roughness $\\epsilon/D$:\n$$\\frac{1}{\\sqrt{f}} = -2 \\log_{10}\\left(\\frac{\\epsilon}{3.7 D} + \\frac{2.51}{Re \\sqrt{f}}\\right)$$\nThis equation is implicit in $f$ and must be solved numerically. We can define a function $F(f)$ such that its root is the desired solution:\n$$F(f) = \\frac{1}{\\sqrt{f}} + 2 \\log_{10}\\left(\\frac{\\epsilon}{3.7 D} + \\frac{2.51}{Re \\sqrt{f}}\\right) = 0$$\nThis equation can be solved using a numerical root-finding algorithm. A bracketed method, such as the bisection method or Brent's method, is robust for this problem. The function $F(f)$ is monotonic for $f > 0$. We need to find a bracket $[f_{min}, f_{max}]$ where $F(f_{min})$ and $F(f_{max})$ have opposite signs. A safe range for $f$ in pipe flow problems is $[0.001, 1.0]$.\n\n**3. Transitional Flow Regime ($2300 < Re < 4000$)**\n\nIn the transitional regime, the flow is unstable and can exhibit characteristics of both laminar and turbulent flow. A definitive analytical model is lacking. As specified, we use a linear blending approach to ensure a smooth transition between the laminar and turbulent friction factor predictions. We first calculate the hypothetical laminar friction factor, $f_{\\text{lam}}$, and the turbulent friction factor, $f_{\\text{turb}}$, at the transitional Reynolds number.\n$$f_{\\text{lam}} = \\frac{64}{Re}$$\n$$f_{\\text{turb}} \\text{ is the solution to the Colebrook equation at the given } Re \\text{ and } \\epsilon/D.$$\nA blending factor, $\\alpha$, is defined as:\n$$\\alpha = \\frac{4000 - Re}{4000 - 2300} = \\frac{4000 - Re}{1700}$$\nThe final friction factor, $f_{\\text{blend}}$, is a weighted average:\n$$f_{\\text{blend}} = \\alpha f_{\\text{lam}} + (1-\\alpha) f_{\\text{turb}}$$\nAt $Re \\to 2300$, $\\alpha \\to 1$ and $f_{\\text{blend}} \\to f_{\\text{lam}}$. At $Re \\to 4000$, $\\alpha \\to 0$ and $f_{\\text{blend}} \\to f_{\\text{turb}}$. The problem specifies using the laminar formula for $Re=2300$ and the turbulent one for $Re=4000$, which this blending scheme correctly approaches.\n\nThe implementation will proceed by first calculating $Re$ for each test case, then applying the logic for the corresponding regime to compute $f$.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.optimize import root_scalar\n\ndef solve():\n    \"\"\"\n    Computes the Darcy friction factor for chilled-water pipe segments in a DCN.\n    The solution covers laminar, transitional, and turbulent flow regimes.\n    \"\"\"\n\n    # Test cases: (D, epsilon, rho, mu, m_dot)\n    # Units: D [m], epsilon [m], rho [kg/m^3], mu [Pa.s], m_dot [kg/s]\n    test_cases = [\n        # 1: Laminar\n        (0.05, 1e-5, 998, 0.0013, 0.05),\n        # 2: Laminar boundary\n        (0.05, 1e-5, 998, 0.0013, 0.1174169),\n        # 3: Turbulent boundary\n        (0.05, 1e-5, 998, 0.0013, 0.2042035),\n        # 4: Fully turbulent, commercial steel\n        (0.15, 4.5e-5, 999, 0.0013, 20.0),\n        # 5: Fully turbulent, smooth pipe\n        (0.20, 0.0, 998, 0.0012, 5.0),\n        # 6: Fully turbulent, very rough pipe\n        (0.30, 5e-3, 1000, 0.0011, 100.0),\n    ]\n\n    results = []\n\n    def colebrook_solver(Re, D, eps):\n        \"\"\"\n        Solves the Colebrook equation for the Darcy friction factor f.\n        \"\"\"\n        if Re = 0:\n            return 0.0 # No flow, no friction factor\n\n        # The function to find the root of.\n        # F(f) = 1/sqrt(f) + 2*log10(eps/(3.7*D) + 2.51/(Re*sqrt(f))) = 0\n        def colebrook_func(f):\n            if f = 0: # Friction factor must be positive\n                return np.inf\n            sqrt_f = np.sqrt(f)\n            term1 = eps / (3.7 * D)\n            term2 = 2.51 / (Re * sqrt_f)\n            return 1.0 / sqrt_f + 2.0 * np.log10(term1 + term2)\n\n        # A safe bracket for friction factors in most engineering applications.\n        # The function is monotonic, so a bracket is guaranteed to work.\n        try:\n            sol = root_scalar(colebrook_func, bracket=[0.001, 1.0], method='brentq')\n            return sol.root\n        except ValueError:\n            # This should not happen with the given bracket and monotonic function.\n            return np.nan\n\n    for case in test_cases:\n        D, epsilon, rho, mu, m_dot = case\n\n        # Step 1: Calculate Reynolds number (Re)\n        if D = 0 or mu = 0 :\n            Re = 0.0\n        else:\n            Re = (4.0 * m_dot) / (np.pi * mu * D)\n\n        # Step 2: Determine flow regime and compute friction factor (f)\n        if Re = 2300.0:\n            # Laminar flow\n            if Re == 0.0:\n                f = 0.0\n            else:\n                f = 64.0 / Re\n        elif Re >= 4000.0:\n            # Turbulent flow\n            f = colebrook_solver(Re, D, epsilon)\n        else: # 2300  Re  4000\n            # Transitional flow using linear blending\n            f_lam = 64.0 / Re\n            f_turb = colebrook_solver(Re, D, epsilon)\n\n            # Blending factor alpha\n            alpha = (4000.0 - Re) / (4000.0 - 2300.0)\n            \n            f = alpha * f_lam + (1.0 - alpha) * f_turb\n\n        # Round to 6 decimal places as specified\n        results.append(round(f, 6))\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "Having modeled the behavior of individual pipes, we now shift our focus to system-level interactions, which often govern overall plant efficiency. This exercise examines the hydraulic decoupler, a common component that separates primary and secondary loops, and the critical operational issue of flow reversal . Using the simple yet powerful law of mass conservation, you will diagnose the conditions that lead to this inefficient state and quantify its impact, demonstrating how fundamental principles can explain complex system dynamics.",
            "id": "4085933",
            "problem": "A district cooling plant supplies a secondary distribution network through a short hydraulic decoupler (also called a common pipe) that connects the primary supply header to the primary return header, hydraulically isolating the primary pumps from the secondary pumps. The primary side operates with constant-volume pumping, so the total primary mass flow rate is fixed at $\\dot{m}_{p}$. The secondary side uses variable-volume pumping to meet an aggregated building cooling load $L$, and is designed to operate at an approximately constant secondary temperature rise $\\Delta T_{s}$ across the loads over its normal operating range. Assume water as the working fluid with constant specific heat capacity $c_{p}$, negligible heat loss in the decoupler, and negligible pressure drop along the decoupler relative to the headers.\n\nStarting from conservation of mass and conservation of energy for an appropriate control volume that includes the supply header, the decoupler, and the secondary take-off, derive the condition for the onset of flow reversal within the decoupler in terms of the primary and secondary mass flow rates. Then, using the constant-$\\Delta T_{s}$ operating assumption on the secondary side to relate $L$ and the secondary mass flow rate $\\dot{m}_{s}$, compute the critical total secondary load $L_{\\mathrm{rev}}$ at which flow reversal first occurs in the decoupler.\n\nUse the following parameter values, which are representative of a medium-scale district cooling plant:\n- Total primary mass flow rate: $\\dot{m}_{p} = 280\\ \\mathrm{kg\\ s^{-1}}$.\n- Secondary design temperature rise: $\\Delta T_{s} = 6\\ \\mathrm{K}$.\n- Water specific heat capacity: $c_{p} = 4180\\ \\mathrm{J\\ kg^{-1}\\ K^{-1}}$.\n\nIn your reasoning, explain briefly how the direction of flow in the decoupler affects the supply header temperature seen by the secondary network, and discuss the implications for sensor placement and control logic required for reliable detection and mitigation of flow reversal. However, for the final numerical answer, report only the value of $L_{\\mathrm{rev}}$.\n\nExpress $L_{\\mathrm{rev}}$ in megawatts (MW) and round your answer to four significant figures.",
            "solution": "**Derivation of Flow Reversal Condition**\n\nLet us analyze the flow at the junction connecting the primary supply header, the secondary supply take-off, and the decoupler pipe. We define a control volume around this junction. The following mass flow rates are considered:\n-   $\\dot{m}_{p}$: The constant mass flow rate supplied by the primary pumps into the supply header.\n-   $\\dot{m}_{s}$: The variable mass flow rate drawn by the secondary pumps to serve the cooling load.\n-   $\\dot{m}_{d}$: The mass flow rate through the decoupler pipe. We define $\\dot{m}_{d}$ as positive for flow from the primary supply header to the primary return header.\n\nApplying the principle of conservation of mass to the control volume, the total mass flow entering the junction must equal the total mass flow leaving it.\n$$\n\\dot{m}_{p} = \\dot{m}_{s} + \\dot{m}_{d}\n$$\nThis equation can be rearranged to solve for the decoupler flow rate:\n$$\n\\dot{m}_{d} = \\dot{m}_{p} - \\dot{m}_{s}\n$$\nUnder normal operating conditions where the primary flow is sufficient to meet or exceed the secondary demand, we have $\\dot{m}_{p} \\ge \\dot{m}_{s}$, which results in $\\dot{m}_{d} \\ge 0$. The excess primary flow, $\\dot{m}_{d}$, bypasses the secondary circuit and flows through the decoupler to the primary return header.\n\nFlow reversal in the decoupler occurs when the secondary demand exceeds the primary supply, i.e., $\\dot{m}_{s}  \\dot{m}_{p}$. In this situation, the decoupler flow $\\dot{m}_{d}$ becomes negative, signifying that flow is now directed from the primary return header towards the primary supply header to make up the shortfall.\n\nThe *onset* of flow reversal is the critical point where the direction of flow is about to change. This corresponds to the condition where the decoupler flow is exactly zero.\n$$\n\\dot{m}_{d} = 0\n$$\nSubstituting this into the mass balance equation gives the condition for the onset of flow reversal:\n$$\n\\dot{m}_{p} - \\dot{m}_{s} = 0 \\implies \\dot{m}_{s} = \\dot{m}_{p}\n$$\nThus, flow reversal begins when the secondary mass flow rate exactly equals the primary mass flow rate.\n\n**Derivation of Critical Load for Flow Reversal**\n\nThe aggregated building cooling load, $L$, is the rate at which heat is transferred to the chilled water in the secondary circuit. This is given by the thermodynamic relation:\n$$\nL = \\dot{m}_{s} c_{p} \\Delta T_{s,load}\n$$\nwhere $\\Delta T_{s,load}$ is the temperature rise of the water across the building loads. The problem states that the secondary network is designed to operate at an approximately constant secondary temperature rise, $\\Delta T_{s}$. So, we have:\n$$\nL = \\dot{m}_{s} c_{p} \\Delta T_{s}\n$$\nThe critical total secondary load, $L_{\\mathrm{rev}}$, is the load at which flow reversal first occurs. We found this condition to be $\\dot{m}_{s} = \\dot{m}_{p}$. Substituting this into the load equation yields the expression for the critical load:\n$$\nL_{\\mathrm{rev}} = \\dot{m}_{p} c_{p} \\Delta T_{s}\n$$\n\n**Discussion of Implications**\n\nThe direction of flow in the decoupler has a critical impact on the temperature of the water supplied to the secondary network, $T_{s,s}$. Let $T_{p,s}$ be the primary supply temperature from the plant and $T_{p,r}$ be the primary return temperature. In a cooling system, $T_{p,r}  T_{p,s}$.\n\n1.  **No Reversal ($\\dot{m}_{d} \\ge 0$)**: When $\\dot{m}_{p} \\ge \\dot{m}_{s}$, the water supplied to the secondary circuit comes directly from the primary supply header. Therefore, the secondary supply temperature is equal to the primary supply temperature: $T_{s,s} = T_{p,s}$. This is the desired mode of operation, as it delivers the coldest possible water to the buildings.\n\n2.  **Flow Reversal ($\\dot{m}_{d}  0$)**: When $\\dot{m}_{s}  \\dot{m}_{p}$, the primary flow is insufficient. The deficit, $|\\dot{m}_{d}| = \\dot{m}_{s} - \\dot{m}_{p}$, is drawn from the primary return header through the decoupler. This warmer return water (at temperature $T_{p,r}$) mixes with the primary supply water (at temperature $T_{p,s}$) at the supply header junction. An energy balance on the junction shows that the resulting secondary supply temperature $T_{s,s}$ becomes a weighted average of $T_{p,s}$ and $T_{p,r}$:\n    $$\n    T_{s,s} = \\frac{\\dot{m}_{p}T_{p,s} + (\\dot{m}_{s}-\\dot{m}_{p})T_{p,r}}{\\dot{m}_{s}}\n    $$\n    Since $T_{p,r}  T_{p,s}$, the consequence is that $T_{s,s}  T_{p,s}$. This phenomenon, known as supply temperature degradation, reduces the cooling potential of the water supplied to the buildings and can lead to an inability to meet the required cooling loads.\n\n**Implications for Sensor Placement and Control:**\n-   **Detection**: Reliable detection of flow reversal is crucial for plant operation. This can be achieved in several ways:\n    a) By placing flow meters to measure $\\dot{m}_{p}$ and $\\dot{m}_{s}$ and having the control system continuously compare them.\n    b) By installing a bidirectional flow meter directly in the decoupler pipe to measure $\\dot{m}_{d}$.\n    c) By placing temperature sensors to measure $T_{p,s}$ (just upstream of the decoupler) and $T_{s,s}$ (just downstream of the decoupler). A positive temperature difference, $T_{s,s} - T_{p,s}  0$, is a definitive indicator of flow reversal.\n-   **Control Logic**: The plant's control system should actively prevent this condition by ensuring $\\dot{m}_{p}$ is always greater than or equal to $\\dot{m}_{s}$. As the secondary load $L$ (and thus $\\dot{m}_{s}$) increases and approaches the critical point ($\\dot{m}_{s} \\to \\dot{m}_{p}$), the control system must take action, typically by increasing the primary flow rate (e.g., by staging on additional primary pumps). The value $L_{\\mathrm{rev}}$ represents the maximum load the system can handle in its current primary operating mode without performance degradation.\n\n**Numerical Calculation of Critical Load**\n\nUsing the derived formula and the given parameter values:\n$$\nL_{\\mathrm{rev}} = \\dot{m}_{p} c_{p} \\Delta T_{s}\n$$\nThe parameters are:\n-   $\\dot{m}_{p} = 280\\ \\mathrm{kg\\ s^{-1}}$\n-   $c_{p} = 4180\\ \\mathrm{J\\ kg^{-1}\\ K^{-1}}$\n-   $\\Delta T_{s} = 6\\ \\mathrm{K}$\n\nSubstituting these values:\n$$\nL_{\\mathrm{rev}} = (280) \\times (4180) \\times (6)\\ \\mathrm{J\\ s^{-1}}\n$$\n$$\nL_{\\mathrm{rev}} = 7,022,400\\ \\mathrm{W}\n$$\nTo express this in megawatts (MW), we divide by $10^6$:\n$$\nL_{\\mathrm{rev}} = \\frac{7,022,400}{1,000,000}\\ \\mathrm{MW} = 7.0224\\ \\mathrm{MW}\n$$\nThe problem requires the answer to be rounded to four significant figures.\n$$\nL_{\\mathrm{rev}} \\approx 7.022\\ \\mathrm{MW}\n$$",
            "answer": "$$\n\\boxed{7.022}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "The heart of any optimization problem is its objective function. In unit commitment, this function quantifies the total cost of operating a set of power plants. This first exercise  provides a foundational, hands-on opportunity to deconstruct this objective function by manually calculating the costs for a pre-defined generator schedule. By working through the distinct cost components—including state-dependent start-up costs, no-load costs, and piecewise-linear variable costs—you will build a concrete intuition for the economic trade-offs that a mixed-integer programming solver evaluates.",
            "id": "4104439",
            "problem": "A thermal generating unit is modeled within the Mixed-Integer Programming (MIP) formulation of the Unit Commitment (UC) problem over a planning horizon of $T = 8$ one-hour periods. The commitment variable is $u_t \\in \\{0,1\\}$ for each period $t \\in \\{1,2,\\dots,8\\}$, where $u_t = 1$ indicates the unit is on. The start-up indicator is $y_t \\in \\{0,1\\}$, defined by $y_t = \\max\\{0, u_t - u_{t-1}\\}$ with the convention that $u_0$ corresponds to the status immediately before the horizon. The shutdown indicator is $w_t \\in \\{0,1\\}$, defined by $w_t = \\max\\{0, u_{t-1} - u_t\\}$. The production decision is $p_t \\ge 0$, which must satisfy $p_t \\in [P^{\\min}, P^{\\max}]$ whenever $u_t = 1$ and $p_t = 0$ whenever $u_t = 0$. The cost decomposition follows standard UC modeling practice: total production cost includes a no-load cost, a variable cost, and event-based start-up and shutdown costs.\n\nThe unit’s parameters are:\n- Minimum and maximum power: $P^{\\min} = 50$ megawatts and $P^{\\max} = 150$ megawatts.\n- Variable production cost is convex piecewise linear with a breakpoint at $P^{\\text{mid}} = 100$ megawatts:\n$$\nC^{\\text{var}}(p_t) = \n\\begin{cases}\nm_1 \\, p_t  \\text{if } p_t \\le P^{\\text{mid}}, \\\\\nm_1 \\, P^{\\text{mid}} + m_2 \\, (p_t - P^{\\text{mid}})  \\text{if } p_t > P^{\\text{mid}},\n\\end{cases}\n$$\nwith slopes $m_1 = 18$ United States Dollars per megawatt-hour and $m_2 = 30$ United States Dollars per megawatt-hour.\n- No-load cost: $C^{\\text{nl}} = 500$ United States Dollars per hour whenever $u_t = 1$.\n- Shutdown cost per event: $SD = 1000$ United States Dollars.\n- Start-up cost depends on the consecutive offline duration $d$ immediately prior to the start:\n$$\nSU(d) = \n\\begin{cases}\nSU^{\\text{hot}} = 2000  \\text{if } d \\le H^{\\text{hot}}, \\\\\nSU^{\\text{warm}} = 5000  \\text{if } H^{\\text{hot}}  d \\le H^{\\text{warm}}, \\\\\nSU^{\\text{cold}} = 12000  \\text{if } d > H^{\\text{warm}},\n\\end{cases}\n$$\nwith thresholds $H^{\\text{hot}} = 2$ hours and $H^{\\text{warm}} = 6$ hours. The consecutive offline duration $d$ at a start in period $t$ equals the number of successive hours with $u_\\tau = 0$ directly preceding $t$, including the offline hours prior to the horizon. The initial status before the horizon is $u_0 = 0$ and the unit has been offline for $L_0 = 7$ hours prior to period $t=1$.\n\nConsider the following trial schedule over $t = 1,\\dots,8$:\n- $t = 1$: $u_1 = 0$, $p_1 = 0$.\n- $t = 2$: $u_2 = 0$, $p_2 = 0$.\n- $t = 3$: $u_3 = 1$, $y_3 = 1$, $p_3 = 80$.\n- $t = 4$: $u_4 = 1$, $y_4 = 0$, $p_4 = 120$.\n- $t = 5$: $u_5 = 1$, $y_5 = 0$, $p_5 = 100$.\n- $t = 6$: $u_6 = 0$, $w_6 = 1$, $p_6 = 0$.\n- $t = 7$: $u_7 = 0$, $p_7 = 0$.\n- $t = 8$: $u_8 = 1$, $y_8 = 1$, $p_8 = 150$.\n\nAssume that ramping limits and minimum up/down time constraints are satisfied by the trial schedule and do not bind. Using the above definitions:\n1. Compute the total cost over the horizon aggregating the start-up costs, shutdown costs, no-load costs, and variable production costs for the given trial schedule.\n2. Define an alternative schedule identical to the trial schedule except that the first start and associated on-state at period $t = 3$ are shifted later by one period to $t = 4$, with $u_3 = 0$, $y_4 = 1$, and the production levels from period $t = 4$ onward unchanged from the trial schedule. Compute the total cost under this alternative.\n3. Report the marginal cost of starting one period earlier versus later, defined as the difference between the trial schedule cost (start at $t = 3$) and the alternative schedule cost (start at $t = 4$). A positive value indicates that starting earlier is more costly.\n\nExpress the final answer in United States Dollars (USD) and round your answer to four significant figures. Periods are one hour long.",
            "solution": "The problem is first validated against the specified criteria.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n\n-   **Planning Horizon**: $T = 8$ one-hour periods.\n-   **Variables**:\n    -   Commitment: $u_t \\in \\{0,1\\}$ for $t \\in \\{1, 2, \\dots, 8\\}$.\n    -   Start-up: $y_t = \\max\\{0, u_t - u_{t-1}\\} \\in \\{0,1\\}$.\n    -   Shutdown: $w_t = \\max\\{0, u_{t-1} - u_t\\} \\in \\{0,1\\}$.\n    -   Production: $p_t \\ge 0$.\n-   **Initial Conditions**: $u_0 = 0$, and the unit has been offline for $L_0 = 7$ hours prior to period $t=1$.\n-   **Unit Parameters**:\n    -   Minimum Power: $P^{\\min} = 50$ megawatts.\n    -   Maximum Power: $P^{\\max} = 150$ megawatts.\n    -   Production Constraint: $u_t = 1 \\implies p_t \\in [P^{\\min}, P^{\\max}]$, $u_t = 0 \\implies p_t = 0$.\n    -   No-Load Cost: $C^{\\text{nl}} = 500$ USD/hr.\n    -   Shutdown Cost: $SD = 1000$ USD/event.\n    -   Variable Cost: A convex piecewise linear function $C^{\\text{var}}(p_t)$ with a breakpoint at $P^{\\text{mid}} = 100$ MW.\n        -   Slope 1: $m_1 = 18$ USD/MWh for $p_t \\le P^{\\text{mid}}$.\n        -   Slope 2: $m_2 = 30$ USD/MWh for $p_t  P^{\\text{mid}}$.\n    -   Start-up Cost $SU(d)$ based on offline duration $d$:\n        -   $SU^{\\text{hot}} = 2000$ USD if $d \\le H^{\\text{hot}} = 2$ hours.\n        -   $SU^{\\text{warm}} = 5000$ USD if $H^{\\text{hot}}  d \\le H^{\\text{warm}} = 6$ hours.\n        -   $SU^{\\text{cold}} = 12000$ USD if $d  H^{\\text{warm}} = 6$ hours.\n-   **Trial Schedule**:\n    -   $t = 1$: $u_1 = 0$, $p_1 = 0$.\n    -   $t = 2$: $u_2 = 0$, $p_2 = 0$.\n    -   $t = 3$: $u_3 = 1$, $y_3 = 1$, $p_3 = 80$.\n    -   $t = 4$: $u_4 = 1$, $y_4 = 0$, $p_4 = 120$.\n    -   $t = 5$: $u_5 = 1$, $y_5 = 0$, $p_5 = 100$.\n    -   $t = 6$: $u_6 = 0$, $w_6 = 1$, $p_6 = 0$.\n    -   $t = 7$: $u_7 = 0$, $p_7 = 0$.\n    -   $t = 8$: $u_8 = 1$, $y_8 = 1$, $p_8 = 150$.\n-   **Alternative Schedule Definition**: Identical to trial, but start at $t=4$ instead of $t=3$. So $u_3=0$, $y_4=1$, and production levels from $t=4$ onward are unchanged.\n-   **Requested Computations**:\n    1.  Total cost of the trial schedule.\n    2.  Total cost of the alternative schedule.\n    3.  Marginal cost: (Cost of trial schedule) - (Cost of alternative schedule).\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is a standard, well-defined exercise in calculating the operational cost of a thermal generator based on a given schedule. The model and parameters are consistent with established practices in energy systems engineering and mixed-integer programming for unit commitment.\n-   **Scientifically Grounded**: The problem is based on the standard economic dispatch and unit commitment models used in power system operations. All parameters and concepts are valid.\n-   **Well-Posed**: The problem provides all necessary data to compute the required costs. The tasks are specific and lead to unique numerical answers.\n-   **Objective**: The language is precise and quantitative. No subjective elements are present.\n-   The data is internally consistent. For example, the given production levels $p_t$ are within the $[P^{\\min}, P^{\\max}]$ range when the unit is on ($u_t=1$) and are zero when the unit is off ($u_t=0$). For instance, at $t=3$, $p_3=80$ is within $[50, 150]$.\n\n**Step 3: Verdict and Action**\nThe problem is deemed **valid**. A full solution will be provided.\n\n### Solution\n\nThe total cost over the horizon is the sum of start-up, shutdown, no-load, and variable production costs.\n$C_{\\text{total}} = \\sum_{t=1}^{T} \\left( SU_t + SD_t \\cdot w_t + C^{\\text{nl}} \\cdot u_t + C^{\\text{var}}(p_t) \\right)$\nwhere $SU_t$ is the start-up cost incurred if a start-up event happens in period $t$.\n\n**1. Total Cost of the Trial Schedule ($C_{\\text{trial}}$)**\n\nFirst, we calculate each cost component for the given trial schedule.\n\n**A. Start-up Costs:**\nStart-ups occur when $y_t = 1$, which is at $t=3$ and $t=8$.\n-   **Start-up at $t=3$**: The unit is offline for $t=1, 2$. The initial offline duration is $L_0=7$ hours. The total consecutive offline duration $d_3$ before the start at $t=3$ is $d_3 = L_0 + 2 = 7 + 2 = 9$ hours. Since $d_3 = 9 > H^{\\text{warm}} = 6$, this is a cold start. The cost is $SU(d_3) = SU^{\\text{cold}} = \\$12000$.\n-   **Start-up at $t=8$**: The unit is on at $t=5$ and shuts down at $t=6$. It remains offline for $t=6, 7$. The consecutive offline duration $d_8$ before the start at $t=8$ is $d_8 = 2$ hours. Since $d_8=2 \\le H^{\\text{hot}}=2$, this is a hot start. The cost is $SU(d_8) = SU^{\\text{hot}} = \\$2000$.\n-   Total Start-up Cost: $C_{\\text{su}} = \\$12000 + \\$2000 = \\$14000$.\n\n**B. Shutdown Costs:**\nA shutdown occurs when $w_t=1$, which is at $t=6$. There is one shutdown event.\n-   Total Shutdown Cost: $C_{\\text{sd}} = 1 \\cdot SD = \\$1000$.\n\n**C. No-Load Costs:**\nThe unit is online ($u_t=1$) during periods $t=3, 4, 5, 8$. This is a total of $4$ hours.\n-   Total No-Load Cost: $C_{\\text{nl}} = 4 \\cdot C^{\\text{nl}} = 4 \\cdot \\$500 = \\$2000$.\n\n**D. Variable Production Costs:**\nWe calculate the cost for each period the unit is producing power.\n-   $t=3$: $p_3 = 80$ MW. Since $p_3 \\le P^{\\text{mid}}=100$, the cost is $C^{\\text{var}}(80) = m_1 \\cdot p_3 = 18 \\cdot 80 = \\$1440$.\n-   $t=4$: $p_4 = 120$ MW. Since $p_4 > P^{\\text{mid}}$, the cost is $C^{\\text{var}}(120) = m_1 \\cdot P^{\\text{mid}} + m_2 \\cdot (p_4 - P^{\\text{mid}}) = 18 \\cdot 100 + 30 \\cdot (120 - 100) = 1800 + 30 \\cdot 20 = 1800 + 600 = \\$2400$.\n-   $t=5$: $p_5 = 100$ MW. Since $p_5 \\le P^{\\text{mid}}$, the cost is $C^{\\text{var}}(100) = m_1 \\cdot p_5 = 18 \\cdot 100 = \\$1800$.\n-   $t=8$: $p_8 = 150$ MW. Since $p_8 > P^{\\text{mid}}$, the cost is $C^{\\text{var}}(150) = m_1 \\cdot P^{\\text{mid}} + m_2 \\cdot (p_8 - P^{\\text{mid}}) = 18 \\cdot 100 + 30 \\cdot (150 - 100) = 1800 + 30 \\cdot 50 = 1800 + 1500 = \\$3300$.\n-   Total Variable Cost: $C_{\\text{var}} = \\$1440 + \\$2400 + \\$1800 + \\$3300 = \\$8940$.\n\n**Total Cost of Trial Schedule:**\n$C_{\\text{trial}} = C_{\\text{su}} + C_{\\text{sd}} + C_{\\text{nl}} + C_{\\text{var}} = \\$14000 + \\$1000 + \\$2000 + \\$8940 = \\$25940$.\n\n**2. Total Cost of the Alternative Schedule ($C_{\\text{alt}}$)**\n\nIn the alternative schedule, the unit is off at $t=3$ and starts at $t=4$. The commitment and production schedule for $t=4$ onwards is the same as the trial schedule.\nThe new schedule is: $u'_1=0, u'_2=0, u'_3=0, u'_4=1, u'_5=1, u'_6=0, u'_7=0, u'_8=1$.\nProduction is: $p'_3=0, p'_4=120, p'_5=100, p'_8=150$.\n\n**A. Start-up Costs:**\nStart-ups occur at $t=4$ and $t=8$.\n-   **Start-up at $t=4$**: The unit is offline for $t=1, 2, 3$. With $L_0=7$, the total offline duration is $d_4 = L_0 + 3 = 7 + 3 = 10$ hours. Since $d_4 = 10 > H^{\\text{warm}}=6$, this is a cold start. Cost is $SU(d_4) = SU^{\\text{cold}} = \\$12000$.\n-   **Start-up at $t=8$**: The offline period is still $t=6, 7$, so $d_8 = 2$ hours. This is a hot start. Cost is $SU(d_8) = SU^{\\text{hot}} = \\$2000$.\n-   Total Start-up Cost: $C'_{\\text{su}} = \\$12000 + \\$2000 = \\$14000$.\n\n**B. Shutdown Costs:**\nA shutdown occurs at $t=6$ ($u'_5=1, u'_6=0$). There is one shutdown.\n-   Total Shutdown Cost: $C'_{\\text{sd}} = 1 \\cdot SD = \\$1000$.\n\n**C. No-Load Costs:**\nThe unit is online ($u'_t=1$) during periods $t=4, 5, 8$. This is a total of $3$ hours.\n-   Total No-Load Cost: $C'_{\\text{nl}} = 3 \\cdot C^{\\text{nl}} = 3 \\cdot \\$500 = \\$1500$.\n\n**D. Variable Production Costs:**\nProduction occurs at $t=4, 5, 8$.\n-   $C^{\\text{var}}(p'_4=120) = \\$2400$.\n-   $C^{\\text{var}}(p'_5=100) = \\$1800$.\n-   $C^{\\text{var}}(p'_8=150) = \\$3300$.\n-   Total Variable Cost: $C'_{\\text{var}} = \\$2400 + \\$1800 + \\$3300 = \\$7500$.\n\n**Total Cost of Alternative Schedule:**\n$C_{\\text{alt}} = C'_{\\text{su}} + C'_{\\text{sd}} + C'_{\\text{nl}} + C'_{\\text{var}} = \\$14000 + \\$1000 + \\$1500 + \\$7500 = \\$24000$.\n\n**3. Marginal Cost of Starting Earlier**\n\nThe marginal cost is defined as the difference between the trial schedule cost and the alternative schedule cost.\nMarginal Cost $= C_{\\text{trial}} - C_{\\text{alt}} = \\$25940 - \\$24000 = \\$1940$.\nThis positive value indicates that starting earlier (at $t=3$) is more costly. The difference arises because the trial schedule incurs costs for an additional hour of operation at $t=3$ (no-load cost and variable cost), while the start-up cost type (cold start) remains the same for both schedules.\nThe cost difference is precisely the cost of operating at $t=3$:\n$\\Delta C = C^{\\text{nl}} + C^{\\text{var}}(p_3) = \\$500 + \\$1440 = \\$1940$.\n\nThe problem requires the answer to be rounded to four significant figures. The calculated value is $1940$. To express this unambiguously with four significant figures, we use scientific notation: $1.940 \\times 10^3$.\nThe first computed value is $25940$, which is $2.594 \\times 10^4$ to four significant figures.\nThe second computed value is $24000$, which is $2.400 \\times 10^4$ to four significant figures.\nThe problem primarily asks to \"Report the marginal cost\". The previous two calculations are intermediary steps for this final report.",
            "answer": "$$\\boxed{1.940 \\times 10^3}$$"
        },
        {
            "introduction": "Moving from analysis to synthesis, this practice challenges you to build a simple unit commitment solver from the ground up . While real-world solvers are highly complex, implementing a basic version provides invaluable insight into the interplay between economic dispatch and inter-temporal constraints like ramp rates. This exercise will guide you through developing a program that not only finds the least-cost commitment and dispatch schedule but also identifies when physical generator limits become the bottleneck in system operation.",
            "id": "4104512",
            "problem": "You are given a sequence of electrical demand levels and a set of thermal generating units with binary commitment decisions, continuous dispatch decisions, and inter-temporal ramping limits. From first principles in energy systems modeling, the dispatch must satisfy supply-demand balance at every time period, while each unit’s output must lie within an on/off-dependent capability range and change between periods subject to its ramping limits. The cost to minimize is the operating cost—the sum of constant marginal energy costs and any start-up costs when a unit transitions from off to on. The task is to compute a feasible, cost-minimizing dispatch and identify the critical periods where ramping constraints are binding.\n\nFundamental base:\n- The supply-demand balance requires that total generation equals demand at each time step: for period index $t$ and demand $d_t$, the sum of unit outputs equals $d_t$, i.e., $\\sum_{i=1}^{N} p_{i,t} = d_t$. This expresses conservation of energy over the scheduling interval, ignoring losses for simplicity.\n- A unit’s production capability when on is limited between its technical minimum and maximum, $P_{\\min,i} \\le p_{i,t} \\le P_{\\max,i}$ if $u_{i,t}=1$, and $p_{i,t}=0$ if $u_{i,t}=0$, where $u_{i,t} \\in \\{0,1\\}$ is the on/off commitment.\n- Ramp-rate limits reflect mechanical and thermal constraints that bound inter-temporal changes in production: when $u_{i,t-1}=u_{i,t}=1$, the change satisfies $p_{i,t} - p_{i,t-1} \\le R^{\\uparrow}_i$ and $p_{i,t-1} - p_{i,t} \\le R^{\\downarrow}_i$, where $R^{\\uparrow}_i$ and $R^{\\downarrow}_i$ are the upward and downward ramp rates expressed per scheduling interval. For start-up transitions with $u_{i,t-1}=0$ and $u_{i,t}=1$, we assume immediate production at the technical minimum, $p_{i,t}=P_{\\min,i}$, consistent with a start-up ramp $S^{\\uparrow}_i = P_{\\min,i}$. For shut-down transitions with $u_{i,t-1}=1$ and $u_{i,t}=0$, we assume immediate cessation, $p_{i,t}=0$, enabled by a shut-down ramp $S^{\\downarrow}_i \\ge P_{\\max,i}$.\n- Operating cost per period is linear in dispatch with unit-specific marginal cost $c_i$ (currency per megawatt-hour). A start-up incurs a fixed cost $C^{\\text{SU}}_i$ when $u_{i,t-1}=0$ and $u_{i,t}=1$.\n\nYour program must, for each test case, search over the commitment decisions that satisfy the above fundamentals, compute a feasible dispatch sequence $p_{i,t}$ that minimizes total operating cost, and identify the period indices where unit-level ramp constraints are binding under the optimal dispatch. A unit-level ramp constraint at period $t$ is “binding” if, for a unit $i$ with $u_{i,t-1}=u_{i,t}=1$, the inequality $p_{i,t} - p_{i,t-1} \\le R^{\\uparrow}_i$ holds with equality or the inequality $p_{i,t-1} - p_{i,t} \\le R^{\\downarrow}_i$ holds with equality. Additionally, for start-ups ($u_{i,t-1}=0$, $u_{i,t}=1$), treat the enforced increase $p_{i,t}-0=S^{\\uparrow}_i$ as binding.\n\nPhysical units and angle unit:\n- Power and energy should be treated in megawatts ($\\mathrm{MW}$) and megawatt-hours ($\\mathrm{MWh}$). Ramps are in $\\mathrm{MW}$ per period. Costs are in dollars per $\\mathrm{MWh}$ for $c_i$ and dollars for $C^{\\text{SU}}_i$.\n- No angle quantities are involved.\n\nFor computational tractability at the advanced graduate level, you will implement an exhaustive search over commitment sequences for a small test suite. At each period, given a commitment, derive per-unit feasible production intervals from capability and ramp limits, check supply-demand balance feasibility by comparing the demand to the sum of lower and upper feasible bounds, and, if feasible, compute a cost-minimizing dispatch by allocating from the lower bounds upward in nondecreasing order of marginal costs.\n\nTest suite:\n- Shared unit parameters ($N=3$ units):\n  - Unit $i=1$: $P_{\\min,1} = 50\\,\\mathrm{MW}$, $P_{\\max,1} = 150\\,\\mathrm{MW}$, $R^{\\uparrow}_1 = 40\\,\\mathrm{MW}$, $R^{\\downarrow}_1 = 30\\,\\mathrm{MW}$, $c_1 = 20$ dollars per $\\mathrm{MWh}$, $C^{\\text{SU}}_1 = 2000$ dollars.\n  - Unit $i=2$: $P_{\\min,2} = 30\\,\\mathrm{MW}$, $P_{\\max,2} = 100\\,\\mathrm{MW}$, $R^{\\uparrow}_2 = 30\\,\\mathrm{MW}$, $R^{\\downarrow}_2 = 25\\,\\mathrm{MW}$, $c_2 = 25$ dollars per $\\mathrm{MWh}$, $C^{\\text{SU}}_2 = 1500$ dollars.\n  - Unit $i=3$: $P_{\\min,3} = 20\\,\\mathrm{MW}$, $P_{\\max,3} = 80\\,\\mathrm{MW}$, $R^{\\uparrow}_3 = 25\\,\\mathrm{MW}$, $R^{\\downarrow}_3 = 20\\,\\mathrm{MW}$, $c_3 = 30$ dollars per $\\mathrm{MWh}$, $C^{\\text{SU}}_3 = 1000$ dollars.\n  - Start-up ramp $S^{\\uparrow}_i = P_{\\min,i}$ and shut-down ramp $S^{\\downarrow}_i = P_{\\max,i}$ for all $i$.\n  - Period count $T=4$.\n- Three test cases, each with initial conditions at period $t=0$ and a demand trajectory for periods $t=1,\\dots,T$:\n  1. Case A (moderate increase, non-binding expected): Initial commitment $u_{i,0} = 1$ for $i=1,2,3$. Initial outputs $p_{1,0} = 60\\,\\mathrm{MW}$, $p_{2,0} = 40\\,\\mathrm{MW}$, $p_{3,0} = 30\\,\\mathrm{MW}$. Demand trajectory $[130, 140, 150, 160]\\,\\mathrm{MW}$ for $t=1,\\dots,4$.\n  2. Case B (steep ramp-up, binding expected): Initial commitment $u_{i,0} = 1$ for $i=1,2,3$. Initial outputs $p_{1,0} = 50\\,\\mathrm{MW}$, $p_{2,0} = 40\\,\\mathrm{MW}$, $p_{3,0} = 30\\,\\mathrm{MW}$. Demand trajectory $[120, 180, 230, 250]\\,\\mathrm{MW}$ for $t=1,\\dots,4$.\n  3. Case C (steep ramp-down, binding expected): Initial commitment $u_{i,0} = 1$ for $i=1,2,3$. Initial outputs $p_{1,0} = 90\\,\\mathrm{MW}$, $p_{2,0} = 70\\,\\mathrm{MW}$, $p_{3,0} = 40\\,\\mathrm{MW}$. Demand trajectory $[200, 170, 140, 120]\\,\\mathrm{MW}$ for $t=1,\\dots,4$.\n\nYour program must:\n- For each test case, compute the cost-minimizing feasible dispatch over $T$ periods, searching over commitment sequences $u_{i,t} \\in \\{0,1\\}$.\n- Identify the set of period indices $t \\in \\{1,2,3,4\\}$ where at least one unit’s ramp constraint is binding in the optimal solution.\n- Return, for each test case, a list containing the minimal total operating cost (as a float, measured in dollars, assuming each period is one hour) and a list of binding period indices.\n\nFinal output format:\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each element corresponds to one test case in order, and is itself a list containing the total cost and the list of binding period indices. For example, the output must look like $[[\\text{cost}_A,[t\\_A]], [\\text{cost}_B,[t\\_B]], [\\text{cost}_C,[t\\_C]]]$, with actual numeric values replacing the placeholders.",
            "solution": "The user has provided a well-defined unit commitment problem, a classic optimization task in energy systems engineering. The goal is to determine the on/off status (commitment) and power output (dispatch) for a set of generating units over a discrete time horizon to meet a given electricity demand at minimum cost, subject to a variety of physical and operational constraints.\n\n### **Problem Validation**\n\n**Step 1: Extract Givens**\n\nThe problem provides the following data and principles:\n- **System Parameters**: A set of $N=3$ thermal generating units and a scheduling horizon of $T=4$ periods.\n- **Unit Characteristics (for $i=1, 2, 3$)**:\n    - Minimum and maximum power output: $P_{\\min,i}$, $P_{\\max,i}$ ($\\mathrm{MW}$)\n    - Ramp-up and ramp-down rates: $R^{\\uparrow}_i$, $R^{\\downarrow}_i$ ($\\mathrm{MW}$/period)\n    - Marginal generation cost: $c_i$ (\\$/$\\mathrm{MWh}$)\n    - Start-up cost: $C^{\\text{SU}}_i$ (\\$)\n- **Data for Units**:\n    - Unit 1: $P_{\\min,1} = 50\\,\\mathrm{MW}$, $P_{\\max,1} = 150\\,\\mathrm{MW}$, $R^{\\uparrow}_1 = 40\\,\\mathrm{MW}$, $R^{\\downarrow}_1 = 30\\,\\mathrm{MW}$, $c_1 = 20\\,\\$/\\mathrm{MWh}$, $C^{\\text{SU}}_1 = 2000\\,\\$$\n    - Unit 2: $P_{\\min,2} = 30\\,\\mathrm{MW}$, $P_{\\max,2} = 100\\,\\mathrm{MW}$, $R^{\\uparrow}_2 = 30\\,\\mathrm{MW}$, $R^{\\downarrow}_2 = 25\\,\\mathrm{MW}$, $c_2 = 25\\,\\$/\\mathrm{MWh}$, $C^{\\text{SU}}_2 = 1500\\,\\$$\n    - Unit 3: $P_{\\min,3} = 20\\,\\mathrm{MW}$, $P_{\\max,3} = 80\\,\\mathrm{MW}$, $R^{\\uparrow}_3 = 25\\,\\mathrm{MW}$, $R^{\\downarrow}_3 = 20\\,\\mathrm{MW}$, $c_3 = 30\\,\\$/\\mathrm{MWh}$, $C^{\\text{SU}}_3 = 1000\\,\\$$\n- **Operational Rules**:\n    - Supply-Demand Balance: $\\sum_{i=1}^{N} p_{i,t} = d_t$ for each period $t$, where $p_{i,t}$ is the power output of unit $i$ at time $t$ and $d_t$ is the demand.\n    - Commitment Decision: $u_{i,t} \\in \\{0,1\\}$ (off/on).\n    - Generation Limits: If $u_{i,t}=1$, then $P_{\\min,i} \\le p_{i,t} \\le P_{\\max,i}$. If $u_{i,t}=0$, then $p_{i,t}=0$.\n    - Ramping (On-to-On): If $u_{i,t-1}=u_{i,t}=1$, then $p_{i,t} - p_{i,t-1} \\le R^{\\uparrow}_i$ and $p_{i,t-1} - p_{i,t} \\le R^{\\downarrow}_i$.\n    - Ramping (Start-up): If $u_{i,t-1}=0$ and $u_{i,t}=1$, then $p_{i,t}=P_{\\min,i}$. This is defined as a start-up ramp $S^{\\uparrow}_i = P_{\\min,i}$.\n    - Cost Objective: Minimize total operating cost, which is the sum of start-up costs and generation costs. Generation cost for one hour is $c_i \\cdot p_{i,t}$.\n- **Binding Constraint Definition**: A ramp constraint for unit $i$ at period $t$ is binding if:\n    1. The unit starts up ($u_{i,t-1}=0, u_{i,t}=1$).\n    2. The unit is continuously on ($u_{i,t-1}=1, u_{i,t}=1$) and its output change equals its ramp limit: $p_{i,t} - p_{i,t-1} = R^{\\uparrow}_i$ or $p_{i,t-1} - p_{i,t} = R^{\\downarrow}_i$.\n- **Test Cases**: Three cases (A, B, C) are given, each with initial conditions ($u_{i,0}, p_{i,0}$) and a demand trajectory $d_t$ for $t=1, \\dots, 4$.\n- **Computational Method**: An exhaustive search over all commitment sequences is specified. For each feasible commitment, a cost-minimizing dispatch is to be calculated using a merit-order approach.\n\n**Step 2: Validate Using Extracted Givens**\n\nThe problem is subjected to validation:\n- **Scientifically Grounded**: The problem is a canonical representation of the Unit Commitment (UC) problem, a fundamental topic in power systems optimization. The principles of supply-demand balance, generation limits, and ramping constraints are all physically and economically meaningful. The model is a standard, albeit simplified, formulation.\n- **Well-Posed**: The problem is well-posed. The search space of commitment schedules is finite ($2^{N \\times T} = 2^{12} = 4096$). For each schedule, the feasibility check is deterministic. For each feasible schedule, the economic dispatch subproblem is a linear program with a well-defined minimum cost, and the problem prescribes a specific greedy algorithm (merit order) to find it. Therefore, a unique minimum total cost exists and can be found through the specified exhaustive search.\n- **Objective**: The problem is stated with objective, precise mathematical terminology. All data, constraints, and objectives are unambiguous.\n\nThe problem does not exhibit any flaws such as scientific unsoundness, incompleteness, contradiction, or reliance on subjective claims.\n\n**Step 3: Verdict and Action**\n\nThe problem is **valid**. A solution will be provided based on the specified exhaustive search methodology.\n\n### **Solution Methodology**\n\nThe problem requires finding an optimal sequence of commitment decisions $u_{i,t}$ and corresponding real-valued dispatch decisions $p_{i,t}$ that minimize the total operating cost over a finite horizon. Given the small scale of the problem ($N=3$ units, $T=4$ periods), an exhaustive search over all possible commitment schedules is computationally tractable. There are $(2^4)^3 = 4096$ unique commitment schedules for the three units over the four-period horizon.\n\nThe algorithm proceeds as follows:\n\n1.  **Iterate through all possible commitment schedules**. A schedule is an $N \\times T$ binary matrix, where each element $u_{i,t}$ denotes the on/off state of unit $i$ at period $t$.\n\n2.  For each candidate schedule, we evaluate its feasibility and cost by stepping through time from $t=1$ to $T=4$. The state of the system at period $t$ depends on the state at $t-1$.\n\n3.  **For each period $t$ in a schedule:**\n    a.  **Calculate Start-up Costs and Feasible Power Ranges**: For each unit $i$, we first determine its feasible power generation interval $[\\underline{p}_{i,t}, \\overline{p}_{i,t}]$. This interval is constrained by both the unit's intrinsic capabilities ($P_{\\min,i}, P_{\\max,i}$) and its inter-temporal ramp limits, which depend on its power output $p_{i,t-1}$ from the previous period.\n        - If unit $i$ is off ($u_{i,t}=0$): $\\underline{p}_{i,t} = \\overline{p}_{i,t} = 0$.\n        - If unit $i$ starts up ($u_{i,t-1}=0, u_{i,t}=1$): A start-up cost $C^{\\text{SU}}_i$ is incurred. The output is fixed at its minimum level, so $\\underline{p}_{i,t} = \\overline{p}_{i,t} = P_{\\min,i}$. Per the problem, this is a binding ramp event.\n        - If unit $i$ remains on ($u_{i,t-1}=1, u_{i,t}=1$): The feasible range is the intersection of its physical limits and ramp limits:\n            $$ \\underline{p}_{i,t} = \\max(P_{\\min,i}, p_{i,t-1} - R^{\\downarrow}_i) $$\n            $$ \\overline{p}_{i,t} = \\min(P_{\\max,i}, p_{i,t-1} + R^{\\uparrow}_i) $$\n\n    b.  **Check Feasibility**: A schedule is feasible at time $t$ only if the system-wide capacity can meet the demand $d_t$. This is checked by comparing the demand to the sum of the lower and upper bounds of all units:\n        $$ \\sum_{i=1}^{N} \\underline{p}_{i,t} \\le d_t \\le \\sum_{i=1}^{N} \\overline{p}_{i,t} $$\n        If this condition is violated, the entire commitment schedule is infeasible, and we discard it and proceed to the next one.\n\n    c.  **Economic Dispatch**: If the schedule is feasible at time $t$, we compute the optimal dispatch $p_{i,t}$ that meets the demand $d_t$ while minimizing the period's generation cost $\\sum_{i=1}^{N} c_i p_{i,t}$. Since the costs are linear, this is achieved via a merit-order dispatch:\n        i.  Initially, set each online unit's dispatch to its minimum feasible level: $p_{i,t} = \\underline{p}_{i,t}$.\n        ii. Calculate the remaining demand: $d_{\\text{rem}} = d_t - \\sum_{i=1}^{N} \\underline{p}_{i,t}$.\n        iii. Incrementally allocate $d_{\\text{rem}}$ to the online units in non-decreasing order of their marginal cost $c_i$, up to their maximum feasible generation $\\overline{p}_{i,t}$, until the demand is met.\n\n    d.  **Record Costs and Binding Ramps**: The generation cost for the period is added to the schedule's total cost. We then check if any ramp constraints were binding in achieving the dispatch $p_{i,t}$ and record the period index $t$ if so.\n\n4.  **Find Minimum Cost Solution**: After a schedule is successfully evaluated for all $T$ periods, its total cost is compared to the minimum cost found so far. If the current schedule is cheaper, it becomes the new optimum, and its cost and list of binding ramp periods are stored.\n\nThis process is repeated for all $4096$ schedules. The final result for each test case is the minimum total cost and the corresponding set of periods with binding ramp constraints.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom itertools import product\nimport math\n\ndef solve():\n    \"\"\"\n    Solves the unit commitment problem for the given test suite.\n    \"\"\"\n    \n    # Shared unit parameters as specified in the problem\n    UNITS = [\n        {\"id\": 1, \"Pmin\": 50, \"Pmax\": 150, \"R_up\": 40, \"R_down\": 30, \"c\": 20, \"C_su\": 2000},\n        {\"id\": 2, \"Pmin\": 30, \"Pmax\": 100, \"R_up\": 30, \"R_down\": 25, \"c\": 25, \"C_su\": 1500},\n        {\"id\": 3, \"Pmin\": 20, \"Pmax\": 80, \"R_up\": 25, \"R_down\": 20, \"c\": 30, \"C_su\": 1000},\n    ]\n\n    # Test cases\n    test_cases = [\n        {\n            \"name\": \"Case A\",\n            \"u0\": [1, 1, 1],\n            \"p0\": [60, 40, 30],\n            \"d\": [130, 140, 150, 160],\n        },\n        {\n            \"name\": \"Case B\",\n            \"u0\": [1, 1, 1],\n            \"p0\": [50, 40, 30],\n            \"d\": [120, 180, 230, 250],\n        },\n        {\n            \"name\": \"Case C\",\n            \"u0\": [1, 1, 1],\n            \"p0\": [90, 70, 40],\n            \"d\": [200, 170, 140, 120],\n        },\n    ]\n\n    results = []\n    for case in test_cases:\n        result = _solve_case(UNITS, case)\n        results.append(result)\n\n    # Format the final output as a single string\n    # E.g., [[cost_A, [t_A1, t_A2]], [cost_B, [t_B1]], ...]\n    # The default str() for a list is space-separated, but the required format implies no spaces\n    # so we build the string representation manually for lists of integers.\n    def format_result(res):\n        cost, periods = res\n        return f\"[{cost}, [{','.join(map(str, periods))}]]\"\n        \n    output_str = f\"[{','.join(map(str, results))}]\"\n    # The str() representation of a list includes spaces. The target format does not.\n    # We replace \", \" with \",\" to match the requested output format precisely.\n    print(output_str.replace(\" \", \"\"))\n\ndef _solve_case(units_data, case_data):\n    \"\"\"\n    Solves a single unit commitment instance using exhaustive search.\n    \"\"\"\n    N = len(units_data)\n    T = len(case_data[\"d\"])\n    u_initial = np.array(case_data[\"u0\"])\n    p_initial = np.array(case_data[\"p0\"])\n    demand = np.array(case_data[\"d\"])\n    \n    # Pre-sort unit indices by marginal cost for economic dispatch\n    sorted_unit_indices = np.argsort([u['c'] for u in units_data])\n    \n    min_total_cost = float('inf')\n    best_binding_periods = []\n    \n    EPS = 1e-9  # Tolerance for float comparisons\n\n    # Generate all possible commitment schedules\n    commitment_schedules = product([0, 1], repeat=N * T)\n    \n    for schedule_flat in commitment_schedules:\n        u_schedule = np.array(schedule_flat).reshape((N, T))\n        \n        p_history = np.zeros((N, T + 1))\n        u_history = np.zeros((N, T + 1), dtype=int)\n        \n        p_history[:, 0] = p_initial\n        u_history[:, 0] = u_initial\n        u_history[:, 1:] = u_schedule\n        \n        current_total_cost = 0.0\n        current_binding_periods = set()\n        is_schedule_feasible = True\n        \n        for t_idx in range(T):  # Time index from 0 to T-1\n            t_period = t_idx + 1  # Period number from 1 to T\n            \n            p_prev = p_history[:, t_idx]\n            u_prev = u_history[:, t_idx]\n            u_curr = u_history[:, t_period]\n            \n            p_min_bounds = np.zeros(N)\n            p_max_bounds = np.zeros(N)\n            \n            # Step 1: Calculate startup costs and feasible power ranges\n            for i in range(N):\n                unit = units_data[i]\n                if u_curr[i] == 1:\n                    if u_prev[i] == 0:  # Startup\n                        current_total_cost += unit[\"C_su\"]\n                        current_binding_periods.add(t_period)\n                        p_min_bounds[i] = unit[\"Pmin\"]\n                        p_max_bounds[i] = unit[\"Pmin\"]\n                    else:  # Continuously on\n                        p_min_bounds[i] = max(unit[\"Pmin\"], p_prev[i] - unit[\"R_down\"])\n                        p_max_bounds[i] = min(unit[\"Pmax\"], p_prev[i] + unit[\"R_up\"])\n                else:  # Unit is off\n                    p_min_bounds[i] = 0\n                    p_max_bounds[i] = 0\n\n            # Step 2: Check supply-demand feasibility\n            d_t = demand[t_idx]\n            total_p_min = np.sum(p_min_bounds)\n            total_p_max = np.sum(p_max_bounds)\n            \n            if d_t  total_p_min - EPS or d_t > total_p_max + EPS:\n                is_schedule_feasible = False\n                break\n                \n            # Step 3: Economic dispatch\n            p_dispatch = p_min_bounds.copy()\n            rem_demand = d_t - total_p_min\n            \n            if rem_demand > 0:\n                for i in sorted_unit_indices:\n                    if u_curr[i] == 1:\n                        headroom = p_max_bounds[i] - p_min_bounds[i]\n                        dispatch_add = min(rem_demand, headroom)\n                        p_dispatch[i] += dispatch_add\n                        rem_demand -= dispatch_add\n                        if rem_demand  EPS:\n                            break\n            \n            p_history[:, t_period] = p_dispatch\n            \n            # Step 4: Accumulate generation cost\n            for i in range(N):\n                current_total_cost += units_data[i]['c'] * p_dispatch[i]\n                \n            # Step 5: Identify binding on-to-on ramps\n            for i in range(N):\n                unit = units_data[i]\n                if u_curr[i] == 1 and u_prev[i] == 1:\n                    change = p_dispatch[i] - p_prev[i]\n                    if change > 0 and abs(change - unit[\"R_up\"])  EPS:\n                        current_binding_periods.add(t_period)\n                    elif change  0 and abs(change + unit[\"R_down\"])  EPS:\n                        current_binding_periods.add(t_period)\n\n        if is_schedule_feasible:\n            if current_total_cost  min_total_cost:\n                min_total_cost = current_total_cost\n                best_binding_periods = sorted(list(current_binding_periods))\n    \n    # Ensure cost is a float\n    return [float(round(min_total_cost, 4)), best_binding_periods]\n\nsolve()\n```"
        },
        {
            "introduction": "Our final practice introduces the spatial dimension, elevating the unit commitment problem to a more realistic Network-Constrained Unit Commitment (NCUC) model . Ignoring the transmission grid can lead to physically impossible solutions; this exercise demonstrates how to enforce network limits using the widely-adopted DC power flow approximation and Power Transfer Distribution Factors (PTDFs). By solving this problem, you will see firsthand how transmission congestion can override simple economic merit order, forcing the system to redispatch generation to ensure grid security.",
            "id": "4104456",
            "problem": "A three-bus power network is modeled under the Direct Current (DC) power flow approximation with linear Power Transfer Distribution Factors (PTDFs). The aim is to compute a feasible unit commitment and economic dispatch that meets load exactly in a single hour, respects generator operational constraints, and avoids transmission congestion, while minimizing total operating cost. You must formulate and solve, for each test case, a mixed-integer linear optimization where binary commitment variables couple to continuous dispatch variables.\n\nFundamental base:\n- Conservation of power requires that total generation equals total demand in megawatts (MW).\n- Under the DC approximation, line flows are linear in the net nodal injections. Let the net injection at bus $b$ be $p_b - L_b$, where $p_b$ is the sum of generation outputs at bus $b$ and $L_b$ is the fixed demand at bus $b$. For each monitored transmission line $\\ell$, the flow $F_\\ell$ is given by\n$$\nF_\\ell = \\sum_{b=1}^{B} \\text{PTDF}_{\\ell b}\\,(p_b - L_b),\n$$\nand the congestion constraints are\n$$\n-\\overline{F}_\\ell \\le F_\\ell \\le \\overline{F}_\\ell,\n$$\nwhere $\\overline{F}_\\ell$ is the thermal limit in megawatts.\n\nGenerators and costs:\n- There are $G=3$ thermal generators, indexed by $i \\in \\{1,2,3\\}$, located at buses $b(i) \\in \\{1,2,3\\}$ respectively.\n- Each generator $i$ has binary commitment $u_i \\in \\{0,1\\}$, dispatch $p_i \\in \\mathbb{R}_{\\ge 0}$ in megawatts, minimum and maximum output $P_{\\min,i}$ and $P_{\\max,i}$ in megawatts, linear marginal cost $c_i$ in dollars per megawatt-hour ($\\$/\\text{MWh}$), and fixed commitment cost $f_i$ in dollars ($\\$$).\n- Operating constraints per generator $i$:\n$$\nu_i\\,P_{\\min,i} \\le p_i \\le u_i\\,P_{\\max,i}.\n$$\n- The total operating cost of a one-hour horizon is:\n$$\n\\text{Cost} = \\sum_{i=1}^{G} c_i\\,p_i + \\sum_{i=1}^{G} f_i\\,u_i,\n$$\nexpressed in dollars ($\\$$).\n\nNetwork:\n- Number of buses $B=3$.\n- Number of monitored lines $L=2$.\n- Power Transfer Distribution Factor (PTDF) matrix (rows are lines, columns are buses):\n$$\n\\text{PTDF} = \\begin{bmatrix}\n0.8  -0.8  0.0 \\\\\n0.1  0.5  -0.6\n\\end{bmatrix}.\n$$\n- Line $1$ is between bus $1$ and bus $2$. Line $2$ is between bus $2$ and bus $3$.\n\nGenerators:\n- Generator $1$ at bus $1$: $P_{\\min,1}=0$, $P_{\\max,1}=120$, $c_1=33$, $f_1=0$.\n- Generator $2$ at bus $2$: $P_{\\min,2}=20$, $P_{\\max,2}=100$, $c_2=20$, $f_2=200$.\n- Generator $3$ at bus $3$: $P_{\\min,3}=0$, $P_{\\max,3}=80$, $c_3=26$, $f_3=80$.\n\nFormulation for a single-hour test case:\n- Let $p_b = \\sum_{i: b(i)=b} p_i$ be the total generation at bus $b$. Power balance:\n$$\n\\sum_{i=1}^{G} p_i = \\sum_{b=1}^{B} L_b.\n$$\n- Line congestion constraints for each line $\\ell \\in \\{1,2\\}$:\n$$\n-\\overline{F}_\\ell \\le \\sum_{b=1}^{B} \\text{PTDF}_{\\ell b}\\,(p_b - L_b) \\le \\overline{F}_\\ell.\n$$\n- Generator bounds:\n$$\nu_i\\,P_{\\min,i} \\le p_i \\le u_i\\,P_{\\max,i}, \\quad u_i \\in \\{0,1\\}.\n$$\n- Objective: minimize $\\text{Cost}$.\n\nTest suite (loads and line limits, all powers in megawatts and costs in dollars):\n- Test case $1$ (happy path): $L = (60,50,40)$, line limits $(\\overline{F}_1,\\overline{F}_2) = (200,200)$.\n- Test case $2$ (binding congestion on line $1$): $L = (60,50,40)$, line limits $(\\overline{F}_1,\\overline{F}_2) = (60,200)$.\n- Test case $3$ (boundary case on line $2$): $L = (30,70,30)$, line limits $(\\overline{F}_1,\\overline{F}_2) = (200,12)$.\n\nRequired program behavior:\n- For each test case, search over all binary commitment vectors $(u_1,u_2,u_3) \\in \\{0,1\\}^3$. For each fixed commitment vector, solve the resulting linear program in continuous variables $(p_1,p_2,p_3)$ that minimizes $\\sum_{i=1}^{3} c_i\\,p_i$ subject to the power balance, line congestion constraints, and generator bounds given the fixed $u_i$. Compute the total cost by adding $\\sum_{i=1}^{3} f_i\\,u_i$ in dollars.\n- Among all feasible commitment vectors, select the one with minimal total cost and output the corresponding commitment and dispatch.\n\nPhysical units:\n- All power quantities must be in megawatts (MW). The total cost must be in dollars ($\\$$) for a one-hour period.\n\nFinal output format specification:\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each test case result is itself a list of the form $[\\text{cost},[u_1,u_2,u_3],[p_1,p_2,p_3]]$ with $\\text{cost}$ in dollars and all $p_i$ in megawatts. If no feasible commitment exists for a test case, output the boolean value $\\text{False}$ for that test case. For example, an output with three test cases should look like $[[\\text{cost}_1,[u_{1,1},u_{2,1},u_{3,1}],[p_{1,1},p_{2,1},p_{3,1}]],[\\text{cost}_2,[u_{1,2},u_{2,2},u_{3,2}],[p_{1,2},p_{2,2},p_{3,2}]],[\\text{cost}_3,[u_{1,3},u_{2,3},u_{3,3}],[p_{1,3},p_{2,3},p_{3,3}]]$].",
            "solution": "The user has provided a valid problem statement. It describes a classic unit commitment and economic dispatch problem for a three-bus electrical power system, to be solved for a single time period. The formulation is a Mixed-Integer Linear Program (MILP), a standard and well-understood optimization model in power systems engineering. All required data, constraints, and objectives are provided in a complete and consistent manner.\n\nThe problem asks to find the minimum cost commitment and dispatch of three generators to meet a given electrical load profile, while respecting generator operational limits and network transmission constraints. The solution methodology specified is to enumerate all possible commitment states and solve the resulting Linear Program (LP) for each state.\n\nLet the set of generators be $\\mathcal{G} = \\{1, 2, 3\\}$ and the set of buses be $\\mathcal{B} = \\{1, 2, 3\\}$. Generator $i$ is located at bus $b(i) = i$. Let the set of monitored transmission lines be $\\mathcal{L} = \\{1, 2\\}$.\n\nThe decision variables are:\n- $u_i \\in \\{0, 1\\}$: The binary commitment status of generator $i$. $u_i=1$ if the generator is on, and $u_i=0$ if it is off.\n- $p_i \\ge 0$: The continuous power dispatch in megawatts (MW) from generator $i$.\n\nThe parameters are:\n- $L_b$: The fixed electrical load (demand) at bus $b$ in MW.\n- $P_{\\min,i}, P_{\\max,i}$: The minimum and maximum power output of generator $i$ in MW.\n- $c_i$: The marginal cost of generation for generator $i$ in dollars per megawatt-hour ($\\$/\\text{MWh}$).\n- $f_i$: The fixed cost of committing generator $i$ in dollars ($\\$$).\n- $\\text{PTDF}_{\\ell b}$: The Power Transfer Distribution Factor for line $\\ell$ and bus $b$.\n- $\\overline{F}_\\ell$: The thermal (maximum) power flow limit for line $\\ell$ in MW.\n\nThe generator parameters are:\n- Generator $1$ (bus $1$): $P_{\\min,1}=0\\,\\text{MW}$, $P_{\\max,1}=120\\,\\text{MW}$, $c_1=33\\,\\$/\\text{MWh}$, $f_1=0\\,\\$$.\n- Generator $2$ (bus $2$): $P_{\\min,2}=20\\,\\text{MW}$, $P_{\\max,2}=100\\,\\text{MW}$, $c_2=20\\,\\$/\\text{MWh}$, $f_2=200\\,\\$$.\n- Generator $3$ (bus $3$): $P_{\\min,3}=0\\,\\text{MW}$, $P_{\\max,3}=80\\,\\text{MW}$, $c_3=26\\,\\$/\\text{MWh}$, $f_3=80\\,\\$$.\n\nThe network parameters are:\n- PTDF matrix: $\\text{PTDF} = \\begin{bmatrix} 0.8  -0.8  0.0 \\\\ 0.1  0.5  -0.6 \\end{bmatrix}$.\n\nThe objective is to minimize the total operating cost for a one-hour period, which is the sum of variable generation costs and fixed commitment costs:\n$$\n\\text{Minimize} \\quad Z = \\sum_{i=1}^{3} (c_i p_i + f_i u_i)\n$$\n\nThis objective is subject to the following constraints:\n1.  **Power Balance**: The total power generated must exactly meet the total system load.\n    $$\n    \\sum_{i=1}^{3} p_i = \\sum_{b=1}^{3} L_b\n    $$\n2.  **Generator Operating Limits**: Each generator's output must be within its minimum and maximum limits, and can only produce power if it is committed. These are the \"big-M\" constraints that link the binary and continuous variables.\n    $$\n    u_i P_{\\min,i} \\le p_i \\le u_i P_{\\max,i} \\quad \\forall i \\in \\{1, 2, 3\\}\n    $$\n3.  **Transmission Line Flow Limits**: The power flow on each monitored line must not exceed its thermal limit. Under the DC approximation, the flow $F_\\ell$ on line $\\ell$ is a linear function of the net power injections at each bus. With one generator per bus, the net injection at bus $b$ is $(p_b - L_b)$.\n    $$\n    -\\overline{F}_\\ell \\le \\sum_{b=1}^{3} \\text{PTDF}_{\\ell b} (p_b - L_b) \\le \\overline{F}_\\ell \\quad \\forall \\ell \\in \\{1, 2\\}\n    $$\n    Substituting the PTDF matrix values:\n    $$\n    -\\overline{F}_1 \\le 0.8(p_1 - L_1) - 0.8(p_2 - L_2) \\le \\overline{F}_1\n    $$\n    $$\n    -\\overline{F}_2 \\le 0.1(p_1 - L_1) + 0.5(p_2 - L_2) - 0.6(p_3 - L_3) \\le \\overline{F}_2\n    $$\n4.  **Binary Variables**: The commitment variables must be binary.\n    $$\n    u_i \\in \\{0, 1\\} \\quad \\forall i \\in \\{1, 2, 3\\}\n    $$\n\nTo solve this MILP, we follow the specified method of enumerating all $2^3 = 8$ possible binary commitment vectors $\\boldsymbol{u} = (u_1, u_2, u_3)$. For each fixed $\\boldsymbol{u}$, the problem simplifies to a Linear Program (LP) over the continuous dispatch variables $\\boldsymbol{p} = (p_1, p_2, p_3)$.\n\nFor a fixed commitment vector $\\boldsymbol{u^*}$:\nThe fixed cost is $C_{fix} = \\sum_{i=1}^{3} f_i u_i^*$.\nThe LP to solve is:\n$$\n\\text{Minimize} \\quad Z_{var} = \\sum_{i=1}^{3} c_i p_i\n$$\nSubject to:\n1.  $\\sum_{i=1}^{3} p_i = \\sum_{b=1}^{3} L_b$\n2.  $u_i^* P_{\\min,i} \\le p_i \\le u_i^* P_{\\max,i} \\quad \\forall i \\in \\{1, 2, 3\\}$\n3.  $\\sum_{b=1}^{3} \\text{PTDF}_{\\ell b} p_b \\le \\overline{F}_\\ell + \\sum_{b=1}^{3} \\text{PTDF}_{\\ell b} L_b \\quad \\forall \\ell \\in \\{1, 2\\}$\n4.  $-\\sum_{b=1}^{3} \\text{PTDF}_{\\ell b} p_b \\le \\overline{F}_\\ell - \\sum_{b=1}^{3} \\text{PTDF}_{\\ell b} L_b \\quad \\forall \\ell \\in \\{1, 2\\}$\n\nThis LP can be solved using a standard solver. If the LP is feasible, its optimal objective value $Z_{var}^*$ is found. The total cost for this commitment is $Z_{total} = Z_{var}^* + C_{fix}$. We repeat this for all $8$ commitment vectors and select the one yielding the minimum $Z_{total}$. If no commitment vector results in a feasible LP for a given test case, that test case is deemed infeasible.\n\nThe solution will be implemented in Python using the `scipy.optimize.linprog` function to solve the LP subproblems. The program iterates through each test case, and for each, it iterates through all possible commitment vectors, solving the corresponding LP and tracking the minimum cost found.",
            "answer": "```python\nimport numpy as np\nfrom scipy.optimize import linprog\nimport itertools\n\ndef solve():\n    \"\"\"\n    Solves a series of unit commitment and economic dispatch problems.\n    \"\"\"\n    \n    # Generator Parameters\n    # Pmin (MW), Pmax (MW), c ($/MWh), f ($)\n    gen_params = {\n        1: {'Pmin': 0, 'Pmax': 120, 'c': 33, 'f': 0, 'bus': 1},\n        2: {'Pmin': 20, 'Pmax': 100, 'c': 20, 'f': 200, 'bus': 2},\n        3: {'Pmin': 0, 'Pmax': 80, 'c': 26, 'f': 80, 'bus': 3},\n    }\n    \n    # Network Parameters\n    ptdf_matrix = np.array([\n        [0.8, -0.8, 0.0],\n        [0.1, 0.5, -0.6]\n    ])\n    num_gens = 3\n    \n    # Test Suite\n    test_cases = [\n        {'L': np.array([60, 50, 40]), 'F_bar': np.array([200, 200])},\n        {'L': np.array([60, 50, 40]), 'F_bar': np.array([60, 200])},\n        {'L': np.array([30, 70, 30]), 'F_bar': np.array([200, 12])},\n    ]\n\n    # Objective function cost vector (c_i)\n    c = np.array([gen_params[i+1]['c'] for i in range(num_gens)])\n\n    # Power balance equality constraint (A_eq, b_eq)\n    A_eq = np.ones((1, num_gens))\n\n    all_results = []\n    \n    for case in test_cases:\n        L = case['L']\n        F_bar = case['F_bar']\n        \n        L_total = np.sum(L)\n        b_eq = np.array([L_total])\n\n        # Transmission constraints (A_ub, b_ub)\n        # Flow_l = sum_b(PTDF_lb * (p_b - L_b))\n        # -F_bar_l = Flow_l = F_bar_l\n        # This is equivalent to:\n        # sum_b(PTDF_lb * p_b) = F_bar_l + sum_b(PTDF_lb * L_b)\n        # -sum_b(PTDF_lb * p_b) = F_bar_l - sum_b(PTDF_lb * L_b)\n        \n        A_ub_base = np.vstack([ptdf_matrix, -ptdf_matrix])\n        \n        ptdf_L_term = ptdf_matrix @ L\n        b_ub_base = np.concatenate([\n            F_bar + ptdf_L_term,\n            F_bar - ptdf_L_term\n        ])\n\n        min_total_cost = float('inf')\n        best_solution = None\n\n        # Iterate through all 2^3=8 commitment vectors\n        commitment_vectors = itertools.product([0, 1], repeat=num_gens)\n        \n        for u in commitment_vectors:\n            u_arr = np.array(u)\n            \n            # Calculate fixed cost for this commitment\n            fixed_cost = sum(gen_params[i+1]['f'] * u[i] for i in range(num_gens))\n            \n            # Define generator bounds for this commitment\n            p_bounds = []\n            for i in range(num_gens):\n                p_min = gen_params[i+1]['Pmin'] * u[i]\n                p_max = gen_params[i+1]['Pmax'] * u[i]\n                p_bounds.append((p_min, p_max))\n            \n            # Pre-check for feasibility based on generation capacity\n            total_p_min = sum(b[0] for b in p_bounds)\n            total_p_max = sum(b[1] for b in p_bounds)\n            if L_total  total_p_min or L_total > total_p_max:\n                continue\n\n            # Solve the linear program\n            res = linprog(c=c, A_ub=A_ub_base, b_ub=b_ub_base,\n                          A_eq=A_eq, b_eq=b_eq, bounds=p_bounds,\n                          method='highs')\n            \n            if res.success:\n                variable_cost = res.fun\n                total_cost = variable_cost + fixed_cost\n                \n                if total_cost  min_total_cost:\n                    min_total_cost = total_cost\n                    p_dispatch = [round(val, 5) for val in res.x] # Round for clean output\n                    best_solution = [total_cost, list(u), p_dispatch]\n\n        if best_solution is None:\n            all_results.append(False)\n        else:\n            # Round cost for consistent output\n            best_solution[0] = round(best_solution[0], 5)\n            all_results.append(best_solution)\n\n    # Format the final output string exactly as specified\n    output_str = f\"[{','.join(map(str, all_results))}]\"\n    output_str = output_str.replace(\" \", \"\") # Remove spaces as per implied format\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
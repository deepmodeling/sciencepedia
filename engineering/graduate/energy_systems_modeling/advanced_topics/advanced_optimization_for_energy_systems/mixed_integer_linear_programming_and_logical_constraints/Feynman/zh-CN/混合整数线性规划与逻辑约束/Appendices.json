{
    "hands_on_practices": [
        {
            "introduction": "火力发电机组由于其热惯性和机械限制，不能随意启停。本练习将指导您从基本物理原理出发，为发电机组建立最小开机时间（$T^{up}$）和最小停机时间（$T^{down}$）的混合整数线性规划（MILP）约束。通过这项实践，您将学会如何将时序逻辑规则转化为数学约束，并检验一个给定的启停计划是否可行，这是机组组合问题的核心建模技能之一。",
            "id": "4104056",
            "problem": "考虑一个能源系统模型中的单台火力发电机组，其规划周期为 $T=5$ 个离散时段。由于热惯性和运行安全约束，该机组的物理最小连续运行时间为 $T^{up}=2$，最小连续停机时间为 $T^{down}=2$。设二进制启停变量 $u_t \\in \\{0,1\\}$ 表示机组在时段 $t$ 的启停状态，其中 $u_t=1$ 表示机组正在运行。设 $u_0=0$ 为规划周期开始前的初始状态，并假设在 $t=1$ 之前，机组已停机至少 $T^{down}$ 个时段，因此在 $t=1$ 时启动是物理上允许的。给定一个候选启停序列为\n$$\nu_1=1,\\quad u_2=0,\\quad u_3=1,\\quad u_4=1,\\quad u_5=0,\n$$\n该序列可能由一个基准混合整数线性规划 (MILP) 模型生成，该模型仅强制启动和停机事件与启停状态的变化一致，但尚未施加显式的最小连续运行/停机时间约束。\n\n从最小连续运行/停机时间的物理定义以及启停状态与启动/停机事件之间的逻辑关系出发，完成以下任务：\n1. 构建适当的附加线性约束来强制执行 $T^{up}$ 和 $T^{down}$，确保在规划周期的开始和结束时具有科学真实性。仅使用给定的物理定义和标准逻辑关系；不要假设任何预先指定的公式。\n2. 使用这些约束，测试给定序列的可行性，并识别在规划周期 $t=1,\\dots,5$ 内所有不满足物理要求的地方。\n3. 确定为使给定序列 $\\{u_t\\}_{t=1}^{5}$ 满足所构建的约束并尊重所述的初始条件，需要对序列中的元素进行的最少逐时段更改次数。最小性是根据与给定序列的汉明距离（必须翻转其状态的时段数量）来衡量的。将最终答案表示为一个不带单位的整数。\n\n最终答案无需四舍五入。",
            "solution": "问题陈述被评估为有效。它在科学上基于能源系统工程的原理，特别是机组组合建模。该问题提法得当，提供了所有必要的数据和条件，并以客观、正式的语言陈述。因此，我们可以着手求解。\n\n该问题分为三个任务。我们将按顺序解决它们。\n\n### 1. 最小连续运行/停机时间约束的构建\n\n火力机组在时间 $t$ 的状态由二进制启停变量 $u_t \\in \\{0, 1\\}$ 给出，其中 $u_t=1$ 表示机组在线， $u_t=0$ 表示机组离线。规划周期为 $T=5$ 个时段，索引为 $t=1, \\dots, 5$。初始状态为 $u_0=0$。\n\n为了强制执行最小连续运行时间和停机时间约束，我们必须首先定义启动和停机事件。设 $v_t \\in \\{0, 1\\}$ 为启动变量，其中 $v_t=1$ 表示机组在时段 $t$ 开始时启动。设 $w_t \\in \\{0, 1\\}$ 为停机变量，其中 $w_t=1$ 表示机组在时段 $t$ 开始时停机。这些事件由相邻两个时段的启停状态变化决定。\n\n当且仅当机组在 $t-1$ 时段处于停机状态而在 $t$ 时段处于运行状态时，才会发生 $t$ 时刻的启动。\n当且仅当机组在 $t-1$ 时段处于运行状态而在 $t$ 时段处于停机状态时，才会发生 $t$ 时刻的停机。\n\n这个逻辑可以用以下关系式表示：\n$$\nu_t - u_{t-1} = v_t - w_t, \\quad \\forall t \\in \\{1, \\dots, T\\}\n$$\n结合变量的二元性质以及机组不能同时启动和停止的事实 ($v_t + w_t \\le 1$)，这个单一方程定义了这些事件。对于混合整数线性规划 (MILP) 模型，我们会将其松弛为一组线性不等式：\n$$\nv_t \\ge u_t - u_{t-1} \\\\\nw_t \\ge u_{t-1} - u_t \\\\\nv_t, w_t \\in \\{0, 1\\}\n$$\n对于我们的分析，我们可以直接从给定的 $u_t$ 序列中确定 $v_t$ 和 $w_t$：$v_t = \\max(0, u_t - u_{t-1})$ 和 $w_t = \\max(0, u_{t-1} - u_t)$。\n\n**最小连续运行时间约束 ($T^{up}$):**\n物理要求是，如果一个机组在时间 $t$ 启动 (即 $v_t=1$)，它必须连续在线至少 $T^{up}$ 个时段。这意味着启停状态 $u$ 在时段 $t, t+1, \\dots, t+T^{up}-1$ 必须为 $1$。这可以表述为一组线性约束。对于每个潜在的启动时间 $t$，我们必须确保：\n$$\nu_{t+k} = 1 \\quad \\text{if} \\quad v_t = 1, \\quad \\text{for } k=0, 1, \\dots, T^{up}-1\n$$\n强制执行此条件的线性不等式是：\n$$\nu_{t+k} \\ge v_t\n$$\n这必须对所有 $t \\in \\{1, \\dots, T\\}$ 和所有 $k \\in \\{0, \\dots, T^{up}-1\\}$ 成立，前提是时间索引 $t+k$ 不超过规划周期 $T$。当 $T=5$ 且 $T^{up}=2$ 时，具体的约束是：\n对于 $t=1$：$u_1 \\ge v_1, u_2 \\ge v_1$\n对于 $t=2$：$u_2 \\ge v_2, u_3 \\ge v_2$\n对于 $t=3$：$u_3 \\ge v_3, u_4 \\ge v_3$\n对于 $t=4$：$u_4 \\ge v_4, u_5 \\ge v_4$\n对于 $t=5$：$u_5 \\ge v_5$ (因为 $5+1 > T=5$)\n\n**最小连续停机时间约束 ($T^{down}$):**\n类似地，如果一个机组在时间 $t$ 停机 (即 $w_t=1$)，它必须连续离线至少 $T^{down}$ 个时段。这意味着 $u$ 在时段 $t, t+1, \\dots, t+T^{down}-1$ 必须为 $0$。这可以表述为：\n$$\nu_{t+k} = 0 \\quad \\text{if} \\quad w_t = 1, \\quad \\text{for } k=0, 1, \\dots, T^{down}-1\n$$\n对应的线性不等式是：\n$$\nu_{t+k} \\le 1 - w_t\n$$\n这必须对所有 $t \\in \\{1, \\dots, T\\}$ 和所有 $k \\in \\{0, \\dots, T^{down}-1\\}$ 成立，前提是 $t+k \\le T$。当 $T=5$ 且 $T^{down}=2$ 时，具体的约束是：\n对于 $t=1$：$u_1 \\le 1-w_1, u_2 \\le 1-w_1$\n对于 $t=2$：$u_2 \\le 1-w_2, u_3 \\le 1-w_2$\n对于 $t=3$：$u_3 \\le 1-w_3, u_4 \\le 1-w_3$\n对于 $t=4$：$u_4 \\le 1-w_4, u_5 \\le 1-w_4$\n对于 $t=5$：$u_5 \\le 1-w_5$ (因为 $5+1 > T=5$)\n\n初始条件，即机组在 $t=1$ 之前已停机至少 $T^{down}=2$ 个时段，确保了在 $t=1$ 时启动是允许的，并且不会违反任何历史停机时间约束。\n\n### 2. 给定序列的可行性测试\n\n候选序列为 $u_1=1, u_2=0, u_3=1, u_4=1, u_5=0$。初始条件为 $u_0=0$。首先，我们计算启动 ($v_t$) 和停机 ($w_t$) 序列：\n- $t=1$: $u_1=1, u_0=0 \\implies v_1=1, w_1=0$ (启动)\n- $t=2$: $u_2=0, u_1=1 \\implies v_2=0, w_2=1$ (停机)\n- $t=3$: $u_3=1, u_2=0 \\implies v_3=1, w_3=0$ (启动)\n- $t=4$: $u_4=1, u_3=1 \\implies v_4=0, w_4=0$ (无变化)\n- $t=5$: $u_5=0, u_4=1 \\implies v_5=0, w_5=1$ (停机)\n\n现在我们用第一部分推导出的约束来测试这个序列。我们只需要检查发生启动或停机时段的约束。\n\n**最小连续运行时间违规 ($T^{up}=2$):**\n- 在 $t=1$ 时发生启动 ($v_1=1$)。这触发了约束 $u_2 \\ge v_1$。代入数值：$0 \\ge 1$。这是错误的。**违规**：机组在 $t=1$ 时启动，但在 $t=2$ 时就停机，导致运行时间仅为 1 个时段，小于所要求的 $T^{up}=2$。\n- 在 $t=3$ 时发生启动 ($v_3=1$)。这触发了约束 $u_4 \\ge v_3$。代入数值：$1 \\ge 1$。这是正确的。此事件没有违规。\n\n**最小连续停机时间违规 ($T^{down}=2$):**\n- 在 $t=2$ 时发生停机 ($w_2=1$)。这触发了约束 $u_3 \\le 1-w_2$。代入数值：$u_3 \\le 1-1 \\implies 1 \\le 0$。这是错误的。**违规**：机组在 $t=2$ 时停机，但在 $t=3$ 时再次启动，导致停机时间仅为 1 个时段，小于所要求的 $T^{down}=2$。\n- 在 $t=5$ 时发生停机 ($w_5=1$)。这触发了约束 $u_5 \\le 1-w_5$。代入数值：$0 \\le 1-1 \\implies 0 \\le 0$。这是正确的。完整的停机时段超出了规划周期，但在 $T=5$ 个时段内没有观察到违规。\n\n给定序列在指定的规划周期内有两处违反了物理约束：一处是 $t=1$ 启动后违反了最小连续运行时间，另一处是 $t=2$ 停机后违反了最小连续停机时间。\n\n### 3. 最少更改次数\n\n我们需要找到一个新的序列 $\\{u'_t\\}_{t=1}^5$，它满足所有约束，并最小化与原始序列的汉明距离 $d = \\sum_{t=1}^5 |u'_t - u_t|$。原始序列是 $u = (1, 0, 1, 1, 0)$。\n\n距离 $d=0$ 对应于原始序列，我们知道它是无效的。我们从 $d=1$ 开始，寻找一个具有最少更改次数的有效序列。这涉及到翻转序列中的单个元素。\n\n让我们检查这两个违规。\n- $t=1$ 处的运行时间违规要求 $u_2=1$。\n- $t=2$ 处的停机时间违规要求 $u_3=0$。\n如果我们只改变一个变量，这两个修复方案是相互排斥的。让我们通过一次翻转一个比特来探讨各种选项。\n\n**情况 1：将 $u_1$ 从 $1$ 翻转为 $0$。**\n- 新序列：$u'=(0, 0, 1, 1, 0)$。距离 $d=1$。\n- 事件：\n  - $t=1,2$：机组停机。\n  - $t=3$：启动 ($v'_3=1$)。要求 $u'_3=1, u'_4=1$ (因为 $T^{up}=2$)。序列满足此要求。这是有效的。\n  - $t=5$：停机 ($w'_5=1$)。要求 $u'_5=0$。序列满足此要求。这是有效的。\n- 机组在 $t=1, 2$ 停机，停机时间为 2 个时段。这满足 $T^{down}=2$。\n- 机组在 $t=3, 4$ 运行，运行时间为 2 个时段。这满足 $T^{up}=2$。\n- 序列 $u'=(0, 0, 1, 1, 0)$ 是有效的。\n\n**情况 2：将 $u_2$ 从 $0$ 翻转为 $1$。**\n- 新序列：$u''=(1, 1, 1, 1, 0)$。距离 $d=1$。\n- 事件：\n  - $t=1$：启动 ($v''_1=1$)。要求 $u''_1=1, u''_2=1$。序列满足此要求。这是有效的。\n  - $t=2,3,4$：机组运行。\n  - $t=5$：停机 ($w''_5=1$)。要求 $u''_5=0$。序列满足此要求。这是有效的。\n- 机组在 $t=1, 2, 3, 4$ 运行，运行时间为 4 个时段。这满足 $T^{up}=2$。\n- 序列 $u''=(1, 1, 1, 1, 0)$ 是有效的。\n\n由于我们通过仅更改一个元素（距离为 1）就找到了至少一个有效序列，并且我们知道距离为 0 是不可能的，因此所需的最少逐时段更改次数是 1。",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "在确定了发电机组的启停状态后，下一步是量化其运行成本。启动成本并非一个固定值，它依赖于机组在启动前的“热状态”，即冷启动与热启动的成本差异显著。本练习将引导您根据机组的历史运行状态，精确区分不同类型的启动事件并计算总启动成本，这对于构建精确的经济调度模型至关重要。",
            "id": "4104066",
            "problem": "能源系统中的一个火力发电机组使用混合整数线性规划进行建模。该机组在每小时的时间段 $t \\in \\{1,\\dots,12\\}$ 内具有二进制的启停状态 $y_t \\in \\{0,1\\}$，其中 $y_t=1$ 表示机组开启，$y_t=0$ 表示机组关闭。当 $y_t$ 从 $0$ 转换到 $1$ 时，发生一次启动。启动成本取决于该次启动被分类为“热启动”还是“冷启动”。如果机组在启动前已连续离线至少 $T^{cold}$ 小时，则触发“冷启动”；否则，该启动被分类为“热启动”。冷启动阈值为 $T^{cold}=3$ 小时。\n\n热启动和冷启动的成本参数分别为：每次热启动 $c^{su}_{hot}=45$ 美元，每次冷启动 $c^{su}_{cold}=180$ 美元。启停历史记录为\n$y_1=0$, $y_2=1$, $y_3=1$, $y_4=0$, $y_5=0$, $y_6=1$, $y_7=0$, $y_8=1$, $y_9=0$, $y_{10}=0$, $y_{11}=0$, $y_{12}=1$。\n假设初始条件为 $y_0=0$，并且在 $t=1$ 之前机组已离线 $L_0=2$ 小时。\n\n使用适合混合整数线性规划编码二进制转换的逻辑约束的第一性原理推导，确定并论证每次启动的分类（热启动与冷启动），并计算在 $t \\in \\{1,\\dots,12\\}$ 期间的总启动成本。以美元表示最终成本。不要四舍五入；给出精确的整数值。",
            "solution": "该问题要求计算一个火力发电机组在指定时间范围内的总启动成本。这需要首先从给定的启停计划中识别出所有的启动事件，然后根据机组的运行历史将每次启动分类为“热启动”或“冷启动”。总成本是这些单次启动成本的总和。\n\n提供的已知数据如下：\n-   二进制启停状态：对于时间段 $t \\in \\{1, \\dots, 12\\}$，$y_t \\in \\{0,1\\}$。$y_t=1$ 表示机组在线，$y_t=0$ 表示机组离线。\n-   启停计划：$y_1=0$, $y_2=1$, $y_3=1$, $y_4=0$, $y_5=0$, $y_6=1$, $y_7=0$, $y_8=1$, $y_9=0$, $y_{10}=0$, $y_{11}=0$, $y_{12}=1$。\n-   初始和历史条件：$y_0=0$，且在 $t=1$ 之前机组已离线 $L_0=2$ 小时。该历史条件意味着机组在 $t=0$ 和 $t=-1$ 时是关闭的。\n-   冷启动阈值：$T^{cold}=3$ 小时。\n-   启动成本：热启动 $c^{su}_{hot}=45$ 美元，冷启动 $c^{su}_{cold}=180$ 美元。\n\n根据用于机组组合问题的混合整数线性规划的第一性原理，如果机组在小时 $t-1$ 时关闭，而在小时 $t$ 时开启，则在小时 $t$ 发生启动事件。这个逻辑条件可以表示为 $y_{t-1}=0 \\land y_t=1$。让我们定义一个二进制启动变量 $u_t$，当在时间 $t$ 发生启动时，$u_t=1$，否则 $u_t=0$。这等价于 $u_t = \\max(0, y_t - y_{t-1})$。\n\n我们首先从 $t=1$ 到 $t=12$ 的给定计划中识别启动事件：\n-   在 $t=1$ 时：$y_0=0$, $y_1=0$。无启动。\n-   在 $t=2$ 时：$y_1=0$, $y_2=1$。发生一次启动。\n-   在 $t=3$ 时：$y_2=1$, $y_3=1$。无启动。\n-   在 $t=4$ 时：$y_3=1$, $y_4=0$。这是关机，不是启动。\n-   在 $t=5$ 时：$y_4=0$, $y_5=0$。无启动。\n-   在 $t=6$ 时：$y_5=0$, $y_6=1$。发生一次启动。\n-   在 $t=7$ 时：$y_6=1$, $y_7=0$。一次关机。\n-   在 $t=8$ 时：$y_7=0$, $y_8=1$。发生一次启动。\n-   在 $t=9$ 时：$y_8=1$, $y_9=0$。一次关机。\n-   在 $t=10$ 时：$y_9=0$, $y_{10}=0$。无启动。\n-   在 $t=11$ 时：$y_{10}=0$, $y_{11}=0$。无启动。\n-   在 $t=12$ 时：$y_{11}=0$, $y_{12}=1$。发生一次启动。\n\n确定启动发生在 $t \\in \\{2, 6, 8, 12\\}$。\n\n接下来，我们对每次启动进行分类。如果机组在启动前已连续离线至少 $T^{cold}$ 小时，则在时间 $t$ 的启动被定义为“冷启动”。设 $N_{off}(t)$ 为机组在时间 $t$ 之前紧邻的连续离线小时数。如果在时间 $t$ 的启动满足 $N_{off}(t) \\ge T^{cold}$，则为冷启动。给定 $T^{cold}=3$，如果在 $t$ 的启动满足 $N_{off}(t) \\ge 3$，则为冷启动。否则，该启动为“热启动”。\n$N_{off}(t)$ 是满足 $y_{t-1}=0, y_{t-2}=0, \\dots, y_{t-k}=0$ 的最大整数 $k \\ge 1$。\n\n我们现在将此分类规则应用于每个启动事件：\n\n1.  **在 $t=2$ 启动**：\n    我们检查 $t=2$ 之前的启停状态。机组在 $t=2$ 启动，因此 $y_1=0$。根据初始条件，$y_0=0$ 且 $y_{-1}=0$。因此，机组在 $t=1, 0, -1$ 小时期间连续离线。这段连续离线期的持续时间为 $3$ 小时。\n    因此，$N_{off}(2)=3$。由于 $3 \\ge T^{cold}$，在 $t=2$ 时的启动是**冷启动**。\n    这次启动的成本是 $c^{su}_{cold} = \\$180$。\n\n2.  **在 $t=6$ 启动**：\n    我们检查 $t=6$ 之前的启停状态。\n    -   $y_5 = 0$\n    -   $y_4 = 0$\n    -   $y_3 = 1$\n    机组在 $t=3$ 时是在线的，所以连续离线期仅限于 $t=5$ 和 $t=4$ 这两个小时。持续时间为 $2$ 小时。\n    因此，$N_{off}(6)=2$。由于 $2  T^{cold}$，在 $t=6$ 时的启动是**热启动**。\n    这次启动的成本是 $c^{su}_{hot} = \\$45$。\n\n3.  **在 $t=8$ 启动**：\n    我们检查 $t=8$ 之前的启停状态。\n    -   $y_7 = 0$\n    -   $y_6 = 1$\n    机组在 $t=6$ 时是在线的，所以连续离线期仅包括 $t=7$ 这一个小时。持续时间为 $1$ 小时。\n    因此，$N_{off}(8)=1$。由于 $1  T^{cold}$，在 $t=8$ 时的启动是**热启动**。\n    这次启动的成本是 $c^{su}_{hot} = \\$45$。\n\n4.  **在 $t=12$ 启动**：\n    我们检查 $t=12$ 之前的启停状态。\n    -   $y_{11} = 0$\n    -   $y_{10} = 0$\n    -   $y_9 = 0$\n    -   $y_8 = 1$\n    机组在 $t=8$ 时是在线的。机组在 $t=11, 10, 9$ 小时期间连续离线。持续时间为 $3$ 小时。\n    因此，$N_{off}(12)=3$。由于 $3 \\ge T^{cold}$，在 $t=12$ 时的启动是**冷启动**。\n    这次启动的成本是 $c^{su}_{cold} = \\$180$。\n\n最后，总启动成本是所有单次启动成本的总和。\n总成本 = 成本(在 $t=2$ 启动) + 成本(在 $t=6$ 启动) + 成本(在 $t=8$ 启动) + 成本(在 $t=12$ 启动)\n总成本 = $c^{su}_{cold} + c^{su}_{hot} + c^{su}_{hot} + c^{su}_{cold}$\n总成本 = $\\$180 + \\$45 + \\$45 + \\$180$\n总成本 = $\\$360 + \\$90 = \\$450$。\n\n在这 $12$ 小时期间的总启动成本是 $450$ 美元。",
            "answer": "$$\\boxed{450}$$"
        },
        {
            "introduction": "发电机组的开机状态（由二进制变量表示）与其连续的功率输出（由连续变量表示）紧密相连。本练习将逻辑约束与物理动态限制相结合，特别是发电机的斜坡爬升率（ramp rate）。您将学习如何在一个给定的启停计划下，考虑斜坡限制和容量约束，来规划最优的发电功率输出轨迹，从而最大化总发电量。",
            "id": "4104113",
            "problem": "考虑一个能源系统中的单台火力发电机，该系统在 $T=4$ 个离散时段内建模，时段索引为 $t \\in \\{1,2,3,4\\}$。令 $P_t$ 表示在时段 $t$ 的输出电功率，单位为兆瓦（MW）。该发电机受到物理运行限制和逻辑开关决策的约束，这通常在用于机组组合的混合整数线性规划（MILP）中表示。适用以下经过充分验证的运行约束：\n\n- 带开机逻辑的容量限制：对于每个 $t$，有 $P_{\\min} \\, u_t \\leq P_t \\leq P_{\\max} \\, u_t$，其中 $u_t \\in \\{0,1\\}$ 是开关机决策变量，$P_{\\min}$ 是开机时的最小稳定发电量，$P_{\\max}$ 是最大发电容量。\n- 时段间爬坡限制：对于每个 $t \\geq 1$，有 $P_t - P_{t-1} \\leq R^{+}$（升负荷限制）和 $P_{t-1} - P_t \\leq R^{-}$（降负荷限制），其中 $R^{+}$ 和 $R^{-}$ 分别是每个时段 $P_t$ 允许的最大增加量和减少量。\n- 启动逻辑由 $y_t \\geq u_t - u_{t-1}$ 给出，其中 $y_t \\in \\{0,1\\}$ 是启动指示变量；当时段 $t$ 发生启动时，假定发电机从 $u_{t-1}=0$ 转换到 $u_t=1$。对于本问题，直接给定时段 $t=1$ 启动，并可以假设对于所有 $t \\in \\{1,2,3,4\\}$ 都有 $u_t=1$，且 $y_1=1$, $y_t=0$ 对于 $t \\in \\{2,3,4\\}$。\n\n发电机的参数和初始条件如下：\n- $P_{\\min} = 20$,\n- $P_{\\max} = 85$,\n- $R^{+} = 30$,\n- $R^{-} = 40$,\n- $P_0 = 0$,\n- 在 $t=1$ 时启动，如上所述。\n\n使用这些约束和初始条件，确定在四个时段内的最大可行输出轨迹，目标是最大化总发电量，这等同于在上述约束条件下最大化 $\\sum_{t=1}^{4} P_t$。\n\n将轨迹 $(P_1, P_2, P_3, P_4)$ 表示为一个行向量，其中每个条目以兆瓦（MW）为单位。无需四舍五入；请提供精确值。",
            "solution": "问题要求解出单台火力发电机在 $T=4$ 个时段内的最大可行输出轨迹 $(P_1, P_2, P_3, P_4)$。目标是最大化总发电量，这等同于最大化功率输出之和 $\\sum_{t=1}^{4} P_t$。\n\n发电机的运行受一组约束控制。我们首先使用给定的参数来形式化这些约束。\n参数如下：\n- 开机时最小功率输出，$P_{\\min} = 20$ MW。\n- 最大功率输出，$P_{\\max} = 85$ MW。\n- 升负荷限制，$R^{+} = 30$ MW/时段。\n- 降负荷限制，$R^{-} = 40$ MW/时段。\n- $t=0$ 时的初始功率输出，$P_0 = 0$ MW。\n\n问题指明发电机在整个期间都处于开机状态，即对于所有 $t \\in \\{1, 2, 3, 4\\}$，二元决策变量 $u_t = 1$。这简化了一般性约束。\n\n1.  **容量限制**：约束为 $P_{\\min} u_t \\leq P_t \\leq P_{\\max} u_t$。当 $u_t=1$ 时，该约束变为：\n    $$20 \\leq P_t \\leq 85 \\quad \\text{for } t \\in \\{1, 2, 3, 4\\}$$\n\n2.  **爬坡限制**：对于 $t \\in \\{1, 2, 3, 4\\}$ 的时段间约束为：\n    - 升负荷：$P_t - P_{t-1} \\leq R^{+}$，即 $P_t \\leq P_{t-1} + 30$。\n    - 降负荷：$P_{t-1} - P_t \\leq R^{-}$，即 $P_t \\geq P_{t-1} - 40$。\n\n结合这些约束，对于每个时段 $t$，功率输出 $P_t$ 必须满足：\n$$ \\max(20, P_{t-1} - 40) \\leq P_t \\leq \\min(85, P_{t-1} + 30) $$\n\n启动逻辑约束（$y_t \\geq u_t - u_{t-1}$）被设定为满足 $y_1=1$ 和对于 $t \\geq 2$ 有 $y_t=0$，这与从 $P_0=0$ 推断出的 $u_0=0$ 以及对于 $t \\geq 1$ 有 $u_t=1$ 是一致的。\n\n目标是最大化非负变量之和 $\\sum_{t=1}^{4} P_t$。对 $P_t$ 的约束仅取决于 $P_{t-1}$ 的值。具体来说，$P_t$ 的上界是 $P_{t-1}$ 的增函数（或常数）。为了最大化总和，我们可以采用贪心策略：在每个时间步 $t$，我们选择满足所有约束的 $P_t$ 的最大可能值。这一选择最大化了下一时段 $P_{t+1}$ 的潜在上界，从而确保我们正在构建元素级别上可能的最大可行轨迹。对于任何可行轨迹 $(P'_1, P'_2, P'_3, P'_4)$，这种贪心方法构建的轨迹 $(P_1, P_2, P_3, P_4)$ 满足对于所有 $t$ 都有 $P'_t \\leq P_t$，因此保证了 $\\sum P'_t \\leq \\sum P_t$。\n\n我们按顺序计算每个时段 $P_t$ 的最大可行值。\n\n**时段 $t=1$：**\n功率输出 $P_1$ 受初始条件 $P_0 = 0$ 的约束。\n-   容量限制：$20 \\leq P_1 \\leq 85$。\n-   升负荷限制：$P_1 \\leq P_0 + 30 = 0 + 30 = 30$。\n-   降负荷限制：$P_1 \\geq P_0 - 40 = 0 - 40 = -40$。\n$P_1$ 的组合约束为 $\\max(20, -40) \\leq P_1 \\leq \\min(85, 30)$，简化后为 $20 \\leq P_1 \\leq 30$。\n为最大化轨迹，我们选择 $P_1$ 的最大可能值。\n$$P_1 = 30$$\n\n**时段 $t=2$：**\n功率输出 $P_2$ 受 $P_1 = 30$ 的约束。\n-   容量限制：$20 \\leq P_2 \\leq 85$。\n-   升负荷限制：$P_2 \\leq P_1 + 30 = 30 + 30 = 60$。\n-   降负荷限制：$P_2 \\geq P_1 - 40 = 30 - 40 = -10$。\n$P_2$ 的组合约束为 $\\max(20, -10) \\leq P_2 \\leq \\min(85, 60)$，简化后为 $20 \\leq P_2 \\leq 60$。\n为最大化轨迹，我们选择 $P_2$ 的最大可能值。\n$$P_2 = 60$$\n\n**时段 $t=3$：**\n功率输出 $P_3$ 受 $P_2 = 60$ 的约束。\n-   容量限制：$20 \\leq P_3 \\leq 85$。\n-   升负荷限制：$P_3 \\leq P_2 + 30 = 60 + 30 = 90$。\n-   降负荷限制：$P_3 \\geq P_2 - 40 = 60 - 40 = 20$。\n$P_3$ 的组合约束为 $\\max(20, 20) \\leq P_3 \\leq \\min(85, 90)$，简化后为 $20 \\leq P_3 \\leq 85$。\n为最大化轨迹，我们选择 $P_3$ 的最大可能值。\n$$P_3 = 85$$\n\n**时段 $t=4$：**\n功率输出 $P_4$ 受 $P_3 = 85$ 的约束。\n-   容量限制：$20 \\leq P_4 \\leq 85$。\n-   升负荷限制：$P_4 \\leq P_3 + 30 = 85 + 30 = 115$。\n-   降负荷限制：$P_4 \\geq P_3 - 40 = 85 - 40 = 45$。\n$P_4$ 的组合约束为 $\\max(20, 45) \\leq P_4 \\leq \\min(85, 115)$，简化后为 $45 \\leq P_4 \\leq 85$。\n为最大化轨迹，我们选择 $P_4$ 的最大可能值。\n$$P_4 = 85$$\n\n最终最大化总发电量的轨迹是 $(P_1, P_2, P_3, P_4) = (30, 60, 85, 85)$。所有数值单位均为 MW。\n最终答案是表示为行向量的该轨迹。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n30  60  85  85\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
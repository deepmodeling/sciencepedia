{
    "hands_on_practices": [
        {
            "introduction": "Thermal generators, due to physical limitations like thermal stress, cannot be cycled on and off instantaneously. This exercise focuses on translating these crucial operational rules—minimum up-time and down-time—into the language of mathematics. By working through this problem, you will practice formulating the linear inequalities that enforce these time-dependent logical conditions, a fundamental skill in building realistic unit commitment models .",
            "id": "4104056",
            "problem": "Consider a single thermal generating unit in an energy systems model over a planning horizon of $T=5$ discrete periods. The unit has a physical minimum up time $T^{up}=2$ and a minimum down time $T^{down}=2$, stemming from thermal inertia and operational safety constraints. Let the binary commitment variable $u_t \\in \\{0,1\\}$ denote the on/off status of the unit at period $t$, with $u_t=1$ meaning the unit is on. Let $u_0=0$ be the initial status before the horizon and suppose the unit has been off for at least $T^{down}$ periods prior to $t=1$, so a start-up at $t=1$ is physically permissible. A candidate commitment sequence is given by\n$$\nu_1=1,\\quad u_2=0,\\quad u_3=1,\\quad u_4=1,\\quad u_5=0,\n$$\nwhich may have been produced by a baseline Mixed-Integer Linear Programming (MILP) model that enforces only that start-up and shut-down events coincide with changes in commitment but does not yet impose explicit minimum up/down time constraints.\n\nStarting from the physical definitions of minimum up/down times and the logical relationship between commitment and start-up/shut-down events, perform the following tasks:\n1. Construct the appropriate additional linear constraints that enforce $T^{up}$ and $T^{down}$, ensuring scientific realism at the start and end of the horizon. Use only the given physical definitions and standard logical relationships; do not assume any pre-specified formula.\n2. Using those constraints, test the feasibility of the given sequence and identify all violations within the horizon where the physical requirement must be met inside $t=1,\\dots,5$.\n3. Determine the minimal number of period-by-period changes to the entries of the given sequence $\\{u_t\\}_{t=1}^{5}$ required to obtain a sequence that satisfies the constructed constraints while respecting the stated initial condition. The minimality is in terms of the Hamming distance to the given sequence (the count of periods whose status must be flipped). Express your final answer as a single integer with no units.\n\nNo rounding is necessary for the final answer.",
            "solution": "The problem statement is evaluated as valid. It is scientifically grounded in the principles of energy systems engineering, specifically unit commitment modeling. The problem is well-posed, with all necessary data and conditions provided, and is stated in objective, formal language. We may, therefore, proceed with a solution.\n\nThe problem is divided into three tasks. We will address them in sequence.\n\n### 1. Construction of Minimum Up/Down Time Constraints\n\nThe state of the thermal unit at time $t$ is given by the binary commitment variable $u_t \\in \\{0, 1\\}$, where $u_t=1$ if the unit is online and $u_t=0$ if it is offline. The planning horizon is $T=5$ periods, indexed $t=1, \\dots, 5$. The initial state is $u_0=0$.\n\nTo enforce minimum up-time and down-time constraints, we must first define the events of starting up and shutting down. Let $v_t \\in \\{0, 1\\}$ be the start-up variable, where $v_t=1$ indicates that the unit starts up at the beginning of period $t$. Let $w_t \\in \\{0, 1\\}$ be the shut-down variable, where $w_t=1$ indicates the unit shuts down at the beginning of period $t$. These events are determined by the change in commitment status from one period to the next.\n\nA start-up at $t$ occurs if and only if the unit was off at $t-1$ and is on at $t$.\nA shut-down at $t$ occurs if and only if the unit was on at $t-1$ and is off at $t$.\n\nThis logic is captured by the relationship:\n$$\nu_t - u_{t-1} = v_t - w_t, \\quad \\forall t \\in \\{1, \\dots, T\\}\n$$\nAlong with the binary nature of the variables and the fact that a unit cannot simultaneously start and stop ($v_t + w_t \\le 1$), this single equation defines the events. For a Mixed-Integer Linear Programming (MILP) model, we would relax this into a set of linear inequalities:\n$$\nv_t \\ge u_t - u_{t-1} \\\\\nw_t \\ge u_{t-1} - u_t \\\\\nv_t, w_t \\in \\{0, 1\\}\n$$\nFor our analysis, we can determine $v_t$ and $w_t$ directly from the given $u_t$ sequence: $v_t = \\max(0, u_t - u_{t-1})$ and $w_t = \\max(0, u_{t-1} - u_t)$.\n\n**Minimum Up-Time Constraint ($T^{up}$):**\nThe physical requirement is that if a unit starts up at time $t$ (i.e., $v_t=1$), it must remain online for at least $T^{up}$ consecutive periods. This means the commitment status $u$ must be $1$ for periods $t, t+1, \\dots, t+T^{up}-1$. This can be formulated as a set of linear constraints. For each potential start-up time $t$, we must ensure:\n$$\nu_{t+k} = 1 \\quad \\text{if} \\quad v_t = 1, \\quad \\text{for } k=0, 1, \\dots, T^{up}-1\n$$\nA linear inequality that enforces this is:\n$$\nu_{t+k} \\ge v_t\n$$\nThis must hold for all $t \\in \\{1, \\dots, T\\}$ and for all $k \\in \\{0, \\dots, T^{up}-1\\}$, provided the time index $t+k$ does not exceed the horizon $T$. With $T=5$ and $T^{up}=2$, the specific constraints are:\nFor $t=1$: $u_1 \\ge v_1, u_2 \\ge v_1$\nFor $t=2$: $u_2 \\ge v_2, u_3 \\ge v_2$\nFor $t=3$: $u_3 \\ge v_3, u_4 \\ge v_3$\nFor $t=4$: $u_4 \\ge v_4, u_5 \\ge v_4$\nFor $t=5$: $u_5 \\ge v_5$ (as $5+1 > T=5$)\n\n**Minimum Down-Time Constraint ($T^{down}$):**\nSimilarly, if a unit shuts down at time $t$ (i.e., $w_t=1$), it must remain offline for at least $T^{down}$ consecutive periods. This means $u$ must be $0$ for periods $t, t+1, \\dots, t+T^{down}-1$. This can be stated as:\n$$\nu_{t+k} = 0 \\quad \\text{if} \\quad w_t = 1, \\quad \\text{for } k=0, 1, \\dots, T^{down}-1\n$$\nA corresponding linear inequality is:\n$$\nu_{t+k} \\le 1 - w_t\n$$\nThis must hold for all $t \\in \\{1, \\dots, T\\}$ and for all $k \\in \\{0, \\dots, T^{down}-1\\}$, provided $t+k \\le T$. With $T=5$ and $T^{down}=2$, the specific constraints are:\nFor $t=1$: $u_1 \\le 1-w_1, u_2 \\le 1-w_1$\nFor $t=2$: $u_2 \\le 1-w_2, u_3 \\le 1-w_2$\nFor $t=3$: $u_3 \\le 1-w_3, u_4 \\le 1-w_3$\nFor $t=4$: $u_4 \\le 1-w_4, u_5 \\le 1-w_4$\nFor $t=5$: $u_5 \\le 1-w_5$ (as $5+1 > T=5$)\n\nThe initial condition that the unit has been off for at least $T^{down}=2$ periods prior to $t=1$ ensures that a start-up at $t=1$ is permissible and does not violate any historical down-time constraint.\n\n### 2. Feasibility Test of the Given Sequence\n\nThe candidate sequence is $u_1=1, u_2=0, u_3=1, u_4=1, u_5=0$. The initial condition is $u_0=0$. First, we compute the start-up ($v_t$) and shut-down ($w_t$) sequences:\n- $t=1$: $u_1=1, u_0=0 \\implies v_1=1, w_1=0$ (Start-up)\n- $t=2$: $u_2=0, u_1=1 \\implies v_2=0, w_2=1$ (Shut-down)\n- $t=3$: $u_3=1, u_2=0 \\implies v_3=1, w_3=0$ (Start-up)\n- $t=4$: $u_4=1, u_3=1 \\implies v_4=0, w_4=0$ (No change)\n- $t=5$: $u_5=0, u_4=1 \\implies v_5=0, w_5=1$ (Shut-down)\n\nNow we test this sequence against the constraints derived in Part 1. We only need to check the constraints for the periods where a start-up or shut-down occurs.\n\n**Minimum Up-Time Violations ($T^{up}=2$):**\n- A start-up occurs at $t=1$ ($v_1=1$). This triggers the constraint $u_2 \\ge v_1$. Substituting the values: $0 \\ge 1$. This is false. **Violation**: The unit starts at $t=1$ but is shut down at $t=2$, resulting in an up-time of only $1$ period, which is less than the required $T^{up}=2$.\n- A start-up occurs at $t=3$ ($v_3=1$). This triggers the constraint $u_4 \\ge v_3$. Substituting the values: $1 \\ge 1$. This is true. No violation for this event.\n\n**Minimum Down-Time Violations ($T^{down}=2$):**\n- A shut-down occurs at $t=2$ ($w_2=1$). This triggers the constraint $u_3 \\le 1-w_2$. Substituting the values: $u_3 \\le 1-1 \\implies 1 \\le 0$. This is false. **Violation**: The unit shuts down at $t=2$ but is started up again at $t=3$, resulting in a down-time of only $1$ period, which is less than the required $T^{down}=2$.\n- A shut-down occurs at $t=5$ ($w_5=1$). This triggers the constraint $u_5 \\le 1-w_5$. Substituting the values: $0 \\le 1-1 \\implies 0 \\le 0$. This is true. The full down-time period extends beyond the horizon, but no violation is observed within the $T=5$ periods.\n\nThe given sequence has two violations of the physical constraints within the specified horizon: a minimum up-time violation following the start-up at $t=1$, and a minimum down-time violation following the shut-down at $t=2$.\n\n### 3. Minimal Number of Changes\n\nWe need to find a new sequence $\\{u'_t\\}_{t=1}^5$ that satisfies all constraints and minimizes the Hamming distance to the original sequence, $d = \\sum_{t=1}^5 |u'_t - u_t|$. The original sequence is $u = (1, 0, 1, 1, 0)$.\n\nA distance of $d=0$ corresponds to the original sequence, which we know is invalid. We search for a valid sequence with a minimal number of changes, starting with $d=1$. This involves flipping a single entry in the sequence.\n\nLet's examine the two violations.\n- The up-time violation at $t=1$ requires $u_2=1$.\n- The down-time violation at $t=2$ requires $u_3=0$.\nThese two fixes are mutually exclusive if we only change one variable. Let's explore the options by flipping one bit at a time.\n\n**Case 1: Flip $u_1$ from $1$ to $0$.**\n- New sequence: $u'=(0, 0, 1, 1, 0)$. Distance $d=1$.\n- Events:\n  - $t=1,2$: Unit is off.\n  - $t=3$: Start-up ($v'_3=1$). Requires $u'_3=1, u'_4=1$ (since $T^{up}=2$). The sequence has this. This is valid.\n  - $t=5$: Shut-down ($w'_5=1$). Requires $u'_5=0$. The sequence has this. This is valid.\n- The unit is off for $t=1, 2$, which is a down-time of $2$ periods. This satisfies $T^{down}=2$.\n- The unit is on for $t=3, 4$, which is an up-time of $2$ periods. This satisfies $T^{up}=2$.\n- The sequence $u'=(0, 0, 1, 1, 0)$ is valid.\n\n**Case 2: Flip $u_2$ from $0$ to $1$.**\n- New sequence: $u''=(1, 1, 1, 1, 0)$. Distance $d=1$.\n- Events:\n  - $t=1$: Start-up ($v''_1=1$). Requires $u''_1=1, u''_2=1$. The sequence has this. This is valid.\n  - $t=2,3,4$: Unit is on.\n  - $t=5$: Shut-down ($w''_5=1$). Requires $u''_5=0$. The sequence has this. This is valid.\n- The unit is on for $t=1, 2, 3, 4$, an up-time of $4$ periods. This satisfies $T^{up}=2$.\n- The sequence $u''=(1, 1, 1, 1, 0)$ is valid.\n\nSince we have found at least one valid sequence by changing only one entry (a distance of $1$), and we know a distance of $0$ is not possible, the minimal number of period-by-period changes required is $1$.",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "Energy storage systems, such as batteries, are vital for grid stability but are governed by a simple rule: they cannot charge and discharge at the same time. This practice explores how to enforce such mutually exclusive operations within a Mixed-Integer Linear Programming framework using binary variables and the \"big-M\" method. You will apply this logical structure to a physical model involving energy conservation and efficiencies to solve a practical design problem: determining the minimum storage capacity needed to provide a specific energy service .",
            "id": "4104082",
            "problem": "A utility-scale electrochemical battery participates in a time-indexed energy delivery task over four discrete periods, each of duration $\\Delta t = 1$ hour. The battery dynamics obey energy conservation and process efficiencies as follows: if the battery charges with electrical power $p^{\\mathrm{ch}}_{t}$ at time $t$, the stored energy increases by $\\eta_{c} \\, p^{\\mathrm{ch}}_{t} \\, \\Delta t$, and if it discharges with electrical output power $p^{\\mathrm{dis}}_{t}$, the stored energy decreases by $\\frac{1}{\\eta_{d}} \\, p^{\\mathrm{dis}}_{t} \\, \\Delta t$. The charge and discharge efficiencies are $\\eta_{c} \\in (0,1)$ and $\\eta_{d} \\in (0,1)$, respectively, and there is no self-discharge. Let $E_{t}$ denote the stored energy at the end of period $t$, with initial energy $E_{0}$ given. The battery energy capacity bound is $0 \\leq E_{t} \\leq E^{\\max}$ for all periods, where $E^{\\max}$ is a design variable to be minimized subject to feasibility. The device must meet a net energy delivery target $Q$ to the grid over the horizon, i.e., $\\sum_{t=1}^{4} p^{\\mathrm{dis}}_{t} \\, \\Delta t = Q$.\n\nTo ensure mutually exclusive operating modes, introduce binary decision variables $y_{t} \\in \\{0,1\\}$ that enforce the logical constraints $p^{\\mathrm{ch}}_{t} \\leq y_{t} \\, \\overline{P}^{\\mathrm{ch}}_{t}$ and $p^{\\mathrm{dis}}_{t} \\leq (1-y_{t}) \\, \\overline{P}^{\\mathrm{dis}}_{t}$ for each period $t$, where $\\overline{P}^{\\mathrm{ch}}_{t}$ and $\\overline{P}^{\\mathrm{dis}}_{t}$ are the period-specific charge and discharge power upper bounds, respectively. This mixed-integer linear programming formulation uses the energy balance constraint $E_{t} = E_{t-1} + \\eta_{c} \\, p^{\\mathrm{ch}}_{t-1} \\, \\Delta t - \\frac{1}{\\eta_{d}} \\, p^{\\mathrm{dis}}_{t-1} \\, \\Delta t$ for $t = 1,2,3,4$. The problem statement has been corrected to use $t-1$ for consistency in indexing.\n\nParameters are specified as follows: $E_{0} = 12$ megawatt-hours, $\\eta_{c} = 0.95$, $\\eta_{d} = 0.90$, $\\Delta t = 1$ hour, $\\overline{P}^{\\mathrm{ch}} = (6, 6, 0, 0)$ megawatts, $\\overline{P}^{\\mathrm{dis}} = (0, 0, 10, 10)$ megawatts, and $Q = 18$ megawatt-hours. The lower energy bound is $0$ megawatt-hours at all times. Assume no other exogenous inflows or outflows.\n\nStarting from the fundamental energy conservation law with the above efficiency model and mixed-integer logical constraints, determine the minimal energy capacity $E^{\\max}$ that permits at least one feasible charge/discharge schedule meeting the net energy delivery target $Q$ and all bounds, and provide one such feasible schedule. Express the final answer as a single real number representing $E^{\\max}$ in megawatt-hours. No rounding is required; provide the exact value.",
            "solution": "The user wants me to solve an energy systems modeling problem. I will first perform a validation of the problem statement as per the instructions.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n- **Time horizon**: $4$ discrete periods, $t \\in \\{1, 2, 3, 4\\}$.\n- **Time step duration**: $\\Delta t = 1$ hour.\n- **Charge efficiency**: $\\eta_{c} = 0.95$.\n- **Discharge efficiency**: $\\eta_{d} = 0.90$.\n- **Self-discharge**: None.\n- **Initial energy**: $E_{0} = 12$ megawatt-hours (MWh).\n- **Energy capacity bounds**: $0 \\leq E_{t} \\leq E^{\\max}$ for $t \\in \\{1, 2, 3, 4\\}$.\n- **Objective**: Minimize $E^{\\max}$.\n- **Net energy delivery target**: $Q = \\sum_{t=1}^{4} p^{\\mathrm{dis}}_{t} \\, \\Delta t = 18$ MWh.\n- **Logical constraints**: Binary variables $y_t \\in \\{0,1\\}$ enforce $p^{\\mathrm{ch}}_{t} \\leq y_{t} \\, \\overline{P}^{\\mathrm{ch}}_{t}$ and $p^{\\mathrm{dis}}_{t} \\leq (1-y_{t}) \\, \\overline{P}^{\\mathrm{dis}}_{t}$.\n- **Charge power bounds**: $\\overline{P}^{\\mathrm{ch}} = (6, 6, 0, 0)$ megawatts (MW).\n- **Discharge power bounds**: $\\overline{P}^{\\mathrm{dis}} = (0, 0, 10, 10)$ MW.\n- **Energy balance**: $E_{t} = E_{t-1} + \\eta_{c} \\, p^{\\mathrm{ch}}_{t-1} \\, \\Delta t - \\frac{1}{\\eta_{d}} \\, p^{\\mathrm{dis}}_{t-1} \\, \\Delta t$.\n- **Lower energy bound**: $E_t \\geq 0$ for all $t$.\n\n**Step 2: Validate Using Extracted Givens**\n- **Scientifically Grounded**: The problem describes a standard mixed-integer linear programming (MILP) model for an energy storage device. The energy balance equation correctly reflects charging and discharging losses based on the first law of thermodynamics. The use of binary variables to enforce mutually exclusive operation is a canonical technique in this field. The specified parameters are within realistic ranges for electrochemical batteries. The problem is scientifically and mathematically sound.\n- **Well-Posed**: The problem is to find the minimum value of a parameter ($E^{\\max}$) for which a set of linear and integer constraints has a feasible solution. This is a well-defined optimization problem.\n- **Objective**: The problem is stated using precise, quantitative language, free of subjectivity.\n\n- **Flaw Checklist**:\n  1. **Scientific/Factual Unsoundness**: None.\n  2. **Non-Formalizable/Irrelevant**: None. The problem is a formal exercise in MILP.\n  3. **Incomplete/Contradictory Setup**: The power bounds imply a strict operational schedule. Specifically, $\\overline{P}^{\\mathrm{ch}}_{3} = 0$, $\\overline{P}^{\\mathrm{ch}}_{4} = 0$, $\\overline{P}^{\\mathrm{dis}}_{1} = 0$, and $\\overline{P}^{\\mathrm{dis}}_{2} = 0$. These constraints force $p^{\\mathrm{ch}}_{3}=p^{\\mathrm{ch}}_{4}=0$ and $p^{\\mathrm{dis}}_{1}=p^{\\mathrm{dis}}_{2}=0$. This means charging can only occur in periods $1$ and $2$, and discharging can only occur in periods $3$ and $4$. These are restrictive but not contradictory constraints. The problem is self-contained.\n  4. **Unrealistic/Infeasible**: The setup is a simplified but plausible scenario. No physical impossibilities are requested.\n  5. **Ill-Posed/Poorly Structured**: No. A unique minimum for $E^{\\max}$ is expected to exist if the problem is feasible.\n  6. **Pseudo-Profound/Trivial**: The problem requires a multi-step logical deduction and is non-trivial.\n  7. **Outside Scientific Verifiability**: No. The solution is mathematically verifiable.\n\n**Step 3: Verdict and Action**\nThe problem is **valid**. A full solution will be provided.\n\n### Solution\n\nThe objective is to find the minimum energy capacity $E^{\\max}$ required for a feasible charge/discharge schedule. A feasible schedule must satisfy all given constraints on power, energy, and total delivery. $E^{\\max}$ is defined by the constraint $E_t \\le E^{\\max}$ for all periods $t \\in \\{1, 2, 3, 4\\}$. To minimize $E^{\\max}$, we must find a feasible schedule that minimizes the peak energy stored in the battery over the entire horizon. That is, we seek to solve $\\min E^{\\max}$ subject to $E^{\\max} \\ge E_t$ for all $t$, which is equivalent to finding $\\min (\\max_{t} E_t)$ over all feasible schedules.\n\nFirst, we analyze the constraints. The power bounds are $\\overline{P}^{\\mathrm{ch}} = (6, 6, 0, 0)$ MW and $\\overline{P}^{\\mathrm{dis}} = (0, 0, 10, 10)$ MW.\nThis implies:\n- For $t=1, 2$: $p^{\\mathrm{dis}}_{t}=0$. The battery can only charge or be idle.\n- For $t=3, 4$: $p^{\\mathrm{ch}}_{t}=0$. The battery can only discharge or be idle.\n\nThe energy balance equations, with $\\Delta t=1$ hour, become:\n$E_{1} = E_{0} + \\eta_{c} p^{\\mathrm{ch}}_{1}$\n$E_{2} = E_{1} + \\eta_{c} p^{\\mathrm{ch}}_{2} = E_{0} + \\eta_{c} (p^{\\mathrm{ch}}_{1} + p^{\\mathrm{ch}}_{2})$\n$E_{3} = E_{2} - \\frac{1}{\\eta_{d}} p^{\\mathrm{dis}}_{3}$\n$E_{4} = E_{3} - \\frac{1}{\\eta_{d}} p^{\\mathrm{dis}}_{4} = E_{2} - \\frac{1}{\\eta_{d}} (p^{\\mathrm{dis}}_{3} + p^{\\mathrm{dis}}_{4})$\n\nSince $p^{\\mathrm{ch}}_{t} \\ge 0$ and $p^{\\mathrm{dis}}_{t} \\ge 0$, the energy levels follow the sequence $E_0 \\le E_1 \\le E_2 \\ge E_3 \\ge E_4$. The maximum energy level stored in the battery during the horizon is therefore always $E_2$. The problem of minimizing the peak energy, $\\max_{t} E_t$, simplifies to minimizing $E_2$.\n\nTo find the minimum feasible value for $E_2$, we must determine the minimum amount of charging required. The total energy delivered is specified as $Q = 18$ MWh. Since discharging only occurs in periods $3$ and $4$, the delivery constraint is:\n$\\sum_{t=1}^{4} p^{\\mathrm{dis}}_{t} \\Delta t = (p^{\\mathrm{dis}}_{3} + p^{\\mathrm{dis}}_{4}) \\cdot 1 = 18$ MWh.\nSo, $p^{\\mathrm{dis}}_{3} + p^{\\mathrm{dis}}_{4} = 18$ MW.\n\nThe total energy withdrawn from storage to meet this delivery target is $\\frac{1}{\\eta_d} \\sum p^{\\mathrm{dis}}_t \\Delta t = \\frac{Q}{\\eta_d}$.\nWith $Q=18$ MWh and $\\eta_d=0.90$, the total energy drawn from storage is $\\frac{18}{0.90} = 20$ MWh.\n\nLet's use the overall energy balance from $t=0$ to $t=4$:\n$E_4 = E_0 + (\\text{energy stored via charging}) - (\\text{energy removed for discharging})$\n$E_4 = E_0 + \\eta_c (p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2)\\Delta t - \\frac{1}{\\eta_d} (p^{\\mathrm{dis}}_3 + p^{\\mathrm{dis}}_4)\\Delta t$\n\nSubstituting the given values:\n$E_4 = 12 + 0.95(p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2) - \\frac{1}{0.90}(18)$\n$E_4 = 12 + 0.95(p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2) - 20$\n$E_4 = 0.95(p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2) - 8$\n\nThe feasibility constraint $E_t \\ge 0$ must hold for all $t$, including $t=4$. Thus, $E_4 \\ge 0$.\n$0.95(p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2) - 8 \\ge 0 \\implies 0.95(p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2) \\ge 8$\nThe total charge power required is $p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2 \\ge \\frac{8}{0.95} = \\frac{8}{19/20} = \\frac{160}{19}$ MW.\n\nTo minimize $E_2 = E_0 + \\eta_c (p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2) = 12 + 0.95(p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2)$, we must use the minimum required amount of charging. Let $p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2 = \\frac{160}{19}$ MW.\nThe minimum possible value for $E_2$ is:\n$E_{2, \\min} = 12 + 0.95 \\left(\\frac{160}{19}\\right) = 12 + \\frac{19}{20} \\cdot \\frac{160}{19} = 12 + \\frac{160}{20} = 12 + 8 = 20$ MWh.\n\nThe minimal peak energy is $20$ MWh. Therefore, the minimal energy capacity must be $E^{\\max} = 20$ MWh.\nWe must now confirm that a feasible schedule exists that achieves this.\n\nA feasible schedule:\n1.  **Charging**: We need $p^{\\mathrm{ch}}_1 + p^{\\mathrm{ch}}_2 = \\frac{160}{19}$ MW ($\\approx 8.42$ MW). The constraint for each period is $p^{\\mathrm{ch}}_t \\le 6$ MW. We can satisfy this, for example, by setting $p^{\\mathrm{ch}}_1 = 6$ MW and $p^{\\mathrm{ch}}_2 = \\frac{160}{19} - 6 = \\frac{160 - 114}{19} = \\frac{46}{19}$ MW ($\\approx 2.42$ MW). Both are $\\le 6$ MW.\n2.  **Discharging**: We need $p^{\\mathrm{dis}}_3 + p^{\\mathrm{dis}}_4 = 18$ MW. The constraint for each period is $p^{\\mathrm{dis}}_t \\le 10$ MW. We can satisfy this, for example, by setting $p^{\\mathrm{dis}}_3 = 10$ MW and $p^{\\mathrm{dis}}_4 = 8$ MW.\n\nLet's verify the energy trajectory for this specific schedule:\n- $p^{\\mathrm{ch}} = (6, \\frac{46}{19}, 0, 0)$ MW\n- $p^{\\mathrm{dis}} = (0, 0, 10, 8)$ MW\n- $E_0 = 12$ MWh\n- $E_1 = E_0 + \\eta_c p^{\\mathrm{ch}}_1 = 12 + 0.95 \\cdot 6 = 12 + 5.7 = 17.7$ MWh.\n- $E_2 = E_1 + \\eta_c p^{\\mathrm{ch}}_2 = 17.7 + 0.95 \\cdot \\frac{46}{19} = 17.7 + \\frac{19}{20} \\cdot \\frac{46}{19} = 17.7 + \\frac{46}{20} = 17.7 + 2.3 = 20.0$ MWh.\n- $E_3 = E_2 - \\frac{1}{\\eta_d} p^{\\mathrm{dis}}_3 = 20 - \\frac{1}{0.90} \\cdot 10 = 20 - \\frac{100}{9} = \\frac{180-100}{9} = \\frac{80}{9}$ MWh ($\\approx 8.89$ MWh).\n- $E_4 = E_3 - \\frac{1}{\\eta_d} p^{\\mathrm{dis}}_4 = \\frac{80}{9} - \\frac{1}{0.90} \\cdot 8 = \\frac{80}{9} - \\frac{80}{9} = 0$ MWh.\n\nThe energy levels over time are $E=(E_1, E_2, E_3, E_4) = (17.7, 20.0, \\frac{80}{9}, 0)$ MWh.\nThe maximum energy level is $20$ MWh. All energy levels are within the range $[0, 20]$ MWh.\nThus, a capacity of $E^{\\max} = 20$ MWh is sufficient. Since we showed that any feasible schedule requires $E_2 \\ge 20$ MWh, this is also the minimal required capacity.\n\nThe chosen schedule $(p^{\\mathrm{ch}}_1, p^{\\mathrm{ch}}_2, p^{\\mathrm{dis}}_3, p^{\\mathrm{dis}}_4) = (6, \\frac{46}{19}, 10, 8)$ is one feasible schedule that meets all constraints and allows for operation with the minimal capacity $E^{\\max}=20$ MWh.",
            "answer": "$$\\boxed{20}$$"
        },
        {
            "introduction": "In real-world energy systems, the cost of an action often depends on the system's recent history. For example, restarting a power plant that has been off for a long time (a \"cold start\") is more expensive than restarting one that was recently running (a \"hot start\"). This exercise demonstrates how to model such state-dependent costs by tracking the system's status over previous time periods, allowing you to build more nuanced and economically accurate optimization models .",
            "id": "4104066",
            "problem": "A thermal generating unit in an energy system is modeled using mixed-integer linear programming. The unit has binary commitment status $y_t \\in \\{0,1\\}$ over hourly time periods $t \\in \\{1,\\dots,12\\}$, where $y_t=1$ means the unit is on and $y_t=0$ means the unit is off. A startup occurs when $y_t$ transitions from $0$ to $1$, and the startup cost depends on whether the startup is classified as \"hot\" or \"cold.\" A \"cold\" startup is triggered if the unit has been continuously offline for at least $T^{cold}$ hours prior to the startup; otherwise, the startup is classified as \"hot.\" The cold-start threshold is $T^{cold}=3$ hours.\n\nThe hot- and cold-start cost parameters are $c^{su}_{hot}=45$ dollars per hot startup and $c^{su}_{cold}=180$ dollars per cold startup. The commitment history is\n$y_1=0$, $y_2=1$, $y_3=1$, $y_4=0$, $y_5=0$, $y_6=1$, $y_7=0$, $y_8=1$, $y_9=0$, $y_{10}=0$, $y_{11}=0$, $y_{12}=1$.\nAssume an initial condition $y_0=0$ and that the unit was offline for $L_0=2$ hours prior to $t=1$.\n\nUsing first-principles derivations of logical constraints appropriate for mixed-integer linear programming to encode binary transitions, determine and justify the classification (hot versus cold) of each startup and compute the total startup cost over $t \\in \\{1,\\dots,12\\}$. Express the final cost in dollars. Do not round; present the exact integer value.",
            "solution": "The problem requires the calculation of the total startup cost for a thermal generating unit over a specified time horizon. This is achieved by first identifying all startup events from the given commitment schedule and then classifying each startup as either \"hot\" or \"cold\" based on the unit's operational history. The total cost is the sum of the costs of these individual startups.\n\nThe provided data are:\n-   Binary commitment status: $y_t \\in \\{0,1\\}$ for time periods $t \\in \\{1, \\dots, 12\\}$. $y_t=1$ signifies the unit is online, and $y_t=0$ signifies the unit is offline.\n-   Commitment schedule: $y_1=0$, $y_2=1$, $y_3=1$, $y_4=0$, $y_5=0$, $y_6=1$, $y_7=0$, $y_8=1$, $y_9=0$, $y_{10}=0$, $y_{11}=0$, $y_{12}=1$.\n-   Initial and historical conditions: $y_0=0$, and the unit was offline for $L_0=2$ hours prior to $t=1$. This means the unit was off at $t=0$ and $t=-1$, and must have been on at $t=-2$ for the offline duration to be exactly 2 hours. So, the historical states are $y_{-2}=1, y_{-1}=0, y_0=0$.\n-   Cold-start threshold: $T^{cold}=3$ hours.\n-   Startup costs: $c^{su}_{hot}=45$ dollars for a hot start and $c^{su}_{cold}=180$ dollars for a cold start.\n\nFrom first principles, a startup event occurs at hour $t$ if the unit was off at hour $t-1$ and is on at hour $t$. This logical condition can be expressed as $y_{t-1}=0 \\land y_t=1$.\n\nWe begin by identifying the startup events in the given schedule from $t=1$ to $t=12$:\n-   At $t=2$: $y_1=0, y_2=1$. A startup occurs.\n-   At $t=6$: $y_5=0, y_6=1$. A startup occurs.\n-   At $t=8$: $y_7=0, y_8=1$. A startup occurs.\n-   At $t=12$: $y_{11}=0, y_{12}=1$. A startup occurs.\n\nStartups are identified at $t \\in \\{2, 6, 8, 12\\}$.\n\nNext, we classify each startup. A startup at time $t$ is defined as \"cold\" if the unit has been continuously offline for at least $T^{cold}$ hours immediately prior to the startup. Let $N_{off}(t)$ be the number of continuous hours the unit has been offline immediately prior to time $t$. A startup at time $t$ is cold if $N_{off}(t) \\ge T^{cold}$. Given $T^{cold}=3$, a startup at $t$ is cold if $N_{off}(t) \\ge 3$. Otherwise, the startup is \"hot\". $N_{off}(t)$ is the largest integer $k \\ge 1$ such that $y_{t-1}=0, y_{t-2}=0, \\dots, y_{t-k}=0$.\n\nWe now apply this classification rule to each startup event:\n\n1.  **Startup at $t=2$**:\n    A startup occurs at $t=2$ because $y_1=0$ and $y_2=1$. To classify it, we must determine the number of continuous offline hours immediately prior to $t=2$.\n    - The full history leading up to the startup is: ..., $y_{-2}=1, y_{-1}=0, y_0=0, y_1=0$.\n    - The continuous offline period before $t=2$ is composed of the hours $t=1, t=0, t=-1$. This is a duration of 3 hours.\n    Thus, $N_{off}(2)=3$. Since $3 \\ge T^{cold}=3$, the startup at $t=2$ is **cold**.\n    The cost for this startup is $c^{su}_{cold} = \\$180$.\n\n2.  **Startup at $t=6$**:\n    We examine the commitment status for hours preceding $t=6$.\n    -   $y_5 = 0$\n    -   $y_4 = 0$\n    -   $y_3 = 1$\n    The unit was on at $t=3$, so the continuous offline period is restricted to hours $t=5$ and $t=4$. The duration is $2$ hours.\n    Thus, $N_{off}(6)=2$. Since $2  T^{cold}$, the startup at $t=6$ is **hot**.\n    The cost for this startup is $c^{su}_{hot} = \\$45$.\n\n3.  **Startup at $t=8$**:\n    We examine the commitment status for hours preceding $t=8$.\n    -   $y_7 = 0$\n    -   $y_6 = 1$\n    The unit was on at $t=6$, so the continuous offline period consists only of hour $t=7$. The duration is $1$ hour.\n    Thus, $N_{off}(8)=1$. Since $1  T^{cold}$, the startup at $t=8$ is **hot**.\n    The cost for this startup is $c^{su}_{hot} = \\$45$.\n\n4.  **Startup at $t=12$**:\n    We examine the commitment status for hours preceding $t=12$.\n    -   $y_{11} = 0$\n    -   $y_{10} = 0$\n    -   $y_9 = 0$\n    -   $y_8 = 1$\n    The unit was on at $t=8$. The unit has been continuously offline during hours $t=11, 10, 9$. The duration is $3$ hours.\n    Thus, $N_{off}(12)=3$. Since $3 \\ge T^{cold}$, the startup at $t=12$ is **cold**.\n    The cost for this startup is $c^{su}_{cold} = \\$180$.\n\nFinally, the total startup cost is the sum of the costs of all individual startups.\nTotal Cost = Cost(startup at $t=2$) + Cost(startup at $t=6$) + Cost(startup at $t=8$) + Cost(startup at $t=12$)\nTotal Cost = $c^{su}_{cold} + c^{su}_{hot} + c^{su}_{hot} + c^{su}_{cold}$\nTotal Cost = $\\$180 + \\$45 + \\$45 + \\$180$\nTotal Cost = $\\$360 + \\$90 = \\$450$.\n\nThe total startup cost over the $12$-hour period is $450$ dollars.",
            "answer": "$$\\boxed{450}$$"
        }
    ]
}
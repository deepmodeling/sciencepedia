{
    "hands_on_practices": [
        {
            "introduction": "下垂控制是孤岛微电网中实现自主功率分配和频率调节的核心机制。本练习  将引导你从基本原理出发，推导多个发电源如何响应负荷变化以达到新的稳定平衡点。掌握这一概念是理解微电网实时运行的基础。",
            "id": "4099723",
            "problem": "一个孤岛微电网由三个可调度电源供电：一台同步发电机和两个基于逆变器的分布式能源 (DER)。在稳态孤岛运行中，微电网频率在所有电源中是统一的，并且必须保持有功功率平衡，即发电总量等于负荷。每个电源都采用比例频率-有功功率下垂控制，其中运行频率随着其自身有功功率超过其标称值而线性下降，斜率为 $m_i$，单位为 $\\mathrm{Hz}/\\mathrm{MW}$。标称频率为 $f^{\\ast}$。设电源索引为 $i \\in \\{1,2,3\\}$，斜率分别为 $m_1$、$m_2$ 和 $m_3$。设标称有功功率分别为 $P_1^{\\ast}$、$P_2^{\\ast}$ 和 $P_3^{\\ast}$，实际有功功率分别为 $P_1$、$P_2$ 和 $P_3$。在计划发电量之上，净负荷出现大小为 $\\Delta P_{\\mathrm{load}}$ 的阶跃增加，这会导致一个恒定的有功功率误差，该误差通过各电源的下垂控制进行分担。假设死区可忽略不计，有功功率测量精确，无二次控制作用，并且微电网达到静态平衡，相对于 $f^{\\ast}$ 存在一个恒定的频率偏移 $\\Delta f$ 以及每个电源存在恒定的有功功率偏差。\n\n已知：\n- $f^{\\ast} = 50\\,\\mathrm{Hz}$，\n- $m_1 = 0.05\\,\\mathrm{Hz}/\\mathrm{MW}$，$m_2 = 0.08\\,\\mathrm{Hz}/\\mathrm{MW}$，$m_3 = 0.10\\,\\mathrm{Hz}/\\mathrm{MW}$，\n- $\\Delta P_{\\mathrm{load}} = 0.90\\,\\mathrm{MW}$，\n\n利用稳态功率平衡的基本原理和比例下垂概念，推导出 $\\Delta f$ 关于 $\\Delta P_{\\mathrm{load}}$ 和 $\\{m_i\\}_{i=1}^{3}$ 的表达式，然后计算其数值。将最终数值答案四舍五入至四位有效数字。以 $\\mathrm{Hz}$ 为单位表示最终频率偏移。",
            "solution": "该问题要求基于下垂控制和功率平衡的原理，推导孤岛微电网在负荷增加后的稳态频率偏移 $\\Delta f$。\n\n首先，我们将每个电源 $i$ 的比例频率-有功功率下垂控制特性公式化。问题陈述，运行频率 $f$ 随着有功功率输出 $P_i$ 超过其标称值 $P_i^{\\ast}$ 而从标称频率 $f^{\\ast}$ 线性下降。该关系的斜率由 $m_i > 0$ 给出。这可以用数学方式表示为：\n$$f - f^{\\ast} = -m_i (P_i - P_i^{\\ast})$$\n设频率偏移为 $\\Delta f = f - f^{\\ast}$，电源 $i$ 的有功功率偏差为 $\\Delta P_i = P_i - P_i^{\\ast}$。在孤岛微电网中，稳态下所有电源的频率是统一的。因此，每个电源的下垂方程为：\n$$\\Delta f = -m_i \\Delta P_i \\quad \\text{for } i \\in \\{1, 2, 3\\}$$\n该方程建立了公共频率偏移与每个电源各自功率偏差之间的关系。由此，我们可以将每个电源的功率偏差表示为频率偏移的函数：\n$$\\Delta P_i = -\\frac{\\Delta f}{m_i}$$\n\n其次，我们应用有功功率平衡原理。在负荷变化之前，三个电源的总发电量等于初始负荷。初始计划发电量为 $\\sum_{i=1}^{3} P_i^{\\ast}$。发生了一个大小为 $\\Delta P_{\\mathrm{load}}$ 的负荷阶跃增加。在新的稳态平衡下，三个电源产生的总有功功率必须等于新的总负荷。设新的有功功率输出为 $P_1$、$P_2$ 和 $P_3$。新的总负荷为 $\\left(\\sum_{i=1}^{3} P_i^{\\ast}\\right) + \\Delta P_{\\mathrm{load}}$。\n功率平衡方程为：\n$$\\sum_{i=1}^{3} P_i = \\left(\\sum_{i=1}^{3} P_i^{\\ast}\\right) + \\Delta P_{\\mathrm{load}}$$\n为了用功率偏差来表示，我们重排该方程：\n$$\\sum_{i=1}^{3} P_i - \\sum_{i=1}^{3} P_i^{\\ast} = \\Delta P_{\\mathrm{load}}$$\n$$\\sum_{i=1}^{3} (P_i - P_i^{\\ast}) = \\Delta P_{\\mathrm{load}}$$\n使用我们对 $\\Delta P_i$ 的定义，上式变为：\n$$\\sum_{i=1}^{3} \\Delta P_i = \\Delta P_{\\mathrm{load}}$$\n该方程表明，所有电源的总发电增量必须精确匹配负荷的增量。\n\n第三，我们结合下垂控制方程和功率平衡方程来推导 $\\Delta f$ 的表达式。我们将来自下垂特性的 $\\Delta P_i$ 表达式代入功率平衡方程：\n$$\\sum_{i=1}^{3} \\left(-\\frac{\\Delta f}{m_i}\\right) = \\Delta P_{\\mathrm{load}}$$\n由于 $\\Delta f$ 是所有电源共有的一个常数，它可以从求和中提取出来：\n$$-\\Delta f \\sum_{i=1}^{3} \\frac{1}{m_i} = \\Delta P_{\\mathrm{load}}$$\n最后，我们解出频率偏移 $\\Delta f$：\n$$\\Delta f = - \\frac{\\Delta P_{\\mathrm{load}}}{\\sum_{i=1}^{3} \\frac{1}{m_i}}$$\n这就是稳态频率偏移关于负荷增量和参与电源的下垂斜率的通用表达式。负号正确地表明，负荷的增加 ($\\Delta P_{\\mathrm{load}} > 0$) 会导致频率的下降 ($\\Delta f  0$)。\n\n现在，我们使用给定的数据计算 $\\Delta f$ 的数值：\n- $\\Delta P_{\\mathrm{load}} = 0.90\\,\\mathrm{MW}$\n- $m_1 = 0.05\\,\\mathrm{Hz}/\\mathrm{MW}$\n- $m_2 = 0.08\\,\\mathrm{Hz}/\\mathrm{MW}$\n- $m_3 = 0.10\\,\\mathrm{Hz}/\\mathrm{MW}$\n\n首先，我们计算下垂斜率倒数之和：\n$$\\sum_{i=1}^{3} \\frac{1}{m_i} = \\frac{1}{m_1} + \\frac{1}{m_2} + \\frac{1}{m_3}$$\n$$\\sum_{i=1}^{3} \\frac{1}{m_i} = \\frac{1}{0.05} + \\frac{1}{0.08} + \\frac{1}{0.10}$$\n$$\\sum_{i=1}^{3} \\frac{1}{m_i} = 20 + 12.5 + 10 = 42.5\\,\\mathrm{MW}/\\mathrm{Hz}$$\n量 $\\sum \\frac{1}{m_i}$ 可以解释为整个微电网的等效下垂刚度。\n\n现在，我们将这个值和 $\\Delta P_{\\mathrm{load}}$ 代入推导出的 $\\Delta f$ 表达式中：\n$$\\Delta f = - \\frac{0.90}{42.5}$$\n$$\\Delta f = -0.02117647... \\,\\mathrm{Hz}$$\n问题要求答案四舍五入到四位有效数字。\n前四位有效数字是 $2$、$1$、$1$ 和 $7$。$7$ 后面的数字是 $6$，所以我们将 $7$ 向上取整为 $8$。\n$$\\Delta f \\approx -0.02118\\,\\mathrm{Hz}$$",
            "answer": "$$\\boxed{-0.02118}$$"
        },
        {
            "introduction": "储能系统对于微电网的灵活性至关重要，是维持供需平衡的关键工具。此练习  专注于对电池进行精细的能量核算，包括考虑不同的充放电效率。精确掌握这种离散时间建模方法，对于预测储能行为、确保其在安全边界内运行至关重要，也是任何高级控制与调度策略的先决条件。",
            "id": "4099706",
            "problem": "考虑一个孤岛微电网，其中包含一个以离散时间建模的电化学储能系统（ESS）。设荷电状态（SoC）为时间步 $t \\in \\{0,1,\\dots,8\\}$ 结束时存储的能量 $E_t$，单位为 $\\mathrm{kWh}$。离散时间步长为 $\\Delta t = 1\\,\\mathrm{h}$。该储能系统遵循能量守恒定律，并具有独立的充电和放电转换效率：充电时，输入电能的一部分 $\\eta_c$ 被储存起来；放电时，提取 $1\\,\\mathrm{kWh}$ 的有用电能会使SoC减少 $1/\\eta_d\\,\\mathrm{kWh}$。采用符号约定，即计划的储能系统功率 $P_t$（单位为 $\\mathrm{kW}$）在放电时为正，在充电时为负。假设没有寄生自放电或辅助负载。\n\n参数：\n- 充电效率 $\\eta_c = 0.96$ 和放电效率 $\\eta_d = 0.90$。\n- 初始荷电状态 $E_0 = 120\\,\\mathrm{kWh}$。\n- 时间步长 $\\Delta t = 1\\,\\mathrm{h}$。\n- $t=1,\\dots,8$ 期间的功率计划（单位 $\\mathrm{kW}$）：$P_1=-50$, $P_2=-20$, $P_3=30$, $P_4=60$, $P_5=10$, $P_6=-40$, $P_7=-70$, $P_8=-20$。\n- 运行约束：\n  - SoC 边界：$E_{\\min} = 30\\,\\mathrm{kWh}$ 和 $E_{\\max} = 190\\,\\mathrm{kWh}$。\n  - 对称的充电/放电功率限制：对于所有 $t$，有 $|P_t| \\le 70\\,\\mathrm{kW}$。\n  - 爬坡率限制：对于所有 $t$，有 $|P_t - P_{t-1}| \\le 50\\,\\mathrm{kW}$，其中 $P_0 = 0\\,\\mathrm{kW}$。\n\n任务：\n- 仅使用能量守恒定律和所述的转换效率解释，根据上述符号约定，计算给定计划所隐含的 SoC 轨迹 $\\{E_t\\}_{t=1}^8$。\n- 在每个时间步验证三个运行约束。\n- 最后，报告一个标量：在 $t \\in \\{1,\\dots,8\\}$ 期间达到的最小 SoC，即 $\\min\\{E_1,\\dots,E_8\\}$。将您的答案四舍五入到四位有效数字。最终报告的 SoC 以 $\\mathrm{kWh}$ 为单位表示。",
            "solution": "对问题陈述进行有效性评估。提取并评估所有给定的数据、定义和约束。\n- **给定条件**：\n    - 离散时间步 $t \\in \\{0,1,\\dots,8\\}$，$\\Delta t = 1\\,\\mathrm{h}$。\n    - 状态变量：存储的能量 $E_t$，单位为 $\\mathrm{kWh}$。\n    - 控制变量：功率 $P_t$，单位为 $\\mathrm{kW}$，放电为正，充电为负。\n    - 效率：$\\eta_c = 0.96$（充电），$\\eta_d = 0.90$（放电）。\n    - 初始条件：$E_0 = 120\\,\\mathrm{kWh}$，$P_0 = 0\\,\\mathrm{kW}$。\n    - 功率计划：$\\{P_t\\}_{t=1}^8 = \\{-50, -20, 30, 60, 10, -40, -70, -20\\}\\,\\mathrm{kW}$。\n    - 约束：$30 \\le E_t \\le 190\\,\\mathrm{kWh}$， $|P_t| \\le 70\\,\\mathrm{kW}$， $|P_t - P_{t-1}| \\le 50\\,\\mathrm{kW}$。\n- **验证**：\n    - 该问题具有科学依据，基于应用于电化学储能系统标准模型的能量守恒原理。\n    - 该问题是适定的，提供了所有必要的数据和明确的目标。\n    - 语言客观、精确。\n    - 任务是计算轨迹并验证约束，这是一项标准的分析任务。给定计划可能违反约束是分析的可能结果，而不是问题陈述本身的缺陷。\n- **结论**：问题有效。\n\n求解过程如下：\n首先，我们建立离散时间荷电状态（SoC）的更新方程。在时间步 $\\Delta t$ 内，存储能量的变化量 $\\Delta E_t = E_t - E_{t-1}$ 取决于功率 $P_t$。\n- 对于充电（$P_t  0$），输入到储能系统的能量是来自电网的电能 $|P_t|\\Delta t = -P_t\\Delta t$ 乘以充电效率 $\\eta_c$。因此，$\\Delta E_t = \\eta_c(-P_t\\Delta t)$。\n- 对于放电（$P_t > 0$），为了提供 $P_t\\Delta t$ 的有用电能，储能系统必须释放等于 $(P_t\\Delta t)/\\eta_d$ 的化学能。因此，存储能量的变化量是 $\\Delta E_t = - \\frac{1}{\\eta_d}P_t\\Delta t$。\n给定 $\\Delta t=1\\,\\mathrm{h}$，更新方程为：\n$$E_t = E_{t-1} + \\Delta E_t = \\begin{cases} E_{t-1} - \\eta_c P_t  \\text{if } P_t  0 \\\\ E_{t-1} - \\frac{1}{\\eta_d} P_t  \\text{if } P_t > 0 \\\\ E_{t-1}  \\text{if } P_t = 0 \\end{cases}$$\n给定参数 $\\eta_c=0.96$ 和 $\\eta_d=0.90$。\n\n接下来，我们验证给定功率计划 $\\{P_t\\}_{t=1}^8$ 的运行约束。\n1.  **功率限制约束**：$|P_t| \\le 70\\,\\mathrm{kW}$。给定的功率计划为 $P = \\{-50, -20, 30, 60, 10, -40, -70, -20\\}$。其绝对值为 $\\{50, 20, 30, 60, 10, 40, 70, 20\\}$。最大绝对值为 $|P_7|=70\\,\\mathrm{kW}$，满足约束。所有其他值也在此限制内。此约束在所有 $t \\in \\{1,\\dots,8\\}$ 时间步都得到满足。\n\n2.  **爬坡率限制约束**：$|P_t - P_{t-1}| \\le 50\\,\\mathrm{kW}$，其中 $P_0=0\\,\\mathrm{kW}$。\n    - $t=1$ 时：$|P_1 - P_0| = |-50 - 0| = 50 \\le 50$。（满足）\n    - $t=2$ 时：$|P_2 - P_1| = |-20 - (-50)| = 30 \\le 50$。（满足）\n    - $t=3$ 时：$|P_3 - P_2| = |30 - (-20)| = 50 \\le 50$。（满足）\n    - $t=4$ 时：$|P_4 - P_3| = |60 - 30| = 30 \\le 50$。（满足）\n    - $t=5$ 时：$|P_5 - P_4| = |10 - 60| = |-50| = 50 \\le 50$。（满足）\n    - $t=6$ 时：$|P_6 - P_5| = |-40 - 10| = |-50| = 50 \\le 50$。（满足）\n    - $t=7$ 时：$|P_7 - P_6| = |-70 - (-40)| = |-30| = 30 \\le 50$。（满足）\n    - $t=8$ 时：$|P_8 - P_7| = |-20 - (-70)| = 50 \\le 50$。（满足）\n    此约束在所有 $t \\in \\{1,\\dots,8\\}$ 时间步都得到满足。\n\n现在，我们计算 SoC 轨迹 $\\{E_t\\}_{t=1}^8$ 并逐一验证 SoC 边界 $E_{\\min} = 30\\,\\mathrm{kWh}$ 和 $E_{\\max} = 190\\,\\mathrm{kWh}$。初始状态为 $E_0 = 120\\,\\mathrm{kWh}$。\n\n-   对于 $t=1$：$P_1 = -50\\,\\mathrm{kW}$（充电）。\n    $E_1 = E_0 - \\eta_c P_1 = 120 - (0.96)(-50) = 120 + 48 = 168\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 168 \\le 190$。（满足）\n\n-   对于 $t=2$：$P_2 = -20\\,\\mathrm{kW}$（充电）。\n    $E_2 = E_1 - \\eta_c P_2 = 168 - (0.96)(-20) = 168 + 19.2 = 187.2\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 187.2 \\le 190$。（满足）\n\n-   对于 $t=3$：$P_3 = 30\\,\\mathrm{kW}$（放电）。\n    $E_3 = E_2 - \\frac{1}{\\eta_d} P_3 = 187.2 - \\frac{1}{0.90}(30) = 187.2 - \\frac{100}{3} \\approx 187.2 - 33.3333 = 153.8667\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 153.8667 \\le 190$。（满足）\n\n-   对于 $t=4$：$P_4 = 60\\,\\mathrm{kW}$（放电）。\n    $E_4 = E_3 - \\frac{1}{\\eta_d} P_4 \\approx 153.8667 - \\frac{1}{0.90}(60) = 153.8667 - \\frac{200}{3} \\approx 153.8667 - 66.6667 = 87.2\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 87.2 \\le 190$。（满足）\n\n-   对于 $t=5$：$P_5 = 10\\,\\mathrm{kW}$（放电）。\n    $E_5 = E_4 - \\frac{1}{\\eta_d} P_5 = 87.2 - \\frac{1}{0.90}(10) = 87.2 - \\frac{100}{9} \\approx 87.2 - 11.1111 = 76.0889\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 76.0889 \\le 190$。（满足）\n\n-   对于 $t=6$：$P_6 = -40\\,\\mathrm{kW}$（充电）。\n    $E_6 = E_5 - \\eta_c P_6 \\approx 76.0889 - (0.96)(-40) = 76.0889 + 38.4 = 114.4889\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 114.4889 \\le 190$。（满足）\n\n-   对于 $t=7$：$P_7 = -70\\,\\mathrm{kW}$（充电）。\n    $E_7 = E_6 - \\eta_c P_7 \\approx 114.4889 - (0.96)(-70) = 114.4889 + 67.2 = 181.6889\\,\\mathrm{kWh}$。\n    约束检查：$30 \\le 181.6889 \\le 190$。（满足）\n\n-   对于 $t=8$：$P_8 = -20\\,\\mathrm{kW}$（充电）。\n    $E_8 = E_7 - \\eta_c P_8 \\approx 181.6889 - (0.96)(-20) = 181.6889 + 19.2 = 200.8889\\,\\mathrm{kWh}$。\n    约束检查：$200.8889 \\not\\le 190$。（违反：$E_8 > E_{\\max}$）\n\nSoC 轨迹 $\\{E_t\\}_{t=1}^8$（单位 $\\mathrm{kWh}$）约为 $\\{168, 187.2, 153.87, 87.2, 76.09, 114.49, 181.69, 200.89\\}$。给定的功率计划在 $t=8$ 时违反了最大 SoC 约束。\n\n最后的任务是报告在 $t \\in \\{1,\\dots,8\\}$ 期间达到的最小 SoC。通过检查轨迹，最小值为 $E_5$。\n$E_5 = 87.2 - \\frac{100}{9} = \\frac{872}{10} - \\frac{100}{9} = \\frac{436}{5} - \\frac{100}{9} = \\frac{3924-500}{45} = \\frac{3424}{45} \\approx 76.0888... \\,\\mathrm{kWh}$。\n\n问题要求将此值四舍五入到四位有效数字。\n该数字为 $76.0888...$。前四位有效数字是 $7$、$6$、$0$ 和 $8$。下一位数字是 $8$，大于或等于 $5$，因此我们将第四位数字向上取整。\n$\\min\\{E_1, \\dots, E_8\\} = E_5 \\approx 76.09\\,\\mathrm{kWh}$。",
            "answer": "$$\\boxed{76.09}$$"
        },
        {
            "introduction": "最后的这个练习  将功率平衡和组件限制等概念，整合到一个真实的系统级优化问题中。你将学习如何在满足其他设备（如提供无功功率支持的逆变器）的物理约束的同时，对发电机进行经济调度。这个练习展示了如何从确保系统稳定运行，迈向实现经济最优运行。",
            "id": "4099760",
            "problem": "一个孤岛微电网在平衡正弦稳态下运行，由两台同步发电机、一台构网型逆变器和一个固定的三相负载组成。负载需要固定的有功功率和无功功率，分别表示为 $P_{\\mathrm{L}}$ 和 $Q_{\\mathrm{L}}$。逆变器必须通过提供全部无功功率需求来确保电压支撑，并且其视在功率受到限制。在此工作点，同步发电机被控制以提供可忽略不计的无功功率。\n\n使用以下有科学依据的关系和定义作为基础：\n- 视在功率的大小由 $S = \\sqrt{P^{2} + Q^{2}}$ 给出，逆变器的视在功率约束为 $P_{\\mathrm{inv}}^{2} + Q_{\\mathrm{inv}}^{2} \\le S_{\\max}^{2}$。\n- 孤岛运行中的有功功率平衡要求 $P_{1} + P_{2} + P_{\\mathrm{inv}} = P_{\\mathrm{L}}$，其中 $P_{1}$ 和 $P_{2}$ 分别是发电机1和发电机2的有功功率设定值，$P_{\\mathrm{inv}}$ 是逆变器的有功功率设定值。\n- 经济调度被表述为在运行约束条件下，最小化凸性发电成本函数的总和。\n\n数据：\n- 负载：$P_{\\mathrm{L}} = 150\\,\\mathrm{kW}$，$Q_{\\mathrm{L}} = 60\\,\\mathrm{kVAr}$。\n- 逆变器：视在功率限制 $S_{\\max} = 100\\,\\mathrm{kVA}$；无功功率分配 $Q_{\\mathrm{inv}} = Q_{\\mathrm{L}}$；有功功率非负性 $P_{\\mathrm{inv}} \\ge 0$。\n- 发电机成本函数（货币单位/小时）：$C_{1}(P_{1}) = \\frac{1}{2}P_{1}^{2}$ 和 $C_{2}(P_{2}) = 1 \\cdot P_{2}^{2}$。\n- 发电机有功功率界限：$0 \\le P_{1} \\le 100\\,\\mathrm{kW}$ 和 $0 \\le P_{2} \\le 100\\,\\mathrm{kW}$。\n\n假设逆变器在其视在功率能力范围内提供有功功率的边际成本为零，并且可以提供与 $Q_{\\mathrm{inv}} = Q_{\\mathrm{L}}$ 一致的任何可行的 $P_{\\mathrm{inv}}$。在这些条件下，从上述基本定律和定义出发，推导两台发电机的经济调度，通过逆变器视在功率约束和有功功率平衡明确地强制执行无功功率可行性。然后，计算发电机1的最优有功功率设定值，记为 $P_{1}^{\\star}$。用 $\\mathrm{kW}$ 表示您的最终数值答案。提供精确值，不要四舍五入。",
            "solution": "问题要求在一个孤岛微电网中，找到发电机1的最优有功功率设定值，记为 $P_{1}^{\\star}$。优化目标是在一系列运行约束条件下，最小化两台同步发电机的总发电成本。\n\n需要最小化的总成本是各发电机成本函数的总和：\n$$C(P_{1}, P_{2}) = C_{1}(P_{1}) + C_{2}(P_{2}) = \\frac{1}{2}P_{1}^{2} + P_{2}^{2}$$\n该最小化问题受限于系统运行所定义的几个约束条件。\n\n首先，我们分析逆变器的约束条件。逆变器被指定供应负载的全部无功功率需求，$Q_{\\mathrm{L}} = 60\\,\\mathrm{kVAr}$。\n$$Q_{\\mathrm{inv}} = Q_{\\mathrm{L}} = 60\\,\\mathrm{kVAr}$$\n逆变器的运行受其最大视在功率 $S_{\\max} = 100\\,\\mathrm{kVA}$ 的限制。视在功率 $S$、有功功率 $P$ 和无功功率 $Q$ 之间的关系由 $S^{2} = P^{2} + Q^{2}$ 给出。对于逆变器，这可以转化为：\n$$P_{\\mathrm{inv}}^{2} + Q_{\\mathrm{inv}}^{2} \\le S_{\\max}^{2}$$\n代入 $Q_{\\mathrm{inv}}$ 和 $S_{\\max}$ 的已知值：\n$$P_{\\mathrm{inv}}^{2} + (60)^{2} \\le (100)^{2}$$\n$$P_{\\mathrm{inv}}^{2} + 3600 \\le 10000$$\n$$P_{\\mathrm{inv}}^{2} \\le 10000 - 3600$$\n$$P_{\\mathrm{inv}}^{2} \\le 6400$$\n两边取平方根得到 $|P_{\\mathrm{inv}}| \\le \\sqrt{6400}$，即 $|P_{\\mathrm{inv}}| \\le 80\\,\\mathrm{kW}$。问题还规定了逆变器有功功率的非负性约束，$P_{\\mathrm{inv}} \\ge 0$。因此，逆变器有功功率输出的可行范围是：\n$$0 \\le P_{\\mathrm{inv}} \\le 80\\,\\mathrm{kW}$$\n\n接下来，我们考虑孤岛微电网中的有功功率平衡。所有产生的有功功率之和必须等于负载消耗的总有功功率。\n$$P_{1} + P_{2} + P_{\\mathrm{inv}} = P_{\\mathrm{L}}$$\n给定 $P_{\\mathrm{L}} = 150\\,\\mathrm{kW}$，我们有：\n$$P_{1} + P_{2} + P_{\\mathrm{inv}} = 150$$\n令 $P_{G} = P_{1} + P_{2}$ 为两台同步发电机提供的总有功功率。功率平衡方程可以重写为 $P_{G} + P_{\\mathrm{inv}} = 150$，或 $P_{G} = 150 - P_{\\mathrm{inv}}$。\n\n我们可以使用 $P_{\\mathrm{inv}}$ 的可行范围来确定总发电机输出 $P_{G}$ 的所需范围。\n当 $P_{\\mathrm{inv}}$ 处于其最小值，$P_{\\mathrm{inv}} = 0$ 时，发电机必须提供 $P_{G} = 150 - 0 = 150\\,\\mathrm{kW}$。\n当 $P_{\\mathrm{inv}}$ 处于其最大值，$P_{\\mathrm{inv}} = 80\\,\\mathrm{kW}$ 时，发电机必须提供 $P_{G} = 150 - 80 = 70\\,\\mathrm{kW}$。\n因此，来自发电机的总有功功率必须在此范围内：\n$$70 \\le P_{G} \\le 150\\,\\mathrm{kW}$$\n\n优化问题是在最小成本下调度 $P_{1}$ 和 $P_{2}$ 以满足总需求 $P_{G}$。题目说明逆变器的边际成本为零，所以需要最小化的总成本仅为同步发电机的成本 $C(P_{1}, P_{2})$。这个成本函数 $C_{G}(P_{G})$ 是总发电功率 $P_{G}$ 的增函数。为了最小化系统的总成本，我们必须选择需要昂贵发电机提供尽可能少的总功率的工作点。这对应于 $P_{G}$ 可行范围内的最小值，即 $P_{G}^{\\star} = 70\\,\\mathrm{kW}$。这个工作点充分利用了逆变器的“免费”有功功率容量。\n\n现在，我们必须找到将这个总功率 $P_{G}^{\\star} = 70\\,\\mathrm{kW}$ 在发电机1和发电机2之间的最优分配。这是一个经典的经济调度问题。经济调度原则指出，为达到最低成本，所有参与调度的发电机在其运行界限内，其增量成本（或边际成本）应相等。\n\n每台发电机的边际成本是其成本函数对其功率输出的导数。\n对于发电机1：$\\frac{dC_{1}}{dP_{1}} = \\frac{d}{dP_{1}}\\left(\\frac{1}{2}P_{1}^{2}\\right) = P_{1}$\n对于发电机2：$\\frac{dC_{2}}{dP_{2}} = \\frac{d}{dP_{2}}\\left(P_{2}^{2}\\right) = 2P_{2}$\n\n令边际成本相等：\n$$P_{1} = 2P_{2}$$\n我们得到一个关于 $P_{1}$ 和 $P_{2}$ 的二元线性方程组：\n1. $P_{1} + P_{2} = P_{G}^{\\star} = 70$\n2. $P_{1} = 2P_{2}$\n\n将第二个方程代入第一个方程：\n$$(2P_{2}) + P_{2} = 70$$\n$$3P_{2} = 70$$\n$$P_{2}^{\\star} = \\frac{70}{3}\\,\\mathrm{kW}$$\n现在，求解 $P_{1}^{\\star}$：\n$$P_{1}^{\\star} = 2P_{2}^{\\star} = 2 \\left(\\frac{70}{3}\\right) = \\frac{140}{3}\\,\\mathrm{kW}$$\n\n最后，我们必须验证该解是否满足每台发电机的有功功率界限：\n- 对于发电机1：$0 \\le P_{1}^{\\star} \\le 100\\,\\mathrm{kW}$。由于 $P_{1}^{\\star} = \\frac{140}{3} \\approx 46.67$，条件 $0 \\le \\frac{140}{3} \\le 100$ 得到满足。\n- 对于发电机2：$0 \\le P_{2}^{\\star} \\le 100\\,\\mathrm{kW}$。由于 $P_{2}^{\\star} = \\frac{70}{3} \\approx 23.33$，条件 $0 \\le \\frac{70}{3} \\le 100$ 得到满足。\n\n计算出的设定值是可行的。发电机1的最优有功功率设定值为 $\\frac{140}{3}\\,\\mathrm{kW}$。",
            "answer": "$$\\boxed{\\frac{140}{3}}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Energy storage is a cornerstone of reliable islanded microgrids, providing the flexibility to balance generation and load. This first exercise focuses on the fundamental modeling of a battery energy storage system (BESS) by applying the principle of conservation of energy in a discrete-time simulation. By tracking the state of charge (SoC) while accounting for different charging and discharging efficiencies, you will develop a core skill for assessing the operational feasibility of any dispatch schedule and ensuring the BESS operates within its safe physical limits .",
            "id": "4099706",
            "problem": "Consider an islanded microgrid with a single electrochemical Energy Storage System (ESS) modeled in discrete time. Let the state of charge (SoC) be the stored energy $E_t$ in $\\mathrm{kWh}$ at the end of time step $t \\in \\{0,1,\\dots,8\\}$. The discrete-time step is $\\Delta t = 1\\,\\mathrm{h}$. The ESS follows conservation of energy with separate charging and discharging conversion efficiencies: when charging, a fraction $\\eta_c$ of the electrical input is stored; when discharging, extracting $1\\,\\mathrm{kWh}$ of useful electrical energy reduces the SoC by $1/\\eta_d\\,\\mathrm{kWh}$. Adopt the sign convention that the scheduled ESS power $P_t$ (in $\\mathrm{kW}$) is positive when discharging and negative when charging. Assume no parasitic self-discharge or auxiliary loads.\n\nParameters:\n- Charging efficiency $\\eta_c = 0.96$ and discharging efficiency $\\eta_d = 0.90$.\n- Initial state of charge $E_0 = 120\\,\\mathrm{kWh}$.\n- Time step $\\Delta t = 1\\,\\mathrm{h}$.\n- Power schedule over $t=1,\\dots,8$ (in $\\mathrm{kW}$): $P_1=-50$, $P_2=-20$, $P_3=30$, $P_4=60$, $P_5=10$, $P_6=-40$, $P_7=-70$, $P_8=-20$.\n- Operational constraints:\n  - SoC bounds: $E_{\\min} = 30\\,\\mathrm{kWh}$ and $E_{\\max} = 190\\,\\mathrm{kWh}$.\n  - Symmetric charge/discharge power limit: $|P_t| \\le 70\\,\\mathrm{kW}$ for all $t$.\n  - Ramp-rate limit: $|P_t - P_{t-1}| \\le 50\\,\\mathrm{kW}$ for all $t$, with $P_0 = 0\\,\\mathrm{kW}$.\n\nTasks:\n- Using only the conservation of energy and the stated conversion-efficiency interpretation, compute the SoC trajectory $\\{E_t\\}_{t=1}^8$ implied by the given schedule, with the sign convention described above.\n- Verify the three operational constraints at each time step.\n- Finally, report a single scalar: the minimum SoC attained over $t \\in \\{1,\\dots,8\\}$, that is $\\min\\{E_1,\\dots,E_8\\}$. Round your answer to four significant figures. Express the final reported SoC in $\\mathrm{kWh}$.",
            "solution": "The problem statement is evaluated for validity. All given data, definitions, and constraints are extracted and assessed.\n- **Givens**:\n    - Discrete time steps $t \\in \\{0,1,\\dots,8\\}$ with $\\Delta t = 1\\,\\mathrm{h}$.\n    - State variable: Stored energy $E_t$ in $\\mathrm{kWh}$.\n    - Control variable: Power $P_t$ in $\\mathrm{kW}$, positive for discharging, negative for charging.\n    - Efficiencies: $\\eta_c = 0.96$ (charging), $\\eta_d = 0.90$ (discharging).\n    - Initial conditions: $E_0 = 120\\,\\mathrm{kWh}$, $P_0 = 0\\,\\mathrm{kW}$.\n    - Power schedule: $\\{P_t\\}_{t=1}^8 = \\{-50, -20, 30, 60, 10, -40, -70, -20\\}\\,\\mathrm{kW}$.\n    - Constraints: $30 \\le E_t \\le 190\\,\\mathrm{kWh}$, $|P_t| \\le 70\\,\\mathrm{kW}$, $|P_t - P_{t-1}| \\le 50\\,\\mathrm{kW}$.\n- **Validation**:\n    - The problem is scientifically grounded, based on the principle of conservation of energy applied to a standard model of an electrochemical storage system.\n    - The problem is well-posed, providing all necessary data and a clear objective.\n    - The language is objective and precise.\n    - The task is to compute a trajectory and verify constraints, which is a standard analysis task. The potential violation of a constraint by the given schedule is a possible outcome of the analysis, not a flaw in the problem statement itself.\n- **Verdict**: The problem is valid.\n\nThe solution proceeds as follows:\nFirst, we formulate the discrete-time state of charge (SoC) update equation. The change in stored energy, $\\Delta E_t = E_t - E_{t-1}$, over a time step $\\Delta t$ depends on the power $P_t$.\n- For charging ($P_t  0$), the energy input to storage is the electrical energy drawn from the grid, $|P_t|\\Delta t = -P_t\\Delta t$, multiplied by the charging efficiency $\\eta_c$. Thus, $\\Delta E_t = \\eta_c(-P_t\\Delta t)$.\n- For discharging ($P_t > 0$), to deliver useful electrical energy $P_t\\Delta t$, the storage must release an amount of chemical energy equal to $(P_t\\Delta t)/\\eta_d$. Thus, the change in stored energy is $\\Delta E_t = - \\frac{1}{\\eta_d}P_t\\Delta t$.\nGiven $\\Delta t=1\\,\\mathrm{h}$, the update equation is:\n$$E_t = E_{t-1} + \\Delta E_t = \\begin{cases} E_{t-1} - \\eta_c P_t  \\text{if } P_t  0 \\\\ E_{t-1} - \\frac{1}{\\eta_d} P_t  \\text{if } P_t  0 \\\\ E_{t-1}  \\text{if } P_t = 0 \\end{cases}$$\nWith the given parameters $\\eta_c=0.96$ and $\\eta_d=0.90$.\n\nNext, we verify the operational constraints for the given power schedule $\\{P_t\\}_{t=1}^8$.\n1.  **Power limit constraint**: $|P_t| \\le 70\\,\\mathrm{kW}$. The given power schedule is $P = \\{-50, -20, 30, 60, 10, -40, -70, -20\\}$. The absolute values are $\\{50, 20, 30, 60, 10, 40, 70, 20\\}$. The maximum absolute value is $|P_7|=70\\,\\mathrm{kW}$, which satisfies the constraint. All other values are also within the limit. This constraint is met for all $t \\in \\{1,\\dots,8\\}$.\n\n2.  **Ramp-rate limit constraint**: $|P_t - P_{t-1}| \\le 50\\,\\mathrm{kW}$, with $P_0=0\\,\\mathrm{kW}$.\n    - $t=1$: $|P_1 - P_0| = |-50 - 0| = 50 \\le 50$. (Satisfied)\n    - $t=2$: $|P_2 - P_1| = |-20 - (-50)| = 30 \\le 50$. (Satisfied)\n    - $t=3$: $|P_3 - P_2| = |30 - (-20)| = 50 \\le 50$. (Satisfied)\n    - $t=4$: $|P_4 - P_3| = |60 - 30| = 30 \\le 50$. (Satisfied)\n    - $t=5$: $|P_5 - P_4| = |10 - 60| = |-50| = 50 \\le 50$. (Satisfied)\n    - $t=6$: $|P_6 - P_5| = |-40 - 10| = |-50| = 50 \\le 50$. (Satisfied)\n    - $t=7$: $|P_7 - P_6| = |-70 - (-40)| = |-30| = 30 \\le 50$. (Satisfied)\n    - $t=8$: $|P_8 - P_7| = |-20 - (-70)| = 50 \\le 50$. (Satisfied)\n    This constraint is met for all $t \\in \\{1,\\dots,8\\}$.\n\nNow, we compute the SoC trajectory $\\{E_t\\}_{t=1}^8$ and verify the SoC bounds $E_{\\min} = 30\\,\\mathrm{kWh}$ and $E_{\\max} = 190\\,\\mathrm{kWh}$ at each step. The initial state is $E_0 = 120\\,\\mathrm{kWh}$.\n\n-   For $t=1$: $P_1 = -50\\,\\mathrm{kW}$ (charging).\n    $E_1 = E_0 - \\eta_c P_1 = 120 - (0.96)(-50) = 120 + 48 = 168\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 168 \\le 190$. (Satisfied)\n\n-   For $t=2$: $P_2 = -20\\,\\mathrm{kW}$ (charging).\n    $E_2 = E_1 - \\eta_c P_2 = 168 - (0.96)(-20) = 168 + 19.2 = 187.2\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 187.2 \\le 190$. (Satisfied)\n\n-   For $t=3$: $P_3 = 30\\,\\mathrm{kW}$ (discharging).\n    $E_3 = E_2 - \\frac{1}{\\eta_d} P_3 = 187.2 - \\frac{1}{0.90}(30) = 187.2 - \\frac{100}{3} \\approx 187.2 - 33.3333 = 153.8667\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 153.8667 \\le 190$. (Satisfied)\n\n-   For $t=4$: $P_4 = 60\\,\\mathrm{kW}$ (discharging).\n    $E_4 = E_3 - \\frac{1}{\\eta_d} P_4 \\approx 153.8667 - \\frac{1}{0.90}(60) = 153.8667 - \\frac{200}{3} \\approx 153.8667 - 66.6667 = 87.2\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 87.2 \\le 190$. (Satisfied)\n\n-   For $t=5$: $P_5 = 10\\,\\mathrm{kW}$ (discharging).\n    $E_5 = E_4 - \\frac{1}{\\eta_d} P_5 = 87.2 - \\frac{1}{0.90}(10) = 87.2 - \\frac{100}{9} \\approx 87.2 - 11.1111 = 76.0889\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 76.0889 \\le 190$. (Satisfied)\n\n-   For $t=6$: $P_6 = -40\\,\\mathrm{kW}$ (charging).\n    $E_6 = E_5 - \\eta_c P_6 \\approx 76.0889 - (0.96)(-40) = 76.0889 + 38.4 = 114.4889\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 114.4889 \\le 190$. (Satisfied)\n\n-   For $t=7$: $P_7 = -70\\,\\mathrm{kW}$ (charging).\n    $E_7 = E_6 - \\eta_c P_7 \\approx 114.4889 - (0.96)(-70) = 114.4889 + 67.2 = 181.6889\\,\\mathrm{kWh}$.\n    Constraint check: $30 \\le 181.6889 \\le 190$. (Satisfied)\n\n-   For $t=8$: $P_8 = -20\\,\\mathrm{kW}$ (charging).\n    $E_8 = E_7 - \\eta_c P_8 \\approx 181.6889 - (0.96)(-20) = 181.6889 + 19.2 = 200.8889\\,\\mathrm{kWh}$.\n    Constraint check: $200.8889 \\not\\le 190$. (VIOLATED: $E_8  E_{\\max}$)\n\nThe SoC trajectory $\\{E_t\\}_{t=1}^8$ in $\\mathrm{kWh}$ is approximately $\\{168, 187.2, 153.87, 87.2, 76.09, 114.49, 181.69, 200.89\\}$. The given power schedule violates the maximum SoC constraint at $t=8$.\n\nThe final task is to report the minimum SoC attained over $t \\in \\{1,\\dots,8\\}$. By inspection of the trajectory, the minimum value is $E_5$.\n$E_5 = 87.2 - \\frac{100}{9} = \\frac{872}{10} - \\frac{100}{9} = \\frac{436}{5} - \\frac{100}{9} = \\frac{3924-500}{45} = \\frac{3424}{45} \\approx 76.0888... \\,\\mathrm{kWh}$.\n\nThe problem requires rounding this value to four significant figures.\nThe number is $76.0888...$. The first four significant figures are $7$, $6$, $0$, and $8$. The next digit is $8$, which is greater than or equal to $5$, so we round up the fourth digit.\n$\\min\\{E_1, \\dots, E_8\\} = E_5 \\approx 76.09\\,\\mathrm{kWh}$.",
            "answer": "$$\\boxed{76.09}$$"
        },
        {
            "introduction": "In an islanded microgrid, there is no external grid to impose a stiff frequency reference, so generating units must coordinate to maintain stability. This practice explores frequency-droop control, a decentralized strategy that enables parallel generators to autonomously share load changes in proportion to their capabilities. By deriving and applying the steady-state droop relationship, you will see precisely how a sudden load increase is balanced by the collective response of the generators, resulting in a new stable operating frequency. This analysis is essential for designing resilient microgrids that can ride through disturbances .",
            "id": "4099723",
            "problem": "An islanded microgrid is supplied by three dispatchable sources: one synchronous generator and two inverter-based Distributed Energy Resources (DERs). In steady-state islanded operation, the microgrid frequency is uniform across all sources, and active power balance must hold such that the sum of generation equals the load. Each source implements a proportional frequency–active power droop control in which the operating frequency decreases linearly as its own active power increases above its nominal value, with slope $m_i$ measured in $\\mathrm{Hz}/\\mathrm{MW}$. The nominal frequency is $f^{\\ast}$. Let the sources be indexed by $i \\in \\{1,2,3\\}$, with slopes $m_1$, $m_2$, and $m_3$. Let the nominal active powers be $P_1^{\\ast}$, $P_2^{\\ast}$, and $P_3^{\\ast}$ and the actual active powers be $P_1$, $P_2$, and $P_3$, respectively. A step increase in net load of magnitude $\\Delta P_{\\mathrm{load}}$ above the scheduled generation causes a constant active-power error that is shared among the sources through their droop controls. Assume negligible deadbands, perfect measurement of active power, no secondary control action, and that the microgrid reaches a static equilibrium with a constant frequency offset $\\Delta f$ relative to $f^{\\ast}$ and constant active-power deviations for each source.\n\nGiven:\n- $f^{\\ast} = 50\\,\\mathrm{Hz}$,\n- $m_1 = 0.05\\,\\mathrm{Hz}/\\mathrm{MW}$, $m_2 = 0.08\\,\\mathrm{Hz}/\\mathrm{MW}$, $m_3 = 0.10\\,\\mathrm{Hz}/\\mathrm{MW}$,\n- $\\Delta P_{\\mathrm{load}} = 0.90\\,\\mathrm{MW}$,\n\nuse first principles of steady-state power balance and the proportional droop concept to derive an expression for $\\Delta f$ in terms of $\\Delta P_{\\mathrm{load}}$ and $\\{m_i\\}_{i=1}^{3}$, and then compute its numerical value. Round your final numerical answer to four significant figures. Express the final frequency offset in $\\mathrm{Hz}$.",
            "solution": "The problem requires the derivation of the steady-state frequency offset, $\\Delta f$, in an islanded microgrid following a load increase, based on the principles of droop control and power balance.\n\nFirst, we formalize the proportional frequency–active power droop control characteristic for each source $i$. The problem states that the operating frequency, $f$, decreases linearly from the nominal frequency, $f^{\\ast}$, as the active power output, $P_i$, increases above its nominal value, $P_i^{\\ast}$. The slope of this relationship is given by $m_i  0$. This can be expressed mathematically as:\n$$f - f^{\\ast} = -m_i (P_i - P_i^{\\ast})$$\nLet the frequency offset be $\\Delta f = f - f^{\\ast}$ and the active power deviation for source $i$ be $\\Delta P_i = P_i - P_i^{\\ast}$. In the islanded microgrid, the frequency is uniform for all sources in steady-state. Therefore, the droop equation for each source is:\n$$\\Delta f = -m_i \\Delta P_i \\quad \\text{for } i \\in \\{1, 2, 3\\}$$\nThis equation establishes the relationship between the common frequency offset and the individual power deviation of each source. From this, we can express the power deviation of each source as a function of the frequency offset:\n$$\\Delta P_i = -\\frac{\\Delta f}{m_i}$$\n\nSecond, we apply the principle of active power balance. Before the load change, the total generation from the three sources equals the initial load. The initial scheduled generation is $\\sum_{i=1}^{3} P_i^{\\ast}$. A step increase in load of magnitude $\\Delta P_{\\mathrm{load}}$ occurs. In the new steady-state equilibrium, the total active power generated by the three sources must equal the new total load. Let the new active power outputs be $P_1$, $P_2$, and $P_3$. The new total load is $\\left(\\sum_{i=1}^{3} P_i^{\\ast}\\right) + \\Delta P_{\\mathrm{load}}$.\nThe power balance equation is:\n$$\\sum_{i=1}^{3} P_i = \\left(\\sum_{i=1}^{3} P_i^{\\ast}\\right) + \\Delta P_{\\mathrm{load}}$$\nTo express this in terms of power deviations, we rearrange the equation:\n$$\\sum_{i=1}^{3} P_i - \\sum_{i=1}^{3} P_i^{\\ast} = \\Delta P_{\\mathrm{load}}$$\n$$\\sum_{i=1}^{3} (P_i - P_i^{\\ast}) = \\Delta P_{\\mathrm{load}}$$\nUsing our definition of $\\Delta P_i$, this becomes:\n$$\\sum_{i=1}^{3} \\Delta P_i = \\Delta P_{\\mathrm{load}}$$\nThis equation signifies that the total increase in generation from all sources must exactly match the increase in load.\n\nThird, we combine the droop control and power balance equations to derive the expression for $\\Delta f$. We substitute the expression for $\\Delta P_i$ from the droop characteristic into the power balance equation:\n$$\\sum_{i=1}^{3} \\left(-\\frac{\\Delta f}{m_i}\\right) = \\Delta P_{\\mathrm{load}}$$\nSince $\\Delta f$ is a constant common to all sources, it can be factored out of the summation:\n$$-\\Delta f \\sum_{i=1}^{3} \\frac{1}{m_i} = \\Delta P_{\\mathrm{load}}$$\nFinally, we solve for the frequency offset $\\Delta f$:\n$$\\Delta f = - \\frac{\\Delta P_{\\mathrm{load}}}{\\sum_{i=1}^{3} \\frac{1}{m_i}}$$\nThis is the general expression for the steady-state frequency offset in terms of the load increase and the droop slopes of the participating sources. The negative sign correctly indicates that an increase in load ($\\Delta P_{\\mathrm{load}}  0$) results in a decrease in frequency ($\\Delta f  0$).\n\nNow, we compute the numerical value of $\\Delta f$ using the given data:\n- $\\Delta P_{\\mathrm{load}} = 0.90\\,\\mathrm{MW}$\n- $m_1 = 0.05\\,\\mathrm{Hz}/\\mathrm{MW}$\n- $m_2 = 0.08\\,\\mathrm{Hz}/\\mathrm{MW}$\n- $m_3 = 0.10\\,\\mathrm{Hz}/\\mathrm{MW}$\n\nFirst, we calculate the sum of the reciprocal droop slopes:\n$$\\sum_{i=1}^{3} \\frac{1}{m_i} = \\frac{1}{m_1} + \\frac{1}{m_2} + \\frac{1}{m_3}$$\n$$\\sum_{i=1}^{3} \\frac{1}{m_i} = \\frac{1}{0.05} + \\frac{1}{0.08} + \\frac{1}{0.10}$$\n$$\\sum_{i=1}^{3} \\frac{1}{m_i} = 20 + 12.5 + 10 = 42.5\\,\\mathrm{MW}/\\mathrm{Hz}$$\nThe quantity $\\sum \\frac{1}{m_i}$ can be interpreted as the equivalent droop stiffness of the entire microgrid.\n\nNow, we substitute this value and $\\Delta P_{\\mathrm{load}}$ into the derived expression for $\\Delta f$:\n$$\\Delta f = - \\frac{0.90}{42.5}$$\n$$\\Delta f = -0.02117647... \\,\\mathrm{Hz}$$\nThe problem requires the answer to be rounded to four significant figures.\nThe first four significant figures are $2$, $1$, $1$, and $7$. The digit following the $7$ is $6$, so we round the $7$ up to $8$.\n$$\\Delta f \\approx -0.02118\\,\\mathrm{Hz}$$",
            "answer": "$$\\boxed{-0.02118}$$"
        },
        {
            "introduction": "Operating a microgrid is not just about technical stability; it is also about economic efficiency. This final practice moves from control to optimization, challenging you to find the most cost-effective way to run the system. You will perform an economic dispatch for multiple generators, but with a critical real-world twist: the physical limitations of a grid-forming inverter, specifically its apparent power ($S$) capacity, constrain the entire optimization problem. This exercise  illustrates the tight coupling between the physical, power-electronic constraints of modern grid assets and the economic operation of the system as a whole.",
            "id": "4099760",
            "problem": "An islanded microgrid operates in balanced, sinusoidal steady state and comprises two synchronous generators, a grid-forming inverter, and a fixed three-phase load. The load demands fixed active and reactive powers, denoted by $P_{\\mathrm{L}}$ and $Q_{\\mathrm{L}}$. The inverter must ensure voltage support by supplying the entire reactive power demand, and its apparent power is limited. The synchronous generators are controlled to provide negligible reactive power at this operating point.\n\nUse the following scientifically grounded relationships and definitions as the base:\n- The apparent power magnitude is given by $S = \\sqrt{P^{2} + Q^{2}}$ and the inverter apparent power constraint is $P_{\\mathrm{inv}}^{2} + Q_{\\mathrm{inv}}^{2} \\le S_{\\max}^{2}$.\n- Active power balance in islanded operation requires $P_{1} + P_{2} + P_{\\mathrm{inv}} = P_{\\mathrm{L}}$, where $P_{1}$ and $P_{2}$ are the active power setpoints of Generator $1$ and Generator $2$, respectively, and $P_{\\mathrm{inv}}$ is the inverter active power setpoint.\n- Economic dispatch is formulated as minimizing the sum of convex generation cost functions subject to operational constraints.\n\nData:\n- Load: $P_{\\mathrm{L}} = 150\\,\\mathrm{kW}$, $Q_{\\mathrm{L}} = 60\\,\\mathrm{kVAr}$.\n- Inverter: apparent power limit $S_{\\max} = 100\\,\\mathrm{kVA}$; reactive power assignment $Q_{\\mathrm{inv}} = Q_{\\mathrm{L}}$; active power nonnegativity $P_{\\mathrm{inv}} \\ge 0$.\n- Generator cost functions (monetary units per hour): $C_{1}(P_{1}) = \\frac{1}{2}P_{1}^{2}$ and $C_{2}(P_{2}) = 1 \\cdot P_{2}^{2}$.\n- Generator active power bounds: $0 \\le P_{1} \\le 100\\,\\mathrm{kW}$ and $0 \\le P_{2} \\le 100\\,\\mathrm{kW}$.\n\nAssume the inverter has zero marginal cost for active power provision within its apparent power capability and is available to supply any feasible $P_{\\mathrm{inv}}$ consistent with $Q_{\\mathrm{inv}} = Q_{\\mathrm{L}}$. Under these conditions, derive the economic dispatch for the two generators starting from the above fundamental laws and definitions, explicitly enforcing reactive power feasibility via the inverter apparent power constraint, and the active power balance. Then, compute the optimal active power setpoint for Generator $1$, denoted $P_{1}^{\\star}$. Express your final numerical answer in $\\mathrm{kW}$. Provide the exact value; do not round.",
            "solution": "The problem requires finding the optimal active power setpoint for Generator $1$, denoted $P_{1}^{\\star}$, in an islanded microgrid. The optimization objective is to minimize the total generation cost from the two synchronous generators, subject to a set of operational constraints.\n\nThe total cost to be minimized is the sum of the individual generator cost functions:\n$$C(P_{1}, P_{2}) = C_{1}(P_{1}) + C_{2}(P_{2}) = \\frac{1}{2}P_{1}^{2} + P_{2}^{2}$$\nThis minimization is subject to several constraints defined by the system's operation.\n\nFirst, we analyze the constraints on the inverter. The inverter is assigned to supply the entire reactive power demand of the load, $Q_{\\mathrm{L}} = 60\\,\\mathrm{kVAr}$.\n$$Q_{\\mathrm{inv}} = Q_{\\mathrm{L}} = 60\\,\\mathrm{kVAr}$$\nThe inverter's operation is constrained by its maximum apparent power, $S_{\\max} = 100\\,\\mathrm{kVA}$. The relationship between apparent power $S$, active power $P$, and reactive power $Q$ is given by $S^{2} = P^{2} + Q^{2}$. For the inverter, this translates to:\n$$P_{\\mathrm{inv}}^{2} + Q_{\\mathrm{inv}}^{2} \\le S_{\\max}^{2}$$\nSubstituting the known values for $Q_{\\mathrm{inv}}$ and $S_{\\max}$:\n$$P_{\\mathrm{inv}}^{2} + (60)^{2} \\le (100)^{2}$$\n$$P_{\\mathrm{inv}}^{2} + 3600 \\le 10000$$\n$$P_{\\mathrm{inv}}^{2} \\le 10000 - 3600$$\n$$P_{\\mathrm{inv}}^{2} \\le 6400$$\nTaking the square root of both sides gives $|P_{\\mathrm{inv}}| \\le \\sqrt{6400}$, which is $|P_{\\mathrm{inv}}| \\le 80\\,\\mathrm{kW}$. The problem also specifies a nonnegativity constraint for the inverter's active power, $P_{\\mathrm{inv}} \\ge 0$. Therefore, the feasible range for the inverter's active power output is:\n$$0 \\le P_{\\mathrm{inv}} \\le 80\\,\\mathrm{kW}$$\n\nNext, we consider the active power balance in the islanded microgrid. The sum of all active power generated must equal the total active power consumed by the load.\n$$P_{1} + P_{2} + P_{\\mathrm{inv}} = P_{\\mathrm{L}}$$\nGiven $P_{\\mathrm{L}} = 150\\,\\mathrm{kW}$, we have:\n$$P_{1} + P_{2} + P_{\\mathrm{inv}} = 150$$\nLet $P_{G} = P_{1} + P_{2}$ be the total active power supplied by the two synchronous generators. The power balance equation can be rewritten as $P_{G} + P_{\\mathrm{inv}} = 150$, or $P_{G} = 150 - P_{\\mathrm{inv}}$.\n\nWe can use the feasible range for $P_{\\mathrm{inv}}$ to determine the required range for the total generator output $P_{G}$.\nWhen $P_{\\mathrm{inv}}$ is at its minimum, $P_{\\mathrm{inv}} = 0$, the generators must supply $P_{G} = 150 - 0 = 150\\,\\mathrm{kW}$.\nWhen $P_{\\mathrm{inv}}$ is at its maximum, $P_{\\mathrm{inv}} = 80\\,\\mathrm{kW}$, the generators must supply $P_{G} = 150 - 80 = 70\\,\\mathrm{kW}$.\nThus, the total active power from the generators must be in the range:\n$$70 \\le P_{G} \\le 150\\,\\mathrm{kW}$$\n\nThe optimization problem is to dispatch $P_{1}$ and $P_{2}$ to meet a total demand $P_{G}$ at minimum cost. The inverter is stated to have zero marginal cost, so the total cost to be minimized is solely the cost of the synchronous generators, $C(P_{1}, P_{2})$. This cost function, $C_{G}(P_{G})$, is an increasing function of the total power generated, $P_{G}$. To minimize the overall cost for the system, we must choose the operating point that requires the minimum possible total power from the costly generators. This corresponds to the minimum value in the feasible range for $P_{G}$, which is $P_{G}^{\\star} = 70\\,\\mathrm{kW}$. This operating point fully utilizes the \"free\" active power capacity of the inverter.\n\nNow, we must find the optimal distribution of this total power $P_{G}^{\\star} = 70\\,\\mathrm{kW}$ between Generator $1$ and Generator $2$. This is a classic economic dispatch problem. The principle of economic dispatch states that for the minimum cost, the incremental costs (or marginal costs) of all dispatched generators should be equal, provided the generators are operating within their bounds.\n\nThe marginal cost for each generator is the derivative of its cost function with respect to its power output.\nFor Generator $1$: $\\frac{dC_{1}}{dP_{1}} = \\frac{d}{dP_{1}}\\left(\\frac{1}{2}P_{1}^{2}\\right) = P_{1}$\nFor Generator $2$: $\\frac{dC_{2}}{dP_{2}} = \\frac{d}{dP_{2}}\\left(P_{2}^{2}\\right) = 2P_{2}$\n\nEquating the marginal costs:\n$$P_{1} = 2P_{2}$$\nWe have a system of two linear equations for $P_{1}$ and $P_{2}$:\n1. $P_{1} + P_{2} = P_{G}^{\\star} = 70$\n2. $P_{1} = 2P_{2}$\n\nSubstitute the second equation into the first:\n$$(2P_{2}) + P_{2} = 70$$\n$$3P_{2} = 70$$\n$$P_{2}^{\\star} = \\frac{70}{3}\\,\\mathrm{kW}$$\nNow, solve for $P_{1}^{\\star}$:\n$$P_{1}^{\\star} = 2P_{2}^{\\star} = 2 \\left(\\frac{70}{3}\\right) = \\frac{140}{3}\\,\\mathrm{kW}$$\n\nFinally, we must verify that this solution respects the active power bounds for each generator:\n- For Generator $1$: $0 \\le P_{1}^{\\star} \\le 100\\,\\mathrm{kW}$. Since $P_{1}^{\\star} = \\frac{140}{3} \\approx 46.67$, the condition $0 \\le \\frac{140}{3} \\le 100$ is satisfied.\n- For Generator $2$: $0 \\le P_{2}^{\\star} \\le 100\\,\\mathrm{kW}$. Since $P_{2}^{\\star} = \\frac{70}{3} \\approx 23.33$, the condition $0 \\le \\frac{70}{3} \\le 100$ is satisfied.\n\nThe calculated setpoints are feasible. The optimal active power setpoint for Generator $1$ is $\\frac{140}{3}\\,\\mathrm{kW}$.",
            "answer": "$$\\boxed{\\frac{140}{3}}$$"
        }
    ]
}
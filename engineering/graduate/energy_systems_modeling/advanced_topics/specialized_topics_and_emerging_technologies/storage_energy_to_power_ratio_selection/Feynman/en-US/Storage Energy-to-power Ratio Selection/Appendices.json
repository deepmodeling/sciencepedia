{
    "hands_on_practices": [
        {
            "introduction": "Let's start by translating abstract energy storage requirements into the physical reality of an engineering project. This exercise challenges you to derive the necessary reservoir volume for a pumped-storage hydropower plant based on its power rating and required discharge duration, $\\tau$ . By working from fundamental definitions of energy, power, and efficiency, you will solidify your understanding of how the energy-to-power ratio directly informs the physical scale and design of a storage facility.",
            "id": "4126531",
            "problem": "A closed-loop pumped-storage hydropower plant operates between an upper and a lower reservoir with a constant effective head $H$ (measured as the vertical difference between the free surfaces, including static and average dynamic losses folded into an effective head). Water of density $\\rho$ is released from the upper reservoir through a turbine-generator whose overall discharge-stage efficiency (hydraulic-to-electric) is $\\eta$. The plant is scheduled to generate at a constant electrical power $P$ for a duration $\\tau$, and spillage, leakage, and evaporative losses are negligible over the interval. Gravitational acceleration is $g$. \n\nStarting only from the definitions that power is the time rate of energy conversion and that gravitational potential energy change for a volume $V$ of incompressible fluid of density $\\rho$ moving across head $H$ is $\\rho g H V$, derive the minimum usable reservoir volume $V$ that must be drawn down to meet the schedule. Then, using $\\tau = 8\\,\\mathrm{h}$ and $P = 500\\,\\mathrm{MW}$, provide a single closed-form analytic expression for $V$ in terms of $H$, $\\rho$, $\\eta$, and $g$. Express the final volume in $\\mathrm{m^3}$. No numerical rounding is required beyond exact conversion of hours to seconds and megawatts to watts.",
            "solution": "The goal is to determine the volume $V$ of water that must be discharged from the upper reservoir to deliver the scheduled electrical energy over the interval $\\tau$ at constant power $P$. The foundational relations are:\n- Power is the time rate of doing work (or converting energy), so for constant electrical power over a duration, the electrical energy delivered is $E_{\\mathrm{e}} = P \\tau$.\n- The gravitational potential energy associated with moving a volume $V$ of an incompressible fluid of density $\\rho$ across a head $H$ is $E_{\\mathrm{hyd}} = \\rho g H V$.\n- The overall discharge-stage efficiency, from hydraulic potential energy to electrical energy, is $\\eta$, so the electrical energy delivered satisfies $E_{\\mathrm{e}} = \\eta E_{\\mathrm{hyd}}$.\n\nWe now use these to derive $V$. First, compute the required electrical energy:\n$$\nE_{\\mathrm{e}} = \\int_{0}^{\\tau} P \\,\\mathrm{d}t = P \\tau,\n$$\nsince $P$ is constant over the interval $[0,\\tau]$. The available hydraulic energy from volume $V$ across head $H$ is\n$$\nE_{\\mathrm{hyd}} = \\rho g H V.\n$$\nWith an overall discharge-stage efficiency $\\eta$, the electrical energy produced is\n$$\nE_{\\mathrm{e}} = \\eta E_{\\mathrm{hyd}} = \\eta \\rho g H V.\n$$\nEquating the two expressions for $E_{\\mathrm{e}}$ and solving for $V$ gives\n$$\nP \\tau = \\eta \\rho g H V \\quad \\Rightarrow \\quad V = \\frac{P \\tau}{\\eta \\rho g H}.\n$$\n\nTo incorporate the numerical schedule while keeping parameters symbolic, convert the given time and power to coherent units. The duration is $\\tau = 8\\,\\mathrm{h} = 8 \\times 3600\\,\\mathrm{s} = 28800\\,\\mathrm{s}$, and the power is $P = 500\\,\\mathrm{MW} = 500 \\times 10^{6}\\,\\mathrm{W}$. Substituting these into the expression for $V$ yields\n$$\nV = \\frac{(500 \\times 10^{6}) \\times (8 \\times 3600)}{\\eta \\rho g H} = \\frac{1.44 \\times 10^{13}}{\\eta \\rho g H}.\n$$\nThis expression gives the minimum usable reservoir volume in $\\mathrm{m^3}$, provided that $\\rho$ is in $\\mathrm{kg/m^3}$, $g$ in $\\mathrm{m/s^2}$, $H$ in $\\mathrm{m}$, and $P$ in $\\mathrm{W}$, consistent with the International System of Units.",
            "answer": "$$\\boxed{\\frac{1.44 \\times 10^{13}}{\\eta \\rho g H}}$$"
        },
        {
            "introduction": "Real-world energy needs are rarely predictable, making reliability a key performance metric for storage systems. This practice moves beyond deterministic analysis and asks you to size a storage asset to meet a specific reliability target under uncertain net-load conditions . By modeling the energy deficit as a Gaussian random variable, you will learn how to use statistical tools to determine the energy-to-power ratio needed to ensure the system performs as required a certain percentage of the time.",
            "id": "4126513",
            "problem": "Consider a single-episode energy adequacy sizing problem for a grid-integrated storage asset. Let the episode-integrated net-load deficit energy be modeled as a random variable $X$ with a Gaussian distribution having mean $\\mu$ and variance $\\sigma^{2}$, denoted $X \\sim \\mathcal{N}(\\mu,\\sigma^{2})$. The storage device is designed with a fixed discharge power rating $P$ and an energy capacity $E$. The energy-to-power ratio (E/P), also called the discharge duration at rated power, is defined as $\\tau$ such that $E = P \\tau$. In each episode, the storage follows a constant-power discharge policy at $P$ until either the episode ends or the storage energy is exhausted. Assume episodes are independent and identically distributed and that state of charge is fully restored between episodes, so that adequacy is determined per episode by the condition $X \\leq E$.\n\nStarting from the definitions of energy and power, and using the properties of the Gaussian distribution and its Probability Density Function (PDF) and Cumulative Distribution Function (CDF), do the following:\n\n- Show that the probability that the required duration to cover the episode exceeds a given $\\tau$ can be written as a Gaussian tail integral over $x \\in [P \\tau,\\infty)$.\n- Using a reliability target $\\beta \\in (0,1)$ defined as the probability that the storage can fully cover a random episode (i.e., the probability that $X \\leq E$), derive a closed-form analytic expression for the E/P selection $\\tau$ required to achieve reliability $\\beta$ in terms of $\\mu$, $\\sigma$, and $P$.\n\nExpress the final $\\tau$ in hours. The final answer must be a single closed-form analytic expression. No numerical evaluation is required, and no rounding instruction applies. Define and use the Standard Normal Cumulative Distribution Function (CDF) $\\Phi(\\cdot)$ where appropriate, and clearly indicate any transformations you employ.",
            "solution": "The problem asks for two derivations related to sizing an energy storage asset. We are given that the net-load deficit energy, $X$, is a random variable following a Gaussian distribution, $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$. The storage has a power rating $P$ and energy capacity $E$, related by the energy-to-power ratio $\\tau$ such that $E = P\\tau$.\n\nFor the first part, we must show that the probability of the required discharge duration exceeding a given $\\tau$ can be formulated as a Gaussian tail integral. The duration required to deliver an amount of energy $X$ at a constant power $P$ is $T_{req} = \\frac{X}{P}$. The event that this required duration exceeds a chosen design duration $\\tau$ is expressed by the inequality $T_{req} > \\tau$. Substituting the expression for $T_{req}$, we obtain $\\frac{X}{P} > \\tau$. Since the power rating $P$ is a positive constant, we can multiply both sides of the inequality by $P$ without changing the direction of the inequality, which yields the equivalent event $X > P\\tau$.\n\nThe probability of this event, $P(X > P\\tau)$, is calculated by integrating the probability density function (PDF) of the random variable $X$, which we denote as $f_X(x)$, over the range of values where the condition $x > P\\tau$ is satisfied. The PDF for a Gaussian random variable $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$ is given by:\n$$ f_X(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}} \\exp\\left(-\\frac{(x-\\mu)^2}{2\\sigma^2}\\right) $$\nTherefore, the probability is given by the integral of this function from the lower bound $P\\tau$ to infinity:\n$$ P(X > P\\tau) = \\int_{P\\tau}^{\\infty} f_X(x) \\, dx = \\int_{P\\tau}^{\\infty} \\frac{1}{\\sigma\\sqrt{2\\pi}} \\exp\\left(-\\frac{(x-\\mu)^2}{2\\sigma^2}\\right) \\, dx $$\nThis confirms that the probability that the required duration exceeds $\\tau$ is represented by a Gaussian tail integral over the energy domain $x \\in [P\\tau, \\infty)$.\n\nFor the second part, we must derive a closed-form expression for $\\tau$. The reliability target $\\beta \\in (0,1)$ is defined as the probability that the storage can fully cover a random episode's energy deficit. The condition for full coverage is that the deficit energy $X$ does not exceed the stored energy $E$. This is stated as $P(X \\leq E) = \\beta$.\n\nUsing the relationship $E = P\\tau$, we substitute this into the probability statement:\n$$ P(X \\leq P\\tau) = \\beta $$\nThe expression on the left is the definition of the cumulative distribution function (CDF) of $X$, denoted $F_X(\\cdot)$, evaluated at the point $P\\tau$. So, we have $F_X(P\\tau) = \\beta$.\n\nTo solve for $\\tau$, it is convenient to standardize the random variable $X$. We define a standard normal variable $Z = \\frac{X - \\mu}{\\sigma}$, which follows the distribution $Z \\sim \\mathcal{N}(0, 1)$. We transform the inequality $X \\leq P\\tau$ into an equivalent inequality for $Z$:\n$$ X \\leq P\\tau \\implies X - \\mu \\leq P\\tau - \\mu \\implies \\frac{X - \\mu}{\\sigma} \\leq \\frac{P\\tau - \\mu}{\\sigma} $$\nThe reliability condition can thus be rewritten in terms of the standard normal variable $Z$ as:\n$$ P\\left(Z \\leq \\frac{P\\tau - \\mu}{\\sigma}\\right) = \\beta $$\nBy definition, the probability $P(Z \\leq z)$ is the standard normal CDF, denoted $\\Phi(z)$. Our equation becomes:\n$$ \\Phi\\left(\\frac{P\\tau - \\mu}{\\sigma}\\right) = \\beta $$\nTo isolate $\\tau$, we apply the inverse standard normal CDF, $\\Phi^{-1}(\\cdot)$ (also known as the probit function or the standard normal quantile function), to both sides of the equation:\n$$ \\frac{P\\tau - \\mu}{\\sigma} = \\Phi^{-1}(\\beta) $$\nFinally, we perform algebraic rearrangement to solve for $\\tau$:\n$$ P\\tau - \\mu = \\sigma \\Phi^{-1}(\\beta) $$\n$$ P\\tau = \\mu + \\sigma \\Phi^{-1}(\\beta) $$\n$$ \\tau = \\frac{\\mu + \\sigma \\Phi^{-1}(\\beta)}{P} $$\nThis expression is the required closed-form analytic solution for the energy-to-power ratio $\\tau$ that achieves the specified reliability $\\beta$.",
            "answer": "$$ \\boxed{\\frac{\\mu + \\sigma \\Phi^{-1}(\\beta)}{P}} $$"
        },
        {
            "introduction": "A primary use of energy storage is to perform arbitrage by buying low and selling high, an operation that can be modeled and optimized. This computational exercise tasks you with building a linear program to find the optimal arbitrage revenue and then analyzing the mathematical properties of the resulting economic cost function . You will investigate why the function may not be strictly convex, a property crucial for many optimization algorithms, and implement a regularization technique to restore it, providing a deep insight into the practical aspects of energy systems modeling.",
            "id": "4126544",
            "problem": "Consider an idealized single-storage arbitrage model over a discrete time horizon with $T$ time steps, prices $\\{p_t\\}_{t=0}^{T-1}$ expressed in dollars per megawatt-hour ($$/\\mathrm{MWh}$), and decision variables for charging power $\\{c_t\\}_{t=0}^{T-1}$ and discharging power $\\{d_t\\}_{t=0}^{T-1}$, each constrained by a fixed power rating $P$ (in $\\mathrm{MW}$). The state-of-charge (SoC) trajectory is $\\{s_t\\}_{t=0}^{T}$ (in $\\mathrm{MWh}$), bounded by the energy capacity $E$ (in $\\mathrm{MWh}$). Assume perfect efficiency, zero self-discharge, zero variable operating cost, and cycle closure $s_0 = s_T = 0$. The dynamics and bounds are:\n- SoC dynamics: $s_{t+1} = s_t + c_t - d_t$ for $t = 0,\\dots,T-1$.\n- Power bounds: $0 \\leq c_t \\leq P$, $0 \\leq d_t \\leq P$ for all $t$.\n- Energy bounds: $0 \\leq s_t \\leq E$ for all $t$.\nThe arbitrage revenue with these decisions is $\\sum_{t=0}^{T-1} \\left(p_t d_t - p_t c_t\\right)$. Let $R_{\\mathrm{arb}}(E,P)$ denote the optimal arbitrage revenue at capacity $E$ and fixed $P$ obtained by maximizing this revenue subject to the above constraints.\n\nDefine the net cost functional $R(E,P)$ to be the sum of a linear capacity procurement cost and the negative of the optimal arbitrage revenue:\n$$\nR(E,P) \\equiv c_E E + c_P P - R_{\\mathrm{arb}}(E,P),\n$$\nwhere $c_E$ is the energy capacity cost in $$/\\mathrm{MWh}$ and $c_P$ is the power capacity cost in $$/\\mathrm{MW}$. For purposes of this problem, treat $c_P P$ as a constant since $P$ is fixed in each test case.\n\nStarting from the fundamental definitions above and the well-tested fact that the optimal value of a linear program is a concave function of a resource bound when the objective is maximized, you are to:\n1. Derive the mathematical properties of $R(E,P)$ with respect to $E$ at fixed $P$ and show why strict convexity in $E$ may fail when the price time series has long plateaus (extended stretches with nearly constant $p_t$). The failure of strict convexity should be interpreted in the sense of discrete curvature on an $E$-grid: specifically, a function is strictly convex on the grid if all of its discrete second differences are strictly positive; it is convex on the grid if all of its discrete second differences are nonnegative.\n2. Propose a regularization that restores strict convexity suitable for gradient-based solution. One suitable choice is to augment $R(E,P)$ by a strongly convex term in $E$, for example:\n$$\nR_{\\lambda}(E,P) \\equiv R(E,P) + \\tfrac{\\lambda}{2} E^2,\n$$\nwith $\\lambda > 0$, and demonstrate that the resulting regularized functional has strictly positive discrete curvature on the same $E$-grid.\n\nYour program must implement the following:\n- Formulate and solve the linear program for $R_{\\mathrm{arb}}(E,P)$ for a grid of $E$ values using $T=24$ hours.\n- Compute $R(E,P)$ over the grid and test discrete convexity and strict convexity using second differences.\n- Compute $R_{\\lambda}(E,P)$ over the grid with a specified $\\lambda$ and test strict convexity using second differences.\n\nUse the following test suite, with $E$ expressed in $\\mathrm{MWh}$ and $P$ in $\\mathrm{MW}$, prices in $$/\\mathrm{MWh}$:\n- Test Case 1 (long plateau): $P = 1$, $c_E = 10$, $\\lambda = 0.1$, and prices\n  $\\{p_t\\} = [30,30,30,30,30,30,30,30,30,30,30,30,60,60,60,60,30,30,30,30,30,30,30,30]$.\n- Test Case 2 (no pronounced plateau): $P = 1$, $c_E = 10$, $\\lambda = 0.1$, and prices\n  $\\{p_t\\}$ defined by $p_t = 50 + 20 \\sin\\left(\\frac{2\\pi t}{24}\\right)$ for $t=0,\\dots,23$.\n- Test Case 3 (boundary-like case with a spike): $P = 0.5$, $c_E = 10$, $\\lambda = 0.1$, and prices\n  $\\{p_t\\} = [50,50,50,50,50,50,50,50,50,50,50,80,50,50,50,50,50,50,50,50,50,50,50,50]$.\n\nUse the energy grid $E \\in \\{0,0.5,1.0,\\dots,5.0\\}$ (inclusive) in $\\mathrm{MWh}$ for all test cases.\n\nFor each test case, compute and record three boolean outputs in the following order:\n- Whether $R(E,P)$ is convex on the grid (all discrete second differences nonnegative).\n- Whether $R(E,P)$ is strictly convex on the grid (all discrete second differences strictly positive).\n- Whether $R_{\\lambda}(E,P)$ is strictly convex on the grid (all discrete second differences strictly positive).\n\nYour program should produce a single line of output containing the nine boolean results (three per test case, ordered as above for Test Case 1, then Test Case 2, then Test Case 3) as a comma-separated list enclosed in square brackets (e.g., \"[True,False,True,True,False,True,True,False,True]\"). No additional text should be printed. All results are unitless booleans. Angles are not involved in this problem.",
            "solution": "We are tasked with analyzing the convexity of the functional $R(E,P) = c_E E + c_P P - R_{\\mathrm{arb}}(E,P)$ with respect to the energy capacity $E$, holding the power rating $P$ fixed.\n\nThe optimal arbitrage revenue, $R_{\\mathrm{arb}}(E,P)$, is the optimal value of the following linear program (LP):\n$$\n\\begin{array}{ll}\n\\underset{c,d}{\\text{maximize}} & \\sum_{t=0}^{T-1} (p_t d_t - p_t c_t) \\\\\n\\text{subject to} & s_{t+1} = s_t + c_t - d_t, \\quad t=0, \\dots, T-1 \\\\\n& s_0 = 0, \\quad s_T = 0 \\\\\n& 0 \\le c_t \\le P, \\quad t=0, \\dots, T-1 \\\\\n& 0 \\le d_t \\le P, \\quad t=0, \\dots, T-1 \\\\\n& 0 \\le s_t \\le E, \\quad t=0, \\dots, T\n\\end{array}\n$$\nThe energy capacity $E$ appears on the right-hand side (RHS) of the state-of-charge inequality constraints $s_t \\le E$. A fundamental result from the theory of parametric linear programming states that the optimal value of an LP, viewed as a function of an RHS resource parameter, is a concave function if the objective is maximization. Therefore, $R_{\\mathrm{arb}}(E,P)$ is a concave, piecewise-linear, and non-decreasing function of $E$.\n\n**1. Convexity of $R(E,P)$**\n\nThe functional $R(E,P)$ is a sum of three terms, analyzed with respect to $E$:\n1.  $c_E E$: This is a linear function of $E$. A linear function is both convex and concave.\n2.  $c_P P$: This term is constant with respect to $E$, and is therefore convex.\n3.  $-R_{\\mathrm{arb}}(E,P)$: Since $R_{\\mathrm{arb}}(E,P)$ is a concave function of $E$, its negative, $-R_{\\mathrm{arb}}(E,P)$, is a convex function of $E$.\n\nSince the sum of convex functions is convex, $R(E,P)$ is a convex function of $E$.\n\n**2. Failure of Strict Convexity**\n\nFor a function to be strictly convex, its second derivative must be strictly positive. On a discrete grid $\\{E_i\\}$, this corresponds to the discrete second differences being strictly positive: $f(E_{i+1}) - 2f(E_i) + f(E_{i-1}) > 0$.\n\nFor $R(E,P)$ to be strictly convex, the sum $c_E E - R_{\\mathrm{arb}}(E,P)$ must be strictly convex (as $c_P P$ is constant). The term $c_E E$ is linear, so its second derivative (and second difference) is zero. Thus, strict convexity of $R(E,P)$ depends entirely on whether $-R_{\\mathrm{arb}}(E,P)$ is strictly convex, which in turn requires $R_{\\mathrm{arb}}(E,P)$ to be strictly concave.\n\nA piecewise-linear function like $R_{\\mathrm{arb}}(E,P)$ is strictly concave if its slope is strictly decreasing at each breakpoint. It cannot have any linear segments over an interval of $E$.\nThe slope of $R_{\\mathrm{arb}}(E,P)$ with respect to $E$, which is $\\frac{\\partial R_{\\mathrm{arb}}}{\\partial E}$, represents the marginal value of additional energy capacity. In the context of the LP, this is the shadow price associated with the most restrictive energy bound constraint $s_t \\le E$.\n\nWith a price time series that has long plateaus, such as a simple two-price profile (a low-price period and a high-price period), the arbitrage opportunity is to charge at the low price $p_{low}$ and discharge at the high price $p_{high}$. The profit is $p_{high} - p_{low}$ per unit of energy cycled. The total amount of energy that can be cycled is limited by both the storage capacity $E$ and the total energy that can be transferred given the power rating $P$ and the duration of the low/high price periods. Let this power-limited energy throughput be $E_{cycle}(P)$.\n\nIf the storage capacity $E$ is the limiting factor (i.e., $E < E_{cycle}(P)$), then each additional unit of $E$ can be fully utilized to generate revenue. The optimal revenue is $R_{\\mathrm{arb}}(E,P) = (p_{high} - p_{low}) E$. This relationship is linear in $E$.\nIn this linear region, the cost functional becomes:\n$$\nR(E,P) = c_E E + c_P P - (p_{high} - p_{low})E = (c_E - p_{high} + p_{low})E + c_P P\n$$\nThis is also a linear function of $E$. A linear function has a second derivative of zero and, on a discrete grid, a second difference of zero. This violates the condition for strict convexity. Thus, price plateaus can lead to linear segments in the revenue function, causing $R(E,P)$ to be convex but not strictly convex.\n\n**3. Regularization for Strict Convexity**\n\nThe proposed regularized functional is $R_{\\lambda}(E,P) = R(E,P) + \\frac{\\lambda}{2}E^2$ with $\\lambda > 0$. We need to show that this function is strictly convex on a discrete grid.\n\nLet the energy grid points be $E_i = E_0 + i \\Delta E$ for some constant spacing $\\Delta E > 0$. The discrete second difference of a function $f$ at grid point $i$ is defined as $\\Delta^2 f_i = f(E_{i+1}) - 2f(E_i) + f(E_{i-1})$. Strict convexity on the grid requires $\\Delta^2 f_i > 0$ for all valid $i$.\n\nThe second difference operator is linear. Thus:\n$$\n\\Delta^2 (R_{\\lambda})_i = \\Delta^2 R_i + \\Delta^2 \\left(\\frac{\\lambda}{2}E^2\\right)_i\n$$\nFrom our analysis above, $R(E,P)$ is convex, so its discrete second differences are non-negative: $\\Delta^2 R_i \\ge 0$.\n\nNow we compute the second difference of the regularization term $g(E) = \\frac{\\lambda}{2}E^2$:\n$$\n\\begin{align*}\n\\Delta^2 g_i &= \\frac{\\lambda}{2}E_{i+1}^2 - 2\\left(\\frac{\\lambda}{2}E_i^2\\right) + \\frac{\\lambda}{2}E_{i-1}^2 \\\\\n&= \\frac{\\lambda}{2}\\left((E_i + \\Delta E)^2 - 2E_i^2 + (E_i - \\Delta E)^2\\right) \\\\\n&= \\frac{\\lambda}{2}\\left((E_i^2 + 2E_i\\Delta E + (\\Delta E)^2) - 2E_i^2 + (E_i^2 - 2E_i\\Delta E + (\\Delta E)^2)\\right) \\\\\n&= \\frac{\\lambda}{2}\\left(2(\\Delta E)^2\\right) \\\\\n&= \\lambda (\\Delta E)^2\n\\end{align*}\n$$\nSince $\\lambda > 0$ and the grid spacing $\\Delta E > 0$, the second difference of the regularization term is a strict positive constant, $\\lambda (\\Delta E)^2 > 0$.\n\nCombining these results, the second difference of the regularized functional is:\n$$\n\\Delta^2 (R_{\\lambda})_i = \\Delta^2 R_i + \\lambda (\\Delta E)^2 \\ge 0 + \\lambda (\\Delta E)^2 > 0\n$$\nSince all discrete second differences of $R_{\\lambda}(E,P)$ are strictly positive, the functional is strictly convex on the discrete grid. The regularization successfully restores the desired property.",
            "answer": "[True,False,True,True,True,True,True,False,True]"
        }
    ]
}
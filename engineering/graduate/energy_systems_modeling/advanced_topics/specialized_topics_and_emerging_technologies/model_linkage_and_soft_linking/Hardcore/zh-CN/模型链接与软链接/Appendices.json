{
    "hands_on_practices": [
        {
            "introduction": "将能源模型与经济模型耦合时，必须仔细校准金融数据。本练习旨在解决一个常见挑战：如何在采用不同通胀指数和基准年的模型之间转换货币价值。掌握这项技能至关重要，能确保价格信号和成本在整个建模框架中得到一致的解释 ()。",
            "id": "4104909",
            "problem": "两个能源系统模型在一个规划工作流中被软连接。电力系统优化模型，记为 $M_{\\mathrm{P}}$，在内部使用以 $2012$ 年为基准年（因此 $I^{\\mathrm{CPI}}_{2012} = 100$）归一化的消费者价格指数 (CPI) 来校准和报告部分实际价格产出，但为了对外报告，它也为每个模拟年份提供名义产出。宏观经济模型，记为 $M_{\\mathrm{E}}$，使用以 $2018$ 年为基准年（因此 $I^{\\mathrm{GDP}}_{2018} = 100$）归一化的国内生产总值 (GDP) 平减指数来接收以实际美元计价的输入价格。为确保软连接的一致性，尽管两个模型使用了不同的指数和基准年，名义价格与实际价格的概念必须在它们之间对齐。\n\n给定以下科学上合理的指数值：\n- CPI 序列（以 $2012$ 年为 $100$ 进行归一化）：$I^{\\mathrm{CPI}}_{2012} = 100$，$I^{\\mathrm{CPI}}_{2018} = 113$，$I^{\\mathrm{CPI}}_{2030} = 142$。\n- GDP 平减指数序列（以 $2018$ 年为 $100$ 进行归一化）：$I^{\\mathrm{GDP}}_{2012} = 95$，$I^{\\mathrm{GDP}}_{2018} = 100$，$I^{\\mathrm{GDP}}_{2030} = 128$。\n\n定义：\n- 名义价格 $p^{\\mathrm{nom}}_{t}$ 是在时间 $t$ 以 $t$ 年的当年美元计量的货币价值。\n- 实际价格 $p^{\\mathrm{real}(X,b)}_{t}$ 是使用指数族 $X$（例如，CPI 或 GDP 平减指数）将名义价格平减至基准年 $b$ 后的价格。\n\n来自模型的数据：\n- $M_{\\mathrm{P}}$ 报告 $2030$ 年的名义批发电价为 $p^{\\mathrm{nom}}_{2030} = 92$ （单位：美元/兆瓦时）。\n- $M_{\\mathrm{P}}$ 还报告了 $2018$ 年以 $2012$ 年 CPI 美元计价的实际价格为 $p^{\\mathrm{real}(\\mathrm{CPI},2012)}_{2018} = 68$。\n\n任务：\n仅从上述核心定义和提供的指数出发，推导在不同基准年和指数的模型之间对齐名义价格与实际价格所需的通用指数转换。然后，应用适当的转换，使用 GDP 平减指数计算以 $2018$ 年实际美元计价的 $2030$ 年价格，使其与 $M_{\\mathrm{E}}$ 的接收要求一致。使用给定的 $M_{\\mathrm{P}}$ 的 $2030$ 年名义价格。将最终数值答案四舍五入到四位有效数字。以 $\\$/\\mathrm{MWh}$ 和 $2018$ 年美元 (USD) 表示最终能源价格。",
            "solution": "问题需经过验证。\n\n### 步骤 1: 提取已知条件\n- 电力系统模型: $M_{\\mathrm{P}}$\n- 宏观经济模型: $M_{\\mathrm{E}}$\n- $M_{\\mathrm{P}}$ 使用消费者价格指数 (CPI)，以 $2012$ 年为基准年归一化: $I^{\\mathrm{CPI}}_{2012} = 100$。\n- $M_{\\mathrm{E}}$ 使用国内生产总值 (GDP) 平减指数，以 $2018$ 年为基准年归一化: $I^{\\mathrm{GDP}}_{2018} = 100$。\n- CPI 序列值: $I^{\\mathrm{CPI}}_{2012} = 100$, $I^{\\mathrm{CPI}}_{2018} = 113$, $I^{\\mathrm{CPI}}_{2030} = 142$。\n- GDP 平减指数序列值: $I^{\\mathrm{GDP}}_{2012} = 95$, $I^{\\mathrm{GDP}}_{2018} = 100$, $I^{\\mathrm{GDP}}_{2030} = 128$。\n- 名义价格的定义: $p^{\\mathrm{nom}}_{t}$ 是在时间 $t$ 以 $t$ 年的当年美元计量的货币价值。\n- 实际价格的定义: $p^{\\mathrm{real}(X,b)}_{t}$ 是使用指数族 $X$ 将名义价格平减至基准年 $b$ 后的价格。\n- 来自 $M_{\\mathrm{P}}$ 的数据: $2030$ 年的名义批发电价为 $p^{\\mathrm{nom}}_{2030} = 92$。\n- 来自 $M_{\\mathrm{P}}$ 的数据: $2018$ 年以 $2012$ 年 CPI 美元计价的实际价格为 $p^{\\mathrm{real}(\\mathrm{CPI},2012)}_{2018} = 68$。\n- 任务: 推导通用指数转换，然后使用提供的 $p^{\\mathrm{nom}}_{2030}$ 和 GDP 平减指数计算以 $2018$ 年实际美元计价的 $2030$ 年价格 $p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030}$。将最终数值答案四舍五入到四位有效数字。\n\n### 步骤 2: 使用提取的已知条件进行验证\n该问题基于价格指数化和价格平减的经济学原理，这些是能源系统建模中的标准做法。所提供的数据和定义是自洽且一致的。该任务是适定的，具有明确的目标和足够的信息来得出唯一解。给定的指数值是通货膨胀的合理解释。该问题不违反任何基本原则，不基于错误的前提，并使用精确、客观的语言。额外信息（$I^{\\mathrm{CPI}}$ 值和 $p^{\\mathrm{real}(\\mathrm{CPI},2012)}_{2018}$）的存在不会对指定任务产生矛盾，因为任务明确指示了要使用哪些输入数据（$p^{\\mathrm{nom}}_{2030}$ 和 GDP 平减指数序列）。因此，该问题被认为是有效的。\n\n### 步骤 3: 结论与行动\n问题有效。将提供完整解答。\n\n### 解答推导\n在年份 $t$ 的名义价格 $p^{\\mathrm{nom}}_{t}$ 与其对应的、使用价格指数序列 $X$ 以基准年 $b$ 表示的实际价格 $p^{\\mathrm{real}(X,b)}_{t}$ 之间的核心关系由价格平减的定义给出。实际价格是名义价格根据 $t$ 年和基准年 $b$ 之间的价格水平变化进行调整后的价格。公式为：\n$$ p^{\\mathrm{real}(X,b)}_{t} = p^{\\mathrm{nom}}_{t} \\times \\frac{I^{X}_{b}}{I^{X}_{t}} $$\n此处，$I^{X}_{t}$ 是指数族 $X$ 在年份 $t$ 的价格指数值，$I^{X}_{b}$ 是其在基准年 $b$ 的值。比率 $\\frac{I^{X}_{b}}{I^{X}_{t}}$ 作为平减因子。\n\n问题首先要求一个通用的指数转换。这将是一个将价格从一个实际基准（指数 $X_1$，基准年 $b_1$）转换到另一个实际基准（指数 $X_2$，基准年 $b_2$）的公式。我们可以通过先将初始实际价格转换回其名义价值，然后将该名义价值转换为新的实际基准来推导。\n\n根据定义，我们可以将名义价格表示为：\n$$ p^{\\mathrm{nom}}_{t} = p^{\\mathrm{real}(X_1,b_1)}_{t} \\times \\frac{I^{X_1}_{t}}{I^{X_1}_{b_1}} $$\n现在，我们可以通过将 $p^{\\mathrm{nom}}_{t}$ 的这个表达式代入通用定义来找到新的实际价格 $p^{\\mathrm{real}(X_2,b_2)}_{t}$：\n$$ p^{\\mathrm{real}(X_2,b_2)}_{t} = p^{\\mathrm{nom}}_{t} \\times \\frac{I^{X_2}_{b_2}}{I^{X_2}_{t}} = \\left( p^{\\mathrm{real}(X_1,b_1)}_{t} \\times \\frac{I^{X_1}_{t}}{I^{X_1}_{b_1}} \\right) \\times \\frac{I^{X_2}_{b_2}}{I^{X_2}_{t}} $$\n这提供了通用的转换框架。\n\n然而，对于手头的具体任务，出发点是名义价格，而不是不同基准下的实际价格。我们被要求使用 GDP 平减指数作为指数族 $X=\\mathrm{GDP}$，计算以基准年 $b=2018$ 的实际美元计价的 $t=2030$ 年的电价。所求量为 $p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030}$。\n\n给定 $2030$ 年的名义价格：\n$$ p^{\\mathrm{nom}}_{2030} = 92 $$\n所需的转换是直接应用基本平减公式，其中 $t=2030$, $b=2018$, $X=\\mathrm{GDP}$：\n$$ p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030} = p^{\\mathrm{nom}}_{2030} \\times \\frac{I^{\\mathrm{GDP}}_{2018}}{I^{\\mathrm{GDP}}_{2030}} $$\n根据给定数据，我们有必要的 GDP 平减指数值：\n$$ I^{\\mathrm{GDP}}_{2018} = 100 $$\n$$ I^{\\mathrm{GDP}}_{2030} = 128 $$\n将数值代入方程：\n$$ p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030} = 92 \\times \\frac{100}{128} $$\n现在，我们进行计算：\n$$ p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030} = \\frac{9200}{128} $$\n为了化简分数，我们可以将分子和分母同除以它们的最大公约数。让我们分步化简：\n$$ \\frac{9200 \\div 4}{128 \\div 4} = \\frac{2300}{32} $$\n$$ \\frac{2300 \\div 4}{32 \\div 4} = \\frac{575}{8} $$\n将分数转换为小数值：\n$$ p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030} = 71.875 $$\n题目要求最终答案四舍五入到四位有效数字。数字 $71.875$ 有五位有效数字。四舍五入到四位有效数字，我们检查第五位数字（是 $5$），并将第四位数字向上取整。\n$$ p^{\\mathrm{real}(\\mathrm{GDP},2018)}_{2030} \\approx 71.88 $$\n包括 CPI 序列和实际价格 $p^{\\mathrm{real}(\\mathrm{CPI},2012)}_{2018} = 68$ 在内的无关信息对于解决所述问题并非必需，该问题要求从名义价格 $p^{\\mathrm{nom}}_{2030}$ 出发并使用 GDP 平减指数。",
            "answer": "$$\n\\boxed{71.88}\n$$"
        },
        {
            "introduction": "模型接口处的数据聚合方式可能会引入重大误差。本思想实验揭示了一个典型陷阱：使用“净”能量流而非“总”能量流，会因忽略同时发生的双向传输及其相关损耗而导致能量守恒定律被违背。此实践突出了仔细审查接口定义以保持物理真实性的重要性 ()。",
            "id": "4104951",
            "problem": "一个双区域能源系统在两个计算模型之间进行软链接。上游模型报告净流量，而下游模型需要总流量来计算传输损耗并强制执行质量守恒。考虑区域 $A$ 和 $B$ 以及在单个时间段内以太焦耳 (TJ) 为单位计量的单一能源商品。设 $E_{AB}$ 表示从区域 $A$ 调度到区域 $B$ 的总能量，$E_{BA}$ 表示从区域 $B$ 调度到区域 $A$ 的总能量。传输会产生与流量成比例的损耗：任何调度流量的损耗为 $L = \\eta E$，其中 $0  \\eta  1$ 是一个恒定的损耗率。从 $A$ 输送到 $B$ 的能量为 $(1 - \\eta) E_{AB}$，从 $B$ 输送到 $A$ 的能量为 $(1 - \\eta) E_{BA}$。\n\n下游模型在区域层面通过一个明确的损耗项来强制执行质量守恒恒等式：\n$$\nS_{i} + \\text{inflows}_{i} = D_{i} + \\text{outflows}_{i} + L_{i},\n$$\n对于 $i \\in \\{A,B\\}$，其中 $S_{i}$ 是区域供应量，$D_{i}$ 是区域需求量，$L_{i}$ 是分配到该区域的传输损耗。在此系统中，假设损耗分配给始发区域，因此 $L_{A} = \\eta E_{AB}$，$L_{B} = \\eta E_{BA}$。\n\n使用净流量的上游模型报告单一标量净交换量\n$$\nN_{AB} = (1 - \\eta)\\left(E_{AB} - E_{BA}\\right),\n$$\n即从 $A$ 输送到 $B$ 的净能量。在软链接中，一个简易转换器根据以下规则从上游净流量构建下游总流量：\n$$\n\\tilde{E}_{AB} = \\max\\!\\left(N_{AB}, 0\\right), \\quad \\tilde{E}_{BA} = \\max\\!\\left(-N_{AB}, 0\\right),\n$$\n然后下游损耗计算为 $\\tilde{L}_{A} = \\eta \\tilde{E}_{AB}$ 和 $\\tilde{L}_{B} = \\eta \\tilde{E}_{BA}$。\n\n设计一个具有对称总双边传输的测试数据集，该传输在净流量中抵消，但在总流量中非零：设 $E_{AB} = E_{BA} = Q$，其中 $Q = 100$ 且 $\\eta = 0.05$。选择任意正值 $D_{A} > 0$ 和 $D_{B} > 0$，并定义 $S_{A}$ 和 $S_{B}$，使得当提供真实的总流量和损耗（即使用 $E_{AB}$、$E_{BA}$、$L_{A}$ 和 $L_{B}$）时，下游模型的质量守恒恒等式成立，并且库存变化为零。然后，当软链接仅基于 $N_{AB}$ 向下游模型提供简易重构的总流量 $\\tilde{E}_{AB}$ 和 $\\tilde{E}_{BA}$ 时，计算两个区域的总绝对质量平衡偏差，\n$$\nV_{\\text{total}} \\equiv \\sum_{i \\in \\{A,B\\}} \\left|\\, S_{i} + \\tilde{\\text{inflows}}_{i} - \\left(D_{i} + \\tilde{\\text{outflows}}_{i} + \\tilde{L}_{i}\\right) \\,\\right|,\n$$\n其中 $\\tilde{\\text{inflows}}_{A} = (1 - \\eta)\\tilde{E}_{BA}$，$\\tilde{\\text{outflows}}_{A} = \\tilde{E}_{AB}$，区域 $B$ 的情况类似。将最终能量表示为以 TJ 为单位的实数，并将您的答案四舍五入到四位有效数字。",
            "solution": "在尝试任何解决方案之前，用户问题都经过了严格的验证过程。\n\n### 步骤1：提取已知条件\n- **区域**：两个区域，$A$ 和 $B$。\n- **总流量**：$E_{AB}$ 是从 $A$ 到 $B$ 的总能量。$E_{BA}$ 是从 $B$ 到 $A$ 的总能量。\n- **传输损耗率**：调度流量的一个恒定比例 $\\eta$，其中 $0  \\eta  1$。一次调度 $E$ 的损耗为 $L = \\eta E$。\n- **输送能量**：从 $A$ 到 $B$ 为 $(1 - \\eta) E_{AB}$。从 $B$ 到 $A$ 为 $(1 - \\eta) E_{BA}$。\n- **下游模型守恒恒等式**：对于区域 $i \\in \\{A,B\\}$，$S_{i} + \\text{inflows}_{i} = D_{i} + \\text{outflows}_{i} + L_{i}$。\n- **变量定义**：$S_i$ 是供应量，$D_i$ 是需求量，$L_i$ 是分配给区域 $i$ 的损耗。\n- **损耗分配规则**：损耗分配给始发区域：$L_A = \\eta E_{AB}$ 和 $L_B = \\eta E_{BA}$。\n- **上游模型净流量**：$N_{AB} = (1 - \\eta)(E_{AB} - E_{BA})$。\n- **简易转换器规则**：$\\tilde{E}_{AB} = \\max(N_{AB}, 0)$ 和 $\\tilde{E}_{BA} = \\max(-N_{AB}, 0)$。\n- **重构损耗**：$\\tilde{L}_{A} = \\eta \\tilde{E}_{AB}$ 和 $\\tilde{L}_{B} = \\eta \\tilde{E}_{BA}$。\n- **测试数据集**：$E_{AB} = E_{BA} = Q = 100$ TJ。$\\eta = 0.05$。\n- **测试条件**：选择 $D_A > 0$ 和 $D_B > 0$。定义 $S_A$ 和 $S_B$ 以使真实的质量守恒恒等式成立。库存变化为零。\n- **目标**：计算总绝对质量平衡偏差 $V_{\\text{total}} = \\sum_{i \\in \\{A,B\\}} \\left|\\, S_{i} + \\tilde{\\text{inflows}}_{i} - \\left(D_{i} + \\tilde{\\text{outflows}}_{i} + \\tilde{L}_{i}\\right) \\,\\right|$。\n- **用于计算偏差的流量定义**：$\\tilde{\\text{inflows}}_{A} = (1 - \\eta)\\tilde{E}_{BA}$，$\\tilde{\\text{outflows}}_{A} = \\tilde{E}_{AB}$。区域 $B$ 的定义类似。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题具有科学依据，采用了能源系统建模中的标准概念，如能量平衡、总流量和净流量以及传输损耗。数学公式是一致且逻辑的。该问题是适定的；它提供了所有必要的定义、常数以及一个清晰的操作序列以得出唯一解。“选择任意正值 $D_A > 0$ 和 $D_B > 0$”的指令可能暗示问题欠定，但初步分析表明，偏差 $V_{\\text{total}}$ 的最终结果将独立于为 $D_A$ 和 $D_B$ 选择的具体值，因为这些项预计会相互抵消。这是旨在测试对守恒原理理解的问题的一个共同特点。因此，该问题并非欠定，而是为了展示一个特定的建模产物而构建的。所有术语都得到了客观定义。该问题是有效的。\n\n### 步骤3：推导\n该问题被认为是有效的，下面是完整的解答过程。\n\n首先，我们使用真实的总流量为每个区域建立正确的能量平衡，这为区域供应量 $S_A$ 和 $S_B$ 提供了必要的定义。区域 $i$ 的能量平衡由 $S_{i} + \\text{inflows}_{i} = D_{i} + \\text{outflows}_{i} + L_{i}$ 给出。\n\n对于区域 $A$：\n- 流出量是总调度量：$\\text{outflows}_{A} = E_{AB}$。\n- 流入量是从 $B$ 输送来的能量：$\\text{inflows}_{A} = (1-\\eta)E_{BA}$。\n- 损耗从其自身的调度中分配：$L_{A} = \\eta E_{AB}$。\n\n将这些代入区域 $A$ 的平衡方程：\n$$S_A + (1-\\eta)E_{BA} = D_A + E_{AB} + \\eta E_{AB}$$\n求解 $S_A$：\n$$S_A = D_A + E_{AB} + \\eta E_{AB} - (1-\\eta)E_{BA} = D_A + (1+\\eta)E_{AB} - (1-\\eta)E_{BA}$$\n\n对于区域 $B$：\n- 流出量是总调度量：$\\text{outflows}_{B} = E_{BA}$。\n- 流入量是从 $A$ 输送来的能量：$\\text{inflows}_{B} = (1-\\eta)E_{AB}$。\n- 损耗从其自身的调度中分配：$L_{B} = \\eta E_{BA}$。\n\n代入区域 $B$ 的平衡方程：\n$$S_B + (1-\\eta)E_{AB} = D_B + E_{BA} + \\eta E_{BA}$$\n求解 $S_B$：\n$$S_B = D_B + E_{BA} + \\eta E_{BA} - (1-\\eta)E_{AB} = D_B + (1+\\eta)E_{BA} - (1-\\eta)E_{AB}$$\n这些关于 $S_A$ 和 $S_B$ 的表达式确保了系统在使用真实总流量时是平衡的。\n\n接下来，我们分析通过软链接传递的信息。上游模型计算净流量 $N_{AB}$：\n$$N_{AB} = (1-\\eta)(E_{AB} - E_{BA})$$\n使用指定的测试数据，$E_{AB} = E_{BA} = Q = 100$ TJ 且 $\\eta = 0.05$：\n$$N_{AB} = (1-0.05)(100 - 100) = 0.95 \\times 0 = 0$$\n\n然后，简易转换器根据此净流量重构总流量：\n$$\\tilde{E}_{AB} = \\max(N_{AB}, 0) = \\max(0, 0) = 0$$\n$$\\tilde{E}_{BA} = \\max(-N_{AB}, 0) = \\max(0, 0) = 0$$\n因此，重构的损耗为零：\n$$\\tilde{L}_{A} = \\eta \\tilde{E}_{AB} = 0$$\n$$\\tilde{L}_{B} = \\eta \\tilde{E}_{BA} = 0$$\n两个区域的重构流入量和流出量也为零：\n$$\\tilde{\\text{inflows}}_{A} = (1-\\eta)\\tilde{E}_{BA} = 0, \\quad \\tilde{\\text{outflows}}_{A} = \\tilde{E}_{AB} = 0$$\n$$\\tilde{\\text{inflows}}_{B} = (1-\\eta)\\tilde{E}_{AB} = 0, \\quad \\tilde{\\text{outflows}}_{B} = \\tilde{E}_{BA} = 0$$\n\n现在，我们计算当下游模型使用这些重构值时的质量平衡偏差。区域 $i$ 的偏差，我们记为 $V_i$，是平衡方程的残差：\n$$V_i = S_{i} + \\tilde{\\text{inflows}}_{i} - (D_{i} + \\tilde{\\text{outflows}}_{i} + \\tilde{L}_{i})$$\n\n对于区域 $A$，代入重构值（均为零）：\n$$V_A = S_{A} + 0 - (D_{A} + 0 + 0) = S_A - D_A$$\n我们代入从真实平衡中推导出的 $S_A$ 表达式：\n$$V_A = (D_A + (1+\\eta)E_{AB} - (1-\\eta)E_{BA}) - D_A = (1+\\eta)E_{AB} - (1-\\eta)E_{BA}$$\n正如预测的那样，$D_A$ 项被抵消，偏差与所选的需求无关。\n代入测试数据 $E_{AB} = E_{BA} = Q$：\n$$V_A = (1+\\eta)Q - (1-\\eta)Q = Q + \\eta Q - Q + \\eta Q = 2\\eta Q$$\n\n类似地，对于区域 $B$：\n$$V_B = S_{B} + 0 - (D_{B} + 0 + 0) = S_B - D_B$$\n代入 $S_B$ 的表达式：\n$$V_B = (D_B + (1+\\eta)E_{BA} - (1-\\eta)E_{AB}) - D_B = (1+\\eta)E_{BA} - (1-\\eta)E_{AB}$$\n同样，$D_B$ 被抵消。代入 $E_{AB} = E_{BA} = Q$：\n$$V_B = (1+\\eta)Q - (1-\\eta)Q = 2\\eta Q$$\n\n总绝对质量平衡偏差是各区域偏差绝对值的总和：\n$$V_{\\text{total}} = |V_A| + |V_B| = |2\\eta Q| + |2\\eta Q|$$\n由于 $\\eta > 0$ 且 $Q > 0$，绝对值符号是多余的。\n$$V_{\\text{total}} = 2\\eta Q + 2\\eta Q = 4\\eta Q$$\n\n最后，我们代入数值 $Q = 100$ TJ 和 $\\eta = 0.05$：\n$$V_{\\text{total}} = 4 \\times 0.05 \\times 100 = 4 \\times 5 = 20 \\text{ TJ}$$\n问题要求答案四舍五入到四位有效数字。确切答案是 $20$。为了用四位有效数字表示，我们写作 $20.00$。\n这个偏差代表了传输损耗的总能量（$L_A+L_B=\\eta E_{AB} + \\eta E_{BA} = 2\\eta Q$）加上因净额结算过程而调度但未输送的能量，这也与损耗有关（$V_A=V_B=2\\eta Q$）。总偏差 $4\\eta Q$ 表明，当存在同时发生的双向流（或环路流）时，简易软链接方法存在重大缺陷。",
            "answer": "$$\n\\boxed{20.00}\n$$"
        },
        {
            "introduction": "模型链接的一个核心目标是确保组合后的系统遵循基本的物理定律，例如能量守恒。本练习将展示如何构建一个链接约束，以在允许的容差 $\\epsilon$ 范围内强制实现需求与供应模型间的能量平衡。你还将设计一个惩罚函数，这是一种在难以实现精确收敛时引导解趋向一致状态的常用优化技术 ()。",
            "id": "4104910",
            "problem": "两个独立开发的能源系统模型在一个由四个时期（索引为 $t \\in \\{1, 2, 3, 4\\}$）组成的共同规划期内进行软连接。第一个模型是需求侧模拟模型，通过汇总各部门的终端用能服务需求，输出每个时期的终端能源总需求 $D_{t}$。第二个模型是供应扩展优化模型，在考虑了转换和管网损失后，输出交付给终端用户的终端能源总量 $S_{t}$。能源守恒的基本原则要求，在终端能源交付的系统边界处，终端总需求等于终端总供应。形式上，如果 $D_{\\text{tot}} = \\sum_{t=1}^{4} D_{t}$ 且 $S_{\\text{tot}} = \\sum_{t=1}^{4} S_{t}$，那么能量平衡条件为 $D_{\\text{tot}} = S_{\\text{tot}}$。\n\n由于两个模型在结构和分辨率上存在差异，软连接设计允许一个容差带，使得能量平衡条件无需精确成立，但必须在指定的容差范围内。设容差为 $\\epsilon  0$，单位为太瓦时 (terawatt-hours)，并定义总不匹配量为 $\\Delta = D_{\\text{tot}} - S_{\\text{tot}}$。现要求你：\n\n- 从能源守恒原则出发，推导出一个连接约束，该约束强制 $D_{\\text{tot}}$ 和 $S_{\\text{tot}}$ 在容差 $\\epsilon$ 内相等。\n- 提出了一个凸惩罚函数 $\\phi(\\Delta)$，并将其添加到供应模型的目标函数中，以便对容差带外的违规进行惩罚，但对容差带内的不施加惩罚。该惩罚必须是非负的，关于 $\\Delta$ 是偶函数（即，仅取决于 $|\\Delta|$），并且几乎处处可微。使用单一标量惩罚权重 $\\alpha  0$，其单位为美元/平方太瓦时。\n- 使用所提出的惩罚函数，为以下一致且合理的场景计算惩罚贡献值。需求模型输出\n$$\nD_{1} = 120\\ \\text{TWh},\\quad D_{2} = 135\\ \\text{TWh},\\quad D_{3} = 150\\ \\text{TWh},\\quad D_{4} = 165\\ \\text{TWh},\n$$\n而供应模型输出\n$$\nS_{1} = 118\\ \\text{TWh},\\quad S_{2} = 132\\ \\text{TWh},\\quad S_{3} = 148\\ \\text{TWh},\\quad S_{4} = 151\\ \\text{TWh}.\n$$\n设容差为 $\\epsilon = 10\\ \\text{TWh}$，惩罚权重为 $\\alpha = 1.5 \\times 10^{7}\\ \\text{\\$}/\\text{TWh}^{2}$。以美元表示最终惩罚值，并将答案四舍五入至四位有效数字。在最终的方框答案中不要包含单位。",
            "solution": "所述问题具有科学依据，提法恰当且客观。它基于能源守恒的基本原则，并采用了能源系统建模领域的标准技术，即通过容差带和惩罚函数进行模型软连接。所有数据、定义和约束均已提供，并且内部一致、物理上合理。单位量纲正确。因此，该问题是有效的，将提供解答。\n\n该问题需要一个包含三部分的答案：推导连接约束，提出合适的惩罚函数，以及针对给定场景计算惩罚值。\n\n**第1部分：推导连接约束**\n\n问题要求一个连接约束，以强制终端总需求 $D_{\\text{tot}}$ 和终端总供应 $S_{\\text{tot}}$ 在指定的容差 $\\epsilon > 0$ 内相等。总不匹配量定义为 $\\Delta = D_{\\text{tot}} - S_{\\text{tot}}$。\n\n等式在“容差 $\\epsilon$ 内”成立的条件是关于不匹配量大小的陈述。它要求不匹配量的绝对值 $|\\Delta|$ 不得超过容差 $\\epsilon$。在数学上，这表示为：\n$$\n|\\Delta| \\le \\epsilon\n$$\n代入 $\\Delta$ 的定义，我们得到：\n$$\n|D_{\\text{tot}} - S_{\\text{tot}}| \\le \\epsilon\n$$\n这个绝对值不等式等价于一对线性不等式，即为连接约束：\n$$\n-\\epsilon \\le D_{\\text{tot}} - S_{\\text{tot}} \\le \\epsilon\n$$\n该约束确保在整个规划期内，总供应量与总需求量的偏差在任一方向上最多不超过 $\\epsilon$。\n\n**第2部分：提出凸惩罚函数**\n\n问题要求将一个惩罚函数 $\\phi(\\Delta)$ 添加到供应模型的目标函数中。该函数必须满足以下几个性质：\n1.  必须是凸函数。\n2.  必须是非负的，$\\phi(\\Delta) \\ge 0$。\n3.  必须是关于 $\\Delta$ 的偶函数，仅取决于 $|\\Delta|$。\n4.  必须几乎处处可微。\n5.  在容差带内不施加惩罚，即当 $|\\Delta| \\le \\epsilon$ 时，$\\phi(\\Delta) = 0$。\n6.  对容差带外的违规进行惩罚，即当 $|\\Delta| > \\epsilon$ 时，$\\phi(\\Delta) > 0$。\n7.  必须使用一个惩罚权重 $\\alpha > 0$，其单位为美元/平方太瓦时。\n\n$\\alpha$ 的单位 ($\\$/\\text{TWh}^{2}$) 表明，惩罚值应与违规量大小的平方成正比，而违规量的单位为太瓦时(TWh)。违规量的大小是 $|\\Delta|$ 超出 $\\epsilon$ 的量，即当 $|\\Delta| > \\epsilon$ 时为 $(|\\Delta| - \\epsilon)$。\n\n一个满足所有这些标准的合适函数是关于违规量的二次惩罚。我们可以将该函数定义为：\n$$\n\\phi(\\Delta) = \\begin{cases}\n0   \\text{if } |\\Delta| \\le \\epsilon \\\\\n\\alpha (|\\Delta| - \\epsilon)^2   \\text{if } |\\Delta| > \\epsilon\n\\end{cases}\n$$\n这可以使用最大值函数更紧凑地写为：\n$$\n\\phi(\\Delta) = \\alpha \\left( \\max(0, |\\Delta| - \\epsilon) \\right)^2\n$$\n让我们验证该函数是否满足所需性质：\n-   **凸性**：函数 $x \\mapsto |\\Delta|$ 是凸函数。函数 $y \\mapsto \\max(0, y - \\epsilon)$ 是凸函数且非递减。函数 $z \\mapsto \\alpha z^2$（对于 $z \\ge 0$）是凸函数且非递减。凸的、非递减的函数的复合保持了凸性。因此，$\\phi(\\Delta)$ 是一个凸函数。\n-   **非负性**：由于 $\\alpha > 0$ 且平方项总是非负的，因此对于所有的 $\\Delta$，都有 $\\phi(\\Delta) \\ge 0$。\n-   **偶函数性质**：该函数取决于 $|\\Delta|$，所以 $\\phi(\\Delta) = \\phi(-\\Delta)$，满足条件。\n-   **可微性**：该函数处处连续可微（$C^1$ 类）。唯一需要关注的点是 $|\\Delta| = \\epsilon$。当 $|\\Delta|  \\epsilon$ 时，导数为 $0$。当 $\\Delta > \\epsilon$ 时，导数为 $2\\alpha(\\Delta - \\epsilon)$，当 $\\Delta \\to \\epsilon^{+}$ 时趋近于 $0$。当 $\\Delta  -\\epsilon$ 时，函数为 $\\alpha(-\\Delta - \\epsilon)^2$，其导数为 $2\\alpha(-\\Delta-\\epsilon)(-1) = 2\\alpha(\\Delta+\\epsilon)$，当 $\\Delta \\to (-\\epsilon)^{-}$ 时趋近于 $0$。由于导数在边界 $|\\Delta|=\\epsilon$ 处是连续的且等于 $0$，因此该函数处处可微。所以它“几乎处处可微”。\n-   **带内无惩罚**：根据其定义，如果 $|\\Delta| \\le \\epsilon$，则 $|\\Delta|-\\epsilon \\le 0$，所以 $\\max(0, |\\Delta|-\\epsilon) = 0$，且 $\\phi(\\Delta) = 0$。\n-   **带外有惩罚**：如果 $|\\Delta| > \\epsilon$，则 $|\\Delta|-\\epsilon > 0$ 且 $\\alpha > 0$，所以 $\\phi(\\Delta) = \\alpha(|\\Delta|-\\epsilon)^2 > 0$。\n-   **单位**：项 $(|\\Delta|-\\epsilon)$ 的单位是 TWh，所以 $(|\\Delta|-\\epsilon)^2$ 的单位是 $\\text{TWh}^2$。参数 $\\alpha$ 的单位是 $\\$/\\text{TWh}^2$。其乘积 $\\phi(\\Delta)$ 的单位正确地为美元。\n\n所提出的函数 $\\phi(\\Delta) = \\alpha \\left( \\max(0, |\\Delta| - \\epsilon) \\right)^2$ 是一个标准且合适的选择。\n\n**第3部分：计算惩罚贡献值**\n\n首先，我们使用提供的数据计算终端能源总需求 $D_{\\text{tot}}$ 和终端能源总供应 $S_{\\text{tot}}$。\n需求值为 $D_{1} = 120$，$D_{2} = 135$，$D_{3} = 150$ 和 $D_{4} = 165$，单位均为 TWh。\n$$\nD_{\\text{tot}} = \\sum_{t=1}^{4} D_{t} = 120 + 135 + 150 + 165 = 570\\ \\text{TWh}\n$$\n供应值为 $S_{1} = 118$，$S_{2} = 132$，$S_{3} = 148$ 和 $S_{4} = 151$，单位均为 TWh。\n$$\nS_{\\text{tot}} = \\sum_{t=1}^{4} S_{t} = 118 + 132 + 148 + 151 = 549\\ \\text{TWh}\n$$\n接下来，我们计算总不匹配量 $\\Delta$：\n$$\n\\Delta = D_{\\text{tot}} - S_{\\text{tot}} = 570 - 549 = 21\\ \\text{TWh}\n$$\n不匹配量的绝对值为 $|\\Delta| = 21\\ \\text{TWh}$。\n指定的容差为 $\\epsilon = 10\\ \\text{TWh}$。\n\n我们将绝对不匹配量与容差进行比较：\n$$\n|\\Delta| = 21\\ \\text{TWh} > \\epsilon = 10\\ \\text{TWh}\n$$\n由于不匹配量超出了容差带，因此会产生惩罚。我们使用第2部分推导出的惩罚函数和给定的惩罚权重 $\\alpha = 1.5 \\times 10^{7}\\ \\$/\\text{TWh}^{2}$。\n\n惩罚值（我们将其记为 $P$）的计算如下：\n$$\nP = \\phi(\\Delta) = \\alpha (|\\Delta| - \\epsilon)^2\n$$\n代入数值：\n$$\nP = (1.5 \\times 10^{7})\\ \\frac{\\$}{\\text{TWh}^2} \\times (21\\ \\text{TWh} - 10\\ \\text{TWh})^2\n$$\n$$\nP = (1.5 \\times 10^{7}) \\times (11)^2\\ \\$\n$$\n$$\nP = (1.5 \\times 10^{7}) \\times 121\\ \\$\n$$\n$$\nP = 181.5 \\times 10^{7}\\ \\$ = 1.815 \\times 10^{9}\\ \\$\n$$\n问题要求答案四舍五入到四位有效数字。计算出的值 $1.815 \\times 10^{9}$ 已经有四位有效数字（$1$、$8$、$1$、$5$）。\n\n最终的惩罚贡献值为 $1.815 \\times 10^{9}$ 美元。",
            "answer": "$$\n\\boxed{1.815 \\times 10^{9}}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "理解有功功率如何在电网中流动是电力系统分析的基石。本练习将指导您从基尔霍夫定律和相量形式的欧姆定律等基本原理出发，推导出连接两个母线的支路上的有功功率潮流表达式。通过这个推导过程，您将清楚地看到母线电压幅值和相角差如何共同决定功率的传输，并理解线路模型中并联电纳对有功功率的影响。",
            "id": "4073467",
            "problem": "考虑一个平衡稳态交流 (AC) 电力系统，其中母线 $i$ 和 $j$ 由一条输电线路连接，该线路用 $\\pi$ 等效模型建模。该线路具有无损串联电抗 $X_{ij} \\gt 0$ 和总并联电纳 $B_{ij} \\ge 0$，后者被平分并放置在线路的两端。没有串联电阻和并联电导。设复数母线电压为 $V_{i} = |V_{i}| \\exp(j \\theta_{i})$ 和 $V_{j} = |V_{j}| \\exp(j \\theta_{j})$，相角差为 $\\theta_{ij} \\equiv \\theta_{i} - \\theta_{j}$，以弧度为单位。沿着支路从母线 $i$ 流向母线 $j$ 的有功功率流表示为 $P_{ij} \\equiv \\operatorname{Re}\\{S_{ij}\\}$，其中 $S_{ij}$ 是从母线 $i$ 注入该支路的复功率。\n\n仅使用基尔霍夫定律 (Kirchhoff’s laws)、相量域欧姆定律 (Ohm’s law) 和复功率的定义，推导 $P_{ij}$ 关于 $|V_{i}|$、$|V_{j}|$、$\\theta_{ij}$ 和 $X_{ij}$ 的闭式解析表达式，并允许模型中存在 $B_{ij}$。明确说明并联电纳 $B_{ij}$ 是否出现在 $P_{ij}$ 的最终表达式中，并通过推导证明你的结论。\n\n此外，母线受到运行约束\n$$\\underline{V}_{i} \\le |V_{i}| \\le \\overline{V}_{i}, \\quad \\underline{V}_{j} \\le |V_{j}| \\le \\overline{V}_{j}, \\quad |\\theta_{ij}| \\le \\overline{\\theta},$$\n其中 $0 \\lt \\overline{\\theta} \\lt \\frac{\\pi}{2}$。解释这些约束如何决定 $P_{ij}$ 的可行集，但你的最终答案只需表示为 $P_{ij}$ 关于 $|V_{i}|$、$|V_{j}|$、$\\theta_{ij}$ 和 $X_{ij}$ 的函数的闭式解析表达式。角度必须以弧度为单位处理。无需进行数值计算。",
            "solution": "该问题陈述经评估有效。这是电力系统分析中的一个标准问题，其科学基础是交流电路理论的原理。所有必要的参数和定义都已提供，问题是适定的、客观的，且没有内部矛盾或歧义，可以进行严谨的求解。\n\n该问题要求推导从母线 $i$ 到母线 $j$ 的有功功率流 $P_{ij}$。连接这些母线的输电线路用 $\\pi$ 等效模型表示。在此模型中，由于串联电阻为零，串联阻抗是纯电抗性的，$Z_{series} = jX_{ij}$。由于并联电导为零，总并联导纳是纯电纳性的，$Y_{shunt} = jB_{ij}$。这个并联导纳被平分，母线 $i$ 端的导纳为 $Y_{i,shunt} = j\\frac{B_{ij}}{2}$，母线 $j$ 端的导纳为 $Y_{j,shunt} = j\\frac{B_{ij}}{2}$。\n\n问题将复功率流 $S_{ij}$ 定义为从母线 $i$ 注入整个支路（$\\pi$ 模型）的功率。从母线 $i$ 注入支路的电流，记为 $I_{ij}$，是流入母线 $i$ 处并联元件的电流 $I_{i,shunt}$ 和流入串联元件的电流 $I_{series}$ 之和。\n$$I_{ij} = I_{i,shunt} + I_{series}$$\n\n使用相量形式的欧姆定律，我们可以用母线电压 $V_{i}$ 和 $V_{j}$ 来表示这些电流。母线 $i$ 处的并联元件连接在母线和地（中性参考点）之间，所以流过它的电流是：\n$$I_{i,shunt} = V_{i} Y_{i,shunt} = V_{i} \\left(j\\frac{B_{ij}}{2}\\right)$$\n串联元件连接在两个母线之间，所以流过它的电流是：\n$$I_{series} = \\frac{V_{i} - V_{j}}{Z_{series}} = \\frac{V_{i} - V_{j}}{jX_{ij}}$$\n\n从母线 $i$ 注入支路的复功率 $S_{ij}$ 由公式 $S_{ij} = V_{i} I_{ij}^{*}$ 给出。代入 $I_{ij}$ 的表达式：\n$$S_{ij} = V_{i} (I_{i,shunt} + I_{series})^{*} = V_{i} I_{i,shunt}^{*} + V_{i} I_{series}^{*}$$\n这可以分析为流入并联分量的功率 $S_{i,shunt} = V_{i} I_{i,shunt}^{*}$ 和流入串联分量的功率 $S_{i,series} = V_{i} I_{series}^{*}$ 之和。\n\n首先，我们分析流入并联分量的功率：\n$$S_{i,shunt} = V_{i} \\left(V_{i} j\\frac{B_{ij}}{2}\\right)^{*} = V_{i} \\left(V_{i}^{*} (-j\\frac{B_{ij}}{2})\\right) = (V_{i}V_{i}^{*}) \\left(-j\\frac{B_{ij}}{2}\\right)$$\n由于 $V_{i}V_{i}^{*} = |V_{i}|^2$，这可以简化为：\n$$S_{i,shunt} = -j \\frac{|V_{i}|^2 B_{ij}}{2}$$\n这是一个纯虚数量，代表无功功率。与并联元件相关的有功功率是其实部，为零：\n$$P_{i,shunt} = \\operatorname{Re}\\{S_{i,shunt}\\} = 0$$\n\n接下来，我们分析流入串联分量的功率：\n$$S_{i,series} = V_{i} I_{series}^{*} = V_{i} \\left(\\frac{V_{i} - V_{j}}{jX_{ij}}\\right)^{*}$$\n电流项的共轭是：\n$$I_{series}^{*} = \\frac{(V_{i} - V_{j})^{*}}{(jX_{ij})^{*}} = \\frac{V_{i}^{*} - V_{j}^{*}}{-jX_{ij}}$$\n将此代回 $S_{i,series}$ 的表达式中：\n$$S_{i,series} = V_{i} \\left(\\frac{V_{i}^{*} - V_{j}^{*}}{-jX_{ij}}\\right) = \\frac{V_{i}V_{i}^{*} - V_{i}V_{j}^{*}}{-jX_{ij}} = \\frac{|V_{i}|^2 - V_{i}V_{j}^{*}}{-jX_{ij}}$$\n为了从分母中消去复数，我们将分子和分母同乘以 $j$：\n$$S_{i,series} = j\\frac{|V_{i}|^2 - V_{i}V_{j}^{*}}{X_{ij}}$$\n\n有功功率流 $P_{ij}$ 是总复功率 $S_{ij} = S_{i,shunt} + S_{i,series}$ 的实部。\n$$P_{ij} = \\operatorname{Re}\\{S_{ij}\\} = \\operatorname{Re}\\{S_{i,shunt}\\} + \\operatorname{Re}\\{S_{i,series}\\} = 0 + \\operatorname{Re}\\{S_{i,series}\\}$$\n$$P_{ij} = \\operatorname{Re}\\left\\{j\\frac{|V_{i}|^2 - V_{i}V_{j}^{*}}{X_{ij}}\\right\\}$$\n现在，我们使用极坐标来表示 $V_{i}V_{j}^{*}$ 这一项。给定 $V_{i} = |V_{i}| \\exp(j\\theta_{i})$ 和 $V_{j} = |V_{j}| \\exp(j\\theta_{j})$，则 $V_{j}$ 的共轭为 $V_{j}^{*} = |V_{j}| \\exp(-j\\theta_{j})$。\n$$V_{i}V_{j}^{*} = \\left(|V_{i}| \\exp(j\\theta_{i})\\right) \\left(|V_{j}| \\exp(-j\\theta_{j})\\right) = |V_{i}||V_{j}| \\exp(j(\\theta_{i} - \\theta_{j}))$$\n使用定义 $\\theta_{ij} \\equiv \\theta_{i} - \\theta_{j}$，我们有：\n$$V_{i}V_{j}^{*} = |V_{i}||V_{j}| \\exp(j\\theta_{ij}) = |V_{i}||V_{j}|(\\cos\\theta_{ij} + j\\sin\\theta_{ij})$$\n将此代入 $P_{ij}$ 的表达式中：\n$$P_{ij} = \\operatorname{Re}\\left\\{ \\frac{j}{X_{ij}} \\left( |V_{i}|^2 - |V_{i}||V_{j}|(\\cos\\theta_{ij} + j\\sin\\theta_{ij}) \\right) \\right\\}$$\n$$P_{ij} = \\operatorname{Re}\\left\\{ \\frac{j}{X_{ij}} \\left( (|V_{i}|^2 - |V_{i}||V_{j}|\\cos\\theta_{ij}) - j|V_{i}||V_{j}|\\sin\\theta_{ij} \\right) \\right\\}$$\n将括号内的因子 $j$ 分配进去：\n$$P_{ij} = \\operatorname{Re}\\left\\{ \\frac{1}{X_{ij}} \\left( j(|V_{i}|^2 - |V_{i}||V_{j}|\\cos\\theta_{ij}) - j^2|V_{i}||V_{j}|\\sin\\theta_{ij} \\right) \\right\\}$$\n由于 $j^2 = -1$：\n$$P_{ij} = \\operatorname{Re}\\left\\{ \\frac{1}{X_{ij}} \\left( |V_{i}||V_{j}|\\sin\\theta_{ij} + j(|V_{i}|^2 - |V_{i}||V_{j}|\\cos\\theta_{ij}) \\right) \\right\\}$$\n这个复数的实部是不带 $j$ 的项：\n$$P_{ij} = \\frac{|V_{i}||V_{j}|}{X_{ij}} \\sin(\\theta_{ij})$$\n\n并联电纳 $B_{ij}$ 不出现在有功功率流 $P_{ij}$ 的最终表达式中。理由如推导所示，即并联元件被建模为纯电纳。纯电纳是一个理想的无功元件，不消耗任何有功功率。它所吸收的复功率 $S_{i,shunt}$ 是纯虚数，意味着其实部为零。因此，并联电纳只影响无功功率流，而不影响有功功率流。\n\n母线电压幅值和相角差的运行约束决定了 $P_{ij}$ 的可行集。$P_{ij}$ 的表达式是 $|V_{i}|$、$|V_{j}|$ 和 $\\theta_{ij}$ 的函数。约束条件为 $\\underline{V}_{i} \\le |V_{i}| \\le \\overline{V}_{i}$、$\\underline{V}_{j} \\le |V_{j}| \\le \\overline{V}_{j}$ 和 $|\\theta_{ij}| \\le \\overline{\\theta}$，这意味着 $-\\overline{\\theta} \\le \\theta_{ij} \\le \\overline{\\theta}$。由于 $X_{ij} > 0$ 且 $0 < \\overline{\\theta} < \\pi/2$，函数 $\\sin(\\theta_{ij})$ 在区间 $[-\\overline{\\theta}, \\overline{\\theta}]$ 上是单调递增的。\n为了求 $P_{ij}$ 的最大值，我们必须使乘积 $|V_{i}||V_{j}|\\sin(\\theta_{ij})$ 最大化。这发生在每一项都取最大值时：$|V_{i}| = \\overline{V}_{i}$，$|V_{j}| = \\overline{V}_{j}$，以及 $\\theta_{ij} = \\overline{\\theta}$。\n$$P_{ij}^{\\max} = \\frac{\\overline{V}_{i}\\overline{V}_{j}}{X_{ij}} \\sin(\\overline{\\theta})$$\n为了求 $P_{ij}$ 的最小值，我们必须使该乘积尽可能为负。这发生在 $\\sin(\\theta_{ij})$ 取最小值时，即 $\\theta_{ij} = -\\overline{\\theta}$，而幅值乘积 $|V_{i}||V_{j}|$ 取最大值。\n$$P_{ij}^{\\min} = \\frac{\\overline{V}_{i}\\overline{V}_{j}}{X_{ij}} \\sin(-\\overline{\\theta}) = -\\frac{\\overline{V}_{i}\\overline{V}_{j}}{X_{ij}} \\sin(\\overline{\\theta})$$\n因此，$P_{ij}$ 的可行集是闭区间 $[P_{ij}^{\\min}, P_{ij}^{\\max}]$。",
            "answer": "$$\\boxed{\\frac{|V_{i}| |V_{j}|}{X_{ij}} \\sin(\\theta_{ij})}$$"
        },
        {
            "introduction": "在处理大型复杂电网时，精确的交流潮流方程可能难以求解，因此工程师们常常使用简化模型。本练习聚焦于一种关键的简化方法——小角度近似，它是直流潮流模型的基础。您将推导精确潮流表达式及其线性近似，并通过具体数值计算两者之间的绝对误差，从而深入理解在何种工况下这种近似是有效的，以及其作为建模工具的价值与局限性。",
            "id": "4073469",
            "problem": "考虑一个交流 (AC) 输电网络中连接母线 $i$ 和母线 $j$ 的单一串联支路。该支路在标幺 (p.u.) 值系统中被建模为一个理想的无损串联电抗，其电抗值为 $X_{ij} > 0$，并忽略了并联导纳。母线相量电压为 $V_{i} \\angle \\theta_{i}$ 和 $V_{j} \\angle \\theta_{j}$，其中 $V_{i}$ 和 $V_{j}$ 是电压幅值的标幺值，$\\theta_{i}$ 和 $\\theta_{j}$ 是以弧度为单位的电压相角。支路相角差定义为 $\\theta_{ij} \\equiv \\theta_{i} - \\theta_{j}$。\n\n在输电网络的能源系统建模中，典型的运行约束对每个母线 $k$ 施加了边界 $0.95 \\leq V_{k} \\leq 1.05$，并对每个支路的角度施加了约束 $|\\theta_{ij}| \\leq 0.3$ 弧度。在这些约束下，所谓的“小角度”近似将精确的支路有功功率流替换为一个关于 $\\theta_{ij}$ 的一阶线性化表达式。\n\n从电路基础——基尔霍夫定律、正弦稳态下的欧姆定律以及复功率的定义 $S = V I^{*}$——出发，推导从母线 $i$ 到母线 $j$ 经该支路传输的有功功率流的精确表达式，以及将对 $\\theta_{ij}$ 的三角函数依赖关系进行线性化处理的相应小角度近似。然后，对于数值上指定的工作点：\n- $V_{i} = 1.03$ p.u.，\n- $V_{j} = 0.97$ p.u.，\n- $\\theta_{ij} = 0.25$ 弧度，\n- $X_{ij} = 0.35$ p.u.，\n- 系统基准 $S_{\\text{base}} = 100$ MVA，\n\n计算使用小角度近似而非精确表达式所产生的支路有功功率流的绝对误差（单位为兆瓦）。以兆瓦（MW）为单位表示最终误差，并将您的答案四舍五入到四位有效数字。在整个计算过程中，角度使用弧度单位。",
            "solution": "问题陈述经评估为有效。其科学基础在于交流电路理论和电力系统分析的原理，问题提法明确，数据充分且一致，并以客观、精确的语言表达。所有提供的数值均与所述的运行约束一致。\n\n求解过程分三个阶段进行：首先，推导有功功率流的精确表达式；其次，推导小角度近似；最后，计算在指定工作点下两者之间的绝对误差。\n\n**1. 精确有功功率流 ($P_{ij}$) 的推导**\n\n系统由两个母线 $i$ 和 $j$ 组成，通过一条串联电抗为 $X_{ij}$ 的纯电抗、无损耗输电线路连接。母线电压由相量 $\\tilde{V}_i = V_i \\angle \\theta_i = V_i \\exp(j\\theta_i)$ 和 $\\tilde{V}_j = V_j \\angle \\theta_j = V_j \\exp(j\\theta_j)$ 给出。支路的阻抗为纯虚数，$Z_{ij} = jX_{ij}$。\n\n根据欧姆定律，从母线 $i$ 流向母线 $j$ 的电流 $I_{ij}$ 为：\n$$I_{ij} = \\frac{\\tilde{V}_i - \\tilde{V}_j}{Z_{ij}} = \\frac{\\tilde{V}_i - \\tilde{V}_j}{jX_{ij}}$$\n从母线 $i$ 流入支路的复功率 $S_{ij}$ 定义为 $S_{ij} = P_{ij} + jQ_{ij} = \\tilde{V}_i I_{ij}^{*}$，其中 $I_{ij}^{*}$ 是电流 $I_{ij}$ 的复共轭。\n\n首先，我们求电流的复共轭：\n$$I_{ij}^{*} = \\left( \\frac{\\tilde{V}_i - \\tilde{V}_j}{jX_{ij}} \\right)^{*} = \\frac{\\tilde{V}_i^{*} - \\tilde{V}_j^{*}}{-jX_{ij}} = \\frac{j(\\tilde{V}_i^{*} - \\tilde{V}_j^{*})}{X_{ij}}$$\n现在，我们将其代入复功率的表达式中：\n$$S_{ij} = \\tilde{V}_i \\left( \\frac{j(\\tilde{V}_i^{*} - \\tilde{V}_j^{*})}{X_{ij}} \\right) = \\frac{j}{X_{ij}} (\\tilde{V}_i \\tilde{V}_i^{*} - \\tilde{V}_i \\tilde{V}_j^{*})$$\n我们使用复数的性质：$\\tilde{V}_i \\tilde{V}_i^{*} = |\\tilde{V}_i|^2 = V_i^2$，以及 $\\tilde{V}_i \\tilde{V}_j^{*} = (V_i \\exp(j\\theta_i))(V_j \\exp(-j\\theta_j)) = V_i V_j \\exp(j(\\theta_i - \\theta_j))$。使用给定的定义 $\\theta_{ij} \\equiv \\theta_i - \\theta_j$，这变成了 $V_i V_j \\exp(j\\theta_{ij})$。\n\n将这些代回到 $S_{ij}$ 的表达式中：\n$$S_{ij} = \\frac{j}{X_{ij}} (V_i^2 - V_i V_j \\exp(j\\theta_{ij}))$$\n使用欧拉公式 $\\exp(j\\theta_{ij}) = \\cos(\\theta_{ij}) + j\\sin(\\theta_{ij})$，我们展开该表达式：\n$$S_{ij} = \\frac{j}{X_{ij}} (V_i^2 - V_i V_j (\\cos(\\theta_{ij}) + j\\sin(\\theta_{ij})))$$\n$$S_{ij} = \\frac{j}{X_{ij}} (V_i^2 - V_i V_j \\cos(\\theta_{ij})) - \\frac{j^2}{X_{ij}} (V_i V_j \\sin(\\theta_{ij}))$$\n由于 $j^2 = -1$：\n$$S_{ij} = \\frac{V_i V_j}{X_{ij}} \\sin(\\theta_{ij}) + j \\frac{V_i^2 - V_i V_j \\cos(\\theta_{ij})}{X_{ij}}$$\n有功功率流 $P_{ij}$ 是复功率 $S_{ij}$ 的实部。\n$$P_{ij}^{\\text{exact}} = \\text{Re}(S_{ij}) = \\frac{V_i V_j}{X_{ij}} \\sin(\\theta_{ij})$$\n\n**2. 小角度近似 ($P_{ij}^{\\text{approx}}$) 的推导**\n\n小角度近似通过使用正弦函数在 0 弧度角附近的一阶泰勒级数展开来线性化功率流的表达式。该展开为：\n$$\\sin(x) = x - \\frac{x^3}{3!} + \\frac{x^5}{5!} - \\dots$$\n对于小角度 $x$，我们可以近似为 $\\sin(x) \\approx x$。将此应用于相角差 $\\theta_{ij}$，我们得到 $\\sin(\\theta_{ij}) \\approx \\theta_{ij}$。\n\n将此近似代入有功功率的精确表达式，得到线性化近似：\n$$P_{ij}^{\\text{approx}} = \\frac{V_i V_j}{X_{ij}} \\theta_{ij}$$\n\n**3. 绝对误差的计算**\n\n有功功率流的绝对误差是精确值与近似值之差的绝对值。\n$$\\Delta P_{ij} = |P_{ij}^{\\text{exact}} - P_{ij}^{\\text{approx}}| = \\left| \\frac{V_i V_j}{X_{ij}} \\sin(\\theta_{ij}) - \\frac{V_i V_j}{X_{ij}} \\theta_{ij} \\right|$$\n提出公因式：\n$$\\Delta P_{ij} = \\frac{V_i V_j}{X_{ij}} |\\sin(\\theta_{ij}) - \\theta_{ij}|$$\n对于任何非零角度 $\\theta_{ij}$（以弧度为单位），都有 $|\\sin(\\theta_{ij})|  |\\theta_{ij}|$。对于给定的值 $\\theta_{ij} = 0.25 > 0$，有 $\\theta_{ij} > \\sin(\\theta_{ij})$，因此表达式简化为：\n$$\\Delta P_{ij} = \\frac{V_i V_j}{X_{ij}} (\\theta_{ij} - \\sin(\\theta_{ij}))$$\n这给出了标幺 (p.u.) 值系统中的误差。\n\n问题为该工作点提供了以下数值：\n- $V_{i} = 1.03$ p.u.\n- $V_{j} = 0.97$ p.u.\n- $\\theta_{ij} = 0.25$ 弧度\n- $X_{ij} = 0.35$ p.u.\n\n将这些值代入误差表达式：\n$$\\Delta P_{ij} (\\text{p.u.}) = \\frac{(1.03)(0.97)}{0.35} (0.25 - \\sin(0.25))$$\n首先，计算各项：\n$$V_i V_j = (1.03)(0.97) = 0.9991$$\n角度以弧度为单位，因此我们计算 $\\sin(0.25)$：\n$$\\sin(0.25) \\approx 0.24740396$$\n现在，将这些值代入标幺值误差方程：\n$$\\Delta P_{ij} (\\text{p.u.}) = \\frac{0.9991}{0.35} (0.25 - 0.24740396)$$\n$$\\Delta P_{ij} (\\text{p.u.}) = (2.8545714...) (0.00259604) \\approx 0.00741103 \\text{ p.u.}$$\n\n为了将此标幺值误差转换为兆瓦 (MW)，我们将其乘以系统基准功率 $S_{\\text{base}} = 100$ MVA。有功功率的基准是 $P_{\\text{base}} = 100$ MW。\n$$\\text{Error (MW)} = \\Delta P_{ij} (\\text{p.u.}) \\times P_{\\text{base}}$$\n$$\\text{Error (MW)} = 0.00741103 \\times 100 \\text{ MW} = 0.741103 \\text{ MW}$$\n\n问题要求答案四舍五入到四位有效数字。计算值为 $0.741103...$ MW。前四位有效数字是 $7$、$4$、$1$ 和 $1$。第五位数字是 $0$，因此不进位。最终误差是 $0.7411$ MW。",
            "answer": "$$\\boxed{0.7411}$$"
        },
        {
            "introduction": "掌握了潮流方程及其近似之后，下一步是将这些知识应用于解决实际的工程优化问题。本综合练习要求您为一个三母线系统选择最优的控制设备参数——变压器分接头位置和并联电纳大小——以在满足所有电压和相角约束的前提下，最小化系统的总有功功率损耗。这项实践模拟了电网规划与运行中的核心决策过程，让您体验如何运用潮流分析来提升系统的经济性和安全性。",
            "id": "4073479",
            "problem": "给定一个三母线交流 (AC) 电力网络，您需要使用节点导纳分析法对其进行建模，该网络包含一个非额定匝比变压器和一个离散的并联电纳。该网络由母线 $1$（平衡节点）、母线 $2$（负载节点）和母线 $3$（负载节点）组成。母线 $1$ 被建模为一个具有固定电压幅值和相角的理想电压源。母线 $2$ 和 $3$ 具有指定的有功和无功功率需求。目标是选择离散的变压器分接头位置和离散的并联电纳大小，以使所有母线电压幅值和所有支路相角差保持在界限内，同时最小化总有功功率损耗。\n\n基本定律和核心定义：\n- 基尔霍夫电流定律 (KCL)：在每个母线上，流出的复数电流之和等于流入的复数电流之和。\n- 交流电路的欧姆定律：对于母线 $i$ 和 $k$ 之间具有复数串联导纳 $y_{ik}$ 的串联元件，电流为 $I_{ik} = y_{ik}(V_i' - V_k)$，其中 $V_i'$ 考虑了任何非额定匝比变换。\n- 母线 $k$ 处的复功率：$S_k = P_k + j Q_k = V_k I_k^\\ast$，其中 $I_k = \\sum_{j} Y_{kj} V_j$ 且 $^\\ast$ 表示复共轭。\n- 节点导纳矩阵 (Y-bus)：对于每个支路导纳和并联支路，将母线导纳组合起来以满足 KCL。对于母线 $i$ 和 $k$ 之间具有实际匝比 $t$（无相移）和串联导纳 $y$ 的非额定匝比变压器，其对节点导纳矩阵的贡献为：\n  - $Y_{ii} \\leftarrow Y_{ii} + y/t^2$,\n  - $Y_{ik} \\leftarrow Y_{ik} - y/t$,\n  - $Y_{kk} \\leftarrow Y_{kk} + y$,\n  - $Y_{ki} \\leftarrow Y_{ki} - y/t$.\n- 母线 $2$ 和 $3$ 之间无分接头（简单线路）的支路，其串联导纳为 $y$，贡献如下：\n  - $Y_{22} \\leftarrow Y_{22} + y$,\n  - $Y_{23} \\leftarrow Y_{23} - y$,\n  - $Y_{33} \\leftarrow Y_{33} + y$,\n  - $Y_{32} \\leftarrow Y_{32} - y$.\n- 母线 $k$ 处的并联电纳 $B$（当 $B0$ 时为容性）贡献为 $Y_{kk} \\leftarrow Y_{kk} + jB$。\n\n网络规格：\n- 基准功率 $S_{\\text{base}} = 100$ 兆伏安 (MVA)。\n- 平衡母线 $1$：固定电压幅值 $|V_1| = 1.0$ 标幺值 (p.u.) 和电压相角 $\\angle V_1 = 0$ 弧度。\n- 母线 $1$ 和母线 $2$ 之间的变压器：串联阻抗 $z_{12} = 0.01 + j 0.04$ p.u.，非额定实际匝比 $t$ 从离散集合 $\\{0.95, 1.00, 1.05\\}$ 中选取。\n- 母线 $2$ 和母线 $3$ 之间的线路：串联阻抗 $z_{23} = 0.015 + j 0.06$ p.u.。\n- 母线 $3$ 处的离散并联电纳：$B_3 \\in \\{0.00, 0.05, 0.10\\}$ p.u.（作为 $j B_3$ 导纳添加）。\n- 所有母线的电压幅值限制：$|V_k| \\in [0.95, 1.05]$ p.u.。\n- 支路相角差限制：对于每个连接的节点对 $(i,k)$，$|\\angle V_i - \\angle V_k| \\le \\Delta_{\\max}$，其中 $\\Delta_{\\max} = 0.35$ 弧度。相角必须以弧度处理。\n\n潮流公式：\n- 母线 $2$ 和母线 $3$ 的负载由 $(P_2, Q_2)$ 和 $(P_3, Q_3)$ 指定，单位为兆瓦 (MW) 和兆乏 (MVAr)。\n- 使用 $S_{\\text{base}}$ 将负载转换为标幺值：$P_{\\ell,k}^{\\text{pu}} = P_k / S_{\\text{base}}$, $Q_{\\ell,k}^{\\text{pu}} = Q_k / S_{\\text{base}}$。\n- 将负载视为负复数注入功率：对于 $k \\in \\{2,3\\}$，$S_k^{\\text{spec}} = -P_{\\ell,k}^{\\text{pu}} - j Q_{\\ell,k}^{\\text{pu}}$。\n- 通过在母线 $k \\in \\{2,3\\}$ 上强制执行 $S_k(V) = V_k \\left(\\sum_j Y_{kj} V_j \\right)^\\ast = S_k^{\\text{spec}}$ 来求解交流潮流。未知数为 $|V_2|$, $\\angle V_2$, $|V_3|$, $\\angle V_3$；$V_1$ 是固定的。\n\n目标和约束：\n- 对于每个离散配置 $(t, B_3)$，求解潮流。检查约束：\n  - 电压幅值：对于 $k \\in \\{1,2,3\\}$，$|V_k| \\in [0.95, 1.05]$。\n  - 相角差：$|\\angle V_1 - \\angle V_2| \\le 0.35$ 和 $|\\angle V_2 - \\angle V_3| \\le 0.35$ 弧度。\n- 计算总有功功率损耗（单位 MW）为 $P_{\\text{loss}} = \\left(\\Re\\{S_1\\} - (P_{\\ell,2}^{\\text{pu}} + P_{\\ell,3}^{\\text{pu}})\\right) \\times S_{\\text{base}}$，其中 $S_1 = V_1 \\left(\\sum_j Y_{1j} V_j \\right)^\\ast$ 是平衡母线的复功率注入。并联电纳是纯无功的，不直接贡献有功功率；损耗来自支路电阻。\n- 在所有满足约束的离散配置中，选择最小化 $P_{\\text{loss}}$ 的一个。如果在 $10^{-6}$ MW 的容差内出现数值上的平局，则选择具有最小分接头索引的配置，然后是最小的并联支路索引，其中索引由下面的枚举顺序定义。\n\n离散决策索引：\n- 匝比枚举：索引 $0 \\mapsto 0.95$，索引 $1 \\mapsto 1.00$，索引 $2 \\mapsto 1.05$。\n- 并联电纳枚举：索引 $0 \\mapsto 0.00$ p.u.，索引 $1 \\mapsto 0.05$ p.u.，索引 $2 \\mapsto 0.10$ p.u.。\n\n测试套件：\n您必须对以下三个测试用例运行优化。所有相角必须是弧度，最终损耗必须以兆瓦 (MW) 报告。\n- 测试用例 1：$(P_2, Q_2, P_3, Q_3) = (60, 25, 50, 20)$ MW/MVAr。\n- 测试用例 2：$(P_2, Q_2, P_3, Q_3) = (90, 45, 90, 45)$ MW/MVAr。\n- 测试用例 3：$(P_2, Q_2, P_3, Q_3) = (70, 30, 40, 20)$ MW/MVAr。\n\n输出规格：\n- 对于每个测试用例，输出一个列表 $[i_{\\text{tap}}, i_{\\text{shunt}}, P_{\\text{loss}}]$，其中 $i_{\\text{tap}}$ 是分接头索引（一个整数），$i_{\\text{shunt}}$ 是并联支路索引（一个整数），$P_{\\text{loss}}$ 是最小化的有功功率损耗（一个浮点数），单位为 MW。\n- 如果某个测试用例没有可行的配置（没有解收敛或无法满足约束），则为该测试用例输出 $[-1, -1, \\mathrm{nan}]$。\n- 您的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表的结果（例如，\"[[i_tap1,i_shunt1,loss1],[i_tap2,i_shunt2,loss2],[i_tap3,i_shunt3,loss3]]\"）。相角必须以弧度处理；损耗必须以 MW 为单位。\n\n将具有上述规格的完整解决方案实现为单个可运行的程序。",
            "solution": "该问题要求在一个三母线电力系统中，为变压器匝比和并联电纳找到最优的离散设置，以在遵守母线电压幅值和支路相角差的运行约束的同时，最小化总有功功率损耗。这是一个离散优化问题，鉴于离散选择数量较少（3个分接头位置 × 3个并联电纳尺寸 = 共9种配置），可以通过穷举评估每种配置来解决。\n\n每个测试用例的解决过程包括以下步骤：\n1.  遍历由变压器匝比 $t$ 和并联电纳 $B_3$ 定义的 9 种离散配置。\n2.  对于每种配置，构建 $3 \\times 3$ 的节点导纳矩阵 $Y_{\\text{bus}}$。\n3.  使用牛顿-拉夫逊法求解非线性交流潮流方程，以找到负载母线（母线 $2$ 和母线 $3$）的电压幅值和相角。\n4.  检查得到的电压是否满足给定的幅值和相角差约束。\n5.  如果解是可行的，计算总有功功率损耗。\n6.  记录导致最小有功功率损耗的配置，并遵守指定的决胜规则。\n7.  如果没有可行的配置，则照此报告。\n\n以下各节详细说明了此过程中的每个步骤。\n\n### 步骤 1：节点导纳矩阵 ($Y_{\\text{bus}}$) 的形成\n潮流分析的基础是节点导纳矩阵 $Y_{\\text{bus}}$，它根据方程 $I = Y_{\\text{bus}}V$ 将母线电压相量与电流注入关联起来。对于给定的 $3$ 母线系统，$Y_{\\text{bus}}$ 是一个 $3 \\times 3$ 的矩阵。其元素由网络的支路和并联导纳确定。基准功率为 $S_{\\text{base}} = 100$ MVA。\n\n串联阻抗被转换为导纳：\n-   支路 $1-2$：$z_{12} = 0.01 + j0.04$ p.u. 导纳为 $y_{12} = 1/z_{12} \\approx 5.8824 - j23.5294$ p.u.。\n-   支路 $2-3$：$z_{23} = 0.015 + j0.06$ p.u. 导纳为 $y_{23} = 1/z_{23} \\approx 4.0 - j16.0$ p.u.。\n\n遵循为母线 $1$ 侧匝比为 $t$ 的非额定变压器、一条标准线路和母线 $3$ 处并联电纳 $B_3$ 提供的规则，$Y_{\\text{bus}}$ 矩阵构建如下：\n$$\nY_{\\text{bus}} =\n\\begin{pmatrix}\nY_{11}  Y_{12}  Y_{13} \\\\\nY_{21}  Y_{22}  Y_{23} \\\\\nY_{31}  Y_{32}  Y_{33}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\ny_{12}/t^2    -y_{12}/t        0 \\\\\n-y_{12}/t    y_{12} + y_{23}  -y_{23} \\\\\n0            -y_{23}          y_{23} + jB_3\n\\end{pmatrix}\n$$\n该矩阵针对 $(t, B_3)$ 的 9 种配置中的每一种进行构建，其中 $t \\in \\{0.95, 1.00, 1.05\\}$ 且 $B_3 \\in \\{0.00, 0.05, 0.10\\}$ p.u.。\n\n### 步骤 2：牛顿-拉夫逊法交流潮流求解\n定义了 $Y_{\\text{bus}}$ 后，我们求解潮流方程。母线 $1$ 是平衡母线，其电压固定为 $V_1 = 1.0 + j0.0$ p.u.。母线 $2$ 和 $3$ 是 PQ（负载）母线，必须满足指定的复功率注入 $S_k^{\\text{spec}}$。负载 $(P_k, Q_k)$ 被转换为标幺值注入：$S_k^{\\text{spec}} = -(P_k/S_{\\text{base}}) - j(Q_k/S_{\\text{base}})$。\n\n母线 $k$ 的功率平衡方程为：\n$P_k(V) = \\Re\\{V_k (\\sum_{j} Y_{kj} V_j)^*\\} = P_k^{\\text{spec}}$\n$Q_k(V) = \\Im\\{V_k (\\sum_{j} Y_{kj} V_j)^*\\} = Q_k^{\\text{spec}}$\n\n在极坐标形式下，使用 $V_k = |V_k|e^{j\\delta_k}$ 和 $Y_{kj} = G_{kj} + jB_{kj}$，这些方程为：\n$P_k(|V|, \\delta) = \\sum_{j=1}^3 |V_k||V_j|(G_{kj}\\cos(\\delta_k - \\delta_j) + B_{kj}\\sin(\\delta_k - \\delta_j))$\n$Q_k(|V|, \\delta) = \\sum_{j=1}^3 |V_k||V_j|(G_{kj}\\sin(\\delta_k - \\delta_j) - B_{kj}\\cos(\\delta_k - \\delta_j))$\n\n未知变量是 PQ 母线的电压幅值和相角：$x = [\\delta_2, \\delta_3, |V_2|, |V_3|]^T$。牛顿-拉夫逊法是一种用于找到解的迭代算法。从一个初始猜测（例如，“平启动”：$|V_2|=|V_3|=1.0$, $\\delta_2=\\delta_3=0$）开始，我们进行迭代：\n\n$x_{i+1} = x_i - J(x_i)^{-1} \\Delta F(x_i)$\n\n其中：\n-   $\\Delta F(x_i)$ 是迭代 $i$ 时的功率不平衡量向量：\n    $\\Delta F = [\\Delta P_2, \\Delta P_3, \\Delta Q_2, \\Delta Q_3]^T$，其中 $\\Delta P_k = P_k(V) - P_k^{\\text{spec}}$ 且 $\\Delta Q_k = Q_k(V) - Q_k^{\\text{spec}}$。\n-   $J(x_i)$ 是功率平衡方程相对于状态变量的偏导数构成的 $4 \\times 4$ 雅可比矩阵，在 $x_i$ 处求值：\n    $$\n    J = \\begin{pmatrix}\n    \\frac{\\partial P_2}{\\partial \\delta_2}  \\frac{\\partial P_2}{\\partial \\delta_3}  \\frac{\\partial P_2}{\\partial |V_2|}  \\frac{\\partial P_2}{\\partial |V_3|} \\\\\n    \\frac{\\partial P_3}{\\partial \\delta_2}  \\frac{\\partial P_3}{\\partial \\delta_3}  \\frac{\\partial P_3}{\\partial |V_2|}  \\frac{\\partial P_3}{\\partial |V_3|} \\\\\n    \\frac{\\partial Q_2}{\\partial \\delta_2}  \\frac{\\partial Q_2}{\\partial \\delta_3}  \\frac{\\partial Q_2}{\\partial |V_2|}  \\frac{\\partial Q_2}{\\partial |V_3|} \\\\\n    \\frac{\\partial Q_3}{\\partial \\delta_2}  \\frac{\\partial Q_3}{\\partial \\delta_3}  \\frac{\\partial Q_3}{\\partial |V_2|}  \\frac{\\partial Q_3}{\\partial |V_3|}\n    \\end{pmatrix}\n    $$\n迭代继续进行，直到不平衡向量元素的最大绝对值低于一个小的容差（例如，$10^{-9}$），或者达到最大迭代次数（表示不收敛）。\n\n### 步骤 3：可行性检查和损耗计算\n如果牛顿-拉夫逊算法收敛，则检查得到的电压分布 $(V_2, V_3)$ 是否满足运行约束：\n1.  **电压幅值约束**：对于 $k \\in \\{2, 3\\}$，$|V_k| \\in [0.95, 1.05]$ p.u.。\n2.  **相角差约束**：$|\\angle V_1 - \\angle V_2| \\le 0.35$ 和 $|\\angle V_2 - \\angle V_3| \\le 0.35$ 弧度。由于 $V_1$ 是参考，$\\angle V_1 = 0$，所以这些简化为 $|\\delta_2| \\le 0.35$ 和 $|\\delta_2 - \\delta_3| \\le 0.35$。\n\n一个配置只有在潮流计算收敛并且所有约束都得到满足时才被视为“可行的”。对于每个可行的配置，计算总有功功率损耗。由平衡母线注入的复功率是：\n$S_1 = P_1 + jQ_1 = V_1 I_1^* = V_1 \\left(Y_{11}V_1 + Y_{12}V_2 + Y_{13}V_3\\right)^*$\n由于 $V_1 = 1.0$ 且 $Y_{13}=0$，这简化为 $S_1 = (Y_{11} + Y_{12}V_2)^*$。\n\n标幺值下的总有功功率损耗是所有有功功率注入的总和，它等于平衡母线的有功功率减去负载消耗的有功功率：\n$P_{\\text{loss,pu}} = P_1 - (P_{\\ell,2}^{\\text{pu}} + P_{\\ell,3}^{\\text{pu}})$\n然后，以兆瓦 (MW) 为单位的损耗是：\n$P_{\\text{loss}} = P_{\\text{loss,pu}} \\times S_{\\text{base}}$\n\n### 步骤 4：优化算法\n优化过程系统地评估每个测试用例的所有 9 种配置。\n1.  初始化一个变量用于记录迄今为止找到的最佳损耗，设为无穷大 (`best_loss = float('inf')`)，并存储最佳配置的详细信息，例如 `best_config = [-1, -1, float('nan')]`。\n2.  遍历离散的分接头索引 $i_{\\text{tap}} \\in \\{0, 1, 2\\}$ 和并联支路索引 $i_{\\text{shunt}} \\in \\{0, 1, 2\\}$。这个顺序自然地处理了主要的决胜规则。\n3.  对于每种配置 $(i_{\\text{tap}}, i_{\\text{shunt}})$，如上所述求解潮流并检查可行性。\n4.  如果配置是可行的，计算其损耗 $P_{\\text{loss}}$。\n5.  将此损耗与当前最佳值进行比较。如果 $P_{\\text{loss}}  \\text{best\\_loss} - 10^{-6}$，则将 `best_loss` 更新为 $P_{\\text{loss}}$，并记录当前的索引 $(i_{\\text{tap}}, i_{\\text{shunt}})$ 和新的损耗值。严格的不等式结合迭代顺序正确地实现了在 $10^{-6}$ MW 容差内处理损耗平局的决胜规则。\n6.  检查完所有 9 种配置后，存储的 `best_config` 即为给定测试用例的结果。对所有三个测试用例重复此过程。\n\n这种全面的方法保证了能找到在满足所有系统约束的同时最小化有功功率损耗的离散配置，正如问题所要求的那样。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the power system optimization problem for the given test cases.\n    \"\"\"\n\n    # --- Problem Constants and Definitions ---\n    S_base = 100.0  # MVA\n    v_min, v_max = 0.95, 1.05  # p.u.\n    delta_max = 0.35  # radians\n    loss_tie_tol = 1e-6 # MW\n\n    z12 = 0.01 + 1j * 0.04\n    z23 = 0.015 + 1j * 0.06\n    y12 = 1.0 / z12\n    y23 = 1.0 / z23\n\n    tap_ratios = [0.95, 1.00, 1.05]\n    shunt_susceptances = [0.0, 0.05, 0.10]\n    \n    # Test cases in MW and MVAr\n    test_cases_mw_mvar = [\n        (60.0, 25.0, 50.0, 20.0),\n        (90.0, 45.0, 90.0, 45.0),\n        (70.0, 30.0, 40.0, 20.0),\n    ]\n\n    all_results = []\n\n    for case_loads in test_cases_mw_mvar:\n        p2_load, q2_load, p3_load, q3_load = case_loads\n        \n        # Convert loads to p.u. injections\n        s2_spec = -(p2_load / S_base) - 1j * (q2_load / S_base)\n        s3_spec = -(p3_load / S_base) - 1j * (q3_load / S_base)\n        s_spec = np.array([s2_spec, s3_spec])\n        p_spec = s_spec.real\n        q_spec = s_spec.imag\n\n        best_loss = float('inf')\n        best_config_result = [-1, -1, np.nan]\n\n        for i_tap, t in enumerate(tap_ratios):\n            for i_shunt, b3_shunt in enumerate(shunt_susceptances):\n\n                # --- 1. Form Y-bus matrix ---\n                y_bus = np.zeros((3, 3), dtype=np.complex128)\n                \n                # Transformer 1-2\n                y_bus[0, 0] += y12 / (t**2)\n                y_bus[0, 1] -= y12 / t\n                y_bus[1, 0] -= y12 / t\n                y_bus[1, 1] += y12\n                \n                # Line 2-3\n                y_bus[1, 1] += y23\n                y_bus[1, 2] -= y23\n                y_bus[2, 1] -= y23\n                y_bus[2, 2] += y23\n                \n                # Shunt 3\n                y_bus[2, 2] += 1j * b3_shunt\n                \n                g_bus = y_bus.real\n                b_bus = y_bus.imag\n\n                # --- 2. Newton-Raphson Power Flow ---\n                # State vector: [delta2, delta3, v2, v3]\n                # Note: bus 1 is slack (bus index 0)\n                v = np.ones(3, dtype=np.complex128) # v[0] = V1, v[1] = V2, v[2] = V3\n                v_mag = np.abs(v)\n                v_ang = np.angle(v)\n\n                pq_buses = [1, 2]  # 0-indexed for buses 2 and 3\n                n_pq = len(pq_buses)\n\n                converged = False\n                max_iter = 20\n                tol = 1e-9\n\n                for it in range(max_iter):\n                    # Calculate power injections\n                    s_calc = v * np.conj(y_bus @ v)\n                    p_calc = s_calc.real\n                    q_calc = s_calc.imag\n\n                    # Mismatch vector\n                    mismatch = np.concatenate([\n                        p_calc[pq_buses] - p_spec,\n                        q_calc[pq_buses] - q_spec\n                    ])\n\n                    if np.max(np.abs(mismatch))  tol:\n                        converged = True\n                        break\n\n                    # Jacobian Matrix J\n                    J = np.zeros((2 * n_pq, 2 * n_pq))\n                    \n                    # dP/d_delta\n                    for i_idx, i in enumerate(pq_buses):\n                        for j_idx, j in enumerate(pq_buses):\n                            if i == j: # Diagonal\n                                J[i_idx, j_idx] = -q_calc[i] - b_bus[i, i] * v_mag[i]**2\n                            else: # Off-diagonal\n                                J[i_idx, j_idx] = v_mag[i] * v_mag[j] * (g_bus[i, j] * np.sin(v_ang[i] - v_ang[j]) - b_bus[i, j] * np.cos(v_ang[i] - v_ang[j]))\n                    \n                    # dP/dV\n                    for i_idx, i in enumerate(pq_buses):\n                        for j_idx, j in enumerate(pq_buses):\n                            if i == j: # Diagonal\n                                J[i_idx, n_pq + j_idx] = p_calc[i] / v_mag[i] + g_bus[i, i] * v_mag[i]\n                            else: # Off-diagonal\n                                J[i_idx, n_pq + j_idx] = v_mag[i] * (g_bus[i, j] * np.cos(v_ang[i] - v_ang[j]) + b_bus[i, j] * np.sin(v_ang[i] - v_ang[j]))\n\n                    # dQ/d_delta\n                    for i_idx, i in enumerate(pq_buses):\n                        for j_idx, j in enumerate(pq_buses):\n                            if i == j: # Diagonal\n                                J[n_pq + i_idx, j_idx] = p_calc[i] - g_bus[i, i] * v_mag[i]**2\n                            else: # Off-diagonal\n                                J[n_pq + i_idx, j_idx] = -v_mag[i] * v_mag[j] * (g_bus[i, j] * np.cos(v_ang[i] - v_ang[j]) + b_bus[i, j] * np.sin(v_ang[i] - v_ang[j]))\n                    \n                    # dQ/dV\n                    for i_idx, i in enumerate(pq_buses):\n                        for j_idx, j in enumerate(pq_buses):\n                            if i == j: # Diagonal\n                                J[n_pq + i_idx, n_pq + j_idx] = q_calc[i] / v_mag[i] - b_bus[i, i] * v_mag[i]\n                            else: # Off-diagonal\n                                J[n_pq + i_idx, n_pq + j_idx] = v_mag[i] * (g_bus[i, j] * np.sin(v_ang[i] - v_ang[j]) - b_bus[i, j] * np.cos(v_ang[i] - v_ang[j]))\n\n                    # Solve for update\n                    try:\n                        update = np.linalg.solve(J, -mismatch)\n                    except np.linalg.LinAlgError:\n                        break # Jacobian is singular, non-convergence\n\n                    # Update state\n                    v_ang[pq_buses] += update[:n_pq]\n                    v_mag[pq_buses] += update[n_pq:]\n                    v = v_mag * np.exp(1j * v_ang)\n\n                if not converged:\n                    continue\n\n                # --- 3. Check Constraints ---\n                v_mag_final = np.abs(v)\n                v_ang_final = np.angle(v)\n                \n                volt_ok = np.all((v_mag_final >= v_min)  (v_mag_final = v_max))\n                \n                angle_diff12 = np.abs(v_ang_final[0] - v_ang_final[1])\n                angle_diff23 = np.abs(v_ang_final[1] - v_ang_final[2])\n                \n                angles_ok = (angle_diff12 = delta_max) and (angle_diff23 = delta_max)\n\n                if not (volt_ok and angles_ok):\n                    continue\n                \n                # --- 4. Calculate Losses ---\n                s1_inj = v[0] * np.conj(y_bus[0,0]*v[0] + y_bus[0,1]*v[1] + y_bus[0,2]*v[2])\n                p1_inj = s1_inj.real\n                \n                p_load_total_pu = (p2_load + p3_load) / S_base\n                p_loss_pu = p1_inj - p_load_total_pu\n                p_loss_mw = p_loss_pu * S_base\n\n                # --- 5. Update Best Result ---\n                if p_loss_mw  best_loss - loss_tie_tol:\n                    best_loss = p_loss_mw\n                    best_config_result = [i_tap, i_shunt, best_loss]\n\n        all_results.append(best_config_result)\n\n    # --- Final Output Formatting ---\n    # Using a custom string representation to avoid spaces after commas\n    formatted_results = []\n    for res in all_results:\n        if np.isnan(res[2]):\n            formatted_results.append(f\"[-1,-1,nan]\")\n        else:\n            formatted_results.append(f\"[{res[0]},{res[1]},{res[2]:.7f}]\")\n\n    print(f\"[{','.join(formatted_results)}]\")\n\nsolve()\n```"
        }
    ]
}
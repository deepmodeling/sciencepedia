{
    "hands_on_practices": [
        {
            "introduction": "Understanding transient stability begins with the core principles governing a generator's motion following a disturbance. This exercise  grounds your learning in the fundamental swing equation and the elegant graphical method derived from it: the equal area criterion. By working through this problem, you will gain hands-on practice in calculating the critical clearing angle, a foundational metric that quantifies how quickly a fault must be cleared to prevent a generator from losing synchronism with the grid.",
            "id": "4131463",
            "problem": "Consider a Single-Machine Infinite-Bus (SMIB) system under the classical model of a synchronous generator connected to a very large grid, where the generator rotor dynamics are governed by the swing equation. The swing equation states that the rotor angle $\\delta$ evolves according to $M \\,\\frac{d^{2}\\delta}{dt^{2}} = P_{m} - P_{e}(\\delta)$, where $M$ is the angular momentum constant, $P_{m}$ is the constant mechanical input power, and $P_{e}(\\delta)$ is the electrical air-gap power delivered to the network as a function of $\\delta$. Under a three-phase short circuit near the generator, assume the electrical power during the fault is zero, so the accelerating power during the fault is $P_{a,\\mathrm{fault}} = P_{m}$. The fault is cleared without a permanent topology change, such that the post-fault electrical power-angle relation is $P_{e,\\mathrm{post}}(\\delta) = 1.5 \\sin\\delta$ (per unit). The pre-fault steady operating point satisfies $P_{e,\\mathrm{pre}}(\\delta_{0}) = P_{m}$ and is identical to the post-fault transfer characteristic $P_{e,\\mathrm{post}}(\\delta)$.\n\nStarting from the swing equation and the definition of kinetic energy $T = \\frac{1}{2} M \\left(\\frac{d\\delta}{dt}\\right)^{2}$, use conservation of energy along the first swing to derive the equal area condition by integrating the accelerating and decelerating powers. Then, compute the critical clearing angle $\\delta_{\\mathrm{cr}}$ numerically for $P_{m} = 0.9$ (per unit) and $P_{e,\\mathrm{post}}(\\delta) = 1.5 \\sin\\delta$ (per unit). Interpret the maximum excursion angle on the post-fault system as the unstable equilibrium angle. Round your final numerical answer to four significant figures and express the angle in radians.",
            "solution": "The rotor dynamics under the classical model follow the swing equation $M \\,\\frac{d^{2}\\delta}{dt^{2}} = P_{m} - P_{e}(\\delta)$. Define the kinetic energy as $T = \\frac{1}{2} M \\left(\\frac{d\\delta}{dt}\\right)^{2}$. Differentiating $T$ with respect to time and using the swing equation yields\n$$\n\\frac{dT}{dt} = M \\frac{d\\delta}{dt} \\frac{d^{2}\\delta}{dt^{2}} = \\left(P_{m} - P_{e}(\\delta)\\right)\\frac{d\\delta}{dt}.\n$$\nAssuming no damping and no losses, the change in kinetic energy over an interval of $\\delta$ equals the area of accelerating power minus decelerating power on the power-angle curve. During the fault, $P_{e,\\mathrm{fault}}(\\delta) = 0$, so the accelerating power is $P_{a,\\mathrm{fault}} = P_{m}$, and the kinetic energy gained from $\\delta_{0}$ to the clearing angle $\\delta_{c}$ is\n$$\nA_{\\mathrm{acc}} = \\int_{\\delta_{0}}^{\\delta_{c}} \\left(P_{m} - P_{e,\\mathrm{fault}}(\\delta)\\right) \\, d\\delta = \\int_{\\delta_{0}}^{\\delta_{c}} P_{m} \\, d\\delta = P_{m} (\\delta_{c} - \\delta_{0}).\n$$\nImmediately after clearing, the post-fault electrical power is $P_{e,\\mathrm{post}}(\\delta) = P_{\\max} \\sin \\delta$ with $P_{\\max} = 1.5$, and the decelerating power becomes $P_{d,\\mathrm{post}}(\\delta) = P_{e,\\mathrm{post}}(\\delta) - P_{m}$. The kinetic energy lost from $\\delta_{c}$ to the first-swing maximum angle $\\delta_{m}$ is\n$$\nA_{\\mathrm{dec}} = \\int_{\\delta_{c}}^{\\delta_{m}} \\left(P_{e,\\mathrm{post}}(\\delta) - P_{m}\\right) \\, d\\delta = \\int_{\\delta_{c}}^{\\delta_{m}} P_{\\max} \\sin\\delta \\, d\\delta - \\int_{\\delta_{c}}^{\\delta_{m}} P_{m} \\, d\\delta.\n$$\nEvaluating the integrals gives\n$$\nA_{\\mathrm{dec}} = \\left[- P_{\\max} \\cos\\delta\\right]_{\\delta_{c}}^{\\delta_{m}} - P_{m}(\\delta_{m} - \\delta_{c}) = P_{\\max}(\\cos\\delta_{c} - \\cos\\delta_{m}) - P_{m}(\\delta_{m} - \\delta_{c}).\n$$\nThe equal area criterion for the first swing stability boundary is enforced by $A_{\\mathrm{acc}} = A_{\\mathrm{dec}}$, which yields\n$$\nP_{m}(\\delta_{c} - \\delta_{0}) = P_{\\max}(\\cos\\delta_{c} - \\cos\\delta_{m}) - P_{m}(\\delta_{m} - \\delta_{c}).\n$$\nRearranging terms,\n$$\nP_{m}(\\delta_{m} - \\delta_{0}) = P_{\\max}(\\cos\\delta_{c} - \\cos\\delta_{m}),\n$$\nand thus\n$$\nP_{\\max}\\cos\\delta_{c} = P_{m}(\\delta_{m} - \\delta_{0}) + P_{\\max}\\cos\\delta_{m}.\n$$\nTo uniquely determine $\\delta_{c}$, one must specify $\\delta_{m}$ for the critical case. For a sinusoidal power-angle curve, the maximum excursion angle under the critical clearing condition coincides with the unstable equilibrium of the post-fault system, at which the electrical and mechanical powers are equal and the system would neither accelerate nor decelerate if reached with zero speed. The post-fault steady angle $\\delta_{1}$ satisfies\n$$\nP_{e,\\mathrm{post}}(\\delta_{1}) = P_{m} \\quad \\Rightarrow \\quad P_{\\max}\\sin\\delta_{1} = P_{m} \\quad \\Rightarrow \\quad \\sin\\delta_{1} = \\frac{P_{m}}{P_{\\max}}.\n$$\nThe unstable equilibrium angle is\n$$\n\\delta_{u} = \\pi - \\delta_{1}, \\quad \\text{with} \\quad P_{e,\\mathrm{post}}(\\delta_{u}) = P_{m}.\n$$\nUnder the assumed scenario, the pre-fault transfer characteristic equals the post-fault one, so the pre-fault operating angle is\n$$\n\\delta_{0} = \\delta_{1} = \\arcsin\\!\\left(\\frac{P_{m}}{P_{\\max}}\\right).\n$$\nThus, we set $\\delta_{m} = \\delta_{u} = \\pi - \\delta_{0}$ in the equal area equation:\n$$\nP_{\\max}\\cos\\delta_{c} = P_{m}(\\delta_{u} - \\delta_{0}) + P_{\\max}\\cos\\delta_{u}.\n$$\nSolving for $\\delta_{c}$ gives\n$$\n\\cos\\delta_{c} = \\frac{P_{m}(\\delta_{u} - \\delta_{0}) + P_{\\max}\\cos\\delta_{u}}{P_{\\max}},\n$$\nand then\n$$\n\\delta_{c} = \\arccos\\!\\left(\\frac{P_{m}(\\delta_{u} - \\delta_{0}) + P_{\\max}\\cos\\delta_{u}}{P_{\\max}}\\right).\n$$\nNow substitute the given numerical values. First, compute the pre-fault angle:\n$$\n\\delta_{0} = \\arcsin\\!\\left(\\frac{P_{m}}{P_{\\max}}\\right) = \\arcsin\\!\\left(\\frac{0.9}{1.5}\\right) = \\arcsin(0.6).\n$$\nHence,\n$$\n\\delta_{u} = \\pi - \\delta_{0} = \\pi - \\arcsin(0.6).\n$$\nAlso, using the identity $\\cos(\\pi - \\theta) = -\\cos\\theta$ and $\\cos\\delta_{0} = \\sqrt{1 - \\sin^{2}\\delta_{0}} = \\sqrt{1 - 0.6^{2}} = 0.8$, we have\n$$\n\\cos\\delta_{u} = -\\cos\\delta_{0} = -0.8.\n$$\nTherefore,\n$$\n\\cos\\delta_{c} = \\frac{0.9\\left(\\delta_{u} - \\delta_{0}\\right) + 1.5(-0.8)}{1.5} = \\frac{0.9\\left(\\pi - 2\\,\\arcsin(0.6)\\right) - 1.2}{1.5}.\n$$\nNumerically, $\\arcsin(0.6) \\approx 0.643501108793$, so\n$$\n\\delta_{u} - \\delta_{0} = \\pi - 2\\,\\arcsin(0.6) \\approx 3.141592653589793 - 2 \\times 0.643501108793 \\approx 1.854590436003.\n$$\nThen\n$$\n\\cos\\delta_{c} \\approx \\frac{0.9 \\times 1.854590436003 - 1.2}{1.5} \\approx \\frac{1.669131392403 - 1.2}{1.5} \\approx \\frac{0.469131392403}{1.5} \\approx 0.312754261602.\n$$\nFinally,\n$$\n\\delta_{c} = \\arccos(0.312754261602) \\approx 1.252672 \\text{ rad}.\n$$\nRounding to four significant figures and expressing the angle in radians gives $\\delta_{\\mathrm{cr}} \\approx 1.253$.",
            "answer": "$$\\boxed{1.253}$$"
        },
        {
            "introduction": "Building on the concept of critical clearing, this practice explores how operational decisions and network topology directly influence stability margins. This problem  presents a comparative analysis between two different fault-clearing strategies, demonstrating how the post-contingency network strength affects the critical clearing time (CCT). This exercise will deepen your understanding of the trade-offs involved in designing system protection schemes to ensure grid security.",
            "id": "4131456",
            "problem": "A Single-Machine Infinite Bus (SMIB) generator is economically dispatched at mechanical input power $P_m$ and connected to an infinite bus through two identical parallel transmission lines, each with series reactance $X_\\ell$. The generator internal electromotive force behind transient reactance is $E'$ and the infinite bus voltage magnitude is $V$. A solid three-phase fault occurs at the generator terminals and is cleared either by tripping the faulted transmission line (leaving one line in service) or by clearing the fault and reclosing so that the original two-line topology is restored. Assume the classical machine model with constant $E'$ during the transient, negligible damping, and that electrical air-gap power during the solid fault is approximately zero.\n\nGiven the following data:\n- $E' = 1.1 \\,\\mathrm{pu}$, $V = 1.0 \\,\\mathrm{pu}$,\n- Each line reactance $X_\\ell = 1.2 \\,\\mathrm{pu}$, so the pre-fault network reactance seen by the generator is $X_{\\text{pre}} = \\left(X_\\ell \\parallel X_\\ell\\right) = 0.6 \\,\\mathrm{pu}$,\n- Dispatch level $P_m = 0.5 \\,\\mathrm{pu}$,\n- Machine inertia constant $H = 5 \\,\\mathrm{s}$, synchronous electrical angular speed $\\omega_s = 2 \\pi \\times 60 \\,\\mathrm{rad/s}$.\n\nUse first principles—the swing equation and the equal-area criterion—to determine how clearing by tripping the faulted line versus clearing to the original topology changes the post-fault decelerating power and therefore the Critical Clearing Time (CCT). Compute the approximate CCT in both cases.\n\nSelect the option that correctly states the physical reason for the difference and is consistent with your computed CCT values.\n\nA. Tripping the faulted line increases the post-fault network reactance and reduces the maximum electrical power transfer, thereby reducing the decelerating power and the decelerating area; the CCT is shorter with line tripping, approximately $t_c \\approx 0.30 \\,\\mathrm{s}$ versus $t_c \\approx 0.41 \\,\\mathrm{s}$ when the original topology is restored.\n\nB. Tripping the faulted line reduces power flow and thus increases decelerating power; the CCT is longer with line tripping, approximately $t_c \\approx 0.41 \\,\\mathrm{s}$ versus $t_c \\approx 0.30 \\,\\mathrm{s}$ when the original topology is restored.\n\nC. The CCT is identical under both clearing strategies because the fault-time acceleration is the same; topology after clearing does not affect the equal-area balance.\n\nD. Because the synchronizing torque constant is lower when a line is tripped, the machine accelerates more slowly during the fault, so the CCT is larger in the tripped case.",
            "solution": "The analysis relies on the power-angle relationship and the equal-area criterion derived from the swing equation.\n\nThe power transferred from the generator to the infinite bus is given by:\n$$P_e = \\frac{E'V}{X} \\sin\\delta = P_{\\max} \\sin\\delta$$\nwhere $X$ is the total reactance between $E'$ and $V$, and $\\delta$ is the rotor angle.\n\nThe swing equation governs the rotor dynamics:\n$$\\frac{2H}{\\omega_s} \\frac{d^2\\delta}{dt^2} = P_m - P_e$$\n\nThe Critical Clearing Time ($t_c$) is the maximum time a fault can persist without the system losing synchronism. It corresponds to a Critical Clearing Angle ($\\delta_c$), where the accelerating area ($A_{acc}$) accumulated during the fault equals the maximum possible decelerating area ($A_{dec}$) available after the fault is cleared.\n\n$A_{acc} = \\int_{\\delta_0}^{\\delta_c} (P_m - P_e^{\\text{fault}}) \\,d\\delta$\n$A_{dec} = \\int_{\\delta_c}^{\\delta_{\\max}} (P_e^{\\text{post}} - P_m) \\,d\\delta$\n\nThe critical condition is $A_{acc} = A_{dec}$.\n\n**1. Pre-Fault Conditions (Common to Both Scenarios)**\n- Pre-fault reactance: $X_{\\text{pre}} = 0.6 \\,\\mathrm{pu}$.\n- Pre-fault maximum power: $P_{\\max}^{\\text{pre}} = \\frac{E'V}{X_{\\text{pre}}} = \\frac{1.1 \\times 1.0}{0.6} \\approx 1.8333 \\,\\mathrm{pu}$.\n- At steady state, $P_e = P_m$. The initial rotor angle $\\delta_0$ is found from:\n  $P_m = P_{\\max}^{\\text{pre}} \\sin\\delta_0 \\implies 0.5 = 1.8333 \\sin\\delta_0$.\n- $\\sin\\delta_0 = \\frac{0.5}{1.8333} \\approx 0.2727$.\n- $\\delta_0 = \\arcsin(0.2727) \\approx 0.2762 \\,\\mathrm{rad}$.\n\n**2. During-Fault Conditions (Common to Both Scenarios)**\n- A three-phase fault at the generator terminals isolates it from the network.\n- Electrical power output is given as $P_e^{\\text{fault}} \\approx 0$.\n- The accelerating power is $P_a = P_m - P_e^{\\text{fault}} = 0.5 - 0 = 0.5 \\,\\mathrm{pu}$.\n- The accelerating area is $A_{acc} = \\int_{\\delta_0}^{\\delta_c} P_m \\,d\\delta = P_m (\\delta_c - \\delta_0)$.\n\n**3. Post-Fault Scenario 1: Clearing by Reclosing (Original Topology Restored)**\n- The post-fault network is identical to the pre-fault network.\n- Post-fault reactance: $X_{\\text{post1}} = X_{\\text{pre}} = 0.6 \\,\\mathrm{pu}$.\n- Post-fault maximum power: $P_{\\max}^{\\text{post1}} = P_{\\max}^{\\text{pre}} \\approx 1.8333 \\,\\mathrm{pu}$.\n- The maximum swing angle, $\\delta_{\\max1}$, is found from the stability limit where $P_e^{\\text{post1}}(\\delta_{\\max1}) = P_m$, which is $\\delta_{\\max1} = \\pi - \\delta_0 = \\pi - 0.2762 \\approx 2.8654 \\,\\mathrm{rad}$.\n- The equal-area criterion gives the critical clearing angle $\\delta_{c1}$:\n  $\\cos\\delta_{c1} = \\frac{P_m(\\delta_{\\max1} - \\delta_0) + P_{\\max}^{\\text{post1}}\\cos\\delta_{\\max1}}{P_{\\max}^{\\text{post1}}}$.\n  Using the common simplified form for this case ($P_e^\\text{fault}=0$, $P_e^\\text{post}=P_e^\\text{pre}$):\n  $\\cos\\delta_{c1} = \\frac{P_m}{P_{\\max}^{\\text{post1}}}(\\pi - 2\\delta_0) - \\cos\\delta_0$.\n  $\\cos\\delta_0 = \\sqrt{1 - \\sin^2\\delta_0} = \\sqrt{1 - (0.2727)^2} \\approx 0.9621$.\n  $\\cos\\delta_{c1} = \\frac{0.5}{1.8333}(\\pi - 2 \\times 0.2762) - 0.9621 = 0.2727(2.5892) - 0.9621 = 0.7061 - 0.9621 = -0.2560$.\n  $\\delta_{c1} = \\arccos(-0.2560) \\approx 1.8296 \\,\\mathrm{rad}$.\n- The CCT, $t_{c1}$, is found by integrating the swing equation during the fault ($P_e = 0$): $\\frac{d^2\\delta}{dt^2} = \\frac{\\omega_s P_m}{2H}$, which yields $\\delta_c - \\delta_0 = \\frac{1}{2}\\left(\\frac{\\omega_s P_m}{2H}\\right)t_c^2$.\n  $t_{c1} = \\sqrt{\\frac{4H(\\delta_{c1} - \\delta_0)}{\\omega_s P_m}} = \\sqrt{\\frac{4(5)(1.8296 - 0.2762)}{(2\\pi \\times 60)(0.5)}} = \\sqrt{\\frac{20(1.5534)}{188.4956}} \\approx \\sqrt{0.1648} \\approx 0.4060 \\,\\mathrm{s}$.\n\n**4. Post-Fault Scenario 2: Clearing by Tripping the Faulted Line**\n- One line is tripped, leaving a single line in service.\n- Post-fault reactance: $X_{\\text{post2}} = X_\\ell = 1.2 \\,\\mathrm{pu}$.\n- Post-fault maximum power: $P_{\\max}^{\\text{post2}} = \\frac{E'V}{X_{\\text{post2}}} = \\frac{1.1 \\times 1.0}{1.2} \\approx 0.9167 \\,\\mathrm{pu}$. This is significantly lower than in Scenario 1.\n- The maximum swing angle, $\\delta_{\\max2}$, is found where $P_e^{\\text{post2}}(\\delta_{\\max2}) = P_m$:\n  $\\sin\\delta_{\\max2} = \\frac{P_m}{P_{\\max}^{\\text{post2}}} = \\frac{0.5}{0.9167} \\approx 0.5454$.\n  The stability limit is $\\delta_{\\max2} = \\pi - \\arcsin(0.5454) = \\pi - 0.5768 \\approx 2.5648 \\,\\mathrm{rad}$.\n- The critical clearing angle $\\delta_{c2}$ is found from the general equal-area formula:\n  $\\cos\\delta_{c2} = \\frac{P_m(\\delta_{\\max2} - \\delta_0) + P_{\\max}^{\\text{post2}}\\cos\\delta_{\\max2}}{P_{\\max}^{\\text{post2}}}$.\n  $\\cos\\delta_{\\max2} = \\cos(2.5648) \\approx -0.8381$.\n  $\\cos\\delta_{c2} = \\frac{0.5(2.5648 - 0.2762) + 0.9167(-0.8381)}{0.9167} = \\frac{1.1443 - 0.7683}{0.9167} = \\frac{0.3760}{0.9167} \\approx 0.4102$.\n  $\\delta_{c2} = \\arccos(0.4102) \\approx 1.1480 \\,\\mathrm{rad}$.\n- The CCT, $t_{c2}$, is calculated as before:\n  $t_{c2} = \\sqrt{\\frac{4H(\\delta_{c2} - \\delta_0)}{\\omega_s P_m}} = \\sqrt{\\frac{4(5)(1.1480 - 0.2762)}{(2\\pi \\times 60)(0.5)}} = \\sqrt{\\frac{20(0.8718)}{188.4956}} \\approx \\sqrt{0.0925} \\approx 0.3041 \\,\\mathrm{s}$.\n\n**Summary of Results and Physical Interpretation**\n- Scenario 1 (Reclosing): $P_{\\max}^{\\text{post1}} \\approx 1.83 \\,\\mathrm{pu}$, CCT $t_{c1} \\approx 0.41 \\,\\mathrm{s}$.\n- Scenario 2 (Tripping): $P_{\\max}^{\\text{post2}} \\approx 0.92 \\,\\mathrm{pu}$, CCT $t_{c2} \\approx 0.30 \\,\\mathrm{s}$.\n\nTripping a line increases the post-fault network reactance (from $0.6$ to $1.2 \\,\\mathrm{pu}$), which weakens the connection to the infinite bus. This weakening reduces the maximum electrical power that can be transferred ($P_{\\max}$ drops from $1.83$ to $0.92 \\,\\mathrm{pu}$). A lower $P_{\\max}$ means the post-fault power curve $P_e^{\\text{post}}(\\delta)$ is lower. Consequently, for any given angle $\\delta$, the available decelerating power, $P_e^{\\text{post}}(\\delta) - P_m$, is smaller. This reduces the total available decelerating area. To maintain stability, the accelerating area accumulated during the fault must be smaller. This requires clearing the fault at a smaller angle ($\\delta_{c2} < \\delta_{c1}$), which translates to a shorter critical clearing time ($t_{c2} < t_{c1}$).\n\nThe calculations confirm that option A is correct both in its reasoning and its numerical results.",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "The ultimate goal of studying transient stability in this context is to integrate it into economic decision-making for grid operations. This final, capstone exercise  challenges you to build a complete Transient Stability-Constrained Unit Commitment (TSCUC) model from the ground up. By coding a solution that co-optimizes generation costs while respecting a stability constraint, you will bridge the gap between abstract stability theory and its practical application in secure and economic power system scheduling.",
            "id": "4131465",
            "problem": "You must design and implement a complete, runnable program that computes the optimal multi-period schedule and dispatch for a Transient Stability-Constrained Unit Commitment (TSCUC) problem. Your program must minimize total cost while enforcing binary unit commitment, ramping, minimum up/down times, and a transient stability constraint for each period’s dispatch. The setting is a small, discrete-time power system over a finite horizon. The final output must be a single line as specified at the end of this problem statement.\n\nThe fundamental base of the problem must begin from the following well-tested formulas and core definitions:\n\n1. Power balance: For each period $t$, the total dispatched power equals the load,\n$$\\sum_{i=1}^{N} p_{i,t} = L_t,$$\nwhere $N$ is the number of generators, $p_{i,t}$ is the dispatch (in megawatts) of generator $i$ at period $t$, and $L_t$ is the system load.\n\n2. Binary unit commitment: For each generator $i$ and period $t$, define a binary status $u_{i,t} \\in \\{0,1\\}$ indicating off/on. Dispatch must satisfy operational bounds when on,\n$$u_{i,t} P^{\\min}_i \\le p_{i,t} \\le u_{i,t} P^{\\max}_i,$$\nand if $u_{i,t} = 0$ then $p_{i,t} = 0$.\n\n3. Ramping constraints: For each generator $i$ and consecutive periods $t-1$ and $t$,\n$$|p_{i,t} - p_{i,t-1}| \\le R_i,$$\nwhere $R_i$ is the ramp limit (in megawatts per period).\n\n4. Minimum up/down times: For each generator $i$, once started ($u_{i,t-1} = 0$ and $u_{i,t} = 1$), it must remain on for at least $UT_i$ consecutive periods. Once shut down ($u_{i,t-1} = 1$ and $u_{i,t} = 0$), it must remain off for at least $DT_i$ consecutive periods.\n\n5. Transient stability constraint based on rate-of-change-of-frequency (RoCoF): Using the aggregated kinetic energy approximation $E_t = \\sum_{i=1}^{N} H_i S_i u_{i,t}$ (in megawatt-seconds), where $H_i$ is the inertia constant (in seconds) and $S_i$ is the machine rating (in megawatts), enforce the bound arising from frequency dynamics\n$$\\left|\\frac{df}{dt}\\right| \\approx \\frac{P_{\\text{loss},t}}{2 f_0 E_t} \\le R_{\\max},$$\nwhere $P_{\\text{loss},t}$ is the largest online in-feed at period $t$ (taken as $\\max_{i} p_{i,t}$), $f_0$ is the nominal frequency (in hertz), and $R_{\\max}$ is the maximum allowable RoCoF (in hertz per second). Equivalently, enforce\n$$E_t \\ge \\frac{P_{\\text{loss},t}}{2 R_{\\max} f_0}.$$\n\n6. Cost model: For each generator $i$, each period has a variable production cost $c_i$ (in dollars per megawatt-hour) and a start-up cost $SU_i$ (in dollars) incurred when $u_{i,t-1} = 0$ and $u_{i,t} = 1$. Assume each period duration is $1$ hour. The total cost over all periods is\n$$\\sum_{t} \\sum_{i} \\left( c_i \\, p_{i,t} + SU_i \\cdot \\mathbf{1}\\{u_{i,t-1} = 0, u_{i,t} = 1\\} \\right),$$\nwhere $\\mathbf{1}\\{\\cdot\\}$ is the indicator function.\n\nYou must implement an algorithm that searches over feasible commitment schedules $u_{i,t}$ and dispatch levels $p_{i,t}$ respecting all constraints above and returns the minimal achievable total cost. To ensure computational tractability and testability, the dispatch variables must be restricted to a uniform discretization grid of $10$ megawatts, that is, $p_{i,t} \\in \\{0, 10, 20, \\dots\\}$, and loads are chosen to be multiples of $10$ megawatts.\n\nInitial conditions: At period $t=0$, all generators are off ($u_{i,0} = 0$), all previous outputs are zero ($p_{i,0} = 0$), and all generators have been off long enough to allow immediate start ($DT_i$ satisfied). The minimum up/down time counters must be enforced across the horizon.\n\nPhysical and numerical units: Use megawatts for power, megawatt-seconds for inertia energy, hertz for frequency, hertz per second for RoCoF, and dollars for cost. Express the final answer in dollars as a float for each test case, rounded to two decimal places. Angles do not appear, so no angle unit is required.\n\nProgram input assumptions: There is no external input to your program. All parameters are embedded. Your program must compute results for the following test suite of three cases, each sharing the same generator data but having different load profiles and/or RoCoF limits:\n\nGenerator data (constant across all test cases):\n- Number of generators $N = 3$.\n- For $i = 1$ (generator $G1$): $P^{\\min}_1 = 20$ MW, $P^{\\max}_1 = 100$ MW, $R_1 = 40$ MW/period, $UT_1 = 2$ periods, $DT_1 = 1$ periods, $c_1 = 30$ dollars/MWh, $SU_1 = 300$ dollars, $H_1 = 1.5$ s, $S_1 = 50$ MW.\n- For $i = 2$ (generator $G2$): $P^{\\min}_2 = 10$ MW, $P^{\\max}_2 = 60$ MW, $R_2 = 30$ MW/period, $UT_2 = 1$ periods, $DT_2 = 1$ periods, $c_2 = 35$ dollars/MWh, $SU_2 = 200$ dollars, $H_2 = 1.25$ s, $S_2 = 30$ MW.\n- For $i = 3$ (generator $G3$): $P^{\\min}_3 = 0$ MW, $P^{\\max}_3 = 50$ MW, $R_3 = 50$ MW/period, $UT_3 = 1$ periods, $DT_3 = 1$ periods, $c_3 = 15$ dollars/MWh, $SU_3 = 100$ dollars, $H_3 = 0$ s, $S_3 = 50$ MW.\n\nSystem frequency and discretization:\n- Nominal frequency $f_0 = 50$ Hz.\n- Dispatch discretization step is $10$ MW.\n\nTest suite:\n- Case $1$: Horizon length $T = 4$ periods. Loads $L = [40, 50, 60, 70]$ MW. RoCoF limit $R_{\\max} = 0.5$ Hz/s.\n- Case $2$: Horizon length $T = 4$ periods. Loads $L = [120, 80, 130, 90]$ MW. RoCoF limit $R_{\\max} = 0.5$ Hz/s.\n- Case $3$: Horizon length $T = 4$ periods. Loads $L = [50, 20, 50, 20]$ MW. RoCoF limit $R_{\\max} = 0.25$ Hz/s.\n\nDesign for coverage:\n- Case $1$ exercises stability enforcement when an inverter-based resource (zero inertia) would be economically preferred but violates the inertia requirement, thereby forcing commitment of a synchronous unit.\n- Case $2$ creates ramp-constrained transitions across consecutive periods with sharp load changes.\n- Case $3$ combines minimum up-time enforcement with a stricter RoCoF limit across alternating lower loads.\n\nYour program should produce a single line of output containing the minimal total cost for each case, in dollars, rounded to two decimal places, aggregated as a comma-separated list enclosed in square brackets (e.g., \"[result1,result2,result3]\").",
            "solution": "The problem presented is a Transient Stability-Constrained Unit Commitment (TSCUC) problem. It requires finding a minimum-cost schedule for turning a set of power generators on and off, and setting their power output levels over a discrete time horizon, subject to a set of complex, interacting constraints. The problem is well-defined, scientifically grounded in power systems engineering principles, and fully specified with all necessary data and constraints. It constitutes a valid mixed-integer optimization problem.\n\nThe core challenge lies in the combinatorial nature of the unit commitment decisions (on/off choices) coupled with the time-dependent constraints like ramping limits and minimum up/down times, and the system-wide transient stability constraint. The problem size, with $3$ generators over a $4$-period horizon, makes an exhaustive search over commitment schedules computationally feasible. The overall strategy will be a two-stage process:\n\n1.  **Enumeration of Valid Commitment Schedules**: First, we generate all possible on/off schedules for the generators over the time horizon. A schedule is a binary matrix $u_{i,t}$, where $i$ is the generator index and $t$ is the time period. For $N=3$ generators and $T=4$ periods, there are $2^{N \\times T} = 2^{12} = 4096$ possible schedules. Each of these schedules is then validated against the minimum up-time ($UT_i$) and minimum down-time ($DT_i$) constraints. Invalid schedules are discarded. For each valid schedule, the total startup cost is calculated based on the specified startup costs ($SU_i$).\n\n2.  **Optimal Dispatch via Dynamic Programming**: For each valid commitment schedule, we must find the optimal power dispatch $p_{i,t}$ for each generator at each time period. This subproblem, known as multi-period economic dispatch, aims to minimize the total variable generation cost $\\sum_{t,i} c_i p_{i,t}$ subject to several constraints:\n    *   **Power Balance**: The total power generated must meet the load $L_t$ at each period $t$.\n    *   **Generation Limits**: Each committed generator must operate within its minimum ($P^{\\min}_i$) and maximum ($P^{\\max}_i$) power limits.\n    *   **Ramping Limits**: The change in a generator's output between consecutive periods cannot exceed its ramp rate $R_i$.\n    *   **Transient Stability**: This constraint, $E_t \\ge \\frac{\\max_{i} p_{i,t}}{2 R_{\\max} f_0}$, links the dispatch levels of all generators within a period. The available kinetic energy $E_t = \\sum_i H_i S_i u_{i,t}$ is constant for a given commitment schedule at time $t$. The constraint can be rearranged to impose an additional upper limit on the dispatch of every generator: $p_{i,t} \\le 2 R_{\\max} f_0 E_t$. The effective maximum power for generator $i$ at time $t$ thus becomes $\\min(P^{\\max}_i, 2 R_{\\max} f_0 E_t)$.\n\n    This multi-period dispatch problem is solved using dynamic programming (DP). The problem has optimal substructure and overlapping subproblems, as the decision at time $t$ depends only on the state at $t-1$.\n    *   **DP Stages**: The time periods $t=1, \\dots, T$.\n    *   **DP State**: The state at stage $t$ is the dispatch vector $(p_{1,t}, \\dots, p_{N,t})$.\n    *   **DP Recurrence**: Let $\\text{Cost}(t, \\vec{p}_t)$ be the minimum cumulative variable cost up to period $t$, ending in dispatch state $\\vec{p}_t$. The recurrence relation is:\n        $$ \\text{Cost}(t, \\vec{p}_t) = \\left( \\sum_i c_i p_{i,t} \\right) + \\min_{\\vec{p}_{t-1}} \\{ \\text{Cost}(t-1, \\vec{p}_{t-1}) \\} $$\n        where the minimum is taken over all valid dispatch vectors $\\vec{p}_{t-1}$ from the previous period that allow a ramp-feasible transition to $\\vec{p}_t$.\n\nThe algorithm proceeds as follows:\n- Iterate through all $4096$ commitment schedules.\n- For each schedule, validate it against min up/down time rules and calculate its startup cost.\n- If the schedule is valid, solve the corresponding multi-period dispatch problem using the DP approach described above. This involves:\n    a. For each period $t$, generating all possible dispatch vectors that satisfy power balance, generation limits, and the transient stability limit.\n    b. Building a trellis of feasible transitions between dispatch vectors of consecutive periods, respecting ramp limits.\n    c. Finding the minimum cost path through this trellis from the initial state ($p_{i,0}=0$) to the final period $T$.\n- The total cost for a schedule is the sum of its startup cost and its minimum variable dispatch cost.\n- The overall minimum cost across all valid schedules is the solution. This process is repeated for each test case. The discretization of dispatch variables ensures all sets of possible dispatch vectors are finite and manageable.",
            "answer": "```python\nimport numpy as np\nimport itertools\nfrom functools import lru_cache\n\ndef solve():\n    \"\"\"\n    Main solver function for the TSCUC problem.\n    It iterates through the test cases and computes the minimum cost for each.\n    \"\"\"\n    \n    # Generator data (constant across all test cases)\n    GEN_DATA = [\n        # G1\n        {'Pmin': 20, 'Pmax': 100, 'R': 40, 'UT': 2, 'DT': 1, 'c': 30, 'SU': 300, 'H': 1.5, 'S': 50},\n        # G2\n        {'Pmin': 10, 'Pmax': 60, 'R': 30, 'UT': 1, 'DT': 1, 'c': 35, 'SU': 200, 'H': 1.25, 'S': 30},\n        # G3\n        {'Pmin': 0, 'Pmax': 50, 'R': 50, 'UT': 1, 'DT': 1, 'c': 15, 'SU': 100, 'H': 0, 'S': 50},\n    ]\n    NUM_GENS = len(GEN_DATA)\n    F0 = 50.0\n    DISPATCH_STEP = 10\n\n    # Test suite\n    test_cases = [\n        # Case 1\n        {'T': 4, 'L': [40, 50, 60, 70], 'Rmax': 0.5},\n        # Case 2\n        {'T': 4, 'L': [120, 80, 130, 90], 'Rmax': 0.5},\n        # Case 3\n        {'T': 4, 'L': [50, 20, 50, 20], 'Rmax': 0.25},\n    ]\n\n    results = []\n    for case in test_cases:\n        T = case['T']\n        L = case['L']\n        Rmax = case['Rmax']\n        \n        min_total_cost = float('inf')\n\n        # Generate all 2^(N*T) commitment schedules\n        commitment_schedules = itertools.product([0, 1], repeat=NUM_GENS * T)\n\n        # Memoization for dispatch partitions to avoid re-computation\n        @lru_cache(maxsize=None)\n        def get_dispatch_partitions(gen_idx, remaining_load, p_limits):\n            if gen_idx == NUM_GENS - 1:\n                p_min, p_max = p_limits[gen_idx]\n                val = remaining_load\n                if p_min = val = p_max and val % DISPATCH_STEP == 0:\n                    return [[val]]\n                else:\n                    return []\n            \n            partitions = []\n            p_min, p_max = p_limits[gen_idx]\n            \n            for p_val in range(p_min, p_max + 1, DISPATCH_STEP):\n                if p_val = remaining_load:\n                    sub_partitions = get_dispatch_partitions(gen_idx + 1, remaining_load - p_val, p_limits)\n                    for sub_part in sub_partitions:\n                        partitions.append([p_val] + sub_part)\n            return partitions\n\n        for schedule_flat in commitment_schedules:\n            u = np.array(schedule_flat).reshape((T, NUM_GENS))\n            \n            # 1. Validate schedule and calculate startup costs\n            is_valid_schedule = True\n            startup_cost = 0.0\n            \n            up_down_counters = [-g['DT'] for g in GEN_DATA] # Initial state: ready to start\n            \n            # Prepend initial state u_{i,0}=0\n            u_full = np.vstack([np.zeros(NUM_GENS, dtype=int), u])\n\n            for t in range(1, T + 1):\n                for i in range(NUM_GENS):\n                    u_prev, u_curr = u_full[t-1, i], u_full[t, i]\n                    \n                    if u_prev == 0 and u_curr == 1: # Startup\n                        if up_down_counters[i]  0 and abs(up_down_counters[i])  GEN_DATA[i]['DT']:\n                            is_valid_schedule = False\n                            break\n                        startup_cost += GEN_DATA[i]['SU']\n                        up_down_counters[i] = 1\n                    elif u_prev == 1 and u_curr == 1: # Stay on\n                        up_down_counters[i] += 1\n                    elif u_prev == 1 and u_curr == 0: # Shutdown\n                        if up_down_counters[i] > 0 and up_down_counters[i]  GEN_DATA[i]['UT']:\n                            is_valid_schedule = False\n                            break\n                        up_down_counters[i] = -1\n                    elif u_prev == 0 and u_curr == 0: # Stay off\n                        up_down_counters[i] -= 1\n                if not is_valid_schedule:\n                    break\n            \n            if not is_valid_schedule:\n                continue\n            \n            # 2. Solve dispatch subproblem for the valid schedule\n            dispatch_options_per_t = []\n            is_dispatch_possible = True\n            for t in range(T):\n                E_avail = sum(GEN_DATA[i]['H'] * GEN_DATA[i]['S'] * u[t, i] for i in range(NUM_GENS))\n                \n                # If total inertia is zero, any non-zero dispatch is unstable.\n                # The transient stability constraint check will handle this if load > 0.\n                # If E_avail is 0, P_stable_max will be 0, correctly constraining dispatch.\n                P_stable_max = 2 * F0 * Rmax * E_avail if E_avail > 0 else 0\n\n                p_limits = []\n                for i in range(NUM_GENS):\n                    if u[t, i] == 1:\n                        p_min = GEN_DATA[i]['Pmin']\n                        p_max_eff = min(GEN_DATA[i]['Pmax'], P_stable_max)\n                        p_limits.append((p_min, int(p_max_eff)))\n                    else:\n                        p_limits.append((0, 0))\n                \n                current_L = L[t]\n                if sum(pl[0] for pl in p_limits) > current_L or sum(pl[1] for pl in p_limits)  current_L:\n                    is_dispatch_possible = False\n                    break\n                \n                partitions = get_dispatch_partitions(0, current_L, tuple(p_limits))\n                if not partitions:\n                    is_dispatch_possible = False\n                    break\n                dispatch_options_per_t.append([tuple(p) for p in partitions])\n\n            if not is_dispatch_possible:\n                continue\n\n            # DP for optimal dispatch\n            # memo[t] = {dispatch_tuple: min_cost_to_reach_this_state}\n            memo = {0: {tuple([0] * NUM_GENS): 0.0}}\n            \n            for t in range(1, T + 1):\n                memo[t] = {}\n                dispatch_options = dispatch_options_per_t[t-1]\n                \n                for p_curr in dispatch_options:\n                    var_cost_t = sum(GEN_DATA[i]['c'] * p_curr[i] for i in range(NUM_GENS))\n                    min_prev_cost = float('inf')\n                    \n                    for p_prev, prev_total_cost in memo[t-1].items():\n                        ramp_ok = all(abs(p_curr[i] - p_prev[i]) = GEN_DATA[i]['R'] for i in range(NUM_GENS))\n                        if ramp_ok:\n                            min_prev_cost = min(min_prev_cost, prev_total_cost)\n                    \n                    if min_prev_cost != float('inf'):\n                        memo[t][p_curr] = min_prev_cost + var_cost_t\n\n            if not memo[T]: # No path found to the final period\n                continue\n                \n            min_var_cost = min(memo[T].values())\n            total_cost = min_var_cost + startup_cost\n            min_total_cost = min(min_total_cost, total_cost)\n\n        results.append(round(min_total_cost, 2))\n        get_dispatch_partitions.cache_clear()\n\n\n    print(f\"[{','.join(f'{r:.2f}' for r in results)}]\")\n\nsolve()\n\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Mastering contingency analysis begins with a firm grasp of the fundamental mechanics of power flow redistribution. This first practice requires you to perform a complete $N-1$ analysis from first principles, using the direct-current (DC) power flow model to calculate post-contingency line flows and identify potential overloads after a line outage. By working through the construction of the susceptance matrix and solving the power flow equations, you will build a foundational understanding of how a power system responds to a change in its topology .",
            "id": "4080881",
            "problem": "Consider a lossless transmission network modeled by the linear Direct-Current (DC) power flow approximation under the small-angle assumption, with base apparent power $S_{\\text{base}} = 100$ MVA. The network has buses $\\{1,2,3,4\\}$ and transmission lines with series reactances (in per unit) as follows:\n- Line $1$–$2$: $x_{12} = 0.2$ p.u.\n- Line $1$–$3$: $x_{13} = 0.25$ p.u.\n- Line $2$–$3$: $x_{23} = 0.2$ p.u.\n- Line $2$–$4$: $x_{24} = 0.25$ p.u.\n- Line $3$–$4$: $x_{34} = 0.3$ p.u.\n\nAll lines have the same long-term thermal limit $\\overline{F}_{\\ell} = 150$ MW. The bus real power injections (positive for net generation, negative for net load) in megawatts are:\n- $P_{1} = +200$ MW, $P_{2} = -80$ MW, $P_{3} = -60$ MW, $P_{4} = -60$ MW.\n\nAdopt bus $1$ as the reference (slack) with $\\theta_{1} = 0$ radians. Using only first principles of the DC model (nodal real power balance and the susceptance Laplacian constructed from series reactances) and network reduction by eliminating the slack-bus row and column, perform the following:\n- Compute the pre-contingency DC bus voltage angles $\\theta_{i}$ for buses $i \\in \\{2,3,4\\}$ and the corresponding pre-contingency line flows $F_{ij}$ (in MW) on all existing lines.\n- Model the $N-1$ contingency corresponding to the outage of line $1$–$3$ by removing that branch from the network, recompute the post-contingency DC bus voltage angles $\\theta_{i}$ and the post-contingency line flows $F_{ij}$ (in MW) on the remaining lines.\n- Define the post-contingency overload magnitude on line $\\ell$ as $\\max(0, |F_{\\ell}| - \\overline{F}_{\\ell})$. Determine the maximum overload magnitude across the remaining lines after the outage.\n\nExpress the final answer as the single maximum overload magnitude in megawatts (MW). Round your answer to four significant figures. Angles should be in radians.",
            "solution": "The user-provided problem is assessed to be valid. It is self-contained, scientifically grounded in the principles of electrical engineering (specifically, the DC power flow approximation), and mathematically well-posed. The given data is complete and consistent; for instance, the sum of specified real power injections is $P_{1} + P_{2} + P_{3} + P_{4} = (+200) + (-80) + (-60) + (-60) = 0$ MW, which is consistent with the lossless network model. We may proceed with the solution.\n\nThe DC power flow model relates the bus real power injections $P$ to the bus voltage angles $\\theta$ via the equation $P = B\\theta$, where $B$ is the bus susceptance matrix. The elements of the $B$ matrix are derived from the line reactances $x_{ij}$ as $B_{ij} = -1/x_{ij}$ for $i \\neq j$ and $B_{ii} = \\sum_{k \\neq i} 1/x_{ik}$. The real power flow $F_{ij}$ on a line from bus $i$ to bus $j$ is given by $F_{ij} = \\frac{1}{x_{ij}}(\\theta_i - \\theta_j)$. All calculations will be performed in the per-unit (p.u.) system.\n\nFirst, we convert all physical quantities to per unit based on $S_{\\text{base}} = 100$ MVA. Since it is a DC model, we use $P_{\\text{base}} = 100$ MW.\nThe power injections in p.u. are:\n- $P_{1} = \\frac{200 \\text{ MW}}{100 \\text{ MW}} = 2.0$ p.u.\n- $P_{2} = \\frac{-80 \\text{ MW}}{100 \\text{ MW}} = -0.8$ p.u.\n- $P_{3} = \\frac{-60 \\text{ MW}}{100 \\text{ MW}} = -0.6$ p.u.\n- $P_{4} = \\frac{-60 \\text{ MW}}{100 \\text{ MW}} = -0.6$ p.u.\nThe line thermal limit is $\\overline{F}_{\\ell} = \\frac{150 \\text{ MW}}{100 \\text{ MW}} = 1.5$ p.u.\n\nThe line susceptances $b_{ij} = 1/x_{ij}$ are:\n- $b_{12} = 1/0.2 = 5.0$ p.u.\n- $b_{13} = 1/0.25 = 4.0$ p.u.\n- $b_{23} = 1/0.2 = 5.0$ p.u.\n- $b_{24} = 1/0.25 = 4.0$ p.u.\n- $b_{34} = 1/0.3 = 10/3$ p.u.\n\n**Part 1: Pre-contingency Analysis**\n\nWe first construct the susceptance matrix $B^{(0)}$ for the base case network.\n$B^{(0)}_{11} = b_{12} + b_{13} = 5 + 4 = 9$\n$B^{(0)}_{22} = b_{12} + b_{23} + b_{24} = 5 + 5 + 4 = 14$\n$B^{(0)}_{33} = b_{13} + b_{23} + b_{34} = 4 + 5 + 10/3 = 37/3$\n$B^{(0)}_{44} = b_{24} + b_{34} = 4 + 10/3 = 22/3$\nThe off-diagonal elements are $B^{(0)}_{ij} = -b_{ij}$.\n$$ B^{(0)} = \\begin{pmatrix} 9 & -5 & -4 & 0 \\\\ -5 & 14 & -5 & -4 \\\\ -4 & -5 & 37/3 & -10/3 \\\\ 0 & -4 & -10/3 & 22/3 \\end{pmatrix} $$\nWith bus $1$ as the slack bus ($\\theta_1 = 0$), we use the reduced system by removing the first row and column.\n$$ B_{\\text{red}}^{(0)} = \\begin{pmatrix} 14 & -5 & -4 \\\\ -5 & 37/3 & -10/3 \\\\ -4 & -10/3 & 22/3 \\end{pmatrix}, \\quad P_{\\text{red}} = \\begin{pmatrix} P_2 \\\\ P_3 \\\\ P_4 \\end{pmatrix} = \\begin{pmatrix} -0.8 \\\\ -0.6 \\\\ -0.6 \\end{pmatrix} $$\nSolving $B_{\\text{red}}^{(0)} \\theta^{(0)}_{\\text{red}} = P_{\\text{red}}$ gives the pre-contingency angles:\n$$ \\theta^{(0)}_{\\text{red}} = \\begin{pmatrix} \\theta_2^{(0)} \\\\ \\theta_3^{(0)} \\\\ \\theta_4^{(0)} \\end{pmatrix} = \\begin{pmatrix} -0.150279 \\\\ -0.160894 \\\\ -0.224581 \\end{pmatrix} \\text{rad} $$\nThe pre-contingency line flows are calculated as $F_{ij}^{(0)} = S_{\\text{base}} \\times b_{ij} (\\theta_i^{(0)} - \\theta_j^{(0)})$. For example, $F_{12}^{(0)} = 100 \\times 5 \\times (0 - (-0.150279)) \\approx 75.14$ MW. All pre-contingency flows are within the $150$ MW limit.\n\n**Part 2: N-1 Contingency Analysis (Outage of line 1–3)**\n\nThe outage of line 1–3 is modeled by removing its susceptance $b_{13} = 4.0$ p.u. from the network. The new susceptance matrix $B^{(1)}$ is constructed by adjusting the elements of $B^{(0)}$:\n- $B^{(1)}_{11} = B^{(0)}_{11} - b_{13} = 9 - 4 = 5$\n- $B^{(1)}_{33} = B^{(0)}_{33} - b_{13} = 37/3 - 4 = 25/3$\n- $B^{(1)}_{13} = B^{(1)}_{31} = 0$\nThe new reduced matrix $B_{\\text{red}}^{(1)}$ is:\n$$ B_{\\text{red}}^{(1)} = \\begin{pmatrix} 14 & -5 & -4 \\\\ -5 & 25/3 & -10/3 \\\\ -4 & -10/3 & 22/3 \\end{pmatrix} $$\nThe power injection vector $P_{\\text{red}}$ is unchanged. We solve the new linear system $B_{\\text{red}}^{(1)} \\theta^{(1)}_{\\text{red}} = P_{\\text{red}}$ for the post-contingency angles $\\theta^{(1)}_{\\text{red}}$.\n$$ \\begin{pmatrix} 14 & -5 & -4 \\\\ -5 & 25/3 & -10/3 \\\\ -4 & -10/3 & 22/3 \\end{pmatrix} \\begin{pmatrix} \\theta_2^{(1)} \\\\ \\theta_3^{(1)} \\\\ \\theta_4^{(1)} \\end{pmatrix} = \\begin{pmatrix} -0.8 \\\\ -0.6 \\\\ -0.6 \\end{pmatrix} $$\nTo solve this system, we can first clear the denominators in the last two rows by multiplying by $3$:\n1. $14 \\theta_2^{(1)} - 5 \\theta_3^{(1)} - 4 \\theta_4^{(1)} = -0.8$\n2. $-15 \\theta_2^{(1)} + 25 \\theta_3^{(1)} - 10 \\theta_4^{(1)} = -1.8$\n3. $-12 \\theta_2^{(1)} - 10 \\theta_3^{(1)} + 22 \\theta_4^{(1)} = -1.8$\n\nFrom equation (3), dividing by $2$ gives $-6 \\theta_2^{(1)} - 5 \\theta_3^{(1)} + 11 \\theta_4^{(1)} = -0.9$.\nFrom equation (2), dividing by $5$ gives $-3 \\theta_2^{(1)} + 5 \\theta_3^{(1)} - 2 \\theta_4^{(1)} = -0.36$.\nFrom this, $5 \\theta_3^{(1)} = 3 \\theta_2^{(1)} + 2 \\theta_4^{(1)} - 0.36$.\nSubstituting this into the modified eq. (3):\n$-6 \\theta_2^{(1)} - (3 \\theta_2^{(1)} + 2 \\theta_4^{(1)} - 0.36) + 11 \\theta_4^{(1)} = -0.9$\n$-9 \\theta_2^{(1)} + 9 \\theta_4^{(1)} + 0.36 = -0.9 \\implies -9 \\theta_2^{(1)} + 9 \\theta_4^{(1)} = -1.26 \\implies -\\theta_2^{(1)} + \\theta_4^{(1)} = -0.14$.\nSo, $\\theta_4^{(1)} = \\theta_2^{(1)} - 0.14$.\n\nSubstituting both $5 \\theta_3^{(1)}$ and $\\theta_4^{(1)}$ into eq. (1):\n$14 \\theta_2^{(1)} - (3 \\theta_2^{(1)} + 2 \\theta_4^{(1)} - 0.36) - 4 \\theta_4^{(1)} = -0.8$\n$11 \\theta_2^{(1)} - 6 \\theta_4^{(1)} + 0.36 = -0.8$\n$11 \\theta_2^{(1)} - 6 (\\theta_2^{(1)} - 0.14) = -1.16$\n$11 \\theta_2^{(1)} - 6 \\theta_2^{(1)} + 0.84 = -1.16$\n$5 \\theta_2^{(1)} = -2.0 \\implies \\theta_2^{(1)} = -0.4$ rad.\n\nNow we back-substitute to find the other angles:\n$\\theta_4^{(1)} = -0.4 - 0.14 = -0.54$ rad.\n$5 \\theta_3^{(1)} = 3(-0.4) + 2(-0.54) - 0.36 = -1.2 - 1.08 - 0.36 = -2.64 \\implies \\theta_3^{(1)} = -0.528$ rad.\nThe post-contingency angles are $\\theta_1^{(1)}=0$, $\\theta_2^{(1)}=-0.4$, $\\theta_3^{(1)}=-0.528$, and $\\theta_4^{(1)}=-0.54$ radians.\n\n**Part 3: Overload Calculation**\n\nWe compute the post-contingency flows $F^{(1)}_{ij}$ on the remaining lines using $F_{ij}^{(1)} = S_{\\text{base}} \\times b_{ij} (\\theta_i^{(1)} - \\theta_j^{(1)})$. The thermal limit is $\\overline{F}_{\\ell} = 150$ MW.\n- Line 1–2: $F_{12}^{(1)} = 100 \\times 5.0 \\times (0 - (-0.4)) = 500 \\times 0.4 = 200$ MW.\n- Line 2–3: $F_{23}^{(1)} = 100 \\times 5.0 \\times (-0.4 - (-0.528)) = 500 \\times 0.128 = 64$ MW.\n- Line 2–4: $F_{24}^{(1)} = 100 \\times 4.0 \\times (-0.4 - (-0.54)) = 400 \\times 0.14 = 56$ MW.\n- Line 3–4: $F_{34}^{(1)} = 100 \\times (10/3) \\times (-0.528 - (-0.54)) = (1000/3) \\times 0.012 = 4$ MW.\n\nThe overload magnitude on a line $\\ell$ is $\\max(0, |F^{(1)}_{\\ell}| - \\overline{F}_{\\ell})$.\n- Line 1–2 overload: $\\max(0, |200| - 150) = 50$ MW.\n- Line 2–3 overload: $\\max(0, |64| - 150) = 0$ MW.\n- Line 2–4 overload: $\\max(0, |56| - 150) = 0$ MW.\n- Line 3–4 overload: $\\max(0, |4| - 150) = 0$ MW.\n\nThe maximum overload magnitude across all remaining lines is $50$ MW. The problem requests the answer to be rounded to four significant figures, so we express it as $50.00$.",
            "answer": "$$ \\boxed{50.00} $$"
        },
        {
            "introduction": "While preventing thermal overloads is a key aspect of $N-1$ security, some contingencies can lead to the more severe outcome of islanding, where the network splits into electrically isolated subsystems. This exercise challenges you to analyze such a scenario, focusing on restoring power balance within each newly formed island through generator redispatch and, if necessary, involuntary load shedding. You will apply first principles of power balance while respecting crucial operational constraints like generator capacity and ramp-rate limits, highlighting the critical role of resource adequacy in maintaining reliability .",
            "id": "4080862",
            "problem": "Consider a lossless five-bus transmission network under the Direct-Current (DC) load flow approximation. Buses are labeled $1,2,3,4,5$. Transmission lines connect buses $(1,2)$, $(2,3)$, $(4,5)$, and a single intertie $(3,4)$. Neglect reactive power and assume all internal branch thermal limits on $(1,2)$, $(2,3)$, and $(4,5)$ are sufficiently large that they never bind under the redispatch considered. The intertie $(3,4)$ is initially in service.\n\nPre-contingency, active power generation and loads are:\n- Bus $1$: generator $G_1$ produces $170\\,\\mathrm{MW}$; generator limits are $P_{1}^{\\min}=120\\,\\mathrm{MW}$ and $P_{1}^{\\max}=200\\,\\mathrm{MW}$.\n- Bus $3$: generator $G_3$ produces $50\\,\\mathrm{MW}$; generator limits are $P_{3}^{\\min}=30\\,\\mathrm{MW}$ and $P_{3}^{\\max}=90\\,\\mathrm{MW}$. There is also a load of $40\\,\\mathrm{MW}$.\n- Bus $2$: load of $120\\,\\mathrm{MW}$.\n- Bus $4$: generator $G_4$ produces $80\\,\\mathrm{MW}$; generator limits are $P_{4}^{\\min}=0\\,\\mathrm{MW}$ and $P_{4}^{\\max}=130\\,\\mathrm{MW}$. There is also a load of $100\\,\\mathrm{MW}$.\n- Bus $5$: generator $G_5$ produces $20\\,\\mathrm{MW}$; generator limits are $P_{5}^{\\min}=0\\,\\mathrm{MW}$ and $P_{5}^{\\max}=70\\,\\mathrm{MW}$. There is also a load of $60\\,\\mathrm{MW}$.\n\nAll generators have upward ramp-rate limits that bound the allowed increase in their output in the immediate post-contingency redispatch: $R_{1}^{\\uparrow}=20\\,\\mathrm{MW}$, $R_{3}^{\\uparrow}=20\\,\\mathrm{MW}$, $R_{4}^{\\uparrow}=30\\,\\mathrm{MW}$, $R_{5}^{\\uparrow}=25\\,\\mathrm{MW}$. Assume downward redispatch is unconstrained except by the stated minimum outputs. Pre-contingency, the net active power export from the $\\{1,2,3\\}$ side to the $\\{4,5\\}$ side across the $(3,4)$ intertie is $60\\,\\mathrm{MW}$, consistent with the stated generation and load values.\n\nA single contingency occurs: the intertie $(3,4)$ trips out of service, creating two islands $\\mathcal{I}_\\mathrm{W}=\\{1,2,3\\}$ and $\\mathcal{I}_\\mathrm{E}=\\{4,5\\}$. Under the Security Criterion known as \"N minus one reliability\" (N-1 reliability), the system must rebalance in each island through generator redispatch and, if necessary, involuntary load shedding, to satisfy real power balance while respecting generator capacity and ramp-rate limits.\n\nUsing only first principles of power balance (Kirchhoff’s Current Law for active power at the island level) and the given generator limits and ramp constraints, determine the minimum total involuntary load shedding across both islands required to restore feasibility immediately after the contingency. Express the final answer in $\\mathrm{MW}$ and round your answer to four significant figures.",
            "solution": "The problem is validated as self-contained, scientifically grounded in the principles of power system analysis, and mathematically consistent. The pre-contingency power balance is verified, and all data required for the post-contingency analysis are provided. The problem is well-posed and seeks a unique, quantifiable answer based on these data. I will therefore proceed with a formal solution.\n\nThe fundamental principle governing the system's response is the real power balance, which must be maintained within each isolated subsystem (island) after the contingency. The contingency is the loss of the intertie $(3,4)$, which splits the five-bus system into two electrically isolated islands: $\\mathcal{I}_\\mathrm{W}=\\{1,2,3\\}$ and $\\mathcal{I}_\\mathrm{E}=\\{4,5\\}$. For each island, the post-contingency power balance equation must hold:\n$$\n\\sum_{i \\in \\mathcal{I}} P_{G,i} - \\sum_{j \\in \\mathcal{I}} (P_{L,j} - S_j) = 0\n$$\nwhere $P_{G,i}$ is the post-contingency generation at bus $i$, $P_{L,j}$ is the pre-contingency load at bus $j$, and $S_j$ is the involuntary load shed at bus $j$. The goal is to minimize the total load shed, $S_{\\text{total}} = \\sum S_j$, by maximizing the use of available generator redispatch within their operational limits. We analyze each island separately.\n\nFirst, we analyze Island $\\mathcal{I}_\\mathrm{W} = \\{1,2,3\\}$.\nThe pre-contingency generation and load in this island are:\nTotal generation: $P_{G,\\mathrm{W},0} = P_{1,0} + P_{3,0} = 170\\,\\mathrm{MW} + 50\\,\\mathrm{MW} = 220\\,\\mathrm{MW}$.\nTotal load: $L_{\\mathrm{W}} = L_2 + L_3 = 120\\,\\mathrm{MW} + 40\\,\\mathrm{MW} = 160\\,\\mathrm{MW}$.\nThe pre-contingency net power balance for island $\\mathcal{I}_\\mathrm{W}$ is a surplus:\n$$\n\\Delta P_{\\mathrm{W},0} = P_{G,\\mathrm{W},0} - L_{\\mathrm{W}} = 220\\,\\mathrm{MW} - 160\\,\\mathrm{MW} = 60\\,\\mathrm{MW}\n$$\nThis surplus of $60\\,\\mathrm{MW}$ was being exported to island $\\mathcal{I}_\\mathrm{E}$ through the intertie $(3,4)$. Upon the loss of the intertie, this export path vanishes, and the island is left with an excess generation of $60\\,\\mathrm{MW}$. To restore balance, the generators in $\\mathcal{I}_\\mathrm{W}$ must decrease their total output by $60\\,\\mathrm{MW}$. We must check if this is possible within their minimum generation limits.\nThe change in generation required is $\\Delta P_{\\mathrm{W,req}} = -60\\,\\mathrm{MW}$.\nThe available downward redispatch for each generator is determined by its minimum power output $P^{\\min}$:\nFor generator $G_1$: The minimum output is $P_{1}^{\\min} = 120\\,\\mathrm{MW}$. The maximum possible decrease is $\\Delta P_{1,\\max\\downarrow} = P_{1}^{\\min} - P_{1,0} = 120\\,\\mathrm{MW} - 170\\,\\mathrm{MW} = -50\\,\\mathrm{MW}$.\nFor generator $G_3$: The minimum output is $P_{3}^{\\min} = 30\\,\\mathrm{MW}$. The maximum possible decrease is $\\Delta P_{3,\\max\\downarrow} = P_{3}^{\\min} - P_{3,0} = 30\\,\\mathrm{MW} - 50\\,\\mathrm{MW} = -20\\,\\mathrm{MW}$.\nThe total available downward redispatch in island $\\mathcal{I}_\\mathrm{W}$ is:\n$$\n\\Delta P_{\\mathrm{W,avail}\\downarrow} = \\Delta P_{1,\\max\\downarrow} + \\Delta P_{3,\\max\\downarrow} = (-50\\,\\mathrm{MW}) + (-20\\,\\mathrm{MW}) = -70\\,\\mathrm{MW}\n$$\nThe required reduction is $60\\,\\mathrm{MW}$. The total available reduction is $70\\,\\mathrm{MW}$. Since the available downward redispatch ($70\\,\\mathrm{MW}$) is greater than the required reduction ($60\\,\\mathrm{MW}$), the generators can successfully reduce their output to rebalance the island. Therefore, no load shedding is necessary in island $\\mathcal{I}_\\mathrm{W}$.\nThe load shed in island $\\mathcal{I}_\\mathrm{W}$ is $S_{\\mathrm{W}} = 0\\,\\mathrm{MW}$.\n\nNext, we analyze Island $\\mathcal{I}_\\mathrm{E} = \\{4,5\\}$.\nThe pre-contingency generation and load in this island are:\nTotal generation: $P_{G,\\mathrm{E},0} = P_{4,0} + P_{5,0} = 80\\,\\mathrm{MW} + 20\\,\\mathrm{MW} = 100\\,\\mathrm{MW}$.\nTotal load: $L_{\\mathrm{E}} = L_4 + L_5 = 100\\,\\mathrm{MW} + 60\\,\\mathrm{MW} = 160\\,\\mathrm{MW}$.\nThe pre-contingency net power balance for island $\\mathcal{I}_\\mathrm{E}$ is a deficit:\n$$\n\\Delta P_{\\mathrm{E},0} = P_{G,\\mathrm{E},0} - L_{\\mathrm{E}} = 100\\,\\mathrm{MW} - 160\\,\\mathrm{MW} = -60\\,\\mathrm{MW}\n$$\nThis deficit of $60\\,\\mathrm{MW}$ was met by the import from island $\\mathcal{I}_\\mathrm{W}$ through the intertie. Upon the loss of the intertie, the island experiences a generation shortfall of $60\\,\\mathrm{MW}$. To restore balance, the generators in $\\mathcal{I}_\\mathrm{E}$ must increase their output as much as possible. Any remaining shortfall must be covered by load shedding.\nThe additional generation required is $60\\,\\mathrm{MW}$. We must check the maximum available upward redispatch, which is constrained by both the maximum capacity limits ($P^{\\max}$) and the immediate ramp-rate limits ($R^{\\uparrow}$). For each generator, the maximum immediate increase in output is the lesser of the two.\nFor generator $G_4$:\nThe available headroom is $P_{4}^{\\max} - P_{4,0} = 130\\,\\mathrm{MW} - 80\\,\\mathrm{MW} = 50\\,\\mathrm{MW}$.\nThe ramp-rate limit is $R_{4}^{\\uparrow} = 30\\,\\mathrm{MW}$.\nThe maximum possible increase is $\\Delta P_{4,\\max\\uparrow} = \\min(50\\,\\mathrm{MW}, 30\\,\\mathrm{MW}) = 30\\,\\mathrm{MW}$.\nFor generator $G_5$:\nThe available headroom is $P_{5}^{\\max} - P_{5,0} = 70\\,\\mathrm{MW} - 20\\,\\mathrm{MW} = 50\\,\\mathrm{MW}$.\nThe ramp-rate limit is $R_{5}^{\\uparrow} = 25\\,\\mathrm{MW}$.\nThe maximum possible increase is $\\Delta P_{5,\\max\\uparrow} = \\min(50\\,\\mathrm{MW}, 25\\,\\mathrm{MW}) = 25\\,\\mathrm{MW}$.\nThe total available upward redispatch in island $\\mathcal{I}_\\mathrm{E}$ is:\n$$\n\\Delta P_{\\mathrm{E,avail}\\uparrow} = \\Delta P_{4,\\max\\uparrow} + \\Delta P_{5,\\max\\uparrow} = 30\\,\\mathrm{MW} + 25\\,\\mathrm{MW} = 55\\,\\mathrm{MW}\n$$\nThe generation deficit is $60\\,\\mathrm{MW}$, but the generators can only increase their combined output by a maximum of $55\\,\\mathrm{MW}$ immediately following the contingency. The remaining shortfall must be balanced by shedding load.\nThe minimum required load shed in island $\\mathcal{I}_\\mathrm{E}$ is:\n$$\nS_{\\mathrm{E}} = (\\text{Deficit}) - \\Delta P_{\\mathrm{E,avail}\\uparrow} = 60\\,\\mathrm{MW} - 55\\,\\mathrm{MW} = 5\\,\\mathrm{MW}\n$$\n\nFinally, the total minimum involuntary load shedding across both islands is the sum of the shedding in each island:\n$$\nS_{\\text{total}} = S_{\\mathrm{W}} + S_{\\mathrm{E}} = 0\\,\\mathrm{MW} + 5\\,\\mathrm{MW} = 5\\,\\mathrm{MW}\n$$\nThe problem requests the answer be rounded to four significant figures. The exact answer is $5\\,\\mathrm{MW}$, which is written as $5.000\\,\\mathrm{MW}$ to meet this requirement.",
            "answer": "$$\n\\boxed{5.000}\n$$"
        },
        {
            "introduction": "In real-world operations, system planners must assess thousands of potential contingencies in near real-time, a task that is computationally intractable using full power flow simulations for each case. This practice introduces the powerful linearization tools that make this screening possible: Power Transfer Distribution Factors (PTDFs) and Line Outage Distribution Factors (LODFs). By implementing a computational screening process, you will use these factors to rapidly estimate post-contingency flows, quantify the severity of each outage, and produce a ranked list of the most critical events, mimicking a core function of modern energy management systems .",
            "id": "4080859",
            "problem": "You are given a direct current power flow (DC-PF) screening task for single-element contingencies under the principle of \"n minus 1\" reliability, which requires that the system withstand any single outage without violating thermal limits. The task must be solved using the concepts of Power Transfer Distribution Factor (PTDF) and Line Outage Distribution Factor (LODF), grounded in Kirchhoff’s Current Law (KCL) and linearized power flow approximations. Specifically:\n\n- Kirchhoff’s Current Law (KCL) enforces nodal power balance, which, together with linearized branch flow relations under the DC approximation, results in a linear mapping from nodal net injections to line flows.\n- The Power Transfer Distribution Factor (PTDF) maps net injection changes to incremental changes in line flows.\n- The Line Outage Distribution Factor (LODF) maps the pre-outage flow on an outaged line to the incremental changes in flows on all other lines.\n\nTask. For each contingency in a provided list:\n1. Compute the post-contingency line flows using PTDF for injection changes and LODF for line outages, starting from a given base-case flow vector.\n2. Define a scalar severity score that quantifies the total amount by which thermal limits are exceeded across non-outaged lines. The severity must be computed by, for each line, taking the absolute post-contingency flow, subtracting the thermal limit, clamping negative values to zero, normalizing by the limit, squaring, and summing across all non-outaged lines. This score is dimensionless.\n3. Rank contingencies by severity in descending order. In case of ties (equal severity), break ties by ascending contingency index.\n4. Return the indices of the top-$k$ contingencies for each test case.\n\nUse scientifically realistic assumptions. In particular:\n- Base-case line flows and limits are in megawatts (MW). Express intermediate and final powers in MW where applicable.\n- Angles do not appear explicitly because the DC-PF model is linear in injections and we work directly with PTDF and LODF data.\n\nPost-contingency computations:\n- For an injection contingency characterized by a net injection change vector $p_{\\Delta}$ of dimension equal to the number of buses, with $\\sum p_{\\Delta} = 0$, compute the incremental line flow change as the matrix-vector product of PTDF with $p_{\\Delta}$ and add it to the base-case line flow vector.\n- For a line-outage contingency of line index $\\ell$, compute the incremental change on each non-outaged line $x$ as $\\text{LODF}_{x,\\ell}$ multiplied by the base-case flow on line $\\ell$, set the outaged line’s post-contingency flow to $0$, and do not include the outaged line in the severity sum. Diagonal entries of the LODF matrix may be $-1$ and should not be used to compute severity.\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets. Each item corresponds to one test case and is itself a list of the indices (integers) of the top-$k$ contingencies in descending severity order, using the tie-breaking rule described above. For example, a valid output would look like $$[ [\\dots], [\\dots], [\\dots] ].$$\n\nTest Suite. Use the following four test cases to validate your implementation. For all cases, use absolute value of line flows when checking against limits.\n\n- Test Case $1$ (general case):\n  - Base-case line flows (MW): $$f_{0} = \\begin{bmatrix} 80 \\\\ 50 \\\\ 90 \\\\ 30 \\\\ 60 \\end{bmatrix}.$$\n  - Thermal limits (MW): $$F_{\\max} = \\begin{bmatrix} 100 \\\\ 100 \\\\ 90 \\\\ 70 \\\\ 80 \\end{bmatrix}.$$\n  - PTDF matrix (lines $\\times$ buses): $$\\text{PTDF} = \\begin{bmatrix}\n  0.3 & -0.1 & 0.2 & -0.4 \\\\\n  -0.2 & 0.3 & -0.1 & 0.0 \\\\\n  0.1 & 0.2 & -0.2 & -0.1 \\\\\n  -0.1 & 0.0 & 0.3 & -0.2 \\\\\n  0.0 & -0.2 & 0.1 & 0.3\n  \\end{bmatrix}.$$\n  - LODF matrix (lines $\\times$ lines): $$\\text{LODF} = \\begin{bmatrix}\n  -1.0 & 0.2 & -0.1 & 0.0 & 0.3 \\\\\n  0.1 & -1.0 & 0.25 & -0.05 & 0.0 \\\\\n  -0.15 & 0.2 & -1.0 & 0.1 & -0.05 \\\\\n  0.0 & -0.1 & 0.2 & -1.0 & 0.15 \\\\\n  0.2 & 0.0 & -0.1 & 0.3 & -1.0\n  \\end{bmatrix}.$$\n  - Contingency list:\n    - Index $0$: line outage at line $\\ell = 2$.\n    - Index $1$: injection change $$p_{\\Delta} = \\begin{bmatrix} 20 \\\\ -10 \\\\ -5 \\\\ -5 \\end{bmatrix} \\text{ MW}.$$\n    - Index $2$: line outage at line $\\ell = 0$.\n  - Top-$k$: $$k = 2.$$\n\n- Test Case $2$ (boundary and tie behavior):\n  - Base-case line flows (MW): $$f_{0} = \\begin{bmatrix} 100 \\\\ 100 \\\\ 90 \\\\ 70 \\\\ 80 \\end{bmatrix}.$$\n  - Thermal limits (MW): $$F_{\\max} = \\begin{bmatrix} 100 \\\\ 100 \\\\ 90 \\\\ 70 \\\\ 80 \\end{bmatrix}.$$\n  - PTDF matrix: use the same $$\\text{PTDF}$$ as in Test Case $1$.\n  - LODF matrix: use the same $$\\text{LODF}$$ as in Test Case $1$.\n  - Contingency list:\n    - Index $0$: line outage at line $\\ell = 4$.\n    - Index $1$: injection change $$p_{\\Delta} = \\begin{bmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{bmatrix} \\text{ MW}.$$\n    - Index $2$: line outage at line $\\ell = 2$.\n  - Top-$k$: $$k = 1.$$\n\n- Test Case $3$ (edge case with strong flow redistribution):\n  - Base-case line flows (MW): $$f_{0} = \\begin{bmatrix} 95 \\\\ 85 \\\\ 90 \\\\ 60 \\\\ 70 \\end{bmatrix}.$$\n  - Thermal limits (MW): $$F_{\\max} = \\begin{bmatrix} 100 \\\\ 90 \\\\ 95 \\\\ 65 \\\\ 75 \\end{bmatrix}.$$\n  - PTDF matrix: use the same $$\\text{PTDF}$$ as in Test Case $1$.\n  - LODF matrix modified to include a large transfer from line outage at index $1$ to line $0$: $$\\text{LODF} = \\begin{bmatrix}\n  -1.0 & 0.9 & -0.1 & 0.0 & 0.3 \\\\\n  0.1 & -1.0 & 0.25 & -0.05 & 0.0 \\\\\n  -0.15 & 0.2 & -1.0 & 0.1 & -0.05 \\\\\n  0.0 & -0.1 & 0.2 & -1.0 & 0.15 \\\\\n  0.2 & 0.0 & -0.1 & 0.3 & -1.0\n  \\end{bmatrix}.$$\n  - Contingency list:\n    - Index $0$: line outage at line $\\ell = 1$.\n    - Index $1$: injection change $$p_{\\Delta} = \\begin{bmatrix} 30 \\\\ -10 \\\\ -10 \\\\ -10 \\end{bmatrix} \\text{ MW}.$$\n  - Top-$k$: $$k = 2.$$\n\n- Test Case $4$ (no overloads expected):\n  - Base-case line flows (MW): $$f_{0} = \\begin{bmatrix} 20 \\\\ 10 \\\\ 15 \\\\ 5 \\\\ 12 \\end{bmatrix}.$$\n  - Thermal limits (MW): $$F_{\\max} = \\begin{bmatrix} 100 \\\\ 100 \\\\ 100 \\\\ 100 \\\\ 100 \\end{bmatrix}.$$\n  - PTDF matrix: use the same $$\\text{PTDF}$$ as in Test Case $1$.\n  - LODF matrix with negligible off-diagonal redistribution: $$\\text{LODF} = \\begin{bmatrix}\n  -1.0 & 0.0 & 0.0 & 0.0 & 0.0 \\\\\n  0.0 & -1.0 & 0.0 & 0.0 & 0.0 \\\\\n  0.0 & 0.0 & -1.0 & 0.0 & 0.0 \\\\\n  0.0 & 0.0 & 0.0 & -1.0 & 0.0 \\\\\n  0.0 & 0.0 & 0.0 & 0.0 & -1.0\n  \\end{bmatrix}.$$\n  - Contingency list:\n    - Index $0$: line outage at line $\\ell = 0$.\n    - Index $1$: injection change $$p_{\\Delta} = \\begin{bmatrix} 10 \\\\ -10 \\\\ 0 \\\\ 0 \\end{bmatrix} \\text{ MW}.$$\n  - Top-$k$: $$k = 2.$$\n\nProgram requirements:\n- Compute severity scores for each contingency in each test case according to the rules above.\n- Produce the top-$k$ list of contingency indices for each test case.\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each item is the list of indices for one test case, in descending severity order with tie-breaking by ascending index.",
            "solution": "The problem statement has been critically reviewed and determined to be valid. It is scientifically grounded in the principles of linearized power system analysis, well-posed with a complete and consistent set of data and instructions, and formulated objectively.\n\n### Step 1: Extract Givens\n\nThe problem provides the following data and definitions for a series of test cases involving contingency analysis on a power system model:\n\n- **Model**: A direct current power flow (DC-PF) model is assumed.\n- **Base Quantities**:\n  - $f_0$: A vector of base-case line flows in megawatts (MW).\n  - $F_{\\max}$: A vector of thermal limits for each line in megawatts (MW).\n- **Distribution Factor Matrices**:\n  - $\\text{PTDF}$: The Power Transfer Distribution Factor matrix, which maps nodal power injection changes to line flow changes. Its dimensions are (number of lines $\\times$ number of buses).\n  - $\\text{LODF}$: The Line Outage Distribution Factor matrix, which maps the pre-outage flow of a single outaged line to the flow changes on all other lines. Its dimensions are (number of lines $\\times$ number of lines).\n- **Contingencies**: A list of events, each identified by an index. A contingency can be either:\n  1. A line outage, specified by the index $\\ell$ of the outaged line.\n  2. An injection change, specified by a vector $p_{\\Delta}$ of net injection changes at each bus, satisfying the power balance constraint $\\sum p_{\\Delta} = 0$.\n- **Ranking Parameter**: A value $k$ specifying the number of top contingencies to report.\n\n- **Post-Contingency Flow Calculation**:\n  - For an injection contingency with change vector $p_{\\Delta}$:\n    $f_{\\text{post}} = f_0 + \\text{PTDF} \\cdot p_{\\Delta}$\n  - For a line outage of line $\\ell$:\n    The incremental flow change on any line $x$ is given by $\\Delta f_x = \\text{LODF}_{x,\\ell} \\cdot f_{0,\\ell}$. The post-contingency flow vector $f_{\\text{post}}$ is thus calculated as $f_{\\text{post}} = f_0 + \\Delta f$, with the specific modification that the flow on the outaged line itself is set to zero, $f_{\\text{post}, \\ell} = 0$.\n\n- **Severity Score Calculation**:\n  The scalar severity score $S$ for a given contingency is defined as the sum of squared, normalized overloads:\n  $$S = \\sum_{\\text{monitored lines } x} \\left( \\frac{\\max(0, |f_{\\text{post},x}| - F_{\\max,x})}{F_{\\max,x}} \\right)^2$$\n  The summation is performed over all lines for an injection contingency and over all non-outaged lines for a line outage contingency.\n\n- **Ranking and Tie-Breaking**:\n  Contingencies are to be ranked in descending order of their severity score $S$. Ties in severity are to be broken by ascending contingency index.\n\n- **Test Suite**: Four specific test cases are provided, each with its own set of $f_0$, $F_{\\max}$, $\\text{PTDF}$, $\\text{LODF}$, contingency list, and $k$.\n\n### Step 2: Validate Using Extracted Givens\n\nThe problem is assessed against the required criteria:\n1.  **Scientifically Grounded**: The methodology is based on the DC power flow approximation, PTDFs, and LODFs, which are standard and fundamental tools in power system operations and planning for contingency screening. The formulation is physically and mathematically sound within this established framework. The condition that nodal injection changes sum to zero ($\\sum p_{\\Delta} = 0$) is physically correct and is satisfied by all test cases.\n2.  **Well-Posed**: The problem is well-posed. All necessary data (matrices, vectors, parameters) are provided for each test case. The calculation for post-contingency flows and the formula for the severity score are stated explicitly and unambiguously. The ranking and tie-breaking rules are precise, ensuring a unique solution for each test case.\n3.  **Objective**: The problem is stated in precise, quantitative, and unbiased technical language. It is free from subjective claims.\n4.  **Completeness and Consistency**: The dimensionalities of all matrices and vectors are mutually consistent. For instance, the product $\\text{PTDF} \\cdot p_{\\Delta}$ correctly yields a vector of line flow changes. There are no missing definitions or contradictory constraints.\n5.  **Feasibility**: The numerical values provided are plausible for a simplified power system model. The problem does not posit any physically impossible conditions.\n\n### Step 3: Verdict and Action\nThe problem is valid. A reasoned solution will be developed.\n\n### Solution Methodology\n\nThe solution proceeds by implementing the specified contingency analysis protocol for each test case. For a given test case, we iterate through its list of defined contingencies. For each contingency, we perform the following sequence of calculations:\n\n1.  **Identify Contingency Type**: Determine if the contingency is a line outage or a nodal injection change.\n\n2.  **Calculate Post-Contingency Flows ($f_{\\text{post}}$)**:\n    - If the contingency is an injection change $p_{\\Delta}$, the change in line flows is calculated as $\\Delta f = \\text{PTDF} \\cdot p_{\\Delta}$. The post-contingency flow vector is then $f_{\\text{post}} = f_0 + \\Delta f$.\n    - If the contingency is the outage of line $\\ell$, the pre-contingency flow on that line, $f_{0,\\ell}$, is used to find the redistributed flows. The change in flow on line $x$ is $\\Delta f_x = \\text{LODF}_{x,\\ell} \\cdot f_{0,\\ell}$. This is computed for all lines $x$. The post-contingency flow vector is $f_{\\text{post}} = f_0 + \\Delta f$. Crucially, the flow on the outaged line itself is then set to zero: $f_{\\text{post},\\ell} = 0$. This is naturally accounted for if $\\text{LODF}_{\\ell,\\ell} = -1$, which is a standard convention.\n\n3.  **Calculate Severity Score ($S$)**:\n    - For each line $x$ in the monitored set (all lines for injection changes, non-outaged lines for outages), we first find the magnitude of the overload, which is the amount by which the absolute post-contingency flow exceeds the thermal limit: $\\text{overload}_x = \\max(0, |f_{\\text{post},x}| - F_{\\max,x})$.\n    - This overload is then normalized by the line's thermal limit, $F_{\\max,x}$.\n    - The normalized value is squared.\n    - The severity score $S$ is the sum of these squared, normalized values over all monitored lines.\n    $$S = \\sum_{x} \\left( \\frac{\\text{overload}_x}{F_{\\max,x}} \\right)^2$$\n\n4.  **Store and Rank Results**:\n    - The calculated severity score $S$ and its corresponding contingency index are stored as a pair $(S, \\text{index})$.\n    - After processing all contingencies for a given test case, the list of pairs is sorted. The primary sorting key is the severity score, in descending order. The secondary sorting key is the contingency index, in ascending order, to resolve ties.\n\n5.  **Extract Top-k Contingencies**:\n    - From the sorted list, the indices of the first $k$ entries are extracted. This forms the result for the test case.\n\nThis procedure is repeated for all four test cases provided in the problem statement. The final output aggregates the lists of top-$k$ indices from each test case into a single formatted string.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the contingency analysis problem for a hardcoded test suite.\n    \"\"\"\n    \n    # Define test cases as specified in the problem statement.\n    test_cases = [\n        # Test Case 1 (general case)\n        {\n            \"f0\": np.array([80, 50, 90, 30, 60]),\n            \"Fmax\": np.array([100, 100, 90, 70, 80]),\n            \"PTDF\": np.array([\n                [0.3, -0.1, 0.2, -0.4],\n                [-0.2, 0.3, -0.1, 0.0],\n                [0.1, 0.2, -0.2, -0.1],\n                [-0.1, 0.0, 0.3, -0.2],\n                [0.0, -0.2, 0.1, 0.3]\n            ]),\n            \"LODF\": np.array([\n                [-1.0, 0.2, -0.1, 0.0, 0.3],\n                [0.1, -1.0, 0.25, -0.05, 0.0],\n                [-0.15, 0.2, -1.0, 0.1, -0.05],\n                [0.0, -0.1, 0.2, -1.0, 0.15],\n                [0.2, 0.0, -0.1, 0.3, -1.0]\n            ]),\n            \"contingencies\": [\n                {\"type\": \"line_outage\", \"line_index\": 2},\n                {\"type\": \"injection_change\", \"p_delta\": np.array([20, -10, -5, -5])},\n                {\"type\": \"line_outage\", \"line_index\": 0}\n            ],\n            \"k\": 2\n        },\n        # Test Case 2 (boundary and tie behavior)\n        {\n            \"f0\": np.array([100, 100, 90, 70, 80]),\n            \"Fmax\": np.array([100, 100, 90, 70, 80]),\n            \"PTDF\": np.array([\n                [0.3, -0.1, 0.2, -0.4],\n                [-0.2, 0.3, -0.1, 0.0],\n                [0.1, 0.2, -0.2, -0.1],\n                [-0.1, 0.0, 0.3, -0.2],\n                [0.0, -0.2, 0.1, 0.3]\n            ]),\n            \"LODF\": np.array([\n                [-1.0, 0.2, -0.1, 0.0, 0.3],\n                [0.1, -1.0, 0.25, -0.05, 0.0],\n                [-0.15, 0.2, -1.0, 0.1, -0.05],\n                [0.0, -0.1, 0.2, -1.0, 0.15],\n                [0.2, 0.0, -0.1, 0.3, -1.0]\n            ]),\n            \"contingencies\": [\n                {\"type\": \"line_outage\", \"line_index\": 4},\n                {\"type\": \"injection_change\", \"p_delta\": np.array([0, 0, 0, 0])},\n                {\"type\": \"line_outage\", \"line_index\": 2}\n            ],\n            \"k\": 1\n        },\n        # Test Case 3 (edge case with strong flow redistribution)\n        {\n            \"f0\": np.array([95, 85, 90, 60, 70]),\n            \"Fmax\": np.array([100, 90, 95, 65, 75]),\n            \"PTDF\": np.array([\n                [0.3, -0.1, 0.2, -0.4],\n                [-0.2, 0.3, -0.1, 0.0],\n                [0.1, 0.2, -0.2, -0.1],\n                [-0.1, 0.0, 0.3, -0.2],\n                [0.0, -0.2, 0.1, 0.3]\n            ]),\n            \"LODF\": np.array([ # Modified LODF\n                [-1.0, 0.9, -0.1, 0.0, 0.3],\n                [0.1, -1.0, 0.25, -0.05, 0.0],\n                [-0.15, 0.2, -1.0, 0.1, -0.05],\n                [0.0, -0.1, 0.2, -1.0, 0.15],\n                [0.2, 0.0, -0.1, 0.3, -1.0]\n            ]),\n            \"contingencies\": [\n                {\"type\": \"line_outage\", \"line_index\": 1},\n                {\"type\": \"injection_change\", \"p_delta\": np.array([30, -10, -10, -10])}\n            ],\n            \"k\": 2\n        },\n        # Test Case 4 (no overloads expected)\n        {\n            \"f0\": np.array([20, 10, 15, 5, 12]),\n            \"Fmax\": np.array([100, 100, 100, 100, 100]),\n            \"PTDF\": np.array([\n                [0.3, -0.1, 0.2, -0.4],\n                [-0.2, 0.3, -0.1, 0.0],\n                [0.1, 0.2, -0.2, -0.1],\n                [-0.1, 0.0, 0.3, -0.2],\n                [0.0, -0.2, 0.1, 0.3]\n            ]),\n            \"LODF\": np.array([ # Negligible off-diagonal LODF\n                [-1.0, 0.0, 0.0, 0.0, 0.0],\n                [0.0, -1.0, 0.0, 0.0, 0.0],\n                [0.0, 0.0, -1.0, 0.0, 0.0],\n                [0.0, 0.0, 0.0, -1.0, 0.0],\n                [0.0, 0.0, 0.0, 0.0, -1.0]\n            ]),\n            \"contingencies\": [\n                {\"type\": \"line_outage\", \"line_index\": 0},\n                {\"type\": \"injection_change\", \"p_delta\": np.array([10, -10, 0, 0])}\n            ],\n            \"k\": 2\n        }\n    ]\n\n    final_results = []\n    \n    for case_data in test_cases:\n        f0 = case_data[\"f0\"]\n        Fmax = case_data[\"Fmax\"]\n        PTDF = case_data[\"PTDF\"]\n        LODF = case_data[\"LODF\"]\n        contingencies = case_data[\"contingencies\"]\n        k = case_data[\"k\"]\n        \n        num_lines = len(f0)\n        contingency_scores = []\n        \n        for i, contingency in enumerate(contingencies):\n            f_post = np.zeros(num_lines)\n            monitored_mask = np.ones(num_lines, dtype=bool)\n\n            if contingency[\"type\"] == \"injection_change\":\n                p_delta = contingency[\"p_delta\"]\n                delta_f = PTDF @ p_delta\n                f_post = f0 + delta_f\n                # Monitored mask remains all True\n            \n            elif contingency[\"type\"] == \"line_outage\":\n                line_l = contingency[\"line_index\"]\n                f0_l = f0[line_l]\n                lodf_col = LODF[:, line_l]\n                delta_f = lodf_col * f0_l\n                f_post = f0 + delta_f\n                f_post[line_l] = 0.0\n                monitored_mask[line_l] = False\n\n            # Calculate severity score\n            # Use np.abs() for flow magnitude\n            overload = np.maximum(0, np.abs(f_post[monitored_mask]) - Fmax[monitored_mask])\n            \n            # To avoid division by zero if a limit is zero, although unlikely in a valid problem.\n            # Using a small epsilon or where clause is robust. Here, we assume Fmax > 0.\n            normalized_overload_sq = (overload / Fmax[monitored_mask]) ** 2\n            severity = np.sum(normalized_overload_sq)\n            \n            contingency_scores.append((severity, i))\n            \n        # Sort contingencies: descending by severity, then ascending by index for ties\n        contingency_scores.sort(key=lambda x: (-x[0], x[1]))\n        \n        # Get top-k contingency indices\n        top_k_indices = [index for severity, index in contingency_scores[:k]]\n        final_results.append(top_k_indices)\n\n    # Final print statement in the exact required format.\n    # str() on a list produces a string with spaces, e.g., '[1, 0]'.\n    # This matches the presentation style of the problem description.\n    print(f\"[{','.join(map(str, final_results))}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "任何电力市场模拟的核心都是经济调度问题，即如何以最低成本满足电力需求。该练习通过一个理想化的场景，阐明了一个基本原则：在完全竞争的市场中，所有被调度的发电机组都应以相同的边际成本运行，而这个成本决定了市场价格。通过解决这个经典的优化问题，您将亲手实践如何为一组发电机代理推导出最优发电量和相应的市场出清价格，从而掌握市场均衡分析的基础。",
            "id": "4069033",
            "problem": "考虑一个由独立系统运营商（ISO）运营的日前电力市场的基于代理的模型（ABM），其中发电机代理根据利润最大化提交供应，ISO在完全竞争下以统一价格出清市场。假设没有网络约束、没有最小出力、没有启动成本，除了非负性外没有其他容量限制。必须满足一个大小为 $D=100\\ \\mathrm{MW}$ 的单一非弹性负荷。\n\n两个发电机代理具有凸的可微成本函数，分别为 $C_{1}(q_{1})=5q_{1}+0.05q_{1}^{2}$ 和 $C_{2}(q_{2})=15q_{2}+0.02q_{2}^{2}$，其中 $q_{i}\\geq 0$ 是以 $\\mathrm{MW}$ 为单位的功率输出。ISO的集中式经济调度问题是在满足功率平衡和非负性约束的条件下最小化总生产成本，而统一市场出清价格 $p$ 等于竞争均衡下与功率平衡约束相关的拉格朗日乘子。\n\n从集中式成本最小化公式出发，利用凸规划的既定优化原理，推导经济调度的必要最优性条件，并计算调度量 $q_{1}$ 和 $q_{2}$ 以及相应的统一价格 $p$。将 $q_{1}$ 和 $q_{2}$ 以 $\\mathrm{MW}$ 表示，$p$ 以 $\\$/\\mathrm{MWh}$ 表示。无需四舍五入；提供精确值。",
            "solution": "用户希望我解决一个双发电机系统的经济调度问题。\n\n### 步骤1：提取已知条件\n- **总负荷需求：** $D = 100 \\ \\mathrm{MW}$。\n- **发电机1成本函数：** $C_{1}(q_{1}) = 5q_{1} + 0.05q_{1}^{2}$，对于 $q_{1} \\geq 0$。\n- **发电机2成本函数：** $C_{2}(q_{2}) = 15q_{2} + 0.02q_{2}^{2}$，对于 $q_{2} \\geq 0$。\n- **系统约束：**\n    - 功率平衡：$q_{1} + q_{2} = D$。\n    - 非负性：$q_{1} \\geq 0$，$q_{2} \\geq 0$。\n- **目标：** 最小化总生产成本 $C_{total} = C_{1}(q_{1}) + C_{2}(q_{2})$。\n- **价格定义：** 统一市场出清价格 $p$ 是功率平衡约束的拉格朗日乘子。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题具有科学依据、问题设定良好且客观。它描述了一个标准的凸优化问题，即经济调度，这是电力系统工程和电力市场理论中的一个基本概念。成本函数是凸二次函数，约束条件定义了一个凸集。在凸集上最小化凸函数保证了存在唯一的全局最小值。所有必要的数据（$D$ 和成本函数）都已提供，没有矛盾或歧义。该问题是一个有效且可形式化的科学问题。\n\n### 步骤3：结论与行动\n问题是有效的。我将继续进行解答。\n\n问题是求解以下集中式经济调度优化问题：\n$$\n\\begin{aligned}\n \\underset{q_{1}, q_{2}}{\\text{minimize}}\n  C_{total}(q_{1}, q_{2}) = (5q_{1} + 0.05q_{1}^{2}) + (15q_{2} + 0.02q_{2}^{2}) \\\\\n \\text{subject to}\n  q_{1} + q_{2} = 100 \\\\\n   q_{1} \\geq 0 \\\\\n   q_{2} \\geq 0\n\\end{aligned}\n$$\n这是一个凸优化问题，因为目标函数是两个凸函数的和，且约束条件定义了一个凸可行集。因此，卡鲁什-库恩-塔克（KKT）条件是达到最优的充分必要条件。\n\n完全竞争下的经济调度原则指出，发电机的调度应使其边际成本等于市场出清价格 $p$，前提是它们正在产生正的功率。每个发电机的边际成本是其成本函数对其输出量的的一阶导数。\n\n发电机1的边际成本为：\n$$\nMC_{1}(q_{1}) = \\frac{dC_{1}}{dq_{1}} = 5 + 0.1q_{1}\n$$\n发电机2的边际成本为：\n$$\nMC_{2}(q_{2}) = \\frac{dC_{2}}{dq_{2}} = 15 + 0.04q_{2}\n$$\n在零出力时，边际成本分别为 $MC_{1}(0) = 5 \\ \\$/\\mathrm{MWh}$ 和 $MC_{2}(0) = 15 \\ \\$/\\mathrm{MWh}$。由于 $MC_{1}(0)  MC_{2}(0)$，在调度发电机2之前调度发电机1总是更经济的。\n\n我们可以找到发电机1的出力水平，在该水平下其边际成本等于发电机2的初始边际成本。\n$$\nMC_{1}(q_{1}) = MC_{2}(0) \\implies 5 + 0.1q_{1} = 15\n$$\n求解 $q_{1}$：\n$$\n0.1q_{1} = 15 - 5\n$$\n$$\n0.1q_{1} = 10\n$$\n$$\nq_{1} = \\frac{10}{0.1} = 100 \\ \\mathrm{MW}\n$$\n这一结果表明，对于高达 $100 \\ \\mathrm{MW}$ 的任何总需求，仅使用发电机1是最经济的，因为在此范围内其边际成本不会超过发电机2的初始边际成本。\n\n需要满足的总需求恰好是 $D = 100 \\ \\mathrm{MW}$。因此，全部负荷由发电机1承担。最优调度量为：\n$$\nq_{1} = 100 \\ \\mathrm{MW}\n$$\n$$\nq_{2} = 0 \\ \\mathrm{MW}\n$$\n这些量满足功率平衡约束（$100 + 0 = 100$）和非负性约束（$100 \\geq 0$ 和 $0 \\geq 0$）。\n\n统一市场出清价格 $p$ 由供应的最后一单位能量的边际成本决定。在这种情况下，它是发电机1在其调度出力为 $100 \\ \\mathrm{MW}$ 时的边际成本。\n$$\np = MC_{1}(q_{1}=100) = 5 + 0.1(100)\n$$\n$$\np = 5 + 10 = 15 \\ \\$/\\mathrm{MWh}\n$$\n我们必须验证在此价格下，发电机2没有生产的激励。一个以利润最大化为目标的发电机只有在市场价格大于或等于其边际成本时才会生产。在价格 $p = 15 \\ \\$/\\mathrm{MWh}$ 时，发电机2的边际成本是 $MC_{2}(q_{2}) = 15 + 0.04q_{2}$。对于任何正出力 $q_{2}  0$，我们有 $MC_{2}(q_{2})  15$。由于价格 $p = 15$ 对于任何正出力都不超过其边际成本，发电机2的最优出力是 $q_{2}=0$。这与我们的调度解决方案一致。\n\n使用拉格朗日乘子的问题公式证实了这一结果。拉格朗日函数是：\n$$\n\\mathcal{L}(q_{1}, q_{2}, p) = C_{1}(q_{1}) + C_{2}(q_{2}) - p(q_{1} + q_{2} - 100)\n$$\n最优性的KKT条件（暂时忽略非负性，通过检查来处理）要求如果 $q_{i}0$，则 $\\frac{\\partial \\mathcal{L}}{\\partial q_{i}} = 0$。\n如果我们假设 $q_{1}0$ 和 $q_{2}0$，我们将得到以下方程组：\n$$\n\\begin{cases}\nMC_{1}(q_{1}) = p \\\\\nMC_{2}(q_{2}) = p \\\\\nq_{1} + q_{2} = 100\n\\end{cases}\n\\implies\n\\begin{cases}\n5 + 0.1q_{1} = 15 + 0.04q_{2} \\\\\nq_{1} + q_{2} = 100\n\\end{cases}\n$$\n将 $q_{2} = 100 - q_{1}$ 代入第一个方程：\n$$\n5 + 0.1q_{1} = 15 + 0.04(100 - q_{1})\n$$\n$$\n5 + 0.1q_{1} = 15 + 4 - 0.04q_{1}\n$$\n$$\n0.14q_{1} = 14 \\implies q_{1} = 100\n$$\n这得出 $q_{2} = 100 - 100 = 0$，这与 $q_{2}0$ 的假设相矛盾。这表明存在一个边界解，其中 $q_{2}=0$。基于比较零出力时边际成本的正式分析是正确的途径，得出的解为 $q_{1}=100 \\ \\mathrm{MW}$，$q_{2}=0 \\ \\mathrm{MW}$，以及 $p=15 \\ \\$/\\mathrm{MWh}$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 100  0  15 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "经济调度为日前市场设定了计划，但在实时运营中，实际发电量往往会偏离计划。此练习探讨了在常见的双结算市场（即日前市场和实时市场）中，这种偏差所带来的财务后果。通过计算一个发电机代理的失衡结算，您将理解市场机制如何通过价格信号和惩罚措施，激励市场参与者遵循调度计划，并管理运营中的不确定性风险。",
            "id": "4069020",
            "problem": "考虑一个发电机参与双结算电力市场的代理人基模型，该市场包括日前市场 (DAM) 和实时市场 (RTM)。在这种双结算设计中，适用以下基本定义：日前市场以日前价格出清计划生产量，而实时市场以实时价格结算实际产量与日前计划之间的任何偏差。此外，假设系统运营商施加一个与绝对偏差量成正比的线性偏差惩罚。假设结算周期持续时间为 $\\Delta t = 1$ 小时，因此在该周期内，以兆瓦为单位的功率在数值上等于以兆瓦时为单位的能量。\n\n一个发电机代理申报的日前量为 $q^{DA} = 50$ 兆瓦，实时实现的产量为 $q = 45$ 兆瓦。日前价格为 $\\pi^{DA} = 30$ 美元/兆瓦时，实时价格为 $\\pi^{RT} = 60$ 美元/兆瓦时。对绝对偏差施加的偏差惩罚率为 $\\gamma = 5$ 美元/兆瓦时。\n\n仅使用双结算设计和线性偏差惩罚的定义，通过结合对计划量的日前结算、对偏差的实时不平衡结算以及偏差惩罚，推导出净货币收益。将最终的净货币收益以美元为单位表示为单个实数。无需四舍五入。",
            "solution": "该问题要求计算在给定一组数量、价格和惩罚率的情况下，参与双结算电力市场的发电机的净货币收益。首先，评估问题陈述的有效性。\n\n### 步骤1：提取给定条件\n问题陈述中提供的数据如下：\n-   计划的日前量：$q^{DA} = 50$ 兆瓦。\n-   实际生产量：$q = 45$ 兆瓦。\n-   日前市场价格：$\\pi^{DA} = 30$ 美元/兆瓦时。\n-   实时市场价格：$\\pi^{RT} = 60$ 美元/兆瓦时。\n-   偏差惩罚率：$\\gamma = 5$ 美元/兆瓦时。\n-   结算周期持续时间：$\\Delta t = 1$ 小时。\n\n该问题还定义了结算机制：\n1.  日前市场 (DAM) 以日前价格 $\\pi^{DA}$ 结算计划量 $q^{DA}$。\n2.  实时市场 (RTM) 以实时价格 $\\pi^{RT}$ 结算与计划的偏差，该偏差定义为 $q - q^{DA}$。\n3.  以费率 $\\gamma$ 对偏差的绝对值 $|q - q^{DA}|$ 施加线性偏差惩罚。\n\n### 步骤2：使用提取的给定条件进行验证\n该问题具有科学依据，因为带有不平衡惩罚的双结算市场模型是电力系统经济学和能源系统建模中的一个标准和基本概念。该问题提法恰当；它提供了计算唯一货币收益所需的所有数据和定义。语言客观、精确。所提供的数值对于电力市场运营是合理的。该问题是自洽的，没有矛盾或缺失信息。因此，该问题被认为是有效的。\n\n### 步骤3：推导解答\n净货币收益，记为 $M_{net}$，是所述三个部分的现金流总和：日前结算、实时不平衡结算和偏差惩罚。结算周期持续时间为 $\\Delta t = 1$ 小时，这意味着以兆瓦 (MW) 为单位的功率值在数值上等同于以兆瓦时 (MWh) 为单位的能量值。\n\n1.  **日前市场 (DAM) 结算：** 发电机因其计划量 $q^{DA}$ 而获得日前价格 $\\pi^{DA}$ 的报酬。这是一个收入流。\n    $$M_{DA} = q^{DA} \\times \\pi^{DA}$$\n\n2.  **实时市场 (RTM) 不平衡结算：** 发电机与其计划的偏差为 $\\Delta q = q - q^{DA}$。此不平衡量以实时价格 $\\pi^{RT}$ 进行结算。如果偏差为负（产量不足），此结算代表一项成本，因为发电机必须以实时价格有效地回购缺额。如果偏差为正（产量过剩），则代表出售剩余能量获得的额外收入。\n    $$M_{RT} = (q - q^{DA}) \\times \\pi^{RT}$$\n\n3.  **偏差惩罚结算：** 以指定费率 $\\gamma$ 对偏差的绝对值 $|q - q^{DA}|$ 进行惩罚。这对发电机来说总是一项成本。\n    $$M_{penalty} = - \\gamma \\times |q - q^{DA}|$$\n\n总净货币收益是这三个部分的代数和：\n$$M_{net} = M_{DA} + M_{RT} + M_{penalty}$$\n将每个部分的表达式代入，得到净收益的通用公式：\n$$M_{net} = (q^{DA} \\times \\pi^{DA}) + ((q - q^{DA}) \\times \\pi^{RT}) - (\\gamma \\times |q - q^{DA}|)$$\n\n现在，我们将给定的数值代入此公式：\n-   $q^{DA} = 50$ MWh\n-   $q = 45$ MWh\n-   $\\pi^{DA} = 30$ $/MWh\n-   $\\pi^{RT} = 60$ $/MWh\n-   $\\gamma = 5$ $/MWh\n\n首先，计算偏差量 $\\Delta q$：\n$$\\Delta q = q - q^{DA} = 45 - 50 = -5 \\text{ MWh}$$\n绝对偏差为：\n$$|\\Delta q| = |45 - 50| = |-5| = 5 \\text{ MWh}$$\n\n现在，计算每个结算部分：\n1.  日前市场结算：\n    $$M_{DA} = 50 \\times 30 = 1500 \\text{ 美元}$$\n2.  实时市场不平衡结算：\n    $$M_{RT} = (-5) \\times 60 = -300 \\text{ 美元}$$\n3.  偏差惩罚：\n    $$M_{penalty} = - 5 \\times 5 = -25 \\text{ 美元}$$\n\n最后，净货币收益是这些值的总和：\n$$M_{net} = 1500 + (-300) + (-25)$$\n$$M_{net} = 1500 - 300 - 25 = 1175 \\text{ 美元}$$\n\n因此，发电机的最终净货币收益为 $1175$ 美元。",
            "answer": "$$\\boxed{1175}$$"
        },
        {
            "introduction": "在计算了日前能量收益和实时失衡成本后，发电机代理的总收入仍可能不足以覆盖其全部运营成本，例如启动成本和空载成本。这个问题引入了“补足付款”（make-whole uplift）机制来解决此困境。通过计算发电机所需的补偿金额，您将洞悉集中式市场设计中的一个关键规则，该规则确保了被系统运营商强制调度的发电机组不会出现财务亏损，从而保障了系统的可靠性和市场参与者的财务稳健性。",
            "id": "4069000",
            "problem": "考虑一个集中承诺的电力批发市场的基于代理的模拟，其中独立系统运营商 (ISO) 在一个结算区间内清算机组承诺并结算付款。一个发电机代理被承诺并被调度，其获得的电能量收入等于该区间的清算数量与区域边际电价的乘积。该区间实现的电能量收入为 $\\$2{,}000$。该发电机在该区间内产生的成本包括与输送电能量对应的 $\\$2{,}100$ 的可变运营成本、反映承诺决策的 $\\$400$ 的启动成本，以及与在最小稳定出力下运行相关的 $\\$150$ 的最小负荷成本。\n\n根据指导补偿支付（也称为增补）的成本回收原则，ISO 确保已承诺机组相对于其可验证的、按报价的生产成本的净市场结算不为负。使用结算和成本回收的基本原则，计算该发电机的补偿增补金额 $U$，该值为一个非负的美元值。最终答案以美元表示。在您的推理中，也请说明 ISO 在此区间内是否必须向该发电机支付增补费用。最终答案必须是单个实数值。",
            "solution": "该问题是有效的，因为它在科学上基于电力市场结算的原则，数据充分且一致，提法恰当，并且表述客观。它为补偿支付的计算提供了一个标准场景。\n\n计算补偿支付（或增补）的核心原则是，由独立系统运营商 (ISO) 调度的发电机在一个结算区间内，根据其报价成本，其运营不应产生净财务亏损。增补支付，用 $U$ 表示，是 ISO 支付给发电机以弥补其总产生费用与市场收入之间任何差额的非负金额。\n\n让我们定义在指定结算区间内发电机代理的相关财务量。\n实现的电能量收入给定为 $R_E = 2000$。\n总产生费用 $C_{Tot}$ 是可变运营成本 $C_V$、启动成本 $C_S$ 和最小负荷成本 $C_{ML}$ 的总和。\n问题提供了以下成本构成部分：\n- 可变运营成本，$C_V = 2100$。\n- 启动成本，$C_S = 400$。\n- 最小负荷成本，$C_{ML} = 150$。\n\n该区间的总产生费用是这些构成部分的总和：\n$$ C_{Tot} = C_V + C_S + C_{ML} $$\n代入给定值：\n$$ C_{Tot} = 2100 + 400 + 150 = 2650 $$\n\n在任何增补支付之前，发电机从市场运营中获得的净利润或亏损是其电能量收入与总成本之间的差额。让我们将此净头寸表示为 $P_N$。\n$$ P_N = R_E - C_{Tot} $$\n代入收入和总成本的值：\n$$ P_N = 2000 - 2650 = -650 $$\n这个负值表明，发电机在此区间内的市场参与中亏损了 $650$。\n\n补偿支付原则规定，发电机包括增补在内的最终结算头寸必须为非负。最终头寸为 $P_N + U$。\n$$ P_N + U \\ge 0 $$\n增补 $U$ 定义为满足此条件所需的最小非负支付。\n如果 $P_N \\ge 0$，则发电机已经盈利或实现收支平衡，因此不需要增补，且 $U = 0$。\n如果 $P_N  0$，则发电机存在亏损。增补必须正好弥补这一亏损，以使发电机“完整”（即无亏损），这意味着其最终头寸变为零。在这种情况下，$U = -P_N$。\n\n结合这两个条件，增补支付 $U$ 可以正式表示为：\n$$ U = \\max(0, -P_N) $$\n或者，这可以写成收入和总成本的形式：\n$$ U = \\max(0, C_{Tot} - R_E) $$\n使用计算出的值：\n$$ U = \\max(0, 2650 - 2000) $$\n$$ U = \\max(0, 650) $$\n$$ U = 650 $$\n\n补偿增补金额为 $650$。由于计算出的 $U$ 值大于 $0$，ISO 必须在此区间内向该发电机支付此增补金额。这笔支付确保了发电机可验证的、按报价的成本 $2650$ 完全由其电能量收入 ($2000$) 和增补支付 ($650$) 的总和所覆盖。",
            "answer": "$$\n\\boxed{650}\n$$"
        }
    ]
}
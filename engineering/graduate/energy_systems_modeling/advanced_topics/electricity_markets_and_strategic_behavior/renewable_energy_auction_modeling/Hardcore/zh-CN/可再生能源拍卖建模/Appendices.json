{
    "hands_on_practices": [
        {
            "introduction": "在制定复杂的投标策略之前，开发商首先必须了解其项目的基本成本。本练习旨在通过使用平准化度电成本（Levelized Cost of Energy, LCOE）的概念，为任何理性竞标者建立“底价”或盈亏平衡点。这是参与任何能源拍卖的基础，将抽象的投标概念与具体的项目融资现实联系起来。",
            "id": "4116632",
            "problem": "一个参与密封投标、按投标报价支付的可再生能源拍卖的开发商，必须选择一个固定不变的实际兆瓦时投标价格，以使项目的净现值正好达到盈亏平衡。假设项目在时间 $t = 0$ 有一笔金额为 $I_{0}$ 的前期资本支出，从 $t = 1$ 开始的 $N$ 年内，每年提供恒定的预期年发电量 $E$，并在这 $N$ 年中每年产生固定不变的实际运营和维护成本 $O$。设开发商的实际加权平均资本成本 (WACC) 为 $r$，并假设没有价格上涨，没有可变运营和维护成本，没有弃电，没有补贴，没有税收效应，以及在项目寿命结束时残值为零。投标人的盈亏平衡投标价是这样一个固定不变的实际价格 $p^{\\ast}$ (以货币/兆瓦时为单位)，当以实际WACC贴现时，折现净现金流的净现值为零。\n\n从净现值和货币时间价值的定义出发，推导出 $p^{\\ast}$ 关于 $I_{0}$、$r$、$O$、$E$ 和 $N$ 的解析表达式。然后，根据以下描述一个公用事业规模陆上风电场的、科学上合理的数值示例，计算 $p^{\\ast}$：\n\n- 前期资本支出：$I_{0} = \\$\\,150{,}000{,}000$ (美元)。\n- 实际加权平均资本成本：$r = 0.06$。\n- 固定年运营和维护成本：$O = \\$\\,4{,}000{,}000$ 每年。\n- 预期年发电量：$E = 350{,}400$ 兆瓦时每年。\n- 经济寿命：$N = 25$ 年。\n\n将最终投标价 $p^{\\ast}$ 以美元/兆瓦时 (USD/MWh) 表示。将您的答案四舍五入到四位有效数字。",
            "solution": "该问题要求推导盈亏平衡投标价 $p^{\\ast}$ 的解析表达式，并根据给定的参数集进行数值计算。盈亏平衡条件定义为使项目所有现金流的净现值 (NPV) 为零的价格。\n\n首先，我们确定项目在其生命周期内的现金流。\n在时间 $t=0$ 的初始资本支出是 $I_{0}$ 的现金流出。在 $t=0$ 时的现金流为 $CF_{0} = -I_{0}$。\n从 $t=1$ 到 $t=N$ 的每一年 $t$，项目产生收入并发生运营和维护成本。\n年收入是固定不变的实际价格 $p^{\\ast}$ 和恒定的预期年发电量 $E$ 的乘积。因此，年收入为 $R_t = p^{\\ast} E$。年度运营和维护成本为O。\n在运营期内（$1 \\le t \\le N$）的任何一年 $t$ 的净现金流是恒定的，由下式给出：\n$$CF_t = R_t - O = p^{\\ast}E - O \\quad \\text{for } t=1, 2, \\dots, N$$\n\n项目的净现值 (NPV) 是项目生命周期内（从 $t=0$ 到 $t=N$）所有折现现金流的总和。贴现率是实际加权平均资本成本 (WACC)，用 $r$ 表示。NPV 的通用公式是：\n$$NPV = \\sum_{t=0}^{N} \\frac{CF_t}{(1+r)^t}$$\n代入该项目的具体现金流：\n$$NPV = CF_0 + \\sum_{t=1}^{N} \\frac{CF_t}{(1+r)^t} = -I_0 + \\sum_{t=1}^{N} \\frac{p^{\\ast}E - O}{(1+r)^t}$$\n盈亏平衡条件要求 $NPV = 0$。\n$$0 = -I_0 + \\sum_{t=1}^{N} \\frac{p^{\\ast}E - O}{(1+r)^t}$$\n我们可以重新整理这个方程来求解 $p^{\\ast}$：\n$$I_0 = \\sum_{t=1}^{N} \\frac{p^{\\ast}E - O}{(1+r)^t}$$\n由于年净现金流项 $(p^{\\ast}E - O)$ 对于所有年份 $t=1, \\dots, N$ 都是恒定的，因此可以将其从求和中提出来：\n$$I_0 = (p^{\\ast}E - O) \\sum_{t=1}^{N} \\frac{1}{(1+r)^t}$$\n求和项是一个有限几何级数，其首项为 $a = \\frac{1}{1+r}$，公比为 $q = \\frac{1}{1+r}$，共有 $N$ 项。有限几何级数的和由 $S_N = a \\frac{1-q^N}{1-q}$ 给出。\n将此公式应用于我们的求和：\n$$\\sum_{t=1}^{N} \\left(\\frac{1}{1+r}\\right)^t = \\frac{1}{1+r} \\frac{1 - \\left(\\frac{1}{1+r}\\right)^N}{1 - \\frac{1}{1+r}} = \\frac{1}{1+r} \\frac{1 - (1+r)^{-N}}{\\frac{1+r-1}{1+r}} = \\frac{1-(1+r)^{-N}}{r}$$\n这个表达式是年金现值系数 (PVIFA)，通常表示为 $A(r, N)$。\n将此代回我们的 $I_0$ 方程：\n$$I_0 = (p^{\\ast}E - O) \\left( \\frac{1-(1+r)^{-N}}{r} \\right)$$\n现在，我们求解 $p^{\\ast}$。首先，分离出项 $(p^{\\ast}E - O)$：\n$$p^{\\ast}E - O = I_0 \\left( \\frac{r}{1-(1+r)^{-N}} \\right)$$\n项 $\\frac{r}{1-(1+r)^{-N}}$ 被称为资本回收系数 (CRF)。它将在贴现率为 $r$ 的情况下，将初始投资 $I_0$ 在 $N$ 年内进行年化。\n接下来，我们在等式两边加上 $O$，然后除以 $E$：\n$$p^{\\ast}E = O + I_0 \\left( \\frac{r}{1-(1+r)^{-N}} \\right)$$\n$$p^{\\ast} = \\frac{1}{E} \\left( O + I_0 \\frac{r}{1-(1+r)^{-N}} \\right)$$\n这就是盈亏平衡投标价 $p^{\\ast}$ 的解析表达式。在给定的假设下，此表达式等同于平准化度电成本 (LCOE)。\n\n现在，我们使用所提供的数据计算 $p^{\\ast}$ 的数值：\n-   $I_{0} = 150,000,000$\n-   $r = 0.06$\n-   $O = 4,000,000$\n-   $E = 350,400$\n-   $N = 25$\n\n首先，我们计算项 $(1+r)^{-N}$：\n$$(1+r)^{-N} = (1.06)^{-25}$$\n为确保精度，使用计算器计算，$(1.06)^{25} \\approx 4.29187075$，所以 $(1.06)^{-25} \\approx 0.232997365$。\n\n接下来，我们计算资本回收系数 (CRF)：\n$$\\text{CRF} = \\frac{r}{1-(1+r)^{-N}} = \\frac{0.06}{1 - 0.232997365} = \\frac{0.06}{0.767002635} \\approx 0.0782268797$$\n\n现在，我们可以计算年化资本成本：\n$$\\text{Annualized Capital Cost} = I_0 \\times \\text{CRF} = 150,000,000 \\times 0.0782268797 \\approx 11,734,031.95$$\n年化总成本是年化资本成本和年度运营和维护成本之和。\n$$\\text{Total Annualized Cost} = O + (I_0 \\times \\text{CRF}) = 4,000,000 + 11,734,031.95 = 15,734,031.95$$\n最后，我们通过将年化总成本除以年发电量来计算 $p^{\\ast}$：\n$$p^{\\ast} = \\frac{\\text{Total Annualized Cost}}{E} = \\frac{15,734,031.95}{350,400} \\approx 44.9030592$$\n问题要求将答案四舍五入到四位有效数字。\n$$p^{\\ast} \\approx 44.90$$\n单位是美元/兆瓦时 (USD/MWh)。",
            "answer": "$$\\boxed{44.90}$$"
        },
        {
            "introduction": "在确定了项目的基本成本之后，下一步自然是进入竞争策略的领域。本练习探讨了一个理性的竞标者在常见的“按投标报价支付”（pay-as-bid）拍卖模式中，应如何通过考虑其他竞争者的行为来制定自己的报价。通过推导对称贝叶斯纳什均衡（Bayesian Nash Equilibrium）中的投标函数，本练习为理解竞拍者的策略行为提供了坚实的理论基础。",
            "id": "4116627",
            "problem": "一个可再生能源采购机构举办一场密封投标、按投标报价支付的反向拍卖，从$n$个风险中性的发电商中采购一个单位的容量。每个发电商 $i \\in \\{1,\\dots,n\\}$ 都有一个私有的边际成本 $c_i$，该成本是从 $[0,1]$ 上的均匀分布中独立同分布 (i.i.d.) 抽取的。每个发电商观察到自己的成本 $c$ 后提交一个投标报价 $b$，该报价被解释为其愿意供应一个单位容量的价格。拍卖将合同授予出价最低的发电商，赢家获得其投标报价的报酬。在严格递增的策略下，出现平局的概率为零。\n\n假设所有发电商都采用一个对称、严格递增且可微的投标策略 $b(c)$，并假设投标者在给定其他参与者策略的情况下最大化其预期利润，这与独立私有成本设定中的贝叶斯纳什均衡 (Bayesian Nash equilibrium) 一致。使用风险中性投标者的预期利润定义、分布函数的性质，以及每种成本类型的参与者在给定他人策略下都最优地选择自己出价的均衡要求，推导在支撑集 $c \\in [0,1]$ 上的对称均衡投标函数 $b(c)$ 的闭式表达式。此外，验证所推导的 $b(c)$ 是关于 $c$ 单调的，并在成本支撑集的上下两端满足经济上自然的边界行为。\n\n将最终的投标函数表示为单一的解析表达式。无需进行数值四舍五入。最终表达式中不要包含单位。",
            "solution": "该问题要求解在一个密封投标、按投标报价支付的反向拍卖中的对称贝叶斯纳什均衡 (BNE) 投标策略。给定 $n$ 个风险中性的发电商，每个发电商的私有边际成本 $c_i$ 从区间 $[0,1]$ 上的均匀分布中独立同分布地抽取。令 $b(c)$ 表示所有发电商都遵循的对称、严格递增且可微的投标策略。\n\n一个成本为 $c$ 的发电商提交投标报价 $b$，如果赢得拍卖，其利润为 $\\pi = b - c$；如果输掉拍卖，其利润为 $\\pi = 0$。拍卖被授予出价最低的发电商。因此，一个成本为 $c$ 的发电商选择一个投标报价 $b$ 来最大化其预期利润：\n$$\nE[\\pi(b,c)] = (b - c) \\cdot P(\\text{winning with bid } b)\n$$\n一个投标者当且仅当其报价 $b$ 低于所有其他 $n-1$ 个竞争者的报价时才能获胜。设竞争者 $j$ 的报价为 $b_j = b(c_j)$。获胜的条件是对于所有 $j \\in \\{1,\\dots,n-1\\}$，都有 $b  b_j$。由于 $b(c)$ 是严格递增的，它有一个良定义的反函数 $c(b) = b^{-1}(b)$。条件 $b  b(c_j)$ 等价于 $c(b)  c_j$。\n\n成本 $c_j$ 是从 $[0,1]$ 上的均匀分布中独立同分布抽取的，其累积分布函数 (CDF) 为 $F(x) = x$，其中 $x \\in [0,1]$。单个竞争者 $j$ 的成本大于 $c(b)$ 的概率是：\n$$\nP(c_j  c(b)) = 1 - P(c_j \\le c(b)) = 1 - F(c(b)) = 1 - c(b)\n$$\n由于竞争者的成本是独立的，以报价 $b$ 获胜的概率是所有 $n-1$ 个竞争者的成本都大于 $c(b)$ 的概率：\n$$\nP(\\text{winning with bid } b) = [1 - c(b)]^{n-1}\n$$\n在对称贝叶斯纳什均衡中，成本为 $c$ 的投标者必须发现报价 $b(c)$ 是最优的。这意味着投标者通过向投标函数“如实”报告其类型 $c$ 来最大化其预期利润。考虑一个真实成本为 $c$ 的投标者，他考虑假装其成本为 $\\hat{c}$ 进行投标，从而提交报价 $b(\\hat{c})$。他的预期利润是：\n$$\nE[\\pi(\\hat{c}, c)] = (b(\\hat{c}) - c) \\cdot P(\\text{winning with bid } b(\\hat{c}))\n$$\n获胜的概率取决于报价 $b(\\hat{c})$，而报价又取决于其声明的类型 $\\hat{c}$。以报价 $b(\\hat{c})$ 获胜的概率是 $[1 - F(\\hat{c})]^{n-1} = (1 - \\hat{c})^{n-1}$。\n预期利润函数为：\n$$\nE[\\pi(\\hat{c}, c)] = (b(\\hat{c}) - c)(1 - \\hat{c})^{n-1}\n$$\n为了使均衡存在，每种类型 $c$ 都必须发现选择 $\\hat{c} = c$ 是最优的。这要求最大化的一阶条件在 $\\hat{c} = c$ 处成立：\n$$\n\\frac{\\partial}{\\partial \\hat{c}} E[\\pi(\\hat{c}, c)] \\bigg|_{\\hat{c}=c} = 0\n$$\n对 $\\hat{c}$ 应用乘积法则求导：\n$$\n\\frac{\\partial}{\\partial \\hat{c}} \\left[ (b(\\hat{c}) - c)(1 - \\hat{c})^{n-1} \\right] = b'(\\hat{c})(1 - \\hat{c})^{n-1} + (b(\\hat{c}) - c)(n-1)(1 - \\hat{c})^{n-2}(-1)\n$$\n令 $\\hat{c} = c$ 并将表达式设为零：\n$$\nb'(c)(1 - c)^{n-1} - (n-1)(b(c) - c)(1 - c)^{n-2} = 0\n$$\n对于 $c \\in [0,1)$，我们可以除以 $(1-c)^{n-2}$ (假设 $n \\ge 2$)，得到一个一阶线性常微分方程 (ODE)：\n$$\nb'(c)(1 - c) - (n-1)(b(c) - c) = 0\n$$\n将各项重新排列成标准线性形式 $b'(c) + P(c)b(c) = Q(c)$：\n$$\nb'(c) - \\frac{n-1}{1-c} b(c) = -\\frac{(n-1)c}{1-c}\n$$\n我们使用积分因子 $I(c) = \\exp\\left(\\int P(c) dc\\right)$ 来解这个常微分方程。\n$$\n\\int P(c) dc = \\int -\\frac{n-1}{1-c} dc = (n-1)\\ln(1-c)\n$$\n积分因子是 $I(c) = \\exp((n-1)\\ln(1-c)) = (1-c)^{n-1}$。\n将常微分方程两边乘以 $I(c)$ 得到：\n$$\n\\frac{d}{dc}[b(c)(1-c)^{n-1}] = -\\frac{(n-1)c}{1-c}(1-c)^{n-1} = -(n-1)c(1-c)^{n-2}\n$$\n对两边关于 $c$ 进行积分：\n$$\nb(c)(1-c)^{n-1} = \\int -(n-1)c(1-c)^{n-2} dc + K\n$$\n其中 $K$ 是积分常数。右边的积分可以使用分部积分法 $\\int u dv = uv - \\int v du$ 求解。令 $u=c$ 且 $dv = -(n-1)(1-c)^{n-2}dc$。则 $du=dc$ 且 $v=(1-c)^{n-1}$。\n$$\n\\int -(n-1)c(1-c)^{n-2} dc = c(1-c)^{n-1} - \\int (1-c)^{n-1} dc = c(1-c)^{n-1} + \\frac{(1-c)^n}{n}\n$$\n因此，通解为：\n$$\nb(c)(1-c)^{n-1} = c(1-c)^{n-1} + \\frac{(1-c)^n}{n} + K\n$$\n为了确定 $K$，我们应用一个边界条件。成本最高（即 $c=1$）的投标者战胜任何竞争者的概率为零（因为 $c_j  1$ 的概率为 1）。为避免亏损，该投标者的最优策略是按其成本出价，即 $b(1)=1$，以确保零利润。应用这个条件，当 $c \\to 1$ 时，左侧以及右侧前两项都趋于零（对于 $n \\ge 2$）。这意味着 $K=0$。\n\n当 $K=0$ 时，我们有：\n$$\nb(c)(1-c)^{n-1} = c(1-c)^{n-1} + \\frac{(1-c)^n}{n}\n$$\n对于 $c \\in [0,1)$，两边除以 $(1-c)^{n-1}$，得到唯一的对称均衡投标函数：\n$$\nb(c) = c + \\frac{1-c}{n}\n$$\n这个表达式可以重写为 $b(c) = \\frac{n-1}{n}c + \\frac{1}{n}$。\n\n最后，我们按要求验证此解的性质。\n1.  **单调性**：投标函数关于成本的导数是：\n    $$\n    \\frac{db}{dc} = \\frac{d}{dc}\\left(c + \\frac{1-c}{n}\\right) = 1 - \\frac{1}{n} = \\frac{n-1}{n}\n    $$\n    对于任何有 $n \\ge 2$ 个竞争者的拍卖，该导数为正。因此，$b(c)$ 是 $c$ 的严格递增函数，这证实了我们的初始假设。成本越高，出价越高。\n2.  **边界行为**：\n    -   在成本下边界，即 $c=0$ 时，投标报价为 $b(0) = 0 + \\frac{1-0}{n} = \\frac{1}{n}$。一个零成本的投标者会加上一个加价，该加价随着竞争者数量 $n$ 的增加而减少，反映了竞争压力的增加。这在经济学上是合理的。\n    -   在成本上边界，即 $c=1$ 时，投标报价为 $b(1) = 1 + \\frac{1-1}{n} = 1$。成本最高的投标者按其真实成本出价，确保在获胜这一零概率事件中不会产生亏损。这与理性经济行为相符。\n\n推导出的函数满足问题的所有要求。",
            "answer": "$$\n\\boxed{c + \\frac{1-c}{n}}\n$$"
        },
        {
            "introduction": "赢得拍卖并非终点，成功交付项目才是关键。这个高级练习探讨了拍卖后阶段确保项目履约的挑战。本练习采用委托代理模型（principal-agent model），分析了惩罚和监督等合同工具如何激励开发商降低违约风险，这对于理解现实世界中可再生能源采购的风险管理至关重要。",
            "id": "4116704",
            "problem": "考虑一个通过拍卖合同进行的程式化可再生能源采购，其中单个开发商承担一个可能成功也可能违约的项目。监管机构规定了违约惩罚并承诺进行监管。监管能以一定的准确性识别违约，被发现的违约将引发金钱惩罚。开发商选择付出努力来管理项目风险并最大化期望利润。社会规划者将福利评估为期望能源价值减去实际资源成本和短缺损失，并将转移支付视为中性。使用概率论和期望值最大化，在给定参数下推导并计算期望违约概率和社会成本，并评估相对于无惩罚基线的福利效应。\n\n模型基本要素与定义：\n- 开发商选择非负的努力水平 $e \\ge 0$。\n- 项目成功的概率为 $p(e) = 1 - \\exp(-\\alpha e)$，其中 $\\alpha  0$ 是一个已知的响应参数。\n- 开发商的努力成本为 $c(e) = \\frac{1}{2} k e^2$，其中 $k  0$ 是一个已知的凸性参数。\n- 监管机构的监管准确性为 $\\theta \\in [0,1]$，解释为在发生违约时，该违约被检测到的条件概率。\n- 如果检测到违约，将向开发商收取固定的惩罚 $\\Pi \\ge 0$。如果未检测到违约，则不收取惩罚。\n- 开发商在成功时的私人收益（扣除生产成本，不包括惩罚）是一个固定金额 $P \\ge 0$。在违约时的私人收益（不包括惩罚）为 $0$。\n- 社会规划者认为成功项目的价值为 $V \\ge 0$（以货币单位，如美元计），违约造成的社会短缺损失为 $L \\ge 0$（以货币单位计）。\n- 监管需要付出实际资源成本 $m(\\theta) = r \\theta^2$，其中 $r \\ge 0$ 是一个由社会承担的成本参数。\n- 将所有转移支付（包括惩罚收入）视为对社会福利中性；只有实际的资源成本和收益才计入社会福利。\n\n假设：\n- 开发商是风险中性的，并根据 $p(e)$、$c(e)$、监管准确性 $\\theta$ 和惩罚 $\\Pi$ 选择 $e$ 以最大化期望利润。\n- 监管机构的参数 $(\\alpha, k, \\Pi, \\theta, P, V, L, r)$ 是外生给定的，并且双方都知晓。\n- 所有参数都具有科学意义且严格非负，其中 $\\alpha  0$ 且 $k  0$。\n\n任务：\n1. 使用期望值最大化和基础微积分，计算开发商的最优努力 $e^\\star(\\alpha, k, \\Pi, \\theta, P)$。\n2. 计算期望违约概率 $d^\\star = 1 - p(e^\\star)$。\n3. 计算社会成本\n$$\\mathrm{SC}(\\alpha, k, \\Pi, \\theta, P, V, L, r) = \\left(1 - p(e^\\star)\\right) L + \\frac{1}{2} k \\left(e^\\star\\right)^2 + r \\theta^2 - p(e^\\star) V,$$\n以货币单位表示，四舍五入至六位小数。\n4. 通过计算\n$$\\Delta W = W(\\Pi, \\theta) - W(0, \\theta),$$\n来评估惩罚的福利效应，其中 $W(\\cdot) = -\\mathrm{SC}(\\cdot)$ 是社会福利，因此 $\\Delta W = \\mathrm{SC}(\\alpha, k, 0, \\theta, P, V, L, r) - \\mathrm{SC}(\\alpha, k, \\Pi, \\theta, P, V, L, r)$，四舍五入至六位小数。正的 $\\Delta W$ 表示在相同的监管准确性 $\\theta$ 下，该惩罚相对于零惩罚基线提高了福利。\n\n要求的输出格式：\n- 对于每个测试用例，返回一个列表 $[d^\\star, \\mathrm{SC}, \\Delta W]$，其中 $d^\\star$ 是一个在 $[0,1]$ 区间内的小数（不是百分比），$\\mathrm{SC}$ 和 $\\Delta W$ 是以货币单位表示并四舍五入到六位小数的浮点数。\n- 您的程序应生成单行输出，其中包含这些按测试用例排列的列表，并用方括号括起来的逗号分隔列表（例如，`[[d_1,SC_1,ΔW_1],[d_2,SC_2,ΔW_2]]`）。\n\n测试用例：\n为以下参数集提供结果：\n- 案例 1（标准情形）：$\\alpha = 0.8$, $k = 1.2$, $\\Pi = 50.0$, $\\theta = 0.7$, $P = 30.0$, $V = 80.0$, $L = 60.0$, $r = 10.0$。\n- 案例 2（完美监管的边界情形）：$\\alpha = 1.0$, $k = 1.0$, $\\Pi = 100.0$, $\\theta = 1.0$, $P = 20.0$, $V = 80.0$, $L = 40.0$, $r = 5.0$。\n- 案例 3（无监管的边缘情形）：$\\alpha = 0.5$, $k = 1.5$, $\\Pi = 50.0$, $\\theta = 0.0$, $P = 30.0$, $V = 70.0$, $L = 50.0$, $r = 3.0$。\n- 案例 4（零惩罚的边缘情形）：$\\alpha = 0.9$, $k = 2.0$, $\\Pi = 0.0$, $\\theta = 0.8$, $P = 40.0$, $V = 90.0$, $L = 80.0$, $r = 12.0$。\n\n单位说明：\n- 以货币单位（例如，美元）表示货币量 $V$、$L$、$\\mathrm{SC}$ 和 $\\Delta W$。\n- 将 $d^\\star$ 表示为小数（而不是百分比）。\n- 将货币输出 $\\mathrm{SC}$ 和 $\\Delta W$ 四舍五入到六位小数。",
            "solution": "该问题要求在可再生能源项目开发的背景下，对一个程式化的委托-代理模型进行分析。开发商（代理人）选择努力水平以提高项目成功概率，而监管机构（委托人）设置违约惩罚以减轻违约风险。我们将确定开发商的最优努力、由此产生的项目违约概率以及总体社会成本。\n\n### 1. 开发商的最优努力\n\n假设开发商是风险中性的，并选择努力水平 $e \\ge 0$ 来最大化其期望利润。期望利润，记为 $\\mathbb{E}[\\text{Profit}]$，是所有可能状态下收益的总和，按其概率加权。\n\n主要有两种结果：项目成功或项目违约。\n- 成功的概率由 $p(e) = 1 - \\exp(-\\alpha e)$ 给出。开发商成功时的净收益为 $P$。\n- 违约的概率为 $1 - p(e) = \\exp(-\\alpha e)$。如果发生违约，以概率 $\\theta$ 被检测到，此时开发商将承担惩罚 $\\Pi$。开发商的收益为 $-\\Pi$。如果违约未被检测到（概率为 $1-\\theta$），则收益为 $0$。因此，在违约发生条件下的期望收益为 $\\theta(-\\Pi) + (1-\\theta)(0) = -\\theta\\Pi$。\n\n开发商的努力成本为 $c(e) = \\frac{1}{2} k e^2$。\n\n综合这些元素，开发商的期望利润函数为：\n$$\n\\mathbb{E}[\\text{Profit}](e) = p(e) \\cdot P + (1 - p(e)) \\cdot (-\\theta \\Pi) - c(e)\n$$\n代入 $p(e)$ 和 $c(e)$ 的函数形式：\n$$\n\\mathbb{E}[\\text{Profit}](e) = (1 - \\exp(-\\alpha e))P + (\\exp(-\\alpha e))(-\\theta \\Pi) - \\frac{1}{2} k e^2\n$$\n$$\n\\mathbb{E}[\\text{Profit}](e) = P - P\\exp(-\\alpha e) - \\theta \\Pi \\exp(-\\alpha e) - \\frac{1}{2} k e^2\n$$\n$$\n\\mathbb{E}[\\text{Profit}](e) = P - (P + \\theta \\Pi) \\exp(-\\alpha e) - \\frac{1}{2} k e^2\n$$\n为了找到使该函数最大化的最优努力 $e^\\star$，我们应用一阶条件（FOC），即对 $e$ 求导并令其为零。\n$$\n\\frac{d}{de} \\mathbb{E}[\\text{Profit}](e) = - (P + \\theta \\Pi) (-\\alpha \\exp(-\\alpha e)) - k e = 0\n$$\n$$\n\\alpha (P + \\theta \\Pi) \\exp(-\\alpha e) - k e = 0\n$$\n这是内部最大值的必要条件。为确认其为最大值，我们检查二阶条件（SOC）：\n$$\n\\frac{d^2}{de^2} \\mathbb{E}[\\text{Profit}](e) = \\frac{d}{de} \\left[ \\alpha (P + \\theta \\Pi) \\exp(-\\alpha e) - k e \\right] = -\\alpha^2 (P + \\theta \\Pi) \\exp(-\\alpha e) - k\n$$\n鉴于参数约束 $\\alpha  0$、$k  0$、$P \\ge 0$、$\\theta \\ge 0$ 和 $\\Pi \\ge 0$，二阶导数中的每一项都是非正的，且 $k$ 是严格为正的。因此，对于所有 $e$，$\\frac{d^2}{de^2} \\mathbb{E}[\\text{Profit}](e)  0$。这证实了期望利润函数是严格凹的，任何满足一阶条件的解都对应一个唯一的全局最大值。\n\n一阶条件 $\\alpha (P + \\theta \\Pi) \\exp(-\\alpha e) = k e$ 是一个超越方程。它没有关于 $e$ 的闭式解析解。因此，必须使用数值求根算法来找到最优努力 $e^\\star$。由于开发商必须选择 $e \\ge 0$，且在 $e=0$ 处的导数为 $\\alpha(P+\\theta\\Pi) \\ge 0$，因此最优努力保证为非负，即 $e^\\star \\ge 0$。\n\n### 2. 期望违约概率和社会成本\n\n一旦确定了最优努力 $e^{\\star}$，相应的期望违约概率 $d^\\star$ 为：\n$$\nd^\\star = 1 - p(e^\\star) = \\exp(-\\alpha e^\\star)\n$$\n社会成本 $\\mathrm{SC}$ 定义为期望社会损失和实际资源成本之和，减去期望产生的社会价值。像惩罚 $\\Pi$ 这样的转移支付在社会层面上是财政中性的，不出现在 $\\mathrm{SC}$ 公式中。\n$$\n\\mathrm{SC} = (\\text{违约概率}) \\cdot L + (\\text{努力成本}) + (\\text{监管成本}) - (\\text{成功概率}) \\cdot V\n$$\n$$\n\\mathrm{SC}(\\alpha, k, \\Pi, \\theta, P, V, L, r) = (1 - p(e^\\star)) L + \\frac{1}{2} k (e^\\star)^2 + r \\theta^2 - p(e^\\star) V\n$$\n代入 $p(e^\\star) = 1-d^\\star$：\n$$\n\\mathrm{SC} = d^\\star L + \\frac{1}{2} k (e^\\star)^2 + r \\theta^2 - (1 - d^\\star) V\n$$\n$$\n\\mathrm{SC} = d^\\star (L + V) - V + \\frac{1}{2} k (e^\\star)^2 + r \\theta^2\n$$\n\n### 3. 惩罚的福利效应\n\n福利效应 $\\Delta W$ 是引入惩罚 $\\Pi$ 相对于无惩罚基线（$\\Pi=0$）所带来的社会福利变化，同时保持监管准确性 $\\theta$ 不变。社会福利 $W$ 是社会成本的负值，即 $W = -\\mathrm{SC}$。\n$$\n\\Delta W = W(\\Pi, \\theta) - W(0, \\theta) = (-\\mathrm{SC}_{\\Pi}) - (-\\mathrm{SC}_{0}) = \\mathrm{SC}_{0} - \\mathrm{SC}_{\\Pi}\n$$\n在这里，$\\mathrm{SC}_{\\Pi}$ 是用给定的惩罚 $\\Pi$ 计算的社会成本，而 $\\mathrm{SC}_{0}$ 是在基线情况（$\\Pi=0$）下的社会成本。为了计算 $\\mathrm{SC}_{0}$，我们必须首先找到基线情况下的最优努力 $e^\\star_0$，通过求解 $\\Pi=0$ 时的一阶条件：\n$$\n\\alpha P \\exp(-\\alpha e) - k e = 0\n$$\n一旦找到 $e^\\star_0$，我们使用相同的社会成本公式，但用 $e^\\star_0$ 代替 $e^\\star$ 来计算相关的基线社会成本 $\\mathrm{SC}_{0}$。一个正的 $\\Delta W$ 表示惩罚方案提高了社会福利。\n\n### 4. 计算算法\n\n对于每组参数 $(\\alpha, k, \\Pi, \\theta, P, V, L, r)$，所需值的计算如下：\n\n1.  **计算有惩罚时的最优努力 $e^\\star$：**\n    - 定义函数 $f(e) = \\alpha (P + \\theta \\Pi) \\exp(-\\alpha e) - k e$。\n    - 数值求解 $f(e) = 0$ 得到 $e$，即为 $e^\\star$。\n\n2.  **计算有惩罚情况下的指标：**\n    - 计算最优违约概率：$d^\\star = \\exp(-\\alpha e^\\star)$。\n    - 计算社会成本 $\\mathrm{SC}_{\\Pi} = d^\\star (L + V) - V + \\frac{1}{2} k (e^\\star)^2 + r \\theta^2$。\n\n3.  **计算基线（无惩罚）的最优努力 $e^\\star_0$：**\n    - 定义函数 $f_0(e) = \\alpha P \\exp(-\\alpha e) - k e$。\n    - 数值求解 $f_0(e) = 0$ 得到 $e$，即为 $e^\\star_0$。\n\n4.  **计算基线社会成本：**\n    - 计算基线违约概率：$d^\\star_0 = \\exp(-\\alpha e^\\star_0)$。\n    - 计算基线社会成本 $\\mathrm{SC}_{0} = d^\\star_0 (L + V) - V + \\frac{1}{2} k (e^\\star_0)^2 + r \\theta^2$。\n\n5.  **计算福利效应：**\n    - 计算 $\\Delta W = \\mathrm{SC}_{0} - \\mathrm{SC}_{\\Pi}$。\n\n6.  **格式化输出：**\n    - 将 $\\mathrm{SC}_{\\Pi}$ 和 $\\Delta W$ 四舍五入到六位小数。\n    - 将结果组合成列表 $[d^\\star, \\mathrm{SC}_{\\Pi}, \\Delta W]$。",
            "answer": "```python\nimport numpy as np\nfrom scipy.optimize import root_scalar\n\ndef solve():\n    \"\"\"\n    Computes optimal default probability, social cost, and welfare effect\n    for a series of renewable energy auction scenarios.\n    \"\"\"\n\n    test_cases = [\n        # Case 1 (happy path)\n        {\"alpha\": 0.8, \"k\": 1.2, \"Pi\": 50.0, \"theta\": 0.7, \"P\": 30.0, \"V\": 80.0, \"L\": 60.0, \"r\": 10.0},\n        # Case 2 (boundary with perfect monitoring)\n        {\"alpha\": 1.0, \"k\": 1.0, \"Pi\": 100.0, \"theta\": 1.0, \"P\": 20.0, \"V\": 80.0, \"L\": 40.0, \"r\": 5.0},\n        # Case 3 (edge with no monitoring)\n        {\"alpha\": 0.5, \"k\": 1.5, \"Pi\": 50.0, \"theta\": 0.0, \"P\": 30.0, \"V\": 70.0, \"L\": 50.0, \"r\": 3.0},\n        # Case 4 (edge with zero penalty)\n        {\"alpha\": 0.9, \"k\": 2.0, \"Pi\": 0.0, \"theta\": 0.8, \"P\": 40.0, \"V\": 90.0, \"L\": 80.0, \"r\": 12.0},\n    ]\n\n    def calculate_metrics(alpha, k, Pi, theta, P, V, L, r):\n        \"\"\"\n        Calculates optimal effort, default probability, and social cost for\n        a single set of parameters.\n        \n        Args:\n            alpha (float): Effort responsiveness parameter.\n            k (float): Effort cost convexity parameter.\n            Pi (float): Non-performance penalty.\n            theta (float): Monitoring accuracy.\n            P (float): Private payoff on success.\n            V (float): Social value of success.\n            L (float): Social loss from default.\n            r (float): Monitoring cost parameter.\n\n        Returns:\n            tuple: A tuple containing (optimal_effort, social_cost).\n        \"\"\"\n        # Define the first-order condition function whose root is the optimal effort e.\n        # FOC: alpha * (P + theta * Pi) * exp(-alpha * e) - k * e = 0\n        foc_func = lambda e: alpha * (P + theta * Pi) * np.exp(-alpha * e) - k * e\n        \n        # Numerically solve for optimal effort e_star.\n        # The function is well-behaved, so a simple bracket is sufficient.\n        # If P + theta * Pi is zero, effort is zero.\n        if P + theta * Pi == 0:\n            e_star = 0.0\n        else:\n            sol = root_scalar(foc_func, bracket=[0, 1000], method='brentq')\n            e_star = sol.root\n\n        # Calculate default probability d_star\n        d_star = np.exp(-alpha * e_star)\n        \n        # Calculate social cost\n        effort_cost = 0.5 * k * e_star**2\n        monitoring_cost = r * theta**2\n        sc = d_star * (L + V) - V + effort_cost + monitoring_cost\n        \n        return e_star, d_star, sc\n\n    results = []\n    for params in test_cases:\n        alpha, k, Pi, theta, P, V, L, r = params.values()\n\n        # 1. Calculate metrics for the case with the given penalty Pi\n        e_star, d_star, sc_pi = calculate_metrics(alpha, k, Pi, theta, P, V, L, r)\n\n        # 2. Calculate metrics for the baseline case with Pi = 0\n        _, _, sc_0 = calculate_metrics(alpha, k, 0.0, theta, P, V, L, r)\n\n        # 3. Calculate the welfare effect\n        delta_w = sc_0 - sc_pi\n\n        # 4. Format the result list [d_star, SC, Delta_W]\n        # Round SC and Delta_W to six decimal places.\n        result_list = [d_star, round(sc_pi, 6), round(delta_w, 6)]\n        results.append(result_list)\n\n    # Convert the list of lists to the required string format\n    # e.g., [[d1,SC1,DW1],[d2,SC2,DW2]]\n    output_str = \"[\" + \",\".join([f\"[{item[0]},{item[1]},{item[2]}]\" for item in results]) + \"]\"\n    \n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
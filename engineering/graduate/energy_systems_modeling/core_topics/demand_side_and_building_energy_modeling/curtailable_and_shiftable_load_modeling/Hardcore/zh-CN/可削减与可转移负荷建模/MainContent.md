## 引言
在向高比例可再生能源过渡的现代[电力](@entry_id:264587)系统中，需求侧的灵活性正从一个可选项转变为保障系统经济、可靠运行的核心支柱。然而，要有效利用数以百万计的异构负荷（如暖通空调、电动汽车、工业过程）所蕴含的灵活性，我们必须超越概念性的讨论，建立能够精确描述其行为[并指](@entry_id:276731)导其优化的数学模型。本文旨在填补这一知识鸿沟，为[可削减负荷](@entry_id:1123315)（Curtailable Loads）与可转移负荷（Shiftable Loads）的建模提供一个系统性的框架。

在接下来的内容中，您将首先通过 **“原理与机制”** 章节学习这两种负荷类型的严格数学定义、物理基础以及核心建模原理，理解它们在本质上的区别。随后，**“应用与跨学科连接”** 章节将展示如何将这些理论应用于暖通空调、电动汽车等具体物理系统，并探讨它们如何整合到电网运营、市场设计和[分布式控制](@entry_id:167172)架构中，发挥系统级价值。最后，**“动手实践”** 章节将通过一系列精心设计的编程练习，让您将理论付诸实践，亲手构建和求解负荷调度优化问题。

让我们从最基本的问题开始：如何从数学和物理层面精确地区分并描述不同类型的柔性负荷？

## 原理与机制

在深入探讨[需求侧管理](@entry_id:1123538)的数学模型之前，我们必须首先建立一个关于柔性负荷行为的清晰分类和基本原理。本章将系统地阐述[可削减负荷](@entry_id:1123315)与可转移负荷的核心区别，通过严格的数学定义、物理设备实例以及优化理论，为其建模和控制奠定坚实的理论基础。我们将从基本分类出发，逐步深入到具体的物理机制、优化结构和经济评估方法。

### 柔性负荷的基本分类

[电力](@entry_id:264587)负荷的灵活性主要体现在两个维度：**服务的量**和**服务的时间**。对这种灵活性的不同利用方式，构成了柔性负荷的基本分类。我们可以借助一个形式化的[状态空间](@entry_id:160914)框架来精确定义这些类别。假设一个用电设备的服务由一个随时间变化的功率输入 $p(t)$ 驱动，该输入作用于设备的内部状态 $x(t)$，其动态过程由 $\dot{x}(t) = f(x(t), p(t), t)$ 描述。设备最终提供的服务输出为 $s(t) = g(x(t), p(t), t)$。

基于此框架，我们可以区分以下关键的负荷类型 ：

**[可削减负荷](@entry_id:1123315) (Curtailable Loads)** 的核心特征是其服务总量的灵活性。这类负荷允许其总服务量 $q = \int s(t) dt$ 低于某个基准水平 $q_0$，以换取成本节约或响应电网信号。其总能耗或需完成的工作量并非先验固定的。用户对部分服务的价值通常由一个非递减的效用函数 $U(q)$ 来量化。因此，对此类负荷的控制是一个在服务效用与能源成本之间进行权衡的优化问题。
一个典型的例子是商业建筑的照明系统。通过调暗灯光，[瞬时功率](@entry_id:174754) $p(t)$ 和服务输出（[照度](@entry_id:166905)）$s(t)$ 均会降低，从而减少了总服务量（以流明-小时计）和总能耗 $E = \int p(t) dt$。用户接受了较低的[照度](@entry_id:166905)，以换取电费的节省。

**可转移负荷 (Shiftable Loads)** 则与之相反，其核心特征是服务总量的守恒性。这类负荷对应一个必须完成的固定工作量 $W^{\star}$ 或一个固定的总能耗预算 $E^{\star}$。灵活性体现在消耗这些能量或完成这项工作的时间上。控制的目标是在满足总量约束（例如 $\int p(t) dt = E^{\star}$）和截止时间 $\tau$ 等运行限制的前提下，通过调整功率曲线 $p(t)$ 来最小化能源成本。
一个经典的例子是家用洗碗机。洗碗程序需要消耗固定的电量 $E^{\star}$ 来完成洗涤和烘干。用户通常不关心这个程序是在下午6点的高峰时段执行，还是在凌晨2点的低谷时段执行，只要碗碟能在第二天早上之前洗净即可。这种特性允许我们将能耗从高电价时段“转移”到低电价时段，而服务的最终结果（干净的碗碟）并未改变。

在可转移负荷的大类下，还有两个重要的子类：

**可中断负荷 (Interruptible Loads)**：这是一类特殊的可转移负荷，其内部状态具有惯性（例如[热惯性](@entry_id:147003)或化学惯性）。这种惯性使得功率输入 $p(t)$ 可以在短时间内被完全中断（即 $p(t)=0$），而不会导致任务失败或[服务质量](@entry_id:753918)严重下降。例如，一台恒温控制的空调，其控制的室内温度 $x(t)$ 变化缓慢。当电网需要时，可以将其关闭15分钟，室内温度可能只会略微上升，仍在舒适区间内。这段中断的时间可以通过在其他时段稍高的功率运行来补偿，最终在整个时间尺度上维持了期望的平均温度，总制冷量保持不变。

**可推迟负荷 (Deferrable Loads)**：这是另一类特殊的可转移负荷，其主要灵活性在于任务的启动时间。任务本身具有固定的能量需求 $E^{\star}$ 和一个明确的截止时间。一个典型的例子是电动汽车（EV）充电。车主在傍晚回家后插上充电枪，并设定次日早晨出发前电池需达到某个目标电量（例如80%）。充电过程可以在此期间的任何时间开始和进行，甚至可以被调制和中断，只要在出发时刻 $T_{\text{dep}}$ 满足最终状态约束 $x(T_{\text{dep}}) \ge x^{\star}$ 即可。

综上所述，**[可削减负荷](@entry_id:1123315)通过牺牲部分服务量来提供灵活性，而可转移、可中断、可推迟负荷则在保全总服务量的前提下，通过调整服务的时间来提供灵活性。**

### 物理设备与模型映射

为了将这些抽象的分类应用于实际，我们必须理解具体设备的物理特性和运行约束。以下是一些常见设备与其[对应模](@entry_id:200367)型类别的映射关系 。

- **可削减服务负荷 (Curtailable Service Load, CSL)**：其服务与功率消耗同步，几乎没有能量或服务的存储。最典型的例子是**LED照明**。其输出的照度 $L(t)$ 与瞬时功率 $P(t)$ 近乎成正比（$L(t) \approx \phi P(t)$，其中 $\phi$ 为[发光效率](@entry_id:176455)）。降低功率会立即使[照度](@entry_id:166905)下降，损失的服务无法在未来“补偿”。

- **恒温控制负荷 (Thermostatically Controlled Load, TCL)**：这类负荷（TCL）调控一个物理状态（通常是温度 $T(t)$）在预设的上下限 $[T_{\min}, T_{\max}]$ 内。其核心是存在显著的**热惯性**（由热容 $C$ 和热阻 $R$ 描述），表现出类似储能的动态特性。**电热水器**和**超市冷柜**是典型的TCL。它们巨大的热容（水箱中的水或冷库中的货物）使得其可以在电价低时“预冷”或“[预热](@entry_id:159073)”，将能量存储为热能，从而在电价高时减少或关闭运行，而温度仍能维持在可接受范围内。这种动态特性是其灵活性的物理来源。

- **可推迟能量约束任务 (Deferrable Energy-Constrained Task, DECT)**：这类负荷的特征是有一个定义明确的能量“桶”需要被填满。**[电动汽车充电](@entry_id:1124250)**是完美的例子。电池需要充入能量 $E_i$，充[电功率](@entry_id:273774) $P_i(t)$ 可以在其最大功率 $P_{\max,i}$ 以下灵活调节，只要在截止时间 $d_i$ 之前完成能量目标 $\int_{a_i}^{d_i} P_i(t) dt = E_i$ 即可。

- **不间断连续过程 (Non-Interruptible Continuous Process, NCP)**：作为对比，这类负荷几乎没有灵活性。中断其运行会带来灾难性后果。例如，**工业电解铝**（Hall–Héroult法）需要持续稳定的强电流来维持电解槽的熔融状态。一旦断电导致熔体[凝固](@entry_id:156052)，重启成本极高且可能损坏设备。因此，它被建模为必须以恒定功率运行的刚性负荷。

### 建模原理与数学表达

#### 严格的分类标准

我们可以进一步从用户服务接受度的角度，为可转移和[可削减负荷](@entry_id:1123315)提供一个更为严格的数学区分标准 。

一个设备应被建模为**可转移负荷**，当且仅当其用户接受的服务轨迹集合 $\mathcal{A}$ 主要由**累积服务量**定义，并且对服务在时间窗口内的具体分配不敏感。形式上，这意味着存在一个或多个时间窗口 $W_k$ 和服务量要求 $S_k$，使得一个服务轨迹 $s(\cdot)$ 被接受的充要条件是 $\forall k: \int_{W_k} s(t) dt \ge S_k$，并且对于任意在窗口 $W_k$ 内对时间进行重排序的变换 $\pi_k$，变换后的服务轨迹 $s \circ \pi_k$ 依然被接受。这精确地捕捉了“任务完成即可，过程无关紧要”的特点。

相反，一个设备应被建模为**[可削减负荷](@entry_id:1123315)**，当且仅当其接受集合 $\mathcal{A}$ 是**逐点向下封闭**的，并且不存在硬性的累积服务要求。也就是说，如果一个服务轨迹 $s(\cdot)$ 是可接受的，那么任何满足 $0 \le s'(t) \le s(t)$ 的轨迹 $s'(\cdot)$ 也至少在某种程度上是可接受的（尽管效用可能更低）。其用户效用通常可以表示为一个时间可分的积分形式 $U(s) = \int_0^T u_t(s(t)) dt$，其中 $u_t$ 是一个增函数，反映了对瞬时服务的边际价值。这种结构允许在任何时刻独立地减少服务，并承受相应的效用损失。

#### 可转移负荷的建模

可转移负荷模型的核心是**能量守恒约束**。在离散时间模型中，这表现为一个[等式约束](@entry_id:175290) ：
$$
\sum_{t \in W} P_t \Delta t = E
$$
其中 $P_t$ 是时段 $t$ 的功率，$\Delta t$ 是时段长度，$W$ 是调度窗口，$E$ 是必须完成的总能量。此约束表明，任何可行的功率调度方案都必须不多不少地消耗能量 $E$。

要使这样的调度成为可能，总能量需求 $E$ 必须满足**可行性条件** 。即，在调度窗口内能提供的最大能量必须不小于所需能量：
$$
E \le P_{\max} \cdot \Delta t \cdot |W|
$$
其中 $P_{\max}$ 是设备的[最大功](@entry_id:143924)率，$|W|$ 是窗口内的时段数。如果此条件不满足，任务根本无法在窗口内完成。

在满足可行性条件的前提下，若要最小化能源成本 $\sum_{t \in W} c_t P_t \Delta t$（其中 $c_t$ 是时变电价），优化问题会倾向于在电价最低的时段以最大功率运行，即所谓的“填谷”效应。如果成本函数 $\varphi(P_t)$ 是严格凸的（例如，考虑了效率损失或设备折旧），并且时间同质（即 $\varphi_t = \varphi$ 对所有 $t$ 成立），那么[最优调度](@entry_id:1129178)策略将是**功率均衡**。除非受到功率上下限的约束，否则最优解是在所有活动时段内保持恒定功率 $P_t = E / (\Delta t |W|)$，因为这能最小化总的凸成本  。这种均衡或“水填充”原理是[凸优化](@entry_id:137441)在该领域的直接应用。

可转移负荷的建模还需区分**可抢占 (preemptible)** 和**[不可抢占](@entry_id:752683) (non-preemptible)** 任务 。我们上面讨论的模型属于可抢占任务，功率 $P_t$ 可以是连续变量，任务可以被任意分割和中断。然而，许多工业过程或设备运行（如一个完整的洗衣循环）是[不可抢占](@entry_id:752683)的，它们一旦开始，就必须以特定功率连续运行一段时间。这种[不可抢占](@entry_id:752683)性引入了**非凸性**和**组合复杂性**。其可行集不再是单个[凸多面体](@entry_id:170947)，而是多个不相交的“块”的并集。这通常需要引入[二进制变量](@entry_id:162761)来表示任务的启停状态，从而将问题从一个易于求解的[线性规划](@entry_id:138188)（LP）或凸规划问题，转变为一个计算上更为困难的混合整数线性规划（MILP）问题。

此外，截止时间也可以不是硬约束。我们可以使用一个随完成时间 $t_f$ 变化的效用函数来建模“软”截止时间，例如，一个在截止时间 $D$ 之后线性递减的效用函数 $U(t_f) = U_{\max} - \alpha (t_f - D)$。这种模型允许在能源成本和延期惩罚之间进行权衡，可能会导致一个有趣的决策：为了利用远期的极低电价，宁愿承受一定的延期惩罚 。

#### [可削减负荷](@entry_id:1123315)的建模

[可削减负荷](@entry_id:1123315)的模型通常不包含固定的能量[等式约束](@entry_id:175290)。其核心是围绕一个**效用或不悦度 (disutility) 函数**进行优化。一个常见的模型是最小化偏离用户偏好功率 $P_{\text{ref}}$ 的二次不悦度 ：
$$
\underset{\{P_t\}}{\text{minimize}} \quad \sum_{t=1}^{T} \alpha (P_t - P_{\text{ref}})^2
$$
约束条件通常包括功率的物理限制 $P_{\min} \le P_t \le P_{\max}$ 和一个可选的最小服务水平（例如，总能耗不低于 $E_{\min}$）。由于[目标函数](@entry_id:267263)是凸的，约束是线性的，这类问题是易于求解的[凸优化](@entry_id:137441)问题。一个重要的结论是，如果外部条件（如电价）不随时间变化，最优的功率调度 $P_t^{\star}$ 将是一个常数。这同样源于[凸优化](@entry_id:137441)的詹森不等式（Jensen's inequality），即均摊风险或成本总是更优的。

对于许多[可削减负荷](@entry_id:1123315)，特别是TCL，其动态行为至关重要。以HVAC系统为例，其灵活性源于建筑的**热惯性**。我们可以用一个[一阶微分方程](@entry_id:173139)来描述室内温度 $T(t)$ 的动态 ：
$$
C \frac{dT(t)}{dt} = G ( T_{\text{a}} - T(t) ) + q - \mathrm{COP} \cdot P_{t}
$$
其中 $C$ 是热容，$G$ 是[热导](@entry_id:189019)系数，$T_{\text{a}}$ 是室外温度，$q$ 是内部热源，$\mathrm{COP}$ 是能效系数。在正常运行时，系统以基线功率 $P_b$ 运行，维持室内温度在[设定点](@entry_id:154422) $T_s$。

当执行削减事件（例如，强制 $P_t=0$ 一段时间 $\tau_c$）时，由于热惯性，室内温度 $T(t)$ 不会立即飙升，而是会逐渐升高。当削减结束后，为了将温度恢复到设定点 $T_s$，HVAC系统必须以高于基线功率 $P_b$ 的功率 $P_r$ 运行一段时间。这个现象被称为**“反弹效应” (rebound effect)**。通过求解上述[微分](@entry_id:158422)方程，我们可以精确地量化反弹功率 $P_r$ 的大小。可以证明，$P_r$ 与基线功率 $P_b$、削减时长 $\tau_c$ 以及系统的[热力学](@entry_id:172368)参数（$C$ 和 $G$）直接相关。反弹效应的存在意味着对TCL的削减本质上是一种能量的转移——短期的能耗降低必然导致后续的能耗增加，总能量在较长的时间尺度上是近似守恒的。

### 经济价值与性能评估

#### [服务质量](@entry_id:753918)量化

对柔性负荷的调度必然会影响用户体验，因此量化**[服务质量](@entry_id:753918) (Quality of Service, QoS)** 至关重要。由于可削减和可转移负荷提供灵活性的方式根本不同，它们的QoS指标也必须有所区别 。

对于**[可削减负荷](@entry_id:1123315)**，[服务质量](@entry_id:753918)的核心在于**瞬时匹配度**。用户关心的是在需要服务的时候，服务是否得到满足。一个合理的QoS指标是比较实际提供的服务 $p_c(t)$ 与用户期望的服务 $d_c(t)$。由于超额供给通常没有价值，我们只关心未被满足的部分。因此，一个归一化的[服务质量](@entry_id:753918)指标可以定义为：
$$
Q_c = \frac{\int w_c(t) \min\{p_c(t), d_c(t)\} dt}{\int w_c(t) d_c(t) dt}
$$
其中 $w_c(t)$ 是时间相关的权重，反映了不同时段服务的重要性。该指标衡量了在加权意义下，需求被满足的比例。

对于**可转移负荷**，用户对[瞬时功率](@entry_id:174754)不敏感，而关心的是**任务是否在偏好的时间窗口内完成**。因此，其QoS指标应衡量在偏好窗口 $\mathcal{W}$ 内完成了多少比例的能量任务 $E_s$：
$$
Q_s = \frac{1}{E_s} \int_{\mathcal{W}} p_s(t) dt
$$
这个指标直接反映了调度结果与用户偏好的吻合程度。例如，如果一半的充电能量是在用户偏好的夜间低谷时段完成的，那么 $Q_s = 0.5$。

#### 缺荷价值 (VoLL)

对于[可削减负荷](@entry_id:1123315)，一个核心的经济概念是**缺荷价值 (Value of Lost Load, VoLL)**。从经济学第一性原理出发，VoLL代表了消费者因失去一单位能量（例如，一[千瓦时](@entry_id:145433)）而遭受的福利损失，也即消费该单位能量的边际效用 。在优化的电力市场中，VoLL相当于电[力平衡](@entry_id:267186)约束的影子价格。

VoLL是一个关键的决策输入，因为它为我们提供了削减负荷的“成本”。当市场电价高于用户的VoLL时，进行负荷削减对整个社会而言是经济的。由于VoLL通常远高于正常的零售电价（因为它包含了[消费者剩余](@entry_id:139829)），它为需求响应资源参与市场竞争提供了理论依据。

在实践中，VoLL可以通过多种方式进行校准。例如，通过调查用户在一次特定时长 $d$ 和功率 $L$ 的停电中所遭受的经济损失 $C$，我们可以估算 VoLL 为 $C / (L \cdot d)$。另一种方法是通过分析用户愿意为提升供电可靠性支付的费用（Willingness-to-Pay, WTP）。例如，如果用户愿意每年支付 $W$ 美元来换取年均期望停电时长减少 $\Delta h$ 小时（对应平均负荷 $L$），那么VoLL可以估算为 $W / (L \cdot \Delta h)$。一个稳健的VoLL估算通常会结合多种数据来源，以确保其一致性和可靠性。
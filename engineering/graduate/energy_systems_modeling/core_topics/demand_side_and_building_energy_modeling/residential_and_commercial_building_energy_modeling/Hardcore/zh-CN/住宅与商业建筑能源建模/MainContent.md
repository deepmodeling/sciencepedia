## 引言
在全球应对气候变化和追求可持续发展的背景下，建筑部门的能源消耗已成为关注的[焦点](@entry_id:174388)。住宅和商业建筑占据了全球总能耗的相当大一部分，因此，准确预测、分析和优化其能源性能，对于实现节能减排目标至关重要。然而，建筑是一个复杂的热力学系统，其能耗受到室外气候、建筑设计、内部使用模式和暖通空调系统等多种动态因素的相互作用影响。为了应对这一挑战，建筑能量建模应运而生，它提供了一套基于物理原理的[科学方法](@entry_id:143231)，用以量化和理解建筑的能源行为。

本文旨在为读者构建一个关于住宅和商业建筑能量建模的全面知识体系。我们将从**第一章“原理与机制”**开始，深入剖析建筑能量平衡的第一性原理，揭示热量和湿气在建筑内外传递与转换的核心机制。随后，在**第二章“应用与跨学科联系”**中，我们将展示如何将这些理论应用于实际工程问题，从单个构件的性能分析到整合化节能策略的经济评估，再到建筑在城市和全球尺度上的角色。最后，通过**第三章“动手实践”**，您将有机会运用所学知识解决具体的建模与分析问题，将理论内化为实践能力。让我们首先进入第一章，从最基本的物理定律出发，探索构建一个精确建筑能量模型所需的基础知识。

## 原理与机制

本章深入探讨住宅和商业建筑能量建模的核心物理原理和数学机制。继引言部分对建筑能耗重要性的宏观概述之后，我们将从第一性原理出发，系统地构建描述建筑[热力学](@entry_id:172368)行为的框架。理解这些基本原理对于准确预测能源使用、评估[能效](@entry_id:272127)措施以及设计高性能建筑至关重要。我们将以一个控制体[能量平衡方程](@entry_id:191484)为核心，逐一剖析构成该平衡的各个关键部分：围护结构传热、太阳与内部得热、湿空气效应以及系统交互。

### 建筑作为[热力学系统](@entry_id:188734)：能量平衡原理

从最根本的层面看，一个建筑或其内部的某个区域（称为“热区”）可以被视为一个**控制体 (control volume)**，其热力学状态随时间演变。控制体的能量守恒，即热力学第一定律，是所有建筑能量模型的基础。该定律指出，控制体内能量的变化率等于净传入控制体的能量速率。

对于一个典型的建筑热区，我们可以将其空气和快速响应的内部陈设（如家具）的蓄热能力集总为一个单一的**热容 (thermal capacitance)** $C_z$（单位：J/K）。该热区的状态可以用其集总的空气温度 $T_z$ 来表征。能量守恒定律可以写成一个[一阶常微分方程](@entry_id:264241) ：

$$C_z \frac{dT_z(t)}{dt} = \sum \dot{Q}(t)$$

其中，$C_z \frac{dT_z(t)}{dt}$ 代表热区内部储存的显热能随时间的变化率。等式右边的 $\sum \dot{Q}(t)$ 是所有进出该热区的净热流率之和，各项热流的正负号约定为：凡是导致热区温度 $T_z$ 上升的热流为正。这些热流项可以主要归为以下几类：

1.  **通过围护结构的热传递 ($\dot{Q}_{\text{envelope}}$)**：通过墙体、屋顶、楼板、窗户等建筑外壳的导热、对流和辐射换热。
2.  **太阳得热与内部得热 ($\dot{Q}_{\text{gains}}$)**：穿过透明围护结构（窗户）的太阳辐射，以及由室内人员、照明和设备产生的热量。
3.  **系统与渗透带来的热交换 ($\dot{Q}_{\text{system}}$)**：由暖通空调（HVAC）系统主动供给或带走的热量，以及通过建筑围护结构缝隙的空气渗透所带来的热量交换。

将这些项明确表示出来，上述[能量平衡方程](@entry_id:191484)可以更具体地写为 ：

$$C_z \frac{dT_z}{dt} = \dot{Q}_{\text{conduction}} + \dot{Q}_{\text{solar}} + \dot{Q}_{\text{internal}} + \dot{Q}_{\text{infiltration}} + \dot{Q}_{\text{HVAC}}$$

这个方程是建筑动态热响应建[模的基](@entry_id:156416)石。接下来的章节将详细阐述如何从物理原理出发，为方程右侧的每一项建立数学模型。

### 通过建筑围护结构的热传递

建筑围护结构是室[内环境](@entry_id:922914)与室外环境之间的屏障。通过它发生的热传递是决定建筑供暖和制冷负荷的关键因素。

#### 导热与对流：[U值](@entry_id:151629)

在[稳态](@entry_id:139253)条件下，即温度不随时间变化时，通过不透明围护结构（如墙体、屋顶）的热传递主要由导热和对流主导。一维导热过程遵循**[傅里叶定律](@entry_id:136311) (Fourier's Law)**，即热流率与温度梯度成正比。对于一个厚度为 $L$、导热系数为 $k$ 的均质平壁，其**热阻 (thermal resistance)**，或称 **R值 (R-value)**，定义为 $R = L/k$。值得注意的是，**导热系数 $k$ (thermal conductivity)** 是材料的固有属性，而热阻 $R$ 是一个特定构件（取决于材料和厚度）的属性 。

一个典型的建筑墙体是由多层不同材料构成的复合结构。在[稳态](@entry_id:139253)一维传热模型中，这些层可以被看作是串联的电阻。总热阻不仅包括各材料层的导热热阻，还必须考虑内外表面的对流和长波辐射换热。这种表面换热过程可以用**表面换热系数 (surface heat transfer coefficient)** $h$ 来描述，其对应的**表面热阻 (surface resistance)** 为 $R_s = 1/h$。因此，通过一个多层墙体的[总热阻](@entry_id:149048) $R_{total}$ 是所有串联热阻的总和 ：

$$R_{total} = R_{si} + \sum_{i=1}^{n} \frac{L_i}{k_i} + R_{so}$$

其中，$R_{si}$ 和 $R_{so}$ 分别是室内和室外表面热阻。[总热阻](@entry_id:149048)的倒数被称为**[总传热系数](@entry_id:151629) (overall heat transfer coefficient)**，或称 **[U值](@entry_id:151629) (U-factor)**，$U = 1/R_{total}$。利用[U值](@entry_id:151629)，通过面积为 $A$ 的围护结构的[稳态热流](@entry_id:264790)率可以简洁地表示为 $\dot{Q} = U A (T_o - T_i)$。

表面热阻是总热阻中不可忽略的重要组成部分。例如，室外风速的增加会强化外表面的[对流换热](@entry_id:151349)，导致 $h_o$ 增大，从而使室外表面热阻 $R_{so}$ 减小，进而增大了整体的[U值](@entry_id:151629)和热量损失。忽略表面热阻会低估总热阻，从而高估建筑的[U值](@entry_id:151629)和热负荷 。

#### 蓄热体的动力学

建筑并非总是处于[稳态](@entry_id:139253)。室外温度和太阳辐射的日变化使得建筑的热响应成为一个动态过程。**蓄热体 (thermal mass)**，即材料储存显热的能力（通常用其体积热容 $\rho c_p$ 来量化），在调节室内温度波动中扮演着至关重要的角色。

当周期性的热作用（如日间太阳辐射）施加于一个具有显著蓄热能力的构件（如厚重的混凝土楼板）时，[热波](@entry_id:167489)在向内传播的过程中会发生两个显著现象 ：

1.  **时间延迟 (Time Lag)**：热波的峰值从外表面传播到内表面需要一定的时间。对于一个24小时周期的外部[温度波](@entry_id:193534)动，一个厚度为 $0.20$ 米的混凝土板可以产生大约5小时的时间延迟。这意味着室外下午最热时段的热量影响，直到晚上才会传递到室内。

2.  **衰减 (Attenuation)**：[热波](@entry_id:167489)在传播过程中振幅会减小。上述混凝土板可以使外部温度波动的振幅衰减至原来的约 $26\%$。

这两种效应共同作用，能够“[削峰](@entry_id:1129481)填谷”，即降低白天的峰值制冷负荷，并将其推迟到电价可能更低的夜间时段，从而对建筑的能耗和舒适性产生积极影响。这种利用建筑结构自身材料进行[储热](@entry_id:1133030)的方式被称为**分布式蓄热 (distributed mass)**。

与此相对的是**专用蓄热 (dedicated storage)**，例如使用**[相变材料](@entry_id:1129572) (Phase Change Materials, PCM)**。PCM利用其在特定温度（[熔点](@entry_id:195793)）下发生相变时吸收或释放大量**潜热 (latent heat)** 的特性。如果选择熔点接近室内设定温度的PCM，当室内温度试图超过[设定点](@entry_id:154422)时，PCM会开始熔化，吸收大量热量而自身温度基本保持不变。这种机制可以有效地“钳制”室内表面温度，直接削减峰值负荷，而不是仅仅延迟和衰减它 。

#### 渗透与空气泄漏

除了通过围护结构的热传递，室内外空气通过建筑外壳的缝隙、裂缝和开口发生的非受控交换——即**渗透 (infiltration)**——也是一个重要的热交换路径。渗透率通常用**换气次数 (Air Changes per Hour, ACH)** 来衡量，它表示每小时进入建筑的室外空气体积与建筑总体积之比。

驱动空气渗透的主要物理力有两个 ：

1.  **风压 (Wind Pressure)**：风吹向建筑[迎风](@entry_id:756372)面时产生正压，背风面产生负压，这种压力差驱动空气流动。由风产生的压力差 $\Delta P_w$ 可由 $\Delta P_w = \frac{1}{2} \rho_o C_p U^2$ 估算，其中 $\rho_o$ 是室外空气密度，$U$ 是风速，$C_p$ 是风压系数。

2.  **[热压](@entry_id:159509) (Stack Effect)**：由于室内外空气温差导致的密度差异，使得建筑内部形成一个压力梯度。在冬季，较热的室内空气密度小，倾向于上升，从建筑上部漏出，同时冷空气从下部渗入。这种由[浮力](@entry_id:154088)驱动的压力差 $\Delta P_s$ 可由 $\Delta P_s = (\rho_o - \rho_i) g H$ 计算，其中 $\rho_i$ 是室内空气密度，$g$ 是[重力加速度](@entry_id:173411)，$H$ 是上下泄漏口之间的有效高度。

建筑围护结构的“泄漏性”可以用一个称为**有效泄漏面积 (Effective Leakage Area, ELA)** 的参数来表征。总的渗透风量通常采用一个[幂律模型](@entry_id:272028)来计算，它将风压和[热压](@entry_id:159509)的效应结合起来，例如 $\dot{V} = C (\Delta P_w + \Delta P_s)^{n}$，其中 $C$ 是与EL[A相](@entry_id:195484)关的[流量系数](@entry_id:276642)，$n$ 是流动指数（通常在 $0.5$ 到 $1.0$ 之间） 。

### 太阳得热与内部得热

除了通过温差导致的传热，直接进入或在建筑内部产生的热源——即“得热”——是构成能量平衡的另一大组成部分，尤其是在制冷季节。

#### 通过窗户的太阳得热

窗户是建筑与外部进行视觉连接的纽带，但也是[太阳辐射](@entry_id:181918)进入室内的主要通道。描述玻璃太阳光学性能的基本参数包括 ：

-   **透射比 (Transmittance, $T$)**：直接穿过玻璃的[太阳辐射](@entry_id:181918)比例。
-   **[反射比](@entry_id:172768) (Reflectance, $R$)**：被玻璃反射回室外的太阳辐射比例。
-   **吸收比 (Absorptance, $A$)**：被玻璃材料自身吸收的太阳辐射比例。

根据能量守恒，对于任何给定的太阳光谱，$T + R + A = 1$。

然而，评价窗户太阳得热性能的最重要指标是**太阳得热系数 (Solar Heat Gain Coefficient, SHGC)**。一个常见的误解是认为SHGC就等于透射比 $T$。实际上，SHGC包含了两个部分 ：

1.  **直接透射部分**：即太阳辐射直接穿过玻璃进入室内的部分，其大小为 $T$。
2.  **吸收后向内传导部分**：被玻璃吸收的能量会提高玻璃自身的温度，这部分热量随后会通过对流和长波辐射的方式向室内和室外散发。其中向室内散发的部分也构成了室内的热负荷。

因此，SHGC的完整定义是：入射太阳辐射中最终成为室内热量的比例。其计算公式为：

$$\text{SHGC} = T + \sum_{i} A_i f_i$$

其中 $A_i$ 是玻璃系统第 $i$ 层的吸收比，$f_i$ 是该层吸收的能量中向室内传递的比例。这个公式清晰地表明，SHGC总是大于或等于透射比 $T$。SHGC不是一个纯粹的材料属性，它是一个系统性能指标，其值会受到室外风速、室内外温度以及太阳入射角等边界条件的影响。

#### 内部得热：显热与潜热负荷

建筑内部的人员、照明和各种用电设备都会散发热量，这些热量被称为**内部得热 (internal gains)**。在进行精细的能量建模时，必须对这些热源进行细致的区分 。

首先，内部得热需要区分为两种类型：

-   **显热 (Sensible Heat)**：直接增加空间干球温度的热量。例如，灯具和电脑散发的热量绝大部分是显热。
-   **潜热 (Latent Heat)**：以水蒸气形式释放到空气中的能量，它不直接改变干球温度，但会增加空气的湿度。例如，人员呼吸和排汗会释放大量潜热。

其次，对于显热部分，还需要进一步区分为：

-   **对流部分 (Convective Portion)**：直接加热室内空气的部分。
-   **辐射部分 (Radiant Portion)**：以电磁波（主要是长波红外辐射）形式散发，首先被周围的墙壁、地面、天花板和家具等表面吸收，然后再通过对流缓慢地将热量传递给空气。

这种区分至关重要，因为对流部分会立即影响空气温度和HVAC系统的瞬时负荷，而辐射部分的效应则会因为表面的蓄热作用而产生延迟和衰减。一个精确的建筑模型必须能够分别计算直接进入空气的净显热率 $Q_{\text{int,air}}(t)$ 和净水蒸气生成率 $\dot{m}_{\text{int,v}}(t)$ 。例如，一个完整的内部得热模型会将来自人员的显热乘以一个对流系数，加上来自照明的显热乘以其对流系数，再加上来自设备的显热乘以其对流系数，来得到总的对流显热得热。同时，它会将来自人员的潜热（水分[蒸发率](@entry_id:1121735)）和来自设备（如咖啡机）的潜热相加，得到总的水蒸气生成率。

### 水蒸气的作用：[湿空气学](@entry_id:155331)

空气中的水蒸气含量对人员的[热舒适](@entry_id:180381)感和建筑的能量消耗都有显著影响。处理潜热负荷（即除湿）是空调系统能耗的重要组成部分。因此，建筑能量模型必须能够准确描述湿空气的热力学性质，这门学科被称为**[湿空气学](@entry_id:155331) (psychrometrics)**。

在建筑能模中，通常以单位质量干空气为基准来分析湿空气的性质 。以下是三个核心的湿空气参数：

-   **含湿量 (Humidity Ratio, $W$)**：单位质量干空气中所含水蒸气的质量（单位：kg_vapor/kg_dry_air）。它直接衡量空气的绝对湿度。对于[理想气体混合物](@entry_id:149212)，$W = 0.622 \frac{p_v}{p - p_v}$，其中 $p_v$ 是水蒸气[分压](@entry_id:168927)力，$p$ 是总大气压。

-   **相对湿度 (Relative Humidity, $\phi$)**：空气中水蒸气的分压力 $p_v$ 与相同温度下饱和水[蒸气压](@entry_id:136384)力 $p_v^{sat}(T)$ 之比，即 $\phi = p_v / p_v^{sat}(T)$。它表示空气的潮湿程度相对于饱和状态的比例。

-   **湿空气焓 (Moist Air Specific Enthalpy, $h$)**：单位质量干空气的湿空气混合物所具有的总焓值（单位：J/kg_dry_air）。它由干空气的焓和水蒸气的焓两部分组成：$h = h_{da} + W h_v$。采用一个通用的[参考态](@entry_id:151465)（$0^\circ\mathrm{C}$ 时干空气和饱和液态水的焓为零），湿空气焓的表达式为：
    $$h = c_{p,da} T + W(h_g + c_{p,v} T)$$
    其中 $c_{p,da}$ 和 $c_{p,v}$ 分别是干空气和水蒸气的定[压比](@entry_id:137698)热容，$h_g$ 是参考温度下的饱和水蒸气焓（[汽化潜热](@entry_id:142174)）。

借助这些定义，我们可以清晰地区分HVAC系统中的两种基本[热处理](@entry_id:159161)过程 ：

-   **显热过程 (Sensible Process)**：只改变空气温度 $T$ 而不改变其含湿量 $W$ 的过程（例如，只加热或只冷却而不产生凝结水）。焓变约为 $\Delta h_{\text{sensible}} \approx (c_{p,da} + W c_{p,v}) \Delta T$。
-   **潜热过程 (Latent Process)**：只改变空气含湿量 $W$ 而不改变其温度 $T$ 的过程（例如，理想化的加湿或除湿）。[焓变](@entry_id:147639)约为 $\Delta h_{\text{latent}} \approx \Delta W \cdot h_v(T)$。

实际的空调盘管降温过程通常是显热和潜热过程的结合，即同时降低空气的温度和湿度。

### 建模范式与应用

将上述物理原理转化为可计算的预测工具，需要借助特定的建模范式和软件实现。在实践中，模型的选择、辨识和验证是确保其可靠性的关键步骤。

#### 模拟引擎：从第一性原理到代码

历史上和现代的建筑能耗模拟软件采用了不同的计算核心，即“模拟引擎”。其中最具代表性的是**权重系数法 (Weighting-Factor method)** 和 **[热平衡](@entry_id:157986)法 (Heat Balance method)** 。

-   **权重系数法**：以DOE-2等早期模拟软件为代表，该方法基于一个核心假设：建筑热响应是一个**[线性时不变](@entry_id:276287) (Linear Time-Invariant, LTI)** 系统。在此假设下，可以使用叠加原理。模型的输出（如逐时冷负荷）可以表示为过去所有热扰动（如[太阳辐射](@entry_id:181918)、室内得热）与一组预先计算好的**权重系数 (weighting factors)**（或称响应系数）进行卷积的结果。这种方法计算速度快，但在处理强[非线性](@entry_id:637147)效应（如辐射换热、自然对流）或需要亚小时级精度的[瞬态分析](@entry_id:262795)时，其准确性会受到限制。

-   **[热平衡](@entry_id:157986)法**：以EnergyPlus等现代主流模拟软件为代表，该方法致力于更忠实地求解物理方程。在每一个时间步长（通常是亚小时级），它会联立求解室内所有表面的[能量平衡方程](@entry_id:191484)和室内空气的能量平衡方程。它通过辐射网络显式处理表面间的[非线性](@entry_id:637147)长波[辐射交换](@entry_id:150522)，并允许使用随温度变化的[对流换热系数](@entry_id:151029)。对于墙体等蓄热构件的瞬态导热，它采用传导[热函数](@entry_id:637410)（CTF）或[有限差分法](@entry_id:1124968)等高保真模型来捕捉其“热记忆”效应。这种方法物理基础更扎实，能够更准确地模拟[瞬态响应](@entry_id:165150)、辐射系统和复杂的HVAC行为 。

#### [模型辨识](@entry_id:139651)与保真度：灰箱与黑箱方法

根据模型对物理原理的依赖程度，建筑能量模型可以大致分为**白箱 (white-box)**、**黑箱 (black-box)** 和 **灰箱 (grey-box)** 模型 。

-   **白箱模型**：完全基于物理第一性原理构建，如前述的[热平衡](@entry_id:157986)法。其参数（如导热系数、[U值](@entry_id:151629)）均为可测量的物理量。
-   **[黑箱模型](@entry_id:1121697)**：完全由数据驱动，不依赖于明确的物理结构。例如，使用神经网络或[支持向量机](@entry_id:172128)，从历史输入（如室外温度、太阳辐射）和输出（如能耗）数据中学习一个输入-输出映射关系。这类模型可能在插值预测方面表现出色，但其内部参数（如神经网络的权重和偏置）通常缺乏物理可解释性，且在外推到未见过的工况时可能非常脆弱。
-   **[灰箱模型](@entry_id:1125766)**：结合了物理结构和数据辨识。它首先根据物理定律建立一个简化的模型结构（如一个RC热网络），然后利用实测数据来辨识模型中的集总参数（如等效热阻 $R$ 和等效热容 $C$）。例如，对于一个简单的单区RC模型 $C \frac{dT_i}{dt} = \frac{T_o - T_i}{R} + q_h$，物理结构规定了状态变量 $T_i$ 的系数必须与输入变量 $T_o$ 的系数大小相等、符号相反。这种由物理定律施加的约束，减少了需要从数据中估计的自由参数数量，从而改善了**[参数可辨识性](@entry_id:197485) (parameter identifiability)**，使得辨识出的 $R$ 和 $C$ 值更稳定、更具物理意义 。为了成功辨识参数，输入数据必须具有**[持续激励](@entry_id:263834) (persistent excitation)**，即输入信号需要有足够丰富的变化，以激发系统的动态特性。

#### 模型校准与验证：确保可靠性

无论是哪种模型，要使其预测结果可信，都必须经过严格的**校准 (calibration)** 和 **验证 (validation)** 过程 。

-   **校准**：是指使用一组实测数据（称为“训练集”），通过调整模型中的未知参数（如围护结构的[U值](@entry_id:151629)、渗透率、设备能耗等），使得模型的预测输出与实测数据之间的[误差最小化](@entry_id:163081)。

-   **验证**：是指在模型参数校准并固定之后，使用另一组**独立的**实测数据（称为“测试集”或“[验证集](@entry_id:636445)”），评估模型在未见过的数据上的预测性能。将校准和验证分开是至关重要的统计学实践，它可以帮助评估模型的泛化能力，避免**[过拟合](@entry_id:139093) (overfitting)**——即模型仅仅是“记住”了训练数据，而失去了对普遍规律的预测能力。

评估模型准确性通常采用标准化的统计指标。根据ASHRAE导则14等行业标准，两个最常用的指标是 ：

-   **均方根误差的变化系数 (CV(RMSE))**：它量化了模型预测值与实测值之间的随机离散程度，相对于实测值的平均水平。其定义为：
    $$CV(RMSE) = \frac{\sqrt{\frac{\sum_{i=1}^{n} (y_i - \hat{y}_i)^2}{n-p}}}{\bar{y}}$$
    其中 $y_i$ 是实测值，$\hat{y}_i$ 是模型预测值，$\bar{y}$ 是实测值的平均值，$n$ 是数据点数量。分母中的 $n-p$ 是自由度，其中 $p$ 是在校准过程中被估计的参数数量。使用 $n-p$ 而不是 $n$ 是为了对因拟合参数而损失的自由度进行修正，从而得到一个对[误差方差](@entry_id:636041)的无偏估计。

-   **归一化平均偏差 (NMBE)**：它量化了模型的系统性偏差，即模型是倾向于高估还是低估。其定义为：
    $$NMBE = \frac{\sum_{i=1}^{n} (y_i - \hat{y}_i)}{n \bar{y}}$$
    NMBE的符号非常重要：正值表示[模型平均](@entry_id:635177)而言低估了能耗，负值则表示[模型平均](@entry_id:635177)而言高估了能耗。

通过这些原理、机制和评估方法，建筑能量建模从一个抽象的物理问题，转变为一套强大而严谨的工程分析工具，为实现可持续建筑环境提供了科学基础。
{
    "hands_on_practices": [
        {
            "introduction": "Accurate emissions modeling begins at the source: the individual power plant. Before constructing complex system-wide models, it is essential to master the fundamental relationship connecting a fuel's intrinsic carbon content, a plant's thermal efficiency (measured by its heat rate), and the resulting emissions intensity of the electricity it produces. This foundational exercise  challenges you to derive this relationship from first principles, reinforcing the core physics and unit conversions that underpin all emissions calculations.",
            "id": "4088143",
            "problem": "A jurisdiction evaluates compliance with an emissions intensity standard for electricity by comparing direct stack emissions per unit of net electricity generated against a limit stated in $\\mathrm{kgCO_2e/MWh}$, where Carbon Dioxide Equivalent (CO2e) aggregates all greenhouse gases using their equivalence to carbon dioxide. Consider a steady-state thermal power plant that uses a single homogeneous fuel. Let $CC$ denote the fuel carbon content on a direct stack basis in $\\mathrm{kgCO_2e/MMBtu}$, where Million British thermal units (MMBtu) is the thermal energy unit, and let $HR$ denote the plant’s net heat rate in $\\mathrm{MMBtu/MWh}$, where Megawatt-hour (MWh) is the net electricity sent out. Assume complete oxidation of carbon in the fuel to carbon dioxide at the stack, no on-site carbon capture, and consistent higher or lower heating value bases between $CC$ and $HR$.\n\nStarting only from the fundamental definitions of heat rate as thermal input per unit electric output and of carbon content as direct stack emissions per unit thermal input, and using conservation of mass and energy, derive a symbolic expression for the plant’s direct stack emissions intensity of electricity, $EI$, in $\\mathrm{kgCO_2e/MWh}$, as a function of $CC$ and $HR$.\n\nExpress your final result as a single closed-form analytic expression for $EI$ in terms of $CC$ and $HR$, with the understanding that the numerical value would be reported in $\\mathrm{kgCO_2e/MWh}$. Do not perform any numerical substitution and do not include units in the final boxed expression.",
            "solution": "The problem statement is subjected to validation.\n\n### Step 1: Extract Givens\n- **System:** A steady-state thermal power plant using a single homogeneous fuel.\n- **Variable $EI$:** The plant's direct stack emissions intensity of electricity, with units of $\\mathrm{kgCO_2e/MWh}$.\n- **Variable $CC$:** The fuel carbon content on a direct stack basis, with units of $\\mathrm{kgCO_2e/MMBtu}$. `MMBtu` represents Million British thermal units.\n- **Variable $HR$:** The plant’s net heat rate, with units of $\\mathrm{MMBtu/MWh}$. `MWh` represents Megawatt-hour of net electricity sent out.\n- **Fundamental Definition 1:** Heat rate ($HR$) is defined as thermal input per unit electric output.\n- **Fundamental Definition 2:** Carbon content ($CC$) is defined as direct stack emissions per unit thermal input.\n- **Assumption 1:** Complete oxidation of carbon in the fuel to carbon dioxide at the stack.\n- **Assumption 2:** No on-site carbon capture.\n- **Assumption 3:** Consistent higher or lower heating value bases are used for both $CC$ and $HR$.\n- **Objective:** Derive a symbolic expression for $EI$ as a function of $CC$ and $HR$, starting from fundamental definitions and using principles of mass and energy conservation.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is evaluated against the validation criteria.\n- **Scientifically Grounded:** The problem is firmly rooted in the fundamental principles of thermodynamics and energy systems engineering. The variables $EI$, $CC$, and $HR$ are standard, well-defined metrics in power plant analysis. The principles of conservation of mass and energy are correctly invoked.\n- **Well-Posed:** The problem is well-posed. It provides sufficient information and clear definitions to establish a unique mathematical relationship between the specified variables. The objective is to derive one quantity from two others, which is a standard formulation.\n- **Objective:** The language is technical, precise, and free of any subjective or ambiguous terms.\n\nThe problem does not exhibit any of the flaws listed:\n1.  **Scientific or Factual Unsoundness:** The physical and chemical premises are sound for a standard thermodynamic model.\n2.  **Non-Formalizable or Irrelevant:** The problem is directly formalizable into a mathematical derivation and is central to the topic of emissions accounting in energy systems.\n3.  **Incomplete or Contradictory Setup:** The problem is self-contained. The assumptions (e.g., no carbon capture) are explicit and serve to create a solvable system with the given information.\n4.  **Unrealistic or Infeasible:** While simplified, the assumptions (e.g., complete oxidation) are standard for first-order engineering models and do not represent physical impossibilities. The units are consistent.\n5.  **Ill-Posed or Poorly Structured:** The problem is clearly structured and leads to a unique, meaningful solution.\n6.  **Pseudo-Profound, Trivial, or Tautological:** The derivation, while straightforward for a professional in the field, requires a correct application of definitions and dimensional reasoning, representing a valid test of fundamental understanding.\n7.  **Outside Scientific Verifiability:** The resulting expression is verifiable through dimensional analysis and application to empirical data.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. A solution will be derived.\n\nThe derivation proceeds from the fundamental definitions provided. Let $M_{emissions}$ represent the mass of direct stack emissions (in $\\mathrm{kgCO_2e}$), $E_{thermal}$ represent the thermal energy input from the fuel (in $\\mathrm{MMBtu}$), and $E_{elec}$ represent the net electrical energy output (in $\\mathrm{MWh}$).\n\nAccording to the problem statement, the emissions intensity, $EI$, is defined as the direct stack emissions per unit of net electricity generated.\n$$\nEI = \\frac{M_{emissions}}{E_{elec}}\n$$\nThe units for $EI$ are $\\mathrm{kgCO_2e/MWh}$.\n\nThe fuel carbon content, $CC$, is defined as the direct stack emissions per unit of thermal energy input.\n$$\nCC = \\frac{M_{emissions}}{E_{thermal}}\n$$\nThe units for $CC$ are $\\mathrm{kgCO_2e/MMBtu}$.\n\nThe plant's net heat rate, $HR$, is defined as the thermal energy input required per unit of net electrical energy output.\n$$\nHR = \\frac{E_{thermal}}{E_{elec}}\n$$\nThe units for $HR$ are $\\mathrm{MMBtu/MWh}$.\n\nThe problem requires an expression for $EI$ as a function of $CC$ and $HR$. We can achieve this through algebraic substitution based on the provided definitions. The conservation of mass (for carbon) is implicit in the definition of $CC$, as it links the mass of emissions to the fuel consumed (via its energy content). The conservation of energy is encapsulated in the definition of $HR$, which represents the efficiency of converting thermal energy to electrical energy.\n\nWe start with the definition of $EI$.\n$$\nEI = \\frac{M_{emissions}}{E_{elec}}\n$$\nFrom the definition of $CC$, we can express the emissions mass, $M_{emissions}$, as:\n$$\nM_{emissions} = CC \\cdot E_{thermal}\n$$\nSubstituting this expression for $M_{emissions}$ into the equation for $EI$ gives:\n$$\nEI = \\frac{CC \\cdot E_{thermal}}{E_{elec}}\n$$\nThis can be rewritten as:\n$$\nEI = CC \\cdot \\left( \\frac{E_{thermal}}{E_{elec}} \\right)\n$$\nWe recognize the term in the parentheses, $\\frac{E_{thermal}}{E_{elec}}$, as the definition of the net heat rate, $HR$.\n$$\n\\frac{E_{thermal}}{E_{elec}} = HR\n$$\nSubstituting $HR$ into the expression for $EI$ yields the final relationship:\n$$\nEI = CC \\cdot HR\n$$\nTo confirm the validity of this derivation, a dimensional analysis is performed.\n$$\n\\text{units of } EI = (\\text{units of } CC) \\times (\\text{units of } HR)\n$$\n$$\n\\frac{\\mathrm{kgCO_2e}}{\\mathrm{MWh}} = \\left( \\frac{\\mathrm{kgCO_2e}}{\\mathrm{MMBtu}} \\right) \\cdot \\left( \\frac{\\mathrm{MMBtu}}{\\mathrm{MWh}} \\right)\n$$\nThe MMBtu units cancel, leaving:\n$$\n\\frac{\\mathrm{kgCO_2e}}{\\mathrm{MWh}} = \\frac{\\mathrm{kgCO_2e}}{\\mathrm{MWh}}\n$$\nThe dimensional consistency confirms that the derived expression $EI = CC \\cdot HR$ is correct.",
            "answer": "$$\n\\boxed{CC \\cdot HR}\n$$"
        },
        {
            "introduction": "Simple models often assume that a power plant's emissions are solely a linear function of its electricity output. However, real-world operations include significant emissions from start-up events and from running at no-load (spinning reserve). This practice  moves beyond simplified assumptions to a more realistic accounting framework, tasking you to quantify the bias introduced by ignoring these operational factors and assess its impact on compliance with emissions regulations.",
            "id": "4088133",
            "problem": "Consider an electricity generation system composed of a finite set of generators indexed by $g \\in \\{1,\\dots,G\\}$ and a discrete time horizon indexed by $t \\in \\{1,\\dots,T\\}$, with uniform period duration $\\Delta t$ measured in hours. For each generator $g$ and period $t$, let $p_{g,t}$ denote the electrical power output in megawatt (MW), and let $u_{g,t} \\in \\{0,1\\}$ denote the on/off status indicator, where $u_{g,t} = 1$ indicates the generator is on and $u_{g,t} = 0$ indicates it is off. The start-up indicator $v_{g,t}$ is defined as $v_{g,t} = \\max\\{0, u_{g,t} - u_{g,t-1}\\}$ with the convention $u_{g,0} = 0$. For each generator $g$, the load-dependent emissions rate $r_g$ is specified in kilograms per megawatt-hour (kg/MWh), the no-load emissions rate $n_g$ is specified in kilograms per hour (kg/h) when the generator is on, and the start-up emissions $s_g$ is specified in kilograms (kg) per start event.\n\nThe total electrical energy generated by generator $g$ in period $t$ is $e_{g,t} = p_{g,t} \\Delta t$ measured in megawatt-hour (MWh). The load-dependent emissions contributed by generator $g$ in period $t$ are proportional to $e_{g,t}$ with proportionality constant $r_g$. The no-load emissions contributed by generator $g$ in period $t$ equal $n_g u_{g,t} \\Delta t$. The start-up emissions contributed by generator $g$ in period $t$ equal $s_g v_{g,t}$. Let $E^{\\text{gen}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} e_{g,t}$ denote the total electrical energy generated (in MWh) over the horizon. Define the full-accounting total emissions\n$$\nE^{\\text{full}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} \\left( r_g e_{g,t} + n_g u_{g,t} \\Delta t + s_g v_{g,t} \\right)\n$$\nand the partial-accounting total emissions (omitting start-up and no-load contributions)\n$$\nE^{\\text{partial}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} r_g e_{g,t}.\n$$\nDefine the average emissions intensity under full accounting as $I^{\\text{full}} = E^{\\text{full}} / E^{\\text{gen}}$ and under partial accounting as $I^{\\text{partial}} = E^{\\text{partial}} / E^{\\text{gen}}$, both expressed in kilograms per megawatt-hour (kg/MWh). If $E^{\\text{gen}} = 0$, treat $I^{\\text{full}} = +\\infty$ and $I^{\\text{partial}} = +\\infty$ for compliance evaluation.\n\nGiven an absolute emissions cap $C$ measured in kilograms (kg) and an intensity limit $L$ measured in kilograms per megawatt-hour (kg/MWh), the compliance conditions are as follows: full-accounting cap compliance requires $E^{\\text{full}} \\le C$, partial-accounting cap compliance requires $E^{\\text{partial}} \\le C$, full-accounting intensity compliance requires $I^{\\text{full}} \\le L$, and partial-accounting intensity compliance requires $I^{\\text{partial}} \\le L$. Let the bias in total emissions when omitting start-up and no-load components be $B_E = E^{\\text{partial}} - E^{\\text{full}}$ expressed in kilograms (kg), and the bias in intensity be $B_I = I^{\\text{partial}} - I^{\\text{full}}$ expressed in kilograms per megawatt-hour (kg/MWh).\n\nYour task is to implement a program that, for each given test case, computes:\n- $B_E$ in kilograms (kg),\n- $B_I$ in kilograms per megawatt-hour (kg/MWh),\n- the full-accounting cap compliance boolean (true if $E^{\\text{full}} \\le C$, false otherwise),\n- the partial-accounting cap compliance boolean (true if $E^{\\text{partial}} \\le C$, false otherwise),\n- the full-accounting intensity compliance boolean (true if $I^{\\text{full}} \\le L$, false otherwise),\n- the partial-accounting intensity compliance boolean (true if $I^{\\text{partial}} \\le L$, false otherwise).\n\nExpress all intensities in kilograms per megawatt-hour (kg/MWh). There are no angles involved. No percentage signs are permitted anywhere in the output; use decimal numbers.\n\nUse the following test suite of parameter values. In all cases, the period duration is $\\Delta t = 1$ hour.\n\nTest Case $1$ (happy path with differing compliance under full versus partial accounting):\n- Number of generators $G = 2$, number of periods $T = 4$.\n- Generator $1$: $r_1 = 800$ kg/MWh, $n_1 = 60$ kg/h, $s_1 = 500$ kg.\n- Generator $2$: $r_2 = 400$ kg/MWh, $n_2 = 30$ kg/h, $s_2 = 300$ kg.\n- Status arrays $u_{1,t}$ over $t = 1 \\dots 4$: $\\{1, 1, 0, 1\\}$; $u_{2,t}$: $\\{0, 1, 1, 1\\}$.\n- Output arrays $p_{1,t}$ in MW over $t = 1 \\dots 4$: $\\{50, 60, 0, 30\\}$; $p_{2,t}$: $\\{0, 40, 70, 50\\}$.\n- Emissions cap $C = 176500$ kg.\n- Intensity limit $L = 590$ kg/MWh.\n\nTest Case $2$ (boundary conditions where full-accounting values equal the limits):\n- Number of generators $G = 1$, number of periods $T = 3$.\n- Generator $1$: $r_1 = 500$ kg/MWh, $n_1 = 50$ kg/h, $s_1 = 200$ kg.\n- Status array $u_{1,t}$ over $t = 1 \\dots 3$: $\\{1, 1, 0\\}$.\n- Output array $p_{1,t}$ in MW over $t = 1 \\dots 3$: $\\{20, 20, 0\\}$.\n- Emissions cap $C = 20300$ kg.\n- Intensity limit $L = 507.5$ kg/MWh.\n\nTest Case $3$ (edge case with frequent cycling and substantial start-up emissions):\n- Number of generators $G = 1$, number of periods $T = 6$.\n- Generator $1$: $r_1 = 300$ kg/MWh, $n_1 = 100$ kg/h, $s_1 = 1000$ kg.\n- Status array $u_{1,t}$ over $t = 1 \\dots 6$: $\\{1, 0, 1, 0, 1, 0\\}$.\n- Output array $p_{1,t}$ in MW over $t = 1 \\dots 6$: $\\{30, 0, 35, 0, 40, 0\\}$.\n- Emissions cap $C = 33000$ kg.\n- Intensity limit $L = 320$ kg/MWh.\n\nTest Case $4$ (always-on operation with low load; both full and partial comply to demonstrate no change in compliance):\n- Number of generators $G = 1$, number of periods $T = 5$.\n- Generator $1$: $r_1 = 100$ kg/MWh, $n_1 = 80$ kg/h, $s_1 = 50$ kg.\n- Status array $u_{1,t}$ over $t = 1 \\dots 5$: $\\{1, 1, 1, 1, 1\\}$.\n- Output array $p_{1,t}$ in MW over $t = 1 \\dots 5$: $\\{10, 10, 10, 10, 10\\}$.\n- Emissions cap $C = 6000$ kg.\n- Intensity limit $L = 120$ kg/MWh.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each test case’s result is a list ordered as $[B_E, B_I, \\text{cap\\_compliance\\_full}, \\text{cap\\_compliance\\_partial}, \\text{intensity\\_compliance\\_full}, \\text{intensity\\_compliance\\_partial}]$. For example, the overall output format must be $[[\\dots],[\\dots],[\\dots],[\\dots]]$ with four inner lists corresponding to the four test cases, and with all intensities expressed in kilograms per megawatt-hour (kg/MWh) and all emissions expressed in kilograms (kg).",
            "solution": "The problem requires the calculation of emissions-related metrics for an electricity generation system under two different accounting schemes: full and partial. The system consists of a set of $G$ generators operating over $T$ discrete time periods. The solution necessitates a methodical application of the provided mathematical definitions for emissions, energy, and compliance.\n\nFirst, we restate the fundamental quantities and definitions provided in the problem statement. The period duration is $\\Delta t$. For each generator $g \\in \\{1, \\dots, G\\}$ and time period $t \\in \\{1, \\dots, T\\}$:\n- $p_{g,t}$ is the power output in megawatts (MW).\n- $u_{g,t} \\in \\{0, 1\\}$ is the binary on/off status.\n- $v_{g,t} = \\max\\{0, u_{g,t} - u_{g,t-1}\\}$ is the start-up event indicator, with the initial condition $u_{g,0} = 0$.\n\nThe parameters for each generator $g$ are:\n- $r_g$: load-dependent emissions rate (kg/MWh).\n- $n_g$: no-load emissions rate (kg/h).\n- $s_g$: start-up emissions (kg/start).\n\nFrom these, we derive the following quantities. The electrical energy generated by generator $g$ in period $t$ is:\n$$e_{g,t} = p_{g,t} \\Delta t$$\nThe total electrical energy generated over the entire time horizon is the sum over all generators and time periods:\n$$E^{\\text{gen}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} e_{g,t}$$\n\nThe problem defines two methods for calculating total emissions. The partial-accounting method only considers load-dependent emissions:\n$$E^{\\text{partial}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} r_g e_{g,t}$$\nThe full-accounting method includes load-dependent, no-load, and start-up emissions:\n$$E^{\\text{full}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} \\left( r_g e_{g,t} + n_g u_{g,t} \\Delta t + s_g v_{g,t} \\right)$$\nThis can be decomposed as $E^{\\text{full}} = E^{\\text{partial}} + E^{\\text{no-load}} + E^{\\text{start-up}}$, where:\n$$E^{\\text{no-load}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} n_g u_{g,t} \\Delta t$$\n$$E^{\\text{start-up}} = \\sum_{g=1}^{G} \\sum_{t=1}^{T} s_g v_{g,t}$$\nThe corresponding average emissions intensities are defined as:\n$$I^{\\text{partial}} = \\frac{E^{\\text{partial}}}{E^{\\text{gen}}}$$\n$$I^{\\text{full}} = \\frac{E^{\\text{full}}}{E^{\\text{gen}}}$$\nIf $E^{\\text{gen}} = 0$, the intensities are considered to be infinite.\n\nThe required outputs are the biases in emissions and intensity, and four compliance booleans.\nThe bias in total emissions is:\n$$B_E = E^{\\text{partial}} - E^{\\text{full}} = - (E^{\\text{no-load}} + E^{\\text{start-up}})$$\nThe bias in intensity is:\n$$B_I = I^{\\text{partial}} - I^{\\text{full}} = \\frac{E^{\\text{partial}}}{E^{\\text{gen}}} - \\frac{E^{\\text{full}}}{E^{\\text{gen}}} = \\frac{B_E}{E^{\\text{gen}}}$$\nThe compliance conditions are checked against an emissions cap $C$ and an intensity limit $L$:\n1.  Full-accounting cap compliance: $E^{\\text{full}} \\le C$\n2.  Partial-accounting cap compliance: $E^{\\text{partial}} \\le C$\n3.  Full-accounting intensity compliance: $I^{\\text{full}} \\le L$\n4.  Partial-accounting intensity compliance: $I^{\\text{partial}} \\le L$\n\nThe algorithmic procedure for each test case is as follows:\n1.  Given the input arrays for $u_{g,t}$ and $p_{g,t}$, and parameters $r_g, n_g, s_g$ for each generator $g$, and the global parameters $\\Delta t, C, L$.\n2.  For each generator $g$, calculate the start-up indicator vector $v_{g,t}$ for $t=1,\\dots,T$ using the definition $v_{g,t} = \\max\\{0, u_{g,t} - u_{g,t-1}\\}$ and $u_{g,0}=0$.\n3.  Calculate the energy matrix $e_{g,t} = p_{g,t} \\Delta t$.\n4.  Compute the total generated energy $E^{\\text{gen}}$ by summing all elements of the $e_{g,t}$ matrix.\n5.  If $E^{\\text{gen}} = 0$, handle the infinite intensity case. Otherwise, proceed.\n6.  Compute the total partial emissions $E^{\\text{partial}}$ by performing a weighted sum of the energy matrix $e_{g,t}$ with weights $r_g$.\n7.  Compute the total no-load emissions $E^{\\text{no-load}}$ by performing a weighted sum of the status matrix $u_{g,t}$ with weights $n_g$ and multiplying by $\\Delta t$.\n8.  Compute the total start-up emissions $E^{\\text{start-up}}$ by performing a weighted sum of the start-up matrix $v_{g,t}$ with weights $s_g$.\n9.  Calculate the total full emissions $E^{\\text{full}} = E^{\\text{partial}} + E^{\\text{no-load}} + E^{\\text{start-up}}$.\n10. Calculate the emissions bias $B_E = E^{\\text{partial}} - E^{\\text{full}}$.\n11. Calculate the partial intensity $I^{\\text{partial}} = E^{\\text{partial}} / E^{\\text{gen}}$ and full intensity $I^{\\text{full}} = E^{\\text{full}} / E^{\\text{gen}}$.\n12. Calculate the intensity bias $B_I = I^{\\text{partial}} - I^{\\text{full}}$.\n13. Evaluate the four boolean compliance conditions by comparing the calculated emissions and intensities with the provided cap $C$ and limit $L$.\n14. Assemble the six results ($B_E$, $B_I$, and the four booleans) into a list for the current test case.\n\nThis procedure is implemented for each test case provided, utilizing numerical libraries for efficient array operations. The final output is a list containing the result lists for each test case.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the emissions calculation and compliance checking problem for a given set of test cases.\n    \"\"\"\n\n    test_cases = [\n        {\n            # Test Case 1\n            \"G\": 2, \"T\": 4, \"delta_t\": 1.0,\n            \"r\": np.array([800.0, 400.0]),\n            \"n\": np.array([60.0, 30.0]),\n            \"s\": np.array([500.0, 300.0]),\n            \"u\": np.array([[1, 1, 0, 1],\n                           [0, 1, 1, 1]]),\n            \"p\": np.array([[50.0, 60.0, 0.0, 30.0],\n                           [0.0, 40.0, 70.0, 50.0]]),\n            \"C\": 176500.0, \"L\": 590.0\n        },\n        {\n            # Test Case 2\n            \"G\": 1, \"T\": 3, \"delta_t\": 1.0,\n            \"r\": np.array([500.0]),\n            \"n\": np.array([50.0]),\n            \"s\": np.array([200.0]),\n            \"u\": np.array([[1, 1, 0]]),\n            \"p\": np.array([[20.0, 20.0, 0.0]]),\n            \"C\": 20300.0, \"L\": 507.5\n        },\n        {\n            # Test Case 3\n            \"G\": 1, \"T\": 6, \"delta_t\": 1.0,\n            \"r\": np.array([300.0]),\n            \"n\": np.array([100.0]),\n            \"s\": np.array([1000.0]),\n            \"u\": np.array([[1, 0, 1, 0, 1, 0]]),\n            \"p\": np.array([[30.0, 0.0, 35.0, 0.0, 40.0, 0.0]]),\n            \"C\": 33000.0, \"L\": 320.0\n        },\n        {\n            # Test Case 4\n            \"G\": 1, \"T\": 5, \"delta_t\": 1.0,\n            \"r\": np.array([100.0]),\n            \"n\": np.array([80.0]),\n            \"s\": np.array([50.0]),\n            \"u\": np.array([[1, 1, 1, 1, 1]]),\n            \"p\": np.array([[10.0, 10.0, 10.0, 10.0, 10.0]]),\n            \"C\": 6000.0, \"L\": 120.0\n        }\n    ]\n\n    all_results = []\n    \n    for case in test_cases:\n        # Extract data from the case dictionary\n        G, T, delta_t = case[\"G\"], case[\"T\"], case[\"delta_t\"]\n        r, n, s = case[\"r\"], case[\"n\"], case[\"s\"]\n        u, p = case[\"u\"], case[\"p\"]\n        C, L = case[\"C\"], case[\"L\"]\n\n        # Ensure parameters are column vectors for broadcasting\n        r_col = r.reshape(-1, 1)\n        n_col = n.reshape(-1, 1)\n        s_col = s.reshape(-1, 1)\n\n        # 1. Calculate startup indicator v\n        # Prepend a column of zeros for u_g,0\n        u_padded = np.hstack((np.zeros((G, 1)), u))\n        v = np.maximum(0, np.diff(u_padded, axis=1))\n\n        # 2. Calculate energy e_g,t\n        e = p * delta_t\n\n        # 3. Calculate total generated energy E_gen\n        E_gen = np.sum(e)\n\n        # 4. Calculate partial emissions E_partial\n        E_partial = np.sum(r_col * e)\n\n        # 5. Calculate full emissions E_full\n        E_no_load = np.sum(n_col * u * delta_t)\n        E_startup = np.sum(s_col * v)\n        E_full = E_partial + E_no_load + E_startup\n\n        # 6. Calculate biases\n        B_E = E_partial - E_full\n        \n        # 7. Calculate intensities and intensity bias\n        if E_gen == 0:\n            I_full = float('inf')\n            I_partial = float('inf')\n            B_I = float('nan') # Or handle as per specific rules, here B_I would be `inf - inf`\n        else:\n            I_full = E_full / E_gen\n            I_partial = E_partial / E_gen\n            B_I = I_partial - I_full\n\n        # 8. Perform compliance checks\n        cap_compliance_full = E_full = C\n        cap_compliance_partial = E_partial = C\n        intensity_compliance_full = I_full = L\n        intensity_compliance_partial = I_partial = L\n\n        # 9. Store results for this case\n        case_results = [\n            B_E,\n            B_I,\n            cap_compliance_full,\n            cap_compliance_partial,\n            intensity_compliance_full,\n            intensity_compliance_partial\n        ]\n        all_results.append(case_results)\n\n    # Format the final output string to match the required format without spaces\n    def format_inner_list(lst):\n        # Converts a list like [-1570.0, -5.23, False] to \"[-1570.0,-5.23,False]\"\n        return \"[\" + \",\".join(map(str, lst)) + \"]\"\n\n    output_str = \"[\" + \",\".join([format_inner_list(res) for res in all_results]) + \"]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "The ultimate goal of energy systems modeling is often to inform long-term policy and investment strategy. This final practice  scales up to a multi-period capacity expansion problem, where you must determine the optimal mix of generation technologies to build and operate under a cumulative carbon budget. By formulating and solving this linear program, you will not only find the least-cost investment path but also uncover the implicit economic value of carbon—the shadow price—that the budget imposes on the system over time.",
            "id": "4088134",
            "problem": "Consider a planning horizon of $T$ discrete periods indexed by $t \\in \\{1, \\dots, T\\}$, with two electricity generation technologies: coal and gas. The planner chooses capacity additions and period-by-period generation to minimize Net Present Cost (NPC), subject to energy balance, capacity availability, and a cumulative carbon budget constraint. All periods are annual, with $H$ hours per period. The objective is to compute, for each parameter set in a test suite, the optimal installed capacity mix (coal and gas) and the implied carbon price trajectory under the cumulative budget.\n\nFundamental base and definitions:\n- Net Present Cost (NPC): $\\text{NPC} = \\sum_{t=1}^{T} d_t \\left( \\sum_{i \\in \\{\\text{coal}, \\text{gas}\\}} \\left( f_i K_i + v_i G_{i,t} \\right) \\right) + \\sum_{i \\in \\{\\text{coal}, \\text{gas}\\}} I_i \\Delta K_i$, where $d_t$ is the discount factor in period $t$, $f_i$ is fixed operation and maintenance cost per megawatt-year ($\\$/\\text{MW}\\cdot\\text{yr}$), $K_i$ is total installed capacity in megawatts, $v_i$ is variable cost ($\\$/\\text{MWh}$), $G_{i,t}$ is generation in megawatt-hour, $I_i$ is one-time investment cost per megawatt ($\\$/\\text{MW}$), and $\\Delta K_i$ is the capacity addition decision in megawatts.\n- Discount factor: $d_t = (1+r)^{-(t-1)}$ for discount rate $r$.\n- Energy balance: For each period $t$, $\\sum_{i} G_{i,t} = D_t$, where $D_t$ is the demand in megawatt-hour.\n- Capacity availability: For each technology $i$ and period $t$, $G_{i,t} \\leq \\alpha_{i,t} H K_i$, where $\\alpha_{i,t}$ is the availability factor (dimensionless), $H$ is hours per period (hours per year), and $K_i$ is total capacity $K_i = K_{i,0} + \\Delta K_i$, where $K_{i,0}$ is existing capacity and $\\Delta K_i \\geq 0$.\n- Emissions: For each technology $i$, emissions factor $e_i$ in metric tons of carbon dioxide per megawatt-hour ($\\text{tCO}_2/\\text{MWh}$). Cumulative carbon budget constraint: $\\sum_{t=1}^{T} \\sum_{i} e_i G_{i,t} \\leq B$, where $B$ is the total budget in metric tons of carbon dioxide.\n\nThe optimization problem is linear in the decision variables $\\Delta K_{\\text{coal}}$, $\\Delta K_{\\text{gas}}$, $G_{\\text{coal},t}$, and $G_{\\text{gas},t}$. Let the Lagrange multiplier associated with the cumulative carbon budget be $\\lambda_B$ (units of dollars per metric ton of carbon dioxide in present value). Under standard linear programming duality, the implied contemporaneous carbon price in period $t$, denoted $p_t$, is related to the cumulative budget multiplier by $p_t = \\lambda_B / d_t$ (units of dollars per metric ton of carbon dioxide), provided that the budget constraint is binding. If the budget constraint is non-binding, then $\\lambda_B = 0$ and hence $p_t = 0$ for all $t$.\n\nYour task is to:\n1. Formulate the linear program described above.\n2. Solve it to obtain the optimal capacity additions $\\Delta K_{\\text{coal}}$ and $\\Delta K_{\\text{gas}}$, the total installed capacities $K_{\\text{coal}}$ and $K_{\\text{gas}}$, and the implied carbon price trajectory $p_t$ for all periods based on the shadow price $\\lambda_B$ of the budget constraint.\n3. Produce the final outputs for the provided test suite.\n\nUnits and output specification:\n- Installed capacities $K_{\\text{coal}}$ and $K_{\\text{gas}}$ must be expressed in megawatts ($\\text{MW}$) and rounded to two decimal places.\n- Implied carbon prices $p_t$ must be expressed in dollars per metric ton of carbon dioxide ($\\$/\\text{tCO}_2$) and rounded to two decimal places.\n- Angles are not used in this problem.\n- Percentages: If any percentage is presented, it must be converted to a decimal form.\n\nTest suite:\nUse $T=3$ periods with $H=8760$ hours per period and discount rate $r=0.05$ for all cases. Technology parameters are fixed across cases:\n- Investment costs: $I_{\\text{coal}} = 2{,}000{,}000$ $\\$/\\text{MW}$, $I_{\\text{gas}} = 1{,}000{,}000$ $\\$/\\text{MW}$.\n- Fixed operation and maintenance costs: $f_{\\text{coal}} = 40{,}000$ $\\$/\\text{MW}\\cdot\\text{yr}$, $f_{\\text{gas}} = 20{,}000$ $\\$/\\text{MW}\\cdot\\text{yr}$.\n- Variable costs: $v_{\\text{coal}} = 20$ $\\$/\\text{MWh}$, $v_{\\text{gas}} = 35$ $\\$/\\text{MWh}$.\n- Emission factors: $e_{\\text{coal}} = 0.90$ $\\text{tCO}_2/\\text{MWh}$, $e_{\\text{gas}} = 0.35$ $\\text{tCO}_2/\\text{MWh}$.\n- Availability factors: $\\alpha_{\\text{coal},t} = 0.85$ for all $t$, $\\alpha_{\\text{gas},t} = 0.90$ for all $t$.\n- Existing capacities: $K_{\\text{coal},0} = 400$ $\\text{MW}$, $K_{\\text{gas},0} = 200$ $\\text{MW}$.\n- Demands: $D_1 = 5{,}000{,}000$ $\\text{MWh}$, $D_2 = 5{,}500{,}000$ $\\text{MWh}$, $D_3 = 6{,}000{,}000$ $\\text{MWh}$.\n\nDefine three carbon budget cases:\n- Case A (moderately binding budget): $B = 8{,}000{,}000$ $\\text{tCO}_2$.\n- Case B (non-binding budget): $B = 20{,}000{,}000$ $\\text{tCO}_2$.\n- Case C (tight budget): $B = 6{,}000{,}000$ $\\text{tCO}_2$.\n\nRequired final output format:\n- For each test case, output a list with the total installed capacities and the carbon price trajectory: $[K_{\\text{coal}}, K_{\\text{gas}}, p_1, p_2, p_3]$.\n- Your program should produce a single line of output containing the results for all test cases as a comma-separated list enclosed in square brackets, with each test case result enclosed in its own square brackets and no spaces. For example: $[[K_{\\text{coal}}^{(A)},K_{\\text{gas}}^{(A)},p_1^{(A)},p_2^{(A)},p_3^{(A)}],[K_{\\text{coal}}^{(B)},K_{\\text{gas}}^{(B)},p_1^{(B)},p_2^{(B)},p_3^{(B)}],[K_{\\text{coal}}^{(C)},K_{\\text{gas}}^{(C)},p_1^{(C)},p_2^{(C)},p_3^{(C)}]]$.",
            "solution": "### Step 1: Extract Givens\n\nThe problem provides the following data, variables, and definitions for an electricity system optimization model.\n\n**Time Horizon and Technologies:**\n- Number of periods: $T=3$\n- Hours per period: $H=8760$\n- Technologies: $i \\in \\{\\text{coal}, \\text{gas}\\}$\n\n**Economic Parameters:**\n- Discount rate: $r=0.05$\n- Discount factor: $d_t = (1+r)^{-(t-1)}$\n- Investment costs: $I_{\\text{coal}} = 2{,}000{,}000$ $\\$/\\text{MW}$, $I_{\\text{gas}} = 1{,}000{,}000$ $\\$/\\text{MW}$\n- Fixed OM costs: $f_{\\text{coal}} = 40{,}000$ $\\$/\\text{MW}\\cdot\\text{yr}$, $f_{\\text{gas}} = 20{,}000$ $\\$/\\text{MW}\\cdot\\text{yr}$\n- Variable costs: $v_{\\text{coal}} = 20$ $\\$/\\text{MWh}$, $v_{\\text{gas}} = 35$ $\\$/\\text{MWh}$\n\n**Technical and Environmental Parameters:**\n- Availability factors: $\\alpha_{\\text{coal},t} = 0.85$ for all $t$, $\\alpha_{\\text{gas},t} = 0.90$ for all $t$\n- Emission factors: $e_{\\text{coal}} = 0.90$ $\\text{tCO}_2/\\text{MWh}$, $e_{\\text{gas}} = 0.35$ $\\text{tCO}_2/\\text{MWh}$\n\n**Initial State and Demand:**\n- Existing capacities: $K_{\\text{coal},0} = 400$ $\\text{MW}$, $K_{\\text{gas},0} = 200$ $\\text{MW}$\n- Demands: $D_1 = 5{,}000{,}000$ $\\text{MWh}$, $D_2 = 5{,}500{,}000$ $\\text{MWh}$, $D_3 = 6{,}000{,}000$ $\\text{MWh}$\n\n**Carbon Budgets for Test Cases:**\n- Case A: $B = 8{,}000{,}000$ $\\text{tCO}_2$\n- Case B: $B = 20{,}000{,}000$ $\\text{tCO}_2$\n- Case C: $B = 6{,}000{,}000$ $\\text{tCO}_2$\n\n**Decision Variables:**\n- Capacity additions: $\\Delta K_{\\text{coal}}, \\Delta K_{\\text{gas}}$ ($\\text{MW}$)\n- Generation per period: $G_{\\text{coal},t}, G_{\\text{gas},t}$ ($\\text{MWh}$) for $t \\in \\{1, 2, 3\\}$\n\n**Objective Function and Constraints:**\n- Objective: Minimize Net Present Cost (NPC)\n  $\\text{NPC} = \\sum_{t=1}^{T} d_t \\left( \\sum_{i \\in \\{\\text{coal}, \\text{gas}\\}} \\left( f_i (K_{i,0} + \\Delta K_i) + v_i G_{i,t} \\right) \\right) + \\sum_{i \\in \\{\\text{coal}, \\text{gas}\\}} I_i \\Delta K_i$\n- Energy balance: $\\sum_{i} G_{i,t} = D_t$ for each period $t$\n- Capacity availability: $G_{i,t} \\leq \\alpha_{i,t} H (K_{i,0} + \\Delta K_i)$ for each technology $i$ and period $t$\n- Carbon budget: $\\sum_{t=1}^{T} \\sum_{i} e_i G_{i,t} \\leq B$\n- Non-negativity: $\\Delta K_i \\geq 0$, $G_{i,t} \\geq 0$\n\n**Carbon Price Definition:**\n- The implied contemporaneous carbon price in period $t$ is $p_t = \\lambda_B / d_t$, where $\\lambda_B$ is the Lagrange multiplier (shadow price) of the cumulative carbon budget constraint.\n\n### Step 2: Validate Using Extracted Givens\n\nThe problem statement is evaluated against the validation criteria:\n\n1.  **Scientifically Grounded**: The problem describes a capacity expansion and economic dispatch model, a standard and widely used framework in energy systems analysis and economics. The formulation as a linear program is a cornerstone of this field. All principles, such as NPC minimization, discounting, and constraints, are based on established economic and engineering theory. The problem is scientifically sound.\n2.  **Well-Posed**: The problem is formulated as a linear program (LP) with a linear objective function and linear constraints. As long as the feasible region is non-empty (which it is, as demand can be met), an optimal solution exists. The problem is well-posed.\n3.  **Objective**: The problem is stated in precise, quantitative, and objective language. All parameters are given as numerical values, and the goal is to compute specific numerical quantities. There is no subjective or opinion-based content.\n4.  **Completeness and Consistency**: All necessary data ($T, H, r$, costs, demands, technical parameters, etc.) are provided. The definitions of the objective function and constraints are explicit and mathematically consistent with each other. There are no missing definitions or contradictory statements.\n5.  **Realism and Feasibility**: The parameter values (costs, emission factors, capacities) are within realistic ranges for the respective technologies. The demands and budgets are specified such that the problem explores different regimes (binding, non-binding constraints), which is a standard approach for sensitivity analysis. The constraints are physically and economically meaningful.\n6.  **No Other Flaws**: The problem is not metaphorical, trivial, or pseudo-profound. It requires the application of standard optimization techniques to a concretely defined problem.\n\n### Step 3: Verdict and Action\n\nThe problem is valid. It is a well-defined, scientifically grounded, and objective linear programming problem. A complete solution will be provided.\n\n### Solution Formulation\n\nThe problem is a linear program, which can be expressed in the standard form:\nMinimize $\\mathbf{c}^T \\mathbf{x}$\nSubject to:\n$\\mathbf{A}_{eq} \\mathbf{x} = \\mathbf{b}_{eq}$\n$\\mathbf{A}_{ub} \\mathbf{x} \\leq \\mathbf{b}_{ub}$\n$\\mathbf{x} \\geq 0$\n\n**1. Decision Variables**\nThe vector of decision variables $\\mathbf{x}$ combines the capacity additions and the generation levels for each period. With two technologies and three periods, there are $2 + 2 \\times 3 = 8$ variables. We order them as follows:\n$$ \\mathbf{x} = [\\Delta K_{\\text{coal}}, \\Delta K_{\\text{gas}}, G_{\\text{coal},1}, G_{\\text{gas},1}, G_{\\text{coal},2}, G_{\\text{gas},2}, G_{\\text{coal},3}, G_{\\text{gas},3}]^T $$\n\n**2. Objective Function**\nThe objective is to minimize the Net Present Cost (NPC). The NPC expression can be rearranged to separate terms related to decision variables from constant terms. The constant part (costs associated with existing capacity) can be dropped from the optimization objective.\nThe cost function to minimize is:\n$$ \\text{Cost} = (I_{\\text{coal}} + f_{\\text{coal}} \\sum_{t=1}^T d_t) \\Delta K_{\\text{coal}} + (I_{\\text{gas}} + f_{\\text{gas}} \\sum_{t=1}^T d_t) \\Delta K_{\\text{gas}} + \\sum_{t=1}^T d_t (v_{\\text{coal}} G_{\\text{coal},t} + v_{\\text{gas}} G_{\\text{gas},t}) $$\nThe cost vector $\\mathbf{c}$ of size $8$ is constructed from the coefficients of the variables in this expression. Let $D_S = \\sum_{t=1}^3 d_t$.\n$$\n\\mathbf{c} = [\n(I_{\\text{coal}} + f_{\\text{coal}} D_S),\n(I_{\\text{gas}} + f_{\\text{gas}} D_S),\nd_1 v_{\\text{coal}}, d_1 v_{\\text{gas}},\nd_2 v_{\\text{coal}}, d_2 v_{\\text{gas}},\nd_3 v_{\\text{coal}}, d_3 v_{\\text{gas}}\n]^T\n$$\n\n**3. Constraints**\n\n*   **Energy Balance (Equality Constraints):** For each period $t \\in \\{1, 2, 3\\}$, the total generation must equal demand:\n    $G_{\\text{coal},t} + G_{\\text{gas},t} = D_t$.\n    This gives $3$ equality constraints, forming the matrix $\\mathbf{A}_{eq}$ ($3 \\times 8$) and vector $\\mathbf{b}_{eq}$ (size $3$).\n\n*   **Capacity Availability (Inequality Constraints):** For each technology $i$ and period $t$, generation is limited by available capacity.\n    $G_{i,t} \\leq \\alpha_i H (K_{i,0} + \\Delta K_i)$\n    Rearranging into the standard form $Ax \\leq b$:\n    $G_{i,t} - (\\alpha_i H) \\Delta K_i \\leq \\alpha_i H K_{i,0}$\n    This gives $2 \\times 3 = 6$ inequality constraints.\n\n*   **Cumulative Carbon Budget (Inequality Constraint):** Total emissions over the horizon must not exceed the budget $B$.\n    $\\sum_{t=1}^3 (e_{\\text{coal}} G_{\\text{coal},t} + e_{\\text{gas}} G_{\\text{gas},t}) \\leq B$\n    This is one additional inequality constraint.\n\nThese $7$ inequality constraints form the matrix $\\mathbf{A}_{ub}$ ($7 \\times 8$) and vector $\\mathbf{b}_{ub}$ (size $7$).\n\n*   **Non-negativity:** All decision variables must be non-negative, which is a standard bound in LP solvers.\n\n**4. Carbon Price Calculation**\nThe linear programming solver provides the optimal values of the decision variables $\\mathbf{x}^*$ and the shadow prices (Lagrange multipliers) for each constraint. The shadow price for the cumulative carbon budget constraint, $\\lambda_B$, is of particular interest. It represents the reduction in the optimal NPC for a one-unit increase in the carbon budget $B$. Its units are $\\$/\\text{tCO}_2$ in present value terms. The problem defines the contemporaneous carbon price in period $t$ as $p_t = \\lambda_B / d_t$. This conversion accounts for the time value of money, reflecting the fact that a carbon price in the future is worth less today. If the carbon budget constraint is not binding (i.e., optimal emissions are less than $B$), its shadow price $\\lambda_B$ will be $0$, and consequently, all $p_t$ will be $0$.\n\nThe following Python code implements this linear programming model using `scipy.optimize.linprog` to solve for the optimal capacities and generation for each of the three budget cases. It then calculates the carbon price trajectory based on the dual variable of the carbon budget constraint.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.optimize import linprog\n\ndef solve():\n    \"\"\"\n    Solves the energy capacity expansion and dispatch problem for three carbon budget cases.\n    \"\"\"\n\n    # --- Fixed Parameters ---\n    T = 3\n    H = 8760.0\n    r = 0.05\n    \n    params = {\n        'coal': {\n            'I': 2000000.0,  # Investment cost $/MW\n            'f': 40000.0,    # Fixed OM $/MW-yr\n            'v': 20.0,       # Variable cost $/MWh\n            'e': 0.90,       # Emission factor tCO2/MWh\n            'alpha': 0.85,   # Availability factor\n            'K0': 400.0,     # Existing capacity MW\n        },\n        'gas': {\n            'I': 1000000.0,\n            'f': 20000.0,\n            'v': 35.0,\n            'e': 0.35,\n            'alpha': 0.90,\n            'K0': 200.0,\n        }\n    }\n    \n    demands = np.array([5000000.0, 5500000.0, 6000000.0]) # MWh\n    \n    # Test cases for carbon budget B\n    test_cases = [\n        8000000.0,   # Case A: Moderately binding\n        20000000.0,  # Case B: Non-binding\n        6000000.0,   # Case C: Tight\n    ]\n    \n    # --- Derived Parameters ---\n    # Decision variables are ordered as [dK_c, dK_g, G_c1, G_g1, G_c2, G_g2, G_c3, G_g3]\n    num_vars = 2 + 2 * T\n\n    # Discount factors\n    d = np.array([(1 + r)**(-(t - 1)) for t in range(1, T + 1)])\n    \n    # Cost vector c for the objective function min c'x\n    c = np.zeros(num_vars)\n    d_sum = np.sum(d)\n    c[0] = params['coal']['I'] + params['coal']['f'] * d_sum\n    c[1] = params['gas']['I'] + params['gas']['f'] * d_sum\n    for t in range(T):\n        c[2 + 2 * t] = params['coal']['v'] * d[t]\n        c[2 + 2 * t + 1] = params['gas']['v'] * d[t]\n        \n    # --- Constraint Matrices ---\n    \n    # Equality constraints: A_eq * x = b_eq (Energy balance)\n    A_eq = np.zeros((T, num_vars))\n    for t in range(T):\n        A_eq[t, 2 + 2 * t] = 1.0  # G_coal,t\n        A_eq[t, 2 + 2 * t + 1] = 1.0  # G_gas,t\n    b_eq = demands\n    \n    # Inequality constraints: A_ub * x = b_ub\n    num_ineq = 2 * T + 1\n    A_ub = np.zeros((num_ineq, num_vars))\n    b_ub = np.zeros(num_ineq)\n    \n    # Capacity constraints\n    alpha_c_H = params['coal']['alpha'] * H\n    alpha_g_H = params['gas']['alpha'] * H\n    \n    for t in range(T):\n        # Coal: G_c,t - alpha_c*H * dK_c = alpha_c*H * K_c0\n        row_c = t\n        A_ub[row_c, 2 + 2 * t] = 1.0\n        A_ub[row_c, 0] = -alpha_c_H\n        b_ub[row_c] = alpha_c_H * params['coal']['K0']\n        \n        # Gas: G_g,t - alpha_g*H * dK_g = alpha_g*H * K_g0\n        row_g = T + t\n        A_ub[row_g, 2 + 2 * t + 1] = 1.0\n        A_ub[row_g, 1] = -alpha_g_H\n        b_ub[row_g] = alpha_g_H * params['gas']['K0']\n\n    # Carbon budget constraint\n    carbon_constraint_idx = 2 * T\n    for t in range(T):\n        A_ub[carbon_constraint_idx, 2 + 2 * t] = params['coal']['e']\n        A_ub[carbon_constraint_idx, 2 + 2 * t + 1] = params['gas']['e']\n    \n    # All variables must be non-negative\n    bounds = (0, None)\n    \n    # --- Solve for each case ---\n    all_results = []\n    \n    for B in test_cases:\n        # Update the RHS of the carbon budget constraint\n        b_ub[carbon_constraint_idx] = B\n        \n        # Solve the LP\n        res = linprog(c=c, A_ub=A_ub, b_ub=b_ub, A_eq=A_eq, b_eq=b_eq, bounds=bounds, method='highs')\n        \n        if not res.success:\n            # Handle solver failure if necessary\n            # For this problem, a solution is expected to exist.\n            raise RuntimeError(f\"Solver failed for budget B={B}\")\n            \n        # Extract optimal values\n        dK_c, dK_g = res.x[0], res.x[1]\n        \n        # Calculate total installed capacity\n        K_coal = params['coal']['K0'] + dK_c\n        K_gas = params['gas']['K0'] + dK_g\n\n        # Extract shadow price of carbon budget\n        # duals for A_ub @ x = b_ub are non-positive. Shadow price is the negative.\n        lambda_B = -res.ineqlin.marginals[carbon_constraint_idx]\n        \n        # Calculate contemporaneous carbon prices\n        p_t = lambda_B / d\n        p1, p2, p3 = p_t[0], p_t[1], p_t[2]\n        \n        # Format results\n        case_result = [\n            round(K_coal, 2),\n            round(K_gas, 2),\n            round(p1, 2),\n            round(p2, 2),\n            round(p3, 2),\n        ]\n        all_results.append(case_result)\n        \n    # Reorder results to match A, B, C as defined in the prompt\n    # My test_cases list is [A, B, C] already.\n    # The final output needs to be in a specific string format\n    result_str = \",\".join([f\"[{','.join(f'{val:.2f}' for val in case)}]\" for case in all_results])\n    \n    # Final print statement\n    print(f\"[{result_str}]\")\n\nsolve()\n```"
        }
    ]
}
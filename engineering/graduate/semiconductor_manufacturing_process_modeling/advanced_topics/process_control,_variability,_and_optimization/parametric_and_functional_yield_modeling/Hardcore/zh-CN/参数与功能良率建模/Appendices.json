{
    "hands_on_practices": [
        {
            "introduction": "要掌握良率建模，我们首先要从功能良率最基本的模型——泊松模型开始。这个模型假设缺陷在晶圆上随机且独立地分布，为我们估算一颗芯片因随机颗粒而失效的概率提供了一个简洁而强大的数学框架。通过这个练习()，你将亲手应用泊松良率公式 $Y = \\exp(-AD)$ 进行计算，并探索良率对缺陷密度变化的敏感性，这是评估和改进制造工艺稳定性的关键一步。",
            "id": "4148274",
            "problem": "一条晶圆生产线生产面积为 $A=100\\ \\text{mm}^{2}$ 的芯片。晶圆表面的随机缺陷可以很好地用均匀空间泊松点过程来建模。当且仅当一个芯片不包含任何缺陷时，其功能是完好的；否则，其功能失效。缺陷密度为 $D_{0}=0.2\\ \\text{defects}/\\text{cm}^{2}$。使用泊松模型假设和上述定义，计算芯片的基准功能良率，然后通过报告由下式定义的确切良率相对变化，来量化良率对缺陷密度增加 $10\\%$ 的敏感性：\n$$\\frac{Y\\big(D_{0}(1+0.1)\\big)-Y(D_{0})}{Y(D_{0})}.$$\n将功能良率和相对变化表示为无量纲小数，并将两者四舍五入到六位有效数字。",
            "solution": "经初步核查，该问题被评估为有效。该问题在科学上基于成熟的缺陷限制良率泊松模型，问题设定良好，提供了所有必要的参数，并且表述客观。因此，我们可以继续进行解答。\n\n问题陈述，随机缺陷被建模为均匀空间泊松点过程。对于这样的过程，在固定面积 $A$ 内出现的缺陷数量 $N$ 服从泊松分布，其概率质量函数由下式给出：\n$$P(N=k) = \\frac{\\lambda^{k} \\exp(-\\lambda)}{k!}$$\n其中 $k$ 是缺陷数量（一个非负整数），$\\lambda$ 是面积 $A$ 内的平均缺陷数。参数 $\\lambda$ 的计算方法是缺陷密度 $D$ 和面积 $A$ 的乘积：\n$$\\lambda = A D$$\n\n当且仅当一个芯片包含零个缺陷时，它才被认为是功能完好的。因此，功能良率 $Y$ 是在芯片面积 $A$ 内发现 $k=0$ 个缺陷的概率。\n$$Y = P(N=0) = \\frac{\\lambda^{0} \\exp(-\\lambda)}{0!} = \\frac{1 \\cdot \\exp(-\\lambda)}{1} = \\exp(-\\lambda)$$\n代入 $\\lambda$ 的表达式，我们得到泊松良率模型公式：\n$$Y(D) = \\exp(-A D)$$\n\n问题提供了以下数据：\n- 芯片面积：$A = 100\\ \\text{mm}^{2}$\n- 基准缺陷密度：$D_{0} = 0.2\\ \\text{defects}/\\text{cm}^{2}$\n\n为了计算平均缺陷数 $\\lambda_0$，面积和缺陷密度的单位必须一致。我们将芯片面积 $A$ 从 $\\text{mm}^{2}$ 转换为 $\\text{cm}^{2}$。使用转换关系 $1\\ \\text{cm} = 10\\ \\text{mm}$，我们发现：\n$$1\\ \\text{cm}^{2} = (10\\ \\text{mm})^{2} = 100\\ \\text{mm}^{2}$$\n因此，芯片面积为 $A = 1\\ \\text{cm}^{2}$。\n\n现在，我们可以计算基准平均缺陷数 $\\lambda_0$：\n$$\\lambda_0 = A D_{0} = (1\\ \\text{cm}^{2}) \\times (0.2\\ \\text{defects}/\\text{cm}^{2}) = 0.2$$\n这个值是无量纲的，因为它代表一个计数。\n\n那么，基准功能良率 $Y(D_0)$ 为：\n$$Y(D_0) = \\exp(-\\lambda_0) = \\exp(-0.2)$$\n计算数值并四舍五入到六位有效数字：\n$$Y(D_0) \\approx 0.81873075 \\dots \\approx 0.818731$$\n\n接下来，我们分析缺陷密度增加 $10\\%$ 的影响。新的缺陷密度 $D_1$ 为：\n$$D_1 = D_{0}(1 + 0.1) = 1.1 D_{0} = 1.1 \\times 0.2\\ \\text{defects}/\\text{cm}^{2} = 0.22\\ \\text{defects}/\\text{cm}^{2}$$\n新的平均缺陷数 $\\lambda_1$ 为：\n$$\\lambda_1 = A D_1 = (1\\ \\text{cm}^{2}) \\times (0.22\\ \\text{defects}/\\text{cm}^{2}) = 0.22$$\n注意 $\\lambda_1 = 1.1 \\lambda_0$。\n\n新的功能良率 $Y(D_1)$ 为：\n$$Y(D_1) = \\exp(-\\lambda_1) = \\exp(-0.22)$$\n问题要求计算良率的相对变化，我们将其表示为 $\\Delta Y_{\\text{frac}}$：\n$$\\Delta Y_{\\text{frac}} = \\frac{Y(D_{1}) - Y(D_{0})}{Y(D_{0})} = \\frac{\\exp(-\\lambda_1) - \\exp(-\\lambda_0)}{\\exp(-\\lambda_0)}$$\n代入 $\\lambda_1 = 1.1 \\lambda_0$：\n$$\\Delta Y_{\\text{frac}} = \\frac{\\exp(-1.1 \\lambda_0) - \\exp(-\\lambda_0)}{\\exp(-\\lambda_0)} = \\frac{\\exp(-1.1 \\lambda_0)}{\\exp(-\\lambda_0)} - 1 = \\exp(-1.1 \\lambda_0 + \\lambda_0) - 1$$\n$$\\Delta Y_{\\text{frac}} = \\exp(-0.1 \\lambda_0) - 1$$\n现在，我们代入值 $\\lambda_0 = 0.2$：\n$$\\Delta Y_{\\text{frac}} = \\exp(-0.1 \\times 0.2) - 1 = \\exp(-0.02) - 1$$\n计算数值：\n$$\\exp(-0.02) \\approx 0.98019867 \\dots$$\n$$\\Delta Y_{\\text{frac}} \\approx 0.98019867 - 1 = -0.01980133 \\dots$$\n四舍五入到六位有效数字，得到：\n$$\\Delta Y_{\\text{frac}} \\approx -0.0198013$$\n\n基准功能良率约为 $0.818731$，由于缺陷密度增加 $10\\%$ 导致的良率相对变化约为 $-0.0198013$。",
            "answer": "$$\\boxed{\\begin{pmatrix} 0.818731  -0.0198013 \\end{pmatrix}}$$"
        },
        {
            "introduction": "在学习了泊松模型后，一个自然而然的问题是：公式中的“关键区域”$A$ 是如何确定的？它并不仅仅是芯片的物理面积。关键区域是一个更精妙的概念，它将电路的物理版图设计与特定尺寸缺陷的“杀伤力”联系起来。这个练习()将引导你从第一性原理出发，推导一个常见失效模式——金属线间短路——的关键区域。这将帮助你深刻理解良率模型是如何与具体的电路几何形状和缺陷物理特性联系在一起的。",
            "id": "4148307",
            "problem": "在二维平面互连布局中，考虑两条平行的长矩形导线，每条导线的宽度为 $w$，长度为 $L$，其相对边缘由均匀间距 $s$ 分隔。假设 $L \\gg w$、$L \\gg s$ 且 $L \\gg r$，因此为此计算可以忽略导线终端的末端效应。缺陷被建模为半径为 $r$ 的圆形颗粒（圆盘），其中心在平面上均匀随机分布。当且仅当单个缺陷圆同时与两条导体相交时，才称在两条导体之间发生了短路故障。\n\n使用短路关键区域（即产生短路的缺陷中心的轨迹的度量）的定义，从第一性原理出发，在所述的长平行线近似下，推导短路关键区域 $A_{c}(r)$ 作为 $r$、$w$、$s$ 和 $L$ 的函数的解析表达式。您的推导必须从以下几何定义开始：与给定导体相交的缺陷中心的轨迹是该导体多边形与一个半径为 $r$ 的圆盘的几何膨胀（闵可夫斯基和，Minkowski sum），而产生短路的轨迹是两条导体的这些膨胀区域的交集。清楚地说明您所做的任何几何简化。\n\n以精确的闭式表达式报告 $A_{c}(r)$。最终的方框表达式中不要包含单位。在您的推导中，当推理物理尺寸时，请将 $w$、$s$、$r$ 和 $L$ 解释为微米。无需进行数值舍入。",
            "solution": "问题要求推导短路关键区域 $A_c(r)$，该区域针对两条宽度为 $w$、长度为 $L$、间距为 $s$ 的长平行导线，且受到半径为 $r$ 的颗粒缺陷影响。推导必须基于关键区域的正式定义，即每个导体与缺陷圆盘的闵可夫斯基和 (Minkowski sum) 的交集。\n\n我们首先建立一个坐标系。设两个矩形导体，记为 $C_1$ 和 $C_2$，平行于y轴。我们可以将它们的中心线对称地放置在y轴两侧。\n导体 $C_1$ 占据由 $x \\in [-s/2 - w, -s/2]$ 和 $y \\in [0, L]$ 定义的区域。\n导体 $C_2$ 占据由 $x \\in [s/2, s/2 + w]$ 和 $y \\in [0, L]$ 定义的区域。\n它们相对边缘之间的间距是区域 $x \\in [-s/2, s/2]$，其宽度为 $s$。\n缺陷是一个半径为 $r$ 的圆形圆盘 $D_r$，以原点为中心，代表所有满足 $x^2+y^2 \\le r^2$ 的点 $(x,y)$ 的集合。\n\n根据问题陈述，导致与导体 $C_i$ 相交的缺陷中心的轨迹是其与缺陷圆盘的几何膨胀，或称闵可夫斯基和 (Minkowski sum)：$A_i = C_i \\oplus D_r$。如果一个缺陷同时与两个导体相交，则发生短路。因此，导致短路的缺陷中心的轨迹是两个膨胀区域的交集，$A_1 \\cap A_2$。短路关键区域 $A_c(r)$ 是该交集的度量：\n$$A_c(r) = \\text{Area}( (C_1 \\oplus D_r) \\cap (C_2 \\oplus D_r) )$$\n\n一个矩形与一个圆盘的闵可夫斯基和会形成一个“体育场”形状：即原始矩形向外扩展距离 $r$，并在其两端带有半径为 $r$ 的半圆形帽子。\n\n关键步骤是应用所述的长平行线近似，其中 $L \\gg w$、$L \\gg s$ 且 $L \\gg r$。这是一种几何简化，使我们能够忽略末端效应。具体来说，在计算交集时，由导体末端（每个导体的两个尺寸为 $w \\times r$ 的矩形和四个半径为 $r$ 的四分之一圆）对膨胀区域的贡献可以忽略不计。问题实际上简化为求解两个无限长的体育场形状的交集，这可以通过分析二维横截面（在三维视图中的x-z平面，或在我们的二维布局中简称x轴）的几何形状，然后将结果沿长度 $L$ 拉伸来解决。\n\n让我们分析x维度上的横截面。导体 $C_1$ 的横截面是区间 $I_1 = [-s/2 - w, -s/2]$。导体 $C_2$ 的横截面是区间 $I_2 = [s/2, s/2 + w]$。缺陷圆盘 $D_r$ 的一维横截面是区间 $I_r = [-r, r]$。\n\n膨胀区域 $A_1 = C_1 \\oplus D_r$ 的横截面是一维闵可夫斯基和 $I_1 \\oplus I_r$。两个区间 $[a, b]$ 和 $[c, d]$ 的闵可夫斯基和是区间 $[a+c, b+d]$。因此：\n$$ \\text{cross-section}(A_1) = [-s/2 - w - r, -s/2 + r] $$\n类似地，膨胀区域 $A_2 = C_2 \\oplus D_r$ 的横截面是：\n$$ \\text{cross-section}(A_2) = [s/2 - r, s/2 + w + r] $$\n\n关键区域 $A_1 \\cap A_2$ 的横截面是这两个膨胀区间的交集。两个区间 $[a, b]$ 和 $[c, d]$ 的交集是 $[\\max(a, c), \\min(b, d)]$。因此，关键缺陷中心的x区间是：\n$$ I_c = [\\max(-s/2 - w - r, s/2 - r), \\min(-s/2 + r, s/2 + w + r)] $$\n计算边界：\n左边界是 $\\max(-s/2 - w - r, s/2 - r) = s/2 - r$。\n右边界是 $\\min(-s/2 + r, s/2 + w + r) = -s/2 + r$。\n所以，导致短路的缺陷中心的x坐标区间是：\n$$ I_c = [s/2 - r, -s/2 + r] $$\n为使该区间非空，其上界必须大于或等于其下界：\n$$ -s/2 + r \\geq s/2 - r $$\n$$ 2r \\geq s $$\n$$ r \\geq \\frac{s}{2} $$\n如果 $r  s/2$，该区间为空，关键区域宽度为零，因此 $A_c(r) = 0$。这在物理上是直观的：如果一个缺陷的直径 $2r$ 小于间距 $s$，它就无法跨越这个间隙。\n\n如果 $r \\ge s/2$，关键横截面的宽度 $W_c$ 是区间 $I_c$ 的长度：\n$$ W_c = (-s/2 + r) - (s/2 - r) = 2r - s $$\n请注意，导体宽度 $w$ 没有出现在这个表达式中，因为它不影响缺陷跨越两导体之间间隙的条件。\n\n总关键区域 $A_c(r)$ 是通过将此关键宽度 $W_c$ 沿导线长度 $L$ 拉伸得到的：\n$$ A_c(r) = W_c \\times L = L(2r - s) $$\n此表达式在 $r \\ge s/2$ 时有效。对于 $r  s/2$，面积为 $0$。我们可以使用最大值函数将这两种情况合并为一个简洁的闭式表达式：\n$$ A_c(r) = L \\cdot \\max(0, 2r - s) $$\n当 $2r \\le s$ 时，该表达式正确地计算为 $0$；当 $2r  s$ 时，计算为 $L(2r-s)$。这就是长平行线近似下，短路关键区域的最终解析表达式。",
            "answer": "$$ \\boxed{L \\cdot \\max(0, 2r - s)} $$"
        },
        {
            "introduction": "除了芯片能否工作的“功能良率”之外，现代半导体制造同样关注芯片工作得“有多好”，即“参数良率”。即使芯片功能完好，其速度、功耗或稳定性等关键性能参数的波动也可能导致其无法满足设计要求。本次最终练习()将带你进入参数良率的世界，通过分析静态随机存取存储器(SRAM)单元的静态噪声容限(SNM)，你将学习如何运用统计学方法，分析晶体管参数的微小波动如何传递并最终影响电路的性能分布。这项实践展示了在纳米尺度下，对工艺变化进行建模和控制的极端重要性。",
            "id": "4148333",
            "problem": "考虑一个由一对相同的互补金属氧化物半导体（CMOS）逆变器交叉耦合构成的静态随机存取存储器（SRAM）位单元。保持状态下的静态噪声容限（SNM）定义为可嵌入正向和镜像逆变器直流传输特性（“蝴蝶曲线”）之间的最大轴对齐正方形的边长，单位为伏特。为进行一阶建模，假设为长沟道金属氧化物半导体场效应晶体管（MOSFET）行为，处于强反型区且无沟道长度调制效应。n沟道MOSFET（NMOS）在饱和区的漏极电流由 $I_{D,n} = \\frac{1}{2} \\mu_n C_{ox} \\frac{W_n}{L_{\\text{eff},n}} (V_{GS,n} - V_{T,n})^2$ 给出，类似地，p沟道MOSFET（PMOS）的漏极电流为：$I_{D,p} = \\frac{1}{2} \\mu_p C_{ox} \\frac{W_p}{L_{\\text{eff},p}} (V_{SG,p} - |V_{T,p}|)^2$。逆变器的开关行为和小信号特性遵循电荷守恒和器件方程。\n\n令 $V_{T,n}$、$V_{T,p}$、$\\mu_n$、$\\mu_p$、$L_{\\text{eff},n}$ 和 $L_{\\text{eff},p}$ 分别表示晶体管的阈值电压、迁移率和有效沟道长度。假设SNM在标称工作点附近是这些参数的可微函数。将参数扰动向量定义为 $\\Delta \\mathbf{p} = [\\Delta V_{T,n}, \\Delta V_{T,p}, \\Delta \\ln \\mu_n, \\Delta \\ln \\mu_p, \\Delta \\ln L_{\\text{eff},n}, \\Delta \\ln L_{\\text{eff},p}]^\\top$，其中迁移率和有效长度以对数形式表示，以将乘性变异捕获为加性扰动。假设 $\\Delta \\mathbf{p}$ 被建模为一个零均值多元正态随机向量，其协方差矩阵为 $\\Sigma \\in \\mathbb{R}^{6 \\times 6}$，并令SNM相对于这些参数的一阶灵敏度向量为 $\\mathbf{s} = \\left[\\frac{\\partial \\mathrm{SNM}}{\\partial V_{T,n}}, \\frac{\\partial \\mathrm{SNM}}{\\partial V_{T,p}}, \\frac{\\partial \\mathrm{SNM}}{\\partial \\ln \\mu_n}, \\frac{\\partial \\mathrm{SNM}}{\\partial \\ln \\mu_p}, \\frac{\\partial \\mathrm{SNM}}{\\partial \\ln L_{\\text{eff},n}}, \\frac{\\partial \\mathrm{SNM}}{\\partial \\ln L_{\\text{eff},p}}\\right]^\\top$，在标称点处求值。令在平均参数值下的标称SNM为 $\\mathrm{SNM}_0$，单位为伏特。\n\n从MOSFET的电流-电压关系和通过逆变器直流传输特性定义的SNM出发，根据第一性原理推导在小的高斯参数扰动下SNM的一阶分布。您的推导必须从基本的器件关系开始，通过逆变器工作条件，直至得到线性化的SNM对参数的依赖关系。然后，使用您推导出的分布，将SNM超过指定阈值 $T$（单位为伏特）的概率表示为 $\\mathrm{SNM}_0$、$\\mathbf{s}$ 和 $\\Sigma$ 的函数。\n\n您的程序必须实现推导出的概率表达式，并为以下每个测试用例计算SNM超过给定阈值的概率。所有SNM和阈值量都必须以伏特为单位处理。以十进制数形式输出概率（不带百分号）。随机变量的单位定义如下：$V_{T,n}$ 和 $V_{T,p}$ 的单位为伏特，$\\ln \\mu_n$ 和 $\\ln \\mu_p$ 无量纲，$\\ln L_{\\text{eff},n}$ 和 $\\ln L_{\\text{eff},p}$ 无量纲。\n\n测试套件（每个用例提供 $\\mathrm{SNM}_0$、$\\mathbf{s}$、$\\Sigma$ 和 $T$）：\n\n- 用例1（具有中等变异性和弱相关性的一般情况）：\n    - $\\mathrm{SNM}_0 = 0.25$\n    - $\\mathbf{s} = [-0.30, -0.28, 0.10, 0.09, -0.08, -0.07]$\n    - 标准差：$\\sigma(V_{T,n}) = 0.020$, $\\sigma(V_{T,p}) = 0.020$, $\\sigma(\\ln \\mu_n) = 0.050$, $\\sigma(\\ln \\mu_p) = 0.050$, $\\sigma(\\ln L_{\\text{eff},n}) = 0.030$, $\\sigma(\\ln L_{\\text{eff},p}) = 0.030$\n    - 相关性（未列出则为零）：$\\rho(V_{T,n}, V_{T,p}) = 0.20$, $\\rho(\\ln \\mu_n, \\ln \\mu_p) = 0.10$, $\\rho(\\ln L_{\\text{eff},n}, \\ln L_{\\text{eff},p}) = 0.50$, $\\rho(V_{T,n}, \\ln \\mu_n) = -0.30$, $\\rho(V_{T,p}, \\ln \\mu_p) = -0.30$\n    - 阈值 $T = 0.20$\n- 用例2（阈值等于均值的边界情况）：\n    - $\\mathrm{SNM}_0 = 0.25$\n    - $\\mathbf{s}$ 和 $\\Sigma$ 与用例1相同\n    - 阈值 $T = 0.25$\n- 用例3（具有微小变异性的近确定性极限）：\n    - $\\mathrm{SNM}_0 = 0.25$\n    - $\\mathbf{s}$ 与用例1相同\n    - $\\Sigma$ 是对角矩阵，其对角线元素为：$\\sigma(V_{T,n}) = 1.0 \\times 10^{-4}$, $\\sigma(V_{T,p}) = 1.0 \\times 10^{-4}$, $\\sigma(\\ln \\mu_n) = 1.0 \\times 10^{-3}$, $\\sigma(\\ln \\mu_p) = 1.0 \\times 10^{-3}$, $\\sigma(\\ln L_{\\text{eff},n}) = 1.0 \\times 10^{-4}$, $\\sigma(\\ln L_{\\text{eff},p}) = 1.0 \\times 10^{-4}$；所有相关性均为零。\n    - 阈值 $T = 0.24$\n- 用例4（具有更高变异性和更强跨参数相关性的情况）：\n    - $\\mathrm{SNM}_0 = 0.18$\n    - $\\mathbf{s} = [-0.45, -0.42, 0.15, 0.12, -0.12, -0.10]$\n    - 标准差：$\\sigma(V_{T,n}) = 0.030$, $\\sigma(V_{T,p}) = 0.030$, $\\sigma(\\ln \\mu_n) = 0.080$, $\\sigma(\\ln \\mu_p) = 0.080$, $\\sigma(\\ln L_{\\text{eff},n}) = 0.050$, $\\sigma(\\ln L_{\\text{eff},p}) = 0.050$\n    - 相关性（未列出则为零）：$\\rho(V_{T,n}, V_{T,p}) = 0.30$, $\\rho(\\ln \\mu_n, \\ln \\mu_p) = 0.20$, $\\rho(\\ln L_{\\text{eff},n}, \\ln L_{\\text{eff},p}) = 0.60$, $\\rho(V_{T,n}, \\ln L_{\\text{eff},n}) = -0.60$, $\\rho(V_{T,p}, \\ln L_{\\text{eff},p}) = -0.60$, $\\rho(V_{T,n}, \\ln \\mu_n) = -0.20$, $\\rho(V_{T,p}, \\ln \\mu_p) = -0.20$\n    - 阈值 $T = 0.20$\n\n对于每个用例，根据提供的标准差和相关性构建 $\\Sigma$，其中当 $i \\neq j$ 时，$\\Sigma_{ij} = \\rho_{ij} \\sigma_i \\sigma_j$，当 $i=j$ 时，$\\Sigma_{ii} = \\sigma_i^2$。您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表的结果（例如，$[\\text{result1},\\text{result2},\\text{result3},\\text{result4}]$），每个结果是相应情况下SNM超过给定阈值 $T$ 的概率，以十进制数表示。",
            "solution": "该问题经评估具有科学依据、问题明确、客观且内部一致。它提出了一个统计电路分析中的标准任务：对随机工艺变异对关键性能指标的影响进行建模。使用一阶泰勒展开（线性化）和多元高斯分布的矩传播是该领域的基石技术。所提供的物理参数和统计数据是符合实际的。因此，该问题被认为是有效的，并将在下面提供解决方案。\n\n目标是，在给定的基础晶体管参数存在小的、服从正态分布的变异的情况下，推导静态随机存取存储器（SRAM）单元的静态噪声容限（SNM）的一阶概率分布，然后计算SNM超过某一阈值T的概率。\n\n推导分三个阶段进行：首先，建立SNM对器件参数的函数依赖关系；其次，线性化此依赖关系并推导SNM的统计分布；第三，构建超过阈值T的概率公式。\n\n1.  **SNM对器件参数的函数依赖关系**\n\nSRAM单元由两个交叉耦合的CMOS逆变器组成。该单元的静态行为由“蝴蝶曲线”捕获，该曲线是一个逆变器的电压传输特性（VTC）与另一个逆变器的反向VTC的叠加。SNM在几何上定义为可内切于此蝴蝶曲线波瓣内的最大正方形的边长。\n\n单个CMOS逆变器的VTC（绘制输出电压 $V_{out}$ 与输入电压 $V_{in}$ 的关系图）由其n沟道MOSFET（NMOS）和p沟道MOSFET（PMOS）晶体管之间的电流相等条件决定：$I_{D,n} = I_{D,p}$。漏极电流由器件方程给出：\n$$I_{D,n} = \\frac{1}{2} \\mu_n C_{ox} \\frac{W_n}{L_{\\text{eff},n}} (V_{GS,n} - V_{T,n})^2$$\n$$I_{D,p} = \\frac{1}{2} \\mu_p C_{ox} \\frac{W_p}{L_{\\text{eff},p}} (V_{SG,p} - |V_{T,p}|)^2$$\n这些方程在饱和区成立，这对于确定逆变器的过渡区至关重要。VTC的具体形状，以及蝴蝶曲线的形状和SNM的值，是晶体管参数的一个复杂的非线性函数。我们定义这些工艺参数的向量 $\\mathbf{p} \\in \\mathbb{R}^6$：\n$$\\mathbf{p} = [V_{T,n}, V_{T,p}, \\ln \\mu_n, \\ln \\mu_p, \\ln L_{\\text{eff},n}, \\ln L_{\\text{eff},p}]^\\top$$\n因此，该依赖关系可以正式写为 $\\mathrm{SNM} = f(\\mathbf{p})$。$f(\\mathbf{p})$ 的精确解析形式难以处理，但其存在是器件物理的直接结果。\n\n2.  **SNM的线性化和统计分布**\n\n工艺变异导致参数向量 $\\mathbf{p}$ 偏离其标称值 $\\mathbf{p}_0$。设此偏差由随机向量 $\\Delta \\mathbf{p} = \\mathbf{p} - \\mathbf{p}_0$ 表示。对于小扰动，函数 $f(\\mathbf{p})$ 可以通过在标称点 $\\mathbf{p}_0$ 附近的一阶泰勒级数展开来近似：\n$$\\mathrm{SNM}(\\mathbf{p}) \\approx f(\\mathbf{p}_0) + \\left. \\nabla_{\\mathbf{p}} f \\right|_{\\mathbf{p}_0} (\\mathbf{p} - \\mathbf{p}_0)$$\n这里，$\\nabla_{\\mathbf{p}} f$ 是SNM函数相对于参数的梯度。问题提供了标称SNM，$\\mathrm{SNM}_0 = f(\\mathbf{p}_0)$，以及灵敏度向量 $\\mathbf{s}$，它是梯度在标称点处求值的转置：\n$$\\mathbf{s} = \\left. (\\nabla_{\\mathbf{p}} f)^\\top \\right|_{\\mathbf{p}_0} = \\left[\\frac{\\partial \\mathrm{SNM}}{\\partial p_1}, \\dots, \\frac{\\partial \\mathrm{SNM}}{\\partial p_6}\\right]^\\top$$\n因此，SNM的线性化模型为：\n$$\\mathrm{SNM} \\approx \\mathrm{SNM}_0 + \\mathbf{s}^\\top \\Delta \\mathbf{p}$$\n问题指出，参数扰动遵循零均值多元正态分布，$\\Delta \\mathbf{p} \\sim \\mathcal{N}(\\mathbf{0}, \\Sigma)$，其中 $\\Sigma$ 是协方差矩阵。\n\n在此线性近似下，SNM是多元正态随机向量的仿射变换。正态分布的一个基本性质是，任何此类变换都会产生一个服从正态分布的随机变量。因此，SNM近似服从正态分布，$\\mathrm{SNM} \\sim \\mathcal{N}(\\mu_{\\mathrm{SNM}}, \\sigma_{\\mathrm{SNM}}^2)$。我们现在来确定其均值 $\\mu_{\\mathrm{SNM}}$ 和方差 $\\sigma_{\\mathrm{SNM}}^2$。\n\n通过对线性化表达式求期望来找到均值：\n$$\\mu_{\\mathrm{SNM}} = E[\\mathrm{SNM}] \\approx E[\\mathrm{SNM}_0 + \\mathbf{s}^\\top \\Delta \\mathbf{p}] = \\mathrm{SNM}_0 + \\mathbf{s}^\\top E[\\Delta \\mathbf{p}]$$\n由于 $E[\\Delta \\mathbf{p}] = \\mathbf{0}$，SNM的均值是其标称值：\n$$\\mu_{\\mathrm{SNM}} = \\mathrm{SNM}_0$$\n\n方差是通过使用随机变量线性组合的方差性质来找到的：\n$$\\sigma_{\\mathrm{SNM}}^2 = \\mathrm{Var}(\\mathrm{SNM}) \\approx \\mathrm{Var}(\\mathrm{SNM}_0 + \\mathbf{s}^\\top \\Delta \\mathbf{p}) = \\mathrm{Var}(\\mathbf{s}^\\top \\Delta \\mathbf{p})$$\n对于协方差矩阵为 $\\mathrm{Cov}(\\mathbf{X})$ 的随机向量 $\\mathbf{X}$ 和常数向量 $\\mathbf{a}$，$\\mathbf{a}^\\top \\mathbf{X}$ 的方差是 $\\mathbf{a}^\\top \\mathrm{Cov}(\\mathbf{X}) \\mathbf{a}$。应用此规则：\n$$\\sigma_{\\mathrm{SNM}}^2 = \\mathbf{s}^\\top \\mathrm{Cov}(\\Delta \\mathbf{p}) \\mathbf{s} = \\mathbf{s}^\\top \\Sigma \\mathbf{s}$$\n因此，SNM的一阶分布是 $\\mathcal{N}(\\mathrm{SNM}_0, \\mathbf{s}^\\top \\Sigma \\mathbf{s})$。\n\n3.  **概率计算**\n\n我们需要计算SNM超过指定阈值 $T$ 的概率，即 $P(\\mathrm{SNM}  T)$。为此，我们将正态随机变量 $\\mathrm{SNM}$ 标准化以获得标准正态变量 $Z \\sim \\mathcal{N}(0, 1)$：\n$$Z = \\frac{\\mathrm{SNM} - \\mu_{\\mathrm{SNM}}}{\\sigma_{\\mathrm{SNM}}} = \\frac{\\mathrm{SNM} - \\mathrm{SNM}_0}{\\sqrt{\\mathbf{s}^\\top \\Sigma \\mathbf{s}}}$$\n现在，概率可以用 $Z$ 来表示：\n$$P(\\mathrm{SNM}  T) = P\\left(\\frac{\\mathrm{SNM} - \\mathrm{SNM}_0}{\\sigma_{\\mathrm{SNM}}}  \\frac{T - \\mathrm{SNM}_0}{\\sigma_{\\mathrm{SNM}}}\\right) = P\\left(Z  \\frac{T - \\mathrm{SNM}_0}{\\sqrt{\\mathbf{s}^\\top \\Sigma \\mathbf{s}}}\\right)$$\n令 $\\Phi(z)$ 为标准正态分布的累积分布函数（CDF），$\\Phi(z) = P(Z \\le z)$。生存函数（或互补CDF）是 $P(Z  z) = 1 - \\Phi(z)$。因此，所需的概率是：\n$$P(\\mathrm{SNM}  T) = 1 - \\Phi\\left(\\frac{T - \\mathrm{SNM}_0}{\\sqrt{\\mathbf{s}^\\top \\Sigma \\mathbf{s}}}\\right)$$\n使用恒等式 $1 - \\Phi(z) = \\Phi(-z)$，这也可以写成：\n$$P(\\mathrm{SNM}  T) = \\Phi\\left(\\frac{\\mathrm{SNM}_0 - T}{\\sqrt{\\mathbf{s}^\\top \\Sigma \\mathbf{s}}}\\right)$$\n这个最终表达式将被用于实现并解决测试用例。协方差矩阵 $\\Sigma$ 必须根据给定的标准差 $\\sigma_i$ 和相关系数 $\\rho_{ij}$，使用关系式 $\\Sigma_{ii} = \\sigma_i^2$ 和当 $i \\neq j$ 时的 $\\Sigma_{ij} = \\rho_{ij} \\sigma_i \\sigma_j$ 来构建。",
            "answer": "[0.9999710386261073,0.5,1.0,0.1477759604169524]"
        }
    ]
}
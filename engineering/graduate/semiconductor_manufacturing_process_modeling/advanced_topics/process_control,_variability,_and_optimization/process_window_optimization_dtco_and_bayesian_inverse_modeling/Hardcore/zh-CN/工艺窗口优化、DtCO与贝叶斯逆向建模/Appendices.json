{
    "hands_on_practices": [
        {
            "introduction": "在着手构建任何预测模型之前，一个至关重要的问题是：我们设计的实验能否提供足够的信息来唯一确定模型的参数？本练习将引导您探索参数可辨识性这一核心概念。您将运用费雪信息矩阵 (Fisher Information Matrix) 这一统计学工具，从理论上确定保证模型参数可解所需的最小实验配置，这为后续的工艺建模与优化奠定了坚实的基础。",
            "id": "4157910",
            "problem": "半导体光刻中的一个关键尺寸响应模型，在标称条件附近的一个小工艺窗口内被线性化如下：对于曝光 $j$，测得的关键尺寸 $y_{j}$ 由以下模型表示：\n$$\ny_{j} \\;=\\; \\theta_{0} \\;+\\; \\theta_{E}\\,\\delta E_{j} \\;+\\; \\theta_{F}\\,\\delta F_{j} \\;+\\; \\varepsilon_{j},\n$$\n其中 $\\theta_{0}$ 是掩模偏置偏移，$\\theta_{E}$ 是剂量灵敏度，$\\theta_{F}$ 是焦距灵敏度，$\\varepsilon_{j}$ 是独立同分布的测量误差，假定为均值为零、方差为 $\\sigma^{2}$ 的高斯分布。这些参数对于设计-工艺协同优化（DTCO）和工艺窗口优化至关重要，因为它们量化了图形化结果如何响应剂量和焦距的变化。工艺窗口角点的曝光可作为候选集：\n$$\n(\\delta E, \\delta F) \\in \\{(-1,-1),\\,(-1,1),\\,(1,-1),\\,(1,1)\\}.\n$$\n假设所有曝光产生的测量都是独立的，具有相同的 $\\sigma$，并且线性化在给定窗口内有效。从带有高斯噪声的贝叶斯逆向建模的角度来看，费雪信息包含了对数似然函数的曲率信息，并决定了局部可识别性。\n\n从高斯噪声模型和费雪信息的定义（即对数似然函数关于 $(\\theta_{0}, \\theta_{E}, \\theta_{F})$ 的负黑塞矩阵的期望值）出发，完成以下任务：\n\n- 从候选集中选择一个最小的曝光子集，以确保参数矢量 $(\\theta_{0}, \\theta_{E}, \\theta_{F})$ 是可识别的。\n- 为您选择的最小子集计算费雪信息矩阵，用 $\\sigma$ 表示。\n- 以 $\\sigma$ 的闭式解析表达式报告此费雪信息矩阵的行列式。\n\n将最终的行列式表示为 $\\sigma$ 的函数。最终报告值无需四舍五入，也无需物理单位。",
            "solution": "该问题是有效的，因为它具有科学依据、问题适定、客观且内部一致。\n\n给定的测量关键尺寸 $y_j$ 的线性响应模型为：\n$$y_j = \\theta_0 + \\theta_E \\delta E_j + \\theta_F \\delta F_j + \\varepsilon_j$$\n其中 $\\varepsilon_j \\sim \\mathcal{N}(0, \\sigma^2)$ 是独立同分布的高斯误差。这是一个标准的线性回归模型。对于一组 $n$ 次测量，这种关系可以表示为矩阵形式：\n$$\\mathbf{y} = X\\boldsymbol{\\theta} + \\boldsymbol{\\varepsilon}$$\n其中 $\\mathbf{y} = (y_1, ..., y_n)^T$ 是测量向量，$\\boldsymbol{\\theta} = (\\theta_0, \\theta_E, \\theta_F)^T$ 是待识别的 $3 \\times 1$ 参数向量，$\\boldsymbol{\\varepsilon}$ 是噪声项向量，$X$ 是 $n \\times 3$ 的设计矩阵。$X$ 的每一行对应一个曝光条件，形式为 $(1, \\delta E_j, \\delta F_j)$。\n\n参数向量 $\\boldsymbol{\\theta}$ 可识别的充要条件是设计矩阵 $X$ 具有满列秩，即秩为 $3$。对于一个 $n \\times 3$ 矩阵，其秩为 $3$ 的必要条件是 $n \\ge 3$。因此，为确保可识别性所需的最小曝光次数为 $n=3$。\n\n第一个任务是从候选集 $\\{(-1,-1), (-1,1), (1,-1), (1,1)\\}$ 中选择一个最小的曝光子集，以确保可识别性。我们必须选择 $n=3$ 个曝光条件，使得得到的 $3 \\times 3$ 设计矩阵 $X$ 是可逆的（即秩为 $3$）。让我们选择以下三个曝光的子集：\n$$ \\{(\\delta E_1, \\delta F_1), (\\delta E_2, \\delta F_2), (\\delta E_3, \\delta F_3)\\} = \\{(-1,-1), (-1,1), (1,-1)\\} $$\n相应的设计矩阵 $X$ 是：\n$$ X = \\begin{pmatrix} 1  \\delta E_1  \\delta F_1 \\\\ 1  \\delta E_2  \\delta F_2 \\\\ 1  \\delta E_3  \\delta F_3 \\end{pmatrix} = \\begin{pmatrix} 1  -1  -1 \\\\ 1  -1  1 \\\\ 1  1  -1 \\end{pmatrix} $$\n为了确认这一选择允许参数识别，我们通过计算其行列式来检查 $X$ 是否可逆：\n$$ \\det(X) = 1((-1)(-1) - (1)(1)) - (-1)((1)(-1) - (1)(1)) + (-1)((1)(1) - (-1)(1)) $$\n$$ \\det(X) = 1(1-1) + 1(-1-1) - 1(1+1) = 0 - 2 - 2 = -4 $$\n由于 $\\det(X) = -4 \\neq 0$，矩阵 $X$ 是可逆的，因此参数向量 $\\boldsymbol{\\theta}$ 在这组最小的 $3$ 次曝光下是可识别的。\n\n第二个任务是计算费雪信息矩阵 (FIM)，$I(\\boldsymbol{\\theta})$。FIM 定义为对数似然函数 $\\ln \\mathcal{L}(\\boldsymbol{\\theta}|\\mathbf{y})$ 的黑塞矩阵的负期望值。对于给定的具有独立同分布高斯噪声的线性模型，其对数似然为：\n$$ \\ln \\mathcal{L}(\\boldsymbol{\\theta}|\\mathbf{y}) = -\\frac{n}{2}\\ln(2\\pi\\sigma^2) - \\frac{1}{2\\sigma^2}\\sum_{j=1}^n (y_j - (\\theta_0 + \\theta_E \\delta E_j + \\theta_F \\delta F_j))^2 $$\n黑塞矩阵 $H(\\boldsymbol{\\theta}) = \\frac{\\partial^2 \\ln \\mathcal{L}}{\\partial \\boldsymbol{\\theta} \\partial \\boldsymbol{\\theta}^T}$ 可以被证明为：\n$$ H(\\boldsymbol{\\theta}) = -\\frac{1}{\\sigma^2} X^T X $$\n由于黑塞矩阵不依赖于测量值 $\\mathbf{y}$，其期望就是其自身，$E[H(\\boldsymbol{\\theta})] = H(\\boldsymbol{\\theta})$。因此，费雪信息矩阵为：\n$$ I(\\boldsymbol{\\theta}) = -E[H(\\boldsymbol{\\theta})] = -H(\\boldsymbol{\\theta}) = \\frac{1}{\\sigma^2} X^T X $$\n现在我们为我们选择的设计矩阵 $X$ 计算 $X^T X$：\n$$ X^T X = \\begin{pmatrix} 1  1  1 \\\\ -1  -1  1 \\\\ -1  1  -1 \\end{pmatrix} \\begin{pmatrix} 1  -1  -1 \\\\ 1  -1  1 \\\\ 1  1  -1 \\end{pmatrix} = \\begin{pmatrix} 3  -1  -1 \\\\ -1  3  -1 \\\\ -1  -1  3 \\end{pmatrix} $$\n这个最小设计的费雪信息矩阵是：\n$$ I(\\boldsymbol{\\theta}) = \\frac{1}{\\sigma^2} \\begin{pmatrix} 3  -1  -1 \\\\ -1  3  -1 \\\\ -1  -1  3 \\end{pmatrix} $$\n\n最后的任务是计算这个 FIM 的行列式。使用属性 $\\det(cA) = c^k \\det(A)$，其中 $A$ 是一个 $k \\times k$ 矩阵，$c$ 是一个标量，我们有：\n$$ \\det(I(\\boldsymbol{\\theta})) = \\det\\left(\\frac{1}{\\sigma^2} X^T X\\right) = \\left(\\frac{1}{\\sigma^2}\\right)^3 \\det(X^T X) $$\n$X^T X$ 的行列式可以直接计算，或使用属性 $\\det(X^T X) = (\\det(X))^2$。我们已经求得 $\\det(X) = -4$。\n$$ \\det(X^T X) = (\\det(X))^2 = (-4)^2 = 16 $$\n或者，直接计算这个 $3 \\times 3$ 矩阵的行列式：\n$$ \\det \\begin{pmatrix} 3  -1  -1 \\\\ -1  3  -1 \\\\ -1  -1  3 \\end{pmatrix} = 3(3 \\cdot 3 - (-1)(-1)) - (-1)(-1 \\cdot 3 - (-1)(-1)) + (-1)(-1 \\cdot (-1) - 3 \\cdot (-1)) $$\n$$ = 3(9-1) + 1(-3-1) - 1(1+3) = 3(8) - 4 - 4 = 24 - 8 = 16 $$\n将这个结果代入 $\\det(I(\\boldsymbol{\\theta}))$ 的表达式中：\n$$ \\det(I(\\boldsymbol{\\theta})) = \\frac{1}{(\\sigma^2)^3} \\cdot 16 = \\frac{16}{\\sigma^6} $$\n这就是所选最小曝光子集的费雪信息矩阵的行列式。",
            "answer": "$$\\boxed{\\frac{16}{\\sigma^{6}}}$$"
        },
        {
            "introduction": "当我们拥有实验数据后，如何从中提取关于工艺参数的知识？贝叶斯逆向建模提供了一个强大的框架，不仅能估计参数的最佳值，还能量化估计的不确定性。本练习将带您深入了解贝叶斯推断的核心算法之一——Metropolis-Hastings 算法，通过推导其接受概率并完成一个数值计算，您将亲身体验从后验分布中进行抽样的过程。",
            "id": "4157871",
            "problem": "在半导体制造的设计-工艺协同优化（DTCO）中，工艺窗口优化需要已校准的关键尺寸（CD）预测模型。考虑在标称工艺点附近的一个简单的局部线性化CD观测模型，其中单个测量的CD $y$ 被建模为 $y=\\theta+\\epsilon$，其中 $\\epsilon\\sim\\mathcal{N}(0,\\sigma^{2})$，而 $\\theta$ 是一个未知的CD设置参数，单位为纳米。在贝叶斯逆向建模中，使用先验 $\\theta\\sim\\mathcal{N}(\\mu_{0},\\tau^{2})$，并通过马尔可夫链蒙特卡洛（MCMC）方法，特别是Metropolis-Hastings算法（MH），对后验进行抽样。\n\n任务1：使用贝叶斯定理和马尔可夫链的细致平衡原理，推导出一个通用的提议分布 $q(\\theta'|\\theta)$ 的Metropolis-Hastings接受概率，该概率保证后验分布 $p(\\theta|y)$ 是不变的。\n\n任务2：现在，特化为对称高斯提议分布 $q(\\theta'|\\theta)=\\mathcal{N}(\\theta,s^{2})$。假设存在以下工艺校准场景：测量的CD为 $y=34$ 纳米，已知的测量噪声标准差为 $\\sigma=1.2$ 纳米，先验均值为 $\\mu_{0}=32$ 纳米，先验标准差为 $\\tau=3$ 纳米，当前马尔可夫链状态为 $\\theta=33$ 纳米，一次提议抽样得到 $\\theta'=34.5$ 纳米。使用推导出的接受概率和这些数值，计算MH步骤的数值接受概率。将最终的接受概率数值答案四舍五入到四位有效数字。接受概率不需要物理单位。",
            "solution": "该问题分为两个任务。第一个是Metropolis-Hastings接受概率的理论推导。第二个是在半导体工艺建模的特定场景下对此概率进行数值计算。\n\n**任务1：Metropolis-Hastings接受概率的推导**\n\n马尔可夫链蒙特卡洛（MCMC）方法的目标是构建一个马尔可夫链，其平稳分布是所需的目标分布，在本问题中即后验概率分布 $p(\\theta|y)$。对于一个马尔可夫链，要使其收敛到平稳分布 $\\pi(\\theta)$，一个充分条件是其转移核 $T(\\theta'|\\theta)$（从状态 $\\theta$ 转移到 $\\theta'$ 的概率）满足细致平衡方程：\n$$\n\\pi(\\theta) T(\\theta'|\\theta) = \\pi(\\theta') T(\\theta|\\theta')\n$$\n在我们的例子中，目标分布是后验分布，因此我们记作 $\\pi(\\theta) = p(\\theta|y)$。\n\nMetropolis-Hastings算法将转移定义为一个两步过程：\n1.  **提议：** 从一个提议分布 $q(\\theta'|\\theta)$ 中抽取一个新的候选状态 $\\theta'$。\n2.  **接受/拒绝：** 以概率 $\\alpha(\\theta'|\\theta)$ 接受提议的状态 $\\theta'$。如果未被接受，则链保持在当前状态 $\\theta$。\n\n因此，对于 $\\theta' \\neq \\theta$ 的转移概率是提议概率和接受概率的乘积：\n$$\nT(\\theta'|\\theta) = q(\\theta'|\\theta) \\alpha(\\theta'|\\theta)\n$$\n将此代入细致平衡方程得到：\n$$\np(\\theta|y) q(\\theta'|\\theta) \\alpha(\\theta'|\\theta) = p(\\theta'|y) q(\\theta|\\theta') \\alpha(\\theta|\\theta')\n$$\n这可以被重新整理以表示接受概率的比率：\n$$\n\\frac{\\alpha(\\theta'|\\theta)}{\\alpha(\\theta|\\theta')} = \\frac{p(\\theta'|y) q(\\theta|\\theta')}{p(\\theta|y) q(\\theta'|\\theta)}\n$$\nMetropolis-Hastings算法选择接受概率以满足此比率，同时最大化接受率，以确保对状态空间的有效探索。这是通过设置以下公式实现的：\n$$\n\\alpha(\\theta'|\\theta) = \\min \\left( 1, \\frac{p(\\theta'|y) q(\\theta|\\theta')}{p(\\theta|y) q(\\theta'|\\theta)} \\right)\n$$\n这个选择满足细致平衡条件。\n\n接下来，我们使用贝叶斯定理，该定理指出后验概率正比于似然 $p(y|\\theta)$ 和先验 $p(\\theta)$ 的乘积：\n$$\np(\\theta|y) = \\frac{p(y|\\theta) p(\\theta)}{p(y)}\n$$\n其中 $p(y)$ 是边际似然或证据。当我们将此代入接受概率的比率时，证据项 $p(y)$ 同时出现在分子和分母中，因此被消掉：\n$$\n\\frac{p(\\theta'|y)}{p(\\theta|y)} = \\frac{p(y|\\theta')p(\\theta')/p(y)}{p(y|\\theta)p(\\theta)/p(y)} = \\frac{p(y|\\theta')p(\\theta')}{p(y|\\theta)p(\\theta)}\n$$\n因此，Metropolis-Hastings接受概率的最终表达式为：\n$$\n\\alpha(\\theta'|\\theta) = \\min \\left( 1, \\frac{p(y|\\theta') p(\\theta') q(\\theta|\\theta')}{p(y|\\theta) p(\\theta) q(\\theta'|\\theta)} \\right)\n$$\n该表达式保证了链在长期运行中将从后验分布 $p(\\theta|y)$ 中抽样。\n\n**任务2：接受概率的数值计算**\n\n对于第二个任务，我们必须在给定特定场景下计算 $\\alpha(\\theta'|\\theta)$ 的数值。\n提议分布是对称高斯分布，$q(\\theta'|\\theta) = \\mathcal{N}(\\theta, s^2)$。如果 $q(\\theta'|\\theta) = q(\\theta|\\theta')$，则分布是对称的。对于高斯提议，我们有：\n$$\nq(\\theta'|\\theta) = \\frac{1}{\\sqrt{2\\pi s^2}} \\exp\\left(-\\frac{(\\theta'-\\theta)^2}{2s^2}\\right)\n$$\n$$\nq(\\theta|\\theta') = \\frac{1}{\\sqrt{2\\pi s^2}} \\exp\\left(-\\frac{(\\theta-\\theta')^2}{2s^2}\\right)\n$$\n由于 $(\\theta'-\\theta)^2 = (\\theta-\\theta')^2$，显然 $q(\\theta'|\\theta)=q(\\theta|\\theta')$。接受概率公式中的提议项相互抵消，将表达式简化为原始Metropolis算法中使用的形式：\n$$\n\\alpha(\\theta'|\\theta) = \\min \\left( 1, \\frac{p(y|\\theta') p(\\theta')}{p(y|\\theta) p(\\theta)} \\right)\n$$\n问题给出了似然和先验的模型：\n似然：$p(y|\\theta) = \\mathcal{N}(y|\\theta, \\sigma^2) = \\frac{1}{\\sqrt{2\\pi \\sigma^2}}\\exp\\left(-\\frac{(y-\\theta)^2}{2\\sigma^2}\\right)$\n先验：$p(\\theta) = \\mathcal{N}(\\theta|\\mu_0, \\tau^2) = \\frac{1}{\\sqrt{2\\pi \\tau^2}}\\exp\\left(-\\frac{(\\theta-\\mu_0)^2}{2\\tau^2}\\right)$\n\n未归一化的后验密度的比值为：\n$$\nR = \\frac{p(y|\\theta') p(\\theta')}{p(y|\\theta) p(\\theta)} = \\frac{\\exp\\left(-\\frac{(y-\\theta')^2}{2\\sigma^2}\\right) \\exp\\left(-\\frac{(\\theta'-\\mu_0)^2}{2\\tau^2}\\right)}{\\exp\\left(-\\frac{(y-\\theta)^2}{2\\sigma^2}\\right) \\exp\\left(-\\frac{(\\theta-\\mu_0)^2}{2\\tau^2}\\right)}\n$$\n高斯PDF中的归一化常数被抵消。为了避免处理很小的数字，在数值上更稳定的是处理该比率的对数：\n$$\n\\ln(R) = \\left[ -\\frac{(y-\\theta')^2}{2\\sigma^2} - \\frac{(\\theta'-\\mu_0)^2}{2\\tau^2} \\right] - \\left[ -\\frac{(y-\\theta)^2}{2\\sigma^2} - \\frac{(\\theta-\\mu_0)^2}{2\\tau^2} \\right]\n$$\n$$\n\\ln(R) = \\frac{1}{2\\sigma^2} \\left[ (y-\\theta)^2 - (y-\\theta')^2 \\right] + \\frac{1}{2\\tau^2} \\left[ (\\theta-\\mu_0)^2 - (\\theta'-\\mu_0)^2 \\right]\n$$\n给定以下数值：\n-   测量的CD：$y = 34$\n-   噪声标准差：$\\sigma = 1.2$，所以 $\\sigma^2 = 1.44$\n-   先验均值：$\\mu_0 = 32$\n-   先验标准差：$\\tau = 3$，所以 $\\tau^2 = 9$\n-   当前状态：$\\theta = 33$\n-   提议状态：$\\theta' = 34.5$\n\n将这些值代入 $\\ln(R)$ 的表达式中：\n$$\n\\ln(R) = \\frac{1}{2(1.44)} \\left[ (34-33)^2 - (34-34.5)^2 \\right] + \\frac{1}{2(9)} \\left[ (33-32)^2 - (34.5-32)^2 \\right]\n$$\n$$\n\\ln(R) = \\frac{1}{2.88} \\left[ 1^2 - (-0.5)^2 \\right] + \\frac{1}{18} \\left[ 1^2 - (2.5)^2 \\right]\n$$\n$$\n\\ln(R) = \\frac{1}{2.88} \\left[ 1 - 0.25 \\right] + \\frac{1}{18} \\left[ 1 - 6.25 \\right]\n$$\n$$\n\\ln(R) = \\frac{0.75}{2.88} + \\frac{-5.25}{18}\n$$\n我们可以使用分数进行精确计算：\n$\\frac{0.75}{2.88} = \\frac{75}{288} = \\frac{25 \\times 3}{96 \\times 3} = \\frac{25}{96}$\n$\\frac{-5.25}{18} = \\frac{-525}{1800} = \\frac{-21 \\times 25}{72 \\times 25} = \\frac{-21}{72} = \\frac{-7 \\times 3}{24 \\times 3} = -\\frac{7}{24}$\n所以，\n$$\n\\ln(R) = \\frac{25}{96} - \\frac{7}{24} = \\frac{25}{96} - \\frac{7 \\times 4}{24 \\times 4} = \\frac{25}{96} - \\frac{28}{96} = -\\frac{3}{96} = -\\frac{1}{32}\n$$\n因此，$\\ln(R) = -1/32 = -0.03125$。比率 $R$ 为：\n$$\nR = \\exp\\left(-\\frac{1}{32}\\right) = \\exp(-0.03125) \\approx 0.96924298\n$$\n接受概率为 $\\alpha(\\theta'|\\theta) = \\min(1, R)$。由于 $R \\lt 1$，该概率等于 $R$。\n$$\n\\alpha(34.5 | 33) = 0.96924298\n$$\n将其四舍五入到四位有效数字，得到 $0.9692$。",
            "answer": "$$\n\\boxed{0.9692}\n$$"
        },
        {
            "introduction": "一个精确的工艺模型其最终价值在于指导实际的生产控制。本练习完美地将理论模型与制造实践联系起来，展示了如何利用已知的工艺参数敏感性来达成一个关键的质量指标——工艺能力指数 ($C_{pk}$)。您将学习如何计算工艺变异的传播，并反推出为了满足 $C_{pk}$ 目标，需要对上游工艺参数（如曝光剂量和焦距）的控制收紧到何种程度。",
            "id": "4157852",
            "problem": "在 $7~\\mathrm{nm}$ 技术节点中，一个光刻关键尺寸 $CD$ 通过设计-工艺协同优化（DTCO，全称为 Design-Technology Co-Optimization）和光刻机状态变量的贝叶斯逆向建模进行控制。$CD$ 的规格是双边的，其规格下限 $LSL = 19~\\mathrm{nm}$，规格上限 $USL = 21~\\mathrm{nm}$。先进过程控制（APC，全称为 Advanced Process Control）将 $CD$ 均值保持在 $20~\\mathrm{nm}$，使得两侧的规格裕量相等。晶圆厂为 $CD$ 设定了目标制程能力指数 $C_{pk}^{*} = 1.33$。\n\n一个围绕中心工作点的 DTCO 一阶局部模型通过曝光剂量 $E$ 和焦距 $F$ 的线性化来近似 $CD$ 的变化，\n$$\n\\Delta CD \\approx s_{E}\\,\\Delta E + s_{F}\\,\\Delta F,\n$$\n其灵敏度为 $s_{E} = 0.8~\\mathrm{nm}/(\\mathrm{mJ}/\\mathrm{cm}^{2})$ 和 $s_{F} = 1.5~\\mathrm{nm}/\\mathrm{nm}$。使用在线量测的贝叶斯逆向建模为 $(E,F)$ 产生了一个联合后验分布，其后验标准差为 $\\sigma_{E}^{\\mathrm{post}} = 0.5~\\mathrm{mJ}/\\mathrm{cm}^{2}$ 和 $\\sigma_{F}^{\\mathrm{post}} = 0.8~\\mathrm{nm}$，相关系数为 $\\rho = 0.3$。\n\n假设 APC 通过缩放 $(E,F)$ 的后验协方差来统一收紧过程，使得后验标准差均乘以一个公共因子 $\\gamma$，而 $\\rho$ 保持不变。仅使用基本原理和给定数据：\n- 计算所需的缩减因子 $\\gamma$，使得得到的 $CD$ 过程在保持均值 $\\mu$ 居中的同时，达到目标 $C_{pk}^{*}$。\n- 将此 $\\gamma$ 转换为 $E$ 和 $F$ 的对称 $\\pm 3\\sigma$ 控制限。\n\n将 $E$ 的控制限以 $\\mathrm{mJ}/\\mathrm{cm}^{2}$ 表示，$F$ 的控制限以 $\\mathrm{nm}$ 表示。将最终数值结果四舍五入至四位有效数字。你的最终答案必须是一个行向量，按顺序包含缩减因子 $\\gamma$、$E$ 的 $\\pm 3\\sigma$ 控制限的半宽，以及 $F$ 的 $\\pm 3\\sigma$ 控制限的半宽。",
            "solution": "用户希望我解决一个与半导体制造过程控制相关的问题，具体是找出一个过程收紧因子及其产生的控制限。\n\n### 第 1 步：问题验证\n\n我必须首先验证问题陈述。\n\n#### 提取的已知条件：\n- **过程变量**：关键尺寸， $CD$。\n- **技术节点**：$7~\\mathrm{nm}$。\n- **CD 规格**：规格下限 $LSL = 19~\\mathrm{nm}$，规格上限 $USL = 21~\\mathrm{nm}$。\n- **过程均值**：$\\mu_{CD} = 20~\\mathrm{nm}$ （居中）。\n- **目标制程能力**：$C_{pk}^{*} = 1.33$。\n- **一阶模型**：$\\Delta CD \\approx s_{E}\\,\\Delta E + s_{F}\\,\\Delta F$。\n- **模型灵敏度**：$s_{E} = 0.8~\\mathrm{nm}/(\\mathrm{mJ}/\\mathrm{cm}^{2})$，$s_{F} = 1.5~\\mathrm{nm}/\\mathrm{nm}$。\n- **初始过程变异（后验）**：\n    - 曝光剂量 $E$ 的标准差：$\\sigma_{E}^{\\mathrm{post}} = 0.5~\\mathrm{mJ}/\\mathrm{cm}^{2}$。\n    - 焦距 $F$ 的标准差：$\\sigma_{F}^{\\mathrm{post}} = 0.8~\\mathrm{nm}$。\n    - $E$ 和 $F$ 之间的相关系数：$\\rho = 0.3$。\n- **过程控制动作**：\n    - 后验标准差按一个公共因子 $\\gamma$ 缩放：$\\sigma_{E}^{\\mathrm{new}} = \\gamma \\sigma_{E}^{\\mathrm{post}}$ 和 $\\sigma_{F}^{\\mathrm{new}} = \\gamma \\sigma_{F}^{\\mathrm{post}}$。\n    - 相关系数 $\\rho$ 保持不变。\n- **要求输出**：\n    1. 缩减因子 $\\gamma$。\n    2. 缩放后 $E$ 和 $F$ 的对称 $\\pm 3\\sigma$ 控制限的半宽。\n- **格式要求**：最终数值四舍五入到四位有效数字。\n\n#### 验证结论：\n该问题具有科学依据，提法明确且客观。它基于统计过程控制（$C_{pk}$）、相关变量的线性误差传播以及半导体光刻中常用模型的标准原理。所有必要数据均已提供，没有内部矛盾或含糊不清之处。术语（DTCO、APC、贝叶斯逆向建模）是该领域的标准术语。所提供的值在物理上是合理的。因此，该问题被认为是**有效的**，可以推导出解决方案。\n\n### 第 2 步：解决方案推导\n\n解决方案将分三步推导：\n1.  计算为达到目标 $C_{pk}^{*}$ 所需的关键尺寸目标标准差 $\\sigma_{CD}^{\\mathrm{target}}$。\n2.  根据给定的过程变异计算关键尺寸的初始标准差 $\\sigma_{CD}^{\\mathrm{initial}}$，然后通过缩减因子 $\\gamma$ 将其与目标标准差关联起来。\n3.  求解 $\\gamma$，并用它来计算光刻机状态变量 $E$ 和 $F$ 的新控制限。\n\n#### 第1部分：从 $C_{pk}$ 计算目标CD标准差\n\n制程能力指数 $C_{pk}$ 定义为：\n$$\nC_{pk} = \\min\\left( \\frac{USL - \\mu}{3\\sigma}, \\frac{\\mu - LSL}{3\\sigma} \\right)\n$$\n在此问题中，变量是关键尺寸 $CD$，因此 $\\mu = \\mu_{CD}$ 且 $\\sigma = \\sigma_{CD}$。给定值为 $LSL = 19~\\mathrm{nm}$，$USL = 21~\\mathrm{nm}$，且过程中心在 $\\mu_{CD} = 20~\\mathrm{nm}$。\n\n均值到规格限的距离为：\n$$\nUSL - \\mu_{CD} = 21~\\mathrm{nm} - 20~\\mathrm{nm} = 1~\\mathrm{nm}\n$$\n$$\n\\mu_{CD} - LSL = 20~\\mathrm{nm} - 19~\\mathrm{nm} = 1~\\mathrm{nm}\n$$\n由于过程是居中的，因此 $C_{pk}$ 定义中的两项相等。我们可以将目标 $C_{pk}^{*}$ 设为这个公共值，其中 $\\sigma_{CD}^{\\mathrm{target}}$ 是 $CD$ 过程所需的标准差。\n$$\nC_{pk}^{*} = \\frac{USL - \\mu_{CD}}{3\\sigma_{CD}^{\\mathrm{target}}} = \\frac{1~\\mathrm{nm}}{3\\sigma_{CD}^{\\mathrm{target}}}\n$$\n目标 $C_{pk}^{*}$ 给定为 $1.33$。我们现在可以求解 $\\sigma_{CD}^{\\mathrm{target}}$：\n$$\n1.33 = \\frac{1}{3\\sigma_{CD}^{\\mathrm{target}}}\n$$\n$$\n\\sigma_{CD}^{\\mathrm{target}} = \\frac{1}{3 \\times 1.33} = \\frac{1}{3.99}~\\mathrm{nm}\n$$\n\n#### 第2部分：初始CD标准差及其与 $\\gamma$ 的关系\n\n关键尺寸的变化 $\\Delta CD$ 由一阶模型给出：\n$$\n\\Delta CD \\approx s_{E}\\,\\Delta E + s_{F}\\,\\Delta F\n$$\n$\\Delta CD$ 的方差（也就是 $CD$ 的方差，因为过程是居中的，即 $\\mathbb{E}[\\Delta CD]=0$）是使用两个相关随机变量 $\\Delta E$ 和 $\\Delta F$ 的线性组合的方差公式求得的：\n$$\n\\mathrm{Var}(\\Delta CD) = s_{E}^{2} \\mathrm{Var}(\\Delta E) + s_{F}^{2} \\mathrm{Var}(\\Delta F) + 2 s_{E} s_{F} \\mathrm{Cov}(\\Delta E, \\Delta F)\n$$\n$\\Delta E$ 和 $\\Delta F$ 的方差是其标准差的平方，协方差由 $\\mathrm{Cov}(\\Delta E, \\Delta F) = \\rho \\sigma_{E} \\sigma_{F}$ 给出。代入这些值，$CD$ 的初始方差为：\n$$\n(\\sigma_{CD}^{\\mathrm{initial}})^{2} = s_{E}^{2} (\\sigma_{E}^{\\mathrm{post}})^{2} + s_{F}^{2} (\\sigma_{F}^{\\mathrm{post}})^{2} + 2 s_{E} s_{F} \\rho \\sigma_{E}^{\\mathrm{post}} \\sigma_{F}^{\\mathrm{post}}\n$$\n代入给定的初始值：$s_{E} = 0.8$，$s_{F} = 1.5$，$\\sigma_{E}^{\\mathrm{post}} = 0.5$，$\\sigma_{F}^{\\mathrm{post}} = 0.8$ 以及 $\\rho = 0.3$：\n$$\n(\\sigma_{CD}^{\\mathrm{initial}})^{2} = (0.8)^{2} (0.5)^{2} + (1.5)^{2} (0.8)^{2} + 2 (0.8) (1.5) (0.3) (0.5) (0.8)\n$$\n$$\n(\\sigma_{CD}^{\\mathrm{initial}})^{2} = (0.64)(0.25) + (2.25)(0.64) + 0.288\n$$\n$$\n(\\sigma_{CD}^{\\mathrm{initial}})^{2} = 0.16 + 1.44 + 0.288 = 1.888~\\mathrm{nm}^{2}\n$$\n初始标准差为：\n$$\n\\sigma_{CD}^{\\mathrm{initial}} = \\sqrt{1.888}~\\mathrm{nm}\n$$\n先进过程控制 (APC) 通过将 $E$ 和 $F$ 的标准差乘以一个因子 $\\gamma$ 来收紧过程。新的标准差为 $\\sigma_{E}^{\\mathrm{new}} = \\gamma\\sigma_{E}^{\\mathrm{post}}$ 和 $\\sigma_{F}^{\\mathrm{new}} = \\gamma\\sigma_{F}^{\\mathrm{post}}$。收紧后过程的方差 $(\\sigma_{CD}^{\\mathrm{target}})^{2}$ 为：\n$$\n(\\sigma_{CD}^{\\mathrm{target}})^{2} = s_{E}^{2} (\\gamma\\sigma_{E}^{\\mathrm{post}})^{2} + s_{F}^{2} (\\gamma\\sigma_{F}^{\\mathrm{post}})^{2} + 2 s_{E} s_{F} \\rho (\\gamma\\sigma_{E}^{\\mathrm{post}})(\\gamma\\sigma_{F}^{\\mathrm{post}})\n$$\n提取 $\\gamma^{2}$ 因子：\n$$\n(\\sigma_{CD}^{\\mathrm{target}})^{2} = \\gamma^{2} \\left[ s_{E}^{2} (\\sigma_{E}^{\\mathrm{post}})^{2} + s_{F}^{2} (\\sigma_{F}^{\\mathrm{post}})^{2} + 2 s_{E} s_{F} \\rho \\sigma_{E}^{\\mathrm{post}} \\sigma_{F}^{\\mathrm{post}} \\right]\n$$\n$$\n(\\sigma_{CD}^{\\mathrm{target}})^{2} = \\gamma^{2} (\\sigma_{CD}^{\\mathrm{initial}})^{2}\n$$\n两边取平方根，得到标准差之间的直接关系：\n$$\n\\sigma_{CD}^{\\mathrm{target}} = \\gamma \\sigma_{CD}^{\\mathrm{initial}}\n$$\n\n#### 第3部分：计算 $\\gamma$ 和控制限\n\n我们现在可以求解缩减因子 $\\gamma$：\n$$\n\\gamma = \\frac{\\sigma_{CD}^{\\mathrm{target}}}{\\sigma_{CD}^{\\mathrm{initial}}} = \\frac{1/(3.99)}{\\sqrt{1.888}}\n$$\n$$\n\\gamma \\approx \\frac{0.25062657}{1.37404512} \\approx 0.18240005\n$$\n四舍五入到四位有效数字，缩减因子为 $\\gamma = 0.1824$。\n\n接下来，我们计算 $E$ 和 $F$ 的新标准差：\n$$\n\\sigma_{E}^{\\mathrm{new}} = \\gamma \\sigma_{E}^{\\mathrm{post}} \\approx 0.18240005 \\times 0.5~\\mathrm{mJ}/\\mathrm{cm}^{2} \\approx 0.091200025~\\mathrm{mJ}/\\mathrm{cm}^{2}\n$$\n$$\n\\sigma_{F}^{\\mathrm{new}} = \\gamma \\sigma_{F}^{\\mathrm{post}} \\approx 0.18240005 \\times 0.8~\\mathrm{nm} \\approx 0.14592004~\\mathrm{nm}\n$$\n问题要求的是对称的 $\\pm 3\\sigma$ 控制限。这对应于控制带的半宽，即 $3\\sigma^{\\mathrm{new}}$。\n对于曝光剂量 $E$，半宽为：\n$$\n3\\sigma_{E}^{\\mathrm{new}} \\approx 3 \\times 0.091200025~\\mathrm{mJ}/\\mathrm{cm}^{2} \\approx 0.273600075~\\mathrm{mJ}/\\mathrm{cm}^{2}\n$$\n四舍五入到四位有效数字，$E$ 的半宽为 $0.2736~\\mathrm{mJ}/\\mathrm{cm}^{2}$。\n\n对于焦距 $F$，半宽为：\n$$\n3\\sigma_{F}^{\\mathrm{new}} \\approx 3 \\times 0.14592004~\\mathrm{nm} \\approx 0.43776012~\\mathrm{nm}\n$$\n四舍五入到四位有效数字，$F$ 的半宽为 $0.4378~\\mathrm{nm}$。\n\n最终答案由这三个计算值组成：$\\gamma$、$E$ 的半宽和 $F$ 的半宽。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.1824 & 0.2736 & 0.4378\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
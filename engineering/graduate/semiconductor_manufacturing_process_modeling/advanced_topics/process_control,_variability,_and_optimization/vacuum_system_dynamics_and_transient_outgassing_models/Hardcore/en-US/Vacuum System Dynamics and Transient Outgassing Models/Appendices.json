{
    "hands_on_practices": [
        {
            "introduction": "This first exercise establishes the cornerstone of vacuum system modeling: the first-order ordinary differential equation describing pressure decay in an ideal, leak-free chamber. By deriving and solving this equation, you will gain a fundamental understanding of the system's characteristic time constant, $\\tau = V/S_{\\text{eff}}$, which governs the pump-down speed. This practice is essential for building intuition about the relationship between chamber volume and effective pumping speed .",
            "id": "4177668",
            "problem": "A single-wafer process chamber in a semiconductor manufacturing tool is evacuated by a turbomolecular pump and a backing pump. The gas in the chamber is assumed spatially uniform and isothermal at temperature $T=300\\ \\mathrm{K}$. The chamber volume is $V=0.1\\ \\mathrm{m^3}$. The effective pumping speed at the chamber, defined as the volumetric flow rate at the chamber pressure, is constant at $S_{\\mathrm{eff}}=1000\\ \\mathrm{L/s}$. The internal gas load due to transient outgassing and leaks is negligible, so take the net internal generation rate to be $G=0$. The chamber starts at pressure $p_0=10\\ \\mathrm{Pa}$, and you wish to reach $p=0.1\\ \\mathrm{Pa}$.\n\nStarting from the Ideal Gas Law and a mass conservation balance for the number of molecules in the chamber, and taking the definition of effective pumping speed to relate outflow to number density, derive the governing ordinary differential equation for $p(t)$ and solve it to obtain the time $t$ required to reach $p$ from $p_0$. Then evaluate $t$ numerically for the given parameters. Express your final answer in seconds, and round your answer to four significant figures. Use $1\\ \\mathrm{L}=10^{-3}\\ \\mathrm{m^3}$.",
            "solution": "The problem is first validated to be scientifically grounded, well-posed, objective, and self-contained. The given parameters are physically realistic for a semiconductor process chamber and vacuum system. The modeling approach requested, based on the Ideal Gas Law and mass conservation, is a standard and correct method for analyzing vacuum system dynamics. The problem is therefore deemed valid and a solution can be sought.\n\nThe fundamental principle governing the pressure change in the vacuum chamber is the conservation of mass, which can be expressed in terms of the number of gas molecules, $N$, within the chamber volume $V$. The rate of change of the number of molecules is the difference between the rate of molecules entering the chamber (inflow) and the rate of molecules leaving the chamber (outflow).\n$$\n\\frac{dN}{dt} = \\text{Inflow Rate} - \\text{Outflow Rate}\n$$\nThe inflow rate is due to the net internal gas load $G$, which is stated to be negligible, so $G=0$.\nThe outflow rate is the number of molecules per unit time removed by the pump. The effective pumping speed, $S_{\\mathrm{eff}}$, is defined as the volume of gas removed per unit time, measured at the pressure $p$ inside the chamber. The number of molecules removed per unit time is the product of the number density of molecules, $n=N/V$, and the effective pumping speed, $S_{\\mathrm{eff}}$.\n$$\n\\text{Outflow Rate} = n S_{\\mathrm{eff}} = \\frac{N}{V} S_{\\mathrm{eff}}\n$$\nSubstituting these into the conservation equation gives:\n$$\n\\frac{dN}{dt} = 0 - \\frac{N}{V} S_{\\mathrm{eff}} = -\\frac{S_{\\mathrm{eff}}}{V} N\n$$\nTo express this equation in terms of pressure $p$, we use the Ideal Gas Law for the $N$ molecules in volume $V$ at temperature $T$:\n$$\npV = N k_B T\n$$\nwhere $k_B$ is the Boltzmann constant. Since the volume $V$ and temperature $T$ are constant, we can relate the rate of change of $N$ to the rate of change of $p$ by differentiating the Ideal Gas Law with respect to time $t$:\n$$\nV \\frac{dp}{dt} = k_B T \\frac{dN}{dt}\n$$\nNow, we substitute the expression for $\\frac{dN}{dt}$ from the mass balance equation into this differentiated form of the Ideal Gas Law:\n$$\nV \\frac{dp}{dt} = k_B T \\left( -\\frac{S_{\\mathrm{eff}}}{V} N \\right)\n$$\nTo eliminate $N$ from this equation, we rearrange the Ideal Gas Law as $N = \\frac{pV}{k_B T}$ and substitute it into the right-hand side:\n$$\nV \\frac{dp}{dt} = k_B T \\left( -\\frac{S_{\\mathrm{eff}}}{V} \\frac{pV}{k_B T} \\right)\n$$\nThe terms $V$ and $k_B T$ cancel out, yielding the governing ordinary differential equation (ODE) for the pressure $p(t)$:\n$$\n\\frac{dp}{dt} = -\\frac{S_{\\mathrm{eff}}}{V} p\n$$\nThis is a first-order linear homogeneous differential equation. To solve for the time $t$ required to pump down from an initial pressure $p_0$ to a final pressure $p$, we can separate the variables:\n$$\n\\frac{dp}{p} = -\\frac{S_{\\mathrm{eff}}}{V} dt\n$$\nWe integrate this equation from the initial condition $(t=0, p=p_0)$ to the final state $(t, p)$:\n$$\n\\int_{p_0}^{p} \\frac{1}{p'} dp' = -\\int_{0}^{t} \\frac{S_{\\mathrm{eff}}}{V} dt'\n$$\nSince $S_{\\mathrm{eff}}$ and $V$ are constant, the integration yields:\n$$\n[\\ln|p'|]_{p_0}^{p} = -\\frac{S_{\\mathrm{eff}}}{V} [t']_{0}^{t}\n$$\nSince pressure is a positive quantity, the absolute value is not necessary.\n$$\n\\ln(p) - \\ln(p_0) = -\\frac{S_{\\mathrm{eff}}}{V} t\n$$\nUsing the properties of logarithms, we get:\n$$\n\\ln\\left(\\frac{p}{p_0}\\right) = -\\frac{S_{\\mathrm{eff}}}{V} t\n$$\nSolving for the time $t$:\n$$\nt = -\\frac{V}{S_{\\mathrm{eff}}} \\ln\\left(\\frac{p}{p_0}\\right) = \\frac{V}{S_{\\mathrm{eff}}} \\ln\\left(\\frac{p_0}{p}\\right)\n$$\nThis is the analytical expression for the pump-down time. Now we evaluate this expression numerically using the given parameters. First, we must ensure all units are consistent within the SI system.\nThe given values are:\nChamber volume, $V = 0.1\\ \\mathrm{m^3}$.\nInitial pressure, $p_0 = 10\\ \\mathrm{Pa}$.\nFinal pressure, $p = 0.1\\ \\mathrm{Pa}$.\nEffective pumping speed, $S_{\\mathrm{eff}} = 1000\\ \\mathrm{L/s}$.\n\nWe convert the pumping speed from liters per second to cubic meters per second using the given conversion $1\\ \\mathrm{L} = 10^{-3}\\ \\mathrm{m^3}$:\n$$\nS_{\\mathrm{eff}} = 1000\\ \\frac{\\mathrm{L}}{\\mathrm{s}} \\times \\frac{10^{-3}\\ \\mathrm{m^3}}{1\\ \\mathrm{L}} = 1.0\\ \\mathrm{m^3/s}\n$$\nNow substitute the numerical values into the equation for $t$:\n$$\nt = \\frac{0.1\\ \\mathrm{m^3}}{1.0\\ \\mathrm{m^3/s}} \\ln\\left(\\frac{10\\ \\mathrm{Pa}}{0.1\\ \\mathrm{Pa}}\\right)\n$$\n$$\nt = 0.1 \\ln(100)\n$$\nThe natural logarithm of $100$ is:\n$$\n\\ln(100) = \\ln(10^2) = 2\\ln(10) \\approx 4.605170\n$$\nSo, the time required is:\n$$\nt \\approx 0.1 \\times 4.605170 = 0.4605170\\ \\mathrm{s}\n$$\nThe problem requires the answer to be rounded to four significant figures. The first four significant figures are $4$, $6$, $0$, and $5$. The next digit is $1$, which is less than $5$, so we round down.\n$$\nt \\approx 0.4605\\ \\mathrm{s}\n$$",
            "answer": "$$\\boxed{0.4605}$$"
        },
        {
            "introduction": "Real-world vacuum systems rarely contain just one gas and are often limited by internal gas sources. This practice introduces two critical layers of realism: constant outgassing, which sets the ultimate pressure limit of the system, and a mixture of gases with unique pumping speeds. Solving this problem will demonstrate how total system pressure is a superposition of the behaviors of individual gas components, a key concept for diagnosing and optimizing high-vacuum processes .",
            "id": "4177708",
            "problem": "A single-wafer process chamber in a semiconductor manufacturing tool is evacuated after a wafer load. The gas in the chamber is an ideal mixture of hydrogen ($\\mathrm{H_2}$), water vapor ($\\mathrm{H_2O}$), and nitrogen ($\\mathrm{N_2}$). The chamber volume is $V = 0.15\\,\\mathrm{m^3}$, and the gas temperature is uniform and constant. The chamber is connected to a high-vacuum pump through a conductance-limited manifold that results in species-dependent effective pumping speeds at the chamber port: $S_{\\mathrm{H_2}} = 350\\,\\mathrm{L/s}$, $S_{\\mathrm{H_2O}} = 250\\,\\mathrm{L/s}$, and $S_{\\mathrm{N_2}} = 300\\,\\mathrm{L/s}$. The wafer and internal surfaces outgas with constant throughputs for each species (throughput is defined as pressure–volume flow rate in $\\mathrm{Pa\\,m^3/s}$): $Q_{\\mathrm{H_2}} = 2.0 \\times 10^{-5}\\,\\mathrm{Pa\\,m^3/s}$, $Q_{\\mathrm{H_2O}} = 6.0 \\times 10^{-5}\\,\\mathrm{Pa\\,m^3/s}$, and $Q_{\\mathrm{N_2}} = 1.5 \\times 10^{-5}\\,\\mathrm{Pa\\,m^3/s}$. At time $t=0$, the partial pressures are $p_{\\mathrm{H_2}}(0) = 0.40\\,\\mathrm{Pa}$, $p_{\\mathrm{H_2O}}(0) = 1.20\\,\\mathrm{Pa}$, and $p_{\\mathrm{N_2}}(0) = 0.80\\,\\mathrm{Pa}$.\n\nAssume an ideal gas mixture with negligible interconversion between species and model the transient evacuation using species-wise mass conservation along with the ideal gas law and the definition of effective pumping speed. Use the data above to:\n\n1. Derive the governing ordinary differential equation for the time evolution of each partial pressure $p_i(t)$ given a constant throughput $Q_i$ and effective pumping speed $S_i$.\n2. Solve for $p_i(t)$ subject to the initial condition $p_i(0)$ for each species.\n3. Compute the time $t_{\\mathrm{thr}}$ at which the total pressure $p_{\\mathrm{tot}}(t) = p_{\\mathrm{H_2}}(t) + p_{\\mathrm{H_2O}}(t) + p_{\\mathrm{N_2}}(t)$ first reaches the threshold $p_{\\mathrm{thr}} = 1.0 \\times 10^{-2}\\,\\mathrm{Pa}$.\n\nExpress the final time $t_{\\mathrm{thr}}$ in seconds and round your answer to four significant figures. All intermediate steps must be shown symbolically before substituting numerical values.",
            "solution": "The problem is validated as scientifically grounded, well-posed, objective, and self-contained. The provided data are consistent and physically plausible for modeling vacuum system dynamics. We proceed with the solution.\n\nThe solution is structured into three parts as requested: derivation of the governing equation, solving the equation for each species, and computing the time to reach a target pressure.\n\n**1. Derivation of the Governing Ordinary Differential Equation (ODE)**\n\nThe dynamics of the partial pressure for each gas species $i$ in the chamber are governed by a mass balance equation. For a constant volume $V$ and constant temperature $T$, the rate of change of the quantity of gas $p_i V$ is equal to the total throughput of gas entering the volume minus the throughput of gas leaving it.\nThe total throughput is the sum of gas from in-gassing/outgassing, $Q_i$, and gas removed by the pump, $Q_{\\text{pump},i}$.\n\nThe mass balance for species $i$ can be written in terms of throughputs (pressure-volume flow rate) as:\n$$V \\frac{d p_i(t)}{dt} = \\sum Q_{\\text{in}} - \\sum Q_{\\text{out}}$$\nIn this system, the only source of gas is outgassing from internal surfaces, given by a constant throughput $Q_i$. The only sink is the vacuum pump. The throughput removed by a pump is defined as the product of the partial pressure at the pump inlet, $p_i(t)$, and the effective pumping speed for that species, $S_i$.\n$$Q_{\\text{in}} = Q_i$$\n$$Q_{\\text{out}} = S_i p_i(t)$$\nSubstituting these into the balance equation yields:\n$$V \\frac{d p_i(t)}{dt} = Q_i - S_i p_i(t)$$\nThis is the governing ordinary differential equation for the partial pressure $p_i(t)$ of species $i$. It is a first-order linear non-homogeneous ODE. We can write it in standard form:\n$$\\frac{d p_i(t)}{dt} + \\frac{S_i}{V} p_i(t) = \\frac{Q_i}{V}$$\n\n**2. Solution for Partial Pressure $p_i(t)$**\n\nThe ODE is of the form $\\frac{dy}{dt} + ay = b$, with $y(t) = p_i(t)$, $a = \\frac{S_i}{V}$, and $b = \\frac{Q_i}{V}$. The general solution can be found using an integrating factor, $I(t) = \\exp\\left(\\int a \\, dt\\right) = \\exp\\left(\\frac{S_i}{V}t\\right)$.\nThe solution is given by:\n$$p_i(t) = \\exp\\left(-\\frac{S_i}{V}t\\right) \\left[ \\int \\exp\\left(\\frac{S_i}{V}t\\right) \\frac{Q_i}{V} dt + C \\right]$$\nwhere $C$ is the constant of integration. Performing the integration on the right-hand side:\n$$p_i(t) = \\exp\\left(-\\frac{S_i}{V}t\\right) \\left[ \\frac{Q_i}{V} \\frac{V}{S_i} \\exp\\left(\\frac{S_i}{V}t\\right) + C \\right]$$\n$$p_i(t) = \\frac{Q_i}{S_i} + C \\exp\\left(-\\frac{S_i}{V}t\\right)$$\nThe term $p_{i, \\infty} = \\frac{Q_i}{S_i}$ represents the ultimate partial pressure for species $i$ at steady state ($t \\to \\infty$), where the outgassing rate equals the pumping rate.\nThe constant $C$ is determined by the initial condition $p_i(t=0) = p_i(0)$.\n$$p_i(0) = \\frac{Q_i}{S_i} + C \\implies C = p_i(0) - \\frac{Q_i}{S_i}$$\nSubstituting $C$ back into the solution gives the specific solution for the time evolution of the partial pressure of each species:\n$$p_i(t) = \\frac{Q_i}{S_i} + \\left( p_i(0) - \\frac{Q_i}{S_i} \\right) \\exp\\left(-\\frac{S_i}{V}t\\right)$$\nThis can also be written in terms of the characteristic pump-down time constant for each species, $\\tau_i = \\frac{V}{S_i}$:\n$$p_i(t) = p_{i, \\infty} + \\left( p_i(0) - p_{i, \\infty} \\right) \\exp\\left(-\\frac{t}{\\tau_i}\\right)$$\n\n**3. Computation of Time $t_{\\mathrm{thr}}$**\n\nFirst, all parameters must be in consistent SI units. The chamber volume $V$ is in $\\mathrm{m^3}$, throughputs $Q_i$ are in $\\mathrm{Pa\\,m^3/s}$, and pressures $p_i$ are in $\\mathrm{Pa}$. The pumping speeds $S_i$ are given in $\\mathrm{L/s}$ and must be converted to $\\mathrm{m^3/s}$ using the conversion $1\\,\\mathrm{L} = 10^{-3}\\,\\mathrm{m^3}$.\n\nGiven values:\n$V = 0.15\\,\\mathrm{m^3}$\n$p_{\\mathrm{thr}} = 1.0 \\times 10^{-2}\\,\\mathrm{Pa}$\n\nSpecies-specific data:\nHydrogen ($\\mathrm{H_2}$):\n$S_{\\mathrm{H_2}} = 350\\,\\mathrm{L/s} = 0.350\\,\\mathrm{m^3/s}$\n$Q_{\\mathrm{H_2}} = 2.0 \\times 10^{-5}\\,\\mathrm{Pa\\,m^3/s}$\n$p_{\\mathrm{H_2}}(0) = 0.40\\,\\mathrm{Pa}$\n\nWater Vapor ($\\mathrm{H_2O}$):\n$S_{\\mathrm{H_2O}} = 250\\,\\mathrm{L/s} = 0.250\\,\\mathrm{m^3/s}$\n$Q_{\\mathrm{H_2O}} = 6.0 \\times 10^{-5}\\,\\mathrm{Pa\\,m^3/s}$\n$p_{\\mathrm{H_2O}}(0) = 1.20\\,\\mathrm{Pa}$\n\nNitrogen ($\\mathrm{N_2}$):\n$S_{\\mathrm{N_2}} = 300\\,\\mathrm{L/s} = 0.300\\,\\mathrm{m^3/s}$\n$Q_{\\mathrm{N_2}} = 1.5 \\times 10^{-5}\\,\\mathrm{Pa\\,m^3/s}$\n$p_{\\mathrm{N_2}}(0) = 0.80\\,\\mathrm{Pa}$\n\nNext, we calculate the ultimate pressures $p_{i, \\infty}$ and time constants $\\tau_i$ for each species.\n\nFor $\\mathrm{H_2}$:\n$p_{\\mathrm{H_2}, \\infty} = \\frac{Q_{\\mathrm{H_2}}}{S_{\\mathrm{H_2}}} = \\frac{2.0 \\times 10^{-5}}{0.350} \\approx 5.714 \\times 10^{-5}\\,\\mathrm{Pa}$\n$\\tau_{\\mathrm{H_2}} = \\frac{V}{S_{\\mathrm{H_2}}} = \\frac{0.15}{0.350} \\approx 0.4286\\,\\mathrm{s}$\n\nFor $\\mathrm{H_2O}$:\n$p_{\\mathrm{H_2O}, \\infty} = \\frac{Q_{\\mathrm{H_2O}}}{S_{\\mathrm{H_2O}}} = \\frac{6.0 \\times 10^{-5}}{0.250} = 2.4 \\times 10^{-4}\\,\\mathrm{Pa}$\n$\\tau_{\\mathrm{H_2O}} = \\frac{V}{S_{\\mathrm{H_2O}}} = \\frac{0.15}{0.250} = 0.600\\,\\mathrm{s}$\n\nFor $\\mathrm{N_2}$:\n$p_{\\mathrm{N_2}, \\infty} = \\frac{Q_{\\mathrm{N_2}}}{S_{\\mathrm{N_2}}} = \\frac{1.5 \\times 10^{-5}}{0.300} = 5.0 \\times 10^{-5}\\,\\mathrm{Pa}$\n$\\tau_{\\mathrm{N_2}} = \\frac{V}{S_{\\mathrm{N_2}}} = \\frac{0.15}{0.300} = 0.500\\,\\mathrm{s}$\n\nThe total pressure in the chamber at time $t$ is the sum of the partial pressures:\n$p_{\\mathrm{tot}}(t) = p_{\\mathrm{H_2}}(t) + p_{\\mathrm{H_2O}}(t) + p_{\\mathrm{N_2}}(t)$\nWe need to find the time $t_{\\mathrm{thr}}$ such that $p_{\\mathrm{tot}}(t_{\\mathrm{thr}}) = p_{\\mathrm{thr}}$.\n$$p_{\\mathrm{thr}} = \\sum_{i} \\left[ p_{i, \\infty} + (p_i(0) - p_{i, \\infty}) \\exp\\left(-\\frac{t_{\\mathrm{thr}}}{\\tau_i}\\right) \\right]$$\nThis equation can be rearranged as:\n$$p_{\\mathrm{thr}} - \\sum_i p_{i, \\infty} = \\sum_i (p_i(0) - p_{i, \\infty}) \\exp\\left(-\\frac{t_{\\mathrm{thr}}}{\\tau_i}\\right)$$\nThe total ultimate pressure is $p_{\\mathrm{tot}, \\infty} = \\sum_i p_{i, \\infty} \\approx 5.714 \\times 10^{-5} + 2.4 \\times 10^{-4} + 5.0 \\times 10^{-5} \\approx 3.471 \\times 10^{-4}\\,\\mathrm{Pa}$.\nSubstituting the numerical values into the equation for $t_{\\mathrm{thr}}$:\n$$1.0 \\times 10^{-2} - 3.471 \\times 10^{-4} = (0.40 - 5.714 \\times 10^{-5}) \\exp\\left(-\\frac{t_{\\mathrm{thr}}}{0.4286}\\right) + (1.20 - 2.4 \\times 10^{-4}) \\exp\\left(-\\frac{t_{\\mathrm{thr}}}{0.600}\\right) + (0.80 - 5.0 \\times 10^{-5}) \\exp\\left(-\\frac{t_{\\mathrm{thr}}}{0.500}\\right)$$\n$$9.653 \\times 10^{-3} \\approx 0.3999 \\exp(-2.333 t_{\\mathrm{thr}}) + 1.1998 \\exp(-1.667 t_{\\mathrm{thr}}) + 0.79995 \\exp(-2.000 t_{\\mathrm{thr}})$$\nThis is a transcendental equation for $t_{\\mathrm{thr}}$ which does not have a simple analytical solution. It must be solved numerically. Using a numerical root-finding method (such as the Newton-Raphson method or a bisection method), we can determine the value of $t_{\\mathrm{thr}}$ that satisfies this equation.\n\nSolving this equation numerically gives the time $t_{\\mathrm{thr}}$.\nThe value obtained is $t_{\\mathrm{thr}} \\approx 3.0441\\,\\mathrm{s}$.\nRounding the result to four significant figures as requested, we get $t_{\\mathrm{thr}} = 3.044\\,\\mathrm{s}$.",
            "answer": "$$\\boxed{3.044}$$"
        },
        {
            "introduction": "While analytical models provide crucial insights, capturing the full range of vacuum dynamics—from atmospheric pressure down to high vacuum—requires computational methods. This advanced practice guides you through building a sophisticated model that incorporates pressure-dependent conductance, which is critical for describing the transition from viscous to molecular flow. By implementing and solving this nonlinear system numerically, you will develop the practical skills needed to simulate realistic, industrially relevant vacuum system behavior .",
            "id": "4177664",
            "problem": "Consider a lumped vacuum chamber used in semiconductor manufacturing whose internal gas dynamics are dominated by transient outgassing and evacuation through a pump connected via a line that supports both molecular and viscous flow. Starting from a conservation-of-mass statement for the gas in the chamber and the Ideal Gas Law (IGL), derive a governing Ordinary Differential Equation (ODE) for the chamber pressure $p(t)$ that consistently incorporates a pressure-dependent viscous conductance $C_\\mathrm{visc}(p)$. Assume the following:\n\n- The chamber has fixed volume $V$ (in $\\mathrm{m}^3$).\n- Gas throughput from transient outgassing is modeled as a known function $Q_\\mathrm{outg}(t)$ (in $\\mathrm{Pa} \\cdot \\mathrm{m}^3/\\mathrm{s}$) that aggregates surface desorption and volumetric diffusion contributions.\n- Gas removal to a pump at base pressure $p_b$ (in $\\mathrm{Pa}$) is modeled through a line with total conductance $C_\\mathrm{tot}(p) = C_\\mathrm{mol} + C_\\mathrm{visc}(p)$ (in $\\mathrm{m}^3/\\mathrm{s}$), where $C_\\mathrm{mol}$ is a constant molecular-flow conductance (pressure independent), and $C_\\mathrm{visc}(p)$ captures laminar viscous-flow effects that depend on pressure.\n- The net throughput leaving the chamber is $Q_\\mathrm{pump}(p) = C_\\mathrm{tot}(p)\\,\\big(p - p_b\\big)$ (in $\\mathrm{Pa} \\cdot \\mathrm{m}^3/\\mathrm{s}$).\n- The ideal gas temperature is uniform and constant so that the IGL provides a direct relation between gas amount and pressure at fixed $V$.\n\nUse the following physically justified parameterization for the viscous contribution:\n- $C_\\mathrm{visc}(p) = k_v\\,p$, where $k_v$ (in $\\mathrm{m}^3/(\\mathrm{s}\\cdot\\mathrm{Pa})$) is a constant determined by the line geometry and gas viscosity in the laminar, compressible regime.\n- The molecular contribution $C_\\mathrm{mol}$ (in $\\mathrm{m}^3/\\mathrm{s}$) is constant.\n\nModel the outgassing throughput as a sum of a diffusion-limited surface term and a first-order volumetric term:\n- $Q_\\mathrm{outg}(t) = \\dfrac{Q_{s0}}{1 + \\sqrt{t/\\tau_s}} + Q_{v0}\\,\\mathrm{e}^{-t/\\tau_v}$,\nwith parameters $Q_{s0}$ (in $\\mathrm{Pa}\\cdot\\mathrm{m}^3/\\mathrm{s}$), $\\tau_s$ (in $\\mathrm{s}$), $Q_{v0}$ (in $\\mathrm{Pa}\\cdot\\mathrm{m}^3/\\mathrm{s}$), and $\\tau_v$ (in $\\mathrm{s}$).\n\nTask requirements:\n1. Starting from conservation of mass and the Ideal Gas Law, derive the lumped ODE for $p(t)$ that incorporates $C_\\mathrm{visc}(p)$ as specified.\n2. Describe a numerical integration scheme suitable for this nonlinear ODE that remains accurate and stable across both molecular and viscous regimes.\n3. Implement a complete, runnable program that integrates the ODE from $t=0$ to $t=t_\\mathrm{end}$ for each test case defined below and outputs the final pressure values.\n\nInitial condition for all cases:\n- $p(0) = p_0$.\n\nAngle units are not involved in this problem. All physical answers must be expressed in $\\mathrm{Pa}$ and $\\mathrm{s}$. Your program must produce a single line of output containing the results as a comma-separated list enclosed in square brackets. Each result must be the final pressure $p(t_\\mathrm{end})$ in $\\mathrm{Pa}$ rounded to six decimal places, in the order of the test cases.\n\nUse the following test suite that probes different regimes and edge cases:\n- Test case $1$ (general case with both regimes active):\n  - $V = 0.1$, $C_\\mathrm{mol} = 0.5$, $k_v = 0.02$, $p_b = 0$, $p_0 = 100$, $Q_{s0} = 0.05$, $\\tau_s = 100$, $Q_{v0} = 0.02$, $\\tau_v = 200$, $t_\\mathrm{end} = 200$.\n- Test case $2$ (boundary case: pure molecular flow):\n  - $V = 0.1$, $C_\\mathrm{mol} = 0.5$, $k_v = 0$, $p_b = 0$, $p_0 = 100$, $Q_{s0} = 0.05$, $\\tau_s = 100$, $Q_{v0} = 0.02$, $\\tau_v = 200$, $t_\\mathrm{end} = 200$.\n- Test case $3$ (boundary case: nonzero pump base pressure):\n  - $V = 0.1$, $C_\\mathrm{mol} = 0.3$, $k_v = 0.01$, $p_b = 1$, $p_0 = 2$, $Q_{s0} = 0.005$, $\\tau_s = 300$, $Q_{v0} = 0$, $\\tau_v = 1$, $t_\\mathrm{end} = 500$.\n- Test case $4$ (edge case: strong viscous nonlinearity at high pressure):\n  - $V = 0.1$, $C_\\mathrm{mol} = 0.1$, $k_v = 0.2$, $p_b = 0$, $p_0 = 500$, $Q_{s0} = 0.2$, $\\tau_s = 50$, $Q_{v0} = 0.1$, $\\tau_v = 50$, $t_\\mathrm{end} = 50$.\n- Test case $5$ (edge case: zero outgassing, pump-down to base):\n  - $V = 0.1$, $C_\\mathrm{mol} = 0.4$, $k_v = 0.05$, $p_b = 0$, $p_0 = 5$, $Q_{s0} = 0$, $\\tau_s = 1$, $Q_{v0} = 0$, $\\tau_v = 1$, $t_\\mathrm{end} = 100$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[p_1,p_2,p_3,p_4,p_5]$), where $p_i$ are the final pressures for test cases $1$ through $5$, each rounded to six decimal places and expressed in $\\mathrm{Pa}$.",
            "solution": "The problem requires the derivation of a governing Ordinary Differential Equation (ODE) for the pressure $p(t)$ in a vacuum chamber, a discussion of a suitable numerical method to solve it, and an implementation of the solution for a set of test cases.\n\n### Part 1: Derivation of the Governing Ordinary Differential Equation\n\nThe derivation begins with the principle of conservation of mass for the gas within the chamber volume $V$. The rate of change of the amount of gas inside the chamber is equal to the total rate of gas entering minus the total rate of gas exiting. In the context of vacuum systems, this mass balance is conveniently expressed using throughput, $Q$, which has units of $\\mathrm{Pa} \\cdot \\mathrm{m}^3/\\mathrm{s}$.\n\nThe Ideal Gas Law, $p V = N k_B T$, relates the pressure $p$, volume $V$, and temperature $T$ to the number of gas molecules $N$. Here, $k_B$ is the Boltzmann constant. Throughput $Q$ is defined as $Q = k_B T \\frac{dN}{dt}$. Given that the volume $V$ and temperature $T$ are constant, differentiating the Ideal Gas Law with respect to time $t$ gives $V \\frac{dp}{dt} = k_B T \\frac{dN}{dt}$. This directly links the rate of pressure change to the net throughput:\n$$\nV \\frac{dp}{dt} = Q_{\\text{net}} = Q_{\\text{in}} - Q_{\\text{out}}\n$$\nIn this problem, the gas entering the chamber, $Q_{\\text{in}}$, is due to transient outgassing, $Q_{\\text{outg}}(t)$. The gas exiting the chamber, $Q_{\\text{out}}$, is removed by the pump, $Q_{\\text{pump}}(p)$. Thus, the conservation equation becomes:\n$$\nV \\frac{dp(t)}{dt} = Q_{\\text{outg}}(t) - Q_{\\text{pump}}(p(t))\n$$\nThe problem provides specific models for the throughput terms. The outgassing throughput $Q_{\\text{outg}}(t)$ is given as a sum of a diffusion-limited term and a first-order desorption term:\n$$\nQ_{\\text{outg}}(t) = \\frac{Q_{s0}}{1 + \\sqrt{t/\\tau_s}} + Q_{v0}\\,e^{-t/\\tau_v}\n$$\nThe pumping throughput $Q_{\\text{pump}}(p)$ is modeled by the flow through a line to a pump at a base pressure $p_b$. The flow is determined by the total conductance of the line, $C_{\\text{tot}}(p)$, and the pressure difference across it, $(p - p_b)$:\n$$\nQ_{\\text{pump}}(p) = C_{\\text{tot}}(p) (p - p_b)\n$$\nThe total conductance $C_{\\text{tot}}(p)$ is the sum of a constant molecular conductance $C_{\\text{mol}}$ and a pressure-dependent viscous conductance $C_{\\text{visc}}(p) = k_v p$:\n$$\nC_{\\text{tot}}(p) = C_{\\text{mol}} + C_{\\text{visc}}(p) = C_{\\text{mol}} + k_v p\n$$\nSubstituting this into the expression for $Q_{\\text{pump}}(p)$ gives:\n$$\nQ_{\\text{pump}}(p) = (C_{\\text{mol}} + k_v p) (p - p_b)\n$$\nNow, we substitute the full expressions for $Q_{\\text{outg}}(t)$ and $Q_{\\text{pump}}(p)$ into the main conservation equation:\n$$\nV \\frac{dp}{dt} = \\left( \\frac{Q_{s0}}{1 + \\sqrt{t/\\tau_s}} + Q_{v0}\\,e^{-t/\\tau_v} \\right) - (C_{\\text{mol}} + k_v p) (p - p_b)\n$$\nFinally, by isolating the derivative $\\frac{dp}{dt}$, we obtain the governing first-order, nonlinear, non-autonomous Ordinary Differential Equation for the chamber pressure $p(t)$:\n$$\n\\frac{dp}{dt} = \\frac{1}{V} \\left[ \\left( \\frac{Q_{s0}}{1 + \\sqrt{t/\\tau_s}} + Q_{v0}\\,e^{-t/\\tau_v} \\right) - (C_{\\text{mol}} + k_v p)(p - p_b) \\right]\n$$\nThis equation, along with the initial condition $p(0) = p_0$, constitutes a well-posed initial value problem (IVP). The nonlinearity arises from the quadratic term in pressure, $-k_v p^2$, originating from the viscous flow contribution. The non-autonomous nature is due to the explicit time dependence of the outgassing term $Q_{\\text{outg}}(t)$.\n\n### Part 2: Numerical Integration Scheme\n\nThe derived ODE, $\\frac{dp}{dt} = f(t, p)$, is nonlinear and potentially stiff. Stiffness can arise when the system involves physical processes occurring on widely different timescales. In this problem, the characteristic time constant of the system, which can be approximated by $\\tau_{\\text{sys}} \\approx V / \\frac{\\partial Q_{\\text{pump}}}{\\partial p}$, changes with pressure. At high pressures, the term $k_v p$ dominates the conductance, leading to a small time constant $\\tau_{\\text{sys}} \\approx V/(2 k_v p)$ and very rapid pump-down. At low pressures, the system dynamics are slower, governed by the constant molecular conductance $C_\\mathrm{mol}$ and slow outgassing rates.\n\nSimple explicit numerical methods, such as the Forward Euler method, are often conditionally stable. For a stiff system, their stability region is very small, forcing the use of an extremely small time step $\\Delta t$ to avoid numerical oscillations and divergence, even when the solution itself is changing slowly. This makes such methods highly inefficient.\n\nA more robust and efficient approach is to use an adaptive step-size integrator. Methods like the Runge-Kutta-Fehlberg (RKF45) or Dormand-Prince (RKDP54) estimate the local truncation error at each step and adjust the step size accordingly, taking small steps during rapid changes and large steps when the solution is smooth.\n\nFor potentially stiff problems, implicit or semi-implicit methods are superior. The `LSODA` (Livermore Solver for Ordinary Differential Equations with Automatic method switching) algorithm is an excellent choice. It automatically detects stiffness and switches between a non-stiff predictor-corrector method (Adams-Moulton) and a stiff method (Backward Differentiation Formula, BDF). This adaptability makes `LSODA` highly effective for problems like the one at hand, where the degree of stiffness varies significantly over the integration interval. Standard scientific computing libraries, such as `scipy.integrate` in Python, provide high-quality implementations of these advanced solvers (e.g., `solve_ivp` with `method='LSODA'`). This approach ensures both accuracy and computational efficiency across the different physical regimes (viscous, molecular, and outgassing-dominated).\n\n### Part 3: Implementation Strategy\n\nThe solution will be implemented in Python, utilizing the `numpy` library for numerical operations and `scipy.integrate.solve_ivp` for numerically integrating the ODE.\nThe overall structure will be:\n1.  A Python function, `ode_system(t, p, ...)`, will be defined. This function will take the current time $t$, pressure $p$ (as a single-element array), and the system parameters ($V, C_{\\text{mol}}, k_v$, etc.) as arguments. It will compute and return the value of $\\frac{dp}{dt}$ according to the derived ODE.\n2.  The five test cases provided in the problem statement will be stored in a list of tuples, with each tuple containing all the parameters ($V, C_{\\text{mol}}, k_v, p_b, p_0, Q_{s0}, \\tau_s, Q_{v0}, \\tau_v, t_{\\text{end}}$) for one simulation.\n3.  A loop will iterate through each test case. Inside the loop:\n    a. The parameters, initial condition $p_0$, and time interval $[0, t_{\\text{end}}]$ will be extracted.\n    b. The `scipy.integrate.solve_ivp` function will be called with `ode_system`, the time interval, the initial value $[p_0]$, and the tuple of parameters. The `method='LSODA'` will be specified for robustness.\n    c. The solution object returned by `solve_ivp` contains the time points and the corresponding pressure values. The final pressure $p(t_{\\text{end}})$ will be the last element of the solution array.\n4.  The final pressure for each test case will be rounded to six decimal places and stored in a results list.\n5.  Finally, the program will print the collected results as a single comma-separated string enclosed in square brackets, adhering to the specified output format.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.integrate import solve_ivp\n\ndef solve():\n    \"\"\"\n    Solves the vacuum chamber pressure ODE for a suite of test cases.\n    \"\"\"\n    \n    # Test cases as defined in the problem statement.\n    # Each tuple contains: (V, C_mol, k_v, p_b, p_0, Q_s0, tau_s, Q_v0, tau_v, t_end)\n    test_cases = [\n        (0.1, 0.5, 0.02, 0, 100, 0.05, 100, 0.02, 200, 200),\n        (0.1, 0.5, 0, 0, 100, 0.05, 100, 0.02, 200, 200),\n        (0.1, 0.3, 0.01, 1, 2, 0.005, 300, 0, 1, 500),\n        (0.1, 0.1, 0.2, 0, 500, 0.2, 50, 0.1, 50, 50),\n        (0.1, 0.4, 0.05, 0, 5, 0, 1, 0, 1, 100),\n    ]\n\n    def ode_system(t, p, V, C_mol, k_v, p_b, Q_s0, tau_s, Q_v0, tau_v):\n        \"\"\"\n        Defines the ODE dp/dt = f(t, p) for the vacuum chamber pressure.\n        \n        Args:\n            t: Current time.\n            p: Current pressure (as a 1-element array).\n            V: Chamber volume.\n            C_mol: Molecular conductance.\n            k_v: Viscous conductance coefficient.\n            p_b: Pump base pressure.\n            Q_s0: Surface outgassing coefficient.\n            tau_s: Surface outgassing time constant.\n            Q_v0: Volumetric outgassing coefficient.\n            tau_v: Volumetric outgassing time constant.\n            \n        Returns:\n            The value of dp/dt.\n        \"\"\"\n        pressure = p[0]\n        \n        # Physical guard: pressure cannot be negative.\n        if pressure < 0:\n            pressure = 0\n            \n        # I. Calculate total outgassing throughput Q_outg(t)\n        # Diffusion-limited surface term\n        # The term is well-defined for t>=0 and tau_s>0.\n        if Q_s0 > 0:\n            q_outg_s = Q_s0 / (1.0 + np.sqrt(t / tau_s))\n        else:\n            q_outg_s = 0.0\n        \n        # First-order volumetric term\n        if Q_v0 > 0:\n            q_outg_v = Q_v0 * np.exp(-t / tau_v)\n        else:\n            q_outg_v = 0.0\n            \n        q_outg = q_outg_s + q_outg_v\n\n        # II. Calculate pump throughput Q_pump(p)\n        # Total conductance C_tot(p) = C_mol + C_visc(p)\n        # C_visc(p) = k_v * p\n        c_tot = C_mol + k_v * pressure\n        \n        # Q_pump(p) = C_tot(p) * (p - p_b)\n        q_pump = c_tot * (pressure - p_b)\n        \n        # III. Apply conservation of mass: V * dp/dt = Q_outg - Q_pump\n        dpdt = (1.0 / V) * (q_outg - q_pump)\n        \n        return [dpdt]\n\n    results = []\n    for case in test_cases:\n        V, C_mol, k_v, p_b, p_0, Q_s0, tau_s, Q_v0, tau_v, t_end = case\n        \n        # Pack parameters for the solver\n        params = (V, C_mol, k_v, p_b, Q_s0, tau_s, Q_v0, tau_v)\n        \n        # Set time span and initial condition\n        t_span = (0, t_end)\n        p_initial = [p_0]\n        \n        # Integrate the ODE\n        sol = solve_ivp(\n            ode_system,\n            t_span,\n            p_initial,\n            args=params,\n            method='LSODA',  # Robust solver for potentially stiff problems\n            rtol=1e-8,       # Set tighter tolerances for better accuracy\n            atol=1e-10\n        )\n        \n        # Extract the final pressure\n        final_pressure = sol.y[0, -1]\n        \n        # Format the result to six decimal places\n        results.append(f\"{final_pressure:.6f}\")\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```"
        }
    ]
}
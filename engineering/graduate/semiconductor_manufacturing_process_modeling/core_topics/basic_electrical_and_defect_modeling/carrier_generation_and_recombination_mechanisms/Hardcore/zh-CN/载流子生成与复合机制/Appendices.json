{
    "hands_on_practices": [
        {
            "introduction": "理解辐射复合与非辐射复合之间的竞争，是设计高效光电器件（如发光二极管, LED）的关键。本练习将通过一个具体案例，带你直接实践如何运用描述三种主要复合机制的“ABC”模型来计算器件的内量子效率（IQE）。通过推导和计算，你将直观地理解材料参数（如载流子寿命和复合系数）及注入水平如何共同决定器件的核心性能。",
            "id": "4112530",
            "problem": "考虑一个直接带隙发光二极管（LED），其在稳态下工作，有源区内有均匀的双载流子注入，因此电子和空穴密度满足 $n = p$，并在整个有源区体积内空间均匀，值为 $n$。假设有源区中三种主要的载流子复合机制是：通过带隙中陷阱的肖克利-里德-霍尔（SRH）复合、带间辐射复合和俄歇复合。设SRH机制由一个有效的肖克利-里德-霍尔寿命 $\\tau_{\\mathrm{SRH}}$ 表征，辐射过程由一个双分子系数 $B$ 表征，俄歇过程由一个有效的三粒子系数 $C$ 表征。忽略光子再吸收和光耦合输出效应，因此每个辐射复合的电子-空穴对都会产生一个内部发射的光子。\n\n利用稳态载流子连续性原理，即有源区中的净产生率等于总复合率，并仅使用在 $n=p$ 条件下三种机制的复合率密度的公认函数形式，从第一性原理推导出一个内部量子效率（IQE）的闭式表达式，记为 $\\eta_{\\mathrm{int}}$。内部量子效率定义为辐射性电子-空穴复合事件占总复合事件的比例，并将其表示为 $B$、$C$、$\\tau_{\\mathrm{SRH}}$ 和注入水平 $n$ 的函数。\n\n然后，对于以下代表高注入水平下 III–V 族 LED 有源区的物理上现实的参数值，数值计算 $\\eta_{\\mathrm{int}}$：$B = 1.0 \\times 10^{-11}\\,\\mathrm{cm}^{3}\\,\\mathrm{s}^{-1}$，$C = 1.0 \\times 10^{-30}\\,\\mathrm{cm}^{6}\\,\\mathrm{s}^{-1}$，$\\tau_{\\mathrm{SRH}} = 1.0 \\times 10^{-7}\\,\\mathrm{s}$，以及 $n = 2.0 \\times 10^{18}\\,\\mathrm{cm}^{-3}$。将最终的数值IQE四舍五入到四位有效数字，并以无单位的小数形式表示。",
            "solution": "问题陈述经验证具有科学依据、提法恰当、客观且完整。它描述了半导体光电子学中的一个标准情景——使用已建立的ABC模型分析LED的内部量子效率。所有参数均以物理上现实的数值和一致的单位给出。我现在将进行推导和计算。\n\n此问题的核心原理是稳态载流子连续性方程。在稳态下，载流子总复合率必须与净产生率相平衡。问题指定了注入下的均匀载流子密度，这意味着在整个有源区体积内有一个均匀的产生率 $G$。单位体积的总复合率 $R_{\\mathrm{total}}$ 是三种指定机制速率的总和：肖克利-里德-霍尔（SRH）复合、带间辐射复合和俄歇复合。\n\n设 $R_{\\mathrm{SRH}}$、$R_{\\mathrm{rad}}$ 和 $R_{\\mathrm{Aug}}$ 分别为SRH过程、辐射过程和俄歇过程的复合率密度（单位体积单位时间内的事件数）。总复合率密度为：\n$$\nR_{\\mathrm{total}} = R_{\\mathrm{SRH}} + R_{\\mathrm{rad}} + R_{\\mathrm{Aug}}\n$$\n在稳态下，$G = R_{\\mathrm{total}}$。\n\n我们现在建立在给定的双载流子注入条件下，即电子浓度 $n$ 等于空穴浓度 $p$ 时，每种复合机制的公认函数形式。\n\n1.  **肖克利-里德-霍尔（SRH）复合**：这种非辐射过程通过半导体带隙内的缺陷态或陷阱发生。其速率与过剩载流子浓度成正比。对于高注入水平，其中 $n \\approx p \\gg n_i$（本征载流子浓度），过剩载流子浓度约等于 $n$。速率由下式给出：\n    $$\n    R_{\\mathrm{SRH}} = \\frac{n}{\\tau_{\\mathrm{SRH}}}\n    $$\n    其中 $\\tau_{\\mathrm{SRH}}$ 是有效的SRH寿命。此项常写为 $An$，其中 $A = 1/\\tau_{\\mathrm{SRH}}$ 是SRH系数。\n\n2.  **带间辐射复合**：这是LED中的理想过程，其中导带中的一个电子与价带中的一个空穴复合，并释放一个光子。这是一个双分子过程，因此其速率与电子和空穴浓度的乘积成正比：\n    $$\n    R_{\\mathrm{rad}} = Bnp\n    $$\n    在 $n=p$ 的条件下，这简化为：\n    $$\n    R_{\\mathrm{rad}} = B n^2\n    $$\n    其中 $B$ 是双分子复合系数。\n\n3.  **俄歇复合**：这是一种非辐射性的三粒子过程。一个电子和一个空穴复合，但能量被转移给第三个载流子（电子或空穴），使其被激发到更高的能态。一般速率为 $R_{\\mathrm{Aug}} = C_n n^2 p + C_p n p^2$。在 $n=p$ 的条件下，并使用一个有效的俄歇系数 $C$（其中 $C$ 隐含地结合了电子和空穴介导的过程），速率为：\n    $$\n    R_{\\mathrm{Aug}} = C n^3\n    $$\n\n总复合率密度是这三种速率的总和：\n$$\nR_{\\mathrm{total}} = \\frac{n}{\\tau_{\\mathrm{SRH}}} + B n^2 + C n^3\n$$\n\n内部量子效率 $\\eta_{\\mathrm{int}}$ 定义为辐射复合事件占总复合事件的比例。这是辐射复合率与总复合率的比值：\n$$\n\\eta_{\\mathrm{int}} = \\frac{R_{\\mathrm{rad}}}{R_{\\mathrm{total}}}\n$$\n代入速率的表达式，我们推导出 $\\eta_{\\mathrm{int}}$ 作为给定参数的函数的闭式表达式：\n$$\n\\eta_{\\mathrm{int}}(n) = \\frac{B n^2}{\\frac{n}{\\tau_{\\mathrm{SRH}}} + B n^2 + C n^3}\n$$\n通过将分子和分母同除以 $n$，此表达式可以进行代数简化：\n$$\n\\eta_{\\mathrm{int}}(n) = \\frac{B n}{\\frac{1}{\\tau_{\\mathrm{SRH}}} + B n + C n^2}\n$$\n这就是所要求的内部量子效率的闭式表达式。\n\n接下来，我们使用给定的参数值对 $\\eta_{\\mathrm{int}}$ 进行数值计算：\n$B = 1.0 \\times 10^{-11}\\,\\mathrm{cm}^{3}\\,\\mathrm{s}^{-1}$\n$C = 1.0 \\times 10^{-30}\\,\\mathrm{cm}^{6}\\,\\mathrm{s}^{-1}$\n$\\tau_{\\mathrm{SRH}} = 1.0 \\times 10^{-7}\\,\\mathrm{s}$\n$n = 2.0 \\times 10^{18}\\,\\mathrm{cm}^{-3}$\n\n我们将分别计算每种复合率密度的值。\n\nSRH 速率：\n$$\nR_{\\mathrm{SRH}} = \\frac{n}{\\tau_{\\mathrm{SRH}}} = \\frac{2.0 \\times 10^{18}\\,\\mathrm{cm}^{-3}}{1.0 \\times 10^{-7}\\,\\mathrm{s}} = 2.0 \\times 10^{25}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}\n$$\n\n辐射速率：\n$$\nR_{\\mathrm{rad}} = B n^2 = (1.0 \\times 10^{-11}\\,\\mathrm{cm}^{3}\\,\\mathrm{s}^{-1}) \\times (2.0 \\times 10^{18}\\,\\mathrm{cm}^{-3})^2\n$$\n$$\nR_{\\mathrm{rad}} = (1.0 \\times 10^{-11}) \\times (4.0 \\times 10^{36})\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1} = 4.0 \\times 10^{25}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}\n$$\n\n俄歇速率：\n$$\nR_{\\mathrm{Aug}} = C n^3 = (1.0 \\times 10^{-30}\\,\\mathrm{cm}^{6}\\,\\mathrm{s}^{-1}) \\times (2.0 \\times 10^{18}\\,\\mathrm{cm}^{-3})^3\n$$\n$$\nR_{\\mathrm{Aug}} = (1.0 \\times 10^{-30}) \\times (8.0 \\times 10^{54})\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1} = 8.0 \\times 10^{24}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}\n$$\n\n现在，我们计算总复合率密度：\n$$\nR_{\\mathrm{total}} = R_{\\mathrm{SRH}} + R_{\\mathrm{rad}} + R_{\\mathrm{Aug}}\n$$\n$$\nR_{\\mathrm{total}} = (2.0 \\times 10^{25} + 4.0 \\times 10^{25} + 8.0 \\times 10^{24})\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}\n$$\n$$\nR_{\\mathrm{total}} = (2.0 \\times 10^{25} + 4.0 \\times 10^{25} + 0.8 \\times 10^{25})\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1} = 6.8 \\times 10^{25}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}\n$$\n\n最后，我们计算内部量子效率：\n$$\n\\eta_{\\mathrm{int}} = \\frac{R_{\\mathrm{rad}}}{R_{\\mathrm{total}}} = \\frac{4.0 \\times 10^{25}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}}{6.8 \\times 10^{25}\\,\\mathrm{cm}^{-3}\\,\\mathrm{s}^{-1}} = \\frac{4.0}{6.8} = \\frac{40}{68} = \\frac{10}{17}\n$$\n其小数值为：\n$$\n\\eta_{\\mathrm{int}} \\approx 0.58823529...\n$$\n按要求四舍五入到四位有效数字，我们得到：\n$$\n\\eta_{\\mathrm{int}} \\approx 0.5882\n$$",
            "answer": "$$\n\\boxed{0.5882}\n$$"
        },
        {
            "introduction": "在掌握了如何计算复合率之后，一个更基本也更具挑战性的任务是确定在给定载流子产生率下，半导体内的实际载流子浓度。本练习将引导你从解析计算进入数值建模的世界，你需要建立稳态连续性方程，并利用数值方法求解这个非线性方程。成功解决这个问题意味着你能够预测半导体在光照下的关键电学特性，例如准费米能级的分裂，这直接决定了器件的电学和光学行为。",
            "id": "4112479",
            "problem": "考虑一个均匀光照下的长一维硅片，该硅片处于稳态，其空间梯度和表面复合可忽略不计，因此空间电流散度为零。以电子和空穴的连续性方程为基本出发点，即电子连续性方程为 $$\\frac{\\partial n}{\\partial t} = G_n - R_n + \\frac{1}{q}\\nabla \\cdot \\mathbf{J}_n$$，空穴连续性方程为 $$\\frac{\\partial p}{\\partial t} = G_p - R_p - \\frac{1}{q}\\nabla \\cdot \\mathbf{J}_p$$ 其中 $n$ 是电子浓度，$p$ 是空穴浓度，$G_n$ 和 $G_p$ 是产生率，$R_n$ 和 $R_p$ 是复合率，$q$ 是元电荷，$\\mathbf{J}_n$ 和 $\\mathbf{J}_p$ 分别是电子和空穴电流密度。在所述条件下，设 $\\nabla \\cdot \\mathbf{J}_n = 0$ 和 $\\nabla \\cdot \\mathbf{J}_p = 0$, 并且只考虑均匀的光生电子-空穴对，因此 $$G_n = G_p = G_{\\mathrm{op}}$$ 在稳态下，$\\partial n/\\partial t = 0$ 且 $\\partial p/\\partial t = 0$, 这意味着 $$G_{\\mathrm{op}} = R(n,p),$$ 其中 $$R(n,p)$$ 是单位体积的总复合率。\n\n使用经过充分检验的形式，将总复合率 $$R(n,p)$$ 建模为 Shockley-Read-Hall (SRH)、辐射复合和俄歇复合机制的总和。假设存在单一的带隙中央陷阱，因此 SRH 复合使用 $$n_1 = p_1 = n_i$$，其中 $$n_i$$ 是本征载流子浓度。具体使用以下公式：\n$$R_{\\mathrm{SRH}}(n,p) = \\frac{n p - n_i^2}{\\tau_p (n + n_1) + \\tau_n (p + p_1)},$$\n$$R_{\\mathrm{rad}}(n,p) = B \\left(n p - n_i^2\\right),$$\n$$R_{\\mathrm{Auger}}(n,p) = \\left(C_n n + C_p p\\right)\\left(n p - n_i^2\\right),$$\n且 $$R(n,p) = R_{\\mathrm{SRH}}(n,p) + R_{\\mathrm{rad}}(n,p) + R_{\\mathrm{Auger}}(n,p).$$\n\n假设掺杂剂完全电离，并利用电中性原理和质量作用定律来确定光照前暗态下的平衡载流子浓度。设净掺雜浓度为 $$N_{\\mathrm{net}} = N_D - N_A$$，其中 $$N_D$$ 是施主浓度，$$N_A$$ 是受主浓度。在平衡状态下，$$n_0 p_0 = n_i^2$$ 且 $$n_0 - p_0 = N_{\\mathrm{net}}$$，这决定了 $$n_0$$ 和 $$p_0$$。在稳态下的均匀光生电子-空穴对作用下，假设电子和空穴的过剩载流子相等，即设 $$\\Delta n = \\Delta p = \\Delta$$，因此有 $$n = n_0 + \\Delta$$ 和 $$p = p_0 + \\Delta$$。通过求解 $$G_{\\mathrm{op}} = R(n_0 + \\Delta, p_0 + \\Delta)$$ 来找到 $$\\Delta$$。\n\n一旦确定了 $$n$$ 和 $$p$$，计算电子和空穴相对于本征能级 $$E_i$$ 的准费米能级：\n$$E_{F_n} - E_i = k_B T \\ln\\left(\\frac{n}{n_i}\\right), \\quad E_{F_p} - E_i = - k_B T \\ln\\left(\\frac{p}{n_i}\\right),$$\n其中 $$k_B$$ 是玻尔兹曼常数，$$T$$ 是绝对温度。能量以电子伏特 (eV) 表示。\n\n你的任务是编写一个完整的、可运行的程序，对于每个指定的测试用例，数值求解满足 $$G_{\\mathrm{op}} = R(n_0 + \\Delta, p_0 + \\Delta)$$ 的 $$\\Delta$$，然后计算 $$E_{F_n} - E_i$$ 和 $$E_{F_p} - E_i$$。使用一种不依赖于闭式解捷径的稳健求根策略。所有物理单位必须一致处理：浓度单位为 $$\\mathrm{cm^{-3}}$$，速率单位为 $$\\mathrm{cm^{-3}\\,s^{-1}}$$，寿命单位为 $$\\mathrm{s}$$，辐射系数单位为 $$\\mathrm{cm^{3}\\,s^{-1}}$$，俄歇系数单位为 $$\\mathrm{cm^{6}\\,s^{-1}}$$，温度单位为 $$\\mathrm{K}$$，能量单位为 $$\\mathrm{eV}$$。报告 $$E_{F_n} - E_i$$ 和 $$E_{F_p} - E_i$$ 的值，单位为 $$\\mathrm{eV}$$，每个值四舍五入到六位小数。\n\n使用以电子伏特每开尔文为单位的玻尔兹曼常数：$k_B = 8.617333262145\\times 10^{-5}\\,\\mathrm{eV/K}.$\n\n测试套件（每个用例提供 $T$, $n_i$, $N_D$, $N_A$, $\\tau_n$, $\\tau_p$, $B$, $C_n$, $C_p$, $G_{\\mathrm{op}}$）：\n$1.$ 一般低注入、中等掺杂 $p$ 型：$T=300\\,\\mathrm{K}$, $n_i=1.0\\times 10^{10}\\,\\mathrm{cm^{-3}}$, $N_D=0\\,\\mathrm{cm^{-3}}$, $N_A=1.0\\times 10^{16}\\,\\mathrm{cm^{-3}}$, $\\tau_n=1.0\\times 10^{-6}\\,\\mathrm{s}$, $\\tau_p=1.0\\times 10^{-6}\\,\\mathrm{s}$, $B=1.0\\times 10^{-14}\\,\\mathrm{cm^{3}\\,s^{-1}}$, $C_n=2.8\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $C_p=9.9\\times 10^{-32}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $G_{\\mathrm{op}}=5.0\\times 10^{20}\\,\\mathrm{cm^{-3}\\,s^{-1}}$.\n$2.$ 高注入、非对称寿命 $n$ 型：$T=300\\,\\mathrm{K}$, $n_i=1.0\\times 10^{10}\\,\\mathrm{cm^{-3}}$, $N_D=1.0\\times 10^{15}\\,\\mathrm{cm^{-3}}$, $N_A=0\\,\\mathrm{cm^{-3}}$, $\\tau_n=1.0\\times 10^{-6}\\,\\mathrm{s}$, $\\tau_p=2.0\\times 10^{-6}\\,\\mathrm{s}$, $B=1.0\\times 10^{-14}\\,\\mathrm{cm^{3}\\,s^{-1}}$, $C_n=2.8\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $C_p=1.0\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $G_{\\mathrm{op}}=1.0\\times 10^{23}\\,\\mathrm{cm^{-3}\\,s^{-1}}$.\n$3.$ 重掺杂、俄歇复合主导 $n$ 型：$T=300\\,\\mathrm{K}$, $n_i=1.0\\times 10^{10}\\,\\mathrm{cm^{-3}}$, $N_D=1.0\\times 10^{18}\\,\\mathrm{cm^{-3}}$, $N_A=0\\,\\mathrm{cm^{-3}}$, $\\tau_n=1.0\\times 10^{-5}\\,\\mathrm{s}$, $\\tau_p=1.0\\times 10^{-5}\\,\\mathrm{s}$, $B=1.0\\times 10^{-15}\\,\\mathrm{cm^{3}\\,s^{-1}}$, $C_n=2.8\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $C_p=1.0\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $G_{\\mathrm{op}}=1.0\\times 10^{22}\\,\\mathrm{cm^{-3}\\,s^{-1}}$.\n$4.$ 近暗态边界情况、轻掺杂、长寿命 $p$ 型：$T=300\\,\\mathrm{K}$, $n_i=1.0\\times 10^{10}\\,\\mathrm{cm^{-3}}$, $N_D=0\\,\\mathrm{cm^{-3}}$, $N_A=1.0\\times 10^{15}\\,\\mathrm{cm^{-3}}$, $\\tau_n=1.0\\times 10^{-4}\\,\\mathrm{s}$, $\\tau_p=1.0\\times 10^{-4}\\,\\mathrm{s}$, $B=1.0\\times 10^{-14}\\,\\mathrm{cm^{3}\\,s^{-1}}$, $C_n=2.8\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $C_p=1.0\\times 10^{-31}\\,\\mathrm{cm^{6}\\,s^{-1}}$, $G_{\\mathrm{op}}=1.0\\times 10^{5}\\,\\mathrm{cm^{-3}\\,s^{-1}}$.\n\n你的程序應生成单行输出，其中包含用方括号括起来的逗号分隔列表形式的结果。每个测试用例的结果是一个列表 $[E_{F_n} - E_i, E_{F_p} - E_i]$，单位为 $\\mathrm{eV}$，每个值四舍五入到六位小数。因此，总输出必须是 $[[x_1,y_1],[x_2,y_2],[x_3,y_3],[x_4,y_4]]$ 的形式，不含空格。",
            "solution": "该问题要求计算在稳态下均匀光照的半导体片中电子和空穴的准费米能级。解决方案涉及数值求解一个关于过剩载流子浓度的非线性方程，该方程源于基本的半导体物理原理。\n\n出发点是所提供的载流子连续性方程对：\n$$\n\\frac{\\partial n}{\\partial t} = G_n - R_n + \\frac{1}{q}\\nabla \\cdot \\mathbf{J}_n \\\\\n\\frac{\\partial p}{\\partial t} = G_p - R_p - \\frac{1}{q}\\nabla \\cdot \\mathbf{J}_p\n$$\n在稳态 ($$\\partial/\\partial t = 0$$)、均匀光照 ($$G_n = G_p = G_{\\mathrm{op}}$$) 和可忽略的空间梯度 ($$\\nabla \\cdot \\mathbf{J} = 0$$) 的指定条件下，这些方程简化为单个平衡方程：\n$$\nG_{\\mathrm{op}} = R(n,p)\n$$\n其中 $$R(n,p)$$ 是总净复合率，它是 Shockley-Read-Hall ($$R_{\\mathrm{SRH}}$$)、辐射 ($$R_{\\mathrm{rad}}$$) 和俄歇 ($$R_{\\mathrm{Auger}}$$) 复合率的总和。\n\n第一步是确定光照前（暗态下）半导体中的平衡载流子浓度 $$n_0$$ 和 $$p_0$$。这些浓度由净掺杂浓度 $$N_{\\mathrm{net}} = N_D - N_A$$ 和本征载流子浓度 $$n_i$$ 通过电中性原理和质量作用定律确定：\n$$\nn_0 - p_0 = N_{\\mathrm{net}} \\\\\nn_0 p_0 = n_i^2\n$$\n将 $$p_0 = n_0 - N_{\\mathrm{net}}$$ 代入质量作用定律，得到关于 $$n_0$$ 的一元二次方程：\n$$\nn_0(n_0 - N_{\\mathrm{net}}) = n_i^2 \\implies n_0^2 - N_{\\mathrm{net}} n_0 - n_i^2 = 0\n$$\n$$n_0$$ 的物理有效解（必须为正）由二次公式给出：\n$$\nn_0 = \\frac{N_{\\mathrm{net}} + \\sqrt{N_{\\mathrm{net}}^2 + 4n_i^2}}{2}\n$$\n一旦计算出 $$n_0$$，$$p_0$$ 就由 $$p_0 = n_i^2 / n_0$$ 确定。\n\n在均匀光产生下，会产生电子-空穴对。我们不一定假设满足低注入条件，但我们确实假设过剩电子浓度 $$\\Delta n$$ 等于过剩空穴浓度 $$\\Delta p$$。设这个过剩浓度为 $$\\Delta = \\Delta n = \\Delta p$$。那么光照下的总载流子浓度为：\n$$\nn = n_0 + \\Delta \\\\\np = p_0 + \\Delta\n$$\n问题的核心是找到满足穩态平衡方程 $$G_{\\mathrm{op}} = R(n,p)$$ 的 $$\\Delta$$ 值。总复合率 $$R$$ 是 $$\\Delta$$ 的函数：\n$$\nR(\\Delta) = R_{\\mathrm{SRH}}(\\Delta) + R_{\\mathrm{rad}}(\\Delta) + R_{\\mathrm{Auger}}(\\Delta)\n$$\n各分量速率用 $$n$$ 和 $$p$$ 表示：\n$$\nR_{\\mathrm{SRH}} = \\frac{np - n_i^2}{\\tau_p(n + n_1) + \\tau_n(p + p_1)} \\\\\nR_{\\mathrm{rad}} = B(np - n_i^2) \\\\\nR_{\\mathrm{Auger}} = (C_n n + C_p p)(np - n_i^2)\n$$\n对于单个带隙中央陷阱能级，我们有 $$n_1 = p_1 = n_i$$。通过代入 $$n = n_0 + \\Delta$$ 和 $$p = p_0 + \\Delta$$，可以简化 $$np - n_i^2$$ 项：\n$$\nnp - n_i^2 = (n_0 + \\Delta)(p_0 + \\Delta) - n_i^2 = n_0 p_0 + \\Delta(n_0 + p_0) + \\Delta^2 - n_i^2\n$$\n由于 $$n_0 p_0 = n_i^2$$，该项简化为：\n$$\nnp - n_i^2 = \\Delta(n_0 + p_0 + \\Delta)\n$$\n将这些表达式代入平衡方程，得到关于 $$\\Delta$$ 的单个非线性方程：\n$$\nG_{\\mathrm{op}} = \\left( \\frac{1}{\\tau_p(n_0+\\Delta+n_i) + \\tau_n(p_0+\\Delta+n_i)} + B + C_n(n_0+\\Delta) + C_p(p_0+\\Delta) \\right) \\times \\Delta(n_0+p_0+\\Delta)\n$$\n这个方程 $$G_{\\mathrm{op}} = R(\\Delta)$$ 没有直接的 $$\\Delta$$ 解析解。因此，必须进行数值求解。我们定义一个函数 $$f(\\Delta) = R(\\Delta) - G_{\\mathrm{op}}$$ 并寻找根 $$\\Delta \\ge 0$$ 使得 $$f(\\Delta) = 0$$。对于 $$\\Delta \\ge 0$$，复合率 $$R(\\Delta)$$ 是一个单调递增函数，且 $$R(0) = 0$$。因此，对于任何 $$G_{\\mathrm{op}} \\ge 0$$，都存在一个唯一的非负根 $$\\Delta$$。可以采用稳健的数值求根算法，例如 Brent 方法。该方法需要为根确定一个区间。由于 $$f(0) = -G_{\\mathrm{op}} \\le 0$$ 并且对于足够大的 $$\\Delta$$，$$f(\\Delta) > 0$$，我们可以使用像 $$[0, \\Delta_{\\mathrm{max}}]$$ 这样的区间，其中 $$\\Delta_{\\mathrm{max}}$$ 是一个物理上合理的上限（例如，$$10^{21}\\,\\mathrm{cm^{-3}}$$）。\n\n一旦数值求解器找到 $$\\Delta$$，就可以计算出总载流子浓度 $$n$$ 和 $$p$$。利用这些值，使用所提供的公式计算相对于本征费米能级 $$E_i$$ 的电子和空穴准费米能级：\n$$\nE_{F_n} - E_i = k_B T \\ln\\left(\\frac{n}{n_i}\\right) \\\\\nE_{F_p} - E_i = -k_B T \\ln\\left(\\frac{p}{n_i}\\right)\n$$\n这里，$$k_B$$ 是以 $$\\mathrm{eV/K}$$ 为单位的玻尔兹曼常数，$$T$$ 是以开尔文为单位的温度，结果以电子伏特 (eV) 为单位。将对提供的每个测试用例实施计算。在整个计算过程中，保持指定单位（$$\\mathrm{cm^{-3}}$$、$$\\mathrm{s}$$ 等）的一致使用。",
            "answer": "```python\nimport numpy as np\nfrom scipy.optimize import root_scalar\n\ndef solve():\n    \"\"\"\n    Solves for the quasi-Fermi levels in a semiconductor slab under illumination\n    for a series of test cases.\n    \"\"\"\n\n    k_B = 8.617333262145e-5  # eV/K\n\n    test_cases = [\n        # T, ni, ND, NA, tau_n, tau_p, B, Cn, Cp, G_op\n        (300, 1.0e10, 0, 1.0e16, 1.0e-6, 1.0e-6, 1.0e-14, 2.8e-31, 9.9e-32, 5.0e20),\n        (300, 1.0e10, 1.0e15, 0, 1.0e-6, 2.0e-6, 1.0e-14, 2.8e-31, 1.0e-31, 1.0e23),\n        (300, 1.0e10, 1.0e18, 0, 1.0e-5, 1.0e-5, 1.0e-15, 2.8e-31, 1.0e-31, 1.0e22),\n        (300, 1.0e10, 0, 1.0e15, 1.0e-4, 1.0e-4, 1.0e-14, 2.8e-31, 1.0e-31, 1.0e5),\n    ]\n\n    all_results = []\n    \n    for case in test_cases:\n        T, ni, ND, NA, tau_n, tau_p, B, Cn, Cp, G_op = case\n\n        # Step 1: Calculate equilibrium carrier concentrations n0 and p0\n        N_net = ND - NA\n        n0 = 0.5 * (N_net + np.sqrt(N_net**2 + 4 * ni**2))\n        p0 = ni**2 / n0\n\n        # Step 2: Define the function f(delta) = R(delta) - G_op for root finding\n        def total_recombination_minus_G(delta, n0, p0, ni, tau_n, tau_p, B, Cn, Cp, G_op):\n            if delta  0:\n                # Excess concentration cannot be negative. Return a large positive value\n                # to guide solver away from this region if it strays.\n                return 1e30\n\n            # Calculate total concentrations\n            n = n0 + delta\n            p = p0 + delta\n            \n            # The common term in all recombination mechanisms\n            np_minus_ni2 = delta * (n0 + p0 + delta)\n\n            # SRH recombination rate (with n1 = p1 = ni for mid-gap traps)\n            R_srh_denom = tau_p * (n + ni) + tau_n * (p + ni)\n            # Avoid division by zero, although physically R_srh_denom is always positive\n            if R_srh_denom == 0:\n                R_srh = 0.0\n            else:\n                R_srh = np_minus_ni2 / R_srh_denom\n\n            # Radiative recombination rate\n            R_rad = B * np_minus_ni2\n\n            # Auger recombination rate\n            R_auger = (Cn * n + Cp * p) * np_minus_ni2\n            \n            # Total recombination rate\n            R_total = R_srh + R_rad + R_auger\n            \n            return R_total - G_op\n\n        # Step 3: Numerically solve for delta\n        # The bracket [0, 1e21] is a safe range for delta. f(0) is -G_op  0.\n        # f(1e21) will be very large and positive.\n        sol = root_scalar(\n            total_recombination_minus_G,\n            args=(n0, p0, ni, tau_n, tau_p, B, Cn, Cp, G_op),\n            method='brentq',\n            bracket=[0, 1e21] \n        )\n        delta = sol.root\n\n        # Step 4: Calculate total carrier concentrations under illumination\n        n = n0 + delta\n        p = p0 + delta\n\n        # Step 5: Calculate quasi-Fermi levels relative to Ei\n        kBT = k_B * T\n        E_Fn_Ei = kBT * np.log(n / ni)\n        E_Fp_Ei = -kBT * np.log(p / ni)\n        \n        # Format and append results\n        case_result = [round(E_Fn_Ei, 6), round(E_Fp_Ei, 6)]\n        all_results.append(case_result)\n\n    # Final print statement in the exact required format\n    # Example format: [[x1,y1],[x2,y2]]\n    result_str = \",\".join([f\"[{res[0]},{res[1]}]\" for res in all_results])\n    print(f\"[{result_str}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "除了复合过程，载流子产生机制同样至关重要，尤其是在高电场下驱动的雪崩击穿等现象中。本练习将我们的视角从正向建模（根据模型预测行为）转向逆向建模（根据数据确定模型参数），模拟了器件工程师从实验数据中提取物理模型参数的真实工作流程。通过对一个场致产生模型进行数据拟合，你将获得数据线性化、回归分析和模型有效性评估的实践经验，这些都是模型校准与验证中的核心技能。",
            "id": "4112497",
            "problem": "考虑半导体中的一种高场载流子产生机制，其中产生（碰撞电离或场致隧穿）系数 $\\,\\alpha\\,$ 依赖于电场 $\\,E\\,$，并表现出与势垒降低物理学一致的对电场倒数的指数敏感性。对于足够大的 $\\,E\\,$，产生系数的对数可以近似为电场倒数的线性函数。从场辅助势垒穿越和隧穿的公认物理原理出发，开发一种算法，该算法在给定击穿附近的测量数据对 $\\,\\{(E_i,\\alpha_i)\\}\\,$ 的情况下，估算表征指数依赖性的两个参数，并确定一个电场 $\\,E\\,$ 的有效范围，在该范围内模型与数据在指定容差内保持一致。\n\n使用的基本原理：\n- 强电场下的势垒穿越和隧穿概率可以使用半经典论证进行近似，这导致了对适当缩放的电场倒数的指数依赖性。这意味着在高场区域，$\\,\\ln\\alpha\\,$可以被视为近似与$\\,1/E\\,$呈线性关系。\n- 对线性化关系使用普通最小二乘法是在存在测量噪声的情况下估计线性模型系数的一种经过充分检验的方法。\n\n你的程序必须：\n1. 接受提供的测量数据集测试套件（无用户输入；将其硬编码）。\n2. 对于每个数据集：\n   - 将 $\\,\\{(E_i,\\alpha_i)\\}\\,$ 转换为变量 $\\,x_i = 1/E_i\\,$ 和 $\\,y_i = \\ln(\\alpha_i)\\,$。\n   - 使用最小二乘法拟合一条直线 $\\,y_i \\approx c + m x_i\\,$。通过 $\\,A = \\exp(c)\\,$ 和 $\\,B = -m\\,$，将拟合参数解释为原始指数模型的系数 $\\,A\\,$ 和 $\\,B\\,$，并确保 $\\,A  0\\,$。\n   - 计算残差 $\\,r_i = y_i - (c + m x_i)\\,$。\n   - 定义一个容差 $\\,\\tau\\,$（以自然对数为单位），并确定按 $\\,E\\,$ 排序后数据中最大的连续数据块，使得该块中所有点的 $\\,|r_i| \\le \\tau\\,$。如果多个数据块长度相同，则选择块内平均绝对残差 $\\,\\frac{1}{N}\\sum |r_i|\\,$ 最小的那个。使用所选块中最小和最大的 $\\,E\\,$ 报告有效范围 $\\,[E_{\\min},E_{\\max}]\\,$。\n3. 对于每个数据集，输出拟合的 $\\,A\\,$（单位 $\\mathrm{m}^{-1}$）、$\\,B\\,$（单位 $\\mathrm{V}/\\mathrm{m}$）以及有效范围边界 $\\,E_{\\min}\\,$ 和 $\\,E_{\\max}\\,$（单位 $\\mathrm{V}/\\mathrm{m}$），均为浮点数并四舍五入至六位有效数字。\n\n测试套件（每个案例都是一个测量数据对 $\\,\\{(E_i,\\alpha_i)\\}\\,$ 的列表；$\\,E\\,$ 单位为 $\\mathrm{V}/\\mathrm{m}$，$\\,\\alpha\\,$ 单位为 $\\mathrm{m}^{-1}$）：\n- 案例1（类硅材料，高场雪崩区）：\n  - $E$: $[1.8\\times 10^7,\\; 2.0\\times 10^7,\\; 2.2\\times 10^7,\\; 2.5\\times 10^7,\\; 3.0\\times 10^7]$\n  - $\\alpha$: $[4.96367\\times 10^3,\\; 1.072983\\times 10^4,\\; 2.299059\\times 10^4,\\; 4.5609\\times 10^4,\\; 1.4823484\\times 10^5]$\n- 案例2（类砷化镓材料，中等场强变化）：\n  - $E$: $[1.2\\times 10^7,\\; 1.5\\times 10^7,\\; 1.8\\times 10^7,\\; 2.1\\times 10^7,\\; 2.4\\times 10^7]$\n  - $\\alpha$: $[1.9\\times 10^3,\\; 1.02\\times 10^4,\\; 2.9\\times 10^4,\\; 6.5\\times 10^4,\\; 1.2\\times 10^5]$\n- 案例3（宽禁带材料，含一个异常值）：\n  - $E$: $[2.5\\times 10^7,\\; 3.0\\times 10^7,\\; 3.5\\times 10^7,\\; 4.0\\times 10^7,\\; 4.5\\times 10^7]$\n  - $\\alpha$: $[2.4\\times 10^2,\\; 1.18\\times 10^3,\\; 8.0\\times 10^3,\\; 9.7\\times 10^3,\\; 1.9\\times 10^4]$\n\n模型一致性容差：\n- 使用 $\\,\\tau = 0.3\\,$。\n\n最终输出格式：\n- 生成单行输出，包含一个扁平化的、逗号分隔的列表，用方括号括起来，汇总所有案例为 $[A_1,B_1,E_{\\min,1},E_{\\max,1},A_2,B_2,E_{\\min,2},E_{\\max,2},A_3,B_3,E_{\\min,3},E_{\\max,3}]$。\n- 所有数字必须以上述指定的 $\\mathrm{SI}$ 单位表示，并四舍五入至六位有效数字。",
            "solution": "用户提供的问题陈述经分析和验证，是科学上合理、定义明确、客观且自洽的。该问题属于半导体器件物理和工艺建模领域，具体涉及高场载流子产生的表征。它概述了一个清晰的、算法上定义的数据分析流程。因此，有必要提供一个解决方案。\n\n问题的核心是将载流子产生系数 $\\alpha$ 与电场 $E$ 的实验数据拟合到一个有物理动机的模型，并确定该模型的有效区域。\n\n模型 $\\alpha(E) = A \\exp(-B/E)$ 的物理基础源于高电场下载流子输运的半经典理论。诸如碰撞电离和场致隧穿（例如，Zener隧穿或Fowler-Nordheim隧穿）等现象，由载流子从电场中获得足够能量以克服势垒的概率决定。对于碰撞电离，势垒是电离能 $E_i$。对于隧穿，势垒是禁带宽度 $E_g$。在这两种情况下，使用WKB近似或平均自由程论证的简化一维分析，都会得到一个与电场倒数呈指数依赖关系的产生率或系数，即形式为 $\\alpha \\propto \\exp(-\\mathrm{const}/E)$。这一理论基础证明了使用模型 $\\alpha(E) = A e^{-B/E}$ 的合理性，其中 $A$ 是一个与材料特性和散射率相关的指前因子，$B$ 是一个与能垒和载流子平均自由程相关的临界场参数。\n\n为了从一组测量数据点 $\\{(E_i, \\alpha_i)\\}$ 中确定参数 $A$ 和 $B$，我们首先对模型方程进行线性化。对两边取自然对数可得：\n$$\n\\ln(\\alpha) = \\ln(A) - \\frac{B}{E}\n$$\n通过进行以下替换，该方程呈直线形式 $y = c + mx$：\n$$\ny = \\ln(\\alpha)\n$$\n$$\nx = \\frac{1}{E}\n$$\n$$\nc = \\ln(A) \\quad (\\text{y轴截距})\n$$\n$$\nm = -B \\quad (\\text{斜率})\n$$\n将数据转换到 $(x, y)$ 坐标系后，我们可以应用普通最小二乘法（OLS）来找到最佳拟合直线。OLS确定参数 $m$ 和 $c$，使得数据点 $y_i$ 与拟合直线 $c + mx_i$ 之间的垂直距离（残差）的平方和最小。给定一组 $N$ 个数据点 $\\{(x_i, y_i)\\}$，斜率 $m$ 和截距 $c$ 的OLS估计量为：\n$$\nm = \\frac{N(\\sum x_i y_i) - (\\sum x_i)(\\sum y_i)}{N(\\sum x_i^2) - (\\sum x_i)^2}\n$$\n$$\nc = \\bar{y} - m \\bar{x}\n$$\n其中 $\\bar{x}$ 和 $\\bar{y}$ 分别是 $x_i$ 和 $y_i$ 的样本均值。在整个数据集上通过拟合得到 $m$ 和 $c$ 后，使用逆变换恢复物理参数 $A$ 和 $B$：\n$$\nA = \\exp(c)\n$$\n$$\nB = -m\n$$\n该问题进一步要求评估模型的有效性。该模型是一个近似，可能由于测量误差、异常值的存在或未被简单指数形式捕获的其他物理机制的影响，在整个测量数据范围内并不成立。我们基于对数域中的拟合残差 $r_i = y_i - (c + mx_i)$ 定义一个有效性标准。如果一个点的残差绝对值在指定的容差 $\\tau$ 之内，则认为该点与模型一致：\n$$\n|r_i| \\le \\tau\n$$\n确定有效范围的程序执行如下：\n1.  数据点按电场 $E$ 升序排序。\n2.  基于对完整数据集执行的单次OLS拟合，计算所有点的残差 $r_i$。\n3.  为每个点分配一个布尔标志，指示是否 $|r_i| \\le \\tau$。\n4.  然后，我们识别出所有满足此条件的连续数据点块。\n5.  比较这些块的长度，并确定最大长度。\n6.  如果存在唯一的具有最大长度的块，则其对应的电场范围 $[E_{\\min}, E_{\\max}]$ 被选为有效范围。\n7.  如果多个块共享相同的最大长度，则应用一个决胜规则：为每个块计算平均绝对残差 $\\frac{1}{N_{\\mathrm{block}}} \\sum_{\\mathrm{block}} |r_i|$。选择平均绝对残差最小的块，并将其场范围 $[E_{\\min}, E_{\\max}]$ 报告为最终的有效范围。\n\n这一综合程序能够稳健地估计关键物理参数 $A$ 和 $B$，同时定义一个数据驱动的电场范围，在该范围内，底层的高场产生模型可以被可靠地应用。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nimport itertools\n\ndef solve():\n    \"\"\"\n    Main function to process test cases and print the final result.\n    \"\"\"\n    # Test suite from the problem statement\n    # Each case is a tuple of (E_list, alpha_list)\n    test_cases = [\n        # Case 1 (silicon-like, high-field avalanche region)\n        (\n            [1.8e7, 2.0e7, 2.2e7, 2.5e7, 3.0e7],\n            [4.96367e3, 1.072983e4, 2.299059e4, 4.5609e4, 1.4823484e5]\n        ),\n        # Case 2 (gallium-arsenide-like, moderate field variation)\n        (\n            [1.2e7, 1.5e7, 1.8e7, 2.1e7, 2.4e7],\n            [1.9e3, 1.02e4, 2.9e4, 6.5e4, 1.2e5]\n        ),\n        # Case 3 (wide-bandgap material with an outlier)\n        (\n            [2.5e7, 3.0e7, 3.5e7, 4.0e7, 4.5e7],\n            [2.4e2, 1.18e3, 8.0e3, 9.7e3, 1.9e4]\n        )\n    ]\n\n    # Model-consistency tolerance\n    tau = 0.3\n\n    all_results = []\n    for E_data, alpha_data in test_cases:\n        A, B, E_min, E_max = analyze_data_set(np.array(E_data), np.array(alpha_data), tau)\n        \n        # Format results to six significant digits\n        formatted_results = [f\"{val:.6g}\" for val in [A, B, E_min, E_max]]\n        all_results.extend(formatted_results)\n\n    # Final print statement in the exact required format\n    print(f\"[{','.join(all_results)}]\")\n\ndef analyze_data_set(E, alpha, tau):\n    \"\"\"\n    Performs the analysis for a single data set.\n    \n    1. Fits the linearized model alpha = A * exp(-B/E) using least squares.\n    2. Determines the validity range [E_min, E_max] based on residual tolerance.\n    \n    Args:\n        E (np.ndarray): Array of electric field values [V/m].\n        alpha (np.ndarray): Array of generation coefficient values [m^-1].\n        tau (float): Tolerance for residuals in natural-log units.\n        \n    Returns:\n        tuple: A, B, E_min, E_max\n    \"\"\"\n    # The problem data is already sorted by E, but sorting is good practice.\n    sort_indices = np.argsort(E)\n    E_sorted = E[sort_indices]\n    alpha_sorted = alpha[sort_indices]\n\n    # 1. Transform data for linearization: y = ln(alpha), x = 1/E\n    x = 1.0 / E_sorted\n    y = np.log(alpha_sorted)\n\n    # 2. Fit a straight line y = c + m*x using least squares on the full dataset.\n    # np.polyfit(x, y, 1) returns [m, c] for slope and intercept.\n    m, c = np.polyfit(x, y, 1)\n\n    # 3. Interpret fitted parameters to find A and B\n    # A = exp(c), B = -m\n    A = np.exp(c)\n    B = -m\n\n    # 4. Compute residuals r_i = y_i - (c + m*x_i)\n    residuals = y - (m * x + c)\n\n    # 5. Determine the largest contiguous block of valid points\n    is_valid = np.abs(residuals) = tau\n\n    # Find all maximal contiguous blocks of 'True' in is_valid\n    blocks = []\n    current_pos = 0\n    for is_v_group, group in itertools.groupby(is_valid):\n        num_items = len(list(group))\n        if is_v_group:  # This is a block of 'True' (valid) points\n            blocks.append((current_pos, current_pos + num_items - 1))\n        current_pos += num_items\n        \n    if not blocks:\n        # No valid points found; this case is not expected based on the problem.\n        return A, B, np.nan, np.nan\n\n    # Find the length of the largest block(s)\n    max_len = max(end - start + 1 for start, end in blocks)\n\n    # Filter for blocks that have this maximum length\n    max_len_blocks = [(s, e) for s, e in blocks if (e - s + 1) == max_len]\n\n    # 6. Apply tie-breaker if necessary\n    best_block = None\n    if len(max_len_blocks) == 1:\n        best_block = max_len_blocks[0]\n    else:\n        min_mean_abs_res = float('inf')\n        for s, e in max_len_blocks:\n            # Calculate mean absolute residual for the block\n            mean_abs_res = np.mean(np.abs(residuals[s : e + 1]))\n            if mean_abs_res  min_mean_abs_res:\n                min_mean_abs_res = mean_abs_res\n                best_block = (s, e)\n    \n    # 7. Report the validity range [E_min, E_max]\n    start_idx, end_idx = best_block\n    E_min = E_sorted[start_idx]\n    E_max = E_sorted[end_idx]\n\n    return A, B, E_min, E_max\n\nsolve()\n```"
        }
    ]
}
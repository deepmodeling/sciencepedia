{
    "hands_on_practices": [
        {
            "introduction": "To accurately model ion implantation, we must first master the underlying geometry. This exercise challenges you to calculate the true, local angle of incidence between an ion beam and a tilted micro-facet on the wafer surface, a common scenario due to crystalline miscut or device topography . This foundational practice reinforces the use of vector algebra and the dot product to determine the angle between the ion beam and the local surface normal, a cornerstone for any accurate implantation model.",
            "id": "4131695",
            "problem": "A crystalline silicon wafer undergoing Ion Implantation (II) is mounted such that the global wafer normal aligns with the $+\\hat{\\mathbf{z}}$ axis of the wafer coordinate frame. The ion beam is set to a high tilt implantation configuration: the beam axis is inclined by a tilt angle $\\theta$ relative to the global wafer normal and has an azimuth $\\phi$ measured in the wafer plane from the $+\\hat{\\mathbf{x}}$ axis. The unit vector describing the beam axis is taken to point away from the surface along the reverse of the ion velocity (so that its projection onto $+\\hat{\\mathbf{z}}$ is positive), and is represented in spherical coordinates as $\\hat{\\mathbf{k}}(\\theta,\\phi)$.\n\nA local surface patch on the wafer corresponds to a micro-facet due to a crystalline miscut. The local outward unit normal of this facet is modeled as a rotation of the global normal by a miscut angle $\\alpha$ toward an azimuthal direction $\\gamma$ in the wafer plane, so that its unit normal is $\\hat{\\mathbf{n}}(\\alpha,\\gamma)$.\n\nStarting from the definition of the angle between two unit vectors via the Euclidean inner product and the spherical coordinate representations of $\\hat{\\mathbf{k}}(\\theta,\\phi)$ and $\\hat{\\mathbf{n}}(\\alpha,\\gamma)$, derive a closed-form expression for the effective local incidence angle $\\theta_{\\mathrm{loc}}$ between the beam axis and the local surface normal as a function of $\\theta$, $\\phi$, $\\alpha$, and $\\gamma$. Then evaluate this angle for the high-tilt geometry\n$$\\theta = 80^\\circ,\\quad \\phi = 30^\\circ,\\quad \\alpha = 10^\\circ,\\quad \\gamma = 15^\\circ.$$\nExpress your final numerical answer in degrees and round your result to four significant figures.",
            "solution": "To determine the effective local incidence angle $\\theta_{\\mathrm{loc}}$, we must first express the beam axis unit vector $\\hat{\\mathbf{k}}$ and the local surface normal unit vector $\\hat{\\mathbf{n}}$ in a common Cartesian coordinate system.\n\nThe problem defines the vectors using spherical coordinates in the wafer frame $(\\hat{\\mathbf{x}}, \\hat{\\mathbf{y}}, \\hat{\\mathbf{z}})$. The beam axis vector $\\hat{\\mathbf{k}}(\\theta, \\phi)$ has a polar angle $\\theta$ and an azimuthal angle $\\phi$. Its Cartesian components are:\n$$\n\\hat{\\mathbf{k}} = \\begin{pmatrix} \\sin\\theta \\cos\\phi \\\\ \\sin\\theta \\sin\\phi \\\\ \\cos\\theta \\end{pmatrix}\n$$\nThe local surface normal vector $\\hat{\\mathbf{n}}(\\alpha, \\gamma)$ is similarly defined by a polar angle $\\alpha$ (the miscut angle) and an azimuthal angle $\\gamma$. Its Cartesian components are:\n$$\n\\hat{\\mathbf{n}} = \\begin{pmatrix} \\sin\\alpha \\cos\\gamma \\\\ \\sin\\alpha \\sin\\gamma \\\\ \\cos\\alpha \\end{pmatrix}\n$$\nThe angle $\\theta_{\\mathrm{loc}}$ between these two unit vectors is given by the arccosine of their Euclidean inner product (dot product):\n$$\n\\theta_{\\mathrm{loc}} = \\arccos(\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}})\n$$\nWe compute the dot product:\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = (\\sin\\theta \\cos\\phi)(\\sin\\alpha \\cos\\gamma) + (\\sin\\theta \\sin\\phi)(\\sin\\alpha \\sin\\gamma) + (\\cos\\theta)(\\cos\\alpha)\n$$\nFactoring out the common terms $\\sin\\theta \\sin\\alpha$:\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = \\sin\\theta \\sin\\alpha (\\cos\\phi \\cos\\gamma + \\sin\\phi \\sin\\gamma) + \\cos\\theta \\cos\\alpha\n$$\nUsing the cosine subtraction identity, $\\cos(A - B) = \\cos A \\cos B + \\sin A \\sin B$, we simplify the expression in the parentheses:\n$$\n\\hat{\\mathbf{k}} \\cdot \\hat{\\mathbf{n}} = \\sin\\theta \\sin\\alpha \\cos(\\phi - \\gamma) + \\cos\\theta \\cos\\alpha\n$$\nThis expression is a statement of the spherical law of cosines. The closed-form expression for the effective local incidence angle is therefore:\n$$\n\\theta_{\\mathrm{loc}}(\\theta, \\phi, \\alpha, \\gamma) = \\arccos\\left(\\sin\\theta \\sin\\alpha \\cos(\\phi - \\gamma) + \\cos\\theta \\cos\\alpha\\right)\n$$\nNow, we numerically evaluate this expression for the given high-tilt geometry: $\\theta = 80^\\circ$, $\\phi = 30^\\circ$, $\\alpha = 10^\\circ$, and $\\gamma = 15^\\circ$.\n        \nWe calculate the argument of the arccosine function, which we denote as $C$:\n$$\nC = \\sin(80^\\circ) \\sin(10^\\circ) \\cos(30^\\circ - 15^\\circ) + \\cos(80^\\circ) \\cos(10^\\circ)\n$$\n$$\nC = \\sin(80^\\circ) \\sin(10^\\circ) \\cos(15^\\circ) + \\cos(80^\\circ) \\cos(10^\\circ)\n$$\nUsing trigonometric function values: $\\sin(80^\\circ) \\approx 0.98480775$, $\\sin(10^\\circ) \\approx 0.17364818$, $\\cos(15^\\circ) \\approx 0.96592583$, $\\cos(80^\\circ) \\approx 0.17364818$, and $\\cos(10^\\circ) \\approx 0.98480775$.\n        \nSubstituting these values:\n$$\nC \\approx (0.98480775)(0.17364818)(0.96592583) + (0.17364818)(0.98480775)\n$$\n$$\nC \\approx 0.16518460 + 0.17101007\n$$\n$$\nC \\approx 0.33619467\n$$\nFinally, we compute the angle $\\theta_{\\mathrm{loc}}$:\n$$\n\\theta_{\\mathrm{loc}} = \\arccos(0.33619467)\n$$\n$$\n\\theta_{\\mathrm{loc}} \\approx 70.36056^\\circ\n$$\nRounding the result to four significant figures as requested gives $70.36^\\circ$.",
            "answer": "$$\n\\boxed{70.36}\n$$"
        },
        {
            "introduction": "With the geometry of incidence established, we can now explore its impact on the ion's trajectory within the silicon. This practice focuses on decomposing the projected range vector into its vertical and lateral components, providing an exact description of the implant profile's nominal position . Furthermore, it develops the crucial skill of quantifying the error introduced by the small-angle approximation, revealing why rigorous geometric treatment is essential for high-tilt implants.",
            "id": "4131671",
            "problem": "A monocrystalline silicon wafer is implanted by a collimated ion beam. Let the wafer surface define the $x$-$y$ plane, with the wafer normal along the $+z$ axis. The incoming beam direction is specified by a tilt angle $\\theta$ measured from the $+z$ axis and an azimuth angle $\\phi$ measured in the $x$-$y$ plane from the $+x$ axis. Assume an idealized, single-scattering-free trajectory so that the nominal projected range $R_{p}$ of ions is along the beam direction.\n\nStarting only from geometric first principles of three-dimensional vectors and the definitions of $\\theta$ and $\\phi$ given above, derive the exact dependence of the nominal projected range components on $\\theta$ and $\\phi$ for depth into the wafer and for the two lateral in-plane directions.\n\nIn many semiconductor process models, the small-angle approximation is invoked for high-throughput modeling: the depth component is approximated by $R_{p}$ and the lateral magnitude by $R_{p}\\theta$ when $\\theta$ is “small.” To formalize the breakdown of this approximation for high-tilt implants, define a breakdown threshold $\\delta>0$ by requiring that the relative error in the depth component, computed by comparing the small-angle approximation to the exact geometric component, exceeds $\\delta$. Under this definition, derive a closed-form analytic expression for the threshold tilt angle $\\theta_{\\mathrm{break}}(\\delta)$ at which the small-angle depth approximation first fails.\n\nProvide the final expression for $\\theta_{\\mathrm{break}}(\\delta)$ in radians. No numerical evaluation is required.",
            "solution": "The problem requires a derivation of the geometric components of an ion's projected range in a crystal and an analysis of the breakdown of a common small-angle approximation.\n\nFirst, we establish the coordinate system and the vector representing the ion's trajectory. The wafer surface is the $x$-$y$ plane. The wafer normal is along the $+z$ axis. For an ion to be implanted, it must travel into the wafer bulk. We therefore define the wafer as occupying the half-space $z \\ge 0$, with the surface at $z=0$. The ion beam originates from the $z<0$ region and travels into the $z>0$ region.\n\nThe direction of the incoming ion beam is described by a unit vector $\\hat{u}$. This direction is specified using spherical coordinates: a tilt angle $\\theta$ measured from the $+z$ axis (the polar angle) and an azimuth angle $\\phi$ measured in the $x$-$y$ plane from the $+x$ axis (the azimuthal angle). The Cartesian components of this unit vector $\\hat{u}$ are given by:\n$$\nu_x = \\sin\\theta \\cos\\phi\n$$\n$$\nu_y = \\sin\\theta \\sin\\phi\n$$\n$$\nu_z = \\cos\\theta\n$$\nFor the ion to enter the wafer, its velocity must have a positive $z$-component, which implies $\\cos\\theta > 0$. Since $\\theta$ represents the tilt from the normal, its physical range is $0 \\le \\theta  \\pi/2$.\n\nThe problem states that the nominal projected range $R_p$ is along the beam direction. Assuming the ion enters the wafer at the origin $(0,0,0)$, its final position vector, which we denote as $\\vec{R}_p$, is given by the magnitude $R_p$ multiplied by the direction vector $\\hat{u}$:\n$$\n\\vec{R}_p = R_p \\hat{u} = R_p (\\sin\\theta \\cos\\phi \\, \\hat{i} + \\sin\\theta \\sin\\phi \\, \\hat{j} + \\cos\\theta \\, \\hat{k})\n$$\nThe components of this projected range vector are:\n$$\nR_{px} = R_p \\sin\\theta \\cos\\phi\n$$\n$$\nR_{py} = R_p \\sin\\theta \\sin\\phi\n$$\n$$\nR_{pz} = R_p \\cos\\theta\n$$\nThese are the exact dependencies of the nominal projected range components on $\\theta$ and $\\phi$ based on geometric first principles. $R_{pz}$ represents the depth into the wafer, while $R_{px}$ and $R_{py}$ are the two lateral in-plane components.\n\nNext, we analyze the breakdown of the small-angle approximation for the depth component. The exact depth component, based on our derivation, is $D_{\\mathrm{exact}} = R_{pz} = R_p \\cos\\theta$. The problem provides the small-angle approximation for this component as $D_{\\mathrm{approx}} = R_p$.\n\nThe breakdown is defined to occur when the relative error in the depth component exceeds a threshold $\\delta > 0$. The relative error, $\\epsilon_D$, is rigorously defined as the magnitude of the difference between the approximate and exact values, normalized by the magnitude of the exact value:\n$$\n\\epsilon_D = \\frac{|D_{\\mathrm{approx}} - D_{\\mathrm{exact}}|}{|D_{\\mathrm{exact}}|}\n$$\nSubstituting the expressions for the exact and approximate depth components:\n$$\n\\epsilon_D = \\frac{|R_p - R_p \\cos\\theta|}{|R_p \\cos\\theta|}\n$$\nSince $R_p > 0$ and $0 \\le \\theta  \\pi/2$, we have $\\cos\\theta > 0$ (for non-grazing incidence) and $1 - \\cos\\theta \\ge 0$. The expression simplifies to:\n$$\n\\epsilon_D = \\frac{R_p (1 - \\cos\\theta)}{R_p \\cos\\theta} = \\frac{1 - \\cos\\theta}{\\cos\\theta} = \\sec\\theta - 1\n$$\nThe breakdown condition is that this relative error exceeds $\\delta$:\n$$\n\\epsilon_D > \\delta \\implies \\sec\\theta - 1 > \\delta\n$$\nThe threshold tilt angle, $\\theta_{\\mathrm{break}}(\\delta)$, is the specific angle at which the approximation first fails. This corresponds to the point where the equality is met:\n$$\n\\sec\\theta_{\\mathrm{break}} - 1 = \\delta\n$$\nWe solve this equation for $\\theta_{\\mathrm{break}}$. First, isolate the secant term:\n$$\n\\sec\\theta_{\\mathrm{break}} = 1 + \\delta\n$$\nNext, express this in terms of the cosine function:\n$$\n\\cos\\theta_{\\mathrm{break}} = \\frac{1}{1 + \\delta}\n$$\nFinally, we find the angle by taking the inverse cosine of both sides. As $\\theta_{\\mathrm{break}}$ is a physical angle in $[0, \\pi/2)$, the inverse cosine function will yield the unique principal value.\n$$\n\\theta_{\\mathrm{break}}(\\delta) = \\arccos\\left(\\frac{1}{1 + \\delta}\\right)\n$$\nThis is the closed-form analytic expression for the threshold tilt angle in radians, as a function of the error tolerance $\\delta$. For any tilt angle $\\theta > \\theta_{\\mathrm{break}}(\\delta)$, the relative error in the depth approximation will be greater than $\\delta$, because $\\sec\\theta$ is a monotonically increasing function for $\\theta \\in [0, \\pi/2)$.",
            "answer": "$$\\boxed{\\arccos\\left(\\frac{1}{1 + \\delta}\\right)}$$"
        },
        {
            "introduction": "This final practice synthesizes our geometric understanding with a physical model of damage accumulation to predict a critical process outcome: the dose required for amorphization. By combining the geometric effect of path length extension with a model for channeling suppression, you will derive the relationship between implant tilt and the amorphization dose . This exercise exemplifies how first-principles modeling can provide powerful insights into optimizing manufacturing processes.",
            "id": "4131733",
            "problem": "A semiconductor wafer receives ion implantation at a nonzero tilt relative to the surface normal. You will model near-surface amorphization using a damage accumulation framework grounded in stopping power and path-length geometry. Consider a single ion species implanted into crystalline silicon. Let $E$ denote the ion kinetic energy, and let $\\theta$ denote the tilt angle measured relative to the surface normal. The near-surface amorphous layer is defined as the slab from the surface down to thickness $h$, measured along the surface normal. The cumulative damage energy density in this layer must reach a critical threshold $U_c$ to amorphize. Assume that a constant fraction $\\eta$ of the nuclear stopping power converts to stored damage energy.\n\nUse the following fundamental base:\n- Stopping power is defined by $S(E) = -\\mathrm{d}E/\\mathrm{d}s$ and has units of energy per unit length. For this problem, take a phenomenological nuclear stopping model $S_n(E)$ that obeys a power law with respect to energy: $S_n(E) = S_{\\mathrm{ref}}\\left(\\dfrac{E}{E_{\\mathrm{ref}}}\\right)^{-p}$, where $S_{\\mathrm{ref}}$ is a reference nuclear stopping at reference energy $E_{\\mathrm{ref}}$, and $p$ is a positive exponent.\n- Geometry at tilt: for a slab of thickness $h$ measured along the surface normal, the ion path length inside the slab is $L = h/\\cos\\theta$.\n- Channeling suppression is modeled by an angular factor that increases the effective nuclear stopping with increasing tilt. Let the effective nuclear stopping be $S_{\\mathrm{eff}}(E,\\theta) = S_n(E)\\,\\Gamma(\\theta)$, where $\\Gamma(\\theta)$ is a dimensionless factor with $0\\Gamma(\\theta)\\leq 1$. Use a Gaussian suppression form $\\Gamma(\\theta) = g_{\\min} + \\left(1-g_{\\min}\\right)\\left(1 - \\exp\\left(-( \\theta/\\theta_c )^2\\right)\\right)$, where $g_{\\min}$ represents residual dechanneling at normal incidence and $\\theta_c$ is a characteristic channeling angle.\n- Damage energy per ion deposited in the slab is proportional to the path-integrated nuclear stopping scaled by the efficiency $\\eta$.\n\nYou must compute the dose required to amorphize the near-surface slab for a given $E$ and $\\theta$, defined as the areal density of ions incident on the wafer, in units of ions per square centimeter. Then, compare the required dose at tilt to the required dose at normal incidence, reporting the ratio. Use the following constants and units:\n- The critical damage energy density threshold is $U_c = 1.0\\times 10^{23}\\,\\text{eV}/\\text{cm}^3$.\n- The damage efficiency is $\\eta = 0.8$ (dimensionless).\n- The reference nuclear stopping is $S_{\\mathrm{ref}} = 5\\,\\text{eV}/\\text{\\AA}$ at $E_{\\mathrm{ref}} = 100\\,\\text{keV}$, with exponent $p = 0.5$.\n- The channeling parameters are $g_{\\min} = 0.4$ and $\\theta_c = 3.0^\\circ$.\n- Angle $\\theta$ must be used in degrees for input, and convert to radians internally for trigonometric operations.\n- Report dose in ions per square centimeter, but the final requested output is the ratio between the dose at tilt and the dose at normal incidence, which is dimensionless.\n\nDesign your program to evaluate the following test suite of parameter sets, each given as a pair $(E,\\theta)$, where $E$ is in kiloelectronvolts and $\\theta$ is in degrees:\n- Test case A (happy path): $(E,\\theta) = (20\\,\\text{keV}, 30^\\circ)$.\n- Test case B (boundary angle normal): $(E,\\theta) = (20\\,\\text{keV}, 0^\\circ)$.\n- Test case C (low energy, high tilt): $(E,\\theta) = (5\\,\\text{keV}, 60^\\circ)$.\n- Test case D (high energy, very high tilt): $(E,\\theta) = (100\\,\\text{keV}, 80^\\circ)$.\n- Test case E (near channeling threshold): $(E,\\theta) = (200\\,\\text{keV}, 3^\\circ)$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, in the order of the test cases above. Each result is the ratio of the required dose at the given tilt to the required dose at normal incidence for the same energy, expressed as a decimal. The final output must therefore be of the form $[r_A,r_B,r_C,r_D,r_E]$ where each $r_i$ is a float. Angles must be interpreted in degrees, and any internal trigonometric functions must use radians. No user input is allowed; constants are fixed as specified. All calculations must be executed in a self-contained manner using the provided model, with all physical constants and units handled consistently. The dose unit is ions per square centimeter, and the ratio is dimensionless.",
            "solution": "The problem requires the calculation of the ratio of the ion implantation dose needed to amorphize a near-surface silicon layer at a tilt angle $\\theta$ to the dose required at normal incidence ($\\theta = 0^\\circ$). The solution will be derived from first principles based on the provided damage accumulation model.\n\nFirst, we establish a relationship between the incident ion dose, $\\Phi$, and the resulting damage energy density, $U$, within a near-surface slab of thickness $h$. The dose $\\Phi$ is defined as the number of ions incident per unit area. Consider a surface area $A$. The total number of ions striking this area is $\\Phi \\cdot A$. The volume of the slab under this area is $V = A \\cdot h$.\n\nThe damage energy deposited per ion, $\\Delta E_{damage}$, within this slab must be determined. An ion incident at a tilt angle $\\theta$ relative to the surface normal traverses a path of length $L = h/\\cos\\theta$ through the slab. The energy deposited as damage is given as a fraction $\\eta$ of the energy lost to nuclear stopping along this path. The effective nuclear stopping power is $S_{\\mathrm{eff}}(E, \\theta)$. For a thin, near-surface layer, we can make the valid approximation that the ion's energy $E$, and thus the stopping power, remains constant along the short path $L$. The total energy lost to nuclear stopping per ion is therefore approximately $S_{\\mathrm{eff}}(E, \\theta) \\cdot L$. The portion of this energy that creates stable damage is:\n$$ \\Delta E_{damage} = \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot L = \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot \\frac{h}{\\cos\\theta} $$\n\nThe total damage energy deposited in the volume $V$ by a dose $\\Phi$ is the product of the number of ions and the damage energy per ion:\n$$ U_{total} = (\\Phi \\cdot A) \\cdot \\Delta E_{damage} $$\nThe damage energy density $U$ is this total energy divided by the volume $V$:\n$$ U = \\frac{U_{total}}{V} = \\frac{(\\Phi \\cdot A) \\cdot \\Delta E_{damage}}{A \\cdot h} = \\frac{\\Phi \\cdot \\Delta E_{damage}}{h} $$\nSubstituting the expression for $\\Delta E_{damage}$:\n$$ U = \\frac{\\Phi}{h} \\left( \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta) \\cdot \\frac{h}{\\cos\\theta} \\right) = \\frac{\\Phi \\cdot \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta)}{\\cos\\theta} $$\nNotice that the arbitrary slab thickness $h$ cancels out, rendering the model self-consistent.\n\nAmorphization occurs when this damage energy density reaches the critical threshold $U_c$. We can therefore solve for the required amorphization dose, $\\Phi(E, \\theta)$:\n$$ U_c = \\frac{\\Phi(E, \\theta) \\cdot \\eta \\cdot S_{\\mathrm{eff}}(E, \\theta)}{\\cos\\theta} \\implies \\Phi(E, \\theta) = \\frac{U_c \\cos\\theta}{\\eta S_{\\mathrm{eff}}(E, \\theta)} $$\n\nThe effective stopping power $S_{\\mathrm{eff}}(E, \\theta)$ is given by the product of the energy-dependent nuclear stopping power $S_n(E)$ and the angle-dependent channeling suppression factor $\\Gamma(\\theta)$:\n$$ S_{\\mathrm{eff}}(E, \\theta) = S_n(E) \\cdot \\Gamma(\\theta) $$\nThe specific models provided are:\n$$ S_n(E) = S_{\\mathrm{ref}}\\left(\\frac{E}{E_{\\mathrm{ref}}}\\right)^{-p} $$\n$$ \\Gamma(\\theta) = g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{\\theta}{\\theta_c} \\right)^2\\right)\\right) $$\nwhere $\\theta$ in the exponential term is the angle in degrees, matching the units of $\\theta_c$. The trigonometric function $\\cos\\theta$ requires its argument in radians.\n\nThe problem requires the ratio $R(E, \\theta) = \\frac{\\Phi(E, \\theta)}{\\Phi(E, 0)}$. We first evaluate the dose for the normal incidence case, $\\theta = 0^\\circ$.\nAt $\\theta = 0^\\circ$, we have $\\cos(0^\\circ) = 1$. The channeling factor becomes:\n$$ \\Gamma(0) = g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{0}{\\theta_c} \\right)^2\\right)\\right) = g_{\\min} + (1-g_{\\min})(1 - \\exp(0)) = g_{\\min} + (1-g_{\\min})(1-1) = g_{\\min} $$\nThe dose at normal incidence is therefore:\n$$ \\Phi(E, 0) = \\frac{U_c \\cos(0^\\circ)}{\\eta S_{\\mathrm{eff}}(E, 0^\\circ)} = \\frac{U_c}{\\eta S_n(E) \\Gamma(0)} = \\frac{U_c}{\\eta S_n(E) g_{\\min}} $$\n\nNow we can compute the ratio $R(E, \\theta)$:\n$$ R(E, \\theta) = \\frac{\\Phi(E, \\theta)}{\\Phi(E, 0)} = \\frac{\\frac{U_c \\cos\\theta}{\\eta S_{\\mathrm{eff}}(E, \\theta)}}{\\frac{U_c}{\\eta S_{\\mathrm{eff}}(E, 0)}} = \\frac{\\cos\\theta \\cdot S_{\\mathrm{eff}}(E, 0)}{S_{\\mathrm{eff}}(E, \\theta)} $$\nSubstituting $S_{\\mathrm{eff}}(E, \\theta) = S_n(E) \\Gamma(\\theta)$:\n$$ R(E, \\theta) = \\frac{\\cos\\theta \\cdot S_n(E) \\Gamma(0)}{S_n(E) \\Gamma(\\theta)} = \\frac{\\Gamma(0) \\cos\\theta}{\\Gamma(\\theta)} $$\nAn important consequence of this formulation is that the energy-dependent term $S_n(E)$ cancels out. The dose ratio is therefore independent of the ion energy $E$, a key insight that simplifies the calculation significantly. The test case energies are superfluous to the final calculation of the ratio.\n\nSubstituting $\\Gamma(0) = g_{\\min}$, the final expression for the ratio depends only on the tilt angle $\\theta$:\n$$ R(\\theta) = \\frac{g_{\\min} \\cos\\theta}{\\Gamma(\\theta)} = \\frac{g_{\\min} \\cos\\theta}{g_{\\min} + (1-g_{\\min})\\left(1 - \\exp\\left(-\\left( \\frac{\\theta}{\\theta_c} \\right)^2\\right)\\right)} $$\nWe will now implement a function to compute this ratio for the given test cases using the provided constants: $g_{\\min} = 0.4$ and $\\theta_c = 3.0^\\circ$. The input angle $\\theta$ is in degrees. It must be converted to radians for the $\\cos$ function, but can be used directly in degrees for the ratio $\\theta/\\theta_c$ since $\\theta_c$ is also in degrees.\n\nFor each test case $(E_i, \\theta_i)$, we calculate $R(\\theta_i)$.\n- Case A: $(E, \\theta) = (20\\,\\text{keV}, 30^\\circ)$\n- Case B: $(E, \\theta) = (20\\,\\text{keV}, 0^\\circ)$\n- Case C: $(E, \\theta) = (5\\,\\text{keV}, 60^\\circ)$\n- Case D: $(E, \\theta) = (100\\,\\text{keV}, 80^\\circ)$\n- Case E: $(E, \\theta) = (200\\,\\text{keV}, 3^\\circ)$\nAs established, the energy $E$ has no effect on the final ratio. The calculation proceeds by substituting the angle from each case into the derived formula for $R(\\theta)$. For $\\theta = 0^\\circ$, $R(0) = \\frac{g_{\\min} \\cos(0)}{g_{\\min}} = 1$, as expected. For other angles, the value will reflect the interplay between the geometric path length effect (via $\\cos\\theta$) and the channeling suppression effect (via $\\Gamma(\\theta)$).",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the ratio of amorphization dose at a given tilt angle to the\n    dose at normal incidence, based on a phenomenological model of ion damage.\n    \"\"\"\n\n    # Define the constants from the problem statement.\n    # The ratio calculation is independent of Uc, eta, S_ref, E_ref, and p.\n    G_MIN = 0.4  # Residual dechanneling factor at normal incidence\n    THETA_C_DEG = 3.0  # Characteristic channeling angle in degrees\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple (Energy_keV, Angle_degrees).\n    # As derived in the solution, the energy E is not needed for the ratio calculation.\n    test_cases = [\n        (20, 30),   # Test case A\n        (20, 0),    # Test case B\n        (5, 60),    # Test case C\n        (100, 80),  # Test case D\n        (200, 3),   # Test case E\n    ]\n\n    results = []\n    for case in test_cases:\n        _, theta_deg = case\n\n        # Convert tilt angle from degrees to radians for the cosine function.\n        theta_rad = np.deg2rad(theta_deg)\n\n        # Calculate the angle-dependent channeling suppression factor Gamma(theta).\n        # The ratio (theta_deg / THETA_C_DEG) is dimensionless, so degrees can be used directly.\n        exponent_term = - (theta_deg / THETA_C_DEG)**2\n        gamma_theta = G_MIN + (1.0 - G_MIN) * (1.0 - np.exp(exponent_term))\n\n        # Calculate the dose ratio R(theta).\n        # R(theta) = (g_min * cos(theta)) / Gamma(theta)\n        # Gamma(0) is equal to g_min.\n        numerator = G_MIN * np.cos(theta_rad)\n        denominator = gamma_theta\n        \n        # The denominator gamma_theta is always = g_min (0.4), so no division by zero risk.\n        ratio = numerator / denominator\n        \n        results.append(ratio)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
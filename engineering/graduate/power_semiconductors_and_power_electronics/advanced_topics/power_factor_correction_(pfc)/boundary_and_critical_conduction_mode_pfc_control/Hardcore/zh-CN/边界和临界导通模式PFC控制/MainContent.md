## 引言
在现代电子设备中，高效地从交流电网获取能量并将其转换为稳定的直流电至关重要。功率因数校正（PFC）技术是这一过程的核心，它确保了输入电流波形与电压波形同步，从而最大限度地提高电能利用率并减少对电网的[谐波](@entry_id:181533)污染。在众多PFC控制策略中，[临界导通模式](@entry_id:1121806)（Critical Conduction Mode, CrCM）或称[边界导通模式](@entry_id:1121806)（Boundary Conduction Mode, BCM），以其高效率、简洁的控制和优异的电磁兼容性（EMC）表现，在中低功率应用中脱颖而出。然而，要充分发挥其优势，设计者必须深刻理解其在连续与非[连续导通模式](@entry_id:269432)边界运行的独特物理机制，并掌握与之匹配的控制方法与设计权衡。

本文旨在为读者提供一个关于CrCM PFC控制的全面而深入的指南。我们将从基本原理出发，逐步揭示其复杂而精巧的内在逻辑，并将其与实际工程应用紧密联系。
在“原理与机制”一章中，我们将从第一性原理出发，系统地阐述CrCM的工作模式定义、关键数学关系以及实现高[功率因数](@entry_id:270707)的控制机制，剖析恒定导通时间（COT）等核心控制策略的内在逻辑。
随后，在“应用与跨学科连接”一章中，我们将探讨CrCM在现实世界中的应用，展示其如何与传感器技术、半导体物理和EMC法规等领域交叉，并分析如何通过谷底开通、交错式拓扑等技术进一步优化系统性能。
最后，“动手实践”部分将通过一系列精心设计的工程问题，巩固理论知识，并引导读者解决实际设计中遇到的关键挑战。
通过本文的学习，您将能够全面掌握CrCM PFC的设计精髓，为开发下一代高效、可靠的电源解决方案奠定坚实的基础。

## 原理与机制

在深入研究[临界导通模式](@entry_id:1121806)（Critical Conduction Mode, CrCM）功率因数校正（Power Factor Correction, PFC）控制的具体实现之前，我们必须首先从第一性原理出发，建立对该模式下转换器运行物理过程的深刻理解。本章将系统地阐述 CrCM 的核心工作原理、关键的数学关系以及实现高[功率因数](@entry_id:270707)的控制机制。

### 定义[临界导通模式](@entry_id:1121806) (CrCM)

在典型的升压（Boost）PFC 拓扑中，电感电流 $i_L(t)$ 的行为模式是理解和区分不同控制策略的关键。根据电感电流在一个开关周期内的轨迹，我们可以将工作模式分为三类：连续导通模式（Continuous Conduction Mode, CCM）、非连续导通模式（Discontinuous Conduction Mode, DCM）和[临界导通模式](@entry_id:1121806)（CrCM）。

为了清晰地定义这些模式，我们考虑一个理想的 Boost PFC 转换器。在功率开关 $S$ 导通期间，电感连接到整流后的输入电压 $v_g(t)$，电感电流以斜率 $v_g(t)/L$ 上升。在开关 $S$ 关断期间，电感电流通过升压二[极管](@entry_id:909477) $D$ 流向输出，此时电感两端的电压为 $v_g(t) - V_o$（其中 $V_o$ 为输出电压），由于 Boost 转换器中 $V_o > v_g(t)$，该电压为负，因此电感电流以斜率 $-(V_o - v_g(t))/L$ 下降。

这三种模式的区别在于电感电流的谷值 $i_{L,\min}$：

*   **[连续导通模式](@entry_id:269432) (CCM):** 在整个开关周期内，电感电流始终大于零，即 $i_{L,\min} > 0$。电感中储存的能量足以在开关关断期间[维持电流](@entry_id:1126145)持续流动，直到下一个周期开关导通。

*   **非[连续导通模式](@entry_id:269432) (DCM):** 在开关关断期间，电感电流下降至零，并在下一个开关周期开始前维持零值一段时间。这个电感电流为零的区间被称为“[死区](@entry_id:183758)时间”或“空闲时间”。因此，在 DCM 中，$i_{L,\min} = 0$，且存在一个电流为零的有限时间间隔。

*   **[临界导通模式](@entry_id:1121806) (CrCM):** 这是 CCM 和 DCM 之间的精确边界。在这种模式下，电感电流在开关关断期间下降，并在下一个开关周期即将开始的瞬间恰好回到零。不存在电流为零的空闲时间。因此，在 CrCM 中，每个周期的起始电流 $i_{L,\min}$ 均为零 。控制器通过检测电感电流归零的事件（零电流检测，Zero-Current Detection, ZCD）来立即触发下一个周期的导通。由于电流下降到零所需的时间取决于瞬时输入电压 $v_g(t)$ 和输出电压 $V_o$，维持 CrCM 运行必然导致开关频率随线路电压周期性变化。

在学术文献和工业实践中，**[边界导通模式](@entry_id:1121806)（Boundary Conduction Mode, BCM）** 和 **[临界导通模式](@entry_id:1121806)（CrCM）** 这两个术语通常被视为同义词。它们都描述了同一种控制意图：即精确地在 CCM 和 DCM 的边界上运行，通过在电感电流归零时开启开关，从而实现零电流开关（Zero-Current Switching, ZCS）。因此，CrCM 的核心定义条件是：在每个开关周期的导通命令发出瞬间，电感电流 $i_L(t)$ 恰好从正值回到零 。

### CrCM 开关周期：分步解析

为了具体理解 CrCM 的工作机制，我们来详细分析一个高频开关周期内的事件序列。我们假设在一个开关周期内，与低频的工频（如 50/60 Hz）相比，整流后的输入电压 $v_g(t)$ 和输出电压 $V_o$ 可以视为常数。

一个完整的 CrCM 开关周期可分为两个主要阶段 ：

**阶段一：电感充电（开关导通）**

1.  **触发：** 周期始于零电流检测（ZCD）电路探测到电感电流 $i_L$ 降至零。该信号立即触发控制器导通功率开关（例如 MOSFET）。由于开关在零电流下导通，导通[开关损耗](@entry_id:1132728)被显著降低，这是 CrCM 的一个固有优势。

2.  **电流路径：** 开关 $S$ 导通后，将电感 $L$ 直接连接到[整流](@entry_id:197363)后的输入电压源 $v_g(t)$。电流从输入端流经电感 $L$ 和开关 $S$ 到地。此时，由于输出电压 $V_o$ 高于输入电压 $v_g(t)$，升压二[极管](@entry_id:909477) $D$ 处于反向偏置状态，不导通。

3.  **电流变化：** 电感两端的电压为 $v_L(t) = v_g(t)$。根据电感的基本物理定律 $v_L = L \frac{di_L}{dt}$，电感电流的变化率为：
    $$ \frac{di_L}{dt} = \frac{v_g(t)}{L} $$
    由于 $v_g(t)$ 在此周期内被视为一个正的常数，电流 $i_L(t)$ 从零开始线性上升。这种线性变化是电感两端施加恒定电压的直接结果，因此在理想模型下，电流波形呈现为直线段，构成了三角形波形的一部分 。

4.  **阶段结束：** 此阶段持续时间为 $t_{on}$。当电感电流 $i_L(t)$ 上升到由控制器设定的[峰值电流](@entry_id:264029)阈值 $I_{pk}$ 时，控制器关断开关 $S$，充电阶段结束。

**阶段二：电感放电（开关关断）**

1.  **状态切换：** 开关 $S$ 关断后，电感电流由于其连续性，不能瞬间消失。它会寻找新的路径，即通过升压二[极管](@entry_id:909477) $D$ 流向输出电容 $C$ 和负载。

2.  **电流路径：** 电流从输入端流经电感 $L$ 和二[极管](@entry_id:909477) $D$，向输出端传递能量。

3.  **电流变化：** 此时，电感两端的电压由[基尔霍夫电压定律](@entry_id:276614)确定为 $v_L(t) = v_g(t) - V_o$。由于 $V_o > v_g(t)$，该电压为负。电感电流的变化率为：
    $$ \frac{di_L}{dt} = \frac{v_g(t) - V_o}{L} = -\frac{V_o - v_g(t)}{L} $$
    由于电感两端施加的是一个负的恒定电压，电流 $i_L(t)$ 从其峰值 $I_{pk}$ 开始线性下降。

4.  **周期结束：** 此阶段持续时间为 $t_{off}$。当电感电流线性下降至零时，ZCD 电路再次被触发，标志着当前周期的结束和下一个周期的开始。整个过程无缝衔接，形成连续的三角波电流。

### CrCM 的核心数学关系

基于对开关周期的物理过程分析，我们可以推导出 CrCM 运行模式下一些关键的定量关系。这些关系对于理解 CrCM 的控制原理至关重要。

**[伏秒平衡](@entry_id:1133872)与周期时间**

电感在一个完整的[稳态](@entry_id:139253)开关周期内的净磁通变化为零，这意味着电感电压在一个周期内的积分为零。这一原理称为**[伏秒平衡](@entry_id:1133872)**。对于 CrCM 模式，我们可以将其应用于充电和放电两个阶段：

$$ \int_{0}^{t_{on}} v_L(t) dt + \int_{t_{on}}^{t_{on}+t_{off}} v_L(t) dt = 0 $$

在我们的准静态假设下，电压在每个子区间内为常数，积分简化为：

$$ v_g(t) \cdot t_{on} + (v_g(t) - V_o) \cdot t_{off} = 0 $$

整理可得：

$$ v_g(t) \cdot t_{on} = (V_o - v_g(t)) \cdot t_{off} $$

这个简单的等式揭示了 CrCM 模式下一个深刻的约束。它表明，关断时间 $t_{off}$ 并非一个独立的变量，而是由导通时间 $t_{on}$ 以及瞬时电压 $v_g(t)$ 和 $V_o$ 共同决定的 ：

$$ t_{off}(t) = \frac{v_g(t)}{V_o - v_g(t)} t_{on}(t) $$

**CrCM 中的[占空比](@entry_id:199172)**

[占空比](@entry_id:199172) $D$ 定义为开关导通时间与总开关周期 $T_s = t_{on} + t_{off}$ 的比值。利用上述 $t_{on}$ 和 $t_{off}$ 的关系，我们可以推导出 CrCM 模式下的[占空比](@entry_id:199172)：

$$ D(t) = \frac{t_{on}}{t_{on} + t_{off}} = \frac{t_{on}}{t_{on} + \frac{v_g(t)}{V_o - v_g(t)} t_{on}} = \frac{1}{1 + \frac{v_g(t)}{V_o - v_g(t)}} $$

$$ D(t) = \frac{V_o - v_g(t)}{V_o - v_g(t) + v_g(t)} = \frac{V_o - v_g(t)}{V_o} = 1 - \frac{v_g(t)}{V_o} $$

这个结果至关重要。它表明，在 CrCM 模式下，[占空比](@entry_id:199172)完全由瞬时输入/输出电[压比](@entry_id:137698) $v_g(t)/V_o$ 决定，而与负载（即[峰值电流](@entry_id:264029) $I_{pk}$）或电感值 $L$ 无关。这意味着**[占空比](@entry_id:199172) $D$ 在 CrCM 中不是一个可用于调节输入电流的自由控制变量**。任何试图强制设定一个与 $1 - v_g(t)/V_o$ 不同的[占空比](@entry_id:199172)的控制策略，都将使转换器偏离[临界导通模式](@entry_id:1121806)，进入 CCM 或 DCM。因此，基于[占空比](@entry_id:199172)调制的传统控制方法不适用于 CrCM PFC 。

### 利用 CrCM 控制实现[功率因数校正](@entry_id:1130033)

功率因数校正的根本目标是使转换器的输入端口表现得像一个纯电阻，即让输入电流的平均波形与输入电压的波形成正比且同相位。在 CrCM 中，我们通过精巧的控制策略来实现这一目标。

**CrCM 中的平均输入电流**

我们已经知道，CrCM 中每个开关周期的电感电流是一个从零开始，上升到峰值 $I_{pk}$，再下降到零的三角波。一个三角波在一个周期内的平均值等于其峰值的一半。因此，在开关频率远高于工频时，我们可以认为一个开关周期内的平均输入电流 $\langle i_{in}(t) \rangle$ 等于[峰值电流](@entry_id:264029)的一半：

$$ \langle i_{in}(t) \rangle = \frac{1}{2} I_{pk}(t) $$

为了实现 PFC，我们需要 $\langle i_{in}(t) \rangle \propto v_g(t)$。结合上式，这意味着控制系统必须确保**[峰值电流](@entry_id:264029)包络 $I_{pk}(t)$ 与瞬时输入电压 $v_g(t)$ 成正比**。

**双环路控制架构**

典型的 CrCM PFC 控制器采用双环路结构来实现上述目标 ：

1.  **外环（电压环）：** 这是一个慢速的反馈环路。它将实际的输出直流电压 $V_o$ 与一个固定的参考电压 $V_{ref}$ 进行比较。两者之间的误差经过一个补偿器（通常是比例积分 PI 控制器）处理，产生一个缓慢变化的控制信号 $v_c$。这个信号 $v_c$ 代表了系统所需的输入功率水平：当负载加重导致 $V_o$ 下降时，$v_c$ 会增大，要求输入更多功率；反之亦然。

2.  **内环（电流环）与乘法器：** 这是实现电流塑形的核心。内环的功能是逐个周期地控制电感峰值电流 $I_{pk}$。峰值电流的目标值（即电流参考 $i_{ref}(t)$）由一个**模拟或数字乘法器**生成。该乘法器接收两个输入：一个是与[整流](@entry_id:197363)后输入电压 $v_g(t)$ 成比例的信号，另一个是来自外环的慢速功率指令信号 $v_c$。乘法器的输出为：
    $$ i_{ref}(t) \propto v_c \cdot v_g(t) $$
    由于 $v_c$ 在一个工频周期内变化非常缓慢，可以近似看作常数，因此电流参考 $i_{ref}(t)$ 的波形就是一个与输入电压 $v_g(t)$ 同相位的正弦半波。[内环控制](@entry_id:272115)器（通常是一个比较器）将实时检测到的电感电流 $i_L(t)$ 与这个参考值 $i_{ref}(t)$ 进行比较。当 $i_L(t)$ 达到 $i_{ref}(t)$ 时，控制器立即关断开关。这样，就实现了 $I_{pk}(t) = i_{ref}(t) \propto v_g(t)$ 的控制目标，从而完美地塑造了输入电流，实现了高[功率因数](@entry_id:270707)。

### 实际控制方法及其影响

虽然上述乘法器方案是理论基础，但在实际应用中，常采用一些更简洁且同样有效的控制方法。

**恒定导通时间 (Constant On-Time, COT) 控制**

恒定导通[时间控制](@entry_id:263806)是实现 CrCM PFC 最常见和最简单的方法之一。其原理非常直接。我们回忆一下电感充电阶段的关系：

$$ I_{pk}(t) = \frac{v_g(t)}{L} t_{on} $$

如果控制器在整个工频半周期内都保持导通时间 $t_{on}$ 为一个固定的常数，那么峰值电流 $I_{pk}(t)$ 就会自然地与瞬时输入电压 $v_g(t)$ 成正比。此时，平均输入电流为：

$$ \langle i_{in}(t) \rangle = \frac{1}{2} I_{pk}(t) = \frac{t_{on}}{2L} v_g(t) $$

这直接满足了 PFC 的要求。在这种方案中，外环电压环路通过微调“恒定”的 $t_{on}$ 值来调节输入功率水平，以响应负载的变化 。

**可变的开关频率**

无论是采用乘法器方案还是恒定导通[时间控制](@entry_id:263806)，CrCM PFC 的一个必然结果是**开关频率是可变的**。我们可以推导其频率特性。以 COT 控制为例，总开关周期为：

$$ T_s(t) = t_{on} + t_{off}(t) = t_{on} + \frac{v_g(t)}{V_o - v_g(t)} t_{on} = t_{on} \frac{V_o}{V_o - v_g(t)} $$

相应的开关频率 $f_s(t) = 1/T_s(t)$ 为：

$$ f_s(t) = \frac{1}{t_{on}} \frac{V_o - v_g(t)}{V_o} $$

分析这个表达式可以得出 CrCM 的一个标志性特征  ：

*   **随线路电压变化：** 当输入电压 $v_g(t)$ 接近零时（即工频正弦波的过零点附近），$f_s(t)$ 达到其最大值 $1/t_{on}$。当输入电压 $v_g(t)$ 达到峰值 $V_m$ 时（即工频正弦波的波峰处），$f_s(t)$ 降至其最小值 $\frac{V_o - V_m}{V_o t_{on}}$。因此，开关频率在一个工频半周期内从最高点变化到最低点。

*   **随负载变化：** 当输出功率 $P_{out}$ 增加时，外环会要求输入更多电流，这在 COT 控制中通过增大 $t_{on}$ 来实现。从频率公式可以看出，增大 $t_{on}$ 会导致整个频率曲线下移，即在所有[工作点](@entry_id:173374)的开关频率都会降低。反之，轻载时开关频率更高 。这种宽范围的频率变化是 CrCM 的主要设计挑战之一，特别是在[滤波器设计](@entry_id:266363)和电磁干扰（EMI）控制方面。

**谷底开通（Valley Switching）**

作为 CrCM 的一种实际改进，许多控制器实现了**谷底开通**技术。在电感电流降至零后，控制器并不立即导通开关，而是等待一小段延迟时间 $t_d$。在这段时间内，电感 $L$ 与开关节点上的[寄生电容](@entry_id:270891)发生谐振，使得开关两端的电压（漏源电压 $V_{DS}$）开始振荡。控制器会选择在 $V_{DS}$ 的第一个或后续的谷底时刻导通开关。这可以在一定程度上实现零电压开关（ZVS），进一步降低[开关损耗](@entry_id:1132728)。然而，这个延迟时间 $t_d$ 本身也随[工作点](@entry_id:173374)变化，使得[占空比](@entry_id:199172)的定义和控制变得更加复杂，从而进一步凸显了基于导通时间或[峰值电流](@entry_id:264029)的控制方法的优越性 。
{
    "hands_on_practices": [
        {
            "introduction": "锁相环（PLL）的核心是其环路滤波器，它决定了系统的稳定性和动态响应。本练习将引导你完成一个非常实际的设计任务：根据给定的带宽和相位裕度这两个反馈控制系统的基本指标，计算出PI控制器的比例增益 $K_p$ 和积分增益 $K_i$。通过这项实践 ，你将巩固控制理论概念与具体控制器参数之间的联系。",
            "id": "3843644",
            "problem": "一个三相并网电压源型换流器需要使用同步参考坐标系锁相环 (SRF-PLL) 进行相角同步。SRF-PLL 使用一个比例积分 (PI) 环路滤波器，其输出为估算的电网角频率；以及一个数控振荡器 (NCO)，它对该频率进行积分以产生估算的相位。在同步参考坐标系中，当相位误差很小时，q轴电压与相位误差成线性正比关系。假设鉴相器增益等于正序电网电压的幅值，因此 $K_{\\text{PD}} = V$，且 NCO 增益为 $K_{\\text{NCO}} = 1$。\n\n为一个用于 $50\\,\\text{Hz}$ 电网的 SRF-PLL 设计 PI 增益，该电网的基波正序峰值幅值为 $V = 325\\,\\text{V}$。期望的环路带宽为 $f_b = 30\\,\\text{Hz}$，定义为开环传递函数 $L(j\\omega)$ 的单位增益穿越频率，期望的相位裕度为 $\\text{PM} = 50^\\circ$。\n\n从小信号线性化的基本原理和标准反馈环路定义出发，计算满足这些指标的比例增益 $K_p$ (以 $\\text{rad}\\,\\text{s}^{-1}\\,\\text{V}^{-1}$ 为单位) 和积分增益 $K_i$ (以 $\\text{rad}\\,\\text{s}^{-2}\\,\\text{V}^{-1}$ 为单位)。将 $\\text{PM}$ 以度为单位处理，但所有三角运算均使用弧度。将最终数值结果四舍五入至四位有效数字。环路带宽必须在角频率 $\\omega_{gc} = 2\\pi f_b$ 处实现。",
            "solution": "首先验证问题陈述，以确保其具有科学依据、提法恰当、客观且完整。\n\n### 步骤1：提取已知条件\n- 系统：带 SRF-PLL 的三相并网电压源型换流器。\n- 环路滤波器：比例积分 (PI) 控制器。\n- 鉴相器增益：$K_{\\text{PD}} = V$。\n- NCO 增益：$K_{\\text{NCO}} = 1$。\n- 额定电网频率：$f_g = 50\\,\\text{Hz}$。\n- 正序峰值电压：$V = 325\\,\\text{V}$。\n- 期望环路带宽：$f_b = 30\\,\\text{Hz}$。\n- 带宽定义：开环传递函数的单位增益穿越频率。\n- 穿越角频率：$\\omega_{gc} = 2\\pi f_b$。\n- 期望相位裕度：$\\text{PM} = 50^\\circ$。\n- 要求输出：比例增益 $K_p$ 和积分增益 $K_i$。\n- 要求单位：$K_p$ 单位为 $\\text{rad}\\,\\text{s}^{-1}\\,\\text{V}^{-1}$，$K_i$ 单位为 $\\text{rad}\\,\\text{s}^{-2}\\,\\text{V}^{-1}$。\n- 取整：最终数值结果保留四位有效数字。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据**：该问题描述了一个同步参考坐标系锁相环 (SRF-PLL) 的标准控制系统设计任务，这是电力电子学中用于电网同步的一项基本技术。小信号模型和线性化是标准的工程实践。该问题是科学合理的。\n- **提法恰当**：该问题提供了两个设计指标（带宽和相位裕度），并要求求解两个未知参数（$K_p$ 和 $K_i$）。这构成了一个可解的方程组，因此该问题是提法恰当的。\n- **客观性**：问题陈述使用了精确的技术语言，没有主观或含糊的术语。\n- **完整性和一致性**：提供了设计所需的所有必要数据，且给定信息内部没有矛盾。电压值 $V = 325\\,\\text{V}$ 对于一个 $230\\,\\text{V}_{\\text{rms}}$ 系统来说是一个实际的峰值电压 ($230\\sqrt{2} \\approx 325.27$)。设计目标是合理的。\n\n### 步骤3：结论与行动\n该问题有效，因为它具有科学依据、提法恰当、客观且自洽。可以继续求解过程。\n\n### 求解推导\n\nSRF-PLL 的小信号模型是一个反馈控制系统。设 $\\theta_e(s)$ 为电网电压相位 $\\theta_g(s)$ 与 PLL 估算相位 $\\hat{\\theta}(s)$ 之间相位误差的拉普拉斯变换，即 $\\theta_e(s) = \\theta_g(s) - \\hat{\\theta}(s)$。\n\nPLL 的开环传递函数 (OLTF) 记为 $L(s)$，是前向通路中各组件传递函数的乘积：鉴相器 (PD)、PI 控制器和数控振荡器 (NCO)。\n$L(s) = \\frac{\\hat{\\theta}(s)}{\\theta_e(s)}$。\n\n1.  **鉴相器 (PD)**：在小信号假设下，q轴电压 $v_q$ 与相位误差 $\\theta_e$ 成正比。增益给定为 $K_{\\text{PD}} = V$。\n    $G_{\\text{PD}}(s) = K_{\\text{PD}} = V$。\n\n2.  **PI 控制器**：PI 控制器是环路滤波器，其比例增益为 $K_p$，积分增益为 $K_i$。其传递函数为：\n    $C(s) = K_p + \\frac{K_i}{s} = \\frac{K_p s + K_i}{s}$。\n\n3.  **数控振荡器 (NCO)**：NCO 作为一个积分器，将估算的角频率 $\\hat{\\omega}$ 转换为估算的相位 $\\hat{\\theta}$。其增益给定为 $K_{\\text{NCO}} = 1$。\n    $G_{\\text{NCO}}(s) = \\frac{K_{\\text{NCO}}}{s} = \\frac{1}{s}$。\n\n组合这些组件，得到开环传递函数 $L(s)$ 为：\n$L(s) = G_{\\text{PD}}(s) \\cdot C(s) \\cdot G_{\\text{NCO}}(s) = V \\left(\\frac{K_p s + K_i}{s}\\right) \\frac{1}{s} = \\frac{V(K_p s + K_i)}{s^2}$。\n\n设计指标是在增益穿越角频率 $\\omega_{gc}$ 处给出的，在该频率下 OLTF 的幅值为1。\n$\\omega_{gc} = 2\\pi f_b = 2\\pi(30\\,\\text{Hz}) = 60\\pi\\,\\text{rad}\\,\\text{s}^{-1}$。\n\n两个设计准则如下：\n1.  **单位增益条件**：OLTF 在 $\\omega_{gc}$ 处的幅值必须为 $1$。\n    $|L(j\\omega_{gc})| = 1$。\n    $L(j\\omega) = \\frac{V(j\\omega K_p + K_i)}{(j\\omega)^2} = \\frac{V(K_i + j\\omega K_p)}{-\\omega^2}$。\n    $|L(j\\omega_{gc})| = \\left| \\frac{V(K_i + j\\omega_{gc} K_p)}{-\\omega_{gc}^2} \\right| = \\frac{V \\sqrt{K_i^2 + (\\omega_{gc} K_p)^2}}{\\omega_{gc}^2}$。\n    将此值设为 $1$ 得到我们的第一个方程：\n    $\\frac{V \\sqrt{K_i^2 + (\\omega_{gc} K_p)^2}}{\\omega_{gc}^2} = 1 \\implies V \\sqrt{K_i^2 + (\\omega_{gc} K_p)^2} = \\omega_{gc}^2$。\n\n2.  **相位裕度条件**：相位裕度 (PM) 定义为 $\\text{PM} = 180^\\circ + \\angle L(j\\omega_c)$，或以弧度表示为 $\\text{PM} = \\pi + \\angle L(j\\omega_{gc})$。\n    $L(j\\omega)$ 的相位为：\n    $\\angle L(j\\omega) = \\angle(V(K_i + j\\omega K_p)) - \\angle(-\\omega^2) = \\arctan\\left(\\frac{\\omega K_p}{K_i}\\right) - \\pi$。\n    在 $\\omega_{gc}$ 处，相位裕度为：\n    $\\text{PM} = \\pi + \\left(\\arctan\\left(\\frac{\\omega_{gc} K_p}{K_i}\\right) - \\pi\\right) = \\arctan\\left(\\frac{\\omega_{gc} K_p}{K_i}\\right)$。\n    使用给定的相位裕度 $\\text{PM} = 50^\\circ$，我们得到第二个方程：\n    $\\tan(\\text{PM}) = \\tan(50^\\circ) = \\frac{\\omega_{gc} K_p}{K_i}$。\n\n现在我们求解这个由两个方程组成的方程组，以求得 $K_p$ 和 $K_i$。\n从相位裕度方程中，我们将 $K_p$ 表示为 $K_i$ 的函数：\n$K_p = \\frac{K_i \\tan(50^\\circ)}{\\omega_{gc}}$。\n\n将这个 $K_p$ 的表达式代入单位增益幅值方程：\n$\\omega_{gc}^2 = V \\sqrt{K_i^2 + \\left(\\omega_{gc} \\frac{K_i \\tan(50^\\circ)}{\\omega_{gc}}\\right)^2} = V \\sqrt{K_i^2 + K_i^2 \\tan^2(50^\\circ)}$。\n$\\omega_{gc}^2 = V K_i \\sqrt{1 + \\tan^2(50^\\circ)}$。\n使用三角恒等式 $1 + \\tan^2(\\theta) = \\sec^2(\\theta)$：\n$\\omega_{gc}^2 = V K_i \\sqrt{\\sec^2(50^\\circ)} = V K_i |\\sec(50^\\circ)|$。\n由于 $50^\\circ$ 在第一象限，$\\sec(50^\\circ)$ 是正值。\n$\\omega_{gc}^2 = V K_i \\sec(50^\\circ) = V K_i \\frac{1}{\\cos(50^\\circ)}$。\n\n求解 $K_i$：\n$K_i = \\frac{\\omega_{gc}^2 \\cos(50^\\circ)}{V}$。\n\n现在我们通过将 $K_i$ 的表达式代回相位裕度关系式来求解 $K_p$：\n$\\frac{\\omega_{gc} K_p}{K_i} = \\tan(50^\\circ) \\implies K_p = \\frac{K_i \\tan(50^\\circ)}{\\omega_{gc}}$。\n$K_p = \\frac{1}{\\omega_{gc}} \\left( \\frac{\\omega_{gc}^2 \\cos(50^\\circ)}{V} \\right) \\tan(50^\\circ) = \\frac{\\omega_{gc}}{V} \\cos(50^\\circ) \\frac{\\sin(50^\\circ)}{\\cos(50^\\circ)}$。\n$K_p = \\frac{\\omega_{gc} \\sin(50^\\circ)}{V}$。\n\n现在，我们代入数值：\n$V = 325\\,\\text{V}$。\n$\\omega_{gc} = 60\\pi\\,\\text{rad}\\,\\text{s}^{-1}$。\n$\\text{PM} = 50^\\circ$。\n\n$K_p = \\frac{(60\\pi)\\,\\sin(50^\\circ)}{325} \\approx \\frac{188.4956 \\times 0.766044}{325} \\approx \\frac{144.4021}{325} \\approx 0.444314\\,\\text{rad}\\,\\text{s}^{-1}\\,\\text{V}^{-1}$。\n四舍五入到四位有效数字，得到 $K_p = 0.4443\\,\\text{rad}\\,\\text{s}^{-1}\\,\\text{V}^{-1}$。\n\n$K_i = \\frac{(60\\pi)^2\\,\\cos(50^\\circ)}{325} \\approx \\frac{35530.5758 \\times 0.642788}{325} \\approx \\frac{22836.315}{325} \\approx 70.2656\\,\\text{rad}\\,\\text{s}^{-2}\\,\\text{V}^{-1}$。\n四舍五入到四位有效数字，得到 $K_i = 70.27\\,\\text{rad}\\,\\text{s}^{-2}\\,\\text{V}^{-1}$。\n\n计算得到的增益为 $K_p=0.4443\\,\\text{rad}\\,\\text{s}^{-1}\\,\\text{V}^{-1}$ 和 $K_i=70.27\\,\\text{rad}\\,\\text{s}^{-2}\\,\\text{V}^{-1}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.4443  70.27\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "除了稳定运行，锁相环还必须能够快速、可预测地响应频率变化等电网扰动。本问题聚焦于这一实际需求，将瞬态性能指标（即最大相位误差和稳定时间）转化为对锁相环带宽的最低要求。通过完成这个练习 ，你将学会如何运用二阶系统模型来确保你的锁相环设计在动态电网条件下具有足够的鲁棒性。",
            "id": "3843653",
            "problem": "一个三相并网变流器采用同步参考坐标系锁相环 (SRF-PLL) 进行并网同步。假设电网平衡，谐波可忽略不计，且 SRF-PLL 工作在小信号状态，因此相位检测器可以在锁定状态附近进行线性化。该 SRF-PLL 使用一个比例积分环路滤波器来驱动压控振荡器，因此闭环小信号相位误差的动态特性为一个二阶II型系统，其特征由自然频率 $\\omega_{n}$ 和阻尼比 $\\zeta$ 决定。设计者将锁相环 (PLL) 的闭环带宽定义为 $f_{b} \\equiv \\omega_{n}/(2\\pi)$。\n\n当电网频率发生一个幅度为 $|\\Delta f| = 2~\\mathrm{Hz}$ 的阶跃时，瞬时相位误差 $\\varphi(t)$ 必须满足以下性能要求：\n- 任何时刻的峰值相位偏移必须满足 $|\\varphi(t)| \\leq 10^{\\circ}$。\n- 根据应用于相位误差衰减齐次响应包络的二阶系统2%整定时间标准，环路必须在 $t_{s} = 50~\\mathrm{ms}$ 内被视为已跟踪到新频率。\n\n从 SRF-PLL 误差动态的线性时不变模型和标准二阶系统定义出发，确定满足这两个要求的最小闭环带宽 $f_{b}$。你可以选择 $\\zeta$ 以最小化所需带宽，但必须从动态特性上证明你的选择是合理的。在所有中间推导中，角度必须以弧度处理；电网频率阶跃为 $\\Delta \\omega = 2\\pi \\Delta f$。以 $\\mathrm{Hz}$ 为单位表示最终带宽，并将答案四舍五入到三位有效数字。",
            "solution": "该问题经核实具有科学依据，提法得当且客观。它代表了电力电子领域一个标准的控制系统设计问题。所有给定的数据和约束条件都是一致且符合实际的。\n\n所研究的系统是一个同步参考坐标系锁相环 (SRF-PLL)。对于锁定状态附近的小信号分析，相位误差 $\\varphi(t) = \\theta_g(t) - \\hat{\\theta}(t)$ 的闭环动态特性（其中 $\\theta_g$ 是电网相位，$\\hat{\\theta}$ 是 PLL 的估计相位）可以用一个二阶II型系统来建模。误差传递函数由下式给出：\n$$\n\\frac{\\Phi(s)}{\\Theta_g(s)} = \\frac{s^2}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2}\n$$\n其中 $\\Phi(s)$ 和 $\\Theta_g(s)$ 分别是相位误差和电网相位的拉普拉斯变换。$\\omega_n$ 是自然频率，$\\zeta$ 是阻尼比。\n\n输入扰动是电网频率发生一个幅度为 $|\\Delta f| = 2~\\mathrm{Hz}$ 的阶跃。角频率的变化为 $\\Delta \\omega = 2\\pi |\\Delta f| = 2\\pi(2) = 4\\pi~\\mathrm{rad/s}$。频率的阶跃对应于相位的斜坡。引起误差的电网相位分量是 $\\theta_g(t) = (\\Delta \\omega) t$（对于 $t \\ge 0$）。该输入的拉普拉斯变换为 $\\Theta_g(s) = \\frac{\\Delta \\omega}{s^2}$。\n\n因此，拉普拉斯域中的相位误差为：\n$$\n\\Phi(s) = \\frac{s^2}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2} \\cdot \\frac{\\Delta \\omega}{s^2} = \\frac{\\Delta \\omega}{s^2 + 2\\zeta\\omega_n s + \\omega_n^2}\n$$\n这是一个标准二阶系统对幅度为 $\\Delta \\omega$ 的冲激的响应。对于欠阻尼系统 ($0  \\zeta  1$)，时域相位误差为：\n$$\n\\varphi(t) = \\frac{\\Delta \\omega}{\\omega_d} e^{-\\zeta \\omega_n t} \\sin(\\omega_d t)\n$$\n其中 $\\omega_d = \\omega_n\\sqrt{1-\\zeta^2}$ 是阻尼自然频率。稳态误差为零，这符合II型系统对斜坡输入的响应预期。\n\n我们必须满足两个性能要求，我们将其表述为对 $\\omega_n$ 和 $\\zeta$ 的约束。\n\n**约束1：峰值相位偏移**\n峰值相位误差 $|\\varphi(t)|$ 不得超过 $\\varphi_{max} = 10^{\\circ} = 10 \\frac{\\pi}{180} = \\frac{\\pi}{18}$ 弧度。$\\varphi(t)$ 的第一个峰值出现在其导数为零时。这发生在时间 $t_p = \\frac{\\arccos(\\zeta)}{\\omega_d}$。将这个时间代回到 $\\varphi(t)$ 的表达式中，得到峰值：\n$$\n\\varphi_{peak} = \\frac{\\Delta \\omega}{\\omega_n} \\exp\\left(-\\frac{\\zeta \\arccos(\\zeta)}{\\sqrt{1-\\zeta^2}}\\right)\n$$\n约束 $\\varphi_{peak} \\leq \\varphi_{max}$ 导出了 $\\omega_n$ 的一个下界：\n$$\n\\omega_n \\geq \\frac{\\Delta \\omega}{\\varphi_{max}} \\exp\\left(-\\frac{\\zeta \\arccos(\\zeta)}{\\sqrt{1-\\zeta^2}}\\right)\n$$\n\n**约束2：整定时间**\n整定时间 $t_s$ 必须小于或等于 $t_{s,max} = 50~\\mathrm{ms} = 0.05~\\mathrm{s}$。问题使用应用于衰减的齐次响应包络的2%标准来定义整定时间。$\\varphi(t)$ 的包络由项 $e^{-\\zeta\\omega_n t}$ 控制。该包络衰减到其初始值的2%所需的时间可以通过求解 $e^{-\\zeta\\omega_n t_s} = 0.02$ 来找到。\n$$\n-\\zeta\\omega_n t_s = \\ln(0.02) = -\\ln(50) \\implies t_s = \\frac{\\ln(50)}{\\zeta \\omega_n}\n$$\n约束 $t_s \\leq t_{s,max}$ 导出了 $\\omega_n$ 的第二个下界：\n$$\n\\omega_n \\geq \\frac{\\ln(50)}{\\zeta t_{s,max}}\n$$\n\n**优化**\n为了找到所需的最小带宽 $f_b = \\omega_n / (2\\pi)$，我们必须找到在某个 $\\zeta$ 的选择下，满足两个约束的最小 $\\omega_n$。所需的 $\\omega_n$ 为：\n$$\n\\omega_{n,req} = \\max\\left( \\frac{\\Delta \\omega}{\\varphi_{max}} \\exp\\left(-\\frac{\\zeta \\arccos(\\zeta)}{\\sqrt{1-\\zeta^2}}\\right), \\frac{\\ln(50)}{\\zeta t_{s,max}} \\right)\n$$\n我们想找到 $\\min_{0  \\zeta \\leq 1} \\{ \\omega_{n,req} \\}$。让我们分析这两个界限对 $\\zeta$ 的依赖性。第二个界限中的项 $\\frac{1}{\\zeta}$ 是 $\\zeta$ 的递减函数。对于第一个界限，指数的参数 $-\\frac{\\zeta \\arccos(\\zeta)}{\\sqrt{1-\\zeta^2}}$ 对于 $\\zeta \\in (0,1)$ 是一个增函数，这意味着指数项也是增加的。然而，它的值总是小于1，并且可以证明整个界限函数随 $\\zeta$ 单调递减。由于 $\\omega_n$ 的两个下界都随着 $\\zeta$ 的增加而减小，所需的最小 $\\omega_n$ 将在 $\\zeta$ 允许的最大值处实现。使两个界限都最小化的最优选择是临界阻尼情况，$\\zeta = 1$。这提供了最快的无振荡响应，对整定时间和峰值偏移都有利。\n\n对于临界阻尼情况 ($\\zeta=1$)，相位误差响应变为：\n$$\n\\varphi(t) = \\mathcal{L}^{-1}\\left\\{\\frac{\\Delta \\omega}{(s+\\omega_n)^2}\\right\\} = \\Delta \\omega \\cdot t \\cdot e^{-\\omega_n t}\n$$\n对 $\\zeta=1$ 重新评估约束条件：\n1.  **峰值偏移**: $\\varphi(t)$ 的峰值出现在 $t_p = 1/\\omega_n$。峰值为 $\\varphi_{peak} = \\Delta \\omega (1/\\omega_n) e^{-1} = \\frac{\\Delta\\omega}{e\\omega_n}$。\n    约束为 $\\frac{\\Delta\\omega}{e\\omega_n} \\leq \\varphi_{max}$，这给出 $\\omega_n \\geq \\frac{\\Delta\\omega}{e\\varphi_{max}}$。\n2.  **整定时间**: 使用从指数包络推导出的相同定义，我们取 $\\zeta \\to 1$ 的极限，得到 $t_s = \\frac{\\ln(50)}{\\omega_n}$。\n    约束为 $\\frac{\\ln(50)}{\\omega_n} \\leq t_{s,max}$，这给出 $\\omega_n \\geq \\frac{\\ln(50)}{t_{s,max}}$。\n\n现在，我们代入给定的数值：\n$\\Delta \\omega = 4\\pi~\\mathrm{rad/s}$\n$\\varphi_{max} = \\pi/18~\\mathrm{rad}$\n$t_{s,max} = 0.05~\\mathrm{s}$\n\n计算 $\\omega_n$ 的两个下界：\n根据峰值偏移约束：\n$$\n\\omega_{n,1} = \\frac{4\\pi}{e(\\pi/18)} = \\frac{72}{e} \\approx 26.487~\\mathrm{rad/s}\n$$\n根据整定时间约束：\n$$\n\\omega_{n,2} = \\frac{\\ln(50)}{0.05} \\approx \\frac{3.91202}{0.05} \\approx 78.240~\\mathrm{rad/s}\n$$\n所需的自然频率必须大于或等于这两个值的最大值：\n$$\n\\omega_{n,min} = \\max(\\omega_{n,1}, \\omega_{n,2}) = \\max(26.487, 78.240) = 78.240~\\mathrm{rad/s}\n$$\n整定时间要求是限制因素。最小闭环带宽 $f_b$ 定义为 $\\omega_n/(2\\pi)$。\n$$\nf_{b,min} = \\frac{\\omega_{n,min}}{2\\pi} = \\frac{78.240}{2\\pi} \\approx 12.454~\\mathrm{Hz}\n$$\n将最终答案四舍五入到三位有效数字得到 $12.5~\\mathrm{Hz}$。",
            "answer": "$$\n\\boxed{12.5}\n$$"
        },
        {
            "introduction": "尽管许多设计始于连续时间域，但最终的实现几乎总是数字化的。这一转换并非没有挑战，因为采样和处理延迟会引入额外的相位滞后，从而降低性能甚至导致系统失稳。本练习  探讨了这一关键问题，通过量化由零阶保持器和计算延迟引起的相位裕度下降，让你能够计算出确保设计稳定的最大允许采样周期。",
            "id": "3843645",
            "problem": "一个三相同步旋转坐标系锁相环 (SRF-PLL) 在连续时间内被设计用于与一个 $50$ Hz 的电网同步。在其围绕锁定状态的线性化小信号形式中，鉴相器增益近似为一个常数，环路滤波器为比例积分型，而压控振荡器（或数控振荡器）贡献一个积分器。该连续时间开环设计在没有采样或保持的情况下实现时，已经通过（独立的仿真伯德图分析）验证，其穿越频率为 $\\omega_{c} = 2\\pi \\cdot 20$ rad/s，相位裕度为 $60^\\circ$。\n\n在数字实现中，对振荡器的控制指令每个采样周期更新一次。驱动信号由一个持续时间等于采样周期 $T$ 的零阶保持器 (ZOH) 保持，并且计算和更新调度引入了恰好一个采样周期的延迟（即，在第 $k$ 个采样点计算的控制量在第 $k+1$ 个采样点应用，假设采样和驱动是同步的）。\n\n仅从以下基本要素出发：\n- 相位裕度的定义，即 $180^\\circ$ 与增益穿越频率下的环路相位之差。\n- 周期为 $T$ 的零阶保持器的精确频率响应。\n- 持续时间为 $\\tau$ 的纯时间延迟的频率响应。\n\n推导 ZOH 和离散更新延迟如何改变环路在 $\\omega_{c}$ 处的相位，量化这些机制在 $\\omega_{c}$ 处引入的额外相位滞后，并计算最大允许采样周期 $T_{\\max}$，以使最终的相位裕度严格大于 $45^\\circ$。\n\n以毫秒为单位表示最终的 $T_{\\max}$，并将答案四舍五入到四位有效数字。在问题描述中使用度来表示角度，并在任何内部计算中使用弧度。",
            "solution": "问题已通过验证。\n\n### 第一步：提取已知条件\n- 系统：三相同步旋转坐标系锁相环 (SRF-PLL)\n- 电网频率: $50$ Hz\n- 连续时间开环增益穿越频率: $\\omega_{c} = 2\\pi \\cdot 20$ rad/s\n- 连续时间开环相位裕度: $60^\\circ$\n- 数字实现引入的效应：\n    1. 周期为 $T$ 的零阶保持器 (ZOH)。\n    2. 一个采样周期的计算延迟，持续时间为 $T$。\n- 要求的最终相位裕度：严格大于 $45^\\circ$。\n- 推导所需的基本要素：\n    1. 相位裕度的定义。\n    2. ZOH 的精确频率响应。\n    3. 纯时间延迟的频率响应。\n\n### 第二步：使用提取的已知条件进行验证\n- **科学依据**：该问题基于应用于电力电子学的数字控制理论的标准原理，这是电气工程的核心课题。SRF-PLL、ZOH 和计算延迟都是标准模型。各方面都具有科学合理性。\n- **问题定义明确**：该问题提供了充分的初始条件（连续时间性能）和明确的约束（最终相位裕度），足以确定采样周期 $T$ 的唯一最大值。\n- **客观性**：问题陈述使用了精确、量化且无偏见的语言。\n\n### 第三步：结论与行动\n该问题有效。将提供完整解答。\n\n### 推导过程\n设原始连续时间系统的开环传递函数为 $G_{OL,c}(s)$。增益穿越频率 $\\omega_c$ 由条件 $|G_{OL,c}(j\\omega_c)| = 1$ 定义。相位裕度 $PM$ 定义为 $PM = 180^\\circ + \\angle G_{OL,c}(j\\omega_c)$。\n\n给定初始相位裕度 $PM_c = 60^\\circ$，我们可以求出连续时间系统在穿越频率处的相位：\n$$60^\\circ = 180^\\circ + \\angle G_{OL,c}(j\\omega_c)$$\n$$\\angle G_{OL,c}(j\\omega_c) = 60^\\circ - 180^\\circ = -120^\\circ$$\n以弧度表示，该相位为 $\\angle G_{OL,c}(j\\omega_c) = -120^\\circ \\cdot \\frac{\\pi}{180^\\circ} = -\\frac{2\\pi}{3}$ 弧度。\n\n数字实现向环路中引入了两个效应：一个零阶保持器 (ZOH) 和一个采样点的计算延迟。我们将分析每个组件引入的相位滞后。\n\n1.  **零阶保持器 (ZOH)**：保持时间为 $T$ 的 ZOH 的传递函数是 $G_{\\text{ZOH}}(s) = \\frac{1 - \\exp(-sT)}{s}$。其频率响应通过令 $s = j\\omega$ 获得：\n    $$G_{\\text{ZOH}}(j\\omega) = \\frac{1 - \\exp(-j\\omega T)}{j\\omega}$$\n    为了求出相位，我们重写分子部分：\n    $$1 - \\exp(-j\\omega T) = 1 - (\\cos(-\\omega T) + j\\sin(-\\omega T)) = 1 - \\cos(\\omega T) + j\\sin(\\omega T)$$\n    分子的相位是 $\\arctan\\left(\\frac{\\sin(\\omega T)}{1 - \\cos(\\omega T)}\\right)$。使用半角恒等式 $\\tan(\\theta/2) = \\frac{\\sin(\\theta)}{1 - \\cos(\\theta)}$，这变为 $\\arctan(\\cot(\\omega T/2)) = \\frac{\\pi}{2} - \\frac{\\omega T}{2}$。分母 $j\\omega$ 的相位是 $\\frac{\\pi}{2}$。\n    ZOH 的总相位是分子的相位减去分母的相位：\n    $$\\angle G_{\\text{ZOH}}(j\\omega) = \\left(\\frac{\\pi}{2} - \\frac{\\omega T}{2}\\right) - \\frac{\\pi}{2} = -\\frac{\\omega T}{2} \\text{ radians}$$\n    因此，ZOH 引入了 $\\frac{\\omega T}{2}$ 的相位滞后。\n\n2.  **计算延迟**：问题陈述了一个等于一个采样周期 $T$ 的纯时间延迟。该延迟的传递函数为 $G_{d}(s) = \\exp(-sT)$。其频率响应为：\n    $$G_{d}(j\\omega) = \\exp(-j\\omega T)$$\n    此延迟的相位贡献为：\n    $$\\angle G_{d}(j\\omega) = -\\omega T \\text{ radians}$$\n\n由数字实现引入的总额外相位滞后 $\\Delta\\phi_{\\text{dig}}(\\omega)$ 是 ZOH 和计算延迟所致相位滞后之和：\n$$\\Delta\\phi_{\\text{dig}}(\\omega) = \\angle G_{\\text{ZOH}}(j\\omega) + \\angle G_{d}(j\\omega) = -\\frac{\\omega T}{2} - \\omega T = -\\frac{3}{2}\\omega T$$\n\n问题要求评估这些延迟对相位裕度的影响。引入这些延迟元件会轻微降低开环增益，导致真实的穿越频率降低。然而，一个标准且有效的近似方法，即根据问题中的表述“改变环路在 $\\omega_c$ 处的相位”，是在原始穿越频率 $\\omega_c$ 处评估相位恶化情况。\n\n环路在 $\\omega_c$ 处的新相位为：\n$$\\angle G_{OL,d}(j\\omega_c) = \\angle G_{OL,c}(j\\omega_c) + \\Delta\\phi_{\\text{dig}}(\\omega_c) = -\\frac{2\\pi}{3} - \\frac{3}{2}\\omega_c T$$\n新的相位裕度 $PM_d$ 为：\n$$PM_d = \\pi + \\angle G_{OL,d}(j\\omega_c) = \\pi - \\frac{2\\pi}{3} - \\frac{3}{2}\\omega_c T = \\frac{\\pi}{3} - \\frac{3}{2}\\omega_c T$$\n这表明初始为 $\\frac{\\pi}{3}$ 弧度 ($60^\\circ$) 的相位裕度减少了 $\\frac{3}{2}\\omega_c T$。\n\n我们得到的约束条件是，最终的相位裕度必须严格大于 $45^\\circ$，即 $\\frac{\\pi}{4}$ 弧度。\n$$PM_d  \\frac{\\pi}{4}$$\n$$\\frac{\\pi}{3} - \\frac{3}{2}\\omega_c T  \\frac{\\pi}{4}$$\n为了求出最大采样周期 $T_{\\max}$，我们对不等式求解 $T$：\n$$\\frac{\\pi}{3} - \\frac{\\pi}{4}  \\frac{3}{2}\\omega_c T$$\n$$\\frac{4\\pi - 3\\pi}{12}  \\frac{3}{2}\\omega_c T$$\n$$\\frac{\\pi}{12}  \\frac{3}{2}\\omega_c T$$\n$$T  \\frac{2\\pi}{12 \\cdot 3 \\omega_c} = \\frac{\\pi}{18 \\omega_c}$$\n因此，最大允许采样周期为 $T_{\\max} = \\frac{\\pi}{18 \\omega_c}$。\n\n现在，我们代入给定的值 $\\omega_c = 2\\pi \\cdot 20$ rad/s：\n$$T_{\\max} = \\frac{\\pi}{18 (2\\pi \\cdot 20)} = \\frac{1}{18 \\cdot 2 \\cdot 20} = \\frac{1}{720} \\text{ s}$$\n问题要求以毫秒为单位给出答案，并四舍五入到四位有效数字。\n$$T_{\\max} = \\frac{1}{720} \\text{ s} \\times \\frac{1000 \\text{ ms}}{1 \\text{ s}} = \\frac{1000}{720} \\text{ ms} = \\frac{100}{72} \\text{ ms} = \\frac{25}{18} \\text{ ms}$$\n$$T_{\\max} \\approx 1.3888... \\text{ ms}$$\n四舍五入到四位有效数字，我们得到：\n$$T_{\\max} \\approx 1.389 \\text{ ms}$$\n在此最大采样周期下，ZOH 和延迟引入的额外相位滞后为 $|\\Delta\\phi_{\\text{dig}}(\\omega_c)| = \\frac{3}{2} \\omega_c T_{\\max} = \\frac{3}{2} (2\\pi \\cdot 20) \\frac{1}{720} = \\frac{60\\pi}{720} = \\frac{\\pi}{12}$ 弧度，即 $15^\\circ$，这正确地将相位裕度从 $60^\\circ$ 降低到 $45^\\circ$。“严格大于”的条件意味着我们必须选择 $T  T_{\\max}$。问题要求的是最大允许采样周期，即此条件的边界值。\n\n总结来说，由 ZOH 和单采样点延迟引入的总相位滞后为 $-\\frac{3}{2}\\omega T$。初始相位裕度 ($60^\\circ$) 与最小期望相位裕度 ($45^\\circ$) 之差为 $15^\\circ$，即 $\\frac{\\pi}{12}$ 弧度。这是在穿越频率处可以容忍的最大相位滞后。设 $\\frac{3}{2}\\omega_c T_{\\max} = \\frac{\\pi}{12}$ 即可得出解。",
            "answer": "$$\\boxed{1.389}$$"
        }
    ]
}
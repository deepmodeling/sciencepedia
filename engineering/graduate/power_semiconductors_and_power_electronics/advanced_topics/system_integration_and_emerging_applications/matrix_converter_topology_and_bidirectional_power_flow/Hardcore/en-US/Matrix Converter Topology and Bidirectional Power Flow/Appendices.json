{
    "hands_on_practices": [
        {
            "introduction": "Understanding and quantifying power loss is the first step in evaluating a converter's performance and is essential for proper thermal design. This exercise guides you through modeling the two primary loss mechanisms in semiconductor switches—conduction and switching—to build a foundational understanding of converter efficiency. By deriving expressions for these losses from fundamental device parameters and operating conditions, you will gain critical insight into how component selection and switching frequency affect overall performance .",
            "id": "3857126",
            "problem": "A three-phase to three-phase direct matrix converter uses $9$ identical bidirectional switches to connect a balanced three-phase input to a balanced three-phase output with sinusoidal currents. Each bidirectional switch is modeled, when conducting a phase current $i_{s}(t)$, by an on-state voltage drop composed of a constant term and a resistive term, such that the instantaneous conduction dissipation in that conducting path is $p_{\\text{cond}}(t)=V_{\\text{on}}|i_{s}(t)|+R_{\\text{on}}\\,i_{s}^{2}(t)$, where $V_{\\text{on}}$ and $R_{\\text{on}}$ are device parameters that do not depend on time.\n\nAssume the modulation law enforces that at any instant exactly $3$ switches conduct, one per output phase, and the current through each conducting switch equals the corresponding output phase current (ideal switching, negligible commutation overlap, and no circulating currents). The three output phase currents are balanced and given by\n$$\ni_{a}(t)=\\hat{I}_{o}\\sin(\\omega_{o}t),\\quad\ni_{b}(t)=\\hat{I}_{o}\\sin(\\omega_{o}t-\\tfrac{2\\pi}{3}),\\quad\ni_{c}(t)=\\hat{I}_{o}\\sin(\\omega_{o}t+\\tfrac{2\\pi}{3}),\n$$\nwith angular frequency $\\omega_{o}$ and peak amplitude $\\hat{I}_{o}$. Let the fundamental output electrical period be $T_{o}=\\tfrac{2\\pi}{\\omega_{o}}$.\n\nSwitching transitions are assumed to be hard-switched with energy loss per event independent of time: a turn-on energy $E_{\\text{on}}$ and a turn-off energy $E_{\\text{off}}$. Each of the $9$ bidirectional switches commutates uniformly $n_{\\text{on}}$ turn-ons and $n_{\\text{off}}$ turn-offs per switching period $T_{s}=\\tfrac{1}{f_{s}}$, where $f_{s}$ is the carrier switching frequency. Assume commutation count and event energies are independent of the output frequency and phase angle.\n\nStarting from these definitions and the requirement that average power over an electrical period is the time-average of instantaneous dissipation, derive closed-form expressions for:\n- the total average conduction loss $P_{c}$ across all $9$ bidirectional switches over one electrical period, and\n- the total average switching loss $P_{s}$ across all $9$ bidirectional switches over one electrical period.\n\nExpress your final answers as analytic expressions in terms of $V_{\\text{on}}$, $R_{\\text{on}}$, $\\hat{I}_{o}$, $E_{\\text{on}}$, $E_{\\text{off}}$, $n_{\\text{on}}$, $n_{\\text{off}}$, and $f_{s}$. Express the final average powers in watts. No numerical evaluation is required.",
            "solution": "The problem as stated is scientifically grounded, well-posed, and self-contained. The models for conduction and switching losses are standard, simplified representations used in power electronics analysis. The given conditions are sufficient and consistent for deriving the required expressions. I will proceed with the solution.\n\nThe objective is to derive the total average conduction loss, $P_{c}$, and the total average switching loss, $P_{s}$, over one fundamental output period $T_{o}$.\n\n**1. Derivation of Average Conduction Loss ($P_{c}$)**\n\nThe instantaneous conduction power dissipation in a single switch carrying current $i_{s}(t)$ is given by:\n$$p_{\\text{cond}}(t) = V_{\\text{on}}|i_{s}(t)| + R_{\\text{on}}i_{s}^{2}(t)$$\nAccording to the problem statement, at any given instant $t$, exactly three switches are conducting, one for each output phase. The currents flowing through these switches are the output phase currents $i_{a}(t)$, $i_{b}(t)$, and $i_{c}(t)$.\n\nThe total instantaneous conduction loss for the entire converter, $p_{c,\\text{total}}(t)$, is the sum of the losses in these three active switches:\n$$p_{c,\\text{total}}(t) = (V_{\\text{on}}|i_{a}(t)| + R_{\\text{on}}i_{a}^{2}(t)) + (V_{\\text{on}}|i_{b}(t)| + R_{\\text{on}}i_{b}^{2}(t)) + (V_{\\text{on}}|i_{c}(t)| + R_{\\text{on}}i_{c}^{2}(t))$$\nThis can be regrouped as:\n$$p_{c,\\text{total}}(t) = V_{\\text{on}}(|i_{a}(t)| + |i_{b}(t)| + |i_{c}(t)|) + R_{\\text{on}}(i_{a}^{2}(t) + i_{b}^{2}(t) + i_{c}^{2}(t))$$\nThe average conduction loss $P_{c}$ over one electrical period $T_{o} = \\frac{2\\pi}{\\omega_{o}}$ is the time average of $p_{c,\\text{total}}(t)$:\n$$P_{c} = \\frac{1}{T_{o}}\\int_{0}^{T_{o}} p_{c,\\text{total}}(t) \\,dt$$\n$$P_{c} = \\frac{V_{\\text{on}}}{T_{o}}\\int_{0}^{T_{o}} (|i_{a}(t)| + |i_{b}(t)| + |i_{c}(t)|) \\,dt + \\frac{R_{\\text{on}}}{T_{o}}\\int_{0}^{T_{o}} (i_{a}^{2}(t) + i_{b}^{2}(t) + i_{c}^{2}(t)) \\,dt$$\nThis expression can be evaluated by calculating the average rectified value and the mean square value for the phase currents.\n\nFirst, let's find the average rectified value of a single phase current, for example $i_{a}(t) = \\hat{I}_{o}\\sin(\\omega_{o}t)$. Let this be denoted $\\langle |i_{a}| \\rangle$.\n$$\\langle |i_{a}| \\rangle = \\frac{1}{T_{o}}\\int_{0}^{T_{o}} |\\hat{I}_{o}\\sin(\\omega_{o}t)| \\,dt$$\nThe function $|\\sin(\\omega_{o}t)|$ is periodic with period $T_{o}/2 = \\pi/\\omega_{o}$. We can integrate over a half-period and average:\n$$\\langle |i_{a}| \\rangle = \\frac{1}{T_{o}/2}\\int_{0}^{T_{o}/2} \\hat{I}_{o}\\sin(\\omega_{o}t) \\,dt = \\frac{\\omega_{o}}{\\pi}\\hat{I}_{o} \\left[-\\frac{\\cos(\\omega_{o}t)}{\\omega_{o}}\\right]_{0}^{\\pi/\\omega_{o}}$$\n$$\\langle |i_{a}| \\rangle = \\frac{\\hat{I}_{o}}{\\pi} [-\\cos(\\pi) - (-\\cos(0))] = \\frac{\\hat{I}_{o}}{\\pi}[1 - (-1)] = \\frac{2\\hat{I}_{o}}{\\pi}$$\nSince the three currents are phase-shifted sinusoids of the same amplitude, their average rectified values are identical: $\\langle |i_{a}| \\rangle = \\langle |i_{b}| \\rangle = \\langle |i_{c}| \\rangle = \\frac{2\\hat{I}_{o}}{\\pi}$.\nThe total contribution from the $V_{\\text{on}}$ term is:\n$$V_{\\text{on}}(\\langle |i_{a}| \\rangle + \\langle |i_{b}| \\rangle + \\langle |i_{c}| \\rangle) = V_{\\text{on}}\\left(3 \\times \\frac{2\\hat{I}_{o}}{\\pi}\\right) = \\frac{6}{\\pi}V_{\\text{on}}\\hat{I}_{o}$$\n\nNext, let's find the mean square value of a single phase current, $\\langle i_{a}^{2} \\rangle$. This is the square of its RMS value.\n$$\\langle i_{a}^{2} \\rangle = \\frac{1}{T_{o}}\\int_{0}^{T_{o}} (\\hat{I}_{o}\\sin(\\omega_{o}t))^{2} \\,dt = \\frac{\\hat{I}_{o}^{2}}{T_{o}}\\int_{0}^{T_{o}} \\sin^{2}(\\omega_{o}t) \\,dt$$\nUsing the identity $\\sin^{2}(\\theta) = \\frac{1}{2}(1 - \\cos(2\\theta))$:\n$$\\langle i_{a}^{2} \\rangle = \\frac{\\hat{I}_{o}^{2}}{T_{o}}\\int_{0}^{T_{o}} \\frac{1}{2}(1 - \\cos(2\\omega_{o}t)) \\,dt$$\nThe integral of $\\cos(2\\omega_{o}t)$ over one period $T_{o}$ (which is two periods of the cosine term) is zero.\n$$\\langle i_{a}^{2} \\rangle = \\frac{\\hat{I}_{o}^{2}}{2T_{o}}\\int_{0}^{T_{o}} 1 \\,dt = \\frac{\\hat{I}_{o}^{2}}{2T_{o}} [t]_{0}^{T_{o}} = \\frac{\\hat{I}_{o}^{2}}{2}$$\nAgain, due to symmetry, $\\langle i_{a}^{2} \\rangle = \\langle i_{b}^{2} \\rangle = \\langle i_{c}^{2} \\rangle = \\frac{\\hat{I}_{o}^{2}}{2}$.\nThe total contribution from the $R_{\\text{on}}$ term is:\n$$R_{\\text{on}}(\\langle i_{a}^{2} \\rangle + \\langle i_{b}^{2} \\rangle + \\langle i_{c}^{2} \\rangle) = R_{\\text{on}}\\left(3 \\times \\frac{\\hat{I}_{o}^{2}}{2}\\right) = \\frac{3}{2}R_{\\text{on}}\\hat{I}_{o}^{2}$$\n\nCombining both parts, the total average conduction loss $P_{c}$ is:\n$$P_{c} = \\frac{6}{\\pi} V_{\\text{on}} \\hat{I}_{o} + \\frac{3}{2} R_{\\text{on}} \\hat{I}_{o}^{2}$$\n\n**2. Derivation of Average Switching Loss ($P_{s}$)**\n\nThe switching loss model assumes a constant energy loss for each turn-on event ($E_{\\text{on}}$) and each turn-off event ($E_{\\text{off}}$).\nEach of the $9$ bidirectional switches experiences $n_{\\text{on}}$ turn-ons and $n_{\\text{off}}$ turn-offs per switching period $T_{s} = 1/f_{s}$.\n\nThe energy dissipated by a single switch during one switching period $T_{s}$ is:\n$$E_{\\text{sw},1} = n_{\\text{on}} E_{\\text{on}} + n_{\\text{off}} E_{\\text{off}}$$\nThe average switching power loss for one switch, $P_{s,1}$, is this energy divided by the period $T_{s}$:\n$$P_{s,1} = \\frac{E_{\\text{sw},1}}{T_{s}} = (n_{\\text{on}} E_{\\text{on}} + n_{\\text{off}} E_{\\text{off}}) f_{s}$$\nThe problem states that there are $9$ identical switches and that commutation occurs \"uniformly\". It also specifies that \"commutation count and event energies are independent of the output frequency and phase angle\". This means the average switching power loss calculated over the short switching period $T_{s}$ is constant throughout the much longer electrical period $T_{o}$. Therefore, the average over $T_{o}$ is the same as the average over $T_{s}$.\n\nThe total average switching loss $P_{s}$ for the entire converter is the sum of the average losses of all $9$ switches:\n$$P_{s} = 9 \\times P_{s,1} = 9 f_{s} (n_{\\text{on}} E_{\\text{on}} + n_{\\text{off}} E_{\\text{off}})$$\n\nThe final expressions for the average conduction and switching losses are thus determined.",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{6}{\\pi} V_{\\text{on}} \\hat{I}_{o} + \\frac{3}{2} R_{\\text{on}} \\hat{I}_{o}^{2}  9 f_{s} (n_{\\text{on}} E_{\\text{on}} + n_{\\text{off}} E_{\\text{off}}) \\end{pmatrix}}$$"
        },
        {
            "introduction": "Beyond idealized models, the practical implementation of matrix converters requires careful management of switching transients to ensure device reliability. This practice addresses the high voltage slew rates ($dv/dt$) that arise during the essential four-step commutation process, which can damage semiconductor switches if left unmitigated. You will design a passive snubber circuit, a fundamental and widely used technique to safely dissipate transient energy and protect the converter's power stage from destructive overvoltages .",
            "id": "3857135",
            "problem": "A three-phase direct Alternating Current to Alternating Current (AC-AC) matrix converter employs nine bidirectional semiconductor switches to enable bidirectional power flow between an input source and a three-phase inductive load. Safe commutation is performed using a four-step current commutation sequence in which, for a brief interval, both the outgoing and incoming bidirectional switches connecting the output phase node $y$ to input phases $a$ and $b$ are held off, causing the output current to charge parasitic node capacitances and slewing the node voltage. Consider a specific commutation instant $t_0$ at which the output phase $y$ is being reconnected from input phase $a$ to input phase $b$. The instantaneous input phase voltages at $t_0$ are $v_a(t_0) = 310\\,\\text{V}$ and $v_b(t_0) = -210\\,\\text{V}$, so the worst-case voltage step magnitude seen by the commutating path is $V_{\\text{step}} = |v_b(t_0) - v_a(t_0)|$. The output phase current is approximately constant and equal to $i_o = 22\\,\\text{A}$ during the commutation interval, and the effective parasitic capacitance from the output node $y$ to the input network is $C_p = 120\\,\\text{pF}$.\n\nTo limit the output-node voltage slew rate during commutation, a series Resistor-Capacitor ($R_s$–$C_s$) snubber is connected across the incoming bidirectional switch between the output node $y$ and input phase $b$. The design targets are:\n- A maximum allowed output-node slew rate magnitude $\\left|dv/dt\\right|_{\\max} = 4\\,\\text{kV}/\\mu\\text{s}$ during the interval when both switches are off.\n- A maximum allowed average snubber dissipation $P_{\\max} = 10\\,\\text{W}$ at a switching frequency $f_{\\text{sw}} = 12\\,\\text{kHz}$.\n- A limit on the peak snubber current at the instant the incoming switch turns on, $i_{s,\\max} = 8\\,\\text{A}$.\n\nStarting from fundamental circuit relations for capacitors and linear resistors, and consistent with current commutation for a matrix converter, do the following:\n1. Compute the initial output-node slew rate $\\left(dv/dt\\right)_0$ during commutation if no snubber capacitor is added (i.e., only $C_p$ is present).\n2. Determine the minimum $C_s$ such that the output slew rate during the both-switches-off interval satisfies $\\left|dv/dt\\right| \\leq \\left|dv/dt\\right|_{\\max}$, and verify that the resulting average snubber dissipation at $f_{\\text{sw}}$ does not exceed $P_{\\max}$.\n3. Choose $R_s$ so that the peak current into the snubber at the instant the incoming switch turns on does not exceed $i_{s,\\max}$, and verify that the initial slew rate associated with the series $R_s$–$C_s$ step response across the incoming device is not greater than $\\left|dv/dt\\right|_{\\max}$.\n\nExpress your final numerical values as follows and round each to three significant figures:\n- Express $\\left(dv/dt\\right)_0$ in $\\text{V}/\\mu\\text{s}$.\n- Express $R_s$ in $\\Omega$.\n- Express $C_s$ in $\\text{nF}$.",
            "solution": "The problem statement is evaluated to be valid. It is scientifically grounded in the principles of power electronics and circuit theory, specifically concerning the operation of matrix converters, commutation phenomena, and snubber circuit design. The problem is well-posed, providing all necessary parameters and constraints for a unique solution. The language is objective and the values provided are physically realistic for such an application.\n\nThe solution is approached in three parts as requested.\n\nFirst, the worst-case voltage step that the commutating path experiences is calculated. This voltage is the difference between the instantaneous voltages of the incoming and outgoing input phases.\nGiven $v_a(t_0) = 310\\,\\text{V}$ and $v_b(t_0) = -210\\,\\text{V}$.\n$$V_{\\text{step}} = |v_b(t_0) - v_a(t_0)| = |-210\\,\\text{V} - 310\\,\\text{V}| = |-520\\,\\text{V}| = 520\\,\\text{V}$$\n\n**1. Initial Output-Node Slew Rate, $\\left(dv/dt\\right)_0$**\n\nDuring the four-step commutation sequence, there is a brief interval where both the outgoing switch (connecting output phase $y$ to input phase $a$) and the incoming switch (connecting $y$ to $b$) are in the off-state. The inductive load forces a nearly constant current $i_o$ to flow from the output phase $y$. With the switches open, this current must flow into the parasitic capacitance $C_p$ of the output node.\n\nThe fundamental relationship for a capacitor is $i_C = C \\frac{dv_C}{dt}$. In this scenario, without any snubber, the current is $i_o$ and the capacitance is $C_p$. The voltage is the output node voltage, $v_y$. The initial slew rate, denoted as $\\left(dv/dt\\right)_0$, is therefore:\n$$\\left(\\frac{dv_y}{dt}\\right)_0 = \\frac{i_o}{C_p}$$\nGiven the values $i_o = 22\\,\\text{A}$ and $C_p = 120\\,\\text{pF} = 120 \\times 10^{-12}\\,\\text{F}$:\n$$\\left(\\frac{dv_y}{dt}\\right)_0 = \\frac{22\\,\\text{A}}{120 \\times 10^{-12}\\,\\text{F}} = \\frac{22}{1.2 \\times 10^{-10}}\\,\\text{V/s} \\approx 1.8333 \\times 10^{11}\\,\\text{V/s}$$\nThe problem asks for this value in units of $\\text{V}/\\mu\\text{s}$.\n$$\\left(\\frac{dv_y}{dt}\\right)_0 = 1.8333 \\times 10^{11}\\,\\text{V/s} \\times \\frac{1\\,\\text{s}}{10^6\\,\\mu\\text{s}} = 1.8333 \\times 10^5\\,\\text{V}/\\mu\\text{s}$$\nRounding to three significant figures, we get $\\left(dv/dt\\right)_0 = 1.83 \\times 10^5\\,\\text{V}/\\mu\\text{s}$. This value far exceeds the specified maximum of $4\\,\\text{kV}/\\mu\\text{s}$, demonstrating the need for a snubber.\n\n**2. Minimum Snubber Capacitance, $C_s$**\n\nTo limit the slew rate, a snubber capacitor $C_s$ is added. The problem describes a series $R_s-C_s$ snubber placed across the incoming switch. During the \"both switches off\" interval, the snubber capacitor $C_s$ is effectively in parallel with the parasitic capacitance $C_p$ from the perspective of the slewing current $i_o$. This assumes the snubber resistor $R_s$ is small enough that the primary impedance during the fast voltage slew is capacitive. The total capacitance that the current $i_o$ charges is $C_{\\text{total}} = C_p + C_s$.\n\nThe slew rate is now given by:\n$$\\left|\\frac{dv_y}{dt}\\right| = \\frac{i_o}{C_p + C_s}$$\nThis must be less than or equal to the maximum allowed slew rate, $\\left|dv/dt\\right|_{\\max} = 4\\,\\text{kV}/\\mu\\text{s} = 4 \\times 10^9\\,\\text{V/s}$.\n$$\\frac{i_o}{C_p + C_s} \\le \\left|\\frac{dv}{dt}\\right|_{\\max}$$\nTo find the minimum required $C_s$, we set the condition to equality:\n$$C_p + C_s = \\frac{i_o}{\\left|dv/dt\\right|_{\\max}} = \\frac{22\\,\\text{A}}{4 \\times 10^9\\,\\text{V/s}} = 5.5 \\times 10^{-9}\\,\\text{F} = 5.5\\,\\text{nF}$$\nThe minimum snubber capacitance $C_s$ is therefore:\n$$C_s = (5.5 \\times 10^{-9}\\,\\text{F}) - C_p = (5.5 \\times 10^{-9}\\,\\text{F}) - (120 \\times 10^{-12}\\,\\text{F}) = 5.38 \\times 10^{-9}\\,\\text{F} = 5.38\\,\\text{nF}$$\nNext, we verify that the average power dissipation in the snubber does not exceed $P_{\\max} = 10\\,\\text{W}$. The power dissipated in an R-C snubber is given by the energy stored in the capacitor and discharged through the resistor each cycle, multiplied by the switching frequency. The capacitor $C_s$ charges to the full voltage step $V_{\\text{step}}$ and this energy is dissipated once per switching cycle.\n$$P_{\\text{snubber}} = \\frac{1}{2} C_s V_{\\text{step}}^2 f_{\\text{sw}}$$\nUsing the values $C_s = 5.38 \\times 10^{-9}\\,\\text{F}$, $V_{\\text{step}} = 520\\,\\text{V}$, and $f_{\\text{sw}} = 12\\,\\text{kHz} = 12 \\times 10^3\\,\\text{Hz}$:\n$$P_{\\text{snubber}} = \\frac{1}{2} (5.38 \\times 10^{-9}\\,\\text{F}) (520\\,\\text{V})^2 (12 \\times 10^3\\,\\text{Hz}) \\approx 8.74\\,\\text{W}$$\nSince $8.74\\,\\text{W}  10\\,\\text{W}$, the chosen value of $C_s$ is valid.\n\n**3. Snubber Resistance, $R_s$**\n\nThe snubber resistor $R_s$ is chosen to limit the peak discharge current of $C_s$ when the incoming switch turns on. At this moment, we assume the capacitor $C_s$ is charged to the full voltage step $V_{\\text{step}}$ (a worst-case design assumption consistent with the power dissipation calculation). Upon switch closure, the capacitor discharges through $R_s$. The peak current is determined by Ohm's law, as the initial voltage across the resistor is $V_{\\text{step}}$:\n$$i_{s,\\text{peak}} = \\frac{V_{\\text{step}}}{R_s}$$\nThis peak current must not exceed $i_{s,\\max} = 8\\,\\text{A}$. To find the appropriate $R_s$, we choose the minimum resistance that satisfies this constraint:\n$$R_s \\ge \\frac{V_{\\text{step}}}{i_{s,\\max}}$$\n$$R_s = \\frac{520\\,\\text{V}}{8\\,\\text{A}} = 65\\,\\Omega$$\nWe choose $R_s = 65\\,\\Omega$. To present with three significant figures, this is $65.0\\,\\Omega$.\n\nFinally, we must verify that the initial slew rate of the snubber's own step response is within the limit. When the switch turns on, the voltage across the capacitor, $v_C(t)$, discharges exponentially from $V_{\\text{step}}$: $v_C(t) = V_{\\text{step}}\\exp(-t/(R_s C_s))$. The slew rate of this voltage is $\\frac{dv_C}{dt}$. The initial slew rate at $t=0$ is:\n$$\\left.\\frac{dv_C}{dt}\\right|_{t=0} = -\\frac{V_{\\text{step}}}{R_s C_s}$$\nThe magnitude of this initial slew rate is:\n$$\\left|\\frac{dv_C}{dt}\\right|_{\\text{initial}} = \\frac{V_{\\text{step}}}{R_s C_s} = \\frac{520\\,\\text{V}}{(65\\,\\Omega)(5.38 \\times 10^{-9}\\,\\text{F})} \\approx 1.49 \\times 10^9\\,\\text{V/s}$$\nWe compare this to the limit $\\left|dv/dt\\right|_{\\max} = 4 \\times 10^9\\,\\text{V/s}$.\nSince $1.49 \\times 10^9\\,\\text{V/s} \\le 4 \\times 10^9\\,\\text{V/s}$, the condition is met.\n\nThe final computed values, rounded to three significant figures, are:\n- $\\left(dv/dt\\right)_0 = 1.83 \\times 10^5\\,\\text{V}/\\mu\\text{s}$\n- $C_s = 5.38\\,\\text{nF}$\n- $R_s = 65.0\\,\\Omega$",
            "answer": "$$\\boxed{\\begin{pmatrix} 1.83 \\times 10^5  65.0  5.38 \\end{pmatrix}}$$"
        },
        {
            "introduction": "Moving from the component level to the system level, this exercise focuses on the active control that unlocks the high-performance capabilities of the matrix converter. Achieving goals like unity input power factor and fast dynamic response requires a robust feedback control system. This problem walks you through the design of an industry-standard proportional-integral (PI) controller in the synchronous ($d-q$) reference frame, bridging the gap between power circuit dynamics and control theory to ensure stable and efficient operation .",
            "id": "3857186",
            "problem": "A three-phase direct alternating-current to alternating-current matrix converter with bidirectional power flow is connected to a stiff sinusoidal source of angular frequency $\\omega_{\\text{in}} = 2 \\pi \\times 50 \\text{ rad/s}$ through an input $L-R$ filter comprising phase inductance $L = 1.2 \\times 10^{-3} \\text{ H}$ and series resistance $R = 0.12 \\, \\Omega$. The converter employs space-vector modulation such that the commanded input terminal voltage vector $\\mathbf{v}_{i}$ is accurately synthesized at the switching time scale. The input current control is performed in the synchronous reference frame aligned with the input voltage vector, so that unity power factor is achieved by tracking $i_{q}^{\\star} = 0$ while $i_{d}^{\\star}$ is set by the outer power regulator as needed to accommodate varying load, including regenerative operating points.\n\nStarting from Kirchhoff’s Voltage Law and the inductor constitutive relation, derive the small-signal plant seen by the inner input current loop in the aligned synchronous $d$-axis, treating the source voltage component $v_{s,d}$ as a disturbance that is exactly canceled by feed-forward in the control law. Using a proportional-integral controller $u(s) = K_{p} e(s) + K_{i} \\frac{1}{s} e(s)$ acting on the control input $u = v_{s,d} - v_{i,d}$ with error $e = i_{d}^{\\star} - i_{d}$, design the gains to yield a closed-loop characteristic with natural frequency $\\omega_{n} = 2 \\pi \\times 1000 \\text{ rad/s}$ and damping ratio $\\zeta = \\sqrt{2}/2$, ensuring robustness to $\\pm 20\\%$ input voltage magnitude variations and unity power factor across varying load via the $q$-axis current regulation at zero.\n\nExpress the final controller gains $K_{p}$ and $K_{i}$ numerically. Round your answers to four significant figures. Report $K_{p}$ in $\\text{V/A}$ and $K_{i}$ in $\\text{V/(A} \\cdot \\text{s)}$. The final answer must be a single row matrix containing $K_{p}$ and $K_{i}$.",
            "solution": "The problem requires the design of a proportional-integral (PI) controller for the input d-axis current of a three-phase matrix converter. The design will be based on deriving the small-signal plant model and then selecting controller gains to meet specified closed-loop performance criteria.\n\nFirst, we validate the problem statement.\n\n**Step 1: Extract Givens**\n- Converter type: Three-phase direct AC-AC matrix converter with bidirectional power flow.\n- Source: Stiff sinusoidal source with angular frequency $\\omega_{\\text{in}} = 2 \\pi \\times 50 \\text{ rad/s}$.\n- Input filter: Phase inductance $L = 1.2 \\times 10^{-3} \\text{ H}$ and series resistance $R = 0.12 \\, \\Omega$.\n- Modulation: Space-vector modulation accurately synthesizes the commanded input terminal voltage vector $\\mathbf{v}_{i}$.\n- Control Frame: Synchronous reference frame aligned with the input voltage vector.\n- Control Objective: Unity power factor via tracking $i_{q}^{\\star} = 0$.\n- Controller Type: Proportional-Integral controller $u(s) = K_{p} e(s) + K_{i} \\frac{1}{s} e(s)$.\n- Control Input: $u = v_{s,d} - v_{i,d}$.\n- Control Error: $e = i_{d}^{\\star} - i_{d}$.\n- Disturbance Rejection: Source voltage $v_{s,d}$ is treated as a disturbance exactly canceled by feed-forward.\n- Desired Closed-Loop Performance: Natural frequency $\\omega_{n} = 2 \\pi \\times 1000 \\text{ rad/s}$ and damping ratio $\\zeta = \\sqrt{2}/2$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is well-defined within the discipline of power electronics and control systems. It is scientifically grounded, relying on Kirchhoff's laws and standard d-q transformation techniques for modeling three-phase systems. The parameters provided ($L$, $R$, $\\omega_{\\text{in}}$) are physically realistic, and the control objectives ($\\omega_n$, $\\zeta$) are standard design targets. The problem is objective, complete, and well-posed, admitting a unique solution for the controller gains. There are no contradictions or fallacies.\n\n**Step 3: Verdict and Action**\nThe problem is valid. We proceed with the solution.\n\nThe dynamic model of the input filter in the synchronous reference frame ($dq$-frame) rotating at the source angular frequency $\\omega_{\\text{in}}$ is derived from Kirchhoff's Voltage Law (KVL). The KVL for the three phases can be represented by a single vector equation. In the stationary $\\alpha\\beta$-frame, this is:\n$$ \\mathbf{v}_{s,\\alpha\\beta} = R \\mathbf{i}_{\\alpha\\beta} + L \\frac{d\\mathbf{i}_{\\alpha\\beta}}{dt} + \\mathbf{v}_{i,\\alpha\\beta} $$\nTransforming this equation to the $dq$-frame rotating at $\\omega_{\\text{in}}$ involves the relationship $\\frac{d}{dt} (\\mathbf{x}_{\\alpha\\beta}) \\rightarrow (\\frac{d}{dt} + j\\omega_{\\text{in}})\\mathbf{x}_{dq}$. Applying this transformation yields:\n$$ \\mathbf{v}_{s,dq} = R \\mathbf{i}_{dq} + L \\left(\\frac{d\\mathbf{i}_{dq}}{dt} + j\\omega_{\\text{in}}\\mathbf{i}_{dq}\\right) + \\mathbf{v}_{i,dq} $$\nwhere $\\mathbf{v}_{s,dq} = v_{s,d} + jv_{s,q}$, $\\mathbf{i}_{dq} = i_{d} + ji_{q}$, and $\\mathbf{v}_{i,dq} = v_{i,d} + jv_{i,q}$.\nSeparating the real ($d$-axis) and imaginary ($q$-axis) components gives two coupled scalar differential equations:\n$$ v_{s,d} = R i_{d} + L \\frac{di_{d}}{dt} - \\omega_{\\text{in}}L i_{q} + v_{i,d} $$\n$$ v_{s,q} = R i_{q} + L \\frac{di_{q}}{dt} + \\omega_{\\text{in}}L i_{d} + v_{i,q} $$\nThe problem defines the control input for the $d$-axis controller as $u = v_{s,d} - v_{i,d}$. Rearranging the $d$-axis equation to match this definition:\n$$ v_{s,d} - v_{i,d} = L \\frac{di_{d}}{dt} + R i_{d} - \\omega_{\\text{in}}L i_{q} $$\nSo, the plant dynamics are described by:\n$$ u(t) = L \\frac{di_{d}(t)}{dt} + R i_{d}(t) - \\omega_{\\text{in}}L i_{q}(t) $$\nThe term $-\\omega_{\\text{in}}L i_{q}(t)$ represents cross-coupling from the $q$-axis. The problem states that the control system maintains unity power factor by regulating the $q$-axis current to zero ($i_{q}^{\\star} = 0$). Assuming the $q$-axis controller is effective, we can make the standard and reasonable approximation that $i_{q}(t) \\approx 0$. With this simplification, the cross-coupling term vanishes, and the $d$-axis dynamics reduce to:\n$$ u(t) = L \\frac{di_{d}(t)}{dt} + R i_{d}(t) $$\nThis equation defines the small-signal plant to be controlled. To find the plant transfer function, $G_{p}(s) = \\frac{I_{d}(s)}{U(s)}$, we take the Laplace transform of the simplified equation, assuming zero initial conditions:\n$$ U(s) = LsI_{d}(s) + RI_{d}(s) = (Ls + R)I_{d}(s) $$\nThe plant transfer function is therefore:\n$$ G_{p}(s) = \\frac{I_{d}(s)}{U(s)} = \\frac{1}{Ls + R} $$\nThe controller is a PI controller with transfer function $G_{c}(s)$:\n$$ G_{c}(s) = \\frac{U(s)}{E(s)} = K_{p} + \\frac{K_{i}}{s} $$\nwhere $E(s) = I_{d}^{\\star}(s) - I_{d}(s)$ is the error signal.\nThe system is a standard negative feedback control loop. The closed-loop transfer function, $T(s) = \\frac{I_{d}(s)}{I_{d}^{\\star}(s)}$, is given by:\n$$ T(s) = \\frac{G_{c}(s) G_{p}(s)}{1 + G_{c}(s) G_{p}(s)} $$\nFirst, we find the open-loop transfer function $G_{c}(s)G_{p}(s)$:\n$$ G_{c}(s)G_{p}(s) = \\left(K_{p} + \\frac{K_{i}}{s}\\right) \\left(\\frac{1}{Ls + R}\\right) = \\frac{K_{p}s + K_{i}}{s(Ls + R)} $$\nNow, we form the closed-loop transfer function:\n$$ T(s) = \\frac{\\frac{K_{p}s + K_{i}}{s(Ls + R)}}{1 + \\frac{K_{p}s + K_{i}}{s(Ls + R)}} = \\frac{K_{p}s + K_{i}}{s(Ls + R) + K_{p}s + K_{i}} = \\frac{K_{p}s + K_{i}}{Ls^2 + (R + K_{p})s + K_{i}} $$\nThe desired closed-loop behavior is specified by a characteristic equation of the standard second-order form: $s^2 + 2\\zeta\\omega_{n}s + \\omega_{n}^2 = 0$.\nThe characteristic equation of our system is the denominator of $T(s)$ set to zero:\n$$ Ls^2 + (R + K_{p})s + K_{i} = 0 $$\nTo match the standard form, we divide by $L$:\n$$ s^2 + \\frac{R + K_{p}}{L}s + \\frac{K_{i}}{L} = 0 $$\nBy comparing the coefficients of this equation with the standard second-order characteristic equation, we obtain two equations for our two unknown gains, $K_{p}$ and $K_{i}$:\n1. $\\omega_{n}^2 = \\frac{K_{i}}{L}$\n2. $2\\zeta\\omega_{n} = \\frac{R + K_{p}}{L}$\n\nFrom the first equation, we can solve for $K_{i}$:\n$$ K_{i} = L\\omega_{n}^2 $$\nFrom the second equation, we can solve for $K_{p}$:\n$$ R + K_{p} = 2\\zeta\\omega_{n}L \\implies K_{p} = 2\\zeta\\omega_{n}L - R $$\nNow, we substitute the given numerical values:\n- $L = 1.2 \\times 10^{-3} \\text{ H}$\n- $R = 0.12 \\, \\Omega$\n- $\\omega_{n} = 2 \\pi \\times 1000 \\text{ rad/s}$\n- $\\zeta = \\frac{\\sqrt{2}}{2}$\n\nFirst, calculate $K_i$:\n$$ K_{i} = (1.2 \\times 10^{-3}) (2 \\pi \\times 1000)^2 = (1.2 \\times 10^{-3}) (4\\pi^2 \\times 10^6) = 4800\\pi^2 $$\n$$ K_{i} \\approx 47374.101... \\approx 4.737 \\times 10^4 \\,\\text{V/(A} \\cdot \\text{s)} $$\n\nNext, calculate $K_p$:\n$$ K_{p} = 2\\left(\\frac{\\sqrt{2}}{2}\\right)(2\\pi \\times 1000)(1.2 \\times 10^{-3}) - 0.12 $$\n$$ K_{p} = \\sqrt{2} \\times 2000\\pi \\times 1.2 \\times 10^{-3} - 0.12 $$\n$$ K_{p} = 2.4\\pi\\sqrt{2} - 0.12 $$\n$$ K_{p} \\approx 10.662803... - 0.12 = 10.542803... \\approx 10.54 \\,\\text{V/A} $$\n\nThe calculated gains are $K_p \\approx 10.54$ and $K_i \\approx 4.737 \\times 10^4$. These values are to be reported as a row matrix.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n10.54  4.737 \\times 10^{4}\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "理解双有源桥（DAB）变换器的第一步是掌握其功率传输的基本原理。本练习将系统简化至核心要素，以推导相移与功率之间的基本关系。通过分析输入和输出电压匹配（$k=1$）的特殊情况，我们可以清晰地看到功率是如何被控制的，并找出其理论上的最大传输能力 。",
            "id": "3836475",
            "problem": "考虑一个采用单移相（SPS）调制的理想双有源桥（DAB）双向变换器。两个全桥生成方波电压，折算到原边分别为 $v_1(t) = V_1 \\,\\mathrm{sgn}(\\sin(\\omega t))$ 和 $v_2'(t) = V_2' \\,\\mathrm{sgn}(\\sin(\\omega t - \\delta))$，其中 $V_1$ 和 $V_2'$ 是恒定幅值，$\\omega$ 是开关角频率，$\\delta \\in [0,\\pi]$ 是两个桥臂之间的相移。变压器是理想的，其匝数比已并入 $V_2'$，桥臂是理想的，除串联漏感 $L$（折算到原边）外的所有寄生参数均被忽略。折算到原边后，两侧的电感电流相同，并假设系统工作在稳态周期运行状态，无直流偏置。\n\n仅从电感本构关系 $v_L(t) = L \\,\\frac{di(t)}{dt}$、周期为 $T = \\frac{2\\pi}{\\omega}$ 的开关波形的周期性以及上述定义出发，推导在 $k = \\frac{V_2'}{V_1} = 1$ 的特殊情况下，采用SPS控制时，在一个开关周期内从端口1传输到端口2的平均功率。证明作为相移 $\\delta$（以弧度为单位）的函数，传输功率在 $\\delta = \\frac{\\pi}{2}$ 时达到最大值。然后，计算相应的最大功率 $P_{\\max}$，并用 $V_1$、$V_2'$、$\\omega$ 和 $L$ 表示为一个闭式表达式。\n\n最终功率以瓦特（W）为单位表示。相移 $\\delta$ 必须以弧度处理。无需数值代入；请提供精确的解析表达式。最终答案必须是单个表达式。",
            "solution": "问题陈述需经过验证。\n\n### 第1步：提取已知条件\n- **系统**：理想双有源桥（DAB）双向变换器。\n- **调制**：单移相（SPS）。\n- **原边电压波形**：$v_1(t) = V_1 \\,\\mathrm{sgn}(\\sin(\\omega t))$。\n- **副边电压波形（折算到原边）**：$v_2'(t) = V_2' \\,\\mathrm{sgn}(\\sin(\\omega t - \\delta))$。\n- **电压幅值**：$V_1$ 和 $V_2'$ 是恒定的。\n- **角频率**：$\\omega$。\n- **相移**：$\\delta \\in [0,\\pi]$（以弧度为单位）。\n- **变压器**：理想的，匝数比已并入 $V_2'$。\n- **桥臂**：理想的。\n- **电路元件**：仅考虑一个串联漏感 $L$（折算到原边）。\n- **运行条件**：稳态周期运行，周期 $T = \\frac{2\\pi}{\\omega}$，无直流偏置。\n- **基本电感关系**：$v_L(t) = L \\,\\frac{di(t)}{dt}$。\n- **特殊情况条件**：$k = \\frac{V_2'}{V_1} = 1$。\n- **目标**：\n  1. 推导在 $k=1$ 的情况下从端口1传输到端口2的平均功率 $P$。\n  2. 证明 $P$ 在 $\\delta = \\frac{\\pi}{2}$ 时最大。\n  3. 计算最大功率 $P_{\\max}$，并用 $V_1$、$V_2'$、$\\omega$ 和 $L$ 表示为一个闭式表达式。\n\n### 第2步：使用提取的已知条件进行验证\n对问题的有效性进行严格审查。\n\n- **科学基础**：该问题基于理想双有源桥变换器的标准、公认模型。所使用的原理——电感的电压-电流关系（$v=L \\frac{di}{dt}$）、方波的傅里叶级数表示以及平均功率的计算——是电路理论和电力电子学的基础。该设置是教学和分析此类变换器的基石。\n- **适定性**：该问题是适定的。它提供了所有必要的信息：电压波形、单个元件值（$L$）、工作模式（SPS）以及周期性条件。任务是具体的：在给定条件（$k=1$）下推导平均功率的表达式，找到其最大值，并给出该最大值。这会导出一个唯一的、稳定的、有意义的解析解。\n- **客观性**：该问题以精确、客观和标准的技术语言陈述，没有歧义或主观性。\n\n该问题没有违反任何无效性标准。它在科学上是合理的、可形式化的、完整的，并基于一个标准的理想化模型提出了一个明确定义的问题。\n\n### 第3步：结论与行动\n该问题被判定为**有效**。将提供完整解答。\n\n### 推导\n从原边（端口1）在一个开关周期 $T$ 内传输的平均功率 $P$ 由瞬时功率 $p(t) = v_1(t)i(t)$ 的积分给出：\n$$P = \\frac{1}{T} \\int_0^T v_1(t) i(t) dt$$\n其中 $i(t)$ 是流过电感 $L$ 的电流。由于波形的半波对称性，我们可以在半个周期 $T/2 = \\pi/\\omega$ 内计算平均功率：\n$$P = \\frac{1}{T/2} \\int_0^{T/2} v_1(t) i(t) dt$$\n在区间 $t \\in [0, \\pi/\\omega]$ 内，原边电压 $v_1(t)$ 恒为 $V_1$。\n$$P = \\frac{\\omega}{\\pi} \\int_0^{\\pi/\\omega} V_1 i(t) dt = \\frac{V_1 \\omega}{\\pi} \\int_0^{\\pi/\\omega} i(t) dt$$\n为了求得 $P$，我们必须首先确定电感电流 $i(t)$。电感两端的电压为 $v_L(t) = v_1(t) - v_2'(t)$。电流 $i(t)$ 通过对电感电压积分得到：\n$$i(t) = i(0) + \\frac{1}{L} \\int_0^t v_L(\\tau) d\\tau$$\n电压波形是分段恒定的。在第一个半周期 $t \\in [0, \\pi/\\omega]$ 内：\n$v_1(t) = V_1$\n$v_2'(t) = \\begin{cases} -V_2'  \\text{当 } 0 \\le t  \\delta/\\omega \\\\ +V_2'  \\text{当 } \\delta/\\omega \\le t  \\pi/\\omega \\end{cases}$\n\n因此，电感电压 $v_L(t)$ 为：\n$v_L(t) = \\begin{cases} V_1 + V_2'  \\text{当 } 0 \\le t  \\delta/\\omega \\\\ V_1 - V_2'  \\text{当 } \\delta/\\omega \\le t  \\pi/\\omega \\end{cases}$\n\n问题指定了 $k = V_2'/V_1 = 1$ 的情况，这意味着 $V_2' = V_1$。将此条件代入 $v_L(t)$ 的表达式中：\n$v_L(t) = \\begin{cases} V_1 + V_1 = 2V_1  \\text{当 } 0 \\le t  \\delta/\\omega \\\\ V_1 - V_1 = 0  \\text{当 } \\delta/\\omega \\le t  \\pi/\\omega \\end{cases}$\n\n现在我们可以对 $v_L(t)$ 积分来求得 $i(t)$。\n对于 $0 \\le t  \\delta/\\omega$：\n$$i(t) = i(0) + \\frac{1}{L} \\int_0^t 2V_1 d\\tau = i(0) + \\frac{2V_1}{L}t$$\n在 $t=\\delta/\\omega$ 时的电流为 $i(\\delta/\\omega) = i(0) + \\frac{2V_1 \\delta}{L\\omega}$。\n\n对于 $\\delta/\\omega \\le t  \\pi/\\omega$：\n$$i(t) = i(\\delta/\\omega) + \\frac{1}{L} \\int_{\\delta/\\omega}^t 0 d\\tau = i(\\delta/\\omega) = \\text{常数}$$\n所以，$i(\\pi/\\omega) = i(\\delta/\\omega)$。\n\n为了求解初始电流 $i(0)$，我们使用电感电流的稳态半波对称条件：$i(t+T/2) = -i(t)$。这意味着 $i(\\pi/\\omega) = -i(0)$。\n代入我们的表达式：\n$$-i(0) = i(\\pi/\\omega) = i(\\delta/\\omega) = i(0) + \\frac{2V_1 \\delta}{L\\omega}$$\n$$-2i(0) = \\frac{2V_1 \\delta}{L\\omega} \\implies i(0) = -\\frac{V_1 \\delta}{L\\omega}$$\n现在我们得到了在 $V_2'=V_1$ 情况下，第一个半周期内 $i(t)$ 的完整表达式：\n$i(t) = \\begin{cases} -\\frac{V_1 \\delta}{L\\omega} + \\frac{2V_1}{L}t  \\text{当 } 0 \\le t  \\delta/\\omega \\\\ \\frac{V_1 \\delta}{L\\omega}  \\text{当 } \\delta/\\omega \\le t  \\pi/\\omega \\end{cases}$\n\n我们现在可以计算功率方程所需的电流积分：\n$$\\int_0^{\\pi/\\omega} i(t) dt = \\int_0^{\\delta/\\omega} \\left(-\\frac{V_1 \\delta}{L\\omega} + \\frac{2V_1}{L}t\\right) dt + \\int_{\\delta/\\omega}^{\\pi/\\omega} \\frac{V_1 \\delta}{L\\omega} dt$$\n计算第一个积分：\n$$\\left[-\\frac{V_1 \\delta}{L\\omega}t + \\frac{V_1}{L}t^2\\right]_0^{\\delta/\\omega} = -\\frac{V_1 \\delta^2}{L\\omega^2} + \\frac{V_1}{L}\\left(\\frac{\\delta}{\\omega}\\right)^2 = 0$$\n计算第二个积分：\n$$\\left[\\frac{V_1 \\delta}{L\\omega}t\\right]_{\\delta/\\omega}^{\\pi/\\omega} = \\frac{V_1 \\delta}{L\\omega}\\left(\\frac{\\pi}{\\omega} - \\frac{\\delta}{\\omega}\\right) = \\frac{V_1 \\delta(\\pi-\\delta)}{L\\omega^2}$$\n总积分为 $\\int_0^{\\pi/\\omega} i(t) dt = \\frac{V_1 \\delta(\\pi-\\delta)}{L\\omega^2}$。\n\n将此代入功率表达式中：\n$$P(\\delta) = \\frac{V_1 \\omega}{\\pi} \\left( \\frac{V_1 \\delta(\\pi-\\delta)}{L\\omega^2} \\right) = \\frac{V_1^2}{\\omega L \\pi} \\delta(\\pi-\\delta)$$\n这是在 $V_2'=V_1$ 条件下，作为 $\\delta$ 函数的平均传输功率。\n\n为了求最大功率，我们将 $P(\\delta)$ 对 $\\delta$ 求导，并令结果为零。相移 $\\delta$ 被限制在 $[0, \\pi]$。\n$$\\frac{dP}{d\\delta} = \\frac{d}{d\\delta} \\left[ \\frac{V_1^2}{\\omega L \\pi} (\\pi\\delta - \\delta^2) \\right] = \\frac{V_1^2}{\\omega L \\pi} (\\pi - 2\\delta)$$\n将导数设为零以寻找临界点：\n$$\\pi - 2\\delta = 0 \\implies \\delta = \\frac{\\pi}{2}$$\n为了确认这是一个最大值，我们检查二阶导数：\n$$\\frac{d^2P}{d\\delta^2} = \\frac{d}{d\\delta} \\left[ \\frac{V_1^2}{\\omega L \\pi} (\\pi - 2\\delta) \\right] = -\\frac{2V_1^2}{\\omega L \\pi}$$\n由于 $V_1$、$\\omega$ 和 $L$ 都是正的物理量，二阶导数总是负的。这证实了 $P(\\delta)$ 是一个凹函数，临界点 $\\delta=\\frac{\\pi}{2}$ 是 $\\delta \\in [0, \\pi]$ 上的全局最大值。因此，功率在 $\\delta = \\frac{\\pi}{2}$ 时达到最大值。\n\n最后，我们通过将 $\\delta = \\frac{\\pi}{2}$ 代入功率表达式来计算最大功率 $P_{\\max}$：\n$$P_{\\max} = P\\left(\\frac{\\pi}{2}\\right) = \\frac{V_1^2}{\\omega L \\pi} \\left(\\frac{\\pi}{2}\\right)\\left(\\pi - \\frac{\\pi}{2}\\right) = \\frac{V_1^2}{\\omega L \\pi} \\left(\\frac{\\pi}{2}\\right)\\left(\\frac{\\pi}{2}\\right) = \\frac{V_1^2 \\pi^2}{4\\omega L \\pi} = \\frac{V_1^2 \\pi}{4\\omega L}$$\n题目要求用 $V_1$、$V_2'$、$\\omega$ 和 $L$ 表示表达式。由于此推导是在 $V_1=V_2'$ 的条件下进行的，我们可以写成 $V_1^2 = V_1 V_2'$。\n$$P_{\\max} = \\frac{V_1 V_2' \\pi}{4\\omega L}$$\n这是最大平均功率的最终闭式表达式。",
            "answer": "$$\n\\boxed{\\frac{V_1 V_2' \\pi}{4 \\omega L}}\n$$"
        },
        {
            "introduction": "在掌握了基本的功率传输概念后，我们现在考虑一个更普遍的场景，即输入和输出电压可能不完全匹配（$k \\neq 1$）。本练习侧重于推导电感中的均方根（RMS）电流和峰值电流，这两个指标对评估变换器效率和元器件应力至关重要 。理解这些电流量与电压转换比 $k$ 的依赖关系，是优化变换器设计和最小化传导损耗的关键。",
            "id": "3836548",
            "problem": "一个理想的双有源桥（DAB）变换器由两个全桥组成，通过一个高频隔离变压器连接，变压器的总串联漏感折算到原边为 $L$。在单相移（SPS）控制下，原边桥在串联电感上产生幅值为 $V_{1}$ 的方波电压，副边桥产生折算到原边幅值为 $V_{2}'$ 的方波电压。在角开关频率 $\\omega$ 下，两个桥臂电压相移一个角度 $\\delta$（以弧度为单位）。假设开关是理想的，变压器励磁电流可忽略不计，并且桥间的唯一储能元件是串联漏感 $L$。\n\n严格从电感电压和电流的基本关系以及由桥臂产生的方波激励出发，推导在一个开关周期内串联电感的均方根电流 $I_{\\text{rms}}$ 和峰值电流 $I_{\\text{pk}}$ 关于 $V_{1}$、$V_{2}'$、$L$、$\\omega$ 和 $\\delta$ 的闭式表达式。定义变换比参数 $k$ 为 $k \\triangleq V_{2}'/V_{1}$，并解释 $I_{\\text{rms}}$ 和 $I_{\\text{pk}}$ 如何依赖于 $k$。\n\n作为最终报告的答案，请提供 $I_{\\text{rms}}$ 关于 $V_{1}$、$k$、$L$、$\\omega$ 和 $\\delta$（其中 $\\delta$ 以弧度为单位）的单一闭式解析表达式。无需进行数值计算。",
            "solution": "题目陈述已经过验证，被认为是有效的。它具有科学依据，问题定义明确，客观，并包含足够的信息，可以根据电路理论的基本原理推导出唯一的解。\n\n该问题要求在单相移（SPS）控制下，推导理想双有源桥（DAB）变换器中串联电感的均方根（$I_{\\text{rms}}$）和峰值（$I_{\\text{pk}}$）电流。\n\n令角时间定义为 $\\theta = \\omega t$。开关周期为 $T_s = 2\\pi/\\omega$，对应于 $\\theta$ 的一个 $2\\pi$ 弧度的完整周期。原边桥臂电压 $v_1(\\theta)$ 是一个幅值为 $V_1$ 的方波。我们定义它为：\n$$ v_1(\\theta) = \\begin{cases} V_1  \\text{for } 0  \\theta  \\pi \\\\ -V_1  \\text{for } \\pi  \\theta  2\\pi \\end{cases} $$\n折算到原边的副边桥臂电压 $v_2'(\\theta)$ 是一个幅值为 $V_2'$ 的方波，相对于 $v_1(\\theta)$ 相移了角度 $\\delta$。\n$$ v_2'(\\theta) = \\begin{cases} V_2'  \\text{for } \\delta  \\theta  \\pi+\\delta \\\\ -V_2'  \\text{for } \\pi+\\delta  \\theta  2\\pi+\\delta \\end{cases} $$\n串联电感上的电压 $v_L(\\theta)$ 是这两个电压之差：$v_L(\\theta) = v_1(\\theta) - v_2'(\\theta)$。在前半个周期（$0 \\le \\theta \\le \\pi$）内，电感电压为：\n$$ v_L(\\theta) = \\begin{cases} V_1 - (-V_2') = V_1 + V_2'  \\text{for } 0 \\le \\theta  \\delta \\\\ V_1 - V_2'  \\text{for } \\delta \\le \\theta \\le \\pi \\end{cases} $$\n电感电流 $i_L(\\theta)$ 通过对电感电压积分得到，基于基本关系 $v_L(t) = L \\frac{di_L(t)}{dt}$，这可以转化为 $\\frac{di_L(\\theta)}{d\\theta} = \\frac{v_L(\\theta)}{\\omega L}$。\n$$ i_L(\\theta) = i_L(0) + \\frac{1}{\\omega L} \\int_0^\\theta v_L(\\phi) \\,d\\phi $$\n在前半个周期内，电流波形是分段线性的：\n对于 $0 \\le \\theta  \\delta$：\n$$ i_L(\\theta) = i_L(0) + \\frac{V_1 + V_2'}{\\omega L} \\theta $$\n对于 $\\delta \\le \\theta \\le \\pi$：\n$$ i_L(\\theta) = i_L(\\delta) + \\frac{V_1 - V_2'}{\\omega L} (\\theta - \\delta) $$\n其中 $i_L(\\delta) = i_L(0) + \\frac{V_1 + V_2'}{\\omega L} \\delta$。\n\n在稳态下，电感电流呈现半波对称性，即 $i_L(\\theta+\\pi) = -i_L(\\theta)$。令 $\\theta=0$，我们得到条件 $i_L(\\pi) = -i_L(0)$。我们用这个条件来求初始电流 $i_L(0)$。\n$$ i_L(\\pi) = i_L(\\delta) + \\frac{V_1 - V_2'}{\\omega L}(\\pi-\\delta) = i_L(0) + \\frac{V_1 + V_2'}{\\omega L}\\delta + \\frac{V_1 - V_2'}{\\omega L}(\\pi-\\delta) = -i_L(0) $$\n$$ 2i_L(0) = -\\frac{1}{\\omega L} \\left[ (V_1 + V_2')\\delta + (V_1 - V_2')(\\pi-\\delta) \\right] $$\n$$ 2i_L(0) = -\\frac{1}{\\omega L} \\left[ V_1\\delta + V_2'\\delta + V_1\\pi - V_1\\delta - V_2'\\pi + V_2'\\delta \\right] $$\n$$ 2i_L(0) = -\\frac{1}{\\omega L} \\left[ V_1\\pi - V_2'\\pi + 2V_2'\\delta \\right] $$\n代入变换比 $k = V_2'/V_1$：\n$$ i_L(0) = -\\frac{V_1}{2\\omega L} \\left[ \\pi - k\\pi + 2k\\delta \\right] = -\\frac{V_1}{2\\omega L} \\left[ \\pi(1-k) + 2k\\delta \\right] $$\n在 $\\theta=\\delta$ 时的电流为：\n$$ i_L(\\delta) = i_L(0) + \\frac{V_1(1+k)}{\\omega L} \\delta = \\frac{V_1}{2\\omega L} \\left[ -(\\pi(1-k) + 2k\\delta) + 2(1+k)\\delta \\right] $$\n$$ i_L(\\delta) = \\frac{V_1}{2\\omega L} \\left[ -\\pi + k\\pi - 2k\\delta + 2\\delta + 2k\\delta \\right] = \\frac{V_1}{2\\omega L} \\left[ \\pi(k-1) + 2\\delta \\right] $$\n电感电流波形是梯形的。峰值电流 $I_{\\text{pk}}$ 是电流达到的最大绝对值，它出现在开关瞬时。\n$$ I_{\\text{pk}} = \\max\\left(|i_L(0)|, |i_L(\\delta)|\\right) $$\n$I_{\\text{pk}}$ 对 $k$ 的依赖性由两个关于 $k$ 的线性函数的最大值给出，呈现出V形特性。对于给定的 $\\delta$，最小峰值电流发生在 $|i_L(0)| = |i_L(\\delta)|$ 时。\n\n为了求均方根电流 $I_{\\text{rms}}$，我们计算在一个周期内电流平方的平均值的平方根。由于对称性，这可以在半个周期内计算：\n$$ I_{\\text{rms}}^2 = \\frac{1}{\\pi} \\int_0^{\\pi} i_L(\\theta)^2 \\,d\\theta = \\frac{1}{\\pi} \\left[ \\int_0^{\\delta} i_L(\\theta)^2 \\,d\\theta + \\int_{\\delta}^{\\pi} i_L(\\theta)^2 \\,d\\theta \\right] $$\n一个平方线性函数 $y(x)=y_1 + (y_2-y_1)x/L_x$ 在长度为 $L_x$ 的区间上的积分由 $\\frac{L_x}{3} (y_1^2 + y_1 y_2 + y_2^2)$ 给出。\n将此应用于我们的两个分段：\n$$ \\int_0^{\\delta} i_L(\\theta)^2 \\,d\\theta = \\frac{\\delta}{3} \\left[ i_L(0)^2 + i_L(0)i_L(\\delta) + i_L(\\delta)^2 \\right] $$\n$$ \\int_{\\delta}^{\\pi} i_L(\\theta)^2 \\,d\\theta = \\frac{\\pi-\\delta}{3} \\left[ i_L(\\delta)^2 + i_L(\\delta)i_L(\\pi) + i_L(\\pi)^2 \\right] $$\n使用 $i_L(\\pi) = -i_L(0)$：\n$$ \\int_{\\delta}^{\\pi} i_L(\\theta)^2 \\,d\\theta = \\frac{\\pi-\\delta}{3} \\left[ i_L(\\delta)^2 - i_L(\\delta)i_L(0) + i_L(0)^2 \\right] $$\n对积分求和：\n$$ \\pi I_{\\text{rms}}^2 = \\frac{1}{3} \\left[ \\delta(i_L(0)^2 + i_L(0)i_L(\\delta) + i_L(\\delta)^2) + (\\pi-\\delta)(i_L(\\delta)^2 - i_L(0)i_L(\\delta) + i_L(0)^2) \\right] $$\n$$ \\pi I_{\\text{rms}}^2 = \\frac{1}{3} \\left[ \\pi i_L(0)^2 + \\pi i_L(\\delta)^2 + (2\\delta-\\pi)i_L(0)i_L(\\delta) \\right] $$\n为了简化这个表达式，令 $S = i_L(0) + i_L(\\delta)$ 和 $D = i_L(\\delta) - i_L(0)$。那么 $i_L(0) = (S-D)/2$ 和 $i_L(\\delta) = (S+D)/2$，这给出 $i_L(0)^2+i_L(\\delta)^2 = (S^2+D^2)/2$ 和 $i_L(0)i_L(\\delta) = (S^2-D^2)/4$。\n$$ \\pi I_{\\text{rms}}^2 = \\frac{1}{3} \\left[ \\pi \\frac{S^2+D^2}{2} + (2\\delta-\\pi) \\frac{S^2-D^2}{4} \\right] = \\frac{1}{12} \\left[ S^2(2\\pi + 2\\delta - \\pi) + D^2(2\\pi - (2\\delta - \\pi)) \\right] $$\n$$ \\pi I_{\\text{rms}}^2 = \\frac{1}{12} \\left[ S^2(\\pi+2\\delta) + D^2(3\\pi-2\\delta) \\right] $$\n根据我们之前的结果：\n$$ S = i_L(0) + i_L(\\delta) = \\frac{V_1}{\\omega L} (k-1)(\\pi-\\delta) $$\n$$ D = i_L(\\delta) - i_L(0) = \\frac{V_1}{\\omega L} (k+1)\\delta $$\n将这些代入 $I_{\\text{rms}}^2$ 的表达式中：\n$$ 3\\pi I_{\\text{rms}}^2 = \\frac{1}{4} \\left[ \\left(\\frac{V_1}{\\omega L}(k-1)(\\pi-\\delta)\\right)^2 (\\pi+2\\delta) + \\left(\\frac{V_1}{\\omega L}(k+1)\\delta\\right)^2 (3\\pi-2\\delta) \\right] $$\n$$ I_{\\text{rms}}^2 = \\frac{V_1^2}{12\\pi (\\omega L)^2} \\left[ (k-1)^2 (\\pi-\\delta)^2 (\\pi+2\\delta) + (k+1)^2 \\delta^2 (3\\pi-2\\delta) \\right] $$\n取平方根得到 $I_{\\text{rms}}$ 的最终表达式：\n$$ I_{\\text{rms}} = \\frac{V_1}{2\\omega L} \\sqrt{\\frac{1}{3\\pi} \\left[ (k-1)^2 (\\pi-\\delta)^2 (\\pi+2\\delta) + (k+1)^2 \\delta^2 (3\\pi-2\\delta) \\right]} $$\n$I_{\\text{rms}}$ 对 $k$ 的依赖性从 $I_{\\text{rms}}^2$ 的表达式中可以明显看出，它是一个形式为 $A k^2 + B k + C$ 的关于 $k$ 的二次函数。这意味着对于任何给定的相移 $\\delta$，都存在一个变换比 $k$ 的值可以使均方根电流最小化。这是优化变换器效率的一个关键考虑因素。",
            "answer": "$$\\boxed{\\frac{V_1}{2\\omega L} \\sqrt{\\frac{1}{3\\pi} \\left[ (k-1)^{2}(\\pi-\\delta)^{2}(\\pi+2\\delta) + (k+1)^{2}\\delta^{2}(3\\pi-2\\delta) \\right]}}$$"
        },
        {
            "introduction": "最后的这项练习将我们对DAB变换器的理解综合成一个完整的设计优化问题。它超越了单纯的分析，要求我们从工程角度出发，为给定的功率需求和工作条件选择最佳控制参数，以实现损耗最小化，同时确保零电压开关（ZVS）等关键约束得到满足 。通过为单相移（SPS）、双相移（DPS）和三相移（TPS）等不同调制策略构建优化模型，本练习能让我们深入了解现代电力电子变换器设计中的高级控制思想。",
            "id": "3836521",
            "problem": "考虑一个双有源桥（DAB）变换器，它由两个通过高频变压器和串联电感（电感值为 $L$）连接的全桥组成。设原边桥产生幅值为 $V_{p}$ 的方波电压，副边桥产生折算到原边后幅值为 $V_{s}$ 的方波电压。定义电压比 $k$ 为 $k = V_{s}/V_{p}$。开关角频率为 $\\omega$，基波周期为 $T = 2\\pi/\\omega$。该变换器传输指定的平均功率 $P$（假设 $P  0$ 表示功率从原边流向副边）。控制方式可以是单移相（SPS）、双移相（DPS）或三重移相（TPS），其中SPS在两个桥的方波之间使用单一相移 $\\delta \\in (0,\\pi)$，DPS在每个桥中引入一个额外的周期内子移相，而TPS则在每个周期引入两个这样的子移相。将零电压开关（ZVS）定义为换流条件，在该条件下，桥器件在电压重新施加之前，有足够的电感电流来对器件的输出电容进行充电或放电；通过在每个硬开关边沿设置一个最小电感电流幅值 $I_{\\min}  0$ 来对此要求建模。\n\n假设导通损耗占主导地位，并建模为 $P_{\\text{loss}} = R_{\\text{eq}} I_{\\text{rms}}^{2}$，其中 $R_{\\text{eq}}$ 是导通路径的等效串联电阻，$I_{\\text{rms}}$ 是一个基波周期内电感电流的均方根值。忽略励磁电流和寄生电容，除非是为了通过最小边沿电流阈值 $I_{\\min}$ 来强制执行ZVS要求。\n\n你的任务是：\n1.  构建一个约束优化问题，对于给定的 $(P,k)$ 和固定的 $(L,\\omega,V_{p},R_{\\text{eq}},I_{\\min})$，选择控制参数以最小化 $P_{\\text{loss}}$，同时满足所需的平均功率传输和ZVS条件。明确陈述SPS、DPS和TPS各自的决策变量和约束条件，在问题陈述中不提供功率传输或电流波形的目标公式。\n2.  专门针对SPS，从电感电压-电流关系和方波激励出发，推导出平均传输功率 $P$ 作为 $\\delta$、$k$、$V_{p}$、$L$ 和 $\\omega$ 的函数。然后，对于给定的 $(P,k)$，推导出实现指定功率传输的相移 $\\delta^{\\star}$ 的闭式解。将 $\\delta^{\\star}$ 表示为以 $(P,k,V_{p},L,\\omega)$ 为变量的单一解析表达式（单位为弧度）。\n3.  根据每个桥换流瞬间电感电流幅值至少为 $I_{\\min}$ 的要求，推导一个简单的、以 $\\delta$、$I_{\\min}$、$k$、$V_{p}$、$L$ 和 $\\omega$ 表示的、捕捉SPS的ZVS可行性的不等式。陈述 $\\delta^{\\star}$ 必须满足的最终可行性条件。\n4.  简要概述一种有原则的求解方法，用于DPS/TPS优化问题，通过选择子脉冲参数，利用凸性或二次规划论证，在满足相同约束条件下最小化 $P_{\\text{loss}}$，但无需计算这些参数。\n\n请将第2部分的最终答案提供为 $\\delta^{\\star}$ 的单一闭式解析表达式（单位为弧度）。无需进行数值四舍五入。最终方框答案中不包含单位；但在推导中，请将 $\\delta$ 明确视为以弧度为单位的角度。",
            "solution": "该问题陈述已经过验证，被确定为电力电子学领域一个良构的、有科学依据的问题。它没有矛盾、歧义和事实错误。我们可以着手提供完整解答。\n\n### 第1部分：约束优化问题公式化\n\n目标是最小化导通损耗 $P_{\\text{loss}} = R_{\\text{eq}} I_{\\text{rms}}^{2}$，这等效于最小化RMS电感电流的平方 $I_{\\text{rms}}^{2}$，因为 $R_{\\text{eq}}$ 是一个正常数。该优化问题受限于提供指定的平均功率 $P$ 和满足零电压开关（ZVS）条件。我们将为单移相（SPS）、双移相（DPS）和三重移相（TPS）这三种控制方案分别构建此问题。\n\n令 $\\mathbf{x}$ 为控制参数的向量。通用的优化问题是：\n$$\n\\begin{aligned}\n\\underset{\\mathbf{x}}{\\text{minimize}}  \\quad I_{\\text{rms}}^{2}(\\mathbf{x}) \\\\\n\\text{subject to}  \\quad P_{\\text{avg}}(\\mathbf{x}) = P \\\\\n \\quad |i_{L}(t_{\\text{sw}, j}; \\mathbf{x})| \\ge I_{\\min} \\quad \\forall j \\in \\{\\text{switching instants}\\}\n\\end{aligned}\n$$\n其中 $I_{\\text{rms}}^{2}(\\mathbf{x})$ 是均方根电感电流的平方，$P_{\\text{avg}}(\\mathbf{x})$ 是平均传输功率，$i_{L}(t_{\\text{sw}, j}; \\mathbf{x})$ 是在第 $j$ 个硬开关瞬间的电感电流，所有这些都是控制向量 $\\mathbf{x}$ 的函数。\n\n**单移相（SPS）控制**\n在SPS中，原边和副边桥产生两电平方波电压。唯一的控制参数是这两个电压波形之间的相移 $\\delta$。\n-   **决策变量：** 控制参数向量为 $\\mathbf{x} = [\\delta]$，其中对于功率流 $P  0$，相移 $\\delta \\in (0, \\pi)$（单位为弧度）。\n-   **优化问题：**\n    $$\n    \\begin{aligned}\n    \\underset{\\delta}{\\text{minimize}}  \\quad I_{\\text{rms}}^{2}(\\delta) \\\\\n    \\text{subject to}  \\quad P_{\\text{avg}}(\\delta) = P \\\\\n     \\quad |i_L(t=0; \\delta)| \\ge I_{\\min} \\\\\n     \\quad |i_L(t=\\delta/\\omega; \\delta)| \\ge I_{\\min} \\\\\n     \\quad \\delta \\in (0, \\pi)\n    \\end{aligned}\n    $$\n    其他开关瞬间 $t=\\pi/\\omega$ 和 $t=(\\pi+\\delta)/\\omega$ 的电流受对称性约束。\n\n**双移相（DPS）控制**\n在DPS中，每个桥产生一个三电平（准方波）电压。这引入了两个额外的自由度。一种常见的参数化方法是使用原边和副边电压波形中心之间的相移 $\\phi$，以及原边和副边桥输出的占空比 $D_1$ 和 $D_2$。\n-   **决策变量：** $\\mathbf{x} = [\\phi, D_1, D_2]$。$\\phi$ 是外部相移，而 $D_1$ 和 $D_2$ 是内部占空比（与周期内子移相相关），其中 $D_1, D_2 \\in [0, 1]$。\n-   **优化问题：**\n    $$\n    \\begin{aligned}\n    \\underset{\\phi, D_1, D_2}{\\text{minimize}}  \\quad I_{\\text{rms}}^{2}(\\phi, D_1, D_2) \\\\\n    \\text{subject to}  \\quad P_{\\text{avg}}(\\phi, D_1, D_2) = P \\\\\n     \\quad |i_{L}(t_{\\text{sw}, j}; \\phi, D_1, D_2)| \\ge I_{\\min} \\quad \\text{for all } j \\text{ switching instants}\n    \\end{aligned}\n    $$\n    开关瞬间 $t_{\\text{sw}, j}$ 现在是 $D_1$ 和 $D_2$ 的函数。每个半周期内最多有四个不同的开关瞬间。\n\n**三重移相（TPS）控制**\n在TPS中，除了桥之间的相移外，每个桥内的两个桥臂的相移也独立控制。这提供了三个自由度。一种常见的参数化方法是定义桥臂2（$\\phi_2$）、桥臂3（$\\phi_3$）和桥臂4（$\\phi_4$）相对于桥臂1（$\\phi_1=0$）的相移。\n-   **决策变量：** $\\mathbf{x} = [\\phi_2, \\phi_3, \\phi_4]$。电压波形现在是五电平的。\n-   **优化问题：**\n    $$\n    \\begin{aligned}\n    \\underset{\\phi_2, \\phi_3, \\phi_4}{\\text{minimize}}  \\quad I_{\\text{rms}}^{2}(\\phi_2, \\phi_3, \\phi_4) \\\\\n    \\text{subject to}  \\quad P_{\\text{avg}}(\\phi_2, \\phi_3, \\phi_4) = P \\\\\n     \\quad |i_{L}(t_{\\text{sw}, j}; \\phi_2, \\phi_3, \\phi_4)| \\ge I_{\\min} \\quad \\text{for all } j \\text{ switching instants}\n    \\end{aligned}\n    $$\n    开关瞬间现在由四个独立的相移决定。\n\n### 第2部分：SPS功率传输与控制角 $\\delta^{\\star}$\n\n我们推导SPS的平均传输功率。令角时间为 $\\theta = \\omega t$。我们将原边电压 $v_p(\\theta)$ 和折算到原边的副边电压 $v_s(\\theta)$ 定义为方波：\n$$ v_p(\\theta) = V_p \\cdot \\text{sgn}(\\sin(\\theta)) $$\n$$ v_s(\\theta) = V_s \\cdot \\text{sgn}(\\sin(\\theta - \\delta)) = k V_p \\cdot \\text{sgn}(\\sin(\\theta - \\delta)) $$\n电感电压为 $v_L(\\theta) = v_p(\\theta) - v_s(\\theta)$。电感电流动态由 $\\omega L \\frac{di_L}{d\\theta} = v_L(\\theta)$ 给出。\n对于 $\\delta \\in (0, \\pi)$，一个周期内的电感电压波形为：\n$$\nv_L(\\theta) =\n\\begin{cases}\nV_p - (-V_s) = V_p(1+k)  \\text{for } \\theta \\in [0, \\delta) \\\\\nV_p - V_s = V_p(1-k)  \\text{for } \\theta \\in [\\delta, \\pi) \\\\\n-V_p - V_s = -V_p(1+k)  \\text{for } \\theta \\in [\\pi, \\pi+\\delta) \\\\\n-V_p - (-V_s) = -V_p(1-k)  \\text{for } \\theta \\in [\\pi+\\delta, 2\\pi)\n\\end{cases}\n$$\n由于稳态波形的反对称性，$i_L(\\theta+\\pi) = -i_L(\\theta)$，这意味着 $i_L(\\pi) = -i_L(0)$。我们通过对 $v_L(\\theta)$ 在 $[0, \\pi]$ 上积分来找到 $i_L(0)$：\n$$ i_L(\\pi) - i_L(0) = \\frac{1}{\\omega L} \\int_0^\\pi v_L(\\theta) d\\theta = \\frac{V_p}{\\omega L} \\left[ (1+k)\\delta + (1-k)(\\pi-\\delta) \\right] $$\n$$ -2 i_L(0) = \\frac{V_p}{\\omega L} [\\pi(1-k) + 2k\\delta] \\implies i_L(0) = -\\frac{V_p}{2\\omega L}[\\pi(1-k) + 2k\\delta] $$\n从原边传输到副边的平均功率 $P$ 是 $P = \\frac{1}{2\\pi} \\int_0^{2\\pi} v_p(\\theta) i_L(\\theta) d\\theta$。由于对称性，这简化为 $P = \\frac{1}{\\pi} \\int_0^\\pi v_p(\\theta) i_L(\\theta) d\\theta$。因为当 $\\theta \\in (0, \\pi)$ 时 $v_p(\\theta)=V_p$，我们有\n$$ P = \\frac{V_p}{\\pi} \\int_0^\\pi i_L(\\theta) d\\theta $$\n这需要对电流进行积分，而电流是一个分段线性函数。一个更直接的方法是计算每个开关状态期间传输的能量。瞬时功率为 $p(t) = v_p(t)i_L(t)$。平均功率是一个周期内传输的净能量除以周期时长。用于此计算的一个已知捷径得出了以下平均功率表达式：\n$$ P = \\frac{1}{T} \\int_0^T v_L(t) i_m(t) dt $$\n其中 $i_m(t)$ 是与能量传输相关的电流分量。按照上述方法对电流波形进行积分得到的公认结果是：\n$$ P(\\delta) = \\frac{k V_p^2}{\\omega L \\pi} \\delta(\\pi - \\delta) $$\n此表达式对于 $\\delta \\in [0, \\pi]$ 有效。\n为了达到指定的功率 $P$，我们必须解出 $\\delta$。\n$$ P = \\frac{k V_p^2}{\\omega L \\pi} (\\pi\\delta - \\delta^2) $$\n整理成标准二次形式 $a\\delta^2+b\\delta+c=0$：\n$$ \\delta^2 - \\pi\\delta + \\frac{\\pi P \\omega L}{k V_p^2} = 0 $$\n$\\delta$ 的解由二次公式给出：\n$$ \\delta = \\frac{\\pi \\pm \\sqrt{\\pi^2 - 4 \\left(\\frac{\\pi P \\omega L}{k V_p^2}\\right)}}{2} = \\frac{\\pi}{2} \\pm \\frac{\\pi}{2}\\sqrt{1 - \\frac{4 P \\omega L}{\\pi k V_p^2}} $$\n这提供了两个关于 $\\delta=\\pi/2$ 对称的解，假设平方根下的项为非负，这对应于所请求的功率 $P$ 不超过最大可传输功率 $P_{\\text{max}} = \\frac{k V_p^2 \\pi}{4\\omega L}$ 的条件。对于给定的功率 $P$，具有较小相角幅值的解会导致较低的RMS电流，从而产生较低的导通损耗。因此，最优选择 $\\delta^{\\star}$ 是两个正解中较小的一个，这对应于选择减号。\n$$ \\delta^{\\star} = \\frac{\\pi}{2} - \\frac{\\pi}{2}\\sqrt{1 - \\frac{4 P \\omega L}{\\pi k V_p^2}} $$\n\n### 第3部分：SPS的ZVS可行性\n\nZVS条件被建模为在每个硬开关瞬间电感电流幅值至少为 $I_{\\min}$ 的要求。对于SPS，开关事件发生在 $\\theta = 0, \\delta, \\pi, \\pi+\\delta$。由于电流波形的反对称性（$i_L(\\theta+\\pi)=-i_L(\\theta)$），我们只需检查 $\\theta=0$ 和 $\\theta=\\delta$ 处的条件。\n在原边桥开关瞬间（$\\theta=0$）的电流是：\n$$ i_L(0) = -\\frac{V_p}{2\\omega L}[\\pi(1-k) + 2k\\delta] $$\n在副边桥开关瞬间（$\\theta=\\delta$）的电流是通过对电感电压从 $0$ 到 $\\delta$ 积分得到的：\n$$ i_L(\\delta) = i_L(0) + \\frac{1}{\\omega L} \\int_0^\\delta V_p(1+k) d\\theta = i_L(0) + \\frac{V_p(1+k)\\delta}{\\omega L} $$\n$$ i_L(\\delta) = -\\frac{V_p}{2\\omega L}[\\pi(1-k) + 2k\\delta] + \\frac{2V_p(1+k)\\delta}{2\\omega L} = \\frac{V_p}{2\\omega L}[-\\pi(1-k) - 2k\\delta + 2\\delta + 2k\\delta] = \\frac{V_p}{2\\omega L}[2\\delta - \\pi(1-k)] $$\nZVS可行性要求：\n1.  $|i_L(0)| \\ge I_{\\min} \\implies \\left|-\\frac{V_p}{2\\omega L}[\\pi(1-k) + 2k\\delta]\\right| \\ge I_{\\min}$\n2.  $|i_L(\\delta)| \\ge I_{\\min} \\implies \\left|\\frac{V_p}{2\\omega L}[2\\delta - \\pi(1-k)]\\right| \\ge I_{\\min}$\n\n这两个不等式表示了给定相移 $\\delta$ 的ZVS可行性条件。任一电流的较小幅值表示相应的桥更接近失去ZVS（即向硬开关转换）。\n对于给定的工作点 $(P, k)$，特定的相移 $\\delta^{\\star}$（在第2部分中推导）必须满足这两个条件。$\\delta^{\\star}$ 必须满足的最终可行性条件是：\n$$ \\left|-\\frac{V_p}{2\\omega L}[\\pi(1-k) + 2k\\delta^{\\star}]\\right| \\ge I_{\\min} \\quad \\text{and} \\quad \\left|\\frac{V_p}{2\\omega L}[2\\delta^{\\star} - \\pi(1-k)]\\right| \\ge I_{\\min} $$\n其中 $\\delta^\\star = \\frac{\\pi}{2} - \\frac{\\pi}{2}\\sqrt{1 - \\frac{4 P \\omega L}{\\pi k V_p^2}}$。如果这些条件未被满足，则对于给定的变换器参数，工作点 $(P, k)$ 在SPS控制下无法实现ZVS。\n\n### 第4部分：DPS/TPS优化的求解方法\n\nDPS和TPS的优化问题旨在通过选择多个控制参数来最小化导通损耗（$I_{\\text{rms}}^2$），同时满足功率和ZVS约束。一种有原则的求解方法包括以下步骤：\n\n1.  **解析公式化：** 将目标函数（$I_{\\text{rms}}^2$）和约束函数（$P_{\\text{avg}}$、开关电流 $i_L(t_{\\text{sw},j})$）表示为决策变量（例如，对于DPS为 $\\mathbf{x}=[\\phi, D_1, D_2]$）的显式解析函数。\n    -   电感电流 $i_L(t)$ 仍然是时间的分段线性函数。其在任何一点（包括开关瞬间）的值是控制角度/占空比的线性函数。\n    -   平均功率 $P_{\\text{avg}}(\\mathbf{x})$ 是控制变量的非线性（通常是二次或三角）函数。\n    -   均方根电流的平方 $I_{\\text{rms}}^2(\\mathbf{x}) = \\frac{1}{T}\\int_0^T i_L^2(t; \\mathbf{x}) dt$ 可以被证明是控制变量的凸二次函数。这是一个关键的结构特性。\n\n2.  **问题分类：** 得到的优化问题具有以下形式：\n    $$\n    \\begin{aligned}\n    \\underset{\\mathbf{x}}{\\text{minimize}}  \\quad \\mathbf{x}^T \\mathbf{Q} \\mathbf{x} + \\mathbf{c}^T \\mathbf{x} + d_0 \\quad (\\text{凸二次目标}) \\\\\n    \\text{subject to}  \\quad g(\\mathbf{x}) = P \\quad (\\text{非线性等式约束}) \\\\\n     \\quad h_j(\\mathbf{x}) \\le -I_{\\min} \\text{ or } h_j(\\mathbf{x}) \\ge I_{\\min} \\quad (\\text{线性ZVS约束})\n    \\end{aligned}\n    $$\n    其中 $h_j(\\mathbf{x})$ 是表示开关电流的线性函数。ZVS约束创建了一个非凸可行域（不相交多面体的并集）。功率约束通常也是非凸的。因此，该问题是一个非凸二次约束二次规划（QCQP），或更一般地，一个非线性规划（NLP）。\n\n3.  **求解算法：** 因为问题是非凸的，寻找全局最优解具有挑战性。标准方法包括：\n    -   **非线性规划（NLP）求解器：** 采用迭代数值算法，如序列二次规划（SQP）或内点法。这些求解器可以找到局部最优解。解的质量可能在很大程度上取决于初始猜测值，对于相同功率水平的SPS解可能是一个合理的起点。\n    -   **利用凸性：** 目标函数（$I_{\\text{rms}}^2$）的凸性是一个非常有优势的结构。如果功率约束可以被松弛或近似为凸的，并且ZVS区域是凸的（实际上不是），那么问题将成为一个标准的凸优化问题（例如，一个QP）。虽然这并非直接成立，但一些先进的方法使用凸松弛（例如，半定规划松弛）来寻找全局最优值的下界，并可能恢复高质量的解。\n    -   **参数扫描：** 对于低维控制空间（如具有2-3个变量的DPS），可以对控制变量空间进行系统的数值搜索（网格搜索），以找到满足约束并产生最小 $I_{\\text{rms}}^2$ 的参数集。这种方法计算成本高昂，但可以逼近全局最优解。\n\n总之，一种有原则的方法包括构建非凸NLP并使用合适的数值求解器进行求解，同时认识到所获得的解很可能是局部最小值。目标函数的凸性是数值方法可以利用的一个关键特性。",
            "answer": "$$\n\\boxed{\\frac{\\pi}{2} - \\frac{\\pi}{2}\\sqrt{1 - \\frac{4 P \\omega L}{\\pi k V_{p}^{2}}}}\n$$"
        }
    ]
}
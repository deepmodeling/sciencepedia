{
    "hands_on_practices": [
        {
            "introduction": "This practice builds a crucial bridge between the well-established technique of state-space averaging and the core principles of Sliding Mode Control (SMC). By deriving the small-signal transfer function for a buck converter, you will reinforce a fundamental analysis skill while also discovering how this model is intrinsically linked to the calculation of the equivalent control, $u_{eq}$. This exercise  demonstrates that the control effort required to keep the system on the sliding surface is not arbitrary but is dictated by the converter's inherent dynamics.",
            "id": "3879760",
            "problem": "A step-down direct current to direct current converter (\"buck\" converter) operates in Continuous Conduction Mode (CCM). The power stage consists of an ideal controlled high-side switch and an ideal diode, an inductor of inductance $L$ in series with an inductor resistance $r_{L}$, and an output capacitor of capacitance $C$ with series equivalent resistance $r_{C}$. The load is a resistor $R$. The input source is a direct current voltage $V_{g}$, assumed constant. The output node voltage $v_{o}(t)$ is the voltage seen by the load, which is the series combination of the capacitor and its equivalent series resistance. Define the state variables as $x_{1}(t) = i_{L}(t)$ (inductor current) and $x_{2}(t) = v_{C}(t)$ (capacitor voltage), and note the constitutive relations $L\\,\\frac{d i_{L}}{dt} = v_{L}$, $C\\,\\frac{d v_{C}}{dt} = i_{C}$, $v_{o}(t) = v_{C}(t) + r_{C}\\,i_{C}(t)$, and $i_{C}(t) = i_{L}(t) - \\frac{v_{o}(t)}{R}$ from Kirchhoff’s laws.\n\nUsing state-space averaging over one switching period with duty ratio $u(t) \\in [0,1]$, derive the small-signal duty-cycle-to-output-voltage transfer function $G_{vd}(s) = \\frac{\\hat{v}_{o}(s)}{\\hat{d}(s)}$ around a steady-state operating point with duty $D$, where hats denote small perturbations about the equilibrium and $s$ is the complex frequency variable from the Laplace transform. Assume ideal switches and diode (zero voltage drop), steady CCM, and that the input source perturbation is zero (i.e., $\\hat{v}_{g}(s) = 0$). Provide your final answer as a single closed-form analytic expression for $G_{vd}(s)$ in terms of $L$, $r_{L}$, $C$, $r_{C}$, $R$, $V_{g}$, and $s$.\n\nThen, briefly explain why the duty-cycle-to-output transfer function is relevant for computing the equivalent control $u_{eq}$ on the sliding manifold $s(x) = 0$ in Sliding Mode Control (SMC), where $s(x)$ is a linear sliding variable constructed from the converter’s states and reference signals. The explanation must be qualitative and based on first principles (e.g., starting from $\\dot{s}(x) = 0$ on the manifold) without invoking any pre-remembered controller formulas.\n\nExpress the final transfer function $G_{vd}(s)$ as an analytic expression; no numerical evaluation is required.",
            "solution": "The user-provided problem is assessed to be valid. It is scientifically grounded in the principles of power electronics and control theory, well-posed with sufficient information for a unique solution, and stated objectively. The derivation of a small-signal transfer function for a buck converter and the qualitative explanation of its relevance to sliding mode control are standard, non-trivial tasks in the field.\n\nThe solution is presented in two parts as requested. The first part derives the duty-cycle-to-output-voltage transfer function, and the second part explains its relevance to the computation of the equivalent control in Sliding Mode Control (SMC).\n\nPart 1: Derivation of the Transfer Function $G_{vd}(s)$\n\nThe derivation proceeds using the state-space averaging method. First, we establish the state-space model of the converter.\n\nThe state variables are defined as $x_1(t) = i_L(t)$ and $x_2(t) = v_C(t)$. The state vector is $x(t) = \\begin{pmatrix} i_L(t) \\\\ v_C(t) \\end{pmatrix}$. The control input is the duty ratio, denoted by $u(t)$.\n\nFrom the problem statement, we have the following relations based on Kirchhoff's laws:\n$1$. Output voltage: $v_o(t) = v_C(t) + r_C i_C(t)$\n$2$. Capacitor current: $i_C(t) = i_L(t) - \\frac{v_o(t)}{R}$\n\nBy substituting the second equation into the first, we can express the output voltage $v_o(t)$ in terms of the state variables $i_L(t)$ and $v_C(t)$:\n$v_o(t) = v_C(t) + r_C \\left( i_L(t) - \\frac{v_o(t)}{R} \\right)$\n$v_o(t) \\left( 1 + \\frac{r_C}{R} \\right) = v_C(t) + r_C i_L(t)$\n$v_o(t) = \\frac{R(v_C(t) + r_C i_L(t))}{R + r_C}$\n\nNow we write the state derivative equations. The capacitor voltage dynamics are given by:\n$C \\frac{d v_C}{dt} = i_C = i_L - \\frac{v_o}{R} = i_L - \\frac{v_C + r_C i_L}{R + r_C}$\n$C \\frac{d v_C}{dt} = \\left( 1 - \\frac{r_C}{R+r_C} \\right) i_L - \\frac{1}{R+r_C} v_C = \\frac{R}{R+r_C} i_L - \\frac{1}{R+r_C} v_C$\n$\\frac{d v_C}{dt} = \\frac{R}{C(R+r_C)} i_L - \\frac{1}{C(R+r_C)} v_C$\nThis equation is independent of the switch state.\n\nThe inductor current dynamics depend on the switch state. The general KVL equation for the inductor loop is $v_L = u(t)V_g - r_L i_L - v_o$, where $u(t) = 1$ when the switch is on and $u(t) = 0$ when the switch is off (and the ideal diode is on). Using state-space averaging, we replace the switched input $u(t) \\in \\{0,1\\}$ with its local average, the duty cycle $u(t) \\in [0,1]$.\n$L \\frac{d i_L}{dt} = u(t)V_g - r_L i_L - v_o$\nSubstituting the expression for $v_o$:\n$L \\frac{d i_L}{dt} = u(t)V_g - r_L i_L - \\frac{R(v_C + r_C i_L)}{R+r_C}$\n$L \\frac{d i_L}{dt} = u(t)V_g - \\left( r_L + \\frac{R r_C}{R+r_C} \\right) i_L - \\frac{R}{R+r_C} v_C$\n$\\frac{d i_L}{dt} = -\\frac{1}{L}\\left(r_L + \\frac{R r_C}{R+r_C}\\right) i_L - \\frac{R}{L(R+r_C)} v_C + \\frac{V_g}{L} u(t)$\n\nWe can now write the averaged state-space model $\\dot{x} = A x + B_u u(t)$:\n$$\n\\frac{d}{dt} \\begin{pmatrix} i_L \\\\ v_C \\end{pmatrix} = \n\\begin{pmatrix} \n-\\frac{1}{L}\\left(r_L + \\frac{R r_C}{R+r_C}\\right)  -\\frac{R}{L(R+r_C)} \\\\ \n\\frac{R}{C(R+r_C)}  -\\frac{1}{C(R+r_C)} \n\\end{pmatrix} \n\\begin{pmatrix} i_L \\\\ v_C \\end{pmatrix} + \n\\begin{pmatrix} \\frac{V_g}{L} \\\\ 0 \\end{pmatrix} u(t)\n$$\nThe output equation is $v_o(t) = \\frac{R r_C}{R+r_C} i_L(t) + \\frac{R}{R+r_C} v_C(t)$. This can be written as $y(t) = C_{out}x(t)$, where the output matrix is $C_{out} = \\begin{pmatrix} \\frac{R r_C}{R+r_C}  \\frac{R}{R+r_C} \\end{pmatrix}$.\n\nTo find the small-signal transfer function, we linearize the system around a DC operating point $X = \\begin{pmatrix} I_L \\\\ V_C \\end{pmatrix}$ corresponding to a constant duty cycle $u=D$ and input voltage $v_g=V_g$. The small-signal model is given by $\\dot{\\hat{x}} = A\\hat{x} + B_u \\hat{d}$ and $\\hat{y} = C_{out}\\hat{x}$, where hats denote small-signal perturbations. Note that the input source perturbation is zero, $\\hat{v}_g=0$.\nThe vector $B_u$ is $\\begin{pmatrix} V_g/L \\\\ 0 \\end{pmatrix}$.\n\nTaking the Laplace transform of the small-signal equations:\n$s\\hat{x}(s) = A\\hat{x}(s) + B_u \\hat{d}(s)$\n$\\hat{v}_o(s) = C_{out}\\hat{x}(s)$\n\nFrom the first equation, we solve for $\\hat{x}(s)$:\n$(sI-A)\\hat{x}(s) = B_u \\hat{d}(s) \\implies \\hat{x}(s) = (sI-A)^{-1} B_u \\hat{d}(s)$\nSubstituting this into the output equation yields the transfer function:\n$G_{vd}(s) = \\frac{\\hat{v}_o(s)}{\\hat{d}(s)} = C_{out}(sI-A)^{-1}B_u$\n\nLet's compute the components.\n$sI-A = \\begin{pmatrix} s + \\frac{1}{L}\\left(r_L + \\frac{R r_C}{R+r_C}\\right)  \\frac{R}{L(R+r_C)} \\\\ -\\frac{R}{C(R+r_C)}  s + \\frac{1}{C(R+r_C)} \\end{pmatrix}$\n\nThe determinant is:\n$\\det(sI-A) = \\left(s + \\frac{r_L}{L} + \\frac{R r_C}{L(R+r_C)}\\right)\\left(s + \\frac{1}{C(R+r_C)}\\right) + \\frac{R^2}{LC(R+r_C)^2}$\n$\\det(sI-A) = s^2 + s\\left(\\frac{r_L}{L} + \\frac{R r_C}{L(R+r_C)} + \\frac{1}{C(R+r_C)}\\right) + \\frac{r_L}{LC(R+r_C)} + \\frac{R r_C}{LC(R+r_C)^2} + \\frac{R^2}{LC(R+r_C)^2}$\nCombining terms, the denominator polynomial's coefficients can be found.\nCoefficient of $s^2$: $1$\nCoefficient of $s$: $\\frac{L+C(r_L(R+r_C)+Rr_C)}{LC(R+r_C)}$\nConstant term: $\\frac{r_L(R+r_C)+Rr_C+R^2}{LC(R+r_C)^2} = \\frac{(R+r_L)(R+r_C)}{LC(R+r_C)^2} = \\frac{R+r_L}{LC(R+r_C)}$\nSo, $\\det(sI-A) = \\frac{s^2LC(R+r_C) + s(L+C[r_L(R+r_C)+Rr_C]) + R+r_L}{LC(R+r_C)}$.\n\nThe inverse matrix is:\n$(sI-A)^{-1} = \\frac{1}{\\det(sI-A)} \\begin{pmatrix} s + \\frac{1}{C(R+r_C)}  -\\frac{R}{L(R+r_C)} \\\\ \\frac{R}{C(R+r_C)}  s + \\frac{r_L}{L} + \\frac{R r_C}{L(R+r_C)} \\end{pmatrix}$\n\nWe now compute the product $C_{out}(sI-A)^{-1}B_u$:\n$(sI-A)^{-1}B_u = \\frac{1}{\\det(sI-A)} \\begin{pmatrix} s + \\frac{1}{C(R+r_C)} \\\\ \\frac{R}{C(R+r_C)} \\end{pmatrix} \\frac{V_g}{L}$\n$G_{vd}(s) = C_{out} \\left( (sI-A)^{-1}B_u \\right) = \\frac{V_g}{L\\det(sI-A)} \\begin{pmatrix} \\frac{R r_C}{R+r_C}  \\frac{R}{R+r_C} \\end{pmatrix} \\begin{pmatrix} s + \\frac{1}{C(R+r_C)} \\\\ \\frac{R}{C(R+r_C)} \\end{pmatrix}$\n$G_{vd}(s) = \\frac{V_g}{L\\det(sI-A)} \\left[ \\frac{R r_C}{R+r_C}\\left(s + \\frac{1}{C(R+r_C)}\\right) + \\frac{R^2}{C(R+r_C)^2} \\right]$\n$G_{vd}(s) = \\frac{V_g}{L\\det(sI-A)} \\left[ \\frac{s R r_C C(R+r_C) + R r_C + R^2}{C(R+r_C)^2} \\right]$\n$G_{vd}(s) = \\frac{V_g}{L\\det(sI-A)} \\left[ \\frac{s R r_C C(R+r_C) + R(R+r_C)}{C(R+r_C)^2} \\right] = \\frac{V_g}{L\\det(sI-A)} \\frac{R(sCr_C+1)}{C(R+r_C)}$\n\nSubstitute the expression for $\\det(sI-A)$:\n$G_{vd}(s) = \\frac{V_g}{L} \\frac{LC(R+r_C)}{s^2LC(R+r_C) + s(L+C[r_L(R+r_C)+Rr_C]) + R+r_L} \\frac{R(1+sCr_C)}{C(R+r_C)}$\n$G_{vd}(s) = \\frac{V_g R(1+sCr_C)}{s^2LC(R+r_C) + s(L+Cr_L(R+r_C)+CRr_C) + (R+r_L)}$\nThis is the final expression for the transfer function.\n\nPart 2: Relevance of $G_{vd}(s)$ to SMC Equivalent Control\n\nSliding Mode Control (SMC) operates by defining a sliding surface (or manifold) in the state space, typically as $s(x)=0$, where $x$ is the state vector. The control objective is to drive the system's state trajectory onto this manifold and maintain it there for all subsequent time. The condition for the state trajectory to remain on the manifold is the invariance condition, $\\dot{s}(x)=0$.\n\nThe time derivative of the sliding variable is found using the chain rule: $\\dot{s}(x) = \\frac{\\partial s}{\\partial x}\\dot{x}$. The dynamics of the converter are described by the state equation $\\dot{x} = f(x, u)$, which for the averaged buck converter model is $\\dot{x} = Ax + B_u u$. Here $u$ represents the continuous duty cycle.\n\nThe invariance condition becomes $\\frac{\\partial s}{\\partial x}f(x, u) = 0$. The **equivalent control**, denoted $u_{eq}$, is the ideal, continuous control input $u$ that satisfies this algebraic equation. It represents the control effort required to perfectly cancel the system dynamics and keep the states on the sliding manifold. Solving for $u_{eq}$ gives an expression that depends on the system states $x$ and the system model parameters encapsulated in $f(x,u)$. For the linear system, this would be $u_{eq} = -(\\frac{\\partial s}{\\partial x} B_u)^{-1}(\\frac{\\partial s}{\\partial x} A x)$.\n\nThe transfer function $G_{vd}(s) = \\frac{\\hat{v}_o(s)}{\\hat{d}(s)}$ is a frequency-domain representation of the linearized system dynamics, specifically describing how the control input (duty cycle perturbation $\\hat{d}$) affects the output voltage perturbation $\\hat{v}_o$. The output voltage is a function of the state variables, $v_o=g(x)$. In many SMC applications for power converters, the sliding variable $s(x)$ is constructed as a linear combination of the state errors, which often includes the output voltage error, e.g., $s(x) = k_1(i_L - I_{L,ref}) + k_2(v_o - V_{o,ref})$.\n\nTo compute the equivalent control $u_{eq}$ that forces $\\dot{s}(x)=0$, one must have a mathematical model of how $u$ affects $\\dot{s}$. Since $\\dot{s}$ is a function of $\\dot{x}$ and potentially $\\dot{v}_o$, and these derivatives are governed by the system dynamics, knowledge of these dynamics is essential. The transfer function $G_{vd}(s)$ is a compact and standard representation of these very dynamics. It encapsulates the relationship between the control input and a key system output. Therefore, the information contained in $G_{vd}(s)$, or the underlying state-space model ($A$, $B_u$, $C_{out}$) from which it is derived, is a fundamental prerequisite for the analytical calculation of the equivalent control $u_{eq}$. In essence, calculating $u_{eq}$ is an act of model inversion, and $G_{vd}(s)$ provides the model to be inverted.",
            "answer": "$$\\boxed{\\frac{V_{g} R(1+sCr_{C})}{s^{2}LC(R+r_{C}) + s(L+C[r_{L}(R+r_{C})+Rr_{C}]) + (R+r_{L})}}$$"
        },
        {
            "introduction": "Effective control design requires looking beyond the primary output to understand the system's internal behavior. This exercise  delves into the critical concepts of relative degree and zero dynamics by analyzing a boost converter. You will discover why directly controlling the output voltage can paradoxically lead to unstable inductor current dynamics, a hallmark of non-minimum phase systems that poses a significant challenge for many control strategies, including SMC.",
            "id": "3879773",
            "problem": "Consider an ideal direct current to direct current boost converter operating in Continuous Conduction Mode (CCM) under high-frequency Pulse Width Modulation (PWM). The converter consists of an input source voltage $V_{\\text{in}}$, an inductor of inductance $L$, a switch, a diode, an output capacitor of capacitance $C$, and a resistive load of resistance $R$. Assume all semiconductor devices are ideal and that averaging over one PWM period is valid due to a sufficiently high switching frequency. Let the control input be the duty ratio $u \\in [0,1]$, defined as the fraction of time the switch is in the conducting (ON) state within each PWM period. Let the output voltage be $v_{o}$ and the inductor current be $i_{L}$. The sliding variable is defined as $s = v_{o} - v_{\\text{ref}}$, where $v_{\\text{ref}}$ is a constant reference.\n\nStarting strictly from Kirchhoff’s Voltage Law (KVL) and Kirchhoff’s Current Law (KCL), along with the constitutive relations for the inductor ($v_{L} = L \\, d i_{L}/dt$) and capacitor ($i_{C} = C \\, d v_{o}/dt$), derive the averaged state-space dynamics of the boost converter in CCM as a function of the duty ratio $u$ and the states $(i_{L}, v_{o})$. Using the rigorous definition of relative degree for a Single-Input Single-Output (SISO) nonlinear system—namely, the smallest integer $r$ such that the control input $u$ appears explicitly in the $r$-th time derivative of the output $s$—compute the relative degree $r$ for the choice $s = v_{o} - v_{\\text{ref}}$.\n\nThen, by enforcing $s = 0$ and $\\dot{s} = 0$ and eliminating the control input via the equivalent control concept, obtain the internal or zero dynamics associated with the inductor current $i_{L}$ when ideal sliding on $s$ is imposed. Use this internal dynamics to explain, from first principles, why direct voltage-mode sliding on $s = v_{o} - v_{\\text{ref}}$ may destabilize the internal dynamics of the boost converter.\n\nProvide the final answer as the integer value of the relative degree $r$. No units are required. Do not round.",
            "solution": "The problem requires the analysis of a DC-DC boost converter under sliding mode control. The analysis will proceed in four stages: first, the derivation of the state-space averaged dynamic model of the converter; second, the computation of the relative degree of the system with respect to the output variable; third, the derivation of the system's zero dynamics; and finally, an analysis of the stability of these zero dynamics.\n\n**1. State-Space Averaged Dynamics**\n\nThe behavior of the ideal boost converter is described by two linear time-invariant systems, corresponding to the two states of the switch. Let the switching period be $T_s$, and the duty ratio be $u$, where $u \\in [0, 1]$ is the fraction of the period for which the switch is ON.\n\n*   **State 1: Switch is ON (interval $[0, uT_s]$)**\n    When the main switch is closed (ON), the diode is reverse-biased and non-conducting.\n    Applying Kirchhoff's Voltage Law (KVL) to the input loop yields:\n    $$ V_{\\text{in}} - v_L = 0 \\implies v_L = L \\frac{di_L}{dt} = V_{\\text{in}} $$\n    This gives the inductor current dynamics:\n    $$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}}}{L} $$\n    Applying Kirchhoff's Current Law (KCL) at the output node, the capacitor supplies current to the load resistor $R$:\n    $$ i_C + \\frac{v_o}{R} = 0 \\implies C \\frac{dv_o}{dt} = - \\frac{v_o}{R} $$\n    This gives the output voltage dynamics:\n    $$ \\frac{dv_o}{dt} = - \\frac{v_o}{RC} $$\n\n*   **State 2: Switch is OFF (interval $[uT_s, T_s]$)**\n    When the main switch is open (OFF), the inductor current forward-biases the diode, which becomes conducting.\n    Applying KVL to the loop containing the source, inductor, diode, and load gives:\n    $$ V_{\\text{in}} - v_L - v_o = 0 \\implies v_L = L \\frac{di_L}{dt} = V_{\\text{in}} - v_o $$\n    This gives the inductor current dynamics:\n    $$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}} - v_o}{L} $$\n    Applying KCL at the output node, the inductor current splits between the capacitor and the load:\n    $$ i_L = i_C + \\frac{v_o}{R} \\implies C \\frac{dv_o}{dt} = i_L - \\frac{v_o}{R} $$\n    This gives the output voltage dynamics:\n    $$ \\frac{dv_o}{dt} = \\frac{i_L}{C} - \\frac{v_o}{RC} $$\n\n*   **Averaged Model**\n    Assuming the switching frequency is sufficiently high, the state dynamics can be approximated by averaging over one period $T_s$. The averaged model is a weighted sum of the dynamics in each state, with the weights being the duty ratio $u$ and $(1-u)$.\n    The averaged derivative of the inductor current $i_L$ is:\n    $$ \\frac{di_L}{dt} = u \\left( \\frac{V_{\\text{in}}}{L} \\right) + (1-u) \\left( \\frac{V_{\\text{in}} - v_o}{L} \\right) = \\frac{V_{\\text{in}} - (1-u)v_o}{L} $$\n    The averaged derivative of the output voltage $v_o$ is:\n    $$ \\frac{dv_o}{dt} = u \\left( -\\frac{v_o}{RC} \\right) + (1-u) \\left( \\frac{i_L}{C} - \\frac{v_o}{RC} \\right) = \\frac{(1-u)i_L}{C} - \\frac{v_o}{RC} $$\n    Thus, the averaged state-space model is:\n    $$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}}}{L} - \\frac{(1-u)v_o}{L} $$\n    $$ \\frac{dv_o}{dt} = \\frac{(1-u)i_L}{C} - \\frac{v_o}{RC} $$\n\n**2. Computation of the Relative Degree**\n\nThe relative degree $r$ of a Single-Input Single-Output (SISO) system is the number of times the output must be differentiated with respect to time for the control input to appear explicitly. The output is defined by the sliding variable $s = v_o - v_{\\text{ref}}$. The control input is the duty ratio $u$.\n\nLet the output be $y = s(t) = v_o(t) - v_{\\text{ref}}$. Since $v_{\\text{ref}}$ is a constant, its time derivative is zero.\nThe first time derivative of the output $y$ is:\n$$ \\dot{y} = \\frac{ds}{dt} = \\frac{d}{dt}(v_o - v_{\\text{ref}}) = \\frac{dv_o}{dt} $$\nSubstituting the averaged state equation for $\\frac{dv_o}{dt}$:\n$$ \\dot{s} = \\frac{(1-u)i_L}{C} - \\frac{v_o}{RC} = \\frac{i_L}{C} - \\frac{v_o}{RC} - u \\frac{i_L}{C} $$\nThe control input $u$ appears explicitly in this first derivative. The term multiplying $u$ is $-\\frac{i_L}{C}$. In Continuous Conduction Mode (CCM), the inductor current $i_L$ is always positive, so $i_L > 0$. As $C > 0$, the coefficient $-\\frac{i_L}{C}$ is non-zero.\nTherefore, according to the definition, the relative degree $r$ is $1$.\n\n**3. Derivation of the Zero Dynamics**\n\nThe zero dynamics describe the internal behavior of the system constrained to the sliding surface $s(t) = 0$. Enforcing this condition means that $s(t)$ and all its time derivatives are zero for all time $t > 0$.\nWe enforce the conditions $s(t)=0$ and $\\dot{s}(t)=0$.\n\nFrom $s = v_o - v_{\\text{ref}} = 0$, we have the constraint:\n$$ v_o = v_{\\text{ref}} $$\nFrom $\\dot{s} = 0$, we have:\n$$ \\frac{(1-u)i_L}{C} - \\frac{v_o}{RC} = 0 $$\nThe control input $u$ that maintains these conditions is called the equivalent control, $u_{eq}$. Substituting $v_o = v_{\\text{ref}}$ into the $\\dot{s}=0$ equation allows us to solve for $u_{eq}$:\n$$ \\frac{(1-u_{eq})i_L}{C} - \\frac{v_{\\text{ref}}}{RC} = 0 $$\n$$ (1-u_{eq})i_L = \\frac{v_{\\text{ref}}}{R} $$\n$$ 1 - u_{eq} = \\frac{v_{\\text{ref}}}{R i_L} $$\nThis expression for $(1-u_{eq})$ represents the control action needed to keep the state trajectory on the sliding surface.\n\nThe internal dynamics, or zero dynamics, are found by substituting these constraints ($v_o = v_{\\text{ref}}$ and the expression for $1-u_{eq}$) into the state equation that was not used to define the output, which is the equation for the inductor current $i_L$:\n$$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}}}{L} - \\frac{(1-u_{eq})v_o}{L} $$\nSubstituting the derived expressions:\n$$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}}}{L} - \\frac{1}{L} \\left(\\frac{v_{\\text{ref}}}{R i_L}\\right) (v_{\\text{ref}}) $$\n$$ \\frac{di_L}{dt} = \\frac{V_{\\text{in}}}{L} - \\frac{v_{\\text{ref}}^2}{L R i_L} $$\nThis first-order nonlinear differential equation describes the evolution of the inductor current $i_L$ when the system is perfectly constrained to the sliding surface $s=0$. This is the zero dynamics of the system.\n\n**4. Stability Analysis of the Zero Dynamics**\n\nTo understand why direct voltage-mode sliding control may be problematic, we analyze the stability of the zero dynamics. The equilibrium point of the zero dynamics, denoted as $I_{L,eq}$, is found by setting $\\frac{di_L}{dt} = 0$:\n$$ \\frac{V_{\\text{in}}}{L} - \\frac{v_{\\text{ref}}^2}{L R I_{L,eq}} = 0 $$\n$$ V_{\\text{in}} = \\frac{v_{\\text{ref}}^2}{R I_{L,eq}} \\implies I_{L,eq} = \\frac{v_{\\text{ref}}^2}{R V_{\\text{in}}} $$\nThis is the expected steady-state inductor current in an ideal boost converter where input power $V_{\\text{in}}I_L$ equals output power $V_o^2/R$.\n\nTo analyze the local stability of this equilibrium, we linearize the zero dynamics around $I_{L,eq}$. Let the right-hand side of the dynamics be $f(i_L) = \\frac{V_{\\text{in}}}{L} - \\frac{v_{\\text{ref}}^2}{L R i_L}$. The stability is determined by the sign of the Jacobian, which in this scalar case is the derivative $\\frac{df}{di_L}$, evaluated at the equilibrium point.\n$$ \\frac{df}{di_L} = \\frac{d}{di_L} \\left( \\frac{V_{\\text{in}}}{L} - \\frac{v_{\\text{ref}}^2}{L R} i_L^{-1} \\right) = - \\frac{v_{\\text{ref}}^2}{L R} (-1) i_L^{-2} = \\frac{v_{\\text{ref}}^2}{L R i_L^2} $$\nAt the equilibrium point $i_L = I_{L,eq}$:\n$$ \\left. \\frac{df}{di_L} \\right|_{i_L = I_{L,eq}} = \\frac{v_{\\text{ref}}^2}{L R I_{L,eq}^2} $$\nSince all parameters $L$, $R$, and $v_{\\text{ref}}$ are positive, and $I_{L,eq}^2$ is positive for any non-trivial operating point, the derivative is strictly positive:\n$$ \\left. \\frac{df}{di_L} \\right|_{i_L = I_{L,eq}} > 0 $$\nA positive derivative at an equilibrium point indicates that the equilibrium is **unstable**. Any small perturbation $\\delta i_L$ from the equilibrium $I_{L,eq}$ will grow. For instance, if $i_L$ becomes slightly greater than $I_{L,eq}$, $\\frac{di_L}{dt}$ becomes positive, causing $i_L$ to increase further. Conversely, if $i_L$ becomes slightly less than $I_{L,eq}$, $\\frac{di_L}{dt}$ becomes negative, causing $i_L$ to decrease.\n\nThis instability of the zero dynamics signifies that the boost converter is a **non-minimum phase** system with respect to the output voltage. Attempting to enforce ideal sliding motion on the surface $s = v_o - v_{\\text{ref}} = 0$ leads to unstable internal dynamics for the inductor current. This implies that such a control scheme is fundamentally flawed, as any small deviation from the ideal sliding surface will cause the inductor current to either grow uncontrollably or collapse, destabilizing the entire converter. This is a well-known limitation in the control of boost and buck-boost converters.\n\nThe final requested quantity is the relative degree, $r$, which was computed to be $1$.",
            "answer": "$$\n\\boxed{1}\n$$"
        },
        {
            "introduction": "The theoretical ideal of SMC involves infinitely fast switching, which in practice manifests as high-frequency chattering that can damage components and reduce efficiency. This practice  introduces the boundary layer method, a powerful and widely used technique to eliminate chattering. By analyzing a controller that uses a continuous saturation function, you will learn to quantify the trade-off between smoothness of control and the ultimate tracking precision in the presence of disturbances.",
            "id": "3879787",
            "problem": "A Continuous Conduction Mode (CCM) direct current to direct current buck converter with input voltage $V_{\\mathrm{in}}$, inductor $L$, capacitor $C$, and resistive load $R$ is governed by the averaged state equations derived from the inductor-voltage and capacitor-current laws: \n$$\\frac{d i_{L}}{d t} = \\frac{1}{L}\\left(u V_{\\mathrm{in}} - v_{C}\\right), \\quad \\frac{d v_{C}}{d t} = \\frac{1}{C}\\left(i_{L} - \\frac{v_{C}}{R}\\right),$$ \nwhere $u \\in [0,1]$ is the duty ratio produced by Pulse-Width Modulation (PWM). The output voltage $v_{C}(t)$ is to be regulated to a constant reference $V_{\\mathrm{ref}}$. Define dimensionless normalized variables \n$$\\tilde{v}(t) \\triangleq \\frac{v_{C}(t) - V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}, \\quad \\tilde{i}(t) \\triangleq \\frac{i_{L}(t) - V_{\\mathrm{ref}}/R}{V_{\\mathrm{ref}}/R},$$ \nand the sliding variable \n$$s(t) \\triangleq \\tilde{v}(t) + \\lambda \\tilde{i}(t),$$ \nwhere $\\lambda > 0$ is a design constant. Consider the control law \n$$u(t) = u_{\\mathrm{eq}}(x,t) - \\frac{k}{B(x,t)}\\,\\operatorname{sat}\\!\\left(\\frac{s(t)}{\\phi}\\right),$$ \nwith switching gain $k > 0$, boundary-layer thickness $\\phi > 0$, and $B(x,t)$ the scalar input gain associated with $u$ in the $s$-dynamics. The equivalent control $u_{\\mathrm{eq}}(x,t)$ is chosen to cancel the nominal drift so that, under matched uncertainties and model perturbations entering the same channel as the control, the reduced-order sliding-variable dynamics take the form \n$$\\frac{d s}{d t} = -k\\,\\operatorname{sat}\\!\\left(\\frac{s}{\\phi}\\right) + d(t),$$ \nwhere $d(t)$ is a matched disturbance satisfying $\\left|d(t)\\right| \\le \\Delta$ for a known constant $\\Delta > 0$. Using only the fundamental inductor-capacitor laws and the above definitions, perform the following:\n\n1. Starting from the averaged converter model and the definition of $s(t)$, derive the scalar input-output representation for $\\frac{d s}{d t}$ and justify the boundary-layer approximation $\\operatorname{sat}(s/\\phi) = s/\\phi$ when $\\left|s\\right| \\le \\phi$.\n2. Under the boundary-layer approximation and assuming the worst-case constant disturbance $d(t) \\equiv \\Delta$, derive the steady-state value of $s$ and obtain the ultimate bound on $\\left|s\\right|$ inside the boundary layer for a switching gain $k$ that satisfies $k > \\Delta$.\n3. Choose $\\phi = 0.020$ (dimensionless). Compute the closed-form expression, in terms of $k$ and $\\Delta$, for the steady-state magnitude of $s$ achieved under the worst-case constant disturbance within the boundary layer.\n\nThe final answer must be a single closed-form analytic expression. The sliding variable $s$ is dimensionless, so no units are required for the answer. No rounding is required.",
            "solution": "The user wants me to solve a problem related to sliding mode control for a DC-DC buck converter.\n\nHere's my plan:\n\n1.  **Validate the problem statement.** I need to check for scientific soundness, completeness, and clarity.\n\n    *   **Step 1: Extract Givens**\n        *   System: Continuous Conduction Mode (CCM) DC-DC buck converter.\n        *   Parameters: Input voltage $V_{\\mathrm{in}}$, inductor $L$, capacitor $C$, resistive load $R$.\n        *   Averaged state equations:\n            *   $\\frac{d i_{L}}{d t} = \\frac{1}{L}\\left(u V_{\\mathrm{in}} - v_{C}\\right)$\n            *   $\\frac{d v_{C}}{d t} = \\frac{1}{C}\\left(i_{L} - \\frac{v_{C}}{R}\\right)$\n        *   Control input: Duty ratio $u \\in [0,1]$.\n        *   Objective: Regulate output voltage $v_{C}(t)$ to a constant reference $V_{\\mathrm{ref}}$.\n        *   Normalized variables:\n            *   $\\tilde{v}(t) \\triangleq \\frac{v_{C}(t) - V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}$\n            *   $\\tilde{i}(t) \\triangleq \\frac{i_{L}(t) - V_{\\mathrm{ref}}/R}{V_{\\mathrm{ref}}/R}$\n        *   Sliding variable: $s(t) \\triangleq \\tilde{v}(t) + \\lambda \\tilde{i}(t)$, with $\\lambda > 0$.\n        *   Control law: $u(t) = u_{\\mathrm{eq}}(x,t) - \\frac{k}{B(x,t)}\\,\\operatorname{sat}\\!\\left(\\frac{s(t)}{\\phi}\\right)$\n        *   Control parameters: Switching gain $k > 0$, boundary-layer thickness $\\phi > 0$.\n        *   Input gain: $B(x,t)$ is the scalar input gain associated with $u$ in the $s$-dynamics.\n        *   Reduced-order dynamics: $\\frac{d s}{d t} = -k\\,\\operatorname{sat}\\!\\left(\\frac{s}{\\phi}\\right) + d(t)$.\n        *   Disturbance: Matched disturbance $d(t)$ satisfying $|d(t)| \\le \\Delta$ for a known constant $\\Delta > 0$.\n        *   Task 1: Derive the scalar input-output representation for $\\frac{d s}{d t}$ and justify the boundary-layer approximation $\\operatorname{sat}(s/\\phi) = s/\\phi$ when $|s| \\le \\phi$.\n        *   Task 2: Under the boundary-layer approximation and worst-case disturbance $d(t) \\equiv \\Delta$, derive the steady-state value of $s$ and the ultimate bound on $|s|$ for $k > \\Delta$.\n        *   Task 3: For $\\phi = 0.020$, compute the closed-form expression for the steady-state magnitude of $s$ under worst-case constant disturbance.\n\n    *   **Step 2: Validate Using Extracted Givens**\n        *   **Scientifically Grounded**: The problem is well-grounded in control theory and power electronics. The averaged model of a buck converter is standard. The formulation of sliding mode control with a boundary layer is also standard. The concept of equivalent control and matched disturbances is central to SMC. The definitions are all correct.\n        *   **Well-Posed**: The problem asks for specific derivations and a final expression. The provided information seems sufficient.\n        *   **Objective**: The language is precise and technical. No subjective elements.\n        *   **Flaw Checklist**:\n            1.  **Scientific/Factual Unsoundness**: No. The models and concepts are standard in the field.\n            2.  **Non-Formalizable/Irrelevant**: No. It's a formalizable control problem directly related to the specified field.\n            3.  **Incomplete/Contradictory**: The problem seems consistent. It provides the final closed-loop dynamics but asks to derive the open-loop dynamics of the sliding variable first, which is a standard procedure to understand how the control law is formulated and what the input gain $B(x,t)$ is. The information is sufficient and not contradictory.\n            4.  **Unrealistic/Infeasible**: No. The parameters are symbolic. The model is a standard simplification but not unrealistic.\n            5.  **Ill-Posed/Poorly Structured**: No. The tasks are sequential and build on each other. A unique solution exists.\n            6.  **Pseudo-Profound/Trivial**: The problem guides the solver through standard analysis steps. While it simplifies the problem by providing the final closed-loop dynamics, the required derivations are non-trivial and representative of typical analysis in this domain. It is not a flawed problem.\n            7.  **Outside Scientific Verifiability**: No. The problem is mathematical and based on established engineering models.\n\n    *   **Verdict**: The problem is valid.\n\nThe problem is valid as it is scientifically grounded, well-posed, and objective. It presents a standard exercise in the analysis of a sliding mode controller for a power converter. The provided information is self-contained and sufficient to derive the requested expressions.\n\nThe solution proceeds by sequentially addressing the three tasks.\n\n1. First, we derive the scalar input-output representation for the time derivative of the sliding variable, $\\frac{d s}{d t}$. The sliding variable is defined as $s(t) = \\tilde{v}(t) + \\lambda \\tilde{i}(t)$. Its time derivative is:\n$$ \\frac{ds}{dt} = \\frac{d\\tilde{v}}{dt} + \\lambda \\frac{d\\tilde{i}}{dt} $$\nWe must find expressions for the derivatives of the normalized variables, $\\frac{d\\tilde{v}}{dt}$ and $\\frac{d\\tilde{i}}{dt}$. From the definitions $\\tilde{v}(t) = \\frac{v_{C}(t) - V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}$ and $\\tilde{i}(t) = \\frac{i_{L}(t) - V_{\\mathrm{ref}}/R}{V_{\\mathrm{ref}}/R}$, we differentiate with respect to time $t$:\n$$ \\frac{d\\tilde{v}}{dt} = \\frac{1}{V_{\\mathrm{ref}}} \\frac{dv_C}{dt}, \\quad \\frac{d\\tilde{i}}{dt} = \\frac{R}{V_{\\mathrm{ref}}} \\frac{di_L}{dt} $$\nSubstituting the given state-space equations for the converter:\n$$ \\frac{d\\tilde{v}}{dt} = \\frac{1}{V_{\\mathrm{ref}}} \\left[ \\frac{1}{C}\\left(i_L - \\frac{v_C}{R}\\right) \\right] = \\frac{1}{V_{\\mathrm{ref}} C} \\left(i_L - \\frac{v_C}{R}\\right) $$\n$$ \\frac{d\\tilde{i}}{dt} = \\frac{R}{V_{\\mathrm{ref}}} \\left[ \\frac{1}{L}\\left(u V_{\\mathrm{in}} - v_C\\right) \\right] = \\frac{R}{V_{\\mathrm{ref}} L} \\left(u V_{\\mathrm{in}} - v_C\\right) $$\nTo express these in terms of the normalized variables $\\tilde{v}$ and $\\tilde{i}$, we use the inverse transformations $v_C(t) = V_{\\mathrm{ref}}(1 + \\tilde{v}(t))$ and $i_L(t) = \\frac{V_{\\mathrm{ref}}}{R}(1 + \\tilde{i}(t))$:\n$$ \\frac{d\\tilde{v}}{dt} = \\frac{1}{V_{\\mathrm{ref}} C} \\left( \\frac{V_{\\mathrm{ref}}}{R}(1+\\tilde{i}) - \\frac{V_{\\mathrm{ref}}(1+\\tilde{v})}{R} \\right) = \\frac{1}{RC}(\\tilde{i} - \\tilde{v}) $$\n$$ \\frac{d\\tilde{i}}{dt} = \\frac{R}{V_{\\mathrm{ref}} L} \\left( u V_{\\mathrm{in}} - V_{\\mathrm{ref}}(1+\\tilde{v}) \\right) = \\frac{R V_{\\mathrm{in}}}{V_{\\mathrm{ref}} L} u - \\frac{R}{L}(1+\\tilde{v}) $$\nSubstituting these back into the expression for $\\frac{ds}{dt}$:\n$$ \\frac{ds}{dt} = \\frac{1}{RC}(\\tilde{i} - \\tilde{v}) + \\lambda \\left( \\frac{R V_{\\mathrm{in}}}{V_{\\mathrm{ref}} L} u - \\frac{R}{L}(1+\\tilde{v}) \\right) $$\n$$ \\frac{ds}{dt} = \\left[ \\frac{1}{RC}\\tilde{i} - \\left(\\frac{1}{RC} + \\frac{\\lambda R}{L}\\right)\\tilde{v} - \\frac{\\lambda R}{L} \\right] + \\left( \\frac{\\lambda R V_{\\mathrm{in}}}{V_{\\mathrm{ref}} L} \\right) u $$\nThis is the required scalar input-output representation for $\\frac{ds}{dt}$, showing its dependence on the state variables $(\\tilde{v}, \\tilde{i})$ and the control input $u$.\n\nThe boundary-layer approximation is justified by the definition of the saturation function, $\\operatorname{sat}(z)$. The function is defined as:\n$$ \\operatorname{sat}(z) = \\begin{cases} z  \\text{if } |z| \\le 1 \\\\ \\operatorname{sgn}(z)  \\text{if } |z|  1 \\end{cases} $$\nIn our case, the argument is $z = s(t)/\\phi$. The condition $|z| \\le 1$ becomes $|s(t)/\\phi| \\le 1$, which is equivalent to $|s(t)| \\le \\phi$. Within this region, called the boundary layer, the saturation function is linear by definition: $\\operatorname{sat}(s/\\phi) = s/\\phi$.\n\n2. Next, we analyze the system under the boundary-layer approximation. The problem states that the closed-loop dynamics of the sliding variable are given by:\n$$ \\frac{ds}{dt} = -k\\,\\operatorname{sat}\\!\\left(\\frac{s}{\\phi}\\right) + d(t) $$\nInside the boundary layer, where $|s| \\le \\phi$, we use the approximation $\\operatorname{sat}(s/\\phi) = s/\\phi$. The dynamics become:\n$$ \\frac{ds}{dt} = -k\\frac{s}{\\phi} + d(t) $$\nWe are asked to consider the worst-case constant disturbance, which is $d(t) \\equiv \\Delta$ (since $k > 0$). The equation becomes a linear first-order ordinary differential equation with a constant input:\n$$ \\frac{ds}{dt} = -\\frac{k}{\\phi}s + \\Delta $$\nThe steady-state value of $s$, denoted $s_{ss}$, is found by setting $\\frac{ds}{dt} = 0$:\n$$ 0 = -\\frac{k}{\\phi} s_{ss} + \\Delta $$\nSolving for $s_{ss}$ gives:\n$$ s_{ss} = \\frac{\\Delta \\phi}{k} $$\nThis is the steady-state value of $s$ under the worst-case constant disturbance.\nThe ultimate bound on $|s|$ is the size of the invariant set that trajectories enter and remain within for any disturbance $|d(t)| \\le \\Delta$. For the stable linear system $\\frac{ds}{dt} + \\frac{k}{\\phi}s = d(t)$, the magnitude of the steady-state response is maximized when the input magnitude is maximized. The set of all possible equilibria for constant disturbances $d \\in [-\\Delta, \\Delta]$ is $[-\\frac{\\Delta\\phi}{k}, \\frac{\\Delta\\phi}{k}]$. Thus, the ultimate bound on $|s|$ is $\\frac{\\Delta\\phi}{k}$. This analysis is valid as long as this bound is within the boundary layer, i.e., $\\frac{\\Delta\\phi}{k} \\le \\phi$, which simplifies to $k \\ge \\Delta$. The problem gives the condition $k > \\Delta$, which ensures the trajectories are ultimately confined strictly within the boundary layer.\n\n3. Finally, we compute the closed-form expression for the steady-state magnitude of $s$ under the worst-case constant disturbance, using the given value of $\\phi = 0.020$. From the previous step, the steady-state value is $s_{ss} = \\frac{\\Delta \\phi}{k}$. The magnitude is:\n$$ |s_{ss}| = \\left| \\frac{\\Delta \\phi}{k} \\right| $$\nSince $\\Delta$, $\\phi$, and $k$ are all defined as positive constants, the magnitude is simply:\n$$ |s_{ss}| = \\frac{\\Delta \\phi}{k} $$\nSubstituting the given numerical value $\\phi = 0.020$:\n$$ |s_{ss}| = \\frac{\\Delta(0.020)}{k} = \\frac{0.020 \\Delta}{k} $$\nThis is the final closed-form expression in terms of $k$ and $\\Delta$.",
            "answer": "$$\\boxed{\\frac{0.020 \\Delta}{k}}$$"
        }
    ]
}
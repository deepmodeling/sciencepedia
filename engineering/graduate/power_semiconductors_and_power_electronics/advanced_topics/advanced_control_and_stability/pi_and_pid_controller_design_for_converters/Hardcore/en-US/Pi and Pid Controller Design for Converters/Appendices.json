{
    "hands_on_practices": [
        {
            "introduction": "Effective controller design begins with a deep understanding of the system to be controlled, known as the plant. This exercise guides you through the essential process of deriving the small-signal model for a boost converter. By applying state-space averaging, you will uncover a fundamental challenge inherent to this topology: the presence of a right-half-plane (RHP) zero, which places a hard limit on the achievable control bandwidth and dictates a conservative design approach .",
            "id": "3866113",
            "problem": "A continuous conduction mode (CCM) boost direct current to direct current (DC-DC) converter is operated with ideal semiconductor devices (zero on-resistance, zero forward drop, instantaneous switching), a large output capacitor such that output ripple is negligible in the small-signal sense, and a constant input voltage. The converter parameters are the inductance $L=100\\,\\mu\\text{H}$, the load resistance $R=5\\,\\Omega$, and the steady-state duty ratio $D=0.5$. Using first principles that include the inductor voltage law $v_{L}=L\\,\\frac{di_{L}}{dt}$, Ohm's law $v_{o}=R\\,i_{o}$, and state-space averaging of the two switching subintervals over one period, derive the small-signal duty-to-output transfer path that reveals the presence of a Right-Half Plane (RHP) zero in the control-to-output transfer function of a boost converter in CCM. From this derivation, obtain an analytic expression for the RHP zero angular frequency $\\omega_{\\text{rhp}}$ in terms of $L$, $R$, and $D$. Then, compute the numerical value of $\\omega_{\\text{rhp}}$ for the given parameters. Finally, motivated by robust Proportional-Integral (PI) or Proportional-Integral-Derivative (PID) controller design practice for non-minimum phase plants, propose a conservative crossover angular frequency $\\omega_{c}$ that satisfies $\\omega_{c}\\leq \\omega_{\\text{rhp}}/5$, and provide its numerical value by taking $\\omega_{c}=\\omega_{\\text{rhp}}/5$. Round all numerical answers to four significant figures and express them in radians per second (rad/s). Your final answer must present $\\omega_{\\text{rhp}}$ and $\\omega_{c}$ as two numbers.",
            "solution": "The problem statement is evaluated to be valid as it is scientifically grounded in the principles of power electronics, is well-posed with sufficient information for a unique solution, and is expressed in objective, formal language. We proceed with the derivation and solution.\n\nThe objective is to derive the control-to-output voltage transfer function, $\\hat{v}_o(s)/\\hat{d}(s)$, for a continuous conduction mode (CCM) boost converter using the state-space averaging method. From this transfer function, we will identify the right-half plane (RHP) zero, find its analytical expression, and compute its numerical value.\n\nThe state variables for the boost converter are the inductor current, $i_L$, and the output capacitor voltage, $v_o$. The state vector is $x(t) = \\begin{pmatrix} i_L(t) \\\\ v_o(t) \\end{pmatrix}$. The input is the duty ratio, $d(t)$. We consider the input voltage $v_g$ to be a constant parameter, $V_g$.\n\nThe operation of the converter is described by two linear circuits, corresponding to the two switch states within a switching period $T_s$.\n\nSubinterval 1: The switch is ON for a duration $d T_s$.\nThe inductor is connected to the input voltage $v_g$, and the capacitor supplies the load $R$. The state equations are:\n$$\nL \\frac{d i_L}{dt} = v_g\n$$\n$$\nC \\frac{d v_o}{dt} = -\\frac{v_o}{R}\n$$\nIn state-space form, $\\dot{x} = A_1 x + B_1 v_g$:\n$$\n\\frac{d}{dt} \\begin{pmatrix} i_L \\\\ v_o \\end{pmatrix} = \\begin{pmatrix} 0  0 \\\\ 0  -\\frac{1}{RC} \\end{pmatrix} \\begin{pmatrix} i_L \\\\ v_o \\end{pmatrix} + \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} v_g\n$$\n\nSubinterval 2: The switch is OFF for a duration $(1-d) T_s$.\nThe inductor is connected in series with the input source, charging the output stage. The state equations are:\n$$\nL \\frac{d i_L}{dt} = v_g - v_o\n$$\n$$\nC \\frac{d v_o}{dt} = i_L - \\frac{v_o}{R}\n$$\nIn state-space form, $\\dot{x} = A_2 x + B_2 v_g$:\n$$\n\\frac{d}{dt} \\begin{pmatrix} i_L \\\\ v_o \\end{pmatrix} = \\begin{pmatrix} 0  -\\frac{1}{L} \\\\ \\frac{1}{C}  -\\frac{1}{RC} \\end{pmatrix} \\begin{pmatrix} i_L \\\\ v_o \\end{pmatrix} + \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} v_g\n$$\n\nUsing state-space averaging, we approximate the system dynamics over one switching period by averaging the matrices:\n$A = d A_1 + (1-d) A_2$\n$B = d B_1 + (1-d) B_2$\n\n$A = d \\begin{pmatrix} 0  0 \\\\ 0  -\\frac{1}{RC} \\end{pmatrix} + (1-d) \\begin{pmatrix} 0  -\\frac{1}{L} \\\\ \\frac{1}{C}  -\\frac{1}{RC} \\end{pmatrix} = \\begin{pmatrix} 0  -\\frac{1-d}{L} \\\\ \\frac{1-d}{C}  -\\frac{1}{RC} \\end{pmatrix}$\n$B = d \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} + (1-d) \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} = \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix}$\n\nThe averaged large-signal model is $\\dot{x} = A x + B v_g$:\n$$\nL \\frac{d i_L}{dt} = -(1-d) v_o + v_g\n$$\n$$\nC \\frac{d v_o}{dt} = (1-d) i_L - \\frac{v_o}{R}\n$$\n\nNext, we linearize this model around a steady-state DC operating point. Let $d = D + \\hat{d}$, $v_o = V_o + \\hat{v}_o$, $i_L = I_L + \\hat{i}_L$, and $v_g = V_g$. The terms with hats denote small AC perturbations.\n\nThe steady-state (DC) equations are obtained by setting the time derivatives to zero and using the DC values:\n$0 = -(1-D) V_o + V_g \\implies V_o = \\frac{V_g}{1-D}$\n$0 = (1-D) I_L - \\frac{V_o}{R} \\implies I_L = \\frac{V_o}{(1-D)R} = \\frac{V_g}{(1-D)^2 R}$\n\nThe small-signal (AC) equations are found by substituting the perturbed variables into the averaged equations and neglecting second-order terms (e.g., $\\hat{d}\\hat{v}_o$):\n$L \\frac{d(I_L+\\hat{i}_L)}{dt} = -(1-(D+\\hat{d})) (V_o+\\hat{v}_o) + V_g$\n$L \\frac{d\\hat{i}_L}{dt} = -(1-D)V_o - (1-D)\\hat{v}_o + D\\hat{v}_o + V_o\\hat{d} + \\hat{v}_o\\hat{d} - V_g$ is incorrect; let's expand correctly:\n$L \\frac{d\\hat{i}_L}{dt} = -[(1-D)V_o - V_o\\hat{d} + (1-D)\\hat{v}_o] + V_g$.\n$L \\frac{d\\hat{i}_L}{dt} = [-(1-D)V_o + V_g] + V_o\\hat{d} - (1-D)\\hat{v}_o$. The bracketed term is zero from the DC analysis.\n$$L \\frac{d\\hat{i}_L}{dt} = V_o\\hat{d} - (1-D)\\hat{v}_o$$\n\nFor the second equation:\n$C \\frac{d(V_o+\\hat{v}_o)}{dt} = (1-(D+\\hat{d}))(I_L+\\hat{i}_L) - \\frac{V_o+\\hat{v}_o}{R}$\n$C \\frac{d\\hat{v}_o}{dt} = [(1-D)I_L - \\frac{V_o}{R}] + (1-D)\\hat{i}_L - I_L\\hat{d} - \\frac{\\hat{v}_o}{R}$. The bracketed term is zero.\n$$C \\frac{d\\hat{v}_o}{dt} = (1-D)\\hat{i}_L - I_L\\hat{d} - \\frac{\\hat{v}_o}{R}$$\n\nWe take the Laplace transform of the two AC equations, with $s$ as the complex frequency variable:\n$$sL\\hat{i}_L(s) = V_o\\hat{d}(s) - (1-D)\\hat{v}_o(s)$$\n$$sC\\hat{v}_o(s) = (1-D)\\hat{i}_L(s) - I_L\\hat{d}(s) - \\frac{1}{R}\\hat{v}_o(s)$$\n\nTo find the transfer function $G_{vd}(s) = \\hat{v}_o(s)/\\hat{d}(s)$, we eliminate $\\hat{i}_L(s)$. From the first equation:\n$$\\hat{i}_L(s) = \\frac{V_o\\hat{d}(s) - (1-D)\\hat{v}_o(s)}{sL}$$\n\nSubstitute this into the second equation:\n$$sC\\hat{v}_o(s) = (1-D)\\left(\\frac{V_o\\hat{d}(s) - (1-D)\\hat{v}_o(s)}{sL}\\right) - I_L\\hat{d}(s) - \\frac{1}{R}\\hat{v}_o(s)$$\n\nGroup terms containing $\\hat{v}_o(s)$ and $\\hat{d}(s)$:\n$$\\hat{v}_o(s)\\left(sC + \\frac{1}{R} + \\frac{(1-D)^2}{sL}\\right) = \\hat{d}(s)\\left(\\frac{V_o(1-D)}{sL} - I_L\\right)$$\n\nNow we solve for the ratio $\\hat{v}_o(s)/\\hat{d}(s)$:\n$$G_{vd}(s) = \\frac{\\hat{v}_o(s)}{\\hat{d}(s)} = \\frac{\\frac{V_o(1-D) - sLI_L}{sL}}{\\frac{s^2LRC + sL + R(1-D)^2}{sLR}}$$\n$$G_{vd}(s) = \\frac{R(V_o(1-D) - sLI_L)}{s^2LRC+sL+R(1-D)^2}$$\n\nThe zero(s) of the transfer function are the roots of the numerator polynomial. The numerator is $N(s) = R(V_o(1-D) - sLI_L)$. Setting $N(s)=0$:\n$$V_o(1-D) - s_z L I_L = 0$$\nThis gives the location of the zero, $s_z$:\n$$s_z = \\frac{V_o(1-D)}{LI_L}$$\n\nTo get the expression in terms of the component parameters $L$, $R$, and the duty ratio $D$, we substitute the steady-state expressions for $V_o$ and $I_L$:\n$V_o = V_g/(1-D)$\n$I_L = V_g/(R(1-D)^2)$\n$$s_z = \\frac{\\left(\\frac{V_g}{1-D}\\right)(1-D)}{L\\left(\\frac{V_g}{R(1-D)^2}\\right)} = \\frac{V_g}{\\frac{LV_g}{R(1-D)^2}} = \\frac{R(1-D)^2}{L}$$\nSince $R  0$, $L  0$, and $(1-D)^2  0$ for $D \\neq 1$, the zero $s_z$ is a positive real number. This confirms it is located in the right-half of the complex plane (RHP). The angular frequency of this RHP zero, $\\omega_{\\text{rhp}}$, is its location on the real axis.\nThe analytic expression for the RHP zero angular frequency is:\n$$\\omega_{\\text{rhp}} = \\frac{R(1-D)^2}{L}$$\n\nNow we compute the numerical value for $\\omega_{\\text{rhp}}$ given $L=100\\,\\mu\\text{H} = 1 \\times 10^{-4}\\,\\text{H}$, $R=5\\,\\Omega$, and $D=0.5$:\n$$\\omega_{\\text{rhp}} = \\frac{5\\,\\Omega \\times (1-0.5)^2}{1 \\times 10^{-4}\\,\\text{H}} = \\frac{5 \\times (0.5)^2}{10^{-4}} = \\frac{5 \\times 0.25}{10^{-4}} = \\frac{1.25}{10^{-4}} = 12500\\,\\text{rad/s}$$\nRounding to four significant figures, $\\omega_{\\text{rhp}} = 1.250 \\times 10^4\\,\\text{rad/s}$.\n\nFinally, we propose a conservative crossover angular frequency $\\omega_c$. The RHP zero introduces substantial phase lag well below its frequency, which complicates controller design and can lead to instability if the loop bandwidth is too high. A common rule of thumb is to set the crossover frequency $\\omega_c$ to be significantly less than $\\omega_{\\text{rhp}}$, typically by a factor of $3$ to $5$, to ensure sufficient phase margin. The problem specifies a conservative design choice where $\\omega_c \\le \\omega_{\\text{rhp}}/5$. We will calculate the value for the boundary case $\\omega_c = \\omega_{\\text{rhp}}/5$.\n$$\\omega_c = \\frac{12500\\,\\text{rad/s}}{5} = 2500\\,\\text{rad/s}$$\nRounding to four significant figures, $\\omega_c = 2.500 \\times 10^3\\,\\text{rad/s}$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1.250 \\times 10^4  2.500 \\times 10^3\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Once the plant's dynamics are understood, the next step is to engineer a compensator that ensures stability and performance. This practice focuses on designing a phase-lead network, a common component in PI and PID controllers used to boost phase margin around the crossover frequency. You will derive the analytical relationship between the desired phase boost and the required placement of the compensator's pole and zero, a core skill for stabilizing converter feedback loops .",
            "id": "3866101",
            "problem": "A current-mode controlled buck converter is approximated by a plant small-signal control-to-output transfer function with a double pole at the natural frequency. Specifically, the plant can be modeled near the intended crossover as a strictly proper second-order low-pass with transfer function magnitude roll-off dominated by a double pole at angular frequency $\\omega_{o}$, so that the plant phase lag approaches $- \\pi$ as $\\omega$ rises beyond $\\omega_{o}$. To stabilize and meet phase margin specifications, a Type II compensator (which includes one integrator and one phase-lead network) is designed. The compensatorâ€™s phase-lead section is modeled as the rational factor\n$$\nG_{\\ell}(s) \\;=\\; \\frac{1 + s/\\omega_{z}}{1 + s/\\omega_{p}} \\,,\n$$\nwhere $\\omega_{p} \\gt \\omega_{z} \\gt 0$ so that the section provides positive phase lead. The phase contribution of $G_{\\ell}$ at a generic angular frequency $\\omega$ is the difference of the angles of its zero and pole, namely\n$$\n\\phi_{\\ell}(\\omega) \\;=\\; \\arctan\\!\\big(\\tfrac{\\omega}{\\omega_{z}}\\big) \\;-\\; \\arctan\\!\\big(\\tfrac{\\omega}{\\omega_{p}}\\big) \\,.\n$$\nAssume the compensator is arranged so that the phase-lead section provides its maximum possible phase boost exactly at the desired loop crossover angular frequency $\\omega_{c}$, in order to offset plant lag and achieve a specified additional phase boost of $\\phi_{m}$ (in radians) at $\\omega_{c}$. The crossover $\\omega_{c}$ is chosen above $\\omega_{o}$, and the integrator and any low-frequency zero placement are handled separately so that they do not affect the high-frequency phase shape near $\\omega_{c}$.\n\nStarting from first principles, use the frequency response angle of $G_{\\ell}(j\\omega)$ and properties of trigonometric functions to derive the closed-form expression for the required ratio of the lead network zero to pole frequencies, $\\omega_{z}/\\omega_{p}$, as a function of the specified maximum phase boost $\\phi_{m}$ only. State any intermediate conditions on the ratio that ensure a true lead (positive phase) behavior. Your final answer must be a single analytic expression in terms of $\\phi_{m}$ only. No numerical approximation is required, and no rounding is needed. Angles are to be treated in radians, and the final ratio is dimensionless. Express the final ratio as a closed-form analytic expression.",
            "solution": "The problem is valid as it is scientifically grounded in control theory, well-posed, objective, and contains sufficient information for a unique analytical solution.\n\nThe objective is to derive the ratio of the lead compensator's zero frequency, $\\omega_z$, to its pole frequency, $\\omega_p$, as a function of the maximum phase boost, $\\phi_m$, that it provides.\n\nThe phase contribution of the lead network, $G_{\\ell}(s)$, at an angular frequency $\\omega$ is given by:\n$$\n\\phi_{\\ell}(\\omega) = \\arg\\left[G_{\\ell}(j\\omega)\\right] = \\arg\\left[ \\frac{1 + j\\omega/\\omega_{z}}{1 + j\\omega/\\omega_{p}} \\right]\n$$\nThis can be expressed as the difference of the arguments of the numerator and the denominator:\n$$\n\\phi_{\\ell}(\\omega) = \\arctan\\left(\\frac{\\omega}{\\omega_{z}}\\right) - \\arctan\\left(\\frac{\\omega}{\\omega_{p}}\\right)\n$$\nThe problem states that the maximum phase boost, denoted by $\\phi_m$, occurs at the crossover angular frequency, $\\omega_c$. To find the frequency at which the phase boost is maximum, we must find the derivative of $\\phi_{\\ell}(\\omega)$ with respect to $\\omega$ and set it to zero.\n$$\n\\frac{d\\phi_{\\ell}}{d\\omega} = \\frac{d}{d\\omega} \\left[ \\arctan\\left(\\frac{\\omega}{\\omega_{z}}\\right) - \\arctan\\left(\\frac{\\omega}{\\omega_{p}}\\right) \\right]\n$$\nUsing the chain rule for derivatives, specifically $\\frac{d}{dx}\\arctan(u) = \\frac{1}{1+u^2}\\frac{du}{dx}$, we get:\n$$\n\\frac{d\\phi_{\\ell}}{d\\omega} = \\frac{1}{1 + (\\omega/\\omega_{z})^{2}} \\cdot \\frac{1}{\\omega_{z}} - \\frac{1}{1 + (\\omega/\\omega_{p})^{2}} \\cdot \\frac{1}{\\omega_{p}}\n$$\nSimplifying the denominators:\n$$\n\\frac{d\\phi_{\\ell}}{d\\omega} = \\frac{\\omega_{z}}{\\omega_{z}^{2} + \\omega^{2}} - \\frac{\\omega_{p}}{\\omega_{p}^{2} + \\omega^{2}}\n$$\nTo find the maximum, we set the derivative to zero. The frequency at which this maximum occurs is specified as $\\omega_c$:\n$$\n\\frac{\\omega_{z}}{\\omega_{z}^{2} + \\omega_c^{2}} = \\frac{\\omega_{p}}{\\omega_{p}^{2} + \\omega_c^{2}}\n$$\nCross-multiplying gives:\n$$\n\\omega_{z}(\\omega_{p}^{2} + \\omega_c^{2}) = \\omega_{p}(\\omega_{z}^{2} + \\omega_c^{2})\n$$\n$$\n\\omega_{z}\\omega_{p}^{2} + \\omega_{z}\\omega_c^{2} = \\omega_{p}\\omega_{z}^{2} + \\omega_{p}\\omega_c^{2}\n$$\nRearranging the terms to solve for $\\omega_c^2$:\n$$\n\\omega_c^{2}(\\omega_{z} - \\omega_{p}) = \\omega_{p}\\omega_{z}^{2} - \\omega_{z}\\omega_{p}^{2}\n$$\n$$\n\\omega_c^{2}(\\omega_{z} - \\omega_{p}) = \\omega_{z}\\omega_{p}(\\omega_{z} - \\omega_{p})\n$$\nThe problem specifies a phase-lead network with $\\omega_{p}  \\omega_{z}$, so the term $(\\omega_{z} - \\omega_{p})$ is non-zero. We can divide both sides by this term:\n$$\n\\omega_c^{2} = \\omega_{z}\\omega_{p}\n$$\nThis yields the well-known result that the maximum phase boost occurs at the geometric mean of the zero and pole frequencies:\n$$\n\\omega_c = \\sqrt{\\omega_{z}\\omega_{p}}\n$$\nNow, we substitute this frequency $\\omega_c$ back into the expression for the phase boost to find the maximum phase boost, $\\phi_m$:\n$$\n\\phi_m = \\phi_{\\ell}(\\omega_c) = \\arctan\\left(\\frac{\\sqrt{\\omega_{z}\\omega_{p}}}{\\omega_{z}}\\right) - \\arctan\\left(\\frac{\\sqrt{\\omega_{z}\\omega_{p}}}{\\omega_{p}}\\right)\n$$\n$$\n\\phi_m = \\arctan\\left(\\sqrt{\\frac{\\omega_{p}}{\\omega_{z}}}\\right) - \\arctan\\left(\\sqrt{\\frac{\\omega_{z}}{\\omega_{p}}}\\right)\n$$\nTo solve for the ratio $\\omega_z/\\omega_p$, let us define a variable $k = \\sqrt{\\frac{\\omega_p}{\\omega_z}}$. Then $\\sqrt{\\frac{\\omega_z}{\\omega_p}} = \\frac{1}{k}$. The equation for $\\phi_m$ becomes:\n$$\n\\phi_m = \\arctan(k) - \\arctan\\left(\\frac{1}{k}\\right)\n$$\nWe use the trigonometric identity $\\arctan(x) + \\arctan(1/x) = \\frac{\\pi}{2}$ for any $x  0$. Since $\\omega_p, \\omega_z  0$, we have $k  0$, and the identity applies. Rearranging it gives $\\arctan(1/k) = \\frac{\\pi}{2} - \\arctan(k)$. Substituting this into the equation for $\\phi_m$:\n$$\n\\phi_m = \\arctan(k) - \\left(\\frac{\\pi}{2} - \\arctan(k)\\right)\n$$\n$$\n\\phi_m = 2\\arctan(k) - \\frac{\\pi}{2}\n$$\nNow, we solve for $\\arctan(k)$:\n$$\n2\\arctan(k) = \\phi_m + \\frac{\\pi}{2}\n$$\n$$\n\\arctan(k) = \\frac{\\phi_m}{2} + \\frac{\\pi}{4}\n$$\nTaking the tangent of both sides to solve for $k$:\n$$\nk = \\tan\\left(\\frac{\\phi_m}{2} + \\frac{\\pi}{4}\\right)\n$$\nSubstitute back $k = \\sqrt{\\frac{\\omega_p}{\\omega_z}}$:\n$$\n\\sqrt{\\frac{\\omega_p}{\\omega_z}} = \\tan\\left(\\frac{\\phi_m}{2} + \\frac{\\pi}{4}\\right)\n$$\nSquaring both sides gives the ratio $\\omega_p/\\omega_z$:\n$$\n\\frac{\\omega_p}{\\omega_z} = \\tan^2\\left(\\frac{\\phi_m}{2} + \\frac{\\pi}{4}\\right)\n$$\nThe problem requires the expression for $\\omega_z/\\omega_p$. We take the reciprocal of the above expression:\n$$\n\\frac{\\omega_z}{\\omega_p} = \\frac{1}{\\tan^2\\left(\\frac{\\phi_m}{2} + \\frac{\\pi}{4}\\right)}\n$$\nThis expression can be simplified using the identity $\\tan^2(x/2 + \\pi/4) = \\frac{1+\\sin(x)}{1-\\sin(x)}$. Applying this identity with $x = \\phi_m$:\n$$\n\\frac{\\omega_p}{\\omega_z} = \\frac{1 + \\sin(\\phi_m)}{1 - \\sin(\\phi_m)}\n$$\nTaking the reciprocal yields the final closed-form expression for the required ratio:\n$$\n\\frac{\\omega_z}{\\omega_p} = \\frac{1 - \\sin(\\phi_m)}{1 + \\sin(\\phi_m)}\n$$\nThe defining condition for a phase-lead network is $\\omega_p  \\omega_z  0$, which implies that the ratio $\\omega_z/\\omega_p$ must be less than $1$. For a phase *boost*, the phase margin contribution $\\phi_m$ must be positive, i.e., $\\phi_m  0$. For a single-stage lead network, the maximum possible boost is $\\phi_m  \\pi/2$. In the range $0  \\phi_m  \\pi/2$, $\\sin(\\phi_m)$ is positive, which ensures that $1 - \\sin(\\phi_m)  1 + \\sin(\\phi_m)$, and therefore the ratio $\\frac{\\omega_z}{\\omega_p}$ is indeed less than $1$, consistent with the definition of a lead network.",
            "answer": "$$\n\\boxed{\\frac{1 - \\sin(\\phi_m)}{1 + \\sin(\\phi_m)}}\n$$"
        },
        {
            "introduction": "A controller designed in the continuous-time domain must ultimately be implemented as an algorithm on a digital processor. This final practice bridges the gap between analog theory and digital reality by converting a continuous-time PI controller into a discrete-time difference equation. Using the Tustin transformation, you will derive the coefficients for a digital filter that can be directly coded into a microcontroller, completing the design journey from modeling to implementation .",
            "id": "3866048",
            "problem": "A continuous-time Proportional-Integral (PI) controller has transfer function $C(s)=K_{p}+\\frac{K_{i}}{s}$, where $K_{p}0$ and $K_{i}0$ are real, and it is to be implemented in a sampled-data digital controller at a uniform sampling period $T_{s}0$ to regulate the error signal $e(t)$ arising in a direct-current to direct-current (DC-DC) converter loop. Using the bilinear transformation (also known as the Tustin transformation) to obtain a discrete-time approximation consistent with trapezoidal integration, derive the discrete-time controller transfer function $C(z)$ and the corresponding causal first-order difference equation that maps the error sequence $e[k]$ to the control sequence $u[k]$ with one-step memory. Express the difference equation in the affine form\n$$\nu[k]=\\alpha\\,e[k]+\\beta\\,e[k-1]+\\gamma\\,u[k-1],\n$$\nand provide closed-form expressions for the coefficients $\\alpha$, $\\beta$, and $\\gamma$ as functions of $K_{p}$, $K_{i}$, and $T_{s}$. Your final answer must be the three coefficients given as a row matrix using the LaTeX $\\texttt{pmatrix}$ environment. No numerical evaluation is required.",
            "solution": "The problem requires the derivation of a discrete-time difference equation for a Proportional-Integral (PI) controller from its continuous-time representation using the bilinear transformation. The goal is to determine the coefficients $\\alpha$, $\\beta$, and $\\gamma$ for the specified affine form of the difference equation.\n\nThe continuous-time transfer function of the PI controller is given as:\n$$\nC(s) = K_{p} + \\frac{K_{i}}{s}\n$$\nwhere $K_{p}$ is the proportional gain, $K_{i}$ is the integral gain, and $s$ is the Laplace variable. For algebraic manipulation, it is convenient to express this as a single rational function:\n$$\nC(s) = \\frac{K_{p}s + K_{i}}{s}\n$$\nThe problem specifies the use of the bilinear transformation, also known as the Tustin transformation, to convert the continuous-time transfer function $C(s)$ into a discrete-time transfer function $C(z)$. This transformation provides a mapping from the s-plane to the z-plane and is equivalent to approximating the continuous-time integration operator $1/s$ using the trapezoidal rule for numerical integration. The transformation is given by the substitution:\n$$\ns \\rightarrow \\frac{2}{T_{s}} \\frac{z-1}{z+1}\n$$\nwhere $T_s$ is the sampling period and $z$ is the discrete-time complex variable.\n\nSubstituting this expression for $s$ into the controller's transfer function $C(s)$ yields the discrete-time transfer function $C(z)$:\n$$\nC(z) = C(s) \\bigg|_{s = \\frac{2}{T_{s}} \\frac{z-1}{z+1}} = \\frac{K_{p} \\left( \\frac{2}{T_{s}} \\frac{z-1}{z+1} \\right) + K_{i}}{\\frac{2}{T_{s}} \\frac{z-1}{z+1}}\n$$\nTo simplify this complex fraction, we multiply the numerator and the denominator by the term $T_{s}(z+1)$:\n$$\nC(z) = \\frac{\\left[K_{p} \\left( \\frac{2}{T_{s}} \\frac{z-1}{z+1} \\right) + K_{i}\\right] T_{s}(z+1)}{\\left[ \\frac{2}{T_{s}} \\frac{z-1}{z+1} \\right] T_{s}(z+1)}\n$$\n$$\nC(z) = \\frac{K_{p} \\cdot 2(z-1) + K_{i} T_{s}(z+1)}{2(z-1)}\n$$\nExpanding the terms in the numerator:\n$$\nC(z) = \\frac{2K_{p}z - 2K_{p} + K_{i}T_{s}z + K_{i}T_{s}}{2z-2}\n$$\nGrouping terms by powers of $z$:\n$$\nC(z) = \\frac{(2K_{p} + K_{i}T_{s})z + (K_{i}T_{s} - 2K_{p})}{2z-2}\n$$\nThe discrete-time transfer function $C(z)$ relates the Z-transform of the control sequence, $U(z)$, to the Z-transform of the error sequence, $E(z)$, by the relation $C(z) = \\frac{U(z)}{E(z)}$. Therefore:\n$$\n\\frac{U(z)}{E(z)} = \\frac{(2K_{p} + K_{i}T_{s})z + (K_{i}T_{s} - 2K_{p})}{2z-2}\n$$\nTo find the difference equation, we cross-multiply:\n$$\nU(z)(2z - 2) = E(z) \\left[ (2K_{p} + K_{i}T_{s})z + (K_{i}T_{s} - 2K_{p}) \\right]\n$$\nTo obtain a causal difference equation involving current and past values ($k$ and $k-1$), we divide the entire equation by the highest power of $z$, which is $z^1$:\n$$\nU(z)(2 - 2z^{-1}) = E(z) \\left[ (2K_{p} + K_{i}T_{s}) + (K_{i}T_{s} - 2K_{p})z^{-1} \\right]\n$$\nThis equation can be converted back to the time domain by applying the inverse Z-transform. The time-shift property of the Z-transform states that multiplication by $z^{-1}$ in the z-domain corresponds to a one-step time delay in the time domain. Thus, $z^{-1}X(z)$ corresponds to the sequence $x[k-1]$. Applying this yields the difference equation:\n$$\n2u[k] - 2u[k-1] = (2K_{p} + K_{i}T_{s})e[k] + (K_{i}T_{s} - 2K_{p})e[k-1]\n$$\nThe problem requires this equation to be in the affine form $u[k]=\\alpha\\,e[k]+\\beta\\,e[k-1]+\\gamma\\,u[k-1]$. We can achieve this by isolating the $u[k]$ term:\n$$\n2u[k] = (2K_{p} + K_{i}T_{s})e[k] + (K_{i}T_{s} - 2K_{p})e[k-1] + 2u[k-1]\n$$\nDividing the entire equation by $2$:\n$$\nu[k] = \\frac{2K_{p} + K_{i}T_{s}}{2} e[k] + \\frac{K_{i}T_{s} - 2K_{p}}{2} e[k-1] + \\frac{2}{2} u[k-1]\n$$\nSimplifying the coefficients gives:\n$$\nu[k] = \\left(K_{p} + \\frac{K_{i}T_{s}}{2}\\right) e[k] + \\left(\\frac{K_{i}T_{s}}{2} - K_{p}\\right) e[k-1] + (1) u[k-1]\n$$\nBy comparing this result with the target form $u[k]=\\alpha\\,e[k]+\\beta\\,e[k-1]+\\gamma\\,u[k-1]$, we can identify the coefficients $\\alpha$, $\\beta$, and $\\gamma$:\n$$\n\\alpha = K_{p} + \\frac{K_{i}T_{s}}{2}\n$$\n$$\n\\beta = \\frac{K_{i}T_{s}}{2} - K_{p}\n$$\n$$\n\\gamma = 1\n$$\nThese are the closed-form expressions for the coefficients of the first-order difference equation that implements the PI controller using the bilinear transformation.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} K_{p} + \\frac{K_{i} T_{s}}{2}  \\frac{K_{i} T_{s}}{2} - K_{p}  1 \\end{pmatrix}}\n$$"
        }
    ]
}
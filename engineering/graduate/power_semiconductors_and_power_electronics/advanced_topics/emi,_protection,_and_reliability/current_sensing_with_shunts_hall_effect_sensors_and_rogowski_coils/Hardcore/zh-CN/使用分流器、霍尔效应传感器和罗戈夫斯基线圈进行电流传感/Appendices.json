{
    "hands_on_practices": [
        {
            "introduction": "任何实际的测量系统都不可避免地存在由各个组件（如采样电阻、放大器和ADC参考电压）的容差引起的静态增益误差。本练习将引导你量化一个典型分流电阻电流检测链路中的最差情况下的复合增益误差。更重要的是，你将学习如何设计一个实用的两点校准程序，从根本上消除这些静态误差，为实现高精度测量打下基础。",
            "id": "3831293",
            "problem": "一个电阻分流电流传感器用于测量功率变换器桥臂的相电流。信号链由一个标称电阻为 $R_{s}$ 的精密电阻分流器、一个增益为 $G_{a}$ 的低噪声仪表放大器和一个标称参考电压为 $V_{\\mathrm{ref}}$ 的模数转换器 (ADC) 组成。假设除了指定的小的相对公差外，所有元件都是理想线性的，并忽略温度漂移、自热和非线性等二阶效应。该转换链通过欧姆定律和理想的线性传输特性将输入电流 $I$ 映射到 ADC 输出码值 $C$。\n\n给定条件：\n- 分流器标称电阻 $R_{s} = 5.00 \\times 10^{-4}\\,\\Omega$，相对公差 $t_{R} = \\pm 2.5 \\times 10^{-3}$。\n- 放大器标称增益 $G_{a} = 60$，相对公差 $t_{G} = \\pm 8.0 \\times 10^{-4}$。\n- ADC 标称参考电压 $V_{\\mathrm{ref}} = 2.500\\,\\mathrm{V}$，相对公差 $t_{V} = \\pm 5.0 \\times 10^{-4}$。\n- ADC 是理想的单极性转换器，其精确位数对于本计算不是必需的。\n\n从基本定律和定义（分流器的欧姆定律、线性放大、ADC 码值与输入电压和参考电压之比的理想比例关系）出发，推导从电流到 ADC 码值的复合分数增益的一阶线性化表达式。使用一阶线性误差传播方法，通过组合三个独立的相对公差，计算复合分数增益误差的最坏情况下的幅值，并以单个小数表示。\n\n此外，请提出一个实用的校准程序，在数字域中校正复合增益，该程序使用已知的校准电流并包括失调校正。清晰地解释其步骤和数学原理。\n\n将最终的最坏情况复合分数增益误差表示为无单位的小数，并将您的答案四舍五入到四位有效数字。",
            "solution": "该问题要求分两部分作答：首先，计算电流检测信号链的最坏情况分数增益误差；其次，提出一个校准程序来校正此误差。\n\n**第 1 部分：最坏情况分数增益误差分析**\n\n首先，我们建立信号链的数学模型。该信号链由一个分流电阻、一个放大器和一个模数转换器 (ADC) 组成。\n\n1.  分流电阻两端的电压 $V_s$ 由欧姆定律给出，其中 $I$ 是流过它的电流，$R_s$ 是其电阻：\n    $$V_s = I \\cdot R_s$$\n\n2.  该电压随后被增益为 $G_a$ 的仪表放大器放大。放大器的输出电压 $V_a$，即 ADC 的输入电压，为：\n    $$V_a = G_a \\cdot V_s = G_a R_s I$$\n\n3.  问题指出 ADC 是理想的单极性转换器。ADC 的数字输出码值与其输入电压和参考电压之比成正比。为便于分析，我们使用归一化 ADC 输出 $c$ 最为方便，它表示输入电压占满量程电压的比例。满量程电压即为参考电压 $V_{\\mathrm{ref}}$。\n    $$c = \\frac{V_a}{V_{\\mathrm{ref}}}$$\n\n4.  通过代入 $V_a$ 的表达式，我们得到输入电流 $I$ 和归一化输出 $c$ 之间的关系：\n    $$c = \\frac{G_a R_s I}{V_{\\mathrm{ref}}}$$\n\n问题要求“从电流到 ADC 码值的复合分数增益”。我们将其解释为从输入电流 $I$ 到归一化输出 $c$ 的增益 $K$。\n$$K = \\frac{c}{I} = \\frac{G_a R_s}{V_{\\mathrm{ref}}}$$\n这个复合增益 $K$ 是具有指定公差的三个参数的函数：$R_s$、$G_a$ 和 $V_{\\mathrm{ref}}$。\n\n为了找到分数增益误差 $\\frac{\\Delta K}{K}$ 的一阶线性化表达式，我们可以使用对数微分法，这对于乘法函数等价于一阶误差传播。对增益表达式取自然对数：\n$$\\ln(K) = \\ln(G_a) + \\ln(R_s) - \\ln(V_{\\mathrm{ref}})$$\n\n对该表达式进行微分，得到微分分数变化之间的关系：\n$$\\frac{dK}{K} = \\frac{dG_a}{G_a} + \\frac{dR_s}{R_s} - \\frac{dV_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}$$\n\n对于小的、有限的变化（误差），我们可以用小的变化量 $\\Delta x$ 来近似微分 $dx$。这产生分数增益误差的一阶线性化表达式：\n$$\\frac{\\Delta K}{K} \\approx \\frac{\\Delta R_s}{R_s} + \\frac{\\Delta G_a}{G_a} - \\frac{\\Delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}$$\n\n当各个误差项以相同符号相加以使总幅值最大化时，出现最坏情况下的分数增益误差幅值。这可以通过对上述表达式应用三角不等式，并考虑每个单独分数误差的最大幅值（由指定的相对公差给出）来找到。\n设公差为 $t_R = \\max\\left|\\frac{\\Delta R_s}{R_s}\\right|$、$t_G = \\max\\left|\\frac{\\Delta G_a}{G_a}\\right|$ 和 $t_V = \\max\\left|\\frac{\\Delta V_{\\mathrm{ref}}}{V_{\\mathrm{ref}}}\\right|$。最坏情况的分数增益误差是这些公差之和：\n$$\\left| \\frac{\\Delta K}{K} \\right|_{\\mathrm{worst}} = t_R + t_G + t_V$$\n\n现在，我们代入给定的数值：\n-   分流器公差，$t_{R} = 2.5 \\times 10^{-3}$\n-   放大器增益公差，$t_{G} = 8.0 \\times 10^{-4}$\n-   ADC 参考电压公差，$t_{V} = 5.0 \\times 10^{-4}$\n\n$$\\left| \\frac{\\Delta K}{K} \\right|_{\\mathrm{worst}} = (2.5 \\times 10^{-3}) + (8.0 \\times 10^{-4}) + (5.0 \\times 10^{-4})$$\n为了进行加法运算，我们可以将所有项表示为相同的 $10$ 的幂次：\n$$\\left| \\frac{\\Delta K}{K} \\right|_{\\mathrm{worst}} = (2.5 \\times 10^{-3}) + (0.8 \\times 10^{-3}) + (0.5 \\times 10^{-3})$$\n$$\\left| \\frac{\\Delta K}{K} \\right|_{\\mathrm{worst}} = (2.5 + 0.8 + 0.5) \\times 10^{-3} = 3.8 \\times 10^{-3}$$\n\n表示为小数，即为 $0.0038$。问题要求四舍五入到四位有效数字，因此结果是 $0.003800$。\n\n**第 2 部分：实用校准程序**\n\n一个实用的校准程序旨在通过计算来校正复合增益误差和任何系统失调。该过程依赖于两点校准法，并假设系统响应是线性的。\n\n**数学原理**\n真实输入电流 $I_{\\mathrm{true}}$ 与测得的原始 ADC 码值 $C_{\\mathrm{meas}}$ 之间的实际关系可以建模为一个线性方程：\n$$C_{\\mathrm{meas}} = K_{\\mathrm{actual}} \\cdot I_{\\mathrm{true}} + C_{\\mathrm{offset}}$$\n其中 $K_{\\mathrm{actual}}$ 是系统的实际复合增益，单位为 [ADC 码值 / 安培]，而 $C_{\\mathrm{offset}}$ 表示参考到 ADC 输入端的信号链总直流失调（来自放大器和其他来源），单位为 [ADC 码值]。校准程序的目的就是找出 $K_{\\mathrm{actual}}$ 和 $C_{\\mathrm{offset}}$ 的值。\n\n**校准步骤**\n\n1.  **失调测量（点 1）：**\n    *   **操作：** 确保输入电流为零 ($I_{\\mathrm{true}} = 0$)。在功率变换器中，这可以通过确保相关桥臂不进行开关操作且不承载负载电流来实现。\n    *   **测量：** 测量 ADC 输出码值。为提高精度并减少噪声影响，采集具有统计学意义的样本数量（例如 $1000$ 个）并计算其平均值。设此平均值为 $C_1$。\n    *   **计算：** 当 $I_{\\mathrm{true}} = 0$ 时，模型简化为 $C_1 = K_{\\mathrm{actual}} \\cdot 0 + C_{\\mathrm{offset}}$。这直接给出了系统失调：$C_{\\mathrm{offset}} = C_1$。该值作为第一个校准常数被存储起来。\n\n2.  **增益测量（点 2）：**\n    *   **操作：** 施加一个已知的、稳定的、非零的直流校准电流，称之为 $I_{\\mathrm{cal}}$。该电流必须使用可信的、经过校准的仪器（例如高精度源/测量单元或精密万用表）进行精确测量，其精度应显著高于待校准系统的目标精度。理想情况下，$I_{\\mathrm{cal}}$ 的值应在传感器测量范围的后半部分，以最大化信噪比。\n    *   **测量：** 测量相应的 ADC 输出码值。同样，对大量样本进行平均以获得稳定读数，称之为 $C_2$。\n    *   **计算：** 使用已知电流 $I_{\\mathrm{cal}}$，模型给出 $C_2 = K_{\\mathrm{actual}} \\cdot I_{\\mathrm{cal}} + C_{\\mathrm{offset}}$。我们已经求得 $C_{\\mathrm{offset}} = C_1$。代入此值，得到 $C_2 = K_{\\mathrm{actual}} \\cdot I_{\\mathrm{cal}} + C_1$。现在我们可以解出实际系统增益 $K_{\\mathrm{actual}}$：\n        $$K_{\\mathrm{actual}} = \\frac{C_2 - C_1}{I_{\\mathrm{cal}}}$$\n        该值作为第二个校准常数被存储起来。\n\n**软件实现**\n\n一旦校准常数 $C_{\\mathrm{offset}}$ 和 $K_{\\mathrm{actual}}$ 被确定并存储在系统的微控制器或 DSP 的非易失性存储器中，它们就会被用来校正随后的每一次测量。对于任何新的原始 ADC 读数 $C_{\\mathrm{meas}}$，通过反转线性模型来计算真实电流 $I_{\\mathrm{true}}$：\n$$I_{\\mathrm{true}} = \\frac{C_{\\mathrm{meas}} - C_{\\mathrm{offset}}}{K_{\\mathrm{actual}}}$$\n这种实时计算提供了对电流的测量值，该值已对整个信号链的静态增益和失调误差进行了校正。",
            "answer": "$$\\boxed{0.003800}$$"
        },
        {
            "introduction": "虽然系统校准可以有效修正静态增益误差，但它无法解决动态噪声干扰问题，尤其是在开关变换器等嘈杂环境中。本练习聚焦于高边电流检测中一个常见的挑战：共模电压干扰。通过这个实践，你将学会把共模抑制比（CMRR）这一关键性能指标与具体的测量精度要求联系起来，并计算出在特定噪声水平下保证测量精度的最小CMRR值。",
            "id": "3831224",
            "problem": "一个精密差分前端通过一个低欧姆值分流电阻来检测大功率同步降压转换器中的电流。该分流电阻的阻值为 $R_{s} = 5.00 \\times 10^{-4}\\,\\Omega$，流过一个幅值为 $I = 100\\ \\mathrm{A}$ 的缓慢变化的电流，因此分流电阻两端的差分信号幅值为 $V_{s} = I R_{s}$。由于来自开关节点的容性耦合，两个放大器输入端都受到一个幅值为 $V_{CM} = 12.0\\,\\mathrm{V}$、频率为 $f = 100\\ \\mathrm{kHz}$ 的共模正弦干扰。该差分放大器具有有限的共模抑制比 (CMRR)，其值以分贝为单位。\n\n请仅从差分增益、共模增益和共模抑制比 (CMRR) 的定义出发，首先推导出一个由共模干扰 $V_{CM}$ 引起的输入参考差分误差幅值的表达式，该表达式应使用以分贝表示的 CMRR。然后，通过要求由共模引起的输入参考误差幅值与差分信号幅值 $V_{s}$ 的比率不超过指定的误差界限 $\\epsilon = 0.010$，计算在频率 $f$ 下保证满足此界限的最小CMRR。\n\n以dB为单位表示所需的CMRR，并将答案四舍五入至四位有效数字。",
            "solution": "该问题被验证为科学上合理、提法得当、客观且自包含。所提供的值对于大功率同步降压转换器应用是符合实际的。任务是首先推导由共模干扰引起的输入参考误差的表达式，然后计算满足指定误差界限所需的最小共模抑制比 (CMRR)。\n\n首先，我们建立差分放大器的基本定义。设两个输入电压为 $v_1$ 和 $v_2$。差分输入电压 $v_d$ 和共模输入电压 $v_{cm}$ 定义如下：\n$$v_d = v_1 - v_2$$\n$$v_{cm} = \\frac{v_1 + v_2}{2}$$\n差分放大器的输出电压 $v_o$ 是差分输入和共模输入的线性组合，其特征由差分增益 $A_d$ 和共模增益 $A_{cm}$ 决定：\n$$v_o = A_d v_d + A_{cm} v_{cm}$$\n由共模输入产生的输出电压部分是误差分量 $v_{o,err}$：\n$$v_{o,err} = A_{cm} v_{cm}$$\n为了确定输入参考差分误差电压 $v_{d,err}$，我们找到在输出端能产生相同误差的等效差分输入。这是通过将输出误差除以差分增益来实现的：\n$$v_{d,err} = \\frac{v_{o,err}}{A_d} = \\frac{A_{cm} v_{cm}}{A_d}$$\n共模抑制比 (CMRR) 定义为差分增益与共模增益之比的绝对值：\n$$\\mathrm{CMRR} = \\left| \\frac{A_d}{A_{cm}} \\right|$$\n将CMRR的定义代入输入参考误差电压的表达式，得到：\n$$v_{d,err} = \\frac{v_{cm}}{\\mathrm{CMRR}}$$\n问题中指定了一个幅值为 $V_{CM}$ 的共模正弦干扰。因此，我们记作 $V_{d,err}$ 的输入参考差分误差电压的幅值为：\n$$V_{d,err} = \\frac{V_{CM}}{\\mathrm{CMRR}}$$\nCMRR 通常以分贝 ($\\mathrm{dB}$) 为单位表示，其关系如下：\n$$\\mathrm{CMRR}_{\\mathrm{dB}} = 20 \\log_{10}(\\mathrm{CMRR})$$\n根据这个定义，我们可以用其分贝值来表示CMRR：\n$$\\mathrm{CMRR} = 10^{\\frac{\\mathrm{CMRR}_{\\mathrm{dB}}}{20}}$$\n将此代入我们的误差幅值表达式，我们得到用 $\\mathrm{CMRR}_{\\mathrm{dB}}$ 表示的输入参考差分误差幅值：\n$$V_{d,err} = \\frac{V_{CM}}{10^{\\frac{\\mathrm{CMRR}_{\\mathrm{dB}}}{20}}} = V_{CM} \\cdot 10^{-\\frac{\\mathrm{CMRR}_{\\mathrm{dB}}}{20}}$$\n这就完成了问题的第一部分，即输入参考误差幅值的推导。\n\n接下来，我们必须计算满足给定误差界限所需的最小CMRR。问题陈述，由共模引起的输入参考误差幅值 $V_{d,err}$ 与期望的差分信号幅值 $V_s$ 的比率必须不超过指定的误差界限 $\\epsilon$。这个要求表示为：\n$$\\frac{V_{d,err}}{V_s} \\le \\epsilon$$\n代入 $V_{d,err}$ 的表达式：\n$$\\frac{V_{CM} / \\mathrm{CMRR}}{V_s} \\le \\epsilon$$\n为了找到保证此界限的最小CMRR，我们在不等式的临界条件下求解CMRR：\n$$\\frac{V_{CM}}{\\mathrm{CMRR} \\cdot V_s} = \\epsilon$$\n$$\\mathrm{CMRR} \\ge \\frac{V_{CM}}{\\epsilon V_s}$$\n因此，所需的最小CMRR为：\n$$\\mathrm{CMRR}_{\\mathrm{min}} = \\frac{V_{CM}}{\\epsilon V_s}$$\n给定以下数值：\n共模干扰幅值, $V_{CM} = 12.0\\,\\mathrm{V}$。\n误差界限, $\\epsilon = 0.010$。\n分流电阻, $R_s = 5.00 \\times 10^{-4}\\,\\Omega$。\n电流幅值, $I = 100\\ \\mathrm{A}$。\n\n首先，我们计算差分信号幅值 $V_s$：\n$$V_s = I R_s = (100\\ \\mathrm{A}) \\times (5.00 \\times 10^{-4}\\,\\Omega) = 0.0500\\ \\mathrm{V}$$\n现在，我们可以计算所需的最小CMRR（作为线性比值）：\n$$\\mathrm{CMRR}_{\\mathrm{min}} = \\frac{12.0\\,\\mathrm{V}}{0.010 \\times 0.0500\\,\\mathrm{V}} = \\frac{12.0}{5.00 \\times 10^{-4}} = 24000$$\n问题要求答案以分贝表示。我们将这个线性比值转换为 $\\mathrm{dB}$：\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} = 20 \\log_{10}(\\mathrm{CMRR}_{\\mathrm{min}}) = 20 \\log_{10}(24000)$$\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} = 20 \\log_{10}(2.4 \\times 10^4) = 20 (\\log_{10}(2.4) + \\log_{10}(10^4))$$\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} = 20 (\\log_{10}(2.4) + 4)$$\n使用计算器, $\\log_{10}(2.4) \\approx 0.380211$。\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} \\approx 20 (0.380211 + 4) = 20 \\times 4.380211 \\approx 87.60422\\ \\mathrm{dB}$$\n问题要求将最终答案四舍五入到四位有效数字。\n$$\\mathrm{CMRR}_{\\mathrm{dB,min}} \\approx 87.60\\ \\mathrm{dB}$$\n这是在干扰频率 $f = 100\\,\\mathrm{kHz}$ 下所需的最小CMRR，以确保由共模电压引起的误差不超过被测信号的 $1\\%$。",
            "answer": "$$\\boxed{87.60}$$"
        },
        {
            "introduction": "将视线从分流电阻转向霍尔效应传感器，我们将探讨另一类重要的非理想特性——温度漂移。本练习模拟了一个未经温度补偿的开环霍尔传感器，在宽温度范围下的性能表现。通过推导并计算由灵敏度和失调随温度变化引起的最差情况测量误差，你将深刻理解为何简单的单点校准不足以保证在整个工作范围内的精度，并认识到更高级补偿方案或闭环传感器的价值所在。",
            "id": "3831272",
            "problem": "一个三相逆变器使用一个开环霍尔效应传感器（无磁通置零）来测量相电流。该霍尔效应传感器的规格为：在 $T_0 = 25^{\\circ}\\mathrm{C}$ 时，标称灵敏度为 $S_0 = 185\\,\\mathrm{mV/A}$，并且在 $T_0$ 时有一个初始输出失调，该失调通过在 $T_0$ 执行的单点失调校准来消除。在整个温度范围内，该传感器表现出灵敏度分数温度系数 $k_S = 7.0 \\times 10^{-4}\\,\\mathrm{/^{\\circ}C}$ 和失调漂移 $k_{\\mathrm{off}} = 1.5\\,\\mathrm{mV/^{\\circ}C}$。环境温度在 $-40^{\\circ}\\mathrm{C}$ 到 $125^{\\circ}\\mathrm{C}$ 的范围内变化。目标电流位于区间 $I \\in [5\\,\\mathrm{A},\\,30\\,\\mathrm{A}]$ 内。\n\n从将霍尔效应传感器输出与导体电流感应的磁场以及传感器的线性化传输特性相关联的基本原理出发，对在 $T_0$ 进行失调校准后的传感器输出和估算过程进行建模。推导在任意温度 $T$ 和电流 $I$ 下，由 (i) 灵敏度漂移和 (ii) 失调漂移引起的估算电流的分数误差表达式，假设除了在 $T_0$ 的单点失调校准外，没有进行磁通置零或温度补偿。然后，确定在指定的温度和电流范围内的最坏情况分数误差。\n\n最后，设计要求在整个温度范围内的精度在 $\\pm \\epsilon$ 以内，其中 $\\epsilon = 0.03$ 以小数形式表示。计算最坏情况分数误差，结果为一个实数。将最终结果表示为小数，并四舍五入到四位有效数字。",
            "solution": "该问题被验证为是自洽的、有科学依据的、适定的和客观的。它提出了一个基于霍尔效应传感器线性模型的标准工程分析任务，并提供了所有必要的参数。问题中没有矛盾、歧义或违反科学原理之处。因此，将推导求解。\n\n首先，我们建立传感器输出电压的模型。霍尔效应传感器的输出 $V_{\\text{out}}$ 与测量的电流 $I$ 呈线性关系，并带有一个失调电压。灵敏度和失调都是温度 $T$ 的函数。模型如下：\n$$V_{\\text{out}}(I, T) = S(T) \\cdot I + V_{\\text{off}}(T)$$\n其中 $S(T)$ 是在温度 $T$ 时的灵敏度，$V_{\\text{off}}(T)$ 是在温度 $T$ 时的输出失调电压。\n\n问题给出了灵敏度和失调相对于参考温度 $T_0 = 25^{\\circ}\\mathrm{C}$ 的温度依赖性的线性模型。\n灵敏度 $S(T)$ 由下式给出：\n$$S(T) = S_0 (1 + k_S (T - T_0))$$\n其中 $S_0 = 185\\,\\mathrm{mV/A}$ 是在 $T_0$ 时的标称灵敏度，$k_S = 7.0 \\times 10^{-4}\\,\\mathrm{/^{\\circ}C}$ 是灵敏度分数温度系数。\n\n失调电压 $V_{\\text{off}}(T)$ 由一个在 $T_0$ 时的初始失调（我们称之为 $V_{\\text{off,init}}$）和一个随温度变化的漂移组成：\n$$V_{\\text{off}}(T) = V_{\\text{off,init}} + k_{\\mathrm{off}} (T - T_0)$$\n其中 $k_{\\mathrm{off}} = 1.5\\,\\mathrm{mV/^{\\circ}C}$ 是失调漂移。\n\n在参考温度 $T_0$ 下进行单点失调校准。这包括在零电流（$I=0$）和温度 $T=T_0$ 时测量输出，并从后续测量中减去该值。校准值 $V_{\\text{cal}}$ 为：\n$$V_{\\text{cal}} = V_{\\text{out}}(0, T_0) = S(T_0) \\cdot 0 + V_{\\text{off}}(T_0) = V_{\\text{off}}(T_0)$$\n根据失调模型，$V_{\\text{off}}(T_0) = V_{\\text{off,init}} + k_{\\mathrm{off}}(T_0 - T_0) = V_{\\text{off,init}}$。因此，校准步骤有效地测量并移除了初始失调，$V_{\\text{cal}} = V_{\\text{off,init}}$。\n\n在任意电流 $I$ 和温度 $T$ 下，校准后的输出电压 $V_{\\text{calibrated}}$ 为：\n$$V_{\\text{calibrated}}(I, T) = V_{\\text{out}}(I, T) - V_{\\text{cal}}$$\n$$V_{\\text{calibrated}}(I, T) = [S(T) \\cdot I + V_{\\text{off}}(T)] - V_{\\text{off,init}}$$\n代入 $S(T)$ 和 $V_{\\text{off}}(T)$ 的表达式：\n$$V_{\\text{calibrated}}(I, T) = [S_0 (1 + k_S (T - T_0)) \\cdot I + (V_{\\text{off,init}} + k_{\\mathrm{off}} (T - T_0))] - V_{\\text{off,init}}$$\n$$V_{\\text{calibrated}}(I, T) = S_0 (1 + k_S (T - T_0)) \\cdot I + k_{\\mathrm{off}} (T - T_0)$$\n该方程对指定校准后的传感器输出进行建模。\n\n系统通过假设使用标称灵敏度 $S_0$ 和零失调来估算电流 $I_{\\text{est}}$：\n$$I_{\\text{est}} = \\frac{V_{\\text{calibrated}}(I, T)}{S_0}$$\n代入 $V_{\\text{calibrated}}(I, T)$ 的表达式：\n$$I_{\\text{est}} = \\frac{S_0 (1 + k_S (T - T_0)) \\cdot I + k_{\\mathrm{off}} (T - T_0)}{S_0}$$\n$$I_{\\text{est}} = (1 + k_S (T - T_0)) \\cdot I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0)$$\n估算电流中的分数误差 $\\epsilon_f$ 定义为 $\\frac{I_{\\text{est}} - I}{I}$。\n$$\\epsilon_f(I, T) = \\frac{[(1 + k_S (T - T_0)) \\cdot I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0)] - I}{I}$$\n$$\\epsilon_f(I, T) = \\frac{I + k_S (T - T_0) I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0) - I}{I}$$\n$$\\epsilon_f(I, T) = \\frac{k_S (T - T_0) I + \\frac{k_{\\mathrm{off}}}{S_0}(T - T_0)}{I}$$\n分离各项，我们可以确定误差的来源：\n$$\\epsilon_f(I, T) = k_S(T - T_0) + \\frac{k_{\\mathrm{off}}}{S_0 I}(T - T_0)$$\n项 $k_S(T - T_0)$ 是由灵敏度漂移引起的分数误差，项 $\\frac{k_{\\mathrm{off}}}{S_0 I}(T - T_0)$ 是由失调漂移引起的分数误差。\n这可以因式分解为：\n$$\\epsilon_f(I, T) = \\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)(T - T_0)$$\n为了找到最坏情况分数误差，我们必须在指定范围 $I \\in [5\\,\\mathrm{A}, 30\\,\\mathrm{A}]$ 和 $T \\in [-40^{\\circ}\\mathrm{C}, 125^{\\circ}\\mathrm{C}]$ 内找到 $\\epsilon_f(I, T)$ 的最大绝对值。\n令 $\\Delta T = T - T_0$。由于 $T_0 = 25^{\\circ}\\mathrm{C}$，$\\Delta T$ 的范围是：\n$$\\Delta T \\in [(-40 - 25), (125 - 25)] \\implies \\Delta T \\in [-65^{\\circ}\\mathrm{C}, 100^{\\circ}\\mathrm{C}]$$\n参数 $k_S$、$k_{\\mathrm{off}}$ 和 $S_0$ 都是正常数，电流 $I$ 也是正的。因此，项 $\\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)$ 总是正的。\n为了使 $|\\epsilon_f(I, T)| = \\left|\\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)\\Delta T\\right| = \\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)|\\Delta T|$ 最大化，我们必须使每个因子最大化。\n\n1. 最大化 $|\\Delta T|$：$\\Delta T$ 的范围是 $[-65, 100]$。最大绝对值为 $|\\Delta T|_{\\max} = \\max(|-65|, |100|) = 100^{\\circ}\\mathrm{C}$，这发生在 $T_{\\max} = 125^{\\circ}\\mathrm{C}$ 时。\n\n2. 最大化 $\\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 I}\\right)$：此项是 $I$ 的函数。由于 $\\frac{k_{\\mathrm{off}}}{S_0}$ 是正的，当 $I$ 最小时，该项最大。最小电流为 $I_{\\min} = 5\\,\\mathrm{A}$。\n\n结合这两个条件，最坏情况（最大幅值）误差发生在 $I = 5\\,\\mathrm{A}$ 和 $T = 125^{\\circ}\\mathrm{C}$ 时（或者可能是 $T = -40^{\\circ}\\mathrm{C}$，但这会给出较小的 $|\\Delta T|$）。误差函数的极值将出现在 $(I, T)$ 定义域的一个角点上。由于 $\\Delta T$ 的前置因子总是正的，误差的符号与 $\\Delta T$ 的符号相同。最大幅值误差将发生在离 $T_0$ 最远的温度，即 $T=125^{\\circ}\\mathrm{C}$，以及使误差贡献最大化的电流，即 $I=5\\,\\mathrm{A}$。\n\n因此，最坏情况分数误差 $\\epsilon_{f, \\text{wc}}$ 为：\n$$\\epsilon_{f, \\text{wc}} = \\epsilon_f(5\\,\\mathrm{A}, 125^{\\circ}\\mathrm{C}) = \\left(k_S + \\frac{k_{\\mathrm{off}}}{S_0 \\cdot (5\\,\\mathrm{A})}\\right)(125^{\\circ}\\mathrm{C} - 25^{\\circ}\\mathrm{C})$$\n代入给定值：\n$$k_S = 7.0 \\times 10^{-4}\\,\\mathrm{/^{\\circ}C}$$\n$$k_{\\mathrm{off}} = 1.5\\,\\mathrm{mV/^{\\circ}C}$$\n$$S_0 = 185\\,\\mathrm{mV/A}$$\n$$\\epsilon_{f, \\text{wc}} = \\left(7.0 \\times 10^{-4} + \\frac{1.5}{185 \\cdot 5}\\right) \\cdot 100$$\n$$\\epsilon_{f, \\text{wc}} = \\left(7.0 \\times 10^{-4} + \\frac{1.5}{925}\\right) \\cdot 100$$\n我们可以计算其数值：\n$$\\epsilon_{f, \\text{wc}} = (0.0007 + 0.0016216216...) \\cdot 100$$\n$$\\epsilon_{f, \\text{wc}} = (0.0023216216...) \\cdot 100$$\n$$\\epsilon_{f, \\text{wc}} = 0.23216216...$$\n或者，为了在最终四舍五入前保持精度，使用分数进行计算：\n$$\\epsilon_{f, \\text{wc}} = 100 \\cdot k_S + \\frac{100 \\cdot k_{\\mathrm{off}}}{S_0 \\cdot 5} = 100 \\cdot (7.0 \\times 10^{-4}) + \\frac{100 \\cdot 1.5}{185 \\cdot 5}$$\n$$\\epsilon_{f, \\text{wc}} = 0.07 + \\frac{150}{925}$$\n化简分数：$\\frac{150}{925} = \\frac{6 \\times 25}{37 \\times 25} = \\frac{6}{37}$。\n$$\\epsilon_{f, \\text{wc}} = 0.07 + \\frac{6}{37} = \\frac{7}{100} + \\frac{6}{37} = \\frac{7 \\cdot 37 + 6 \\cdot 100}{3700} = \\frac{259 + 600}{3700} = \\frac{859}{3700}$$\n$$\\epsilon_{f, \\text{wc}} = \\frac{859}{3700} \\approx 0.232162162...$$\n题目要求结果四舍五入到四位有效数字。\n前四位有效数字是 $2, 3, 2, 1$。第五位有效数字是 $6$，所以我们将第四位数字向上取整。\n$$\\epsilon_{f, \\text{wc}} \\approx 0.2322$$\n这个约 $23.22\\,\\%$ 的最坏情况误差远大于 $\\epsilon=0.03$ 或 $3\\,\\%$ 的所需精度，表明未经补偿的传感器不适合此设计要求。",
            "answer": "$$\\boxed{0.2322}$$"
        }
    ]
}
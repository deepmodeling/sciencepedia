{
    "hands_on_practices": [
        {
            "introduction": "电力变换器的效率并非一个单一不变的数值，它会随着负载和输入电压等工作条件的变化而改变。本练习将引导你构建一个效率图谱（efficiency map），这是表征变换器性能的关键工具。你将学习如何利用这个图谱结合实际应用的“任务剖面”（mission profile），计算加权平均效率，这个指标比单一的峰值效率更能真实地反映变换器在特定场景下的能效表现。这项实践旨在培养你的数据解读能力和针对特定应用的性能评估技能。",
            "id": "3837470",
            "problem": "一个直流-直流（DC-DC）变换器的效率根据其基本定义进行表征，即效率 $\\eta$ 是输出功率 $P_{\\mathrm{out}}$ 与输入功率 $P_{\\mathrm{in}}$ 的比值。在由输出功率 $P_{\\mathrm{out}} \\in \\{100~\\mathrm{W}, 250~\\mathrm{W}, 500~\\mathrm{W}\\}$ 和输入电压 $V_{\\mathrm{in}} \\in \\{300~\\mathrm{V}, 360~\\mathrm{V}\\}$ 定义的离散工作点上，进行了一组稳态测量。测得的输入功率值为：\n\n- 当 $V_{\\mathrm{in}} = 300~\\mathrm{V}$ 时：\n  - $P_{\\mathrm{out}} = 100~\\mathrm{W}$， $P_{\\mathrm{in}} = 107.5~\\mathrm{W}$。\n  - $P_{\\mathrm{out}} = 250~\\mathrm{W}$， $P_{\\mathrm{in}} = 259~\\mathrm{W}$。\n  - $P_{\\mathrm{out}} = 500~\\mathrm{W}$， $P_{\\mathrm{in}} = 522~\\mathrm{W}$。\n- 当 $V_{\\mathrm{in}} = 360~\\mathrm{V}$ 时：\n  - $P_{\\mathrm{out}} = 100~\\mathrm{W}$， $P_{\\mathrm{in}} = 104~\\mathrm{W}$。\n  - $P_{\\mathrm{out}} = 250~\\mathrm{W}$， $P_{\\mathrm{in}} = 256~\\mathrm{W}$。\n  - $P_{\\mathrm{out}} = 500~\\mathrm{W}$， $P_{\\mathrm{in}} = 515~\\mathrm{W}$。\n\n使用效率的基本定义，构建在这六个测量工作点上的离散效率图 $\\eta(P_{\\mathrm{out}}, V_{\\mathrm{in}})$。\n\n该变换器被部署在一个任务中，其时间归一化的输出功率曲线由一个覆盖三个输出功率水平的概率质量函数 $w(P_{\\mathrm{out}})$ 描述：\n- $w(100~\\mathrm{W}) = 0.5$，\n- $w(250~\\mathrm{W}) = 0.35$，\n- $w(500~\\mathrm{W}) = 0.15$，\n\n并且观测到输入总线 $V_{\\mathrm{in}}$ 出现在两个电平上，其概率为：\n- $\\Pr\\{V_{\\mathrm{in}} = 300~\\mathrm{V}\\} = 0.4$，\n- $\\Pr\\{V_{\\mathrm{in}} = 360~\\mathrm{V}\\} = 0.6$。\n\n假设 $w(P_{\\mathrm{out}})$ 和输入电压出现的概率是独立且平稳的。使用已构建的效率图，计算加权平均效率，该效率为瞬时效率在 $(P_{\\mathrm{out}}, V_{\\mathrm{in}})$ 的联合分布上的时间平均值。将最终的平均效率表示为一个小数（不带百分号），并四舍五入到四位有效数字。",
            "solution": "所述问题具有科学依据、内容完备且提法恰当。它基于电力电子学中效率的基本定义和计算加权平均值的标准统计方法。所有必需的数据和条件均已提供，并且它们是一致且符合物理现实的。该问题是形式化和客观的，允许存在一个唯一、可验证的解。因此，我们可以着手求解。\n\n功率变换器的效率 $\\eta$ 定义为其输出功率 $P_{\\mathrm{out}}$ 与其输入功率 $P_{\\mathrm{in}}$ 的比值：\n$$\n\\eta = \\frac{P_{\\mathrm{out}}}{P_{\\mathrm{in}}}\n$$\n主要任务是计算加权平均效率，记为 $\\langle \\eta \\rangle$，它是瞬时效率在给定离散工作点的联合概率分布上的期望值。\n\n首先，我们必须使用六个工作点的测量数据构建离散效率图 $\\eta(P_{\\mathrm{out}}, V_{\\mathrm{in}})$。\n\n对于输入电压 $V_{\\mathrm{in}} = 300~\\mathrm{V}$：\n- 在 $P_{\\mathrm{out}} = 100~\\mathrm{W}$， $P_{\\mathrm{in}} = 107.5~\\mathrm{W}$ 时，效率为：\n$$ \\eta(100~\\mathrm{W}, 300~\\mathrm{V}) = \\frac{100}{107.5} $$\n- 在 $P_{\\mathrm{out}} = 250~\\mathrm{W}$， $P_{\\mathrm{in}} = 259~\\mathrm{W}$ 时，效率为：\n$$ \\eta(250~\\mathrm{W}, 300~\\mathrm{V}) = \\frac{250}{259} $$\n- 在 $P_{\\mathrm{out}} = 500~\\mathrm{W}$， $P_{\\mathrm{in}} = 522~\\mathrm{W}$ 时，效率为：\n$$ \\eta(500~\\mathrm{W}, 300~\\mathrm{V}) = \\frac{500}{522} $$\n\n对于输入电压 $V_{\\mathrm{in}} = 360~\\mathrm{V}$：\n- 在 $P_{\\mathrm{out}} = 100~\\mathrm{W}$， $P_{\\mathrm{in}} = 104~\\mathrm{W}$ 时，效率为：\n$$ \\eta(100~\\mathrm{W}, 360~\\mathrm{V}) = \\frac{100}{104} $$\n- 在 $P_{\\mathrm{out}} = 250~\\mathrm{W}$， $P_{\\mathrm{in}} = 256~\\mathrm{W}$ 时，效率为：\n$$ \\eta(250~\\mathrm{W}, 360~\\mathrm{V}) = \\frac{250}{256} $$\n- 在 $P_{\\mathrm{out}} = 500~\\mathrm{W}$， $P_{\\mathrm{in}} = 515~\\mathrm{W}$ 时，效率为：\n$$ \\eta(500~\\mathrm{W}, 360~\\mathrm{V}) = \\frac{500}{515} $$\n\n工作条件由输出功率的概率质量函数 $w(P_{\\mathrm{out}})$ 和输入电压的概率分布 $\\Pr\\{V_{\\mathrm{in}}\\}$ 来表征。问题陈述表明它们是独立的。因此，一个特定工作点 $(P_{\\mathrm{out},i}, V_{\\mathrm{in},j})$ 的联合概率是它们各自概率的乘积：\n$$\n\\Pr(P_{\\mathrm{out},i}, V_{\\mathrm{in},j}) = w(P_{\\mathrm{out},i}) \\times \\Pr\\{V_{\\mathrm{in}} = V_{\\mathrm{in},j}\\}\n$$\n加权平均效率 $\\langle \\eta \\rangle$ 是 $\\eta(P_{\\mathrm{out}}, V_{\\mathrm{in}})$ 在所有6个工作点上的期望值：\n$$ \\langle \\eta \\rangle = E[\\eta] = \\sum_{i,j} \\eta(P_{\\mathrm{out},i}, V_{\\mathrm{in},j}) \\Pr(P_{\\mathrm{out},i}, V_{\\mathrm{in},j}) $$\n给定的概率为：\n- $w(100~\\mathrm{W}) = 0.5$， $w(250~\\mathrm{W}) = 0.35$， $w(500~\\mathrm{W}) = 0.15$。\n- $\\Pr\\{V_{\\mathrm{in}} = 300~\\mathrm{V}\\} = 0.4$， $\\Pr\\{V_{\\mathrm{in}} = 360~\\mathrm{V}\\} = 0.6$。\n\n$\\langle \\eta \\rangle$ 的展开求和式为：\n$$\n\\langle \\eta \\rangle = \\eta(100, 300) w(100) \\Pr(300) + \\eta(250, 300) w(250) \\Pr(300) + \\eta(500, 300) w(500) \\Pr(300) \\\\\n+ \\eta(100, 360) w(100) \\Pr(360) + \\eta(250, 360) w(250) \\Pr(360) + \\eta(500, 360) w(500) \\Pr(360)\n$$\n我们将效率和概率的数值代入：\n$$\n\\langle \\eta \\rangle = \\left(\\frac{100}{107.5}\\right)(0.5)(0.4) + \\left(\\frac{250}{259}\\right)(0.35)(0.4) + \\left(\\frac{500}{522}\\right)(0.15)(0.4) \\\\\n+ \\left(\\frac{100}{104}\\right)(0.5)(0.6) + \\left(\\frac{250}{256}\\right)(0.35)(0.6) + \\left(\\frac{500}{515}\\right)(0.15)(0.6)\n$$\n每个工作点的联合概率（权重）为：\n- $\\Pr(100~\\mathrm{W}, 300~\\mathrm{V}) = 0.5 \\times 0.4 = 0.20$\n- $\\Pr(250~\\mathrm{W}, 300~\\mathrm{V}) = 0.35 \\times 0.4 = 0.14$\n- $\\Pr(500~\\mathrm{W}, 300~\\mathrm{V}) = 0.15 \\times 0.4 = 0.06$\n- $\\Pr(100~\\mathrm{W}, 360~\\mathrm{V}) = 0.5 \\times 0.6 = 0.30$\n- $\\Pr(250~\\mathrm{W}, 360~\\mathrm{V}) = 0.35 \\times 0.6 = 0.21$\n- $\\Pr(500~\\mathrm{W}, 360~\\mathrm{V}) = 0.15 \\times 0.6 = 0.09$\n\n我们计算加权和：\n$$\n\\langle \\eta \\rangle = \\left(\\frac{100}{107.5}\\right)(0.20) + \\left(\\frac{250}{259}\\right)(0.14) + \\left(\\frac{500}{522}\\right)(0.06) \\\\\n+ \\left(\\frac{100}{104}\\right)(0.30) + \\left(\\frac{250}{256}\\right)(0.21) + \\left(\\frac{500}{515}\\right)(0.09)\n$$\n对各项进行数值计算：\n$$\n\\langle \\eta \\rangle \\approx (0.93023256)(0.20) + (0.96525097)(0.14) + (0.95785441)(0.06) \\\\\n+ (0.96153846)(0.30) + (0.97656250)(0.21) + (0.97087379)(0.09)\n$$\n$$\n\\langle \\eta \\rangle \\approx 0.18604651 + 0.13513514 + 0.05747126 + 0.28846154 + 0.20507813 + 0.08737864\n$$\n$$\n\\langle \\eta \\rangle \\approx 0.95957122\n$$\n问题要求结果四舍五入到四位有效数字。\n$$\n\\langle \\eta \\rangle \\approx 0.9596\n$$",
            "answer": "$$\n\\boxed{0.9596}\n$$"
        },
        {
            "introduction": "在掌握了系统级的效率评估方法后，深入理解其背后的损耗机理至关重要。本练习聚焦于大功率半导体模块内部的导通损耗，这是一个在工业应用中普遍存在的挑战。通过分析并联晶体管裸片（die）之间因制造差异导致的电流不均衡现象及其带来的额外损耗，你将学会如何将器件层面的非理想特性与系统级的效率下降联系起来，从而更深刻地理解功率损耗的来源。",
            "id": "3837454",
            "problem": "一个多芯片模块内的三芯片并联开关由堆叠的绝缘栅双极晶体管 (IGBT) 芯片实现。每个芯片都表现出线性化的通态特性，其模型为 $v_{CE,i} = v_{k} + r_{i} i_{i}$，其中 $v_{CE,i}$ 是芯片 $i$ 的集电极-发射极电压，$v_{k}$ 是与芯片无关的膝点电压，$r_{i}$ 是芯片 $i$ 的斜率电阻，$i_{i}$ 是流过芯片 $i$ 的电流。当并联连接时，所有芯片共享相同的通态电压 $v$，它们的电流之和等于模块总电流 $I_{\\text{tot}}$。在固定输出电流下的稳态导通过程中，考虑以下参数：\n- 芯片数量：$n = 3$。\n- 膝点电压：$v_{k} = 1.8\\ \\text{V}$。\n- 斜率电阻：$r_{1} = 0.9 \\times 10^{-3}\\ \\Omega$，$r_{2} = 1.0 \\times 10^{-3}\\ \\Omega$，$r_{3} = 1.3 \\times 10^{-3}\\ \\Omega$。\n- 总电流：$I_{\\text{tot}} = 300\\ \\text{A}$。\n\n假设一个电力转换级通过此模块提供固定的输出功率 $P_{\\text{out}} = 5.0 \\times 10^{4}\\ \\text{W}$。模块外部的其他损耗机制（磁性元件、控制、冷却寄生损耗）贡献了固定的功率损耗 $P_{\\text{other}} = 1.25 \\times 10^{3}\\ \\text{W}$，且模块的开关损耗为 $P_{\\text{sw}} = 3.50 \\times 10^{2}\\ \\text{W}$。该多芯片模块的体积为 $V_{\\text{mod}} = 1.25 \\times 10^{2}\\ \\text{cm}^{3}$。\n\n从并联导通的基本原理以及效率和体积功率密度的核心定义出发，完成以下任务：\n1. 确定各芯片的电流分布 $\\{i_{1}, i_{2}, i_{3}\\}$，并计算电流均分不平衡比，其定义为 $\\gamma = \\frac{\\max\\{i_{1}, i_{2}, i_{3}\\}}{\\min\\{i_{1}, i_{2}, i_{3}\\}}$。\n2. 在不平衡均流条件下，计算模块的实际导通损耗 $P_{\\text{cond,act}}$。作为参考，将假设的理想匹配情况定义为所有芯片的电阻均为 $r_{i} = r_{\\min}$，其中 $r_{\\min} = \\min\\{r_{1},r_{2},r_{3}\\}$。计算由失配引起的额外导通损耗 $\\Delta P_{\\text{cond}} = P_{\\text{cond,act}} - P_{\\text{cond,match}}$，其中 $P_{\\text{cond,match}}$ 是理想匹配情况下的导通损耗。\n3. 通过计算实际效率 $\\eta = \\frac{P_{\\text{out}}}{P_{\\text{out}} + P_{\\text{other}} + P_{\\text{sw}} + P_{\\text{cond,act}}}$ 和体积功率密度 $p_{v} = \\frac{P_{\\text{out}}}{V_{\\text{mod}}}$，评估其对效率和体积功率密度的影响。\n\n将最终效率 $\\eta$ 表示为四舍五入到五位有效数字的小数，体积功率密度 $p_{v}$ 以 $\\text{W}/\\text{cm}^{3}$ 为单位，四舍五入到四位有效数字。最终答案必须按 $(\\eta, p_{v})$ 的顺序提供两个值。",
            "solution": "在尝试求解之前，对问题进行验证。\n\n### 步骤1：提取已知条件\n- **IGBT 通态特性模型：** $v_{CE,i} = v_{k} + r_{i} i_{i}$\n- **芯片数量：** $n = 3$\n- **膝点电压：** $v_{k} = 1.8\\ \\text{V}$\n- **斜率电阻：** $r_{1} = 0.9 \\times 10^{-3}\\ \\Omega$，$r_{2} = 1.0 \\times 10^{-3}\\ \\Omega$，$r_{3} = 1.3 \\times 10^{-3}\\ \\Omega$\n- **模块总电流：** $I_{\\text{tot}} = 300\\ \\text{A}$\n- **固定输出功率：** $P_{\\text{out}} = 5.0 \\times 10^{4}\\ \\text{W}$\n- **外部固定功率损耗：** $P_{\\text{other}} = 1.25 \\times 10^{3}\\ \\text{W}$\n- **模块开关损耗：** $P_{\\text{sw}} = 3.50 \\times 10^{2}\\ \\text{W}$\n- **模块体积：** $V_{\\text{mod}} = 1.25 \\times 10^{2}\\ \\text{cm}^{3}$\n- **电流均分不平衡比的定义：** $\\gamma = \\frac{\\max\\{i_{1}, i_{2}, i_{3}\\}}{\\min\\{i_{1}, i_{2}, i_{3}\\}}$\n- **理想匹配情况的定义：** 所有芯片均为 $r_{i} = r_{\\min} = \\min\\{r_{1},r_{2},r_{3}\\}$。\n- **额外导通损耗的定义：** $\\Delta P_{\\text{cond}} = P_{\\text{cond,act}} - P_{\\text{cond,match}}$\n- **效率的定义：** $\\eta = \\frac{P_{\\text{out}}}{P_{\\text{out}} + P_{\\text{other}} + P_{\\text{sw}} + P_{\\text{cond,act}}}$\n- **体积功率密度的定义：** $p_{v} = \\frac{P_{\\text{out}}}{V_{\\text{mod}}}$\n\n### 步骤2：使用提取的已知条件进行验证\n1.  **科学依据：** 问题基于电路的基本原理（并联器件、基尔霍夫电流定律）和标准的电力电子概念（导通损耗、效率、功率密度）。线性化的 IGBT 模型是对通态行为的标准且有效的近似。\n2.  **良构性：** 问题提供了计算所需量的所有必要参数和清晰定义。根据已知条件推导出的方程组可解出唯一解。\n3.  **客观性：** 语言精确且定量。所有定义都是数学化的，没有歧义。\n4.  **未发现缺陷：** 问题是自洽、一致且科学合理的。所提供的数值对于大功率半导体模块是符合实际的。\n\n### 步骤3：结论与行动\n问题有效。将推导解答。\n\n### 解答推导\n解答过程按顺序处理三个要求的部分。\n\n**第1部分：电流分布与不平衡比**\n\n当 $n=3$ 个芯片并联时，它们共享相同的集电极-发射极电压 $v$。根据线性化的通态特性，我们有：\n$$v = v_{CE,1} = v_{CE,2} = v_{CE,3}$$\n$$v = v_{k} + r_{1}i_{1} = v_{k} + r_{2}i_{2} = v_{k} + r_{3}i_{3}$$\n这意味着每个芯片电阻部分的电压降是相同的：\n$$r_{1}i_{1} = r_{2}i_{2} = r_{3}i_{3} \\equiv v_{r}$$\n其中 $v_{r}$ 是这个公共电压降。各个芯片的电流可以用 $v_{r}$ 和它们各自的电阻表示：\n$$i_{1} = \\frac{v_{r}}{r_{1}}, \\quad i_{2} = \\frac{v_{r}}{r_{2}}, \\quad i_{3} = \\frac{v_{r}}{r_{3}}$$\n根据基尔霍夫电流定律，各个电流之和等于模块总电流 $I_{\\text{tot}}$：\n$$I_{\\text{tot}} = i_{1} + i_{2} + i_{3} = v_{r}\\left(\\frac{1}{r_{1}} + \\frac{1}{r_{2}} + \\frac{1}{r_{3}}\\right)$$\n我们可以解出 $v_{r}$：\n$$v_{r} = \\frac{I_{\\text{tot}}}{\\frac{1}{r_{1}} + \\frac{1}{r_{2}} + \\frac{1}{r_{3}}}$$\n代入给定值 $I_{\\text{tot}} = 300\\ \\text{A}$，$r_{1} = 0.9 \\times 10^{-3}\\ \\Omega$，$r_{2} = 1.0 \\times 10^{-3}\\ \\Omega$ 和 $r_{3} = 1.3 \\times 10^{-3}\\ \\Omega$：\n$$\\frac{1}{r_{1}} = \\frac{1}{0.9 \\times 10^{-3}} = \\frac{10000}{9}\\ \\Omega^{-1}$$\n$$\\frac{1}{r_{2}} = \\frac{1}{1.0 \\times 10^{-3}} = 1000\\ \\Omega^{-1}$$\n$$\\frac{1}{r_{3}} = \\frac{1}{1.3 \\times 10^{-3}} = \\frac{10000}{13}\\ \\Omega^{-1}$$\n电导之和为：\n$$\\sum_{i=1}^{3}\\frac{1}{r_{i}} = \\frac{10000}{9} + 1000 + \\frac{10000}{13} = \\frac{130000 + 117000 + 90000}{117} = \\frac{337000}{117}\\ \\Omega^{-1}$$\n现在，我们计算 $v_{r}$：\n$$v_{r} = \\frac{300}{\\frac{337000}{117}} = \\frac{300 \\times 117}{337000} = \\frac{35100}{337000} = \\frac{351}{3370}\\ \\text{V}$$\n各个电流为：\n$$i_{1} = \\frac{v_{r}}{r_{1}} = \\frac{351/3370}{0.9 \\times 10^{-3}} = \\frac{351/3370}{9 \\times 10^{-4}} = \\frac{351 \\times 10^{4}}{3370 \\times 9} = \\frac{39 \\times 1000}{337} = \\frac{39000}{337}\\ \\text{A} \\approx 115.73\\ \\text{A}$$\n$$i_{2} = \\frac{v_{r}}{r_{2}} = \\frac{351/3370}{1.0 \\times 10^{-3}} = \\frac{351}{3.37} = \\frac{35100}{337}\\ \\text{A} \\approx 104.15\\ \\text{A}$$\n$$i_{3} = \\frac{v_{r}}{r_{3}} = \\frac{351/3370}{1.3 \\times 10^{-3}} = \\frac{351 \\times 10^{3}}{3370 \\times 1.3} = \\frac{27000}{337}\\ \\text{A} \\approx 80.12\\ \\text{A}$$\n电流均分不平衡比 $\\gamma$ 是最大电流与最小电流之比。由于电流与电阻成反比（$i_{i} \\propto 1/r_{i}$），电阻最小的芯片（$r_{1}$）承载最大电流，电阻最大的芯片（$r_{3}$）承载最小电流。\n$$\\gamma = \\frac{\\max\\{i_{1}, i_{2}, i_{3}\\}}{\\min\\{i_{1}, i_{2}, i_{3}\\}} = \\frac{i_{1}}{i_{3}} = \\frac{v_{r}/r_{1}}{v_{r}/r_{3}} = \\frac{r_{3}}{r_{1}}$$\n$$\\gamma = \\frac{1.3 \\times 10^{-3}\\ \\Omega}{0.9 \\times 10^{-3}\\ \\Omega} = \\frac{1.3}{0.9} = \\frac{13}{9} \\approx 1.444...$$\n\n**第2部分：导通损耗**\n\n实际导通损耗 $P_{\\text{cond,act}}$ 是模块中耗散的总功率，等于公共电压 $v$ 与总电流 $I_{\\text{tot}}$ 的乘积。\n$$P_{\\text{cond,act}} = v \\cdot I_{\\text{tot}}$$\n公共电压 $v$ 为：\n$$v = v_{k} + v_{r} = 1.8\\ \\text{V} + \\frac{351}{3370}\\ \\text{V} = \\frac{1.8 \\times 3370 + 351}{3370} = \\frac{6066 + 351}{3370} = \\frac{6417}{3370}\\ \\text{V}$$\n所以，实际导通损耗为：\n$$P_{\\text{cond,act}} = \\frac{6417}{3370}\\ \\text{V} \\times 300\\ \\text{A} = \\frac{6417 \\times 30}{337} = \\frac{192510}{337}\\ \\text{W} \\approx 571.246\\ \\text{W}$$\n对于假设的理想匹配情况，所有电阻均为 $r_{\\min} = r_{1} = 0.9 \\times 10^{-3}\\ \\Omega$。电流将被平均分配：每个芯片的电流为 $i_{\\text{match}} = I_{\\text{tot}}/n = 300/3 = 100\\ \\text{A}$。\n在匹配情况下的电压为：\n$$v_{\\text{match}} = v_{k} + r_{\\min}i_{\\text{match}} = 1.8\\ \\text{V} + (0.9 \\times 10^{-3}\\ \\Omega)(100\\ \\text{A}) = 1.8 + 0.09 = 1.89\\ \\text{V}$$\n在匹配情况下的导通损耗为：\n$$P_{\\text{cond,match}} = v_{\\text{match}} \\cdot I_{\\text{tot}} = 1.89\\ \\text{V} \\times 300\\ \\text{A} = 567\\ \\text{W}$$\n由失配引起的额外导通损耗为：\n$$\\Delta P_{\\text{cond}} = P_{\\text{cond,act}} - P_{\\text{cond,match}} = \\frac{192510}{337}\\ \\text{W} - 567\\ \\text{W} = \\frac{192510 - 567 \\times 337}{337} = \\frac{192510 - 191079}{337} = \\frac{1431}{337}\\ \\text{W} \\approx 4.246\\ \\text{W}$$\n\n**第3部分：效率与体积功率密度**\n\n系统中的总功率损耗是外部损耗、开关损耗和实际导通损耗的总和：\n$$P_{\\text{loss,tot}} = P_{\\text{other}} + P_{\\text{sw}} + P_{\\text{cond,act}}$$\n$$P_{\\text{loss,tot}} = 1250\\ \\text{W} + 350\\ \\text{W} + \\frac{192510}{337}\\ \\text{W} = 1600 + \\frac{192510}{337}\\ \\text{W}$$\n总输入功率 $P_{\\text{in}}$ 是输出功率和总损耗之和：\n$$P_{\\text{in}} = P_{\\text{out}} + P_{\\text{loss,tot}} = 50000\\ \\text{W} + 1600\\ \\text{W} + \\frac{192510}{337}\\ \\text{W} = 51600 + \\frac{192510}{337}\\ \\text{W}$$\n$$P_{\\text{in}} = \\frac{51600 \\times 337 + 192510}{337} = \\frac{17389200 + 192510}{337} = \\frac{17581710}{337}\\ \\text{W}$$\n效率 $\\eta$ 是输出功率与输入功率之比：\n$$\\eta = \\frac{P_{\\text{out}}}{P_{\\text{in}}} = \\frac{50000}{17581710 / 337} = \\frac{50000 \\times 337}{17581710} = \\frac{16850000}{17581710} \\approx 0.9583824$$\n四舍五入到五位有效数字，效率为 $\\eta = 0.95838$。\n\n体积功率密度 $p_{v}$ 是输出功率与模块体积之比：\n$$p_{v} = \\frac{P_{\\text{out}}}{V_{\\text{mod}}} = \\frac{5.0 \\times 10^{4}\\ \\text{W}}{1.25 \\times 10^{2}\\ \\text{cm}^{3}} = \\frac{50000}{125}\\ \\text{W}/\\text{cm}^{3} = 400\\ \\text{W}/\\text{cm}^{3}$$\n四舍五入到四位有效数字，体积功率密度为 $p_{v} = 400.0\\ \\text{W}/\\text{cm}^{3}$。\n\n最终要求的值是 $(\\eta, p_{v})$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.95838 & 400.0\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "掌握效率分析的最终目标是从分析转向设计优化。本练习将带你处理电力电子学中的一个根本性权衡问题：导通损耗与开关损耗之间的平衡。通过探索MOSFET裸片尺寸如何以相反的方式影响这两种损耗，你将学习如何从一个技术系列中选择最优的器件，以在特定应用中实现效率最大化。这是所有电力电子设计师都必须具备的核心设计能力。",
            "id": "3837427",
            "problem": "提供了一系列属于超结金属氧化物半导体场效应晶体管 (MOSFET) 单一技术家族的功率半导体器件，它们具有不同的芯片面积，但保持相同的电压额定值。在器件层面，请考虑以下工作环境和基本事实：\n\n- 一个阻性元件的瞬时导通功率为 $p(t)=i^2(t)R$，在一个开关周期内的平均功率为 $P_{\\mathrm{cond}}=\\frac{1}{T}\\int_0^T i^2(t)R\\,dt$。\n- 在一个硬开关直流 (DC) 功率级中，MOSFET 在周期的一部分导通时间（占空比为 $D$）内导通恒定电流 $I$，并在关断时间内阻断电压 $V$。在此情况下，传递给负载的平均输出功率为 $P_{\\mathrm{out}}=VI D$。\n- 每个周期的总开关能量 $E_{\\mathrm{sw}}$ 定义为开关间隔期间 $v(t)i(t)$ 的积分，并在指定的工作点（母线电压和漏极电流）下测得。对于给定的技术和电压等级，由于电容和沟道电荷的广延性，$E_{\\mathrm{sw}}$ 的主要容性和栅极电荷贡献与器件的有效面积成正比。沟道导通路径在面积上并联了基本单元，导致 $R_{\\mathrm{on}}$ 与面积成反比。这些经过充分验证的比例关系为将器件指标与芯片面积关联起来提供了基础。\n- 总器件功率损耗为 $P_{\\mathrm{loss}}=P_{\\mathrm{cond}}+P_{\\mathrm{sw}}$，其中 $P_{\\mathrm{sw}}$ 是平均开关功率，对于开关频率 $f_s$，$P_{\\mathrm{sw}}$ 等于 $f_s E_{\\mathrm{sw}}$。器件级效率为 $\\eta=\\frac{P_{\\mathrm{out}}}{P_{\\mathrm{out}}+P_{\\mathrm{loss}}}$。\n- 通过一个具有有效面积 $A_{\\mathrm{ref}}$ 并在工作点测得参考指标 $R_{\\mathrm{ref}}$ 和 $E_{\\mathrm{ref}}$ 的参考器件来定义一个器件家族。假设可用器件是比例缩放版本，其面积为 $A=s A_{\\mathrm{ref}}$，比例因子 $s$ 从一个离散集合中选取。\n\n任务：\n\n1) 仅从上述基本定义和比例关系出发，推导当面积比例因子 $s$ 变化时，该家族器件的 $R_{\\mathrm{on}}$ 和 $E_{\\mathrm{sw}}$ 之间的参数化权衡曲线。将该曲线表示为 $R_{\\mathrm{on}}$ 和 $E_{\\mathrm{sw}}$ 之间消除了 $s$ 的关系式，并展示该家族内部的内在权衡。\n\n2) 使用第一性原理和比例关系，确定在给定的工作点 $(V,I,D,f_s)$、参考指标 $(R_{\\mathrm{ref}},E_{\\mathrm{ref}})$ 和参考面积 $A_{\\mathrm{ref}}$ 下，使效率 $\\eta$ 最大化的连续面积比例 $s^\\star$。然后，从一组可用的离散比例因子 $s_i$ 中，选择使 $\\eta$ 最大化的器件，并计算相应的效率 $\\eta$ 和器件功率密度 $\\rho=\\frac{P_{\\mathrm{out}}}{A}$，其中 $A=s A_{\\mathrm{ref}}$。\n\n3) 实现一个程序，对提供的测试套件执行上述计算。对于每个测试用例，计算：\n- 所选器件的效率 $\\eta$，以无单位的小数表示，\n- 所选器件的功率密度 $\\rho$，单位为 $\\mathrm{W/mm^2}$。\n\n输出格式要求：\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表，结果按下面给出的测试用例顺序排列为 $[\\eta_1,\\rho_1,\\eta_2,\\rho_2,\\dots]$。\n- 将每个 $\\eta$ 表示为四舍五入到六位小数的小数。\n- 将每个 $\\rho$ 表示为单位 $\\mathrm{W/mm^2}$、四舍五入到六位小数的数值。\n\n测试套件：\n- 用例 1 (平衡，中高频): $V=400\\,\\mathrm{V}$, $I=20\\,\\mathrm{A}$, $D=0.5$, $f_s=100{,}000\\,\\mathrm{Hz}$, $R_{\\mathrm{ref}}=0.2\\,\\Omega$, $E_{\\mathrm{ref}}=6.0\\times10^{-4}\\,\\mathrm{J}$, $A_{\\mathrm{ref}}=25\\,\\mathrm{mm^2}$, $s\\in\\{0.5,0.75,1.0,1.5,2.0\\}$。\n- 用例 2 (导通损耗主导，低频): $V=400\\,\\mathrm{V}$, $I=20\\,\\mathrm{A}$, $D=0.5$, $f_s=10{,}000\\,\\mathrm{Hz}$, $R_{\\mathrm{ref}}=0.2\\,\\Omega$, $E_{\\mathrm{ref}}=6.0\\times10^{-4}\\,\\mathrm{J}$, $A_{\\mathrm{ref}}=25\\,\\mathrm{mm^2}$, $s\\in\\{0.5,0.75,1.0,1.5,2.0\\}$。\n- 用例 3 (开关损耗主導，甚高頻): $V=400\\,\\mathrm{V}$, $I=20\\,\\mathrm{A}$, $D=0.5$, $f_s=500{,}000\\,\\mathrm{Hz}$, $R_{\\mathrm{ref}}=0.2\\,\\Omega$, $E_{\\mathrm{ref}}=6.0\\times10^{-4}\\,\\mathrm{J}$, $A_{\\mathrm{ref}}=25\\,\\mathrm{mm^2}$, $s\\in\\{0.5,0.75,1.0,1.5,2.0\\}$。\n- 用例 4 (连续最优点与可用器件重合的边界情况): $V=400\\,\\mathrm{V}$, $I=20\\,\\mathrm{A}$, $D=0.5$, $f_s=66{,}666.6666667\\,\\mathrm{Hz}$, $R_{\\mathrm{ref}}=0.2\\,\\Omega$, $E_{\\mathrm{ref}}=6.0\\times10^{-4}\\,\\mathrm{J}$, $A_{\\mathrm{ref}}=25\\,\\mathrm{mm^2}$, $s\\in\\{0.5,0.75,1.0,1.5,2.0\\}$。",
            "solution": "所提出的问题是电力电子工程分析中一个有效且定义明确的练习。它在科学上基于半导体器件物理和电路理论的既定原理，提供了一套完整且一致的数据和定义，并要求一个形式化、客观且可验证的解。因此，我们可以进行推导和计算。\n\n解决方案按照问题陈述的要求分为三个部分。首先，推导半导体技术家族的内在权衡曲线。其次，制定选择最优器件以最大化效率的方法。第三，将此方法应用于具体的测试用例。\n\n### 1. 参数化权衡曲线 ($R_{\\mathrm{on}}$ vs. $E_{\\mathrm{sw}}$)\n\n问题指出，对于一个以有效面积 $A$ 区分的器件家族，导通电阻 $R_{\\mathrm{on}}$ 与面积成反比，而开关能量 $E_{\\mathrm{sw}}$ 与面积成正比。我们可以用数学方式表达这些关系。\n\n设 $A_{\\mathrm{ref}}$、$R_{\\mathrm{ref}}$ 和 $E_{\\mathrm{ref}}$ 分别为参考器件的面积、导通电阻和开关能量。对于同一家族中任何其他器件，其有效面积 $A$ 由比例因子 $s$ 给出，$A = s A_{\\mathrm{ref}}$，其导通电阻 $R_{\\mathrm{on}}(s)$ 和开关能量 $E_{\\mathrm{sw}}(s)$ 由以下比例定律给出：\n\n$$\nR_{\\mathrm{on}}(s) = \\frac{R_{\\mathrm{ref}}}{s}\n$$\n\n$$\nE_{\\mathrm{sw}}(s) = s E_{\\mathrm{ref}}\n$$\n\n为了推导权衡曲线，我们必须从这个方程组中消除参数 $s$。从第一个方程，我们可以用导通电阻表示比例因子 $s$：\n\n$$\ns = \\frac{R_{\\mathrm{ref}}}{R_{\\mathrm{on}}(s)}\n$$\n\n将 $s$ 的这个表达式代入第二个方程，得到：\n\n$$\nE_{\\mathrm{sw}}(s) = \\left( \\frac{R_{\\mathrm{ref}}}{R_{\\mathrm{on}}(s)} \\right) E_{\\mathrm{ref}}\n$$\n\n重新整理这个方程，得到该技术家族的内在权衡关系：\n\n$$\nR_{\\mathrm{on}}(s) E_{\\mathrm{sw}}(s) = R_{\\mathrm{ref}} E_{\\mathrm{ref}}\n$$\n\n该方程表明，对于给定的半导体技术和电压等级，导通电阻和开关能量的乘积是一个常数。这个常数乘积 $R_{\\mathrm{ref}}E_{\\mathrm{ref}}$ 是一个常用的优值系数 (FoM)，用于比较不同的功率半导体技术。较低的 FoM 表示技术更优，因为它代表了导通性能和开关性能之间更有利的权衡。\n\n### 2. 实现最大效率的最优器件选择\n\n目标是选择一个由其比例因子 $s$ 表征的器件，以在给定的工作点 $(V, I, D, f_s)$ 下最大化效率 $\\eta$。效率定义为：\n\n$$\n\\eta = \\frac{P_{\\mathrm{out}}}{P_{\\mathrm{out}} + P_{\\mathrm{loss}}}\n$$\n\n其中 $P_{\\mathrm{out}} = VID$ 是平均输出功率。由于在给定的工作点下 $P_{\\mathrm{out}}$ 是恒定的，因此最大化效率 $\\eta$ 等同于最小化总功率损耗 $P_{\\mathrm{loss}}$。\n\n总功率损耗 $P_{\\mathrm{loss}}$ 是平均导通损耗 $P_{\\mathrm{cond}}$ 和平均开关损耗 $P_{\\mathrm{sw}}$ 的总和。我们必须将这些损耗分量表示为比例因子 $s$ 的函数。\n\n平均导通损耗由 $P_{\\mathrm{cond}} = I_{\\mathrm{rms}}^2 R_{\\mathrm{on}}$ 给出。对于在导通时间分数 $D$ 内流动的恒定电流 $I$，均方根电流的平方为 $I_{\\mathrm{rms}}^2 = I^2 D$。因此，比例因子为 $s$ 的器件的导通损耗为：\n\n$$\nP_{\\mathrm{cond}}(s) = I^2 D R_{\\mathrm{on}}(s) = I^2 D \\frac{R_{\\mathrm{ref}}}{s}\n$$\n\n平均开关损耗是每个周期的开关能量与开关频率 $f_s$ 的乘积：\n\n$$\nP_{\\mathrm{sw}}(s) = f_s E_{\\mathrm{sw}}(s) = f_s (s E_{\\mathrm{ref}})\n$$\n\n因此，总功率损耗作为 $s$ 的函数为：\n\n$$\nP_{\\mathrm{loss}}(s) = P_{\\mathrm{cond}}(s) + P_{\\mathrm{sw}}(s) = \\frac{I^2 D R_{\\mathrm{ref}}}{s} + s f_s E_{\\mathrm{ref}}\n$$\n\n为了找到最小化 $P_{\\mathrm{loss}}(s)$ 的连续比例因子 $s^\\star$，我们对 $P_{\\mathrm{loss}}(s)$ 关于 $s$ 求导并令其为零。\n\n$$\n\\frac{d P_{\\mathrm{loss}}(s)}{ds} = \\frac{d}{ds} \\left( \\frac{I^2 D R_{\\mathrm{ref}}}{s} + s f_s E_{\\mathrm{ref}} \\right) = -\\frac{I^2 D R_{\\mathrm{ref}}}{s^2} + f_s E_{\\mathrm{ref}} = 0\n$$\n\n解出 $s$ 得到最优连续比例因子 $s^\\star$：\n\n$$\ns^2 = \\frac{I^2 D R_{\\mathrm{ref}}}{f_s E_{\\mathrm{ref}}} \\implies s^\\star = \\sqrt{\\frac{I^2 D R_{\\mathrm{ref}}}{f_s E_{\\mathrm{ref}}}} = I \\sqrt{\\frac{D R_{\\mathrm{ref}}}{f_s E_{\\mathrm{ref}}}}\n$$\n\n二阶导数 $\\frac{d^2 P_{\\mathrm{loss}}(s)}{ds^2} = \\frac{2 I^2 D R_{\\mathrm{ref}}}{s^3}$ 对于 $s>0$ 恒为正，这证实了 $s^\\star$ 对应于一个最小值。损耗函数 $P_{\\mathrm{loss}}(s)$ 是凸函数。\n\n实际上，器件只提供一组离散的比例因子 $\\{s_i\\}$。由于损耗函数是凸函数，最优的离散选择 $s_{\\mathrm{opt}}$ 将是与连续最优点 $s^\\star$ 最接近的可用 $s_i$ 值之一。然而，为严谨起见，必须对所有可用的 $s_i$ 计算 $P_{\\mathrm{loss}}(s_i)$，并选择产生最小损耗的那一个。\n\n设 $s_{\\mathrm{opt}}$ 是从离散集合中选择的比例因子。相应的效率 $\\eta_{\\mathrm{opt}}$ 和功率密度 $\\rho_{\\mathrm{opt}}$ 计算如下：\n\n首先，计算最小功率损耗：\n$$\nP_{\\mathrm{loss,opt}} = \\frac{I^2 D R_{\\mathrm{ref}}}{s_{\\mathrm{opt}}} + s_{\\mathrm{opt}} f_s E_{\\mathrm{ref}}\n$$\n\n然后，计算效率：\n$$\n\\eta_{\\mathrm{opt}} = \\frac{P_{\\mathrm{out}}}{P_{\\mathrm{out}} + P_{\\mathrm{loss,opt}}} = \\frac{VID}{VID + P_{\\mathrm{loss,opt}}}\n$$\n\n最后，计算功率密度。所选器件的面积为 $A_{\\mathrm{opt}} = s_{\\mathrm{opt}} A_{\\mathrm{ref}}$。功率密度为：\n$$\n\\rho_{\\mathrm{opt}} = \\frac{P_{\\mathrm{out}}}{A_{\\mathrm{opt}}} = \\frac{VID}{s_{\\mathrm{opt}} A_{\\mathrm{ref}}}\n$$\n\n### 3. 实现与计算\n\n每个测试用例的计算过程如下：\n1.  给定工作点 $(V, I, D, f_s)$、参考器件参数 $(R_{\\mathrm{ref}}, E_{\\mathrm{ref}}, A_{\\mathrm{ref}})$ 和可用比例因子集合 $\\{s_i\\}$。\n2.  计算恒定的输出功率 $P_{\\mathrm{out}} = VID$。\n3.  将最小损耗变量 $P_{\\mathrm{loss,min}}$ 初始化为无穷大，并将相应的最优比例因子变量 $s_{\\mathrm{opt}}$ 初始化。\n4.  遍历离散集合中的每个可用比例因子 $s_i$：\n    a. 计算总功率损耗 $P_{\\mathrm{loss}}(s_i) = \\frac{I^2 D R_{\\mathrm{ref}}}{s_i} + s_i f_s E_{\\mathrm{ref}}$。\n    b. 如果 $P_{\\mathrm{loss}}(s_i)$ 小于当前的 $P_{\\mathrm{loss,min}}$，则更新 $P_{\\mathrm{loss,min}} = P_{\\mathrm{loss}}(s_i)$ 和 $s_{\\mathrm{opt}} = s_i$。\n5.  遍历所有 $s_i$ 后，最终的 $s_{\\mathrm{opt}}$ 就是最优的离散选择。\n6.  使用这个 $s_{\\mathrm{opt}}$ 和相应的 $P_{\\mathrm{loss,min}}$，计算最终效率 $\\eta = \\frac{P_{\\mathrm{out}}}{P_{\\mathrm{out}} + P_{\\mathrm{loss,min}}}$。\n7.  计算最终功率密度 $\\rho = \\frac{P_{\\mathrm{out}}}{s_{\\mathrm{opt}} A_{\\mathrm{ref}}}$。\n8.  按要求将结果 $(\\eta, \\rho)$ 四舍五入到六位小数。该算法将在提供的 Python 环境中实现。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the power semiconductor optimization problem for a suite of test cases.\n    \"\"\"\n\n    test_cases = [\n        # Case 1 (balanced, moderately high frequency)\n        {'V': 400, 'I': 20, 'D': 0.5, 'fs': 100000, 'R_ref': 0.2, 'E_ref': 6.0e-4, 'A_ref': 25, 's_set': [0.5, 0.75, 1.0, 1.5, 2.0]},\n        # Case 2 (conduction-dominated, low frequency)\n        {'V': 400, 'I': 20, 'D': 0.5, 'fs': 10000, 'R_ref': 0.2, 'E_ref': 6.0e-4, 'A_ref': 25, 's_set': [0.5, 0.75, 1.0, 1.5, 2.0]},\n        # Case 3 (switching-dominated, very high frequency)\n        {'V': 400, 'I': 20, 'D': 0.5, 'fs': 500000, 'R_ref': 0.2, 'E_ref': 6.0e-4, 'A_ref': 25, 's_set': [0.5, 0.75, 1.0, 1.5, 2.0]},\n        # Case 4 (boundary where continuous optimum aligns to an available device)\n        {'V': 400, 'I': 20, 'D': 0.5, 'fs': 200000.0/3.0, 'R_ref': 0.2, 'E_ref': 6.0e-4, 'A_ref': 25, 's_set': [0.5, 0.75, 1.0, 1.5, 2.0]},\n    ]\n    \n    final_results = []\n    \n    for case in test_cases:\n        V = case['V']\n        I = case['I']\n        D = case['D']\n        fs = case['fs']\n        R_ref = case['R_ref']\n        E_ref = case['E_ref']\n        A_ref = case['A_ref']\n        s_set = case['s_set']\n        \n        # Calculate output power (constant for a given case)\n        P_out = V * I * D\n        \n        min_loss = np.inf\n        s_opt = -1.0\n        \n        # Determine the coefficients for the loss function P_loss(s) = K_c/s + K_sw*s\n        K_c = I**2 * D * R_ref  # Conduction loss coefficient\n        K_sw = fs * E_ref       # Switching loss coefficient\n        \n        # Iterate through the available discrete scale factors to find the one that minimizes loss\n        for s_i in s_set:\n            P_loss_i = K_c / s_i + K_sw * s_i\n            \n            if P_loss_i  min_loss:\n                min_loss = P_loss_i\n                s_opt = s_i\n        \n        # Calculate final metrics using the optimal scale factor\n        \n        # 1. Efficiency (eta)\n        P_loss_opt = min_loss\n        eta_opt = P_out / (P_out + P_loss_opt)\n        \n        # 2. Power Density (rho) in W/mm^2\n        A_opt = s_opt * A_ref # in mm^2\n        rho_opt = P_out / A_opt\n        \n        # Append results to the final list\n        final_results.append(eta_opt)\n        final_results.append(rho_opt)\n    \n    # Format the output as a comma-separated list of strings, with each number\n    # formatted to six decimal places, enclosed in square brackets.\n    output_str = f\"[{','.join([f'{r:.6f}' for r in final_results])}]\"\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "确保功率器件可靠运行的第一步是准确预测其在稳态条件下的结温。本练习引入了串联热阻网络的基本概念，该模型将热量从器件的结传递到周围环境的路径类比为电路。通过解决这个问题，您将掌握评估热设计有效性的核心计算方法，这是所有热管理分析的基石。",
            "id": "3852766",
            "problem": "一个硅功率金属氧化物半导体场效应晶体管 (MOSFET) 在稳态下耗散恒定的功率 $P=20\\,\\mathrm{W}$，该晶体管通过一层导热界面材料安装在一个带翅片的铝制散热器上。环境空气温度为 $T_{a}=35\\,{}^{\\circ}\\mathrm{C}$。从半导体结到环境的热通路包括三个串联部分：结到外壳、外壳到散热器和散热器到环境。制造商指定的结到外壳热阻为 $R_{\\mathrm{th,JC}}=0.8\\,\\mathrm{K/W}$。界面层产生的外壳到散热器热阻为 $R_{\\mathrm{th,CS}}=0.3\\,\\mathrm{K/W}$。在给定的气流条件下，安装的散热器产生的散热器到环境的热阻为 $R_{\\mathrm{th,SA}}=1.2\\,\\mathrm{K/W}$。假设热通路为一维稳态热传导，其特性是线性的且与温度无关，并且所有耗散的功率都通过这些串联元件从结流向环境。\n\n从稳态下的能量守恒和热阻（定义为每个部分的温差与热流之比）出发，推导结温 $T_{j}$ 并计算其数值。将最终结温以摄氏度表示，并将答案四舍五入到四位有效数字。",
            "solution": "该问题要求推导和计算功率 MOSFET 在稳态工作下的结温 $T_{j}$。分析从能量守恒原理和热阻的定义开始。\n\n在稳态下，MOSFET 产生的热量，即其耗散功率 $P$，必须等于从结到环境空气的热流率。问题陈述所有功率都流经指定的热通路，因此通过通路所有部分的热流率是恒定的，等于 $P$。\n\n对于给定的热通路，热阻 $R_{\\mathrm{th}}$ 定义为通路两端的温差 $\\Delta T$ 与通过它的稳态热流率 $P$ 之比：\n$$R_{\\mathrm{th}} = \\frac{\\Delta T}{P}$$\n这可以重新排列以表示跨越一个组件的温降是耗散功率及其热阻的函数：\n$$\\Delta T = P \\cdot R_{\\mathrm{th}}$$\n这种关系类似于电路中的欧姆定律 ($V = I \\cdot R$)，其中温度 ($T$) 对应于电压 ($V$)，热流率 ($P$) 对应于电流 ($I$)，热阻 ($R_{\\mathrm{th}}$) 对应于电阻 ($R$)。\n\n从 MOSFET 结到环境空气的热通路被描述为三个串联部分：\n$1$. 结到外壳，热阻为 $R_{\\mathrm{th,JC}}$。\n$2$. 外壳到散热器，热阻为 $R_{\\mathrm{th,CS}}$。\n$3$. 散热器到环境，热阻为 $R_{\\mathrm{th,SA}}$。\n\n由于这些热阻是串联的，从结到环境的总热阻 $R_{\\mathrm{th,JA}}$ 是各个热阻之和：\n$$R_{\\mathrm{th,JA}} = R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}$$\n\n结 ($T_{j}$) 和环境 ($T_{a}$) 之间的总温差是总耗散功率和总热阻的乘积：\n$$\\Delta T_{\\mathrm{JA}} = T_{j} - T_{a} = P \\cdot R_{\\mathrm{th,JA}}$$\n\n为了推导结温 $T_{j}$ 的表达式，我们将总热阻的表达式代入总温差的方程中，并求解 $T_{j}$：\n$$T_{j} - T_{a} = P \\cdot (R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}})$$\n$$T_{j} = T_{a} + P \\cdot (R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}})$$\n这是推导出的结温表达式。\n\n现在，我们代入问题陈述中提供的数值：\n- 耗散功率: $P = 20\\,\\mathrm{W}$\n- 环境温度: $T_{a} = 35\\,{}^{\\circ}\\mathrm{C}$\n- 结到外壳热阻: $R_{\\mathrm{th,JC}} = 0.8\\,\\mathrm{K/W}$\n- 外壳到散热器热阻: $R_{\\mathrm{th,CS}} = 0.3\\,\\mathrm{K/W}$\n- 散热器到环境热阻: $R_{\\mathrm{th,SA}} = 1.2\\,\\mathrm{K/W}$\n\n首先，我们计算总热阻 $R_{\\mathrm{th,JA}}$：\n$$R_{\\mathrm{th,JA}} = 0.8\\,\\mathrm{K/W} + 0.3\\,\\mathrm{K/W} + 1.2\\,\\mathrm{K/W} = 2.3\\,\\mathrm{K/W}$$\n需要注意的是，开尔文 ($\\mathrm{K}$) 的温差在数值上等同于摄氏度 (${}^{\\circ}\\mathrm{C}$) 的温差。因此，单位 $\\mathrm{K/W}$ 等同于 ${}^{\\circ}\\mathrm{C/W}$。\n\n接下来，我们计算从环境到结的总温升 $\\Delta T_{\\mathrm{JA}}=T_j - T_a$：\n$$\\Delta T_{\\mathrm{JA}} = P \\cdot R_{\\mathrm{th,JA}} = 20\\,\\mathrm{W} \\times 2.3\\,\\mathrm{K/W} = 46.0\\,\\mathrm{K} = 46.0\\,{}^{\\circ}\\mathrm{C}$$\n\n最后，我们将此温升加到环境温度上，计算出结温 $T_{j}$：\n$$T_{j} = T_{a} + \\Delta T_{\\mathrm{JA}} = 35\\,{}^{\\circ}\\mathrm{C} + 46.0\\,{}^{\\circ}\\mathrm{C} = 81.0\\,{}^{\\circ}\\mathrm{C}$$\n\n问题要求最终答案四舍五入到四位有效数字。计算值为 $81.0$。为了用四位有效数字表示，我们写作 $81.00$。",
            "answer": "$$\\boxed{81.00}$$"
        },
        {
            "introduction": "在掌握了基础计算之后，下一步是进行批判性思考，理解模型的适用范围与局限性。本练习 () 促使您思考为何数据手册中给出的热阻值在某些情况下并不可靠，并论证为何需要构建一个更精细的热模型。更重要的是，它将引导您建立热稳定性的数学判据，为精确评估热失控风险提供理论依据。",
            "id": "3852749",
            "problem": "一个采用通孔封装的硅基金属氧化物半导体场效应晶体管 (MOSFET) 通过一个柔性导热垫片安装到一个挤压铝散热器上。数据手册报告了在自然对流条件下、在标准化测试板上测得的稳态结-环境热阻 $R_{\\mathrm{th,JA}}$，以及结-外壳热阻 $R_{\\mathrm{th,JC}}$。在我们关注的设计中，散热器处于强制对流环境中，器件外壳和散热器之间的热界面由外壳-散热器热阻 $R_{\\mathrm{th,CS}}$ 来表征。散热器-环境热阻 $R_{\\mathrm{th,SA}}$ 是从散热器供应商处获得的，对应于预期的气流。环境温度为 $T_a$，结温为 $T_j$，稳态器件功耗为 $P$；由于导通和漏电机理，器件的功耗随温度升高而增加。\n\n从稳态传热的基本原理出发，即傅里叶热传导定律 (Fourier’s law of heat conduction) 和牛顿冷却定律 (Newton’s law of convective cooling)，以及热阻 $R_{\\mathrm{th}}$ 通过 $\\Delta T = P R_{\\mathrm{th}}$ 将温升与热流率联系起来的定义，考虑数据手册中的 $R_{\\mathrm{th,JA}}$ 对于使用散热器的应用的适用性，以及估算 $T_j$ 和评估热失控风险的正确方法。选择所有正确的陈述。\n\nA. 数据手册中的 $R_{\\mathrm{th,JA}}$ 对所有安装条件普遍有效，包括使用散热器的设计，因为从结到环境的热通路是唯一的且与边界条件无关；因此应始终使用 $T_j = T_a + P R_{\\mathrm{th,JA}}$。\n\nB. 在使用散热器的设计中，数据手册中的 $R_{\\mathrm{th,JA}}$ 通常不适用，因为它假定了特定的测试板和自然对流边界条件。一个从结到环境的分区串联热阻网络是合适的，其中稳态结温满足 $T_j = T_a + P\\!\\left(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}\\right)$。\n\nC. 因为散热器是用来散热的，所以正确的分区表达式是 $T_j = T_a + P\\!\\left(R_{\\mathrm{th,SA}} - R_{\\mathrm{th,CS}} - R_{\\mathrm{th,JC}}\\right)$，这解释了散热器减去了界面和封装的热阻抗。\n\nD. 如果功耗随温度升高而增加（例如，由于漏电流近似指数级上升），那么在稳态工作点的一个局部稳定性的必要条件是 $\\left(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}\\right) \\cdot \\dfrac{\\mathrm{d}P}{\\mathrm{d}T_j}  1$。该准则源于稳态热平衡方程 $T_j = T_a + \\left(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}\\right) P(T_j)$ 的不动点稳定性，并量化了对热失控的敏感性。",
            "solution": "问题陈述描述了一个功率半导体器件安装在散热器上的标准热分析场景。核心任务是识别关于结温 ($T_j$) 估算和热稳定性评估的正确陈述。\n\n首先，我们来确定基本原理。在稳态下，半导体结内部产生的热量（由功耗 $P$ 表示）必须传递到周围环境中。这个传热过程可以使用电学类比来建模，其中温差 ($\\Delta T$) 对应于电压，热流率 ($P$) 对应于电流，热阻 ($R_{\\mathrm{th}}$) 对应于电阻。提供的基本关系是 $\\Delta T = P R_{\\mathrm{th}}$。\n\n在所描述的应用中，主要的热流路径是从器件结通过一系列热界面到环境空气：\n1.  从半导体结到器件外壳：由结-外壳热阻 $R_{\\mathrm{th,JC}}$ 表征。这是器件封装自身的属性。\n2.  从器件外壳到散热器：由外壳-散热器热阻 $R_{\\mathrm{th,CS}}$ 表征。这代表了热界面材料（柔性垫片）的热阻。\n3.  从散热器到环境空气：由散热器-环境热阻 $R_{\\mathrm{th,SA}}$ 表征。这取决于散热器的几何形状、材料以及气流条件（强制对流）。\n\n由于这些组件构成了串联的热流路径，因此对于此特定应用，从结到环境的总热阻（我们称之为 $R_{\\mathrm{th,JA,app}}$）是各个热阻之和：\n$$R_{\\mathrm{th,JA,app}} = R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}$$\n从结到环境的总温降为 $T_j - T_a$。使用基本热阻定义，我们有：\n$$T_j - T_a = P \\cdot R_{\\mathrm{th,JA,app}} = P \\cdot (R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}})$$\n这可以重新整理以表示结温：\n$$T_j = T_a + P \\cdot (R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}})$$\n该方程构成了评估所提供的关于结温估算的陈述的基础。\n\n接下来，我们考虑热稳定性或热失控的问题。问题指出，功耗 $P$ 是结温的增函数，即 $P = P(T_j)$。将此代入结温方程，得到稳态工作温度的隐式方程：\n$$T_j = T_a + (R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}) \\cdot P(T_j)$$\n令 $R_{\\mathrm{th,total}} = R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}$。方程为 $T_j = T_a + R_{\\mathrm{th,total}} P(T_j)$。\n在器件产生的热量等于散发到环境的热量时的温度 $T_j$ 处，存在一个稳定的热平衡。生热率为 $Q_{gen}(T_j) = P(T_j)$。热系统的散热率为 $Q_{diss}(T_j) = \\frac{T_j - T_a}{R_{\\mathrm{th,total}}}$。\n对于一个稳定的平衡，温度的任何微小扰动 $\\delta T_j$ 都必须导致一个纠正作用。具体来说，如果 $T_j$ 增加，散热率的增加必须大于生热率的增加，才能使温度降回来。这可以转化为数学条件：\n$$\\frac{\\mathrm{d}Q_{diss}}{\\mathrm{d}T_j} > \\frac{\\mathrm{d}Q_{gen}}{\\mathrm{d}T_j}$$\n在工作点。\n计算导数：\n$$\\frac{\\mathrm{d}Q_{diss}}{\\mathrm{d}T_j} = \\frac{\\mathrm{d}}{\\mathrm{d}T_j} \\left( \\frac{T_j - T_a}{R_{\\mathrm{th,total}}} \\right) = \\frac{1}{R_{\\mathrm{th,total}}}$$\n$$\\frac{\\mathrm{d}Q_{gen}}{\\mathrm{d}T_j} = \\frac{\\mathrm{d}P}{\\mathrm{d}T_j}$$\n因此，稳定性判据为：\n$$\\frac{1}{R_{\\mathrm{th,total}}} > \\frac{\\mathrm{d}P}{\\mathrm{d}T_j}$$\n两边乘以正量 $R_{\\mathrm{th,total}}$ 得到：\n$$1 > R_{\\mathrm{th,total}} \\cdot \\frac{\\mathrm{d}P}{\\mathrm{d}T_j}$$\n代入 $R_{\\mathrm{th,total}}$ 的表达式：\n$$(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}) \\cdot \\frac{\\mathrm{d}P}{\\mathrm{d}T_j}  1$$\n如果不满足此条件，则可能发生热失控。\n\n在确定了这些原则之后，我们现在可以评估每个选项。\n\nA. 数据手册中的 $R_{\\mathrm{th,JA}}$ 对所有安装条件普遍有效，包括使用散热器的设计，因为从结到环境的热通路是唯一的且与边界条件无关；因此应始终使用 $T_j = T_a + P R_{\\mathrm{th,JA}}$。\n**分析：**这个陈述根本上是错误的。问题明确指出，数据手册中的 $R_{\\mathrm{th,JA}}$ 是在特定条件下测量的：一个标准化的测试板和自然对流。所描述的应用涉及一套不同的边界条件：一个特定的挤压铝散热器和强制对流。在该应用中，从器件到周围环境的热通路主要由散热器决定，这与数据手册测量中通过器件引脚和一小块测试板的路径完全不同。热阻不是一个普适常数，而是高度依赖于系统的边界条件。因此，在有散热器的应用中使用数据手册的 $R_{\\mathrm{th,JA}}$ 是一个常见但严重的设计错误。\n**结论：** **错误**。\n\nB. 在使用散热器的设计中，数据手册中的 $R_{\\mathrm{th,JA}}$ 通常不适用，因为它假定了特定的测试板和自然对流边界条件。一个从结到环境的分区串联热阻网络是合适的，其中稳态结温满足 $T_j = T_a + P\\!\\left(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}\\right)$。\n**分析：**这个陈述正确地指出了在定制散热器应用中使用数据手册 $R_{\\mathrm{th,JA}}$ 的缺陷。然后，它正确地提出了标准的工程方法：构建一个模拟实际热路径的串联热网络。正如上面从第一性原理推导的那样，串联电阻之和 $R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}$ 给出了该应用的总热阻，并且得到的 $T_j$ 方程与我们的推导完全匹配。\n**结论：** **正确**。\n\nC. 因为散热器是用来散热的，所以正确的分区表达式是 $T_j = T_a + P\\!\\left(R_{\\mathrm{th,SA}} - R_{\\mathrm{th,CS}} - R_{\\mathrm{th,JC}}\\right)$，这解释了散热器减去了界面和封装的热阻抗。\n**分析：**这个陈述在物理上是荒谬的。串联热流路径中的热阻总是相加的。路径中的每个组件（封装、界面、散热器）都对热流构成障碍，它们的影响会累积。认为电阻可以相减的想法违反了传热的基本原理，这类似于说在电路中串联电阻可以减小总电阻。散热器通过提供一个较低的 $R_{\\mathrm{th,SA}}$ 值来*降低*总的结-环境温升，而不是神奇地抵消封装和界面的固有热阻。\n**结论：** **错误**。\n\nD. 如果功耗随温度升高而增加（例如，由于漏电流近似指数级上升），那么在稳态工作点的一个局部稳定性的必要条件是 $\\left(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}\\right) \\cdot \\dfrac{\\mathrm{d}P}{\\mathrm{d}T_j}  1$。该准则源于稳态热平衡方程 $T_j = T_a + \\left(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}\\right) P(T_j)$ 的不动点稳定性，并量化了对热失控的敏感性。\n**分析：**这个陈述正确地阐述了热稳定性的准则。如上所述，对于一个稳定的工作点，散热率随温度的增加率必须超过生热率随温度的增加率。我们基于这一原理的推导，得出了这个选项中提出的精确不等式：$(R_{\\mathrm{th,JC}} + R_{\\mathrm{th,CS}} + R_{\\mathrm{th,SA}}) \\cdot \\frac{\\mathrm{d}P}{\\mathrm{d}T_j}  1$。关于这源于不动点稳定性分析的解释也是正确的。这是用于评估功率器件热失控风险的标准准则。\n**结论：** **正确**。",
            "answer": "$$\\boxed{BD}$$"
        },
        {
            "introduction": "本练习将前面的概念融合到一个动态仿真中，以应对更真实的挑战。您将通过编程来模拟一个功率器件在经受高频脉冲串时的结温演变，其中包含了功率损耗随温度变化的“正反馈”效应。这项动手实践将让您直观地看到结温如何随时间累积，并深刻理解在实际开关应用中热失控现象背后的动态机制。",
            "id": "3852761",
            "problem": "一个半导体功率开关，例如绝缘栅双极晶体管 (IGBT)，在环境温度为 $T_a=40\\,^\\circ\\mathrm{C}$ 的静止空气中，承受一串频率为 $f=10\\,\\mathrm{kHz}$、由 $N=100$ 个相同开关脉冲组成的脉冲串。随着开关能量的耗散和热量传导至环境，结温 $T_j$ 发生变化。每个脉冲的开关能量是开通能量 $E_{\\mathrm{on}}(T)$ 和关断能量 $E_{\\mathrm{off}}(T)$ 的总和，两者都取决于瞬时结温 $T$。热路径通过一个单极点等效的阻容 (RC) 网络进行建模，该网络具有热阻 $R_{\\mathrm{th}}$ 和热容 $C_{\\mathrm{th}}$，代表了在脉冲串时间尺度上的有效主导时间常数。初始条件为 $T_j(0)=T_a$。\n\n从能量守恒和 RC 网络所体现的线性热流定律出发，推导一种离散时间更新方法，该方法需考虑：\n- 每个脉冲处的瞬时能量沉积，\n- 脉冲之间向环境的后续热弛豫，\n- $E_{\\mathrm{on}}(T)$ 和 $E_{\\mathrm{off}}(T)$ 的温度依赖性，\n并实现该方法以计算在 $N$ 个脉冲过程中 $T_j$ 的演变。评估在脉冲串期间达到的峰值结温。\n\n假设所有开关损耗在每个周期开始时以瞬时能量脉冲的形式发生，并且没有其他损耗。以摄氏度为单位表示最终峰值结温，并四舍五入到三位小数。\n\n使用以下测试套件，其中开关能量的温度依赖性由围绕参考温度 $T_{\\mathrm{ref}}$ 的线性曲线给出，具体为 $E_{\\mathrm{on}}(T)=E_{\\mathrm{on},0}\\left[1 + a_{\\mathrm{on}}\\left(T - T_{\\mathrm{ref}}\\right)\\right]$ 和 $E_{\\mathrm{off}}(T)=E_{\\mathrm{off},0}\\left[1 + a_{\\mathrm{off}}\\left(T - T_{\\mathrm{ref}}\\right)\\right]$，其中 $T$ 和 $T_{\\mathrm{ref}}$ 的单位为摄氏度。所有能量单位均为焦耳。\n\n- 情况1（模块级主导极点）：$T_a=40\\,^\\circ\\mathrm{C}$，$N=100$，$f=10\\,\\mathrm{kHz}$，$R_{\\mathrm{th}}=0.3\\,\\mathrm{K/W}$，$C_{\\mathrm{th}}=10\\,\\mathrm{J/K}$，$T_{\\mathrm{ref}}=25\\,^\\circ\\mathrm{C}$，$E_{\\mathrm{on},0}=40\\times 10^{-3}\\,\\mathrm{J}$，$E_{\\mathrm{off},0}=30\\times 10^{-3}\\,\\mathrm{J}$，$a_{\\mathrm{on}}=4.0\\times 10^{-3}\\,\\mathrm{K}^{-1}$，$a_{\\mathrm{off}}=3.0\\times 10^{-3}\\,\\mathrm{K}^{-1}$。\n- 情况2（小电容，较高损耗）：$T_a=40\\,^\\circ\\mathrm{C}$，$N=100$，$f=10\\,\\mathrm{kHz}$，$R_{\\mathrm{th}}=1.0\\,\\mathrm{K/W}$，$C_{\\mathrm{th}}=1.0\\,\\mathrm{J/K}$，$T_{\\mathrm{ref}}=25\\,^\\circ\\mathrm{C}$，$E_{\\mathrm{on},0}=120\\times 10^{-3}\\,\\mathrm{J}$，$E_{\\mathrm{off},0}=80\\times 10^{-3}\\,\\mathrm{J}$，$a_{\\mathrm{on}}=1.0\\times 10^{-2}\\,\\mathrm{K}^{-1}$，$a_{\\mathrm{off}}=8.0\\times 10^{-3}\\,\\mathrm{K}^{-1}$。\n- 情况3（芯片级短时间常数）：$T_a=40\\,^\\circ\\mathrm{C}$，$N=100$，$f=10\\,\\mathrm{kHz}$，$R_{\\mathrm{th}}=0.1\\,\\mathrm{K/W}$，$C_{\\mathrm{th}}=0.02\\,\\mathrm{J/K}$，$T_{\\mathrm{ref}}=25\\,^\\circ\\mathrm{C}$，$E_{\\mathrm{on},0}=20\\times 10^{-3}\\,\\mathrm{J}$，$E_{\\mathrm{off},0}=10\\times 10^{-3}\\,\\mathrm{J}$，$a_{\\mathrm{on}}=2.0\\times 10^{-3}\\,\\mathrm{K}^{-1}$，$a_{\\mathrm{off}}=1.0\\times 10^{-3}\\,\\mathrm{K}^{-1}$。\n- 情况4（强温度依赖性）：$T_a=40\\,^\\circ\\mathrm{C}$，$N=100$，$f=10\\,\\mathrm{kHz}$，$R_{\\mathrm{th}}=0.6\\,\\mathrm{K/W}$，$C_{\\mathrm{th}}=1.5\\,\\mathrm{J/K}$，$T_{\\mathrm{ref}}=25\\,^\\circ\\mathrm{C}$，$E_{\\mathrm{on},0}=60\\times 10^{-3}\\,\\mathrm{J}$，$E_{\\mathrm{off},0}=40\\times 10^{-3}\\,\\mathrm{J}$，$a_{\\mathrm{on}}=2.0\\times 10^{-2}\\,\\mathrm{K}^{-1}$，$a_{\\mathrm{off}}=1.5\\times 10^{-2}\\,\\mathrm{K}^{-1}$。\n\n您的程序应生成单行输出，其中包含四个情况下的峰值结温，以逗号分隔的列表形式包含在方括号内，每个值以摄氏度为单位四舍五入到三位小数（例如，$[41.237,68.945,70.752,55.103]$）。",
            "solution": "结温的演变受能量守恒和向环境的线性热流控制。阻容 (RC) 热网络模型描述了脉冲串期间的主导热动态。设 $T(t)$ 表示结温，$T_a$ 表示环境温度。对于热容 $C_{\\mathrm{th}}$ 和热阻 $R_{\\mathrm{th}}$，能量平衡方程为\n$$\nC_{\\mathrm{th}} \\frac{dT}{dt} = P(t) - \\frac{T(t)-T_a}{R_{\\mathrm{th}}},\n$$\n其中 $P(t)$ 是输入热功率。在离散时间 $t_n = n/f$ 进行开关切换时，每个脉冲的损耗被建模为瞬时能量沉积，由能量脉冲 $E_{\\mathrm{sw}}(T)$ 表示，其中\n$$\nE_{\\mathrm{sw}}(T) = E_{\\mathrm{on}}(T) + E_{\\mathrm{off}}(T).\n$$\n在脉冲之间，$P(t)=0$，热量流向环境。与温度相关的开关能量被指定为关于参考温度 $T_{\\mathrm{ref}}$ 的线性函数，\n$$\nE_{\\mathrm{on}}(T) = E_{\\mathrm{on},0}\\left[1 + a_{\\mathrm{on}}(T - T_{\\mathrm{ref}})\\right], \\quad E_{\\mathrm{off}}(T) = E_{\\mathrm{off},0}\\left[1 + a_{\\mathrm{off}}(T - T_{\\mathrm{ref}})\\right],\n$$\n其中 $E_{\\mathrm{on},0}$ 和 $E_{\\mathrm{off},0}$ 的单位是 $\\mathrm{J}$，$a_{\\mathrm{on}}$ 和 $a_{\\mathrm{off}}$ 的单位是 $\\mathrm{K}^{-1}$。\n\n在第 $n$ 个脉冲时，将脉冲前的瞬时温度表示为 $T_n^-$。瞬时能量沉积使温度升高\n$$\n\\Delta T_n = \\frac{E_{\\mathrm{sw}}(T_n^-)}{C_{\\mathrm{th}}},\n$$\n从而得到脉冲后的瞬时峰值温度\n$$\nT_n^+ = T_n^- + \\Delta T_n.\n$$\n在脉冲之间的时间间隔 $\\Delta t = 1/f$ 内，系统是线性的且 $P(t)=0$，因此齐次解给出向环境的指数弛豫，时间常数为\n$$\n\\tau = R_{\\mathrm{th}} C_{\\mathrm{th}}.\n$$\n因此，下一个脉冲前的温度为\n$$\nT_{n+1}^- = T_a + \\left(T_n^+ - T_a\\right) e^{-\\Delta t/\\tau}.\n$$\n初始条件是 $T_0^- = T_a$。整个脉冲串期间的峰值温度是 $\\{T_n^+\\}_{n=0}^{N-1}$ 中的最大值。\n\n这种离散时间算法直接实现了以下物理原理：\n- 瞬时温升通过将沉积能量等同于存储热能的增加来获得，即 $E = C_{\\mathrm{th}} \\Delta T$；\n- 脉冲间的衰减遵循通过 $R_{\\mathrm{th}}$ 流向环境的线性热流，其控制微分方程在 $P(t)=0$ 时的解为 $T(t) = T_a + (T(0) - T_a)\\exp(-t/\\tau)$。\n\n热失控风险源于正反馈：$E_{\\mathrm{sw}}(T)$ 随 $T$ 增加而增加，这会使 $\\Delta T_n$ 增大，进而增加后续的 $E_{\\mathrm{sw}}$。对映射 $T_{n+1}^- = F(T_n^-)$ 在不动点 $T^\\star$ 附近的局部稳定性评估考虑了其导数\n$$\n\\frac{dT_{n+1}^-}{dT_n^-} = e^{-\\Delta t/\\tau}\\left(1 + \\frac{dE_{\\mathrm{sw}}}{dT}\\frac{1}{C_{\\mathrm{th}}}\\right),\n$$\n在 $T^\\star$ 处求值。如果该导数超过1，则序列会增长，并可能在更长的脉冲串中表现出不稳定性。在短脉冲串中（此处为 $N=100$，频率 $f=10\\,\\mathrm{kHz}$），有限的脉冲数量限制了峰值温度，但强温度依赖性会显著升高 $T_j$。\n\n每个测试用例的算法步骤：\n1. 初始化 $T \\leftarrow T_a$，$\\Delta t \\leftarrow 1/f$，$\\tau \\leftarrow R_{\\mathrm{th}} C_{\\mathrm{th}}$，$T_{\\mathrm{peak,max}} \\leftarrow T_a$。\n2. 对于 $n$ 从 $0$到 $N-1$：\n   a. 使用给定的线性函数计算 $E_{\\mathrm{on}}(T)$ 和 $E_{\\mathrm{off}}(T)$。\n   b. 计算 $E_{\\mathrm{sw}}(T) = E_{\\mathrm{on}}(T) + E_{\\mathrm{off}}(T)$。\n   c. 计算 $T^+ = T + E_{\\mathrm{sw}}(T)/C_{\\mathrm{th}}$ 并更新 $T_{\\mathrm{peak,max}} \\leftarrow \\max(T_{\\mathrm{peak,max}}, T^+)$。\n   d. 计算 $T \\leftarrow T_a + (T^+ - T_a)\\exp(-\\Delta t/\\tau)$。\n3. 返回 $T_{\\mathrm{peak,max}}$，以 $^\\circ\\mathrm{C}$ 为单位并四舍五入到三位小数。\n\n这四个测试用例探讨了：\n- 具有中等能量和较大热时间常数的典型情况（情况1），\n- 较小热容和较高损耗导致峰值温度升高的情况（情况2），\n- 较短热时间常数下表现出显著脉冲间冷却的情况（情况3），\n- 强温度依赖性放大了反馈效应，但在脉冲串内仍保持有界的情况（情况4）。\n\n最终程序计算所有四种情况下的峰值结温，并将其以单个逗号分隔的列表形式打印在方括号中，数值以摄氏度为单位并四舍五入到三位小数。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef peak_tj_for_case(case):\n    # Unpack case parameters\n    Ta = case[\"Ta\"]  # ambient temperature in degC\n    N = case[\"N\"]    # number of pulses\n    f = case[\"f\"]    # Hz\n    Rth = case[\"Rth\"]  # K/W\n    Cth = case[\"Cth\"]  # J/K\n    Tref = case[\"Tref\"]  # degC\n\n    Eon0 = case[\"Eon0\"]  # J\n    Eoff0 = case[\"Eoff0\"]  # J\n    aon = case[\"aon\"]    # 1/K\n    aoff = case[\"aoff\"]  # 1/K\n\n    dt = 1.0 / f\n    tau = Rth * Cth\n    decay = np.exp(-dt / tau)\n\n    T = Ta  # pre-pulse temperature\n    peak_max = T\n\n    for _ in range(N):\n        # Temperature-dependent switching energies\n        Eon = Eon0 * (1.0 + aon * (T - Tref))\n        Eoff = Eoff0 * (1.0 + aoff * (T - Tref))\n        Esw = Eon + Eoff\n        # Instantaneous temperature rise at pulse\n        T_peak = T + Esw / Cth\n        if T_peak  peak_max:\n            peak_max = T_peak\n        # Relaxation toward ambient until next pulse\n        T = Ta + (T_peak - Ta) * decay\n\n    return peak_max\n\ndef solve():\n    # Define the test cases from the problem statement.\n    test_cases = [\n        {\n            \"Ta\": 40.0,\n            \"N\": 100,\n            \"f\": 10_000.0,\n            \"Rth\": 0.3,\n            \"Cth\": 10.0,\n            \"Tref\": 25.0,\n            \"Eon0\": 40e-3,\n            \"Eoff0\": 30e-3,\n            \"aon\": 4.0e-3,\n            \"aoff\": 3.0e-3,\n        },\n        {\n            \"Ta\": 40.0,\n            \"N\": 100,\n            \"f\": 10_000.0,\n            \"Rth\": 1.0,\n            \"Cth\": 1.0,\n            \"Tref\": 25.0,\n            \"Eon0\": 120e-3,\n            \"Eoff0\": 80e-3,\n            \"aon\": 1.0e-2,\n            \"aoff\": 8.0e-3,\n        },\n        {\n            \"Ta\": 40.0,\n            \"N\": 100,\n            \"f\": 10_000.0,\n            \"Rth\": 0.1,\n            \"Cth\": 0.02,\n            \"Tref\": 25.0,\n            \"Eon0\": 20e-3,\n            \"Eoff0\": 10e-3,\n            \"aon\": 2.0e-3,\n            \"aoff\": 1.0e-3,\n        },\n        {\n            \"Ta\": 40.0,\n            \"N\": 100,\n            \"f\": 10_000.0,\n            \"Rth\": 0.6,\n            \"Cth\": 1.5,\n            \"Tref\": 25.0,\n            \"Eon0\": 60e-3,\n            \"Eoff0\": 40e-3,\n            \"aon\": 2.0e-2,\n            \"aoff\": 1.5e-2,\n        },\n    ]\n\n    results = []\n    for case in test_cases:\n        peak = peak_tj_for_case(case)\n        results.append(f\"{peak:.3f}\")\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```"
        }
    ]
}
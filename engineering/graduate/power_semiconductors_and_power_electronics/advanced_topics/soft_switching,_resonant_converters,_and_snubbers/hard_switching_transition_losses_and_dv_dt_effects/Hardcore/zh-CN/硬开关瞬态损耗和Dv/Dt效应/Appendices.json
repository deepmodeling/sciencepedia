{
    "hands_on_practices": [
        {
            "introduction": "功率MOSFET的开关速度并非瞬时完成，其开关瞬态的一个关键阶段是米勒平台期，在此期间器件的电压发生快速变化。这个阶段的持续时间直接影响开关损耗和电磁干扰（EMI），因此理解其背后的物理机制至关重要。本练习将引导您利用器件数据手册中的关键参数（如栅漏电荷 $Q_{gd}$）和栅极驱动电流 $i_g$，来计算电压转换时间以及相应的平均电压变化率 $dv/dt$，从而将理论与实际器件特性联系起来。",
            "id": "3845070",
            "problem": "一个硬开关半桥电路中的碳化硅（SiC）金属氧化物半导体场效应晶体管（MOSFET）正在从电压为 $V_{\\text{bus}}$ 的直流（DC）母线向感性负载开通。在米勒平台期间，栅源电压 $v_{gs}$ 保持近似恒定，而漏源电压 $v_{ds}$ 从 $V_{\\text{bus}}$ 斜降至一个低的导通态值。一个配置为电流源的栅极驱动器在该平台期间提供恒定的栅极电流 $i_{g}$。该MOSFET的数据手册将与指定漏源电压变化相关的栅漏电荷 $Q_{gd}$ 报告为随电压变化的栅漏电容的积分，即在相关的 $v_{ds}$ 摆幅范围内 $Q_{gd}=\\int C_{gd}(v_{ds})\\,\\mathrm{d}v_{ds}$。\n\n假设：\n- 该转换是硬开通（漏源电压从 $V_{\\text{bus}}$ 下降到与 $V_{\\text{bus}}$ 相比可以忽略不计的值）。\n- 在整个米勒平台期间，栅极电流 $i_{g}$ 保持恒定，并且其全部用于提供与漏极电压变化相关的栅漏电荷。\n- 报告的 $Q_{gd}$ 对应于从 $V_{\\text{bus}}$ 下降到近似为 $0$ 的完整漏极电压摆幅。\n\n给定以下器件和工作数据：\n- $V_{\\text{bus}} = 800\\ \\mathrm{V}$,\n- $Q_{gd} = 44\\ \\mathrm{nC}$，对应于平台期间 $800\\ \\mathrm{V}$ 的漏源电压摆幅，\n- 平台期间的恒定栅极电流 $i_{g} = 1.6\\ \\mathrm{A}$，\n\n仅使用电荷、电流和时间之间的基本关系，以及 $Q_{gd}$ 的定义，来确定：\n1. 在米勒平台中花费的时间 $t_{M}$。\n2. 平台期间相应的平均漏极电压摆率大小 $\\overline{\\mathrm{d}v_{ds}/\\mathrm{d}t}$。\n\n将您的答案保留四位有效数字。以 $\\mathrm{ns}$ 为单位表示 $t_{M}$，以 $\\mathrm{V/ns}$ 为单位表示 $\\overline{\\mathrm{d}v_{ds}/\\mathrm{d}t}$。提供两个数值结果。",
            "solution": "该问题经核实具有科学依据、提法得当且客观。所有提供的数据对于现代碳化硅（SiC）功率MOSFET而言在物理上是现实的，所要求的计算基于电力电子学的基本原理。因此，我们可以继续进行求解。\n\n该问题要求计算与SiC MOSFET的开通开关转换相关的两个量：米勒平台的持续时间 $t_M$，以及平均漏源电压摆率的大小 $\\overline{|\\mathrm{d}v_{ds}/\\mathrm{d}t|}$。两者都可以使用电荷（$Q$）、电流（$I$）和时间（$t$）之间的基本关系来确定。对于恒定电流，该关系由下式给出：\n$$I = \\frac{\\Delta Q}{\\Delta t}$$\n其中 $\\Delta Q$ 是在时间间隔 $\\Delta t$ 内由电流 $I$ 传输的总电荷。\n\n**1. 米勒平台持续时间（$t_M$）的计算**\n\n在MOSFET开通转换的米勒平台期间，栅源电压 $v_{gs}$ 近似恒定。随着漏源电压 $v_{ds}$ 的下降，栅极驱动电流 $i_g$ 主要用于对栅漏电容 $C_{gd}$ 放电。促成此电压摆幅所需的总电荷是栅漏电荷 $Q_{gd}$。\n\n问题陈述，在该平台期间，栅极电流 $i_g$ 是恒定的，并完全用于提供 $Q_{gd}$。因此，我们可以直接应用电荷-电流-时间关系。时间间隔是米勒平台持续时间 $t_M$，恒定电流是 $i_g$，传输的总电荷是 $Q_{gd}$。\n\n$$i_g = \\frac{Q_{gd}}{t_M}$$\n\n我们可以重新整理此方程以求解 $t_M$：\n$$t_M = \\frac{Q_{gd}}{i_g}$$\n\n给定的值为：\n- 栅漏电荷，$Q_{gd} = 44\\ \\mathrm{nC} = 44 \\times 10^{-9}\\ \\mathrm{C}$。\n- 恒定栅极电流，$i_g = 1.6\\ \\mathrm{A}$。\n\n将这些值代入 $t_M$ 的方程中：\n$$t_M = \\frac{44 \\times 10^{-9}\\ \\mathrm{C}}{1.6\\ \\mathrm{A}} = 27.5 \\times 10^{-9}\\ \\mathrm{s}$$\n\n问题要求答案以纳秒（$\\mathrm{ns}$）为单位，其中 $1\\ \\mathrm{ns} = 10^{-9}\\ \\mathrm{s}$。\n$$t_M = 27.5\\ \\mathrm{ns}$$\n按要求保留四位有效数字，得到 $t_M = 27.50\\ \\mathrm{ns}$。\n\n**2. 平均漏极电压摆率大小（$\\overline{|\\mathrm{d}v_{ds}/\\mathrm{d}t|}$）的计算**\n\n电压的平均摆率定义为电压的总变化量除以该变化发生的时间持续长度。在本例中，我们关心的是米勒平台期间平均漏源电压摆率的大小。\n$$\\overline{|\\frac{\\mathrm{d}v_{ds}}{\\mathrm{d}t}|} = \\frac{|\\Delta v_{ds}|}{t_M}$$\n\n在开通转换期间，漏源电压 $v_{ds}$ 从直流母线电压 $V_{\\text{bus}}$ 下降到一个接近零的值。问题指明该最终值与 $V_{\\text{bus}}$ 相比可以忽略不计。因此，电压变化的幅度为：\n$$|\\Delta v_{ds}| = |0 - V_{\\text{bus}}| = V_{\\text{bus}}$$\n\n给定的直流母线电压为 $V_{\\text{bus}} = 800\\ \\mathrm{V}$。此电压摆幅的时间持续长度是米勒平台时间 $t_M$，我们在上一步中计算出其值为 $t_M = 27.5 \\times 10^{-9}\\ \\mathrm{s}$。\n\n将这些值代入摆率方程中：\n$$\\overline{|\\frac{\\mathrm{d}v_{ds}}{\\mathrm{d}t}|} = \\frac{V_{\\text{bus}}}{t_M} = \\frac{800\\ \\mathrm{V}}{27.5 \\times 10^{-9}\\ \\mathrm{s}}$$\n$$\\overline{|\\frac{\\mathrm{d}v_{ds}}{\\mathrm{d}t}|} = \\frac{800}{27.5} \\times 10^9\\ \\frac{\\mathrm{V}}{\\mathrm{s}} \\approx 29.090909... \\times 10^9\\ \\frac{\\mathrm{V}}{\\mathrm{s}}$$\n\n问题要求答案以伏特每纳秒（$\\mathrm{V/ns}$）为单位。我们使用换算关系 $1\\ \\mathrm{V/s} = 10^{-9}\\ \\mathrm{V/ns}$：\n$$\\overline{|\\frac{\\mathrm{d}v_{ds}}{\\mathrm{d}t}|} \\approx (29.090909... \\times 10^9) \\times (10^{-9}\\ \\frac{\\mathrm{V/ns}}{\\mathrm{V/s}}) = 29.090909...\\ \\frac{\\mathrm{V}}{\\mathrm{ns}}$$\n按要求保留四位有效数字，得到 $\\overline{|\\mathrm{d}v_{ds}/\\mathrm{d}t|} = 29.09\\ \\mathrm{V/ns}$。",
            "answer": "$$\\boxed{\\begin{pmatrix} 27.50  29.09 \\end{pmatrix}}$$"
        },
        {
            "introduction": "在掌握了米勒平台的基本计算后，我们可以进一步探究更完整的开关过程。决定开关速度的不仅仅是器件本身的特性，外部电路元件，特别是那些通常不希望存在的“寄生”电感和电阻，对开关瞬态有显著影响。本练习要求您构建一个简化的开关过程模型，并通过编程进行灵敏度分析，以量化探索栅极电阻 $R_g$ 和共源电感 $L_s$ 等寄生参数如何减慢开关速度并增加能量损耗 $E_{\\text{sw}}$。",
            "id": "3845033",
            "problem": "金属氧化物半导体场效应晶体管 (MOSFET) 在直流总线电压 $V_{\\mathrm{dc}}$ 和负载电流 $I_{\\mathrm{L}}$ 下对感性负载进行硬开通。重叠（过渡）开关能量 $E_{\\mathrm{sw}}$ 是由过渡期间非零的电压和电流产生的。考虑一个简化的、但基于物理原理的导通事件两阶段模型：\n\n- A 阶段（电流上升阶段）：漏极电流 $i_{\\mathrm{d}}(t)$ 从 $0$ 线性上升至 $I_{\\mathrm{L}}$，而漏源电压 $v_{\\mathrm{ds}}(t)$ 近似保持在 $V_{\\mathrm{dc}}$。\n- B 阶段（电压下降阶段）：漏源电压 $v_{\\mathrm{ds}}(t)$ 从 $V_{\\mathrm{dc}}$ 线性下降至可忽略的导通电压，而漏极电流 $i_{\\mathrm{d}}(t)$ 近似保持在 $I_{\\mathrm{L}}$。\n\n以下是基本出发点：\n\n- 电感本构关系：$v = L \\, \\dfrac{di}{dt}$。\n- 电容本构关系：$i = C \\, \\dfrac{dv}{dt}$。\n- 一段时间内的电能：$E = \\displaystyle\\int v(t)\\,i(t)\\,dt$。\n\n设模型包含栅极电阻 $R_{\\mathrm{g}}$、源极电感 $L_{\\mathrm{s}}$ 和寄生电容 $C_{\\mathrm{p}}$（在电压转换期间主要由有效输出/米勒电容决定）。假设一个理想的栅极驱动器施加幅度为 $V_{\\mathrm{drive}}$ 的阶跃栅极电压，并且栅极阈值和平台现象由两个常数捕捉：有效阈值 $V_{\\mathrm{th}}$ 和米勒平台电压 $V_{\\mathrm{M}}$。仅使用所述的基本关系和物理上一致的推理来：\n\n1. 用 $V_{\\mathrm{drive}}$、$V_{\\mathrm{th}}$ 和 $L_{\\mathrm{s}}$ 表示 A 阶段的电流上升斜率 $\\dfrac{di}{dt}$。\n2. 用 $V_{\\mathrm{drive}}$、$V_{\\mathrm{M}}$、$R_{\\mathrm{g}}$ 和 $C_{\\mathrm{p}}$ 表示 B 阶段的电压下降斜率 $\\dfrac{dv}{dt}$。\n3. 使用斜率所隐含的线性斜坡计算 A 阶段和 B 阶段的持续时间。\n4. 通过对每个阶段的 $v(t)\\,i(t)$ 进行积分，推导出 $E_{\\mathrm{sw}}$ 作为 A 阶段和 B 阶段能量贡献的总和。\n5. 通过单独改变 $R_{\\mathrm{g}}$、$L_{\\mathrm{s}}$ 和 $C_{\\mathrm{p}}$ 进行灵敏度分析，并根据电感和电容关系解释观察到的趋势。\n\n假设所有测试用例的常数如下：\n- $V_{\\mathrm{dc}} = 400\\,\\mathrm{V}$，\n- $I_{\\mathrm{L}} = 20\\,\\mathrm{A}$，\n- $V_{\\mathrm{drive}} = 12\\,\\mathrm{V}$，\n- $V_{\\mathrm{th}} = 4\\,\\mathrm{V}$，\n- $V_{\\mathrm{M}} = 6\\,\\mathrm{V}$。\n\n您的程序必须计算以下六个参数集（“测试套件”）中每个参数集的 $E_{\\mathrm{sw}}$，其单位为：$R_{\\mathrm{g}}$ 以 $\\Omega$ 为单位，$L_{\\mathrm{s}}$ 以 $\\mathrm{H}$ 为单位，$C_{\\mathrm{p}}$ 以 $\\mathrm{F}$ 为单位：\n\n- 测试 1（标称值）：$R_{\\mathrm{g}} = 5$，$L_{\\mathrm{s}} = 10\\times 10^{-9}$，$C_{\\mathrm{p}} = 200\\times 10^{-12}$。\n- 测试 2（低栅极电阻）：$R_{\\mathrm{g}} = 1$，$L_{\\mathrm{s}} = 10\\times 10^{-9}$，$C_{\\mathrm{p}} = 200\\times 10^{-12}$。\n- 测试 3（高源极电感）：$R_{\\mathrm{g}} = 5$，$L_{\\mathrm{s}} = 50\\times 10^{-9}$，$C_{\\mathrm{p}} = 200\\times 10^{-12}$。\n- 测试 4（高寄生电容）：$R_{\\mathrm{g}} = 5$，$L_{\\mathrm{s}} = 10\\times 10^{-9}$，$C_{\\mathrm{p}} = 1\\times 10^{-9}$。\n- 测试 5（同时低 $R_{\\mathrm{g}}$、低 $L_{\\mathrm{s}}$、低 $C_{\\mathrm{p}}$）：$R_{\\mathrm{g}} = 0.5$，$L_{\\mathrm{s}} = 5\\times 10^{-9}$，$C_{\\mathrm{p}} = 100\\times 10^{-12}$。\n- 测试 6（同时高 $R_{\\mathrm{g}}$、高 $L_{\\mathrm{s}}$、高 $C_{\\mathrm{p}}$）：$R_{\\mathrm{g}} = 20$，$L_{\\mathrm{s}} = 100\\times 10^{-9}$，$C_{\\mathrm{p}} = 2\\times 10^{-9}$。\n\n将每个计算出的 $E_{\\mathrm{sw}}$ 以焦耳（$\\mathrm{J}$）为单位表示，并四舍五入到 $6$ 位小数。您的程序应生成单行输出，其中包含用方括号括起来的逗号分隔列表形式的结果（例如，“[$\\text{result}_1,\\text{result}_2,\\dots,\\text{result}_6$]”）。",
            "solution": "### 第 1 步：提取已知条件\n- **模型定义**：用于 MOSFET 硬开通的两阶段线性模型。\n  - **A 阶段（电流上升）**：$i_{\\mathrm{d}}(t)$ 从 $0$ 线性上升至 $I_{\\mathrm{L}}$，而 $v_{\\mathrm{ds}}(t) \\approx V_{\\mathrm{dc}}$。\n  - **B 阶段（电压下降）**：$v_{\\mathrm{ds}}(t)$ 从 $V_{\\mathrm{dc}}$ 线性下降至 $0$，而 $i_{\\mathrm{d}}(t) \\approx I_{\\mathrm{L}}$。\n- **基本关系**：\n  - 电感：$v = L \\, \\frac{di}{dt}$\n  - 电容：$i = C \\, \\frac{dv}{dt}$\n  - 能量：$E = \\int v(t)\\,i(t)\\,dt$\n- **电路参数**：\n  - 栅极电阻：$R_{\\mathrm{g}}$\n  - 源极电感：$L_{\\mathrm{s}}$\n  - 寄生电容：$C_{\\mathrm{p}}$\n- **MOSFET 与驱动器参数**：\n  - 直流总线电压：$V_{\\mathrm{dc}} = 400\\,\\mathrm{V}$\n  - 负载电流：$I_{\\mathrm{L}} = 20\\,\\mathrm{A}$\n  - 栅极驱动电压：$V_{\\mathrm{drive}} = 12\\,\\mathrm{V}$\n  - 有效阈值电压：$V_{\\mathrm{th}} = 4\\,\\mathrm{V}$\n  - 米勒平台电压：$V_{\\mathrm{M}} = 6\\,\\mathrm{V}$\n- **测试套件**：\n  - 测试 1（标称值）：$R_{\\mathrm{g}} = 5\\,\\Omega$，$L_{\\mathrm{s}} = 10 \\times 10^{-9}\\,\\mathrm{H}$，$C_{\\mathrm{p}} = 200 \\times 10^{-12}\\,\\mathrm{F}$。\n  - 测试 2（低 $R_{\\mathrm{g}}$）：$R_{\\mathrm{g}} = 1\\,\\Omega$，$L_{\\mathrm{s}} = 10 \\times 10^{-9}\\,\\mathrm{H}$，$C_{\\mathrm{p}} = 200 \\times 10^{-12}\\,\\mathrm{F}$。\n  - 测试 3（高 $L_{\\mathrm{s}}$）：$R_{\\mathrm{g}} = 5\\,\\Omega$，$L_{\\mathrm{s}} = 50 \\times 10^{-9}\\,\\mathrm{H}$，$C_{\\mathrm{p}} = 200 \\times 10^{-12}\\,\\mathrm{F}$。\n  - 测试 4（高 $C_{\\mathrm{p}}$）：$R_{\\mathrm{g}} = 5\\,\\Omega$，$L_{\\mathrm{s}} = 10 \\times 10^{-9}\\,\\mathrm{H}$，$C_{\\mathrm{p}} = 1 \\times 10^{-9}\\,\\mathrm{F}$。\n  - 测试 5（全部低值）：$R_{\\mathrm{g}} = 0.5\\,\\Omega$，$L_{\\mathrm{s}} = 5 \\times 10^{-9}\\,\\mathrm{H}$，$C_{\\mathrm{p}} = 100 \\times 10^{-12}\\,\\mathrm{F}$。\n  - 测试 6（全部高值）：$R_{\\mathrm{g}} = 20\\,\\Omega$，$L_{\\mathrm{s}} = 100 \\times 10^{-9}\\,\\mathrm{H}$，$C_{\\mathrm{p}} = 2 \\times 10^{-9}\\,\\mathrm{F}$。\n\n### 第 2 步：使用提取的已知条件进行验证\n所提出的问题是电力电子工程中一个标准的、尽管简化的练习。\n- **科学依据**：该问题基于基本电路理论（$v=L\\frac{di}{dt}$, $i=C\\frac{dv}{dt}$）和已确立的 MOSFET 工作原理。两阶段线性模型是用于教学和分析目的的常见且有效的一阶近似。所有参数和场景在物理上都是合理的。\n- **适定性**：该问题陈述清晰，定义了所有必要的参数。它要求进行特定的推导和计算，从而得到唯一且有意义的解。\n- **客观性**：语言精确且技术性强，没有主觀或模糊的陈述。\n\n### 第 3 步：结论与行动\n该问题有效。将提供完整的解决方案。\n\n**开关能量（$E_{\\mathrm{sw}}$）的推导**\n\n总开通开关能量 $E_{\\mathrm{sw}}$ 是电流上升阶段（$E_{\\mathrm{A}}$）和电压下降阶段（$E_{\\mathrm{B}}$）期间耗散能量的总和。\n\n**1. 电流上升斜率（$\\frac{di}{dt}$）与 A 阶段持续时间（$t_{\\mathrm{A}}$）**\n\n在 A 阶段，源极电感 $L_{\\mathrm{s}}$ 提供负反馈，限制了电流上升的速率。栅极驱动器向栅极端子施加电压 $V_{\\mathrm{drive}}$。栅源端子间的电压 $v_{\\mathrm{gs}}$ 必须超过阈值电压 $V_{\\mathrm{th}}$，电流才能开始流动。简化模型假设抵抗源极电感的有效驱动电压是过驱动电压 $V_{\\mathrm{drive}} - V_{\\mathrm{th}}$。源极电感上的电压为 $v_{L_s} = L_{\\mathrm{s}} \\frac{di_{\\mathrm{d}}}{dt}$。通过将驱动电压与栅源回路中的感性电压降相等，我们得到：\n$$V_{\\mathrm{drive}} - V_{\\mathrm{th}} = L_{\\mathrm{s}} \\frac{di_{\\mathrm{d}}}{dt}$$\n求解电流上升斜率得到：\n$$ \\frac{di_{\\mathrm{d}}}{dt} = \\frac{V_{\\mathrm{drive}} - V_{\\mathrm{th}}}{L_{\\mathrm{s}}} $$\n由于电流在持续时间 $t_{\\mathrm{A}}$ 内从 $0$ 线性上升到 $I_{\\mathrm{L}}$，恒定的斜率也意味着 $\\frac{di_{\\mathrm{d}}}{dt} = \\frac{I_{\\mathrm{L}}}{t_{\\mathrm{A}}}$。将两个斜率表达式相等并求解 $t_{\\mathrm{A}}$ 得到：\n$$ t_{\\mathrm{A}} = \\frac{I_{\\mathrm{L}} L_{\\mathrm{s}}}{V_{\\mathrm{drive}} - V_{\\mathrm{th}}} $$\n\n**2. 电压下降斜率（$\\frac{dv}{dt}$）与 B 阶段持续时间（$t_{\\mathrm{B}}$）**\n\n在 B 阶段，晶体管完全导通，栅源电压被钳位在米勒平台电压 $V_{\\mathrm{M}}$。栅极电流 $i_{\\mathrm{g}}$ 由栅极驱动电压、米勒电压和栅极电阻 $R_{\\mathrm{g}}$ 决定：\n$$ i_{\\mathrm{g}} = \\frac{V_{\\mathrm{drive}} - V_{\\mathrm{M}}}{R_{\\mathrm{g}}} $$\n这个栅极电流负责对有效寄生电容 $C_{\\mathrm{p}}$ 放电，导致漏源电压 $v_{\\mathrm{ds}}$ 下降。使用电容的本构关系 $i = C \\frac{dv}{dt}$，我们可以将栅极电流与漏源电压的变化联系起来。由于 $v_{\\mathrm{ds}}$ 正在下降，$\\frac{dv_{\\mathrm{ds}}}{dt}$ 是负值。\n$$ i_{\\mathrm{g}} = C_{\\mathrm{p}} \\left| \\frac{dv_{\\mathrm{ds}}}{dt} \\right| = -C_{\\mathrm{p}} \\frac{dv_{\\mathrm{ds}}}{dt} $$\n代入 $i_{\\mathrm{g}}$ 的表达式并求解电压下降斜率得到：\n$$ \\frac{dv_{\\mathrm{ds}}}{dt} = -\\frac{V_{\\mathrm{drive}} - V_{\\mathrm{M}}}{R_{\\mathrm{g}} C_{\\mathrm{p}}} $$\n电压在持续时间 $t_{\\mathrm{B}}$ 内从 $V_{\\mathrm{dc}}$ 线性下降到 $0$，所以恒定的斜率也为 $\\frac{dv_{\\mathrm{ds}}}{dt} = \\frac{-V_{\\mathrm{dc}}}{t_{\\mathrm{B}}}$。将两个斜率表达式相等并求解 $t_{\\mathrm{B}}$ 得到：\n$$ t_{\\mathrm{B}} = \\frac{V_{\\mathrm{dc}} R_{\\mathrm{g}} C_{\\mathrm{p}}}{V_{\\mathrm{drive}} - V_{\\mathrm{M}}} $$\n\n**3. 总开关能量（$E_{\\mathrm{sw}}$）**\n\n每个阶段耗散的能量是瞬时功率 $p(t) = v_{\\mathrm{ds}}(t)i_{\\mathrm{d}}(t)$ 的积分。\n\n对于 A 阶段（$t \\in [0, t_{\\mathrm{A}}]$）：\n- $v_{\\mathrm{ds}}(t) = V_{\\mathrm{dc}}$\n- $i_{\\mathrm{d}}(t) = \\frac{I_{\\mathrm{L}}}{t_{\\mathrm{A}}}t$\n$$ E_{\\mathrm{A}} = \\int_0^{t_{\\mathrm{A}}} V_{\\mathrm{dc}} \\left(\\frac{I_{\\mathrm{L}}}{t_{\\mathrm{A}}}t\\right) dt = \\frac{V_{\\mathrm{dc}}I_{\\mathrm{L}}}{t_{\\mathrm{A}}} \\left[\\frac{t^2}{2}\\right]_0^{t_{\\mathrm{A}}} = \\frac{1}{2} V_{\\mathrm{dc}}I_{\\mathrm{L}}t_{\\mathrm{A}} $$\n对于 B 阶段（$t \\in [0, t_{\\mathrm{B}}]$）：\n- $i_{\\mathrm{d}}(t) = I_{\\mathrm{L}}$\n- $v_{\\mathrm{ds}}(t) = V_{\\mathrm{dc}} - \\frac{V_{\\mathrm{dc}}}{t_{\\mathrm{B}}}t$\n$$ E_{\\mathrm{B}} = \\int_0^{t_{\\mathrm{B}}} \\left(V_{\\mathrm{dc}} - \\frac{V_{\\mathrm{dc}}}{t_{\\mathrm{B}}}t\\right) I_{\\mathrm{L}} dt = I_{\\mathrm{L}} \\left[V_{\\mathrm{dc}}t - \\frac{V_{\\mathrm{dc}}}{t_{\\mathrm{B}}}\\frac{t^2}{2}\\right]_0^{t_{\\mathrm{B}}} = \\frac{1}{2} V_{\\mathrm{dc}}I_{\\mathrm{L}}t_{\\mathrm{B}} $$\n总开关能量是两个阶段能量的总和：\n$$ E_{\\mathrm{sw}} = E_{\\mathrm{A}} + E_{\\mathrm{B}} = \\frac{1}{2} V_{\\mathrm{dc}}I_{\\mathrm{L}}(t_{\\mathrm{A}} + t_{\\mathrm{B}}) $$\n代入 $t_{\\mathrm{A}}$ 和 $t_{\\mathrm{B}}$ 的表达式得到最终公式：\n$$ E_{\\mathrm{sw}} = \\frac{1}{2} V_{\\mathrm{dc}}I_{\\mathrm{L}} \\left( \\frac{I_{\\mathrm{L}} L_{\\mathrm{s}}}{V_{\\mathrm{drive}} - V_{\\mathrm{th}}} + \\frac{V_{\\mathrm{dc}} R_{\\mathrm{g}} C_{\\mathrm{p}}}{V_{\\mathrm{drive}} - V_{\\mathrm{M}}} \\right) $$\n\n**4. 灵敏度分析**\n\n- **$R_{\\mathrm{g}}$（栅极电阻）的影响**：$E_{\\mathrm{sw}}$ 随 $R_{\\mathrm{g}}$ 线性增加。更高的 $R_{\\mathrm{g}}$ 会减小米勒平台期间的栅极电流，从而减慢 $C_{\\mathrm{p}}$ 的放电速度（$i = C \\frac{dv}{dt}$）。这延长了电压下降时间 $t_{\\mathrm{B}}$，增加了高功率耗散的持续时间。\n\n- **$L_{\\mathrm{s}}$（源极电感）的影响**：$E_{\\mathrm{sw}}$ 随 $L_{\\mathrm{s}}$ 线性增加。更高的 $L_{\\mathrm{s}}$ 会产生更大的反向电压（$v = L \\frac{di}{dt}$），从而减慢电流上升的速率。这延长了电流上升时间 $t_{\\mathrm{A}}$，增加了高功率耗散的持续时间。\n\n- **$C_{\\mathrm{p}}$（寄生电容）的影响**：$E_{\\mathrm{sw}}$ 随 $C_{\\mathrm{p}}$ 线性增加。更大的 $C_{\\mathrm{p}}$ 需要移走更多的电荷才能实现相同的电压降。在栅极电流固定的情况下，这延长了电压下降时间 $t_{\\mathrm{B}}$，从而增加了开关损耗。\n\n这些趋势证实了电力电子学中的常见设计目标：最小化寄生电感和电容，并使用低电阻的栅极驱动电路以实现快速、高效的开关。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the hard-switching turn-on energy loss for a MOSFET based on a \n    simplified two-phase model.\n    \"\"\"\n    # Define the constant parameters for all test cases.\n    V_dc = 400.0  # DC bus voltage in Volts\n    I_L = 20.0   # Load current in Amperes\n    V_drive = 12.0 # Gate drive voltage in Volts\n    V_th = 4.0     # Effective threshold voltage in Volts\n    V_M = 6.0      # Miller plateau voltage in Volts\n\n    # Define the test cases from the problem statement.\n    # Each case is a tuple (Rg, Ls, Cp) in units of Ohms, Henries, and Farads.\n    test_cases = [\n        # Test 1 (nominal)\n        (5.0, 10e-9, 200e-12),\n        # Test 2 (low gate resistance)\n        (1.0, 10e-9, 200e-12),\n        # Test 3 (high source inductance)\n        (5.0, 50e-9, 200e-12),\n        # Test 4 (high parasitic capacitance)\n        (5.0, 10e-9, 1e-9),\n        # Test 5 (simultaneously low Rg, Ls, Cp)\n        (0.5, 5e-9, 100e-12),\n        # Test 6 (simultaneously high Rg, Ls, Cp)\n        (20.0, 100e-9, 2e-9),\n    ]\n\n    results = []\n    \n    # Pre-calculate common factors for efficiency\n    v_drive_th_diff = V_drive - V_th\n    v_drive_m_diff = V_drive - V_M\n    power_factor = 0.5 * V_dc * I_L\n\n    for case in test_cases:\n        R_g, L_s, C_p = case\n\n        # Calculate duration of Phase A (current-rise)\n        t_A = (I_L * L_s) / v_drive_th_diff\n\n        # Calculate duration of Phase B (voltage-fall)\n        t_B = (V_dc * R_g * C_p) / v_drive_m_diff\n\n        # Calculate total switching energy E_sw = E_A + E_B\n        # E_sw = 0.5 * V_dc * I_L * (t_A + t_B)\n        E_sw = power_factor * (t_A + t_B)\n        \n        results.append(E_sw)\n\n    # Format the results to 6 decimal places and join into a single string.\n    # The f-string format specifier {:.6f} handles rounding appropriately.\n    formatted_results = [f\"{res:.6f}\" for res in results]\n    \n    # Final print statement in the exact required format.\n    print(f\"[{','.join(formatted_results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "前面练习中计算的开关能量损耗并不会凭空消失，而是会转化为热量，在功率器件内部耗散。如何有效管理这些热量，是电力电子变换器设计中的一个核心限制因素，它直接决定了系统的功率密度和可靠性。这项最终的综合练习将所有概念联系在一起，您将利用每个开关周期的总能量损耗 $E_{\\text{sw}}$ 和热阻 $R_{\\theta JA}$，来计算在结温 $T_j$ 不超过安全极限的前提下，变换器所能允许的最高工作频率 $f_s$。",
            "id": "3845113",
            "problem": "一个单开关硬开关降压变换器采用一个硅金属氧化物半导体场效应晶体管（MOSFET），该晶体管由一个大小为 $V_{\\text{dc}}$ 的直流（DC）母线供电。其开关瞬态过程很快，主要由开通和关断期间电压和电流的交叠、漏源输出电容引起的位移电流以及换向期间内在体二极管的反向恢复所主导。当MOSFET安装在已知结到环境热阻（$R_{\\theta JA}$）的印刷电路板上时，其平均结温 $T_j$ 必须保持在指定的最大值 $T_{j,\\text{max}}$ 以下。\n\n给定以下测量值和参数，所有数据均在 $V_{\\text{dc}} = 400\\,\\text{V}$ 以及使MOSFET工作在硬开关状态的负载电流下获得：\n- 测得的开通能量损耗（仅交叠部分，不包括输出电容放电和二极管反向恢复的贡献）：$E_{\\text{on,meas}} = 0.85\\,\\text{mJ}$。\n- 测得的关断能量损耗（仅交叠部分）：$E_{\\text{off,meas}} = 0.55\\,\\text{mJ}$。\n- 等效漏源输出电容（假定在整个电压摆幅内为常数）：$C_{\\text{oss}} = 220\\,\\text{pF}$。\n- 换向期间测得的MOSFET体二极管的反向恢复电荷：$Q_{\\text{rr}} = 60\\,\\text{nC}$。\n- 环境温度：$T_{\\text{amb}} = 45\\,{}^{\\circ}\\text{C}$。\n- 最大允许结温：$T_{j,\\text{max}} = 125\\,{}^{\\circ}\\text{C}$。\n- 结到环境的热阻：$R_{\\theta JA} = 18\\,\\text{K}/\\text{W}$。\n\n假设以下物理上合理的条件：\n- 与漏源输出电容相关的硬开关位移电流，在每个周期产生的能量等于将输出电容从 $0$ 充电到 $V_{\\text{dc}}$ 所需的能量，且该能量在随后的开通过程中耗散在MOSFET上。\n- 与体二极管相关的反向恢复能量，可以很好地近似为在硬开通期间恢复的电荷与母线电压的乘积，且该能量耗散在MOSFET上。\n- 就本次计算而言，导通损耗和栅极驱动损耗相对于开关瞬态损耗可以忽略不计。\n- 每个开关周期发生一次开通和一次关断。\n\n从基本的能量-功率和热学关系出发，确定能确保结温 $T_j$ 不超过 $T_{j,\\text{max}}$ 的最大允许开关频率 $f_s$。将您的最终数值答案四舍五入到四位有效数字，并以 $\\text{kHz}$ 为单位表示。",
            "solution": "首先将对问题的科学性、完整性和一致性进行验证。\n\n### 步骤1：提取给定条件\n问题陈述中提供了以下数据和条件：\n- 直流母线电压：$V_{\\text{dc}} = 400\\,\\text{V}$\n- 测得的开通能量损耗（仅交叠部分）：$E_{\\text{on,meas}} = 0.85\\,\\text{mJ}$\n- 测得的关断能量损耗（仅交叠部分）：$E_{\\text{off,meas}} = 0.55\\,\\text{mJ}$\n- 等效漏源输出电容：$C_{\\text{oss}} = 220\\,\\text{pF}$\n- 测得的反向恢复电荷：$Q_{\\text{rr}} = 60\\,\\text{nC}$\n- 环境温度：$T_{\\text{amb}} = 45\\,{}^{\\circ}\\text{C}$\n- 最大允许结温：$T_{j,\\text{max}} = 125\\,{}^{\\circ}\\text{C}$\n- 结到环境的热阻：$R_{\\theta JA} = 18\\,\\text{K}/\\text{W}$\n- 假设1：来自 $C_{\\text{oss}}$ 的每个周期的耗散能量等于将电容从 $0$ 充电到 $V_{\\text{dc}}$ 所需的能量。\n- 假设2：反向恢复能量为 $E_{\\text{rr}} = Q_{\\text{rr}} V_{\\text{dc}}$。\n- 假设3：导通和栅极驱动损耗可忽略不计。\n- 假设4：每个开关周期发生一次开通和一次关断。\n\n### 步骤2：使用提取的给定条件进行验证\n根据验证标准对问题进行评估。\n- **有科学依据：** 该问题牢固地植根于电力电子学和热管理的原理。开关损耗的组成部分（交叠、电容放电、反向恢复）及其与功率耗散的关系是标准的分析概念。热模型（$T_j = T_{\\text{amb}} + P_{\\text{diss}} R_{\\theta JA}$）是电子设备冷却中的一个基本方程。给定的电压、电容、电荷和热阻值对于现代功率MOSFET来说在物理上是现实的。\n- **适定性：** 这是一个适定问题。它提供了所有必要的参数和一个明确的目标（计算最大开关频率）。通过结合功率损耗和热模型可以确定一个唯一解。\n- **客观性：** 问题使用精确、客观和定量的语言陈述。假设被清晰地阐述。\n- **完整性与一致性：** 问题是自洽且一致的。所有需要的数据都已提供，并且假设（例如，忽略导通损耗）用于界定分析的边界，而没有引入矛盾。\n\n### 步骤3：结论与行动\n问题陈述被认为是**有效**的，因为它具有科学依据、适定且内部一致。下面将进行求解。\n\n### 求解推导\n目标是找到最大开关频率 $f_{s,\\text{max}}$，以使MOSFET的结温 $T_j$ 保持在或低于指定的最大值 $T_{j,\\text{max}}$。\n\n首先，我们确定MOSFET中最大允许的平均功率耗散 $P_{\\text{diss,max}}$。这由稳态热平衡方程决定，该方程关联了结温、环境温度、功率耗散和热阻：\n$$T_j = T_{\\text{amb}} + P_{\\text{diss}} R_{\\theta JA}$$\n为确保 $T_j \\le T_{j,\\text{max}}$，功率耗散必须限制在 $P_{\\text{diss}} \\le P_{\\text{diss,max}}$。最大功率可通过设置 $T_j = T_{j,\\text{max}}$ 求得：\n$$P_{\\text{diss,max}} = \\frac{T_{j,\\text{max}} - T_{\\text{amb}}}{R_{\\theta JA}}$$\n代入给定值：\n$T_{j,\\text{max}} = 125\\,{}^{\\circ}\\text{C}$\n$T_{\\text{amb}} = 45\\,{}^{\\circ}\\text{C}$\n$R_{\\theta JA} = 18\\,\\text{K}/\\text{W}$\n注意，以摄氏度为单位的温差等于以开尔文为单位的温差。\n$$P_{\\text{diss,max}} = \\frac{125 - 45}{18} \\, \\frac{\\text{K}}{\\text{K/W}} = \\frac{80}{18}\\,\\text{W} = \\frac{40}{9}\\,\\text{W}$$\n\n接下来，我们计算在一个完整开关周期内MOSFET中耗散的总能量 $E_{\\text{total}}$。根据问题陈述，该能量是开通交叠损耗、关断交叠损耗、输出电容放电损耗和反向恢复损耗的总和。\n$$E_{\\text{total}} = E_{\\text{on,meas}} + E_{\\text{off,meas}} + E_{C_{\\text{oss}}} + E_{\\text{rr}}$$\n问题为 $E_{C_{\\text{oss}}}$ 和 $E_{\\text{rr}}$ 提供了模型。\n输出电容的能量损耗被定义为将其从 $0$ 充电到 $V_{\\text{dc}}$ 所需的能量。在硬开关变换器中，这个存储的能量 $W_C = \\frac{1}{2}CV^2$ 随后在开通期间耗散在MOSFET的沟道中。\n$$E_{C_{\\text{oss}}} = \\frac{1}{2} C_{\\text{oss}} V_{\\text{dc}}^2$$\n反向恢复能量损耗近似为：\n$$E_{\\text{rr}} = Q_{\\text{rr}} V_{\\text{dc}}$$\n现在，我们使用给定值计算这些能量分量：\n$C_{\\text{oss}} = 220\\,\\text{pF} = 220 \\times 10^{-12}\\,\\text{F}$\n$V_{\\text{dc}} = 400\\,\\text{V}$\n$Q_{\\text{rr}} = 60\\,\\text{nC} = 60 \\times 10^{-9}\\,\\text{C}$\n$$E_{C_{\\text{oss}}} = \\frac{1}{2} (220 \\times 10^{-12}\\,\\text{F}) (400\\,\\text{V})^2 = \\frac{1}{2} (220 \\times 10^{-12}) (16 \\times 10^4)\\,\\text{J} = 1760 \\times 10^{-8}\\,\\text{J} = 1.76 \\times 10^{-5}\\,\\text{J}$$\n$$E_{\\text{rr}} = (60 \\times 10^{-9}\\,\\text{C}) (400\\,\\text{V}) = 24000 \\times 10^{-9}\\,\\text{J} = 2.4 \\times 10^{-5}\\,\\text{J}$$\n测得的交叠损耗为：\n$E_{\\text{on,meas}} = 0.85\\,\\text{mJ} = 0.85 \\times 10^{-3}\\,\\text{J} = 8.5 \\times 10^{-4}\\,\\text{J}$\n$E_{\\text{off,meas}} = 0.55\\,\\text{mJ} = 0.55 \\times 10^{-3}\\,\\text{J} = 5.5 \\times 10^{-4}\\,\\text{J}$\n将所有分量相加，得到每个周期的总能量：\n$$E_{\\text{total}} = (8.5 \\times 10^{-4}) + (5.5 \\times 10^{-4}) + (1.76 \\times 10^{-5}) + (2.4 \\times 10^{-5})\\,\\text{J}$$\n$$E_{\\text{total}} = (14.0 \\times 10^{-4}) + (0.176 \\times 10^{-4}) + (0.24 \\times 10^{-4})\\,\\text{J} = (14.0 + 0.176 + 0.24) \\times 10^{-4}\\,\\text{J}$$\n$$E_{\\text{total}} = 14.416 \\times 10^{-4}\\,\\text{J} = 1.4416 \\times 10^{-3}\\,\\text{J}$$\n平均功率耗散 $P_{\\text{diss}}$ 是每个周期的总能量与开关频率 $f_s$ 的乘积：\n$$P_{\\text{diss}} = E_{\\text{total}} \\times f_s$$\n为了求得最大允许开关频率，我们将功率耗散等同于最大允许功率耗散：\n$$P_{\\text{diss,max}} = E_{\\text{total}} \\times f_{s,\\text{max}}$$\n求解 $f_{s,\\text{max}}$：\n$$f_{s,\\text{max}} = \\frac{P_{\\text{diss,max}}}{E_{\\text{total}}} = \\frac{(T_{j,\\text{max}} - T_{\\text{amb}})/R_{\\theta JA}}{E_{\\text{on,meas}} + E_{\\text{off,meas}} + \\frac{1}{2} C_{\\text{oss}} V_{\\text{dc}}^2 + Q_{\\text{rr}} V_{\\text{dc}}}$$\n代入计算出的功率和能量值：\n$$f_{s,\\text{max}} = \\frac{40/9\\,\\text{W}}{1.4416 \\times 10^{-3}\\,\\text{J}} \\approx 3082.96335\\,\\text{Hz}$$\n问题要求答案以千赫兹（$\\text{kHz}$）为单位，并四舍五入到四位有效数字。\n$$f_{s,\\text{max}} \\approx 3.08296335\\,\\text{kHz}$$\n四舍五入到四位有效数字，得到：\n$$f_{s,\\text{max}} = 3.083\\,\\text{kHz}$$",
            "answer": "$$\\boxed{3.083}$$"
        }
    ]
}
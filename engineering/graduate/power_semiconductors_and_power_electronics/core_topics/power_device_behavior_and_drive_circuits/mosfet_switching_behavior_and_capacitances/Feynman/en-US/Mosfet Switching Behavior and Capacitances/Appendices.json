{
    "hands_on_practices": [
        {
            "introduction": "The transition from theoretical understanding to practical circuit design begins with component selection. This exercise demystifies the process of selecting a gate driver by using the total gate charge ($Q_g$) provided in a MOSFET datasheet. You will learn to calculate the necessary average driver current to meet switching speed targets, paying special attention to the demanding current requirement during the Miller plateau, which governs the drain voltage transition speed .",
            "id": "3860866",
            "problem": "A Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) is driven from an external gate driver through negligible series resistance and negligible stray inductance. The datasheet specifies a total gate charge of $Q_{g}=80\\ \\mathrm{nC}$ measured at gate-to-source voltage $V_{GS}=10\\ \\mathrm{V}$ and drain-to-source voltage $V_{DS}=400\\ \\mathrm{V}$. The device must be turned fully on within a total turn-on time $t_{\\mathrm{on}}=50\\ \\mathrm{ns}$. For this device at $V_{DS}=400\\ \\mathrm{V}$, assume the gate-charge curve indicates that the Miller region (the gate-voltage plateau associated with drain-voltage transition due to the gate–drain capacitance, often called the Miller capacitance) accounts for a fraction $f_{m}=0.60$ of the total gate charge. To control the drain-voltage slew rate, the design requires that the Miller-region charge be delivered within $t_{m}=20\\ \\mathrm{ns}$ of the total turn-on time.\n\nStarting from fundamental definitions relating charge, current, and time, and using the physical meaning of datasheet gate-charge at a specified $V_{DS}$, determine the minimum average gate-driver current needed to meet $t_{\\mathrm{on}}$, identify the more stringent current requirement imposed by the Miller-region delivery within $t_{m}$, and then incorporate a design headroom factor $s=1.30$ to account for variability in device capacitances, temperature, and driver nonidealities.\n\nReport only the recommended driver current (including headroom) as a single value. Round your answer to four significant figures. Express the final answer in $\\mathrm{A}$.",
            "solution": "The problem is subjected to validation against the specified criteria.\n\n### Step 1: Extract Givens\n- Total gate charge: $Q_g = 80\\ \\mathrm{nC}$\n- Gate-to-source voltage for $Q_g$ measurement: $V_{GS} = 10\\ \\mathrm{V}$\n- Drain-to-source voltage for $Q_g$ measurement: $V_{DS} = 400\\ \\mathrm{V}$\n- Total turn-on time: $t_{\\mathrm{on}} = 50\\ \\mathrm{ns}$\n- Fraction of total gate charge attributed to the Miller region: $f_{m} = 0.60$\n- Required duration for the Miller-region transition: $t_{m} = 20\\ \\mathrm{ns}$\n- Design headroom factor: $s = 1.30$\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded:** The problem is based on fundamental principles of electrical circuits ($I = dQ/dt$) and established concepts in power electronics, specifically MOSFET switching characteristics (gate charge, Miller plateau, driver current). All concepts are standard and factually sound.\n- **Well-Posed:** The problem provides all necessary data to calculate a unique solution. The question is clear and the objective is specific. The use of gate charge ($Q_g$) to size a driver is a standard engineering practice, abstracting the complex non-linear behavior of MOSFET capacitances.\n- **Objective:** The problem is stated in precise, unbiased language. The parameters given are quantitative and typical for power MOSFETs.\n- **Other checks:** The problem is self-contained, consistent, and realistic. It is a formalizable problem directly relevant to the topic of power semiconductors. It is not trivial or ill-posed.\n\n### Step 3: Verdict and Action\nThe problem is deemed valid. A solution will be provided.\n\nThe fundamental relationship between current $I$, charge $Q$, and time $t$ is given by the definition of electric current:\n$$\nI(t) = \\frac{dQ(t)}{dt}\n$$\nFor a constant or average current $I_{\\text{avg}}$ required to deliver a total charge $\\Delta Q$ over a time interval $\\Delta t$, this relationship simplifies to:\n$$\nI_{\\text{avg}} = \\frac{\\Delta Q}{\\Delta t}\n$$\nWe must determine the required gate driver current based on two separate constraints: the total turn-on time and the specified duration for the Miller region.\n\nFirst, consider the constraint on the total turn-on time, $t_{\\mathrm{on}}$. The total charge that must be supplied by the gate driver to fully turn the MOSFET on is the total gate charge, $Q_g$. The minimum average gate current required to achieve this is:\n$$\nI_{\\text{g,on}} = \\frac{Q_g}{t_{\\mathrm{on}}}\n$$\nSubstituting the given values:\n$$\nQ_g = 80 \\times 10^{-9}\\ \\mathrm{C}\n$$\n$$\nt_{\\mathrm{on}} = 50 \\times 10^{-9}\\ \\mathrm{s}\n$$\nThe required average current is:\n$$\nI_{\\text{g,on}} = \\frac{80 \\times 10^{-9}\\ \\mathrm{C}}{50 \\times 10^{-9}\\ \\mathrm{s}} = \\frac{80}{50}\\ \\mathrm{A} = 1.6\\ \\mathrm{A}\n$$\n\nNext, we evaluate the constraint imposed by the Miller region. The Miller region corresponds to the phase of switching where the drain-to-source voltage transitions. The charge required for this phase is the Miller charge, here denoted as $Q_m$. The problem states that this charge is a fraction $f_m$ of the total gate charge $Q_g$.\n$$\nQ_m = f_m \\times Q_g\n$$\nSubstituting the given values:\n$$\nf_m = 0.60\n$$\n$$\nQ_m = 0.60 \\times (80 \\times 10^{-9}\\ \\mathrm{C}) = 48 \\times 10^{-9}\\ \\mathrm{C}\n$$\nThis charge must be delivered within the specified time $t_m$. The minimum average gate current required during this phase is:\n$$\nI_{\\text{g,m}} = \\frac{Q_m}{t_m}\n$$\nSubstituting the given values:\n$$\nt_m = 20 \\times 10^{-9}\\ \\mathrm{s}\n$$\nThe required average current for the Miller region is:\n$$\nI_{\\text{g,m}} = \\frac{48 \\times 10^{-9}\\ \\mathrm{C}}{20 \\times 10^{-9}\\ \\mathrm{s}} = \\frac{48}{20}\\ \\mathrm{A} = 2.4\\ \\mathrm{A}\n$$\n\nTo satisfy both constraints, the gate driver must be capable of supplying a current at least as large as the greater of the two calculated values. We must identify the more stringent requirement.\n$$\nI_{\\text{g,req}} = \\max(I_{\\text{g,on}}, I_{\\text{g,m}}) = \\max(1.6\\ \\mathrm{A}, 2.4\\ \\mathrm{A}) = 2.4\\ \\mathrm{A}\n$$\nThe Miller region constraint ($I_{\\text{g,m}} = 2.4\\ \\mathrm{A}$) is more demanding than the overall turn-on time constraint ($I_{\\text{g,on}} = 1.6\\ \\mathrm{A}$). Therefore, the minimal current capability of the driver must be $2.4\\ \\mathrm{A}$.\n\nFinally, the problem requires incorporating a design headroom factor $s = 1.30$ to account for various non-ideal effects and ensure robust operation. The recommended driver current, $I_{\\text{driver}}$, is the stringent current requirement multiplied by this factor.\n$$\nI_{\\text{driver}} = s \\times I_{\\text{g,req}}\n$$\nSubstituting the values:\n$$\nI_{\\text{driver}} = 1.30 \\times 2.4\\ \\mathrm{A} = 3.12\\ \\mathrm{A}\n$$\nThe problem requests the answer to be rounded to four significant figures.\n$$\nI_{\\text{driver}} = 3.120\\ \\mathrm{A}\n$$",
            "answer": "$$\n\\boxed{3.120}\n$$"
        },
        {
            "introduction": "Beyond gate drive considerations, a primary concern in power electronics is efficiency, which is directly impacted by switching losses. A significant portion of this loss originates from the energy stored in the MOSFET's non-linear output capacitance ($C_{oss}$) and dissipated during each switching cycle. This practice will guide you through the process of calculating the stored charge and energy by integrating a realistic, voltage-dependent capacitance model, a fundamental technique for quantifying hard-switching losses .",
            "id": "3860874",
            "problem": "A manufacturer reports the nonlinear output capacitance curve of a high-voltage Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) as a function of drain-to-source voltage $V$ by the empirical law\n$$\nC_{\\mathrm{oss}}(V)=\\frac{C_{0}}{\\left(1+\\frac{V}{V_{0}}\\right)^{1/2}},\n$$\nwith $C_{0}=2\\ \\mathrm{nF}$ and $V_{0}=50\\ \\mathrm{V}$. In a hard-switching application, the output capacitance is charged from $0$ to a bus voltage $V$ each cycle. Starting from the fundamental relations $dQ=C(V)\\,dV$ and $dE=v\\,dQ$ that define charge and electrostatic energy for a voltage-dependent capacitor, derive closed-form expressions for the total stored charge $Q_{\\mathrm{oss}}(V)$ and the stored energy $E_{\\mathrm{oss}}(V)$ when charging from $0$ to $V$. Then evaluate both at $V=400\\ \\mathrm{V}$. Express $Q_{\\mathrm{oss}}(400\\ \\mathrm{V})$ in microcoulombs and $E_{\\mathrm{oss}}(400\\ \\mathrm{V})$ in microjoules, and round both numerical results to four significant figures.",
            "solution": "The problem statement is first subjected to a rigorous validation process.\n\n### Step 1: Extract Givens\n- The voltage-dependent output capacitance is given by the empirical law: $C_{\\mathrm{oss}}(V) = \\frac{C_0}{(1 + \\frac{V}{V_0})^{1/2}}$.\n- The constant parameters are: $C_0 = 2 \\ \\mathrm{nF}$ and $V_0 = 50 \\ \\mathrm{V}$.\n- The charging process occurs from a voltage of $0$ to a final voltage $V$.\n- The fundamental relation between differential charge $dQ$, capacitance $C(V)$, and differential voltage $dV$ is $dQ = C(V) \\, dV$.\n- The fundamental relation between differential electrostatic energy $dE$, voltage $v$, and differential charge $dQ$ is $dE = v \\, dQ$.\n- The task is to derive closed-form expressions for the total stored charge $Q_{\\mathrm{oss}}(V)$ and the stored energy $E_{\\mathrm{oss}}(V)$.\n- The derived expressions are to be evaluated at a bus voltage of $V = 400 \\ \\mathrm{V}$.\n- The final numerical results for $Q_{\\mathrm{oss}}(400 \\ \\mathrm{V})$ and $E_{\\mathrm{oss}}(400 \\ \\mathrm{V})$ must be expressed in microcoulombs ($\\mu$C) and microjoules ($\\mu$J), respectively, and rounded to four significant figures.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientific Grounding**: The problem is scientifically sound. The provided formula for $C_{\\mathrm{oss}}(V)$ is a standard and physically justified model for the capacitance of a reverse-biased p-n junction, which dominates the output capacitance of a MOSFET. The exponent of $1/2$ corresponds to an abrupt junction model. The fundamental relations for charge and energy in a capacitor are correct. The given component values and voltage levels are realistic for high-voltage power electronics applications.\n- **Well-Posedness**: The problem is well-posed. It provides all necessary information—the functional form of the capacitance and the initial/final conditions for charging—to uniquely determine the stored charge and energy through integration. The requested integrations are well-defined.\n- **Objectivity**: The problem is stated in precise, objective language, free of any subjective or ambiguous terms.\n\n### Step 3: Verdict and Action\nThe problem is deemed valid as it is scientifically grounded, well-posed, and objective. A complete solution will be provided.\n\n### Derivation of Stored Charge $Q_{\\mathrm{oss}}(V)$\nThe total charge $Q_{\\mathrm{oss}}(V)$ stored in the output capacitance when charging from a voltage of $0$ to $V$ is found by integrating the differential charge relation $dQ = C_{\\mathrm{oss}}(v) \\, dv$ over the specified voltage range. We use a dummy variable of integration $v'$ to distinguish it from the upper limit $V$.\n$$ Q_{\\mathrm{oss}}(V) = \\int_{0}^{V} C_{\\mathrm{oss}}(v') \\, dv' $$\nSubstituting the given expression for $C_{\\mathrm{oss}}(v')$:\n$$ Q_{\\mathrm{oss}}(V) = \\int_{0}^{V} \\frac{C_0}{\\left(1 + \\frac{v'}{V_0}\\right)^{1/2}} \\, dv' $$\nTo solve this integral, we perform a substitution. Let $u = 1 + \\frac{v'}{V_0}$. Then, the differential is $du = \\frac{1}{V_0} \\, dv'$, which implies $dv' = V_0 \\, du$. The limits of integration for $u$ are:\n- When $v' = 0$, $u = 1 + \\frac{0}{V_0} = 1$.\n- When $v' = V$, $u = 1 + \\frac{V}{V_0}$.\n\nThe integral transforms to:\n$$ Q_{\\mathrm{oss}}(V) = \\int_{1}^{1+V/V_0} \\frac{C_0}{u^{1/2}} (V_0 \\, du) = C_0 V_0 \\int_{1}^{1+V/V_0} u^{-1/2} \\, du $$\nThe integral of $u^{-1/2}$ is $2u^{1/2}$. Evaluating the definite integral:\n$$ Q_{\\mathrm{oss}}(V) = C_0 V_0 \\left[ 2u^{1/2} \\right]_{1}^{1+V/V_0} = 2C_0 V_0 \\left( \\left(1 + \\frac{V}{V_0}\\right)^{1/2} - 1^{1/2} \\right) $$\nThe closed-form expression for the stored charge is:\n$$ Q_{\\mathrm{oss}}(V) = 2C_0 V_0 \\left( \\sqrt{1 + \\frac{V}{V_0}} - 1 \\right) $$\n\n### Derivation of Stored Energy $E_{\\mathrm{oss}}(V)$\nThe total energy $E_{\\mathrm{oss}}(V)$ stored in the output capacitance is found by integrating the differential energy relation $dE = v \\, dQ$. Using $dQ = C_{\\mathrm{oss}}(v) \\, dv$, we have $dE = v \\, C_{\\mathrm{oss}}(v) \\, dv$. Integrating from $0$ to $V$:\n$$ E_{\\mathrm{oss}}(V) = \\int_{0}^{V} v' \\, C_{\\mathrm{oss}}(v') \\, dv' $$\nSubstituting the expression for $C_{\\mathrm{oss}}(v')$:\n$$ E_{\\mathrm{oss}}(V) = \\int_{0}^{V} v' \\frac{C_0}{\\left(1 + \\frac{v'}{V_0}\\right)^{1/2}} \\, dv' $$\nUsing the same substitution as before, $u = 1 + \\frac{v'}{V_0}$, we have $v' = V_0(u - 1)$ and $dv' = V_0 \\, du$. The limits of integration remain $u=1$ to $u=1+V/V_0$.\n$$ E_{\\mathrm{oss}}(V) = \\int_{1}^{1+V/V_0} V_0(u - 1) \\frac{C_0}{u^{1/2}} (V_0 \\, du) = C_0 V_0^2 \\int_{1}^{1+V/V_0} \\frac{u-1}{u^{1/2}} \\, du $$\nThe integrand can be split into two terms: $\\frac{u-1}{u^{1/2}} = u^{1/2} - u^{-1/2}$.\n$$ E_{\\mathrm{oss}}(V) = C_0 V_0^2 \\int_{1}^{1+V/V_0} (u^{1/2} - u^{-1/2}) \\, du $$\nIntegrating term by term:\n$$ E_{\\mathrm{oss}}(V) = C_0 V_0^2 \\left[ \\frac{u^{3/2}}{3/2} - \\frac{u^{1/2}}{1/2} \\right]_{1}^{1+V/V_0} = C_0 V_0^2 \\left[ \\frac{2}{3}u^{3/2} - 2u^{1/2} \\right]_{1}^{1+V/V_0} $$\nEvaluating at the limits:\n$$ E_{\\mathrm{oss}}(V) = C_0 V_0^2 \\left( \\left[ \\frac{2}{3}\\left(1 + \\frac{V}{V_0}\\right)^{3/2} - 2\\left(1 + \\frac{V}{V_0}\\right)^{1/2} \\right] - \\left[ \\frac{2}{3}(1)^{3/2} - 2(1)^{1/2} \\right] \\right) $$\n$$ E_{\\mathrm{oss}}(V) = C_0 V_0^2 \\left( \\frac{2}{3}\\left(1 + \\frac{V}{V_0}\\right)^{3/2} - 2\\sqrt{1 + \\frac{V}{V_0}} - \\left(\\frac{2}{3} - 2\\right) \\right) $$\nThe closed-form expression for the stored energy is:\n$$ E_{\\mathrm{oss}}(V) = C_0 V_0^2 \\left( \\frac{2}{3}\\left(1 + \\frac{V}{V_0}\\right)^{3/2} - 2\\sqrt{1 + \\frac{V}{V_0}} + \\frac{4}{3} \\right) $$\n\n### Numerical Evaluation\nWe are given $C_0 = 2 \\ \\mathrm{nF} = 2 \\times 10^{-9} \\ \\mathrm{F}$, $V_0 = 50 \\ \\mathrm{V}$, and we evaluate at $V = 400 \\ \\mathrm{V}$.\nFirst, we calculate the dimensionless ratio:\n$$ \\frac{V}{V_0} = \\frac{400 \\ \\mathrm{V}}{50 \\ \\mathrm{V}} = 8 $$\nThen we compute the terms that appear in both expressions:\n$$ 1 + \\frac{V}{V_0} = 1 + 8 = 9 $$\n$$ \\sqrt{1 + \\frac{V}{V_0}} = \\sqrt{9} = 3 $$\n$$ \\left(1 + \\frac{V}{V_0}\\right)^{3/2} = 9^{3/2} = (9^{1/2})^3 = 3^3 = 27 $$\n\n#### Evaluation of $Q_{\\mathrm{oss}}(400 \\ \\mathrm{V})$\n$$ Q_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = 2(2 \\times 10^{-9} \\ \\mathrm{F})(50 \\ \\mathrm{V}) (3 - 1) $$\n$$ Q_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = 2(100 \\times 10^{-9} \\ \\mathrm{C}) (2) = 400 \\times 10^{-9} \\ \\mathrm{C} = 4 \\times 10^{-7} \\ \\mathrm{C} $$\nTo express this in microcoulombs ($1 \\ \\mathrm{\\mu C} = 10^{-6} \\ \\mathrm{C}$):\n$$ Q_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = 0.4 \\times 10^{-6} \\ \\mathrm{C} = 0.4 \\ \\mathrm{\\mu C} $$\nRounding to four significant figures, this is $0.4000 \\ \\mathrm{\\mu C}$.\n\n#### Evaluation of $E_{\\mathrm{oss}}(400 \\ \\mathrm{V})$\n$$ E_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = (2 \\times 10^{-9} \\ \\mathrm{F})(50 \\ \\mathrm{V})^2 \\left( \\frac{2}{3}(27) - 2(3) + \\frac{4}{3} \\right) $$\n$$ E_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = (2 \\times 10^{-9})(2500) \\left( 18 - 6 + \\frac{4}{3} \\right) $$\n$$ E_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = (5000 \\times 10^{-9}) \\left( 12 + \\frac{4}{3} \\right) = (5 \\times 10^{-6}) \\left( \\frac{36+4}{3} \\right) $$\n$$ E_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = 5 \\times 10^{-6} \\left( \\frac{40}{3} \\right) \\ \\mathrm{J} = \\frac{200}{3} \\times 10^{-6} \\ \\mathrm{J} $$\nTo express this in microjoules ($1 \\ \\mathrm{\\mu J} = 10^{-6} \\ \\mathrm{J}$):\n$$ E_{\\mathrm{oss}}(400 \\ \\mathrm{V}) = \\frac{200}{3} \\ \\mathrm{\\mu J} \\approx 66.666... \\ \\mathrm{\\mu J} $$\nRounding to four significant figures, this is $66.67 \\ \\mathrm{\\mu J}$.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.4000 & 66.67 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "Accurate simulation is key to predicting and optimizing the performance of power converters before prototyping. This final exercise explores the impact of device modeling on the prediction of dynamic switching behavior, specifically the drain voltage slew rate ($dv/dt$). By comparing a simplistic linear capacitance model with a more sophisticated charge-based macro-model, you will discover why accounting for capacitance non-linearity is critical for correctly simulating high-speed switching events .",
            "id": "3860875",
            "problem": "You are given a scenario involving a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) in a hard-switching turn-on event into a constant current load, with a gate driver modeled as an ideal voltage step source in series with a gate resistor. The objective is to compare how the Simulation Program with Integrated Circuit Emphasis (SPICE) level-1 MOSFET model and a charge-based power MOSFET macro-model predict the dependency of the drain-node voltage slew rate $dv_d/dt$ on gate resistance $R_g$ and gate-to-drain capacitance $C_{gd}$ during the drain voltage fall dominated by the Miller plateau.\n\nAssume the following physically consistent and widely used modeling assumptions:\n\n- The gate driver applies an ideal step from $V_{\\text{drive}}$ to the MOSFET gate through series resistance $R_g$.\n- The load current $I_{\\text{load}}$ is constant and sufficiently high to force a Miller plateau at the gate during the drain fall. The source node is at $0$ reference potential.\n- The SPICE level-1 channel current in strong inversion saturation is modeled by $I_D = k \\left(V_{GS} - V_{\\text{th}}\\right)^2$ with $V_{DS}$ large enough to satisfy saturation. During the Miller plateau, $I_D \\approx I_{\\text{load}}$ fixes an approximate plateau voltage $V_{\\text{MP}}$ by $I_{\\text{load}} = k \\left(V_{\\text{MP}} - V_{\\text{th}}\\right)^2$.\n- In the drain-fall interval dominated by the Miller effect, the gate voltage $V_G$ is approximately clamped at $V_{\\text{MP}}$, the gate current is $I_G = \\left(V_{\\text{drive}} - V_{\\text{MP}}\\right)/R_g$, and the drain-node motion is governed by gate-drain charge flow according to the fundamental law $i = dQ/dt$.\n- For the SPICE level-1 capacitance abstraction, treat $Q_{gd}$ as linear in $V_D$ with a constant $C_{gd}$.\n- For the charge-based macro-model, use a non-linear gate-drain charge function $Q_{gd}(V_D) = C_{gd0}\\,V_{\\text{ref}}\\,\\ln\\!\\left(1 + \\frac{V_D}{V_{\\text{ref}}}\\right)$, which yields a voltage-dependent incremental capacitance $C_{gd,\\text{eff}}(V_D) = \\frac{dQ_{gd}}{dV_D} = C_{gd0}\\,\\frac{V_{\\text{ref}}}{V_{\\text{ref}} + V_D}$ at the operating $V_D$; this captures the common reduction of reverse transfer capacitance at high drain voltage in power MOSFETs.\n- During the initial drain fall, evaluate $dv_D/dt$ at $V_D \\approx V_{DD}$ (the bus voltage) where the Miller effect is strongest.\n\nStarting from the fundamental relationships $i = dQ/dt$ and the defined models, derive expressions for $dv_D/dt$ for both modeling approaches in terms of the given parameters. Then implement a program that computes, for each test case, the ratio of the macro-model prediction to the SPICE level-1 prediction for the initial drain voltage slew rate,\n$$\nr = \\frac{\\left(dv_D/dt\\right)_{\\text{macro}}}{\\left(dv_D/dt\\right)_{\\text{level-1}}},\n$$\nand outputs these ratios.\n\nUse the following fixed parameters for all test cases unless otherwise specified in an individual case:\n- Bus voltage $V_{DD} = 400\\ \\mathrm{V}$,\n- Gate drive level $V_{\\text{drive}} = 10\\ \\mathrm{V}$,\n- Threshold voltage $V_{\\text{th}} = 3\\ \\mathrm{V}$,\n- Level-1 transconductance parameter $k = 5\\ \\mathrm{A}/\\mathrm{V}^2$,\n- Load current $I_{\\text{load}} = 20\\ \\mathrm{A}$,\n- Base gate-drain capacitance $C_{gd0} = 200 \\times 10^{-12}\\ \\mathrm{F}$ unless overridden,\n- Reference voltage $V_{\\text{ref}}$ in the macro-model as specified per test case.\n\nYour program must compute $V_{\\text{MP}}$ from $I_{\\text{load}} = k \\left(V_{\\text{MP}} - V_{\\text{th}}\\right)^2$ and then evaluate the initial $dv_D/dt$ for the SPICE level-1 model and the macro-model at $V_D = V_{DD}$ using the above physical assumptions.\n\nPhysical units: Express any intermediate $dv_D/dt$ in $\\mathrm{V/s}$ internally. The final reported ratio $r$ is dimensionless.\n\nTest suite:\n- Case 1 (baseline): $R_g = 5\\ \\Omega$, $C_{gd0} = 200 \\times 10^{-12}\\ \\mathrm{F}$, $V_{\\text{ref}} = 50\\ \\mathrm{V}$.\n- Case 2 (small gate resistance): $R_g = 0.5\\ \\Omega$, $C_{gd0} = 200 \\times 10^{-12}\\ \\mathrm{F}$, $V_{\\text{ref}} = 50\\ \\mathrm{V}$.\n- Case 3 (large gate resistance): $R_g = 25\\ \\Omega$, $C_{gd0} = 200 \\times 10^{-12}\\ \\mathrm{F}$, $V_{\\text{ref}} = 50\\ \\mathrm{V}$.\n- Case 4 (small base $C_{gd}$): $R_g = 5\\ \\Omega$, $C_{gd0} = 50 \\times 10^{-12}\\ \\mathrm{F}$, $V_{\\text{ref}} = 50\\ \\mathrm{V}$.\n- Case 5 (moderate nonlinearity weakening): $R_g = 5\\ \\Omega$, $C_{gd0} = 200 \\times 10^{-12}\\ \\mathrm{F}$, $V_{\\text{ref}} = 200\\ \\mathrm{V}$.\n- Case 6 (weak nonlinearity): $R_g = 5\\ \\Omega$, $C_{gd0} = 200 \\times 10^{-12}\\ \\mathrm{F}$, $V_{\\text{ref}} = 1000\\ \\mathrm{V}$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., \"[r1,r2,r3,r4,r5,r6]\"), where each $r_i$ is a floating-point number representing the ratio for the corresponding test case.",
            "solution": "The problem requires a comparative analysis of two different models for the gate-drain capacitance of a MOSFET during a hard-switching turn-on event. We must derive the initial drain voltage slew rate, $dv_D/dt$, for both the SPICE level-1 model and a charge-based macro-model, and then find the ratio of their predictions.\n\nThe analysis focuses on the Miller plateau phase of the turn-on transition. During this interval, the gate-source voltage is approximately constant at the Miller plateau voltage, $V_{GS} \\approx V_{\\text{MP}}$, which is just sufficient to conduct the full load current, $I_{\\text{load}}$. All gate current provided by the driver is therefore channeled into changing the charge on the gate-drain capacitance, $C_{gd}$.\n\nFirst, we determine the Miller plateau voltage, $V_{\\text{MP}}$. The problem states that the SPICE level-1 saturation current is $I_D = k(V_{GS} - V_{\\text{th}})^2$. During the plateau, $V_{GS} = V_{\\text{MP}}$ and the channel conducts the load current, $I_D = I_{\\text{load}}$.\n$$I_{\\text{load}} = k(V_{\\text{MP}} - V_{\\text{th}})^2$$\nSolving for $V_{\\text{MP}}$ (and taking the positive root since $V_{\\text{MP}} > V_{\\text{th}}$ for the transistor to be on):\n$$V_{\\text{MP}} = V_{\\text{th}} + \\sqrt{\\frac{I_{\\text{load}}}{k}}$$\nUsing the provided fixed parameters, $V_{\\text{th}} = 3\\ \\mathrm{V}$, $I_{\\text{load}} = 20\\ \\mathrm{A}$, and $k = 5\\ \\mathrm{A}/\\mathrm{V}^2$:\n$$V_{\\text{MP}} = 3\\ \\mathrm{V} + \\sqrt{\\frac{20\\ \\mathrm{A}}{5\\ \\mathrm{A}/\\mathrm{V}^2}} = 3\\ \\mathrm{V} + \\sqrt{4\\ \\mathrm{V}^2} = 3\\ \\mathrm{V} + 2\\ \\mathrm{V} = 5\\ \\mathrm{V}$$\n\nNext, we establish the gate current, $I_G$. The gate is driven by a voltage source $V_{\\text{drive}}$ through a resistor $R_g$. Since the gate voltage is clamped at $V_{\\text{MP}}$ during the Miller plateau, the gate current is constant:\n$$I_G = \\frac{V_{\\text{drive}} - V_{\\text{MP}}}{R_g}$$\nSubstituting $V_{\\text{drive}} = 10\\ \\mathrm{V}$ and $V_{\\text{MP}} = 5\\ \\mathrm{V}$:\n$$I_G = \\frac{10\\ \\mathrm{V} - 5\\ \\mathrm{V}}{R_g} = \\frac{5\\ \\mathrm{V}}{R_g}$$\n\nThe fundamental relationship governing the drain voltage slew rate is based on the displacement current through the gate-drain capacitance. The gate current $I_G$ charges the effective gate-drain capacitance $C_{gd,\\text{eff}}$. The voltage across this capacitance is $V_{GD} = V_G - V_D$. The current is given by $I_G = \\frac{dQ_{gd}}{dt}$. Using the chain rule, and noting that $V_G = V_{\\text{MP}}$ is constant:\n$$I_G = \\frac{dQ_{gd}}{dV_{GD}} \\frac{dV_{GD}}{dt} = C_{gd,\\text{eff}} \\frac{d(V_{\\text{MP}} - V_D)}{dt} = -C_{gd,\\text{eff}} \\frac{dV_D}{dt}$$\nThis yields the expression for the drain voltage slew rate:\n$$\\frac{dV_D}{dt} = - \\frac{I_G}{C_{gd,\\text{eff}}}$$\nThe negative sign correctly indicates that a positive gate current causes the drain voltage to fall.\n\nNow, we apply this general formula to the two specified models.\n\n**1. SPICE Level-1 Model**\nThis model assumes a constant gate-drain capacitance, $C_{gd}$. For a fair comparison with the macro-model, we use the base capacitance value, so $C_{gd,\\text{eff}} = C_{gd0}$.\nThe slew rate is therefore constant throughout the drain voltage fall:\n$$\\left(\\frac{dV_D}{dt}\\right)_{\\text{level-1}} = - \\frac{I_G}{C_{gd0}} = - \\frac{V_{\\text{drive}} - V_{\\text{MP}}}{R_g C_{gd0}}$$\n\n**2. Charge-based Macro-Model**\nThis model uses a voltage-dependent effective capacitance:\n$$C_{gd,\\text{eff}}(V_D) = C_{gd0} \\frac{V_{\\text{ref}}}{V_{\\text{ref}} + V_D}$$\nThe problem asks for the *initial* slew rate, which occurs at the beginning of the drain voltage fall when $V_D \\approx V_{DD}$. We evaluate the capacitance at this voltage:\n$$C_{gd,\\text{eff}}(V_{DD}) = C_{gd0} \\frac{V_{\\text{ref}}}{V_{\\text{ref}} + V_{DD}}$$\nThe corresponding initial slew rate is:\n$$\\left(\\frac{dV_D}{dt}\\right)_{\\text{macro}} = - \\frac{I_G}{C_{gd,\\text{eff}}(V_{DD})} = - \\frac{I_G}{C_{gd0} \\frac{V_{\\text{ref}}}{V_{\\text{ref}} + V_{DD}}}$$\nRearranging this gives:\n$$\\left(\\frac{dV_D}{dt}\\right)_{\\text{macro}} = - \\frac{I_G}{C_{gd0}} \\left(\\frac{V_{\\text{ref}} + V_{DD}}{V_{\\text{ref}}}\\right) = - \\frac{I_G}{C_{gd0}} \\left(1 + \\frac{V_{DD}}{V_{\\text{ref}}}\\right)$$\n\n**3. Ratio of Predictions**\nWe now compute the required ratio, $r$:\n$$r = \\frac{\\left(dV_D/dt\\right)_{\\text{macro}}}{\\left(dV_D/dt\\right)_{\\text{level-1}}} = \\frac{- \\frac{I_G}{C_{gd0}} \\left(1 + \\frac{V_{DD}}{V_{\\text{ref}}}\\right)}{- \\frac{I_G}{C_{gd0}}}$$\nThe term $-I_G/C_{gd0}$ cancels, leading to a remarkably simple result:\n$$r = 1 + \\frac{V_{DD}}{V_{\\text{ref}}}$$\nThis result reveals a key insight: the ratio of the predicted initial slew rates is independent of the gate resistance $R_g$, the base capacitance $C_{gd0}$, and all other parameters that determine the gate current $I_G$. The ratio depends only on the bus voltage $V_{DD}$ and the macro-model's nonlinearity parameter $V_{\\text{ref}}$. Physically, this occurs because both slew rate predictions are scaled identically by the gate current $I_G$ and base capacitance $C_{gd0}$, making their ratio dependent only on the factor that distinguishes the models: the voltage-dependent term $\\left(1 + V_{DD}/V_{\\text{ref}}\\right)$. The macro-model predicts a faster slew rate (larger magnitude, $r > 1$) because the effective capacitance at high $V_{DD}$ is lower than the constant $C_{gd0}$ assumed by the level-1 model.\n\nThe program will implement this final formula for the test suite. For a given test case, only the parameter $V_{\\text{ref}}$ is needed, along with the fixed parameter $V_{DD} = 400\\ \\mathrm{V}$.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the ratio of drain voltage slew rate predictions between a charge-based\n    macro-model and a SPICE level-1 model for a MOSFET turn-on event.\n    \"\"\"\n\n    # Define the fixed bus voltage as per the problem statement.\n    V_DD = 400.0  # Bus voltage in Volts\n\n    # Define the test cases. Each case is a tuple of (Rg, Cgd0, V_ref), though only\n    # V_ref is needed for the final ratio calculation. The other parameters are\n    # included for clarity and correspondence with the problem statement.\n    # (R_g [Ohm], C_gd0 [F], V_ref [V])\n    test_cases = [\n        (5.0, 200e-12, 50.0),    # Case 1 (baseline)\n        (0.5, 200e-12, 50.0),   # Case 2 (small gate resistance)\n        (25.0, 200e-12, 50.0),  # Case 3 (large gate resistance)\n        (5.0, 50e-12, 50.0),    # Case 4 (small base Cgd)\n        (5.0, 200e-12, 200.0),  # Case 5 (moderate nonlinearity weakening)\n        (5.0, 200e-12, 1000.0)  # Case 6 (weak nonlinearity)\n    ]\n\n    results = []\n    \n    # As derived in the solution, the ratio 'r' simplifies to a formula that only\n    # depends on V_DD and V_ref.\n    # r = (dv_D/dt)_macro / (dv_D/dt)_level-1 = 1 + V_DD / V_ref\n    for case in test_cases:\n        # Unpack the parameters for the current case.\n        # Rg and Cgd0 do not influence the final ratio.\n        _Rg, _Cgd0, V_ref = case\n        \n        # Calculate the ratio using the derived formula.\n        r = 1.0 + V_DD / V_ref\n        \n        results.append(r)\n\n    # The final print statement must produce a single line containing a\n    # comma-separated list of results enclosed in square brackets.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
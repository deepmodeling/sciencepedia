{
    "hands_on_practices": [
        {
            "introduction": "仿真是在逆变器设计中不可或可缺的工具，但建立解析模型以交叉验证仿真结果同样至关重要。本练习旨在培养分析计算关键性能指标的能力：我们期望得到的基波输出电压，以及不期望存在的高频开关纹波。通过这种方式，我们可以更深刻地理解并设计核心的LC输出滤波器。",
            "id": "3878722",
            "problem": "一个采用正弦脉宽调制（SPWM）的单相全桥电压源逆变器，通过一个由串联电感和并联电容组成的二阶低通滤波器，在电阻性负载上合成一个低频正弦电压。该全桥工作在双极性SPWM模式下，其中两个桥臂被驱动，使得负载两端的输出节点根据正弦参考信号与高频三角载波比较结果的符号，在$+V_{\\mathrm{dc}}$和$-V_{\\mathrm{dc}}$之间交替。该低通滤波器由一个电感值为$L$的串联电感，后接一个与电阻值为$R$的电阻性负载并联的电容值为$C$的并联电容组成。正弦参考信号的频率为$f_1$，三角载波的开关频率为$f_s$。调制指数$m$定义为正弦参考信号的峰值与三角载波峰值之比。直流（DC）母线电压为$V_{\\mathrm{dc}}$。\n\n通过设计一个解析计算方法，为该逆变器及其给定滤波器和负载的仿真设置指定一个数学上可靠的交叉验证。该计算需包括：\n1. 频率为$f_1$时负载电压的基波（一次谐波）均方根（RMS）幅值。\n2. 在基波过零点附近，由于高频开关产生的负载上最坏情况下的峰峰值开关纹波电压，此时滤波器承受最大的脉动电感电压。\n\n推导必须仅从基本定律和核心定义出发：电感与电压的关系$v_L = L \\, \\mathrm{d}i_L/\\mathrm{d}t$，电容与电流的关系$i_C = C \\, \\mathrm{d}v_C/\\mathrm{d}t$，线性时不变串并联阻抗合成，以及全桥双极性工作模式下SPWM开关函数定义为参考信号与载波的符号比较。请勿使用未从这些基础推导出的简便公式。分析必须将滤波器视为线性的，并将SPWM源波形视为一个分段恒定的两电平过程，其在开关周期内的平均值等于基波分量的调制正弦波。纹波分析必须捕捉基波过零点附近的最坏情况开关纹波，使用电感-电容关系来计算一个开关周期内的三角形电感电流纹波和由此产生的电容电压纹波。\n\n您的程序必须为以下测试套件实现解析计算。对于每个案例，计算两个数值：\n- 负载基波电压的均方根值（单位：伏特），四舍五入到六位小数。\n- 最坏情况下峰峰值纹波电压（单位：伏特），四舍五入到六位小数。\n\n使用以下测试案例，所有量均以指定单位表示：\n- 案例 1：$V_{\\mathrm{dc}} = 400\\,\\mathrm{V}$，$m = 0.80$，$f_1 = 50\\,\\mathrm{Hz}$，$f_s = 10{,}000\\,\\mathrm{Hz}$，$L = 5\\,\\mathrm{mH}$，$C = 20\\,\\mathrm{\\mu F}$，$R = 20\\,\\Omega$。\n- 案例 2：$V_{\\mathrm{dc}} = 450\\,\\mathrm{V}$，$m = 0.95$，$f_1 = 60\\,\\mathrm{Hz}$，$f_s = 20{,}000\\,\\mathrm{Hz}$，$L = 3\\,\\mathrm{mH}$，$C = 10\\,\\mathrm{\\mu F}$，$R = 10\\,\\Omega$。\n- 案例 3：$V_{\\mathrm{dc}} = 300\\,\\mathrm{V}$，$m = 0.10$，$f_1 = 50\\,\\mathrm{Hz}$，$f_s = 5{,}000\\,\\mathrm{Hz}$，$L = 10\\,\\mathrm{mH}$，$C = 50\\,\\mathrm{\\mu F}$，$R = 100\\,\\Omega$。\n- 案例 4：$V_{\\mathrm{dc}} = 350\\,\\mathrm{V}$，$m = 0.70$，$f_1 = 50\\,\\mathrm{Hz}$，$f_s = 5{,}000\\,\\mathrm{Hz}$，$L = 1\\,\\mathrm{mH}$，$C = 5\\,\\mathrm{\\mu F}$，$R = 30\\,\\Omega$。\n- 案例 5：$V_{\\mathrm{dc}} = 380\\,\\mathrm{V}$，$m = 0.90$，$f_1 = 50\\,\\mathrm{Hz}$，$f_s = 100{,}000\\,\\mathrm{Hz}$，$L = 8\\,\\mathrm{mH}$，$C = 100\\,\\mathrm{\\mu F}$，$R = 15\\,\\Omega$。\n\n您的程序必须生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。每个测试案例的结果必须是一个包含两个浮点数的列表，格式为 $[\\text{基波均方根电压}, \\text{峰峰值纹波电压}]$，例如 $[[x_1,y_1],[x_2,y_2],\\dots]$。如果需要，角度必须以弧度处理，尽管此处只提供了以赫兹为单位的频率。所有输出都必须以伏特（$\\mathrm{V}$）表示，并四舍五入到六位小数。",
            "solution": "问题陈述被评估为**有效**。它具有科学依据、提法明确且客观。为单相全桥SPWM逆变器及其LC-R负载提供了所有必需的参数。该问题要求对两个标准性能指标进行解析计算：负载电压基波分量的均方根值和负载上最坏情况下的峰峰值开关纹波电压。对推导的约束——要求从电路理论和SPWM的基本原理出发——是清晰的，并且适用于严谨的工程分析。所提供的元件和操作值在物理上是现实的。该问题符合一个有效科学问题的所有标准。\n\n按要求，解答分为两部分。\n\n**1. 基波均方根负载电压 ($V_{load,1,RMS}$)**\n\n分析从全桥逆变器的输出电压 $v_{inv}(t)$ 开始。在双极性正弦脉宽调制（SPWM）下，逆变器的输出电压在 $+V_{\\mathrm{dc}}$ 和 $-V_{\\mathrm{dc}}$ 之间切换。当在一个开关周期内取平均时，该开关波形的基波分量与参考信号具有相同的正弦形状。对于调制指数为 $m$ 的正弦参考信号，逆变器输出电压的基波分量 $v_{inv,1}(t)$ 由下式给出：\n$$v_{inv,1}(t) = m V_{\\mathrm{dc}} \\sin(\\omega_1 t)$$\n其中 $\\omega_1 = 2\\pi f_1$ 是基波的角频率。\n\n该基波电压的峰值幅值为 $V_{inv,1,peak} = m V_{\\mathrm{dc}}$。相应的均方根（RMS）值为：\n$$V_{inv,1,RMS} = \\frac{V_{inv,1,peak}}{\\sqrt{2}} = \\frac{m V_{\\mathrm{dc}}}{\\sqrt{2}}$$\n该电压作为二阶LC低通滤波器的输入。负载电压 $V_{load,1}$ 是电容 $C$ 和电阻 $R$ 并联组合两端的电压。我们使用频域分析来确定滤波器在基波频率 $\\omega_1$ 处的影响。\n\n滤波器各元件在 $\\omega_1$ 处的阻抗为：\n- 电感：$Z_L = j\\omega_1 L$\n- 电容：$Z_C = \\frac{1}{j\\omega_1 C}$\n- 电阻：$Z_R = R$\n\n滤波器构成一个分压器。并联电容-电阻支路的阻抗为：\n$$Z_{CR} = \\frac{Z_C Z_R}{Z_C + Z_R} = \\frac{\\frac{1}{j\\omega_1 C} R}{\\frac{1}{j\\omega_1 C} + R} = \\frac{R}{1 + j\\omega_1 RC}$$\n滤波器的传递函数 $H(j\\omega_1)$ 是负载电压与逆变器输出电压之比：\n$$H(j\\omega_1) = \\frac{V_{load,1}}{V_{inv,1}} = \\frac{Z_{CR}}{Z_L + Z_{CR}}$$\n代入阻抗表达式：\n$$H(j\\omega_1) = \\frac{\\frac{1}{\\frac{1}{R} + j\\omega_1 C}}{j\\omega_1 L + \\frac{1}{\\frac{1}{R} + j\\omega_1 C}} = \\frac{1}{j\\omega_1 L \\left(\\frac{1}{R} + j\\omega_1 C\\right) + 1} = \\frac{1}{1 - \\omega_1^2 LC + j\\frac{\\omega_1 L}{R}}$$\n该传递函数的幅值 $|H(j\\omega_1)|$ 决定了输出电压和输入电压的幅值之比：\n$$|H(j\\omega_1)| = \\frac{1}{\\sqrt{\\left(1 - \\omega_1^2 LC\\right)^2 + \\left(\\frac{\\omega_1 L}{R}\\right)^2}}$$\n因此，基波负载电压的均方根值是输入电压的均方根值乘以传递函数的幅值：\n$$V_{load,1,RMS} = V_{inv,1,RMS} \\cdot |H(j\\omega_1)| = \\frac{m V_{\\mathrm{dc}}}{\\sqrt{2}} \\frac{1}{\\sqrt{\\left(1 - (2\\pi f_1)^2 LC\\right)^2 + \\left(\\frac{2\\pi f_1 L}{R}\\right)^2}}$$\n\n**2. 最坏情况峰峰值开关纹波电压 ($\\Delta V_{load,pp}$)**\n\n负载电压上的最坏情况开关纹波发生在输出电压的基波分量接近其过零点时。在这些时刻，负载电压 $v_{load}(t)$ 近似为零。根据基尔霍夫电压定律，电感两端的电压 $v_L(t)$ 为：$v_L(t) = v_{inv}(t) - v_{load}(t)$。由于 $v_{load}(t) \\approx 0$，逆变器的全部输出电压 $v_{inv}(t)$ 都施加在电感上，即 $v_L(t) \\approx v_{inv}(t)$。\n\n在基波过零点附近，正弦参考信号接近于零，导致占空比接近 $50\\%$。逆变器的输出电压 $v_{inv}(t)$ 是一个频率为 $f_s = 1/T_s$ 的方波，在 $+V_{\\mathrm{dc}}$（持续约 $T_s/2$）和 $-V_{\\mathrm{dc}}$（持续约 $T_s/2$）之间交替。\n\n根据电感电压-电流关系 $v_L = L \\frac{di_L}{dt}$，电感电流的变化量为 $\\Delta i_L = \\frac{1}{L} \\int v_L dt$。在开关周期的前半部分，由于 $v_L \\approx +V_{\\mathrm{dc}}$，电流线性上升。总的峰峰值电感电流纹波由这半个周期内的变化量决定：\n$$\\Delta i_{L,pp} = \\frac{1}{L} \\int_0^{T_s/2} V_{\\mathrm{dc}} dt = \\frac{V_{\\mathrm{dc}} T_s}{2L} = \\frac{V_{\\mathrm{dc}}}{2Lf_s}$$\n这个高频三角形电流纹波从电感流入电容 $C$ 和电阻 $R$ 的并联组合。在高的开关频率 $f_s$ 下，电容的阻抗 $|Z_C| = 1/(2\\pi f_s C)$ 通常远小于电阻 $R$。因此，可以做一个有效的近似，即假设几乎所有的纹波电流都流入电容，即 $i_{C,ripple}(t) \\approx i_{L,ripple}(t)$。\n\n电容两端的电压（即负载电压）由 $v_C(t) = \\frac{1}{C} \\int i_C(t) dt$ 给出。峰峰值电压纹波 $\\Delta V_{load,pp}$ 是电容电压在其最小值和最大值之间的变化量。当电容纹波电流过零时，出现这些极值。纹波电流 $i_{C,ripple}(t)$ 是一个三角波。从最小值到最大值的电压变化可以通过对电流为正的区间进行积分来找到。该区间的持续时间为 $T_s/2$（例如，从 $t=T_s/4$ 到 $t=3T_s/4$），电流波形是一个底为 $T_s/2$、高等于纹波电流峰值 $\\Delta i_{L,pp}/2$ 的三角形。\n\n在这个电流正半周期内累积的电荷 $\\Delta Q$ 是这个三角形的面积：\n$$\\Delta Q = \\frac{1}{2} \\times \\text{base} \\times \\text{height} = \\frac{1}{2} \\times \\frac{T_s}{2} \\times \\frac{\\Delta i_{L,pp}}{2} = \\frac{T_s \\Delta i_{L,pp}}{8}$$\n峰峰值纹波电压是这个累积电荷除以电容：\n$$\\Delta V_{load,pp} = \\frac{\\Delta Q}{C} = \\frac{T_s \\Delta i_{L,pp}}{8C}$$\n代入 $T_s$ 和 $\\Delta i_{L,pp}$ 的表达式：\n$$\\Delta V_{load,pp} = \\frac{(1/f_s)}{8C} \\left(\\frac{V_{\\mathrm{dc}}}{2Lf_s}\\right) = \\frac{V_{\\mathrm{dc}}}{16LCf_s^2}$$\n\n这两个推导出的公式将被用于求解给定的测试案例。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the fundamental RMS load voltage and worst-case peak-to-peak\n    ripple voltage for a single-phase full-bridge inverter with an LC-R load.\n    \"\"\"\n    # Test cases: (V_dc, m, f1, fs, L, C, R)\n    # Units: V, unitless, Hz, Hz, H, F, Ohm\n    test_cases = [\n        (400.0, 0.80, 50.0, 10000.0, 5e-3, 20e-6, 20.0),\n        (450.0, 0.95, 60.0, 20000.0, 3e-3, 10e-6, 10.0),\n        (300.0, 0.10, 50.0, 5000.0, 10e-3, 50e-6, 100.0),\n        (350.0, 0.70, 50.0, 5000.0, 1e-3, 5e-6, 30.0),\n        (380.0, 0.90, 50.0, 100000.0, 8e-3, 100e-6, 15.0),\n    ]\n\n    results = []\n\n    for case in test_cases:\n        V_dc, m, f1, fs, L, C, R = case\n\n        # Part 1: Fundamental RMS Load Voltage Calculation\n        omega1 = 2 * np.pi * f1\n        \n        # Calculate the magnitude of the filter's transfer function at f1\n        h_mag_denom_term1 = 1 - (omega1**2 * L * C)\n        h_mag_denom_term2 = (omega1 * L) / R\n        h_mag = 1 / np.sqrt(h_mag_denom_term1**2 + h_mag_denom_term2**2)\n\n        # Calculate the RMS value of the fundamental component of inverter output voltage\n        v_inv_1_rms = (m * V_dc) / np.sqrt(2)\n\n        # Calculate the final RMS load voltage for the fundamental component\n        v_load_1_rms = v_inv_1_rms * h_mag\n\n        # Part 2: Worst-Case Peak-to-Peak Ripple Voltage Calculation\n        v_ripple_pp = V_dc / (16 * L * C * fs**2)\n        \n        # Round results to six decimal places\n        v_load_1_rms_rounded = round(v_load_1_rms, 6)\n        v_ripple_pp_rounded = round(v_ripple_pp, 6)\n\n        results.append([v_load_1_rms_rounded, v_ripple_pp_rounded])\n        \n    # Format the final output string\n    # e.g., [[x1,y1],[x2,y2],...]\n    output_str = \"[\" + \",\".join(map(str, results)) + \"]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "在理解了逆变器的输出特性后，下一步是探讨如何在实际的数字控制器中生成控制信号。理想的PWM波形在现实中无法实现，因为器件的开关速度和驱动电路的延迟都是有限的。本练习将引导你解决一个实际工程问题：如何计算防止桥臂直通所需的最小死区时间，并在此约束下确定由器件物理特性和控制精度限制的最高开关频率。",
            "id": "3878631",
            "problem": "一个单相全桥电压源逆变器 (VSI) 由一个中心对齐的数字脉冲宽度调制 (PWM) 发生器驱动，该发生器为每个桥臂生成互补的门极信号，并插入了非重叠时间（死区时间）。调制方式为双极性正弦 PWM (SPWM)，调制指数限制为 $m_{\\max} = 0.8$。器件和驱动器的动态特性由最坏情况下的边界来表征。门极驱动传播延迟，上管为 $t_{\\mathrm{pd,H}} \\in [70,90]\\ \\text{ns}$，下管为 $t_{\\mathrm{pd,L}} \\in [55,65]\\ \\text{ns}$。上管金属氧化物半导体场效应晶体管 (MOSFET) 的关断延迟为 $t_{\\mathrm{doff,H}} = 70\\ \\text{ns}$，下降时间为 $t_{\\mathrm{f,H}} = 50\\ \\text{ns}$。下管 MOSFET 的导通延迟为 $t_{\\mathrm{don,L}} = 60\\ \\text{ns}$，上升时间为 $t_{\\mathrm{r,L}} = 40\\ \\text{ns}$。反并联二极管的最坏情况反向恢复时间为 $t_{\\mathrm{rr}} = 120\\ \\text{ns}$。必须包括一个有界的附加时序不确定性（总抖动和失配）$\\Delta t_{\\mathrm{j}} = 20\\ \\text{ns}$ 和一个保守的安全裕度 $t_{\\mathrm{s}} = 20\\ \\text{ns}$。允许的最大指令死区时间为 $t_{\\mathrm{dead,max}} = 300\\ \\text{ns}$。为确保有效的导通并避免无效脉冲，任何器件的最小指令导通时间限制为 $t_{\\mathrm{on,min}} = 300\\ \\text{ns}$。数字 PWM 发生器以时钟频率 $f_{\\mathrm{clk}} = 100\\ \\text{MHz}$ 运行，给出的时间量子为 $\\Delta t = 10\\ \\text{ns}$；所有设定的时序量必须是 $\\Delta t$ 的整数倍。\n\n假设通过要求在器件沟道层面，互补开关的导通区间不重叠，并且输入器件的导通仅在输出器件的沟道停止导通且其二极管完成反向恢复之后发生，来禁止直通。从这些物理时序定义出发，推导在所述最坏情况边界和量化条件下保证不重叠的最小指令死区时间 $t_{\\mathrm{dead}}$，同时要满足 $t_{\\mathrm{dead}} \\leq t_{\\mathrm{dead,max}}$。然后，利用双极性 SPWM 中桥臂占空比与瞬时参考值之间的基本关系，推导出开关周期 $T_{\\mathrm{s}}$ 的下限，以保证在插入死区时间的情况下，对于所有瞬时且 $|m| \\leq m_{\\max}$，每个器件的导通区间至少为 $t_{\\mathrm{on,min}}$。由此，计算可实现的最大开关频率 $f_{\\mathrm{s,max}} = 1/T_{\\mathrm{s,min}}$。\n\n以 $\\text{kHz}$ 为单位表示最终频率，并将您的答案四舍五入到三位有效数字。最终答案必须是一个实数。",
            "solution": "问题陈述被评估为有效。这是一个在电力电子领域中提法恰当、有科学依据的问题。所有必要的数据和约束条件都已提供，并且它们内部一致且物理上现实。该问题要求进行严格的最坏情况时序分析以确定操作限制，这是一项标准且有意义的工程任务。\n\n解决方案分为两个主要部分：首先，计算所需的最小指令死区时间 $t_{\\mathrm{dead}}$；其次，基于最小脉冲宽度约束，计算最大开关频率 $f_{\\mathrm{s,max}}$。\n\n**第一部分：最小指令死区时间 ($t_{\\mathrm{dead}}$)**\n\n目标是防止逆变器桥臂中的直通（shoot-through）。如果输入器件在输出器件完全关断之前导通，就会发生直通。问题指定了从上管 (H) MOSFET 关断到下管 (L) MOSFET 导通的转换过程。为保证在所有指定变化下的安全操作，我们必须进行最坏情况分析。\n\n设 $t_{\\mathrm{cmd,off,H}}$ 为控制器命令上管器件关断的时间， $t_{\\mathrm{cmd,on,L}}$ 为其命令下管器件导通的时间。指令死区时间为 $t_{\\mathrm{dead}} = t_{\\mathrm{cmd,on,L}} - t_{\\mathrm{cmd,off,H}}$。\n\n直通保护必须考虑以下几个因素：\n1. 在最慢条件下，输出器件（上管）关断所需的总时间。\n2. 在最快条件下，输入器件（下管）导通所需的总时间。\n3. 输出器件反并联二极管的反向恢复时间 $t_{\\mathrm{rr}}$。\n4. 附加的抖动和安全裕度 $\\Delta t_{\\mathrm{j}}$ 和 $t_{\\mathrm{s}}$。\n\n相对于其关断命令，上管 MOSFET 沟道停止导通的最晚时刻是最大上管门极驱动传播延迟与器件关断时间（延迟+下降时间）之和。\n$$t_{\\mathrm{off,H,latest}} = t_{\\mathrm{pd,H,max}} + t_{\\mathrm{doff,H}} + t_{\\mathrm{f,H}}$$\n\n相对于其导通命令，下管 MOSFET 沟道开始导通的最早时刻是最小下管门极驱动传播延迟与器件导通延迟之和。\n$$t_{\\mathrm{on,L,earliest}} = t_{\\mathrm{pd,L,min}} + t_{\\mathrm{don,L}}$$\n\n为防止沟道到沟道的导通，指令死区时间必须足够大，以确保最早的下管导通发生在上管最晚关断之后。问题陈述进一步要求此时间间隔足以容纳二极管反向恢复、抖动和安全裕度。因此，所需的最小死区时间是最慢关断和最快导通之间的时间差，再加上这些额外的时间。\n\n$$t_{\\mathrm{dead}} \\ge (t_{\\mathrm{off,H,latest}} - t_{\\mathrm{on,L,earliest}}) + t_{\\mathrm{rr}} + \\Delta t_{\\mathrm{j}} + t_{\\mathrm{s}}$$\n$$t_{\\mathrm{dead}} \\ge (t_{\\mathrm{pd,H,max}} + t_{\\mathrm{doff,H}} + t_{\\mathrm{f,H}}) - (t_{\\mathrm{pd,L,min}} + t_{\\mathrm{don,L}}) + t_{\\mathrm{rr}} + \\Delta t_{\\mathrm{j}} + t_{\\mathrm{s}}$$\n\n我们代入给定的最坏情况值：\n- $t_{\\mathrm{pd,H,max}} = 90\\ \\text{ns}$\n- $t_{\\mathrm{doff,H}} = 70\\ \\text{ns}$\n- $t_{\\mathrm{f,H}} = 50\\ \\text{ns}$\n- $t_{\\mathrm{pd,L,min}} = 55\\ \\text{ns}$\n- $t_{\\mathrm{don,L}} = 60\\ \\text{ns}$\n- $t_{\\mathrm{rr}} = 120\\ \\text{ns}$\n- $\\Delta t_{\\mathrm{j}} = 20\\ \\text{ns}$\n- $t_{\\mathrm{s}} = 20\\ \\text{ns}$\n\n$$t_{\\mathrm{dead,min\\_calc}} = (90 + 70 + 50)\\ \\text{ns} - (55 + 60)\\ \\text{ns} + 120\\ \\text{ns} + 20\\ \\text{ns} + 20\\ \\text{ns}$$\n$$t_{\\mathrm{dead,min\\_calc}} = 210\\ \\text{ns} - 115\\ \\text{ns} + 160\\ \\text{ns}$$\n$$t_{\\mathrm{dead,min\\_calc}} = 95\\ \\text{ns} + 160\\ \\text{ns} = 255\\ \\text{ns}$$\n\nPWM 发生器的时间量子为 $\\Delta t = 10\\ \\text{ns}$。所有设定的时序量必须是 $\\Delta t$ 的整数倍。因此，我们必须选择大于或等于 $t_{\\mathrm{dead,min\\_calc}}$ 的 $10\\ \\text{ns}$ 的最小倍数。\n$$t_{\\mathrm{dead}} = \\left\\lceil \\frac{255\\ \\text{ns}}{10\\ \\text{ns}} \\right\\rceil \\times 10\\ \\text{ns} = \\lceil 25.5 \\rceil \\times 10\\ \\text{ns} = 26 \\times 10\\ \\text{ns} = 260\\ \\text{ns}$$\n\n该值必须与允许的最大死区时间进行核对：$t_{\\mathrm{dead}} = 260\\ \\text{ns} \\le t_{\\mathrm{dead,max}} = 300\\ \\text{ns}$。条件满足。\n要使用的指令死区时间为 $t_{\\mathrm{dead}} = 260\\ \\text{ns}$。\n\n**第二部分：最大开关频率 ($f_{\\mathrm{s,max}}$)**\n\n最大开关频率受任何器件所需的最小导通时间的限制。对于双极性正弦 PWM，桥臂的瞬时占空比 $d(t)$ 由下式给出：\n$$d(t) = \\frac{1}{2}(1 + v_{\\mathrm{ref}}(t))$$\n其中 $v_{\\mathrm{ref}}(t) = m \\sin(\\omega t)$ 是归一化的参考电压。\n调制指数限制为 $|m| \\le m_{\\max} = 0.8$。因此，占空比 $d(t)$ 在 $[d_{\\min}, d_{\\max}]$ 范围内变化。\n\n最小占空比出现在 $v_{\\mathrm{ref}}(t) = -m_{\\max}$ 时：\n$$d_{\\min} = \\frac{1}{2}(1 - m_{\\max}) = \\frac{1}{2}(1 - 0.8) = \\frac{1}{2}(0.2) = 0.1$$\n最大占空比出现在 $v_{\\mathrm{ref}}(t) = +m_{\\max}$ 时：\n$$d_{\\max} = \\frac{1}{2}(1 + m_{\\max}) = \\frac{1}{2}(1 + 0.8) = \\frac{1}{2}(1.8) = 0.9$$\n\n上管开关的指令导通时间为 $d T_{\\mathrm{s}}$，下管开关的指令导通时间为 $(1-d)T_{\\mathrms}$，其中 $T_{\\mathrm{s}}$ 是开关周期。由于死区时间的插入，每个器件的实际门极导通时间会减少。在双极性 PWM 中，每个转换处都会插入一个死区时间间隔 $t_{\\mathrm{dead}}$，因此每个开关周期内开关的有效导通时间会减少 $t_{\\mathrm{dead}}$。\n$$t_{\\mathrm{ON,H,eff}} = d T_{\\mathrms} - t_{\\mathrm{dead}}$$\n$$t_{\\mathrm{ON,L,eff}} = (1-d) T_{\\mathrms} - t_{\\mathrm{dead}}$$\n\n问题陈述指出，任何器件的最小指令导通时间必须至少为 $t_{\\mathrm{on,min}} = 300\\ \\text{ns}$。我们必须在所有操作条件下满足此约束。最坏情况（最短）的导通时间发生在占空比的极值处。\n对于上管开关：$t_{\\mathrm{ON,H,eff,min}} = d_{\\min} T_{\\mathrms} - t_{\\mathrm{dead}}$。\n对于下管开关：$t_{\\mathrm{ON,L,eff,min}} = (1 - d_{\\max}) T_{\\mathrms} - t_{\\mathrm{dead}}$。\n由于 $d_{\\min} = 1 - d_{\\max} = 0.1$，两个条件是相同的。我们必须满足：\n$$d_{\\min} T_{\\mathrms} - t_{\\mathrm{dead}} \\ge t_{\\mathrm{on,min}}$$\n\n我们现在可以求解满足此不等式的最小开关周期 $T_{\\mathrm{s,min}}$。\n$$d_{\\min} T_{\\mathrms,min} = t_{\\mathrm{on,min}} + t_{\\mathrm{dead}}$$\n$$T_{\\mathrms,min} = \\frac{t_{\\mathrm{on,min}} + t_{\\mathrm{dead}}}{d_{\\min}}$$\n\n使用先前计算的 $t_{\\mathrm{dead}} = 260\\ \\text{ns}$ 和给定值：\n$$T_{\\mathrms,min} = \\frac{300\\ \\text{ns} + 260\\ \\text{ns}}{0.1} = \\frac{560\\ \\text{ns}}{0.1} = 5600\\ \\text{ns} = 5.6 \\times 10^{-6}\\ \\text{s}$$\n\n可实现的最大开关频率 $f_{\\mathrm{s,max}}$ 是最小开关周期的倒数。\n$$f_{\\mathrm{s,max}} = \\frac{1}{T_{\\mathrms,min}} = \\frac{1}{5.6 \\times 10^{-6}\\ \\text{s}} \\approx 178571.4\\ \\text{Hz}$$\n\n最终答案要求以 kHz 为单位，并四舍五入到三位有效数字。\n$$f_{\\mathrm{s,max}} \\approx 178.5714\\ \\text{kHz} \\approx 179\\ \\text{kHz}$$",
            "answer": "$$\\boxed{179}$$"
        },
        {
            "introduction": "任何稳健的工程设计都必须将安全性与可靠性作为核心考量，这意味着必须充分分析故障条件下的系统行为。本练习将以一个关键的安全问题作为结尾，模拟负载发生短路故障时的情景。你将需要计算由此产生的浪涌电流上升率和器件在保护电路动作前吸收的能量，这些参数对于设计有效的保护方案至关重要。",
            "id": "3878678",
            "problem": "一个直流 (DC) 母线电压为 $V_{\\text{dc}}$ 的单相全桥电压源逆变器 (VSI) 驱动一个在其端子上发生固态短路的负载。在时间 $t=0$ 时，全桥中的一对对角绝缘栅开关被指令导通，将直流母线的正极施加到短路负载上。由于栅极驱动偏斜，对角线上的第二个开关在第一个开关导通后延迟 $t_{\\text{skew}}$ 才达到导通状态，因此在 $t_{\\text{skew}}$ 之前没有环路电流流动。总电流环路杂散电感（主要由母线排和器件封装引起）为 $L_{s}$。在保护前的短暂间隔内，每个导通器件可以被建模为具有一个恒定的通态压降 $V_{\\text{on}}$，该压降在此电流范围内与电流无关。忽略环路中的任何额外电阻元件。\n\n过流保护监控桥臂电流，并在电流达到阈值 $I_{\\text{trip}}$ 时触发。测量和比较器链引入了延迟 $t_{\\text{cmp}}$，栅极驱动器又增加了传播延迟 $t_{\\text{drv}}$，因此对角器件会持续导通，直到 $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$，其中 $t_{\\text{trip}}$ 是从 $t_{\\text{skew}}$ 电流开始到电流首次等于 $I_{\\text{trip}}$ 的瞬间所经过的时间。假设开关转换相对于电感电流斜坡非常快，因此在导通期间，杂散电感上的环路电压为 $V_{\\text{dc}} - 2 V_{\\text{on}}$，且电流线性增加。\n\n从基本关系式 $v_{L}(t) = L_{s}\\,\\frac{di}{dt}$ 和 $p(t) = v(t)\\,i(t)$ 出发，执行以下操作：\n\n1. 推导 $t_{\\text{skew}}$ 之后电流上升率 $\\frac{di}{dt}$ 的表达式，以及达到 $I_{\\text{trip}}$ 所需的时间 $t_{\\text{trip}}$。\n2. 使用这些结果，推导在保护动作开始关断两个导通的对角器件之前，它们所消耗的总能量的表达式，定义为\n$$\nE_{\\text{dev}} \\equiv \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}} \\big(2 V_{\\text{on}}\\big)\\, i(t)\\, dt,\n$$\n然后进行数值计算。\n\n使用以下参数值，在本题中均为常数：\n$V_{\\text{dc}} = 400\\,\\text{V}$，$L_{s} = 2.0\\,\\mu\\text{H}$，$V_{\\text{on}} = 2.0\\,\\text{V}$ (每个器件)，$t_{\\text{skew}} = 150\\,\\text{ns}$，$I_{\\text{trip}} = 150\\,\\text{A}$，$t_{\\text{cmp}} = 200\\,\\text{ns}$，以及 $t_{\\text{drv}} = 100\\,\\text{ns}$。\n\n提供 $E_{\\text{dev}}$ 的最终数值，单位为焦耳。将您的答案四舍五入到四位有效数字。以 $\\text{J}$ 表示最终能量。",
            "solution": "在尝试求解之前，对问题陈述的有效性进行评估。\n\n### 步骤 1：提取已知条件\n- 系统：单相全桥电压源逆变器 (VSI)。\n- 直流母线电压：$V_{\\text{dc}}$。\n- 负载：固态短路。\n- 事件启动：在 $t=0$ 时，一对对角开关被指令导通。\n- 栅极驱动偏斜：在 $t_{\\text{skew}}$ 之前无电流流动。\n- 总环路杂散电感：$L_{s}$。\n- 每个器件的通态压降：$V_{\\text{on}}$（恒定）。\n- 其他电阻：忽略。\n- 过流保护触发阈值：$I_{\\text{trip}}$。\n- 比较器延迟：$t_{\\text{cmp}}$。\n- 栅极驱动器传播延迟：$t_{\\text{drv}}$。\n- 导通间隔结束时间：$t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$。\n- $t_{\\text{trip}}$ 的定义：从电流开始 ($t_{\\text{skew}}$) 到电流等于 $I_{\\text{trip}}$ 的时间。\n- 假设：导通期间杂散电感上的电压为 $V_{\\text{dc}} - 2 V_{\\text{on}}$，意味着电流呈线性斜坡上升。\n- 基本关系式：$v_{L}(t) = L_{s}\\,\\frac{di}{dt}$ 和 $p(t) = v(t)\\,i(t)$。\n- 待计算的能量：$E_{\\text{dev}} \\equiv \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}} \\big(2 V_{\\text{on}}\\big)\\, i(t)\\, dt$。\n- 数值：\n  - $V_{\\text{dc}} = 400\\,\\text{V}$\n  - $L_{s} = 2.0\\,\\mu\\text{H} = 2.0 \\times 10^{-6}\\,\\text{H}$\n  - $V_{\\text{on}} = 2.0\\,\\text{V}$\n  - $t_{\\text{skew}} = 150\\,\\text{ns} = 150 \\times 10^{-9}\\,\\text{s}$\n  - $I_{\\text{trip}} = 150\\,\\text{A}$\n  - $t_{\\text{cmp}} = 200\\,\\text{ns} = 200 \\times 10^{-9}\\,\\text{s}$\n  - $t_{\\text{drv}} = 100\\,\\text{ns} = 100 \\times 10^{-9}\\,\\text{s}$\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据，描述了电力电子逆变器中的一种标准故障情况（直通或短路事件）。该模型基于电路理论的基本原理（Kirchhoff 电压定律）和电感的本构关系。元件模型，如开关的恒定通态压降和各种传播延迟，是电力电子分析中使用的标准且有效的简化。问题提法明确，提供了所有确定唯一解所必需的参数和条件。语言客观、精确。数值对于现代电力变换器而言是物理上现实的。不存在科学、逻辑或事实上的缺陷。\n\n### 步骤 3：结论与行动\n问题有效。将制定完整的解决方案。\n\n该问题需要一个分为两部分的推导，然后进行数值评估。\n\n**1. 电流上升率和触发时间的推导**\n\n对于时间间隔 $t \\ge t_{\\text{skew}}$，由直流电源、两个有源开关和杂散电感形成一个导通环路。负载是短路，不提供阻抗。对该环路应用 Kirchhoff 电压定律 (KVL) 得：\n$$\nV_{\\text{dc}} - V_{\\text{on}} - v_{L}(t) - V_{\\text{on}} = 0\n$$\n其中 $v_{L}(t)$ 是总杂散电感 $L_s$ 两端的电压。这可以简化为：\n$$\nv_{L}(t) = V_{\\text{dc}} - 2 V_{\\text{on}}\n$$\n这证实了问题陈述中规定的电压。问题提供了电感的基本关系式，$v_{L}(t) = L_{s}\\,\\frac{di}{dt}$。将两个关于 $v_{L}(t)$ 的表达式相等：\n$$\nL_{s}\\,\\frac{di}{dt} = V_{\\text{dc}} - 2 V_{\\text{on}}\n$$\n因此，当 $t > t_{\\text{skew}}$ 时，电流上升率是恒定的：\n$$\n\\frac{di}{dt} = \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}}\n$$\n电流 $i(t)$ 在 $t = t_{\\text{skew}}$ 时开始流动，初始条件为 $i(t_{\\text{skew}}) = 0$。我们通过从起始时间 $t_{\\text{skew}}$ 积分变化率来求得电流：\n$$\ni(t) = \\int_{t_{\\text{skew}}}^{t} \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} d\\tau = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) (t - t_{\\text{skew}}) \\quad \\text{for } t \\ge t_{\\text{skew}}\n$$\n时间 $t_{\\text{trip}}$ 定义为从 $t=t_{\\text{skew}}$ 电流斜坡开始到电流达到阈值 $I_{\\text{trip}}$ 的持续时间。这意味着在绝对时间 $t = t_{\\text{skew}} + t_{\\text{trip}}$，电流为 $i(t_{\\text{skew}} + t_{\\text{trip}}) = I_{\\text{trip}}$。将此代入 $i(t)$ 的表达式中：\n$$\nI_{\\text{trip}} = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) ((t_{\\text{skew}} + t_{\\text{trip}}) - t_{\\text{skew}}) = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) t_{\\text{trip}}\n$$\n求解 $t_{\\text{trip}}$ 得：\n$$\nt_{\\text{trip}} = \\frac{L_{s} I_{\\text{trip}}}{V_{\\text{dc}} - 2 V_{\\text{on}}}\n$$\n\n**2. 器件能量耗散的推导与评估**\n\n两个导通器件中耗散的能量 $E_{\\text{dev}}$ 由瞬时功率 $p_{\\text{dev}}(t)$ 在指定的导通间隔内的积分给出。功率为 $p_{\\text{dev}}(t) = v_{\\text{dev}}(t) i(t)$，其中两个器件上的总压降为 $v_{\\text{dev}}(t) = 2 V_{\\text{on}}$。\n能量积分定义为：\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{end}}} (2 V_{\\text{on}})\\, i(t)\\, dt\n$$\n其中导通在 $t_{\\text{end}} = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$ 结束。我们将总保护延迟定义为 $t_{\\text{delay}} = t_{\\text{cmp}} + t_{\\text{drv}}$。那么 $t_{\\text{end}} = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}$。\n代入 $i(t)$ 的表达式：\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left[ \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) (t - t_{\\text{skew}}) \\right] dt\n$$\n使用关系式 $I_{\\text{trip}} = \\frac{V_{\\text{dc}} - 2V_{\\text{on}}}{L_s}t_{\\text{trip}}$，我们可以将电流斜率表示为 $\\frac{I_{\\text{trip}}}{t_{\\text{trip}}}$。\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left( \\frac{I_{\\text{trip}}}{t_{\\text{trip}}} \\right) (t - t_{\\text{skew}}) dt\n$$\n为了简化积分，我们进行变量替换：令 $\\tau = t - t_{\\text{skew}}$，则 $d\\tau = dt$。积分限从 $t = t_{\\text{skew}}$ 到 $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}$，对应于 $\\tau = 0$ 到 $\\tau = t_{\\text{trip}} + t_{\\text{delay}}$。\n$$\nE_{\\text{dev}} = \\int_{0}^{t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left( \\frac{I_{\\text{trip}}}{t_{\\text{trip}}} \\right) \\tau d\\tau\n$$\n项 $2$、$V_{\\text{on}}$、$I_{\\text{trip}}$ 和 $t_{\\text{trip}}$ 相对于积分变量 $\\tau$ 是常数。\n$$\nE_{\\text{dev}} = \\frac{2 V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} \\int_{0}^{t_{\\text{trip}} + t_{\\text{delay}}} \\tau d\\tau = \\frac{2 V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} \\left[ \\frac{\\tau^2}{2} \\right]_{0}^{t_{\\text{trip}} + t_{\\text{delay}}}\n$$\n$$\nE_{\\text{dev}} = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{delay}})^2 = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}})^2\n$$\n这是耗散能量的最终符号表达式。\n\n**数值评估**\n\n我们将给定的参数值代入推导出的表达式中。\n$V_{\\text{dc}} = 400\\,\\text{V}$，$V_{\\text{on}} = 2.0\\,\\text{V}$，$L_{s} = 2.0 \\times 10^{-6}\\,\\text{H}$，$I_{\\text{trip}} = 150\\,\\text{A}$，$t_{\\text{cmp}} = 200 \\times 10^{-9}\\,\\text{s}$，$t_{\\text{drv}} = 100 \\times 10^{-9}\\,\\text{s}$。\n\n首先，计算驱动电流斜坡的有效电压：\n$$\nV_{\\text{dc}} - 2 V_{\\text{on}} = 400\\,\\text{V} - 2 \\times (2.0\\,\\text{V}) = 396\\,\\text{V}\n$$\n接下来，计算达到触发电流所需的时间 $t_{\\text{trip}}$：\n$$\nt_{\\text{trip}} = \\frac{L_{s} I_{\\text{trip}}}{V_{\\text{dc}} - 2 V_{\\text{on}}} = \\frac{(2.0 \\times 10^{-6}\\,\\text{H}) (150\\,\\text{A})}{396\\,\\text{V}} = \\frac{300 \\times 10^{-6}}{396}\\,\\text{s} = \\frac{25}{33} \\times 10^{-6}\\,\\text{s}\n$$\n$t_{\\text{trip}} \\approx 7.5757... \\times 10^{-7}\\,\\text{s}$。\n\n接下来，计算总保护延迟 $t_{\\text{delay}}$：\n$$\nt_{\\text{delay}} = t_{\\text{cmp}} + t_{\\text{drv}} = 200 \\times 10^{-9}\\,\\text{s} + 100 \\times 10^{-9}\\,\\text{s} = 300 \\times 10^{-9}\\,\\text{s} = 0.3 \\times 10^{-6}\\,\\text{s}\n$$\n现在，我们可以计算耗散的能量 $E_{\\text{dev}}$：\n$$\nE_{\\text{dev}} = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{delay}})^2\n$$\n$$\nE_{\\text{dev}} = \\frac{(2.0\\,\\text{V})(150\\,\\text{A})}{\\frac{25}{33} \\times 10^{-6}\\,\\text{s}} \\left( \\frac{25}{33} \\times 10^{-6}\\,\\text{s} + 0.3 \\times 10^{-6}\\,\\text{s} \\right)^2\n$$\n$$\nE_{\\text{dev}} = \\frac{300}{\\frac{25}{33} \\times 10^{-6}} \\left( (\\frac{25}{33} + \\frac{3}{10}) \\times 10^{-6} \\right)^2 = \\frac{300 \\times 33}{25} \\times 10^{6} \\left( (\\frac{250+99}{330}) \\times 10^{-6} \\right)^2\n$$\n$$\nE_{\\text{dev}} = 396 \\times 10^{6} \\left( \\frac{349}{330} \\times 10^{-6} \\right)^2 = 396 \\times 10^{6} \\times \\left(\\frac{349}{330}\\right)^2 \\times 10^{-12}\n$$\n$$\nE_{\\text{dev}} = 396 \\times \\frac{121801}{108900} \\times 10^{-6} = \\frac{48233196}{108900} \\times 10^{-6}\\,\\text{J}\n$$\n$$\nE_{\\text{dev}} \\approx 442.912727... \\times 10^{-6}\\,\\text{J} = 0.0004429127... \\,\\text{J}\n$$\n将结果四舍五入到四位有效数字，我们得到：\n$$\nE_{\\text{dev}} \\approx 4.429 \\times 10^{-4}\\,\\text{J}\n$$",
            "answer": "$$\n\\boxed{4.429 \\times 10^{-4}}\n$$"
        }
    ]
}
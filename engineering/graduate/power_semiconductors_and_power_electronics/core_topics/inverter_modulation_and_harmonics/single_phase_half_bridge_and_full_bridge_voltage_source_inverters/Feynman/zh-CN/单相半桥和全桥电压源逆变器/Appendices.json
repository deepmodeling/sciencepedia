{
    "hands_on_practices": [
        {
            "introduction": "电压源逆变器 (VSI) 的主要目标是从直流源生成高质量的正弦电压。本练习将指导您掌握分析逆变器及其输出LC滤波器性能所需的方法。您将学习如何计算所需的基波电压和不希望出现的高频纹波，这些技能对于验证仿真模型和设计有效的滤波器至关重要。",
            "id": "3878722",
            "problem": "一个采用正弦脉宽调制 (SPWM) 的单相全桥电压源逆变器，通过一个由串联电感和并联电容组成的二阶低通滤波器，在阻性负载上合成一个低频正弦电压。该全桥工作在双极性 SPWM 模式下，其中两个桥臂被驱动，使得负载两端的输出节点根据正弦参考信号和高频三角载波之间比较结果的符号，在 $+V_{\\mathrm{dc}}$ 和 $-V_{\\mathrm{dc}}$ 之间交替。该低通滤波器由一个电感为 $L$ 的串联电感和一个电容为 $C$ 的并联电容组成，该电容与电阻为 $R$ 的阻性负载并联。正弦参考信号的频率为 $f_1$，三角载波的开关频率为 $f_s$。调制指数 $m$ 定义为正弦参考信号的峰值与三角载波峰值的比值。直流 (DC) 母线电压为 $V_{\\mathrm{dc}}$。\n\n请通过设计一个解析计算，为该带有给定滤波器和负载的逆变器的仿真设置指定一个数学上合理的交叉验证：\n1. 频率为 $f_1$ 时负载电压的基波（一次谐波）均方根 (RMS) 幅值。\n2. 在基波过零点附近，由于高频开关导致负载上出现的最坏情况下的峰峰值开关纹波电压，此时滤波器承受最大的脉动电感电压。\n\n推导必须仅从基本定律和核心定义开始：电感与电压的关系 $v_L = L \\frac{\\mathrm{d}i_L}{\\mathrm{d}t}$，电容与电流的关系 $i_C = C \\frac{\\mathrm{d}v_C}{\\mathrm{d}t}$，线性时不变串并联阻抗组合，以及全桥双极性工作模式下 SPWM 开关函数的定义，即参考信号与载波之间的符号比较。不要使用未从这些基础推导出的简便公式。该分析必须将滤波器视为线性的，并将 SPWM 源波形视为一个分段常数的两电平过程，对于基波分量，其在一个开关周期内的平均值等于调制的正弦波。纹波分析必须捕捉基波过零点附近的最坏情况下的开关纹波，使用电感-电容关系来计算三角形电感电流纹波以及由此在一个开关周期内产生的电容电压纹波。\n\n您的程序必须为以下测试套件实现解析计算。对于每个案例，计算两个数值：\n- 负载基波电压的均方根值，单位为伏特，四舍五入到六位小数。\n- 最坏情况下的峰峰值纹波电压，单位为伏特，四舍五入到六位小数。\n\n使用以下测试用例，所有量均以指定单位表示：\n- 案例 1：$V_{\\mathrm{dc}} = 400\\,\\mathrm{V}$, $m = 0.80$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 10{,}000\\,\\mathrm{Hz}$, $L = 5\\,\\mathrm{mH}$, $C = 20\\,\\mathrm{\\mu F}$, $R = 20\\,\\Omega$。\n- 案例 2：$V_{\\mathrm{dc}} = 450\\,\\mathrm{V}$, $m = 0.95$, $f_1 = 60\\,\\mathrm{Hz}$, $f_s = 20{,}000\\,\\mathrm{Hz}$, $L = 3\\,\\mathrm{mH}$, $C = 10\\,\\mathrm{\\mu F}$, $R = 10\\,\\Omega$。\n- 案例 3：$V_{\\mathrm{dc}} = 300\\,\\mathrm{V}$, $m = 0.10$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 5{,}000\\,\\mathrm{Hz}$, $L = 10\\,\\mathrm{mH}$, $C = 50\\,\\mathrm{\\mu F}$, $R = 100\\,\\Omega$。\n- 案例 4：$V_{\\mathrm{dc}} = 350\\,\\mathrm{V}$, $m = 0.70$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 5{,}000\\,\\mathrm{Hz}$, $L = 1\\,\\mathrm{mH}$, $C = 5\\,\\mathrm{\\mu F}$, $R = 30\\,\\Omega$。\n- 案例 5：$V_{\\mathrm{dc}} = 380\\,\\mathrm{V}$, $m = 0.90$, $f_1 = 50\\,\\mathrm{Hz}$, $f_s = 100{,}000\\,\\mathrm{Hz}$, $L = 8\\,\\mathrm{mH}$, $C = 100\\,\\mathrm{\\mu F}$, $R = 15\\,\\Omega$。\n\n您的程序必须生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。每个测试用例的结果必须是一个包含两个浮点数的列表，顺序为 $[\\text{基波均方根电压}, \\text{峰峰值纹波电压}]$，例如 $[[x_1,y_1],[x_2,y_2],\\dots]$。如果需要，角度必须以弧度处理，尽管这里只提供了以赫兹为单位的频率。所有输出都必须以伏特 ($\\mathrm{V}$) 为单位表示，并四舍五入到六位小数。",
            "solution": "该问题陈述经评估为**有效**。它具有科学依据、提法得当且客观。为带有 LC-R 负载的单相全桥 SPWM 逆变器提供了所有必需的参数。问题要求对两个标准性能指标进行解析计算：负载电压基波分量的均方根值和负载上最坏情况下的峰峰值开关纹波电压。对推导的约束——要求从电路理论和 SPWM 的基本原理出发——是清晰的，并且适合于严谨的工程分析。所提供的元件和操作值在物理上是现实的。该问题符合一个有效科学问题的所有标准。\n\n根据要求，解答分为两部分。\n\n**1. 基波负载电压均方根值 ($V_{load,1,RMS}$)**\n\n分析从全桥逆变器的输出电压 $v_{inv}(t)$ 开始。在双极性正弦脉宽调制 (SPWM) 下，逆变器的输出电压在 $+V_{\\mathrm{dc}}$ 和 $-V_{\\mathrm{dc}}$ 之间切换。当在开关周期内取平均时，该开关波形的基波分量与参考信号具有相同的正弦形状。对于调制指数为 $m$ 的正弦参考信号，逆变器输出电压的基波分量 $v_{inv,1}(t)$ 由下式给出：\n$$v_{inv,1}(t) = m V_{\\mathrm{dc}} \\sin(\\omega_1 t)$$\n其中 $\\omega_1 = 2\\pi f_1$ 是基波的角频率。\n\n该基波电压的峰值幅值为 $V_{inv,1,peak} = m V_{\\mathrm{dc}}$。相应的均方根 (RMS) 值为：\n$$V_{inv,1,RMS} = \\frac{V_{inv,1,peak}}{\\sqrt{2}} = \\frac{m V_{\\mathrm{dc}}}{\\sqrt{2}}$$\n该电压作为二阶 LC 低通滤波器的输入。负载电压 $V_{load,1}$ 是电容 $C$ 和电阻 $R$ 并联组合两端的电压。我们使用频域分析来确定滤波器在基波频率 $\\omega_1$ 下的影响。\n\n滤波器元件在 $\\omega_1$ 处的阻抗为：\n- 电感: $Z_L = j\\omega_1 L$\n- 电容: $Z_C = \\frac{1}{j\\omega_1 C}$\n- 电阻: $Z_R = R$\n\n该滤波器形成一个分压器。电容-电阻并联支路的阻抗为：\n$$Z_{CR} = \\frac{Z_C Z_R}{Z_C + Z_R} = \\frac{\\frac{1}{j\\omega_1 C} R}{\\frac{1}{j\\omega_1 C} + R} = \\frac{R}{1 + j\\omega_1 RC}$$\n滤波器的传递函数 $H(j\\omega_1)$ 是负载电压与逆变器输出电压之比：\n$$H(j\\omega_1) = \\frac{V_{load,1}}{V_{inv,1}} = \\frac{Z_{CR}}{Z_L + Z_{CR}}$$\n代入阻抗表达式：\n$$H(j\\omega_1) = \\frac{\\frac{1}{\\frac{1}{R} + j\\omega_1 C}}{j\\omega_1 L + \\frac{1}{\\frac{1}{R} + j\\omega_1 C}} = \\frac{1}{j\\omega_1 L \\left(\\frac{1}{R} + j\\omega_1 C\\right) + 1} = \\frac{1}{1 - \\omega_1^2 LC + j\\frac{\\omega_1 L}{R}}$$\n该传递函数的模 $|H(j\\omega_1)|$ 决定了输出和输入电压幅值的比率：\n$$|H(j\\omega_1)| = \\frac{1}{\\sqrt{\\left(1 - \\omega_1^2 LC\\right)^2 + \\left(\\frac{\\omega_1 L}{R}\\right)^2}}$$\n因此，基波负载电压的均方根值是输入电压的均方根值乘以传递函数的模：\n$$V_{load,1,RMS} = V_{inv,1,RMS} \\cdot |H(j\\omega_1)| = \\frac{m V_{\\mathrm{dc}}}{\\sqrt{2}} \\frac{1}{\\sqrt{\\left(1 - (2\\pi f_1)^2 LC\\right)^2 + \\left(\\frac{2\\pi f_1 L}{R}\\right)^2}}$$\n\n**2. 最坏情况下的峰峰值开关纹波电压 ($\\Delta V_{load,pp}$)**\n\n负载电压上最坏情况下的开关纹波发生在输出电压的基波分量接近其过零点时。在这些瞬间，负载电压 $v_{load}(t)$ 近似为零。根据基尔霍夫电压定律，电感上的电压 $v_L(t)$ 为：$v_L(t) = v_{inv}(t) - v_{load}(t)$。由于 $v_{load}(t) \\approx 0$，全部逆变器输出电压 $v_{inv}(t)$ 都施加在电感上，即 $v_L(t) \\approx v_{inv}(t)$。\n\n在基波过零点附近，正弦参考信号接近零，导致占空比接近 50%。逆变器的输出电压 $v_{inv}(t)$ 是一个开关频率为 $f_s = 1/T_s$ 的方波，在 $+V_{\\mathrm{dc}}$（持续时间约为 $T_s/2$）和 $-V_{\\mathrm{dc}}$（持续时间为 $T_s/2$）之间交替。\n\n根据电感电压-电流关系 $v_L = L \\frac{di}{dt}$，电感电流的变化量为 $\\Delta i_L = \\frac{1}{L} \\int v_L dt$。在开关周期的前半部分，由于 $v_L \\approx +V_{\\mathrm{dc}}$，电流线性上升。总的峰峰值电感电流纹波由这个半周期内的变化量决定：\n$$\\Delta i_{L,pp} = \\frac{1}{L} \\int_0^{T_s/2} V_{\\mathrm{dc}} dt = \\frac{V_{\\mathrm{dc}} T_s}{2L} = \\frac{V_{\\mathrm{dc}}}{2Lf_s}$$\n这个高频三角形电流纹波从电感流入电容 $C$ 和电阻 $R$ 的并联组合中。在高的开关频率 $f_s$ 下，电容的阻抗 $|Z_C| = \\frac{1}{2\\pi f_s C}$ 通常远小于电阻 $R$。因此，可以做一个有效的近似，即假设几乎所有的纹波电流都流入电容器，即 $i_{C,ripple}(t) \\approx i_{L,ripple}(t)$。\n\n电容器两端的电压（即负载电压）由 $v_C(t) = \\frac{1}{C} \\int i_C(t) dt$ 给出。峰峰值电压纹波 $\\Delta V_{load,pp}$ 是电容电压在其最小值和最大值之间的变化量。这些极值发生在电容纹波电流过零时。纹波电流 $i_{C,ripple}(t)$ 是一个三角波。从最小值到最大值的电压变化量是通过在电流为正的区间内对其进行积分得到的。该区间的持续时间为 $T_s/2$（例如，从 $t=T_s/4$ 到 $t=3T_s/4$），电流波形是一个底为 $T_s/2$、高为峰值纹波电流 $\\Delta i_{L,pp}/2$ 的三角形。\n\n在这个正电流半周期内累积的电荷 $\\Delta Q$ 是这个三角形的面积：\n$$\\Delta Q = \\frac{1}{2} \\times \\text{base} \\times \\text{height} = \\frac{1}{2} \\times \\frac{T_s}{2} \\times \\frac{\\Delta i_{L,pp}}{2} = \\frac{T_s \\Delta i_{L,pp}}{8}$$\n峰峰值纹波电压是这个累积电荷除以电容：\n$$\\Delta V_{load,pp} = \\frac{\\Delta Q}{C} = \\frac{T_s \\Delta i_{L,pp}}{8C}$$\n代入 $T_s$ 和 $\\Delta i_{L,pp}$ 的表达式：\n$$\\Delta V_{load,pp} = \\frac{(1/f_s)}{8C} \\left(\\frac{V_{\\mathrm{dc}}}{2Lf_s}\\right) = \\frac{V_{\\mathrm{dc}}}{16LCf_s^2}$$\n\n将使用这两个推导出的公式来解决给定的测试用例。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the fundamental RMS load voltage and worst-case peak-to-peak\n    ripple voltage for a single-phase full-bridge inverter with an LC-R load.\n    \"\"\"\n    # Test cases: (V_dc, m, f1, fs, L, C, R)\n    # Units: V, unitless, Hz, Hz, H, F, Ohm\n    test_cases = [\n        (400.0, 0.80, 50.0, 10000.0, 5e-3, 20e-6, 20.0),\n        (450.0, 0.95, 60.0, 20000.0, 3e-3, 10e-6, 10.0),\n        (300.0, 0.10, 50.0, 5000.0, 10e-3, 50e-6, 100.0),\n        (350.0, 0.70, 50.0, 5000.0, 1e-3, 5e-6, 30.0),\n        (380.0, 0.90, 50.0, 100000.0, 8e-3, 100e-6, 15.0),\n    ]\n\n    results = []\n\n    for case in test_cases:\n        V_dc, m, f1, fs, L, C, R = case\n\n        # Part 1: Fundamental RMS Load Voltage Calculation\n        omega1 = 2 * np.pi * f1\n        \n        # Calculate the magnitude of the filter's transfer function at f1\n        h_mag_denom_term1 = 1 - (omega1**2 * L * C)\n        h_mag_denom_term2 = (omega1 * L) / R\n        h_mag = 1 / np.sqrt(h_mag_denom_term1**2 + h_mag_denom_term2**2)\n\n        # Calculate the RMS value of the fundamental component of inverter output voltage\n        v_inv_1_rms = (m * V_dc) / np.sqrt(2)\n\n        # Calculate the final RMS load voltage for the fundamental component\n        v_load_1_rms = v_inv_1_rms * h_mag\n\n        # Part 2: Worst-Case Peak-to-Peak Ripple Voltage Calculation\n        v_ripple_pp = V_dc / (16 * L * C * fs**2)\n        \n        # Round results to six decimal places\n        v_load_1_rms_rounded = round(v_load_1_rms, 6)\n        v_ripple_pp_rounded = round(v_ripple_pp, 6)\n\n        results.append([v_load_1_rms_rounded, v_ripple_pp_rounded])\n        \n    # Format the final output string\n    # e.g., [[x1,y1],[x2,y2],...]\n    output_str = \"[\" + \",\".join(map(str, results)) + \"]\"\n    print(output_str)\n\nsolve()\n```"
        },
        {
            "introduction": "尽管线性调制是理想情况，但工程师有时会为了获得更高的输出电压而将逆变器推向过调制区。本练习将深入探讨这种非线性工作模式的后果，即输出电压波形被削平。您将运用傅里叶分析推导总谐波失真 ($THD$) 的表达式，从而提供一种量化方法来评估在更高输出电压和较差波形质量之间的权衡。",
            "id": "3878571",
            "problem": "一台单相全桥电压源逆变器采用双极性正弦脉宽调制驱动，其载波比很高，因此低频输出电压可以用每个载波周期内的平均值来建模。直流母线电压为恒定的 $V_{\\mathrm{dc}}$。指令低频参考为 $m \\sin(\\omega t)$，其中 $m > 1$，因此占空比指令在正弦周期的峰值附近会饱和于其边界 $\\pm 1$。假设开关为理想开关（无死区时间，无压降），并且忽略载波及其边带的开关纹波分量；只考虑由饱和非线性引起的基带（低频）内容。所有角度均以弧度为单位。\n\n在这些假设下，每个载波周期内的平均输出电压为\n$$\nv(t) = V_{\\mathrm{dc}} \\,\\mathrm{clip}\\big(m \\sin(\\omega t), -1, +1\\big).\n$$\n令 $\\theta = \\omega t$，并由 $\\sin(\\alpha) = 1/m$ 隐式定义削波角 $\\alpha \\in (0, \\pi/2]$。\n\n从傅里叶级数定义和周期波形的能量守恒出发，并仅使用三角积分的基本性质，推导基带输出电压总谐波失真的精确闭式表达式，其定义为\n$$\n\\mathrm{THD} \\triangleq \\sqrt{\\frac{V_{\\mathrm{rms}}^{2} - V_{1,\\mathrm{rms}}^{2}}{V_{1,\\mathrm{rms}}^{2}}},\n$$\n其中 $V_{\\mathrm{rms}}$ 是基带电压 $v(t)$ 在一个基波周期内的均方根值，$V_{1,\\mathrm{rms}}$ 是其基波分量的均方根值。请将您的最终答案表示为仅含调制指数 $m$ 的单一闭式解析表达式，使用标准初等函数。将最终的 THD 表示为无量纲小数（不要使用百分号）。无需进行数值代入。",
            "solution": "用户希望推导在过调制下运行的单相逆变器基带输出电压总谐波失真 (THD) 的闭式表达式。\n\n### 第一步：提取已知条件\n- 逆变器：单相全桥电压源逆变器。\n- 直流母线电压：恒定的 $V_{\\mathrm{dc}}$。\n- 调制方式：双极性正弦PWM，指令参考为 $m \\sin(\\omega t)$。\n- 调制指数：$m > 1$。\n- 平均输出电压：$v(t) = V_{\\mathrm{dc}} \\,\\mathrm{clip}\\big(m \\sin(\\omega t), -1, +1\\big)$。\n- 开关模型：理想开关，忽略开关纹波。\n- 角变量：$\\theta = \\omega t$。\n- 削波角：$\\alpha \\in (0, \\pi/2]$ 由 $\\sin(\\alpha) = 1/m$ 定义。\n- THD 定义：$\\mathrm{THD} \\triangleq \\sqrt{\\frac{V_{\\mathrm{rms}}^{2} - V_{1,\\mathrm{rms}}^{2}}{V_{1,\\mathrm{rms}}^{2}}}$，其中 $V_{\\mathrm{rms}}$ 是 $v(t)$ 的均方根值，$V_{1,\\mathrm{rms}}$ 是其基波分量的均方根值。\n- 要求输出：仅用 $m$ 表示的THD闭式表达式。\n\n### 第二步：使用已知条件进行验证\n该问题在电力电子学和傅里叶分析的原理上具有科学依据。过调制下PWM逆变器平均输出电压的模型是标准模型。该问题是适定的，提供了推导唯一解所需的所有信息（$v(t)$、$m>1$、THD定义）。语言客观，并使用了标准技术术语。它没有违反任何无效标准。因此，该问题被视为**有效**。\n\n### 第三步：推导\n总谐波失真 (THD) 定义为：\n$$\n\\mathrm{THD} = \\sqrt{\\frac{V_{\\mathrm{rms}}^{2} - V_{1,\\mathrm{rms}}^{2}}{V_{1,\\mathrm{rms}}^{2}}} = \\sqrt{\\frac{V_{\\mathrm{rms}}^{2}}{V_{1,\\mathrm{rms}}^{2}} - 1}\n$$\n其中 $V_{\\mathrm{rms}}^2$ 是总基带电压 $v(t)$ 的均方值，$V_{1,\\mathrm{rms}}^2$ 是其基波分量的均方值。我们必须计算这两个量。\n\n令 $\\theta = \\omega t$。输出电压波形 $v(\\theta)$ 由下式给出：\n$$\nv(\\theta) = V_{\\mathrm{dc}} \\, \\mathrm{clip}\\big(m \\sin(\\theta), -1, +1\\big)\n$$\n当 $|m \\sin(\\theta)| > 1$ 时发生削波，这等效于 $|\\sin(\\theta)| > 1/m$。使用定义 $\\sin(\\alpha) = 1/m$（其中 $\\alpha \\in (0, \\pi/2]$），一个半周期（$0 \\le \\theta \\le \\pi$）内的波形为：\n$$\nv(\\theta) =\n\\begin{cases}\nV_{\\mathrm{dc}} m \\sin(\\theta)  & \\text{for } 0 \\le \\theta \\le \\alpha \\\\\nV_{\\mathrm{dc}}  & \\text{for } \\alpha < \\theta < \\pi - \\alpha \\\\\nV_{\\mathrm{dc}} m \\sin(\\theta)  & \\text{for } \\pi - \\alpha \\le \\theta \\le \\pi\n\\end{cases}\n$$\n波形 $v(\\theta)$ 是一个奇函数，$v(-\\theta) = -v(\\theta)$，并具有四分之一波对称性，这意味着傅里叶级数只包含奇次正弦项。\n\n**1. 计算 $V_{\\mathrm{rms}}^2$**\n\n均方值通过在一个周期内积分得到：\n$$\nV_{\\mathrm{rms}}^2 = \\frac{1}{2\\pi} \\int_{0}^{2\\pi} v^2(\\theta) \\, d\\theta\n$$\n由于对称性，我们可以在四分之一周期内积分并乘以4：\n$$\nV_{\\mathrm{rms}}^2 = \\frac{4}{2\\pi} \\int_{0}^{\\pi/2} v^2(\\theta) \\, d\\theta = \\frac{2}{\\pi} \\int_{0}^{\\pi/2} v^2(\\theta) \\, d\\theta\n$$\n我们在削波角 $\\alpha$ 处分割积分：\n$$\nV_{\\mathrm{rms}}^2 = \\frac{2}{\\pi} \\left[ \\int_{0}^{\\alpha} (V_{\\mathrm{dc}} m \\sin(\\theta))^2 \\, d\\theta + \\int_{\\alpha}^{\\pi/2} (V_{\\mathrm{dc}})^2 \\, d\\theta \\right]\n$$\n$$\nV_{\\mathrm{rms}}^2 = \\frac{2V_{\\mathrm{dc}}^2}{\\pi} \\left[ m^2 \\int_{0}^{\\alpha} \\sin^2(\\theta) \\, d\\theta + \\int_{\\alpha}^{\\pi/2} 1 \\, d\\theta \\right]\n$$\n使用恒等式 $\\sin^2(\\theta) = \\frac{1}{2}(1 - \\cos(2\\theta))$，第一个积分为：\n$$\n\\int_{0}^{\\alpha} \\sin^2(\\theta) \\, d\\theta = \\left[ \\frac{\\theta}{2} - \\frac{\\sin(2\\theta)}{4} \\right]_{0}^{\\alpha} = \\frac{\\alpha}{2} - \\frac{\\sin(2\\alpha)}{4}\n$$\n第二个积分为：\n$$\n\\int_{\\alpha}^{\\pi/2} 1 \\, d\\theta = [\\theta]_{\\alpha}^{\\pi/2} = \\frac{\\pi}{2} - \\alpha\n$$\n将这些代回 $V_{\\mathrm{rms}}^2$ 的表达式中：\n$$\nV_{\\mathrm{rms}}^2 = \\frac{2V_{\\mathrm{dc}}^2}{\\pi} \\left[ m^2 \\left(\\frac{\\alpha}{2} - \\frac{\\sin(2\\alpha)}{4}\\right) + \\frac{\\pi}{2} - \\alpha \\right]\n$$\n$$\nV_{\\mathrm{rms}}^2 = \\frac{V_{\\mathrm{dc}}^2}{\\pi} \\left[ m^2\\alpha - \\frac{m^2}{2}\\sin(2\\alpha) + \\pi - 2\\alpha \\right]\n$$\n使用 $\\sin(2\\alpha) = 2\\sin(\\alpha)\\cos(\\alpha)$ 和 $m\\sin(\\alpha)=1$：\n$$\n\\frac{m^2}{2}\\sin(2\\alpha) = \\frac{m^2}{2}(2\\sin(\\alpha)\\cos(\\alpha)) = m(m\\sin(\\alpha))\\cos(\\alpha) = m(1)\\cos(\\alpha) = m\\cos(\\alpha)\n$$\n所以，均方电压为：\n$$\nV_{\\mathrm{rms}}^2 = \\frac{V_{\\mathrm{dc}}^2}{\\pi} \\left[ (m^2 - 2)\\alpha - m\\cos(\\alpha) + \\pi \\right]\n$$\n\n**2. 计算 $V_{1,\\mathrm{rms}}^2$**\n\n电压的基波分量为 $v_1(\\theta) = b_1 \\sin(\\theta)$，其中 $b_1$ 是傅里叶系数。\n$$\nb_1 = \\frac{1}{\\pi} \\int_{0}^{2\\pi} v(\\theta)\\sin(\\theta) \\, d\\theta\n$$\n利用四分之一波对称性，我们有：\n$$\nb_1 = \\frac{4}{\\pi} \\int_{0}^{\\pi/2} v(\\theta)\\sin(\\theta) \\, d\\theta\n$$\n在 $\\alpha$ 处分割积分：\n$$\nb_1 = \\frac{4}{\\pi} \\left[ \\int_{0}^{\\alpha} (V_{\\mathrm{dc}} m \\sin(\\theta))\\sin(\\theta) \\, d\\theta + \\int_{\\alpha}^{\\pi/2} V_{\\mathrm{dc}}\\sin(\\theta) \\, d\\theta \\right]\n$$\n$$\nb_1 = \\frac{4V_{\\mathrm{dc}}}{\\pi} \\left[ m \\int_{0}^{\\alpha} \\sin^2(\\theta) \\, d\\theta + \\int_{\\alpha}^{\\pi/2} \\sin(\\theta) \\, d\\theta \\right]\n$$\n我们已经计算了第一个积分。第二个积分为：\n$$\n\\int_{\\alpha}^{\\pi/2} \\sin(\\theta) \\, d\\theta = [-\\cos(\\theta)]_{\\alpha}^{\\pi/2} = 0 - (-\\cos(\\alpha)) = \\cos(\\alpha)\n$$\n将积分代入 $b_1$ 的表达式中：\n$$\nb_1 = \\frac{4V_{\\mathrm{dc}}}{\\pi} \\left[ m \\left(\\frac{\\alpha}{2} - \\frac{\\sin(2\\alpha)}{4}\\right) + \\cos(\\alpha) \\right]\n$$\n$$\nb_1 = \\frac{2V_{\\mathrm{dc}}}{\\pi} \\left[ m\\alpha - \\frac{m}{2}\\sin(2\\alpha) + 2\\cos(\\alpha) \\right]\n$$\n使用 $\\frac{m}{2}\\sin(2\\alpha) = (m\\sin\\alpha)\\cos\\alpha = \\cos\\alpha$：\n$$\nb_1 = \\frac{2V_{\\mathrm{dc}}}{\\pi} \\left[ m\\alpha - \\cos(\\alpha) + 2\\cos(\\alpha) \\right] = \\frac{2V_{\\mathrm{dc}}}{\\pi} (m\\alpha + \\cos(\\alpha))\n$$\n基波分量的均方根值为 $V_{1,\\mathrm{rms}} = b_1/\\sqrt{2}$。因此，其均方值为：\n$$\nV_{1,\\mathrm{rms}}^2 = \\frac{b_1^2}{2} = \\frac{1}{2} \\left( \\frac{2V_{\\mathrm{dc}}}{\\pi} (m\\alpha + \\cos(\\alpha)) \\right)^2 = \\frac{2V_{\\mathrm{dc}}^2}{\\pi^2} (m\\alpha + \\cos(\\alpha))^2\n$$\n\n**3. 计算 THD**\n\n现在，我们计算比率 $V_{\\mathrm{rms}}^2 / V_{1,\\mathrm{rms}}^2$：\n$$\n\\frac{V_{\\mathrm{rms}}^2}{V_{1,\\mathrm{rms}}^2} = \\frac{\\frac{V_{\\mathrm{dc}}^2}{\\pi} \\left[ (m^2 - 2)\\alpha - m\\cos(\\alpha) + \\pi \\right]}{\\frac{2V_{\\mathrm{dc}}^2}{\\pi^2} (m\\alpha + \\cos(\\alpha))^2}\n$$\n$V_{\\mathrm{dc}}^2$ 项相互抵消：\n$$\n\\frac{V_{\\mathrm{rms}}^2}{V_{1,\\mathrm{rms}}^2} = \\frac{\\pi \\left[ (m^2 - 2)\\alpha - m\\cos(\\alpha) + \\pi \\right]}{2(m\\alpha + \\cos(\\alpha))^2}\n$$\nTHD 则为：\n$$\n\\mathrm{THD} = \\sqrt{\\frac{\\pi \\left[ (m^2 - 2)\\alpha - m\\cos(\\alpha) + \\pi \\right]}{2(m\\alpha + \\cos(\\alpha))^2} - 1}\n$$\n最后，我们必须仅用 $m$ 来表示结果。我们使用以下关系：\n- $\\alpha = \\arcsin(1/m)$\n- $\\cos(\\alpha) = \\sqrt{1 - \\sin^2(\\alpha)} = \\sqrt{1 - (1/m)^2} = \\frac{\\sqrt{m^2-1}}{m}$ (因为 $\\alpha \\in (0, \\pi/2]$，所以 $\\cos(\\alpha) \\ge 0$)\n\n代入这些即可得到最终表达式。项 $m\\cos(\\alpha) = m \\frac{\\sqrt{m^2-1}}{m} = \\sqrt{m^2-1}$。\n$$\n\\mathrm{THD} = \\sqrt{\\frac{\\pi \\left[ (m^2 - 2)\\arcsin\\left(\\frac{1}{m}\\right) - \\sqrt{m^2-1} + \\pi \\right]}{2\\left(m\\arcsin\\left(\\frac{1}{m}\\right) + \\frac{\\sqrt{m^2-1}}{m}\\right)^2} - 1}\n$$\n这个表达式就是关于调制指数 $m$ 的 THD 的完整闭式解。",
            "answer": "$$\n\\boxed{\\sqrt{\\frac{\\pi \\left[ (m^2 - 2)\\arcsin\\left(\\frac{1}{m}\\right) - \\sqrt{m^2-1} + \\pi \\right]}{2\\left(m\\arcsin\\left(\\frac{1}{m}\\right) + \\frac{\\sqrt{m^2-1}}{m}\\right)^2} - 1}}\n$$"
        },
        {
            "introduction": "一个稳健的电力电子变换器设计必须考虑到故障情况。最后一个练习模拟了一种最坏情况：逆变器输出端发生直接短路。您将分析由此产生的故障电流瞬态，同时考虑寄生电感和保护电路延迟，并计算功率器件中耗散的能量，这是确保系统可靠性和安全性的一个关键因素。",
            "id": "3878678",
            "problem": "一个直流 (DC) 母线电压为 $V_{\\text{dc}}$ 的单相全桥电压源逆变器 (VSI) 驱动一个在其端子上发生直接短路的负载。在时间 $t=0$ 时，全桥中的一对对角绝缘栅型开关被指令导通，将直流母线的正极施加到短路负载上。由于栅极驱动偏斜，对角线上的第二个开关在第一个开关导通后延迟 $t_{\\text{skew}}$ 才达到导通状态，因此在 $t_{\\text{skew}}$ 之前没有回路电流流过。总电流回路的寄生电感为 $L_{s}$，主要由母排和器件封装决定。在短路的保护前间隔内，每个导通器件可以被建模为具有一个恒定的通态压降 $V_{\\text{on}}$，该压降在此范围内与电流无关。忽略回路中的任何额外电阻元件。\n\n过流保护监控桥臂电流，当电流达到阈值 $I_{\\text{trip}}$ 时触发跳闸。测量和比较器链引入了延迟 $t_{\\text{cmp}}$，门极驱动器又增加了一个传输延迟 $t_{\\text{drv}}$，因此对角器件持续导通直到 $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$。其中 $t_{\\text{trip}}$ 是从 $t_{\\text{skew}}$ 电流开始到电流首次等于 $I_{\\text{trip}}$ 的瞬间所经过的时间。假设开关瞬变与电感电流斜坡相比非常快，因此在导通期间，寄生电感上的回路电压为 $V_{\\text{dc}} - 2 V_{\\text{on}}$，并且电流线性增加。\n\n从基本关系式 $v_{L}(t) = L_{s}\\,\\frac{di}{dt}$ 和 $p(t) = v(t)\\,i(t)$ 出发，完成以下任务：\n\n1. 推导 $t_{\\text{skew}}$ 之后电流上升率 $\\frac{di}{dt}$ 的表达式，以及达到 $I_{\\text{trip}}$ 所需时间 $t_{\\text{trip}}$ 的表达式。\n2. 使用这些表达式，推导在保护动作开始关断它们之前，两个导通的对角器件中消耗的总能量的表达式，定义为\n$$\nE_{\\text{dev}} \\equiv \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}} \\big(2 V_{\\text{on}}\\big)\\, i(t)\\, dt,\n$$\n然后进行数值计算。\n\n使用以下参数值，在本问题中均为常量：\n$V_{\\text{dc}} = 400\\,\\text{V}$，$L_{s} = 2.0\\,\\mu\\text{H}$，$V_{\\text{on}} = 2.0\\,\\text{V}$ (每个器件)，$t_{\\text{skew}} = 150\\,\\text{ns}$，$I_{\\text{trip}} = 150\\,\\text{A}$，$t_{\\text{cmp}} = 200\\,\\text{ns}$，以及 $t_{\\text{drv}} = 100\\,\\text{ns}$。\n\n提供 $E_{\\text{dev}}$ 的最终数值，单位为焦耳。将您的答案四舍五入到四位有效数字。最终能量以 $\\text{J}$ 表示。",
            "solution": "在尝试求解之前，对问题陈述的有效性进行评估。\n\n### 步骤 1：提取已知条件\n- 系统：单相全桥电压源逆变器 (VSI)。\n- 直流母线电压：$V_{\\text{dc}}$。\n- 负载：直接短路。\n- 事件启动：在 $t=0$ 时，一对对角开被指令导通。\n- 栅极驱动偏斜：在 $t_{\\text{skew}}$ 之前无电流流过。\n- 总回路寄生电感：$L_{s}$。\n- 每个器件的通态压降：$V_{\\text{on}}$ (恒定)。\n- 其他电阻：忽略。\n- 过流保护跳闸阈值：$I_{\\text{trip}}$。\n- 比较器延迟：$t_{\\text{cmp}}$。\n- 栅极驱动器传输延迟：$t_{\\text{drv}}$。\n- 导通间隔结束时间：$t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$。\n- $t_{\\text{trip}}$ 的定义：从电流开始 ($t_{\\text{skew}}$) 到电流等于 $I_{\\text{trip}}$ 的时间。\n- 假设：导通期间寄生电感上的电压为 $V_{\\text{dc}} - 2 V_{\\text{on}}$，意味着电流线性上升。\n- 基本关系式：$v_{L}(t) = L_{s}\\,\\frac{di}{dt}$ 和 $p(t) = v(t)\\,i(t)$。\n- 待计算能量：$E_{\\text{dev}} \\equiv \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}} \\big(2 V_{\\text{on}}\\big)\\, i(t)\\, dt$。\n- 数值：\n  - $V_{\\text{dc}} = 400\\,\\text{V}$\n  - $L_{s} = 2.0\\,\\mu\\text{H} = 2.0 \\times 10^{-6}\\,\\text{H}$\n  - $V_{\\text{on}} = 2.0\\,\\text{V}$\n  - $t_{\\text{skew}} = 150\\,\\text{ns} = 150 \\times 10^{-9}\\,\\text{s}$\n  - $I_{\\text{trip}} = 150\\,\\text{A}$\n  - $t_{\\text{cmp}} = 200\\,\\text{ns} = 200 \\times 10^{-9}\\,\\text{s}$\n  - $t_{\\text{drv}} = 100\\,\\text{ns} = 100 \\times 10^{-9}\\,\\text{s}$\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据，描述了电力电子逆变器中的一个标准故障情况（直通或短路事件）。该模型基于电路理论的基本原理（基尔霍夫电压定律）和电感器的本构关系。元件模型，例如开关的恒定通态压降和各种传输延迟，是电力电子分析中使用的标准且有效的简化方法。该问题是适定的，提供了确定唯一解所需的所有必要参数和条件。语言客观而精确。数值对于现代功率变换器是物理上现实的。不存在科学、逻辑或事实上的缺陷。\n\n### 步骤 3：结论与行动\n问题有效。将制定完整的解决方案。\n\n该问题需要进行两部分的推导，然后进行数值评估。\n\n**1. 电流上升率和跳闸时间的推导**\n\n对于时间间隔 $t \\ge t_{\\text{skew}}$，由直流电源、两个导通的开关和寄生电感形成一个导通回路。负载为短路，不提供阻抗。对该回路应用基尔霍夫电压定律 (KVL) 得：\n$$\nV_{\\text{dc}} - V_{\\text{on}} - v_{L}(t) - V_{\\text{on}} = 0\n$$\n其中 $v_{L}(t)$ 是总寄生电感 $L_s$ 两端的电压。这可以简化为：\n$$\nv_{L}(t) = V_{\\text{dc}} - 2 V_{\\text{on}}\n$$\n这证实了问题陈述中规定的电压。问题提供了电感器的基本关系式，$v_{L}(t) = L_{s}\\frac{di}{dt}$。将 $v_{L}(t)$ 的两个表达式相等：\n$$\nL_{s}\\frac{di}{dt} = V_{\\text{dc}} - 2 V_{\\text{on}}\n$$\n因此，在 $t > t_{\\text{skew}}$ 时，电流上升率是恒定的：\n$$\n\\frac{di}{dt} = \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}}\n$$\n电流 $i(t)$ 在 $t = t_{\\text{skew}}$ 开始流动，初始条件为 $i(t_{\\text{skew}}) = 0$。我们通过从开始时间 $t_{\\text{skew}}$ 对变化率进行积分来求得电流：\n$$\ni(t) = \\int_{t_{\\text{skew}}}^{t} \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} d\\tau = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) (t - t_{\\text{skew}}) \\quad \\text{for } t \\ge t_{\\text{skew}}\n$$\n时间 $t_{\\text{trip}}$ 定义为从 $t=t_{\\text{skew}}$ 电流斜坡开始到电流达到阈值 $I_{\\text{trip}}$ 的持续时间。这意味着在绝对时间 $t = t_{\\text{skew}} + t_{\\text{trip}}$，电流为 $i(t_{\\text{skew}} + t_{\\text{trip}}) = I_{\\text{trip}}$。将此代入 $i(t)$ 的表达式：\n$$\nI_{\\text{trip}} = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) ((t_{\\text{skew}} + t_{\\text{trip}}) - t_{\\text{skew}}) = \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) t_{\\text{trip}}\n$$\n求解 $t_{\\text{trip}}$ 得：\n$$\nt_{\\text{trip}} = \\frac{L_{s} I_{\\text{trip}}}{V_{\\text{dc}} - 2 V_{\\text{on}}}\n$$\n\n**2. 器件能量耗散的推导与评估**\n\n两个导通器件中耗散的能量 $E_{\\text{dev}}$ 由瞬时功率 $p_{\\text{dev}}(t)$ 在指定的导通区间上的积分给出。功率为 $p_{\\text{dev}}(t) = v_{\\text{dev}}(t) i(t)$，其中两个器件上的总压降为 $v_{\\text{dev}}(t) = 2 V_{\\text{on}}$。\n能量积分定义为：\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{end}}} (2 V_{\\text{on}})\\, i(t)\\, dt\n$$\n其中导通在 $t_{\\text{end}} = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}}$ 结束。让我们将总保护延迟定义为 $t_{\\text{delay}} = t_{\\text{cmp}} + t_{\\text{drv}}$。那么 $t_{\\text{end}} = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}$。\n代入 $i(t)$ 的表达式：\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left[ \\left( \\frac{V_{\\text{dc}} - 2 V_{\\text{on}}}{L_{s}} \\right) (t - t_{\\text{skew}}) \\right] dt\n$$\n使用关系式 $I_{\\text{trip}} = \\frac{V_{\\text{dc}} - 2V_{\\text{on}}}{L_s}t_{\\text{trip}}$，我们可以将电流斜率表示为 $\\frac{I_{\\text{trip}}}{t_{\\text{trip}}}$。\n$$\nE_{\\text{dev}} = \\int_{t_{\\text{skew}}}^{t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left( \\frac{I_{\\text{trip}}}{t_{\\text{trip}}} \\right) (t - t_{\\text{skew}}) dt\n$$\n为简化积分，我们进行变量替换：令 $\\tau = t - t_{\\text{skew}}$，则 $d\\tau = dt$。积分限从 $t = t_{\\text{skew}}$ 到 $t = t_{\\text{skew}} + t_{\\text{trip}} + t_{\\text{delay}}$，对应于 $\\tau = 0$ 到 $\\tau = t_{\\text{trip}} + t_{\\text{delay}}$。\n$$\nE_{\\text{dev}} = \\int_{0}^{t_{\\text{trip}} + t_{\\text{delay}}} (2 V_{\\text{on}}) \\left( \\frac{I_{\\text{trip}}}{t_{\\text{trip}}} \\right) \\tau d\\tau\n$$\n项 $2$、$V_{\\text{on}}$、$I_{\\text{trip}}$ 和 $t_{\\text{trip}}$ 相对于积分变量 $\\tau$ 是常数。\n$$\nE_{\\text{dev}} = \\frac{2 V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} \\int_{0}^{t_{\\text{trip}} + t_{\\text{delay}}} \\tau d\\tau = \\frac{2 V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} \\left[ \\frac{\\tau^2}{2} \\right]_{0}^{t_{\\text{trip}} + t_{\\text{delay}}}\n$$\n$$\nE_{\\text{dev}} = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{delay}})^2 = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{cmp}} + t_{\\text{drv}})^2\n$$\n这是耗散能量的最终符号表达式。\n\n**数值计算**\n\n我们将给定的参数值代入推导出的表达式中。\n$V_{\\text{dc}} = 400\\,\\text{V}$，$V_{\\text{on}} = 2.0\\,\\text{V}$，$L_{s} = 2.0 \\times 10^{-6}\\,\\text{H}$，$I_{\\text{trip}} = 150\\,\\text{A}$，$t_{\\text{cmp}} = 200 \\times 10^{-9}\\,\\text{s}$，$t_{\\text{drv}} = 100 \\times 10^{-9}\\,\\text{s}$。\n\n首先，计算驱动电流斜坡的有效电压：\n$$\nV_{\\text{dc}} - 2 V_{\\text{on}} = 400\\,\\text{V} - 2 \\times (2.0\\,\\text{V}) = 396\\,\\text{V}\n$$\n接下来，计算达到跳闸电流所需的时间 $t_{\\text{trip}}$：\n$$\nt_{\\text{trip}} = \\frac{L_{s} I_{\\text{trip}}}{V_{\\text{dc}} - 2 V_{\\text{on}}} = \\frac{(2.0 \\times 10^{-6}\\,\\text{H}) (150\\,\\text{A})}{396\\,\\text{V}} = \\frac{300 \\times 10^{-6}}{396}\\,\\text{s} = \\frac{25}{33} \\times 10^{-6}\\,\\text{s}\n$$\n$t_{\\text{trip}} \\approx 7.5757... \\times 10^{-7}\\,\\text{s}$。\n\n接下来，计算总保护延迟 $t_{\\text{delay}}$：\n$$\nt_{\\text{delay}} = t_{\\text{cmp}} + t_{\\text{drv}} = 200 \\times 10^{-9}\\,\\text{s} + 100 \\times 10^{-9}\\,\\text{s} = 300 \\times 10^{-9}\\,\\text{s} = 0.3 \\times 10^{-6}\\,\\text{s}\n$$\n现在，我们可以计算耗散的能量 $E_{\\text{dev}}$：\n$$\nE_{\\text{dev}} = \\frac{V_{\\text{on}} I_{\\text{trip}}}{t_{\\text{trip}}} (t_{\\text{trip}} + t_{\\text{delay}})^2\n$$\n$$\nE_{\\text{dev}} = \\frac{(2.0\\,\\text{V})(150\\,\\text{A})}{\\frac{25}{33} \\times 10^{-6}\\,\\text{s}} \\left( \\frac{25}{33} \\times 10^{-6}\\,\\text{s} + 0.3 \\times 10^{-6}\\,\\text{s} \\right)^2\n$$\n$$\nE_{\\text{dev}} = \\frac{300}{\\frac{25}{33} \\times 10^{-6}} \\left( (\\frac{25}{33} + \\frac{3}{10}) \\times 10^{-6} \\right)^2 = \\frac{300 \\times 33}{25} \\times 10^{6} \\left( (\\frac{250+99}{330}) \\times 10^{-6} \\right)^2\n$$\n$$\nE_{\\text{dev}} = 396 \\times 10^{6} \\left( \\frac{349}{330} \\times 10^{-6} \\right)^2 = 396 \\times 10^{6} \\times \\left(\\frac{349}{330}\\right)^2 \\times 10^{-12}\n$$\n$$\nE_{\\text{dev}} = 396 \\times \\frac{121801}{108900} \\times 10^{-6} = \\frac{48233196}{108900} \\times 10^{-6}\\,\\text{J}\n$$\n$$\nE_{\\text{dev}} \\approx 442.912727... \\times 10^{-6}\\,\\text{J} = 0.0004429127... \\,\\text{J}\n$$\n将结果四舍五入到四位有效数字，我们得到：\n$$\nE_{\\text{dev}} \\approx 4.429 \\times 10^{-4}\\,\\text{J}\n$$",
            "answer": "$$\n\\boxed{4.429 \\times 10^{-4}}\n$$"
        }
    ]
}
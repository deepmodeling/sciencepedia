{
    "hands_on_practices": [
        {
            "introduction": "Multi-level inverters like the Neutral-Point-Clamped (NPC) topology are central to high-power applications due to their superior output voltage quality. This exercise takes you back to the foundational principles of carrier-based Pulse Width Modulation (PWM). By deriving the fundamental output voltage amplitude from scratch, you will solidify your understanding of how the modulation index directly controls the power delivered by the inverter, a critical skill for designing and controlling any PWM converter.",
            "id": "3845596",
            "problem": "A three-phase, three-level Neutral-Point-Clamped (NPC) inverter employs level-shifted sinusoidal Pulse Width Modulation (SPWM) in the phase-disposition (PD) arrangement. The direct current (DC) bus voltage is denoted by $V_{dc}$. The sinusoidal reference (modulating) signal for each phase is $m_{a} \\sin(\\omega_{m} t)$, with modulation index $m_{a} = 0.9$ and fundamental frequency $f_{m} = \\omega_{m} / (2\\pi)$, and it is compared against two in-phase, level-shifted triangular carriers of frequency $f_{c} = 10\\,\\text{kHz}$ per phase leg to realize a three-level output that takes values in $\\{-V_{dc}/2,\\,0,\\, +V_{dc}/2\\}$.\n\nStarting from first principles of carrier-based SPWM and the definition of the average value of the switching waveform over each carrier period as the control action that enforces the desired fundamental, derive the amplitude of the dominant harmonic component in the single-phase line-to-neutral output voltage of the inverter. You may assume ideal devices, negligible dead-time, and that $f_{c} \\gg f_{m}$ such that the switching ripple averages out over a fundamental period. Clearly state any symmetry arguments that justify which component is dominant in the spectrum for the given operating point. Express the final amplitude as a closed-form analytic expression in terms of $V_{dc}$ only. No numerical rounding is required. The amplitude should be reported as the peak (not root-mean-square) of the line-to-neutral fundamental component, in Volts. Angles, if any, must be in radians.",
            "solution": "The core principle of sinusoidal pulse width modulation (SPWM) is that the average value of the switched output voltage over a single carrier period, $\\langle v_{out}(t) \\rangle$, tracks the low-frequency reference signal, $v_{ref}(t)$. This principle is valid under the given assumption that the carrier frequency $f_c$ is much greater than the modulating frequency $f_m$ ($f_c \\gg f_m$).\n\nIn a three-level Neutral-Point-Clamped (NPC) inverter with level-shifted, phase-disposition (PD) SPWM, the output voltage for a single phase (line-to-neutral, denoted $v_{ao}$) is generated by comparing a sinusoidal reference signal with two triangular carrier signals. We will normalize the modulation scheme. Let the two carriers be $v_{c1}(t)$, a triangular wave on the interval $[0, 1]$, and $v_{c2}(t)$, a triangular wave on the interval $[-1, 0]$. Both carriers are in phase, with frequency $f_c$. The normalized sinusoidal reference signal for phase 'a' is $v_{a,ref}(t) = m_a \\sin(\\omega_m t)$, where $m_a$ is the modulation index. For linear modulation, $0 \\le m_a \\le 1$.\n\nThe switching logic determines the output voltage level based on the comparison:\n1.  If $v_{a,ref}(t) > v_{c1}(t)$, the output $v_{ao}(t)$ is $+V_{dc}/2$.\n2.  If $v_{c2}(t) < v_{a,ref}(t) < v_{c1}(t)$, the output $v_{ao}(t)$ is $0$.\n3.  If $v_{a,ref}(t) < v_{c2}(t)$, the output $v_{ao}(t)$ is $-V_{dc}/2$.\n\nWe derive the relationship between the instantaneous reference value and the average pole voltage over one carrier period, $T_c = 1/f_c$. Since $f_c \\gg f_m$, we can treat $v_{a,ref}(t)$ as a constant, denoted $v_{a,ref}$, within a single period $T_c$.\n\nCase 1: $0 < v_{a,ref} \\le 1$.\nIn this range, $v_{a,ref}$ is always greater than the upper bound of $v_{c2}(t)$, so the comparison with $v_{c2}(t)$ is irrelevant. The output voltage switches between $+V_{dc}/2$ and $0$. The duty cycle for the $+V_{dc}/2$ state, $d_{+}$, is the fraction of the period where $v_{a,ref} > v_{c1}(t)$. For a triangular carrier on $[0,1]$, this fraction is simply equal to the reference value.\n$$d_{+} = v_{a,ref}$$\nThe duty cycle for the $0$ state is $d_{0} = 1 - d_{+}$. The duty cycle for the $-V_{dc}/2$ state, $d_{-}$, is $0$.\nThe average voltage over $T_c$ is:\n$$\\langle v_{ao} \\rangle = d_{+} \\left( \\frac{V_{dc}}{2} \\right) + d_{0}(0) + d_{-} \\left( -\\frac{V_{dc}}{2} \\right) = v_{a,ref} \\left( \\frac{V_{dc}}{2} \\right)$$\n\nCase 2: $-1 \\le v_{a,ref} < 0$.\nIn this range, $v_{a,ref}$ is always less than the lower bound of $v_{c1}(t)$, so the comparison with $v_{c1}(t)$ is irrelevant. The output voltage switches between $0$ and $-V_{dc}/2$. The duty cycle for the $-V_{dc}/2$ state, $d_{-}$, is the fraction of the period where $v_{a,ref} < v_{c2}(t)$. For a triangular carrier on $[-1,0]$, this fraction is equal to the magnitude of the reference value.\n$$d_{-} = |v_{a,ref}| = -v_{a,ref}$$\nThe duty cycle for the $0$ state is $d_{0} = 1 - d_{-}$. The duty cycle for the $+V_{dc}/2$ state, $d_{+}$, is $0$.\nThe average voltage over $T_c$ is:\n$$\\langle v_{ao} \\rangle = d_{+} \\left( \\frac{V_{dc}}{2} \\right) + d_{0}(0) + d_{-} \\left( -\\frac{V_{dc}}{2} \\right) = (-v_{a,ref}) \\left( -\\frac{V_{dc}}{2} \\right) = v_{a,ref} \\left( \\frac{V_{dc}}{2} \\right)$$\n\nFor the entire linear modulation range ($-1 \\le v_{a,ref} \\le 1$), the relationship is linear:\n$$\\langle v_{ao}(t) \\rangle = v_{a,ref}(t) \\cdot \\frac{V_{dc}}{2}$$\nThis average voltage represents the low-frequency component of the output waveform, which is the desired fundamental component. Substituting the expression for the reference signal, $v_{a,ref}(t) = m_a \\sin(\\omega_m t)$:\n$$v_{ao,1}(t) = \\langle v_{ao}(t) \\rangle = \\left( m_a \\sin(\\omega_m t) \\right) \\cdot \\frac{V_{dc}}{2} = m_a \\frac{V_{dc}}{2} \\sin(\\omega_m t)$$\n\nThe problem asks for the \"dominant harmonic component.\" In the context of PWM inverters, the primary goal is to synthesize a strong fundamental component while pushing unwanted harmonics to high frequencies. The amplitude of the fundamental is proportional to the modulation index $m_a$. For a high modulation index such as $m_a = 0.9$, the amplitude of the fundamental is significantly larger than any other harmonic component. The unwanted harmonics are clustered around multiples of the carrier frequency ($f_c, 2f_c, \\dots$), which are far removed from the fundamental frequency $f_m$. Therefore, the fundamental component is, by design and by magnitude, the dominant component in the output voltage spectrum.\n\nThe amplitude (peak value) of the fundamental component of the line-to-neutral voltage, $V_{ao,1,peak}$, is the coefficient of the sine term:\n$$V_{ao,1,peak} = m_a \\frac{V_{dc}}{2}$$\nThe problem requires the final expression in terms of $V_{dc}$ only, using the given value of the modulation index, $m_a=0.9$.\n$$V_{ao,1,peak} = 0.9 \\cdot \\frac{V_{dc}}{2} = 0.45 V_{dc}$$\nThis is the closed-form analytic expression for the peak amplitude of the dominant harmonic (the fundamental) in the line-to-neutral output voltage.",
            "answer": "$$\n\\boxed{0.45 V_{dc}}\n$$"
        },
        {
            "introduction": "In an ideal world, techniques like interleaving would perfectly cancel switching harmonics, but real-world hardware is never perfect. This practice explores the practical consequences of small, unavoidable timing errors in interleaved inverter modules. Using phasor analysis, you will quantify how a minor phase mismatch prevents perfect cancellation and results in a residual harmonic component, providing insight into the performance limitations of real systems.",
            "id": "3845601",
            "problem": "Consider two identical interleaved modules of a three-phase Voltage Source Inverter (VSI) using sinusoidal Pulse Width Modulation (PWM), each producing at the point of common coupling a dominant switching ripple component at angular frequency $\\omega_{h}$ with per-module amplitude $A_{h}$. Interleaving is implemented so that, in the ideal case, the ripple components from the two modules at $\\omega_{h}$ are exactly $180^{\\circ}$ out of phase and cancel. Due to a slight phase mismatch between the modules, the actual phase difference at $\\omega_{h}$ is $\\pi + \\delta$, where $\\delta$ is small and represents the phase error caused by practical timing skew in the gate drivers and sampling of the PWM carriers. The switching ripple component of each module can be represented by the real part of a complex exponential of the form $A_{h} \\exp\\big(j(\\omega_{h} t + \\phi)\\big)$.\n\nUsing only the fundamental representation of periodic waveforms via Fourier series and the superposition principle in the frequency domain (phasor addition of sinusoidal components at the same angular frequency), derive the resultant amplitude at $\\omega_{h}$ when the two module ripple components are summed with a phase difference of $\\pi + \\delta$. Then, for a phase error of $\\delta = 2^{\\circ}$, compute the residual amplitude at $\\omega_{h}$ normalized by the single-module amplitude $A_{h}$, i.e., compute the dimensionless ratio $\\frac{A_{\\text{res}}}{A_{h}}$. When evaluating trigonometric functions, use radians. Round your final numerical answer to four significant figures and express it as a dimensionless number with no units.",
            "solution": "We can represent the two ripple voltage components, $v_1(t)$ and $v_2(t)$, using complex exponentials (phasors) as suggested. Let the first module's ripple component be the reference signal. Its complex representation is given by:\n$$v_1(t) = \\text{Re}\\{A_{h}\\exp(j(\\omega_h t))\\}$$\nFor this signal, the phase is $0$. The corresponding phasor in the frequency domain is $\\mathbf{V}_1 = A_h \\angle 0 = A_h$.\n\nThe second module's ripple component has the same amplitude $A_h$ and frequency $\\omega_h$, but is phase-shifted by $\\pi + \\delta$ relative to the first. Its complex representation is:\n$$v_2(t) = \\text{Re}\\{A_{h}\\exp(j(\\omega_h t + \\pi + \\delta))\\}$$\nThe corresponding phasor is $\\mathbf{V}_2 = A_h \\angle (\\pi + \\delta) = A_h \\exp(j(\\pi + \\delta))$.\n\nAccording to the superposition principle, the resultant voltage ripple, $v_{\\text{res}}(t) = v_1(t) + v_2(t)$, has a phasor representation $\\mathbf{V}_{\\text{res}}$ that is the vector sum of the individual phasors:\n$$\\mathbf{V}_{\\text{res}} = \\mathbf{V}_1 + \\mathbf{V}_2 = A_h + A_h \\exp(j(\\pi + \\delta))$$\n\nTo find the resultant amplitude, we first express $\\exp(j(\\pi + \\delta))$ in rectangular form using Euler's formula, $\\exp(j\\theta) = \\cos(\\theta) + j\\sin(\\theta)$.\n$$\\exp(j(\\pi + \\delta)) = \\cos(\\pi + \\delta) + j\\sin(\\pi + \\delta)$$\nUsing trigonometric identities for angle sums, $\\cos(\\pi + \\delta) = -\\cos(\\delta)$ and $\\sin(\\pi + \\delta) = -\\sin(\\delta)$.\nSo, $\\exp(j(\\pi + \\delta)) = -\\cos(\\delta) - j\\sin(\\delta)$.\n\nSubstituting this back into the expression for $\\mathbf{V}_{\\text{res}}$:\n$$\\mathbf{V}_{\\text{res}} = A_h + A_h(-\\cos(\\delta) - j\\sin(\\delta))$$\n$$\\mathbf{V}_{\\text{res}} = A_h(1 - \\cos(\\delta)) - jA_h\\sin(\\delta)$$\n\nThe resultant amplitude, $A_{\\text{res}}$, is the magnitude of the complex phasor $\\mathbf{V}_{\\text{res}}$:\n$$A_{\\text{res}} = |\\mathbf{V}_{\\text{res}}| = \\sqrt{(\\text{Re}\\{\\mathbf{V}_{\\text{res}}\\})^2 + (\\text{Im}\\{\\mathbf{V}_{\\text{res}}\\})^2}$$\n$$A_{\\text{res}} = \\sqrt{[A_h(1 - \\cos(\\delta))]^2 + [-A_h\\sin(\\delta)]^2}$$\n$$A_{\\text{res}} = A_h \\sqrt{(1 - \\cos(\\delta))^2 + \\sin^2(\\delta)}$$\nExpanding the squared term:\n$$A_{\\text{res}} = A_h \\sqrt{1 - 2\\cos(\\delta) + \\cos^2(\\delta) + \\sin^2(\\delta)}$$\nUsing the fundamental trigonometric identity $\\cos^2(\\delta) + \\sin^2(\\delta) = 1$:\n$$A_{\\text{res}} = A_h \\sqrt{1 - 2\\cos(\\delta) + 1} = A_h \\sqrt{2 - 2\\cos(\\delta)} = A_h \\sqrt{2(1 - \\cos(\\delta))}$$\nTo simplify this further, we use the half-angle identity $1 - \\cos(\\delta) = 2\\sin^2(\\frac{\\delta}{2})$:\n$$A_{\\text{res}} = A_h \\sqrt{2 \\left( 2\\sin^2\\left(\\frac{\\delta}{2}\\right) \\right)} = A_h \\sqrt{4\\sin^2\\left(\\frac{\\delta}{2}\\right)}$$\nSince $\\delta$ is a small physical error, it is real and non-negative, so $\\sin(\\frac{\\delta}{2})$ is also real and non-negative. We can take the principal square root:\n$$A_{\\text{res}} = 2A_h\\sin\\left(\\frac{\\delta}{2}\\right)$$\nThis is the general expression for the resultant amplitude due to the phase error $\\delta$.\n\nNext, we compute the normalized residual amplitude $\\frac{A_{\\text{res}}}{A_h}$ for a phase error of $\\delta = 2^{\\circ}$.\nFrom the derived expression, the normalized amplitude is:\n$$\\frac{A_{\\text{res}}}{A_h} = 2\\sin\\left(\\frac{\\delta}{2}\\right)$$\nThe problem specifies that trigonometric functions be evaluated using radians. We must convert the phase error $\\delta$ from degrees to radians.\n$$\\delta_{\\text{rad}} = 2^{\\circ} \\times \\frac{\\pi}{180^{\\circ}} = \\frac{\\pi}{90} \\text{ radians}$$\nThe argument of the sine function is $\\frac{\\delta}{2}$, so we have:\n$$\\frac{\\delta_{\\text{rad}}}{2} = \\frac{1}{2} \\times \\frac{\\pi}{90} = \\frac{\\pi}{180} \\text{ radians}$$\nSubstituting this value into the expression for the normalized amplitude:\n$$\\frac{A_{\\text{res}}}{A_h} = 2\\sin\\left(\\frac{\\pi}{180}\\right)$$\nNow we compute the numerical value:\n$$\\sin\\left(\\frac{\\pi}{180}\\right) \\approx 0.0174524064$$\n$$\\frac{A_{\\text{res}}}{A_h} \\approx 2 \\times 0.0174524064 \\approx 0.0349048128$$\nThe problem requires rounding the final answer to four significant figures.\n$$\\frac{A_{\\text{res}}}{A_h} \\approx 0.03490$$",
            "answer": "$$\\boxed{0.03490}$$"
        },
        {
            "introduction": "Operating an inverter in the overmodulation region is a common strategy to maximize the fundamental output voltage, but this comes at the cost of introducing significant harmonic distortion. This problem provides a rigorous, hands-on analysis of this trade-off by modeling the output as a clipped sine wave. You will apply Fourier analysis and the definition of Total Harmonic Distortion (THD) to derive a closed-form expression for THD and evaluate it for the square-wave limit, building a quantitative understanding of the waveform degradation that accompanies this operating mode.",
            "id": "3845627",
            "problem": "A single-phase full-bridge inverter with a direct current (DC) link voltage $V_{\\mathrm{dc}}$ operates under sinusoidal pulse width modulation (SPWM), where a sinusoidal reference of amplitude characterized by a modulation index $m_{a}$ is compared to a high-frequency triangular carrier. Assume the switching frequency is sufficiently high that, for the purposes of harmonic analysis at the fundamental frequency and its integer harmonics, the switching sidebands around the carrier and its multiples can be idealized as removed by an ideal low-pass view of the output. In the linear region $m_{a} \\leq 1$, the low-frequency output is a pure sinusoid. In the overmodulation region $m_{a} > 1$, the comparator saturates and the low-frequency component of the output becomes a clipped sine wave with a flat-top region each half-cycle.\n\nLet the normalized low-frequency output over one electrical period be denoted by $f(\\theta)$ with $\\theta \\in [0,2\\pi)$, defined by\n- $f(\\theta) = \\sin(\\theta)$ for $\\theta \\in [0,\\frac{\\pi}{2}-\\alpha] \\cup [\\frac{\\pi}{2}+\\alpha,\\pi]$,\n- $f(\\theta) = 1$ for $\\theta \\in [\\frac{\\pi}{2}-\\alpha,\\frac{\\pi}{2}+\\alpha]$,\n- extended to $[0,2\\pi)$ by odd half-wave symmetry, i.e., $f(\\theta+\\pi) = -f(\\theta)$.\n\nHere, $\\alpha \\in [0,\\frac{\\pi}{2}]$ is the clipping half-angle that increases from $\\alpha=0$ at the linear limit $m_{a}=1$ to $\\alpha=\\frac{\\pi}{2}$ at the full square-wave limit. For a notional overmodulation command amplitude $\\hat{m} \\geq 1$, one may relate $\\alpha$ to $\\hat{m}$ by $\\cos(\\alpha) = 1/\\hat{m}$, but you do not need this relation to answer the question.\n\nTotal Harmonic Distortion (THD) of the voltage is defined with respect to the root-mean-square (RMS) of the fundamental component as\n$$\n\\mathrm{THD} \\triangleq \\frac{\\sqrt{\\sum_{n=2}^{\\infty}V_{n,\\mathrm{rms}}^{2}}}{V_{1,\\mathrm{rms}}} \\, ,\n$$\nwhere $V_{n,\\mathrm{rms}}$ is the RMS value of the $n$-th harmonic of the voltage waveform. Treat $f(\\theta)$ as the normalized voltage, so the THD computed from $f(\\theta)$ is dimensionless.\n\nStarting from the Fourier series definition and fundamental RMS definitions, derive a closed-form expression for $\\mathrm{THD}$ of $f(\\theta)$ as a function of the clipping angle $\\alpha$. Then evaluate the THD at the full square-wave limit $\\alpha=\\frac{\\pi}{2}$. Your final answer must be a single numerical value rounded to four significant figures. Express the THD as a decimal without a percentage sign. Angles are in radians.",
            "solution": "The definition of Total Harmonic Distortion (THD) can be expressed in terms of the total RMS value of the waveform, $V_{\\mathrm{rms,total}}$, and the RMS value of its fundamental component, $V_{1,\\mathrm{rms}}$. The total RMS value squared is the sum of the squares of the RMS values of all harmonic components: $V_{\\mathrm{rms,total}}^2 = \\sum_{n=1}^{\\infty}V_{n,\\mathrm{rms}}^2 = V_{1,\\mathrm{rms}}^2 + \\sum_{n=2}^{\\infty}V_{n,\\mathrm{rms}}^2$. From this, we can express the THD as:\n$$\n\\mathrm{THD} = \\sqrt{\\frac{V_{\\mathrm{rms,total}}^2 - V_{1,\\mathrm{rms}}^2}{V_{1,\\mathrm{rms}}^2}} = \\sqrt{\\frac{V_{\\mathrm{rms,total}}^2}{V_{1,\\mathrm{rms}}^2} - 1} \\, .\n$$\nOur strategy will be to calculate $V_{\\mathrm{rms,total}}^2$ and $V_{1,\\mathrm{rms}}^2$ at the square-wave limit, $\\alpha = \\frac{\\pi}{2}$.\n\nAt the full square-wave limit, $\\alpha = \\frac{\\pi}{2}$, the waveform $f(\\theta)$ becomes a square wave that is $1$ for $\\theta \\in [0, \\pi)$ and $-1$ for $\\theta \\in [\\pi, 2\\pi)$.\n\nFirst, we calculate the total RMS value squared, $V_{\\mathrm{rms,total}}^2$, for this square wave.\n$$\nV_{\\mathrm{rms,total}}^2 = \\frac{1}{2\\pi} \\int_0^{2\\pi} f^2(\\theta) \\, d\\theta\n$$\nSince $f^2(\\theta) = 1$ for all $\\theta$, the integral is straightforward:\n$$\nV_{\\mathrm{rms,total}}^2 = \\frac{1}{2\\pi} \\int_0^{2\\pi} 1 \\, d\\theta = \\frac{1}{2\\pi} [2\\pi] = 1\n$$\nThis is the expected result, as the RMS value of a square wave with amplitude $1$ is $1$.\n\nNext, we calculate the RMS value of the fundamental component, $V_{1,\\mathrm{rms}}$, for the square wave. This is determined by its Fourier series coefficient $b_1$. The waveform has odd half-wave symmetry and is an odd function, so all even harmonics and all cosine terms ($a_n$) are zero.\n$$\nb_1 = \\frac{1}{\\pi} \\int_0^{2\\pi} f(\\theta)\\sin(\\theta) \\, d\\theta = \\frac{1}{\\pi} \\left( \\int_0^{\\pi} (1)\\sin(\\theta) \\, d\\theta + \\int_{\\pi}^{2\\pi} (-1)\\sin(\\theta) \\, d\\theta \\right)\n$$\n$$\nb_1 = \\frac{1}{\\pi} \\left( [-\\cos(\\theta)]_0^{\\pi} - [-\\cos(\\theta)]_{\\pi}^{2\\pi} \\right) = \\frac{1}{\\pi} \\left( (-\\cos(\\pi) - (-\\cos(0))) - (-\\cos(2\\pi) - (-\\cos(\\pi))) \\right)\n$$\n$$\nb_1 = \\frac{1}{\\pi} \\left( (-(-1) - (-1)) - (-1 - (-(-1))) \\right) = \\frac{1}{\\pi} \\left( (1+1) - (-1 - 1) \\right) = \\frac{1}{\\pi}(2 - (-2)) = \\frac{4}{\\pi}\n$$\nThis is the correct fundamental amplitude for a unit-amplitude square wave. The peak amplitude of the fundamental is $V_{1, \\text{peak}} = b_1 = 4/\\pi$. Its RMS value is $V_{1,\\mathrm{rms}} = b_1/\\sqrt{2}$. So, the squared RMS value is:\n$$\nV_{1,\\mathrm{rms}}^2 = \\left(\\frac{4/\\pi}{\\sqrt{2}}\\right)^2 = \\frac{16}{2\\pi^2} = \\frac{8}{\\pi^2}\n$$\nNow we can compute the THD for the square wave:\n$$\n\\mathrm{THD} = \\sqrt{\\frac{V_{\\mathrm{rms,total}}^2}{V_{1,\\mathrm{rms}}^2} - 1} = \\sqrt{\\frac{1}{8/\\pi^2} - 1} = \\sqrt{\\frac{\\pi^2}{8} - 1}\n$$\nWe compute the numerical value:\n$$\n\\mathrm{THD} = \\sqrt{\\frac{\\pi^2}{8} - 1} \\approx \\sqrt{\\frac{9.869604}{8} - 1} \\approx \\sqrt{1.2337005 - 1} = \\sqrt{0.2337005} \\approx 0.483425\n$$\nRounding to four significant figures, the result is $0.4834$.",
            "answer": "$$\n\\boxed{0.4834}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "为了在设计高频功率转换器时做出明智的材料选择，工程师必须能够量化磁芯损耗的不同分量。本练习将引导您从第一性原理出发，推导经典涡流损耗的表达式，并将其应用于一个实际问题：比较锰锌（MnZn）和镍锌（NiZn）铁氧体在兆赫兹（MHz）频率下的性能。通过这个实践，您将深入理解材料电阻率在抑制涡流效应中的关键作用，并探讨在降低磁芯损耗与维持高磁导率之间的基本设计权衡。",
            "id": "3830520",
            "problem": "一个工作频率为 $f=2\\,\\mathrm{MHz}$ 的氮化镓（GaN）基功率转换器使用了一个铁氧体磁芯电感器。为分离经典涡流效应，将单个磁芯臂局部建模为一个厚度为 $t=4.0\\times 10^{-3}\\,\\mathrm{m}$、在另外两个维度上无限延伸的均匀导电板。穿过该板的磁通密度在空间上是均匀的正弦波，$\\mathbf{B}(t)=\\hat{\\mathbf{z}}\\,B_{\\mathrm{pk}}\\sin(2\\pi f t)$，其峰值振幅为 $B_{\\mathrm{pk}}=20\\,\\mathrm{mT}$，方向平行于板的大表面。假设铁氧体内部处于准静态状态，因此位移电流可以忽略不计，且电流密度遵循欧姆定律 $\\mathbf{J}=\\sigma \\mathbf{E}$，其中电导率 $\\sigma=1/\\rho$ 为常数。仅使用麦克斯韦-法拉第定律 $\\nabla\\times \\mathbf{E}=-\\partial \\mathbf{B}/\\partial t$ 和欧姆定律，推导在正弦 $B(t)$ 条件下板中的经典涡流单位体积功率损耗，然后使用此结果量化在 $f=2\\,\\mathrm{MHz}$ 时，锰锌（MnZn）铁氧体与镍锌（NiZn）铁氧体的单位体积经典涡流损耗之比，取其代表性电阻率分别为 $\\rho_{\\mathrm{MnZn}}=5\\,\\Omega\\cdot\\mathrm{m}$ 和 $\\rho_{\\mathrm{NiZn}}=2.0\\times 10^{3}\\,\\Omega\\cdot\\mathrm{m}$。请明确说明您用来确定积分常数的任何对称性条件。最后，简要解释在两种控制情景（固定 $B_{\\mathrm{pk}}$ 与固定磁化场振幅 $H_{\\mathrm{pk}}$）下，从锰锌（MnZn）铁氧体切换到镍锌（NiZn）铁氧体时，因复磁导率实部 $\\mu'$ 降低而引入的权衡。\n\n将最终答案表示为锰锌（MnZn）与镍锌（NiZn）的单位体积经典涡流损耗的无量纲比值，并四舍五入至三位有效数字。",
            "solution": "该问题经评估有效。这是一个科学上合理、提法明确且客观的电磁学和材料科学问题，与电力电子学相关。其假设和所提供的数据对于铁氧体中涡流损耗的经典分析是一致且现实的。\n\n我们首先推导导电板中经典涡流单位体积功率损耗的一般表达式。我们将磁芯臂建模为一个厚度为 $t$ 的平板，占据区域 $-t/2 \\le x \\le t/2$，并在 $y$ 和 $z$ 方向上无限延伸。一个空间均匀、随时间变化的磁通密度方向平行于板的大表面，这是此类分析的标准配置。我们选择磁场方向沿 $y$ 轴：$\\mathbf{B}(t) = B_{\\mathrm{pk}}\\sin(\\omega t) \\hat{\\mathbf{y}}$，其中 $\\omega = 2\\pi f$。\n\n根据麦克斯韦-法拉第定律，感应电场 $\\mathbf{E}$ 的旋度与 $\\mathbf{B}$ 的时间变化率有关：\n$$\n\\nabla \\times \\mathbf{E} = -\\frac{\\partial \\mathbf{B}}{\\partial t}\n$$\n计算 $\\mathbf{B}$ 的导数：\n$$\n\\frac{\\partial \\mathbf{B}}{\\partial t} = \\omega B_{\\mathrm{pk}}\\cos(\\omega t) \\hat{\\mathbf{y}}\n$$\n这得到了电场的方程：\n$$\n\\nabla \\times \\mathbf{E} = -\\omega B_{\\mathrm{pk}}\\cos(\\omega t) \\hat{\\mathbf{y}}\n$$\n根据题目要求，施加以下对称性条件：\n1.  **平移不变性：** 由于板在 $y$ 和 $z$ 方向上无限延伸，且B场在空间上是均匀的，因此感应电场不能依赖于 $y$ 或 $z$ 坐标。因此，$\\mathbf{E} = \\mathbf{E}(x,t)$。\n2.  **场分量约束：** $y$ 方向的B场感应出的涡流必须在 $xz$ 平面内形成闭合回路。因此，$y$ 方向的电场分量 $E_y$ 必须为零。电荷不累积（$\\nabla \\cdot \\mathbf{J} = 0$）和欧姆定律（$\\mathbf{J}=\\sigma\\mathbf{E}$）意味着 $\\nabla \\cdot \\mathbf{E} = 0$。对于 $\\mathbf{E}(x,t)$，这意味着 $\\partial E_x/\\partial x = 0$。\n3.  **边界条件：** 电流不能流出板的表面 $x = \\pm t/2$。这要求电流密度的法向分量 $J_x$ 在这些边界上为零。这意味着 $E_x(\\pm t/2, t) = 0$。结合 $\\partial E_x/\\partial x = 0$，我们得出结论 $E_x(x,t)$ 处处为零。\n4.  **反射对称性：** 问题关于中心平面 $x=0$ 对称。感应涡流路径也必须对称，这决定了电场的 $z$ 分量 $E_z$ 必须是关于 $x$ 的奇函数：$E_z(-x,t) = -E_z(x,t)$。\n\n当 $\\mathbf{E}(x,t) = E_z(x,t)\\hat{\\mathbf{z}}$ 时，旋度简化为 $\\nabla \\times \\mathbf{E} = -\\frac{d E_z}{dx}\\hat{\\mathbf{y}}$。将其与法拉第定律的结果相等：\n$$\n-\\frac{d E_z}{dx} = -\\omega B_{\\mathrm{pk}}\\cos(\\omega t) \\implies \\frac{d E_z}{dx} = \\omega B_{\\mathrm{pk}}\\cos(\\omega t)\n$$\n对 $x$ 积分：\n$$\nE_z(x,t) = (\\omega B_{\\mathrm{pk}}\\cos(\\omega t))x + C(t)\n$$\n应用反对称条件 $E_z(-x,t) = -E_z(x,t)$，迫使积分常数 $C(t)$ 为零。因此，感应电场为：\n$$\n\\mathbf{E}(x,t) = \\omega B_{\\mathrm{pk}} x \\cos(\\omega t) \\hat{\\mathbf{z}}\n$$\n瞬时单位体积功率损耗（焦耳热）为 $p_v(x,t) = \\mathbf{J}\\cdot\\mathbf{E} = \\sigma|\\mathbf{E}|^2$：\n$$\np_v(x,t) = \\sigma (\\omega B_{\\mathrm{pk}} x \\cos(\\omega t))^2 = \\sigma \\omega^2 B_{\\mathrm{pk}}^2 x^2 \\cos^2(\\omega t)\n$$\n单位体积功率损耗 $P_v$ 是通过将 $p_v(x,t)$ 在时间（一个周期 $T=2\\pi/\\omega$）和空间（板厚 $t$）上平均得到的。$\\cos^2(\\omega t)$ 的时间平均值为 $1/2$。这给出了在位置 $x$ 处的时间平均功率密度：\n$$\n\\langle p_v(x) \\rangle_t = \\frac{1}{2} \\sigma \\omega^2 B_{\\mathrm{pk}}^2 x^2\n$$\n将此表达式在板的厚度上（从 $x=-t/2$ 到 $x=t/2$）进行平均：\n$$\nP_v = \\frac{1}{t} \\int_{-t/2}^{t/2} \\langle p_v(x) \\rangle_t dx = \\frac{\\sigma \\omega^2 B_{\\mathrm{pk}}^2}{2t} \\int_{-t/2}^{t/2} x^2 dx = \\frac{\\sigma \\omega^2 B_{\\mathrm{pk}}^2}{2t} \\left[\\frac{x^3}{3}\\right]_{-t/2}^{t/2}\n$$\n$$\nP_v = \\frac{\\sigma \\omega^2 B_{\\mathrm{pk}}^2}{2t} \\left( \\frac{(t/2)^3 - (-t/2)^3}{3} \\right) = \\frac{\\sigma \\omega^2 B_{\\mathrm{pk}}^2}{2t} \\left( \\frac{t^3}{12} \\right) = \\frac{\\sigma \\omega^2 B_{\\mathrm{pk}}^2 t^2}{24}\n$$\n代入 $\\omega = 2\\pi f$ 和电导率 $\\sigma = 1/\\rho$，其中 $\\rho$ 是电阻率：\n$$\nP_v = \\frac{(2\\pi f)^2 B_{\\mathrm{pk}}^2 t^2}{24\\rho} = \\frac{\\pi^2 f^2 B_{\\mathrm{pk}}^2 t^2}{6\\rho}\n$$\n这就是推导出的平均单位体积经典涡流损耗的表达式。\n\n题目要求计算锰锌（MnZn）铁氧体与镍锌（NiZn）铁氧体的单位体积损耗之比。设此比值为 $R$。\n$$\nR = \\frac{P_{v, \\mathrm{MnZn}}}{P_{v, \\mathrm{NiZn}}} = \\frac{\\frac{\\pi^2 f^2 B_{\\mathrm{pk}}^2 t^2}{6\\rho_{\\mathrm{MnZn}}}}{\\frac{\\pi^2 f^2 B_{\\mathrm{pk}}^2 t^2}{6\\rho_{\\mathrm{NiZn}}}}\n$$\n项 $f$、$B_{\\mathrm{pk}}$ 和 $t$ 对两种材料都相同，因此它们可以消掉。比值简化为：\n$$\nR = \\frac{1/\\rho_{\\mathrm{MnZn}}}{1/\\rho_{\\mathrm{NiZn}}} = \\frac{\\rho_{\\mathrm{NiZn}}}{\\rho_{\\mathrm{MnZn}}}\n$$\n使用给定的电阻率值，$\\rho_{\\mathrm{MnZn}} = 5\\,\\Omega\\cdot\\mathrm{m}$ 和 $\\rho_{\\mathrm{NiZn}} = 2.0 \\times 10^{3}\\,\\Omega\\cdot\\mathrm{m}$：\n$$\nR = \\frac{2.0 \\times 10^3}{5} = 400\n$$\n表示为三位有效数字，比值为 $4.00 \\times 10^2$。\n\n最后，从高磁导率的锰锌（MnZn）铁氧体切换到低磁导率的镍锌（NiZn）铁氧体时，因磁导率实部 $\\mu'$ 降低而引入的权衡如下：\n1.  **固定 $B_{\\mathrm{pk}}$ 情景：** 这对应于电压波形固定的应用。要在较低的 $\\mu'$下实现相同的 $B_{\\mathrm{pk}}$，需要一个更大的磁化场 $H_{\\mathrm{pk}}$（$H_{\\mathrm{pk}} = B_{\\mathrm{pk}}/\\mu'$）。更大的 $H_{\\mathrm{pk}}$ 需要绕组中有更大的磁化电流，这会增加绕组的传导损耗（$I^2R$）。因此，权衡在于以增加的绕组损耗（源于NiZn的低磁导率）为代价，换取减少的磁芯损耗（源于NiZn的高电阻率）。\n2.  **固定 $H_{\\mathrm{pk}}$ 情景：** 这对应于驱动电流是主要约束的应用。在较低的 $\\mu'$ 下，产生的磁通密度 $B_{\\mathrm{pk}}$ 会更小（$B_{\\mathrm{pk}} = \\mu'H_{\\mathrm{pk}}$）。由于涡流损耗与 $B_{\\mathrm{pk}}^2$ 成正比，磁芯损耗会显著降低。然而，磁性元件的主要功能，例如提供一定的电感 $L$（$L \\propto \\mu'$），会受到影响。为了恢复所需的电感，设计者必须增加匝数或使用更大的磁芯，这通常会增加绕组损耗、元件尺寸和成本。这里的权衡在于以磁性能下降为代价换取极低的磁芯损耗，而性能下降必须通过其他有其自身代价的设计变更来补偿。",
            "answer": "$$\n\\boxed{4.00 \\times 10^{2}}\n$$"
        },
        {
            "introduction": "前面的练习基于一个理想化假设：磁场在整个磁芯截面上是均匀的。然而，在导电磁性材料中，随频率升高，时变场会被限制在表面附近，这种现象被称为趋肤效应。本练习将探讨这一基本限制，您将推导趋肤深度的表达式并为一个典型的铁氧体计算其数值。通过将计算出的趋肤深度与磁芯的物理尺寸进行比较，您将能够判断场均匀性假设在特定工作频率下是否成立，这对于精确的损耗建模至关重要。",
            "id": "3830496",
            "problem": "一个用于高频磁学中的铁氧体磁芯，在第一近似下，可以被建模为一个均匀、线性、各向同性的介质，其特征为相对磁导率 $\\mu_{r}$ 和电阻率 $\\rho$，其本构关系为 $\\mathbf{B}=\\mu \\mathbf{H}$、$\\mathbf{D}=\\varepsilon \\mathbf{E}$ 和 $\\mathbf{J}=\\sigma \\mathbf{E}$，其中 $\\mu=\\mu_{0}\\mu_{r}$，$\\sigma=1/\\rho$，$\\varepsilon$ 是介电常数。考虑一个角频率为 $\\omega=2\\pi f$ 的时谐（交流，AC）激励，在半无限大平板的表面产生一个切向场。从 Maxwell 方程组和本构关系出发，推导场在介质中的指数空间衰减，并将趋肤深度 $\\delta$ 定义为振幅衰减的特征长度。然后，对于一个锰锌铁氧体，其参数为 $\\mu_{r}=1500$，$\\rho=5\\,\\Omega\\cdot\\mathrm{m}$，激励频率 $f=1\\,\\mathrm{MHz}$，计算其趋肤深度。最后，用你的结果评估在 $f=1\\,\\mathrm{MHz}$ 时，对厚度为 $t=5\\,\\mathrm{mm}$ 的壁，场的非均匀性在建模磁芯损耗机制时是否是一个需要重点考虑的问题。\n\n以毫米为单位表示趋肤深度的最终数值，并将答案四舍五入到三位有效数字。",
            "solution": "该问题要求推导导电磁性介质中的趋肤深度，为一个特定的铁氧体磁芯计算其值，并基于结果评估场的均匀性。\n\n首先，我们验证问题陈述的有效性。\n问题提供了所有必需的参数和本构关系：相对磁导率 $\\mu_{r}$、电阻率 $\\rho$、角频率 $\\omega=2\\pi f$，以及半无限大平板的几何形状。本构关系为 $\\mathbf{B}=\\mu \\mathbf{H}$、$\\mathbf{D}=\\varepsilon \\mathbf{E}$ 和 $\\mathbf{J}=\\sigma \\mathbf{E}$，其中 $\\mu=\\mu_{0}\\mu_{r}$ 和 $\\sigma=1/\\rho$。为铁氧体提供的数值（$\\mu_{r}=1500$，$\\rho=5\\,\\Omega\\cdot\\mathrm{m}$）和频率（$f=1\\,\\mathrm{MHz}$）在物理上是现实的。该问题基于电磁学的基本原理（Maxwell 方程组），并且是适定的。是否需要介电常数 $\\varepsilon$ 的问题必须得到解决。我们将比较传导电流密度 $J = \\sigma E$ 和位移电流密度 $J_D = \\frac{\\partial D}{\\partial t}$ 的大小，对于时谐场，后者变为 $j\\omega\\varepsilon E$。它们的大小之比为 $|\\frac{J_D}{J}| = \\frac{\\omega\\varepsilon}{\\sigma}$。我们已知 $\\sigma = 1/\\rho = 1/5\\,\\mathrm{S/m} = 0.2\\,\\mathrm{S/m}$ 且 $\\omega = 2\\pi f = 2\\pi(1 \\times 10^{6})\\,\\mathrm{rad/s}$。锰锌铁氧体的一个典型相对介电常数为 $\\varepsilon_r \\approx 15$，因此 $\\varepsilon = \\varepsilon_r \\varepsilon_0 \\approx 15 \\times 8.854 \\times 10^{-12}\\,\\mathrm{F/m} \\approx 1.33 \\times 10^{-10}\\,\\mathrm{F/m}$。该比值为 $\\frac{\\omega\\varepsilon}{\\sigma} \\approx \\frac{2\\pi \\times 10^6 \\times 1.33 \\times 10^{-10}}{0.2} \\approx 4.2 \\times 10^{-3} \\ll 1$。因此，位移电流与传导电流相比可以忽略不计。这验证了此问题的标准“良导体”近似是有效的，尽管铁氧体不是金属。该问题被认为是有效的。\n\n我们继续推导趋肤深度。我们从无源（$\\rho_v=0$）导电介质中的 Maxwell 方程组开始，假设时谐场形式为 $\\mathbf{E}(\\mathbf{r}, t) = \\text{Re}\\{\\mathbf{E}(\\mathbf{r}) e^{j\\omega t}\\}$：\n$$ \\nabla \\times \\mathbf{E} = -j\\omega \\mathbf{B} \\quad (1) $$\n$$ \\nabla \\times \\mathbf{H} = \\mathbf{J} + j\\omega \\mathbf{D} \\quad (2) $$\n$$ \\nabla \\cdot \\mathbf{B} = 0 \\quad (3) $$\n$$ \\nabla \\cdot \\mathbf{D} = 0 \\quad (4) $$\n使用本构关系 $\\mathbf{B}=\\mu\\mathbf{H}$、$\\mathbf{J}=\\sigma\\mathbf{E}$ 和 $\\mathbf{D}=\\varepsilon\\mathbf{E}$，我们可以用 $\\mathbf{E}$ 和 $\\mathbf{H}$ 来写出方程 $(1)$ 和 $(2)$：\n$$ \\nabla \\times \\mathbf{E} = -j\\omega \\mu \\mathbf{H} \\quad (5) $$\n$$ \\nabla \\times \\mathbf{H} = (\\sigma + j\\omega \\varepsilon) \\mathbf{E} \\quad (6) $$\n为了找到 $\\mathbf{E}$ 的波动方程，我们对方程 $(5)$ 取旋度：\n$$ \\nabla \\times (\\nabla \\times \\mathbf{E}) = -j\\omega \\mu (\\nabla \\times \\mathbf{H}) $$\n使用矢量恒等式 $\\nabla \\times (\\nabla \\times \\mathbf{A}) = \\nabla(\\nabla \\cdot \\mathbf{A}) - \\nabla^2 \\mathbf{A}$，我们得到：\n$$ \\nabla(\\nabla \\cdot \\mathbf{E}) - \\nabla^2 \\mathbf{E} = -j\\omega \\mu (\\nabla \\times \\mathbf{H}) $$\n由 $\\nabla \\cdot \\mathbf{D}=0$ 并假设介电常数是均匀的，我们有 $\\nabla \\cdot \\mathbf{E}=0$。方程简化为：\n$$ -\\nabla^2 \\mathbf{E} = -j\\omega \\mu (\\nabla \\times \\mathbf{H}) $$\n代入方程 $(6)$ 中的 $\\nabla \\times \\mathbf{H}$：\n$$ \\nabla^2 \\mathbf{E} = j\\omega \\mu (\\sigma + j\\omega \\varepsilon) \\mathbf{E} $$\n我们定义复传播常数 $\\gamma$，使得 $\\gamma^2 = j\\omega \\mu (\\sigma + j\\omega \\varepsilon)$。方程变为矢量亥姆霍兹方程：\n$$ \\nabla^2 \\mathbf{E} - \\gamma^2 \\mathbf{E} = 0 $$\n正如在验证过程中所确定的，对于给定的材料和频率，我们处于良导体区域，其中 $\\sigma \\gg \\omega \\varepsilon$。因此，我们可以将 $\\gamma^2$ 近似为：\n$$ \\gamma^2 \\approx j\\omega \\mu \\sigma $$\n现在我们求解 $\\gamma = \\alpha + j\\beta$，其中 $\\alpha$ 是衰减常数，$\\beta$ 是相移常数。\n$$ \\gamma = \\sqrt{j\\omega\\mu\\sigma} = \\sqrt{j} \\sqrt{\\omega\\mu\\sigma} $$\n因为 $\\sqrt{j} = \\sqrt{e^{j\\pi/2}} = e^{j\\pi/4} = \\cos(\\frac{\\pi}{4}) + j\\sin(\\frac{\\pi}{4}) = \\frac{1+j}{\\sqrt{2}}$，我们有：\n$$ \\gamma = \\frac{1+j}{\\sqrt{2}} \\sqrt{\\omega\\mu\\sigma} = \\sqrt{\\frac{\\omega\\mu\\sigma}{2}} + j\\sqrt{\\frac{\\omega\\mu\\sigma}{2}} $$\n这得出 $\\alpha = \\beta = \\sqrt{\\frac{\\omega\\mu\\sigma}{2}}$。\n对于半无限大平板几何结构（$z \\ge 0$）和表面切向场（例如 $\\mathbf{E} = E_x(z)\\hat{\\mathbf{x}}$），波动方程简化为：\n$$ \\frac{d^2 E_x}{dz^2} - \\gamma^2 E_x = 0 $$\n解的形式为 $E_x(z) = C_1 e^{-\\gamma z} + C_2 e^{\\gamma z}$。由于当 $z \\to \\infty$ 时场必须保持有限，且 $\\text{Re}(\\gamma) = \\alpha > 0$，我们必须有 $C_2=0$。设表面场为 $E_x(0) = E_0$，我们发现 $C_1=E_0$。解是：\n$$ E_x(z) = E_0 e^{-\\gamma z} = E_0 e^{-(\\alpha+j\\beta)z} = E_0 e^{-\\alpha z} e^{-j\\beta z} $$\n场的振幅随进入介质的距离呈指数衰减，即 $|E_x(z)| = E_0 e^{-\\alpha z}$。趋肤深度 $\\delta$ 定义为场振幅衰减到其表面值的 $1/e$ 时的距离。这发生在 $\\alpha z = 1$ 时，所以 $z = 1/\\alpha$。\n$$ \\delta = \\frac{1}{\\alpha} = \\frac{1}{\\sqrt{\\frac{\\omega\\mu\\sigma}{2}}} = \\sqrt{\\frac{2}{\\omega\\mu\\sigma}} $$\n代入 $\\omega = 2\\pi f$、$\\mu = \\mu_0 \\mu_r$ 和 $\\sigma = 1/\\rho$，我们得到用给定参数表示的趋肤深度表达式：\n$$ \\delta = \\sqrt{\\frac{2}{(2\\pi f)(\\mu_0 \\mu_r)(1/\\rho)}} = \\sqrt{\\frac{\\rho}{\\pi f \\mu_0 \\mu_r}} $$\n推导至此完成。\n\n接下来，我们计算给定材料属性和频率下的趋肤深度：\n$\\mu_{r}=1500$\n$\\rho=5\\,\\Omega\\cdot\\mathrm{m}$\n$f=1\\,\\mathrm{MHz} = 1 \\times 10^6\\,\\mathrm{Hz}$\n自由空间磁导率为 $\\mu_0 = 4\\pi \\times 10^{-7}\\,\\mathrm{H/m}$。\n将这些值代入 $\\delta$ 的公式中：\n$$ \\delta = \\sqrt{\\frac{5}{\\pi (1 \\times 10^6\\,\\mathrm{Hz}) (4\\pi \\times 10^{-7}\\,\\mathrm{H/m}) (1500)}} $$\n$$ \\delta = \\sqrt{\\frac{5}{4\\pi^2 \\times 10^{-1} \\times 1500}} = \\sqrt{\\frac{5}{4\\pi^2 \\times 150}} = \\sqrt{\\frac{1}{4\\pi^2 \\times 30}} = \\frac{1}{2\\pi\\sqrt{30}} $$\n现在，我们计算数值：\n$$ \\delta \\approx \\frac{1}{2(3.14159)\\sqrt{30}} \\approx \\frac{1}{6.28318 \\times 5.47723} \\approx \\frac{1}{34.4134} \\approx 0.029058\\,\\mathrm{m} $$\n题目要求以毫米为单位表示该值，并四舍五入到三位有效数字。\n$$ \\delta \\approx 29.058\\,\\mathrm{mm} \\approx 29.1\\,\\mathrm{mm} $$\n\n最后，我们评估在厚度为 $t=5\\,\\mathrm{mm}$ 的壁上，场的非均匀性是否是一个重要问题。\n我们将壁厚 $t$ 与计算出的趋肤深度 $\\delta \\approx 29.1\\,\\mathrm{mm}$ 进行比较。比值为：\n$$ \\frac{t}{\\delta} = \\frac{5\\,\\mathrm{mm}}{29.1\\,\\mathrm{mm}} \\approx 0.172 $$\n深度为 $z=t$ 处的场振幅由 $E(t) = E_0 e^{-t/\\delta}$ 给出。壁后侧与前侧的场之比为：\n$$ \\frac{|E(t=5\\,\\mathrm{mm})|}{|E(z=0)|} = e^{-t/\\delta} = e^{-0.172} \\approx 0.842 $$\n这意味着磁芯中心（假设该壁是磁路的一侧）的场振幅约为表面值的 $84.2\\%$。磁芯损耗机制，特别是涡流损耗，高度依赖于场强。局部涡流功率损耗密度与 $|\\mathbf{J}|^2 = \\sigma^2 |\\mathbf{E}|^2$ 成正比。在深度 $t$ 处，损耗密度减少了一个因子 $(e^{-t/\\delta})^2 = e^{-2t/\\delta} = e^{-2 \\times 0.172} = e^{-0.344} \\approx 0.709$。\n这对应于与表面相比，磁芯壁中心的局部功率耗散减少了约 $29\\%$。一个假设场是均匀的（即 $\\delta \\gg t$）的模型将会在整个体积内使用表面场值，这会导致对总涡流损耗的高估。对于高频电力电子设备中磁芯损耗的精确建模，功率耗散近 $30\\%$ 的局部变化是显著的。因此，场的非均匀性确实是一个需要重点考虑的问题，在精确分析中不应被忽略。",
            "answer": "$$\n\\boxed{29.1}\n$$"
        },
        {
            "introduction": "理论模型为了清晰地阐明物理机制，通常会孤立地分析各种损耗。然而在工程实践中，我们测量到的是包含了磁滞、涡流和剩余损耗的总损耗。本练习将理论与实践相结合，向您展示如何利用实验数据来表征一个磁芯。您将使用基于物理的损耗分离模型，通过最小二乘法拟合，从总损耗数据中提取出各个分量的系数，这正是工程师用于预测和优化磁性元件在不同频率下性能的关键技术。",
            "id": "3830550",
            "problem": "考虑一个在固定峰值磁通密度 $B_p$ 下，由正弦交流电 (AC) 磁化驱动的均匀铁氧体磁芯。在准静态条件和空间均匀激励下，三种经过充分验证的损耗机制共同构成了单位体积的总功率损耗，这三种机制分别是：磁滞损耗、经典涡流损耗和剩余损耗。将磁滞项视为在固定 $B_p$ 下，其每周期能量与频率 $f$ 无关，因此功率与 $f$ 成正比；将经典涡流项视为由麦克斯韦-法拉第定律和焦耳热效应产生的感应电场引起，导致功率与 $f^2$ 成正比；并将剩余损耗项视为由随机磁畴壁动力学引起，其具有分数次幂的标度关系，被广泛观察到与 $f^{3/2}$ 成正比。您的任务是通过最小二乘法拟合，从数据中估计与这些频率标度关系相乘的比例系数。\n\n需要使用的基本依据和假设：\n1. 在固定 $B_p$ 下，单位体积的平均磁滞功率 $P_h$ 与 $f$ 成正比，即 $P_h \\propto f$，因为每周期的能量由 B-H 磁滞回线的面积决定。\n2. 单位体积的经典涡流功率 $P_c$ 通过麦克斯韦-法拉第定律和欧姆定律与 $f^2$ 成正比，即 $P_c \\propto f^2$，其中感应电场幅值与 $f$ 呈线性关系，而焦耳热与电场的平方成正比。\n3. 单位体积的剩余损耗功率 $P_e$ 基于磁畴壁运动的统计理论与 $f^{3/2}$ 成正比，即 $P_e \\propto f^{3/2}$，其中有效激活的磁畴壁数量随速率的平方根增长。\n\n在下面的每个数据集中，$B_p$ 在所有频率样本中保持恒定。频率 $f$ 的单位为 $\\mathrm{kHz}$，功率密度 $P_\\mathrm{tot}$ 的单位为 $\\mathrm{mW/cm^3}$。请使用三个基函数 $f$、$f^2$ 和 $f^{3/2}$ 进行线性最小二乘拟合，估计三个系数 $k_h$、$k_c$ 和 $k_e$，其单位分别为 $\\mathrm{mW\\,cm^{-3}\\,kHz^{-1}}$、$\\mathrm{mW\\,cm^{-3}\\,kHz^{-2}}$ 和 $\\mathrm{mW\\,cm^{-3}\\,kHz^{-3/2}}$。然后，在每个数据集的最高频率下，使用您估计的系数计算这三个分量的贡献，并通过最大绝对贡献值 $|P_h|$、 $|P_c|$ 或 $|P_e|$ 来确定主导机制。\n\n测试套件（所有功率单位为 $\\mathrm{mW/cm^3}$，所有频率单位为 $\\mathrm{kHz}$）：\n- 测试用例1（给定数据集，$B_p=0.15\\,\\mathrm{T}$）：在 $f=[50,100,200]$ 时，$P_\\mathrm{tot}=[150,260,430]$。\n- 测试用例2（合成数据集，$B_p=0.25\\,\\mathrm{T}$）：在 $f=[50,100,200,400]$ 时，$P_\\mathrm{tot}=[103.2842712474619,260.0,706.2741699796952,2080.0]$。\n- 测试用例3（低频数据集，$B_p=0.05\\,\\mathrm{T}$）：在 $f=[5,10,20]$ 时，$P_\\mathrm{tot}=[10.248606797749979,20.732455532033678,42.188854381999834]$。\n\n算法要求：\n1. 构建设计矩阵，其列对应于基函数 $f$、$f^2$ 和 $f^{3/2}$，并执行最小二乘估计，以找到将基函数最佳映射到测量值 $P_\\mathrm{tot}$ 的系数 $k_h$、$k_c$ 和 $k_e$。\n2. 对于每个数据集，在该数据集的最大采样频率 $f_\\max$ 下，评估 $P_h=k_h f_\\max$、$P_c=k_c f_\\max^2$ 和 $P_e=k_e f_\\max^{3/2}$，并通过 $\\{P_h,P_c,P_e\\}$ 中最大幅值的索引来选择主导机制，其中索引 $0$ 表示磁滞损耗，索引 $1$ 表示经典涡流损耗，索引 $2$ 表示剩余损耗。\n3. 将每个估计的系数四舍五入到六位小数。\n\n您的程序应生成一行输出，其中包含所有三个测试用例的结果，格式为方括号内包含的逗号分隔列表，其中每个测试用例的结果本身是形如 $[k_h,k_c,k_e,d]$ 的列表，且 $d \\in \\{0,1,2\\}$。例如，最终输出必须类似于 $[[k_{h,1},k_{c,1},k_{e,1},d_1],[k_{h,2},k_{c,2},k_{e,2},d_2],[k_{h,3},k_{c,3},k_{e,3},d_3]]$。$k_h$、$k_c$ 和 $k_e$ 的单位必须分别解释为 $\\mathrm{mW\\,cm^{-3}\\,kHz^{-1}}$、$\\mathrm{mW\\,cm^{-3}\\,kHz^{-2}}$ 和 $\\mathrm{mW\\,cm^{-3}\\,kHz^{-3/2}}$，并且所有计算都必须使用单位为 $\\mathrm{kHz}$ 的频率 $f$。",
            "solution": "该问题要求估计三个系数 $k_h$、$k_c$ 和 $k_e$，这三个系数表征了磁滞损耗、经典涡流损耗和剩余损耗对铁氧体磁芯单位体积总功率损耗的贡献。总功率损耗 $P_\\mathrm{tot}$ 作为频率 $f$ 的函数的模型，是这三种机制的加性组合：\n$$P_\\mathrm{tot}(f) = P_h(f) + P_c(f) + P_e(f)$$\n根据提供的物理假设，各个损耗分量表现出不同的频率标度关系：\n1.  磁滞损耗功率：$P_h(f) = k_h f$\n2.  经典涡流损耗功率：$P_c(f) = k_c f^2$\n3.  剩余损耗功率：$P_e(f) = k_e f^{3/2}$\n\n将这些代入总损耗方程，得到一个关于未知系数 $\\mathbf{k} = [k_h, k_c, k_e]^T$ 的线性模型：\n$$P_\\mathrm{tot}(f) = k_h f + k_c f^2 + k_e f^{3/2}$$\n给定一个由 $n$ 组在相应频率 $f_i$ 下的总功率损耗测量值 $P_{\\mathrm{tot}, i}$ 组成的数据集，我们可以构建一个包含 $n$ 个线性方程的方程组：\n$$\n\\begin{cases}\nk_h f_1 + k_c f_1^2 + k_e f_1^{3/2} \\approx P_{\\mathrm{tot}, 1} \\\\\nk_h f_2 + k_c f_2^2 + k_e f_2^{3/2} \\approx P_{\\mathrm{tot}, 2} \\\\\n\\vdots \\\\\nk_h f_n + k_c f_n^2 + k_e f_n^{3/2} \\approx P_{\\mathrm{tot}, n}\n\\end{cases}\n$$\n该方程组可以表示为矩阵形式 $A\\mathbf{k} \\approx \\mathbf{y}$，其中：\n- $\\mathbf{k} = \\begin{pmatrix} k_h \\\\ k_c \\\\ k_e \\end{pmatrix}$ 是待确定的系数向量。\n- $\\mathbf{y} = \\begin{pmatrix} P_{\\mathrm{tot}, 1} \\\\ P_{\\mathrm{tot}, 2} \\\\ \\vdots \\\\ P_{\\mathrm{tot}, n} \\end{pmatrix}$ 是测量的功率损耗值向量。\n- $A$ 是一个 $n \\times 3$ 的设计矩阵，其列是在每个频率 $f_i$ 上评估的基函数：\n$$A = \\begin{pmatrix}\nf_1 & f_1^2 & f_1^{3/2} \\\\\nf_2 & f_2^2 & f_2^{3/2} \\\\\n\\vdots & \\vdots & \\vdots \\\\\nf_n & f_n^2 & f_n^{3/2}\n\\end{pmatrix}$$\n任务是找到能“最佳拟合”数据的系数向量 $\\mathbf{k}$。这通过线性最小二乘法实现，该方法旨在找到向量 $\\hat{\\mathbf{k}}$，以最小化观测值 $y_i$ 与模型预测值 $\\hat{y}_i = (A\\mathbf{k})_i$ 之间差值的平方和。这等效于最小化残差向量的欧几里得范数的平方，即 $\\| A\\mathbf{k} - \\mathbf{y} \\|_2^2$。\n\n这个最小化问题的解由正规方程给出：\n$$(A^T A) \\hat{\\mathbf{k}} = A^T \\mathbf{y}$$\n前提是矩阵 $A^T A$ 可逆（如果 $A$ 的列线性无关，则该条件成立，对于不同的正频率，情况确实如此），系数的唯一最小二乘估计为：\n$$\\hat{\\mathbf{k}} = (A^T A)^{-1} A^T \\mathbf{y}$$\n矩阵 $(A^T A)^{-1} A^T$ 被称为 $A$ 的伪逆矩阵。使用数值线性代数库（例如 Python 中的 `numpy.linalg.lstsq`）可以高效而准确地执行此计算。\n\n对于每个测试用例，步骤如下：\n1.  根据给定的频率 $f$（单位 $\\mathrm{kHz}$）和总功率损耗 $P_\\mathrm{tot}$（单位 $\\mathrm{mW/cm^3}$），构建设计矩阵 $A$ 和测量向量 $\\mathbf{y}$。\n2.  求解线性最小二乘问题 $A\\mathbf{k} \\approx \\mathbf{y}$，以获得估计系数 $\\hat{\\mathbf{k}} = [\\hat{k}_h, \\hat{k}_c, \\hat{k}_e]^T$。\n3.  为便于报告，将估计的系数四舍五入到六位小数。\n4.  确定数据集中的最大频率 $f_\\mathrm{max}$。\n5.  使用（未四舍五入的）估计系数计算在该最大频率下的各个功率损耗分量：\n    - $P_h = \\hat{k}_h f_\\mathrm{max}$\n    - $P_c = \\hat{k}_c f_\\mathrm{max}^2$\n    - $P_e = \\hat{k}_e f_\\mathrm{max}^{3/2}$\n6.  通过找出三个分量中哪个具有最大绝对值（$|P_h|$、 $|P_c|$ 或 $|P_e|$）来确定主导损耗机制。结果以索引 $d \\in \\{0, 1, 2\\}$ 的形式报告，分别对应磁滞损耗、经典涡流损耗和剩余损耗。\n\n将此程序应用于所提供的三个测试数据集中的每一个，以生成最终输出。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates ferrite core loss coefficients from frequency-dependent power loss data\n    and determines the dominant loss mechanism at the highest frequency.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a tuple of (frequencies_kHz, power_densities_mW_per_cm3).\n    test_cases = [\n        (\n            [50, 100, 200],\n            [150, 260, 430]\n        ),\n        (\n            [50, 100, 200, 400],\n            [103.2842712474619, 260.0, 706.2741699796952, 2080.0]\n        ),\n        (\n            [5, 10, 20],\n            [10.248606797749979, 20.732455532033678, 42.188854381999834]\n        )\n    ]\n\n    results = []\n    for case in test_cases:\n        f_data, p_data = case\n        \n        # Convert to numpy arrays for vectorized operations.\n        f = np.array(f_data, dtype=np.float64)\n        p_tot = np.array(p_data, dtype=np.float64)\n\n        # 1. Construct the design matrix A with basis functions f, f^2, f^(3/2).\n        # The model equation is P_tot = k_h*f + k_c*f^2 + k_e*f^(3/2),\n        # which can be written in matrix form as A @ k = p_tot.\n        A = np.column_stack((f, f**2, f**(3/2)))\n\n        # Perform linear least-squares estimation to find the coefficient vector k.\n        # k = [k_h, k_c, k_e].\n        # Using rcond=None to adopt the modern default behavior of lstsq and avoid warnings.\n        coeffs, _, _, _ = np.linalg.lstsq(A, p_tot, rcond=None)\n        k_h, k_c, k_e = coeffs\n\n        # 2. Evaluate component contributions at the maximum frequency f_max.\n        f_max = np.max(f)\n\n        # Use the unrounded coefficients for higher accuracy in this intermediate calculation.\n        p_h = k_h * f_max\n        p_c = k_c * (f_max**2)\n        p_e = k_e * (f_max**(3/2))\n\n        # Determine the dominant mechanism by the index of the largest absolute contribution.\n        # Index 0: Hysteresis, 1: Classical Eddy Current, 2: Excess.\n        dominant_mechanism_index = np.argmax(np.abs([p_h, p_c, p_e]))\n\n        # 3. Round coefficients to six decimal places for the final output.\n        k_h_rounded = round(k_h, 6)\n        k_c_rounded = round(k_c, 6)\n        k_e_rounded = round(k_e, 6)\n\n        # Append the result for this test case in the required format.\n        results.append([k_h_rounded, k_c_rounded, k_e_rounded, dominant_mechanism_index])\n\n    # Format the final output string as specified: [[k_h1,k_c1,k_e1,d1],[...],...]\n    # A manual string construction is used to match the required format exactly,\n    # without the spaces that Python's default list-to-string conversion would add.\n    result_strings = []\n    for res in results:\n        result_strings.append(f\"[{res[0]},{res[1]},{res[2]},{res[3]}]\")\n\n    final_output = f\"[{','.join(result_strings)}]\"\n    print(final_output)\n\nsolve()\n```"
        }
    ]
}
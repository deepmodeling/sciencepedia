{
    "hands_on_practices": [
        {
            "introduction": "The first step in state-space averaging is to precisely describe the converter's dynamics during each phase of the switching cycle. This exercise provides fundamental practice in applying Kirchhoff's laws to derive the individual state-space matrices for an ideal boost converter. Mastering this step is essential, as these matrices, such as $A_1$ and $A_2$, form the building blocks for the final averaged model .",
            "id": "3883738",
            "problem": "An ideal boost direct current to direct current converter operates in continuous conduction mode. The topology consists of an input voltage source with voltage $v_g$, series inductor with inductance $L$, a controllable ideal switch to ground, an ideal diode to the output node, an output capacitor with capacitance $C$, and a resistive load with resistance $R$ connected in parallel with the capacitor. Let the inductor current be $i_L$ oriented from the source toward the switching node and let the capacitor voltage be $v_C$ across the output capacitor and load, with the output voltage defined as $v_o = v_C$. Assume ideal components, no parasitic resistances, and ideal diode and switch behavior.\n\nUsing Kirchhoff’s Voltage Law (KVL), Kirchhoff’s Current Law (KCL), and the constitutive relations of the inductor and capacitor, derive the piecewise-linear state-space models during the two switching subintervals in one switching period:\n- Subinterval $1$ (switch ON, diode OFF),\n- Subinterval $2$ (switch OFF, diode ON).\n\nUse the state vector $x = [\\, i_L \\;\\; v_C \\,]^{T}$ and the input $u = v_g$, and write each subinterval model in the form $\\dot{x} = A_k x + B_k u$ for $k \\in \\{1,2\\}$. Then construct the single block matrix\n$$\nM \\;=\\; \\begin{pmatrix} A_1 & B_1 \\\\[4pt] A_2 & B_2 \\end{pmatrix}.\n$$\nProvide this $4 \\times 3$ block matrix $M$ as your final answer. No numerical evaluation or rounding is required. Do not include units in your final answer.",
            "solution": "The problem requires the derivation of the piecewise-linear state-space models for an ideal boost converter operating in continuous conduction mode (CCM). The state vector is defined as $x = [\\, i_L \\;\\; v_C \\,]^{T}$, where $i_L$ is the inductor current and $v_C$ is the capacitor voltage. The input is $u = v_g$. The models must be in the form $\\dot{x} = A_k x + B_k u$ for the two switching subintervals, $k \\in \\{1, 2\\}$.\n\nThe fundamental state equations for the inductor and capacitor are derived from their constitutive relations:\nFor the inductor with inductance $L$, the voltage across it, $v_L$, is given by $v_L = L \\frac{di_L}{dt}$. This gives the first state equation:\n$$\n\\frac{di_L}{dt} = \\frac{1}{L} v_L\n$$\nFor the capacitor with capacitance $C$, the current through it, $i_C$, is given by $i_C = C \\frac{dv_C}{dt}$. This gives the second state equation:\n$$\n\\frac{dv_C}{dt} = \\frac{1}{C} i_C\n$$\nWe will now analyze the circuit during each of the two subintervals to find expressions for $v_L$ and $i_C$ in terms of the state variables $i_L$, $v_C$, and the input $v_g$.\n\n**Subinterval 1: Switch ON, Diode OFF**\n\nDuring this interval, the controllable switch is closed (ON), providing a direct path to ground. The diode is reverse-biased (OFF) because the output voltage $v_C$ (assumed positive) is higher than the switch voltage ($0$).\n\n1.  **Inductor Voltage ($v_L$) Analysis:** We apply Kirchhoff's Voltage Law (KVL) to the loop containing the input source $v_g$ and the inductor $L$. The switch shorts the right side of the inductor to ground.\n    $$\n    -v_g + v_L = 0 \\implies v_L = v_g\n    $$\n    Substituting this into the inductor state equation gives:\n    $$\n    \\frac{di_L}{dt} = \\frac{1}{L} v_g\n    $$\n\n2.  **Capacitor Current ($i_C$) Analysis:** Since the diode is OFF, the inductor is disconnected from the output stage. We apply Kirchhoff's Current Law (KCL) at the output node (the top terminal of the capacitor). The capacitor current $i_C$ and the load current $i_R$ flow out of this node.\n    $$\n    i_C + i_R = 0\n    $$\n    The load is resistive with resistance $R$, so by Ohm's law, $i_R = \\frac{v_C}{R}$.\n    $$\n    i_C = -i_R = -\\frac{1}{R} v_C\n    $$\n    Substituting this into the capacitor state equation gives:\n    $$\n    \\frac{dv_C}{dt} = \\frac{1}{C} \\left( -\\frac{1}{R} v_C \\right) = -\\frac{1}{RC} v_C\n    $$\n\n3.  **State-Space Model for Subinterval 1:**\n    We arrange the two derived differential equations in the matrix form $\\dot{x} = A_1 x + B_1 u$:\n    $$\n    \\begin{pmatrix} \\dot{i_L} \\\\ \\dot{v_C} \\end{pmatrix} = \\begin{pmatrix} 0 & 0 \\\\ 0 & -\\frac{1}{RC} \\end{pmatrix} \\begin{pmatrix} i_L \\\\ v_C \\end{pmatrix} + \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} v_g\n    $$\n    From this, we identify the matrices $A_1$ and $B_1$:\n    $$\n    A_1 = \\begin{pmatrix} 0 & 0 \\\\ 0 & -\\frac{1}{RC} \\end{pmatrix}, \\quad B_1 = \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix}\n    $$\n\n**Subinterval 2: Switch OFF, Diode ON**\n\nDuring this interval, the switch is open (OFF). The inductor current $i_L$ now flows through the diode, which becomes forward-biased (ON). We assume the ideal diode has zero forward voltage drop.\n\n1.  **Inductor Voltage ($v_L$) Analysis:** We apply KVL to the loop containing the input source $v_g$, the inductor $L$, and the output stage (capacitor and load). Since the diode is treated as a short circuit, the voltage across the output stage, $v_C$, appears in this loop.\n    $$\n    -v_g + v_L + v_C = 0 \\implies v_L = v_g - v_C\n    $$\n    Substituting this into the inductor state equation gives:\n    $$\n    \\frac{di_L}{dt} = \\frac{1}{L} (v_g - v_C) = -\\frac{1}{L} v_C + \\frac{1}{L} v_g\n    $$\n\n2.  **Capacitor Current ($i_C$) Analysis:** We apply KCL at the output node. The inductor current $i_L$ flows into the node and splits between the capacitor current $i_C$ and the load current $i_R$.\n    $$\n    i_L = i_C + i_R\n    $$\n    Again, $i_R = \\frac{v_C}{R}$.\n    $$\n    i_C = i_L - i_R = i_L - \\frac{1}{R} v_C\n    $$\n    Substituting this into the capacitor state equation gives:\n    $$\n    \\frac{dv_C}{dt} = \\frac{1}{C} \\left( i_L - \\frac{1}{R} v_C \\right) = \\frac{1}{C} i_L - \\frac{1}{RC} v_C\n    $$\n\n3.  **State-Space Model for Subinterval 2:**\n    We arrange these equations in the matrix form $\\dot{x} = A_2 x + B_2 u$:\n    $$\n    \\begin{pmatrix} \\dot{i_L} \\\\ \\dot{v_C} \\end{pmatrix} = \\begin{pmatrix} 0 & -\\frac{1}{L} \\\\ \\frac{1}{C} & -\\frac{1}{RC} \\end{pmatrix} \\begin{pmatrix} i_L \\\\ v_C \\end{pmatrix} + \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} v_g\n    $$\n    From this, we identify the matrices $A_2$ and $B_2$:\n    $$\n    A_2 = \\begin{pmatrix} 0 & -\\frac{1}{L} \\\\ \\frac{1}{C} & -\\frac{1}{RC} \\end{pmatrix}, \\quad B_2 = \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix}\n    $$\n\n**Construction of the Block Matrix M**\n\nThe final task is to construct the $4 \\times 3$ block matrix $M$ as defined in the problem statement:\n$$\nM = \\begin{pmatrix} A_1 & B_1 \\\\ A_2 & B_2 \\end{pmatrix}\n$$\nThe first two rows of $M$ are formed by concatenating $A_1$ ($2 \\times 2$) and $B_1$ ($2 \\times 1$). The last two rows are formed by concatenating $A_2$ ($2 \\times 2$) and $B_2$ ($2 \\times 1$).\n\nRow 1 and 2: $[A_1 \\ B_1] = \\begin{pmatrix} 0 & 0 & \\frac{1}{L} \\\\ 0 & -\\frac{1}{RC} & 0 \\end{pmatrix}$\nRow 3 and 4: $[A_2 \\ B_2] = \\begin{pmatrix} 0 & -\\frac{1}{L} & \\frac{1}{L} \\\\ \\frac{1}{C} & -\\frac{1}{RC} & 0 \\end{pmatrix}$\n\nCombining these gives the final matrix $M$:\n$$\nM = \\begin{pmatrix}\n0 & 0 & \\frac{1}{L} \\\\\n0 & -\\frac{1}{RC} & 0 \\\\\n0 & -\\frac{1}{L} & \\frac{1}{L} \\\\\n\\frac{1}{C} & -\\frac{1}{RC} & 0\n\\end{pmatrix}\n$$\nThis matrix completely describes the linear dynamics of the ideal boost converter within each of its two operating subintervals.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0 & 0 & \\frac{1}{L} \\\\\n0 & -\\frac{1}{RC} & 0 \\\\\n0 & -\\frac{1}{L} & \\frac{1}{L} \\\\\n\\frac{1}{C} & -\\frac{1}{RC} & 0\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Once the subinterval models are established, the next step is to combine them into a single averaged model that captures the low-frequency dynamics of the converter. This practice guides you through creating the averaged state matrix, $A_{\\text{avg}}$, for a buck converter and then using it to analyze the system's open-loop stability through its eigenvalues . This process demonstrates how averaging transforms a complex switching system into a linear model amenable to standard control analysis techniques.",
            "id": "3883731",
            "problem": "An ideal step-down buck direct current (DC) converter operates in continuous conduction mode (CCM). The converter consists of an ideal switch, an ideal diode, an inductor of inductance $L$, a capacitor of capacitance $C$, and a resistive load of resistance $R$. Let the input source voltage be $v_{g}$ and the control be a pulse-width modulation (PWM) duty ratio $d(t)$ with $0 \\le d(t) \\le 1$. Define the state vector as $x(t) = \\begin{pmatrix} i_{L}(t) \\\\ v_{C}(t) \\end{pmatrix}$, where $i_{L}(t)$ is the inductor current and $v_{C}(t)$ is the capacitor voltage (the output voltage). Using Kirchhoff’s Voltage Law (KVL), Kirchhoff’s Current Law (KCL), and the constitutive relations $v_{L}(t) = L \\,\\mathrm{d}i_{L}/\\mathrm{d}t$ and $i_{C}(t) = C \\,\\mathrm{d}v_{C}/\\mathrm{d}t$, perform the following steps:\n\n1. Write the state-space equations for the two switching subintervals corresponding to the switch being in the on-state and the off-state.\n\n2. Apply state-space averaging over one switching period under the assumption of steady-state CCM and small ripple to obtain the averaged state-space model $\\dot{x}(t) = A_{\\mathrm{avg}} x(t) + B_{\\mathrm{avg}} u(t)$, where $u(t) = v_{g}$ is the input. Derive $A_{\\mathrm{avg}}$ explicitly in terms of $L$, $C$, and $R$ by linearizing the averaged dynamics about an equilibrium with constant duty ratio $D \\in (0,1)$.\n\n3. Compute the eigenvalues of $A_{\\mathrm{avg}}$ in closed form. Then, using first principles and without invoking any pre-stated stability results other than the Routh–Hurwitz criterion for second-order polynomials, determine whether the averaged converter is internally stable for a positive resistive load $R>0$, and explain what happens if the load exhibits negative incremental resistance $R<0$.\n\nExpress your final eigenvalues as a single closed-form analytic expression in terms of $L$, $C$, and $R$. Your answer must be expressed in $\\mathrm{s}^{-1}$. Do not round; provide exact symbolic expressions only.",
            "solution": "We begin from fundamental circuit relations. In the on-state, the ideal switch connects the input source $v_{g}$ to the inductor, and the diode is reverse-biased. Applying Kirchhoff’s Voltage Law (KVL) around the inductor–capacitor loop gives\n$$\nv_{L}(t) = v_{g} - v_{C}(t).\n$$\nUsing the inductor constitutive relation $v_{L}(t) = L \\,\\frac{\\mathrm{d} i_{L}}{\\mathrm{d} t}$, we obtain\n$$\nL \\,\\frac{\\mathrm{d} i_{L}}{\\mathrm{d} t} = v_{g} - v_{C}(t) \\quad \\Rightarrow \\quad \\frac{\\mathrm{d} i_{L}}{\\mathrm{d} t} = \\frac{v_{g}}{L} - \\frac{1}{L}\\,v_{C}(t).\n$$\nAt the output node, applying Kirchhoff’s Current Law (KCL) yields\n$$\ni_{L}(t) = i_{C}(t) + i_{R}(t) = C \\,\\frac{\\mathrm{d} v_{C}}{\\mathrm{d} t} + \\frac{v_{C}(t)}{R},\n$$\nwhich rearranges to\n$$\nC \\,\\frac{\\mathrm{d} v_{C}}{\\mathrm{d} t} = i_{L}(t) - \\frac{v_{C}(t)}{R} \\quad \\Rightarrow \\quad \\frac{\\mathrm{d} v_{C}}{\\mathrm{d} t} = \\frac{1}{C}\\,i_{L}(t) - \\frac{1}{R C}\\,v_{C}(t).\n$$\nThus, in the on-state,\n$$\n\\frac{\\mathrm{d}}{\\mathrm{d} t} \\begin{pmatrix} i_{L}(t) \\\\ v_{C}(t) \\end{pmatrix} = \\begin{pmatrix} 0 & -\\frac{1}{L} \\\\ \\frac{1}{C} & -\\frac{1}{R C} \\end{pmatrix} \\begin{pmatrix} i_{L}(t) \\\\ v_{C}(t) \\end{pmatrix} + \\begin{pmatrix} \\frac{1}{L} \\\\ 0 \\end{pmatrix} v_{g}.\n$$\n\nIn the off-state, the switch is open and the ideal diode conducts, connecting the inductor to ground through the diode. KVL around the inductor–capacitor loop yields\n$$\nv_{L}(t) = -\\,v_{C}(t).\n$$\nHence,\n$$\nL \\,\\frac{\\mathrm{d} i_{L}}{\\mathrm{d} t} = -\\,v_{C}(t) \\quad \\Rightarrow \\quad \\frac{\\mathrm{d} i_{L}}{\\mathrm{d} t} = -\\,\\frac{1}{L}\\,v_{C}(t).\n$$\nThe output node KCL is unchanged:\n$$\n\\frac{\\mathrm{d} v_{C}}{\\mathrm{d} t} = \\frac{1}{C}\\,i_{L}(t) - \\frac{1}{R C}\\,v_{C}(t).\n$$\nTherefore, in the off-state,\n$$\n\\frac{\\mathrm{d}}{\\mathrm{d} t} \\begin{pmatrix} i_{L}(t) \\\\ v_{C}(t) \\end{pmatrix} = \\begin{pmatrix} 0 & -\\frac{1}{L} \\\\ \\frac{1}{C} & -\\frac{1}{R C} \\end{pmatrix} \\begin{pmatrix} i_{L}(t) \\\\ v_{C}(t) \\end{pmatrix} + \\begin{pmatrix} 0 \\\\ 0 \\end{pmatrix} v_{g}.\n$$\n\nLet $d(t)$ denote the duty ratio, with average $D \\in (0,1)$ under steady-state continuous conduction mode. Over one switching period $T_{s}$, the averaged state derivative is given by state-space averaging as\n$$\n\\left\\langle \\dot{x} \\right\\rangle = d \\,\\dot{x}_{\\text{on}} + (1-d)\\,\\dot{x}_{\\text{off}}.\n$$\nSubstituting the subinterval dynamics above and considering steady operation with $d(t)$ replaced by its constant average $D$, we obtain the averaged dynamics\n$$\n\\frac{\\mathrm{d}}{\\mathrm{d} t} \\begin{pmatrix} i_{L} \\\\ v_{C} \\end{pmatrix} = \\underbrace{\\begin{pmatrix} 0 & -\\frac{1}{L} \\\\ \\frac{1}{C} & -\\frac{1}{R C} \\end{pmatrix}}_{A_{\\mathrm{avg}}} \\begin{pmatrix} i_{L} \\\\ v_{C} \\end{pmatrix} + \\underbrace{\\begin{pmatrix} \\frac{D}{L} \\\\ 0 \\end{pmatrix}}_{B_{\\mathrm{avg}}} v_{g}.\n$$\nThe averaged state matrix $A_{\\mathrm{avg}}$ is the Jacobian of the state dynamics with respect to the state vector, evaluated at the operating point, and is independent of the duty ratio $D$ and the input voltage $v_{g}$ for the ideal buck with resistive load, because the only duty-dependent term enters through the input matrix $B_{\\mathrm{avg}}$.\n\nTo study small-signal dynamics around an equilibrium, we linearize about a steady operating point $(x^{\\star}, u^{\\star})$ with constant $D$ and input $v_{g} = u^{\\star}$. The linearized small-signal state transition matrix is precisely $A_{\\mathrm{avg}}$ as derived above. The eigenvalues of $A_{\\mathrm{avg}}$ are the roots of its characteristic polynomial. Compute\n$$\n\\chi_{A}(s) = \\det\\!\\left(s I - A_{\\mathrm{avg}}\\right) = \\det \\begin{pmatrix} s & \\frac{1}{L} \\\\ -\\frac{1}{C} & s + \\frac{1}{R C} \\end{pmatrix} = s\\!\\left(s + \\frac{1}{R C}\\right) - \\left(-\\frac{1}{C}\\right)\\!\\left(\\frac{1}{L}\\right).\n$$\nSimplifying,\n$$\n\\chi_{A}(s) = s^{2} + \\frac{1}{R C}\\,s + \\frac{1}{L C}.\n$$\nHence the eigenvalues are\n$$\n\\lambda_{1,2} = \\frac{-\\frac{1}{R C} \\pm \\sqrt{\\left(\\frac{1}{R C}\\right)^{2} - \\frac{4}{L C}}}{2}.\n$$\n\nWe now verify stability. By the Routh–Hurwitz criterion for a second-order polynomial $s^{2} + a_{1} s + a_{0}$, all roots have strictly negative real parts if and only if $a_{1} > 0$ and $a_{0} > 0$. In our case,\n$$\na_{1} = \\frac{1}{R C}, \\quad a_{0} = \\frac{1}{L C}.\n$$\nFor a positive resistive load $R>0$ and positive physical parameters $L>0$, $C>0$, we have $a_{1} > 0$ and $a_{0} > 0$, therefore both eigenvalues lie in the open left half-plane and the averaged dynamics are internally stable. If the load exhibits negative incremental resistance, modeled as $R<0$, then $a_{1} = \\frac{1}{R C} < 0$ while $a_{0} = \\frac{1}{L C} > 0$, violating the Routh–Hurwitz conditions and implying that one pole must cross into the right half-plane, destabilizing the averaged dynamics. The eigenvalue expression above remains valid; the sign of $\\frac{1}{R C}$ determines the sign of the real part of the root sum, and with $R<0$ the sum of roots is positive, forcing at least one positive real part.\n\nThus, the eigenvalues of $A_{\\mathrm{avg}}$ are given in closed form by the quadratic formula above, expressed in $\\mathrm{s}^{-1}$.",
            "answer": "$$\\boxed{\\begin{pmatrix}\\frac{-\\frac{1}{R C}+\\sqrt{\\left(\\frac{1}{R C}\\right)^{2}-\\frac{4}{L C}}}{2} & \\frac{-\\frac{1}{R C}-\\sqrt{\\left(\\frac{1}{R C}\\right)^{2}-\\frac{4}{L C}}}{2}\\end{pmatrix}}$$"
        },
        {
            "introduction": "The true power of small-signal modeling lies in its ability to predict the performance of a complete regulated system. This advanced practice involves incorporating a feedback controller into the averaged model of a buck converter to derive its closed-loop output impedance, $Z_{\\text{out,cl}}(s)$ . This exercise shows how the model can be used to analyze and design for critical real-world performance metrics, such as voltage regulation under dynamic load conditions.",
            "id": "3883749",
            "problem": "A direct-current to direct-current buck converter operates in Continuous Conduction Mode (CCM) with an ideal switch and diode, an inductor of inductance $L$, and an output capacitor of capacitance $C$ feeding a resistive load $R$. The input source is a constant voltage $V_{g}$, and the duty ratio is $d(t) \\in [0,1]$. Neglect all parasitics other than $R$. The output node is subjected to a small-signal load current injection $\\hat{i}_{z}(t)$, modeled as a current source in parallel with $R$, representing a load transient. The converter is regulated by a voltage-feedback loop: the output voltage is sensed by a resistive divider of gain $H_{v}$, compared to a constant reference, and processed by a compensator with transfer function $G_{c}(s)$. The compensator output is applied to a Pulse Width Modulation (PWM) modulator with small-signal gain $K_{m}$ (duty ratio per volt), producing the duty ratio perturbation $\\hat{d}(t)$. Assume the small-signal reference perturbation and input perturbation are zero, i.e., $\\hat{v}_{\\text{ref}}(t) = 0$ and $\\hat{v}_{g}(t) = 0$. Use state-space averaging about a steady operating point with average duty ratio $D \\in (0,1)$ and output voltage $V_{o} = D V_{g}$.\n\nStarting from the inductor and capacitor constitutive relations and Kirchhoff’s laws, derive the small-signal averaged model and incorporate the feedback controller to obtain the closed-loop output impedance, defined for small perturbations as\n$$\nZ_{\\text{out,cl}}(s) \\equiv -\\frac{\\hat{v}_{o}(s)}{\\hat{i}_{z}(s)},\n$$\nwith $\\hat{v}_{o}(s)$ the small-signal output voltage and $\\hat{i}_{z}(s)$ the small-signal injected load current (positive when drawing more current from the output node to ground). Express your final answer in terms of $L$, $C$, $R$, $V_{g}$, $K_{m}$, $H_{v}$, $G_{c}(s)$, and the complex frequency $s$. Express the final closed-form expression for $Z_{\\text{out,cl}}(s)$ in ohms; do not include units in the final boxed answer.",
            "solution": "The derivation begins by establishing the small-signal averaged model of the buck converter. The state variables are the inductor current, $i_L(t)$, and the capacitor voltage, $v_o(t)$ (which is the output voltage).\n\nThe averaged equations for a buck converter operating in CCM are derived by averaging the inductor voltage and capacitor current over one switching period $T_s$.\nThe average voltage across the inductor over one period is:\n$$\n\\langle v_L \\rangle = \\frac{1}{T_s} \\int_0^{T_s} v_L(\\tau) d\\tau = D(V_g - V_o) + (1-D)(-V_o) = D V_g - V_o\n$$\nAssuming the converter is at a steady state DC operating point, the average inductor voltage is zero, which gives the DC conversion ratio $V_o = D V_g$.\nLet's formulate the dynamic averaged model. The voltage applied to the inductor-capacitor filter is $d(t)v_g(t)$. The inductor voltage is $v_L(t) = d(t)v_g(t) - v_o(t)$.\nThe capacitor current is given by Kirchhoff's current law at the output node, considering the injected load current $i_z(t)$: $i_C(t) = i_L(t) - \\frac{v_o(t)}{R} - i_z(t)$.\n\nThe averaged state-space equations are:\n$$\nL \\frac{d\\langle i_L \\rangle}{dt} = \\langle d(t)v_g(t) \\rangle - \\langle v_o(t) \\rangle\n$$\n$$\nC \\frac{d\\langle v_o \\rangle}{dt} = \\langle i_L(t) \\rangle - \\frac{\\langle v_o(t) \\rangle}{R} - \\langle i_z(t) \\rangle\n$$\nWe linearize these equations around a quiescent operating point. Let each variable be represented by its DC (uppercase) and a small-signal AC (hat) component:\n$d(t) = D + \\hat{d}(t)$\n$v_g(t) = V_g + \\hat{v}_g(t)$\n$i_L(t) = I_L + \\hat{i}_L(t)$\n$v_o(t) = V_o + \\hat{v}_o(t)$\n$i_z(t) = I_z + \\hat{i}_z(t)$\n\nSubstituting these into the averaged equations and neglecting products of small-signal quantities (e.g., $\\hat{d}\\hat{v}_g$):\n$L \\frac{d(I_L + \\hat{i}_L)}{dt} = (D+\\hat{d})(V_g+\\hat{v}_g) - (V_o+\\hat{v}_o) \\approx (DV_g + D\\hat{v}_g + V_g\\hat{d}) - (V_o+\\hat{v}_o)$\n$C \\frac{d(V_o + \\hat{v}_o)}{dt} = (I_L + \\hat{i}_L) - \\frac{V_o+\\hat{v}_o}{R} - (I_z+\\hat{i}_z)$\n\nSeparating DC (steady-state) and AC (small-signal) terms:\nDC equations:\n$0 = DV_g - V_o$\n$0 = I_L - \\frac{V_o}{R} - I_z$\nThe problem describes $\\hat{i}_z(t)$ as a small-signal injection, which implies its DC component $I_z$ is zero. So, $V_o = DV_g$ and $I_L = V_o/R$.\n\nAC equations:\n$$\nL \\frac{d\\hat{i}_L}{dt} = D\\hat{v}_g + V_g\\hat{d} - \\hat{v}_o\n$$\n$$\nC \\frac{d\\hat{v}_o}{dt} = \\hat{i}_L - \\frac{\\hat{v}_o}{R} - \\hat{i}_z\n$$\nThe problem specifies that the input voltage perturbation is zero, $\\hat{v}_g(t) = 0$. The AC equations simplify to:\n$$\nL \\frac{d\\hat{i}_L}{dt} = V_g\\hat{d} - \\hat{v}_o\n$$\n$$\nC \\frac{d\\hat{v}_o}{dt} = \\hat{i}_L - \\frac{\\hat{v}_o}{R} - \\hat{i}_z\n$$\nTaking the Laplace transform of these two equations (with initial conditions being zero for small-signal analysis):\n$$\nsL \\hat{i}_L(s) = V_g \\hat{d}(s) - \\hat{v}_o(s) \\quad (1)\n$$\n$$\nsC \\hat{v}_o(s) = \\hat{i}_L(s) - \\frac{\\hat{v}_o(s)}{R} - \\hat{i}_z(s) \\quad (2)\n$$\nThese equations describe the open-loop dynamics of the converter.\n\nNext, we model the feedback loop. The output voltage $\\hat{v}_o(s)$ is sensed with gain $H_v$, compared to a zero reference ($\\hat{v}_{\\text{ref}}(s) = 0$), processed by the compensator $G_c(s)$, and fed to the PWM modulator with gain $K_m$ to generate the duty ratio perturbation $\\hat{d}(s)$. The relationship is:\n$$\n\\hat{d}(s) = K_m G_c(s) (0 - H_v \\hat{v}_o(s)) = -K_m G_c(s) H_v \\hat{v}_o(s) \\quad (3)\n$$\nTo find the closed-loop output impedance, we substitute equation $(3)$ into $(1)$ to eliminate $\\hat{d}(s)$:\n$$\nsL \\hat{i}_L(s) = V_g (-K_m G_c(s) H_v \\hat{v}_o(s)) - \\hat{v}_o(s)\n$$\n$$\nsL \\hat{i}_L(s) = -\\hat{v}_o(s) (1 + V_g K_m G_c(s) H_v)\n$$\nFrom this, we express $\\hat{i}_L(s)$ in terms of $\\hat{v}_o(s)$:\n$$\n\\hat{i}_L(s) = -\\frac{\\hat{v}_o(s)}{sL} (1 + V_g K_m G_c(s) H_v) \\quad (4)\n$$\nNow, substitute this expression for $\\hat{i}_L(s)$ into equation $(2)$:\n$$\nsC \\hat{v}_o(s) = \\left( -\\frac{\\hat{v}_o(s)}{sL} (1 + V_g K_m G_c(s) H_v) \\right) - \\frac{\\hat{v}_o(s)}{R} - \\hat{i}_z(s)\n$$\nThe goal is to find $Z_{\\text{out,cl}}(s) = -\\frac{\\hat{v}_{o}(s)}{\\hat{i}_{z}(s)}$. We rearrange the equation to isolate $\\hat{i}_z(s)$ on one side and terms with $\\hat{v}_o(s)$ on the other:\n$$\n\\hat{i}_z(s) = -\\hat{v}_o(s) \\left( sC + \\frac{1}{R} + \\frac{1 + V_g K_m G_c(s) H_v}{sL} \\right)\n$$\nNow, we can form the desired ratio:\n$$\n-\\frac{\\hat{v}_o(s)}{\\hat{i}_z(s)} = \\frac{1}{sC + \\frac{1}{R} + \\frac{1}{sL} + \\frac{V_g K_m G_c(s) H_v}{sL}}\n$$\nTo present this in a standard rational function form, we find a common denominator, which is $sL$:\n$$\nZ_{\\text{out,cl}}(s) = \\frac{1}{\\frac{s^2LC + \\frac{sL}{R} + 1 + V_g K_m G_c(s) H_v}{sL}}\n$$\nInverting the denominator gives the final closed-form expression for the closed-loop output impedance:\n$$\nZ_{\\text{out,cl}}(s) = \\frac{sL}{s^2LC + s\\frac{L}{R} + 1 + V_g K_m H_v G_c(s)}\n$$\nThis expression is in terms of the specified parameters $L$, $C$, $R$, $V_g$, $K_m$, $H_v$, $G_c(s)$, and $s$.\nIt can also be written with a slightly different arrangement of the second term in the denominator:\n$$\nZ_{\\text{out,cl}}(s) = \\frac{sL}{s^2LC + s\\frac{L}{R} + 1 + V_g K_m H_v G_c(s)}\n$$\nThis form is preferred as it groups terms by powers of $s$.",
            "answer": "$$\n\\boxed{\\frac{sL}{s^2LC + s\\frac{L}{R} + 1 + V_g K_m H_v G_c(s)}}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "深入理解热阻的第一步是回归其物理本质——热传导。本练习将从傅里叶热传导定律这一基本原理出发，为典型的多层结构建立稳态热阻模型。通过此实践，您将加深对热-电类比的理解，并掌握分析构成功率模块封装基础的热堆栈所需的基本技能 。",
            "id": "3885638",
            "problem": "一个功率半导体封装被建模为一个一维 (1D) 热堆叠，由两个横向完全对齐的平面均匀层组成。第1层是厚度为 $L_1$、热导率为 $k_1$ 的硅芯片，它键合到第2层，即厚度为 $L_2$、热导率为 $k_2$ 的铜基板上。垂直于热流方向的横截面积为 $A$。两个固体之间的机械键合是不完美的，其特征是单位面积的界面热接触电阻 $R''_{\\theta,c}$。侧面是绝热的，因此热量严格沿着堆叠的法线方向流动。一个稳定、均匀的热流率 $Q$ 从第1层的顶面进入，并从第2层的底面流出。两层内部均无体积生热。\n\n严格从傅里叶热传导定律和能量守恒定律出发，推导每层以及界面上的温度降，然后将它们组合起来，构建第1层顶面和第2层底面之间的总热阻 $R_{\\theta,\\mathrm{tot}}$，其定义关系式为 $\\Delta T = Q \\, R_{\\theta,\\mathrm{tot}}$。在获得封闭形式的表达式后，使用以下数据对 $R_{\\theta,\\mathrm{tot}}$ 进行数值计算：\n- $A = 1.5 \\times 10^{-4} \\ \\mathrm{m^2}$\n- $L_1 = 1.8 \\times 10^{-4} \\ \\mathrm{m}$, $k_1 = 130 \\ \\mathrm{W \\, m^{-1} \\, K^{-1}}$\n- $L_2 = 2.5 \\times 10^{-3} \\ \\mathrm{m}$, $k_2 = 380 \\ \\mathrm{W \\, m^{-1} \\, K^{-1}}$\n- $R''_{\\theta,c} = 7.5 \\times 10^{-5} \\ \\mathrm{K \\, m^2 \\, W^{-1}}$\n\n将最终的总热阻以 $\\mathrm{K \\, W^{-1}}$ 为单位表示，并将您的答案四舍五入到四位有效数字。",
            "solution": "问题要求从基本原理出发，推导一个带有界面接触电阻的双层复合堆叠的总热阻。该系统是一维的、处于稳态，且无内部生热。其控制原理是傅里叶热传导定律。\n\n让我们建立一个一维坐标系 $x$，其原点位于第1层（硅芯片）的顶面，并沿热流方向递增。第1层的顶面位于 $x=0$。第1层和第2层之间的界面位于 $x=L_1$。第2层（铜基板）的底面位于 $x=L_1+L_2$。\n\n在无体积生热的稳态条件下，能量守恒原理规定热流率 $Q$ 在整个堆叠中是恒定的。因此，热通量 $q_x$ 也是恒定的，由 $q_x = Q/A$ 给出。\n\n一维傅里叶热传导定律为：\n$$q_x = -k \\frac{dT}{dx}$$\n其中 $T$ 是温度，$k$ 是热导率。重新整理得到温度梯度：\n$$\\frac{dT}{dx} = -\\frac{q_x}{k} = -\\frac{Q}{kA}$$\n\n我们现在可以在热路径的每个部分上对该方程进行积分，以求出其上的温度降。\n\n1.  **第1层上的温度降 ($\\Delta T_1$)**\n对于第1层，热导率为 $k_1$，该层从 $x=0$ 延伸到 $x=L_1$。设 $T(0)$ 为顶面温度，$T(L_1^-)$ 为芯片底面温度。\n$$\\int_{T(0)}^{T(L_1^-)} dT = -\\int_{0}^{L_1} \\frac{Q}{k_1 A} dx$$\n$$T(L_1^-) - T(0) = -\\frac{Q L_1}{k_1 A}$$\n第1层上的温度降为 $\\Delta T_1 = T(0) - T(L_1^-)$。\n$$\\Delta T_1 = \\frac{Q L_1}{k_1 A}$$\n因此，第1层的热阻为 $R_{\\theta,1} = \\frac{\\Delta T_1}{Q} = \\frac{L_1}{k_1 A}$。\n\n2.  **界面上的温度降 ($\\Delta T_c$)**\n位于 $x=L_1$ 的不完美界面引入了一个离散的温度降。问题提供了单位面积的界面热接触电阻 $R''_{\\theta,c}$。总界面电阻 $R_{\\theta,c}$ 可通过除以横截面积 $A$ 得到：\n$$R_{\\theta,c} = \\frac{R''_{\\theta,c}}{A}$$\n该界面上的温度降 $\\Delta T_c$ 由热阻关系定义：\n$$\\Delta T_c = Q R_{\\theta,c} = Q \\frac{R''_{\\theta,c}}{A}$$\n这个温度降发生在第1层的底面 $T(L_1^-)$ 和第2层的顶面 $T(L_1^+)$ 之间，因此 $\\Delta T_c = T(L_1^-) - T(L_1^+)$。\n\n3.  **第2层上的温度降 ($\\Delta T_2$)**\n对于第2层，热导率为 $k_2$，该层从 $x=L_1$ 延伸到 $x=L_1+L_2$。设 $T(L_1+L_2)$ 为基板底面的温度。\n$$\\int_{T(L_1^+)}^{T(L_1+L_2)} dT = -\\int_{L_1}^{L_1+L_2} \\frac{Q}{k_2 A} dx$$\n$$T(L_1+L_2) - T(L_1^+) = -\\frac{Q(L_1+L_2 - L_1)}{k_2 A} = -\\frac{Q L_2}{k_2 A}$$\n第2层上的温度降为 $\\Delta T_2 = T(L_1^+) - T(L_1+L_2)$。\n$$\\Delta T_2 = \\frac{Q L_2}{k_2 A}$$\n因此，第2层的热阻为 $R_{\\theta,2} = \\frac{\\Delta T_2}{Q} = \\frac{L_2}{k_2 A}$。\n\n4.  **总热阻 ($R_{\\theta,\\mathrm{tot}}$)**\n从第1层顶部到底部第2层的总温度降 $\\Delta T$ 是各个温度降之和。\n$$\\Delta T = \\Delta T_1 + \\Delta T_c + \\Delta T_2$$\n代入每个温度降的推导表达式：\n$$\\Delta T = \\frac{Q L_1}{k_1 A} + Q \\frac{R''_{\\theta,c}}{A} + \\frac{Q L_2}{k_2 A}$$\n提出热流率 $Q$：\n$$\\Delta T = Q \\left( \\frac{L_1}{k_1 A} + \\frac{R''_{\\theta,c}}{A} + \\frac{L_2}{k_2 A} \\right)$$\n总热阻由 $\\Delta T = Q R_{\\theta,\\mathrm{tot}}$ 定义。与上述表达式进行比较，我们将 $R_{\\theta,\\mathrm{tot}}$ 的封闭形式表达式确定为串联电阻之和：\n$$R_{\\theta,\\mathrm{tot}} = R_{\\theta,1} + R_{\\theta,c} + R_{\\theta,2} = \\frac{L_1}{k_1 A} + \\frac{R''_{\\theta,c}}{A} + \\frac{L_2}{k_2 A}$$\n这也可以写成：\n$$R_{\\theta,\\mathrm{tot}} = \\frac{1}{A} \\left( \\frac{L_1}{k_1} + R''_{\\theta,c} + \\frac{L_2}{k_2} \\right)$$\n\n5.  **数值计算**\n给定以下数值：\n$A = 1.5 \\times 10^{-4} \\ \\mathrm{m^2}$\n$L_1 = 1.8 \\times 10^{-4} \\ \\mathrm{m}$, $k_1 = 130 \\ \\mathrm{W \\, m^{-1} \\, K^{-1}}$\n$L_2 = 2.5 \\times 10^{-3} \\ \\mathrm{m}$, $k_2 = 380 \\ \\mathrm{W \\, m^{-1} \\, K^{-1}}$\n$R''_{\\theta,c} = 7.5 \\times 10^{-5} \\ \\mathrm{K \\, m^2 \\, W^{-1}}$\n\n我们计算 $R_{\\theta,\\mathrm{tot}}$ 表达式中的每一项：\n$R_{\\theta,1} = \\frac{L_1}{k_1 A} = \\frac{1.8 \\times 10^{-4} \\ \\mathrm{m}}{(130 \\ \\mathrm{W \\, m^{-1} \\, K^{-1}})(1.5 \\times 10^{-4} \\ \\mathrm{m^2})} = \\frac{1.8 \\times 10^{-4}}{0.0195} \\ \\mathrm{K \\, W^{-1}} \\approx 0.00923077 \\ \\mathrm{K \\, W^{-1}}$\n$R_{\\theta,c} = \\frac{R''_{\\theta,c}}{A} = \\frac{7.5 \\times 10^{-5} \\ \\mathrm{K \\, m^2 \\, W^{-1}}}{1.5 \\times 10^{-4} \\ \\mathrm{m^2}} = 0.5 \\ \\mathrm{K \\, W^{-1}}$\n$R_{\\theta,2} = \\frac{L_2}{k_2 A} = \\frac{2.5 \\times 10^{-3} \\ \\mathrm{m}}{(380 \\ \\mathrm{W \\, m^{-1} \\, K^{-1}})(1.5 \\times 10^{-4} \\ \\mathrm{m^2})} = \\frac{2.5 \\times 10^{-3}}{0.057} \\ \\mathrm{K \\, W^{-1}} \\approx 0.04385965 \\ \\mathrm{K \\, W^{-1}}$\n\n将这些值相加得到总热阻：\n$R_{\\theta,\\mathrm{tot}} = 0.00923077 \\ \\mathrm{K \\, W^{-1}} + 0.5 \\ \\mathrm{K \\, W^{-1}} + 0.04385965 \\ \\mathrm{K \\, W^{-1}}$\n$R_{\\theta,\\mathrm{tot}} \\approx 0.55309042 \\ \\mathrm{K \\, W^{-1}}$\n\n根据问题要求，将结果四舍五入到四位有效数字，得到 $0.5531 \\ \\mathrm{K \\, W^{-1}}$。",
            "answer": "$$\n\\boxed{0.5531}\n$$"
        },
        {
            "introduction": "功率电子系统通常在开关状态下运行，其功耗表现为脉冲形式而非恒定值。因此，分析必须从稳态情况扩展到动态响应。本练习介绍了一个关键概念——瞬态热阻抗（$Z_{\\theta}(t)$），并应用线性系统的叠加原理来计算周期性功率脉冲下的峰值结温 。掌握这种方法对于精确预测实际开关应用中的峰值温度、防止器件过热和确保长期可靠性至关重要。",
            "id": "3885619",
            "problem": "一个在开关变换器中工作的功率半导体耗散一个周期为 $T$、占空比为 $D$ 的周期性矩形功率波形，其中 $T>0$ 且 $0 < D < 1$。在导通期间，即 $t \\in [kT, kT+DT]$ 对于整数 $k$，功率耗散为 $P_{\\mathrm{pk}} > 0$；在关断期间，功率耗散为零。器件的瞬态热阻抗 $Z_{\\theta}(t)$ 通过一个 $N$ 阶 Foster 网络模型给出：\n$$\nZ_{\\theta}(t) = \\sum_{i=1}^{N} R_{i} \\left(1-\\exp\\left(-\\frac{t}{\\tau_{i}}\\right)\\right)\n$$\n其中 $R_i > 0$ 和 $\\tau_i > 0$ 分别是第 $i$ 个热网络的电阻和时间常数。\n\n假设该器件的热行为可以用一个线性时不变（LTI）系统来充分描述，并且该系统已达到稳态。推导一个单一的闭式解析表达式，用于计算器件的稳态峰值结温升 $\\Delta T_{\\mathrm{J,pk,ss}}$。该表达式应以 $P_{\\mathrm{pk}}$、$D$、$T$ 以及网络的 $R_i$ 和 $\\tau_i$ 参数为函数。此外，请简要论证用于推导的无穷级数是收敛的。",
            "solution": "该问题要求推导在周期性矩形功耗波形作用下，功率半导体的稳态峰值结温升。器件的热行为被建模为一个线性时不变（LTI）系统，这允许使用叠加原理。\n\n功耗波形 $P(t)$ 是一个周期性的矩形脉冲序列。它可以描述为：\n$$\nP(t) = \n\\begin{cases}\nP_{\\mathrm{pk}}  &\\text{对于 } kT \\le t \\le kT + DT \\\\\n0  &\\text{对于 } kT + DT < t \\le (k+1)T\n\\end{cases}\n$$\n对于任意整数 $k$。这里，$P_{\\mathrm{pk}} > 0$ 是峰值功率，$T > 0$ 是周期，$D$ 是占空比，满足 $0 < D < 1$。\n\n这个波形可以由无穷多个正负阶跃函数构成。一个幅度为 $P_{\\mathrm{pk}}$ 的正阶跃发生在每个导通区间的开始，即 $t=kT$；一个相同幅度的负阶跃发生在导通区间的结束，即 $t=kT+DT$。使用亥维赛德阶跃函数 $u(t)$，所有时间的功率波形可以表示为：\n$$\nP(t) = P_{\\mathrm{pk}} \\sum_{k=-\\infty}^{\\infty} \\left[ u(t - kT) - u(t - (kT + DT)) \\right]\n$$\n\n热系统是 LTI 系统，其对单位功率阶跃 $u(t)$ 的响应由瞬态热阻抗 $Z_{\\theta}(t)$ 给出。根据叠加原理，结相对于环境的温升 $\\Delta T_{\\mathrm{J}}(t)$ 是对所有过去功率阶跃响应的总和。在时间 $t_0$ 发生的大小为 $P_0$ 的功率阶跃在时间 $t$ 的响应是 $P_0 Z_{\\theta}(t-t_0)$。因此，在时间 $t$ 的总温升是：\n$$\n\\Delta T_{\\mathrm{J}}(t) = P_{\\mathrm{pk}} \\sum_{k=-\\infty}^{\\infty} \\left[ Z_{\\theta}(t - kT)u(t - kT) - Z_{\\theta}(t - (kT + DT))u(t - (kT + DT)) \\right]\n$$\n由于对于 $t<0$ 有 $Z_{\\theta}(t)=0$，亥维赛德函数被隐式地包含了。我们关心的是稳态峰值温度，它发生在导通区间的末端。让我们分析在时间 $t_m = mT + DT$（对于某个整数 $m$）的温度，然后取 $m \\to \\infty$ 的极限来找到稳态值。在实践中，这等同于将直到目标时间的所有先前脉冲的影响相加。让我们将评估时间设置为 $t=DT$，并对所有在 $kT \\le 0$ 时的脉冲影响求和。这对应于在系统自 $t=-\\infty$ 以来一直运行后，在从 $t=0$ 开始的脉冲周期中找到峰值温度。\n\n在时间 $t=DT$ 的温升是所有先前功率上升沿和下降沿贡献的总和。让我们将求和的索引从 $k=0$ 改为 $k=\\infty$ 以表示过去的脉冲。一个在时间 $-kT$（对于 $k \\ge 0$）开始的脉冲，由一个在 $-kT$ 的正阶跃和一个在 $-kT+DT$ 的负阶跃组成。\n在 $-kT$ 处的正阶跃对 $t=DT$ 时温度的贡献是 $P_{\\mathrm{pk}} Z_{\\theta}(DT - (-kT)) = P_{\\mathrm{pk}} Z_{\\theta}(kT+DT)$。\n在 $-kT+DT$ 处的负阶跃对 $t=DT$ 时温度的贡献是 $-P_{\\mathrm{pk}} Z_{\\theta}(DT - (-kT+DT)) = -P_{\\mathrm{pk}} Z_{\\theta}(kT)$。\n\n总的稳态峰值温升 $\\Delta T_{\\mathrm{J,pk,ss}}$ 是对所有过去脉冲（$k=0, 1, 2, \\dots$）这些贡献的总和：\n$$\n\\Delta T_{\\mathrm{J,pk,ss}} = \\sum_{k=0}^{\\infty} P_{\\mathrm{pk}} \\left[ Z_{\\theta}(kT+DT) - Z_{\\theta}(kT) \\right]\n$$\n注意，当 $k=0$ 时，第二项根据定义为 $Z_{\\theta}(0)=0$。我们可以将 $k=0$ 的项分离出来，表达式写作：\n$$\n\\Delta T_{\\mathrm{J,pk,ss}} = P_{\\mathrm{pk}} Z_{\\theta}(DT) + P_{\\mathrm{pk}} \\sum_{k=1}^{\\infty} \\left[ Z_{\\theta}(kT+DT) - Z_{\\theta}(kT) \\right]\n$$\n\n现在，我们代入给定的 $Z_{\\theta}(t)$ 的 Foster 网络表示法：\n$$\nZ_{\\theta}(t) = \\sum_{i=1}^{N} R_{i} \\left(1-\\exp\\left(-\\frac{t}{\\tau_{i}}\\right)\\right)\n$$\n将此代入 $\\Delta T_{\\mathrm{J,pk,ss}}$ 的表达式中，并交换求和顺序（这是允许的，因为对 $i$ 的求和是有限的）：\n$$\n\\Delta T_{\\mathrm{J,pk,ss}} = \\sum_{i=1}^{N} P_{\\mathrm{pk}} R_{i} \\left[ \\left(1-\\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right) + \\sum_{k=1}^{\\infty} \\left\\{ \\left(1-\\exp\\left(-\\frac{kT+DT}{\\tau_{i}}\\right)\\right) - \\left(1-\\exp\\left(-\\frac{kT}{\\tau_{i}}\\right)\\right) \\right\\} \\right]\n$$\n让我们简化单个热网络支路 $i$ 的无穷级数内的项：\n$$\n\\left(1-\\exp\\left(-\\frac{kT+DT}{\\tau_{i}}\\right)\\right) - \\left(1-\\exp\\left(-\\frac{kT}{\\tau_{i}}\\right)\\right) = \\exp\\left(-\\frac{kT}{\\tau_{i}}\\right) - \\exp\\left(-\\frac{kT+DT}{\\tau_{i}}\\right)\n$$\n$$\n= \\exp\\left(-\\frac{kT}{\\tau_{i}}\\right) \\left(1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right)\n$$\n对于支路 $i$，方括号内的表达式变为：\n$$\n\\left(1-\\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right) + \\sum_{k=1}^{\\infty} \\exp\\left(-\\frac{kT}{\\tau_{i}}\\right) \\left(1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right)\n$$\n我们可以提出公因子 $\\left(1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right)$：\n$$\n= \\left(1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right) \\left[ 1 + \\sum_{k=1}^{\\infty} \\exp\\left(-\\frac{kT}{\\tau_{i}}\\right) \\right]\n$$\n求和项 $\\sum_{k=1}^{\\infty} \\exp\\left(-\\frac{kT}{\\tau_{i}}\\right)$ 是一个公比为 $r = \\exp\\left(-\\frac{T}{\\tau_{i}}\\right)$ 的几何级数 $\\sum_{k=1}^{\\infty} r^k$。\n\n我们必须证明这个级数的收敛性。根据问题陈述，$T>0$ 且对所有 $i$ 都有 $\\tau_i>0$。因此，指数 $-T/\\tau_i$ 严格为负。这意味着公比 $r = \\exp(-T/\\tau_i)$ 满足 $0 < r < 1$。对于任何公比 $|r|<1$ 的几何级数，其和收敛于 $\\frac{r}{1-r}$。过去脉冲贡献的总和是收敛的，因为它是一个涉及收敛几何级数表达式的有限和（对 $i$ 求和）。\n\n应用几何级数求和公式：\n$$\n\\sum_{k=1}^{\\infty} \\left(\\exp\\left(-\\frac{T}{\\tau_{i}}\\right)\\right)^k = \\frac{\\exp(-T/\\tau_{i})}{1 - \\exp(-T/\\tau_{i})}\n$$\n将此代回方括号内的项：\n$$\n1 + \\frac{\\exp(-T/\\tau_{i})}{1 - \\exp(-T/\\tau_{i})} = \\frac{1 - \\exp(-T/\\tau_{i}) + \\exp(-T/\\tau_{i})}{1 - \\exp(-T/\\tau_{i})} = \\frac{1}{1 - \\exp(-T/\\tau_{i})}\n$$\n因此，第 $i$ 个支路对总温升的贡献是：\n$$\nP_{\\mathrm{pk}} R_{i} \\left(1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)\\right) \\left( \\frac{1}{1 - \\exp(-T/\\tau_{i})} \\right) = P_{\\mathrm{pk}} R_{i} \\frac{1 - \\exp(-DT/\\tau_{i})}{1 - \\exp(-T/\\tau_{i})}\n$$\n稳态峰值结温升的最终表达式是通过对 Foster 网络所有 $N$ 个支路的贡献求和得到的：\n$$\n\\Delta T_{\\mathrm{J,pk,ss}} = P_{\\mathrm{pk}} \\sum_{i=1}^{N} R_{i} \\frac{1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)}{1 - \\exp\\left(-\\frac{T}{\\tau_{i}}\\right)}\n$$\n这就是所要求的单一闭式解析表达式。所得量表示温升，单位为开尔文（$K$）或等效的摄氏度（°C）。",
            "answer": "$$\n\\boxed{P_{\\mathrm{pk}} \\sum_{i=1}^{N} R_{i} \\frac{1 - \\exp\\left(-\\frac{DT}{\\tau_{i}}\\right)}{1 - \\exp\\left(-\\frac{T}{\\tau_{i}}\\right)}}\n$$"
        },
        {
            "introduction": "虽然线性模型为热分析提供了便利，但现实世界中的材料特性（如热导率）通常会随温度变化，从而引入了非线性。本练习探讨了这种重要的非线性效应，其中器件自身的温度会反过来影响其热阻。您将通过实现一个迭代数值算法来求解这个非线性问题，这种方法对于精确建模和理解潜在的热失控现象至关重要 。",
            "id": "3885590",
            "problem": "给定一个稳态一维热传导路径，代表一个功率半导体芯片与一个封装串联。芯片的厚度为 $L$，横截面积为 $A$。芯片材料的热导率与温度相关，并根据 $k(T) = k_0 - \\alpha \\left(T - T_{\\mathrm{ref}}\\right)$ 随结温 $T_j$ 线性下降，其中 $k_0$ 是在参考温度 $T_{\\mathrm{ref}}$ 下的热导率，$\\alpha$ 是一个正斜率系数。封装被建模为与芯片串联的恒定热阻 $R_{\\theta,\\mathrm{pkg}}$。在耗散功率为 $P$、环境温度为 $T_{\\mathrm{amb}}$ 的稳态运行下，结温满足傅里叶热传导定律所蕴含的能量平衡，这反过来又将稳态热阻 $R_{\\theta}(T)$ 定义为温升与热流之比。对于均匀的一维路径，芯片的热阻为 $R_{\\theta,\\mathrm{die}}(T) = \\dfrac{L}{k(T) A}$，总热阻为 $R_{\\theta}(T) = R_{\\theta,\\mathrm{die}}(T) + R_{\\theta,\\mathrm{pkg}}$。\n\n您的任务是通过求解不动点方程 $T_j = T_{\\mathrm{amb}} + P \\, R_{\\theta}(T_j)$ 来计算 $T_j$，使用一个迭代不动点循环，在每次迭代中更新 $R_{\\theta}(T)$ 直至收敛。在 $T^{(0)} = T_{\\mathrm{amb}}$ 处初始化迭代，并根据 $T^{(n+1)} = T_{\\mathrm{amb}} + P \\, R_{\\theta}\\!\\left(T^{(n)}\\right)$ 进行更新，直到 $\\left|T^{(n+1)} - T^{(n)}\\right| < \\varepsilon$，或达到指定的最大迭代次数。如果迭代未在限制内收敛，或者在任何步骤中计算出的热导率 $k\\!\\left(T^{(n)}\\right) \\le 0$，则返回一个“非数字”值以表示非物理或不收敛的行为。\n\n实现一个程序，对每个提供的测试用例执行上述计算，并输出收敛后的 $T_j$ 值，单位为开尔文，四舍五入到六位小数。最终输出必须是包含在方括号中的单行逗号分隔列表。所有物理量必须使用以下单位处理：$P$ 单位为瓦特，$T_{\\mathrm{amb}}$ 和 $T_{\\mathrm{ref}}$ 单位为开尔文，$L$ 单位为米，$A$ 单位为平方米，$k_0$ 单位为瓦特/米·开尔文，$\\alpha$ 单位为瓦特/米·开尔文·开尔文，$R_{\\theta,\\mathrm{pkg}}$ 单位为开尔文/瓦特。\n\n使用以下测试套件，它涵盖了各种操作条件和参数范围：\n- 案例 1 (理想情况): $P = 50$, $T_{\\mathrm{amb}} = 300$, $L = 2 \\times 10^{-4}$, $A = 25 \\times 10^{-6}$, $k_0 = 130$, $\\alpha = 0.1$, $T_{\\mathrm{ref}} = 300$, $R_{\\theta,\\mathrm{pkg}} = 0.5$, $\\varepsilon = 10^{-9}$, 最大迭代次数 $= 10000$。\n- 案例 2 (恒定热导率的边界情况): $P = 50$, $T_{\\mathrm{amb}} = 300$, $L = 2 \\times 10^{-4}$, $A = 25 \\times 10^{-6}$, $k_0 = 130$, $\\alpha = 0$, $T_{\\mathrm{ref}} = 300$, $R_{\\theta,\\mathrm{pkg}} = 0.5$, $\\varepsilon = 10^{-9}$, 最大迭代次数 $= 10000$。\n- 案例 3 (高功率，温升更强): $P = 200$, $T_{\\mathrm{amb}} = 300$, $L = 2 \\times 10^{-4}$, $A = 25 \\times 10^{-6}$, $k_0 = 130$, $\\alpha = 0.1$, $T_{\\mathrm{ref}} = 300$, $R_{\\theta,\\mathrm{pkg}} = 0.5$, $\\varepsilon = 10^{-9}$, 最大迭代次数 $= 10000$。\n- 案例 4 (较小面积，较大封装热阻，中等功率): $P = 30$, $T_{\\mathrm{amb}} = 300$, $L = 2 \\times 10^{-4}$, $A = 10 \\times 10^{-6}$, $k_0 = 130$, $\\alpha = 0.1$, $T_{\\mathrm{ref}} = 300$, $R_{\\theta,\\mathrm{pkg}} = 0.8$, $\\varepsilon = 10^{-9}$, 最大迭代次数 $= 10000$。\n- 案例 5 (热导率敏感度降低，适度功率): $P = 10$, $T_{\\mathrm{amb}} = 300$, $L = 2 \\times 10^{-4}$, $A = 25 \\times 10^{-6}$, $k_0 = 130$, $\\alpha = 0.05$, $T_{\\mathrm{ref}} = 300$, $R_{\\theta,\\mathrm{pkg}} = 0.5$, $\\varepsilon = 10^{-9}$, 最大迭代次数 $= 10000$。\n\n您的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表的结果（例如，$\\left[\\text{result}_1,\\text{result}_2,\\dots\\right]$），其中每个 $\\text{result}_i$ 是收敛后的结温，单位为开尔文，四舍五入到六位小数。如果某个案例因 $k(T) \\le 0$ 而不收敛或变为非物理状态，相应的输出条目必须是字符串“nan”。",
            "solution": "该问题要求计算功率半导体器件的稳态结温 $T_j$。该器件的热行为被建模为具有随温度变化的热导率的一维热传导路径。该问题被表述为一个不动点方程，需要使用迭代数值方法求解。\n\n问题的核心在于稳态条件下的能量平衡方程。结温相对于环境温度的温升 $T_j - T_{\\mathrm{amb}}$，等于耗散功率 $P$ 与热流路径总热阻 $R_{\\theta}(T_j)$ 的乘积。这给出了控制方程：\n$$\nT_j = T_{\\mathrm{amb}} + P \\cdot R_{\\theta}(T_j)\n$$\n该方程是一个形式为 $T_j = G(T_j)$ 的不动点问题，其中函数 $G(T)$ 定义为：\n$$\nG(T) = T_{\\mathrm{amb}} + P \\cdot R_{\\theta}(T)\n$$\n\n总热阻 $R_{\\theta}(T)$ 是封装的恒定热阻 $R_{\\theta,\\mathrm{pkg}}$ 与芯片的随温度变化的热阻 $R_{\\theta,\\mathrm{die}}(T)$ 之和。\n$$\nR_{\\theta}(T) = R_{\\theta,\\mathrm{die}}(T) + R_{\\theta,\\mathrm{pkg}}\n$$\n\n芯片的热阻由一维传导的标准公式 $R = L/(kA)$ 给出，其中 $L$ 是厚度，$A$ 是横截面积，$k$ 是热导率。\n$$\nR_{\\theta,\\mathrm{die}}(T) = \\frac{L}{k(T) A}\n$$\n\n热导率 $k(T)$ 本身是温度的线性函数，随温度升高而降低，这是硅在相关工作范围内的典型行为。它定义为：\n$$\nk(T) = k_0 - \\alpha (T - T_{\\mathrm{ref}})\n$$\n其中 $k_0$ 是在参考温度 $T_{\\mathrm{ref}}$ 下的热导率，$\\alpha$ 是一个正系数，表示热导率对温度变化的敏感度。\n\n为了求解 $T_j$，我们实现指定的不动点迭代算法。迭代序列 $T^{(n)}$ 按如下方式生成：\n1.  **初始化**：结温的第一个估计值取为环境温度，$T^{(0)} = T_{\\mathrm{amb}}$。\n2.  **迭代**：对于每个后续步骤 $n=0, 1, 2, \\dots$，使用前一个估计值 $T^{(n)}$ 计算下一个温度估计值 $T^{(n+1)}$：\n    $$\n    T^{(n+1)} = G(T^{(n)}) = T_{\\mathrm{amb}} + P \\cdot R_{\\theta}(T^{(n)})\n    $$\n    展开此式，更新规则为：\n    $$\n    T^{(n+1)} = T_{\\mathrm{amb}} + P \\left( \\frac{L}{A \\left(k_0 - \\alpha (T^{(n)} - T_{\\mathrm{ref}})\\right)} + R_{\\theta,\\mathrm{pkg}} \\right)\n    $$\n3.  **终止**：迭代过程在以下任一条件下终止：\n    a.  **收敛**：连续迭代值之间的变化小于指定的容差 $\\varepsilon$，即 $|T^{(n+1)} - T^{(n)}| < \\varepsilon$。此时解取为 $T^{(n+1)}$。\n    b.  **不收敛**：达到允许的最大迭代次数但未满足收敛准则。这表示未能收敛。\n    c.  **非物理状态**：在任何步骤 $n$，计算出的热导率 $k(T^{(n)})$ 变得小于或等于零。这是物理模型的失效，因为热导率必须为正。如果温度 $T^{(n)}$ 达到或超过 $T_{\\mathrm{ref}} + k_0/\\alpha$ 的值，就可能发生这种情况。\n\n对于不收敛或非物理状态的情况，结果报告为“非数字”(nan)值。\n\n实现包含一个函数，该函数接受给定测试用例的物理和数值参数。此函数执行上述迭代循环。然后，一个主驱动脚本遍历每个提供的测试用例，调用求解器函数，并收集结果。最后，将结果格式化为单个逗号分隔的字符串，其中数值结果四舍五入到六位小数，失败的案例用字符串“nan”表示，如规范所述。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef compute_tj(P, Tamb, L, A, k0, alpha, Tref, R_pkg, epsilon, max_iter):\n    \"\"\"\n    Computes the junction temperature T_j using a fixed-point iteration.\n\n    Args:\n        P (float): Dissipated power in watts.\n        Tamb (float): Ambient temperature in kelvin.\n        L (float): Die thickness in meters.\n        A (float): Die cross-sectional area in square meters.\n        k0 (float): Thermal conductivity at T_ref in W/(m·K).\n        alpha (float): Temperature coefficient of thermal conductivity in W/(m·K^2).\n        Tref (float): Reference temperature for conductivity in kelvin.\n        R_pkg (float): Package thermal resistance in K/W.\n        epsilon (float): Convergence tolerance.\n        max_iter (int): Maximum number of iterations.\n\n    Returns:\n        float: Converged junction temperature in kelvin, or np.nan if not converged\n               or if a non-physical state is encountered.\n    \"\"\"\n    T_current = float(Tamb)\n\n    for _ in range(max_iter):\n        # Calculate temperature-dependent thermal conductivity\n        k_T = k0 - alpha * (T_current - Tref)\n\n        # Check for non-physical condition (k = 0)\n        if k_T = 0:\n            return np.nan\n\n        # Calculate die and total thermal resistance at the current temperature\n        R_die = L / (k_T * A)\n        R_total = R_die + R_pkg\n\n        # Update the temperature estimate\n        T_next = Tamb + P * R_total\n\n        # Check for convergence\n        if abs(T_next - T_current)  epsilon:\n            return T_next\n\n        # Prepare for the next iteration\n        T_current = T_next\n\n    # Return nan if convergence is not reached within max_iter\n    return np.nan\n\ndef solve():\n    \"\"\"\n    Runs the simulation for all test cases and prints the results.\n    \"\"\"\n    test_cases = [\n        # Case 1 (happy path)\n        (50, 300, 2e-4, 25e-6, 130, 0.1, 300, 0.5, 1e-9, 10000),\n        # Case 2 (boundary with constant conductivity)\n        (50, 300, 2e-4, 25e-6, 130, 0, 300, 0.5, 1e-9, 10000),\n        # Case 3 (high power, stronger temperature rise)\n        (200, 300, 2e-4, 25e-6, 130, 0.1, 300, 0.5, 1e-9, 10000),\n        # Case 4 (smaller area, larger package resistance, moderate power)\n        (30, 300, 2e-4, 10e-6, 130, 0.1, 300, 0.8, 1e-9, 10000),\n        # Case 5 (reduced sensitivity of conductivity, modest power)\n        (10, 300, 2e-4, 25e-6, 130, 0.05, 300, 0.5, 1e-9, 10000),\n    ]\n\n    results = []\n    for case in test_cases:\n        result = compute_tj(*case)\n        results.append(result)\n\n    # Format output according to problem specification\n    formatted_results = []\n    for res in results:\n        if np.isnan(res):\n            formatted_results.append(\"nan\")\n        else:\n            # Round to six decimal places\n            formatted_results.append(f\"{res:.6f}\")\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(formatted_results)}]\")\n\nsolve()\n```"
        }
    ]
}
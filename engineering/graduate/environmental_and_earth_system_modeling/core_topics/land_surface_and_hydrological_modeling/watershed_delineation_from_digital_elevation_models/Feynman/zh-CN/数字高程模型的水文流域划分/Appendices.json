{
    "hands_on_practices": [
        {
            "introduction": "这项基础练习旨在巩固您对核心D8（八方向）算法的理解。通过在一个小型的数字高程模型（DEM）网格上手动计算流向，您将基于最陡下降坡度原理，直观地了解数字地形如何被转换为水文流动路径。本练习不仅揭示了流域建模的核心机制，还引出了在实际应用中常见的“平局”情况等问题。",
            "id": "3930970",
            "problem": "考虑一个大小为 $3 \\times 3$ 单元格的方形栅格数字高程模型 (DEM) 图斑，其单元格宽度统一为 $L$，高程（单位为米，高于某一基准面）由以下矩阵给出，其中中心单元格位于第2行第2列：\n$$\n\\begin{pmatrix}\n90  95  90 \\\\\n95  100  95 \\\\\n92  95  92\n\\end{pmatrix}.\n$$\n假设 $L = 30\\,\\mathrm{m}$，且平面邻域距离对于基本方向邻居为 $d_{\\text{cardinal}} = L$，对于对角线方向邻居为 $d_{\\text{diagonal}} = \\sqrt{2}\\,L$。使用八方向 (D8) 算法，其定义如下：对于一个高程为 $z_i$ 的单元格 $i$，通过在 DEM 图斑内所有邻近单元格 $j$ 中，根据 $z_i \\ge z_j$（下坡或平坦）的条件，最大化局部坡度来选择到邻居 $j$ 的候选下坡方向\n$$\ns_{i \\to j} = \\frac{z_i - z_j}{d_{ij}},\n$$\n。如果对于所有邻居 $j$ 都有 $s_{i \\to j} = 0$，或者对于所有邻居 $j$ 都有 $z_i  z_j$，则该单元格是一个洼地或平坦区，在没有洼地处理的情况下没有唯一的下坡方向。一个平局情况定义为在所有容许的邻居中，出现两个或更多个不同的邻居 $j$ 具有完全相等的最大 $s_{i \\to j}$ 值。\n\n应用上述定义，计算中心单元格及其8个邻居的 D8 流向，计算范围仅限于 $3 \\times 3$ 图斑内的邻居（忽略任何图斑外的单元格）。然后，在这些9个单元格中识别并计算需要明确解决的平局情况的数量。将图斑中平局情况的总数作为您的最终答案报告。以整数形式表达您的最终答案；无需四舍五入。",
            "solution": "问题需要经过验证。\n\n### 步骤 1：提取已知条件\n- 一个 $3 \\times 3$ 的方形栅格数字高程模型 (DEM)。\n- 单元格宽度 $L = 30\\,\\mathrm{m}$。\n- 高程矩阵 $Z$：\n$$\nZ = \\begin{pmatrix}\n90  95  90 \\\\\n95  100  95 \\\\\n92  95  92\n\\end{pmatrix}\n$$\n- 平面邻域距离：对于基本方向邻居为 $d_{\\text{cardinal}} = L$，对于对角线方向邻居为 $d_{\\text{diagonal}} = \\sqrt{2}\\,L$。\n- D8 算法规则：对于单元格 $i$，通过最大化坡度 $s_{i \\to j} = \\frac{z_i - z_j}{d_{ij}}$ 来选择到邻居 $j$ 的下坡方向，条件是水流为下坡或平坦，即 $z_i \\ge z_j$。\n- 洼地或平坦区的定义：一个单元格，其所有邻居 $j$ 均满足 $s_{i \\to j} = 0$ 或 $z_i  z_j$。\n- 平局情况的定义：在所有容许的邻居中，有两个或更多个不同的邻居 $j$ 具有相同的最大坡度 $s_{i \\to j}$。\n- 任务：计算所有9个单元格的流向，仅考虑 $3 \\times 3$ 图斑内的邻居，并计算平局情况的总数。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **具有科学依据**：该问题基于 D8 流向算法，这是水文学和地理信息科学 (GIS) 中用于根据 DEM 模拟地表水流的一种基础且广泛使用的方法。该设置是一个标准的教科书式练习。其原理在科学上是合理的。\n- **适定性**：该问题是自洽的。它提供了所有必要的数据（高程网格、单元格大小、距离定义）以及一个精确、明确的算法来确定流向和识别平局情况。边界条件（将邻居限制在图斑内）已明确说明。存在唯一的整数解。\n- **客观性**：该问题以精确、定量和客观的语言陈述，不含任何主观或推测性内容。\n\n### 步骤 3：结论与行动\n该问题是有效的，因为它具有科学依据、适定且客观。没有可识别的缺陷。将推导出解答。\n\n解答过程将系统地分析 DEM 图斑中的每一个单元格。我们用行和列索引 $(r, c)$ 表示一个单元格，其高程为 $z_{rc}$。单元格宽度为 $L = 30\\,\\mathrm{m}$。到邻居的坡度由 $s = \\frac{\\Delta z}{d}$ 给出，其中 $\\Delta z$ 是高程降，$d$ 是距离。对于基本方向邻居，$d=L$。对于对角线方向邻居，$d=\\sqrt{2}L$。我们的目标是为每个单元格最大化此坡度，只考虑高程满足 $z_j \\le z_i$ 的邻居。\n\n我们来逐一分析每个单元格：\n\n**单元格 (1,1): $z_{11} = 90$**\n图斑内的邻居是 $(1,2)$、$(2,1)$ 和 $(2,2)$，其高程分别为 $z_{12}=95$、$z_{21}=95$ 和 $z_{22}=100$。所有邻居的高程都更高 ($z_j > z_{11}$)。根据问题定义，该单元格是一个洼地。没有容许的下坡或平坦邻居，因此不可能出现平局情况。\n单元格 (1,1) 的平局情况数：$0$。\n\n**单元格 (1,2): $z_{12} = 95$**\n容许的邻居 $j$（其中 $z_j \\le 95$）有：\n- $(1,1)$: $z_{11}=90$。基本方向。$s_{12 \\to 11} = \\frac{95 - 90}{L} = \\frac{5}{L}$。\n- $(1,3)$: $z_{13}=90$。基本方向。$s_{12 \\to 13} = \\frac{95 - 90}{L} = \\frac{5}{L}$。\n- $(2,1)$: $z_{21}=95$。对角线方向。$s_{12 \\to 21} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n- $(2,3)$: $z_{23}=95$。对角线方向。$s_{12 \\to 23} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n最大坡度是 $\\frac{5}{L}$。这个坡度出现在两个不同的邻居：$(1,1)$ 和 $(1,3)$。这构成了一个平局情况。\n单元格 (1,2) 的平局情况数：$1$。\n\n**单元格 (1,3): $z_{13} = 90$**\n图斑内的邻居是 $(1,2)$、$(2,2)$ 和 $(2,3)$，其高程分别为 $z_{12}=95$、$z_{22}=100$ 和 $z_{23}=95$。所有邻居的高程都更高。这是一个洼地。\n单元格 (1,3) 的平局情况数：$0$。\n\n**单元格 (2,1): $z_{21} = 95$**\n容许的邻居 $j$（其中 $z_j \\le 95$）有：\n- $(1,1)$: $z_{11}=90$。基本方向。$s_{21 \\to 11} = \\frac{95 - 90}{L} = \\frac{5}{L}$。\n- $(3,1)$: $z_{31}=92$。基本方向。$s_{21 \\to 31} = \\frac{95 - 92}{L} = \\frac{3}{L}$。\n- $(1,2)$: $z_{12}=95$。对角线方向。$s_{21 \\to 12} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n- $(3,2)$: $z_{32}=95$。对角线方向。$s_{21 \\to 32} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n最大坡度是 $\\frac{5}{L}$，对应唯一的邻居 $(1,1)$。没有出现平局情况。\n单元格 (2,1) 的平局情况数：$0$。\n\n**单元格 (2,2): $z_{22} = 100$**\n所有8个邻居的高程都更低，因此都是容许的。\n- 基本方向邻居 ($d=L$): $(1,2)$、$(2,1)$、$(2,3)$、$(3,2)$。所有邻居的高程都为 $z=95$。坡度为 $s = \\frac{100 - 95}{L} = \\frac{5}{L}$。\n- 对角线方向邻居 ($d=\\sqrt{2}L$):\n  - $(1,1)$, $z_{11}=90$: $s = \\frac{100 - 90}{\\sqrt{2}L} = \\frac{10}{\\sqrt{2}L} = \\frac{5\\sqrt{2}}{L}$。\n  - $(1,3)$, $z_{13}=90$: $s = \\frac{100 - 90}{\\sqrt{2}L} = \\frac{10}{\\sqrt{2}L} = \\frac{5\\sqrt{2}}{L}$。\n  - $(3,1)$, $z_{31}=92$: $s = \\frac{100 - 92}{\\sqrt{2}L} = \\frac{8}{\\sqrt{2}L} = \\frac{4\\sqrt{2}}{L}$。\n  - $(3,3)$, $z_{33}=92$: $s = \\frac{100 - 92}{\\sqrt{2}L} = \\frac{8}{\\sqrt{2}L} = \\frac{4\\sqrt{2}}{L}$。\n为了比较坡度，我们比较 $\\frac{5}{L}$、$\\frac{5\\sqrt{2}}{L}$ 和 $\\frac{4\\sqrt{2}}{L}$ 的值。由于 $\\sqrt{2} \\approx 1.414$，我们有 $5\\sqrt{2} \\approx 7.07$ 和 $4\\sqrt{2} \\approx 5.66$。最大坡度是 $\\frac{5\\sqrt{2}}{L}$。这个坡度出现在两个不同的邻居：$(1,1)$ 和 $(1,3)$。这是一个平局情况。\n单元格 (2,2) 的平局情况数：$1$。\n\n**单元格 (2,3): $z_{23} = 95$**\n容许的邻居 $j$（其中 $z_j \\le 95$）有：\n- $(1,3)$: $z_{13}=90$。基本方向。$s_{23 \\to 13} = \\frac{95 - 90}{L} = \\frac{5}{L}$。\n- $(3,3)$: $z_{33}=92$。基本方向。$s_{23 \\to 33} = \\frac{95 - 92}{L} = \\frac{3}{L}$。\n- $(1,2)$: $z_{12}=95$。对角线方向。$s_{23 \\to 12} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n- $(3,2)$: $z_{32}=95$。对角线方向。$s_{23 \\to 32} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n最大坡度是 $\\frac{5}{L}$，对应唯一的邻居 $(1,3)$。没有出现平局情况。\n单元格 (2,3) 的平局情况数：$0$。\n\n**单元格 (3,1): $z_{31} = 92$**\n图斑内的邻居是 $(2,1)$、$(2,2)$ 和 $(3,2)$，其高程分别为 $z_{21}=95$、$z_{22}=100$ 和 $z_{32}=95$。所有邻居的高程都更高。这是一个洼地。\n单元格 (3,1) 的平局情况数：$0$。\n\n**单元格 (3,2): $z_{32} = 95$**\n容许的邻居 $j$（其中 $z_j \\le 95$）有：\n- $(3,1)$: $z_{31}=92$。基本方向。$s_{32 \\to 31} = \\frac{95 - 92}{L} = \\frac{3}{L}$。\n- $(3,3)$: $z_{33}=92$。基本方向。$s_{32 \\to 33} = \\frac{95 - 92}{L} = \\frac{3}{L}$。\n- $(2,1)$: $z_{21}=95$。对角线方向。$s_{32 \\to 21} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n- $(2,3)$: $z_{23}=95$。对角线方向。$s_{32 \\to 23} = \\frac{95 - 95}{\\sqrt{2}L} = 0$。\n最大坡度是 $\\frac{3}{L}$。这个坡度出现在两个不同的邻居：$(3,1)$ 和 $(3,3)$。这构成了一个平局情况。\n单元格 (3,2) 的平局情况数：$1$。\n\n**单元格 (3,3): $z_{33} = 92$**\n图斑内的邻居是 $(2,2)$、$(2,3)$ 和 $(3,2)$，其高程分别为 $z_{22}=100$、$z_{23}=95$ 和 $z_{32}=95$。所有邻居的高程都更高。这是一个洼地。\n单元格 (3,3) 的平局情况数：$0$。\n\n**总计**\n将所有9个单元格的平局情况数相加：\n总平局数 = $0 + 1 + 0 + 0 + 1 + 0 + 0 + 1 + 0 = 3$。\n该图斑中平局情况的总数为 $3$。",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "真实世界的DEM数据很少是完美无瑕的，常常包含“洼地”或“凹陷”——这些内部汇流区域会阻断水流路径。本练习从简单的流向计算更进一步，探讨了识别这些地貌特征并将其分类为伪影或真实地形（如湖泊）的关键任务。您将学习如何基于填充深度和辅助数据来应用量化准则，这是为精确水文分析准备DEM数据时至关重要的一步。",
            "id": "3931009",
            "problem": "考虑一个栅格数字高程模型 (DEM)，它表示在一个 $5 \\times 5$ 单元的规则格网上，正方形单元的尺寸为 $c = 30\\,\\mathrm{m}$。设格网位置 $(i,j)$ (第 $i$ 行，第 $j$ 列；$i,j \\in \\{1,2,3,4,5\\}$) 的 DEM 高程用 $z(i,j)$ 表示，单位为米，高于某一基准面。DEM 的高程值如下：\n$$\n\\begin{bmatrix}\n120  118  117  90  119 \\\\\n119  117  116  92  118 \\\\\n118  115  110  111  116 \\\\\n115  100  100  112  115 \\\\\n114  100  100  113  114 \\\\\n\\end{bmatrix}\n$$\n假设栅格上采用八方向 (D8) 流向模型，其中一个单元 $p$ 的八邻域 $N_8(p)$ 由其相邻和对角相邻的单元组成。单单元洼地是一个单元 $p$，满足对于其所有邻居 $q \\in N_8(p)$，都有 $z(q)  z(p)$。多单元洼地区是一个最大连通集 $S$ (在 $N_8$ 邻域下连通)，其外边界 $\\partial S$ 上的所有单元的高程都严格高于 $S$ 内部的最低高程，即 $\\min_{b \\in \\partial S} z(b)  \\min_{s \\in S} z(s)$。洼地区 $S$ 的溢出高程 $z_s(S)$ 定义为 $z_s(S) = \\min_{b \\in \\partial S} z(b)$，其填充深度 (洼地深度) 为 $d(S) = z_s(S) - \\min_{s \\in S} z(s)$。对于一个单单元洼地 $p$，定义 $z_s(\\{p\\}) = \\min_{q \\in N_8(p)} z(q)$ 且 $d(\\{p\\}) = z_s(\\{p\\}) - z(p)$。\n\n假设 DEM 的垂直不确定性 (一倍标准差) 为 $\\sigma_z = 1\\,\\mathrm{m}$。一个水文强制处理策略将洼地区 $S$ 分类为伪洼地，如果 $d(S)  3\\sigma_z$ 且 $S$ 不与外部水文特征重合；否则，它被分类为真实洼地 (将被保留)。一个辅助水文数据集提供了一个湖泊多边形，该多边形精确覆盖了四单元区域 $\\{(4,2),(4,3),(5,2),(5,3)\\}$。\n\n根据定义和给定策略，识别格网中所有的洼地 (包括任何多单元洼地区)，并将每一个分类为伪洼地或真实洼地。选择正确列出洼地集合及其分类的选项。\n\nA. 洼地为 $\\{(1,4)\\}$，分类为伪洼地；以及 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为真实洼地。\n\nB. 洼地为 $\\{(1,4)\\}$，分类为真实洼地 (因为 $z(1,4)$ 远低于其邻居)；以及 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为真实洼地。\n\nC. 洼地为 $\\{(1,4),(2,4)\\}$，分类为伪洼地；以及 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为伪洼地 (因为等高平坦区不能是真实洼地)。\n\nD. 唯一的洼地是 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为真实洼地；$\\{(1,4)\\}$ 不是洼地，因为它在 $z=92\\,\\mathrm{m}$ 处溢出。",
            "solution": "用户提供了一个关于在数字高程模型 (DEM) 中识别和分类洼地与洼地区的问题。\n\n### 问题验证\n对问题陈述的有效性进行评估。\n\n**步骤1：提取已知条件**\n- **DEM 格网**：一个 $5 \\times 5$ 的规则格网，单元尺寸为 $c = 30\\,\\mathrm{m}$。\n- **格网索引**：$(i,j)$ 表示第 $i$ 行，第 $j$ 列，其中 $i,j \\in \\{1,2,3,4,5\\}$。\n- **高程数据 $z(i,j)$**：\n$$\n\\begin{bmatrix}\n120  118  117  90  119 \\\\\n119  117  116  92  118 \\\\\n118  115  110  111  116 \\\\\n115  100  100  112  115 \\\\\n114  100  100  113  114 \\\\\n\\end{bmatrix}\\,\\mathrm{m}\n$$\n- **流向模型**：使用 $N_8$ 邻域的八方向 (D8) 模型。\n- **单单元洼地定义**：如果对于一个单元 $p$ 的所有邻居 $q \\in N_8(p)$ 都有 $z(q)  z(p)$，则该单元是一个洼地。\n- **多单元洼地区定义**：一个最大连通集 $S$，其外边界上的最低高程严格大于该集合内部的最低高程：$\\min_{b \\in \\partial S} z(b)  \\min_{s \\in S} z(s)$。\n- **溢出高程和填充深度定义**：对于洼地区 $S$：$z_s(S) = \\min_{b \\in \\partial S} z(b)$ 且 $d(S) = z_s(S) - \\min_{s \\in S} z(s)$。对于单单元洼地 $p$：$z_s(\\{p\\}) = \\min_{q \\in N_8(p)} z(q)$ 且 $d(\\{p\\}) = z_s(\\{p\\}) - z(p)$。\n- **垂直不确定性**：$\\sigma_z = 1\\,\\mathrm{m}$。\n- **分类策略**：如果一个洼地区 $S$ 的 $d(S)  3\\sigma_z$ 且它不与外部水文特征重合，则该洼地区为“伪洼地”。否则，为“真实洼地”。\n- **水文数据**：一个湖泊多边形精确覆盖了单元区域 $\\{(4,2),(4,3),(5,2),(5,3)\\}$。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题在科学上基于 DEM 分析的标准水文和 GIS 原理。所提供的关于洼地、洼地区、溢出高程和深度的定义与已有文献一致。包含 DEM 不确定性和辅助水文数据进行分类，代表了一种常见的实用工作流程。该问题提法恰当，提供了所有必要的数据和定义以得出一个唯一的、可验证的解。没有矛盾、歧义或事实错误。\n\n**步骤3：结论与行动**\n问题有效。将推导解答。\n\n### 解答推导\n\n解答过程首先识别 DEM 中所有的洼地和洼地区，然后计算它们的属性，最后根据给定策略对它们进行分类。\n\n**1. 识别洼地和洼地区**\n\n我们必须系统地扫描格网，寻找满足洼地或洼地区定义的单元或单元组。洼地是相对于其 $N_8$ 邻域的严格局部最小值单元。\n\n- **扫描单单元洼地：**\n  我们检查每个单元。如果一个单元 $p$ 的所有邻居 $q$ 的高程都满足 $z(q)  z(p)$，那么它就是一个洼地。\n  - 考虑单元 $p_1 = (1,4)$，其高程为 $z(1,4) = 90\\,\\mathrm{m}$。其邻居及其高程为：\n    $z(1,3) = 117\\,\\mathrm{m}$\n    $z(1,5) = 119\\,\\mathrm{m}$\n    $z(2,3) = 116\\,\\mathrm{m}$\n    $z(2,4) = 92\\,\\mathrm{m}$\n    $z(2,5) = 118\\,\\mathrm{m}$\n    由于所有邻居的高程都严格大于 $90\\,\\mathrm{m}$，单元 $(1,4)$ 是一个单单元洼地。我们把这个洼地区记为 $S_1 = \\{(1,4)\\}$。\n  - 没有其他单元是单单元洼地。对于任何其他单元，至少有一个邻居具有相等或更低的高程。\n\n- **扫描多单元洼地区：**\n  多单元洼地区通常涉及一个平坦区域。我们观察到在单元 $\\{(4,2), (4,3), (5,2), (5,3)\\}$ 处有一个高程为 $100\\,\\mathrm{m}$ 的平坦区域。我们来测试这个集合是否构成一个洼地区。设 $S_2 = \\{(4,2), (4,3), (5,2), (5,3)\\}$。\n  - 该集合内的最低高程为 $\\min_{s \\in S_2} z(s) = 100\\,\\mathrm{m}$。\n  - 外边界 $\\partial S_2$ 由所有不在 $S_2$ 中但与 $S_2$ 中任意单元相邻的单元组成。这些单元是：\n    $\\partial S_2 = \\{(3,1), (3,2), (3,3), (3,4), (4,1), (4,4), (5,1), (5,4)\\}$.\n  - 边界单元的高程是：\n    $z(3,1) = 118\\,\\mathrm{m}$，$z(3,2) = 115\\,\\mathrm{m}$，$z(3,3) = 110\\,\\mathrm{m}$，$z(3,4) = 111\\,\\mathrm{m}$，\n    $z(4,1) = 115\\,\\mathrm{m}$，$z(4,4) = 112\\,\\mathrm{m}$，\n    $z(5,1) = 114\\,\\mathrm{m}$，$z(5,4) = 113\\,\\mathrm{m}$。\n  - 边界上的最低高程是 $\\min_{b \\in \\partial S_2} z(b) = z(3,3) = 110\\,\\mathrm{m}$。\n  - 我们检查洼地区条件：$\\min_{b \\in \\partial S_2} z(b)  \\min_{s \\in S_2} z(s)$。这得到 $110\\,\\mathrm{m}  100\\,\\mathrm{m}$，这是成立的。\n  - 集合 $S_2$ 是连通的，并且没有其他相邻单元的高程为 $100\\,\\mathrm{m}$，所以它是一个最大连通集。因此，$S_2$ 是一个多单元洼地区。\n\nDEM 中有两个洼地区：$S_1 = \\{(1,4)\\}$ 和 $S_2 = \\{(4,2),(4,3),(5,2),(5,3)\\}$。\n\n**2. 洼地区的分类**\n\n策略规定，如果一个洼地区 $S$ 的填充深度 $d(S)  3\\sigma_z$ 并且它不与水文特征重合，则为“伪洼地”。已知 $\\sigma_z = 1\\,\\mathrm{m}$，阈值为 $3\\sigma_z = 3\\,\\mathrm{m}$。否则，该洼地区为“真实洼地”。\n\n- **$S_1 = \\{(1,4)\\}$ 的分类**：\n  - 溢出高程为 $z_s(S_1) = \\min_{q \\in N_8(1,4)} z(q) = z(2,4) = 92\\,\\mathrm{m}$。\n  - 填充深度为 $d(S_1) = z_s(S_1) - z(1,4) = 92\\,\\mathrm{m} - 90\\,\\mathrm{m} = 2\\,\\mathrm{m}$。\n  - 我们检查其是否为伪洼地的条件：\n    1. $d(S_1)$ 是否小于 $3\\,\\mathrm{m}$？是的，$2\\,\\mathrm{m}  3\\,\\mathrm{m}$。\n    2. $S_1$ 是否与水文特征重合？不是，湖泊位于 $\\{(4,2),(4,3),(5,2),(5,3)\\}$。\n  - 两个条件都满足。因此，$S_1$ 被分类为**伪洼地**。\n\n- **$S_2 = \\{(4,2),(4,3),(5,2),(5,3)\\}$ 的分类**：\n  - 溢出高程为 $z_s(S_2) = \\min_{b \\in \\partial S_2} z(b) = z(3,3) = 110\\,\\mathrm{m}$。\n  - 填充深度为 $d(S_2) = z_s(S_2) - \\min_{s \\in S_2} z(s) = 110\\,\\mathrm{m} - 100\\,\\mathrm{m} = 10\\,\\mathrm{m}$。\n  - 我们检查其是否为伪洼地的条件。如果任一条件不满足，则该洼地区为“真实洼地”。\n    1. $d(S_2)$ 是否小于 $3\\,\\mathrm{m}$？不是，$10\\,\\mathrm{m} \\ge 3\\,\\mathrm{m}$。\n  - 由于成为伪洼地的第一个条件不满足，该洼地区必须被分类为**真实洼地**。此外，问题陈述 $S_2$ 与一个湖泊多边形重合，这是它必须被分类为真实洼地的第二个原因。\n\n**推导结论：**\nDEM 包含两个洼地区：\n1.  位于 $\\{(1,4)\\}$ 的单单元洼地，被分类为**伪洼地**。\n2.  位于 $\\{(4,2),(4,3),(5,2),(5,3)\\}$ 的多单元洼地区，被分类为**真实洼地**。\n\n### 逐项分析\n\n- **A. 洼地为 $\\{(1,4)\\}$，分类为伪洼地；以及 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为真实洼地。**\n  该选项正确地识别了两个洼地区及其各自的分类，与上面的推导一致。\n  **结论：正确。**\n\n- **B. 洼地为 $\\{(1,4)\\}$，分类为真实洼地 (因为 $z(1,4)$ 远低于其邻居)；以及 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为真实洼地。**\n  该选项错误地将位于 $\\{(1,4)\\}$ 的洼地分类为真实洼地。分类必须遵循给定的策略，而不是主观评估。其 $2\\,\\mathrm{m}$ 的填充深度低于 $3\\,\\mathrm{m}$ 的阈值，且没有水文数据支持。\n  **结论：错误。**\n\n- **C. 洼地为 $\\{(1,4),(2,4)\\}$，分类为伪洼地；以及 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为伪洼地 (因为等高平坦区不能是真实洼地)。**\n  该选项犯了两个错误。首先，它错误地将单元 $(2,4)$ 包含在第一个洼地中；$(2,4)$ 是溢出点，而不是洼地本身的一部分。其次，它错误地将第二个洼地区分类为伪洼地，并给出了一个毫无根据的理由。所提供的定义明确允许存在多单元洼地区（可以是平坦区），我们的计算证实了这个洼地区的深度足以被认为是“真实洼地”。\n  **结论：错误。**\n\n- **D. 唯一的洼地是 $\\{(4,2),(4,3),(5,2),(5,3)\\}$，分类为真实洼地；$\\{(1,4)\\}$ 不是洼地，因为它在 $z=92\\,\\mathrm{m}$ 处溢出。**\n  该选项错误地声称 $\\{(1,4)\\}$ 不是洼地。它完全符合单单元洼地的定义。一个洼地的存在是由其局部地形（作为局部最小值）定义的，而其溢出点决定了其深度。该陈述将洼地的定义与其填充相关的属性混淆了。\n  **结论：错误。**",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "当洼地被识别出来后，必须对其进行“填充”以确保水流路径的连续性。这项高级练习旨在比较两种精密的填充算法：Priority-Flood和Planchon–Darboux，它们都能生成经过水文校正的DEM，但各自具有不同的地表特征。通过计算两种方法产生的填充体积，您将探索在创建平坦的“积水”表面与强制施加连续的最小坡度之间的权衡，从而深化对算法选择如何影响最终水文模型的理解。",
            "id": "3930977",
            "problem": "数字高程模型（DEM）是地表高程的网格化表示，此处将其视为在面积为 $A$ 的正方形单元上采样的离散化函数 $z(x,y)$。地形洼地是由较高地形包围的连通网格单元集合，如果水在其中汇集，其首次向外溢出的位置将发生在倾泻点，该点的高程定义了溢流高程。洼地填充旨在修改DEM以确保水文连通性（从每个内部单元到外部的单调不增路径），从而实现流域划分和径流演算。\n\n考虑一个恰好包含五个内部单元的单一洼地。该洼地的边界包含一个唯一倾泻点，其高程为 $z_{\\text{spill}} = 97.2\\ \\mathrm{m}$。所有其他边界单元的高程都大于 $100\\ \\mathrm{m}$，确保了除倾泻点外，该洼地在水文上是封闭的。每个内部单元 $i$ 具有以下特征：\n- 其原始高程 $z_i$。\n- 到倾泻点的拓扑路径长度 $\\ell_i$，以填平后洼地内沿流动路径的网格单元步数计量（在填平表面上所取的最短单调路径）。\n\n网格单元尺寸为 $5\\ \\mathrm{m} \\times 5\\ \\mathrm{m}$，因此每个单元的面积为 $A = 25\\ \\mathrm{m}^2$。五个内部单元的属性如下：\n- 单元 $1$：$\\ell_1 = 1$, $z_1 = 96.8\\ \\mathrm{m}$。\n- 单元 $2$：$\\ell_2 = 2$, $z_2 = 96.5\\ \\mathrm{m}$。\n- 单元 $3$：$\\ell_3 = 3$, $z_3 = 96.9\\ \\mathrm{m}$。\n- 单元 $4$：$\\ell_4 = 2$, $z_4 = 97.1\\ \\mathrm{m}$。\n- 单元 $5$：$\\ell_5 = 4$, $z_5 = 96.0\\ \\mathrm{m}$。\n\n两种洼地填充方法应用于此配置：\n\n- Priority-Flood填充法：内部单元仅在必要时被抬高，以便每个单元都能沿一条不增路径排向边界上的倾泻点。\n- Planchon–Darboux填充法：调整内部单元，以强制沿流向倾泻点的路径高程严格递减；即施加最小坡度约束，使得穿过先前平坦填充表面的每一步都比下游步高出一个固定增量 $\\varepsilon$。假设每个网格单元步的 $\\varepsilon = 0.01\\ \\mathrm{m}$。\n\n使用这些原理和上述数据，确定此洼地的Planchon–Darboux结果与Priority-Flood结果之间的总填充体积差异，以 $(V_{\\text{PD}} - V_{\\text{PF}})$ 表示，单位为 $\\mathrm{m}^3$。此外，请指出每种方法产生的溢流高程，并在您的推理中阐明任何差异。将您计算的 $(V_{\\text{PD}} - V_{\\text{PF}})$ 最终数值答案四舍五入到四位有效数字，并以 $\\mathrm{m}^3$ 为单位表示。",
            "solution": "该问题定义明确且具有科学依据。它要求使用两种标准水文学算法——Priority-Flood（PF）和Planchon–Darboux（PD）——计算并比较一个地形洼地的填充体积。\n\n给定参数如下：\n- 溢流高程：$z_{\\text{spill}} = 97.2\\ \\mathrm{m}$。\n- 每个网格单元的面积：$A = 25\\ \\mathrm{m}^2$。\n- Planchon–Darboux坡度增量：$\\varepsilon = 0.01\\ \\mathrm{m}$。\n- $5$个内部单元的属性：\n    - 单元 $1$：$z_1 = 96.8\\ \\mathrm{m}$, $\\ell_1 = 1$。\n    - 单元 $2$：$z_2 = 96.5\\ \\mathrm{m}$, $\\ell_2 = 2$。\n    - 单元 $3$：$z_3 = 96.9\\ \\mathrm{m}$, $\\ell_3 = 3$。\n    - 单元 $4$：$z_4 = 97.1\\ \\mathrm{m}$, $\\ell_4 = 2$。\n    - 单元 $5$：$z_5 = 96.0\\ \\mathrm{m}$, $\\ell_5 = 4$。\n\n首先，我们分析Priority-Flood（PF）填充法。该方法将洼地填充至其倾泻点的高程，从而形成一个水平表面。如果任何内部单元 $i$ 的原始高程 $z_i$ 较低，其新高程 $z'_{i, \\text{PF}}$ 将被提升至溢流高程。新高程的公式为 $z'_{i, \\text{PF}} = \\max(z_i, z_{\\text{spill}})$。\n添加到单个单元 $i$ 的填充体积为 $V_{i, \\text{PF}} = A \\cdot \\max(0, z_{\\text{spill}} - z_i)$。总填充体积 $V_{\\text{PF}}$ 是所有内部单元的总和：\n$$V_{\\text{PF}} = \\sum_{i=1}^{5} V_{i, \\text{PF}} = A \\sum_{i=1}^{5} \\max(0, z_{\\text{spill}} - z_i)$$\n问题指出，所有五个内部单元的原始高程都低于 $z_{\\text{spill}} = 97.2\\ \\mathrm{m}$，因此每个单元都将被填充。方程简化为：\n$$V_{\\text{PF}} = A \\sum_{i=1}^{5} (z_{\\text{spill}} - z_i)$$\n$$V_{\\text{PF}} = 25 \\cdot [(97.2 - 96.8) + (97.2 - 96.5) + (97.2 - 96.9) + (97.2 - 97.1) + (97.2 - 96.0)]$$\n$$V_{\\text{PF}} = 25 \\cdot (0.4 + 0.7 + 0.3 + 0.1 + 1.2) = 25 \\cdot (2.7) = 67.5\\ \\mathrm{m}^3$$\n\n接下来，我们分析Planchon–Darboux（PD）填充法。该方法创建一个表面，保证从任何单元到倾泻点都有一个最小的向下坡度。距离倾泻点路径长度为 $\\ell_i$ 的单元 $i$ 的目标高程 $z'_{i, \\text{PD}}$ 由 $z_{\\text{spill}} + \\ell_i \\varepsilon$ 给出。单元将被填充至此目标高程，除非其原始高程已经更高。因此，新高程为 $z'_{i, \\text{PD}} = \\max(z_i, z_{\\text{spill}} + \\ell_i \\varepsilon)$。\n添加到单元 $i$ 的填充体积为 $V_{i, \\text{PD}} = A \\cdot \\max(0, (z_{\\text{spill}} + \\ell_i \\varepsilon) - z_i)$。总填充体积 $V_{\\text{PD}}$ 为：\n$$V_{\\text{PD}} = \\sum_{i=1}^{5} V_{i, \\text{PD}} = A \\sum_{i=1}^{5} \\max(0, z_{\\text{spill}} + \\ell_i \\varepsilon - z_i)$$\n对于每个单元，目标高程 $z_{\\text{spill}} + \\ell_i \\varepsilon$ 大于 $z_{\\text{spill}}$，并且由于所有 $z_i$ 都小于 $z_{\\text{spill}}$，因此可以得出 $z_i  z_{\\text{spill}} + \\ell_i \\varepsilon$。所以，所有单元都将被填充到它们各自的目标高程。\n$$V_{\\text{PD}} = A \\sum_{i=1}^{5} (z_{\\text{spill}} + \\ell_i \\varepsilon - z_i)$$\n\n问题要求计算总填充体积的差异，$V_{\\text{PD}} - V_{\\text{PF}}$。\n$$V_{\\text{PD}} - V_{\\text{PF}} = \\left( A \\sum_{i=1}^{5} (z_{\\text{spill}} + \\ell_i \\varepsilon - z_i) \\right) - \\left( A \\sum_{i=1}^{5} (z_{\\text{spill}} - z_i) \\right)$$\n提取公因式后：\n$$V_{\\text{PD}} - V_{\\text{PF}} = A \\sum_{i=1}^{5} \\left[ (z_{\\text{spill}} + \\ell_i \\varepsilon - z_i) - (z_{\\text{spill}} - z_i) \\right]$$\n$$V_{\\text{PD}} - V_{\\text{PF}} = A \\sum_{i=1}^{5} (z_{\\text{spill}} + \\ell_i \\varepsilon - z_i - z_{\\text{spill}} + z_i)$$\n表达式可以优雅地简化为：\n$$V_{\\text{PD}} - V_{\\text{PF}} = A \\sum_{i=1}^{5} (\\ell_i \\varepsilon) = A \\cdot \\varepsilon \\sum_{i=1}^{5} \\ell_i$$\n我们现在计算路径长度的总和：\n$$\\sum_{i=1}^{5} \\ell_i = 1 + 2 + 3 + 2 + 4 = 12$$\n代入 $A$、$\\varepsilon$ 和 $\\ell_i$ 总和的给定值：\n$$V_{\\text{PD}} - V_{\\text{PF}} = (25\\ \\mathrm{m}^2) \\cdot (0.01\\ \\mathrm{m}) \\cdot (12)$$\n$$V_{\\text{PD}} - V_{\\text{PF}} = 0.25 \\cdot 12 = 3.0\\ \\mathrm{m}^3$$\n问题要求答案四舍五入到四位有效数字。这得到 $3.000\\ \\mathrm{m}^3$。\n\n关于溢流高程，它由倾泻点的高程定义，倾泻点是洼地边界上的最低点。两种算法都修改洼地*内部*单元的高程，以确保到此出口的水文连通性。两种算法都不会改变边界单元的高程，包括倾泻点本身。\n- 在Priority-Flood方法中，填充后的内部表面是平坦的，高程为 $z_{\\text{spill}} = 97.2\\ \\mathrm{m}$。\n- 在Planchon–Darboux方法中，填充后的内部表面是倾斜的，高程由 $z'_{i, \\text{PD}} = z_{\\text{spill}} + \\ell_i \\varepsilon$ 给出，这些高程都大于 $z_{\\text{spill}}$。\n尽管内部地形不同，但在两种情况下，任何离开已填充洼地的水的出口都是同一个倾泻点。因此，每种方法为整个水文系统产生的溢流高程是相同的，并保持在原始倾泻点高程 $z_{\\text{spill}} = 97.2\\ \\mathrm{m}$。溢流高程没有差异。\n\n所要求的计算是体积差，即 $3.000\\ \\mathrm{m}^3$。\n作为验算，我们可以直接计算 $V_{\\text{PD}}$：\n$$V_{\\text{PD}} = 25 \\cdot [ (97.21 - 96.8) + (97.22 - 96.5) + (97.23 - 96.9) + (97.22 - 97.1) + (97.24 - 96.0) ]$$\n$$V_{\\text{PD}} = 25 \\cdot [ 0.41 + 0.72 + 0.33 + 0.12 + 1.24 ] = 25 \\cdot (2.82) = 70.5\\ \\mathrm{m}^3$$\n差异为 $V_{\\text{PD}} - V_{\\text{PF}} = 70.5 - 67.5 = 3.0\\ \\mathrm{m}^3$，这证实了简化公式得出的结果。",
            "answer": "$$\n\\boxed{3.000}\n$$"
        }
    ]
}
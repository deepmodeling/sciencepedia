{
    "hands_on_practices": [
        {
            "introduction": "理解负反馈系统如何抑制外部干扰是模拟设计的基石。第一个练习将引导您推导一个典型反馈放大器的电源到输出传递函数 。通过应用叠加原理和基本的反馈理论，您将揭示环路传输 $L(s)$ 与系统抑制噪声能力之间的内在联系，为电源抑制比（PSRR）分析奠定坚实的理论基础。",
            "id": "4290935",
            "problem": "考虑一个线性负反馈模拟放大器，其小信号模型为一个双端口网络，包含一个求和节点和一个前向受控源。前向通路是一个电压控制电压源，其开环传递函数为 $A(s)$，反馈通路是一个理想的无源分压器，其反馈系数为 $\\beta$。参考输入被置零，因此只有电源纹波作为干扰出现。电源纹波被建模为一个通过无量纲馈通系数 $\\alpha$ 附加耦合到放大器输出节点的小信号源 $v_{s}$，因此小信号输出电压是前向通路受控源贡献与耦合电源纹波之和。假设负载足够大，不会对 $A(s)$ 产生扰动。\n\n给定以下参数化设置：\n- 前向通路开环传递函数为一个主极点模型 $A(s) = \\dfrac{A_{0}}{1 + s/\\omega_{p}}$，其中 $A_{0} = 10^{5}$ 且 $\\omega_{p} = 2\\pi \\times 10^{2}$。\n- 反馈网络是一个电阻分压器，其中 $R_{1} = 9~\\mathrm{k}\\Omega$ 从输出连接到求和节点，$R_{2} = 1~\\mathrm{k}\\Omega$ 从求和节点连接到地，因此 $\\beta = \\dfrac{R_{2}}{R_{1} + R_{2}}$。\n- 电源纹波的输出耦合为 $v_{\\text{out}}(s) = A(s)\\,v_{e}(s) + \\alpha\\,v_{s}(s)$，其中 $\\alpha = 10^{-2}$，$v_{e}(s)$ 是求和节点处的误差信号。\n\n仅从求和节点和源叠加的双端口反馈基本定义出发，并且不假设任何已知的灵敏度函数恒等式，推导电源干扰到输出的传递函数 $H_{V_{s}\\to V_{\\text{out}}}(s) \\triangleq \\dfrac{v_{\\text{out}}(s)}{v_{s}(s)}$ 的闭式解析表达式。\n\n然后，使用 Middlebrook 注入法（在保持环路闭合的情况下串联注入测试源）来计算环路传输，确定该双端口网络的环路传输 $L(s)$，并验证您推导出的 $H_{V_{s}\\to V_{\\text{out}}}(s)$ 与环路传输所隐含的关系一致。将您的最终答案表示为关于 $s$ 的 $H_{V_{s}\\to V_{\\text{out}}}(s)$ 的单个简化解析表达式。无需四舍五入，最终表达式中不应包含物理单位。\n\n作为背景知识，电源抑制比 (PSRR) 定义为 $H_{V_{s}\\to V_{\\text{out}}}(j\\omega)$ 幅值的倒数，而 Middlebrook 注入法是电子设计自动化 (EDA) 中用于测量反馈系统环路传输而又不干扰其工作点的标准技术。",
            "solution": "首先根据指定标准对问题进行验证。\n\n### 步骤 1：提取已知条件\n- **模型**：一个线性负反馈模拟放大器。\n- **拓扑**：具有单个求和节点和单个前向受控源的双端口网络。\n- **前向通路**：电压控制电压源，传递函数为 $A(s) = \\dfrac{A_{0}}{1 + s/\\omega_{p}}$。\n- **反馈通路**：理想无源分压器，反馈系数为 $\\beta = \\dfrac{R_{2}}{R_{1} + R_{2}}$。\n- **输入**：参考输入被置零，$v_{ref}(s) = 0$。\n- **干扰模型**：一个小信号电源纹波源 $v_{s}(s)$ 耦合到输出。\n- **输出方程**：小信号输出电压由叠加原理给出，$v_{\\text{out}}(s) = A(s)\\,v_{e}(s) + \\alpha\\,v_{s}(s)$，其中 $v_{e}(s)$ 是求和节点处的误差信号。\n- **负载假设**：负载足够大，不会影响 $A(s)$。\n- **参数**：\n  - $A_{0} = 10^{5}$\n  - $\\omega_{p} = 2\\pi \\times 10^{2}$\n  - $R_{1} = 9~\\mathrm{k}\\Omega$\n  - $R_{2} = 1~\\mathrm{k}\\Omega$\n  - $\\alpha = 10^{-2}$\n- **任务 1**：从基本定义出发，推导电源干扰到输出的传递函数 $H_{V_{s}\\to V_{\\text{out}}}(s) \\triangleq \\dfrac{v_{\\text{out}}(s)}{v_{s}(s)}$ 的闭式解析表达式。\n- **任务 2**：使用 Middlebrook 注入法概念确定环路传输 $L(s)$。\n- **任务 3**：验证所推导的 $H_{V_{s}\\to V_{\\text{out}}}(s)$ 与涉及 $L(s)$ 的标准反馈理论关系一致。\n\n### 步骤 2：使用提取的已知条件进行验证\n评估问题的有效性。\n- **科学依据**：该问题描述了一个受电源噪声影响的负反馈放大器的标准教科书模型。环路增益、传递函数和灵敏度的概念是模拟电路设计和控制理论的基础。所有模型和参数都具有科学合理性。\n- **适定性**：问题定义清晰，提供了所有必要的参数。它要求推导一个特定的传递函数，这会导出一个唯一的解。\n- **客观性**：问题使用精确、客观的技术语言陈述，没有歧义或主观论断。\n\n该问题没有表现出任何列出的缺陷（例如，科学上不合理、不完整、矛盾或不可行）。元件值对于一个标准的运算放大器电路是现实的。\n\n### 步骤 3：结论与行动\n该问题是**有效的**。将提供完整的解答。\n\n### 解题推导\n主要目标是推导传递函数 $H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{v_{\\text{out}}(s)}{v_{s}(s)}$。将按要求分三部分进行：直接推导、确定环路传输和验证。\n\n**第 1 部分：直接推导传递函数**\n\n我们从问题陈述中提供的描述系统的基本方程开始。\n输出电压 $v_{\\text{out}}(s)$ 由放大的误差信号和耦合的电源噪声叠加而成：\n$$v_{\\text{out}}(s) = A(s)\\,v_{e}(s) + \\alpha\\,v_{s}(s)$$\n误差信号 $v_{e}(s)$ 是求和节点的输出。在负反馈配置中，误差信号是参考输入 $v_{ref}(s)$ 和反馈信号 $v_{f}(s)$ 之间的差值：\n$$v_{e}(s) = v_{ref}(s) - v_{f}(s)$$\n问题陈述参考输入被置零，因此 $v_{ref}(s) = 0$。\n$$v_{e}(s) = - v_{f}(s)$$\n反馈信号 $v_{f}(s)$ 由反馈网络产生，该网络对输出电压 $v_{\\text{out}}(s)$ 进行采样。反馈网络的传递函数是反馈系数 $\\beta$。\n$$v_{f}(s) = \\beta\\,v_{\\text{out}}(s)$$\n将此代入误差信号的方程中得到：\n$$v_{e}(s) = -\\beta\\,v_{\\text{out}}(s)$$\n现在，我们将 $v_{e}(s)$ 的这个表达式代回原始的输出电压方程中：\n$$v_{\\text{out}}(s) = A(s)\\,(-\\beta\\,v_{\\text{out}}(s)) + \\alpha\\,v_{s}(s)$$\n我们的目标是求出比值 $\\dfrac{v_{\\text{out}}(s)}{v_{s}(s)}$。为此，我们重新整理方程，将 $v_{\\text{out}}(s)$ 项归类到一起：\n$$v_{\\text{out}}(s) + A(s)\\beta\\,v_{\\text{out}}(s) = \\alpha\\,v_{s}(s)$$\n在左侧提取公因式 $v_{\\text{out}}(s)$：\n$$v_{\\text{out}}(s)(1 + A(s)\\beta) = \\alpha\\,v_{s}(s)$$\n最后，两边同时除以 $v_{s}(s)$ 和 $(1 + A(s)\\beta)$，得到所需的传递函数：\n$$H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{v_{\\text{out}}(s)}{v_{s}(s)} = \\dfrac{\\alpha}{1 + A(s)\\beta}$$\n\n**第 2 部分：环路传输与验证**\n\n问题要求使用 Middlebrook 注入法来确定环路传输 $L(s)$。对于此框图表示的单环路反馈系统，环路传输（或环路增益）是环路周围的总传递函数。它的计算方法是在环路中任意一点断开，注入一个测试信号，并测量返回到断点另一侧的信号。环路传输是该比值的负数（负号考虑了求和节点的反相）。\n\n在我们的框图中，环路周围的信号路径是从求和节点输出 $v_{e}(s)$，通过前向放大器 $A(s)$，然后通过反馈网络 $\\beta$ 返回到求和节点的反相输入端。环路中传递函数的乘积是 $A(s)\\beta$。因此，环路传输是：\n$$L(s) = A(s)\\beta$$\nMiddlebrook 注入法是在实际电路中测量此量而又不干扰其直流工作点的实用技术，对于这个理想化模型，它得到相同的结果，$L(s) = A(s)\\beta$。\n\n现在，我们用环路传输的这个定义来验证第 1 部分推导出的传递函数的一致性。将 $L(s) = A(s)\\beta$ 代入我们得到的 $H_{V_{s}\\to V_{\\text{out}}}(s)$ 表达式中：\n$$H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{\\alpha}{1 + L(s)}$$\n这是反馈控制理论中的一个标准结果。它指出，从被控对象输出端注入的干扰到系统输出的闭环传递函数，等于从干扰到输出的开环传递函数（此处为 $\\alpha$）除以量 $(1 + L(s))$，后者通常称为灵敏度函数。因此，一致性得到验证。\n\n**第 3 部分：最终解析表达式**\n\n现在我们代入给定的参数化设置和数值，以获得 $H_{V_{s}\\to V_{\\text{out}}}(s)$ 的最终简化表达式。\n\n首先，根据给定的电阻值 $R_{1} = 9 \\times 10^{3}~\\Omega$ 和 $R_{2} = 1 \\times 10^{3}~\\Omega$ 计算反馈系数 $\\beta$：\n$$\\beta = \\dfrac{R_{2}}{R_{1} + R_{2}} = \\dfrac{1 \\times 10^{3}}{9 \\times 10^{3} + 1 \\times 10^{3}} = \\dfrac{1 \\times 10^{3}}{10 \\times 10^{3}} = \\dfrac{1}{10} = 0.1$$\n接下来，将 $A(s)$ 的表达式代入 $H_{V_{s}\\to V_{\\text{out}}}(s)$ 的公式中：\n$$H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{\\alpha}{1 + \\left(\\dfrac{A_{0}}{1 + s/\\omega_{p}}\\right)\\beta}$$\n为了简化，分子和分母同乘以 $(1 + s/\\omega_{p})$：\n$$H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{\\alpha(1 + s/\\omega_{p})}{(1 + s/\\omega_{p}) + A_{0}\\beta} = \\dfrac{\\alpha(1 + s/\\omega_{p})}{1 + A_{0}\\beta + s/\\omega_{p}}$$\n为了得到更清晰的多项式形式，分子和分母同乘以 $\\omega_{p}$：\n$$H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{\\alpha(\\omega_{p} + s)}{(1 + A_{0}\\beta)\\omega_{p} + s}$$\n现在，我们代入数值：\n- $\\alpha = 10^{-2}$\n- $A_{0} = 10^{5}$\n- $\\omega_{p} = 2\\pi \\times 10^{2} = 200\\pi$\n- $\\beta = 0.1$\n\n计算各项：\n- 直流环路增益为 $A_{0}\\beta = 10^{5} \\times 0.1 = 10^{4}$。\n- 项 $1 + A_{0}\\beta = 1 + 10^{4} = 10001$。\n- 分子：$\\alpha(\\omega_{p} + s) = 10^{-2}(200\\pi + s) = 2\\pi + 10^{-2}s$。\n- 分母：$(1 + A_{0}\\beta)\\omega_{p} + s = (10001)(200\\pi) + s = 2000200\\pi + s$。\n\n将这些组合起来，得到最终的简化解析表达式：\n$$H_{V_{s}\\to V_{\\text{out}}}(s) = \\dfrac{2\\pi + 10^{-2}s}{2000200\\pi + s}$$\n这是一个关于 $s$ 的有理函数，表示噪声的一阶低通滤波器特性，并带有一个额外的零点。在低频时 ($s \\to 0$)，传递函数趋近于 $\\dfrac{2\\pi}{2000200\\pi} = \\dfrac{1}{1000100}$，显示出高抑制能力。在高频时 ($s \\to \\infty$)，传递函数趋近于 $\\dfrac{10^{-2}s}{s} = 10^{-2} = \\alpha$，因为反馈环路的增益减小，无法再抑制干扰。",
            "answer": "$$\\boxed{\\frac{2\\pi + 10^{-2}s}{2000200\\pi + s}}$$"
        },
        {
            "introduction": "在理论框架的基础上，本练习将抽象原理转化为一个具体的仿真场景 。您将为一个电路的输出级构建一个小信号模型，并使用基尔霍夫定律从第一性原理推导其电源抑制传递函数。这种动手计算的实践对于培养关于不同电路参数和频率如何影响实际电路PSRR性能的直觉至关重要。",
            "id": "4290942",
            "problem": "您的任务是在集成电路设计和电子设计自动化 (EDA) 的框架下，形式化并仿真一个交流 (AC) 测试平台，用以测量从正电源节点到模拟电路输出节点的电源抑制传递函数，记为 $H_{V_{DD}\\to V_{out}}(j\\omega)$。该测试平台必须通过将一个零直流偏移的交流源叠加在一个固定的直流电源上，来维持正确的直流 (DC) 偏置。待仿真的小信号模型应使用 Kirchhoff 定律和线性正弦稳态分析，从第一性原理完全推导得出。\n\n使用以下物理上合理且自洽的输出节点小信号模型：\n\n- 输出节点 $V_{out}$ 通过一个有效负载电阻 $R_L$、一个内部输出电阻 $r_o$ 和一个负载电容 $C_L$ 并联接地。这定义了到地的输出导纳 $Y_o(j\\omega)$。\n- 有限的电源抑制由电源节点 $V_{DD}$ 和输出节点 $V_{out}$ 之间的一条馈通路径表示，该路径由一个电阻元件 $R_{ps}$ 与一个电容元件 $C_{ps}$ 并联组成。这定义了 $V_{DD}$ 和 $V_{out}$ 之间的耦合导纳 $Y_{ps}(j\\omega)$。\n- 一个理想小信号交流源在 $V_{DD}$ 处注入，其直流值为零，并叠加在一个固定的直流偏置 $V_{DD0}$ 上，该偏置不进入小信号方程（叠加原理）。\n\n仅从适用于模拟电路的基本定义和定律出发：\n- 节点的 Kirchhoff 电流定律 (KCL)，\n- 线性时不变系统的正弦稳态，其中 $s=j\\omega$，\n- 电阻的复阻抗 $Z_R=R$ 和电容的复阻抗 $Z_C=1/(j\\omega C)$，以及导纳 $Y=1/Z$，\n\n推导 $H_{V_{DD}\\to V_{out}}(j\\omega)$ 的表达式，并实现一个程序，为每个测试用例计算其幅值 $\\lvert H_{V_{DD}\\to V_{out}}(j\\omega)\\rvert$。您必须将任何等于 $+\\infty$ 的参数视为对应的导纳等于 $0$。\n\n使用以下定义：\n- 到地输出导纳：$Y_o(j\\omega)=\\dfrac{1}{R_L}+\\dfrac{1}{r_o}+j\\omega C_L$。\n- $V_{DD}$ 和 $V_{out}$ 之间的耦合导纳：$Y_{ps}(j\\omega)=\\dfrac{1}{R_{ps}}+j\\omega C_{ps}$。\n\n您的程序必须在下面给出的指定频率和参数集下，评估幅值 $\\lvert H_{V_{DD}\\to V_{out}}(j\\omega)\\rvert$。所有电阻必须以欧姆为单位，所有电容必须以法拉为单位，所有频率必须以赫兹为单位，$V_{DD0}$ 以伏特为单位。传递函数幅值是无量纲的，单位为伏特/伏特 ($\\mathrm{V}/\\mathrm{V}$)。相角不是所要求输出的一部分，因此不需要角度单位。\n\n测试套件（每个用例为 $(R_L,r_o,C_L,R_{ps},C_{ps},f)$）：\n- 用例 $1$（一般中频带行为）：(10000, 20000, $10\\times 10^{-12}$, 200000, $0.2\\times 10^{-12}$, 10000)。\n- 用例 $2$（近直流边界）：(10000, 20000, $10\\times 10^{-12}$, 200000, $0.2\\times 10^{-12}$, 0.1)。\n- 用例 $3$（高频馈通）：(10000, 20000, $10\\times 10^{-12}$, 200000, $0.2\\times 10^{-12}$, 100000000)。\n- 用例 $4$（无电阻馈通）：(10000, 20000, $10\\times 10^{-12}$, $+\\infty$, $0.2\\times 10^{-12}$, 0.1)。\n- 用例 $5$（无电容馈通）：(10000, 20000, $10\\times 10^{-12}$, 200000, 0, 1000000)。\n- 用例 $6$（近开路输出，纯电阻馈通）：($+\\infty$, $+\\infty$, 0, 1000, 0, 1000)。\n\n假设固定直流电源 $V_{DD0}=1.8$ 伏特，交流源的直流扰动为零。\n\n您的程序应生成单行输出，其中包含用方括号括起来的逗号分隔列表形式的结果（例如 $[result_1,result_2,\\dots]$），其中每个 $result_k$ 是对应测试用例的幅值 $\\lvert H_{V_{DD}\\to V_{out}}(j\\omega_k)\\rvert$，以 $\\mathrm{V}/\\mathrm{V}$ 为单位的小数表示，不带单位符号。",
            "solution": "问题陈述是有效的。它在科学上基于线性电路分析的原理，问题提法明确，具有一套完整且一致的参数，并且其表述是客观的。任务是为一个给定的小信号模型推导电源抑制传递函数，并为几个测试用例计算其幅值。\n\n传递函数 $H_{V_{DD}\\to V_{out}}(j\\omega) = v_{out}(j\\omega)/v_{dd}(j\\omega)$ 的推导从第一性原理出发，具体来说是将 Kirchhoff 电流定律 (KCL) 应用于电路在频域中的小信号模型。\n\n小信号模型包含三个节点：电源节点 $V_{DD}$（施加小信号输入 $v_{dd}$ 的地方）、输出节点 $V_{out}$（测量小信号输出 $v_{out}$ 的地方）以及电位为 $0$ V 的接地参考节点。\n\n在正弦稳态下，元件由其导纳建模，其中复频率为 $s = j\\omega$。角频率 $\\omega$ 与以赫兹为单位的频率 $f$ 的关系为 $\\omega = 2\\pi f$。\n\n该模型指定了两个复合导纳：\n1.  耦合导纳 $Y_{ps}(j\\omega)$ 连接在电源节点 $V_{DD}$ 和输出节点 $V_{out}$ 之间。它由一个电阻 $R_{ps}$ 与一个电容 $C_{ps}$ 并联组成。并联组合的导纳是各导纳之和。\n    $$Y_{ps}(j\\omega) = \\frac{1}{R_{ps}} + \\frac{1}{Z_{C_{ps}}} = \\frac{1}{R_{ps}} + j\\omega C_{ps}$$\n    问题陈述明确提供了这个定义。当电阻为无穷大时（例如 $R_{ps} = +\\infty$），对应的电导项为零，即 $\\frac{1}{R_{ps}} = 0$。\n\n2.  到地输出导纳 $Y_o(j\\omega)$ 连接在输出节点 $V_{out}$ 和地之间。它由一个负载电阻 $R_L$、一个内部输出电阻 $r_o$ 和一个负载电容 $C_L$ 并联组成。\n    $$Y_o(j\\omega) = \\frac{1}{R_L} + \\frac{1}{r_o} + \\frac{1}{Z_{C_L}} = \\frac{1}{R_L} + \\frac{1}{r_o} + j\\omega C_L$$\n    这个定义也在问题陈述中明确给出。\n\n为求得传递函数，我们在输出节点 $V_{out}$ 应用 KCL。所有离开该节点的电流之和必须为零。设电源节点和输出节点的小信号相量电压分别为 $v_{dd}$ 和 $v_{out}$。\n\n根据导纳形式的欧姆定律，从输出节点 $V_{out}$ 流向电源节点 $V_{DD}$、通过导纳 $Y_{ps}(j\\omega)$ 的电流为：\n$$I_{out \\to dd} = (v_{out} - v_{dd}) Y_{ps}(j\\omega)$$\n\n从输出节点 $V_{out}$ 流向地、通过导纳 $Y_o(j\\omega)$ 的电流为：\n$$I_{out \\to gnd} = (v_{out} - 0) Y_o(j\\omega) = v_{out} Y_o(j\\omega)$$\n\n假设输出节点没有其他连接，则节点 $V_{out}$ 处的 KCL 方程为：\n$$I_{out \\to dd} + I_{out \\to gnd} = 0$$\n$$(v_{out} - v_{dd}) Y_{ps}(j\\omega) + v_{out} Y_o(j\\omega) = 0$$\n\n为推导传递函数 $H_{V_{DD}\\to V_{out}}(j\\omega) = v_{out}/v_{dd}$，我们重排方程以求解此比率：\n$$v_{out} Y_{ps}(j\\omega) - v_{dd} Y_{ps}(j\\omega) + v_{out} Y_o(j\\omega) = 0$$\n$$v_{out} (Y_{ps}(j\\omega) + Y_o(j\\omega)) = v_{dd} Y_{ps}(j\\omega)$$\n$$\\frac{v_{out}}{v_{dd}} = \\frac{Y_{ps}(j\\omega)}{Y_{ps}(j\\omega) + Y_o(j\\omega)}$$\n\n这就得到了复传递函数 $H_{V_{DD}\\to V_{out}}(j\\omega)$ 的表达式。其结构是一个导纳分压器。\n\n现在，我们代入 $Y_{ps}(j\\omega)$ 和 $Y_o(j\\omega)$ 的表达式：\n$$H_{V_{DD}\\to V_{out}}(j\\omega) = \\frac{\\frac{1}{R_{ps}} + j\\omega C_{ps}}{(\\frac{1}{R_{ps}} + j\\omega C_{ps}) + (\\frac{1}{R_L} + \\frac{1}{r_o} + j\\omega C_L)}$$\n合并分母中的实部和虚部：\n$$H_{V_{DD}\\to V_{out}}(j\\omega) = \\frac{\\frac{1}{R_{ps}} + j\\omega C_{ps}}{\\left(\\frac{1}{R_{ps}} + \\frac{1}{R_L} + \\frac{1}{r_o}\\right) + j\\omega (C_{ps} + C_L)}$$\n\n为简化表示，我们定义以下聚合参数：\n-   电源馈通电导：$G_{ps} = \\frac{1}{R_{ps}}$\n-   总输出电导：$G_{out} = \\frac{1}{R_L} + \\frac{1}{r_o}$\n-   输出节点总电导：$G_{total} = G_{ps} + G_{out} = \\frac{1}{R_{ps}} + \\frac{1}{R_L} + \\frac{1}{r_o}$\n-   输出节点总电容：$C_{total} = C_{ps} + C_L$\n\n传递函数于是可以写成更紧凑的形式：\n$$H(j\\omega) = \\frac{G_{ps} + j\\omega C_{ps}}{G_{total} + j\\omega C_{total}}$$\n\n问题要求计算此传递函数的幅值 $\\lvert H(j\\omega) \\rvert$。复数 $z = x + iy$ 的幅值为 $\\lvert z \\rvert = \\sqrt{x^2 + y^2}$。将其应用于两个复数之比，$\\lvert z_1/z_2 \\rvert = \\lvert z_1 \\rvert / \\lvert z_2 \\rvert$：\n$$\\lvert H(j\\omega) \\rvert = \\frac{\\lvert G_{ps} + j\\omega C_{ps} \\rvert}{\\lvert G_{total} + j\\omega C_{total} \\rvert}$$\n$$\\lvert H(j\\omega) \\rvert = \\frac{\\sqrt{G_{ps}^2 + (\\omega C_{ps})^2}}{\\sqrt{G_{total}^2 + (\\omega C_{total})^2}}$$\n\n这就是用于计算的最终表达式。对于每个测试用例，参数 $(R_L, r_o, C_L, R_{ps}, C_{ps}, f)$ 用于计算 $G_{ps}$、$G_{total}$、$C_{total}$ 和 $\\omega = 2\\pi f$，然后将它们代入此公式以求得传递函数的幅值。直流电源电压 $V_{DD0} = 1.8$ V 与此小信号交流分析无关，这一点已由推导证实。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves for the magnitude of the power supply rejection transfer function\n    for a given set of circuit parameters and frequencies.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a tuple: (R_L, r_o, C_L, R_ps, C_ps, f)\n    # R in Ohms, C in Farads, f in Hertz.\n    test_cases = [\n        # Case 1 (general midband behavior)\n        (10000, 20000, 10e-12, 200000, 0.2e-12, 10000),\n        # Case 2 (near-DC boundary)\n        (10000, 20000, 10e-12, 200000, 0.2e-12, 0.1),\n        # Case 3 (high-frequency feedthrough)\n        (10000, 20000, 10e-12, 200000, 0.2e-12, 100000000),\n        # Case 4 (no resistive feedthrough)\n        (10000, 20000, 10e-12, np.inf, 0.2e-12, 0.1),\n        # Case 5 (no capacitive feedthrough)\n        (10000, 20000, 10e-12, 200000, 0, 1000000),\n        # Case 6 (nearly open output, purely resistive feedthrough)\n        (np.inf, np.inf, 0, 1000, 0, 1000),\n    ]\n\n    results = []\n    for case in test_cases:\n        R_L, r_o, C_L, R_ps, C_ps, f = case\n\n        # Calculate angular frequency omega from frequency f\n        omega = 2 * np.pi * f\n\n        # Calculate admittances (conductances and susceptances)\n        # Handle infinite resistance cases, which result in zero conductance.\n        # Python's float division `1 / np.inf` correctly yields `0.0`.\n        G_ps = 1 / R_ps\n        G_out = (1 / R_L) + (1 / r_o)\n        \n        # Total conductance and capacitance at the output node\n        G_total = G_ps + G_out\n        C_total = C_ps + C_L\n\n        # The transfer function is H(jw) = (G_ps + jw*C_ps) / (G_total + jw*C_total).\n        # We can use numpy's complex number handling to simplify the calculation\n        # of the magnitude.\n        \n        # Numerator of the transfer function\n        numerator_complex = G_ps + 1j * omega * C_ps\n        \n        # Denominator of the transfer function\n        denominator_complex = G_total + 1j * omega * C_total\n\n        # The magnitude of the transfer function |H(jw)|\n        # Check for denominator becoming zero to avoid division by zero.\n        # This shouldn't happen with passive networks unless all components\n        # have zero admittance.\n        if np.abs(denominator_complex) == 0.0:\n            # For the special case where the denominator is zero,\n            # this implies the output is not connected to anything.\n            # If the numerator is also zero, H is undefined (e.g., 0/0).\n            # If numerator is non-zero, H is infinite.\n            # In this problem's context with passive components, a zero\n            # denominator only happens if G_total=0 and C_total=0 (or omega=0).\n            # Case 6: Y_o = 0. H = Y_ps / (Y_ps + 0) = 1. Denominator is not 0.\n            # This path is unlikely to be taken by the given test cases.\n            # We'll assign a value based on physical limits.\n            if np.abs(numerator_complex) == 0.0:\n                # Corresponds to 0/0. Physical interpretation can be ambiguous.\n                # A value of 0 is a reasonable default.\n                magnitude = 0.0 \n            else:\n                magnitude = np.inf\n        else:\n            magnitude = np.abs(numerator_complex) / np.abs(denominator_complex)\n        \n        results.append(magnitude)\n\n    # Final print statement in the exact required format.\n    # The results are formatted to avoid ambiguity in representation.\n    # Using a general representation that avoids scientific notation for\n    # small differences in magnitude representation.\n    print(f\"[{','.join(f'{r:.8f}' for r in results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "理想模型提供了清晰的思路，但真实世界的性能往往由元器件的非理想特性决定。最后一个练习探讨了低压差稳压器（LDO）中的一个关键实例：电容器的等效串联电阻（ESR）对PSRR的影响 。通过分析这种寄生元件如何在电源到输出的传递函数中引入一个零点，您将对高频PSRR性能的退化以及在稳健的模拟设计中考虑元器件限制的重要性获得深刻的见解。",
            "id": "4290960",
            "problem": "低压差稳压器 (LDO) 使用一个传输器件来提供稳定的输出。假设一个单环路反馈设计，其中传输器件呈现一个从电源节点到输出节点的小信号输出电阻 $r_o$，误差放大器和传输器件共同构成一个开环增益为 $L(s)$ 的环路，并且输出网络主要由一个输出电容 $C_o$ 决定，该电容的等效串联电阻 (ESR) $R_{\\mathrm{ESR}}$ 与 $C_o$ 串联接地。负载足够大，因此在小信号分析中其电阻可以被视作无穷大。电源抑制比 (PSRR) 在此通过电源到输出的传递函数 $H_{V_s \\to V_{\\mathrm{out}}}(j\\omega) \\equiv V_{\\mathrm{out}}(j\\omega)/V_s(j\\omega)$ 来定义，其中 $V_s$ 是电源上的小信号扰动。\n\n仅从线性时不变小信号电路理论、负反馈降低闭环输出阻抗的定义以及串/并联阻抗组合规则出发，推导 $H_{V_s \\to V_{\\mathrm{out}}}(s)$ 的形式，该形式能够描述有限的 $r_o$ 和在稳压节点处看到的输出阻抗如何共同决定 $V_s$ 和 $V_{\\mathrm{out}}$ 之间的分压关系。特别地，利用闭环输出阻抗相对于开环输出阻抗减小了因子 $\\left(1+L(s)\\right)$ 这一事实，以及输出网络阻抗为 $Z_C(s)=R_{\\mathrm{ESR}}+\\dfrac{1}{s C_o}$。\n\n基于推导出的形式，确定输出电容的等效串联电阻 (ESR) 如何在 $H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 中产生一个零点，并解释随着频率增加，该零点如何影响电源到输出传递函数的幅度和相位。选择正确陈述该零点的来源、位置和定性影响的选项。\n\nA. 在一个具有带 ESR $R_{\\mathrm{ESR}}$ 的输出电容 $C_o$ 的单环路 LDO 中，传递函数 $H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 在 $\\omega_z=\\dfrac{1}{R_{\\mathrm{ESR}} C_o}$ 处包含一个左半平面零点，该零点源于因式分解 $Z_C(s)=R_{\\mathrm{ESR}}+\\dfrac{1}{s C_o}=\\dfrac{1+s R_{\\mathrm{ESR}} C_o}{s C_o}$。在高于 $\\omega_z$ 的频率处，$H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 的幅度以 $+20\\,\\mathrm{dB/dec}$ 的斜率增加（直到受其他极点限制），并且相位在零点附近表现出接近 $+90^\\circ$ 的超前。\n\nB. $C_o$ 的 ESR 引入一个右半平面零点，其频率为 $\\omega_z=\\dfrac{g_m}{R_{\\mathrm{ESR}}}$，在 $H_{V_{s} \\to V_{\\mathrm{out}}}(j\\omega)$ 中产生额外的相位滞后和峰值；该零点固有地降低了闭环稳定性，但在高频时改善了 PSRR 幅度。\n\nC. $C_o$ 的 ESR 在 $H_{V_{s} \\to V_{\\mathrm{out}}}(j\\omega)$ 中产生一个位于 $\\omega_p=\\dfrac{1}{R_{\\mathrm{ESR}} C_o}$ 的实极点，导致幅度在超过 $\\omega_p$ 后以 $-20\\,\\mathrm{dB/dec}$ 的斜率下降，相位向 $-90^\\circ$ 滞后，从而改善了对高频电源纹波的抑制。\n\nD. 由 $C_o$ 贡献的 ESR 零点精确地抵消了反馈环路 $L(s)$ 的主极点，使得 $H_{V_{s} \\to V_{\\mathrm{out}}}(j\\omega)$ 在所有更高频率下变得平坦，而不管 $r_o$ 的值或 $L(s)$ 的具体形式如何，因此不会降低 PSRR。",
            "solution": "在进行求解之前，首先评估问题陈述的有效性。\n\n### 第1步：提取已知条件\n- 系统是一个采用单环路反馈设计的低压差稳压器 (LDO)。\n- 传输器件具有一个从电源节点到输出节点的小信号输出电阻 $r_o$。\n- 误差放大器和传输器件的开环增益为 $L(s)$。\n- 输出网络由一个电容 $C_o$ 与其等效串联电阻 (ESR) $R_{\\mathrm{ESR}}$ 串联组成。\n- 输出网络的阻抗为 $Z_C(s) = R_{\\mathrm{ESR}} + \\dfrac{1}{s C_o}$。\n- 负载电阻被视为无穷大。\n- 电源到输出的传递函数为 $H_{V_s \\to V_{\\mathrm{out}}}(j\\omega) \\equiv V_{\\mathrm{out}}(j\\omega)/V_s(j\\omega)$，其中 $V_s$ 是电源的小信号扰动。\n- 一个关键指令是利用闭环输出阻抗相对于开环输出阻抗减小了因子 $(1+L(s))$ 这一事实。\n- 目标是推导 $H_{V_s \\to V_{\\mathrm{out}}}(s)$ 的形式，并分析由 ESR 引入的零点。\n\n### 第2步：使用提取的已知条件进行验证\n该问题描述了一个用于分析 LDO 电源抑制比 (PSRR) 的标准、简化的小信号模型。所有使用的术语——$L(s)$、$r_o$、$C_o$、$R_{\\mathrm{ESR}}$、PSRR——都是模拟电路理论中的标准术语。所提供的闭环输出阻抗关系 $Z_{\\mathrm{out,cl}} = Z_{\\mathrm{out,ol}}/(1+L(s))$ 是负反馈理论的一个基本结果。该模型具有科学依据、问题明确、客观，并包含足够的信息来推导所要求的传递函数并分析其特性。不存在矛盾、歧义或不科学的前提。\n\n### 第3步：结论与行动\n问题陈述是 **有效的**。将推导解答。\n\n### 推导与分析\n\n问题要求得到电源到输出的传递函数 $H_{V_s \\to V_{\\mathrm{out}}}(s) = V_{\\mathrm{out}}(s) / V_s(s)$。我们可以通过考虑电源扰动 $V_s$ 到达输出节点 $V_{\\mathrm{out}}$ 的路径来对其影响进行建模。一个用于分析 LDO PSRR 的鲁棒模型会考虑到电源噪声被反馈环路抑制。闭环传递函数通常可以用开环传递函数和环路增益来表示。\n\n我们首先假设反馈环路断开，确定从电源到输出的开环增益。在这种情况下，主动调节功能被禁用。电源扰动 $V_s$ 通过传输器件传播到输出，该器件被建模为具有电阻 $r_o$。这个电阻与输出阻抗网络 $Z_C(s)$ 形成一个分压器。因此，从电源到输出的开环传递函数为：\n$$ A_{\\mathrm{OL,psrr}}(s) = \\frac{Z_C(s)}{r_o + Z_C(s)} $$\n负反馈通过一个因子 $(1+L(s))$ 来抑制这种扰动。因此，从电源到输出的闭环传递函数为：\n$$ H_{V_s \\to V_{\\mathrm{out}}}(s) = \\frac{A_{\\mathrm{OL,psrr}}(s)}{1 + L(s)} = \\frac{1}{1+L(s)} \\frac{Z_C(s)}{r_o + Z_C(s)} $$\n一个替代的、更严谨的推导是使用输出节点上的 KCL，这会得出一个略有不同但更常见的表达式：\n$$ H_{V_s \\to V_{\\mathrm{out}}}(s) = \\frac{Z_C(s)}{r_o + Z_C(s)(1+L(s))} $$\n这个表达式正确地预测了直流 PSRR（此时 $Z_C \\to \\infty$ 且 $H \\to 1/(1+L(0))$）和高频 PSRR（此时 $L(s) \\to 0$，$Z_C \\to R_{\\mathrm{ESR}}$ 且 $H \\to R_{\\mathrm{ESR}}/(r_o + R_{\\mathrm{ESR}})$）。\n\n两种模型都有一个关键特征：传递函数的分子与 $Z_C(s)$ 成正比。问题关注的是由 ESR 产生的零点，这是 $Z_C(s)$ 本身的一个特性。我们来分析 $Z_C(s)$：\n$$ Z_C(s) = R_{\\mathrm{ESR}} + \\frac{1}{s C_o} $$\n为了找到该阻抗的零点，我们可以将其写成有理函数的形式：\n$$ Z_C(s) = \\frac{s R_{\\mathrm{ESR}} C_o + 1}{s C_o} $$\n$Z_C(s)$ 的分子是 $(1 + s R_{\\mathrm{ESR}} C_o)$。这一项成为总传递函数 $H_{V_s \\to V_{\\mathrm{out}}}(s)$ 的一个分子项。传递函数的零点出现在使分子为零的 $s$ 值处。\n$$ 1 + s R_{\\mathrm{ESR}} C_o = 0 \\implies s_z = -\\frac{1}{R_{\\mathrm{ESR}} C_o} $$\n由于 $R_{\\mathrm{ESR}}$ 和 $C_o$ 是正的物理量，零点 $s_z$ 是一个负实数。这对应于复S平面左半部分的一个零点（左半平面零点或 LHP 零点）。该零点的角频率为：\n$$ \\omega_z = \\frac{1}{R_{\\mathrm{ESR}} C_o} $$\n现在，我们来分析这个左半平面零点对频率响应 $H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 的影响。该零点为传递函数贡献了一个因子 $(1 + j\\omega/\\omega_z)$。\n-   **幅度影响**：对于频率 $\\omega \\gg \\omega_z$，该项的幅度约为 $|\\omega/\\omega_z|$。在对数-对数图（波特图）上，这对应于一条斜率为 $+20\\,\\mathrm{dB/decade}$ 的直线。这意味着零点导致电源到输出的增益幅度在高频处增加，从而降低了 PSRR。当然，这种上升会被传递函数中更高频率的极点抵消或修正。\n-   **相位影响**：该项的相位贡献为 $\\phi_z(\\omega) = \\arctan(\\omega/\\omega_z)$。该相位在 $\\omega \\ll \\omega_z$ 时从 $0^\\circ$ 开始，在 $\\omega = \\omega_z$ 时经过 $+45^\\circ$，并在 $\\omega \\gg \\omega_z$ 时接近 $+90^\\circ$。这是一个相位超前。\n\n### 逐项分析\n\n**A. 在一个具有带 ESR $R_{\\mathrm{ESR}}$ 的输出电容 $C_o$ 的单环路 LDO 中，传递函数 $H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 在 $\\omega_z=\\dfrac{1}{R_{\\mathrm{ESR}} C_o}$ 处包含一个左半平面零点，该零点源于因式分解 $Z_C(s)=R_{\\mathrm{ESR}}+\\dfrac{1}{s C_o}=\\dfrac{1+s R_{\\mathrm{ESR}} C_o}{s C_o}$。在高于 $\\omega_z$ 的频率处，$H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 的幅度以 $+20\\,\\mathrm{dB/dec}$ 的斜率增加（直到受其他极点限制），并且相位在零点附近表现出接近 $+90^\\circ$ 的超前。**\n-   **结论：正确。** 该陈述准确地指出了零点的来源（$Z_C(s)$ 的分子）、其位置（$\\omega_z = 1/(R_{\\mathrm{ESR}} C_o)$）、其类型（左半平面），以及其对幅度（斜率增加 $+20\\,\\mathrm{dB/dec}$）和相位（超前高达 $+90^\\circ$）的定性影响。限定条件“直到受其他极点限制”也是正确的。\n\n**B. $C_o$ 的 ESR 引入一个右半平面零点，其频率为 $\\omega_z=\\dfrac{g_m}{R_{\\mathrm{ESR}}}$，在 $H_{V_{s} \\to V_{\\mathrm{out}}}(j\\omega)$ 中产生额外的相位滞后和峰值；该零点固有地降低了闭环稳定性，但在高频时改善了 PSRR 幅度。**\n-   **结论：不正确。** 该零点位于左半平面，而非右半平面。左半平面零点产生相位超前，而非滞后。零点位置不正确；它应该是 $1/(R_{\\mathrm{ESR}} C_o)$，而不是以这种方式涉及传输器件的跨导 $g_m$。$H_{V_s \\to V_{\\mathrm{out}}}(j\\omega)$ 的幅度上升会降低而非改善 PSRR。\n\n**C. $C_o$ 的 ESR 在 $H_{V_{s} \\to V_{\\mathrm{out}}}(j\\omega)$ 中产生一个位于 $\\omega_p=\\dfrac{1}{R_{\\mathrm{ESR}} C_o}$ 的实极点，导致幅度在超过 $\\omega_p$ 后以 $-20\\,\\mathrm{dB/dec}$ 的斜率下降，相位向 $-90^\\circ$ 滞后，从而改善了对高频电源纹波的抑制。**\n-   **结论：不正确。** $Z_C(s)$ 的因式分解表明，项 $(1+sR_{\\mathrm{ESR}}C_o)$ 出现在传递函数的分子中，从而产生一个零点，而非极点。所描述的影响（幅度下降、相位滞后）是极点的特征，而不是 ESR 零点的特征。\n\n**D. 由 $C_o$ 贡献的 ESR 零点精确地抵消了反馈环路 $L(s)$ 的主极点，使得 $H_{V_{s} \\to V_{\\mathrm{out}}}(j\\omega)$ 在所有更高频率下变得平坦，而不管 $r_o$ 的值或 $L(s)$ 的具体形式如何，因此不会降低 PSRR。**\n-   **结论：不正确。** 没有任何物理原理能保证 ESR 零点（$\\omega_z = 1/(R_{\\mathrm{ESR}}C_o)$）与环路的主极点之间会发生精确抵消。这种抵消是特定元件选择和设计的结果，而不是一个普遍属性。声称响应“无论”其他参数如何都保持平坦是错误的。ESR 零点通常出现在高于环路单位增益带宽的频率处，并通过增加电源到输出的增益来降低 PSRR。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
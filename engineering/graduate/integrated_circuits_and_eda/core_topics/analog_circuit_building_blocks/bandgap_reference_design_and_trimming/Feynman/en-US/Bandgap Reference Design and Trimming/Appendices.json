{
    "hands_on_practices": [
        {
            "introduction": "Before optimizing a complex circuit like a bandgap reference, it is essential to understand its fundamental behavior. This practice involves deriving the core equation for the reference voltage and performing a symbolic sensitivity analysis. By calculating the partial derivatives with respect to key parameters, you will gain an intuitive feel for which components and process variations most significantly impact the output voltage, a crucial skill for robust design. ",
            "id": "4257169",
            "problem": "An analog bandgap reference in an integrated circuit is built from two matched Bipolar Junction Transistors (BJT) biased at different current densities and a resistor network, closed by a high-gain operational amplifier. In the conventional topology, one BJT operates at current density scaled by an emitter-area ratio, producing a difference in base-emitter voltage that is exploited to generate a Proportional To Absolute Temperature (PTAT) voltage, which is then scaled by a resistor ratio and summed with a base-emitter voltage to synthesize a temperature-insensitive reference. Consider the following modeling assumptions, grounded in first principles and well-tested formulas.\n\n1. The thermal voltage is $V_{T} = \\frac{k_{B} T}{q}$, where $k_{B}$ is the Boltzmann constant, $q$ is the elementary charge, and $T$ is the absolute temperature. Throughout this problem, treat $T$ as fixed.\n\n2. The BJT base-emitter voltage follows $V_{BE} = V_{T} \\ln\\!\\left(\\frac{I_{C}}{I_{S}}\\right)$, where $I_{C}$ is the collector current and $I_{S}$ is the saturation current. Assume $I_{C}$ is fixed by a bias network independent of the parameters varied here.\n\n3. The PTAT generator uses two BJTs with emitter-area ratio $N$ (with $N > 1$), producing $\\Delta V_{BE} = V_{T} \\ln(N)$ across a resistor $R_{1}$, thereby setting a current $I_{PTAT} = \\frac{V_{T} \\ln(N)}{R_{1}}$. The PTAT voltage developed across $R_{2}$ is $V_{PTAT} = I_{PTAT} R_{2}$. Define the resistor ratio $m = \\frac{R_{2}}{R_{1}}$.\n\n4. The operational amplifier has finite Direct Current (DC) gain $A_{0}$, and the PTAT path is arranged in a near-unity-gain feedback configuration such that the closed-loop scaling of the PTAT term is reduced by the canonical factor $\\alpha(A_{0}) = \\frac{A_{0}}{1 + A_{0}}$. This approximation is appropriate for a high-gain amplifier in a unity-feedback-like loop, and neglects higher-order effects such as finite bandwidth and output resistance.\n\nUnder these assumptions, the reference voltage can be modeled as the sum of a base-emitter voltage and a scaled PTAT term. Starting from the physical definitions above, first derive the functional dependence of the reference voltage $V_{ref}$ on the parameters $m$, $N$, $I_{S}$, and $A_{0}$, keeping $T$ and $I_{C}$ fixed. Then, perform a symbolic sensitivity analysis: compute the four partial derivatives $\\frac{\\partial V_{ref}}{\\partial m}$, $\\frac{\\partial V_{ref}}{\\partial N}$, $\\frac{\\partial V_{ref}}{\\partial I_{S}}$, and $\\frac{\\partial V_{ref}}{\\partial A_{0}}$.\n\nExpress the final result as a single row vector containing these four partial derivatives in the order $\\left(\\frac{\\partial V_{ref}}{\\partial m}, \\frac{\\partial V_{ref}}{\\partial N}, \\frac{\\partial V_{ref}}{\\partial I_{S}}, \\frac{\\partial V_{ref}}{\\partial A_{0}}\\right)$. No numerical evaluation is required. No rounding is required. Do not include units in the final expressions.",
            "solution": "The problem has been validated and is deemed scientifically grounded, well-posed, and objective. All assumptions and definitions are standard in the field of analog integrated circuit design and form a self-contained, consistent set of statements. The problem requires a standard sensitivity analysis, which is a formalizable and meaningful task. Therefore, I will proceed with the derivation of the solution.\n\nThe objective is to first derive the expression for the reference voltage $V_{ref}$ and then compute its partial derivatives with respect to the parameters $m$, $N$, $I_{S}$, and $A_{0}$.\n\nFirst, we construct the expression for the reference voltage, $V_{ref}$. The problem states that $V_{ref}$ is the sum of a base-emitter voltage, $V_{BE}$, and a scaled Proportional To Absolute Temperature (PTAT) term.\n\nThe base-emitter voltage is given by the standard BJT model:\n$$V_{BE} = V_{T} \\ln\\left(\\frac{I_{C}}{I_{S}}\\right)$$\nwhere $V_{T} = \\frac{k_{B} T}{q}$ is the thermal voltage, $I_{C}$ is the collector current, and $I_{S}$ is the saturation current. Both $V_{T}$ and $I_{C}$ are treated as fixed parameters for this analysis.\n\nNext, we construct the PTAT voltage term, $V_{PTAT}$. It is generated from the difference in base-emitter voltages of two BJTs with an emitter-area ratio $N$. This difference is given as:\n$$\\Delta V_{BE} = V_{T} \\ln(N)$$\nThis voltage is applied across a resistor $R_{1}$ to generate a PTAT current:\n$$I_{PTAT} = \\frac{\\Delta V_{BE}}{R_{1}} = \\frac{V_{T} \\ln(N)}{R_{1}}$$\nThis current then flows through a resistor $R_{2}$ to produce the PTAT voltage:\n$$V_{PTAT} = I_{PTAT} R_{2} = \\left(\\frac{V_{T} \\ln(N)}{R_{1}}\\right) R_{2}$$\nUsing the defined resistor ratio $m = \\frac{R_{2}}{R_{1}}$, the expression for $V_{PTAT}$ simplifies to:\n$$V_{PTAT} = m V_{T} \\ln(N)$$\nThe problem specifies that this PTAT voltage is scaled by a factor $\\alpha(A_{0})$ due to the finite DC gain $A_{0}$ of the operational amplifier. The scaling factor is provided as:\n$$\\alpha(A_{0}) = \\frac{A_{0}}{1 + A_{0}}$$\nThe scaled PTAT term is therefore $\\alpha(A_{0}) V_{PTAT}$.\n\nThe total reference voltage $V_{ref}$ is the sum of $V_{BE}$ and the scaled $V_{PTAT}$:\n$$V_{ref} = V_{BE} + \\alpha(A_{0}) V_{PTAT}$$\nSubstituting the expressions for each component, we obtain the full functional dependence of $V_{ref}$ on the specified parameters:\n$$V_{ref}(m, N, I_{S}, A_{0}) = V_{T} \\ln\\left(\\frac{I_{C}}{I_{S}}\\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N)$$\nThis expression can be expanded for easier differentiation:\n$$V_{ref} = V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N)$$\n\nNow, we perform the sensitivity analysis by computing the four required partial derivatives.\n\n1.  Partial derivative with respect to $m$:\nIn this differentiation, all other variables ($N$, $I_{S}$, $A_{0}$) and constants ($V_{T}$, $I_{C}$) are held constant.\n$$\\frac{\\partial V_{ref}}{\\partial m} = \\frac{\\partial}{\\partial m} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\nThe first term is independent of $m$, so its derivative is $0$.\n$$\\frac{\\partial V_{ref}}{\\partial m} = \\frac{A_{0}}{1 + A_{0}} V_{T} \\ln(N) \\frac{\\partial}{\\partial m}(m) = \\frac{A_{0}}{1 + A_{0}} V_{T} \\ln(N)$$\n\n2.  Partial derivative with respect to $N$:\nHere, we treat $m$, $I_{S}$, and $A_{0}$ as constants.\n$$\\frac{\\partial V_{ref}}{\\partial N} = \\frac{\\partial}{\\partial N} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\nThe first term is independent of $N$. We use the rule $\\frac{d}{dx}\\ln(x) = \\frac{1}{x}$.\n$$\\frac{\\partial V_{ref}}{\\partial N} = \\frac{A_{0}}{1 + A_{0}} m V_{T} \\frac{\\partial}{\\partial N}(\\ln(N)) = \\frac{A_{0}}{1 + A_{0}} m V_{T} \\frac{1}{N}$$\n$$\\frac{\\partial V_{ref}}{\\partial N} = \\frac{m V_{T} A_{0}}{N(1 + A_{0})}$$\n\n3.  Partial derivative with respect to $I_{S}$:\nHere, we treat $m$, $N$, and $A_{0}$ as constants.\n$$\\frac{\\partial V_{ref}}{\\partial I_{S}} = \\frac{\\partial}{\\partial I_{S}} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\nThe second term is independent of $I_{S}$.\n$$\\frac{\\partial V_{ref}}{\\partial I_{S}} = V_{T} \\frac{\\partial}{\\partial I_{S}}( \\ln(I_{C}) - \\ln(I_{S}) ) = V_{T} \\left( 0 - \\frac{1}{I_{S}} \\right)$$\n$$\\frac{\\partial V_{ref}}{\\partial I_{S}} = -\\frac{V_{T}}{I_{S}}$$\n\n4.  Partial derivative with respect to $A_{0}$:\nHere, we treat $m$, $N$, and $I_{S}$ as constants.\n$$\\frac{\\partial V_{ref}}{\\partial A_{0}} = \\frac{\\partial}{\\partial A_{0}} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\nThe first term is independent of $A_{0}$. The differentiation requires the quotient rule for the term $\\frac{A_{0}}{1 + A_{0}}$.\nLet $u = A_{0}$ and $v = 1 + A_{0}$. Then $u' = 1$ and $v' = 1$.\n$$\\frac{\\partial}{\\partial A_{0}}\\left( \\frac{A_{0}}{1 + A_{0}} \\right) = \\frac{u'v - uv'}{v^{2}} = \\frac{1(1 + A_{0}) - A_{0}(1)}{(1 + A_{0})^{2}} = \\frac{1}{(1 + A_{0})^{2}}$$\nSubstituting this back into the expression for the partial derivative of $V_{ref}$:\n$$\\frac{\\partial V_{ref}}{\\partial A_{0}} = m V_{T} \\ln(N) \\left( \\frac{1}{(1 + A_{0})^{2}} \\right)$$\n$$\\frac{\\partial V_{ref}}{\\partial A_{0}} = \\frac{m V_{T} \\ln(N)}{(1 + A_{0})^{2}}$$\n\nThe four partial derivatives have been computed. The final result is the row vector containing these expressions in the specified order.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{A_{0} V_{T} \\ln(N)}{1 + A_{0}} & \\frac{m V_{T} A_{0}}{N(1 + A_{0})} & -\\frac{V_{T}}{I_{S}} & \\frac{m V_{T} \\ln(N)}{(1 + A_{0})^{2}}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "A perfectly accurate bandgap reference is useless if it cannot reliably start up under all conditions, as many self-biased circuits possess an undesirable zero-current state. This exercise challenges you to analyze the dynamics of the startup process and evaluate different circuit techniques to guarantee a successful power-on sequence. This thought experiment hones your ability to reason about transient behavior and system-level reliability, moving beyond simple static analysis to ensure designs are robust in real-world applications. ",
            "id": "4257107",
            "problem": "An integrated bandgap reference (BGR) in a complementary metal–oxide–semiconductor (CMOS) process is being designed for robust initialization across a wide range of supply ramp profiles within an Electronic Design Automation (EDA) flow. The BGR core consists of a bipolar junction transistor pair generating a Complementary To Absolute Temperature (CTAT) base–emitter voltage $V_{\\mathrm{BE}}(T)$ and a Proportional To Absolute Temperature (PTAT) term based on $\\Delta V_{\\mathrm{BE}}(T)$, summed through resistor ratios to form $V_{\\mathrm{REF}}$. The closed-loop core uses an operational amplifier to enforce the resistor ratio condition and drive bias currents in the bipolar devices. The core admits a $0$-current equilibrium in the absence of a perturbation, which motivates the inclusion of a startup subcircuit that injects a transient current into the bias node. The supply is a monotonic ramp $V_{\\mathrm{DD}}(t)$, approximately linear with slope $S$, such that $V_{\\mathrm{DD}}(t) = S t$ until it reaches its final value.\n\nThe startup subcircuit is implemented as a current source that decays with an $RC$-like envelope $I_{\\mathrm{SU}}(t) = I_0 \\exp(-t/\\tau)$, where $I_0$ and $\\tau$ depend on device sizing and an $RC$ referenced to $V_{\\mathrm{DD}}$. The operational amplifier requires a minimum headroom $V_{\\mathrm{OP}}$ to achieve sufficient gain and bandwidth, and hence effectively enables at time $t_e$ defined implicitly by $V_{\\mathrm{DD}}(t_e) \\geq V_{\\mathrm{OP}}$. The bias node has a parasitic capacitance $C_n$ and experiences temperature-dependent leakage $I_{\\mathrm{LEAK}}(T)$. The bipolar junction transistors obey the diode law $I_{\\mathrm{D}} = I_{\\mathrm{S}} \\exp(V_{\\mathrm{BE}}/(n V_T))$, where $V_T = kT/q$ is the thermal voltage, $k$ is Boltzmann’s constant, $q$ is the elementary charge, $n$ is the ideality factor, and $I_{\\mathrm{S}}$ is the saturation current; as a consequence, $V_{\\mathrm{BE}}$ decreases approximately linearly with increasing temperature, and $\\Delta V_{\\mathrm{BE}}$ is PTAT. Trimming of the BGR is performed by adjusting a resistor ratio $R_2/R_1$ through switchable unit elements, which changes the PTAT scaling to achieve the desired $V_{\\mathrm{REF}}$.\n\nUnder very slow ramps (small $S$), field testing shows intermittent failure to initialize: the core remains trapped near the $0$-current equilibrium because the startup current decays too early or is siphoned by leakage and parasitic charging before the amplifier has sufficient headroom, and the loop never transitions into the intended finite-bias equilibrium. The design team is considering timing coordination and hysteresis-based gating techniques to ensure robust initialization irrespective of $S$, process, voltage, and temperature variations.\n\nWhich of the following design approaches are fundamentally sound for ensuring robust BGR startup across a broad range of $V_{\\mathrm{DD}}(t)$ ramp profiles, including very slow ramps, when analyzed from first principles of device conduction, capacitive charging, and feedback loop enablement? Select all that apply.\n\nA. Shape the startup injection $I_{\\mathrm{SU}}(t)$ with an $RC$ referenced to $V_{\\mathrm{DD}}$ so that the effective decay constant $\\tau$ and initial magnitude $I_0$ guarantee persistence of perturbation until after the operational amplifier reaches headroom at $V_{\\mathrm{DD}} \\geq V_{\\mathrm{OP}}$, by choosing $\\tau$ to exceed the worst-case enable time and $I_0$ to exceed leakage and capacitive demands at the bias node under the slowest ramp $S$.\n\nB. Gate the BGR core with a hysteretic window comparator on $V_{\\mathrm{DD}}$ with thresholds $V_{\\mathrm{L}}$ and $V_{\\mathrm{H}}$ satisfying $V_{\\mathrm{H}} > V_{\\mathrm{OP}}$, enabling the amplifier and maintaining startup injection only when $V_{\\mathrm{DD}}$ is above $V_{\\mathrm{H}}$, and disabling or rearming when $V_{\\mathrm{DD}}$ falls below $V_{\\mathrm{L}}$, thereby avoiding chatter and slope-dependent timing errors.\n\nC. Rely exclusively on trimming the resistor ratio $R_2/R_1$ to perfect PTAT–CTAT cancellation at the final operating point, without modifying the startup subcircuit, because accurate $V_{\\mathrm{REF}}$ at the target temperature guarantees proper initialization for any $V_{\\mathrm{DD}}(t)$.\n\nD. Increase the BGR output capacitor $C_{\\mathrm{OUT}}$ substantially so that $V_{\\mathrm{REF}}$ rises more slowly, reducing the risk of latch-up, since a slower output rise allows more time for the loop to settle during very slow $V_{\\mathrm{DD}}$ ramps.\n\nE. Implement a Power-On Reset (POR) that monitors the time derivative $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ and re-enables the startup injection whenever $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ falls below a threshold while $V_{\\mathrm{DD}}$ is within an activation window, with hysteresis in both $V_{\\mathrm{DD}}$ and $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ domains to prevent oscillatory enabling under slow ramps.\n\nAnswer by selecting the correct option(s).",
            "solution": "The problem statement describes a failure mode in a bandgap reference (BGR) circuit startup sequence under slow supply voltage ramps. The core issue is a timing mismatch: the startup subcircuit, which provides a necessary perturbation to move the BGR core from its stable zero-current state to the desired finite-current operating point, may cease to be effective before the main feedback loop, enabled by an operational amplifier, has sufficient supply headroom to take over. A robust solution must ensure that a sufficient startup stimulus is present at the moment the feedback loop becomes functional, irrespective of the supply ramp rate $S$.\n\nFirst, we formalize the problem based on the provided information. The supply voltage is given by $V_{\\mathrm{DD}}(t) = S t$. The operational amplifier requires a minimum supply voltage $V_{\\mathrm{OP}}$ to function, so it becomes active at an enable time $t_e$ such that $V_{\\mathrm{DD}}(t_e) = V_{\\mathrm{OP}}$. This implies $t_e = V_{\\mathrm{OP}} / S$. For very slow ramps, $S$ is small, leading to a large enable time $t_e$.\n\nThe startup circuit provides a current $I_{\\mathrm{SU}}(t) = I_0 \\exp(-t/\\tau)$ to a critical bias node. This node has a parasitic capacitance $C_n$ and temperature-dependent leakage current $I_{\\mathrm{LEAK}}(T)$. For a successful startup, the injected current must be sufficient to overcome leakage and charge the node capacitance, i.e., $I_{\\mathrm{SU}}(t) > I_{\\mathrm{LEAK}}(T) + C_n \\frac{\\mathrm{d}V_n}{\\mathrm{d}t}$ + bias currents, until the main loop closes and self-biases. The failure occurs when, for a large $t_e$, the startup current has decayed to an insignificant value, $I_{\\mathrm{SU}}(t_e) = I_0 \\exp(-t_e/\\tau) \\approx 0$, because the fixed time constant $\\tau$ is much smaller than $t_e$.\n\nA fundamentally sound solution must therefore break the dependency on the ramp slope $S$ by ensuring the startup \"kick\" is correctly timed with the amplifier's enablement. We will now evaluate each proposed approach against this principle.\n\n**A. Shape the startup injection $I_{\\mathrm{SU}}(t)$ with an $RC$ referenced to $V_{\\mathrm{DD}}$ so that the effective decay constant $\\tau$ and initial magnitude $I_0$ guarantee persistence of perturbation until after the operational amplifier reaches headroom at $V_{\\mathrm{DD}} \\geq V_{\\mathrm{OP}}$, by choosing $\\tau$ to exceed the worst-case enable time and $I_0$ to exceed leakage and capacitive demands at the bias node under the slowest ramp $S$.**\n\nThis approach directly addresses the identified failure mechanism. It proposes two conditions:\n1.  **Magnitude:** The initial current $I_0$ must be large enough to source the total current demand at the bias node, which includes leakage $I_{\\mathrm{LEAK}}$, capacitive charging current for $C_n$, and the initial biasing of the BJT core. This is a necessary condition for the perturbation to be effective at all.\n2.  **Timing:** The decay constant $\\tau$ must be chosen to be longer than the longest possible enable time, $t_{e, \\mathrm{max}}$. If the design is specified to work for supply ramps with slopes $S \\geq S_{\\mathrm{min}}$, then the worst case is $t_{e, \\mathrm{max}} = V_{\\mathrm{OP}} / S_{\\mathrm{min}}$. The condition $\\tau > t_{e, \\mathrm{max}}$ ensures that at the critical time $t_{e, \\mathrm{max}}$, the startup current $I_{\\mathrm{SU}}(t_{e, \\mathrm{max}})$ is still a significant fraction of $I_0$ and thus sufficient to drive the BGR core into its active region.\n\nThis is a \"brute-force\" timing solution. It makes the startup current persist for a very long time to cover the slowest ramp condition. While potentially inefficient in terms of power for fast ramps (as the current injection continues long after it is needed), the underlying principle of ensuring the startup stimulus outlasts the worst-case turn-on delay is fundamentally sound for achieving robustness within a specified operational range.\n\n**Verdict:** Correct.\n\n**B. Gate the BGR core with a hysteretic window comparator on $V_{\\mathrm{DD}}$ with thresholds $V_{\\mathrm{L}}$ and $V_{\\mathrm{H}}$ satisfying $V_{\\mathrm{H}} > V_{\\mathrm{OP}}$, enabling the amplifier and maintaining startup injection only when $V_{\\mathrm{DD}}$ is above $V_{\\mathrm{H}}$, and disabling or rearming when $V_{\\mathrm{DD}}$ falls below $V_{\\mathrm{L}}$, thereby avoiding chatter and slope-dependent timing errors.**\n\nThis approach replaces the fixed-time, open-loop startup sequence with a state-dependent, event-driven one. The controlling variable is the supply voltage $V_{\\mathrm{DD}}$ itself, not absolute time $t$. The startup sequence is initiated only when $V_{\\mathrm{DD}}$ crosses a threshold $V_{\\mathrm{H}}$. By setting $V_{\\mathrm{H}} > V_{\\mathrm{OP}}$, the design guarantees that the operational amplifier has sufficient headroom and is fully functional at the very moment the startup sequence begins. This synchronization eliminates the timing mismatch problem that caused the failure. The duration of the startup pulse is no longer critical, as it is applied under conditions where the main loop is ready to close. The use of hysteresis, with a lower threshold $V_{\\mathrm{L}}$, is proper design practice to prevent oscillatory behavior (chatter) if $V_{\\mathrm{DD}}$ fluctuates near the threshold, enhancing robustness. This method effectively decouples the startup logic from the ramp slope $S$, ensuring correct operation for any positive slope.\n\n**Verdict:** Correct.\n\n**C. Rely exclusively on trimming the resistor ratio $R_2/R_1$ to perfect PTAT–CTAT cancellation at the final operating point, without modifying the startup subcircuit, because accurate $V_{\\mathrm{REF}}$ at the target temperature guarantees proper initialization for any $V_{\\mathrm{DD}}(t)$.**\n\nThis proposal conflates two orthogonal aspects of BGR design: steady-state accuracy and transient startup behavior. Trimming the resistor ratio $R_2/R_1$ is a procedure to adjust the temperature coefficient of the final output voltage $V_{\\mathrm{REF}}$. This is performed by analyzing the behavior of the circuit around its intended, stable, non-zero operating point. The startup problem, however, is the failure to transition *to* this operating point from the stable zero-current state. The values of $R_1$ and $R_2$ influence the characteristics of the desired equilibrium but have a negligible effect on the dynamics of escaping the zero-current state, which is determined by the availability of a startup current before the op-amp is active. The claim that an accurate final $V_{\\mathrm{REF}}$ guarantees proper initialization is a non-sequitur. A perfectly trimmed BGR can still fail to start if the startup circuit is flawed, and a poorly trimmed BGR may start reliably.\n\n**Verdict:** Incorrect.\n\n**D. Increase the BGR output capacitor $C_{\\mathrm{OUT}}$ substantially so that $V_{\\mathrm{REF}}$ rises more slowly, reducing the risk of latch-up, since a slower output rise allows more time for the loop to settle during very slow $V_{\\mathrm{DD}}$ ramps.**\n\nThis proposal misidentifies the problem. The output capacitor $C_{\\mathrm{OUT}}$ is primarily a component for ensuring the stability of the BGR's main feedback loop once it is closed and active. It helps to create a dominant pole for frequency compensation. The problem at hand is not loop instability or settling time; the problem is that the loop fails to close in the first place. Increasing $C_{\\mathrm{OUT}}$ would present a larger load to the operational amplifier. During the startup transient, a large $C_{\\mathrm{OUT}}$ would demand more charging current from the amplifier, potentially slowing down the process of reaching the stable operating point and making startup *more* difficult, not less. A slower rise of $V_{\\mathrm{REF}}$ does not address the core issue that the amplifier lacks headroom or that the startup current has already vanished. The reasoning provided is therefore contrary to the physical reality of the situation.\n\n**Verdict:** Incorrect.\n\n**E. Implement a Power-On Reset (POR) that monitors the time derivative $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ and re-enables the startup injection whenever $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ falls below a threshold while $V_{\\mathrm{DD}}$ is within an activation window, with hysteresis in both $V_{\\mathrm{DD}}$ and $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ domains to prevent oscillatory enabling under slow ramps.**\n\nThis describes a sophisticated and highly robust closed-loop control system for the startup process itself. The logic is based on monitoring a direct indicator of successful startup: the rising of the output voltage $V_{\\mathrm{REF}}$, quantified by its derivative $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$. If the circuit gets stuck in the zero-current state, its voltages stagnate, and consequently, $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$ will fall to approximately zero. This system detects this \"stalled\" condition and actively intervenes by re-enabling the startup current injection. This \"kick-until-started\" approach is fundamentally sound because it directly detects and corrects the failure condition. It is state-dependent and therefore independent of the supply ramp rate $S$. The inclusion of a $V_{\\mathrm{DD}}$ activation window ensures this logic only operates under appropriate supply conditions, and the use of hysteresis in both monitored domains ($V_{\\mathrm{DD}}$ and $\\mathrm{d}V_{\\mathrm{REF}}/\\mathrm{d}t$) is a hallmark of a robust design, preventing undesirable oscillations.\n\n**Verdict:** Correct.",
            "answer": "$$\\boxed{ABE}$$"
        },
        {
            "introduction": "For high-precision applications, the noise performance of a voltage reference is as important as its DC accuracy. This practice provides a hands-on opportunity to integrate a realistic noise power spectral density, composed of both flicker and white noise, to find the total root-mean-square ($\\text{RMS}$) noise. You will then apply this analysis to a practical design task: determining the specifications of a post-filter required to meet a noise budget, bridging the gap between theoretical analysis and practical implementation. ",
            "id": "4257105",
            "problem": "A Complementary Metal–Oxide–Semiconductor (CMOS) bandgap reference with on-chip trimming is to be used in an Electronic Design Automation (EDA) verification flow that enforces a noise budget over a specified bandwidth. The output-referred voltage noise power spectral density (PSD) of the trimmed reference, after folding all core, resistor network, and buffer contributions to the output, can be modeled as the sum of a white floor and a flicker term:\n- White floor spectral density of amplitude $S_{w}^{1/2} = 1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}}$ (so $S_{w} = \\left(1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}}\\right)^{2}$ in $\\text{V}^{2}/\\text{Hz}$),\n- Flicker corner frequency $f_{k} = 200\\ \\text{Hz}$, with flicker density $S_{w}\\, f_{k}/f$ so that the total PSD is $S_{v}(f) = S_{w}\\left(1 + \\dfrac{f_{k}}{f}\\right)$ for $f > 0$.\n\nThe specification defines the noise measurement band as $f \\in [f_{1}, f_{2}]$ with $f_{1} = 10\\ \\text{Hz}$ and $f_{2} = 10^{4}\\ \\text{Hz}$. Initially, the output path is assumed flat (unity gain) in this band. You may subsequently add a first-order Resistive-Capacitive (RC) post-filter with unity direct current (DC) gain and transfer function magnitude-squared $|H(f)|^{2} = \\dfrac{1}{1 + \\left(\\dfrac{f}{f_{c}}\\right)^{2}}$, where $f_{c}$ is the $-3\\ \\text{dB}$ cutoff frequency.\n\nTasks:\n1) Starting from the definition of mean-square noise as the integral of the PSD over frequency, compute the integrated output root-mean-square (RMS) noise over $[f_{1}, f_{2}]$ without the RC filter, in $\\text{V}_{\\text{rms}}$.\n2) Determine the required $-3\\ \\text{dB}$ cutoff frequency $f_{c}$ (in $\\text{Hz}$) of the single-pole RC filter such that the integrated output RMS noise over $[f_{1}, f_{2}]$ equals the target $100\\ \\mu\\text{V}_{\\text{rms}}$.\n\nUse only first principles for noise integration and linear time-invariant filtering. Round your final reported answer to three significant figures. Express the final frequency in $\\text{Hz}$. Your final reported answer should be the required cutoff frequency $f_{c}$ only.",
            "solution": "The problem is first validated to ensure it is scientifically grounded, well-posed, and objective.\n\n### Step 1: Extract Givens\n- White noise floor spectral density amplitude: $S_{w}^{1/2} = 1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}}$\n- White noise floor PSD: $S_{w} = (1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}})^{2} = 2.25 \\times 10^{-12}\\ \\text{V}^{2}/\\text{Hz}$\n- Flicker corner frequency: $f_{k} = 200\\ \\text{Hz}$\n- Total noise PSD: $S_{v}(f) = S_{w}\\left(1 + \\dfrac{f_{k}}{f}\\right)$ for $f > 0$\n- Noise integration band: $[f_{1}, f_{2}]$ where $f_{1} = 10\\ \\text{Hz}$ and $f_{2} = 10^{4}\\ \\text{Hz}$\n- RC filter transfer function magnitude-squared: $|H(f)|^{2} = \\dfrac{1}{1 + \\left(\\dfrac{f}{f_{c}}\\right)^{2}}$\n- Target output RMS noise with filter: $V_{n, \\text{target}} = 100\\ \\mu\\text{V}_{\\text{rms}}$\n- The problem asks for the cutoff frequency $f_c$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientific Grounding:** The problem uses a standard model for noise in CMOS circuits (white noise + $1/f$ noise) and applies fundamental principles of linear systems theory (noise integration and filtering). The concepts and values are physically realistic and standard in the field of analog integrated circuit design.\n- **Well-Posedness:** The problem is clearly stated with all necessary parameters provided. The objective is to find a specific design parameter ($f_c$) that satisfies a given performance constraint. The underlying mathematical function is monotonic, ensuring a unique solution exists.\n- **Objectivity:** The problem is phrased in precise, technical language with no subjective or ambiguous terms.\n\n### Step 3: Verdict and Action\nThe problem is valid. A full solution will be provided.\n\n### Task 1: Unfiltered RMS Noise Calculation\nThe mean-square noise voltage, $\\langle v_{n, \\text{unf}}^2 \\rangle$, is the integral of the noise power spectral density, $S_v(f)$, over the specified frequency band $[f_1, f_2]$.\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = \\int_{f_{1}}^{f_{2}} S_{v}(f) \\, df $$\nSubstituting the expression for $S_v(f)$:\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = \\int_{f_{1}}^{f_{2}} S_{w}\\left(1 + \\frac{f_{k}}{f}\\right) df = S_{w} \\int_{f_{1}}^{f_{2}} \\left(1 + \\frac{f_{k}}{f}\\right) df $$\nThe integral evaluates to:\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = S_{w} \\left[ f + f_{k} \\ln(f) \\right]_{f_{1}}^{f_{2}} = S_{w} \\left( (f_2 - f_1) + f_k (\\ln(f_2) - \\ln(f_1)) \\right) = S_{w} \\left( f_2 - f_1 + f_k \\ln\\left(\\frac{f_2}{f_1}\\right) \\right) $$\nSubstituting the given numerical values:\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = (2.25 \\times 10^{-12}) \\left( 10^4 - 10 + 200 \\ln\\left(\\frac{10^4}{10}\\right) \\right) $$\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = (2.25 \\times 10^{-12}) \\left( 9990 + 200 \\ln(1000) \\right) \\approx (2.25 \\times 10^{-12}) (9990 + 200 \\times 6.907755) $$\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle \\approx (2.25 \\times 10^{-12}) (9990 + 1381.551) = (2.25 \\times 10^{-12}) (11371.551) \\approx 2.5586 \\times 10^{-8}\\ \\text{V}^2 $$\nThe unfiltered RMS noise is the square root of this value:\n$$ V_{n, \\text{unf, rms}} = \\sqrt{2.5586 \\times 10^{-8}} \\approx 1.5996 \\times 10^{-4}\\ \\text{V} = 160.0\\ \\mu\\text{V}_{\\text{rms}} $$\n\n### Task 2: Determination of the RC Filter Cutoff Frequency $f_c$\nWith the RC filter, the output noise PSD is $S_{v, \\text{out}}(f) = S_{v}(f) |H(f)|^2$. The mean-square noise voltage is now $\\langle v_{n, \\text{filt}}^2 \\rangle$.\n$$ \\langle v_{n, \\text{filt}}^2 \\rangle = \\int_{f_{1}}^{f_{2}} S_{w}\\left(1 + \\frac{f_{k}}{f}\\right) \\frac{1}{1 + (f/f_{c})^2} \\, df $$\nThe target RMS noise is $V_{n, \\text{target}} = 100\\ \\mu\\text{V}_{\\text{rms}}$, so the target mean-square noise is:\n$$ \\langle v_{n, \\text{filt}}^2 \\rangle = (100 \\times 10^{-6})^2 = 1.0 \\times 10^{-8}\\ \\text{V}^2 $$\nWe must solve the following equation for $f_c$:\n$$ 1.0 \\times 10^{-8} = S_w \\int_{f_1}^{f_2} \\left(\\frac{f+f_k}{f}\\right) \\frac{f_c^2}{f_c^2+f^2} \\, df $$\nLet $I(f_c)$ be the integral term. We need $I(f_c) = \\frac{1.0 \\times 10^{-8}}{S_w} = \\frac{1.0 \\times 10^{-8}}{2.25 \\times 10^{-12}} = \\frac{4}{9} \\times 10^4 \\approx 4444.44$.\nThe integral can be solved analytically. We first rewrite the integrand using partial fraction decomposition:\n$$ \\frac{f+f_k}{f(1+(f/f_c)^2)} = \\frac{f_c^2(f+f_k)}{f(f^2+f_c^2)} = f_c^2 \\left( \\frac{A}{f} + \\frac{Bf+C}{f^2+f_c^2} \\right) $$\nSolving for the coefficients gives $A = f_k/f_c^2$, $B = -f_k/f_c^2$, and $C=1$.\nThe integral becomes:\n$$ I(f_c) = \\int_{f_1}^{f_2} \\left[ \\frac{f_k}{f} - \\frac{f_k f}{f^2+f_c^2} + \\frac{f_c^2}{f^2+f_c^2} \\right] df $$\nIntegrating each term:\n$$ \\int \\frac{f_k}{f} df = f_k \\ln(f) $$\n$$ \\int -\\frac{f_k f}{f^2+f_c^2} df = -\\frac{f_k}{2} \\ln(f^2+f_c^2) $$\n$$ \\int \\frac{f_c^2}{f^2+f_c^2} df = f_c \\arctan\\left(\\frac{f}{f_c}\\right) $$\nEvaluating the definite integral from $f_1$ to $f_2$:\n$$ I(f_c) = \\left[ f_k \\ln(f) - \\frac{f_k}{2} \\ln(f^2+f_c^2) + f_c \\arctan\\left(\\frac{f}{f_c}\\right) \\right]_{f_1}^{f_2} $$\n$$ I(f_c) = f_k \\ln\\left(\\frac{f_2}{f_1}\\right) - \\frac{f_k}{2} \\ln\\left(\\frac{f_2^2+f_c^2}{f_1^2+f_c^2}\\right) + f_c \\left(\\arctan\\left(\\frac{f_2}{f_c}\\right) - \\arctan\\left(\\frac{f_1}{f_c}\\right)\\right) $$\nWe need to solve $I(f_c) \\approx 4444.44$ for $f_c$. This is a transcendental equation and requires a numerical approach. We can perform an iterative search.\n\nLet's define the function $J(f_c) = I(f_c)$ with the given constants $f_1=10$, $f_2=10^4$, $f_k=200$:\n$$ J(f_c) = 200 \\ln(1000) - 100 \\ln\\left(\\frac{(10^4)^2+f_c^2}{10^2+f_c^2}\\right) + f_c \\left(\\arctan\\left(\\frac{10^4}{f_c}\\right) - \\arctan\\left(\\frac{10}{f_c}\\right)\\right) $$\nWe seek $f_c$ such that $J(f_c) = 4444.44$.\nThe unfiltered noise calculation showed that the filter must provide significant attenuation, so $f_c$ will be less than the upper integration limit, $f_2$.\nLet's test $f_c=2500\\ \\text{Hz}$:\n$J(2500) = 200(6.9078) - 100 \\ln\\left(\\frac{10^8 + 6.25 \\times 10^6}{100 + 6.25 \\times 10^6}\\right) + 2500\\left(\\arctan(4) - \\arctan(0.004)\\right)$\n$J(2500) \\approx 1381.55 - 100 \\ln(17.0) + 2500(1.3258 - 0.0040) \\approx 1381.55 - 283.32 + 3304.5 = 4402.73$.\nThis value is slightly below the target of $4444.44$. Since $J(f_c)$ is a monotonically increasing function of $f_c$, we need to test a slightly larger value for $f_c$.\n\nLet's test $f_c=2550\\ \\text{Hz}$:\n$J(2550) = 1381.55 - 100 \\ln\\left(\\frac{10^8 + (2550)^2}{100 + (2550)^2}\\right) + 2550\\left(\\arctan\\left(\\frac{10^4}{2550}\\right) - \\arctan\\left(\\frac{10}{2550}\\right)\\right)$\n$J(2550) \\approx 1381.55 - 100 \\ln(16.38) + 2550(\\arctan(3.92) - \\arctan(0.00392))$\n$J(2550) \\approx 1381.55 - 279.61 + 2550(1.3211 - 0.0039) \\approx 1381.55 - 279.61 + 3359.85 = 4461.79$.\nThis value is slightly above the target. The correct value for $f_c$ is between $2500\\ \\text{Hz}$ and $2550\\ \\text{Hz}$.\nUsing linear interpolation between these two points:\n$ f_c \\approx 2500 + (2550-2500) \\frac{4444.44 - 4402.73}{4461.79 - 4402.73} = 2500 + 50 \\frac{41.71}{59.06} \\approx 2500 + 35.31 = 2535.31\\ \\text{Hz} $\n\nLet's check $f_c=2535\\ \\text{Hz}$:\n$J(2535) \\approx 1381.55 - 100 \\ln(16.56) + 2535(\\arctan(3.945) - \\arctan(0.00394))$\n$J(2535) \\approx 1381.55 - 280.68 + 2535(1.3227 - 0.0039) \\approx 1381.55 - 280.68 + 3344.20 = 4445.07$.\nThis is extremely close to the target of $4444.44$. The value $f_c \\approx 2535\\ \\text{Hz}$ is a very accurate solution.\nThe problem requires the final answer to be rounded to three significant figures.\n$ f_c = 2535\\ \\text{Hz} \\approx 2540\\ \\text{Hz} $\nIn scientific notation, this is $2.54 \\times 10^3\\ \\text{Hz}$.",
            "answer": "$$\n\\boxed{2.54 \\times 10^{3}}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "一个鲁棒的带隙基准电压源设计始于深刻理解其输出电压如何受到内部元件参数变化的影响。本练习通过符号微分，引导您量化参考电压 $V_{\\text{ref}}$ 对关键参数的灵敏度，例如电阻比 $m$、晶体管面积比 $N$ 以及运算放大器的直流增益 $A_0$。这项实践旨在建立对电路行为的基本直觉，并帮助识别哪些参数对电路性能至关重要，需要精密控制。",
            "id": "4257169",
            "problem": "集成电路中的一个模拟带隙基准由两个偏置在不同电流密度下的匹配双极结型晶体管（BJT）和一个电阻网络构成，并通过一个高增益运算放大器闭合环路。在常规拓扑结构中，一个BJT工作在由发射极面积比缩放的电流密度下，产生一个基极-发射极电压差，该电压差被用来生成一个与绝对温度成正比（PTAT）的电压。这个PTAT电压随后由一个电阻比进行缩放，并与一个基极-发射极电压相加以合成一个温度不敏感的基准。考虑以下基于第一性原理和经过充分检验的公式的建模假设。\n\n1. 热电压为 $V_{T} = \\frac{k_{B} T}{q}$，其中 $k_{B}$ 是玻尔兹曼常数，$q$ 是元电荷，$T$ 是绝对温度。在本题中，将 $T$ 视为固定值。\n\n2. BJT的基极-发射极电压遵循 $V_{BE} = V_{T} \\ln\\!\\left(\\frac{I_{C}}{I_{S}}\\right)$，其中 $I_{C}$ 是集电极电流，$I_{S}$ 是饱和电流。假设 $I_{C}$ 由一个偏置网络固定，该网络独立于此处变化的参数。\n\n3. PTAT生成器使用两个发射极面积比为 $N$（其中 $N > 1$）的BJT，在一个电阻 $R_{1}$ 两端产生电压差 $\\Delta V_{BE} = V_{T} \\ln(N)$，从而设定电流 $I_{PTAT} = \\frac{V_{T} \\ln(N)}{R_{1}}$。在 $R_{2}$ 两端产生的PTAT电压为 $V_{PTAT} = I_{PTAT} R_{2}$。定义电阻比 $m = \\frac{R_{2}}{R_{1}}$。\n\n4. 运算放大器具有有限的直流（DC）增益 $A_{0}$，并且PTAT路径被安排在一个近单位增益的反馈配置中，使得PTAT项的闭环缩放因子被一个典型因子 $\\alpha(A_{0}) = \\frac{A_{0}}{1 + A_{0}}$ 所减小。对于一个处于类单位反馈环路中的高增益放大器，这种近似是合适的，并且忽略了诸如有限带宽和输出电阻等高阶效应。\n\n在这些假设下，基准电压可以建模为一个基极-发射极电压和一个经过缩放的PTAT项之和。从上述物理定义出发，首先推导基准电压 $V_{ref}$ 对参数 $m$、$N$、$I_{S}$ 和 $A_{0}$ 的函数依赖关系，保持 $T$ 和 $I_{C}$ 固定。然后，进行符号灵敏度分析：计算四个偏导数 $\\frac{\\partial V_{ref}}{\\partial m}$、$\\frac{\\partial V_{ref}}{\\partial N}$、$\\frac{\\partial V_{ref}}{\\partial I_{S}}$ 和 $\\frac{\\partial V_{ref}}{\\partial A_{0}}$。\n\n将最终结果表示为一个包含这四个偏导数的单行向量，顺序为 $\\left(\\frac{\\partial V_{ref}}{\\partial m}, \\frac{\\partial V_{ref}}{\\partial N}, \\frac{\\partial V_{ref}}{\\partial I_{S}}, \\frac{\\partial V_{ref}}{\\partial A_{0}}\\right)$。不需要进行数值计算。不需要四舍五入。在最终表达式中不要包含单位。",
            "solution": "该问题已经过验证，被认为是科学上合理的、提法得当且客观的。所有假设和定义在模拟集成电路设计领域都是标准的，并构成了一套自洽、一致的陈述。该问题要求进行标准的灵敏度分析，这是一项可形式化且有意义的任务。因此，我将继续推导解答。\n\n目标是首先推导基准电压 $V_{ref}$ 的表达式，然后计算其关于参数 $m$、$N$、$I_{S}$ 和 $A_{0}$ 的偏导数。\n\n首先，我们构建基准电压 $V_{ref}$ 的表达式。题目指出，$V_{ref}$ 是基极-发射极电压 $V_{BE}$ 与一个经过缩放的与绝对温度成正比（PTAT）项之和。\n\n基极-发射极电压由标准BJT模型给出：\n$$V_{BE} = V_{T} \\ln\\left(\\frac{I_{C}}{I_{S}}\\right)$$\n其中 $V_{T} = \\frac{k_{B} T}{q}$ 是热电压，$I_{C}$ 是集电极电流，$I_{S}$ 是饱和电流。在此分析中，$V_{T}$ 和 $I_{C}$ 均被视为固定参数。\n\n接下来，我们构建PTAT电压项 $V_{PTAT}$。它是由两个发射极面积比为 $N$ 的BJT的基极-发射极电压差产生的。该电压差给出为：\n$$\\Delta V_{BE} = V_{T} \\ln(N)$$\n该电压施加于电阻 $R_{1}$ 两端以产生PTAT电流：\n$$I_{PTAT} = \\frac{\\Delta V_{BE}}{R_{1}} = \\frac{V_{T} \\ln(N)}{R_{1}}$$\n此电流随后流过电阻 $R_{2}$ 以产生PTAT电压：\n$$V_{PTAT} = I_{PTAT} R_{2} = \\left(\\frac{V_{T} \\ln(N)}{R_{1}}\\right) R_{2}$$\n使用定义的电阻比 $m = \\frac{R_{2}}{R_{1}}$，$V_{PTAT}$ 的表达式简化为：\n$$V_{PTAT} = m V_{T} \\ln(N)$$\n题目规定，由于运算放大器的有限直流增益 $A_{0}$，这个PTAT电压会由一个因子 $\\alpha(A_{0})$ 进行缩放。该缩放因子给出为：\n$$\\alpha(A_{0}) = \\frac{A_{0}}{1 + A_{0}}$$\n因此，经过缩放的PTAT项为 $\\alpha(A_{0}) V_{PTAT}$。\n\n总基准电压 $V_{ref}$ 是 $V_{BE}$ 与经过缩放的 $V_{PTAT}$ 之和：\n$$V_{ref} = V_{BE} + \\alpha(A_{0}) V_{PTAT}$$\n代入各分量的表达式，我们得到 $V_{ref}$ 对指定参数的完整函数依赖关系：\n$$V_{ref}(m, N, I_{S}, A_{0}) = V_{T} \\ln\\left(\\frac{I_{C}}{I_{S}}\\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N)$$\n为便于求导，可将此表达式展开：\n$$V_{ref} = V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N)$$\n\n现在，我们通过计算四个所需的偏导数来进行灵敏度分析。\n\n1.  关于 $m$ 的偏导数：\n在这次求导中，所有其他变量（$N$、$I_{S}$、$A_{0}$）和常量（$V_{T}$、$I_{C}$）都保持不变。\n$$\\frac{\\partial V_{ref}}{\\partial m} = \\frac{\\partial}{\\partial m} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\n第一项与 $m$ 无关，因此其导数为 $0$。\n$$\\frac{\\partial V_{ref}}{\\partial m} = \\frac{A_{0}}{1 + A_{0}} V_{T} \\ln(N) \\frac{\\partial}{\\partial m}(m) = \\frac{A_{0}}{1 + A_{0}} V_{T} \\ln(N)$$\n\n2.  关于 $N$ 的偏导数：\n这里，我们将 $m$、$I_{S}$ 和 $A_{0}$ 视为常量。\n$$\\frac{\\partial V_{ref}}{\\partial N} = \\frac{\\partial}{\\partial N} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\n第一项与 $N$ 无关。我们使用法则 $\\frac{d}{dx}\\ln(x) = \\frac{1}{x}$。\n$$\\frac{\\partial V_{ref}}{\\partial N} = \\frac{A_{0}}{1 + A_{0}} m V_{T} \\frac{\\partial}{\\partial N}(\\ln(N)) = \\frac{A_{0}}{1 + A_{0}} m V_{T} \\frac{1}{N}$$\n$$\\frac{\\partial V_{ref}}{\\partial N} = \\frac{m V_{T} A_{0}}{N(1 + A_{0})}$$\n\n3.  关于 $I_{S}$ 的偏导数：\n这里，我们将 $m$、$N$ 和 $A_{0}$ 视为常量。\n$$\\frac{\\partial V_{ref}}{\\partial I_{S}} = \\frac{\\partial}{\\partial I_{S}} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\n第二项与 $I_{S}$ 无关。\n$$\\frac{\\partial V_{ref}}{\\partial I_{S}} = V_{T} \\frac{\\partial}{\\partial I_{S}}( \\ln(I_{C}) - \\ln(I_{S}) ) = V_{T} \\left( 0 - \\frac{1}{I_{S}} \\right)$$\n$$\\frac{\\partial V_{ref}}{\\partial I_{S}} = -\\frac{V_{T}}{I_{S}}$$\n\n4.  关于 $A_{0}$ 的偏导数：\n这里，我们将 $m$、$N$ 和 $I_{S}$ 视为常量。\n$$\\frac{\\partial V_{ref}}{\\partial A_{0}} = \\frac{\\partial}{\\partial A_{0}} \\left[ V_{T} \\left( \\ln(I_{C}) - \\ln(I_{S}) \\right) + \\frac{A_{0}}{1 + A_{0}} m V_{T} \\ln(N) \\right]$$\n第一项与 $A_{0}$ 无关。求导需要对项 $\\frac{A_{0}}{1 + A_{0}}$ 使用商法则。\n设 $u = A_{0}$ 且 $v = 1 + A_{0}$。则 $u' = 1$ 且 $v' = 1$。\n$$\\frac{\\partial}{\\partial A_{0}}\\left( \\frac{A_{0}}{1 + A_{0}} \\right) = \\frac{u'v - uv'}{v^{2}} = \\frac{1(1 + A_{0}) - A_{0}(1)}{(1 + A_{0})^{2}} = \\frac{1}{(1 + A_{0})^{2}}$$\n将此结果代回 $V_{ref}$ 的偏导数表达式中：\n$$\\frac{\\partial V_{ref}}{\\partial A_{0}} = m V_{T} \\ln(N) \\left( \\frac{1}{(1 + A_{0})^{2}} \\right)$$\n$$\\frac{\\partial V_{ref}}{\\partial A_{0}} = \\frac{m V_{T} \\ln(N)}{(1 + A_{0})^{2}}$$\n\n四个偏导数已经计算完毕。最终结果是按指定顺序包含这些表达式的行向量。",
            "answer": "$$\n\\boxed{\n\\left( \\frac{A_{0} V_{T} \\ln(N)}{1 + A_{0}}, \\frac{m V_{T} A_{0}}{N(1 + A_{0})}, -\\frac{V_{T}}{I_{S}}, \\frac{m V_{T} \\ln(N)}{(1 + A_{0})^{2}} \\right)\n}\n$$"
        },
        {
            "introduction": "在理解了电路的基本灵敏度之后，设计的下一步是通过修调来校正制造过程中的工艺偏差。本练习聚焦于数字修调技术，并探讨了由离散修调步长引入的、不可避免的量化误差。通过计算最差情况下的残余误差，您将学会如何量化修调所能达到的精度极限，这是设计高精度电路的一项关键技能。",
            "id": "4257162",
            "problem": "一种硅带隙基准电压源采用了基极-发射极电压和一个按比例缩放的与绝对温度成正比的项的典型求和形式，其比例因子用 $m$ 表示。在生产过程中，$m$ 通过一个6位电子熔丝（eFuse）梯形网络进行数字修调，该网络相对于标称设计值 $m_0$ 以 $0.1\\%$ 的均匀分数步长调整 $m$。数字修调码 $c \\in \\{-32,-31,\\dots,+31\\}$ 实现\n$$\nm(c) = m_0\\left(1 + s\\,c\\right),\n$$\n其中分数步长为 $s = 10^{-3}$。由于工艺变化，未修调的比例因子会偏离 $m_0$ 一个未知的分数偏移量 $\\delta$，因此校正后的目标值为 $m_{\\mathrm{target}} = m_0(1+\\delta)$，其中 $|\\delta| \\le B$，边界值为 $B = 3.0\\times 10^{-2}$。修调算法通过四舍五入到最接近的可用码值来选择 $c$，以最小化绝对误差 $|m_{\\mathrm{target}} - m(c)|$，并受限于在端点处的削波处理。\n\n从均匀量化和离散码值范围的定义出发，推导出最坏情况下的残余分数误差\n$$\n\\epsilon_{\\max} = \\max_{|\\delta|\\le B}\\left|\\frac{m_{\\mathrm{target}} - m(c^{\\star}(\\delta))}{m_0}\\right|,\n$$\n其中 $c^{\\star}(\\delta)$ 是针对给定 $\\delta$ 所选的修调码。假设当边界值 $B$ 严格位于梯形网络可实现的分数范围内时，均匀量化模型是有效的。将最终答案表示为单个小数，不使用百分号。无需进行四舍五入。",
            "solution": "该问题被验证为是自洽的、有科学依据且定义明确的。所有给定的数据、定义和条件都是一致且充分的，足以推导出唯一解。所描述的情景是数字修调模拟电路设计中的一个标准问题，具体来说是分析线性修调系统的量化误差。\n\n**步骤1：提取已知条件**\n-   修调后的比例因子：$m(c) = m_0(1 + sc)$\n-   数字修调码：$c \\in \\{-32, -31, \\dots, +31\\}$，一个包含$64$个整数值的集合。\n-   分数步长：$s = 10^{-3}$，对应于 $0.1\\%$。\n-   目标比例因子：$m_{\\mathrm{target}} = m_0(1+\\delta)$，其中 $\\delta$ 是一个未知的的分数偏移量。\n-   偏移量的边界：$|\\delta| \\le B$，其中 $B = 3.0 \\times 10^{-2}$。\n-   修调目标：通过选择最优整数码 $c^{\\star}$ 来最小化绝对误差 $|m_{\\mathrm{target}} - m(c)|$。方法是四舍五入到最接近的可用码值。\n-   削波处理：如果理想码值超出范围，所选码值将被削波至可用范围的端点。\n-   待求量：最坏情况下的残余分数误差，$\\epsilon_{\\max} = \\max_{|\\delta|\\le B}\\left|\\frac{m_{\\mathrm{target}} - m(c^{\\star}(\\delta))}{m_0}\\right|$。\n-   假设：均匀量化模型有效，因为边界值 $B$ 严格位于修调梯形网络可实现的分数范围内。\n\n**步骤2：问题分析与求解推导**\n残余分数误差，记为 $\\epsilon(\\delta)$，定义为：\n$$\n\\epsilon(\\delta) = \\left|\\frac{m_{\\mathrm{target}} - m(c^{\\star}(\\delta))}{m_0}\\right|\n$$\n代入给定的 $m_{\\mathrm{target}}$ 和 $m(c)$ 的表达式：\n$$\n\\epsilon(\\delta) = \\left|\\frac{m_0(1+\\delta) - m_0(1+sc^{\\star})}{m_0}\\right|\n$$\n公共因子 $m_0$ 可以消去，表达式简化为：\n$$\n\\epsilon(\\delta) = |(1+\\delta) - (1+sc^{\\star})| = |\\delta - sc^{\\star}|\n$$\n题目指出，修调算法选择整数码 $c^{\\star}$ 以最小化此误差 $|\\delta - sc^{\\star}|$。这等价于最小化距离 $| \\frac{\\delta}{s} - c^{\\star} |$。对于一个整数码 $c^{\\star}$，当 $c^{\\star}$ 是最接近连续值 $\\frac{\\delta}{s}$ 的整数时，该距离最小。这个过程称为四舍五入。\n$$\nc^{\\star}(\\delta) = \\text{round}\\left(\\frac{\\delta}{s}\\right)\n$$\n我们现在必须考虑修调码 $c \\in \\{-32, \\dots, +31\\}$ 的有限范围以及削波的可能性。初始分数偏移量的范围由 $|\\delta| \\le B$ 给出，即 $\\delta \\in [-3.0 \\times 10^{-2}, 3.0 \\times 10^{-2}]$。让我们确定“理想”连续码 $\\frac{\\delta}{s}$ 的相应范围：\n$$\n\\frac{\\delta}{s} \\in \\left[\\frac{-3.0 \\times 10^{-2}}{10^{-3}}, \\frac{3.0 \\times 10^{-2}}{10^{-3}}\\right] = [-30, 30]\n$$\n可用的整数码在集合 $\\{-32, -31, \\dots, +30, +31\\}$ 中。理想码 $\\frac{\\delta}{s}$ 始终在范围 $[-30, 30]$ 内。当此区间内的任何实数四舍五入到最接近的整数时，结果也将位于整数区间 $[-30, 30]$ 内。由于四舍五入后的码值区间 $[-30, 30]$ 是可用码值 $\\{-32, \\dots, +31\\}$ 的严格子集，因此对于所考虑的任何 $\\delta$，选择的码值 $c^{\\star}$ 永远不需要在端点处进行削波。这证实了问题中关于均匀量化模型有效性的假设。\n\n排除了削波的可能性后，问题简化为对均匀量化误差的标准分析。残余分数误差由下式给出：\n$$\n\\epsilon(\\delta) = \\left|\\delta - s \\cdot \\text{round}\\left(\\frac{\\delta}{s}\\right)\\right|\n$$\n我们可以提出步长因子 $s$：\n$$\n\\epsilon(\\delta) = s \\left|\\frac{\\delta}{s} - \\text{round}\\left(\\frac{\\delta}{s}\\right)\\right|\n$$\n设变量 $x = \\frac{\\delta}{s}$。误差的表达式变为 $s|x - \\text{round}(x)|$。项 $|x - \\text{round}(x)|$ 是标准四舍五入操作的量化误差的大小。该项的最大值为 $0.5$。这种最坏情况发生在 $x$ 正好位于两个整数中间时，即对于某个整数 $k$，$x = k + 0.5$。\n\n例如，考虑 $x = 0.5$ 的情况。这对应于初始偏移量 $\\delta = x \\cdot s = 0.5 \\times 10^{-3} = 0.0005$。这个 $\\delta$ 值在允许的边界内，因为 $|0.0005| \\le 0.03$。对于这个 $\\delta$，最优码 $c^{\\star}$ 将是 $0$ 或 $1$，具体取决于四舍五入的平局规则。\n-   如果 $c^{\\star} = 0$，误差为 $|\\delta - s \\cdot 0| = |0.0005| = 0.0005$。\n-   如果 $c^{\\star} = 1$，误差为 $|\\delta - s \\cdot 1| = |0.0005 - 0.001| = |-0.0005| = 0.0005$。\n在两种情况下，误差的大小是相同的。\n\n最坏情况下的残余分数误差 $\\epsilon_{\\max}$ 是 $\\epsilon(\\delta)$ 在 $\\delta$ 的整个范围内的最大值。这在量化误差项最大化时发生：\n$$\n\\epsilon_{\\max} = \\max_{|\\delta|\\le B} \\left(s \\left|\\frac{\\delta}{s} - \\text{round}\\left(\\frac{\\delta}{s}\\right)\\right|\\right) = s \\cdot \\max_{x} |x - \\text{round}(x)|\n$$\n$$\n\\epsilon_{\\max} = s \\cdot (0.5)\n$$\n代入 $s = 10^{-3}$ 的值：\n$$\n\\epsilon_{\\max} = 10^{-3} \\times 0.5 = 0.0005\n$$\n这表示在修调过程完成后可能存在的最大分数误差，其值对应于最小修调步长的一半。",
            "answer": "$$\n\\boxed{0.0005}\n$$"
        },
        {
            "introduction": "在通过设计和修调解决了直流（DC）精度问题后，交流（AC）性能，特别是噪声，成为决定电路优劣的关键。本练习提供了一个实际的设计场景，要求您对一个真实的噪声功率谱密度进行积分，以计算总输出噪声，并在此基础上设计一个后置滤波器来满足特定的噪声指标。这项实践将理论噪声模型与实际电路的性能规格联系起来，是迈向高性能模拟设计的关键一步。",
            "id": "4257105",
            "problem": "一个带有片上微调的互补金属氧化物半导体（CMOS）带隙基准将用于电子设计自动化（EDA）验证流程中，该流程在指定带宽内强制执行噪声预算。在将所有核心电路、电阻网络和缓冲器的贡献折算到输出后，经过微调的基准的输出参考电压噪声功率谱密度（PSD）可以建模为白噪声基底和闪烁噪声项之和：\n- 幅度为 $S_{w}^{1/2} = 1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}}$ 的白噪声基底谱密度（因此 $S_{w} = \\left(1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}}\\right)^{2}$，单位为 $\\text{V}^{2}/\\text{Hz}$），\n- 闪烁噪声转角频率 $f_{k} = 200\\ \\text{Hz}$，闪烁噪声密度为 $S_{w}\\, f_{k}/f$，因此对于 $f > 0$，总功率谱密度为 $S_{v}(f) = S_{w}\\left(1 + \\dfrac{f_{k}}{f}\\right)$。\n\n规范将噪声测量频带定义为 $f \\in [f_{1}, f_{2}]$，其中 $f_{1} = 10\\ \\text{Hz}$ 且 $f_{2} = 10^{4}\\ \\text{Hz}$。最初，假定输出路径在该频带内是平坦的（单位增益）。之后，您可以添加一个一阶阻容（RC）后置滤波器，其直流（DC）增益为单位增益，传递函数幅值平方为 $|H(f)|^{2} = \\dfrac{1}{1 + \\left(\\dfrac{f}{f_{c}}\\right)^{2}}$，其中 $f_{c}$ 是 $-3\\ \\text{dB}$ 截止频率。\n\n任务：\n1) 从均方噪声是PSD对频率的积分这一定义出发，计算在没有RC滤波器的情况下，在 $[f_{1}, f_{2}]$ 频带内的集成输出均方根（RMS）噪声，单位为 $\\text{V}_{\\text{rms}}$。\n2) 确定单极点RC滤波器的所需 $-3\\ \\text{dB}$ 截止频率 $f_{c}$（单位为 $\\text{Hz}$），使得在 $[f_{1}, f_{2}]$ 频带内的集成输出RMS噪声等于目标值 $100\\ \\mu\\text{V}_{\\text{rms}}$。\n\n仅使用噪声积分和线性时不变滤波的基本原理。将您最终报告的答案四舍五入到三位有效数字。最终频率以 $\\text{Hz}$ 表示。您最终报告的答案应仅为所需的截止频率 $f_{c}$。",
            "solution": "首先验证问题，以确保其科学上合理、提法明确且客观。\n\n### 步骤 1：提取已知条件\n- 白噪声基底谱密度幅度：$S_{w}^{1/2} = 1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}}$\n- 白噪声基底PSD：$S_{w} = (1.5\\ \\mu\\text{V}/\\sqrt{\\text{Hz}})^{2} = 2.25 \\times 10^{-12}\\ \\text{V}^{2}/\\text{Hz}$\n- 闪烁噪声转角频率：$f_{k} = 200\\ \\text{Hz}$\n- 总噪声PSD：$S_{v}(f) = S_{w}\\left(1 + \\dfrac{f_{k}}{f}\\right)$，对于 $f > 0$\n- 噪声积分频带：$[f_{1}, f_{2}]$，其中 $f_{1} = 10\\ \\text{Hz}$ 且 $f_{2} = 10^{4}\\ \\text{Hz}$\n- RC滤波器传递函数幅值平方：$|H(f)|^{2} = \\dfrac{1}{1 + \\left(\\dfrac{f}{f_{c}}\\right)^{2}}$\n- 带滤波器的目标输出RMS噪声：$V_{n, \\text{target}} = 100\\ \\mu\\text{V}_{\\text{rms}}$\n- 问题要求解截止频率 $f_c$。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学合理性：**该问题使用CMOS电路中的标准噪声模型（白噪声 + $1/f$ 噪声），并应用了线性系统理论的基本原理（噪声积分和滤波）。所涉及的概念和数值在物理上是现实的，并且是模拟集成电路设计领域的标准。\n- **提法明确性：**问题陈述清晰，提供了所有必要的参数。目标是找到一个满足给定性能约束的特定设计参数（$f_c$）。其底层的数学函数是单调的，确保存在唯一解。\n- **客观性：**问题以精确的技术语言表述，没有主观或模糊的术语。\n\n### 步骤 3：结论与行动\n问题有效。将提供完整解答。\n\n### 任务 1：未滤波的RMS噪声计算\n均方噪声电压 $\\langle v_{n, \\text{unf}}^2 \\rangle$ 是噪声功率谱密度 $S_v(f)$ 在指定频带 $[f_1, f_2]$ 上的积分。\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = \\int_{f_{1}}^{f_{2}} S_{v}(f) \\, df $$\n代入 $S_v(f)$ 的表达式：\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = \\int_{f_{1}}^{f_{2}} S_{w}\\left(1 + \\frac{f_{k}}{f}\\right) df = S_{w} \\int_{f_{1}}^{f_{2}} \\left(1 + \\frac{f_{k}}{f}\\right) df $$\n积分计算结果为：\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = S_{w} \\left[ f + f_{k} \\ln(f) \\right]_{f_{1}}^{f_{2}} = S_{w} \\left( (f_2 - f_1) + f_k (\\ln(f_2) - \\ln(f_1)) \\right) = S_{w} \\left( f_2 - f_1 + f_k \\ln\\left(\\frac{f_2}{f_1}\\right) \\right) $$\n代入给定的数值：\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = (2.25 \\times 10^{-12}) \\left( 10^4 - 10 + 200 \\ln\\left(\\frac{10^4}{10}\\right) \\right) $$\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle = (2.25 \\times 10^{-12}) \\left( 9990 + 200 \\ln(1000) \\right) \\approx (2.25 \\times 10^{-12}) (9990 + 200 \\times 6.907755) $$\n$$ \\langle v_{n, \\text{unf}}^2 \\rangle \\approx (2.25 \\times 10^{-12}) (9990 + 1381.551) = (2.25 \\times 10^{-12}) (11371.551) \\approx 2.5586 \\times 10^{-8}\\ \\text{V}^2 $$\n未滤波的RMS噪声是该值的平方根：\n$$ V_{n, \\text{unf, rms}} = \\sqrt{2.5586 \\times 10^{-8}} \\approx 1.5996 \\times 10^{-4}\\ \\text{V} = 160.0\\ \\mu\\text{V}_{\\text{rms}} $$\n\n### 任务 2：确定RC滤波器截止频率 $f_c$\n加入RC滤波器后，输出噪声PSD为 $S_{v, \\text{out}}(f) = S_{v}(f) |H(f)|^2$。此时均方噪声电压为 $\\langle v_{n, \\text{filt}}^2 \\rangle$。\n$$ \\langle v_{n, \\text{filt}}^2 \\rangle = \\int_{f_{1}}^{f_{2}} S_{w}\\left(1 + \\frac{f_{k}}{f}\\right) \\frac{1}{1 + (f/f_{c})^2} \\, df $$\n目标RMS噪声为 $V_{n, \\text{target}} = 100\\ \\mu\\text{V}_{\\text{rms}}$，因此目标均方噪声为：\n$$ \\langle v_{n, \\text{filt}}^2 \\rangle = (100 \\times 10^{-6})^2 = 1.0 \\times 10^{-8}\\ \\text{V}^2 $$\n我们必须求解以下关于 $f_c$ 的方程：\n$$ 1.0 \\times 10^{-8} = S_w \\int_{f_1}^{f_2} \\left(\\frac{f+f_k}{f}\\right) \\frac{f_c^2}{f_c^2+f^2} \\, df $$\n令 $I(f_c)$ 为积分项。我们需要 $I(f_c) = \\frac{1.0 \\times 10^{-8}}{S_w} = \\frac{1.0 \\times 10^{-8}}{2.25 \\times 10^{-12}} = \\frac{4}{9} \\times 10^4 \\approx 4444.44$。\n该积分可以解析求解。我们首先使用部分分式分解重写被积函数：\n$$ \\frac{f+f_k}{f(1+(f/f_c)^2)} = \\frac{f_c^2(f+f_k)}{f(f^2+f_c^2)} = f_c^2 \\left( \\frac{A}{f} + \\frac{Bf+C}{f^2+f_c^2} \\right) $$\n求解系数可得 $A = f_k/f_c^2$, $B = -f_k/f_c^2$ 及 $C=1$。\n积分变为：\n$$ I(f_c) = \\int_{f_1}^{f_2} \\left[ \\frac{f_k}{f} - \\frac{f_k f}{f^2+f_c^2} + \\frac{f_c^2}{f^2+f_c^2} \\right] df $$\n对每一项进行积分：\n$$ \\int \\frac{f_k}{f} df = f_k \\ln(f) $$\n$$ \\int -\\frac{f_k f}{f^2+f_c^2} df = -\\frac{f_k}{2} \\ln(f^2+f_c^2) $$\n$$ \\int \\frac{f_c^2}{f^2+f_c^2} df = f_c \\arctan\\left(\\frac{f}{f_c}\\right) $$\n计算从 $f_1$ 到 $f_2$ 的定积分：\n$$ I(f_c) = \\left[ f_k \\ln(f) - \\frac{f_k}{2} \\ln(f^2+f_c^2) + f_c \\arctan\\left(\\frac{f}{f_c}\\right) \\right]_{f_1}^{f_2} $$\n$$ I(f_c) = f_k \\ln\\left(\\frac{f_2}{f_1}\\right) - \\frac{f_k}{2} \\ln\\left(\\frac{f_2^2+f_c^2}{f_1^2+f_c^2}\\right) + f_c \\left(\\arctan\\left(\\frac{f_2}{f_c}\\right) - \\arctan\\left(\\frac{f_1}{f_c}\\right)\\right) $$\n我们需要求解 $I(f_c) \\approx 4444.44$ 以求得 $f_c$。这是一个超越方程，需要使用数值方法求解。我们可以进行迭代搜索。\n\n让我们定义函数 $J(f_c) = I(f_c)$，其中给定常数 $f_1=10$, $f_2=10^4$, $f_k=200$：\n$$ J(f_c) = 200 \\ln(1000) - 100 \\ln\\left(\\frac{(10^4)^2+f_c^2}{10^2+f_c^2}\\right) + f_c \\left(\\arctan\\left(\\frac{10^4}{f_c}\\right) - \\arctan\\left(\\frac{10}{f_c}\\right)\\right) $$\n我们寻找使 $J(f_c) = 4444.44$ 成立的 $f_c$。\n未滤波噪声的计算表明，滤波器必须提供显著的衰减，因此 $f_c$ 将小于积分上限 $f_2$。\n我们测试 $f_c=2500\\ \\text{Hz}$：\n$J(2500) = 200(6.9078) - 100 \\ln\\left(\\frac{10^8 + 6.25 \\times 10^6}{100 + 6.25 \\times 10^6}\\right) + 2500\\left(\\arctan(4) - \\arctan(0.004)\\right)$\n$J(2500) \\approx 1381.55 - 100 \\ln(17.0) + 2500(1.3258 - 0.0040) \\approx 1381.55 - 283.32 + 3304.5 = 4402.73$。\n这个值略低于目标值 $4444.44$。由于 $J(f_c)$ 是 $f_c$ 的单调递增函数，我们需要测试一个稍大的 $f_c$ 值。\n\n我们测试 $f_c=2550\\ \\text{Hz}$：\n$J(2550) = 1381.55 - 100 \\ln\\left(\\frac{10^8 + (2550)^2}{100 + (2550)^2}\\right) + 2550\\left(\\arctan\\left(\\frac{10^4}{2550}\\right) - \\arctan\\left(\\frac{10}{2550}\\right)\\right)$\n$J(2550) \\approx 1381.55 - 100 \\ln(16.38) + 2550(\\arctan(3.92) - \\arctan(0.00392))$\n$J(2550) \\approx 1381.55 - 279.61 + 2550(1.3211 - 0.0039) \\approx 1381.55 - 279.61 + 3359.85 = 4461.79$。\n这个值略高于目标值。$f_c$ 的正确值在 $2500\\ \\text{Hz}$ 和 $2550\\ \\text{Hz}$ 之间。\n使用这两点之间的线性插值：\n$ f_c \\approx 2500 + (2550-2500) \\frac{4444.44 - 4402.73}{4461.79 - 4402.73} = 2500 + 50 \\frac{41.71}{59.06} \\approx 2500 + 35.31 = 2535.31\\ \\text{Hz} $\n\n我们检验 $f_c=2535\\ \\text{Hz}$：\n$J(2535) \\approx 1381.55 - 100 \\ln(16.56) + 2535(\\arctan(3.945) - \\arctan(0.00394))$\n$J(2535) \\approx 1381.55 - 280.68 + 2535(1.3227 - 0.0039) \\approx 1381.55 - 280.68 + 3344.20 = 4445.07$。\n这非常接近目标值 $4444.44$。$f_c \\approx 2535\\ \\text{Hz}$ 是一个非常精确的解。\n问题要求最终答案四舍五入到三位有效数字。\n$ f_c = 2535\\ \\text{Hz} \\approx 2540\\ \\text{Hz} $\n用科学记数法表示，即为 $2.54 \\times 10^3\\ \\text{Hz}$。",
            "answer": "$$\n\\boxed{2.54 \\times 10^{3}}\n$$"
        }
    ]
}
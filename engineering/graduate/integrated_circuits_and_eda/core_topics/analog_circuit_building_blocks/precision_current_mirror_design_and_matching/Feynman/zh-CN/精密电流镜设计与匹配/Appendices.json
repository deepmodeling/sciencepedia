{
    "hands_on_practices": [
        {
            "introduction": "在低功耗模拟集成电路设计中，将晶体管偏置在亚阈值区是一种常用技术。然而，这种选择对电路的匹配精度有着深远的影响。本练习将引导您从第一性原理出发，推导在强反型区和亚阈值区这两种不同工作状态下，为达到相同的电流失配精度，所需的晶体管面积应如何缩放。通过这个练习，您将深刻理解晶体管的跨导效率($g_m/I_D$)如何决定其对工艺偏差的敏感度，并掌握在功耗和面积之间进行权衡的关键设计原则。",
            "id": "1281135",
            "problem": "一位模拟集成电路设计师的任务是为一个现有的电流镜创建一个低功耗版本。电流镜由两个名义上相同的晶体管组成，其匹配性能受到随机工艺变化的限制。这种电流失配的主要来源是晶体管阈值电压 $V_{th}$ 的统计变化。一个广泛使用的模型指出，两个此类晶体管之间阈值电压差的标准差 $\\sigma_{\\Delta V_{th}}$ 与晶体管栅极面积 $A=WL$ 的平方根成反比。这可以表示为 $\\sigma_{\\Delta V_{th}} = \\frac{K}{\\sqrt{A}}$，其中 $K$ 是一个与工艺相关的常数，单位为 $\\text{V} \\cdot \\mu\\text{m}$。\n\n初始设计中，两个晶体管都工作在强反型饱和区，其中漏极电流 $I_D$ 近似与 $(V_{GS} - V_{th})^2$ 成正比。该设计的晶体管栅极面积为 $A_{si}$，过驱动电压为 $V_{OV} = V_{GS} - V_{th}$。\n\n对于一个新的超低功耗应用，必须重新设计该电流镜，使其工作在亚阈值（弱反型）区。在该区域，漏极电流 $I_D$ 对 $V_{th}$ 呈现指数依赖关系，近似为 $I_D \\propto \\exp\\left(-\\frac{V_{th}}{n V_T}\\right)$，其中 $n$ 是亚阈值斜率因子（一个通常在 1 和 2 之间的无量纲常数），$V_T$ 是热电压。\n\n为确保新设计的精度与原始设计相当，两个工作点的相对电流失配的标准差 $\\frac{\\sigma_{I_D}}{I_D}$ 必须相同。假设 $V_{th}$ 的失配是电流失配的唯一原因，推导出一个缩放因子 $\\frac{A_{sub}}{A_{si}}$ 的表达式，该表达式将亚阈值设计所需的栅极面积 $A_{sub}$ 与原始强反型区域的面积 $A_{si}$ 联系起来。你的答案应以 $V_{OV}$、$n$ 和 $V_T$ 表示。",
            "solution": "我们通过面积缩放定律来建模两个名义上相同的晶体管之间的阈值失配\n$$\n\\sigma_{\\Delta V_{th}}=\\frac{K}{\\sqrt{A}},\n$$\n其中 $A=WL$ 是栅极面积，$K$ 是一个与工艺相关的常数。假设阈值失配是电流失配的唯一来源，相对电流失配的标准差可由一阶灵敏度得出：\n$$\n\\frac{\\sigma_{I_{D}}}{I_{D}}=\\left|\\frac{\\partial \\ln I_{D}}{\\partial V_{th}}\\right|\\sigma_{\\Delta V_{th}}.\n$$\n\n对于强反型饱和区，电流为 $I_{D}\\propto (V_{GS}-V_{th})^{2}=(V_{OV})^{2}$，所以\n$$\n\\frac{\\partial \\ln I_{D}}{\\partial V_{th}}=\\frac{1}{I_{D}}\\frac{\\partial I_{D}}{\\partial V_{th}}=\\frac{1}{I_{D}}\\cdot 2(V_{GS}-V_{th})\\cdot(-1)=-\\frac{2}{V_{OV}}.\n$$\n因此，\n$$\n\\left(\\frac{\\sigma_{I_{D}}}{I_{D}}\\right)_{si}=\\frac{2}{V_{OV}}\\cdot\\frac{K}{\\sqrt{A_{si}}}.\n$$\n\n对于亚阈值操作，$I_{D}\\propto \\exp\\!\\left(\\frac{V_{GS}-V_{th}}{nV_{T}}\\right)$，因此\n$$\n\\frac{\\partial \\ln I_{D}}{\\partial V_{th}}=-\\frac{1}{nV_{T}},\n$$\n并且\n$$\n\\left(\\frac{\\sigma_{I_{D}}}{I_{D}}\\right)_{sub}=\\frac{1}{nV_{T}}\\cdot\\frac{K}{\\sqrt{A_{sub}}}.\n$$\n\n要求两种情况下的相对失配相同，可得\n$$\n\\frac{2}{V_{OV}}\\cdot\\frac{K}{\\sqrt{A_{si}}}=\\frac{1}{nV_{T}}\\cdot\\frac{K}{\\sqrt{A_{sub}}}.\n$$\n消去 $K$ 并求解面积比：\n$$\n\\frac{2}{V_{OV}}=\\frac{1}{nV_{T}}\\cdot\\frac{\\sqrt{A_{si}}}{\\sqrt{A_{sub}}}\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{\\sqrt{A_{sub}}}{\\sqrt{A_{si}}}=\\frac{V_{OV}}{2nV_{T}}\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{A_{sub}}{A_{si}}=\\left(\\frac{V_{OV}}{2nV_{T}}\\right)^{2}.\n$$",
            "answer": "$$\\boxed{\\left(\\frac{V_{OV}}{2 n V_{T}}\\right)^{2}}$$"
        },
        {
            "introduction": "在为特定应用选择晶体管技术时，设计者必须权衡不同器件的内在优势。双极结型晶体管(BJT)和金属氧化物半导体场效应晶体管(MOSFET)是模拟电路的两种基石，它们在电流镜匹配性能上表现出根本性的差异。本练习要求您基于两种器件的物理模型和广泛应用的失配缩放定律，比较它们在达到相同精度目标时所需的有源区面积。通过计算BJT和MOSFET的面积比，您将量化理解BJT在跨导效率($g_m/I_D = I_C/U_T$)上的天然优势，以及这种优势如何直接转化为更节省面积的高精度设计。",
            "id": "4291190",
            "problem": "一个精密 $1{:}1$ 电流镜必须用两种工艺实现，并设计以达到相同的随机失配目标。一种实现使用双极结型晶体管 (BJT) 对，另一种使用金属氧化物半导体场效应晶体管 (MOSFET) 对。两个电流镜都在温度 $T = 300\\,\\mathrm{K}$ 和相同的偏置条件下工作，这确保了每对器件内具有相等的标称电流和相同的器件面积。假设：\n\n- 对于 BJT 对，主要的随机失配机制是在固定电流下基极-发射极电压 $V_{\\mathrm{BE}}$ 的差异，其标准差遵循类 Pelgrom 面积缩放规律 $\\sigma(V_{\\mathrm{BE}}) = A_{V_{\\mathrm{BE}}}/\\sqrt{A_E}$，其中 $A_E$ 是发射极面积，且 $A_{V_{\\mathrm{BE}}} = 0.25\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$。\n\n- 对于 MOSFET 对，主要的随机失配机制是在固定栅极偏置下阈值电压 $V_{\\mathrm{TH}}$ 的差异，其标准差为 $\\sigma(V_{\\mathrm{TH}}) = A_{V_{\\mathrm{TH}}}/\\sqrt{W L}$，其中 $W L$ 是器件有源区面积，且 $A_{V_{\\mathrm{TH}}} = 3.0\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$。这些器件工作在强反型饱和区，过驱动电压为 $V_{\\mathrm{OV}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH}} = 0.200\\,\\mathrm{V}$。\n\n- 热电压为 $U_T = k_B T / q$，其中 $k_B$ 是玻尔兹曼常数，$q$ 是元电荷。\n\n- 每对中两个晶体管之间的失配是不相关的。\n\n从每种工艺的器件输运第一性原理出发，并使用上述经过充分检验的失配缩放定律，推导每个电流镜的 $3$ 倍标准差相对电流比误差的表达式，并强制要求两种实现都达到 $0.01$ 的相同 $3\\sigma$ 相对误差目标。根据此要求，确定所需的 MOSFET 有源区面积与所需的 BJT 发射极面积之比，即无量纲量\n$$\n\\frac{W L}{A_E}.\n$$\n将最终结果表示为一个纯数，并将答案四舍五入到四位有效数字。最终方框内的值不应包含单位。",
            "solution": "目标是确定为达到相同的指定电流匹配精度，所需的金属氧化物半导体场效应晶体管 (MOSFET) 对的有源区面积与双极结型晶体管 (BJT) 对的发射极面积之比，即 $\\frac{W L}{A_E}$。问题陈述，两个 $1{:}1$ 电流镜都必须具有 $0.01$ 的 $3$ 倍标准差 ($3\\sigma$) 相对电流比误差。\n\n首先，我们分析 BJT 电流镜。工作在正向有源区的 BJT 的集电极电流 $I_C$ 由 Ebers-Moll 模型描述：\n$$I_C = I_S \\exp\\left(\\frac{V_{\\mathrm{BE}}}{U_T}\\right)$$\n其中 $I_S$ 是饱和电流，$V_{\\mathrm{BE}}$ 是基极-发射极电压，$U_T = k_B T / q$ 是热电压。为了确定 $V_{\\mathrm{BE}}$ 的失配对输出电流的影响，我们计算 $I_C$ 对 $V_{\\mathrm{BE}}$ 的灵敏度。跨导 $g_m$ 由下式给出：\n$$g_{m, \\text{BJT}} = \\frac{\\partial I_C}{\\partial V_{\\mathrm{BE}}} = \\frac{I_S}{U_T} \\exp\\left(\\frac{V_{\\mathrm{BE}}}{U_T}\\right) = \\frac{I_C}{U_T}$$\n对于 $V_{\\mathrm{BE}}$ 的一个小的扰动，表示为 $\\Delta V_{\\mathrm{BE}}$，集电极电流的相应变化 $\\Delta I_C$ 可以近似为 $\\Delta I_C \\approx g_{m, \\text{BJT}} \\Delta V_{\\mathrm{BE}}$。因此，相对电流误差为：\n$$\\frac{\\Delta I_C}{I_C} \\approx \\frac{g_{m, \\text{BJT}}}{I_C} \\Delta V_{\\mathrm{BE}} = \\frac{1}{U_T} \\Delta V_{\\mathrm{BE}}$$\n根据不确定性传播原理，相对电流误差的标准差 $\\sigma\\left(\\frac{\\Delta I_C}{I_C}\\right)$ 与 $V_{\\mathrm{BE}}$ 失配的标准差 $\\sigma(\\Delta V_{\\mathrm{BE}})$ 之间的关系为：\n$$\\sigma\\left(\\frac{\\Delta I_C}{I_C}\\right) = \\frac{1}{U_T} \\sigma(\\Delta V_{\\mathrm{BE}})$$\n问题给出了两个晶体管之间 $V_{\\mathrm{BE}}$ 差异的标准差的缩放定律为 $\\sigma(\\Delta V_{\\mathrm{BE}}) = \\frac{A_{V_{\\mathrm{BE}}}}{\\sqrt{A_E}}$，其中 $A_{V_{\\mathrm{BE}}}$ 是匹配参数，$A_E$ 是每个晶体管的发射极面积。将此代入前一个方程得到：\n$$\\sigma\\left(\\frac{\\Delta I_C}{I_C}\\right) = \\frac{A_{V_{\\mathrm{BE}}}}{U_T \\sqrt{A_E}}$$\n要求的匹配精度是 $0.01$ 的 $3\\sigma$ 相对误差：\n$$3\\sigma\\left(\\frac{\\Delta I_C}{I_C}\\right) = 3 \\frac{A_{V_{\\mathrm{BE}}}}{U_T \\sqrt{A_E}} = 0.01$$\n由此，我们可以表示出所需的发射极面积 $A_E$：\n$$A_E = \\left(\\frac{3 A_{V_{\\mathrm{BE}}}}{0.01 \\cdot U_T}\\right)^2$$\n\n接下来，我们分析 MOSFET 电流镜。工作在强反型和饱和区的 MOSFET 的漏极电流 $I_D$ 由平方律模型给出：\n$$I_D = \\frac{1}{2}\\mu C_{\\mathrm{ox}}\\frac{W}{L}(V_{\\mathrm{GS}} - V_{\\mathrm{TH}})^2 = \\frac{1}{2}\\mu C_{\\mathrm{ox}}\\frac{W}{L}V_{\\mathrm{OV}}^2$$\n其中 $\\mu C_{\\mathrm{ox}}$ 是工艺跨导参数，$W/L$ 是宽高比，$V_{\\mathrm{TH}}$ 是阈值电压，$V_{\\mathrm{OV}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH}}$ 是过驱动电压。指定的主要失配是阈值电压差 $\\Delta V_{\\mathrm{TH}}$。漏极电流对 $V_{\\mathrm{TH}}$ 的灵敏度通过求偏导数得到：\n$$\\frac{\\partial I_D}{\\partial V_{\\mathrm{TH}}} = \\frac{1}{2}\\mu C_{\\mathrm{ox}}\\frac{W}{L} \\cdot 2(V_{\\mathrm{GS}} - V_{\\mathrm{TH}}) \\cdot (-1) = - \\mu C_{\\mathrm{ox}}\\frac{W}{L}V_{\\mathrm{OV}}$$\nMOSFET 的跨导为 $g_{m, \\text{MOS}} = \\frac{\\partial I_D}{\\partial V_{\\mathrm{GS}}} = \\mu C_{\\mathrm{ox}}\\frac{W}{L}V_{\\mathrm{OV}}$。因此，$\\frac{\\partial I_D}{\\partial V_{\\mathrm{TH}}} = -g_{m, \\text{MOS}}$。\n由小的 $\\Delta V_{\\mathrm{TH}}$ 引起的相对电流误差为：\n$$\\frac{\\Delta I_D}{I_D} \\approx \\frac{1}{I_D} \\frac{\\partial I_D}{\\partial V_{\\mathrm{TH}}} \\Delta V_{\\mathrm{TH}} = -\\frac{g_{m, \\text{MOS}}}{I_D} \\Delta V_{\\mathrm{TH}}$$\n饱和区 MOSFET 的 $g_m/I_D$ 比值为：\n$$\\frac{g_{m, \\text{MOS}}}{I_D} = \\frac{\\mu C_{\\mathrm{ox}}\\frac{W}{L}V_{\\mathrm{OV}}}{\\frac{1}{2}\\mu C_{\\mathrm{ox}}\\frac{W}{L}V_{\\mathrm{OV}}^2} = \\frac{2}{V_{\\mathrm{OV}}}$$\n因此，相对电流误差为 $\\frac{\\Delta I_D}{I_D} \\approx -\\frac{2}{V_{\\mathrm{OV}}} \\Delta V_{\\mathrm{TH}}$。该误差的标准差为：\n$$\\sigma\\left(\\frac{\\Delta I_D}{I_D}\\right) = \\frac{2}{V_{\\mathrm{OV}}} \\sigma(\\Delta V_{\\mathrm{TH}})$$\n问题给出了 $V_{\\mathrm{TH}}$ 失配的缩放定律为 $\\sigma(\\Delta V_{\\mathrm{TH}}) = \\frac{A_{V_{\\mathrm{TH}}}}{\\sqrt{W L}}$。代入得到：\n$$\\sigma\\left(\\frac{\\Delta I_D}{I_D}\\right) = \\frac{2 A_{V_{\\mathrm{TH}}}}{V_{\\mathrm{OV}}\\sqrt{W L}}$$\n应用相同的 $0.01$ 的 $3\\sigma$ 精度要求：\n$$3\\sigma\\left(\\frac{\\Delta I_D}{I_D}\\right) = 3 \\frac{2 A_{V_{\\mathrm{TH}}}}{V_{\\mathrm{OV}}\\sqrt{W L}} = \\frac{6 A_{V_{\\mathrm{TH}}}}{V_{\\mathrm{OV}}\\sqrt{W L}} = 0.01$$\n由此，我们可以表示出所需的 MOSFET 有源区面积 $WL$：\n$$WL = \\left(\\frac{6 A_{V_{\\mathrm{TH}}}}{0.01 \\cdot V_{\\mathrm{OV}}}\\right)^2$$\n\n为了求出比值 $\\frac{WL}{A_E}$，我们将 $WL$ 的表达式除以 $A_E$ 的表达式：\n$$\\frac{WL}{A_E} = \\frac{\\left(\\frac{6 A_{V_{\\mathrm{TH}}}}{0.01 \\cdot V_{\\mathrm{OV}}}\\right)^2}{\\left(\\frac{3 A_{V_{\\mathrm{BE}}}}{0.01 \\cdot U_T}\\right)^2} = \\left(\\frac{6 A_{V_{\\mathrm{TH}}}}{0.01 \\cdot V_{\\mathrm{OV}}} \\cdot \\frac{0.01 \\cdot U_T}{3 A_{V_{\\mathrm{BE}}}}\\right)^2$$\n简化表达式，因子 $0.01$ 被消去：\n$$\\frac{WL}{A_E} = \\left(\\frac{6}{3} \\cdot \\frac{A_{V_{\\mathrm{TH}}}}{A_{V_{\\mathrm{BE}}}} \\cdot \\frac{U_T}{V_{\\mathrm{OV}}}\\right)^2 = 4 \\left(\\frac{A_{V_{\\mathrm{TH}}}}{A_{V_{\\mathrm{BE}}}}\\right)^2 \\left(\\frac{U_T}{V_{\\mathrm{OV}}}\\right)^2$$\n现在，我们代入给定的数值。首先，我们计算温度 $T = 300\\,\\mathrm{K}$ 时的热电压 $U_T$：\n$$U_T = \\frac{k_B T}{q} = \\frac{(1.380649 \\times 10^{-23}\\,\\mathrm{J/K})(300\\,\\mathrm{K})}{1.6021766 \\times 10^{-19}\\,\\mathrm{C}} \\approx 0.025852\\,\\mathrm{V}$$\n给定的参数是：\n$A_{V_{\\mathrm{BE}}} = 0.25\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$\n$A_{V_{\\mathrm{TH}}} = 3.0\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$\n$V_{\\mathrm{OV}} = 0.200\\,\\mathrm{V}$\n\n参数的比值是无量纲的：\n$$\\frac{A_{V_{\\mathrm{TH}}}}{A_{V_{\\mathrm{BE}}}} = \\frac{3.0\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}}{0.25\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}} = 12$$\n$$\\frac{U_T}{V_{\\mathrm{OV}}} = \\frac{0.025852\\,\\mathrm{V}}{0.200\\,\\mathrm{V}} \\approx 0.12926$$\n将这些值代入面积比的表达式：\n$$\\frac{WL}{A_E} = 4 \\cdot (12)^2 \\cdot (0.12926)^2 = 4 \\cdot 144 \\cdot 0.0167082 \\approx 9.62394$$\n按要求将最终结果四舍五入到四位有效数字，得到 $9.624$。",
            "answer": "$$\\boxed{9.624}$$"
        },
        {
            "introduction": "理论分析是模拟设计的基础，但真正的挑战在于将理论应用于受多重约束的实际问题中。本综合设计练习模拟了一个典型的电流镜设计任务，您需要在满足电流比、输出电阻、顺从电压和总版图面积等多项指标的前提下，确定最优的晶体管尺寸。此练习不仅考验您对MOSFET器件物理模型的掌握，更重要的是训练您在相互冲突的设计目标之间进行权衡与优化的能力。通过求解此问题，您将学会如何系统性地将规格要求转化为具体的几何参数，并体会到面积最小化对匹配精度等其他性能指标的潜在影响。",
            "id": "4257593",
            "problem": "考虑一个由长沟道n型金属氧化物半导体场效应晶体管（nMOSFET）在互补金属氧化物半导体（CMOS）技术中实现的双晶体管电流镜。该电流镜由一个二极管连接的参考器件 $M_1$ 和一个输出器件 $M_2$ 组成，它们共享一个公共的栅极节点。假设两个器件都工作在强反型和饱和区，忽略体效应和迁移率退化，并使用与长度相关的参数来模拟沟道长度调制效应。使用以下经过充分检验的事实和定义作为基本依据：\n- 长沟道MOSFET的饱和漏极电流为 $I_{D} = \\frac{1}{2} k' \\frac{W}{L} V_{ov}^{2}$，其中 $k'$ 是工艺跨导参数，$W$ 是栅极宽度，$L$ 是栅极长度，$V_{ov} = V_{GS} - V_{T}$ 是栅极过驱动电压。\n- 在一个简单的电流镜中，两个晶体管共享相同的 $V_{GS}$；因此，在匹配假设下，它们的 $V_{ov}$ 相等。\n- 小信号输出电阻为 $r_{o} \\approx \\frac{1}{\\lambda I_{D}}$，其中 $\\lambda \\approx \\frac{\\Lambda}{L}$，$\\Lambda$ 是一个工艺常数，反映了 $\\lambda$ 与 $L$ 的反比关系。等效地，有 $r_{o} \\approx \\frac{L}{\\Lambda I_{D}}$。\n- 输出器件的饱和（顺从）条件是 $V_{DS} \\geq V_{ov}$；因此，满足顺从条件的最小输出电压为 $V_{out,\\min} = V_{ov}$。\n- 栅极电容和匹配度主要与器件面积成比例；一阶近似是栅极电容与 $W L$ 成正比，阈值电压和电流因子失配的标准差遵循 Pelgrom 定律：$\\sigma_{\\Delta V_{T}} \\propto \\frac{1}{\\sqrt{W L}}$ 和 $\\frac{\\sigma_{\\Delta \\beta}}{\\beta} \\propto \\frac{1}{\\sqrt{W L}}$，其中 $\\beta \\triangleq k' \\frac{W}{L}$。\n\n给定以下技术和设计约束及目标：\n- 工艺跨导参数：$k' = 2.0 \\times 10^{-4}\\,\\text{A}\\,\\text{V}^{-2}$。\n- 沟道长度调制常数：$\\Lambda = 6.0 \\times 10^{-2}\\,\\text{V}^{-1}\\,\\mu\\text{m}$。\n- 最小可制造沟道长度：$L_{\\min} = 0.18\\,\\mu\\text{m}$。\n- 参考电流：通过 $M_1$ 的电流 $I_{\\text{ref}} = 25\\,\\mu\\text{A}$。\n- 镜像比目标：对于 $M_2$，$M = \\frac{I_{\\text{out}}}{I_{\\text{ref}}} = 3$。\n- 输出器件的输出电阻目标：在 $I_{\\text{out}}$ 处 $r_{o,\\min} = 4.0 \\times 10^{5}\\,\\Omega$。\n- 顺从电压目标：$V_{\\text{comp,max}} = 0.25\\,\\text{V}$（即，要求 $V_{ov} \\leq V_{\\text{comp,max}}$）。\n- 总版图栅极面积预算：$A_{\\max} = 40\\,\\mu\\text{m}^{2}$，使得 $W_1 L_1 + W_2 L_2 \\leq A_{\\max}$。\n\n设计目标：选择 $(W_1, L_1)$ 和 $(W_2, L_2)$ 以满足镜像比、顺从电压和输出电阻目标，同时遵守面积预算，并在所有可行选择中，通过第一性原理推导，最小化总栅极面积 $W_1 L_1 + W_2 L_2$。然后，讨论您所选择的 $(W, L)$ 对所伴随的小信号电容和统计匹配方面的权衡。\n\n说明：\n- 以微米（micrometers）为单位表示最终的宽度和长度。\n- 将每个尺寸四舍五入到三位有效数字。\n- 将最终答案以单行矩阵 $[W_1, L_1, W_2, L_2]$ 的形式给出。",
            "solution": "**求解过程**\n\n目标是选择器件尺寸 $(W_1, L_1)$ 和 $(W_2, L_2)$ 以满足所有设计约束，同时最小化总栅极面积 $A_{\\text{total}} = W_1 L_1 + W_2 L_2$。\n\n首先，我们确定器件 $M_2$ 所需的输出电流：\n$I_{\\text{out}} = M \\times I_{\\text{ref}} = 3 \\times 25\\,\\mu\\text{A} = 75\\,\\mu\\text{A}$。我们记 $I_{D1} = I_{\\text{ref}}$ 和 $I_{D2} = I_{\\text{out}}$。\n\n对于 $M_2$ 的输出电阻约束是 $r_{o2} \\geq r_{o,\\min}$。使用给定的模型 $r_{o} \\approx \\frac{L}{\\Lambda I_{D}}$，我们可以写出：\n$$ \\frac{L_2}{\\Lambda I_{D2}} \\geq r_{o,\\min} $$\n这个不等式为 $M_2$ 设定了最小所需沟道长度。为了最小化面积，我们通常应使用尽可能小的尺寸。我们确定这个最小所需长度 $L_{2,\\text{req}}$：\n$$ L_{2,\\text{req}} = r_{o,\\min} \\Lambda I_{D2} $$\n代入给定值：\n$$ L_{2,\\text{req}} = (4.0 \\times 10^{5}\\,\\Omega) \\times (6.0 \\times 10^{-2}\\,\\text{V}^{-1}\\,\\mu\\text{m}) \\times (75 \\times 10^{-6}\\,\\text{A}) $$\n$$ L_{2,\\text{req}} = (4.0 \\times 6.0 \\times 75) \\times (10^5 \\times 10^{-2} \\times 10^{-6})\\,\\mu\\text{m} = 1800 \\times 10^{-3}\\,\\mu\\text{m} = 1.8\\,\\mu\\text{m} $$\n所以，我们必须有 $L_2 \\geq 1.8\\,\\mu\\text{m}$。这大于最小可制造长度 $L_{\\min} = 0.18\\,\\mu\\text{m}$，因此这是 $L_2$ 的有效约束。为了最小化 $M_2$ 对总面积的贡献，我们选择 $L_2$ 的最小可能值，即 $L_2 = 1.8\\,\\mu\\text{m}$。\n\n接下来，我们分析总面积表达式。从饱和电流方程 $I_D = \\frac{1}{2} k' \\frac{W}{L} V_{ov}^2$ 中，我们可以将宽度 $W$ 表示为 $W = L \\left(\\frac{2 I_D}{k' V_{ov}^2}\\right)$。总面积为：\n$$ A_{\\text{total}} = W_1 L_1 + W_2 L_2 = L_1^2 \\left(\\frac{2 I_{D1}}{k' V_{ov}^2}\\right) + L_2^2 \\left(\\frac{2 I_{D2}}{k' V_{ov}^2}\\right) $$\n$$ A_{\\text{total}} = \\frac{2}{k' V_{ov}^2} (I_{D1} L_1^2 + I_{D2} L_2^2) $$\n为了最小化 $A_{\\text{total}}$，我们必须：\n1.  最大化栅极过驱动电压 $V_{ov}$。\n2.  最小化沟道长度 $L_1$ 和 $L_2$。\n\n顺从电压约束为过驱动电压设定了上限：$V_{ov} \\leq V_{\\text{comp,max}} = 0.25\\,\\text{V}$。因此，为了最小化面积，我们必须选择最大的可能 $V_{ov}$：\n$$ V_{ov} = 0.25\\,\\text{V} $$\n\n$M_1$ 对面积的贡献与 $L_1^2$ 成正比。为了最小化面积，我们必须为 $L_1$ 选择最小可能值，即最小可制造长度：\n$$ L_1 = L_{\\min} = 0.18\\,\\mu\\text{m} $$\n\n我们现在已经确定了最优长度（$L_1 = 0.18\\,\\mu\\text{m}$，$L_2 = 1.8\\,\\mu\\text{m}$）和过驱动电压（$V_{ov} = 0.25\\,\\text{V}$），它们在满足长度和电阻约束的同时最小化了面积。现在我们必须计算宽度 $W_1$ 和 $W_2$。\n\n我们首先计算每个晶体管所需的宽长比 $(W/L)$：\n对于 $M_1$：\n$$ \\left(\\frac{W}{L}\\right)_1 = \\frac{2 I_{D1}}{k' V_{ov}^2} = \\frac{2 \\times (25 \\times 10^{-6}\\,\\text{A})}{(2.0 \\times 10^{-4}\\,\\text{A}\\,\\text{V}^{-2}) \\times (0.25\\,\\text{V})^2} = \\frac{5 \\times 10^{-5}}{2.0 \\times 10^{-4} \\times 0.0625} = \\frac{5 \\times 10^{-5}}{1.25 \\times 10^{-5}} = 4 $$\n对于 $M_2$：\n$$ \\left(\\frac{W}{L}\\right)_2 = \\frac{2 I_{D2}}{k' V_{ov}^2} = \\frac{2 \\times (75 \\times 10^{-6}\\,\\text{A})}{(2.0 \\times 10^{-4}\\,\\text{A}\\,\\text{V}^{-2}) \\times (0.25\\,\\text{V})^2} = \\frac{1.5 \\times 10^{-4}}{1.25 \\times 10^{-5}} = 12 $$\n宽长比之比为 $\\frac{(W/L)_2}{(W/L)_1} = \\frac{12}{4} = 3$，这正确地实现了电流镜比率 $M=3$。\n\n现在我们使用选定的沟道长度计算宽度：\n$$ W_1 = 4 \\times L_1 = 4 \\times 0.18\\,\\mu\\text{m} = 0.72\\,\\mu\\text{m} $$\n$$ W_2 = 12 \\times L_2 = 12 \\times 1.8\\,\\mu\\text{m} = 21.6\\,\\mu\\text{m} $$\n\n最终的设计尺寸为 $W_1 = 0.72\\,\\mu\\text{m}$，$L_1 = 0.18\\,\\mu\\text{m}$，$W_2 = 21.6\\,\\mu\\text{m}$ 和 $L_2 = 1.8\\,\\mu\\text{m}$。\n\n我们来验证总面积约束：\n$$ A_{\\text{total}} = W_1 L_1 + W_2 L_2 = (0.72\\,\\mu\\text{m} \\times 0.18\\,\\mu\\text{m}) + (21.6\\,\\mu\\text{m} \\times 1.8\\,\\mu\\text{m}) $$\n$$ A_{\\text{total}} = 0.1296\\,\\mu\\text{m}^2 + 38.88\\,\\mu\\text{m}^2 = 39.0096\\,\\mu\\text{m}^2 $$\n该值小于面积预算 $A_{\\max} = 40\\,\\mu\\text{m}^2$，因此设计是有效的。\n将最终尺寸四舍五入到三位有效数字，得到：\n$W_1 = 0.720\\,\\mu\\text{m}$，$L_1 = 0.180\\,\\mu\\text{m}$，$W_2 = 21.6\\,\\mu\\text{m}$，$L_2 = 1.80\\,\\mu\\text{m}$。\n\n**权衡讨论**\n\n-   **电容：**最小化总栅极面积 $A_{\\text{total}} = W_1 L_1 + W_2 L_2$ 的目标同时最小化了总寄生栅极电容，该电容近似与此面积成正比。通常，较低的总电容对于高速操作是理想的，因为它能带来更快的瞬态响应。共享栅极节点上的电容 $C_{gs1} + C_{gs2}$ 主要由 $C_{gs2}$ 决定，因为其面积（$A_2 = 38.88\\,\\mu\\text{m}^2$）远大于 $M_1$ 的面积（$A_1 = 0.1296\\,\\mu\\text{m}^2$）。这个大的栅极节点电容会形成一个主导极点，可能限制电流镜的带宽。\n\n-   **统计匹配：**该设计严格地最小化了面积，但这以牺牲匹配精度为巨大代价。Pelgrom 定律指出，阈值电压失配的标准差（$\\sigma_{\\Delta V_T}$）和电流因子失配的标准差（$\\sigma_{\\Delta \\beta}/\\beta$）与栅极面积的平方根成反比（$1/\\sqrt{WL}$）。我们的设计导致参考晶体管 $M_1$ 的面积极小（$A_1 \\approx 0.13\\,\\mu\\text{m}^2$）。这个极小的面积使得电流镜的电流比对随机工艺变化高度敏感，因此实际比率将在目标值 $M=3$ 附近表现出很大的方差。此外，该设计为两个晶体管使用了不同的沟道长度（$L_1 = 0.18\\,\\mu\\text{m}$ 和 $L_2 = 1.8\\,\\mu\\text{m}$）。这在实现良好匹配方面是一种不好的做法，因为它使得电路性能对整个芯片上沟道长度的系统性工艺梯度敏感。一个更稳健的设计会使用相等的长度（$L_1=L_2$），但通过简单计算可知（对于 $L_1=L_2=1.8\\,\\mu\\text{m}$，$A_{\\text{total}} = 51.84\\,\\mu\\text{m}^2$），这样的选择会违反严格的面积预算。因此，问题的提法迫使设计者采用一种优先考虑面积最小化而非匹配精度的解决方案。\n\n最终的尺寸，四舍五入到三位有效数字，构成了解决方案。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 0.720 & 0.180 & 21.6 & 1.80 \\end{pmatrix} } $$"
        }
    ]
}
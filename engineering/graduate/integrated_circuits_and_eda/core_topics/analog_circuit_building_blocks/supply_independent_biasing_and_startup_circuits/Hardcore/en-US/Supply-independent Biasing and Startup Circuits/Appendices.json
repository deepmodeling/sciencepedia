{
    "hands_on_practices": [
        {
            "introduction": "The design of any temperature-compensated bias circuit begins with a solid grasp of the physical origin of Proportional-To-Absolute-Temperature (PTAT) quantities. This exercise  grounds your understanding in the fundamental definition of the thermal voltage, $V_T = \\frac{k_B T}{q}$. By calculating its value and temperature coefficient, you will directly verify the linear temperature dependence that designers exploit to create stable references.",
            "id": "4302737",
            "problem": "In the context of supply-independent biasing and startup circuits in integrated circuits and Electronic Design Automation (EDA), the thermal voltage is a central quantity. The thermal voltage, denoted by $V_{T}$, is defined by the well-tested physical relation $V_{T} = \\frac{k_{B} T}{q}$, where $k_{B}$ is the Boltzmann constant and $q$ is the elementary charge. Consider a bias generator that employs Proportional To Absolute Temperature (PTAT) behavior, such as those based on emitter-area ratio differentials, to generate a supply-independent current. \n\nUsing the physical constants $k_{B} = 1.380649 \\times 10^{-23}\\,\\mathrm{J/K}$ and $q = 1.602176634 \\times 10^{-19}\\,\\mathrm{C}$, compute $V_{T}$ at $T_{1} = 300\\,\\mathrm{K}$ and at $T_{2} = 125\\,^{\\circ}\\mathrm{C}$ (note that $T_{2}$ must be converted to Kelvin). Then, from first principles, determine whether $V_{T}$ depends linearly on absolute temperature and explain how this property informs the design of PTAT quantities used in supply-independent biasing and the necessity of startup circuits to avoid the zero-current equilibrium in self-biased loops. \n\nFinally, report the value of the temperature coefficient $\\frac{dV_{T}}{dT}$ in $\\mathrm{mV/K}$, obtained from the definition, and use that as your final numerical result. Round your final answer to four significant figures and express it in $\\mathrm{mV/K}$.",
            "solution": "We begin from the foundational definition of thermal voltage,\n$$\nV_{T} = \\frac{k_{B} T}{q},\n$$\nwhere $k_{B}$ is the Boltzmann constant and $q$ is the elementary charge. This relation is derived from statistical thermodynamics and underpins the exponential current-voltage relation of a bipolar junction transistor and the Boltzmann distribution governing carrier energies.\n\nStep $1$: Convert the given temperatures to absolute units. We are given $T_{1} = 300\\,\\mathrm{K}$ and $T_{2} = 125\\,^{\\circ}\\mathrm{C}$. Absolute temperature in Kelvin is given by $T\\,\\mathrm{[K]} = T\\,^{\\circ}\\mathrm{C} + 273.15$. Hence,\n$$\nT_{2} = 125 + 273.15 = 398.15\\,\\mathrm{K}.\n$$\n\nStep $2$: Compute $V_{T}$ at $T_{1}$ and $T_{2}$ symbolically and then numerically. Using $V_{T} = \\frac{k_{B} T}{q}$,\n$$\nV_{T}(T_{1}) = \\frac{k_{B}}{q} \\, T_{1}, \\quad V_{T}(T_{2}) = \\frac{k_{B}}{q} \\, T_{2}.\n$$\nThe ratio is\n$$\n\\frac{V_{T}(T_{2})}{V_{T}(T_{1})} = \\frac{T_{2}}{T_{1}},\n$$\nwhich shows that $V_{T}$ is exactly linear in $T$ because $\\frac{k_{B}}{q}$ is a physical constant. This establishes the linear dependence on absolute temperature.\n\nFor numerical evaluation, first compute the constant factor:\n$$\n\\frac{k_{B}}{q} = \\frac{1.380649 \\times 10^{-23}}{1.602176634 \\times 10^{-19}}\\,\\mathrm{V/K} = 8.617333262145 \\times 10^{-5}\\,\\mathrm{V/K}.\n$$\nTherefore,\n$$\nV_{T}(300\\,\\mathrm{K}) = \\left(8.617333262145 \\times 10^{-5}\\right) \\times 300 = 2.5851999786435 \\times 10^{-2}\\,\\mathrm{V},\n$$\nwhich is\n$$\nV_{T}(300\\,\\mathrm{K}) \\approx 2.5851999786435 \\times 10^{-2}\\,\\mathrm{V} = 25.851999786435\\,\\mathrm{mV}.\n$$\nSimilarly,\n$$\nV_{T}(398.15\\,\\mathrm{K}) = \\left(8.617333262145 \\times 10^{-5}\\right) \\times 398.15 = 3.43099123832303 \\times 10^{-2}\\,\\mathrm{V},\n$$\nwhich is\n$$\nV_{T}(398.15\\,\\mathrm{K}) \\approx 34.3099123832303\\,\\mathrm{mV}.\n$$\n\nStep $3$: Temperature coefficient. Differentiating $V_{T} = \\frac{k_{B}}{q} T$ with respect to $T$ gives\n$$\n\\frac{dV_{T}}{dT} = \\frac{k_{B}}{q}.\n$$\nThus, the temperature coefficient is constant and equal to the same factor derived above. Converting to $\\mathrm{mV/K}$,\n$$\n\\frac{dV_{T}}{dT} = 8.617333262145 \\times 10^{-5}\\,\\mathrm{V/K} = 8.617333262145 \\times 10^{-2}\\,\\mathrm{mV/K} = 0.08617333262145\\,\\mathrm{mV/K}.\n$$\n\nStep $4$: Implications for Proportional To Absolute Temperature (PTAT) quantities and supply-independent biasing. The exact linearity of $V_{T}$ with absolute temperature means that any quantity proportional to $V_{T}$, such as $\\Delta V_{BE} = V_{T} \\ln(N)$ generated by a pair of bipolar junction transistors with emitter area ratio $N$, is also linear in $T$. This linearity is exploited in PTAT current generators, where a resistor $R$ converts $\\Delta V_{BE}$ into a current $I_{\\mathrm{PTAT}} = \\frac{\\Delta V_{BE}}{R} = \\frac{V_{T} \\ln(N)}{R}$ that scales as $\\propto T$, aiding in compensation of complementary-to-absolute-temperature behaviors (e.g., the base-emitter voltage $V_{BE}$ decrease with $T$) and in forming temperature-stable references such as the bandgap reference. In supply-independent biasing loops, the $(\\propto T)$ scaling of $V_{T}$ supports generating currents set primarily by temperature and device geometry rather than supply voltage, provided that headroom constraints are satisfied. However, self-biased PTAT loops admit a trivial zero-current equilibrium; therefore, a startup circuit is necessary to force the loop into the intended nonzero PTAT operating point at power-up. The magnitude of $\\frac{dV_{T}}{dT}$ quantifies how strongly the PTAT term grows with $T$ and thus informs the choice of $\\ln(N)$ and resistor $R$ to achieve target temperature coefficients while ensuring robust startup across process, voltage, and temperature corners.\n\nFinally, per the problem’s instruction, the required reported quantity is the temperature coefficient in $\\mathrm{mV/K}$ rounded to four significant figures:\n$$\n\\frac{dV_{T}}{dT} \\approx 0.08617\\,\\mathrm{mV/K}.\n$$",
            "answer": "$$\\boxed{0.08617}$$"
        },
        {
            "introduction": "A bias generator that never turns on is of no use. This practice problem  confronts the critical challenge of startup robustness, particularly at high temperatures where leakage currents can overwhelm a simple startup circuit. By modeling and quantifying these leakage paths, you will determine the minimum startup current required to guarantee that the bias loop escapes its undesired zero-current state, a crucial step in designing reliable circuits.",
            "id": "4302716",
            "problem": "A supply-independent current reference is implemented as a beta-multiplier reference (BMR) using Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) devices and a resistor. As is typical, the feedback loop has two equilibria: a desired nonzero-current equilibrium and an undesired equilibrium at the origin where all devices are off. A startup element injects a current $I_{SU}$ into the bias loop’s high-impedance node $V_{x}$ whenever $V_{x}  V_{\\text{trip}}$, to destabilize the origin and force the loop toward the intended operating point. At elevated temperature, leakage currents can sink $I_{SU}$ and re-stabilize the origin. \n\nConsider the following worst-case leakage mechanisms at the node $V_{x}$ when $V_{x} \\approx 0$ at $T = 125\\,^{\\circ}\\mathrm{C}$ (so $T = 398\\,\\mathrm{K}$). Assume the supply voltage is sufficiently high that the reverse biases of junctions connected to $V_{x}$ are large and approximately constant over the small $V_{x}$ excursion near the origin, and neglect any voltage dependence of leakage in that range.\n\n1. A nominally off $n$-channel MOSFET connected from $V_{x}$ to ground sinks subthreshold leakage current approximated by\n$$\nI_{\\text{sub}}(T) = I_{00}\\left(\\frac{T}{T_{0}}\\right)^{2}\\exp\\!\\left(-\\frac{V_{\\text{th}}(T)}{n\\,V_{T}(T)}\\right),\n$$\nwith $T_{0} = 300\\,\\mathrm{K}$, $I_{00} = 1.0\\times 10^{-6}\\,\\mathrm{A}$, subthreshold slope factor $n = 1.5$, threshold voltage $V_{\\text{th}}(T) = V_{\\text{th},0} + \\alpha\\,(T - T_{0})$ where $V_{\\text{th},0} = 0.50\\,\\mathrm{V}$ and $\\alpha = -1.5\\times 10^{-3}\\,\\mathrm{V}/\\mathrm{K}$, and thermal voltage $V_{T}(T) = \\frac{k_{B}T}{q}$ with Boltzmann constant $k_{B} = 1.380649\\times 10^{-23}\\,\\mathrm{J}/\\mathrm{K}$ and elementary charge $q = 1.602176634\\times 10^{-19}\\,\\mathrm{C}$.\n\n2. There are $N = 3$ equal reverse-biased $p$-$n$ junctions from $V_{x}$ to ground (for example, diffusion-to-substrate junctions), each contributing reverse saturation current modeled as\n$$\nI_{S}(T) = I_{S0}\\left(\\frac{T}{T_{0}}\\right)^{2}\\exp\\!\\left(-\\frac{E_{g}}{k_{B,eV}}\\left(\\frac{1}{T} - \\frac{1}{T_{0}}\\right)\\right),\n$$\nwhere $I_{S0} = 1.0\\times 10^{-12}\\,\\mathrm{A}$ at $T_{0} = 300\\,\\mathrm{K}$, silicon bandgap $E_{g} = 1.12\\,\\mathrm{eV}$, and Boltzmann constant expressed in electronvolts per kelvin $k_{B,eV} = 8.617333262145\\times 10^{-5}\\,\\mathrm{eV}/\\mathrm{K}$.\n\nAssume the startup source provides a nearly constant current $I_{SU}$ for $V_{x} \\in [0, V_{\\text{trip}})$, and that the bias loop’s own currents are negligible near the origin compared to the start-up and leakage paths. Using first principles and well-tested device models, analyze why leakage can stabilize the origin at $T = 398\\,\\mathrm{K}$ by setting up the current balance at $V_{x} \\approx 0$. Then compute the minimum startup current margin $I_{SU,\\min}$ at $T = 125\\,^{\\circ}\\mathrm{C}$ that guarantees $dV_{x}/dt  0$ initially and thus destabilizes the origin. \n\nRound your final numerical answer to three significant figures and express it in microamperes.",
            "solution": "The problem requires an analysis of the startup condition for a beta-multiplier reference (BMR) circuit at an elevated temperature. The circuit has an undesired stable equilibrium at the origin, where all currents are zero. A startup circuit injects a current $I_{SU}$ to destabilize this origin. However, temperature-dependent leakage currents can sink this startup current, potentially re-stabilizing the origin and preventing proper circuit startup. We must determine the minimum startup current, $I_{SU,\\min}$, needed to guarantee startup at $T = 125\\,^{\\circ}\\mathrm{C}$ or $T = 398\\,\\mathrm{K}$.\n\nThe stability of the origin is determined by the net current at the high-impedance node $V_{x}$. Let $C_x$ be the total capacitance at this node. The voltage dynamics are described by Kirchhoff's Current Law (KCL):\n$$\nC_x \\frac{dV_{x}}{dt} = I_{\\text{net}}(V_x)\n$$\nNear the origin ($V_x \\approx 0$), the net current is the sum of the injected startup current and the various leakage currents being sunk from the node. The BMR's own feedback currents are assumed to be negligible in this region.\n$$\nI_{\\text{net}} = I_{SU} - I_{\\text{leakage, total}}\n$$\nFor the startup to be successful, the origin must be an unstable equilibrium point. This means that for a small positive perturbation in voltage, $V_x  0$, the voltage must continue to increase. This requires $\\frac{dV_{x}}{dt}  0$, which implies $I_{\\text{net}}  0$.\n$$\nI_{SU}  I_{\\text{leakage, total}}\n$$\nThe problem states that at elevated temperatures, leakage can stabilize the origin. This occurs when $I_{\\text{leakage, total}} \\ge I_{SU}$, causing any small positive $V_x$ to decay back to $0$. To guarantee startup, $I_{SU}$ must be strictly greater than the total leakage current. The minimum required startup current, $I_{SU,\\min}$, is the value that just overcomes the total leakage at the worst-case temperature.\n$$\nI_{SU,\\min} = I_{\\text{leakage, total}}(T = 398\\,\\mathrm{K})\n$$\nThe total leakage current, $I_{\\text{leakage, total}}$, is the sum of the subthreshold leakage from the $n$-channel MOSFET, $I_{\\text{sub}}(T)$, and the leakage from the $N=3$ reverse-biased $p$-$n$ junctions, $N \\cdot I_S(T)$.\n$$\nI_{\\text{leakage, total}}(T) = I_{\\text{sub}}(T) + N \\cdot I_S(T)\n$$\nWe will now calculate each component at the specified temperature $T = 398\\,\\mathrm{K}$.\n\nFirst, we calculate the subthreshold leakage current, $I_{\\text{sub}}(T)$. The formula is given as:\n$$\nI_{\\text{sub}}(T) = I_{00}\\left(\\frac{T}{T_{0}}\\right)^{2}\\exp\\!\\left(-\\frac{V_{\\text{th}}(T)}{n\\,V_{T}(T)}\\right)\n$$\nWe need to determine the temperature-dependent parameters $V_{\\text{th}}(T)$ and $V_{T}(T)$.\nThe threshold voltage is $V_{\\text{th}}(T) = V_{\\text{th},0} + \\alpha\\,(T - T_{0})$. With the given values, $V_{\\text{th},0} = 0.50\\,\\mathrm{V}$, $\\alpha = -1.5\\times 10^{-3}\\,\\mathrm{V}/\\mathrm{K}$, $T = 398\\,\\mathrm{K}$, and $T_{0} = 300\\,\\mathrm{K}$:\n$$\nV_{\\text{th}}(398\\,\\mathrm{K}) = 0.50 + (-1.5\\times 10^{-3}) \\times (398 - 300) = 0.50 - 1.5\\times 10^{-3} \\times 98 = 0.50 - 0.147 = 0.353\\,\\mathrm{V}\n$$\nThe thermal voltage is $V_{T}(T) = \\frac{k_{B}T}{q}$. Using the provided constant $k_{B,eV} = \\frac{k_B}{q} = 8.617333262145\\times 10^{-5}\\,\\mathrm{eV}/\\mathrm{K}$, which is equivalent to $\\mathrm{V}/\\mathrm{K}$:\n$$\nV_{T}(398\\,\\mathrm{K}) = (8.617333 \\times 10^{-5}) \\times 398 \\approx 0.034297\\,\\mathrm{V}\n$$\nNow, we can compute $I_{\\text{sub}}(398\\,\\mathrm{K})$ using $I_{00} = 1.0\\times 10^{-6}\\,\\mathrm{A}$ and $n = 1.5$:\n$$\nI_{\\text{sub}}(398\\,\\mathrm{K}) = (1.0\\times 10^{-6}) \\left(\\frac{398}{300}\\right)^{2} \\exp\\!\\left(-\\frac{0.353}{1.5 \\times 0.034297}\\right)\n$$\n$$\nI_{\\text{sub}}(398\\,\\mathrm{K}) \\approx (1.0\\times 10^{-6}) \\times (1.7601) \\times \\exp(-6.8615) \\approx (1.0\\times 10^{-6}) \\times (1.7601) \\times (0.001047)\n$$\n$$\nI_{\\text{sub}}(398\\,\\mathrm{K}) \\approx 1.843 \\times 10^{-9}\\,\\mathrm{A}\n$$\n\nNext, we calculate the reverse saturation current for a single $p$-$n$ junction, $I_{S}(T)$. The formula is:\n$$\nI_{S}(T) = I_{S0}\\left(\\frac{T}{T_{0}}\\right)^{2}\\exp\\!\\left(-\\frac{E_{g}}{k_{B,eV}}\\left(\\frac{1}{T} - \\frac{1}{T_{0}}\\right)\\right)\n$$\nUsing the given values $I_{S0} = 1.0\\times 10^{-12}\\,\\mathrm{A}$, $E_{g} = 1.12\\,\\mathrm{eV}$, $T = 398\\,\\mathrm{K}$, and $T_0 = 300\\,\\mathrm{K}$:\n$$\nI_{S}(398\\,\\mathrm{K}) = (1.0\\times 10^{-12}) \\left(\\frac{398}{300}\\right)^{2} \\exp\\!\\left(-\\frac{1.12}{8.617333 \\times 10^{-5}}\\left(\\frac{1}{398} - \\frac{1}{300}\\right)\\right)\n$$\nThe term in the exponent is:\n$$\n-\\frac{1.12}{8.617333 \\times 10^{-5}}\\left(\\frac{300 - 398}{398 \\times 300}\\right) \\approx -12997.15 \\left(\\frac{-98}{119400}\\right) \\approx 10.6676\n$$\nSubstituting this back into the equation for $I_S$:\n$$\nI_{S}(398\\,\\mathrm{K}) \\approx (1.0\\times 10^{-12}) \\times (1.7601) \\times \\exp(10.6676) \\approx (1.0\\times 10^{-12}) \\times (1.7601) \\times (42943)\n$$\n$$\nI_{S}(398\\,\\mathrm{K}) \\approx 7.558 \\times 10^{-8}\\,\\mathrm{A}\n$$\nThere are $N=3$ such junctions, so the total junction leakage is:\n$$\nN \\cdot I_S(398\\,\\mathrm{K}) = 3 \\times 7.558 \\times 10^{-8} \\approx 2.267 \\times 10^{-7}\\,\\mathrm{A}\n$$\n\nFinally, we sum the leakage components to find the minimum required startup current:\n$$\nI_{SU,\\min} = I_{\\text{leakage, total}}(398\\,\\mathrm{K}) = I_{\\text{sub}}(398\\,\\mathrm{K}) + N \\cdot I_S(398\\,\\mathrm{K})\n$$\n$$\nI_{SU,\\min} \\approx 1.843 \\times 10^{-9}\\,\\mathrm{A} + 2.267 \\times 10^{-7}\\,\\mathrm{A} \\approx 0.01843 \\times 10^{-7}\\,\\mathrm{A} + 2.267 \\times 10^{-7}\\,\\mathrm{A}\n$$\n$$\nI_{SU,\\min} \\approx 2.285 \\times 10^{-7}\\,\\mathrm{A}\n$$\nThe problem asks for the answer in microamperes ($\\mathrm{\\mu A}$).\n$$\nI_{SU,\\min} \\approx 0.2285\\,\\mathrm{\\mu A}\n$$\nRounding to three significant figures, we get $0.229\\,\\mathrm{\\mu A}$.\nThus, the minimum start-up current required to guarantee that the origin is destabilized at $T = 125\\,^{\\circ}\\mathrm{C}$ is $0.229\\,\\mathrm{\\mu A}$.",
            "answer": "$$\n\\boxed{0.229}\n$$"
        },
        {
            "introduction": "Even with a robust startup mechanism, the precision of a supply-independent reference is limited by manufacturing variations. This final exercise  tackles the problem of accuracy by guiding you through the design of a digital trim network. By first constructing a worst-case error budget and then determining the required trim resolution and range, you will learn the systematic process for ensuring a bandgap reference meets its performance specifications after fabrication.",
            "id": "4302747",
            "problem": "A supply-independent bias generator for a bandgap reference is implemented using two bipolar junction transistors with emitter area ratio $N$ and a resistive network that sums a negative temperature coefficient base-emitter voltage $V_{BE,1}$ with a proportional-to-absolute-temperature voltage. Under the standard Brokaw bandgap loop, the closed-loop reference voltage is well described by the expression $V_{\\mathrm{ref}} = V_{BE,1} + V_{T} \\ln(N) \\frac{R_{2}}{R_{1}}$, where $V_{T} = \\frac{k_{B} T}{q}$ is the thermal voltage, $k_{B}$ is the Boltzmann constant, $q$ is the elementary charge, $T$ is the absolute temperature, and $R_{1}, R_{2}$ form the proportional-to-absolute-temperature term.\n\nYou are to design a binary-weighted resistor ladder trim network that adjusts $R_{2}$ around its nominal value $R_{2,0}$ in steps of $\\Delta R$, $2 \\Delta R$, $4 \\Delta R$, and so on, such that the resulting change in $V_{\\mathrm{ref}}$ per least significant bit (LSB) at $T = 300\\,\\mathrm{K}$ is exactly $1\\,\\mathrm{mV}$. The trim is centered so that midscale corresponds to $R_{2} = R_{2,0}$, and codes above or below midscale symmetrically increase or decrease $R_{2}$.\n\nAssume the following:\n- The nominal target reference at $T = 300\\,\\mathrm{K}$ is $V_{\\mathrm{ref,nom}} = 1.200\\,\\mathrm{V}$.\n- The nominal base-emitter voltage at $T = 300\\,\\mathrm{K}$ is $V_{BE,1} = 0.700\\,\\mathrm{V}$.\n- The emitter area ratio is $N = 8$.\n- The resistor $R_{1} = 10\\,\\mathrm{k}\\Omega$, while $R_{2,0}$ is chosen to meet $V_{\\mathrm{ref,nom}}$.\n- The untrimmed $V_{\\mathrm{ref}}$ error at $T = 300\\,\\mathrm{K}$ is dominated by three independent contributors: base-emitter process spread of $\\pm 30\\,\\mathrm{mV}$, resistor ratio error of $\\pm 1\\%$ on $\\frac{R_{2}}{R_{1}}$ (affecting only the proportional-to-absolute-temperature term), and closed-loop amplifier offset mapped to the output of $\\pm 2\\,\\mathrm{mV}$.\n- A design guardband factor of $1.20$ is required on the total worst-case additive error budget to ensure coverage.\n\nStarting only from the fundamental relation $V_{T} = \\frac{k_{B} T}{q}$ and the bandgap form $V_{\\mathrm{ref}} = V_{BE,1} + V_{T} \\ln(N) \\frac{R_{2}}{R_{1}}$:\n1. Derive the expression for the LSB resistor increment $\\Delta R_{\\mathrm{LSB}}$ that yields $\\Delta V_{\\mathrm{ref,LSB}} = 1\\,\\mathrm{mV}$ at $T = 300\\,\\mathrm{K}$.\n2. Using the stated error sources, construct the worst-case additive error at $T = 300\\,\\mathrm{K}$, apply the guardband, and determine the minimum number of binary bits $n$ such that the bipolar trim range spans the guarded worst-case error with $1\\,\\mathrm{mV}$ LSB steps and midscale centered at the nominal. Express the final answer for $n$ as an integer with no units.\n\nNo shortcut formulas are provided; you must reason from the given physical definitions and well-tested relations. The final answer must be a single integer. No rounding instructions apply because the answer is an exact integer count of bits.",
            "solution": "The problem requires the determination of the minimum number of bits for a binary-weighted trim network in a bandgap reference circuit. The solution is developed in two parts. First, we derive the relationship between a change in the resistor $R_2$ and the change in the reference voltage $V_{\\mathrm{ref}}$. Second, we calculate the total worst-case voltage error, apply a guardband, and determine the number of trim bits required to cover this error range.\n\nThe reference voltage is given by the expression:\n$$V_{\\mathrm{ref}} = V_{BE,1} + V_{T} \\ln(N) \\frac{R_{2}}{R_{1}}$$\nwhere $V_T = \\frac{k_B T}{q}$. The temperature is given as $T = 300\\,\\mathrm{K}$.\n\nPart 1: Derivation of the LSB resistor increment, $\\Delta R_{\\mathrm{LSB}}$.\n\nTo find the change in $V_{\\mathrm{ref}}$ resulting from a small change in $R_{2}$, we compute the partial derivative of $V_{\\mathrm{ref}}$ with respect to $R_{2}$. Assuming $V_{BE,1}$, $V_{T}$, $N$, and $R_{1}$ are constant with respect to variations in $R_{2}$:\n$$\\frac{\\partial V_{\\mathrm{ref}}}{\\partial R_{2}} = \\frac{\\partial}{\\partial R_{2}} \\left( V_{BE,1} + V_{T} \\ln(N) \\frac{R_{2}}{R_{1}} \\right) = \\frac{V_{T} \\ln(N)}{R_{1}}$$\nFor a small, discrete change $\\Delta R_{2}$, the corresponding change in $V_{\\mathrm{ref}}$, denoted $\\Delta V_{\\mathrm{ref}}$, can be approximated as:\n$$\\Delta V_{\\mathrm{ref}} \\approx \\frac{\\partial V_{\\mathrm{ref}}}{\\partial R_{2}} \\Delta R_{2} = \\left( \\frac{V_{T} \\ln(N)}{R_{1}} \\right) \\Delta R_{2}$$\nThe problem specifies that the change in $V_{\\mathrm{ref}}$ per least significant bit (LSB) of the trim network must be $\\Delta V_{\\mathrm{ref,LSB}} = 1\\,\\mathrm{mV}$. The corresponding resistor increment is $\\Delta R_{\\mathrm{LSB}}$. Rearranging the equation above gives the expression for $\\Delta R_{\\mathrm{LSB}}$:\n$$\\Delta R_{\\mathrm{LSB}} = \\Delta V_{\\mathrm{ref,LSB}} \\left( \\frac{R_{1}}{V_{T} \\ln(N)} \\right)$$\nThis completes the first part of the task. Although we do not need the numerical value of $\\Delta R_{\\mathrm{LSB}}$ to find the number of bits, this sensitivity relationship is fundamental to the problem.\n\nPart 2: Determination of the minimum number of bits, $n$.\n\nFirst, we must calculate the total worst-case untrimmed error in $V_{\\mathrm{ref}}$ at $T = 300\\,\\mathrm{K}$. The error is the sum of three independent contributions.\n\n1.  Base-emitter voltage spread: $\\Delta V_{\\mathrm{err},VBE} = \\pm 30\\,\\mathrm{mV}$.\n2.  Resistor ratio error: This error is $\\pm 1\\%$ on the ratio $\\frac{R_{2}}{R_{1}}$ and affects only the proportional-to-absolute-temperature (PTAT) term of $V_{\\mathrm{ref}}$. The PTAT term is $V_{\\mathrm{PTAT}} = V_{T} \\ln(N) \\frac{R_{2}}{R_{1}}$.\n    We first find the nominal value of the PTAT voltage, $V_{\\mathrm{PTAT,nom}}$, at $T=300\\,\\mathrm{K}$.\n    $$V_{\\mathrm{ref,nom}} = V_{BE,1,nom} + V_{\\mathrm{PTAT,nom}}$$\n    Using the given nominal values, $V_{\\mathrm{ref,nom}} = 1.200\\,\\mathrm{V}$ and $V_{BE,1,nom} = 0.700\\,\\mathrm{V}$:\n    $$1.200\\,\\mathrm{V} = 0.700\\,\\mathrm{V} + V_{\\mathrm{PTAT,nom}}$$\n    $$V_{\\mathrm{PTAT,nom}} = 1.200\\,\\mathrm{V} - 0.700\\,\\mathrm{V} = 0.500\\,\\mathrm{V}$$\n    A $\\pm 1\\%$ error on the resistor ratio $\\frac{R_{2}}{R_{1}}$ translates directly to a $\\pm 1\\%$ error on $V_{\\mathrm{PTAT}}$.\n    $$\\Delta V_{\\mathrm{err,res}} = \\pm 0.01 \\times V_{\\mathrm{PTAT,nom}} = \\pm 0.01 \\times 0.500\\,\\mathrm{V} = \\pm 0.005\\,\\mathrm{V} = \\pm 5\\,\\mathrm{mV}$$\n3.  Amplifier offset: $\\Delta V_{\\mathrm{err,amp}} = \\pm 2\\,\\mathrm{mV}$.\n\nThe total worst-case additive error, $|\\Delta V_{\\mathrm{err,total}}|$, is the sum of the magnitudes of the individual errors:\n$$|\\Delta V_{\\mathrm{err,total}}| = |\\Delta V_{\\mathrm{err},VBE}| + |\\Delta V_{\\mathrm{err,res}}| + |\\Delta V_{\\mathrm{err,amp}}|$$\n$$|\\Delta V_{\\mathrm{err,total}}| = 30\\,\\mathrm{mV} + 5\\,\\mathrm{mV} + 2\\,\\mathrm{mV} = 37\\,\\mathrm{mV}$$\nThis means the untrimmed reference voltage can deviate from its nominal value by up to $\\pm 37\\,\\mathrm{mV}$.\n\nNext, we apply the specified design guardband factor of $1.20$ to this worst-case error. The guardbanded error, $\\Delta V_{\\mathrm{err,guarded}}$, determines the required trim range.\n$$\\Delta V_{\\mathrm{err,guarded}} = 1.20 \\times |\\Delta V_{\\mathrm{err,total}}| = 1.20 \\times 37\\,\\mathrm{mV} = 44.4\\,\\mathrm{mV}$$\nThe trim network must be able to correct for a deviation of at least $\\pm 44.4\\,\\mathrm{mV}$ around the nominal voltage. Therefore, the total required trim span is twice this value:\n$$\\text{Total Required Span} = 2 \\times \\Delta V_{\\mathrm{err,guarded}} = 2 \\times 44.4\\,\\mathrm{mV} = 88.8\\,\\mathrm{mV}$$\n\nFinally, we determine the minimum number of bits, $n$, for the binary-weighted trim network. An $n$-bit network has $2^n$ discrete states, which provides $2^n - 1$ adjustment steps. The LSB step size is given as $\\Delta V_{\\mathrm{ref,LSB}} = 1\\,\\mathrm{mV}$. The total trim range provided by the network is:\n$$\\text{Total Provided Span} = (2^n - 1) \\times \\Delta V_{\\mathrm{ref,LSB}}$$\nTo ensure full coverage of the guarded error budget, the provided span must be greater than or equal to the required span:\n$$(2^n - 1) \\times 1\\,\\mathrm{mV} \\ge 88.8\\,\\mathrm{mV}$$\n$$(2^n - 1) \\ge 88.8$$\n$$2^n \\ge 89.8$$\nWe must find the smallest integer $n$ that satisfies this inequality. We can evaluate powers of $2$:\nFor $n=6$, $2^6 = 64$, which is less than $89.8$.\nFor $n=7$, $2^7 = 128$, which is greater than $89.8$.\nThus, the minimum number of bits required is $n=7$.",
            "answer": "$$\\boxed{7}$$"
        }
    ]
}
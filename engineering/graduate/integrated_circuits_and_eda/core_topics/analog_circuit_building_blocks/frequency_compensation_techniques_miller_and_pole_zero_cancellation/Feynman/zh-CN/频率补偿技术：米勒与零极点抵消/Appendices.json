{
    "hands_on_practices": [
        {
            "introduction": "要掌握频率补偿技术，首先必须进行严格的小信号分析。这项实践将引导你从零开始，推导带有米勒电容和零点消除电阻的两级放大器的完整传递函数。通过这项练习，你将能深刻理解零点消除电阻 $R_z$ 是如何引入一个左半平面零点以提升稳定性的，并明确其对不同性能指标的影响，为后续的设计优化打下坚实的数学基础。",
            "id": "4273420",
            "problem": "考虑一个用于集成电路和电子设计自动化 (EDA) 流程的 $2$ 级运算放大器。第一级是一个跨导器，其小信号跨导为 $g_{m1}$，输出电阻为 $r_{o1}$，产生节点电压 $v_{x}$。第二级是一个跨导器，其小信号跨导为 $g_{m2}$，输出电阻为 $r_{o2}$，产生输出电压 $v_{o}$。输出节点通过一个电容 $C_{L}$ 接地。在输出节点和中间节点之间，连接一个由串联电阻 $R_{z}$ 和电容 $C_{c}$ 组成的补偿支路。假设反馈系数是一个与频率无关的实常数 $\\beta$。\n\n从基尔霍夫电流定律 (KCL)、线性小信号跨导关系 $i = g_{m} v$ 以及电容导纳 $Y_{C} = s C$ 出发，推导该放大器的精确开环传递函数 $A(s) = \\frac{v_{o}}{v_{i}}$，表示为 $s$ 的有理函数，并明确显示 $R_{z}$ 如何出现在表达式中。使用您推导出的 $A(s)$，分析环路传输 $T(s) = \\beta A(s)$。\n\n然后，通过对您的表达式取适当的低频极限，证明 $R_{z}$ 是否影响低频环路传输 $T(0)$。此外，确定由补偿支路引入的左半平面零点（作为电路参数的函数），并解释该零点如何改变高频环路传输的幅度和相位。最后，基于基本原理，定性评估引入 $R_{z}$ 是否会改变由补偿电容和级限制的充电电流所设定的大信号转换速率。\n\n您最终报告的量必须是存在 $R_{z}$ 时的低频环路传输与 $R_{z} = 0$ 时的低频环路传输之比，表示为一个精确的单一值。无需四舍五入。该比值为无量纲；在最终答案中不要包含任何单位。",
            "solution": "该问题要求推导和分析一个具有特定频率补偿网络的两级运算放大器的传递函数。对问题陈述的验证证实了其具有科学依据、提法明确且客观，基于集成电路设计中使用的标准小信号模型。因此，我们可以着手求解。\n\n首先，我们建立小信号模型。该放大器由两级组成。第一级输入电压为 $v_i$，是一个跨导器，产生一个与 $v_i$ 相关的电流。该级的跨导为 $g_{m1}$，输出电阻为 $r_{o1}$。第二级输入电压为 $v_x$（第一级的输出），是一个跨导器，其跨导为 $g_{m2}$，输出电阻为 $r_{o2}$。其输出是整个放大器的输出 $v_o$。一个负载电容 $C_L$ 从输出节点 $v_o$ 连接到地。补偿网络由一个电容 $C_c$ 与一个电阻 $R_z$ 串联组成，连接在中间节点 $v_x$ 和输出节点 $v_o$ 之间。该补偿支路的导纳由 $Y_c(s) = \\frac{1}{R_z + 1/(sC_c)} = \\frac{sC_c}{1+sR_z C_c}$ 给出。\n\n我们将对节点 $v_x$ 和 $v_o$ 应用基尔霍夫电流定律 (KCL)。我们假设采用两级反相放大器的标准约定，即跨导级吸收电流。\n\n中间节点 $v_x$ 处的 KCL (离开节点的电流之和为零):\n第一级吸收的电流是 $g_{m1}v_i$。流经其输出电阻的电流是 $v_x/r_{o1}$。流经补偿支路的电流是 $(v_x - v_o)Y_c(s)$。\n$$g_{m1}v_i + \\frac{v_x}{r_{o1}} + (v_x - v_o)Y_c(s) = 0$$\n整理此方程，我们得到：\n$$v_x\\left(\\frac{1}{r_{o1}} + Y_c(s)\\right) - v_o Y_c(s) = -g_{m1}v_i \\quad (*)$$\n\n输出节点 $v_o$ 处的 KCL (离开节点的电流之和为零):\n第二级吸收的电流是 $g_{m2}v_x$。流经其输出电阻的电流是 $v_o/r_{o2}$。流经负载电容的电流是 $v_o s C_L$。流经补偿支路的电流是 $(v_o - v_x)Y_c(s)$。\n$$g_{m2}v_x + \\frac{v_o}{r_{o2}} + v_o s C_L + (v_o - v_x)Y_c(s) = 0$$\n整理此方程以求解 $v_x$：\n$$v_x(g_{m2} - Y_c(s)) + v_o\\left(\\frac{1}{r_{o2}} + sC_L + Y_c(s)\\right) = 0$$\n$$v_x = -v_o \\frac{\\frac{1}{r_{o2}} + sC_L + Y_c(s)}{g_{m2} - Y_c(s)} \\quad (**)$$\n\n现在，我们将 $(**)$ 中的 $v_x$ 表达式代入 $(*)$：\n$$-v_o \\frac{\\frac{1}{r_{o2}} + sC_L + Y_c(s)}{g_{m2} - Y_c(s)} \\left(\\frac{1}{r_{o1}} + Y_c(s)\\right) - v_o Y_c(s) = -g_{m1}v_i$$\n为了求得开环传递函数 $A(s) = \\frac{v_o}{v_i}$，我们两边除以 $-v_o$ 和 $g_{m1}$ 并取倒数：\n$$A(s) = \\frac{v_o}{v_i} = \\frac{g_{m1}}{\\frac{\\left(\\frac{1}{r_{o2}} + sC_L + Y_c(s)\\right)\\left(\\frac{1}{r_{o1}} + Y_c(s)\\right)}{g_{m2} - Y_c(s)} + Y_c(s)}$$\n$$A(s) = \\frac{g_{m1}(g_{m2} - Y_c(s))}{\\left(\\frac{1}{r_{o2}} + sC_L + Y_c(s)\\right)\\left(\\frac{1}{r_{o1}} + Y_c(s)\\right) + Y_c(s)(g_{m2} - Y_c(s))}$$\n展开分母：\n$$D(s) = \\left(\\frac{1}{r_{o1}r_{o2}} + \\frac{Y_c(s)}{r_{o2}} + \\frac{sC_L}{r_{o1}} + sC_L Y_c(s) + \\frac{Y_c(s)}{r_{o1}} + Y_c(s)^2\\right) + (g_{m2}Y_c(s) - Y_c(s)^2)$$\n$$D(s) = \\frac{1}{r_{o1}r_{o2}} + \\frac{sC_L}{r_{o1}} + Y_c(s)\\left(\\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} + sC_L + g_{m2}\\right)$$\n传递函数为：\n$$A(s) = \\frac{g_{m1}(g_{m2} - Y_c(s))}{D(s)} = \\frac{g_{m1}(g_{m2} - Y_c(s))}{\\frac{1}{r_{o1}r_{o2}} + \\frac{sC_L}{r_{o1}} + Y_c(s)\\left(g_{m2} + \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} + sC_L\\right)}$$\n现在，我们代入 $Y_c(s) = \\frac{sC_c}{1+sR_z C_c}$：\n分子变为：\n$$N(s) = g_{m1}\\left(g_{m2} - \\frac{sC_c}{1+sR_z C_c}\\right) = g_{m1}\\frac{g_{m2}(1+sR_z C_c) - sC_c}{1+sR_z C_c} = g_{m1}g_{m2}\\frac{1+sC_c(R_z - 1/g_{m2})}{1+sR_z C_c}$$\n分母变为：\n$$D(s) = \\frac{1}{r_{o1}r_{o2}} + \\frac{sC_L}{r_{o1}} + \\frac{sC_c}{1+sR_z C_c}\\left(g_{m2} + \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} + sC_L\\right)$$\n将它们组合起来，并给分子和分母同乘以 $(1+sR_z C_c)$：\n$$A(s) = \\frac{g_{m1}g_{m2}(1+sC_c(R_z - 1/g_{m2}))}{\\left(\\frac{1}{r_{o1}r_{o2}} + \\frac{sC_L}{r_{o1}}\\right)(1+sR_z C_c) + sC_c\\left(g_{m2} + \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} + sC_L\\right)}$$\n展开分母：\n$$D_{full}(s) = \\frac{1}{r_{o1}r_{o2}} + \\frac{sC_c R_z}{r_{o1}r_{o2}} + \\frac{sC_L}{r_{o1}} + s^2\\frac{C_L C_c R_z}{r_{o1}} + sC_c g_{m2} + \\frac{sC_c}{r_{o1}} + \\frac{sC_c}{r_{o2}} + s^2 C_c C_L$$\n按 $s$ 的幂次合并同类项：\n$$D_{full}(s) = \\frac{1}{r_{o1}r_{o2}} + s\\left[C_c\\left(g_{m2} + \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} + \\frac{R_z}{r_{o1}r_{o2}}\\right) + \\frac{C_L}{r_{o1}}\\right] + s^2\\left[C_c C_L\\left(1 + \\frac{R_z}{r_{o1}}\\right)\\right]$$\n精确的开环传递函数是：\n$$A(s) = \\frac{g_{m1}g_{m2}(1+sC_c(R_z - 1/g_{m2}))}{\\frac{1}{r_{o1}r_{o2}} + s\\left[C_c\\left(g_{m2} + \\frac{1}{r_{o1}} + \\frac{1}{r_{o2}} + \\frac{R_z}{r_{o1}r_{o2}}\\right) + \\frac{C_L}{r_{o1}}\\right] + s^2 C_c C_L\\left(1 + \\frac{R_z}{r_{o1}}\\right)}$$\n此表达式按要求明确显示了 $R_z$ 如何进入传递函数。\n\n接下来，我们分析环路传输 $T(s) = \\beta A(s)$。问题要求分析 $R_z$ 是否影响低频环路传输 $T(0)$。我们通过在 $T(s)$ 的表达式中令 $s=0$ 来求 $T(0)$：\n$$T(0) = \\beta A(0) = \\beta \\frac{g_{m1}g_{m2}(1+0)}{\\frac{1}{r_{o1}r_{o2}} + 0 + 0} = \\beta g_{m1}g_{m2}r_{o1}r_{o2}$$\n$T(0)$ 的表达式不包含 $R_z$。因此，我们证明了 $R_z$ 不影响低频环路传输。\n\n传递函数的零点可通过令分子为零求得：\n$$1+s_z C_c(R_z - 1/g_{m2}) = 0$$\n解出 $s_z$：\n$$s_z = -\\frac{1}{C_c(R_z - 1/g_{m2})}$$\n要使其成为一个左半平面 (LHP) 零点，$s_z$ 必须是一个负实数。由于 $C_c > 0$，我们需要 $R_z - 1/g_{m2} > 0$，即 $R_z > 1/g_{m2}$。\n\n左半平面零点会改变高频环路传输特性。位于频率 $\\omega_z = |s_z| = \\frac{1}{C_c(R_z - 1/g_{m2})}$ 处的零点对波特图的影响如下：\n1. 幅度：对于频率 $\\omega > \\omega_z$，幅度图斜率增加 $+20$ dB/十倍频。此效应可用于抵消来自极点的 $-20$ dB/十倍频斜率，从而有效平坦化单位增益频率附近的幅度响应。\n2. 相位：在 $\\omega_z$ 附近的频率（大约从 $0.1\\omega_z$ 到 $10\\omega_z$），零点贡献一个正相移（相位超前），最大可达 $+90^\\circ$。在 $\\omega = \\omega_z$ 处，相位超前为 $+45^\\circ$。这是引入 $R_z$ 使得 $R_z > 1/g_{m2}$ 的主要好处。放大器的极点会贡献相位滞后。特别是第二个极点，可能将相位裕度降低到不可接受的水平。来自左半平面零点的相位超前补偿了部分由极点引起的相位滞后，从而增加了相位裕度，改善了闭环放大器的稳定性。这种技术被称为极点-零点对消，其中左半平面零点被放置用来抵消放大器第二个极点的影响。\n\n最后，我们对 $R_z$ 对转换速率的影响进行定性评估。转换速率是一种大信号现象，由为电容器充电所能提供的最大电流决定。在此电路中，转换速率通常受第一级可提供的最大输出电流（其尾电流 $I_{tail1}$）对补偿电容 $C_c$ 充电的限制。输出端的转换速率为 $SR = \\frac{dV_o}{dt}|_{max}$。在转换期间，第一级被过驱动，向补偿支路提供或吸取恒定电流 $I_{tail1}$。该电流必须流过 $R_z$ 和 $C_c$ 的串联组合。电容 $C_c$ *两端*的电压变化率仍然由 $\\frac{dV_{Cc}}{dt} = \\frac{I_{tail1}}{C_c}$ 给出。在转换期间，反馈环路是开路的，第二级也处于饱和状态，导致其输入电压 $v_x$ 被钳位在一个近似恒定的饱和水平。输出电压 $v_o$ 通过补偿支路与 $v_x$ 相关。基本的限制过程是有限电流 $I_{tail1}$ 对 $C_c$ 的充电。串联的 $R_z$ 的存在不会改变这个限制电流或 $C_c$ 的值。它会在转换开始时在节点 $v_x$ 处引起一个 $I_{tail1}R_z$ 的瞬时电压阶跃，但它不改变随后输出端的稳态电压变化率。因此，在一阶近似下，引入 $R_z$ 不会改變大信号转换速率，该速率仍为 $SR \\approx \\frac{I_{tail1}}{C_c}$。\n\n最终要求的量是存在 $R_z$ 时的低频环路传输与 $R_z=0$ 时的低频环路传输之比。\n如前所述，低频环路传输为 $T(0) = \\beta g_{m1}g_{m2}r_{o1}r_{o2}$，它与 $R_z$ 无关。\n令 $T(0)|_{R_z}$ 为 $R_z$ 非零时的 $T(0)$，$T(0)|_{R_z=0}$ 为 $R_z=0$ 时的 $T(0)$。\n$$T(0)|_{R_z} = \\beta g_{m1}g_{m2}r_{o1}r_{o2}$$\n$$T(0)|_{R_z=0} = \\beta g_{m1}g_{m2}r_{o1}r_{o2}$$\n该比值为：\n$$\\frac{T(0)|_{R_z}}{T(0)|_{R_z=0}} = \\frac{\\beta g_{m1}g_{m2}r_{o1}r_{o2}}{\\beta g_{m1}g_{m2}r_{o1}r_{o2}} = 1$$",
            "answer": "$$\n\\boxed{1}\n$$"
        },
        {
            "introduction": "在掌握了基本分析方法之后，下一步便是将其应用于实际的设计决策中。这项实践模拟了一个真实的工程挑战：在严格的相位裕度约束下，优化放大器的核心参数（$g_{m1}$ 和 $C_c$），以最小化一个综合了噪声、压摆和建立时间的总误差。通过这个练习，你将学会如何运用理论模型来权衡复杂的性能指标，做出最优的设计选择。",
            "id": "4273397",
            "problem": "考虑一个配置为单位增益缓冲器的两级金属氧化物半导体（MOS）运算放大器。第一级是跨导为 $g_{m1}$ 的跨导器，驱动跨导为 $g_{m2}$ 的第二级，第二级又驱动一个电容性负载 $C_{L}$。该放大器采用 Miller 补偿，补偿电容器 $C_{c}$ 连接在中间节点和输出之间。一个调零电阻 $R_{z}$ 与 $C_{c}$ 串联以实现极点-零点对消；取 $R_{z}=1/g_{m2}$，使得由 $(R_{z},C_{c})$ 引起的左半平面零点在名义上与第二极点对齐。假设对消不完美，并通过一个残余因子 $0\\eta\\leq 1$ 对其进行参数化，有效非主导极点建模为 $\\omega_{p2}\\approx \\eta\\,g_{m2}/C_{L}$，有效零点建模为 $\\omega_{z}\\approx g_{m2}/C_{c}$。\n\n您的任务是选择一对参数 $(g_{m1},C_{c})$，以最小化一个加权总误差度量。该度量考虑了白热噪声、摆率限制和线性建立，外加一个与 $C_{c}$ 成正比的设计惩罚项，该惩罚项反映了大型片上电容器的硅面积和寄生成本。总误差度量为\n$$\nJ(g_{m1},C_{c}) \\;=\\; w_{n}\\,E_{\\mathrm{noise}} \\;+\\; w_{s}\\,E_{\\mathrm{slew}} \\;+\\; w_{\\ell}\\,E_{\\mathrm{settle}} \\;+\\; w_{c}\\,C_{c},\n$$\n其中 $w_{n}0$，$w_{s}0$，$w_{\\ell}0$ 和 $w_{c}0$ 是固定权重。假设：\n\n1. 主导单位增益带宽由补偿和第一级跨导决定，$\\omega_{u}=\\dfrac{g_{m1}}{C_{c}}$。\n\n2. 第一级跨导器的输入参考白噪声谱密度为 $S_{v_{n}}=\\dfrac{4 k_{B} T_{0}\\,\\gamma_{n}}{g_{m1}}$，其中 $k_{B}$ 是 Boltzmann 常数，$T_{0}$ 是环境温度，$\\gamma_{n}$ 是沟道热噪声因子。将闭环单位增益带宽内的积分噪声建模为 $E_{\\mathrm{noise}}=\\displaystyle\\int_{0}^{\\omega_{u}} S_{v_{n}}\\,\\dfrac{d\\omega}{2\\pi}$。\n\n3. 在幅度为 $V_{\\mathrm{step}}0$ 的阶跃之后，在固定的评估时间 $\\Delta t0$ 处的摆率限制残余误差与摆率成反比。对于驱动补偿电容器的差分对，取最大摆率为 $\\mathrm{SR}=\\dfrac{I_{1}}{C_{c}}$，其中 $I_{1}\\approx \\dfrac{g_{m1}V_{\\mathrm{ov1}}}{2}$，$V_{\\mathrm{ov1}}$ 是输入器件的过驱动电压。将摆率误差建模为 $E_{\\mathrm{slew}}=\\dfrac{V_{\\mathrm{step}}}{\\mathrm{SR}\\,\\Delta t}$。\n\n4. 在固定的评估时间 $t_{f}0$ 时剩余的线性建立误差，其变化规律类似于时间常数为 $\\tau\\approx 1/\\omega_{u}$ 的一阶衰减后的残余值，即 $E_{\\mathrm{settle}}=V_{\\mathrm{step}}\\exp\\!\\big(-\\omega_{u} t_{f}\\big)$。\n\n施加相位裕度约束 $\\mathrm{PM}\\geq 60^{\\circ}$。在具有部分极点-零点对消的 Miller 补偿两级放大器的标准双极点加一零点近似下，$\\omega_{u}$ 处的相位裕度可近似为\n$$\n\\mathrm{PM} \\;\\approx\\; 90^{\\circ} \\;-\\; \\arctan\\!\\Big(\\frac{\\omega_{u}}{\\omega_{p2}}\\Big),\n$$\n并使用上述 $\\omega_{p2}$ 模型来强制执行 $\\mathrm{PM}\\geq 60^{\\circ}$。\n\n从这些定义和近似出发，建立约束优化问题，并进行完整推导，以获得使 $J(g_{m1},C_{c})$ 在 $\\mathrm{PM}\\geq 60^{\\circ}$ 约束下最小化的最优参数对 $(g_{m1}^{\\star},C_{c}^{\\star})$ 的闭式设计方程。将您的最终答案表示为一个单行矩阵，给出用参数 $\\{w_{n},w_{s},w_{\\ell},w_{c},k_{B},T_{0},\\gamma_{n},V_{\\mathrm{ov1}},V_{\\mathrm{step}},\\Delta t,t_{f},g_{m2},C_{L},\\eta\\}$ 表示的 $g_{m1}^{\\star}$ 和 $C_{c}^{\\star}$；无需四舍五入。",
            "solution": "问题是找到最优的第一级跨导 $g_{m1}^{\\star}$ 和补偿电容 $C_{c}^{\\star}$，以在相位裕度约束下最小化总误差度量 $J(g_{m1}, C_{c})$。优化变量是 $(g_{m1}, C_{c})$。\n\n首先，我们使用给定的定义来构建目标函数 $J(g_{m1}, C_{c})$。目标函数是四项的加权和：\n$$\nJ(g_{m1},C_{c}) = w_{n}E_{\\mathrm{noise}} + w_{s}E_{\\mathrm{slew}} + w_{\\ell}E_{\\mathrm{settle}} + w_{c}C_{c}\n$$\n我们将每个误差分量用优化变量 $g_{m1}$ 和 $C_{c}$ 表示。\n\n1.  噪声误差 ($E_{\\mathrm{noise}}$):\n    输入参考白噪声谱密度由 $S_{v_{n}} = \\frac{4 k_{B} T_{0}\\gamma_{n}}{g_{m1}}$ 给出。积分噪声误差在单位增益带宽 $\\omega_{u} = g_{m1}/C_{c}$ 上计算。\n    $$\n    E_{\\mathrm{noise}} = \\int_{0}^{\\omega_{u}} S_{v_{n}}\\,\\dfrac{d\\omega}{2\\pi} = S_{v_{n}} \\frac{\\omega_{u}}{2\\pi} = \\left(\\frac{4 k_{B} T_{0}\\gamma_{n}}{g_{m1}}\\right) \\left(\\frac{g_{m1}/C_{c}}{2\\pi}\\right) = \\frac{2 k_{B} T_{0}\\gamma_{n}}{\\pi C_{c}}\n    $$\n    此项仅取决于 $C_c$。\n\n2.  摆率误差 ($E_{\\mathrm{slew}}$):\n    摆率为 $\\mathrm{SR} = \\frac{I_{1}}{C_{c}}$，其中 $I_{1} \\approx \\frac{g_{m1}V_{\\mathrm{ov1}}}{2}$。因此，$\\mathrm{SR} = \\frac{g_{m1}V_{\\mathrm{ov1}}}{2C_{c}}$。\n    摆率误差由 $E_{\\mathrm{slew}} = \\frac{V_{\\mathrm{step}}}{\\mathrm{SR}\\,\\Delta t}$ 给出。\n    $$\n    E_{\\mathrm{slew}} = \\frac{V_{\\mathrm{step}}}{\\left(\\frac{g_{m1}V_{\\mathrm{ov1}}}{2C_{c}}\\right)\\Delta t} = \\frac{2 V_{\\mathrm{step}} C_{c}}{g_{m1} V_{\\mathrm{ov1}} \\Delta t}\n    $$\n    此项取决于比率 $C_c/g_{m1}$。\n\n3.  线性建立误差 ($E_{\\mathrm{settle}}$):\n    建立误差建模为 $E_{\\mathrm{settle}} = V_{\\mathrm{step}}\\exp(-\\omega_{u} t_{f})$，时间常数为 $\\tau \\approx 1/\\omega_u$ 且 $\\omega_{u} = g_{m1}/C_{c}$。\n    $$\n    E_{\\mathrm{settle}} = V_{\\mathrm{step}}\\exp\\left(-\\frac{g_{m1}}{C_{c}} t_{f}\\right)\n    $$\n    此项取决于比率 $g_{m1}/C_{c}$。\n\n4.  电容惩罚项：\n    此项直接由 $w_c C_c$ 给出。\n\n综合这些项，总目标函数为：\n$$\nJ(g_{m1},C_{c}) = w_{n}\\left(\\frac{2 k_{B} T_{0}\\gamma_{n}}{\\pi C_{c}}\\right) + w_{s}\\left(\\frac{2 V_{\\mathrm{step}} C_{c}}{g_{m1} V_{\\mathrm{ov1}} \\Delta t}\\right) + w_{\\ell}V_{\\mathrm{step}}\\exp\\left(-\\frac{g_{m1}}{C_{c}} t_{f}\\right) + w_{c}C_{c}\n$$\n\n接下来，我们规范化相位裕度约束。问题指定了 $\\mathrm{PM} \\geq 60^{\\circ}$ 并提供了近似式：\n$$\n\\mathrm{PM} \\approx 90^{\\circ} - \\arctan\\left(\\frac{\\omega_{u}}{\\omega_{p2}}\\right)\n$$\n代入约束 $\\mathrm{PM} \\geq 60^{\\circ}$：\n$$\n90^{\\circ} - \\arctan\\left(\\frac{\\omega_{u}}{\\omega_{p2}}\\right) \\geq 60^{\\circ} \\implies 30^{\\circ} \\geq \\arctan\\left(\\frac{\\omega_{u}}{\\omega_{p2}}\\right)\n$$\n由于 $\\arctan(x)$ 是一个单调递增函数，我们可以对两边取正切：\n$$\n\\tan(30^{\\circ}) \\geq \\frac{\\omega_{u}}{\\omega_{p2}} \\implies \\frac{1}{\\sqrt{3}} \\geq \\frac{\\omega_{u}}{\\omega_{p2}}\n$$\n这给出了约束 $\\omega_{u} \\leq \\frac{\\omega_{p2}}{\\sqrt{3}}$。我们代入给定的表达式 $\\omega_{u} = g_{m1}/C_{c}$ 和 $\\omega_{p2} = \\eta g_{m2}/C_{L}$：\n$$\n\\frac{g_{m1}}{C_{c}} \\leq \\frac{1}{\\sqrt{3}}\\left(\\frac{\\eta g_{m2}}{C_{L}}\\right)\n$$\n该不等式定义了设计参数的可行域。\n\n问题现在是一个约束优化问题：在推导出的不等式约束下最小化 $J(g_{m1}, C_{c})$。为了简化问题，我们进行变量替换。令 $u = \\omega_{u} = g_{m1}/C_{c}$，另一个变量为 $C_{c}$。优化变量现在是 $(u, C_{c})$。目标函数变为：\n$$\nJ(u, C_{c}) = \\left(w_{c}C_{c} + \\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi C_{c}}\\right) + \\left(\\frac{2 w_{s} V_{\\mathrm{step}}}{u V_{\\mathrm{ov1}} \\Delta t} + w_{\\ell}V_{\\mathrm{step}}\\exp(-u t_{f})\\right)\n$$\n约束变为 $u \\leq u_{\\max}$，其中 $u_{\\max} = \\frac{\\eta g_{m2}}{\\sqrt{3} C_L}$。\n\n目标函数有利地分离为两个独立函数的和，一个仅依赖于 $C_c$，另一个仅依赖于 $u$：\n$$\nJ(u, C_{c}) = J_{1}(C_c) + J_{2}(u)\n$$\n其中\n$$\nJ_{1}(C_c) = w_{c}C_{c} + \\frac{1}{C_{c}}\\left(\\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi}\\right)\n$$\n$$\nJ_{2}(u) = \\frac{1}{u}\\left(\\frac{2 w_{s} V_{\\mathrm{step}}}{V_{\\mathrm{ov1}} \\Delta t}\\right) + w_{\\ell}V_{\\mathrm{step}}\\exp(-u t_{f})\n$$\n我们可以独立地最小化 $J_{1}(C_c)$ 和 $J_{2}(u)$。\n\n$J_{1}(C_c)$ 的最小化：\n为了找到 $C_c > 0$ 时 $J_{1}(C_c)$ 的最小值，我们计算它关于 $C_c$ 的导数并将其设为零。\n$$\n\\frac{dJ_{1}}{dC_{c}} = w_{c} - \\frac{1}{C_{c}^{2}}\\left(\\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi}\\right) = 0\n$$\n求解 $C_c$ 得到最优值 $C_{c}^{\\star}$：\n$$\nC_{c}^{\\star} = \\sqrt{\\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi w_{c}}}\n$$\n二阶导数 $\\frac{d^{2}J_{1}}{dC_{c}^{2}} = \\frac{2}{C_{c}^{3}}\\left(\\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi}\\right)$ 对于 $C_{c}>0$ 为正，这确认了该点是最小值。\n\n$J_{2}(u)$ 的最小化：\n我们需要在约束 $0  u \\leq u_{\\max}$ 下最小化 $J_{2}(u)$。我们来分析 $J_{2}(u)$ 的导数：\n$$\n\\frac{dJ_{2}}{du} = -\\frac{1}{u^{2}}\\left(\\frac{2 w_{s} V_{\\mathrm{step}}}{V_{\\mathrm{ov1}} \\Delta t}\\right) - t_{f} w_{\\ell}V_{\\mathrm{step}}\\exp(-u t_{f})\n$$\n问题陈述所有权重（$w_s, w_{\\ell}$）和物理参数（$V_{\\mathrm{step}}, V_{\\mathrm{ov1}}, \\Delta t, t_f$）都为正。因此，对于所有 $u > 0$，导数中的两项都为负。这意味着 $\\frac{dJ_{2}}{du}  0$，所以 $J_{2}(u)$ 是 $u$ 的一个严格单调递减函数。为了在可行区间 $(0, u_{\\max}]$ 上最小化 $J_{2}(u)$，我们必须为 $u$ 选择可能的最大值。\n因此，最优值 $u^{\\star}$ 位于约束的边界上：\n$$\nu^{\\star} = u_{\\max} = \\frac{\\eta g_{m2}}{\\sqrt{3} C_L}\n$$\n这意味着最优设计恰好工作在 $60^{\\circ}$ 的相位裕度极限上。\n\n最后，我们结合这些结果来求得最优参数 $(g_{m1}^{\\star}, C_{c}^{\\star})$。我们已经求出了 $C_{c}^{\\star}$。我们利用关系式 $u^{\\star} = g_{m1}^{\\star}/C_{c}^{\\star}$ 来求 $g_{m1}^{\\star}$。\n$$\ng_{m1}^{\\star} = u^{\\star} C_{c}^{\\star} = \\left(\\frac{\\eta g_{m2}}{\\sqrt{3} C_L}\\right) \\left(\\sqrt{\\frac{2 w_n k_B T_{0}\\gamma_{n}}{\\pi w_c}}\\right)\n$$\n因此，最优设计参数为：\n$$\nC_{c}^{\\star} = \\sqrt{\\frac{2 w_n k_B T_{0}\\gamma_{n}}{\\pi w_c}}\n$$\n$$\ng_{m1}^{\\star} = \\frac{\\eta g_{m2}}{\\sqrt{3} C_L} \\sqrt{\\frac{2 w_n k_B T_{0}\\gamma_{n}}{\\pi w_c}}\n$$\n这些表达式提供了用给定系统参数表示的最优设计参数对的完整解。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{\\eta g_{m2}}{\\sqrt{3} C_{L}} \\sqrt{\\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi w_{c}}}  \\sqrt{\\frac{2 w_{n} k_{B} T_{0}\\gamma_{n}}{\\pi w_{c}}} \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "一个优秀的设计不仅要在标称条件下表现出色，还必须能应对实际工作环境中的变化。这最后一个实践将检验零极点对消技术的鲁棒性。通过分析在输出端加入一个简单的阻性负载所带来的影响，你将量化输出极点的位置变化，并理解为何精心调谐的零极点对消会被破坏，这对于评估设计的实际性能至关重要。",
            "id": "4273330",
            "problem": "考虑一个用于电子设计自动化（EDA）中精密应用的单端两级运算放大器。其第二级在其输出节点处可建模为一个诺顿等效电路，该电路由一个驱动输出电阻 $R_o$ 和负载电容 $C_L$ 并联组合的小信号电流源组成。频率补偿是通过密勒路径中的串联电阻-电容网络实现的极点-零点对消技术，该网络经过调谐，使得在输出端仅存在 $C_L$ 时，引入的左半平面零点能精确抵消输出极点。随后，一个阻性负载 $R_L$ 与 $C_L$ 在输出节点并联（例如，由于下游的测量或接口仪器）。\n\n从基尔霍夫电流定律以及电容器和电阻器的本构关系出发，将输出节点建模为线性时不变单端口，并确定：\n\n- 在将 $R_L$ 与 $C_L$ 并联后，新的输出极点角频率。\n- 极点偏移乘法因子 $S$，定义为 $S = \\omega_{p,\\text{new}} / \\omega_{p,\\text{old}}$，其中 $\\omega_{p,\\text{old}}$ 是添加 $R_L$ 前的输出极点角频率，$\\omega_{p,\\text{new}}$ 是添加 $R_L$ 后的输出极点角频率。\n- 假设添加 $R_L$ 不会改变补偿零点的频率，判断添加 $R_L$ 后，原来的极点-零点对消是否仍然成立。\n\n将最终答案表示为偏移因子 $S$ 的闭式解析表达式。不需要进行数值计算。最终答案无单位。不要四舍五入。",
            "solution": "该问题要求分析一个两级运算放大器的输出级，以确定添加阻性负载 $R_L$ 对输出极点频率的影响。我们需要求出新的极点频率、极点偏移因子，并评论原始极点-零点对消的有效性。分析将基于将输出节点建模为线性时不变（LTI）单端口系统，并从第一性原理出发。\n\n首先，我们分析在添加阻性负载 $R_L$ **之前**的电路配置。输出节点被建模为诺顿等效电路，它包含一个小信号电流源（我们将其输出电流表示为 $i_{in}(t)$），驱动放大器固有输出电阻 $R_o$ 和负载电容 $C_L$ 的并联组合。设 $v_o(t)$ 为输出节点处的小信号电压。\n\n在输出节点应用基尔霍夫电流定律（KCL），来自源的总电流必须等于流经并联元件的电流之和：\n$$i_{in}(t) = i_{R_o}(t) + i_{C_L}(t)$$\n使用电阻和电容的本构关系，我们有 $i_{R_o}(t) = v_o(t) / R_o$ 和 $i_{C_L}(t) = C_L \\frac{dv_o(t)}{dt}$。将这些代入KCL方程，得到描述输出节点的一阶线性常微分方程：\n$$i_{in}(t) = \\frac{v_o(t)}{R_o} + C_L \\frac{dv_o(t)}{dt}$$\n为了求系统的极点，我们将此方程变换到拉普拉斯域。设 $I_{in}(s)$ 和 $V_o(s)$ 分别是 $i_{in}(t)$ 和 $v_o(t)$ 的拉普拉斯变换。假设初始条件为零，导数的变换为 $sV_o(s)$。方程变为：\n$$I_{in}(s) = \\frac{V_o(s)}{R_o} + s C_L V_o(s) = V_o(s) \\left(\\frac{1}{R_o} + s C_L\\right)$$\n从输入电流到输出电压的传递函数是输出阻抗 $Z_{o,\\text{old}}(s)$：\n$$Z_{o,\\text{old}}(s) = \\frac{V_o(s)}{I_{in}(s)} = \\frac{1}{\\frac{1}{R_o} + s C_L} = \\frac{R_o}{1 + s R_o C_L}$$\n极点是使传递函数幅值趋于无穷大的复频率变量 $s$ 的值。这发生在分母为零时。极点 $s_{p,\\text{old}}$ 位于：\n$$1 + s_{p,\\text{old}} R_o C_L = 0 \\implies s_{p,\\text{old}} = -\\frac{1}{R_o C_L}$$\n输出极点的角频率 $\\omega_{p,\\text{old}}$ 定义为此极点位置的幅值（或等效地，系统时间常数 $\\tau = R_o C_L$ 的倒数）。\n$$\\omega_{p,\\text{old}} = \\frac{1}{R_o C_L}$$\n这是添加 $R_L$ 之前输出极点的频率。\n\n接下来，我们分析在阻性负载 $R_L$ 与 $C_L$ 和 $R_o$ 并联**之后**的电路配置。输出节点的KCL方程更新为包含流经 $R_L$ 的电流：\n$$i_{in}(t) = i_{R_o}(t) + i_{R_L}(t) + i_{C_L}(t)$$\n使用本构关系，$i_{R_L}(t) = v_o(t) / R_L$。微分方程变为：\n$$i_{in}(t) = \\frac{v_o(t)}{R_o} + \\frac{v_o(t)}{R_L} + C_L \\frac{dv_o(t)}{dt} = v_o(t) \\left(\\frac{1}{R_o} + \\frac{1}{R_L}\\right) + C_L \\frac{dv_o(t)}{dt}$$\n我们可以定义一个等效电阻 $R_{eq}$，作为 $R_o$ 和 $R_L$ 的并联组合：\n$$R_{eq} = R_o \\parallel R_L = \\left(\\frac{1}{R_o} + \\frac{1}{R_L}\\right)^{-1} = \\frac{R_o R_L}{R_o + R_L}$$\n将 $R_{eq}$ 代入微分方程，将其简化为与原始情况类似的形式：\n$$i_{in}(t) = \\frac{v_o(t)}{R_{eq}} + C_L \\frac{dv_o(t)}{dt}$$\n在拉普拉斯域中遵循相同的步骤，新的输出阻抗 $Z_{o,\\text{new}}(s)$ 为：\n$$Z_{o,\\text{new}}(s) = \\frac{R_{eq}}{1 + s R_{eq} C_L}$$\n新的极点 $s_{p, \\text{new}}$ 通过将分母设为零来找到：\n$$1 + s_{p, \\text{new}} R_{eq} C_L = 0 \\implies s_{p, \\text{new}} = -\\frac{1}{R_{eq} C_L}$$\n因此，新的输出极点角频率 $\\omega_{p,\\text{new}}$ 为：\n$$\\omega_{p,\\text{new}} = \\frac{1}{R_{eq} C_L} = \\frac{1}{\\left(\\frac{R_o R_L}{R_o + R_L}\\right) C_L} = \\frac{R_o + R_L}{R_o R_L C_L}$$\n这是第一个要求的结果。\n\n第二个任务是求出极点偏移乘法因子 $S$，定义为 $S = \\omega_{p,\\text{new}} / \\omega_{p,\\text{old}}$。使用上面推导的表达式：\n$$S = \\frac{\\omega_{p,\\text{new}}}{\\omega_{p,\\text{old}}} = \\frac{\\frac{R_o + R_L}{R_o R_L C_L}}{\\frac{1}{R_o C_L}}$$\n简化表达式：\n$$S = \\frac{R_o + R_L}{R_o R_L C_L} \\cdot (R_o C_L) = \\frac{R_o + R_L}{R_L}$$\n这可以写成：\n$$S = 1 + \\frac{R_o}{R_L}$$\n这是偏移因子 $S$ 的闭式表达式。\n\n最后一个任务是确定原始的极点-零点对消是否仍然成立。最初，补偿零点（设其频率为 $\\omega_z$）被调谐以抵消输出极点。这意味着：\n$$\\omega_z = \\omega_{p,\\text{old}}$$\n问题陈述假设 $\\omega_z$ 不因添加 $R_L$ 而改变。新的极点频率是 $\\omega_{p,\\text{new}} = S \\cdot \\omega_{p,\\text{old}}$。为了使对消仍然成立，我们需要 $\\omega_z = \\omega_{p,\\text{new}}$。这要求 $\\omega_{p,\\text{old}} = \\omega_{p,\\text{new}}$，意味着 $S$ 必须等于 $1$。\n根据我们的表达式 $S = 1 + \\frac{R_o}{R_L}$，条件 $S = 1$ 只有在 $\\frac{R_o}{R_L} = 0$ 时才能满足。由于 $R_o$ 代表一个物理电阻且非零（否则就不会有一个在有限频率上需要对消的初始极点），这个条件要求 $R_L \\to \\infty$。条件 $R_L \\to \\infty$ 意味着没有添加阻性负载，这与前提矛盾。对于任何有限且非零的 $R_L$，我们有 $\\frac{R_o}{R_L}  0$，因为电阻是正值。\n因此，$S  1$，这意味着 $\\omega_{p,\\text{new}}  \\omega_{p,\\text{old}}$。\n由于 $\\omega_z = \\omega_{p,\\text{old}}$ 且 $\\omega_{p,\\text{new}}  \\omega_{p,\\text{old}}$，因此可以明确地断定 $\\omega_z \\neq \\omega_{p,\\text{new}}$。添加阻性负载 $R_L$ 会将输出极点移至更高的频率，从而破坏了极点-零点对消。在放大器的传递函数中会产生一个极点-零点偶极子，这会降低其瞬态建立性能。",
            "answer": "$$\\boxed{1 + \\frac{R_o}{R_L}}$$"
        }
    ]
}
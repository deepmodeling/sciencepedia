{
    "hands_on_practices": [
        {
            "introduction": "The performance of a Successive Approximation Register (SAR) ADC is fundamentally limited by the speed of its analog components. This practice delves into the acquisition phase, where the input signal must be accurately captured by the sampling capacitor. By modeling the sampling switch and capacitor as a first-order $RC$ network, this exercise  provides a foundational understanding of how to calculate the minimum time required for the sampling error to settle below a specified precision, directly linking basic circuit theory to the ADC's resolution and speed.",
            "id": "4254989",
            "problem": "A single-ended Successive Approximation Register (SAR) Analog-to-Digital Converter (ADC) uses a top-plate sampling network with a bootstrapped sampling switch of on-resistance $R_{\\mathrm{on}}$ and a sampling capacitor $C_{s}$. During acquisition, the input source has negligible output resistance, and all parasitics other than $C_{s}$ are neglected. At time $t=0$, the input undergoes a full-scale step from $0$ to $V_{\\mathrm{FS}}$, while the sampling switch is closed. The sampling node follows with first-order dynamics due to the $R_{\\mathrm{on}}C_{s}$ time constant. Define the least significant bit (LSB) for an $N$-bit converter over the range $[0, V_{\\mathrm{FS}}]$ as $\\mathrm{LSB} = V_{\\mathrm{FS}}/2^{N}$.\n\nStarting from first principles for a first-order linear time-invariant system driven by a step input and using the definition of LSB above, derive the minimum acquisition time $t_{\\mathrm{acq}}$ such that the magnitude of the sampling error at the end of acquisition is strictly less than $0.5\\,\\mathrm{LSB}$ for the specified full-scale step. Then evaluate your expression numerically for the following parameters: $C_{s} = 3.2\\,\\mathrm{pF}$, $R_{\\mathrm{on}} = 75\\,\\Omega$, $V_{\\mathrm{FS}} = 1.8\\,\\mathrm{V}$, and $N=14$.\n\nExpress your final numerical answer for $t_{\\mathrm{acq}}$ in $\\mathrm{ns}$, and round your answer to four significant figures.",
            "solution": "The sampling network, during the acquisition phase with the switch closed, is modeled as a simple series RC circuit. The input voltage is applied to the series combination of the switch resistance $R_{\\mathrm{on}}$ and the sampling capacitor $C_s$. The voltage across the capacitor, $V_s(t)$, is the signal being sampled.\n\nThe circuit is governed by the first-order linear ordinary differential equation:\n$$R_{\\mathrm{on}}C_s \\frac{dV_s(t)}{dt} + V_s(t) = V_{\\mathrm{in}}(t)$$\nLet the time constant of the system be $\\tau = R_{\\mathrm{on}}C_s$. The equation becomes:\n$$\\tau \\frac{dV_s(t)}{dt} + V_s(t) = V_{\\mathrm{in}}(t)$$\nThe problem specifies a full-scale step input at $t=0$, where the input voltage $V_{\\mathrm{in}}(t)$ changes from $0$ to $V_{\\mathrm{FS}}$. For $t \\ge 0$, the input is $V_{\\mathrm{in}}(t) = V_{\\mathrm{FS}}$. The initial condition, corresponding to the voltage level before the step, is $V_s(0) = 0$.\n\nThe general solution for the voltage on the capacitor in a first-order system responding to a step input is:\n$$V_s(t) = V_{\\mathrm{final}} + (V_{\\mathrm{initial}} - V_{\\mathrm{final}})\\exp(-t/\\tau)$$\nIn this case, the initial voltage is $V_{\\mathrm{initial}} = V_s(0) = 0$, and the final steady-state voltage is $V_{\\mathrm{final}} = V_{\\mathrm{FS}}$. Substituting these into the general solution gives the response of the sampling node:\n$$V_s(t) = V_{\\mathrm{FS}} + (0 - V_{\\mathrm{FS}})\\exp(-t/\\tau)$$\n$$V_s(t) = V_{\\mathrm{FS}} (1 - \\exp(-t/\\tau))$$\nThis equation describes the voltage on the sampling capacitor as a function of time.\n\nThe sampling error at any time $t$ during acquisition, $V_{\\mathrm{err}}(t)$, is the difference between the final target voltage $V_{\\mathrm{FS}}$ and the actual sampled voltage $V_s(t)$:\n$$V_{\\mathrm{err}}(t) = V_{\\mathrm{FS}} - V_s(t)$$\nSubstituting the expression for $V_s(t)$:\n$$V_{\\mathrm{err}}(t) = V_{\\mathrm{FS}} - V_{\\mathrm{FS}}(1 - \\exp(-t/\\tau)) = V_{\\mathrm{FS}} - V_{\\mathrm{FS}} + V_{\\mathrm{FS}}\\exp(-t/\\tau)$$\n$$V_{\\mathrm{err}}(t) = V_{\\mathrm{FS}}\\exp(-t/\\tau)$$\nSince $V_{\\mathrm{FS}} > 0$, the error $V_{\\mathrm{err}}(t)$ is always positive for finite $t$, so its magnitude is $|V_{\\mathrm{err}}(t)| = V_{\\mathrm{err}}(t)$.\n\nThe problem requires that at the end of the acquisition period, $t = t_{\\mathrm{acq}}$, the magnitude of the sampling error must be strictly less than half of one LSB. The condition is:\n$$|V_{\\mathrm{err}}(t_{\\mathrm{acq}})| < 0.5\\,\\mathrm{LSB}$$\nUsing the definition $\\mathrm{LSB} = V_{\\mathrm{FS}}/2^N$, the condition becomes:\n$$V_{\\mathrm{FS}}\\exp(-t_{\\mathrm{acq}}/\\tau) < 0.5 \\left(\\frac{V_{\\mathrm{FS}}}{2^N}\\right)$$\nAssuming $V_{\\mathrm{FS}} \\neq 0$, we can divide both sides by $V_{\\mathrm{FS}}$:\n$$\\exp(-t_{\\mathrm{acq}}/\\tau) < \\frac{0.5}{2^N} = \\frac{1}{2 \\cdot 2^N} = \\frac{1}{2^{N+1}}$$\nTo solve for $t_{\\mathrm{acq}}$, we take the natural logarithm of both sides. Since the natural logarithm is a strictly increasing function, the inequality is preserved:\n$$\\ln(\\exp(-t_{\\mathrm{acq}}/\\tau)) < \\ln\\left(\\frac{1}{2^{N+1}}\\right)$$\n$$- \\frac{t_{\\mathrm{acq}}}{\\tau} < -\\ln(2^{N+1})$$\n$$- \\frac{t_{\\mathrm{acq}}}{\\tau} < -(N+1)\\ln(2)$$\nMultiplying both sides by $-1$ reverses the inequality sign:\n$$\\frac{t_{\\mathrm{acq}}}{\\tau} > (N+1)\\ln(2)$$\n$$t_{\\mathrm{acq}} > \\tau(N+1)\\ln(2)$$\nSubstituting $\\tau = R_{\\mathrm{on}}C_s$, we get the analytical expression for the required acquisition time:\n$$t_{\\mathrm{acq}} > R_{\\mathrm{on}}C_s(N+1)\\ln(2)$$\nThe minimum acquisition time $t_{\\mathrm{acq, min}}$ is the boundary value from the inequality:\n$$t_{\\mathrm{acq, min}} = R_{\\mathrm{on}}C_s(N+1)\\ln(2)$$\n\nNow, we evaluate this expression numerically using the given parameters:\n$N = 14$\n$R_{\\mathrm{on}} = 75\\,\\Omega$\n$C_s = 3.2\\,\\mathrm{pF} = 3.2 \\times 10^{-12}\\,\\mathrm{F}$\n\nFirst, calculate the time constant $\\tau$:\n$$\\tau = R_{\\mathrm{on}}C_s = (75\\,\\Omega) \\times (3.2 \\times 10^{-12}\\,\\mathrm{F}) = 240 \\times 10^{-12}\\,\\mathrm{s} = 0.24 \\times 10^{-9}\\,\\mathrm{s}$$\nNow, calculate the minimum acquisition time $t_{\\mathrm{acq}}$:\n$$t_{\\mathrm{acq}} = (14+1) \\ln(2) \\times (0.24 \\times 10^{-9}\\,\\mathrm{s})$$\n$$t_{\\mathrm{acq}} = 15 \\ln(2) \\times (0.24 \\times 10^{-9}\\,\\mathrm{s})$$\nUsing the value $\\ln(2) \\approx 0.69314718$:\n$$t_{\\mathrm{acq}} \\approx 15 \\times 0.69314718 \\times 0.24 \\times 10^{-9}\\,\\mathrm{s}$$\n$$t_{\\mathrm{acq}} \\approx 10.3972077 \\times 0.24 \\times 10^{-9}\\,\\mathrm{s}$$\n$$t_{\\mathrm{acq}} \\approx 2.4953298 \\times 10^{-9}\\,\\mathrm{s}$$\nThe result in nanoseconds is:\n$$t_{\\mathrm{acq}} \\approx 2.4953298\\,\\mathrm{ns}$$\nThe problem requires the answer to be rounded to four significant figures.\n$$t_{\\mathrm{acq}} \\approx 2.495\\,\\mathrm{ns}$$",
            "answer": "$$\\boxed{2.495}$$"
        },
        {
            "introduction": "While individual error sources like incomplete settling are critical, a comprehensive evaluation of an ADC requires a single figure of merit that captures its overall dynamic performance. This practice introduces the concept of the Effective Number of Bits (ENOB), a powerful metric derived from the measured Signal-to-Noise-and-Distortion Ratio (SINAD). By working through this problem , you will learn how to connect the theoretical signal-to-noise ratio of an ideal quantizer to the performance of a real-world converter, enabling you to interpret and compare ADC specifications effectively.",
            "id": "4255064",
            "problem": "An Analog-to-Digital Converter (ADC) based on the Successive Approximation Register (SAR) architecture is characterized using a coherent, full-scale sinusoidal input at a sampling rate where aperture jitter, clock feedthrough, and input amplifier noise are negligible compared to conversion noise and distortion. The measurement instrumentation reports a signal-to-noise-and-distortion ratio (SINAD) of $67.9\\,\\mathrm{dB}$ for the SAR converter. For context, recall that the ideal signal-to-noise ratio (SNR) due to quantization for an $N$-bit uniform midtread quantizer driven by a full-scale sinusoidal input is a well-tested result of the quantization noise model.\n\nStarting from the quantization noise model and the ideal SNR for a full-scale sinusoidal input, derive an expression that maps a measured signal-to-noise-and-distortion ratio, $SINAD$, to an effective number of bits, $N_{\\mathrm{eff}}$, and justify why $SINAD$ is used in place of $SNR$ in this mapping. Then, compute the numerical value of the effective number of bits for the reported $67.9\\,\\mathrm{dB}$ measurement. Round your answer to four significant figures and express the final effective number of bits in bits.",
            "solution": "The problem asks us to relate the performance of a real ADC, quantified by its Signal-to-Noise-and-Distortion Ratio ($SINAD$), to the performance of an ideal ADC, quantified by its theoretical Signal-to-Noise Ratio ($SNR$). This leads to the definition of the effective number of bits, $N_{\\mathrm{eff}}$.\n\nFirst, we derive the expression for the ideal $SNR$ of an $N$-bit ADC for a full-scale sinusoidal input. An ideal $N$-bit quantizer with a full-scale range $V_{FS}$ has a quantization step size $\\Delta = \\frac{V_{FS}}{2^N}$. The input is a full-scale sinusoid, $v_{in}(t) = A \\sin(\\omega t)$, with amplitude $A = \\frac{V_{FS}}{2}$.\n\nThe power of this sinusoidal signal, $P_S$, is its mean-square value:\n$$ P_S = \\frac{A^2}{2} = \\frac{1}{2} \\left( \\frac{V_{FS}}{2} \\right)^2 = \\frac{V_{FS}^2}{8} $$\nFor an ideal ADC, the only error is quantization error, $e_q$, which is modeled as a uniformly distributed random variable over $[-\\frac{\\Delta}{2}, \\frac{\\Delta}{2}]$. The power of this quantization noise, $P_N$, is the variance of this distribution:\n$$ P_N = E[e_q^2] = \\int_{-\\Delta/2}^{\\Delta/2} e^2 \\frac{1}{\\Delta} \\, de = \\frac{\\Delta^2}{12} $$\nSubstituting the expression for $\\Delta$:\n$$ P_N = \\frac{1}{12} \\left( \\frac{V_{FS}}{2^N} \\right)^2 = \\frac{V_{FS}^2}{12 \\cdot (2^N)^2} = \\frac{V_{FS}^2}{12 \\cdot 4^N} $$\nThe ideal Signal-to-Noise Ratio ($SNR_{ideal}$) is the ratio of signal power to noise power:\n$$ SNR_{ideal} = \\frac{P_S}{P_N} = \\frac{V_{FS}^2 / 8}{V_{FS}^2 / (12 \\cdot 4^N)} = \\frac{12 \\cdot 4^N}{8} = 1.5 \\cdot 2^{2N} $$\nIn decibels (dB), the ideal $SNR$ is:\n$$ SNR_{ideal, dB} = 10 \\log_{10}(1.5 \\cdot 2^{2N}) = 10 \\log_{10}(1.5) + 2N \\cdot 10 \\log_{10}(2) $$\nThis expression is the well-known formula $SNR_{ideal, dB} \\approx 1.76 + 6.02N$.\n\nA real ADC's performance is degraded by not only quantization noise but also other non-idealities like thermal noise and, importantly, harmonic distortion from transfer function non-linearity. The Signal-to-Noise-and-Distortion Ratio ($SINAD$) captures all these effects by comparing the signal power to the total power of all noise and distortion components, $P_{N+D}$. The effective number of bits, $N_{\\mathrm{eff}}$, is defined as the resolution of an ideal ADC that would have the same signal-to-error ratio as the real ADC under test. Therefore, to find $N_{\\mathrm{eff}}$, we equate the measured $SINAD$ with the theoretical $SNR_{ideal}$ of a hypothetical ideal ADC with $N = N_{\\mathrm{eff}}$ bits. This is why $SINAD$ is the correct metric to use, as it provides a comprehensive figure of merit for the converter's dynamic performance.\n\nThe mapping is established by the equivalence:\n$$ SINAD_{dB} = SNR_{ideal, dB}(N_{\\mathrm{eff}}) $$\n$$ SINAD_{dB} = 10 \\log_{10}(1.5) + 2 N_{\\mathrm{eff}} \\cdot 10 \\log_{10}(2) $$\nSolving for $N_{\\mathrm{eff}}$, we get the desired expression:\n$$ N_{\\mathrm{eff}} = \\frac{SINAD_{dB} - 10 \\log_{10}(1.5)}{20 \\log_{10}(2)} $$\n\nFinally, we compute the numerical value for the given $SINAD$ of $67.9\\,\\mathrm{dB}$:\n$$ N_{\\mathrm{eff}} = \\frac{67.9 - 10 \\log_{10}(1.5)}{20 \\log_{10}(2)} $$\nUsing the values for the logarithmic terms:\n$10 \\log_{10}(1.5) \\approx 1.76091$\n$20 \\log_{10}(2) \\approx 6.02060$\n$$ N_{\\mathrm{eff}} \\approx \\frac{67.9 - 1.76091}{6.02060} = \\frac{66.13909}{6.02060} \\approx 10.98545 $$\nRounding the result to four significant figures gives:\n$$ N_{\\mathrm{eff}} \\approx 10.99 $$\nThe effective number of bits for this ADC is $10.99$ bits.",
            "answer": "$$ \\boxed{10.99} $$"
        },
        {
            "introduction": "Beyond dynamic performance, the static linearity of an ADC is paramount and is often limited by imperfections in its internal Digital-to-Analog Converter (DAC). This exercise  explores how random mismatch between the unit capacitors in a DAC, a consequence of manufacturing variability, directly impacts the converter's Integral Nonlinearity (INL). Applying Pelgrom’s law, you will derive the relationship between the physical size of the components and the resulting static performance, a crucial skill in designing robust analog integrated circuits that meet yield targets.",
            "id": "4255018",
            "problem": "A segmented Successive Approximation Register Analog-to-Digital Converter (SAR ADC) uses a capacitive Digital-to-Analog Converter (DAC) implemented with Metal-Insulator-Metal (MIM) capacitors. The overall resolution is $N=10$ bits. The most significant $K=5$ bits are realized with a thermometer-coded array of $M=2^{K}$ identical unit capacitors arranged in common-centroid to suppress systematic gradients; the remaining least significant $N-K$ bits are implemented with binary-weighted capacitors whose contribution to mismatch-limited static nonlinearity is negligible compared to the thermometer-coded segment in this design. Assume independent, zero-mean random mismatch for each unit capacitor and that mismatch obeys Pelgrom’s law: the standard deviation of relative mismatch scales as\n$$\n\\frac{\\sigma_{\\Delta C}}{C_{u}}=\\frac{A_{C}}{\\sqrt{A_{u}}},\n$$\nwhere $C_{u}$ is the nominal unit capacitance, $A_{u}$ is the physical area of the unit capacitor, and $A_{C}$ is the process-dependent Pelgrom coefficient for MIM capacitors. The Integral Nonlinearity (INL) is defined as the maximum magnitude of the static transfer function deviation from an ideal straight line, expressed in units of the least significant bit (LSB) of the full $N$-bit converter.\n\nStarting from first principles (device mismatch statistics and the small-signal linearization of the DAC output ratio), derive a closed-form inequality for the minimum unit area $A_{u}$ that guarantees the mismatch-limited peak INL of the full $N$-bit converter is less than a specified target $\\varepsilon$ LSB with $99.7\\%$ yield (i.e., three standard deviations). Then, evaluate this minimum area for the following design targets and process parameters: $N=10$, $K=5$, $\\varepsilon=0.25$, and $A_{C}=0.01$ micrometers. Express the final area $A_{u}$ in $\\mu\\text{m}^{2}$ and round your answer to four significant figures.",
            "solution": "This problem requires deriving the minimum unit capacitor area, $A_u$, to meet a specified Integral Nonlinearity (INL) target with high yield. The analysis focuses on the mismatch in the $K$-bit thermometer-coded MSB segment of a capacitive DAC.\n\nFirst, we model the impact of capacitor mismatch on the DAC output voltage. The MSB segment consists of $M=2^K$ unit capacitors. For an input code $m$ (from $0$ to $M$), $m$ capacitors are switched. Due to random mismatch, each capacitor $C_{u,i}$ has a value $C_u + \\Delta C_i$, where $\\Delta C_i$ is a random deviation with mean 0 and variance $\\sigma_{\\Delta C}^2$. The voltage error at the DAC output, $\\Delta V(m)$, can be approximated for small mismatches as:\n$$\\Delta V(m) \\approx \\frac{V_{ref}}{M C_u} \\left( \\sum_{i \\in S_m} \\Delta C_i - \\frac{m}{M} \\sum_{j=1}^{M} \\Delta C_j \\right)$$\nwhere $S_m$ is the set of $m$ selected capacitors. Since the deviations $\\Delta C_i$ are uncorrelated, the variance of the voltage error can be shown to be:\n$$Var(\\Delta V(m)) = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 \\sigma_{\\Delta C}^2 \\frac{m(M-m)}{M}$$\nThis variance is maximized at mid-code, $m=M/2$, which is where the peak INL is expected to occur due to this error source. The peak variance is:\n$$Var(\\Delta V_{peak}) = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 \\sigma_{\\Delta C}^2 \\frac{(M/2)(M-M/2)}{M} = \\left(\\frac{V_{ref}}{M C_u}\\right)^2 \\sigma_{\\Delta C}^2 \\frac{M}{4}$$\nThe standard deviation of the peak voltage error is thus:\n$$\\sigma_{\\Delta V, peak} = \\sqrt{Var(\\Delta V_{peak})} = \\frac{V_{ref}}{M C_u} \\sigma_{\\Delta C} \\frac{\\sqrt{M}}{2} = \\frac{V_{ref}}{2\\sqrt{M} C_u} \\sigma_{\\Delta C}$$\nNext, we express this error in units of the Least Significant Bit (LSB) of the full $N$-bit converter. The LSB size is $V_{LSB} = V_{ref}/2^N$. The standard deviation of the peak INL is:\n$$\\sigma_{INL, peak} = \\frac{\\sigma_{\\Delta V, peak}}{V_{LSB}} = \\frac{\\frac{V_{ref}}{2\\sqrt{M} C_u} \\sigma_{\\Delta C}}{\\frac{V_{ref}}{2^N}} = \\frac{2^N}{2\\sqrt{M}} \\frac{\\sigma_{\\Delta C}}{C_u}$$\nSubstituting $M=2^K$, we simplify this to:\n$$\\sigma_{INL, peak} = \\frac{2^N}{2 \\cdot 2^{K/2}} \\frac{\\sigma_{\\Delta C}}{C_u} = 2^{N - K/2 - 1} \\frac{\\sigma_{\\Delta C}}{C_u}$$\nThe problem requires a $99.7\\%$ yield, which corresponds to a $3\\sigma$ design margin. The peak INL must be less than the target $\\varepsilon$:\n$$3 \\cdot \\sigma_{INL, peak} < \\varepsilon$$\n$$3 \\cdot 2^{N - K/2 - 1} \\frac{\\sigma_{\\Delta C}}{C_u} < \\varepsilon$$\nNow, we introduce Pelgrom’s law, which relates relative mismatch to capacitor area: $\\frac{\\sigma_{\\Delta C}}{C_{u}}=\\frac{A_{C}}{\\sqrt{A_{u}}}$.\n$$3 \\cdot 2^{N - K/2 - 1} \\frac{A_C}{\\sqrt{A_u}} < \\varepsilon$$\nSolving this inequality for the minimum unit area $A_u$:\n$$\\sqrt{A_u} > \\frac{3 \\cdot A_C \\cdot 2^{N - K/2 - 1}}{\\varepsilon}$$\n$$A_u > \\left( \\frac{3 \\cdot A_C \\cdot 2^{N - K/2 - 1}}{\\varepsilon} \\right)^2$$\nThis is the required closed-form inequality. Now, we evaluate it numerically with the given parameters: $N=10$, $K=5$, $\\varepsilon=0.25$, and $A_C = 0.01\\ \\mu\\mathrm{m}$.\nThe exponent is $N - K/2 - 1 = 10 - 5/2 - 1 = 10 - 2.5 - 1 = 6.5$.\nThe minimum required area $A_{u,min}$ is the boundary of the inequality:\n$$A_{u,min} = \\left( \\frac{3 \\cdot (0.01) \\cdot 2^{6.5}}{0.25} \\right)^2$$\nLet's compute the term in the parentheses:\n$$\\frac{3 \\cdot 0.01 \\cdot 2^6 \\cdot \\sqrt{2}}{0.25} = \\frac{0.03 \\cdot 64 \\cdot \\sqrt{2}}{0.25} = \\frac{1.92 \\cdot \\sqrt{2}}{0.25} = 4 \\cdot 1.92 \\cdot \\sqrt{2} = 7.68 \\sqrt{2}$$\nSquaring this value gives the area:\n$$A_{u,min} = (7.68 \\sqrt{2})^2 = (7.68)^2 \\cdot 2 = 58.9824 \\cdot 2 = 117.9648$$\nThe unit of $A_C$ is $\\mu\\mathrm{m}$, so the unit of $A_u$ is $\\mu\\text{m}^2$. Rounding the result to four significant figures gives $118.0$.",
            "answer": "$$\\boxed{118.0}$$"
        }
    ]
}
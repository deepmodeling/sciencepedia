{
    "hands_on_practices": [
        {
            "introduction": "The foundation of electromigration lifetime prediction is Black's equation, an empirical model that has been the cornerstone of reliability analysis for decades. This model elegantly captures the two primary drivers of electromigration damage: thermal activation and current density. In this exercise, you will work directly with this model by using data from hypothetical accelerated life tests to determine the relationship between its key physical parameters: the activation energy $E_a$ and the current density exponent $n$. This practice is fundamental to understanding how reliability models are calibrated and provides critical insight into the challenge of parameter identifiability from limited experimental data .",
            "id": "4268451",
            "problem": "In advanced interconnect reliability for Integrated Circuits and Electronic Design Automation (EDA), electromigration is modeled by combining two well-tested bases: (i) atomic transport governed by a thermally activated process with an Arrhenius temperature dependence, and (ii) a current-density-driven damage acceleration that follows a power-law scaling with current density. Specifically, the atomic jump rate is proportional to $\\exp(-E_a/(k_B T))$, where $E_a$ is an activation energy and $k_B$ is the Boltzmann constant, and the electromigration damage rate accelerates with current density $J$ according to a power exponent $n$. The mean time to failure (MTTF), denoted $t$, scales inversely with the damage rate. Consider a single-level copper interconnect with constant cross-section and identical microstructure across tests (no significant self-heating). Two accelerated test conditions are applied:\n- Test 1: current density $J_1 = 1.0 \\times 10^6$ $\\mathrm{A/cm^2}$ and absolute temperature $T_1 = 423$ $\\mathrm{K}$, with measured mean time to failure $t_1 = 200$ $\\mathrm{h}$.\n- Test 2: current density $J_2 = 0.9 \\times 10^6$ $\\mathrm{A/cm^2}$ and absolute temperature $T_2 = 398$ $\\mathrm{K}$, with measured mean time to failure $t_2 = 1000$ $\\mathrm{h}$.\nStarting from the Arrhenius law for thermally activated processes and the power-law acceleration with current density for electromigration damage, derive the dependence of $t$ on $J$ and $T$ using material-dependent constants $E_a$, $n$, and a prefactor $A$. Using only the two tests above, eliminate the prefactor $A$ and solve for the exact functional relationship between $E_a$ and $n$ that is consistent with both measurements. Express the activation energy $E_a$ as a closed-form analytic function of $n$, using the Boltzmann constant $k_B$ in electronvolts per Kelvin so that $E_a$ is in electronvolts. Provide your final expression in exact form; do not approximate or round. Additionally, explain whether $A$ is identifiable without additional data, and comment on the individual identifiability of $E_a$ and $n$ from only these two points.",
            "solution": "The mean time to failure (MTTF), $t$, is modeled by Black's equation, which incorporates a power-law dependence on current density $J$ and an Arrhenius dependence on temperature $T$. The damage rate is proportional to $J^n \\exp(-E_a/(k_B T))$, and since the MTTF is inversely proportional to the damage rate, the equation takes the form:\n$$ t = A J^{-n} \\exp\\left(\\frac{E_a}{k_B T}\\right) $$\nHere, $A$ is a prefactor, $n$ is the current density exponent, $E_a$ is the activation energy, and $k_B$ is the Boltzmann constant.\n\nWe are given two sets of test data:\n- Test 1: $J_1 = 1.0 \\times 10^6$ $\\mathrm{A/cm^2}$, $T_1 = 423$ $\\mathrm{K}$, $t_1 = 200$ $\\mathrm{h}$.\n- Test 2: $J_2 = 0.9 \\times 10^6$ $\\mathrm{A/cm^2}$, $T_2 = 398$ $\\mathrm{K}$, $t_2 = 1000$ $\\mathrm{h}$.\n\nWe can write Black's equation for each test:\n1.  $t_1 = A J_1^{-n} \\exp\\left(\\frac{E_a}{k_B T_1}\\right)$\n2.  $t_2 = A J_2^{-n} \\exp\\left(\\frac{E_a}{k_B T_2}\\right)$\n\nTo find the relationship between $E_a$ and $n$, we first eliminate the prefactor $A$ by taking the ratio of the two equations:\n$$ \\frac{t_1}{t_2} = \\frac{A J_1^{-n} \\exp\\left(\\frac{E_a}{k_B T_1}\\right)}{A J_2^{-n} \\exp\\left(\\frac{E_a}{k_B T_2}\\right)} = \\left(\\frac{J_2}{J_1}\\right)^{n} \\exp\\left(\\frac{E_a}{k_B} \\left(\\frac{1}{T_1} - \\frac{1}{T_2}\\right)\\right) $$\nTaking the natural logarithm of both sides allows us to solve for $E_a$:\n$$ \\ln\\left(\\frac{t_1}{t_2}\\right) = n \\ln\\left(\\frac{J_2}{J_1}\\right) + \\frac{E_a}{k_B} \\left(\\frac{1}{T_1} - \\frac{1}{T_2}\\right) $$\nThis equation defines the linear relationship between $E_a$ and $n$. To express $E_a$ as a function of $n$, we rearrange:\n$$ \\frac{E_a}{k_B} \\left(\\frac{1}{T_1} - \\frac{1}{T_2}\\right) = \\ln\\left(\\frac{t_1}{t_2}\\right) - n \\ln\\left(\\frac{J_2}{J_1}\\right) $$\n$$ E_a = k_B \\left(\\frac{T_1 T_2}{T_2 - T_1}\\right) \\left[ \\ln\\left(\\frac{t_1}{t_2}\\right) - n \\ln\\left(\\frac{J_2}{J_1}\\right) \\right] $$\nNow, we substitute the given values:\n- $t_1/t_2 = 200/1000 = 1/5$\n- $J_2/J_1 = 0.9/1.0 = 0.9$\n- $T_1 = 423$ K, $T_2 = 398$ K\n$$ E_a = k_B \\left(\\frac{423 \\times 398}{398 - 423}\\right) \\left[ \\ln(1/5) - n \\ln(0.9) \\right] $$\n$$ E_a = k_B \\left(\\frac{168354}{-25}\\right) \\left[ -\\ln(5) - n \\ln(0.9) \\right] $$\n$$ E_a = k_B \\left(\\frac{168354}{25}\\right) \\left[ \\ln(5) + n \\ln(0.9) \\right] $$\nThis is the final closed-form expression for $E_a$ as a function of $n$.\n\n**Parameter Identifiability:**\nWith only two experimental data points, we have one linear equation with two unknowns ($E_a$ and $n$). This means we can only determine a line of possible $(E_a, n)$ pairs, not a unique solution. Therefore, $E_a$ and $n$ are not individually identifiable. To uniquely determine both parameters, data from at least one more independent test (a third set of $J, T, t$ values) would be required. Since $E_a$ and $n$ are not uniquely known, the prefactor $A$ is also not uniquely identifiable.",
            "answer": "$$ \\boxed{E_a(n) = k_B \\frac{168354}{25} \\left( \\ln(5) + n \\ln(0.9) \\right)} $$"
        },
        {
            "introduction": "While Black's equation predicts the lifetime of a wire, not all wires are equally susceptible to electromigration failure. A crucial mitigating factor is the \"short-line effect,\" quantified by the Blech criterion, which states that interconnects below a certain length-current density product threshold can be immune to void formation due to counteracting mechanical stress gradients. This hands-on problem challenges you to apply this vital design rule to a realistic multi-branch interconnect network . You will first need to apply Kirchhoff's Current Law to determine the current flowing through each segment before calculating the local Blech product, simulating a core task in physical design verification and EM signoff.",
            "id": "4268482",
            "problem": "In an interconnect reliability analysis within Electronic Design Automation (EDA), consider a routed copper net on a single metal layer at uniform temperature, where electromigration (EM) is evaluated using the local Blech product defined for segment $i$ as $\\beta_i$, the magnitude of the segment’s current density multiplied by its physical length. Assume negligible current crowding so that current density is spatially uniform in each segment and equals $J_i = I_i/A_i$, where $I_i$ is the segment current and $A_i$ is the cross-sectional area. The cross-sectional area is $A_i = w_i t$ with uniform thickness $t$. The Blech immunity threshold is given as $\\beta_c = 2.5 \\times 10^{5}\\,\\text{A/m}$. A segment is said to violate the immunity criterion if $\\beta_i > \\beta_c$.\n\nThe routed net has a source node $S$ feeding four sinks through a tree with the following topology. From $S$ to a junction $J_1$ is segment $1$. From $J_1$ three branches depart: segment $2$ goes directly to sink $T_1$, segment $3$ goes to a second junction $J_2$, and segment $6$ goes directly to sink $T_4$. From $J_2$, segment $4$ goes to sink $T_2$, and segment $5$ goes to sink $T_3$. The direct current (DC) drawn by each sink is: $T_1$ draws $90\\,\\mu\\text{A}$, $T_2$ draws $50\\,\\mu\\text{A}$, $T_3$ draws $40\\,\\mu\\text{A}$, and $T_4$ draws $30\\,\\mu\\text{A}$. Assume Kirchhoff’s Current Law applies ideally so that each branch current equals the algebraic sum of its downstream sink currents.\n\nAll segments are copper with uniform thickness $t = 50\\,\\text{nm}$. Segment geometries (lengths and widths) are:\n- Segment $1$: length $60\\,\\mu\\text{m}$, width $0.80\\,\\mu\\text{m}$.\n- Segment $2$: length $20\\,\\mu\\text{m}$, width $0.10\\,\\mu\\text{m}$.\n- Segment $3$: length $30\\,\\mu\\text{m}$, width $0.08\\,\\mu\\text{m}$.\n- Segment $4$: length $12\\,\\mu\\text{m}$, width $0.08\\,\\mu\\text{m}$.\n- Segment $5$: length $18\\,\\mu\\text{m}$, width $0.12\\,\\mu\\text{m}$.\n- Segment $6$: length $25\\,\\mu\\text{m}$, width $0.10\\,\\mu\\text{m}$.\n\nAssume the direction of current is from $S$ toward the sinks and take absolute values where appropriate so that only magnitudes enter the immunity check.\n\nCompute the local Blech product $\\beta_i$ for each segment $i \\in \\{1,2,3,4,5,6\\}$ by first determining the branch currents from the given sink currents, then computing the current density using $J_i = I_i/A_i$, and finally forming $\\beta_i = |J_i| L_i$. Using the immunity threshold $\\beta_c = 2.5 \\times 10^{5}\\,\\text{A/m}$, determine how many segments violate the immunity criterion. Report only the number of violating segments as your final answer. No rounding instruction is required because the answer is an exact count without units.",
            "solution": "The objective is to calculate the local Blech product $\\beta_i = |J_i| L_i$ for each segment and compare it to the immunity threshold $\\beta_c = 2.5 \\times 10^{5}\\,\\text{A/m}$.\n\nFirst, we will determine the current $I_i$ flowing through each segment by applying Kirchhoff's Current Law (KCL) at the junctions, working upstream from the sinks. The current in any segment is the sum of the currents drawn by all the downstream sinks it supplies.\n\n**Given Sink Currents:**\n- $I_{T_1} = 90\\,\\mu\\text{A}$\n- $I_{T_2} = 50\\,\\mu\\text{A}$\n- $I_{T_3} = 40\\,\\mu\\text{A}$\n- $I_{T_4} = 30\\,\\mu\\text{A}$\n\n**Branch Current Calculation (KCL):**\n- Segment 2 (to $T_1$): $I_2 = I_{T_1} = 90\\,\\mu\\text{A}$\n- Segment 4 (to $T_2$): $I_4 = I_{T_2} = 50\\,\\mu\\text{A}$\n- Segment 5 (to $T_3$): $I_5 = I_{T_3} = 40\\,\\mu\\text{A}$\n- Segment 6 (to $T_4$): $I_6 = I_{T_4} = 30\\,\\mu\\text{A}$\n- Segment 3 (to $J_2$): $I_3 = I_4 + I_5 = 50 + 40 = 90\\,\\mu\\text{A}$\n- Segment 1 (to $J_1$): $I_1 = I_2 + I_3 + I_6 = 90 + 90 + 30 = 210\\,\\mu\\text{A}$\n\nNext, we calculate the cross-sectional area $A_i = w_i \\times t$ for each segment, using the uniform thickness $t = 50\\,\\text{nm} = 5 \\times 10^{-8}\\,\\text{m}$. All dimensions will be converted to meters.\n\n**Segment Properties and Blech Product Calculation:**\n\n- **Segment 1:**\n  - $L_1 = 6 \\times 10^{-5}\\,\\text{m}$, $w_1 = 8 \\times 10^{-7}\\,\\text{m}$, $I_1 = 2.1 \\times 10^{-4}\\,\\text{A}$\n  - $A_1 = (8 \\times 10^{-7}) \\times (5 \\times 10^{-8}) = 4 \\times 10^{-14}\\,\\text{m}^2$\n  - $\\beta_1 = \\frac{I_1 L_1}{A_1} = \\frac{(2.1 \\times 10^{-4}) (6 \\times 10^{-5})}{4 \\times 10^{-14}} = 3.15 \\times 10^{5}\\,\\text{A/m}$\n\n- **Segment 2:**\n  - $L_2 = 2 \\times 10^{-5}\\,\\text{m}$, $w_2 = 1 \\times 10^{-7}\\,\\text{m}$, $I_2 = 9 \\times 10^{-5}\\,\\text{A}$\n  - $A_2 = (1 \\times 10^{-7}) \\times (5 \\times 10^{-8}) = 5 \\times 10^{-15}\\,\\text{m}^2$\n  - $\\beta_2 = \\frac{I_2 L_2}{A_2} = \\frac{(9 \\times 10^{-5}) (2 \\times 10^{-5})}{5 \\times 10^{-15}} = 3.6 \\times 10^{5}\\,\\text{A/m}$\n\n- **Segment 3:**\n  - $L_3 = 3 \\times 10^{-5}\\,\\text{m}$, $w_3 = 8 \\times 10^{-8}\\,\\text{m}$, $I_3 = 9 \\times 10^{-5}\\,\\text{A}$\n  - $A_3 = (8 \\times 10^{-8}) \\times (5 \\times 10^{-8}) = 4 \\times 10^{-15}\\,\\text{m}^2$\n  - $\\beta_3 = \\frac{I_3 L_3}{A_3} = \\frac{(9 \\times 10^{-5}) (3 \\times 10^{-5})}{4 \\times 10^{-15}} = 6.75 \\times 10^{5}\\,\\text{A/m}$\n\n- **Segment 4:**\n  - $L_4 = 1.2 \\times 10^{-5}\\,\\text{m}$, $w_4 = 8 \\times 10^{-8}\\,\\text{m}$, $I_4 = 5 \\times 10^{-5}\\,\\text{A}$\n  - $A_4 = (8 \\times 10^{-8}) \\times (5 \\times 10^{-8}) = 4 \\times 10^{-15}\\,\\text{m}^2$\n  - $\\beta_4 = \\frac{I_4 L_4}{A_4} = \\frac{(5 \\times 10^{-5}) (1.2 \\times 10^{-5})}{4 \\times 10^{-15}} = 1.5 \\times 10^{5}\\,\\text{A/m}$\n\n- **Segment 5:**\n  - $L_5 = 1.8 \\times 10^{-5}\\,\\text{m}$, $w_5 = 1.2 \\times 10^{-7}\\,\\text{m}$, $I_5 = 4 \\times 10^{-5}\\,\\text{A}$\n  - $A_5 = (1.2 \\times 10^{-7}) \\times (5 \\times 10^{-8}) = 6 \\times 10^{-15}\\,\\text{m}^2$\n  - $\\beta_5 = \\frac{I_5 L_5}{A_5} = \\frac{(4 \\times 10^{-5}) (1.8 \\times 10^{-5})}{6 \\times 10^{-15}} = 1.2 \\times 10^{5}\\,\\text{A/m}$\n\n- **Segment 6:**\n  - $L_6 = 2.5 \\times 10^{-5}\\,\\text{m}$, $w_6 = 1 \\times 10^{-7}\\,\\text{m}$, $I_6 = 3 \\times 10^{-5}\\,\\text{A}$\n  - $A_6 = (1 \\times 10^{-7}) \\times (5 \\times 10^{-8}) = 5 \\times 10^{-15}\\,\\text{m}^2$\n  - $\\beta_6 = \\frac{I_6 L_6}{A_6} = \\frac{(3 \\times 10^{-5}) (2.5 \\times 10^{-5})}{5 \\times 10^{-15}} = 1.5 \\times 10^{5}\\,\\text{A/m}$\n\nFinally, we compare each $\\beta_i$ to $\\beta_c = 2.5 \\times 10^{5}\\,\\text{A/m}$:\n- Segment 1: $3.15 \\times 10^{5} > \\beta_c$ **(Violation)**\n- Segment 2: $3.6 \\times 10^{5} > \\beta_c$ **(Violation)**\n- Segment 3: $6.75 \\times 10^{5} > \\beta_c$ **(Violation)**\n- Segment 4: $1.5 \\times 10^{5} \\le \\beta_c$ (Safe)\n- Segment 5: $1.2 \\times 10^{5} \\le \\beta_c$ (Safe)\n- Segment 6: $1.5 \\times 10^{5} \\le \\beta_c$ (Safe)\n\nThere are 3 segments that violate the immunity criterion.",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "Modern integrated circuits contain billions of interconnects, making manual electromigration analysis impossible. The principles you've practiced are therefore automated within Electronic Design Automation (EDA) software to ensure chip reliability. This exercise bridges the gap between theory and practice by tasking you with the implementation of a computational tool for EM signoff . You will develop an algorithm to solve for branch currents in a resistive network using nodal analysis and then compute essential EM stress metrics, such as the maximum steady-state stress $\\sigma_{\\max}$ and the Blech product, providing a tangible understanding of how complex reliability checks are performed in a real-world EDA flow.",
            "id": "4268415",
            "problem": "Consider an interconnect network used in Electronic Design Automation (EDA) signoff consisting of resistive metal segments connecting circuit nodes. The objective is to compute direct current branch currents by solving Kirchhoff’s laws and then derive electromigration (EM) stress metrics for each segment suitable for signoff decisions. Use the following fundamental base and definitions:\n\n- Kirchhoff’s Current Law (KCL): At each node, the algebraic sum of currents leaving equals zero. For node voltages $\\{V_i\\}$ and conductances $\\{g_{ij}\\}$ between nodes $i$ and $j$, the nodal equation is $\\sum_{j} g_{ij}(V_i - V_j) = 0$ for unknown-voltage nodes, with fixed-voltage nodes treated as Dirichlet boundary conditions.\n- Ohm’s Law: The branch current between nodes $i$ and $j$ is $I_{ij} = g_{ij}(V_i - V_j)$ where $g_{ij} = 1/R_{ij}$.\n- Resistive segment model: For a segment of length $L$, width $w$, thickness $t$, and metal resistivity $\\rho$, the resistance is $R = \\rho L / A$ with cross-sectional area $A = w t$, so the conductance is $g = A / (\\rho L)$.\n- Current density: For a segment with current magnitude $|I|$ and area $A$, the magnitude of current density is $J = |I|/A$.\n- Zero-flux steady-state stress (Korhonen model, blocking boundaries): With effective charge number $Z^*$, electron charge $e$, resistivity $\\rho$, atomic volume $\\Omega$, current density $J$, and segment length $L$, the hydrostatic stress increases linearly under zero atomic flux condition and the maximum steady-state stress is $\\sigma_{\\max} = (|Z^*| e \\rho J L)/\\Omega$. Express the hydrostatic stress in Pascals, rounded to three significant figures.\n- Blech product criterion: Define $P = J L$. If $P \\le B$ (with threshold $B$ in $\\mathrm{A}/\\mathrm{m}$), the segment is considered electromigration-immortal (safe). Output a boolean for each segment indicating whether the Blech criterion is satisfied.\n\nYou are to implement a program that:\n1. Builds the conductance matrix using KCL for unknown node voltages, incorporates fixed node voltages as boundary conditions, solves for unknown node voltages, and computes the branch currents for each segment using Ohm’s Law.\n2. For each segment, computes the current density $J$, the maximum steady-state stress $\\sigma_{\\max}$ in Pascals, and evaluates Blech safety using the specified threshold $B$.\n\nThe following test suite defines three distinct networks and process conditions to exercise different regimes (general case, boundary condition, and an edge case with an ultra-narrow segment). Each case provides:\n- Node indices and fixed voltages.\n- Segment list with $(\\text{node}_a,\\text{node}_b,L,w,t,\\rho)$.\n- Material/process constants $(Z^*, e, \\Omega, B)$ for that case.\n\nTest Case $1$ (general multi-branch network):\n- Fixed node voltages: node $0$ at $0\\,\\mathrm{V}$, node $3$ at $1\\,\\mathrm{V}$.\n- Segments:\n  - $(3,2,L=5.0\\times 10^{-4}\\,\\mathrm{m},w=2.0\\times 10^{-6}\\,\\mathrm{m},t=8.0\\times 10^{-7}\\,\\mathrm{m},\\rho=1.68\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n  - $(2,1,L=4.0\\times 10^{-4}\\,\\mathrm{m},w=1.5\\times 10^{-6}\\,\\mathrm{m},t=8.0\\times 10^{-7}\\,\\mathrm{m},\\rho=1.68\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n  - $(2,0,L=3.0\\times 10^{-4}\\,\\mathrm{m},w=3.0\\times 10^{-6}\\,\\mathrm{m},t=1.0\\times 10^{-6}\\,\\mathrm{m},\\rho=1.68\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n  - $(1,0,L=3.0\\times 10^{-4}\\,\\mathrm{m},w=1.0\\times 10^{-6}\\,\\mathrm{m},t=1.0\\times 10^{-6}\\,\\mathrm{m},\\rho=1.68\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n- Constants: $|Z^*| = 1$, $e = 1.602\\times 10^{-19}\\,\\mathrm{C}$, $\\Omega = 1.18\\times 10^{-29}\\,\\mathrm{m}^3$, $B = 3.0\\times 10^{7}\\,\\mathrm{A}/\\mathrm{m}$.\n\nTest Case $2$ (single-segment boundary condition):\n- Fixed node voltages: node $0$ at $0\\,\\mathrm{V}$, node $1$ at $0.5\\,\\mathrm{V}$.\n- Segments:\n  - $(1,0,L=1.0\\times 10^{-3}\\,\\mathrm{m},w=1.0\\times 10^{-5}\\,\\mathrm{m},t=2.0\\times 10^{-6}\\,\\mathrm{m},\\rho=2.0\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n- Constants: $|Z^*| = 1$, $e = 1.602\\times 10^{-19}\\,\\mathrm{C}$, $\\Omega = 1.18\\times 10^{-29}\\,\\mathrm{m}^3$, $B = 2.5\\times 10^{7}\\,\\mathrm{A}/\\mathrm{m}$.\n\nTest Case $3$ (edge case with an ultra-narrow branch competing with a wider direct path):\n- Fixed node voltages: node $0$ at $0\\,\\mathrm{V}$, node $2$ at $1.2\\,\\mathrm{V}$.\n- Segments:\n  - $(2,1,L=2.0\\times 10^{-4}\\,\\mathrm{m},w=1.0\\times 10^{-7}\\,\\mathrm{m},t=5.0\\times 10^{-7}\\,\\mathrm{m},\\rho=1.9\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n  - $(1,0,L=4.0\\times 10^{-4}\\,\\mathrm{m},w=2.0\\times 10^{-6}\\,\\mathrm{m},t=8.0\\times 10^{-7}\\,\\mathrm{m},\\rho=1.9\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n  - $(2,0,L=1.0\\times 10^{-3}\\,\\mathrm{m},w=5.0\\times 10^{-6}\\,\\mathrm{m},t=1.0\\times 10^{-6}\\,\\mathrm{m},\\rho=1.9\\times 10^{-8}\\,\\Omega\\cdot\\mathrm{m})$\n- Constants: $|Z^*| = 1$, $e = 1.602\\times 10^{-19}\\,\\mathrm{C}$, $\\Omega = 1.18\\times 10^{-29}\\,\\mathrm{m}^3$, $B = 3.5\\times 10^{7}\\,\\mathrm{A}/\\mathrm{m}$.\n\nAlgorithmic requirements:\n- Assemble and solve the linear system implied by KCL for unknown node voltages, treating fixed voltages as Dirichlet boundary conditions. Then compute branch currents using Ohm’s Law and segment conductances.\n- For each segment, compute $J$, $\\sigma_{\\max}$ in Pascals, rounded to three significant figures, and the Blech safety boolean using the case-specific $B$.\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets. Each test case’s result is a list of per-segment results, where each per-segment result is a two-element list $[\\sigma_{\\max}\\ \\text{(Pa, rounded)},\\ \\text{BlechSafe}]$. For example: $[[s_{11},\\text{True}],[s_{12},\\text{False}]],[[s_{21},\\text{True}]]$ must be aggregated into one line as $[[[s_{11},True],[s_{12},False]],[[s_{21},True]]]$ and printed with no spaces as in $[[[s_{11},True],[s_{12},False]],[[s_{21},True]]]$.\n\nAll numerical answers must be expressed in the specified units and rounded as stated. Angles are not involved. The outputs must be lists of floats and booleans only.",
            "solution": "The solution requires implementing a program that performs nodal analysis on a resistive network to determine branch currents, and then uses these currents to calculate electromigration stress metrics for each segment.\n\nThe overall algorithm proceeds as follows:\n1.  **Parse Network and Constants:** For each test case, read the node definitions, fixed voltages, segment geometries, and material constants.\n2.  **Identify Unknowns:** Determine the set of nodes with unknown voltages. For a network with $N_u$ unknown voltages, an $N_u \\times N_u$ linear system must be solved.\n3.  **Construct Linear System:** Based on Kirchhoff's Current Law (KCL), assemble the nodal admittance matrix $G$ and the current vector $b$.\n    -   For an unknown node $i$, the diagonal element $G_{ii}$ is the sum of all conductances connected to it.\n    -   The off-diagonal element $G_{ij}$ is the negative of the conductance between unknown nodes $i$ and $j$.\n    -   The vector element $b_i$ is the sum of currents flowing into node $i$ from fixed-voltage sources, calculated as $\\sum_{k \\in \\text{fixed}} g_{ik}V_k$.\n4.  **Solve for Voltages:** Solve the linear system $GV_{unk} = b$ to find the unknown node voltages $V_{unk}$.\n5.  **Calculate Segment Metrics:** Iterate through each segment in the network:\n    a.  Calculate the branch current using Ohm's Law: $I_{ij} = g_{ij}(V_i - V_j)$.\n    b.  Calculate the current density magnitude: $J = |I_{ij}|/A$, where $A=wt$.\n    c.  Calculate the Blech product $P = JL$ and determine safety by comparing to the threshold $B$: `is_safe = (P = B)`.\n    d.  Calculate the maximum steady-state stress: $\\sigma_{\\max} = (|Z^*| e \\rho J L) / \\Omega$.\n    e.  Round $\\sigma_{\\max}$ to three significant figures.\n    f.  Store the results $[\\sigma_{\\max}, \\text{is_safe}]$ for the segment.\n6.  **Format Output:** Aggregate the results from all test cases into the specified single-line string format.\n\nThe following Python code implements this algorithm using the `numpy` library for solving the linear system.\n```python\nimport numpy as np\nimport math\n\ndef solve():\n    \"\"\"\n    Main function to solve the electromigration problem for all test cases.\n    \"\"\"\n\n    # Test cases defined in the problem statement\n    test_cases = [\n        {\n            \"fixed_voltages\": {0: 0.0, 3: 1.0},\n            \"segments\": [\n                (3, 2, 5.0e-4, 2.0e-6, 8.0e-7, 1.68e-8),\n                (2, 1, 4.0e-4, 1.5e-6, 8.0e-7, 1.68e-8),\n                (2, 0, 3.0e-4, 3.0e-6, 1.0e-6, 1.68e-8),\n                (1, 0, 3.0e-4, 1.0e-6, 1.0e-6, 1.68e-8),\n            ],\n            \"constants\": {\"Z_star\": 1.0, \"e\": 1.602e-19, \"Omega\": 1.18e-29, \"B\": 3.0e7}\n        },\n        {\n            \"fixed_voltages\": {0: 0.0, 1: 0.5},\n            \"segments\": [\n                (1, 0, 1.0e-3, 1.0e-5, 2.0e-6, 2.0e-8)\n            ],\n            \"constants\": {\"Z_star\": 1.0, \"e\": 1.602e-19, \"Omega\": 1.18e-29, \"B\": 2.5e7}\n        },\n        {\n            \"fixed_voltages\": {0: 0.0, 2: 1.2},\n            \"segments\": [\n                (2, 1, 2.0e-4, 1.0e-7, 5.0e-7, 1.9e-8),\n                (1, 0, 4.0e-4, 2.0e-6, 8.0e-7, 1.9e-8),\n                (2, 0, 1.0e-3, 5.0e-6, 1.0e-6, 1.9e-8),\n            ],\n            \"constants\": {\"Z_star\": 1.0, \"e\": 1.602e-19, \"Omega\": 1.18e-29, \"B\": 3.5e7}\n        }\n    ]\n\n    all_results = []\n    for case in test_cases:\n        case_results = solve_case(case[\"fixed_voltages\"], case[\"segments\"], case[\"constants\"])\n        all_results.append(case_results)\n\n    # Format the output as a single-line string with no spaces\n    output_str = str(all_results).replace(\" \", \"\")\n    print(output_str)\n\ndef round_to_sf(x, sf):\n    \"\"\"\n    Rounds a number to a specified number of significant figures.\n    \"\"\"\n    if x == 0:\n        return 0.0\n    return round(x, sf - int(math.floor(math.log10(abs(x)))) - 1)\n\ndef solve_case(fixed_voltages, segments, constants):\n    \"\"\"\n    Solves for node voltages, branch currents, and EM metrics for a single case.\n    \"\"\"\n    all_nodes = set()\n    for seg in segments:\n        all_nodes.add(seg[0])\n        all_nodes.add(seg[1])\n    \n    fixed_nodes = set(fixed_voltages.keys())\n    unknown_nodes = sorted(list(all_nodes - fixed_nodes))\n    num_unknown = len(unknown_nodes)\n    \n    unknown_node_map = {node: i for i, node in enumerate(unknown_nodes)}\n\n    all_voltages = dict(fixed_voltages)\n    if num_unknown > 0:\n        G = np.zeros((num_unknown, num_unknown))\n        b = np.zeros(num_unknown)\n\n        for seg_data in segments:\n            u, v, L, w, t, rho = seg_data\n            if L == 0 or rho == 0 or w == 0 or t == 0:\n                g = 0\n            else:\n                A = w * t\n                g = A / (rho * L)\n\n            u_is_unknown = u in unknown_nodes\n            v_is_unknown = v in unknown_nodes\n\n            if u_is_unknown:\n                u_idx = unknown_node_map[u]\n                G[u_idx, u_idx] += g\n                if v_is_unknown:\n                    v_idx = unknown_node_map[v]\n                    G[u_idx, v_idx] -= g\n                else: \n                    b[u_idx] += g * fixed_voltages[v]\n            \n            if v_is_unknown:\n                v_idx = unknown_node_map[v]\n                G[v_idx, v_idx] += g\n                if u_is_unknown:\n                    u_idx = unknown_node_map[u]\n                    G[v_idx, u_idx] -= g\n                else:\n                    b[v_idx] += g * fixed_voltages[u]\n        \n        V_unknown = np.linalg.solve(G, b)\n\n        for i, node_idx in enumerate(unknown_nodes):\n            all_voltages[node_idx] = V_unknown[i]\n\n    results = []\n    Z_star = constants[\"Z_star\"]\n    e = constants[\"e\"]\n    Omega = constants[\"Omega\"]\n    B = constants[\"B\"]\n\n    for seg_data in segments:\n        u, v, L, w, t, rho = seg_data\n        \n        V_u = all_voltages[u]\n        V_v = all_voltages[v]\n\n        A = w * t\n        if L == 0 or rho == 0 or A == 0:\n            g = 0\n            I = 0\n        else:\n            g = A / (rho * L)\n            I = g * (V_u - V_v)\n\n        if A == 0:\n            J = np.inf if I != 0 else 0\n        else:\n            J = abs(I) / A\n        \n        P = J * L\n        blech_safe = P = B\n        sigma_max = (Z_star * e * rho * P) / Omega\n        sigma_max_rounded = round_to_sf(sigma_max, 3)\n\n        results.append([sigma_max_rounded, blech_safe])\n        \n    return results\n\n# The function call is included to demonstrate the complete, runnable solution\n# that produces the final answer string.\nif __name__ == '__main__':\n    solve()\n```",
            "answer": "```\n[[[60400000.0,True],[80400000.0,True],[19600000.0,True],[50500000.0,True]],[[679000000.0,True]],[[1280000000.0,False],[129000000.0,True],[48500000.0,True]]]\n```"
        }
    ]
}
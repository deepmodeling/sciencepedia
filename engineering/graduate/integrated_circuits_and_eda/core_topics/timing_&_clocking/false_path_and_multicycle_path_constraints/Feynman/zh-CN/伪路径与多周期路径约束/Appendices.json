{
    "hands_on_practices": [
        {
            "introduction": "在应用伪路径或多周期路径等高级时序约束之前，我们必须首先掌握静态时序分析（STA）的基石：建立时间裕量（setup slack）的计算。这个练习将引导你从第一性原理出发，推导并计算一个同步路径的建立时间裕量。通过这个基础实践，你不仅能巩固对时序参数如何相互作用的理解，还能为识别和解决时序违例打下坚实的基础。",
            "id": "4270716",
            "problem": "一个同步数据路径使用静态时序分析（STA）进行分析。考虑在同一时钟域中，从一个发射触发器到一个捕获触发器的单周期建立时间检查。根据第一性原理，建立时间检查将捕获触发器数据引脚上的数据到达时间与一个要求到达时间进行比较，该要求到达时间由下一个有效的捕获时钟沿减去一个建立时间侧的不确定性预算决定。触发器处的时钟沿相对于理想时间参考点，会因各自的时钟网络延迟而发生偏移，并且一个有意设置的有用时钟偏斜（如果为正）会进一步推迟捕获时钟沿。数据到达时间从理想时间参考点开始测量，包括发射时钟延迟和直到捕获数据引脚的完整数据路径延迟。\n\n给定以下参数：\n- 发射时钟延迟 $L_{\\ell} = 150 \\text{ ps}$，\n- 捕获时钟延迟 $L_{c} = 290 \\text{ ps}$，\n- 时钟周期 $T = 1 \\text{ ns}$，\n- 有用时钟偏斜 $S = +20 \\text{ ps}$（正的 $S$ 表示捕获沿相对于发射沿被延迟），\n- 建立时间侧时钟不确定性 $U = 80 \\text{ ps}$，\n- 通过组合逻辑路径的数据到达时间（从发射触发器观察到发射沿之后开始测量）$D = 700 \\text{ ps}$，\n\n假设一个单周期建立时间约束，并假设相对于理想时间参考点，在捕获引脚处报告的数据到达时间为 $A = L_{\\ell} + D$。从建立时间裕量（setup slack）是要求到达时间减去实际数据到达时间的定义出发，推导出建立时间裕量关于 $T$、$L_{\\ell}$、$L_{c}$、$S$、$U$ 和 $D$ 的符号表达式，然后使用上述数值计算其值。\n\n最后，定性地（用文字而非作为数值答案的一部分）解释如果计算出的建立时间裕量为负，这对约束意味着什么，并提及伪路径和多周期路径约束的作用以及它们如何在原理层面上改变要求时间。\n\n将最终的裕量表示为一个以皮秒为单位的数字。将您的答案保留三位有效数字。",
            "solution": "该问题是有效的，因为它科学地基于数字电路的静态时序分析（STA）原理，问题陈述清晰，数据充分且一致，并使用客观的标准术语表达。\n\n主要任务是推导并计算给定同步数据路径的建立时间裕量。建立时间裕量是建立时间检查的时序余量的度量。它被定义为捕获触发器输入端的要求到达时间与实际数据到达时间之间的差值。\n\n$Slack_{setup} = t_{required} - t_{arrival}$\n\n让我们从第一性原理出发，使用一个共同的时间参考点（即时间 $t=0$ 时的理想时钟沿），来推导 $t_{arrival}$ 和 $t_{required}$ 的表达式。\n\n首先，我们确定捕获触发器数据输入端（D引脚）的实际数据到达时间 $t_{arrival}$。在理想参考系中，发射数据的时钟沿发生在 $t=0$ 时刻。该时钟沿通过时钟网络传播，在等于发射时钟延迟 $L_{\\ell}$ 的时间到达发射触发器。在该时钟沿到达后，数据从触发器的Q引脚发出，并通过组合逻辑路径传播，这需要时间 $D$。因此，从理想参考点 $t=0$ 开始，直到数据在捕获触发器输入端稳定所需的总时间是发射时钟延迟和组合路径延迟之和。\n$$t_{arrival} = L_{\\ell} + D$$\n这与问题中给出的数据到达时间 $A$ 的定义相符。\n\n接下来，我们确定要求到达时间 $t_{required}$。对于单周期路径，在 $t=0$ 时刻发射的数据必须被下一个时钟沿捕获，该时钟沿在理想参考系中的 $t=T$ 时刻发生，其中 $T$ 是时钟周期。这个捕获时钟沿通过其自身的时钟网络部分传播，在时间 $T + L_{c}$ 到达捕获触发器，其中 $L_c$ 是捕获时钟延迟。问题陈述中存在一个有意设置的有用时钟偏斜 $S$，它会进一步延迟捕获时钟沿。由于 $S$ 是正数，捕获沿到达触发器的实际时间是 $T + L_c + S$。建立时间检查要求数据在该捕获时钟沿到达*之前*的一段时间内在触发器的输入端保持稳定。此要求以及其他时序不确定性（如时钟抖动）被封装在建立时间侧不确定性预算 $U$ 中。因此，数据允许到达的最晚时间是物理捕获沿之前的 $U$。\n$$t_{required} = (T + L_c + S) - U$$\n\n现在，我们可以将这些表达式代入建立时间裕量方程中：\n$$Slack_{setup} = (T + L_c + S - U) - (L_{\\ell} + D)$$\n这就是建立时间裕量的符号表达式。\n\n我们给定的数值如下：\n- 时钟周期 $T = 1 \\text{ ns} = 1000 \\text{ ps}$\n- 发射时钟延迟 $L_{\\ell} = 150 \\text{ ps}$\n- 捕获时钟延迟 $L_{c} = 290 \\text{ ps}$\n- 有用时钟偏斜 $S = 20 \\text{ ps}$\n- 建立时间侧时钟不确定性 $U = 80 \\text{ ps}$\n- 组合路径延迟 $D = 700 \\text{ ps}$\n\n将这些值代入裕量表达式中：\n$$Slack_{setup} = (1000 + 290 + 20 - 80) - (150 + 700)$$\n$$Slack_{setup} = (1310 - 80) - (850)$$\n$$Slack_{setup} = 1230 - 850$$\n$$Slack_{setup} = 380 \\text{ ps}$$\n建立时间裕量是 $380 \\text{ ps}$。问题要求保留三位有效数字。数字 $380$ 可以写成 $3.80 \\times 10^2$，它已经有三位有效数字，因此无需四舍五入。\n\n负的建立时间裕量意味着时序违例。数据到达时间（$t_{arrival}$）将大于要求到达时间（$t_{required}$），这意味着数据信号到达捕获触发器的时间太晚，无法被指定的时钟沿可靠地捕获。这可能导致触发器捕获不正确（旧）的值或进入亚稳态，从而引起整个电路的功能性故障。\n\n在这种情况下，像伪路径和多周期路径约束这样的时序例外约束就变得相关了。在原理层面上，它们改变了每条路径都必须在单个时钟周期内成功传播数据的默认假设。\n- **伪路径约束**应用于尽管物理上存在但在逻辑上不活动的路径。这意味着在正常电路操作下，信号永远无法从其起点传播到终点。例如，该路径可能是仅用于测试的逻辑结构的一部分，或者可能被一个其选择信号被绑定到常数值的多路复用器所阻断。通过将一条路径声明为伪路径，STA工具被指示在时序分析中完全忽略它。这有效地移除了该路径的建立时间检查，使其负裕量变得无关紧要。\n- **多周期路径约束**用于那些被特意设计为需要超过一个时钟周期来传播数据的路径。例如，如果一条路径被指定为 $N$ 周期路径，那么建立时间检查将不再是针对时间 $T$ 的下一个时钟沿，而是针对时间 $N \\times T$ 的时钟沿。这将要求到达时间更改为 $t'_{required} = (N \\times T + L_c + S) - U$。这为数据路径提供了额外的 $(N-1)T$ 时序预算，如果设计上的微架构允许这种更长的延迟，这可以轻松解决建立时间违例。",
            "answer": "$$\\boxed{380}$$"
        },
        {
            "introduction": "当识别出建立时间违例后，一个常见的解决方案是应用多周期路径（multicycle path）约束。然而，这个强大的工具并非没有副作用——它会深刻影响保持时间（hold time）的检查，这常常是设计者忽略的陷阱。本练习将深入探讨这一关键问题，通过计算一个应用了多周期约束的路径的建立和保持时间裕量，揭示默认的保持周期设置如何可能引入新的时序问题。",
            "id": "4270650",
            "problem": "在电子设计自动化 (EDA) 的背景下，使用静态时序分析 (STA) 分析一个同步单时钟路径。考虑一个寄存器到寄存器的路径，其时钟周期为 $T$，应用于建立时间检查的多周期因子为 $m$，默认的保持时间乘数定义为 $m_{h} = m - 1$。发射时钟延迟为 $t_{L}$，捕获时钟延迟为 $t_{C}$，时钟不确定性为 $U$，残余局部时钟偏斜为 $s$，其中正数 $s$ 表示捕获时钟边沿比发射时钟边沿晚到达，负数 $s$ 表示捕获时钟边沿早到达。假设：\n- 建立时间裕量定义为要求到达时间减去实际数据到达时间。\n- 保持时间裕量定义为实际数据到达时间减去要求到达时间。\n- 时钟不确定性 $U$ 通过从建立时间的要求时间中减去 $U$ 来收紧建立时间检查，并通过向保持时间的要求时间中加上 $U$ 来收紧保持时间检查。\n- 对于建立时间和保持时间，有效的净叶到叶偏斜项均为 $(t_{C} - t_{L} + s)$，且 $s$ 的相同符号约定适用于两种检查。\n- 捕获寄存器输入端的数据到达时间 $A$ 是相对于时间 $0$ 处的发射寄存器有效时钟边沿测量的，并且已经包含了源寄存器的 clock-to-Q 延迟和组合逻辑延迟。\n\n仅使用上述基本 STA 定义以及通用的多周期解释（即建立时间多周期 $m$ 将捕获边沿移动 $mT$，且默认保持时间乘数为 $m_{h} = m - 1$），计算下列数值的建立时间和保持时间裕量：\n- $T = 500 \\text{ ps}$，\n- $m = 3$，\n- $t_{L} = 100 \\text{ ps}$，\n- $t_{C} = 200 \\text{ ps}$，\n- $U = 50 \\text{ ps}$，\n- $s = -20 \\text{ ps}$ (捕获提前)，\n- $A = 900 \\text{ ps}$。\n\n以皮秒为单位，将您的最终答案表示为一个有序对 $[\\text{建立时间裕量}, \\text{保持时间裕量}]$。不需要四舍五入。在最终的方框答案中不要包含单位。",
            "solution": "首先将对问题的科学合理性、自洽性和一致性进行验证。\n\n### 步骤 1：提取已知条件\n\n以下数据和定义逐字引自问题陈述：\n- 时钟周期：$T = 500 \\text{ ps}$\n- 建立时间多周期因子：$m = 3$\n- 默认保持时间乘数：$m_{h} = m - 1$\n- 发射时钟延迟：$t_{L} = 100 \\text{ ps}$\n- 捕获时钟延迟：$t_{C} = 200 \\text{ ps}$\n- 时钟不确定性：$U = 50 \\text{ ps}$\n- 残余局部时钟偏斜：$s = -20 \\text{ ps}$ (捕获提前)\n- 捕获寄存器的数据到达时间：$A = 900 \\text{ ps}$\n- 建立时间裕量定义：要求到达时间减去实际数据到达时间。\n- 保持时间裕量定义：实际数据到达时间减去要求到达时间。\n- 建立时间上的时钟不确定性：从建立时间的要求时间中减去 $U$。\n- 保持时间上的时钟不确定性：向保持时间的要求时间中加上 $U$。\n- 有效净叶到叶偏斜项：$(t_{C} - t_{L} + s)$，对建立时间和保持时间均适用。\n- 数据到达时间 $A$ 是相对于时间 $0$ 处的发射寄存器有效时钟边沿测量的，并已包含 clock-to-Q 延迟和组合逻辑延迟。\n\n### 步骤 2：使用提取的已知条件进行验证\n\n根据验证标准对问题进行评估。\n\n- **科学依据**：该问题基于同步数字电路静态时序分析 (STA) 的标准原理。建立/保持时间裕量、时钟不确定性、时钟延迟、偏斜和多周期路径等概念是电子设计自动化 (EDA) 领域的基础。所给定义虽然具体，但与常见的行业方法论一致。\n- **问题明确**：计算建立时间和保持时间裕量所需的所有数值和定义均已提供。问题是自洽的，可以推导出唯一的数值解。关于如何纳入不确定性和偏斜的具体定义，尽管表述方式特定，但含义明确。\n- **客观性**：问题以精确、定量且无偏见的技术语言陈述。\n\n该问题没有表现出验证清单中列出的任何缺陷。虽然它通过为建立时间（取决于最大延迟）和保持时间（取决于最小延迟）提供单一的数据到达时间 $A$ 进行了简化，但这是一种常见的教学简化方法。问题本身保持内部一致性，并且可以按陈述求解。\n\n### 步骤 3：结论与行动\n\n问题是**有效的**。将提供详细的解决方案。\n\n### 解答\n\n解答需要根据所给定义计算建立时间裕量 ($Slack_{setup}$) 和保持时间裕量 ($Slack_{hold}$)。建立一个参考系，其中发射触发器在时间 $t=0$ 被时钟触发。数据到达时间 $A$ 是数据路径相对于此发射事件的延迟。\n\n**1. 建立时间裕量计算**\n\n建立时间裕量定义为建立时间的要求到达时间 (Required Arrival Time, RAT) 减去建立时间的实际到达时间 (Actual Arrival Time, AAT)。\n$Slack_{setup} = RAT_{setup} - AAT_{setup}$\n\n实际到达时间 $AAT_{setup}$ 是数据信号到达捕获寄存器输入端的时间。问题陈述此值为 $A$。\n$AAT_{setup} = A = 900 \\text{ ps}$\n\n要求到达时间 $RAT_{setup}$ 是数据能够正确被捕获而到达捕获寄存器输入端的最晚时间。它由捕获时钟边沿的到达时间决定，并根据不确定性进行调整。\n\n对于因子为 $m$ 的多周期路径，建立时间检查发生在第 $m$ 个时钟边沿。可用于数据传播的总时间窗口是多周期路径的周期加上时钟偏斜。\n多周期路径的周期是 $m \\times T$。\n问题将有效时钟偏斜 $S_{eff}$ 定义为：\n$S_{eff} = t_{C} - t_{L} + s$\n$S_{eff} = 200 \\text{ ps} - 100 \\text{ ps} + (-20 \\text{ ps}) = 80 \\text{ ps}$\n\n相对于发射事件的标称要求时间是捕获时钟边沿的到达时间：\n$RAT_{nominal} = m \\times T + S_{eff}$\n\n问题陈述时钟不确定性 $U$ 通过从要求时间中减去 $U$ 来收紧建立时间检查。\n$RAT_{setup} = RAT_{nominal} - U = m \\times T + S_{eff} - U$\n$RAT_{setup} = 3 \\times 500 \\text{ ps} + 80 \\text{ ps} - 50 \\text{ ps} = 1500 \\text{ ps} + 30 \\text{ ps} = 1530 \\text{ ps}$\n\n因此，建立时间裕量为：\n$Slack_{setup} = RAT_{setup} - AAT_{setup} = 1530 \\text{ ps} - 900 \\text{ ps} = 630 \\text{ ps}$\n\n**2. 保持时间裕量计算**\n\n保持时间裕量定义为保持时间的实际到达时间 (AAT) 减去保持时间的要求到达时间 (RAT)。\n$Slack_{hold} = AAT_{hold} - RAT_{hold}$\n\n实际到达时间 $AAT_{hold}$ 是新数据可能到达的最早时间。鉴于问题为数据到达时间 $A$ 提供了单个值，我们也必须在此计算中使用它。\n$AAT_{hold} = A = 900 \\text{ ps}$\n\n要求到达时间 $RAT_{hold}$ 是捕获寄存器输入端的数据必须保持稳定的时间点。它由保持时间检查时钟边沿的到达决定。问题指定了保持时间乘数 $m_h = m - 1$。\n$m_h = 3 - 1 = 2$\n\n保持时间检查是相对于第 $m_h$ 个时钟边沿进行的。此边沿相对于发射事件的到达时间定义了标称的保持时间 RAT。\n$RAT_{nominal, hold} = m_h \\times T + S_{eff}$\n\n问题陈述时钟不确定性 $U$ 通过向要求时间中加上 $U$ 来收紧保持时间检查。\n$RAT_{hold} = RAT_{nominal, hold} + U = m_h \\times T + S_{eff} + U$\n代入数值：\n$RAT_{hold} = 2 \\times 500 \\text{ ps} + 80 \\text{ ps} + 50 \\text{ ps} = 1000 \\text{ ps} + 130 \\text{ ps} = 1130 \\text{ ps}$\n\n因此，保持时间裕量为：\n$Slack_{hold} = AAT_{hold} - RAT_{hold} = 900 \\text{ ps} - 1130 \\text{ ps} = -230 \\text{ ps}$\n\n最终答案是有序对 [建立时间裕量, 保持时间裕量]。\n计算出的建立时间裕量为 $630 \\text{ ps}$，保持时间裕量为 $-230 \\text{ ps}$。",
            "answer": "$$\\boxed{[630, -230]}$$"
        },
        {
            "introduction": "在真实的复杂芯片设计中，同一条时序路径可能受到多种不同约束的共同影响，例如 `set_multicycle_path` 和 `set_max_delay`。这就引出了一个至关重要的问题：当约束发生冲突时，EDA 工具会如何选择？本练习模拟了这一实际场景，要求你根据标准的约束优先级规则来判断哪个约束将最终生效。掌握这种约束的仲裁机制，对于准确预测工具的时序分析行为和确保设计意图被正确执行至关重要。",
            "id": "4270667",
            "problem": "在一个由静态时序分析（STA）进行分析的单时钟设计中，一条同步路径连接了一个发送端触发器（FF）和一个捕获端触发器。该设计使用通用电子设计自动化（EDA）工具中实现的 Synopsys 设计约束（SDC）语义进行约束。以下参数和约束适用于从起点 $\\mathrm{FF}_{\\mathrm{L}}$（发送端）到终点 $\\mathrm{FF}_{\\mathrm{C}}$（捕获端）的 FF 到 FF 路径：\n\n- 时钟周期为 $T_{\\mathrm{clk}} = 1.2 \\text{ ns}$。\n- 到 $\\mathrm{FF}_{\\mathrm{L}}$ 的时钟延迟为 $L_{\\mathrm{L}} = 0.16 \\text{ ns}$。\n- 到 $\\mathrm{FF}_{\\mathrm{C}}$ 的时钟延迟为 $L_{\\mathrm{C}} = 0.25 \\text{ ns}$。\n- $\\mathrm{FF}_{\\mathrm{C}}$ 的建立时间为 $t_{\\mathrm{setup}} = 0.05 \\text{ ns}$。\n- 发送端和捕获端之间的建立模式时钟不确定性为 $u_{\\mathrm{setup}} = 0.03 \\text{ ns}$。\n- 应用了一个多周期建立时间约束：从 $\\mathrm{FF}_{\\mathrm{L}}$到 $\\mathrm{FF}_{\\mathrm{C}}$ 的 $\\mathrm{set\\_multicycle\\_path}$，其值为 $N_{\\mathrm{setup}} = 3$ 个周期。\n- 相应的多周期保持时间为 $N_{\\mathrm{hold}} = 2$ 个周期。（假设没有其他针对保持时间的约束影响建立时间的计算。）\n- 在相同的终点上还有一个显式的最大延迟约束：$\\mathrm{set\\_max\\_delay}$，其值为 $D_{\\max} = 2.95 \\text{ ns}$，在 $\\mathrm{FF}_{\\mathrm{L}}/Q$ 和 $\\mathrm{FF}_{\\mathrm{C}}/D$ 之间使用选项 $\\texttt{-datapath\\_only}$ 指定。\n- 此路径上未应用 $\\mathrm{set\\_false\\_path}$ 或其他时序例外。\n\n假设建立时间要求（setup required time）采用标准的 STA 定义，并且工具遵循通用的优先级规则：在适用的约束中，$\\mathrm{set\\_false\\_path}$ 禁用时序检查，$\\mathrm{set\\_max\\_delay}$ 和 $\\mathrm{set\\_min\\_delay}$ 覆盖基于时钟的关系（包括多周期约束），而 $\\mathrm{set\\_multicycle\\_path}$ 则修改基于时钟的关系。\n\n基于这些假设，确定在此路径的建立时间检查中哪个约束起主导作用，并计算最终的建立时间要求，该要求可解释为工具将强制执行的从 $\\mathrm{FF}_{\\mathrm{L}}/Q$ 到 $\\mathrm{FF}_{\\mathrm{C}}/D$ 的允许最大数据路径延迟。请以纳秒为单位表示最终答案，并四舍五入到四位有效数字。",
            "solution": "用户希望我按照以下步骤解决问题：\n1.  **逐字提取所有给定条件：**\n    -   时钟周期：$T_{\\mathrm{clk}} = 1.2$ 纳秒。\n    -   到 $\\mathrm{FF}_{\\mathrm{L}}$ 的时钟延迟：$L_{\\mathrm{L}} = 0.16$ 纳秒。\n    -   到 $\\mathrm{FF}_{\\mathrm{C}}$ 的时钟延迟：$L_{\\mathrm{C}} = 0.25$ 纳秒。\n    -   $\\mathrm{FF}_{\\mathrm{C}}$ 的建立时间：$t_{\\mathrm{setup}} = 0.05$ 纳秒。\n    -   建立模式时钟不确定性：$u_{\\mathrm{setup}} = 0.03$ 纳秒。\n    -   多周期建立时间约束：$N_{\\mathrm{setup}} = 3$ 个周期。\n    -   多周期保持时间约束：$N_{\\mathrm{hold}} = 2$ 个周期。\n    -   最大延迟约束：$D_{\\max} = 2.95$ 纳秒，通过选项 $\\texttt{-datapath\\_only}$ 在 $\\mathrm{FF}_{\\mathrm{L}}/Q$ 和 $\\mathrm{FF}_{\\mathrm{C}}/D$ 之间指定。\n    -   约束优先级：$\\mathrm{set\\_false\\_path}$ > $\\mathrm{set\\_max\\_delay}$/$\\mathrm{set\\_min\\_delay}$ > $\\mathrm{set\\_multicycle\\_path}$ > 默认时钟关系。\n    -   未应用 $\\mathrm{set\\_false\\_path}$。\n\n2.  **验证问题：**\n    -   该问题在科学上是合理的，基于数字集成电路静态时序分析（STA）的既定原则。所有术语、参数和约束都是电子设计自动化（EDA）领域的标准。\n    -   该问题是定义明确的。它提供了一套完整的数据，并且关键地，提供了一个解决多重约束场景的优先级规则，从而导向唯一且有意义的解决方案。给定的数值是现实的。\n    -   该问题是客观的，使用了精确、无歧义或主观性的技术语言。\n    -   该问题并非不完整、矛盾、不切实际或定义不明确。存在多个可能冲突的约束是需要使用所提供的层次结构来解决的核心挑战，而非问题陈述中的缺陷。与保持时间相关的多周期约束（$N_{\\mathrm{hold}}$）与建立时间分析无关，这是此类旨在测试特定知识的问题的一个共同特征。\n    -   **结论：该问题有效。**\n\n3.  **进行求解：**\n目标是确定静态时序分析（STA）工具将为建立时间检查强制执行的、从发送端触发器输出（$\\mathrm{FF}_{\\mathrm{L}}/Q$）到捕获端触发器输入（$\\mathrm{FF}_{\\mathrm{C}}/D$）的有效最大数据路径延迟。该路径受到两种不同类型的时序约束：一个多周期路径约束和一个显式最大延迟约束。我们必须首先分析每个约束，然后应用指定的优先级规则来确定哪个约束起主导作用。\n\n首先，我们分析从 `set_multicycle_path` 命令派生的约束。\n建立时间检查确保在 $\\mathrm{FF}_{\\mathrm{L}}$ 由一个时钟沿发送的数据，在相应的捕获时钟沿所要求的时刻之前到达 $\\mathrm{FF}_{\\mathrm{C}}$。\n数据在与发送时钟沿到达相对应的绝对时间从 $\\mathrm{FF}_{\\mathrm{L}}$ 发出。我们假设时钟源处的发送沿位于时间 $t=0$。时钟信号在时间 $L_{\\mathrm{L}}$ 到达 $\\mathrm{FF}_{\\mathrm{L}}$。\n$N_{\\mathrm{setup}} = 3$ 个周期的 `set_multicycle_path` 建立时间约束指定，由 $t=0$ 时刻的边沿发送的数据，旨在由 $N_{\\mathrm{setup}}$ 个周期后出现的时钟沿捕获。这个捕获时钟沿在时钟源处出现在时间 $N_{\\mathrm{setup}} \\times T_{\\mathrm{clk}}$，并于时间 $N_{\\mathrm{setup}} T_{\\mathrm{clk}} + L_{\\mathrm{C}}$ 到达 $\\mathrm{FF}_{\\mathrm{C}}$。\n数据输入引脚 $\\mathrm{FF}_{\\mathrm{C}}/D$ 处的所需到达时间是此时钟捕获到达时间减去触发器的建立时间和任何时钟不确定性。\n$$t_{\\text{required at D}} = (N_{\\mathrm{setup}} T_{\\mathrm{clk}} + L_{\\mathrm{C}}) - t_{\\mathrm{setup}} - u_{\\mathrm{setup}}$$\n数据在 $\\mathrm{FF}_{\\mathrm{C}}/D$ 处的实际到达时间是发送时钟在 $\\mathrm{FF}_{\\mathrm{L}}$ 的到达时间、$\\mathrm{FF}_{\\mathrm{L}}$ 的 clock-to-Q 延迟（$t_{\\mathrm{clk-q}}$）以及从 $\\mathrm{FF}_{\\mathrm{L}}/Q$ 到 $\\mathrm{FF}_{\\mathrm{C}}/D$ 的组合逻辑延迟（$\\Delta_{Q \\to D}$）之和。\n$$t_{\\text{arrival at D}} = L_{\\mathrm{L}} + t_{\\mathrm{clk-q}} + \\Delta_{Q \\to D}$$\n如果 $t_{\\text{arrival at D}} \\le t_{\\text{required at D}}$，则满足建立时序。当等式成立时，可以找到 Q-to-D 路径的最大允许延迟 $\\Delta_{Q \\to D}^{\\text{max, mcp}}$：\n$$L_{\\mathrm{L}} + t_{\\mathrm{clk-q}} + \\Delta_{Q \\to D}^{\\text{max, mcp}} = N_{\\mathrm{setup}} T_{\\mathrm{clk}} + L_{\\mathrm{C}} - t_{\\mathrm{setup}} - u_{\\mathrm{setup}}$$\n$$\\Delta_{Q \\to D}^{\\text{max, mcp}} = N_{\\mathrm{setup}} T_{\\mathrm{clk}} + (L_{\\mathrm{C}} - L_{\\mathrm{L}}) - t_{\\mathrm{setup}} - u_{\\mathrm{setup}} - t_{\\mathrm{clk-q}}$$\n尽管问题要求的是 Q-to-D 路径上的允许延迟，但 STA 中的一种常见方法是分析从发送端触发器时钟引脚到捕获端触发器数据引脚的总路径延迟。我们将其定义为 $\\Delta_{\\text{path, total}} = t_{\\mathrm{clk-q}} + \\Delta_{Q \\to D}$。基于多周期约束的最大允许总路径延迟为：\n$$\\Delta_{\\text{path, total}}^{\\text{max, mcp}} = N_{\\mathrm{setup}} T_{\\mathrm{clk}} + (L_{\\mathrm{C}} - L_{\\mathrm{L}}) - t_{\\mathrm{setup}} - u_{\\mathrm{setup}}$$\n代入给定值：\n$$\\Delta_{\\text{path, total}}^{\\text{max, mcp}} = (3) (1.2) + (0.25 - 0.16) - 0.05 - 0.03$$\n$$\\Delta_{\\text{path, total}}^{\\text{max, mcp}} = 3.6 + 0.09 - 0.05 - 0.03 = 3.61 \\text{ ns}$$\n该值表示从 $\\mathrm{FF}_{\\mathrm{L}}$ 的时钟引脚到 $\\mathrm{FF}_{\\mathrm{C}}$ 的数据引脚的最大允许延迟。专门针对 Q-to-D 部分的约束将是 $3.61 - t_{\\mathrm{clk-q}}$，由于未提供 $t_{\\mathrm{clk-q}}$，因此无法确定。\n\n其次，我们分析 `set_max_delay` 约束。\n问题指出存在一个显式的最大延迟约束，$D_{\\max} = 2.95$ 纳秒。关键在于，它是通过选项 $\\texttt{-datapath\\_only}$ 指定的，并应用于 $\\mathrm{FF}_{\\mathrm{L}}/Q$ 和 $\\mathrm{FF}_{\\mathrm{C}}/D$ 之间的路径。这种类型的约束直接指定了两个寄存器引脚之间组合逻辑路径的最大允许传播延迟，不包括时钟网络延迟和 clock-to-Q 延迟。\n因此，该约束对 Q-to-D 路径延迟施加了一个直接的上限：\n$$\\Delta_{Q \\to D}^{\\text{max, smd}} = D_{\\max} = 2.95 \\text{ ns}$$\n\n最后，我们必须应用问题陈述中给出的优先级规则，以确定 STA 工具将强制执行哪个约束。给定的优先级为：$\\mathrm{set\\_false\\_path}$ > $\\mathrm{set\\_max\\_delay}$ > $\\mathrm{set\\_multicycle\\_path}$。\n由于存在 `set_max_delay` 约束，它优先于并覆盖 `set_multicycle_path` 约束。从时钟周期和多周期路径因子（$N_{\\mathrm{setup}}$）派生的时序检查将被忽略。STA 工具将转而强制执行 $D_{\\max}$ 的显式最大延迟。\n\n问题要求的是“建立时间要求，解释为工具将强制执行的从 $\\mathrm{FF}_{\\mathrm{L}}/Q$到 $\\mathrm{FF}_{\\mathrm{C}}/D$ 的允许最大数据路径延迟”。根据优先级规则，该值来自 `set_max_delay` 约束。\n主导约束是 $D_{\\max} = 2.95$ 纳秒。问题要求答案以四位有效数字表示。\n\n允许的最大数据路径延迟 = $2.950$ 纳秒。\n\n$N_{\\mathrm{hold}} = 2$ 的值仅与保持时间检查相关，这是一个与建立时间检查分开的独立分析，因此在本计算中未使用。",
            "answer": "$$\n\\boxed{2.950}\n$$"
        }
    ]
}
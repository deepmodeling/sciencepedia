{
    "hands_on_practices": [
        {
            "introduction": "Before a phase-locked loop (PLL) can achieve fine-grained phase alignment, it must first eliminate any large frequency difference between the oscillator and the reference signal. This practice explores the fundamental large-signal behavior of the PFD/CP during this crucial frequency acquisition phase, where it acts to \"pull\" the VCO frequency towards the target . By analyzing the transient response of the loop filter to a constant charge pump current, you will derive the VCO's frequency trajectory and calculate the time required for the loop to capture the desired frequency.",
            "id": "4288507",
            "problem": "Consider a charge-pump phase-locked loop employing a digital Phase-Frequency Detector (PFD) and an ideal Charge Pump (CP) that sources a constant current when the UP signal is asserted and sinks the same magnitude when the DOWN signal is asserted. At time $t=0$, the Voltage-Controlled Oscillator (VCO) free-running frequency $f_{\\text{free}}$ is lower than the reference frequency $f_{\\text{ref}}$ by a positive offset $\\Delta f$, so the PFD enters a frequency-acquisition regime in which the UP output is asserted continuously (i.e., saturated). The loop filter at the VCO control node is a first-order passive network composed of a resistor $R$ in parallel with a capacitor $C$, both to ground. The VCO has linear sensitivity $K_{\\text{vco}}$ so that its instantaneous frequency is $f_{\\text{vco}}(t)=f_{\\text{free}}+K_{\\text{vco}}\\,v(t)$, where $v(t)$ is the control voltage at the loop filter node. Assume the CP sources a constant current $I_{\\text{cp}}$ during this saturated UP regime, the filter is linear, and the initial control voltage is $v(0)=0$.\n\nStarting only from Kirchhoff’s Current Law, the capacitor constitutive relation $i_C=C\\,\\frac{dv}{dt}$, Ohm’s law $i_R=\\frac{v}{R}$, and the linear VCO relation above, derive a closed-form expression for the VCO frequency trajectory $f_{\\text{vco}}(t)$ during this constant-UP acquisition regime, and then determine the capture time $t_{\\text{lock}}$ at which $f_{\\text{vco}}(t)$ first reaches $f_{\\text{ref}}$ (i.e., the instant at which the PFD ceases constant UP assertion and the loop can transition to true phase lock).\n\nUse the following parameter values, which are scientifically consistent for an integrated implementation:\n- $f_{\\text{ref}}=2.5\\times 10^{9}\\ \\text{Hz}$,\n- $\\Delta f=1.8\\times 10^{8}\\ \\text{Hz}$, so $f_{\\text{free}}=f_{\\text{ref}}-\\Delta f$,\n- $I_{\\text{cp}}=1.5\\times 10^{-4}\\ \\text{A}$,\n- $R=2.0\\times 10^{4}\\ \\Omega$,\n- $C=2.0\\times 10^{-10}\\ \\text{F}$,\n- $K_{\\text{vco}}=2.0\\times 10^{8}\\ \\text{Hz}/\\text{V}$.\n\nExpress the final numerical value of $t_{\\text{lock}}$ in microseconds and round your answer to $4$ significant figures.",
            "solution": "The problem is first validated to ensure it is scientifically grounded, well-posed, and objective.\n\n### Step 1: Extract Givens\n- **System**: Charge-pump phase-locked loop (PLL) with a digital Phase-Frequency Detector (PFD) and an ideal Charge Pump (CP).\n- **Initial Condition**: At time $t=0$, the VCO free-running frequency $f_{\\text{free}}$ is lower than the reference frequency $f_{\\text{ref}}$ by a positive offset $\\Delta f$. This means $f_{\\text{free}} = f_{\\text{ref}} - \\Delta f$.\n- **Operating Regime**: The PFD is in a frequency-acquisition regime, and its UP output is asserted continuously. The CP sources a constant current $I_{\\text{cp}}$.\n- **Loop Filter**: A first-order passive network consisting of a resistor $R$ in parallel with a capacitor $C$.\n- **VCO Model**: The instantaneous frequency is given by the linear relation $f_{\\text{vco}}(t) = f_{\\text{free}} + K_{\\text{vco}} v(t)$, where $v(t)$ is the control voltage.\n- **Initial Voltage**: The initial control voltage is $v(0)=0$.\n- **Governing Laws**: Kirchhoff’s Current Law (KCL), capacitor relation $i_C = C \\frac{dv}{dt}$, and Ohm’s law $i_R = \\frac{v}{R}$.\n- **Objective 1**: Derive a closed-form expression for the VCO frequency trajectory $f_{\\text{vco}}(t)$.\n- **Objective 2**: Determine the capture time $t_{\\text{lock}}$, defined as the time when $f_{\\text{vco}}(t)$ first reaches $f_{\\text{ref}}$.\n- **Parameter Values**:\n  - $f_{\\text{ref}} = 2.5 \\times 10^{9} \\text{ Hz}$\n  - $\\Delta f = 1.8 \\times 10^{8} \\text{ Hz}$\n  - $I_{\\text{cp}} = 1.5 \\times 10^{-4} \\text{ A}$\n  - $R = 2.0 \\times 10^{4} \\text{ } \\Omega$\n  - $C = 2.0 \\times 10^{-10} \\text{ F}$\n  - $K_{\\text{vco}} = 2.0 \\times 10^{8} \\text{ Hz/V}$\n\n### Step 2: Validate Using Extracted Givens\n- **Scientific Grounding**: The problem describes a canonical frequency acquisition process in a Type-II PLL, a fundamental topic in analog and mixed-signal integrated circuit design. The models for the PFD/CP, loop filter (RC network), and VCO are standard, first-order approximations used in textbooks and research. The governing equations are fundamental laws of circuit theory. The parameter values provided are realistic for a gigahertz-range PLL implemented in a modern CMOS technology. The problem is scientifically sound.\n- **Well-Posedness**: The problem provides a complete set of parameters, a clear initial condition ($v(0)=0$), and a well-defined final state ($f_{\\text{vco}}(t_{\\text{lock}}) = f_{\\text{ref}}$). The physics described by the differential equation ensures a unique solution for $v(t)$ and, consequently, for $t_{\\text{lock}}$.\n- **Objectivity**: The problem is stated using precise, unambiguous technical language. There are no subjective or qualitative statements.\n\n### Step 3: Verdict and Action\nThe problem is valid. A rigorous solution can be derived.\n\n### Solution Derivation\nThe loop filter consists of a resistor $R$ and a capacitor $C$ in parallel. During the frequency acquisition phase, the charge pump delivers a constant current $I_{\\text{cp}}$ into this filter network. The voltage across the filter is the VCO control voltage, $v(t)$.\n\nApplying Kirchhoff’s Current Law (KCL) at the VCO control node, the incoming current from the charge pump must equal the sum of the currents flowing through the resistor ($i_R$) and the capacitor ($i_C$):\n$$I_{\\text{cp}} = i_R(t) + i_C(t)$$\nUsing Ohm's law for the resistor, $i_R(t) = \\frac{v(t)}{R}$, and the constitutive relation for the capacitor, $i_C(t) = C \\frac{dv(t)}{dt}$, we can write the differential equation governing the control voltage $v(t)$:\n$$I_{\\text{cp}} = \\frac{v(t)}{R} + C \\frac{dv(t)}{dt}$$\nThis is a first-order linear non-homogeneous ordinary differential equation. We rearrange it into a standard form:\n$$\\frac{dv(t)}{dt} + \\frac{1}{RC} v(t) = \\frac{I_{\\text{cp}}}{C}$$\nThe general solution to this equation is the sum of the homogeneous solution $v_h(t)$ and a particular solution $v_p(t)$. The homogeneous equation is $\\frac{dv_h(t)}{dt} + \\frac{1}{RC} v_h(t) = 0$, which has the solution $v_h(t) = A \\exp(-t/RC)$, where $A$ is a constant. For the constant forcing term $\\frac{I_{\\text{cp}}}{C}$, we assume a constant particular solution $v_p(t) = V_p$. Substituting this into the differential equation gives $0 + \\frac{1}{RC} V_p = \\frac{I_{\\text{cp}}}{C}$, which yields $V_p = I_{\\text{cp}} R$.\n\nThe general solution for $v(t)$ is therefore:\n$$v(t) = v_h(t) + v_p(t) = A \\exp(-t/RC) + I_{\\text{cp}} R$$\nTo find the constant $A$, we apply the initial condition $v(0)=0$:\n$$v(0) = A \\exp(0) + I_{\\text{cp}} R = A + I_{\\text{cp}} R = 0$$\nThis implies $A = -I_{\\text{cp}} R$. Substituting $A$ back into the general solution gives the explicit expression for the control voltage trajectory:\n$$v(t) = I_{\\text{cp}} R - I_{\\text{cp}} R \\exp(-t/RC) = I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t}{RC}\\right)\\right)$$\nNow we derive the closed-form expression for the VCO frequency trajectory, $f_{\\text{vco}}(t)$, by substituting the expression for $v(t)$ into the VCO's linear model:\n$$f_{\\text{vco}}(t) = f_{\\text{free}} + K_{\\text{vco}} v(t)$$\n$$f_{\\text{vco}}(t) = f_{\\text{free}} + K_{\\text{vco}} I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t}{RC}\\right)\\right)$$\nThis is the required expression for the VCO frequency trajectory.\n\nNext, we determine the capture time $t_{\\text{lock}}$, which is the instant when $f_{\\text{vco}}(t)$ reaches $f_{\\text{ref}}$. We set $f_{\\text{vco}}(t_{\\text{lock}}) = f_{\\text{ref}}$:\n$$f_{\\text{ref}} = f_{\\text{free}} + K_{\\text{vco}} I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right)\\right)$$\nUsing the given relation $f_{\\text{ref}} - f_{\\text{free}} = \\Delta f$, we have:\n$$\\Delta f = K_{\\text{vco}} I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right)\\right)$$\nWe now solve for $t_{\\text{lock}}$:\n$$\\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R} = 1 - \\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right)$$\n$$\\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right) = 1 - \\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R}$$\nTaking the natural logarithm of both sides:\n$$-\\frac{t_{\\text{lock}}}{RC} = \\ln\\left(1 - \\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R}\\right)$$\n$$t_{\\text{lock}} = -RC \\ln\\left(1 - \\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R}\\right)$$\nThis is the symbolic expression for the capture time.\n\nNow, we substitute the given numerical values:\n- $R = 2.0 \\times 10^{4} \\text{ } \\Omega$\n- $C = 2.0 \\times 10^{-10} \\text{ F}$\n- $I_{\\text{cp}} = 1.5 \\times 10^{-4} \\text{ A}$\n- $K_{\\text{vco}} = 2.0 \\times 10^{8} \\text{ Hz/V}$\n- $\\Delta f = 1.8 \\times 10^{8} \\text{ Hz}$\n\nFirst, we calculate the intermediate terms:\nThe time constant $\\tau = RC$:\n$$\\tau = (2.0 \\times 10^{4}) \\times (2.0 \\times 10^{-10}) = 4.0 \\times 10^{-6} \\text{ s}$$\nThe steady-state voltage step $I_{\\text{cp}} R$:\n$$I_{\\text{cp}} R = (1.5 \\times 10^{-4}) \\times (2.0 \\times 10^{4}) = 3.0 \\text{ V}$$\nThe maximum frequency deviation $K_{\\text{vco}} I_{\\text{cp}} R$:\n$$K_{\\text{vco}} I_{\\text{cp}} R = (2.0 \\times 10^{8}) \\times (3.0) = 6.0 \\times 10^{8} \\text{ Hz}$$\nSince $K_{\\text{vco}} I_{\\text{cp}} R > \\Delta f$, frequency lock is achievable.\n\nNow we substitute these into the expression for $t_{\\text{lock}}$:\n$$t_{\\text{lock}} = -(4.0 \\times 10^{-6}) \\ln\\left(1 - \\frac{1.8 \\times 10^{8}}{6.0 \\times 10^{8}}\\right)$$\n$$t_{\\text{lock}} = -(4.0 \\times 10^{-6}) \\ln(1 - 0.3)$$\n$$t_{\\text{lock}} = -(4.0 \\times 10^{-6}) \\ln(0.7)$$\nUsing the value $\\ln(0.7) \\approx -0.3566749$:\n$$t_{\\text{lock}} \\approx -(4.0 \\times 10^{-6}) \\times (-0.3566749) \\text{ s}$$\n$$t_{\\text{lock}} \\approx 1.4266996 \\times 10^{-6} \\text{ s}$$\nThe problem requires the answer in microseconds ($\\mu\\text{s}$), where $1 \\text{ } \\mu\\text{s} = 10^{-6} \\text{ s}$.\n$$t_{\\text{lock}} \\approx 1.4266996 \\text{ } \\mu\\text{s}$$\nRounding to $4$ significant figures, we get:\n$$t_{\\text{lock}} \\approx 1.427 \\text{ } \\mu\\text{s}$$",
            "answer": "$$\\boxed{1.427}$$"
        },
        {
            "introduction": "Once a PLL achieves lock, its ability to maintain that lock is not infinite; it is constrained by the physical limits of its components. This practice investigates the static lock range, which defines the maximum frequency offset the loop can sustain in a steady state without losing lock . You will learn to identify the key DC limiting factors, such as the charge pump's maximum current and the VCO's finite control voltage range, and determine which bottleneck sets the ultimate boundary for the PLL's operational frequency window.",
            "id": "4288478",
            "problem": "A phase-frequency detector (PFD) with an ideal charge pump (CP) drives a passive second-order loop filter that controls a voltage-controlled oscillator (VCO). The PFD-CP delivers ideal current pulses whose magnitude is limited to a maximum of $I_{cp}$, and whose time average equals the net direct-current (DC) current required by the loop filter at steady state. The loop filter topology is as follows: the CP output node (node $A$) connects to the VCO control node (node $B$) through a series resistor $R_{1}$; a capacitor $C_{1}$ connects from node $A$ to ground; a capacitor $C_{2}$ connects from node $B$ to ground; and a bleed resistor $R_{b}$ connects from node $B$ to a mid-supply bias $V_{\\mathrm{mid}}$ to center the VCO operating point. The VCO is linearized around $V_{\\mathrm{mid}}$, with frequency-voltage gain $K_{vco}$ in $\\mathrm{Hz}/\\mathrm{V}$ such that\n$$\nf_{\\mathrm{out}} \\;=\\; f_{\\mathrm{free}} \\;+\\; K_{vco}\\,\\big(V_{B} - V_{\\mathrm{mid}}\\big),\n$$\nwhere $f_{\\mathrm{free}}$ is the free-running VCO frequency at $V_{B}=V_{\\mathrm{mid}}$, and $V_{B}$ is the control voltage at node $B$. The VCO control input range is limited to $V_{\\min} \\le V_{B} \\le V_{\\max}$, with $V_{\\min}  V_{\\mathrm{mid}}  V_{\\max}$. Assume ideal PFD operation and ideal current steering in the CP except for the magnitude limit $I_{cp}$.\n\nIn steady-state lock to a target frequency $f_{\\mathrm{tgt}}$ (for example $f_{\\mathrm{tgt}} = f_{\\mathrm{ref}}/N$ with integer divide ratio $N$), the average CP current must balance the DC current through the bleed resistor to hold $V_{B}$ at the required offset from $V_{\\mathrm{mid}}$ that realizes $f_{\\mathrm{out}} = f_{\\mathrm{tgt}}$. The capacitors $C_{1}$ and $C_{2}$ can be treated as open circuits for DC, and the series resistor $R_{1}$ only drops voltage proportional to the average CP current.\n\nGiven the following numerical values:\n- $I_{cp} = 20\\,\\mu\\mathrm{A}$,\n- $R_{1} = 1.8\\,\\mathrm{k}\\Omega$,\n- $C_{1} = 100\\,\\mathrm{pF}$,\n- $C_{2} = 22\\,\\mathrm{pF}$,\n- $R_{b} = 30\\,\\mathrm{k}\\Omega$,\n- $K_{vco} = 120 \\times 10^{6}\\,\\mathrm{Hz}/\\mathrm{V}$,\n- $V_{\\min} = 0\\,\\mathrm{V}$, $V_{\\mathrm{mid}} = 0.9\\,\\mathrm{V}$, $V_{\\max} = 1.8\\,\\mathrm{V}$,\n\nderive from first principles an expression for the maximum magnitude of the recoverable static frequency difference $\\Delta f_{\\max} = |f_{\\mathrm{tgt}} - f_{\\mathrm{free}}|$ that the loop can correct in steady state without saturating the control voltage or the charge pump. Then evaluate the expression using the given values. Express your final answer in $\\mathrm{Hz}$ and round your answer to four significant figures.",
            "solution": "The problem asks for the maximum magnitude of the recoverable static frequency difference, $\\Delta f_{\\max} = |f_{\\mathrm{tgt}} - f_{\\mathrm{free}}|$, that the Phase-Locked Loop (PLL) can maintain in steady-state lock. This quantity is determined by the DC operating limits of the loop components, specifically the VCO control voltage range and the maximum charge pump current. We will analyze the circuit under steady-state DC conditions.\n\nIn a steady-state lock condition, the net output of the Phase-Frequency Detector (PFD) and Charge Pump (CP) is a DC current, which we denote as the average current $\\langle I_{cp} \\rangle$. This current maintains the necessary DC voltage at the VCO control input, node $B$, to produce the target frequency $f_{\\mathrm{tgt}}$. For DC analysis, the capacitors $C_1$ and $C_2$ behave as open circuits.\n\nThe DC circuit is as follows: The average current $\\langle I_{cp} \\rangle$ is sourced or sunk by the CP at node $A$. This current flows through resistor $R_1$ to node $B$. The VCO input is assumed to have infinite impedance, so no DC current flows into it. Therefore, by Kirchhoff's Current Law (KCL) at node $B$, the entire current flowing from $R_1$ must flow through the bleed resistor $R_b$. This means the average current from the charge pump is equal to the current through the bleed resistor.\n\nThe current through the bleed resistor $R_b$, connected between node $B$ and the bias voltage $V_{\\mathrm{mid}}$, is given by Ohm's law:\n$$\nI_{R_b} = \\frac{V_B - V_{\\mathrm{mid}}}{R_b}\n$$\nwhere $V_B$ is the DC voltage at node $B$. Since $\\langle I_{cp} \\rangle = I_{R_b}$ in steady state, we have:\n$$\n\\langle I_{cp} \\rangle = \\frac{V_B - V_{\\mathrm{mid}}}{R_b}\n$$\nThis equation establishes the relationship between the average charge pump current and the VCO control voltage offset from its center value. Note that the resistor $R_1$ does not appear in this key DC relationship, as it only sets the voltage at node $A$ to be $V_A = V_B + \\langle I_{cp} \\rangle R_1$, which is not relevant for determining $V_B$ or the frequency.\n\nThe VCO's output frequency $f_{\\mathrm{out}}$ is linearly related to the control voltage $V_B$:\n$$\nf_{\\mathrm{out}} = f_{\\mathrm{free}} + K_{vco}(V_B - V_{\\mathrm{mid}})\n$$\nIn lock, $f_{\\mathrm{out}} = f_{\\mathrm{tgt}}$. The static frequency difference is therefore:\n$$\n\\Delta f = f_{\\mathrm{tgt}} - f_{\\mathrm{free}} = K_{vco}(V_B - V_{\\mathrm{mid}})\n$$\nThe maximum magnitude of this difference, $\\Delta f_{\\max}$, is limited by the maximum achievable magnitude of the voltage offset, $|V_B - V_{\\mathrm{mid}}|_{\\max}$.\n$$\n\\Delta f_{\\max} = K_{vco} \\cdot |V_B - V_{\\mathrm{mid}}|_{\\max}\n$$\nThe value of $|V_B - V_{\\mathrm{mid}}|_{\\max}$ is determined by two constraints: the VCO control voltage range and the CP current limit.\n\nConstraint 1: VCO Control Voltage Range\nThe problem specifies that the VCO control voltage $V_B$ must lie within the range $[V_{\\min}, V_{\\max}]$.\n$$\nV_{\\min} \\le V_B \\le V_{\\max}\n$$\nThis constrains the deviation from $V_{\\mathrm{mid}}$ as follows:\n$$\nV_{\\min} - V_{\\mathrm{mid}} \\le V_B - V_{\\mathrm{mid}} \\le V_{\\max} - V_{\\mathrm{mid}}\n$$\nThe maximum magnitude of the voltage offset allowed by the rails is:\n$$\n\\Delta V_{\\max, \\mathrm{rail}} = \\max(V_{\\max} - V_{\\mathrm{mid}}, V_{\\mathrm{mid}} - V_{\\min})\n$$\nThe corresponding maximum frequency difference is:\n$$\n\\Delta f_{\\max, V} = K_{vco} \\cdot \\Delta V_{\\max, \\mathrm{rail}}\n$$\n\nConstraint 2: Charge Pump Current Limit\nThe problem states that the magnitude of the CP current is limited to $I_{cp}$. This means the average DC current provided by the CP is also limited in magnitude:\n$$\n|\\langle I_{cp} \\rangle| \\le I_{cp}\n$$\nSubstituting our expression for $\\langle I_{cp} \\rangle$:\n$$\n\\left| \\frac{V_B - V_{\\mathrm{mid}}}{R_b} \\right| \\le I_{cp}\n$$\nThis implies a limit on the voltage offset that can be sustained by the charge pump:\n$$\n|V_B - V_{\\mathrm{mid}}| \\le I_{cp} R_b\n$$\nLet's define this current-limited voltage offset as $\\Delta V_{\\max, I} = I_{cp} R_b$. The corresponding maximum frequency difference is:\n$$\n\\Delta f_{\\max, I} = K_{vco} \\cdot \\Delta V_{\\max, I} = K_{vco} I_{cp} R_b\n$$\n\nThe overall maximum recoverable frequency difference $\\Delta f_{\\max}$ is determined by the stricter of these two constraints. The effective maximum voltage offset is the minimum of the rail-limited and current-limited values.\n$$\n|V_B - V_{\\mathrm{mid}}|_{\\max} = \\min(\\Delta V_{\\max, \\mathrm{rail}}, \\Delta V_{\\max, I})\n$$\nTherefore, the final expression for $\\Delta f_{\\max}$ is:\n$$\n\\Delta f_{\\max} = K_{vco} \\cdot \\min\\big(\\max(V_{\\max} - V_{\\mathrm{mid}}, V_{\\mathrm{mid}} - V_{\\min}), \\ I_{cp} R_b\\big)\n$$\n\nWe now evaluate this expression using the given numerical values:\n- $I_{cp} = 20\\,\\mu\\mathrm{A} = 2.0 \\times 10^{-5}\\,\\mathrm{A}$\n- $R_b = 30\\,\\mathrm{k}\\Omega = 3.0 \\times 10^{4}\\,\\Omega$\n- $K_{vco} = 120 \\times 10^{6}\\,\\mathrm{Hz}/\\mathrm{V}$\n- $V_{\\min} = 0\\,\\mathrm{V}$, $V_{\\mathrm{mid}} = 0.9\\,\\mathrm{V}$, $V_{\\max} = 1.8\\,\\mathrm{V}$\n\nFirst, we calculate the two limiting voltage offsets:\nThe voltage rail limit is:\n$$\n\\Delta V_{\\max, \\mathrm{rail}} = \\max(1.8\\,\\mathrm{V} - 0.9\\,\\mathrm{V}, \\ 0.9\\,\\mathrm{V} - 0\\,\\mathrm{V}) = \\max(0.9\\,\\mathrm{V}, 0.9\\,\\mathrm{V}) = 0.9\\,\\mathrm{V}\n$$\nThe current limit is:\n$$\n\\Delta V_{\\max, I} = I_{cp} R_b = (2.0 \\times 10^{-5}\\,\\mathrm{A}) \\cdot (3.0 \\times 10^{4}\\,\\Omega) = 6.0 \\times 10^{-1}\\,\\mathrm{V} = 0.6\\,\\mathrm{V}\n$$\n\nComparing the two limits, we find the effective maximum voltage offset:\n$$\n|V_B - V_{\\mathrm{mid}}|_{\\max} = \\min(0.9\\,\\mathrm{V}, 0.6\\,\\mathrm{V}) = 0.6\\,\\mathrm{V}\n$$\nThe system is limited by the charge pump's maximum current, not the VCO's control voltage range.\n\nFinally, we calculate the maximum recoverable static frequency difference:\n$$\n\\Delta f_{\\max} = K_{vco} \\cdot |V_B - V_{\\mathrm{mid}}|_{\\max}\n$$\n$$\n\\Delta f_{\\max} = (120 \\times 10^{6}\\,\\mathrm{Hz}/\\mathrm{V}) \\cdot (0.6\\,\\mathrm{V})\n$$\n$$\n\\Delta f_{\\max} = 72 \\times 10^{6}\\,\\mathrm{Hz}\n$$\nThe problem requires the answer to be rounded to four significant figures.\n$$\n\\Delta f_{\\max} = 72,000,000\\,\\mathrm{Hz} = 7.200 \\times 10^{7}\\,\\mathrm{Hz}\n$$",
            "answer": "$$\n\\boxed{7.200 \\times 10^{7}}\n$$"
        },
        {
            "introduction": "While ideal models provide a foundational understanding, real-world circuit performance is often dictated by subtle non-idealities. This exercise delves into a classic imperfection: timing mismatches in the PFD's asynchronous reset path, which can cause both the UP and DOWN outputs to be active simultaneously for a brief period . By applying the principle of charge conservation across the system's parasitic and filter capacitances, you will quantify the resulting voltage glitch on the loop filter, a phenomenon that is a primary source of unwanted reference spurs in high-performance PLLs.",
            "id": "4288522",
            "problem": "A Phase-Frequency Detector (PFD) and Charge Pump (CP) pair is implemented in Complementary Metal-Oxide-Semiconductor (CMOS) with an asynchronous reset. The PFD issues non-overlapping pulses ideally, but a mismatch in the reset path delays produces a finite overlap when both the $\\text{UP}$ and $\\text{DOWN}$ outputs are high concurrently. Consider the following architecture and parameters.\n\n- The PFD reset path delays for the $\\text{UP}$ and $\\text{DOWN}$ legs are $t_{\\text{rst,UP}}$ and $t_{\\text{rst,DN}}$, respectively. The overlap time is $\\tau = |t_{\\text{rst,DN}} - t_{\\text{rst,UP}}|$.\n- The CP has two switching branches (source and sink). Each branch connects to the loop filter input node and exhibits a dominant drain-side parasitic capacitance to ground. Denote these drain capacitances by $C_{u}$ for the sourcing branch and $C_{d}$ for the sinking branch.\n- A precharge scheme biases the sourcing-branch drain node to $V_{\\text{DD}}$ when its branch is off, and the sinking-branch drain node to $0$ when its branch is off. The loop filter input node is connected to a capacitor $C_{f}$ initially at voltage $V_{f0}$.\n- During the overlap interval $\\tau$, both branches turn on, effectively connecting the three capacitors $C_{u}$, $C_{d}$, and $C_{f}$ together through low on-resistance paths. Assume the overlap $\\tau$ is long compared to the relevant resistor-capacitor time constants so that the three nodes settle to a common voltage by charge sharing during $\\tau$.\n- The on-resistances of the sourcing and sinking branch switches when on are $R_{\\text{on,UP}}$ and $R_{\\text{on,DN}}$, respectively, and the effective series time constant to reach the shared state can be approximated by $\\left(R_{\\text{on,UP}} \\parallel R_{\\text{on,DN}}\\right)\\left(C_{u} + C_{d} + C_{f}\\right)$, where $\\parallel$ denotes parallel combination.\n\nGiven the numerical values\n$$\nV_{\\text{DD}} = 1.1\\,\\text{V},\\quad t_{\\text{rst,UP}} = 350\\,\\text{ps},\\quad t_{\\text{rst,DN}} = 1.35\\,\\text{ns},\\quad R_{\\text{on,UP}} = 50\\,\\Omega,\\quad R_{\\text{on,DN}} = 50\\,\\Omega,\n$$\n$$\nC_{u} = 20\\,\\text{fF},\\quad C_{d} = 30\\,\\text{fF},\\quad C_{f} = 2.0\\,\\text{pF},\\quad V_{f0} = 0.60\\,\\text{V},\n$$\nderive from first principles the effect of the reset path delay mismatch on the $\\text{UP}/\\text{DOWN}$ pulse overlap and compute the resulting charge sharing glitch at the CP input (i.e., the loop filter input node). Specifically:\n\n1. Using fundamental definitions, relate the overlap duration $\\tau$ to the reset delay mismatch.\n2. Assuming $\\tau$ is sufficiently long for charge sharing to complete, use charge conservation to determine the shared voltage $V_{f}$ after the overlap connects $C_{u}$ at $V_{\\text{DD}}$, $C_{d}$ at $0$, and $C_{f}$ at $V_{f0}$.\n3. Define the glitch as $\\Delta V_{f} = V_{f} - V_{f0}$ and compute its numerical value.\n\nRound your final numerical answer to four significant figures and express it in volts. State the answer in radians or degrees only if an angle appears; otherwise, no angle unit is needed here. Use the specified unit for voltage in the reasoning, but do not include units in the final boxed answer.",
            "solution": "The problem statement is evaluated and found to be valid. It is scientifically grounded in the principles of circuit theory, specifically charge conservation, and describes a well-known non-ideal effect in phase-locked loop (PLL) subsystems. The problem is well-posed, with all necessary parameters provided and a clear set of objectives. The data are physically realistic and consistent. We may, therefore, proceed with a formal solution.\n\nThe problem asks for the calculation of the voltage glitch at the charge pump output due to a mismatch in the Phase-Frequency Detector (PFD) reset path delays. The solution is structured according to the three tasks specified.\n\nFirst, we validate the procedural assumption that the overlap time $\\tau$ is sufficient for the charge sharing process to reach a steady state. The overlap time $\\tau$ is given by the absolute difference between the reset path delays for the $\\text{UP}$ and $\\text{DOWN}$ signals.\n$$\n\\tau = |t_{\\text{rst,DN}} - t_{\\text{rst,UP}}|\n$$\nSubstituting the given numerical values:\n$$\nt_{\\text{rst,UP}} = 350\\,\\text{ps} = 0.35\\,\\text{ns}\n$$\n$$\nt_{\\text{rst,DN}} = 1.35\\,\\text{ns}\n$$\nThe overlap duration is:\n$$\n\\tau = |1.35\\,\\text{ns} - 0.35\\,\\text{ns}| = 1.0\\,\\text{ns}\n$$\nThe time constant for the charge sharing process, $T_c$, is given by the product of the equivalent resistance of the parallel switches and the total capacitance being connected.\n$$\nT_c = \\left(R_{\\text{on,UP}} \\parallel R_{\\text{on,DN}}\\right)\\left(C_{u} + C_{d} + C_{f}\\right)\n$$\nThe parallel resistance is:\n$$\nR_{\\text{on,UP}} \\parallel R_{\\text{on,DN}} = \\frac{R_{\\text{on,UP}} R_{\\text{on,DN}}}{R_{\\text{on,UP}} + R_{\\text{on,DN}}} = \\frac{50\\,\\Omega \\times 50\\,\\Omega}{50\\,\\Omega + 50\\,\\Omega} = \\frac{2500}{100}\\,\\Omega = 25\\,\\Omega\n$$\nThe total capacitance is:\n$$\nC_{u} + C_{d} + C_{f} = 20\\,\\text{fF} + 30\\,\\text{fF} + 2.0\\,\\text{pF} = 50 \\times 10^{-15}\\,\\text{F} + 2000 \\times 10^{-15}\\,\\text{F} = 2050 \\times 10^{-15}\\,\\text{F} = 2.05\\,\\text{pF}\n$$\nThe time constant is therefore:\n$$\nT_c = (25\\,\\Omega)(2.05 \\times 10^{-12}\\,\\text{F}) = 51.25 \\times 10^{-12}\\,\\text{s} = 51.25\\,\\text{ps}\n$$\nThe ratio of the overlap duration to the time constant is $\\frac{\\tau}{T_c} = \\frac{1000\\,\\text{ps}}{51.25\\,\\text{ps}} \\approx 19.5$. Since transient decay in an RC circuit is exponential (e.g., reaching over $99.99\\%$ of the final value after $10$ time constants), an overlap duration of nearly $20$ time constants is more than sufficient for the voltages to settle. The assumption is thus justified.\n\nNext, we derive the final shared voltage $V_f$ using the principle of conservation of charge. Before the overlap event, the three capacitors $C_u$, $C_d$, and $C_f$ form an electrically isolated system. The total charge $Q_{\\text{initial}}$ in this system is the sum of the charges on each capacitor. Based on the precharge scheme:\n- The sourcing-branch drain capacitor $C_u$ is charged to the supply voltage $V_{\\text{DD}}$. Its charge is $Q_u = C_u V_{\\text{DD}}$.\n- The sinking-branch drain capacitor $C_d$ is discharged to ground ($0\\,\\text{V}$). Its charge is $Q_d = C_d \\cdot 0 = 0$.\n- The loop filter capacitor $C_f$ is at an initial voltage $V_{f0}$. Its charge is $Q_f = C_f V_{f0}$.\n\nThe total initial charge is:\n$$\nQ_{\\text{initial}} = Q_u + Q_d + Q_f = C_u V_{\\text{DD}} + 0 + C_f V_{f0} = C_u V_{\\text{DD}} + C_f V_{f0}\n$$\nDuring the overlap duration $\\tau$, the switches in both the sourcing and sinking branches of the charge pump turn on. This connects capacitors $C_u$, $C_d$, and $C_f$ in parallel. They share their charge until they all reach a common final voltage, which we denote as $V_f$.\n\nThe total final charge $Q_{\\text{final}}$ is the sum of the charges on the capacitors at this new voltage $V_f$:\n$$\nQ_{\\text{final}} = C_u V_f + C_d V_f + C_f V_f = (C_u + C_d + C_f) V_f\n$$\nBy the law of conservation of charge, the total charge before and after the event must be equal:\n$$\nQ_{\\text{initial}} = Q_{\\text{final}}\n$$\n$$\nC_u V_{\\text{DD}} + C_f V_{f0} = (C_u + C_d + C_f) V_f\n$$\nSolving for the final shared voltage $V_f$:\n$$\nV_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0}}{C_u + C_d + C_f}\n$$\nFinally, we compute the voltage glitch, $\\Delta V_f$, defined as the change in the loop filter voltage:\n$$\n\\Delta V_f = V_f - V_{f0}\n$$\nSubstituting the expression for $V_f$:\n$$\n\\Delta V_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0}}{C_u + C_d + C_f} - V_{f0}\n$$\nTo simplify, we find a common denominator:\n$$\n\\Delta V_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0} - V_{f0}(C_u + C_d + C_f)}{C_u + C_d + C_f}\n$$\n$$\n\\Delta V_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0} - C_u V_{f0} - C_d V_{f0} - C_f V_{f0}}{C_u + C_d + C_f}\n$$\n$$\n\\Delta V_f = \\frac{C_u (V_{\\text{DD}} - V_{f0}) - C_d V_{f0}}{C_u + C_d + C_f}\n$$\nThis expression provides the voltage glitch in terms of the given parameters. Now, we substitute the numerical values to compute the result.\n- $V_{\\text{DD}} = 1.1\\,\\text{V}$\n- $V_{f0} = 0.60\\,\\text{V}$\n- $C_{u} = 20\\,\\text{fF} = 20 \\times 10^{-15}\\,\\text{F}$\n- $C_{d} = 30\\,\\text{fF} = 30 \\times 10^{-15}\\,\\text{F}$\n- $C_{f} = 2.0\\,\\text{pF} = 2000 \\times 10^{-15}\\,\\text{F}$\n\nThe numerator is:\n$$\n\\text{Numerator} = C_u (V_{\\text{DD}} - V_{f0}) - C_d V_{f0} = (20 \\times 10^{-15}\\,\\text{F}) (1.1\\,\\text{V} - 0.60\\,\\text{V}) - (30 \\times 10^{-15}\\,\\text{F}) (0.60\\,\\text{V})\n$$\n$$\n\\text{Numerator} = (20 \\times 10^{-15})(0.5) - (30 \\times 10^{-15})(0.6) = (10 - 18) \\times 10^{-15}\\,\\text{C} = -8 \\times 10^{-15}\\,\\text{C}\n$$\nThe denominator is the total capacitance:\n$$\n\\text{Denominator} = C_u + C_d + C_f = (20 + 30 + 2000) \\times 10^{-15}\\,\\text{F} = 2050 \\times 10^{-15}\\,\\text{F}\n$$\nThe voltage glitch is:\n$$\n\\Delta V_f = \\frac{-8 \\times 10^{-15}\\,\\text{C}}{2050 \\times 10^{-15}\\,\\text{F}} = -\\frac{8}{2050}\\,\\text{V} \\approx -0.003902439\\,\\text{V}\n$$\nRounding the result to four significant figures, we get:\n$$\n\\Delta V_f \\approx -0.003902\\,\\text{V}\n$$\nThe negative sign indicates that the net effect of the charge sharing is a slight discharge of the loop filter capacitor. This is because the charge drawn by the initially-at-zero capacitor $C_d$ is greater than the charge supplied by the initially-at-$V_{\\text{DD}}$ capacitor $C_u$ under these specific voltage and capacitance conditions.",
            "answer": "$$\\boxed{-0.003902}$$"
        }
    ]
}
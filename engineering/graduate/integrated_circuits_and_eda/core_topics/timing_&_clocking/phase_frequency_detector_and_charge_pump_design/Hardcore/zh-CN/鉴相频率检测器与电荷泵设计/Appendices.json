{
    "hands_on_practices": [
        {
            "introduction": "锁相环在实现相位锁定之前，必须首先将其压控振荡器（VCO）的频率牵引至接近参考频率。这个初始阶段被称为频率捕获，是锁相环设计中一个关键的大信号瞬态过程。通过本练习，我们将从基本物理定律出发，推导在恒定电荷泵电流作用下VCO的频率轨迹，并计算达到频率锁定所需的时间，这对于理解锁相环的启动行为至关重要。",
            "id": "4288507",
            "problem": "考虑一个采用数字鉴频鉴相器（PFD）和理想电荷泵（CP）的电荷泵锁相环。当UP信号置为有效时，该电荷泵提供一个恒定电流；当DOWN信号置为有效时，它吸收等值的电流。在时间 $t=0$ 时，压控振荡器（VCO）的自由振荡频率 $f_{\\text{free}}$ 低于参考频率 $f_{\\text{ref}}$，其差值为一个正常数 $\\Delta f$。因此，PFD进入频率捕获状态，在此状态下其UP输出持续有效（即饱和）。VCO控制节点处的环路滤波器是一个一阶无源网络，由一个电阻 $R$ 和一个电容 $C$ 并联接地构成。VCO具有线性灵敏度 $K_{\\text{vco}}$，因此其瞬时频率为 $f_{\\text{vco}}(t)=f_{\\text{free}}+K_{\\text{vco}}\\,v(t)$，其中 $v(t)$ 是环路滤波器节点上的控制电压。假设在此饱和UP状态期间，CP提供恒定电流 $I_{\\text{cp}}$，滤波器是线性的，且初始控制电压为 $v(0)=0$。\n\n仅从基尔霍夫电流定律、电容本构关系 $i_C=C\\,\\frac{dv}{dt}$、欧姆定律 $i_R=\\frac{v}{R}$ 以及上述线性VCO关系出发，推导在此恒定UP捕获状态下VCO频率轨迹 $f_{\\text{vco}}(t)$ 的闭式表达式，然后确定捕获时间 $t_{\\text{lock}}$，即 $f_{\\text{vco}}(t)$ 首次达到 $f_{\\text{ref}}$ 的时刻（也就是PFD停止恒定UP输出，环路可以过渡到真正锁相的时刻）。\n\n使用以下参数值，这些值对于集成电路实现是科学上一致的：\n- $f_{\\text{ref}}=2.5\\times 10^{9}\\ \\text{Hz}$，\n- $\\Delta f=1.8\\times 10^{8}\\ \\text{Hz}$，所以 $f_{\\text{free}}=f_{\\text{ref}}-\\Delta f$，\n- $I_{\\text{cp}}=1.5\\times 10^{-4}\\ \\text{A}$，\n- $R=2.0\\times 10^{4}\\ \\Omega$，\n- $C=2.0\\times 10^{-10}\\ \\text{F}$，\n- $K_{\\text{vco}}=2.0\\times 10^{8}\\ \\text{Hz}/\\text{V}$。\n\n将 $t_{\\text{lock}}$ 的最终数值以微秒表示，并四舍五入到 $4$ 位有效数字。",
            "solution": "首先对问题进行验证，以确保其科学基础扎实、提法恰当且客观。\n\n### 第1步：提取已知条件\n- **系统**：带有数字鉴频鉴相器（PFD）和理想电荷泵（CP）的电荷泵锁相环（PLL）。\n- **初始条件**：在时间 $t=0$ 时，VCO自由振荡频率 $f_{\\text{free}}$ 低于参考频率 $f_{\\text{ref}}$，差值为一个正常数 $\\Delta f$。这意味着 $f_{\\text{free}} = f_{\\text{ref}} - \\Delta f$。\n- **工作状态**：PFD处于频率捕获状态，其UP输出持续有效。CP提供一个恒定电流 $I_{\\text{cp}}$。\n- **环路滤波器**：一个由电阻 $R$ 和电容 $C$ 并联构成的一阶无源网络。\n- **VCO模型**：瞬时频率由线性关系 $f_{\\text{vco}}(t) = f_{\\text{free}} + K_{\\text{vco}} v(t)$ 给出，其中 $v(t)$ 是控制电压。\n- **初始电压**：初始控制电压为 $v(0)=0$。\n- **基本定律**：基尔霍夫电流定律（KCL）、电容关系 $i_C = C \\frac{dv}{dt}$ 和欧姆定律 $i_R = \\frac{v}{R}$。\n- **目标1**：推导VCO频率轨迹 $f_{\\text{vco}}(t)$ 的闭式表达式。\n- **目标2**：确定捕获时间 $t_{\\text{lock}}$，定义为 $f_{\\text{vco}}(t)$ 首次达到 $f_{\\text{ref}}$ 的时间。\n- **参数值**：\n  - $f_{\\text{ref}} = 2.5 \\times 10^{9} \\text{ Hz}$\n  - $\\Delta f = 1.8 \\times 10^{8} \\text{ Hz}$\n  - $I_{\\text{cp}} = 1.5 \\times 10^{-4} \\text{ A}$\n  - $R = 2.0 \\times 10^{4} \\text{ } \\Omega$\n  - $C = 2.0 \\times 10^{-10} \\text{ F}$\n  - $K_{\\text{vco}} = 2.0 \\times 10^{8} \\text{ Hz/V}$\n\n### 第2步：使用提取的已知条件进行验证\n- **科学基础**：该问题描述了II型锁相环中的一个典型频率捕获过程，这是模拟和混合信号集成电路设计中的一个基本课题。PFD/CP、环路滤波器（RC网络）和VCO的模型是教科书和研究中使用的标准一阶近似。所依据的方程是电路理论的基本定律。提供的参数值对于在现代CMOS技术中实现的千兆赫兹范围的锁相环是切合实际的。该问题在科学上是合理的。\n- **提法恰当性**：该问题提供了一套完整的参数、一个清晰的初始条件（$v(0)=0$）和一个明确定义的最终状态（$f_{\\text{vco}}(t_{\\text{lock}}) = f_{\\text{ref}}$）。由微分方程描述的物理过程确保了 $v(t)$ 以及因此 $t_{\\text{lock}}$ 的唯一解。\n- **客观性**：问题陈述使用了精确、无歧义的技术语言，没有主观或定性的陈述。\n\n### 第3步：结论与行动\n问题有效。可以推导出严谨的解。\n\n### 求解推导\n环路滤波器由一个电阻 $R$ 和一个电容 $C$ 并联组成。在频率捕获阶段，电荷泵向该滤波器网络提供一个恒定电流 $I_{\\text{cp}}$。滤波器两端的电压即为VCO控制电压 $v(t)$。\n\n在VCO控制节点处应用基尔霍夫电流定律（KCL），从电荷泵输入的电流必须等于流过电阻（$i_R$）和电容（$i_C$）的电流之和：\n$$I_{\\text{cp}} = i_R(t) + i_C(t)$$\n使用电阻的欧姆定律 $i_R(t) = \\frac{v(t)}{R}$ 和电容的本构关系 $i_C(t) = C \\frac{dv(t)}{dt}$，我们可以写出控制电压 $v(t)$ 所遵循的微分方程：\n$$I_{\\text{cp}} = \\frac{v(t)}{R} + C \\frac{dv(t)}{dt}$$\n这是一个一阶线性非齐次常微分方程。我们将其整理成标准形式：\n$$\\frac{dv(t)}{dt} + \\frac{1}{RC} v(t) = \\frac{I_{\\text{cp}}}{C}$$\n该方程的通解是齐次解 $v_h(t)$ 和一个特解 $v_p(t)$ 的和。齐次方程为 $\\frac{dv_h(t)}{dt} + \\frac{1}{RC} v_h(t) = 0$，其解为 $v_h(t) = A \\exp(-t/RC)$，其中 $A$ 是一个常数。对于常数强制项 $\\frac{I_{\\text{cp}}}{C}$，我们假设一个常数特解 $v_p(t) = V_p$。将其代入微分方程得到 $0 + \\frac{1}{RC} V_p = \\frac{I_{\\text{cp}}}{C}$，解得 $V_p = I_{\\text{cp}} R$。\n\n$v(t)$ 的通解因此为：\n$$v(t) = v_h(t) + v_p(t) = A \\exp(-t/RC) + I_{\\text{cp}} R$$\n为了求出常数 $A$，我们应用初始条件 $v(0)=0$：\n$$v(0) = A \\exp(0) + I_{\\text{cp}} R = A + I_{\\text{cp}} R = 0$$\n这意味着 $A = -I_{\\text{cp}} R$。将 $A$ 代回通解，得到控制电压轨迹的显式表达式：\n$$v(t) = I_{\\text{cp}} R - I_{\\text{cp}} R \\exp(-t/RC) = I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t}{RC}\\right)\\right)$$\n现在，通过将 $v(t)$ 的表达式代入VCO的线性模型，我们推导VCO频率轨迹 $f_{\\text{vco}}(t)$ 的闭式表达式：\n$$f_{\\text{vco}}(t) = f_{\\text{free}} + K_{\\text{vco}} v(t)$$\n$$f_{\\text{vco}}(t) = f_{\\text{free}} + K_{\\text{vco}} I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t}{RC}\\right)\\right)$$\n这就是所要求的VCO频率轨迹表达式。\n\n接下来，我们确定捕获时间 $t_{\\text{lock}}$，即 $f_{\\text{vco}}(t)$ 达到 $f_{\\text{ref}}$ 的时刻。我们令 $f_{\\text{vco}}(t_{\\text{lock}}) = f_{\\text{ref}}$：\n$$f_{\\text{ref}} = f_{\\text{free}} + K_{\\text{vco}} I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right)\\right)$$\n使用给定关系 $f_{\\text{ref}} - f_{\\text{free}} = \\Delta f$，我们有：\n$$\\Delta f = K_{\\text{vco}} I_{\\text{cp}} R \\left(1 - \\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right)\\right)$$\n我们现在求解 $t_{\\text{lock}}$：\n$$\\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R} = 1 - \\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right)$$\n$$\\exp\\left(-\\frac{t_{\\text{lock}}}{RC}\\right) = 1 - \\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R}$$\n对两边取自然对数：\n$$-\\frac{t_{\\text{lock}}}{RC} = \\ln\\left(1 - \\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R}\\right)$$\n$$t_{\\text{lock}} = -RC \\ln\\left(1 - \\frac{\\Delta f}{K_{\\text{vco}} I_{\\text{cp}} R}\\right)$$\n这就是捕获时间的符号表达式。\n\n现在，我们代入给定的数值：\n- $R = 2.0 \\times 10^{4} \\text{ } \\Omega$\n- $C = 2.0 \\times 10^{-10} \\text{ F}$\n- $I_{\\text{cp}} = 1.5 \\times 10^{-4} \\text{ A}$\n- $K_{\\text{vco}} = 2.0 \\times 10^{8} \\text{ Hz/V}$\n- $\\Delta f = 1.8 \\times 10^{8} \\text{ Hz}$\n\n首先，我们计算中间项：\n时间常数 $\\tau = RC$：\n$$\\tau = (2.0 \\times 10^{4}) \\times (2.0 \\times 10^{-10}) = 4.0 \\times 10^{-6} \\text{ s}$$\n稳态电压阶跃 $I_{\\text{cp}} R$：\n$$I_{\\text{cp}} R = (1.5 \\times 10^{-4}) \\times (2.0 \\times 10^{4}) = 3.0 \\text{ V}$$\n最大频率偏移 $K_{\\text{vco}} I_{\\text{cp}} R$：\n$$K_{\\text{vco}} I_{\\text{cp}} R = (2.0 \\times 10^{8}) \\times (3.0) = 6.0 \\times 10^{8} \\text{ Hz}$$\n由于 $K_{\\text{vco}} I_{\\text{cp}} R  \\Delta f$，频率锁定是可能实现的。\n\n现在我们将这些值代入 $t_{\\text{lock}}$ 的表达式中：\n$$t_{\\text{lock}} = -(4.0 \\times 10^{-6}) \\ln\\left(1 - \\frac{1.8 \\times 10^{8}}{6.0 \\times 10^{8}}\\right)$$\n$$t_{\\text{lock}} = -(4.0 \\times 10^{-6}) \\ln(1 - 0.3)$$\n$$t_{\\text{lock}} = -(4.0 \\times 10^{-6}) \\ln(0.7)$$\n使用 $\\ln(0.7) \\approx -0.3566749$ 的值：\n$$t_{\\text{lock}} \\approx -(4.0 \\times 10^{-6}) \\times (-0.3566749) \\text{ s}$$\n$$t_{\\text{lock}} \\approx 1.4266996 \\times 10^{-6} \\text{ s}$$\n题目要求答案以微秒（$\\mu\\text{s}$）为单位，其中 $1 \\text{ } \\mu\\text{s} = 10^{-6} \\text{ s}$。\n$$t_{\\text{lock}} \\approx 1.4266996 \\text{ } \\mu\\text{s}$$\n四舍五入到 $4$ 位有效数字，我们得到：\n$$t_{\\text{lock}} \\approx 1.427 \\text{ } \\mu\\text{s}$$",
            "answer": "$$\\boxed{1.427}$$"
        },
        {
            "introduction": "一旦锁相环完成频率捕获并进入稳态锁定，其维持锁定的能力并非没有限制。该练习将探讨锁相环在直流（DC）工作条件下的静态极限，通过分析电荷泵的最大输出电流和VCO的控制电压范围，来确定环路能够校正的最大静态频率误差。这个被称为“锁定范围”的关键参数，定义了锁相环能够稳定工作的频率边界。",
            "id": "4288478",
            "problem": "一个带有理想电荷泵 (CP) 的鉴相鉴频器 (PFD) 驱动一个无源二阶环路滤波器，该滤波器控制一个压控振荡器 (VCO)。PFD-CP 提供理想的电流脉冲，其幅值最大不超过 $I_{cp}$，其时间平均值等于环路滤波器在稳态下所需的净直流 (DC) 电流。环路滤波器的拓扑结构如下：CP 输出节点（节点 $A$）通过一个串联电阻 $R_{1}$ 连接到 VCO 控制节点（节点 $B$）；一个电容 $C_{1}$ 从节点 $A$ 连接到地；一个电容 $C_{2}$ 从节点 $B$ 连接到地；一个泄放电阻 $R_{b}$ 从节点 $B$ 连接到一个中点电源偏置 $V_{\\mathrm{mid}}$，以使 VCO 工作点居中。VCO 在 $V_{\\mathrm{mid}}$ 附近被线性化，其频率-电压增益为 $K_{vco}$ (单位为 $\\mathrm{Hz}/\\mathrm{V}$)，使得\n$$\nf_{\\mathrm{out}} \\;=\\; f_{\\mathrm{free}} \\;+\\; K_{vco}\\,\\big(V_{B} - V_{\\mathrm{mid}}\\big),\n$$\n其中 $f_{\\mathrm{free}}$ 是当 $V_{B}=V_{\\mathrm{mid}}$ 时 VCO 的自由振荡频率，$V_{B}$ 是节点 $B$ 的控制电压。VCO 控制输入范围限制在 $V_{\\min} \\le V_{B} \\le V_{\\max}$，其中 $V_{\\min}  V_{\\mathrm{mid}}  V_{\\max}$。假设除了幅值限制 $I_{cp}$ 外，PFD 操作理想，CP 中的电流导引也理想。\n\n在对目标频率 $f_{\\mathrm{tgt}}$（例如，对于整数分频比 $N$，$f_{\\mathrm{tgt}} = f_{\\mathrm{ref}}/N$）的稳态锁定下，平均 CP 电流必须平衡通过泄放电阻的直流电流，以将 $V_{B}$ 保持在相对于 $V_{\\mathrm{mid}}$ 所需的偏移量上，从而实现 $f_{\\mathrm{out}} = f_{\\mathrm{tgt}}$。对于直流分析，电容 $C_{1}$ 和 $C_{2}$ 可被视作开路，串联电阻 $R_{1}$ 上的电压降仅与平均 CP 电流成正比。\n\n给定以下数值：\n- $I_{cp} = 20\\,\\mu\\mathrm{A}$,\n- $R_{1} = 1.8\\,\\mathrm{k}\\Omega$,\n- $C_{1} = 100\\,\\mathrm{pF}$,\n- $C_{2} = 22\\,\\mathrm{pF}$,\n- $R_{b} = 30\\,\\mathrm{k}\\Omega$,\n- $K_{vco} = 120 \\times 10^{6}\\,\\mathrm{Hz}/\\mathrm{V}$,\n- $V_{\\min} = 0\\,\\mathrm{V}$，$V_{\\mathrm{mid}} = 0.9\\,\\mathrm{V}$，$V_{\\max} = 1.8\\,\\mathrm{V}$，\n\n请从基本原理推导一个表达式，用于计算环路在稳态下可以校正的可恢复静态频率差 $\\Delta f_{\\max} = |f_{\\mathrm{tgt}} - f_{\\mathrm{free}}|$ 的最大幅值，而不会使控制电压或电荷泵饱和。然后使用给定值计算该表达式。用 $\\mathrm{Hz}$ 表示你的最终答案，并四舍五入到四位有效数字。",
            "solution": "问题要求计算锁相环 (PLL) 在稳态锁定下能够维持的可恢复静态频率差的最大幅值 $\\Delta f_{\\max} = |f_{\\mathrm{tgt}} - f_{\\mathrm{free}}|$。该值由环路组件的直流工作极限决定，特别是 VCO 控制电压范围和最大电荷泵电流。我们将在稳态直流条件下分析该电路。\n\n在稳态锁定条件下，鉴相鉴频器 (PFD) 和电荷泵 (CP) 的净输出是一个直流电流，我们将其表示为平均电流 $\\langle I_{cp} \\rangle$。此电流在 VCO 控制输入端（节点 $B$）维持必要的直流电压，以产生目标频率 $f_{\\mathrm{tgt}}$。对于直流分析，电容 $C_1$ 和 $C_2$ 的行为如同开路。\n\n直流电路如下：平均电流 $\\langle I_{cp} \\rangle$ 由 CP 在节点 $A$ 源出或吸收。此电流通过电阻 $R_1$ 流向节点 $B$。VCO 输入被假定为具有无限阻抗，因此没有直流电流流入其中。因此，根据节点 $B$ 的基尔霍夫电流定律 (KCL)，从 $R_1$ 流出的全部电流必须流过泄放电阻 $R_b$。这意味着来自电荷泵的平均电流等于通过泄放电阻的电流。\n\n根据欧姆定律，连接在节点 $B$ 和偏置电压 $V_{\\mathrm{mid}}$ 之间的泄放电阻 $R_b$ 上的电流为：\n$$\nI_{R_b} = \\frac{V_B - V_{\\mathrm{mid}}}{R_b}\n$$\n其中 $V_B$ 是节点 $B$ 的直流电压。由于在稳态下 $\\langle I_{cp} \\rangle = I_{R_b}$，我们有：\n$$\n\\langle I_{cp} \\rangle = \\frac{V_B - V_{\\mathrm{mid}}}{R_b}\n$$\n这个方程建立了平均电荷泵电流与 VCO 控制电压相对于其中心值的偏移之间的关系。请注意，电阻 $R_1$ 没有出现在这个关键的直流关系中，因为它只将节点 $A$ 的电压设置为 $V_A = V_B + \\langle I_{cp} \\rangle R_1$，这与确定 $V_B$ 或频率无关。\n\nVCO 的输出频率 $f_{\\mathrm{out}}$ 与控制电压 $V_B$ 呈线性关系：\n$$\nf_{\\mathrm{out}} = f_{\\mathrm{free}} + K_{vco}(V_B - V_{\\mathrm{mid}})\n$$\n在锁定时，$f_{\\mathrm{out}} = f_{\\mathrm{tgt}}$。因此，静态频率差为：\n$$\n\\Delta f = f_{\\mathrm{tgt}} - f_{\\mathrm{free}} = K_{vco}(V_B - V_{\\mathrm{mid}})\n$$\n该差值的最大幅值 $\\Delta f_{\\max}$ 受限于电压偏移 $|V_B - V_{\\mathrm{mid}}|$ 的最大可实现幅值。\n$$\n\\Delta f_{\\max} = K_{vco} \\cdot |V_B - V_{\\mathrm{mid}}|_{\\max}\n$$\n$|V_B - V_{\\mathrm{mid}}|_{\\max}$ 的值由两个约束条件决定：VCO 控制电压范围和 CP 电流限制。\n\n约束 1：VCO 控制电压范围\n问题规定 VCO 控制电压 $V_B$ 必须在 $[V_{\\min}, V_{\\max}]$ 范围内。\n$$\nV_{\\min} \\le V_B \\le V_{\\max}\n$$\n这限制了与 $V_{\\mathrm{mid}}$ 的偏离如下：\n$$\nV_{\\min} - V_{\\mathrm{mid}} \\le V_B - V_{\\mathrm{mid}} \\le V_{\\max} - V_{\\mathrm{mid}}\n$$\n由电源轨限制的电压偏移最大幅值为：\n$$\n\\Delta V_{\\max, \\mathrm{rail}} = \\max(V_{\\max} - V_{\\mathrm{mid}}, V_{\\mathrm{mid}} - V_{\\min})\n$$\n相应的最大频率差为：\n$$\n\\Delta f_{\\max, V} = K_{vco} \\cdot \\Delta V_{\\max, \\mathrm{rail}}\n$$\n\n约束 2：电荷泵电流限制\n问题指出 CP 电流的幅值被限制在 $I_{cp}$。这意味着 CP 提供的平均直流电流的幅值也受到限制：\n$$\n|\\langle I_{cp} \\rangle| \\le I_{cp}\n$$\n代入我们关于 $\\langle I_{cp} \\rangle$ 的表达式：\n$$\n\\left| \\frac{V_B - V_{\\mathrm{mid}}}{R_b} \\right| \\le I_{cp}\n$$\n这意味着电荷泵可以维持的电压偏移有一个限制：\n$$\n|V_B - V_{\\mathrm{mid}}| \\le I_{cp} R_b\n$$\n我们定义这个电流限制的电压偏移为 $\\Delta V_{\\max, I} = I_{cp} R_b$。相应的最大频率差为：\n$$\n\\Delta f_{\\max, I} = K_{vco} \\cdot \\Delta V_{\\max, I} = K_{vco} I_{cp} R_b\n$$\n\n总的最大可恢复频率差 $\\Delta f_{\\max}$ 由这两个约束中更严格的一个决定。有效的最大电压偏移是电压轨限制值和电流限制值中的较小者。\n$$\n|V_B - V_{\\mathrm{mid}}|_{\\max} = \\min(\\Delta V_{\\max, \\mathrm{rail}}, \\Delta V_{\\max, I})\n$$\n因此，$\\Delta f_{\\max}$ 的最终表达式为：\n$$\n\\Delta f_{\\max} = K_{vco} \\cdot \\min\\big(\\max(V_{\\max} - V_{\\mathrm{mid}}, V_{\\mathrm{mid}} - V_{\\min}), \\ I_{cp} R_b\\big)\n$$\n\n现在我们使用给定的数值计算这个表达式：\n- $I_{cp} = 20\\,\\mu\\mathrm{A} = 2.0 \\times 10^{-5}\\,\\mathrm{A}$\n- $R_b = 30\\,\\mathrm{k}\\Omega = 3.0 \\times 10^{4}\\,\\Omega$\n- $K_{vco} = 120 \\times 10^{6}\\,\\mathrm{Hz}/\\mathrm{V}$\n- $V_{\\min} = 0\\,\\mathrm{V}$，$V_{\\mathrm{mid}} = 0.9\\,\\mathrm{V}$，$V_{\\max} = 1.8\\,\\mathrm{V}$\n\n首先，我们计算两个限制性电压偏移：\n电压轨限制为：\n$$\n\\Delta V_{\\max, \\mathrm{rail}} = \\max(1.8\\,\\mathrm{V} - 0.9\\,\\mathrm{V}, \\ 0.9\\,\\mathrm{V} - 0\\,\\mathrm{V}) = \\max(0.9\\,\\mathrm{V}, 0.9\\,\\mathrm{V}) = 0.9\\,\\mathrm{V}\n$$\n电流限制为：\n$$\n\\Delta V_{\\max, I} = I_{cp} R_b = (2.0 \\times 10^{-5}\\,\\mathrm{A}) \\cdot (3.0 \\times 10^{4}\\,\\Omega) = 6.0 \\times 10^{-1}\\,\\mathrm{V} = 0.6\\,\\mathrm{V}\n$$\n\n比较这两个限制，我们找到有效的最大电压偏移：\n$$\n|V_B - V_{\\mathrm{mid}}|_{\\max} = \\min(0.9\\,\\mathrm{V}, 0.6\\,\\mathrm{V}) = 0.6\\,\\mathrm{V}\n$$\n系统受限于电荷泵的最大电流，而不是 VCO 的控制电压范围。\n\n最后，我们计算最大可恢复静态频率差：\n$$\n\\Delta f_{\\max} = K_{vco} \\cdot |V_B - V_{\\mathrm{mid}}|_{\\max}\n$$\n$$\n\\Delta f_{\\max} = (120 \\times 10^{6}\\,\\mathrm{Hz}/\\mathrm{V}) \\cdot (0.6\\,\\mathrm{V})\n$$\n$$\n\\Delta f_{\\max} = 72 \\times 10^{6}\\,\\mathrm{Hz}\n$$\n问题要求答案四舍五入到四位有效数字。\n$$\n\\Delta f_{\\max} = 72,000,000\\,\\mathrm{Hz} = 7.200 \\times 10^{7}\\,\\mathrm{Hz}\n$$",
            "answer": "$$\n\\boxed{7.200 \\times 10^{7}}\n$$"
        },
        {
            "introduction": "理想的电路行为在实际设计中难以完全实现，各种非理想效应会显著影响锁相环的性能。本练习将深入研究鉴频鉴相器（PFD）中一个常见的非理想效应：复位路径延迟失配。我们将分析这种失配如何导致不希望的UP和DOWN信号同时有效，从而在环路滤波器输入端引起电荷共享毛刺，这是产生参考杂散和相位噪声的一个主要根源。",
            "id": "4288522",
            "problem": "一个鉴频鉴相器 (PFD) 和电荷泵 (CP) 对采用互补金属氧化物半导体 (CMOS) 技术实现，并带有一个异步复位。理想情况下，PFD 输出无重叠的脉冲，但复位路径延迟的失配会导致当 $\\text{UP}$ 和 $\\text{DOWN}$ 输出同时为高电平时，产生一个有限的重叠时间。请考虑以下架构和参数。\n\n- PFD 的 $\\text{UP}$ 和 $\\text{DOWN}$ 支路的复位路径延迟分别为 $t_{\\text{rst,UP}}$ 和 $t_{\\text{rst,DN}}$。重叠时间为 $\\tau = |t_{\\text{rst,DN}} - t_{\\text{rst,UP}}|$。\n- CP 有两个开关支路（拉电流和灌电流）。每个支路连接到环路滤波器的输入节点，并表现出对地主要的漏极侧寄生电容。将拉电流支路的漏极电容表示为 $C_{u}$，灌电流支路的漏极电容表示为 $C_{d}$。\n- 一种预充电方案在拉电流支路关闭时将其漏极节点偏置到 $V_{\\text{DD}}$，在灌电流支路关闭时将其漏极节点偏置到 $0$。环路滤波器输入节点连接到一个电容器 $C_{f}$，其初始电压为 $V_{f0}$。\n- 在重叠间隔 $\\tau$ 期间，两个支路都导通，通过低导通电阻路径将三个电容器 $C_{u}$、$C_{d}$ 和 $C_{f}$ 连接在一起。假设重叠时间 $\\tau$ 相对于相关的阻容时间常数足够长，以至于在这段时间内，三个节点通过电荷共享达到一个共同的电压。\n- 拉电流和灌电流支路开关闭合时的导通电阻分别为 $R_{\\text{on,UP}}$ 和 $R_{\\text{on,DN}}$，达到共享状态的等效串联时间常数可以近似为 $\\left(R_{\\text{on,UP}} \\parallel R_{\\text{on,DN}}\\right)\\left(C_{u} + C_{d} + C_{f}\\right)$，其中 $\\parallel$ 表示并联。\n\n给定以下数值\n$$\nV_{\\text{DD}} = 1.1\\,\\text{V},\\quad t_{\\text{rst,UP}} = 350\\,\\text{ps},\\quad t_{\\text{rst,DN}} = 1.35\\,\\text{ns},\\quad R_{\\text{on,UP}} = 50\\,\\Omega,\\quad R_{\\text{on,DN}} = 50\\,\\Omega,\n$$\n$$\nC_{u} = 20\\,\\text{fF},\\quad C_{d} = 30\\,\\text{fF},\\quad C_{f} = 2.0\\,\\text{pF},\\quad V_{f0} = 0.60\\,\\text{V},\n$$\n请从第一性原理出发，推导复位路径延迟失配对 $\\text{UP}/\\text{DOWN}$ 脉冲重叠的影响，并计算在 CP 输入端（即环路滤波器输入节点）产生的电荷共享毛刺。具体要求如下：\n\n1. 使用基本定义，将重叠持续时间 $\\tau$ 与复位延迟失配联系起来。\n2. 假设 $\\tau$ 足够长以完成电荷共享，使用电荷守恒来确定当重叠将处于 $V_{\\text{DD}}$ 的 $C_{u}$、处于 $0$V 的 $C_{d}$ 和处于 $V_{f0}$ 的 $C_{f}$ 连接在一起后，共享电压 $V_{f}$ 的值。\n3. 将毛刺定义为 $\\Delta V_{f} = V_{f} - V_{f0}$，并计算其数值。\n\n将最终数值答案四舍五入到四位有效数字，并以伏特为单位表示。仅当出现角度时才以弧度或度为单位说明答案；否则此处不需要角度单位。在推理过程中使用指定的电压单位，但不要在最终的方框答案中包含单位。",
            "solution": "对问题陈述进行评估后，认定其有效。该问题科学地基于电路理论原理，特别是电荷守恒，并描述了锁相环 (PLL) 子系统中一个众所知的非理想效应。问题提法恰当，提供了所有必要的参数和明确的目标。数据物理上真实且一致。因此，我们可以进行正式求解。\n\n该问题要求计算由于鉴频鉴相器 (PFD) 复位路径延迟失配而在电荷泵输出端产生的电压毛刺。解题过程按照指定的三个任务展开。\n\n首先，我们验证一个程序性假设，即重叠时间 $\\tau$ 足以让电荷共享过程达到稳态。重叠时间 $\\tau$ 由 $\\text{UP}$ 和 $\\text{DOWN}$ 信号的复位路径延迟的绝对差值给出。\n$$\n\\tau = |t_{\\text{rst,DN}} - t_{\\text{rst,UP}}|\n$$\n代入给定的数值：\n$$\nt_{\\text{rst,UP}} = 350\\,\\text{ps} = 0.35\\,\\text{ns}\n$$\n$$\nt_{\\text{rst,DN}} = 1.35\\,\\text{ns}\n$$\n重叠持续时间为：\n$$\n\\tau = |1.35\\,\\text{ns} - 0.35\\,\\text{ns}| = 1.0\\,\\text{ns}\n$$\n电荷共享过程的时间常数 $T_c$ 由并联开关的等效电阻与被连接的总电容的乘积给出。\n$$\nT_c = \\left(R_{\\text{on,UP}} \\parallel R_{\\text{on,DN}}\\right)\\left(C_{u} + C_{d} + C_{f}\\right)\n$$\n并联电阻为：\n$$\nR_{\\text{on,UP}} \\parallel R_{\\text{on,DN}} = \\frac{R_{\\text{on,UP}} R_{\\text{on,DN}}}{R_{\\text{on,UP}} + R_{\\text{on,DN}}} = \\frac{50\\,\\Omega \\times 50\\,\\Omega}{50\\,\\Omega + 50\\,\\Omega} = \\frac{2500}{100}\\,\\Omega = 25\\,\\Omega\n$$\n总电容为：\n$$\nC_{u} + C_{d} + C_{f} = 20\\,\\text{fF} + 30\\,\\text{fF} + 2.0\\,\\text{pF} = 50 \\times 10^{-15}\\,\\text{F} + 2000 \\times 10^{-15}\\,\\text{F} = 2050 \\times 10^{-15}\\,\\text{F} = 2.05\\,\\text{pF}\n$$\n因此，时间常数为：\n$$\nT_c = (25\\,\\Omega)(2.05 \\times 10^{-12}\\,\\text{F}) = 51.25 \\times 10^{-12}\\,\\text{s} = 51.25\\,\\text{ps}\n$$\n重叠持续时间与时间常数之比为 $\\frac{\\tau}{T_c} = \\frac{1000\\,\\text{ps}}{51.25\\,\\text{ps}} \\approx 19.5$。由于 RC 电路中的瞬态衰减是指数级的（例如，在 10 个时间常数后达到最终值的 99.99% 以上），接近 20 个时间常数的重叠持续时间足以让电压稳定下来。因此，该假设是合理的。\n\n接下来，我们利用电荷守恒原理推导最终的共享电压 $V_f$。在重叠事件发生前，三个电容器 $C_u$、$C_d$ 和 $C_f$ 构成一个电气隔离的系统。该系统中的总电荷 $Q_{\\text{initial}}$ 是每个电容器上电荷的总和。根据预充电方案：\n- 拉电流支路的漏极电容 $C_u$ 被充电至电源电压 $V_{\\text{DD}}$。其电荷为 $Q_u = C_u V_{\\text{DD}}$。\n- 灌电流支路的漏极电容 $C_d$ 被放电至地 ($0\\,\\text{V}$)。其电荷为 $Q_d = C_d \\cdot 0 = 0$。\n- 环路滤波器电容 $C_f$ 的初始电压为 $V_{f0}$。其电荷为 $Q_f = C_f V_{f0}$。\n\n总初始电荷为：\n$$\nQ_{\\text{initial}} = Q_u + Q_d + Q_f = C_u V_{\\text{DD}} + 0 + C_f V_{f0} = C_u V_{\\text{DD}} + C_f V_{f0}\n$$\n在重叠持续时间 $\\tau$ 内，电荷泵的拉电流和灌电流支路中的开关都导通。这将电容器 $C_u$、$C_d$ 和 $C_f$ 并联起来。它们共享电荷，直到全部达到一个共同的最终电压，我们将其表示为 $V_f$。\n\n总最终电荷 $Q_{\\text{final}}$ 是在这一新电压 $V_f$ 下各电容器上电荷的总和：\n$$\nQ_{\\text{final}} = C_u V_f + C_d V_f + C_f V_f = (C_u + C_d + C_f) V_f\n$$\n根据电荷守恒定律，事件前后的总电荷必须相等：\n$$\nQ_{\\text{initial}} = Q_{\\text{final}}\n$$\n$$\nC_u V_{\\text{DD}} + C_f V_{f0} = (C_u + C_d + C_f) V_f\n$$\n求解最终共享电压 $V_f$：\n$$\nV_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0}}{C_u + C_d + C_f}\n$$\n最后，我们计算电压毛刺 $\\Delta V_f$，其定义为环路滤波器电压的变化量：\n$$\n\\Delta V_f = V_f - V_{f0}\n$$\n代入 $V_f$ 的表达式：\n$$\n\\Delta V_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0}}{C_u + C_d + C_f} - V_{f0}\n$$\n为了简化，我们通分：\n$$\n\\Delta V_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0} - V_{f0}(C_u + C_d + C_f)}{C_u + C_d + C_f}\n$$\n$$\n\\Delta V_f = \\frac{C_u V_{\\text{DD}} + C_f V_{f0} - C_u V_{f0} - C_d V_{f0} - C_f V_{f0}}{C_u + C_d + C_f}\n$$\n$$\n\\Delta V_f = \\frac{C_u (V_{\\text{DD}} - V_{f0}) - C_d V_{f0}}{C_u + C_d + C_f}\n$$\n该表达式以给定参数的形式给出了电压毛刺。现在，我们代入数值来计算结果。\n- $V_{\\text{DD}} = 1.1\\,\\text{V}$\n- $V_{f0} = 0.60\\,\\text{V}$\n- $C_{u} = 20\\,\\text{fF} = 20 \\times 10^{-15}\\,\\text{F}$\n- $C_{d} = 30\\,\\text{fF} = 30 \\times 10^{-15}\\,\\text{F}$\n- $C_{f} = 2.0\\,\\text{pF} = 2000 \\times 10^{-15}\\,\\text{F}$\n\n分子为：\n$$\n\\text{Numerator} = C_u (V_{\\text{DD}} - V_{f0}) - C_d V_{f0} = (20 \\times 10^{-15}\\,\\text{F}) (1.1\\,\\text{V} - 0.60\\,\\text{V}) - (30 \\times 10^{-15}\\,\\text{F}) (0.60\\,\\text{V})\n$$\n$$\n\\text{Numerator} = (20 \\times 10^{-15})(0.5) - (30 \\times 10^{-15})(0.6) = (10 - 18) \\times 10^{-15}\\,\\text{C} = -8 \\times 10^{-15}\\,\\text{C}\n$$\n分母是总电容：\n$$\n\\text{Denominator} = C_u + C_d + C_f = (20 + 30 + 2000) \\times 10^{-15}\\,\\text{F} = 2050 \\times 10^{-15}\\,\\text{F}\n$$\n电压毛刺为：\n$$\n\\Delta V_f = \\frac{-8 \\times 10^{-15}\\,\\text{C}}{2050 \\times 10^{-15}\\,\\text{F}} = -\\frac{8}{2050}\\,\\text{V} \\approx -0.003902439\\,\\text{V}\n$$\n将结果四舍五入到四位有效数字，我们得到：\n$$\n\\Delta V_f \\approx -0.003902\\,\\text{V}\n$$\n负号表示电荷共享的净效应是环路滤波器电容器的轻微放电。这是因为在这些特定的电压和电容条件下，初始电压为零的电容器 $C_d$ 吸收的电荷大于初始电压为 $V_{\\text{DD}}$ 的电容器 $C_u$ 提供的电荷。",
            "answer": "$$\\boxed{-0.003902}$$"
        }
    ]
}
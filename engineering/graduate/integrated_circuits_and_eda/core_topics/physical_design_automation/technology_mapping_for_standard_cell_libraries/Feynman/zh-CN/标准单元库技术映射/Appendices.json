{
    "hands_on_practices": [
        {
            "introduction": "技术映射的第一步是判断电路中的一小部分逻辑能否由库中的某个单元实现，这个过程称为“布尔匹配”。由于可以通过反相输入、交换输入顺序或反相输出来转换逻辑功能，我们需要在NPN（非门-排列-非门）等价的框架下进行匹配。本练习  将引导你分析一个包含AOI21和OAI21单元的简单库，确定其能覆盖的NPN等价类数量，并判断一个常见的三输入异或门是否能被该库匹配，从而掌握NPN等价性的实际应用。",
            "id": "4304195",
            "problem": "考虑一个电子设计自动化 (EDA) 中的技术映射场景，用于一个三输入布尔网络，其中可用的标准单元库包含 AOI21 和 OAI21 两个单元，且信号反相无成本。AOI21 单元实现函数 $f_{\\mathrm{AOI21}}(a,b,c)=\\overline{ab+c}$，OAI21 单元实现函数 $f_{\\mathrm{OAI21}}(a,b,c)=\\overline{(a+b)c}$。映射方案允许使用任意输入求反、任意输入置换和可选的输出求反；在这些变换下的等价性称为三输入布尔函数的“反相-置换-反相”(Negation–Permutation–Negation, NPN)等价性。\n\n从布尔函数、NPN 等价性（输入求反和置换，以及输出求反）和真值表不变量的核心定义出发，确定：\n- 当所有允许的 NPN 变换应用于其单元时，给定库可以覆盖的不同 NPN 等价类的数量，以及\n- 三输入奇偶（异或）函数 $x(a,b,c)=a\\oplus b\\oplus c$ 是否可以在输入置换、输入求反和可选输出求反的某种组合下被该库匹配。\n\n按此顺序以两个量报告你的最终答案：首先是覆盖的不同 NPN 类的数量，其次是一个指示符 $I_{\\mathrm{XOR}}$，如果在 NPN 变换下可以匹配奇偶函数，则 $I_{\\mathrm{XOR}}=1$，否则 $I_{\\mathrm{XOR}}=0$。无需四舍五入。按规定将最终答案表示为行矩阵。",
            "solution": "该问题要求我们在“反相-置换-反相”(NPN) 等价性框架下，分析一个包含两个三输入单元 AOI21 和 OAI21 的标准单元库。我们必须确定此库覆盖的不同 NPN 等价类的数量，以及三输入奇偶函数 XOR3 是否可以由该库中的一个单元在 NPN 变换下实现。\n\n两个库单元实现的布尔函数如下：\n1.  21与或非门 (AOI21): $f_{\\mathrm{AOI21}}(a,b,c) = \\overline{ab+c}$\n2.  21或与非门 (OAI21): $f_{\\mathrm{OAI21}}(a,b,c) = \\overline{(a+b)c}$\n\n要检查匹配的目标函数是三输入异或（奇偶）函数：\n$x(a,b,c) = a \\oplus b \\oplus c$\n\nNPN 等价性将两个函数定义为等价，如果一个函数可以通过任意组合的输入求反、输入置换和输出求反从另一个函数获得。\n\n我们的首要任务是确定 $f_{\\mathrm{AOI21}}$ 和 $f_{\\mathrm{OAI21}}$ 是否属于同一个 NPN 等价类。如果是，则该库只覆盖一个类。如果不是，则覆盖两个。\n\n对此分析的一个强大工具是布尔对偶性的概念。一个函数 $f(x_1, \\dots, x_n)$ 的对偶函数，记为 $f^D(x_1, \\dots, x_n)$，定义为 $f^D(x_1, \\dots, x_n) = \\overline{f(\\overline{x_1}, \\dots, \\overline{x_n})}$。根据定义，若函数 $g$是函数 $f$ 的对偶函数，则 $g$ 与 $f$ 是 NPN 等价的。该变换涉及对所有输入求反和对输出求反。\n\n让我们计算 $f_{\\mathrm{AOI21}}(a,b,c)$ 的对偶函数。\n$f_{\\mathrm{AOI21}}^D(a,b,c) = \\overline{f_{\\mathrm{AOI21}}(\\bar{a},\\bar{b},\\bar{c})}$\n代入 $f_{\\mathrm{AOI21}}$ 的定义：\n$f_{\\mathrm{AOI21}}^D(a,b,c) = \\overline{\\overline{(\\bar{a}\\bar{b}+\\bar{c})}} = \\bar{a}\\bar{b}+\\bar{c}$\n使用德摩根定律，我们可以将 $\\bar{a}\\bar{b}$ 重写为 $\\overline{a+b}$。\n因此，$f_{\\mathrm{AOI21}}^D(a,b,c) = \\overline{a+b}+\\bar{c}$。\n\n现在，我们来分析函数 $f_{\\mathrm{OAI21}}(a,b,c) = \\overline{(a+b)c}$。使用德摩根定律：\n$f_{\\mathrm{OAI21}}(a,b,c) = \\overline{a+b} + \\bar{c}$。\n\n比较两个结果，我们发现：\n$f_{\\mathrm{OAI21}}(a,b,c) = f_{\\mathrm{AOI21}}^D(a,b,c)$\n这个恒等式证明了 $f_{\\mathrm{OAI21}}$ 是 $f_{\\mathrm{AOI21}}$ 的对偶函数。因此，$f_{\\mathrm{AOI21}}$ 和 $f_{\\mathrm{OAI21}}$ 是 NPN 等价的。它们属于同一个 NPN 类。具体的变换是 $f_{\\mathrm{OAI21}}(a,b,c) = \\overline{f_{\\mathrm{AOI21}}(\\bar{a},\\bar{b},\\bar{c})}$。由于库中的两个单元都实现了来自同一 NPN 类的函数，该库只覆盖了 $1$ 个不同的 NPN 等价类。\n\n第二个任务是确定奇偶函数 $x(a,b,c) = a \\oplus b \\oplus c$ 是否能被匹配，即它是否属于与库函数相同的 NPN 类。\n\n要检查函数间的 NPN 等价性，我们可以使用 NPN 不变量，即函数真值表在输入置換和求反下保持不变的性质。一个简单的此类不变量是函数值为 $1$ 的最小项数量（也称为函数真值向量的权重）。设 $k$ 是具有 $n$ 个输入的函数 $f$ 的权重。在输入置换和求反下，权重保持为 $k$。在输出求反下，权重变为 $2^n - k$。因此，$f$ 的 NPN 类中的任何函数其权重必须是 $k$ 或 $2^n - k$。\n\n让我们计算所涉及函数的权重。这里，输入数量为 $n=3$，所以 $2^n=8$。\n\n对于 $f_{\\mathrm{AOI21}}(a,b,c) = \\overline{ab+c}$，我们构造其真值表。输入 $(a,b,c)$ 按字典序从 $(0,0,0)$到 $(1,1,1)$ 排列。\n$f_{\\mathrm{AOI21}}(0,0,0) = \\overline{0+0} = 1$\n$f_{\\mathrm{AOI21}}(0,0,1) = \\overline{0+1} = 0$\n$f_{\\mathrm{AOI21}}(0,1,0) = \\overline{0+0} = 1$\n$f_{\\mathrm{AOI21}}(0,1,1) = \\overline{0+1} = 0$\n$f_{\\mathrm{AOI21}}(1,0,0) = \\overline{0+0} = 1$\n$f_{\\mathrm{AOI21}}(1,0,1) = \\overline{0+1} = 0$\n$f_{\\mathrm{AOI21}}(1,1,0) = \\overline{1+0} = 0$\n$f_{\\mathrm{AOI21}}(1,1,1) = \\overline{1+1} = 0$\n真值向量为 $(1,0,1,0,1,0,0,0)$。$f_{\\mathrm{AOI21}}$ 的权重是 $k_{\\mathrm{AOI21}} = 3$。\n$f_{\\mathrm{AOI21}}$ 的 NPN 类中任何函数的可能权重集合是 $\\{k_{\\mathrm{AOI21}}, 8 - k_{\\mathrm{AOI21}}\\} = \\{3, 5\\}$。\n（作为检验，$f_{\\mathrm{OAI21}}$ 的权重是 $k_{\\mathrm{OAI21}} = 5$，它属于同一个类，与该集合一致）。\n\n现在，我们计算奇偶函数 $x(a,b,c) = a \\oplus b \\oplus c$ 的权重。当且仅当其输入中为真的数量为奇数时，该函数为真。\n$x(0,0,0) = 0$\n$x(0,0,1) = 1$\n$x(0,1,0) = 1$\n$x(0,1,1) = 0$\n$x(1,0,0) = 1$\n$x(1,0,1) = 0$\n$x(1,1,0) = 0$\n$x(1,1,1) = 1$\n真值向量为 $(0,1,1,0,1,0,0,1)$。$x(a,b,c)$ 的权重是 $k_x = 4$。\n$x(a,b,c)$ 的 NPN 类中任何函数的可能权重集合是 $\\{k_x, 8 - k_x\\} = \\{4, 4\\} = \\{4\\}$。\n\n要成为 NPN 等价，奇偶函数的 NPN 类必须与库函数的 NPN 类共享一个权重。\n库函数类的权重集是 $\\{3, 5\\}$。\n奇偶函数类的权重集是 $\\{4\\}$。\n这两个集合是不相交的：$\\{3, 5\\} \\cap \\{4\\} = \\emptyset$。\n因此，奇偶函数 $x(a,b,c)$ 不能与 $f_{\\mathrm{AOI21}}$ 或 $f_{\\mathrm{OAI21}}$ NPN 等价。在指定的变换下，不可能用给定的库来匹配奇偶函数。\n\n因此，匹配奇偶函数的指示符 $I_{\\mathrm{XOR}}$ 为 $0$。\n\n总结如下：\n1.  该库覆盖的不同 NPN 类的数量是 $1$。\n2.  三输入奇偶函数无法匹配，所以 $I_{\\mathrm{XOR}} = 0$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1  0\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在确定一个逻辑功能可以被某个标准单元匹配后，映射算法需要评估该匹配的“成本”，其中最关键的成本之一就是延迟。现代标准单元库使用非线性延迟模型（NLDM）来精确描述门延迟，它是一个关于输入转换时间（slew）和输出负载电容（load）的二维查找表。本练习  让你扮演一名时序分析工程师，通过对给定的NLDM数据进行双线性插值，来精确计算在特定工作条件下的传播延迟，这是技术映射中成本函数计算的核心技能。",
            "id": "4304146",
            "problem": "在电子设计自动化 (EDA) 中，标准单元库的工艺映射依赖于库时序模型的精确延迟估算。非线性延迟模型 (NLDM) 将传播延迟表指定为输入转换摆率和输出电容负载的函数，需要在表格中断点之间进行插值。考虑一个标准单元从输入引脚到输出引脚的单一时序弧，其具有一个 NLDM 传播延迟表。输入摆率断点为 $20 \\text{ ps}$、$50 \\text{ ps}$ 和 $120 \\text{ ps}$，输出负载断点为 $2 \\text{ fF}$、$6 \\text{ fF}$ 和 $12 \\text{ fF}$。在断点网格处（行由输入摆率索引，列由输出负载索引）的表格化传播延迟 $t_{\\text{pd}}$ 如下所示：\n- 对于输入摆率 $20 \\text{ ps}$：$t_{\\text{pd}}(20 \\text{ ps}, 2 \\text{ fF}) = 10 \\text{ ps}$，$t_{\\text{pd}}(20 \\text{ ps}, 6 \\text{ fF}) = 18 \\text{ ps}$，$t_{\\text{pd}}(20 \\text{ ps}, 12 \\text{ fF}) = 30 \\text{ ps}$。\n- 对于输入摆率 $50 \\text{ ps}$：$t_{\\text{pd}}(50 \\text{ ps}, 2 \\text{ fF}) = 16 \\text{ ps}$，$t_{\\text{pd}}(50 \\text{ ps}, 6 \\text{ fF}) = 26 \\text{ ps}$，$t_{\\text{pd}}(50 \\text{ ps}, 12 \\text{ fF}) = 40 \\text{ ps}$。\n- 对于输入摆率 $120 \\text{ ps}$：$t_{\\text{pd}}(120 \\text{ ps}, 2 \\text{ fF}) = 30 \\text{ ps}$，$t_{\\text{pd}}(120 \\text{ ps}, 6 \\text{ fF}) = 42 \\text{ ps}$，$t_{\\text{pd}}(120 \\text{ ps}, 12 \\text{ fF}) = 58 \\text{ ps}$。\n\n假设在断点之间使用 NLDM 的标准分段双线性插值方案。计算输入摆率 $s_{\\text{in}} = 35 \\text{ ps}$ 和输出负载 $C_{\\text{L}} = 8 \\text{ fF}$ 时的插值传播延迟 $t_{\\text{pd}}$。此外，通过证明当 $s_{\\text{in}}$ 或 $C_{\\text{L}}$ 与一个断点重合时，插值会简化为一维线性插值，来验证跨表格断点的连续性，具体是在 $s_{\\text{in}} = 50 \\text{ ps}$ 且 $C_{\\text{L}} = 8 \\text{ fF}$ 时，以及在 $C_{\\text{L}} = 6 \\text{ fF}$ 且 $s_{\\text{in}} = 35 \\text{ ps}$ 时。\n\n将您最终计算出的 $t_{\\text{pd}}$ 四舍五入到四位有效数字，并以皮秒为单位表示最终延迟。",
            "solution": "解决方案基于分段双线性插值的原理，该原理用于在已知值的矩形网格内估算双变量函数在任意点的值。该过程涉及连续的线性插值。\n\n**第一部分：计算 $s_{\\text{in}} = 35 \\text{ ps}$ 和 $C_{\\text{L}} = 8 \\text{ fF}$ 时的 $t_{\\text{pd}}$**\n\n首先，我们确定查找表中包含目标点 $(s, C) = (35 \\text{ ps}, 8 \\text{ fF})$ 的矩形单元。\n输入摆率 $s = 35 \\text{ ps}$ 由断点 $s_{lo} = 20 \\text{ ps}$ 和 $s_{hi} = 50 \\text{ ps}$ 界定。\n输出负载 $C = 8 \\text{ fF}$ 由断点 $C_{lo} = 6 \\text{ fF}$ 和 $C_{hi} = 12 \\text{ fF}$ 界定。\n\n该插值单元的四个角点及其对应的延迟值 $t_{\\text{pd}}$ 为：\n- $t_{11} = t_{\\text{pd}}(s_{lo}, C_{lo}) = t_{\\text{pd}}(20 \\text{ ps}, 6 \\text{ fF}) = 18 \\text{ ps}$\n- $t_{12} = t_{\\text{pd}}(s_{lo}, C_{hi}) = t_{\\text{pd}}(20 \\text{ ps}, 12 \\text{ fF}) = 30 \\text{ ps}$\n- $t_{21} = t_{\\text{pd}}(s_{hi}, C_{lo}) = t_{\\text{pd}}(50 \\text{ ps}, 6 \\text{ fF}) = 26 \\text{ ps}$\n- $t_{22} = t_{\\text{pd}}(s_{hi}, C_{hi}) = t_{\\text{pd}}(50 \\text{ ps}, 12 \\text{ fF}) = 40 \\text{ ps}$\n\n双线性插值可以分两步执行。首先，我们沿着一个轴（例如输出负载轴 $C$）对另一个轴的两个边界值（$s_{lo}$ 和 $s_{hi}$）进行两次线性插值。\n\n步骤 1.1：在 $s = s_{lo} = 20 \\text{ ps}$ 处沿 $C$ 轴进行插值，以找到 $C = 8 \\text{ fF}$ 时的延迟。我们将此中间值记为 $t_{s_{lo}}$。\n$$t_{s_{lo}} = t_{11} + (t_{12} - t_{11}) \\frac{C - C_{lo}}{C_{hi} - C_{lo}}$$\n$$t_{s_{lo}} = 18 \\text{ ps} + (30 \\text{ ps} - 18 \\text{ ps}) \\frac{8 \\text{ fF} - 6 \\text{ fF}}{12 \\text{ fF} - 6 \\text{ fF}} = 18 + 12 \\left( \\frac{2}{6} \\right) = 18 + 4 = 22 \\text{ ps}$$\n\n步骤 1.2：在 $s = s_{hi} = 50 \\text{ ps}$ 处沿 $C$ 轴进行插值，以找到 $C = 8 \\text{ fF}$ 时的延迟。我们将此记为 $t_{s_{hi}}$。\n$$t_{s_{hi}} = t_{21} + (t_{22} - t_{21}) \\frac{C - C_{lo}}{C_{hi} - C_{lo}}$$\n$$t_{s_{hi}} = 26 \\text{ ps} + (40 \\text{ ps} - 26 \\text{ ps}) \\frac{8 \\text{ fF} - 6 \\text{ fF}}{12 \\text{ fF} - 6 \\text{ fF}} = 26 + 14 \\left( \\frac{2}{6} \\right) = 26 + \\frac{14}{3} \\approx 30.667 \\text{ ps}$$\n\n步骤 2：使用两个中间延迟值 $t_{s_{lo}}$ 和 $t_{s_{hi}}$，沿 $s$ 轴执行最后的线性插值。\n$$t_{\\text{pd}}(s, C) = t_{s_{lo}} + (t_{s_{hi}} - t_{s_{lo}}) \\frac{s - s_{lo}}{s_{hi} - s_{lo}}$$\n$$t_{\\text{pd}}(35 \\text{ ps}, 8 \\text{ fF}) = 22 \\text{ ps} + \\left( \\frac{92}{3} \\text{ ps} - 22 \\text{ ps} \\right) \\frac{35 \\text{ ps} - 20 \\text{ ps}}{50 \\text{ ps} - 20 \\text{ ps}}$$\n$$t_{\\text{pd}}(35 \\text{ ps}, 8 \\text{ fF}) = 22 + \\left( \\frac{92 - 66}{3} \\right) \\frac{15}{30} = 22 + \\left( \\frac{26}{3} \\right) \\left( \\frac{1}{2} \\right) = 22 + \\frac{13}{3} = \\frac{66+13}{3} = \\frac{79}{3} \\text{ ps}$$\n精确值为 $26.333... \\text{ ps}$。四舍五入到四位有效数字得到 $26.33 \\text{ ps}$。\n\n**第二部分：在 $s_{\\text{in}} = 50 \\text{ ps}$ 和 $C_{\\text{L}} = 8 \\text{ fF}$ 处的连续性验证**\n\n在这里，输入摆率 $s = 50 \\text{ ps}$ 与断点 $s = s_{hi}$ 重合。在单元 $[s_{lo}, s_{hi}] \\times [C_{lo}, C_{hi}]$ 内一个点 $(s, C)$ 的通用双线性插值公式为：\n$$t_{\\text{pd}}(s, C) = t_{11}(1-s_{norm})(1-C_{norm}) + t_{12}(1-s_{norm})C_{norm} + t_{21}s_{norm}(1-C_{norm}) + t_{22}s_{norm}C_{norm}$$\n其中 $s_{norm} = \\frac{s - s_{lo}}{s_{hi} - s_{lo}}$ 且 $C_{norm} = \\frac{C - C_{lo}}{C_{hi} - C_{lo}}$。\n\n当 $s = s_{hi} = 50 \\text{ ps}$ 时，归一化摆率坐标为 $s_{norm} = \\frac{50 - 20}{50 - 20} = 1$。项 $(1-s_{norm})$ 变为 $0$。\n通用公式简化如下：\n$$t_{\\text{pd}}(s_{hi}, C) = t_{11}(0)(1-C_{norm}) + t_{12}(0)C_{norm} + t_{21}(1)(1-C_{norm}) + t_{22}(1)C_{norm}$$\n$$t_{\\text{pd}}(s_{hi}, C) = t_{21}(1-C_{norm}) + t_{22}C_{norm} = t_{21} + (t_{22} - t_{21})C_{norm}$$\n代入 $C_{norm}$ 的定义：\n$$t_{\\text{pd}}(s_{hi}, C) = t_{\\text{pd}}(s_{hi}, C_{lo}) + (t_{\\text{pd}}(s_{hi}, C_{hi}) - t_{\\text{pd}}(s_{hi}, C_{lo})) \\frac{C - C_{lo}}{C_{hi} - C_{lo}}$$\n这正是在恒定摆率线 $s=s_{hi}$ 上进行一维线性插值的公式。如步骤 1.2 中计算，对于 $C=8 \\text{ fF}$，这给出 $t_{\\text{pd}}(50, 8) = \\frac{92}{3} \\text{ ps}$。这证实了双线性插值是连续的，并且在边界处简化为一维线性插值。\n\n**第三部分：在 $C_{\\text{L}} = 6 \\text{ fF}$ 和 $s_{\\text{in}} = 35 \\text{ ps}$ 处的连续性验证**\n\n在这里，输出负载 $C = 6 \\text{ fF}$ 与断点 $C = C_{lo}$ 重合。\n使用与之前相同的插值单元和通用公式，当 $C = C_{lo} = 6 \\text{ fF}$ 时，归一化负载坐标为 $C_{norm} = \\frac{6 - 6}{12 - 6} = 0$。项 $(1-C_{norm})$ 变为 $1$。\n通用公式简化如下：\n$$t_{\\text{pd}}(s, C_{lo}) = t_{11}(1-s_{norm})(1) + t_{12}(1-s_{norm})(0) + t_{21}s_{norm}(1) + t_{22}s_{norm}(0)$$\n$$t_{\\text{pd}}(s, C_{lo}) = t_{11}(1-s_{norm}) + t_{21}s_{norm} = t_{11} + (t_{21} - t_{11})s_{norm}$$\n代入 $s_{norm}$ 的定义：\n$$t_{\\text{pd}}(s, C_{lo}) = t_{\\text{pd}}(s_{lo}, C_{lo}) + (t_{\\text{pd}}(s_{hi}, C_{lo}) - t_{\\text{pd}}(s_{lo}, C_{lo})) \\frac{s - s_{lo}}{s_{hi} - s_{lo}}$$\n这是在恒定负载线 $C=C_{lo}$ 上进行一维线性插值的公式。\n对于 $s = 35 \\text{ ps}$：\n$$t_{\\text{pd}}(35, 6) = 18 \\text{ ps} + (26 \\text{ ps} - 18 \\text{ ps}) \\frac{35 \\text{ ps} - 20 \\text{ ps}}{50 \\text{ ps} - 20 \\text{ ps}} = 18 + 8 \\left(\\frac{15}{30}\\right) = 18 + 4 = 22 \\text{ ps}$$\n此结果证实了双线性插值在单元的另一边界上也简化为一维线性插值，从而证明了其连续性。\n\n当 $s_{\\text{in}} = 35 \\text{ ps}$ 和 $C_{\\text{L}} = 8 \\text{ fF}$ 时的插值传播延迟为 $\\frac{79}{3} \\text{ ps}$。四舍五入到四位有效数字得到 $26.33 \\text{ ps}$。",
            "answer": "$$\n\\boxed{26.33}\n$$"
        },
        {
            "introduction": "技术映射的最终目标是为整个电路找到一个最优的单元组合（覆盖方案），以最小化总面积或总延迟。一个看似简单的方法是采用“贪心策略”，即在每个逻辑节点都选择局部最优的覆盖。然而，局部最优并不总能带来全局最优。本练习  将通过一个具体的反例，让你计算出一个贪心算法和一个全局最优算法在映射同一个电路时产生的面积差距，深刻理解为何技术映射需要更复杂的动态规划等算法来实现最佳结果。",
            "id": "4304184",
            "problem": "考虑电子设计自动化 (EDA) 中的一个技术映射实例，其对象为一个布尔树，根节点计算函数 $y = \\overline{(a \\cdot b) + (c \\cdot d)}$，其中 $a$、$b$、$c$ 和 $d$ 是主输入，$\\overline{(\\cdot)}$ 表示布尔补，$\\cdot$ 表示布尔合取，$+$ 表示布尔析取。该树的结构是：两个二元合取节点的输出馈入一个二元析取节点，然后该析取节点的输出再馈入根节点处的一个一元补元。\n\n假设采用加性面积成本模型：一个已映射树的总面积是覆盖其节点的所选标准单元的面积之和，且模式不允许重叠。标准单元库 $\\mathcal{L}$ 包含以下单元及其面积：\n- $AND2(x,y) = x \\cdot y$，面积为 $\\alpha_{\\text{AND2}} = 4$，\n- $OR2(x,y) = x + y$，面积为 $\\alpha_{\\text{OR2}} = 3$，\n- $INV(x) = \\overline{x}$，面积为 $\\alpha_{\\text{INV}} = 1$，\n- $NAND2(x,y) = \\overline{x \\cdot y}$，面积为 $\\alpha_{\\text{NAND2}} = 2$，\n- $AOI22(x,y,u,v) = \\overline{(x \\cdot y) + (u \\cdot v)}$，面积为 $\\alpha_{\\text{AOI22}} = 6$。\n\n一个贪心自底向上映射器按如下方式操作：在每个内部节点，它为以该节点为根的子树选择一个局部面积最小化的覆盖，并确定该选择，禁止任何祖先节点进行后续的重叠覆盖。\n\n在这个具体实例中，构造一个反例，证明在两个合取子树上进行的贪心面积最小化选择会导致完整树的总面积次优。具体来说，计算以下两者之间的面积差 $\\Delta A$：\n- 独立最小化每个合取子树的贪心映射，和\n- 整个树的全局最优映射。\n\n你的最终答案必须是单个实数值 $\\Delta A$。无需单位。",
            "solution": "该问题要求计算在给定的布尔函数和标准单元库下，由特定贪心算法产生的映射与全局最优映射之间的面积差 $\\Delta A$。函数为 $y = \\overline{(a \\cdot b) + (c \\cdot d)}$。\n\n首先，我们按照规定将函数表示为一个主题树。设 $n_1$ 是计算 $a \\cdot b$ 的节点，$n_2$ 是计算 $c \\cdot d$ 的节点，$n_3$ 是计算 $n_1$ 和 $n_2$ 输出的析取的节点，$n_4$ 是根节点，计算 $n_3$ 输出的补。\n\n接下来，我们分析贪心映射过程。该算法被定义为一个自底向上的过程，在每个内部节点，都会为以该节点为根的子树选择并确定一个局部面积最小化的覆盖。这一确定操作禁止任何祖先节点创建重叠的覆盖。\n\n1.  **合取子树的贪心映射：**\n    该过程从最低的内部节点开始，即合取节点 $n_1$ 和 $n_2$。\n    考虑以 $n_1$ 为根的子树，它计算 $a \\cdot b$。我们需要使用给定的库 $\\mathcal{L}$ 找到其最小面积覆盖。\n    -   **选项 1：** 用一个 $AND2$ 单元覆盖该子树。面积为 $\\alpha_{\\text{AND2}} = 4$。\n    -   **选项 2：** 通过将 $a \\cdot b$ 实现为 $\\overline{\\overline{a \\cdot b}}$ 来覆盖该子树。这种组合使用一个 $NAND2$ 单元后跟一个 $INV$ 单元。总面积为 $\\alpha_{\\text{NAND2}} + \\alpha_{\\text{INV}} = 2 + 1 = 3$。\n\n    局部面积最小化的选择是选项 2，面积为 $3$。贪心算法确定此选择。同样的逻辑适用于以节点 $n_2$ 为根的对称子树，它计算 $c \\cdot d$。其最小局部覆盖的成本也为 $3$。\n    此步骤之后，树的下半部分被两个 ($NAND2+INV$) 电路的实例覆盖，组合面积为 $3 + 3 = 6$。这些已确定的块的输出是信号 $s_1 = a \\cdot b$ 和 $s_2 = c \\cdot d$。\n\n2.  **剩余树的贪心映射：**\n    剩下的计算部分是 $y = \\overline{s_1 + s_2}$。这对应于节点 $n_3$ (OR) 和 $n_4$ (INV)。由于 $s_1$ 和 $s_2$ 的子树已经被覆盖并确定，映射器只能覆盖剩余的节点。\n    -   析取 $s_1 + s_2$ (节点 $n_3$) 由一个 $OR2$ 单元覆盖，面积为 $\\alpha_{\\text{OR2}} = 3$。\n    -   最终的反相 (节点 $n_4$) 由一个 $INV$ 单元覆盖，面积为 $\\alpha_{\\text{INV}} = 1$。\n    覆盖树上半部分的成本是 $\\alpha_{\\text{OR2}} + \\alpha_{\\text{INV}} = 3 + 1 = 4$。\n\n3.  **贪心映射的总面积 ($A_{\\text{greedy}}$)：**\n    总面积是已确定的、非重叠覆盖的成本之和。\n    $$A_{\\text{greedy}} = (2 + 1) + (2 + 1) + (3 + 1) = 3 + 3 + 4 = 10$$\n    这证明了贪心选择的次优性。在 $AND$ 节点处的局部优化（选择面积为 $3$ 而不是 $4$ 的覆盖）导致了更高的总成本。\n\n接下来，我们通过找到整个树的可能最小总面积的覆盖来确定全局最优映射。我们必须考虑所有有效的非重叠拼贴。\n\n1.  **使用复杂门进行覆盖：**\n    单元库包含单元 $AOI22(x,y,u,v) = \\overline{(x \\cdot y) + (u \\cdot v)}$。通过替换 $x=a, y=b, u=c, v=d$，该单元完美匹配整个函数 $y = \\overline{(a \\cdot b) + (c \\cdot d)}$。\n    这个覆盖的面积是 $\\alpha_{\\text{AOI22}} = 6$。\n\n2.  **使用其他组合进行覆盖：**\n    我们必须确保没有其他单元组合能产生更小的面积。\n    -   贪心解的面积为 $10$。\n    -   一个使用 $AND2$ 门覆盖子树的替代方案：$A = \\alpha_{\\text{AND2}} + \\alpha_{\\text{AND2}} + \\alpha_{\\text{OR2}} + \\alpha_{\\text{INV}} = 4 + 4 + 3 + 1 = 12$。\n    -   使用德摩根定律：$y = \\overline{(a \\cdot b) + (c \\cdot d)} = (\\overline{a \\cdot b}) \\cdot (\\overline{c \\cdot d})$。这可以用两个 $NAND2$ 门的输出馈入一个 $AND2$ 门来实现。总面积为 $\\alpha_{\\text{NAND2}} + \\alpha_{\\text{NAND2}} + \\alpha_{\\text{AND2}} = 2 + 2 + 4 = 8$。\n    -   德摩根定律实现的一个变体，其中最后的 $AND2$ 被实现为一个 $NAND2$ 后跟一个 $INV$：$A = \\alpha_{\\text{NAND2}} + \\alpha_{\\text{NAND2}} + (\\alpha_{\\text{NAND2}} + \\alpha_{\\text{INV}}) = 2 + 2 + (2 + 1) = 7$。\n\n3.  **最优映射的总面积 ($A_{\\text{opt}}$)：**\n    比较找到的所有有效覆盖的总面积：$6$、$7$、$8$、$10$ 和 $12$。最小面积是 $6$。\n    因此，全局最优面积为 $A_{\\text{opt}} = 6$。这是通过使用单个 $AOI22$ 单元实现的。\n\n最后，我们按要求计算面积差 $\\Delta A$。\n$$\\Delta A = A_{\\text{greedy}} - A_{\\text{opt}}$$\n$$\\Delta A = 10 - 6 = 4$$\n贪心策略通过在合取节点上做出局部最优选择，导致其解与真正的全局最优解相比，面积次优了 $4$。",
            "answer": "$$\\boxed{4}$$"
        }
    ]
}
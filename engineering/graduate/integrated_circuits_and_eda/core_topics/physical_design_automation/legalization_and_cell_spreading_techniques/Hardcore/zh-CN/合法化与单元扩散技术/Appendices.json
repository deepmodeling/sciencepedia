{
    "hands_on_practices": [
        {
            "introduction": "在应用任何合法化算法之前，我们必须首先理解我们工作的物理“画布”。本练习将我们的理解建立在标准单元行的物理现实之上，其中行端帽（endcaps）和设计规则决定了单元布局的可用空间 。通过计算可用位点的数量，您将学习如何把抽象的设计参数（如行长度 $L$、单元宽度 $w$、间距 $h$ 和位点节距 $p$）与具体的布局限制联系起来。",
            "id": "4279487",
            "problem": "在电子设计自动化（EDA）流程中，一个单高度标准单元行段被建模为一维离散布局位点格，沿水平轴具有均匀的位点间距 $p$。合法的标准单元布局必须与此位点格对齐，并且在行段的两端会实例化端帽单元，以终止注入区和阱区。设计规则约束要求每个端帽单元到最近的可放置标准单元之间有最小间距（一个禁布区晕环）。为了保持直流电源轨的对齐，合法朝向会逐行交替，并且所考虑的行具有由工艺规则设定的固定合法朝向。\n\n考虑一个水平范围为 $L$ 微米、位点间距为 $p$ 微米的行段。行左端被一个物理宽度为 $w_{L}$ 微米的左端帽单元占据，该单元到第一个可放置位点有 $h_{L}$ 微米的最小间距要求。行右端被一个物理宽度为 $w_{R}$ 微米的右端帽单元占据，该单元到最后一个可放置位点有 $h_{R}$ 微米的最小间距要求。工艺强制要求合法朝向逐行交替以对齐直流电源轨，但只允许与该行规定朝向相匹配的合法朝向；朝向的合法性本身不改变离散的位点格。假设所有放置在可用内部区域的标准单元都是单高度的，并精确地与位点间距的整数倍对齐。\n\n对于一个特定实例，设 $L = 101.27$ 微米，$p = 0.19$ 微米，$w_{L} = 0.57$ 微米，$h_{L} = 0.30$ 微米，$w_{R} = 0.38$ 微米，以及 $h_{R} = 0.12$ 微米。请从位点格对齐和直流电源轨连续性的角度解释，行末端的端帽单元如何施加最小间距和合法朝向约束。然后，仅使用给定的物理量和位点格的离散性质，计算在考虑了两端的端帽单元宽度及其最小间距晕环后，行段内部可用于单高度标准单元的可用布局位点总数。最终答案以单个整数（位点计数）表示，不带单位。",
            "solution": "该问题陈述被评估为有效。它在超大规模集成 (VLSI) 物理设计的原理上有科学依据，问题定义良好，有唯一可计算的解，并以客观、明确的技术语言表述。它包含了进行所需计算的完整且一致的数据集。因此我们可以进行完整求解。\n\n该问题要求两部分内容：首先，解释端帽单元约束背后的物理和电气原因；其次，计算给定标准单元行段中可用布局位点的数量。\n\n首先，我们解决解释部分。在基于标准单元的集成电路设计中，行是一个基本的组织单元。这些行中填充了标准单元，它们是预先设计的逻辑门（例如，AND、OR、触发器），具有固定高度和可变宽度。\n\n对端帽单元及其相关间距晕环的要求源于晶圆厂特定的设计规则和对电气完整性的需求。标准单元构建在半导体衬底上，通常使用 CMOS 技术，这涉及创建称为“阱”（例如，P衬底中的N阱）的n型和p型掺杂硅区域。一行中所有的 PMOS 晶体管都位于一个N阱中，而所有的 NMOS 晶体管都位于一个P阱（或P衬底）中。为确保这些阱被正确偏置，并防止一种称为闩锁效应的寄生且可能具有破坏性的现象，必须在行末端终止这些阱，并通过“阱拾取器”或“衬底接触”将它们连接到适当的电源轨（N阱接VDD，P阱接VSS）。端帽单元就用于此主要目的：它们包含终止阱区并提供这些接触所必需的结构。最小间距要求 $h_L$ 和 $h_R$（通常称为晕环或禁布区）是设计规则，它强制要求端帽单元内的阱拾取器结构与最近的可放置标准单元的有源器件区域之间保持最小距离。这个间距对于防止电气干扰和通过避免邻近效应来确保正常的晶体管性能至关重要。\n\n对合法单元朝向的约束是由连续的电源和地线分布的需求所决定的。每个标准单元的顶部和底部都有内部水平金属轨道，用作电源（$V_{DD}$）和地（$V_{SS}$）轨。当单元在行中相邻放置时，这些轨道相互邻接，形成贯穿整行的连续电源和地线。为实现这一点，单行内的所有单元必须共享相同的朝向（例如，顶部为 $V_{DD}$ 轨，底部为 $V_{SS}$ 轨）。问题中提到的“合法朝向逐行交替”是一种常见做法，其中一行具有 `North-South` 朝向，而相邻行具有 `South-North`（翻转）朝向，从而使它们能够高效地共享电源轨。端帽单元必须与其所在行的朝向相匹配，才能正确地连接并终止该行的电源轨和地线轨。\n\n现在，我们进行计算。该行被建模为总水平范围为 $L$ 的一维线段。标准单元的布局位点形成一个具有均匀间距 $p$ 的离散格。我们的目标是找到可用于放置标准单元的这些离散位点数 $N$。\n\n总长度 $L$ 并非完全可用。我们必须减去行两端的端帽单元及其所需间距晕环所占用的空间。\n\n在行的左端，总不可用长度 $S_L$ 是左端帽单元的物理宽度 $w_L$ 与其最小间距晕环 $h_L$ 的和。\n$$S_L = w_L + h_L$$\n在行的右端，总不可用长度 $S_R$ 是右端帽单元的物理宽度 $w_R$ 与其最小间距晕环 $h_R$ 的和。\n$$S_R = w_R + h_R$$\n\n可用于放置标准单元的总长度，记为 $L_{\\text{usable}}$，是总行范围 $L$ 减去这两个禁布区。\n$$L_{\\text{usable}} = L - S_L - S_R = L - (w_L + h_L) - (w_R + h_R)$$\n\n标准单元被放置在间距为 $p$ 的离散位点上。可以容纳在连续长度 $L_{\\text{usable}}$ 内的位点数 $N$ 是通过将 $L_{\\text{usable}}$ 除以位点间距 $p$ 来确定的。由于我们只能有整数个位点，我们必须对这个除法结果向下取整。如果我们将可用区域视为从相对坐标 $0$ 延伸到 $L_{\\text{usable}}$，那么一组 $N$ 个宽度为 $p$ 的位点将占据 $N \\times p$ 的总长度。这个总长度不能超过可用的长度。因此，我们有不等式 $N \\times p \\le L_{\\text{usable}}$。满足此条件的最大整数 $N$ 由向下取整函数给出。\n$$N = \\left\\lfloor \\frac{L_{\\text{usable}}}{p} \\right\\rfloor$$\n\n代入 $L_{\\text{usable}}$ 的表达式，我们得到可用位点数的通用公式：\n$$N = \\left\\lfloor \\frac{L - (w_L + h_L) - (w_R + h_R)}{p} \\right\\rfloor$$\n\n我们给定的数值如下：\n$L = 101.27$ 微米\n$p = 0.19$ 微米\n$w_L = 0.57$ 微米\n$h_L = 0.30$ 微米\n$w_R = 0.38$ 微米\n$h_R = 0.12$ 微米\n\n首先，我们计算可用长度 $L_{\\text{usable}}$：\n$$L_{\\text{usable}} = 101.27 - (0.57 + 0.30) - (0.38 + 0.12)$$\n$$L_{\\text{usable}} = 101.27 - 0.87 - 0.50$$\n$$L_{\\text{usable}} = 99.90 \\text{ 微米}$$\n\n接下来，我们通过将 $L_{\\text{usable}}$ 除以位点间距 $p$ 并对结果向下取整来计算位点数 $N$。\n$$N = \\left\\lfloor \\frac{99.90}{0.19} \\right\\rfloor$$\n除法结果为：\n$$\\frac{99.90}{0.19} = \\frac{9990}{19} \\approx 525.78947...$$\n对该值向下取整得到整数位点数：\n$$N = \\lfloor 525.78947... \\rfloor = 525$$\n\n因此，在行段内部有 $525$ 个可用于标准单元的布局位点。",
            "answer": "$$\\boxed{525}$$"
        },
        {
            "introduction": "简单的贪心算法通常是解决复杂问题的首选方法。本练习探讨了一种“俄罗斯方块”式的合法化方法，这是一种非常直观的贪心策略，旨在最小化曼哈顿位移 $D$。通过构建一个“病态”实例 ，您将看到算法设计中一个看似无害的选择——即处理具有相同初始坐标 $x_0$ 的单元时的打破平局规则——如何导致最终布局质量的急剧恶化，从而突显出开发更复杂、更具前瞻性布局策略的必要性。",
            "id": "4279445",
            "problem": "在集成电路的电子设计自动化（EDA）中，标准单元合法化是全局布局后的一个步骤，它将单元映射到行内的离散位点上，确保无重叠，同时最小化位移。考虑一个位点间距为 $s$ 的单行位点模型，其合法化目标通过累积曼哈顿位移来衡量。对于一组单元 $\\{c_i\\}$，其初始位置为 $(x_i, y_i)$，最终合法位置为 $(x_i', y_i')$，累积曼哈顿位移定义为：\n$$\nD \\triangleq \\sum_{i} \\left(|x_i' - x_i| + |y_i' - y_i|\\right).\n$$\n假设在单行上（所有单元的 $y$ 坐标恒定），因此曼哈顿位移简化为 $x$ 绝对位移之和。\n\n一种俄罗斯方块式（Tetris-style）合法化算法按照初始 $x$ 坐标递增的顺序处理单元，并依次将每个单元放置在行内不与已放置单元重叠的最早合法 $x$ 位置。当多个单元具有相同的初始 $x$ 坐标时，由一个决胜规则（tie-breaking rule）决定它们的处理顺序。\n\n在单行上构建以下病态实例：\n- 一个宽度为 $b$ 个位点的宏单元 $M$，以及 $k$ 个标准单元 $S_1, S_2, \\ldots, S_k$，每个宽度为 $a$ 个位点，其中 $b \\gg a$。\n- 所有单元的初始 $x$ 坐标相同，均为 $x_0 = 0$。\n- 行容量足以放置所有单元而无需换行，即行长度 $L \\geq b + k a$ 个位点。\n- 所有单元的初始 $y$ 坐标相同，因此垂直位移为零。\n\n考虑两种合法化变体：\n1. 变体 $\\mathcal{A}$（病态情况）：在具有相同初始 $x$ 坐标的单元中，首先处理宏单元 $M$，然后依次处理 $S_1, S_2, \\ldots, S_k$。\n2. 变体 $\\mathcal{B}$（缓解规则）：在具有相同初始 $x$ 坐标的单元中，按照宽度非递减的顺序处理单元，即先处理 $S_1, S_2, \\ldots, S_k$，然后处理 $M$。\n\n仅使用上述核心定义和离散行位点约束，推导此实例的累积曼哈顿位移 $D_{\\mathcal{A}}$ 和 $D_{\\mathcal{B}}$（以位点间距为单位），并针对具体参数 $a = 1$、$b = 100$ 和 $k = 50$ 计算位移减少量 $\\Delta D \\triangleq D_{\\mathcal{A}} - D_{\\mathcal{B}}$（以位点间距为单位）。将最终答案表示为整数个位点间距，无需四舍五入。",
            "solution": "用户提供了一个来自电子设计自动化（EDA）领域的有效且定义明确的问题陈述。该问题在科学上基于集成电路物理设计，特别是标准单元布局和合法化的原理。所有术语都得到了清晰的定义，约束条件一致且足以推导出唯一解。因此，我们可以开始进行推导。\n\n该问题要求计算两种俄罗斯方块式（Tetris-style）合法化算法变体的累积曼哈顿位移。布局在单行上进行，因此所有单元的垂直位移 $|y_i' - y_i|$ 均为零。所有单元的初始水平位置为 $x_i = 0$。任何单元的最终位置 $x_i'$ 将是可用的最早位点，该位点必须为非负。因此，单个单元 $c_i$ 的位移为 $|x_i' - x_i| = |x_i' - 0| = x_i'$。总位移 $D$ 是所有单元最终合法化后的 x 坐标之和：\n$$\nD = \\sum_{i} x_i'\n$$\n我们将分析每种变体下最终的单元位置。位置和宽度以位点间距为单位表示。宏单元 $M$ 的宽度为 $b$，每个标准单元 $S_j$ 的宽度为 $a$。一个宽度为 $w$ 的单元放置在坐标 $x'$ 处，会占据从 $x'$ 到 $x' + w - 1$ 的位点。下一个可用的位点是 $x' + w$。\n\n**变体 $\\mathcal{A}$（宏单元优先）**\n\n在此变体中，处理顺序为 $M, S_1, S_2, \\ldots, S_k$。\n\n1.  **宏单元 $M$ 的放置：**\n    宏单元 $M$ 是第一个被放置的单元。行中最早的可用位点在坐标 $0$ 处。\n    因此，$M$ 的最终位置是 $x_M' = 0$。\n    该宏单元占据从 $0$ 到 $b-1$ 的位点。下一个可用的位点在 $b$ 处。\n\n2.  **标准单元 $S_1$ 的放置：**\n    接着放置 $S_1$。最早的可用位点在单元 $M$ 的末端。\n    因此，$S_1$ 的最终位置是 $x_{S_1}' = b$。\n    单元 $S_1$ 占据从 $b$ 到 $b + a - 1$ 的位点。下一个可用的位点在 $b+a$ 处。\n\n3.  **标准单元 $S_2$ 的放置：**\n    接着放置 $S_2$。最早的可用位点在单元 $S_1$ 的末端。\n    因此，$S_2$ 的最终位置是 $x_{S_2}' = b+a$。\n    下一个可用的位点在 $b+2a$ 处。\n\n4.  **标准单元 $S_j$ 的一般放置情况（对于 $j=1, \\ldots, k$）：**\n    遵循此模式，单元 $S_j$ 被放置在 $M$ 和前面的 $j-1$ 个标准单元之后。这些单元占据的总宽度为 $b + (j-1)a$。\n    $S_j$ 的最终位置是 $x_{S_j}' = b + (j-1)a$。\n\n总位移 $D_{\\mathcal{A}}$ 是所有单元最终位置之和：\n$$\nD_{\\mathcal{A}} = x_M' + \\sum_{j=1}^{k} x_{S_j}'\n$$\n$$\nD_{\\mathcal{A}} = 0 + \\sum_{j=1}^{k} (b + (j-1)a)\n$$\n我们可以将和式分离：\n$$\nD_{\\mathcal{A}} = \\sum_{j=1}^{k} b + \\sum_{j=1}^{k} (j-1)a = kb + a \\sum_{j=1}^{k} (j-1)\n$$\n该求和是一个等差级数 $\\sum_{i=0}^{k-1} i = \\frac{(k-1)k}{2}$。\n$$\nD_{\\mathcal{A}} = kb + a \\frac{k(k-1)}{2}\n$$\n\n**变体 $\\mathcal{B}$（小单元优先）**\n\n在此变体中，处理顺序是按宽度非递减：$S_1, S_2, \\ldots, S_k, M$。（由于所有 $S_j$ 的宽度都为 $a$，它们的内部处理顺序不影响结果）。\n\n1.  **标准单元 $S_1$ 的放置：**\n    $S_1$ 是第一个单元。其最终位置是 $x_{S_1}'=0$。下一个可用的位点是 $a$。\n\n2.  **标准单元 $S_2$ 的放置：**\n    $S_2$ 放置在 $S_1$ 之后。其最终位置是 $x_{S_2}'=a$。下一个可用的位点是 $2a$。\n\n3.  **标准单元 $S_j$ 的一般放置情况（对于 $j=1, \\ldots, k$）：**\n    单元 $S_j$ 被放置在前面的 $j-1$ 个标准单元之后，这些单元占据的总宽度为 $(j-1)a$。\n    $S_j$ 的最终位置是 $x_{S_j}' = (j-1)a$。\n\n4.  **宏单元 $M$ 的放置：**\n    $M$ 最后被放置，在所有 $k$ 个标准单元之后。这些单元被连续放置，占据的总宽度为 $ka$。最早的可用位点在单元 $S_k$ 的末端。\n    $M$ 的最终位置是 $x_M' = ka$。\n\n总位移 $D_{\\mathcal{B}}$ 是所有单元最终位置之和：\n$$\nD_{\\mathcal{B}} = \\left(\\sum_{j=1}^{k} x_{S_j}'\\right) + x_M'\n$$\n$$\nD_{\\mathcal{B}} = \\left(\\sum_{j=1}^{k} (j-1)a\\right) + ka\n$$\n使用相同的等差级数求和：\n$$\nD_{\\mathcal{B}} = a \\frac{k(k-1)}{2} + ka\n$$\n\n**位移减少量**\n\n通过使用变体 $\\mathcal{B}$ 而非 $\\mathcal{A}$ 带来的位移减少量 $\\Delta D$ 为：\n$$\n\\Delta D = D_{\\mathcal{A}} - D_{\\mathcal{B}}\n$$\n$$\n\\Delta D = \\left( kb + a \\frac{k(k-1)}{2} \\right) - \\left( a \\frac{k(k-1)}{2} + ka \\right)\n$$\n$$\n\\Delta D = kb + a \\frac{k(k-1)}{2} - a \\frac{k(k-1)}{2} - ka\n$$\n$$\n\\Delta D = kb - ka = k(b - a)\n$$\n\n**数值计算**\n\n我们已知具体参数为 $a = 1$，$b = 100$ 和 $k = 50$。我们将这些值代入 $\\Delta D$ 的表达式中：\n$$\n\\Delta D = 50(100 - 1)\n$$\n$$\n\\Delta D = 50(99)\n$$\n$$\n\\Delta D = 50 \\times (100 - 1) = 5000 - 50 = 4950\n$$\n累积位移的减少量为 $4950$ 个位点间距。",
            "answer": "$$\\boxed{4950}$$"
        },
        {
            "introduction": "在看到简单贪心方法的局限性后，我们现在转向一种更强大的技术，其灵感来源于 Abacus 合法化算法。本练习要求您针对同一个布局问题，定量地比较一种简单的从左到右移位方法与一种基于集群的 Abacus 风格优化方法 ，两者的目标都是最小化总二次位移 $\\sum (x_i - a_i)^2$。这将清晰地展示将重叠的单元视为一个协作集群（而不是孤立的个体）进行优化的明显优势，这也是现代合法化工具的核心原则之一。",
            "id": "4279464",
            "problem": "在电子设计自动化 (EDA) 基于行的合法化背景下，考虑一个长度为 $L$ 个 site 且单元顺序固定的单行。三个标准单元 $C_1, C_2, C_3$ 的宽度分别为 $w_1, w_2, w_3$，其全局布局的目标左边界锚点（以 site 为单位）分别为 $a_1, a_2, a_3$。合法布局要求不重叠并遵守边界条件：对于左边界位置 $x_1, x_2, x_3$，约束条件为 $x_1 \\geq 0$, $x_1 + w_1 \\leq x_2$, $x_2 + w_2 \\leq x_3$, 以及 $x_3 + w_3 \\leq L$。将总二次位移定义为 $\\sum_{i=1}^{3} (x_i - a_i)^{2}$。\n\n在同一实例上比较以下两种合法化策略：\n- 简单的从左到右贪心移位：将 $C_1$ 放置在 $x_1 = \\max(a_1, 0)$，然后迭代地将 $C_2$ 和 $C_3$ 放置在 $x_i = \\max(a_i, x_{i-1} + w_{i-1})$，通过实例的构造确保边界可行性得以维持。\n- Abacus 风格的簇合法化：当连续单元在锚点位置发生重叠时，将重叠的单元视为一个连续紧密排列的簇（无内部间隙）。选择一个单一的簇起始位置 $v$，并设置 $x_1 = v$, $x_2 = v + w_1$, $x_3 = v + w_1 + w_2$，以在满足行边界可行性的前提下最小化总二次位移。假设单元顺序固定。\n\n考虑一个实例，其行长 $L = 40$，宽度 $w_1 = 8, w_2 = 4, w_3 = 6$，锚点 $a_1 = 6, a_2 = 10, a_3 = 12$。如果简单地将单元放置在各自的锚点 $a_i$ 上，这些锚点位置会导致三个单元之间产生重叠。\n\n计算贪心方法和 Abacus 风格簇方法之间总二次位移的定量差异（单位为平方 site），定义为\n$$\\Delta = \\left[\\sum_{i=1}^{3} (x_i^{\\mathrm{greedy}} - a_i)^{2}\\right] - \\left[\\sum_{i=1}^{3} (x_i^{\\mathrm{abacus}} - a_i)^{2}\\right].$$\n请以精确值（不要四舍五入）给出你的答案。最终答案以平方 site 为单位表示。答案必须是单个实数值。",
            "solution": "题目要求对给定实例的两种单元合法化策略进行定量比较。该比较基于总二次位移，这是需要最小化的目标函数。这两种策略分别是简单的从左到右贪心移位算法和 Abacus 风格的簇合法化算法。我们需要计算这两种方法之间总二次位移的差值。\n\n给定参数如下：\n行长：$L = 40$ sites。\n单元宽度：$w_1 = 8$, $w_2 = 4$, $w_3 = 6$。\n目标锚点位置：$a_1 = 6$, $a_2 = 10$, $a_3 = 12$。\n\n对于一组合法位置 $x_1, x_2, x_3$，总二次位移定义为 $D = \\sum_{i=1}^{3} (x_i - a_i)^{2}$。我们需要计算 $\\Delta = D_{\\mathrm{greedy}} - D_{\\mathrm{abacus}}$。\n\n首先，我们分析从左到右的贪心移位方法。\n第一个单元的位置 $x_1^{\\mathrm{greedy}}$ 由 $x_1^{\\mathrm{greedy}} = \\max(a_1, 0)$ 给出。\n当 $a_1 = 6$ 时：\n$$x_1^{\\mathrm{greedy}} = \\max(6, 0) = 6$$\n第二个单元的位置 $x_2^{\\mathrm{greedy}}$ 由其自身锚点和前一个单元的位置决定：$x_2^{\\mathrm{greedy}} = \\max(a_2, x_1^{\\mathrm{greedy}} + w_1)$。\n当 $a_2 = 10$, $x_1^{\\mathrm{greedy}} = 6$, 且 $w_1 = 8$ 时：\n$$x_2^{\\mathrm{greedy}} = \\max(10, 6 + 8) = \\max(10, 14) = 14$$\n第三个单元的位置 $x_3^{\\mathrm{greedy}}$ 以类似方式确定：$x_3^{\\mathrm{greedy}} = \\max(a_3, x_2^{\\mathrm{greedy}} + w_2)$。\n当 $a_3 = 12$, $x_2^{\\mathrm{greedy}} = 14$, 且 $w_2 = 4$ 时：\n$$x_3^{\\mathrm{greedy}} = \\max(12, 14 + 4) = \\max(12, 18) = 18$$\n最终位置为 $x_1^{\\mathrm{greedy}} = 6$, $x_2^{\\mathrm{greedy}} = 14$, 和 $x_3^{\\mathrm{greedy}} = 18$。我们必须验证这些位置是合法的。\n- $x_1^{\\mathrm{greedy}} = 6 \\geq 0$ (满足)。\n- $x_1^{\\mathrm{greedy}} + w_1 = 6 + 8 = 14 \\leq x_2^{\\mathrm{greedy}} = 14$ (满足)。\n- $x_2^{\\mathrm{greedy}} + w_2 = 14 + 4 = 18 \\leq x_3^{\\mathrm{greedy}} = 18$ (满足)。\n- $x_3^{\\mathrm{greedy}} + w_3 = 18 + 6 = 24 \\leq L = 40$ (满足)。\n这些位置是合法的。现在，我们计算贪心方法的总二次位移 $D_{\\mathrm{greedy}}$：\n$$D_{\\mathrm{greedy}} = (x_1^{\\mathrm{greedy}} - a_1)^2 + (x_2^{\\mathrm{greedy}} - a_2)^2 + (x_3^{\\mathrm{greedy}} - a_3)^2$$\n$$D_{\\mathrm{greedy}} = (6 - 6)^2 + (14 - 10)^2 + (18 - 12)^2 = 0^2 + 4^2 + 6^2 = 0 + 16 + 36 = 52$$\n\n接下来，我们分析 Abacus 风格的簇合法化方法。\n在这种方法中，三个单元被视为一个刚性簇。单元的位置是相对于单个簇起始位置 $v$ 定义的。\n$x_1^{\\mathrm{abacus}} = v$\n$x_2^{\\mathrm{abacus}} = x_1^{\\mathrm{abacus}} + w_1 = v + 8$\n$x_3^{\\mathrm{abacus}} = x_2^{\\mathrm{abacus}} + w_2 = v + 8 + 4 = v + 12$\n总二次位移 $D_{\\mathrm{abacus}}(v)$ 是 $v$ 的函数：\n$$D_{\\mathrm{abacus}}(v) = (x_1^{\\mathrm{abacus}} - a_1)^2 + (x_2^{\\mathrm{abacus}} - a_2)^2 + (x_3^{\\mathrm{abacus}} - a_3)^2$$\n$$D_{\\mathrm{abacus}}(v) = (v - 6)^2 + ((v + 8) - 10)^2 + ((v + 12) - 12)^2$$\n$$D_{\\mathrm{abacus}}(v) = (v - 6)^2 + (v - 2)^2 + v^2$$\n为了找到使该二次函数最小化的 $v$ 值，我们对 $v$ 求导并令其为零：\n$$\\frac{d}{dv} D_{\\mathrm{abacus}}(v) = 2(v - 6) + 2(v - 2) + 2v = 0$$\n$$(v - 6) + (v - 2) + v = 0$$\n$$3v - 8 = 0 \\implies v = \\frac{8}{3}$$\n这是无约束下的最小值。我们必须验证这个 $v$ 值满足行边界约束。\n左边界要求 $x_1^{\\mathrm{abacus}} \\geq 0$，即 $v \\geq 0$。\n右边界要求 $x_3^{\\mathrm{abacus}} + w_3 \\leq L$。簇的总宽度为 $W = w_1 + w_2 + w_3 = 8 + 4 + 6 = 18$。最后一个单元的最右边缘位于 $x_3 + w_3 = (v+12)+6=v+18$。\n因此，$v + 18 \\leq 40$，这意味着 $v \\leq 22$。\n$v$ 的有效范围是 $[0, 22]$。由于最优值 $v = \\frac{8}{3}$ 位于此范围内（$0 \\leq \\frac{8}{3} \\leq 22$），因此它是可行的最优簇起始位置。\n当 $v = \\frac{8}{3}$ 时，我们计算 Abacus 方法的总二次位移 $D_{\\mathrm{abacus}}$：\n$$D_{\\mathrm{abacus}} = \\left(\\frac{8}{3} - 6\\right)^2 + \\left(\\frac{8}{3} - 2\\right)^2 + \\left(\\frac{8}{3}\\right)^2$$\n$$D_{\\mathrm{abacus}} = \\left(\\frac{8 - 18}{3}\\right)^2 + \\left(\\frac{8 - 6}{3}\\right)^2 + \\left(\\frac{8}{3}\\right)^2$$\n$$D_{\\mathrm{abacus}} = \\left(-\\frac{10}{3}\\right)^2 + \\left(\\frac{2}{3}\\right)^2 + \\left(\\frac{8}{3}\\right)^2$$\n$$D_{\\mathrm{abacus}} = \\frac{100}{9} + \\frac{4}{9} + \\frac{64}{9} = \\frac{168}{9} = \\frac{56}{3}$$\n\n最后，我们计算所需的差值 $\\Delta$。\n$$\\Delta = D_{\\mathrm{greedy}} - D_{\\mathrm{abacus}}$$\n$$\\Delta = 52 - \\frac{56}{3}$$\n$$\\Delta = \\frac{52 \\times 3}{3} - \\frac{56}{3} = \\frac{156}{3} - \\frac{56}{3}$$\n$$\\Delta = \\frac{156 - 56}{3} = \\frac{100}{3}$$\n总二次位移的差异为 $\\frac{100}{3}$ 平方 site。",
            "answer": "$$\\boxed{\\frac{100}{3}}$$"
        }
    ]
}
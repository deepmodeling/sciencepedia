{
    "hands_on_practices": [
        {
            "introduction": "在任何复杂的时钟网络分析中，第一步都是准确地理解信号在单根导线上的传播特性。本练习将带您回到物理基础，通过一个简化的 $\\pi$ 模型和櫻井（Sakurai）近似，来推导分布式RC线路的延迟和转换速率（slew）。掌握这项实践  不仅能够帮助您建立对片上互连线延迟物理本质的直观理解，还能让您熟悉EDA工具中广泛应用的经典解析模型。",
            "id": "4260630",
            "problem": "在集成电路和电子设计自动化（EDA）中，时钟分配网络的一部分被布线为一条均匀的金属线，其几何长度为 $L$，位于单一层上，单位长度电阻为 $R'$，单位长度电容为 $C'$。假设一个理想阶跃源（戴维南电阻为 $0$）驱动近端，远端在输入电导可忽略不计的接收引脚处进行观测，并且该导线被建模为一个无源线性时不变的分布式 $RC$ 网络。在时钟树综合（CTS）中，通常通过匹配脉冲响应的低频矩并使用 Sakurai 近似来估计波形传播，从而获得闭式形式的替代阶跃响应以及相关的延迟和转换速率（slew）。\n\n从线性网络脉冲响应矩和 Elmore 延迟的基本定义出发，使用应用于匹配分布式导线一阶矩的 $\\pi$ 模型的 Sakurai 近似，推导远端 $50\\%$ 传播延迟（达到最终值 $0.5$ 的时间）和 $10-90\\%$ 上升转换速率（达到最终值 $0.1$ 和 $0.9$ 的时间差）的闭式表达式。\n\n将这两个量用 $R'$、$C'$ 和 $L$ 以符号形式表示，并为归一化起见，将阶跃幅度视为 $1$。\n\n此外，在您的解答中，定性讨论这些表达式相对于同一导线的高保真 SPICE 瞬态仿真的预期准确性，包括任何差异产生的原因以及它如何随 $L$ 变化。\n\n以符号表达式的形式提供最终的 $50\\%$ 延迟和 $10-90\\%$ 上升转换速率。答案以秒为单位表示。无需四舍五入。",
            "solution": "该问题要求使用一种特定的近似方法，推导均匀分布式 RC 线的 $50\\%$ 传播延迟和 $10-90\\%$ 上升转换速率。该方法包括使用一个匹配脉冲响应一阶矩的 $\\pi$ 模型对分布式线路进行建模，然后应用 Sakurai 近似来求解阶跃响应。\n\n首先，我们确定均匀分布式 RC 线的特性。该线长度为 $L$，单位长度电阻为 $R'$，单位长度电容为 $C'$。总电阻为 $R = R'L$，总电容为 $C = C'L$。该线路由一个理想电压源（零戴维南电阻）驱动，远端开路。该系统的行为由 RC 线的电报方程描述。在拉普拉斯域中，关联远端电压与近端电压的电压传递函数 $H(s) = V_{out}(s) / V_{in}(s)$ 是一个标准结果：\n$$\nH(s) = \\frac{1}{\\cosh(\\gamma L)}\n$$\n其中 $\\gamma = \\sqrt{sR'C'}$ 是传播常数。代入 $R = R'L$ 和 $C = C'L$，我们可以写出 $\\gamma L = \\sqrt{s(R'L)(C'L)} = \\sqrt{sRC}$。因此，传递函数为：\n$$\nH_{dist}(s) = \\frac{1}{\\cosh(\\sqrt{sRC})}\n$$\n\n下一步是求脉冲响应 $h_{dist}(t) = \\mathcal{L}^{-1}[H_{dist}(s)]$ 的一阶矩。矩 $M_k$ 定义为 $M_k = \\int_{0}^{\\infty} t^k h(t) dt$。它们可以通过传递函数的麦克劳林级数展开来計算，$H(s) = \\sum_{k=0}^{\\infty} \\frac{(-1)^k}{k!} M_k s^k = M_0 - M_1 s + \\frac{M_2}{2}s^2 - \\dots$。我们需要 $M_1$。为了求它，我们将 $H_{dist}(s)$ 对小 $s$ 进行展开。\n$\\cosh(x)$ 的麦克劳林级数是 $1 + \\frac{x^2}{2!} + \\frac{x^4}{4!} + \\dots$。令 $x = \\sqrt{sRC}$。\n$$\n\\cosh(\\sqrt{sRC}) = 1 + \\frac{(\\sqrt{sRC})^2}{2} + \\frac{(\\sqrt{sRC})^4}{24} + \\dots = 1 + \\frac{sRC}{2} + \\frac{s^2(RC)^2}{24} + \\dots\n$$\n将此代入传递函数：\n$$\nH_{dist}(s) = \\frac{1}{1 + \\frac{sRC}{2} + O(s^2)}\n$$\n对小的 $u$ 使用几何级数展开 $\\frac{1}{1+u} \\approx 1 - u$：\n$$\nH_{dist}(s) \\approx 1 - \\frac{sRC}{2} + O(s^2)\n$$\n将其与矩展开式 $H(s) = M_0 - M_1 s + \\dots$ 进行比较，我们确定 $M_0 = 1$（直流增益）和 $M_1 = \\frac{RC}{2}$。这个一阶矩 $M_1$ 就是分布式线路的 Elmore 延迟。代回 $R=R'L$ 和 $C=C'L$：\n$$\nM_{1,dist} = \\frac{(R'L)(C'L)}{2} = \\frac{R'C'L^2}{2}\n$$\n\n问题指定使用一个匹配此一阶矩的 $\\pi$ 模型。对于总电阻为 $R$、总电容为 $C$ 的导线段，一个标准的对称 $\\pi$ 模型由一个值为 $R$ 的串联电阻和两个值为 $C/2$ 的并联电容组成。该电路由一个理想电压源 $V_{in}$ 在输入节点驱动。第一个电容 $C/2$ 连接在输入节点和地之间。由于电源是理想的，无论该电容吸取多大电流，它都能将输入节点的电压维持在 $V_{in}$。因此，这第一个电容不影响到输出的电压传递函数。电路的其余部分由连接输入节点和输出节点之间的串联电阻 $R$ 以及连接输出节点和地之间的第二个电容 $C/2$ 组成。这是一个简单的一阶 RC 低通滤波器，其电阻为 $R$，电容为 $C_{load} = C/2$。\n这个有效模型的传递函数是：\n$$\nH_{\\pi}(s) = \\frac{1}{1 + s R (C/2)} = \\frac{1}{1 + s \\frac{RC}{2}}\n$$\n我们来求这个模型的脉冲响应的一阶矩。对小 $s$ 进行展开：\n$$\nH_{\\pi}(s) \\approx 1 - s \\frac{RC}{2} + O(s^2)\n$$\n一阶矩为 $M_{1,\\pi} = \\frac{RC}{2}$。这与分布式线路的一阶矩 $M_{1,dist}$ 完全匹配。因此，根据问题陈述，所选的 $\\pi$ 模型是合适的。该模型的有效时间常数为 $\\tau = M_1 = \\frac{RC}{2} = \\frac{R'C'L^2}{2}$。\n\n对于一个脉冲响应一阶矩为 $m_1$ 的系统，Sakurai 对其阶跃响应 $v(t)$ 的近似由单极点近似给出：\n$$\nv(t) \\approx 1 - \\exp\\left(-\\frac{t}{m_1}\\right)\n$$\n对于我们的系统，$m_1 = \\frac{R'C'L^2}{2}$。所以，远端的近似阶跃响应为：\n$$\nv_{out}(t) = 1 - \\exp\\left(-\\frac{t}{R'C'L^2/2}\\right) = 1 - \\exp\\left(-\\frac{2t}{R'C'L^2}\\right)\n$$\n\n现在我们可以计算所需的时序指标。阶跃幅度归一化为 $1$。\n\n1.  **$50\\%$ 传播延迟 ($t_{50\\%}$):**\n    这是 $v_{out}(t) = 0.5$ 时的时间 $t$。\n    $$\n    0.5 = 1 - \\exp\\left(-\\frac{2 t_{50\\%}}{R'C'L^2}\\right)\n    $$\n    $$\n    \\exp\\left(-\\frac{2 t_{50\\%}}{R'C'L^2}\\right) = 0.5\n    $$\n    对两边取自然对数：\n    $$\n    -\\frac{2 t_{50\\%}}{R'C'L^2} = \\ln(0.5) = -\\ln(2)\n    $$\n    $$\n    t_{50\\%} = \\frac{R'C'L^2}{2} \\ln(2)\n    $$\n\n2.  **$10\\%-90\\%$ 上升转换速率 ($t_{slew}$):**\n    这定义为 $t_{90\\%} - t_{10\\%}$。\n    首先，求达到最终值 $90\\%$ 的时间 $t_{90\\%}$：\n    $$\n    0.9 = 1 - \\exp\\left(-\\frac{2 t_{90\\%}}{R'C'L^2}\\right) \\implies \\exp\\left(-\\frac{2 t_{90\\%}}{R'C'L^2}\\right) = 0.1\n    $$\n    $$\n    -\\frac{2 t_{90\\%}}{R'C'L^2} = \\ln(0.1) = -\\ln(10) \\implies t_{90\\%} = \\frac{R'C'L^2}{2} \\ln(10)\n    $$\n    接着，求达到最终值 $10\\%$ 的时间 $t_{10\\%}$：\n    $$\n    0.1 = 1 - \\exp\\left(-\\frac{2 t_{10\\%}}{R'C'L^2}\\right) \\implies \\exp\\left(-\\frac{2 t_{10\\%}}{R'C'L^2}\\right) = 0.9\n    $$\n    $$\n    -\\frac{2 t_{10\\%}}{R'C'L^2} = \\ln(0.9) \\implies t_{10\\%} = \\frac{R'C'L^2}{2} \\ln\\left(\\frac{1}{0.9}\\right) = \\frac{R'C'L^2}{2} \\ln\\left(\\frac{10}{9}\\right)\n    $$\n    转换速率是这个差值：\n    $$\n    t_{slew} = t_{90\\%} - t_{10\\%} = \\frac{R'C'L^2}{2} \\ln(10) - \\frac{R'C'L^2}{2} \\ln\\left(\\frac{10}{9}\\right)\n    $$\n    $$\n    t_{slew} = \\frac{R'C'L^2}{2} \\left[ \\ln(10) - \\ln\\left(\\frac{10}{9}\\right) \\right] = \\frac{R'C'L^2}{2} \\ln\\left(\\frac{10}{10/9}\\right) = \\frac{R'C'L^2}{2} \\ln(9)\n    $$\n    由于 $\\ln(9) = \\ln(3^2) = 2\\ln(3)$，我们可以将其简化为：\n    $$\n    t_{slew} = \\frac{R'C'L^2}{2} (2\\ln(3)) = R'C'L^2 \\ln(3)\n    $$\n\n**关于准确性的定性讨论：**\n一个高保真的 SPICE 仿真会将分布式 RC 线建模为由许多小的电阻-电容段组成的细粒度级联（一个梯形网络），这比我们的单个 $\\pi$ 模型为连续系统提供了更准确的近似。单个 $\\pi$ 模型产生一个一阶系统，而分布式线路是一个无限阶系统。\n\n一个关键的差异源于这样一个事实：一阶矩匹配捕获了主要的低频行为，但完全忽略了分布式线路的高频极点。分布式 RC 线的真实阶跃响应初始斜率为零，这是具有无限多个极点的系统的典型特征。相比之下，一阶模型的阶跃响应 $1 - \\exp(-t/\\tau)$ 在 $t=0$ 时的初始斜率非零，为 $1/\\tau$。这种波形形状上的根本差异导致了不准确性。\n\n推导出的 $50\\%$ 延迟 $t_{50\\%} = (\\ln 2) M_1 \\approx 0.693 M_1$ 是一个众所周知的公式。对于分布式 RC 线，真实的 $50\\%$ 延迟约为 $0.38 RC = 0.76 M_1$。我们的公式得出 $0.3465 RC$。该模型低估了延迟。\n\n转换速率对波形形状更为敏感。一阶模型倾向于高估初始上升速度并低估响应的长尾。我们推导出的转换速率是 $t_{slew} = (\\ln 9) M_1 \\approx 2.2 M_1 = 1.1 RC$。分布式线路的准确值更接近 $0.9 RC$。因此，该模型高估了 $10-90\\%$ 的转换速率。\n\n随着导线长度 $L$ 的增加，这种近似的准确性会下降。线路的“分布式”特性由总 $RC$ 乘积决定，即 $R'C'L^2$。随着 $L$ 的增加，该乘积呈二次方增长。更大的 $RC$ 乘积意味着被一阶近似忽略的高阶极点在塑造波形中扮演更重要的角色。因此，对于更长的导线，简单模型的预测与 SPICE 仿真结果之间的差异会更大。对于短导线，其行为更接近集总电容，该近似则更为合理。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} \\frac{R'C'L^{2}}{2} \\ln(2)  & R'C'L^{2} \\ln(3) \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "当导线长度增加时，其二次增长的RC延迟会迅速成为性能瓶颈。为了解决这个问题，设计中普遍采用插入缓冲器（buffer）的方法将长导线分段。本练习  引导您从第一性原理出发，推导在给定导线和缓冲器参数下，最小化总延迟所需的最佳缓冲器数量。这不仅是一个经典的优化问题，也是理解现代EDA工具如何进行时序优化的核心实践。",
            "id": "4260672",
            "problem": "在电子设计自动化 (EDA) 流程中，一个全局时钟树干必须将时钟信号分配到长度为 $L$ 的均匀片上互连线上，该互连线的单位长度电阻为 $R'$，单位长度电容为 $C'$。互连线由近端的理想电压源驱动，并终止于输入电容为 $C_{L}$ 的单个汇点。为了减轻沿线的阻容延迟，可以沿线均匀插入 $N$ 个相同的中继器（缓冲器）。每个缓冲器被建模为具有输出电阻 $R_{b}$、输入电容 $C_{b}$ 和固有延迟 $t_{b}$ 的线性驱动器。假设连续缓冲器之间（以及源与第一个缓冲器之间，最后一个缓冲器与汇点之间）的线段长度均相等。使用 Elmore 延迟模型来为每段导线建模，该模型描述了由电阻源驱动、远端馈送集总负载的分布式均匀线路。具体来说，对于长度为 $\\ell$、由源电阻 $R_{s}$ 驱动、负载电容为 $C_{\\text{load}}$ 的线段，从线段输入端到其远端的 Elmore 延迟为 $R_{s}(C' \\ell + C_{\\text{load}}) + \\frac{1}{2} R' C' \\ell^{2} + R' \\ell C_{\\text{load}}$。\n\n在这些假设下，根据第一性原理推导总的源到汇延迟作为 $N$ 的函数，然后确定最小化该延迟的最优实数值 $N$。在优化过程中将 $N$ 视为连续变量，并假设最优性条件产生正值。请以 $L$、$R'$、$C'$、$R_{b}$、$C_{b}$、$t_{b}$ 和 $C_{L}$ 的函数形式，给出最优级数 $N^{\\star}$ 的封闭形式表达式。您的最终答案必须是单个解析表达式。不要四舍五入；不需要进行数值计算。将级数表示为实值公式（忽略缓冲器的实际数量必须是整数这一事实）。",
            "solution": "首先验证问题，以确保其科学性、适定性和客观性。\n\n**步骤1：提取已知条件**\n- 总互连线长度：$L$\n- 互连线的单位长度电阻：$R'$\n- 互连线的单位长度电容：$C'$\n- 插入的中继器（缓冲器）数量：$N$\n- 中继器输出电阻：$R_b$\n- 中继器输入电容：$C_b$\n- 中继器固有延迟：$t_b$\n- 汇点处的负载电容：$C_L$\n- 源：理想电压源，意味着源电阻 $R_{s, \\text{source}} = 0$。\n- 缓冲器间距：$N$ 个缓冲器均匀分布，形成 $N+1$ 个等长的线段。\n- 长度为 $\\ell$ 的线段的 Elmore 延迟模型：\n$T_{\\text{Elmore}} = R_{s}(C' \\ell + C_{\\text{load}}) + \\frac{1}{2} R' C' \\ell^{2} + R' \\ell C_{\\text{load}}$，其中 $R_s$ 是驱动器电阻，$C_{\\text{load}}$ 是线段远端的负载电容。\n\n**步骤2：使用提取的已知条件进行验证**\n- **科学性**：该问题在 VLSI 电路设计领域有坚实的科学基础。Elmore 延迟是 RC 互连延迟的一种标准且广泛使用的一阶近似。对具有输入/输出寄生参数和固有延迟的缓冲器进行建模也是一种标准做法。\n- **适定性**：该问题要求推导总延迟并针对缓冲器数量 $N$ 对其进行最小化。变量和目标函数都得到了明确定义。假设最优性条件为 $N$ 产生正值，这确保了在指定框架内可以找到有意义的解。\n- **客观性**：问题陈述使用了精确、无偏见的技術用語。所有参数都是为物理量定义的符号。\n\n**步骤3：结论与行动**\n问题有效。这是一个电子设计自动化中的标准优化问题。我现在将着手求解。\n\n**总延迟的推导**\n\n总的源到汇延迟 $T(N)$ 是所有 $N$ 个缓冲器的固有延迟与 $N+1$ 个互连线段的 Elmore 延迟之和。\n\n总长度 $L$ 被分为 $N+1$ 个相同的线段，因此每段的长度为 $\\ell = \\frac{L}{N+1}$。\n\n总延迟 $T(N)$ 可以表示为：\n$$T(N) = N t_b + \\sum_{i=1}^{N+1} D_i$$\n其中 $D_i$ 是第 $i$ 个线段的 Elmore 延迟。我们逐段分析延迟贡献。\n\n1.  **第1段**：从理想源到第一个缓冲器。\n    - 驱动电阻：$R_s = 0$。\n    - 负载电容：$C_{\\text{load}} = C_b$（第一个缓冲器的输入电容）。\n    - 延迟 $D_1$：\n    $$D_1 = (0)(C' \\ell + C_b) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b = \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b$$\n\n2.  **中间段（i = 2 到 N）**：从缓冲器 $i-1$ 到缓冲器 $i$。\n    - 共有 $N-1$ 个这样的段。\n    - 驱动电阻：$R_s = R_b$（缓冲器的输出电阻）。\n    - 负载电容：$C_{\\text{load}} = C_b$（下一个缓冲器的输入电容）。\n    - 每个中间段的延迟 $D_{\\text{mid}}$：\n    $$D_{\\text{mid}} = R_b (C' \\ell + C_b) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b$$\n\n3.  **最后一段 (N+1)**：从最后一个缓冲器 (N) 到汇点。\n    - 驱动电阻：$R_s = R_b$。\n    - 负载电容：$C_{\\text{load}} = C_L$（汇点电容）。\n    - 延迟 $D_{N+1}$：\n    $$D_{N+1} = R_b (C' \\ell + C_L) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_L$$\n\n总延迟是所有这些分量的总和：\n$$T(N) = N t_b + D_1 + (N-1) D_{\\text{mid}} + D_{N+1}$$\n代入 $D_1$、$D_{\\text{mid}}$ 和 $D_{N+1}$ 的表达式：\n$$T(N) = N t_b + \\left(\\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b\\right) + (N-1)\\left(R_b (C' \\ell + C_b) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_b\\right) + \\left(R_b (C' \\ell + C_L) + \\frac{1}{2} R' C' \\ell^2 + R' \\ell C_L\\right)$$\n我们根据其物理来源收集各项：\n- 缓冲器固有延迟：$N t_b$\n- 缓冲器驱动延迟：$(N-1)R_b C_b + R_b C_L$\n- 缓冲器驱动导线电容：$(N-1) R_b C' \\ell + R_b C' \\ell = N R_b C' \\ell$\n- 分布式导线自身延迟：$(1 + (N-1) + 1) \\frac{1}{2} R' C' \\ell^2 = (N+1)\\frac{1}{2} R' C' \\ell^2$\n- 导线电阻驱动负载电容：$R' \\ell C_b + (N-1) R' \\ell C_b + R' \\ell C_L = N R' \\ell C_b + R' \\ell C_L$\n\n将这些项相加得到总延迟：\n$$T(N) = N t_b + N R_b C' \\ell + (N-1) R_b C_b + R_b C_L + (N+1)\\frac{1}{2}R'C'\\ell^2 + N R' \\ell C_b + R' \\ell C_L$$\n现在，代入 $\\ell = \\frac{L}{N+1}$：\n$$T(N) = N t_b + N R_b C' \\frac{L}{N+1} + (N-1) R_b C_b + R_b C_L + (N+1)\\frac{1}{2}R'C'\\frac{L^2}{(N+1)^2} + N R' \\frac{L}{N+1} C_b + R' \\frac{L}{N+1} C_L$$\n为了便于求导，我们按 $N$ 和 $\\frac{1}{N+1}$ 的幂次重新整理表达式：\n$$T(N) = N (t_b + R_b C_b) + (R_b C_L - R_b C_b) + \\frac{N}{N+1}(R_b C' L + R' L C_b) + \\frac{1}{N+1}\\left(\\frac{1}{2}R'C'L^2 + R' L C_L\\right)$$\n使用恒等式 $\\frac{N}{N+1} = 1 - \\frac{1}{N+1}$：\n$$T(N) = N(t_b + R_b C_b) + (R_b C_L - R_b C_b) + \\left(1-\\frac{1}{N+1}\\right)(R_b C' L + R' L C_b) + \\frac{1}{N+1}\\left(\\frac{1}{2}R'C'L^2 + R' L C_L\\right)$$\n将与 $N$ 无关的项、与 $N$ 成正比的项以及与 $\\frac{1}{N+1}$ 成正比的项分组：\n$$T(N) = N(t_b + R_b C_b) + \\frac{1}{N+1}\\left(\\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b\\right) + \\text{常数项}$$\n常数项不影响优化。令 $A = t_b + R_b C_b$ 且 $K = \\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b$。延迟函数的形式为 $T(N) = N A + \\frac{K}{N+1} + \\text{常数}$。\n\n**优化**\n\n为了找到最优缓冲器数量 $N^{\\star}$，我们将 $T(N)$ 对 $N$求导（将 $N$ 视为连续变量）并令导数等于零。\n$$\\frac{dT}{dN} = \\frac{d}{dN} \\left( N A + \\frac{K}{N+1} + \\text{常数} \\right) = A - \\frac{K}{(N+1)^2}$$\n将导数设置为零以求解最优值 $N^{\\star}$：\n$$A - \\frac{K}{(N^{\\star}+1)^2} = 0 \\implies (N^{\\star}+1)^2 = \\frac{K}{A}$$\n问题陈述要求假设最优性条件产生正值，这意味着我们取正平方根。\n$$N^{\\star}+1 = \\sqrt{\\frac{K}{A}}$$\n$$N^{\\star} = \\sqrt{\\frac{K}{A}} - 1$$\n代回 $A$ 和 $K$ 的表达式：\n$$N^{\\star} = \\sqrt{\\frac{\\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b}{t_b + R_b C_b}} - 1$$\n这就是最优实数值中继器数量的最终封闭形式表达式。",
            "answer": "$$\\boxed{\\sqrt{\\frac{\\frac{1}{2}R'C'L^2 + R'LC_L - R_bC'L - R'LC_b}{t_b + R_b C_b}} - 1}$$"
        },
        {
            "introduction": "将时钟信号同步分配到多个功能单元是时钟树综合的核心挑战，其关键目标是控制时钟偏斜（skew）。本练习介绍一种经典的零偏斜时钟树构造算法——延迟合并嵌入（DME）算法。通过这个实践 ，您将亲手执行DME的自底向上合并与自顶向下嵌入过程，从几何层面理解如何巧妙地构建布线拓扑，以确保时钟信号在理想模型下能够同时到达所有目标 sink 点。",
            "id": "4260650",
            "problem": "考虑一个集成电路和电子设计自动化（EDA）背景下的三汇点时钟分配实例，其嵌入受限于直角（曼哈顿）布线。您将应用延迟合并嵌入（DME）算法，在以下建模假设和数据下构建一个零时钟偏移树。\n\n假设：\n- 时钟线被建模为纯阻性互连，具有均匀的单位长度电阻 $r_{\\mathrm{w}}$，且导线电容相对于汇点电容可忽略不计。\n- 不插入缓冲器；目标是仅通过几何嵌入实现零时钟偏移。\n- 在忽略导线电容的 Elmore 延迟模型下，从一个节点到一个汇点的延迟与互连电阻、汇点电容和直角路径长度的乘积成正比。对于相等的汇点电容，零时钟偏移等效于从根节点到每个汇点的直角路径长度相等。\n- DME 算法通过合并子树自底向上进行。对于每次合并，可行的父节点位置（合并区域或合并段）是那些使得父节点到子节点的距离（经过子节点到其汇点的内部路径长度调整后）在两个子树的汇点处产生相等到达时间的点。然后，自顶向下阶段在合并区域内选择一个嵌入点，以最小化总线长。\n\n数据：\n- 三个具有相同电容负载 $C_{1} = C_{2} = C_{3} = 30\\,\\mathrm{fF}$ 的汇点，其坐标分别为 $S_{1} = (0\\,\\mu\\mathrm{m}, 0\\,\\mu\\mathrm{m})$、$S_{2} = (10\\,\\mu\\mathrm{m}, 0\\,\\mu\\mathrm{m})$ 和 $S_{3} = (5\\,\\mu\\mathrm{m}, 8\\,\\mu\\mathrm{m})$。\n\n任务：\n1. 根据第一性原理和在给定假设下的 DME 方法，推导自底向上合并的合并区域（或合并段）：首先合并 $S_{1}$ 和 $S_{2}$，然后将生成的子树与 $S_{3}$ 合并。\n2. 给出内部合并点（斯坦纳点）的显式嵌入坐标，并列出从每个内部点到其子节点的直角线段长度。\n3. 计算最终嵌入的零时钟偏移树的总直角线长。\n\n最终总线长以 $\\mu\\mathrm{m}$ 为单位表示。最终答案必须是单个实数。无需对精确值进行四舍五入。",
            "solution": "用户希望使用延迟合并嵌入（DME）算法，在直角（曼哈顿）距离度量下，计算一个三汇点的零时钟偏移时钟树的总线长。\n\n### 问题验证\n\n**步骤 1：提取已知条件**\n-   **汇点：** 三个汇点，坐标分别为 $S_{1} = (0, 0)$，$S_{2} = (10, 0)$ 和 $S_{3} = (5, 8)$。所有坐标单位均为 $\\mu\\mathrm{m}$。\n-   **电容负载：** 汇点具有相同的负载，$C_{1} = C_{2} = C_{3} = 30\\,\\mathrm{fF}$。\n-   **导线模型：** 纯阻性互连，具有均匀的单位长度电阻 $r_{\\mathrm{w}}$。导线电容可忽略。\n-   **延迟模型：** Elmore 延迟。在导线电容可忽略且汇点负载相同的情况下，零时钟偏移（所有汇点的到达时间相等）的条件简化为要求从时钟树根节点到每个汇点的直角路径长度相等。\n-   **算法：** 延迟合并嵌入 (DME)。\n-   **合并顺序：** 首先合并 $S_{1}$ 和 $S_{2}$。然后将生成的子树与 $S_{3}$ 合并。\n\n**步骤 2：使用提取的已知条件进行验证**\n-   **科学依据：** 该问题基于 Elmore 延迟模型和 DME 算法，这些是 VLSI 电路电子设计自动化（EDA）领域中标准、成熟的概念。延迟模型的简化是一种常用且有效的方法，适用于专注于时钟树综合几何方面的入门级问题。\n-   **适定性：** 该问题提供了一套完整的数据（汇点位置）、一个明确定义的目标（零时钟偏移树）和一个特定的算法（具有固定合并顺序的 DME）。这种结构确保了存在唯一且有意义的解。\n-   **客观性：** 该问题使用精确的技术语言陈述，没有任何主观或模糊的术语。\n\n**步骤 3：结论与行动**\n该问题具有科学依据、适定性和客观性。因此被认为是**有效的**。我们现在将进行完整解答。\n\n### 解答\n\n解答遵循 DME 算法的两遍扫描结构：一次自底向上扫描以确定可行的合并区域，随后一次自顶向下扫描以嵌入内部节点（斯坦纳点）来最小化总线长。距离度量为直角（曼哈顿）距离，$d_1(p_1, p_2) = |x_1 - x_2| + |y_1 - y_2|$，其中点为 $p_1=(x_1, y_1)$ 和 $p_2=(x_2, y_2)$。\n\n#### 1. 自底向上扫描：构建合并区域\n\n**合并 1：汇点 $S_{1}$ 和 $S_{2}$**\n\n令 $M_1 = (x, y)$ 为第一个合并点，它将是汇点 $S_1=(0,0)$ 和 $S_2=(10,0)$ 的父节点。为在此层级实现零时钟偏移，从 $M_1$ 到 $S_1$ 和 $S_2$ 的路径长度必须相等。由于汇点是叶节点，它们的内部路径延迟为零。\n\n条件是：\n$$d_1(M_1, S_1) = d_1(M_1, S_2)$$\n$$|x - 0| + |y - 0| = |x - 10| + |y - 0|$$\n$$|x| = |x - 10|$$\n此方程对任何到 $0$ 和 $10$ 等距的点 $x$ 均成立。中点是 $\\frac{0+10}{2} = 5$。因此，解为 $x=5$。合并区域是由 $x=5$ 定义的一条垂直线。记这条线为 $L_{12}$。\n\n对于该线上的任意点 $M_1=(5, y_{M_1})$，到其子汇点的路径长度是相同的。我们将此路径长度（对应于以 $M_1$ 为根的子树的延迟）定义为 $\\lambda_1(y_{M_1})$：\n$$\\lambda_1(y_{M_1}) = d_1((5, y_{M_1}), S_1) = |5 - 0| + |y_{M_1} - 0| = 5 + |y_{M_1}|$$\n\n**合并 2：子树 $T_{12}$ 和汇点 $S_{3}$**\n\n接下来，我们将子树 $T_{12}$（根位于线 $L_{12}$ 上）与汇点 $S_3=(5,8)$ 合并。令新的合并点（最终的树根）为 $M_2=(x,y)$。\n\nDME 算法通过使到子树的“有效”路径长度相等来找到 $M_2$ 的合并区域。从 $M_2$ 到子树 $T_{12}$ 的汇点的有效路径长度，是在其合并轨迹 $L_{12}$ 上所有可能的 $M_1$ 位置上取最小值得到的：\n$$L(M_2, T_{12}) = \\min_{M_1 \\in L_{12}} (d_1(M_2, M_1) + \\lambda_1(y_{M_1}))$$\n$$L(M_2, T_{12}) = \\min_{y_{M_1}} (d_1((x,y), (5,y_{M_1})) + 5 + |y_{M_1}|)$$\n$$L(M_2, T_{12}) = \\min_{y_{M_1}} (|x-5| + |y-y_{M_1}| + 5 + |y_{M_1}|)$$\n项 $|x-5|+5$ 相对于对 $y_{M_1}$ 的最小化是常数。\n$$L(M_2, T_{12}) = |x-5| + 5 + \\min_{y_{M_1}} (|y-y_{M_1}| + |y_{M_1}|)$$\n表达式 $|y-y_{M_1}| + |y_{M_1}|$ 表示数轴上一点 $y_{M_1}$ 到 $0$ 和 $y$ 的距离之和。根据三角不等式，当 $y_{M_1}$ 位于 $0$ 和 $y$ 之间时，该和最小。最小值为 $|y|$。因此：\n$$L(M_2, T_{12}) = |x-5| + 5 + |y|$$\n从 $M_2$ 到汇点 $S_3$ 的路径长度就是直角距离：\n$$L(M_2, S_3) = d_1(M_2, S_3) = |x-5| + |y-8|$$\n$M_2$ 的合并区域是这两个路径长度相等的点集：\n$$L(M_2, T_{12}) = L(M_2, S_3)$$\n$$|x-5| + 5 + |y| = |x-5| + |y-8|$$\n$$5 + |y| = |y-8|$$\n我们解关于 y 的方程：\n-   若 $y \\ge 8$：$5+y = y-8 \\implies 5 = -8$，不成立。\n-   若 $0 \\le y < 8$：$5+y = 8-y \\implies 2y = 3 \\implies y = 1.5$。\n-   若 $y < 0$：$5-y = 8-y \\implies 5 = 8$，不成立。\n\n唯一的解是 $y=1.5$。$M_2$ 的合并区域是水平线 $y=1.5$。\n\n这就完成了第一个任务。$\\{S_1, S_2\\}$ 的合并段是直线 $x=5$。$\\{T_{12}, S_3\\}$ 的合并段是直线 $y=1.5$。\n\n#### 2. 自顶向下扫描：嵌入内部节点\n\n我们现在为 $M_2$ 和 $M_1$ 选择具体坐标以最小化总线长。\n\n**嵌入 $M_2$：**\n根节点 $M_2$ 必须位于其合并轨迹，即直线 $y=1.5$ 上。所以 $M_2=(x_{M_2}, 1.5)$。被连接的子节点是 $S_3=(5,8)$ 和根 $M_1$ 必须位于直线 $x=5$ 上的子树 $T_{12}$。为了最小化连接这些子节点的水平线长，我们必须选择 $M_2$ 的 x 坐标为 $5$。因此，根节点的最优嵌入是 $M_2 = (5, 1.5)$。\n\n**嵌入 $M_1$：**\n节点 $M_1$ 必须位于其合并轨迹，即直线 $x=5$ 上，所以 $M_1=(5, y_{M_1})$。$y_{M_1}$ 的选择必须确保在 $M_2$ 处满足零时钟偏移条件。该条件是在推导有效路径长度 $L(M_2, T_{12})$ 时建立的。$|y-y_{M_1}| + |y_{M_1}|$ 的最小值是 $|y|$，这是在 $y_{M_1}$ 位于 $0$ 和 $y$ 之间时达到的。由于 $M_2=(5, 1.5)$，我们有 $y=1.5$。因此，$y_{M_1}$ 的一个有效选择必须满足 $0 \\le y_{M_1} \\le 1.5$。\n\n为了找到最优的 $y_{M_1}$，我们最小化树的总线长。总线长 $W$ 是物理线段长度的总和。该树由一个垂直主干和一个水平分支组成。\n让我们将总线长表示为四个逻辑边长度的总和：\n$$W = d_1(M_2, M_1) + d_1(M_2, S_3) + d_1(M_1, S_1) + d_1(M_1, S_2)$$\n当 $M_2=(5, 1.5)$ 且 $M_1=(5, y_{M_1})$，其中 $y_{M_1} \\in [0, 1.5]$ 时：\n- $d_1(M_2, M_1) = |5-5|+|1.5-y_{M_1}| = 1.5-y_{M_1}$\n- $d_1(M_2, S_3) = |5-5|+|1.5-8| = 6.5$\n- $d_1(M_1, S_1) = |5-0|+|y_{M_1}-0| = 5+y_{M_1}$\n- $d_1(M_1, S_2) = |5-10|+|y_{M_1}-0| = 5+y_{M_1}$\n$$W(y_{M_1}) = (1.5 - y_{M_1}) + 6.5 + (5 + y_{M_1}) + (5 + y_{M_1}) = 18 + y_{M_1}$$\n为了最小化 $W(y_{M_1})$，我们必须在其有效范围 $[0, 1.5]$ 内为 $y_{M_1}$ 选择可能的最小值。最小值在 $y_{M_1}=0$ 处取得。\n\n因此，内部节点的最优嵌入是：\n-   $M_1 = (5, 0)$\n-   $M_2 = (5, 1.5)$\n\n从每个内部点到其子节点的直角线段长度是：\n-   从 $M_1=(5,0)$：\n    -   到 $S_1=(0,0)$：$d_1(M_1,S_1) = |5-0|+|0-0| = 5\\,\\mu\\mathrm{m}$。\n    -   到 $S_2=(10,0)$：$d_1(M_1,S_2) = |5-10|+|0-0| = 5\\,\\mu\\mathrm{m}$。\n-   从 $M_2=(5,1.5)$：\n    -   到 $M_1=(5,0)$：$d_1(M_2,M_1) = |5-5|+|1.5-0| = 1.5\\,\\mu\\mathrm{m}$。\n    -   到 $S_3=(5,8)$：$d_1(M_2,S_3) = |5-5|+|1.5-8| = 6.5\\,\\mu\\mathrm{m}$。\n\n作为验证，从根节点 $M_2$ 到所有汇点的路径长度是相等的：\n-   $L(M_2,S_1) = d_1(M_2, M_1) + d_1(M_1, S_1) = 1.5 + 5 = 6.5\\,\\mu\\mathrm{m}$。\n-   $L(M_2,S_2) = d_1(M_2, M_1) + d_1(M_1, S_2) = 1.5 + 5 = 6.5\\,\\mu\\mathrm{m}$。\n-   $L(M_2,S_3) = d_1(M_2, S_3) = 6.5\\,\\mu\\mathrm{m}$。\n该树确实是一个零时钟偏移树。\n\n#### 3. 总线长计算\n\n总线长是构成树的物理线段长度的总和。\n该嵌入产生了以下连接：\n-   一个从 $S_1=(0,0)$ 到 $S_2=(10,0)$ 的水平线段，穿过 $M_1=(5,0)$。长度为 $d_1(S_1, S_2) = 10\\,\\mu\\mathrm{m}$。\n-   一个从 $M_1=(5,0)$ 到 $S_3=(5,8)$ 的垂直线段，穿过 $M_2=(5,1.5)$。长度为 $|8-0| = 8\\,\\mu\\mathrm{m}$。\n\n总线长是这两个线段长度的总和：\n$$W_{\\text{total}} = 10 + 8 = 18\\,\\mu\\mathrm{m}$$\n这与我们的线长函数 $W(y_{M_1}) = 18 + y_{M_1}$ 在 $y_{M_1}=0$ 处的最小值相匹配。",
            "answer": "$$\\boxed{18}$$"
        }
    ]
}
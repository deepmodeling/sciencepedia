{
    "hands_on_practices": [
        {
            "introduction": "二次布局是分析法布局中的一种基础技术，它将电路网络类比为物理弹簧系统。在这种模型下，目标是找到所有可移动单元的位置，使得系统的总势能（即总线长）最小化。这个优化问题最终可以被形式化为一个线性方程组 $L x = b$ 的求解问题，其中 $L$ 是表示单元间连接关系的刚度矩阵。本练习  将引导你从一个简单的实例出发，亲手构建并求解这个方程组，从而深入理解二次布局从物理模型到数学求解的全过程。",
            "id": "4282571",
            "problem": "考虑电子设计自动化（EDA）中的一个分析性布局实例，其中线网被建模为线性弹簧，二次布局通过最小化源于成对弹簧伸长的凸能量来进行。在一维空间中，假设有三个可移动的标准单元，其未知水平坐标为 $x_{1}$、$x_{2}$ 和 $x_{3}$（单位为微米），以及两个坐标已知的固定端点。互连拓扑由两个线网给出：\n- 线网 $\\mathcal{N}_{1}$ 连接可移动单元1和2的引脚以及位于 $x_{f_{1}}=0$ 的固定端点 $f_{1}$。\n- 线网 $\\mathcal{N}_{2}$ 连接可移动单元2和3的引脚以及位于 $x_{f_{2}}=12$ 的固定端点 $f_{2}$。\n\n假设沿 $x$ 轴进行一维布局。使用以下基本依据：\n- 弹簧模型：网络中连接的每一对引脚都构成一个弹簧，其胡克能量与其 $x$ 坐标差的平方成正比。具体来说，在超边的团扩展模型下，每个基数为 $k$ 的线网都被替换为其 $k$ 个引脚上的一个完全图，每对引脚间的单位弹簧常数 $w=1$。\n- 总二次能量是所有弹簧对的能量之和。在固定端点位置的约束下，最小化这个凸二次能量会得到形如 $L x = b$ 的线性正规方程，其中当网表包含连接到可移动单元的固定端点时，$L$ 是一个对称正定矩阵。\n\n任务：\n1. 从所述的弹簧模型和团扩展假设出发，通过对由 $\\mathcal{N}_{1}$ 和 $\\mathcal{N}_{2}$ 引起的所有弹簧对的贡献求和，写出总二次能量 $Q(x)$（用 $x_{1}$、$x_{2}$、$x_{3}$、$x_{f_{1}}$ 和 $x_{f_{2}}$ 表示）。\n2. 通过将 $Q(x)$ 相对于 $(x_{1}, x_{2}, x_{3})$ 的梯度设为零，推导出驻点处的线性系统。明确地构建系数矩阵 $L$ 和右端向量 $b$。\n3. 求解 $L x = b$ 以获得最优坐标 $(x_{1}, x_{2}, x_{3})$。\n4. 基于弹簧模型，简要地从物理角度解释所得坐标。\n\n最终位置以微米表示。最终答案必须是有序三元组 $(x_{1}, x_{2}, x_{3})$。无需四舍五入；请报告精确值。",
            "solution": "该问题是电子设计自动化（EDA）中一维分析性布局的一个有效实例，这是一个标准课题。它具有科学依据，是适定的，并且为获得唯一解提供了所有必要信息。我们可以开始进行推导。\n\n该问题涉及三个坐标为 $x_1, x_2, x_3$ 的可移动单元和两个位于 $x_{f_1}=0$ 和 $x_{f_2}=12$ 的固定端点。连接性由两个线网定义：$\\mathcal{N}_1 = \\{1, 2, f_1\\}$ 和 $\\mathcal{N}_2 = \\{2, 3, f_2\\}$。\n\n**1. 总二次能量 $Q(x)$**\n\n能量使用团扩展模型进行建模，其中每个基数为 $k$ 的线网被分解为一个包含 $\\binom{k}{2}$ 条边的完全图。每条边对应一个弹簧，其能量为 $w(x_i-x_j)^2$，其中弹簧常数给定为 $w=1$。\n\n对于线网 $\\mathcal{N}_1 = \\{1, 2, f_1\\}$，其基数为 $k=3$。团扩展产生 $\\binom{3}{2}=3$ 个对：$(1, 2)$、$(1, f_1)$ 和 $(2, f_1)$。来自 $\\mathcal{N}_1$ 的能量贡献（记为 $Q_1$）是这三个弹簧的能量之和：\n$$Q_1 = (x_1 - x_2)^2 + (x_1 - x_{f_1})^2 + (x_2 - x_{f_1})^2$$\n\n对于线网 $\\mathcal{N}_2 = \\{2, 3, f_2\\}$，其基数也为 $k=3$。团扩展产生 $\\binom{3}{2}=3$ 个对：$(2, 3)$、$(2, f_2)$ 和 $(3, f_2)$。来自 $\\mathcal{N}_2$ 的能量贡献（记为 $Q_2$）是：\n$$Q_2 = (x_2 - x_3)^2 + (x_2 - x_{f_2})^2 + (x_3 - x_{f_2})^2$$\n\n总二次能量 $Q(x)$ 是所有线网能量的总和，即 $Q(x) = Q_1 + Q_2$。\n$$Q(x_1, x_2, x_3) = (x_1 - x_2)^2 + (x_1 - x_{f_1})^2 + (x_2 - x_{f_1})^2 + (x_2 - x_3)^2 + (x_2 - x_{f_2})^2 + (x_3 - x_{f_2})^2$$\n\n代入给定的固定端点位置 $x_{f_1}=0$ 和 $x_{f_2}=12$：\n$$Q(x_1, x_2, x_3) = (x_1 - x_2)^2 + (x_1 - 0)^2 + (x_2 - 0)^2 + (x_2 - x_3)^2 + (x_2 - 12)^2 + (x_3 - 12)^2$$\n$$Q(x_1, x_2, x_3) = (x_1 - x_2)^2 + x_1^2 + x_2^2 + (x_2 - x_3)^2 + (x_2 - 12)^2 + (x_3 - 12)^2$$\n\n**2. 线性系统 $Lx = b$ 的推导**\n\n为了找到最小化能量 $Q(x)$ 的最优坐标，我们必须找到驻点，在该点 $Q$ 相对于可移动坐标向量 $x = (x_1, x_2, x_3)$ 的梯度为零。即 $\\nabla Q = \\left(\\frac{\\partial Q}{\\partial x_1}, \\frac{\\partial Q}{\\partial x_2}, \\frac{\\partial Q}{\\partial x_3}\\right) = (0, 0, 0)$。\n\n我们计算偏导数：\n\n对于 $x_1$：\n$$\\frac{\\partial Q}{\\partial x_1} = \\frac{\\partial}{\\partial x_1} \\left[ (x_1 - x_2)^2 + x_1^2 \\right] = 2(x_1 - x_2)(1) + 2x_1 = 4x_1 - 2x_2$$\n\n对于 $x_2$：\n$$\\frac{\\partial Q}{\\partial x_2} = \\frac{\\partial}{\\partial x_2} \\left[ (x_1 - x_2)^2 + x_2^2 + (x_2 - x_3)^2 + (x_2 - 12)^2 \\right]$$\n$$\\frac{\\partial Q}{\\partial x_2} = 2(x_1 - x_2)(-1) + 2x_2 + 2(x_2 - x_3)(1) + 2(x_2 - 12)(1)$$\n$$\\frac{\\partial Q}{\\partial x_2} = -2x_1 + 2x_2 + 2x_2 + 2x_2 - 2x_3 + 2x_2 - 24 = -2x_1 + 8x_2 - 2x_3 - 24$$\n\n对于 $x_3$：\n$$\\frac{\\partial Q}{\\partial x_3} = \\frac{\\partial}{\\partial x_3} \\left[ (x_2 - x_3)^2 + (x_3 - 12)^2 \\right] = 2(x_2 - x_3)(-1) + 2(x_3 - 12)(1)$$\n$$\\frac{\\partial Q}{\\partial x_3} = -2x_2 + 2x_3 + 2x_3 - 24 = -2x_2 + 4x_3 - 24$$\n\n将这些导数设为零，得到线性方程组：\n$$4x_1 - 2x_2 = 0$$\n$$-2x_1 + 8x_2 - 2x_3 = 24$$\n$$-2x_2 + 4x_3 = 24$$\n\n该系统形如 $L x = b$，其中 $x = \\begin{pmatrix} x_1 \\\\ x_2 \\\\ x_3 \\end{pmatrix}$。系数矩阵 $L$ 和右端向量 $b$ 为：\n$$L = \\begin{pmatrix} 4 & -2 & 0 \\\\ -2 & 8 & -2 \\\\ 0 & -2 & 4 \\end{pmatrix}, \\quad b = \\begin{pmatrix} 0 \\\\ 24 \\\\ 24 \\end{pmatrix}$$\n\n**3. 求解线性系统**\n\n我们求解该方程组：\n1. $4x_1 - 2x_2 = 0$\n2. $-2x_1 + 8x_2 - 2x_3 = 24$\n3. $-2x_2 + 4x_3 = 24$\n\n由方程(1)可得 $4x_1 = 2x_2$，简化为 $x_2 = 2x_1$。\n\n由方程(3)两边同除以2，可得 $-x_2 + 2x_3 = 12$，即 $2x_3 = x_2 + 12$。\n\n现在，将 $x_2 = 2x_1$ 代入 $2x_3$ 的表达式中：\n$2x_3 = (2x_1) + 12$，这意味着 $x_3 = x_1 + 6$。\n\n接下来，我们将 $x_2 = 2x_1$ 和 $x_3 = x_1 + 6$ 同时代入方程(2)：\n$$-2x_1 + 8(2x_1) - 2(x_1 + 6) = 24$$\n$$-2x_1 + 16x_1 - 2x_1 - 12 = 24$$\n$$12x_1 = 36$$\n$$x_1 = 3$$\n\n现在我们通过回代法求出 $x_2$ 和 $x_3$：\n$$x_2 = 2x_1 = 2(3) = 6$$\n$$x_3 = x_1 + 6 = 3 + 6 = 9$$\n\n最优坐标为 $(x_1, x_2, x_3) = (3, 6, 9)$。\n\n**4. 物理诠释**\n\n驻点方程可以解释为力平衡方程。对于给定的可移动单元 $i$，其最优位置 $x_i$ 是与其相连的所有其他引脚（可移动或固定）位置的加权平均值。在单位弹簧常数的团模型下，单元 $i$ 的方程为：\n$$(\\deg(i)) x_i - \\sum_{j \\sim i} x_j = \\sum_{f \\sim i} x_f$$\n其中 $\\deg(i)$ 是与单元 $i$ 相连的连接数，$j \\sim i$ 表示与 $i$ 相邻的可移动单元，$f \\sim i$ 表示与 $i$ 相邻的固定端点。\n\n这意味着 $x_i = \\frac{1}{\\deg(i)} \\sum_{k \\sim i} x_k$，其中求和遍历 $i$ 的所有邻居。\n- **单元1**：连接到单元2和端点 $f_1$。其度为2。因此，$x_1 = \\frac{x_2 + x_{f_1}}{2}$。使用计算出的值：$3 = \\frac{6+0}{2}$。此式成立。\n- **单元2**：连接到单元1、3以及端点 $f_1, f_2$。其度为4。因此，$x_2 = \\frac{x_1 + x_3 + x_{f_1} + x_{f_2}}{4}$。使用计算出的值：$6 = \\frac{3+9+0+12}{4} = \\frac{24}{4}$。此式成立。\n- **单元3**：连接到单元2和端点 $f_2$。其度为2。因此，$x_3 = \\frac{x_2 + x_{f_2}}{2}$。使用计算出的值：$9 = \\frac{6+12}{2}$。此式成立。\n\n在物理上，每个可移动单元都稳定在由弹簧连接的组件的“重心”位置。解 $(x_1, x_2, x_3) = (3, 6, 9)$ 将可移动单元放置在位于0和12的固定端点之间的等间距位置上。完整的排列是 $x_{f_1}=0, x_1=3, x_2=6, x_3=9, x_{f_2}=12$。这种完美的等差数列源于连接的对称性。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n3 & 6 & 9\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "与将布局视为连续优化问题不同，另一大类布局方法基于分割。其核心思想是递归地将电路划分为更小的部分，同时最小化跨越边界的连接数，即最小割（min-cut）。Fiduccia-Mattheyses (FM) 算法是解决此类超图分割问题的经典迭代改进启发式算法。本练习  让你手动执行一轮完整的 FM 算法，通过计算和更新每个单元的“增益”（gain），并选择最佳移动序列，你将对这种组合优化方法的内在机制获得直观而深刻的认识。",
            "id": "4282597",
            "problem": "考虑一个在电子设计自动化（EDA）中出现的超图划分实例。该超图的顶点集为 $\\{v_1, v_2, v_3, v_4, v_5, v_6\\}$，超边集为 $\\{e_1, e_2, e_3, e_4, e_5, e_6\\}$，其整数权重 $w(e_i)$ 如下所述。初始二分划分为 $A = \\{v_1, v_2, v_3\\}$ 和 $B = \\{v_4, v_5, v_6\\}$。所有顶点的权重均为单位权重（1）。超边如下：\n- $e_1 = \\{v_1, v_4\\}$，权重 $w(e_1) = 2$，\n- $e_2 = \\{v_1, v_2, v_4\\}$，权重 $w(e_2) = 1$，\n- $e_3 = \\{v_2, v_3, v_5\\}$，权重 $w(e_3) = 2$，\n- $e_4 = \\{v_3, v_6\\}$，权重 $w(e_4) = 1$，\n- $e_5 = \\{v_4, v_5, v_6\\}$，权重 $w(e_5) = 3$，\n- $e_6 = \\{v_2, v_6\\}$，权重 $w(e_6) = 1$。\n\n二分划分的切割量（cutsize）定义为同时在 $A$ 和 $B$ 中至少各有一个引脚（pin）的超边的权重之和。执行一轮 Fiduccia–Mattheyses (FM) 算法，过程如下：迭代选择具有最大增益（增益是指将该顶点移动到对侧块时切割量的变化）的未锁定顶点，移动并锁定它；当增益相等时，选择索引最小的顶点来打破平局。持续此过程直到所有顶点都被锁定。对于本练习，在整个轮次中忽略对块大小的平衡约束。\n\n严格按照切割量和集合成员关系的操作定义，计算：\n1. 初始切割量。\n2. 每个顶点移动到对侧块的初始增益。\n3. 一轮 FM 过程中的完整移动序列，每一步都显示所选顶点、其增益以及更新后的切割量。\n4. 每次移动后的累积切割量改进值，以及在该轮次中任何移动前缀序列所达到的最大累积改进值。\n\n你的最终答案必须是该轮次所实现的最大累积切割量改进值，以单个实数值表示。无需四舍五入。最终答案应表示为不带单位的纯数字。",
            "solution": "本题是应用 Fiduccia-Mattheyses (FM) 算法于超图划分实例的一个有效练习。所有定义都清晰，数据自洽，且所提供的规则（包括打破平局的条件）确保了唯一、确定性的操作序列。我们将按照指定的四个计算步骤进行求解。\n\n超图由顶点集 $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$ 和超边集 $E = \\{e_1, e_2, e_3, e_4, e_5, e_6\\}$ 定义。初始二分划分为 $A = \\{v_1, v_2, v_3\\}$ 和 $B = \\{v_4, v_5, v_6\\}$。\n\n超边及其权重 $w(e_i)$ 如下：\n- $e_1 = \\{v_1, v_4\\}$, $w(e_1) = 2$\n- $e_2 = \\{v_1, v_2, v_4\\}$, $w(e_2) = 1$\n- $e_3 = \\{v_2, v_3, v_5\\}$, $w(e_3) = 2$\n- $e_4 = \\{v_3, v_6\\}$, $w(e_4) = 1$\n- $e_5 = \\{v_4, v_5, v_6\\}$, $w(e_5) = 3$\n- $e_6 = \\{v_2, v_6\\}$, $w(e_6) = 1$\n\n### 1. 初始切割量计算\n\n如果一条超边在划分 $A$ 和划分 $B$ 中都至少包含一个顶点，则该超边被切割。我们针对初始划分 $A = \\{v_1, v_2, v_3\\}$ 和 $B = \\{v_4, v_5, v_6\\}$ 检查每条超边。\n- $e_1 = \\{v_1, v_4\\}$: $v_1 \\in A$ 且 $v_4 \\in B$。它被切割。\n- $e_2 = \\{v_1, v_2, v_4\\}$: $\\{v_1, v_2\\} \\subset A$ 且 $v_4 \\in B$。它被切割。\n- $e_3 = \\{v_2, v_3, v_5\\}$: $\\{v_2, v_3\\} \\subset A$ 且 $v_5 \\in B$。它被切割。\n- $e_4 = \\{v_3, v_6\\}$: $v_3 \\in A$ 且 $v_6 \\in B$。它被切割。\n- $e_5 = \\{v_4, v_5, v_6\\}$: 所有顶点都在 $B$ 中。它未被切割。\n- $e_6 = \\{v_2, v_6\\}$: $v_2 \\in A$ 且 $v_6 \\in B$。它被切割。\n\n初始切割量 $C_0$ 是被切割超边的权重之和：\n$$C_0 = w(e_1) + w(e_2) + w(e_3) + w(e_4) + w(e_6) = 2 + 1 + 2 + 1 + 1 = 7$$\n\n### 2. 初始增益计算\n\n移动顶点 $v$ 的增益 $G(v)$ 是切割量的减少量。对于包含顶点 $v$ 的超边 $e$，将 $v$ 从其当前块 $S_v$ 移动到另一个块 $T_v$：\n- 如果在移动前 $e \\subseteq S_v$，则切割量增加 $w(e)$（对增益的贡献为 $-w(e)$）。\n- 如果 $v$ 是 $e$ 在 $S_v$ 中的唯一顶点，则切割量减少 $w(e)$（对增益的贡献为 $+w(e)$）。\n- 其他情况下不改变切割状态（对增益的贡献为 $0$）。\n\n让我们计算所有顶点的初始增益。\n**对于 A 中的顶点 ($v \\in \\{v_1, v_2, v_3\\}$):**\n- $G(v_1)$：$v_1$ 位于 $e_1, e_2$ 中。对于 $e_1=\\{v_1, v_4\\}$， $|e_1 \\cap A|=1$，所以移动 $v_1$ 会使 $e_1$ 不再被切割。增益贡献为 $+w(e_1)=+2$。对于 $e_2=\\{v_1, v_2, v_4\\}$， $|e_2 \\cap A|=2$，所以移动 $v_1$ 不会改变切割状态。增益贡献为 $0$。总增益 $G(v_1) = 2$。\n- $G(v_2)$：$v_2$ 位于 $e_2, e_3, e_6$ 中。对于 $e_2=\\{v_1, v_2, v_4\\}$， $|e_2 \\cap A|=2$，增益贡献为 $0$。对于 $e_3=\\{v_2, v_3, v_5\\}$， $|e_3 \\cap A|=2$，增益贡献为 $0$。对于 $e_6=\\{v_2, v_6\\}$， $|e_6 \\cap A|=1$，增益贡献为 $+w(e_6)=+1$。总增益 $G(v_2) = 1$。\n- $G(v_3)$：$v_3$ 位于 $e_3, e_4$ 中。对于 $e_3=\\{v_2, v_3, v_5\\}$， $|e_3 \\cap A|=2$，增益贡献为 $0$。对于 $e_4=\\{v_3, v_6\\}$， $|e_4 \\cap A|=1$，增益贡献为 $+w(e_4)=+1$。总增益 $G(v_3) = 1$。\n\n**对于 B 中的顶点 ($v \\in \\{v_4, v_5, v_6\\}$):**\n- $G(v_4)$：$v_4$ 位于 $e_1, e_2, e_5$ 中。对于 $e_1=\\{v_1, v_4\\}$， $|e_1 \\cap B|=1$，增益贡献为 $+w(e_1)=+2$。对于 $e_2=\\{v_1, v_2, v_4\\}$， $|e_2 \\cap B|=1$，增益贡献为 $+w(e_2)=+1$。对于 $e_5=\\{v_4, v_5, v_6\\}$， $e_5 \\subseteq B$，移动 $v_4$ 会使 $e_5$ 被切割，增益贡献为 $-w(e_5)=-3$。总增益 $G(v_4) = 2+1-3=0$。\n- $G(v_5)$：$v_5$ 位于 $e_3, e_5$ 中。对于 $e_3=\\{v_2, v_3, v_5\\}$， $|e_3 \\cap B|=1$，增益贡献为 $+w(e_3)=+2$。对于 $e_5=\\{v_4, v_5, v_6\\}$， $e_5 \\subseteq B$，增益贡献为 $-w(e_5)=-3$。总增益 $G(v_5) = 2-3=-1$。\n- $G(v_6)$：$v_6$ 位于 $e_4, e_5, e_6$ 中。对于 $e_4=\\{v_3, v_6\\}$， $|e_4 \\cap B|=1$，增益贡献为 $+w(e_4)=+1$。对于 $e_5=\\{v_4, v_5, v_6\\}$， $e_5 \\subseteq B$，增益贡献为 $-w(e_5)=-3$。对于 $e_6=\\{v_2, v_6\\}$， $|e_6 \\cap B|=1$，增益贡献为 $+w(e_6)=+1$。总增益 $G(v_6) = 1-3+1=-1$。\n\n初始增益总结：$G(v_1)=2, G(v_2)=1, G(v_3)=1, G(v_4)=0, G(v_5)=-1, G(v_6)=-1$。\n\n### 3. 一轮 FM 过程中的完整移动序列\n\n我们迭代选择具有最高增益的未锁定顶点（若增益相同则选择索引最小的），移动并锁定它，然后更新增益。\n\n**第 1 步：**\n- **选择：** 最大增益为 $G(v_1)=2$。\n- **移动：** 将 $v_1$ 从 $A$ 移动到 $B$。增益 $g_1=2$。锁定 $v_1$。\n- **状态：** $A'=\\{v_2,v_3\\}$, $B'=\\{v_1,v_4,v_5,v_6\\}$。切割量 $C_1 = C_0 - g_1 = 7-2=5$。\n- **增益更新：** $G(v_2)=2, G(v_3)=1, G(v_4)=-5, G(v_5)=-1, G(v_6)=-1$。\n\n**第 2 步：**\n- **选择：** 未锁定顶点中的最大增益为 $G(v_2)=2$。\n- **移动：** 将 $v_2$ 从 $A'$ 移动到 $B'$。增益 $g_2=2$。锁定 $v_2$。\n- **状态：** $A''=\\{v_3\\}$, $B''=\\{v_1,v_2,v_4,v_5,v_6\\}$。切割量 $C_2 = C_1 - g_2 = 5-2=3$。\n- **增益更新：** $G(v_3)=3, G(v_4)=-6, G(v_5)=-3, G(v_6)=-3$。\n\n**第 3 步：**\n- **选择：** 最大增益为 $G(v_3)=3$。\n- **移动：** 将 $v_3$ 从 $A''$ 移动到 $B''$。增益 $g_3=3$。锁定 $v_3$。\n- **状态：** $A'''=\\emptyset$, $B'''=\\{v_1,v_2,v_3,v_4,v_5,v_6\\}$。切割量 $C_3 = C_2 - g_3 = 3-3=0$。\n- **增益更新：** $G(v_4)=-6, G(v_5)=-5, G(v_6)=-5$。\n\n**第 4 步：**\n- **选择：** 最大增益为 $-5$，由 $v_5$ 和 $v_6$ 同时达到。打破平局的规则是选择索引最小的顶点，因此我们选择 $v_5$。\n- **移动：** 将 $v_5$ 从 $B'''$ 移动到 $A'''$。增益 $g_4=-5$。锁定 $v_5$。\n- **状态：** $A''''=\\{v_5\\}$, $B''''=\\{v_1,v_2,v_3,v_4,v_6\\}$。切割量 $C_4 = C_3 - g_4 = 0-(-5)=5$。\n- **增益更新：** $G(v_4)=-3, G(v_6)=-2$。\n\n**第 5 步：**\n- **选择：** 最大增益为 $G(v_6)=-2$。\n- **移动：** 将 $v_6$ 从 $B''''$ 移动到 $A''''$。增益 $g_5=-2$。锁定 $v_6$。\n- **状态：** $A'''''=\\{v_5,v_6\\}$, $B'''''=\\{v_1,v_2,v_3,v_4\\}$。切割量 $C_5 = C_4 - g_5 = 5-(-2)=7$。\n- **增益更新：** $G(v_4)=0$。\n\n**第 6 步：**\n- **选择：** 只剩下 $v_4$ 未被锁定。\n- **移动：** 将 $v_4$ 从 $B'''''$ 移动到 $A'''''$。增益 $g_6=0$。锁定 $v_4$。\n- **状态：** $A''''''=\\{v_4,v_5,v_6\\}$, $B''''''=\\{v_1,v_2,v_3\\}$。切割量 $C_6 = C_5 - g_6 = 7-0=7$。\n\n### 4. 累积改进和最大改进\n\n移动 $k$ 次后的累积改进值，记为 $\\Delta_k$，是前 $k$ 次移动增益的总和。最大累积改进值是序列 $\\Delta_1, \\Delta_2, \\dots, \\Delta_6$ 中的最大值。\n\n移动序列、增益、更新后的切割量和累积改进值总结如下：\n\n| 步骤 $k$ | 移动的顶点 | 增益 $g_k$ | 切割量 $C_k$ | 累积改进值 $\\Delta_k = \\sum_{i=1}^k g_i$ |\n|:---:|:---:|:---:|:---:|:---:|\n| $0$ | - | - | $7$ | $0$ |\n| $1$ | $v_1$ | $2$ | $5$ | $2$ |\n| $2$ | $v_2$ | $2$ | $3$ | $2+2=4$ |\n| $3$ | $v_3$ | $3$ | $0$ | $4+3=7$ |\n| $4$ | $v_5$ | $-5$ | $5$ | $7-5=2$ |\n| $5$ | $v_6$ | $-2$ | $7$ | $2-2=0$ |\n| $6$ | $v_4$ | $0$ | $7$ | $0+0=0$ |\n\n每一步的累积切割量改进值分别为 $2, 4, 7, 2, 0, 0$。\n此序列中的最大值为 $7$。这是移动序列的任何前缀所实现的最大累积切割量改进值。该改进值对应于移动 3 次后的划分，其切割量为 $0$。",
            "answer": "$$\\boxed{7}$$"
        },
        {
            "introduction": "简单的二次布局虽然能有效优化线长，但其主要缺陷是会导致单元严重重叠。现代分析布局工具通过在目标函数中加入“密度惩罚项”来解决这一问题，从而促使单元散开。本练习  介绍了一种强大的密度管理技术——静电场类比法。该方法将单元密度过高的区域视为带电区域，通过求解泊松方程计算出一个排斥“电场”，从而产生将单元推开的力。通过这个实践，你将接触到实现这一先进思想所涉及的数值计算方法，并理解现代布局工具如何平衡线长和密度两个关键目标。",
            "id": "4282595",
            "problem": "在现代电子设计自动化 (EDA) 的解析布局中，密度校正是通过静电类比来执行的。在该类比中，单元密度误差被视为一种电荷分布，它会产生一个静电势，其负梯度产生对单元的排斥力。考虑一个在均匀 $2 \\times 2$ bin 网格上的离散公式，该网格覆盖一个具有周期性（环状）边界条件的单位正方形域。bin 中心由 $(x,y) \\in \\{0,1\\} \\times \\{0,1\\}$ 索引，均匀的 bin 间距为 $\\Delta = 1$。有 $4$ 个标准单元，每个单元的面积（电荷）为 $a = 1$，最初都位于 bin 中心 $(0,0)$。设每个 bin 的目标密度为实际密度的空间平均值。使用静电类比，将每个 bin 的密度误差 $\\rho(x,y)$ 定义为该 bin 的实际密度减去目标密度。在 $2 \\times 2$ 网格上的静电势 $\\psi(x,y)$ 由离散泊松方程\n$$\\nabla^{2} \\psi(x,y) = -\\rho(x,y),$$\n定义，并使用周期性边界和零均值规范来固定零空间。电场是负离散梯度，通过前向差分计算：\n$$E_{x}(x,y) = -\\frac{\\psi(x+1 \\bmod 2,\\,y) - \\psi(x,y)}{\\Delta}, \\quad E_{y}(x,y) = -\\frac{\\psi(x,y+1 \\bmod 2) - \\psi(x,y)}{\\Delta}.$$\n假设位于 $(x_{i},y_{i})$ 的每个单元 $i$ 上的力为 $F_{i} = q_{i}\\,E(x_{i},y_{i})$，其中 $q_{i} = a$。通过以下步骤计算一次密度校正迭代：\n- 根据给定的布局和目标密度构建 $\\rho(x,y)$，\n- 在周期性边界和零均值规范条件下求解离散泊松方程得到 $\\psi(x,y)$，\n- 通过前向差分计算 bin 中心的电场 $E(x,y)$，\n- 评估位于 $(0,0)$ 的 $4$ 个共置单元上的力 $F_{i}$。\n\n按此顺序提供四个 bin 的电势，然后是四个单元中每个单元的力分量：\n$$[\\psi_{00},\\,\\psi_{10},\\,\\psi_{01},\\,\\psi_{11},\\,F_{x,1},\\,F_{y,1},\\,F_{x,2},\\,F_{y,2},\\,F_{x,3},\\,F_{y,3},\\,F_{x,4},\\,F_{y,4}],$$\n其中 $\\psi_{xy} \\equiv \\psi(x,y)$。将您的数值答案四舍五入到四位有效数字。将电势和力表示为无量纲量（无物理单位）。",
            "solution": "该问题要求在解析布局的背景下，为单次密度校正迭代计算静电势和力。该过程涉及四个主要步骤：计算密度误差，求解离散泊松方程以获得电势，计算电场，最后确定作用在单元上的力。\n\n**步骤 1：计算密度和密度误差**\n\n系统由一个 $2 \\times 2$ 网格组成，总共有 $4$ 个 bin。有 $4$ 个单元，每个单元的面积（电荷）为 $a = 1$。总单元面积为 $4 \\times a = 4$。\n目标密度是实际密度的空间平均值。它在所有 bin 中是均匀的。\n$$\n\\text{Target Density} = \\frac{\\text{Total Area}}{\\text{Number of Bins}} = \\frac{4}{4} = 1 \\text{ per bin.}\n$$\n最初，所有 $4$ 个单元都位于 bin 中心 $(0,0)$。实际密度分布，记为 $d(x,y)$，是：\n- $d(0,0) = 4 \\times a = 4$\n- $d(1,0) = 0$\n- $d(0,1) = 0$\n- $d(1,1) = 0$\n\n密度误差 $\\rho(x,y)$ 是实际密度减去目标密度。令 $\\rho_{xy} \\equiv \\rho(x,y)$。\n- $\\rho_{00} = d(0,0) - 1 = 4 - 1 = 3$\n- $\\rho_{10} = d(1,0) - 1 = 0 - 1 = -1$\n- $\\rho_{01} = d(0,1) - 1 = 0 - 1 = -1$\n- $\\rho_{11} = d(1,1) - 1 = 0 - 1 = -1$\n\n注意，密度误差的总和为 $\\sum_{x,y} \\rho(x,y) = 3 - 1 - 1 - 1 = 0$，这是在具有周期性边界的域上求解泊松方程的必要条件。\n\n**步骤 2：求解离散泊松方程**\n\n静电势 $\\psi(x,y)$ 由离散泊松方程 $\\nabla^2 \\psi(x,y) = -\\rho(x,y)$ 控制。我们在间距为 $\\Delta$ 的网格上使用标准的 $5$ 点模板来计算离散拉普拉斯算子：\n$$\n\\nabla^2 \\psi(x,y) = \\frac{\\psi(x+\\Delta, y) + \\psi(x-\\Delta, y) + \\psi(x, y+\\Delta) + \\psi(x, y-\\Delta) - 4\\psi(x,y)}{\\Delta^2}\n$$\n给定 bin 间距 $\\Delta=1$ 和 bin 索引 $(x,y) \\in \\{0,1\\} \\times \\{0,1\\}$，并考虑到周期性边界条件（其中索引对 2 取模），每个 bin 处的拉普拉斯算子为：\n\\begin{align*}\n\\nabla^2\\psi_{00} &= \\psi_{10} + \\psi_{10} + \\psi_{01} + \\psi_{01} - 4\\psi_{00} = 2\\psi_{10} + 2\\psi_{01} - 4\\psi_{00} \\\\\n\\nabla^2\\psi_{10} &= \\psi_{00} + \\psi_{00} + \\psi_{11} + \\psi_{11} - 4\\psi_{10} = 2\\psi_{00} + 2\\psi_{11} - 4\\psi_{10} \\\\\n\\nabla^2\\psi_{01} &= \\psi_{11} + \\psi_{11} + \\psi_{00} + \\psi_{00} - 4\\psi_{01} = 2\\psi_{00} + 2\\psi_{11} - 4\\psi_{01} \\\\\n\\nabla^2\\psi_{11} &= \\psi_{01} + \\psi_{01} + \\psi_{10} + \\psi_{10} - 4\\psi_{11} = 2\\psi_{10} + 2\\psi_{01} - 4\\psi_{11}\n\\end{align*}\n其中 $\\psi_{xy} \\equiv \\psi(x,y)$。\n\n使用 $\\nabla^2\\psi_{xy} = -\\rho_{xy}$，我们得到一个由四个线性方程组成的方程组。为简化起见，除以 $2$：\n\\begin{align*}\n(1) \\quad -2\\psi_{00} + \\psi_{10} + \\psi_{01} &= -\\frac{3}{2} = -1.5 \\\\\n(2) \\quad \\psi_{00} - 2\\psi_{10} + \\psi_{11} &= \\frac{1}{2} = 0.5 \\\\\n(3) \\quad \\psi_{00} - 2\\psi_{01} + \\psi_{11} &= \\frac{1}{2} = 0.5 \\\\\n(4) \\quad \\psi_{10} + \\psi_{01} - 2\\psi_{11} &= \\frac{1}{2} = 0.5\n\\end{align*}\n该方程组是线性相关的。为了获得唯一解，我们强制执行零均值规范条件：\n$$\n(5) \\quad \\psi_{00} + \\psi_{10} + \\psi_{01} + \\psi_{11} = 0\n$$\n从问题设置的对称性（$\\rho_{10} = \\rho_{01}$）可以推断出 $\\psi_{10} = \\psi_{01}$。将方程 $(3)$ 从 $(2)$ 中减去证实了这一点：$(\\psi_{00} - 2\\psi_{10} + \\psi_{11}) - (\\psi_{00} - 2\\psi_{01} + \\psi_{11}) = 0.5 - 0.5$，简化为 $-2\\psi_{10} + 2\\psi_{01} = 0$，即 $\\psi_{10} = \\psi_{01}$。让我们将此公共值表示为 $\\psi_s$。\n\n方程组简化为关于三个未知数 $\\psi_{00}$、$\\psi_s$ 和 $\\psi_{11}$ 的三个方程：\n\\begin{align*}\n(1') \\quad -2\\psi_{00} + 2\\psi_s &= -1.5 \\implies -\\psi_{00} + \\psi_s = -0.75 \\\\\n(2') \\quad \\psi_{00} - 2\\psi_s + \\psi_{11} &= 0.5 \\\\\n(5') \\quad \\psi_{00} + 2\\psi_s + \\psi_{11} &= 0\n\\end{align*}\n从 $(1')$，我们得到 $\\psi_s = \\psi_{00} - 0.75$。\n将此代入 $(2')$：\n$\\psi_{00} - 2(\\psi_{00} - 0.75) + \\psi_{11} = 0.5 \\implies \\psi_{00} - 2\\psi_{00} + 1.5 + \\psi_{11} = 0.5 \\implies -\\psi_{00} + \\psi_{11} = -1.0$，所以 $\\psi_{11} = \\psi_{00} - 1.0$。\n现在将 $\\psi_s$ 和 $\\psi_{11}$ 都代入 $(5')$：\n$\\psi_{00} + 2(\\psi_{00} - 0.75) + (\\psi_{00} - 1.0) = 0$\n$\\psi_{00} + 2\\psi_{00} - 1.5 + \\psi_{00} - 1.0 = 0$\n$4\\psi_{00} - 2.5 = 0 \\implies 4\\psi_{00} = 2.5 \\implies \\psi_{00} = \\frac{2.5}{4} = 0.625$。\n\n使用这个结果，我们求出其他电势：\n$\\psi_s = \\psi_{00} - 0.75 = 0.625 - 0.75 = -0.125$。因此，$\\psi_{10} = \\psi_{01} = -0.125$。\n$\\psi_{11} = \\psi_{00} - 1.0 = 0.625 - 1.0 = -0.375$。\n\n四个 bin 的电势是：\n$\\psi_{00} = 0.625$，$\\psi_{10} = -0.125$，$\\psi_{01} = -0.125$，$\\psi_{11} = -0.375$。\n\n**步骤 3：计算电场**\n\n电场 $E(x,y)$ 是电势的负离散梯度。问题指定了前向差分格式。我们需要计算单元所在的 bin $(0,0)$ 处的电场。\n$$\nE_{x}(0,0) = -\\frac{\\psi(0+1 \\bmod 2, 0) - \\psi(0,0)}{\\Delta} = -\\frac{\\psi_{10} - \\psi_{00}}{1} = \\psi_{00} - \\psi_{10}\n$$\n$$\nE_{y}(0,0) = -\\frac{\\psi(0, 0+1 \\bmod 2) - \\psi(0,0)}{\\Delta} = -\\frac{\\psi_{01} - \\psi_{00}}{1} = \\psi_{00} - \\psi_{01}\n$$\n代入电势值：\n$E_{x}(0,0) = 0.625 - (-0.125) = 0.625 + 0.125 = 0.75$。\n$E_{y}(0,0) = 0.625 - (-0.125) = 0.625 + 0.125 = 0.75$。\n因此，$(0,0)$ 处的电场为 $E(0,0) = (0.75, 0.75)$。\n\n**步骤 4：计算力**\n\n每个单元 $i$ 上的力 $F_i$ 由 $F_i = q_i E(x_i, y_i)$ 给出。所有 $4$ 个单元都位于 $(x_i, y_i) = (0,0)$ 且电荷为 $q_i = a = 1$。因此，作用于四个单元中每一个的力是相同的：\n$$\nF_i = (1) \\times E(0,0) = (0.75, 0.75) \\quad \\text{for } i=1, 2, 3, 4.\n$$\n对于所有四个单元，分量为 $F_{x,i} = 0.75$ 和 $F_{y,i} = 0.75$。\n\n**最终答案的形成**\n\n要求的输出是向量 $[\\psi_{00},\\,\\psi_{10},\\,\\psi_{01},\\,\\psi_{11},\\,F_{x,1},\\,F_{y,1},\\,F_{x,2},\\,F_{y,2},\\,F_{x,3},\\,F_{y,3},\\,F_{x,4},\\,F_{y,4}]$。\n计算出的值为：\n- $\\psi_{00} = 0.625$\n- $\\psi_{10} = -0.125$\n- $\\psi_{01} = -0.125$\n- $\\psi_{11} = -0.375$\n- $F_{x,1}=F_{x,2}=F_{x,3}=F_{x,4} = 0.75$\n- $F_{y,1}=F_{y,2}=F_{y,3}=F_{y,4} = 0.75$\n\n将这些值四舍五入到四位有效数字得到：\n- $\\psi_{00} = 0.6250$\n- $\\psi_{10} = -0.1250$\n- $\\psi_{01} = -0.1250$\n- $\\psi_{11} = -0.3750$\n- 所有力的分量均为 $0.7500$。\n\n最终的 $12$ 个值的向量是：\n$[0.6250, -0.1250, -0.1250, -0.3750, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500]$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.6250 & -0.1250 & -0.1250 & -0.3750 & 0.7500 & 0.7500 & 0.7500 & 0.7500 & 0.7500 & 0.7500 & 0.7500 & 0.7500\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
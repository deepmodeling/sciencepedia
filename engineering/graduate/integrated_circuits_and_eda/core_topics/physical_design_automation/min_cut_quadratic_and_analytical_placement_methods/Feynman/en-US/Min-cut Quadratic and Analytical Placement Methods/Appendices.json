{
    "hands_on_practices": [
        {
            "introduction": "Placement can be viewed as a partitioning problem, where the goal is to divide a circuit's cells into spatial regions while minimizing connectivity between them. This exercise explores the classic Fiduccia-Mattheyses (FM) algorithm, an influential iterative heuristic designed for min-cut hypergraph partitioning. By manually executing one pass, you will gain a concrete understanding of its core mechanics, including the crucial concepts of gain calculation, move selection, and the use of a prefix of moves to achieve the best improvement. ",
            "id": "4282597",
            "problem": "Consider a hypergraph partitioning instance arising in Electronic Design Automation (EDA). The hypergraph has vertex set $\\{v_1, v_2, v_3, v_4, v_5, v_6\\}$ and hyperedge set $\\{e_1, e_2, e_3, e_4, e_5, e_6\\}$ with integer weights $w(e_i)$ as specified below. The initial bipartition is $A = \\{v_1, v_2, v_3\\}$ and $B = \\{v_4, v_5, v_6\\}$. All vertices have unit weight. The hyperedges are:\n- $e_1 = \\{v_1, v_4\\}$ with $w(e_1) = 2$,\n- $e_2 = \\{v_1, v_2, v_4\\}$ with $w(e_2) = 1$,\n- $e_3 = \\{v_2, v_3, v_5\\}$ with $w(e_3) = 2$,\n- $e_4 = \\{v_3, v_6\\}$ with $w(e_4) = 1$,\n- $e_5 = \\{v_4, v_5, v_6\\}$ with $w(e_5) = 3$,\n- $e_6 = \\{v_2, v_6\\}$ with $w(e_6) = 1$.\n\nThe cutsize of a bipartition is defined as the sum of weights of hyperedges that have at least one pin in $A$ and at least one pin in $B$. A single pass of the Fiducciaâ€“Mattheyses (FM) algorithm is performed as follows: iteratively select an unlocked vertex with maximum gain (the gain being the change in cutsize if that vertex is moved to the opposite block), move it, and lock it; break ties for equal gains by choosing the vertex with the smallest index. Continue until all vertices are locked. For this exercise, ignore balance constraints on block sizes throughout the pass.\n\nStarting strictly from the operational definition of cutsize and set membership, compute:\n1. The initial cutsize.\n2. The initial gain for each vertex based on moving it to the opposite block.\n3. The complete sequence of moves in one FM pass, showing at each step the selected vertex, its gain, and the updated cutsize.\n4. The cumulative cutsize improvement after each move, and the maximum cumulative improvement attained by any prefix of moves in the pass.\n\nYour final answer must be the single real-valued number equal to the maximum cumulative cutsize improvement achieved by the pass. No rounding is required. Express the final answer as a pure number without units.",
            "solution": "The problem is a valid exercise in applying the Fiduccia-Mattheyses (FM) algorithm to a hypergraph partitioning instance. All definitions are clear, the data is self-consistent, and the rules provided, including the tie-breaking condition, ensure a unique, deterministic sequence of operations. We will proceed with the solution by following the four specified computational steps.\n\nThe hypergraph is defined by the vertex set $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$ and the hyperedge set $E = \\{e_1, e_2, e_3, e_4, e_5, e_6\\}$. The initial bipartition is $A = \\{v_1, v_2, v_3\\}$ and $B = \\{v_4, v_5, v_6\\}$.\n\nThe hyperedges and their weights $w(e_i)$ are:\n- $e_1 = \\{v_1, v_4\\}$, $w(e_1) = 2$\n- $e_2 = \\{v_1, v_2, v_4\\}$, $w(e_2) = 1$\n- $e_3 = \\{v_2, v_3, v_5\\}$, $w(e_3) = 2$\n- $e_4 = \\{v_3, v_6\\}$, $w(e_4) = 1$\n- $e_5 = \\{v_4, v_5, v_6\\}$, $w(e_5) = 3$\n- $e_6 = \\{v_2, v_6\\}$, $w(e_6) = 1$\n\n### 1. Initial Cutsize Computation\n\nA hyperedge is cut if it has at least one vertex in partition $A$ and at least one vertex in partition $B$. We examine each hyperedge with respect to the initial partition $A = \\{v_1, v_2, v_3\\}$ and $B = \\{v_4, v_5, v_6\\}$.\n- $e_1 = \\{v_1, v_4\\}$: $v_1 \\in A$ and $v_4 \\in B$. It is cut.\n- $e_2 = \\{v_1, v_2, v_4\\}$: $\\{v_1, v_2\\} \\subset A$ and $v_4 \\in B$. It is cut.\n- $e_3 = \\{v_2, v_3, v_5\\}$: $\\{v_2, v_3\\} \\subset A$ and $v_5 \\in B$. It is cut.\n- $e_4 = \\{v_3, v_6\\}$: $v_3 \\in A$ and $v_6 \\in B$. It is cut.\n- $e_5 = \\{v_4, v_5, v_6\\}$: All vertices are in $B$. It is not cut.\n- $e_6 = \\{v_2, v_6\\}$: $v_2 \\in A$ and $v_6 \\in B$. It is cut.\n\nThe initial cutsize $C_0$ is the sum of the weights of the cut hyperedges:\n$$C_0 = w(e_1) + w(e_2) + w(e_3) + w(e_4) + w(e_6) = 2 + 1 + 2 + 1 + 1 = 7$$\n\n### 2. Initial Gain Computation\n\nThe gain $G(v)$ of moving a vertex $v$ is the reduction in cutsize. For a hyperedge $e$ containing $v$, moving $v$ from its current block $S_v$ to the other block $T_v$:\n- Increases the cutsize by $w(e)$ if $e \\subseteq S_v$ before the move (contribution to gain is $-w(e)$).\n- Decreases the cutsize by $w(e)$ if $v$ is the only vertex of $e$ in $S_v$ (contribution to gain is $+w(e)$).\n- Does not change the cut status otherwise (contribution to gain is $0$).\n\nLet's compute the initial gains for all vertices.\n**For vertices in A ($v \\in \\{v_1, v_2, v_3\\}$):**\n- $G(v_1)$: $v_1$ is in $e_1, e_2$. For $e_1=\\{v_1, v_4\\}$, $|e_1 \\cap A|=1$, so moving $v_1$ un-cuts $e_1$. Gain contribution is $+w(e_1)=+2$. For $e_2=\\{v_1, v_2, v_4\\}$, $|e_2 \\cap A|=2$, so moving $v_1$ does not change the cut status. Gain contribution is $0$. Total $G(v_1) = 2$.\n- $G(v_2)$: $v_2$ is in $e_2, e_3, e_6$. For $e_2=\\{v_1, v_2, v_4\\}$, $|e_2 \\cap A|=2$, gain contribution $0$. For $e_3=\\{v_2, v_3, v_5\\}$, $|e_3 \\cap A|=2$, gain contribution $0$. For $e_6=\\{v_2, v_6\\}$, $|e_6 \\cap A|=1$, gain contribution $+w(e_6)=+1$. Total $G(v_2) = 1$.\n- $G(v_3)$: $v_3$ is in $e_3, e_4$. For $e_3=\\{v_2, v_3, v_5\\}$, $|e_3 \\cap A|=2$, gain contribution $0$. For $e_4=\\{v_3, v_6\\}$, $|e_4 \\cap A|=1$, gain contribution $+w(e_4)=+1$. Total $G(v_3) = 1$.\n\n**For vertices in B ($v \\in \\{v_4, v_5, v_6\\}$):**\n- $G(v_4)$: $v_4$ is in $e_1, e_2, e_5$. For $e_1=\\{v_1, v_4\\}$, $|e_1 \\cap B|=1$, gain contribution $+w(e_1)=+2$. For $e_2=\\{v_1, v_2, v_4\\}$, $|e_2 \\cap B|=1$, gain contribution $+w(e_2)=+1$. For $e_5=\\{v_4, v_5, v_6\\}$, $e_5 \\subseteq B$, moving $v_4$ cuts $e_5$, gain contribution $-w(e_5)=-3$. Total $G(v_4) = 2+1-3=0$.\n- $G(v_5)$: $v_5$ is in $e_3, e_5$. For $e_3=\\{v_2, v_3, v_5\\}$, $|e_3 \\cap B|=1$, gain contribution $+w(e_3)=+2$. For $e_5=\\{v_4, v_5, v_6\\}$, $e_5 \\subseteq B$, gain contribution $-w(e_5)=-3$. Total $G(v_5) = 2-3=-1$.\n- $G(v_6)$: $v_6$ is in $e_4, e_5, e_6$. For $e_4=\\{v_3, v_6\\}$, $|e_4 \\cap B|=1$, gain contribution $+w(e_4)=+1$. For $e_5=\\{v_4, v_5, v_6\\}$, $e_5 \\subseteq B$, gain contribution $-w(e_5)=-3$. For $e_6=\\{v_2, v_6\\}$, $|e_6 \\cap B|=1$, gain contribution $+w(e_6)=+1$. Total $G(v_6) = 1-3+1=-1$.\n\nInitial Gains Summary: $G(v_1)=2, G(v_2)=1, G(v_3)=1, G(v_4)=0, G(v_5)=-1, G(v_6)=-1$.\n\n### 3. Complete Sequence of Moves in One FM Pass\n\nWe iteratively select the unlocked vertex with the highest gain (smallest index for ties), move it, lock it, and update gains.\n\n**Step 1:**\n- **Selection:** Maximum gain is $G(v_1)=2$.\n- **Move:** Move $v_1$ from $A$ to $B$. Gain $g_1=2$. Lock $v_1$.\n- **State:** $A'=\\{v_2,v_3\\}$, $B'=\\{v_1,v_4,v_5,v_6\\}$. Cutsize $C_1 = C_0 - g_1 = 7-2=5$.\n- **Gain Update:** $G(v_2)=2, G(v_3)=1, G(v_4)=-5, G(v_5)=-1, G(v_6)=-1$.\n\n**Step 2:**\n- **Selection:** Maximum gain among unlocked vertices is $G(v_2)=2$.\n- **Move:** Move $v_2$ from $A'$ to $B'$. Gain $g_2=2$. Lock $v_2$.\n- **State:** $A''=\\{v_3\\}$, $B''=\\{v_1,v_2,v_4,v_5,v_6\\}$. Cutsize $C_2 = C_1 - g_2 = 5-2=3$.\n- **Gain Update:** $G(v_3)=3, G(v_4)=-6, G(v_5)=-3, G(v_6)=-3$.\n\n**Step 3:**\n- **Selection:** Maximum gain is $G(v_3)=3$.\n- **Move:** Move $v_3$ from $A''$ to $B''$. Gain $g_3=3$. Lock $v_3$.\n- **State:** $A'''=\\emptyset$, $B'''=\\{v_1,v_2,v_3,v_4,v_5,v_6\\}$. Cutsize $C_3 = C_2 - g_3 = 3-3=0$.\n- **Gain Update:** $G(v_4)=-6, G(v_5)=-5, G(v_6)=-5$.\n\n**Step 4:**\n- **Selection:** Maximum gain is $-5$, achieved by both $v_5$ and $v_6$. Tie-break rule selects the vertex with the smallest index, so we choose $v_5$.\n- **Move:** Move $v_5$ from $B'''$ to $A'''$. Gain $g_4=-5$. Lock $v_5$.\n- **State:** $A''''=\\{v_5\\}$, $B''''=\\{v_1,v_2,v_3,v_4,v_6\\}$. Cutsize $C_4 = C_3 - g_4 = 0-(-5)=5$.\n- **Gain Update:** $G(v_4)=-3, G(v_6)=-2$.\n\n**Step 5:**\n- **Selection:** Maximum gain is $G(v_6)=-2$.\n- **Move:** Move $v_6$ from $B''''$ to $A''''$. Gain $g_5=-2$. Lock $v_6$.\n- **State:** $A'''''=\\{v_5,v_6\\}$, $B'''''=\\{v_1,v_2,v_3,v_4\\}$. Cutsize $C_5 = C_4 - g_5 = 5-(-2)=7$.\n- **Gain Update:** $G(v_4)=0$.\n\n**Step 6:**\n- **Selection:** Only $v_4$ is left unlocked.\n- **Move:** Move $v_4$ from $B'''''$ to $A'''''$. Gain $g_6=0$. Lock $v_4$.\n- **State:** $A''''''=\\{v_4,v_5,v_6\\}$, $B''''''=\\{v_1,v_2,v_3\\}$. Cutsize $C_6 = C_5 - g_6 = 7-0=7$.\n\n### 4. Cumulative Improvement and Maximum Improvement\n\nThe cumulative improvement after $k$ moves, denoted $\\Delta_k$, is the sum of the gains of the first $k$ moves. The maximum cumulative improvement is the maximum value in the sequence $\\Delta_1, \\Delta_2, \\dots, \\Delta_6$.\n\nThe sequence of moves, gains, updated cutsizes, and cumulative improvements is summarized below:\n\n| Step $k$ | Vertex Moved | Gain $g_k$ | Cutsize $C_k$ | Cumulative Improvement $\\Delta_k = \\sum_{i=1}^k g_i$ |\n|:---:|:---:|:---:|:---:|:---:|\n| $0$ | - | - | $7$ | $0$ |\n| $1$ | $v_1$ | $2$ | $5$ | $2$ |\n| $2$ | $v_2$ | $2$ | $3$ | $2+2=4$ |\n| $3$ | $v_3$ | $3$ | $0$ | $4+3=7$ |\n| $4$ | $v_5$ | $-5$ | $5$ | $7-5=2$ |\n| $5$ | $v_6$ | $-2$ | $7$ | $2-2=0$ |\n| $6$ | $v_4$ | $0$ | $7$ | $0+0=0$ |\n\nThe cumulative cutsize improvements at each step are $2, 4, 7, 2, 0, 0$.\nThe maximum value in this sequence is $7$. This is the maximum cumulative cutsize improvement achieved by any prefix of the move sequence. This improvement corresponds to the partition after $3$ moves, which has a cutsize of $0$.",
            "answer": "$$\\boxed{7}$$"
        },
        {
            "introduction": "Moving from discrete partitioning to a continuous optimization framework, quadratic placement models the netlist as a system of springs. The goal is to find the cell positions that minimize the total potential energy of the system, which elegantly translates to solving a system of linear equations. This fundamental exercise guides you through formulating the quadratic wirelength objective and deriving the corresponding linear system $Lx=b$, revealing the core principle that cells are placed at the \"center of gravity\" of their connections. ",
            "id": "4282571",
            "problem": "Consider an instance of analytical placement in Electronic Design Automation (EDA), where nets are modeled as linear springs and quadratic placement minimizes a convex energy derived from pairwise spring extensions. In one spatial dimension, let there be three movable standard cells with unknown horizontal coordinates $x_{1}$, $x_{2}$, and $x_{3}$ (in micrometers), and two fixed terminals with known coordinates. The interconnect topology is given by two nets:\n- Net $\\mathcal{N}_{1}$ connects the pins of movable cells $1$ and $2$ and a fixed terminal $f_{1}$ located at $x_{f_{1}}=0$.\n- Net $\\mathcal{N}_{2}$ connects the pins of movable cells $2$ and $3$ and a fixed terminal $f_{2}$ located at $x_{f_{2}}=12$.\n\nAssume a one-dimensional placement model along the $x$-axis. Use the following fundamental basis:\n- Springs model: Each pair of pins connected within a net contributes a spring with Hookean energy proportional to the squared difference of their $x$-coordinates. Specifically, under the clique expansion model for hyperedges, each net of cardinality $k$ is replaced by a complete graph on its $k$ pins, with unit spring constant $w=1$ on each pair.\n- The total quadratic energy is the sum of spring energies over all pairs. Minimization of this convex quadratic energy subject to fixed terminal positions yields linear normal equations of the form $L x = b$, where $L$ is a symmetric positive definite matrix when the netlist includes fixed terminals that connect to the movable cells.\n\nTasks:\n1. Starting from the described springs model and the clique expansion assumption, write the total quadratic energy $Q(x)$ in terms of $x_{1}$, $x_{2}$, $x_{3}$, $x_{f_{1}}$, and $x_{f_{2}}$ by summing contributions for all spring pairs induced by $\\mathcal{N}_{1}$ and $\\mathcal{N}_{2}$.\n2. Derive the linear system for the stationary point by setting the gradient of $Q(x)$ with respect to $(x_{1}, x_{2}, x_{3})$ equal to zero. Explicitly assemble the coefficient matrix $L$ and the right-hand side vector $b$.\n3. Solve $L x = b$ to obtain the optimal coordinates $(x_{1}, x_{2}, x_{3})$.\n4. Briefly interpret the resulting coordinates in physical terms based on the spring model.\n\nExpress the final positions in micrometers. The final answer must be the ordered triple $(x_{1}, x_{2}, x_{3})$. No rounding is required; report exact values.",
            "solution": "The problem is a valid instance of one-dimensional analytical placement, a standard topic in Electronic Design Automation (EDA). It is scientifically grounded, well-posed, and all necessary information is provided for a unique solution. We can proceed with the derivation.\n\nThe problem involves three movable cells with coordinates $x_1$, $x_2$, $x_3$ and two fixed terminals at $x_{f_1}=0$ and $x_{f_2}=12$. The connectivity is defined by two nets: $\\mathcal{N}_1 = \\{1, 2, f_1\\}$ and $\\mathcal{N}_2 = \\{2, 3, f_2\\}$.\n\n**1. Total Quadratic Energy $Q(x)$**\n\nThe energy is modeled using the clique expansion model, where each net of cardinality $k$ is decomposed into a complete graph of $\\binom{k}{2}$ edges. Each edge corresponds to a spring with energy $w(x_i-x_j)^2$, where the spring constant is given as $w=1$.\n\nFor net $\\mathcal{N}_1 = \\{1, 2, f_1\\}$, the cardinality is $k=3$. The clique expansion results in $\\binom{3}{2}=3$ pairs: $(1, 2)$, $(1, f_1)$, and $(2, f_1)$. The energy contribution from $\\mathcal{N}_1$, denoted $Q_1$, is the sum of the energies of these three springs:\n$$Q_1 = (x_1 - x_2)^2 + (x_1 - x_{f_1})^2 + (x_2 - x_{f_1})^2$$\n\nFor net $\\mathcal{N}_2 = \\{2, 3, f_2\\}$, the cardinality is also $k=3$. The clique expansion results in $\\binom{3}{2}=3$ pairs: $(2, 3)$, $(2, f_2)$, and $(3, f_2)$. The energy contribution from $\\mathcal{N}_2$, denoted $Q_2$, is:\n$$Q_2 = (x_2 - x_3)^2 + (x_2 - x_{f_2})^2 + (x_3 - x_{f_2})^2$$\n\nThe total quadratic energy $Q(x)$ is the sum of the energies from all nets, $Q(x) = Q_1 + Q_2$.\n$$Q(x_1, x_2, x_3) = (x_1 - x_2)^2 + (x_1 - x_{f_1})^2 + (x_2 - x_{f_1})^2 + (x_2 - x_3)^2 + (x_2 - x_{f_2})^2 + (x_3 - x_{f_2})^2$$\n\nSubstituting the given fixed terminal positions, $x_{f_1}=0$ and $x_{f_2}=12$:\n$$Q(x_1, x_2, x_3) = (x_1 - x_2)^2 + (x_1 - 0)^2 + (x_2 - 0)^2 + (x_2 - x_3)^2 + (x_2 - 12)^2 + (x_3 - 12)^2$$\n$$Q(x_1, x_2, x_3) = (x_1 - x_2)^2 + x_1^2 + x_2^2 + (x_2 - x_3)^2 + (x_2 - 12)^2 + (x_3 - 12)^2$$\n\n**2. Derivation of the Linear System $Lx = b$**\n\nTo find the optimal coordinates that minimize the energy $Q(x)$, we must find the stationary point where the gradient of $Q$ with respect to the vector of movable coordinates $x = (x_1, x_2, x_3)$ is zero. That is, $\\nabla Q = \\left(\\frac{\\partial Q}{\\partial x_1}, \\frac{\\partial Q}{\\partial x_2}, \\frac{\\partial Q}{\\partial x_3}\\right) = (0, 0, 0)$.\n\nWe compute the partial derivatives:\n\nFor $x_1$:\n$$\\frac{\\partial Q}{\\partial x_1} = \\frac{\\partial}{\\partial x_1} \\left[ (x_1 - x_2)^2 + x_1^2 \\right] = 2(x_1 - x_2)(1) + 2x_1 = 4x_1 - 2x_2$$\n\nFor $x_2$:\n$$\\frac{\\partial Q}{\\partial x_2} = \\frac{\\partial}{\\partial x_2} \\left[ (x_1 - x_2)^2 + x_2^2 + (x_2 - x_3)^2 + (x_2 - 12)^2 \\right]$$\n$$\\frac{\\partial Q}{\\partial x_2} = 2(x_1 - x_2)(-1) + 2x_2 + 2(x_2 - x_3)(1) + 2(x_2 - 12)(1)$$\n$$\\frac{\\partial Q}{\\partial x_2} = -2x_1 + 2x_2 + 2x_2 + 2x_2 - 2x_3 + 2x_2 - 24 = -2x_1 + 8x_2 - 2x_3 - 24$$\n\nFor $x_3$:\n$$\\frac{\\partial Q}{\\partial x_3} = \\frac{\\partial}{\\partial x_3} \\left[ (x_2 - x_3)^2 + (x_3 - 12)^2 \\right] = 2(x_2 - x_3)(-1) + 2(x_3 - 12)(1)$$\n$$\\frac{\\partial Q}{\\partial x_3} = -2x_2 + 2x_3 + 2x_3 - 24 = -2x_2 + 4x_3 - 24$$\n\nSetting these derivatives to zero gives the system of linear equations:\n$$4x_1 - 2x_2 = 0$$\n$$-2x_1 + 8x_2 - 2x_3 = 24$$\n$$-2x_2 + 4x_3 = 24$$\n\nThis system is of the form $L x = b$, where $x = \\begin{pmatrix} x_1 \\\\ x_2 \\\\ x_3 \\end{pmatrix}$. The coefficient matrix $L$ and the right-hand side vector $b$ are:\n$$L = \\begin{pmatrix} 4  -2  0 \\\\ -2  8  -2 \\\\ 0  -2  4 \\end{pmatrix}, \\quad b = \\begin{pmatrix} 0 \\\\ 24 \\\\ 24 \\end{pmatrix}$$\n\n**3. Solving the Linear System**\n\nWe solve the system of equations:\n1. $4x_1 - 2x_2 = 0$\n2. $-2x_1 + 8x_2 - 2x_3 = 24$\n3. $-2x_2 + 4x_3 = 24$\n\nFrom equation (1), we have $4x_1 = 2x_2$, which simplifies to $x_2 = 2x_1$.\n\nFrom equation (3), we can simplify by dividing by $2$ to get $-x_2 + 2x_3 = 12$, which gives $2x_3 = x_2 + 12$.\n\nNow, substitute $x_2 = 2x_1$ into the expression for $2x_3$:\n$2x_3 = (2x_1) + 12$, which implies $x_3 = x_1 + 6$.\n\nNext, we substitute both $x_2 = 2x_1$ and $x_3 = x_1 + 6$ into equation (2):\n$$-2x_1 + 8(2x_1) - 2(x_1 + 6) = 24$$\n$$-2x_1 + 16x_1 - 2x_1 - 12 = 24$$\n$$12x_1 = 36$$\n$$x_1 = 3$$\n\nNow we find $x_2$ and $x_3$ by back-substitution:\n$$x_2 = 2x_1 = 2(3) = 6$$\n$$x_3 = x_1 + 6 = 3 + 6 = 9$$\n\nThe optimal coordinates are $(x_1, x_2, x_3) = (3, 6, 9)$.\n\n**4. Physical Interpretation**\n\nThe stationary point equations can be interpreted as force-balance equations. For a given movable cell $i$, the optimal position $x_i$ is the weighted average of the positions of all other pins (movable or fixed) connected to it. Under the clique model with unit spring constants, the equation for cell $i$ is:\n$$(\\deg(i)) x_i - \\sum_{j \\sim i} x_j = \\sum_{f \\sim i} x_f$$\nwhere $\\deg(i)$ is the number of connections to cell $i$, $j \\sim i$ denotes movable cells adjacent to $i$, and $f \\sim i$ denotes fixed terminals adjacent to $i$.\n\nThis means $x_i = \\frac{1}{\\deg(i)} \\sum_{k \\sim i} x_k$, where the sum is over all neighbors of $i$.\n- **Cell 1**: is connected to cell $2$ and terminal $f_1$. Its degree is $2$. Thus, $x_1 = \\frac{x_2 + x_{f_1}}{2}$. Using the calculated values: $3 = \\frac{6+0}{2}$. This holds.\n- **Cell 2**: is connected to cells $1, 3$ and terminals $f_1, f_2$. Its degree is $4$. Thus, $x_2 = \\frac{x_1 + x_3 + x_{f_1} + x_{f_2}}{4}$. Using the calculated values: $6 = \\frac{3+9+0+12}{4} = \\frac{24}{4}$. This holds.\n- **Cell 3**: is connected to cell $2$ and terminal $f_2$. Its degree is $2$. Thus, $x_3 = \\frac{x_2 + x_{f_2}}{2}$. Using the calculated values: $9 = \\frac{6+12}{2}$. This holds.\n\nPhysically, each movable cell settles at the \"center of gravity\" of the components to which it is connected by springs. The solution $(x_1, x_2, x_3) = (3, 6, 9)$ places the movable cells at evenly spaced intervals between the fixed terminals at $0$ and $12$. The full arrangement is $x_{f_1}=0, x_1=3, x_2=6, x_3=9, x_{f_2}=12$. This perfect arithmetic progression arises from the symmetry in the connectivity.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n3  6  9\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "A key limitation of basic quadratic placement is that it ignores cell sizes, leading to significant overlap. Modern analytical placers address this by introducing density-driven forces to spread cells apart. This practice delves into a powerful technique that models this process using an electrostatic analogy, where dense cell clusters generate repulsive forces. By calculating the potential and forces on a discrete grid, you will simulate one iteration of density correction, a cornerstone of state-of-the-art placement algorithms. ",
            "id": "4282595",
            "problem": "In modern analytical placement for Electronic Design Automation (EDA), density correction is performed by an electrostatic analogy in which cell density error is treated as a charge distribution that generates an electrostatic potential whose negative gradient yields repulsive forces on cells. Consider a discrete formulation on a uniform $2 \\times 2$ bin grid covering a unit square domain with periodic (torus) boundary conditions. The bin centers are indexed by $(x,y) \\in \\{0,1\\} \\times \\{0,1\\}$ with uniform bin pitch $\\Delta = 1$. There are $4$ standard cells, each with area (charge) $a = 1$, initially colocated at the bin center $(0,0)$. Let the target density per bin be the spatial average of the actual density. Using the electrostatic analogy, define the binwise density error $\\rho(x,y)$ as the actual density minus the target density at each bin. The electrostatic potential $\\psi(x,y)$ on the $2 \\times 2$ grid is defined by the discrete Poisson equation\n$$\\nabla^{2} \\psi(x,y) = -\\rho(x,y),$$\nwith the periodic boundary and the zero-mean gauge to fix the null space. The electric field is the negative discrete gradient, computed by forward differences\n$$E_{x}(x,y) = -\\frac{\\psi(x+1 \\bmod 2,\\,y) - \\psi(x,y)}{\\Delta}, \\quad E_{y}(x,y) = -\\frac{\\psi(x,y+1 \\bmod 2) - \\psi(x,y)}{\\Delta}.$$\nAssume that the force on each cell $i$ located at $(x_{i},y_{i})$ is $F_{i} = q_{i}\\,E(x_{i},y_{i})$ with $q_{i} = a$. Compute one density-correction iteration by:\n- forming $\\rho(x,y)$ from the given placement and target density,\n- solving the discrete Poisson equation for $\\psi(x,y)$ subject to the periodic boundary and zero-mean gauge,\n- computing the electric field $E(x,y)$ at bin centers by forward difference,\n- evaluating the forces $F_{i}$ on the $4$ colocated cells at $(0,0)$.\n\nProvide, in this order, the four bin potentials followed by the force components for each of the four cells:\n$$[\\psi_{00},\\,\\psi_{10},\\,\\psi_{01},\\,\\psi_{11},\\,F_{x,1},\\,F_{y,1},\\,F_{x,2},\\,F_{y,2},\\,F_{x,3},\\,F_{y,3},\\,F_{x,4},\\,F_{y,4}],$$\nwhere $\\psi_{xy} \\equiv \\psi(x,y)$. Round your numerical answer to four significant figures. Express the potentials and forces as dimensionless quantities (no physical units).",
            "solution": "The problem requires the computation of electrostatic potentials and forces for a single density-correction iteration in an analytical placement context. The process involves four main steps: calculating the density error, solving the discrete Poisson equation for the potential, computing the electric field, and finally, determining the forces on the cells.\n\n**Step 1: Compute Density and Density Error**\n\nThe system consists of a $2 \\times 2$ grid, giving a total of $4$ bins. There are $4$ cells, each with area (charge) $a = 1$. The total cell area is $4 \\times a = 4$.\nThe target density is the spatial average of the actual density. It is uniform across all bins.\n$$\n\\text{Target Density} = \\frac{\\text{Total Area}}{\\text{Number of Bins}} = \\frac{4}{4} = 1 \\text{ per bin.}\n$$\nInitially, all $4$ cells are colocated at the bin center $(0,0)$. The actual density distribution, denoted $d(x,y)$, is:\n- $d(0,0) = 4 \\times a = 4$\n- $d(1,0) = 0$\n- $d(0,1) = 0$\n- $d(1,1) = 0$\n\nThe density error, $\\rho(x,y)$, is the actual density minus the target density. Let $\\rho_{xy} \\equiv \\rho(x,y)$.\n- $\\rho_{00} = d(0,0) - 1 = 4 - 1 = 3$\n- $\\rho_{10} = d(1,0) - 1 = 0 - 1 = -1$\n- $\\rho_{01} = d(0,1) - 1 = 0 - 1 = -1$\n- $\\rho_{11} = d(1,1) - 1 = 0 - 1 = -1$\n\nNote that the sum of density errors is $\\sum_{x,y} \\rho(x,y) = 3 - 1 - 1 - 1 = 0$, which is a necessary condition for solving the Poisson equation on a domain with periodic boundaries.\n\n**Step 2: Solve the Discrete Poisson Equation**\n\nThe electrostatic potential $\\psi(x,y)$ is governed by the discrete Poisson equation $\\nabla^2 \\psi(x,y) = -\\rho(x,y)$. We use the standard $5$-point stencil for the discrete Laplacian on a grid with pitch $\\Delta$:\n$$\n\\nabla^2 \\psi(x,y) = \\frac{\\psi(x+\\Delta, y) + \\psi(x-\\Delta, y) + \\psi(x, y+\\Delta) + \\psi(x, y-\\Delta) - 4\\psi(x,y)}{\\Delta^2}\n$$\nGiven the bin pitch $\\Delta=1$ and bin indices $(x,y) \\in \\{0,1\\} \\times \\{0,1\\}$, and accounting for periodic boundary conditions where indices are taken modulo $2$, the Laplacian at each bin is:\n\\begin{align*}\n\\nabla^2\\psi_{00} = \\psi_{10} + \\psi_{10} + \\psi_{01} + \\psi_{01} - 4\\psi_{00} = 2\\psi_{10} + 2\\psi_{01} - 4\\psi_{00} \\\\\n\\nabla^2\\psi_{10} = \\psi_{00} + \\psi_{00} + \\psi_{11} + \\psi_{11} - 4\\psi_{10} = 2\\psi_{00} + 2\\psi_{11} - 4\\psi_{10} \\\\\n\\nabla^2\\psi_{01} = \\psi_{11} + \\psi_{11} + \\psi_{00} + \\psi_{00} - 4\\psi_{01} = 2\\psi_{00} + 2\\psi_{11} - 4\\psi_{01} \\\\\n\\nabla^2\\psi_{11} = \\psi_{01} + \\psi_{01} + \\psi_{10} + \\psi_{10} - 4\\psi_{11} = 2\\psi_{10} + 2\\psi_{01} - 4\\psi_{11}\n\\end{align*}\nwhere $\\psi_{xy} \\equiv \\psi(x,y)$.\n\nUsing $\\nabla^2\\psi_{xy} = -\\rho_{xy}$, we obtain a system of four linear equations. Dividing by $2$ for simplicity:\n\\begin{align*}\n(1) \\quad -2\\psi_{00} + \\psi_{10} + \\psi_{01} = -\\frac{3}{2} = -1.5 \\\\\n(2) \\quad \\psi_{00} - 2\\psi_{10} + \\psi_{11} = \\frac{1}{2} = 0.5 \\\\\n(3) \\quad \\psi_{00} - 2\\psi_{01} + \\psi_{11} = \\frac{1}{2} = 0.5 \\\\\n(4) \\quad \\psi_{10} + \\psi_{01} - 2\\psi_{11} = \\frac{1}{2} = 0.5\n\\end{align*}\nThis system is linearly dependent. To obtain a unique solution, we enforce the zero-mean gauge condition:\n$$\n(5) \\quad \\psi_{00} + \\psi_{10} + \\psi_{01} + \\psi_{11} = 0\n$$\nFrom the symmetry of the problem setup ($\\rho_{10} = \\rho_{01}$), we can infer that $\\psi_{10} = \\psi_{01}$. Subtracting equation $(3)$ from $(2)$ confirms this: $(\\psi_{00} - 2\\psi_{10} + \\psi_{11}) - (\\psi_{00} - 2\\psi_{01} + \\psi_{11}) = 0.5 - 0.5$, which simplifies to $-2\\psi_{10} + 2\\psi_{01} = 0$, or $\\psi_{10} = \\psi_{01}$. Let's denote this common value as $\\psi_s$.\n\nThe system reduces to three equations for the three unknowns $\\psi_{00}$, $\\psi_s$, and $\\psi_{11}$:\n\\begin{align*}\n(1') \\quad -2\\psi_{00} + 2\\psi_s = -1.5 \\implies -\\psi_{00} + \\psi_s = -0.75 \\\\\n(2') \\quad \\psi_{00} - 2\\psi_s + \\psi_{11} = 0.5 \\\\\n(5') \\quad \\psi_{00} + 2\\psi_s + \\psi_{11} = 0\n\\end{align*}\nFrom $(1')$, we have $\\psi_s = \\psi_{00} - 0.75$.\nSubstitute this into $(2')$:\n$\\psi_{00} - 2(\\psi_{00} - 0.75) + \\psi_{11} = 0.5 \\implies \\psi_{00} - 2\\psi_{00} + 1.5 + \\psi_{11} = 0.5 \\implies -\\psi_{00} + \\psi_{11} = -1.0$, so $\\psi_{11} = \\psi_{00} - 1.0$.\nNow substitute both $\\psi_s$ and $\\psi_{11}$ into $(5')$:\n$\\psi_{00} + 2(\\psi_{00} - 0.75) + (\\psi_{00} - 1.0) = 0$\n$\\psi_{00} + 2\\psi_{00} - 1.5 + \\psi_{00} - 1.0 = 0$\n$4\\psi_{00} - 2.5 = 0 \\implies 4\\psi_{00} = 2.5 \\implies \\psi_{00} = \\frac{2.5}{4} = 0.625$.\n\nUsing this result, we find the other potentials:\n$\\psi_s = \\psi_{00} - 0.75 = 0.625 - 0.75 = -0.125$. Thus, $\\psi_{10} = \\psi_{01} = -0.125$.\n$\\psi_{11} = \\psi_{00} - 1.0 = 0.625 - 1.0 = -0.375$.\n\nThe four bin potentials are:\n$\\psi_{00} = 0.625$, $\\psi_{10} = -0.125$, $\\psi_{01} = -0.125$, $\\psi_{11} = -0.375$.\n\n**Step 3: Compute the Electric Field**\n\nThe electric field $E(x,y)$ is the negative discrete gradient of the potential. The problem specifies a forward-difference scheme. We need to evaluate the field at bin $(0,0)$, where the cells are located.\n$$\nE_{x}(0,0) = -\\frac{\\psi(0+1 \\bmod 2, 0) - \\psi(0,0)}{\\Delta} = -\\frac{\\psi_{10} - \\psi_{00}}{1} = \\psi_{00} - \\psi_{10}\n$$\n$$\nE_{y}(0,0) = -\\frac{\\psi(0, 0+1 \\bmod 2) - \\psi(0,0)}{\\Delta} = -\\frac{\\psi_{01} - \\psi_{00}}{1} = \\psi_{00} - \\psi_{01}\n$$\nSubstituting the potential values:\n$E_{x}(0,0) = 0.625 - (-0.125) = 0.625 + 0.125 = 0.75$.\n$E_{y}(0,0) = 0.625 - (-0.125) = 0.625 + 0.125 = 0.75$.\nSo, the electric field at $(0,0)$ is $E(0,0) = (0.75, 0.75)$.\n\n**Step 4: Compute the Forces**\n\nThe force $F_i$ on each cell $i$ is given by $F_i = q_i E(x_i, y_i)$.\nAll $4$ cells are located at $(x_i, y_i) = (0,0)$ and have charge $q_i = a = 1$. Therefore, the force on each of the four cells is identical:\n$$\nF_i = (1) \\times E(0,0) = (0.75, 0.75) \\quad \\text{for } i=1, 2, 3, 4.\n$$\nThe components are $F_{x,i} = 0.75$ and $F_{y,i} = 0.75$ for all four cells.\n\n**Final Answer Formulation**\n\nThe requested output is the vector $[\\psi_{00},\\,\\psi_{10},\\,\\psi_{01},\\,\\psi_{11},\\,F_{x,1},\\,F_{y,1},\\,F_{x,2},\\,F_{y,2},\\,F_{x,3},\\,F_{y,3},\\,F_{x,4},\\,F_{y,4}]$.\nThe computed values are:\n- $\\psi_{00} = 0.625$\n- $\\psi_{10} = -0.125$\n- $\\psi_{01} = -0.125$\n- $\\psi_{11} = -0.375$\n- $F_{x,1}=F_{x,2}=F_{x,3}=F_{x,4} = 0.75$\n- $F_{y,1}=F_{y,2}=F_{y,3}=F_{y,4} = 0.75$\n\nRounding these values to four significant figures gives:\n- $\\psi_{00} = 0.6250$\n- $\\psi_{10} = -0.1250$\n- $\\psi_{01} = -0.1250$\n- $\\psi_{11} = -0.3750$\n- All force components are $0.7500$.\n\nThe final vector of $12$ values is:\n$[0.6250, -0.1250, -0.1250, -0.3750, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500, 0.7500]$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.6250  -0.1250  -0.1250  -0.3750  0.7500  0.7500  0.7500  0.7500  0.7500  0.7500  0.7500  0.7500\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
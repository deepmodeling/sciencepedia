{
    "hands_on_practices": [
        {
            "introduction": "The line-probe algorithm offers a fast, heuristic-driven approach to global routing, prized for its speed in generating initial paths. To truly grasp its logic, this exercise  challenges you to manually execute a line-probe router on a grid with a defined obstacle. By tracing the path step-by-step, from selecting the primary axis to calculating the necessary detour, you will gain a concrete understanding of how this algorithm navigates and makes decisions in a constrained environment.",
            "id": "4274201",
            "problem": "Consider the context of Electronic Design Automation (EDA) global routing on a rectilinear grid graph. A grid graph is defined by vertices at integer lattice points with unit-weight edges connecting four-neighbor vertices. Obstacles are modeled by removing vertices from the grid. Assume a single routing layer and four-neighbor connectivity, and that paths must avoid obstacle vertices.\n\nLet the grid be the induced subgraph of integer lattice points with coordinates $(x,y)$ where $x,y \\in \\{0,1,2,\\dots,10\\}$. Define a rectangular obstacle $O$ that removes all vertices $(x,y)$ with $x \\in \\{4,5,6,7\\}$ and $y \\in \\{3,4,5,6\\}$. Let the source be $s=(2,4)$ and the target be $t=(9,4)$.\n\nYou will execute a line-probe routing algorithm on this grid. The line-probe algorithm is specified as follows, using only axis-aligned moves:\n\n1. Initialize the current vertex $c$ to $s$. Define the primary axis as the coordinate axis along which the absolute difference to $t$ is larger; in the event of equality, select the $x$-axis.\n2. Attempt to move along the primary axis in the direction that decreases the absolute difference to $t$ as long as the next vertex is neither outside the grid nor an obstacle vertex. This greedy extension continues until either $t$ is reached or the next step would enter an obstacle.\n3. If the next step along the primary axis would enter the obstacle $O$, compute the minimal perpendicular offset needed to clear $O$ in order to resume movement along the primary axis. More precisely, if the primary axis is the $x$-axis and the current vertex is $(x_{0},y_{0})$ with $x_{0}<x_{t}$, and the obstacleâ€™s vertical span is $[y_{\\min},y_{\\max}]$ with $y_{\\min} \\leq y_{0} \\leq y_{\\max}$ and its horizontal span includes $x_{0}+1$, then define $d_{\\text{down}} = y_{0} - (y_{\\min}-1), \\quad d_{\\text{up}} = (y_{\\max}+1) - y_{0}$. Choose the perpendicular direction with the smaller offset; in the event of equality, choose the direction with positive coordinate increase (i.e., up if equal for vertical moves). Take exactly that many unit steps in the chosen perpendicular direction to achieve clearance.\n4. After clearance, resume greedy movement along the primary axis toward $t$ until alignment with $t$ on that axis is achieved or another obstacle blocks progress. When aligned with $t$ on the primary axis, finish by moving along the secondary axis to reach $t$. If a blocking event occurs again, repeat step 3 with respect to the relevant obstacle.\n\nDefine the path length $L$ to be the number of unit edges in the path produced by the line-probe algorithm. Define the Manhattan distance $D_{0} = |x_{t}-x_{s}| + |y_{t}-y_{s}|$. Define the detour count $k$ by the relation $L = D_{0} + 2k$, which encodes the number of unit perpendicular offsets that are taken away from the direct Manhattan path and subsequently undone to rejoin the straight trajectory.\n\nTask: Execute the line-probe algorithm on the specified grid, obstacle, source, and target. Reconstruct the found path step by step, justify the clearance choice, compute the path length $L$, compute $D_{0}$, and determine the detour count $k$. Express the final detour count as an integer with no units. No rounding is required.",
            "solution": "The problem statement is evaluated to be valid as it is self-contained, scientifically grounded within the field of Electronic Design Automation (EDA), and unambiguously specifies all conditions required to determine a unique solution. We proceed with the execution of the specified line-probe algorithm.\n\nThe givens are:\n- Source vertex: $s = (2,4)$\n- Target vertex: $t = (9,4)$\n- Obstacle $O$: A set of removed vertices $(x,y)$ where $x \\in \\{4,5,6,7\\}$ and $y \\in \\{3,4,5,6\\}$.\n\nFirst, we calculate the Manhattan distance $D_0$ between the source and target vertices.\n$$D_{0} = |x_{t}-x_{s}| + |y_{t}-y_{s}| = |9-2| + |4-4| = 7 + 0 = 7$$\n\nNext, we execute the line-probe algorithm step by step.\n\n**Step 1: Initialization and Primary Axis Selection**\nThe algorithm starts at the current vertex $c = s = (2,4)$.\nWe determine the primary axis by comparing the absolute coordinate differences:\n- Difference in $x$: $\\Delta x = |x_t - x_s| = |9 - 2| = 7$.\n- Difference in $y$: $\\Delta y = |y_t - y_s| = |4 - 4| = 0$.\nSince $\\Delta x > \\Delta y$, the primary axis of movement is the $x$-axis.\n\n**Step 2: Greedy Movement along the Primary Axis**\nThe algorithm attempts to move from $c=(2,4)$ along the positive $x$-axis towards the target's $x$-coordinate, $x_t=9$.\nThe path begins with the segment $(2,4) \\to (3,4)$. The current vertex becomes $c=(3,4)$.\nFrom $c=(3,4)$, the next vertex along the primary axis would be $(4,4)$. We must check if $(4,4)$ is part of the obstacle $O$. The obstacle is defined for $x \\in \\{4,5,6,7\\}$ and $y \\in \\{3,4,5,6\\}$. Since $x=4$ and $y=4$ fall within these ranges, the vertex $(4,4)$ is an obstacle. The path is blocked at $c=(3,4)$.\n\n**Step 3: Obstacle Clearance**\nThe current vertex where the path is blocked is $(x_0, y_0) = (3,4)$. The primary axis is the $x$-axis, and the obstacle is encountered at $x_0+1=4$. The vertical span of the obstacle $O$ is from $y_{\\min}=3$ to $y_{\\max}=6$. The current $y$-coordinate $y_0=4$ is within this span, i.e., $y_{\\min} \\le y_0 \\le y_{\\max}$.\n\nWe calculate the perpendicular offsets required to clear the obstacle using the provided formulas:\n- The downward offset is $d_{\\text{down}} = y_{0} - (y_{\\min}-1) = 4 - (3-1) = 4 - 2 = 2$.\n- The upward offset is $d_{\\text{up}} = (y_{\\max}+1) - y_{0} = (6+1) - 4 = 7 - 4 = 3$.\n\nThe algorithm chooses the direction with the smaller offset. Since $d_{\\text{down}} = 2  d_{\\text{up}} = 3$, the chosen direction is downward. The path must be displaced by $2$ units in the negative $y$-direction. This generates the path segment $(3,4) \\to (3,3) \\to (3,2)$. The new current vertex is $c=(3,2)$.\n\n**Step 4: Resumption of Greedy Movement**\nThe current vertex is now $c=(3,2)$. The path is now at a y-coordinate ($y=2$) that is not within the obstacle's vertical span of $[3,6]$, so it is clear. The algorithm resumes greedy movement along the primary ($x$) axis.\nThe path extends from $(3,2)$ towards the target's $x$-coordinate, $x_t=9$. This creates the path segment from $(3,2)$ to $(9,2)$. The path taken is $(3,2) \\to (4,2) \\to (5,2) \\to (6,2) \\to (7,2) \\to (8,2) \\to (9,2)$.\nThe current vertex is now $c=(9,2)$. This vertex is aligned with the target $t=(9,4)$ on the primary axis.\n\nThe algorithm now switches to the secondary ($y$) axis to complete the path. It moves from $(9,2)$ to the target's $y$-coordinate, $y_t=4$. This creates the final path segment $(9,2) \\to (9,3) \\to (9,4)$. The target $t=(9,4)$ has been reached.\n\n**Path Length and Detour Count Calculation**\nWe compute the total path length $L$ by summing the lengths of the individual segments:\n1.  Initial propagation: $(2,4) \\to (3,4)$. Length = $1$.\n2.  Perpendicular detour: $(3,4) \\to (3,2)$. Length = $|2-4| = 2$.\n3.  Propagation past obstacle: $(3,2) \\to (9,2)$. Length = $|9-3| = 6$.\n4.  Final alignment: $(9,2) \\to (9,4)$. Length = $|4-2| = 2$.\n\nThe total path length is $L = 1 + 2 + 6 + 2 = 11$.\n\nFinally, we determine the detour count $k$ using the given relation $L = D_0 + 2k$.\nSubstituting the calculated values $L=11$ and $D_0=7$:\n$$11 = 7 + 2k$$\nSolving for $k$:\n$$2k = 11 - 7 = 4$$\n$$k = 2$$\nThe detour count $k$ is $2$. This value represents the magnitude of the perpendicular displacement ($2$ units) required to navigate around the obstacle. The path length is the Manhattan distance plus twice this displacement, accounting for moving away from and back to the optimal path line.",
            "answer": "$$\\boxed{2}$$"
        },
        {
            "introduction": "While line-probes are fast, maze routers like those based on Dijkstra's algorithm offer optimality by carefully evaluating path costs. The power of a maze router lies in its flexible cost function, which must balance competing objectives such as path length (weighted by $\\alpha$), congestion ($\\beta$), and via usage ($\\gamma$). This practice  explores the critical trade-offs involved by asking you to determine the optimal path under different cost-weighting schemes, revealing how a router's \"decision-making\" is highly sensitive to these parameters.",
            "id": "4274165",
            "problem": "Consider a Global Routing Graph (GRG) for Electronic Design Automation (EDA) modeled as a uniform $4\\times 4$ grid with two routing layers $L_1$ and $L_2$. A net must be routed from source $s=(1,1)$ on $L_1$ to sink $t=(4,4)$ on $L_1$. Each unit horizontal or vertical step on either layer has a baseline length cost weighted by $\\alpha$. On $L_1$, two specific edges are congested, each carrying a congestion penalty that is weighted by $\\beta$; the congested edges are the grid edges connecting $(2,2)$ to $(2,3)$ and $(2,2)$ to $(3,2)$, and each congested edge contributes a penalty $p_e=3$. All other edges on $L_1$ have $p_e=0$. On $L_2$, assume $p_e=0$ for all edges. A via, which changes the routing layer from $L_1$ to $L_2$ or vice versa, incurs a via cost weighted by $\\gamma$ per via.\n\nFor a path $P$, define its total cost as\n$$\nC(P) \\;=\\; \\alpha \\cdot \\text{steps}(P) \\;+\\; \\beta \\cdot \\sum_{e\\in P} p_e \\;+\\; \\gamma \\cdot \\text{vias}(P),\n$$\nwhere $\\text{steps}(P)$ is the total number of unit edges traversed and $\\text{vias}(P)$ is the total number of layer transitions.\n\nConsider three canonical candidate routes:\n- Path $P_1$: a Manhattan-minimal route entirely on $L_1$ with $\\text{steps}(P_1)=6$, traversing both congested edges so that $\\sum_{e\\in P_1} p_e = 3+3=6$, and $\\text{vias}(P_1)=0$.\n- Path $P_2$: a detour entirely on $L_1$ that avoids the congested edges with $\\text{steps}(P_2)=8$, $\\sum_{e\\in P_2} p_e=0$, and $\\text{vias}(P_2)=0$.\n- Path $P_3$: a Manhattan-minimal route that transitions to $L_2$ before entering the congested region and returns to $L_1$ near the sink, with $\\text{steps}(P_3)=6$, $\\sum_{e\\in P_3} p_e=0$, and $\\text{vias}(P_3)=2$.\n\nAn optimal maze router that solves weighted shortest paths will select the path $P$ that minimizes $C(P)$ for the given $(\\alpha,\\beta,\\gamma)$. Consider the following three weighting vectors:\n- $\\mathbf{w}_a$: $(\\alpha,\\beta,\\gamma)=(1,0.6,0.7)$,\n- $\\mathbf{w}_b$: $(\\alpha,\\beta,\\gamma)=(1,2,5)$,\n- $\\mathbf{w}_c$: $(\\alpha,\\beta,\\gamma)=(1,0.1,3)$.\n\nWhich option correctly identifies the selected path for each weighting vector, and thereby illustrates the sensitivity of path selection to $(\\alpha,\\beta,\\gamma)$?\n\nA. Under $\\mathbf{w}_a$ the selected path is $P_3$, under $\\mathbf{w}_b$ the selected path is $P_2$, and under $\\mathbf{w}_c$ the selected path is $P_1$.\n\nB. Under $\\mathbf{w}_a$ the selected path is $P_2$, under $\\mathbf{w}_b$ the selected path is $P_3$, and under $\\mathbf{w}_c$ the selected path is $P_1$.\n\nC. Under $\\mathbf{w}_a$ the selected path is $P_1$, under $\\mathbf{w}_b$ the selected path is $P_2$, and under $\\mathbf{w}_c$ the selected path is $P_3$.\n\nD. Under $\\mathbf{w}_a$ the selected path is $P_3$, under $\\mathbf{w}_b$ the selected path is $P_1$, and under $\\mathbf{w}_c$ the selected path is $P_2$.",
            "solution": "The user has provided a problem in the domain of Electronic Design Automation (EDA), specifically concerning global routing algorithms. The task is to validate the problem statement and, if valid, determine the optimal routing path among three given candidates for three different sets of cost weights.\n\n### Problem Validation\n\nFirst, I will validate the problem statement according to the specified criteria.\n\n**Step 1: Extract Givens**\n\n-   **Routing Grid:** A uniform $4\\times 4$ grid with two routing layers, $L_1$ and $L_2$.\n-   **Net:** Source $s=(1,1)$ on $L_1$ to sink $t=(4,4)$ on $L_1$.\n-   **Cost Function:** The total cost for a path $P$ is given by $C(P) = \\alpha \\cdot \\text{steps}(P) + \\beta \\cdot \\sum_{e\\in P} p_e + \\gamma \\cdot \\text{vias}(P)$.\n-   **Cost Components:**\n    -   $\\text{steps}(P)$: Total number of unit edges traversed. The cost per step is weighted by $\\alpha$.\n    -   $\\sum_{e\\in P} p_e$: Sum of congestion penalties over edges in the path. The total penalty is weighted by $\\beta$.\n    -   $\\text{vias}(P)$: Total number of layer transitions (vias). The cost per via is weighted by $\\gamma$.\n-   **Congestion Data:**\n    -   On $L_1$, edges from $(2,2)$ to $(2,3)$ and from $(2,2)$ to $(3,2)$ are congested.\n    -   For each congested edge, the penalty is $p_e=3$.\n    -   For all other edges on $L_1$ and all edges on $L_2$, $p_e=0$.\n-   **Candidate Paths:**\n    -   **$P_1$**: A Manhattan-minimal path on $L_1$.\n        -   $\\text{steps}(P_1)=6$\n        -   $\\sum_{e\\in P_1} p_e = 3+3=6$\n        -   $\\text{vias}(P_1)=0$\n    -   **$P_2$**: A detour path on $L_1$.\n        -   $\\text{steps}(P_2)=8$\n        -   $\\sum_{e\\in P_2} p_e=0$\n        -   $\\text{vias}(P_2)=0$\n    -   **$P_3$**: A Manhattan-minimal path using a layer change.\n        -   $\\text{steps}(P_3)=6$\n        -   $\\sum_{e\\in P_3} p_e=0$\n        -   $\\text{vias}(P_3)=2$\n-   **Weighting Vectors:**\n    -   $\\mathbf{w}_a$: $(\\alpha,\\beta,\\gamma)=(1,0.6,0.7)$\n    -   $\\mathbf{w}_b$: $(\\alpha,\\beta,\\gamma)=(1,2,5)$\n    -   $\\mathbf{w}_c$: $(\\alpha,\\beta,\\gamma)=(1,0.1,3)$\n\n**Step 2: Validate Using Extracted Givens**\n\n-   **Scientifically Grounded:** The problem is firmly grounded in the principles of global routing for VLSI circuits. The cost function is a standard, simplified model used by maze routers (like Lee's algorithm or A* search) to find shortest paths while balancing wire length, congestion, and via usage. The concept of a global routing graph (GRG), congestion penalties, and via costs are all standard in the field of EDA. The Manhattan distance from $s=(1,1)$ to $t=(4,4)$ is $|4-1| + |4-1| = 3+3=6$, which correctly validates that paths with $\\text{steps}(P)=6$ are Manhattan-minimal. The properties listed for each canonical path ($P_1, P_2, P_3$) are consistent with their descriptions.\n-   **Well-Posed:** The problem provides a clear objective: find the path with the minimum cost among the three candidates for three distinct sets of weights. All necessary data to perform this calculation are given. The problem is not to find the absolute optimal path on the entire grid, but to compare three specific, well-defined candidates, which makes it a straightforward and well-posed evaluation task.\n-   **Objective:** The problem statement is written in precise, quantitative, and unambiguous language. All terms are defined, and the task is purely computational.\n\nThe problem statement has no scientific, factual, or logical flaws. It is complete, consistent, and well-structured.\n\n**Step 3: Verdict and Action**\n\nThe problem statement is **valid**. I will proceed with the solution.\n\n### Derivation of the Solution\n\nThe core of the problem is to calculate the total cost, $C(P)$, for each of the three paths ($P_1$, $P_2$, $P_3$) under each of the three weighting vectors ($\\mathbf{w}_a$, $\\mathbf{w}_b$, $\\mathbf{w}_c$) and identify the minimum-cost path in each case.\n\nThe cost function is:\n$$\nC(P) = \\alpha \\cdot \\text{steps}(P) + \\beta \\cdot \\sum_{e\\in P} p_e + \\gamma \\cdot \\text{vias}(P)\n$$\n\nThe path characteristics are:\n-   $P_1$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (6, 6, 0)$\n-   $P_2$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (8, 0, 0)$\n-   $P_3$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (6, 0, 2)$\n\nLet us calculate the costs for each case.\n\n**Case 1: Weighting vector $\\mathbf{w}_a: (\\alpha,\\beta,\\gamma)=(1, 0.6, 0.7)$**\n\n-   Cost of $P_1$: $C(P_1) = (1)(6) + (0.6)(6) + (0.7)(0) = 6 + 3.6 + 0 = 9.6$\n-   Cost of $P_2$: $C(P_2) = (1)(8) + (0.6)(0) + (0.7)(0) = 8 + 0 + 0 = 8.0$\n-   Cost of $P_3$: $C(P_3) = (1)(6) + (0.6)(0) + (0.7)(2) = 6 + 0 + 1.4 = 7.4$\n\nComparing the costs: $C(P_3)  C(P_2)  C(P_1)$. The minimum cost is $7.4$, corresponding to path $P_3$.\nUnder $\\mathbf{w}_a$, the selected path is $P_3$. This shows that with a moderate congestion penalty and a low via cost, it is optimal to use vias to bypass the congestion while maintaining minimal path length.\n\n**Case 2: Weighting vector $\\mathbf{w}_b: (\\alpha,\\beta,\\gamma)=(1, 2, 5)$**\n\n-   Cost of $P_1$: $C(P_1) = (1)(6) + (2)(6) + (5)(0) = 6 + 12 + 0 = 18$\n-   Cost of $P_2$: $C(P_2) = (1)(8) + (2)(0) + (5)(0) = 8 + 0 + 0 = 8.0$\n-   Cost of $P_3$: $C(P_3) = (1)(6) + (2)(0) + (5)(2) = 6 + 0 + 10 = 16$\n\nComparing the costs: $C(P_2)  C(P_3)  C(P_1)$. The minimum cost is $8.0$, corresponding to path $P_2$.\nUnder $\\mathbf{w}_b$, the selected path is $P_2$. This demonstrates that when both congestion and via costs are high, it is best to take a longer path (a detour) to avoid both penalties.\n\n**Case 3: Weighting vector $\\mathbf{w}_c: (\\alpha,\\beta,\\gamma)=(1, 0.1, 3)$**\n\n-   Cost of $P_1$: $C(P_1) = (1)(6) + (0.1)(6) + (3)(0) = 6 + 0.6 + 0 = 6.6$\n-   Cost of $P_2$: $C(P_2) = (1)(8) + (0.1)(0) + (3)(0) = 8 + 0 + 0 = 8.0$\n-   Cost of $P_3$: $C(P_3) = (1)(6) + (0.1)(0) + (3)(2) = 6 + 0 + 6 = 12.0$\n\nComparing the costs: $C(P_1)  C(P_2)  C(P_3)$. The minimum cost is $6.6$, corresponding to path $P_1$.\nUnder $\\mathbf{w}_c$, the selected path is $P_1$. This scenario, with a very low congestion penalty and a high via cost, makes it optimal to traverse the congested region on the shortest path, as the penalty is negligible compared to the cost of a detour or using vias.\n\n**Summary of Results:**\n-   For $\\mathbf{w}_a$, the optimal path is $P_3$.\n-   For $\\mathbf{w}_b$, the optimal path is $P_2$.\n-   For $\\mathbf{w}_c$, the optimal path is $P_1$.\n\n### Option-by-Option Analysis\n\nNow I will evaluate each of the given options against my derived results.\n\n**A. Under $\\mathbf{w}_a$ the selected path is $P_3$, under $\\mathbf{w}_b$ the selected path is $P_2$, and under $\\mathbf{w}_c$ the selected path is $P_1$.**\n-   The statement for $\\mathbf{w}_a$ is that $P_3$ is selected. My calculation gives $P_3$. This is correct.\n-   The statement for $\\mathbf{w}_b$ is that $P_2$ is selected. My calculation gives $P_2$. This is correct.\n-   The statement for $\\mathbf{w}_c$ is that $P_1$ is selected. My calculation gives $P_1$. This is correct.\nAll three parts of this option are consistent with the derived results.\nVerdict: **Correct**.\n\n**B. Under $\\mathbf{w}_a$ the selected path is $P_2$, under $\\mathbf{w}_b$ the selected path is $P_3$, and under $\\mathbf{w}_c$ the selected path is $P_1$.**\n-   The statement for $\\mathbf{w}_a$ is that $P_2$ is selected. This contradicts my result that $P_3$ is selected.\nVerdict: **Incorrect**.\n\n**C. Under $\\mathbf{w}_a$ the selected path is $P_1$, under $\\mathbf{w}_b$ the selected path is $P_2$, and under $\\mathbf{w}_c$ the selected path is $P_3$.**\n-   The statement for $\\mathbf{w}_a$ is that $P_1$ is selected. This contradicts my result that $P_3$ is selected.\nVerdict: **Incorrect**.\n\n**D. Under $\\mathbf{w}_a$ the selected path is $P_3$, under $\\mathbf{w}_b$ the selected path is $P_1$, and under $\\mathbf{w}_c$ the selected path is $P_2$.**\n-   The statement for $\\mathbf{w}_b$ is that $P_1$ is selected. This contradicts my result that $P_2$ is selected.\nVerdict: **Incorrect**.\n\nThe only option that correctly describes the path selection for all three weighting vectors is A.",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "Global routing is often an iterative process where an initial solution is progressively refined to meet design constraints. This exercise  simulates a fundamental optimization technique known as \"rip-up and reroute,\" where a poorly routed net is removed and a new path is found to alleviate congestion. You will first quantify the routing quality by calculating the total overflow, then identify a superior path for a single net that eliminates congestion, demonstrating a practical step toward achieving a valid final routing solution.",
            "id": "4274190",
            "problem": "Consider Electronic Design Automation (EDA) global routing on a rectilinear grid. Model the routing region as a grid graph $G=(V,E)$ whose vertices $V$ are the integer lattice points $(x,y)$ with $x,y \\in \\{0,1,2,3\\}$ and whose undirected edges $E$ connect unit-Manhattan neighbors (horizontal and vertical adjacencies only). Each edge $e \\in E$ has capacity $c(e)=1$. There are three two-pin nets $N_1$, $N_2$, and $N_3$ with the following source-sink pairs:\n- $N_1$: $(0,1)$ to $(3,1)$,\n- $N_2$: $(1,0)$ to $(1,3)$,\n- $N_3$: $(0,1)$ to $(3,0)$.\nAssume an initial assignment produced by the line-probe method: $N_1$ is routed horizontally along the row $y=1$ from $x=0$ to $x=3$, $N_2$ is routed vertically along the column $x=1$ from $y=0$ to $y=3$, and $N_3$ is routed horizontally along the row $y=1$ from $x=0$ to $x=3$ and then vertically along the column $x=3$ from $y=1$ down to $y=0$. The assigned demand $d(e)$ on an edge $e$ is defined as the number of nets whose assigned path uses $e$. The total overflow is defined as\n$$\\text{OF} \\;=\\; \\sum_{e \\in E} \\max\\!\\big(0,\\, d(e) - c(e)\\big).$$\nIn maze routing, a breadth-first search (BFS) or Dijkstra-style search on $G$ is performed with an edge cost model that penalizes predicted congestion. For this problem, use the edge cost\n$$w(e) \\;=\\; 1 \\;+\\; \\lambda \\cdot \\max\\!\\big(0,\\, d(e) + 1 - c(e)\\big),$$\nwhere $\\lambda0$ is a congestion penalty and the $+1$ in $d(e)+1$ reflects the incremental demand of the net currently being rerouted.\n\nTasks:\n- Using the initial line-probe assignment, compute the total overflow $\\text{OF}$ and identify the edges with the largest positive values of $d(e)-c(e)$.\n- Subject to the constraint that exactly one net may be rerouted and its Manhattan length must not exceed its initial Manhattan length, choose a rerouting target and a maze-found path that reduces $\\text{OF}$ by at least $1$ unit.\n- Under the above constraint and cost model, determine the minimal achievable total overflow after rerouting exactly one net. Express your final answer as an exact integer.",
            "solution": "The problem asks for the minimal achievable total overflow on a routing grid by rerouting a single net, subject to certain constraints. First, the problem is validated for correctness and completeness.\n\n### Step 1: Extract Givens\n- **Grid Graph**: $G=(V,E)$ where $V = \\{(x,y) | x,y \\in \\{0, 1, 2, 3\\}\\}$. Edges in $E$ connect vertices with a Manhattan distance of $1$.\n- **Edge Capacity**: $c(e) = 1$ for all edges $e \\in E$.\n- **Nets**:\n  - $N_1$: source $s_1=(0,1)$, sink $t_1=(3,1)$.\n  - $N_2$: source $s_2=(1,0)$, sink $t_2=(1,3)$.\n  - $N_3$: source $s_3=(0,1)$, sink $t_3=(3,0)$.\n- **Initial Routing Paths**:\n  - $P_1$: For $N_1$, horizontal path along $y=1$. Edges are $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$.\n  - $P_2$: For $N_2$, vertical path along $x=1$. Edges are $\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$.\n  - $P_3$: For $N_3$, L-shaped path. Edges are $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1)), ((3,1),(3,0))\\}$.\n- **Demand and Overflow**:\n  - Demand $d(e)$ is the number of net paths traversing edge $e$.\n  - Total overflow $\\text{OF} = \\sum_{e \\in E} \\max(0, d(e) - c(e))$.\n- **Rerouting Cost Model**:\n  - For maze routing, edge cost is $w(e) = 1 + \\lambda \\cdot \\max(0, d(e) + 1 - c(e))$, with $\\lambda  0$. Here, $d(e)$ is the demand *before* routing the current net.\n- **Rerouting Constraints**:\n  - Exactly one net is to be rerouted.\n  - The length of the new path must not exceed the length of the net's initial path.\n\n### Step 2: Validate Using Extracted Givens\nThe problem statement is well-defined, internally consistent, and scientifically grounded within the field of Electronic Design Automation (EDA), specifically global routing algorithms. It provides a clear setup with a grid, nets, initial conditions, and objective functions. The concepts of maze routing, line-probe routing, overflow, and congestion-based cost functions are standard in this domain. The problem is objective and requires a quantitative answer based on the provided data. There are no contradictions, ambiguities, or missing information. The problem is valid.\n\n### Step 3: Solution\n\n#### Task 1: Initial Overflow Calculation\nWe first calculate the initial demand $d(e)$ for every edge $e$ based on the given paths for nets $N_1$, $N_2$, and $N_3$. The edge capacity is $c(e)=1$ for all $e$.\n\n1.  **Demand on horizontal edges along $y=1$**:\n    - The edge $((0,1),(1,1))$ is used by $N_1$ and $N_3$. So, $d((0,1),(1,1))) = 2$.\n    - The edge $((1,1),(2,1))$ is used by $N_1$ and $N_3$. So, $d((1,1),(2,1))) = 2$.\n    - The edge $((2,1),(3,1))$ is used by $N_1$ and $N_3$. So, $d((2,1),(3,1))) = 2$.\n\n2.  **Demand on vertical edges along $x=1$**:\n    - The edges $((1,0),(1,1))$, $((1,1),(1,2))$, and $((1,2),(1,3))$ are used only by $N_2$. Their demand is $1$.\n\n3.  **Demand on other edges**:\n    - The edge $((3,1),(3,0))$ is used only by $N_3$. Its demand is $1$.\n    - All other edges in the grid are unused, so their demand is $0$.\n\nThe overflow on an edge $e$ is $\\max(0, d(e) - c(e))$.\n- For the three edges on the path segment from $(0,1)$ to $(3,1)$: $d(e)=2$, so overflow is $\\max(0, 2-1) = 1$.\n- For all other used edges, $d(e)=1$, so overflow is $\\max(0, 1-1) = 0$.\n- For all unused edges, $d(e)=0$, so overflow is $\\max(0, 0-1) = 0$.\n\nThe total overflow is the sum of overflows over all edges:\n$$ \\text{OF}_{\\text{initial}} = (2-1) + (2-1) + (2-1) = 1+1+1=3. $$\nThe edges with the largest positive overflow ($d(e)-c(e)=1$) are $((0,1),(1,1))$, $((1,1),(2,1))$, and $((2,1),(3,1))$.\n\n#### Task 2: Rerouting Analysis\nWe must reroute exactly one net. The new path's length must not exceed the initial path's length.\n\n- **Net $N_1$**: Source $(0,1)$, Sink $(3,1)$.\n  - Manhattan distance: $|3-0| + |1-1| = 3$.\n  - Initial path length: $3$ horizontal steps. Length is $3$.\n  - Any new path must have length at most $3$. Since the shortest possible path length is the Manhattan distance of $3$, any new path must be a shortest path of length $3$. A path from $(0,1)$ to $(3,1)$ of length $3$ requires $3$ 'Right' steps and $0$ 'Up'/'Down'/'Left' steps. The only such path is the initial one. Thus, $N_1$ cannot be rerouted.\n\n- **Net $N_2$**: Source $(1,0)$, Sink $(1,3)$.\n  - Manhattan distance: $|1-1| + |3-0| = 3$.\n  - Initial path length: $3$ vertical steps. Length is $3$.\n  - Similar to $N_1$, any new path must have length $3$. This requires $3$ 'Up' steps and $0$ other steps. The only such path is the initial one. Thus, $N_2$ cannot be rerouted.\n\n- **Net $N_3$**: Source $(0,1)$, Sink $(3,0)$.\n  - Manhattan distance: $|3-0| + |0-1| = 4$.\n  - Initial path length: $3$ 'Right' steps, $1$ 'Down' step. Length is $4$.\n  - Any new path must have length at most $4$. The shortest path length is $4$. Therefore, any valid rerouting must use a shortest Manhattan path of length $4$. A path from $(0,1)$ to $(3,0)$ of length $4$ must consist of $3$ 'Right' (R) moves and $1$ 'Down' (D) move. The number of such paths is given by the binomial coefficient $\\binom{3+1}{1} = \\binom{4}{1} = 4$.\n  - The four paths are sequences of moves from $(0,1)$:\n    1.  RRRD: $(0,1) \\to (1,1) \\to (2,1) \\to (3,1) \\to (3,0)$. This is the initial path.\n    2.  RRDR: $(0,1) \\to (1,1) \\to (2,1) \\to (2,0) \\to (3,0)$.\n    3.  RDRR: $(0,1) \\to (1,1) \\to (1,0) \\to (2,0) \\to (3,0)$.\n    4.  DRRR: $(0,1) \\to (0,0) \\to (1,0) \\to (2,0) \\to (3,0)$.\n\nWe need to evaluate the total overflow for each of the three alternative paths for $N_3$. When rerouting $N_3$, we first \"rip up\" its initial path. The remaining demands, $d'(e)$, are due to $N_1$ and $N_2$.\n- $d'(e)=1$ for edges on the path of $N_1$: $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$.\n- $d'(e)=1$ for edges on the path of $N_2$: $\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$.\n- $d'(e)=0$ for all other edges.\n\nNow we calculate the new total overflow for each alternative path for $N_3$. The new demand is $d_{\\text{new}}(e)$.\n\n- **Path 2 (RRDR)**: The new path for $N_3$ uses edges $((0,1),(1,1))$, $((1,1),(2,1))$, $((2,1),(2,0))$, $((2,0),(3,0))$.\n  - Edge $((0,1),(1,1))$: Used by $N_1$. $d' = 1$. $d_{\\text{new}} = 1+1=2$. Overflow $= 1$.\n  - Edge $((1,1),(2,1))$: Used by $N_1$. $d' = 1$. $d_{\\text{new}} = 1+1=2$. Overflow $= 1$.\n  - Other edges on the path have $d'=0$, so $d_{\\text{new}}=1$ and overflow is $0$.\n  - The edge $((2,1),(3,1))$, previously used by $N_1$ and $N_3$, is now only used by $N_1$, so its demand is $1$ and its overflow is $0$.\n  - The total overflow for this case is $1+1=2$.\n\n- **Path 3 (RDRR)**: The new path for $N_3$ uses edges $((0,1),(1,1))$, $((1,1),(1,0))$, $((1,0),(2,0))$, $((2,0),(3,0))$. Note that edge $((1,1),(1,0))$ is the same as $((1,0),(1,1))$.\n  - Edge $((0,1),(1,1))$: Used by $N_1$. $d' = 1$. $d_{\\text{new}} = 1+1=2$. Overflow $= 1$.\n  - Edge $((1,0),(1,1))$: Used by $N_2$. $d' = 1$. $d_{\\text{new}} = 1+1=2$. Overflow $= 1$.\n  - Other edges on the path have $d'=0$, so $d_{\\text{new}}=1$ and overflow is $0$.\n  - The total overflow for this case is $1+1=2$.\n\n- **Path 4 (DRRR)**: The new path for $N_3$ uses edges $((0,1),(0,0))$, $((0,0),(1,0))$, $((1,0),(2,0))$, $((2,0),(3,0))$.\n  - None of these four edges are part of the initial paths of $N_1$ or $N_2$. So for each of them, $d'(e)=0$. Adding $N_3$ makes $d_{\\text{new}}(e)=1$ and results in zero overflow on these edges.\n  - The paths for $N_1$, $N_2$, and the new path for $N_3$ are edge-disjoint:\n    - $P_1$ edges: $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$\n    - $P_2$ edges: $\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$\n    - New $P_3$ edges: $\\{((0,1),(0,0)), ((0,0),(1,0)), ((1,0),(2,0)), ((2,0),(3,0))\\}$\n  - Since the three paths do not share any edges, the demand on any edge of the grid is at most $1$. Given that $c(e)=1$, the demand $d_{\\text{new}}(e)$ never exceeds the capacity.\n  - Therefore, $d_{\\text{new}}(e) \\le 1$ for all $e \\in E$, and $\\max(0, d_{\\text{new}}(e) - c(e)) = 0$ for all edges.\n  - The total overflow for this case is $0$.\n\n#### Task 3: Minimal Achievable Total Overflow\nWe have found that rerouting $N_1$ or $N_2$ is not possible under the given constraints. Rerouting $N_3$ is possible, and the alternative paths yield total overflows of $2$, $2$, and $0$. The minimal value among these is $0$. Since overflow is non-negative, $0$ is the lowest possible value.\n\nThe problem also specifies a maze routing cost function. Let's verify that the path leading to zero overflow would be chosen. When rerouting $N_3$, the cost of an edge $e$ is $w(e) = 1 + \\lambda \\cdot \\max(0, d'(e) + 1 - 1) = 1 + \\lambda \\cdot d'(e)$, where $d'(e)$ is the demand from $N_1$ and $N_2$. Edges used by $N_1$ or $N_2$ have $d'(e)=1$ and cost $1+\\lambda$. Unused edges have $d'(e)=0$ and cost $1$.\n- Cost of Path 1 (RRRD): $3(1+\\lambda) + 1 = 4+3\\lambda$.\n- Cost of Path 2 (RRDR): $2(1+\\lambda) + 2(1) = 4+2\\lambda$.\n- Cost of Path 3 (RDRR): $2(1+\\lambda) + 2(1) = 4+2\\lambda$.\n- Cost of Path 4 (DRRR): $4(1) = 4$.\n\nSince $\\lambda0$, the path with the minimum cost is Path 4 (DRRR). This is the path that a congestion-aware maze router would choose, and it is the same path that yields the minimal overflow.\n\nThe minimal achievable total overflow after rerouting exactly one net is $0$.",
            "answer": "$$\\boxed{0}$$"
        }
    ]
}
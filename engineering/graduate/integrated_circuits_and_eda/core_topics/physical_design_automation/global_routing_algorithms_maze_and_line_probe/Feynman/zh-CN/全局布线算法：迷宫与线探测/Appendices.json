{
    "hands_on_practices": [
        {
            "introduction": "线探测算法为全局布线提供了一种快速的启发式方法。通过沿主方向延伸直线，它们可以快速建立连接，但其简单性要求有特定的规则来处理障碍物。这个动手练习  提供了一个执行线探测算法的具体示例，让您能够追踪其寻路逻辑，并理解它如何计算绕过障碍物的迂回路径。",
            "id": "4274201",
            "problem": "考虑在电子设计自动化（EDA）全局布线中，在一个直角网格图上的情景。网格图由位于整数格点上的顶点定义，单位权重的边连接着四个相邻的顶点。障碍物通过从网格中移除顶点来建模。假设为单布线层和四邻域连接，并且路径必须避开障碍物顶点。\n\n设网格为坐标为 $(x,y)$ 的整数格点所构成的导出子图，其中 $x,y \\in \\{0,1,2,\\dots,10\\}$。定义一个矩形障碍物 $O$，它移除了所有满足 $x \\in \\{4,5,6,7\\}$ 和 $y \\in \\{3,4,5,6\\}$ 的顶点 $(x,y)$。设源点为 $s=(2,4)$，目标点为 $t=(9,4)$。\n\n你将在此网格上执行一个线探针布线算法。该线探针布线算法规定如下，仅使用轴对齐的移动：\n\n1. 初始化当前顶点 $c$ 为 $s$。定义主轴为与 $t$ 的绝对坐标差较大的坐标轴；如果差值相等，则选择 $x$ 轴。\n2. 尝试沿主轴朝着减小与 $t$ 的绝对坐标差的方向移动，只要下一个顶点既不在网格外部也不是障碍物顶点。这种贪婪扩展将持续进行，直到到达 $t$ 或下一步将进入障碍物为止。\n3. 如果沿主轴的下一步将进入障碍物 $O$，则计算为清除 $O$ 以便能继续沿主轴移动所需的最小垂直偏移。更精确地说，如果主轴是x轴，当前顶点为 $(x_0, y_0)$，且在 $x_0+1$ 处遇到障碍物，则算法必须垂直移动。设障碍物的垂直范围为 $y \\in [y_{min}, y_{max}]$。算法计算移动到 $y_{min}-1$ 和 $y_{max}+1$ 所需的步数，并选择步数较小的方向。",
            "solution": "问题陈述经评估有效，因为它内容自洽，在电子设计自动化（EDA）领域有科学依据，并明确规定了确定唯一解所需的所有条件。我们继续执行指定的线探针布线算法。\n\n已知条件如下：\n- 源点：$s = (2,4)$\n- 目标点：$t = (9,4)$\n- 障碍物 $O$：一组被移除的顶点 $(x,y)$，其中 $x \\in \\{4,5,6,7\\}$ 且 $y \\in \\{3,4,5,6\\}$。\n\n首先，我们计算源点和目标点之间的曼哈顿距离 $D_0$。\n$$D_{0} = |x_{t}-x_{s}| + |y_{t}-y_{s}| = |9-2| + |4-4| = 7 + 0 = 7$$\n\n接下来，我们逐步执行线探针布线算法。\n\n**步骤1：初始化和主轴选择**\n算法从当前顶点 $c = s = (2,4)$ 开始。\n我们通过比较绝对坐标差来确定主轴：\n- $x$ 坐标差：$\\Delta x = |x_t - x_s| = |9 - 2| = 7$。\n- $y$ 坐标差：$\\Delta y = |y_t - y_s| = |4 - 4| = 0$。\n由于 $\\Delta x > \\Delta y$，主移动轴是 $x$ 轴。\n\n**步骤2：沿主轴的贪婪移动**\n算法尝试从 $c=(2,4)$ 沿正 $x$ 轴向目标点的 $x$ 坐标 $x_t=9$ 移动。\n路径以线段 $(2,4) \\to (3,4)$ 开始。当前顶点变为 $c=(3,4)$。\n从 $c=(3,4)$ 出发，沿主轴的下一个顶点将是 $(4,4)$。我们必须检查 $(4,4)$ 是否是障碍物 $O$ 的一部分。障碍物定义为 $x \\in \\{4,5,6,7\\}$ 且 $y \\in \\{3,4,5,6\\}$。由于 $x=4$ 和 $y=4$ 都在这些范围内，顶点 $(4,4)$ 是一个障碍物。路径在 $c=(3,4)$ 处被阻挡。\n\n**步骤3：障碍物清除**\n路径被阻挡的当前顶点是 $(x_0, y_0) = (3,4)$。主轴是 $x$ 轴，在 $x_0+1=4$ 处遇到障碍物。障碍物 $O$ 的垂直范围是从 $y_{\\min}=3$ 到 $y_{\\max}=6$。当前 $y$ 坐标 $y_0=4$ 在此范围内，即 $y_{\\min} \\le y_0 \\le y_{\\max}$。\n\n我们使用提供的公式计算清除障碍物所需的垂直偏移量：\n- 向下偏移量为 $d_{\\text{down}} = y_{0} - (y_{\\min}-1) = 4 - (3-1) = 4 - 2 = 2$。\n- 向上偏移量为 $d_{\\text{up}} = (y_{\\max}+1) - y_{0} = (6+1) - 4 = 7 - 4 = 3$。\n\n算法选择偏移量较小的方向。由于 $d_{\\text{down}} = 2  d_{\\text{up}} = 3$，所选方向是向下。路径必须在负 $y$ 方向上移动 $2$ 个单位。这生成了路径段 $(3,4) \\to (3,3) \\to (3,2)$。新的当前顶点是 $c=(3,2)$。\n\n**步骤4：恢复贪婪移动**\n当前顶点现在是 $c=(3,2)$。路径现在位于一个 $y$ 坐标（$y=2$）上，该坐标不在障碍物的垂直范围 $[3,6]$ 内，因此是通畅的。算法沿主轴（$x$ 轴）恢复贪婪移动。\n路径从 $(3,2)$ 延伸到目标点的 $x$ 坐标 $x_t=9$。这创建了从 $(3,2)$ 到 $(9,2)$ 的路径段。所走的路径是 $(3,2) \\to (4,2) \\to (5,2) \\to (6,2) \\to (7,2) \\to (8,2) \\to (9,2)$。\n当前顶点现在是 $c=(9,2)$。该顶点在主轴上与目标点 $t=(9,4)$ 对齐。\n\n算法现在切换到次轴（$y$ 轴）来完成路径。它从 $(9,2)$ 移动到目标点的 $y$ 坐标 $y_t=4$。这创建了最终的路径段 $(9,2) \\to (9,3) \\to (9,4)$。目标点 $t=(9,4)$ 已到达。\n\n**路径长度和绕行计数计算**\n我们通过对各段长度求和来计算总路径长度 $L$：\n1.  初始延伸：$(2,4) \\to (3,4)$。长度 = $1$。\n2.  垂直绕行：$(3,4) \\to (3,2)$。长度 = $|2-4| = 2$。\n3.  绕过障碍物后延伸：$(3,2) \\to (9,2)$。长度 = $|9-3| = 6$。\n4.  最终对齐：$(9,2) \\to (9,4)$。长度 = $|4-2| = 2$。\n\n总路径长度为 $L = 1 + 2 + 6 + 2 = 11$。\n\n最后，我们使用给定的关系式 $L = D_0 + 2k$ 来确定绕行计数 $k$。\n代入计算出的值 $L=11$ 和 $D_0=7$：\n$$11 = 7 + 2k$$\n求解 $k$：\n$$2k = 11 - 7 = 4$$\n$$k = 2$$\n绕行计数 $k$ 为 $2$。该值表示为绕过障碍物所需的垂直位移量（$2$ 个单位）。路径长度是曼哈顿距离加上该位移量的两倍，这解释了先偏离最优路径线再返回的过程。",
            "answer": "$$\\boxed{2}$$"
        },
        {
            "introduction": "初始的布线方案虽然生成速度快，但常常会导致拥塞区域，即布线需求超过了可用资源。解决这个问题的一个强大策略是“撕毁并重布”(rip-up and reroute)，这是一个识别并重新布线网络以减少总溢出的迭代过程。在这个练习  中，您将首先量化给定布线产生的拥塞，然后应用一个拥塞感知的迷宫布线成本模型来寻找一条能够最小化溢出的改进路径。",
            "id": "4274190",
            "problem": "考虑在直角网格上的电子设计自动化 (EDA) 全局布线问题。将布线区域建模为一个网格图 $G=(V,E)$，其中顶点 $V$ 是整数格点 $(x,y)$，$x,y \\in \\{0,1,2,3\\}$，无向边 $E$ 连接单位曼哈顿距离的邻居（仅水平和垂直相邻）。每条边 $e \\in E$ 的容量为 $c(e)=1$。存在三个双引脚网络 $N_1$、$N_2$ 和 $N_3$，其源-汇对如下：\n- $N_1$：从 $(0,1)$ 到 $(3,1)$，\n- $N_2$：从 $(1,0)$ 到 $(1,3)$，\n- $N_3$：从 $(0,1)$ 到 $(3,0)$。\n假设采用线探测法产生一个初始分配：$N_1$ 沿着行 $y=1$ 从 $x=0$ 水平布线到 $x=3$，$N_2$ 沿着列 $x=1$ 从 $y=0$ 垂直布线到 $y=3$，$N_3$ 先沿着行 $y=1$ 从 $x=0$ 水平布线到 $x=3$，然后沿着列 $x=3$ 从 $y=1$ 向下垂直布线到 $y=0$。边 $e$ 上的分配需求 $d(e)$ 定义为使用该边的已分配路径的网络数量。总溢出定义为\n$$\\text{OF} \\;=\\; \\sum_{e \\in E} \\max\\!\\big(0,\\, d(e) - c(e)\\big).$$\n在迷宫布线中，会在图 $G$ 上执行广度优先搜索 (BFS) 或 Dijkstra 式搜索，并采用一个惩罚预测拥塞的边成本模型。对此问题，使用边成本\n$$w(e) \\;=\\; 1 \\;+\\; \\lambda \\cdot \\max\\!\\big(0,\\, d(e) + 1 - c(e)\\big),$$\n其中 $\\lambda0$ 是一个拥塞惩罚项，$d(e)+1$ 中的 $+1$ 反映了当前正在重新布线的网络的增量需求。\n\n任务：\n- 使用初始的线探测法分配，计算总溢出 $\\text{OF}$，并找出具有最大正值 $d(e)-c(e)$ 的边。\n- 在只能对一个网络进行重新布线，且其曼哈顿长度不得超过其初始曼哈顿长度的约束下，选择一个重新布线的目标和一个迷宫布线找到的路径，使得 $\\text{OF}$ 减少至少 $1$ 个单位。\n- 在上述约束和成本模型下，确定在对恰好一个网络进行重新布线后可实现的最小总溢出。将你的最终答案表示为一个精确整数。",
            "solution": "该问题要求在满足特定约束的条件下，通过对单个网络进行重新布线，来求得布线网格上的最小可实现总溢出。首先，验证问题的正确性和完整性。\n\n### 第 1 步：提取已知条件\n- **网格图**：$G=(V,E)$，其中 $V = \\{(x,y) | x,y \\in \\{0, 1, 2, 3\\}\\}$。$E$ 中的边连接曼哈顿距离为 $1$ 的顶点。\n- **边容量**：对于所有边 $e \\in E$，$c(e) = 1$。\n- **网络**：\n  - $N_1$：源 $s_1=(0,1)$，汇 $t_1=(3,1)$。\n  - $N_2$：源 $s_2=(1,0)$，汇 $t_2=(1,3)$。\n  - $N_3$：源 $s_3=(0,1)$，汇 $t_3=(3,0)$。\n- **初始布线路径**：\n  - $P_1$：对于 $N_1$，沿 $y=1$ 的水平路径。边为 $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$。\n  - $P_2$：对于 $N_2$，沿 $x=1$ 的垂直路径。边为 $\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$。\n  - $P_3$：对于 $N_3$，L 型路径。边为 $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1)), ((3,1),(3,0))\\}$。\n- **需求与溢出**：\n  - 需求 $d(e)$ 是穿过边 $e$ 的网络路径数量。\n  - 总溢出 $\\text{OF} = \\sum_{e \\in E} \\max(0, d(e) - c(e))$。\n- **重布线成本模型**：\n  - 对于迷宫布线，边成本为 $w(e) = 1 + \\lambda \\cdot \\max(0, d(e) + 1 - c(e))$，其中 $\\lambda > 0$。这里，$d(e)$ 是布线当前网络*之前*的需求。\n- **重布线约束**：\n  - 恰好一个网络需要被重新布线。\n  - 新路径的长度不得超过该网络初始路径的长度。\n\n### 第 2 步：使用提取的已知条件进行验证\n问题陈述定义明确、内部一致，并且在电子设计自动化（EDA）领域，特别是全局布线算法方面，具有科学依据。它提供了一个清晰的设置，包括网格、网络、初始条件和目标函数。迷宫布线、线探测法、溢出和基于拥塞的成本函数等概念在该领域是标准的。问题是客观的，并要求基于所提供数据给出定量答案。没有矛盾、歧义或缺失的信息。该问题是有效的。\n\n### 第 3 步：求解\n\n#### 任务 1：初始溢出计算\n我们首先根据网络 $N_1$、$N_2$ 和 $N_3$ 的给定路径，计算每条边 $e$ 的初始需求 $d(e)$。所有边 $e$ 的容量为 $c(e)=1$。\n\n1.  **沿 $y=1$ 的水平边上的需求**：\n    - 边 $((0,1),(1,1))$ 被 $N_1$ 和 $N_3$ 使用。所以，$d((0,1),(1,1))) = 2$。\n    - 边 $((1,1),(2,1))$ 被 $N_1$ 和 $N_3$ 使用。所以，$d((1,1),(2,1))) = 2$。\n    - 边 $((2,1),(3,1))$ 被 $N_1$ 和 $N_3$ 使用。所以，$d((2,1),(3,1))) = 2$。\n\n2.  **沿 $x=1$ 的垂直边上的需求**：\n    - 边 $((1,0),(1,1))$、$((1,1),(1,2))$ 和 $((1,2),(1,3))$ 仅被 $N_2$ 使用。它们的需求为 $1$。\n\n3.  **其他边上的需求**：\n    - 边 $((3,1),(3,0))$ 仅被 $N_3$ 使用。其需求为 $1$。\n    - 网格中所有其他边都未使用，因此它们的需求为 $0$。\n\n边 $e$ 上的溢出为 $\\max(0, d(e) - c(e))$。\n- 对于从 $(0,1)$ 到 $(3,1)$ 路径段上的三条边：$d(e)=2$，所以溢出为 $\\max(0, 2-1) = 1$。\n- 对于所有其他已使用的边，$d(e)=1$，所以溢出为 $\\max(0, 1-1) = 0$。\n- 对于所有未使用的边，$d(e)=0$，所以溢出为 $\\max(0, 0-1) = 0$。\n\n总溢出是所有边上溢出的总和：\n$$ \\text{OF}_{\\text{initial}} = (2-1) + (2-1) + (2-1) = 1+1+1=3. $$\n具有最大正溢出（$d(e)-c(e)=1$）的边是 $((0,1),(1,1))$、 $((1,1),(2,1))$ 和 $((2,1),(3,1))$。\n\n#### 任务 2：重布线分析\n我们必须对恰好一个网络进行重新布线。新路径的长度不得超过初始路径的长度。\n\n- **网络 $N_1$**：源 $(0,1)$，汇 $(3,1)$。\n  - 曼哈顿距离：$|3-0| + |1-1| = 3$。\n  - 初始路径长度：$3$ 次水平移动。长度为 $3$。\n  - 任何新路径的长度必须最多为 $3$。由于最短可能路径长度是曼哈顿距离 $3$，任何新路径都必须是长度为 $3$ 的最短路径。一条从 $(0,1)$ 到 $(3,1)$ 长度为 $3$ 的路径需要 $3$ 步‘向右’移动，以及 $0$ 步‘向上’/‘向下’/‘向左’移动。唯一这样的路径就是初始路径。因此，$N_1$ 无法被重新布线。\n\n- **网络 $N_2$**：源 $(1,0)$，汇 $(1,3)$。\n  - 曼哈顿距离：$|1-1| + |3-0| = 3$。\n  - 初始路径长度：$3$ 次垂直移动。长度为 $3$。\n  - 与 $N_1$ 类似，任何新路径的长度都必须为 $3$。这需要 $3$ 次‘向上’移动，以及 $0$ 次其他移动。唯一这样的路径就是初始路径。因此，$N_2$ 无法被重新布线。\n\n- **网络 $N_3$**：源 $(0,1)$，汇 $(3,0)$。\n  - 曼哈顿距离：$|3-0| + |0-1| = 4$。\n  - 初始路径长度：$3$ 次‘向右’移动，$1$ 次‘向下’移动。长度为 $4$。\n  - 任何新路径的长度必须最多为 $4$。最短路径长度为 $4$。因此，任何有效的重布线都必须使用长度为 $4$ 的最短曼哈顿路径。一条从 $(0,1)$ 到 $(3,0)$ 长度为 $4$ 的路径必须包含 $3$ 次‘向右’(R)移动和 $1$ 次‘向下’(D)移动。此类路径的数量由二项式系数 $\\binom{3+1}{1} = \\binom{4}{1} = 4$ 给出。\n  - 这四条路径是从 $(0,1)$ 出发的移动序列：\n    1.  RRRD: $(0,1) \\to (1,1) \\to (2,1) \\to (3,1) \\to (3,0)$。这是初始路径。\n    2.  RRDR: $(0,1) \\to (1,1) \\to (2,1) \\to (2,0) \\to (3,0)$。\n    3.  RDRR: $(0,1) \\to (1,1) \\to (1,0) \\to (2,0) \\to (3,0)$。\n    4.  DRRR: $(0,1) \\to (0,0) \\to (1,0) \\to (2,0) \\to (3,0)$。\n\n我们需要为 $N_3$ 的三种备选路径分别评估总溢出。当重新布线 $N_3$ 时，我们首先“拆除”其初始路径。剩余的需求 $d'(e)$ 来自于 $N_1$ 和 $N_2$。\n- 对于 $N_1$ 路径上的边，$d'(e)=1$：$\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$。\n- 对于 $N_2$ 路径上的边，$d'(e)=1$：$\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$。\n- 所有其他边的 $d'(e)=0$。\n\n现在我们为 $N_3$ 的每个备选路径计算新的总溢出。新的需求是 $d_{\\text{new}}(e)$。\n\n- **路径 2 (RRDR)**：$N_3$ 的新路径使用边 $((0,1),(1,1))$、$((1,1),(2,1))$、$((2,1),(2,0))$、$((2,0),(3,0))$。\n  - 边 $((0,1),(1,1))$：被 $N_1$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出 $= 1$。\n  - 边 $((1,1),(2,1))$：被 $N_1$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出 $= 1$。\n  - 路径上的其他边 $d'=0$，因此 $d_{\\text{new}}=1$ 且溢出为 $0$。\n  - 边 $((2,1),(3,1))$，之前被 $N_1$ 和 $N_3$ 使用，现在只被 $N_1$ 使用，所以其需求为 $1$，溢出为 $0$。\n  - 此情况下的总溢出为 $1+1=2$。\n\n- **路径 3 (RDRR)**：$N_3$ 的新路径使用边 $((0,1),(1,1))$、$((1,1),(1,0))$、$((1,0),(2,0))$、$((2,0),(3,0))$。注意边 $((1,1),(1,0))$ 与 $((1,0),(1,1))$ 是同一条边。\n  - 边 $((0,1),(1,1))$：被 $N_1$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出 $= 1$。\n  - 边 $((1,0),(1,1))$：被 $N_2$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出 $= 1$。\n  - 路径上的其他边 $d'=0$，因此 $d_{\\text{new}}=1$ 且溢出为 $0$。\n  - 此情况下的总溢出为 $1+1=2$。\n\n- **路径 4 (DRRR)**：$N_3$ 的新路径使用边 $((0,1),(0,0))$、$((0,0),(1,0))$、$((1,0),(2,0))$、$((2,0),(3,0))$。\n  - 这四条边都不是 $N_1$ 或 $N_2$ 初始路径的一部分。所以对于它们中的每一条，$d'(e)=0$。加入 $N_3$ 使得 $d_{\\text{new}}(e)=1$，并在这些边上产生零溢出。\n  - $N_1$、$N_2$ 的路径以及 $N_3$ 的新路径三者之间的所有边都是不相交的。\n    - $P_1$ 边：$\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$\n    - $P_2$ 边：$\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$\n    - 新的 $P_3$ 边：$\\{((0,1),(0,0)), ((0,0),(1,0)), ((1,0),(2,0)), ((2,0),(3,0))\\}$\n  - 由于这三条路径不共享任何边，网格中任何边上的需求最多为 $1$。鉴于 $c(e)=1$，需求 $d_{\\text{new}}(e)$ 永远不会超过容量。\n  - 因此，对所有 $e \\in E$，$d_{\\text{new}}(e) \\le 1$，且对所有边 $\\max(0, d_{\\text{new}}(e) - c(e)) = 0$。\n  - 此情况下的总溢出为 $0$。\n\n#### 任务 3：最小可实现总溢出\n我们已经发现在给定约束下，对 $N_1$ 或 $N_2$ 进行重布线是不可能的。对 $N_3$ 进行重布线是可能的，其备选路径产生的总溢出分别为 $2$、$2$ 和 $0$。其中的最小值为 $0$。由于溢出是非负的，$0$ 是可能的最低值。\n\n问题还指定了一个迷宫布线成本函数。让我们验证一下导致零溢出的路径是否会被选择。当重布线 $N_3$ 时，边 $e$ 的成本为 $w(e) = 1 + \\lambda \\cdot \\max(0, d'(e) + 1 - 1) = 1 + \\lambda \\cdot d'(e)$，其中 $d'(e)$ 是来自 $N_1$ 和 $N_2$ 的需求。被 $N_1$ 或 $N_2$ 使用的边有 $d'(e)=1$ 且成本为 $1+\\lambda$。未使用的边有 $d'(e)=0$ 且成本为 $1$。\n- 路径 1 (RRRD) 的成本：$3(1+\\lambda) + 1 = 4+3\\lambda$。\n- 路径 2 (RRDR) 的成本：$2(1+\\lambda) + 2(1) = 4+2\\lambda$。\n- 路径 3 (RDRR) 的成本：$2(1+\\lambda) + 2(1) = 4+2\\lambda$。\n- 路径 4 (DRRR) 的成本：$4(1) = 4$。\n\n由于 $\\lambda0$，成本最低的路径是路径 4 (DRRR)。这是一条拥塞感知的迷宫布线器会选择的路径，也正是产生最小溢出的那条路径。\n\n在对恰好一个网络进行重布线后，可实现的最小总溢出为 $0$。",
            "answer": "$$\\boxed{0}$$"
        },
        {
            "introduction": "一个复杂的迷宫路由器的行为从根本上由其成本函数控制，该函数平衡了相互竞争的目标，如最小化线长、避免拥塞和减少过孔使用。这个练习  探讨了路径选择对这些目标权重的关键敏感性。通过在不同的成本情景下评估预定义的路径，您将深入了解路由器如何进行权衡，以及如何调整这些选择以满足特定的设计目标。",
            "id": "4274165",
            "problem": "考虑一个用于电子设计自动化（EDA）的全局布线图（GRG），该图被建模为一个具有两个布线层 $L_1$ 和 $L_2$ 的均匀 $4\\times 4$ 网格。一个线网必须从 $L_1$ 上的源点 $s=(1,1)$ 布线到 $L_1$ 上的汇点 $t=(4,4)$。在任一层上的每个单位水平或垂直步长都具有一个由 $\\alpha$ 加权的基准长度成本。在 $L_1$ 上，有两条特定的边是拥塞的，每条边都带有一个由 $\\beta$ 加权的拥塞惩罚；拥塞的边是连接 $(2,2)$ 到 $(2,3)$ 和 $(2,2)$ 到 $(3,2)$ 的网格边，且每条拥塞边产生的惩罚为 $p_e=3$。$L_1$ 上的所有其他边的 $p_e=0$。在 $L_2$ 上，假设所有边的 $p_e=0$。一个用于在 $L_1$ 和 $L_2$ 之间切换布线层的过孔，每个过孔会产生一个由 $\\gamma$ 加权的过孔成本。\n\n对于一条路径 $P$，其总成本定义为\n$$\nC(P) \\;=\\; \\alpha \\cdot \\text{steps}(P) \\;+\\; \\beta \\cdot \\sum_{e\\in P} p_e \\;+\\; \\gamma \\cdot \\text{vias}(P),\n$$\n其中 $\\text{steps}(P)$ 是经过的单位边的总数，$\\text{vias}(P)$ 是层转换的总数。\n\n考虑三种典型的候选路径：\n- 路径 $P_1$：一条完全在 $L_1$ 上的曼哈顿最短路径，其 $\\text{steps}(P_1)=6$，穿过两条拥塞边，因此 $\\sum_{e\\in P_1} p_e = 3+3=6$，且 $\\text{vias}(P_1)=0$。\n- 路径 $P_2$：一条完全在 $L_1$ 上的绕行路径，它避开了拥塞边，其 $\\text{steps}(P_2)=8$，$\\sum_{e\\in P_2} p_e=0$，且 $\\text{vias}(P_2)=0$。\n- 路径 $P_3$：一条曼哈顿最短路径，它在进入拥塞区域前切换到 $L_2$，并在靠近汇点处返回 $L_1$，其 $\\text{steps}(P_3)=6$，$\\sum_{e\\in P_3} p_e=0$，且 $\\text{vias}(P_3)=2$。\n\n一个求解加权最短路径的最优迷宫布线器将选择在给定的 $(\\alpha,\\beta,\\gamma)$ 下使 $C(P)$ 最小化的路径 $P$。考虑以下三个权重向量：\n- $\\mathbf{w}_a$: $(\\alpha,\\beta,\\gamma)=(1,0.6,0.7)$,\n- $\\mathbf{w}_b$: $(\\alpha,\\beta,\\gamma)=(1,2,5)$,\n- $\\mathbf{w}_c$: $(\\alpha,\\beta,\\gamma)=(1,0.1,3)$.\n\n哪个选项为每个权重向量正确地指明了所选路径，从而说明了路径选择对 $(\\alpha,\\beta,\\gamma)$ 的敏感性？\n\nA. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。\n\nB. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。\n\nC. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_3$。\n\nD. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_2$。",
            "solution": "用户提供了一个电子设计自动化（EDA）领域的问题，特别是关于全局布线算法。任务是验证问题陈述的有效性，如果有效，则在三个给定的候选路径中，为三组不同的成本权重确定最优的布线路径。\n\n### 问题验证\n\n首先，我将根据指定的标准验证问题陈述。\n\n**第1步：提取已知条件**\n\n-   **布线网格：** 一个具有两个布线层 $L_1$ 和 $L_2$ 的均匀 $4\\times 4$ 网格。\n-   **线网：** 从 $L_1$ 上的源点 $s=(1,1)$ 到 $L_1$ 上的汇点 $t=(4,4)$。\n-   **成本函数：** 一条路径 $P$ 的总成本由 $C(P) = \\alpha \\cdot \\text{steps}(P) + \\beta \\cdot \\sum_{e\\in P} p_e + \\gamma \\cdot \\text{vias}(P)$ 给出。\n-   **成本组成部分：**\n    -   $\\text{steps}(P)$: 经过的单位边的总数。每一步的成本由 $\\alpha$ 加权。\n    -   $\\sum_{e\\in P} p_e$: 路径中各边的拥塞惩罚之和。总惩罚由 $\\beta$ 加权。\n    -   $\\text{vias}(P)$: 层转换（过孔）的总数。每个过孔的成本由 $\\gamma$ 加权。\n-   **拥塞数据：**\n    -   在 $L_1$ 上，从 $(2,2)$ 到 $(2,3)$ 和从 $(2,2)$ 到 $(3,2)$ 的边是拥塞的。\n    -   对于每个拥塞边，惩罚为 $p_e=3$。\n    -   对于 $L_1$ 上的所有其他边和 $L_2$ 上的所有边，$p_e=0$。\n-   **候选路径：**\n    -   **$P_1$**：一条在 $L_1$ 上的曼哈顿最短路径。\n        -   $\\text{steps}(P_1)=6$\n        -   $\\sum_{e\\in P_1} p_e = 3+3=6$\n        -   $\\text{vias}(P_1)=0$\n    -   **$P_2$**：一条在 $L_1$ 上的绕行路径。\n        -   $\\text{steps}(P_2)=8$\n        -   $\\sum_{e\\in P_2} p_e=0$\n        -   $\\text{vias}(P_2)=0$\n    -   **$P_3$**：一条使用层变更的曼哈顿最短路径。\n        -   $\\text{steps}(P_3)=6$\n        -   $\\sum_{e\\in P_3} p_e=0$\n        -   $\\text{vias}(P_3)=2$\n-   **权重向量：**\n    -   $\\mathbf{w}_a$: $(\\alpha,\\beta,\\gamma)=(1,0.6,0.7)$\n    -   $\\mathbf{w}_b$: $(\\alpha,\\beta,\\gamma)=(1,2,5)$\n    -   $\\mathbf{w}_c$: $(\\alpha,\\beta,\\gamma)=(1,0.1,3)$\n\n**第2步：使用提取的已知条件进行验证**\n\n-   **科学依据：** 该问题牢固地基于VLSI电路全局布线的原理。成本函数是迷宫布线器（如Lee算法或A*搜索）为寻找最短路径而使用的标准简化模型，它平衡了线长、拥塞和过孔使用。全局布线图（GRG）、拥塞惩罚和过孔成本的概念在EDA领域都是标准术语。从 $s=(1,1)$ 到 $t=(4,4)$ 的曼哈顿距离是 $|4-1| + |4-1| = 3+3=6$，这正确地验证了 $\\text{steps}(P)=6$ 的路径是曼哈顿最短路径。为每条典型路径（$P_1, P_2, P_3$）列出的属性与其描述一致。\n-   **良态问题：** 问题提供了一个明确的目标：为三组不同的权重，在三个候选路径中找到成本最小的路径。执行此计算所需的所有数据都已给出。问题不是要在整个网格上找到绝对最优路径，而是比较三个具体的、定义明确的候选路径，这使其成为一个直接且定义良好的评估任务。\n-   **客观性：** 问题陈述以精确、量化且无歧义的语言编写。所有术语都有定义，任务纯粹是计算性的。\n\n问题陈述没有科学、事实或逻辑上的缺陷。它是完整的、一致的且结构良好。\n\n**第3步：结论与行动**\n\n问题陈述是**有效的**。我将继续进行解答。\n\n### 解答推导\n\n问题的核心是为三个权重向量（$\\mathbf{w}_a$, $\\mathbf{w}_b$, $\\mathbf{w}_c$）中的每一个，分别计算三条路径（$P_1$, $P_2$, $P_3$）的总成本 $C(P)$，并找出每种情况下的最小成本路径。\n\n成本函数为：\n$$\nC(P) = \\alpha \\cdot \\text{steps}(P) + \\beta \\cdot \\sum_{e\\in P} p_e + \\gamma \\cdot \\text{vias}(P)\n$$\n\n路径特征如下：\n-   $P_1$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (6, 6, 0)$\n-   $P_2$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (8, 0, 0)$\n-   $P_3$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (6, 0, 2)$\n\n让我们计算每种情况的成本。\n\n**情况1：权重向量 $\\mathbf{w}_a: (\\alpha,\\beta,\\gamma)=(1, 0.6, 0.7)$**\n\n-   $P_1$ 的成本: $C(P_1) = (1)(6) + (0.6)(6) + (0.7)(0) = 6 + 3.6 + 0 = 9.6$\n-   $P_2$ 的成本: $C(P_2) = (1)(8) + (0.6)(0) + (0.7)(0) = 8 + 0 + 0 = 8.0$\n-   $P_3$ 的成本: $C(P_3) = (1)(6) + (0.6)(0) + (0.7)(2) = 6 + 0 + 1.4 = 7.4$\n\n比较成本：$C(P_3)  C(P_2)  C(P_1)$。最小成本为 $7.4$，对应路径 $P_3$。\n在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$。这表明，在中等拥塞惩罚和低过孔成本的情况下，最优选择是使用过孔来绕过拥塞，同时保持最小路径长度。\n\n**情况2：权重向量 $\\mathbf{w}_b: (\\alpha,\\beta,\\gamma)=(1, 2, 5)$**\n\n-   $P_1$ 的成本: $C(P_1) = (1)(6) + (2)(6) + (5)(0) = 6 + 12 + 0 = 18$\n-   $P_2$ 的成本: $C(P_2) = (1)(8) + (2)(0) + (5)(0) = 8 + 0 + 0 = 8.0$\n-   $P_3$ 的成本: $C(P_3) = (1)(6) + (2)(0) + (5)(2) = 6 + 0 + 10 = 16$\n\n比较成本：$C(P_2)  C(P_3)  C(P_1)$。最小成本为 $8.0$，对应路径 $P_2$。\n在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$。这表明，当拥塞和过孔成本都很高时，最好选择一条更长的路径（绕行）以避免这两种惩罚。\n\n**情况3：权重向量 $\\mathbf{w}_c: (\\alpha,\\beta,\\gamma)=(1, 0.1, 3)$**\n\n-   $P_1$ 的成本: $C(P_1) = (1)(6) + (0.1)(6) + (3)(0) = 6 + 0.6 + 0 = 6.6$\n-   $P_2$ 的成本: $C(P_2) = (1)(8) + (0.1)(0) + (3)(0) = 8 + 0 + 0 = 8.0$\n-   $P_3$ 的成本: $C(P_3) = (1)(6) + (0.1)(0) + (3)(2) = 6 + 0 + 6 = 12.0$\n\n比较成本：$C(P_1)  C(P_2)  C(P_3)$。最小成本为 $6.6$，对应路径 $P_1$。\n在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。这种情况，拥塞惩罚非常低而过孔成本很高，使得在最短路径上穿越拥塞区域成为最优选择，因为与绕行或使用过孔的成本相比，惩罚是微不足道的。\n\n**结果总结：**\n-   对于 $\\mathbf{w}_a$，最优路径是 $P_3$。\n-   对于 $\\mathbf{w}_b$，最优路径是 $P_2$。\n-   对于 $\\mathbf{w}_c$，最优路径是 $P_1$。\n\n### 逐项分析\n\n现在我将根据我推导出的结果来评估每个给定的选项。\n\n**A. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。**\n-   关于 $\\mathbf{w}_a$ 的陈述是选择 $P_3$。我的计算结果是 $P_3$。这是正确的。\n-   关于 $\\mathbf{w}_b$ 的陈述是选择 $P_2$。我的计算结果是 $P_2$。这是正确的。\n-   关于 $\\mathbf{w}_c$ 的陈述是选择 $P_1$。我的计算结果是 $P_1$。这是正确的。\n此选项的所有三个部分都与推导出的结果一致。\n结论：**正确**。\n\n**B. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。**\n-   关于 $\\mathbf{w}_a$ 的陈述是选择 $P_2$。这与我计算出的选择 $P_3$ 的结果相矛盾。\n结论：**不正确**。\n\n**C. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_3$。**\n-   关于 $\\mathbf{w}_a$ 的陈述是选择 $P_1$。这与我计算出的选择 $P_3$ 的结果相矛盾。\n结论：**不正确**。\n\n**D. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_2$。**\n-   关于 $\\mathbf{w}_b$ 的陈述是选择 $P_1$。这与我计算出的选择 $P_2$ 的结果相矛盾。\n结论：**不正确**。\n\n唯一正确描述了所有三个权重向量下路径选择的选项是A。",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "线探针（Line-probe）算法是一种用于生成初始布线路径的快速启发式方法。其工作原理是沿主轴延伸直线，并在遇到障碍物时进行简单的绕行。通过在一个带障碍物的网格上手动追踪算法的执行过程，本练习将帮助您直观地理解这类算法的行为模式，这是掌握布线器工作原理的基础 。",
            "id": "4274201",
            "problem": "考虑在电子设计自动化（EDA）中，在一个直角网格图上进行全局布线的背景。一个网格图由位于整数格点上的顶点定义，单位权重的边连接着四邻域的顶点。通过从网格中移除顶点来对障碍物进行建模。假设只有一个布线层和四邻域连接，并且路径必须避开障碍物顶点。\n\n设网格为坐标 $(x,y)$ 满足 $x,y \\in \\{0,1,2,\\dots,10\\}$ 的整数格点的诱导子图。定义一个矩形障碍物 $O$，它移除了所有满足 $x \\in \\{4,5,6,7\\}$ 和 $y \\in \\{3,4,5,6\\}$ 的顶点 $(x,y)$。设源点为 $s=(2,4)$，目标点为 $t=(9,4)$。\n\n你将在此网格上执行一个线探测布线算法。该线探测布线算法规定如下，仅使用轴对齐的移动方式：\n\n1. 初始化当前顶点 $c$ 为 $s$。定义主轴为与 $t$ 的绝对差值较大的坐标轴；如果差值相等，则选择 $x$ 轴。\n2. 只要下一个顶点既不在网格范围之外，也不是障碍物顶点，就尝试沿着主轴朝向减小与 $t$ 的绝对差值的方向移动。这种贪心扩展将一直持续，直到到达 $t$ 或下一步将进入障碍物。\n3. 如果沿着主轴的下一步将进入障碍物 $O$，则算法执行绕行。以主轴是 $x$ 轴为例，若当前顶点为 $(x_0, y_0)$ 且下一步 $(x_0+1, y_0)$ 是障碍物，则算法进行垂直绕行。它会计算向上移动到障碍物垂直范围 $[y_{\\min}, y_{\\max}]$ 上方的 $y = y_{\\max}+1$ 和向下移动到下方的 $y = y_{\\min}-1$ 所需的垂直步数，并选择步数较少的一侧。完成绕行后，算法将恢复沿主轴的移动。",
            "solution": "问题陈述经评估有效，因其内容自洽，在电子设计自动化（EDA）领域具有科学依据，并明确规定了确定唯一解所需的所有条件。我们接下来执行指定的线探测布线算法。\n\n已知条件如下：\n- 源点：$s = (2,4)$\n- 目标点：$t = (9,4)$\n- 障碍物 $O$：一组被移除的顶点 $(x,y)$，其中 $x \\in \\{4,5,6,7\\}$ 且 $y \\in \\{3,4,5,6\\}$。\n\n首先，我们计算源点和目标点之间的曼哈顿距离 $D_0$。\n$$D_{0} = |x_{t}-x_{s}| + |y_{t}-y_{s}| = |9-2| + |4-4| = 7 + 0 = 7$$\n\n接下来，我们逐步执行线探测布线算法。\n\n**步骤1：初始化与主轴选择**\n算法从当前顶点 $c = s = (2,4)$ 开始。\n我们通过比较坐标绝对差值来确定主轴：\n- $x$ 坐标差值：$\\Delta x = |x_t - x_s| = |9 - 2| = 7$。\n- $y$ 坐标差值：$\\Delta y = |y_t - y_s| = |4 - 4| = 0$。\n由于 $\\Delta x > \\Delta y$，主移动轴是 $x$ 轴。\n\n**步骤2：沿主轴进行贪心移动**\n算法尝试从 $c=(2,4)$ 沿着正 $x$ 轴向目标点的 $x$ 坐标 $x_t=9$ 移动。\n路径以线段 $(2,4) \\to (3,4)$ 开始。当前顶点变为 $c=(3,4)$。\n从 $c=(3,4)$ 出发，沿主轴的下一个顶点将是 $(4,4)$。我们必须检查 $(4,4)$ 是否是障碍物 $O$ 的一部分。障碍物定义为 $x \\in \\{4,5,6,7\\}$ 且 $y \\in \\{3,4,5,6\\}$。由于 $x=4$ 和 $y=4$ 都在这些范围内，顶点 $(4,4)$ 是一个障碍物。路径在 $c=(3,4)$ 处被阻塞。\n\n**步骤3：障碍物绕行**\n路径被阻塞的当前顶点是 $(x_0, y_0) = (3,4)$。主轴是 $x$ 轴，在 $x_0+1=4$ 处遇到障碍物。障碍物 $O$ 的垂直范围是从 $y_{\\min}=3$ 到 $y_{\\max}=6$。当前 $y$ 坐标 $y_0=4$ 在此范围内，即 $y_{\\min} \\le y_0 \\le y_{\\max}$。\n\n我们使用提供的规则计算绕过障碍物所需的垂直步数：\n- 向下绕行步数 $d_{\\text{down}} = y_{0} - (y_{\\min}-1) = 4 - (3-1) = 4 - 2 = 2$。\n- 向上绕行步数 $d_{\\text{up}} = (y_{\\max}+1) - y_{0} = (6+1) - 4 = 7 - 4 = 3$。\n\n算法选择步数较小的方向。由于 $d_{\\text{down}} = 2  d_{\\text{up}} = 3$，选择的方向是向下。路径必须在 $y$ 轴负方向上移动 $2$ 个单位。这生成了路径段 $(3,4) \\to (3,3) \\to (3,2)$。新的当前顶点是 $c=(3,2)$。\n\n**步骤4：恢复贪心移动**\n当前顶点现在是 $c=(3,2)$。路径现在的 y 坐标 ($y=2$) 不在障碍物的垂直范围 $[3,6]$ 内，因此路径是通畅的。算法恢复沿主轴（$x$ 轴）的贪心移动。\n路径从 $(3,2)$ 延伸到目标点的 $x$ 坐标 $x_t=9$。这创建了从 $(3,2)$ 到 $(9,2)$ 的路径段。所走的路径是 $(3,2) \\to (4,2) \\to (5,2) \\to (6,2) \\to (7,2) \\to (8,2) \\to (9,2)$。\n当前顶点现在是 $c=(9,2)$。该顶点在主轴上与目标点 $t=(9,4)$ 对齐。\n\n算法现在切换到次轴（$y$ 轴）以完成路径。它从 $(9,2)$ 移动到目标点的 $y$ 坐标 $y_t=4$。这创建了最终的路径段 $(9,2) \\to (9,3) \\to (9,4)$。目标点 $t=(9,4)$ 已到达。\n\n**路径长度与绕行计数计算**\n我们通过将各个线段的长度相加来计算总路径长度 $L$：\n1.  初始延伸：$(2,4) \\to (3,4)$。长度 = $1$。\n2.  垂直绕行：$(3,4) \\to (3,2)$。长度 = $|2-4| = 2$。\n3.  绕过障碍物后延伸：$(3,2) \\to (9,2)$。长度 = $|9-3| = 6$。\n4.  最终对齐：$(9,2) \\to (9,4)$。长度 = $|4-2| = 2$。\n\n总路径长度为 $L = 1 + 2 + 6 + 2 = 11$。\n\n最后，我们使用关系式 $L = D_0 + 2k$ 来确定绕行计数 $k$。\n代入计算出的值 $L=11$ 和 $D_0=7$：\n$$11 = 7 + 2k$$\n求解 $k$：\n$$2k = 11 - 7 = 4$$\n$$k = 2$$\n绕行计数 $k$ 为 $2$。这个值代表了绕过障碍物所需的垂直位移的大小（$2$ 个单位）。路径长度是曼哈顿距离加上该位移的两倍，这解释了偏离最优路径线并返回的过程。",
            "answer": "$$\\boxed{2}$$"
        },
        {
            "introduction": "全局布线器常常需要在多个路径选项之间做出选择，而每个选项在路径长度、拥塞和通孔（via）数量等方面都有不同的权衡。这些权衡在数学上通过一个加权成本函数来量化，其中的权重反映了设计上的不同优先级。本练习将通过计算不同权重方案下几个候选路径的成本，展示调整这些权重如何影响最终的布线决策，从而让您深入理解如何对布线器进行调优以满足特定的性能目标 。",
            "id": "4274165",
            "problem": "考虑一个用于电子设计自动化（EDA）的全局布线图（GRG），该图被建模为一个均匀的 $4\\times 4$ 网格，具有两个布线层 $L_1$ 和 $L_2$。一个网络必须从 $L_1$ 上的源点 $s=(1,1)$ 布线到 $L_1$ 上的汇点 $t=(4,4)$。在任一层上，每单位水平或垂直步长的基准长度成本由 $\\alpha$ 加权。在 $L_1$ 上，有两条特定的边是拥塞的，每条边都带有一个由 $\\beta$ 加权的拥塞惩罚；拥塞的边是连接 $(2,2)$ 和 $(2,3)$ 以及 $(2,2)$ 和 $(3,2)$ 的网格边，每条拥塞边贡献的惩罚值为 $p_e=3$。 $L_1$ 上的所有其他边的 $p_e=0$。在 $L_2$ 上，假设所有边的 $p_e=0$。一个过孔（via），用于将布线层从 $L_1$ 切换到 $L_2$ 或反之，会产生一个由 $\\gamma$ 加权的单位过孔成本。\n\n对于一条路径 $P$，其总成本定义为\n$$\nC(P) \\;=\\; \\alpha \\cdot \\text{steps}(P) \\;+\\; \\beta \\cdot \\sum_{e\\in P} p_e \\;+\\; \\gamma \\cdot \\text{vias}(P),\n$$\n其中 $\\text{steps}(P)$ 是遍历的单位边总数，$\\text{vias}(P)$ 是层转换的总次数。\n\n考虑三种典型的候选路径：\n- 路径 $P_1$：一条完全在 $L_1$ 上的曼哈顿最小路径，其 $\\text{steps}(P_1)=6$，经过两条拥塞边，因此 $\\sum_{e\\in P_1} p_e = 3+3=6$，且 $\\text{vias}(P_1)=0$。\n- 路径 $P_2$：一条完全在 $L_1$ 上的绕行路径，避开了拥塞边，其 $\\text{steps}(P_2)=8$，$\\sum_{e\\in P_2} p_e=0$，且 $\\text{vias}(P_2)=0$。\n- 路径 $P_3$：一条曼哈顿最小路径，在进入拥塞区域前切换到 $L_2$，并在靠近汇点处返回 $L_1$，其 $\\text{steps}(P_3)=6$，$\\sum_{e\\in P_3} p_e=0$，且 $\\text{vias}(P_3)=2$。\n\n一个解决加权最短路径问题的最优迷宫路由器将选择在给定 $(\\alpha,\\beta,\\gamma)$ 下使 $C(P)$ 最小化的路径 $P$。考虑以下三个权重向量：\n- $\\mathbf{w}_a$: $(\\alpha,\\beta,\\gamma)=(1,0.6,0.7)$,\n- $\\mathbf{w}_b$: $(\\alpha,\\beta,\\gamma)=(1,2,5)$,\n- $\\mathbf{w}_c$: $(\\alpha,\\beta,\\gamma)=(1,0.1,3)$.\n\n哪个选项正确地指出了每个权重向量所选择的路径，从而说明了路径选择对 $(\\alpha,\\beta,\\gamma)$ 的敏感性？\n\nA. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。\n\nB. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。\n\nC. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_3$。\n\nD. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_2$。",
            "solution": "用户提供了一个电子设计自动化（EDA）领域的问题，具体涉及全局布线算法。任务是验证问题陈述，如果有效，则在三个给定的候选路径中，为三组不同的成本权重确定最优布线路径。\n\n### 问题验证\n\n首先，我将根据指定标准验证问题陈述。\n\n**步骤1：提取给定条件**\n\n-   **布线网格：** 一个均匀的 $4\\times 4$ 网格，具有两个布线层 $L_1$ 和 $L_2$。\n-   **网络：** 从 $L_1$ 上的源点 $s=(1,1)$ 到 $L_1$ 上的汇点 $t=(4,4)$。\n-   **成本函数：** 一条路径 $P$ 的总成本由 $C(P) = \\alpha \\cdot \\text{steps}(P) + \\beta \\cdot \\sum_{e\\in P} p_e + \\gamma \\cdot \\text{vias}(P)$ 给出。\n-   **成本组成部分：**\n    -   $\\text{steps}(P)$: 遍历的单位边总数。每步的成本由 $\\alpha$ 加权。\n    -   $\\sum_{e\\in P} p_e$: 路径上各边的拥塞惩罚之和。总惩罚由 $\\beta$ 加权。\n    -   $\\text{vias}(P)$: 层转换（过孔）的总次数。每个过孔的成本由 $\\gamma$ 加权。\n-   **拥塞数据：**\n    -   在 $L_1$ 上，从 $(2,2)$ 到 $(2,3)$ 以及从 $(2,2)$ 到 $(3,2)$ 的边是拥塞的。\n    -   对于每条拥塞边，惩罚值为 $p_e=3$。\n    -   对于 $L_1$ 上的所有其他边以及 $L_2$ 上的所有边，$p_e=0$。\n-   **候选路径：**\n    -   **$P_1$**：一条在 $L_1$ 上的曼哈顿最小路径。\n        -   $\\text{steps}(P_1)=6$\n        -   $\\sum_{e\\in P_1} p_e = 3+3=6$\n        -   $\\text{vias}(P_1)=0$\n    -   **$P_2$**：一条在 $L_1$ 上的绕行路径。\n        -   $\\text{steps}(P_2)=8$\n        -   $\\sum_{e\\in P_2} p_e=0$\n        -   $\\text{vias}(P_2)=0$\n    -   **$P_3$**：一条使用层切换的曼哈顿最小路径。\n        -   $\\text{steps}(P_3)=6$\n        -   $\\sum_{e\\in P_3} p_e=0$\n        -   $\\text{vias}(P_3)=2$\n-   **权重向量：**\n    -   $\\mathbf{w}_a$: $(\\alpha,\\beta,\\gamma)=(1,0.6,0.7)$\n    -   $\\mathbf{w}_b$: $(\\alpha,\\beta,\\gamma)=(1,2,5)$\n    -   $\\mathbf{w}_c$: $(\\alpha,\\beta,\\gamma)=(1,0.1,3)$\n\n**步骤2：使用提取的给定条件进行验证**\n\n-   **科学性：** 该问题牢固地基于VLSI电路的全局布线原理。成本函数是迷宫路由器（如Lee算法或A*搜索）使用的标准简化模型，用于在平衡线长、拥塞和过孔使用之间找到最短路径。全局布线图（GRG）、拥塞惩罚和过孔成本等概念在EDA领域都是标准术语。从 $s=(1,1)$ 到 $t=(4,4)$ 的曼哈顿距离是 $|4-1| + |4-1| = 3+3=6$，这正确地验证了 $\\text{steps}(P)=6$ 的路径是曼哈顿最小路径。为每条典型路径（$P_1, P_2, P_3$）列出的属性与其描述一致。\n-   **适定性：** 该问题提供了一个明确的目标：对于三组不同的权重，从三个候选路径中找出成本最小的路径。执行此计算所需的所有数据都已给出。问题不是要找到整个网格上的绝对最优路径，而是比较三个具体的、定义明确的候选路径，这使其成为一个直接且适定的评估任务。\n-   **客观性：** 问题陈述以精确、量化和无歧义的语言编写。所有术语都已定义，任务纯粹是计算性的。\n\n问题陈述没有科学、事实或逻辑上的缺陷。它是完整的、一致的且结构良好。\n\n**步骤3：结论与行动**\n\n问题陈述是**有效的**。我将继续进行求解。\n\n### 解题推导\n\n问题的核心是，在三个权重向量（$\\mathbf{w}_a$, $\\mathbf{w}_b$, $\\mathbf{w}_c$）的每一种情况下，计算三条路径（$P_1$, $P_2$, $P_3$）各自的总成本 $C(P)$，并找出每种情况下的最低成本路径。\n\n成本函数为：\n$$\nC(P) = \\alpha \\cdot \\text{steps}(P) + \\beta \\cdot \\sum_{e\\in P} p_e + \\gamma \\cdot \\text{vias}(P)\n$$\n\n路径特征如下：\n-   $P_1$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (6, 6, 0)$\n-   $P_2$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (8, 0, 0)$\n-   $P_3$: $(\\text{steps}, \\sum p_e, \\text{vias}) = (6, 0, 2)$\n\n让我们计算每种情况的成本。\n\n**情况1：权重向量 $\\mathbf{w}_a: (\\alpha,\\beta,\\gamma)=(1, 0.6, 0.7)$**\n\n-   $P_1$ 的成本：$C(P_1) = (1)(6) + (0.6)(6) + (0.7)(0) = 6 + 3.6 + 0 = 9.6$\n-   $P_2$ 的成本：$C(P_2) = (1)(8) + (0.6)(0) + (0.7)(0) = 8 + 0 + 0 = 8.0$\n-   $P_3$ 的成本：$C(P_3) = (1)(6) + (0.6)(0) + (0.7)(2) = 6 + 0 + 1.4 = 7.4$\n\n比较成本：$C(P_3)  C(P_2)  C(P_1)$。最低成本为 $7.4$，对应路径 $P_3$。\n在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$。这表明，在中等拥塞惩罚和低过孔成本的情况下，最优策略是使用过孔来绕过拥塞，同时保持最小路径长度。\n\n**情况2：权重向量 $\\mathbf{w}_b: (\\alpha,\\beta,\\gamma)=(1, 2, 5)$**\n\n-   $P_1$ 的成本：$C(P_1) = (1)(6) + (2)(6) + (5)(0) = 6 + 12 + 0 = 18$\n-   $P_2$ 的成本：$C(P_2) = (1)(8) + (2)(0) + (5)(0) = 8.0$\n-   $P_3$ 的成本：$C(P_3) = (1)(6) + (2)(0) + (5)(2) = 6 + 0 + 10 = 16$\n\n比较成本：$C(P_2)  C(P_3)  C(P_1)$。最低成本为 $8.0$，对应路径 $P_2$。\n在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$。这表明，当拥塞和过孔成本都很高时，最好选择一条更长的路径（绕行）以避免这两种惩罚。\n\n**情况3：权重向量 $\\mathbf{w}_c: (\\alpha,\\beta,\\gamma)=(1, 0.1, 3)$**\n\n-   $P_1$ 的成本：$C(P_1) = (1)(6) + (0.1)(6) + (3)(0) = 6 + 0.6 + 0 = 6.6$\n-   $P_2$ 的成本：$C(P_2) = (1)(8) + (0.1)(0) + (3)(0) = 8.0$\n-   $P_3$ 的成本：$C(P_3) = (1)(6) + (0.1)(0) + (3)(2) = 6 + 0 + 6 = 12.0$\n\n比较成本：$C(P_1)  C(P_2)  C(P_3)$。最低成本为 $6.6$，对应路径 $P_1$。\n在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。这种情况，拥塞惩罚非常低而过孔成本很高，使得在最短路径上穿过拥塞区域成为最优选择，因为与绕行或使用过孔的成本相比，该惩罚可以忽略不计。\n\n**结果总结：**\n-   对于 $\\mathbf{w}_a$，最优路径是 $P_3$。\n-   对于 $\\mathbf{w}_b$，最优路径是 $P_2$。\n-   对于 $\\mathbf{w}_c$，最优路径是 $P_1$。\n\n### 逐项分析\n\n现在我将根据推导出的结果评估每个给定选项。\n\n**A. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。**\n-   关于 $\\mathbf{w}_a$ 的陈述是选择 $P_3$。我的计算结果是 $P_3$。这是正确的。\n-   关于 $\\mathbf{w}_b$ 的陈述是选择 $P_2$。我的计算结果是 $P_2$。这是正确的。\n-   关于 $\\mathbf{w}_c$ 的陈述是选择 $P_1$。我的计算结果是 $P_1$。这是正确的。\n该选项的所有三个部分都与推导结果一致。\n结论：**正确**。\n\n**B. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_1$。**\n-   关于 $\\mathbf{w}_a$ 的陈述是选择 $P_2$。这与我计算出的选择 $P_3$ 的结果相矛盾。\n结论：**不正确**。\n\n**C. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_2$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_3$。**\n-   关于 $\\mathbf{w}_a$ 的陈述是选择 $P_1$。这与我计算出的选择 $P_3$ 的结果相矛盾。\n结论：**不正确**。\n\n**D. 在 $\\mathbf{w}_a$ 下，选择的路径是 $P_3$；在 $\\mathbf{w}_b$ 下，选择的路径是 $P_1$；在 $\\mathbf{w}_c$ 下，选择的路径是 $P_2$。**\n-   关于 $\\mathbf{w}_b$ 的陈述是选择 $P_1$。这与我计算出的选择 $P_2$ 的结果相矛盾。\n结论：**不正确**。\n\n唯一正确描述了所有三个权重向量下路径选择的选项是 A。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "由快速启发式算法产生的初始布线方案往往会导致局部拥塞热点，即布线需求超出了可用资源。解决这一问题的常见有效策略是“撕毁和重布”（rip-up and reroute），即移除拥塞网络，并使用考虑拥塞的迷宫算法（maze router）对其进行重新布线。本练习模拟了一个真实的迭代优化过程：您将首先分析一个拥塞的布线布局以量化其溢出（overflow），然后运用拥塞感知迷宫布线的原理，为目标网络找到一条能够解决拥塞问题的新路径 。",
            "id": "4274190",
            "problem": "考虑在矩形网格上进行的电子设计自动化（EDA）全局布线。将布线区域建模为一个网格图 $G=(V,E)$，其顶点 $V$ 是整数格点 $(x,y)$，其中 $x,y \\in \\{0,1,2,3\\}$，其无向边 $E$ 连接单位曼哈顿距离的邻居（仅水平和垂直相邻）。每条边 $e \\in E$ 的容量 $c(e)=1$。有三个双引脚网络 $N_1$、$N_2$ 和 $N_3$，其源-汇对如下：\n- $N_1$：从 $(0,1)$ 到 $(3,1)$，\n- $N_2$：从 $(1,0)$ 到 $(1,3)$，\n- $N_3$：从 $(0,1)$ 到 $(3,0)$。\n假设一个由线探测法产生的初始分配：$N_1$ 沿行 $y=1$ 从 $x=0$ 到 $x=3$ 水平布线，$N_2$ 沿列 $x=1$ 从 $y=0$ 到 $y=3$ 垂直布线，而 $N_3$ 先沿行 $y=1$ 从 $x=0$ 到 $x=3$ 水平布线，然后沿列 $x=3$ 从 $y=1$ 向下到 $y=0$ 垂直布线。边 $e$ 上的分配需求 $d(e)$ 定义为使用 $e$ 的已分配路径的网络数量。总溢出量定义为\n$$\\text{OF} \\;=\\; \\sum_{e \\in E} \\max\\!\\big(0,\\, d(e) - c(e)\\big).$$\n在迷宫布线中，会在 $G$ 上执行广度优先搜索（BFS）或 Dijkstra 风格的搜索，并使用一个惩罚预测拥塞的边成本模型。对于本问题，使用以下边成本\n$$w(e) \\;=\\; 1 \\;+\\; \\lambda \\cdot \\max\\!\\big(0,\\, d(e) + 1 - c(e)\\big),$$\n其中 $\\lambda0$ 是一个拥塞惩罚，而 $d(e)+1$ 中的 $+1$ 反映了当前正在重布线的网络的增量需求。\n\n任务：\n- 使用初始的线探测分配，计算总溢出量 $\\text{OF}$ 并识别出具有最大正值 $d(e)-c(e)$ 的边。\n- 在仅可重布线一个网络且其曼哈顿长度不得超过其初始曼哈顿长度的约束下，选择一个重布线目标和一条迷宫布线找到的路径，使 $\\text{OF}$ 减少至少 $1$ 个单位。\n- 在上述约束和成本模型下，确定在重布线一个网络后可实现的最小总溢出量。将你的最终答案表示为一个精确的整数。",
            "solution": "该问题要求在满足特定约束条件下，通过重布线单个网络来求得布线网格上可实现的最小总溢出量。首先，对问题的正确性和完整性进行验证。\n\n### 第一步：提取已知条件\n- **网格图**：$G=(V,E)$，其中 $V = \\{(x,y) | x,y \\in \\{0, 1, 2, 3\\}\\}$。$E$ 中的边连接曼哈顿距离为 $1$ 的顶点。\n- **边容量**：对所有边 $e \\in E$，$c(e) = 1$。\n- **网络**：\n  - $N_1$：源 $s_1=(0,1)$，汇 $t_1=(3,1)$。\n  - $N_2$：源 $s_2=(1,0)$，汇 $t_2=(1,3)$。\n  - $N_3$：源 $s_3=(0,1)$，汇 $t_3=(3,0)$。\n- **初始布线路径**：\n  - $P_1$：对于 $N_1$，沿 $y=1$ 的水平路径。边集为 $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$。\n  - $P_2$：对于 $N_2$，沿 $x=1$ 的垂直路径。边集为 $\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$。\n  - $P_3$：对于 $N_3$，L形路径。边集为 $\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1)), ((3,1),(3,0))\\}$。\n- **需求与溢出**：\n  - 需求 $d(e)$ 是穿过边 $e$ 的网络路径数量。\n  - 总溢出量 $\\text{OF} = \\sum_{e \\in E} \\max(0, d(e) - c(e))$。\n- **重布线成本模型**：\n  - 对于迷宫布线，边成本为 $w(e) = 1 + \\lambda \\cdot \\max(0, d(e) + 1 - c(e))$，其中 $\\lambda  0$。这里的 $d(e)$ 是布线当前网络*之前*的需求。\n- **重布线约束**：\n  - 只能重布线一个网络。\n  - 新路径的长度不得超过该网络初始路径的长度。\n\n### 第二步：使用提取的已知条件进行验证\n问题陈述定义清晰、内部一致，并且在电子设计自动化（EDA）领域，特别是全局布线算法方面，具有科学依据。它提供了一个清晰的设置，包括网格、网络、初始条件和目标函数。迷宫布线、线探测法布线、溢出和基于拥塞的成本函数等概念在该领域是标准的。问题是客观的，需要基于所提供的数据得出定量答案。没有矛盾、歧义或缺失的信息。该问题有效。\n\n### 第三步：求解\n\n#### 任务一：初始溢出量计算\n我们首先根据给定的网络 $N_1$、$N_2$ 和 $N_3$ 的路径计算每条边 $e$ 的初始需求 $d(e)$。所有边 $e$ 的边容量为 $c(e)=1$。\n\n1.  **沿 $y=1$ 的水平边上的需求**：\n    - 边 $((0,1),(1,1))$ 被 $N_1$ 和 $N_3$ 使用。因此，$d(((0,1),(1,1))) = 2$。\n    - 边 $((1,1),(2,1))$ 被 $N_1$ 和 $N_3$ 使用。因此，$d(((1,1),(2,1))) = 2$。\n    - 边 $((2,1),(3,1))$ 被 $N_1$ 和 $N_3$ 使用。因此，$d(((2,1),(3,1))) = 2$。\n\n2.  **沿 $x=1$ 的垂直边上的需求**：\n    - 边 $((1,0),(1,1))$、\n$((1,1),(1,2))$ 和 $((1,2),(1,3))$ 仅被 $N_2$ 使用。它们的需求为 $1$。\n\n3.  **其他边上的需求**：\n    - 边 $((3,1),(3,0))$ 仅被 $N_3$ 使用。其需求为 $1$。\n    - 网格中所有其他边都未使用，因此它们的需求为 $0$。\n\n边 $e$ 上的溢出量为 $\\max(0, d(e) - c(e))$。\n- 对于从 $(0,1)$ 到 $(3,1)$ 的路径段上的三条边：$d(e)=2$，因此溢出量为 $\\max(0, 2-1) = 1$。\n- 对于所有其他已使用的边，$d(e)=1$，因此溢出量为 $\\max(0, 1-1) = 0$。\n- 对于所有未使用的边，$d(e)=0$，因此溢出量为 $\\max(0, 0-1) = 0$。\n\n总溢出量是所有边上溢出量的总和：\n$$ \\text{OF}_{\\text{initial}} = (2-1) + (2-1) + (2-1) = 1+1+1=3. $$\n溢出量最大的边 ($d(e)-c(e)=1$) 是 $((0,1),(1,1))$、\n$((1,1),(2,1))$ 和 $((2,1),(3,1))$。\n\n#### 任务二：重布线分析\n我们必须只重布线一个网络。新路径的长度不得超过初始路径的长度。\n\n- **网络 $N_1$**：源 $(0,1)$，汇 $(3,1)$。\n  - 曼哈顿距离：$|3-0| + |1-1| = 3$。\n  - 初始路径长度：$3$ 个水平步长。长度为 $3$。\n  - 任何新路径的长度最多为 $3$。由于最短可能路径长度是曼哈顿距离 $3$，任何新路径都必须是长度为 $3$ 的最短路径。从 $(0,1)$ 到 $(3,1)$ 的长度为 $3$ 的路径需要 $3$ 次“向右”移动和 $0$ 次“向上”/“向下”/“向左”移动。唯一这样的路径是初始路径。因此，$N_1$ 无法重布线。\n\n- **网络 $N_2$**：源 $(1,0)$，汇 $(1,3)$。\n  - 曼哈顿距离：$|1-1| + |3-0| = 3$。\n  - 初始路径长度：$3$ 个垂直步长。长度为 $3$。\n  - 与 $N_1$ 类似，任何新路径的长度必须为 $3$。这需要 $3$ 次“向上”移动和 $0$ 次其他移动。唯一这样的路径是初始路径。因此，$N_2$ 无法重布线。\n\n- **网络 $N_3$**：源 $(0,1)$，汇 $(3,0)$。\n  - 曼哈顿距离：$|3-0| + |0-1| = 4$。\n  - 初始路径长度：$3$ 次“向右”移动，$1$ 次“向下”移动。长度为 $4$。\n  - 任何新路径的长度最多为 $4$。最短路径长度为 $4$。因此，任何有效的重布线都必须使用长度为 $4$ 的最短曼哈顿路径。从 $(0,1)$ 到 $(3,0)$ 的长度为 $4$ 的路径必须由 $3$ 次“向右”（R）移动和 $1$ 次“向下”（D）移动组成。此类路径的数量由二项式系数 $\\binom{3+1}{1} = \\binom{4}{1} = 4$ 给出。\n  - 四条路径是从 $(0,1)$ 出发的移动序列：\n    1.  RRRD: $(0,1) \\to (1,1) \\to (2,1) \\to (3,1) \\to (3,0)$。这是初始路径。\n    2.  RRDR: $(0,1) \\to (1,1) \\to (2,1) \\to (2,0) \\to (3,0)$。\n    3.  RDRR: $(0,1) \\to (1,1) \\to (1,0) \\to (2,0) \\to (3,0)$。\n    4.  DRRR: $(0,1) \\to (0,0) \\to (1,0) \\to (2,0) \\to (3,0)$。\n\n我们需要为 $N_3$ 的三种备选路径分别评估总溢出量。在重布线 $N_3$ 时，我们首先“拆除”其初始路径。剩余的需求 $d'(e)$ 来自 $N_1$ 和 $N_2$。\n- 对于 $N_1$ 路径上的边：$\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$，$d'(e)=1$。\n- 对于 $N_2$ 路径上的边：$\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$，$d'(e)=1$。\n- 对于所有其他边，$d'(e)=0$。\n\n现在我们为 $N_3$ 的每条备选路径计算新的总溢出量。新需求为 $d_{\\text{new}}(e)$。\n\n- **路径 2 (RRDR)**：$N_3$ 的新路径使用边 $((0,1),(1,1))$、\n$((1,1),(2,1))$、\n$((2,1),(2,0))$、\n$((2,0),(3,0))$。\n  - 边 $((0,1),(1,1))$：被 $N_1$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出量 $= 1$。\n  - 边 $((1,1),(2,1))$：被 $N_1$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出量 $= 1$。\n  - 路径上的其他边有 $d'=0$，因此 $d_{\\text{new}}=1$ 且溢出量为 $0$。\n  - 边 $((2,1),(3,1))$，先前被 $N_1$ 和 $N_3$ 使用，现在仅被 $N_1$ 使用，因此其需求为 $1$，溢出量为 $0$。\n  - 此情况下的总溢出量为 $1+1=2$。\n\n- **路径 3 (RDRR)**：$N_3$ 的新路径使用边 $((0,1),(1,1))$、\n$((1,1),(1,0))$、\n$((1,0),(2,0))$、\n$((2,0),(3,0))$。注意，边 $((1,1),(1,0))$ 与 $((1,0),(1,1))$ 是同一条边。\n  - 边 $((0,1),(1,1))$：被 $N_1$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出量 $= 1$。\n  - 边 $((1,0),(1,1))$：被 $N_2$ 使用。$d' = 1$。$d_{\\text{new}} = 1+1=2$。溢出量 $= 1$。\n  - 路径上的其他边有 $d'=0$，因此 $d_{\\text{new}}=1$ 且溢出量为 $0$。\n  - 此情况下的总溢出量为 $1+1=2$。\n\n- **路径 4 (DRRR)**：$N_3$ 的新路径使用边 $((0,1),(0,0))$、\n$((0,0),(1,0))$、\n$((1,0),(2,0))$、\n$((2,0),(3,0))$。\n  - 这四条边都不属于 $N_1$ 或 $N_2$ 的初始路径。因此对于它们中的每一条，$d'(e)=0$。添加 $N_3$ 使 $d_{\\text{new}}(e)=1$ 并在这些边上产生零溢出。\n  - $N_1$ 的路径、$N_2$ 的路径和 $N_3$ 的新路径是边不相交的：\n    - $P_1$ 边集：$\\{((0,1),(1,1)), ((1,1),(2,1)), ((2,1),(3,1))\\}$\n    - $P_2$ 边集：$\\{((1,0),(1,1)), ((1,1),(1,2)), ((1,2),(1,3))\\}$\n    - 新 $P_3$ 边集：$\\{((0,1),(0,0)), ((0,0),(1,0)), ((1,0),(2,0)), ((2,0),(3,0))\\}$\n  - 由于这三条路径不共享任何边，网格中任何边上的需求最多为 $1$。鉴于 $c(e)=1$，需求 $d_{\\text{new}}(e)$ 永远不会超过容量。\n  - 因此，对所有 $e \\in E$，$d_{\\text{new}}(e) \\le 1$，且对所有边 $\\max(0, d_{\\text{new}}(e) - c(e)) = 0$。\n  - 此情况下的总溢出量为 $0$。\n\n#### 任务三：可实现的最小总溢出量\n我们发现，在给定的约束下，重布线 $N_1$ 或 $N_2$ 是不可能的。重布线 $N_3$ 是可能的，其备选路径产生的总溢出量分别为 $2$、$2$ 和 $0$。这些值中的最小值为 $0$。由于溢出量是非负的，$0$ 是可能达到的最低值。\n\n问题还指定了一个迷宫布线成本函数。让我们验证一下导致零溢出的路径是否会被选中。重布线 $N_3$ 时，边 $e$ 的成本为 $w(e) = 1 + \\lambda \\cdot \\max(0, d'(e) + 1 - 1) = 1 + \\lambda \\cdot d'(e)$，其中 $d'(e)$ 是来自 $N_1$ 和 $N_2$ 的需求。被 $N_1$ 或 $N_2$ 使用的边有 $d'(e)=1$ 且成本为 $1+\\lambda$。未使用的边有 $d'(e)=0$ 且成本为 $1$。\n- 路径 1 (RRRD) 的成本：$3(1+\\lambda) + 1 = 4+3\\lambda$。\n- 路径 2 (RRDR) 的成本：$2(1+\\lambda) + 2(1) = 4+2\\lambda$。\n- 路径 3 (RDRR) 的成本：$2(1+\\lambda) + 2(1) = 4+2\\lambda$。\n- 路径 4 (DRRR) 的成本：$4(1) = 4$。\n\n由于 $\\lambda0$，成本最低的路径是路径 4 (DRRR)。这是一条拥塞感知迷宫布线器会选择的路径，也正是产生最小溢出量的路径。\n\n重布线一个网络后可实现的最小总溢出量为 $0$。",
            "answer": "$$\\boxed{0}$$"
        }
    ]
}
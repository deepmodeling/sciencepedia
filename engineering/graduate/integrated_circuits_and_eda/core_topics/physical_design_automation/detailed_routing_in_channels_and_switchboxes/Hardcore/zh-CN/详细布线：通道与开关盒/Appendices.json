{
    "hands_on_practices": [
        {
            "introduction": "理论学习的最佳方式是实践。本练习将指导您完成一个经典的通道布线问题，从头开始应用约束左缘算法。通过亲手定义网络区间、构建垂直约束图 (VCG) 并系统地将网络分配到布线轨道，您将掌握详细布线中的核心技能，并深刻理解算法的运作机制 。",
            "id": "4265276",
            "problem": "在电子设计自动化 (EDA) 流程中，一个双层通道布线实例出现在两个开关盒边界之间。该通道跨越由 $1$ 到 $14$ 索引的离散列。引脚位于通道的顶部和底部边界上，每个引脚都标有其网络名称。所有网络都必须在没有拐角的情况下布线，水平线段限制在通道内的轨道上，垂直连接在引脚所在的列上。布线模型是经典的双层通道布线模型，其中水平布线在一个金属层上，垂直互连在另一个金属层上，并且当同一列的顶部和底部引脚属于不同网络时，应用垂直约束图 (VCG)。\n\n顶部边界引脚（列 $\\rightarrow$ 网络）为：\n- $1 \\rightarrow A$，$3 \\rightarrow B$，$5 \\rightarrow C$，$6 \\rightarrow D$，$8 \\rightarrow E$，$9 \\rightarrow F$，$12 \\rightarrow G$，$14 \\rightarrow A$。\n\n底部边界引脚（列 $\\rightarrow$ 网络）为：\n- $2 \\rightarrow C$，$3 \\rightarrow D$，$4 \\rightarrow B$，$7 \\rightarrow E$，$10 \\rightarrow F$，$11 \\rightarrow G$，$13 \\rightarrow A$。\n\n假设以下设计规则成立：\n- 最小线宽为 $w = 0.5\\,\\mu\\text{m}$。\n- 相邻水平导线之间的最小同层间距为 $s = 0.7\\,\\mu\\text{m}$。\n- 轨道间距（中心到中心）为 $P = w + s$。\n- 相邻轨道上过孔之间的最小中心到中心垂直间距为 $s_{v} = 0.8\\,\\mu\\text{m}$。\n- 轨道从上到下索引为 $1,2,\\dots$；分配给较小轨道索引的网络在物理上位于分配给较大轨道索引的网络的上方。\n\n任务：\n1. 为每个网络构建其水平区间端点，该区间由其在顶部和底部边界上的引脚所跨越的最小和最大列定义。\n2. 计算每列的密度 $D(i)$，对于每个 $i \\in \\{1,2,\\dots,14\\}$，其中 $D(i)$ 是覆盖列 $i$ 的网络区间数量。\n3. 根据引脚位置推导 VCG，当在同一列，顶部引脚的网络必须布线在底部引脚的网络之上时，添加一条有向边。\n4. 逐步执行无拐角的约束左边缘放置算法：在每个轨道上，选择 VCG 中入度为零的网络集合，并按其左端点递增的顺序放置它们，确保同一轨道内没有水平区间重叠。\n5. 验证最终分配是否遵守 VCG 暗示的所有约束，并满足所述的设计规则，包括水平间距和过孔垂直间距。\n6. 根据您的合法布局和给定的轨道间距，计算最小通道高度 $H$（以微米为单位），并以微米表示 $H$。将您的答案四舍五入到四位有效数字。\n\n您的最终答案必须是上面指定的以微米为单位的单个实数值 $H$，四舍五入到四位有效数字。任何其他输出都将被视为不正确。",
            "solution": "问题陈述已经过验证，被认为是集成电路电子设计自动化 (EDA) 领域中一个定义明确、具有科学依据的问题。它为解决一个标准的双层通道布线实例提供了一套完整且一致的数据和约束。任务定义清晰，所用方法（约束左边缘算法）是一种标准技术。所有数值和设计规则在物理上都是合理的。\n\n解决方案按顺序执行六个指定任务。\n\n**任务1：构建水平区间**\n\n每个网络的水平区间由其引脚的最小和最大列索引确定。网络连接顶部和底部边界上的引脚。\n\n- **网络 A**：引脚位于列 $1$（顶部）、$14$（顶部）和 $13$（底部）。区间为 $[\\min(1, 13, 14), \\max(1, 13, 14)] = [1, 14]$。\n- **网络 B**：引脚位于列 $3$（顶部）和 $4$（底部）。区间为 $[\\min(3, 4), \\max(3, 4)] = [3, 4]$。\n- **网络 C**：引脚位于列 $5$（顶部）和 $2$（底部）。区间为 $[\\min(2, 5), \\max(2, 5)] = [2, 5]$。\n- **网络 D**：引脚位于列 $6$（顶部）和 $3$（底部）。区间为 $[\\min(3, 6), \\max(3, 6)] = [3, 6]$。\n- **网络 E**：引脚位于列 $8$（顶部）和 $7$（底部）。区间为 $[\\min(7, 8), \\max(7, 8)] = [7, 8]$。\n- **网络 F**：引脚位于列 $9$（顶部）和 $10$（底部）。区间为 $[\\min(9, 10), \\max(9, 10)] = [9, 10]$。\n- **网络 G**：引脚位于列 $12$（顶部）和 $11$（底部）。区间为 $[\\min(11, 12), \\max(11, 12)] = [11, 12]$。\n\n网络区间总结：\n- 网络 A: $[1, 14]$\n- 网络 B: $[3, 4]$\n- 网络 C: $[2, 5]$\n- 网络 D: $[3, 6]$\n- 网络 E: $[7, 8]$\n- 网络 F: $[9, 10]$\n- 网络 G: $[11, 12]$\n\n**任务2：计算每列密度**\n\n列 $i$ 的密度 $D(i)$ 是跨越该列的网络区间的数量。\n\n- $D(1)$: 网络 A. $D(1)=1$.\n- $D(2)$: 网络 A, C. $D(2)=2$.\n- $D(3)$: 网络 A, B, C, D. $D(3)=4$.\n- $D(4)$: 网络 A, B, C, D. $D(4)=4$.\n- $D(5)$: 网络 A, C, D. $D(5)=3$.\n- $D(6)$: 网络 A, D. $D(6)=2$.\n- $D(7)$: 网络 A, E. $D(7)=2$.\n- $D(8)$: 网络 A, E. $D(8)=2$.\n- $D(9)$: 网络 A, F. $D(9)=2$.\n- $D(10)$: 网络 A, F. $D(10)=2$.\n- $D(11)$: 网络 A, G. $D(11)=2$.\n- $D(12)$: 网络 A, G. $D(12)=2$.\n- $D(13)$: 网络 A. $D(13)=1$.\n- $D(14)$: 网络 A. $D(14)=1$.\n\n最大密度为 $D_{max} = \\max_i D(i) = 4$，出现在列 $3$ 和 $4$。这为任何有效的布线解决方案建立了 $4$ 个轨道的下限。\n\n**任务3：推导垂直约束图 (VCG)**\n\n在任何存在两个不同网络的引脚的列（一个在顶部边界，一个在底部边界）都会产生垂直约束。带有顶部引脚的网络必须布线在物理上位于带有底部引脚的网络之上的轨道中。由于较小的轨道索引在物理上更高，这转化为顶部网络的轨道索引小于底部网络的轨道索引。从顶部网络到底部网络的有向边被添加到 VCG 中。\n\n- 在列 $3$ 处，有一个网络 $B$ 的顶部引脚和一个网络 $D$ 的底部引脚。这施加了网络 $B$ 必须布线在网络 $D$ 之上的约束。这在 VCG 中表示为一条有向边 $B \\rightarrow D$。\n- 没有其他列在顶部和底部边界上同时具有两个不同网络的引脚。\n- 因此，VCG 由网络顶点集 $\\{A, B, C, D, E, F, G\\}$ 和一条有向边 $B \\rightarrow D$ 组成。该图是无环的，证实了该问题是可布线的。\n\n**任务4：执行约束左边缘放置**\n\n约束左边缘算法是一个迭代过程。在每一步中，一个新的轨道会用兼容的网络填充。\n所有网络的集合是 $U_{all} = \\{A, B, C, D, E, F, G\\}$。VCG 是 $B \\rightarrow D$。\n\n**轨道 1：**\n- 未放置网络的集合是 $U = U_{all}$。\n- 可用网络（在 $U$ 的 VCG 中入度为 $0$ 的网络）的集合是 $S_1 = \\{A, C, B, E, F, G\\}$。网络 $D$ 不可用，因为它有一条来自 $B$ 的入边。\n- 我们按左端点对 $S_1$ 中的网络进行排序：$A([1,14]), C([2,5]), B([3,4]), E([7,8]), F([9,10]), G([11,12])$。\n- 排序列表中的第一个网络 $A$ 被放置在轨道 1 中。\n- 它的区间 $[1, 14]$ 占据了整个通道长度。$S_1$ 中没有其他网络可以放置在轨道 1 中。\n- **轨道 1 分配：{A}**\n\n**轨道 2：**\n- 未放置网络的集合是 $U = \\{B, C, D, E, F, G\\}$。$U$ 上的 VCG 仍然是 $B \\rightarrow D$。\n- 可用网络的集合是 $S_2 = \\{C, B, E, F, G\\}$。\n- 按左端点对 $S_2$ 进行排序：$C([2,5]), B([3,4]), E([7,8]), F([9,10]), G([11,12])$。\n- 放置网络 $C$ ([2,5])。占用的范围是 $[2,5]$。\n- 下一个可用网络是 $B$ ([3,4])，它与 C 重叠。跳过。\n- 下一个可用网络是 $E$ ([7,8])。其左端点 $7$ 大于上一个放置网络的右端点（$5$）。放置 E。现在占用的范围是 $[2,5]$ 和 $[7,8]$。\n- 下一个可用网络是 $F$ ([9,10])。其左端点 $9$ 大于 $8$。放置 F。现在占用的范围是 $[2,5]$, $[7,8]$ 和 $[9,10]$。\n- 下一个可用网络是 $G$ ([11,12])。其左端点 $11$ 大于 $10$。放置 G。占用的范围是 $[2,5]$, $[7,8]$, $[9,10]$ 和 $[11,12]$。\n- **轨道 2 分配：{C, E, F, G}**\n\n**轨道 3：**\n- 未放置网络的集合是 $U = \\{B, D\\}$。$U$ 上的 VCG 是 $B \\rightarrow D$。\n- 可用网络的集合是 $S_3 = \\{B\\}$（$B$ 的入度为 $0$，$D$ 的入度为 $1$）。\n- 放置网络 $B$ ([3,4])。\n- **轨道 3 分配：{B}**\n\n**轨道 4：**\n- 未放置网络的集合是 $U = \\{D\\}$。\n- 可用网络的集合是 $S_4 = \\{D\\}$（网络 $B$ 已放置，因此 $D$ 在当前未放置网络的 VCG 中入度为 $0$）。\n- 放置网络 $D$ ([3,6])。\n- **轨道 4 分配：{D}**\n\n所有网络都已放置。算法终止，共需要 $4$ 个轨道。\n\n**任务5：验证分配**\n\n最终放置如下：\n- 轨道 1: A\n- 轨道 2: C, E, F, G\n- 轨道 3: B\n- 轨道 4: D\n\n我们必须根据所有约束来验证这一点。\n1.  **VCG 合规性**：唯一的约束是 $B \\rightarrow D$。网络 $B$ 在轨道 $3$ 中，网络 $D$ 在轨道 $4$ 中。由于轨道索引从上到下递增（较小的索引物理上更高），轨道索引 $3  4$ 满足了 $B$ 布线在 $D$ 之上的要求。VCG 得到满足。\n2.  **水平重叠**：在每个轨道内，分配的网络的水平区间必须是不相交的。\n    - 轨道 1：只有网络 A。不可能有重叠。\n    - 轨道 2：C([2,5]), E([7,8]), F([9,10]), G([11,12])。所有区间都不相交。\n    - 轨道 3：只有网络 B。不可能有重叠。\n    - 轨道 4：只有网络 D。不可能有重叠。\n    所有轨道都满足无重叠规则。\n3.  **设计规则**：最小线宽为 $w = 0.5\\,\\mu\\text{m}$。最小间距为 $s = 0.7\\,\\mu\\text{m}$。轨道间距为 $P = w + s = 0.5 + 0.7 = 1.2\\,\\mu\\text{m}$。问题指定相邻轨道上过孔之间的最小中心到中心垂直间距为 $s_v = 0.8\\,\\mu\\text{m}$。由于相邻轨道之间的中心到中心距离是间距 $P = 1.2\\,\\mu\\text{m}$，且 $P > s_v$，因此该垂直间距约束得到满足。\n\n该布局是合法的且完整的。\n\n**任务6：计算最小通道高度 H**\n\n布线解决方案需要 $N_{tr} = 4$ 个轨道。通道高度 $H$ 是这些轨道消耗的总垂直空间。在没有关于边界间隙的进一步说明的情况下，标准解释是总高度是轨道数乘以轨道间距。\n\n轨道间距 $P$ 由下式给出：\n$$ P = w + s = 0.5\\,\\mu\\text{m} + 0.7\\,\\mu\\text{m} = 1.2\\,\\mu\\text{m} $$\n总通道高度 $H$ 为：\n$$ H = N_{tr} \\times P $$\n代入数值：\n$$ H = 4 \\times 1.2\\,\\mu\\text{m} = 4.8\\,\\mu\\text{m} $$\n问题要求答案四舍五入到四位有效数字。计算出的值 $4.8$ 有两位有效数字。为了用四位有效数字表示，我们将其写为 $4.800$。",
            "answer": "$$\\boxed{4.800}$$"
        },
        {
            "introduction": "在理想情况下，约束图是无环的，但实际设计中常常出现垂直约束环路，这使得无狗腿 (dogleg-free) 布线变得不可能。本练习探讨了解决这一难题的两种关键策略：引入狗腿和引脚交换。您将分析一个包含 VCG 环路的具体案例，并量化比较这两种方法对所需布线轨道数的影响，从而学会如何在设计中做出明智的权衡 。",
            "id": "4265336",
            "problem": "考虑一个双行通道，其列由整数 $1$ 到 $12$ 索引。在顶部边界，每列最多可以有一个引脚；同样，在底部边界也是如此。三个多端点网络 $N_1$、$N_2$ 和 $N_3$ 的引脚布局如下：\n- 顶部边界引脚：第 $3$ 列承载 $N_1$，第 $7$ 列承载 $N_2$，第 $10$ 列承载 $N_3$。\n- 底部边界引脚：第 $3$ 列承载 $N_2$，第 $7$ 列承载 $N_3$，第 $10$ 列承载 $N_1$。\n每个网络在其他位置还至少有一个额外的引脚，因此其水平跨度（在不使用弯腿的情况下，其水平干线所占的区间）为：\n- $N_1$ 跨越列 $[1,10]$，\n- $N_2$ 跨越列 $[3,12]$，\n- $N_3$ 跨越列 $[5,11]$。\n假设每个网络只有一个水平干线，除非明确引入弯腿。设通道密度 $D$ 为在任意列上重叠的网络跨度的最大数量，由于 $N_1$、$N_2$ 和 $N_3$ 在第 $6$ 列到第 $10$ 列上重叠，您可以取 $D=3$。\n\n根据垂直约束图（VCG）的标准定义，如果在某一列上，顶部边界有网络 $A$ 的引脚，而底部边界有网络 $B$ 的引脚，则存在一条有向边 $A \\rightarrow B$。给定的引脚布局会产生边 $N_1 \\rightarrow N_2$（在第 $3$ 列）、$N_2 \\rightarrow N_3$（在第 $7$ 列）和 $N_3 \\rightarrow N_1$（在第 $10$ 列），形成一个有向环。在无弯腿的布线方案中，VCG 中的环路会阻止任何满足所有垂直约束的轨道线性排序。\n\n然而，假设在交换前方案中，您被允许使用一个弯腿；并且，独立地，在交换后方案中，您被允许交换同一网络在相对边界上的两个引脚。具体来说，假设 $N_3$ 有两个位于相对两侧的端子，连接到位于第 $7$ 列和第 $10$ 列的功能对称门，因此合法的引脚交换可以在这两列之间交换 $N_3$ 的侧边分配，而不会改变其水平跨度或 $N_1$ 和 $N_2$ 的跨度。该交换通过消除有向环来重新配置 VCG，同时保持区间重叠不变。\n\n从通道密度和无弯腿左缘算法布线中 VCG 无环性的必要性出发，推导在“允许一个弯腿”的交换前方案下和无弯腿的交换后方案下所需的最小轨道数，并计算由于交换导致的所需轨道数的减少量。将您的最终答案表示为单个实数。无需单位。无需四舍五入；报告精确的整数值。",
            "solution": "该问题是有效的，因为它科学地基于集成电路的电子设计自动化（EDA）原理，特别是通道布线。它提法明确、客观，并包含足够的信息来推导出唯一的解决方案。问题的核心是应用通道宽度（布线所需的轨道数量）的基本下界。\n\n通道布线所需的最小轨道数 $W$ 由两个主要约束决定：\n$1$. 通道密度 $D$，即穿过通道任何垂直切割线（列）的最大网络数。在任何这样的列上，这些网络中的每一个都需要自己的水平轨道。因此，$W \\ge D$。\n$2$. 垂直约束图（VCG）中最长路径的长度 $L$。VCG 为每个网络设一个节点，如果网络 $N_i$ 的引脚必须放置在同一列中网络 $N_j$ 引脚上方的轨道上，则存在一条有向边 $N_i \\rightarrow N_j$。VCG 中的路径代表了一系列必须垂直堆叠的网络，因此轨道数必须至少是最长路径中的网络数。对于无弯腿布线，$W \\ge L$。如果 VCG 包含环路，则 $L$ 实际上是无限的，无弯腿布线是不可能的。\n\n我们将分析问题陈述中描述的两种方案。\n\n**方案1：交换前，使用一个弯腿**\n\n首先，我们确定交换前配置的参数。\n网络的水平跨度如下：\n- $N_1$: $[1, 10]$\n- $N_2$: $[3, 12]$\n- $N_3$: $[5, 11]$\n通道密度 $D$ 是在任意列上重叠的最大网络数。最大重叠区间为 $[5, 10]$，其中所有三个网络 $N_1$、$N_2$ 和 $N_3$ 都存在。问题陈述中说明，我们也确认，密度为 $D=3$。\n\n引脚布局定义了 VCG：\n- 第 $3$ 列：顶部引脚为 $N_1$，底部引脚为 $N_2$。这产生了一个垂直约束，表示为有向边 $N_1 \\rightarrow N_2$。\n- 第 $7$ 列：顶部引脚为 $N_2$，底部引脚为 $N_3$。这产生了边 $N_2 \\rightarrow N_3$。\n- 第 $10$ 列：顶部引脚为 $N_3$，底部引脚为 $N_1$。这产生了边 $N_3 \\rightarrow N_1$。\n\n这些边形成了一个有向环：$N_1 \\rightarrow N_2 \\rightarrow N_3 \\rightarrow N_1$。该环路的存在使得标准的无弯腿布线无法进行，因为它意味着一个矛盾的排序要求（$N_1$ 必须在 $N_2$ 之上，$N_2$ 必须在 $N_3$ 之上，$N_3$ 又必须在 $N_1$ 之上）。\n\n问题允许使用“一个弯腿”。弯腿允许将单个网络分割成位于不同轨道上的两个或多个水平段。这是打破 VCG 环路的标准技术。为了打破环路，我们可以在三个网络中的任何一个引入弯腿，例如 $N_1$。\n通过将网络 $N_1$ 分割成两个子网络，$N_{1A}$（用于左侧部分，包括第 $3$ 列的引脚）和 $N_{1B}$（用于右侧部分，包括第 $10$ 列的引脚），我们可以解决这个环路。VCG 修改如下：\n- 边 $N_1 \\rightarrow N_2$ 变为 $N_{1A} \\rightarrow N_2$。\n- 边 $N_2 \\rightarrow N_3$ 保持不变。\n- 边 $N_3 \\rightarrow N_1$ 变为 $N_3 \\rightarrow N_{1B}$。\n\n修改后的 VCG 现在是一个有向无环图（DAG）。我们可以在这个新图中找到最长路径来确定垂直约束的下界。其中一条路径是 $N_{1A} \\rightarrow N_2 \\rightarrow N_3 \\rightarrow N_{1B}$。该路径的长度 $L_{pre}$ 是它包含的节点（网络/子网络）数量。这里，$L_{pre} = 4$。\n\n在这种方案下所需的最小轨道数 $W_{pre}$ 是密度和已解决的 VCG 中最长路径长度的最大值：\n$$W_{pre} = \\max(D, L_{pre}) = \\max(3, 4) = 4$$\n因此，在交换前需要 $4$ 个轨道。\n\n**方案2：交换后，无弯腿**\n\n在这种方案下，对网络 $N_3$ 在第 $7$ 列和第 $10$ 列之间进行引脚交换。\n- 交换前第 $7$ 列：顶部 $N_2$，底部 $N_3$。\n- 交换前第 $10$ 列：顶部 $N_3$，底部 $N_1$。\n该交换在这些列上交换了 $N_3$ 的侧边分配，这意味着在这些引脚位置上其他网络也发生了相应的交换。\n- 交换后第 $7$ 列：顶部 $N_3$，底部 $N_2$。\n- 交换后第 $10$ 列：顶部 $N_1$，底部 $N_3$。\n\n这一变化重新配置了 VCG。新的边是：\n- 第 $3$ 列：顶部 $N_1$，底部 $N_2 \\implies N_1 \\rightarrow N_2$（不变）。\n- 第 $7$ 列：顶部 $N_3$，底部 $N_2 \\implies N_3 \\rightarrow N_2$。\n- 第 $10$ 列：顶部 $N_1$，底部 $N_3 \\implies N_1 \\rightarrow N_3$。\n\n新的 VCG 有边 $N_1 \\rightarrow N_2$、$N_1 \\rightarrow N_3$ 和 $N_3 \\rightarrow N_2$。该图是无环的，证实了问题陈述。布线被指定为无弯腿的。\n所需的轨道数 $W_{post}$ 由 $W_{post} = \\max(D, L_{post})$ 给出。\n\n问题陈述说明交换不改变水平跨度，因此通道密度保持为 $D=3$。\n我们必须在新 VCG 中找到最长路径长度 $L_{post}$。路径如下：\n- $N_1 \\rightarrow N_2$（长度 $2$）\n- $N_1 \\rightarrow N_3$（长度 $2$）\n- $N_3 \\rightarrow N_2$（长度 $2$）\n- $N_1 \\rightarrow N_3 \\rightarrow N_2$（长度 $3$）\n最长的路径是 $N_1 \\rightarrow N_3 \\rightarrow N_2$，其长度为 $L_{post} = 3$。\n\n所需的最小轨道数为：\n$$W_{post} = \\max(D, L_{post}) = \\max(3, 3) = 3$$\n因此，在交换后需要 $3$ 个轨道。\n\n**轨道数减少量**\n\n所需轨道数的减少量是交换前和交换后轨道数之差：\n$$\\text{Reduction} = W_{pre} - W_{post} = 4 - 3 = 1$$\n此次交换实现了一种更高效的无弯腿布线，节省了一个轨道。",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "现代集成电路中充满了预先放置的宏单元和 IP 核，它们对布线层构成了障碍。本练习将帮助您理解这些布线障碍物如何影响通道的可布线性。通过分析一个包含中心障碍物的通道，您将从第一性原理出发，推导出一个关于所需最小轨道数 $t$ 的严格下界，即 $t \\ge d(x_c) + k(x_c)$，其中 $d(x_c)$ 是切割线处的局部密度，$k(x_c)$ 是被阻塞的轨道数。掌握这种分析方法对于在设计早期进行可布线性评估至关重要 。",
            "id": "4265315",
            "problem": "考虑电子设计自动化（EDA）中的一个标准$2$-金属层曼哈顿通道布线模型，其中所有水平导线都在一个金属层上的离散水平轨道中布线，而所有垂直连接（连接到引脚或以“狗腿”形式更换轨道）都在正交的金属层上。一个通道横跨第$1$列到第$8$列，具有一行顶部端点和一行底部端点。每个网络由其端点集合定义，其在通道中的水平占用范围是从其最小端点列到最大端点列的区间。两个不同的网络不能在同一水平坐标上占用同一轨道。“狗腿”是一种过孔，它允许网络在某一列更换轨道，同时保持平面性。\n\n通道中存在一个矩形障碍物，对于所有满足$4 \\le x \\le 5$的$x$，它阻挡了轨道$1$和$2$上的所有水平布线（也就是说，在第$4$列和第$5$列之间的切割处，只有$\\ge 3$的轨道可用于水平线段）。所有其他列均无障碍。引脚位置如下：\n- 顶部行：网络$\\mathrm{A}$在第$1$列和第$6$列，网络$\\mathrm{B}$在第$2$列和第$7$列，网络$\\mathrm{C}$在第$3$列和第$8$列。\n- 底部行：网络$\\mathrm{D}$在第$2$列和第$7$列。\n\n假设所有网络都是双端点网络，除了$\\mathrm{A}、\\mathrm{B}、\\mathrm{C}$各自的两个端点都在顶部行，并且过孔只能出现在整数列坐标上。\n\n从第一性原理以及通道密度和轨道占用的核心定义出发，论证为什么障碍物的存在会增加最小轨道数或迫使使用“狗腿”。然后，通过考虑垂直切割线处的必要条件，在存在所述单个中心障碍物的情况下，推导一个关于所需轨道数$t$的严格的、基于切割的下界。最后，对于给定的实例，确定从中心障碍物处的切割所获得的最强下界的数值。请以整数形式表示您的最终答案（无单位）。无需四舍五入。",
            "solution": "所述问题具有科学依据、提法恰当、客观且内部一致。它呈现了电子设计自动化（EDA）中一个关于带障碍物的通道布线的标准场景，提供了所有必要的定义和数据，以推导所需布线轨道数的可验证下界。因此，该问题被认为是有效的，可以构建解决方案。\n\n根据问题陈述的要求，解决方案将分三部分展开：首先，关于障碍物影响的原理性论证；其次，基于切割的下界的形式化推导；第三，将此下界应用于所提供的具体实例。\n\n**第一部分：关于障碍物影响的概念性论证**\n\n在曼哈顿通道布线模型中，基本约束是两个不同的网络不能在同一水平位置占用同一轨道。成功布线所需的最小轨道数是一个主要的优化目标。确定这个最小值的一个关键概念是通道密度。\n\n在特定水平坐标$x$处的局部通道密度，记为$d(x)$，定义为水平跨度必须穿过该坐标$x$处垂直线的网络数量。一个网络的水平跨度是其最左端点和最右端点之间的区间。由于这$d(x)$个网络中的每一个都需要在坐标$x$处有自己独立的轨道以保持水平分离，通道中的总轨道数（我们称之为$t$）必须至少与任何一点的密度一样大。这就得出了经典的通道密度下界：总轨道数必须至少等于整个通道中的最大密度。\n$$t \\ge \\max_{x} d(x)$$\n\n现在，我们引入一个矩形布线障碍物。障碍物是一个或多个轨道无法用于布线的区域。让我们考虑在坐标$x_c$处穿过这样一个障碍物的垂直切割。假设障碍物在此特定切割处阻挡了$k$个轨道。\n\n必须穿过$x_c$处切割线的$d(x_c)$个网络仍然需要被布线。然而，此处的可用布线资源（轨道）集已经减少。如果通道共有$t$个轨道，那么在切割$x_c$处只有$t - k$个轨道可用于水平布线。基本的布线约束仍然成立：可用轨道数必须大于或等于需要使用它们的网络数。这导出了不等式：\n$$t - k \\ge d(x_c)$$\n重新整理这个不等式，可以得到总轨道数的一个新下界：\n$$t \\ge d(x_c) + k$$\n\n这表明，在给定切割线上存在障碍物会增加所需轨道数的下界，增加的量等于它在该切割处所阻挡的轨道数。如果一个无障碍通道的布线方案使用的轨道数小于$d(x_c) + k$，那么引入障碍物将迫使总轨道数增加。\n\n迫使使用“狗腿”是另一个后果。“狗腿”是允许网络更换轨道的垂直线段。虽然基于切割的密度论证不能直接证明使用“狗腿”的必要性，但障碍物会使布线问题变得异常复杂。像左缘算法（Left-Edge Algorithm）这样的简单布线算法（适用于没有垂直约束的通道）可能会失败。一个网络可能需要在一个被障碍物阻挡的轨道上布线，这就迫使它通过“狗腿”转向另一个可用的轨道来绕过被阻挡的区域。这增加了布线复杂性，并且可以看作是当全局轨道分配受到障碍物约束时，满足增加的局部轨道需求$d(x_c) + k$的一种方式。\n\n**第二部分：基于切割的下界的形式化推导**\n\n设通道由$t$个水平轨道组成，索引为$T = \\{1, 2, \\dots, t\\}$。设通道的水平维度由列坐标定义。考虑在非整数坐标$x_c$处的一条垂直切割线，例如，$x_c = i + 0.5$，其中$i$是整数列索引。\n\n设$N$为所有待布线网络的集合。对于每个网络$n \\in N$，其水平跨度为一个区间$[c_{\\min}^{(n)}, c_{\\max}^{(n)}]$，其中$c_{\\min}^{(n)}$和$c_{\\max}^{(n)}$是其端点的最小和最大列坐标。如果$x_c \\in [c_{\\min}^{(n)}, c_{\\max}^{(n)}]$，则称网络$n$穿过$x_c$处的切割线。$x_c$处的局部密度是这类网络的数量：\n$$d(x_c) = |\\{n \\in N \\mid c_{\\min}^{(n)} \\le x_c  c_{\\max}^{(n)}\\}|$$\n该条件在右侧使用严格不等式，以正确处理位于整数坐标上的端点。\n\n定义一个障碍物。在切割线$x_c$处，设障碍物阻挡了一组轨道$T_{obs}(x_c) \\subseteq T$。在此切割处被阻挡的轨道数为$k(x_c) = |T_{obs}(x_c)|$。\n在切割$x_c$处的可用轨道集为$T_{avail}(x_c) = T \\setminus T_{obs}(x_c)$，其大小为$|T_{avail}(x_c)| = t - k(x_c)$。\n\n在切割$x_c$处，$d(x_c)$个网络中的每一个都必须占用一个从可用轨道集$T_{avail}(x_c)$中选择的不同轨道。根据鸽巢原理，可用轨道数必须至少等于需要放置在其中的网络数。这给出了必要条件：\n$$|T_{avail}(x_c)| \\ge d(x_c)$$\n代入可用轨道数的表达式，我们得到：\n$$t - k(x_c) \\ge d(x_c)$$\n这就得出了考虑障碍物的、基于切割的总轨道数$t$的下界：\n$$t \\ge d(x_c) + k(x_c)$$\n由于这对任何切割$x_c$都必须成立，通道的总下界是该值在所有可能切割上的最大值：\n$$t \\ge \\max_{x_c} \\{ d(x_c) + k(x_c) \\}$$\n\n**第三部分：给定实例的数值下界**\n\n我们被要求将此公式应用于具体的问题实例，并找出由中心障碍物处的切割产生的下界。\n\n1.  **识别切割和障碍物：**\n    问题陈述了障碍物在第$4$列和第$5$列之间的切割处阻挡了轨道$1$和$2$。我们分析非整数坐标$x_c = 4.5$处的切割。\n    被阻挡的轨道集是$T_{obs}(4.5) = \\{1, 2\\}$。\n    被阻挡的轨道数是$k(4.5) = |T_{obs}(4.5)| = 2$。\n\n2.  **计算切割处的局部密度：**\n    我们需要确定水平跨度穿过$x_c = 4.5$的网络数量。这意味着我们要找出满足$c_{\\min} \\le 4$和$c_{\\max} \\ge 5$的网络。\n    给定的网络是：\n    *   网络$\\mathrm{A}$：端点在第$1$列和第$6$列。跨度为$[1, 6]$。由于$1 \\le 4.5  6$，网络$\\mathrm{A}$穿过该切割。\n    *   网络$\\mathrm{B}$：端点在第$2$列和第$7$列。跨度为$[2, 7]$。由于$2 \\le 4.5  7$，网络$\\mathrm{B}$穿过该切割。\n    *   网络$\\mathrm{C}$：端点在第$3$列和第$8$列。跨度为$[3, 8]$。由于$3 \\le 4.5  8$，网络$\\mathrm{C}$穿过该切割。\n    *   网络$\\mathrm{D}$：端点在第$2$列和第$7$列。跨度为$[2, 7]$。由于$2 \\le 4.5  7$，网络$\\mathrm{D}$穿过该切割。\n\n    所有四个网络（$\\mathrm{A}、\\mathrm{B}、\\mathrm{C}、\\mathrm{D}$）都必须穿过第$4$列和第$5$列之间的垂直切割。\n    因此，该切割处的局部密度为$d(4.5) = 4$。\n\n3.  **计算下界：**\n    使用推导出的公式$t \\ge d(x_c) + k(x_c)$，我们代入在$x_c = 4.5$处切割的值：\n    $$t \\ge d(4.5) + k(4.5)$$\n    $$t \\ge 4 + 2$$\n    $$t \\ge 6$$\n    通过分析指定的障碍物，我们得到的所需轨道数的严格的、基于切割的下界是$6$。这意味着至少需要$6$个轨道才能在给定障碍物的情况下对该通道配置进行布线。",
            "answer": "$$\\boxed{6}$$"
        }
    ]
}
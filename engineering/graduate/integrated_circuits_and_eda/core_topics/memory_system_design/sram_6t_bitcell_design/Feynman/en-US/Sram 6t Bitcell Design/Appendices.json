{
    "hands_on_practices": [
        {
            "introduction": "The stability of an SRAM cell during a read operation is a cornerstone of its design. This exercise explores the phenomenon of read disturb, where the act of reading a '0' can inadvertently flip the cell's state. By employing simplified, linear models for the transistors, this practice guides you through a first-principles derivation to connect the cell's transistor sizing, captured by the Cell Ratio ($CR$), directly to its Read Static Noise Margin (RSNM), a key metric of stability . This calculation illuminates the fundamental trade-off between making a cell readable and ensuring it retains its stored data.",
            "id": "4299495",
            "problem": "Consider a six-transistor static random-access memory (SRAM) bitcell whose two cross-coupled inverters are symmetric and designed for high direct current gain. The wordline is driven to the supply voltage, and both bitlines are precharged to the supply voltage during a read operation. Assume that each metal-oxide-semiconductor field-effect transistor (MOSFET) in the cell can be locally approximated near the read-disturb operating point by a linear channel-conduction model, so the drain current satisfies $I \\approx G \\, V_{DS}$, where $G$ is an effective conductance that depends on bias through the gate overdrive. During the read of a stored logical zero on node $Q$, the access transistor connected to $Q$ forms a conductive path to $V_{DD}$, while the pull-down transistor forms a conductive path from $Q$ to ground.\n\nDefine the cell ratio $\\text{CR}$ as the ratio of the effective conductance of the pull-down transistor to that of the access transistor under wordline high and bitline precharge conditions, that is $\\text{CR} \\equiv \\frac{G_{pd}}{G_{ax}}$. Model the read-disturb voltage at node $Q$ as the divider voltage arising between $G_{ax}$ to $V_{DD}$ and $G_{pd}$ to ground. Under the high-gain symmetric-inverter assumption, approximate the butterfly curves (the pair of inverter voltage-transfer characteristics plotted together with one mirrored) near the switching region as ideal transitions centered at $\\frac{V_{DD}}{2}$, and treat the read-disturb as a horizontal shift of one lobe by the amount $\\Delta$ equal to the read low-level at $Q$.\n\nUsing these bases—MOSFET linearized conduction, voltage division at the disturbed storage node, and the maximum-inscribed-square definition of the Read Static Noise Margin (RSNM)—derive the expression for the minimum cell ratio $\\text{CR}_{\\min}$ required to meet a target read static noise margin at a given supply voltage by equating the side length of the maximum inscribed square to the separation of the shifted butterfly curves. Then evaluate $\\text{CR}_{\\min}$ numerically for a target Read Static Noise Margin (RSNM) of $\\;0.15\\,\\mathrm{V}\\;$ at a supply voltage $\\;V_{DD} = 0.8\\,\\mathrm{V}\\;$.\n\nRound your final answer for $\\text{CR}_{\\min}$ to four significant figures. Express the final answer as a pure number without units. This problem falls within integrated circuits and Electronic Design Automation (EDA), focusing on SRAM $6\\,$transistor bitcell design.",
            "solution": "The user wants to find the minimum cell ratio, $\\text{CR}_{\\min}$, for a six-transistor (6T) SRAM bitcell to achieve a specified Read Static Noise Margin (RSNM) at a given supply voltage, $V_{DD}$. The derivation will be based on a series of specified models and approximations.\n\nFirst, we model the read-disturb voltage at the storage node $Q$, which holds a logical zero (initial voltage $0$). During a read operation, the wordline is high, turning on the access transistor ($N_{ax}$). The bitline is precharged to $V_{DD}$. The pull-down transistor ($N_{pd}$) is also on, as its gate is connected to the other storage node $\\bar{Q}$, which is at $V_{DD}$. This creates a voltage divider at node $Q$. The access transistor, with effective conductance $G_{ax}$, pulls node $Q$ up towards the bitline voltage, $V_{DD}$. The pull-down transistor, with effective conductance $G_{pd}$, pulls node $Q$ down towards ground ($0\\,\\mathrm{V}$).\n\nAccording to the problem statement, the voltage at node $Q$ during this read-disturb condition, which we denote as $\\Delta$, can be calculated using the voltage divider rule:\n$$\n\\Delta = V_{DD} \\frac{\\frac{1}{G_{pd}}}{\\frac{1}{G_{ax}} + \\frac{1}{G_{pd}}}\n$$\nMultiplying the numerator and denominator of the fraction by $G_{ax}G_{pd}$ simplifies this to:\n$$\n\\Delta = V_{DD} \\frac{G_{ax}}{G_{pd} + G_{ax}}\n$$\nDividing the numerator and denominator by $G_{ax}$ gives:\n$$\n\\Delta = V_{DD} \\frac{1}{\\frac{G_{pd}}{G_{ax}} + 1}\n$$\nThe problem defines the cell ratio, $\\text{CR}$, as $\\text{CR} \\equiv \\frac{G_{pd}}{G_{ax}}$. Substituting this definition into the expression for $\\Delta$, we get:\n$$\n\\Delta = \\frac{V_{DD}}{1 + \\text{CR}}\n$$\n\nNext, we establish the relationship between this disturb voltage $\\Delta$ and the Read Static Noise Margin (RSNM). The problem states that the cross-coupled inverters are symmetric and their voltage transfer characteristics (VTCs) can be approximated as ideal transitions centered at $\\frac{V_{DD}}{2}$. For the purpose of analyzing the static noise margin, we consider the butterfly plot, which consists of the VTC of one inverter and the mirrored VTC of the other. Let the voltages at the two storage nodes be $V_Q$ and $V_{\\bar{Q}}$. The two curves plotted are $V_{\\bar{Q}} = \\text{VTC}(V_Q)$ and $V_Q = \\text{VTC}(V_{\\bar{Q}})$.\n\nFor ideal inverters, the VTC is a step function:\n$$\n\\text{VTC}(V_{in}) = \\begin{cases} V_{DD} & \\text{if } V_{in} < \\frac{V_{DD}}{2} \\\\ 0 & \\text{if } V_{in} > \\frac{V_{DD}}{2} \\end{cases}\n$$\nThe undisturbed butterfly plot forms two square-shaped \"lobes\" centered around the stable states $(0, V_{DD})$ and $(V_{DD}, 0)$. The maximum inscribed square in each lobe has a side length of $\\frac{V_{DD}}{2}$, which would be the hold static noise margin.\n\nThe read operation disturbs the cell. The problem models this disturbance as a horizontal shift of one lobe by the amount $\\Delta$. Specifically, when reading a '0' from node $Q$, its voltage is pulled up to $\\Delta$. This affects the VTC of the inverter whose output is $Q$. Let's plot $V_{\\bar{Q}}$ on the y-axis and $V_Q$ on the x-axis. The VTC for the inverter driving $Q$ (input $\\bar{Q}$, output $Q$) is $V_Q = \\text{VTC}(V_{\\bar{Q}})$. The disturbance adds a voltage $\\Delta$ to this output. The new, degraded VTC is $V_Q ' = \\text{VTC}(V_{\\bar{Q}}) + \\Delta$. In the butterfly plot, this corresponds to shifting the mirrored VTC curve horizontally to the right by $\\Delta$.\n\nThe RSNM is the side length of the maximum-inscribed-square in the degraded lobe. The lobe corresponding to the stored '0' at $Q$ (stable state near $(0, V_{DD})$) is now bounded by the ideal VTC $V_{\\bar{Q}} = \\text{VTC}(V_Q)$ and the shifted VTC $V_Q = \\text{VTC}(V_{\\bar{Q}}) + \\Delta$.\nThe \"eye\" of the butterfly curve, in which the square is inscribed, is bounded by:\n\\begin{itemize}\n    \\item The left edge, which is the low output of the degraded inverter: $V_Q = 0 + \\Delta = \\Delta$.\n    \\item The right edge, which is the switching threshold of the non-degraded inverter: $V_Q = \\frac{V_{DD}}{2}$.\n    \\item The bottom edge, which is the switching threshold of the degraded inverter's input: $V_{\\bar{Q}} = \\frac{V_{DD}}{2}$.\n    \\item The top edge, which is the high output of the non-degraded inverter: $V_{\\bar{Q}} = V_{DD}$.\n\\end{itemize}\nThe region available for the inscribed square is a rectangle with width $W = \\frac{V_{DD}}{2} - \\Delta$ and height $H = V_{DD} - \\frac{V_{DD}}{2} = \\frac{V_{DD}}{2}$.\nThe side length of the maximum inscribed square is the smaller of the width and height, which is the RSNM.\n$$\n\\text{RSNM} = \\min\\left(W, H\\right) = \\min\\left(\\frac{V_{DD}}{2} - \\Delta, \\frac{V_{DD}}{2}\\right)\n$$\nSince $\\Delta > 0$ for any finite cell ratio, the width is the limiting dimension. Therefore:\n$$\n\\text{RSNM} = \\frac{V_{DD}}{2} - \\Delta\n$$\nNow, we combine the two derived equations. We substitute the expression for $\\Delta$ into the RSNM equation:\n$$\n\\text{RSNM} = \\frac{V_{DD}}{2} - \\frac{V_{DD}}{1 + \\text{CR}}\n$$\nWe need to solve this equation for $\\text{CR}$ to find the minimum cell ratio, $\\text{CR}_{\\min}$, required to meet a given RSNM.\n$$\n\\frac{V_{DD}}{1 + \\text{CR}} = \\frac{V_{DD}}{2} - \\text{RSNM}\n$$\n$$\n1 + \\text{CR} = \\frac{V_{DD}}{\\frac{V_{DD}}{2} - \\text{RSNM}} = \\frac{V_{DD}}{\\frac{V_{DD} - 2\\cdot\\text{RSNM}}{2}} = \\frac{2V_{DD}}{V_{DD} - 2\\cdot\\text{RSNM}}\n$$\n$$\n\\text{CR} = \\frac{2V_{DD}}{V_{DD} - 2\\cdot\\text{RSNM}} - 1 = \\frac{2V_{DD} - (V_{DD} - 2\\cdot\\text{RSNM})}{V_{DD} - 2\\cdot\\text{RSNM}}\n$$\n$$\n\\text{CR}_{\\min} = \\frac{V_{DD} + 2\\cdot\\text{RSNM}}{V_{DD} - 2\\cdot\\text{RSNM}}\n$$\nThis is the symbolic expression for the minimum required cell ratio.\n\nFinally, we evaluate this expression numerically for the given values: $V_{DD} = 0.8\\,\\mathrm{V}$ and $\\text{RSNM} = 0.15\\,\\mathrm{V}$.\n$$\n\\text{CR}_{\\min} = \\frac{0.8 + 2 \\cdot (0.15)}{0.8 - 2 \\cdot (0.15)} = \\frac{0.8 + 0.3}{0.8 - 0.3} = \\frac{1.1}{0.5} = 2.2\n$$\nThe problem requires the answer to be rounded to four significant figures.\n$$\n\\text{CR}_{\\min} = 2.200\n$$",
            "answer": "$$\\boxed{2.200}$$"
        },
        {
            "introduction": "While read stability is crucial, a memory cell is useless if it cannot be written to reliably. This exercise focuses on the dynamics of the write operation, which involves a 'fight' between the external access transistor trying to force a new state and the internal pull-up transistor trying to retain the old one. By modeling this current contention at the critical trip point of the inverter, you will determine the necessary bitline and wordline voltage conditions required to guarantee a successful write . This provides a quantitative understanding of the concept of write-ability and the role of voltage boosting techniques.",
            "id": "4299426",
            "problem": "Consider a single Static Random-Access Memory (SRAM) six-transistor (6T) bitcell implemented in Complementary Metal-Oxide-Semiconductor (CMOS) technology within an Electronic Design Automation (EDA) design flow. The bitcell is initially storing a logical high at node $Q$ and a logical low at node $\\overline{Q}$. A write of logical low to $Q$ is attempted by forcing the associated bitline $BL$ below ground reference $V_{SS}$ (taken as $0$ for convenience) while asserting the wordline (WL) to turn on the access transistor. The complementary bitline $\\overline{BL}$ is held high at $V_{DD}$.\n\nAssume the following modeling framework and parameters:\n- Supply voltage $V_{DD} = 0.8 \\,\\text{V}$.\n- Receiving inverter trip point (the minimum input at $Q$ that causes the opposite inverter to switch) $V_{\\text{trip}} = 0.38 \\,\\text{V}$.\n- NMOS threshold voltage $V_{Tn} = 0.35 \\,\\text{V}$ and magnitude of PMOS threshold $|V_{Tp}| = 0.40 \\,\\text{V}$.\n- Access NMOS approximate small-signal on-conductance in the linear region modeled by $g_{\\text{acc}} = k_{\\text{acc}} \\left( V_{WL} - V_{Tn} \\right)$ with $k_{\\text{acc}} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$, yielding an effective on-resistance $R_{\\text{on}} = 1 / g_{\\text{acc}}$ between node $Q$ and bitline $BL$.\n- The pull-up PMOS in the inverter driving node $Q$ has strength parameter $\\beta_{p} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$. Prior to the flip, the gate of this PMOS is tied to $\\overline{Q} \\approx 0$, so $V_{SG} \\approx V_{DD}$. For $V_{SD} = V_{DD} - V_{Q}$, approximate the PMOS conduction in the linear (ohmic) region by\n$$\nI_{p} = \\beta_{p} \\left[ \\left( V_{SG} - |V_{Tp}| \\right) V_{SD} - \\frac{1}{2} V_{SD}^{2} \\right].\n$$\n\nUnder the quasi-static write assumption, a necessary condition for a successful state flip is that the internal node satisfies $V_{Q} \\leq V_{\\text{trip}}$. In steady state just at the threshold of flipping, take $V_{Q} = V_{\\text{trip}}$ and model the access path as a resistor $R_{\\text{on}}$ to the forced bitline potential $V_{BL}$, while the PMOS sources current from $V_{DD}$ into node $Q$.\n\nDerive, from first principles, the condition that just forces $V_{Q}$ down to $V_{\\text{trip}}$ by equating the pull-up PMOS conduction to the access path conduction out to the bitline. Using this condition, determine the following two quantities:\n1. The minimum bitline forcing voltage $V_{BL,\\text{req}}$ required to achieve $V_{Q} = V_{\\text{trip}}$ when the wordline is limited to $V_{WL} = V_{DD}$ (no wordline boost).\n2. The minimum wordline voltage $V_{WL,\\text{req}}$ required to achieve $V_{Q} = V_{\\text{trip}}$ when the bitline is forced to $V_{BL} = 0$.\n\nExpress the final answers in volts (V) and round each to four significant figures. Provide your final answer as a single row matrix $\\left( V_{BL,\\text{req}}^{(1)}, \\, V_{WL}^{(1)}, \\, V_{BL}^{(2)}, \\, V_{WL,\\text{req}}^{(2)} \\right)$, where the superscript $(1)$ refers to the no-boost wordline case and $(2)$ refers to the zero-voltage bitline case.",
            "solution": "The condition for a successful write operation is that the voltage at node $Q$, $V_Q$, can be pulled down below the trip point of the opposing inverter, $V_{\\text{trip}}$. The problem asks us to analyze the circuit at the critical point where $V_Q = V_{\\text{trip}}$. At this quasi-static equilibrium point, the current sourced by the pull-up PMOS transistor ($I_p$) into node $Q$ must be equal to the current sunk by the NMOS access transistor ($I_{\\text{acc}}$) from node $Q$ to the bitline $BL$. This is an application of Kirchhoff's Current Law at node $Q$.\n$$\nI_p = I_{\\text{acc}}\n$$\nFirst, we derive the expression for the current $I_p$ from the pull-up PMOS. The PMOS is part of the cross-coupled inverter that is holding $Q$ high, so its gate is connected to $\\overline{Q}$, which is at a low voltage, approximately $0 \\,\\text{V}$. The source of the PMOS is connected to $V_{DD}$.\nThe gate-source voltage is $V_{SG} = V_{S} - V_{G} = V_{DD} - 0 = V_{DD}$.\nThe source-drain voltage is $V_{SD} = V_{S} - V_{D} = V_{DD} - V_Q$.\nAt the analysis point, $V_Q = V_{\\text{trip}}$, so $V_{SD} = V_{DD} - V_{\\text{trip}}$.\nUsing the provided model for the PMOS current in the linear region:\n$$\nI_p = \\beta_{p} \\left[ \\left( V_{SG} - |V_{Tp}| \\right) V_{SD} - \\frac{1}{2} V_{SD}^{2} \\right]\n$$\nSubstituting the expressions for $V_{SG}$ and $V_{SD}$:\n$$\nI_p = \\beta_{p} \\left[ \\left( V_{DD} - |V_{Tp}| \\right) (V_{DD} - V_{\\text{trip}}) - \\frac{1}{2} (V_{DD} - V_{\\text{trip}})^{2} \\right]\n$$\nThis current represents the \"fighting\" strength of the PMOS trying to keep node $Q$ high.\n\nNext, we derive the expression for the current $I_{\\text{acc}}$ through the NMOS access transistor. This transistor connects node $Q$ to the bitline $BL$. The problem models this path as a resistor with conductance $g_{\\text{acc}}$. The current flowing out of node $Q$ is:\n$$\nI_{\\text{acc}} = g_{\\text{acc}} (V_Q - V_{BL})\n$$\nThe conductance is given by $g_{\\text{acc}} = k_{\\text{acc}}(V_{WL} - V_{Tn})$.\nSubstituting this into the current expression and setting $V_Q = V_{\\text{trip}}$:\n$$\nI_{\\text{acc}} = k_{\\text{acc}}(V_{WL} - V_{Tn})(V_{\\text{trip}} - V_{BL})\n$$\nThis current represents the strength of the access transistor trying to pull node $Q$ low.\n\nNow, we equate the two currents to form the central governing equation for our analysis:\n$$\n\\beta_{p} \\left[ \\left( V_{DD} - |V_{Tp}| \\right) (V_{DD} - V_{\\text{trip}}) - \\frac{1}{2} (V_{DD} - V_{\\text{trip}})^{2} \\right] = k_{\\text{acc}}(V_{WL} - V_{Tn})(V_{\\text{trip}} - V_{BL})\n$$\nLet's first calculate the value of the left-hand side (LHS), which is constant for both parts of the problem.\nGiven values: $V_{DD} = 0.8 \\,\\text{V}$, $V_{\\text{trip}} = 0.38 \\,\\text{V}$, $|V_{Tp}| = 0.40 \\,\\text{V}$, $\\beta_{p} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$.\n$$\nV_{DD} - V_{\\text{trip}} = 0.8 - 0.38 = 0.42 \\,\\text{V}\n$$\n$$\nV_{DD} - |V_{Tp}| = 0.8 - 0.40 = 0.40 \\,\\text{V}\n$$\n$$\nLHS = I_p = (2.0 \\times 10^{-4}) \\left[ (0.40)(0.42) - \\frac{1}{2}(0.42)^{2} \\right]\n$$\n$$\nI_p = (2.0 \\times 10^{-4}) \\left[ 0.168 - \\frac{1}{2}(0.1764) \\right] = (2.0 \\times 10^{-4}) [ 0.168 - 0.0882 ]\n$$\n$$\nI_p = (2.0 \\times 10^{-4}) [0.0798] = 1.596 \\times 10^{-5} \\,\\text{A}\n$$\n\n**1. Determine $V_{BL,\\text{req}}$ for $V_{WL} = V_{DD}$**\n\nFor this case, we have the condition $V_{WL} = V_{WL}^{(1)} = V_{DD} = 0.8 \\,\\text{V}$. We need to find $V_{BL, \\text{req}}^{(1)}$.\nOur governing equation becomes:\n$$\n1.596 \\times 10^{-5} = k_{\\text{acc}}(V_{DD} - V_{Tn})(V_{\\text{trip}} - V_{BL,\\text{req}}^{(1)})\n$$\nGiven values: $k_{\\text{acc}} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$, $V_{Tn} = 0.35 \\,\\text{V}$.\n$$\n1.596 \\times 10^{-5} = (2.0 \\times 10^{-4})(0.8 - 0.35)(0.38 - V_{BL,\\text{req}}^{(1)})\n$$\n$$\n1.596 \\times 10^{-5} = (2.0 \\times 10^{-4})(0.45)(0.38 - V_{BL,\\text{req}}^{(1)})\n$$\n$$\n1.596 \\times 10^{-5} = (0.9 \\times 10^{-4})(0.38 - V_{BL,\\text{req}}^{(1)})\n$$\nSolving for the term containing $V_{BL,\\text{req}}^{(1)}$:\n$$\n0.38 - V_{BL,\\text{req}}^{(1)} = \\frac{1.596 \\times 10^{-5}}{0.9 \\times 10^{-4}} = \\frac{1.596}{9} \\approx 0.177333...\n$$\n$$\nV_{BL,\\text{req}}^{(1)} = 0.38 - 0.177333... = 0.202666... \\,\\text{V}\n$$\nRounding to four significant figures, $V_{BL,\\text{req}}^{(1)} \\approx 0.2027 \\,\\text{V}$.\n\n**2. Determine $V_{WL,\\text{req}}$ for $V_{BL} = 0$**\n\nFor this case, we have the condition $V_{BL} = V_{BL}^{(2)} = 0 \\,\\text{V}$. We need to find $V_{WL, \\text{req}}^{(2)}$.\nOur governing equation is:\n$$\n1.596 \\times 10^{-5} = k_{\\text{acc}}(V_{WL,\\text{req}}^{(2)} - V_{Tn})(V_{\\text{trip}} - 0)\n$$\n$$\n1.596 \\times 10^{-5} = (2.0 \\times 10^{-4})(V_{WL,\\text{req}}^{(2)} - 0.35)(0.38)\n$$\n$$\n1.596 \\times 10^{-5} = (0.76 \\times 10^{-4})(V_{WL,\\text{req}}^{(2)} - 0.35)\n$$\nSolving for the term containing $V_{WL,\\text{req}}^{(2)}$:\n$$\nV_{WL,\\text{req}}^{(2)} - 0.35 = \\frac{1.596 \\times 10^{-5}}{0.76 \\times 10^{-4}} = \\frac{1.596}{7.6} = 0.21\n$$\n$$\nV_{WL,\\text{req}}^{(2)} = 0.21 + 0.35 = 0.56 \\,\\text{V}\n$$\nRounding to four significant figures, $V_{WL,\\text{req}}^{(2)} = 0.5600 \\,\\text{V}$.\n\nThe final answer is requested in the format $\\left( V_{BL,\\text{req}}^{(1)}, \\, V_{WL}^{(1)}, \\, V_{BL}^{(2)}, \\, V_{WL,\\text{req}}^{(2)} \\right)$.\n-   $V_{BL,\\text{req}}^{(1)} = 0.2027 \\,\\text{V}$ (calculated)\n-   $V_{WL}^{(1)} = V_{DD} = 0.8 \\,\\text{V}$ (given)\n-   $V_{BL}^{(2)} = 0 \\,\\text{V}$ (given)\n-   $V_{WL,\\text{req}}^{(2)} = 0.5600 \\,\\text{V}$ (calculated)\n\nThese values will be placed into a row matrix as requested.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.2027 & 0.8 & 0 & 0.5600 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "To gain a holistic view of an SRAM cell's behavior, designers often turn to comprehensive characterization curves that capture stability across various conditions. This practice introduces the N-curve, a powerful industry-standard method for analyzing static stability for hold, read, and write operations simultaneously. You will implement fundamental MOSFET models in code to simulate the injection current at a storage node, thereby generating the N-curve and extracting critical performance metrics such as hold margin, read margin, and the write trip point . This exercise bridges the gap between isolated analytical models and integrated, simulation-based cell analysis.",
            "id": "4299483",
            "problem": "Consider a six-transistor static random-access memory (SRAM) bitcell consisting of two cross-coupled complementary metal–oxide–semiconductor (CMOS) inverters and two access transistors that connect the internal storage nodes to the bitlines. Let the power supply be $V_{DD}$, the storage node under test be $V_{Q}$, and the opposite node be $V_{QB}$. In the scenarios below, $V_{QB}$ is fixed while $V_{Q}$ is forced by an ideal direct-current (DC) voltage source to sweep across the interval $[0, V_{DD}]$. The two access transistors are n-channel metal–oxide–semiconductor (NMOS) devices controlled by the wordline voltage $V_{WL}$ and connecting $V_{Q}$ to the bitline $V_{BL}$ and $V_{QB}$ to the complementary bitline $V_{BLB}$.\n\nUse the Shichman–Hodges long-channel MOSFET model for DC currents, with body effect neglected and channel length modulation applied in saturation only. For an NMOS, the drain current $I_{D,n}$ (positive from drain to source) is, for gate voltage $V_{G}$, drain voltage $V_{D}$, source voltage $V_{S}$, transconductance parameter $k_{n}$, threshold voltage $V_{th,n}$, and channel length modulation coefficient $\\lambda_{n}$,\n- cutoff: if $V_{GS} \\le V_{th,n}$ or $V_{DS} \\le 0$, then $I_{D,n} = 0$,\n- triode: if $0 < V_{DS} < V_{GS} - V_{th,n}$, then $I_{D,n} = k_{n}\\left[(V_{GS} - V_{th,n})V_{DS} - \\tfrac{1}{2}V_{DS}^{2}\\right]$,\n- saturation: if $V_{DS} \\ge V_{GS} - V_{th,n}$, then $I_{D,n} = \\tfrac{1}{2}k_{n}(V_{GS} - V_{th,n})^{2}\\left(1 + \\lambda_{n}V_{DS}\\right)$,\nwith $V_{GS} = V_{G} - V_{S}$ and $V_{DS} = V_{D} - V_{S}$.\n\nFor a p-channel metal–oxide–semiconductor (PMOS), the drain current $I_{D,p}$ is taken positive from source to drain. Let $k_{p}$ be the PMOS transconductance parameter, $V_{th,p}>0$ its threshold magnitude, $V_{G}$ the gate voltage, $V_{D}$ the drain voltage, $V_{S}$ the source voltage, and $\\lambda_{p}$ the channel length modulation in saturation. Using $V_{SG} = V_{S} - V_{G}$ and $V_{SD} = V_{S} - V_{D}$,\n- cutoff: if $V_{SG} \\le V_{th,p}$ or $V_{SD} \\le 0$, then $I_{D,p} = 0$,\n- triode: if $0 < V_{SD} < V_{SG} - V_{th,p}$, then $I_{D,p} = k_{p}\\left[(V_{SG} - V_{th,p})V_{SD} - \\tfrac{1}{2}V_{SD}^{2}\\right]$,\n- saturation: if $V_{SD} \\ge V_{SG} - V_{th,p}$, then $I_{D,p} = \\tfrac{1}{2}k_{p}(V_{SG} - V_{th,p})^{2}\\left(1 + \\lambda_{p}V_{SD}\\right)$.\n\nFor the inverter tied to node $V_{Q}$, the PMOS has source at $V_{DD}$, drain at $V_{Q}$, and gate at $V_{QB}$, while the NMOS has drain at $V_{Q}$, source at $0$, and gate at $V_{QB}$. The access NMOS connecting $V_{Q}$ to $V_{BL}$ has gate $V_{WL}$ and its source/drain assignment follows the higher/lower terminal voltage so that the model’s $V_{DS} \\ge 0$ condition is respected.\n\nDefine the node injection current $I_{inj}(V_{Q})$ as the net current that the ideal DC voltage source must supply into node $V_{Q}$ to hold $V_{Q}$ at the injected voltage while all transistor currents flow according to the above models. By Kirchhoff’s current law (KCL) at node $V_{Q}$, take the sign convention that currents into node $V_{Q}$ from the PMOS and bitline are positive, and currents leaving node $V_{Q}$ through the pull-down NMOS or into the bitline are negative. Then $I_{inj}(V_{Q})$ is defined such that the algebraic sum of device currents plus $I_{inj}(V_{Q})$ equals zero.\n\nYou must compute the following N-curve metrics by sweeping $V_{Q}$ from $0$ to $V_{DD}$ while holding $V_{QB}$ fixed:\n- The read metric $I_{read}$ is the maximum value of $I_{inj}(V_{Q})$ over the sweep when $V_{WL} = V_{DD}$, $V_{BL} = V_{DD}$, and $V_{QB} = V_{DD}$.\n- The hold metric $I_{hold}$ is the maximum value of $I_{inj}(V_{Q})$ over the sweep when $V_{WL} = 0$, with $V_{QB} = V_{DD}$ and $V_{BL}$ disconnected. In the model, disconnection corresponds to zero access current.\n- The write metric $V_{write}$ is the smallest value of $V_{Q}$ in $[0, V_{DD}]$ for which $I_{inj}(V_{Q}) = 0$ when $V_{WL} = V_{DD}$, $V_{BL} = 0$, and $V_{QB} = V_{DD}$.\n\nExpress $I_{read}$ and $I_{hold}$ in microamperes as decimal numbers, and express $V_{write}$ in volts as a decimal number. All angle quantities, if any, must be in radians; none are needed here.\n\nImplement a program that evaluates these metrics using a uniform sweep of $V_{Q}$ and linear interpolation to estimate the zero-crossing for $V_{write}$ when required. Use the following test suite of parameter sets, each given as tuples $(V_{DD}, k_{n}, k_{p}, k_{a}, \\lambda_{n}, \\lambda_{p}, V_{th,n}, V_{th,p})$, where $k_{a}$ is the access NMOS transconductance parameter:\n1. Case A (balanced cell): $(1.0, 1.0\\times 10^{-4}, 5.0\\times 10^{-5}, 8.0\\times 10^{-5}, 0.04, 0.04, 0.40, 0.45)$.\n2. Case B (weak access): $(1.0, 1.0\\times 10^{-4}, 5.0\\times 10^{-5}, 2.0\\times 10^{-5}, 0.04, 0.04, 0.40, 0.45)$.\n3. Case C (strong access): $(1.0, 1.0\\times 10^{-4}, 5.0\\times 10^{-5}, 1.5\\times 10^{-4}, 0.04, 0.04, 0.40, 0.45)$.\n\nYour program should produce a single line of output containing the results as a comma-separated list of three-element lists, one three-element list per test case, each inner list ordered as $[I_{read}, I_{hold}, V_{write}]$ with all values rounded to six decimal places. For example, the output format must be like $[[x_{1},y_{1},z_{1}],[x_{2},y_{2},z_{2}],[x_{3},y_{3},z_{3}]]$ where each $x_{i}$ and $y_{i}$ are in microamperes and each $z_{i}$ is in volts.",
            "solution": "The solution requires calculating three metrics for an SRAM bitcell: read current ($I_{read}$), hold current ($I_{hold}$), and write voltage ($V_{write}$). The approach involves applying Kirchhoff's current law (KCL) at the storage node $V_Q$ and using the provided Shichman–Hodges MOSFET models to determine the current contribution from each transistor.\n\nFirst, we define the mathematical models for the NMOS and PMOS transistors as specified.\n\nFor an NMOS transistor with gate voltage $V_G$, drain voltage $V_D$, and source voltage $V_S$, we define $V_{GS} = V_G - V_S$ and $V_{DS} = V_D - V_S$. The drain current $I_{D,n}$ is given by:\n$$\nI_{D,n}(V_G, V_D, V_S) =\n\\begin{cases}\n0 & \\text{if } V_{GS} \\le V_{th,n} \\text{ or } V_{DS} \\le 0 \\\\\nk_{n}\\left[(V_{GS} - V_{th,n})V_{DS} - \\frac{1}{2}V_{DS}^{2}\\right] & \\text{if } 0 < V_{DS} < V_{GS} - V_{th,n} \\\\\n\\frac{1}{2}k_{n}(V_{GS} - V_{th,n})^{2}(1 + \\lambda_{n}V_{DS}) & \\text{if } V_{DS} \\ge V_{GS} - V_{th,n}\n\\end{cases}\n$$\n\nFor a PMOS transistor, using $V_{SG} = V_S - V_G$ and $V_{SD} = V_S - V_D$, the source-to-drain current $I_{D,p}$ is given by:\n$$\nI_{D,p}(V_G, V_D, V_S) =\n\\begin{cases}\n0 & \\text{if } V_{SG} \\le V_{th,p} \\text{ or } V_{SD} \\le 0 \\\\\nk_{p}\\left[(V_{SG} - V_{th,p})V_{SD} - \\frac{1}{2}V_{SD}^{2}\\right] & \\text{if } 0 < V_{SD} < V_{SG} - V_{th,p} \\\\\n\\frac{1}{2}k_{p}(V_{SG} - V_{th,p})^{2}(1 + \\lambda_{p}V_{SD}) & \\text{if } V_{SD} \\ge V_{SG} - V_{th,p}\n\\end{cases}\n$$\n\nThe injection current $I_{inj}(V_Q)$ is found by applying KCL at node $V_Q$. The transistors connected to $V_Q$ are the pull-up PMOS (PU), the pull-down NMOS (PD), and the pass-gate access NMOS (PG). KCL dictates that the sum of currents entering the node equals the sum of currents leaving. Let $I_{PU}$ be the current from $V_{DD}$ into $V_Q$, $I_{PD}$ be the current from $V_Q$ to ground, and $I_{PG}$ be the net current leaving $V_Q$ through the access transistor. The injection current $I_{inj}$ also enters the node. Thus:\n$$ I_{inj} + I_{PU} = I_{PD} + I_{PG} \\implies I_{inj}(V_Q) = I_{PD} + I_{PG} - I_{PU} $$\nThe currents for each transistor are determined by the operating conditions (voltages $V_{QB}$, $V_{WL}$, $V_{BL}$) and the swept value of $V_Q$:\n- Pull-Up (PU): $I_{PU} = I_{D,p}(V_{G}=V_{QB}, V_{D}=V_Q, V_{S}=V_{DD})$ using PMOS parameters $(k_p, V_{th,p}, \\lambda_p)$.\n- Pull-Down (PD): $I_{PD} = I_{D,n}(V_{G}=V_{QB}, V_{D}=V_Q, V_{S}=0)$ using NMOS parameters $(k_n, V_{th,n}, \\lambda_n)$.\n- Pass-Gate (PG): The net current $I_{PG}$ leaving node $V_Q$ is calculated using the access NMOS model $(k_a, V_{th,n}, \\lambda_n)$. The access transistor connects nodes $V_Q$ and $V_{BL}$.\n  - If $V_Q \\ge V_{BL}$: $I_{PG} = I_{D,n}(V_{G}=V_{WL}, V_{D}=V_Q, V_{S}=V_{BL})$.\n  - If $V_Q < V_{BL}$: $I_{PG} = -I_{D,n}(V_{G}=V_{WL}, V_{D}=V_{BL}, V_{S}=V_Q)$.\n\nWe now analyze each metric:\n\n**1. Hold Metric ($I_{hold}$)**\n- Conditions: $V_{WL} = 0$, $V_{QB} = V_{DD}$, $V_{BL}$ is disconnected.\n- The condition $V_{WL} = 0$ with $V_{th,n} > 0$ places the access transistor (PG) in cutoff, so $I_{PG} = 0$.\n- The condition $V_{QB} = V_{DD}$ places the pull-up transistor (PU) in cutoff. Its gate is at $V_{DD}$ and source is at $V_{DD}$, so $V_{SG} = V_{DD} - V_{DD} = 0$. Since $V_{th,p} > 0$, the condition $V_{SG} \\le V_{th,p}$ is met, thus $I_{PU} = 0$.\n- The pull-down transistor (PD) has $V_G = V_{QB} = V_{DD}$ and $V_S = 0$, so $V_{GS} = V_{DD}$. It is ON.\n- Therefore, $I_{inj}(V_Q) = I_{PD} + 0 - 0 = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$.\n- $I_{hold}$ is the maximum of this current as $V_Q$ sweeps from $0$ to $V_{DD}$. The NMOS drain current is a monotonically increasing function of $V_{DS} = V_Q$ for a fixed $V_{GS}$. The maximum occurs at $V_Q = V_{DD}$.\n- At $V_Q = V_{DD}$, we have $V_{DS} = V_{DD}$ and $V_{GS} = V_{DD}$. The saturation condition $V_{DS} \\ge V_{GS} - V_{th,n}$ becomes $V_{DD} \\ge V_{DD} - V_{th,n}$, which simplifies to $V_{th,n} \\ge 0$, a true statement.\n- The maximum current is the saturation current at $V_{DS} = V_{DD}$:\n  $$ I_{hold} = \\frac{1}{2}k_{n}(V_{DD} - V_{th,n})^{2}(1 + \\lambda_{n}V_{DD}) $$\n\n**2. Write Metric ($V_{write}$)**\n- Conditions: $V_{WL} = V_{DD}$, $V_{BL} = 0$, $V_{QB} = V_{DD}$.\n- We seek the smallest $V_Q \\in [0, V_{DD}]$ where $I_{inj}(V_Q) = 0$.\n- PU transistor: Same as hold, $V_{QB}=V_{DD} \\implies I_{PU} = 0$.\n- PD transistor: $V_{G} = V_{QB} = V_{DD}$, ON. $I_{PD} = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$.\n- PG transistor: $V_{G} = V_{WL} = V_{DD}$. It connects $V_Q$ and $V_{BL}=0$. As $V_Q$ sweeps $[0, V_{DD}]$, we always have $V_Q \\ge V_{BL}$. Thus, $I_{PG} = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$ using access NMOS parameters $(k_a)$.\n- The injection current is the sum of two pull-down currents:\n  $$ I_{inj}(V_Q) = I_{PD} + I_{PG} = I_{D,n}(V_{DD}, V_Q, 0; k_n, \\lambda_n) + I_{D,n}(V_{DD}, V_Q, 0; k_a, \\lambda_n) $$\n- The NMOS drain current $I_{D,n}$ is non-negative. $I_{D,n}(V_G, V_D, V_S)$ is zero only if the transistor is in cutoff or if $V_{DS}=0$. Here, both transistors are ON (since $V_{DD} > V_{th,n}$), so the current is only zero when $V_{DS}=V_Q=0$. For any $V_Q > 0$, $I_{inj}(V_Q) > 0$.\n- Therefore, the smallest value of $V_Q$ for which $I_{inj}(V_Q) = 0$ is exactly $V_Q = 0$.\n  $$ V_{write} = 0 \\, V $$\n\n**3. Read Metric ($I_{read}$)**\n- Conditions: $V_{WL} = V_{DD}$, $V_{BL} = V_{DD}$, $V_{QB} = V_{DD}$.\n- We seek the maximum of $I_{inj}(V_Q)$ over the sweep $V_Q \\in [0, V_{DD}]$.\n- PU transistor: Same as before, $V_{QB}=V_{DD} \\implies I_{PU} = 0$.\n- PD transistor: Same as before, $V_G = V_{QB} = V_{DD}$. It is ON. $I_{PD} = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$.\n- PG transistor: $V_G = V_{WL} = V_{DD}$. It connects $V_Q$ and $V_{BL}=V_{DD}$. As $V_Q$ sweeps $[0, V_{DD}]$, we always have $V_Q \\le V_{BL}$. The current flows from $V_{BL}$ into $V_Q$, so the net current leaving, $I_{PG}$, is negative.\n  $$ I_{PG} = -I_{D,n}(V_{G}=V_{DD}, V_{D}=V_{DD}, V_{S}=V_Q) $$\n- The total injection current is:\n  $$ I_{inj}(V_Q) = I_{D,n}(V_{DD}, V_Q, 0; k_n, \\lambda_n) - I_{D,n}(V_{DD}, V_{DD}, V_Q; k_a, \\lambda_n) $$\n- This function does not have a simple analytical maximum. It starts negative at $V_Q=0$, increases, and returns to $0$ at $V_Q=V_{DD}$. The maximum value, $I_{read}$, must be found by numerically sweeping $V_Q$ from $0$ to $V_{DD}$ and finding the peak value of $I_{inj}(V_Q)$.\n\nThe following program implements this logic to compute the required metrics for the provided test cases.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates SRAM bitcell metrics for given parameter sets.\n    \"\"\"\n\n    # Test cases: (VDD, kn, kp, ka, lambda_n, lambda_p, Vth_n, Vth_p)\n    test_cases = [\n        (1.0, 1.0e-4, 5.0e-5, 8.0e-5, 0.04, 0.04, 0.40, 0.45), # Case A\n        (1.0, 1.0e-4, 5.0e-5, 2.0e-5, 0.04, 0.04, 0.40, 0.45), # Case B\n        (1.0, 1.0e-4, 5.0e-5, 1.5e-4, 0.04, 0.04, 0.40, 0.45),  # Case C\n    ]\n\n    all_results = []\n    num_points = 10001 # Number of points for V_Q sweep\n\n    for params in test_cases:\n        vdd, k_n, k_p, k_a, lambda_n, lambda_p, vth_n, vth_p = params\n\n        def nmos_current(v_g, v_d, v_s, k, vth, lam):\n            \"\"\"Calculates NMOS drain current (D to S) using Shichman-Hodges model.\"\"\"\n            v_gs = v_g - v_s\n            v_ds = v_d - v_s\n\n            if v_gs <= vth or v_ds <= 0:\n                return 0.0  # Cutoff\n\n            v_ov = v_gs - vth\n            if v_ds >= v_ov: # Saturation\n                return 0.5 * k * v_ov**2 * (1 + lam * v_ds)\n            else: # Triode\n                return k * (v_ov * v_ds - 0.5 * v_ds**2)\n        \n        def pmos_current(v_g, v_d, v_s, k, vth, lam):\n            \"\"\"Calculates PMOS drain current (S to D) using Shichman-Hodges model.\"\"\"\n            v_sg = v_s - v_g\n            v_sd = v_s - v_d\n            \n            if v_sg <= vth or v_sd <= 0:\n                return 0.0 # Cutoff\n            \n            v_ov = v_sg - vth\n            if v_sd >= v_ov: # Saturation\n                return 0.5 * k * v_ov**2 * (1 + lam * v_sd)\n            else: # Triode\n                return k * (v_ov * v_sd - 0.5 * v_sd**2)\n\n        def get_i_inj(v_q, v_qb, v_bl, v_wl, case_params):\n            \"\"\"Calculates the injection current at node V_Q for given conditions.\"\"\"\n            _vdd, _kn, _kp, _ka, _lam_n, _lam_p, _vth_n, _vth_p = case_params\n            \n            # Pull-up PMOS (PU)\n            i_pu = pmos_current(v_qb, v_q, _vdd, _kp, _vth_p, _lam_p)\n            \n            # Pull-down NMOS (PD)\n            i_pd = nmos_current(v_qb, v_q, 0.0, _kn, _vth_n, _lam_n)\n            \n            # Pass-gate NMOS (PG)\n            i_pg_net = 0.0\n            if v_wl > _vth_n: # Simplified check for PG being potentially ON\n                if v_q >= v_bl:\n                    i_pg_net = nmos_current(v_wl, v_q, v_bl, _ka, _vth_n, _lam_n)\n                else: # v_q < v_bl\n                    i_pg_net = -nmos_current(v_wl, v_bl, v_q, _ka, _vth_n, _lam_n)\n\n            # KCL: I_inj = I_pd + I_pg_net - I_pu\n            return i_pd + i_pg_net - i_pu\n\n        # --- Metric Calculations ---\n        v_q_sweep = np.linspace(0, vdd, num_points)\n\n        # 1. I_read\n        v_qb_read, v_bl_read, v_wl_read = vdd, vdd, vdd\n        i_inj_read = [get_i_inj(v_q, v_qb_read, v_bl_read, v_wl_read, params) for v_q in v_q_sweep]\n        i_read = np.max(i_inj_read) * 1e6 # Convert A to uA\n\n        # 2. I_hold (analytical calculation)\n        v_ov_hold = vdd - vth_n\n        i_hold = 0.5 * k_n * v_ov_hold**2 * (1 + lambda_n * vdd)\n        i_hold *= 1e6 # Convert A to uA\n\n        # 3. V_write\n        v_write = 0.0 # Based on analytical derivation\n        \n        # The code below implements numerical search as a verification, though it's not strictly necessary.\n        v_qb_write, v_bl_write, v_wl_write = vdd, 0.0, vdd\n        i_inj_write = [get_i_inj(v_q, v_qb_write, v_bl_write, v_wl_write, params) for v_q in v_q_sweep]\n        \n        found_root = False\n        for i in range(1, len(v_q_sweep)):\n            v_q1, i_inj1 = v_q_sweep[i-1], i_inj_write[i-1]\n            v_q2, i_inj2 = v_q_sweep[i], i_inj_write[i]\n            \n            # Check for root at the start of the interval.\n            if i == 1 and abs(i_inj1) < 1e-15:\n                v_write = v_q1\n                found_root = True\n                break\n                \n            # Find the first sign change for interpolation.\n            if i_inj1 * i_inj2 <= 0:\n                # Linear interpolation: V_root = V1 - I1 * (V2-V1)/(I2-I1)\n                if abs(i_inj2 - i_inj1) > 1e-15:\n                    v_write = v_q1 - i_inj1 * (v_q2 - v_q1) / (i_inj2 - i_inj1)\n                else: # Should not happen with I_inj1 * I_inj2 <= 0 and I1 != I2\n                    v_write = v_q1\n                found_root = True\n                break\n        \n        if not found_root and abs(i_inj_write[-1]) < 1e-9:\n             v_write = v_q_sweep[-1]\n\n\n        all_results.append([round(i_read, 6), round(i_hold, 6), round(v_write, 6)])\n\n    # Format the final output string\n    result_str = str(all_results).replace(\" \", \"\")\n    print(result_str)\n\nsolve()\n```"
        }
    ]
}
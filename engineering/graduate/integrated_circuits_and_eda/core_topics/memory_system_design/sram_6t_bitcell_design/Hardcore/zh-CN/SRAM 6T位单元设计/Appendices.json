{
    "hands_on_practices": [
        {
            "introduction": "SRAM单元的一个核心设计挑战是在读取操作期间保持其状态的稳定性。此练习将指导你通过一个简化的模型，将单元的关键设计参数——单元比（Cell Ratio）——与读取静态噪声容限（RSNM）直接联系起来。通过这个计算，你将亲身体会到为保证可靠读取，下拉管和传输管之间必须满足的强度平衡。",
            "id": "4299495",
            "problem": "考虑一个六晶体管静态随机存取存储器（SRAM）位单元，其两个交叉耦合反相器是对称的，并为高直流增益而设计。在读操作期间，字线被驱动至电源电压，两条位线均被预充电至电源电压。假设单元中的每个金属氧化物半导体场效应晶体管（MOSFET）在读干扰工作点附近可以通过线性沟道导通模型进行局部近似，因此漏极电流满足 $I \\approx G \\, V_{DS}$，其中 $G$ 是一个有效电导，其值通过栅极过驱动电压取决于偏置。在读取存储于节点 $Q$ 上的逻辑零时，连接到 $Q$ 的访问晶体管形成到 $V_{DD}$ 的导电通路，而下拉晶体管则形成从 $Q$ 到地的导电通路。\n\n将单元比 $\\text{CR}$ 定义为在字线高电平且位线预充电的条件下，下拉晶体管的有效电导与访问晶体管的有效电导之比，即 $\\text{CR} \\equiv \\frac{G_{pd}}{G_{ax}}$。将节点 $Q$ 处的读干扰电压建模为在 $G_{ax}$ 至 $V_{DD}$ 和 $G_{pd}$ 至地之间产生的分压电压。在高增益对称反相器假设下，将开关区域附近的蝶形曲线（一对反相器电压传输特性曲线，其中一条经镜像后共同绘制）近似为以 $\\frac{V_{DD}}{2}$ 为中心的理想跳变，并将读干扰视为将其中一个“叶”水平平移了等于 $Q$ 处读取低电平值 $\\Delta$ 的量。\n\n基于这些基础——MOSFET 线性化导通、受扰存储节点上的分压以及读静态噪声容限（RSNM）的最大内切正方形定义——通过将最大内切正方形的边长与平移后蝶形曲线的间距相等，推导出在给定电源电压下满足目标读静态噪声容限所需的最小单元比 $\\text{CR}_{\\min}$ 的表达式。然后，在电源电压 $\\;V_{DD} = 0.8\\,\\mathrm{V}\\;$ 时，为 $\\;0.15\\,\\mathrm{V}\\;$ 的目标读静态噪声容限（RSNM）数值计算 $\\text{CR}_{\\min}$。\n\n将您的 $\\text{CR}_{\\min}$ 最终答案四舍五入到四位有效数字。将最终答案表示为无单位的纯数。此问题属于集成电路和电子设计自动化（EDA）领域，重点关注 SRAM 六晶体管位单元设计。",
            "solution": "用户希望找到在给定电源电压 $V_{DD}$ 下，六晶体管（6T）SRAM 位单元为达到指定的读静态噪声容限（RSNM）所需的最小单元比 $\\text{CR}_{\\min}$。推导将基于一系列指定的模型和近似。\n\n首先，我们对存储节点 $Q$ 处的读干扰电压进行建模，该节点存储逻辑零（初始电压为 $0$）。在读操作期间，字线为高电平，导通访问晶体管（$N_{ax}$）。位线被预充电至 $V_{DD}$。下拉晶体管（$N_{pd}$）也处于导通状态，因为其栅极连接到另一个存储节点 $\\bar{Q}$，该节点电压为 $V_{DD}$。这在节点 $Q$ 处形成了一个分压器。具有有效电导 $G_{ax}$ 的访问晶体管将节点 $Q$ 的电压上拉至位线电压 $V_{DD}$。具有有效电导 $G_{pd}$ 的下拉晶体管将节点 $Q$ 的电压下拉至地（$0\\,\\mathrm{V}$）。\n\n根据问题陈述，在这种读干扰情况下，节点 $Q$ 处的电压（我们记为 $\\Delta$）可以使用分压法则计算得出：\n$$\n\\Delta = V_{DD} \\frac{\\frac{1}{G_{pd}}}{\\frac{1}{G_{ax}} + \\frac{1}{G_{pd}}}\n$$\n将分数的分子和分母同乘以 $G_{ax}G_{pd}$，可简化为：\n$$\n\\Delta = V_{DD} \\frac{G_{ax}}{G_{pd} + G_{ax}}\n$$\n将分子和分母同除以 $G_{ax}$，得到：\n$$\n\\Delta = V_{DD} \\frac{1}{\\frac{G_{pd}}{G_{ax}} + 1}\n$$\n问题将单元比 $\\text{CR}$ 定义为 $\\text{CR} \\equiv \\frac{G_{pd}}{G_{ax}}$。将此定义代入 $\\Delta$ 的表达式中，我们得到：\n$$\n\\Delta = \\frac{V_{DD}}{1 + \\text{CR}}\n$$\n\n接下来，我们建立这个干扰电压 $\\Delta$ 与读静态噪声容限（RSNM）之间的关系。问题指出，交叉耦合反相器是对称的，其电压传输特性（VTC）可以近似为以 $\\frac{V_{DD}}{2}$ 为中心的理想跳变。为分析静态噪声容限，我们考虑蝶形图，它由一个反相器的 VTC 和另一个反相器的镜像 VTC 组成。设两个存储节点的电压为 $V_Q$ 和 $V_{\\bar{Q}}$。绘制的两条曲线是 $V_{\\bar{Q}} = \\text{VTC}(V_Q)$ 和 $V_Q = \\text{VTC}(V_{\\bar{Q}})$。\n\n对于理想反相器，VTC 是一个阶跃函数：\n$$\n\\text{VTC}(V_{in}) = \\begin{cases} V_{DD} & \\text{if } V_{in}  \\frac{V_{DD}}{2} \\\\ 0  \\text{if } V_{in} > \\frac{V_{DD}}{2} \\end{cases}\n$$\n未受干扰的蝶形图形成两个以稳定状态 $(0, V_{DD})$ 和 $(V_{DD}, 0)$ 为中心的方形“叶”。每个叶中的最大内切正方形的边长为 $\\frac{V_{DD}}{2}$，这即是保持静态噪声容限。\n\n读操作会干扰位单元。问题将此干扰建模为将一个叶水平平移了 $\\Delta$ 的量。具体来说，当从节点 $Q$ 读取“0”时，其电压被上拉至 $\\Delta$。这会影响输出为 $Q$ 的反相器的 VTC。我们在 y 轴上绘制 $V_{\\bar{Q}}$，在 x 轴上绘制 $V_Q$。驱动 $Q$ 的反相器（输入为 $\\bar{Q}$，输出为 $Q$）的 VTC 是 $V_Q = \\text{VTC}(V_{\\bar{Q}})$。干扰为此输出增加了一个电压 $\\Delta$。新的、退化的 VTC 为 $V_Q ' = \\text{VTC}(V_{\\bar{Q}}) + \\Delta$。在蝶形图中，这对应于将镜像的 VTC 曲线向右水平平移 $\\Delta$。\n\nRSNM 是退化的叶中的最大内切正方形的边长。对应于在 $Q$ 处存储“0”（稳定状态接近 $(0, V_{DD})$）的叶现在由理想 VTC $V_{\\bar{Q}} = \\text{VTC}(V_Q)$ 和平移后的 VTC $V_Q = \\text{VTC}(V_{\\bar{Q}}) + \\Delta$ 所界定。\n内切正方形所在的蝶形曲线的“眼”由以下边界界定：\n\\begin{itemize}\n    \\item 左边界，即退化反相器的低电平输出：$V_Q = 0 + \\Delta = \\Delta$。\n    \\item 右边界，即未退化反相器的开关阈值：$V_Q = \\frac{V_{DD}}{2}$。\n    \\item 下边界，即退化反相器输入的开关阈值：$V_{\\bar{Q}} = \\frac{V_{DD}}{2}$。\n    \\item 上边界，即未退化反相器的高电平输出：$V_{\\bar{Q}} = V_{DD}$。\n\\end{itemize}\n可用于内切正方形的区域是一个矩形，其宽度为 $W = \\frac{V_{DD}}{2} - \\Delta$，高度为 $H = V_{DD} - \\frac{V_{DD}}{2} = \\frac{V_{DD}}{2}$。\n最大内切正方形的边长是宽度和高度中的较小者，即 RSNM。\n$$\n\\text{RSNM} = \\min\\left(W, H\\right) = \\min\\left(\\frac{V_{DD}}{2} - \\Delta, \\frac{V_{DD}}{2}\\right)\n$$\n由于对于任何有限的单元比，$\\Delta > 0$，因此宽度是限制维度。所以：\n$$\n\\text{RSNM} = \\frac{V_{DD}}{2} - \\Delta\n$$\n现在，我们结合这两个推导出的方程。我们将 $\\Delta$ 的表达式代入 RSNM 方程：\n$$\n\\text{RSNM} = \\frac{V_{DD}}{2} - \\frac{V_{DD}}{1 + \\text{CR}}\n$$\n我们需要对该方程求解 $\\text{CR}$，以找到满足给定 RSNM 所需的最小单元比 $\\text{CR}_{\\min}$。\n$$\n\\frac{V_{DD}}{1 + \\text{CR}} = \\frac{V_{DD}}{2} - \\text{RSNM}\n$$\n$$\n1 + \\text{CR} = \\frac{V_{DD}}{\\frac{V_{DD}}{2} - \\text{RSNM}} = \\frac{V_{DD}}{\\frac{V_{DD} - 2\\cdot\\text{RSNM}}{2}} = \\frac{2V_{DD}}{V_{DD} - 2\\cdot\\text{RSNM}}\n$$\n$$\n\\text{CR} = \\frac{2V_{DD}}{V_{DD} - 2\\cdot\\text{RSNM}} - 1 = \\frac{2V_{DD} - (V_{DD} - 2\\cdot\\text{RSNM})}{V_{DD} - 2\\cdot\\text{RSNM}}\n$$\n$$\n\\text{CR}_{\\min} = \\frac{V_{DD} + 2\\cdot\\text{RSNM}}{V_{DD} - 2\\cdot\\text{RSNM}}\n$$\n这是所需的最小单元比的符号表达式。\n\n最后，我们用给定的数值对此表达式进行数值计算：$V_{DD} = 0.8\\,\\mathrm{V}$ 和 $\\text{RSNM} = 0.15\\,\\mathrm{V}$。\n$$\n\\text{CR}_{\\min} = \\frac{0.8 + 2 \\cdot (0.15)}{0.8 - 2 \\cdot (0.15)} = \\frac{0.8 + 0.3}{0.8 - 0.3} = \\frac{1.1}{0.5} = 2.2\n$$\n问题要求将答案四舍五入到四位有效数字。\n$$\n\\text{CR}_{\\min} = 2.200\n$$",
            "answer": "$$\\boxed{2.200}$$"
        },
        {
            "introduction": "在确保了单元可以被稳定读取之后，我们必须同样保证数据可以被成功写入。写入操作本质上是一场上拉PMOS晶体管与通路NMOS晶体管之间的“战斗”。这个练习让你量化成功写入操作所需的条件，从而深入理解字线和位线电压在克服交叉耦合反相器构成的反馈回路中所起的关键作用。",
            "id": "4299426",
            "problem": "考虑一个在电子设计自动化 (EDA) 设计流程中，以互补金属氧化物半导体 (CMOS) 技术实现的静态随机存取存储器 (SRAM) 六晶体管 (6T) 位单元。该位单元初始在节点 $Q$ 存储逻辑高电平，在节点 $\\overline{Q}$ 存储逻辑低电平。通过将相关位线 $BL$ 强行拉至低于接地参考电压 $V_{SS}$（为方便起见，取为 $0$），同时置位字线 (WL) 以导通访问晶体管，尝试向 $Q$ 写入逻辑低电平。互补位线 $\\overline{BL}$ 保持在 $V_{DD}$ 的高电平。\n\n假设使用以下建模框架和参数：\n- 电源电压 $V_{DD} = 0.8 \\,\\text{V}$。\n- 接收反相器的翻转点（引起相对反相器翻转的 $Q$ 点最小输入）$V_{\\text{trip}} = 0.38 \\,\\text{V}$。\n- NMOS 阈值电压 $V_{Tn} = 0.35 \\,\\text{V}$ 和 PMOS 阈值的绝对值 $|V_{Tp}| = 0.40 \\,\\text{V}$。\n- 访问 NMOS 在线性区的近似小信号导通电导由 $g_{\\text{acc}} = k_{\\text{acc}} \\left( V_{WL} - V_{Tn} \\right)$ 建模，其中 $k_{\\text{acc}} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$，从而得到节点 $Q$ 和位线 $BL$ 之间的有效导通电阻 $R_{\\text{on}} = 1 / g_{\\text{acc}}$。\n- 驱动节点 $Q$ 的反相器中的上拉 PMOS 的强度参数为 $\\beta_{p} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$。在翻转之前，此 PMOS 的栅极连接到 $\\overline{Q} \\approx 0$，因此 $V_{SG} \\approx V_{DD}$。对于 $V_{SD} = V_{DD} - V_{Q}$，PMOS 在线性（欧姆）区的导通电流可近似为\n$$\nI_{p} = \\beta_{p} \\left[ \\left( V_{SG} - |V_{Tp}| \\right) V_{SD} - \\frac{1}{2} V_{SD}^{2} \\right].\n$$\n\n在准静态写入假设下，成功状态翻转的必要条件是内部节点满足 $V_{Q} \\leq V_{\\text{trip}}$。在恰好处于翻转阈值的稳态下，取 $V_{Q} = V_{\\text{trip}}$，并将访问路径建模为连接到强制位线电位 $V_{BL}$ 的电阻 $R_{\\text{on}}$，而 PMOS 则从 $V_{DD}$ 向节点 $Q$ 提供电流。\n\n通过将上拉 PMOS 的导通电流与流向位线的访问路径导通电流相等，从第一性原理推导出恰好将 $V_{Q}$ 强制降至 $V_{\\text{trip}}$ 的条件。使用此条件，确定以下两个量：\n1. 当字线被限制为 $V_{WL} = V_{DD}$（无字线升压）时，实现 $V_{Q} = V_{\\text{trip}}$ 所需的最小位线强制电压 $V_{BL,\\text{req}}$。\n2. 当位线被强制为 $V_{BL} = 0$ 时，实现 $V_{Q} = V_{\\text{trip}}$ 所需的最小字线电压 $V_{WL,\\text{req}}$。\n\n最终答案以伏特 (V) 表示，并四舍五入至四位有效数字。将您的最终答案以单行矩阵 $\\left( V_{BL,\\text{req}}^{(1)}, \\, V_{WL}^{(1)}, \\, V_{BL}^{(2)}, \\, V_{WL,\\text{req}}^{(2)} \\right)$ 的形式给出，其中上标 $(1)$ 指无升压字线情况，上标 $(2)$ 指零电压位线情况。",
            "solution": "用户希望我验证并解决一个关于 6T SRAM 位单元写入操作的问题。\n\n### 问题验证\n\n**步骤1：提取给定条件**\n\n-   技术：互补金属氧化物半导体 (CMOS)\n-   器件：静态随机存取存储器 (SRAM) 六晶体管 (6T) 位单元\n-   初始状态：节点 $Q$ 为高电平，节点 $\\overline{Q}$ 为低电平。\n-   操作：向 $Q$ 写入逻辑低电平。\n-   条件：位线 $BL$ 被强制拉至地电压以下 ($V_{SS}=0$)，字线 $WL$ 被置位，位线 $\\overline{BL}$ 保持在 $V_{DD}$。\n-   电源电压：$V_{DD} = 0.8 \\,\\text{V}$。\n-   反相器翻转点：$V_{\\text{trip}} = 0.38 \\,\\text{V}$。\n-   NMOS 阈值电压：$V_{Tn} = 0.35 \\,\\text{V}$。\n-   PMOS 阈值电压绝对值：$|V_{Tp}| = 0.40 \\,\\text{V}$。\n-   访问 NMOS 导通电导：$g_{\\text{acc}} = k_{\\text{acc}} \\left( V_{WL} - V_{Tn} \\right)$。\n-   访问 NMOS 参数：$k_{\\text{acc}} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$。\n-   访问 NMOS 导通电阻：$R_{\\text{on}} = 1 / g_{\\text{acc}}$。\n-   上拉 PMOS 强度参数：$\\beta_{p} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$。\n-   上拉 PMOS 栅源电压：$V_{SG} \\approx V_{DD}$。\n-   上拉 PMOS 源漏电压：$V_{SD} = V_{DD} - V_{Q}$。\n-   上拉 PMOS 线性区电流模型：$I_{p} = \\beta_{p} \\left[ \\left( V_{SG} - |V_{Tp}| \\right) V_{SD} - \\frac{1}{2} V_{SD}^{2} \\right]$。\n-   分析条件：内部节点 $Q$ 保持在 $V_{Q} = V_{\\text{trip}}$。\n-   目标 1：确定当 $V_{WL} = V_{DD}$ 时所需的最小位线电压 $V_{BL,\\text{req}}$。\n-   目标 2：确定当 $V_{BL} = 0$ 时所需的最小字线电压 $V_{WL,\\text{req}}$。\n\n**步骤2：使用提取的给定条件进行验证**\n\n-   **科学依据：** 该问题坚实地建立在 CMOS 电路设计和半导体器件物理学的原理之上。它描述了一个标准的 SRAM 写入操作，使用公认的一阶方程对晶体管的线性工作区进行建模。上拉 PMOS 和访问 NMOS 之间的“写入裕度”之争是 SRAM 分析的核心概念。所有参数和模型在此背景下都是标准的。\n-   **良置性：** 该问题是良置的。它提供了一套完整的参数和一个清晰的物理场景。平衡条件（电流相等）为两种情况下的未知数提供了一个可解的方程。解预期是唯一且有意义的。\n-   **客观性：** 该问题以精确、客观和技术性的语言陈述，没有任何主观性或偏见。\n-   **完整性和一致性：** 该问题是自洽的。所有必要的参数（$V_{DD}$、$V_{\\text{trip}}$、$V_{Tn}$、$|V_{Tp}|$、$\\beta_p$、$k_{acc}$）和控制方程都已提供。提出的两种情况是截然不同的，并且互不矛盾。\n\n**步骤3：结论与行动**\n\n该问题是有效的，因为它科学上合理、良置且完整。我将继续进行解答推导。\n\n### 解答推导\n\n成功写入操作的条件是，节点 $Q$ 的电压 $V_Q$ 可以被拉低到相对反相器的翻转点 $V_{\\text{trip}}$ 以下。问题要求我们分析电路在 $V_Q = V_{\\text{trip}}$ 的临界点。在此准静态平衡点，由上拉 PMOS 晶体管 ($I_p$) 注入节点 $Q$ 的电流必须等于由 NMOS 访问晶体管 ($I_{\\text{acc}}$) 从节点 $Q$ 拉出到位线 $BL$ 的电流。这是基尔霍夫电流定律在节点 $Q$ 的应用。\n$$\nI_p = I_{\\text{acc}}\n$$\n首先，我们推导上拉 PMOS 的电流 $I_p$ 的表达式。该 PMOS 是保持 $Q$ 为高电平的交叉耦合反相器的一部分，因此其栅极连接到 $\\overline{Q}$，$\\overline{Q}$ 处于低电平，约等于 $0 \\,\\text{V}$。PMOS 的源极连接到 $V_{DD}$。\n栅源电压为 $V_{SG} = V_{S} - V_{G} = V_{DD} - 0 = V_{DD}$。\n源漏电压为 $V_{SD} = V_{S} - V_{D} = V_{DD} - V_Q$。\n在分析点，$V_Q = V_{\\text{trip}}$，因此 $V_{SD} = V_{DD} - V_{\\text{trip}}$。\n使用提供的 PMOS 线性区电流模型：\n$$\nI_p = \\beta_{p} \\left[ \\left( V_{SG} - |V_{Tp}| \\right) V_{SD} - \\frac{1}{2} V_{SD}^{2} \\right]\n$$\n代入 $V_{SG}$ 和 $V_{SD}$ 的表达式：\n$$\nI_p = \\beta_{p} \\left[ \\left( V_{DD} - |V_{Tp}| \\right) (V_{DD} - V_{\\text{trip}}) - \\frac{1}{2} (V_{DD} - V_{\\text{trip}})^{2} \\right]\n$$\n这个电流代表了试图保持节点 $Q$ 为高电平的 PMOS 的“抗争”强度。\n\n接下来，我们推导通过 NMOS 访问晶体管的电流 $I_{\\text{acc}}$ 的表达式。该晶体管将节点 $Q$ 连接到位线 $BL$。问题将此路径建模为电导为 $g_{\\text{acc}}$ 的电阻。流出节点 $Q$ 的电流为：\n$$\nI_{\\text{acc}} = g_{\\text{acc}} (V_Q - V_{BL})\n$$\n电导由 $g_{\\text{acc}} = k_{\\text{acc}}(V_{WL} - V_{Tn})$ 给出。\n将其代入电流表达式并设 $V_Q = V_{\\text{trip}}$：\n$$\nI_{\\text{acc}} = k_{\\text{acc}}(V_{WL} - V_{Tn})(V_{\\text{trip}} - V_{BL})\n$$\n这个电流代表了试图将节点 $Q$ 拉为低电平的访问晶体管的强度。\n\n现在，我们令两个电流相等，以形成我们分析的核心控制方程：\n$$\n\\beta_{p} \\left[ \\left( V_{DD} - |V_{Tp}| \\right) (V_{DD} - V_{\\text{trip}}) - \\frac{1}{2} (V_{DD} - V_{\\text{trip}})^{2} \\right] = k_{\\text{acc}}(V_{WL} - V_{Tn})(V_{\\text{trip}} - V_{BL})\n$$\n我们首先计算等式左侧 (LHS) 的值，该值在问题的两个部分中是恒定的。\n给定值：$V_{DD} = 0.8 \\,\\text{V}$，$V_{\\text{trip}} = 0.38 \\,\\text{V}$，$|V_{Tp}| = 0.40 \\,\\text{V}$，$\\beta_{p} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$。\n$$\nV_{DD} - V_{\\text{trip}} = 0.8 - 0.38 = 0.42 \\,\\text{V}\n$$\n$$\nV_{DD} - |V_{Tp}| = 0.8 - 0.40 = 0.40 \\,\\text{V}\n$$\n$$\nLHS = I_p = (2.0 \\times 10^{-4}) \\left[ (0.40)(0.42) - \\frac{1}{2}(0.42)^{2} \\right]\n$$\n$$\nI_p = (2.0 \\times 10^{-4}) \\left[ 0.168 - \\frac{1}{2}(0.1764) \\right] = (2.0 \\times 10^{-4}) [ 0.168 - 0.0882 ]\n$$\n$$\nI_p = (2.0 \\times 10^{-4}) [0.0798] = 1.596 \\times 10^{-5} \\,\\text{A}\n$$\n\n**1. 确定当 $V_{WL} = V_{DD}$ 时的 $V_{BL,\\text{req}}$**\n\n在这种情况下，我们有条件 $V_{WL} = V_{WL}^{(1)} = V_{DD} = 0.8 \\,\\text{V}$。我们需要找到 $V_{BL, \\text{req}}^{(1)}$。\n我们的控制方程变为：\n$$\n1.596 \\times 10^{-5} = k_{\\text{acc}}(V_{DD} - V_{Tn})(V_{\\text{trip}} - V_{BL,\\text{req}}^{(1)})\n$$\n给定值：$k_{\\text{acc}} = 2.0 \\times 10^{-4} \\,\\text{A}/\\text{V}^{2}$，$V_{Tn} = 0.35 \\,\\text{V}$。\n$$\n1.596 \\times 10^{-5} = (2.0 \\times 10^{-4})(0.8 - 0.35)(0.38 - V_{BL,\\text{req}}^{(1)})\n$$\n$$\n1.596 \\times 10^{-5} = (2.0 \\times 10^{-4})(0.45)(0.38 - V_{BL,\\text{req}}^{(1)})\n$$\n$$\n1.596 \\times 10^{-5} = (0.9 \\times 10^{-4})(0.38 - V_{BL,\\text{req}}^{(1)})\n$$\n求解包含 $V_{BL,\\text{req}}^{(1)}$ 的项：\n$$\n0.38 - V_{BL,\\text{req}}^{(1)} = \\frac{1.596 \\times 10^{-5}}{0.9 \\times 10^{-4}} = \\frac{1.596}{9} \\approx 0.177333...\n$$\n$$\nV_{BL,\\text{req}}^{(1)} = 0.38 - 0.177333... = 0.202666... \\,\\text{V}\n$$\n四舍五入到四位有效数字，$V_{BL,\\text{req}}^{(1)} \\approx 0.2027 \\,\\text{V}$。\n\n**2. 确定当 $V_{BL} = 0$ 时的 $V_{WL,\\text{req}}$**\n\n在这种情况下，我们有条件 $V_{BL} = V_{BL}^{(2)} = 0 \\,\\text{V}$。我们需要找到 $V_{WL, \\text{req}}^{(2)}$。\n我们的控制方程是：\n$$\n1.596 \\times 10^{-5} = k_{\\text{acc}}(V_{WL,\\text{req}}^{(2)} - V_{Tn})(V_{\\text{trip}} - 0)\n$$\n$$\n1.596 \\times 10^{-5} = (2.0 \\times 10^{-4})(V_{WL,\\text{req}}^{(2)} - 0.35)(0.38)\n$$\n$$\n1.596 \\times 10^{-5} = (0.76 \\times 10^{-4})(V_{WL,\\text{req}}^{(2)} - 0.35)\n$$\n求解包含 $V_{WL,\\text{req}}^{(2)}$ 的项：\n$$\nV_{WL,\\text{req}}^{(2)} - 0.35 = \\frac{1.596 \\times 10^{-5}}{0.76 \\times 10^{-4}} = \\frac{1.596}{7.6} = 0.21\n$$\n$$\nV_{WL,\\text{req}}^{(2)} = 0.21 + 0.35 = 0.56 \\,\\text{V}\n$$\n四舍五入到四位有效数字，$V_{WL,\\text{req}}^{(2)} = 0.5600 \\,\\text{V}$。\n\n最终答案要求以 $\\left( V_{BL,\\text{req}}^{(1)}, \\, V_{WL}^{(1)}, \\, V_{BL}^{(2)}, \\, V_{WL,\\text{req}}^{(2)} \\right)$ 的格式给出。\n-   $V_{BL,\\text{req}}^{(1)} = 0.2027 \\,\\text{V}$ (已计算)\n-   $V_{WL}^{(1)} = V_{DD} = 0.8 \\,\\text{V}$ (给定)\n-   $V_{BL}^{(2)} = 0 \\,\\text{V}$ (给定)\n-   $V_{WL,\\text{req}}^{(2)} = 0.5600 \\,\\text{V}$ (已计算)\n\n这些值将按要求放入一个行矩阵中。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0.2027  0.8  0  0.5600 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "虽然解析模型有助于建立直观理解，但实际的电路设计更依赖于精确的仿真方法。本练习将介绍N曲线（N-curve）这一工业标准技术，它能够全面地表征SRAM单元的读、写及保持稳定性。通过编写代码来模拟N曲线的生成，你将能够从根本上理解$I_{read}$、$I_{hold}$和$V_{write}$等关键性能指标是如何从晶体管级的行为中提取出来的。",
            "id": "4299483",
            "problem": "考虑一个六晶体管静态随机存取存储器（SRAM）位单元，它由两个交叉耦合的互补金属氧化物半导体（CMOS）反相器和两个将内部存储节点连接到位线的访问晶体管组成。设电源电压为 $V_{DD}$，待测存储节点为 $V_{Q}$，相对节点为 $V_{QB}$。在以下场景中，$V_{QB}$ 固定，而 $V_{Q}$ 由一个理想直流（DC）电压源强制在区间 $[0, V_{DD}]$ 上扫描。这两个访问晶体管是n沟道金属氧化物半导体（NMOS）器件，由字线电压 $V_{WL}$ 控制，并将 $V_{Q}$ 连接到位线 $V_{BL}$，将 $V_{QB}$ 连接到互补位线 $V_{BLB}$。\n\n使用 Shichman–Hodges 长沟道MOSFET模型计算直流电流，其中忽略体效应，且沟道长度调制仅应用于饱和区。对于NMOS，其漏极电流 $I_{D,n}$（从漏极到源极为正）由栅极电压 $V_{G}$、漏极电压 $V_{D}$、源极电压 $V_{S}$、跨导参数 $k_{n}$、阈值电压 $V_{th,n}$ 和沟道长度调制系数 $\\lambda_{n}$ 决定，具体如下：\n- 截止区：如果 $V_{GS} \\le V_{th,n}$ 或 $V_{DS} \\le 0$，则 $I_{D,n} = 0$，\n- 三极管区：如果 $0  V_{DS}  V_{GS} - V_{th,n}$，则 $I_{D,n} = k_{n}\\left[(V_{GS} - V_{th,n})V_{DS} - \\tfrac{1}{2}V_{DS}^{2}\\right]$，\n- 饱和区：如果 $V_{DS} \\ge V_{GS} - V_{th,n}$，则 $I_{D,n} = \\tfrac{1}{2}k_{n}(V_{GS} - V_{th,n})^{2}\\left(1 + \\lambda_{n}V_{DS}\\right)$，\n其中 $V_{GS} = V_{G} - V_{S}$ 且 $V_{DS} = V_{D} - V_{S}$。\n\n对于p沟道金属氧化物半导体（PMOS），漏极电流 $I_{D,p}$ 定义为从源极到漏极为正。设 $k_{p}$ 为PMOS的跨导参数，$V_{th,p}>0$ 为其阈值大小，$V_{G}$ 为栅极电压，$V_{D}$ 为漏极电压，$V_{S}$ 为源极电压，以及 $\\lambda_{p}$ 为饱和区的沟道长度调制系数。使用 $V_{SG} = V_{S} - V_{G}$ 和 $V_{SD} = V_{S} - V_{D}$，\n- 截止区：如果 $V_{SG} \\le V_{th,p}$ 或 $V_{SD} \\le 0$，则 $I_{D,p} = 0$，\n- 三极管区：如果 $0  V_{SD}  V_{SG} - V_{th,p}$，则 $I_{D,p} = k_{p}\\left[(V_{SG} - V_{th,p})V_{SD} - \\tfrac{1}{2}V_{SD}^{2}\\right]$，\n- 饱和区：如果 $V_{SD} \\ge V_{SG} - V_{th,p}$，则 $I_{D,p} = \\tfrac{1}{2}k_{p}(V_{SG} - V_{th,p})^{2}\\left(1 + \\lambda_{p}V_{SD}\\right)$。\n\n对于连接到节点 $V_{Q}$ 的反相器，PMOS的源极接 $V_{DD}$，漏极接 $V_{Q}$，栅极接 $V_{QB}$；而NMOS的漏极接 $V_{Q}$，源极接 $0$，栅极接 $V_{QB}$。连接 $V_{Q}$ 和 $V_{BL}$ 的访问NMOS的栅极为 $V_{WL}$，其源极/漏极的分配遵循较高/较低的端电压，以满足模型中 $V_{DS} \\ge 0$ 的条件。\n\n定义节点注入电流 $I_{inj}(V_{Q})$ 为理想直流电压源必须注入节点 $V_{Q}$ 的净电流，以在所有晶体管电流遵循上述模型流动时，将 $V_{Q}$ 维持在注入电压值。根据节点 $V_{Q}$ 处的基尔霍夫电流定律（KCL），采用如下符号约定：从PMOS和位线流入节点 $V_{Q}$ 的电流为正，通过下拉NMOS离开节点 $V_{Q}$ 或流入位线的电流为负。然后，$I_{inj}(V_{Q})$ 的定义使得所有器件电流与 $I_{inj}(V_{Q})$ 的代数和为零。\n\n您必须通过将 $V_{Q}$ 从 $0$ 扫描到 $V_{DD}$ 并保持 $V_{QB}$ 固定的方式，计算以下N曲线指标：\n- 读取指标 $I_{read}$ 是在 $V_{WL} = V_{DD}$、$V_{BL} = V_{DD}$ 且 $V_{QB} = V_{DD}$ 条件下，扫描过程中 $I_{inj}(V_{Q})$ 的最大值。\n- 保持指标 $I_{hold}$ 是在 $V_{WL} = 0$、$V_{QB} = V_{DD}$ 且 $V_{BL}$ 断开的条件下，扫描过程中 $I_{inj}(V_{Q})$ 的最大值。在模型中，断开对应于访问电流为零。\n- 写入指标 $V_{write}$ 是在 $V_{WL} = V_{DD}$、$V_{BL} = 0$ 且 $V_{QB} = V_{DD}$ 条件下，使得 $I_{inj}(V_{Q}) = 0$ 在 $[0, V_{DD}]$ 区间内的最小 $V_{Q}$ 值。\n\n将 $I_{read}$ 和 $I_{hold}$ 以微安（microamperes）为单位表示为十进制数，并将 $V_{write}$ 以伏特（volts）为单位表示为十进制数。所有角度量（如有）必须以弧度为单位；此处不需要。\n\n实现一个程序，通过对 $V_{Q}$ 进行均匀扫描来评估这些指标，并在需要时使用线性插值来估计 $V_{write}$ 的过零点。使用以下参数集测试套件，每个集合以元组 $(V_{DD}, k_{n}, k_{p}, k_{a}, \\lambda_{n}, \\lambda_{p}, V_{th,n}, V_{th,p})$ 的形式给出，其中 $k_{a}$ 是访问NMOS的跨导参数：\n1. 情况A（平衡单元）：$(1.0, 1.0\\times 10^{-4}, 5.0\\times 10^{-5}, 8.0\\times 10^{-5}, 0.04, 0.04, 0.40, 0.45)$。\n2. 情况B（弱访问）：$(1.0, 1.0\\times 10^{-4}, 5.0\\times 10^{-5}, 2.0\\times 10^{-5}, 0.04, 0.04, 0.40, 0.45)$。\n3. 情况C（强访问）：$(1.0, 1.0\\times 10^{-4}, 5.0\\times 10^{-5}, 1.5\\times 10^{-4}, 0.04, 0.04, 0.40, 0.45)$。\n\n您的程序应生成单行输出，其中包含结果，格式为一个逗号分隔的三元素列表的列表，每个测试用例对应一个三元素列表，每个内部列表按 $[I_{read}, I_{hold}, V_{write}]$ 的顺序排列，所有值均四舍五入到六位小数。例如，输出格式必须类似于 $[[x_{1},y_{1},z_{1}],[x_{2},y_{2},z_{2}],[x_{3},y_{3},z_{3}]]$，其中每个 $x_{i}$ 和 $y_{i}$ 的单位是微安，每个 $z_{i}$ 的单位是伏特。",
            "solution": "用户提供的问题已经过严格验证，并被确定为**有效**。该问题在科学上基于固态器件物理和集成电路理论，问题陈述清晰，给出了完整明确的已知条件，并以客观、正式的语言表述。问题描述了一种用于SRAM单元的标准分析技术（N曲线），这是数字电路设计中的一个重要课题。所有参数和模型都已明确提供，从而可以得到唯一且可验证的解。\n\n解决方案要求计算SRAM位单元的三个指标：读取电流（$I_{read}$）、保持电流（$I_{hold}$）和写入电压（$V_{write}$）。该方法涉及在存储节点 $V_Q$ 应用基尔霍夫电流定律（KCL），并使用提供的 Shichman–Hodges MOSFET模型来确定每个晶体管的电流贡献。\n\n首先，我们按照规定定义NMOS和PMOS晶体管的数学模型。\n\n对于一个栅极电压为 $V_G$、漏极电压为 $V_D$、源极电压为 $V_S$ 的NMOS晶体管，我们定义 $V_{GS} = V_G - V_S$ 和 $V_{DS} = V_D - V_S$。漏极电流 $I_{D,n}$ 由下式给出：\n$$\nI_{D,n}(V_G, V_D, V_S) =\n\\begin{cases}\n0  \\text{if } V_{GS} \\le V_{th,n} \\text{ or } V_{DS} \\le 0 \\\\\nk_{n}\\left[(V_{GS} - V_{th,n})V_{DS} - \\frac{1}{2}V_{DS}^{2}\\right]  \\text{if } 0  V_{DS}  V_{GS} - V_{th,n} \\\\\n\\frac{1}{2}k_{n}(V_{GS} - V_{th,n})^{2}(1 + \\lambda_{n}V_{DS})  \\text{if } V_{DS} \\ge V_{GS} - V_{th,n}\n\\end{cases}\n$$\n\n对于一个PMOS晶体管，使用 $V_{SG} = V_S - V_G$ 和 $V_{SD} = V_S - V_D$，源极到漏极的电流 $I_{D,p}$ 由下式给出：\n$$\nI_{D,p}(V_G, V_D, V_S) =\n\\begin{cases}\n0  \\text{if } V_{SG} \\le V_{th,p} \\text{ or } V_{SD} \\le 0 \\\\\nk_{p}\\left[(V_{SG} - V_{th,p})V_{SD} - \\frac{1}{2}V_{SD}^{2}\\right]  \\text{if } 0  V_{SD}  V_{SG} - V_{th,p} \\\\\n\\frac{1}{2}k_{p}(V_{SG} - V_{th,p})^{2}(1 + \\lambda_{p}V_{SD})  \\text{if } V_{SD} \\ge V_{SG} - V_{th,p}\n\\end{cases}\n$$\n\n注入电流 $I_{inj}(V_Q)$ 通过在节点 $V_Q$ 应用KCL找到。连接到 $V_Q$ 的晶体管是上拉PMOS（PU）、下拉NMOS（PD）和传输门访问NMOS（PG）。KCL规定，流入节点的电流总和等于流出节点的电流总和。设 $I_{PU}$ 是从 $V_{DD}$流入 $V_Q$ 的电流，$I_{PD}$ 是从 $V_Q$ 流向地的电流，$I_{PG}$ 是通过访问晶体管离开 $V_Q$ 的净电流。注入电流 $I_{inj}$ 也流入该节点。因此：\n$$ I_{inj} + I_{PU} = I_{PD} + I_{PG} \\implies I_{inj}(V_Q) = I_{PD} + I_{PG} - I_{PU} $$\n每个晶体管的电流由工作条件（电压 $V_{QB}$、$V_{WL}$、$V_{BL}$）和 $V_Q$ 的扫描值决定：\n- 上拉（PU）：$I_{PU} = I_{D,p}(V_{G}=V_{QB}, V_{D}=V_Q, V_{S}=V_{DD})$，使用PMOS参数 $(k_p, V_{th,p}, \\lambda_p)$。\n- 下拉（PD）：$I_{PD} = I_{D,n}(V_{G}=V_{QB}, V_{D}=V_Q, V_{S}=0)$，使用NMOS参数 $(k_n, V_{th,n}, \\lambda_n)$。\n- 传输门（PG）：离开节点 $V_Q$ 的净电流 $I_{PG}$ 使用访问NMOS模型 $(k_a, V_{th,n}, \\lambda_n)$ 计算。访问晶体管连接节点 $V_Q$ 和 $V_{BL}$。\n  - 如果 $V_Q \\ge V_{BL}$：$I_{PG} = I_{D,n}(V_{G}=V_{WL}, V_{D}=V_Q, V_{S}=V_{BL})$。\n  - 如果 $V_Q  V_{BL}$：$I_{PG} = -I_{D,n}(V_{G}=V_{WL}, V_{D}=V_{BL}, V_{S}=V_Q)$。\n\n我们现在分析每个指标：\n\n**1. 保持指标 ($I_{hold}$)**\n- 条件：$V_{WL} = 0$, $V_{QB} = V_{DD}$, $V_{BL}$ 断开。\n- 条件 $V_{WL} = 0$ 且 $V_{th,n} > 0$ 会使访问晶体管（PG）处于截止区，因此 $I_{PG} = 0$。\n- 条件 $V_{QB} = V_{DD}$ 会使上拉晶体管（PU）处于截止区。其栅极和源极都为 $V_{DD}$，所以 $V_{SG} = V_{DD} - V_{DD} = 0$。由于 $V_{th,p} > 0$，满足条件 $V_{SG} \\le V_{th,p}$，因此 $I_{PU} = 0$。\n- 下拉晶体管（PD）的 $V_G = V_{QB} = V_{DD}$ 且 $V_S = 0$，所以 $V_{GS} = V_{DD}$。它处于导通状态。\n- 因此，$I_{inj}(V_Q) = I_{PD} + 0 - 0 = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$。\n- $I_{hold}$ 是当 $V_Q$ 从 $0$ 扫描到 $V_{DD}$ 时该电流的最大值。对于固定的 $V_{GS}$，NMOS漏极电流是 $V_{DS} = V_Q$ 的单调递增函数。最大值出现在 $V_Q = V_{DD}$ 处。\n- 在 $V_Q = V_{DD}$ 时，我们有 $V_{DS} = V_{DD}$ 和 $V_{GS} = V_{DD}$。饱和条件 $V_{DS} \\ge V_{GS} - V_{th,n}$ 变为 $V_{DD} \\ge V_{DD} - V_{th,n}$，简化为 $V_{th,n} \\ge 0$，这是一个成立的陈述。\n- 最大电流是在 $V_{DS} = V_{DD}$ 时的饱和电流：\n  $$ I_{hold} = \\frac{1}{2}k_{n}(V_{DD} - V_{th,n})^{2}(1 + \\lambda_{n}V_{DD}) $$\n\n**2. 写入指标 ($V_{write}$)**\n- 条件：$V_{WL} = V_{DD}$, $V_{BL} = 0$, $V_{QB} = V_{DD}$。\n- 我们寻找在 $V_Q \\in [0, V_{DD}]$ 区间内使 $I_{inj}(V_Q) = 0$ 的最小 $V_Q$ 值。\n- PU晶体管：与保持状态相同，$V_{QB}=V_{DD} \\implies I_{PU} = 0$。\n- PD晶体管：$V_{G} = V_{QB} = V_{DD}$，导通。$I_{PD} = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$。\n- PG晶体管：$V_{G} = V_{WL} = V_{DD}$。它连接 $V_Q$ 和 $V_{BL}=0$。当 $V_Q$ 在 $[0, V_{DD}]$ 区间扫描时，我们始终有 $V_Q \\ge V_{BL}$。因此，$I_{PG} = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$，使用访问NMOS参数 $(k_a)$。\n- 注入电流是两个下拉电流之和：\n  $$ I_{inj}(V_Q) = I_{PD} + I_{PG} = I_{D,n}(V_{DD}, V_Q, 0; k_n, \\lambda_n) + I_{D,n}(V_{DD}, V_Q, 0; k_a, \\lambda_n) $$\n- NMOS漏极电流 $I_{D,n}$ 是非负的。$I_{D,n}(V_G, V_D, V_S)$ 仅在晶体管处于截止区或 $V_{DS}=0$ 时为零。在这里，两个晶体管都处于导通状态（因为 $V_{DD} > V_{th,n}$），所以电流仅在 $V_{DS}=V_Q=0$ 时为零。对于任何 $V_Q > 0$，$I_{inj}(V_Q) > 0$。\n- 因此，使 $I_{inj}(V_Q) = 0$ 的最小 $V_Q$ 值恰好是 $V_Q = 0$。\n  $$ V_{write} = 0 \\, V $$\n\n**3. 读取指标 ($I_{read}$)**\n- 条件：$V_{WL} = V_{DD}$, $V_{BL} = V_{DD}$, $V_{QB} = V_{DD}$。\n- 我们寻找在 $V_Q \\in [0, V_{DD}]$ 扫描区间上 $I_{inj}(V_Q)$ 的最大值。\n- PU晶体管：同前，$V_{QB}=V_{DD} \\implies I_{PU} = 0$。\n- PD晶体管：同前，$V_G = V_{QB} = V_{DD}$。它处于导通状态。$I_{PD} = I_{D,n}(V_G=V_{DD}, V_D=V_Q, V_S=0)$。\n- PG晶体管：$V_G = V_{WL} = V_{DD}$。它连接 $V_Q$ 和 $V_{BL}=V_{DD}$。当 $V_Q$ 在 $[0, V_{DD}]$ 区间扫描时，我们始终有 $V_Q \\le V_{BL}$。电流从 $V_{BL}$ 流入 $V_Q$，因此流出的净电流 $I_{PG}$ 为负。\n  $$ I_{PG} = -I_{D,n}(V_{G}=V_{DD}, V_{D}=V_{DD}, V_{S}=V_Q) $$\n- 总注入电流为：\n  $$ I_{inj}(V_Q) = I_{D,n}(V_{DD}, V_Q, 0; k_n, \\lambda_n) - I_{D,n}(V_{DD}, V_{DD}, V_Q; k_a, \\lambda_n) $$\n- 该函数没有简单的解析最大值。它在 $V_Q=0$ 时为负值，然后增加，在 $V_Q=V_{DD}$ 时返回到 $0$。最大值 $I_{read}$ 必须通过从 $0$ 到 $V_{DD}$ 对 $V_Q$ 进行数值扫描并找到 $I_{inj}(V_Q)$ 的峰值来确定。\n\n以下程序实现了此逻辑，以计算所提供测试用例所需的指标。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates SRAM bitcell metrics for given parameter sets.\n    \"\"\"\n\n    # Test cases: (VDD, kn, kp, ka, lambda_n, lambda_p, Vth_n, Vth_p)\n    test_cases = [\n        (1.0, 1.0e-4, 5.0e-5, 8.0e-5, 0.04, 0.04, 0.40, 0.45), # Case A\n        (1.0, 1.0e-4, 5.0e-5, 2.0e-5, 0.04, 0.04, 0.40, 0.45), # Case B\n        (1.0, 1.0e-4, 5.0e-5, 1.5e-4, 0.04, 0.04, 0.40, 0.45),  # Case C\n    ]\n\n    all_results = []\n    num_points = 10001 # Number of points for V_Q sweep\n\n    for params in test_cases:\n        vdd, k_n, k_p, k_a, lambda_n, lambda_p, vth_n, vth_p = params\n\n        def nmos_current(v_g, v_d, v_s, k, vth, lam):\n            \"\"\"Calculates NMOS drain current (D to S) using Shichman-Hodges model.\"\"\"\n            v_gs = v_g - v_s\n            v_ds = v_d - v_s\n\n            if v_gs = vth or v_ds = 0:\n                return 0.0  # Cutoff\n\n            v_ov = v_gs - vth\n            if v_ds >= v_ov: # Saturation\n                return 0.5 * k * v_ov**2 * (1 + lam * v_ds)\n            else: # Triode\n                return k * (v_ov * v_ds - 0.5 * v_ds**2)\n        \n        def pmos_current(v_g, v_d, v_s, k, vth, lam):\n            \"\"\"Calculates PMOS drain current (S to D) using Shichman-Hodges model.\"\"\"\n            v_sg = v_s - v_g\n            v_sd = v_s - v_d\n            \n            if v_sg = vth or v_sd = 0:\n                return 0.0 # Cutoff\n            \n            v_ov = v_sg - vth\n            if v_sd >= v_ov: # Saturation\n                return 0.5 * k * v_ov**2 * (1 + lam * v_sd)\n            else: # Triode\n                return k * (v_ov * v_sd - 0.5 * v_sd**2)\n\n        def get_i_inj(v_q, v_qb, v_bl, v_wl, case_params):\n            \"\"\"Calculates the injection current at node V_Q for given conditions.\"\"\"\n            _vdd, _kn, _kp, _ka, _lam_n, _lam_p, _vth_n, _vth_p = case_params\n            \n            # Pull-up PMOS (PU)\n            i_pu = pmos_current(v_qb, v_q, _vdd, _kp, _vth_p, _lam_p)\n            \n            # Pull-down NMOS (PD)\n            i_pd = nmos_current(v_qb, v_q, 0.0, _kn, _vth_n, _lam_n)\n            \n            # Pass-gate NMOS (PG)\n            i_pg_net = 0.0\n            if v_wl > _vth_n: # Simplified check for PG being potentially ON\n                if v_q >= v_bl:\n                    i_pg_net = nmos_current(v_wl, v_q, v_bl, _ka, _vth_n, _lam_n)\n                else: # v_q  v_bl\n                    i_pg_net = -nmos_current(v_wl, v_bl, v_q, _ka, _vth_n, _lam_n)\n\n            # KCL: I_inj = I_pd + I_pg_net - I_pu\n            return i_pd + i_pg_net - i_pu\n\n        # --- Metric Calculations ---\n        v_q_sweep = np.linspace(0, vdd, num_points)\n\n        # 1. I_read\n        v_qb_read, v_bl_read, v_wl_read = vdd, vdd, vdd\n        i_inj_read = [get_i_inj(v_q, v_qb_read, v_bl_read, v_wl_read, params) for v_q in v_q_sweep]\n        i_read = np.max(i_inj_read) * 1e6 # Convert A to uA\n\n        # 2. I_hold (analytical calculation)\n        v_ov_hold = vdd - vth_n\n        i_hold = 0.5 * k_n * v_ov_hold**2 * (1 + lambda_n * vdd)\n        i_hold *= 1e6 # Convert A to uA\n\n        # 3. V_write\n        v_write = 0.0 # Based on analytical derivation\n        \n        # The code below implements numerical search as a verification, though it's not strictly necessary.\n        v_qb_write, v_bl_write, v_wl_write = vdd, 0.0, vdd\n        i_inj_write = [get_i_inj(v_q, v_qb_write, v_bl_write, v_wl_write, params) for v_q in v_q_sweep]\n        \n        found_root = False\n        for i in range(1, len(v_q_sweep)):\n            v_q1, i_inj1 = v_q_sweep[i-1], i_inj_write[i-1]\n            v_q2, i_inj2 = v_q_sweep[i], i_inj_write[i]\n            \n            # Check for root at the start of the interval.\n            if i == 1 and abs(i_inj1)  1e-15:\n                v_write = v_q1\n                found_root = True\n                break\n                \n            # Find the first sign change for interpolation.\n            if i_inj1 * i_inj2 = 0:\n                # Linear interpolation: V_root = V1 - I1 * (V2-V1)/(I2-I1)\n                if abs(i_inj2 - i_inj1) > 1e-15:\n                    v_write = v_q1 - i_inj1 * (v_q2 - v_q1) / (i_inj2 - i_inj1)\n                else: # Should not happen with I_inj1 * I_inj2 = 0 and I1 != I2\n                    v_write = v_q1\n                found_root = True\n                break\n        \n        if not found_root and abs(i_inj_write[-1])  1e-9:\n             v_write = v_q_sweep[-1]\n\n\n        all_results.append([round(i_read, 6), round(i_hold, 6), round(v_write, 6)])\n\n    # Format the final output string\n    result_str = str(all_results).replace(\" \", \"\")\n    print(result_str)\n\nsolve()\n```"
        }
    ]
}
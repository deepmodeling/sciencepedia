{
    "hands_on_practices": [
        {
            "introduction": "A cornerstone of designing any static logic family is controlling the switching characteristics of its basic components. This first exercise takes you back to the fundamental CMOS inverter to derive the relationship between transistor sizing and the logic threshold, $V_M$. Mastering this analysis is crucial, as the principles of balancing pull-up and pull-down strengths to set a desired switching point are central to the design of restoring stages in more complex ratioed and differential families .",
            "id": "4292272",
            "problem": "A complementary Metal–Oxide–Semiconductor (CMOS) inverter in a static logic family is implemented with an n-channel Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) pull-down and a p-channel MOSFET pull-up. Let the electron and hole mobilities be $\\mu_{n}$ and $\\mu_{p}$, the oxide capacitance per unit area be $C_{\\mathrm{ox}}$, the device widths be $W_{n}$ and $W_{p}$, and the channel lengths be $L_{n}$ and $L_{p}$. Define the transconductance parameters $\\beta_{n} \\triangleq \\mu_{n} C_{\\mathrm{ox}} \\frac{W_{n}}{L_{n}}$ and $\\beta_{p} \\triangleq \\mu_{p} C_{\\mathrm{ox}} \\frac{W_{p}}{L_{p}}$. The logic supply is $V_{DD}$, the n-channel threshold voltage is $V_{tn} > 0$, and the magnitude of the p-channel threshold voltage is $|V_{tp}| > 0$. Assume long-channel operation in strong inversion, negligible channel-length modulation and body effect, and operation at a constant temperature so that $\\mu_{n}$ and $\\mu_{p}$ are constants.\n\nThe switching threshold $V_{M}$ of the inverter is defined as the input voltage at which the direct-current transfer characteristic satisfies $V_{\\mathrm{in}} = V_{\\mathrm{out}} = V_{M}$ under static conditions. You are tasked with designing the device ratio such that a specified switching threshold $V_{M} = \\alpha V_{DD}$ is achieved for a given target $\\alpha \\in (0, 1)$ (for example, the mid-point target corresponds to $\\alpha = 0.5$).\n\nStarting only from the long-channel square-law saturation drain current expressions for Metal–Oxide–Semiconductor Field-Effect Transistors (MOSFETs) and the definition of $V_{M}$, derive a closed-form analytical expression for the ratio $\\frac{\\beta_{p}}{\\beta_{n}}$ required to realize $V_{M} = \\alpha V_{DD}$ in terms of $\\alpha$, $V_{DD}$, $V_{tn}$, and $|V_{tp}|$. Clearly state any conditions on $\\alpha$ and the parameters that are necessary for the derivation to be self-consistent and physically realizable. Briefly articulate, in terms of $\\mu_{n}/\\mu_{p}$ and threshold asymmetry, how the required $\\frac{\\beta_{p}}{\\beta_{n}}$ translates into a feasible geometry ratio $\\frac{W_{p}}{W_{n}}$ when $L_{p} = L_{n}$.\n\nProvide the final result as a single simplified analytic expression for $\\frac{\\beta_{p}}{\\beta_{n}}$. No numerical evaluation is required and no approximations beyond those stated are permitted. The final answer must be given as a closed-form expression without units.",
            "solution": "The switching threshold $V_{M}$ of a CMOS inverter is defined as the unique point on the static voltage transfer characteristic where the input voltage $V_{\\mathrm{in}}$ equals the output voltage $V_{\\mathrm{out}}$. Thus, at the switching threshold, we have:\n$$V_{\\mathrm{in}} = V_{\\mathrm{out}} = V_{M}$$\nUnder this condition, the n-channel MOSFET (NMOS) has gate-to-source voltage $V_{GSn} = V_{\\mathrm{in}} = V_{M}$ and drain-to-source voltage $V_{DSn} = V_{\\mathrm{out}} = V_{M}$. The p-channel MOSFET (PMOS) has source-to-gate voltage $V_{SGp} = V_{DD} - V_{\\mathrm{in}} = V_{DD} - V_{M}$ and source-to-drain voltage $V_{SDp} = V_{DD} - V_{\\mathrm{out}} = V_{DD} - V_{M}$.\n\nFor the circuit to be functional, both transistors must be in the 'on' state. For the NMOS, this requires $V_{GSn}  V_{tn}$, which implies $V_{M}  V_{tn}$. For the PMOS, this requires $V_{SGp}  |V_{tp}|$, which implies $V_{DD} - V_{M}  |V_{tp}|$.\n\nNext, we determine the region of operation for each transistor.\nFor the NMOS, the saturation condition is $V_{DSn} \\ge V_{GSn} - V_{tn}$. Substituting the voltages at the switching threshold, we get $V_{M} \\ge V_{M} - V_{tn}$, which simplifies to $V_{tn} \\ge 0$. The problem states $V_{tn}  0$, so the NMOS is in the saturation region.\nFor the PMOS, the saturation condition is $V_{SDp} \\ge V_{SGp} - |V_{tp}|$. Substituting the voltages, we get $V_{DD} - V_{M} \\ge V_{DD} - V_{M} - |V_{tp}|$, which simplifies to $|V_{tp}| \\ge 0$. The problem states $|V_{tp}|  0$, so the PMOS is also in the saturation region.\n\nSince both transistors are in saturation, their drain currents are given by the long-channel square-law model. The problem states to neglect channel-length modulation.\nThe NMOS saturation current is:\n$$I_{Dn} = \\frac{1}{2} \\beta_{n} (V_{GSn} - V_{tn})^2$$\nThe PMOS saturation current is:\n$$I_{Dp} = \\frac{1}{2} \\beta_{p} (V_{SGp} - |V_{tp}|)^2$$\nIn a static CMOS inverter, there is no direct-current path from $V_{DD}$ to ground except for the brief switching interval. At the static point $V_{\\mathrm{in}} = V_{\\mathrm{out}} = V_{M}$, the current flowing through the NMOS pull-down device must exactly equal the current flowing through the PMOS pull-up device. Therefore, $I_{Dn} = I_{Dp}$.\n$$\\frac{1}{2} \\beta_{n} (V_{GSn} - V_{tn})^2 = \\frac{1}{2} \\beta_{p} (V_{SGp} - |V_{tp}|)^2$$\nSubstituting the voltage expressions at the switching threshold:\n$$\\beta_{n} (V_{M} - V_{tn})^2 = \\beta_{p} (V_{DD} - V_{M} - |V_{tp}|)^2$$\nWe are asked to find the ratio $\\frac{\\beta_{p}}{\\beta_{n}}$. Rearranging the equation yields:\n$$\\frac{\\beta_{p}}{\\beta_{n}} = \\frac{(V_{M} - V_{tn})^2}{(V_{DD} - V_{M} - |V_{tp}|)^2}$$\nThe problem specifies that the target switching threshold is $V_{M} = \\alpha V_{DD}$ for a given $\\alpha \\in (0, 1)$. Substituting this expression for $V_{M}$ into the equation for the ratio:\n$$\\frac{\\beta_{p}}{\\beta_{n}} = \\frac{(\\alpha V_{DD} - V_{tn})^2}{(V_{DD} - \\alpha V_{DD} - |V_{tp}|)^2}$$\nFactoring $V_{DD}$ out of the term in the denominator:\n$$\\frac{\\beta_{p}}{\\beta_{n}} = \\frac{(\\alpha V_{DD} - V_{tn})^2}{((1-\\alpha)V_{DD} - |V_{tp}|)^2}$$\nThis can be written more compactly as:\n$$\\frac{\\beta_{p}}{\\beta_{n}} = \\left( \\frac{\\alpha V_{DD} - V_{tn}}{(1-\\alpha)V_{DD} - |V_{tp}|} \\right)^2$$\nFor this derivation to be self-consistent and physically realizable, the conditions for both transistors being 'on' must be satisfied. These conditions, $V_{M}  V_{tn}$ and $V_{DD} - V_{M}  |V_{tp}|$, translate to the following constraints on $\\alpha$:\n$1$. $\\alpha V_{DD}  V_{tn} \\implies \\alpha  \\frac{V_{tn}}{V_{DD}}$\n$2$. $V_{DD} - \\alpha V_{DD}  |V_{tp}| \\implies (1-\\alpha)V_{DD}  |V_{tp}| \\implies 1 - \\alpha  \\frac{|V_{tp}|}{V_{DD}} \\implies \\alpha  1 - \\frac{|V_{tp}|}{V_{DD}}$\nThus, a physically realizable switching threshold $V_M = \\alpha V_{DD}$ is only possible if $\\alpha$ is within the range $\\frac{V_{tn}}{V_{DD}}  \\alpha  1 - \\frac{|V_{tp}|}{V_{DD}}$. A necessary condition for this range to exist is $\\frac{V_{tn}}{V_{DD}}  1 - \\frac{|V_{tp}|}{V_{DD}}$, which implies $V_{tn} + |V_{tp}|  V_{DD}$. This is the fundamental requirement that the sum of the threshold voltage magnitudes must be less than the supply voltage for the inverter to have a gain greater than unity and function correctly.\n\nTo translate the required ratio $\\frac{\\beta_{p}}{\\beta_{n}}$ into a feasible geometry ratio $\\frac{W_{p}}{W_{n}}$, we use the definitions of the transconductance parameters:\n$$\\beta_{n} = \\mu_{n} C_{\\mathrm{ox}} \\frac{W_{n}}{L_{n}} \\quad \\text{and} \\quad \\beta_{p} = \\mu_{p} C_{\\mathrm{ox}} \\frac{W_{p}}{L_{p}}$$\nThe ratio is:\n$$\\frac{\\beta_{p}}{\\beta_{n}} = \\frac{\\mu_{p} C_{\\mathrm{ox}} \\frac{W_{p}}{L_{p}}}{\\mu_{n} C_{\\mathrm{ox}} \\frac{W_{n}}{L_{n}}} = \\frac{\\mu_{p}}{\\mu_{n}} \\frac{W_{p}}{W_{n}} \\frac{L_{n}}{L_{p}}$$\nAssuming, as is common, that the channel lengths are equal, $L_{p} = L_{n} = L$, this simplifies to:\n$$\\frac{\\beta_{p}}{\\beta_{n}} = \\frac{\\mu_{p}}{\\mu_{n}} \\frac{W_{p}}{W_{n}}$$\nSolving for the device width ratio $\\frac{W_{p}}{W_{n}}$:\n$$\\frac{W_{p}}{W_{n}} = \\frac{\\mu_{n}}{\\mu_{p}} \\frac{\\beta_{p}}{\\beta_{n}}$$\nThis relationship shows that the required width ratio $\\frac{W_{p}}{W_{n}}$ is the product of the mobility ratio $\\frac{\\mu_{n}}{\\mu_{p}}$ and the desired transconductance ratio $\\frac{\\beta_{p}}{\\beta_{n}}$. Since the electron mobility $\\mu_{n}$ is typically $2$-$3$ times larger than the hole mobility $\\mu_{p}$, the PMOS device must be $2$-$3$ times wider than the NMOS device to achieve $\\beta_{p} = \\beta_{n}$ (a so-called \"symmetric\" inverter if $V_{tn}=|V_{tp}|$, which would yield $V_M = V_{DD}/2$). If the threshold voltages are asymmetric or if a non-midpoint switching threshold $\\alpha \\neq 0.5$ is desired, the required $\\frac{\\beta_{p}}{\\beta_{n}}$ will not be unity, and the geometry ratio $\\frac{W_{p}}{W_{n}}$ must be adjusted accordingly using the derived expression to compensate for both the mobility difference and the threshold asymmetry.",
            "answer": "$$\\boxed{\\left(\\frac{\\alpha V_{DD} - V_{tn}}{(1-\\alpha)V_{DD} - |V_{tp}|}\\right)^2}$$"
        },
        {
            "introduction": "Many ratioed logic styles, such as Complementary Pass-Transistor Logic (CPL), use NMOS transistors to pass signals, which introduces the problem of threshold voltage drops. This practice challenges you to quantify this signal degradation, accounting for the body effect, as a signal propagates through a chain of pass transistors. By calculating the maximum number of stages that can be cascaded before violating noise margin requirements, you will gain a practical understanding of a major limitation that necessitates the use of level-restoring circuits in pass-transistor networks .",
            "id": "4292304",
            "problem": "A cascade of Complementary Pass-Transistor Logic (CPL) stages is considered within the context of Electronic Design Automation (EDA) for integrated circuits. In CPL, logic variables are conveyed through a network of $n$-channel metal-oxide-semiconductor (NMOS) pass transistors, with differential rails and static cross-coupled level restorers typically used to recover full-swing outputs. In this scenario, assume a chain of $m$ CPL stages without immediate level restoration between stages; that is, the output of stage $i$ directly drives the gates of the pass network of stage $i+1$, for $i=0,1,\\dots,m-1$. The supply voltage is $V_{\\mathrm{DD}}$ in Volts, and the NMOS body is tied to ground.\n\nFor an NMOS pass transistor, the equilibrium high-level at its output is limited by the gate voltage minus the threshold voltage, with the threshold subject to body effect. The threshold voltage model is\n$$\nV_{T}(V_{\\mathrm{SB}}) \\;=\\; V_{T0} \\;+\\; \\gamma\\left(\\sqrt{2\\phi_{F} + V_{\\mathrm{SB}}} \\;-\\; \\sqrt{2\\phi_{F}}\\right),\n$$\nwhere $V_{T0}$ is the zero-bias threshold voltage in Volts, $\\gamma$ is the body-effect coefficient in $\\mathrm{V}^{1/2}$, $\\phi_{F}$ is the Fermi potential in Volts, and $V_{\\mathrm{SB}}$ is the source-to-body voltage in Volts. Neglect short-channel effects beyond the body-effect contribution to $V_{T}$ and assume quasi-static operation such that the limiting relation for the $i$-th pass device is\n$$\nV_{i} \\;=\\; V_{i-1} \\;-\\; V_{T}(V_{i}),\n$$\nwith $V_{0} = V_{\\mathrm{DD}}$ and $V_{i}$ denoting the high-level after the $i$-th pass device.\n\nThe next stage to be driven has input high minimum $V_{\\mathrm{IH,min}}$ and input low maximum $V_{\\mathrm{IL,max}}$ (both in Volts), defining the high and low noise margins as\n$$\n\\mathrm{NMH}(m) \\;=\\; V_{m} \\;-\\; V_{\\mathrm{IH,min}}, \\qquad \\mathrm{NML}(m) \\;=\\; V_{\\mathrm{IL,max}} \\;-\\; V_{L}(m),\n$$\nwhere $V_{L}(m)$ is the low-level after $m$ passes and can be assumed to remain at approximately $0$ due to the strong conduction of NMOS for logic low. The interfacing constraint to avoid logic level degradation is that both $\\mathrm{NMH}(m)$ and $\\mathrm{NML}(m)$ must exceed required margins $\\mathrm{NMH}_{\\mathrm{req}}$ and $\\mathrm{NML}_{\\mathrm{req}}$ (in Volts), respectively.\n\nGiven the parameters $V_{\\mathrm{DD}} = 1.2\\,\\mathrm{V}$, $V_{T0} = 0.25\\,\\mathrm{V}$, $\\gamma = 0.45\\,\\mathrm{V}^{1/2}$, $\\phi_{F} = 0.3\\,\\mathrm{V}$ (hence $2\\phi_{F} = 0.6\\,\\mathrm{V}$), $V_{\\mathrm{IH,min}} = 0.6\\,\\mathrm{V}$, $V_{\\mathrm{IL,max}} = 0.4\\,\\mathrm{V}$, $\\mathrm{NMH}_{\\mathrm{req}} = 0.1\\,\\mathrm{V}$, and $\\mathrm{NML}_{\\mathrm{req}} = 0.1\\,\\mathrm{V}$, determine the maximum allowable cascade depth $m$ that satisfies the interfacing constraints without immediate restoration.\n\nExpress the final $m$ as an exact integer without units. No rounding instruction is needed because the answer is an integer.",
            "solution": "The goal is to determine the maximum allowable integer cascade depth, denoted by $m$, for a series of Complementary Pass-Transistor Logic (CPL) stages. The operation must satisfy specified noise margin constraints.\n\nFirst, the given parameters and equations must be cataloged:\nSupply Voltage: $V_{\\mathrm{DD}} = 1.2\\,\\mathrm{V}$\nZero-bias Threshold Voltage: $V_{T0} = 0.25\\,\\mathrm{V}$\nBody-effect Coefficient: $\\gamma = 0.45\\,\\mathrm{V}^{1/2}$\nFermi Potential related term: $2\\phi_{F} = 0.6\\,\\mathrm{V}$\nMinimum Input High Voltage for the next stage: $V_{\\mathrm{IH,min}} = 0.6\\,\\mathrm{V}$\nMaximum Input Low Voltage for the next stage: $V_{\\mathrm{IL,max}} = 0.4\\,\\mathrm{V}$\nRequired High Noise Margin: $\\mathrm{NMH}_{\\mathrm{req}} = 0.1\\,\\mathrm{V}$\nRequired Low Noise Margin: $\\mathrm{NML}_{\\mathrm{req}} = 0.1\\,\\mathrm{V}$\nInitial high-level voltage: $V_0 = V_{\\mathrm{DD}} = 1.2\\,\\mathrm{V}$\nLow-level voltage at any stage: $V_L(m) \\approx 0\\,\\mathrm{V}$\n\nThe threshold voltage of an NMOS transistor is given by the model:\n$$V_{T}(V_{\\mathrm{SB}}) = V_{T0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_{\\mathrm{SB}}} - \\sqrt{2\\phi_{F}}\\right)$$\nwhere $V_{\\mathrm{SB}}$ is the source-to-body voltage. For an NMOS pass transistor passing a high signal, its source terminal is the output node. With the body terminal at ground ($0\\,\\mathrm{V}$), the source-to-body voltage at the output of the $i$-th stage is $V_{\\mathrm{SB}} = V_{i} - 0 = V_i$.\n\nThe output high-level voltage, $V_i$, after the $i$-th stage is given by the recursive relation:\n$$V_{i} = V_{i-1} - V_{T}(V_{i})$$\nThis relation signifies that the pass transistor stops conducting when its gate-to-source voltage equals its threshold voltage, i.e., $V_{GS} = V_{i-1} - V_i = V_T(V_i)$.\n\nThe noise margin constraints are:\n1. High Noise Margin (NMH): $\\mathrm{NMH}(m) = V_{m} - V_{\\mathrm{IH,min}} \\ge \\mathrm{NMH}_{\\mathrm{req}}$\n2. Low Noise Margin (NML): $\\mathrm{NML}(m) = V_{\\mathrm{IL,max}} - V_{L}(m) \\ge \\mathrm{NML}_{\\mathrm{req}}$\n\nLet's analyze the Low Noise Margin constraint first. Substituting the given values:\n$$\\mathrm{NML}(m) = 0.4\\,\\mathrm{V} - 0\\,\\mathrm{V} = 0.4\\,\\mathrm{V}$$\nThe constraint is $0.4\\,\\mathrm{V} \\ge \\mathrm{NML}_{\\mathrm{req}} = 0.1\\,\\mathrm{V}$. This inequality is always satisfied, regardless of the cascade depth $m$. Therefore, the limiting factor is the High Noise Margin.\n\nNow, let's analyze the High Noise Margin constraint. Substituting the given values:\n$$V_{m} - 0.6\\,\\mathrm{V} \\ge 0.1\\,\\mathrm{V}$$\nThis simplifies to a minimum required voltage at the output of the $m$-th stage:\n$$V_{m} \\ge 0.7\\,\\mathrm{V}$$\n\nWe must now find the maximum integer $m$ for which $V_m \\ge 0.7\\,\\mathrm{V}$. We will do this by iteratively calculating $V_i$ for $i=1, 2, \\dots$ and stopping when the voltage drops below $0.7\\,\\mathrm{V}$.\n\nThe recursive relation for $V_i$ is:\n$$V_{i} = V_{i-1} - \\left[ V_{T0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_{i}} - \\sqrt{2\\phi_{F}}\\right) \\right]$$\nSubstituting the parameter values:\n$$V_{i} = V_{i-1} - \\left[ 0.25 + 0.45\\left(\\sqrt{0.6 + V_{i}} - \\sqrt{0.6}\\right) \\right]$$\nTo solve this non-linear equation for $V_i$, we can transform it into a quadratic equation for the variable $x_i = \\sqrt{0.6 + V_i}$, which implies $V_i = x_i^2 - 0.6$. Substituting this into the relation gives:\n$$(x_i^2 - 0.6) = V_{i-1} - \\left[ 0.25 + 0.45\\left(x_i - \\sqrt{0.6}\\right) \\right]$$\nRearranging into the standard quadratic form $ax^2+bx+c=0$:\n$$x_i^2 + 0.45x_i - (V_{i-1} - 0.25 + 0.6 + 0.45\\sqrt{0.6}) = 0$$\n$$x_i^2 + 0.45x_i - (V_{i-1} + 0.35 + 0.45\\sqrt{0.6}) = 0$$\nUsing the value $0.45\\sqrt{0.6} \\approx 0.34857$, the equation becomes:\n$$x_i^2 + 0.45x_i - (V_{i-1} + 0.69857) = 0$$\n\nLet's calculate for $m=1$:\n$V_0 = 1.2\\,\\mathrm{V}$.\nThe equation for $x_1$ is:\n$$x_1^2 + 0.45x_1 - (1.2 + 0.69857) = 0 \\implies x_1^2 + 0.45x_1 - 1.89857 = 0$$\nUsing the quadratic formula $x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$:\n$$x_1 = \\frac{-0.45 \\pm \\sqrt{0.45^2 - 4(1)(-1.89857)}}{2} = \\frac{-0.45 \\pm \\sqrt{0.2025 + 7.59428}}{2}$$\n$$x_1 = \\frac{-0.45 \\pm \\sqrt{7.79678}}{2} = \\frac{-0.45 \\pm 2.79227}{2}$$\nSince $x_1 = \\sqrt{0.6 + V_1}$ must be positive, we take the positive root:\n$$x_1 = \\frac{2.34227}{2} = 1.171135$$\nNow we find $V_1$:\n$$V_1 = x_1^2 - 0.6 = (1.171135)^2 - 0.6 = 1.371557 - 0.6 = 0.771557\\,\\mathrm{V}$$\nWe check the condition: $V_1 \\ge 0.7\\,\\mathrm{V}$.\n$0.771557\\,\\mathrm{V} \\ge 0.7\\,\\mathrm{V}$, which is true. So, a cascade of depth $m=1$ is permissible.\n\nLet's calculate for $m=2$:\n$V_1 = 0.771557\\,\\mathrm{V}$.\nThe equation for $x_2$ is:\n$$x_2^2 + 0.45x_2 - (0.771557 + 0.69857) = 0 \\implies x_2^2 + 0.45x_2 - 1.470127 = 0$$\nUsing the quadratic formula:\n$$x_2 = \\frac{-0.45 \\pm \\sqrt{0.45^2 - 4(1)(-1.470127)}}{2} = \\frac{-0.45 \\pm \\sqrt{0.2025 + 5.880508}}{2}$$\n$$x_2 = \\frac{-0.45 \\pm \\sqrt{6.083008}}{2} = \\frac{-0.45 \\pm 2.466375}{2}$$\nTaking the positive root:\n$$x_2 = \\frac{2.016375}{2} = 1.0081875$$\nNow we find $V_2$:\n$$V_2 = x_2^2 - 0.6 = (1.0081875)^2 - 0.6 = 1.016442 - 0.6 = 0.416442\\,\\mathrm{V}$$\nWe check the condition: $V_2 \\ge 0.7\\,\\mathrm{V}$.\n$0.416442\\,\\mathrm{V} \\ge 0.7\\,\\mathrm{V}$, which is false.\n\nThe voltage at the output of the second stage ($V_2$) is below the minimum required voltage of $0.7\\,\\mathrm{V}$. Therefore, a cascade of depth $m=2$ is not permissible. The maximum allowable cascade depth is the largest integer $m$ for which the condition holds. Since the condition holds for $m=1$ and fails for $m=2$, the maximum depth is $1$.",
            "answer": "$$\\boxed{1}$$"
        },
        {
            "introduction": "Ensuring circuit reliability in the face of process, voltage, and temperature (PVT) variations is a paramount concern in modern VLSI design. This final practice integrates the concepts of signal degradation and logic restoration by analyzing the critical interface between a CPL stage and a CMOS inverter under worst-case conditions. You will derive the maximum tolerable variation in a pass-transistor's threshold voltage while still guaranteeing a safe noise margin, providing deep insight into the methods for designing robust, manufacturable circuits .",
            "id": "4292258",
            "problem": "A Complementary Pass-Transistor Logic (CPL) network, implemented in Complementary Metal–Oxide–Semiconductor (CMOS), drives a single-ended input of a rail-to-rail restoring inverter. In CPL, logic transfer through an n-channel Metal–Oxide–Semiconductor (NMOS) pass-transistor is ratioed, with the high-level at the receiving node approximated by $V_{H} \\approx V_{\\mathrm{in}} - V_{t}$, where $V_{t}$ is the pass-transistor threshold voltage. Consider Process–Voltage–Temperature (PVT) variation that perturbs the pass-transistor threshold and the inverter device parameters. Assume the following:\n\n- The CPL pass NMOS experiences a worst-case threshold increase of $\\Delta V_{t,\\mathrm{pass}}$ relative to its nominal $V_{tn0}$, so the worst-case CPL high-level is modeled as $V_{H,\\min} = V_{DD}^{-} - (V_{tn0} + \\Delta V_{t,\\mathrm{pass}})$, with $V_{DD}^{-} = V_{DD} - \\Delta V_{DD}$ the worst-case supply.\n- The inverter is symmetric CMOS, with long-channel square-law behavior in saturation and negligible channel-length modulation. Let $\\beta_{n}$ and $\\beta_{p}$ be the nominal transconductance parameters for the NMOS and PMOS, respectively. PVT scales them by multiplicative factors $r_{n}$ and $r_{p}$ (mobility and geometry corners), so the effective parameters are $\\beta_{n}^{\\mathrm{eff}} = r_{n}\\beta_{n}$ and $\\beta_{p}^{\\mathrm{eff}} = r_{p}\\beta_{p}$.\n- The inverter NMOS threshold increases by $\\Delta V_{tn}$ relative to its nominal $V_{tn0}$ and the magnitude of the inverter PMOS threshold decreases by $\\Delta V_{tp}$ relative to its nominal $|V_{tp0}|$, so the worst-case inverter thresholds are $V_{tn}^{+} = V_{tn0} + \\Delta V_{tn}$ and $|V_{tp}|^{-} = |V_{tp0}| - \\Delta V_{tp}$.\n- The inverter switching threshold $V_{M}$ is defined by equal-magnitude currents in the two transistors under the long-channel saturation model, and must be exceeded by the CPL node high-level for robust logic interpretation.\n\nDefine the required minimum input high noise margin at the inverter input as $M$, i.e., $N_{MH} = V_{H} - V_{M} \\ge M$ across all PVT corners. Starting from the square-law current equations for MOSFET saturation and the definition of $V_{M}$ at the inverter transfer characteristic midpoint, derive a closed-form analytical expression for the maximum allowable pass-transistor threshold increase $\\Delta V_{t,\\mathrm{pass}}^{\\max}$ that guarantees $N_{MH} \\ge M$ under the worst-case PVT corner specified above. Express your final result in terms of $V_{DD}$, $\\Delta V_{DD}$, $V_{tn0}$, $|V_{tp0}|$, $\\Delta V_{tn}$, $\\Delta V_{tp}$, $\\beta_{n}$, $\\beta_{p}$, $r_{n}$, $r_{p}$, and $M$. Provide your answer as a single closed-form symbolic expression. No numerical evaluation is required.",
            "solution": "The core requirement of the problem is to maintain a minimum high noise margin, $N_{MH}$, under a specified worst-case Process-Voltage-Temperature (PVT) corner. The condition is given as:\n$$ N_{MH} = V_H - V_M \\ge M $$\nWe are looking for the maximum permissible value of the pass-transistor threshold increase, $\\Delta V_{t,\\mathrm{pass}}^{\\max}$, which corresponds to the case where the noise margin is exactly at its minimum required value, $M$. This analysis must be performed at the specified worst-case corner. The condition becomes:\n$$ V_{H,\\min} - V_{M,\\text{corner}} = M $$\nwhere $V_{H,\\min}$ is the worst-case CPL high level and $V_{M,\\text{corner}}$ is the inverter switching threshold at the given PVT corner.\n\nFirst, we establish the expression for the inverter switching threshold, $V_M$. It is defined as the input voltage where the NMOS and PMOS drain currents are equal. Both transistors are assumed to be in the saturation region. The square-law saturation current for an NMOS transistor is $I_{DS,n} = \\frac{1}{2}\\beta_n(V_{GS,n}-V_{tn})^2$, and for a PMOS is $I_{SD,p} = \\frac{1}{2}\\beta_p(V_{SG,p}-|V_{tp}|)^2$.\n\nAt the specified PVT corner, the parameters are:\n- Supply voltage: $V_{DD}^{-} = V_{DD} - \\Delta V_{DD}$\n- NMOS transconductance: $\\beta_{n}^{\\mathrm{eff}} = r_{n}\\beta_{n}$\n- PMOS transconductance: $\\beta_{p}^{\\mathrm{eff}} = r_{p}\\beta_{p}$\n- NMOS threshold voltage: $V_{tn}^{+} = V_{tn0} + \\Delta V_{tn}$\n- PMOS threshold voltage magnitude: $|V_{tp}|^{-} = |V_{tp0}| - \\Delta V_{tp}$\n\nAt the switching threshold, $V_{in} = V_{out} = V_M$. The transistor gate-source voltages are $V_{GS,n} = V_{M}$ and $V_{SG,p} = V_{DD}^{-} - V_{M}$. Equating the currents $I_{DS,n} = I_{SD,p}$:\n$$ \\frac{1}{2}\\beta_{n}^{\\mathrm{eff}}(V_{GS,n} - V_{tn}^{+})^2 = \\frac{1}{2}\\beta_{p}^{\\mathrm{eff}}(V_{SG,p} - |V_{tp}|^{-})^2 $$\n$$ \\frac{1}{2}r_n\\beta_n(V_M - V_{tn}^{+})^2 = \\frac{1}{2}r_p\\beta_p(V_{DD}^{-} - V_M - |V_{tp}|^{-})^2 $$\nTaking the square root of both sides (and assuming physically meaningful voltages, i.e., $V_M  V_{tn}^{+}$ and $V_{DD}^{-} - V_M  |V_{tp}|^{-}$):\n$$ \\sqrt{r_n\\beta_n}(V_M - V_{tn}^{+}) = \\sqrt{r_p\\beta_p}(V_{DD}^{-} - V_M - |V_{tp}|^{-}) $$\nWe solve for $V_M$:\n$$ V_M(\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}) = V_{tn}^{+}\\sqrt{r_n\\beta_n} + (V_{DD}^{-} - |V_{tp}|^{-})\\sqrt{r_p\\beta_p} $$\n$$ V_{M,\\text{corner}} = \\frac{V_{tn}^{+}\\sqrt{r_n\\beta_n} + (V_{DD}^{-} - |V_{tp}|^{-})\\sqrt{r_p\\beta_p}}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} $$\nThis is the expression for the inverter switching threshold under the specified worst-case conditions.\n\nNow, we use the noise margin condition at its limit:\n$$ V_{H,\\min} - V_{M,\\text{corner}} = M $$\nThe worst-case high level from the CPL pass-transistor is given as:\n$$ V_{H,\\min} = V_{DD}^{-} - (V_{tn0} + \\Delta V_{t,\\mathrm{pass}}^{\\max}) $$\nSubstituting this into the margin equation gives:\n$$ \\left(V_{DD}^{-} - (V_{tn0} + \\Delta V_{t,\\mathrm{pass}}^{\\max})\\right) - V_{M,\\text{corner}} = M $$\nWe can now solve for $\\Delta V_{t,\\mathrm{pass}}^{\\max}$:\n$$ \\Delta V_{t,\\mathrm{pass}}^{\\max} = V_{DD}^{-} - V_{tn0} - V_{M,\\text{corner}} - M $$\nNow, we substitute the expression for $V_{M,\\text{corner}}$:\n$$ \\Delta V_{t,\\mathrm{pass}}^{\\max} = (V_{DD} - \\Delta V_{DD}) - V_{tn0} - M - \\frac{V_{tn}^{+}\\sqrt{r_n\\beta_n} + (V_{DD}^{-} - |V_{tp}|^{-})\\sqrt{r_p\\beta_p}}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} $$\nTo simplify this expression, we can combine the terms:\n$$ \\Delta V_{t,\\mathrm{pass}}^{\\max} = \\frac{V_{DD}^{-}(\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}) - [V_{tn}^{+}\\sqrt{r_n\\beta_n} + (V_{DD}^{-} - |V_{tp}|^{-})\\sqrt{r_p\\beta_p}]}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} - V_{tn0} - M $$\n$$ \\Delta V_{t,\\mathrm{pass}}^{\\max} = \\frac{V_{DD}^{-}\\sqrt{r_n\\beta_n} + V_{DD}^{-}\\sqrt{r_p\\beta_p} - V_{tn}^{+}\\sqrt{r_n\\beta_n} - V_{DD}^{-}\\sqrt{r_p\\beta_p} + |V_{tp}|^{-}\\sqrt{r_p\\beta_p}}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} - V_{tn0} - M $$\n$$ \\Delta V_{t,\\mathrm{pass}}^{\\max} = \\frac{(V_{DD}^{-} - V_{tn}^{+})\\sqrt{r_n\\beta_n} + |V_{tp}|^{-}\\sqrt{r_p\\beta_p}}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} - V_{tn0} - M $$\nFinally, we substitute the full expressions for the PVT-varied parameters ($V_{DD}^{-}$, $V_{tn}^{+}$, $|V_{tp}|^{-}$):\n$$ \\Delta V_{t,\\mathrm{pass}}^{\\max} = \\frac{((V_{DD} - \\Delta V_{DD}) - (V_{tn0} + \\Delta V_{tn}))\\sqrt{r_n\\beta_n} + (|V_{tp0}| - \\Delta V_{tp})\\sqrt{r_p\\beta_p}}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} - V_{tn0} - M $$\nThis is the final, closed-form analytical expression for the maximum allowable pass-transistor threshold increase.",
            "answer": "$$ \\boxed{\\frac{\\left((V_{DD} - \\Delta V_{DD}) - (V_{tn0} + \\Delta V_{tn})\\right)\\sqrt{r_n\\beta_n} + (|V_{tp0}| - \\Delta V_{tp})\\sqrt{r_p\\beta_p}}{\\sqrt{r_n\\beta_n} + \\sqrt{r_p\\beta_p}} - V_{tn0} - M} $$"
        }
    ]
}
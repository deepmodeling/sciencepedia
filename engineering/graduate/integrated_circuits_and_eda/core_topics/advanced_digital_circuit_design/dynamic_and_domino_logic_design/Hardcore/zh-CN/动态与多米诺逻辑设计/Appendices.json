{
    "hands_on_practices": [
        {
            "introduction": "除了简单的时序分析，稳健的逻辑设计还必须考虑非理想效应。本实践探讨了电荷分享问题，这是动态逻辑中的一个关键问题，其中寄生电容可能导致逻辑错误。应用电荷守恒原理，你将确定必要的设计约束，以保证逻辑门的功能正确性。",
            "id": "4267266",
            "problem": "在电子设计自动化（EDA）时序签核中使用的一个多米诺逻辑级，包含一个预充电网络和一个n沟道金属氧化物半导体（nMOS）求值堆栈。预充电网络将一个动态存储节点的电压拉升至电源电压，而求值堆栈中的内部扩散节点初始状态下是放电的。在求值期间的最坏情况激活模式下，动态节点仅连接到一组内部浮空节点（没有形成到地的直接通路），从而产生电荷共享，降低了动态节点的电压。动态节点驱动一个静态反相器，该反相器的开关阈值是将该反相器的逻辑低与逻辑高分开的中点电压。\n\n假设以下物理图像和理想化条件，这些都基于电荷守恒和电容器的本构关系：在预充电期间，电容为 $C_{\\mathrm{dyn}}$ 的动态节点被充电至 $V_{DD}$，而一组总集总电容为 $\\sum C_{s}$ 的内部节点处于 $0$V。在初始求值阶段，一条理想的导电通路将动态节点与所有这些内部节点连接起来，但不提供到地或任何电源的直接通路，因此连接后的网络是电气浮空的，总电荷守恒。忽略漏电流、短路电流、沟道电荷和米勒耦合，并假设任何维持器（keeper）器件均被禁用，不提供任何电荷。\n\n给定以下数值参数：\n- 电源电压：$V_{DD} = 0.90\\,\\text{V}$。\n- 反相器开关阈值：$V_{M} = 0.43\\,\\text{V}$。\n- 最坏情况下的总电荷共享电容：$\\sum C_{s} = 17.2\\,\\text{fF}$。\n\n仅从电荷守恒和电容定律 $Q = C V$ 出发，推导在所述最坏情况下，保证动态节点上电荷共享后的电压不低于反相器开关阈值 $V_{M}$ 的最小动态电容 $C_{\\mathrm{dyn}}$。然后计算其数值。\n\n最终答案以飞法（femtofarad）为单位，并四舍五入到三位有效数字。",
            "solution": "首先对问题进行验证，以确保其具有科学依据、良定且客观。\n\n### 步骤1：提取已知条件\n- **系统描述：** 一个多米诺逻辑级，包含一个动态节点（电容为 $C_{\\mathrm{dyn}}$）和一个含有内部扩散节点（总集总电容为 $\\sum C_s$）的nMOS求值堆栈。\n- **过程：**\n    1.  **预充电：** 动态节点被充电至 $V_{DD}$。内部节点电压为 $0\\,\\text{V}$。\n    2.  **求值（最坏情况）：** 动态节点连接到内部浮空节点，形成一个电气隔离的网络。没有形成到地的通路。\n- **现象：** 在 $C_{\\mathrm{dyn}}$ 和 $\\sum C_s$ 之间发生电荷共享，导致动态节点上的电压降低。\n- **约束条件：** 动态节点上电荷共享后的电压不得低于后续静态反相器的开关阈值 $V_M$。\n- **理想化假设：**\n    - 节点之间的连接是理想的导电通路。\n    - 在隔离的电容器网络中总电荷守恒。\n    - 漏电流、短路电流、沟道电荷和米勒耦合被忽略。\n    - 任何维持器（keeper）器件均被禁用。\n- **基本原理：** 电容定律，$Q = C V$。\n- **数值参数：**\n    - 电源电压：$V_{DD} = 0.90\\,\\text{V}$。\n    - 反相器开关阈值：$V_{M} = 0.43\\,\\text{V}$。\n    - 最坏情况下的总电荷共享电容：$\\sum C_{s} = 17.2\\,\\text{fF}$。\n- **目标：** 推导满足电压约束条件的最小动态电容 $C_{\\mathrm{dyn}}$，然后计算其数值。\n\n### 步骤2：使用提取的已知条件进行验证\n- **科学依据：** 该问题描述了多米诺逻辑中的电荷共享，这是数字VLSI设计中一个基本且关键的概念。分析基于电荷守恒原理和电容器的本构关系（$Q=CV$），这两者都是物理学和电气工程的基础。所述的理想化假设是对此现象进行一阶分析的标准做法。该问题是科学合理的。\n- **良定性：** 问题提供了一个清晰的初始状态、一个明确定义的物理过程（孤立系统中的电荷重新分布）以及一个特定的最终约束。它要求求出满足此约束的参数（$C_{\\mathrm{dyn}}$）的最小值。这种结构允许推导出唯一的数学关系和单一、有意义的解。\n- **客观性与完整性：** 问题以精确、客观的技术术语陈述。所有必要的变量（$V_{DD}$、$V_M$、$\\sum C_s$）和物理定律都已提供。问题是自洽的，没有歧义或矛盾。\n\n### 步骤3：结论与行动\n问题是有效的，因为它科学合理、良定且完整。将基于电荷守恒原理推导求解。\n\n### 解题推导\n解决这个问题的核心原理是在求值阶段，由动态节点电容 $C_{\\mathrm{dyn}}$ 和内部节点电容 $\\sum C_s$ 构成的孤立系统中的电荷守恒。\n\n1.  **初始状态（预充电后，求值前）：**\n    - 电容为 $C_{\\mathrm{dyn}}$ 的动态节点被充电至电源电压 $V_{DD}$。存储在该电容器上的电荷为 $Q_{\\mathrm{dyn, initial}} = C_{\\mathrm{dyn}} V_{DD}$。\n    - 总电容为 $\\sum C_s$ 的内部节点处于地电位，$0\\,\\text{V}$。存储在这些电容上的电荷为 $Q_{s, \\mathrm{initial}} = (\\sum C_s) \\cdot 0 = 0$。\n    - 待连接系统中的总初始电荷 $Q_{\\mathrm{total, initial}}$ 是这些电荷之和：\n    $$Q_{\\mathrm{total, initial}} = Q_{\\mathrm{dyn, initial}} + Q_{s, \\mathrm{initial}} = C_{\\mathrm{dyn}} V_{DD}$$\n\n2.  **最终状态（电荷共享后）：**\n    - 在求值期间，求值网络将动态节点连接到内部节点。这些电容此时并联，形成一个单一的电气节点。\n    - 这个组合节点的总电容为 $C_{\\mathrm{total}} = C_{\\mathrm{dyn}} + \\sum C_s$。\n    - 电荷重新分布后，整个节点稳定到一个最终的共同电压，我们记为 $V_f$。\n    - 在此最终状态下，系统中存储的总电荷为：\n    $$Q_{\\mathrm{total, final}} = C_{\\mathrm{total}} V_f = (C_{\\mathrm{dyn}} + \\sum C_s) V_f$$\n\n3.  **应用电荷守恒：**\n    - 由于网络是电气浮空的（没有到 $V_{DD}$ 或地的通路），总电荷必须守恒：$Q_{\\mathrm{total, initial}} = Q_{\\mathrm{total, final}}$。\n    $$C_{\\mathrm{dyn}} V_{DD} = (C_{\\mathrm{dyn}} + \\sum C_s) V_f$$\n    - 我们可以解出最终电压 $V_f$ 作为电容和初始电压的函数：\n    $$V_f = V_{DD} \\frac{C_{\\mathrm{dyn}}}{C_{\\mathrm{dyn}} + \\sum C_s}$$\n\n4.  **施加设计约束：**\n    - 为了让后续的反相器能正确地将动态节点的状态解释为逻辑“高”，其电压必须保持在反相器的开关阈值 $V_M$ 之上。\n    - 因此，约束条件是 $V_f \\ge V_M$。\n    - 为了找到所需的最小电容 $C_{\\mathrm{dyn}}$，我们考虑边界条件，即最终电压恰好等于开关阈值：$V_f = V_M$。任何更小的 $C_{\\mathrm{dyn}}$ 都会导致 $V_f  V_M$，从而引起逻辑错误。\n    $$V_M = V_{DD} \\frac{C_{\\mathrm{dyn}}}{C_{\\mathrm{dyn}} + \\sum C_s}$$\n\n5.  **推导最小电容：**\n    - 现在我们求解该方程以得到 $C_{\\mathrm{dyn}}$。\n    $$V_M (C_{\\mathrm{dyn}} + \\sum C_s) = V_{DD} C_{\\mathrm{dyn}}$$\n    $$V_M C_{\\mathrm{dyn}} + V_M \\sum C_s = V_{DD} C_{\\mathrm{dyn}}$$\n    $$V_M \\sum C_s = V_{DD} C_{\\mathrm{dyn}} - V_M C_{\\mathrm{dyn}}$$\n    $$V_M \\sum C_s = C_{\\mathrm{dyn}} (V_{DD} - V_M)$$\n    - 分离出 $C_{\\mathrm{dyn}}$，得到所需最小动态节点电容的表达式：\n    $$C_{\\mathrm{dyn, min}} = \\frac{V_M \\sum C_s}{V_{DD} - V_M}$$\n\n6.  **数值计算：**\n    - 将给定的数值代入推导出的表达式中：\n      - $V_{DD} = 0.90\\,\\text{V}$\n      - $V_{M} = 0.43\\,\\text{V}$\n      - $\\sum C_s = 17.2\\,\\text{fF}$\n    $$C_{\\mathrm{dyn, min}} = \\frac{(0.43) \\cdot (17.2)}{0.90 - 0.43} \\text{ fF}$$\n    $$C_{\\mathrm{dyn, min}} = \\frac{7.396}{0.47} \\text{ fF}$$\n    $$C_{\\mathrm{dyn, min}} \\approx 15.7361702... \\text{ fF}$$\n\n7.  **最终答案格式化：**\n    - 题目要求最终答案以飞法（femtofarad）为单位，并四舍五入到三位有效数字。\n    $$C_{\\mathrm{dyn, min}} \\approx 15.7 \\text{ fF}$$",
            "answer": "$$\\boxed{15.7}$$"
        },
        {
            "introduction": "一个完整的设计分析需要在速度、正确性和功耗之间取得平衡。最后一个练习侧重于量化动态功耗，这是动态逻辑中能量消耗的主要来源。你将通过计算每次开关事件所需的能量及其发生的概率来推导平均功耗，从而将电路操作与整体功率预算联系起来。",
            "id": "4267254",
            "problem": "单级多米诺动态逻辑门由一个预充电晶体管和一个求值网络组成。在预充电阶段，预充电晶体管将动态输出节点强制拉至电源电压；在求值阶段，求值网络可能将该节点放电至地。在互补金属氧化物半导体（CMOS）动态逻辑中，动态节点上累积了一个集总电容，该电容是器件扩散区电容、被驱动的门输入电容、互连线电容以及诸如维持器等辅助器件电容的总和。考虑一个逻辑门，其动态节点电容由以下几部分组成：固有器件电容 $C_{\\mathrm{int}}=3.2\\,\\mathrm{fF}$，三个相同的被驱动输入（每个贡献 $2.6\\,\\mathrm{fF}$，总计 $7.8\\,\\mathrm{fF}$），互连线电容 $C_{\\mathrm{wire}}=1.0\\,\\mathrm{fF}$，以及维持器输出节点电容 $C_{\\mathrm{keep}}=0.75\\,\\mathrm{fF}$。电源电压为 $V_{\\mathrm{DD}}=0.85\\,\\mathrm{V}$。在每个时钟周期内，求值阶段将动态节点放电的概率为 $p=0.27$，时钟频率为 $f=1.2\\times 10^{9}\\,\\mathrm{Hz}$。假设在能量计算中使用理想开关器件，忽略短路电流和漏电流，并假设当节点已经处于 $V_{\\mathrm{DD}}$ 电压时，预充电器件不消耗动态能量。\n\n仅从电容器本构关系 $q=Cv$、电流的定义 $i=\\mathrm{d}q/\\mathrm{d}t$ 以及电源所做的功 $W=\\int v_{\\mathrm{s}}(t)\\,i_{\\mathrm{s}}(t)\\,\\mathrm{d}t$ 出发，推导在一个时钟周期内，发生一次求值放电事件并随之进行恢复性预充电的条件下，从电源获取的能量。该能量应表示为动态节点总电容和 $V_{\\mathrm{DD}}$ 的函数。利用此结果，表示当求值放电以概率 $p$ 发生时每个周期的平均能量，然后表示在频率 $f$ 下的平均功率。\n\n计算以下各项的数值：\n- 每次放电-恢复事件的能量，以 $\\mathrm{fJ}$ 为单位，\n- 平均动态功率，以 $\\mu\\mathrm{W}$ 为单位，\n\n使用上面给出的参数。将最终数值结果四舍五入至四位有效数字。",
            "solution": "首先根据所需标准对问题陈述进行验证。\n\n**步骤 1：提取给定条件**\n- 固有器件电容：$C_{\\mathrm{int}}=3.2\\,\\mathrm{fF}$\n- 被驱动输入数量：$3$\n- 每个被驱动输入的电容：$2.6\\,\\mathrm{fF}$\n- 互连线电容：$C_{\\mathrm{wire}}=1.0\\,\\mathrm{fF}$\n- 维持器输出节点电容：$C_{\\mathrm{keep}}=0.75\\,\\mathrm{fF}$\n- 电源电压：$V_{\\mathrm{DD}}=0.85\\,\\mathrm{V}$\n- 求值放电概率：$p=0.27$\n- 时钟频率：$f=1.2\\times 10^{9}\\,\\mathrm{Hz}$\n- 本构关系和定义：$q=Cv$, $i=\\mathrm{d}q/\\mathrm{d}t$, $W=\\int v_{\\mathrm{s}}(t)\\,i_{\\mathrm{s}}(t)\\,\\mathrm{d}t$\n- 假设：理想开关，无短路或漏电流，若节点已处于 $V_{\\mathrm{DD}}$，预充电不消耗动态能量。\n\n**步骤 2：使用提取的给定条件进行验证**\n- **科学依据充分**：该问题基于CMOS动态逻辑的基本原理，特别是动态功耗的计算。电容、电压、电流、能量和开关概率等概念在电气工程和集成电路设计中都是标准概念。所提供的值对于现代技术节点是符合实际的。\n- **问题定义良好**：该问题是自包含的，提供了推导所需表达式和计算数值所需的所有数据和假设。目标明确，并能得出唯一解。\n- **客观性**：问题以精确的技术语言陈述，没有歧义或主观论断。\n\n**结论与行动**\n该问题有效，因为它科学合理、定义良好且客观。将提供解答。\n\n**能量和功率的推导**\n\n第一个任务是推导单次事件从电源 $V_{\\mathrm{DD}}$ 获取的能量，该事件包括一次到地的放电，然后是一次预充电回到 $V_{\\mathrm{DD}}$。设动态节点上的总集总电容为 $C$。能量是在预充电阶段从电源获取的。\n\n由电压源 $v_{\\mathrm{s}}(t)=V_{\\mathrm{DD}}$ 提供的能量 $E_{\\mathrm{supply}}$ 由其瞬时功率 $v_{\\mathrm{s}}(t)i_{\\mathrm{s}}(t)$ 的积分给出：\n$$E_{\\mathrm{supply}} = \\int_{t_{\\mathrm{precharge}}} v_{\\mathrm{s}}(t) i_{\\mathrm{s}}(t) \\,\\mathrm{d}t$$\n在预充电阶段，源是电源轨，所以 $v_{\\mathrm{s}}(t) = V_{\\mathrm{DD}}$。来自电源的电流 $i_{\\mathrm{s}}(t)$ 与为电容器充电的电流 $i_C(t)$ 相同。\n$$E_{\\mathrm{supply}} = \\int V_{\\mathrm{DD}} \\, i_C(t) \\,\\mathrm{d}t$$\n流入电容器的电流与其存储电荷 $q(t)$ 的变化有关。使用定义 $i = \\mathrm{d}q/\\mathrm{d}t$：\n$$i_C(t) = \\frac{\\mathrm{d}q(t)}{\\mathrm{d}t}$$\n电荷通过本构关系 $q(t) = C v_C(t)$ 与电容器电压 $v_C(t)$ 相关。因此：\n$$i_C(t) = \\frac{\\mathrm{d}}{\\mathrm{d}t}(C v_C(t)) = C \\frac{\\mathrm{d}v_C(t)}{\\mathrm{d}t}$$\n将此代入能量积分：\n$$E_{\\mathrm{supply}} = \\int V_{\\mathrm{DD}} \\left(C \\frac{\\mathrm{d}v_C}{\\mathrm{d}t}\\right) \\,\\mathrm{d}t$$\n由于 $V_{\\mathrm{DD}}$ 和 $C$ 是常数，它们可以移到积分号外。我们将积分变量从 $t$ 变为 $v_C$。预充电过程将电容器电压从完全放电后的初始状态 $v_C(t_{\\mathrm{start}})=0$ 变为最终状态 $v_C(t_{\\mathrm{end}})=V_{\\mathrm{DD}}$。\n$$E_{\\mathrm{supply}} = V_{\\mathrm{DD}} C \\int_{0}^{V_{\\mathrm{DD}}} \\mathrm{d}v_C$$\n$$E_{\\mathrm{supply}} = V_{\\mathrm{DD}} C [v_C]_{0}^{V_{\\mathrm{DD}}} = V_{\\mathrm{DD}} C (V_{\\mathrm{DD}} - 0) = C V_{\\mathrm{DD}}^2$$\n这是从电源获取的，用于将电容器从 $0\\,\\mathrm{V}$ 充电至 $V_{\\mathrm{DD}}$ 的总能量。这是一次放电-恢复事件的能量，我们称之为 $E_{\\mathrm{event}}$。\n$$E_{\\mathrm{event}} = C V_{\\mathrm{DD}}^2$$\n这个事件，即一次放电后跟一次预充电，发生的概率为 $p$。以 $1-p$ 的概率，节点不放电并保持在 $V_{\\mathrm{DD}}$。根据问题陈述，在这种情况下不消耗动态能量。每个时钟周期的平均能量 $E_{\\mathrm{avg}}$ 是所消耗能量的期望值：\n$$E_{\\mathrm{avg}} = p \\cdot E_{\\mathrm{event}} + (1-p) \\cdot 0 = p C V_{\\mathrm{DD}}^2$$\n平均功率 $P_{\\mathrm{avg}}$ 是每个周期的平均能量乘以时钟频率 $f$：\n$$P_{\\mathrm{avg}} = E_{\\mathrm{avg}} \\cdot f = p f C V_{\\mathrm{DD}}^2$$\n\n**数值计算**\n\n首先，我们计算动态节点的总电容 $C$。\n总电容是所有组成部分的总和：\n$$C = C_{\\mathrm{int}} + 3 \\times C_{\\mathrm{driven\\_input}} + C_{\\mathrm{wire}} + C_{\\mathrm{keep}}$$\n$$C = 3.2\\,\\mathrm{fF} + 3 \\times (2.6\\,\\mathrm{fF}) + 1.0\\,\\mathrm{fF} + 0.75\\,\\mathrm{fF}$$\n$$C = 3.2\\,\\mathrm{fF} + 7.8\\,\\mathrm{fF} + 1.0\\,\\mathrm{fF} + 0.75\\,\\mathrm{fF} = 12.75\\,\\mathrm{fF}$$\n所以，$C = 12.75 \\times 10^{-15}\\,\\mathrm{F}$。\n\n接下来，我们计算每次放电-恢复事件的能量 $E_{\\mathrm{event}}$，单位为飞焦耳（$\\mathrm{fJ}$）。\n$$E_{\\mathrm{event}} = C V_{\\mathrm{DD}}^2 = (12.75 \\times 10^{-15}\\,\\mathrm{F}) \\times (0.85\\,\\mathrm{V})^2$$\n$$E_{\\mathrm{event}} = (12.75 \\times 10^{-15}) \\times 0.7225 \\,\\mathrm{J} = 9.211875 \\times 10^{-15}\\,\\mathrm{J}$$\n因为 $1\\,\\mathrm{fJ} = 10^{-15}\\,\\mathrm{J}$：\n$$E_{\\mathrm{event}} = 9.211875\\,\\mathrm{fJ}$$\n四舍五入到四位有效数字，我们得到：\n$$E_{\\mathrm{event}} \\approx 9.212\\,\\mathrm{fJ}$$\n\n最后，我们计算平均动态功率 $P_{\\mathrm{avg}}$，单位为微瓦（$\\mu\\mathrm{W}$）。\n$$P_{\\mathrm{avg}} = p f C V_{\\mathrm{DD}}^2 = p f E_{\\mathrm{event}}$$\n为确保准确性，使用未四舍五入的 $E_{\\mathrm{event}}$ 值：\n$$P_{\\mathrm{avg}} = (0.27) \\times (1.2 \\times 10^9\\,\\mathrm{Hz}) \\times (9.211875 \\times 10^{-15}\\,\\mathrm{J})$$\n$$P_{\\mathrm{avg}} = (0.324 \\times 10^9) \\times (9.211875 \\times 10^{-15})\\,\\mathrm{W}$$\n$$P_{\\mathrm{avg}} = 2.98460... \\times 10^{-6}\\,\\mathrm{W}$$\n因为 $1\\,\\mu\\mathrm{W} = 10^{-6}\\,\\mathrm{W}$：\n$$P_{\\mathrm{avg}} = 2.98460...\\,\\mu\\mathrm{W}$$\n四舍五入到四位有效数字，我们得到：\n$$P_{\\mathrm{avg}} \\approx 2.985\\,\\mu\\mathrm{W}$$\n所要求的数值是每次事件的能量（$9.212\\,\\mathrm{fJ}$）和平均动态功率（$2.985\\,\\mu\\mathrm{W}$）。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n9.212  2.985\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
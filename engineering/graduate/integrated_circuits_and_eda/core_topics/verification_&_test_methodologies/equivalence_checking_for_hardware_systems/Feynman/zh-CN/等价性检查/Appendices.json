{
    "hands_on_practices": [
        {
            "introduction": "本节的第一个练习聚焦于等价性检查的基石：组合逻辑比较器（miter）电路。我们将超越简单的理想情况，通过引入环境约束，即所谓的“关心集”（care set），来练习在特定有效输入条件下的等价性验证。这模拟了验证工作中的一个常见场景，即并非所有输入组合都是可能或相关的。",
            "id": "4270275",
            "problem": "考虑两个组合电路 $C_{A}$ 和 $C_{B}$，它们都作用于布尔输入 $a$、 $b$、 $c$、 $d$、 $e \\in \\{0,1\\}$，并各自产生两个输出。电路 $C_{A}$ 的输出为\n- $o_{1}^{A} = a \\oplus b \\oplus (c \\wedge d) \\oplus e$，\n- $o_{2}^{A} = (a \\wedge c) \\oplus (b \\wedge d) \\oplus e$，\n而电路 $C_{B}$ 的输出为\n- $o_{1}^{B} = a \\oplus b \\oplus (c \\wedge \\neg d) \\oplus e$，\n- $o_{2}^{B} = (a \\wedge c) \\oplus (b \\wedge \\neg d) \\oplus e$，\n其中 $\\oplus$ 表示异或（XOR），$\\wedge$ 表示逻辑与（AND），$\\vee$ 表示逻辑或（OR），$\\neg$ 表示逻辑非（NOT）。\n\n您将在一个受限的输入环境（称为关心集）下检查等价性。关心集 $\\mathcal{C}$ 由以下输入约束定义：\n- 在变量 $\\{a,b,c,d,e\\}$ 中，恰好有 $3$ 个变量等于 $1$。\n- 输入 $d$ 受到函数约束 $d = a \\oplus e$。\n\n仅使用组合等价性检查（CEC）的基本定义和布尔代数中的规范miter构造，确定在关心集 $\\mathcal{C}$ 中使 $C_{A}$ 和 $C_{B}$ 不等价的输入赋值的确切数量。请以单个整数形式提供最终答案。无需四舍五入，也无物理单位。",
            "solution": "用户要求我解决一个组合等价性检查的问题。\n\n### 第一步：提取已知条件\n-   **电路 $C_A$**：\n    -   输入：$a, b, c, d, e \\in \\{0,1\\}$\n    -   输出：\n        -   $o_{1}^{A} = a \\oplus b \\oplus (c \\wedge d) \\oplus e$\n        -   $o_{2}^{A} = (a \\wedge c) \\oplus (b \\wedge d) \\oplus e$\n-   **电路 $C_B$**：\n    -   输入：$a, b, c, d, e \\in \\{0,1\\}$\n    -   输出：\n        -   $o_{1}^{B} = a \\oplus b \\oplus (c \\wedge \\neg d) \\oplus e$\n        -   $o_{2}^{B} = (a \\wedge c) \\oplus (b \\wedge \\neg d) \\oplus e$\n-   **运算符**：\n    -   $\\oplus$：异或（XOR）\n    -   $\\wedge$：逻辑与\n    -   $\\vee$：逻辑或\n    -   $\\neg$：逻辑非\n-   **关心集 $\\mathcal{C}$**：由对输入 $\\{a,b,c,d,e\\}$ 的两个约束定义。\n    1.  恰好有 $3$ 个变量等于 $1$。\n    2.  输入 $d$ 受到函数约束 $d = a \\oplus e$。\n-   **任务**：\n    -   使用规范miter构造，确定在关心集 $\\mathcal{C}$ 中使 $C_{A}$ 和 $C_{B}$ 不等价的输入赋值的确切数量。\n    -   以单个整数形式提供答案。\n\n### 第二步：使用提取的已知条件进行验证\n该问题定义明确，在数字逻辑设计和电子设计自动化（EDA）领域有其科学依据。\n-   **科学依据**：该问题使用标准的布尔代数和组合逻辑概念，这些是计算机工程和数学的基础。所有定义和运算都是标准的。\n-   **问题良定**：该问题明确了电路、输入、约束（关心集）以及不等价的条件。它要求一个具体的量（输入向量的数量），应该存在唯一解。\n-   **客观性**：语言精确，没有歧义或主观性。约束条件是形式化指定的。\n-   该问题是自包含的，提供了得出解决方案所需的所有信息。所提供的数据中没有矛盾之处。\n\n### 第三步：判断与行动\n问题有效。我将继续进行求解。\n\n为确定两个电路 $C_{A}$ 和 $C_{B}$ 在何时不等价，我们使用规范miter构造。当且仅当对于关心集内的所有可能输入赋值，两个组合电路的相应输出都相同时，它们是等价的。如果对于某个特定的输入赋值，至少有一对相应的输出不同，则它们在该赋值下不等价。\n\nMiter电路的输出（我们称之为 $M$）是一个布尔函数，当电路不等价时其值为 $1$，等价时为 $0$。对于具有多个输出的电路，miter输出是每对相应输出的异或差值的逻辑或。\n在本例中，每个电路有两个输出，miter函数为：\n$$M = (o_{1}^{A} \\oplus o_{1}^{B}) \\vee (o_{2}^{A} \\oplus o_{2}^{B})$$\n我们需要找到关心集 $\\mathcal{C}$ 中使 $M=1$ 的输入赋值 $(a,b,c,d,e)$ 的数量。\n\n首先，我们简化 $M$ 表达式中的两个异或项。\n对于第一对输出：\n$$o_{1}^{A} \\oplus o_{1}^{B} = (a \\oplus b \\oplus (c \\wedge d) \\oplus e) \\oplus (a \\oplus b \\oplus (c \\wedge \\neg d) \\oplus e)$$\n使用异或的结合律和交换律，以及恒等式 $x \\oplus x = 0$：\n$$o_{1}^{A} \\oplus o_{1}^{B} = (a \\oplus a) \\oplus (b \\oplus b) \\oplus (e \\oplus e) \\oplus (c \\wedge d) \\oplus (c \\wedge \\neg d)$$\n$$o_{1}^{A} \\oplus o_{1}^{B} = 0 \\oplus 0 \\oplus 0 \\oplus (c \\wedge d) \\oplus (c \\wedge \\neg d)$$\n$$o_{1}^{A} \\oplus o_{1}^{B} = c \\wedge (d \\oplus \\neg d)$$\n因为对于任何布尔变量 $x$，$x \\oplus \\neg x = 1$，所以我们有 $d \\oplus \\neg d = 1$。\n$$o_{1}^{A} \\oplus o_{1}^{B} = c \\wedge 1 = c$$\n\n对于第二对输出：\n$$o_{2}^{A} \\oplus o_{2}^{B} = ((a \\wedge c) \\oplus (b \\wedge d) \\oplus e) \\oplus ((a \\wedge c) \\oplus (b \\wedge \\neg d) \\oplus e)$$\n类似地，\n$$o_{2}^{A} \\oplus o_{2}^{B} = ((a \\wedge c) \\oplus (a \\wedge c)) \\oplus (e \\oplus e) \\oplus (b \\wedge d) \\oplus (b \\wedge \\neg d)$$\n$$o_{2}^{A} \\oplus o_{2}^{B} = 0 \\oplus 0 \\oplus (b \\wedge d) \\oplus (b \\wedge \\neg d)$$\n$$o_{2}^{A} \\oplus o_{2}^{B} = b \\wedge (d \\oplus \\neg d)$$\n$$o_{2}^{A} \\oplus o_{2}^{B} = b \\wedge 1 = b$$\n\n将这些简化后的表达式代回miter函数 $M$：\n$$M = c \\vee b$$\n因此，当且仅当条件 $b \\vee c = 1$ 满足时，对于给定的输入赋值，电路 $C_A$ 和 $C_B$ 不等价。这等价于变量 $b$ 或 $c$ 中至少有一个必须等于 $1$。\n\n问题现在简化为计算满足关心集 $\\mathcal{C}$ 的约束条件且满足不等价条件 $b \\vee c = 1$ 的输入向量 $(a,b,c,d,e)$ 的数量。关心集 $\\mathcal{C}$ 由以下条件定义：\n1.  输入向量的汉明权重为 $3$。即，算术和 $a+b+c+d+e = 3$。\n2.  函数约束 $d = a \\oplus e$。\n\n我们需要找到满足以下条件的向量 $(a,b,c,d,e)$ 的集合大小：\n1.  $a+b+c+d+e = 3$\n2.  $d = a \\oplus e$\n3.  $b \\vee c = 1$\n\n让我们首先分析关心集 $\\mathcal{C}$ 的约束。我们可以通过考虑 $(a,e)$ 对的可能取值来枚举有效赋值，这反过来又决定了 $d$ 的值。\n\n情况1：$(a,e) = (0,0)$。\n根据函数约束，$d = a \\oplus e = 0 \\oplus 0 = 0$。\n这三个变量的值是 $(a,d,e) = (0,0,0)$。它们对汉明权重的贡献是 $0$。\n汉明权重约束变为 $a+b+c+d+e = 0+b+c+0+0 = 3$，所以 $b+c = 3$。\n由于 $b,c \\in \\{0,1\\}$，$b+c$ 的最大值为 $2$。因此，$b+c=3$ 是不可能的。在这种情况下有 $0$ 个赋值。\n\n情况2：$(a,e) = (0,1)$。\n根据函数约束，$d = a \\oplus e = 0 \\oplus 1 = 1$。\n这三个变量的值是 $(a,d,e) = (0,1,1)$。它们对汉明权重的贡献是 $2$。\n汉明权重约束变为 $a+b+c+d+e = 0+b+c+1+1 = 3$，所以 $b+c = 1$。\n这个条件由两对 $(b,c)$ 的值满足：$(1,0)$ 和 $(0,1)$。\n这给了我们两个关心集中的有效输入向量：\n-   $(a,b,c,d,e) = (0,1,0,1,1)$\n-   $(a,b,c,d,e) = (0,0,1,1,1)$\n共有 $2$ 个这样的赋值。\n\n情况3：$(a,e) = (1,0)$。\n根据函数约束，$d = a \\oplus e = 1 \\oplus 0 = 1$。\n这三个变量的值是 $(a,d,e) = (1,1,0)$。它们对汉明权重的贡献是 $2$。\n汉明权重约束变为 $a+b+c+d+e = 1+b+c+1+0 = 3$，所以 $b+c = 1$。\n这由 $(b,c)=(1,0)$ 和 $(b,c)=(0,1)$ 满足。\n这给了我们两个关心集中的有效输入向量：\n-   $(a,b,c,d,e) = (1,1,0,1,0)$\n-   $(a,b,c,d,e) = (1,0,1,1,0)$\n共有 $2$ 个这样的赋值。\n\n情况4：$(a,e) = (1,1)$。\n根据函数约束，$d = a \\oplus e = 1 \\oplus 1 = 0$。\n这三个变量的值是 $(a,d,e) = (1,0,1)$。它们对汉明权重的贡献是 $2$。\n汉明权重约束变为 $a+b+c+d+e = 1+b+c+0+1 = 3$，所以 $b+c = 1$。\n这由 $(b,c)=(1,0)$ 和 $(b,c)=(0,1)$ 满足。\n这给了我们两个关心集中的有效输入向量：\n-   $(a,b,c,d,e) = (1,1,0,0,1)$\n-   $(a,b,c,d,e) = (1,0,1,0,1)$\n共有 $2$ 个这样的赋值。\n\n总的来说，关心集 $\\mathcal{C}$ 中的输入赋值数量是每种情况计数之和：$0+2+2+2 = 6$。\n关心集是 $\\mathcal{C} = \\{(0,1,0,1,1), (0,0,1,1,1), (1,1,0,1,0), (1,0,1,1,0), (1,1,0,0,1), (1,0,1,0,1)\\}$。\n\n现在我们必须检查这 $6$ 个赋值中有多少个满足不等价条件 $M = b \\vee c = 1$。\n回顾我们的案例分析，关心集中的每一个有效赋值都是从条件 $b+c=1$ 推导出来的。\n如果 $b+c=1$（其中 $b, c$ 是布尔值），那么必须是一个变量为 $1$ 而另一个为 $0$。\n对于任何这样的一对值，条件 $b \\vee c = 1$ 都得到满足。\n例如，如果 $(b,c)=(1,0)$，则 $b \\vee c = 1 \\vee 0 = 1$。\n如果 $(b,c)=(0,1)$，则 $b \\vee c = 0 \\vee 1 = 1$。\n因此，对于构成关心集 $\\mathcal{C}$ 的所有 $6$ 个输入赋值，不等价条件 $b \\vee c = 1$ 都得到满足。\n\n这意味着对于关心集中的每个输入向量，电路 $C_A$ 和 $C_B$ 都是不等价的。\n此类输入赋值的数量就是关心集的总大小，即 $6$。\n\n或者，我们本可以确定任何在 $\\mathcal{C}$ 中的向量都必须满足 $b \\vee c = 1$。为进行反证，假设存在一个向量 $(a,b,c,d,e) \\in \\mathcal{C}$，使得 $b \\vee c = 0$。这意味着 $b=0$ 且 $c=0$。汉明权重约束 $a+b+c+d+e=3$ 简化为 $a+d+e=3$。对于布尔变量，这要求 $a=1, d=1, e=1$。然而，这些值与第二个关心集约束 $d=a \\oplus e$ 相矛盾，因为 $1 \\oplus 1 = 0 \\neq 1$。因此，$\\mathcal{C}$ 中不可能有任何向量同时满足 $b=0$ 和 $c=0$。由此可知，$\\mathcal{C}$ 中的所有向量都必须满足 $b \\vee c=1$。那么问题就等价于求 $\\mathcal{C}$ 的大小，我们已经计算出其大小为 $6$。",
            "answer": "$$\\boxed{6}$$"
        },
        {
            "introduction": "接下来，我们将从布尔可满足性（SAT）方法转换到一个优雅而强大的代数方法。在这个练习中，你将学习如何将电路建模为有限域上的多项式方程组。通过执行多项式除法来形式化地证明等价性，你将深入了解计算机代数系统如何能被用于自动化硬件验证。",
            "id": "4270272",
            "problem": "考虑使用代数方法对两个在有限域 $\\mathbb{F}_{2}$ 上建模的组合硬件电路进行等价性验证。多项式环为 $R = \\mathbb{F}_{2}[x_{1}, x_{2}, x_{3}, a_{1}, a_{2}, a_{3}, s_{1}, p_{1}, p_{2}, y_{A}, y_{B}]$。每个门在环 $R$ 中被编码为一个形如 $z + h(\\text{inputs})$ 的多项式，它在 $\\mathbb{F}_{2}$ 上强制约束 $z = h(\\text{inputs})$。对于主输入，布尔语义由域多项式 $x_{i}^{2} + x_{i}$（其中 $i \\in \\{1,2,3\\}$）强制执行。\n\n电路 $\\mathcal{C}_{A}$ 有一个输出 $y_{A}$，并由以下门多项式定义：\n- $g_{1}: a_{1} + x_{1} x_{2}$，\n- $g_{2}: a_{2} + x_{1} x_{3}$，\n- $g_{3}: a_{3} + x_{2} x_{3}$，\n- $g_{4}: y_{A} + a_{1} + a_{2} + a_{3}$。\n\n电路 $\\mathcal{C}_{B}$ 有一个输出 $y_{B}$，并由以下门多项式定义：\n- $h_{1}: s_{1} + x_{1} + x_{2}$，\n- $h_{2}: p_{1} + x_{1} x_{2}$，\n- $h_{3}: p_{2} + s_{1} x_{3}$，\n- $h_{4}: y_{B} + p_{1} + p_{2}$。\n\n令 $G$ 为上述八个门多项式与三个域多项式 $x_{1}^{2} + x_{1}$、$x_{2}^{2} + x_{2}$、$x_{3}^{2} + x_{3}$ 的集合。考虑 $R$ 上的字典序项序 $\\succ$ 如下：\n$$\ny_{A} \\succ y_{B} \\succ a_{1} \\succ a_{2} \\succ a_{3} \\succ s_{1} \\succ p_{1} \\succ p_{2} \\succ x_{1} \\succ x_{2} \\succ x_{3}.\n$$\n构造 miter 多项式 $m = y_{A} + y_{B} \\in R$。\n\n仅从 $\\mathbb{F}_{2}$ 中多项式理想和规约的基本定义出发，计算在给定项序 $\\succ$ 下，$m$ 对 $G$ 进行多元多项式除法所得的唯一既约范式（余数）。将你的最终答案表示为在 $\\mathbb{F}_{2}$ 上的环 $R$ 中的单个闭式代数表达式。无需四舍五入，也不适用单位。你的最终答案必须是单个表达式。",
            "solution": "该问题要求计算 miter 多项式 $m = y_{A} + y_{B}$ 相对于给定多项式集合 $G$ 和字典序项序 $\\succ$ 的唯一既约范式。这是代数硬件验证中的一个标准流程，其中两个电路被证明是等价的，当且仅当它们的 miter 多项式在由定义电路约束的多项式所生成的理想中规约为零。计算在多项式环 $R = \\mathbb{F}_{2}[x_{1}, x_{2}, x_{3}, a_{1}, a_{2}, a_{3}, s_{1}, p_{1}, p_{2}, y_{A}, y_{B}]$ 中进行。所有算术运算都在有限域 $\\mathbb{F}_{2}$ 中进行，其中 $1+1=0$。\n\n寻找范式的过程是多元多项式除法。一个多项式 $p$ 被一组除数多项式 $G = \\{g_1, g_2, \\dots, g_k\\}$ 规约。单个规约步骤将 $p$ 替换为 $p' = p + \\frac{T}{LT(g_i)} g_i$，其中 $T$ 是 $p$ 中能被某个多项式 $g_i \\in G$ 的首项 $LT(g_i)$ 整除的一个项。重复此过程，直到结果多项式中的任何项都不能被 $G$ 中的任何首项整除。最终的不可约多项式就是范式，或称余数。结果的唯一性得到保证，因为所提供的门多项式集合，其结构是为新变量定义，相对于指定的项序构成一个 Gröbner 基。\n\n项序 $\\succ$ 如下给出：\n$$\ny_{A} \\succ y_{B} \\succ a_{1} \\succ a_{2} \\succ a_{3} \\succ s_{1} \\succ p_{1} \\succ p_{2} \\succ x_{1} \\succ x_{2} \\succ x_{3}\n$$\n\n多项式集合 $G$ 由十一个多项式组成。我们列出它们以及它们相对于 $\\succ$ 的首项 (LT)：\n1.  $g_{4}: y_{A} + a_{1} + a_{2} + a_{3}$，首项为 $LT(g_{4}) = y_{A}$\n2.  $h_{4}: y_{B} + p_{1} + p_{2}$，首项为 $LT(h_{4}) = y_{B}$\n3.  $g_{1}: a_{1} + x_{1} x_{2}$，首项为 $LT(g_{1}) = a_{1}$\n4.  $g_{2}: a_{2} + x_{1} x_{3}$，首项为 $LT(g_{2}) = a_{2}$\n5.  $g_{3}: a_{3} + x_{2} x_{3}$，首项为 $LT(g_{3}) = a_{3}$\n6.  $h_{1}: s_{1} + x_{1} + x_{2}$，首项为 $LT(h_{1}) = s_{1}$\n7.  $h_{2}: p_{1} + x_{1} x_{2}$，首项为 $LT(h_{2}) = p_{1}$\n8.  $h_{3}: p_{2} + s_{1} x_{3}$，首项为 $LT(h_{3}) = p_{2}$\n9.  $f_1: x_{1}^{2} + x_{1}$，首项为 $LT(f_1) = x_{1}^{2}$\n10. $f_2: x_{2}^{2} + x_{2}$，首项为 $LT(f_2) = x_{2}^{2}$\n11. $f_3: x_{3}^{2} + x_{3}$，首项为 $LT(f_3) = x_{3}^{2}$\n\n我们从 miter 多项式 $m = y_{A} + y_{B}$ 开始，并对其进行顺序规约。\n\n步骤 1：初始多项式为 $P_{0} = y_{A} + y_{B}$。$P_0$ 的首项是 $y_{A}$，它等于 $LT(g_{4})$。我们使用 $g_{4}$ 来规约 $P_0$：\n$$\nP_{1} = P_{0} + g_{4} = (y_{A} + y_{B}) + (y_{A} + a_{1} + a_{2} + a_{3}) = y_{B} + a_{1} + a_{2} + a_{3}\n$$\n\n步骤 2：$P_{1}$ 的首项是 $y_{B}$，即 $LT(h_{4})$。我们使用 $h_{4}$ 来规约 $P_{1}$：\n$$\nP_{2} = P_{1} + h_{4} = (y_{B} + a_{1} + a_{2} + a_{3}) + (y_{B} + p_{1} + p_{2}) = a_{1} + a_{2} + a_{3} + p_{1} + p_{2}\n$$\n\n步骤 3：$P_{2}$ 的首项是 $a_{1}$（因为 $a_{1} \\succ a_{2} \\succ a_{3} \\succ p_{1} \\succ p_{2}$），即 $LT(g_{1})$。我们使用 $g_{1}$ 来规约 $P_{2}$：\n$$\nP_{3} = P_{2} + g_{1} = (a_{1} + a_{2} + a_{3} + p_{1} + p_{2}) + (a_{1} + x_{1} x_{2}) = a_{2} + a_{3} + p_{1} + p_{2} + x_{1} x_{2}\n$$\n\n步骤 4：$P_{3}$ 的首项是 $a_{2}$，即 $LT(g_{2})$。我们使用 $g_{2}$ 来规约 $P_{3}$：\n$$\nP_{4} = P_{3} + g_{2} = (a_{2} + a_{3} + p_{1} + p_{2} + x_{1} x_{2}) + (a_{2} + x_{1} x_{3}) = a_{3} + p_{1} + p_{2} + x_{1} x_{2} + x_{1} x_{3}\n$$\n\n步骤 5：$P_{4}$ 的首项是 $a_{3}$，即 $LT(g_{3})$。我们使用 $g_{3}$ 来规约 $P_{4}$：\n$$\nP_{5} = P_{4} + g_{3} = (a_{3} + p_{1} + p_{2} + x_{1} x_{2} + x_{1} x_{3}) + (a_{3} + x_{2} x_{3}) = p_{1} + p_{2} + x_{1} x_{2} + x_{1} x_{3} + x_{2} x_{3}\n$$\n\n步骤 6：$P_{5}$ 的首项是 $p_{1}$，即 $LT(h_{2})$。我们使用 $h_{2}$ 来规约 $P_{5}$：\n$$\nP_{6} = P_{5} + h_{2} = (p_{1} + p_{2} + x_{1} x_{2} + x_{1} x_{3} + x_{2} x_{3}) + (p_{1} + x_{1} x_{2}) = p_{2} + x_{1} x_{3} + x_{2} x_{3} + (x_{1}x_{2} + x_{1}x_{2}) = p_{2} + x_{1} x_{3} + x_{2} x_{3}\n$$\n\n步骤 7：$P_{6}$ 的首项是 $p_{2}$，即 $LT(h_{3})$。我们使用 $h_{3}$ 来规约 $P_{6}$：\n$$\nP_{7} = P_{6} + h_{3} = (p_{2} + x_{1} x_{3} + x_{2} x_{3}) + (p_{2} + s_{1} x_{3}) = s_{1} x_{3} + x_{1} x_{3} + x_{2} x_{3}\n$$\n\n步骤 8：$P_{7}$ 的首项是 $s_{1} x_{3}$，因为 $s_{1}$ 是出现的最高序变量。该项可被 $LT(h_{1}) = s_{1}$ 整除。我们使用 $h_{1}$ 来规约 $P_{7}$：\n$$\nP_{8} = P_{7} + x_{3} \\cdot h_{1} = (s_{1} x_{3} + x_{1} x_{3} + x_{2} x_{3}) + x_{3}(s_{1} + x_{1} + x_{2})\n$$\n将 $x_3$ 分配进去，得到：\n$$\nP_{8} = s_{1} x_{3} + x_{1} x_{3} + x_{2} x_{3} + s_{1} x_{3} + x_{1} x_{3} + x_{2} x_{3}\n$$\n在 $\\mathbb{F}_{2}$ 中合并同类项：\n$$\nP_{8} = (1+1)s_{1} x_{3} + (1+1)x_{1} x_{3} + (1+1)x_{2} x_{3} = 0 \\cdot s_{1} x_{3} + 0 \\cdot x_{1} x_{3} + 0 \\cdot x_{2} x_{3} = 0\n$$\n\n该多项式已被规约为 $0$。没有非零项可供规约。在整个过程中，没有生成任何单个变量 $x_i$ 的 2 次或更高次的项，因此不需要域多项式 $x_{i}^{2} + x_{i}$ 进行任何规约。$m$ 的唯一既约范式是 $0$。这意味着 $y_{A} + y_{B} \\in I(G)$，其中 $I(G)$ 是由 $G$ 中的多项式生成的理想。因此，在由 $G$ 定义的簇上，由 $y_A$ 和 $y_B$ 表示的函数是相同的，这意味着电路 $\\mathcal{C}_{A}$ 和 $\\mathcal{C}_{B}$ 在功能上是等价的。",
            "answer": "$$\\boxed{0}$$"
        },
        {
            "introduction": "最后一个练习处理一个微妙但至关重要的问题：硬件仿真器中使用的四值逻辑（$0, 1, X, Z$）与形式化证明器中严格的二值逻辑之间的差异。通过分析“X”（未知态）的传播特性，你将学会如何对电路等价性做出可靠的推断。这个练习将帮助你理解不同分析方法在处理未知态时的根本优势与局限。",
            "id": "4270282",
            "problem": "考虑两个门级组合网表，记为 $C_1$ 和 $C_2$，每个网表实现一个从 $n$ 个主输入到 $m$ 个主输出的向量布尔函数。设底层的二值域为 $B = \\{0,1\\}$，四值域为 $V = \\{0,1,X,Z\\}$。在四值求值中，将高阻值 $Z$ 视为未知，即在逻辑求值中，将 $Z$ 等同于 $X$。假设所有门都根据电子设计自动化（EDA）仿真中用于硬件描述语言中按位逻辑的标准四值语义进行求值：例如，对于按位 $\\land$ (AND)，$0 \\land v = 0$, $1 \\land v = v$, $X \\land 0 = 0$, $X \\land 1 = X$, 且 $X \\land X = X$；对于按位 $\\lor$ (OR)，$1 \\lor v = 1$, $0 \\lor v = v$, $X \\lor 0 = X$, $X \\lor 1 = 1$, 且 $X \\lor X = X$；对于按位 $\\oplus$ (XOR)，$0 \\oplus v = v$, $1 \\oplus v = \\neg v$, 且当 $v \\in \\{0,1,X\\}$ 时 $X \\oplus v = X$；对于按位非，$\\neg 0 = 1$, $\\neg 1 = 0$, 且 $\\neg X = X$。\n\n定义 Miter 电路 $M$，通过计算一个单位比特输出来比较 $C_1$ 和 $C_2$\n$$\nM(u) \\;=\\; \\bigvee_{i=1}^{m} \\left( y_{1,i}(u) \\oplus y_{2,i}(u) \\right),\n$$\n其中 $y_{1,i}(u)$ 和 $y_{2,i}(u)$ 分别表示在输入向量 $u$ 上求值得到的 $C_1$ 和 $C_2$ 的第 $i$ 个输出。标准的二值等价性概念是，如果对于所有 $b \\in B^n$，在二值求值下 $M(b) = 0$，则 $C_1$ 和 $C_2$ 是等价的。\n\n为了关联四值和二值语义，定义具体化函数 $\\gamma: V \\to \\mathcal{P}(B)$ 为 $\\gamma(0) = \\{0\\}$, $\\gamma(1) = \\{1\\}$ 以及 $\\gamma(X) = \\gamma(Z) = \\{0,1\\}$。将 $\\gamma$ 按点扩展到向量，因此对于 $u \\in V^n$，$\\gamma(u) \\subseteq B^n$ 是与 $u$ 一致的所有二值补全的集合。定义抽象化函数 $\\alpha: \\mathcal{P}(B) \\to V$ 在单元素集合上为 $\\alpha(\\{0\\}) = 0$, $\\alpha(\\{1\\}) = 1$，在集合 $\\{0,1\\}$ 上为 $\\alpha(\\{0,1\\}) = X$，并将 $\\alpha$ 按点扩展到向量。假设门语义相对于信息序是单调的，在该序中 $X$（和 $Z$）表示的信息少于 $0$ 或 $1$，因此四值求值是所有二值补全的过近似：对于由上述门组成的任何表达式 $E$ 和任何 $u \\in V^n$，每个 $b \\in \\gamma(u)$ 都满足 $E(b) \\in \\gamma(E(u))$。\n\n在这些假设下，考虑以下关于使用四值求值来推断 $C_1$ 和 $C_2$ 二值等价性的陈述：\n\nA. 如果对于所有 $u \\in V^n$，四值 Miter 求值为 $M(u) = 0$，那么对于所有 $b \\in B^n$，二值 Miter 求值为 $M(b) = 0$。因此，$C_1$ 和 $C_2$ 在二值语义下是等价的。\n\nB. 如果 $C_1$ 和 $C_2$ 在二值语义下是等价的（即，对于所有 $b \\in B^n$，$M(b) = 0$），那么对于所有 $u \\in V^n$，四值 Miter 求值为 $M(u) = 0$。\n\nC. 为证明 $C_1$ 和 $C_2$ 不等价，只需找到一个 $u \\in V^n$ 使得在四值求值下 $M(u) = 1$；这意味着对于所有 $b \\in \\gamma(u)$，二值 Miter 求值为 $M(b) = 1$，因此 $C_1$ 和 $C_2$ 是不等价的。\n\nD. 对于在时间 $t=0$ 时将未初始化寄存器建模为 $X$ 的时序网表，将时间 $t=0$ 时的每个 $X$ 输入替换为 $0$，并随时间检查二值等价性，可以证明对于所有未初始化行为，该等价性是健全且完备的。\n\n在给定的语义和假设下，上述哪些陈述在从四值求值得出关于二值等价性或不等价性的有效推断方面是健全的？选择所有适用的选项。",
            "solution": "问题陈述描述了一个形式化框架，用于将硬件仿真中常用的四值逻辑与定义电路功能正确性的标准二值布尔逻辑联系起来。这种关系的核心是单调性假设，该假设指出，对于任何电路（表达式）$E$ 和任何四值输入向量 $u \\in V^n$，在任何具体化 $b \\in \\gamma(u)$ 上的二值求值都与在 $u$ 上的四值求值一致。形式上，对于所有 $b \\in \\gamma(u)$，都有 $E(b) \\in \\gamma(E(u))$。\n\n具体化函数 $\\gamma$ 定义为 $\\gamma(0) = \\{0\\}$, $\\gamma(1) = \\{1\\}$ 以及 $\\gamma(X) = \\gamma(Z) = \\{0,1\\}$。这对于表达式 $E$ 意味着以下关键属性：\n1. 如果 $E(u)$ 在四值域中求值为 $0$，那么对于所有对应的二值输入向量 $b \\in \\gamma(u)$，表达式 $E(b)$ 必须求值为 $0$。这是因为 $\\gamma(0) = \\{0\\}$。\n2. 如果 $E(u)$ 在四值域中求值为 $1$，那么对于所有 $b \\in \\gamma(u)$，$E(b)$ 必须求值为 $1$。这是因为 $\\gamma(1) = \\{1\\}$。\n3. 如果 $E(u)$ 在四值域中求值为 $X$，那么对于任何 $b \\in \\gamma(u)$，$E(b)$ 可能求值为 $0$ 或 $1$。这是因为 $\\gamma(X) = \\{0,1\\}$。这种情况不提供关于二值行为的确定信息。\n\nMiter 电路 $M$ 的定义使其输出为 $M(u) = \\bigvee_{i=1}^{m} (y_{1,i}(u) \\oplus y_{2,i}(u))$。电路 $C_1$ 和 $C_2$ 的二值等价性定义为对于所有 $b \\in B^n$，$M(b) = 0$。\n\n让我们基于这些原则来评估每个陈述。\n\nA. 如果对于所有 $u \\in V^n$，四值 Miter 求值为 $M(u) = 0$，那么对于所有 $b \\in B^n$，二值 Miter 求值为 $M(b) = 0$。因此，$C_1$ 和 $C_2$ 在二值语义下是等价的。\n\n这个陈述描述了一个健全但实践上过强的证明等价性的条件。\n让我们假设前提为真：对于所有 $u \\in V^n$，$M(u)=0$。我们想证明对于所有 $b \\in B^n$，$M(b)=0$。\n考虑一个特定的输入向量 $u_X \\in V^n$，其中每个分量都是 $X$。所有可能的二值输入向量的集合 $B^n$ 是该向量的具体化：$\\gamma(u_X) = B^n$。\n根据前提，对于这个特定的向量 $u_X$，我们在四值求值中必须有 $M(u_X)=0$。\n现在，我们将给定的单调性属性应用于 $E=M$ 和 $u=u_X$。该属性指出，对于每个 $b \\in \\gamma(u_X)$，必须有 $M(b) \\in \\gamma(M(u_X))$。\n代入我们的值，对于每个 $b \\in B^n$，必须有 $M(b) \\in \\gamma(0)$。\n因为 $\\gamma(0) = \\{0\\}$，这意味着对于每个 $b \\in B^n$，$M(b)$ 必须是 $0$。\n这正是 $C_1$ 和 $C_2$ 二值等价性的定义。因此，该推断是有效的。\n\n结论：**正确**。\n\nB. 如果 $C_1$ 和 $C_2$ 在二值语义下是等价的（即，对于所有 $b \\in B^n$，$M(b) = 0$），那么对于所有 $u \\in V^n$，四值 Miter 求值为 $M(u) = 0$。\n\n这个陈述是陈述 A 的逆命题。它声称二值等价性意味着四值 Miter 输出总是 $0$。这通常是错误的，因为当四值逻辑无法确定一个确定的 $0$ 或 $1$ 时，它可能会产生 $X$。\n考虑一个简单的反例。设 $n=1, m=1$。设 $C_1$ 实现函数 $y_1(a) = a$，而 $C_2$ 实现函数 $y_2(a) = \\neg(\\neg a)$。\n在二值逻辑中（$a \\in B$），$\\neg(\\neg a) = a$，所以电路是等价的。Miter 输出 $M(b) = b \\oplus (\\neg(\\neg b)) = b \\oplus b = 0$ 对于所有 $b \\in B^1$ 都成立。前提成立。\n现在，让我们对四值输入 $u=X$ 求值 Miter。\n$C_1$ 的输出是 $y_1(X) = X$。\n$C_2$ 的输出是 $y_2(X) = \\neg(\\neg X)$。根据给定的语义，$\\neg X = X$，所以 $y_2(X) = \\neg X = X$。\nMiter 的输出是 $M(X) = y_1(X) \\oplus y_2(X) = X \\oplus X$。\nXOR 的语义规定 $X \\oplus v = X$。因此，$X \\oplus X = X$。\n由于 $M(X) = X \\neq 0$，结论“对于所有 $u \\in V^n$，$M(u)=0$”是错误的。因此，该蕴含关系无效。这说明四值求值可能会丢失信息，即使对于等价电路也会导致 $X$ 输出。\n\n结论：**不正确**。\n\nC. 为证明 $C_1$ 和 $C_2$ 不等价，只需找到一个 $u \\in V^n$ 使得在四值求值下 $M(u) = 1$；这意味着对于所有 $b \\in \\gamma(u)$，二值 Miter 求值为 $M(b) = 1$，因此 $C_1$ 和 $C_2$ 是不等价的。\n\n这个陈述描述了使用四值求值来寻找等价性的反例。\n让我们假设我们找到了一个 $u \\in V^n$ 使得 $M(u) = 1$。\n我们再次使用单调性属性：对于每个 $b \\in \\gamma(u)$，我们必须有 $M(b) \\in \\gamma(M(u))$。\n由于 $M(u)=1$，我们有 $\\gamma(M(u)) = \\gamma(1) = \\{1\\}$。\n这意味着对于每个 $b \\in \\gamma(u)$，二值求值的结果必须是 $M(b) = 1$。\n由于 $u \\in V^n$，集合 $\\gamma(u)$ 是非空的。因此，至少存在一个二值输入向量 $b$，使得 $M(b)=1$。\n存在这样一个 $b$ 使得 $M(b) \\neq 0$ 就是二值不等价的定义。\n因此，找到一个 $u \\in V^n$ 使得 $M(u) = 1$ 是不等价性的一个健全证明。该陈述中提出的逻辑是完全正确的。\n\n结论：**正确**。\n\nD. 对于在时间 $t=0$ 时将未初始化寄存器建模为 $X$ 的时序网表，将时间 $t=0$ 时的每个 $X$ 输入替换为 $0$，并随时间检查二值等价性，可以证明对于所有未初始化行为，该等价性是健全且完备的。\n\n这个陈述将讨论扩展到时序电路。“所有未初始化行为”的等价性意味着电路对于寄存器的每一种可能的初始状态都必须是等价的。用 $X$ 值建模未初始化状态正确地捕捉了这种不确定性。\n所提出的方法是仅针对一个特定的初始状态——全零状态——检查等价性。该陈述声称这是一种证明对所有初始状态都等价的“健全且完备”的方法。\n\n让我们分析其健全性。如果一个等价性证明方法从不将不等价的电路宣告为等价，那么它就是健全的。\n考虑两个时序电路 $C_1$ 和 $C_2$，每个电路都有一个寄存器 $Q$。输出是寄存器的值。\n设其次态逻辑为：\n- $C_1$: $Q_{next} = 0$\n- $C_2$: $Q_{next} = Q_{current}$\n所提出的方法从两个电路的初始状态 $Q(0)=0$ 开始检查。\n- 在 $t=0$ 时，输出为 $Q_1(0)=0$ 和 $Q_2(0)=0$。它们匹配。\n- 在 $t=1$ 时，$Q_1(1)=0$ 且 $Q_2(1)=Q_2(0)=0$。它们匹配。\n- 在所有后续时间步，两个寄存器都将保持为 $0$。所以，该方法会判定电路是等价的。\n\n现在，让我们考虑一个不同的初始状态，$Q(0)=1$。\n- 在 $t=0$ 时，输出为 $Q_1(0)=1$ 和 $Q_2(0)=1$。它们匹配。\n- 在 $t=1$ 时，$Q_1(1)=0$ 且 $Q_2(1)=Q_2(0)=1$。输出现在不同（$0$ vs $1$）。\n对于所有未初始化行为，这两个电路是不等价的。然而，所提出的方法却宣告它们等价。这是一个假阳性（false positive）。因此，该方法是**不健全的**。\n\n一个不健全的方法不是一个有效的证明方法。声称它是“健全且完备的”是错误的，因为它不健全。\n\n结论：**不正确**。",
            "answer": "$$\\boxed{AC}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "The first step in any partitioning task is to create an appropriate mathematical model of the system. This exercise explores the translation of a circuit netlist into two common abstract representations: the precise hypergraph model and its simpler graph approximation, the clique-expanded graph. By working through this conversion and comparing vertex properties in both models, you will gain a foundational understanding of the trade-offs between model accuracy and algorithmic complexity .",
            "id": "4303701",
            "problem": "Consider a netlist used in Electronic Design Automation (EDA) system partitioning, with module (cell) vertices $V=\\{v_{1}, v_{2}, v_{3}, v_{4}, v_{5}, v_{6}\\}$ and nets (hyperedges) $E=\\{e_{1}, e_{2}, e_{3}, e_{4}, e_{5}\\}$ defined by their pin incidence sets:\n- $e_{1}=\\{v_{1}, v_{2}, v_{3}\\}$,\n- $e_{2}=\\{v_{2}, v_{3}, v_{4}, v_{5}\\}$,\n- $e_{3}=\\{v_{1}, v_{5}\\}$,\n- $e_{4}=\\{v_{3}, v_{4}\\}$,\n- $e_{5}=\\{v_{1}, v_{2}, v_{4}, v_{5}, v_{6}\\}$.\n\nConstruct the netlist hypergraph $H=(V,E)$ and its clique-expanded graph $G=(V,E')$ defined as follows: for each net $e\\in E$ of cardinality $|e|=k$, introduce all $\\binom{k}{2}$ edges among the vertices of $e$ and assign to each such edge the fractional weight $w(e)=\\frac{1}{k-1}$; if a pair of vertices appears together in multiple nets, the corresponding edge weight in $G$ is the sum of the contributions from each net.\n\nUsing only core definitions, compute:\n1) the total pin count $P=\\sum_{e\\in E}|e|$;\n2) the hypergraph degree $d_{H}(v_{i})$ of each vertex $v_{i}$, defined as the number of nets in $E$ that contain $v_{i}$;\n3) the weighted graph degree $d_{G}(v_{i})$ of each vertex $v_{i}$ in the clique-expanded graph $G$, defined as the sum of the weights of all edges in $G$ incident to $v_{i}$.\n\nExpress your final answer as a single row matrix in the order $\\left[P,\\ d_{H}(v_{1}),\\ d_{H}(v_{2}),\\ d_{H}(v_{3}),\\ d_{H}(v_{4}),\\ d_{H}(v_{5}),\\ d_{H}(v_{6}),\\ d_{G}(v_{1}),\\ d_{G}(v_{2}),\\ d_{G}(v_{3}),\\ d_{G}(v_{4}),\\ d_{G}(v_{5}),\\ d_{G}(v_{6})\\right]$. No rounding is required; provide exact values.",
            "solution": "## Problem Validation\n\n### Step 1: Extract Givens\n- Module vertices: $V=\\{v_{1}, v_{2}, v_{3}, v_{4}, v_{5}, v_{6}\\}$\n- Nets (hyperedges): $E=\\{e_{1}, e_{2}, e_{3}, e_{4}, e_{5}\\}$\n- Net incidences:\n  - $e_{1}=\\{v_{1}, v_{2}, v_{3}\\}$\n  - $e_{2}=\\{v_{2}, v_{3}, v_{4}, v_{5}\\}$\n  - $e_{3}=\\{v_{1}, v_{5}\\}$\n  - $e_{4}=\\{v_{3}, v_{4}\\}$\n  - $e_{5}=\\{v_{1}, v_{2}, v_{4}, v_{5}, v_{6}\\}$\n- Clique-expanded graph $G=(V, E')$ definition: For each net $e\\in E$ of cardinality $|e|=k$, introduce all $\\binom{k}{2}$ edges among the vertices of $e$.\n- Edge weight definition: Each edge introduced from a net $e$ is assigned a weight $w(e)=\\frac{1}{|e|-1}$. The total edge weight between two vertices is the sum of contributions from all nets containing both vertices.\n- Definitions to be computed:\n  1. Total pin count: $P=\\sum_{e\\in E}|e|$\n  2. Hypergraph degree of a vertex $v_i$: $d_{H}(v_{i})=$ number of nets in $E$ that contain $v_{i}$.\n  3. Weighted graph degree of a vertex $v_i$: $d_{G}(v_{i})=$ sum of weights of all edges in $G$ incident to $v_{i}$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded**: The problem uses standard, well-established concepts from graph theory and its application in Electronic Design Automation (EDA), specifically hypergraph modeling of netlists and the clique expansion method for converting hypergraphs to graphs. All definitions are standard in the field. The problem is scientifically sound.\n- **Well-Posed**: The problem provides a complete set of data (vertices, nets, definitions) and asks for the computation of specific, uniquely determinable quantities. The instructions are clear, and a unique solution exists. The problem is well-posed.\n- **Objective**: The problem is stated using precise, formal mathematical language. It is free from ambiguity, subjectivity, or opinion-based claims.\n\n### Step 3: Verdict and Action\nThe problem is valid as it is scientifically grounded, well-posed, and objective. A complete solution will be provided.\n\n## Solution\n\nThe problem requires the computation of three quantities related to the given netlist hypergraph: the total pin count $P$, the hypergraph degree $d_H(v_i)$ for each vertex, and the weighted graph degree $d_G(v_i)$ for each vertex in the clique-expanded graph.\n\n### 1) Total Pin Count ($P$)\nThe total pin count $P$ is the sum of the cardinalities (sizes) of all nets. First, we determine the cardinality of each net:\n- $|e_{1}| = |\\{v_{1}, v_{2}, v_{3}\\}| = 3$\n- $|e_{2}| = |\\{v_{2}, v_{3}, v_{4}, v_{5}\\}| = 4$\n- $|e_{3}| = |\\{v_{1}, v_{5}\\}| = 2$\n- $|e_{4}| = |\\{v_{3}, v_{4}\\}| = 2$\n- $|e_{5}| = |\\{v_{1}, v_{2}, v_{4}, v_{5}, v_{6}\\}| = 5$\n\nNow, we sum these cardinalities to find $P$:\n$$P = \\sum_{i=1}^{5} |e_{i}| = |e_{1}| + |e_{2}| + |e_{3}| + |e_{4}| + |e_{5}| = 3 + 4 + 2 + 2 + 5 = 16$$\n\n### 2) Hypergraph Degree ($d_{H}(v_{i})$)\nThe hypergraph degree of a vertex $v_i$, denoted $d_{H}(v_{i})$, is the number of nets that contain $v_i$. We can find this by inspecting the net definitions for each vertex:\n- $d_{H}(v_{1})$: $v_{1}$ is in nets $e_{1}, e_{3}, e_{5}$. Thus, $d_{H}(v_{1}) = 3$.\n- $d_{H}(v_{2})$: $v_{2}$ is in nets $e_{1}, e_{2}, e_{5}$. Thus, $d_{H}(v_{2}) = 3$.\n- $d_{H}(v_{3})$: $v_{3}$ is in nets $e_{1}, e_{2}, e_{4}$. Thus, $d_{H}(v_{3}) = 3$.\n- $d_{H}(v_{4})$: $v_{4}$ is in nets $e_{2}, e_{4}, e_{5}$. Thus, $d_{H}(v_{4}) = 3$.\n- $d_{H}(v_{5})$: $v_{5}$ is in nets $e_{2}, e_{3}, e_{5}$. Thus, $d_{H}(v_{5}) = 3$.\n- $d_{H}(v_{6})$: $v_{6}$ is in net $e_{5}$ only. Thus, $d_{H}(v_{6}) = 1$.\n\n### 3) Weighted Graph Degree ($d_{G}(v_{i})$)\nThe weighted degree of a vertex $v_{i}$ in the clique-expanded graph $G$, $d_{G}(v_{i})$, is the sum of the weights of all edges incident to $v_{i}$. The weight of an edge $(u, v)$ in $G$ is the sum of contributions from all nets containing both $u$ and $v$.\nLet's analyze the contribution of a single net $e$ to the degree of a vertex $v \\in e$. Let $|e| = k$. The net $e$ is replaced by a clique on its $k$ vertices. Each edge in this clique is given a weight of $\\frac{1}{k-1}$. The vertex $v$ is connected to the other $k-1$ vertices in the clique. The sum of the weights of these incident edges (from this net $e$ alone) is:\n$$ \\sum_{u \\in e, u \\neq v} w(u, v)_{from\\_e} = \\sum_{u \\in e, u \\neq v} \\frac{1}{k-1} = (k-1) \\times \\frac{1}{k-1} = 1 $$\nThis means that each net $e$ that contains a vertex $v_i$ contributes exactly $1$ to the total weighted degree $d_{G}(v_{i})$. Therefore, the total weighted degree $d_{G}(v_{i})$ is the sum of these contributions over all nets containing $v_i$. This is simply the count of nets containing $v_i$, which is the definition of the hypergraph degree $d_{H}(v_{i})$.\n$$ d_{G}(v_{i}) = \\sum_{e \\in E: v_{i} \\in e} \\left( \\sum_{u \\in e, u \\neq v_{i}} \\frac{1}{|e|-1} \\right) = \\sum_{e \\in E: v_{i} \\in e} (|e|-1) \\frac{1}{|e|-1} = \\sum_{e \\in E: v_{i} \\in e} 1 = d_{H}(v_{i}) $$\nThis establishes a direct equality between the weighted graph degree and the hypergraph degree for this specific weighting scheme. We can now use the previously computed values for $d_{H}(v_{i})$:\n- $d_{G}(v_{1}) = d_{H}(v_{1}) = 3$\n- $d_{G}(v_{2}) = d_{H}(v_{2}) = 3$\n- $d_{G}(v_{3}) = d_{H}(v_{3}) = 3$\n- $d_{G}(v_{4}) = d_{H}(v_{4}) = 3$\n- $d_{G}(v_{5}) = d_{H}(v_{5}) = 3$\n- $d_{G}(v_{6}) = d_{H}(v_{6}) = 1$\n\n### Final Assembly of Results\nThe final answer is presented as a single row matrix in the order\n$[P, d_{H}(v_{1}), d_{H}(v_{2}), d_{H}(v_{3}), d_{H}(v_{4}), d_{H}(v_{5}), d_{H}(v_{6}), d_{G}(v_{1}), d_{G}(v_{2}), d_{G}(v_{3}), d_{G}(v_{4}), d_{G}(v_{5}), d_{G}(v_{6})]$.\nSubstituting our computed values:\n$[16, 3, 3, 3, 3, 3, 1, 3, 3, 3, 3, 3, 1]$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n16 & 3 & 3 & 3 & 3 & 3 & 1 & 3 & 3 & 3 & 3 & 3 & 1\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Once a system is modeled, we need an effective algorithm to find a good partition. The Fiduccia-Mattheyses (FM) algorithm is a classic and powerful iterative improvement heuristic designed specifically for hypergraphs. This practice provides a step-by-step simulation of an FM pass, focusing on the core mechanics of gain calculation, move selection under balance constraints, and incremental updates . Mastering this process provides insight into a class of local search heuristics that are cornerstones of modern Electronic Design Automation.",
            "id": "4303636",
            "problem": "Consider a two-way hypergraph partitioning instance that models netlist partitioning in Electronic Design Automation (EDA). Let the hypergraph be $H = (V, \\mathcal{E})$ with vertex set $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$, vertex weights $\\omega(v_1) = 2$, $\\omega(v_2) = 1$, $\\omega(v_3) = 2$, $\\omega(v_4) = 1$, $\\omega(v_5) = 1$, $\\omega(v_6) = 2$, and net set $\\mathcal{E} = \\{e_1, e_2, e_3, e_4\\}$ with net weights $w(e_1) = 2$, $w(e_2) = 1$, $w(e_3) = 3$, $w(e_4) = 2$. The pins of each net are specified by $e_1 = \\{v_1, v_3, v_5\\}$, $e_2 = \\{v_1, v_2, v_3\\}$, $e_3 = \\{v_2, v_4, v_5\\}$, $e_4 = \\{v_3, v_6\\}$. The initial two-way partition is $\\mathcal{P}_0 = (A, B)$ where $A = \\{v_1, v_2, v_4\\}$ and $B = \\{v_3, v_5, v_6\\}$.\n\nAdopt the net-cut objective: for a partition $(A,B)$, the cut cost $C(A,B)$ is the sum of $w(e)$ over all nets $e \\in \\mathcal{E}$ that have at least one pin in $A$ and at least one pin in $B$. A single-pass execution of the Fiduccia–Mattheyses (FM) algorithm proceeds as follows: compute the initial gain $g(v)$ for each vertex $v \\in V$ as the net reduction in $C(A,B)$ if $v$ is moved to the other block; select and move one unlocked vertex at a time with the highest gain that does not violate the balance constraint; lock each moved vertex; update the gains of neighboring unlocked vertices incrementally; continue until no legal move remains or all vertices are locked; then choose the prefix of the move sequence with maximum cumulative gain and apply only that prefix to $\\mathcal{P}_0$ to produce the pass result.\n\nImpose the standard weight-balance constraint: let $\\Omega = \\sum_{v \\in V} \\omega(v)$ and let the target block weight be $\\Omega/2$. During the pass, both blocks must remain within the interval $\\left[\\frac{\\Omega}{2} - \\epsilon, \\frac{\\Omega}{2} + \\epsilon\\right]$ at all times, with tolerance $\\epsilon = 1$. Use the tie-breaking rule that among multiple vertices with equal gain, the vertex with the smallest index is chosen.\n\nStarting from $\\mathcal{P}_0$, perform one FM pass as described above, strictly enforcing the balance constraint, and report the final net-cut cost $C$ of the partition obtained by applying the best-gain prefix of the pass. Express your answer as a single real-valued number. No rounding is required.",
            "solution": "The user wants to find the final net-cut cost after one pass of the Fiduccia-Mattheyses (FM) algorithm on a given hypergraph. I will first validate the problem statement and then proceed with a step-by-step execution of the algorithm.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n-   Hypergraph: $H = (V, \\mathcal{E})$\n-   Vertex set: $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$\n-   Vertex weights: $\\omega(v_1) = 2$, $\\omega(v_2) = 1$, $\\omega(v_3) = 2$, $\\omega(v_4) = 1$, $\\omega(v_5) = 1$, $\\omega(v_6) = 2$.\n-   Net set: $\\mathcal{E} = \\{e_1, e_2, e_3, e_4\\}$\n-   Net weights: $w(e_1) = 2$, $w(e_2) = 1$, $w(e_3) = 3$, $w(e_4) = 2$.\n-   Net connections (pins):\n    -   $e_1 = \\{v_1, v_3, v_5\\}$\n    -   $e_2 = \\{v_1, v_2, v_3\\}$\n    -   $e_3 = \\{v_2, v_4, v_5\\}$\n    -   $e_4 = \\{v_3, v_6\\}$\n-   Initial partition: $\\mathcal{P}_0 = (A, B)$ where $A = \\{v_1, v_2, v_4\\}$ and $B = \\{v_3, v_5, v_6\\}$.\n-   Objective function: Net-cut cost, $C(A,B) = \\sum_{e \\in \\mathcal{E}, |e \\cap A| > 0 \\land |e \\cap B| > 0} w(e)$.\n-   Balance constraint:\n    -   Total vertex weight $\\Omega = \\sum_{v \\in V} \\omega(v)$.\n    -   Tolerance $\\epsilon = 1$.\n    -   Weight of any block $X$ must satisfy $W(X) \\in \\left[\\frac{\\Omega}{2} - \\epsilon, \\frac{\\Omega}{2} + \\epsilon\\right]$.\n-   Algorithm: Single-pass FM.\n-   Tie-breaking rule: Choose the vertex with the smallest index.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem describes a standard application of the Fiduccia-Mattheyses algorithm, a well-established heuristic in the field of Electronic Design Automation (EDA) for VLSI circuit partitioning.\n-   **Scientifically Grounded**: The problem is based on established concepts in graph theory and combinatorial optimization, specifically hypergraph partitioning and the FM algorithm. It is scientifically sound.\n-   **Well-Posed**: The problem is fully specified. It provides the hypergraph structure, all necessary weights, the initial state (partition), a clear objective function, and precise rules for the algorithm's execution, including balance constraints and tie-breaking. This ensures a unique, deterministic sequence of operations.\n-   **Objective**: The language is precise and mathematical, free from any subjective or ambiguous terminology.\n-   The setup is complete and consistent.\n\n**Step 3: Verdict and Action**\nThe problem is valid. I will proceed with the solution.\n\n### Solution\n\n**1. Initial State Analysis**\n\nFirst, we calculate the parameters for the balance constraint.\nThe total vertex weight is:\n$$ \\Omega = \\sum_{i=1}^{6} \\omega(v_i) = \\omega(v_1) + \\omega(v_2) + \\omega(v_3) + \\omega(v_4) + \\omega(v_5) + \\omega(v_6) = 2+1+2+1+1+2 = 9 $$\nThe target block weight is $\\frac{\\Omega}{2} = 4.5$. With a tolerance $\\epsilon = 1$, the allowed weight for each block is in the interval:\n$$ \\left[ \\frac{\\Omega}{2} - \\epsilon, \\frac{\\Omega}{2} + \\epsilon \\right] = [4.5 - 1, 4.5 + 1] = [3.5, 5.5] $$\nNext, we check the initial partition $\\mathcal{P}_0 = (A, B)$ with $A = \\{v_1, v_2, v_4\\}$ and $B = \\{v_3, v_5, v_6\\}$.\nThe initial block weights are:\n$$ W(A) = \\omega(v_1) + \\omega(v_2) + \\omega(v_4) = 2 + 1 + 1 = 4 $$\n$$ W(B) = \\omega(v_3) + \\omega(v_5) + \\omega(v_6) = 2 + 1 + 2 = 5 $$\nSince both $W(A)=4$ and $W(B)=5$ are within the allowed range $[3.5, 5.5]$, the initial partition is balanced.\n\nNow, we calculate the initial net-cut cost, $C(\\mathcal{P}_0)$.\n-   $e_1 = \\{v_1, v_3, v_5\\}$: $v_1 \\in A$; $v_3, v_5 \\in B$. This net is cut.\n-   $e_2 = \\{v_1, v_2, v_3\\}$: $v_1, v_2 \\in A$; $v_3 \\in B$. This net is cut.\n-   $e_3 = \\{v_2, v_4, v_5\\}$: $v_2, v_4 \\in A$; $v_5 \\in B$. This net is cut.\n-   $e_4 = \\{v_3, v_6\\}$: $v_3, v_6 \\in B$. This net is not cut.\nThe initial cut cost is the sum of the weights of the cut nets:\n$$ C(\\mathcal{P}_0) = w(e_1) + w(e_2) + w(e_3) = 2 + 1 + 3 = 6 $$\n\n**2. Initial Gain Calculation**\n\nThe gain $g(v)$ of a vertex $v$ is the reduction in cost if $v$ is moved. For a vertex $v$ in block $X$ moved to block $Y$, the gain is $g(v) = FS(v) - TE(v)$, where $FS(v)$ is the sum of weights of nets that become uncut, and $TE(v)$ is the sum of weights of nets that become cut.\nA net $e$ containing $v$ becomes uncut if $v$ is the only pin of $e$ in block $X$. A net $e$ containing $v$ becomes cut if all other pins of $e$ are in block $X$. Let $n_e(X)$ be the number of pins of net $e$ in block $X$.\nInitial pin distributions: $n_{e_1}(A)=1, n_{e_1}(B)=2$; $n_{e_2}(A)=2, n_{e_2}(B)=1$; $n_{e_3}(A)=2, n_{e_3}(B)=1$; $n_{e_4}(A)=0, n_{e_4}(B)=2$.\n-   $g(v_1)$: $v_1 \\in A$. Net $e_1$ has $n_{e_1}(A)=1$, so moving $v_1$ makes $e_1$ uncut. $FS(v_1) = w(e_1) = 2$. No nets become cut. $TE(v_1) = 0$. Gain $g(v_1) = 2$.\n-   $g(v_2)$: $v_2 \\in A$. Its nets $e_2$ and $e_3$ have $n_{e_2}(A)=2$ and $n_{e_3}(A)=2$. $FS(v_2) = 0, TE(v_2)=0$. Gain $g(v_2) = 0$.\n-   $g(v_3)$: $v_3 \\in B$. Net $e_2$ has $n_{e_2}(B)=1$. $FS(v_3) = w(e_2) = 1$. Net $e_4$ has $n_{e_4}(A)=0$, so moving $v_3$ makes $e_4$ cut. $TE(v_3) = w(e_4)=2$. Gain $g(v_3) = 1 - 2 = -1$.\n-   $g(v_4)$: $v_4 \\in A$. Its net $e_3$ has $n_{e_3}(A)=2$. $FS(v_4)=0, TE(v_4)=0$. Gain $g(v_4) = 0$.\n-   $g(v_5)$: $v_5 \\in B$. Net $e_3$ has $n_{e_3}(B)=1$. $FS(v_5) = w(e_3) = 3$. No nets become cut. $TE(v_5) = 0$. Gain $g(v_5) = 3$.\n-   $g(v_6)$: $v_6 \\in B$. Net $e_4$ has $n_{e_4}(A)=0$. Moving $v_6$ makes it cut. $TE(v_6)=w(e_4)=2$. $FS(v_6)=0$. Gain $g(v_6) = 0 - 2 = -2$.\n\nInitial gains: $g(v_1)=2, g(v_2)=0, g(v_3)=-1, g(v_4)=0, g(v_5)=3, g(v_6)=-2$.\n\n**3. FM Pass Execution**\n\nWe build a sequence of moves, tracking cumulative gain. All vertices are initially unlocked.\n\n**Move 1:**\n-   **Selection**: The vertex with the highest gain is $v_5$ with $g(v_5)=3$.\n-   **Balance Check**: $v_5 \\in B$ has weight $\\omega(v_5)=1$. If moved to $A$, the new weights would be $W(A') = W(A) + \\omega(v_5) = 4+1=5$ and $W(B')=W(B) - \\omega(v_5)=5-1=4$. Both $4$ and $5$ are in $[3.5, 5.5]$, so the move is legal.\n-   **Action**: Move $v_5$ from $B$ to $A$. Lock $v_5$.\n-   **State update**: Gain of move $G_1=3$. Cumulative gain $= 3$. The new partition is $A_1 = \\{v_1, v_2, v_4, v_5\\}, B_1 = \\{v_3, v_6\\}$.\n-   **Gain Updates**: Moving $v_5$ affects gains of its neighbors in nets $e_1$ and $e_3$.\n    -   Net $e_1$ ($n_{e_1}(A)=1, n_{e_1}(B)=2 \\to n'_{e_1}(A)=2, n'_{e_1}(B)=1$):\n        -   $g(v_1)$ decreases by $w(e_1)=2$ (since $v_1$ is no longer the sole pin of $e_1$ in $A$). $g(v_1) \\to 2-2=0$.\n        -   $g(v_3)$ increases by $w(e_1)=2$ (since $v_3$ becomes the sole pin of $e_1$ in $B$). $g(v_3) \\to -1+2=1$.\n    -   Net $e_3$ ($n_{e_3}(A)=2, n_{e_3}(B)=1 \\to n'_{e_3}(A)=3, n'_{e_3}(B)=0$):\n        -   $e_3$ becomes uncut. For its neighbors $v_2, v_4$ in $A$, moving them now would make $e_3$ cut. Their gains decrease by $w(e_3)=3$.\n        -   $g(v_2) \\to 0-3=-3$.\n        -   $g(v_4) \\to 0-3=-3$.\n-   Gains for next step (unlocked vertices $\\{v_1, v_2, v_3, v_4, v_6\\}$): $g(v_1)=0, g(v_2)=-3, g(v_3)=1, g(v_4)=-3, g(v_6)=-2$.\n\n**Move 2:**\n-   **Selection**: Among unlocked vertices, $v_3$ has the highest gain $g(v_3)=1$.\n-   **Balance Check**: $v_3 \\in B_1$ has weight $\\omega(v_3)=2$. Current weights are $W(A_1)=5, W(B_1)=4$. Moving $v_3$ to $A$ would give $W(A') = 5+2=7$, which is outside $[3.5, 5.5]$. The move is illegal.\n-   **Next Candidate**: Next highest gain is $g(v_1)=0$. $v_1 \\in A_1$, $\\omega(v_1)=2$. Moving to $B$ gives $W(A') = 5-2=3$, outside $[3.5, 5.5]$. Illegal.\n-   **Next Candidate**: Next highest gain is $g(v_6)=-2$. $v_6 \\in B_1$, $\\omega(v_6)=2$. Moving to $A$ gives $W(A')=5+2=7$, outside $[3.5, 5.5]$. Illegal.\n-   **Next Candidate**: Next highest gain is $-3$, shared by $v_2$ and $v_4$. By the tie-breaking rule, we select $v_2$ (smaller index).\n-   **Balance Check**: $v_2 \\in A_1$, $\\omega(v_2)=1$. Moving to $B$ gives $W(A') = 5-1=4$ and $W(B')=4+1=5$. Both are in $[3.5, 5.5]$. Legal.\n-   **Action**: Move $v_2$ from $A$ to $B$. Lock $v_2$.\n-   **State update**: Gain of move $G_2=-3$. Cumulative gain $= 3 + (-3) = 0$. The partition is $A_2 = \\{v_1, v_4, v_5\\}, B_2 = \\{v_2, v_3, v_6\\}$.\n\n**Termination**\nAt this point, we could continue the pass by updating gains and selecting the next move. However, let's analyze the legality of any further moves from partition $A_2, B_2$. The weights are $W(A_2) = \\omega(v_1)+\\omega(v_4)+\\omega(v_5) = 2+1+1=4$ and $W(B_2)=\\omega(v_2)+\\omega(v_3)+\\omega(v_6) = 1+2+2=5$.\nThe remaining unlocked vertices are $v_1, v_4 \\in A_2$ and $v_3, v_6 \\in B_2$.\n-   Move $v_1$ ($\\omega=2$) from $A_2 \\to B_2$: $W(A_2')=2$ (illegal), $W(B_2')=7$ (illegal).\n-   Move $v_4$ ($\\omega=1$) from $A_2 \\to B_2$: $W(A_2')=3$ (illegal), $W(B_2')=6$ (illegal).\n-   Move $v_3$ ($\\omega=2$) from $B_2 \\to A_2$: $W(A_2')=6$ (illegal), $W(B_2')=3$ (illegal).\n-   Move $v_6$ ($\\omega=2$) from $B_2 \\to A_2$: $W(A_2')=6$ (illegal), $W(B_2')=3$ (illegal).\nNo legal moves remain. The pass terminates after 2 moves.\n\n**4. Find Best Prefix and Final Cost**\nThe sequence of cumulative gains is:\n-   Start: $0$\n-   After move 1 ($v_5$): $G_1 = 3$\n-   After move 2 ($v_2$): $G_1+G_2 = 3-3=0$\n\nThe maximum cumulative gain is $\\max(3, 0) = 3$, which occurred after the first move. The FM algorithm dictates that we apply only the prefix of the move sequence that achieves this maximum gain. In this case, the prefix consists of just the first move.\n\nThe best partition is obtained by applying only the first move to the initial partition $\\mathcal{P}_0$.\n-   Initial partition: $A_0 = \\{v_1, v_2, v_4\\}, B_0 = \\{v_3, v_5, v_6\\}$.\n-   Move: $v_5$ from $B_0$ to $A_0$.\n-   Final partition $\\mathcal{P}_f$: $A_f = \\{v_1, v_2, v_4, v_5\\}, B_f = \\{v_3, v_6\\}$.\n\nThe final net-cut cost $C_f$ is the initial cost minus the best cumulative gain:\n$$ C_f = C(\\mathcal{P}_0) - \\max_k \\sum_{i=1}^k G_i = 6 - 3 = 3 $$\n\nWe can verify this by calculating the cut cost for $\\mathcal{P}_f$ directly:\n-   $e_1 = \\{v_1, v_3, v_5\\}$: $\\{v_1, v_5\\} \\subset A_f, \\{v_3\\} \\subset B_f$. Cut.\n-   $e_2 = \\{v_1, v_2, v_3\\}$: $\\{v_1, v_2\\} \\subset A_f, \\{v_3\\} \\subset B_f$. Cut.\n-   $e_3 = \\{v_2, v_4, v_5\\}$: All pins are in $A_f$. Not cut.\n-   $e_4 = \\{v_3, v_6\\}$: All pins are in $B_f$. Not cut.\nThe final cut cost is $w(e_1) + w(e_2) = 2 + 1 = 3$.\nThe result is consistent.",
            "answer": "$$\n\\boxed{3}\n$$"
        },
        {
            "introduction": "In contrast to iterative, localized heuristics like FM, spectral methods offer a global perspective on the graph's structure to guide the partitioning process. This exercise delves into the fundamentals of spectral partitioning, using the eigenvector associated with the second-smallest eigenvalue of the graph Laplacian—the Fiedler vector—to bisect a graph. This practice illuminates the powerful connection between linear algebra and combinatorial optimization, demonstrating how matrix properties can reveal the large-scale connectivity of a complex system .",
            "id": "4303713",
            "problem": "Consider a netlist partitioning task in Electronic Design Automation (EDA) for integrated circuits where a small system is abstracted as an undirected weighted graph with nodes representing modules and edge weights representing the number of shared nets. Let the graph have nodes $1, 2, 3, 4$ and weighted edges given by $w_{12} = 2$, $w_{23} = 1$, $w_{34} = 2$, with all other $w_{ij} = 0$. Use the unnormalized (combinatorial) graph Laplacian defined by $L = D - A$, where $A$ is the symmetric weighted adjacency matrix and $D$ is the diagonal degree matrix with $D_{ii} = \\sum_{j} A_{ij}$.\n\nStarting from fundamental definitions of the Laplacian and spectral partitioning, compute the Laplacian $L$, find its second smallest eigenvector (the Fiedler vector), and produce a bisection by thresholding at $0$: assign each node with eigenvector entry strictly greater than $0$ to set $S$ and each node with entry strictly less than $0$ to set $T$. There are no zero entries in this case.\n\nFinally, compute the ratio cut value of the partition, defined as\n$$\\mathrm{RCut}(S,T) = \\frac{\\mathrm{cut}(S,T)}{|S|} + \\frac{\\mathrm{cut}(S,T)}{|T|},$$\nwhere $\\mathrm{cut}(S,T)$ is the sum of weights of edges with one endpoint in $S$ and the other in $T$, and $|S|$ and $|T|$ denote the cardinalities of $S$ and $T$. Express your final answer as a single real number. No rounding is required.",
            "solution": "The problem statement is evaluated as scientifically grounded, well-posed, and objective. It provides a complete and consistent set of definitions and data for a standard problem in spectral graph theory as applied to electronic design automation. Therefore, the problem is valid and a solution will be provided.\n\nThe process involves five main steps:\n1.  Constructing the weighted adjacency matrix $A$ and the degree matrix $D$ from the given graph structure.\n2.  Computing the unnormalized graph Laplacian $L = D - A$.\n3.  Finding the eigenvalues of $L$ to identify the second smallest eigenvalue, $\\lambda_2$.\n4.  Calculating the corresponding eigenvector for $\\lambda_2$, known as the Fiedler vector.\n5.  Partitioning the graph nodes based on the signs of the components of the Fiedler vector and then computing the ratio cut of this partition.\n\n**Step 1: Construct the Adjacency and Degree Matrices**\n\nThe graph has $4$ nodes: $\\{1, 2, 3, 4\\}$. The non-zero edge weights are given as $w_{12} = 2$, $w_{23} = 1$, and $w_{34} = 2$. The graph is undirected, so $w_{ij} = w_{ji}$.\n\nThe weighted adjacency matrix $A$ has entries $A_{ij} = w_{ij}$.\n$$A = \\begin{pmatrix} 0 & 2 & 0 & 0 \\\\ 2 & 0 & 1 & 0 \\\\ 0 & 1 & 0 & 2 \\\\ 0 & 0 & 2 & 0 \\end{pmatrix}$$\n\nThe degree matrix $D$ is a diagonal matrix where each diagonal entry $D_{ii}$ is the degree of node $i$, calculated as the sum of the weights of all edges connected to it: $D_{ii} = d_i = \\sum_j A_{ij}$.\n$d_1 = A_{12} = 2$\n$d_2 = A_{21} + A_{23} = 2 + 1 = 3$\n$d_3 = A_{32} + A_{34} = 1 + 2 = 3$\n$d_4 = A_{43} = 2$\n\nSo, the degree matrix $D$ is:\n$$D = \\begin{pmatrix} 2 & 0 & 0 & 0 \\\\ 0 & 3 & 0 & 0 \\\\ 0 & 0 & 3 & 0 \\\\ 0 & 0 & 0 & 2 \\end{pmatrix}$$\n\n**Step 2: Compute the Laplacian Matrix**\n\nThe unnormalized Laplacian $L$ is defined as $L = D - A$.\n$$L = \\begin{pmatrix} 2 & 0 & 0 & 0 \\\\ 0 & 3 & 0 & 0 \\\\ 0 & 0 & 3 & 0 \\\\ 0 & 0 & 0 & 2 \\end{pmatrix} - \\begin{pmatrix} 0 & 2 & 0 & 0 \\\\ 2 & 0 & 1 & 0 \\\\ 0 & 1 & 0 & 2 \\\\ 0 & 0 & 2 & 0 \\end{pmatrix} = \\begin{pmatrix} 2 & -2 & 0 & 0 \\\\ -2 & 3 & -1 & 0 \\\\ 0 & -1 & 3 & -2 \\\\ 0 & 0 & -2 & 2 \\end{pmatrix}$$\n\n**Step 3: Find the Eigenvalues of the Laplacian**\n\nThe eigenvalues $\\lambda$ are the roots of the characteristic equation $\\det(L - \\lambda I) = 0$.\n$$\\det \\begin{pmatrix} 2-\\lambda & -2 & 0 & 0 \\\\ -2 & 3-\\lambda & -1 & 0 \\\\ 0 & -1 & 3-\\lambda & -2 \\\\ 0 & 0 & -2 & 2-\\lambda \\end{pmatrix} = 0$$\nExpanding along the first row:\n$$(2-\\lambda) \\det \\begin{pmatrix} 3-\\lambda & -1 & 0 \\\\ -1 & 3-\\lambda & -2 \\\\ 0 & -2 & 2-\\lambda \\end{pmatrix} - (-2) \\det \\begin{pmatrix} -2 & -1 & 0 \\\\ 0 & 3-\\lambda & -2 \\\\ 0 & -2 & 2-\\lambda \\end{pmatrix} = 0$$\nLet's compute the two $3 \\times 3$ determinants:\n$\\det_1 = (3-\\lambda)[(3-\\lambda)(2-\\lambda) - (-2)(-1)] - (-1)[(-1)(2-\\lambda) - 0] = (3-\\lambda)(\\lambda^2 - 5\\lambda + 2) - (2-\\lambda) = -\\lambda^3 + 8\\lambda^2 - 16\\lambda + 4$\n$\\det_2 = -2[(3-\\lambda)(2-\\lambda) - (-2)(-1)] = -2(\\lambda^2 - 5\\lambda + 2)$\n\nThe characteristic equation is:\n$(2-\\lambda)(-\\lambda^3 + 8\\lambda^2 - 16\\lambda + 4) + 2(-2(\\lambda^2 - 5\\lambda + 2)) = 0$\n$\\lambda^4 - 10\\lambda^3 + 28\\lambda^2 - 16\\lambda = 0$\n$\\lambda(\\lambda^3 - 10\\lambda^2 + 28\\lambda - 16) = 0$\nOne eigenvalue is $\\lambda_1 = 0$. We find roots of the cubic factor. By inspection, $\\lambda=4$ is a root since $4^3 - 10(4^2) + 28(4) - 16 = 64 - 160 + 112 - 16 = 0$.\nDividing $(\\lambda^3 - 10\\lambda^2 + 28\\lambda - 16)$ by $(\\lambda - 4)$ yields $(\\lambda^2 - 6\\lambda + 4)$.\nThe roots of $\\lambda^2 - 6\\lambda + 4 = 0$ are found using the quadratic formula:\n$\\lambda = \\frac{6 \\pm \\sqrt{36 - 4(1)(4)}}{2} = \\frac{6 \\pm \\sqrt{20}}{2} = 3 \\pm \\sqrt{5}$.\n\nThe four eigenvalues of $L$ in increasing order are:\n$\\lambda_1 = 0$\n$\\lambda_2 = 3 - \\sqrt{5} \\approx 0.764$\n$\\lambda_3 = 4$\n$\\lambda_4 = 3 + \\sqrt{5} \\approx 5.236$\nThe second smallest eigenvalue is $\\lambda_2 = 3 - \\sqrt{5}$.\n\n**Step 4: Find the Fiedler Vector**\n\nThe Fiedler vector $v$ is the eigenvector corresponding to $\\lambda_2 = 3 - \\sqrt{5}$. We solve $(L - \\lambda_2 I)v = 0$.\nLet $v = [v_1, v_2, v_3, v_4]^T$.\n$$(L - (3-\\sqrt{5})I)v = \\begin{pmatrix} 2-(3-\\sqrt{5}) & -2 & 0 & 0 \\\\ -2 & 3-(3-\\sqrt{5}) & -1 & 0 \\\\ 0 & -1 & 3-(3-\\sqrt{5}) & -2 \\\\ 0 & 0 & -2 & 2-(3-\\sqrt{5}) \\end{pmatrix} \\begin{pmatrix} v_1 \\\\ v_2 \\\\ v_3 \\\\ v_4 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{pmatrix}$$\nThis simplifies to:\n$$\\begin{pmatrix} \\sqrt{5}-1 & -2 & 0 & 0 \\\\ -2 & \\sqrt{5} & -1 & 0 \\\\ 0 & -1 & \\sqrt{5} & -2 \\\\ 0 & 0 & -2 & \\sqrt{5}-1 \\end{pmatrix} \\begin{pmatrix} v_1 \\\\ v_2 \\\\ v_3 \\\\ v_4 \\end{pmatrix} = \\begin{pmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{pmatrix}$$\nThis gives the system of linear equations:\n1) $(\\sqrt{5}-1)v_1 - 2v_2 = 0 \\implies v_1 = \\frac{2}{\\sqrt{5}-1}v_2 = \\frac{1+\\sqrt{5}}{2}v_2$\n2) $-2v_1 + \\sqrt{5}v_2 - v_3 = 0$\n3) $-v_2 + \\sqrt{5}v_3 - 2v_4 = 0$\n4) $-2v_3 + (\\sqrt{5}-1)v_4 = 0 \\implies v_4 = \\frac{2}{\\sqrt{5}-1}v_3 = \\frac{1+\\sqrt{5}}{2}v_3$\n\nSubstituting (1) into (2):\n$-2\\left(\\frac{1+\\sqrt{5}}{2}v_2\\right) + \\sqrt{5}v_2 - v_3 = 0$\n$-(1+\\sqrt{5})v_2 + \\sqrt{5}v_2 - v_3 = 0$\n$-v_2 - \\sqrt{5}v_2 + \\sqrt{5}v_2 - v_3 = 0 \\implies -v_2 - v_3 = 0 \\implies v_3 = -v_2$.\n\nNow we have the relationships between all components. If we set $v_2 = 1$:\n$v_2 = 1$\n$v_3 = -1$\n$v_1 = \\frac{1+\\sqrt{5}}{2}$\n$v_4 = \\frac{1+\\sqrt{5}}{2}v_3 = -\\frac{1+\\sqrt{5}}{2}$\n\nThe Fiedler vector is proportional to $\\left[ \\frac{1+\\sqrt{5}}{2}, 1, -1, -\\frac{1+\\sqrt{5}}{2} \\right]^T$.\n\n**Step 5: Partition the Graph and Compute the Ratio Cut**\n\nThe bisection is formed by thresholding the Fiedler vector at $0$.\nThe components of the Fiedler vector are:\n$v_1 = \\frac{1+\\sqrt{5}}{2} > 0$\n$v_2 = 1 > 0$\n$v_3 = -1  0$\n$v_4 = -\\frac{1+\\sqrt{5}}{2}  0$\n\nNodes with positive entries form set $S$, and those with negative entries form set $T$.\n$S = \\{1, 2\\}$\n$T = \\{3, 4\\}$\n\nThe cardinality of the sets are $|S|=2$ and $|T|=2$.\nThe cut value, $\\mathrm{cut}(S,T)$, is the sum of weights of edges connecting a node in $S$ to a node in $T$. The only such edge is $(2,3)$.\n$\\mathrm{cut}(S,T) = w_{23} = 1$.\n\nFinally, we compute the ratio cut value:\n$$\\mathrm{RCut}(S,T) = \\frac{\\mathrm{cut}(S,T)}{|S|} + \\frac{\\mathrm{cut}(S,T)}{|T|}$$\n$$\\mathrm{RCut}(S,T) = \\frac{1}{2} + \\frac{1}{2} = 1$$",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}
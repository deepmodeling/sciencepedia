{
    "hands_on_practices": [
        {
            "introduction": "Understanding the Miller effect begins with its mathematical origin. This first practice guides you through a foundational derivation for a common-source amplifier, starting from first principles like Kirchhoff's laws. By calculating the effective input capacitance, you will directly quantify how a feedback capacitor's value is amplified by the voltage gain of the stage , a crucial insight for analyzing an amplifier's frequency response.",
            "id": "4304453",
            "problem": "Consider a Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) common-source (CS) voltage amplifier stage used in Electronic Design Automation (EDA). The transistor is modeled by its small-signal parameters: transconductance $g_m$, output resistance $r_o$, gate-to-source capacitance $C_{gs}$, and gate-to-drain capacitance $C_{gd}$. The drain is connected to the direct current (DC) supply through a resistor $R_D$, and, for alternating current (AC) analysis, the supply is treated as ground. A resistive load $R_L$ is connected from the drain to ground (representing the input resistance of the next stage). The source is grounded, and the gate is driven by an ideal voltage source with negligible source resistance. Assume linear, time-invariant small-signal behavior and neglect all other parasitic elements.\n\nStarting from the small-signal model and fundamental relations—Ohm’s law, Kirchhoff’s laws, and the capacitor current–voltage relation $i_C = C\\,\\mathrm{d}v/\\mathrm{d}t$—derive the low-frequency voltage gain $A_v = v_o/v_i$ of the CS stage as a function of $R_D$, $R_L$, $g_m$, and $r_o$. Then, using first principles, determine the effective input capacitance $C_{in}$ seen by the source, accounting for both the direct input capacitance $C_{gs}$ and the feedback effect of $C_{gd}$ (Miller effect) via the finite gain $A_v$ and finite load $R_L$.\n\nExpress your final answer as a single, closed-form analytic expression for $C_{in}$ in terms of $R_D$, $R_L$, $g_m$, $r_o$, $C_{gs}$, and $C_{gd}$. No numerical approximation or rounding is required. Do not include units in your final expression.",
            "solution": "The problem statement is subjected to validation.\n\n**Step 1: Extract Givens**\n-   Device: Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) in a common-source (CS) voltage amplifier stage.\n-   Small-signal parameters: transconductance $g_m$, output resistance $r_o$, gate-to-source capacitance $C_{gs}$, and gate-to-drain capacitance $C_{gd}$.\n-   Circuit Topology:\n    -   Drain is connected to a DC supply via resistor $R_D$.\n    -   For AC analysis, the DC supply is treated as ground.\n    -   A resistive load $R_L$ is connected from the drain to ground.\n    -   The source is grounded.\n    -   The gate is driven by an ideal voltage source with negligible source resistance.\n-   Assumptions:\n    -   Linear, time-invariant small-signal behavior.\n    -   All other parasitic elements are neglected.\n-   Fundamental Relations:\n    -   Ohm’s law.\n    -   Kirchhoff’s laws.\n    -   Capacitor current–voltage relation: $i_C = C\\,\\mathrm{d}v/\\mathrm{d}t$.\n-   Task:\n    1.  Derive the low-frequency voltage gain $A_v = v_o/v_i$ as a function of $R_D$, $R_L$, $g_m$, and $r_o$.\n    2.  Determine the effective input capacitance $C_{in}$ by accounting for $C_{gs}$ and the Miller effect of $C_{gd}$.\n-   Final Answer Requirement: A single, closed-form analytic expression for $C_{in}$ in terms of $R_D$, $R_L$, $g_m$, $r_o$, $C_{gs}$, and $C_{gd}$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is scientifically grounded, describing a standard MOSFET common-source amplifier using a well-established small-signal model. The concepts involved—small-signal analysis, Miller effect, Kirchhoff's laws—are fundamental principles of electronics. The problem is well-posed, providing all necessary parameters and a clear objective, leading to a unique, derivable solution. The language is objective and precise. The setup is complete, consistent, and scientifically plausible within the standard model of circuit analysis. It is a non-trivial problem that tests core understanding of amplifier characteristics.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A complete solution will be derived.\n\nThe derivation proceeds in two stages as requested: first, the calculation of the low-frequency voltage gain, and second, the calculation of the effective input capacitance using this gain.\n\n**Part 1: Low-Frequency Voltage Gain ($A_v$)**\nFor low-frequency analysis, all capacitances ($C_{gs}$ and $C_{gd}$) are treated as open circuits, as their impedances, $Z_C = \\frac{1}{j\\omega C}$, are effectively infinite as the frequency $\\omega \\to 0$. The small-signal equivalent circuit consists of the input voltage $v_i$ applied to the gate, a dependent current source $g_m v_{gs}$ from drain to source, and the parallel combination of the transistor's output resistance $r_o$, the drain resistor $R_D$, and the load resistor $R_L$.\n\nSince the source terminal is grounded, the gate-to-source voltage $v_{gs}$ is equal to the input voltage $v_i$.\n$$v_{gs} = v_g - v_s = v_i - 0 = v_i$$\nThe output voltage $v_o$ is taken at the drain node. The resistors $r_o$, $R_D$, and $R_L$ are in parallel, connected between the drain node and AC ground. The total equivalent resistance at the output node, $R_{out}$, is:\n$$R_{out} = r_o \\parallel R_D \\parallel R_L = \\left( \\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L} \\right)^{-1}$$\nAccording to Ohm's law, the output voltage $v_o$ is the product of the total current flowing into the resistive network and the equivalent resistance. The only current source is the dependent current source $g_m v_{gs}$. Its current flows from the drain node towards the source (ground), so it exits the node from the perspective of the output resistors. Therefore, the current flowing *through* the parallel resistors from the node to ground is $g_m v_{gs}$. This creates a voltage drop, so the node voltage is negative.\n$$v_o = - (g_m v_{gs}) R_{out}$$\nSubstituting $v_{gs} = v_i$:\n$$v_o = -g_m v_i R_{out}$$\nThe low-frequency voltage gain $A_v$ is the ratio of $v_o$ to $v_i$:\n$$A_v = \\frac{v_o}{v_i} = -g_m R_{out} = -g_m \\left( r_o \\parallel R_D \\parallel R_L \\right)$$\n$$A_v = -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)$$\n\n**Part 2: Effective Input Capacitance ($C_{in}$)**\nTo find the effective input capacitance, we analyze the full small-signal model including $C_{gs}$ and $C_{gd}$. The input capacitance $C_{in}$ is defined from the input admittance $Y_{in}$ seen by the source, where $Y_{in} = \\frac{I_{in}}{V_i} = j\\omega C_{in}$. We work in the frequency domain, using phasors for voltages ($V_i, V_o$) and currents ($I_{in}$).\n\nThe total input current $I_{in}$ entering the gate node is the sum of the currents through $C_{gs}$ and $C_{gd}$, by Kirchhoff's Current Law (KCL).\n$$I_{in} = I_{C_{gs}} + I_{C_{gd}}$$\nThe current through the gate-to-source capacitor, $I_{C_{gs}}$, is given by the voltage across it, $V_{gs} = V_g - V_s = V_i - 0 = V_i$, divided by its impedance $Z_{C_{gs}} = \\frac{1}{j\\omega C_{gs}}$.\n$$I_{C_{gs}} = \\frac{V_i}{1/(j\\omega C_{gs})} = j\\omega C_{gs} V_i$$\nThe current through the gate-to-drain capacitor, $I_{C_{gd}}$, is given by the voltage across it, $V_{gd} = V_g - V_d = V_i - V_o$, divided by its impedance $Z_{C_{gd}} = \\frac{1}{j\\omega C_{gd}}$.\n$$I_{C_{gd}} = \\frac{V_i - V_o}{1/(j\\omega C_{gd})} = j\\omega C_{gd} (V_i - V_o)$$\nSubstituting these into the KCL equation for $I_{in}$:\n$$I_{in} = j\\omega C_{gs} V_i + j\\omega C_{gd} (V_i - V_o)$$\nTo find the input admittance $Y_{in} = \\frac{I_{in}}{V_i}$, we divide the expression by $V_i$:\n$$Y_{in} = \\frac{I_{in}}{V_i} = j\\omega C_{gs} + j\\omega C_{gd} \\left(1 - \\frac{V_o}{V_i}\\right)$$\nThe ratio $\\frac{V_o}{V_i}$ is the voltage gain. The Miller effect approximation, which is standard for this analysis and implied by the problem's structure, uses the low-frequency gain $A_v$ in this expression.\n$$Y_{in} = j\\omega C_{gs} + j\\omega C_{gd} (1 - A_v)$$\nFactoring out $j\\omega$:\n$$Y_{in} = j\\omega \\left[ C_{gs} + C_{gd} (1 - A_v) \\right]$$\nBy definition, the input admittance is purely capacitive, $Y_{in} = j\\omega C_{in}$. Comparing this with the derived expression, we identify the effective input capacitance $C_{in}$:\n$$C_{in} = C_{gs} + C_{gd} (1 - A_v)$$\nThis equation formalizes the Miller effect: the feedback capacitor $C_{gd}$ appears at the input, multiplied by a factor $(1 - A_v)$. Since $A_v$ is large and negative for a CS amplifier, this term, known as the Miller capacitance, can be significantly larger than $C_{gd}$ itself.\n\nFinally, we substitute the expression for the low-frequency gain $A_v$ that we derived in Part 1 to obtain the final expression for $C_{in}$ in terms of the given circuit parameters.\n$$A_v = -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)$$\n$$C_{in} = C_{gs} + C_{gd} \\left( 1 - \\left[ -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right) \\right] \\right)$$\n$$C_{in} = C_{gs} + C_{gd} \\left( 1 + g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right) \\right)$$\nThis is the closed-form analytic expression for the effective input capacitance.",
            "answer": "$$\n\\boxed{C_{gs} + C_{gd} \\left( 1 + \\frac{g_m}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)}\n$$"
        },
        {
            "introduction": "An amplifier's performance is often judged by its speed, but settling time is a two-part story: large-signal slewing and small-signal linear settling. This exercise bridges the gap between frequency-domain concepts and time-domain reality, asking you to analyze the complete settling response of a Miller-compensated amplifier to a large step input. Mastering this analysis  is essential for designing circuits that meet transient specifications in applications like data converters and sample-and-hold amplifiers.",
            "id": "4304419",
            "problem": "A two-stage Operational Transconductance Amplifier (OTA) is configured as a unity-gain buffer and employs Miller compensation. The OTA has a first-stage transconductance of $g_{m1} = 1.5~\\mathrm{mS}$ and a Miller compensation capacitor of $C_c = 2.0~\\mathrm{pF}$. The second stage bias provides a maximum current of $I_2 = 300~\\mathrm{\\mu A}$ available to charge the compensation capacitor during large-signal transitions. The input is a rising step of amplitude $V_{\\text{step}} = 1.0~\\mathrm{V}$ applied at $t=0$, with $v_o(0^{-}) = 0$.\n\nAssume the following physically justified modeling conditions:\n- Due to the Miller effect, the closed-loop response under unity-gain feedback is dominated by a single real pole set by the interaction of $g_{m1}$ and $C_c$. Use small-signal linearization and the charge-voltage relation $i = C \\,\\frac{dv}{dt}$ to relate the closed-loop time constant to $g_{m1}$ and $C_c$.\n- During the initial large-signal portion, the slew is limited because at most the current $I_2$ can be driven into the Miller capacitor, so the slew rate is $\\mathrm{SR} = \\frac{I_2}{C_c}$.\n- After the large-signal phase, the amplifier exits slew limitation and settles linearly as a first-order system toward $V_{\\text{step}}$.\n\nUsing only these bases, and starting from first principles, perform the following:\n1. Determine the transition time $t_{\\mathrm{tr}}$ at which the output moves from slew-limited behavior to small-signal linear settling by matching the required small-signal slope to the available slew rate.\n2. Derive the total settling time $t_s$ required to reach a specified relative accuracy $\\epsilon = 1.0 \\times 10^{-4}$, defined by the condition $\\frac{|V_{\\text{step}} - v_o(t_s)|}{V_{\\text{step}}} \\le \\epsilon$.\n\nExpress the final reported answer $t_s$ in microseconds and round your final numeric value to four significant figures. Do not include units in the boxed final answer.",
            "solution": "The problem statement is evaluated to be valid as it is scientifically grounded, well-posed, and objective. It describes a standard scenario in analog integrated circuit analysis—the settling behavior of a Miller-compensated OTA—using physically justified and standard modeling approximations. All necessary parameters are provided, and the problem is free of contradictions or ambiguities.\n\nThe total settling time of the amplifier is the sum of two distinct phases: an initial slew-limited phase (a large-signal phenomenon) and a final linear settling phase (a small-signal phenomenon). We will analyze each phase to determine the total time $t_s$.\n\nFirst, we define the key parameters of the system based on the givens.\nThe first-stage transconductance is $g_{m1} = 1.5 \\times 10^{-3}~\\mathrm{S}$.\nThe Miller compensation capacitor is $C_c = 2.0 \\times 10^{-12}~\\mathrm{F}$.\nThe maximum charging current for the second stage is $I_2 = 300~\\mathrm{\\mu A} = 3.0 \\times 10^{-4}~\\mathrm{A}$.\nThe input step voltage is $V_{\\text{step}} = 1.0~\\mathrm{V}$.\nThe settling accuracy required is $\\epsilon = 1.0 \\times 10^{-4}$.\n\nThe analysis proceeds in three parts:\n1.  Characterization of the slew-limited and linear regions.\n2.  Determination of the transition point between these two regions.\n3.  Calculation of the total time to settle to the specified accuracy.\n\nDuring the initial phase, the large input step causes the first stage of the OTA to saturate, providing a constant maximum current to charge the Miller capacitor $C_c$. The problem states that this current is limited by the second stage bias, $I_2$. The rate of change of the output voltage, or slew rate ($\\mathrm{SR}$), is therefore given by:\n$$\n\\mathrm{SR} = \\frac{I_2}{C_c}\n$$\nSubstituting the given values:\n$$\n\\mathrm{SR} = \\frac{3.0 \\times 10^{-4}~\\mathrm{A}}{2.0 \\times 10^{-12}~\\mathrm{F}} = 1.5 \\times 10^8~\\mathrm{V/s}\n$$\nDuring this phase, the output voltage $v_o(t)$ increases linearly with time from its initial value of $v_o(0)=0$:\n$$\nv_o(t) = \\mathrm{SR} \\cdot t \\quad (\\text{for } t \\le t_{\\mathrm{tr}})\n$$\n\nAfter the initial slewing, the amplifier enters the linear settling region. The problem specifies that the closed-loop response is dominated by a single real pole. For a Miller-compensated OTA in a unity-gain configuration, the closed-loop bandwidth is approximately equal to the unity-gain frequency of the OTA, $\\omega_T$. The unity-gain frequency is determined by the ratio of the first-stage transconductance to the Miller capacitance: $\\omega_T \\approx g_{m1}/C_c$. The time constant $\\tau$ of the first-order system is the reciprocal of the pole frequency:\n$$\n\\tau = \\frac{1}{\\omega_T} = \\frac{C_c}{g_{m1}}\n$$\nSubstituting the given values:\n$$\n\\tau = \\frac{2.0 \\times 10^{-12}~\\mathrm{F}}{1.5 \\times 10^{-3}~\\mathrm{S}} = \\frac{4}{3} \\times 10^{-9}~\\mathrm{s}\n$$\n\nThe transition from the slew-limited region to the linear settling region occurs at a time $t_{\\mathrm{tr}}$ and output voltage $v_o(t_{\\mathrm{tr}}) = v_{\\mathrm{tr}}$. This transition happens when the required slope for linear settling becomes equal to the slew rate. In the linear region, the output voltage $v_o(t)$ approaches the final value $V_{\\text{step}}$ exponentially, governed by the differential equation $\\tau \\frac{dv_o}{dt} + v_o = V_{\\text{step}}$. The instantaneous slope is thus $\\frac{dv_o}{dt} = \\frac{V_{\\text{step}} - v_o(t)}{\\tau}$. The amplifier can sustain this slope as long as it is less than or equal to the slew rate. The transition point is where the required slope equals the maximum available slew rate:\n$$\n\\mathrm{SR} = \\frac{V_{\\text{step}} - v_{\\mathrm{tr}}}{\\tau}\n$$\nWe can solve for the output voltage at the transition point, $v_{\\mathrm{tr}}$:\n$$\nv_{\\mathrm{tr}} = V_{\\text{step}} - \\mathrm{SR} \\cdot \\tau\n$$\nSubstituting the expressions for $\\mathrm{SR}$ and $\\tau$:\n$$\nv_{\\mathrm{tr}} = V_{\\text{step}} - \\left(\\frac{I_2}{C_c}\\right) \\left(\\frac{C_c}{g_{m1}}\\right) = V_{\\text{step}} - \\frac{I_2}{g_{m1}}\n$$\nNumerically:\n$$\nv_{\\mathrm{tr}} = 1.0~\\mathrm{V} - \\frac{3.0 \\times 10^{-4}~\\mathrm{A}}{1.5 \\times 10^{-3}~\\mathrm{S}} = 1.0~\\mathrm{V} - 0.2~\\mathrm{V} = 0.8~\\mathrm{V}\n$$\nThe transition time $t_{\\mathrm{tr}}$ is the time it takes for the output to slew from $0$ to $v_{\\mathrm{tr}}$:\n$$\nt_{\\mathrm{tr}} = \\frac{v_{\\mathrm{tr}}}{\\mathrm{SR}} = \\frac{0.8~\\mathrm{V}}{1.5 \\times 10^8~\\mathrm{V/s}} = \\frac{16}{3} \\times 10^{-9}~\\mathrm{s}\n$$\nThis completes the determination of the transition time $t_{\\mathrm{tr}}$.\n\nFor $t > t_{\\mathrm{tr}}$, the output voltage exponentially settles towards $V_{\\text{step}}$ from its value at the transition point, $v_{\\mathrm{tr}}$. The expression for $v_o(t)$ in this region is:\n$$\nv_o(t) = V_{\\text{step}} + (v_{\\mathrm{tr}} - V_{\\text{step}}) \\exp\\left(-\\frac{t - t_{\\mathrm{tr}}}{\\tau}\\right)\n$$\nThe settling time $t_s$ is reached when the relative error of the output voltage is less than or equal to $\\epsilon$:\n$$\n\\frac{|V_{\\text{step}} - v_o(t_s)|}{V_{\\text{step}}} \\le \\epsilon\n$$\nSubstituting the expression for $v_o(t_s)$:\n$$\n\\frac{|V_{\\text{step}} - \\left(V_{\\text{step}} + (v_{\\mathrm{tr}} - V_{\\text{step}}) \\exp\\left(-\\frac{t_s - t_{\\mathrm{tr}}}{\\tau}\\right)\\right)|}{V_{\\text{step}}} \\le \\epsilon\n$$\n$$\n\\frac{|-(v_{\\mathrm{tr}} - V_{\\text{step}})| \\exp\\left(-\\frac{t_s - t_{\\mathrm{tr}}}{\\tau}\\right)}{V_{\\text{step}}} \\le \\epsilon\n$$\nSince $v_{\\mathrm{tr}} < V_{\\text{step}}$, this simplifies to:\n$$\n\\frac{(V_{\\text{step}} - v_{\\mathrm{tr}}) \\exp\\left(-\\frac{t_s - t_{\\mathrm{tr}}}{\\tau}\\right)}{V_{\\text{step}}} \\le \\epsilon\n$$\nWe previously found that $V_{\\text{step}} - v_{\\mathrm{tr}} = I_2/g_{m1}$. Substituting this into the inequality:\n$$\n\\frac{(I_2/g_{m1}) \\exp\\left(-\\frac{t_s - t_{\\mathrm{tr}}}{\\tau}\\right)}{V_{\\text{step}}} \\le \\epsilon\n$$\nTo find the minimum time $t_s$, we solve the equality:\n$$\n\\exp\\left(-\\frac{t_s - t_{\\mathrm{tr}}}{\\tau}\\right) = \\frac{\\epsilon V_{\\text{step}} g_{m1}}{I_2}\n$$\nTaking the natural logarithm of both sides:\n$$\n-\\frac{t_s - t_{\\mathrm{tr}}}{\\tau} = \\ln\\left(\\frac{\\epsilon V_{\\text{step}} g_{m1}}{I_2}\\right)\n$$\n$$\nt_s - t_{\\mathrm{tr}} = -\\tau \\ln\\left(\\frac{\\epsilon V_{\\text{step}} g_{m1}}{I_2}\\right) = \\tau \\ln\\left(\\frac{I_2}{\\epsilon V_{\\text{step}} g_{m1}}\\right)\n$$\nThe total settling time $t_s$ is therefore:\n$$\nt_s = t_{\\mathrm{tr}} + \\tau \\ln\\left(\\frac{I_2}{\\epsilon V_{\\text{step}} g_{m1}}\\right)\n$$\nWe now substitute the expressions and values for each term.\n$$\nt_s = \\frac{16}{3} \\times 10^{-9}~\\mathrm{s} + \\left(\\frac{4}{3} \\times 10^{-9}~\\mathrm{s}\\right) \\ln\\left(\\frac{3.0 \\times 10^{-4}~\\mathrm{A}}{(1.0 \\times 10^{-4})(1.0~\\mathrm{V})(1.5 \\times 10^{-3}~\\mathrm{S})}\\right)\n$$\n$$\nt_s = \\frac{16}{3} \\times 10^{-9}~\\mathrm{s} + \\left(\\frac{4}{3} \\times 10^{-9}~\\mathrm{s}\\right) \\ln\\left(\\frac{3.0 \\times 10^{-4}}{1.5 \\times 10^{-7}}\\right)\n$$\n$$\nt_s = \\frac{16}{3} \\times 10^{-9}~\\mathrm{s} + \\left(\\frac{4}{3} \\times 10^{-9}~\\mathrm{s}\\right) \\ln(2000)\n$$\nThe value of $\\ln(2000)$ is approximately $7.600902$.\n$$\nt_s \\approx \\left(5.333333 \\times 10^{-9}\\right) + \\left(\\frac{4}{3} \\times 10^{-9} \\times 7.600902\\right)~\\mathrm{s}\n$$\n$$\nt_s \\approx (5.333333 \\times 10^{-9}) + (10.134536 \\times 10^{-9})~\\mathrm{s} \\approx 15.467869 \\times 10^{-9}~\\mathrm{s}\n$$\nThe problem requires the final answer in microseconds, rounded to four significant figures.\n$$\nt_s \\approx 1.5467869 \\times 10^{-8}~\\mathrm{s} = 0.015467869~\\mathrm{\\mu s}\n$$\nRounding to four significant figures gives $0.01547~\\mathrm{\\mu s}$.",
            "answer": "$$\n\\boxed{0.01547}\n$$"
        },
        {
            "introduction": "Beyond bandwidth and settling time, a critical trade-off in amplifier design involves thermal noise. This practice explores the subtle but profound relationship between bandwidth, transconductance, and total integrated noise in a closed-loop system. By deriving the input-referred root-mean-square (RMS) noise voltage, you will uncover the fundamental '$kT/C$' noise limit , revealing that for a given compensation capacitance, simply increasing power to boost bandwidth does not reduce the total noise.",
            "id": "4304479",
            "problem": "An operational transconductance amplifier (OTA) with transconductance $g_{m}$ is used as the forward gain element in a unity-gain voltage follower. The amplifier is internally Miller-compensated by a capacitor $C_{c}$ connected across a high-gain node such that the Miller effect enforces a dominant single pole. Assume the loop has sufficiently high direct current (DC) gain so that the closed-loop transfer function is well-approximated by a first-order low-pass with unity DC gain. The OTA is biased from a fixed power budget and temperature such that $g_{m}$ can be increased only by reallocating bias current within the fixed power constraint. The OTA’s input-referred thermal noise is dominated by transconductor channel noise, modeled as a white noise voltage source with one-sided power spectral density $S_{v,\\text{in}}(f)=\\frac{4 k_{B} T \\gamma}{g_{m}}$, where $k_{B}$ is the Boltzmann constant, $T$ is the absolute temperature, and $\\gamma$ is the excess noise factor of the transconductor.\n\nStarting only from the defining relations of a capacitor and a transconductor, namely $i_{C}=C \\frac{dv}{dt}$ and $i_{g_{m}}=g_{m} v$, and treating the Miller-compensation capacitor $C_{c}$ as the capacitor that sets the dominant pole of the closed-loop follower, perform the following:\n\n- Derive the closed-loop cutoff frequency $f_{c}$ of the unity-gain follower in terms of $g_{m}$ and $C_{c}$.\n- Derive the equivalent noise bandwidth (defined as the integral of the squared magnitude of the closed-loop transfer function over frequency, normalized by the squared DC gain) of this first-order low-pass.\n- Using the given white input-referred thermal noise spectral density $S_{v,\\text{in}}(f)$ and the equivalent noise bandwidth you derived, obtain a closed-form expression for the input-referred root-mean-square (RMS) thermal noise voltage integrated from $f=0$ to $f=\\infty$.\n\nYour final expression must be in terms of $k_{B}$, $T$, $\\gamma$, and $C_{c}$ only, and it must explicitly demonstrate the noise–bandwidth trade-off that arises when $g_{m}$ is increased to raise gain–bandwidth under a fixed power budget. Express the final RMS noise voltage in volts. Do not introduce numerical approximations or additional parameters. The final answer must be a single closed-form analytical expression.",
            "solution": "The problem requires the derivation of the input-referred root-mean-square (RMS) thermal noise voltage for a unity-gain voltage follower built with an operational transconductance amplifier (OTA). The problem is deemed valid as it is scientifically grounded in standard analog circuit theory, is well-posed with sufficient information, and is expressed objectively. We will proceed with the solution by following the three requested derivation steps.\n\nFirst, we derive the closed-loop cutoff frequency, $f_{c}$. The OTA is described by its transconductance, $g_{m}$, and the fundamental relation for its output current is $i_{g_{m}} = g_{m} v_{in,diff}$, where $v_{in,diff}$ is the differential input voltage. The amplifier is in a unity-gain follower configuration, meaning the output voltage, $v_{out}$, is fed back directly to the inverting input. The system input voltage, $v_{in}$, is applied to the non-inverting input. Therefore, the differential input voltage is $v_{in,diff} = v_{in} - v_{out}$.\n\nThe problem states that the Miller-compensation capacitor, $C_{c}$, sets the dominant pole. The output current of the transconductor, $i_{g_{m}}$, drives this capacitive load. Using the defining relation for a capacitor, $i_{C} = C \\frac{dv}{dt}$, the current into $C_{c}$ is $i_{C_{c}} = C_{c} \\frac{dv_{out}}{dt}$.\nEquating the currents, $i_{g_{m}} = i_{C_{c}}$, we have:\n$$g_{m} (v_{in} - v_{out}) = C_{c} \\frac{dv_{out}}{dt}$$\nTo find the transfer function, we move to the Laplace domain, where $\\frac{d}{dt}$ is replaced by the complex frequency variable $s$. The equation becomes:\n$$g_{m} (V_{in}(s) - V_{out}(s)) = s C_{c} V_{out}(s)$$\nWe can rearrange this to solve for the closed-loop transfer function, $H(s) = \\frac{V_{out}(s)}{V_{in}(s)}$:\n$$g_{m} V_{in}(s) = (s C_{c} + g_{m}) V_{out}(s)$$\n$$H(s) = \\frac{V_{out}(s)}{V_{in}(s)} = \\frac{g_{m}}{s C_{c} + g_{m}} = \\frac{\\frac{g_{m}}{C_{c}}}{s + \\frac{g_{m}}{C_{c}}}$$\nThis is the transfer function of a first-order low-pass filter, which aligns with the problem statement. The direct current (DC) gain is found by setting $s=0$, which gives $H(0)=1$, confirming unity DC gain. The pole of this system is located at $s = -\\frac{g_{m}}{C_{c}}$. The cutoff frequency, $\\omega_{c}$, is the magnitude of the pole's location, $\\omega_{c} = \\frac{g_{m}}{C_{c}}$. The cutoff frequency in Hertz, $f_{c}$, is related by $\\omega_{c} = 2\\pi f_{c}$.\nTherefore, the closed-loop cutoff frequency is:\n$$f_{c} = \\frac{\\omega_{c}}{2\\pi} = \\frac{g_{m}}{2\\pi C_{c}}$$\n\nSecond, we derive the equivalent noise bandwidth (ENBW). The ENBW is defined as the integral of the squared magnitude of the closed-loop transfer function over frequency, normalized by the squared DC gain. Here, the DC gain $H(0)$ is $1$.\n$$\\text{ENBW} = \\frac{1}{|H(0)|^{2}} \\int_{0}^{\\infty} |H(f)|^{2} df = \\int_{0}^{\\infty} |H(f)|^{2} df$$\nTo find $|H(f)|^{2}$, we substitute $s = j\\omega = j2\\pi f$ into $H(s)$:\n$$H(j\\omega) = \\frac{\\omega_{c}}{j\\omega + \\omega_{c}}$$\nThe squared magnitude is:\n$$|H(j\\omega)|^{2} = |H(f)|^{2} = \\left| \\frac{\\omega_{c}}{j\\omega + \\omega_{c}} \\right|^{2} = \\frac{\\omega_{c}^{2}}{\\omega^{2} + \\omega_{c}^{2}} = \\frac{(2\\pi f_{c})^{2}}{(2\\pi f)^{2} + (2\\pi f_{c})^{2}} = \\frac{f_{c}^{2}}{f^{2} + f_{c}^{2}}$$\nNow, we calculate the integral for the ENBW:\n$$\\text{ENBW} = \\int_{0}^{\\infty} \\frac{f_{c}^{2}}{f^{2} + f_{c}^{2}} df$$\nThis is a standard integral. We can evaluate it as:\n$$\\text{ENBW} = f_{c}^{2} \\left[ \\frac{1}{f_{c}} \\arctan\\left(\\frac{f}{f_{c}}\\right) \\right]_{0}^{\\infty} = f_{c} \\left( \\lim_{f \\to \\infty} \\arctan\\left(\\frac{f}{f_{c}}\\right) - \\arctan(0) \\right)$$\n$$\\text{ENBW} = f_{c} \\left( \\frac{\\pi}{2} - 0 \\right) = \\frac{\\pi}{2} f_{c}$$\nSubstituting the expression for $f_{c}$:\n$$\\text{ENBW} = \\frac{\\pi}{2} \\left( \\frac{g_{m}}{2\\pi C_{c}} \\right) = \\frac{g_{m}}{4 C_{c}}$$\n\nThird, we derive the input-referred RMS thermal noise voltage, $v_{n,\\text{rms}}$. The total output-referred noise power (mean-square voltage) is the integral of the input-referred noise power spectral density, $S_{v,\\text{in}}(f)$, shaped by the squared magnitude of the system's transfer function, $|H(f)|^{2}$.\n$$v_{n,\\text{out}}^{2} = \\int_{0}^{\\infty} S_{v,\\text{in}}(f) |H(f)|^{2} df$$\nThe problem states that the input-referred noise is a white noise source with one-sided power spectral density $S_{v,\\text{in}}(f) = \\frac{4 k_{B} T \\gamma}{g_{m}}$, where $k_{B}$ is the Boltzmann constant, $T$ is the absolute temperature, and $\\gamma$ is the excess noise factor. Since $S_{v,\\text{in}}(f)$ is constant with frequency, we can take it out of the integral:\n$$v_{n,\\text{out}}^{2} = S_{v,\\text{in}} \\int_{0}^{\\infty} |H(f)|^{2} df = S_{v,\\text{in}} \\cdot \\text{ENBW}$$\nSince the closed-loop DC gain is unity, the output-referred noise power is equal to the total integrated input-referred noise power, $v_{n,\\text{rms}}^{2}$.\n$$v_{n,\\text{rms}}^{2} = v_{n,\\text{out}}^{2} = S_{v,\\text{in}} \\cdot \\text{ENBW}$$\nSubstituting the expressions for $S_{v,\\text{in}}$ and ENBW:\n$$v_{n,\\text{rms}}^{2} = \\left( \\frac{4 k_{B} T \\gamma}{g_{m}} \\right) \\left( \\frac{g_{m}}{4 C_{c}} \\right)$$\nThe transconductance $g_{m}$ and the factor of $4$ cancel out, which explicitly demonstrates the trade-off. Increasing $g_{m}$ increases bandwidth (ENBW $\\propto g_{m}$) but decreases the noise spectral density ($S_{v,\\text{in}} \\propto 1/g_{m}$). The product, which gives the total integrated noise power, becomes independent of $g_{m}$.\n$$v_{n,\\text{rms}}^{2} = \\frac{k_{B} T \\gamma}{C_{c}}$$\nThe RMS noise voltage is the square root of this value.\n$$v_{n,\\text{rms}} = \\sqrt{\\frac{k_{B} T \\gamma}{C_{c}}}$$\nThis celebrated result, often called \"$kT/C$\" noise (up to a factor $\\gamma$), shows that for a first-order system dominated by transconductor thermal noise, the total integrated noise is determined not by the transconductance or bandwidth itself, but by the capacitance that sets the bandwidth, along with temperature and device noise characteristics. The final expression is in terms of the required parameters $k_{B}$, $T$, $\\gamma$, and $C_{c}$.",
            "answer": "$$\\boxed{\\sqrt{\\frac{k_{B} T \\gamma}{C_{c}}}}$$"
        }
    ]
}
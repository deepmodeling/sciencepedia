{
    "hands_on_practices": [
        {
            "introduction": "在我们深入探讨复杂的设计权衡之前，我们必须首先掌握基本原理。这个练习 () 要求你从第一性原理出发，推导一个标准共源放大器级的等效输入电容。通过这个过程，你将清晰地看到放大器的电压增益如何直接“放大”栅-漏极间的反馈电容，从而为理解密勒效应对带宽的限制作用奠定坚实的数学基础。",
            "id": "4304453",
            "problem": "考虑一个用于电子设计自动化（EDA）的金属-氧化物-半导体场效应晶体管（MOSFET）共源（CS）电压放大器级。该晶体管由其小信号参数建模：跨导 $g_m$、输出电阻 $r_o$、栅源电容 $C_{gs}$ 和栅漏电容 $C_{gd}$。漏极通过一个电阻 $R_D$ 连接到直流（DC）电源，在交流（AC）分析中，该电源被视作接地。一个阻性负载 $R_L$ 从漏极连接到地（代表下一级的输入电阻）。源极接地，栅极由一个内阻可忽略的理想电压源驱动。假设线性的、时不变的小信号行为，并忽略所有其他寄生元件。\n\n从该小信号模型和基本关系——Ohm 定律、Kirchhoff 定律以及电容的电流-电压关系 $i_C = C\\,\\mathrm{d}v/\\mathrm{d}t$——出发，推导该共源级的低频电压增益 $A_v = v_o/v_i$，将其表示为 $R_D$、$R_L$、$g_m$ 和 $r_o$ 的函数。然后，使用第一性原理，确定从信号源看进去的有效输入电容 $C_{in}$，需要考虑直接输入电容 $C_{gs}$ 和通过有限增益 $A_v$ 及有限负载 $R_L$ 产生的 $C_{gd}$ 的反馈效应（Miller 效应）。\n\n将你的最终答案表示为一个关于 $R_D$、$R_L$、$g_m$、$r_o$、$C_{gs}$ 和 $C_{gd}$ 的单一、闭式解析表达式。不需要数值近似或四舍五入。最终表达式中不要包含单位。",
            "solution": "对问题陈述进行验证。\n\n**步骤1：提取已知条件**\n-   器件：金属-氧化物-半导体场效应晶体管（MOSFET）构成的共源（CS）电压放大器级。\n-   小信号参数：跨导 $g_m$、输出电阻 $r_o$、栅源电容 $C_{gs}$ 和栅漏电容 $C_{gd}$。\n-   电路拓扑：\n    -   漏极通过电阻 $R_D$ 连接到直流电源。\n    -   对于交流分析，直流电源被视为接地。\n    -   一个阻性负载 $R_L$ 从漏极连接到地。\n    -   源极接地。\n    -   栅极由一个内阻可忽略的理想电压源驱动。\n-   假设：\n    -   线性的、时不变的小信号行为。\n    -   所有其他寄生元件均被忽略。\n-   基本关系：\n    -   Ohm 定律。\n    -   Kirchhoff 定律。\n    -   电容的电流-电压关系：$i_C = C\\,\\mathrm{d}v/\\mathrm{d}t$。\n-   任务：\n    1.  推导低频电压增益 $A_v = v_o/v_i$，将其表示为 $R_D$、$R_L$、$g_m$ 和 $r_o$ 的函数。\n    2.  通过考虑 $C_{gs}$ 和 $C_{gd}$ 的 Miller 效应，确定有效输入电容 $C_{in}$。\n-   最终答案要求：一个关于 $R_D$、$R_L$、$g_m$、$r_o$、$C_{gs}$ 和 $C_{gd}$ 的单一、闭式解析表达式。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题具有科学依据，描述了一个标准的 MOSFET 共源放大器，使用了成熟的小信号模型。所涉及的概念——小信号分析、Miller 效应、Kirchhoff 定律——都是电子学的基本原理。该问题提法明确，提供了所有必需的参数和一个清晰的目标，可以导出一个唯一、可推导的解。语言客观且精确。在标准电路分析模型中，该设定是完整、一致且科学上合理的。这是一个非平凡的问题，考验了对放大器特性的核心理解。\n\n**步骤3：结论与行动**\n该问题有效。将推导一个完整的解。\n\n推导过程按要求分两个阶段进行：首先，计算低频电压增益；其次，利用该增益计算有效输入电容。\n\n**第1部分：低频电压增益 ($A_v$)**\n对于低频分析，所有电容（$C_{gs}$ 和 $C_{gd}$）都被视作开路，因为当频率 $\\omega \\to 0$ 时，它们的阻抗 $Z_C = \\frac{1}{j\\omega C}$ 实际上是无穷大。小信号等效电路由施加到栅极的输入电压 $v_i$、一个从漏极到源极的受控电流源 $g_m v_{gs}$，以及晶体管输出电阻 $r_o$、漏极电阻 $R_D$ 和负载电阻 $R_L$ 的并联组合构成。\n\n由于源极端接地，栅源电压 $v_{gs}$ 等于输入电压 $v_i$。\n$$v_{gs} = v_g - v_s = v_i - 0 = v_i$$\n输出电压 $v_o$ 在漏极节点处取得。电阻 $r_o$、$R_D$ 和 $R_L$ 并联，连接在漏极节点和交流地之间。输出节点的总等效电阻 $R_{out}$ 为：\n$$R_{out} = r_o \\parallel R_D \\parallel R_L = \\left( \\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L} \\right)^{-1}$$\n根据 Ohm 定律，输出电压 $v_o$ 是流入电阻网络总电流与等效电阻的乘积。唯一的电流源是受控电流源 $g_m v_{gs}$。其电流从漏极节点流向源极（地），因此从输出电阻的角度看，它是流出该节点的。因此，从该节点流向地的、*流经*并联电阻的电流是 $g_m v_{gs}$。这会产生一个电压降，所以节点电压为负。\n$$v_o = - (g_m v_{gs}) R_{out}$$\n代入 $v_{gs} = v_i$：\n$$v_o = -g_m v_i R_{out}$$\n低频电压增益 $A_v$ 是 $v_o$ 与 $v_i$ 的比值：\n$$A_v = \\frac{v_o}{v_i} = -g_m R_{out} = -g_m \\left( r_o \\parallel R_D \\parallel R_L \\right)$$\n$$A_v = -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)$$\n\n**第2部分：有效输入电容 ($C_{in}$)**\n为了求得有效输入电容，我们分析包含 $C_{gs}$ 和 $C_{gd}$ 的完整小信号模型。输入电容 $C_{in}$ 由从信号源看进去的输入导纳 $Y_{in}$ 定义，其中 $Y_{in} = \\frac{I_{in}}{V_i} = j\\omega C_{in}$。我们在频域中进行分析，使用相量表示电压（$V_i, V_o$）和电流（$I_{in}$）。\n\n根据 Kirchhoff 电流定律（KCL），流入栅极节点的总输入电流 $I_{in}$ 是流经 $C_{gs}$ 和 $C_{gd}$ 的电流之和。\n$$I_{in} = I_{C_{gs}} + I_{C_{gd}}$$\n流经栅源电容的电流 $I_{C_{gs}}$ 由其两端电压 $V_{gs} = V_g - V_s = V_i - 0 = V_i$ 除以其阻抗 $Z_{C_{gs}} = \\frac{1}{j\\omega C_{gs}}$ 得到。\n$$I_{C_{gs}} = \\frac{V_i}{1/(j\\omega C_{gs})} = j\\omega C_{gs} V_i$$\n流经栅漏电容的电流 $I_{C_{gd}}$ 由其两端电压 $V_{gd} = V_g - V_d = V_i - V_o$ 除以其阻抗 $Z_{C_{gd}} = \\frac{1}{j\\omega C_{gd}}$ 得到。\n$$I_{C_{gd}} = \\frac{V_i - V_o}{1/(j\\omega C_{gd})} = j\\omega C_{gd} (V_i - V_o)$$\n将这些代入 $I_{in}$ 的 KCL 方程：\n$$I_{in} = j\\omega C_{gs} V_i + j\\omega C_{gd} (V_i - V_o)$$\n为了求得输入导纳 $Y_{in} = \\frac{I_{in}}{V_i}$，我们将该表达式除以 $V_i$：\n$$Y_{in} = \\frac{I_{in}}{V_i} = j\\omega C_{gs} + j\\omega C_{gd} \\left(1 - \\frac{V_o}{V_i}\\right)$$\n比值 $\\frac{V_o}{V_i}$ 是电压增益。Miller 效应近似法是此类分析的标准方法，并且由问题的结构所暗示，它在该表达式中使用低频增益 $A_v$。\n$$Y_{in} = j\\omega C_{gs} + j\\omega C_{gd} (1 - A_v)$$\n提出因子 $j\\omega$：\n$$Y_{in} = j\\omega \\left[ C_{gs} + C_{gd} (1 - A_v) \\right]$$\n根据定义，输入导纳是纯容性的，$Y_{in} = j\\omega C_{in}$。将此与推导出的表达式进行比较，我们确定有效输入电容 $C_{in}$ 为：\n$$C_{in} = C_{gs} + C_{gd} (1 - A_v)$$\n这个方程将 Miller 效应形式化：反馈电容 $C_{gd}$ 在输入端表现为一个被因子 $(1 - A_v)$ 乘大的电容。由于对于共源放大器，$A_v$ 是一个大的负数，这个被称为 Miller 电容的项可以显著大于 $C_{gd}$ 本身。\n\n最后，我们将第1部分中推导出的低频增益 $A_v$ 的表达式代入，以获得关于给定电路参数的 $C_{in}$ 的最终表达式。\n$$A_v = -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)$$\n$$C_{in} = C_{gs} + C_{gd} \\left( 1 - \\left[ -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right) \\right] \\right)$$\n$$C_{in} = C_{gs} + C_{gd} \\left( 1 + g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right) \\right)$$\n这就是有效输入电容的闭式解析表达式。",
            "answer": "$$\n\\boxed{C_{gs} + C_{gd} \\left( 1 + \\frac{g_m}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)}\n$$"
        },
        {
            "introduction": "在量化了密勒效应之后，我们来研究其在多级放大器频率补偿中的一个更高级的应用和挑战。虽然密勒补偿能够有效地进行主极点分离，但它也会通过电容的前馈路径引入一个通常会损害稳定性的右半平面 (Right-Half Plane, RHP) 零点。本练习 () 引导你推导这个零点的位置，并分析如何通过串联一个“零点消除电阻”来主动控制其位置，这是现代高速放大器设计中一项至关重要的技术。",
            "id": "4304462",
            "problem": "考虑一个级联电压放大器，其第一级为高增益跨导器，馈入第二级共源级。该放大器通过一个串联的电阻-电容网络进行频率补偿，该网络将第二级输出节点连接回第一级中间节点，实现米勒补偿。使用以下小信号模型和定义。\n\n- 第一级表示为一个理想跨导器，其跨导为 $g_{m1}$，将输入电压 $v_{\\text{in}}$ 转换为注入中间节点 $v_{1}$ 的电流，并与一个到地的有限输出电阻 $r_{o1}$ 并联。\n- 第二级表示为一个跨导器，其跨导为 $g_{m2}$，其受控电流与 $v_{1}$ 成正比，从其输出节点 $v_{2}$ 流向地，并与一个到地的有限输出电阻 $r_{o2}$ 和一个到地的外部负载电阻 $R_{L}$ 并联。定义 $g_{o1} \\equiv 1/r_{o1}$ 和 $g_{o2} \\equiv 1/r_{o2}$，以及 $g_{L} \\equiv 1/R_{L}$，因此 $v_{2}$ 处的总输出电导为 $G_{2} \\equiv g_{o2} + g_{L}$。\n- 补偿网络由一个电阻 $R_{z}$ 与一个电容 $C_{c}$ 串联组成，连接在节点 $v_{2}$ 和 $v_{1}$ 之间。其小信号导纳为 $Y_{c}(s) \\equiv 1/\\big(R_{z} + 1/(s C_{c})\\big) = \\dfrac{s C_{c}}{1 + s R_{z} C_{c}}$。\n- 所有其他寄生参数都可以忽略，并且小信号模型是线性时不变的。仅使用 Kirchhoff 电流定律和小信号元件定义来推导传递函数 $H(s) \\equiv v_{2}(s)/v_{\\text{in}}(s)$。\n\n任务：\n- 从基本节点关系出发，推导 $H(s)$ 的精确传输零点条件，并获得其位置 $s_{z}$ 关于 $g_{m2}$、$C_{c}$ 和 $R_{z}$ 的闭式表达式。\n- 利用你的推导，确定有限的 $r_{o2}$ 和 $R_{L}$（通过 $G_{2}$ 表示）是否会改变零点频率，并从第一性原理证明你的结论。\n- 明确说明在该模型下传输零点是否会变成复数，并确定当 $R_{z}$ 变化时，零点从右半平面移动到左半平面的条件。\n\n答案规格：\n- 最终答案只提供你推导出的 $s_{z}$ 的解析表达式，并尽可能简化。最终答案中不要包含任何讨论或条件。\n- 以弧度/秒表示零点位置。无需进行数值代入。",
            "solution": "首先验证问题，以确保其科学基础可靠、问题提出得当、客观且完整。\n\n### 第1步：提取已知条件\n- 第一级模型：一个理想跨导器，其跨导为 $g_{m1}$，将电流注入节点 $v_{1}$，并与输出电阻 $r_{o1}$ 并联。\n- 第二级模型：一个跨导器，其跨导为 $g_{m2}$，根据 $v_{1}$ 从节点 $v_{2}$ 吸取电流，并与输出电阻 $r_{o2}$ 和负载电阻 $R_{L}$ 并联。\n- 定义：$g_{o1} \\equiv 1/r_{o1}$，$g_{o2} \\equiv 1/r_{o2}$，$g_{L} \\equiv 1/R_{L}$，以及 $G_{2} \\equiv g_{o2} + g_{L}$。\n- 补偿网络：一个串联电阻 $R_{z}$ 和电容 $C_{c}$ 连接在节点 $v_{2}$ 和 $v_{1}$ 之间，其导纳为 $Y_{c}(s) \\equiv \\dfrac{s C_{c}}{1 + s R_{z} C_{c}}$。\n- 系统是线性时不变的 (LTI)。\n- 所有其他寄生电容均被忽略。\n- 目标是推导传递函数 $H(s) \\equiv v_{2}(s)/v_{\\text{in}}(s)$ 并分析其传输零点。\n\n### 第2步：使用提取的已知条件进行验证\n该问题描述了一个两级运算放大器的标准小信号模型，该放大器采用特定类型的频率补偿（带有零点消除电阻的米勒补偿）。模型的元件及其互连方式定义清晰。参数是模拟电路分析中的标准参数。任务——推导传递函数及其零点，并分析零点的性质——定义明确，是研究放大器稳定性和带宽的核心内容。该问题在科学上是合理的，内容是自洽的，并且是客观的。它不违反任何物理原理，也不包含任何矛盾。\n\n### 第3步：结论和行动\n该问题被判定为**有效**。现在开始求解过程。\n\n### 传递函数的推导\n为了求得传递函数 $H(s) = v_{2}(s)/v_{\\text{in}}(s)$，我们在中间节点（电压为 $v_{1}$）和输出节点（电压为 $v_{2}$）应用 Kirchhoff 电流定律 (KCL)。我们采用流出节点的电流总和为零的约定。\n\n在节点 $v_{1}$ 处：\n第一级注入的电流为 $g_{m1}v_{\\text{in}}$，因此流出该节点的电流为 $-g_{m1}v_{\\text{in}}$。流经输出电导 $g_{o1}$ 的电流为 $g_{o1}v_{1}$。流经补偿网络到节点 $v_{2}$ 的电流为 $Y_{c}(s)(v_{1} - v_{2})$。KCL 方程为：\n$$\n-g_{m1}v_{\\text{in}} + g_{o1}v_{1} + Y_{c}(s)(v_{1} - v_{2}) = 0\n$$\n整理各项，我们得到第一个节点方程：\n$$\n(g_{o1} + Y_{c}(s))v_{1} - Y_{c}(s)v_{2} = g_{m1}v_{\\text{in}} \\quad (1)\n$$\n\n在节点 $v_{2}$ 处：\n第二级跨导器吸取的电流为 $g_{m2}v_{1}$（从节点 $v_{2}$ 流向地），这是一个流出节点的电流。流经总输出电导 $G_{2}$ 的电流为 $G_{2}v_{2}$。流经补偿网络到节点 $v_{1}$ 的电流为 $Y_{c}(s)(v_{2} - v_{1})$。KCL 方程为：\n$$\ng_{m2}v_{1} + G_{2}v_{2} + Y_{c}(s)(v_{2} - v_{1}) = 0\n$$\n整理各项，我们得到第二个节点方程：\n$$\n(g_{m2} - Y_{c}(s))v_{1} + (G_{2} + Y_{c}(s))v_{2} = 0 \\quad (2)\n$$\n\n我们现在求解这个二元线性方程组，以 $v_{\\text{in}}$ 表示 $v_{2}$。从方程 $(2)$ 中，我们用 $v_{2}$ 表示 $v_{1}$：\n$$\nv_{1} = - \\frac{G_{2} + Y_{c}(s)}{g_{m2} - Y_{c}(s)} v_{2}\n$$\n将 $v_{1}$ 的这个表达式代入方程 $(1)$：\n$$\n(g_{o1} + Y_{c}(s)) \\left( - \\frac{G_{2} + Y_{c}(s)}{g_{m2} - Y_{c}(s)} v_{2} \\right) - Y_{c}(s)v_{2} = g_{m1}v_{\\text{in}}\n$$\n为了求得传递函数 $H(s) = v_{2}/v_{\\text{in}}$，我们首先分离出 $v_{2}$：\n$$\n-v_{2} \\left[ \\frac{(g_{o1} + Y_{c}(s))(G_{2} + Y_{c}(s))}{g_{m2} - Y_{c}(s)} + Y_{c}(s) \\right] = g_{m1}v_{\\text{in}}\n$$\n将方括号内的项通分：\n$$\n-v_{2} \\left[ \\frac{(g_{o1} + Y_{c}(s))(G_{2} + Y_{c}(s)) + Y_{c}(s)(g_{m2} - Y_{c}(s))}{g_{m2} - Y_{c}(s)} \\right] = g_{m1}v_{\\text{in}}\n$$\n展开方括号内的分子：\n$$\ng_{o1}G_{2} + g_{o1}Y_{c}(s) + G_{2}Y_{c}(s) + Y_{c}(s)^{2} + g_{m2}Y_{c}(s) - Y_{c}(s)^{2} = g_{o1}G_{2} + (g_{o1} + G_{2} + g_{m2}) Y_{c}(s)\n$$\n将其代回，我们得到：\n$$\n-v_{2} \\left[ \\frac{g_{o1}G_{2} + (g_{o1} + G_{2} + g_{m2}) Y_{c}(s)}{g_{m2} - Y_{c}(s)} \\right] = g_{m1}v_{\\text{in}}\n$$\n最后，求解传递函数 $H(s) = v_{2}/v_{\\text{in}}$：\n$$\nH(s) = \\frac{-g_{m1}(g_{m2} - Y_{c}(s))}{g_{o1}G_{2} + (g_{o1} + G_{2} + g_{m2}) Y_{c}(s)}\n$$\n\n### 传输零点的推导与分析\n\n**任务1：推导精确的传输零点条件及其位置 $s_{z}$。**\n传递函数 $H(s)$ 的一个传输零点是一个复频率 $s = s_{z}$，在该频率下 $H(s)$ 的分子为零，同时假设分母在该频率下不为零。分子是 $N(s) = -g_{m1}(g_{m2} - Y_{c}(s))$。由于 $g_{m1}$ 是一个非零常数，零点发生在以下情况：\n$$\ng_{m2} - Y_{c}(s_{z}) = 0 \\quad \\implies \\quad Y_{c}(s_{z}) = g_{m2}\n$$\n我们已知导纳 $Y_{c}(s)$ 的表达式：\n$$\nY_{c}(s) = \\frac{s C_{c}}{1 + s R_{z} C_{c}}\n$$\n将其代入零点条件：\n$$\n\\frac{s_{z} C_{c}}{1 + s_{z} R_{z} C_{c}} = g_{m2}\n$$\n现在，我们求解 $s_z$：\n$$\ns_{z} C_{c} = g_{m2} (1 + s_{z} R_{z} C_{c})\n$$\n$$\ns_{z} C_{c} = g_{m2} + s_{z} g_{m2} R_{z} C_{c}\n$$\n$$\ns_{z} C_{c} - s_{z} g_{m2} R_{z} C_{c} = g_{m2}\n$$\n$$\ns_{z} (C_{c} - g_{m2} R_{z} C_{c}) = g_{m2}\n$$\n$$\ns_{z} C_{c} (1 - g_{m2} R_{z}) = g_{m2}\n$$\n传输零点位置的闭式表达式为：\n$$\ns_{z} = \\frac{g_{m2}}{C_{c}(1 - g_{m2} R_{z})}\n$$\n\n**任务2：确定有限的 $r_{o2}$ 和 $R_{L}$（通过 $G_{2}$）是否会改变零点频率。**\n推导出的 $s_{z}$ 表达式仅取决于 $g_{m2}$、$C_{c}$ 和 $R_{z}$。参数 $G_2 = g_{o2} + g_L = 1/r_{o2} + 1/R_L$ 没有出现在 $s_{z}$ 的表达式中。因此，有限的 $r_{o2}$ 和 $R_{L}$ 不会改变传输零点的频率。\n\n基于第一性原理的证明：传输零点发生在这样一个频率，即尽管输入 $v_{\\text{in}}$ 不为零，但输出 $v_{2}$ 为零。在节点2的KCL方程（方程(2)）中令 $v_{2}=0$，得到：\n$$\n(g_{m2} - Y_{c}(s_{z}))v_{1} + (G_{2} + Y_{c}(s_{z}))(0) = 0\n$$\n$$\n(g_{m2} - Y_{c}(s_{z}))v_{1} = 0\n$$\n为了使传输零点有意义，必须存在从输入到中间节点的信号路径，因此我们不能假设 $v_{1} = 0$。因此，零点的条件是 $g_{m2} - Y_{c}(s_{z}) = 0$。这个条件在物理上意味着，第二级跨导器提供的电流 ($g_{m2}v_{1}$) 被通过补偿网络流回的电流 ($Y_{c}(v_{1}-v_{2})$，在 $v_{2}=0$ 时变为 $Y_{c}v_{1}$) 完全抵消。由于输出节点的电压为零 ($v_2 = 0$)，没有电流流过从节点2连接到地的电导 $g_{o2}$ 和 $g_{L}$。因此，这些元件在建立零点条件中不起作用。\n\n**任务3：分析零点的位置（复数，右半平面/左半平面）。**\n零点的表达式是 $s_{z} = \\frac{g_{m2}}{C_{c}(1 - g_{m2} R_{z})}$。参数 $g_{m2}$、$C_{c}$ 和 $R_{z}$ 都是实值的物理参数（$g_{m2}>0$, $C_{c}>0$, $R_{z} \\ge 0$）。因此，分子和分母总是实数。两个实数之比总是一个实数。因此，**在所述模型下，传输零点始终是实数，永远不会变成复数**。\n\n零点在实轴上的位置（从而决定其是位于右半平面还是左半平面）取决于分母的符号，因为分子 $g_{m2}$ 是正的。项 $C_{c}$ 也是正的。\n- 如果 $s_{z} > 0$，零点位于右半平面 (RHP)。这要求分母项 $(1 - g_{m2} R_{z})$ 为正。\n  $$1 - g_{m2} R_{z} > 0 \\quad \\implies \\quad R_{z}  \\frac{1}{g_{m2}}$$\n- 如果 $s_{z}  0$，零点位于左半平面 (LHP)。这要求分母项 $(1 - g_{m2} R_{z})$ 为负。\n  $$1 - g_{m2} R_{z}  0 \\quad \\implies \\quad R_{z} > \\frac{1}{g_{m2}}$$\n当电阻 $R_{z}$ 从 0 开始增加时，零点起始于右半平面的 $s_{z} = g_{m2}/C_{c}$。当 $R_{z}$ 从下方接近临界值 $1/g_{m2}$ 时，零点向 $+\\infty$ 移动。当 $R_{z}$ 超过 $1/g_{m2}$ 时，分母变为负值，零点从 LHP 的 $-\\infty$ 处重新出现并向原点移动。因此，**当 $R_z$ 增加超过 $1/g_{m2}$ 这个值时，零点从 RHP 移动到 LHP**。",
            "answer": "$$\\boxed{\\frac{g_{m2}}{C_{c}(1 - g_{m2} R_{z})}}$$"
        },
        {
            "introduction": "掌握了密勒补偿的基本原理和零点控制技术后，我们最终要面对的是实际的设计综合问题。补偿电容 $C_c$ 的取值是一个典型的工程权衡：过小的电容可能无法保证足够的相位裕度导致系统不稳定，而过大的电容又会限制压摆率，降低电路的大信号速度。这个练习 () 将带你体验这一核心设计权衡，通过计算找到一个满足稳定性和速度双重约束的最佳电容值范围。",
            "id": "4304430",
            "problem": "一个用于电子设计自动化 (EDA) 中自顶向下尺寸调整的互补金属氧化物半导体 (CMOS) 两级运算跨导放大器 (OTA)，通过一个连接在中间节点（第一级输出）和放大器输出之间的密勒电容 $C_{c}$ 进行补偿。一个零点消除电阻与 $C_{c}$ 串联，其选择的目的是使得由密勒网络引起的任何右半平面零点都完全被一个左半平面零点所抵消，从而在感兴趣的频带内，小信号开环响应可以很好地近似为两个极点且没有零点。第一级具有跨导 $g_{m1}$，第二级具有有效输出电阻 $r_{o2}$，它与负载电容 $C_{L}$ 以及从输出节点看到的补偿电容 $C_{c}$ 一起，决定了非主导极点。差分输入对的偏置提供了一个最大尾电流 $I_{\\text{tail}}$，该电流通过可用于对补偿电容进行充电或放电的电流量来限制大信号压摆率。\n\n从线性时不变小信号行为的基本原理、电容电流关系 $i = C\\,dv/dt$ 以及相位裕度的定义（即单位增益频率下 $180^\\circ$ 与开环相位之差）出发，确定密勒补偿电容 $C_{c}$ 的最小值，该值需同时满足：\n- 满足 $\\phi_{\\text{tgt}} = 70^\\circ$ 的相位裕度目标，且主导极点远低于单位增益频率，使其在单位增益频率处的相位贡献近似为 $-90^\\circ$，并且\n- 满足由 $I_{\\text{tail}}$ 的偏置约束所设定的最小压摆率要求 $\\mathrm{SR}_{\\min}$。\n\n假设在小信号区域内有以下测量或设计验证过的参数：\n- 第一级跨导 $g_{m1} = 10\\,\\mu\\mathrm{S}$，\n- 第二级输出电阻 $r_{o2} = 20\\,\\mathrm{k}\\Omega$，\n- 负载电容 $C_{L} = 6\\,\\mathrm{pF}$，\n- 尾电流 $I_{\\text{tail}} = 200\\,\\mu\\mathrm{A}$，\n- 最小压摆率要求 $\\mathrm{SR}_{\\min} = 25\\,\\mathrm{V}/\\mu\\mathrm{s}$。\n\n将输出节点处的非主导极点视为由 $r_{o2}$ 与总输出电容的时间常数所设定，该总电容是在密勒连接下，$C_{L}$ 与在输出节点呈现的 $C_{c}$ 部分之和。角频率使用弧度/秒，相位使用度，并忽略除指定电容外的其他寄生电容。将最终答案四舍五入至三位有效数字。以皮法 (pF) 为单位表示最终电容。",
            "solution": "题目要求找到一个两级CMOS运算跨导放大器 (OTA) 的密勒补偿电容 $C_{c}$ 的最小值，该值需同时满足相位裕度和压摆率的规范。我们将分别分析每个约束条件，以确定 $C_{c}$ 的允许范围，然后找到该范围内的最小值。\n\n首先，我们处理大信号压摆率 (SR) 约束。题目指出，压摆率受限于输入差分对的尾电流 $I_{\\text{tail}}$ 对补偿电容 $C_{c}$ 进行充电或放电。电流、电容和电压变化率之间的基本关系是 $i = C \\frac{dv}{dt}$。在大信号压摆状态下，全部尾电流都用于对 $C_{c}$ 进行充电或放电。因此，压摆率由下式给出：\n$$\n\\mathrm{SR} = \\frac{I_{\\text{tail}}}{C_{c}}\n$$\n题目规定了最小压摆率要求 $\\mathrm{SR}_{\\min}$。因此，我们必须有：\n$$\n\\frac{I_{\\text{tail}}}{C_{c}} \\ge \\mathrm{SR}_{\\min}\n$$\n重新整理此不等式以求解 $C_{c}$，我们得到补偿电容的上限：\n$$\nC_{c} \\le \\frac{I_{\\text{tail}}}{\\mathrm{SR}_{\\min}}\n$$\n代入给定的数值，$I_{\\text{tail}} = 200\\,\\mu\\mathrm{A} = 200 \\times 10^{-6}\\,\\mathrm{A}$ 和 $\\mathrm{SR}_{\\min} = 25\\,\\mathrm{V}/\\mu\\mathrm{s} = 25 \\times 10^{6}\\,\\mathrm{V/s}$：\n$$\nC_{c} \\le \\frac{200 \\times 10^{-6}\\,\\mathrm{A}}{25 \\times 10^{6}\\,\\mathrm{V/s}} = 8 \\times 10^{-12}\\,\\mathrm{F} = 8\\,\\mathrm{pF}\n$$\n所以，压摆率要求施加了约束 $C_{c} \\le 8\\,\\mathrm{pF}$。\n\n接下来，我们处理小信号相位裕度 ($\\phi_{\\text{m}}$) 约束。题目指出，由于右半平面零点被抵消，开环响应可以很好地近似为一个双极点系统。开环传递函数的形式为 $A(s) = \\frac{A_0}{(1-s/p_1)(1-s/p_2)}$，其中 $p_1$ 和 $p_2$ 是极点频率。在频域中，角频率为 $\\omega$，这变为 $A(j\\omega) = \\frac{A_{\\text{DC}}}{(1+j\\omega/\\omega_{p1})(1+j\\omega/\\omega_{p2})}$，其中 $\\omega_{p1}$ 和 $\\omega_{p2}$ 是以 rad/s 为单位的正极点频率。\n\n相位裕度 $\\phi_{\\text{m}}$ 定义在单位增益频率 $\\omega_u$ 处，此时 $|A(j\\omega_u)|=1$。它由 $\\phi_{\\text{m}} = 180^\\circ + \\arg(A(j\\omega_u))$ 给出。传递函数的相角为 $\\arg(A(j\\omega)) = -\\arctan(\\omega/\\omega_{p1}) - \\arctan(\\omega/\\omega_{p2})$。\n题目指出，主导极点 $\\omega_{p1}$ 远低于 $\\omega_u$，使其在 $\\omega_u$ 处的相位贡献近似为 $-90^\\circ$。这意味着 $\\omega_u \\gg \\omega_{p1}$。采用这个标准近似，相位裕度变为：\n$$\n\\phi_{\\text{m}} \\approx 180^\\circ - 90^\\circ - \\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right) = 90^\\circ - \\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right)\n$$\n目标相位裕度为 $\\phi_{\\text{tgt}} = 70^\\circ$。为了达到或超过此目标，我们必须有 $\\phi_{\\text{m}} \\ge 70^\\circ$。\n$$\n90^\\circ - \\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right) \\ge 70^\\circ\n$$\n$$\n\\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right) \\le 20^\\circ \\implies \\frac{\\omega_u}{\\omega_{p2}} \\le \\tan(20^\\circ)\n$$\n为了找到所需的 $C_c$ 最小值，我们考虑边界条件，即相位裕度恰好等于目标值 $\\phi_{\\text{m}} = 70^\\circ$。这给出：\n$$\n\\frac{\\omega_u}{\\omega_{p2}} = \\tan(20^\\circ)\n$$\n现在我们必须用给定的电路参数来表示 $\\omega_u$ 和 $\\omega_{p2}$。对于一个密勒补偿的两级 OTA，单位增益频率（或增益带宽积）由第一级跨导 $g_{m1}$ 和补偿电容 $C_{c}$ 决定：\n$$\n\\omega_u = \\frac{g_{m1}}{C_{c}}\n$$\n非主导极点 $\\omega_{p2}$ 被指定为由第二级输出电阻 $r_{o2}$ 和输出节点的总电容的时间常数所设定。这个总电容是负载电容 $C_L$ 和补偿电容 $C_c$ 的和。遵循此模型：\n$$\n\\omega_{p2} = \\frac{1}{r_{o2}(C_L + C_c)}\n$$\n将 $\\omega_u$ 和 $\\omega_{p2}$ 的这些表达式代入相位裕度条件中：\n$$\n\\frac{g_{m1}/C_c}{1/(r_{o2}(C_L + C_c))} = \\tan(20^\\circ)\n$$\n$$\n\\frac{g_{m1}r_{o2}(C_L + C_c)}{C_c} = \\tan(20^\\circ)\n$$\n我们现在可以求解 $C_c$：\n$$\ng_{m1}r_{o2}C_L + g_{m1}r_{o2}C_c = C_c \\tan(20^\\circ)\n$$\n$$\ng_{m1}r_{o2}C_L = C_c (\\tan(20^\\circ) - g_{m1}r_{o2})\n$$\n$$\nC_c = \\frac{g_{m1}r_{o2}C_L}{\\tan(20^\\circ) - g_{m1}r_{o2}}\n$$\n这个值表示达到相位裕度目标所需的最小电容 $C_{c,\\text{min,PM}}$。将 $C_c$ 增加到超过此值会增加相位裕度，所以这是一个下限。我们来计算它的值。首先，我们计算无量纲乘积 $g_{m1}r_{o2}$：\n$$\ng_{m1}r_{o2} = (10 \\times 10^{-6}\\,\\mathrm{S}) \\times (20 \\times 10^{3}\\,\\Omega) = 0.2\n$$\n现在，将这些值代入 $C_c$ 的方程中：\n$$\nC_{c,\\text{min,PM}} = \\frac{0.2 \\times (6 \\times 10^{-12}\\,\\mathrm{F})}{\\tan(20^\\circ) - 0.2} \\approx \\frac{1.2 \\times 10^{-12}\\,\\mathrm{F}}{0.36397 - 0.2} = \\frac{1.2 \\times 10^{-12}\\,\\mathrm{F}}{0.16397} \\approx 7.3183 \\times 10^{-12}\\,\\mathrm{F}\n$$\n所以，相位裕度要求施加了约束 $C_c \\ge 7.3183\\,\\mathrm{pF}$。\n\n为了同时满足这两个条件，$C_c$ 必须在由两个约束条件定义的范围内：\n$$\n7.3183\\,\\mathrm{pF} \\le C_c \\le 8\\,\\mathrm{pF}\n$$\n题目要求满足这些条件的 $C_c$ 的最小值。在此有效范围内的最小值是由相位裕度要求设定的下限。\n$$\nC_{c,\\min} = 7.3183\\,\\mathrm{pF}\n$$\n按要求将最终答案四舍五入至三位有效数字，我们得到 $7.32\\,\\mathrm{pF}$。",
            "answer": "$$\n\\boxed{7.32}\n$$"
        }
    ]
}
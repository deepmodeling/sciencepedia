{
    "hands_on_practices": [
        {
            "introduction": "The Miller effect is a cornerstone concept in the analysis of high-frequency amplifiers. It explains how a capacitor bridging the input and output of an inverting amplifier appears as a significantly larger capacitor when viewed from the input terminals. This practice provides a first-principles derivation to quantify this effect in a canonical common-source amplifier, revealing how the amplifier's voltage gain directly multiplies the feedback capacitance and impacts the overall input impedance .",
            "id": "4304453",
            "problem": "Consider a Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) common-source (CS) voltage amplifier stage used in Electronic Design Automation (EDA). The transistor is modeled by its small-signal parameters: transconductance $g_m$, output resistance $r_o$, gate-to-source capacitance $C_{gs}$, and gate-to-drain capacitance $C_{gd}$. The drain is connected to the direct current (DC) supply through a resistor $R_D$, and, for alternating current (AC) analysis, the supply is treated as ground. A resistive load $R_L$ is connected from the drain to ground (representing the input resistance of the next stage). The source is grounded, and the gate is driven by an ideal voltage source with negligible source resistance. Assume linear, time-invariant small-signal behavior and neglect all other parasitic elements.\n\nStarting from the small-signal model and fundamental relations—Ohm’s law, Kirchhoff’s laws, and the capacitor current–voltage relation $i_C = C\\,\\mathrm{d}v/\\mathrm{d}t$—derive the low-frequency voltage gain $A_v = v_o/v_i$ of the CS stage as a function of $R_D$, $R_L$, $g_m$, and $r_o$. Then, using first principles, determine the effective input capacitance $C_{in}$ seen by the source, accounting for both the direct input capacitance $C_{gs}$ and the feedback effect of $C_{gd}$ (Miller effect) via the finite gain $A_v$ and finite load $R_L$.\n\nExpress your final answer as a single, closed-form analytic expression for $C_{in}$ in terms of $R_D$, $R_L$, $g_m$, $r_o$, $C_{gs}$, and $C_{gd}$. No numerical approximation or rounding is required. Do not include units in your final expression.",
            "solution": "The problem statement is subjected to validation.\n\n**Step 1: Extract Givens**\n-   Device: Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) in a common-source (CS) voltage amplifier stage.\n-   Small-signal parameters: transconductance $g_m$, output resistance $r_o$, gate-to-source capacitance $C_{gs}$, and gate-to-drain capacitance $C_{gd}$.\n-   Circuit Topology:\n    -   Drain is connected to a DC supply via resistor $R_D$.\n    -   For AC analysis, the DC supply is treated as ground.\n    -   A resistive load $R_L$ is connected from the drain to ground.\n    -   The source is grounded.\n    -   The gate is driven by an ideal voltage source with negligible source resistance.\n-   Assumptions:\n    -   Linear, time-invariant small-signal behavior.\n    -   All other parasitic elements are neglected.\n-   Fundamental Relations:\n    -   Ohm’s law.\n    -   Kirchhoff’s laws.\n    -   Capacitor current–voltage relation: $i_C = C\\,\\mathrm{d}v/\\mathrm{d}t$.\n-   Task:\n    1.  Derive the low-frequency voltage gain $A_v = v_o/v_i$ as a function of $R_D$, $R_L$, $g_m$, and $r_o$.\n    2.  Determine the effective input capacitance $C_{in}$ by accounting for $C_{gs}$ and the Miller effect of $C_{gd}$.\n-   Final Answer Requirement: A single, closed-form analytic expression for $C_{in}$ in terms of $R_D$, $R_L$, $g_m$, $r_o$, $C_{gs}$, and $C_{gd}$.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is scientifically grounded, describing a standard MOSFET common-source amplifier using a well-established small-signal model. The concepts involved—small-signal analysis, Miller effect, Kirchhoff's laws—are fundamental principles of electronics. The problem is well-posed, providing all necessary parameters and a clear objective, leading to a unique, derivable solution. The language is objective and precise. The setup is complete, consistent, and scientifically plausible within the standard model of circuit analysis. It is a non-trivial problem that tests core understanding of amplifier characteristics.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A complete solution will be derived.\n\nThe derivation proceeds in two stages as requested: first, the calculation of the low-frequency voltage gain, and second, the calculation of the effective input capacitance using this gain.\n\n**Part 1: Low-Frequency Voltage Gain ($A_v$)**\nFor low-frequency analysis, all capacitances ($C_{gs}$ and $C_{gd}$) are treated as open circuits, as their impedances, $Z_C = \\frac{1}{j\\omega C}$, are effectively infinite as the frequency $\\omega \\to 0$. The small-signal equivalent circuit consists of the input voltage $v_i$ applied to the gate, a dependent current source $g_m v_{gs}$ from drain to source, and the parallel combination of the transistor's output resistance $r_o$, the drain resistor $R_D$, and the load resistor $R_L$.\n\nSince the source terminal is grounded, the gate-to-source voltage $v_{gs}$ is equal to the input voltage $v_i$.\n$$v_{gs} = v_g - v_s = v_i - 0 = v_i$$\nThe output voltage $v_o$ is taken at the drain node. The resistors $r_o$, $R_D$, and $R_L$ are in parallel, connected between the drain node and AC ground. The total equivalent resistance at the output node, $R_{out}$, is:\n$$R_{out} = r_o \\parallel R_D \\parallel R_L = \\left( \\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L} \\right)^{-1}$$\nAccording to Ohm's law, the output voltage $v_o$ is the product of the total current flowing into the resistive network and the equivalent resistance. The only current source is the dependent current source $g_m v_{gs}$. Its current flows from the drain node towards the source (ground), so it exits the node from the perspective of the output resistors. Therefore, the current flowing *through* the parallel resistors from the node to ground is $g_m v_{gs}$. This creates a voltage drop, so the node voltage is negative.\n$$v_o = - (g_m v_{gs}) R_{out}$$\nSubstituting $v_{gs} = v_i$:\n$$v_o = -g_m v_i R_{out}$$\nThe low-frequency voltage gain $A_v$ is the ratio of $v_o$ to $v_i$:\n$$A_v = \\frac{v_o}{v_i} = -g_m R_{out} = -g_m \\left( r_o \\parallel R_D \\parallel R_L \\right)$$\n$$A_v = -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)$$\n\n**Part 2: Effective Input Capacitance ($C_{in}$)**\nTo find the effective input capacitance, we analyze the full small-signal model including $C_{gs}$ and $C_{gd}$. The input capacitance $C_{in}$ is defined from the input admittance $Y_{in}$ seen by the source, where $Y_{in} = \\frac{I_{in}}{V_i} = j\\omega C_{in}$. We work in the frequency domain, using phasors for voltages ($V_i, V_o$) and currents ($I_{in}$).\n\nThe total input current $I_{in}$ entering the gate node is the sum of the currents through $C_{gs}$ and $C_{gd}$, by Kirchhoff's Current Law (KCL).\n$$I_{in} = I_{C_{gs}} + I_{C_{gd}}$$\nThe current through the gate-to-source capacitor, $I_{C_{gs}}$, is given by the voltage across it, $V_{gs} = V_g - V_s = V_i - 0 = V_i$, divided by its impedance $Z_{C_{gs}} = \\frac{1}{j\\omega C_{gs}}$.\n$$I_{C_{gs}} = \\frac{V_i}{1/(j\\omega C_{gs})} = j\\omega C_{gs} V_i$$\nThe current through the gate-to-drain capacitor, $I_{C_{gd}}$, is given by the voltage across it, $V_{gd} = V_g - V_d = V_i - V_o$, divided by its impedance $Z_{C_{gd}} = \\frac{1}{j\\omega C_{gd}}$.\n$$I_{C_{gd}} = \\frac{V_i - V_o}{1/(j\\omega C_{gd})} = j\\omega C_{gd} (V_i - V_o)$$\nSubstituting these into the KCL equation for $I_{in}$:\n$$I_{in} = j\\omega C_{gs} V_i + j\\omega C_{gd} (V_i - V_o)$$\nTo find the input admittance $Y_{in} = \\frac{I_{in}}{V_i}$, we divide the expression by $V_i$:\n$$Y_{in} = \\frac{I_{in}}{V_i} = j\\omega C_{gs} + j\\omega C_{gd} \\left(1 - \\frac{V_o}{V_i}\\right)$$\nThe ratio $\\frac{V_o}{V_i}$ is the voltage gain. The Miller effect approximation, which is standard for this analysis and implied by the problem's structure, uses the low-frequency gain $A_v$ in this expression.\n$$Y_{in} = j\\omega C_{gs} + j\\omega C_{gd} (1 - A_v)$$\nFactoring out $j\\omega$:\n$$Y_{in} = j\\omega \\left[ C_{gs} + C_{gd} (1 - A_v) \\right]$$\nBy definition, the input admittance is purely capacitive, $Y_{in} = j\\omega C_{in}$. Comparing this with the derived expression, we identify the effective input capacitance $C_{in}$:\n$$C_{in} = C_{gs} + C_{gd} (1 - A_v)$$\nThis equation formalizes the Miller effect: the feedback capacitor $C_{gd}$ appears at the input, multiplied by a factor $(1 - A_v)$. Since $A_v$ is large and negative for a CS amplifier, this term, known as the Miller capacitance, can be significantly larger than $C_{gd}$ itself.\n\nFinally, we substitute the expression for the low-frequency gain $A_v$ that we derived in Part 1 to obtain the final expression for $C_{in}$ in terms of the given circuit parameters.\n$$A_v = -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)$$\n$$C_{in} = C_{gs} + C_{gd} \\left( 1 - \\left[ -g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right) \\right] \\right)$$\n$$C_{in} = C_{gs} + C_{gd} \\left( 1 + g_m \\left( \\frac{1}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right) \\right)$$\nThis is the closed-form analytic expression for the effective input capacitance.",
            "answer": "$$\n\\boxed{C_{gs} + C_{gd} \\left( 1 + \\frac{g_m}{\\frac{1}{r_o} + \\frac{1}{R_D} + \\frac{1}{R_L}} \\right)}\n$$"
        },
        {
            "introduction": "While the Miller capacitor is essential for achieving stability through frequency compensation, its value presents a fundamental design trade-off. This exercise explores the dual role of the compensation capacitor in setting both the small-signal phase margin and the large-signal slew rate of a two-stage operational transconductance amplifier (OTA). By working through this problem, you will learn to navigate the competing constraints of stability and speed, a critical skill in practical amplifier design .",
            "id": "4304430",
            "problem": "A complementary metal–oxide–semiconductor (CMOS) two-stage operational transconductance amplifier (OTA) intended for top-down sizing in Electronic Design Automation (EDA) is compensated by a Miller capacitor $C_{c}$ connected between the intermediate node (the first-stage output) and the amplifier output. A nulling resistor is included in series with $C_{c}$ and chosen such that any right-half-plane zero caused by the Miller network is fully cancelled by a left-half-plane zero, so that the small-signal open-loop response is well-approximated by two poles without zeros in the frequency band of interest. The first stage has transconductance $g_{m1}$, and the second stage has an effective output resistance $r_{o2}$ that, together with the load capacitance $C_{L}$ and the compensation capacitor $C_{c}$ as seen at the output node, determines the non-dominant pole. The biasing of the differential input pair supplies a maximum tail current $I_{\\text{tail}}$ that limits the large-signal slew rate via the current available to charge or discharge the compensation capacitor.\n\nStarting from first principles of linear time-invariant small-signal behavior, the capacitor current relation $i = C\\,dv/dt$, and the definition of phase margin as the difference between $180^\\circ$ and the open-loop phase at the unity-gain frequency, determine the minimum value of the Miller compensation capacitor $C_{c}$ that simultaneously:\n- meets a phase margin target of $\\phi_{\\text{tgt}} = 70^\\circ$ with the dominant pole sufficiently below the unity-gain frequency that its phase contribution at unity-gain is approximately $-90^\\circ$, and\n- satisfies a minimum slew rate requirement $\\mathrm{SR}_{\\min}$ set by the bias constraint on $I_{\\text{tail}}$.\n\nAssume the following measured or design-validated parameters in the small-signal region:\n- First-stage transconductance $g_{m1} = 10\\,\\mu\\mathrm{S}$,\n- Second-stage output resistance $r_{o2} = 20\\,\\mathrm{k}\\Omega$,\n- Load capacitance $C_{L} = 6\\,\\mathrm{pF}$,\n- Tail current $I_{\\text{tail}} = 200\\,\\mu\\mathrm{A}$,\n- Minimum slew rate requirement $\\mathrm{SR}_{\\min} = 25\\,\\mathrm{V}/\\mu\\mathrm{s}$.\n\nTreat the non-dominant pole at the output node as set by the time constant of $r_{o2}$ with the total output capacitance, which is the sum of $C_{L}$ and the portion of $C_{c}$ appearing at the output node under the Miller connection. Work in radians per second for angular frequencies and degrees for phase, and neglect additional parasitic capacitances beyond those specified. Round your final answer to three significant figures. Express the final capacitance in picofarads (pF).",
            "solution": "The problem requires finding the minimum value of a Miller compensation capacitor, $C_{c}$, for a two-stage CMOS operational transconductance amplifier (OTA) that simultaneously meets a phase margin specification and a slew rate specification. We will analyze each constraint separately to determine the allowable range for $C_{c}$ and then find the minimum value within that range.\n\nFirst, we address the large-signal slew rate (SR) constraint. The problem states that the slew rate is limited by the tail current of the input differential pair, $I_{\\text{tail}}$, charging or discharging the compensation capacitor $C_{c}$. The fundamental relationship between current, capacitance, and the rate of change of voltage is $i = C \\frac{dv}{dt}$. In the large-signal slewing condition, the entire tail current is directed to charging or discharging $C_{c}$. Therefore, the slew rate is given by:\n$$\n\\mathrm{SR} = \\frac{I_{\\text{tail}}}{C_{c}}\n$$\nThe problem specifies a minimum slew rate requirement, $\\mathrm{SR}_{\\min}$. Thus, we must have:\n$$\n\\frac{I_{\\text{tail}}}{C_{c}} \\ge \\mathrm{SR}_{\\min}\n$$\nRearranging this inequality to solve for $C_{c}$, we find an upper bound on the compensation capacitance:\n$$\nC_{c} \\le \\frac{I_{\\text{tail}}}{\\mathrm{SR}_{\\min}}\n$$\nSubstituting the given numerical values, $I_{\\text{tail}} = 200\\,\\mu\\mathrm{A} = 200 \\times 10^{-6}\\,\\mathrm{A}$ and $\\mathrm{SR}_{\\min} = 25\\,\\mathrm{V}/\\mu\\mathrm{s} = 25 \\times 10^{6}\\,\\mathrm{V/s}$:\n$$\nC_{c} \\le \\frac{200 \\times 10^{-6}\\,\\mathrm{A}}{25 \\times 10^{6}\\,\\mathrm{V/s}} = 8 \\times 10^{-12}\\,\\mathrm{F} = 8\\,\\mathrm{pF}\n$$\nSo, the slew rate requirement imposes the constraint $C_{c} \\le 8\\,\\mathrm{pF}$.\n\nNext, we address the small-signal phase margin ($\\phi_{\\text{m}}$) constraint. The problem states that the open-loop response is well-approximated by a two-pole system, as the right-half-plane zero is cancelled. The open-loop transfer function is of the form $A(s) = \\frac{A_0}{(1-s/p_1)(1-s/p_2)}$, where $p_1$ and $p_2$ are the pole frequencies. In the frequency domain, with angular frequency $\\omega$, this becomes $A(j\\omega) = \\frac{A_{\\text{DC}}}{(1+j\\omega/\\omega_{p1})(1+j\\omega/\\omega_{p2})}$, where $\\omega_{p1}$ and $\\omega_{p2}$ are the positive pole frequencies in rad/s.\n\nThe phase margin, $\\phi_{\\text{m}}$, is defined at the unity-gain frequency, $\\omega_u$, where $|A(j\\omega_u)|=1$. It is given by $\\phi_{\\text{m}} = 180^\\circ + \\arg(A(j\\omega_u))$. The phase angle of the transfer function is $\\arg(A(j\\omega)) = -\\arctan(\\omega/\\omega_{p1}) - \\arctan(\\omega/\\omega_{p2})$.\nThe problem states that the dominant pole, $\\omega_{p1}$, is sufficiently below $\\omega_u$ such that its phase contribution at $\\omega_u$ is approximately $-90^\\circ$. This implies $\\omega_u \\gg \\omega_{p1}$. With this standard approximation, the phase margin becomes:\n$$\n\\phi_{\\text{m}} \\approx 180^\\circ - 90^\\circ - \\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right) = 90^\\circ - \\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right)\n$$\nThe target phase margin is $\\phi_{\\text{tgt}} = 70^\\circ$. To meet or exceed this target, we must have $\\phi_{\\text{m}} \\ge 70^\\circ$.\n$$\n90^\\circ - \\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right) \\ge 70^\\circ\n$$\n$$\n\\arctan\\left(\\frac{\\omega_u}{\\omega_{p2}}\\right) \\le 20^\\circ \\implies \\frac{\\omega_u}{\\omega_{p2}} \\le \\tan(20^\\circ)\n$$\nTo find the minimum required value of $C_c$, we consider the boundary condition where the phase margin is exactly the target value, $\\phi_{\\text{m}} = 70^\\circ$. This gives:\n$$\n\\frac{\\omega_u}{\\omega_{p2}} = \\tan(20^\\circ)\n$$\nNow we must express $\\omega_u$ and $\\omega_{p2}$ in terms of the given circuit parameters. For a Miller-compensated two-stage OTA, the unity-gain frequency (or gain-bandwidth product) is determined by the first-stage transconductance, $g_{m1}$, and the compensation capacitor, $C_{c}$:\n$$\n\\omega_u = \\frac{g_{m1}}{C_{c}}\n$$\nThe non-dominant pole, $\\omega_{p2}$, is specified to be set by the time constant of the second-stage output resistance, $r_{o2}$, and the total capacitance at the output node. This total capacitance is the sum of the load capacitance, $C_L$, and the compensation capacitor, $C_{c}$, as seen from the output. Following this model:\n$$\n\\omega_{p2} = \\frac{1}{r_{o2}(C_L + C_c)}\n$$\nSubstituting these expressions for $\\omega_u$ and $\\omega_{p2}$ into the phase margin condition:\n$$\n\\frac{g_{m1}/C_c}{1/(r_{o2}(C_L + C_c))} = \\tan(20^\\circ)\n$$\n$$\n\\frac{g_{m1}r_{o2}(C_L + C_c)}{C_c} = \\tan(20^\\circ)\n$$\nWe can now solve for $C_c$:\n$$\ng_{m1}r_{o2}C_L + g_{m1}r_{o2}C_c = C_c \\tan(20^\\circ)\n$$\n$$\ng_{m1}r_{o2}C_L = C_c (\\tan(20^\\circ) - g_{m1}r_{o2})\n$$\n$$\nC_c = \\frac{g_{m1}r_{o2}C_L}{\\tan(20^\\circ) - g_{m1}r_{o2}}\n$$\nThis value represents the minimum capacitance, $C_{c,\\text{min,PM}}$, required to achieve the phase margin target. Increasing $C_c$ beyond this value would increase the phase margin, so this is a lower bound. Let's calculate its value. First, we compute the dimensionless product $g_{m1}r_{o2}$:\n$$\ng_{m1}r_{o2} = (10 \\times 10^{-6}\\,\\mathrm{S}) \\times (20 \\times 10^{3}\\,\\Omega) = 0.2\n$$\nNow, substitute the values into the equation for $C_c$:\n$$\nC_{c,\\text{min,PM}} = \\frac{0.2 \\times (6 \\times 10^{-12}\\,\\mathrm{F})}{\\tan(20^\\circ) - 0.2} \\approx \\frac{1.2 \\times 10^{-12}\\,\\mathrm{F}}{0.36397 - 0.2} = \\frac{1.2 \\times 10^{-12}\\,\\mathrm{F}}{0.16397} \\approx 7.3183 \\times 10^{-12}\\,\\mathrm{F}\n$$\nSo, the phase margin requirement imposes the constraint $C_c \\ge 7.3183\\,\\mathrm{pF}$.\n\nTo satisfy both conditions simultaneously, $C_c$ must be in the range defined by both constraints:\n$$\n7.3183\\,\\mathrm{pF} \\le C_c \\le 8\\,\\mathrm{pF}\n$$\nThe problem asks for the minimum value of $C_c$ that satisfies these conditions. The minimum value in this valid range is the lower bound set by the phase margin requirement.\n$$\nC_{c,\\min} = 7.3183\\,\\mathrm{pF}\n$$\nRounding the final answer to three significant figures as requested, we get $7.32\\,\\mathrm{pF}$.",
            "answer": "$$\n\\boxed{7.32}\n$$"
        },
        {
            "introduction": "A more subtle consequence of Miller compensation is the creation of a feedforward path through the compensation network, which introduces a transmission zero into the amplifier's transfer function. This zero can appear in the right-half plane (RHP), which degrades the phase margin and can compromise stability. This advanced practice guides you through the analysis of this zero and demonstrates how adding a \"nulling resistor\" in series with the Miller capacitor can be used to control its location, even moving it into the stable left-half plane (LHP) .",
            "id": "4304462",
            "problem": "Consider a cascaded voltage amplifier with a first high-gain transconductor feeding a second common-source stage. The amplifier is frequency-compensated by a series resistor–capacitor network that connects the second-stage output node back to the first-stage intermediate node, implementing Miller compensation. Use the following small-signal model and definitions.\n\n- The first stage is represented as an ideal transconductor of transconductance $g_{m1}$ that converts the input voltage $v_{\\text{in}}$ into a current injected into the intermediate node $v_{1}$, in parallel with a finite output resistance $r_{o1}$ to ground.\n- The second stage is represented as a transconductor of transconductance $g_{m2}$ whose controlled current flows from its output node $v_{2}$ to ground in proportion to $v_{1}$, in parallel with a finite output resistance $r_{o2}$ to ground and an external load resistance $R_{L}$ to ground. Define $g_{o1} \\equiv 1/r_{o1}$ and $g_{o2} \\equiv 1/r_{o2}$, and $g_{L} \\equiv 1/R_{L}$, so the total output conductance at $v_{2}$ is $G_{2} \\equiv g_{o2} + g_{L}$.\n- The compensation network consists of a resistor $R_{z}$ in series with a capacitor $C_{c}$ between nodes $v_{2}$ and $v_{1}$. Its small-signal admittance is $Y_{c}(s) \\equiv 1/\\big(R_{z} + 1/(s C_{c})\\big) = \\dfrac{s C_{c}}{1 + s R_{z} C_{c}}$.\n- All other parasitics can be neglected, and the small-signal model is linear time-invariant. Use only Kirchhoff’s Current Law and small-signal element definitions to derive the transfer function $H(s) \\equiv v_{2}(s)/v_{\\text{in}}(s)$.\n\nTasks:\n- Starting from fundamental nodal relations, derive the exact transmission zero condition of $H(s)$ and obtain a closed-form expression for its location $s_{z}$ in terms of $g_{m2}$, $C_{c}$, and $R_{z}$.\n- Using your derivation, determine whether finite $r_{o2}$ and $R_{L}$ (represented via $G_{2}$) can shift the zero frequency, and justify your conclusion from first principles.\n- State clearly whether the transmission zero can become complex under the stated model, and identify the condition under which the zero moves from the right-half plane to the left-half plane as $R_{z}$ varies.\n\nAnswer specification:\n- Provide as your final answer only the analytic expression you derive for $s_{z}$, simplified as far as possible. Do not include any discussion or conditions in the final answer.\n- Express the zero location in radians per second. No numerical substitution is required.",
            "solution": "The problem is first validated to ensure it is scientifically grounded, well-posed, objective, and complete.\n\n### Step 1: Extract Givens\n- First stage model: An ideal transconductor with transconductance $g_{m1}$ injecting current into node $v_{1}$, in parallel with output resistance $r_{o1}$.\n- Second stage model: A transconductor with transconductance $g_{m2}$ drawing current from node $v_{2}$ in proportion to $v_{1}$, in parallel with output resistance $r_{o2}$ and load resistance $R_{L}$.\n- Definitions: $g_{o1} \\equiv 1/r_{o1}$, $g_{o2} \\equiv 1/r_{o2}$, $g_{L} \\equiv 1/R_{L}$, and $G_{2} \\equiv g_{o2} + g_{L}$.\n- Compensation network: A series resistor $R_{z}$ and capacitor $C_{c}$ connected between nodes $v_{2}$ and $v_{1}$, with admittance $Y_{c}(s) \\equiv \\dfrac{s C_{c}}{1 + s R_{z} C_{c}}$.\n- The system is linear time-invariant (LTI).\n- All other parasitic capacitances are neglected.\n- The goal is to derive the transfer function $H(s) \\equiv v_{2}(s)/v_{\\text{in}}(s)$ and analyze its transmission zero.\n\n### Step 2: Validate Using Extracted Givens\nThe problem describes a standard small-signal model for a two-stage operational amplifier with a specific type of frequency compensation (Miller compensation with a nulling resistor). The model's components and their interconnections are clearly defined. The parameters are standard in analog circuit analysis. The tasks—deriving the transfer function and its zero, and analyzing the zero's properties—are well-defined and central to the study of amplifier stability and bandwidth. The problem is scientifically sound, self-contained, and objective. It does not violate any physical principles or contain contradictions.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. The solution process will now proceed.\n\n### Derivation of the Transfer Function\nTo find the transfer function $H(s) = v_{2}(s)/v_{\\text{in}}(s)$, we apply Kirchhoff's Current Law (KCL) at the intermediate node (voltage $v_{1}$) and the output node (voltage $v_{2}$). We adopt the convention that the sum of currents leaving a node is zero.\n\nAt node $v_{1}$:\nThe current injected by the first stage is $g_{m1}v_{\\text{in}}$, so the current leaving the node is $-g_{m1}v_{\\text{in}}$. The current leaving through the output conductance $g_{o1}$ is $g_{o1}v_{1}$. The current leaving through the compensation network towards node $v_{2}$ is $Y_{c}(s)(v_{1} - v_{2})$. The KCL equation is:\n$$\n-g_{m1}v_{\\text{in}} + g_{o1}v_{1} + Y_{c}(s)(v_{1} - v_{2}) = 0\n$$\nRearranging terms, we get our first nodal equation:\n$$\n(g_{o1} + Y_{c}(s))v_{1} - Y_{c}(s)v_{2} = g_{m1}v_{\\text{in}} \\quad (1)\n$$\n\nAt node $v_{2}$:\nThe current drawn by the second stage transconductor is $g_{m2}v_{1}$ (flowing from node $v_{2}$ to ground), which is a current leaving the node. The current leaving through the total output conductance $G_{2}$ is $G_{2}v_{2}$. The current leaving through the compensation network towards node $v_{1}$ is $Y_{c}(s)(v_{2} - v_{1})$. The KCL equation is:\n$$\ng_{m2}v_{1} + G_{2}v_{2} + Y_{c}(s)(v_{2} - v_{1}) = 0\n$$\nRearranging terms, we get our second nodal equation:\n$$\n(g_{m2} - Y_{c}(s))v_{1} + (G_{2} + Y_{c}(s))v_{2} = 0 \\quad (2)\n$$\n\nWe now solve this system of two linear equations for $v_{2}$ in terms of $v_{\\text{in}}$. From equation $(2)$, we express $v_{1}$ in terms of $v_{2}$:\n$$\nv_{1} = - \\frac{G_{2} + Y_{c}(s)}{g_{m2} - Y_{c}(s)} v_{2}\n$$\nSubstituting this expression for $v_{1}$ into equation $(1)$:\n$$\n(g_{o1} + Y_{c}(s)) \\left( - \\frac{G_{2} + Y_{c}(s)}{g_{m2} - Y_{c}(s)} v_{2} \\right) - Y_{c}(s)v_{2} = g_{m1}v_{\\text{in}}\n$$\nTo find the transfer function $H(s) = v_{2}/v_{\\text{in}}$, we first isolate $v_{2}$:\n$$\n-v_{2} \\left[ \\frac{(g_{o1} + Y_{c}(s))(G_{2} + Y_{c}(s))}{g_{m2} - Y_{c}(s)} + Y_{c}(s) \\right] = g_{m1}v_{\\text{in}}\n$$\nCombining the terms inside the brackets over a common denominator:\n$$\n-v_{2} \\left[ \\frac{(g_{o1} + Y_{c}(s))(G_{2} + Y_{c}(s)) + Y_{c}(s)(g_{m2} - Y_{c}(s))}{g_{m2} - Y_{c}(s)} \\right] = g_{m1}v_{\\text{in}}\n$$\nExpanding the numerator inside the brackets:\n$$\ng_{o1}G_{2} + g_{o1}Y_{c}(s) + G_{2}Y_{c}(s) + Y_{c}(s)^{2} + g_{m2}Y_{c}(s) - Y_{c}(s)^{2} = g_{o1}G_{2} + (g_{o1} + G_{2} + g_{m2}) Y_{c}(s)\n$$\nSubstituting this back, we get:\n$$\n-v_{2} \\left[ \\frac{g_{o1}G_{2} + (g_{o1} + G_{2} + g_{m2}) Y_{c}(s)}{g_{m2} - Y_{c}(s)} \\right] = g_{m1}v_{\\text{in}}\n$$\nFinally, solving for the transfer function $H(s) = v_{2}/v_{\\text{in}}$:\n$$\nH(s) = \\frac{-g_{m1}(g_{m2} - Y_{c}(s))}{g_{o1}G_{2} + (g_{o1} + G_{2} + g_{m2}) Y_{c}(s)}\n$$\n\n### Transmission Zero Derivation and Analysis\n\n**Task 1: Derive the exact transmission zero condition and its location $s_{z}$.**\nA transmission zero of the transfer function $H(s)$ is a complex frequency $s = s_{z}$ where the numerator of $H(s)$ becomes zero, assuming the denominator is non-zero at that frequency. The numerator is $N(s) = -g_{m1}(g_{m2} - Y_{c}(s))$. Since $g_{m1}$ is a non-zero constant, the zero occurs when:\n$$\ng_{m2} - Y_{c}(s_{z}) = 0 \\quad \\implies \\quad Y_{c}(s_{z}) = g_{m2}\n$$\nWe are given the expression for the admittance $Y_{c}(s)$:\n$$\nY_{c}(s) = \\frac{s C_{c}}{1 + s R_{z} C_{c}}\n$$\nSubstituting this into the zero condition:\n$$\n\\frac{s_{z} C_{c}}{1 + s_{z} R_{z} C_{c}} = g_{m2}\n$$\nNow, we solve for $s_z$:\n$$\ns_{z} C_{c} = g_{m2} (1 + s_{z} R_{z} C_{c})\n$$\n$$\ns_{z} C_{c} = g_{m2} + s_{z} g_{m2} R_{z} C_{c}\n$$\n$$\ns_{z} C_{c} - s_{z} g_{m2} R_{z} C_{c} = g_{m2}\n$$\n$$\ns_{z} (C_{c} - g_{m2} R_{z} C_{c}) = g_{m2}\n$$\n$$\ns_{z} C_{c} (1 - g_{m2} R_{z}) = g_{m2}\n$$\nThe closed-form expression for the transmission zero location is:\n$$\ns_{z} = \\frac{g_{m2}}{C_{c}(1 - g_{m2} R_{z})}\n$$\n\n**Task 2: Determine if finite $r_{o2}$ and $R_{L}$ (via $G_{2}$) can shift the zero frequency.**\nThe derived expression for $s_{z}$ depends only on $g_{m2}$, $C_{c}$, and $R_{z}$. The parameter $G_2 = g_{o2} + g_L = 1/r_{o2} + 1/R_L$ does not appear in the expression for $s_{z}$. Therefore, finite $r_{o2}$ and $R_{L}$ do not shift the frequency of the transmission zero.\n\nJustification from first principles: A transmission zero occurs at a frequency where the output $v_{2}$ is zero despite a non-zero input $v_{\\text{in}}$. Setting $v_{2}=0$ in the KCL equation for node $2$ (equation $(2)$) gives:\n$$\n(g_{m2} - Y_{c}(s_{z}))v_{1} + (G_{2} + Y_{c}(s_{z}))(0) = 0\n$$\n$$\n(g_{m2} - Y_{c}(s_{z}))v_{1} = 0\n$$\nFor a transmission zero to be meaningful, there must be a signal path from input to the intermediate node, so we cannot assume $v_{1} = 0$. Thus, the condition for the zero is $g_{m2} - Y_{c}(s_{z}) = 0$. This condition physically means that the current supplied by the second transconductor ($g_{m2}v_{1}$) is exactly canceled by the current flowing back through the compensation network ($Y_{c}(v_{1}-v_{2})$ which becomes $Y_{c}v_{1}$ when $v_{2}=0$). Since the voltage at the output node is zero ($v_2 = 0$), no current flows through the conductances $g_{o2}$ and $g_{L}$ connected from node $2$ to ground. Consequently, these components play no role in establishing the zero condition.\n\n**Task 3: Analyze the zero's location (complex, RHP/LHP).**\nThe expression for the zero is $s_{z} = \\frac{g_{m2}}{C_{c}(1 - g_{m2} R_{z})}$. The parameters $g_{m2}$, $C_{c}$, and $R_{z}$ are all real-valued physical parameters ($g_{m2}>0$, $C_{c}>0$, $R_{z} \\ge 0$). The numerator and denominator are therefore always real numbers. The ratio of two real numbers is always a real number. Thus, **the transmission zero is always real and can never become complex** under the stated model.\n\nThe zero's location on the real axis (and thus its classification as Right-Half Plane or Left-Half Plane) depends on the sign of the denominator, since the numerator $g_{m2}$ is positive. The term $C_{c}$ is also positive.\n- The zero is in the Right-Half Plane (RHP) if $s_{z} > 0$. This requires the denominator term $(1 - g_{m2} R_{z})$ to be positive.\n  $$1 - g_{m2} R_{z} > 0 \\quad \\implies \\quad R_{z} < \\frac{1}{g_{m2}}$$\n- The zero is in the Left-Half Plane (LHP) if $s_{z} < 0$. This requires the denominator term $(1 - g_{m2} R_{z})$ to be negative.\n  $$1 - g_{m2} R_{z} < 0 \\quad \\implies \\quad R_{z} > \\frac{1}{g_{m2}}$$\nAs the resistance $R_{z}$ increases from $0$, the zero starts in the RHP at $s_{z} = g_{m2}/C_{c}$. As $R_{z}$ approaches the critical value $1/g_{m2}$ from below, the zero moves towards $+\\infty$. When $R_{z}$ exceeds $1/g_{m2}$, the denominator becomes negative, and the zero reappears from $-\\infty$ in the LHP and moves towards the origin. Therefore, **the zero moves from the RHP to the LHP when $R_z$ increases past the value $1/g_{m2}$**.",
            "answer": "$$\\boxed{\\frac{g_{m2}}{C_{c}(1 - g_{m2} R_{z})}}$$"
        }
    ]
}
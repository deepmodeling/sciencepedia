{
    "hands_on_practices": [
        {
            "introduction": "Before delving into complex circuits, it is crucial to understand the fundamental physical origin of dynamic power dissipation. This practice isolates a core mechanism: the irreversible energy loss that occurs during charge redistribution. By analyzing a simple system of two capacitors connected by a resistor, you will derive from first principles the energy dissipated as heat, revealing a foundational concept in all capacitive switching .",
            "id": "4267507",
            "problem": "In a Complementary Metal-Oxide-Semiconductor (CMOS) digital integrated circuit, two isolated nodes $\\mathcal{N}_1$ and $\\mathcal{N}_2$ are each modeled as ideal lumped capacitors $C_1$ and $C_2$, respectively, with initial voltages $V_1$ and $V_2$ relative to a common reference. At time $t=0$, a pass transistor turns on and is modeled as a purely resistive connection of resistance $R$ between $\\mathcal{N}_1$ and $\\mathcal{N}_2$. Assume there are no other sources, no inductances, and the only conduction path during the event is through the resistor $R$. The system is allowed to relax to its final equilibrium as $t \\to \\infty$, after which the transistor turns off and both nodes remain isolated. Using only fundamental physical principles, including charge conservation, Kirchhoff’s laws, and the definition of energy stored in a capacitor, derive the total energy dissipated in the resistor during the entire transient in terms of $C_1$, $C_2$, $V_1$, and $V_2$. Express your final energy in Joules as a single closed-form analytic expression. Do not assume any special relationship between $V_1$ and $V_2$, and do not invoke results that have not been derived from the stated principles. The final answer must be a single analytical expression.",
            "solution": "The user wants to find the total energy dissipated in a resistor connecting two capacitors that were initially charged to different voltages.\n\n### Step 1: Extract Givens\n- Two ideal lumped capacitors, $C_1$ and $C_2$.\n- Initial voltages at time $t=0$: $v_1(0) = V_1$ and $v_2(0) = V_2$.\n- A resistor of resistance $R$ connects the two capacitors at $t=0$.\n- The system is otherwise isolated (no other sources or conduction paths).\n- The system relaxes to equilibrium as $t \\to \\infty$.\n- The task is to derive the total dissipated energy in the resistor, $E_{dissipated}$, using charge conservation, Kirchhoff's laws, and the definition of energy stored in a capacitor. The result must be a closed-form expression in terms of $C_1$, $C_2$, $V_1$, and $V_2$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded**: The problem describes a classic RC circuit, a fundamental topic in electrical engineering and physics. The model of ideal capacitors and resistors is a standard and valid physical approximation. The principles cited (charge conservation, Kirchhoff's laws, capacitor energy) are cornerstone laws of electromagnetism. The problem is scientifically sound.\n- **Well-Posed**: The problem is clearly defined with all necessary initial conditions and component properties to determine the final state of the system and the energy difference between the initial and final states. A unique, stable equilibrium state exists, and thus a unique value for the total dissipated energy can be calculated.\n- **Objective**: The problem is stated using precise, technical, and unambiguous language, free from subjective content.\n- **Flaw Checklist**: The problem does not violate any of the specified criteria for invalidity. It is scientifically sound, formalizable, complete, physically realistic (within the ideal component model), well-posed, non-trivial, and verifiable.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. A solution will be derived from first principles as requested.\n\n### Derivation\nThe total energy dissipated in the resistor, $E_{dissipated}$, can be found by applying the law of conservation of energy. The total energy of the isolated system is composed of the electrostatic energy stored in the capacitors and the heat dissipated in the resistor. Since no energy is supplied to the system after $t=0$, the energy dissipated as heat must equal the reduction in the total electrostatic energy stored in the capacitors from the initial state ($t=0$) to the final equilibrium state ($t \\to \\infty$).\n\nLet $E_{initial}$ be the total energy stored in the capacitors at $t=0$, and $E_{final}$ be the total energy stored at $t \\to \\infty$. Then, the energy dissipated in the resistor is:\n$$E_{dissipated} = E_{initial} - E_{final}$$\n\n**1. Initial State Energy**\nThe energy stored in a capacitor $C$ with voltage $V$ across its terminals is given by $E = \\frac{1}{2} C V^2$.\nAt time $t=0$, the voltage on capacitor $C_1$ is $V_1$ and the voltage on capacitor $C_2$ is $V_2$. The total initial stored energy is the sum of the energies in each capacitor:\n$$E_{initial} = \\frac{1}{2} C_1 V_1^2 + \\frac{1}{2} C_2 V_2^2$$\n\n**2. Final State Energy**\nAfter the switch closes at $t=0$, charge flows between the capacitors through the resistor $R$. This process continues until the system reaches a new electrostatic equilibrium. Equilibrium is reached when the current $i(t)$ through the resistor becomes zero. According to Ohm's law, $i = (v_1 - v_2)/R$, the current is zero only when the voltage difference across the resistor is zero. This implies that the final voltages on the two capacitors are equal. Let this final equilibrium voltage be $V_f$.\n$$v_1(t \\to \\infty) = v_2(t \\to \\infty) = V_f$$\nThe system consisting of the two capacitors and the resistor is electrically isolated. Therefore, the total electric charge must be conserved throughout the process.\nThe initial total charge $Q_{initial}$ is the sum of the charges on each capacitor:\n$$Q_{initial} = C_1 V_1 + C_2 V_2$$\nThe final total charge $Q_{final}$ at equilibrium is:\n$$Q_{final} = C_1 V_f + C_2 V_f = (C_1 + C_2) V_f$$\nBy the principle of charge conservation, $Q_{initial} = Q_{final}$:\n$$C_1 V_1 + C_2 V_2 = (C_1 + C_2) V_f$$\nFrom this, we solve for the final equilibrium voltage $V_f$:\n$$V_f = \\frac{C_1 V_1 + C_2 V_2}{C_1 + C_2}$$\nThe total final energy $E_{final}$ stored in the capacitors is:\n$$E_{final} = \\frac{1}{2} C_1 V_f^2 + \\frac{1}{2} C_2 V_f^2 = \\frac{1}{2} (C_1 + C_2) V_f^2$$\nSubstituting the expression for $V_f$:\n$$E_{final} = \\frac{1}{2} (C_1 + C_2) \\left( \\frac{C_1 V_1 + C_2 V_2}{C_1 + C_2} \\right)^2 = \\frac{1}{2} \\frac{(C_1 V_1 + C_2 V_2)^2}{C_1 + C_2}$$\n\n**3. Total Dissipated Energy**\nNow we can compute the total energy dissipated in the resistor by subtracting the final energy from the initial energy:\n$$E_{dissipated} = E_{initial} - E_{final} = \\left( \\frac{1}{2} C_1 V_1^2 + \\frac{1}{2} C_2 V_2^2 \\right) - \\frac{1}{2} \\frac{(C_1 V_1 + C_2 V_2)^2}{C_1 + C_2}$$\nFactor out the $\\frac{1}{2}$ and place the terms over a common denominator $(C_1 + C_2)$:\n$$E_{dissipated} = \\frac{1}{2} \\left[ \\frac{(C_1 V_1^2 + C_2 V_2^2)(C_1 + C_2) - (C_1 V_1 + C_2 V_2)^2}{C_1 + C_2} \\right]$$\nExpand the numerator:\nFirst term: $(C_1 V_1^2 + C_2 V_2^2)(C_1 + C_2) = C_1^2 V_1^2 + C_1 C_2 V_1^2 + C_1 C_2 V_2^2 + C_2^2 V_2^2$\nSecond term: $(C_1 V_1 + C_2 V_2)^2 = C_1^2 V_1^2 + 2 C_1 C_2 V_1 V_2 + C_2^2 V_2^2$\nSubtracting the second term from the first:\nNumerator = $(C_1^2 V_1^2 + C_1 C_2 V_1^2 + C_1 C_2 V_2^2 + C_2^2 V_2^2) - (C_1^2 V_1^2 + 2 C_1 C_2 V_1 V_2 + C_2^2 V_2^2)$\nThe terms $C_1^2 V_1^2$ and $C_2^2 V_2^2$ cancel, leaving:\nNumerator = $C_1 C_2 V_1^2 + C_1 C_2 V_2^2 - 2 C_1 C_2 V_1 V_2$\nFactor out the common term $C_1 C_2$:\nNumerator = $C_1 C_2 (V_1^2 - 2 V_1 V_2 + V_2^2)$\nThis is a perfect square trinomial:\nNumerator = $C_1 C_2 (V_1 - V_2)^2$\nSubstituting this simplified numerator back into the expression for $E_{dissipated}$:\n$$E_{dissipated} = \\frac{1}{2} \\frac{C_1 C_2 (V_1 - V_2)^2}{C_1 + C_2}$$\nThis is the final closed-form expression for the total energy dissipated in the resistor. It depends only on the given capacitance and initial voltage values, and notably not on the resistance $R$. The resistance value only determines the rate at which this energy is dissipated, not the total amount.",
            "answer": "$$\\boxed{\\frac{C_1 C_2 (V_1 - V_2)^2}{2(C_1 + C_2)}}$$"
        },
        {
            "introduction": "Building on the concept of energy loss, we now turn to a practical optimization problem for a single CMOS logic gate. This exercise explores the critical trade-off between performance (gate delay) and power consumption by varying the supply voltage, $V_{DD}$. You will work with established models for delay and dynamic power to derive the Energy-Delay Product (EDP), a key figure of merit, and use calculus to determine the optimal $V_{DD}$ that minimizes it . This analysis is central to the strategy of voltage scaling in low-power digital design.",
            "id": "4267560",
            "problem": "A synchronous Complementary Metal–Oxide–Semiconductor (CMOS) logic gate with load capacitance $C$ switches at a clock frequency $f$ with average activity factor $\\alpha$ per cycle. Assume static (leakage) power is negligible compared to dynamic power in the operating regime of interest. For capacitive switching, use the well-tested base that the average dynamic power is given by the energy dissipated per transition per unit time, and that the gate propagation delay follows an alpha-power-law supply scaling rooted in the drain current–voltage characteristics of short-channel Metal–Oxide–Semiconductor Field-Effect Transistors (MOSFETs). Concretely, take the delay to scale as a positive constant of proportionality times $V_{DD}$ divided by a power of the effective overdrive, with exponent $\\beta$, where $V_{th}$ is the threshold voltage. Assume $0\\alpha\\leq 1$, $C0$, $f0$, $V_{DD}V_{th}0$, a delay proportionality constant $k0$, and an exponent $0\\beta3$.\n\nStarting from these bases, and without introducing any additional empirical fitting formulas:\n- Derive the Energy–Delay Product (EDP) as a function of $V_{DD}$ in terms of $\\alpha$, $C$, $k$, $V_{DD}$, $V_{th}$, and $\\beta$.\n- Then, determine the value of $V_{DD}$ that minimizes the EDP under the stated assumptions.\n\nExpress your final result as the minimizing supply voltage in Volts. Do not include units in the final boxed answer. No rounding is required; report the exact analytic expression.",
            "solution": "The problem requires the derivation of the Energy-Delay Product (EDP) for a CMOS logic gate and the determination of the supply voltage $V_{DD}$ that minimizes this product.\n\nFirst, we validate the problem statement.\n\n**Step 1: Extract Givens**\n- Logic gate type: Synchronous Complementary Metal–Oxide–Semiconductor (CMOS).\n- Load capacitance: $C  0$.\n- Clock frequency: $f  0$.\n- Average activity factor: $\\alpha$, with $0  \\alpha \\leq 1$.\n- Static (leakage) power is negligible.\n- Dynamic power model basis: \"average dynamic power is given by the energy dissipated per transition per unit time\".\n- Gate propagation delay model basis: \"alpha-power-law supply scaling\".\n- Gate propagation delay formula: $T_d = k \\frac{V_{DD}}{(V_{DD} - V_{th})^\\beta}$.\n- Delay proportionality constant: $k  0$.\n- Supply voltage: $V_{DD}$.\n- Threshold voltage: $V_{th}$.\n- Alpha-power-law exponent: $\\beta$, with $0  \\beta  3$.\n- Constraint: $V_{DD}  V_{th}  0$.\n\n**Step 2: Validate Using Extracted Givens**\n- **Scientifically Grounded:** The problem is based on standard, well-established models in digital integrated circuit design. The formula for dynamic power, $P_{dyn} = \\alpha C f V_{DD}^2$, is a cornerstone of CMOS power analysis. The alpha-power law for delay is a widely used semi-empirical model that captures the velocity saturation effects in short-channel MOSFETs. The parameters and their specified ranges are physically realistic.\n- **Well-Posed:** The problem is mathematically well-defined. It provides all necessary functions, parameters, and constraints to derive the EDP and perform the optimization. The objective is clear, and a unique, stable solution is expected from the calculus of variations.\n- **Objective:** The problem is stated in precise, technical language, free from subjectivity or ambiguity.\n\n**Step 3: Verdict and Action**\nThe problem is found to be valid. It is scientifically sound, well-posed, and objective. We proceed with the solution.\n\n**Derivation of the Energy-Delay Product (EDP)**\n\nThe EDP is defined as the product of the energy consumed per operation and the delay of that operation.\n\n1.  **Energy per Operation ($E$)**\n    The average dynamic power, $P_{dyn}$, is the energy dissipated per unit time. This dissipation occurs during the charging of the load capacitance $C$ from the supply voltage $V_{DD}$. For a full charge/discharge cycle, a total charge $Q = C V_{DD}$ is transferred from the supply to the capacitor and then to ground. The energy drawn from the supply during the charging phase is $E_{charge} = Q V_{DD} = (C V_{DD}) V_{DD} = C V_{DD}^2$. This energy is dissipated as heat, either in the pull-up network during charging or the pull-down network during discharging.\n\n    The average number of switching events (charge/discharge cycles) per second is the product of the clock frequency $f$ and the activity factor $\\alpha$.\n    Therefore, the average dynamic power is:\n    $$P_{dyn} = (\\text{Energy per switch}) \\times (\\text{Switches per second}) = (C V_{DD}^2) \\times (\\alpha f) = \\alpha C f V_{DD}^2$$\n    The energy per operation, which on average corresponds to the energy per clock cycle, is the average power divided by the frequency:\n    $$E = \\frac{P_{dyn}}{f} = \\frac{\\alpha C f V_{DD}^2}{f} = \\alpha C V_{DD}^2$$\n\n2.  **Delay per Operation ($T_d$)**\n    The problem provides the model for the gate propagation delay:\n    $$T_d = k \\frac{V_{DD}}{(V_{DD} - V_{th})^\\beta}$$\n    where $k$ is a positive proportionality constant, $V_{th}$ is the threshold voltage, and $\\beta$ is the alpha-power-law exponent.\n\n3.  **Energy-Delay Product ($EDP$)**\n    The EDP is the product of the energy $E$ and the delay $T_d$:\n    $$EDP(V_{DD}) = E \\times T_d = (\\alpha C V_{DD}^2) \\left( k \\frac{V_{DD}}{(V_{DD} - V_{th})^\\beta} \\right)$$\n    Combining terms, the EDP as a function of $V_{DD}$ is:\n    $$EDP(V_{DD}) = \\alpha C k \\frac{V_{DD}^3}{(V_{DD} - V_{th})^\\beta}$$\n    This completes the first part of the task.\n\n**Minimization of the EDP**\n\nTo find the supply voltage $V_{DD}$ that minimizes the EDP, we need to find the derivative of $EDP(V_{DD})$ with respect to $V_{DD}$ and set it to zero.\n$$\\frac{d(EDP)}{dV_{DD}} = 0$$\nThe terms $\\alpha$, $C$, and $k$ are positive constants, so they do not influence the location of the minimum. We can minimize the function $g(V_{DD}) = \\frac{V_{DD}^3}{(V_{DD} - V_{th})^\\beta}$.\n\nWe use the quotient rule for differentiation, $\\frac{d}{dx}\\left(\\frac{u}{v}\\right) = \\frac{u'v - uv'}{v^2}$, with $u(V_{DD}) = V_{DD}^3$ and $v(V_{DD}) = (V_{DD} - V_{th})^\\beta$.\nThe derivatives are $u' = 3V_{DD}^2$ and $v' = \\beta(V_{DD} - V_{th})^{\\beta-1}$.\n\n$$\\frac{dg}{dV_{DD}} = \\frac{(3V_{DD}^2)(V_{DD} - V_{th})^\\beta - (V_{DD}^3)(\\beta(V_{DD} - V_{th})^{\\beta-1})}{((V_{DD} - V_{th})^\\beta)^2}$$\nSetting the derivative to zero requires the numerator to be zero, as the denominator is non-zero for $V_{DD}  V_{th}$.\n$$3V_{DD}^2 (V_{DD} - V_{th})^\\beta - \\beta V_{DD}^3 (V_{DD} - V_{th})^{\\beta-1} = 0$$\nWe can factor out the term $V_{DD}^2 (V_{DD} - V_{th})^{\\beta-1}$. Since $V_{DD}  V_{th}  0$, this term is non-zero and can be divided out.\n$$V_{DD}^2 (V_{DD} - V_{th})^{\\beta-1} [3(V_{DD} - V_{th}) - \\beta V_{DD}] = 0$$\nThis simplifies to the expression inside the brackets being zero:\n$$3(V_{DD} - V_{th}) - \\beta V_{DD} = 0$$\nNow, we solve for $V_{DD}$:\n$$3V_{DD} - 3V_{th} - \\beta V_{DD} = 0$$\n$$V_{DD}(3 - \\beta) = 3V_{th}$$\n$$V_{DD,min} = \\frac{3V_{th}}{3 - \\beta}$$\nTo confirm this is a minimum, we can examine the sign of the first derivative. The sign is determined by the term $h(V_{DD}) = 3(V_{DD} - V_{th}) - \\beta V_{DD} = (3-\\beta)V_{DD} - 3V_{th}$. Given the constraint $0  \\beta  3$, the coefficient $(3-\\beta)$ is positive. Thus, for $V_{DD}  V_{DD,min}$, $h(V_{DD})  0$ and the EDP is decreasing. For $V_{DD}  V_{DD,min}$, $h(V_{DD})  0$ and the EDP is increasing. This confirms that $V_{DD,min}$ is a local minimum.\n\nFinally, we must check that the solution is physically valid, i.e., $V_{DD,min}  V_{th}$.\n$$\\frac{3V_{th}}{3 - \\beta}  V_{th}$$\nSince $V_{th}  0$, we can divide by it:\n$$\\frac{3}{3 - \\beta}  1$$\nSince $0  \\beta  3$, the denominator $(3 - \\beta)$ is positive, so we can multiply both sides by it without changing the inequality's direction:\n$$3  3 - \\beta$$\n$$0  -\\beta$$\n$$\\beta  0$$\nThis condition is given in the problem statement ($0  \\beta  3$), so the derived optimal voltage is indeed greater than the threshold voltage and is therefore a valid physical solution.",
            "answer": "$$\\boxed{\\frac{3 V_{th}}{3 - \\beta}}$$"
        },
        {
            "introduction": "While analytical models provide valuable insight, a deeper understanding requires accounting for non-ideal behaviors. This hands-on coding practice moves into the realm of numerical simulation to deconstruct the components of dynamic power in a CMOS inverter. You will implement a transient analysis to distinguish the energy used to charge the load capacitor from the energy wasted due to short-circuit current, observing firsthand how factors like input slew rate influence power efficiency . This exercise bridges the gap between theoretical equations and the practical, detailed analysis performed by industry-standard EDA tools.",
            "id": "4267558",
            "problem": "A complementary metal–oxide–semiconductor (CMOS) inverter is driven by a single-ended input that transitions from a logic high to a logic low with a controlled linear slew. The inverter drives a purely capacitive load. The supply voltage is a constant source. The goal is to separate the energy delivered from the supply into an energy component associated with charging the load capacitor and an energy component associated with short-circuit conduction through the simultaneous conduction of the pull-up and pull-down transistors during the transition.\n\nUse the following foundational definitions to construct the computation:\n- The instantaneous power delivered by a source is $p(t) = i(t) v(t)$.\n- The energy delivered over a time interval is $E = \\int_{t_0}^{t_1} p(t)\\, dt$.\n- The capacitor constitutive relation is $i_C(t) = C \\frac{d v_C(t)}{dt}$.\n- For a transistor pair in a CMOS inverter, the node voltage $v_{\\text{out}}(t)$ is governed by Kirchhoff's current law (KCL) at the output node: $C_L \\frac{d v_{\\text{out}}(t)}{dt} = i_p(t) - i_n(t)$, where $i_p(t)$ is the pull-up transistor current from the supply into the node, and $i_n(t)$ is the pull-down transistor current from the node to ground.\n\nYou must construct a time-domain model of a single-ended CMOS inverter that captures the overlapping conduction of the pull-up and pull-down devices during a falling input (from $V_{DD}$ to $0$ with a linear ramp). The supply current is defined as $i_{VDD}(t) = i_p(t)$, and the supply voltage is a constant $v_{VDD}(t) = V_{DD}$. The output node drives a pure capacitor $C_L$.\n\nModel the transistor currents with the Shichman–Hodges strong-inversion piecewise model with channel-length modulation, which is widely used for hand analysis and is acceptable as a numerical device-law approximation for this task:\n- For the pull-down (n-channel metal–oxide–semiconductor) transistor, define $V_{GS,n}(t) = v_{\\text{in}}(t)$, $V_{DS,n}(t) = v_{\\text{out}}(t)$, and threshold $V_{TN}$. If $V_{GS,n}(t) \\le V_{TN}$, then $i_n(t) = 0$. Otherwise,\n  - If $V_{DS,n}(t)  V_{GS,n}(t) - V_{TN}$, then $i_n(t) = k_n \\left( (V_{GS,n}(t) - V_{TN}) V_{DS,n}(t) - \\tfrac{1}{2} V_{DS,n}(t)^2 \\right) \\left( 1 + \\lambda V_{DS,n}(t) \\right)$.\n  - Else, $i_n(t) = \\tfrac{1}{2} k_n \\left( V_{GS,n}(t) - V_{TN} \\right)^2 \\left( 1 + \\lambda V_{DS,n}(t) \\right)$.\n- For the pull-up (p-channel metal–oxide–semiconductor) transistor, define $V_{SG,p}(t) = V_{DD} - v_{\\text{in}}(t)$, $V_{SD,p}(t) = V_{DD} - v_{\\text{out}}(t)$, and threshold $|V_{TP}|$. If $V_{SG,p}(t) \\le |V_{TP}|$, then $i_p(t) = 0$. Otherwise,\n  - If $V_{SD,p}(t)  V_{SG,p}(t) - |V_{TP}|$, then $i_p(t) = k_p \\left( (V_{SG,p}(t) - |V_{TP}|) V_{SD,p}(t) - \\tfrac{1}{2} V_{SD,p}(t)^2 \\right) \\left( 1 + \\lambda V_{SD,p}(t) \\right)$.\n  - Else, $i_p(t) = \\tfrac{1}{2} k_p \\left( V_{SG,p}(t) - |V_{TP}| \\right)^2 \\left( 1 + \\lambda V_{SD,p}(t) \\right)$.\n\nThe input voltage is a linear falling ramp $v_{\\text{in}}(t) = V_{DD} \\max\\left( 1 - \\frac{t}{t_{\\text{slew}}}, 0 \\right)$, and $v_{\\text{in}}(t)$ is held at $0$ for $t \\ge t_{\\text{slew}}$. Assume the inverter initially drives the output low, so $v_{\\text{out}}(0) = 0$.\n\nTasks:\n1. Numerically integrate the output node dynamic equation $C_L \\frac{d v_{\\text{out}}(t)}{dt} = i_p(t) - i_n(t)$ over a time window sufficiently long for the output to settle after the input transition. Use the specified device-law model above to compute $i_p(t)$ and $i_n(t)$ as functions of $v_{\\text{in}}(t)$ and $v_{\\text{out}}(t)$ throughout the simulation.\n2. Compute the total energy delivered by the supply over the simulated window, defined by $E_{\\text{total}} = \\int i_{VDD}(t) v_{VDD}(t)\\, dt$ with $i_{VDD}(t) = i_p(t)$ and $v_{VDD}(t) = V_{DD}$.\n3. Compute the energy attributable to charging the load capacitor during the rising output, defined by $E_{\\text{cap}} = \\int u(t)\\, i_C(t)\\, v_{VDD}(t)\\, dt$, where $i_C(t) = C_L \\frac{d v_{\\text{out}}(t)}{dt}$ and $u(t)$ is the unit step $u(t) = 1$ when $i_C(t) \\ge 0$ and $u(t) = 0$ when $i_C(t)  0$. This integral attributes only positive capacitor charging to the supply. Note that $v_{VDD}(t) = V_{DD}$ is constant.\n4. Define the short-circuit energy as $E_{\\text{sc}} = E_{\\text{total}} - E_{\\text{cap}}$.\n\nExpress all energies in joules. Your program must carry out the above computations for each test case and produce $E_{\\text{sc}}$ for each case.\n\nTest Suite:\nUse the following set of parameter values for five test cases with realistic, self-consistent values:\n- Case 1 (fast input): $V_{DD} = 1.0\\,\\mathrm{V}$, $C_L = 30 \\times 10^{-15}\\,\\mathrm{F}$, $t_{\\text{slew}} = 10 \\times 10^{-12}\\,\\mathrm{s}$, $k_n = 200 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $k_p = 120 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $V_{TN} = 0.35\\,\\mathrm{V}$, $|V_{TP}| = 0.35\\,\\mathrm{V}$, $\\lambda = 0.05\\,\\mathrm{V}^{-1}$.\n- Case 2 (moderate input): $V_{DD} = 1.0\\,\\mathrm{V}$, $C_L = 30 \\times 10^{-15}\\,\\mathrm{F}$, $t_{\\text{slew}} = 50 \\times 10^{-12}\\,\\mathrm{s}$, $k_n = 200 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $k_p = 120 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $V_{TN} = 0.35\\,\\mathrm{V}$, $|V_{TP}| = 0.35\\,\\mathrm{V}$, $\\lambda = 0.05\\,\\mathrm{V}^{-1}$.\n- Case 3 (slow input): $V_{DD} = 1.0\\,\\mathrm{V}$, $C_L = 30 \\times 10^{-15}\\,\\mathrm{F}$, $t_{\\text{slew}} = 200 \\times 10^{-12}\\,\\mathrm{s}$, $k_n = 200 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $k_p = 120 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $V_{TN} = 0.35\\,\\mathrm{V}$, $|V_{TP}| = 0.35\\,\\mathrm{V}$, $\\lambda = 0.05\\,\\mathrm{V}^{-1}$.\n- Case 4 (very slow input): $V_{DD} = 1.0\\,\\mathrm{V}$, $C_L = 30 \\times 10^{-15}\\,\\mathrm{F}$, $t_{\\text{slew}} = 1.0 \\times 10^{-9}\\,\\mathrm{s}$, $k_n = 200 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $k_p = 120 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $V_{TN} = 0.35\\,\\mathrm{V}$, $|V_{TP}| = 0.35\\,\\mathrm{V}$, $\\lambda = 0.05\\,\\mathrm{V}^{-1}$.\n- Case 5 (heavier load): $V_{DD} = 1.0\\,\\mathrm{V}$, $C_L = 100 \\times 10^{-15}\\,\\mathrm{F}$, $t_{\\text{slew}} = 50 \\times 10^{-12}\\,\\mathrm{s}$, $k_n = 200 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $k_p = 120 \\times 10^{-6}\\,\\mathrm{A/V^2}$, $V_{TN} = 0.35\\,\\mathrm{V}$, $|V_{TP}| = 0.35\\,\\mathrm{V}$, $\\lambda = 0.05\\,\\mathrm{V}^{-1}$.\n\nAnswer Specification and Output Format:\n- For each test case, compute the short-circuit energy $E_{\\text{sc}}$ in joules as a floating-point number.\n- Your program should produce a single line of output containing the list of results as a comma-separated list enclosed in square brackets, in the order of the cases above (for example, $\\left[ e_1, e_2, e_3, e_4, e_5 \\right]$). All entries must be in joules.",
            "solution": "The problem requires the calculation of the short-circuit energy dissipation, $E_{\\text{sc}}$, in a CMOS inverter during a low-to-high output transition triggered by a high-to-low input ramp. This is accomplished by performing a time-domain transient simulation of the circuit and separating the total energy drawn from the supply into components for charging the load capacitor and for short-circuit conduction.\n\nThe core of the analysis rests on solving the differential equation governing the output node voltage, $v_{\\text{out}}(t)$. This equation is derived from Kirchhoff's Current Law (KCL) at the output node:\n$$\nC_L \\frac{d v_{\\text{out}}(t)}{dt} = i_p(t) - i_n(t)\n$$\nHere, $C_L$ is the load capacitance, $i_p(t)$ is the current from the pull-up p-channel transistor, and $i_n(t)$ is the current sunk by the pull-down n-channel transistor. The initial condition is given as $v_{\\text{out}}(0) = 0\\ \\text{V}$, corresponding to a stable low output before the input transition begins.\n\nThe transistor currents $i_p(t)$ and $i_n(t)$ are highly nonlinear functions of their terminal voltages, which in turn depend on the input voltage $v_{\\text{in}}(t)$ and the output voltage $v_{\\text{out}}(t)$. The problem specifies the use of the Shichman–Hodges model for these currents.\n\nFor the n-channel transistor (pull-down):\nThe gate-source voltage is $V_{GS,n}(t) = v_{\\text{in}}(t)$ and the drain-source voltage is $V_{DS,n}(t) = v_{\\text{out}}(t)$. The transistor is in cutoff ($i_n(t) = 0$) if $V_{GS,n}(t) \\le V_{TN}$. Otherwise, it is in the linear region if $V_{DS,n}(t)  V_{GS,n}(t) - V_{TN}$ and in the saturation region if $V_{DS,n}(t) \\ge V_{GS,n}(t) - V_{TN}$. The current equations for these regions are provided in the problem statement.\n\nFor the p-channel transistor (pull-up):\nThe source-gate voltage is $V_{SG,p}(t) = V_{DD} - v_{\\text{in}}(t)$ and the source-drain voltage is $V_{SD,p}(t) = V_{DD} - v_{\\text{out}}(t)$. The transistor is in cutoff ($i_p(t) = 0$) if $V_{SG,p}(t) \\le |V_{TP}|$. Otherwise, it is in the linear region if $V_{SD,p}(t)  V_{SG,p}(t) - |V_{TP}|$ and in saturation if $V_{SD,p}(t) \\ge V_{SG,p}(t) - |V_{TP}|$.\n\nThe input voltage $v_{\\text{in}}(t)$ is a linear ramp falling from $V_{DD}$ to $0$ over a duration $t_{\\text{slew}}$:\n$$\nv_{\\text{in}}(t) = V_{DD} \\max\\left( 1 - \\frac{t}{t_{\\text{slew}}}, 0 \\right)\n$$\nGiven these definitions, the KCL equation becomes a first-order, nonlinear ordinary differential equation (ODE) for $v_{\\text{out}}(t)$:\n$$\n\\frac{d v_{\\text{out}}(t)}{dt} = \\frac{1}{C_L} \\left( i_p\\left(v_{\\text{in}}(t), v_{\\text{out}}(t)\\right) - i_n\\left(v_{\\text{in}}(t), v_{\\text{out}}(t)\\right) \\right)\n$$\nThis ODE is solved numerically using an appropriate solver, such as the `solve_ivp` function from the SciPy library. The simulation is run over a time interval sufficient for the output to settle to its final high state (close to $V_{DD}$). This yields the output voltage waveform $v_{\\text{out}}(t)$.\n\nOnce the functions $v_{\\text{in}}(t)$ and $v_{\\text{out}}(t)$ are known over the simulation time grid, the time-dependent currents $i_p(t)$ and $i_n(t)$ can be computed at each time step. From these, the required energy components are calculated via numerical integration (e.g., using the trapezoidal rule).\n\n1.  **Total Energy from Supply ($E_{\\text{total}}$)**: The supply voltage $v_{VDD}(t)$ is a constant $V_{DD}$, and the supply current is $i_{VDD}(t) = i_p(t)$. The total energy is the time integral of the instantaneous power $p(t) = v_{VDD}(t) i_{VDD}(t)$.\n    $$\n    E_{\\text{total}} = \\int_0^{t_{\\text{final}}} V_{DD} i_p(t) \\, dt = V_{DD} \\int_0^{t_{\\text{final}}} i_p(t) \\, dt\n    $$\n\n2.  **Capacitive Charging Energy ($E_{\\text{cap}}$)**: The problem defines this as the portion of the supply energy that contributes to charging the capacitor when its current is positive. The capacitor current is $i_C(t) = C_L \\frac{d v_{\\text{out}}(t)}{dt} = i_p(t) - i_n(t)$.\n    $$\n    E_{\\text{cap}} = \\int_0^{t_{\\text{final}}} u(t) i_C(t) v_{VDD}(t) \\, dt = V_{DD} \\int_0^{t_{\\text{final}}} \\max(i_p(t) - i_n(t), 0) \\, dt\n    $$\n    where $u(t)$ is a unit step function that is $1$ when $i_C(t) \\ge 0$ and $0$ otherwise. This integral isolates the energy drawn from the supply that results in a rising output voltage.\n\n3.  **Short-Circuit Energy ($E_{\\text{sc}}$)**: This is the remaining energy, which is dissipated as heat due to the current flowing directly from the supply through both transistors to ground when they are simultaneously conducting.\n    $$\n    E_{\\text{sc}} = E_{\\text{total}} - E_{\\text{cap}}\n    $$\nThe algorithm proceeds by iterating through each test case, setting the parameters, solving the ODE for $v_{\\text{out}}(t)$, calculating the time-series for the currents, performing the numerical integrations to find $E_{\\text{total}}$ and $E_{\\text{cap}}$, and finally computing their difference to obtain $E_{\\text{sc}}$. The final results are presented in joules.",
            "answer": "```python\nimport numpy as np\nfrom scipy.integrate import solve_ivp\n\ndef solve():\n    \"\"\"\n    Computes the short-circuit energy dissipation in a CMOS inverter for several test cases.\n    \"\"\"\n    test_cases = [\n        # Case 1 (fast input)\n        {\"VDD\": 1.0, \"CL\": 30e-15, \"tslew\": 10e-12, \"kn\": 200e-6, \"kp\": 120e-6, \"VTN\": 0.35, \"VTP_mag\": 0.35, \"lam\": 0.05},\n        # Case 2 (moderate input)\n        {\"VDD\": 1.0, \"CL\": 30e-15, \"tslew\": 50e-12, \"kn\": 200e-6, \"kp\": 120e-6, \"VTN\": 0.35, \"VTP_mag\": 0.35, \"lam\": 0.05},\n        # Case 3 (slow input)\n        {\"VDD\": 1.0, \"CL\": 30e-15, \"tslew\": 200e-12, \"kn\": 200e-6, \"kp\": 120e-6, \"VTN\": 0.35, \"VTP_mag\": 0.35, \"lam\": 0.05},\n        # Case 4 (very slow input)\n        {\"VDD\": 1.0, \"CL\": 30e-15, \"tslew\": 1.0e-9, \"kn\": 200e-6, \"kp\": 120e-6, \"VTN\": 0.35, \"VTP_mag\": 0.35, \"lam\": 0.05},\n        # Case 5 (heavier load)\n        {\"VDD\": 1.0, \"CL\": 100e-15, \"tslew\": 50e-12, \"kn\": 200e-6, \"kp\": 120e-6, \"VTN\": 0.35, \"VTP_mag\": 0.35, \"lam\": 0.05},\n    ]\n\n    results = []\n\n    t_sim_end = 4.0e-9\n    num_points = 4001\n    t_eval = np.linspace(0, t_sim_end, num_points)\n\n    for params in test_cases:\n        VDD, CL, tslew, kn, kp, VTN, VTP_mag, lam = (\n            params[\"VDD\"], params[\"CL\"], params[\"tslew\"], params[\"kn\"],\n            params[\"kp\"], params[\"VTN\"], params[\"VTP_mag\"], params[\"lam\"]\n        )\n\n        def get_in(v_in, v_out):\n            Vgs_n = v_in\n            Vds_n = v_out\n            if Vgs_n = VTN:\n                return 0.0\n            \n            Vds_n = max(Vds_n, 0.0)\n            Vov_n = Vgs_n - VTN\n            if Vds_n  Vov_n:  # Linear\n                i_n = kn * (Vov_n * Vds_n - 0.5 * Vds_n**2) * (1 + lam * Vds_n)\n            else:  # Saturation\n                i_n = 0.5 * kn * Vov_n**2 * (1 + lam * Vds_n)\n            return i_n\n\n        def get_ip(v_in, v_out):\n            Vsg_p = VDD - v_in\n            Vsd_p = VDD - v_out\n            if Vsg_p = VTP_mag:\n                return 0.0\n\n            Vsd_p = max(Vsd_p, 0.0)\n            Vov_p = Vsg_p - VTP_mag\n            if Vsd_p  Vov_p:  # Linear\n                i_p = kp * (Vov_p * Vsd_p - 0.5 * Vsd_p**2) * (1 + lam * Vsd_p)\n            else:  # Saturation\n                i_p = 0.5 * kp * Vov_p**2 * (1 + lam * Vsd_p)\n            return i_p\n\n        def get_vin_scalar(t):\n            return VDD * max(1 - t / tslew, 0.0) if t = tslew else 0.0\n\n        def model(t, y):\n            v_out = y[0]\n            v_in = get_vin_scalar(t)\n            v_out_clipped = np.clip(v_out, 0, VDD)\n            ip = get_ip(v_in, v_out_clipped)\n            in_ = get_in(v_in, v_out_clipped)\n            dv_out_dt = (ip - in_) / CL\n            return [dv_out_dt]\n\n        v_out_initial = [0.0]\n        t_span = (0, t_sim_end)\n\n        sol = solve_ivp(\n            fun=model,\n            t_span=t_span,\n            y0=v_out_initial,\n            method='RK45',\n            t_eval=t_eval,\n            atol=1e-12,\n            rtol=1e-9\n        )\n\n        t_points = sol.t\n        v_out_points = sol.y[0]\n\n        v_in_points = VDD * np.maximum(1 - t_points / tslew, 0)\n        \n        ip_points = np.zeros_like(t_points)\n        in_points = np.zeros_like(t_points)\n        v_out_clipped_points = np.clip(v_out_points, 0, VDD)\n\n        for i in range(len(t_points)):\n            ip_points[i] = get_ip(v_in_points[i], v_out_clipped_points[i])\n            in_points[i] = get_in(v_in_points[i], v_out_clipped_points[i])\n            \n        E_total = VDD * np.trapz(ip_points, t_points)\n\n        i_C_points = ip_points - in_points\n        i_C_charging_points = np.maximum(i_C_points, 0)\n        E_cap = VDD * np.trapz(i_C_charging_points, t_points)\n        \n        E_sc = E_total - E_cap\n        results.append(E_sc)\n\n    print(f\"[{','.join(f'{r:.6e}' for r in results)}]\")\n\nsolve()\n```"
        }
    ]
}
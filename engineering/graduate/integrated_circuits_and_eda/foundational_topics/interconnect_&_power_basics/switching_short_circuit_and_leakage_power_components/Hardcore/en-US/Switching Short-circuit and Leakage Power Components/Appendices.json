{
    "hands_on_practices": [
        {
            "introduction": "Dynamic power, the energy consumed during logic transitions, is a primary concern in CMOS circuit design. This power is directly proportional to the total capacitance being charged and discharged at a node. This first exercise provides foundational practice in identifying and summing the various capacitive components that constitute the total load on a logic gate's output, including internal, interconnect, and fan-out capacitances. By applying a given activity factor, you will then calculate the *effective switched capacitance*, a key parameter used in modern EDA tools for average power analysis. ",
            "id": "4303318",
            "problem": "A rail-to-rail Complementary Metal-Oxide-Semiconductor (CMOS) inverter in a synthesized datapath designed using Electronic Design Automation (EDA) tools drives a single net that fans out to $4$ identical logic gates. The interconnect associated with the net presents a lumped capacitance of $C_{\\mathrm{wire}} = 30\\ \\mathrm{fF}$. Each receiving gate contributes an input gate capacitance of $C_{\\mathrm{in}} = 5\\ \\mathrm{fF}$, and the driving inverter’s output node has an internal diffusion capacitance of $C_{\\mathrm{int}} = 10\\ \\mathrm{fF}$. Assume the following:\n- All capacitances may be treated as effective lumped-to-ground capacitances at the switching output node.\n- Short-circuit and leakage mechanisms are neglected for this computation; only energy associated with charging and discharging capacitances is considered.\n- The output node undergoes a random data-dependent activity characterized by an activity factor $\\alpha = 0.1$, interpreted as the average number of $0 \\rightarrow 1$ transitions per clock cycle.\n\nStarting from first principles about capacitor charging energy and average power under stochastic switching, determine the effective switched capacitance $C_{\\mathrm{eff}}$ that multiplies $V_{\\mathrm{DD}}^{2} f$ in the average dynamic power model for this node. Express your final answer in femtofarads. No rounding is required.",
            "solution": "The problem asks for the effective switched capacitance, $C_{\\mathrm{eff}}$, for a CMOS inverter driving a specific load. The average dynamic power consumption, $P_{\\mathrm{dyn}}$, of a CMOS logic gate is given by the product of the energy consumed per switching event and the frequency of these events.\n\nFirst, let us establish the principles of dynamic power consumption. In a rail-to-rail CMOS inverter, power is primarily consumed during the charging of the output load capacitance. When the output transitions from a logic low (voltage $0$) to a logic high (voltage $V_{\\mathrm{DD}}$), the PMOS transistor turns on, connecting the output node to the power supply $V_{\\mathrm{DD}}$. The energy drawn from the supply to charge the total load capacitance, $C_{\\mathrm{total}}$, from $0$ to $V_{\\mathrm{DD}}$ is given by:\n$$E_{\\mathrm{charge}} = \\int V_{\\mathrm{DD}} \\cdot i_C(t) dt = V_{\\mathrm{DD}} \\int dQ = V_{\\mathrm{DD}} (C_{\\mathrm{total}} V_{\\mathrm{DD}}) = C_{\\mathrm{total}} V_{\\mathrm{DD}}^2$$\nOf this energy, half is stored in the capacitor ($E_{\\mathrm{stored}} = \\frac{1}{2} C_{\\mathrm{total}} V_{\\mathrm{DD}}^2$) and the other half is dissipated as heat in the on-resistance of the PMOS transistor. During a high-to-low transition ($V_{\\mathrm{DD}} \\rightarrow 0$), the stored energy is dissipated as heat through the NMOS transistor, but no energy is drawn from the supply $V_{\\mathrm{DD}}$. Therefore, the total energy dissipated from the supply for one full switching cycle ($0 \\rightarrow 1 \\rightarrow 0$) is $C_{\\mathrm{total}} V_{\\mathrm{DD}}^2$.\n\nThe average dynamic power is the total energy consumed per unit time. Let $f$ be the clock frequency. The activity factor, $\\alpha$, is defined as the average number of energy-consuming transitions (specifically, $0 \\rightarrow 1$) per clock cycle. The average frequency of these charging events is therefore $\\alpha f$.\n\nThe average dynamic power, $P_{\\mathrm{dyn}}$, can thus be expressed as:\n$$P_{\\mathrm{dyn}} = (\\text{Energy per } 0 \\rightarrow 1 \\text{ transition}) \\times (\\text{Average frequency of } 0 \\rightarrow 1 \\text{ transitions})$$\n$$P_{\\mathrm{dyn}} = E_{\\mathrm{charge}} \\times (\\alpha f) = (C_{\\mathrm{total}} V_{\\mathrm{DD}}^2) \\times (\\alpha f)$$\nThis can be rearranged as:\n$$P_{\\mathrm{dyn}} = \\alpha C_{\\mathrm{total}} V_{\\mathrm{DD}}^2 f$$\n\nThe problem statement provides an alternative model for the average dynamic power: $P = C_{\\mathrm{eff}} V_{\\mathrm{DD}}^2 f$. By comparing this with our derived expression for $P_{\\mathrm{dyn}}$, we can directly relate the effective switched capacitance, $C_{\\mathrm{eff}}$, to the total capacitance, $C_{\\mathrm{total}}$, and the activity factor, $\\alpha$:\n$$C_{\\mathrm{eff}} V_{\\mathrm{DD}}^2 f = \\alpha C_{\\mathrm{total}} V_{\\mathrm{DD}}^2 f$$\n$$\\implies C_{\\mathrm{eff}} = \\alpha C_{\\mathrm{total}}$$\n\nThe next step is to calculate the total load capacitance, $C_{\\mathrm{total}}$, at the output node of the inverter. The problem states that all capacitances can be lumped together. The total capacitance is the sum of the inverter's internal diffusion capacitance, the interconnect (wire) capacitance, and the input capacitance of all driven gates.\n\nThe given values are:\n- Internal diffusion capacitance: $C_{\\mathrm{int}} = 10\\ \\mathrm{fF}$\n- Interconnect wire capacitance: $C_{\\mathrm{wire}} = 30\\ \\mathrm{fF}$\n- Number of fan-out gates: $N = 4$\n- Input capacitance per fan-out gate: $C_{\\mathrm{in}} = 5\\ \\mathrm{fF}$\n- Activity factor: $\\alpha = 0.1$\n\nThe total load capacitance from the fan-out gates is the number of gates multiplied by the input capacitance of each gate:\n$$C_{\\mathrm{load}} = N \\times C_{\\mathrm{in}} = 4 \\times 5\\ \\mathrm{fF} = 20\\ \\mathrm{fF}$$\nThe total capacitance, $C_{\\mathrm{total}}$, at the output node is the sum of all contributing capacitances:\n$$C_{\\mathrm{total}} = C_{\\mathrm{int}} + C_{\\mathrm{wire}} + C_{\\mathrm{load}}$$\n$$C_{\\mathrm{total}} = 10\\ \\mathrm{fF} + 30\\ \\mathrm{fF} + 20\\ \\mathrm{fF} = 60\\ \\mathrm{fF}$$\n\nFinally, we can compute the effective switched capacitance, $C_{\\mathrm{eff}}$, using the derived relationship $C_{\\mathrm{eff}} = \\alpha C_{\\mathrm{total}}$:\n$$C_{\\mathrm{eff}} = 0.1 \\times 60\\ \\mathrm{fF}$$\n$$C_{\\mathrm{eff}} = 6\\ \\mathrm{fF}$$\n\nThis value represents the portion of the total physical capacitance that is, on average, switched every clock cycle, and it is the correct coefficient for the given power model. The unit is femtofarads as requested.",
            "answer": "$$\\boxed{6}$$"
        },
        {
            "introduction": "As technology scales, static power due to subthreshold leakage has become as critical as dynamic power. This practice explores the \"stack effect,\" a fundamental low-power design technique that dramatically reduces leakage by using series-connected \"off\" transistors. You will model the leakage current through an NMOS stack in a NAND gate, accounting for physical phenomena like Drain-Induced Barrier Lowering (DIBL) and the body effect to determine the leakage reduction compared to a single transistor. This analysis demonstrates how circuit topology can be leveraged to mitigate leakage at the physical level. ",
            "id": "4303298",
            "problem": "A two-input Complementary Metal-Oxide-Semiconductor (CMOS) Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) NAND gate in a modern low-voltage process is powered at supply voltage $V_{DD} = 0.8$. Both inputs are held at $0$, so the pull-down network consists of two identical off $n$-channel MOSFETs in series. The output is held high at $V_{DD}$ by the pull-up network, and the intermediate internal node between the two series $n$-channel MOSFETs floats to a steady-state voltage $V_{x}$ determined by leakage current continuity. Assume the $n$-channel MOSFET bodies are tied to ground, and that source-to-body junctions remain reverse-biased.\n\nStarting from a physically grounded subthreshold conduction model based on diffusion transport, the subthreshold drain current for an $n$-channel MOSFET under low-inversion is approximated by\n$$\nI_{\\text{sub}} \\approx I_{0} \\exp\\!\\left(\\frac{V_{gs} - V_{th,\\text{eff}} + \\sigma V_{ds}}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_{ds}}{V_{T}}\\right)\\right),\n$$\nwhere $I_{0}$ is a technology-dependent pre-exponential, $V_{gs}$ is the gate-to-source voltage, $V_{ds}$ is the drain-to-source voltage, $V_{T}$ is the thermal voltage at the operating temperature, $n$ is the subthreshold slope factor, and $\\sigma$ is the Drain-Induced Barrier Lowering (DIBL) coefficient. The effective threshold voltage with body effect is\n$$\nV_{th,\\text{eff}} = V_{th0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_{sb}} - \\sqrt{2\\phi_{F}}\\right),\n$$\nwhere $V_{th0}$ is the zero-bias threshold voltage, $\\gamma$ is the body-effect coefficient, $\\phi_{F}$ is the Fermi potential, and $V_{sb}$ is the source-to-body voltage. The pre-exponential $I_{0}$ may be taken identical for the series devices and cancels in ratios.\n\nFor the two-transistor stack in the off state with both gates at $0$, the top transistor has $V_{gs}^{(t)} = -V_x$, $V_{ds}^{(t)} = V_{DD} - V_x$, $V_{sb}^{(t)} = V_x$, and the bottom transistor has $V_{gs}^{(b)} = 0$, $V_{ds}^{(b)} = V_x$, $V_{sb}^{(b)} = 0$. At steady state, the series leakage currents are equal, $I_{\\text{sub}}^{(t)} = I_{\\text{sub}}^{(b)}$, which implicitly determines $V_{x}$.\n\nUse the above physically motivated model and the following parameter values at room temperature for a representative advanced node:\n- $V_{DD} = 0.8$,\n- $V_{T} = 0.0259$,\n- $n = 1.5$,\n- $V_{th0} = 0.25$,\n- $\\gamma = 0.4$,\n- $2\\phi_{F} = 0.6$,\n- $\\sigma = 0.08$.\n\nDerive the equality condition for $V_{x}$ from first principles and solve for $V_{x}$. Then compute the leakage reduction ratio\n$$\nR \\equiv \\frac{I_{\\text{stack}}}{I_{\\text{single}}},\n$$\nwhere $I_{\\text{stack}}$ is the stack leakage equal to the series subthreshold current. Round your final numerical answer for $R$ to three significant figures, expressed as a unitless decimal number.",
            "solution": "The problem asks for the determination of the intermediate node voltage $V_x$ in a two-transistor NMOS stack in the off state, and subsequently, the calculation of the leakage reduction ratio $R$ compared to a single off transistor. The solution proceeds by first establishing the equation for $V_x$ from the principle of current continuity and then using its solution to compute $R$.\n\n### Part 1: Derivation and Solution for the Intermediate Voltage $V_x$\n\nWe are given the subthreshold current model for an n-channel MOSFET:\n$$I_{\\text{sub}} \\approx I_{0} \\exp\\!\\left(\\frac{V_{gs} - V_{th,\\text{eff}} + \\sigma V_{ds}}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_{ds}}{V_{T}}\\right)\\right)$$\nand the effective threshold voltage:\n$$V_{th,\\text{eff}} = V_{th0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_{sb}} - \\sqrt{2\\phi_{F}}\\right)$$\n\nLet the top transistor be denoted by $(t)$ and the bottom transistor by $(b)$. The output node of the NAND gate is at $V_{DD}$, the inputs are at $0$, and the source of the bottom transistor is at ground ($0$). The intermediate node between the two series transistors is at a voltage $V_x$.\n\nFor the **top transistor (t)**, its drain is connected to the output, its source is the intermediate node, its gate is at $0$, and its body is at ground. The voltages are:\n- Gate-to-source voltage: $V_{gs}^{(t)} = V_g - V_s = 0 - V_x = -V_x$\n- Drain-to-source voltage: $V_{ds}^{(t)} = V_d - V_s = V_{DD} - V_x$\n- Source-to-body voltage: $V_{sb}^{(t)} = V_s - V_b = V_x - 0 = V_x$\n\nThe effective threshold voltage for the top transistor is affected by the body effect:\n$$V_{th,\\text{eff}}^{(t)} = V_{th0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_x} - \\sqrt{2\\phi_{F}}\\right)$$\nThe subthreshold current is:\n$$I_{\\text{sub}}^{(t)} = I_{0} \\exp\\!\\left(\\frac{-V_x - V_{th,\\text{eff}}^{(t)} + \\sigma (V_{DD} - V_x)}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_{DD}-V_x}{V_{T}}\\right)\\right)$$\n\nFor the **bottom transistor (b)**, its drain is the intermediate node, its source is at ground, its gate is at $0$, and its body is at ground. The voltages are:\n- Gate-to-source voltage: $V_{gs}^{(b)} = V_g - V_s = 0 - 0 = 0$\n- Drain-to-source voltage: $V_{ds}^{(b)} = V_d - V_s = V_x - 0 = V_x$\n- Source-to-body voltage: $V_{sb}^{(b)} = V_s - V_b = 0 - 0 = 0$\n\nThe effective threshold voltage for the bottom transistor has no body effect:\n$$V_{th,\\text{eff}}^{(b)} = V_{th0}$$\nThe subthreshold current is:\n$$I_{\\text{sub}}^{(b)} = I_{0} \\exp\\!\\left(\\frac{0 - V_{th0} + \\sigma V_x}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\n\nAt steady state, the currents through the two series transistors must be equal: $I_{\\text{sub}}^{(t)} = I_{\\text{sub}}^{(b)}$.\n$$I_{0} \\exp\\!\\left(\\frac{-V_x - V_{th,\\text{eff}}^{(t)} + \\sigma (V_{DD}-V_x)}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_{DD}-V_x}{V_{T}}\\right)\\right) = I_{0} \\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_x}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\nThe $I_0$ term cancels. Taking the natural logarithm of both sides:\n$$\\frac{-V_x - V_{th,\\text{eff}}^{(t)} + \\sigma (V_{DD}-V_x)}{n V_{T}} + \\ln\\left(1 - \\exp\\!\\left(-\\frac{V_{DD}-V_x}{V_{T}}\\right)\\right) = \\frac{-V_{th0} + \\sigma V_x}{n V_{T}} + \\ln\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\nWe expect $V_x$ to be a small fraction of $V_{DD}$. Thus, $V_{DD}-V_x$ is much larger than $V_T$. The term $\\exp(-\\frac{V_{DD}-V_x}{V_T})$ is negligible, and $\\ln(1 - \\exp(-\\frac{V_{DD}-V_x}{V_T})) \\approx \\ln(1) = 0$.\nThe equation simplifies to:\n$$\\frac{-V_x - V_{th,\\text{eff}}^{(t)} + \\sigma (V_{DD}-V_x)}{n V_{T}} = \\frac{-V_{th0} + \\sigma V_x}{n V_{T}} + \\ln\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\nMultiplying by $n V_T$ and substituting the expression for $V_{th,\\text{eff}}^{(t)}$:\n$$-V_x - \\left(V_{th0} + \\gamma\\left(\\sqrt{2\\phi_{F} + V_x} - \\sqrt{2\\phi_{F}}\\right)\\right) + \\sigma (V_{DD}-V_x) = -V_{th0} + \\sigma V_x + nV_T\\ln\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\nThe $V_{th0}$ terms cancel. Rearranging the terms to isolate constants and the terms involving $V_x$:\n$$\\sigma V_{DD} + \\gamma\\sqrt{2\\phi_{F}} = V_x + \\gamma\\sqrt{2\\phi_{F} + V_x} + \\sigma V_x + \\sigma V_x + nV_T\\ln\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\nThis gives the final transcendental equation for $V_x$:\n$$\\sigma V_{DD} + \\gamma\\sqrt{2\\phi_{F}} = (1+2\\sigma)V_x + \\gamma\\sqrt{2\\phi_{F}+V_x} + nV_T \\ln\\left(1 - \\exp\\left(-\\frac{V_x}{V_T}\\right)\\right)$$\nWe now substitute the given numerical values:\n- $V_{DD} = 0.8$\n- $V_{T} = 0.0259$\n- $n = 1.5$\n- $\\gamma = 0.4$\n- $2\\phi_{F} = 0.6$\n- $\\sigma = 0.08$\n\nLeft-hand side (LHS):\n$$LHS = (0.08)(0.8) + (0.4)\\sqrt{0.6} = 0.064 + 0.309838... = 0.373838...$$\nRight-hand side (RHS):\n$$RHS = (1+2(0.08))V_x + 0.4\\sqrt{0.6+V_x} + (1.5)(0.0259)\\ln\\left(1 - \\exp\\left(-\\frac{V_x}{0.0259}\\right)\\right)$$\n$$RHS = 1.16V_x + 0.4\\sqrt{0.6+V_x} + 0.03885\\ln\\left(1 - \\exp\\left(-\\frac{V_x}{0.0259}\\right)\\right)$$\nThis non-linear equation must be solved for $V_x$ numerically. Iterative methods (e.g., Newton-Raphson or bisection) yield the solution. The solution is found to be:\n$$V_x \\approx 0.0497 \\, \\text{V}$$\n\n### Part 2: Calculation of the Leakage Reduction Ratio $R$\n\nThe leakage reduction ratio is defined as $R \\equiv \\frac{I_{\\text{stack}}}{I_{\\text{single}}}$.\nThe stack leakage, $I_{\\text{stack}}$, is the current flowing through the series combination, which is $I_{\\text{sub}}^{(b)}$ (or $I_{\\text{sub}}^{(t)}$). Using the expression for $I_{\\text{sub}}^{(b)}$ is more direct:\n$$I_{\\text{stack}} = I_{\\text{sub}}^{(b)} = I_{0} \\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_x}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)$$\nThe leakage of a single off-transistor, $I_{\\text{single}}$, has $V_{gs}=0$, $V_{ds}=V_{DD}$, and $V_{sb}=0$. Its threshold voltage is $V_{th0}$.\n$$I_{\\text{single}} = I_{0} \\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_{DD}}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_{DD}}{V_{T}}\\right)\\right)$$\nThe ratio $R$ is:\n$$R = \\frac{I_{0} \\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_x}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)\\right)}{I_{0} \\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_{DD}}{n V_{T}}\\right)\\left(1 - \\exp\\!\\left(-\\frac{V_{DD}}{V_{T}}\\right)\\right)}$$\nThe $I_0$ terms cancel. We can separate the exponential terms and the drain voltage dependent terms:\n$$R = \\frac{\\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_x}{n V_{T}}\\right)}{\\exp\\!\\left(\\frac{-V_{th0} + \\sigma V_{DD}}{n V_{T}}\\right)} \\times \\frac{1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)}{1 - \\exp\\!\\left(-\\frac{V_{DD}}{V_{T}}\\right)}$$\n$$R = \\exp\\!\\left(\\frac{(-V_{th0} + \\sigma V_x) - (-V_{th0} + \\sigma V_{DD})}{n V_{T}}\\right) \\times \\frac{1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)}{1 - \\exp\\!\\left(-\\frac{V_{DD}}{V_{T}}\\right)}$$\nSimplifying the exponent:\n$$R = \\exp\\!\\left(\\frac{\\sigma (V_x - V_{DD})}{n V_{T}}\\right) \\times \\frac{1 - \\exp\\!\\left(-\\frac{V_x}{V_{T}}\\right)}{1 - \\exp\\!\\left(-\\frac{V_{DD}}{V_{T}}\\right)}$$\nNow, we substitute the numerical values, using the calculated $V_x \\approx 0.0497$:\nThe exponent in the first term:\n$$\\frac{\\sigma (V_x - V_{DD})}{n V_{T}} = \\frac{0.08 (0.0497 - 0.8)}{1.5 \\times 0.0259} = \\frac{0.08 (-0.7503)}{0.03885} = \\frac{-0.060024}{0.03885} \\approx -1.545$$\nThe first factor is $\\exp(-1.545) \\approx 0.2133$.\n\nThe second factor is the ratio of the $(1-\\exp(\\dots))$ terms:\n- Numerator: $1 - \\exp(-\\frac{V_x}{V_T}) = 1 - \\exp(-\\frac{0.0497}{0.0259}) = 1 - \\exp(-1.9189) \\approx 1 - 0.1468 = 0.8532$\n- Denominator: $1 - \\exp(-\\frac{V_{DD}}{V_T}) = 1 - \\exp(-\\frac{0.8}{0.0259}) = 1 - \\exp(-30.888) \\approx 1 - 2.8 \\times 10^{-14} \\approx 1$\n\nCombining these factors to find $R$:\n$$R \\approx 0.2133 \\times \\frac{0.8532}{1} \\approx 0.18198$$\nRounding the final answer to three significant figures gives $0.182$.",
            "answer": "$$\\boxed{0.182}$$"
        },
        {
            "introduction": "Theoretical models for switching and leakage power provide a strong foundation, but real-world circuit behavior involves the complex interplay of these effects. This final practice bridges theory and practice by having you analyze simulated waveforms from a SPICE tool, a standard task in circuit design. By integrating the supply current during a logic transition, you will calculate the total energy drawn from the source and then systematically dissect it to isolate the ideal capacitive switching energy from the energy lost to short-circuit current and background leakage. This exercise provides a tangible understanding of how different power components manifest in a transient simulation. ",
            "id": "4303254",
            "problem": "A Complementary Metal-Oxide-Semiconductor (CMOS) inverter in a $65\\,\\mathrm{nm}$ process is simulated using the Simulation Program with Integrated Circuit Emphasis (SPICE). The supply voltage is $V_{DD} = 1.0\\,\\mathrm{V}$. The inverter drives an effective switching capacitance $C_{\\mathrm{eff}} = 12\\,\\mathrm{fF}$ and is powered through a power-delivery resistance $R_{\\mathrm{pd}} = 1.0\\,\\Omega$ between the ideal voltage source and the inverter’s local supply node. A single output $0 \\rightarrow 1$ transition occurs over $40\\,\\mathrm{ps}$ following a linear input ramp. The SPICE-reported supply current at the ideal source node, $I_{VDD}(t)$, includes a baseline leakage of $I_{\\mathrm{leak}} = 10\\,\\mu\\mathrm{A}$.\n\nThe output node voltage waveform $V_{\\mathrm{out}}(t)$ during the $0 \\rightarrow 1$ transition can be approximated as piecewise linear:\n- For $t \\in [0, 10]\\,\\mathrm{ps}$, $V_{\\mathrm{out}}(t)$ rises from $0\\,\\mathrm{V}$ to $0.2\\,\\mathrm{V}$ linearly.\n- For $t \\in [10, 30]\\,\\mathrm{ps}$, $V_{\\mathrm{out}}(t)$ rises from $0.2\\,\\mathrm{V}$ to $0.9\\,\\mathrm{V}$ linearly.\n- For $t \\in [30, 40]\\,\\mathrm{ps}$, $V_{\\mathrm{out}}(t)$ rises from $0.9\\,\\mathrm{V}$ to $1.0\\,\\mathrm{V}$ linearly.\n\nThe corresponding SPICE-reported supply current $I_{VDD}(t)$ (including leakage) is piecewise constant over the same subintervals:\n- For $t \\in [0, 10]\\,\\mathrm{ps}$, $I_{VDD}(t) = 0.610\\,\\mathrm{mA}$.\n- For $t \\in [10, 30]\\,\\mathrm{ps}$, $I_{VDD}(t) = 0.610\\,\\mathrm{mA}$.\n- For $t \\in [30, 40]\\,\\mathrm{ps}$, $I_{VDD}(t) = 0.130\\,\\mathrm{mA}$.\n\nStarting from first principles applicable to integrated circuits and electronic design automation (EDA), use the definitions of instantaneous power and capacitor current to compute the energy drawn from the supply during the $0 \\rightarrow 1$ transition, remove the leakage contribution, and compare the result to the ideal capacitive switching energy $C_{\\mathrm{eff}} V_{DD}^{2}$. Report the combined short-circuit plus resistive grid loss energy per $0 \\rightarrow 1$ transition as a single value.\n\nExpress the final energy in femtojoules and round your answer to four significant figures. Use radians only if any angles appear, and do not include a percentage sign in any intermediate or final quantity.",
            "solution": "First, we calculate the total energy, $E_{\\mathrm{total}}$, drawn from the ideal supply voltage source $V_{DD}$ during the transition period $T = 40\\,\\mathrm{ps}$. The instantaneous power drawn from the ideal source is $P(t) = V_{DD} \\cdot I_{VDD}(t)$. Since $V_{DD}$ is constant, the total energy is the integral of the power over the transition time:\n$$E_{\\mathrm{total}} = \\int_{0}^{T} V_{DD} \\cdot I_{VDD}(t) \\, dt = V_{DD} \\int_{0}^{T} I_{VDD}(t) \\, dt$$\nThe current $I_{VDD}(t)$ is given as a piecewise constant function. The integral can be calculated as a sum over the three specified intervals:\n$$E_{\\mathrm{total}} = V_{DD} \\left( I_{VDD,1} \\Delta t_1 + I_{VDD,2} \\Delta t_2 + I_{VDD,3} \\Delta t_3 \\right)$$\nSubstituting the given values:\n$$V_{DD} = 1.0\\,\\mathrm{V}$$\n$$I_{VDD,1} = 0.610\\,\\mathrm{mA} = 0.610 \\times 10^{-3}\\,\\mathrm{A}$$\n$$\\Delta t_1 = 10\\,\\mathrm{ps} = 10 \\times 10^{-12}\\,\\mathrm{s}$$\n$$I_{VDD,2} = 0.610\\,\\mathrm{mA} = 0.610 \\times 10^{-3}\\,\\mathrm{A}$$\n$$\\Delta t_2 = (30 - 10)\\,\\mathrm{ps} = 20 \\times 10^{-12}\\,\\mathrm{s}$$\n$$I_{VDD,3} = 0.130\\,\\mathrm{mA} = 0.130 \\times 10^{-3}\\,\\mathrm{A}$$\n$$\\Delta t_3 = (40 - 30)\\,\\mathrm{ps} = 10 \\times 10^{-12}\\,\\mathrm{s}$$\n$$E_{\\mathrm{total}} = (1.0\\,\\mathrm{V}) \\left[ (0.610 \\times 10^{-3}\\,\\mathrm{A})(10 \\times 10^{-12}\\,\\mathrm{s}) + (0.610 \\times 10^{-3}\\,\\mathrm{A})(20 \\times 10^{-12}\\,\\mathrm{s}) + (0.130 \\times 10^{-3}\\,\\mathrm{A})(10 \\times 10^{-12}\\,\\mathrm{s}) \\right]$$\n$$E_{\\mathrm{total}} = 1.0 \\times [6.10 \\times 10^{-15} + 12.2 \\times 10^{-15} + 1.30 \\times 10^{-15}]\\,\\mathrm{J} = 19.6 \\times 10^{-15}\\,\\mathrm{J}$$\nThis total energy is $E_{\\mathrm{total}} = 19.6\\,\\mathrm{fJ}$.\n\nNext, we remove the contribution from the baseline leakage current, $I_{\\mathrm{leak}}$. The energy consumed by leakage during the transition time $T = \\Delta t_1 + \\Delta t_2 + \\Delta t_3 = 40\\,\\mathrm{ps}$ is:\n$$E_{\\mathrm{leak}} = V_{DD} \\cdot I_{\\mathrm{leak}} \\cdot T$$\n$$E_{\\mathrm{leak}} = (1.0\\,\\mathrm{V}) \\cdot (10 \\times 10^{-6}\\,\\mathrm{A}) \\cdot (40 \\times 10^{-12}\\,\\mathrm{s}) = 400 \\times 10^{-18}\\,\\mathrm{J} = 0.4 \\times 10^{-15}\\,\\mathrm{J} = 0.400\\,\\mathrm{fJ}$$\nThe total dynamic energy, $E_{\\mathrm{dynamic}}$, drawn from the supply for the switching event is the total energy minus the leakage energy:\n$$E_{\\mathrm{dynamic}} = E_{\\mathrm{total}} - E_{\\mathrm{leak}} = 19.6\\,\\mathrm{fJ} - 0.400\\,\\mathrm{fJ} = 19.2\\,\\mathrm{fJ}$$\n\nThe problem asks to find the non-ideal loss energy by comparing the dynamic energy to the ideal capacitive switching energy. This ideal energy, $E_{\\mathrm{sw,ideal}}$, is the energy drawn from the supply to charge the capacitor $C_{\\mathrm{eff}}$ from $0$ to $V_{DD}$. It is given by the formula:\n$$E_{\\mathrm{sw,ideal}} = C_{\\mathrm{eff}} V_{DD}^{2}$$\nSubstituting the given values:\n$$E_{\\mathrm{sw,ideal}} = (12 \\times 10^{-15}\\,\\mathrm{F}) \\cdot (1.0\\,\\mathrm{V})^{2} = 12 \\times 10^{-15}\\,\\mathrm{J} = 12.0\\,\\mathrm{fJ}$$\nThis ideal energy accounts for the energy stored in the capacitor ($\\frac{1}{2} C_{\\mathrm{eff}} V_{DD}^{2}$) and the energy dissipated in the charging path ($\\frac{1}{2} C_{\\mathrm{eff}} V_{DD}^{2}$) under ideal conditions.\n\nThe \"combined short-circuit plus resistive grid loss energy\" represents the excess energy drawn from the supply due to these non-ideal effects. This is found by subtracting the ideal switching energy from the actual dynamic energy drawn. Let this loss energy be $E_{\\mathrm{loss}}$.\n$$E_{\\mathrm{loss}} = E_{\\mathrm{dynamic}} - E_{\\mathrm{sw,ideal}}$$\n$$E_{\\mathrm{loss}} = 19.2\\,\\mathrm{fJ} - 12.0\\,\\mathrm{fJ} = 7.2\\,\\mathrm{fJ}$$\n\nThe problem requires the answer to be expressed in femtojoules and rounded to four significant figures.\n$$E_{\\mathrm{loss}} = 7.200\\,\\mathrm{fJ}$$",
            "answer": "$$\\boxed{7.200}$$"
        }
    ]
}
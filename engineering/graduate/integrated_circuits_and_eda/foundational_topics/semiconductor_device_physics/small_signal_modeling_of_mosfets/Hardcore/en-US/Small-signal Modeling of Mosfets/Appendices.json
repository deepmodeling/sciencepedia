{
    "hands_on_practices": [
        {
            "introduction": "Small-signal parameters are not abstract definitions; they are linearized representations of a device's nonlinear behavior derived directly from its physical operation. This first practice builds your understanding from the ground up by tasking you with deriving the expression for the small-signal resistance of a MOSFET operating in the triode region. By starting from the gradual channel approximation and integrating the charge along the channel, you will first find the device's large-signal $I$-$V$ characteristic and then, through differentiation, reveal how its incremental resistance behaves.",
            "id": "4298907",
            "problem": "Consider a long-channel, n-channel Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) operated in the triode region under the gradual channel approximation within the context of Electronic Design Automation (EDA) for integrated circuits. Assume low-field operation with constant mobility and neglect velocity saturation, channel length modulation, and body effect. Let the gate oxide capacitance per unit area be $C_{ox}$, the electron mobility be $\\mu_{n}$, the device width be $W$, the device length be $L$, the gate-to-source voltage be $V_{GS}$, the drain-to-source voltage be $V_{DS}$, and the threshold voltage be $V_{TH}$. The channel potential $V(x)$ is measured from the source ($x=0$) to the drain ($x=L$), with boundary conditions $V(0)=0$ and $V(L)=V_{DS}$. The inversion charge per unit area along the channel is given by $q(x)=C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$ for $0 \\leq x \\leq L$, and the carrier drift velocity is $v(x)=\\mu_{n}E(x)$ with electric field $E(x)=-\\frac{dV(x)}{dx}$. The drain current is $I_{D}=W\\,q(x)\\,v(x)$, which is constant along the channel in steady state.\n\nStarting from these relations and definitions only, derive the small-signal source–drain conductance at a bias point in the triode region, defined as $g_{sd}=\\left.\\frac{\\partial I_{D}}{\\partial V_{DS}}\\right|_{V_{GS},\\,V_{TH},\\,W,\\,L,\\,\\mu_{n},\\,C_{ox}}$, and hence obtain the incremental source–drain resistance $r_{sd}=g_{sd}^{-1}$ as a closed-form analytic expression in terms of $\\mu_{n}$, $C_{ox}$, $W$, $L$, $V_{GS}$, $V_{TH}$, and $V_{DS}$. Briefly discuss how $r_{sd}$ depends on the bias voltages $V_{GS}$ and $V_{DS}$ and the geometry ratio $W/L$. Express your final answer as a single analytic expression; do not include units.",
            "solution": "The user wants me to solve the following problem:\nConsider a long-channel, n-channel Metal–Oxide–Semiconductor Field-Effect Transistor (MOSFET) operated in the triode region under the gradual channel approximation within the context of Electronic Design Automation (EDA) for integrated circuits. Assume low-field operation with constant mobility and neglect velocity saturation, channel length modulation, and body effect. Let the gate oxide capacitance per unit area be $C_{ox}$, the electron mobility be $\\mu_{n}$, the device width be $W$, the device length be $L$, the gate-to-source voltage be $V_{GS}$, the drain-to-source voltage be $V_{DS}$, and the threshold voltage be $V_{TH}$. The channel potential $V(x)$ is measured from the source ($x=0$) to the drain ($x=L$), with boundary conditions $V(0)=0$ and $V(L)=V_{DS}$. The inversion charge per unit area along the channel is given by $q(x)=C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$ for $0 \\leq x \\leq L$, and the carrier drift velocity is $v(x)=\\mu_{n}E(x)$ with electric field $E(x)=-\\frac{dV(x)}{dx}$. The drain current is $I_{D}=W\\,q(x)\\,v(x)$, which is constant along the channel in steady state.\n\nStarting from these relations and definitions only, derive the small-signal source–drain conductance at a bias point in the triode region, defined as $g_{sd}=\\left.\\frac{\\partial I_{D}}{\\partial V_{DS}}\\right|_{V_{GS},\\,V_{TH},\\,W,\\,L,\\,\\mu_{n},\\,C_{ox}}$, and hence obtain the incremental source–drain resistance $r_{sd}=g_{sd}^{-1}$ as a closed-form analytic expression in terms of $\\mu_{n}$, $C_{ox}$, $W$, $L$, $V_{GS}$, $V_{TH}$, and $V_{DS}$. Briefly discuss how $r_{sd}$ depends on the bias voltages $V_{GS}$ and $V_{DS}$ and the geometry ratio $W/L$. Express your final answer as a single analytic expression; do not include units.\n\n## Problem Validation\n\n### Step 1: Extract Givens\n- **Device Type**: Long-channel, n-channel MOSFET in triode region.\n- **Model**: Gradual channel approximation.\n- **Assumptions**: Low-field operation, constant mobility ($\\mu_n$), no velocity saturation, no channel length modulation, no body effect.\n- **Parameters**: Gate oxide capacitance per unit area ($C_{ox}$), electron mobility ($\\mu_{n}$), device width ($W$), device length ($L$), gate-to-source voltage ($V_{GS}$), drain-to-source voltage ($V_{DS}$), threshold voltage ($V_{TH}$).\n- **Functions and Variables**: Channel potential $V(x)$ for $x \\in [0, L]$, electric field $E(x)$, drain current $I_D$.\n- **Boundary Conditions**: $V(0)=0$, $V(L)=V_{DS}$.\n- **Fundamental Relations**:\n    1. Inversion charge per unit area: $q(x)=C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$.\n    2. Carrier drift velocity: $v(x)=\\mu_{n}E(x)$.\n    3. Electric field: $E(x)=-\\frac{dV(x)}{dx}$.\n    4. Drain current: $I_{D}=W\\,q(x)\\,v(x)$, constant along the channel.\n- **Objective**: Derive the small-signal source–drain conductance $g_{sd}=\\left.\\frac{\\partial I_{D}}{\\partial V_{DS}}\\right|_{V_{GS},...}$ and the incremental source–drain resistance $r_{sd}=g_{sd}^{-1}$. Discuss dependencies.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded**: The problem is firmly based on the standard, first-order physical model of a MOSFET (the gradual channel approximation). All provided equations and assumptions are cornerstones of semiconductor device physics and integrated circuit theory.\n- **Well-Posed**: The problem is fully specified. It provides all the necessary starting equations, boundary conditions, and definitions to derive the drain current characteristic and, subsequently, the small-signal conductance. The objective is clearly stated. A unique, stable solution exists.\n- **Objective**: The problem statement is expressed in precise, objective, and standard technical language. It is free from ambiguity or subjective claims.\n\n### Flaw Checklist:\n1. **Scientific or Factual Unsoundness**: No flaws. The model is a standard, correct approximation.\n2. **Non-Formalizable or Irrelevant**: No flaws. The problem is a core topic in the specified field.\n3. **Incomplete or Contradictory Setup**: The problem is complete and self-consistent. Note: The combination of the given relations $I_{D}=W\\,q(x)\\,v(x)$, $v(x)=\\mu_{n}E(x)$, and $E(x)=-\\frac{dV(x)}{dx}$ leads to $I_D = -W \\mu_n C_{ox} (V_{GS}-V_{TH}-V(x)) \\frac{dV}{dx}$. Since all terms on the right except for the leading negative sign are positive, this would imply a negative current $I_D$ for a positive $V_{DS}$, which contradicts convention. The standard physical derivation for an n-channel device is based on electron current, $I_D = W Q_{inv}(x) v_{drift}(x)$, where $Q_{inv}(x) = C_{ox}(V_{GS}-V_{TH}-V(x))$ is the magnitude of the inversion charge and $v_{drift}(x) = \\mu_n |\\vec{E}| = \\mu_n \\frac{dV}{dx}$ is the electron drift speed. This leads to $I_D = W \\mu_n C_{ox} (V_{GS}-V_{TH}-V(x)) \\frac{dV}{dx}$. This minor notational inconsistency in the given relations is a common shorthand in literature and does not invalidate the problem's physical basis or its solvability. We will proceed using the physically correct formulation, which aligns with the intent of the problem.\n4. **Unrealistic or Infeasible**: No flaws. The long-channel model is a valid and widely used approximation.\n5. **Ill-Posed or Poorly Structured**: No flaws.\n6. **Pseudo-Profound, Trivial, or Tautological**: No flaws. This is a fundamental and non-trivial derivation.\n7. **Outside Scientific Verifiability**: No flaws. The result is a standard, verifiable formula.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. The solution process will proceed.\n\n## Solution\n\nThe objective is to derive the drain-to-source resistance $r_{sd}$ of an n-channel MOSFET in the triode region. The derivation begins by formulating an expression for the drain current $I_D$.\n\nThe drain current $I_D$ is the total charge flowing per unit time. At a position $x$ along the channel, the differential current $dI_D$ is due to the drift of mobile inversion charge $dQ_{inv}$ in a channel segment of length $dx$. The magnitude of the inversion charge density per unit area is given as $q(x) = C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right)$. The total mobile charge in a segment of length $dx$ and width $W$ is $dQ_{inv} = q(x) \\, W \\, dx$.\n\nThe drift velocity of electrons is $v_n = \\mu_n |\\vec{E}|$. The electric field $\\vec{E}$ points from higher potential (drain) to lower potential (source), so its component along the channel is $E_x = -\\frac{dV}{dx}$. Since $V(x)$ increases from $0$ at the source to $V_{DS}$ at the drain, $\\frac{dV}{dx}$ is positive, and thus $E_x$ is negative. The drift speed is $v_n = \\mu_n |E_x| = \\mu_n \\frac{dV}{dx}$.\n\nThe current is the product of the charge per unit length, $Wq(x)$, and the carrier drift speed, $v_n$.\n$$I_D = W q(x) v_n$$\nSubstituting the expressions for $q(x)$ and $v_n$:\n$$I_D = W \\left[ C_{ox}\\left(V_{GS}-V_{TH}-V(x)\\right) \\right] \\left( \\mu_n \\frac{dV(x)}{dx} \\right)$$\nIn steady-state, the current $I_D$ must be constant at any point $x$ along the channel. We can rearrange this differential equation to separate the variables $x$ and $V$.\n$$I_D \\, dx = W \\mu_n C_{ox} \\left(V_{GS}-V_{TH}-V\\right) dV$$\nTo find the total current, we integrate this expression along the entire channel length. The position $x$ ranges from $0$ to $L$, while the channel potential $V(x)$ ranges from $V(0)=0$ to $V(L)=V_{DS}$.\n$$\\int_0^L I_D \\, dx = \\int_0^{V_{DS}} W \\mu_n C_{ox} \\left(V_{GS}-V_{TH}-V\\right) dV$$\nSince $I_D$, $W$, $\\mu_n$, and $C_{ox}$ are constants with respect to the integration variables:\n$$I_D \\int_0^L dx = W \\mu_n C_{ox} \\int_0^{V_{DS}} \\left(V_{GS}-V_{TH}-V\\right) dV$$\nPerforming the integration:\n$$I_D [x]_0^L = W \\mu_n C_{ox} \\left[ (V_{GS}-V_{TH})V - \\frac{V^2}{2} \\right]_0^{V_{DS}}$$\n$$I_D (L-0) = W \\mu_n C_{ox} \\left( \\left( (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right) - (0) \\right)$$\nSolving for $I_D$:\n$$I_D = \\mu_n C_{ox} \\frac{W}{L} \\left[ (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right]$$\nThis is the standard expression for the drain current in the triode region, which is valid for $0 \\le V_{DS} \\le V_{GS}-V_{TH}$.\n\nNext, we find the small-signal source–drain conductance, $g_{sd}$, by taking the partial derivative of $I_D$ with respect to $V_{DS}$, holding all other parameters constant.\n$$g_{sd} = \\frac{\\partial I_{D}}{\\partial V_{DS}} = \\frac{\\partial}{\\partial V_{DS}} \\left\\{ \\mu_n C_{ox} \\frac{W}{L} \\left[ (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right] \\right\\}$$\nThe term $\\mu_n C_{ox} \\frac{W}{L}$ is a constant factor.\n$$g_{sd} = \\mu_n C_{ox} \\frac{W}{L} \\frac{\\partial}{\\partial V_{DS}} \\left[ (V_{GS}-V_{TH})V_{DS} - \\frac{V_{DS}^2}{2} \\right]$$\n$$g_{sd} = \\mu_n C_{ox} \\frac{W}{L} \\left[ (V_{GS}-V_{TH}) \\cdot 1 - \\frac{1}{2}(2V_{DS}) \\right]$$\n$$g_{sd} = \\mu_n C_{ox} \\frac{W}{L} \\left( V_{GS}-V_{TH}-V_{DS} \\right)$$\nThe incremental source–drain resistance, $r_{sd}$, is the reciprocal of the conductance $g_{sd}$.\n$$r_{sd} = \\frac{1}{g_{sd}} = \\frac{1}{\\mu_n C_{ox} \\frac{W}{L} \\left( V_{GS}-V_{TH}-V_{DS} \\right)}$$\nThis is the final closed-form analytic expression for the small-signal resistance.\n\nDiscussion of dependencies:\n1.  **Dependence on $V_{GS}$**: The resistance $r_{sd}$ is inversely proportional to the term $V_{GS}-V_{TH}-V_{DS}$. As the gate-to-source voltage $V_{GS}$ increases, the overdrive voltage $V_{GS}-V_{TH}$ increases. This induces a stronger inversion layer (more free carriers) in the channel, making the channel more conductive. Consequently, the resistance $r_{sd}$ decreases as $V_{GS}$ increases.\n\n2.  **Dependence on $V_{DS}$**: As the drain-to-source voltage $V_{DS}$ increases, the term $V_{GS}-V_{TH}-V_{DS}$ decreases. This causes the denominator to shrink, and thus the resistance $r_{sd}$ increases. This is because a larger $V_{DS}$ reduces the gate-to-channel voltage drop near the drain end, tapering the inversion layer and \"pinching\" the channel. This reduction in charge density near the drain increases the overall channel resistance.\n\n3.  **Dependence on $W/L$**: The resistance $r_{sd}$ is inversely proportional to the geometric aspect ratio $W/L$. Increasing the channel width $W$ provides more parallel paths for current flow, thus decreasing resistance. Increasing the channel length $L$ forces the carriers to travel a longer distance, thus increasing resistance. This behavior is analogous to a classical resistor whose resistance is $R = \\rho \\frac{L}{A}$, where $W$ is related to the cross-sectional area $A$.",
            "answer": "$$\\boxed{\\frac{1}{\\mu_{n} C_{ox} \\frac{W}{L} \\left(V_{GS} - V_{TH} - V_{DS}\\right)}}$$"
        },
        {
            "introduction": "The validity of any small-signal analysis hinges on first establishing a stable DC operating point, as the values of parameters like transconductance ($g_m$) and output resistance ($r_o$) are determined by this bias. This exercise provides a comprehensive workout in setting up and solving for the DC bias conditions of a common-source amplifier, including practical considerations like source degeneration, body effect, and channel-length modulation. Mastering this process is essential for connecting theoretical models to the practical analysis and design of analog circuits, ensuring the transistor is correctly biased for its intended function.",
            "id": "4298879",
            "problem": "Consider a long-channel enhancement-mode n-channel Metal-Oxide-Semiconductor Field-Effect Transistor (NMOSFET) biased from a direct current (DC) supply with resistive loads. The source is connected to ground through a source resistance $R_S$, the drain is connected to a supply voltage $V_{DD}$ through a drain resistance $R_D$, the bulk (body) is tied to ground, and the gate is driven by an ideal DC source $V_G$ that can be chosen to set a desired operating point. The transistor parameters are the electron mobility-times-oxide-capacitance product $\\mu_n C_{ox}$, the width-to-length ratio $W/L$, the zero-bias threshold voltage $V_{TH0}$, the body-effect coefficient $\\gamma$, the surface potential $\\phi_F$, and the channel-length modulation parameter $\\lambda$. The threshold voltage with body effect is modeled as\n$$\nV_{TH}(V_{SB}) \\;=\\; V_{TH0} \\;+\\; \\gamma\\!\\left(\\sqrt{2\\phi_F + V_{SB}} \\;-\\; \\sqrt{2\\phi_F}\\right),\n$$\nwhere $V_{SB}$ is the source-to-bulk voltage. The drain current in saturation is modeled by the well-tested square-law with channel-length modulation:\n$$\nI_D \\;=\\; \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big),\n$$\nwhich is valid under the saturation-region condition. Small-signal parameters are defined from first principles as $g_m \\equiv \\left.\\frac{\\partial I_D}{\\partial V_{GS}}\\right|_{V_{DS},V_{BS}}$ and $r_o \\equiv \\left.\\left(\\frac{\\partial I_D}{\\partial V_{DS}}\\right)^{-1}\\right|_{V_{GS},V_{BS}}$, where $V_{BS}$ is the bulk-to-source voltage.\n\nYou are tasked with achieving a specified target drain current $I_D^\\star$ by appropriate choice of the gate voltage $V_G$ and by finding the corresponding DC bias point $(V_{GS},V_{DS})$ consistent with the circuit and device equations, while ensuring operation in saturation.\n\nWhich option correctly outlines the full set of nonlinear equations to solve for the DC bias point $(V_{GS},V_{DS})$ that yields $I_D = I_D^\\star$, states the correct saturation condition in terms of the biased quantities, and gives the correct first-order small-signal parameters $g_m$ and $r_o$ at that bias?\n\nA. Use $V_{SB} = V_S - V_B$ with $V_B = 0$, enforce $V_S = I_D^\\star R_S$, $V_D = V_{DD} - I_D^\\star R_D$, so $V_{DS} = V_D - V_S$ and $V_{GS} = V_G - V_S$. Solve simultaneously\n$\nI_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,(1 + \\lambda V_{DS})\n$\nwith these circuit relations, and require saturation as\n$\nV_{DS} \\,\\ge\\, V_{GS} - V_{TH}(V_{SB}).\n$\nThen, at the resulting bias,\n$\ng_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)\\,(1 + \\lambda V_{DS}),\n$\nand\n$\nr_o = \\left[\\frac{\\partial I_D}{\\partial V_{DS}}\\right]^{-1} = \\left[\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,\\lambda\\right]^{-1} = \\frac{1 + \\lambda V_{DS}}{\\lambda\\,I_D^\\star}.\n$\n\nB. Treat $V_{TH}$ as a constant equal to $V_{TH0}$ and ignore channel-length modulation. Enforce $V_S = I_D^\\star R_S$, $V_D = V_{DD} - I_D^\\star R_D$, $V_{GS} = V_G - V_S$, and solve\n$\nI_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH0}\\big)^2\n$\nwith saturation checked by\n$\nV_{DS} \\,\\ge\\, V_{TH0}.\n$\nThen use the compact small-signal formulas\n$\ng_m = \\frac{2 I_D^\\star}{V_{GS} - V_{TH0}}, \\quad r_o \\to \\infty.\n$\n\nC. Assume triode-region conduction and set\n$\nI_D^\\star = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\left[(V_{GS} - V_{TH0})V_{DS} - \\frac{V_{DS}^2}{2}\\right],\n$\nwith $V_S = I_D^\\star R_S$, $V_D = V_{DD} - I_D^\\star R_D$, and $V_{GS} = V_G - V_S$. Use the saturation condition $V_{DS} \\le V_{GS} - V_{TH0}$ and small-signal parameters\n$\ng_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,V_{DS}, \\quad r_o = \\left[\\mu_n C_{ox}\\,\\frac{W}{L}\\,(V_{GS} - V_{TH0} - V_{DS})\\right]^{-1}.\n$\n\nD. Keep channel-length modulation but neglect body effect, enforce $V_S = I_D^\\star R_S$, $V_D = V_{DD} - I_D^\\star R_D$, $V_{GS} = V_G - V_S$, and solve\n$\nI_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH0}\\big)^2\\,(1 + \\lambda V_{DS}),\n$\nwith saturation checked by\n$\nV_{DS} \\,\\ge\\, V_{GS}.\n$\nThen take\n$\ng_m = \\frac{2 I_D^\\star}{V_{GS} - V_{TH0}}, \\quad r_o = \\frac{1}{\\lambda I_D^\\star}.\n$",
            "solution": "The problem requires the formulation of the DC biasing equations, the saturation condition, and the small-signal parameters for a given n-channel MOSFET in a common-source configuration with source degeneration resistance.\n\n### Step 1: Problem Validation\n\nFirst, the problem statement is validated.\n\n**1. Extraction of Givens:**\n- **Circuit:** An NMOSFET with source resistance $R_S$ to ground, drain resistance $R_D$ to supply $V_{DD}$, bulk tied to ground ($V_B=0$), and gate driven by a DC voltage $V_G$.\n- **Device:** Long-channel, enhancement-mode NMOSFET.\n- **Parameters:** $\\mu_n C_{ox}$, $W/L$, $V_{TH0}$, $\\gamma$, $\\phi_F$, $\\lambda$.\n- **Target:** Achieve a DC drain current $I_D = I_D^\\star$ in the saturation region.\n- **Threshold Voltage Model:** $V_{TH}(V_{SB}) = V_{TH0} + \\gamma(\\sqrt{2\\phi_F + V_{SB}} - \\sqrt{2\\phi_F})$, where $V_{SB} = V_S - V_B$.\n- **Saturation Current Model:** $I_D = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big)$.\n- **Small-Signal Parameter Definitions:** $g_m \\equiv \\left.\\frac{\\partial I_D}{\\partial V_{GS}}\\right|_{V_{DS},V_{BS}}$ and $r_o \\equiv \\left.\\left(\\frac{\\partial I_D}{\\partial V_{DS}}\\right)^{-1}\\right|_{V_{GS},V_{BS}}$.\n\n**2. Validation:**\n- **Scientific Grounding:** The problem is based on standard, well-established models for MOSFETs (square-law, channel-length modulation, body effect) and basic circuit theory (Kirchhoff's laws). These are fundamental principles in analog electronics. The problem is scientifically sound.\n- **Well-Posedness:** The problem asks to formulate the governing equations for a specific operating point. It provides all necessary models and definitions to do so. The task is to write down a system of equations, which is a well-defined mathematical problem.\n- **Objectivity:** The language is technical, precise, and free of subjective content.\n\n**3. Verdict:**\nThe problem statement is valid. It is scientifically grounded, well-posed, and objective. It presents a standard, non-trivial task in analog circuit design. We may proceed to the solution.\n\n### Step 2: Derivation of the Correct Formulation\n\nWe will derive the equations for the DC bias point, the saturation condition, and the small-signal parameters based on the provided models.\n\n**DC Bias Equations:**\nThe goal is to establish the DC operating point where the drain current is $I_D^\\star$. We apply Kirchhoff's laws to the circuit to relate the terminal voltages to the drain current.\n$1$. The gate current is zero ($I_G=0$). The source current equals the drain current ($I_S = I_D$).\n$2$. The source voltage $V_S$ is determined by the current through the source resistor $R_S$:\n$$V_S = I_D^\\star R_S$$\n$3$. The bulk is at ground, so $V_B = 0$. The source-to-bulk voltage $V_{SB}$ is:\n$$V_{SB} = V_S - V_B = I_D^\\star R_S - 0 = I_D^\\star R_S$$\n$4$. The drain voltage $V_D$ is determined by the current through the drain resistor $R_D$:\n$$V_D = V_{DD} - I_D^\\star R_D$$\n$5$. The drain-to-source voltage $V_{DS}$ is the difference between the drain and source voltages:\n$$V_{DS} = V_D - V_S = (V_{DD} - I_D^\\star R_D) - (I_D^\\star R_S) = V_{DD} - I_D^\\star(R_D + R_S)$$\n$6$. The gate voltage $V_G$ sets the gate-to-source voltage $V_{GS}$:\n$$V_{GS} = V_G - V_S = V_G - I_D^\\star R_S$$\nThe problem states $V_G$ is chosen to achieve $I_D^\\star$.\n\nThese circuit-derived voltages must be consistent with the device physics equation for the drain current. The full system of equations to be solved for the bias point $(V_{GS}, V_{DS})$ is thus the set of relations above, combined with the device current equation evaluated at $I_D=I_D^\\star$:\n$$I_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big)$$\nwhere $V_{TH}(V_{SB}) = V_{TH0} + \\gamma(\\sqrt{2\\phi_F + V_{SB}} - \\sqrt{2\\phi_F})$ and $V_{SB}$ and $V_{DS}$ are given by the circuit equations above.\n\n**Saturation Condition:**\nAn NMOSFET operates in the saturation region when the channel is pinched off at the drain end. This occurs when the gate-to-drain voltage $V_{GD}$ is less than the threshold voltage $V_{TH}$.\n$$V_{GD} < V_{TH}(V_{SB})$$\nExpressing $V_{GD}$ in terms of $V_{GS}$ and $V_{DS}$:\n$$V_{GS} - V_{DS} < V_{TH}(V_{SB})$$\nRearranging gives the standard saturation condition:\n$$V_{DS} > V_{GS} - V_{TH}(V_{SB})$$\nThe boundary between saturation and triode regions is therefore $V_{DS} = V_{GS} - V_{TH}(V_{SB})$. So, for saturation, we require:\n$$V_{DS} \\ge V_{GS} - V_{TH}(V_{SB})$$\n\n**Small-Signal Parameters:**\nThe parameters $g_m$ and $r_o$ are defined by partial derivatives at the DC operating point.\n\n- **Transconductance, $g_m$:**\n$g_m$ is defined as $g_m \\equiv \\left.\\frac{\\partial I_D}{\\partial V_{GS}}\\right|_{V_{DS},V_{BS}}$. The derivative is taken with $V_{DS}$ and $V_{BS}$ held constant. Since $V_{SB} = -V_{BS}$, holding $V_{BS}$ constant means $V_{SB}$ is also constant, and therefore $V_{TH}(V_{SB})$ is constant for this differentiation.\n$$I_D = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big)$$\n$$g_m = \\frac{\\partial}{\\partial V_{GS}} \\left[ \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big) \\right]$$\n$$g_m = \\left(\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\right) \\cdot \\left(2 \\cdot \\big(V_{GS} - V_{TH}\\big)\\right) \\cdot \\big(1 + \\lambda V_{DS}\\big)$$\n$$g_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)\\,\\big(1 + \\lambda V_{DS}\\big)$$\n\n- **Output Resistance, $r_o$:**\n$r_o$ is defined as $r_o \\equiv \\left.\\left(\\frac{\\partial I_D}{\\partial V_{DS}}\\right)^{-1}\\right|_{V_{GS},V_{BS}}$. The derivative is taken with $V_{GS}$ and $V_{BS}$ held constant, so $V_{TH}$ is again constant.\n$$\\frac{\\partial I_D}{\\partial V_{DS}} = \\frac{\\partial}{\\partial V_{DS}} \\left[ \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}\\,\\big(1 + \\lambda V_{DS}\\big) \\right]$$\nThe term $\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}\\big)^{2}$ is constant with respect to $V_{DS}$. Let's call this $I_{D0}$, the drain current without channel-length modulation.\n$$\\frac{\\partial I_D}{\\partial V_{DS}} = I_{D0} \\cdot \\frac{\\partial}{\\partial V_{DS}}(1+\\lambda V_{DS}) = I_{D0} \\lambda$$\nFrom the original current equation, $I_{D0} = \\frac{I_D}{1 + \\lambda V_{DS}}$. Substituting this back, we get:\n$$\\frac{\\partial I_D}{\\partial V_{DS}} = \\frac{\\lambda I_D}{1 + \\lambda V_{DS}}$$\nTherefore, the output resistance is:\n$$r_o = \\left( \\frac{\\partial I_D}{\\partial V_{DS}} \\right)^{-1} = \\frac{1 + \\lambda V_{DS}}{\\lambda I_D}$$\nAt the target bias point, $I_D = I_D^\\star$.\n\n### Step 3: Evaluation of Options\n\nLet's evaluate each option against our derived formulation.\n\n**A.**\n- **DC Equations:** The option correctly lists the circuit KVL/KCL equations ($V_S = I_D^\\star R_S$, etc.) and states they must be solved simultaneously with the full device equation $I_D^\\star = \\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,(1 + \\lambda V_{DS})$. This matches our derivation.\n- **Saturation Condition:** The condition is given as $V_{DS} \\,\\ge\\, V_{GS} - V_{TH}(V_{SB})$. This is correct.\n- **Small-Signal Parameters:**\n    - $g_m = \\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)\\,(1 + \\lambda V_{DS})$. This is correct.\n    - The option states $r_o = \\left[\\frac{\\partial I_D}{\\partial V_{DS}}\\right]^{-1} = \\left[\\frac{1}{2}\\,\\mu_n C_{ox}\\,\\frac{W}{L}\\,\\big(V_{GS} - V_{TH}(V_{SB})\\big)^2\\,\\lambda\\right]^{-1} = \\frac{1 + \\lambda V_{DS}}{\\lambda\\,I_D^\\star}$. This is a correct chain of equalities. As we derived, $\\frac{\\partial I_D}{\\partial V_{DS}} = I_{D0}\\lambda$, where $I_{D0}$ is the term in the square brackets. And we also showed this resolves to $\\frac{1 + \\lambda V_{DS}}{\\lambda\\,I_D^\\star}$.\nThis entire option is consistent and correct.\n**Verdict: Correct**\n\n**B.**\n- This option neglects body effect (using $V_{TH0}$ instead of $V_{TH}(V_{SB})$) and channel-length modulation ($\\lambda=0$). This contradicts the problem statement which provides parameters for both effects.\n- The saturation condition is stated as $V_{DS} \\,\\ge\\, V_{TH0}$, which is incorrect. The condition compares $V_{DS}$ to the overdrive voltage $V_{GS}-V_{TH}$.\n- The small-signal parameters are based on these incorrect simplifications.\n**Verdict: Incorrect**\n\n**C.**\n- This option assumes the transistor is in the triode region, which directly contradicts the problem requirement to find a bias point in saturation.\n- All equations (current, saturation condition, small-signal parameters) pertain to the triode region and are therefore irrelevant to the question asked.\n**Verdict: Incorrect**\n\n**D.**\n- This option neglects body effect by using $V_{TH0}$. This is an unwarranted simplification.\n- The saturation condition is stated as $V_{DS} \\,\\ge\\, V_{GS}$, which is incorrect.\n- The expression for $r_o$ is an approximation ($r_o = \\frac{1}{\\lambda I_D^\\star}$), which is less accurate than the expression in Option A, valid only if $\\lambda V_{DS} \\ll 1$. More importantly, the other parts of the option are fundamentally flawed.\n**Verdict: Incorrect**\n\nBased on the detailed analysis, Option A is the only one that correctly formulates the entire problem according to the provided models and definitions.",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "While long-channel models provide invaluable intuition, they fall short in predicting the behavior of modern, scaled-down transistors where short-channel effects are prominent. This computational practice directly addresses this gap by comparing the output resistance ($r_o$) from a basic long-channel model against one that includes Drain-Induced Barrier Lowering (DIBL), a critical short-channel effect. By deriving the output conductance for both cases and quantifying the discrepancy, you will gain a deeper, quantitative appreciation for why DIBL degrades output resistance and why advanced models are indispensable for the accurate design of high-performance analog circuits.",
            "id": "4298849",
            "problem": "You are given a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) operated in saturation and asked to compare the small-signal output resistance derived from a traditional long-channel model against that derived from a short-channel model that captures Drain-Induced Barrier Lowering (DIBL), both at the same direct-current bias. You must derive from first principles the expressions needed to compute the small-signal output resistance, then implement a program to evaluate a set of test cases. The focus is to elucidate what is being computed, why it is valid, and how it is derived from a fundamental base, without relying on shortcut formulas for small-signal parameters.\n\nFundamental base and definitions:\n- In strong inversion and saturation, under the charge-sheet approximation and drift-diffusion transport, the drain current for a long-channel MOSFET can be expressed in terms of geometry and bias. The gate overdrive is defined as $V_{\\mathrm{ov}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH}}$, where $V_{\\mathrm{GS}}$ is the gate-to-source voltage and $V_{\\mathrm{TH}}$ is the threshold voltage. Channel-length modulation is represented by a coefficient $\\lambda$ that accounts for effective channel-length reduction with increasing drain-to-source voltage $V_{\\mathrm{DS}}$.\n- Short-channel effects modify the threshold voltage via DIBL, captured to first order by a linear lowering with $V_{\\mathrm{DS}}$ using a coefficient $\\eta$. The effective threshold voltage becomes $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH0}} - \\eta V_{\\mathrm{DS}}$, where $V_{\\mathrm{TH0}}$ is the zero-$V_{\\mathrm{DS}}$ threshold voltage. This increases the effective gate overdrive to $V_{\\mathrm{ov,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}$.\n- The small-signal output resistance is defined as $r_o = \\left( \\frac{\\partial I_D}{\\partial V_{\\mathrm{DS}}} \\big\\rvert_{\\text{bias}} \\right)^{-1}$, where $I_D$ is the drain current and the partial derivative is evaluated at the specified operating point. This definition follows from the general small-signal linearization of a current-voltage characteristic.\n\nStarting from these bases, the program you write must:\n1. Use the saturation-region functional form of the drain current under the long-channel assumption of fixed threshold voltage and channel-length modulation, with mobility $\\mu$, oxide capacitance per unit area $C_{\\mathrm{ox}}$, device width $W$, and device length $L$. In this context, let $K = \\frac{1}{2} \\mu C_{\\mathrm{ox}} \\frac{W}{L}$ and form $I_D(V_{\\mathrm{DS}})$ using $V_{\\mathrm{ov}}$ and $\\lambda$.\n2. Use the same functional form but replace the fixed threshold voltage by the DIBL-shifted threshold $V_{\\mathrm{TH,eff}}$ in the short-channel case, keeping the same $\\lambda$ to isolate the DIBL effect. Derive $I_D(V_{\\mathrm{DS}})$ using $V_{\\mathrm{ov,eff}}$ and $\\lambda$.\n3. Compute $g_{ds,\\text{long}} = \\frac{\\partial I_{D,\\text{long}}}{\\partial V_{\\mathrm{DS}}}$ and $g_{ds,\\text{short}} = \\frac{\\partial I_{D,\\text{short}}}{\\partial V_{\\mathrm{DS}}}$ using the product and chain rules directly from the functional forms in items $1$ and $2$, and then compute $r_{o,\\text{long}} = \\frac{1}{g_{ds,\\text{long}}}$ and $r_{o,\\text{short}} = \\frac{1}{g_{ds,\\text{short}}}$.\n4. Quantify the discrepancy attributable to DIBL as the fractional difference $\\Delta = \\frac{r_{o,\\text{short}} - r_{o,\\text{long}}}{r_{o,\\text{long}}}$ (a dimensionless decimal). This isolates the contribution of DIBL to output resistance reduction because the channel-length modulation parameter $\\lambda$ is held the same in both models.\n\nYour program must compute these quantities for the following test suite, ensuring saturation holds, that is $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov,eff}}$ in the short-channel case and $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov}}$ in the long-channel case:\n\n- Test case $1$ (short-channel, typical strong inversion): $\\mu = 0.045 \\ \\mathrm{m^2/(V \\cdot s)}$, $C_{\\mathrm{ox}} = 0.010 \\ \\mathrm{F/m^2}$, $W = 1.0 \\times 10^{-6} \\ \\mathrm{m}$, $L = 1.0 \\times 10^{-7} \\ \\mathrm{m}$, $V_{\\mathrm{GS}} = 0.8 \\ \\mathrm{V}$, $V_{\\mathrm{DS}} = 0.6 \\ \\mathrm{V}$, $V_{\\mathrm{TH0}} = 0.35 \\ \\mathrm{V}$, $\\lambda = 0.10 \\ \\mathrm{V^{-1}}$, $\\eta = 0.08 \\ \\mathrm{V/V}$.\n- Test case $2$ (near-threshold operation): $\\mu = 0.050 \\ \\mathrm{m^2/(V \\cdot s)}$, $C_{\\mathrm{ox}} = 0.008 \\ \\mathrm{F/m^2}$, $W = 0.5 \\times 10^{-6} \\ \\mathrm{m}$, $L = 0.16 \\times 10^{-6} \\ \\mathrm{m}$, $V_{\\mathrm{GS}} = 0.45 \\ \\mathrm{V}$, $V_{\\mathrm{DS}} = 0.30 \\ \\mathrm{V}$, $V_{\\mathrm{TH0}} = 0.40 \\ \\mathrm{V}$, $\\lambda = 0.06 \\ \\mathrm{V^{-1}}$, $\\eta = 0.05 \\ \\mathrm{V/V}$.\n- Test case $3$ (extreme short-channel, minimal channel-length modulation): $\\mu = 0.045 \\ \\mathrm{m^2/(V \\cdot s)}$, $C_{\\mathrm{ox}} = 0.010 \\ \\mathrm{F/m^2}$, $W = 2.0 \\times 10^{-6} \\ \\mathrm{m}$, $L = 60 \\times 10^{-9} \\ \\mathrm{m}$, $V_{\\mathrm{GS}} = 0.90 \\ \\mathrm{V}$, $V_{\\mathrm{DS}} = 0.70 \\ \\mathrm{V}$, $V_{\\mathrm{TH0}} = 0.35 \\ \\mathrm{V}$, $\\lambda = 1.0 \\times 10^{-4} \\ \\mathrm{V^{-1}}$, $\\eta = 0.12 \\ \\mathrm{V/V}$.\n- Test case $4$ (no DIBL baseline): $\\mu = 0.050 \\ \\mathrm{m^2/(V \\cdot s)}$, $C_{\\mathrm{ox}} = 0.004 \\ \\mathrm{F/m^2}$, $W = 1.0 \\times 10^{-6} \\ \\mathrm{m}$, $L = 1.0 \\times 10^{-6} \\ \\mathrm{m}$, $V_{\\mathrm{GS}} = 0.70 \\ \\mathrm{V}$, $V_{\\mathrm{DS}} = 0.50 \\ \\mathrm{V}$, $V_{\\mathrm{TH0}} = 0.40 \\ \\mathrm{V}$, $\\lambda = 0.08 \\ \\mathrm{V^{-1}}$, $\\eta = 0.00 \\ \\mathrm{V/V}$.\n\nPhysical units:\n- Report $r_{o,\\text{long}}$ and $r_{o,\\text{short}}$ internally in $\\mathrm{\\Omega}$. For the final output, only report the fractional discrepancy $\\Delta$ as a decimal number, with no units.\n\nFinal output format:\n- Your program should produce a single line of output containing the fractional discrepancies for the four test cases as a comma-separated list enclosed in square brackets, for example `[d_1,d_2,d_3,d_4]`, where each $d_i$ is $\\Delta$ for test case $i$, rounded to six decimal places.\n\nConstraints and requirements:\n- Ensure $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov}}$ and $V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov,eff}}$ in all test cases so the saturation-region expressions are applicable.\n- The final answers must be floating-point numbers; do not include units or percentage signs.",
            "solution": "The problem requires a comparative analysis of the small-signal output resistance of a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) under two different models: a traditional long-channel model and a short-channel model that incorporates Drain-Induced Barrier Lowering (DIBL). The goal is to derive the necessary expressions from first principles and compute the fractional difference in output resistance attributable to DIBL for a given set of test cases. All devices are biased in the saturation region.\n\nThe fundamental relationship for the drain current $I_D$ of an n-channel MOSFET in the saturation region, assuming a square-law behavior, is given by:\n$$I_D = \\frac{1}{2} \\mu C_{\\mathrm{ox}} \\frac{W}{L} (V_{\\mathrm{GS}} - V_{\\mathrm{TH}})^2$$\nwhere $\\mu$ is the electron mobility, $C_{\\mathrm{ox}}$ is the gate oxide capacitance per unit area, $W$ and $L$ are the channel width and length, $V_{\\mathrm{GS}}$ is the gate-to-source voltage, and $V_{\\mathrm{TH}}$ is the threshold voltage. The term $\\frac{1}{2} \\mu C_{\\mathrm{ox}} \\frac{W}{L}$ is grouped into a single parameter $K$. To account for the finite output resistance observed in real devices, this model is augmented with a channel-length modulation (CLM) factor, $(1 + \\lambda V_{\\mathrm{DS}})$, where $\\lambda$ is the CLM parameter and $V_{\\mathrm{DS}}$ is the drain-to-source voltage.\n\nThe small-signal output resistance, $r_o$, is defined as the inverse of the output conductance, $g_{ds}$, which is the partial derivative of the drain current with respect to the drain-to-source voltage, evaluated at the DC operating point:\n$$r_o = \\frac{1}{g_{ds}} = \\left( \\frac{\\partial I_D}{\\partial V_{\\mathrm{DS}}} \\right)^{-1}$$\n\nWe will now derive the expressions for the output conductance for the two models specified.\n\n**1. Long-Channel Model Derivation**\n\nIn the long-channel model, the threshold voltage $V_{\\mathrm{TH}}$ is assumed to be constant and equal to its zero-bias value, $V_{\\mathrm{TH0}}$. The gate overdrive is $V_{\\mathrm{ov}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH0}}$. The drain current, including channel-length modulation, is:\n$$I_{D,\\text{long}}(V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 (1 + \\lambda V_{\\mathrm{DS}})$$\nTo find the output conductance, $g_{ds,\\text{long}}$, we differentiate $I_{D,\\text{long}}$ with respect to $V_{\\mathrm{DS}}$:\n$$g_{ds,\\text{long}} = \\frac{\\partial I_{D,\\text{long}}}{\\partial V_{\\mathrm{DS}}} = \\frac{\\partial}{\\partial V_{\\mathrm{DS}}} \\left[ K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 (1 + \\lambda V_{\\mathrm{DS}}) \\right]$$\nSince $K$, $V_{\\mathrm{GS}}$, and $V_{\\mathrm{TH0}}$ are constants with respect to $V_{\\mathrm{DS}}$, the derivative is straightforward:\n$$g_{ds,\\text{long}} = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 \\frac{\\partial}{\\partial V_{\\mathrm{DS}}} (1 + \\lambda V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2 \\lambda$$\nThis shows that in the long-channel model, the output conductance is solely due to channel-length modulation. The output resistance is then:\n$$r_{o,\\text{long}} = \\frac{1}{g_{ds,\\text{long}}} = \\frac{1}{\\lambda K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}})^2}$$\n\n**2. Short-Channel Model Derivation (with DIBL)**\n\nIn the short-channel model, the threshold voltage is no longer constant but decreases with increasing $V_{\\mathrm{DS}}$ due to DIBL. This is modeled to first order as $V_{\\mathrm{TH,eff}} = V_{\\mathrm{TH0}} - \\eta V_{\\mathrm{DS}}$, where $\\eta$ is the DIBL coefficient. The effective gate overdrive becomes a function of $V_{\\mathrm{DS}}$: $V_{\\mathrm{ov,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH,eff}} = V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}$.\n\nThe drain current expression is:\n$$I_{D,\\text{short}}(V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH,eff}})^2 (1 + \\lambda V_{\\mathrm{DS}}) = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2 (1 + \\lambda V_{\\mathrm{DS}})$$\nTo find the output conductance, $g_{ds,\\text{short}}$, we differentiate $I_{D,\\text{short}}$ with respect to $V_{\\mathrm{DS}}$. Here, both the squared overdrive term and the CLM term depend on $V_{\\mathrm{DS}}$, so we must apply the product rule for differentiation, $\\frac{d(uv)}{dx} = u\\frac{dv}{dx} + v\\frac{du}{dx}$.\nLet $u(V_{\\mathrm{DS}}) = (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2$ and $v(V_{\\mathrm{DS}}) = (1 + \\lambda V_{\\mathrm{DS}})$.\n$$g_{ds,\\text{short}} = \\frac{\\partial I_{D,\\text{short}}}{\\partial V_{\\mathrm{DS}}} = K \\left[ \\frac{\\partial u}{\\partial V_{\\mathrm{DS}}} v + u \\frac{\\partial v}{\\partial V_{\\mathrm{DS}}} \\right]$$\nThe individual derivatives are:\n$$\\frac{\\partial v}{\\partial V_{\\mathrm{DS}}} = \\frac{\\partial}{\\partial V_{\\mathrm{DS}}}(1 + \\lambda V_{\\mathrm{DS}}) = \\lambda$$\n$$\\frac{\\partial u}{\\partial V_{\\mathrm{DS}}} = \\frac{\\partial}{\\partial V_{\\mathrm{DS}}}(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2 = 2(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}) \\cdot \\eta$$\nSubstituting these back into the product rule expression:\n$$g_{ds,\\text{short}} = K \\left[ 2\\eta(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})(1 + \\lambda V_{\\mathrm{DS}}) + (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})^2 \\lambda \\right]$$\nWe can factor out the term $(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}})$:\n$$g_{ds,\\text{short}} = K (V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}) \\left[ 2\\eta(1 + \\lambda V_{\\mathrm{DS}}) + \\lambda(V_{\\mathrm{GS}} - V_{\\mathrm{TH0}} + \\eta V_{\\mathrm{DS}}) \\right]$$\nThis expression reveals two contributions to the output conductance: one from the DIBL effect (the $2\\eta$ term) and one from the traditional channel-length modulation (the $\\lambda$ term), which is now also modulated by DIBL through the effective overdrive. The output resistance is $r_{o,\\text{short}} = 1/g_{ds,\\text{short}}$.\n\n**3. Fractional Discrepancy**\n\nThe fractional discrepancy $\\Delta$ quantifies the relative change in output resistance due to the inclusion of the DIBL effect:\n$$\\Delta = \\frac{r_{o,\\text{short}} - r_{o,\\text{long}}}{r_{o,\\text{long}}} = \\frac{r_{o,\\text{short}}}{r_{o,\\text{long}}} - 1 = \\frac{g_{ds,\\text{long}}}{g_{ds,\\text{short}}} - 1$$\nThis metric isolates the impact of DIBL since $\\lambda$ is held constant between the two models. The following program implements these derived formulas to compute $\\Delta$ for the specified test cases. For each case, the saturation condition ($V_{\\mathrm{DS}} \\ge V_{\\mathrm{ov}}$) is verified to ensure the validity of the models used.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the fractional discrepancy in MOSFET output resistance between\n    a long-channel model and a short-channel model with DIBL.\n    \"\"\"\n    test_cases = [\n        # Test case 1 (short-channel, typical strong inversion)\n        {'mu': 0.045, 'Cox': 0.010, 'W': 1.0e-6, 'L': 1.0e-7, 'Vgs': 0.8, 'Vds': 0.6, 'Vth0': 0.35, 'lambda_': 0.10, 'eta': 0.08, 'label': 'Case 1'},\n        # Test case 2 (near-threshold operation)\n        {'mu': 0.050, 'Cox': 0.008, 'W': 0.5e-6, 'L': 0.16e-6, 'Vgs': 0.45, 'Vds': 0.30, 'Vth0': 0.40, 'lambda_': 0.06, 'eta': 0.05, 'label': 'Case 2'},\n        # Test case 3 (extreme short-channel, minimal channel-length modulation)\n        {'mu': 0.045, 'Cox': 0.010, 'W': 2.0e-6, 'L': 60e-9, 'Vgs': 0.90, 'Vds': 0.70, 'Vth0': 0.35, 'lambda_': 1.0e-4, 'eta': 0.12, 'label': 'Case 3'},\n        # Test case 4 (no DIBL baseline)\n        {'mu': 0.050, 'Cox': 0.004, 'W': 1.0e-6, 'L': 1.0e-6, 'Vgs': 0.70, 'Vds': 0.50, 'Vth0': 0.40, 'lambda_': 0.08, 'eta': 0.00, 'label': 'Case 4'}\n    ]\n\n    results = []\n    \n    for case in test_cases:\n        mu = case['mu']\n        Cox = case['Cox']\n        W = case['W']\n        L = case['L']\n        Vgs = case['Vgs']\n        Vds = case['Vds']\n        Vth0 = case['Vth0']\n        lambda_ = case['lambda_']\n        eta = case['eta']\n\n        # 1. Check saturation conditions\n        Vov0 = Vgs - Vth0\n        Vov_eff = Vgs - (Vth0 - eta * Vds)\n        \n        # MOSFET must be on (Vov0 > 0) for saturation models to be meaningful\n        if Vov0 <= 0:\n            raise ValueError(f\"Device in {case['label']} is in subthreshold or off. Vgs-Vth0 = {Vov0:.3f} V.\")\n\n        if not (Vds >= Vov0):\n            raise ValueError(f\"Saturation condition Vds >= Vov not met for long-channel model in {case['label']}: Vds={Vds:.3f} V, Vov={Vov0:.3f} V.\")\n        \n        if not (Vds >= Vov_eff):\n            raise ValueError(f\"Saturation condition Vds >= Vov_eff not met for short-channel model in {case['label']}: Vds={Vds:.3f} V, Vov_eff={Vov_eff:.3f} V.\")\n\n        # 2. Calculate technology parameter K\n        K = 0.5 * mu * Cox * (W / L)\n\n        # 3. Calculate long-channel output conductance (g_ds,long)\n        # g_ds,long = lambda * K * (Vgs - Vth0)^2\n        g_ds_long = lambda_ * K * Vov0**2\n        \n        # 4. Calculate short-channel output conductance (g_ds,short)\n        # g_ds,short = K * (Vov0 + eta*Vds) * [2*eta*(1+lambda*Vds) + lambda*(Vov0 + eta*Vds)]\n        term1_short = 2 * eta * (1 + lambda_ * Vds)\n        term2_short = lambda_ * (Vov0 + eta * Vds)\n        g_ds_short = K * (Vov0 + eta * Vds) * (term1_short + term2_short)\n\n        # 5. Calculate fractional discrepancy Delta\n        if g_ds_short == 0:\n            # This would imply infinite resistance. Discrepancy would be ill-defined or infinite.\n            # Given the problem's parameters, this case should not occur.\n            if g_ds_long == 0:\n                delta = 0.0 # Both resistances are infinite, no discrepancy\n            else:\n                delta = float('inf') # Should not happen\n        else:\n            delta = (g_ds_long / g_ds_short) - 1.0\n\n        results.append(round(delta, 6))\n\n    # Format the final output as a comma-separated list in brackets.\n    output_str = f\"[{','.join(f'{x:.6f}' for x in results)}]\"\n    print(output_str)\n\nsolve()\n```"
        }
    ]
}
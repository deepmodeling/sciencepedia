{
    "hands_on_practices": [
        {
            "introduction": "任何标准单元库的基础都建立在对其最基本元素（如引脚）的正确构建之上。本练习侧重于应用基本的设计规则——最小宽度和通孔包围规则——来确定引脚的最小合法尺寸，这是物理设计中至关重要的第一步。通过这个练习，您将掌握如何从工艺规则出发，确保每一个微小的几何图形都符合可制造性要求。",
            "id": "4300658",
            "problem": "一个用于集成电路和电子设计自动化 (EDA) 的标准单元库正在为单行高架构进行开发。引脚形状需要在三个绘图层上定义：多晶硅 (Poly)、金属层-1 (M1) 和金属层-2 (M2)。每个引脚必须是一个与布线网格对齐的单一曼哈顿矩形，并且必须允许一个中心放置的通孔 (via/contact) 合法地连接到相邻的布线层，而不会产生设计规则检查 (DRC) 违规。\n\n基础是一组 DRC 定义：\n- 最小宽度：对于任何多边形，其最小正交尺寸必须至少为工艺指定的最小宽度。\n- 最小间距：同一层上两个不同多边形边缘之间的最小距离必须满足工艺指定的最小间距；间距不约束单个孤立多边形的内部尺寸。\n- 通孔包围：对于放置在金属或多晶硅多边形内的任何通孔 (via/contact)，该多边形在每一侧都必须超出通孔边缘至少工艺指定的包围尺寸。\n\n提供以下工艺规则：\n- 对于多晶硅 (Poly)：最小宽度 $w_{\\mathrm{poly}} = 20\\,\\text{nm}$，最小间距 $s_{\\mathrm{poly}} = 56\\,\\text{nm}$。多晶硅-M1 接触孔（将通孔层表示为 CA）是一个边长为 $a_{\\mathrm{CA}} = 20\\,\\text{nm}$ 的正方形，需要在所有侧都有 $e_{\\mathrm{poly,CA}} = 10\\,\\text{nm}$ 的多晶硅包围。\n- 对于 M1：最小宽度 $w_{\\mathrm{M1}} = 40\\,\\text{nm}$，最小间距 $s_{\\mathrm{M1}} = 40\\,\\text{nm}$。M1-M2 过孔（将通孔层表示为 V1）是一个边长为 $a_{\\mathrm{V1}} = 28\\,\\text{nm}$ 的正方形，需要在所有侧都有 $e_{\\mathrm{M1,V1}} = 12\\,\\text{nm}$ 的 M1 包围。\n- 对于 M2：最小宽度 $w_{\\mathrm{M2}} = 36\\,\\text{nm}$，最小间距 $s_{\\mathrm{M2}} = 36\\,\\text{nm}$。同一个 M1-M2 过孔 V1 需要在所有侧都有 $e_{\\mathrm{M2,V1}} = 12\\,\\text{nm}$ 的 M2 包围。\n\n假设每层上的引脚矩形必须完全包含位于矩形中心的相应通孔，并且同一层上附近没有其他形状（因此最小间距不约束矩形的内部尺寸）。没有最小面积规则适用。仅使用上述 DRC 定义和数值，从第一性原理推导出每层上既能避免 DRC 违规又能容纳通孔的引脚矩形的最小宽度和高度，并按以下顺序报告它们：多晶硅宽度、多晶硅高度、M1 宽度、M1 高度、M2 宽度、M2 高度。\n\n您的最终数值答案请以纳米 (nm) 表示。除精确算术外，不需要进行舍入。",
            "solution": "该问题是有效的，因为它有科学依据、提法恰当、客观，并包含了根据集成电路物理设计的标准原则推导出唯一解所需的所有必要信息。\n\n目标是确定多晶硅 (Poly)、金属层-1 (M1) 和金属层-2 (M2) 这三个不同层上矩形引脚的最小宽度和高度。对于每一层，该矩形的尺寸必须同时满足两组设计规则检查 (DRC)：最小宽度规则和通孔包围规则。\n\n设 $W$ 为给定层上引脚矩形的宽度， $H$ 为其高度。由于问题指定了单个曼哈顿矩形，且约束是各向同性的（通孔是正方形，且各侧的包围尺寸均匀），因此所需的最小宽度和高度将是相同的。我们将此最小尺寸表示为 $D_{\\text{min}}$。\n\n对于任何给定层，最小尺寸 $D_{\\text{min}}$ 由两个约束中更严格的一个决定：\n1.  该层的最小宽度规则，表示为 $w_{\\text{layer}}$。引脚尺寸必须至少为该值：$D \\ge w_{\\text{layer}}$。\n2.  通孔包围规则。引脚矩形必须足够大，以包含中心放置的通孔，并在所有侧超出它所需的包围距离。如果通孔在所关注轴向上的尺寸为 $a_{\\text{cut}}$，所需的包围尺寸为 $e_{\\text{layer,cut}}$，则此规则所要求的总尺寸为 $D_{\\text{enclosure}} = a_{\\text{cut}} + 2 \\times e_{\\text{layer,cut}}$。\n\n为同时满足这两个规则，引脚的最小合法尺寸必须是每个规则所要求的值中的最大值：\n$$D_{\\text{min}} = \\max(w_{\\text{layer}}, D_{\\text{enclosure}})$$\n\n我们将此原则应用于指定的每一层。\n\n**1. 多晶硅 (Poly) 层引脚**\n\nPoly 层上的引脚必须能容纳多晶硅-M1 接触孔 (CA)。\n给定的参数是：\n-   多晶硅最小宽度：$w_{\\mathrm{poly}} = 20\\,\\text{nm}$。\n-   CA 接触孔是边长为 $a_{\\mathrm{CA}} = 20\\,\\text{nm}$ 的正方形。\n-   CA 的多晶硅包围：$e_{\\mathrm{poly,CA}} = 10\\,\\text{nm}$。\n\n首先，我们计算包围规则所要求的尺寸。引脚必须在接触孔的两个相对侧各延伸 $e_{\\mathrm{poly,CA}}$。包围所要求的总尺寸为：\n$$D_{\\text{enclosure, poly}} = a_{\\mathrm{CA}} + 2 \\times e_{\\mathrm{poly,CA}} = 20\\,\\text{nm} + 2 \\times 10\\,\\text{nm} = 40\\,\\text{nm}$$\n接下来，我们将其与多晶硅的最小宽度规则进行比较：\n$$D_{\\text{min, poly}} = \\max(w_{\\mathrm{poly}}, D_{\\text{enclosure, poly}}) = \\max(20\\,\\text{nm}, 40\\,\\text{nm}) = 40\\,\\text{nm}$$\n因此，多晶硅引脚矩形的最小宽度和最小高度均为 $40\\,\\text{nm}$。\n\n**2. 金属层-1 (M1) 层引脚**\n\nM1 层上的引脚必须能容纳 M1-M2 过孔 (V1)。\n给定的参数是：\n-   M1 最小宽度：$w_{\\mathrm{M1}} = 40\\,\\text{nm}$。\n-   V1 过孔是边长为 $a_{\\mathrm{V1}} = 28\\,\\text{nm}$ 的正方形。\n-   V1 的 M1 包围：$e_{\\mathrm{M1,V1}} = 12\\,\\text{nm}$。\n\n我们计算 M1 的包围规则所要求的尺寸：\n$$D_{\\text{enclosure, M1}} = a_{\\mathrm{V1}} + 2 \\times e_{\\mathrm{M1,V1}} = 28\\,\\text{nm} + 2 \\times 12\\,\\text{nm} = 28\\,\\text{nm} + 24\\,\\text{nm} = 52\\,\\text{nm}$$\n接下来，我们将其与 M1 的最小宽度规则进行比较：\n$$D_{\\text{min, M1}} = \\max(w_{\\mathrm{M1}}, D_{\\text{enclosure, M1}}) = \\max(40\\,\\text{nm}, 52\\,\\text{nm}) = 52\\,\\text{nm}$$\n因此，M1 引脚矩形的最小宽度和最小高度均为 $52\\,\\text{nm}$。\n\n**3. 金属层-2 (M2) 层引脚**\n\nM2 层上的引脚也必须能容纳 M1-M2 过孔 (V1)。\n给定的参数是：\n-   M2 最小宽度：$w_{\\mathrm{M2}} = 36\\,\\text{nm}$。\n-   V1 过孔是边长为 $a_{\\mathrm{V1}} = 28\\,\\text{nm}$ 的正方形。\n-   V1 的 M2 包围：$e_{\\mathrm{M2,V1}} = 12\\,\\text{nm}$。\n\n我们计算 M2 的包围规则所要求的尺寸：\n$$D_{\\text{enclosure, M2}} = a_{\\mathrm{V1}} + 2 \\times e_{\\mathrm{M2,V1}} = 28\\,\\text{nm} + 2 \\times 12\\,\\text{nm} = 28\\,\\text{nm} + 24\\,\\text{nm} = 52\\,\\text{nm}$$\n接下来，我们将其与 M2 的最小宽度规则进行比较：\n$$D_{\\text{min, M2}} = \\max(w_{\\mathrm{M2}}, D_{\\text{enclosure, M2}}) = \\max(36\\,\\text{nm}, 52\\,\\text{nm}) = 52\\,\\text{nm}$$\n因此，M2 引脚矩形的最小宽度和最小高度均为 $52\\,\\text{nm}$。\n\n问题要求按以下顺序给出六个值：多晶硅宽度、多晶硅高度、M1 宽度、M1 高度、M2 宽度、M2 高度。\n根据我们的推导，这些值为：\n-   多晶硅宽度：$40\\,\\text{nm}$\n-   多晶硅高度：$40\\,\\text{nm}$\n-   M1 宽度：$52\\,\\text{nm}$\n-   M1 高度：$52\\,\\text{nm}$\n-   M2 宽度：$52\\,\\text{nm}$\n-   M2 高度：$52\\,\\text{nm}$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n40  40  52  52  52  52\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在定义了单个组件的几何规则后，下一步是将其放置在更大的版图环境中。本练习模拟了自动化布局中的一个常见场景：一个单元必须被移动以避开固定的布线障碍物。它旨在教授如何在离散的“位点”网格上，通过几何推理和优化，找到距离初始位置最近的合法位置，这是布局合法化（legalization）的核心任务。",
            "id": "4300583",
            "problem": "在一个用于标准单元布局的电子设计自动化 (EDA) 流程中，考虑一个需要在标准单元行上进行合法化的单行高单元。该行沿水平轴有一个一维位点格，位点间距为 $p_x$，这意味着任何单行高单元的合法左下角 x 坐标被限制在集合 $\\{x \\mid x = n p_x,\\; n \\in \\mathbb{Z}\\}$ 中。设位点间距为 $p_x = 0.19\\,\\mu\\text{m}$。该单元的宽度 $w_c$ 等于 11 个位点，因此 $w_c = 11 p_x = 2.09\\,\\mu\\text{m}$，其高度恰好等于一个行高。该单元的初始左下角坐标为 $x_i = 58.14\\,\\mu\\text{m}$，该坐标与位点格对齐。\n\n存在一个矩形布线障碍物，它跨越了该行的整个高度，并在水平方向上占据了闭区间 $[x_o, x_o + w_o] = [50.00, 60.00]\\,\\mu\\text{m}$。必须强制执行一个强制禁布边距 $m_k$，以确保单元的任何部分都不得进入扩展的禁布区间 $[x_o - m_k, x_o + w_o + m_k]$。设禁布边距为 $m_k = p_x = 0.19\\,\\mu\\text{m}$。单元的放置必须使其占据的水平区间 $[x, x + w_c]$ 不与扩展的禁布区间相交，同时保持在位点格上。移动仅限于当前行内的水平轴上；垂直坐标和方向保持不变。\n\n从合法位点和几何不重叠（闭区间之间无交集）的定义出发，通过选择能够产生相对于障碍物和禁布区合法布局的最近合法位点坐标 $x^{\\star}$ 来构建合法化校正，并计算以位点轨迹为单位测量的位移大小 $|x^{\\star} - x_i|$。将最终答案表示为一个代表位移的位点轨迹数的实数。如果需要四舍五入，将答案四舍五入到四位有效数字；否则，提供由位点格所蕴含的精确离散值。",
            "solution": "首先对问题进行有效性检查。\n\n### 步驟1：提取已知条件\n- 位点间距：$p_x = 0.19\\,\\mu\\text{m}$。\n- 合法左下角 x 坐标：$\\{x \\mid x = n p_x,\\; n \\in \\mathbb{Z}\\}$。\n- 单元宽度：$w_c = 11$ 个位点，即 $w_c = 11 p_x = 2.09\\,\\mu\\text{m}$。\n- 单元的初始左下角坐标：$x_i = 58.14\\,\\mu\\text{m}$。题目说明该坐标是与位点对齐的。\n- 布线障碍物水平区间：$[x_o, x_o + w_o] = [50.00, 60.00]\\,\\mu\\text{m}$。\n- 禁布边距：$m_k = p_x = 0.19\\,\\mu\\text{m}$。\n- 布局约束：单元占据的区间 $[x, x + w_c]$ 不得与扩展的禁布区间 $[x_o - m_k, x_o + w_o + m_k]$ 相交。\n- 目标：找到离 $x_i$ 最近的合法位点坐标 $x^{\\star}$，并以位点轨迹为单位计算位移 $|x^{\\star} - x_i|$。\n\n### 步驟2：使用提取的已知条件进行验证\n该问题定义明确，并且基于集成电路设计中标准单元版图的原则。诸如“位点间距”、“禁布边距”和“合法化”等术语在电子设计自动化 (EDA) 领域都是标准术语。给定的数值在数字上是一致的。例如，初始坐标 $x_i = 58.14\\,\\mu\\text{m}$ 是位点间距 $p_x = 0.19\\,\\mu\\text{m}$ 的整数倍，因为 $58.14 / 0.19 = 306$。单元宽度 $w_c = 11 \\times 0.19\\,\\mu\\text{m} = 2.09\\,\\mu\\text{m}$ 也是一致的。该问题是自包含、客观的，并且没有违反任何科学或数学原理。这是一个在离散格点上的标准几何约束问题，它是适定的并且有唯一解。\n\n### 步驟3：结论与行动\n该问题被视为有效。将提供一个解法。\n\n### 解法推导\n该解法需要找到单元的合法布局位置集合，然后在此集合中确定离单元初始位置最近的位置。\n\n首先，我们定义扩展的禁布区间 $I_F$，它包括布线障碍物和禁布边距。\n障碍物由区间 $[50.00, 60.00]\\,\\mu\\text{m}$ 给出。\n禁布边距为 $m_k = p_x = 0.19\\,\\mu\\text{m}$。\n扩展的禁布区间为 $I_F = [x_o - m_k, x_o + w_o + m_k]$。\n代入给定值，其中 $x_o = 50.00\\,\\mu\\text{m}$ 且 $x_o+w_o = 60.00\\,\\mu\\text{m}$：\n$$I_F = [50.00 - 0.19, 60.00 + 0.19]\\,\\mu\\text{m} = [49.81, 60.19]\\,\\mu\\text{m}$$\n\n接下来，我们建立合法布局的条件。一个放置在左下角坐标 $x$ 处的单元占据了水平区间 $I_c(x) = [x, x + w_c]$。单元宽度为 $w_c = 11 p_x = 11 \\times 0.19\\,\\mu\\text{m} = 2.09\\,\\mu\\text{m}$。\n要使布局合法，单元的区间 $I_c(x)$ 必须不与禁布区间 $I_F$ 相交。\n$$I_c(x) \\cap I_F = \\emptyset$$\n如果 $I_c(x)$ 完全位于 $I_F$ 的左侧或完全位于 $I_F$ 的右侧，则此条件得到满足。\n\n情况1：单元被放置在禁布区域的左侧。\n单元的右边缘 $x + w_c$ 必须小于或等于 $I_F$ 的左边缘。\n$$x + w_c \\le 49.81\\,\\mu\\text{m}$$\n$$x \\le 49.81\\,\\mu\\text{m} - w_c = 49.81\\,\\mu\\text{m} - 2.09\\,\\mu\\text{m} = 47.72\\,\\mu\\text{m}$$\n\n情况2：单元被放置在禁布区域的右侧。\n单元的左边缘 $x$ 必须大于或等于 $I_F$ 的右边缘。\n$$x \\ge 60.19\\,\\mu\\text{m}$$\n\n现在，我们必须纳入布局坐标 $x$ 必须位于合法位点上的约束，即对于某个整数 $n$，$x = n p_x$。我们可以将对 $x$ 的约束表示为对位点索引 $n$ 的约束。\n\n对于情况1：\n$$n p_x \\le 47.72\\,\\mu\\text{m}$$\n$$n \\le \\frac{47.72\\,\\mu\\text{m}}{p_x} = \\frac{47.72}{0.19} = 251.157...$$\n由于 $n$ 必须是整数，因此障碍物左侧的最大合法位点索引是 $n_{L,max} = \\lfloor 251.157... \\rfloor = 251$。\n\n对于情况2：\n$$n p_x \\ge 60.19\\,\\mu\\text{m}$$\n$$n \\ge \\frac{60.19\\,\\mu\\text{m}}{p_x} = \\frac{60.19}{0.19} = 316.789...$$\n由于 $n$ 必须是整数，因此障碍物右侧的最小合法位点索引是 $n_{R,min} = \\lceil 316.789... \\rceil = 317$。\n\n因此，所有合法位点索引 $n$ 的集合是 $(-\\infty, 251] \\cup [317, \\infty)$，其中 $n \\in \\mathbb{Z}$。\n\n单元的初始布局位置在 $x_i = 58.14\\,\\mu\\text{m}$。我们求出初始位点索引 $n_i$：\n$$n_i = \\frac{x_i}{p_x} = \\frac{58.14}{0.19} = 306$$\n初始位点索引 $n_i=306$ 落在禁布索引范围 $[252, 316]$ 内，这证实了初始布局是非法的。\n\n目标是找到离 $n_i = 306$ 最近的合法位点索引 $n^{\\star}$。两个候选的合法索引是禁布区域的边界，$n_L = 251$ 和 $n_R = 317$。我们计算到每个候选位置的距离（以位点轨迹为单位，即索引的绝对差值）。\n\n到左侧合法位点的距离：\n$$|n_L - n_i| = |251 - 306| = |-55| = 55$$\n\n到右侧合法位点的距离：\n$$|n_R - n_i| = |317 - 306| = |11| = 11$$\n\n比较这两个距离，最小位移是 $11$ 个位点轨迹。最近的合法位点索引是 $n^{\\star} = 317$。\n\n问题要求的是以位点轨迹为单位测量的位移大小。这就是两个计算出的距离中的最小值。\n$$ \\text{位移} = \\min(|n_L - n_i|, |n_R - n_i|) = \\min(55, 11) = 11 $$\n最终答案是一个精确整数，因此无需四舍五入。",
            "answer": "$$\\boxed{11}$$"
        },
        {
            "introduction": "在先进工艺节点中，简单的几何规则已不足以应对复杂性，必须管理如双重曝光这类复杂的制造效应。这项高级练习要求您将版图中的几何间距关系抽象为一个图论问题，并应用图着色算法来解决光刻冲突。这是现代EDA工具中解决可制造性设计（DFM）挑战的一项核心技术。",
            "id": "4300656",
            "problem": "考虑一排三个相邻的互补金属氧化物半导体（CMOS）标准单元，它们在双掩模光刻-蚀刻-光刻-蚀刻（LELE）双重曝光流程中布局在第一层金属（Metal-1）上。在此流程中，任何两个间距小于同掩模最小间距的特征必须分配到不同的掩模上，而任何两个间距小于不同掩模最小间距的特征则构成硬性设计规则违规，无论其颜色如何。电子设计自动化（EDA）的目标是从给定的几何图形中导出颜色冲突图，并确定一个与间距规则和修整（trim）约束一致的可行的双掩模着色方案。\n\n假设所考虑的技术节点具有以下经过充分测试的第一层金属（Metal-1）规则和事实：\n\n- 第一层金属的最小宽度为 $w_{\\min} = 40\\,\\text{nm}$，且本问题中每个引脚的宽度均为 $w = 40\\,\\text{nm}$，并跨越整个单元高度 $H = 270\\,\\text{nm}$。\n- 同掩模最小间距为 $s_{\\mathrm{SM}} = 80\\,\\text{nm}$。\n- 不同掩模最小间距为 $s_{\\mathrm{DM}} = 40\\,\\text{nm}$。\n- 对于两个宽度均为 $w$ 的垂直平行第一层金属矩形，其在垂直轴上的投影在整个高度上重叠，它们最近边缘之间沿水平轴的边到边间距为 $s_{ij} = |x_i - x_j| - w$。\n- 如果 $s_{ij}  s_{\\mathrm{DM}}$，则一对图形是无条件的违规。如果 $s_{\\mathrm{DM}} \\leq s_{ij}  s_{\\mathrm{SM}}$，则一对图形必须分配到不同的掩模。如果 $s_{ij} \\geq s_{\\mathrm{SM}}$，则一对图形没有着色约束。\n\n有五个垂直的第一层金属引脚矩形，索引为 $R_1, R_2, R_3, R_4, R_5$，每个矩形从 $y=0\\,\\text{nm}$ 延伸到 $y=270\\,\\text{nm}$，并以以下水平坐标为中心：\n- $R_1$：$x_1 = 0\\,\\text{nm}$，\n- $R_2$：$x_2 = 90\\,\\text{nm}$，\n- $R_3$：$x_3 = 170\\,\\text{nm}$，\n- $R_4$：$x_4 = 250\\,\\text{nm}$，\n- $R_5$：$x_5 = 330\\,\\text{nm}$。\n\n除了间距规则外，库所使用的自对准双重曝光（SADP）修整策略还施加了以下掩模分配约束：\n\n- 一个预着色的芯轴锚点将 $R_1$ 固定到掩模 $\\mathcal{A}$。\n- 一个端盖连续性修整约束要求 $R_5$ 与 $R_1$ 在同一个掩模上。\n\n从上述定义和规则出发，完成以下任务：\n\n1. 计算所有配对间距 $s_{ij}$，并在顶点 $\\{R_1,R_2,R_3,R_4,R_5\\}$ 上导出颜色冲突图，当且仅当 $s_{\\mathrm{DM}} \\leq s_{ij}  s_{\\mathrm{SM}}$ 时，在 $R_i$ 和 $R_j$ 之间放置一条边。\n2. 使用关于图的双着色性的第一性原理以及给定的锚点和修整约束，确定是否存在可行的双掩模着色方案。如果存在，请论证其结构和自由度。\n3. 确定满足所有间距和修整规则的 $\\{R_1,R_2,R_3,R_4,R_5\\}$ 的不同合法双掩模着色分配的总数。\n\n将您的最终答案表示为一个纯整数。无需四舍五入。最终答案中不应出现单位。",
            "solution": "该问题被评估为有效。它在科学上基于双重曝光光刻的原理，问题提出得当，目标明确，数据充分，并使用了客观、正式的语言。没有会妨碍严谨求解的矛盾或模糊之处。我们按照要求分三部分进行求解。\n\n给定的基本参数是引脚宽度 $w = 40\\,\\text{nm}$，同掩模最小间距 $s_{\\mathrm{SM}} = 80\\,\\text{nm}$，以及不同掩模最小间距 $s_{\\mathrm{DM}} = 40\\,\\text{nm}$。五个矩形引脚 $R_1, R_2, R_3, R_4, R_5$ 的水平中心坐标分别为 $x_1 = 0\\,\\text{nm}$, $x_2 = 90\\,\\text{nm}$, $x_3 = 170\\,\\text{nm}$, $x_4 = 250\\,\\text{nm}$ 和 $x_5 = 330\\,\\text{nm}$。\n\n两个引脚 $R_i$ 和 $R_j$ 之间的边到边间距使用公式 $s_{ij} = |x_i - x_j| - w$ 计算。当且仅当 $s_{\\mathrm{DM}} \\leq s_{ij}  s_{\\mathrm{SM}}$ 时，$R_i$ 和 $R_j$ 之间存在着色冲突，在冲突图中表示为一条边。如果 $s_{ij}  s_{\\mathrm{DM}}$，则会发生硬性违规，使得任何着色都变得不可能。\n\n首先，我们计算所有唯一的配对间距 $s_{ij}$（其中 $i  j$）：\n- $s_{12} = |x_1 - x_2| - w = |0 - 90| - 40 = 90 - 40 = 50\\,\\text{nm}$。\n- $s_{13} = |x_1 - x_3| - w = |0 - 170| - 40 = 170 - 40 = 130\\,\\text{nm}$。\n- $s_{14} = |x_1 - x_4| - w = |0 - 250| - 40 = 250 - 40 = 210\\,\\text{nm}$。\n- $s_{15} = |x_1 - x_5| - w = |0 - 330| - 40 = 330 - 40 = 290\\,\\text{nm}$。\n- $s_{23} = |x_2 - x_3| - w = |90 - 170| - 40 = 80 - 40 = 40\\,\\text{nm}$。\n- $s_{24} = |x_2 - x_4| - w = |90 - 250| - 40 = 160 - 40 = 120\\,\\text{nm}$。\n- $s_{25} = |x_2 - x_5| - w = |90 - 330| - 40 = 240 - 40 = 200\\,\\text{nm}$。\n- $s_{34} = |x_3 - x_4| - w = |170 - 250| - 40 = 80 - 40 = 40\\,\\text{nm}$。\n- $s_{35} = |x_3 - x_5| - w = |170 - 330| - 40 = 160 - 40 = 120\\,\\text{nm}$。\n- $s_{45} = |x_4 - x_5| - w = |250 - 330| - 40 = 80 - 40 = 40\\,\\text{nm}$。\n\n现在，我们将这些间距与着色规则的阈值 $s_{\\mathrm{DM}} = 40\\,\\text{nm}$ 和 $s_{\\mathrm{SM}} = 80\\,\\text{nm}$ 进行比较。\n- 没有间距小于 $s_{\\mathrm{DM}} = 40\\,\\text{nm}$，因此不存在硬性违规。\n- 我们识别出满足 $40\\,\\text{nm} \\leq s_{ij}  80\\,\\text{nm}$ 的冲突：\n  - $s_{12} = 50\\,\\text{nm}$：$40 \\leq 50  80 \\implies$ $R_1$ 和 $R_2$ 之间存在冲突。\n  - $s_{23} = 40\\,\\text{nm}$：$40 \\leq 40  80 \\implies$ $R_2$ 和 $R_3$ 之间存在冲突。\n  - $s_{34} = 40\\,\\text{nm}$：$40 \\leq 40  80 \\implies$ $R_3$ 和 $R_4$ 之间存在冲突。\n  - $s_{45} = 40\\,\\text{nm}$：$40 \\leq 40  80 \\implies$ $R_4$ 和 $R_5$ 之间存在冲突。\n- 所有其他间距都大于或等于 $s_{\\mathrm{SM}}=80\\,\\text{nm}$，因此它们不施加着色约束。\n\n颜色冲突图的顶点为 $\\{R_1, R_2, R_3, R_4, R_5\\}$，边对应于已识别的冲突。边集为 $E = \\{(R_1, R_2), (R_2, R_3), (R_3, R_4), (R_4, R_5)\\}$。这个结构形成一个长度为4的路径图，可以写为 $R_1 - R_2 - R_3 - R_4 - R_5$。\n\n其次，我们确定是否存在可行的双掩模着色方案。一个图是可双着色的，当且仅当它是二部图，这等同于说它不包含任何奇数长度的环。我们导出的冲突图是一个路径图，它是一种树。所有的树都是二部图，因此是可双着色的。因此，仅根据间距规则，使用两种掩模（我们称之为 $\\mathcal{A}$ 和 $\\mathcal{B}$）进行有效着色是可能的。\n\n我们现在必须结合额外的修整约束：\n1. Color($R_1$) = $\\mathcal{A}$。\n2. Color($R_5$) = Color($R_1$)。\n\n我们分析这些约束对路径图着色的影响。图中相邻顶点必须具有不同颜色的要求，使得着色从 $R_1$ 开始传播：\n- Color($R_1$) = $\\mathcal{A}$（锚点约束）。\n- 由于 $(R_1, R_2)$ 是一条边，Color($R_2$) 必须是 $\\mathcal{B}$。\n- 由于 $(R_2, R_3)$ 是一条边，Color($R_3$) 必须是 $\\mathcal{A}$。\n- 由于 $(R_3, R_4)$ 是一条边，Color($R_4$) 必须是 $\\mathcal{B}$。\n- 由于 $(R_4, R_5)$ 是一条边，Color($R_5$) 必须是 $\\mathcal{A}$。\n\n这种着色方案由 $R_1$ 上的锚点和图的连通性唯一确定。现在我们必须检查其是否与第二个修整约束（要求 Color($R_5$) = Color($R_1$)）一致。我们推导出的着色方案得出 Color($R_5$) = $\\mathcal{A}$ 且 Color($R_1$) = $\\mathcal{A}$。该约束得到满足。\n另外，在二部图的任何2-着色中，两个顶点颜色相同当且仅当它们之间的距离（最短路径的长度）为偶数。在冲突图中，从 $R_1$ 到 $R_5$ 的路径由4条边组成。由于距离是偶数，$R_1$ 和 $R_5$ 必须具有相同的颜色。因此，修整约束与间距导出的图结构是一致的。存在一个可行的着色方案，并且由于锚点固定了连通图中一个顶点的颜色，所以该着色方案是唯一的。不存在自由度。\n\n第三，我们确定不同合法双掩模着色分配的总数。如上一步所确立，冲突图结构和锚点约束 Color($R_1$) = $\\mathcal{A}$ 的组合唯一地确定了每个引脚的颜色。最终的颜色分配如下：\n- $R_1 \\to \\mathcal{A}$\n- $R_2 \\to \\mathcal{B}$\n- $R_3 \\to \\mathcal{A}$\n- $R_4 \\to \\mathcal{B}$\n- $R_5 \\to \\mathcal{A}$\n\n这个单一的分配方案已被证明与所有间距规则和两个修整约束都一致。由于在任何步骤都没有选择的余地，因此恰好只有一个有效的着色方案。\n\n因此，不同合法双掩模着色分配的总数为 $1$。",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "标准单元库的基石是符合设计规则的底层版图。这个练习将带你回到最基本层面：为单个引脚（pin）确定其最小合法尺寸。为了确保可制造性和可靠的连接，引脚的几何形状必须同时满足多项设计规则，例如最小线宽和通孔包围规则。通过这个实践 ，你将学习如何从第一性原理出发，综合不同的约束条件，计算出符合所有设计规则检查（DRC）的最小矩形尺寸，这是物理设计中的一项核心技能。",
            "id": "4300658",
            "problem": "我们正在为单行高架构开发一个用于集成电路和电子设计自动化 (EDA) 的标准单元库。引脚形状需要在三个绘图层上定义：多晶硅栅极 (Poly)、金属-1层 (M1) 和金属-2层 (M2)。每个引脚必须是一个与布线网格对齐的单个曼哈顿矩形，并且必须允许一个中心放置的通孔（via/contact）合法地连接到相邻的布线层，而不会产生设计规则检查 (DRC) 违规。\n\n基础是以下 DRC 定义集：\n- 最小宽度：对于任何多边形，其最小的正交尺寸必须至少为工艺指定的最小宽度。\n- 最小间距：同一层上两个不同多边形边缘之间的最小距离必须满足工艺指定的最小间距；间距不限制单个孤立多边形的内部尺寸。\n- 通孔包围：对于放置在金属或多晶硅多边形内的任何通孔（via/contact），该多边形在每一侧都必须超出通孔边缘至少工艺指定的包围尺寸。\n\n提供以下工艺规则：\n- 对于 Poly：最小宽度 $w_{\\mathrm{poly}} = 20\\,\\text{nm}$，最小间距 $s_{\\mathrm{poly}} = 56\\,\\text{nm}$。多晶硅到M1的接触孔（将通孔层表示为 CA）是一个边长为 $a_{\\mathrm{CA}} = 20\\,\\text{nm}$ 的正方形，需要在所有侧面都有 $e_{\\mathrm{poly,CA}} = 10\\,\\text{nm}$ 的 Poly 包围。\n- 对于 M1：最小宽度 $w_{\\mathrm{M1}} = 40\\,\\text{nm}$，最小间距 $s_{\\mathrm{M1}} = 40\\,\\text{nm}$。M1到M2的通孔（将通孔层表示为 V1）是一个边长为 $a_{\\mathrm{V1}} = 28\\,\\text{nm}$ 的正方形，需要在所有侧面都有 $e_{\\mathrm{M1,V1}} = 12\\,\\text{nm}$ 的 M1 包围。\n- 对于 M2：最小宽度 $w_{\\mathrm{M2}} = 36\\,\\text{nm}$，最小间距 $s_{\\mathrm{M2}} = 36\\,\\text{nm}$。同一个 M1到M2的通孔 V1 需要在所有侧面都有 $e_{\\mathrm{M2,V1}} = 12\\,\\text{nm}$ 的 M2 包围。\n\n假设每一层上的引脚矩形必须完全包含位于矩形中心的相应通孔，并且同一层上附近没有其他图形（因此最小间距不限制矩形的内部尺寸）。无最小面积规则适用。仅使用上述 DRC 定义和数值，从第一性原理推导每一层上引脚矩形的最小宽度和高度，使其既能避免 DRC 违规又能容纳通孔，并按以下顺序报告结果：Poly 宽度、Poly 高度、M1 宽度、M1 高度、M2 宽度、M2 高度。\n\n以纳米 (nm) 为单位表示您的最终数值答案。除了精确计算外，不需要进行四舍五入。",
            "solution": "这个问题是有效的，因为它具有科学依据、问题明确、客观，并且包含了所有基于集成电路物理设计标准原理推导出唯一解所需的信息。\n\n目标是确定在三个不同层上（多晶硅(Poly)、金属-1(M1)和金属-2(M2)）的矩形引脚的最小宽度和高度。对于每一层，该矩形的尺寸必须同时满足两组设计规则检查 (DRC)：最小宽度规则和通孔包围规则。\n\n设 $W$ 为给定层上引脚矩形的宽度， $H$ 为其高度。由于问题指定了单个曼哈顿矩形，且约束是各向同性的（通孔是正方形，包围在所有侧面都是均匀的），因此所需的最小宽度和高度将是相同的。我们用 $D_{\\text{min}}$ 表示这个最小尺寸。\n\n对于任何给定的层，最小尺寸 $D_{\\text{min}}$ 由两个约束中更严格的一个决定：\n1.  该层的最小宽度规则，表示为 $w_{\\text{layer}}$。引脚尺寸必须至少为该值：$D \\ge w_{\\text{layer}}$。\n2.  通孔包围规则。引脚矩形必须足够大，以包含居中的通孔，并在所有侧面都超出通孔边缘所需的包围距离。如果通孔在目标轴向上的尺寸为 $a_{\\text{cut}}$，所需的包围尺寸为 $e_{\\text{layer,cut}}$，则此规则所需的总尺寸为 $D_{\\text{enclosure}} = a_{\\text{cut}} + 2 \\times e_{\\text{layer,cut}}$。\n\n为同时满足这两个规则，引脚的最小合法尺寸必须是每个规则所需值的最大值：\n$$D_{\\text{min}} = \\max(w_{\\text{layer}}, D_{\\text{enclosure}})$$\n\n我们将此原理应用于指定的每一层。\n\n**1. 多晶硅 (Poly) 层引脚**\n\nPoly 层上的引脚必须容纳多晶硅到M1的接触孔 (CA)。\n给定的参数是：\n-   Poly 最小宽度: $w_{\\mathrm{poly}} = 20\\,\\text{nm}$。\n-   CA 接触孔是边长为 $a_{\\mathrm{CA}} = 20\\,\\text{nm}$ 的正方形。\n-   CA 的 Poly 包围尺寸: $e_{\\mathrm{poly,CA}} = 10\\,\\text{nm}$。\n\n首先，我们计算包围规则所需的尺寸。引脚必须在接触孔的两个相对侧各延伸 $e_{\\mathrm{poly,CA}}$。\n包围所需的总尺寸为：\n$$D_{\\text{enclosure, poly}} = a_{\\mathrm{CA}} + 2 \\times e_{\\mathrm{poly,CA}} = 20\\,\\text{nm} + 2 \\times 10\\,\\text{nm} = 40\\,\\text{nm}$$\n接下来，我们将其与 Poly 的最小宽度规则进行比较：\n$$D_{\\text{min, poly}} = \\max(w_{\\mathrm{poly}}, D_{\\text{enclosure, poly}}) = \\max(20\\,\\text{nm}, 40\\,\\text{nm}) = 40\\,\\text{nm}$$\n因此，Poly 引脚矩形的最小宽度和最小高度均为 $40\\,\\text{nm}$。\n\n**2. 金属-1 (M1) 层引脚**\n\nM1 层上的引脚必须容纳 M1到M2的通孔 (V1)。\n给定的参数是：\n-   M1 最小宽度: $w_{\\mathrm{M1}} = 40\\,\\text{nm}$。\n-   V1 通孔是边长为 $a_{\\mathrm{V1}} = 28\\,\\text{nm}$ 的正方形。\n-   V1 的 M1 包围尺寸: $e_{\\mathrm{M1,V1}} = 12\\,\\text{nm}$。\n\n我们计算 M1 的包围规则所需的尺寸：\n$$D_{\\text{enclosure, M1}} = a_{\\mathrm{V1}} + 2 \\times e_{\\mathrm{M1,V1}} = 28\\,\\text{nm} + 2 \\times 12\\,\\text{nm} = 28\\,\\text{nm} + 24\\,\\text{nm} = 52\\,\\text{nm}$$\n接下来，我们将其与 M1 的最小宽度规则进行比较：\n$$D_{\\text{min, M1}} = \\max(w_{\\mathrm{M1}}, D_{\\text{enclosure, M1}}) = \\max(40\\,\\text{nm}, 52\\,\\text{nm}) = 52\\,\\text{nm}$$\n因此，M1 引脚矩形的最小宽度和最小高度均为 $52\\,\\text{nm}$。\n\n**3. 金属-2 (M2) 层引脚**\n\nM2 层上的引脚也必须容纳 M1到M2的通孔 (V1)。\n给定的参数是：\n-   M2 最小宽度: $w_{\\mathrm{M2}} = 36\\,\\text{nm}$。\n-   V1 通孔是边长为 $a_{\\mathrm{V1}} = 28\\,\\text{nm}$ 的正方形。\n-   V1 的 M2 包围尺寸: $e_{\\mathrm{M2,V1}} = 12\\,\\text{nm}$。\n\n我们计算 M2 的包围规则所需的尺寸：\n$$D_{\\text{enclosure, M2}} = a_{\\mathrm{V1}} + 2 \\times e_{\\mathrm{M2,V1}} = 28\\,\\text{nm} + 2 \\times 12\\,\\text{nm} = 28\\,\\text{nm} + 24\\,\\text{nm} = 52\\,\\text{nm}$$\n接下来，我们将其与 M2 的最小宽度规则进行比较：\n$$D_{\\text{min, M2}} = \\max(w_{\\mathrm{M2}}, D_{\\text{enclosure, M2}}) = \\max(36\\,\\text{nm}, 52\\,\\text{nm}) = 52\\,\\text{nm}$$\n因此，M2 引脚矩形的最小宽度和最小高度均为 $52\\,\\text{nm}$。\n\n问题要求按以下顺序给出六个值：Poly 宽度、Poly 高度、M1 宽度、M1 高度、M2 宽度、M2 高度。\n根据我们的推导，这些值为：\n-   Poly 宽度: $40\\,\\text{nm}$\n-   Poly 高度: $40\\,\\text{nm}$\n-   M1 宽度: $52\\,\\text{nm}$\n-   M1 高度: $52\\,\\text{nm}$\n-   M2 宽度: $52\\,\\text{nm}$\n-   M2 高度: $52\\,\\text{nm}$",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n40  40  52  52  52  52\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在自动化布局布线流程中，标准单元像乐高积木一样被拼接在一起。然而，简单的并排摆放可能会在单元边界处引发设计规则冲突。这个练习  模拟了解决这一挑战的真实场景，即通过计算确定两个相邻单元之间所需的最小间隔宽度（spacer width）。你将学会如何利用单元库中定义的边界阻碍（boundary obstruction）信息，来确保在满足所有层的最小间距规则的前提下，实现无设计规则冲突的单元邻接。",
            "id": "4300630",
            "problem": "考虑在电子设计自动化（EDA）流程中，将两个单行高的标准单元 $\\mathcal{C}_1$ 和 $\\mathcal{C}_2$ 沿着一行相邻放置。这两个单元具有相同的朝向和电源轨对齐方式，并且它们将水平邻接（即，它们相邻的垂直边界相接）。为防止违反设计规则检查（DRC），每个单元在特定层上都带有边界阻挡。边界阻挡编码了一个保守的水平禁布距离，该距离从单元边界测量到该层最近的内部特征，这样当两个单元被一个宽度为 $w$ 的间隔物隔开时，它们在该层上最近的相对特征之间的有效间距将增加 $w$。相关的层及其最小间距规则是：有源扩散区（OD）、多晶硅栅（PO）和第一层金属（M1）。晶圆厂规定的跨越单元边界的三个层的最小间距为：\n- $s_{\\mathrm{OD}} = 20$ nm，\n- $s_{\\mathrm{PO}} = 50$ nm，\n- $s_{\\mathrm{M1}} = 36$ nm。\n\n单元 $\\mathcal{C}_1$ 的右边缘边界阻挡范围为：\n- $o_{1,\\mathrm{OD}} = 12$ nm，\n- $o_{1,\\mathrm{PO}} = 23$ nm，\n- $o_{1,\\mathrm{M1}} = 22$ nm。\n\n单元 $\\mathcal{C}_2$ 的左边缘边界阻挡范围为：\n- $o_{2,\\mathrm{OD}} = 5$ nm，\n- $o_{2,\\mathrm{PO}} = 18$ nm，\n- $o_{2,\\mathrm{M1}} = 10$ nm。\n\n从特定层的最小间距和边界阻挡语义的核心定义出发，确定这两个单元是否可以合法地以零间隔（即 $w = 0$）邻接，并计算使邻接在所有三个层上同时满足DRC要求的最小间隔物宽度 $w^{\\star}$。用纳米（nm）表示你最终的间隔物宽度。将你的答案四舍五入到三位有效数字。",
            "solution": "该问题是有效的。其科学基础在于超大规模集成（VLSI）物理设计的原理，特别是关于标准单元布局和设计规则检查（DRC）。该问题提法恰当，提供了所有必要的定义、数据和约束，以得出一个唯一的、有意义的解。语言客观且正式。\n\n管辖两个相邻标准单元 $\\mathcal{C}_1$ 和 $\\mathcal{C}_2$（由宽度为 $w$ 的间隔物隔开）合法放置的基本原则是，对于任何给定的制造层 $\\ell$，单元内部特征之间的总间距必须满足或超过晶圆厂为该层规定的最小间距 $s_{\\ell}$。\n\n问题定义了边界阻挡，$o_{1,\\ell}$ 用于 $\\mathcal{C}_1$ 的右边缘，$o_{2,\\ell}$ 用于 $\\mathcal{C}_2$ 的左边缘，它们表示从单元边界到该层上最近的内部特征的距离。当这些单元以宽度为 $w$ 的间隔物相邻放置时，跨越边界的层 $\\ell$ 上的特征之间的总有效间距 $d_{\\ell}(w)$ 是两个阻挡和间隔物宽度的总和：\n$$d_{\\ell}(w) = o_{1,\\ell} + o_{2,\\ell} + w$$\n因此，层 $\\ell$ 的无DRC违例条件表示为：\n$$d_{\\ell}(w) \\ge s_{\\ell}$$\n代入 $d_{\\ell}(w)$ 的表达式，我们得到：\n$$o_{1,\\ell} + o_{2,\\ell} + w \\ge s_{\\ell}$$\n\n首先，我们确定这些单元是否可以合法地以零宽度间隔物邻接，这对应于 $w=0$ 的情况。要使此情况有效，每个层的边界阻挡之和必须大于或等于该层的最小间距：\n$$o_{1,\\ell} + o_{2,\\ell} \\ge s_{\\ell}$$\n我们必须为三个指定的层检查此条件：有源扩散区（$\\mathrm{OD}$）、多晶硅栅（$\\mathrm{PO}$）和第一层金属（$\\mathrm{M1}$）。\n\n对于有源扩散区（$\\mathrm{OD}$）：\n给定值为 $o_{1,\\mathrm{OD}} = 12$ nm, $o_{2,\\mathrm{OD}} = 5$ nm, and $s_{\\mathrm{OD}} = 20$ nm。\n由阻挡提供的总内建间距为 $o_{1,\\mathrm{OD}} + o_{2,\\mathrm{OD}} = 12 + 5 = 17$ nm。\n与最小间距规则相比：$17 \\text{ nm}  20\\text{ nm}$。不满足条件。\n\n对于多晶硅栅层（$\\mathrm{PO}$）：\n给定值为 $o_{1,\\mathrm{PO}} = 23$ nm, $o_{2,\\mathrm{PO}} = 18$ nm, and $s_{\\mathrm{PO}} = 50$ nm。\n由阻挡提供的总内建间距为 $o_{1,\\mathrm{PO}} + o_{2,\\mathrm{PO}} = 23 + 18 = 41$ nm。\n与最小间距规则相比：$41\\text{ nm}  50\\text{ nm}$。不满足条件。\n\n对于第一层金属层（$\\mathrm{M1}$）：\n给定值为 $o_{1,\\mathrm{M1}} = 22$ nm, $o_{2,\\mathrm{M1}} = 10$ nm, and $s_{\\mathrm{M1}} = 36$ nm。\n由阻挡提供的总内建间距为 $o_{1,\\mathrm{M1}} + o_{2,\\mathrm{M1}} = 22 + 10 = 32$ nm。\n与最小间距规则相比：$32\\text{ nm}  36\\text{ nm}$。不满足条件。\n\n由于该条件对一个或多个层（在这种情况下，是所有三个层）不成立，结论是这两个单元不能合法地以零间隔（$w=0$）邻接。\n\n接下来，我们计算使邻接满足DRC要求的最小间隔物宽度 $w^{\\star}$。对于任何单个层 $\\ell$，间隔物宽度 $w$ 必须满足：\n$$w \\ge s_{\\ell} - (o_{1,\\ell} + o_{2,\\ell})$$\n表达式 $s_{\\ell} - (o_{1,\\ell} + o_{2,\\ell})$ 表示必须由间隔物提供的间距不足量。由于间隔物不能有负宽度，层 $\\ell$ 所需的最小间隔物宽度（表示为 $w_{\\ell}$）是零和间距不足量中的较大者：\n$$w_{\\ell} = \\max\\left(0, s_{\\ell} - (o_{1,\\ell} + o_{2,\\ell})\\right)$$\n\n我们现在为每个层计算这个最小宽度：\n\n对于 $\\mathrm{OD}$：\n$$w_{\\mathrm{OD}} = \\max\\left(0, 20 - (12 + 5)\\right) = \\max(0, 20 - 17) = \\max(0, 3) = 3\\text{ nm}$$\n\n对于 $\\mathrm{PO}$：\n$$w_{\\mathrm{PO}} = \\max\\left(0, 50 - (23 + 18)\\right) = \\max(0, 50 - 41) = \\max(0, 9) = 9\\text{ nm}$$\n\n对于 $\\mathrm{M1}$：\n$$w_{\\mathrm{M1}} = \\max\\left(0, 36 - (22 + 10)\\right) = \\max(0, 36 - 32) = \\max(0, 4) = 4\\text{ nm}$$\n\n为确保放置在所有层上同时满足DRC要求，所选的间隔物宽度必须至少等于每个单独层所需的最小宽度中的最大值。因此，总体最小间隔物宽度 $w^{\\star}$ 是：\n$$w^{\\star} = \\max(w_{\\mathrm{OD}}, w_{\\mathrm{PO}}, w_{\\mathrm{M1}})$$\n$$w^{\\star} = \\max(3, 9, 4) = 9\\text{ nm}$$\n所需的最小间隔物宽度恰好是 $9$ nm。问题要求答案以三位有效数字表示。将整数 $9$ 表示为三位有效数字是 $9.00$。",
            "answer": "$$\\boxed{9.00}$$"
        },
        {
            "introduction": "随着工艺节点进入纳米尺度，传统的单次曝光光刻技术已无法满足制造精度要求，多重曝光技术应运而生。这个高级练习  将你带入先进工艺制造的核心挑战之一：双重曝光着色问题。你将学习如何将版图的几何约束转化为一个图论问题，通过构建“颜色冲突图”并结合特定的工艺规则（如锚定和修剪约束），来为一个复杂的金属层图形找到可行的双掩模版分配方案。这个过程完美地展示了抽象数学工具在解决前沿工程难题中的强大威力。",
            "id": "4300656",
            "problem": "考虑一排三个邻接的互补金属氧化物半导体（CMOS）标准单元，它们在金属1层（Metal-1）上采用双掩模光刻-蚀刻-光刻-蚀刻（LELE）双重曝光流程进行布局。在此流程中，任何两个间距小于同掩模最小间距的图形都必须分配到不同的掩模上，而任何两个间距小于不同掩模最小间距的图形，无论其颜色如何，都构成硬性设计规则违规。电子设计自动化（EDA）的目标是从给定的几何形状推导出颜色冲突图，并确定一个与间距规则和修剪约束一致的可行双掩模着色方案。\n\n假设所考虑的技术节点具有以下经过充分测试的金属1层规则和事实：\n\n- 金属1层的最小宽度为 $w_{\\min} = 40\\mathrm{~nm}$，且本问题中每个引脚的宽度均为 $w = 40\\mathrm{~nm}$，并跨越整个单元高度 $H = 270\\mathrm{~nm}$。\n- 同掩模最小间距为 $s_{\\mathrm{SM}} = 80\\mathrm{~nm}$。\n- 不同掩模最小间距为 $s_{\\mathrm{DM}} = 40\\mathrm{~nm}$。\n- 对于两个宽度相等（为 $w$）的垂直平行金属1层矩形，若它们在垂直轴上的投影在整个高度上重叠，则它们最近边缘之间沿水平轴的边到边间距为 $s_{ij} = |x_i - x_j| - w$。\n- 如果 $s_{ij}  s_{\\mathrm{DM}}$，则一对图形构成无条件违规。如果 $s_{\\mathrm{DM}} \\leq s_{ij}  s_{\\mathrm{SM}}$，则一对图形必须分配到不同的掩模。如果 $s_{ij} \\geq s_{\\mathrm{SM}}$，则一对图形没有着色约束。\n\n现有五个垂直的金属1层引脚矩形，索引为 $R_1, R_2, R_3, R_4, R_5$，每个都从 $y=0\\mathrm{~nm}$ 延伸到 $y=270\\mathrm{~nm}$，并以以下水平坐标为中心：\n- $R_1$: $x_1 = 0\\mathrm{~nm}$,\n- $R_2$: $x_2 = 90\\mathrm{~nm}$,\n- $R_3$: $x_3 = 170\\mathrm{~nm}$,\n- $R_4$: $x_4 = 250\\mathrm{~nm}$,\n- $R_5$: $x_5 = 330\\mathrm{~nm}$.\n\n除了间距规则外，该库使用的自对准双重曝光（SADP）修剪策略施加了以下掩模分配约束：\n\n- 一个预着色的芯轴锚点将 $R_1$ 固定到掩模 $\\mathcal{A}$。\n- 一个端盖连续性修剪约束要求 $R_5$ 与 $R_1$ 在同一个掩模上。\n\n从上述定义和规则出发，完成以下任务：\n\n1. 计算所有成对间距 $s_{ij}$，并通过在 $R_i$ 和 $R_j$ 之间放置一条边（当且仅当 $s_{\\mathrm{DM}} \\leq s_{ij}  s_{\\mathrm{SM}}$）来推导出顶点集为 $\\{R_1,R_2,R_3,R_4,R_5\\}$ 的颜色冲突图。\n2. 使用关于图二着色性的第一性原理以及所提供的锚点和修剪约束，判断是否存在一个可行的双掩模着色方案。如果存在，论证其结构和自由度。\n3. 确定满足所有间距和修剪规则的、不同的合法双掩模着色分配方案的总数，其对象为 $\\{R_1,R_2,R_3,R_4,R_5\\}$。\n\n将最终答案表示为一个纯整数。无需四舍五入。最终答案中不应出现单位。",
            "solution": "该问题经评估为有效。其科学基础是双重曝光光刻原理，问题陈述清晰，目标明确，数据充分，并且使用了客观、正式的语言。不存在会妨碍严谨求解的矛盾或模糊之处。我们按要求分三部分进行解答。\n\n给出的基本参数是引脚宽度 $w = 40\\mathrm{~nm}$，同掩模最小间距 $s_{\\mathrm{SM}} = 80\\mathrm{~nm}$，以及不同掩模最小间距 $s_{\\mathrm{DM}} = 40\\mathrm{~nm}$。五个矩形引脚 $R_1, R_2, R_3, R_4, R_5$ 的水平中心坐标分别为 $x_1 = 0\\mathrm{~nm}$，$x_2 = 90\\mathrm{~nm}$，$x_3 = 170\\mathrm{~nm}$，$x_4 = 250\\mathrm{~nm}$ 和 $x_5 = 330\\mathrm{~nm}$。\n\n两个引脚 $R_i$ 和 $R_j$ 之间的边到边间距使用公式 $s_{ij} = |x_i - x_j| - w$ 计算。当且仅当 $s_{\\mathrm{DM}} \\leq s_{ij}  s_{\\mathrm{SM}}$ 时，$R_i$ 和 $R_j$ 之间存在着色冲突，该冲突在冲突图中表示为一条边。如果 $s_{ij}  s_{\\mathrm{DM}}$，则会发生硬性违规，使得任何着色都变得不可能。\n\n首先，我们计算当 $i  j$ 时所有唯一的成对间距 $s_{ij}$：\n- $s_{12} = |x_1 - x_2| - w = |0 - 90| - 40 = 90 - 40 = 50\\mathrm{~nm}$。\n- $s_{13} = |x_1 - x_3| - w = |0 - 170| - 40 = 170 - 40 = 130\\mathrm{~nm}$。\n- $s_{14} = |x_1 - x_4| - w = |0 - 250| - 40 = 250 - 40 = 210\\mathrm{~nm}$。\n- $s_{15} = |x_1 - x_5| - w = |0 - 330| - 40 = 330 - 40 = 290\\mathrm{~nm}$。\n- $s_{23} = |x_2 - x_3| - w = |90 - 170| - 40 = 80 - 40 = 40\\mathrm{~nm}$。\n- $s_{24} = |x_2 - x_4| - w = |90 - 250| - 40 = 160 - 40 = 120\\mathrm{~nm}$。\n- $s_{25} = |x_2 - x_5| - w = |90 - 330| - 40 = 240 - 40 = 200\\mathrm{~nm}$。\n- $s_{34} = |x_3 - x_4| - w = |170 - 250| - 40 = 80 - 40 = 40\\mathrm{~nm}$。\n- $s_{35} = |x_3 - x_5| - w = |170 - 330| - 40 = 160 - 40 = 120\\mathrm{~nm}$。\n- $s_{45} = |x_4 - x_5| - w = |250 - 330| - 40 = 80 - 40 = 40\\mathrm{~nm}$。\n\n现在，我们将这些间距与着色规则阈值 $s_{\\mathrm{DM}} = 40\\mathrm{~nm}$ 和 $s_{\\mathrm{SM}} = 80\\mathrm{~nm}$ 进行比较。\n- 没有间距小于 $s_{\\mathrm{DM}} = 40\\mathrm{~nm}$，因此没有硬性违规。\n- 我们找出满足 $40\\mathrm{~nm} \\leq s_{ij}  80\\mathrm{~nm}$ 的冲突：\n  - $s_{12} = 50\\mathrm{~nm}$: $40 \\leq 50  80 \\implies$ $R_1$ 和 $R_2$ 之间存在冲突。\n  - $s_{23} = 40\\mathrm{~nm}$: $40 \\leq 40  80 \\implies$ $R_2$ 和 $R_3$ 之间存在冲突。\n  - $s_{34} = 40\\mathrm{~nm}$: $40 \\leq 40  80 \\implies$ $R_3$ 和 $R_4$ 之间存在冲突。\n  - $s_{45} = 40\\mathrm{~nm}$: $40 \\leq 40  80 \\implies$ $R_4$ 和 $R_5$ 之间存在冲突。\n- 所有其他间距都大于或等于 $s_{\\mathrm{SM}}=80\\mathrm{~nm}$，因此它们不施加着色约束。\n\n颜色冲突图的顶点为 $\\{R_1, R_2, R_3, R_4, R_5\\}$，边对应于已识别的冲突。边集为 $E = \\{(R_1, R_2), (R_2, R_3), (R_3, R_4), (R_4, R_5)\\}$。这个结构形成一个长度为4的路径图，可以写为 $R_1 - R_2 - R_3 - R_4 - R_5$。\n\n第二，我们判断是否存在一个可行的双掩模着色方案。一个图是二可着色的当且仅当它是二分图，这等价于它不包含奇数长度的环。我们推导出的冲突图是一个路径图，它是一种树。所有的树都是二分图，因此是二可着色的。因此，仅根据间距规则，使用两种掩模（我们称之为 $\\mathcal{A}$ 和 $\\mathcal{B}$）进行有效着色是可能的。\n\n我们现在必须结合额外的修剪约束：\n1.  颜色($R_1$) = $\\mathcal{A}$。\n2.  颜色($R_5$) = 颜色($R_1$)。\n\n我们分析这些约束对路径图着色的影响。图中相邻顶点必须具有不同颜色的要求，使得着色从 $R_1$ 开始传播：\n- 颜色($R_1$) = $\\mathcal{A}$（锚点约束）。\n- 由于 $(R_1, R_2)$ 是一条边，颜色($R_2$) 必须是 $\\mathcal{B}$。\n- 由于 $(R_2, R_3)$ 是一条边，颜色($R_3$) 必须是 $\\mathcal{A}$。\n- 由于 $(R_3, R_4)$ 是一条边，颜色($R_4$) 必须是 $\\mathcal{B}$。\n- 由于 $(R_4, R_5)$ 是一条边，颜色($R_5$) 必须是 $\\mathcal{A}$。\n\n这个着色方案由 $R_1$ 上的锚点和图的连通性唯一确定。现在我们必须检查其与第二个修剪约束的一致性，该约束要求颜色($R_5$) = 颜色($R_1$)。我们推导出的着色方案得出颜色($R_5$) = $\\mathcal{A}$ 且颜色($R_1$) = $\\mathcal{A}$。该约束得到满足。\n另外一种方法是，在二分图的任何二着色中，两个顶点具有相同颜色的充要条件是它们之间的距离（最短路径的长度）为偶数。在冲突图中，从 $R_1$ 到 $R_5$ 的路径包含4条边。由于距离是偶数，$R_1$ 和 $R_5$ 必须具有相同的颜色。因此，修剪约束与基于间距推导出的图结构是一致的。存在一个可行的着色方案，并且由于锚点固定了连通图中一个顶点的颜色，所以该着色方案是唯一的。不存在自由度。\n\n第三，我们确定不同的合法双掩模着色分配方案的总数。正如上一步所确定的，冲突图的结构和锚点约束“颜色($R_1$) = $\\mathcal{A}$”的组合唯一地确定了每个引脚的颜色。最终的着色分配如下：\n- $R_1 \\to \\mathcal{A}$\n- $R_2 \\to \\mathcal{B}$\n- $R_3 \\to \\mathcal{A}$\n- $R_4 \\to \\mathcal{B}$\n- $R_5 \\to \\mathcal{A}$\n\n这个唯一的分配方案已被证明与所有间距规则和两个修剪约束都一致。由于在任何步骤中都没有选择的余地，因此只存在一个有效的着色方案。\n\n因此，不同的合法双掩模着色分配方案的总数为1。",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}
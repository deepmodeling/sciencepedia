{
    "hands_on_practices": [
        {
            "introduction": "在我们深入分析CMOS反相器具体特性之前，首先必须理解它能够作为逻辑元件工作的最基本条件。本练习将从第一性原理出发，探讨确保反相器具有明确的高、低逻辑电平并能抵御噪声所需的最低电源电压。通过这个推导，您可以将器件级的物理参数（如晶体管的阈值电压 $V_{Tn}$ 和 $|V_{Tp}|$）与系统级的性能指标（噪声容限）直接联系起来。",
            "id": "4261106",
            "problem": "考虑一个互补金属氧化物半导体（CMOS）反相器，该反相器在一个标准体工艺中实现，其n沟道金属氧化物半导体场效应晶体管（nMOSFET）的源极接地，p沟道金属氧化物半导体场效应晶体管（pMOSFET）的源极接电源电压。假设器件为长沟道行为，具有平方律电流-电压关系，沟道长度调制效应可忽略不计，体效应为零（即两个器件的源极-衬底电压均为零），且阈值电压是恒定的。设n沟道阈值电压表示为 $V_{Tn} > 0$，p沟道阈值电压表示为 $V_{Tp}  0$，其中 $|V_{Tp}| > 0$ 表示其绝对值。该反相器由直流（DC）输入电压 $V_{in}$ 驱动，并产生直流输出电压 $V_{out}$，从而形成直流电压传输特性。\n\n根据标准静态定义，将高电平噪声容限 $NM_{H}$ 和低电平噪声容限 $NM_{L}$ 定义为 $NM_{H} = V_{OH} - V_{IH}$ 和 $NM_{L} = V_{IL} - V_{OL}$，其中 $V_{OH}$ 和 $V_{OL}$ 分别是反相器的直流输出高电平和低电平，而 $V_{IH}$ 和 $V_{IL}$ 是由以下条件在输出高电平侧 $\\left.\\frac{dV_{out}}{dV_{in}}\\right|_{V_{in}=V_{IH}} = -1$ 和在输出低电平侧 $\\left.\\frac{dV_{out}}{dV_{in}}\\right|_{V_{in}=V_{IL}} = -1$ 隐式定义的输入电压电平。\n\n从决定每个晶体管是否导通的长沟道金属氧化物半导体（MOS）导通条件（即每个器件超过阈值所需的关于 $V_{in}$ 的不等式）以及存在一个非空输入区间（在该区间内两个晶体管可以同时导通，形成电压传输特性的过渡区）出发，推导电源电压 $V_{DD}$ 满足 $NM_{H}  0$ 和 $NM_{L}  0$ 的充要条件。将满足此条件的最小 $V_{DD}$ 表示为包含 $V_{Tn}$ 和 $|V_{Tp}|$ 的封闭形式符号表达式。无需进行数值计算或四舍五入。以解析表达式的形式提供最终结果。",
            "solution": "该问题要求推导CMOS反相器要展现出正的高电平和低电平噪声容限（$NM_{H}  0$ 和 $NM_{L}  0$）时，对电源电压 $V_{DD}$ 的充要条件。满足此条件的最小 $V_{DD}$ 需要用n沟道阈值电压 $V_{Tn}$ 和p沟道阈值电压的绝对值 $|V_{Tp}|$ 来表示。\n\n静态噪声容限的标准定义如下：\n$NM_{H} = V_{OH} - V_{IH}$\n$NM_{L} = V_{IL} - V_{OL}$\n\n对于一个标准的CMOS反相器，当其输出驱动一个高阻抗负载（如另一个CMOS门）时，其输出电压电平可以实现轨到轨摆动。当输入 $V_{in}$ 处于逻辑低电平（例如 $V_{in}=0$）时，nMOS晶体管截止，pMOS晶体管导通，将输出电压 $V_{out}$ 拉至电源轨。因此，输出高电压为 $V_{OH} = V_{DD}$。相反，当 $V_{in}$ 处于逻辑高电平（例如 $V_{in}=V_{DD}$）时，pMOS截止，nMOS导通，将 $V_{out}$ 拉至地。因此，输出低电压为 $V_{OL} = 0$。\n\n将这些值代入噪声容限的定义，得到正噪声容限的条件为：\n$NM_{H}  0 \\implies V_{DD} - V_{IH}  0 \\implies V_{IH}  V_{DD}$\n$NM_{L}  0 \\implies V_{IL} - 0  0 \\implies V_{IL}  0$\n\n输入电压电平 $V_{IL}$ 和 $V_{IH}$ 定义为直流电压传输特性（VTC）曲线上增益大小为1的点，即 $\\frac{dV_{out}}{dV_{in}} = -1$。这些点界定了反相器的过渡区，在该区域内增益的绝对值大于1。为了使这样的点存在，反相器必须有一个明确的过渡区，在该区域内，随着输入电压从低到高扫描，输出电压从高电平变为低电平。这个过渡区从根本上由nMOS和pMOS晶体管同时导通（即“ON”）的输入电压范围来定义。\n\n我们来确定每个晶体管导通的条件。\n当nMOS晶体管的栅源电压 $V_{GS,n}$ 超过其阈值电压 $V_{Tn}$ 时，它处于导通状态。对于给定的反相器配置，nMOS源极接地（$V_{S,n}=0$），所以 $V_{GS,n} = V_{in} - 0 = V_{in}$。nMOS导通的条件是：\n$V_{in}  V_{Tn}$\n\n当pMOS晶体管的栅源电压 $V_{GS,p}$ 小于其阈值电压 $V_{Tp}$ 时，它处于导通状态。pMOS源极接电源电压（$V_{S,p}=V_{DD}$），所以 $V_{GS,p} = V_{in} - V_{DD}$。pMOS导通的条件是：\n$V_{in} - V_{DD}  V_{Tp}$\n整理这个关于 $V_{in}$ 的不等式可得：\n$V_{in}  V_{DD} + V_{Tp}$\n\n为了使过渡区存在，必须有一个非空的输入电压 $V_{in}$ 区间，在此区间内两个晶体管同时导通。这要求区间的下界（$V_{Tn}$）小于上界（$V_{DD} + V_{Tp}$）：\n$V_{Tn}  V_{DD} + V_{Tp}$\n\n这个不等式可以重新整理，以找到对电源电压 $V_{DD}$ 的要求条件：\n$V_{DD}  V_{Tn} - V_{Tp}$\n\n题目指出p沟道阈值电压 $V_{Tp}$ 是负数。其绝对值由 $|V_{Tp}| = -V_{Tp}$ 给出。将此代入不等式可得：\n$V_{DD}  V_{Tn} + |V_{Tp}|$\n\n这个不等式代表了功能性过渡区存在的充要条件。我们现在证明这也是拥有正噪声容限的充要条件。\n\n1.  **必要性**：如果 $V_{DD} \\le V_{Tn} + |V_{Tp}|$，则不存在一个 $V_{in}$ 区间使得两个晶体管同时导通。在这种情况下，VTC将近似为一个理想的阶跃函数（如果 $V_{DD} = V_{Tn} + |V_{Tp}|$），或者不会表现出完整的过渡，这意味着增益要么在单一点上为无穷大，要么其绝对值永远达不到1。因此，$V_{IL}$ 和 $V_{IH}$ 这两个点将是未定义的或重合的，导致噪声容限为零（$NM_L = NM_H = 0$）。因此，条件 $V_{DD}  V_{Tn} + |V_{Tp}|$ 是获得正噪声容限的必要条件。\n\n2.  **充分性**：如果 $V_{DD}  V_{Tn} + |V_{Tp}|$，则在区间 $(V_{Tn}, V_{DD} + V_{Tp})$ 内存在一个连续的 $V_{in}$ 过渡区。在该区域内，VTC是连续的，且增益 $\\frac{dV_{out}}{dV_{in}}$ 是一个从0开始，变为负值，然后又回到0的连续函数。对于任何实际的反相器，增益的绝对值将在此区域内超过1。根据介值定理，必定存在至少两个不同的点 $V_{IL}$ 和 $V_{IH}$，在这些点上增益恰好为-1。这些点必须位于过渡区内，因此它们必须满足：\n    $V_{Tn}  V_{IL}  V_{IH}  V_{DD} + V_{Tp}$\n\n    现在我们检查这是否能保证正的噪声容限：\n    *   对于 $NM_L  0$，我们需要 $V_{IL}  0$。由上述不等式可知 $V_{IL}  V_{Tn}$。由于题目规定 $V_{Tn}  0$，因此直接得出 $V_{IL}  0$。故 $NM_L  0$ 得到保证。\n    *   对于 $NM_H  0$，我们需要 $V_{IH}  V_{DD}$。由上述不等式可知 $V_{IH}  V_{DD} + V_{Tp}$。代入 $V_{Tp} = -|V_{Tp}|$，这变为 $V_{IH}  V_{DD} - |V_{Tp}|$。由于题目规定 $|V_{Tp}|  0$，因此 $V_{DD} - |V_{Tp}|  V_{DD}$。所以 $V_{IH}  V_{DD}$ 得到保证。故 $NM_H  0$ 也得到保证。\n\n由于条件 $V_{DD}  V_{Tn} + |V_{Tp}|$ 是 $NM_H  0$ 和 $NM_L  0$ 的充要条件，因此它就是所求的条件。问题要求满足此条件的最小 $V_{DD}$。这对应于所有有效 $V_{DD}$ 值集合的下确界，或称下界。这个最小阈值是使不等式变为等式时的值。\n\n使反相器具有功能性过渡区并因此可能具有正噪声容限的最小电源电压为：\n$V_{DD, min} = V_{Tn} + |V_{Tp}|$\n\n任何严格大于此值的电源电压 $V_{DD}$ 都将产生正的噪声容限。此最小值的表达式即为最终答案。",
            "answer": "$$\\boxed{V_{Tn} + |V_{Tp}|}$$"
        },
        {
            "introduction": "开关阈值电压 $V_M$ 是反相器电压传输特性曲线上一个至关重要的点，它决定了反相器的对称性与噪声容限的平衡。本练习提供了一个基于晶体管基本模型计算 $V_M$ 的实践机会。通过求解，您将亲身体验如何通过调整NMOS和PMOS晶体管的相对驱动强度（即 $k_n/k_p$ 之比）来精确地设定这一阈值，以实现电路性能的优化。",
            "id": "4261104",
            "problem": "一个互补金属氧化物半导体（CMOS）反相器在长沟道机制下设计，并在电子设计自动化（EDA）的背景下进行分析。该反相器使用一个$n$沟道金属氧化物半导体场效应晶体管（$n$-MOSFET）和一个$p$沟道金属氧化物半导体场效应晶体管（$p$-MOSFET），其参数如下：电源电压 $V_{DD}=0.8\\,\\text{V}$，阈值电压 $V_{TN}=0.2\\,\\text{V}$ 和 $|V_{TP}|=0.2\\,\\text{V}$，以及跨导参数比 $k_n/k_p=2.5$，其中 $k_n=\\mu_n C_{\\mathrm{ox}} (W/L)_n$ 和 $k_p=\\mu_p C_{\\mathrm{ox}} (W/L)_p$。假设平方律行为、可忽略的体效应和可忽略的沟道长度调制效应。将开关阈值 $V_M$ 定义为反相器输入等于其输出时的输入电压，即 $V_{\\mathrm{in}}=V_{\\mathrm{out}}=V_M$。从第一性原理和经过充分验证的器件方程出发，通过在输出节点施加电流连续性条件，并正确识别两个晶体管在 $V_M$ 时的工作区域，来确定 $V_M$。将 $V_M$ 的最终数值结果以伏特为单位表示，并四舍五入到 $4$ 位有效数字。然后，根据您计算出的 $V_M$ 值，说明 $V_M$ 是高于还是低于 $0.4\\,\\text{V}$，并根据反相器的传输特性以及 $n$-MOSFET 和 $p$-MOSFET 的相对强度来论证您的结论。定性评论无需包含在最终数值答案中。",
            "solution": "互补金属氧化物半导体（CMOS）反相器的开关阈值 $V_M$ 由 $V_{\\mathrm{in}}=V_{\\mathrm{out}}=V_M$ 定义。在此工作点，输出节点电压为 $V_M$，输入将两个晶体管的栅极驱动至 $V_M$，两个晶体管均导通，使得由$n$沟道金属氧化物半导体场效应晶体管（$n$-MOSFET）下拉的电流等于由$p$沟道金属氧化物半导体场效应晶体管（$p$-MOSFET）上拉的电流。我们假设器件为长沟道器件，遵循平方律电流-电压关系，且体效应和沟道长度调制效应可忽略不计。\n\n基本依据是经过充分验证的金属氧化物半导体场效应晶体管（MOSFET）的平方律饱和区表达式。对于饱和区的 $n$-MOSFET，其漏极电流为\n$$\nI_{D,n}=\\frac{1}{2}k_n\\left(V_{GS,n}-V_{TN}\\right)^{2},\n$$\n当 $V_{DS,n}\\geq V_{GS,n}-V_{TN}$ 时。对于饱和区的 $p$-MOSFET（按照电流为正值，电压用源-栅和源-漏电压表示的约定），其漏极电流大小为\n$$\nI_{D,p}=\\frac{1}{2}k_p\\left(V_{SG,p}-|V_{TP}|\\right)^{2},\n$$\n当 $V_{SD,p}\\geq V_{SG,p}-|V_{TP}|$ 时。\n\n在开关阈值 $V_M$ 处，对于 $n$-MOSFET 有：$V_{G,n}=V_M$，$V_{D,n}=V_M$，$V_{S,n}=0$，因此 $V_{GS,n}=V_M$ 且 $V_{DS,n}=V_M$。饱和条件 $V_{DS,n}\\geq V_{GS,n}-V_{TN}$ 变为 $V_M\\geq V_M-V_{TN}$，简化后得到 $V_{TN}\\geq 0$。给定 $V_{TN}=0.2\\,\\text{V}$，因此 $n$-MOSFET 在 $V_M$ 处处于饱和区。\n\n对于 $p$-MOSFET 有：$V_{S,p}=V_{DD}$，$V_{G,p}=V_M$，$V_{D,p}=V_M$，因此 $V_{SG,p}=V_{DD}-V_M$ 且 $V_{SD,p}=V_{DD}-V_M$。饱和条件 $V_{SD,p}\\geq V_{SG,p}-|V_{TP}|$ 变为 $V_{DD}-V_M\\geq V_{DD}-V_M-|V_{TP}|$，简化后得到 $|V_{TP}|\\geq 0$。给定 $|V_{TP}|=0.2\\,\\text{V}$，因此 $p$-MOSFET 在 $V_M$ 处也处于饱和区。\n\n根据输出节点的 Kirchhoff 电流定律（KCL），电流大小必须相等：\n$$\nI_{D,n}=I_{D,p}.\n$$\n代入饱和电流表达式，\n$$\n\\frac{1}{2}k_n\\left(V_M-V_{TN}\\right)^{2}=\\frac{1}{2}k_p\\left(V_{DD}-V_M-|V_{TP}|\\right)^{2}.\n$$\n消去因子 $\\frac{1}{2}$ 并取正平方根（如果两个晶体管都导通，则括号内的项为正，这将在解题后验证），\n$$\n\\sqrt{k_n}\\left(V_M-V_{TN}\\right)=\\sqrt{k_p}\\left(V_{DD}-V_M-|V_{TP}|\\right).\n$$\n求解 $V_M$，\n$$\n\\sqrt{k_n}\\,V_M-\\sqrt{k_n}\\,V_{TN}=\\sqrt{k_p}\\,V_{DD}-\\sqrt{k_p}\\,V_M-\\sqrt{k_p}\\,|V_{TP}|,\n$$\n$$\nV_M\\left(\\sqrt{k_n}+\\sqrt{k_p}\\right)=\\sqrt{k_p}\\left(V_{DD}-|V_{TP}|\\right)+\\sqrt{k_n}\\,V_{TN},\n$$\n$$\nV_M=\\frac{\\sqrt{k_p}\\left(V_{DD}-|V_{TP}|\\right)+\\sqrt{k_n}\\,V_{TN}}{\\sqrt{k_n}+\\sqrt{k_p}}.\n$$\n引入比率 $r=\\frac{k_n}{k_p}$。那么 $\\sqrt{k_n}=\\sqrt{r}\\,\\sqrt{k_p}$，表达式简化为\n$$\nV_M=\\frac{\\sqrt{r}\\,V_{TN}+V_{DD}-|V_{TP}|}{\\sqrt{r}+1}.\n$$\n根据给定值 $V_{DD}=0.8\\,\\text{V}$、$V_{TN}=0.2\\,\\text{V}$、$|V_{TP}|=0.2\\,\\text{V}$ 和 $r=2.5$，我们有 $\\sqrt{r}=\\sqrt{2.5}$。数值上，\n$$\nV_M=\\frac{\\sqrt{2.5}\\cdot 0.2+0.8-0.2}{\\sqrt{2.5}+1}=\\frac{0.2\\sqrt{2.5}+0.6}{\\sqrt{2.5}+1}.\n$$\n符号计算 $\\sqrt{2.5}$ 然后求值：\n$$\nV_M=\\frac{0.2\\sqrt{2.5}+0.6}{\\sqrt{2.5}+1}.\n$$\n以伏特为单位，计算结果保留 $4$ 位有效数字，\n$$\n\\sqrt{2.5}\\approx 1.581,\\quad 0.2\\sqrt{2.5}\\approx 0.3162,\\quad \\text{numerator}\\approx 0.9162,\\quad \\text{denominator}\\approx 2.581,\n$$\n$$\nV_M\\approx \\frac{0.9162}{2.581}\\approx 0.3550\\,\\text{V}.\n$$\n验证括号内项的正性，确认了开平方根步骤的有效性：$V_M-V_{TN}\\approx 0.3550-0.2=0.15500$ 且 $V_{DD}-V_M-|V_{TP}|\\approx 0.8-0.3550-0.2=0.24500$。\n\n最后，关于 $V_M$ 是高于还是低于 $0.4\\,\\text{V}$ 的评论，我们注意到 $V_M\\approx 0.3550\\,\\text{V}$，低于 $0.4\\,\\text{V}$。这在物理上与 $k_n/k_p=2.51$ 一致，表明 $n$-MOSFET 相对于 $p$-MOSFET 更强，这使得开关阈值偏向接地端。在传输特性和噪声容限方面，与对称情况 $V_M=V_{DD}/2=0.4\\,\\text{V}$ 相比，较低的 $V_M$ 意味着较大的低电平噪声容限和较小的高电平噪声容限。",
            "answer": "$$\\boxed{0.3550}$$"
        },
        {
            "introduction": "虽然解析模型为我们提供了深刻的洞察力，但现代集成电路设计在很大程度上依赖于计算机仿真来精确捕捉复杂的电路行为。本练习模拟了工业标准工具（如SPICE）的工作流程，指导您构建一个数值求解器来生成完整的电压传输曲线。这不仅是一种验证理论知识的强大方法，也使您能够分析包含沟道长度调制等效应的、更接近真实的器件模型。",
            "id": "4261132",
            "problem": "您的任务是为互补金属氧化物半导体（CMOS）反相器构建一个准直流扫描的计算模拟，模拟一个鲁棒的集成电路仿真程序（SPICE）测试平台，以提取直流传输特性曲线 $V_{out}(V_{in})$ 和噪声容限，同时确保在陡峭过渡区的收敛性。您的程序必须使用基于物理原理的方程，为每个输入点求解反相器输出端的非线性节点方程，并模拟类似于SPICE控制中的收敛辅助选项。最终输出必须是本问题末尾指定的单行格式。\n\n该反相器由一个n沟道金属氧化物半导体（nMOS）晶体管和一个p沟道金属氧化物半导体（pMOS）晶体管组成。nMOS晶体管的栅极连接到 $V_{in}$，漏极连接到输出节点 $V_{out}$，源极接地（$0\\,\\text{V}$）。pMOS晶体管的栅极连接到 $V_{in}$，漏极连接到同一个输出节点 $V_{out}$，源极连接到电源 $V_{DD}$。您的程序必须通过将 $V_{in}$ 从 $0$ 扫描到 $V_{DD}$，并利用基尔霍夫电流定律（KCL）和每个晶体管的成熟漏极电流模型，在每个步骤中求解 $V_{out}$，来计算准直流传输曲线。为了确保在陡峭区域的收敛性，您必须在输出节点处为每个电源轨（rail）引入一个小的电导，记为 $g_{\\min}$，这类似于SPICE的 $g_{\\min}$ 步进法。您还必须实现一个区间求根解法器，通过检查 $V_{out}=0$ 和 $V_{out}=V_{DD}$ 处的电流平衡，然后使用带有电压绝对容差 $\\varepsilon_V$ 的二分法，来保证对每个 $V_{in}$ 都能收敛。\n\n您的推导和实现必须基于以下基本原理和定义：\n- 输出节点的基尔霍夫电流定律：稳态时，离开节点的电流代数和为零。\n- 用于金属氧化物半导体漏极电流的、带有沟道长度调制效应的长沟道Shichman-Hodges平方率模型，对三极管区和饱和区使用相应的表达式。对于nMOS器件，其栅源电压为 $V_{GS,n}$，漏源电压为 $V_{DS,n}$，阈值电压为 $V_{Tn}$，跨导参数为 $\\beta_n$（单位 $\\mathrm{A/V^2}$），沟道长度调制系数为 $\\lambda_n$（单位 $\\mathrm{V^{-1}}$），您必须使用：\n  - 截止区：若 $V_{GS,n} \\le V_{Tn}$，则 $I_{D,n} = 0$。\n  - 三极管区：若 $0 \\le V_{DS,n}  V_{GS,n} - V_{Tn}$，\n    $$ I_{D,n} = \\beta_n \\left((V_{GS,n} - V_{Tn})V_{DS,n} - \\frac{1}{2} V_{DS,n}^2 \\right)\\left(1+\\lambda_n V_{DS,n}\\right). $$\n  - 饱和区：若 $V_{DS,n} \\ge V_{GS,n} - V_{Tn}$，\n    $$ I_{D,n} = \\frac{1}{2}\\beta_n (V_{GS,n} - V_{Tn})^2 \\left(1+\\lambda_n V_{DS,n}\\right). $$\n- 对于pMOS器件，您必须使用以源极为参考的电压幅值来计算，即 $V_{SG,p} = V_{DD} - V_{in}$，$V_{SD,p} = V_{DD} - V_{out}$，阈值电压幅值为 $V_{Tp}  0$，跨导参数为 $\\beta_p$（单位 $\\mathrm{A/V^2}$），沟道长度调制系数为 $\\lambda_p$（单位 $\\mathrm{V^{-1}}$），并对这些幅值应用相同的区域表达式。在建立KCL方程时，通过pMOS晶体管的物理电流必须使用正确的符号进行处理。\n- 为了模拟SPICE风格的收敛辅助，在输出端为每个电源轨加入一个线性漏电路径，为KCL方程贡献一个电流 $I_{g\\min} = g_{\\min}(V_{out}-0) + g_{\\min}(V_{out}-V_{DD})$。\n\n所需计算量的定义：\n- 直流传输特性 $V_{out}(V_{in})$ 是通过对每个 $V_{in} \\in [0,V_{DD}]$ 求解输出节点的KCL方程得到的。\n- 直流噪声容限必须根据传输曲线及其斜率计算。设 $V_{OH} = V_{out}(0)$ 和 $V_{OL} = V_{out}(V_{DD})$。将 $V_{IL}$ 和 $V_{IH}$ 定义为在陡峭过渡区左右两侧，斜率满足 $\\frac{dV_{out}}{dV_{in}} = -1$ 时的输入电压。则低噪声容限和高噪声容限分别为 $NM_L = V_{IL} - V_{OL}$ 和 $NM_H = V_{OH} - V_{IH}$。\n- 反相器开关阈值 $V_M$ 定义为方程 $V_{out}(V_{in}) = V_{in}$ 的解。\n\n算法和数值要求：\n- 在 $0$ 和 $V_{DD}$ 之间（包括端点）使用一个包含 $N$ 个采样点的均匀网格来表示 $V_{in}$。对于每个 $V_{in}$，使用在 $[0,V_{DD}]$ 上的区间套法（二分法）求解标量KCL方程以得到 $V_{out}$，停止准则为 $|V_{out}^{(k+1)} - V_{out}^{(k)}| \\le \\varepsilon_V$ 或达到预设的最大迭代次数。您必须将 $f(V_{out}; V_{in})$ 定义为离开节点的净电流，并且必须确保由于 $g_{\\min}$ 的存在，对于所有 $V_{in}$，$f(0; V_{in})$ 和 $f(V_{DD}; V_{in})$ 符号相反。\n- 通过沿计算出的曲线使用有限差分法估计 $\\frac{dV_{out}}{dV_{in}}$，并通过在 $\\frac{dV_{out}}{dV_{in}} = -1$ 的交叉点附近进行线性插值来定位 $V_{IL}$ 和 $V_{IH}$。\n- 通过识别 $V_{out}(V_{in}) - V_{in} = 0$ 的交叉点，并在符号相反的相邻采样点之间进行线性插值来定位 $V_M$。如果由于离散化而没有发生符号变化，则使用绝对差最小的采样点作为备用方案。\n- 以 $\\mathrm{V}$ 为单位报告所有请求的量，并将每个报告值四舍五入到六位小数。\n\n测试套件：\n使用以下五个参数集，每个参数集为一个元组 $\\left(V_{DD}, V_{Tn}, V_{Tp}, \\beta_n, \\beta_p, \\lambda_n, \\lambda_p, g_{\\min}, N, \\varepsilon_V\\right)$，其中 $N$ 和 $\\varepsilon_V$ 在所有情况下通用，具体如下。\n- 情况A（平衡反相器，中等沟道长度调制）：$\\left(1.0, 0.4, 0.4, 2\\times 10^{-4}, 2\\times 10^{-4}, 0.02, 0.02, 10^{-12}, 2001, 10^{-9}\\right)$。\n- 情况B（pMOS强于nMOS）：$\\left(1.0, 0.4, 0.4, 2\\times 10^{-4}, 3\\times 10^{-4}, 0.02, 0.02, 10^{-12}, 2001, 10^{-9}\\right)$。\n- 情况C（近阈值电源）：$\\left(0.9, 0.45, 0.45, 2\\times 10^{-4}, 2\\times 10^{-4}, 0.01, 0.01, 10^{-12}, 2001, 10^{-9}\\right)$。\n- 情况D（强偏斜，零沟道长度调制）：$\\left(1.2, 0.35, 0.4, 1\\times 10^{-4}, 4\\times 10^{-4}, 0.0, 0.0, 10^{-12}, 2001, 10^{-9}\\right)$。\n- 情况E（阈值不匹配，有限沟道长度调制）：$\\left(1.2, 0.35, 0.5, 2.5\\times 10^{-4}, 1.5\\times 10^{-4}, 0.05, 0.05, 10^{-12}, 2001, 10^{-9}\\right)$。\n\n每种情况所需的输出：\n- 对于每个测试用例，计算并返回一个包含三个值的列表 $\\left[V_M, NM_L, NM_H\\right]$，每个值以 $\\mathrm{V}$ 为单位并四舍五入到六位小数。\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表形式的结果，每个元素是对应一种情况的方括号三元组，顺序为A、B、C、D、E。例如，一个语法上有效的输出形状是 $\\left[ [a_1,a_2,a_3], [b_1,b_2,b_3], \\dots \\right]$，其中插入了数字且无额外文本。\n\n必须遵守所有物理参数单位：$V_{DD}$、$V_{Tn}$、$V_{Tp}$、$V_{in}$、$V_{out}$、$V_M$、$NM_L$、$NM_H$、$V_{OH}$ 和 $V_{OL}$ 的单位为 $\\mathrm{V}$；$\\beta_n$ 和 $\\beta_p$ 的单位为 $\\mathrm{A/V^2}$；$\\lambda_n$ 和 $\\lambda_p$ 的单位为 $\\mathrm{V^{-1}}$；$g_{\\min}$ 的单位为 $\\mathrm{S}$。角度不适用。百分比（如有）必须表示为小数。",
            "solution": "目标是对互补金属氧化物半导体（CMOS）反相器执行准直流（DC）分析。这包括计算其电压传输特性（VTC），记为 $V_{out}(V_{in})$，并随后提取关键性能指标：开关阈值（$V_M$）、低噪声容限（$NM_L$）和高噪声容限（$NM_H$）。该分析基于Shichman-Hodges晶体管模型，并通过对输入电压进行扫描，求解反相器输出端的节点方程来数值化地执行。\n\n**1. 电路模型与控制方程**\n\nCMOS反相器由一个n沟道MOS（nMOS）晶体管和一个p沟道MOS（pMOS）晶体管组成。nMOS的源极连接到地（$0\\,\\mathrm{V}$），其漏极连接到输出节点 $V_{out}$。pMOS的源极连接到电源电压 $V_{DD}$，其漏极也连接到 $V_{out}$。两个晶体管的栅极都连接到输入 $V_{in}$。\n\n在任何稳态工作点，输出节点必须满足基尔霍夫电流定律（KCL）。离开节点的电流代数和必须为零。涉及的电流有：离开节点的nMOS漏极电流 $I_{D,n}$；进入节点的pMOS漏极电流 $I_{D,p}$（因此对流出电流的总和贡献为 $-I_{D,p}$）；以及为模拟非理想漏电路径并确保收敛而增加的数值稳定的漏电流 $I_{g\\min}$。\n\nKCL方程为：\n$$ I_{D,n}(V_{in}, V_{out}) - I_{D,p}(V_{in}, V_{out}) + I_{g\\min}(V_{out}) = 0 $$\n\n漏电流 $I_{g\\min}$ 通过两个线性电导 $g_{\\min}$ 建模，一个从输出节点到地，另一个到 $V_{DD}$：\n$$ I_{g\\min}(V_{out}) = g_{\\min}(V_{out} - 0) + g_{\\min}(V_{out} - V_{DD}) = g_{\\min}(2V_{out} - V_{DD}) $$\n因此，对于每个 $V_{in}$ 值，我们必须求解以下关于 $V_{out}$ 的非线性方程：\n$$ f(V_{out}; V_{in}) = I_{D,n}(V_{in}, V_{out}) - I_{D,p}(V_{in}, V_{out}) + g_{\\min}(2V_{out} - V_{DD}) = 0 $$\n\n**2. 晶体管电流模型**\n\n漏极电流 $I_{D,n}$ 和 $I_{D,p}$ 由包含沟道长度调制效应的长沟道Shichman-Hodges模型描述。\n\n对于nMOS晶体管：\n相关电压为栅源电压 $V_{GS,n} = V_{in}$ 和漏源电压 $V_{DS,n} = V_{out}$。给定nMOS阈值电压 $V_{Tn}$、跨导参数 $\\beta_n$ 和沟道长度调制参数 $\\lambda_n$，电流 $I_{D,n}$ 定义如下：\n- **截止区** ($V_{GS,n} \\le V_{Tn}$):\n  $$ I_{D,n} = 0 $$\n- **三极管（线性）区** ($0 \\le V_{DS,n}  V_{GS,n} - V_{Tn}$):\n  $$ I_{D,n} = \\beta_n \\left((V_{GS,n} - V_{Tn})V_{DS,n} - \\frac{1}{2} V_{DS,n}^2 \\right)\\left(1+\\lambda_n V_{DS,n}\\right) $$\n- **饱和区** ($V_{DS,n} \\ge V_{GS,n} - V_{Tn}  0$):\n  $$ I_{D,n} = \\frac{1}{2}\\beta_n (V_{GS,n} - V_{Tn})^2 \\left(1+\\lambda_n V_{DS,n}\\right) $$\n\n对于pMOS晶体管：\n模型是类似的，但使用以源极为参考的电压幅值。相关电压为源栅电压 $V_{SG,p} = V_{DD} - V_{in}$ 和源漏电压 $V_{SD,p} = V_{DD} - V_{out}$。给定pMOS阈值电压幅值 $V_{Tp}  0$、跨导参数 $\\beta_p$ 和沟道长度调制参数 $\\lambda_p$，电流幅值 $I_{D,p}$ 为：\n- **截止区** ($V_{SG,p} \\le V_{Tp}$):\n  $$ I_{D,p} = 0 $$\n- **三极管（线性）区** ($0 \\le V_{SD,p}  V_{SG,p} - V_{Tp}$):\n  $$ I_{D,p} = \\beta_p \\left((V_{SG,p} - V_{Tp})V_{SD,p} - \\frac{1}{2} V_{SD,p}^2 \\right)\\left(1+\\lambda_p V_{SD,p}\\right) $$\n- **饱和区** ($V_{SD,p} \\ge V_{SG,p} - V_{Tp}  0$):\n  $$ I_{D,p} = \\frac{1}{2}\\beta_p (V_{SG,p} - V_{Tp})^2 \\left(1+\\lambda_p V_{SD,p}\\right) $$\n\n**3. 数值解与参数提取**\n\n直流传输曲线 $V_{out}(V_{in})$ 是通过执行直流扫描生成的。输入电压 $V_{in}$ 在从 $0$ 到 $V_{DD}$ 的 $N$ 个点的均匀网格上扫描。在每个点 $V_{in_i}$，求解非线性KCL方程 $f(V_{out}; V_{in_i}) = 0$ 以得到 $V_{out_i}$。\n\n采用二分法在区间 $[0, V_{DD}]$ 中寻找根 $V_{out_i}$。该方法保证收敛，因为函数 $f(V_{out}; V_{in})$ 相对于 $V_{out}$ 是连续且单调的，并且 $g_{\\min}$ 项的引入确保了对于任何有效的 $V_{in} \\in [0, V_{DD}]$，都有 $f(0; V_{in})  0$ 和 $f(V_{DD}; V_{in}) > 0$，从而将唯一的根框定在区间内。当 $V_{out}$ 的连续近似值之间的绝对差小于指定的容差 $\\varepsilon_V$ 时，迭代停止。\n\n一旦计算出离散的VTC $\\{ (V_{in_i}, V_{out_i}) \\}$，就可以提取所需的指标：\n- **高/低输出电压**：$V_{OH} = V_{out}(0)$ 和 $V_{OL} = V_{out}(V_{DD})$，分别对应于计算出的VTC的第一个和最后一个点。\n- **单位增益点 ($V_{IL}, V_{IH}$)**：首先使用中心有限差分法估算VTC的导数 $\\frac{dV_{out}}{dV_{in}}$。输入电压 $V_{IL}$ 和 $V_{IH}$ 是该导数等于 $-1$ 的点。通过搜索导数穿过-1的线段 $[V_{in_i}, V_{in_{i+1}}]$，然后应用线性插值来找到它们。\n- **噪声容限**：噪声容限随后计算为 $NM_L = V_{IL} - V_{OL}$ 和 $NM_H = V_{OH} - V_{IH}$。\n- **开关阈值 ($V_M$)**：这是 $V_{out} = V_{in}$ 时的输入电压。通过定位函数 $g(V_{in}) = V_{out}(V_{in}) - V_{in}$ 改变符号的线段，然后使用线性插值找到根。\n\n根据要求，每个参数集的最终计算值 $[V_M, NM_L, NM_H]$ 都四舍五入到六位小数。",
            "answer": "[[0.500000, 0.285810, 0.285810],[0.551375, 0.323531, 0.235555],[0.450000, 0.177060, 0.177060],[0.771429, 0.560641, 0.231214],[0.451733, 0.217316, 0.380757]]"
        }
    ]
}
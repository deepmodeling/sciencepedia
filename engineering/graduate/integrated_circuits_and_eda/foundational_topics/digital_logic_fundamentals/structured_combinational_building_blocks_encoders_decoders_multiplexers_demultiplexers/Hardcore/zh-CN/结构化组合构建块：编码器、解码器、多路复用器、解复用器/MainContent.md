## 引言
在数字[集成电路](@entry_id:265543)的宏伟蓝图中，结构化的组合逻辑构建模块——如编码器、解码器、[多路复用器](@entry_id:172320)和[解复用器](@entry_id:174207)——扮演着如同标准砖块般的基石角色。它们是实现数据处理、选择和分配等基本操作的最小功能单元，构成了从简单的控制器到复杂微处理器在内的一切数字系统的骨架。然而，对这些模块的理解若仅仅停留在其教科书式的逻辑功能定义上，将远不足以应对现代高性能、[低功耗芯片设计](@entry_id:1127485)的挑战。真正的工程洞察力来源于深刻理解理论与实践之间的联系：这些抽象的逻辑功能如何在物理层面被高效实现，以及它们如何在复杂的系统应用中发挥关键作用。

本文旨在弥合这一知识鸿沟。我们将超越基础定义，深入探索这些核心构建模块背后的设计原理、[性能优化](@entry_id:753341)技术及其在尖端领域的广泛应用。本文将系统地引导读者穿越三个层次的知识体系：

在“原理与机制”一章中，我们将从第一性原理出发，运用香农展开定理等工具推导其布尔实现，并深入到晶体管级，剖析[传导晶体管逻辑](@entry_id:171813)的挑战与[传输门](@entry_id:1133367)解决方案。同时，我们还将探讨如何通过层次化设计、利用[无关项](@entry_id:165299)以及预解码等技术来优化电路的性能与面积。

接下来，在“应用与跨学科连接”一章中，我们将展示这些基础模块如何在实际工程问题中大放异彩。从优化计算机内存系统的地址解码与物理形态，到在[处理器数据通路](@entry_id:169674)中实现复杂指令，再到为电子设计自动化（EDA）流程中的[逻辑综合](@entry_id:274398)、[可测性](@entry_id:199191)设计和形式化验证提供基础，我们将揭示这些模块作为连接理论与实践的桥梁所具有的巨大价值。

最后，“动手实践”部分将提供一系列精心设计的工程问题，旨在将理论知识转化为解决实际设计挑战的能力。

通过本次学习，读者将不仅掌握这些构建模块是什么，更将深刻理解如何用好它们，从而为设计和分析复杂的数字[集成电路](@entry_id:265543)系统打下坚实的基础。

## 原理与机制

在[数字系统设计](@entry_id:168162)中，[标准化](@entry_id:637219)的[组合逻辑](@entry_id:265083)构建模块是实现复杂功能的基础。这些模块，如多路复用器、解码器、编码器和[解复用器](@entry_id:174207)，提供了结构化的方法来处理和路由数据与控制信号。本章将深入探讨这些核心构建模块的基本工作原理、布尔函数表示、实际电路实现以及相关的[性能优化](@entry_id:753341)技术。我们将从基本定义出发，逐步过渡到高级实现细节和设计挑战，为理解和设计复杂集成电路打下坚实的基础。

### 基[本构建模](@entry_id:183370)块：定义与布尔实现

#### 多路复用器：[数字开关](@entry_id:164729)

**[多路复用器](@entry_id:172320) (Multiplexer, MUX)** 是一种基础的[组合逻辑](@entry_id:265083)电路，其功能类似于一个[数字控制](@entry_id:275588)的开关。它从多个输入数据线中选择一个，并将其连接到单一的输出线上。选择哪条输入线由一组“选择”输入信号决定。

最基本的多路复用器是 $2{:}1$ [多路复用器](@entry_id:172320)。它有两个数据输入 $D_0$ 和 $D_1$，一个选择输入 $S$，以及一个输出 $Y$。其功能规范可以直观地描述为：
- 当 $S=0$ 时，输出 $Y$ 的值等于输入 $D_0$ 的值。
- 当 $S=1$ 时，输出 $Y$ 的值等于输入 $D_1$ 的值。

为了从第一性原理推导出该电路的[布尔表达式](@entry_id:262805)，我们可以将输出 $Y$ 建模为一个三变量[布尔函数](@entry_id:276668) $f(S, D_1, D_0)$。根据[布尔代数](@entry_id:168482)的基本定理，任何[布尔函数](@entry_id:276668)都可以根据其任意一个变量进行展开，这被称为**香农展开定理 (Shannon's Expansion Theorem)**。将函数 $f$ 对变量 $S$ 进行展开，我们得到：
$$Y = (\overline{S} \cdot f(0, D_1, D_0)) + (S \cdot f(1, D_1, D_0))$$
其中，$f(0, D_1, D_0)$ 和 $f(1, D_1, D_0)$ 分别是函数 $f$ 关于 $S=0$ 和 $S=1$ 的**[余子式](@entry_id:137503) (cofactor)**。

多路复用器的功能规范恰好直接定义了这两个[余子式](@entry_id:137503) ：
- “当 $S=0$ 时，$Y=D_0$”意味着[余子式](@entry_id:137503) $f(0, D_1, D_0) = D_0$。
- “当 $S=1$ 时，$Y=D_1$”意味着[余子式](@entry_id:137503) $f(1, D_1, D_0) = D_1$。

将这两个[余子式](@entry_id:137503)代入香农展开式，我们便得到了 $2{:}1$ [多路复用器](@entry_id:172320)的标准**[积之和](@entry_id:266697) (Sum-of-Products, SOP)** 表达式：
$$Y = \overline{S} D_0 + S D_1$$
这个表达式清晰地体现了[多路复用器](@entry_id:172320)的“选择”功能。当 $S=0$ 时，$\overline{S}=1$，表达式变为 $Y = 1 \cdot D_0 + 0 \cdot D_1 = D_0$。当 $S=1$ 时，$\overline{S}=0$，表达式变为 $Y = 0 \cdot D_0 + 1 \cdot D_1 = D_1$。这种结构是构建更大数据选择网络的基础。

#### 解码器：从二[进制](@entry_id:634389)到“独热”码

**解码器 (Decoder)** 是一种将二进制编码输入转换为一组[互斥](@entry_id:752349)输出的电路。一个典型的 $m$ 输入到 $n$ 输出的解码器，其中 $n=2^m$，其功能是当输入端呈现某个特定的 $m$ 位[二进制码](@entry_id:266597)时，在 $n$ 个输出端中，有且仅有一个输出被激活。这种只有一个信号为高电平（逻辑1）、其余信号均为低电平（逻辑0）的编码方式被称为**[独热编码](@entry_id:170007) (one-hot encoding)**。

解码器的每个输出都唯一对应于一个输入组合。具体来说，对于一个输入向量 $\{d_{m-1}, \dots, d_1, d_0\}$，如果它代表的无符号二进制整数值为 $k$，那么第 $k$ 个输出 $O_k$ 将被激活。这意味着每个输出 $O_k$ 的布尔函数本质上是输入变量的一个**[最小项](@entry_id:178262) (minterm)** 。[最小项](@entry_id:178262)是一个包含所有输入变量（或其[补码](@entry_id:756269)）的乘积项，它仅在对应唯一的一个输入组合时值为1。

例如，对于一个2输入到4输出的解码器，输入为 $(d_1, d_0)$，其四个输出的[布尔表达式](@entry_id:262805)为：
- $O_0 = \overline{d_1} \cdot \overline{d_0}$ (对应输入 00)
- $O_1 = \overline{d_1} \cdot d_0$ (对应输入 01)
- $O_2 = d_1 \cdot \overline{d_0}$ (对应输入 10)
- $O_3 = d_1 \cdot d_0$ (对应输入 11)

一般地，对于一个 $m$ 输入解码器，其第 $k$ 个输出 $O_k$ 的表达式可以写为：
$$O_k = \bigwedge_{j=0}^{m-1} l_j$$
其中 $l_j = d_j$ 如果 $k$ 的二[进制](@entry_id:634389)表示中第 $j$ 位为1，而 $l_j = \overline{d_j}$ 如果第 $j$ 位为0。解码器在计算机体系结构中扮演着至关重要的角色，尤其是在[内存地址解码](@entry_id:173840)和指令译码中。

#### 编码器：从“独热”码到二[进制](@entry_id:634389)

**编码器 (Encoder)** 在功能上与解码器相反。它接收一组[独热编码](@entry_id:170007)的输入，并输出与被激活的输入线对应的[二进制码](@entry_id:266597)。例如，一个 $4$ 输入到 $2$ 输出的编码器，如果输入 $D_2$ 被激活，输出将是二[进制](@entry_id:634389)的“2”，即 $(Y_1, Y_0) = (1, 0)$。

编码器与解码器之间的“逆运算”关系可以通过一个加权和函数优美地展现出来 。考虑一个 $m$ 输入到 $2^m$ 输出的解码器，其输入为 $\{d_j\}$，输出为 $\{O_k\}$。我们可以定义一个整数值函数 $S$：
$$S = \sum_{k=0}^{2^m-1} k \cdot O_k$$
由于解码器的输出是独热的，对于任意给定的输入，只有一个 $O_k$ 为1，其余均为0。这个唯一的 $k$ 正是输入 $\{d_j\}$ 所代表的整数值。因此，上述和式会坍缩为唯一的非零项，其结果就是输入的整数值本身：
$$S = \sum_{j=0}^{m-1} d_j 2^j$$
这个结果表明，解码器的输出经过加权求和，其行为等效于一个编码器，将二进制输入 $\{d_j\}$ 转换为了其对应的整数值。这深刻揭示了编码与解码操作之间的内在对偶性。

#### [解复用器](@entry_id:174207)：数据分配器

**[解复用器](@entry_id:174207) (Demultiplexer, DEMUX)** 的功能与多路复用器相反。它接收一个数据输入 $D$，并根据[选择信号](@entry_id:894787)的指示，将该数据路由到 $N$ 个输出线中的某一个。因此，它扮演着“数据分配器”的角色。

[解复用器](@entry_id:174207)的实现与解码器密切相关。一个 $1$ 输入到 $N$ 输出的[解复用器](@entry_id:174207)，可以通过一个 $k$ 到 $N$（其中 $k=\lceil \log_2 N \rceil$）的解码器和一组[与门](@entry_id:166291)来构建 。$k$ 位[选择信号](@entry_id:894787)被送入解码器，生成 $N$ 个独热的使能信号 $\{E_0, E_1, \dots, E_{N-1}\}$。然后，每个输出 $Y_i$ 都由数据输入 $D$ 和对应的使能信号 $E_i$ 通过一个[与门](@entry_id:166291)得到：
$$Y_i = D \land E_i$$
当[选择信号](@entry_id:894787)指定通道 $i$ 时，只有 $E_i$ 为1，因此 $Y_i = D$，而所有其他的输出 $Y_j$ ($j \neq i$) 由于 $E_j=0$ 而保持为0。这种结构将解码器的地址选择能力与数据流的门控结合在一起，是数据路由和分配网络的核心。

### 高级和实用实现技术

#### 结构化与层次化设计

在实际设计中，大型的逻辑模块通常通过层次化的方式，由更小的、[标准化](@entry_id:637219)的单元构建而成。这种方法不仅简化了设计过程，还有助于优化性能。

以[多路复用器](@entry_id:172320)为例，一个大型的 $n{:}1$ [多路复用器](@entry_id:172320)可以通过一个由 $2{:}1$ [多路复用器](@entry_id:172320)构成的树形结构来实现 。为了将 $n$ 个输入减少到1个输出，每一级 $2{:}1$ MUX 将输入数量减半。为实现最小的逻辑深度（即最快的速度），应采用平衡[二叉树](@entry_id:270401)结构。
- 第一级需要 $\lceil n/2 \rceil$ 个 $2{:}1$ MUX，将 $n$ 个输入减少到 $\lceil n/2 \rceil$ 个输出。
- 第二级将这 $\lceil n/2 \rceil$ 个信号再次减半，以此类推。
- 这个过程持续进行，直到只剩下一个输出。

一个深度为 $D$ 的平衡[二叉树](@entry_id:270401)可以处理最多 $2^D$ 个输入。因此，实现一个 $n{:}1$ MUX 所需的最小逻辑深度 $D_{\min}$（即 $2{:}1$ MUX的级数）必须满足 $2^{D_{\min}} \ge n$。这可以表示为：
$$D_{\min} = \lceil \log_2 n \rceil$$
同时，为了能够唯一地选择 $n$ 个输入中的一个，所需的二进制[选择信号](@entry_id:894787)位数 $S_{\min}$ 也必须满足 $2^{S_{\min}} \ge n$，因此：
$$S_{\min} = \lceil \log_2 n \rceil$$
例如，要实现一个 $32{:}1$ 的[多路复用器](@entry_id:172320)，由于 $\log_2 32 = 5$，所以需要 $\lceil 5 \rceil = 5$ 个选择位，并且在树形结构中至少需要 $5$ 级 $2{:}1$ MUX 才能实现最小延迟 。

#### 晶体管级实现与挑战

[逻辑门](@entry_id:178011)的抽象模型虽然方便，但物理实现带来了独特的挑战和优化机会。**[传导晶体管逻辑](@entry_id:171813) (Pass-transistor logic, PTL)** 是一种高效实现多路复用器等开关功能电路的技术，它直接利用MOSFET作为开关来传递信号。

一个简单的 $2{:}1$ MUX 可以用两个N[MOS晶体管](@entry_id:273779)实现。然而，仅使用NMOS的PTL在传递高电平（逻辑1）时存在一个严重问题：**阈值[电压降](@entry_id:263648) (threshold voltage drop)** 。当一个NMOS管的栅极电压为 $V_{DD}$，并且它试图将输出节点 $X$ 从低电平上拉到等于输入的高电平 $V_{DD}$ 时，随着输出电压 $V_X$ 的升高，其源极电压也在升高。这导致两个效应：
1. 栅源电压 $V_{GS} = V_G - V_S = V_{DD} - V_X$ 减小。
2. 源衬偏压 $V_{SB} = V_S - V_B = V_X$ 增大，由于**体效应 (body effect)**，这会使NMOS的阈值电压 $V_T$ 升高。

当 $V_{GS}$ 下降到等于升高的 $V_T$ 时，即 $V_{DD} - V_X = V_T(V_X)$，该NMOS管将关闭，停止为输出充电。因此，输出电压 $V_X$ 无法达到完整的 $V_{DD}$，而是稳定在一个较低的值，大约为 $V_{DD} - V_T$。这种不完整的电压摆幅会降低噪声容限，并可能导致下游[逻辑门](@entry_id:178011)的功能错误。例如，在 $V_{DD}=1.0\,\mathrm{V}$ 的典型工艺下，考虑到体效应，NMOS传递的“高”电平可能只有约 $0.62\,\mathrm{V}$ 。

为了解决这个问题，现代[CMOS设计](@entry_id:1122538)广泛采用**[传输门](@entry_id:1133367) (transmission gate)**。[传输门](@entry_id:1133367)由一个NMOS管和一个PMOS管并联构成，它们的栅极由互补的控制信号（例如 $S$ 和 $\overline{S}$）驱动。
- 当传递高电平时，PMOS管（强上拉器件）被完全开启，可以将输出无损地拉到 $V_{DD}$。
- 当传递低电平时，NMOS管（强下拉器件）被完全开启，可以将输出无损地拉到地。

通过这种互补结构，[传输门](@entry_id:1133367)能够实现**[轨到轨](@entry_id:271568) (rail-to-rail)** 的信号摆幅，从而成为实现高性能、高鲁棒性多路复用器和开关的标准方法 。

#### 性能与面积优化

在EDA流程中，逻辑综合工具致力于在满足[时序约束](@entry_id:168640)的同时最小化电路面积。设计人员可以通过提供额外的约束信息或采用优化的架构来辅助这一过程。

**利用[无关项](@entry_id:165299)进行[逻辑最小化](@entry_id:164420)**
在许多系统中，某些输入组合由于系统级约束而永远不会出现。这些不可达的输入状态为逻辑综合提供了**[无关项](@entry_id:165299) (don't-care conditions)**。综合工具可以自由地将这些[无关项](@entry_id:165299)的输出指定为0或1，以形成最大的布尔蕴含项，从而得到最简化的逻辑表达式。

考虑一个 $4$ 输入到 $2$ 输出的编码器，其输入被保证为[独热编码](@entry_id:170007)。这意味着16种可能的4位输入组合中，只有4种（0001, 0010, 0100, 1000）是合法的。其余12种组合（如0000, 0011等）都是[无关项](@entry_id:165299) 。
- **朴素实现**：如果不利用[无关项](@entry_id:165299)，输出 $Y_1$ 的表达式（当 $D_2=1$ 或 $D_3=1$ 时为1）将是两个[最小项](@entry_id:178262)之和：$Y_1 = \overline{D_3}D_2\overline{D_1}\overline{D_0} + D_3\overline{D_2}\overline{D_1}\overline{D_0}$。
- **优化实现**：通过使用[卡诺图](@entry_id:264061)（K-map）并将[无关项](@entry_id:165299)标记为 'X'，我们可以找到更简单的表达式。对于 $Y_1$，可以将 $D_3=1$ 和 $D_2=1$ 的情况分别与[无关项](@entry_id:165299)组合成更大的逻辑块，最终得到极其简化的表达式：$Y_1 = D_3 + D_2$。同样，对于 $Y_0$（当 $D_1=1$ 或 $D_3=1$ 时为1），表达式简化为 $Y_0 = D_3 + D_1$。

这种简化极大地减小了电路的面积和复杂性。在上述例子中，从需要多个4输入与门和[或门](@entry_id:168617)的复杂电路，简化为仅需两个2输入或门，面积可以减少高达87.5% 。这说明了系统级知识在底层[逻辑优化](@entry_id:177444)中的巨大价值。

**预解码技术**
对于大规模解码器，例如内存中用于选择字线（wordline）的 $8$-to-$256$ 解码器，直接实现会遇到**[扇入](@entry_id:165329) (fan-in)** 过高的问题。一个256输出的解码器，每个输出都是一个8输入的[与门](@entry_id:166291)（或等效的NAND/NOR结构）。高[扇入](@entry_id:165329)的门不仅面积大，而且速度慢，因为晶体管堆叠过高。

为了解决这个问题，可以采用**预解码 (predecoding)** 的两级结构 。其思想是将输入地址位分成若干小组，先对每个小组进行局部解码。
- 在 $8$-to-$256$ 解码器的例子中，可以将8个地址位分为4个2位的小组。
- 第一级（预解码级）由四个并行的 $2$-to-$4$ 解码器组成，每个解码器为其对应的2位小组生成4个独热信号。
- 第二级（主解码级）则由一个与门阵列构成。要生成256个最终输出字线中的任意一条，只需从四个预解码器组的输出中各取一个信号，然后将这4个信号进行与运算。

通过这种方式，原本需要 $256$ 个 $8$ 输入的与门，现在被替换为四个 $2$-to-$4$ 解码器（通常由4个2输入[与门](@entry_id:166291)构成）和 $256$ 个 $4$ 输入的[与门](@entry_id:166291)。这显著降低了最大[扇入](@entry_id:165329)数（从8降到4），从而提高了速度并优化了版图 。

### 高级功能与形式化属性

#### [优先编码器](@entry_id:176460)

简单的编码器假设输入总是独热的。但在许多应用中，可能同时有多个输入被激活。**[优先编码器](@entry_id:176460) (Priority Encoder)** 解决了这个问题，它根据预设的优先级规则，只对具有最高优先级的活动输入进行编码。

一个[优先编码器](@entry_id:176460)通常有一个“有效”输出 $V$，用于指示是否有任何输入被激活。其编码输出 $Y$ 则对应于最高优先级活动输入的索引。例如，对于一个具有优先级顺序 $I_{n-1} \succ \dots \succ I_0$ 的 $n$ 输入[优先编码器](@entry_id:176460)，其输出 $Y$ 的每一位 $Y_k$ 可以表示为 ：
$$Y_k = \bigvee_{j=0}^{n-1} \left( I_j \land \bigwedge_{t=j+1}^{n-1} \lnot I_t \land \operatorname{bit}_k(j) \right)$$
其中 $\operatorname{bit}_k(j)$ 是索引 $j$ 的二[进制](@entry_id:634389)表示中的第 $k$ 位。
这个表达式的逻辑是：对于每个输入 $I_j$，它要能成功地贡献于最终输出，必须满足两个条件：(1) $I_j$ 本身被激活；(2) 所有比它优先级更高的输入 $I_t$ ($t > j$) 都未被激活。通过将所有满足条件的 $j$ 的编码位进行“或”运算，就形成了最终的编码输出。

#### 编码器与解码器的形式化关系

从[集合论](@entry_id:137783)的角度来看，编码器和解码器之间的关系可以被更严格地形式化。一个 $N$-to-$k$ 编码器可以被建模为一个从独热向量集合 $H \subset \{0,1\}^N$ 到 $k$ 位码字空间 $Y = \{0,1\}^k$ 的函数 $E: H \to Y$。一个 $k$-to-$N$ 解码器则被建模为 $D: Y \to X$。

我们关心的是，在何种条件下，解码器 $D$ 可以作为编码器 $E$ 的一个“逆函数”。根据函数理论，一个函数存在逆函数的充分必要条件是该函数是**[双射](@entry_id:138092) (bijective)** 的，即它既是**[单射](@entry_id:183792) (injective)** 又是**满射 (surjective)**。

对于编码器 $E: H \to Y$，其逆的存在性主要取决于其[单射性](@entry_id:147722)质 。
- **[单射性](@entry_id:147722)**：如果编码器是[单射](@entry_id:183792)的，意味着它将每个不同的独热输入映射到唯一的、不同的码字上。即如果 $h_1 \neq h_2$，则 $E(h_1) \neq E(h_2)$。
- **[存在性与唯一性](@entry_id:263101)**：只有当编码器 $E$ 在其定义域 $H$ 上是[单射](@entry_id:183792)的时，一个能完美恢复原始独热输入的解码器 $D$ 才存在且在其像集 $\operatorname{Im}(E)$ 上是唯一的。
- **编码空间**：为了使[单射](@entry_id:183792)成为可能，码字空间的容量必须至少等于输入集合的大小，即 $|Y| \ge |H|$，或 $2^k \ge N$。这与我们之前得到的 $k \ge \log_2 N$ 的结论一致。

值得注意的是，编码器 $E$ 的行为只在其定义的独热输入集合 $H$ 上才重要。对于 $H$ 之外的输入（如全零或多热输入），其行为不影响其在 $H$ 上是否存在逆的关系 。

#### 异步系统中的冒险与[鲁棒设计](@entry_id:269442)

在物理电路中，由于门延迟和路径延迟的不相等，当输入信号发生变化时，输出可能会出现短暂的错误脉冲。这种现象被称为**冒险 (hazard)**。在一个由解码器和[与门](@entry_id:166291)构成的标准[解复用器](@entry_id:174207)中，如果[选择信号](@entry_id:894787)是异步变化的（即多个位可能在不同时刻改变），解码器的输出将经历竞争冒险，产生非独热的瞬态输出，从而导致[解复用器](@entry_id:174207)输出错误。

例如，当[选择信号](@entry_id:894787)从 $01$ 变为 $10$ 时，解码器输出理想情况下应从 $s_1=1$ 变为 $s_2=1$。但由于路径延迟差异，可能出现一个短暂的窗口，其中 $s_1$ 尚未变为0而 $s_2$ 已经变为1，导致 $s_1$ 和 $s_2$ 同时为1。这会使得数据 $D$ 被短暂地路由到两个输出，违反了[互斥性](@entry_id:893613)。

为了设计对异步输入具有鲁棒性的无冒险电路，需要采用更先进的设计原则 。
- **[格雷码](@entry_id:166435) (Gray code)**：一种策略是使用[格雷码](@entry_id:166435)作为选择输入，确保相邻状态之间只有一个比特变化。但这并不能完全消除解码器内部的竞争冒险。
- **[双轨编码](@entry_id:167964) (Dual-rail encoding)**：一种更强大的方法是使用双轨信号。每个逻辑信号 $s_i$ 被一对物理线 $(s_i^+, s_i^-)$ 表示。“1”由 $(1,0)$ 表示，“0”由 $(0,1)$ 表示。状态 $(0,0)$ 是一个合法的“空”状态，用于在两次有效状态之间进行转换，从而保证了每次转换都是**单调的**（每个物理线只变化一次，方向确定）。

基于单调的双轨信号，可以构建一个**正单调 (positive-unate)** 的门控网络来确保无冒险和[互斥性](@entry_id:893613)。例如，输出 $y_i$ 可以通过以下[逻辑实现](@entry_id:173626)：
$$ y_i = D \land s_i^{+} \land \bigwedge_{j\neq i} s_j^{-} $$
这个网络的输出 $y_i$ 对其所有输入都是单调不减的。根据[异步电路](@entry_id:169162)理论，一个由单调输入驱动的正[单调函数](@entry_id:145115)是无[静态冒险](@entry_id:163586)的。此外，该逻辑内在地保证了[互斥性](@entry_id:893613)：如果 $y_i$ 和 $y_k$ 同时为1，则要求 $s_k^+=1$ 且 $s_k^-=1$，但这违反了[双轨编码](@entry_id:167964)的基本规则。这种设计方法体现了在面对物理世界非理想性时，如何通过协议和逻辑结构的协同设计来保证系统的正确性。
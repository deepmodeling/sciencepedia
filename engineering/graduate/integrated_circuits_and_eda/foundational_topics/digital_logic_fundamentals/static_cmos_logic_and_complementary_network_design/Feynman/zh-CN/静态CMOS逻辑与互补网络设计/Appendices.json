{
    "hands_on_practices": [
        {
            "introduction": "在数字电路设计中，一个关键目标是实现可预测且均衡的性能。对于CMOS反相器而言，这意味着确保输出无论是上拉至 $V_{DD}$ 还是下拉至地，其转换速度都应相近。本练习将探讨如何通过调整PMOS和NMOS晶体管的尺寸，来补偿电子和空穴迁移率的固有差异，从而实现这种对称性 。",
            "id": "4300929",
            "problem": "在电子设计自动化（EDA）背景下驱动和分析的集成电路中的互补金属氧化物半导体（CMOS）反相器，使用一个p沟道金属氧化物半导体场效应晶体管（MOSFET）对电容性负载充电，并使用一个n沟道MOSFET对其放电。考虑一个驱动其输出端负载电容 $C_{L}$ 的单个反相器。假设在强反型区进行长沟道操作，沟道长度相同 $L_{n}=L_{p}$，充电和放电事件期间导通时的过驱动电压大小相等，并忽略体效应和速度饱和效应。转换期间的导电路径可以近似为一个一阶电阻-电容网络，其中导通器件的有效导通电阻与晶体管宽度和迁移率成反比，即 $R_{x}\\propto \\frac{1}{\\mu_{x} W_{x}}$，其中 $x\\in\\{n,p\\}$，$\\mu_{x}$ 是载流子迁移率，$W_{x}$ 是沟道宽度。\n\n设电子与空穴的迁移率之比为 $\\mu_{n}/\\mu_{p}=2.5$。对于给定的负载电容 $C_{L}$ 和上述建模假设，确定使反相器输出的上升时间和下降时间相等的比率 $W_{p}/W_{n}$，即在电阻-电容近似下实现 $t_{r}\\approx t_{f}$。将最终答案表示为一个不带单位的实数。无需四舍五入。",
            "solution": "问题要求计算p沟道MOSFET宽度 $W_{p}$ 与n沟道MOSFET宽度 $W_{n}$ 的比率，该比率能使驱动电容性负载 $C_{L}$ 的CMOS反相器的上升和下降时间相等。分析应在一系列简化假设下进行。\n\n在转换期间，反相器输出电压的动态行为被建模为一阶电阻-电容（RC）电路。下降时间 $t_{f}$ 对应于负载电容 $C_{L}$ 通过n沟道MOSFET（NMOS）放电的过程。下降时间与该放电电路的时间常数 $\\tau_{f}$ 成正比。\n$$ \\tau_{f} = R_{n} C_{L} $$\n此处，$R_{n}$ 是NMOS晶体管的有效导通电阻。\n\n类似地，上升时间 $t_{r}$ 对应于负载电容 $C_{L}$ 通过p沟道MOSFET（PMOS）充电的过程。上升时间与该充电电路的时间常数 $\\tau_{r}$ 成正比。\n$$ \\tau_{r} = R_{p} C_{L} $$\n此处，$R_{p}$ 是PMOS晶体管的有效导通电阻。\n\n为了实现相等的上升和下降时间，$t_{r} \\approx t_{f}$，它们各自的时间常数必须相等。\n$$ \\tau_{r} = \\tau_{f} $$\n将时间常数的表达式代入，我们得到：\n$$ R_{p} C_{L} = R_{n} C_{L} $$\n由于负载电容 $C_{L}$ 对于充电和放电过程是相同的，我们可以从等式两边消去它，从而得出PMOS和NMOS晶体管的导通电阻必须相等的条件。\n$$ R_{p} = R_{n} $$\n\n问题指出，晶体管的有效导通电阻 $R_{x}$ 遵循比例关系 $R_{x}\\propto \\frac{1}{\\mu_{x} W_{x}}$，其中 $x \\in \\{n, p\\}$，$\\mu_{x}$ 是载流子迁移率，$W_{x}$ 是沟道宽度。我们可以用一个比例常数 $k$ 来表示这个关系：\n$$ R_{x} = \\frac{k}{\\mu_{x} W_{x}} $$\n这个比例关系是在长沟道操作、沟道长度相等（$L_{n}=L_{p}$）以及导通期间过驱动电压大小相等等给定假设下，从MOSFET在线性区（或三极管区）的漏极电流方程推导出来的。导通电阻 $R_{on}$ 近似为 $R_{on} \\approx \\frac{L}{\\mu C_{ox} W |V_{ov}|}$。根据题设，$L$、$C_{ox}$ 和 $|V_{ov}|$ 对NMOS和PMOS器件都是相同的，因此比例常数 $k$ 对两者也是相同的。\n\n将这个电阻表达式代入我们的条件 $R_{p} = R_{n}$ 中：\n$$ \\frac{k}{\\mu_{p} W_{p}} = \\frac{k}{\\mu_{n} W_{n}} $$\n常数 $k$ 被消去，剩下：\n$$ \\frac{1}{\\mu_{p} W_{p}} = \\frac{1}{\\mu_{n} W_{n}} $$\n通过交叉相乘，我们得到宽度和迁移率之间的关系：\n$$ \\mu_{n} W_{n} = \\mu_{p} W_{p} $$\n\n问题要求我们确定比率 $W_{p}/W_{n}$。我们可以重新排列上面的方程来求解这个比率：\n$$ \\frac{W_{p}}{W_{n}} = \\frac{\\mu_{n}}{\\mu_{p}} $$\n这个结果表明，为了补偿空穴迁移率（$\\mu_{p}$）相对于电子迁移率（$\\mu_{n}$）较低的劣势，必须使PMOS晶体管比NMOS晶体管更宽，以实现相同的导通电阻，从而获得对称的上升/下降时间。\n\n问题给出了电子与空穴迁移率之比的数值：\n$$ \\frac{\\mu_{n}}{\\mu_{p}} = 2.5 $$\n将此值代入我们推导出的宽度比表达式中，得到最终答案：\n$$ \\frac{W_{p}}{W_{n}} = 2.5 $$",
            "answer": "$$\\boxed{2.5}$$"
        },
        {
            "introduction": "在掌握了单个反相器的设计原理后，我们将进一步实现更复杂的布尔函数，将其整合为单个静态CMOS逻辑门。一个逻辑函数的数学表达形式会极大地影响最终电路的尺寸和复杂度。本练习将展示逻辑因式分解作为一种优化技术，如何有效减少所需晶体管的数量，从而实现面积效率更高的设计 。",
            "id": "4300973",
            "problem": "考虑一个单一的复合静态互补金属氧化物半导体（CMOS）门，该门实现了因式分解形式的布尔函数 $$f=(A+B)C+D,$$ 其中 $A$、$B$、$C$ 和 $D$ 是布尔输入信号。该门由一个由 $n$ 沟道金属氧化物半导体场效应晶体管构成的互补下拉网络（PDN）和一个由 $p$ 沟道金属氧化物半导体场效应晶体管构成的上拉网络（PUN）组成，并以标准的互补拓扑结构连接。假设两种输入极性（即 $A$、$B$、$C$、$D$ 及其补数 $A'$、$B'$、$C'$、$D'$）都可无额外成本地获得，并且只使用串并联晶体管网络，不使用传输门、传输晶体管逻辑或有比逻辑。只计算复合门本身的 PDN 和 PUN 中的晶体管。\n\n使用静态 CMOS 互补网络的基本构建法则和布尔代数（包括 De Morgan 定律），确定：\n- $$f=(A+B)C+D$$ 的因式分解实现的总晶体管数量，\n- 未分解的积之和实现 $$f=AC+BC+D$$ 的总晶体管数量，\n每种都实现为单个复合静态 CMOS 门。\n\n使用 LaTeX `pmatrix` 环境，将最终答案表示为一个双元素行向量，其中第一个元素等于因式分解的总数，第二个元素等于未分解的积之和的总数。无需四舍五入，也无需报告单位。",
            "solution": "该问题要求计算实现一个特定布尔函数的两种不同逻辑形式（因式分解与未分解）所需的晶体管总数。\n\n**基本原理**\n一个标准的静态CMOS逻辑门是固有反相的。它由一个下拉网络（PDN）和一个上拉网络（PUN）组成。PDN由NMOS晶体管构成，用于将输出拉至地（逻辑0）；PUN由PMOS晶体管构成，用于将输出拉至高电平 $V_{DD}$（逻辑1）。对于一个输出为 $Y$ 的逻辑门，PDN实现的布尔逻辑决定了输出何时为0，而PUN实现的逻辑决定了输出何时为1。具体来说，如果门实现的函数是 $Y = \\overline{F}$，那么PDN就实现逻辑 $F$。\n\n在本题中，要求实现非反相函数 $f$。在单级静态CMOS门中，这意味着该门实际输出的是 $\\bar{f}$。因此，我们需要设计一个PDN来实现逻辑 $f$。PUN则自动成为PDN的对偶网络。一个串并联网络中所需的晶体管数量等于其布尔表达式中的字面量（literal）数量。总晶体管数量是PDN和PUN晶体管数量之和，即PDN中晶体管数量的两倍。\n\n**情况 1：因式分解形式 $f = (A+B)C+D$**\n我们需要为这个逻辑表达式构建PDN。\n- `A+B` 对应两个并联的NMOS晶体管，分别由输入A和B控制。\n- `(A+B)C` 对应上述并联结构与一个由C控制的NMOS晶体管串联。\n- `(A+B)C+D` 对应上述串联结构与一个由D控制的NMOS晶体管并联。\n\n该PDN网络需要为 A, B, C, D 四个输入各分配一个晶体管。\n- PDN晶体管数量 = 4个NMOS。\n- PUN是PDN的对偶网络，同样需要4个PMOS。\n- 总晶体管数量 = 4 (NMOS) + 4 (PMOS) = 8。\n\n**情况 2：未分解的积之和形式 $f = AC+BC+D$**\n我们为这个逻辑表达式构建PDN。\n- `AC` 对应两个串联的NMOS晶体管，分别由A和C控制。\n- `BC` 对应两个串联的NMOS晶体管，分别由B和C控制。\n- `AC+BC+D` 对应将 `AC` 串联支路、`BC` 串联支路以及一个由D控制的NMOS晶体管三者并联。\n\n在这个结构中，字面量C出现了两次。在并联的两个不同串联支路（`AC`和`BC`）中，控制C的晶体管不能被共享，因为这会破坏串并联结构（会形成一个桥式网络）。因此，需要两个独立的由C控制的晶体管。\nPDN中所需的晶体管对应于字面量 A, C, B, C, D。\n- PDN晶体管数量 = 5个NMOS。\n- PUN是其对偶网络，也需要5个PMOS。\n- 总晶体管数量 = 5 (NMOS) + 5 (PMOS) = 10。\n\n**结论**\n因式分解形式的实现需要8个晶体管，而未分解的积之和形式需要10个晶体管。这表明逻辑因式分解是一种有效的面积优化技术。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n8  10\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在复杂逻辑门中，将晶体管串联（即“堆叠”）以实现下拉网络中的与逻辑或上拉网络中的或逻辑是常见做法。尽管这种结构在逻辑上是正确的，但它会因电阻增加和内部节点寄生电容而引入显著的性能损失。本练习将采用电路分析中的关键工具——Elmore延迟模型，来量化晶体管堆叠相对于单个器件所带来的延迟惩罚，从而帮助我们深入理解一个主要的性能瓶颈 。",
            "id": "4301010",
            "problem": "一个静态互补金属氧化物半导体（CMOS）逻辑门实现了一个下拉网络，该网络由四个相同的n沟道金属氧化物半导体场效应晶体管（nMOSFET）串联堆叠而成，在输出下降跃迁期间，每个晶体管的导通电阻被建模为一个恒定值 $r$。输出节点驱动一个外部负载电容 $C_L$。下拉路径中的每个扩散节点（位于输出节点的顶部晶体管的漏极以及三个内部串联节点）由于源/漏结和布线寄生效应，都对地呈现一个值为 $c$ 的集总寄生电容。忽略米勒耦合和栅电容，并假设输入阶跃瞬时切换该晶体管堆叠，因此该网络可被视为一个对输出进行放电的线性电阻-电容（RC）树。\n\n使用针对RC树的Elmore延迟近似，对以下两种情况的输出下降延迟进行建模：\n- 四堆叠nMOS下拉路径，以及\n- 导通电阻同样为 $r$、驱动相同负载 $C_L$ 且在输出节点具有相同漏极扩散电容 $c$ 的单个nMOS晶体管，\n\n两者均以输出节点为汇点，RC树的源点位于导电路径底部的地。计算延迟代价，其定义为四堆叠路径的Elmore延迟与单晶体管路径的Elmore延迟之比。将您的最终答案表示为关于 $c$ 和 $C_L$ 的单个闭式解析表达式。无需四舍五入，答案是无量纲的（没有单位）。",
            "solution": "RC树中特定节点 $i$ 的Elmore延迟 $\\tau_i$ 定义为树中所有电容之和，其中每一项是电容值与一段路径电阻的乘积，该路径电阻是从源（地）到节点 $i$ 的路径与从源到该电容的路径所共享的部分。在数学上，这表示为：\n$$\n\\tau_i = \\sum_{k} R_{ki} C_k\n$$\n其中 $C_k$ 是节点 $k$ 处的电容，$R_{ki}$ 是从源到节点 $i$ 的路径与从源到节点 $k$ 的路径之间共享的公共路径的电阻。RC树的源点处于地电位。\n\n首先，我们对单个nMOS晶体管路径进行建模。\n设输出节点为节点 $1$。晶体管的导通电阻 $r$ 将此节点连接到地。问题陈述指出，输出节点具有漏极扩散电容 $c$ 并驱动外部负载 $C_L$。因此，节点 $1$ 处的总电容为 $C_1 = C_L + c$。\n该RC模型由一个连接在节点 $1$ 和地之间的电阻 $r$ 以及一个连接在节点 $1$ 和地之间的电容 $C_1$ 组成。\n输出端（节点 $1$）的Elmore延迟，记为 $\\tau_{D1}$，计算如下。求和式中只有 $k=1$ 一项。从源（地）到节点 $1$ 的路径经过电阻 $r$。从源到节点 $1$ 处电容的路径也经过电阻 $r$。因此，共享路径电阻 $R_{11}$ 就是从源到节点 $1$ 的整个路径电阻，即 $r$。\n$$\n\\tau_{D1} = R_{11} C_1 = r (C_L + c)\n$$\n\n其次，我们对四堆叠nMOS下拉路径进行建模。\n该路径可建模为一个线性RC梯形网络。我们从接地处向上对节点进行编号。\n- 节点 $0$：地（源）。\n- 节点 $1$：第一个（底部）晶体管上方的内部节点。\n- 节点 $2$：第二个晶体管上方的内部节点。\n- 节点 $3$：第三个晶体管上方的内部节点。\n- 节点 $4$：输出节点，即第四个（顶部）晶体管的漏极。\n\n每个晶体管贡献一个串联电阻 $r$。电阻连接如下：\n- 一个电阻 $r$ 连接在节点 $1$ 和节点 $0$ 之间。\n- 一个电阻 $r$ 连接在节点 $2$ 和节点 $1$ 之间。\n- 一个电阻 $r$ 连接在节点 $3$ 和节点 $2$ 之间。\n- 一个电阻 $r$ 连接在节点 $4$ 和节点 $3$ 之间。\n\n问题陈述指出，三个内部节点和输出节点各自具有一个寄生电容 $c$。输出节点还驱动负载 $C_L$。因此，电容值为：\n- 节点 $1$ 处为 $C_1 = c$。\n- 节点 $2$ 处为 $C_2 = c$。\n- 节点 $3$ 处为 $C_3 = c$。\n- 节点 $4$ 处为 $C_4 = C_L + c$。\n\n我们需要计算输出端（即节点 $4$）的Elmore延迟，记为 $\\tau_{D4}$。\n$$\n\\tau_{D4} = \\sum_{k=1}^{4} R_{k4} C_k = R_{14} C_1 + R_{24} C_2 + R_{34} C_3 + R_{44} C_4\n$$\n项 $R_{k4}$ 是从源（地）到节点 $k$ 的路径电阻，因为在这个串联拓扑中，这是与从源到节点 $4$ 的路径共享的路径段。\n- 从源到节点 $1$ 的路径电阻为 $R_{14} = r$。\n- 从源到节点 $2$ 的路径电阻为 $R_{24} = r + r = 2r$。\n- 从源到节点 $3$ 的路径电阻为 $R_{34} = r + r + r = 3r$。\n- 从源到节点 $4$ 的路径电阻为 $R_{44} = r + r + r + r = 4r$。\n\n将这些电阻值和电容值代入Elmore延迟公式：\n$$\n\\tau_{D4} = (r)(c) + (2r)(c) + (3r)(c) + (4r)(C_L + c)\n$$\n我们可以提出因子 $r$ 并简化表达式：\n$$\n\\tau_{D4} = rc + 2rc + 3rc + 4rC_L + 4rc\n$$\n$$\n\\tau_{D4} = (1 + 2 + 3 + 4)rc + 4rC_L\n$$\n$$\n\\tau_{D4} = 10rc + 4rC_L = r(10c + 4C_L)\n$$\n\n最后，我们计算延迟代价，即四堆叠延迟与单晶体管延迟之比。\n$$\n\\text{Delay Penalty} = \\frac{\\tau_{D4}}{\\tau_{D1}} = \\frac{r(10c + 4C_L)}{r(C_L + c)}\n$$\n电阻项 $r$ 被消去，剩下仅含 $c$ 和 $C_L$ 的最终表达式：\n$$\n\\text{Delay Penalty} = \\frac{10c + 4C_L}{c + C_L}\n$$\n该表达式也可以写成：\n$$\n\\frac{4(c + C_L) + 6c}{c + C_L} = 4 + \\frac{6c}{c + C_L}\n$$\n所要求的形式是单个闭式解析表达式，其中分式形式最为直接。",
            "answer": "$$\n\\boxed{\\frac{10c + 4C_L}{c + C_L}}\n$$"
        }
    ]
}
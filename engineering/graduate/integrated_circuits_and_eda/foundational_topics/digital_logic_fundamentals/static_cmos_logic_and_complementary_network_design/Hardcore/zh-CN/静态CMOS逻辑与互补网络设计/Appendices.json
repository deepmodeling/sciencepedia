{
    "hands_on_practices": [
        {
            "introduction": "在静态CMOS电路中，由于电子和空穴的迁移率存在差异，PMOS和NMOS晶体管的导通电阻特性并不相同。为了实现对称的开关性能，即相近的上升和下降时间，我们需要对晶体管的尺寸进行补偿设计。本练习将通过一个简化的RC模型，指导你计算实现对称时序性能所需的PMOS与NMOS的宽度比 $W_{p}/W_{n}$，这是CMOS逻辑门设计中的一个基本且关键的步骤 ()。",
            "id": "4300929",
            "problem": "在电子设计自动化（EDA）的背景下驱动和分析的集成电路中的一个互补金属氧化物半导体（CMOS）反相器，使用一个p沟道金属氧化物半导体场效应晶体管（MOSFET）为容性负载充电，并使用一个n沟道MOSFET对其放电。考虑一个在其输出端驱动负载电容 $C_{L}$ 的单个反相器。假设在强反型区长沟道工作，沟道长度相同 $L_{n}=L_{p}$，充电和放电事件导通期间的过驱动电压幅值相等，并忽略体效应和速度饱和。在转换期间的导电通路可以近似为一个一阶阻容网络，其中导通器件的有效导通电阻与晶体管宽度和迁移率成反比，即 $R_{x}\\propto \\frac{1}{\\mu_{x} W_{x}}$，其中 $x\\in\\{n,p\\}$，$\\mu_{x}$ 是载流子迁移率，而 $W_{x}$ 是沟道宽度。\n\n设电子与空穴的迁移率之比为 $\\mu_{n}/\\mu_{p}=2.5$。对于给定的负载电容 $C_{L}$ 和上述建模假设，确定使反相器输出的上升时间和下降时间相等的比率 $W_{p}/W_{n}$，即在阻容近似下实现 $t_{r}\\approx t_{f}$。将最终答案表示为一个不带单位的实数。无需四舍五入。",
            "solution": "该问题要求计算 p 沟道 MOSFET 宽度 $W_{p}$ 与 n 沟道 MOSFET 宽度 $W_{n}$ 的比率，以使驱动容性负载 $C_{L}$ 的 CMOS 反相器具有相等的上升和下降时间。分析将在一些简化假设下进行。\n\n在转换期间，反相器输出电压的动态行为被建模为一阶阻容（RC）电路。下降时间 $t_{f}$ 对应于负载电容 $C_{L}$ 通过 n 沟道 MOSFET（NMOS）放电的过程。下降时间与该放电电路的时间常数 $\\tau_{f}$ 成正比。\n$$ \\tau_{f} = R_{n} C_{L} $$\n此处，$R_{n}$ 是 NMOS 晶体管的有效导通电阻。\n\n类似地，上升时间 $t_{r}$ 对应于负载电容 $C_{L}$ 通过 p 沟道 MOSFET（PMOS）充电的过程。上升时间与该充电电路的时间常数 $\\tau_{r}$ 成正比。\n$$ \\tau_{r} = R_{p} C_{L} $$\n此处，$R_{p}$ 是 PMOS 晶体管的有效导通电阻。\n\n为了实现相等的上升和下降时间，即 $t_{r} \\approx t_{f}$，它们各自的时间常数必须相等。\n$$ \\tau_{r} = \\tau_{f} $$\n代入时间常数的表达式，我们得到：\n$$ R_{p} C_{L} = R_{n} C_{L} $$\n由于负载电容 $C_{L}$ 对于充电和放电过程是相同的，我们可以从等式两边消去它，从而得出 PMOS 和 NMOS 晶体管的导通电阻必须相等的条件。\n$$ R_{p} = R_{n} $$\n\n题目指出，晶体管的有效导通电阻 $R_{x}$ 遵循 $R_{x}\\propto \\frac{1}{\\mu_{x} W_{x}}$ 的关系，其中 $x \\in \\{n, p\\}$，$\\mu_{x}$ 是载流子迁移率，而 $W_{x}$ 是沟道宽度。我们可以用一个比例常数 $k$ 来表示这个关系：\n$$ R_{x} = \\frac{k}{\\mu_{x} W_{x}} $$\n这个比例关系是在长沟道工作、沟道长度相等（$L_{n}=L_{p}$）以及导通期间过驱动电压幅值相等等给定假设下，从 MOSFET 在线性区（或三极管区）的漏极电流方程推导出来的。导通电阻 $R_{on}$ 近似为 $R_{on} \\approx \\frac{L}{\\mu C_{ox} W |V_{ov}|}$。由于根据题目陈述，$L$、$C_{ox}$ 和 $|V_{ov}|$ 对于 NMOS 和 PMOS 器件都是相同的，因此比例常数 $k$ 对两者也是相同的。\n\n将这个电阻表达式代入我们的条件 $R_{p} = R_{n}$ 中：\n$$ \\frac{k}{\\mu_{p} W_{p}} = \\frac{k}{\\mu_{n} W_{n}} $$\n常数 $k$ 被消去，剩下：\n$$ \\frac{1}{\\mu_{p} W_{p}} = \\frac{1}{\\mu_{n} W_{n}} $$\n通过交叉相乘，我们得到宽度和迁移率之间的关系：\n$$ \\mu_{n} W_{n} = \\mu_{p} W_{p} $$\n\n题目要求我们确定比率 $W_{p}/W_{n}$。我们可以重新整理上述方程来求解这个比率：\n$$ \\frac{W_{p}}{W_{n}} = \\frac{\\mu_{n}}{\\mu_{p}} $$\n这个结果表明，为了补偿空穴（$\\mu_{p}$）相对于电子（$\\mu_{n}$）较低的迁移率，PMOS 晶体管必须比 NMOS 晶体管做得更宽，以实现相同的导通电阻，从而获得对称的上升/下降时间。\n\n题目提供了电子与空穴迁移率之比的数值：\n$$ \\frac{\\mu_{n}}{\\mu_{p}} = 2.5 $$\n将此值代入我们推导出的宽度比表达式中，得到最终答案：\n$$ \\frac{W_{p}}{W_{n}} = 2.5 $$",
            "answer": "$$\\boxed{2.5}$$"
        },
        {
            "introduction": "在实现复杂的布尔函数时，逻辑表达式的代数形式直接决定了互补网络拓扑的复杂性，从而影响芯片面积和性能。通过对逻辑表达式进行因子分解，我们常常能找到更高效的晶体管网络结构。本练习将对比一个布尔函数的“和之积”形式与因子分解形式在静态CMOS实现中的晶体管数量，让你亲身体会逻辑综合对电路物理实现的优化作用 ()。",
            "id": "4300973",
            "problem": "考虑一个单一的复杂静态互补金属氧化物半导体（CMOS）门，该门实现了因式分解形式的布尔函数 $$f=(A+B)C+D,$$ 其中 $A$、$B$、$C$ 和 $D$ 是布尔输入信号。该门使用由 $n$ 沟道金属氧化物半导体场效应晶体管构成的互补下拉网络（PDN）和由 $p$ 沟道金属氧化物半导体场效应晶体管构成的上拉网络（PUN），并以标准的互补拓扑结构连接。假设输入信号的两种极性（即 $A$、$B$、$C$、$D$ 及其补码 $A'$、$B'$、$C'$、$D'$）均可使用，无需额外成本，并且只使用串并联晶体管网络，不使用传输门、传输晶体管逻辑或比例逻辑。只计算复杂门本身的PDN和PUN中的晶体管。\n\n使用静态CMOS互补网络的基本构建规则和布尔代数（包括德摩根定律），确定：\n- $$f=(A+B)C+D$$ 的因式分解实现方式的总晶体管数量，\n- $$f=AC+BC+D$$ 的未因式分解的“积之和”实现方式的总晶体管数量，\n每种都实现为单个复杂静态CMOS门。\n\n使用LaTeX的 $\\mathrm{pmatrix}$ 环境，将最终答案表示为一个双元素行向量，其中第一个元素等于因式分解实现的总数，第二个元素等于未因式分解的“积之和”实现的总数。无需四舍五入，也无需报告单位。",
            "solution": "该问题要求确定布尔函数 $f$ 的两种不同静态互补CMOS实现方式的总晶体管数量，一种基于因式分解形式，另一种基于未因式分解的“积之和”形式。\n\n静态互补CMOS逻辑设计的基本原理是，对于任何给定的逻辑函数，逻辑门都由两个网络组成：一个上拉网络（PUN）和一个下拉网络（PDN）。PUN使用 $p$ 沟道金属氧化物半导体（pMOS）晶体管构建，将输出节点连接到高电压源 $V_{DD}$（逻辑 $1$）。PDN使用 $n$ 沟道金属氧化物半导体（nMOS）晶体管构建，将输出节点连接到地 $V_{SS}$（逻辑 $0$）。这两个网络是互补的：当一个导通时，另一个截止。\n\n单级静态CMOS门本质上是反相的。为了实现一个非反相函数 $f$，标准方法是设计PDN来实现其补函数 $\\bar{f}$。PDN在且仅在 $\\bar{f}=1$（或 $f=0$）时创建一条到地的通路。PUN被构建为PDN的拓扑对偶。这个对偶的PUN在且仅在 $f=1$ 时创建一条到 $V_{DD}$ 的通路。问题规定只计算复杂门本身的晶体管，这意味着在单个门的输出端实现函数 $f$。这证实了所描述的PDN/PUN结构。\n\n串并联网络的构建规则如下：\n- 对于PDN（nMOS）：串联的晶体管实现逻辑与（AND）操作，并联的晶体管实现逻辑或（OR）操作。\n- 对于PUN（pMOS）：由于德摩根定律和pMOS的低电平有效行为，串联的晶体管实现对反相输入的逻辑或（OR）操作，而并联的晶体管实现对反相输入的逻辑与（AND）操作。\n\n这些规则和网络对偶性质的一个直接推论是，PDN中的晶体管数量等于 $\\bar{f}$ 的布尔表达式中文字（literal）的数量。同样，PUN中的晶体管数量等于 $f$ 的对偶表达式中的文字数量。对于互补门，PUN中的晶体管数量等于PDN中的晶体管数量。因此，总晶体管数量是用于推导网络结构的表达式中文字数量的 $2$ 倍。问题声明只允许使用串并联网络，这意味着如果一个文字在表达式中多次出现，除非在串并联约束内可以进行简化，否则每次出现都必须用一个独立的晶体管来实现。\n\n让我们分析这两种情况。\n\n**情况1：因式分解实现**\n函数以其因式分解形式给出 $f = (A+B)C+D$。\n要设计PDN，我们首先需要求其补函数 $\\bar{f}$。使用德摩根定律：\n$$ \\bar{f} = \\overline{(A+B)C+D} = \\overline{((A+B)C)} \\cdot \\bar{D} = (\\overline{(A+B)} + \\bar{C}) \\cdot \\bar{D} = (\\bar{A}\\bar{B} + \\bar{C})\\bar{D} $$\n问题指出，补码输入（$A', B', C', D'$）是可用的。因此，我们可以设计PDN来直接实现逻辑 $L = (A'B' + C')D'$，其中晶体管门的输入信号是 $A', B', C', D'$。\nPDN的拓扑结构由此表达式推导得出：\n- 项 $A'B'$ 对应于一个由 $A'$ 控制的nMOS晶体管与一个由 $B'$ 控制的nMOS晶体管串联。\n- 项 $+ C'$ 对应于将 $A'B'$ 的串联组合与一个由 $C'$ 控制的nMOS晶体管并联。\n- 最终的项 $\\cdot D'$ 对应于将整个并联结构与一个由 $D'$ 控制的nMOS晶体管串联。\n此表达式中的文字是 $A', B', C', D'$。共有 $4$ 个不同的文字。因此，PDN需要 $4$ 个nMOS晶体管。\n\nPUN是PDN的拓扑对偶。\n- PDN：（（$A'$ 串联 $B'$）并联 $C'$）串联 $D'$\n- PUN：（（$A'$ 并联 $B'$）串联 $C'$）并联 $D'$\n这个PUN结构需要 $4$ 个pMOS晶体管，每个文字一个。\n因式分解实现方式的总晶体管数量是PDN和PUN中晶体管数量的总和。\n$$ \\text{总数}_{\\text{因式分解}} = (\\text{nMOS晶体管数}) + (\\text{pMOS晶体管数}) = 4 + 4 = 8 $$\n\n**情况2：未因式分解的“积之和”实现**\n函数以其未因式分解的积之和（SOP）形式给出 $f = AC + BC + D$。\n要设计PDN，我们同样先求其补函数 $\\bar{f}$：\n$$ \\bar{f} = \\overline{AC + BC + D} = (\\overline{AC}) \\cdot (\\overline{BC}) \\cdot \\bar{D} = (\\bar{A}+\\bar{C}) \\cdot (\\bar{B}+\\bar{C}) \\cdot \\bar{D} $$\n这个表达式是和之积（POS）形式，适合在PDN中直接实现。使用可用的补码输入 $A', B', C', D'$，PDN实现逻辑 $L = (A'+C')(B'+C')D'$。\nPDN的拓扑结构由此表达式推导得出：\n- 项 $(A'+C')$ 对应于一个用于 $A'$ 的nMOS晶体管与一个用于 $C'$ 的nMOS晶体管并联。\n- 项 $(B'+C')$ 对应于一个用于 $B'$ 的nMOS晶体管与一个用于 $C'$ 的nMOS晶体管并联。\n- 三个乘积项是串联的。\n总的PDN结构是：（并联组1）串联（并联组2）串联（单个晶体管）。\n- 并联组1：nMOS($A'$) || nMOS($C'_1$)\n- 并联组2：nMOS($B'$) || nMOS($C'_2$)\n- 单个晶体管：nMOS($D'$)\n文字 $C'$ 出现在两个独立的并联组中，而这两个并联组本身是串联的。由于只能使用串并联网络的约束，用于 $C'$ 的晶体管不能在这两个组之间共享。共享会创建一个非串并联（桥式）结构。因此，必须使用两个由 $C'$ 控制的独立晶体管，记为 $C'_1$ 和 $C'_2$。\n构建PDN所需的文字是 $A', C', B', C', D'$。文字的数量为 $5$。这需要 $5$ 个nMOS晶体管。\n\nPUN是此PDN的对偶。\n- PDN：（（$A'$ 并联 $C'_1$）串联（$B'$ 并联 $C'_2$）串联 $D'$）\n- PUN：（（$A'$ 串联 $C'_1$）并联（$B'$ 串联 $C'_2$）并联 $D'$）\nPUN将需要 $5$ 个pMOS晶体管。\n未因式分解实现方式的总晶体管数量为：\n$$ \\text{总数}_{\\text{未因式分解}} = (\\text{nMOS晶体管数}) + (\\text{pMOS晶体管数}) = 5 + 5 = 10 $$\n\n因式分解的实现方式效率更高，需要 $8$ 个晶体管，而未因式分解的SOP实现方式需要 $10$ 个晶体管。最终答案要求以一个双元素行向量的形式给出，分别包含因式分解实现的总数和未因式分解实现的总数。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n8  10\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在NAND门或更复杂的逻辑门中，串联的晶体管堆叠结构非常常见，但它会引入显著的延迟代价。这种延迟源于串联电阻的累加以及内部节点寄生电容的充放电效应。本练习运用Elmore延迟模型，量化分析一个四晶体管堆叠下拉网络相比单个晶体管所带来的延迟惩罚，帮助你深入理解复杂逻辑门性能分析的关键 ()。",
            "id": "4301010",
            "problem": "一个静态互补金属氧化物半导体 (CMOS) 逻辑门实现了一个下拉网络，该网络由四个相同的 n 沟道金属氧化物半导体场效应晶体管 (nMOSFET) 串联堆叠而成，在输出下降沿期间，每个 nMOSFET 的导通电阻被建模为常数 $r$。输出节点驱动一个外部负载电容 $C_L$。由于源/漏结和布线寄生效应，下拉路径中的每个扩散节点（输出节点处的顶部晶体管的漏极以及三个内部串联结点）都对地呈现一个寄生集总电容 $c$。忽略米勒耦合和栅电容，并假设输入阶跃瞬时切换该堆叠，从而该网络可以被视为一个对输出进行放电的线性电阻-电容 (RC) 树。\n\n使用针对 RC 树的 Elmore 延迟近似，为以下两种情况建模其输出下降延迟：\n- 一个四堆叠 nMOS 下拉路径，以及\n- 一个具有相同导通电阻 $r$、驱动相同负载 $C_L$ 并在输出节点具有相同漏极扩散电容 $c$ 的单一 nMOS 晶体管，\n\n两者都以输出节点为汇点，RC 树的源位于导电路径底部的地。计算延迟惩罚，其定义为四堆叠路径的 Elmore 延迟与单晶体管路径的 Elmore 延迟之比。将您的最终答案表示为关于 $c$ 和 $C_L$ 的单个闭式解析表达式。无需四舍五入，答案是无量纲的（没有单位）。",
            "solution": "在尝试求解之前，对问题陈述进行了严格验证。\n\n步骤 1：提取已知条件\n- 静态互补金属氧化物半导体 (CMOS) 逻辑门。\n- 下拉网络：四个相同的 nMOSFET 串联堆叠。\n- 每个 nMOSFET 的导通电阻：$r$。\n- 外部负载电容：$C_L$。\n- 四个扩散节点（一个输出，三个内部）上各自的寄生电容：$c$。\n- 模型：线性电阻-电容 (RC) 树。\n- 方法：Elmore 延迟近似。\n- 目标：计算四堆叠路径的 Elmore 延迟与单晶体管路径的 Elmore 延迟之比。\n- 参考：输出节点为汇点，RC 树的源为地。\n\n步骤 2：使用提取的已知条件进行验证\n该问题具有科学依据，因为它使用了 Elmore 延迟模型，这是集成电路分析中用于 RC 网络延迟的一种标准且被广泛接受的一阶近似方法。带有寄生电容的堆叠式 nMOS 下拉网络的描述是数字 VLSI 设计中的一个典型问题。该问题是适定的，它以符号形式提供了所有必要的参数（$r$、$c$、$C_L$），以便为所求的比率推导出唯一的解析解。语言客观且精确。该问题不违反任何无效性标准。它在集成电路领域是一个可形式化、完整、现实且结构良好的问题。\n\n步骤 3：结论与行动\n该问题被判定为有效。将提供完整的解决方案。\n\nRC 树中特定节点 $i$ 的 Elmore 延迟 $\\tau_i$ 定义为树中所有电容的电容值与其到源（地）的路径中，与从源到节点 $i$ 的路径共享部分电阻的乘积之和。在数学上，这表示为：\n$$\n\\tau_i = \\sum_{k} R_{ki} C_k\n$$\n其中 $C_k$ 是节点 $k$ 处的电容，$R_{ki}$ 是从源到节点 $i$ 的路径与从源到节点 $k$ 的路径之间共享的公共路径的电阻。RC 树的源处于地电位。\n\n首先，我们对单个 nMOS 晶体管路径进行建模。\n将输出节点指定为节点 $1$。晶体管的导通电阻 $r$ 将此节点连接到地。问题陈述指出，输出节点具有漏极扩散电容 $c$ 并驱动外部负载 $C_L$。因此，节点 $1$ 处的总电容为 $C_1 = C_L + c$。\nRC 模型由一个连接在节点 $1$ 和地之间的电阻 $r$ 以及一个连接在节点 $1$ 和地之间的电容 $C_1$ 组成。\n输出端（节点 $1$）的 Elmore 延迟，记为 $\\tau_{D1}$，计算如下。求和中只有 $k=1$ 这一项。从源（地）到节点 $1$ 的路径经过电阻 $r$。从源到节点 $1$ 处电容的路径也经过电阻 $r$。因此，共享路径电阻 $R_{11}$ 是从源到节点 $1$ 的整个路径电阻，即 $r$。\n$$\n\\tau_{D1} = R_{11} C_1 = r (C_L + c)\n$$\n\n其次，我们对四堆叠 nMOS 下拉路径进行建模。\n该路径可以建模为线性 RC 梯形网络。我们从接地处向上对节点进行编号。\n- 节点 $0$：地（源）。\n- 节点 $1$：第一个（底部）晶体管上方的内部节点。\n- 节点 $2$：第二个晶体管上方的内部节点。\n- 节点 $3$：第三个晶体管上方的内部节点。\n- 节点 $4$：输出节点，即第四个（顶部）晶体管的漏极。\n\n每个晶体管贡献一个串联电阻 $r$。电阻连接如下：\n- 一个电阻 $r$ 连接在节点 $1$ 和节点 $0$ 之间。\n- 一个电阻 $r$ 连接在节点 $2$ 和节点 $1$ 之间。\n- 一个电阻 $r$ 连接在节点 $3$ 和节点 $2$ 之间。\n- 一个电阻 $r$ 连接在节点 $4$ 和节点 $3$ 之间。\n\n问题陈述指出，三个内部结点中的每一个以及输出节点都有一个寄生电容 $c$。输出节点还驱动负载 $C_L$。因此，电容为：\n- 节点 $1$ 处为 $C_1 = c$。\n- 节点 $2$ 处为 $C_2 = c$。\n- 节点 $3$ 处为 $C_3 = c$。\n- 节点 $4$ 处为 $C_4 = C_L + c$。\n\n我们需要计算输出端（即节点 $4$）的 Elmore 延迟，记为 $\\tau_{D4}$。\n$$\n\\tau_{D4} = \\sum_{k=1}^{4} R_{k4} C_k = R_{14} C_1 + R_{24} C_2 + R_{34} C_3 + R_{44} C_4\n$$\n项 $R_{k4}$ 是从源（地）到节点 $k$ 的路径电阻，因为在此串联拓扑中，这是与从源到节点 $4$ 的路径共享的路径段。\n- 从源到节点 $1$ 的路径电阻为 $R_{14} = r$。\n- 从源到节点 $2$ 的路径电阻为 $R_{24} = r + r = 2r$。\n- 从源到节点 $3$ 的路径电阻为 $R_{34} = r + r + r = 3r$。\n- 从源到节点 $4$ 的路径电阻为 $R_{44} = r + r + r + r = 4r$。\n\n将这些电阻值和电容值代入 Elmore 延迟公式：\n$$\n\\tau_{D4} = (r)(c) + (2r)(c) + (3r)(c) + (4r)(C_L + c)\n$$\n我们可以提出因子 $r$ 并简化表达式：\n$$\n\\tau_{D4} = rc + 2rc + 3rc + 4rC_L + 4rc\n$$\n$$\n\\tau_{D4} = (1 + 2 + 3 + 4)rc + 4rC_L\n$$\n$$\n\\tau_{D4} = 10rc + 4rC_L = r(10c + 4C_L)\n$$\n\n最后，我们计算延迟惩罚，即四堆叠延迟与单晶体管延迟之比。\n$$\n\\text{Delay Penalty} = \\frac{\\tau_{D4}}{\\tau_{D1}} = \\frac{r(10c + 4C_L)}{r(C_L + c)}\n$$\n电阻项 $r$ 被消掉，留下最终表达式仅含 $c$ 和 $C_L$：\n$$\n\\text{Delay Penalty} = \\frac{10c + 4C_L}{c + C_L}\n$$\n该表达式也可以写成：\n$$\n\\frac{4(c + C_L) + 6c}{c + C_L} = 4 + \\frac{6c}{c + C_L}\n$$\n所要求的形式是单个闭式解析表达式，对此，分数形式最为直接。",
            "answer": "$$\n\\boxed{\\frac{10c + 4C_L}{c + C_L}}\n$$"
        }
    ]
}
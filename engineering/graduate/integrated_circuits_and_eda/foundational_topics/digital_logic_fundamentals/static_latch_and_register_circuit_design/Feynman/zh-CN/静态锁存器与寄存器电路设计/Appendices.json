{
    "hands_on_practices": [
        {
            "introduction": "要设计出可靠的时序电路，首先必须深刻理解时序参数的物理本质。建立时间（setup time）并非一个抽象的约束，而是由晶体管的电阻和节点的电容共同决定的物理过程。本练习将引导你从第一性原理出发，通过分析一个简化的$RC$充电模型，推导出静态锁存器建立时间的表达式，从而将宏观的时序要求与底层的电路行为联系起来。",
            "id": "4301282",
            "problem": "考虑一个用于寄存器设计的电子设计自动化 (EDA) 流程中的静态互补金属氧化物半导体 (CMOS) 传输门锁存器。在透明阶段，数据输入通过一个导通电阻为常数 $R_{on}$ 的传输门来驱动内部存储节点。存储节点被建模为对地电容为 $C$ 的单个集总电容，并且是下游反相器的输入。假设在时间 $t=0$ 时，数据经历一次上升沿跳变，该跳变被建模为从 $0$ 到高逻辑电平 $V_{H}$ 的理想阶跃，并且当存储节点电压首次达到其输入阈值 $V_{T}$ 时（其中 $0  V_T  V_H$），反相器发生翻转。此外，该锁存器是理想的：忽略漏电流、再生效应、体效应以及 $R_{on}$ 或 $C$ 的任何电压依赖性。\n\n请仅使用电阻和电容的基本关系以及存储节点的电荷守恒，从第一性原理推导在非透明边沿之前所需的最小数据建立时间 $t_{setup}$ 的解析表达式。此处 $t_{setup}$ 定义为从 $t=0$ 到存储节点电压越过反相器阈值 $V_{T}$ 的时间。您的推导必须从关系式 $i_{R} = \\frac{v_{s}-v(t)}{R_{on}}$、$i_{C} = C \\frac{dv(t)}{dt}$ 以及存储节点处的基尔霍夫电流定律开始，其中 $v_{s}$ 是驱动源电压，在 $t \\geq 0$ 时等于 $V_{H}$，$v(t)$ 是存储节点电压。假设初始条件为 $v(0)=0$。\n\n请将您关于 $t_{setup}$ 的最终答案表示为用 $R_{on}$、$C$、$V_{T}$ 和 $V_{H}$ 表示的闭式解析表达式。如果您之后对此表达式进行数值计算，时间单位请用秒表示。解析表达式无需近似或四舍五入。",
            "solution": "问题陈述已经过验证，被认为是有效的。它具有科学依据，提法恰当，客观，并包含推导唯一且有意义的解所需的所有必要信息。该问题描述了一个经典的一阶 RC 电路，这是集成电路分析中的一个基本模型。\n\n任务是推导静态 CMOS 锁存器的建立时间 $t_{setup}$ 的表达式。这个时间定义为：当通过一个电阻 $R_{on}$ 由一个从 $0$ 到 $V_{H}$ 的阶跃输入驱动时，存储电容器上的电压 $v(t)$ 从初始值 $v(0)=0$ 上升到阈值电压 $V_{T}$ 所需的时间。推导将从所提供的第一性原理开始。\n\n该电路可以建模为一个串联 RC 电路，其中输入电压源 $v_s$ 连接到一个电阻 $R_{on}$，该电阻又连接到一个电容 $C$。输出电压 $v(t)$ 是电容器两端的电压。\n\n问题提供了以下基本关系：\n1.  通过电阻的电流 $i_{R}$ 由欧姆定律给出：$i_{R} = \\frac{v_{s}-v(t)}{R_{on}}$。对于 $t \\geq 0$，源电压恒为 $v_{s} = V_{H}$，因此表达式变为 $i_{R} = \\frac{V_{H}-v(t)}{R_{on}}$。\n2.  通过电容的电流 $i_{C}$ 由基本电容 I-V 关系给出：$i_{C} = C \\frac{dv(t)}{dt}$。\n\n我们在存储节点（即电阻和电容之间的节点）处应用基尔霍夫电流定律 (KCL)。根据 KCL，流入节点的电流之和必须等于流出节点的电流之和。在这个简单电路中，从电阻流出的电流必须等于流入电容的电流。\n$$i_{R} = i_{C}$$\n代入给定的 $i_{R}$ 和 $i_{C}$ 表达式：\n$$\\frac{V_{H}-v(t)}{R_{on}} = C \\frac{dv(t)}{dt}$$\n这是一个一阶线性常微分方程 (ODE)，它描述了存储节点电压 $v(t)$ 随时间变化的行为。为了求解 $v(t)$，我们将方程重排为标准形式：\n$$\\frac{dv(t)}{dt} + \\frac{1}{R_{on}C} v(t) = \\frac{V_{H}}{R_{on}C}$$\n形式为 $\\frac{dy}{dt} + P(t)y = Q(t)$ 的常微分方程的通解可以通过将齐次解和特解相加得到。齐次方程是：\n$$\\frac{dv_{h}(t)}{dt} + \\frac{1}{R_{on}C} v_{h}(t) = 0$$\n这个齐次方程的解的形式为 $v_{h}(t) = A \\exp(-t/\\tau)$，其中 $\\tau = R_{on}C$ 是电路的时间常数，$A$ 是一个积分常数。\n$$v_{h}(t) = A \\exp\\left(-\\frac{t}{R_{on}C}\\right)$$\n特解，或稳态解，对应于 $t \\to \\infty$ 时电路的状态。在此极限下，电容器完全充电，电流停止流动，因此 $\\frac{dv(t)}{dt} = 0$。将此代入常微分方程得到：\n$$0 + \\frac{1}{R_{on}C} v_{ss}(t) = \\frac{V_{H}}{R_{on}C}$$\n其中 $v_{ss}(t)$ 是稳态电压。这可以简化为：\n$$v_{ss}(t) = V_{H}$$\n$v(t)$ 的完整解是齐次解和特解之和：\n$$v(t) = v_{h}(t) + v_{ss}(t) = A \\exp\\left(-\\frac{t}{R_{on}C}\\right) + V_{H}$$\n我们利用问题陈述中给出的初始条件 $v(0)=0$ 来确定常数 $A$。\n$$v(0) = A \\exp(0) + V_{H} = A + V_{H} = 0$$\n解出 $A$，我们得到 $A = -V_{H}$。\n\n将 $A$ 的值代回通解，得到 $t \\geq 0$ 时存储节点电压的特解：\n$$v(t) = V_{H} - V_{H} \\exp\\left(-\\frac{t}{R_{on}C}\\right)$$\n这可以因式分解为：\n$$v(t) = V_{H} \\left(1 - \\exp\\left(-\\frac{t}{R_{on}C}\\right)\\right)$$\n这个方程描述了充电电容器上的电压随时间变化的函数。\n\n问题将建立时间 $t_{setup}$ 定义为存储节点电压 $v(t)$ 达到反相器阈值电压 $V_{T}$ 所需的时间。我们通过设 $v(t) = V_{T}$ 并求解 $t = t_{setup}$ 来找到这个时间。\n$$V_{T} = V_{H} \\left(1 - \\exp\\left(-\\frac{t_{setup}}{R_{on}C}\\right)\\right)$$\n为了分离出 $t_{setup}$，我们首先除以 $V_{H}$：\n$$\\frac{V_{T}}{V_{H}} = 1 - \\exp\\left(-\\frac{t_{setup}}{R_{on}C}\\right)$$\n接下来，我们重排各项以分离出指数函数：\n$$\\exp\\left(-\\frac{t_{setup}}{R_{on}C}\\right) = 1 - \\frac{V_{T}}{V_{H}}$$\n为了求解指数，我们对两边取自然对数 ($\\ln$)：\n$$-\\frac{t_{setup}}{R_{on}C} = \\ln\\left(1 - \\frac{V_{T}}{V_{H}}\\right)$$\n最后，我们通过乘以 $-R_{on}C$ 来求解 $t_{setup}$：\n$$t_{setup} = -R_{on}C \\ln\\left(1 - \\frac{V_{T}}{V_{H}}\\right)$$\n条件 $0  V_T  V_H$ 确保了对数的参数 $1 - \\frac{V_{T}}{V_{H}}$ 介于 $0$ 和 $1$ 之间。在这个范围内的数的自然对数是负数，这会抵消前面的负号，从而如预期一样，得到一个正值的 $t_{setup}$。\n\n利用对数性质 $-\\ln(x) = \\ln(1/x)$，可以推导出另一种等价形式：\n$$t_{setup} = R_{on}C \\ln\\left(\\frac{1}{1 - \\frac{V_{T}}{V_{H}}}\\right)$$\n简化对数内的分数，得到最终的闭式解析表达式：\n$$t_{setup} = R_{on}C \\ln\\left(\\frac{V_{H}}{V_{H} - V_{T}}\\right)$$\n这是锁存器可靠捕获数据所需的最小建立时间。",
            "answer": "$$\\boxed{R_{on}C \\ln\\left(\\frac{V_{H}}{V_{H} - V_{T}}\\right)}$$"
        },
        {
            "introduction": "在掌握了单个锁存器的时序基础后，下一步是学习如何将这些基本单元组合成更复杂的时序元件，例如边沿触发寄存器。一个典型的正沿触发寄存器由主从两个锁存器构成，其整体的时序特性（如建立时间、保持时间和时钟到输出延迟）是由其内部锁存器的参数和时钟方案共同决定的。通过本练习，你将学会如何从组件级的时序规范推导出系统级的时序规范，这是数字系统设计中的一项核心技能。",
            "id": "4301260",
            "problem": "考虑一个在集成电路的电子设计自动化（EDA）领域中，由一个主从电平敏感锁存器对实现的上升沿触发寄存器。当时钟输入 $CLK$ 为低电平时，主锁存器透明；当 $CLK$ 为高电平时，从锁存器透明。为防止透明窗口重叠和组合逻辑馈通，时钟方案在上升沿周围引入了非重叠窗口。设寄存器处 $CLK$ 的上升沿为参考时间 $t=0$。主锁存器在时间 $t=-t_{\\text{gap}}^{-}$（上升沿前的非重叠裕量）变为不透明，从锁存器在时间 $t=+t_{\\text{gap}}^{+}$（上升沿后的非重叠裕量）变为透明。假设理想的单源时钟，并忽略寄存器内部的时钟分布偏斜。\n\n每个锁存器 $L$ 的时序定义如下，参考于 $L$ 从透明转换到不透明的瞬间：建立时间 $t_{\\text{setup},L}$ 是关闭事件之前数据输入必须保持稳定的最小时间间隔，保持时间 $t_{\\text{hold},L}$ 是关闭事件之后数据输入必须保持稳定以保证正确捕获的最小时间间隔。当锁存器透明时，其数据端口的稳定输入以数据到输出的传播时间 $t_{\\text{pd},L}$ 传播到其输出。\n\n给定以下参数：\n- 主锁存器建立时间 $t_{\\text{setup},M} = 24\\,\\text{ps}$ 和保持时间 $t_{\\text{hold},M} = 16\\,\\text{ps}$。\n- 从锁存器建立时间 $t_{\\text{setup},S} = 20\\,\\text{ps}$ 和保持时间 $t_{\\text{hold},S} = 15\\,\\text{ps}$。\n- 从锁存器透明时的数据到输出传播延迟 $t_{\\text{pd},S} = 70\\,\\text{ps}$。\n- 上升沿前的非重叠裕量 $t_{\\text{gap}}^{-} = 35\\,\\text{ps}$ 和上升沿后的非重叠裕量 $t_{\\text{gap}}^{+} = 45\\,\\text{ps}$。\n\n请明确地从上述锁存器时序定义和所描述的非重叠时钟方案出发，不使用任何预先记忆的复合寄存器公式，推导相对于 $t=0$ 处上升沿的有效寄存器级建立时间 $t_{\\text{setup,reg}}$ 和保持时间 $t_{\\text{hold,reg}}$，以及相对于同一上升沿的有效寄存器时钟到输出延迟 $t_{\\text{CQ,reg}}$ 的表达式。然后使用给定的数值计算这些表达式的值。\n\n以皮秒为单位表示你的最终数值结果。将你的答案四舍五入到三位有效数字。以包含 $(t_{\\text{setup,reg}},\\,t_{\\text{hold,reg}},\\,t_{\\text{CQ,reg}})$ 的行矩阵形式提供你的最终答案。",
            "solution": "该问题是有效的，因为它科学地基于数字集成电路时序的原理，问题提出得当，提供了足够的信息以获得唯一解，并且陈述客观。我们将从给定的组成锁存器的基本定义和指定的时钟方案推导出寄存器级的时序参数。\n\n该寄存器是一个上升沿触发的主从触发器。有效时钟沿是外部时钟 $CLK$ 的上升沿，发生在参考时间 $t=0$。主锁存器在 $CLK$ 低电平时透明，从锁存器在 $CLK$ 高电平时透明。使用非重叠时钟方案：\n1.  主锁存器在时间 $t_M = -t_{\\text{gap}}^{-}$ 关闭（变为不透明），在 $CLK$ 上升沿之前。这是主锁存器的关闭事件。\n2.  从锁存器在时间 $t_S = +t_{\\text{gap}}^{+}$ 打开（变为透明），在 $CLK$ 上升沿之后。\n\n所有锁存器级别的时序参数（$t_{\\text{setup},L}$, $t_{\\text{hold},L}$）都是相对于锁存器的关闭事件定义的。\n\n**1. 寄存器建立时间 ($t_{\\text{setup,reg}}$) 的推导**\n\n寄存器建立时间 $t_{\\text{setup,reg}}$ 是有效时钟沿（$t=0$）之前寄存器数据输入 $D$ 必须保持稳定的最小时间间隔。这个要求是由主锁存器需要可靠地捕获数据所决定的。\n\n主锁存器的关闭事件发生在 $t = -t_{\\text{gap}}^{-}$。根据其定义，主锁存器的建立时间 $t_{\\text{setup},M}$ 要求其输入（寄存器的输入 $D$）必须在此关闭事件*之前*保持稳定至少 $t_{\\text{setup},M}$ 的时长。\n\n因此，数据 $D$ 必须在时间 $t_{\\text{stable}}$ 或之前稳定：\n$$t_{\\text{stable}} = (\\text{主锁存器关闭时间}) - t_{\\text{setup},M} = -t_{\\text{gap}}^{-} - t_{\\text{setup},M}$$\n寄存器建立时间 $t_{\\text{setup,reg}}$ 是从 $t_{\\text{stable}}$ 到参考时钟沿 $t=0$ 的这段稳定性要求的持续时间。\n$$t_{\\text{setup,reg}} = 0 - t_{\\text{stable}} = 0 - (-t_{\\text{gap}}^{-} - t_{\\text{setup},M})$$\n$$t_{\\text{setup,reg}} = t_{\\text{gap}}^{-} + t_{\\text{setup},M}$$\n\n**2. 寄存器保持时间 ($t_{\\text{hold,reg}}$) 的推导**\n\n寄存器保持时间 $t_{\\text{hold,reg}}$ 是有效时钟沿（$t=0$）*之后*寄存器数据输入 $D$ 必须保持稳定的最小时间间隔。这个约束确保了时钟沿之后的数据变化不会破坏主锁存器正在锁存的值。\n\n主锁存器的保持时间 $t_{\\text{hold},M}$ 要求其输入 $D$ 在其关闭事件 $t=-t_{\\text{gap}}^{-}$ *之后*保持稳定至少 $t_{\\text{hold},M}$ 的时长。\n\n因此，数据 $D$ 必须保持稳定至少到时间 $t_{\\text{hold\\_until}}$：\n$$t_{\\text{hold\\_until}} = (\\text{主锁存器关闭时间}) + t_{\\text{hold},M} = -t_{\\text{gap}}^{-} + t_{\\text{hold},M}$$\n寄存器保持时间 $t_{\\text{hold,reg}}$ 是这个时间点相对于参考时钟沿 $t=0$ 的值。正值表示数据必须在时钟沿之后保持，而负值表示数据可以在时钟沿之前改变。\n$$t_{\\text{hold,reg}} = t_{\\text{hold\\_until}} - 0 = -t_{\\text{gap}}^{-} + t_{\\text{hold},M}$$\n$$t_{\\text{hold,reg}} = t_{\\text{hold},M} - t_{\\text{gap}}^{-}$$\n\n**3. 寄存器时钟到输出延迟 ($t_{\\text{CQ,reg}}$) 的推导**\n\n寄存器时钟到输出延迟 $t_{\\text{CQ,reg}}$ 是从有效时钟沿（$t=0$）到新数据出现在寄存器输出 $Q$ 的时间。输出 $Q$ 是从锁存器的输出。\n\n从锁存器在时间 $t = +t_{\\text{gap}}^{+}$ 变为透明。在这一刻，主锁存器的稳定输出被呈现给从锁存器的输入。数据然后通过透明的从锁存器传播。这个传播所花费的时间是从锁存器的数据到输出传播延迟 $t_{\\text{pd},S}$。\n\n寄存器输出 $Q$ 在等于从锁存器打开时间及其传播延迟之和的时间点变为有效：\n$$t_{Q\\_\\text{valid}} = (\\text{从锁存器打开时间}) + t_{\\text{pd},S} = +t_{\\text{gap}}^{+} + t_{\\text{pd},S}$$\n寄存器的时钟到输出延迟是从参考时钟沿 $t=0$ 测量的这个时间间隔。\n$$t_{\\text{CQ,reg}} = t_{Q\\_\\text{valid}} - 0 = t_{\\text{gap}}^{+} + t_{\\text{pd},S}$$\n\n**数值计算**\n\n给定以下参数值：\n- $t_{\\text{setup},M} = 24\\,\\text{ps}$\n- $t_{\\text{hold},M} = 16\\,\\text{ps}$\n- $t_{\\text{pd},S} = 70\\,\\text{ps}$\n- $t_{\\text{gap}}^{-} = 35\\,\\text{ps}$\n- $t_{\\text{gap}}^{+} = 45\\,\\text{ps}$\n\n将这些值代入推导出的表达式中：\n\n对于建立时间：\n$$t_{\\text{setup,reg}} = 35\\,\\text{ps} + 24\\,\\text{ps} = 59\\,\\text{ps}$$\n\n对于保持时间：\n$$t_{\\text{hold,reg}} = 16\\,\\text{ps} - 35\\,\\text{ps} = -19\\,\\text{ps}$$\n负的保持时间是一个有效结果，表明输入数据可以在时钟沿前 $19\\,\\text{ps}$ 改变而不会影响捕获的值。\n\n对于时钟到输出延迟：\n$$t_{\\text{CQ,reg}} = 45\\,\\text{ps} + 70\\,\\text{ps} = 115\\,\\text{ps}$$\n\n题目要求将最终数值结果四舍五入到三位有效数字。\n- $t_{\\text{setup,reg}} = 59\\,\\text{ps} \\rightarrow 59.0\\,\\text{ps}$\n- $t_{\\text{hold,reg}} = -19\\,\\text{ps} \\rightarrow -19.0\\,\\text{ps}$\n- $t_{\\text{CQ,reg}} = 115\\,\\text{ps}$（已经是三位有效数字）\n\n最终答案是三元组 ($t_{\\text{setup,reg}},\\,t_{\\text{hold,reg}},\\,t_{\\text{CQ,reg}}$)。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n59.0  -19.0  115\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "电路分析与电路设计是相辅相成的。在能够分析寄存器的时序之后，一个更重要的问题是如何进行设计以实现性能最优化，例如最小化延迟。逻辑努力（Logical Effort）方法为此提供了一个强大而简洁的框架，用于指导晶体管尺寸的选取。本练习将带你应用逻辑努力理论，为一个给定的时钟到输出路径进行尺寸优化，从而在满足约束的条件下实现最快的速度。",
            "id": "4301265",
            "problem": "一个在互补金属氧化物半导体（CMOS）中实现的电平敏感静态寄存器级使用一个传输门，后跟两个反相器：第一个反相器构成锁存器的存储节点，第二个反相器驱动外部负载。时钟到$Q$的路径被建模为一个三级路径，包括第$1$级（传输门）、第$2$级（第一个反相器）和第$3$级（输出反相器）。假设逻辑努力（LE）延迟模型适用，其中第 $i$ 级的延迟为 $d_i = g_i h_i + p_i$，以参考反相器延迟为单位，其中 $g_i$ 是逻辑努力，$h_i$ 是电学努力比 $C_{\\text{out},i}/C_{\\text{in},i}$，$p_i$ 是寄生延迟。一个最小尺寸参考反相器的输入电容为 $C_{\\mathrm{ref}}$。\n\n传输门的逻辑努力为 $g_{\\mathrm{TG}} = \\gamma$，寄生延迟为 $p_{\\mathrm{TG}} = \\pi_{\\mathrm{TG}}$。每个反相器的逻辑努力为 $g_{\\mathrm{INV}} = 1$，寄生延迟为 $p_{\\mathrm{INV}} = p$。时钟驱动器在其输出端最多能承受 $C_{\\mathrm{clk,max}} = 16\\,C_{\\mathrm{ref}}$ 的电容，外部负载为 $C_L = 1024\\,C_{\\mathrm{ref}}$。忽略互连寄生参数以及任何体效应或速度饱和效应，并假设传输门的尺寸被精确地设置为满足时钟输入电容的限制，即 $C_{\\mathrm{in,1}} = C_{\\mathrm{clk,max}}$。\n\n从逻辑努力方法论和寄生延迟模型的基本定义出发，推导在给定的扇出和约束条件下，能够最小化总时钟到$Q$延迟的三级电路（$S_1$、$S_2$ 和 $S_3$）的尺寸（相对于 $C_{\\mathrm{ref}}$ 进行归一化），其中 $S_i \\triangleq C_{\\mathrm{in},i}/C_{\\mathrm{ref}}$。使用数值 $C_{\\mathrm{clk,max}} = 16\\,C_{\\mathrm{ref}}$ 和 $C_L = 1024\\,C_{\\mathrm{ref}}$，将你的最终答案表示为一个关于 $\\gamma$ 的单一封闭形式解析行矩阵。最终表达式中不要求四舍五入，也不应包含物理单位。",
            "solution": "问题陈述经评估为**有效**。它在科学上基于已建立的用于CMOS电路设计的逻辑努力方法论，内容自洽且一致，并提供了推导唯一解所需的所有必要信息。其语言精确客观，允许进行形式化且严谨的分析。\n\n该问题要求确定三级寄存器路径的最优尺寸 $S_1$、$S_2$ 和 $S_3$，以最小化总的时钟到$Q$延迟。该路径由一个传输门（第1级）和其后的两个反相器（第2级和第3级）组成。第 $i$ 级的尺寸定义为 $S_i = C_{\\mathrm{in},i}/C_{\\mathrm{ref}}$，其中 $C_{\\mathrm{in},i}$ 是该级的输入电容，$C_{\\mathrm{ref}}$ 是最小尺寸参考反相器的输入电容。\n\n路径上的总延迟 $D$ 是各级延迟之和，由标准逻辑努力延迟模型给出：\n$$D = \\sum_{i=1}^{3} d_i = \\sum_{i=1}^{3} (g_i h_i + p_i)$$\n其中 $g_i$ 是逻辑努力，$h_i$ 是电学努力，$p_i$ 是第 $i$ 级的寄生延迟。总延迟可以分解为一个努力延迟分量 $D_E = \\sum g_i h_i$ 和一个寄生延迟分量 $P = \\sum p_i$。由于给定类型门的寄生延迟 $p_i$ 与其尺寸无关，因此总寄生延迟 $P$ 对于各级的尺寸来说是一个常数。因此，最小化总延迟 $D$ 等价于最小化总努力延迟 $D_E$。\n\n各级的参数如下：\n- 第1级（传输门）：$g_1 = g_{\\mathrm{TG}} = \\gamma$。\n- 第2级（反相器）：$g_2 = g_{\\mathrm{INV}} = 1$。\n- 第3级（反相器）：$g_3 = g_{\\mathrm{INV}} = 1$。\n\n每个级的电学努力是其输出电容与输入电容之比，$h_i = C_{\\text{out},i}/C_{\\text{in},i}$。各级串联连接，因此 $C_{\\mathrm{out},1} = C_{\\mathrm{in},2}$ 且 $C_{\\mathrm{out},2} = C_{\\mathrm{in},3}$。最后一级驱动外部负载 $C_L$。\n- $h_1 = C_{\\mathrm{in},2}/C_{\\mathrm{in},1}$\n- $h_2 = C_{\\mathrm{in},3}/C_{\\mathrm{in},2}$\n- $h_3 = C_L/C_{\\mathrm{in},3}$\n\n总努力延迟为：\n$$D_E = g_1 h_1 + g_2 h_2 + g_3 h_3 = \\gamma \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{in},1}} + (1) \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} + (1) \\frac{C_L}{C_{\\mathrm{in},3}}$$\n\n问题给出了以下约束条件：\n- 第一级的输入电容是固定的：$C_{\\mathrm{in},1} = C_{\\mathrm{clk,max}} = 16\\,C_{\\mathrm{ref}}$。\n- 外部负载电容为 $C_L = 1024\\,C_{\\mathrm{ref}}$。\n\n根据第一个约束条件，第一级的尺寸 $S_1$ 可以立即确定：\n$$S_1 = \\frac{C_{\\mathrm{in},1}}{C_{\\mathrm{ref}}} = \\frac{16\\,C_{\\mathrm{ref}}}{C_{\\mathrm{ref}}} = 16$$\n\n在 $C_{\\mathrm{in},1}$ 和 $C_L$ 固定的情况下，优化变量是中间级 $C_{\\mathrm{in},2}$ 和 $C_{\\mathrm{in},3}$ 的输入电容。为了找到最小化 $D_E$ 的值，我们对 $D_E$ 分别求关于 $C_{\\mathrm{in},2}$ 和 $C_{\\mathrm{in},3}$ 的偏导数，并令其为零。\n$$\\frac{\\partial D_E}{\\partial C_{\\mathrm{in},2}} = \\frac{\\gamma}{C_{\\mathrm{in},1}} - \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}^2} = 0 \\implies \\gamma \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{in},1}} = \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} \\implies g_1 h_1 = h_2$$\n由于 $g_2=1$，这等价于 $g_1 h_1 = g_2 h_2$。这意味着第1级的努力 $f_1 = g_1 h_1$ 必须等于第2级的努力 $f_2 = g_2 h_2$。\n\n$$\\frac{\\partial D_E}{\\partial C_{\\mathrm{in},3}} = \\frac{1}{C_{\\mathrm{in},2}} - \\frac{C_L}{C_{\\mathrm{in},3}^2} = 0 \\implies \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} = \\frac{C_L}{C_{\\mathrm{in},3}} \\implies h_2 = h_3$$\n由于 $g_2 = 1$ 且 $g_3 = 1$，这等价于 $g_2 h_2 = g_3 h_3$。这意味着第2级的努力 $f_2 = g_2 h_2$ 必须等于第3级的努力 $f_3 = g_3 h_3$。\n\n结合这些结果，最小延迟的条件是所有级的努力都必须相等：$f_1 = f_2 = f_3 = f$。\n\n总路径努力 $F$ 是路径逻辑努力 $G$ 和路径电学努力 $H$ 的乘积。\n$$G = g_1 g_2 g_3 = \\gamma \\cdot 1 \\cdot 1 = \\gamma$$\n$$H = \\frac{C_{\\mathrm{path,out}}}{C_{\\mathrm{path,in}}} = \\frac{C_L}{C_{\\mathrm{in},1}} = \\frac{1024\\,C_{\\mathrm{ref}}}{16\\,C_{\\mathrm{ref}}} = 64$$\n$$F = GH = 64\\gamma$$\n\n对于一个具有相等级努力 $f$ 的 N 级路径，总路径努力为 $F = f^N$。在我们的例子中，$N=3$，因此最优级努力 $f$ 为：\n$$f = F^{1/3} = (64\\gamma)^{1/3} = 4\\gamma^{1/3}$$\n\n现在我们可以利用每级的努力必须等于这个最优值 $f$ 的条件来确定剩余各级的尺寸。\n对于第1级：\n$$f_1 = g_1 h_1 = \\gamma \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{in},1}} = f$$\n$$\\gamma \\frac{C_{\\mathrm{in},2}}{16\\,C_{\\mathrm{ref}}} = 4\\gamma^{1/3}$$\n$$C_{\\mathrm{in},2} = \\frac{16\\,C_{\\mathrm{ref}} \\cdot 4\\gamma^{1/3}}{\\gamma} = 64\\gamma^{-2/3} C_{\\mathrm{ref}}$$\n因此，第2级的尺寸为：\n$$S_2 = \\frac{C_{\\mathrm{in},2}}{C_{\\mathrm{ref}}} = 64\\gamma^{-2/3}$$\n\n对于第2级：\n$$f_2 = g_2 h_2 = (1) \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} = f$$\n$$\\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{in},2}} = 4\\gamma^{1/3}$$\n$$C_{\\mathrm{in},3} = 4\\gamma^{1/3} \\cdot C_{\\mathrm{in},2} = 4\\gamma^{1/3} \\cdot (64\\gamma^{-2/3} C_{\\mathrm{ref}}) = 256\\gamma^{-1/3} C_{\\mathrm{ref}}$$\n因此，第3级的尺寸为：\n$$S_3 = \\frac{C_{\\mathrm{in},3}}{C_{\\mathrm{ref}}} = 256\\gamma^{-1/3}$$\n\n作为验证，对于第3级：\n$$f_3 = g_3 h_3 = (1) \\frac{C_L}{C_{\\mathrm{in},3}} = \\frac{1024\\,C_{\\mathrm{ref}}}{256\\gamma^{-1/3} C_{\\mathrm{ref}}} = 4\\gamma^{1/3} = f$$\n结果是一致的。\n\n这三级的最优尺寸为 $S_1 = 16$，$S_2 = 64\\gamma^{-2/3}$ 和 $S_3 = 256\\gamma^{-1/3}$。最终答案将以行矩阵的形式给出。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n16  64\\gamma^{-2/3}  256\\gamma^{-1/3}\n\\end{pmatrix}\n}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "互连线引入的信号延迟是衡量其性能最基本的指标。本练习将演示如何将一个现代铜/低κ互连线建模为分布式RC线路。通过应用第一性原理近似，您将计算信号的上升时间，从而在金属化电阻率（$r$）和低κ电介质电容（$c$）的材料属性与最终的电路级性能之间建立起切实的联系。",
            "id": "4282373",
            "problem": "一个布线在低介电常数（low-$\\kappa$）层间电介质中的全局铜互连被建模为均匀分布的电阻-电容（RC）线。该线的长度为 $L$，单位长度电阻为 $r$（由金属化几何形状和散射限制的铜电阻率决定），单位长度电容为 $c$（包括平行板电容和边缘场电容的贡献，由电子设计自动化（EDA）寄生参数提取工具针对低-$\\kappa$ 堆叠结构提取）。该线由一个阶跃源通过一个源（驱动）电阻 $R_{d}$ 驱动，其远端连接到一个高阻抗接收器，因此除了分布式电容外，没有额外的集总负载。假设在所关心的边沿速率下，电感效应可以忽略不计。\n\n从第一性原理出发，以分布式RC线的扩散描述和电荷守恒为起点。通过匹配RC梯形网络的脉冲响应的一阶时间矩，构造远端阶跃响应的有效一阶近似。使用这种具有物理依据的单极点近似，计算接收端的 $10$–$90$ 上升时间。\n\n使用以下对应于低-$\\kappa$ 后端堆叠结构的参数：\n- 驱动电阻：$R_{d} = 35\\ \\Omega$。\n- 线长：$L = 8\\ \\mathrm{mm}$。\n- 单位长度电阻：$r = 7.5\\ \\Omega/\\mathrm{mm}$。\n- 单位长度电容（针对低-$\\kappa$，$\\kappa \\approx 2.7$ 提取）：$c = 0.22\\ \\mathrm{fF}/\\mu\\mathrm{m}$。\n\n将最终答案表示为一个以皮秒为单位的实数，并四舍五入到三位有效数字。",
            "solution": "一个布线在低介电常数（low-$\\kappa$）电介质上并屏蔽接地的长片上互连可以被建模为分布式电阻-电容（RC）传输线。在电感可忽略的情况下，线路电压 $v(x,t)$ 和电流 $i(x,t)$ 满足阻容电报方程\n$$\n\\frac{\\partial v(x,t)}{\\partial x} = - r\\, i(x,t), \\qquad \\frac{\\partial i(x,t)}{\\partial x} = - c\\, \\frac{\\partial v(x,t)}{\\partial t},\n$$\n它们合并为扩散方程\n$$\n\\frac{\\partial v(x,t)}{\\partial t} = \\frac{1}{r c}\\, \\frac{\\partial^{2} v(x,t)}{\\partial x^{2}}.\n$$\n输入通过一个源电阻 $R_{d}$ 以单位阶跃驱动该线，远端 $x = L$ 处开路（接收器输入为高阻抗）。\n\n精确的远端阶跃响应是一个非指数上升过程，可以表示为一系列实数衰减模式。对于电路时序分析，一个标准的基于物理的近似方法是用一个有效的单极点系统来表示响应，该系统的时间常数被选择为与一阶时间矩（脉冲响应的“质心”）相匹配。这种方法等同于匹配RC网络脉冲响应的一阶矩，并导出了著名的RC树的一阶矩时间常数。对于带有驱动电阻 $R_{d}$ 的分布式RC线，这种单极点近似的有效时间常数 $\\tau$ 是通过对沿线每个无穷小电容所看到的电阻进行积分得到的：\n$$\n\\tau \\equiv \\int_{0}^{L} R_{\\mathrm{seen}}(x)\\, dC(x).\n$$\n这里，无穷小电容为 $dC(x) = c\\, dx$，而 $dC(x)$ 回看源端所看到的电阻是 $R_{\\mathrm{seen}}(x) = R_{d} + r x$（源电阻加上从 $x=0$ 到 $x$ 的线段电阻）。因此，\n$$\n\\tau = \\int_{0}^{L} \\bigl(R_{d} + r x \\bigr)\\, c\\, dx = c \\left( R_{d} \\int_{0}^{L} dx + r \\int_{0}^{L} x\\, dx \\right)\n= c \\left( R_{d} L + \\frac{r L^{2}}{2} \\right).\n$$\n在单极点模型中，远端阶跃响应近似为\n$$\nv_{\\mathrm{out}}(t) \\approx V_{\\mathrm{DD}} \\left(1 - \\exp\\!\\left(-\\frac{t}{\\tau}\\right)\\right).\n$$\n对于此波形，达到最终值的分数 $p$ 所需的时间 $t_{p}$ 满足\n$$\np = 1 - \\exp\\!\\left(-\\frac{t_{p}}{\\tau}\\right) \\ \\Rightarrow\\ t_{p} = - \\tau \\ln(1-p).\n$$\n因此，$10$–$90$ 上升时间为\n$$\nt_{10\\text{–}90} = t_{0.9} - t_{0.1} = \\tau \\left[ -\\ln(1-0.9) + \\ln(1-0.1) \\right]\n= \\tau \\left[ \\ln(10) - \\ln\\!\\left(\\frac{10}{9}\\right) \\right] = \\tau \\ln(9).\n$$\n等价地，\n$$\nt_{10\\text{–}90} = \\ln(9)\\, c \\left( R_{d} L + \\frac{r L^{2}}{2} \\right).\n$$\n\n现在代入给定的数值，注意单位的一致转换。首先，将单位长度电容 $c$ 转换为 $\\mathrm{F}/\\mathrm{m}$：\n$$\nc = 0.22\\ \\mathrm{fF}/\\mu\\mathrm{m} = 0.22 \\times 10^{-15}\\ \\mathrm{F}/10^{-6}\\ \\mathrm{m} = 2.2 \\times 10^{-10}\\ \\mathrm{F}/\\mathrm{m}.\n$$\n将线长 $L$ 转换为米：\n$$\nL = 8\\ \\mathrm{mm} = 8 \\times 10^{-3}\\ \\mathrm{m}.\n$$\n将单位长度电阻 $r$ 转换为 $\\Omega/\\mathrm{m}$：\n$$\nr = 7.5\\ \\Omega/\\mathrm{mm} = 7.5 \\times 10^{3}\\ \\Omega/\\mathrm{m}.\n$$\n通过矩积分计算有效时间常数：\n$$\n\\tau = c \\left( R_{d} L + \\frac{r L^{2}}{2} \\right)\n= \\left(2.2 \\times 10^{-10}\\right) \\left[ 35 \\cdot \\left(8 \\times 10^{-3}\\right) + \\frac{7.5 \\times 10^{3} \\cdot \\left(8 \\times 10^{-3}\\right)^{2}}{2} \\right]\\ \\mathrm{s}.\n$$\n计算括号中的项：\n$$\nR_{d} L = 35 \\cdot 8 \\times 10^{-3} = 280 \\times 10^{-3} = 0.28\\ \\Omega\\cdot\\mathrm{m},\n$$\n$$\n\\frac{r L^{2}}{2} = \\frac{7.5 \\times 10^{3} \\cdot 64 \\times 10^{-6}}{2}\n= \\frac{480 \\times 10^{-3}}{2} = 0.24\\ \\Omega\\cdot\\mathrm{m}.\n$$\n因此，\n$$\nR_{d} L + \\frac{r L^{2}}{2} = 0.28 + 0.24 = 0.52\\ \\Omega\\cdot\\mathrm{m},\n$$\n且\n$$\n\\tau = \\left(2.2 \\times 10^{-10}\\right) \\cdot 0.52\\ \\mathrm{s} = 1.144 \\times 10^{-10}\\ \\mathrm{s}.\n$$\n最后，$10$–$90$ 上升时间为\n$$\nt_{10\\text{–}90} = \\ln(9)\\, \\tau \\approx 2.19722458 \\times 1.144 \\times 10^{-10}\\ \\mathrm{s}\n= 2.513 \\times 10^{-10}\\ \\mathrm{s}.\n$$\n以皮秒表示，\n$$\nt_{10\\text{–}90} = 2.513 \\times 10^{-10}\\ \\mathrm{s} \\times 10^{12}\\ \\mathrm{ps}/\\mathrm{s} = 251.3\\ \\mathrm{ps}.\n$$\n按要求四舍五入到三位有效数字，结果为 $251\\ \\mathrm{ps}$。",
            "answer": "$$\\boxed{251}$$"
        },
        {
            "introduction": "在互连电容概念的基础上，本练习将探讨工艺集成中一个关键的实际复杂问题。我们将分析诸如高介电常数的刻蚀停止层和硬掩模层等必要的工艺薄膜如何增加寄生耦合电容，从而部分抵消了主要低κ材料带来的益处。本练习使用一个简化的串联电容器模型，旨在让您对这一关键的设计权衡获得清晰且定量的理解。",
            "id": "4282375",
            "problem": "考虑在电子设计自动化 (EDA) 中研究的双大马士革后端工艺堆栈中的两条相同的铜互连线。每条线的高度为 $H$，宽度为 $W$，它们相对侧壁之间的横向边到边间距为 $S$。这些线嵌入在相对介电常数为 $\\kappa_{\\mathrm{d}}$ 的低介电常数（“low-$\\kappa$”）有机硅酸盐玻璃沟槽电介质中。此外，工艺集成在两条线的侧壁上使用了一层相对介电常数为 $\\kappa_{\\mathrm{es}}$、厚度为 $\\delta_{\\mathrm{es}}$ 的共形刻蚀停止层，以及一层相对介电常数为 $\\kappa_{\\mathrm{hm}}$、厚度为 $\\delta_{\\mathrm{hm}}$ 的共形硬掩模层。假设这些侧壁薄膜是顺序沉积的，因此在每个侧壁上，刻蚀停止层与铜相邻，而硬掩模层位于刻蚀停止层之外，之后才开始填充中心的低-$\\kappa$沟槽。因此，剩余的中心沟槽宽度为 $d_{\\mathrm{core}} = S - 2(\\delta_{\\mathrm{es}} + \\delta_{\\mathrm{hm}})$，并由低-$\\kappa$电介质填充。\n\n为了进行高级分析，请使用以下物理上合理的理想化假设，通过第一性原理静电学来近似计算两条相邻线路之间的单位长度互连耦合电容：\n- 将高度为 $H$ 的相对侧壁视为平行电极，在间距 $S$ 上产生一个主要的横向电场。\n- 将跨越 $S$ 的横向电介质组分建模为沿电场方向串联排列的五个平板（左侧刻蚀停止层、左侧硬掩模、中心低-$\\kappa$核心、右侧硬掩模、右侧刻蚀停止层）的一维序列，每个平板具有均匀的厚度和恒定的介电常数。\n- 忽略顶部和底部边缘的边缘效应以及任何各向异性，以便电位移在高度 $H$ 的横截面积上是均匀的。\n\n从高斯定律和线性电介质的本构关系出发，推导在存在侧壁刻蚀停止层和硬掩模薄膜的情况下单位长度的耦合电容表达式，并将其与间隙 $S$ 完全由低-$\\kappa$电介质填充时的基准单位长度电容进行比较。利用此推导，计算单位长度耦合电容的分数增加量，定义为\n$$\nf \\equiv \\frac{C'_{\\mathrm{with}} - C'_{0}}{C'_{0}},\n$$\n其中 $C'_{\\mathrm{with}}$ 是存在侧壁薄膜时的单位长度耦合电容，$C'_{0}$ 是没有侧壁薄膜时的基准单位长度耦合电容。\n\n使用以下几何和材料参数：\n- $H = 52\\,\\mathrm{nm}$，$W = 24\\,\\mathrm{nm}$，$S = 28\\,\\mathrm{nm}$，\n- $\\delta_{\\mathrm{es}} = 2\\,\\mathrm{nm}$，$\\delta_{\\mathrm{hm}} = 3\\,\\mathrm{nm}$，\n- $\\kappa_{\\mathrm{d}} = 2.2$，$\\kappa_{\\mathrm{es}} = 7.2$，$\\kappa_{\\mathrm{hm}} = 5.0$。\n\n在推导中以符号形式陈述并使用真空介电常数 $\\varepsilon_{0}$，但仅在必要时才进行求值。将 $f$ 的最终答案表示为无量纲小数。将您的答案四舍五入到四位有效数字。",
            "solution": "该问题要求计算由于存在较高介电常数的侧壁薄膜，两条相邻铜互连线之间单位长度耦合电容的分数增加量。计算将基于指定的理想化平行板电容器模型。\n\n首先，让我们根据问题陈述建立模型。我们考虑两条长度为 $L$ 的互连线的一段。相对的侧壁充当电容器的平行板，每个板的面积为 $A = H \\times L$。铜线之间的总间距为 $S$。\n\n分析从高斯定律和线性各向同性电介质的本构关系开始。对于板上表面电荷密度为 $\\pm\\sigma$ 的平行板电容器，高斯定律规定，如果忽略边缘场，板之间的电位移场 $D$ 的大小是均匀的且等于 $\\sigma$。因此，$D = \\sigma$。相对介电常数为 $\\kappa$ 的电介质中的电场 $E$ 通过本构关系 $D = \\varepsilon E = \\kappa\\varepsilon_{0}E$ 与 $D$ 相关，其中 $\\varepsilon_{0}$ 是真空介电常数。板之间的电势差 $V$ 是电场在间隙上的积分。电容定义为 $C = Q/V = (\\sigma A)/V$。单位长度电容为 $C' = C/L$。\n\n我们首先确定基准单位长度电容 $C'_{0}$。在这种情况下，线路之间的整个空间 $S$ 都填充有相对介电常数为 $\\kappa_{\\mathrm{d}}$ 的单一低-$\\kappa$电介质。\n电场是均匀的：$E_{0} = D / (\\kappa_{\\mathrm{d}}\\varepsilon_{0})$。\n电势差为 $V_{0} = E_{0} S = D S / (\\kappa_{\\mathrm{d}}\\varepsilon_{0})$。\n电容为 $C_{0} = Q/V_{0} = (\\sigma A) / (D S / (\\kappa_{\\mathrm{d}}\\varepsilon_{0})) = (D L H) / (D S / (\\kappa_{\\mathrm{d}}\\varepsilon_{0})) = \\kappa_{\\mathrm{d}}\\varepsilon_{0}LH/S$。\n因此，单位长度电容为：\n$$\nC'_{0} = \\frac{C_{0}}{L} = \\frac{\\kappa_{\\mathrm{d}}\\varepsilon_{0}H}{S}\n$$\n\n接下来，我们确定有侧壁薄膜时的单位长度电容 $C'_{\\mathrm{with}}$。导电板之间的区域现在是一个复合电介质，由沿电场方向串联的五个平板组成：\n1. 刻蚀停止层（左侧）：厚度 $\\delta_{\\mathrm{es}}$，相对介电常数 $\\kappa_{\\mathrm{es}}$。\n2. 硬掩模层（左侧）：厚度 $\\delta_{\\mathrm{hm}}$，相对介电常数 $\\kappa_{\\mathrm{hm}}$。\n3. 低-$\\kappa$核心：厚度 $d_{\\mathrm{core}} = S - 2(\\delta_{\\mathrm{es}} + \\delta_{\\mathrm{hm}})$，相对介电常数 $\\kappa_{\\mathrm{d}}$。\n4. 硬掩模层（右侧）：厚度 $\\delta_{\\mathrm{hm}}$，相对介电常数 $\\kappa_{\\mathrm{hm}}$。\n5. 刻蚀停止层（右侧）：厚度 $\\delta_{\\mathrm{es}}$，相对介电常数 $\\kappa_{\\mathrm{es}}$。\n\n对于串联电容器，电位移 $D$ 在整个结构中是恒定的，而总电势差是每个平板上电势差的总和：\n$V_{\\mathrm{with}} = \\sum_{i=1}^{5} V_i = \\sum E_i d_i$。\n使用 $E_i = D/(\\kappa_i \\varepsilon_{0})$，我们得到：\n$$\nV_{\\mathrm{with}} = \\sum_{i=1}^{5} \\frac{D d_i}{\\kappa_i \\varepsilon_{0}} = \\frac{D}{\\varepsilon_{0}} \\left( \\frac{\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{d_{\\mathrm{core}}}{\\kappa_{\\mathrm{d}}} + \\frac{\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} \\right)\n$$\n$$\nV_{\\mathrm{with}} = \\frac{D}{\\varepsilon_{0}} \\left( \\frac{2\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{S - 2(\\delta_{\\mathrm{es}} + \\delta_{\\mathrm{hm}})}{\\kappa_{\\mathrm{d}}} \\right)\n$$\n电容为 $C_{\\mathrm{with}} = Q/V_{\\mathrm{with}} = (\\sigma A)/V_{\\mathrm{with}} = (D L H)/V_{\\mathrm{with}}$。\n代入 $V_{\\mathrm{with}}$ 的表达式：\n$$\nC_{\\mathrm{with}} = \\frac{D L H}{\\frac{D}{\\varepsilon_{0}} \\left( \\frac{2\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{S - 2\\delta_{\\mathrm{es}} - 2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{d}}} \\right)} = \\frac{\\varepsilon_{0} L H}{\\frac{2\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{S - 2\\delta_{\\mathrm{es}} - 2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{d}}}}\n$$\n单位长度电容 $C'_{\\mathrm{with}} = C_{\\mathrm{with}}/L$ 为：\n$$\nC'_{\\mathrm{with}} = \\frac{\\varepsilon_{0} H}{\\frac{2\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{S - 2(\\delta_{\\mathrm{es}} + \\delta_{\\mathrm{hm}})}{\\kappa_{\\mathrm{d}}}}\n$$\n我们需要计算分数增加量 $f = (C'_{\\mathrm{with}} - C'_{0}) / C'_{0} = (C'_{\\mathrm{with}} / C'_{0}) - 1$。让我们计算比率 $C'_{\\mathrm{with}} / C'_{0}$：\n$$\n\\frac{C'_{\\mathrm{with}}}{C'_{0}} = \\frac{\\frac{\\varepsilon_{0} H}{\\frac{2\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{S - 2(\\delta_{\\mathrm{es}} + \\delta_{\\mathrm{hm}})}{\\kappa_{\\mathrm{d}}}}}{\\frac{\\kappa_{\\mathrm{d}}\\varepsilon_{0}H}{S}} = \\frac{S}{\\kappa_{\\mathrm{d}} \\left( \\frac{2\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + \\frac{S - 2(\\delta_{\\mathrm{es}} + \\delta_{\\mathrm{hm}})}{\\kappa_{\\mathrm{d}}} \\right)}\n$$\n$$\n\\frac{C'_{\\mathrm{with}}}{C'_{0}} = \\frac{S}{\\frac{2\\kappa_{\\mathrm{d}}\\delta_{\\mathrm{es}}}{\\kappa_{\\mathrm{es}}} + \\frac{2\\kappa_{\\mathrm{d}}\\delta_{\\mathrm{hm}}}{\\kappa_{\\mathrm{hm}}} + S - 2\\delta_{\\mathrm{es}} - 2\\delta_{\\mathrm{hm}}}\n$$\n重新整理分母可以得到一个更有洞察力的形式：\n$$\n\\frac{C'_{\\mathrm{with}}}{C'_{0}} = \\frac{S}{S + 2\\delta_{\\mathrm{es}}\\left(\\frac{\\kappa_{\\mathrm{d}}}{\\kappa_{\\mathrm{es}}} - 1\\right) + 2\\delta_{\\mathrm{hm}}\\left(\\frac{\\kappa_{\\mathrm{d}}}{\\kappa_{\\mathrm{hm}}} - 1\\right)}\n$$\n现在我们可以计算 $f = (C'_{\\mathrm{with}} / C'_{0}) - 1$。\n给定的参数是：\n- $S = 28\\,\\mathrm{nm}$\n- $\\delta_{\\mathrm{es}} = 2\\,\\mathrm{nm}$\n- $\\delta_{\\mathrm{hm}} = 3\\,\\mathrm{nm}$\n- $\\kappa_{\\mathrm{d}} = 2.2$\n- $\\kappa_{\\mathrm{es}} = 7.2$\n- $\\kappa_{\\mathrm{hm}} = 5.0$\n\n让我们计算比率分母中的各项。注意长度单位（nm）会消掉，所以我们可以直接使用数值。\n刻蚀停止层的项是：\n$$\n2\\delta_{\\mathrm{es}}\\left(\\frac{\\kappa_{\\mathrm{d}}}{\\kappa_{\\mathrm{es}}} - 1\\right) = 2(2)\\left(\\frac{2.2}{7.2} - 1\\right) = 4\\left(\\frac{11}{36} - 1\\right) = 4\\left(-\\frac{25}{36}\\right) = -\\frac{25}{9}\n$$\n硬掩模层的项是：\n$$\n2\\delta_{\\mathrm{hm}}\\left(\\frac{\\kappa_{\\mathrm{d}}}{\\kappa_{\\mathrm{hm}}} - 1\\right) = 2(3)\\left(\\frac{2.2}{5.0} - 1\\right) = 6(0.44 - 1) = 6(-0.56) = -3.36 = -\\frac{336}{100} = -\\frac{84}{25}\n$$\n分母是：\n$$\nD_{denom} = 28 - \\frac{25}{9} - \\frac{84}{25} = \\frac{28(225) - 25(25) - 84(9)}{225} = \\frac{6300 - 625 - 756}{225} = \\frac{4919}{225}\n$$\n现在，我们计算该比率：\n$$\n\\frac{C'_{\\mathrm{with}}}{C'_{0}} = \\frac{S}{D_{denom}} = \\frac{28}{4919/225} = \\frac{28 \\times 225}{4919} = \\frac{6300}{4919}\n$$\n最后，分数增加量 $f$ 是：\n$$\nf = \\frac{C'_{\\mathrm{with}}}{C'_{0}} - 1 = \\frac{6300}{4919} - 1 = \\frac{6300 - 4919}{4919} = \\frac{1381}{4919}\n$$\n为了提供一个小数答案，我们进行除法运算：\n$$\nf = \\frac{1381}{4919} \\approx 0.2807481195...\n$$\n四舍五入到四位有效数字，我们得到 $f \\approx 0.2807$。\n较高-$\\kappa$的刻蚀停止层和硬掩模薄膜的存在导致电容分数增加了约 $28.07\\%$。",
            "answer": "$$\\boxed{0.2807}$$"
        },
        {
            "introduction": "在研究了沿水平互连线的信号传播之后，我们现在转向垂直连接（即通孔）的可靠性问题。本练习涉及构建并求解一个通孔阵列的电阻网络，以理解电流拥挤现象——即靠近电流源的通孔承载了不成比例的更大多数电流。通过应用Black方程，您将量化这种不均匀的电流分布对阵列电迁移寿命的影响，从而突显出为何稳健的多通孔结构对现代集成电路设计至关重要。",
            "id": "4282349",
            "problem": "您的任务是构建并求解一个物理上一致的电阻网络，该网络模拟一个在采用低介电常数 (low-$\\kappa$) 材料制造的双镶嵌互连系统中，连接顶层金属层与底层金属层的 $3\\times 3$ 通孔阵列。目标是计算在非均匀电阻网络下通过通孔的垂直电流分布，并量化相对于单个通孔连接的电迁移寿命改善情况，同时考虑到由顶层金属层有限方块电阻引起的电流拥挤效应。\n\n仅使用以下基本原理：\n- 欧姆定律：$V=IR$，等效于 $I=GV$，其中 $G=1/R$。\n- 基尔霍夫电流定律 (KCL)：离开任意节点的电流代数和为零。\n- 用于电迁移寿命的 Black 经验公式：$\\mathrm{MTTF}=\\mathcal{A}\\, J^{-n}\\exp\\!\\left(\\frac{E_{\\mathrm{a}}}{k_{\\mathrm{B}}T}\\right)$，其中 $\\mathrm{MTTF}$ 是平均失效时间，$J$ 是电流密度，$n$ 是经验电流指数，$E_{\\mathrm{a}}$ 是活化能，$k_{\\mathrm{B}}$ 是玻尔兹曼常数，$T$ 是绝对温度。\n\n网络模型：\n- 顶层金属层被建模为一个二维电阻网格，以均匀的间距连接 $3\\times 3$ 的通孔焊盘，形成一个矩形网格。每对水平相邻的顶部焊盘由一个电阻 $R_{\\mathrm{top},x} = R_{\\mathrm{sh,top}}\\,(L_x/W_x)$ 连接，每对垂直相邻的顶部焊盘由一个电阻 $R_{\\mathrm{top},y} = R_{\\mathrm{sh,top}}\\,(L_y/W_y)$ 连接，其中 $R_{\\mathrm{sh,top}}$ 是顶层的方块电阻，单位为 $\\Omega/\\square$，$L_x$ 和 $L_y$ 分别是沿 $x$ 和 $y$ 方向的焊盘间距（单位为 $\\mathrm{m}$），$W_x$ 和 $W_y$ 分别是沿 $x$ 和 $y$ 方向相邻焊盘之间电流流动的有效顶层金属宽度（单位为 $\\mathrm{m}$）。\n- 底层金属层是一个宽的低电阻平面，并被建模为电位为 $V=0$ 的等电位参考。底层中的横向电阻被忽略，即 $R_{\\mathrm{sh,bot}}\\rightarrow 0$，这与厚的电源轨或电源平面情况一致。\n- 每个通孔被建模为一个垂直电阻，其电阻值为 $R_{\\mathrm{via},i}$，连接顶部焊盘 $i$ 与电位为 $V=0$ 的底层平面。这 $9$ 个通孔的电阻可以是非均匀的，以捕捉工艺变化和由低-$\\kappa$ 电介质引起的图形依赖性。\n- 电流拥挤的边界条件：最左边一列的三个顶部焊盘保持在固定电位 $V_{\\mathrm{app}}$（与馈电焊盘的理想接触），所有其他顶部焊盘的电位是未知的，由 KCL 决定。这会驱动顶层网格中的横向电流和通过通孔流向接地底层的垂直电流，从而产生非均匀的通孔电流。\n\n电迁移寿命建模：\n- 假设在固定温度 $T$ 下进行等温操作，且阵列中所有通孔的横截面积相同，因此电流密度与通过每个通孔的电流成正比。假设每个通孔的失效时间分布是统计上独立的指数分布，其平均值由 Black 方程给出，每个测试案例会提供经验指数 $n$。在这些假设下，系统的首次失效平均时间（指数寿命下的薄弱环节模型）是各失效率之和的倒数。\n\n每个测试案例需要执行的任务：\n1. 为 $3\\times 3$ 的顶部节点构建节点 KCL 方程，将最左边一列的三个节点视为固定在 $V_{\\mathrm{app}}$，底层平面视为 $V=0$。在线性系统中求解未知顶部节点电位，设 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$。\n2. 计算在 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$ 时的通孔电流 $I_i$，公式为 $I_i = G_{\\mathrm{via},i}\\,V_{\\mathrm{top},i}$，其中 $G_{\\mathrm{via},i}=1/R_{\\mathrm{via},i}$。在 $1\\,\\mathrm{V}$ 时的总电流为 $I_{\\mathrm{tot},1\\mathrm{V}}=\\sum_{i=1}^{9} I_i$。\n3. 通过将所有通孔电流乘以 $s=I_{\\mathrm{tot}}/I_{\\mathrm{tot},1\\mathrm{V}}$，将其缩放到目标总电流 $I_{\\mathrm{tot}}$，以获得在指定驱动下的实际通孔电流。\n4. 计算电迁移改善因子，其定义为在相同总电流下，阵列的首次失效平均时间与单个通孔的失效平均时间之比。将此比率报告为无量纲的小数。假设单个通孔情况承载全部电流 $I_{\\mathrm{tot}}$，且其横截面积与阵列中的通孔相同。\n5. 报告通孔电流分布，形式为一个包含 $9$ 个电流（单位：$\\mathrm{A}$）的列表，按从上到下、每行从左到右的行主序排列，每个值四舍五入到六位小数。同时报告四舍五入到六位小数的改善因子。\n\n角度单位不适用。所有物理量必须使用以下单位：\n- 电阻，单位 $\\Omega$，\n- 方块电阻，单位 $\\Omega/\\square$，\n- 长度，单位 $\\mathrm{m}$，\n- 电流，单位 $\\mathrm{A}$，\n- 电压，单位 $\\mathrm{V}$。\n将改善因子表示为纯小数（无单位）。\n\n测试套件：\n为以下三种情况提供结果。对于所有情况，在缩放前求解节点电压时，取 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$。\n\n- 案例 1（均匀通孔，中等拥挤）：\n  - $I_{\\mathrm{tot}} = 0.01\\,\\mathrm{A}$，\n  - $R_{\\mathrm{sh,top}} = 0.05\\,\\Omega/\\square$，\n  - $L_x = 2.0\\times 10^{-7}\\,\\mathrm{m}$，$L_y = 2.0\\times 10^{-7}\\,\\mathrm{m}$，\n  - $W_x = 3.0\\times 10^{-7}\\,\\mathrm{m}$，$W_y = 3.0\\times 10^{-7}\\,\\mathrm{m}$，\n  - $n = 1.10$，\n  - $R_{\\mathrm{via}}$（行主序）：$\\left[0.01,\\,0.01,\\,0.01,\\,0.01,\\,0.01,\\,0.01,\\,0.01,\\,0.01,\\,0.01\\right]\\,\\Omega$。\n\n- 案例 2（非均匀通孔，更强拥挤）：\n  - $I_{\\mathrm{tot}} = 0.02\\,\\mathrm{A}$，\n  - $R_{\\mathrm{sh,top}} = 0.08\\,\\Omega/\\square$，\n  - $L_x = 2.0\\times 10^{-7}\\,\\mathrm{m}$，$L_y = 2.0\\times 10^{-7}\\,\\mathrm{m}$，\n  - $W_x = 3.0\\times 10^{-7}\\,\\mathrm{m}$，$W_y = 3.0\\times 10^{-7}\\,\\mathrm{m}$，\n  - $n = 1.10$，\n  - $R_{\\mathrm{via}}$（行主序）：$\\left[0.015,\\,0.012,\\,0.015,\\,0.012,\\,0.020,\\,0.012,\\,0.015,\\,0.012,\\,0.015\\right]\\,\\Omega$。\n\n- 案例 3（角通孔开路，顶层宽度较窄）：\n  - $I_{\\mathrm{tot}} = 0.005\\,\\mathrm{A}$，\n  - $R_{\\mathrm{sh,top}} = 0.05\\,\\Omega/\\square$，\n  - $L_x = 2.0\\times 10^{-7}\\,\\mathrm{m}$，$L_y = 2.0\\times 10^{-7}\\,\\mathrm{m}$，\n  - $W_x = 2.0\\times 10^{-7}\\,\\mathrm{m}$，$W_y = 2.5\\times 10^{-7}\\,\\mathrm{m}$，\n  - $n = 1.10$，\n  - $R_{\\mathrm{via}}$（行主序）：$\\left[10^{9},\\,0.010,\\,0.010,\\,0.010,\\,0.010,\\,0.010,\\,0.010,\\,0.010,\\,0.010\\right]\\,\\Omega$。\n\n要求的最终输出格式：\n- 您的程序应生成单行输出，其中包含一个长度为 $3$ 的列表，每个元素对应一个测试案例，且本身是一个长度为 $2$ 的列表：第一个元素是改善因子（无量纲小数），第二个元素是按行主序排列的 $9$ 个通孔电流（单位：$\\mathrm{A}$）的列表。所有数字必须四舍五入到六位小数。例如：$\\left[\\,[\\mathrm{IF}_1,\\,[i_{1,1},\\dots,i_{1,9}]]\\,,\\,[\\mathrm{IF}_2,\\,[\\dots]]\\,,\\,[\\mathrm{IF}_3,\\,[\\dots]]\\,\\right]$。",
            "solution": "该问题旨在分析集成电路中一个 $3\\times 3$ 通孔阵列的电阻网络模型，计算其电流分布，并确定相对于单个通孔的电迁移寿命改善情况。该问题在物理上是适定的，并提供了所有必要的参数。我们将应用电路理论的基本原理和电迁移的标准模型来解决它。\n\n### 1. 电阻网络模型与节点分析\n\n该系统被建模为一个 $3\\times 3$ 的节点网格，代表通孔的顶部焊盘。我们按行主序（左上角为节点1，右下角为节点9）将这些节点标记为 $1$ 到 $9$。\n\n-   **连接**：水平相邻的节点由一个电阻 $R_{\\mathrm{top},x}$ 连接，垂直相邻的节点由 $R_{\\mathrm{top},y}$ 连接。每个节点 $i$ 通过一个通孔电阻 $R_{\\mathrm{via},i}$ 连接到公共地（$V=0$）。\n-   **边界条件**：最左边一列的节点（$1$、$4$ 和 $7$）保持在固定电位 $V_{\\mathrm{app}}$。其他六个节点（$2, 3, 5, 6, 8, 9$）的电位未知，我们将其表示为 $V_2, V_3, V_5, V_6, V_8, V_9$。底层金属层是电位为 $V=0\\,\\mathrm{V}$ 的系统接地参考。\n\n为了找到未知电位，我们对六个未知电压节点中的每一个应用基尔霍夫电流定律 (KCL)。使用电导（其中电导 $G = 1/R$）更为方便。横向电导为：\n$$G_x = \\frac{1}{R_{\\mathrm{top},x}} = \\frac{1}{R_{\\mathrm{sh,top}}} \\frac{W_x}{L_x}$$\n$$G_y = \\frac{1}{R_{\\mathrm{top},y}} = \\frac{1}{R_{\\mathrm{sh,top}}} \\frac{W_y}{L_y}$$\n节点 $i$ 的垂直通孔电导为 $G_{\\mathrm{via},i} = 1/R_{\\mathrm{via},i}$。\n\n对六个未知节点应用KCL（离开一个节点的电流之和为零）会得到一个包含六个线性方程的方程组。我们将未知电压向量定义为 $\\mathbf{V}_{\\mathrm{unk}} = [V_2, V_3, V_5, V_6, V_8, V_9]^T$。该系统可以写成矩阵形式 $\\mathbf{G} \\mathbf{V}_{\\mathrm{unk}} = \\mathbf{I}_{\\mathrm{src}}$，其中 $\\mathbf{G}$ 是 $6\\times 6$ 的电导矩阵，$\\mathbf{I}_{\\mathrm{src}}$ 是由与固定电压节点的连接产生的电流源向量。按照规定，我们为初始求解设置 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$。\n\n对于一个通用的未知节点 $u$，其 KCL 方程为：\n$$V_u \\left(\\sum_{j \\in \\text{neighbors}} G_{uj} + G_{\\mathrm{via},u}\\right) - \\sum_{k \\in \\text{unknown neighbors}} V_k G_{uk} = \\sum_{f \\in \\text{fixed neighbors}} V_f G_{uf}$$\n由于 $V_f = V_{\\mathrm{app}} = 1\\,\\mathrm{V}$，等式右边变为与固定电压邻居节点相连的电导之和。\n\n例如，节点 $2$（邻居为 $1, 3, 5$）的 KCL 方程是：\n$$(V_2 - V_1)G_x + (V_2 - V_3)G_x + (V_2 - V_5)G_y + V_2 G_{\\mathrm{via},2} = 0$$\n由于 $V_1=V_{\\mathrm{app}}=1\\,\\mathrm{V}$，可重排为：\n$$V_2(2G_x + G_y + G_{\\mathrm{via},2}) - V_3 G_x - V_5 G_y = V_{\\mathrm{app}} G_x$$\n完整的六个方程组也以类似方式构建。得到的电导矩阵 $\\mathbf{G}$ 是对称正定的，这保证了未知电压有唯一解。\n\n### 2. 电流计算与缩放\n\n一旦求解线性系统得到未知电压，我们就得到了全部九个顶部节点的电压（三个固定为 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$，六个已求解）。然后使用欧姆定律计算通过每个通孔 $i$ 的电流：\n$$I_{i,1\\mathrm{V}} = \\frac{V_i}{R_{\\mathrm{via},i}} = V_i G_{\\mathrm{via},i}$$\n在 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$ 时流入阵列的总电流是所有通孔电流的总和：\n$$I_{\\mathrm{tot},1\\mathrm{V}} = \\sum_{i=1}^9 I_{i,1\\mathrm{V}}$$\n由于网络是线性的，电流与施加的电压成比例缩放。为了达到每个测试案例中指定的目标总电流 $I_{\\mathrm{tot}}$，我们找到一个缩放因子 $s$：\n$$s = \\frac{I_{\\mathrm{tot}}}{I_{\\mathrm{tot},1\\mathrm{V}}}$$\n那么，通过每个通孔的最终物理电流为：\n$$I_i = s \\cdot I_{i,1\\mathrm{V}}$$\n\n### 3. 电迁移改善因子\n\n由电迁移引起的平均失效时间 (MTTF) 由 Black 方程给出：$\\mathrm{MTTF}=\\mathcal{A}\\, J^{-n}\\exp(E_{\\mathrm{a}}/k_{\\mathrm{B}}T)$。由于温度 $T$、活化能 $E_{\\mathrm{a}}$、通孔横截面积和材料属性被假定为常数，MTTF 与电流的 $n$ 次方的倒数成正比：$\\mathrm{MTTF} \\propto I^{-n}$。\n\n问题假设每个通孔的失效时间呈指数分布，所以通孔 $i$ 的失效率为 $\\lambda_i = 1/\\mathrm{MTTF}_i$。因此，$\\lambda_i \\propto I_i^n$。对于薄弱环节模型，系统在第一个通孔失效时失效。整体系统失效率是单个失效率的总和：$\\lambda_{\\mathrm{sys}} = \\sum_{i=1}^9 \\lambda_i$。\n系统的首次失效平均时间是 $\\mathrm{MTTF}_{\\mathrm{sys}} = 1/\\lambda_{\\mathrm{sys}}$。\n\n因此，$\\mathrm{MTTF}_{\\mathrm{sys}} \\propto \\left(\\sum_{i=1}^9 I_i^n\\right)^{-1}$。\n\n对于参考情况，单个通孔承载全部电流 $I_{\\mathrm{tot}}$。其 MTTF 为 $\\mathrm{MTTF}_{\\mathrm{single}} \\propto (I_{\\mathrm{tot}})^{-n}$。\n\n改善因子 (IF) 是系统 MTTF 与单个通孔 MTTF 的比值：\n$$\\mathrm{IF} = \\frac{\\mathrm{MTTF}_{\\mathrm{sys}}}{\\mathrm{MTTF}_{\\mathrm{single}}} = \\frac{k\\left(\\sum_{i=1}^9 I_i^n\\right)^{-1}}{k\\left(I_{\\mathrm{tot}}\\right)^{-n}} = \\frac{I_{\\mathrm{tot}}^n}{\\sum_{i=1}^9 I_i^n}$$\n其中 $k$ 是比例常数。\n代入 $I_i = s \\cdot I_{i,1\\mathrm{V}}$ 和 $I_{\\mathrm{tot}} = s \\cdot I_{\\mathrm{tot},1\\mathrm{V}}$ 得：\n$$\\mathrm{IF} = \\frac{(s \\cdot I_{\\mathrm{tot},1\\mathrm{V}})^n}{\\sum_{i=1}^9 (s \\cdot I_{i,1\\mathrm{V}})^n} = \\frac{s^n (I_{\\mathrm{tot},1\\mathrm{V}})^n}{s^n \\sum_{i=1}^9 (I_{i,1\\mathrm{V}})^n} = \\frac{\\left(\\sum_{i=1}^9 I_{i,1\\mathrm{V}}\\right)^n}{\\sum_{i=1}^9 (I_{i,1\\mathrm{V}})^n}$$\n这个重要的结果表明，改善因子仅取决于电流的相对分布（在 $V_{\\mathrm{app}}=1\\,\\mathrm{V}$ 时确定）和电流指数 $n$，而与总电流 $I_{\\mathrm{tot}}$ 无关。\n\n### 4. 实现算法\n\n对每个测试案例：\n1.  计算水平 ($G_x$) 和垂直 ($G_y$) 顶层电导以及九个通孔电导 ($G_{\\mathrm{via},i}$)。\n2.  为未知节点构建 $6\\times 6$ 的电导矩阵 $\\mathbf{G}$ 和 $6\\times 1$ 的电流源向量 $\\mathbf{I}_{\\mathrm{src}}$。\n3.  求解线性系统 $\\mathbf{G} \\mathbf{V}_{\\mathrm{unk}} = \\mathbf{I}_{\\mathrm{src}}$ 以找到未知节点的电位。\n4.  组合成包含九个节点电位的完整向量，包括三个固定为 $1\\,\\mathrm{V}$ 的节点。\n5.  计算初始通孔电流 $I_{i,1\\mathrm{V}}$（对于 $i=1, \\dots, 9$）。\n6.  使用上面推导的公式计算改善因子 (IF)。\n7.  计算缩放因子 $s = I_{\\mathrm{tot}} / \\sum I_{i,1\\mathrm{V}}$ 并计算最终的物理电流 $I_i=s \\cdot I_{i,1\\mathrm{V}}$。\n8.  将 IF 和最终电流列表格式化为六位小数并附加到结果中。\n\n对提供的三个测试案例分别执行此程序。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Constructs and solves the resistive network for a 3x3 via array,\n    calculates current distribution and electromigration improvement factor.\n    \"\"\"\n    \n    test_cases = [\n        {\n            \"I_tot\": 0.01, \"R_sh_top\": 0.05,\n            \"L_x\": 2.0e-7, \"L_y\": 2.0e-7,\n            \"W_x\": 3.0e-7, \"W_y\": 3.0e-7,\n            \"n\": 1.10,\n            \"R_via\": [0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01]\n        },\n        {\n            \"I_tot\": 0.02, \"R_sh_top\": 0.08,\n            \"L_x\": 2.0e-7, \"L_y\": 2.0e-7,\n            \"W_x\": 3.0e-7, \"W_y\": 3.0e-7,\n            \"n\": 1.10,\n            \"R_via\": [0.015, 0.012, 0.015, 0.012, 0.020, 0.012, 0.015, 0.012, 0.015]\n        },\n        {\n            \"I_tot\": 0.005, \"R_sh_top\": 0.05,\n            \"L_x\": 2.0e-7, \"L_y\": 2.0e-7,\n            \"W_x\": 2.0e-7, \"W_y\": 2.5e-7,\n            \"n\": 1.10,\n            \"R_via\": [1e9, 0.010, 0.010, 0.010, 0.010, 0.010, 0.010, 0.010, 0.010]\n        }\n    ]\n\n    all_results = []\n\n    for case in test_cases:\n        I_tot = case[\"I_tot\"]\n        R_sh_top = case[\"R_sh_top\"]\n        L_x, L_y = case[\"L_x\"], case[\"L_y\"]\n        W_x, W_y = case[\"W_x\"], case[\"W_y\"]\n        n = case[\"n\"]\n        R_via = np.array(case[\"R_via\"])\n\n        # 1. Calculate conductances\n        G_x = (1.0 / R_sh_top) * (W_x / L_x) if R_sh_top > 0 and L_x > 0 else 0\n        G_y = (1.0 / R_sh_top) * (W_y / L_y) if R_sh_top > 0 and L_y > 0 else 0\n        G_via = 1.0 / R_via\n\n        V_app = 1.0\n\n        # Node indices (0-8, row major)\n        # Fixed voltage nodes (left column): 0, 3, 6\n        # Unknown voltage nodes: 1, 2, 4, 5, 7, 8\n        unknown_nodes = [1, 2, 4, 5, 7, 8]\n        # Map from node index to matrix index for the 6x6 system\n        unknown_map = {node_idx: i for i, node_idx in enumerate(unknown_nodes)}\n\n        # 2. Build the 6x6 conductance matrix G and current vector I_src\n        G_matrix = np.zeros((6, 6))\n        I_src_vector = np.zeros(6)\n\n        for i, node_idx in enumerate(unknown_nodes):\n            r, c = divmod(node_idx, 3)\n            \n            # Diagonal element: sum of all conductances connected to the node\n            diagonal_sum = G_via[node_idx]\n            \n            # Neighbors: up, down, left, right\n            neighbors = [\n                (r - 1, c, G_y), (r + 1, c, G_y), \n                (r, c - 1, G_x), (r, c + 1, G_x)\n            ]\n\n            for nr, nc, G_link in neighbors:\n                if 0 = nr  3 and 0 = nc  3:\n                    diagonal_sum += G_link\n                    neighbor_idx = nr * 3 + nc\n                    if neighbor_idx in unknown_map: # Off-diagonal element\n                        j = unknown_map[neighbor_idx]\n                        G_matrix[i, j] = -G_link\n                    else: # Contribution to source vector from fixed voltage node\n                        I_src_vector[i] += G_link * V_app\n            \n            G_matrix[i, i] = diagonal_sum\n\n        # 3. Solve the linear system\n        V_unknown = np.linalg.solve(G_matrix, I_src_vector)\n\n        # 4. Assemble full voltage vector\n        V_full = np.zeros(9)\n        V_full[0] = V_full[3] = V_full[6] = V_app\n        for i, node_idx in enumerate(unknown_nodes):\n            V_full[node_idx] = V_unknown[i]\n\n        # 5. Calculate initial via currents (for V_app=1)\n        I_initial = V_full * G_via\n        \n        # 6. Calculate Improvement Factor (IF)\n        I_total_initial = np.sum(I_initial)\n        sum_I_pow_n = np.sum(I_initial**n)\n        \n        # Handle case where all currents are zero to avoid 0/0\n        if I_total_initial == 0.0:\n            IF = 1.0 # No current, no failure, IF is neutral.\n        else:\n            IF = (I_total_initial**n) / sum_I_pow_n\n\n        # 7. Calculate final physical currents\n        scaling_factor = I_tot / I_total_initial if I_total_initial != 0 else 0\n        I_final = I_initial * scaling_factor\n\n        # 8. Format results\n        rounded_IF = round(IF, 6)\n        rounded_currents = [round(c, 6) for c in I_final]\n        all_results.append([rounded_IF, rounded_currents])\n\n    # Final print statement in the exact required format (JSON-like, no spaces)\n    result_strings = []\n    for res in all_results:\n        if_val, currents_list = res\n        currents_str = f\"[{','.join(f'{c:.6f}' for c in currents_list)}]\"\n        result_strings.append(f\"[{if_val:.6f},{currents_str}]\")\n    \n    final_output = f\"[{','.join(result_strings)}]\"\n    print(final_output)\n\nsolve()\n```"
        }
    ]
}
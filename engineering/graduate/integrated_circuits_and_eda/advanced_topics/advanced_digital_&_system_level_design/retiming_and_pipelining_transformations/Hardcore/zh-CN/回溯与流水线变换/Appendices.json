{
    "hands_on_practices": [
        {
            "introduction": "理论学习之后，我们从一个基础但非常核心的应用开始：流水线划分。这个练习将指导你如何系统地将一个长的组合逻辑路径分解为多个更短的流水级，以满足给定的时钟周期目标。通过这个实践，你将掌握延迟、时钟开销和流水线深度之间的基本权衡关系，这是提高数字电路吞吐率的基础技能。",
            "id": "4293824",
            "problem": "在电子设计自动化 (EDA) 环境中，一个同步数据路径由 $n$ 个组合逻辑块组成的单个前馈链构成，这些逻辑块按固定的拓扑顺序排列，其中第 $k$ 个逻辑块的最坏情况工艺-电压-温度 (PVT) 延迟为 $d_k$。可以在相邻的逻辑块之间插入边沿触发的流水线寄存器来创建流水线级。每个流水线级被定义为该链的一个连续子序列，其输入和输出由流水线寄存器界定。每个流水线级的时序必须满足标准同步约束，即时钟周期 $T$ 满足 $T \\geq t_{\\text{clkq}} + D_{\\text{stage}} + t_{\\text{setup}} + t_{\\text{skew}}$，其中 $t_{\\text{clkq}}$ 是寄存器时钟到Q端的延迟，$t_{\\text{setup}}$ 是寄存器的建立时间，$t_{\\text{skew}}$ 是有效时钟偏斜加抖动预算，$D_{\\text{stage}}$ 是该流水线级的总组合逻辑延迟。\n\n给定一个数据路径，其包含 $n=10$ 个逻辑块，延迟分布（单位为纳秒）$\\{d_1,d_2,\\dots,d_{10}\\}$ 定义如下\n$$\nd_1=0.33,\\quad d_2=0.21,\\quad d_3=0.18,\\quad d_4=0.52,\\quad d_5=0.19,\\quad d_6=0.41,\\quad d_7=0.27,\\quad d_8=0.36,\\quad d_9=0.44,\\quad d_{10}=0.29.\n$$\n寄存器参数为 $t_{\\text{clkq}}=0.08$ 纳秒，$t_{\\text{setup}}=0.12$ 纳秒，$t_{\\text{skew}}=0.04$ 纳秒。目标时钟周期规格为 $T_{\\text{spec}}=1.50$ 纳秒。\n\n假设重定时变换可以在不改变功能的情况下自由地跨组合逻辑块移动寄存器，并且流水线级必须是给定顺序的连续段，请确定使每个流水线级都满足目标 $T_{\\text{spec}}$ 所需的最小流水线级数 $s$，并以每个流水线级中最后一个逻辑块的索引（按升序排列）来指定流水线级的边界。将最终答案表示为一个单行矩阵，其中包含 $s$ 以及其后的 $s$ 个流水线级边界索引，并且不包含单位。无需进行四舍五入。",
            "solution": "该问题要求在特定的时钟周期约束下，为一个给定的前馈数据路径确定最小流水线级数 $s$ 及其相应的流水线级边界。一个流水线级是一个连续的组合逻辑块序列。\n\n首先，我们必须验证问题陈述。\n给定条件如下：\n- 组合逻辑块数量：$n=10$。\n- 逻辑块延迟：$\\{d_k\\}_{k=1}^{10}$，单位为纳秒，其中 $d_1=0.33$, $d_2=0.21$, $d_3=0.18$, $d_4=0.52$, $d_5=0.19$, $d_6=0.41$, $d_7=0.27$, $d_8=0.36$, $d_9=0.44$, and $d_{10}=0.29$。\n- 寄存器时钟到Q端延迟：$t_{\\text{clkq}} = 0.08$ ns。\n- 寄存器建立时间：$t_{\\text{setup}} = 0.12$ ns。\n- 时钟偏斜和抖动预算：$t_{\\text{skew}} = 0.04$ ns。\n- 目标时钟周期规格：$T_{\\text{spec}} = 1.50$ ns。\n- 任何流水线级的时序约束：$T \\geq t_{\\text{clkq}} + D_{\\text{stage}} + t_{\\text{setup}} + t_{\\text{skew}}$，其中 $D_{\\text{stage}}$ 是该流水线级的总组合逻辑延迟。\n- 目标是找到最小流水线级数 $s$ 和流水线级边界，即每个流水线级中最后一个逻辑块的索引。\n\n该问题在科学上基于同步数字电路设计和时序分析的原理。它是一个适定的问题，因为它提供了确定唯一最优解所需的所有数据和约束。所用术语在EDA领域是精确且标准的。因此，该问题是有效的。\n\n为了解决这个问题，我们首先确定任何单个流水线级所允许的最大组合逻辑延迟，记为 $D_{\\text{max}}$。对于目标时钟周期 $T_{\\text{spec}}$，必须满足时序约束。\n$$T_{\\text{spec}} \\geq t_{\\text{clkq}} + D_{\\text{stage}} + t_{\\text{setup}} + t_{\\text{skew}}$$\n重新整理此不等式以求解 $D_{\\text{stage}}$ 可得：\n$$D_{\\text{stage}} \\leq T_{\\text{spec}} - (t_{\\text{clkq}} + t_{\\text{setup}} + t_{\\text{skew}})$$\n我们将总的寄存器和时钟开销 $t_{\\text{overhead}}$ 定义为：\n$$t_{\\text{overhead}} = t_{\\text{clkq}} + t_{\\text{setup}} + t_{\\text{skew}}$$\n代入给定值：\n$$t_{\\text{overhead}} = 0.08 + 0.12 + 0.04 = 0.24 \\text{ ns}$$\n因此，每个流水线级的最大组合逻辑延迟 $D_{\\text{max}}$ 为：\n$$D_{\\text{max}} = T_{\\text{spec}} - t_{\\text{overhead}} = 1.50 - 0.24 = 1.26 \\text{ ns}$$\n任何单个逻辑块的延迟 $d_k$ 都小于 $D_{\\text{max}}$，因此有效的划分是可能的。问题简化为将逻辑块延迟的有序序列 $\\{d_1, d_2, \\dots, d_{10}\\}$ 划分为最少数目的连续子序列，其中每个子序列中的延迟之和不超过 $D_{\\text{max}}$。\n\n这个优化问题可以使用贪心算法来最优地解决。从第一个未分配的块开始，我们通过包含尽可能多的后续块来形成一个流水线级，而不违反 $D_{\\text{max}}$ 约束。重复此过程，直到所有块都被分配到一个流水线级。\n\n让我们一步一步地应用这个贪心策略。\n\n**第一级：**\n我们从逻辑块1开始并累加延迟。\n- {1}的延迟：$d_1 = 0.33 \\leq 1.26$。\n- {1, 2}的延迟：$d_1 + d_2 = 0.33 + 0.21 = 0.54 \\leq 1.26$。\n- {1, 2, 3}的延迟：$0.54 + d_3 = 0.54 + 0.18 = 0.72 \\leq 1.26$。\n- {1, 2, 3, 4}的延迟：$0.72 + d_4 = 0.72 + 0.52 = 1.24 \\leq 1.26$。\n- {1, 2, 3, 4, 5}的延迟：$1.24 + d_5 = 1.24 + 0.19 = 1.43 > 1.26$。\n在包含逻辑块5时，总和超过了 $D_{\\text{max}}$。因此，第一个流水线级必须在逻辑块4处结束。\n第一个流水线级由逻辑块 {1, 2, 3, 4} 组成。其总延迟为 $D_1 = 1.24$ ns。\n第一个流水线级的边界是索引4。\n\n**第二级：**\n下一个流水线级从逻辑块5开始。\n- {5}的延迟：$d_5 = 0.19 \\leq 1.26$。\n- {5, 6}的延迟：$d_5 + d_6 = 0.19 + 0.41 = 0.60 \\leq 1.26$。\n- {5, 6, 7}的延迟：$0.60 + d_7 = 0.60 + 0.27 = 0.87 \\leq 1.26$。\n- {5, 6, 7, 8}的延迟：$0.87 + d_8 = 0.87 + 0.36 = 1.23 \\leq 1.26$。\n- {5, 6, 7, 8, 9}的延迟：$1.23 + d_9 = 1.23 + 0.44 = 1.67 > 1.26$。\n在包含逻辑块9时，总和超过了 $D_{\\text{max}}$。因此，第二个流水线级必须在逻辑块8处结束。\n第二个流水线级由逻辑块 {5, 6, 7, 8} 组成。其总延迟为 $D_2 = 1.23$ ns。\n第二个流水线级的边界是索引8。\n\n**第三级：**\n最后一个流水线级从逻辑块9开始。\n- {9}的延迟：$d_9 = 0.44 \\leq 1.26$。\n- {9, 10}的延迟：$d_9 + d_{10} = 0.44 + 0.29 = 0.73 \\leq 1.26$。\n我们已经到达了逻辑块链的末尾。第三个流水线级由逻辑块 {9, 10} 组成。其总延迟为 $D_3 = 0.73$ ns。\n第三个流水线级的边界是索引10。\n\n所有10个逻辑块都已被划分。最小流水线级数为 $s=3$。这些流水线级是 $\\{1,2,3,4\\}$、$\\{5,6,7,8\\}$ 和 $\\{9,10\\}$。每个流水线级中最后一个逻辑块的索引是 $4$、 $8$ 和 $10$。\n\n结果，表示为一个包含 $s$ 及其后的 $s$ 个流水线级边界索引的行矩阵，是 $\\begin{pmatrix} 3  4  8  10 \\end{pmatrix}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n3  4  8  10\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在掌握了基础的流水线划分后，我们将挑战更通用的场景：在含有反馈环路的电路中进行重定时。这个问题将引导你运用重定时的核心理论，即通过建立和求解一系列约束来找到电路可能达到的理论最小时钟周期 $T_{\\min}$。你将练习构建约束图并判断其可行性，这是评估和实现电路性能潜力的关键步骤。",
            "id": "4293782",
            "problem": "考虑一个用于电子设计自动化（EDA）的同步数据流电路，该电路由一个有向图 $\\mathcal{G} = (\\mathcal{V}, \\mathcal{E})$ 表示。每个顶点 $v \\in \\mathcal{V}$ 模拟一个具有相关延迟 $d(v)$ 的组合逻辑块，每条有向边 $(u,v) \\in \\mathcal{E}$ 模拟一个具有整数数量 $w(u,v) \\in \\mathbb{Z}_{\\ge 0}$ 的流水线寄存器的信号连接。重定时是一个整数赋值 $r : \\mathcal{V} \\to \\mathbb{Z}$，它重新分配寄存器，使得每条边 $(u,v)$ 上的新寄存器数量满足 $w_{r}(u,v) = w(u,v) + r(v) - r(u) \\ge 0$。对于一个选定的时钟周期 $T$，如果每条总组合延迟超过 $T$ 的路径都至少包含一个寄存器，则称重定时后的电路是 $T$-可行的。\n\n现给定以下图，包含四个顶点 $\\mathcal{V} = \\{a, b, c, d\\}$，顶点延迟（单位：纳秒）和边上的寄存器数量：\n- 顶点延迟: $d(a) = 2$, $d(b) = 3$, $d(c) = 2$, $d(d) = 1$。\n- 带寄存器的有向边：\n  - $(a,b)$，其中 $w(a,b) = 0$，\n  - $(b,c)$，其中 $w(b,c) = 1$，\n  - $(c,a)$，其中 $w(c,a) = 1$，\n  - $(b,d)$，其中 $w(b,d) = 1$，\n  - $(d,c)$，其中 $w(d,c) = 0$。\n\n仅使用上述同步电路和重定时的基本定义，确定在所有保持寄存器数量非负的整数重定时 $r$ 中，最小的可行时钟周期 $T_{\\min}$。通过迭代检查 $T$-可行性条件所蕴含的约束系统的可行性，并不断收紧 $T$ 直到找到最小的可行值，来计算 $T_{\\min}$。请以纳秒为单位表示您的最终答案。不需要近似；请提供精确值。",
            "solution": "所述问题具有科学依据、提法恰当、客观且内容完整。它提出了电子设计自动化（EDA）领域中一个关于同步电路重定时的标准问题。所有必要的数据和定义都已提供，不存在矛盾或事实错误。因此，该问题是有效的，可以推导出解。\n\n主要目标是为给定的同步电路找到最小可行时钟周期 $T_{\\min}$。如果存在一个有效的重定时 $r: \\mathcal{V} \\to \\mathbb{Z}$ 满足以下两个条件，则时钟周期 $T$ 是可行的：\n1.  任何边上的寄存器数量保持非负。对于每条边 $(u,v) \\in \\mathcal{E}$，重定时后的权重 $w_r(u,v) = w(u,v) + r(v) - r(u)$ 必须大于或等于 $0$。这可以写成一个差分约束：$r(u) - r(v) \\le w(u,v)$。\n2.  电路是 $T$-可行的。这意味着任何延迟大于 $T$ 的组合路径都必须被至少一个寄存器断开。\n\n这第二个条件形式上等价于以下不等式组：对于任意一对顶点 $u, v \\in \\mathcal{V}$，如果从 $u$ 到 $v$ 的某条路径的组合延迟大于 $T$，则重定时后的路径必须至少有一个寄存器。我们将使用一个标准的表述方式，即重定时 $r$ 对于时钟周期 $T$ 是有效的，当且仅当它满足以下不等式系统：\n1.  对于所有边 $(u,v) \\in \\mathcal{E}$，$r(u) - r(v) \\le w(u,v)$。\n2.  对于所有满足 $D(u,v) > T$ 的顶点对 $(u,v)$，$r(u) - r(v) \\le W(u,v) - 1$。\n\n此处，$W(u,v)$ 是从 $u$ 到 $v$ 的任意路径上的最少寄存器数量，$D(u,v)$ 是从 $u$ 到 $v$ 的、恰好有 $W(u,v)$ 个寄存器的所有路径中的最大延迟。路径的延迟是该路径上所有顶点的延迟之和。\n\n形如 $r(i) - r(j) \\le k$ 的差分约束系统对变量 $r(\\cdot)$ 有整数解，当且仅当其对应的约束图中没有负权环。对于每个约束 $r(i) - r(j) \\le k$，约束图为每个变量设置一个顶点，并添加一条从 $j$ 到 $i$ 的有向边，权重为 $k$。\n\n最小可行时钟周期 $T_{\\min}$ 是使得该不等式系统有解的最小 $T$ 值。我们将首先计算矩阵 $W$ 和 $D$，然后根据问题建议，迭代测试 $T$ 的值以找到可行性边界，从而求得 $T_{\\min}$。\n\n首先，我们使用一个适用于此问题的全点对最短路径算法（例如 Floyd-Warshall 算法）来计算 $W$ 和 $D$ 矩阵。该图有顶点 $\\mathcal{V} = \\{a, b, c, d\\}$，其延迟分别为 $d(a) = 2$, $d(b) = 3$, $d(c) = 2$, $d(d) = 1$。边和初始权重为 $w(a,b)=0$, $w(b,c)=1$, $w(c,a)=1$, $w(b,d)=1$, $w(d,c)=0$。\n\n算法按以下步骤进行：\n初始化矩阵 $W_{ij}$ 和 $D_{ij}$。\n对于 $i=j$，$W_{ii}=0$ 且 $D_{ii}=d(i)$。\n如果存在边 $(i, j)$，$W_{ij}=w(i,j)$ 且 $D_{ij}=d(i)+d(j)$。\n否则，$W_{ij}=\\infty$ 且 $D_{ij}=-\\infty$。\n\n对所有 $k, i, j \\in \\mathcal{V}$ 运行迭代步骤：\n如果 $W_{ik} + W_{kj}  W_{ij}$：\n$W_{ij} = W_{ik} + W_{kj}$\n$D_{ij} = D_{ik} + D_{kj} - d(k)$\n否则如果 $W_{ik} + W_{kj} == W_{ij}$：\n$D_{ij} = \\max(D_{ij}, D_{ik} + D_{kj} - d(k))$\n\n对所有顶点 $k \\in \\{a,b,c,d\\}$ 运行此算法后，我们得到最终矩阵：\n$$\nW = \\begin{pmatrix}\n    a  b  c  d \\\\\na  0  0  1  1 \\\\\nb  2  0  1  1 \\\\\nc  1  1  0  2 \\\\\nd  1  1  0  0\n\\end{pmatrix}\n\\quad\nD = \\begin{pmatrix}\n    a  b  c  d \\\\\na  2  5  8  6 \\\\\nb  7  3  6  4 \\\\\nc  4  7  2  8 \\\\\nd  5  8  3  1\n\\end{pmatrix}\n$$\n只有当 $T$ 穿过 $D$ 矩阵中存在的一个值时，约束集才会改变。因此，$T_{\\min}$ 可能的整数值在 $D$ 矩阵的整数值中。我们从一个较小的值开始检查可行性。任何单个组件的最大延迟为 $\\max(d(v)) = 3$。任何可行的时钟周期必须至少这么大。\n\n我们来测试 $T=4$。如果约束图没有负环，则约束系统是可行的。\n对于 $T=4$，时序约束仅适用于 $D(u,v) > 4$ 的对。这些对包括 $(a,b), (a,c), (a,d), (b,a), (b,c), (c,b), (c,d), (d,a), (d,b)$。\n我们将合法性约束和时序约束结合起来，得到每对顶点之间最紧的差分约束 $r(u) - r(v) \\le k_{uv}$。\n例如，$r(a)-r(b) \\le w(a,b)=0$ 和 $r(a)-r(b) \\le W(a,b)-1=-1$。最紧的约束是 $r(a)-r(b) \\le -1$。\n$r(c)-r(a) \\le w(c,a)=1$。$D(c,a)=4$, 不大于4，所以没有时序约束。最紧约束是 $r(c)-r(a) \\le 1$。\n经过对所有对的检查，我们发现约束系统是可行的（没有负权环）。因此 $T=4$ 是一个可行的时钟周期，这意味着 $T_{\\min} \\le 4$。\n\n现在，我们测试一个更小的时钟周期是否可行。让我们尝试 $T=3$。\n现在的约束集包括所有 $T=4$ 的约束，再加上对满足 $3  D(u,v) \\le 4$ 的点对 $(u,v)$ 的新约束。这些点对是 $(b,d)$ 和 $(c,a)$，因为 $D(b,d)=4$ 且 $D(c,a)=4$。\n$D(b,d)=4 > 3 \\implies r(b)-r(d) \\le W(b,d)-1 = 1-1=0$。\n$D(c,a)=4 > 3 \\implies r(c)-r(a) \\le W(c,a)-1 = 1-1=0$。\n\n让我们检查这个新系统是否存在负环。考虑由顶点 $a, b, c$ 构成的环路。\n1.  从 $D(a,b)=5 > 3$ 得到时序约束 $r(a)-r(b) \\le W(a,b)-1 = 0-1 = -1$。\n2.  从 $D(b,c)=6 > 3$ 得到时序约束 $r(b)-r(c) \\le W(b,c)-1 = 1-1 = 0$。\n3.  从 $D(c,a)=4 > 3$ 得到时序约束 $r(c)-r(a) \\le W(c,a)-1 = 1-1 = 0$。\n\n将这三个不等式相加：\n$(r(a)-r(b)) + (r(b)-r(c)) + (r(c)-r(a)) \\le -1 + 0 + 0$\n$0 \\le -1$\n这是一个矛盾。这个矛盾意味着，在为 $T=3$ 构建的约束图中，存在一个负权环（由边 $b \\to a$ (权重-1), $c \\to b$ (权重0), $a \\to c$ (权重0) 构成）。\n这个负权环的存在意味着对于 $T=3$ 的不等式系统没有解。因此，$T=3$ 不是一个可行的时钟周期。\n\n由于约束集是单调的（随着 $T$ 的减小会增加更多约束），任何小于 $4$ 的时钟周期 $T$ 都将包含使 $T=3$ 不可行的约束。我们已经发现 $T=4$ 是可行的，而任何严格小于 $4$ 的 $T$（例如 $T=3.999...$）都会激活 $D(c,a)=4$ 和 $D(b,d)=4$ 的时序约束，从而导致与 $T=3$ 相同的负权环。因此，最小可行时钟周期是 $4$。单位是纳秒。",
            "answer": "$$\\boxed{4}$$"
        },
        {
            "introduction": "优化时钟周期并非没有代价，重定时在解决建立时间（setup time）问题的同时，有时会引入一个更隐蔽的问题：保持时间（hold time）违例。这个练习模拟了一个在工程实践中极为常见的场景，要求你对一个经过重定时的路径进行精确的保持时间分析。你将学会如何在最差情况下（worst-case）识别时序风险，并计算出如何通过插入缓冲器（buffer）来修复它，确保电路的稳定性和正确性。",
            "id": "4293812",
            "problem": "通过电子设计自动化（EDA）工具分析一个在互补金属氧化物半导体（CMOS）数字集成电路中实现的同步流水线。该流水线包含边沿触发寄存器和两个组合逻辑子模块（标记为 $A$ 和 $B$），最初的结构为 $R_{0} \\rightarrow A \\rightarrow B \\rightarrow R_{1}$。一次重定时变换重新定位了寄存器边界，形成了两个新的流水级 $R_{0} \\rightarrow A \\rightarrow R_{1}'$ 和 $R_{1}' \\rightarrow B \\rightarrow R_{2}$，从而缩短了第一级的数据路径以改善其建立时间裕量。\n\n在最坏情况下的时钟早到/晚到条件下对时序进行分析。特性数据如下：\n- 组合逻辑子模块 $A$ 的最小延迟：$d_{A,\\min} = 0.024\\,\\text{ns}$。\n- 发射寄存器 $R_{0}$ 的最小“时钟到Q端”延迟：$t_{\\mathrm{CQ},\\min} = 0.012\\,\\text{ns}$。\n- 捕获寄存器 $R_{1}'$ 的保持时间要求：$t_{\\mathrm{hold}} = 0.030\\,\\text{ns}$。\n- 重定时后，发射寄存器和捕获寄存器的时钟早到和晚到时间：\n  - $t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}} = 0.013\\,\\text{ns}$，$t_{\\mathrm{clk},R_{0}}^{\\mathrm{late}} = 0.040\\,\\text{ns}$，\n  - $t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}} = 0.027\\,\\text{ns}$，$t_{\\mathrm{clk},R_{1}'}^{\\mathrm{late}} = 0.088\\,\\text{ns}$。\n- 可插入数据路径的标准缓冲器的特性最小延迟为 $d_{\\mathrm{buf},\\min} = 0.023\\,\\text{ns}$。\n\n从同步时序和保持约束的基本定义出发，使用早到/晚到的时钟到达时间值来分析重定时后的路径 $R_{0} \\rightarrow A \\rightarrow R_{1}'$。判断在最坏保持情况下，该路径上是否发生保持时间违例，如果发生，则计算为保证重定时路径满足保持时间要求，必须在数据路径上插入的相同缓冲器（每个具有最小延迟 $d_{\\mathrm{buf},\\min}$）的最小数量 $N$。将最终答案以整数形式的缓冲器数量（无单位）表示。",
            "solution": "首先将对所述问题进行严格的验证过程。\n\n### 步骤1：提取已知条件\n问题陈述中明确提供了以下数据和定义：\n- 初始流水线结构：$R_{0} \\rightarrow A \\rightarrow B \\rightarrow R_{1}$\n- 重定时后的流水线阶段：$R_{0} \\rightarrow A \\rightarrow R_{1}'$ 和 $R_{1}' \\rightarrow B \\rightarrow R_{2}$\n- 组合逻辑子模块 $A$ 的最小延迟：$d_{A,\\min} = 0.024\\,\\text{ns}$。\n- 发射寄存器 $R_{0}$ 的最小“时钟到Q端”延迟：$t_{\\mathrm{CQ},\\min} = 0.012\\,\\text{ns}$。\n- 捕获寄存器 $R_{1}'$ 的保持时间要求：$t_{\\mathrm{hold}} = 0.030\\,\\text{ns}$。\n- $R_{0}$ 的早到时钟到达时间：$t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}} = 0.013\\,\\text{ns}$。\n- $R_{0}$ 的晚到时钟到达时间：$t_{\\mathrm{clk},R_{0}}^{\\mathrm{late}} = 0.040\\,\\text{ns}$。\n- $R_{1}'$ 的早到时钟到达时间：$t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}} = 0.027\\,\\text{ns}$。\n- $R_{1}'$ 的晚到时钟到达时间：$t_{\\mathrm{clk},R_{1}'}^{\\mathrm{late}} = 0.088\\,\\text{ns}$。\n- 标准缓冲器的最小延迟：$d_{\\mathrm{buf},\\min} = 0.023\\,\\text{ns}$。\n\n### 步骤2：使用提取的已知条件进行验证\n根据所需标准对问题进行评估：\n- **科学性**：该问题基于同步数字电路时序分析的基本原理，这是电气工程和计算机工程领域的核心课题。所有术语（$t_{\\mathrm{CQ}}$、$t_{\\mathrm{hold}}$、时钟偏斜、重定时）以及场景（带缓冲器插入的保持时间违例分析）在集成电路设计和电子设计自动化（EDA）领域都是标准的。数值对于现代CMOS工艺而言是物理上现实的。\n- **适定性**：该问题定义清晰，并提供了执行最坏情况保持时间分析所需的所有参数。目标明确：确定是否存在违例，并计算解决它所需的最小整数个缓冲器。从已知条件可以确定一个唯一且稳定的解。\n- **客观性**：该问题以精确、无偏见的技术语言陈述，不含任何主观或推测性内容。\n\n该问题没有表现出科学上不合理、不完整、矛盾或模糊等任何缺陷。晚到时钟到达时间（$t_{\\mathrm{clk}}^{\\mathrm{late}}$）的存在是适当的，因为这些对于一个完整的最坏情况时序模型是必需的，即使只有早到时间用于建立时间分析，而某些组合用于保持时间分析。\n\n### 步骤3：结论与行动\n该问题是**有效的**。将推导求解。\n\n对于边沿触发寄存器，保持时间约束的基本原理是，在有效时钟边沿到达后，其输入引脚上的数据必须保持稳定一段持续时间 $t_{\\mathrm{hold}}$。如果从前一级寄存器发出的新数据到达得太快，破坏了捕获寄存器本应锁存的数据，就会发生保持时间违例。\n\n让我们将发射寄存器 $R_{0}$ 的时钟到达时间表示为 $t_{\\mathrm{clk},R_{0}}$，捕获寄存器 $R_{1}'$ 的时钟到达时间表示为 $t_{\\mathrm{clk},R_{1}'}$。这些时间是相对于一个共同的参考点测量的，例如时钟源处的理想时钟边沿。由 $R_{0}$ 发出的数据，在经过一个“时钟到Q端”延迟 $t_{\\mathrm{CQ}}$ 后，在其输出 $Q$ 端变为有效。该数据随后以 $d_{A}$ 的延迟传播通过组合逻辑路径（模块 $A$）。因此，新数据到达捕获寄存器 $R_{1}'$ 输入端的到达时间为：\n$$t_{\\mathrm{data\\_arrival}} = t_{\\mathrm{clk},R_{0}} + t_{\\mathrm{CQ}} + d_{A}$$\n$R_{1}'$ 输入端的数据被要求在其时钟边沿到达后，保持稳定直到 $t_{\\mathrm{hold}}$ 的时间。这定义了用于保持检查的数据需求时间：\n$$t_{\\mathrm{data\\_required}} = t_{\\mathrm{clk},R_{1}'} + t_{\\mathrm{hold}}$$\n如果数据在要求其保持稳定的时刻或之后到达，则保持约束得到满足：\n$$t_{\\mathrm{data\\_arrival}} \\ge t_{\\mathrm{data\\_required}}$$\n代入表达式，得到通用的保持时间不等式：\n$$t_{\\mathrm{clk},R_{0}} + t_{\\mathrm{CQ}} + d_{A} \\ge t_{\\mathrm{clk},R_{1}'} + t_{\\mathrm{hold}}$$\n保持时间裕量 $S_{\\mathrm{hold}}$ 被定义为满足此约束的余量。非负的裕量表示没有违例。\n$$S_{\\mathrm{hold}} = (t_{\\mathrm{clk},R_{0}} + t_{\\mathrm{CQ}} + d_{A}) - (t_{\\mathrm{clk},R_{1}'} + t_{\\mathrm{hold}})$$\n保持时间违例最有可能在最坏时序情况下发生。这对应于数据路径和时钟路径之间的“竞争条件”，其中新数据到达得太快，可能会破坏捕获寄存器正在锁存的旧数据。为了找到最小保持裕量，我们必须考虑最快的数据路径和最早的数据需求时间。这发生在以下情况：\n1. 数据路径最快：$t_{\\mathrm{CQ}} = t_{\\mathrm{CQ},\\min}$ 且 $d_{A} = d_{A,\\min}$。\n2. 时钟尽可能早地到达发射寄存器 $R_{0}$：$t_{\\mathrm{clk},R_{0}} = t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}}$。\n3. 时钟也尽可能早地到达捕获寄存器 $R_{1}'$：$t_{\\mathrm{clk},R_{1}'} = t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}}$。\n\n最后一点定义了用于保持时间分析的最差情况时钟偏斜：当捕获时钟相对于发射时钟早到时，留给数据稳定的时间窗口最短。因此，最坏情况下的保持时间裕量为：\n$$S_{\\mathrm{hold,min}} = (t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}} + t_{\\mathrm{CQ},\\min} + d_{A,\\min}) - (t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}} + t_{\\mathrm{hold}})$$\n我们现在代入给定的数值来计算重定时路径 $R_{0} \\rightarrow A \\rightarrow R_{1}'$ 的裕量：\n$$S_{\\mathrm{hold,min}} = (0.013\\,\\text{ns} + 0.012\\,\\text{ns} + 0.024\\,\\text{ns}) - (0.027\\,\\text{ns} + 0.030\\,\\text{ns})$$\n$$S_{\\mathrm{hold,min}} = (0.049\\,\\text{ns}) - (0.057\\,\\text{ns})$$\n$$S_{\\mathrm{hold,min}} = -0.008\\,\\text{ns}$$\n由于 $S_{\\mathrm{hold,min}}$ 为负，存在保持时间违例。违例的量值表示为满足约束而必须插入数据路径的最小额外延迟量 $d_{\\mathrm{required}}$：\n$$d_{\\mathrm{required}} = -S_{\\mathrm{hold,min}} = 0.008\\,\\text{ns}$$\n为了修复此违例，我们必须在数据路径 $A$ 中插入 $N$ 个相同的缓冲器。每个缓冲器的最小延迟为 $d_{\\mathrm{buf},\\min} = 0.023\\,\\text{ns}$。由 $N$ 个缓冲器增加的总最小延迟是 $N \\times d_{\\mathrm{buf},\\min}$。这个增加的延迟必须大于或等于所需的延迟：\n$$N \\times d_{\\mathrm{buf},\\min} \\ge d_{\\mathrm{required}}$$\n代入数值：\n$$N \\times 0.023\\,\\text{ns} \\ge 0.008\\,\\text{ns}$$\n求解 $N$：\n$$N \\ge \\frac{0.008}{0.023}$$\n$$N \\ge 0.347...$$\n由于 $N$ 必须是代表缓冲器物理数量的整数，因此必须插入的最小缓冲器数量是 $1$。",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Improving a circuit's clock frequency often begins with pipelining, the process of breaking long combinational paths with registers. This exercise provides a practical scenario where you must partition a feedforward datapath to meet a specific timing target. By applying a greedy algorithm, you will determine the minimum number of pipeline stages required, a fundamental skill in high-performance digital design. ",
            "id": "4293824",
            "problem": "A synchronous datapath in an Electronic Design Automation (EDA) context consists of a single feedforward chain of $n$ combinational blocks in a fixed topological order, with block $k$ having worst-case Process-Voltage-Temperature (PVT) delay $d_k$. Edge-triggered pipeline registers may be inserted between adjacent blocks to create pipeline stages. Each stage is defined as a contiguous subsequence of the chain and is bounded by pipeline registers at its input and output. The timing of each stage must obey the standard synchronous constraint that the clock period $T$ satisfies $T \\geq t_{\\text{clkq}} + D_{\\text{stage}} + t_{\\text{setup}} + t_{\\text{skew}}$, where $t_{\\text{clkq}}$ is the register clock-to-$Q$ delay, $t_{\\text{setup}}$ is the register setup time, $t_{\\text{skew}}$ is the effective clock skew plus jitter budget, and $D_{\\text{stage}}$ is the total combinational delay across the stage.\n\nYou are given a datapath with $n=10$ and delay profile $\\{d_1,d_2,\\dots,d_{10}\\}$ in nanoseconds defined by\n$$\nd_1=0.33,\\quad d_2=0.21,\\quad d_3=0.18,\\quad d_4=0.52,\\quad d_5=0.19,\\quad d_6=0.41,\\quad d_7=0.27,\\quad d_8=0.36,\\quad d_9=0.44,\\quad d_{10}=0.29.\n$$\nThe register parameters are $t_{\\text{clkq}}=0.08$ nanoseconds, $t_{\\text{setup}}=0.12$ nanoseconds, and $t_{\\text{skew}}=0.04$ nanoseconds. The target clock period specification is $T_{\\text{spec}}=1.50$ nanoseconds.\n\nAssuming retiming transformations can freely move registers across combinational blocks without changing functionality and that pipeline stages must be contiguous segments of the given order, determine the minimum number of pipeline stages $s$ needed so that every stage meets the target $T_{\\text{spec}}$, and specify the stage boundaries as the indices of the last block in each stage (in increasing order). Express your final answer as a single row matrix containing $s$ followed by the $s$ stage-boundary indices, and do not include units. No rounding is required.",
            "solution": "The problem asks for the minimum number of pipeline stages, $s$, and the corresponding stage boundaries for a given feedforward datapath, subject to a specific clock period constraint. A stage is a contiguous sequence of combinational blocks.\n\nFirst, we must validate the problem statement.\nThe givens are:\n- Number of combinational blocks: $n=10$.\n- Delays of the blocks: $\\{d_k\\}_{k=1}^{10}$ in nanoseconds, where $d_1=0.33$, $d_2=0.21$, $d_3=0.18$, $d_4=0.52$, $d_5=0.19$, $d_6=0.41$, $d_7=0.27$, $d_8=0.36$, $d_9=0.44$, and $d_{10}=0.29$.\n- Register clock-to-Q delay: $t_{\\text{clkq}} = 0.08$ ns.\n- Register setup time: $t_{\\text{setup}} = 0.12$ ns.\n- Clock skew and jitter budget: $t_{\\text{skew}} = 0.04$ ns.\n- Target clock period specification: $T_{\\text{spec}} = 1.50$ ns.\n- Timing constraint for any stage: $T \\geq t_{\\text{clkq}} + D_{\\text{stage}} + t_{\\text{setup}} + t_{\\text{skew}}$, where $D_{\\text{stage}}$ is the stage's total combinational delay.\n- The objective is to find the minimum number of stages, $s$, and the stage boundaries, which are the indices of the last block in each stage.\n\nThe problem is scientifically grounded in the principles of synchronous digital circuit design and timing analysis. It is well-posed, as it provides all necessary data and constraints to determine a unique, optimal solution. The terminology is precise and standard in the field of EDA. The problem is therefore valid.\n\nTo solve the problem, we first determine the maximum allowable combinational delay for any single pipeline stage, denoted $D_{\\text{max}}$. The timing constraint must be met for the target clock period, $T_{\\text{spec}}$.\n$$T_{\\text{spec}} \\geq t_{\\text{clkq}} + D_{\\text{stage}} + t_{\\text{setup}} + t_{\\text{skew}}$$\nRearranging this inequality to solve for $D_{\\text{stage}}$ gives:\n$$D_{\\text{stage}} \\leq T_{\\text{spec}} - (t_{\\text{clkq}} + t_{\\text{setup}} + t_{\\text{skew}})$$\nLet's define the total register and clocking overhead, $t_{\\text{overhead}}$, as:\n$$t_{\\text{overhead}} = t_{\\text{clkq}} + t_{\\text{setup}} + t_{\\text{skew}}$$\nSubstituting the given values:\n$$t_{\\text{overhead}} = 0.08 + 0.12 + 0.04 = 0.24 \\text{ ns}$$\nThe maximum combinational delay per stage, $D_{\\text{max}}$, is therefore:\n$$D_{\\text{max}} = T_{\\text{spec}} - t_{\\text{overhead}} = 1.50 - 0.24 = 1.26 \\text{ ns}$$\nAny individual block delay $d_k$ is less than $D_{\\text{max}}$, so a valid partitioning is possible. The problem reduces to partitioning the ordered sequence of block delays $\\{d_1, d_2, \\dots, d_{10}\\}$ into the minimum number of contiguous subsequences, where the sum of delays in each subsequence does not exceed $D_{\\text{max}}$.\n\nThis optimization problem can be solved optimally using a greedy algorithm. Starting from the first unassigned block, we form a stage by including as many subsequent blocks as possible without violating the $D_{\\text{max}}$ constraint. This process is repeated until all blocks are assigned to a stage.\n\nLet's apply this greedy strategy step-by-step.\n\n**Stage 1:**\nWe start with block $1$ and accumulate delays.\n- Delay of $\\{1\\}$: $d_1 = 0.33 \\leq 1.26$.\n- Delay of $\\{1, 2\\}$: $d_1 + d_2 = 0.33 + 0.21 = 0.54 \\leq 1.26$.\n- Delay of $\\{1, 2, 3\\}$: $0.54 + d_3 = 0.54 + 0.18 = 0.72 \\leq 1.26$.\n- Delay of $\\{1, 2, 3, 4\\}$: $0.72 + d_4 = 0.72 + 0.52 = 1.24 \\leq 1.26$.\n- Delay of $\\{1, 2, 3, 4, 5\\}$: $1.24 + d_5 = 1.24 + 0.19 = 1.43 > 1.26$.\nThe sum exceeds $D_{\\text{max}}$ upon including block $5$. Therefore, the first stage must end at block $4$.\nThe first stage consists of blocks $\\{1, 2, 3, 4\\}$. Its total delay is $D_1 = 1.24$ ns.\nThe first stage boundary is index $4$.\n\n**Stage 2:**\nThe next stage starts with block $5$.\n- Delay of $\\{5\\}$: $d_5 = 0.19 \\leq 1.26$.\n- Delay of $\\{5, 6\\}$: $d_5 + d_6 = 0.19 + 0.41 = 0.60 \\leq 1.26$.\n- Delay of $\\{5, 6, 7\\}$: $0.60 + d_7 = 0.60 + 0.27 = 0.87 \\leq 1.26$.\n- Delay of $\\{5, 6, 7, 8\\}$: $0.87 + d_8 = 0.87 + 0.36 = 1.23 \\leq 1.26$.\n- Delay of $\\{5, 6, 7, 8, 9\\}$: $1.23 + d_9 = 1.23 + 0.44 = 1.67 > 1.26$.\nThe sum exceeds $D_{\\text{max}}$ upon including block $9$. Therefore, the second stage must end at block $8$.\nThe second stage consists of blocks $\\{5, 6, 7, 8\\}$. Its total delay is $D_2 = 1.23$ ns.\nThe second stage boundary is index $8$.\n\n**Stage 3:**\nThe final stage starts with block $9$.\n- Delay of $\\{9\\}$: $d_9 = 0.44 \\leq 1.26$.\n- Delay of $\\{9, 10\\}$: $d_9 + d_{10} = 0.44 + 0.29 = 0.73 \\leq 1.26$.\nWe have reached the end of the block chain. The third stage consists of blocks $\\{9, 10\\}$. Its total delay is $D_3 = 0.73$ ns.\nThe third stage boundary is index $10$.\n\nAll $10$ blocks have been partitioned. The minimum number of stages is $s=3$. The stages are $\\{1,2,3,4\\}$, $\\{5,6,7,8\\}$, and $\\{9,10\\}$. The indices of the last block in each stage are $4$, $8$, and $10$.\n\nThe result, as a row matrix containing $s$ followed by the $s$ stage-boundary indices, is $\\begin{pmatrix} 3 & 4 & 8 & 10 \\end{pmatrix}$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n3 & 4 & 8 & 10\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "While pipelining is effective for linear paths, retiming provides a more powerful, generalized approach for optimizing circuits with complex topologies, including feedback loops. This problem challenges you to move beyond simple partitioning and apply the formal theory of retiming to find the absolute minimum clock period a circuit can achieve. Solving this involves analyzing the circuit's structural properties to determine the theoretical performance limit. ",
            "id": "4293782",
            "problem": "Consider a synchronous dataflow circuit represented by a directed graph $\\mathcal{G} = (\\mathcal{V}, \\mathcal{E})$ used in Electronic Design Automation (EDA). Each vertex $v \\in \\mathcal{V}$ models a combinational logic block with an associated delay $d(v)$, and each directed edge $(u,v) \\in \\mathcal{E}$ models a signal connection with an integer number of pipeline registers $w(u,v) \\in \\mathbb{Z}_{\\ge 0}$. A retiming is an integer assignment $r : \\mathcal{V} \\to \\mathbb{Z}$ that redistributes registers such that the new register count on each edge $(u,v)$ satisfies $w_{r}(u,v) = w(u,v) + r(v) - r(u) \\ge 0$. For a chosen clock period $T$, a retimed circuit is $T$-feasible if every path with total combinational delay exceeding $T$ contains at least one register.\n\nYou are given the following graph with four vertices $\\mathcal{V} = \\{a, b, c, d\\}$, vertex delays in nanoseconds, and edge register counts:\n- Vertex delays: $d(a) = 2$, $d(b) = 3$, $d(c) = 2$, $d(d) = 1$.\n- Directed edges with registers:\n  - $(a,b)$ with $w(a,b) = 0$,\n  - $(b,c)$ with $w(b,c) = 1$,\n  - $(c,a)$ with $w(c,a) = 1$,\n  - $(b,d)$ with $w(b,d) = 1$,\n  - $(d,c)$ with $w(d,c) = 0$.\n\nUsing only the fundamental definitions of synchronous circuits and retiming stated above, determine the minimal feasible clock period $T_{\\min}$ over all integer retimings $r$ that preserve nonnegative registers. Compute $T_{\\min}$ by iteratively checking the feasibility of the constraint system implied by the $T$-feasibility condition and tightening $T$ until the smallest feasible value is found. Express your final answer in nanoseconds. No approximation is required; provide an exact value.",
            "solution": "The problem as stated is scientifically grounded, well-posed, objective, and self-contained. It presents a standard problem in the field of Electronic Design Automation (EDA) concerning retiming of synchronous circuits. All necessary data and definitions are provided, and there are no contradictions or factual errors. Therefore, the problem is valid and a solution can be derived.\n\nThe primary goal is to find the minimal feasible clock period $T_{\\min}$ for the given synchronous circuit. A clock period $T$ is feasible if there exists a valid retiming $r: \\mathcal{V} \\to \\mathbb{Z}$ that satisfies two conditions:\n1.  The number of registers on any edge remains non-negative. For each edge $(u,v) \\in \\mathcal{E}$, the retimed weight $w_r(u,v) = w(u,v) + r(v) - r(u)$ must be greater than or equal to $0$. This can be written as a difference constraint: $r(u) - r(v) \\le w(u,v)$.\n2.  The circuit is $T$-feasible. This means that any combinational path with a delay greater than $T$ must be broken by at least one register.\n\nThis second condition is formally equivalent to the set of inequalities: for any pair of vertices $u, v \\in \\mathcal{V}$, if a path from $u$ to $v$ has a combinational delay greater than $T$, then the retimed path must have at least one register. A standard formulation, which we will use, states that a retiming $r$ is valid for a clock period $T$ if and only if it satisfies the following system of inequalities:\n1.  $r(u) - r(v) \\le w(u,v)$ for all edges $(u,v) \\in \\mathcal{E}$.\n2.  $r(u) - r(v) \\le W(u,v) - 1$ for all pairs of vertices $(u,v)$ where $D(u,v) > T$.\n\nHere, $W(u,v)$ is the minimum number of registers on any path from $u$ to $v$, and $D(u,v)$ is the maximum delay of any path from $u$ to $v$ that has exactly $W(u,v)$ registers. The delay of a path is the sum of the delays of all vertices on that path.\n\nA system of difference constraints of the form $r(i) - r(j) \\le k$ has an integer solution for the variables $r(\\cdot)$ if and only if the corresponding constraint graph has no negative-weight cycles. The constraint graph has a vertex for each variable and a directed edge from $j$ to $i$ with weight $k$ for each constraint $r(i) - r(j) \\le k$.\n\nThe minimal clock period $T_{\\min}$ is the smallest value of $T$ for which this system of inequalities has a solution. We will find $T_{\\min}$ by first computing the matrices $W$ and $D$, and then, as suggested by the problem, iteratively testing values of $T$ to find the feasibility boundary.\n\nFirst, we compute the $W$ and $D$ matrices using an all-pairs shortest path algorithm, such as the Floyd-Warshall algorithm, adapted for this problem. The graph has vertices $\\mathcal{V} = \\{a, b, c, d\\}$ with delays $d(a) = 2$, $d(b) = 3$, $d(c) = 2$, $d(d) = 1$. The edges and initial weights are $w(a,b)=0$, $w(b,c)=1$, $w(c,a)=1$, $w(b,d)=1$, $w(d,c)=0$.\n\nThe algorithm proceeds as follows:\nInitialize matrices $W_{ij}$ and $D_{ij}$.\nFor $i=j$, $W_{ii}=0$ and $D_{ii}=d(i)$.\nIf an edge $(i, j)$ exists, $W_{ij}=w(i,j)$ and $D_{ij}=d(i)+d(j)$.\nOtherwise, $W_{ij}=\\infty$ and $D_{ij}=-\\infty$.\n\nRun the iterative step for $k, i, j \\in \\mathcal{V}$:\nIf $W_{ik} + W_{kj} < W_{ij}$:\n$W_{ij} = W_{ik} + W_{kj}$\n$D_{ij} = D_{ik} + D_{kj} - d(k)$\nElse if $W_{ik} + W_{kj} == W_{ij}$:\n$D_{ij} = \\max(D_{ij}, D_{ik} + D_{kj} - d(k))$\n\nAfter running this algorithm over all vertices $k \\in \\{a,b,c,d\\}$, we obtain the final matrices:\n$$\nW = \\begin{pmatrix}\n  0 & 0 & 1 & 1 \\\\\n  2 & 0 & 1 & 1 \\\\\n  1 & 1 & 0 & 2 \\\\\n  1 & 1 & 0 & 0\n\\end{pmatrix}\n\\quad\nD = \\begin{pmatrix}\n  2 & 5 & 8 & 6 \\\\\n  7 & 3 & 6 & 4 \\\\\n  4 & 7 & 2 & 8 \\\\\n  5 & 8 & 3 & 1\n\\end{pmatrix}\n$$\nThe set of constraints changes only when $T$ crosses a value present in the $D$ matrix. The possible integer values for $T_{\\min}$ are therefore among the integer values in $D$. Let's check for feasibility starting from a low value. The maximum delay of any single component is $\\max(d(v)) = 3$. Any feasible clock period must be at least this large.\n\nLet's test $T=4$. The constraint system is feasible if the constraint graph has no negative cycles.\nThe constraints for $T=4$ are:\n1.  From graph edges:\n    $r(a)-r(b) \\le 0$, $r(b)-r(c) \\le 1$, $r(c)-r(a) \\le 1$, $r(b)-r(d) \\le 1$, $r(d)-r(c) \\le 0$.\n2.  From pairs $(u,v)$ with $D(u,v) > 4$:\n    $D(a,b)=5 \\implies r(a)-r(b) \\le W(a,b)-1 = -1$.\n    $D(a,c)=8 \\implies r(a)-r(c) \\le W(a,c)-1 = 0$.\n    $D(a,d)=6 \\implies r(a)-r(d) \\le W(a,d)-1 = 0$.\n    $D(b,a)=7 \\implies r(b)-r(a) \\le W(b,a)-1 = 1$.\n    $D(b,c)=6 \\implies r(b)-r(c) \\le W(b,c)-1 = 0$.\n    $D(c,b)=7 \\implies r(c)-r(b) \\le W(c,b)-1 = 0$.\n    $D(c,d)=8 \\implies r(c)-r(d) \\le W(c,d)-1 = 1$.\n    $D(d,a)=5 \\implies r(d)-r(a) \\le W(d,a)-1 = 0$.\n    $D(d,b)=8 \\implies r(d)-r(b) \\le W(d,b)-1 = 0$.\n\nCombining these and taking the tightest constraint for each pair, the constraint graph has edges $(v,u)$ with weights:\n$b \\to a$ weight $1$, $c \\to a$ weight $1$, $d \\to a$ weight $0$.\n$a \\to b$ weight $-1$, $c \\to b$ weight $0$, $d \\to b$ weight $0$.\n$a \\to c$ weight $0$, $b \\to c$ weight $0$, $d \\to c$ weight $0$.\n$a \\to d$ weight $0$, $b \\to d$ weight $1$, $c \\to d$ weight $1$.\nA search for cycles in this graph reveals no negative-weight cycles. For instance, the cycle $a \\to b \\to a$ has weight $-1+1=0$. The cycle $a \\to c \\to b \\to a$ has weight $0+0+(-1)=-1$. Wait, let's check the constraints again.\n$r(u)-r(v) \\le k$ becomes edge $v \\to u$ with weight $k$.\n$r(c)-r(b) \\le W(c,b)-1 = 0$ is edge $b \\to c$ weight $0$.\n$r(a)-r(c) \\le W(a,c)-1 = 0$ is edge $c \\to a$ weight $0$.\n$r(b)-r(a) \\le W(a,b)-1 = -1$ is edge $a \\to b$ weight $-1$.\nCycle $a \\to b \\to c \\to a$: total weight is $(-1) + 0 + 0 = -1$.\nApologies, the original solution had a flaw in listing the constraint graph edges. Let's list again carefully:\n- $r(a)-r(b) \\le -1$: edge $b \\to a$ weight $-1$.\n- $r(b)-r(c) \\le 0$: edge $c \\to b$ weight $0$.\n- $r(c)-r(a) \\le 0$: edge $a \\to c$ weight $0$ (from $D(a,c)=8 > 4$, $W=1$).\n- $r(c)-r(a) \\le 1$: from edge $(c,a)$, weight 1. The tighter one is 0. So edge $a \\to c$ has weight 0.\n- Let's check cycle $a \\to c \\to b \\to a$. Constraints: $r(c)-r(a) \\le 0$, $r(b)-r(c) \\le 0$, $r(a)-r(b) \\le -1$.\nSumming them: $(r(c)-r(a))+(r(b)-r(c))+(r(a)-r(b)) \\le 0+0-1 \\implies 0 \\le -1$. A contradiction.\nThis means $T=4$ is infeasible.\n\nLet's check the minimum clock period possible for any loop. This is the maximum of $\\frac{D(C)}{W(C)}$ for all cycles $C$.\n- Cycle $a \\to b \\to c \\to a$: $D = d(a)+d(b)+d(c)=7$. $W=w(a,b)+w(b,c)+w(c,a)=0+1+1=2$. Ratio is $7/2=3.5$.\n- Cycle $b \\to d \\to c \\to b$: $D=d(b)+d(d)+d(c)=3+1+2=6$. $W=w(b,d)+w(d,c)+w(b,c)=1+0+1=2$. Ratio is $6/2=3$.\nThe maximum cycle ratio is $3.5$. This is a lower bound on $T_{\\min}$. So $T_{\\min} \\ge 3.5$.\n\nLet's test $T=5$.\nThe constraints from pairs $(u,v)$ with $D(u,v) > 5$:\n$D(a,c)=8 \\implies r(a)-r(c) \\le 0$.\n$D(a,d)=6 \\implies r(a)-r(d) \\le 0$.\n$D(b,a)=7 \\implies r(b)-r(a) \\le 1$.\n$D(b,c)=6 \\implies r(b)-r(c) \\le 0$.\n$D(c,b)=7 \\implies r(c)-r(b) \\le 0$.\n$D(c,d)=8 \\implies r(c)-r(d) \\le 1$.\n$D(d,b)=8 \\implies r(d)-r(b) \\le 0$.\nAlso the legality constraints: $r(a)-r(b) \\le 0$, $r(b)-r(c) \\le 1$, $r(c)-r(a) \\le 1$, $r(b)-r(d) \\le 1$, $r(d)-r(c) \\le 0$.\nCombining tightest constraints:\n$r(a)-r(b) \\le 0$. $r(a)-r(c) \\le 0$. $r(a)-r(d) \\le 0$.\n$r(b)-r(a) \\le 1$. $r(b)-r(c) \\le 0$.\n$r(c)-r(b) \\le 0$. $r(c)-r(d) \\le 0$ (from $w(d,c)$).\n$r(d)-r(b) \\le 0$.\nLet's check for negative cycles.\nFrom $r(b)-r(c) \\le 0$ and $r(c)-r(b) \\le 0$, we get $r(b)=r(c)$.\nFrom $r(d)-r(c) \\le 0$ and $r(b)=r(c)$, we get $r(d)-r(b) \\le 0$. This matches an existing constraint.\nLet's check $a \\to b \\to c \\to a$. Constraints: $r(a)-r(b) \\le 0$, $r(b)-r(c) \\le 0$, $r(c)-r(a) \\le 1$. Sum is $0 \\le 1$. OK.\nLet's check $a \\to b \\to a$. Constraints: $r(a)-r(b) \\le 0$, $r(b)-r(a) \\le 1$. Sum is $0 \\le 1$. OK.\nIt appears $T=5$ is feasible. A retiming solution is $r(a)=0, r(b)=-1, r(c)=-1, r(d)=-1$.\nLet's check this solution for $T=5$.\nLegality: $w_r(a,b)=0-1-0 = -1$. Violation. This retiming is not valid.\n\nLet's re-run the Bellman-Ford based logic from the original solution but with corrections. The original solution concluded $T=4$ is feasible. My check shows it's not. Let's check my check.\nCycle $a \\to c \\to b \\to a$.\nConstraint $r(c)-r(a) \\le 0$ is from $D(a,c)=8 > 4$. Path is $a \\to b \\to d \\to c$, $W=1$. Constraint is $r(a)-r(c) \\le W-1=0$. So $r(a)-r(c) \\le 0$. Edge $c \\to a$ weight $0$.\nConstraint $r(b)-r(c) \\le 0$ is from $D(b,c)=6 > 4$. Path $b \\to d \\to c$, $W=1$. Constraint is $r(b)-r(c) \\le W-1=0$. Edge $c \\to b$ weight $0$.\nConstraint $r(a)-r(b) \\le -1$ is from $D(a,b)=5 > 4$. Path $a \\to b$, $W=0$. Constraint is $r(a)-r(b) \\le W-1=-1$. Edge $b \\to a$ weight $-1$.\nCycle in constraint graph: $a \\to c \\to b \\to a$. Sum of weights: $0+0+(-1) = -1$.\nYes, this is a negative cycle. $T=4$ is infeasible.\n\nThe minimal clock period must be at least the delay of any zero-weight path.\nPath $a \\to b$: $w=0$, $d=d(a)+d(b)=5$. So $T \\ge 5$.\nPath $d \\to c \\to a \\to b$: $w=w(d,c)+w(c,a)+w(a,b)=0+1+0=1$.\nPath $b \\to d \\to c$: $w=1, d=6$.\nThe only path with 0 registers is $a \\to b$. Its delay is 5. Any retiming $r$ changes its weight to $w_r(a,b) = w(a,b) + r(b)-r(a) = r(b)-r(a)$. If we want a clock period $T  5$, we need $w_r(a,b) \\ge 1$, so $r(b)-r(a) \\ge 1$.\nThe original solution is incorrect. The minimal clock period is 5.\nLet's check if $T=5$ is feasible. The only constraint is $r(u)-r(v) \\le W(u,v)-1$ for $D(u,v) > 5$.\nThis is all pairs except $(a,b)$. So we don't have the $r(a)-r(b) \\le -1$ constraint.\nThe tightest constraint on $r(a)-r(b)$ is the legality one, $r(a)-r(b) \\le w(a,b) = 0$.\nThe negative cycle disappears. So $T=5$ is feasible.\nMinimal clock period is 5. I will correct this in the solution and answer.\nThe path $a \\to b$ has $W=0, D=5$. So no clock period less than 5 is achievable without making $W_r(a,b) \\ge 1$. A retimed circuit's clock period $T_r$ must be at least the max delay of any 0-weight path. Let's find $\\max_{P: W_r(P)=0} D(P)$. For $T  5$, we need $W_r(a,b) \\ge 1$. So we need $r(b)-r(a) \\ge 1$. This becomes a constraint $r(a)-r(b) \\le -1$. This constraint, combined with the others from legality, does not form a negative cycle.\nBut the $T$-feasibility constraints must also be met. For $T=4$, we had a negative cycle. Thus $T_{\\min} > 4$. For $T=5$, the pair $(a,b)$ with $D(a,b)=5$ does not generate a constraint $D(a,b) > T$. So the constraint $r(a)-r(b)\\le -1$ is not generated. The system is feasible. Therefore, $T_{min}=5$.",
            "answer": "$$\\boxed{5}$$"
        },
        {
            "introduction": "Optimizing for maximum clock speed by fixing setup violations can inadvertently introduce another class of timing error: hold violations. This exercise demonstrates this critical trade-off by analyzing a path where retiming has created a race condition, causing data to arrive too quickly. You will perform a worst-case hold time analysis using a realistic model with clock skew and determine the corrective action needed to ensure the circuit's functional integrity. ",
            "id": "4293812",
            "problem": "A synchronous pipeline implemented in a complementary metal–oxide–semiconductor (CMOS) digital integrated circuit is analyzed via Electronic Design Automation (EDA). The pipeline contains edge-triggered registers and two combinational sub-blocks, labeled $A$ and $B$, originally arranged as $R_{0} \\rightarrow A \\rightarrow B \\rightarrow R_{1}$. A retiming transformation relocates the register boundary to form two stages $R_{0} \\rightarrow A \\rightarrow R_{1}'$ and $R_{1}' \\rightarrow B \\rightarrow R_{2}$, thereby shortening the first stage data path to improve its setup margin.\n\nThe timing is analyzed under worst-case early/late clock arrival conditions. The characterization data are:\n- Minimum delay of the combinational sub-block $A$: $d_{A,\\min} = 0.024\\,\\text{ns}$.\n- Minimum clock-to-$Q$ of the launching register $R_{0}$: $t_{\\mathrm{CQ},\\min} = 0.012\\,\\text{ns}$.\n- Hold-time requirement of the capturing register $R_{1}'$: $t_{\\mathrm{hold}} = 0.030\\,\\text{ns}$.\n- Early and late clock arrival times at the launch and capture registers after retiming:\n  - $t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}} = 0.013\\,\\text{ns}$, $t_{\\mathrm{clk},R_{0}}^{\\mathrm{late}} = 0.040\\,\\text{ns}$,\n  - $t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}} = 0.027\\,\\text{ns}$, $t_{\\mathrm{clk},R_{1}'}^{\\mathrm{late}} = 0.088\\,\\text{ns}$.\n- A standard buffer available for insertion on the data path has a characterized minimum delay $d_{\\mathrm{buf},\\min} = 0.023\\,\\text{ns}$.\n\nStarting from the fundamental definitions of synchronous timing and hold constraints, use the early/late clock arrival values to analyze the retimed edge $R_{0} \\rightarrow A \\rightarrow R_{1}'$. Determine whether a hold-time violation occurs on this edge under the worst-case hold scenario and, if so, compute the minimum number $N$ of identical buffers (each with minimum delay $d_{\\mathrm{buf},\\min}$) that must be inserted on the data path to guarantee that the retimed path satisfies the hold-time requirement. Express the final answer as the integer buffer count (unitless).",
            "solution": "The problem as stated will first be subjected to a rigorous validation process.\n\n### Step 1: Extract Givens\nThe following data and definitions are explicitly provided in the problem statement:\n- Initial pipeline architecture: $R_{0} \\rightarrow A \\rightarrow B \\rightarrow R_{1}$\n- Retimed pipeline stages: $R_{0} \\rightarrow A \\rightarrow R_{1}'$ and $R_{1}' \\rightarrow B \\rightarrow R_{2}$\n- Minimum delay of combinational sub-block $A$: $d_{A,\\min} = 0.024\\,\\text{ns}$.\n- Minimum clock-to-$Q$ delay of launching register $R_{0}$: $t_{\\mathrm{CQ},\\min} = 0.012\\,\\text{ns}$.\n- Hold-time requirement of capturing register $R_{1}'$: $t_{\\mathrm{hold}} = 0.030\\,\\text{ns}$.\n- Early clock arrival time at $R_{0}$: $t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}} = 0.013\\,\\text{ns}$.\n- Late clock arrival time at $R_{0}$: $t_{\\mathrm{clk},R_{0}}^{\\mathrm{late}} = 0.040\\,\\text{ns}$.\n- Early clock arrival time at $R_{1}'$: $t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}} = 0.027\\,\\text{ns}$.\n- Late clock arrival time at $R_{1}'$: $t_{\\mathrm{clk},R_{1}'}^{\\mathrm{late}} = 0.088\\,\\text{ns}$.\n- Minimum delay of a standard buffer: $d_{\\mathrm{buf},\\min} = 0.023\\,\\text{ns}$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is evaluated against the required criteria:\n- **Scientifically Grounded**: The problem is based on fundamental principles of synchronous digital circuit timing analysis, a core topic in electrical engineering and computer engineering. All terms ($t_{\\mathrm{CQ}}$, $t_{\\mathrm{hold}}$, clock skew, retiming) and the scenario (hold-time violation analysis with buffer insertion) are standard in the field of integrated circuit design and Electronic Design Automation (EDA). The numerical values are physically realistic for modern CMOS processes.\n- **Well-Posed**: The problem is clearly defined and provides all necessary parameters to perform a worst-case hold time analysis. The objective is unambiguous: to determine if a violation exists and to calculate the minimum integer number of buffers required to resolve it. A unique and stable solution can be determined from the givens.\n- **Objective**: The problem is stated in precise, unbiased technical language, free of any subjective or speculative content.\n\nThe problem does not exhibit any flaws such as scientific unsoundness, incompleteness, contradiction, or ambiguity. The presence of late clock arrival times ($t_{\\mathrm{clk}}^{\\mathrm{late}}$) is appropriate, as these are necessary for a complete worst-case timing model, even though only early arrival times are relevant for the hold check.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. A solution will be derived.\n\nThe fundamental principle of the hold-time constraint for an edge-triggered register is that the data at its input pin must remain stable for a duration $t_{\\mathrm{hold}}$ after the active clock edge arrives. A hold-time violation occurs if new data, launched from a preceding register, arrives too quickly and corrupts the data that the capturing register is supposed to be latching.\n\nLet us denote the clock arrival time at the launch register $R_{0}$ as $t_{\\mathrm{clk},R_{0}}$ and at the capture register $R_{1}'$ as $t_{\\mathrm{clk},R_{1}'}$. These times are measured from a common reference point. The data launched by $R_{0}$ becomes valid at its output $Q$ after a clock-to-$Q$ delay, $t_{\\mathrm{CQ}}$. This data then propagates through the combinational logic path (block $A$) with a delay $d_{A}$. Therefore, the arrival time of the new data at the input of the capture register $R_{1}'$ is:\n$$t_{\\mathrm{data\\_arrival}} = t_{\\mathrm{clk},R_{0}} + t_{\\mathrm{CQ}} + d_{A}$$\nThe data at the input of $R_{1}'$ is required to be stable until a time $t_{\\mathrm{hold}}$ after its clock edge arrives. This defines the data required time for the hold check:\n$$t_{\\mathrm{data\\_required}} = t_{\\mathrm{clk},R_{1}'} + t_{\\mathrm{hold}}$$\nThe hold constraint is satisfied if the data arrives at or after it is required to be stable:\n$$t_{\\mathrm{data\\_arrival}} \\ge t_{\\mathrm{data\\_required}}$$\nA hold-time violation, representing a race condition, is most likely to occur under the fastest possible conditions. To find the minimum hold slack, we must select the combination of parameter values that corresponds to the fastest data propagation and the earliest hold requirement. This occurs when:\n1.  The data path is at its fastest: $t_{\\mathrm{CQ}} = t_{\\mathrm{CQ},\\min}$ and $d_{A} = d_{A,\\min}$.\n2.  The clock arrives at the launch register $R_{0}$ as early as possible: $t_{\\mathrm{clk},R_{0}} = t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}}$.\n3.  The clock arrives at the capture register $R_{1}'$ as early as possible: $t_{\\mathrm{clk},R_{1}'} = t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}}$.\n\nThe worst-case hold slack, $S_{\\mathrm{hold,min}}$, is defined as the margin by which this constraint is met. A non-negative slack indicates no violation.\n$$S_{\\mathrm{hold,min}} = (t_{\\mathrm{clk},R_{0}}^{\\mathrm{early}} + t_{\\mathrm{CQ},\\min} + d_{A,\\min}) - (t_{\\mathrm{clk},R_{1}'}^{\\mathrm{early}} + t_{\\mathrm{hold}})$$\nWe now substitute the given numerical values to calculate the slack for the retimed path $R_{0} \\rightarrow A \\rightarrow R_{1}'$:\n$$S_{\\mathrm{hold,min}} = (0.013\\,\\text{ns} + 0.012\\,\\text{ns} + 0.024\\,\\text{ns}) - (0.027\\,\\text{ns} + 0.030\\,\\text{ns})$$\n$$S_{\\mathrm{hold,min}} = (0.049\\,\\text{ns}) - (0.057\\,\\text{ns})$$\n$$S_{\\mathrm{hold,min}} = -0.008\\,\\text{ns}$$\nSince $S_{\\mathrm{hold,min}}$ is negative, a hold-time violation exists. The magnitude of the violation indicates the minimum amount of additional delay, $d_{\\mathrm{required}}$, that must be inserted into the data path to satisfy the constraint:\n$$d_{\\mathrm{required}} = -S_{\\mathrm{hold,min}} = 0.008\\,\\text{ns}$$\nTo fix this violation, we must insert $N$ identical buffers into the data path $A$. Each buffer has a minimum delay of $d_{\\mathrm{buf},\\min} = 0.023\\,\\text{ns}$. The total minimum delay added by $N$ buffers is $N \\times d_{\\mathrm{buf},\\min}$. This added delay must be greater than or equal to the required delay:\n$$N \\times d_{\\mathrm{buf},\\min} \\ge d_{\\mathrm{required}}$$\nSubstituting the values:\n$$N \\times 0.023\\,\\text{ns} \\ge 0.008\\,\\text{ns}$$\nSolving for $N$:\n$$N \\ge \\frac{0.008}{0.023} \\approx 0.3478$$\nSince $N$ must be an integer representing a physical count of buffers, the minimum number of buffers that must be inserted is $1$.",
            "answer": "$$\\boxed{1}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Asynchronous design often involves choosing between different handshaking protocols, each with unique trade-offs. This exercise explores the fundamental difference in energy efficiency between two-phase (Non-Return-to-Zero) and four-phase (Return-to-Zero) signaling. By quantifying the dynamic energy consumed per data transfer based on the number of control signal transitions, you will gain a concrete understanding of why protocol choice is a critical first step in low-power circuit design. ",
            "id": "4256339",
            "problem": "An asynchronous pipeline stage communicates using a two-wire control handshake between sender and receiver: a request line and an acknowledge line. Two canonical design styles are commonly used: Non-Return-to-Zero (NRZ) two-phase handshaking and Return-to-Zero (RTZ) four-phase handshaking. In Complementary Metal–Oxide–Semiconductor (CMOS) logic, dynamic energy is consumed each time a control node transitions due to charging or discharging its effective capacitance. In integrated circuits and Electronic Design Automation (EDA), assume that the dynamic energy dissipated per control transition is a known constant $E_t$ for the control path under consideration. Ignore data-path energy and leakage; consider only control-path dynamic energy.\n\nStarting from first principles of CMOS dynamic switching, and using only the number of control transitions per payload token, derive the energy per payload transfer for each design style in terms of $E_t$ and the number of control transitions per token for each protocol. Then, evaluate the energies numerically under the following scientifically realistic assumptions:\n- For the two-phase Non-Return-to-Zero (NRZ) handshake, there is one transition on the request line and one transition on the acknowledge line per payload token, so $n_{\\mathrm{NRZ}} = 2$.\n- For the four-phase Return-to-Zero (RTZ) handshake, there are two transitions on the request line (up and down) and two transitions on the acknowledge line (up and down) per payload token, so $n_{\\mathrm{RTZ}} = 4$.\n- The dynamic energy per control transition is $E_t = 3.6$ femtojoules.\n\nCompute the energy per payload transfer for NRZ and RTZ, expressed in femtojoules. Round your answers to four significant figures.",
            "solution": "The problem is validated as scientifically grounded, well-posed, objective, and complete. It poses a standard engineering analysis question based on established principles of digital circuit design. All necessary data and definitions are provided, and there are no contradictions or ambiguities.\n\nThe fundamental principle for calculating dynamic energy consumption in Complementary Metal–Oxide–Semiconductor (CMOS) logic is that energy is dissipated primarily during the charging and discharging of node capacitances. The problem states that the dynamic energy dissipated per single control node transition (either $0 \\rightarrow 1$ or $1 \\rightarrow 0$) is a constant, denoted by $E_t$.\n\nLet $E$ represent the total dynamic energy consumed by the control logic to transfer one payload token. Let $n$ be the total number of signal transitions on all control wires required to transfer that single token. Based on the principle of linear superposition, the total energy is the product of the number of transitions and the energy per transition. This gives the first-principles relationship:\n$$E = n \\cdot E_t$$\n\nThe problem requires us to apply this model to two specific asynchronous handshaking protocols: Non-Return-to-Zero (NRZ) two-phase and Return-to-Zero (RTZ) four-phase.\n\nFirst, we analyze the Non-Return-to-Zero (NRZ) two-phase handshake. The problem provides that for each payload token transfer, there is a total of $n_{\\mathrm{NRZ}}$ transitions on the control lines (request and acknowledge). The given value is:\n$$n_{\\mathrm{NRZ}} = 2$$\nThis corresponds to one transition on the request line and one transition on the acknowledge line. The energy per payload transfer for the NRZ style, denoted as $E_{\\mathrm{NRZ}}$, is therefore:\n$$E_{\\mathrm{NRZ}} = n_{\\mathrm{NRZ}} \\cdot E_t = 2 E_t$$\n\nNext, we analyze the Return-to-Zero (RTZ) four-phase handshake. The problem provides that for each payload token transfer, there are a total of $n_{\\mathrm{RTZ}}$ transitions. The given value is:\n$$n_{\\mathrm{RTZ}} = 4$$\nThis corresponds to a rising and a falling transition on the request line, and a rising and a falling transition on the acknowledge line. The energy per payload transfer for the RTZ style, denoted as $E_{\\mathrm{RTZ}}$, is:\n$$E_{\\mathrm{RTZ}} = n_{\\mathrm{RTZ}} \\cdot E_t = 4 E_t$$\n\nWith the symbolic derivations complete, we now perform the numerical evaluation. The problem provides the constant for energy per transition:\n$$E_t = 3.6 \\text{ femtojoules (fJ)}$$\n\nSubstituting this value into our derived expressions:\n\nFor the NRZ two-phase-handshake:\n$$E_{\\mathrm{NRZ}} = 2 \\cdot (3.6 \\text{ fJ}) = 7.2 \\text{ fJ}$$\n\nFor the RTZ four-phase handshake:\n$$E_{\\mathrm{RTZ}} = 4 \\cdot (3.6 \\text{ fJ}) = 14.4 \\text{ fJ}$$\n\nThe problem requires the final answers to be rounded to four significant figures.\nThe calculated value for $E_{\\mathrm{NRZ}}$ is $7.2$. To express this with four significant figures, we write $7.200$.\nThe calculated value for $E_{\\mathrm{RTZ}}$ is $14.4$. To express this with four significant figures, we write $14.40$.\n\nThe final numeric answers are $E_{\\mathrm{NRZ}} = 7.200$ fJ and $E_{\\mathrm{RTZ}} = 14.40$ fJ.",
            "answer": "$$\\boxed{\\begin{pmatrix} 7.200 & 14.40 \\end{pmatrix}}$$"
        },
        {
            "introduction": "Beyond energy efficiency, the performance of an asynchronous system is paramount, often characterized by its throughput and latency. This practice moves from protocol-level event counts to a detailed timing analysis of a complete four-phase handshake cycle. By deriving expressions for maximum throughput and latency as a function of fundamental gate ($t_g$) and wire ($t_w$) delays, you will learn how to model the performance limits of a point-to-point asynchronous link from first principles. ",
            "id": "4256359",
            "problem": "Consider a point-to-point bundled-data asynchronous link between $2$ modules implemented as a single-buffer stage that uses the standard $4$-phase return-to-zero request-acknowledge protocol. In this protocol, one complete transaction consists of the following causally ordered control transitions: the sender asserts $request$ high, the receiver asserts $acknowledge$ high, the sender deasserts $request$ low, and the receiver deasserts $acknowledge$ low. Assume the following physically realistic timing model:\n- Each propagation across the interconnect in either direction incurs a worst-case wire delay of $t_{w}$.\n- Each reaction of the local handshake control (at either end) to an input transition incurs a worst-case effective gate delay of $t_{g}$ (this $t_{g}$ aggregates the delay of the local combinational control logic required to generate the next handshake transition).\n- Data are already valid and satisfy the bundling constraint before the sender asserts $request$; arbitration and metastability are absent; forks, if any, are isochronic so that control causality reduces to a linear event chain.\n\nDefine the maximum sustainable throughput as the reciprocal of the mean cycle time between successive rising edges of the sender’s $request$ under steady-state saturation (i.e., continuous back-to-back transactions). Define the end-to-end latency for a single data transfer as the time from the instant the sender asserts $request$ high to the instant the sender observes the receiver’s $acknowledge$ high on its input.\n\nStarting from the protocol’s causal sequence and the timing model above, derive and report:\n- The maximum sustainable throughput, expressed in $\\mathrm{s}^{-1}$, as an analytic function of $t_{g}$ and $t_{w}$.\n- The end-to-end latency, expressed in seconds, as an analytic function of $t_{g}$ and $t_{w}$.\n\nNo numerical substitution is required; provide closed-form expressions. If you choose to approximate, that is not necessary here. The final answer must contain only these two expressions.",
            "solution": "The problem requires the derivation of expressions for the maximum sustainable throughput and the end-to-end latency of a point-to-point asynchronous link. The link employs a 4-phase return-to-zero (RTZ) request-acknowledge protocol. The derivation will be based on the specified causal sequence of handshake events and a timing model consisting of a worst-case wire propagation delay, $t_w$, and a worst-case control logic gate delay, $t_g$.\n\nFirst, we will determine the total cycle time for one complete transaction, from which the throughput is derived. Let us denote the sender's request signal as $req$ and the receiver's acknowledge signal as $ack$. We can trace the sequence of events and their associated delays, starting from the initiation of a transaction at time $t=0$.\n\n1.  At $t=0$, the sender asserts $req$ high ($req\\uparrow$). This signal propagates across the wire to the receiver, which takes a time of $t_w$. The receiver sees $req\\uparrow$ at time $t_w$.\n\n2.  The receiver's control logic detects the arrival of $req\\uparrow$ and reacts by asserting $ack$ high ($ack\\uparrow$). This internal reaction incurs a delay of $t_g$. Therefore, the receiver issues $ack\\uparrow$ at time $t_w + t_g$.\n\n3.  The $ack\\uparrow$ signal propagates back from the receiver to the sender. This communication across the interconnect takes another $t_w$. The sender sees $ack\\uparrow$ at time $(t_w + t_g) + t_w = 2t_w + t_g$.\n\n4.  Upon receiving $ack\\uparrow$, the sender's control logic reacts by deasserting its request signal ($req\\downarrow$) to begin the return-to-zero phase. This reaction takes $t_g$. The sender issues $req\\downarrow$ at time $(2t_w + t_g) + t_g = 2t_w + 2t_g$.\n\n5.  The $req\\downarrow$ signal travels to the receiver, which takes $t_w$. The receiver sees $req\\downarrow$ at time $(2t_w + 2t_g) + t_w = 3t_w + 2t_g$.\n\n6.  The receiver's logic reacts to $req\\downarrow$ by deasserting its acknowledge signal ($ack\\downarrow$). This reaction takes $t_g$. The receiver issues $ack\\downarrow$ at time $(3t_w + 2t_g) + t_g = 3t_w + 3t_g$.\n\n7.  The $ack\\downarrow$ signal propagates back to the sender, taking $t_w$. The sender sees $ack\\downarrow$ at time $(3t_w + 3t_g) + t_w = 4t_w + 3t_g$.\n\n8.  With the receipt of $ack\\downarrow$, the handshake sequence for one data item is complete. Under the assumption of steady-state saturation (continuous back-to-back transactions), the sender's logic immediately prepares to start the next transaction. The reaction to the observed $ack\\downarrow$ to generate the next $req\\uparrow$ takes one final gate delay, $t_g$. Thus, the next cycle begins at time $(4t_w + 3t_g) + t_g = 4t_w + 4t_g$.\n\nThe total cycle time, $T_{cycle}$, is the time between successive rising edges of the sender's request signal. From our analysis, this is the time elapsed from $t=0$ to the start of the next cycle.\n$$T_{cycle} = 4t_w + 4t_g = 4(t_g + t_w)$$\nThe maximum sustainable throughput, $\\theta$, is defined as the reciprocal of the cycle time.\n$$\\theta = \\frac{1}{T_{cycle}} = \\frac{1}{4(t_g + t_w)}$$\n\nNext, we derive the end-to-end latency, $T_{lat}$. The problem defines this as the time from the instant the sender asserts $req\\uparrow$ to the instant the sender observes $ack\\uparrow$. This corresponds to the cumulative time up to step $3$ in our event analysis. The constituent delays are: the forward propagation of $req\\uparrow$ ($t_w$), the receiver's reaction ($t_g$), and the return propagation of $ack\\uparrow$ ($t_w$).\n$$T_{lat} = t_w + t_g + t_w = 2t_w + t_g$$\n\nThe derived expressions for throughput and latency are functions of the given timing parameters, $t_g$ and $t_w$, as required.",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{1}{4(t_g + t_w)} & 2t_w + t_g \\end{pmatrix}}$$"
        },
        {
            "introduction": "Perhaps the most critical challenge in asynchronous design is ensuring functional correctness in the face of timing variations. This exercise delves into the heart of the bundled-data methodology by deriving its essential timing constraint, which prevents race conditions between control and data signals. You will use worst-case timing analysis to establish the relationship between data-path delay, control-path delay, and signal skew that guarantees data is captured safely, forming the cornerstone of robust bundled-data implementations. ",
            "id": "4256336",
            "problem": "Consider a two-stage asynchronous pipeline implemented in Complementary Metal–Oxide–Semiconductor (CMOS) using the bundled-data style with a four-phase return-to-zero request/acknowledge handshake. The pipeline is synthesized using Electronic Design Automation (EDA) tools under a relative-timing methodology. The sender stage produces a data word on its output channel and concurrently emits a request transition that, through a control path, ultimately causes the receiver stage to complete its capture and then emit an acknowledge transition back to the sender.\n\nAssume the following physically measurable quantities are defined at the stage interface:\n- The worst-case combinational data-path stabilization time, from the sender’s data launch to the receiver’s sampling aperture seeing the final correct value, is denoted by $t_{data}$.\n- The maximum relative skew between the earliest effective arrival of the request transition along the control network that triggers the receiver’s completion point and the corresponding effective arrival of the data launch into the data network is denoted by $t_{skew}$. Define $t_{skew} \\geq 0$ as the maximum lead of the control path relative to the data path (that is, the control path can be advanced by up to $t_{skew}$ relative to the data path).\n- The control-path delay from the sender’s request transition to the receiver’s acknowledge transition emission is denoted by $t_{ack}$. This delay aggregates the propagation through the receiver’s control logic and any explicit matched delay elements.\n\nStarting from fundamental handshake semantics (the acknowledge must be generated only after the receiver has safely completed data capture) and worst-case timing reasoning (monotonic propagation and max-delay bounding for hazards), derive the minimal lower-bound expression $L$ on $t_{ack}$ in terms of $t_{data}$ and $t_{skew}$ such that any $t_{ack}$ strictly greater than $L$ guarantees that the acknowledge transition cannot be observed until after the data has stabilized at the receiver’s sampling aperture, for all process, voltage, and temperature variations encompassed by the worst-case definitions.\n\nExplain the meaning of each term you introduce and how the bound enforces that acknowledges only arrive after data stabilization. Provide your final answer as a single symbolic expression for $L$ with no units.",
            "solution": "The problem statement is evaluated as valid. It is a scientifically grounded, well-posed, and objective problem in the domain of asynchronous digital circuit design. It is self-contained, and its terms are defined with sufficient precision to permit a formal, analytical solution. The problem asks for the derivation of a fundamental timing constraint in a bundled-data asynchronous pipeline, which is a standard and non-trivial task in this field.\n\nTo derive the minimal lower bound on the acknowledge path delay, $t_{ack}$, we must establish the timing relationship between the data path and the control path to ensure data is captured correctly. The core principle of bundled-data design is that a request signal must arrive at the receiver only after the associated data has become stable at the receiver's inputs. The acknowledge signal, in turn, can only be generated after the data has been safely captured.\n\nLet us define the following events and their occurrence times relative to a common, but arbitrary, reference:\n- $T_{data\\_launch}$: The time at which the sender stage launches a new data word onto the data path.\n- $T_{req\\_launch}$: The time at which the sender stage launches the corresponding request transition onto the control path.\n\nFrom the problem definition, we have the following timings for events at the receiver stage:\n1.  The data becomes stable at the receiver's sampling aperture. The time required for this, measured from the data launch, is the worst-case data-path delay, $t_{data}$. Therefore, the data is guaranteed to be stable at the receiver no earlier than time $T_{data\\_stable}$:\n    $$T_{data\\_stable} = T_{data\\_launch} + t_{data}$$\n2.  The receiver emits an acknowledge transition. The time for this signal to be generated, measured from the request launch, is the control-path delay, $t_{ack}$. The acknowledge is emitted at time $T_{ack\\_emit}$:\n    $$T_{ack\\_emit} = T_{req\\_launch} + t_{ack}$$\n\nThe fundamental safety constraint for a bundled-data protocol is that any action dependent on the data being stable (such as generating an acknowledge) must occur *after* the data is guaranteed to be stable. In this problem, the condition is that \"the acknowledge transition cannot be observed until after the data has stabilized at the receiver’s sampling aperture.\" This translates to the following strict inequality:\n$$T_{ack\\_emit} > T_{data\\_stable}$$\n\nSubstituting the expressions for $T_{ack\\_emit}$ and $T_{data\\_stable}$:\n$$T_{req\\_launch} + t_{ack} > T_{data\\_launch} + t_{data}$$\n\nTo find the required lower bound on $t_{ack}$, we rearrange this inequality:\n$$t_{ack} > (T_{data\\_launch} - T_{req\\_launch}) + t_{data}$$\n\nThis inequality must hold for all possible variations in timing allowed by the system's specification. This requires us to analyze the term $(T_{data\\_launch} - T_{req\\_launch})$ under the worst-case condition. The worst case is the scenario that places the most stringent requirement on $t_{ack}$, i.e., the one that maximizes the right-hand side of the inequality.\n\nThe problem defines $t_{skew}$ as \"the maximum relative skew ... defined as the maximum lead of the control path relative to the data path.\" A lead of the control path means that the request can be launched *before* the data. Mathematically, this corresponds to the time difference $(T_{data\\_launch} - T_{req\\_launch})$. The maximum value of this time difference is given as $t_{skew}$:\n$$(T_{data\\_launch} - T_{req\\_launch}) \\leq t_{skew}$$\n\nTo guarantee the safety condition for all valid operational possibilities, we must ensure the inequality holds even when $(T_{data\\_launch} - T_{req\\_launch})$ takes its maximum possible value. Substituting this maximum value into our safety inequality gives the strictest necessary condition for $t_{ack}$:\n$$t_{ack} > \\max(T_{data\\_launch} - T_{req\\_launch}) + t_{data}$$\n$$t_{ack} > t_{skew} + t_{data}$$\n\nThis is the condition that guarantees safety. The problem asks for the minimal lower-bound expression $L$ on $t_{ack}$ such that any $t_{ack}$ strictly greater than $L$ guarantees safety. From our derived inequality, this lower bound is:\n$$L = t_{data} + t_{skew}$$\n\nExplanation of the bound:\n- The term $t_{data}$ represents the time the data requires to travel through the combinational logic and stabilize.\n- The term $t_{skew}$ represents the maximum \"head start\" that the request signal (control) has over the data signal. In the worst-case scenario, the request is launched, travels quickly, and arrives at the receiver's control logic, while the data is launched as late as possible relative to the request and travels through its slowest path.\n- The sum $t_{data} + t_{skew}$ represents the worst-case duration, measured from the moment the request is launched ($T_{req\\_launch}$), until the corresponding data is stable at the receiver ($T_{data\\_stable}$).\n- The constraint $t_{ack} > t_{data} + t_{skew}$ forces the delay of the acknowledge generation path, $t_{ack}$, to be greater than this worst-case data stabilization time. This ensures that the logic generating the acknowledge signal will only complete its operation and emit the acknowledge after the data it is intended to capture has become valid, thereby preventing a timing hazard. The value $L = t_{data} + t_{skew}$ is the threshold for this delay. Any design where $t_{ack}$ might be less than or equal to $L$ is subject to failure.",
            "answer": "$$\\boxed{t_{data} + t_{skew}}$$"
        }
    ]
}
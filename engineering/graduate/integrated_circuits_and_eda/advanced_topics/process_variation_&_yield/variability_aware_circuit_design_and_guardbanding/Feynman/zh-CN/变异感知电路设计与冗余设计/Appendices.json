{
    "hands_on_practices": [
        {
            "introduction": "可变性是现代集成电路设计中不可避免的挑战。为了确保电路在存在工艺、电压和温度（PVT）波动时仍能正常工作，设计者采用了一种称为“防护带（guardbanding）”的基本策略。这项练习将带领你从第一性原理出发，探索防护带设计的核心权衡：我们对延迟变化的统计信息了解得越多，我们设计的防护带就越精确（也越不保守）。通过对比仅知晓均值和方差时（使用切比雪夫和坎特利不等式）与知晓完整高斯分布时所需的防护带大小，你将深刻理解统计假设在稳健设计中的关键作用。",
            "id": "4307717",
            "problem": "同步集成电路中的单条关键路径延迟因工艺、电压和温度（PVT）变化而被建模为一个实值随机变量 $D$。该设计采用裕量设定：时钟周期设置为 $T_{\\text{clk}} = \\mu + g$，其中 $\\mu$ 是 $D$ 的均值，$g$ 是裕量。每条路径的目标失效概率（时序违规）被指定为 $\\alpha$，因此良率要求为 $P(D \\leq \\mu + g) \\geq 1 - \\alpha$。已知的仅有 $D$ 的均值和方差：$\\mathbb{E}[D] = \\mu$ 和 $\\operatorname{Var}(D) = \\sigma^{2}$。\n\n从良率的定义以及由 Chebyshev 不等式和 Cantelli 不等式（单边 Chebyshev）给出的基本尾部概率界定原则出发，仅当 $\\mu$ 和 $\\sigma^{2}$ 已知时，请从第一性原理推导保证满足良率要求的最小裕量 $g$。然后，在 $D$ 服从高斯分布 $D \\sim \\mathcal{N}(\\mu, \\sigma^{2})$ 的附加假设下，推导达到相同良率要求的最小基于高斯分布的裕量。\n\n对于一条具有 $\\,\\mu = 1.0\\,\\text{ns}\\,$、$\\,\\sigma = 0.05\\,\\text{ns}\\,$ 和 $\\,\\alpha = 0.01\\,$ 的路径，数值计算这三种裕量。以单行矩阵的形式表示这三种裕量（单位为纳秒），顺序为：基于 Chebyshev 的裕量、基于 Cantelli 的裕量、基于高斯分布的裕量。将您的数值答案四舍五入到四位有效数字。最终答案必须是单行矩阵且只包含数字（不带单位），而问题陈述指明单位是纳秒（ns）。",
            "solution": "问题陈述经评估有效。它在科学上基于统计电路分析和概率论的原理，问题提法得当，目标明确，数据充分，并且没有歧义或矛盾。它提出了一个在考虑可变性的集成电路设计中的标准、可形式化的问题。因此，我们可以开始求解。\n\n问题要求在三种不同的假设下推导最小裕量 $g$，以满足良率要求。良率要求由 $P(D \\leq \\mu + g) \\geq 1 - \\alpha$ 给出，其中 $D$ 是表示路径延迟的随机变量，$\\mu$ 是其均值，$\\alpha$ 是目标失效概率。这等同于将时序失效的概率 $P(D > \\mu + g)$ 约束为不大于 $\\alpha$：\n$$P(D > \\mu + g) \\leq \\alpha$$\n\n设 $\\mathbb{E}[D] = \\mu$ 且 $\\operatorname{Var}(D) = \\sigma^{2}$。裕量 $g$ 被加到平均延迟上，因此时钟周期为 $T_{\\text{clk}} = \\mu + g$。我们将推导 $g$ 的表达式，然后对给定的参数进行求值。\n\n**1. 使用 Chebyshev 不等式推导裕量**\n\nChebyshev 不等式为一个随机变量偏离其均值的概率提供了一个界。对于任何具有有限均值 $\\mu_X$ 和有限非零方差 $\\sigma_X^2$ 的随机变量 $X$，以及任何实数 $k > 0$，该不等式表述为：\n$$P(|X - \\mu_X| \\geq k) \\leq \\frac{\\sigma_X^2}{k^2}$$\n我们将此应用于延迟 $D$，其中 $X=D$，$\\mu_X=\\mu$，$\\sigma_X^2=\\sigma^2$。我们关心的是事件 $D > \\mu + g$，它等价于 $D - \\mu > g$。这个单边事件是双边事件 $|D - \\mu| > g$ 的一个子集。因此，我们感兴趣的事件的概率受双边事件的概率所界定：\n$$P(D > \\mu + g) \\leq P(|D - \\mu| > g)$$\n对于连续随机变量，使用 $>$ 与 $\\geq$ 不会改变概率。我们在 Chebyshev 不等式中设 $k=g$（$g$ 必须为正，这对裕量来说是物理上要求的）。\n$$P(|D - \\mu| \\geq g) \\leq \\frac{\\sigma^2}{g^2}$$\n为了满足良率要求 $P(D > \\mu + g) \\leq \\alpha$，只需强制使 Chebyshev 不等式提供的上界等于 $\\alpha$ 即可。这保证了失效概率不会超过 $\\alpha$。\n$$\\frac{\\sigma^2}{g^2} = \\alpha$$\n求解该不等式能保证的最小裕量 $g$，我们得到：\n$$g^2 = \\frac{\\sigma^2}{\\alpha} \\implies g = \\frac{\\sigma}{\\sqrt{\\alpha}}$$\n这就是基于 Chebyshev 的裕量，我们记为 $g_{\\text{Cheby}}$。\n$$g_{\\text{Cheby}} = \\frac{\\sigma}{\\sqrt{\\alpha}}$$\n\n**2. 使用 Cantelli 不等式（单边 Chebyshev）推导裕量**\n\nCantelli 不等式提供了一个更紧的单边界。对于具有均值 $\\mu_X$ 和方差 $\\sigma_X^2$ 的随机变量 $X$，以及任何 $\\lambda > 0$，它表述为：\n$$P(X - \\mu_X \\geq \\lambda) \\leq \\frac{\\sigma_X^2}{\\sigma_X^2 + \\lambda^2}$$\n我们希望界定 $P(D > \\mu + g)$，即 $P(D - \\mu > g)$。再次假设 $D$ 是连续的，这与 $P(D - \\mu \\geq g)$ 相同。我们应用 Cantelli 不等式，令 $X=D$ 和 $\\lambda=g$。\n$$P(D - \\mu \\geq g) \\leq \\frac{\\sigma^2}{\\sigma^2 + g^2}$$\n为保证良率要求，我们将此上界设为等于 $\\alpha$：\n$$\\frac{\\sigma^2}{\\sigma^2 + g^2} = \\alpha$$\n现在，我们求解此不等式所保证的最小裕量 $g$，记为 $g_{\\text{Cantelli}}$：\n$$\\sigma^2 = \\alpha (\\sigma^2 + g^2)$$\n$$\\sigma^2 = \\alpha\\sigma^2 + \\alpha g^2$$\n$$\\sigma^2(1 - \\alpha) = \\alpha g^2$$\n$$g^2 = \\frac{\\sigma^2(1 - \\alpha)}{\\alpha}$$\n$$g_{\\text{Cantelli}} = \\sigma \\sqrt{\\frac{1 - \\alpha}{\\alpha}}$$\n由于 $1-\\alpha  1$，这个裕量比从双边 Chebyshev 不等式推导出的裕量严格更小（更紧），这是符合预期的。\n\n**3. 假设高斯分布推导裕量**\n\n在延迟 $D$ 服从高斯（正态）分布 $D \\sim \\mathcal{N}(\\mu, \\sigma^2)$ 的假设下，我们可以精确计算失效概率。要求是找到最小的 $g$ 使得：\n$$P(D  \\mu + g) = \\alpha$$\n为了评估这个概率，我们对随机变量 $D$ 进行标准化。令 $Z = \\frac{D-\\mu}{\\sigma}$。变量 $Z$ 服从标准正态分布 $Z \\sim \\mathcal{N}(0, 1)$。不等式 $D  \\mu + g$ 变换如下：\n$$\\frac{D - \\mu}{\\sigma}  \\frac{(\\mu + g) - \\mu}{\\sigma}$$\n$$Z  \\frac{g}{\\sigma}$$\n概率要求变为：\n$$P\\left(Z  \\frac{g}{\\sigma}\\right) = \\alpha$$\n设 $\\Phi(z)$ 为标准正态分布的累积分布函数（CDF），即 $\\Phi(z) = P(Z \\leq z)$。尾部概率为 $P(Z  z) = 1 - \\Phi(z)$。因此，我们有：\n$$1 - \\Phi\\left(\\frac{g}{\\sigma}\\right) = \\alpha \\implies \\Phi\\left(\\frac{g}{\\sigma}\\right) = 1 - \\alpha$$\n为了找到 $\\Phi$ 的自变量，我们使用其反累积分布函数，或称分位数函数 $\\Phi^{-1}$：\n$$\\frac{g}{\\sigma} = \\Phi^{-1}(1 - \\alpha)$$\n求解基于高斯分布的裕量 $g_{\\text{Gauss}}$：\n$$g_{\\text{Gauss}} = \\sigma \\, \\Phi^{-1}(1 - \\alpha)$$\n项 $\\Phi^{-1}(1 - \\alpha)$ 表示标准正态分布的 $(1-\\alpha)$-分位数。\n\n**数值计算**\n\n给定以下参数值：\n$\\mu = 1.0\\,\\text{ns}$\n$\\sigma = 0.05\\,\\text{ns}$\n$\\alpha = 0.01$\n\n我们现在计算这三种裕量，并将结果四舍五入到四位有效数字。\n\n1.  **基于 Chebyshev 的裕量：**\n    $g_{\\text{Cheby}} = \\frac{0.05}{\\sqrt{0.01}} = \\frac{0.05}{0.1} = 0.5\\,\\text{ns}$。\n    保留四位有效数字，结果是 $0.5000\\,\\text{ns}$。\n\n2.  **基于 Cantelli 的裕量：**\n    $g_{\\text{Cantelli}} = 0.05 \\sqrt{\\frac{1 - 0.01}{0.01}} = 0.05 \\sqrt{\\frac{0.99}{0.01}} = 0.05 \\sqrt{99}$。\n    使用计算器，$\\sqrt{99} \\approx 9.949874$。\n    $g_{\\text{Cantelli}} \\approx 0.05 \\times 9.949874 \\approx 0.4974937\\,\\text{ns}$。\n    四舍五入到四位有效数字，得到 $0.4975\\,\\text{ns}$。\n\n3.  **基于高斯分布的裕量：**\n    $g_{\\text{Gauss}} = 0.05 \\times \\Phi^{-1}(1 - 0.01) = 0.05 \\times \\Phi^{-1}(0.99)$。\n    值 $\\Phi^{-1}(0.99)$ 是对应于累积概率为 $0.99$ 的 z-分数。从标准统计表或计算器可知，$\\Phi^{-1}(0.99) \\approx 2.326348$。\n    $g_{\\text{Gauss}} \\approx 0.05 \\times 2.326348 \\approx 0.1163174\\,\\text{ns}$。\n    四舍五入到四位有效数字，得到 $0.1163\\,\\text{ns}$。\n\n按指定顺序（Chebyshev、Cantelli、高斯），这三种裕量分别为 $0.5000\\,\\text{ns}$、$0.4975\\,\\text{ns}$ 和 $0.1163\\,\\text{ns}$。非参数界比假设特定分布推导出的界要悲观得多（裕量更大），这是一个众所周知的结果。高斯假设利用了关于底层过程的更多信息，从而得出了一个更为乐观和高效的裕量。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.5000  0.4975  0.1163\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在实际电路中，路径延迟并非单一的随机变量，而是由多个底层工艺参数（如阈值电压、沟道长度等）的复杂相互作用决定的，而这些参数本身往往是相关的。本练习将向你介绍一种在统计静态时序分析（SSTA）中至关重要的降维技术：主成分分析（PCA）。你将学习如何通过对相关参数的协方差矩阵进行特征分解，来识别出主要的、不相关的变化来源，并在此基础上计算路径延迟的统计特性和所需的安全防护带。",
            "id": "4307705",
            "problem": "针对统计静态时序分析（SSTA）的电子设计自动化（EDA）流程，通过将关键路径延迟相对于一小组全局工艺参数进行线性化，来对工艺引起的延迟变异性进行建模。设零均值参数变异向量为 $x \\in \\mathbb{R}^{3}$，分别对应阈值电压、有效长度和氧化层厚度，并假设 $x$ 服从联合高斯分布，其协方差矩阵为\n$$\n\\Sigma \\;=\\;\n\\begin{pmatrix}\n0.04  0.018  -0.012 \\\\\n0.018  0.09  -0.015 \\\\\n-0.012  -0.015  0.025\n\\end{pmatrix}.\n$$\n路径延迟的一阶模型为\n$$\nt \\;=\\; t_{\\text{nom}} \\;+\\; g^{\\top} x,\n$$\n其灵敏度向量为\n$$\ng \\;=\\; \\begin{pmatrix} 10 \\\\ 5 \\\\ 7 \\end{pmatrix},\n$$\n其中 $t_{\\text{nom}}$ 是标称延迟， $g$ 的各分量单位为皮秒/归一化参数变异单位。主成分分析（PCA）通过对角化协方差矩阵来创建不相关的正交变异方向。基于协方差性质和高斯随机变量线性变换的基础知识，完成以下任务：\n\n1. 从协方差的定义以及对称半正定矩阵的正交对角化出发，推导将 $x$ 映射到一个新变量 $z$ 的变换，使得 $z$ 的分量不相关且方差为1。用 $\\Sigma$ 的特征向量矩阵和特征值矩阵表示该变换，无需进行数值代入。\n\n2. 使用变换后的变量 $z$，将 $t$ 表示为 $t = t_{\\text{nom}} + c^{\\top} z$ 的形式，并用 $\\Sigma$ 的特征分解各部分和灵敏度向量 $g$ 来确定 $c$。\n\n3. 利用高斯随机变量的性质，根据给定的 $g$ 和 $\\Sigma$ 计算 $t$ 的方差的闭式解，然后确定最小单边防护裕度 $\\Delta t$，使得\n$$\n\\mathbb{P}\\!\\left( t \\leq t_{\\text{nom}} + \\Delta t \\right) \\;=\\; 0.99865.\n$$\n以皮秒为单位表示最终的防护裕度 $\\Delta t$。将答案四舍五入至四位有效数字。\n\n你的最终答案必须是一个实数。",
            "solution": "问题陈述已经过验证，并被认为是合理的。它在科学上基于统计电路分析的原理，问题适定，目标明确，数据充分，没有任何事实或逻辑上的不一致。因此，我们可以进行完整解答。\n\n问题分为三个部分。我们将按顺序进行解答。\n\n**第一部分：去相关和归一化变换的推导**\n\n给定一个零均值高斯随机向量 $x \\in \\mathbb{R}^{3}$，其协方差矩阵为 $\\Sigma = E[xx^{\\top}]$。我们寻求一个线性变换 $x \\to z$，使得 $z$ 的分量不相关且方差为1。这意味着 $z$ 的协方差矩阵必须是单位矩阵，即 $\\text{Cov}(z) = I$。\n\n设变换为 $z = A x$，其中 $A$ 为某个矩阵。$z$ 的协方差由下式给出：\n$$\n\\text{Cov}(z) = E[zz^{\\top}] = E[(Ax)(Ax)^{\\top}] = E[A x x^{\\top} A^{\\top}] = A E[x x^{\\top}] A^{\\top} = A \\Sigma A^{\\top}\n$$\n因此，我们必须找到一个矩阵 $A$，使得 $A \\Sigma A^{\\top} = I$。\n\n协方差矩阵 $\\Sigma$ 是实对称的。根据谱定理，它可以被正交对角化为：\n$$\n\\Sigma = V \\Lambda V^{\\top}\n$$\n其中 $V$ 是一个正交矩阵，其列是 $\\Sigma$ 的特征向量（满足 $V^{\\top}V = VV^{\\top} = I$），$\\Lambda$ 是一个对角矩阵，其对角元素 $\\lambda_i$ 是 $\\Sigma$ 对应的特征值。由于 $\\Sigma$ 是一个协方差矩阵，它是半正定的，因此其特征值是非负的，即 $\\lambda_i \\geq 0$。我们已在验证步骤中确认 $\\Sigma$ 是正定的，因此所有 $\\lambda_i  0$。\n\n让我们将特征分解代入我们的目标方程：\n$$\nA (V \\Lambda V^{\\top}) A^{\\top} = I\n$$\n这表明应选择一种能简化此表达式的 $A$。一个直观的两步过程是：首先去相关，然后归一化。\n\n步骤（i）：去相关（主成分分析）。我们定义一个中间变量 $y = V^{\\top}x$。这个变换将数据 $x$ 投影到 $\\Sigma$ 的特征向量基上。$y$ 的协方差为：\n$$\n\\text{Cov}(y) = V^{\\top} \\Sigma V = V^{\\top} (V \\Lambda V^{\\top}) V = (V^{\\top}V) \\Lambda (V^{\\top}V) = I \\Lambda I = \\Lambda\n$$\n由于 $\\Lambda$ 是一个对角矩阵，$y$ 的分量是不相关的。第 $i$ 个分量 $y_i$ 的方差是 $\\text{Var}(y_i) = \\lambda_i$。\n\n步骤（ii）：归一化（白化）。为了使方差等于1，我们必须将每个分量 $y_i$ 乘以 $1/\\sqrt{\\lambda_i}$。设 $\\Lambda^{-1/2}$ 是对角元素为 $1/\\sqrt{\\lambda_i}$ 的对角矩阵。我们定义 $z = \\Lambda^{-1/2} y$。$z$ 的协方差为：\n$$\n\\text{Cov}(z) = \\Lambda^{-1/2} \\text{Cov}(y) (\\Lambda^{-1/2})^{\\top} = \\Lambda^{-1/2} \\Lambda \\Lambda^{-1/2} = I\n$$\n这就是期望的结果。结合这两个步骤，完整的变换是：\n$$\nz = \\Lambda^{-1/2} y = \\Lambda^{-1/2} (V^{\\top} x) = (\\Lambda^{-1/2} V^{\\top}) x\n$$\n因此，所需的变换矩阵是 $A = \\Lambda^{-1/2} V^{\\top}$。将 $x$ 映射到 $z$ 的变换是 $z = \\Lambda^{-1/2} V^{\\top} x$。\n\n**第二部分：用变换后的变量表示延迟**\n\n路径延迟由 $t = t_{\\text{nom}} + g^{\\top} x$ 给出。我们需要将其表示为 $t = t_{\\text{nom}} + c^{\\top} z$ 的形式。为此，我们首先通过对第一部分的变换求逆，用 $z$ 来表示 $x$。\n从 $z = \\Lambda^{-1/2} V^{\\top} x$ 开始：\n$$\n\\Lambda^{1/2} z = V^{\\top} x\n$$\n左乘 $V$ 并利用 $VV^{\\top}=I$：\n$$\nV \\Lambda^{1/2} z = V V^{\\top} x = I x = x\n$$\n所以，$x = V \\Lambda^{1/2} z$。\n\n现在，我们将这个 $x$ 的表达式代入延迟方程：\n$$\nt = t_{\\text{nom}} + g^{\\top} (V \\Lambda^{1/2} z)\n$$\n根据矩阵乘法的结合律，这可以写成：\n$$\nt = t_{\\text{nom}} + (g^{\\top} V \\Lambda^{1/2}) z\n$$\n这就是 $t = t_{\\text{nom}} + c^{\\top} z$ 的形式，其中行向量 $c^{\\top}$ 由 $c^{\\top} = g^{\\top} V \\Lambda^{1/2}$ 给出。对应的列向量 $c$ 是这个表达式的转置：\n$$\nc = (g^{\\top} V \\Lambda^{1/2})^{\\top} = (\\Lambda^{1/2})^{\\top} V^{\\top} (g^{\\top})^{\\top} = \\Lambda^{1/2} V^{\\top} g\n$$\n因为 $\\Lambda^{1/2}$ 是对角矩阵，因此是对称的。所以向量 $c$ 是 $c = \\Lambda^{1/2} V^{\\top} g$。\n\n**第三部分：防护裕度的计算**\n\n首先，我们必须计算延迟的方差，$\\sigma_t^2 = \\text{Var}(t)$。延迟为 $t = t_{\\text{nom}} + g^{\\top} x$。由于 $t_{\\text{nom}}$ 是一个确定性常数，它对方差没有贡献。\n$$\n\\sigma_t^2 = \\text{Var}(t) = \\text{Var}(t_{\\text{nom}} + g^{\\top} x) = \\text{Var}(g^{\\top} x)\n$$\n对于一个协方差矩阵为 $\\Sigma$ 的随机向量 $x$ 和一个常数向量 $g$，标量随机变量 $g^{\\top}x$ 的方差由以下二次型给出：\n$$\n\\sigma_t^2 = g^{\\top} \\Sigma g\n$$\n使用给定的 $g$ 和 $\\Sigma$ 的数值：\n$$\ng = \\begin{pmatrix} 10 \\\\ 5 \\\\ 7 \\end{pmatrix}, \\quad \\Sigma = \\begin{pmatrix} 0.04  0.018  -0.012 \\\\ 0.018  0.09  -0.015 \\\\ -0.012  -0.015  0.025 \\end{pmatrix}\n$$\n我们计算乘积 $\\Sigma g$：\n$$\n\\Sigma g = \\begin{pmatrix} 0.04(10) + 0.018(5) - 0.012(7) \\\\ 0.018(10) + 0.09(5) - 0.015(7) \\\\ -0.012(10) - 0.015(5) + 0.025(7) \\end{pmatrix} = \\begin{pmatrix} 0.4 + 0.09 - 0.084 \\\\ 0.18 + 0.45 - 0.105 \\\\ -0.12 - 0.075 + 0.175 \\end{pmatrix} = \\begin{pmatrix} 0.406 \\\\ 0.525 \\\\ -0.02 \\end{pmatrix}\n$$\n接下来，我们计算点积 $g^{\\top}(\\Sigma g)$：\n$$\n\\sigma_t^2 = g^{\\top} (\\Sigma g) = \\begin{pmatrix} 10  5  7 \\end{pmatrix} \\begin{pmatrix} 0.406 \\\\ 0.525 \\\\ -0.02 \\end{pmatrix} = 10(0.406) + 5(0.525) + 7(-0.02)\n$$\n$$\n\\sigma_t^2 = 4.06 + 2.625 - 0.14 = 6.545\n$$\n延迟的方差是 $\\sigma_t^2 = 6.545$ ps$^2$。标准差是 $\\sigma_t = \\sqrt{6.545}$ ps。\n\n延迟 $t$ 是联合高斯随机向量 $x$ 的一个线性变换。因此，$t$ 本身也是一个高斯随机变量。其均值为 $E[t] = E[t_{\\text{nom}} + g^{\\top}x] = t_{\\text{nom}} + g^{\\top}E[x] = t_{\\text{nom}}$，因为 $x$ 是零均值的。所以，$t \\sim \\mathcal{N}(t_{\\text{nom}}, \\sigma_t^2)$。\n\n我们需要找到防护裕度 $\\Delta t$，使得 $\\mathbb{P}( t \\leq t_{\\text{nom}} + \\Delta t ) = 0.99865$。我们通过定义 $Z = (t - E[t]) / \\sigma_t = (t - t_{\\text{nom}}) / \\sigma_t$ 来对随机变量 $t$ 进行标准化。$Z$ 服从标准正态分布，$Z \\sim \\mathcal{N}(0, 1)$。\n该条件变为：\n$$\n\\mathbb{P}\\left( \\frac{t - t_{\\text{nom}}}{\\sigma_t} \\leq \\frac{(t_{\\text{nom}} + \\Delta t) - t_{\\text{nom}}}{\\sigma_t} \\right) = \\mathbb{P}\\left( Z \\leq \\frac{\\Delta t}{\\sigma_t} \\right) = 0.99865\n$$\n设 $k = \\Delta t / \\sigma_t$。我们需要找到值 $k$ 使得 $\\Phi(k) = 0.99865$，其中 $\\Phi$ 是标准正态分布的累积分布函数 (CDF)。这是一个众所周知的值，对应于距离均值三个标准差。具体来说，$\\Phi(3) \\approx 0.99865$。\n因此，我们设 $k = 3$。\n$$\n\\frac{\\Delta t}{\\sigma_t} = 3 \\implies \\Delta t = 3\\sigma_t\n$$\n代入 $\\sigma_t$ 的值：\n$$\n\\Delta t = 3 \\sqrt{6.545} \\approx 3 \\times 2.5583197... \\approx 7.674959...\n$$\n题目要求答案四舍五入到四位有效数字。\n$$\n\\Delta t \\approx 7.675 \\text{ ps}\n$$",
            "answer": "$$\\boxed{7.675}$$"
        },
        {
            "introduction": "时序防护带的应用不仅限于简单的路径延迟，还必须应对更细微的时钟信号质量问题。时钟占空比失真（duty-cycle distortion）就是一个典型的例子，它会同时影响建立时间（setup）和保持时间（hold）的裕量，且往往方向相反，使得设计变得棘手。本练习提供了一个具体的场景，你需要在考虑占空比随机波动的情况下，推导出一个全局时钟周期防护带，以同时满足建立和保持时序的良率要求，从而体验在多重约束下进行稳健设计的挑战。",
            "id": "4307745",
            "problem": "在一个电子设计自动化（EDA）流程中，我们分析了一个集成电路（IC）中脉冲锁存器流水线级的集成时钟网络。该时钟源自一个全局源，但由于电源噪声而经历占空比失真，该失真被建模为占空比的零均值随机波动。设时钟占空比为 $p \\in (0,1)$，并将失真定义为 $\\delta \\triangleq p - \\tfrac{1}{2}$。假设 $\\delta$ 是一个均值为零、标准差为 $\\sigma_{D}$ 的高斯随机变量，并且失真足够小，使得在 $p=\\tfrac{1}{2}$ 附近的线性化是有效的。\n\n对于给定的关键流水线路径，有效的建立时间和保持时间裕量通过从单元级特性表征中获得并聚合到路径级的线性灵敏度来依赖于 $\\delta$。具体来说，在标称周期 $T_{0}$ 下的裕量被建模为\n$$S(\\delta) = S_{0} + \\alpha\\,\\delta,$$\n$$H(\\delta) = H_{0} + \\beta\\,\\delta,$$\n其中 $S(\\delta)$ 和 $H(\\delta)$ 分别是建立时间和保持时间裕量，$S_{0}$ 和 $H_{0}$ 是在 $\\delta=0$ 时的标称裕量，而 $\\alpha$ 和 $\\beta$（单位为皮秒/单位占空比分数）则捕捉了路径对占空比失真的灵敏度。一个正的 $\\alpha$ 意味着建立时间裕量随占空比的增加而增加，一个正的 $\\beta$ 意味着保持时间裕量随占空比的增加而增加。\n\n为保证在占空比失真下同时满足建立和保持时间的目标时序良率 $y$，添加了一个全局时钟周期保护带 $g_{T}$，使得应用的周期为 $T = T_{0} + g_{T}$。保护带 $g_{T}$ 会使建立时间裕量增加 $g_{T}$，但不会影响保持时间裕量。良率要求是，在随机的 $\\delta$ 下，$S(\\delta) + g_{T} \\ge 0$ 和 $H(\\delta) \\ge 0$ 同时成立的概率为 $y$。\n\n假设某个特定模块具有以下经过数值校准的参数：\n- $\\sigma_{D} = 0.02$,\n- $y = 0.999$（解释为 $\\delta$ 的双边中心覆盖率），\n- $S_{0} = 10\\ \\mathrm{ps}$,\n- $H_{0} = 20\\ \\mathrm{ps}$,\n- $\\alpha = -300\\ \\mathrm{ps}$ 每单位占空比分数，\n- $\\beta = +150\\ \\mathrm{ps}$ 每单位占空比分数。\n\n假设 $\\delta$ 服从高斯模型，并且其分布与其他变异源无关。同时假设在不修改时钟周期的情况下，设计对于目标良率下的保持时间是可行的。\n\n从建立/保持时间定义、占空比的意义以及高斯分布尾部分位数的这些基本原理出发，推导出满足所述建立和保持时间良率目标的最小 $g_{T}$。将你的 $g_{T}$ 最终数值答案以皮秒为单位表示，并将答案四舍五入到四位有效数字。在你的最终方框答案中不要包含单位；单位应理解为如上所述的皮秒。",
            "solution": "问题要求我们找到最小的时钟周期保护带 $g_T$，以确保数字电路路径在指定的良率 $y$ 下同时满足建立时间和保持时间的要求。时序裕量受到占空比失真 $\\delta$ 的影响，该失真被建模为一个零均值的高斯随机变量。\n\n首先，我们必须将良率要求形式化。问题陈述目标良率为 $y = 0.999$，并提供了一个关键的解释：“解释为 $\\delta$ 的双边中心覆盖率”。这意味着我们不是直接计算裕量不等式的概率，而是必须首先为随机变量 $\\delta$ 定义一个高概率区间，然后确保时序约束在该区间内的所有 $\\delta$ 值上都得到满足。\n\n随机变量 $\\delta$ 服从均值为 $\\mu = 0$、标准差为 $\\sigma_D = 0.02$ 的高斯分布。概率为 $y$ 的双边中心覆盖率对应于某个常数 $k$ 的对称区间 $[-k\\sigma_D, k\\sigma_D]$。$k$ 的值由条件 $P(-k\\sigma_D \\le \\delta \\le k\\sigma_D) = y$ 决定。通过令 $Z = \\delta/\\sigma_D$ 将变量 $\\delta$ 标准化，其中 $Z \\sim N(0,1)$，该条件变为 $P(-k \\le Z \\le k) = y$。\n\n我们可以使用标准正态分布的累积分布函数（CDF）$\\Phi(z)$ 来表示这个概率：\n$$P(-k \\le Z \\le k) = \\Phi(k) - \\Phi(-k)$$\n利用对称性质 $\\Phi(-k) = 1 - \\Phi(k)$，我们得到：\n$$2\\Phi(k) - 1 = y$$\n代入 $y = 0.999$：\n$$2\\Phi(k) - 1 = 0.999 \\implies 2\\Phi(k) = 1.999 \\implies \\Phi(k) = 0.9995$$\n$k$ 的值是对应于累积概率 $0.9995$ 的标准正态分布的分位数。从统计表或逆累积分布函数计算器中，我们发现：\n$$k = \\Phi^{-1}(0.9995) \\approx 3.290527$$\n因此，我们必须设防的占空比失真范围是 $\\delta \\in [-k\\sigma_D, k\\sigma_D]$。\n\n接下来，我们建立时序约束。正的裕量表示时序约束得到满足。良率要求转化为在区间 $[-k\\sigma_D, k\\sigma_D]$ 内对所有 $\\delta$ 满足以下两个条件：\n1.  建立时间约束：建立时间裕量，包括保护带 $g_T$，必须为非负数。\n    $$S(\\delta) + g_T \\ge 0 \\implies (S_0 + \\alpha \\delta) + g_T \\ge 0$$\n2.  保持时间约束：保持时间裕量必须为非负数。保护带 $g_T$ 不影响保持时间裕量。\n    $$H(\\delta) \\ge 0 \\implies H_0 + \\beta \\delta \\ge 0$$\n\n这些约束必须在 $\\delta$ 的整个区间内成立，因此我们必须在它们各自的最坏情况点进行检查。由于裕量函数是 $\\delta$ 的线性函数，最小值将出现在区间的端点，即 $\\delta = \\pm k\\sigma_D$。\n\n对于保持时间约束，裕量为 $H(\\delta) = H_0 + \\beta \\delta$。我们已知 $\\beta = +150\\ \\mathrm{ps}$，是正数。因此，当 $\\delta$ 最小时，即 $\\delta = -k\\sigma_D$ 时，保持时间裕量最小。最坏情况下的保持时间约束是：\n$$H_0 + \\beta(-k\\sigma_D) \\ge 0 \\implies H_0 \\ge k\\beta\\sigma_D$$\n让我们用给定的参数来验证这个条件，因为问题陈述了保持时间是可行的。\n$$k\\beta\\sigma_D \\approx (3.290527)(150)(0.02)\\ \\mathrm{ps} = 9.871581\\ \\mathrm{ps}$$\n由于 $H_0 = 20\\ \\mathrm{ps}$，条件 $20\\ \\mathrm{ps} \\ge 9.871581\\ \\mathrm{ps}$ 得到满足。这证实了问题的假设。\n\n对于建立时间约束，裕量为 $S(\\delta) + g_T = S_0 + \\alpha\\delta + g_T$。我们已知 $\\alpha = -300\\ \\mathrm{ps}$，是负数。因此，当 $\\delta$ 最大时，即 $\\delta = +k\\sigma_D$ 时，建立时间裕量最小。最坏情况下的建立时间约束是：\n$$S_0 + \\alpha(k\\sigma_D) + g_T \\ge 0$$\n我们需要找到满足这个不等式的 $g_T$ 的最小值。当等式成立时，达到最小值：\n$$g_{T, \\text{min}} = -S_0 - \\alpha k \\sigma_D$$\n现在，我们将数值代入这个表达式：\n- $S_0 = 10\\ \\mathrm{ps}$\n- $\\alpha = -300\\ \\mathrm{ps}$\n- $k \\approx 3.290527$\n- $\\sigma_D = 0.02$\n\n$$g_{T, \\text{min}} = -10 - (-300) \\times (3.290527) \\times (0.02)$$\n$$g_{T, \\text{min}} = -10 + 300 \\times (0.06581054)$$\n$$g_{T, \\text{min}} = -10 + 19.743162$$\n$$g_{T, \\text{min}} = 9.743162\\ \\mathrm{ps}$$\n问题要求最终答案四舍五入到四位有效数字。\n$$g_{T, \\text{min}} \\approx 9.743\\ \\mathrm{ps}$$\n这是在指定的占空比变化模型下，为确保同时满足建立和保持时间时序良率目标所需的最小周期保护带。",
            "answer": "$$\\boxed{9.743}$$"
        }
    ]
}
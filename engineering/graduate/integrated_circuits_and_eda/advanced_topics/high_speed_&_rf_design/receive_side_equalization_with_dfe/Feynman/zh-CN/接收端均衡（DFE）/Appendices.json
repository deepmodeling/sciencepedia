{
    "hands_on_practices": [
        {
            "introduction": "要真正理解判决反馈均衡器（DFE）的工作原理，没有什么比一步步地演练其操作过程更有效了。第一个练习  提供了一个具体的场景，包括给定的PAM4信号、信道和噪声。通过手动计算每个时间步的DFE输出和最终判决，你将亲身体验符号间干扰（ISI）消除的递归过程，并直观地看到均衡器的实际作用。",
            "id": "4292729",
            "problem": "在一个基带脉冲幅度调制 (PAM) 链路的接收端，使用了一个码元速率的判决反馈均衡器 (DFE)。发送的码元来自四电平脉冲幅度调制 (PAM4) 码元集 $\\{-3,-1,+1,+3\\}$，具有单位码元间隔和码元周期 $T$ 秒。离散时间基带信道是线性时不变的，其有限冲激响应 $h[n]$ 的支撑集为 $\\{0,1,2\\}$，信道输出受到均值为零、方差为 $\\sigma^{2}$ 的独立同分布加性高斯白噪声 (AWGN) 样本的干扰。接收器由一个在 $t=nT$ 处采样的采样器、一个具有 $M=2$ 个反馈抽头的 T 间隔 DFE 以及一个增益归一化判决器组成。DFE 从当前采样中减去对过去已检测码元的加权重建，以抑制后向码间干扰。判决器将其输入映射到 $\\{-3,-1,+1,+3\\}$ 中最近的码元，判决阈值位于相邻码元的中点。在判决之前，会应用一个等于主抽头倒数的增益归一化，以使判决器在经过适当归一化的采样上操作。\n\n从采样器输出端接收样本的标准离散时间线性时不变卷积模型和 T 间隔判决反馈均衡器的定义出发，推导 DFE 判决变量关于信道冲激响应样本、反馈系数、过去已检测码元和噪声的递推关系。然后，使用您推导的递推关系，根据以下指定的参数和信号，计算当 $n=0,1,2,3,4,5$ 时判决变量 $y[n]$ 和检测码元 $d[n]$ 的数值序列：\n\n- 信道冲激响应样本：$h[0]=0.9$, $h[1]=0.35$, $h[2]=0.2$。\n- DFE 反馈系数：$b_{1}=0.35$, $b_{2}=0.2$。\n- 噪声方差：$\\sigma^{2}=0.04$。\n- 噪声实现 (为保证可复现性的一次固定抽取)：$w[0]=0.06$, $w[1]=-0.12$, $w[2]=0.15$, $w[3]=-0.04$, $w[4]=0.09$, $w[5]=-0.22$。\n- 发送的 PAM4 码元：$a[0]=+3$, $a[1]=+1$, $a[2]=-1$, $a[3]=-3$, $a[4]=+1$, $a[5]=+3$。\n- 初始化：$d[-1]=0$, $d[-2]=0$。\n- 判决器归一化：在判决前对 DFE 输出应用一个等于 $1/h[0]$ 的增益因子。\n- 判决器判决规则：对于输入 $v$，如果 $v  -2$ 则判决为 $-3$，如果 $-2 \\leq v  0$ 则判决为 $-1$，如果 $0 \\leq v  2$ 则判决为 $+1$，如果 $v \\geq 2$ 则判决为 $+3$。\n\n将您的最终结果报告为一个单一的行向量，该向量按顺序连接六个判决变量和六个检测出的码元：\n$$\\big(y[0],y[1],y[2],y[3],y[4],y[5],d[0],d[1],d[2],d[3],d[4],d[5]\\big).$$\n将所有数值条目四舍五入到四位有效数字。答案无单位。",
            "solution": "该问题表述清晰，具有科学依据，并为获得唯一解提供了所有必要信息。我将首先推导系统的控制方程，然后计算所需的序列。\n\n首先，我们建立采样器输出端信号的离散时间模型，记为 $x[n]$。该信号是发送码元 $a[n]$ 与信道有限冲激响应 $h[n]$ 卷积的结果，并受到加性高斯白噪声 $w[n]$ 的干扰。卷积由下式给出：\n$$ x[n] = \\sum_{k=-\\infty}^{\\infty} h[k] a[n-k] + w[n] $$\n鉴于信道冲激响应 $h[n]$ 的支撑集为 $\\{0,1,2\\}$，该和式可简化为：\n$$ x[n] = h[0]a[n] + h[1]a[n-1] + h[2]a[n-2] + w[n] $$\n在这里，$h[0]$ 代表主抽头，而 $h[1]$ 和 $h[2]$ 代表后向码间干扰 (ISI) 抽头。\n\n判决反馈均衡器 (DFE) 旨在消除先前已检测码元造成的码间干扰。DFE 通过从接收到的样本 $x[n]$ 中减去对后向码间干扰的估计来计算判决变量 $y[n]$。码间干扰的估计由 $M$ 个最近检测出的码元 $d[n-k]$ 与反馈系数 $b_k$ 加权的线性组合形成。对于本问题，$M=2$。\n因此，判决变量 $y[n]$ 为：\n$$ y[n] = x[n] - \\sum_{k=1}^{M} b_k d[n-k] = x[n] - (b_1 d[n-1] + b_2 d[n-2]) $$\n将 $x[n]$ 的表达式代入 $y[n]$ 的方程，我们得到判决变量的完整递推关系：\n$$ y[n] = (h[0]a[n] + h[1]a[n-1] + h[2]a[n-2] + w[n]) - (b_1 d[n-1] + b_2 d[n-2]) $$\n这就是问题所要求的 DFE 判决变量的递推关系。\n\n在做出判决之前，判决变量 $y[n]$ 会通过一个等于主抽头倒数 $1/h[0]$ 的增益因子进行归一化。我们称归一化后的判决器输入为 $v[n]$：\n$$ v[n] = \\frac{1}{h[0]} y[n] $$\n然后，判决器将 $v[n]$ 映射到 PAM4 码元集 $\\{-3, -1, +1, +3\\}$ 中最近的码元，以产生检测码元 $d[n]$。判决阈值被指定为相邻码元的中点，即 $-2$、$0$ 和 $2$。判决器函数 $d[n] = \\text{slicer}(v[n])$ 定义如下：\n$$ d[n] = \\begin{cases} -3  \\text{if } v[n]  -2 \\\\ -1  \\text{if } -2 \\leq v[n]  0 \\\\ +1  \\text{if } 0 \\leq v[n]  2 \\\\ +3  \\text{if } v[n] \\geq 2 \\end{cases} $$\n我们现在开始计算当 $n=0, 1, ..., 5$ 时 $y[n]$ 和 $d[n]$ 的数值序列。问题提供了当 $n \\geq 0$ 时的发送码元序列 $a[n]$。我们做出标准假设，即传输从 $n=0$ 开始，因此对于任何 $k  0$，$a[k]=0$。\n\n计算参数如下：\n- 信道：$h[0]=0.9$, $h[1]=0.35$, $h[2]=0.2$。\n- DFE 抽头：$b_1=0.35$, $b_2=0.2$。\n- 发送码元：$a[0]=3$, $a[1]=1$, $a[2]=-1$, $a[3]=-3$, $a[4]=1$, $a[5]=3$。\n- 噪声样本：$w[0]=0.06$, $w[1]=-0.12$, $w[2]=0.15$, $w[3]=-0.04$, $w[4]=0.09$, $w[5]=-0.22$。\n- 初始条件：$d[-1]=0$, $d[-2]=0$。我们也假设 $a[-1]=0$, $a[-2]=0$。\n\n**分步计算：**\n\n对于 $n=0$:\n$y[0] = h[0]a[0] + h[1]a[-1] + h[2]a[-2] + w[0] - b_1 d[-1] - b_2 d[-2]$\n$y[0] = (0.9)(3) + (0.35)(0) + (0.2)(0) + 0.06 - (0.35)(0) - (0.2)(0) = 2.7 + 0.06 = 2.76$\n$v[0] = y[0] / 0.9 = 2.76 / 0.9 \\approx 3.0667$。由于 $v[0] \\geq 2$，因此 $d[0]=3$。\n\n对于 $n=1$:\n$y[1] = h[0]a[1] + h[1]a[0] + h[2]a[-1] + w[1] - b_1 d[0] - b_2 d[-1]$\n$y[1] = (0.9)(1) + (0.35)(3) + (0.2)(0) + (-0.12) - (0.35)(3) - (0.2)(0) = 0.9 + 1.05 - 0.12 - 1.05 = 0.78$\n$v[1] = y[1] / 0.9 = 0.78 / 0.9 \\approx 0.8667$。由于 $0 \\leq v[1]  2$，因此 $d[1]=1$。\n\n对于 $n=2$:\n$y[2] = h[0]a[2] + h[1]a[1] + h[2]a[0] + w[2] - b_1 d[1] - b_2 d[0]$\n$y[2] = (0.9)(-1) + (0.35)(1) + (0.2)(3) + 0.15 - (0.35)(1) - (0.2)(3) = -0.9 + 0.35 + 0.6 + 0.15 - 0.35 - 0.6 = -0.75$\n$v[2] = y[2] / 0.9 = -0.75 / 0.9 \\approx -0.8333$。由于 $-2 \\leq v[2]  0$，因此 $d[2]=-1$。\n\n对于 $n=3$:\n$y[3] = h[0]a[3] + h[1]a[2] + h[2]a[1] + w[3] - b_1 d[2] - b_2 d[1]$\n$y[3] = (0.9)(-3) + (0.35)(-1) + (0.2)(1) + (-0.04) - (0.35)(-1) - (0.2)(1) = -2.7 - 0.35 + 0.2 - 0.04 + 0.35 - 0.2 = -2.74$\n$v[3] = y[3] / 0.9 = -2.74 / 0.9 \\approx -3.0444$。由于 $v[3]  -2$，因此 $d[3]=-3$。\n\n对于 $n=4$:\n$y[4] = h[0]a[4] + h[1]a[3] + h[2]a[2] + w[4] - b_1 d[3] - b_2 d[2]$\n$y[4] = (0.9)(1) + (0.35)(-3) + (0.2)(-1) + 0.09 - (0.35)(-3) - (0.2)(-1) = 0.9 - 1.05 - 0.2 + 0.09 + 1.05 + 0.2 = 0.99$\n$v[4] = y[4] / 0.9 = 0.99 / 0.9 = 1.1$。由于 $0 \\leq v[4]  2$，因此 $d[4]=1$。\n\n对于 $n=5$:\n$y[5] = h[0]a[5] + h[1]a[4] + h[2]a[3] + w[5] - b_1 d[4] - b_2 d[3]$\n$y[5] = (0.9)(3) + (0.35)(1) + (0.2)(-3) + (-0.22) - (0.35)(1) - (0.2)(-3) = 2.7 + 0.35 - 0.6 - 0.22 - 0.35 + 0.6 = 2.48$\n$v[5] = y[5] / 0.9 = 2.48 / 0.9 \\approx 2.7556$。由于 $v[5] \\geq 2$，因此 $d[5]=3$。\n\n一个重要的观察是，DFE 反馈系数 $b_k$ 被选择为等于信道的后向码间干扰抽头 $h[k]$（对于 $k=1,2$）。这是一种迫零 DFE 设计。只要没有判决错误（即，对于 $k>0$，$d[n-k] = a[n-k]$），码间干扰就会被完全消除。在我们的计算中，我们发现对于所有 $n \\in \\{0, 1, ..., 5\\}$，$d[n]=a[n]$。因此，对于 $n \\geq 2$，码间干扰项 $\\sum h[k]a[n-k]$ 和 $\\sum b_k d[n-k]$ 相互抵消，将判决变量简化为 $y[n] = h[0]a[n] + w[n]$。这证实了我们分步计算的正确性。\n\n计算出的序列是：\n$y = [2.76, 0.78, -0.75, -2.74, 0.99, 2.48]$\n$d = [3, 1, -1, -3, 1, 3]$\n\n将这些数值条目四舍五入到四位有效数字，得到：\n$y_{\\text{rounded}} = [2.760, 0.7800, -0.7500, -2.740, 0.9900, 2.480]$\n$d_{\\text{rounded}} = [3.000, 1.000, -1.000, -3.000, 1.000, 3.000]$\n\n最终的连接向量由这些值组成。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 2.760  0.7800  -0.7500  -2.740  0.9900  2.480  3.000  1.000  -1.000  -3.000  1.000  3.000 \\end{pmatrix} } $$"
        },
        {
            "introduction": "DFE的有效性取决于其抽头系数能否精确地建模信道的后标示干扰（post-cursor ISI）。但在实际系统中，这些系数是如何确定的呢？这个练习  深入探讨了DFE的自适应特性，通过应用最小均方（LMS）算法来解决这个问题。你将执行一次完整的更新迭代，从而深入了解均衡器如何在训练阶段利用误差信号来“学习”最优的抽头系数值。",
            "id": "4292782",
            "problem": "考虑一个用于集成电路与电子设计自动化 (EDA) 领域中高速串行器/解串器 (SerDes) 接收链路的基带判决反馈均衡器 (DFE)。DFE 的目标是消除由离散时间线性时不变信道引入的后标样点间干扰。在符号时间 $n$ 的 DFE 输出被建模为 $y[n] = y_{\\mathrm{ff}}[n] - \\sum_{i=1}^{M} b_{i}\\,d[n-i]$，其中 $y_{\\mathrm{ff}}[n]$ 是前馈均衡器输出，$b_{i}$ 是 DFE 反馈抽头系数，$d[n-i] \\in \\{-1,+1\\}$ 是过去的硬判决。瞬时误差定义为 $e[n] = a[n] - y[n]$，其中 $a[n] \\in \\{-1,+1\\}$ 是在由伪随机二进制序列 (PRBS) 驱动的训练间隔期间的已知训练符号。\n\n在训练期间，由于已知且受控的训练模式，假设过去的硬判决等于过去的训练符号。设用于自适应的代价函数为瞬时半均方误差 $J[n] = \\tfrac{1}{2} e[n]^{2}$，并使用梯度下降法来更新反馈系数。您将使用最小均方 (LMS) 方法，在单个时间索引 $n_{0}$ 处执行一个自适应步骤，将瞬时梯度视为期望的估计。\n\n在时间 $n_{0}$，以下为测量值或已知值：\n- PRBS 训练映射使用 $0 \\mapsto -1$ 和 $1 \\mapsto +1$。在 $n_{0}$ 之前的最后三个训练比特是 $\\{1,0,0\\}$，因此过去的硬判决为 $d[n_{0}-1]=+1$，$d[n_{0}-2]=-1$ 和 $d[n_{0}-3]=-1$。\n- 当前训练符号为 $a[n_{0}] = +1$。\n- 当前均衡器输出测量为 $y[n_{0}] = 0.85$，因此瞬时误差为 $e[n_{0}] = a[n_{0}] - y[n_{0}]$。\n- 当前的反馈抽头向量为 $\\mathbf{b} = [\\,b_{1},\\,b_{2},\\,b_{3}\\,] = [\\,0.04,\\,-0.015,\\,0.02\\,]$。\n- 步长为 $\\mu = 0.01$，反馈抽头数为 $M=3$。\n\n从上述建模假设和代价函数的定义出发，使用梯度下降的基本原理推导反馈系数的瞬时 LMS 更新，然后在 $n_{0}$ 处进行一次迭代后，数值计算更新后的反馈抽头向量。将最终更新的系数表示为 $[\\,b_{1}^{+},\\,b_{2}^{+},\\,b_{3}^{+}\\,]$ 形式的无量纲行矩阵。将您的答案四舍五入到六位有效数字。",
            "solution": "本题的目标是根据最小均方（LMS）算法，对判决反馈均衡器（DFE）的反馈抽头系数执行一次更新迭代。我们将首先推导LMS更新方程，然后代入给定数值进行计算。\n\n使用梯度下降法更新权重向量 $\\mathbf{w}$ 的规则如下：\n$$ \\mathbf{w}[n+1] = \\mathbf{w}[n] - \\mu \\nabla_{\\mathbf{w}} J[n] $$\n在本问题中，权重向量是 DFE 反馈抽头向量 $\\mathbf{b} = [b_1, b_2, \\dots, b_M]^T$。因此，在时间 $n_0$ 的更新规则为：\n$$ \\mathbf{b}^{+} = \\mathbf{b}[n_0] - \\mu \\nabla_{\\mathbf{b}} J[n_0] $$\n其中 $\\mathbf{b}[n_0]$ 是更新前的抽头向量，$\\nabla_{\\mathbf{b}} J[n_0]$ 是代价函数关于 $\\mathbf{b}$ 在时间 $n_0$ 的梯度。LMS 算法使用瞬时值来近似真实梯度（一个期望值）。\n\n梯度 $\\nabla_{\\mathbf{b}} J[n_0]$ 是一个向量，其分量为偏导数 $\\frac{\\partial J[n_0]}{\\partial b_k}$（$k=1, 2, \\dots, M$）。我们使用链式法则推导这个偏导数：\n$$ \\frac{\\partial J[n_0]}{\\partial b_k} = \\frac{\\partial}{\\partial b_k} \\left( \\frac{1}{2} e[n_0]^2 \\right) = e[n_0] \\frac{\\partial e[n_0]}{\\partial b_k} $$\n接下来，我们求误差 $e[n_0]$ 对 $b_k$ 的导数。根据问题定义，$e[n] = a[n] - y[n]$ 和 $y[n] = y_{\\mathrm{ff}}[n] - \\sum_{i=1}^{M} b_{i}\\,d[n-i]$。将 $y[n]$ 的表达式代入误差定义：\n$$ e[n_0] = a[n_0] - \\left( y_{\\mathrm{ff}}[n_0] - \\sum_{i=1}^{M} b_i d[n_0-i] \\right) = a[n_0] - y_{\\mathrm{ff}}[n_0] + \\sum_{i=1}^{M} b_i d[n_0-i] $$\n项 $a[n_0]$ 和 $y_{\\mathrm{ff}}[n_0]$ 不依赖于反馈系数 $b_k$。因此，对 $b_k$ 求偏导数：\n$$ \\frac{\\partial e[n_0]}{\\partial b_k} = \\frac{\\partial}{\\partial b_k} \\left( a[n_0] - y_{\\mathrm{ff}}[n_0] + \\sum_{i=1}^{M} b_i d[n_0-i] \\right) = d[n_0-k] $$\n将此结果代回梯度分量的表达式中：\n$$ \\frac{\\partial J[n_0]}{\\partial b_k} = e[n_0] d[n_0-k] $$\n因此，完整的梯度向量为：\n$$ \\nabla_{\\mathbf{b}} J[n_0] = \\begin{pmatrix} e[n_0]d[n_0-1] \\\\ e[n_0]d[n_0-2] \\\\ \\vdots \\\\ e[n_0]d[n_0-M] \\end{pmatrix} = e[n_0] \\mathbf{d}[n_0] $$\n其中 $\\mathbf{d}[n_0] = [d[n_0-1], d[n_0-2], \\dots, d[n_0-M]]^T$。\n\nDFE 反馈系数的最终 LMS 更新方程为：\n$$ \\mathbf{b}^{+} = \\mathbf{b}[n_0] - \\mu e[n_0] \\mathbf{d}[n_0] $$\n现在，我们代入给定的数值来计算更新后的向量 $\\mathbf{b}^{+}$。\n\n首先，计算瞬时误差 $e[n_0]$：\n$$ e[n_0] = a[n_0] - y[n_0] = 1 - 0.85 = 0.15 $$\n\n给定的值为：\n-   $\\mathbf{b}[n_0] = [\\,0.04,\\, -0.015,\\, 0.02\\,]^T$\n-   $\\mu = 0.01$\n-   $e[n_0] = 0.15$\n-   $\\mathbf{d}[n_0] = [\\,+1,\\, -1,\\, -1\\,]^T$\n\n现在，计算更新项 $\\mu e[n_0] \\mathbf{d}[n_0]$：\n$$ \\mu e[n_0] \\mathbf{d}[n_0] = (0.01)(0.15) \\begin{pmatrix} +1 \\\\ -1 \\\\ -1 \\end{pmatrix} = 0.0015 \\begin{pmatrix} +1 \\\\ -1 \\\\ -1 \\end{pmatrix} = \\begin{pmatrix} 0.0015 \\\\ -0.0015 \\\\ -0.0015 \\end{pmatrix} $$\n最后，计算更新后的系数向量 $\\mathbf{b}^{+}$：\n$$ \\mathbf{b}^{+} = \\mathbf{b}[n_0] - \\mu e[n_0] \\mathbf{d}[n_0] = \\begin{pmatrix} 0.04 \\\\ -0.015 \\\\ 0.02 \\end{pmatrix} - \\begin{pmatrix} 0.0015 \\\\ -0.0015 \\\\ -0.0015 \\end{pmatrix} $$\n$$ \\mathbf{b}^{+} = \\begin{pmatrix} 0.04 - 0.0015 \\\\ -0.015 - (-0.0015) \\\\ 0.02 - (-0.0015) \\end{pmatrix} = \\begin{pmatrix} 0.0385 \\\\ -0.015 + 0.0015 \\\\ 0.02 + 0.0015 \\end{pmatrix} = \\begin{pmatrix} 0.0385 \\\\ -0.0135 \\\\ 0.0215 \\end{pmatrix} $$\n问题要求答案以无量纲行矩阵的形式表示，并四舍五入到六位有效数字。\n-   $b_1^{+} = 0.0385000$\n-   $b_2^{+} = -0.0135000$\n-   $b_3^{+} = 0.0215000$\n更新后的反馈抽头向量为 $[\\,0.0385000, -0.0135000, 0.0215000\\,]$。",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 0.0385000  -0.0135000  0.0215000 \\end{pmatrix} } $$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "To understand any mixer, we must first grasp the mechanism of conversion gain. This exercise reveals that gain is not an abstract parameter but is fundamentally tied to the characteristics of the local oscillator (LO) signal. By performing a Fourier analysis on an idealized switching waveform, you will see precisely how the LO's harmonic content dictates mixing efficiency and learn to optimize it by adjusting a key parameter: the duty cycle $\\delta$. ",
            "id": "4294089",
            "problem": "An ideal current-commutating mixer uses a strongly nonlinear Local Oscillator (LO) switching function to translate a Radio Frequency (RF) signal to an Intermediate Frequency (IF). Consider the following idealized small-signal model: a linear transconductor of transconductance $g_{m}$ generates a current $i(t) = g_{m}\\,s_{\\mathrm{LO}}(t)\\,v_{\\mathrm{RF}}(t)$, which flows into a purely resistive load $R_{L}$. The RF input is $v_{\\mathrm{RF}}(t) = V_{\\mathrm{RF}}\\cos(\\omega_{\\mathrm{RF}} t)$ with $\\omega_{\\mathrm{RF}} = \\omega_{\\mathrm{LO}} + \\omega_{\\mathrm{IF}}$. The LO switching function $s_{\\mathrm{LO}}(t)$ is an ideal periodic pulse train of period $T_{\\mathrm{LO}} = 2\\pi/\\omega_{\\mathrm{LO}}$, equal to $1$ for an on-time of $\\delta T_{\\mathrm{LO}}$ and $0$ otherwise, with $0 < \\delta < 1$. The function $s_{\\mathrm{LO}}(t)$ is thus a unit-amplitude, unipolar rectangular pulse train of duty cycle $\\delta$.\n\nStarting only from the complex Fourier series definition for a periodic function with period $T_{\\mathrm{LO}}$, derive the magnitude of the fundamental harmonic of $s_{\\mathrm{LO}}(t)$ at $\\omega_{\\mathrm{LO}}$ as a function of $\\delta$, denoted $a_{1}(\\delta)$. Then, using only linear time-domain multiplication and trigonometric product identities, express the small-signal voltage conversion gain magnitude to IF, defined as $G_{c}(\\delta) \\equiv |V_{\\mathrm{IF}}|/|V_{\\mathrm{RF}}|$, in terms of $g_{m}$, $R_{L}$, and $a_{1}(\\delta)$. Finally, determine the duty cycle $\\delta$ that maximizes $a_{1}(\\delta)$ over $0<\\delta<1$, and compute the corresponding maximum normalized conversion gain $G_{c,\\max}/(g_{m}R_{L})$.\n\nProvide your final answer as a row matrix containing the optimal duty cycle and the maximum normalized conversion gain, in that order. The final answer should be exact (no rounding). No physical units are required in the final answer.",
            "solution": "The problem is first validated against the specified criteria.\n\n### Problem Validation\n\n**Step 1: Extract Givens**\n- Mixer output current: $i(t) = g_{m}\\,s_{\\mathrm{LO}}(t)\\,v_{\\mathrm{RF}}(t)$.\n- Transconductor: linear, with transconductance $g_{m}$.\n- Load: purely resistive, $R_{L}$.\n- RF input voltage: $v_{\\mathrm{RF}}(t) = V_{\\mathrm{RF}}\\cos(\\omega_{\\mathrm{RF}} t)$.\n- Frequency relationship: $\\omega_{\\mathrm{RF}} = \\omega_{\\mathrm{LO}} + \\omega_{\\mathrm{IF}}$.\n- LO switching function, $s_{\\mathrm{LO}}(t)$:\n    - Periodic with period $T_{\\mathrm{LO}} = 2\\pi/\\omega_{\\mathrm{LO}}$.\n    - A unipolar rectangular pulse train.\n    - $s_{\\mathrm{LO}}(t) = 1$ for an interval of duration $\\delta T_{\\mathrm{LO}}$ within each period.\n    - $s_{\\mathrm{LO}}(t) = 0$ otherwise.\n    - The duty cycle $\\delta$ is constrained by $0 < \\delta < 1$.\n- Quantities to be derived:\n    1. The magnitude of the fundamental harmonic of $s_{\\mathrm{LO}}(t)$ at $\\omega_{\\mathrm{LO}}$, denoted $a_{1}(\\delta)$.\n    2. The small-signal voltage conversion gain magnitude to IF, $G_{c}(\\delta) \\equiv |V_{\\mathrm{IF}}|/|V_{\\mathrm{RF}}|$, in terms of $g_{m}$, $R_{L}$, and $a_{1}(\\delta)$.\n    3. The duty cycle $\\delta$ that maximizes $a_{1}(\\delta)$, and the corresponding maximum normalized conversion gain $G_{c,\\max}/(g_{m}R_{L})$.\n\n**Step 2: Validate Using Extracted Givens**\n- **Scientifically Grounded:** The problem describes an idealized passive switching mixer, a standard building block in radio-frequency integrated circuits. The analysis involves Fourier series and linear circuit theory, which are fundamental principles of electrical engineering. The model is scientifically sound.\n- **Well-Posed:** The problem clearly defines all variables and functions and asks for the derivation of specific quantities and an optimization. The tasks are sequential and logically connected, leading to a unique and meaningful solution.\n- **Objective:** The problem is stated in precise, quantitative, and unbiased language. It is free of any subjective or opinion-based claims.\n- **Completeness and Consistency:** The problem is self-contained. All necessary information to perform the derivations and the optimization is provided. There are no contradictions in the given information.\n\n**Step 3: Verdict and Action**\nThe problem is valid. A complete solution will be provided.\n\n### Solution\n\nThe solution is derived in three parts as requested.\n\n**Part 1: Derivation of the fundamental harmonic magnitude $a_{1}(\\delta)$**\n\nThe LO switching function $s_{\\mathrm{LO}}(t)$ is a periodic function with period $T_{\\mathrm{LO}} = 2\\pi/\\omega_{\\mathrm{LO}}$. We can represent it using a real Fourier series. To simplify the calculation of the Fourier coefficients, we can define the pulse train to be an even function by centering one pulse of width $\\delta T_{\\mathrm{LO}}$ at $t=0$. Thus, within the period $[ -T_{\\mathrm{LO}}/2, T_{\\mathrm{LO}}/2 ]$, the function is:\n$s_{\\mathrm{LO}}(t) = 1$ for $t \\in [-\\delta T_{\\mathrm{LO}}/2, \\delta T_{\\mathrm{LO}}/2]$ and $s_{\\mathrm{LO}}(t) = 0$ otherwise.\n\nSince $s_{\\mathrm{LO}}(t)$ is an even function, its Fourier series expansion contains only cosine terms and a DC offset:\n$$s_{\\mathrm{LO}}(t) = \\frac{a_{0}}{2} + \\sum_{n=1}^{\\infty} a_{n} \\cos(n\\omega_{\\mathrm{LO}}t)$$\nwhere the coefficients $a_n$ are given by:\n$$a_{n} = \\frac{2}{T_{\\mathrm{LO}}} \\int_{-T_{\\mathrm{LO}}/2}^{T_{\\mathrm{LO}}/2} s_{\\mathrm{LO}}(t) \\cos(n\\omega_{\\mathrm{LO}}t) \\,dt$$\nThe problem asks for $a_{1}(\\delta)$, the magnitude of the fundamental harmonic. For $n=1$:\n$$a_{1} = \\frac{2}{T_{\\mathrm{LO}}} \\int_{-\\delta T_{\\mathrm{LO}}/2}^{\\delta T_{\\mathrm{LO}}/2} (1) \\cos(\\omega_{\\mathrm{LO}}t) \\,dt$$\nWe perform the integration:\n$$a_{1} = \\frac{2}{T_{\\mathrm{LO}}} \\left[ \\frac{\\sin(\\omega_{\\mathrm{LO}}t)}{\\omega_{\\mathrm{LO}}} \\right]_{-\\delta T_{\\mathrm{LO}}/2}^{\\delta T_{\\mathrm{LO}}/2}$$\n$$a_{1} = \\frac{2}{\\omega_{\\mathrm{LO}}T_{\\mathrm{LO}}} \\left( \\sin\\left(\\frac{\\omega_{\\mathrm{LO}}\\delta T_{\\mathrm{LO}}}{2}\\right) - \\sin\\left(-\\frac{\\omega_{\\mathrm{LO}}\\delta T_{\\mathrm{LO}}}{2}\\right) \\right)$$\nUsing the identity $\\omega_{\\mathrm{LO}}T_{\\mathrm{LO}} = 2\\pi$ and $\\sin(-x) = -\\sin(x)$:\n$$a_{1} = \\frac{2}{2\\pi} \\left( \\sin(\\pi\\delta) - (-\\sin(\\pi\\delta)) \\right) = \\frac{1}{\\pi} (2 \\sin(\\pi\\delta))$$\n$$a_{1} = \\frac{2}{\\pi} \\sin(\\pi\\delta)$$\nSince $0 < \\delta < 1$, the argument $\\pi\\delta$ is in $(0, \\pi)$, which means $\\sin(\\pi\\delta) > 0$. Therefore, the magnitude of the fundamental harmonic is:\n$$a_{1}(\\delta) = \\frac{2}{\\pi} \\sin(\\pi\\delta)$$\n\n**Part 2: Derivation of the conversion gain $G_{c}(\\delta)$**\n\nThe output current of the transconductor is $i(t) = g_{m}\\,s_{\\mathrm{LO}}(t)\\,v_{\\mathrm{RF}}(t)$. The output voltage is $v_{\\mathrm{out}}(t) = i(t) R_{L}$. We are interested in the component of $v_{\\mathrm{out}}(t)$ at the intermediate frequency, $\\omega_{\\mathrm{IF}}$.\nSubstituting the expressions for $v_{\\mathrm{RF}}(t)$ and the Fourier series of $s_{\\mathrm{LO}}(t)$:\n$$i(t) = g_{m} \\left( V_{\\mathrm{RF}}\\cos(\\omega_{\\mathrm{RF}} t) \\right) \\left( \\frac{a_{0}}{2} + a_{1}(\\delta)\\cos(\\omega_{\\mathrm{LO}}t) + \\sum_{n=2}^{\\infty} a_{n} \\cos(n\\omega_{\\mathrm{LO}}t) \\right)$$\nTo find the IF component, we look for terms resulting from the product of the RF and LO signals that have a frequency of $\\omega_{\\mathrm{IF}}$. The relevant term arises from the product of the RF input and the fundamental of the LO signal:\n$$i_{\\mathrm{mix}}(t) = g_{m} V_{\\mathrm{RF}} a_{1}(\\delta) \\cos(\\omega_{\\mathrm{RF}} t) \\cos(\\omega_{\\mathrm{LO}} t)$$\nUsing the trigonometric product-to-sum identity $\\cos(A)\\cos(B) = \\frac{1}{2}[\\cos(A-B) + \\cos(A+B)]$:\n$$i_{\\mathrm{mix}}(t) = \\frac{1}{2} g_{m} V_{\\mathrm{RF}} a_{1}(\\delta) \\left[ \\cos((\\omega_{\\mathrm{RF}}-\\omega_{\\mathrm{LO}})t) + \\cos((\\omega_{\\mathrm{RF}}+\\omega_{\\mathrm{LO}})t) \\right]$$\nGiven $\\omega_{\\mathrm{RF}} = \\omega_{\\mathrm{LO}} + \\omega_{\\mathrm{IF}}$, we have $\\omega_{\\mathrm{RF}} - \\omega_{\\mathrm{LO}} = \\omega_{\\mathrm{IF}}$. The component of the current at $\\omega_{\\mathrm{IF}}$ is:\n$$i_{\\mathrm{IF}}(t) = \\frac{1}{2} g_{m} V_{\\mathrm{RF}} a_{1}(\\delta) \\cos(\\omega_{\\mathrm{IF}}t)$$\nThe corresponding output voltage component at IF is $v_{\\mathrm{IF}}(t) = i_{\\mathrm{IF}}(t) R_{L}$:\n$$v_{\\mathrm{IF}}(t) = \\frac{1}{2} g_{m} R_{L} V_{\\mathrm{RF}} a_{1}(\\delta) \\cos(\\omega_{\\mathrm{IF}}t)$$\nThe magnitude (amplitude) of this voltage is $|V_{\\mathrm{IF}}| = \\frac{1}{2} g_{m} R_{L} V_{\\mathrm{RF}} a_{1}(\\delta)$. We assume $V_{\\mathrm{RF}}$ is the amplitude and is positive, so $|V_{\\mathrm{RF}}| = V_{\\mathrm{RF}}$.\nThe conversion gain magnitude is defined as $G_{c}(\\delta) \\equiv |V_{\\mathrm{IF}}|/|V_{\\mathrm{RF}}|$:\n$$G_{c}(\\delta) = \\frac{\\frac{1}{2} g_{m} R_{L} V_{\\mathrm{RF}} a_{1}(\\delta)}{V_{\\mathrm{RF}}}$$\n$$G_{c}(\\delta) = \\frac{1}{2} g_{m} R_{L} a_{1}(\\delta)$$\n\n**Part 3: Optimization of Duty Cycle and Calculation of Maximum Normalized Gain**\n\nThe conversion gain $G_{c}(\\delta)$ is directly proportional to $a_{1}(\\delta)$. To maximize $G_{c}(\\delta)$, we must maximize $a_{1}(\\delta)$. The expression for $a_{1}(\\delta)$ is:\n$$a_{1}(\\delta) = \\frac{2}{\\pi} \\sin(\\pi\\delta)$$\nWe need to find the maximum of this function for $\\delta \\in (0, 1)$. The term $2/\\pi$ is a positive constant, so we only need to maximize $\\sin(\\pi\\delta)$.\nThe argument of the sine function, $\\pi\\delta$, lies in the interval $(0, \\pi)$. In this interval, the sine function reaches its unique maximum value of $1$ at the point $\\pi/2$.\nTherefore, the optimal condition is:\n$$\\pi\\delta = \\frac{\\pi}{2}$$\nSolving for $\\delta$, we find the optimal duty cycle:\n$$\\delta = \\frac{1}{2}$$\nThis corresponds to a $50\\%$ duty cycle square wave, a well-known result for maximizing the fundamental harmonic.\n\nNow, we compute the maximum normalized conversion gain. First, we find the maximum conversion gain $G_{c,\\max}$ by substituting $\\delta = 1/2$ into the expression for $G_{c}(\\delta)$:\n$$G_{c,\\max} = G_{c}(1/2) = \\frac{1}{2} g_{m} R_{L} a_{1}(1/2)$$\n$$a_{1}(1/2) = \\frac{2}{\\pi} \\sin\\left(\\pi \\frac{1}{2}\\right) = \\frac{2}{\\pi} \\sin\\left(\\frac{\\pi}{2}\\right) = \\frac{2}{\\pi}(1) = \\frac{2}{\\pi}$$\n$$G_{c,\\max} = \\frac{1}{2} g_{m} R_{L} \\left(\\frac{2}{\\pi}\\right) = \\frac{g_{m} R_{L}}{\\pi}$$\nThe problem asks for the maximum normalized conversion gain, $G_{c,\\max}/(g_{m}R_{L})$:\n$$\\frac{G_{c,\\max}}{g_{m}R_{L}} = \\frac{g_{m} R_{L}/\\pi}{g_{m}R_{L}} = \\frac{1}{\\pi}$$\nThe two required results are the optimal duty cycle, $\\delta = 1/2$, and the maximum normalized conversion gain, $1/\\pi$.",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{1}{2} & \\frac{1}{\\pi} \\end{pmatrix}}$$"
        },
        {
            "introduction": "Beyond simple frequency translation, a mixer's utility is defined by its operational window, or dynamic range. This practice establishes the two critical boundaries of this window: the noise floor, which sets the minimum detectable signal, and the compression point, which defines the maximum tolerable input power. By calculating the input-referred dynamic range from standard industry metrics like Noise Figure (NF) and the 1-dB compression point (P1dB), you will gain a quantitative understanding of the trade-offs between sensitivity and linearity. ",
            "id": "4294119",
            "problem": "An active double-balanced Gilbert-cell radio-frequency mixer is used in a receiver chain designed within the discipline of integrated circuits and Electronic Design Automation (EDA). The mixer exhibits a small-signal conversion gain of $G_{c} = +7~\\mathrm{dB}$, a noise figure (NF) of $\\mathrm{NF} = 8~\\mathrm{dB}$, and an output one-decibel compression point of $P_{1\\mathrm{dB,out}} = 0~\\mathrm{dBm}$ at its intermediate-frequency (IF) port. The receiver targets a minimum output signal-to-noise ratio of $\\mathrm{SNR}_{\\min} = 10~\\mathrm{dB}$ in the IF bandwidth. Assume a system temperature of $T = 290~\\mathrm{K}$, an IF noise bandwidth of $B = 200~\\mathrm{kHz}$, and the Boltzmann constant $k_{B} = 1.380649 \\times 10^{-23}~\\mathrm{J/K}$. The local oscillator (LO) is ideal and its contribution to noise can be neglected relative to thermal noise.\n\nUsing fundamental definitions of thermal noise power $P_{n} = k_{B} T B$, the noise figure $F$ defined by $F = \\mathrm{SNR}_{\\mathrm{in}} / \\mathrm{SNR}_{\\mathrm{out}}$, and the one-decibel compression point as the upper bound of linear operation, define the mixer dynamic range at the input as the difference, in decibels, between the input-referred one-decibel compression point and the minimum detectable input signal power required to meet $\\mathrm{SNR}_{\\min}$ at the output. Then, calculate this input-referred dynamic range for the given parameters.\n\nRound your final numerical answer to three significant figures. Express the final dynamic range in $\\mathrm{dB}$.",
            "solution": "The problem is validated as scientifically grounded, well-posed, and objective. It contains all necessary information and definitions to proceed with a unique and meaningful solution.\n\nThe problem requires the calculation of the input-referred dynamic range ($\\mathrm{DR}_{\\mathrm{in}}$) of a radio-frequency mixer. As defined in the problem statement, this is the difference, in decibels, between the input-referred one-decibel compression point ($P_{1\\mathrm{dB,in}}$), which represents the maximum usable input power, and the minimum detectable input signal power ($P_{\\mathrm{in,min}}$). The dynamic range is therefore expressed as:\n$$\n\\mathrm{DR}_{\\mathrm{in}}[\\mathrm{dB}] = P_{1\\mathrm{dB,in}}[\\mathrm{dBm}] - P_{\\mathrm{in,min}}[\\mathrm{dBm}]\n$$\nWe will calculate each term on the right-hand side separately.\n\nFirst, we determine the maximum input power, which is the input-referred one-decibel compression point, $P_{1\\mathrm{dB,in}}$. The relationship between output power, input power, and conversion gain ($G_c$) in decibels is:\n$$\nP_{\\mathrm{out}}[\\mathrm{dBm}] = P_{\\mathrm{in}}[\\mathrm{dBm}] + G_c[\\mathrm{dB}]\n$$\nApplying this to the one-decibel compression point, we can find the input-referred value from the given output-referred value, $P_{1\\mathrm{dB,out}} = 0~\\mathrm{dBm}$, and the conversion gain, $G_c = 7~\\mathrm{dB}$:\n$$\nP_{1\\mathrm{dB,in}}[\\mathrm{dBm}] = P_{1\\mathrm{dB,out}}[\\mathrm{dBm}] - G_c[\\mathrm{dB}]\n$$\n$$\nP_{1\\mathrm{dB,in}}[\\mathrm{dBm}] = 0~\\mathrm{dBm} - 7~\\mathrm{dB} = -7~\\mathrm{dBm}\n$$\n\nNext, we determine the minimum detectable input signal power, $P_{\\mathrm{in,min}}$. This is the input signal power that produces the minimum required signal-to-noise ratio at the output, $\\mathrm{SNR}_{\\min} = 10~\\mathrm{dB}$. This calculation involves several steps.\n\nWe begin by calculating the available thermal noise power at the input of the mixer, $P_{n,\\mathrm{in}}$, within the given noise bandwidth $B$. Using the formula $P_n = k_B T B$:\n$$\nP_{n,\\mathrm{in}} = k_B T B = (1.380649 \\times 10^{-23}~\\mathrm{J/K}) \\times (290~\\mathrm{K}) \\times (200 \\times 10^3~\\mathrm{Hz})\n$$\n$$\nP_{n,\\mathrm{in}} \\approx 8.0078 \\times 10^{-16}~\\mathrm{W}\n$$\nTo work with decibel units, we convert this power to $\\mathrm{dBm}$ (decibels relative to $1~\\mathrm{mW}$):\n$$\nP_{n,\\mathrm{in}}[\\mathrm{dBm}] = 10 \\log_{10}\\left(\\frac{P_{n,\\mathrm{in}}}{1 \\times 10^{-3}~\\mathrm{W}}\\right) = 10 \\log_{10}\\left(\\frac{8.0078 \\times 10^{-16}}{1 \\times 10^{-3}}\\right)\n$$\n$$\nP_{n,\\mathrm{in}}[\\mathrm{dBm}] \\approx 10 \\log_{10}(8.0078 \\times 10^{-13}) \\approx -120.965~\\mathrm{dBm}\n$$\nThis represents the noise floor at the mixer's input, assuming a source at temperature $T$.\n\nNow, we find the total noise power at the mixer's output, $P_{n,\\mathrm{out}}$. This consists of the amplified input noise plus the noise generated internally by the mixer, which is quantified by the noise figure, $\\mathrm{NF}$. The total output noise power is:\n$$\nP_{n,\\mathrm{out}}[\\mathrm{dBm}] = P_{n,\\mathrm{in}}[\\mathrm{dBm}] + G_c[\\mathrm{dB}] + \\mathrm{NF}[\\mathrm{dB}]\n$$\nSubstituting the given values $G_c = 7~\\mathrm{dB}$ and $\\mathrm{NF} = 8~\\mathrm{dB}$:\n$$\nP_{n,\\mathrm{out}}[\\mathrm{dBm}] = -120.965~\\mathrm{dBm} + 7~\\mathrm{dB} + 8~\\mathrm{dB} = -105.965~\\mathrm{dBm}\n$$\nTo meet the requirement of $\\mathrm{SNR}_{\\min} = 10~\\mathrm{dB}$ at the output, the minimum output signal power, $P_{s,\\mathrm{out,min}}$, must be $10~\\mathrm{dB}$ above this output noise floor:\n$$\nP_{s,\\mathrm{out,min}}[\\mathrm{dBm}] = P_{n,\\mathrm{out}}[\\mathrm{dBm}] + \\mathrm{SNR}_{\\min}[\\mathrm{dB}]\n$$\n$$\nP_{s,\\mathrm{out,min}}[\\mathrm{dBm}] = -105.965~\\mathrm{dBm} + 10~\\mathrm{dB} = -95.965~\\mathrm{dBm}\n$$\nFinally, we refer this minimum output signal power back to the input to find the minimum detectable input signal power, $P_{\\mathrm{in,min}}$. This is done by subtracting the mixer's conversion gain:\n$$\nP_{\\mathrm{in,min}}[\\mathrm{dBm}] = P_{s,\\mathrm{out,min}}[\\mathrm{dBm}] - G_c[\\mathrm{dB}]\n$$\n$$\nP_{\\mathrm{in,min}}[\\mathrm{dBm}] = -95.965~\\mathrm{dBm} - 7~\\mathrm{dB} = -102.965~\\mathrm{dBm}\n$$\nThis value represents the sensitivity of the mixer under the specified conditions.\n\nWith both the maximum and minimum input power levels determined, we can now calculate the input-referred dynamic range:\n$$\n\\mathrm{DR}_{\\mathrm{in}}[\\mathrm{dB}] = P_{1\\mathrm{dB,in}}[\\mathrm{dBm}] - P_{\\mathrm{in,min}}[\\mathrm{dBm}]\n$$\n$$\n\\mathrm{DR}_{\\mathrm{in}}[\\mathrm{dB}] = (-7~\\mathrm{dBm}) - (-102.965~\\mathrm{dBm}) = 95.965~\\mathrm{dB}\n$$\nThe problem asks for the final answer to be rounded to three significant figures.\n$$\n\\mathrm{DR}_{\\mathrm{in}}[\\mathrm{dB}] \\approx 96.0~\\mathrm{dB}\n$$",
            "answer": "$$\\boxed{96.0}$$"
        },
        {
            "introduction": "Having established basic linearity with the 1-dB compression point, we now delve into the more subtle and critical issue of intermodulation distortion. This advanced problem challenges the simplistic static polynomial model of nonlinearity by introducing a more physically accurate time-varying, or cyclostationary, model where the LO signal itself modulates the transconductor's distortion. By comparing the third-order intercept point (IIP3) predictions of both models, this exercise highlights the sophisticated analysis required for high-performance RFIC design and quantifies the errors that can arise from oversimplified assumptions. ",
            "id": "4294032",
            "problem": "A double-balanced Gilbert cell radio-frequency mixer can be modeled at a high level as a transconductance stage followed by a commutating core driven by a strong Local Oscillator (LO). Consider a memoryless transconductor whose instantaneous output current is approximated by a static third-order polynomial in the radio-frequency input voltage, and a commutator that multiplies this current by a periodic LO-dependent switching function. Under strong LO drive, capacitive feedthrough and bias modulation cause the transconductorâ€™s coefficients to vary periodically, producing a time-varying nonlinearity that is cyclostationary with respect to the LO.\n\nLet the radio-frequency input be a two-tone signal\n$$\nv(t) \\;=\\; A\\Big(\\cos\\big((\\omega_{\\mathrm{LO}}+\\Delta_{1})t\\big) \\;+\\; \\cos\\big((\\omega_{\\mathrm{LO}}+\\Delta_{2})t\\big)\\Big),\n$$\nwhere $A$ is the single-tone amplitude, $\\omega_{\\mathrm{LO}}$ is the LO angular frequency, and $\\Delta_{1}$ and $\\Delta_{2}$ are small offsets such that downconversion yields two in-band intermediate-frequency tones. The transconductor current is\n$$\ni_{\\mathrm{RF}}(t) \\;=\\; \\alpha_{1}(t)\\,v(t) \\;+\\; \\alpha_{3}(t)\\,v^{3}(t),\n$$\nand the commutator multiplies by a periodic switching function $s(t)$. For the LO commutator, use the first harmonic approximation\n$$\ns(t) \\;\\approx\\; \\frac{4}{\\pi}\\cos\\big(\\omega_{\\mathrm{LO}} t\\big).\n$$\n\nCompare two models:\n- Static polynomial model: $\\alpha_{1}(t)=\\alpha_{1}$ and $\\alpha_{3}(t)=\\alpha_{3}$ are constant.\n- Time-varying nonlinearity model: even-order LO-induced modulation yields\n$$\n\\alpha_{1}(t) \\;=\\; \\alpha_{1}\\Big(1+\\beta\\cos\\big(2\\omega_{\\mathrm{LO}} t\\big)\\Big), \n\\qquad\n\\alpha_{3}(t) \\;=\\; \\alpha_{3}\\Big(1+\\eta\\cos\\big(2\\omega_{\\mathrm{LO}} t\\big)\\Big),\n$$\nwith given dimensionless modulation depths $\\beta=0.50$ and $\\eta=0.10$.\n\nUsing only the definitions above, trigonometric product identities, and the definition of the Input Third-Order Intercept Point (IIP3) as the input amplitude at which the extrapolated fundamental and third-order intermodulation products at the intermediate frequency are equal in magnitude, derive and compute the difference in IIP3 prediction between the static polynomial model and the time-varying nonlinearity model. Express the difference as\n$$\n\\Delta_{\\mathrm{IIP3}} \\;=\\; \\mathrm{IIP3}_{\\mathrm{static}} \\;-\\; \\mathrm{IIP3}_{\\mathrm{time-varying}}\n$$\nin decibels, using $\\log_{10}$, and round your answer to four significant figures. State the final result in dB.",
            "solution": "The problem asks for the difference in the Input Third-Order Intercept Point (IIP3) between a static nonlinearity model and a time-varying nonlinearity model for a radio-frequency (RF) mixer. The IIP3 is defined as the input amplitude at which the extrapolated amplitudes of the fundamental and third-order intermodulation (IM3) products at the intermediate frequency (IF) are equal. The difference is to be expressed in decibels (dB).\n\nThe output current of the mixer, before IF filtering, is given by the product of the transconductor current $i_{\\mathrm{RF}}(t)$ and the LO switching function $s(t)$:\n$$\ni_{\\mathrm{out}}(t) = i_{\\mathrm{RF}}(t) s(t) = \\Big(\\alpha_{1}(t)\\,v(t) + \\alpha_{3}(t)\\,v^{3}(t)\\Big) s(t)\n$$\nWe are interested in the low-frequency components of $i_{\\mathrm{out}}(t)$, as these constitute the IF signal. The input is a two-tone signal $v(t) = A\\Big(\\cos(\\omega_{1}t) + \\cos(\\omega_{2}t)\\Big)$, where $\\omega_{1} = \\omega_{\\mathrm{LO}}+\\Delta_{1}$ and $\\omega_{2} = \\omega_{\\mathrm{LO}}+\\Delta_{2}$. The LO switching function is approximated as $s(t) = \\frac{4}{\\pi}\\cos(\\omega_{\\mathrm{LO}}t)$. The multiplication by $s(t)$ heterodynes the RF spectrum centered around $\\omega_{\\mathrm{LO}}$ down to a baseband spectrum centered at $0$. An RF component at frequency $\\omega_{\\mathrm{RF}}$ in $i_{\\mathrm{RF}}(t)$ with amplitude $I_{\\mathrm{RF}}$ will produce an IF component at frequency $|\\omega_{\\mathrm{RF}} - \\omega_{\\mathrm{LO}}|$ with amplitude $\\frac{1}{2} I_{\\mathrm{RF}} \\times \\frac{4}{\\pi} = \\frac{2}{\\pi} I_{\\mathrm{RF}}$.\n\nFirst, we must determine the amplitudes of the fundamental and IM3 products in the RF current $i_{\\mathrm{RF}}(t)$.\nThe fundamental products in $v(t)$ are at frequencies $\\omega_1$ and $\\omega_2$, with amplitude $A$.\nTo find the IM3 products, we expand $v^3(t)$:\n$$\nv^3(t) = A^3(\\cos(\\omega_1 t) + \\cos(\\omega_2 t))^3\n$$\nUsing trigonometric identities, the terms relevant for IM3 products at frequencies $2\\omega_1 - \\omega_2$ and $2\\omega_2 - \\omega_1$ are found. For example, $3\\cos^2(\\omega_1 t)\\cos(\\omega_2 t) = \\frac{3}{2}\\cos(\\omega_2 t)(1+\\cos(2\\omega_1 t)) = \\frac{3}{2}\\cos(\\omega_2 t)+\\frac{3}{4}\\cos((2\\omega_1+\\omega_2)t)+\\frac{3}{4}\\cos((2\\omega_1-\\omega_2)t)$.\nThe RF IM3 components of $v^3(t)$ at frequencies $2\\omega_1 - \\omega_2 = \\omega_{\\mathrm{LO}} + (2\\Delta_1 - \\Delta_2)$ and $2\\omega_2 - \\omega_1 = \\omega_{\\mathrm{LO}} + (2\\Delta_2 - \\Delta_1)$ both have an amplitude of $\\frac{3}{4}A^3$.\n\n**Static Polynomial Model**\nIn this model, the coefficients are constant: $\\alpha_{1}(t) = \\alpha_{1}$ and $\\alpha_{3}(t) = \\alpha_{3}$.\nThe transconductor current is $i_{\\mathrm{RF}}(t) = \\alpha_{1}v(t) + \\alpha_{3}v^{3}(t)$.\nThe amplitude of the fundamental RF component (e.g., at $\\omega_1$) in $i_{\\mathrm{RF}}(t)$ is $I_{\\mathrm{RF,Fund}} = \\alpha_{1}A$.\nAfter mixing, the amplitude of the fundamental IF component (e.g., at $\\Delta_1$) is:\n$$\nI_{\\mathrm{IF,Fund,static}} = \\frac{2}{\\pi} (\\alpha_{1}A) = \\frac{2\\alpha_{1}A}{\\pi}\n$$\nThe amplitude of the IM3 RF component (e.g., at $2\\omega_1 - \\omega_2$) in $i_{\\mathrm{RF}}(t)$ is $I_{\\mathrm{RF,IM3}} = \\alpha_{3}\\left(\\frac{3}{4}A^{3}\\right)$.\nAfter mixing, the amplitude of the IM3 IF component (e.g., at $2\\Delta_1 - \\Delta_2$) is:\n$$\nI_{\\mathrm{IF,IM3,static}} = \\frac{2}{\\pi} \\left(\\frac{3}{4}\\alpha_{3}A^{3}\\right) = \\frac{3\\alpha_{3}A^{3}}{2\\pi}\n$$\nBy definition, at the IIP3, these amplitudes are equal. Let $A = A_{\\mathrm{IIP3,static}}$:\n$$\n\\frac{2\\alpha_{1}A_{\\mathrm{IIP3,static}}}{\\pi} = \\frac{3\\alpha_{3}A_{\\mathrm{IIP3,static}}^{3}}{2\\pi}\n$$\nSolving for the squared amplitude gives the input intercept point:\n$$\nA_{\\mathrm{IIP3,static}}^{2} = \\frac{4\\alpha_{1}}{3\\alpha_{3}}\n$$\n\n**Time-Varying Nonlinearity Model**\nHere, the coefficients vary with time: $\\alpha_{1}(t) = \\alpha_{1}(1+\\beta\\cos(2\\omega_{\\mathrm{LO}}t))$ and $\\alpha_{3}(t) = \\alpha_{3}(1+\\eta\\cos(2\\omega_{\\mathrm{LO}}t))$.\nThe output current involves products of multiple sinusoids. We must find all mixing paths that contribute to the fundamental and IM3 tones at IF.\nA general RF current component of the form $C(1+\\gamma\\cos(2\\omega_{\\mathrm{LO}}t))\\cos(\\omega_{\\mathrm{in}}t)$, where $\\omega_{\\mathrm{in}}=\\omega_{\\mathrm{LO}}+\\delta$, contains three frequency terms:\n$C\\cos((\\omega_{\\mathrm{LO}}+\\delta)t) + \\frac{C\\gamma}{2}\\cos((\\omega_{\\mathrm{LO}}-\\delta)t) + \\frac{C\\gamma}{2}\\cos((3\\omega_{\\mathrm{LO}}+\\delta)t)$.\nWhen mixed with $s(t)=\\frac{4}{\\pi}\\cos(\\omega_{\\mathrm{LO}}t)$, the first term downconverts to $\\delta$ with amplitude $\\frac{2C}{\\pi}$, and the second term also downconverts to $\\delta$ with amplitude $\\frac{C\\gamma}{\\pi}$. The third term does not produce an IF tone.\nThe total IF amplitude is the sum: $\\frac{2C}{\\pi} + \\frac{C\\gamma}{\\pi} = \\frac{C}{\\pi}(2+\\gamma)$.\n\nFor the fundamental IF component, the corresponding RF current amplitude is $C=\\alpha_1 A$, and the modulation parameter is $\\gamma=\\beta$. The IF amplitude is:\n$$\nI_{\\mathrm{IF,Fund,tv}} = \\frac{\\alpha_{1}A}{\\pi}(2+\\beta)\n$$\nFor the IM3 IF component, the RF current amplitude from $v^3(t)$ is $C=\\alpha_3(\\frac{3}{4}A^3)$, and the modulation parameter is $\\gamma=\\eta$. The IF amplitude is:\n$$\nI_{\\mathrm{IF,IM3,tv}} = \\frac{1}{\\pi}\\left(\\alpha_{3}\\frac{3}{4}A^{3}\\right)(2+\\eta) = \\frac{3\\alpha_3 A^3}{4\\pi}(2+\\eta)\n$$\nEquating these amplitudes at $A=A_{\\mathrm{IIP3,tv}}$:\n$$\n\\frac{\\alpha_{1}A_{\\mathrm{IIP3,tv}}}{\\pi}(2+\\beta) = \\frac{3\\alpha_{3}A_{\\mathrm{IIP3,tv}}^{3}}{4\\pi}(2+\\eta)\n$$\nSolving for the squared amplitude:\n$$\nA_{\\mathrm{IIP3,tv}}^{2} = \\frac{4\\alpha_{1}(2+\\beta)}{3\\alpha_{3}(2+\\eta)} = A_{\\mathrm{IIP3,static}}^{2} \\left(\\frac{2+\\beta}{2+\\eta}\\right)\n$$\n\n**Difference in IIP3**\nThe problem asks for $\\Delta_{\\mathrm{IIP3}} = \\mathrm{IIP3}_{\\mathrm{static}} - \\mathrm{IIP3}_{\\mathrm{time-varying}}$ in decibels. The IIP3 in dB (typically power, e.g., dBm) is proportional to $10\\log_{10}(A_{\\mathrm{IIP3}}^{2})$.\n$$\n\\Delta_{\\mathrm{IIP3}} = 10\\log_{10}\\left(A_{\\mathrm{IIP3,static}}^{2}\\right) - 10\\log_{10}\\left(A_{\\mathrm{IIP3,tv}}^{2}\\right)\n= 10\\log_{10}\\left(\\frac{A_{\\mathrm{IIP3,static}}^{2}}{A_{\\mathrm{IIP3,tv}}^{2}}\\right)\n$$\nSubstituting the derived ratio:\n$$\n\\Delta_{\\mathrm{IIP3}} = 10\\log_{10}\\left(\\frac{A_{\\mathrm{IIP3,static}}^{2}}{A_{\\mathrm{IIP3,static}}^{2} \\left(\\frac{2+\\beta}{2+\\eta}\\right)}\\right) = 10\\log_{10}\\left(\\frac{2+\\eta}{2+\\beta}\\right)\n$$\nNow, we substitute the given numerical values $\\beta=0.50$ and $\\eta=0.10$.\n$$\n\\Delta_{\\mathrm{IIP3}} = 10\\log_{10}\\left(\\frac{2+0.10}{2+0.50}\\right) = 10\\log_{10}\\left(\\frac{2.10}{2.50}\\right) = 10\\log_{10}(0.84)\n$$\nCalculating the value and rounding to four significant figures:\n$$\n\\Delta_{\\mathrm{IIP3}} \\approx 10 \\times (-0.0757209) \\approx -0.757209 \\, \\mathrm{dB}\n$$\nThe result rounded to four significant figures is $-0.7572$ dB.",
            "answer": "$$\\boxed{-0.7572}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Effective shield design is a cornerstone of managing crosstalk in modern integrated circuits, but it is not without its trade-offs. This exercise explores the fundamental optimization problem at the heart of shield engineering: balancing the reduction of mutual capacitance against the unavoidable increase in self-capacitance. By modeling the key physical relationships, you will determine the optimal shield dimensions that maximize noise reduction while respecting performance constraints related to signal delay. ",
            "id": "4297054",
            "problem": "An aggressor and a victim interconnect on the same metal layer in a silicon integrated circuit are routed in parallel within a single routing channel of fixed lateral extent. To reduce capacitive crosstalk, a grounded shield line of width $w_{s}$ is inserted between the aggressor (width $w_{a}$) and the victim (width $w_{v}$). The two edge-to-edge spacings, aggressor-to-shield and shield-to-victim, are designed equal by symmetry and denoted $g$. The total lateral routing channel width available to these three conductors and the two spacings is fixed and equals $W_{ch}$, so the geometric constraint is\n$$w_{a} + w_{v} + w_{s} + 2 g = W_{ch}.$$\nAll three lines are of thickness $t$ and are embedded in a homogeneous dielectric of permittivity $\\epsilon$. Assume quasi-static electrostatics: the electric field obeys $\\nabla \\times \\mathbf{E} = \\mathbf{0}$ and $\\nabla \\cdot \\mathbf{D} = \\rho$ with $\\mathbf{D} = \\epsilon \\mathbf{E}$, and capacitance is defined as $C = Q/V$. The victim’s baseline self capacitance to the substrate is fixed and independent of the shield, so the increase in victim self capacitance per unit length due to the shield is dominated by the lateral sidewall coupling between the victim and the grounded shield and may be modeled by the parallel-plate approximation between two vertical faces separated by $g$, yielding\n$$C_{\\text{self,inc}}(g) = \\frac{\\epsilon t}{g}.$$\nTo avoid degrading the victim’s delay, this increase must be bounded above by a specified limit $\\Delta C_{\\text{self}}$, i.e.,\n$$\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}.$$\nThe near-end crosstalk is proportional to the mutual capacitance per unit length between the aggressor and victim. In the presence of a finite-width grounded shield, the mutual capacitance is dominated by fringing fields that “leak” around the shield edges. Under the two-dimensional Laplace equation in the cross-section and separation-of-variables in the shielded slot geometry, the lowest spatial harmonic yields an exponentially decaying field across the shield width; accordingly, the mutual capacitance can be approximated as\n$$C_{m}(w_{s}, g) = C_{m0} \\exp\\!\\left(-\\frac{\\pi w_{s}}{2 g}\\right),$$\nwhere $C_{m0}$ is the mutual capacitance per unit length between the aggressor and victim in the absence of a shield for the same $g$-scaled geometry. This approximation captures the exponential suppression of coupling with increasing $w_{s}/g$ under quasi-static field confinement.\n\nSubject to the above physical laws and constraints, determine the shield width $w_{s}$ that minimizes $C_{m}(w_{s}, g)$ while satisfying the routing channel width and the bound on $C_{\\text{self,inc}}(g)$. Assume the parameters are such that a feasible design exists with a nonnegative shield width. Express your final answer as a closed-form analytic expression in terms of $W_{ch}$, $w_{a}$, $w_{v}$, $\\epsilon$, $t$, and $\\Delta C_{\\text{self}}$. No numerical evaluation is required.",
            "solution": "The problem is to find the shield width $w_s$ that minimizes the mutual capacitance $C_m(w_s, g)$ subject to a geometric constraint and a self-capacitance constraint.\n\nThe mutual capacitance to be minimized is:\n$$C_{m}(w_{s}, g) = C_{m0} \\exp\\left(-\\frac{\\pi w_{s}}{2 g}\\right)$$\nMinimizing $C_m$ is equivalent to maximizing the ratio $f(w_s, g) = \\frac{w_s}{g}$, since $C_{m0}$ and $\\pi$ are positive constants and the exponential function is monotonic.\n\nThe constraints on the variables $w_s$ and $g$ are:\n1.  Geometric constraint: $w_{a} + w_{v} + w_{s} + 2g = W_{ch}$\n2.  Self-capacitance constraint: $\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}}$\n3.  Physical constraints: $w_{s} \\ge 0$ and $g > 0$\n\nFirst, we express $w_s$ as a function of $g$ using the geometric constraint:\n$$w_{s}(g) = W_{ch} - w_{a} - w_{v} - 2g$$\nSubstitute this into the objective function $f = \\frac{w_s}{g}$:\n$$f(g) = \\frac{W_{ch} - w_{a} - w_{v} - 2g}{g} = \\frac{W_{ch} - w_{a} - w_{v}}{g} - 2$$\n\nNext, we establish the feasible range for $g$. The self-capacitance constraint gives a lower bound on $g$:\n$$\\frac{\\epsilon t}{g} \\le \\Delta C_{\\text{self}} \\implies g \\ge \\frac{\\epsilon t}{\\Delta C_{\\text{self}}}$$\nLet $g_{\\text{min}} = \\frac{\\epsilon t}{\\Delta C_{\\text{self}}}$.\n\nThe physical constraint $w_s \\ge 0$ provides an upper bound on $g$:\n$$W_{ch} - w_{a} - w_{v} - 2g \\ge 0 \\implies g \\le \\frac{W_{ch} - w_{a} - w_{v}}{2}$$\nThe feasible range for $g$ is thus an interval $[g_{\\text{min}}, g_{\\text{max}}]$, which is non-empty by the problem's assumption.\n\nWe need to maximize $f(g)$ over this interval. To analyze the behavior of $f(g)$, we take its derivative with respect to $g$:\n$$\\frac{df}{dg} = \\frac{d}{dg} \\left( \\frac{W_{ch} - w_{a} - w_{v}}{g} - 2 \\right) = -\\frac{W_{ch} - w_{a} - w_{v}}{g^2}$$\nFor a physical solution to exist, the channel width must be greater than the sum of the aggressor and victim widths, so $(W_{ch} - w_{a} - w_{v}) > 0$. Since $g^2$ is also positive, the derivative $\\frac{df}{dg}$ is strictly negative over the entire feasible domain. This means that $f(g)$ is a monotonically decreasing function of $g$.\n\nTo maximize a monotonically decreasing function over a closed interval, we must choose the minimum possible value for its argument. The minimum feasible value for $g$ is $g_{\\text{min}}$. Therefore, the optimal spacing is:\n$$g_{\\text{opt}} = g_{\\text{min}} = \\frac{\\epsilon t}{\\Delta C_{\\text{self}}}$$\nThis choice means the self-capacitance constraint becomes active (is met with equality), dedicating the maximum possible channel width to the shield by making the gaps as small as the delay constraint allows.\n\nFinally, we find the optimal shield width, $w_s$, by substituting $g_{\\text{opt}}$ into the equation for $w_s(g)$:\n$$w_{s, \\text{opt}} = W_{ch} - w_{a} - w_{v} - 2g_{\\text{opt}}$$\n$$w_{s, \\text{opt}} = W_{ch} - w_{a} - w_{v} - 2\\left(\\frac{\\epsilon t}{\\Delta C_{\\text{self}}}\\right)$$\nThis is the closed-form expression for the optimal shield width.",
            "answer": "$$\n\\boxed{W_{ch} - w_{a} - w_{v} - 2\\frac{\\epsilon t}{\\Delta C_{\\text{self}}}}\n$$"
        },
        {
            "introduction": "A shield's effectiveness is critically dependent on its connection to a stable reference potential. This exercise examines a common and severe failure mode in IC design where a shield wire crosses a split in the ground plane, compromising its return path. Through nodal analysis of a lumped capacitive model , you will quantify the dramatic increase in crosstalk noise, underscoring the principle that a shield with a poor ground connection can become a source of coupling rather than a defense against it.",
            "id": "4297090",
            "problem": "An on-chip shielded interconnect in an Integrated Circuit (IC) design within the domain of Electronic Design Automation (EDA) crosses a split between two ground domains. Over the split, the shield loses its low-impedance return and instead couples to the global ground only through a small parasitic capacitance across the split. Assume quasi-static field conditions along the short crossing segment and model the coupling in that segment using lumped capacitances derived from electrostatic field partitioning.\n\nConsider three conductors: an aggressor line at node $A$, a grounded shield at node $S$, and a victim line at node $V$. Let $A$ be driven by an ideal sinusoidal voltage source of amplitude $V_{a}$ at angular frequency $\\omega$, and let $V$ be a high-impedance receiver input having only a capacitive return to the global ground. The shield $S$ lies geometrically between $A$ and $V$. In the uniform region away from the split, the shield is tied to ground. Over the split, the return path from $S$ to the global ground exists only through a small capacitance across the gap.\n\nModel the crossing segment by the following lumped elements:\n- Mutual capacitance between aggressor and shield: $C_{AS}$.\n- Mutual capacitance between shield and victim: $C_{SV}$.\n- Residual direct capacitance between aggressor and victim (fringing around shield): $C_{AV}$.\n- Victim-to-ground capacitance (including input and to the global plane): $C_{VG}$.\n- Shield-to-ground capacitance across the split (the only return across the gap): $C_{\\mathrm{gap}}$.\n\nAssume lossless, linear, time-invariant elements and sinusoidal steady-state. Use conservation of charge (Kirchhoff’s current law derived from Maxwell’s equations in the quasi-static regime) to write nodal equations in the frequency domain and solve for the victim voltage amplitude $|V_{v}|$ in two cases:\n1. Solid reference: the shield is solidly grounded over the region (this corresponds to the limit $C_{\\mathrm{gap}} \\to \\infty$ so that $V_{s}=0$).\n2. Split ground: the shield crosses the gap and is connected to ground only via $C_{\\mathrm{gap}}$.\n\nDefine the crosstalk penalty $P$ as the ratio of the victim amplitude in the split-ground case to that in the solid-reference case,\n$$\nP \\equiv \\frac{|V_{v}|_{\\text{split}}}{|V_{v}|_{\\text{solid}}}.\n$$\nDerive $P$ symbolically in terms of the capacitances and then evaluate it numerically for the following parameter values:\n- $C_{AS} = 20\\,\\mathrm{fF}$,\n- $C_{SV} = 20\\,\\mathrm{fF}$,\n- $C_{AV} = 2\\,\\mathrm{fF}$,\n- $C_{VG} = 100\\,\\mathrm{fF}$,\n- $C_{\\mathrm{gap}} = 5\\,\\mathrm{fF}$,\n- $V_{a} = 1\\,\\mathrm{V}$,\n- $f = 5\\,\\mathrm{GHz}$.\n\nExpress the final crosstalk penalty as a pure decimal ratio (dimensionless). Round your answer to four significant figures.",
            "solution": "The problem requires an analysis of crosstalk on a victim line in two scenarios: one with a solid ground reference for a shield conductor, and one where the shield crosses a split in the ground plane. The analysis will be conducted in the frequency domain under quasi-static assumptions, using a lumped-element capacitive model. The core methodology is the application of Kirchhoff’s Current Law (KCL) at the relevant circuit nodes.\n\nLet all time-varying voltages and currents be represented by their complex phasors in the sinusoidal steady state at angular frequency $\\omega$. For a capacitor $C$, the current phasor $I$ is related to the voltage phasor $V$ across it by $I = j\\omega C V$, where $j$ is the imaginary unit. We will write KCL equations for the sum of currents leaving each node. The factor $j\\omega$ will be common to all terms in the KCL equations for this purely capacitive network and will be canceled, demonstrating that the voltage ratios are independent of frequency within this model's validity. The node voltages are denoted by the phasors $V_a$, $V_s$, and $V_v$ for the aggressor, shield, and victim lines, respectively. The aggressor voltage $V_a$ is the input, with amplitude $V_a$.\n\n**Case 1: Solid Reference Ground**\n\nIn this configuration, the shield conductor $S$ is assumed to be perfectly tied to the ground reference. This corresponds to the limit $C_{\\mathrm{gap}} \\to \\infty$ in the model, which forces the shield voltage to be zero.\n$$\nV_s = 0\n$$\nWe apply KCL at the victim node $V$. The currents leaving the node are due to its capacitive coupling to the aggressor ($C_{AV}$), the shield ($C_{SV}$), and the ground ($C_{VG}$).\n$$\n\\sum I_V = 0\n$$\n$$\n(j\\omega C_{AV})(V_v - V_a) + (j\\omega C_{SV})(V_v - V_s) + (j\\omega C_{VG})(V_v - 0) = 0\n$$\nSubstituting $V_s = 0$ and canceling the common factor $j\\omega$:\n$$\nC_{AV}(V_v - V_a) + C_{SV}V_v + C_{VG}V_v = 0\n$$\nSolving for $V_v$:\n$$\nV_v(C_{AV} + C_{SV} + C_{VG}) = V_a C_{AV}\n$$\n$$\nV_{v,\\text{solid}} = V_a \\frac{C_{AV}}{C_{AV} + C_{SV} + C_{VG}}\n$$\nSince all capacitances and $V_a$ (as an amplitude) are real, the victim voltage is also real. Its amplitude is:\n$$\n|V_{v}|_{\\text{solid}} = V_a \\frac{C_{AV}}{C_{AV} + C_{SV} + C_{VG}}\n$$\n\n**Case 2: Split Ground**\n\nIn this case, the shield's connection to the global ground is non-ideal and is represented by the capacitance $C_{\\mathrm{gap}}$. The shield voltage $V_s$ is now a floating and unknown potential. We must write KCL equations for both the victim node $V$ and the shield node $S$.\n\nKCL at node $V$:\n$$\n(j\\omega C_{AV})(V_v - V_a) + (j\\omega C_{SV})(V_v - V_s) + (j\\omega C_{VG})V_v = 0\n$$\nCanceling $j\\omega$ and rearranging:\n$$\nV_v(C_{AV} + C_{SV} + C_{VG}) - V_s C_{SV} = V_a C_{AV} \\quad (1)\n$$\n\nKCL at node $S$:\nThe currents leaving node $S$ are due to its coupling to the aggressor ($C_{AS}$), the victim ($C_{SV}$), and the ground plane across the split ($C_{\\mathrm{gap}}$).\n$$\n(j\\omega C_{AS})(V_s - V_a) + (j\\omega C_{SV})(V_s - V_v) + (j\\omega C_{\\mathrm{gap}})V_s = 0\n$$\nCanceling $j\\omega$ and rearranging:\n$$\n-V_v C_{SV} + V_s(C_{AS} + C_{SV} + C_{\\mathrm{gap}}) = V_a C_{AS} \\quad (2)\n$$\n\nWe now have a system of two linear equations in two unknowns, $V_v$ and $V_s$. Let us define summary capacitances for clarity:\n$$\nC_{V,\\text{tot}} \\equiv C_{AV} + C_{SV} + C_{VG}\n$$\n$$\nC_{S,\\text{tot}} \\equiv C_{AS} + C_{SV} + C_{\\mathrm{gap}}\n$$\nThe system becomes:\n$$\n\\begin{pmatrix} C_{V,\\text{tot}} & -C_{SV} \\\\ -C_{SV} & C_{S,\\text{tot}} \\end{pmatrix} \\begin{pmatrix} V_v \\\\ V_s \\end{pmatrix} = \\begin{pmatrix} V_a C_{AV} \\\\ V_a C_{AS} \\end{pmatrix}\n$$\nWe solve for $V_v$ using Cramer's rule:\n$$\nV_{v,\\text{split}} = \\frac{\\det \\begin{pmatrix} V_a C_{AV} & -C_{SV} \\\\ V_a C_{AS} & C_{S,\\text{tot}} \\end{pmatrix}}{\\det \\begin{pmatrix} C_{V,\\text{tot}} & -C_{SV} \\\\ -C_{SV} & C_{S,\\text{tot}} \\end{pmatrix}} = \\frac{V_a C_{AV} C_{S,\\text{tot}} - (-C_{SV})(V_a C_{AS})}{C_{V,\\text{tot}}C_{S,\\text{tot}} - (-C_{SV})(-C_{SV})}\n$$\n$$\nV_{v,\\text{split}} = V_a \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}\n$$\nThe amplitude is:\n$$\n|V_{v}|_{\\text{split}} = V_a \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}\n$$\n\n**Crosstalk Penalty $P$**\n\nThe crosstalk penalty $P$ is the ratio of the victim voltage amplitudes in the two cases. The aggressor amplitude $V_a$ will cancel.\n$$\nP \\equiv \\frac{|V_{v}|_{\\text{split}}}{|V_{v}|_{\\text{solid}}} = \\frac{V_a \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}}{V_a \\frac{C_{AV}}{C_{V,\\text{tot}}}}\n$$\n$$\nP = \\frac{C_{V,\\text{tot}}}{C_{AV}} \\cdot \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2}\n$$\n\n**Numerical Evaluation**\n\nWe are given the following parameter values:\n- $C_{AS} = 20\\,\\mathrm{fF}$\n- $C_{SV} = 20\\,\\mathrm{fF}$\n- $C_{AV} = 2\\,\\mathrm{fF}$\n- $C_{VG} = 100\\,\\mathrm{fF}$\n- $C_{\\mathrm{gap}} = 5\\,\\mathrm{fF}$\n\nThe provided values for $V_a$ and $f$ are not needed for the calculation of the dimensionless ratio $P$.\n\nFirst, we calculate the summary capacitances:\n$$\nC_{V,\\text{tot}} = C_{AV} + C_{SV} + C_{VG} = 2\\,\\mathrm{fF} + 20\\,\\mathrm{fF} + 100\\,\\mathrm{fF} = 122\\,\\mathrm{fF}\n$$\n$$\nC_{S,\\text{tot}} = C_{AS} + C_{SV} + C_{\\mathrm{gap}} = 20\\,\\mathrm{fF} + 20\\,\\mathrm{fF} + 5\\,\\mathrm{fF} = 45\\,\\mathrm{fF}\n$$\nNow, we calculate the victim voltage amplitudes for each case (assuming $V_a=1$).\n$$\n|V_{v}|_{\\text{solid}} = \\frac{C_{AV}}{C_{V,\\text{tot}}} = \\frac{2}{122} = \\frac{1}{61}\n$$\n$$\n|V_{v}|_{\\text{split}} = \\frac{C_{AV}C_{S,\\text{tot}} + C_{AS}C_{SV}}{C_{V,\\text{tot}}C_{S,\\text{tot}} - C_{SV}^2} = \\frac{(2)(45) + (20)(20)}{(122)(45) - (20)^2} = \\frac{90 + 400}{5490 - 400} = \\frac{490}{5090} = \\frac{49}{509}\n$$\nThe penalty ratio is:\n$$\nP = \\frac{|V_{v}|_{\\text{split}}}{|V_{v}|_{\\text{solid}}} = \\frac{49/509}{1/61} = \\frac{49 \\times 61}{509} = \\frac{2989}{509} \\approx 5.8722986...\n$$\nRounding to four significant figures, the crosstalk penalty is $5.872$. This indicates that the noise voltage on the victim line is nearly $6$ times larger due to the split in the ground plane, a severe signal integrity issue.",
            "answer": "$$\n\\boxed{5.872}\n$$"
        },
        {
            "introduction": "Bridging the gap between electrical theory and physical implementation is a crucial skill in electronic design automation (EDA). This exercise transitions from conceptual design to the practical world of layout verification, where design rules ensure manufacturability and performance. You will develop a computational rule checker  to validate the physical grounding of shield wires, ensuring that the spacing and density of ground connections are sufficient to maintain the shield's integrity, a task central to modern IC verification flows.",
            "id": "4296998",
            "problem": "You are given an abstracted view of an extracted layout for shield wires in an integrated circuit as would be produced by Electronic Design Automation (EDA). For each shield segment, the geometry is represented as a one-dimensional interval of length $L$ in micrometers ($\\mu$m), along which a set of ground connections (vias) appears at sorted positions $\\{x_k\\}_{k=1}^{n}$, where $0 \\le x_k \\le L$. The engineering objective is to ensure that the shield maintains a sufficiently low impedance to ground along its entire length. From a first-principles perspective, in the quasi-static regime, the shield approximates an equipotential conductor if and only if there is no interval along the shield that is excessively long without a connection to ground. Therefore, the rule check must evaluate two complementary criteria: spacing to ground connections and aggregate via density.\n\nFundamental basis for the derivation: In the quasi-static regime, an extended conductor behaves as a distributed network whose potential is set by its grounding. The absence of a ground tie over a long interval increases the local impedance seen by that portion of the shield, which raises the potential variance and thus degrades shielding effectiveness. In purely geometrical terms, this reduces to the requirement that no sub-interval of the shield exceed a prescribed length without containing a ground tie, and that the number of ground ties per unit length is above a minimum.\n\nDefinitions for this rule check are as follows:\n- For a segment of total length $L$ and via positions $\\{x_k\\}_{k=1}^{n}$, define the gaps induced by vias and endpoints as $G = \\{x_1 - 0, x_2 - x_1, \\dots, x_n - x_{n-1}, L - x_n\\}$ if $n \\ge 1$, and $G = \\{L\\}$ if $n = 0$.\n- Let $p_{\\mathrm{req}}$ be the required pitch to ground in micrometers; the spacing requirement is that the maximum gap $g^{\\max} = \\max(G)$ must satisfy $g^{\\max} \\le p_{\\mathrm{req}}$.\n- Let $L_{\\mathrm{gap\\_max}}$ be a hard maximum allowable ungrounded run length in micrometers; any gap $g \\in G$ with $g > L_{\\mathrm{gap\\_max}}$ constitutes a severe violation.\n- Let $\\rho_{\\min}$ be the minimum via density in vias per micrometer; the density requirement is that $n / L \\ge \\rho_{\\min}$.\n\nYour tasks:\n- For each test case, compute three counts aggregated over all its segments: the count of minor spacing violations (number of gaps $g$ with $g > p_{\\mathrm{req}}$), the count of severe spacing violations (number of gaps $g$ with $g > L_{\\mathrm{gap\\_max}}$), and the count of via density violations (number of segments with $n/L < \\rho_{\\min}$). All lengths are in micrometers ($\\mu$m). Minor and severe counts are integers; density violation count is an integer summing segments with density below threshold. Use strict inequality for violations.\n- Return, for each test case, a list $[v_{\\mathrm{minor}}, v_{\\mathrm{severe}}, v_{\\mathrm{density}}]$.\n\nTest suite:\nThe program must evaluate the following test cases. Each test case is a tuple of $(p_{\\mathrm{req}}, L_{\\mathrm{gap\\_max}}, \\rho_{\\min}, \\text{segments})$ where segments is a list of $(L, \\text{via\\_positions})$.\n\n- Test case $1$: $p_{\\mathrm{req}} = 50$, $L_{\\mathrm{gap\\_max}} = 120$, $\\rho_{\\min} = 0.01$, segments $=[(200, [40, 90, 140, 190]), (150, [0, 75, 150])]$.\n- Test case $2$: $p_{\\mathrm{req}} = 60$, $L_{\\mathrm{gap\\_max}} = 100$, $\\rho_{\\min} = 0.02$, segments $=[(100, [0, 100])]$.\n- Test case $3$: $p_{\\mathrm{req}} = 30$, $L_{\\mathrm{gap\\_max}} = 80$, $\\rho_{\\min} = 0.05$, segments $=[(200, [])]$.\n- Test case $4$: $p_{\\mathrm{req}} = 40$, $L_{\\mathrm{gap\\_max}} = 90$, $\\rho_{\\min} = 0.015$, segments $=[(250, [45, 85, 130, 175, 220])]$.\n- Test case $5$: $p_{\\mathrm{req}} = 70$, $L_{\\mathrm{gap\\_max}} = 110$, $\\rho_{\\min} = 0.01$, segments $=[(300, [20, 100, 180, 260]), (120, [60])]$.\n\nAll length quantities $L$, $x_k$, $p_{\\mathrm{req}}$, $L_{\\mathrm{gap\\_max}}$ must be treated in micrometers. Density quantities are in vias per micrometer.\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets. Each element corresponds to a test case and is itself a list $[v_{\\mathrm{minor}}, v_{\\mathrm{severe}}, v_{\\mathrm{density}}]$. For example, the output format must look like $[[a_1,b_1,c_1],[a_2,b_2,c_2],\\dots]$ where $a_i$, $b_i$, and $c_i$ are integers.",
            "solution": "The solution requires implementing a computational rule checker based on the provided definitions. The overall algorithm iterates through each test case, and within each case, it iterates through every shield segment to tally violations. For each test case, three violation counters are initialized: `v_minor`, `v_severe`, and `v_density`.\n\nFor each segment, defined by its length `L` and a sorted list of via positions, the following checks are performed:\n\n1.  **Density Violation Check**:\n    The via density is calculated as the number of vias `n` divided by the segment length `L`. A density violation is counted if this density is strictly less than the required minimum density `rho_min`. This check is performed once per segment.\n\n2.  **Spacing Violation Checks**:\n    The set of ungrounded gaps `G` is determined from the via positions. This set includes the distance from the start of the segment to the first via, the distances between consecutive vias, and the distance from the last via to the end of the segment. If there are no vias, the only gap is the entire segment length `L`.\n    \n    Each gap `g` in the set `G` is then checked against two thresholds:\n    -   A **minor spacing violation** is counted if `g > p_req`.\n    -   A **severe spacing violation** is counted if `g > L_gap_max`.\n    \n    These counts are accumulated for all gaps within the segment.\n\nAfter all segments in a test case are processed, the aggregated counts `[v_minor, v_severe, v_density]` form the result for that case. This process is repeated for all five test cases to produce the final output.\n\n**Execution Trace:**\n- **Case 1:** Seg 1 has no violations. Seg 2 has 2 gaps of 75, both greater than `p_req`=50, resulting in 2 minor violations. Total: `[2, 0, 0]`.\n- **Case 2:** Has one segment with one gap of 100. This is greater than `p_req`=60, so 1 minor violation. It is not strictly greater than `L_gap_max`=100. Total: `[1, 0, 0]`.\n- **Case 3:** Has one segment with no vias. Density is 0, which is less than `rho_min`=0.05 (1 density violation). The single gap of 200 is greater than `p_req`=30 (1 minor violation) and `L_gap_max`=80 (1 severe violation). Total: `[1, 1, 1]`.\n- **Case 4:** Has one segment with gaps {45, 40, 45, 45, 45, 30}. Four gaps are 45, which is greater than `p_req`=40, resulting in 4 minor violations. A re-check shows the gaps are {45, 40, 45, 45, 45, 30}. Gaps are `45-0=45`, `85-45=40`, `130-85=45`, `175-130=45`, `220-175=45`, `250-220=30`. The gaps greater than 40 are the four gaps of 45. Correction: The original thought process was flawed. Let's re-run case 4. Gaps are {45, 40, 45, 45, 45, 30}. `p_req`=40. Gaps > 40 are {45, 45, 45, 45}. That is 4 minor violations. Oops, my previous manual trace was wrong. Let me re-check all.\n    - Case 1: OK. `[2,0,0]`\n    - Case 2: OK. `[1,0,0]`\n    - Case 3: OK. `[1,1,1]`\n    - Case 4: Gaps={45,40,45,45,45,30}. `p_req`=40. Four gaps of 45 > 40. Minor violations = 4. `L_gap_max`=90. No severe violations. Density = 5/250=0.02 >= 0.015. No density violation. Result: `[4,0,0]`.\n    - Case 5: Seg 1: L=300, vias=[20, 100, 180, 260]. Gaps={20, 80, 80, 80, 40}. `p_req`=70. Three gaps of 80 > 70. Minor violations = 3. Seg 2: L=120, vias=[60]. Density=1/120  0.01. Density violation=1. Gaps={60, 60}. No gap > 70. No spacing violations. Total: `[3, 0, 1]`.\n\nFinal results based on careful re-calculation: `[[2, 0, 0], [1, 0, 0], [1, 1, 1], [4, 0, 0], [3, 0, 1]]`. The logic in the provided python code in the initial XML produces these correct results.",
            "answer": "[[2, 0, 0], [1, 0, 0], [1, 1, 1], [4, 0, 0], [3, 0, 1]]"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "深入片上电源管理单元 (PMU) 设计的核心，首先要理解其能量转换的效率。效率是衡量稳压器性能的首要指标，直接影响芯片的功耗和散热。本实践练习将引导您剖析一个同步降压稳压器中的两种主要损耗来源——导通损耗和开关损耗，通过亲手计算，您将量化地理解在追求高开关频率以缩小元件尺寸时所面临的设计权衡。",
            "id": "4286028",
            "problem": "一个片上同步降压稳压器从一个较高的片上电源轨为数字核心负载供电。该稳压器使用两个由栅极驱动器驱动的相同的金属氧化物半导体场效应晶体管（MOSFET）功率开关。功率级工作在连续导通模式，并由脉冲宽度调制开关方案进行时钟控制。考虑以下设计和工作条件，这些条件代表了在电子设计自动化（EDA）范围内，采用先进的互补金属氧化物半导体工艺实现的、具有高开关频率的片上电源管理单元：\n\n- 输入电压固定为 $V_{in} = 1.2\\,\\text{V}$，输出电压稳定在 $V_{out} = 0.8\\,\\text{V}$。\n- 电感值为 $L = 200\\,\\text{nH}$，开关频率为 $f_{sw} = 200\\,\\text{MHz}$。\n- 负载电流为 $I_{load} = 1.0\\,\\text{A}$。\n- 每个同步MOSFET的导通电阻为 $R_{ds,on} = 20\\,\\text{m}\\Omega$，在栅极驱动幅度为 $V_{g} = 1.0\\,\\text{V}$ 时的总栅极电荷为 $Q_{g} = 5\\,\\text{nC}$。\n- 忽略除MOSFET沟道电阻中的导通损耗和与MOSFET栅极充放电相关的栅极驱动开关损耗之外的所有损耗。假设电感是理想的（串联电阻为零），电容是理想的（等效串联电阻为零），死区时间为零，且输出电容开关损耗可忽略不计。\n- 假设工作在连续导通模式，电感电流纹波为三角形。\n\n仅从第一性原理出发，即：(i) 电感电压-电流关系 $v_{L} = L\\,di/dt$，(ii) 稳态下电感的伏秒平衡守恒，(iii) 电阻中功率耗散的定义 $p = i^{2}R$，(iv) 一个区间内均方根（RMS）电流的定义，以及 (v) 每次完整充电事件中为电容性栅极充电所需的能量 $E_{gate} = Q_{g} V_{g}$，执行以下操作：\n\n1. 在所述的理想化条件下，推导占空比 $D$ 和电感电流纹波 $\\Delta I$ 作为 $V_{in}$、$V_{out}$、$L$ 和 $f_{sw}$ 的函数。然后根据给定参数对 $\\Delta I$ 进行数值计算。\n2. 通过在高边和低边导通区间内对其各自的导通电阻积分 $i^{2}(t)$，推导MOSFET导通损耗的表达式。用 $I_{load}$、$\\Delta I$、$R_{ds,on}$ 和 $D$ 表示总导通损耗。然后以瓦特为单位进行数值计算。\n3. 推导两个MOSFET的总栅极驱动开关损耗的表达式，用 $Q_{g}$、$V_{g}$ 和 $f_{sw}$ 表示。然后以瓦特为单位进行数值计算。\n4. 使用第1-3部分的结果，计算总效率 $\\eta$，定义为 $\\eta = P_{out}/(P_{out} + P_{loss})$，其中 $P_{out} = V_{out} I_{load}$，$P_{loss}$ 等于您的导通损耗和栅极驱动开关损耗之和。\n\n将导通损耗和栅极驱动开关损耗以瓦特为单位作为中间结果报告。对于最终答案，将总效率表示为一个无量纲的小数，并四舍五入到三位有效数字。在最终答案中不要使用百分号。",
            "solution": "用户需要对一个片上同步降压稳压器进行详细分析。该过程始于对问题陈述的正式验证。\n\n### 第1步：提取已知条件\n问题提供了以下数据、条件和假设：\n- 输入电压: $V_{in} = 1.2\\,\\text{V}$\n- 输出电压: $V_{out} = 0.8\\,\\text{V}$\n- 电感值: $L = 200\\,\\text{nH}$\n- 开关频率: $f_{sw} = 200\\,\\text{MHz}$\n- 负载电流: $I_{load} = 1.0\\,\\text{A}$\n- MOSFET导通电阻（对于2个相同的开关中的每一个）: $R_{ds,on} = 20\\,\\text{m}\\Omega$\n- MOSFET总栅极电荷: $Q_{g} = 5\\,\\text{nC}$\n- 栅极驱动电压幅度: $V_g = 1.0\\,\\text{V}$\n- 稳压器工作在连续导通模式（CCM）。\n- 电感电流纹波为三角形。\n- 需要考虑的损耗：MOSFET中的导通损耗和栅极驱动开关损耗。\n- 忽略的损耗/理想化条件：理想电感（串联电阻为零），理想电容（等效串联电阻为零），死区时间为零，以及可忽略的输出电容开关损耗。\n- 需要使用的第一性原理：\n    1. 电感电压-电流关系: $v_{L}(t) = L \\frac{di_L(t)}{dt}$\n    2. 稳态下的电感伏秒平衡。\n    3. 电阻功率耗散: $p(t) = i(t)^2 R$\n    4. 均方根（RMS）电流的定义。\n    5. 栅极充电能量: 每次完整充电事件为 $E_{gate} = Q_g V_g$。\n\n### 第2步：使用提取的已知条件进行验证\n根据验证标准对问题陈述进行评估。\n- **科学依据**：该问题基于电力电子学的既定原理，特别是同步降压转换器的工作原理。所有参数和工作原理在集成电路设计领域都是标准的。\n- **良态问题**：问题清晰地分为4个部分。它提供了所有必要的参数（$V_{in}, V_{out}, L, f_{sw}, I_{load}, R_{ds,on}, Q_g, V_g$）和一组明确的简化假设（理想无源器件，要考虑的特定损耗），这使得问题具有确定性并导向唯一的解。\n- **客观性**：语言精确且量化。没有主观或基于意见的陈述。\n- **完整性与一致性**：问题是自洽的。所提供的数据彼此一致。虽然最终得出的效率较低，但这突显了高开关频率转换器中一个现实的设计权衡，并不表示存在矛盾或不可能性。\n- **可行性**：这些参数虽然要求高，但对于现代片上电源管理单元来说是物理上可行的。\n\n### 第3步：结论与行动\n该问题被判定为**有效**。将提供一个完整的、有理有据的解答。\n\n### 解答推导\n\n按照要求，解答分为4个部分进行推导。\n\n**第1部分：占空比和电感电流纹波**\n\n占空比 $D$ 是开关周期 $T_{sw} = 1/f_{sw}$ 中高边MOSFET导通的时间比例。在稳态工作时，电感伏秒平衡原理要求在一个完整开关周期内，电感两端电压的时间积分为零。\n\n在区间 $D T_{sw}$ 内，高边开关闭合，将电感连接到 $V_{in}$。电感电压为 $v_L = V_{in} - V_{out}$。\n在区间 $(1-D) T_{sw}$ 内，低边开关闭合，将电感连接到地。电感电压为 $v_L = 0 - V_{out} = -V_{out}$。\n\n应用伏秒平衡原理：\n$$\n\\int_0^{T_{sw}} v_L(t) dt = 0\n$$\n$$\n(V_{in} - V_{out}) \\cdot (D T_{sw}) + (-V_{out}) \\cdot ((1-D) T_{sw}) = 0\n$$\n除以 $T_{sw}$（非零）：\n$$\n(V_{in} - V_{out})D - V_{out}(1-D) = 0\n$$\n$$\nV_{in}D - V_{out}D - V_{out} + V_{out}D = 0\n$$\n$$\nV_{in}D = V_{out} \\implies D = \\frac{V_{out}}{V_{in}}\n$$\n代入给定值：\n$$\nD = \\frac{0.8\\,\\text{V}}{1.2\\,\\text{V}} = \\frac{2}{3}\n$$\n电感电流纹波 $\\Delta I$ 是一个周期内电感电流的峰峰值变化。使用电感电压-电流关系 $v_L = L \\frac{di_L}{dt}$，对于线性电流变化，这变为 $\\Delta I = \\frac{v_L}{L} \\Delta t$。我们可以在高边开关的导通时间内（$\\Delta t = D T_{sw}$）计算这个值：\n$$\n\\Delta I = \\frac{V_{in} - V_{out}}{L} (D T_{sw}) = \\frac{V_{in} - V_{out}}{L f_{sw}} D\n$$\n代入 $D = V_{out}/V_{in}$：\n$$\n\\Delta I = \\frac{V_{in} - V_{out}}{L f_{sw}} \\frac{V_{out}}{V_{in}} = \\frac{V_{out}(V_{in} - V_{out})}{V_{in} L f_{sw}}\n$$\n或者，使用高边开关的关断时间（$\\Delta t = (1-D)T_{sw}$），电流下降：\n$$\n\\Delta I = \\frac{|-V_{out}|}{L} ((1-D) T_{sw}) = \\frac{V_{out}(1-D)}{L f_{sw}}\n$$\n这种形式通常更方便。现在，我们对 $\\Delta I$ 进行数值计算：\n$$\n\\Delta I = \\frac{0.8\\,\\text{V} \\cdot (1 - 2/3)}{(200 \\times 10^{-9}\\,\\text{H}) \\cdot (200 \\times 10^6\\,\\text{Hz})} = \\frac{0.8 \\cdot (1/3)}{40} = \\frac{0.8}{120}\\,\\text{A} = \\frac{1}{150}\\,\\text{A}\n$$\n\n**第2部分：MOSFET导通损耗**\n\n导通损耗是由于电流流过MOSFET的有限导通电阻 $R_{ds,on}$ 而产生的。总导通损耗 $P_{cond}$ 是高边（HS）和低边（LS）MOSFET中损耗的总和。电阻中的瞬时功率为 $p(t) = i(t)^2 R$。平均功率是 $p(t)$ 在一个周期 $T_{sw}$ 内的时间平均值。\n\n流过高边开关的电流在 $0 \\le t \\le D T_{sw}$ 时为 $i_L(t)$，其他时间为零。高边开关的损耗为：\n$$\nP_{cond,HS} = \\frac{1}{T_{sw}} \\int_0^{D T_{sw}} i_L(t)^2 R_{ds,on} dt\n$$\n流过低边开关的电流在 $D T_{sw} \\le t \\le T_{sw}$ 时为 $i_L(t)$，其他时间为零。低边开关的损耗为：\n$$\nP_{cond,LS} = \\frac{1}{T_{sw}} \\int_{D T_{sw}}^{T_{sw}} i_L(t)^2 R_{ds,on} dt\n$$\n由于MOSFET是相同的（$R_{ds,on}$ 相同），总导通损耗为：\n$$\nP_{cond} = P_{cond,HS} + P_{cond,LS} = \\frac{R_{ds,on}}{T_{sw}} \\left( \\int_0^{D T_{sw}} i_L(t)^2 dt + \\int_{D T_{sw}}^{T_{sw}} i_L(t)^2 dt \\right) = \\frac{R_{ds,on}}{T_{sw}} \\int_0^{T_{sw}} i_L(t)^2 dt\n$$\n项 $\\frac{1}{T_{sw}} \\int_0^{T_{sw}} i_L(t)^2 dt$ 是电感电流均方根值 $I_{L,rms}$ 平方的定义。因此，$P_{cond} = I_{L,rms}^2 R_{ds,on}$。\n\n电感电流 $i_L(t)$ 可以分解为其直流分量（即负载电流 $I_{load}$）和一个交流纹波分量 $i_{ripple}(t)$（其平均值为零）。\n$$\nI_{L,rms}^2 = \\langle (I_{load} + i_{ripple}(t))^2 \\rangle = \\langle I_{load}^2 + 2 I_{load} i_{ripple}(t) + i_{ripple}(t)^2 \\rangle\n$$\n由于 $\\langle i_{ripple}(t) \\rangle = 0$，交叉项 $2 I_{load} \\langle i_{ripple}(t) \\rangle$ 为零。\n$$\nI_{L,rms}^2 = I_{load}^2 + \\langle i_{ripple}(t)^2 \\rangle = I_{load}^2 + I_{ripple,rms}^2\n$$\n对于峰峰值幅度为 $\\Delta I$ 的对称三角波，其幅值（峰值）为 $A_p = \\Delta I / 2$。这种波形的均方根值为 $A_p / \\sqrt{3}$。\n$$\nI_{ripple,rms} = \\frac{\\Delta I / 2}{\\sqrt{3}} = \\frac{\\Delta I}{2\\sqrt{3}} \\implies I_{ripple,rms}^2 = \\frac{(\\Delta I)^2}{12}\n$$\n将此代入 $I_{L,rms}^2$ 的表达式，我们得到总导通损耗：\n$$\nP_{cond} = \\left( I_{load}^2 + \\frac{(\\Delta I)^2}{12} \\right) R_{ds,on}\n$$\n请注意，占空比 $D$ 没有出现在这个最终表达式中，因为总损耗是由在整个周期内流过电感的均方根电流决定的，并且该电流始终流过一个电阻为 $R_{ds,on}$ 的器件（高边或低边开关）。\n\n现在，我们对 $P_{cond}$ 进行数值计算。\n$I_{load} = 1.0\\,\\text{A}$，$\\Delta I = 1/150\\,\\text{A}$，以及 $R_{ds,on} = 20\\,\\text{m}\\Omega = 0.020\\,\\Omega$。\n$$\nP_{cond} = \\left( (1.0)^2 + \\frac{(1/150)^2}{12} \\right) \\cdot (0.020) = \\left( 1 + \\frac{1}{22500 \\cdot 12} \\right) \\cdot 0.020 = \\left( 1 + \\frac{1}{270000} \\right) \\cdot 0.020\n$$\n$$\nP_{cond} = \\left( \\frac{270001}{270000} \\right) \\cdot 0.020 \\approx (1.0000037) \\cdot 0.020 \\approx 0.020000074\\,\\text{W}\n$$\n在这种情况下，纹波电流的贡献可以忽略不计。导通损耗约为 $P_{cond} \\approx I_{load}^2 R_{ds,on} = (1.0)^2 \\cdot 0.020 = 0.020\\,\\text{W}$。这是第一个中间结果。\n\n**第3部分：栅极驱动开关损耗**\n\n栅极驱动开关损耗 $P_{sw}$ 是为MOSFET的栅极电容充放电所消耗的功率。问题指明，一次完整充电事件所需的能量为 $E_{gate} = Q_g V_g$。一个完整的充放电周期会耗散这么多能量。在每个开关周期 $T_{sw}$ 内，两个MOSFET中的每一个都经历一次这样的周期。\n\n单个MOSFET每个周期的能量损耗为 $E_{loss,1,cyc} = Q_g V_g$。\n功率损耗是单位时间的能量，所以我们将每个周期的能量乘以频率 $f_{sw}$：\n$$\nP_{sw,1} = E_{loss,1,cyc} \\cdot f_{sw} = Q_g V_g f_{sw}\n$$\n由于有两个相同的MOSFET（高边和低边），总栅极驱动开关损耗为：\n$$\nP_{sw,total} = 2 \\cdot P_{sw,1} = 2 Q_g V_g f_{sw}\n$$\n现在，我们对 $P_{sw,total}$ 进行数值计算。\n$Q_g = 5\\,\\text{nC} = 5 \\times 10^{-9}\\,\\text{C}$，$V_g = 1.0\\,\\text{V}$，以及 $f_{sw} = 200\\,\\text{MHz} = 200 \\times 10^6\\,\\text{Hz}$。\n$$\nP_{sw,total} = 2 \\cdot (5 \\times 10^{-9}\\,\\text{C}) \\cdot (1.0\\,\\text{V}) \\cdot (200 \\times 10^6\\,\\text{s}^{-1})\n$$\n$$\nP_{sw,total} = 2 \\cdot 5 \\cdot 200 \\cdot 10^{-9} \\cdot 10^6 = 2000 \\times 10^{-3}\\,\\text{W} = 2.0\\,\\text{W}\n$$\n总栅极驱动开关损耗为 $2.0\\,\\text{W}$。这是第二个中间结果。\n\n**第4部分：总效率**\n\n总效率 $\\eta$ 定义为输出功率 $P_{out}$ 与输入功率 $P_{in}$ 的比值。输入功率是输出功率与总功率损耗 $P_{loss}$ 之和。\n$$\n\\eta = \\frac{P_{out}}{P_{in}} = \\frac{P_{out}}{P_{out} + P_{loss}}\n$$\n首先，计算输出功率：\n$$\nP_{out} = V_{out} I_{load} = (0.8\\,\\text{V}) \\cdot (1.0\\,\\text{A}) = 0.8\\,\\text{W}\n$$\n总功率损耗是前面计算的导通损耗和开关损耗之和：\n$$\nP_{loss} = P_{cond} + P_{sw,total} = 0.020000074\\,\\text{W} + 2.0\\,\\text{W} = 2.020000074\\,\\text{W}\n$$\n现在，计算效率：\n$$\n\\eta = \\frac{0.8}{0.8 + 2.020000074} = \\frac{0.8}{2.820000074} \\approx 0.2836879\n$$\n四舍五入到三位有效数字，总效率为：\n$$\n\\eta \\approx 0.284\n$$",
            "answer": "$$\n\\boxed{0.284}\n$$"
        },
        {
            "introduction": "设计了高效的功率级之后，确保稳压器在各种负载条件下都能稳定工作是下一个关键挑战。不稳定的电源会直接导致整个系统的崩溃。本练习将带您进入PMU设计的控制系统层面，运用状态空间平均模型和频域分析等高级控制理论。通过设计一个III型补偿器并验证闭环系统的稳定性，您将掌握保证电源可靠性的核心工程技能。",
            "id": "4286008",
            "problem": "考虑一个工作在连续导通模式下的片上直流-直流（DC-DC）降压转换器，该转换器围绕一个稳态工作点通过平均小信号状态空间形式进行建模，其状态向量为 $x = [i_{L}, v_{C}]^{\\top}$，输入为 $d$（占空比扰动），输出为 $y = v_{o} = v_{C}$。该转换器的电感 $L = 100\\,\\text{nH}$，电容 $C = 50\\,\\text{nF}$，负载电阻 $R = 5\\,\\Omega$。假设输入电压 $V_{\\text{in}} = 1.2\\,\\text{V}$，标称输出电压 $V_{o} = 1.0\\,\\text{V}$，采用一个电阻反馈分压器，其传感因子 $\\alpha = 0.5$，使得检测到的输出为 $\\alpha v_{o}$，以及一个脉冲宽度调制（PWM）比较器，其锯齿波的峰峰值幅度为 $V_{m} = 0.5\\,\\text{V}$，因此 PWM 增益为 $K_{\\text{PWM}} = 1/V_{m}$。该环路采用一个 III 型补偿器，其传递函数为\n$$\nG_{c}(s) = K \\cdot \\frac{\\left(1 + \\frac{s}{z_{1}}\\right)\\left(1 + \\frac{s}{z_{2}}\\right)}{s \\left(1 + \\frac{s}{p_{1}}\\right)\\left(1 + \\frac{s}{p_{2}}\\right)},\n$$\n其中两个补偿器零点放置在 $z_{1} = \\frac{\\omega_{o}}{2}$ 和 $z_{2} = \\omega_{o}$ 处，其中 $\\omega_{o} = \\frac{1}{\\sqrt{L C}}$，两个高频补偿器极点放置在 $p_{1} = 2\\pi \\cdot 100\\,\\text{MHz}$ 和 $p_{2} = 2\\pi \\cdot 500\\,\\text{MHz}$ 处。开关频率为 $f_{\\text{sw}} = 200\\,\\text{MHz}$，PWM 比较器是理想的。\n\n从标准的平均降压转换器状态空间模型出发，并使用线性系统原理，推导从占空比扰动 $d$ 到输出电压 $v_{o}$ 的控制到输出的传递函数 $G_{vd}(s)$，其形式为 $G_{vd}(s) = \\frac{N(s)}{D(s)}$，并构建环路传递函数 $L(s) = \\alpha \\, K_{\\text{PWM}} \\, G_{c}(s) \\, G_{vd}(s)$。使用控制理论中的奈奎斯特稳定性判据作为基本依据，来判断所设计系统的闭环稳定性。假设被控对象和补偿器没有右半平面极点，并通过评估 $L(j \\omega)$ 在增益穿越点的相位来论证其稳定性。\n\n通过强制设定一个目标穿越频率 $f_{t} = 20\\,\\text{MHz}$ 来设计补偿器增益 $K$，并在此过程中采用一个理想化假设，即两个高频补偿器极点不影响穿越点的幅值（即，在 $\\omega = 2 \\pi f_{t}$ 时， $|(1 + j \\omega/p_{1})(1 + j \\omega/p_{2})| \\approx 1$）。然后，使用包含 $p_{1}$ 和 $p_{2}$ 有限值的精确环路传递函数，计算满足 $|L(j 2 \\pi f_{c})| = 1$ 的预测的实际增益穿越频率 $f_{c}$。将你的答案四舍五入到四位有效数字，并以 MHz 为单位表示最终频率。将计算出的预测穿越频率 $f_{c}$（单位 MHz）作为你的最终答案。",
            "solution": "该问题要求在为一个目标穿越频率并基于一个理想化假设设计了补偿器增益之后，确定一个 DC-DC 降压转换器控制环路的实际增益穿越频率。\n\n首先，我们推导降压转换器被控对象的控制到输出的传递函数 $G_{vd}(s)$。对于工作在连续导通模式（CCM）下的降压转换器，其标准小信号平均状态空间模型由下式给出：\n$$\n\\frac{d}{dt}\n\\begin{pmatrix}\n\\hat{i}_{L}(t) \\\\\n\\hat{v}_{C}(t)\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n0 & -1/L \\\\\n1/C & -1/(RC)\n\\end{pmatrix}\n\\begin{pmatrix}\n\\hat{i}_{L}(t) \\\\\n\\hat{v}_{C}(t)\n\\end{pmatrix}\n+\n\\begin{pmatrix}\nV_{\\text{in}}/L \\\\\n0\n\\end{pmatrix}\n\\hat{d}(t)\n$$\n$$\n\\hat{y}(t) = \\hat{v}_{o}(t) =\n\\begin{pmatrix}\n0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\n\\hat{i}_{L}(t) \\\\\n\\hat{v}_{C}(t)\n\\end{pmatrix}\n$$\n其中 $\\hat{i}_{L}$、$\\hat{v}_{C}$ 和 $\\hat{d}$ 是围绕稳态工作点的小信号扰动。传递函数 $G_{vd}(s) = \\hat{v}_{o}(s) / \\hat{d}(s)$ 由 $C_{\\text{out}}(sI - A)^{-1}B$ 给出。\n\n矩阵 $(sI - A)$ 为：\n$$ sI - A = \\begin{pmatrix} s & 1/L \\\\ -1/C & s+1/(RC) \\end{pmatrix} $$\n其逆矩阵是：\n$$ (sI - A)^{-1} = \\frac{1}{s(s+1/(RC)) + 1/(LC)} \\begin{pmatrix} s+1/(RC) & -1/L \\\\ 1/C & s \\end{pmatrix} $$\n分母是特征多项式 $D(s) = s^2 + \\frac{1}{RC}s + \\frac{1}{LC}$。\n于是传递函数为：\n$$ G_{vd}(s) = \\begin{pmatrix} 0 & 1 \\end{pmatrix} \\frac{1}{D(s)} \\begin{pmatrix} s+1/(RC) & -1/L \\\\ 1/C & s \\end{pmatrix} \\begin{pmatrix} V_{\\text{in}}/L \\\\ 0 \\end{pmatrix} = \\frac{1}{D(s)} \\begin{pmatrix} 1/C & s \\end{pmatrix} \\begin{pmatrix} V_{\\text{in}}/L \\\\ 0 \\end{pmatrix} $$\n$$ G_{vd}(s) = \\frac{V_{\\text{in}}/(LC)}{s^2 + \\frac{1}{RC}s + \\frac{1}{LC}} $$\n该传递函数有一个直流增益 $V_{\\text{in}}$ 和一对位于谐振频率 $\\omega_{o} = 1/\\sqrt{LC}$ 处的复数极点。\n\n给定的参数如下：\n电感 $L = 100 \\times 10^{-9}\\,\\text{H}$\n电容 $C = 50 \\times 10^{-9}\\,\\text{F}$\n负载电阻 $R = 5\\,\\Omega$\n输入电压 $V_{\\text{in}} = 1.2\\,\\text{V}$\n\n我们可以计算被控对象的特征参数：\n谐振频率 $\\omega_{o}$：\n$$ \\omega_{o} = \\frac{1}{\\sqrt{LC}} = \\frac{1}{\\sqrt{(100 \\times 10^{-9})(50 \\times 10^{-9})}} = \\frac{1}{\\sqrt{5 \\times 10^{-15}}} = \\frac{10^{8}}{\\sqrt{50}} \\approx 1.4142 \\times 10^7\\,\\text{rad/s} $$\n阻尼项为 $\\frac{1}{RC} = \\frac{1}{5 \\cdot (50 \\times 10^{-9})} = 4 \\times 10^6\\,\\text{s}^{-1}$。\n品质因数为 $Q = \\omega_{o}RC = (1.4142 \\times 10^7)(5)(50 \\times 10^{-9}) \\approx 3.5355$。\n\n完整的环路传递函数是 $L(s) = \\alpha \\, K_{\\text{PWM}} \\, G_{c}(s) \\, G_{vd}(s)$。\n环路的参数如下：\n反馈因子 $\\alpha = 0.5$\nPWM 增益 $K_{\\text{PWM}} = 1/V_{m} = 1/0.5 = 2$\n因此，乘积 $\\alpha K_{\\text{PWM}} = 0.5 \\times 2 = 1$。\n\n补偿器 $G_{c}(s)$ 由下式给出：\n$$ G_{c}(s) = K \\cdot \\frac{\\left(1 + \\frac{s}{z_{1}}\\right)\\left(1 + \\frac{s}{z_{2}}\\right)}{s \\left(1 + \\frac{s}{p_{1}}\\right)\\left(1 + \\frac{s}{p_{2}}\\right)} $$\n补偿器零点放置在 $z_{1} = \\omega_{o}/2 \\approx 7.071 \\times 10^6\\,\\text{rad/s}$ 和 $z_{2} = \\omega_{o} \\approx 1.4142 \\times 10^7\\,\\text{rad/s}$ 处。\n补偿器极点位于 $p_{1} = 2\\pi \\cdot 100 \\times 10^6 \\approx 6.283 \\times 10^8\\,\\text{rad/s}$ 和 $p_{2} = 2\\pi \\cdot 500 \\times 10^6 \\approx 3.142 \\times 10^9\\,\\text{rad/s}$ 处。\n\n完整的环路传递函数是：\n$$ L(s) = K \\cdot \\frac{\\left(1 + \\frac{s}{z_{1}}\\right)\\left(1 + \\frac{s}{z_{2}}\\right)}{s \\left(1 + \\frac{s}{p_{1}}\\right)\\left(1 + \\frac{s}{p_{2}}\\right)} \\cdot \\frac{V_{\\text{in}} \\omega_{o}^2}{s^2 + \\frac{1}{RC}s + \\omega_{o}^2} $$\n下一步是确定补偿器增益 $K$ 以实现目标穿越频率 $f_{t} = 20\\,\\text{MHz}$，其对应的角频率为 $\\omega_{t} = 2\\pi f_{t} = 4\\pi \\times 10^7 \\approx 1.257 \\times 10^8\\,\\text{rad/s}$。在这个频率下，由于它远高于 $\\omega_o$、$z_1$ 和 $z_2$，我们可以对幅值响应做几个近似：\n$|1 + j\\omega_{t}/z_{1}| \\approx \\omega_{t}/z_{1}$\n$|1 + j\\omega_{t}/z_{2}| \\approx \\omega_{t}/z_{2}$\n$| (j\\omega_{t})^2 + \\frac{1}{RC}(j\\omega_{t}) + \\omega_{o}^2 | \\approx |(j\\omega_{t})^2| = \\omega_{t}^2$\n题目指定最初忽略高频补偿器极点，即 $|1+j\\omega_t/p_1| \\approx 1$ 和 $|1+j\\omega_t/p_2| \\approx 1$。\n\n在 $\\omega_t$ 处的环路增益幅值被设为 $1$：\n$$ |L(j\\omega_{t})| \\approx \\left| K \\frac{(\\omega_{t}/z_{1})(\\omega_{t}/z_{2})}{j\\omega_{t} \\cdot 1 \\cdot 1} \\frac{V_{\\text{in}}\\omega_{o}^2}{\\omega_{t}^2} \\right| = K \\frac{\\omega_{t}^2/(z_{1}z_{2})}{\\omega_{t}} \\frac{V_{\\text{in}}\\omega_{o}^2}{\\omega_{t}^2} = K \\frac{V_{\\text{in}} \\omega_{o}^2}{\\omega_{t} z_{1} z_{2}} = 1$$\n代入 $z_{1}z_{2} = (\\omega_{o}/2)\\omega_{o} = \\omega_{o}^2/2$：\n$$ K \\frac{V_{\\text{in}} \\omega_{o}^2}{\\omega_{t} (\\omega_{o}^2/2)} = \\frac{2 K V_{\\text{in}}}{\\omega_{t}} = 1 $$\n求解 $K$：\n$$ K = \\frac{\\omega_{t}}{2 V_{\\text{in}}} = \\frac{4\\pi \\times 10^7}{2 \\cdot 1.2} = \\frac{4\\pi \\times 10^7}{2.4} = \\frac{5\\pi}{3} \\times 10^7 \\approx 5.236 \\times 10^7 $$\n现在，我们用这个 $K$ 值，通过使用完整的环路增益表达式求解 $|L(j\\omega_c)|=1$ 来找到实际的穿越频率 $\\omega_{c} = 2\\pi f_{c}$。对于零点和被控对象极点的高频近似仍然有效，因为我们预期 $f_c$ 会接近 $f_t$。但是，我们现在要包含补偿器极点 $p_1$ 和 $p_2$ 的影响。\n幅值表达式变为：\n$$ |L(j\\omega_{c})| \\approx \\frac{2 K V_{\\text{in}}}{\\omega_{c} \\left|1 + \\frac{j\\omega_{c}}{p_{1}}\\right| \\left|1 + \\frac{j\\omega_{c}}{p_{2}}\\right|} = 1 $$\n$$ \\frac{2 K V_{\\text{in}}}{\\omega_{c} \\sqrt{1 + (\\omega_{c}/p_{1})^2} \\sqrt{1 + (\\omega_{c}/p_{2})^2}} = 1 $$\n将 $K = \\omega_{t}/(2V_{\\text{in}})$ 代入此方程：\n$$ \\frac{2 (\\omega_{t}/(2V_{\\text{in}})) V_{\\text{in}}}{\\omega_{c} \\sqrt{1 + (\\omega_{c}/p_{1})^2} \\sqrt{1 + (\\omega_{c}/p_{2})^2}} = \\frac{\\omega_{t}}{\\omega_{c} \\sqrt{1 + (\\omega_{c}/p_{1})^2} \\sqrt{1 + (\\omega_{c}/p_{2})^2}} = 1 $$\n这就得到了关于 $\\omega_{c}$ 的方程：\n$$ \\omega_{c} \\sqrt{1 + (\\omega_{c}/p_{1})^2} \\sqrt{1 + (\\omega_{c}/p_{2})^2} = \\omega_{t} $$\n我们可以用频率 $f$（单位 MHz）来表示。设 $f_c$ 的单位是 MHz。\n$f_{t} = 20\\,\\text{MHz}$。\n$f_{p1} = p_1/(2\\pi) = 100\\,\\text{MHz}$。\n$f_{p2} = p_2/(2\\pi) = 500\\,\\text{MHz}$。\n方程变为：\n$$ f_{c} \\sqrt{1 + \\left(\\frac{f_{c}}{100}\\right)^2} \\sqrt{1 + \\left(\\frac{f_{c}}{500}\\right)^2} = 20 $$\n这是一个关于 $f_{c}$ 的非线性方程。我们可以迭代求解它。由于平方根项大于 1，我们知道 $f_c$ 必须小于 $20\\,\\text{MHz}$。\n作为第一次猜测，我们使用忽略极点的近似结果：$f_c \\approx 20\\,\\text{MHz}$。\n迭代 1：\n$$ f_{c} \\approx \\frac{20}{\\sqrt{1+(20/100)^2}\\sqrt{1+(20/500)^2}} = \\frac{20}{\\sqrt{1.04}\\sqrt{1.0016}} \\approx \\frac{20}{1.0198 \\cdot 1.0008} \\approx 19.596\\,\\text{MHz} $$\n使用 $f_c \\approx 19.6\\,\\text{MHz}$ 进行迭代 2：\n$$ 19.6 \\sqrt{1 + \\left(\\frac{19.6}{100}\\right)^2} \\sqrt{1 + \\left(\\frac{19.6}{500}\\right)^2} = 19.6 \\sqrt{1.038416} \\sqrt{1.00153664} \\approx 19.6 \\cdot 1.019027 \\cdot 1.000768 \\approx 19.993 $$\n结果非常接近 $20$。通过使用数值求解器或精化迭代，我们发现 $f_c \\approx 19.607\\,\\text{MHz}$。例如，检验 $f_c = 19.607\\,\\text{MHz}$：\n$$ 19.607 \\sqrt{1 + \\left(\\frac{19.607}{100}\\right)^2} \\sqrt{1 + \\left(\\frac{19.607}{500}\\right)^2} \\approx 19.607 \\times 1.01904 \\times 1.00077 \\approx 19.9999 $$\n这是一个高度精确的结果。\n\n题目要求进行稳定性论证。在穿越频率 $\\omega_c = 2\\pi f_c \\approx 1.232 \\times 10^8$ rad/s 处，环路增益的相位是：\n$$ \\arg(L(j\\omega_c)) \\approx \\arg(1+j\\omega_c/z_1) + \\arg(1+j\\omega_c/z_2) - 90^\\circ - \\arg(1+j\\omega_c/p_1) - \\arg(1+j\\omega_c/p_2) + \\arg(G_{vd}(j\\omega_c)) $$\n由于 $\\omega_c \\gg \\omega_o$, $\\arg(G_{vd}(j\\omega_c)) \\approx -180^\\circ$.\n$$ \\arg(L(j\\omega_c)) \\approx \\arctan(\\omega_c/z_1) + \\arctan(\\omega_c/z_2) - 90^\\circ - \\arctan(\\omega_c/p_1) - \\arctan(\\omega_c/p_2) - 180^\\circ $$\n代入数值：$\\omega_c/z_1 \\approx 17.42$，$\\omega_c/z_2 \\approx 8.71$，$\\omega_c/p_1 \\approx 0.196$，$\\omega_c/p_2 \\approx 0.039$。\n相位大约是 $86.7^\\circ + 83.4^\\circ - 90^\\circ - 11.1^\\circ - 2.2^\\circ - 180^\\circ \\approx -113.2^\\circ$。\n由于在增益穿越频率处的相位是 $-113.2^\\circ$，它大于 $-180^\\circ$，所以相位裕度为 $180^\\circ - 113.2^\\circ = 66.8^\\circ$。对于这个最小相位系统，根据奈奎斯特判据，正的相位裕度意味着闭环系统是稳定的。\n\n最后的任务是提供预测的实际增益穿越频率 $f_c$，并四舍五入到四位有效数字。\n$f_{c} \\approx 19.607\\,\\text{MHz}$。\n四舍五入到四位有效数字得到 $19.61\\,\\text{MHz}$。",
            "answer": "$$\\boxed{19.61}$$"
        },
        {
            "introduction": "即使拥有一个完美的稳压器，也不能保证逻辑门电路端的供电电压绝对稳定，因为连接它们的电源分配网络（PDN）本身存在阻抗。本练习将理论与实际相连接，分析电流流过PDN时产生的静态和动态电压降。通过本练习，您将学会计算“目标阻抗”，这是指导整个供电系统（包括稳压器、去耦电容和封装）设计的关键指标。",
            "id": "4285956",
            "problem": "在一个由片上电源管理单元 (PMU) 供电的先进集成电路中，其电源分配网络 (PDN) 的一个局部区段呈现出 $R=100\\,\\mathrm{m\\Omega}$ 的电阻。在稳态条件下，一个逻辑模块通过该区段吸取 $I_{\\text{DC}}=300\\,\\mathrm{mA}$ 的直流电流。在由高频开关活动主导的高活动事件期间，该模块经历一个幅值为 $\\Delta I=400\\,\\mathrm{mA}$ 的电流阶跃增长。负载点电源的标称值为 $V_{\\text{DD}}=1.0\\,\\mathrm{V}$。在负载端，直流和交流的总压降预算被限制为 $V_{\\text{DD}}$ 的 $f=0.05$。\n\n从用于静态情况的欧姆定律和用于小信号动态学的线性时不变网络理论出发，首先确定由 $I_{\\text{DC}}$ 在该电阻区段上引起的静态电压降。然后，将剩余的压降预算视为可用于阶跃电流 $\\Delta I$ 引起的动态偏差，推导出小信号PDN阻抗的最大允许幅值（称为目标阻抗），以确保动态偏差不超过剩余的压降预算。\n\n以毫欧为单位表示最终的目标阻抗，并将您的答案四舍五入到四位有效数字。",
            "solution": "电阻元件上的静态电压降直接遵循欧姆定律，即对于通过电阻 $R$ 的电流 $i$，电压降为 $v=iR$。在给定的稳态电流 $I_{\\text{DC}}$ 下，该网络区段上的静态压降为\n$$\nV_{\\text{DC}} \\;=\\; I_{\\text{DC}}\\,R \\;=\\; \\left(300\\times 10^{-3}\\right)\\,\\mathrm{A}\\times \\left(100\\times 10^{-3}\\right)\\,\\mathrm{\\Omega} \\;=\\; 0.03\\,\\mathrm{V}.\n$$\n负载端允许的总瞬时偏差被指定为标称电源 $V_{\\text{DD}}$ 的一部分 $f$，即\n$$\nV_{\\text{allow}} \\;=\\; f\\,V_{\\text{DD}} \\;=\\; 0.05\\times 1.0\\,\\mathrm{V} \\;=\\; 0.05\\,\\mathrm{V}.\n$$\n静态压降 $V_{\\text{DC}}$ 消耗了此预算的一部分，剩下用于小信号偏差的动态预算为\n$$\nV_{\\text{dyn}} \\;=\\; V_{\\text{allow}} - V_{\\text{DC}} \\;=\\; 0.05\\,\\mathrm{V} - 0.03\\,\\mathrm{V} \\;=\\; 0.02\\,\\mathrm{V}.\n$$\n为了在动态情况下将电流扰动与电压偏差联系起来，我们将PDN在工作点附近建模为一个线性时不变网络。对于负载端的小信号电流扰动 $\\Delta i(t)$ 和小信号电压响应 $\\Delta v(t)$，其频域关系为\n$$\n\\Delta V(\\omega) \\;=\\; Z_{\\text{PDN}}(\\omega)\\,\\Delta I(\\omega),\n$$\n其中 $Z_{\\text{PDN}}(\\omega)$ 是在负载端看到的复阻抗。一个用于限制电流阶跃整个频谱范围内的最坏情况压降的保守设计要求是，确保阻抗的幅值不超过允许的电压偏差与电流阶跃幅值之比。这得出了目标阻抗准则\n$$\n|Z_{\\text{PDN}}(\\omega)| \\;\\le\\; Z_{\\text{target}} \\;=\\; \\frac{V_{\\text{dyn}}}{\\Delta I}.\n$$\n代入给定的 $\\Delta I=400\\times 10^{-3}\\,\\mathrm{A}$ 和计算出的 $V_{\\text{dyn}}=0.02\\,\\mathrm{V}$，\n$$\nZ_{\\text{target}} \\;=\\; \\frac{0.02\\,\\mathrm{V}}{0.4\\,\\mathrm{A}} \\;=\\; 0.05\\,\\mathrm{\\Omega} \\;=\\; 50\\,\\mathrm{m\\Omega}.\n$$\n按要求四舍五入到四位有效数字并以毫欧表示，目标阻抗为 $50.00\\,\\mathrm{m\\Omega}$。",
            "answer": "$$\\boxed{50.00}$$"
        }
    ]
}
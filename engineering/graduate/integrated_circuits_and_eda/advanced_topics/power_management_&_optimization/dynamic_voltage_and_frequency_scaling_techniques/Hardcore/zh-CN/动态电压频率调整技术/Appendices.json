{
    "hands_on_practices": [
        {
            "introduction": "为什么在固定时间内完成固定工作量时，以恒定的低速运行比“高速运行后空闲”更节能？本练习将引导您通过凸优化的方法，从数学上证明这一结论，揭示动态电压频率缩放（DVFS）技术有效性的根本原因。掌握这一推导过程将帮助您深刻理解能量与性能之间的权衡关系。",
            "id": "4268142",
            "problem": "考虑一个以互补金属氧化物半导体（CMOS）实现的数字核心，通过动态电压和频率缩放（DVFS）进行控制，这在电子设计自动化（EDA）流程中被广泛使用。假设动态（开关）功率由 $P_{\\mathrm{dyn}}=\\alpha_{\\mathrm{sw}}\\,C\\,V^{2}\\,f$ 给出，其中 $\\alpha_{\\mathrm{sw}}$ 是开关活动因子，$C$ 是有效开关电容，$V$ 是电源电压，$f$ 是时钟频率。进一步假设一个标准的电压-频率关系为 $f=k\\,(V-V_{T})^{m}$（当 $V>V_{T}$ 时），其中 $V_{T}$ 是有效阈值电压，$k>0$ 是一个与技术相关的常数，$m>0$ 是一个经验观察到的指数，用于参数化延迟如何随高于阈值的电源电压而变化。忽略漏电和短路功率。\n\n在一个固定的时间范围 $T>0$ 内，系统必须完成一个以所需时钟周期数衡量的固定工作量 $W>0$，这施加了约束 $\\int_{0}^{T}f\\!\\left(t\\right)\\,dt=W$。DVFS 随时间设置 $V\\!\\left(t\\right)$，从而设置 $f\\!\\left(t\\right)$，其能量为 $E=\\int_{0}^{T}P_{\\mathrm{dyn}}\\!\\left(t\\right)\\,dt$。假设可行性，即存在 $V\\!\\left(t\\right)\\geq V_{T}$，使得约束可以在 $[0,T]$ 上被满足。\n\n仅从上述定义出发，推导在固定工作量、固定时间范围约束下使能量最小化的最优静态工作点。具体来说：\n- 证明在给定的 $f$–$V$ 关系下，作为 $f$ 的函数的能量速率函数对于 $f\\geq 0$ 是凸的。\n- 利用此凸性论证最优调度是时不变的（即 $f\\!\\left(t\\right)$ 在 $[0,T]$ 上是常数）。\n- 以 $\\alpha_{\\mathrm{sw}}$、$C$、$k$、$V_{T}$、$m$、$W$ 和 $T$ 的解析表达式形式，计算出最终的最优恒定频率 $f^{*}$ 和相应的最优恒定电压 $V^{*}$。\n\n将你的最终答案表示为解析形式的数对 $\\left(f^{*},V^{*}\\right)$。不需要进行数值四舍五入，最终的数对中也无需提供单位。",
            "solution": "问题是找到最优的静态工作点，其特征是恒定的频率 $f^{*}$ 和恒定的电压 $V^{*}$，该工作点可以在固定的时间范围 $T$ 内完成固定的工作量 $W$ 所需的总能量 $E$ 最小化。解答过程按提示分三步进行：首先，我们确立功率-频率关系的凸性；其次，我们利用这个凸性来证明恒定频率调度是最优的；第三，我们计算最优频率和电压的具体值。\n\n首先，我们必须将动态功率 $P_{\\mathrm{dyn}}$ 表示为频率 $f$ 的函数。给定的关系是：\n$P_{\\mathrm{dyn}} = \\alpha_{\\mathrm{sw}}\\,C\\,V^{2}\\,f$\n$f = k\\,(V-V_{T})^{m}$ for $V > V_{T}$\n\n从第二个方程，我们求解电压 $V$ 作为频率 $f$ 的函数。由于 $f > 0$（因为 $V > V_T$）且 $k>0$，我们可以写出：\n$\\frac{f}{k} = (V-V_{T})^{m}$\n$\\left(\\frac{f}{k}\\right)^{\\frac{1}{m}} = V-V_{T}$\n$V(f) = V_{T} + \\left(\\frac{f}{k}\\right)^{\\frac{1}{m}}$\n\n将这个 $V(f)$ 的表达式代入动态功率方程，得到 $P_{\\mathrm{dyn}}$ 作为 $f$ 的函数：\n$P_{\\mathrm{dyn}}(f) = \\alpha_{\\mathrm{sw}}\\,C\\,f\\,\\left(V_{T} + \\left(\\frac{f}{k}\\right)^{\\frac{1}{m}}\\right)^{2}$\n\n为了证明 $P_{\\mathrm{dyn}}(f)$ 对于 $f \\ge 0$ 是一个凸函数，我们必须证明它的二阶导数 $\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}}$ 对于 $f \\ge 0$ 是非负的。让我们展开 $P_{\\mathrm{dyn}}(f)$ 的表达式：\n$P_{\\mathrm{dyn}}(f) = \\alpha_{\\mathrm{sw}}\\,C\\,f\\,\\left(V_{T}^{2} + 2\\,V_{T}\\left(\\frac{f}{k}\\right)^{\\frac{1}{m}} + \\left(\\frac{f}{k}\\right)^{\\frac{2}{m}}\\right)$\n$P_{\\mathrm{dyn}}(f) = \\alpha_{\\mathrm{sw}}\\,C\\,\\left(V_{T}^{2}\\,f + 2\\,V_{T}\\,k^{-\\frac{1}{m}}\\,f^{1+\\frac{1}{m}} + k^{-\\frac{2}{m}}\\,f^{1+\\frac{2}{m}}\\right)$\n\n现在，我们计算关于 $f$ 的一阶导数：\n$\\frac{dP_{\\mathrm{dyn}}}{df} = \\alpha_{\\mathrm{sw}}\\,C\\,\\left(V_{T}^{2} + 2\\,V_{T}\\,k^{-\\frac{1}{m}}\\left(1+\\frac{1}{m}\\right)f^{\\frac{1}{m}} + k^{-\\frac{2}{m}}\\left(1+\\frac{2}{m}\\right)f^{\\frac{2}{m}}\\right)$\n\n接下来，我们计算二阶导数：\n$\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}} = \\alpha_{\\mathrm{sw}}\\,C\\,\\left(0 + 2\\,V_{T}\\,k^{-\\frac{1}{m}}\\left(1+\\frac{1}{m}\\right)\\left(\\frac{1}{m}\\right)f^{\\frac{1}{m}-1} + k^{-\\frac{2}{m}}\\left(1+\\frac{2}{m}\\right)\\left(\\frac{2}{m}\\right)f^{\\frac{2}{m}-1}\\right)$\n$\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}} = \\alpha_{\\mathrm{sw}}\\,C\\,\\left( \\frac{2\\,V_{T}}{m\\,k^{\\frac{1}{m}}}\\left(1+\\frac{1}{m}\\right)f^{\\frac{1-m}{m}} + \\frac{2}{m\\,k^{\\frac{2}{m}}}\\left(1+\\frac{2}{m}\\right)f^{\\frac{2-m}{m}} \\right)$\n\n我们分析当 $f>0$ 时这个表达式的符号。问题陈述中指出 $\\alpha_{\\mathrm{sw}}>0$，$C>0$，$k>0$，$m>0$，且 $V_{T}$ 是阈值电压，对于物理CMOS器件，该值为正（$V_{T}>0$）。因此，和式中两项的每个因子都是正的：$\\alpha_{\\mathrm{sw}}$、$C$、$2$、$m$、$k$、$V_{T}$、$(1+\\frac{1}{m})$、$(1+\\frac{2}{m})$。由于 $f>0$，项 $f^{\\frac{1-m}{m}}$ 和 $f^{\\frac{2-m}{m}}$ 也都是正的。因此，对于 $f > 0$，$\\frac{d^{2}P_{\\mathrm{dyn}}}{df^{2}}$ 的整个表达式是正的。这证明了 $P_{\\mathrm{dyn}}(f)$ 对于 $f>0$ 是一个严格凸函数。由于该函数及其导数在 $f=0$ 处连续，因此它对于 $f \\ge 0$ 是凸的。\n\n第二，我们利用这个凸性来证明最优调度是时不变的。总能量是 $E = \\int_{0}^{T}P_{\\mathrm{dyn}}(f(t))\\,dt$，约束是 $\\int_{0}^{T}f(t)\\,dt=W$。我们希望在这个约束下最小化 $E$。\n让我们定义在时间范围 $T$ 内的平均频率为 $\\bar{f} = \\frac{1}{T}\\int_{0}^{T}f(t)\\,dt$。根据约束，我们有 $\\bar{f} = \\frac{W}{T}$。\n由于 $P_{\\mathrm{dyn}}(f)$ 是一个凸函数，我们可以应用积分形式的 Jensen 不等式，该不等式指出，对于一个凸函数 $\\phi$ 和在 $[a, b]$ 上的可积函数 $g(t)$：\n$\\phi\\left(\\frac{1}{b-a}\\int_{a}^{b}g(t)\\,dt\\right) \\le \\frac{1}{b-a}\\int_{a}^{b}\\phi(g(t))\\,dt$\n将此应用于我们的问题，其中 $\\phi=P_{\\mathrm{dyn}}$，$g(t)=f(t)$，区间为 $[0, T]$：\n$P_{\\mathrm{dyn}}\\left(\\frac{1}{T}\\int_{0}^{T}f(t)\\,dt\\right) \\le \\frac{1}{T}\\int_{0}^{T}P_{\\mathrm{dyn}}(f(t))\\,dt$\n代入 $\\bar{f} = \\frac{W}{T}$ 和 $E = \\int_{0}^{T}P_{\\mathrm{dyn}}(f(t))\\,dt$：\n$P_{\\mathrm{dyn}}\\left(\\frac{W}{T}\\right) \\le \\frac{E}{T}$\n这可以被重新整理，得到能量的一个下界：\n$E \\ge T \\cdot P_{\\mathrm{dyn}}\\left(\\frac{W}{T}\\right)$\n右边的项 $T \\cdot P_{\\mathrm{dyn}}(\\frac{W}{T})$ 代表如果频率保持在平均值 $\\frac{W}{T}$ 不变时所消耗的能量。该不等式表明，任何时变的频率曲线 $f(t)$ 所导致的能耗都将大于或等于这种恒定频率情况下的能耗。当 Jensen 不等式中的等号成立时，达到最小能量，这当且仅当对于所有 $t \\in [0, T]$，$f(t)$ 是一个常数时发生。因此，最优的频率调度是一个恒定的频率。\n\n第三，我们计算最优恒定频率 $f^{*}$ 及其对应的电压 $V^{*}$。根据上述推理，最优策略是维持一个恒定的频率 $f(t) = f^{*}$ 以满足工作量约束。\n$\\int_{0}^{T} f^{*} \\,dt = f^{*} \\int_{0}^{T} dt = f^{*} T = W$\n求解 $f^{*}$ 得到：\n$f^{*} = \\frac{W}{T}$\n\n这就是最优的恒定频率。为了找到相应的最优恒定电压 $V^{*}$，我们使用在 $f=f^{*}$ 处求值的电压-频率关系 $V(f) = V_{T} + (f/k)^{1/m}$：\n$V^{*} = V_{T} + \\left(\\frac{f^{*}}{k}\\right)^{\\frac{1}{m}}$\n代入 $f^{*}$ 的表达式：\n$V^{*} = V_{T} + \\left(\\frac{W/T}{k}\\right)^{\\frac{1}{m}} = V_{T} + \\left(\\frac{W}{kT}\\right)^{\\frac{1}{m}}$\n\n最终得到的最优静态工作点是数对 $(f^{*}, V^{*})$。条件 $V^{*} > V_{T}$ 是满足的，因为 $W, k, T, m$ 都是正数，使得第二项为正。这与可行性假设是一致的。\n最终的解析表达式是：\n$f^{*} = \\frac{W}{T}$\n$V^{*} = V_{T} + \\left(\\frac{W}{kT}\\right)^{\\frac{1}{m}}$",
            "answer": "$$\\boxed{f^{*} = \\frac{W}{T}, \\quad V^{*} = V_{T} + \\left(\\frac{W}{kT}\\right)^{\\frac{1}{m}}}$$"
        },
        {
            "introduction": "在掌握了最佳步调的基本原理后，我们现在将其应用于一个常见的实际场景：一个需要处理多个具有严格截止期限的周期性任务的处理器。此练习要求您将 DVFS 技术与最早截止期限优先（EDF）调度算法相结合，找到一个既能保证所有任务按时完成又能实现能耗最小化的最优恒定工作频率。这个练习展示了电路级的功耗管理技术如何受到系统级软件约束的制约。",
            "id": "4268109",
            "problem": "一个集成在电子设计自动化（EDA）流程中的单核互补金属氧化物半导体（CMOS）处理器支持动态电压频率调整（DVFS）。其动态功耗由广泛使用的关系式 $P(t) = C_{\\mathrm{eff}} V(t)^{2} f(t)$ 建模，其中 $C_{\\mathrm{eff}}$ 是有效开关电容，$V(t)$ 是电源电压，$f(t)$ 是时钟频率。在感兴趣的工作范围内，假设频率-电压关系近似为线性关系 $V(t) = \\beta f(t)$，其中 $f(t)$ 的单位为周期/秒，$\\beta$ 是一个常数。\n\n该处理器执行三个同步周期性任务，这些任务在时间 $t=0$ 时释放，并根据最早截止时间优先（EDF）算法进行调度。每个任务 $i$ 都有一个周期 $P_{i}$，一个等于其周期的相对截止时间，以及每个作业的最坏情况执行需求为 $E_{i}$ 个周期：\n- 任务 1：$P_{1} = 10\\,\\mathrm{ms}$，$E_{1} = 2.5 \\times 10^{6}$ 个周期。\n- 任务 2：$P_{2} = 15\\,\\mathrm{ms}$，$E_{2} = 3.0 \\times 10^{6}$ 个周期。\n- 任务 3：$P_{3} = 20\\,\\mathrm{ms}$，$E_{3} = 3.5 \\times 10^{6}$ 个周期。\n\n假设：\n- 处理器可以无开销地连续改变 $f(t)$，最高可达 $f_{\\max} = 1.0 \\times 10^{9}$ 周期/秒。\n- 泄漏功耗和短路功耗可忽略不计；只考虑动态功耗。\n- 有效开关电容为 $C_{\\mathrm{eff}} = 1.0 \\times 10^{-9}\\,\\mathrm{F}$，电压-频率系数为 $\\beta = 2.0 \\times 10^{-9}\\,\\mathrm{V \\cdot s}$。\n\n在一个超周期（三个周期的最小公倍数）内，确定能在满足所有截止时间要求的同时最小化总动态能耗的DVFS调度策略，并计算该超周期内消耗的最小动态能耗。将最终能量以 $\\mathrm{mJ}$ 表示，并将答案四舍五入到四位有效数字。最终答案必须是一个实数值。",
            "solution": "用户希望使用动态电压频率调整（DVFS）技术，找到一个单核处理器在一个超周期内执行三个周期性任务所消耗的最小动态能耗。\n\n**步骤1：问题验证**\n\n第一步是验证问题陈述的有效性。\n\n*   **提取已知条件**：\n    *   动态功耗模型：$P(t) = C_{\\mathrm{eff}} V(t)^{2} f(t)$\n    *   电压-频率关系：$V(t) = \\beta f(t)$\n    *   调度策略：最早截止时间优先（EDF）\n    *   任务在 $t=0$ 时释放，截止时间等于周期（$D_i = P_i$）\n    *   任务 1：$P_{1} = 10\\,\\mathrm{ms}$，$E_{1} = 2.5 \\times 10^{6}$ 个周期\n    *   任务 2：$P_{2} = 15\\,\\mathrm{ms}$，$E_{2} = 3.0 \\times 10^{6}$ 个周期\n    *   任务 3：$P_{3} = 20\\,\\mathrm{ms}$，$E_{3} = 3.5 \\times 10^{6}$ 个周期\n    *   最大频率：$f_{\\max} = 1.0 \\times 10^{9}$ 周期/秒\n    *   常量：$C_{\\mathrm{eff}} = 1.0 \\times 10^{-9}\\,\\mathrm{F}$，$\\beta = 2.0 \\times 10^{-9}\\,\\mathrm{V \\cdot s}$\n    *   假设：泄漏功耗可忽略不计，频率可以无开销地连续改变。\n    *   目标：找到能耗最小的DVFS调度策略以及在一个超周期内消耗的最小动态能耗，以 $\\mathrm{mJ}$ 为单位表示，并四舍五入到四位有效数字。\n\n*   **有效性检查**：\n    *   **科学依据**：功耗模型 $P \\propto V^2 f$ 是CMOS电路动态功耗的标准方程。线性电压-频率近似 $V \\propto f$ 是对超阈值工作区的一个常见且有效的简化。任务模型和EDF调度是实时系统理论中的基本概念。该问题具有科学合理性。\n    *   **良构性**：问题定义了明确的目标函数（最小化总能耗）和一组约束条件（任务截止时间）。我们必须检查可调度性。在给定频率 $f$ 下，处理器的总利用率是 $U(f) = \\sum_{i} \\frac{E_i/f}{P_i}$。为了使任务集在EDF下可调度，我们需要 $U(f) \\le 1$。满足此条件的所需最小频率是 $f_{\\text{req}} = \\sum_{i} \\frac{E_i}{P_i}$。\n    $f_{\\text{req}} = \\frac{2.5 \\times 10^{6}}{10 \\times 10^{-3}} + \\frac{3.0 \\times 10^{6}}{15 \\times 10^{-3}} + \\frac{3.5 \\times 10^{6}}{20 \\times 10^{-3}} = (2.5 \\times 10^{8} + 2.0 \\times 10^{8} + 1.75 \\times 10^{8})\\,\\text{周期/秒} = 6.25 \\times 10^{8}\\,\\text{周期/秒}$。\n    由于 $f_{\\text{req}}  f_{\\max}$（$6.25 \\times 10^{8}  1.0 \\times 10^{9}$），所以任务集是可调度的。该问题是良构且自洽的。\n    *   **客观性**：问题使用了精确的数学模型和数值数据进行陈述，没有主观性断言。\n\n*   **结论**：问题有效。\n\n**步骤2：求解**\n\n目标是在确保所有截止时间都得到满足的前提下，最小化在任务超周期内消耗的总动态能耗 $E_{\\text{total}}$。\n\n首先，我们将动态功耗 $P(t)$ 完全用频率 $f(t)$ 表示。\n给定 $P(t) = C_{\\mathrm{eff}} V(t)^{2} f(t)$ 和 $V(t) = \\beta f(t)$，我们将第二个方程代入第一个方程：\n$$P(t) = C_{\\mathrm{eff}} (\\beta f(t))^{2} f(t) = C_{\\mathrm{eff}} \\beta^{2} f(t)^{3}$$\n在时间间隔 $[0, T]$ 内的总能耗是功耗的积分：\n$$E_{\\text{total}} = \\int_{0}^{T} P(t) dt = \\int_{0}^{T} C_{\\mathrm{eff}} \\beta^{2} f(t)^{3} dt$$\n在时间 $\\Delta t$ 内以恒定频率 $f$ 执行 $N$ 个周期的工作负载，我们有 $N = f \\Delta t$，或者 $\\Delta t = N/f$。消耗的能量为：\n$$E = P \\cdot \\Delta t = (C_{\\mathrm{eff}} \\beta^{2} f^{3}) \\left(\\frac{N}{f}\\right) = C_{\\mathrm{eff}} \\beta^{2} N f^{2}$$\n此方程表明，对于固定数量的周期 $N$，所消耗的能量与频率 $f$ 的平方成正比。因此，为了最小化能耗，我们必须以满足所有时序约束的最低可能频率来执行工作负载。\n\n对于一组由EDF调度的、截止时间等于其周期的独立同步周期性任务，最优的节能策略是以单一恒定频率运行处理器。这个最优频率 $f_{\\text{opt}}$ 是满足EDF可调度性条件所需的最低频率，该条件是处理器总利用率不得超过1。\n任务 $i$ 在频率 $f$ 下的利用率是 $U_i(f) = \\frac{C_i}{P_i}$，其中 $C_i = E_i/f$ 是执行时间。总利用率是：\n$$U(f) = \\sum_{i=1}^{3} \\frac{E_i/f}{P_i} = \\frac{1}{f} \\sum_{i=1}^{3} \\frac{E_i}{P_i}$$\n可调度性条件是 $U(f) \\le 1$。最低可能频率 $f_{\\text{opt}}$ 是使 $U(f_{\\text{opt}}) = 1$ 的频率：\n$$f_{\\text{opt}} = \\sum_{i=1}^{3} \\frac{E_i}{P_i}$$\n这就确定了能耗最小的DVFS调度策略：只要有任务处于活动状态，就以恒定频率 $f_{\\text{opt}}$ 运行CPU。\n\n让我们计算 $f_{\\text{opt}}$ 的值：\n$$f_{\\text{opt}} = \\frac{2.5 \\times 10^{6}}{10 \\times 10^{-3}} + \\frac{3.0 \\times 10^{6}}{15 \\times 10^{-3}} + \\frac{3.5 \\times 10^{6}}{20 \\times 10^{-3}}$$\n$$f_{\\text{opt}} = (2.5 \\times 10^{8} + 2.0 \\times 10^{8} + 1.75 \\times 10^{8})\\,\\text{s}^{-1} = 6.25 \\times 10^{8}\\,\\text{s}^{-1}$$\n这个频率低于 $f_{\\max} = 1.0 \\times 10^{9}\\,\\text{s}^{-1}$ 的最大允许频率。\n\n接下来，我们确定超周期 $H$，它是任务周期的最小公倍数（LCM）。\n$$P_{1} = 10\\,\\mathrm{ms}, \\quad P_{2} = 15\\,\\mathrm{ms}, \\quad P_{3} = 20\\,\\mathrm{ms}$$\n$$H = \\mathrm{lcm}(10, 15, 20)\\,\\mathrm{ms} = \\mathrm{lcm}(2 \\cdot 5, 3 \\cdot 5, 2^{2} \\cdot 5)\\,\\mathrm{ms} = 2^{2} \\cdot 3 \\cdot 5\\,\\mathrm{ms} = 60\\,\\mathrm{ms}$$\n因此，$H = 60 \\times 10^{-3}\\,\\mathrm{s}$。\n\n由于处理器以使总利用率等于1的频率 $f_{\\text{opt}}$ 运行，因此在整个超周期内，处理器将持续处于忙碌状态。没有空闲时间。\n因此，在超周期 $H$ 内消耗的总能耗是在频率 $f_{\\text{opt}}$ 下的功耗乘以持续时间 $H$。\n$$E_{\\text{total}} = P(f_{\\text{opt}}) \\cdot H = (C_{\\mathrm{eff}} \\beta^{2} f_{\\text{opt}}^{3}) \\cdot H$$\n现在，我们代入给定的数值：\n$C_{\\mathrm{eff}} = 1.0 \\times 10^{-9}\\,\\mathrm{F}$\n$\\beta = 2.0 \\times 10^{-9}\\,\\mathrm{V \\cdot s}$\n$f_{\\text{opt}} = 6.25 \\times 10^{8}\\,\\mathrm{s}^{-1}$\n$H = 60 \\times 10^{-3}\\,\\mathrm{s}$\n\n$$E_{\\text{total}} = (1.0 \\times 10^{-9}) \\cdot (2.0 \\times 10^{-9})^{2} \\cdot (6.25 \\times 10^{8})^{3} \\cdot (60 \\times 10^{-3})$$\n$$E_{\\text{total}} = (1.0 \\times 10^{-9}) \\cdot (4.0 \\times 10^{-18}) \\cdot (6.25^{3} \\times 10^{24}) \\cdot (60 \\times 10^{-3})$$\n$$6.25^{3} = 244.140625$$\n$$E_{\\text{total}} = (1.0 \\times 4.0 \\times 244.140625 \\times 60) \\times 10^{(-9 - 18 + 24 - 3)}$$\n$$E_{\\text{total}} = (976.5625 \\times 60) \\times 10^{-6}$$\n$$E_{\\text{total}} = 58593.75 \\times 10^{-6}\\,\\mathrm{J} = 0.05859375\\,\\mathrm{J}$$\n问题要求答案以毫焦（$\\mathrm{mJ}$）为单位。\n$$1\\,\\mathrm{J} = 1000\\,\\mathrm{mJ}$$\n$$E_{\\text{total}} = 0.05859375 \\times 1000\\,\\mathrm{mJ} = 58.59375\\,\\mathrm{mJ}$$\n最后，我们将结果四舍五入到四位有效数字。\n$$E_{\\text{total}} \\approx 58.59\\,\\mathrm{mJ}$$\nDVFS调度策略包括维持 $6.25 \\times 10^8$ Hz 的恒定频率，并按照EDF的调度来服务任务。最小动态能耗是上面计算出的值。",
            "answer": "$$\\boxed{58.59}$$"
        },
        {
            "introduction": "到目前为止，我们的分析都假设改变电压和频率是瞬时且无开销的。然而在现实中，这些状态转换本身会消耗时间和能量。最后一个练习将直面这一实际限制，通过计算一个“盈亏平衡”空闲时间，来判断为节省功耗而付出转换代价是否值得。这种分析对于在真实系统中设计有效的功耗管理策略至关重要。",
            "id": "4268190",
            "problem": "一款多核处理器采用动态电压和频率缩放 (DVFS) 技术，以在内存受限期间降低能耗。考虑两个工作点：一个高性能点，其电源电压为 $V_{H} = 1.0\\ \\mathrm{V}$，时钟频率为 $f_{H} = 1.2\\times 10^{9}\\ \\mathrm{Hz}$；以及一个低功耗点，其电源电压为 $V_{L} = 0.6\\ \\mathrm{V}$，时钟频率为 $f_{L} = 4.0\\times 10^{8}\\ \\mathrm{Hz}$。处理器即将进入一个持续时间为 $T_{b} = 50\\ \\mathrm{\\mu s}$ 的内存受限区间（一个由停顿主导、性能不受频率限制的阶段）。在此区间之前和之后，处理器必须在高性能点运行。\n\n假设以下基本条件：\n- 互补金属氧化物半导体 (CMOS) 在给定工作负载下的动态功耗由 $P_{\\text{dyn}} = C_{\\text{eff}} V^{2} f$ 决定，其中 $C_{\\text{eff}}$ 是此内存受限阶段活动所对应的有效开关电容。\n- 对于此特定阶段，特性分析得出 $C_{\\text{eff}} = 33.3\\ \\mathrm{pF}$。\n- 当核心在此内存受限区间内被时钟门控时，主要的非动态功耗分量是泄漏功耗。工艺特性分析得出在 $V_{H}$ 时的泄漏功耗为 $P_{\\text{leak},H} = 120\\ \\mathrm{mW}$，在 $V_{L}$ 时的泄漏功耗为 $P_{\\text{leak},L} = 30\\ \\mathrm{mW}$。\n- 片上电压调节器 (VRM) 每次转换（包括降压和升压）需要 $t_{s} = 20\\ \\mathrm{\\mu s}$ 的稳定时间。每次转换会产生 $E_{\\mathrm{tr}} = 5\\ \\mathrm{\\mu J}$ 的转换能量开销。在调节器转换期间，假设相对于保持在高性能点而言，没有能量节省。\n\n仅从定义 $P = \\frac{dE}{dt}$ 和上述 CMOS 动态功耗缩放定律出发，推导在尝试为内存受限区间降至 $(V_{L}, f_{L})$ 然后返回 $(V_{H}, f_{H})$ 时的净能量变化 $\\Delta E$（使用 DVFS 的能量减去不使用 DVFS 的能量），并考虑转换稳定时间和转换能量开销。正的 $\\Delta E$ 表示能量惩罚，负的 $\\Delta E$ 表示净能量节省。\n\n数值计算 $\\Delta E$ 并以 $\\mathrm{\\mu J}$ 为单位表示最终结果，四舍五入到三位有效数字。",
            "solution": "用户提供了一个问题陈述，在尝试解答之前需要进行验证。\n\n### 问题验证\n\n**步骤 1：提取已知条件**\n- 高性能点电压：$V_{H} = 1.0\\ \\mathrm{V}$\n- 高性能点频率：$f_{H} = 1.2\\times 10^{9}\\ \\mathrm{Hz}$\n- 低功耗点电压：$V_{L} = 0.6\\ \\mathrm{V}$\n- 低功耗点频率：$f_{L} = 4.0\\times 10^{8}\\ \\mathrm{Hz}$\n- 内存受限区间的持续时间：$T_{b} = 50\\ \\mathrm{\\mu s}$\n- CMOS 动态功耗模型：$P_{\\text{dyn}} = C_{\\text{eff}} V^{2} f$\n- 有效开关电容：$C_{\\text{eff}} = 33.3\\ \\mathrm{pF}$\n- $V_{H}$ 时的泄漏功耗：$P_{\\text{leak},H} = 120\\ \\mathrm{mW}$\n- $V_{L}$ 时的泄漏功耗：$P_{\\text{leak},L} = 30\\ \\mathrm{mW}$\n- 每次转换的电压调节器稳定时间：$t_{s} = 20\\ \\mathrm{\\mu s}$\n- 每次转换的转换能量开销：$E_{\\text{tr}} = 5\\ \\mathrm{\\mu J}$\n- 假设：在调节器转换期间，能耗等同于高性能点的能耗。\n- 定义：功耗 $P = \\frac{dE}{dt}$，其中 $E$ 是能量。\n- 目标：计算净能量变化 $\\Delta E = E_{\\text{with\\_DVFS}} - E_{\\text{without\\_DVFS}}$。\n\n**步骤 2：使用提取的已知条件进行验证**\n根据验证标准对问题进行评估：\n- **科学依据：** 该问题使用标准的CMOS功耗一阶模型（$P_{\\text{dyn}} \\propto V^2f$ 和静态泄漏功耗）。动态电压和频率缩放 (DVFS) 是现代集成电路中的一项基本功耗管理技术。所提供的电压、频率、电容和转换时间的数值在物理上是现实的，并与典型的处理器技术一致。该问题牢固地植根于数字电路设计和计算机体系结构的原理。\n- **问题适定性：** 问题定义清晰，提供了计算净能量变化 $\\Delta E$ 的唯一数值所需的所有参数和约束。特别是关于电压转换期间能耗的假设都已明确说明。\n- **客观性：** 语言技术性强、精确，没有任何主观或模糊的术语。\n\n**步骤 3：结论与行动**\n问题陈述在科学上是合理的，问题是适定的，并且是客观的。它不包含任何使其无效的缺陷。因此，它被判定为 **有效**，并将提供完整的解决方案。\n\n### 解答推导\n\n目标是计算净能量变化 $\\Delta E$，即在持续时间为 $T_b$ 的内存受限区间内，使用 DVFS 所消耗的总能量与不使用 DVFS 所消耗的总能量之差。\n$$\n\\Delta E = E_{\\text{with\\_DVFS}} - E_{\\text{without\\_DVFS}}\n$$\n正的 $\\Delta E$ 意味着能量惩罚，而负的 $\\Delta E$ 意味着能量节省。\n\n我们可以通过考虑 DVFS 过程不同阶段的贡献来分析能量变化。总区间 $T_b$ 可以在概念上进行划分，并为每个部分计算能量变化。总变化 $\\Delta E$ 是这些部分变化的总和。\n\n基准情景是在高性能点 $(V_H, f_H)$ 连续运行。DVFS 情景涉及转换到低功耗点 $(V_L, f_L)$，在该点运行，然后再次转换回高性能点。\n\n区间的总持续时间为 $T_b = 50\\ \\mathrm{\\mu s}$。DVFS 过程包括两次转换，每次转换需要 $t_s = 20\\ \\mathrm{\\mu s}$ 的稳定时间。转换所花费的总时间为 $2 \\cdot t_s = 2 \\cdot 20\\ \\mathrm{\\mu s} = 40\\ \\mathrm{\\mu s}$。在低功耗点 $(V_L, f_L)$ 运行的可用时间为：\n$$\nT_{\\text{low}} = T_{b} - 2t_s = 50\\ \\mathrm{\\mu s} - 40\\ \\mathrm{\\mu s} = 10\\ \\mathrm{\\mu s}\n$$\n净能量变化 $\\Delta E$ 是转换带来的能量开销与低功耗运行期间的能量变化（节省）之和。\n\n1.  **转换期间的能量变化：**\n    问题陈述了与转换相关的两项成本：\n    a) 在转换期间（总持续时间 $2t_s$），相对于保持在高性能点，没有能量节省。这意味着在这段时间内，DVFS 和非 DVFS 情景下的能耗是相同的。因此，区间的这一部分对能量*变化* $\\Delta E$ 的贡献为零。\n    b) 每次转换有 $E_{\\text{tr}} = 5\\ \\mathrm{\\mu J}$ 的明确转换能量开销。由于有两次转换（降压和升压），总开销为 $2E_{\\text{tr}}$。这是一个直接的惩罚，对 $\\Delta E$ 做出正贡献。\n    $$\n    \\Delta E_{\\text{transitions}} = 2E_{\\text{tr}} = 2 \\cdot 5\\ \\mathrm{\\mu J} = 10\\ \\mathrm{\\mu J}\n    $$\n\n2.  **低功耗运行期间的能量变化：**\n    在持续时间 $T_{\\text{low}}$ 内，处理器在 $(V_L, f_L)$ 点运行，而不是在 $(V_H, f_H)$ 点运行。此期间的能量变化为 $(P_{\\text{total},L} - P_{\\text{total},H}) \\times T_{\\text{low}}$，其中 $P_{\\text{total}}$ 是总功耗。\n\n    首先，我们必须计算每个工作点的总功耗。总功耗是动态功耗 $P_{\\text{dyn}}$ 和泄漏功耗 $P_{\\text{leak}}$ 的总和。\n    -   在高性能点 $(V_H, f_H)$：\n        $P_{\\text{dyn},H} = C_{\\text{eff}} V_H^2 f_H = (33.3 \\times 10^{-12}\\ \\mathrm{F}) \\cdot (1.0\\ \\mathrm{V})^2 \\cdot (1.2 \\times 10^9\\ \\mathrm{Hz}) = 0.03996\\ \\mathrm{W}$\n        $P_{\\text{total},H} = P_{\\text{dyn},H} + P_{\\text{leak},H} = 0.03996\\ \\mathrm{W} + 120\\ \\mathrm{mW} = 0.03996\\ \\mathrm{W} + 0.120\\ \\mathrm{W} = 0.15996\\ \\mathrm{W}$\n\n    -   在低功耗点 $(V_L, f_L)$：\n        $P_{\\text{dyn},L} = C_{\\text{eff}} V_L^2 f_L = (33.3 \\times 10^{-12}\\ \\mathrm{F}) \\cdot (0.6\\ \\mathrm{V})^2 \\cdot (4.0 \\times 10^8\\ \\mathrm{Hz}) = 0.0047952\\ \\mathrm{W}$\n        $P_{\\text{total},L} = P_{\\text{dyn},L} + P_{\\text{leak},L} = 0.0047952\\ \\mathrm{W} + 30\\ \\mathrm{mW} = 0.0047952\\ \\mathrm{W} + 0.030\\ \\mathrm{W} = 0.0347952\\ \\mathrm{W}$\n\n    在 $T_{\\text{low}}$ 期间的能量变化是：\n    $$\n    \\Delta E_{\\text{low}} = (P_{\\text{total},L} - P_{\\text{total},H}) \\cdot T_{\\text{low}}\n    $$\n    $$\n    \\Delta E_{\\text{low}} = (0.0347952\\ \\mathrm{W} - 0.15996\\ \\mathrm{W}) \\cdot (10 \\times 10^{-6}\\ \\mathrm{s})\n    $$\n    $$\n    \\Delta E_{\\text{low}} = (-0.1251648\\ \\mathrm{W}) \\cdot (10 \\times 10^{-6}\\ \\mathrm{s}) = -1.251648 \\times 10^{-6}\\ \\mathrm{J} = -1.251648\\ \\mathrm{\\mu J}\n    $$\n    这个负值代表节省的能量。\n\n3.  **净能量变化：**\n    总净能量变化 $\\Delta E$ 是转换开销带来的变化和低功耗运行期间的变化之和。\n    $$\n    \\Delta E = \\Delta E_{\\text{transitions}} + \\Delta E_{\\text{low}}\n    $$\n    $$\n    \\Delta E = 10\\ \\mathrm{\\mu J} + (-1.251648\\ \\mathrm{\\mu J}) = 8.748352\\ \\mathrm{\\mu J}\n    $$\n\n问题要求将结果四舍五入到三位有效数字。\n$$\n\\Delta E \\approx 8.75\\ \\mathrm{\\mu J}\n$$\n正值表明，由于相对于较短的停顿持续时间而言，转换时间长且转换能量开销显著，因此尝试使用 DVFS 会导致净能量惩罚。",
            "answer": "$$\n\\boxed{8.75}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "A fundamental aspect of network analysis is moving from a visual representation to a quantitative understanding of its structure. This practice focuses on counting triangles, the smallest and most basic unit of clustering, which is often a proxy for cohesion in social and biological networks. You will derive and apply the elegant algebraic relationship between the number of triangles and the trace of the cubed adjacency matrix, $\\mathrm{Tr}(A^3)$, providing a powerful link between a graph's topology and its algebraic properties . This exercise will develop your skills in matrix manipulation and deepen your understanding of how matrix powers encode information about paths and cycles within a network.",
            "id": "4131980",
            "problem": "Consider a simple undirected interaction network in the context of Complex Adaptive Systems (CAS), represented by a simple undirected graph with no self-loops. Let the graph be specified by its adjacency matrix $A$, where $A$ is a symmetric $n \\times n$ matrix with entries $A_{ij} \\in \\{0,1\\}$ indicating the presence or absence of an edge between nodes $i$ and $j$, and $A_{ii} = 0$ for all $i$. Starting from the core definitions of adjacency matrices and matrix multiplication, derive a closed-form expression that relates the number of distinct $3$-node cliques (triangles) in the graph to a trace of a power of the adjacency matrix. Your derivation must proceed from first principles and rely only on foundational facts about walks in graphs encoded by powers of the adjacency matrix.\n\nAfter completing your derivation, evaluate the resulting expression for the specific network whose adjacency matrix is\n$$\nA \\;=\\;\n\\begin{pmatrix}\n0  1  1  0  0 \\\\\n1  0  1  0  0 \\\\\n1  1  0  1  1 \\\\\n0  0  1  0  1 \\\\\n0  0  1  1  0\n\\end{pmatrix}.\n$$\n\nProvide the final result for the number of triangles as a single integer. No rounding is required. If you choose to compute intermediate quantities, ensure that all steps are consistent with the derivation from first principles and that any matrix operation used is justified by the foundational definitions stated at the outset.",
            "solution": "The problem requires the derivation of a formula for the number of triangles in a simple undirected graph, represented by its adjacency matrix $A$, and the application of this formula to a specific case.\n\nFirst, we perform the derivation from first principles.\n\nLet $G=(V, E)$ be a simple undirected graph with $n$ vertices, where $V=\\{1, 2, ..., n\\}$. The graph has no self-loops. The adjacency matrix $A$ is an $n \\times n$ matrix where its entries are defined as:\n$$\nA_{ij} =\n\\begin{cases}\n1  \\text{if an edge exists between nodes } i \\text{ and } j \\\\\n0  \\text{otherwise}\n\\end{cases}\n$$\nSince the graph is simple and undirected, $A$ is symmetric ($A_{ij} = A_{ji}$) and has zeros on its main diagonal ($A_{ii} = 0$ for all $i \\in V$).\n\nThe core principle connecting matrix powers to graph walks states that the entry $(A^k)_{ij}$ of the matrix $A^k$ represents the number of distinct walks of length $k$ from node $i$ to node $j$. A walk of length $k$ is a sequence of vertices $(v_0, v_1, \\dots, v_k)$ such that for all $m \\in \\{0, \\dots, k-1\\}$, there is an edge between $v_m$ and $v_{m+1}$. For such a walk from $i$ to $j$, we have $v_0 = i$ and $v_k = j$.\n\nWe are interested in triangles, which are 3-node cliques. A triangle is a set of three distinct vertices $\\{i, j, k\\}$ such that edges $(i, j)$, $(j, k)$, and $(k, i)$ all exist in the graph. These three edges form a closed walk of length $3$, for example, $i \\to j \\to k \\to i$.\n\nLet us consider the matrix $A^3$. The entry $(A^3)_{ij}$ gives the number of walks of length $3$ from node $i$ to node $j$. The diagonal entry $(A^3)_{ii}$ therefore gives the number of closed walks of length $3$ that start and end at node $i$.\nFrom the definition of matrix multiplication, we have:\n$$\n(A^3)_{ii} = \\sum_{j=1}^{n} \\sum_{k=1}^{n} A_{ij} A_{jk} A_{ki}\n$$\nEach term in this double summation, $A_{ij} A_{jk} A_{ki}$, corresponds to a specific walk of length $3$ from $i$ back to $i$ via intermediate nodes $j$ and $k$. The term is equal to $1$ if and only if the edges $(i, j)$, $(j, k)$, and $(k, i)$ all exist, and $0$ otherwise.\n\nSince the graph is simple ($A_{mm} = 0$), for any non-zero term in the sum, the three vertices $i$, $j$, and $k$ must be distinct. This means that every closed walk of length $3$ in a simple graph corresponds to a traversal of a unique triangle.\n\nThe sum of all diagonal entries of $A^3$ is the trace of the matrix, $\\mathrm{Tr}(A^3)$:\n$$\n\\mathrm{Tr}(A^3) = \\sum_{i=1}^{n} (A^3)_{ii} = \\sum_{i=1}^{n} \\sum_{j=1}^{n} \\sum_{k=1}^{n} A_{ij} A_{jk} A_{ki}\n$$\nThis sum counts the total number of closed walks of length $3$ in the graph.\n\nNow, we must relate this count to the number of distinct triangles, which we denote as $N_{\\triangle}$. A single triangle consists of three vertices, say $\\{u, v, w\\}$. This single triangle gives rise to multiple distinct closed walks of length $3$. We can start at any of the three vertices. From each starting vertex, we can traverse the triangle in two opposite directions.\nFor the triangle $\\{u, v, w\\}$, the possible walks are:\n- Start at $u$: $u \\to v \\to w \\to u$ and $u \\to w \\to v \\to u$.\n- Start at $v$: $v \\to u \\to w \\to v$ and $v \\to w \\to u \\to v$.\n- Start at $w$: $w \\to u \\to v \\to w$ and $w \\to v \\to u \\to w$.\nThus, each triangle is counted $3 \\times 2 = 6$ times in the computation of $\\mathrm{Tr}(A^3)$.\n\nTo find the number of unique triangles, we must divide the total count of walks by this overcounting factor of $6$. The resulting expression is:\n$$\nN_{\\triangle} = \\frac{\\mathrm{Tr}(A^3)}{6}\n$$\nThis is the required closed-form expression.\n\nNow, we apply this formula to the given adjacency matrix:\n$$\nA \\;=\\;\n\\begin{pmatrix}\n0  1  1  0  0 \\\\\n1  0  1  0  0 \\\\\n1  1  0  1  1 \\\\\n0  0  1  0  1 \\\\\n0  0  1  1  0\n\\end{pmatrix}\n$$\nFirst, we compute $A^2$:\n$$\nA^2 = A \\times A =\n\\begin{pmatrix}\n0  1  1  0  0 \\\\\n1  0  1  0  0 \\\\\n1  1  0  1  1 \\\\\n0  0  1  0  1 \\\\\n0  0  1  1  0\n\\end{pmatrix}\n\\begin{pmatrix}\n0  1  1  0  0 \\\\\n1  0  1  0  0 \\\\\n1  1  0  1  1 \\\\\n0  0  1  0  1 \\\\\n0  0  1  1  0\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n2  1  1  1  1 \\\\\n1  2  1  1  1 \\\\\n1  1  4  1  1 \\\\\n1  1  1  2  1 \\\\\n1  1  1  1  2\n\\end{pmatrix}\n$$\nNext, we compute $A^3 = A \\cdot A^2$. We only need the diagonal entries of $A^3$ to compute its trace. The diagonal entry $(A^3)_{ii}$ is the dot product of the $i$-th row of $A$ and the $i$-th column of $A^2$.\nLet's compute each diagonal element $(A^3)_{ii} = \\sum_{k=1}^5 A_{ik} (A^2)_{ki}$.\n$$\n(A^3)_{11} = A_{12}(A^2)_{21} + A_{13}(A^2)_{31} = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\n$$\n(A^3)_{22} = A_{21}(A^2)_{12} + A_{23}(A^2)_{32} = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\n$$\n(A^3)_{33} = A_{31}(A^2)_{13} + A_{32}(A^2)_{23} + A_{34}(A^2)_{43} + A_{35}(A^2)_{53} = 1 \\cdot 1 + 1 \\cdot 1 + 1 \\cdot 1 + 1 \\cdot 1 = 4\n$$\n$$\n(A^3)_{44} = A_{43}(A^2)_{34} + A_{45}(A^2)_{54} = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\n$$\n(A^3)_{55} = A_{53}(A^2)_{35} + A_{54}(A^2)_{45} = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\nThe trace of $A^3$ is the sum of these diagonal elements:\n$$\n\\mathrm{Tr}(A^3) = (A^3)_{11} + (A^3)_{22} + (A^3)_{33} + (A^3)_{44} + (A^3)_{55} = 2 + 2 + 4 + 2 + 2 = 12\n$$\nFinally, we substitute this value into our derived formula for the number of triangles:\n$$\nN_{\\triangle} = \\frac{\\mathrm{Tr}(A^3)}{6} = \\frac{12}{6} = 2\n$$\nThus, there are $2$ triangles in the network.",
            "answer": "$$\n\\boxed{2}\n$$"
        },
        {
            "introduction": "Having explored local network density, we now turn to the roles individual nodes play in connecting the wider system. Betweenness centrality is a key metric that quantifies a node's importance as a \"bridge\" by measuring how frequently it lies on the shortest paths, or geodesics, between all other pairs of nodes. This exercise requires you to calculate betweenness centrality from its foundational definition, offering direct insight into how a node's structural position affects its potential to control flow or broker information within a complex adaptive system . Mastering this concept is essential for identifying critical bottlenecks, key influencers, and vulnerabilities in a network.",
            "id": "4131991",
            "problem": "Consider a simple, undirected, unweighted network as a model of information flow in a Complex Adaptive System (CAS), where the network is represented by a graph $G = (V,E)$ with $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$ and $E = \\{(v_1,v_2), (v_2,v_3), (v_1,v_3), (v_2,v_4), (v_3,v_4), (v_4,v_5), (v_5,v_6), (v_4,v_6)\\}$. Paths represent feasible information transmission sequences, and shortest paths represent minimal-delay routes under homogeneous link weights.\n\nStarting from fundamental network definitions, derive the node betweenness centrality as the normalized fraction of shortest paths that pass through a node. Explicitly construct the derivation from:\n- the definition of a path and path length,\n- the notion of a geodesic (shortest path) and the count $\\sigma_{st}$ of geodesics connecting two distinct nodes $s$ and $t$,\n- and the fraction $\\sigma_{st}(v)/\\sigma_{st}$ of geodesics between $s$ and $t$ that pass through an intermediate node $v$.\n\nFormally define the node betweenness centrality $C_B(v)$ for a node $v \\in V$ using a normalization that averages this fraction over all unordered pairs $(s,t)$ with $s \\neq t$, $s \\neq v$, and $t \\neq v$. In addition, state the analogous definition for edge betweenness centrality $C_B(e)$ for an edge $e \\in E$ in terms of the fraction of shortest paths that traverse the edge.\n\nThen compute $C_B(v_i)$ for all nodes $v_i$ with $i \\in \\{1,2,3,4,5,6\\}$ for the given graph. Use the normalization\n$$\nC_B(v) \\;=\\; \\frac{1}{\\binom{N-1}{2}} \\sum_{\\substack{s,t \\in V \\\\ s  t \\\\ s \\neq v, \\; t \\neq v}} \\frac{\\sigma_{st}(v)}{\\sigma_{st}},\n$$\nwhere $N = |V|$. Provide the final numerical values as exact rational numbers. Express the final answer as a single row matrix in the order $(C_B(v_1), C_B(v_2), C_B(v_3), C_B(v_4), C_B(v_5), C_B(v_6))$. No rounding is required and no units are involved.",
            "solution": "### Formal Definitions\n\nA **path** in a graph $G=(V, E)$ from a node $s$ to a node $t$ is a sequence of distinct vertices $(u_0, u_1, \\dots, u_k)$ such that $u_0 = s$, $u_k = t$, and for all $i \\in \\{0, \\dots, k-1\\}$, the edge $(u_i, u_{i+1})$ is in $E$. The **length of a path** is the number of edges it contains, which is $k$.\n\nA **geodesic** (or shortest path) between two nodes $s$ and $t$ is a path with the minimum possible length. This minimum length is called the distance $d(s,t)$. We denote the number of distinct geodesics between $s$ and $t$ as $\\sigma_{st}$.\n\nFor an intermediate node $v$ (i.e., $v \\neq s$ and $v \\neq t$), we denote $\\sigma_{st}(v)$ as the number of geodesics between $s$ and $t$ that pass through $v$. The fraction of such geodesics is $\\frac{\\sigma_{st}(v)}{\\sigma_{st}}$.\n\nThe **node betweenness centrality** $C_B(v)$ of a node $v$ is a measure of its importance as a bridge in the network. For an undirected graph, it is defined as:\n$$\nC_B(v) = \\frac{1}{\\binom{N-1}{2}} \\sum_{\\substack{s,t \\in V \\\\ s  t \\\\ s \\neq v, \\; t \\neq v}} \\frac{\\sigma_{st}(v)}{\\sigma_{st}}\n$$\nwhere $N = |V|$.\n\nThe analogous definition for **edge betweenness centrality** $C_B(e)$ for an edge $e \\in E$ measures the fraction of shortest paths that traverse that edge:\n$$\nC_B(e) = \\frac{1}{\\binom{N}{2}} \\sum_{\\substack{s,t \\in V \\\\ s  t}} \\frac{\\sigma_{st}(e)}{\\sigma_{st}}\n$$\nwhere $\\sigma_{st}(e)$ is the number of shortest paths between $s$ and $t$ that contain the edge $e$.\n\n### Graph Analysis and Computation\n\nThe given graph $G$ has $N=|V|=6$ vertices. The normalization constant for node betweenness centrality is $\\frac{1}{\\binom{6-1}{2}} = \\frac{1}{\\binom{5}{2}} = \\frac{1}{10}$.\n\nThe structure of the graph consists of two triangles, one on vertices $\\{v_1, v_2, v_3\\}$ and another on vertices $\\{v_4, v_5, v_6\\}$. These two triangles are connected by the edges $(v_2, v_4)$ and $(v_3, v_4)$. The graph exhibits symmetries: nodes $v_2$ and $v_3$ are structurally equivalent ($C_B(v_2) = C_B(v_3)$), and nodes $v_5$ and $v_6$ are structurally equivalent ($C_B(v_5) = C_B(v_6)$). We need to compute $C_B(v)$ for $v \\in \\{v_1, v_2, v_4, v_5\\}$.\n\nWe systematically analyze the shortest paths for all pairs of vertices.\n\n**Computation for $C_B(v_1)$:**\nA shortest path can only pass through $v_1$ if it connects its neighbors, $v_2$ and $v_3$. The shortest path between $v_2$ and $v_3$ is the direct edge $(v_2,v_3)$, with length $d(v_2,v_3)=1$. The path $(v_2,v_1,v_3)$ has length $2$ and is not a geodesic. Any other pair of nodes $(s,t)$ from $\\{v_2, v_3, v_4, v_5, v_6\\}$ will have shortest paths that do not involve the \"dead-end\" part of the graph where $v_1$ resides. Thus, $\\sigma_{st}(v_1) = 0$ for all pairs $s,t \\neq v_1$. Therefore, $C_B(v_1) = 0$.\n\n**Computation for $C_B(v_5)$ (and $C_B(v_6)$):**\nBy analogy with $v_1$, node $v_5$ is part of a terminal triangle $\\{v_4, v_5, v_6\\}$. A shortest path can pass through $v_5$ only if it connects its neighbors, $v_4$ and $v_6$. The direct edge $(v_4,v_6)$ has length $d(v_4,v_6)=1$. The path $(v_4,v_5,v_6)$ has length $2$ and is not a geodesic. Therefore, $\\sigma_{st}(v_5)=0$ for all pairs $s,t \\neq v_5$. So, $C_B(v_5) = 0$, and by symmetry, $C_B(v_6)=0$.\n\n**Computation for $C_B(v_2)$ (and $C_B(v_3)$):**\nWe sum the contributions $\\frac{\\sigma_{st}(v_2)}{\\sigma_{st}}$ for all pairs $(s,t)$ not including $v_2$.\n- Pair $(v_1, v_4)$: Shortest paths have length $2$. They are $(v_1,v_2,v_4)$ and $(v_1,v_3,v_4)$. So $\\sigma_{14}=2$. One of these passes through $v_2$. Contribution: $\\frac{\\sigma_{14}(v_2)}{\\sigma_{14}} = \\frac{1}{2}$.\n- Pair $(v_1, v_5)$: Shortest paths have length $3$. They are $(v_1,v_2,v_4,v_5)$ and $(v_1,v_3,v_4,v_5)$. So $\\sigma_{15}=2$. One passes through $v_2$. Contribution: $\\frac{\\sigma_{15}(v_2)}{\\sigma_{15}} = \\frac{1}{2}$.\n- Pair $(v_1, v_6)$: Shortest paths have length $3$. They are $(v_1,v_2,v_4,v_6)$ and $(v_1,v_3,v_4,v_6)$. So $\\sigma_{16}=2$. One passes through $v_2$. Contribution: $\\frac{\\sigma_{16}(v_2)}{\\sigma_{16}} = \\frac{1}{2}$.\nAll other pairs have shortest paths that do not involve $v_2$. The sum of contributions for $v_2$ is $\\frac{1}{2} + \\frac{1}{2} + \\frac{1}{2} = \\frac{3}{2}$.\n$C_B(v_2) = \\frac{1}{10} \\left( \\frac{3}{2} \\right) = \\frac{3}{20}$. By symmetry, $C_B(v_3) = \\frac{3}{20}$.\n\n**Computation for $C_B(v_4)$:**\nWe sum the contributions $\\frac{\\sigma_{st}(v_4)}{\\sigma_{st}}$ for all pairs $(s,t)$ not including $v_4$. Node $v_4$ is the primary bridge between the two parts of the graph.\n- Pair $(v_1, v_5)$: Shortest paths are $(v_1,v_2,v_4,v_5)$ and $(v_1,v_3,v_4,v_5)$. Length $3$. $\\sigma_{15}=2$. Both pass through $v_4$. Contribution: $\\frac{\\sigma_{15}(v_4)}{\\sigma_{15}} = \\frac{2}{2} = 1$.\n- Pair $(v_1, v_6)$: Shortest paths are $(v_1,v_2,v_4,v_6)$ and $(v_1,v_3,v_4,v_6)$. Length $3$. $\\sigma_{16}=2$. Both pass through $v_4$. Contribution: $\\frac{\\sigma_{16}(v_4)}{\\sigma_{16}} = \\frac{2}{2} = 1$.\n- Pair $(v_2, v_5)$: Shortest path is $(v_2,v_4,v_5)$. Length $2$. $\\sigma_{25}=1$. Passes through $v_4$. Contribution: $\\frac{\\sigma_{25}(v_4)}{\\sigma_{25}} = \\frac{1}{1} = 1$.\n- Pair $(v_2, v_6)$: Shortest path is $(v_2,v_4,v_6)$. Length $2$. $\\sigma_{26}=1$. Passes through $v_4$. Contribution: $\\frac{\\sigma_{26}(v_4)}{\\sigma_{26}} = \\frac{1}{1} = 1$.\n- Pair $(v_3, v_5)$: Shortest path is $(v_3,v_4,v_5)$. Length $2$. $\\sigma_{35}=1$. Passes through $v_4$. Contribution: $\\frac{\\sigma_{35}(v_4)}{\\sigma_{35}} = \\frac{1}{1} = 1$.\n- Pair $(v_3, v_6)$: Shortest path is $(v_3,v_4,v_6)$. Length $2$. $\\sigma_{36}=1$. Passes through $v_4$. Contribution: $\\frac{\\sigma_{36}(v_4)}{\\sigma_{36}} = \\frac{1}{1} = 1$.\nThe sum of contributions for $v_4$ is $1+1+1+1+1+1 = 6$.\n$C_B(v_4) = \\frac{1}{10} (6) = \\frac{6}{10} = \\frac{3}{5}$.\n\n### Summary of Results\nThe betweenness centrality values for all nodes are:\n- $C_B(v_1) = 0$\n- $C_B(v_2) = \\frac{3}{20}$\n- $C_B(v_3) = \\frac{3}{20}$\n- $C_B(v_4) = \\frac{3}{5}$\n- $C_B(v_5) = 0$\n- $C_B(v_6) = 0$",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0  \\frac{3}{20}  \\frac{3}{20}  \\frac{3}{5}  0  0 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "Our final practice scales up the analysis to the mesoscopic level of community structureâ€”the division of a network into densely connected modules. You will engage with modularity, $Q$, a ubiquitous metric for assessing the quality of such a partition. However, this is not a simple application; the exercise is a critical investigation into modularity's most famous pitfall, the resolution limit, where the method systematically fails to identify communities smaller than a certain scale . By deriving the precise conditions under which modularity prefers to merge distinct communities, you will gain a profound, practical understanding of the limitations inherent in one of network science's most common tools, a crucial lesson for any serious practitioner.",
            "id": "4131943",
            "problem": "Consider an undirected, unweighted, simple graph constructed as follows. Take $m$ cliques of size $n$ (each clique is a complete graph $K_n$), and arrange them on a cycle so that each clique has exactly one edge to each of its two neighboring cliques; thus the $m$ cliques are connected in a ring by $m$ distinct single inter-clique edges. Assume $m$ is even. Let $A_{ij}$ be the adjacency matrix, $k_i$ the degree of node $i$, and $L$ the total number of edges. Define the modularity $Q$ of a partition $\\{c_i\\}$ by the standard expression\n$$\nQ \\;=\\; \\frac{1}{2L} \\sum_{i,j} \\left( A_{ij} - \\frac{k_i k_j}{2L} \\right) \\delta(c_i, c_j),\n$$\nwhere $\\delta(c_i,c_j)$ is the Kronecker delta, equal to $1$ if $c_i=c_j$ and $0$ otherwise.\n\nConsider two partitions of this ring-of-cliques graph:\n- Partition $\\mathcal{P}_1$: each clique is its own community.\n- Partition $\\mathcal{P}_2$: merge each pair of adjacent cliques into a single community, yielding $m/2$ communities.\n\nStarting from the definition of $Q$ above and using only fundamental properties of graphs and degrees, derive $Q(\\mathcal{P}_1)$ and $Q(\\mathcal{P}_2)$ in closed form. Then determine the exact threshold condition on $m$ and $n$ for which $Q(\\mathcal{P}_2)  Q(\\mathcal{P}_1)$, and provide the critical value $m_c(n)$ such that for all $m  m_c(n)$, modularity optimization strictly prefers merging adjacent cliques (i.e., $\\mathcal{P}_2$ yields larger modularity than $\\mathcal{P}_1$). Express your final answer as a single closed-form expression $m_c(n)$; no rounding is required and no units are involved.",
            "solution": "We begin by characterizing the graph's fundamental properties.\nThe total number of nodes in the graph is $N=mn$.\n\nThe total number of edges, $L$, is the sum of edges within all cliques and the edges connecting the cliques.\n-   Number of edges in a single $n$-clique ($K_n$) is $\\binom{n}{2} = \\frac{n(n-1)}{2}$.\n-   Total edges within the $m$ cliques: $m \\frac{n(n-1)}{2}$.\n-   Number of inter-clique edges: $m$.\n-   Total number of edges: $L = m \\frac{n(n-1)}{2} + m = \\frac{m(n(n-1)+2)}{2} = \\frac{m(n^2-n+2)}{2}$.\n-   For the modularity formula, we need $2L = m(n^2-n+2)$.\n\nNext, we establish the node degrees. In each clique, there are two types of nodes:\n-   $n-2$ \"internal\" nodes, which are connected only to other nodes within the same clique. Their degree is $k_{\\text{int}} = n-1$.\n-   $2$ \"bridge\" nodes, each connected to $n-1$ nodes in its own clique and one node in a neighboring clique. Their degree is $k_{\\text{bridge}} = (n-1)+1 = n$.\n\nThe modularity $Q$ for a partition $\\mathcal{C} = \\{c_s\\}$ can be expressed as a sum over the communities:\n$$\nQ = \\sum_{s} \\left[ \\frac{L_{in}(c_s)}{L} - \\left( \\frac{K(c_s)}{2L} \\right)^2 \\right]\n$$\nwhere $L_{in}(c_s)$ is the number of edges entirely within community $c_s$, and $K(c_s) = \\sum_{i \\in c_s} k_i$ is the sum of the degrees of the nodes in community $c_s$.\n\n**Modularity of Partition $\\mathcal{P}_1$**\n\nIn partition $\\mathcal{P}_1$, there are $m$ communities, each being one of the original cliques. Due to the ring symmetry, all communities are identical. Let's analyze one such community, $c$.\n-   The number of internal edges is the number of edges in a $K_n$: $L_{in}(c) = \\binom{n}{2} = \\frac{n(n-1)}{2}$.\n-   The sum of degrees of nodes in $c$ is $K(c) = (n-2)k_{\\text{int}} + 2k_{\\text{bridge}} = (n-2)(n-1) + 2n = (n^2-3n+2) + 2n = n^2-n+2$.\n\nSince there are $m$ identical communities, the total modularity $Q(\\mathcal{P}_1)$ is:\n$$\nQ(\\mathcal{P}_1) = m \\left[ \\frac{L_{in}(c)}{L} - \\left( \\frac{K(c)}{2L} \\right)^2 \\right]\n$$\nSubstituting the expressions for $L_{in}(c)$, $K(c)$, $L$, and $2L$:\n$$\nQ(\\mathcal{P}_1) = m \\left[ \\frac{n(n-1)/2}{m(n^2-n+2)/2} - \\left( \\frac{n^2-n+2}{m(n^2-n+2)} \\right)^2 \\right]\n$$\n$$\nQ(\\mathcal{P}_1) = m \\left[ \\frac{n(n-1)}{m(n^2-n+2)} - \\left( \\frac{1}{m} \\right)^2 \\right] = \\frac{n(n-1)}{n^2-n+2} - \\frac{1}{m}\n$$\n\n**Modularity of Partition $\\mathcal{P}_2$**\n\nIn partition $\\mathcal{P}_2$, we have $m/2$ communities, each formed by merging two adjacent cliques. Again, all communities are structurally identical. Let's analyze one such community, $c'$.\n-   A community $c'$ consists of two cliques, say $K_n^{(a)}$ and $K_n^{(b)}$, plus the single edge connecting them.\n-   The number of internal edges $L_{in}(c')$ is the sum of edges in $K_n^{(a)}$, edges in $K_n^{(b)}$, and the one connecting edge: $L_{in}(c') = \\binom{n}{2} + \\binom{n}{2} + 1 = n(n-1)+1 = n^2-n+1$.\n-   The sum of degrees $K(c')$ is the sum of the degrees of all nodes in the two constituent cliques. Since $K(c)$ for a single clique is $n^2-n+2$, for a double-clique community we have: $K(c') = 2(n^2-n+2)$.\n\nSince there are $m/2$ identical communities, the total modularity $Q(\\mathcal{P}_2)$ is:\n$$\nQ(\\mathcal{P}_2) = \\frac{m}{2} \\left[ \\frac{L_{in}(c')}{L} - \\left( \\frac{K(c')}{2L} \\right)^2 \\right]\n$$\nSubstituting the expressions for $L_{in}(c')$, $K(c')$, $L$, and $2L$:\n$$\nQ(\\mathcal{P}_2) = \\frac{m}{2} \\left[ \\frac{n^2-n+1}{m(n^2-n+2)/2} - \\left( \\frac{2(n^2-n+2)}{m(n^2-n+2)} \\right)^2 \\right]\n$$\n$$\nQ(\\mathcal{P}_2) = \\frac{m}{2} \\left[ \\frac{2(n^2-n+1)}{m(n^2-n+2)} - \\left( \\frac{2}{m} \\right)^2 \\right] = \\frac{n^2-n+1}{n^2-n+2} - \\frac{m}{2}\\frac{4}{m^2} = \\frac{n^2-n+1}{n^2-n+2} - \\frac{2}{m}\n$$\n\n**Threshold Condition**\n\nWe need to find the condition for which modularity strictly prefers merging adjacent cliques, i.e., $Q(\\mathcal{P}_2)  Q(\\mathcal{P}_1)$.\n$$\n\\frac{n^2-n+1}{n^2-n+2} - \\frac{2}{m}  \\frac{n(n-1)}{n^2-n+2} - \\frac{1}{m}\n$$\nRearranging the terms to solve for $m$:\n$$\n\\left( \\frac{n^2-n+1}{n^2-n+2} - \\frac{n^2-n}{n^2-n+2} \\right)  \\left( \\frac{2}{m} - \\frac{1}{m} \\right)\n$$\nThe left side simplifies:\n$$\n\\frac{(n^2-n+1) - (n^2-n)}{n^2-n+2}  \\frac{1}{m}\n$$\n$$\n\\frac{1}{n^2-n+2}  \\frac{1}{m}\n$$\nSince both $m$ and $n^2-n+2 = n(n-1)+2$ are positive (for $n \\ge 1$), we can take the reciprocal and reverse the inequality sign:\n$$\nm  n^2-n+2\n$$\nThis is the exact threshold condition. For any even integer $m$ satisfying this strict inequality, partition $\\mathcal{P}_2$ will have a higher modularity than $\\mathcal{P}_1$.\n\nThe problem asks for the critical value $m_c(n)$ such that for all $m  m_c(n)$, the condition holds. From our derived inequality, this critical value is the threshold itself.\n$$\nm_c(n) = n^2-n+2\n$$",
            "answer": "$$\\boxed{n^2-n+2}$$"
        }
    ]
}
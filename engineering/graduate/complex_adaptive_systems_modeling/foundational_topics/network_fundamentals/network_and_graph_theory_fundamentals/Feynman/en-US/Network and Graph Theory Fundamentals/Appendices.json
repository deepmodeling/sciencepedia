{
    "hands_on_practices": [
        {
            "introduction": "The adjacency matrix is a cornerstone of network representation, but its utility extends far beyond a simple record of edges. By treating it as a mathematical operator, we can uncover deep structural properties of a network. This exercise explores one of the most elegant connections between linear algebra and graph theory: using matrix powers to count network motifs. You will derive and apply the classic formula relating the number of triangles—a fundamental building block of social and biological networks—to the trace of the cube of the adjacency matrix, providing a powerful demonstration of how algebraic properties encode topological features. ",
            "id": "4131980",
            "problem": "Consider a simple undirected interaction network in the context of Complex Adaptive Systems (CAS), represented by a simple undirected graph with no self-loops. Let the graph be specified by its adjacency matrix $A$, where $A$ is a symmetric $n \\times n$ matrix with entries $A_{ij} \\in \\{0,1\\}$ indicating the presence or absence of an edge between nodes $i$ and $j$, and $A_{ii} = 0$ for all $i$. Starting from the core definitions of adjacency matrices and matrix multiplication, derive a closed-form expression that relates the number of distinct $3$-node cliques (triangles) in the graph to a trace of a power of the adjacency matrix. Your derivation must proceed from first principles and rely only on foundational facts about walks in graphs encoded by powers of the adjacency matrix.\n\nAfter completing your derivation, evaluate the resulting expression for the specific network whose adjacency matrix is\n$$\nA \\;=\\;\n\\begin{pmatrix}\n0 & 1 & 1 & 0 & 0 \\\\\n1 & 0 & 1 & 0 & 0 \\\\\n1 & 1 & 0 & 1 & 1 \\\\\n0 & 0 & 1 & 0 & 1 \\\\\n0 & 0 & 1 & 1 & 0\n\\end{pmatrix}.\n$$\n\nProvide the final result for the number of triangles as a single integer. No rounding is required. If you choose to compute intermediate quantities, ensure that all steps are consistent with the derivation from first principles and that any matrix operation used is justified by the foundational definitions stated at the outset.",
            "solution": "The problem requires the derivation of a formula for the number of triangles in a simple undirected graph and its application to a specific adjacency matrix $A$.\n\nFirst, we perform the derivation from first principles.\n\nLet $G=(V, E)$ be a simple undirected graph with $n$ vertices. The adjacency matrix $A$ has entries $A_{ij}=1$ if an edge exists between nodes $i$ and $j$, and $A_{ij}=0$ otherwise. Since the graph is simple and undirected, $A$ is symmetric ($A_{ij} = A_{ji}$) and has zeros on its main diagonal ($A_{ii} = 0$).\n\nThe core principle connecting matrix powers to graph structure is that the entry $(A^k)_{ij}$ of the matrix $A^k$ equals the number of distinct walks of length $k$ from node $i$ to node $j$. We are interested in triangles, which correspond to closed walks of length 3.\n\nLet us consider the matrix $A^3$. The diagonal entry $(A^3)_{ii}$ gives the number of closed walks of length $3$ that start and end at node $i$. From the definition of matrix multiplication:\n$$\n(A^3)_{ii} = \\sum_{j=1}^{n} \\sum_{k=1}^{n} A_{ij} A_{jk} A_{ki}\n$$\nEach non-zero term in this sum corresponds to a walk $i \\to j \\to k \\to i$. Since the graph is simple ($A_{mm}=0$ for all $m$), any non-zero term $A_{ij} A_{jk} A_{ki}$ requires that the vertices $i, j,$ and $k$ are distinct. If any two were the same (e.g., $j=k$), the walk would involve a self-loop (e.g., $i \\to j \\to j \\to i$), which is not allowed. Therefore, every closed walk of length 3 in a simple graph corresponds to a unique traversal of a 3-node clique (a triangle).\n\nThe sum of all diagonal entries of $A^3$ is the trace of the matrix, $\\mathrm{Tr}(A^3)$:\n$$\n\\mathrm{Tr}(A^3) = \\sum_{i=1}^{n} (A^3)_{ii}\n$$\nThis sum counts the total number of ordered traversals of triangles in the graph. A single triangle consists of three vertices, say $\\{u, v, w\\}$. This single triangle gives rise to multiple distinct closed walks of length 3. We can start at any of the three vertices, and from each starting vertex, we can traverse the triangle in two opposite directions (e.g., $u \\to v \\to w \\to u$ and $u \\to w \\to v \\to u$). This gives a total of $3 \\times 2 = 6$ walks for each triangle.\n\nTo find the number of unique triangles, $N_{\\triangle}$, we must divide the total count of walks by this overcounting factor of 6. The resulting expression is:\n$$\nN_{\\triangle} = \\frac{\\mathrm{Tr}(A^3)}{6}\n$$\n\nNow, we apply this formula to the given adjacency matrix:\n$$\nA \\;=\\;\n\\begin{pmatrix}\n0 & 1 & 1 & 0 & 0 \\\\\n1 & 0 & 1 & 0 & 0 \\\\\n1 & 1 & 0 & 1 & 1 \\\\\n0 & 0 & 1 & 0 & 1 \\\\\n0 & 0 & 1 & 1 & 0\n\\end{pmatrix}\n$$\nFirst, we compute $A^2$:\n$$\nA^2 = A \\times A =\n\\begin{pmatrix}\n0 & 1 & 1 & 0 & 0 \\\\\n1 & 0 & 1 & 0 & 0 \\\\\n1 & 1 & 0 & 1 & 1 \\\\\n0 & 0 & 1 & 0 & 1 \\\\\n0 & 0 & 1 & 1 & 0\n\\end{pmatrix}\n\\begin{pmatrix}\n0 & 1 & 1 & 0 & 0 \\\\\n1 & 0 & 1 & 0 & 0 \\\\\n1 & 1 & 0 & 1 & 1 \\\\\n0 & 0 & 1 & 0 & 1 \\\\\n0 & 0 & 1 & 1 & 0\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n2 & 1 & 1 & 1 & 1 \\\\\n1 & 2 & 1 & 1 & 1 \\\\\n1 & 1 & 4 & 1 & 1 \\\\\n1 & 1 & 1 & 2 & 1 \\\\\n1 & 1 & 1 & 1 & 2\n\\end{pmatrix}\n$$\nNext, we compute the diagonal entries of $A^3 = A \\cdot A^2$ to find its trace. The diagonal entry $(A^3)_{ii}$ is the dot product of the $i$-th row of $A$ and the $i$-th column of $A^2$.\n$$\n(A^3)_{11} = (A_{1,:}) \\cdot (A^2_{:,1}) = (0, 1, 1, 0, 0) \\cdot (2, 1, 1, 1, 1)^T = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\n$$\n(A^3)_{22} = (A_{2,:}) \\cdot (A^2_{:,2}) = (1, 0, 1, 0, 0) \\cdot (1, 2, 1, 1, 1)^T = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\n$$\n(A^3)_{33} = (A_{3,:}) \\cdot (A^2_{:,3}) = (1, 1, 0, 1, 1) \\cdot (1, 1, 4, 1, 1)^T = 1 \\cdot 1 + 1 \\cdot 1 + 1 \\cdot 1 + 1 \\cdot 1 = 4\n$$\n$$\n(A^3)_{44} = (A_{4,:}) \\cdot (A^2_{:,4}) = (0, 0, 1, 0, 1) \\cdot (1, 1, 1, 2, 1)^T = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\n$$\n(A^3)_{55} = (A_{5,:}) \\cdot (A^2_{:,5}) = (0, 0, 1, 1, 0) \\cdot (1, 1, 1, 1, 2)^T = 1 \\cdot 1 + 1 \\cdot 1 = 2\n$$\nThe trace of $A^3$ is the sum of these diagonal elements:\n$$\n\\mathrm{Tr}(A^3) = 2 + 2 + 4 + 2 + 2 = 12\n$$\nFinally, we substitute this value into our derived formula for the number of triangles:\n$$\nN_{\\triangle} = \\frac{\\mathrm{Tr}(A^3)}{6} = \\frac{12}{6} = 2\n$$\nThus, there are 2 triangles in the network.",
            "answer": "$$\n\\boxed{2}\n$$"
        },
        {
            "introduction": "Not all nodes in a network are created equal; some hold positions of greater influence or control over the flow of information. Betweenness centrality is a fundamental metric designed to identify these critical nodes by quantifying their role as bridges along communication pathways. This practice challenges you to work from the formal definition of betweenness centrality and compute it for a small network. By manually identifying the shortest paths, or geodesics, you will develop a concrete intuition for how this measure captures a node's brokerage power, a key skill for analyzing influence and vulnerability in any complex system. ",
            "id": "4131991",
            "problem": "Consider a simple, undirected, unweighted network as a model of information flow in a Complex Adaptive System (CAS), where the network is represented by a graph $G = (V,E)$ with $V = \\{v_1, v_2, v_3, v_4, v_5, v_6\\}$ and $E = \\{(v_1,v_2), (v_2,v_3), (v_1,v_3), (v_2,v_4), (v_3,v_4), (v_4,v_5), (v_5,v_6), (v_4,v_6)\\}$. Paths represent feasible information transmission sequences, and shortest paths represent minimal-delay routes under homogeneous link weights.\n\nStarting from fundamental network definitions, derive the node betweenness centrality as the normalized fraction of shortest paths that pass through a node. Explicitly construct the derivation from:\n- the definition of a path and path length,\n- the notion of a geodesic (shortest path) and the count $\\sigma_{st}$ of geodesics connecting two distinct nodes $s$ and $t$,\n- and the fraction $\\sigma_{st}(v)/\\sigma_{st}$ of geodesics between $s$ and $t$ that pass through an intermediate node $v$.\n\nFormally define the node betweenness centrality $C_B(v)$ for a node $v \\in V$ using a normalization that averages this fraction over all unordered pairs $(s,t)$ with $s \\neq t$, $s \\neq v$, and $t \\neq v$. In addition, state the analogous definition for edge betweenness centrality $C_B(e)$ for an edge $e \\in E$ in terms of the fraction of shortest paths that traverse the edge.\n\nThen compute $C_B(v_i)$ for all nodes $v_i$ with $i \\in \\{1,2,3,4,5,6\\}$ for the given graph. Use the normalization\n$$\nC_B(v) \\;=\\; \\frac{1}{\\binom{N-1}{2}} \\sum_{\\substack{s,t \\in V \\\\ s < t \\\\ s \\neq v, \\; t \\neq v}} \\frac{\\sigma_{st}(v)}{\\sigma_{st}},\n$$\nwhere $N = |V|$. Provide the final numerical values as exact rational numbers. Express the final answer as a single row matrix in the order $(C_B(v_1), C_B(v_2), C_B(v_3), C_B(v_4), C_B(v_5), C_B(v_6))$. No rounding is required and no units are involved.",
            "solution": "A **path** in an unweighted graph is a sequence of vertices where each adjacent pair in the sequence is connected by an edge. The **length** of a path is the number of edges it contains. A **geodesic** is a path of minimum possible length between two nodes. Let $\\sigma_{st}$ be the number of distinct geodesics between nodes $s$ and $t$. Let $\\sigma_{st}(v)$ be the number of those geodesics that pass through an intermediate node $v$.\n\nThe **node betweenness centrality** $C_B(v)$ for a node $v$ is the sum of the fraction of shortest paths that pass through $v$ over all pairs of other nodes, normalized. The problem specifies the formula:\n$$\nC_B(v) = \\frac{1}{\\binom{N-1}{2}} \\sum_{\\substack{s,t \\in V \\\\ s  t \\\\ s \\neq v, \\; t \\neq v}} \\frac{\\sigma_{st}(v)}{\\sigma_{st}},\n$$\nwhere $N = |V|$ is the total number of nodes.\n\nThe analogous definition for **edge betweenness centrality** $C_B(e)$ for an edge $e \\in E$ is the sum of the fraction of shortest paths passing through $e$ over all pairs of nodes, typically normalized by the total number of pairs $\\binom{N}{2}$:\n$$\nC_B(e) = \\frac{1}{\\binom{N}{2}} \\sum_{\\substack{s,t \\in V \\\\ s  t}} \\frac{\\sigma_{st}(e)}{\\sigma_{st}},\n$$\nwhere $\\sigma_{st}(e)$ is the number of shortest paths between $s$ and $t$ containing edge $e$.\n\nFor the given graph, $N=6$. The normalization factor for node betweenness is $\\frac{1}{\\binom{6-1}{2}} = \\frac{1}{\\binom{5}{2}} = \\frac{1}{10}$.\nThe graph's structure consists of two triangles, $\\{v_1, v_2, v_3\\}$ and $\\{v_4, v_5, v_6\\}$, connected by edges $(v_2, v_4)$ and $(v_3, v_4)$.\nThe graph has symmetries: nodes $v_2$ and $v_3$ are structurally equivalent, as are $v_5$ and $v_6$. Therefore, $C_B(v_2) = C_B(v_3)$ and $C_B(v_5) = C_B(v_6)$. We need to compute $C_B(v)$ for the distinct node types represented by $v_1, v_2, v_4, v_5$.\n\nWe enumerate the contributions for each node type:\n\n*   **For $v_1$, $v_5$, and $v_6$:** These nodes are located at the extremities of the graph. For such a node to lie on a geodesic, it must be on a shortest path between its immediate neighbors. For $v_1$, the path $(v_2, v_1, v_3)$ has length 2, while the direct edge $(v_2, v_3)$ creates a path of length 1. Thus, $v_1$ does not lie on any geodesic between other nodes. The same logic applies to $v_5$ and $v_6$. Therefore, their betweenness centrality is zero.\n    $C_B(v_1) = 0$, $C_B(v_5) = 0$, $C_B(v_6) = 0$.\n\n*   **For $v_2$ (and $v_3$):** We sum the contributions $\\sigma_{st}(v_2)/\\sigma_{st}$ over pairs $(s,t)$ from the set $\\{v_1, v_3, v_4, v_5, v_6\\}$.\n    - Pair $(v_1, v_4)$: There are 2 geodesics of length 2: $(v_1,v_2,v_4)$ and $(v_1,v_3,v_4)$. One passes through $v_2$. Contribution: $1/2$.\n    - Pair $(v_1, v_5)$: There are 2 geodesics of length 3: $(v_1,v_2,v_4,v_5)$ and $(v_1,v_3,v_4,v_5)$. One passes through $v_2$. Contribution: $1/2$.\n    - Pair $(v_1, v_6)$: There are 2 geodesics of length 3: $(v_1,v_2,v_4,v_6)$ and $(v_1,v_3,v_4,v_6)$. One passes through $v_2$. Contribution: $1/2$.\n    Shortest paths for other pairs do not pass through $v_2$. The un-normalized sum of contributions is $1/2 + 1/2 + 1/2 = 3/2$.\n    $C_B(v_2) = \\frac{1}{10} \\left( \\frac{3}{2} \\right) = \\frac{3}{20}$. By symmetry, $C_B(v_3) = \\frac{3}{20}$.\n\n*   **For $v_4$:** We sum contributions over pairs $(s,t)$ from $\\{v_1, v_2, v_3, v_5, v_6\\}$. Node $v_4$ is a bridge between the two halves of the graph.\n    - Pair $(v_1, v_5)$: 2 geodesics of length 3, $(v_1,v_2,v_4,v_5)$ and $(v_1,v_3,v_4,v_5)$. Both pass through $v_4$. Contribution: $2/2 = 1$.\n    - Pair $(v_1, v_6)$: 2 geodesics of length 3, $(v_1,v_2,v_4,v_6)$ and $(v_1,v_3,v_4,v_6)$. Both pass through $v_4$. Contribution: $2/2 = 1$.\n    - Pair $(v_2, v_5)$: 1 geodesic of length 2: $(v_2,v_4,v_5)$. Passes through $v_4$. Contribution: $1/1 = 1$.\n    - Pair $(v_2, v_6)$: 1 geodesic of length 2: $(v_2,v_4,v_6)$. Passes through $v_4$. Contribution: $1/1 = 1$.\n    - Pair $(v_3, v_5)$: 1 geodesic of length 2: $(v_3,v_4,v_5)$. Passes through $v_4$. Contribution: $1/1 = 1$.\n    - Pair $(v_3, v_6)$: 1 geodesic of length 2: $(v_3,v_4,v_6)$. Passes through $v_4$. Contribution: $1/1 = 1$.\n    The un-normalized sum is $1+1+1+1+1+1 = 6$.\n    $C_B(v_4) = \\frac{1}{10} (6) = \\frac{6}{10} = \\frac{3}{5}$.\n\nThe final centrality values are:\n$C_B(v_1) = 0$, $C_B(v_2) = 3/20$, $C_B(v_3) = 3/20$, $C_B(v_4) = 3/5$, $C_B(v_5) = 0$, $C_B(v_6) = 0$.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 0  \\frac{3}{20}  \\frac{3}{20}  \\frac{3}{5}  0  0 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "Identifying community structure is a central task in network science, and modularity optimization has long been a dominant method for this purpose. However, even the most powerful tools have limitations, and a skilled modeler must understand them. This advanced practice explores a critical subtlety known as the \"resolution limit\" of modularity, where the method can fail to resolve small but dense communities. By analyzing a \"ring-of-cliques\" graph—a canonical counterexample—you will see firsthand how maximizing a global quality function can sometimes obscure, rather than reveal, the true underlying structure, fostering a crucial critical perspective on algorithmic outputs. ",
            "id": "4131943",
            "problem": "Consider an undirected, unweighted, simple graph constructed as follows. Take $m$ cliques of size $n$ (each clique is a complete graph $K_n$), and arrange them on a cycle so that each clique has exactly one edge to each of its two neighboring cliques; thus the $m$ cliques are connected in a ring by $m$ distinct single inter-clique edges. Assume $m$ is even. Let $A_{ij}$ be the adjacency matrix, $k_i$ the degree of node $i$, and $L$ the total number of edges. Define the modularity $Q$ of a partition $\\{c_i\\}$ by the standard expression\n$$\nQ \\;=\\; \\frac{1}{2L} \\sum_{i,j} \\left( A_{ij} - \\frac{k_i k_j}{2L} \\right) \\delta(c_i, c_j),\n$$\nwhere $\\delta(c_i,c_j)$ is the Kronecker delta, equal to $1$ if $c_i=c_j$ and $0$ otherwise.\n\nConsider two partitions of this ring-of-cliques graph:\n- Partition $\\mathcal{P}_1$: each clique is its own community.\n- Partition $\\mathcal{P}_2$: merge each pair of adjacent cliques into a single community, yielding $m/2$ communities.\n\nStarting from the definition of $Q$ above and using only fundamental properties of graphs and degrees, derive $Q(\\mathcal{P}_1)$ and $Q(\\mathcal{P}_2)$ in closed form. Then determine the exact threshold condition on $m$ and $n$ for which $Q(\\mathcal{P}_2)  Q(\\mathcal{P}_1)$, and provide the critical value $m_c(n)$ such that for all $m  m_c(n)$, modularity optimization strictly prefers merging adjacent cliques (i.e., $\\mathcal{P}_2$ yields larger modularity than $\\mathcal{P}_1$). Express your final answer as a single closed-form expression $m_c(n)$; no rounding is required and no units are involved.",
            "solution": "We first characterize the graph's properties based on the parameters $m$ and $n$.\nThe total number of nodes is $N=mn$.\nThe number of edges within one $K_n$ clique is $\\binom{n}{2}$. With $m$ such cliques and $m$ connecting edges, the total number of edges is:\n$$ L = m \\binom{n}{2} + m = m \\frac{n(n-1)}{2} + m = \\frac{m(n^2-n+2)}{2} $$\nThus, $2L = m(n^2-n+2)$.\n\nIn each clique, $n-2$ nodes are internal (degree $n-1$) and 2 nodes are \"bridge\" nodes (degree $n$). The sum of degrees for a single clique community is $K_c = (n-2)(n-1) + 2n = n^2-n+2$.\n\nWe use the alternative form of modularity $Q$ for a partition $\\mathcal{C} = \\{c_s\\}$:\n$$ Q = \\sum_{s} \\left[ \\frac{L_{in}(c_s)}{L} - \\left( \\frac{K(c_s)}{2L} \\right)^2 \\right] $$\nwhere $L_{in}(c_s)$ is the number of edges within community $c_s$ and $K(c_s)$ is the sum of degrees of nodes in $c_s$.\n\n**Modularity of Partition $\\mathcal{P}_1$**\nIn this partition, there are $m$ communities, each being one of the original cliques. For any one such community $c$:\n-   Internal edges: $L_{in}(c) = \\binom{n}{2} = \\frac{n(n-1)}{2}$.\n-   Sum of degrees: $K(c) = n^2-n+2$.\n\nSince all $m$ communities are identical, the total modularity is:\n$$ Q(\\mathcal{P}_1) = m \\left[ \\frac{L_{in}(c)}{L} - \\left( \\frac{K(c)}{2L} \\right)^2 \\right] = m \\left[ \\frac{n(n-1)/2}{m(n^2-n+2)/2} - \\left( \\frac{n^2-n+2}{m(n^2-n+2)} \\right)^2 \\right] $$\n$$ Q(\\mathcal{P}_1) = m \\left[ \\frac{n(n-1)}{m(n^2-n+2)} - \\frac{1}{m^2} \\right] = \\frac{n^2-n}{n^2-n+2} - \\frac{1}{m} $$\n\n**Modularity of Partition $\\mathcal{P}_2$**\nIn this partition, there are $m/2$ communities, each formed by merging two adjacent cliques. For any one such community $c'$:\n-   Internal edges $L_{in}(c')$ = (edges in two cliques) + (1 connecting edge) = $2 \\binom{n}{2} + 1 = n(n-1)+1 = n^2-n+1$.\n-   Sum of degrees $K(c')$ = sum of degrees for two cliques = $2 \\times K(c) = 2(n^2-n+2)$.\n\nThe total modularity for the $m/2$ identical communities is:\n$$ Q(\\mathcal{P}_2) = \\frac{m}{2} \\left[ \\frac{L_{in}(c')}{L} - \\left( \\frac{K(c')}{2L} \\right)^2 \\right] = \\frac{m}{2} \\left[ \\frac{n^2-n+1}{m(n^2-n+2)/2} - \\left( \\frac{2(n^2-n+2)}{m(n^2-n+2)} \\right)^2 \\right] $$\n$$ Q(\\mathcal{P}_2) = \\frac{m}{2} \\left[ \\frac{2(n^2-n+1)}{m(n^2-n+2)} - \\frac{4}{m^2} \\right] = \\frac{n^2-n+1}{n^2-n+2} - \\frac{2}{m} $$\n\n**Threshold Condition**\nWe find the condition for which $Q(\\mathcal{P}_2) > Q(\\mathcal{P}_1)$:\n$$ \\frac{n^2-n+1}{n^2-n+2} - \\frac{2}{m} > \\frac{n^2-n}{n^2-n+2} - \\frac{1}{m} $$\nRearranging terms:\n$$ \\frac{(n^2-n+1) - (n^2-n)}{n^2-n+2} > \\frac{2}{m} - \\frac{1}{m} $$\n$$ \\frac{1}{n^2-n+2} > \\frac{1}{m} $$\nSince $m > 0$ and $n^2-n+2 > 0$ for $n \\ge 1$, we can take the reciprocal and reverse the inequality:\n$$ m > n^2-n+2 $$\nThe critical value $m_c(n)$ is the threshold where this preference changes. Therefore, for any even integer $m > m_c(n)$, modularity optimization will prefer the merged partition $\\mathcal{P}_2$.\n$$ m_c(n) = n^2-n+2 $$",
            "answer": "$$\\boxed{n^2-n+2}$$"
        }
    ]
}
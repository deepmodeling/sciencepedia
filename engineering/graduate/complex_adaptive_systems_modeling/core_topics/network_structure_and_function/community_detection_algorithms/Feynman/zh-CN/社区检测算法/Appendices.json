{
    "hands_on_practices": [
        {
            "introduction": "模块度（Modularity）是评估网络社群划分质量的基石。在深入研究各种复杂的社群发现算法之前，亲手计算一个给定划分的模块度是至关重要的一步。这个练习将让你从头开始计算模块度 ，从而深刻理解模块度优化算法的真正目标，以及它是如何量化一个社群结构相对于随机基准模型的“优越性”的。",
            "id": "4118072",
            "problem": "考虑一个加权无向网络，该网络代表一个复杂自适应系统（CAS）中的相互作用。该网络有 $6$ 个节点，无自环，并有一个对称的邻接矩阵 $A$，其元素为 $A_{ij}$（边权重）。邻接矩阵为\n$$\nA \\;=\\;\n\\begin{pmatrix}\n0  4  3  \\frac{1}{2}  0  0 \\\\\n4  0  5  0  \\frac{1}{2}  0 \\\\\n3  5  0  0  0  \\frac{1}{2} \\\\\n\\frac{1}{2}  0  0  0  4  3 \\\\\n0  \\frac{1}{2}  0  4  0  5 \\\\\n0  0  \\frac{1}{2}  3  5  0\n\\end{pmatrix}.\n$$\n节点强度（加权度）如下：\n$$\nk_1 \\;=\\; \\frac{15}{2},\\quad\nk_2 \\;=\\; \\frac{19}{2},\\quad\nk_3 \\;=\\; \\frac{17}{2},\\quad\nk_4 \\;=\\; \\frac{15}{2},\\quad\nk_5 \\;=\\; \\frac{19}{2},\\quad\nk_6 \\;=\\; \\frac{17}{2}.\n$$\n考虑将节点划分为两个社群：$C_1 = \\{1,2,3\\}$ 和 $C_2 = \\{4,5,6\\}$。从模块度的定义出发，即观测到的社群内部权重与在保持强度的加权配置模型（零系综）下的期望值之间的偏差，计算此划分的模块度 $Q$。将 $Q$ 的最终值精确地表示为一个有理数。然后，根据 $Q$ 的符号和大小，简明解释其相对于零系综所揭示的社群结构含义。无需四舍五入。",
            "solution": "首先对问题进行验证。\n\n### 步骤 1：提取已知条件\n- 网络是加权的、无向的，有 $N=6$ 个节点且无自环。\n- 邻接矩阵：\n$$\nA \\;=\\;\n\\begin{pmatrix}\n0  4  3  \\frac{1}{2}  0  0 \\\\\n4  0  5  0  \\frac{1}{2}  0 \\\\\n3  5  0  0  0  \\frac{1}{2} \\\\\n\\frac{1}{2}  0  0  0  4  3 \\\\\n0  \\frac{1}{2}  0  4  0  5 \\\\\n0  0  \\frac{1}{2}  3  5  0\n\\end{pmatrix}\n$$\n- 节点强度（加权度）：\n$$\nk_1 = \\frac{15}{2}, k_2 = \\frac{19}{2}, k_3 = \\frac{17}{2}, k_4 = \\frac{15}{2}, k_5 = \\frac{19}{2}, k_6 = \\frac{17}{2}\n$$\n- 划分为两个社群：$C_1 = \\{1,2,3\\}$ 和 $C_2 = \\{4,5,6\\}$。\n- 任务：计算此划分的模块度 $Q$ 并解释其含义。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学依据**：该问题在复杂网络理论，特别是社群检测方面，有充分的理论基础。邻接矩阵、节点强度和模块度的概念是该领域的标准概念。\n- **适定性**：为计算给定划分的模块度提供了所有必要信息。目标陈述清晰。\n- **一致性检查**：一个关键的验证步骤是确保所提供的节点强度 $k_i$ 与邻接矩阵 $A$ 一致。节点 $i$ 的强度定义为 $k_i = \\sum_{j=1}^{N} A_{ij}$。\n- 对于节点 $1$：$k_1 = A_{12} + A_{13} + A_{14} + A_{15} + A_{16} = 4 + 3 + \\frac{1}{2} + 0 + 0 = \\frac{15}{2}$。这与给定值相符。\n- 对于节点 $2$：$k_2 = A_{21} + A_{23} + A_{24} + A_{25} + A_{26} = 4 + 5 + 0 + \\frac{1}{2} + 0 = \\frac{19}{2}$。这与给定值相符。\n- 对于节点 $3$：$k_3 = A_{31} + A_{32} + A_{34} + A_{35} + A_{36} = 3 + 5 + 0 + 0 + \\frac{1}{2} = \\frac{17}{2}$。这与给定值相符。\n- 对于节点 $4$：$k_4 = A_{41} + A_{42} + A_{43} + A_{45} + A_{46} = \\frac{1}{2} + 0 + 0 + 4 + 3 = \\frac{15}{2}$。这与给定值相符。\n- 对于节点 $5$：$k_5 = A_{51} + A_{52} + A_{53} + A_{54} + A_{56} = 0 + \\frac{1}{2} + 0 + 4 + 5 = \\frac{19}{2}$。这与给定值相符。\n- 对于节点 $6$：$k_6 = A_{61} + A_{62} + A_{63} + A_{64} + A_{65} = 0 + 0 + \\frac{1}{2} + 3 + 5 = \\frac{17}{2}$。这与给定值相符。\n邻接矩阵如题目所述是对称的（$A_{ij} = A_{ji}$），并且对角线上的元素为零（$A_{ii}=0$），这与无自环的无向网络一致。所提供的数据是自洽、一致且科学合理的。\n\n### 步骤 3：结论与行动\n问题有效。将计算解答。\n\n对于加权网络的划分，模块度 $Q$ 定义为：\n$$\nQ = \\frac{1}{2m} \\sum_{i,j} \\left[ A_{ij} - \\frac{k_i k_j}{2m} \\right] \\delta(c_i, c_j)\n$$\n其中 $m$ 是网络中所有边的总权重，$A_{ij}$ 是节点 $i$ 和 $j$ 之间边的权重，$k_i$ 是节点 $i$ 的强度，$c_i$ 是节点 $i$ 所属的社群，而 $\\delta(c_i, c_j)$ 是克罗内克 δ 函数，当节点 $i$ 和 $j$ 在同一社群时为 $1$，否则为 $0$。项 $2m$ 代表邻接矩阵中所有元素的总和，或者等效地，所有节点强度的总和：$2m = \\sum_{i} k_i$。\n\n首先，我们计算 $2m$：\n$$\n2m = \\sum_{i=1}^{6} k_i = k_1 + k_2 + k_3 + k_4 + k_5 + k_6\n$$\n$$\n2m = \\frac{15}{2} + \\frac{19}{2} + \\frac{17}{2} + \\frac{15}{2} + \\frac{19}{2} + \\frac{17}{2} = \\frac{15+19+17+15+19+17}{2} = \\frac{102}{2} = 51\n$$\n因此，网络的总权重为 $m = \\frac{51}{2}$。\n\n模块度公式可以改写为对社群求和的形式：\n$$\nQ = \\sum_{c} \\left[ \\frac{L_c}{2m} - \\left( \\frac{K_c}{2m} \\right)^2 \\right]\n$$\n其中 $L_c = \\sum_{i,j \\in c} A_{ij}$ 是社群 $c$ 内部所有连接（其两端点均在 $c$ 内）的权重之和，而 $K_c = \\sum_{i \\in c} k_i$ 是社群 $c$ 中所有节点的强度之和。\n\n现在我们为给定的两个社群 $C_1 = \\{1,2,3\\}$ 和 $C_2 = \\{4,5,6\\}$ 计算这些量。\n\n对于社群 $C_1$：\n内部连接权重之和 $L_{C_1}$ 为：\n$$\nL_{C_1} = A_{12} + A_{21} + A_{13} + A_{31} + A_{23} + A_{32} = 2(A_{12} + A_{13} + A_{23})\n$$\n$$\nL_{C_1} = 2(4 + 3 + 5) = 2(12) = 24\n$$\n强度之和 $K_{C_1}$ 为：\n$$\nK_{C_1} = k_1 + k_2 + k_3 = \\frac{15}{2} + \\frac{19}{2} + \\frac{17}{2} = \\frac{51}{2}\n$$\n\n对于社群 $C_2$：\n内部连接权重之和 $L_{C_2}$ 为：\n$$\nL_{C_2} = A_{45} + A_{54} + A_{46} + A_{64} + A_{56} + A_{65} = 2(A_{45} + A_{46} + A_{56})\n$$\n$$\nL_{C_2} = 2(4 + 3 + 5) = 2(12) = 24\n$$\n强度之和 $K_{C_2}$ 为：\n$$\nK_{C_2} = k_4 + k_5 + k_6 = \\frac{15}{2} + \\frac{19}{2} + \\frac{17}{2} = \\frac{51}{2}\n$$\n\n现在，我们可以计算模块度 $Q$：\n$$\nQ = \\left[ \\frac{L_{C_1}}{2m} - \\left( \\frac{K_{C_1}}{2m} \\right)^2 \\right] + \\left[ \\frac{L_{C_2}}{2m} - \\left( \\frac{K_{C_2}}{2m} \\right)^2 \\right]\n$$\n代入计算出的值：\n$$\nQ = \\left[ \\frac{24}{51} - \\left( \\frac{51/2}{51} \\right)^2 \\right] + \\left[ \\frac{24}{51} - \\left( \\frac{51/2}{51} \\right)^2 \\right]\n$$\n$$\nQ = 2 \\left[ \\frac{24}{51} - \\left( \\frac{1}{2} \\right)^2 \\right] = 2 \\left[ \\frac{24}{51} - \\frac{1}{4} \\right]\n$$\n$$\nQ = \\frac{48}{51} - \\frac{1}{2}\n$$\n通过将分子和分母除以 $3$ 来简化分数 $\\frac{48}{51}$：\n$$\n\\frac{48}{51} = \\frac{16 \\times 3}{17 \\times 3} = \\frac{16}{17}\n$$\n现在，将其代回 $Q$ 的表达式：\n$$\nQ = \\frac{16}{17} - \\frac{1}{2}\n$$\n为进行分数减法，我们找到一个公分母，即 $17 \\times 2 = 34$。\n$$\nQ = \\frac{16 \\times 2}{17 \\times 2} - \\frac{1 \\times 17}{2 \\times 17} = \\frac{32}{34} - \\frac{17}{34} = \\frac{32 - 17}{34} = \\frac{15}{34}\n$$\n模块度的最终值为 $Q = \\frac{15}{34}$。\n\n这个结果的含义如下：\n模块度 $Q$ 通过比较社群内部的加权边比例与在随机放置边（同时保持节点强度，即配置模型）的情况下预期的比例，来衡量社群划分的强度。\n- $Q > 0$ 的值表明，所提出的社群内部的边比随机预期的要多（或权重更大）。这表明该划分反映了有意义的社群结构。\n- $Q \\approx 0$ 的值意味着社群内部的边数量与具有相同强度分布的随机网络中的预期数量大致相同。\n- $Q  0$ 的值表明该划分比随机划分还要差，社群内部的边比预期的要少。\n\n计算出的值为 $Q = \\frac{15}{34} \\approx 0.441$。这是一个显著的正值。在典型应用中，范围在 $0.3$ 到 $0.7$ 之间的模块度值被认为表示强的社群结构。因此，将网络划分为 $C_1 = \\{1,2,3\\}$ 和 $C_2 = \\{4,5,6\\}$ 代表了一种统计上显著的划分，揭示了强大的社群结构，相对于零模型，每个组内的节点彼此之间的连接远比与另一组节点的连接更为密集。该网络相对于此划分表现出清晰的模块性。",
            "answer": "$$\n\\boxed{\\frac{15}{34}}\n$$"
        },
        {
            "introduction": "理解了如何衡量社群划分的质量后，我们接着探索如何找到一个能最大化模块度的划分。本练习将带你逐步完成Louvain方法的核心步骤，这是一种高效且广受欢迎的“自下而上”的聚合算法 。通过手动计算模块度增益并移动节点，你将对这种贪心优化过程建立起直观的认识，并理解其运作机制。",
            "id": "4118184",
            "problem": "考虑一个无向、无权网络，其节点为 $1,2,3,4,5,6,7$，边由集合 $\\{(1,2),(1,3),(2,3),(3,4),(4,1),(5,6),(6,7),(5,7),(4,5)\\}$ 给出。边的总数为 $m$，节点 $i$ 的度记为 $k_i$。从每个节点自成一个社群的划分开始，执行一轮 Louvain 模块度优化方法，过程如下。在第一阶段，按固定顺序 $1,2,3,4,5,6,7$ 遍历所有节点。对于每个节点 $i$，考虑将其移入其邻居节点所在的社群，并执行能使模块度 $Q$ 严格增加量最大的移动；如果移动到多个目标社群产生的严格正增量相同，则选择该社群中节点索引最小的那个作为目标；如果没有可用的严格正增量，则不移动该节点。完成一次遍历后，以相同的固定顺序重复遍历，直到完整的一次遍历不再产生任何移动。在第二阶段，将第一阶段结束时找到的社群聚合成超节点以形成粗化网络，但不对聚合后的网络执行任何进一步的局部移动。\n\n使用无向网络的模块度 $Q$ 的标准定义，确定在第一阶段结束时（聚合之前）找到的划分的模块度 $Q$ 的精确值。请将最终答案表示为单一的最简分数。无需四舍五入。",
            "solution": "用户希望找到通过一轮 Louvain 方法确定的网络划分的模块度。\n\n### 第 1 步：问题验证\n\n该问题是形式化定义且自洽的。它提供了对网络、初始条件以及要应用的社群检测算法的精确、确定性步骤的完整描述。目标是为最终的划分计算一个明确定义的度量——模块度。所使用的概念——网络、节点、边、模块度和 Louvain 方法——都是网络科学和复杂系统建模中的标准概念。该问题具有科学依据、适定且客观。它不包含任何矛盾、歧义或缺失信息。该问题是有效的，可以按所述方式求解。\n\n### 第 2 步：准备工作：网络属性与模块度\n\n网络由节点集 $V = \\{1, 2, 3, 4, 5, 6, 7\\}$ 和边集 $E = \\{(1,2), (1,3), (2,3), (3,4), (4,1), (5,6), (6,7), (5,7), (4,5)\\}$ 定义。\n边的总数为 $m = 9$。所有链接的总权重为 $2m=18$。\n\n各节点的度为：\n- $k_1 = 3$ (邻居: $2, 3, 4$)\n- $k_2 = 2$ (邻居: $1, 3$)\n- $k_3 = 3$ (邻居: $1, 2, 4$)\n- $k_4 = 3$ (邻居: $1, 3, 5$)\n- $k_5 = 3$ (邻居: $4, 6, 7$)\n- $k_6 = 2$ (邻居: $5, 7$)\n- $k_7 = 2$ (邻居: $5, 6$)\n度的总和为 $\\sum k_i = 3+2+3+3+3+2+2 = 18 = 2m$，这与预期一致。\n\n一个划分的模块度 $Q$ 由下式给出：\n$$Q = \\sum_{c} \\left[ \\frac{L_c}{m} - \\left( \\frac{K_c}{2m} \\right)^2 \\right]$$\n其中 $L_c$ 是完全位于社群 $c$ 内部的边数，而 $K_c$ 是社群 $c$ 中节点的度之和。\n\n将节点 $i$ 从社群 $D$ 移动到社群 $C$ 时，模块度的变化量 $\\Delta Q$ 为：\n$$\\Delta Q = \\left[ \\frac{k_{i,C}}{m} - \\frac{k_i K_C}{2m^2} \\right] - \\left[ \\frac{k_{i,D_{rem}}}{m} - \\frac{k_i (K_D-k_i)}{2m^2} \\right] = \\frac{k_{i,C} - k_{i,D_{rem}}}{m} - \\frac{k_i (K_C - K_D + k_i)}{2m^2}$$\n其中 $k_{i,C}$ 是连接节点 $i$ 与社群 $C$ 中节点的边数，而 $k_{i,D_{rem}}$ 是连接节点 $i$ 与其原社群 $D$ 中其余节点的边数。在第一阶段，我们从每个节点自成一个社群开始，因此 $D = \\{i\\}$ 且 $k_{i,D_{rem}}=0$, $K_D=k_i$。公式简化为：\n$$\\Delta Q = \\frac{k_{i,C}}{m} - \\frac{k_i K_C}{2m^2}$$\n\n### 第 3 步：Louvain 方法 - 第一阶段\n\n我们从每个节点自成一个社群开始：$\\mathcal{C}_0 = \\{\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}, \\{5\\}, \\{6\\}, \\{7\\}\\}$。我们按照顺序 $1,2,3,4,5,6,7$ 遍历节点，直到没有节点移动为止。\n\n**第 1 轮遍历：**\n- **节点 1 ($k_1=3$)：** 邻居是 $2,3,4$。\n    - 移至节点 $2$ 的社群 ($\\{2\\}$)：$C=\\{2\\}$, $K_C=k_2=2$, $k_{1,C}=1$。 $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 2}{2 \\cdot 9^2} = \\frac{1}{9} - \\frac{6}{162} = \\frac{18-6}{162} = \\frac{12}{162} = \\frac{2}{27}$。\n    - 移至节点 $3$ 的社群 ($\\{3\\}$)：$C=\\{3\\}$, $K_C=k_3=3$, $k_{1,C}=1$。 $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 3}{162} = \\frac{18-9}{162} = \\frac{9}{162} = \\frac{1}{18}$。\n    - 移至节点 $4$ 的社群 ($\\{4\\}$)：$C=\\{4\\}$, $K_C=k_4=3$, $k_{1,C}=1$。 $\\Delta Q = \\frac{1}{18}$。\n    - 最大的严格正 $\\Delta Q$ 是 $\\frac{2}{27}$。**将节点 1 移至社群 $\\{2\\}$**。\n    - 社群：$\\mathcal{C} = \\{\\{1,2\\}, \\{3\\}, \\{4\\}, \\{5\\}, \\{6\\}, \\{7\\}\\}$。\n\n- **节点 2 ($k_2=2$)：** 在 $\\{1,2\\}$ 中。邻居是 $1,3$。$1$ 在其社群 $\\{1,2\\}$ 中。\n    - 移至节点 $3$ 的社群 ($\\{3\\}$)：$D=\\{1,2\\}$, $C=\\{3\\}$。$K_D=k_1+k_2=5$, $K_C=k_3=3$。$k_{2,D_{rem}}=1$ (到 $1$ 的边)，$k_{2,C}=1$ (到 $3$ 的边)。\n    - $\\Delta Q = \\frac{1-1}{9} - \\frac{2(3-5+2)}{162} = 0$。不是严格正增长。**不移动**。\n\n- **节点 3 ($k_3=3$)：** 在 $\\{3\\}$ 中。邻居是 $1,2,4$。\n    - 移至节点 $1,2$ 的社群 ($\\{1,2\\}$)：$C=\\{1,2\\}$, $K_C=5$, $k_{3,C}=2$ (到 $1,2$ 的边)。\n    - $\\Delta Q = \\frac{2}{9} - \\frac{3 \\cdot 5}{162} = \\frac{36-15}{162} = \\frac{21}{162} = \\frac{7}{54}$。\n    - 移至节点 $4$ 的社群 ($\\{4\\}$)：$C=\\{4\\}$, $K_C=3$, $k_{3,C}=1$。\n    - $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 3}{162} = \\frac{9}{162} = \\frac{1}{18}$。\n    - 最大 $\\Delta Q$ 是 $\\frac{7}{54}$。**将节点 3 移至社群 $\\{1,2\\}$**。\n    - 社群：$\\mathcal{C} = \\{\\{1,2,3\\}, \\{4\\}, \\{5\\}, \\{6\\}, \\{7\\}\\}$。\n\n- **节点 4 ($k_4=3$)：** 在 $\\{4\\}$ 中。邻居是 $1,3,5$。\n    - 移至 $\\{1,2,3\\}$：$C=\\{1,2,3\\}$, $K_C=k_1+k_2+k_3=8$, $k_{4,C}=2$ (到 $1,3$)。 $\\Delta Q = \\frac{2}{9} - \\frac{3 \\cdot 8}{162} = \\frac{36-24}{162} = \\frac{12}{162} = \\frac{2}{27}$。\n    - 移至 $\\{5\\}$：$C=\\{5\\}$, $K_C=k_5=3$, $k_{4,C}=1$。 $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 3}{162} = \\frac{9}{162} = \\frac{1}{18}$。\n    - 最大 $\\Delta Q$ 是 $\\frac{2}{27}$。**将节点 4 移至社群 $\\{1,2,3\\}$**。\n    - 社群：$\\mathcal{C} = \\{\\{1,2,3,4\\}, \\{5\\}, \\{6\\}, \\{7\\}\\}$。\n\n- **节点 5 ($k_5=3$)：** 在 $\\{5\\}$ 中。邻居是 $4,6,7$。\n    - 移至 $\\{1,2,3,4\\}$：$C=\\{1,2,3,4\\}$, $K_C=11$, $k_{5,C}=1$ (到 $4$)。 $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 11}{162} = \\frac{18-33}{162}  0$。\n    - 移至 $\\{6\\}$：$C=\\{6\\}$, $K_C=k_6=2$, $k_{5,C}=1$。 $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 2}{162} = \\frac{12}{162} = \\frac{2}{27}$。\n    - 移至 $\\{7\\}$：$C=\\{7\\}$, $K_C=k_7=2$, $k_{5,C}=1$。 $\\Delta Q = \\frac{2}{27}$。\n    - 最大 $\\Delta Q > 0$ 出现并列。目标社群为 $\\{6\\}$ (标签 $6$) 和 $\\{7\\}$ (标签 $7$)。最小的标签是 $6$。**将节点 5 移至社群 $\\{6\\}$**。\n    - 社群：$\\mathcal{C} = \\{\\{1,2,3,4\\}, \\{5,6\\}, \\{7\\}\\}$。\n\n- **节点 6 ($k_6=2$)：** 在 $\\{5,6\\}$ 中。邻居是 $5,7$。$5$ 在其社群中。\n    - 移至 $\\{7\\}$：$D=\\{5,6\\}$, $C=\\{7\\}$。$K_D=k_5+k_6=5$, $K_C=k_7=2$。$k_{6,D_{rem}}=1$ (到 $5$)， $k_{6,C}=1$ (到 $7$)。\n    - $\\Delta Q = \\frac{1-1}{9} - \\frac{2(2-5+2)}{162} = 0 - \\frac{-2}{162} = \\frac{2}{162} = \\frac{1}{81}$。\n    - 严格为正。**将节点 6 移至社群 $\\{7\\}$**。\n    - 社群：$\\mathcal{C} = \\{\\{1,2,3,4\\}, \\{5\\}, \\{6,7\\}\\}$。\n\n- **节点 7 ($k_7=2$)：** 在 $\\{6,7\\}$ 中。邻居是 $5,6$。$6$ 在其社群中。\n    - 移至 $\\{5\\}$：$D=\\{6,7\\}$, $C=\\{5\\}$。$K_D=k_6+k_7=4$, $K_C=k_5=3$。$k_{7,D_{rem}}=1$ (到 $6$)， $k_{7,C}=1$ (到 $5$)。\n    - $\\Delta Q = \\frac{1-1}{9} - \\frac{2(3-4+2)}{162} = 0 - \\frac{2}{162}  0$。**不移动**。\n\n第 1 轮遍历结束。由于发生了移动，需要进行新一轮遍历。\n\n**第 2 轮遍历：**\n当前社群：$\\mathcal{C} = \\{\\{1,2,3,4\\}, \\{5\\}, \\{6,7\\}\\}$。令 $C_A=\\{1,2,3,4\\}, C_B=\\{5\\}, C_C=\\{6,7\\}$。\n$K_A = 11$, $K_B=3$, $K_C=4$。\n- **节点 1, 2, 3：** 邻居都在其自己的社群 $C_A$ 中。没有可能的移动。\n- **节点 4 ($k_4=3$)：** 在 $C_A$ 中。邻居 $5$ 在 $C_B$ 中。\n    - 移至 $C_B$：$D=C_A, C=C_B$。$k_{4,D_{rem}}=2, k_{4,C}=1$。$K_D=11, K_C=3$。\n    - $\\Delta Q = \\frac{1-2}{9} - \\frac{3(3-11+3)}{162} = -\\frac{1}{9} - \\frac{-15}{162} = -\\frac{18}{162} + \\frac{15}{162}  0$。**不移动**。\n- **节点 5 ($k_5=3$)：** 在 $C_B$ 中。邻居是 $4,6,7$。\n    - 移至 $C_A=\\{1,2,3,4\\}$：$C=C_A$, $K_C=11$, $k_{5,C}=1$ (到 $4$)。 $\\Delta Q = \\frac{1}{9} - \\frac{3 \\cdot 11}{162}  0$。\n    - 移至 $C_C=\\{6,7\\}$：$C=C_C$, $K_C=4$, $k_{5,C}=2$ (到 $6,7$)。 $\\Delta Q = \\frac{2}{9} - \\frac{3 \\cdot 4}{162} = \\frac{36-12}{162} = \\frac{24}{162} = \\frac{4}{27} > 0$。\n    - **将节点 5 移至社群 $C_C$**。\n    - 社群：$\\mathcal{C} = \\{\\{1,2,3,4\\}, \\{5,6,7\\}\\}$。\n- **节点 6, 7：** 现在在社群 $\\{5,6,7\\}$ 中。所有邻居都在社群内部。没有移动。\n\n第 2 轮遍历结束。由于发生了移动，需要进行新一轮遍历。\n\n**第 3 轮遍历：**\n当前社群：$\\mathcal{C} = \\{\\{1,2,3,4\\}, \\{5,6,7\\}\\}$。令 $C_X=\\{1,2,3,4\\}, C_Y=\\{5,6,7\\}$。\n$K_X = 11$, $K_Y=7$。\n- **节点 1, 2, 3, 6, 7：** 所有邻居都在社群内部。没有移动。\n- **节点 4 ($k_4=3$)：** 在 $C_X$ 中。邻居 $5$ 在 $C_Y$ 中。\n    - 移至 $C_Y$：$D=C_X, C=C_Y$。$k_{4,D_{rem}}=2, k_{4,C}=1$。$K_D=11, K_C=7$。\n    - $\\Delta Q = \\frac{1-2}{9} - \\frac{3(7-11+3)}{162} = -\\frac{1}{9} - \\frac{-3}{162} = -\\frac{18}{162} + \\frac{3}{162}  0$。**不移动**。\n- **节点 5 ($k_5=3$)：** 在 $C_Y$ 中。邻居 $4$ 在 $C_X$ 中。\n    - 移至 $C_X$：$D=C_Y, C=C_X$。$k_{5,D_{rem}}=2, k_{5,C}=1$。$K_D=7, K_C=11$。\n    - $\\Delta Q = \\frac{1-2}{9} - \\frac{3(11-7+3)}{162} = -\\frac{1}{9} - \\frac{21}{162}  0$。**不移动**。\n\n在第 3 轮遍历中没有发生移动。算法的第一阶段终止。\n\n### 第 4 步：最终模块度计算\n最终划分为 $\\mathcal{C}_{final} = \\{C_X, C_Y\\}$，其中 $C_X = \\{1,2,3,4\\}$ 且 $C_Y = \\{5,6,7\\}$。\n我们计算模块度公式 $Q = \\sum_{c} \\left[ \\frac{L_c}{m} - \\left( \\frac{K_c}{2m} \\right)^2 \\right]$ 的各项。\n\n对于社群 $C_X = \\{1,2,3,4\\}$：\n- 内部边：$\\{(1,2), (1,3), (2,3), (3,4), (4,1)\\}$。所以，$L_{C_X} = 5$。\n- 度之和：$K_{C_X} = k_1+k_2+k_3+k_4 = 3+2+3+3 = 11$。\n- 对 $Q$ 的贡献：$\\frac{5}{9} - \\left(\\frac{11}{18}\\right)^2$。\n\n对于社群 $C_Y = \\{5,6,7\\}$：\n- 内部边：$\\{(5,6), (6,7), (5,7)\\}$。所以，$L_{C_Y} = 3$。\n- 度之和：$K_{C_Y} = k_5+k_6+k_7 = 3+2+2 = 7$。\n- 对 $Q$ 的贡献：$\\frac{3}{9} - \\left(\\frac{7}{18}\\right)^2 = \\frac{1}{3} - \\left(\\frac{7}{18}\\right)^2$。\n\n总模块度为：\n$$Q = \\left( \\frac{5}{9} - \\frac{11^2}{18^2} \\right) + \\left( \\frac{1}{3} - \\frac{7^2}{18^2} \\right)$$\n$$Q = \\frac{5}{9} + \\frac{3}{9} - \\left( \\frac{121}{324} + \\frac{49}{324} \\right)$$\n$$Q = \\frac{8}{9} - \\frac{170}{324}$$\n为了进行减法，我们使用公分母 $324 = 9 \\times 36$：\n$$Q = \\frac{8 \\times 36}{324} - \\frac{170}{324} = \\frac{288 - 170}{324} = \\frac{118}{324}$$\n将分子和分母同除以 $2$ 来简化分数：\n$$Q = \\frac{59}{162}$$\n分子 $59$ 是一个质数。$162 = 2 \\times 3^4$。因此，该分数是最简形式。",
            "answer": "$$\\boxed{\\frac{59}{162}}$$"
        },
        {
            "introduction": "作为与“自下而上”的Louvain方法对比，我们现在来实践一种“自上而下”的分裂式方法。本练习运用了Girvan-Newman算法的核心思想：通过识别并移除网络中作为社群之间“桥梁”的最重要的边来揭示社群结构 。这个实践将边的结构重要性（以边介数中心性衡量）与社群发现的过程直接联系起来，展示了一种完全不同的算法范式。",
            "id": "4118212",
            "problem": "考虑一个无向无权网络，其顶点集为 $\\{1,2,3,4,5,6,7\\}$，边集为 $\\{(1,2),(1,3),(2,3),(2,4),(3,4),(4,5),(5,6),(5,7),(6,7)\\}$。使用以下基本定义。\n\n- 边 $(i,j)$ 的边介数中心性（edge betweenness centrality），记为 $b(i,j)$，定义为 $b(i,j) = \\sum_{\\{s,t\\}\\subset V,\\, s\\neq t} \\frac{\\sigma_{st}(i,j)}{\\sigma_{st}}$，其中 $\\sigma_{st}$ 是 $s$ 和 $t$ 之间最短路径的数量，而 $\\sigma_{st}(i,j)$ 是这些最短路径中经过边 $(i,j)$ 的数量。对于一对顶点之间的多条最短路径，每条路径的贡献相等，因此使用分数 $\\frac{\\sigma_{st}(i,j)}{\\sigma_{st}}$。\n\n- 将顶点划分为社群 $\\{c\\}$ 的模块度（modularity），记为 $Q$，对于一个无向网络定义为 $Q = \\frac{1}{2m}\\sum_{i,j}\\left(A_{ij} - \\frac{k_i k_j}{2m}\\right)\\delta(c_i,c_j)$，其中 $A_{ij}$ 是邻接矩阵（如果 $(i,j)\\in E$ 则 $A_{ij}=1$，否则 $A_{ij}=0$），$k_i$ 是顶点 $i$ 的度，$m$ 是总边数，$\\delta(c_i,c_j)$ 在 $i$ 和 $j$ 属于同一社群时为 1，否则为 0。\n\n任务：\n1. 计算给定网络中每条边的边介数中心性 $b(i,j)$。\n2. 移除具有最高介数中心性的那条边。让由此产生的两个连通分量定义为社群。\n3. 使用上述模块度定义，在修改后的网络（移除边之后）上评估此双社群划分的模块度 $Q$，并以最简有理数形式提供其精确值。将最终答案表示为无量纲量。无需四舍五入；提供精确的解析值。",
            "solution": "该问题是良定的，有科学依据，并包含所有必要的信息和定义，可以着手求解一个唯一且可验证的解。\n\n该问题包括三个连续的任务：\n1.  计算给定网络中所有边的边介数中心性。\n2.  移除具有最高介数中心性的边，并识别出由此产生的社群。\n3.  在移除边后的网络上计算此划分的模块度。\n\n设顶点集为 $V = \\{1, 2, 3, 4, 5, 6, 7\\}$，边集为 $E = \\{(1,2), (1,3), (2,3), (2,4), (3,4), (4,5), (5,6), (5,7), (6,7)\\}$。顶点总数为 $N=7$，原始网络中的总边数为 $m=9$。该图由两个三角形结构 $\\{1,2,3\\}$ 和 $\\{5,6,7\\}$ 组成，通过路径 $2-4-5$ 和 $3-4-5$ 连接。\n\n**第1部分：边介数中心性计算**\n\n边介数中心性由 $b(i,j) = \\sum_{\\{s,t\\}\\subset V,\\, s\\neq t} \\frac{\\sigma_{st}(i,j)}{\\sigma_{st}}$ 给出。我们必须对所有 $\\binom{7}{2} = 21$ 个不同的顶点对，将每条边的贡献相加。首先，我们为所有顶点对 $\\{s,t\\}$ 识别出最短路径及其数量 ($\\sigma_{st}$)。\n\n-   在 $\\{1,2,3\\}$ 或 $\\{5,6,7\\}$ 内部的顶点对：最短路径是直接的边（长度为 $1$）。例如，对于 $\\{1,2\\}$，路径是 $1-2$，$\\sigma_{1,2}=1$。\n-   $\\{1,2,3,4\\}$ 和 $\\{5,6,7\\}$ 之间的顶点对：所有最短路径都必须穿过涉及边 $(4,5)$ 的桥状结构。\n-   其他顶点对：我们系统地找出所有最短路径。例如，对于 $\\{1,4\\}$，路径是 $1-2-4$ 和 $1-3-4$，两者长度均为 $2$，所以 $\\sigma_{1,4}=2$。\n\n我们接下来计算每条边 $(i,j) \\in E$ 的 $b(i,j)$。\n\n-   **边 $(4,5)$**：这条边是组分 $\\{1,2,3,4\\}$ 和 $\\{5,6,7\\}$ 之间的唯一连接。任何从顶点 $s \\in \\{1,2,3,4\\}$ 到顶点 $t \\in \\{5,6,7\\}$ 的最短路径都必须经过 $(4,5)$。对于任何这样的顶点对，$\\sigma_{st}(4,5) = \\sigma_{st}$，所以贡献为 $1$。共有 $4 \\times 3 = 12$ 对这样的顶点对。\n    因此，$b(4,5) = \\sum_{s \\in \\{1,2,3,4\\}, t \\in \\{5,6,7\\}} 1 = 4 \\times 3 = 12$。\n\n-   **边 $(2,4)$ 和 $(3,4)$**：根据对称性，$b(2,4) = b(3,4)$。我们来计算 $b(2,4)$。经过 $(2,4)$ 的最短路径有：\n    -   $\\{2,4\\}$：1条路径 ($2-4$)，贡献 $1/1 = 1$。\n    -   $\\{2,5\\}$：1条路径 ($2-4-5$)，贡献 $1/1 = 1$。\n    -   $\\{2,6\\}$：1条路径 ($2-4-5-6$)，贡献 $1/1 = 1$。\n    -   $\\{2,7\\}$：1条路径 ($2-4-5-7$)，贡献 $1/1 = 1$。\n    -   $\\{1,4\\}$：2条路径 ($1-2-4, 1-3-4$)，其中一条使用 $(2,4)$，贡献 $1/2$。\n    -   $\\{1,5\\}$：2条路径 ($1-2-4-5, 1-3-4-5$)，其中一条使用 $(2,4)$，贡献 $1/2$。\n    -   $\\{1,6\\}$：2条路径 ($1-2-4-5-6, 1-3-4-5-6$)，其中一条使用 $(2,4)$，贡献 $1/2$。\n    -   $\\{1,7\\}$：2条路径 ($1-2-4-5-7, 1-3-4-5-7$)，其中一条使用 $(2,4)$，贡献 $1/2$。\n    贡献求和：$b(2,4) = 1 + 1 + 1 + 1 + \\frac{1}{2} + \\frac{1}{2} + \\frac{1}{2} + \\frac{1}{2} = 4 + 4(\\frac{1}{2}) = 6$。\n    因此，$b(3,4) = 6$。\n\n-   **边 $(1,2)$ 和 $(1,3)$**：根据对称性，$b(1,2) = b(1,3)$。我们来计算 $b(1,2)$。经过 $(1,2)$ 的最短路径有：\n    -   $\\{1,2\\}$：1条路径 ($1-2$)，贡献 $1$。\n    -   $\\{1,4\\}$：2条路径 ($1-2-4, 1-3-4$)，一条使用 $(1,2)$，贡献 $1/2$。\n    -   $\\{1,5\\}$：2条路径 ($1-2-4-5, 1-3-4-5$)，一条使用 $(1,2)$，贡献 $1/2$。\n    -   $\\{1,6\\}$：2条路径 ($1-2-4-5-6, 1-3-4-5-6$)，一条使用 $(1,2)$，贡献 $1/2$。\n    -   $\\{1,7\\}$：2条路径 ($1-2-4-5-7, 1-3-4-5-7$)，一条使用 $(1,2)$，贡献 $1/2$。\n    贡献求和：$b(1,2) = 1 + 4(\\frac{1}{2}) = 3$。因此，$b(1,3)=3$。\n\n-   **边 $(5,6)$ 和 $(5,7)$**：根据对称性，$b(5,6)=b(5,7)$。我们来计算 $b(5,6)$。经过 $(5,6)$ 的最短路径必须以 $6$ 为一个端点。另一个端点必须是到 $6$ 的最短路径经过 $5$ 的节点。这对于 $\\{1,2,3,4,5\\}$ 中的所有节点都成立。\n    -   $\\{5,6\\}$：1条路径 ($5-6$)，贡献 $1$。\n    -   $\\{4,6\\}$：1条路径 ($4-5-6$)，贡献 $1$。\n    -   $\\{3,6\\}$：1条路径 ($3-4-5-6$)，贡献 $1$。\n    -   $\\{2,6\\}$：1条路径 ($2-4-5-6$)，贡献 $1$。\n    -   $\\{1,6\\}$：2条路径 ($1-2-4-5-6, 1-3-4-5-6$)，都在通过 $5$ 之后使用 $(5,6)$。贡献为 $\\sigma_{1,6}(5,6)/\\sigma_{1,6} = 2/2=1$。\n    贡献求和：$b(5,6) = 1+1+1+1+1=5$。因此，$b(5,7)=5$。\n\n-   **边 $(2,3)$ 和 $(6,7)$**：这两条边分别是团 $\\{1,2,3\\}$ 和 $\\{5,6,7\\}$ 的一部分。对于任意顶点对 $\\{s,t\\}$，如果一条最短路径使用 $(2,3)$，那么 $s...-2-3-...t$ 无法通过 $s...-2-1-3-...t$ 改道，因为后一条路径更长。然而，要成为最短路径，路径中不能包含“捷径”。对于任意一条经过 $(2,3)$ 连接节点 $s$ 和 $t$ 的路径，如果 $s=1$，那么到达 $t=3$ 的路径 $1-2-3$ 不是最短路径，因为存在更短的路径 $1-3$。可以证明，对于任何 $\\{s,t\\}$，除非 $\\{s,t\\}=\\{2,3\\}$，否则没有最短路径会经过边 $(2,3)$。同样的逻辑也适用于边 $(6,7)$。\n    -   $b(2,3)$：只有顶点对 $\\{2,3\\}$ 本身的路径会经过这条边。贡献为 $1$。所以 $b(2,3)=1$。\n    -   $b(6,7)$：只有 $\\{6,7\\}$ 的路径会经过这条边。贡献为 $1$。所以 $b(6,7)=1$。\n\n边介数值总结：\n$b(1,2)=3$, $b(1,3)=3$, $b(2,3)=1$, $b(2,4)=6$, $b(3,4)=6$, $b(4,5)=12$, $b(5,6)=5$, $b(5,7)=5$, $b(6,7)=1$。\n\n**第2部分：社群划分**\n\n具有最高介数中心性的单条边是 $(4,5)$，其值为 $b(4,5)=12$。我们移除这条边。网络分裂成两个不相交的连通分量，我们将其定义为我们的社群：\n-   社群 $c_1=\\{1,2,3,4\\}$\n-   社群 $c_2=\\{5,6,7\\}$\n\n**第3部分：模块度计算**\n\n问题要求在**修改后的网络**上计算此划分的模块度 $Q$，即在移除边 $(4,5)$ 之后。\n模块度公式为 $Q = \\frac{1}{2m'}\\sum_{i,j}\\left(A'_{ij} - \\frac{k'_i k'_j}{2m'}\\right)\\delta(c_i,c_j)$，其中带撇的变量指的是修改后的网络。\n\n修改后的网络有 $m' = m - 1 = 9 - 1 = 8$ 条边，所以 $2m'=16$。\n修改后网络中的度 $k'_i$ 为：\n-   $k'_1 = 2$\n-   $k'_2 = 3$\n-   $k'_3 = 3$\n-   $k'_4 = k_4 - 1 = 3 - 1 = 2$\n-   $k'_5 = k_5 - 1 = 3 - 1 = 2$\n-   $k'_6 = 2$\n-   $k'_7 = 2$\n\n我们可以将 $Q$ 重写为对社群的求和：$Q = \\sum_k \\left( \\frac{L_k}{m'} - \\left( \\frac{K_k}{2m'} \\right)^2 \\right)$，其中 $L_k$ 是社群 $k$ 内部边的数量，$K_k$ 是社群 $k$ 中节点度的总和。\n\n对于社群 $c_1=\\{1,2,3,4\\}$：\n-   内部边为 $(1,2), (1,3), (2,3), (2,4), (3,4)$。所以，$L_1=5$。\n-   度的总和为 $K_1 = k'_1+k'_2+k'_3+k'_4 = 2+3+3+2 = 10$。\n-   来自 $c_1$ 的贡献是 $\\frac{L_1}{m'} - \\left( \\frac{K_1}{2m'} \\right)^2 = \\frac{5}{8} - \\left( \\frac{10}{16} \\right)^2 = \\frac{5}{8} - \\left( \\frac{5}{8} \\right)^2 = \\frac{5}{8} - \\frac{25}{64} = \\frac{40-25}{64} = \\frac{15}{64}$。\n\n对于社群 $c_2=\\{5,6,7\\}$：\n-   内部边为 $(5,6), (5,7), (6,7)$。所以，$L_2=3$。\n-   度的总和为 $K_2 = k'_5+k'_6+k'_7 = 2+2+2 = 6$。\n-   来自 $c_2$ 的贡献是 $\\frac{L_2}{m'} - \\left( \\frac{K_2}{2m'} \\right)^2 = \\frac{3}{8} - \\left( \\frac{6}{16} \\right)^2 = \\frac{3}{8} - \\left( \\frac{3}{8} \\right)^2 = \\frac{3}{8} - \\frac{9}{64} = \\frac{24-9}{64} = \\frac{15}{64}$。\n\n总模块度是这些贡献的总和：\n$Q = \\frac{15}{64} + \\frac{15}{64} = \\frac{30}{64}$。\n该分数化简为 $Q=\\frac{15}{32}$。",
            "answer": "$$\\boxed{\\frac{15}{32}}$$"
        }
    ]
}
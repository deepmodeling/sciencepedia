{"hands_on_practices": [{"introduction": "在记忆和应用一个数学工具之前，理解其构造的内在逻辑至关重要。这个练习 [@problem_id:3013379] 旨在挑战你诊断一个在应用高斯引理时常犯的错误，从而迫使你更深入地审视其证明中精妙的对称性论证。通过辨析一个看似合理但实则错误的替代方案，你将巩固对高斯引理为何如此精确构造的理解。", "problem": "设 $p$ 是一个奇素数，设 $a \\in \\mathbb{Z}$ 且 $\\gcd(a,p)=1$。勒让德符号 $\\left(\\frac{a}{p}\\right)$ 定义为：如果 $a$ 是模 $p$ 的二次剩余，则 $\\left(\\frac{a}{p}\\right)=1$；否则 $\\left(\\frac{a}{p}\\right)=-1$。在将 $\\left(\\frac{a}{p}\\right)$ 与一个来自乘积的符号相关联的一条标准路径中，许多证明会考虑当 $1 \\le j \\le \\frac{p-1}{2}$ 时，乘积 $j a$ 模 $p$ 的最小正剩余，然后相对于阈值 $\\frac{p}{2}$ 进行奇偶性计数。\n\n一名学生反之提出将 $j$ 的取值范围扩大到完整的 $1 \\le j \\le p-1$，计算 $j a \\bmod p$ 的最小正剩余中有多少个落在开区间 $\\left(\\frac{p}{2},p\\right)$ 内，并使用这个计数的奇偶性作为 $\\left(\\frac{a}{p}\\right)$ 的代理。请指出这个提议中的确切逻辑错误，并选择能使该计数论证有效的最小修正。\n\n选择唯一的最佳答案。\n\nA. 在完整的范围 $1 \\le j \\le p-1$ 内，$j a \\bmod p$ 的最小正剩余的多重集是 $\\{1,2,\\dots,p-1\\}$ 的一个排列，并且对于每一对 $\\{j,p-j\\}$，对应的剩余 $r_j$ 和 $r_{p-j}$ 满足 $r_{p-j}=p-r_j$。由于 $p$ 是奇数， $r_j$ 和 $r_{p-j}$ 中恰好有一个落在 $\\left(\\frac{p}{2},p\\right)$ 内，因此所提议的计数总为 $\\frac{p-1}{2}$，与 $a$ 无关。因此该方法无法区分二次剩余和非二次剩余。最小的修正是通过将范围限制在 $1 \\le j \\le \\frac{p-1}{2}$ 来打破这种对称性（等价于从每对 $\\{j,p-j\\}$ 中选择一个代表），然后相对于 $\\frac{p}{2}$ 进行奇偶性计数。\n\nB. 唯一的错误是遗漏了 $j=0$。如果对 $0 \\le j \\le p-1$ 的最小正剩余进行计数，并使用超过 $\\frac{p}{2}$ 的个数的奇偶性，该方法无需进一步修改即可生效。\n\nC. 缺陷源于阈值 $\\frac{p}{2}$ 的选择。保持 $1 \\le j \\le p-1$ 不变，但改为计算落在 $\\left(\\frac{p}{3},p\\right)$ 内的最小正剩余的个数，可以对所有奇素数 $p$ 恢复其正确性。\n\nD. 该论证仅在 $p \\equiv 1 \\pmod{4}$ 时失败。当 $p \\equiv 3 \\pmod{4}$ 时，取 $1 \\le j \\le p-1$ 并计算落在 $\\left(\\frac{p}{2},p\\right)$ 内的最小正剩余的个数，确实能得到 $\\left(\\frac{a}{p}\\right)$ 的正确奇偶性。\n\nE. 没有错误：因为乘以 $a$ 会排列模 $p$ 的非零剩余类，所以 $j a \\bmod p$ 的最小正剩余中落在 $\\left(\\frac{p}{2},p\\right)$ 内的个数依赖于 $a$，因此其奇偶性能对所有 $a$ 正确地恢复 $\\left(\\frac{a}{p}\\right)$。", "solution": "用户提供的问题陈述是有效的。这是一个在初等数论领域内，基于既定数学原理的适定问题。\n\n学生的提议是通过以下方式计算勒让德符号 $\\left(\\frac{a}{p}\\right)$：计算当 $j$ 在范围 $1 \\le j \\le p-1$ 内时，$ja \\pmod p$ 的最小正剩余中有多少个落在区间 $\\left(\\frac{p}{2},p\\right)$ 内，然后检查这个计数的奇偶性。\n\n让我们来分析这个提议。\n设 $S = \\{1, 2, \\dots, p-1\\}$。学生考虑的是最小正剩余的多重集 $R_a = \\{ (ja \\pmod p) \\mid j \\in S \\}$。\n由于 $p$ 是素数且 $\\gcd(a,p)=1$，映射 $x \\mapsto ax$ 是模 $p$ 整数乘法群 $(\\mathbb{Z}/p\\mathbb{Z})^\\times$ 的一个自同构。$(\\mathbb{Z}/p\\mathbb{Z})^\\times$ 中元素的最小正代表集恰好是集合 $S$。\n因此，对于任何满足 $\\gcd(a,p)=1$ 的 $a$，剩余集 $R_a$ 仅仅是集合 $S$ 的一个排列。作为集合，它们是相同的：\n$$R_a = \\{1, 2, \\dots, p-1\\}$$\n学生提议计算 $R_a$ 中位于开区间 $\\left(\\frac{p}{2}, p\\right)$ 内的元素数量。设这个数量为 $N$。由于无论 $a$ 取何值，$R_a$ 始终是集合 $\\{1, 2, \\dots, p-1\\}$，所以计数 $N$ 将与 $a$ 无关。\n\n让我们计算 $N$。满足 $1 \\le k \\le p-1$ 和 $\\frac{p}{2}  k  p$ 的整数 $k$ 是从 $\\lfloor \\frac{p}{2} \\rfloor + 1$ 到 $p-1$ 的整数。\n由于 $p$ 是一个奇素数，我们可以写成 $p = 2k_0+1$，其中 $k_0 \\ge 1$ 是某个整数。于是 $\\frac{p-1}{2} = k_0$，并且 $\\frac{p}{2} = k_0 + \\frac{1}{2}$。\n条件变为 $k_0 + \\frac{1}{2}  k  2k_0+1$。满足这个条件的整数是 $k_0+1, k_0+2, \\dots, 2k_0$。\n这些整数的数量是 $N = 2k_0 - (k_0+1) + 1 = k_0$。\n因此，计数总为 $N = k_0 = \\frac{p-1}{2}$。\n\n学生的方法提议 $\\left(\\frac{a}{p}\\right)$ 由 $N$ 的奇偶性给出，具体来说是 $(-1)^N = (-1)^{(p-1)/2}$。\n根据二次剩余理论，这是一个已知结果（作为二次互反律第一补充定律的一部分），即 $\\left(\\frac{-1}{p}\\right) = (-1)^{(p-1)/2}$。\n所以，学生的方法计算的不是 $\\left(\\frac{a}{p}\\right)$，而是 $\\left(\\frac{-1}{p}\\right)$，这是一个与 $a$ 无关的值。对于给定的 $p$，此方法无法区分二次剩余和非二次剩余。这就是确切的逻辑错误。\n\n学生提议所类似的标准方法是高斯引理 (Gauss's Lemma)。高斯引理将 $j$ 的范围限制在 $1 \\le j \\le \\frac{p-1}{2}$。令 $m$ 为当 $j \\in \\{1, \\dots, \\frac{p-1}{2}\\}$ 时，$ja \\pmod p$ 的最小正剩余中大于 $\\frac{p}{2}$ 的个数。那么高斯引理指出 $\\left(\\frac{a}{p}\\right) = (-1)^m$。与学生的计数 $N$ 不同，计数 $m$ *确实*依赖于 $a$。学生方法失败的原因是其对称的范围 $1 \\le j \\le p-1$。对于任何 $j_0 \\in \\{1, \\dots, p-1\\}$，设 $r_{j_0}$ 是 $j_0 a \\pmod p$ 的最小正剩余。那么对于 $j = p - j_0$，其剩余为 $(p-j_0)a \\pmod p \\equiv -j_0 a \\pmod p$，其最小正剩余为 $p-r_{j_0}$。对于 $j=1, \\dots, p-1$，剩余集合 $\\{r_j\\}$ 由成对的 $(r_{j_0}, p-r_{j_0})$ 组成。由于 $p$ 是奇数，$p/2$ 不是整数。对于任何一对 $(r, p-r)$，恰好有一个元素在区间 $\\left(\\frac{p}{2}, p\\right)$ 内。存在 $\\frac{p-1}{2}$ 对这样的下标 $\\{j_0, p-j_0\\}$，因此总计数始终为 $\\frac{p-1}{2}$。将 $j$ 限制在 $1 \\le j \\le \\frac{p-1}{2}$ 会打破这种对称性，并允许进行一个依赖于 $a$ 的计数。\n\n现在，我们评估每个选项。\n\nA. 这个选项正确地指出，剩余集是 $\\{1, 2, \\dots, p-1\\}$ 的一个排列。它正确地识别了对称性：对于每对下标 $\\{j, p-j\\}$，剩余为 $r_j$ 和 $p-r_j$。它正确地得出结论，这意味着这两个剩余中恰好有一个在 $\\left(\\frac{p}{2}, p\\right)$ 内。它正确地推断出，因此总计数始终为 $\\frac{p-1}{2}$，与 $a$ 无关，这是核心错误。然后它正确地指出了最小的修正：将 $j$ 的范围限制在 $1 \\le j \\le \\frac{p-1}{2}$，这打破了对称性，并将有缺陷的论证转变为高斯引理。这个选项是一个完整而准确的分析。这是**正确的**。\n\nB. 这个选项建议包含 $j=0$。乘积 $0 \\cdot a = 0$，所以剩余是 $0$。数字 $0$ 不在区间 $\\left(\\frac{p}{2}, p\\right)$ 内。添加这个值并不会改变该区间内剩余的数量。总数仍为 $\\frac{p-1}{2}$，且该方法仍将与 $a$ 无关。这是**不正确的**。\n\nC. 这个选项建议将阈值从 $\\frac{p}{2}$ 更改为 $\\frac{p}{3}$。如初始分析所示，要计数的剩余集始终是 $\\{1, 2, \\dots, p-1\\}$。计算其中有多少个落在 $\\left(\\frac{p}{3}, p\\right)$ 内将得到一个计数 $(p-1) - \\lfloor\\frac{p}{3}\\rfloor$。这个数字同样与 $a$ 无关。使用完整范围 $1 \\le j \\le p-1$ 的根本缺陷没有得到解决。这是**不正确的**。\n\nD. 这个选项声称该论证仅在 $p \\equiv 1 \\pmod{4}$ 时失败。如前所推导，学生的方法总是得出 $(-1)^{(p-1)/2}$。如果 $p \\equiv 3 \\pmod{4}$，那么 $\\frac{p-1}{2}$ 是奇数，所以该方法的结果总是 $-1$。然而，对于任何素数 $p$，都存在二次剩余 $a$ 使得 $\\left(\\frac{a}{p}\\right)=1$（例如，$a=1$）。因此，该方法对于 $p \\equiv 3 \\pmod{4}$ 的情况同样会失败，就像它在 $p \\equiv 1 \\pmod{4}$ 时失败一样。该说法是错误的。这是**不正确的**。\n\nE. 这个选项声称没有错误。这显然是错误的。它正确地注意到乘以 $a$ 会排列非零剩余类，但得出了错误的结论，即计数因此必须依赖于 $a$。被排列的元素集合是固定的，因此具有某个特定属性（大于 $\\frac{p}{2}$）的元素数量与具体的排列无关。这是**不正确的**。\n\n唯一正确识别错误、解释其来源并提出正确最小修正的选项是A。", "answer": "$$\\boxed{A}$$", "id": "3013379"}, {"introduction": "理论通过应用而焕发生机。这个实践问题 [@problem_id:3013383] 提供了一个具体情景，让你运用与高斯引理和欧拉判别法相关的整套工具。你将学习如何利用勒让德符号的乘法性质，策略性地分解一个符号，并使用相应的补充定律或二次互反律来计算每个部分，从而磨练你的计算技巧。", "problem": "设 $p = 2029$ 是一个奇素数。考虑同余方程 $x^{2} \\equiv -10 \\pmod{p}$ 在模 $p$ 整数环中的可解性。仅使用关于乘法群 $(\\mathbb{Z}/p\\mathbb{Z})^{\\times}$ 中二次剩余的基本原理，结合基于 Gauss 引理的方法以及 Euler 判别法提供的联系，精确计算勒让德符号 $\\left(\\frac{-10}{p}\\right)$ 的值。你的最终答案必须是一个单独的数字。不需要四舍五入。", "solution": "我们从与二次剩余及其勒让德符号相关的核心定义和事实开始。对于一个奇素数 $p$ 和一个整数 $a$ 且 $p \\nmid a$，勒让德符号 $\\left(\\frac{a}{p}\\right)$ 定义为\n$$\n\\left(\\frac{a}{p}\\right) =\n\\begin{cases}\n1  \\text{如果存在 } x \\in \\mathbb{Z} \\text{ 使得 } x^{2} \\equiv a \\pmod{p}, \\\\\n-1  \\text{否则。}\n\\end{cases}\n$$\nEuler 判别法断言\n$$\n\\left(\\frac{a}{p}\\right) \\equiv a^{\\frac{p-1}{2}} \\pmod{p},\n$$\n特别地，当 $p \\nmid a$ 时，$\\left(\\frac{a}{p}\\right) \\in \\{-1,1\\}$。勒让德符号具有乘法性：\n$$\n\\left(\\frac{ab}{p}\\right) = \\left(\\frac{a}{p}\\right)\\left(\\frac{b}{p}\\right),\n$$\n这可以由 Euler 判别法通过以下方式推导出：\n$$\n(ab)^{\\frac{p-1}{2}} \\equiv a^{\\frac{p-1}{2}} b^{\\frac{p-1}{2}} \\pmod{p}.\n$$\n\n我们的任务是计算当 $p = 2029$ 时 $\\left(\\frac{-10}{p}\\right)$ 的值。利用乘法性以及 $-1$、$2$ 和 $5$ 与 $p$ 互素，我们分解得到\n$$\n\\left(\\frac{-10}{p}\\right) = \\left(\\frac{-1}{p}\\right)\\left(\\frac{2}{p}\\right)\\left(\\frac{5}{p}\\right).\n$$\n我们将使用 Gauss 引理来计算每个因子，并在适当的地方使用二次互反律，二次互反律本身也可以由 Gauss 引理建立。\n\nGauss 引理陈述：对于奇素数 $p$ 和整数 $a$ 且 $p \\nmid a$，考虑集合 $a,2a,3a,\\dots,\\frac{p-1}{2}a$ 模 $p$ 的最小绝对剩余。令 $N(a)$ 为这些剩余中严格位于负半区间的数量，等价地，即最小正剩余超过 $\\frac{p}{2}$ 的数量。则\n$$\n\\left(\\frac{a}{p}\\right) = (-1)^{N(a)}.\n$$\n\n1. 通过 Gauss 引理计算 $\\left(\\frac{-1}{p}\\right)$。取 $a = -1$。集合 $\\{-1,-2,\\dots,-\\frac{p-1}{2}\\}$ 的最小正剩余为 $\\{p-1,p-2,\\dots,p - \\frac{p-1}{2}\\}$，它们都超过 $\\frac{p}{2}$。因此 $N(-1) = \\frac{p-1}{2}$，从而\n$$\n\\left(\\frac{-1}{p}\\right) = (-1)^{\\frac{p-1}{2}}.\n$$\n对于 $p = 2029$，我们有 $\\frac{p-1}{2} = \\frac{2028}{2} = 1014$，这是一个偶数，所以\n$$\n\\left(\\frac{-1}{2029}\\right) = 1.\n$$\n\n2. 通过 Gauss 引理计算 $\\left(\\frac{2}{p}\\right)$。取 $a = 2$。考虑序列 $2,4,6,\\dots,2\\cdot\\frac{p-1}{2}$。如果 $2j \\leq \\frac{p}{2}$，则项 $2j$ 的最小绝对剩余是 $2j$（因此被计为正），如果 $2j > \\frac{p}{2}$，则其最小绝对剩余是 $2j - p$（因此被计为负）。因此，数 $N(2)$ 等于满足 $2j > \\frac{p}{2}$（即 $j > \\frac{p}{4}$）的下标 $j$ 的数量，其中 $1 \\leq j \\leq \\frac{p-1}{2}$。因此\n$$\nN(2) = \\frac{p-1}{2} - \\left\\lfloor \\frac{p}{4} \\right\\rfloor.\n$$\n因此，\n$$\n\\left(\\frac{2}{p}\\right) = (-1)^{\\frac{p-1}{2} - \\left\\lfloor \\frac{p}{4} \\right\\rfloor}.\n$$\n为了评估 $N(2)$ 的奇偶性，记 $p = 8m + r$，其中 $r \\in \\{1,3,5,7\\}$。则\n$$\n\\frac{p-1}{2} = 4m + \\frac{r-1}{2}, \\quad \\left\\lfloor \\frac{p}{4} \\right\\rfloor = \\left\\lfloor 2m + \\frac{r}{4} \\right\\rfloor = 2m + \\left\\lfloor \\frac{r}{4} \\right\\rfloor.\n$$\n因此\n$$\nN(2) = (4m + \\tfrac{r-1}{2}) - \\left(2m + \\left\\lfloor \\tfrac{r}{4} \\right\\rfloor \\right) = 2m + \\left(\\tfrac{r-1}{2} - \\left\\lfloor \\tfrac{r}{4} \\right\\rfloor\\right).\n$$\n我们可以检查这四种余数的奇偶性：\n- 如果 $r = 1$，则 $N(2) = 2m + 0$ 是偶数，所以 $\\left(\\frac{2}{p}\\right) = 1$。\n- 如果 $r = 3$，则 $N(2) = 2m + 1$ 是奇数，所以 $\\left(\\frac{2}{p}\\right) = -1$。\n- 如果 $r = 5$，则 $N(2) = 2m + (2 - 1) = 2m+1$ 是奇数，所以 $\\left(\\frac{2}{p}\\right) = -1$。\n- 如果 $r = 7$，则 $N(2) = 2m + (3 - 1) = 2m+2$ 是偶数，所以 $\\left(\\frac{2}{p}\\right) = 1$。\n\n总结一下，\n$$\n\\left(\\frac{2}{p}\\right) =\n\\begin{cases}\n1  \\text{如果 } p \\equiv 1 \\text{ 或 } 7 \\pmod{8}, \\\\\n-1  \\text{如果 } p \\equiv 3 \\text{ 或 } 5 \\pmod{8}.\n\\end{cases}\n$$\n等价地，\n$$\n\\left(\\frac{2}{p}\\right) = (-1)^{\\frac{p^{2}-1}{8}}.\n$$\n对于 $p = 2029$，我们有 $2029 \\equiv 5 \\pmod{8}$，因此\n$$\n\\left(\\frac{2}{2029}\\right) = -1.\n$$\n\n3. 使用二次互反律计算 $\\left(\\frac{5}{p}\\right)$。二次互反律可由 Gauss 引理推导，它指出对于不同的奇素数 $p$ 和 $q$，\n$$\n\\left(\\frac{p}{q}\\right)\\left(\\frac{q}{p}\\right) = (-1)^{\\frac{p-1}{2}\\cdot \\frac{q-1}{2}}.\n$$\n特别地，当 $q \\equiv 1 \\pmod{4}$ 时，符号为 $+1$，所以 $\\left(\\frac{p}{q}\\right) = \\left(\\frac{q}{p}\\right)$。由于 $5 \\equiv 1 \\pmod{4}$，我们得到\n$$\n\\left(\\frac{5}{p}\\right) = \\left(\\frac{p}{5}\\right).\n$$\n为了计算 $\\left(\\frac{p}{5}\\right)$，我们将 $p$ 对 $5$ 取模，并与模 $5$ 的二次剩余（即 $1$ 和 $4$）进行比较。计算 $p \\bmod 5$：$2025$ 可以被 $5$ 整除，所以 $2029 \\equiv 4 \\pmod{5}$。因此\n$$\n\\left(\\frac{p}{5}\\right) = \\left(\\frac{2029}{5}\\right) = \\left(\\frac{4}{5}\\right) = 1,\n$$\n从而\n$$\n\\left(\\frac{5}{2029}\\right) = 1.\n$$\n\n将这三个因子结合起来，\n$$\n\\left(\\frac{-10}{2029}\\right) = \\left(\\frac{-1}{2029}\\right)\\left(\\frac{2}{2029}\\right)\\left(\\frac{5}{2029}\\right) = 1 \\cdot (-1) \\cdot 1 = -1.\n$$\n根据定义解释，同余方程 $x^{2} \\equiv -10 \\pmod{2029}$ 在 $\\mathbb{Z}/2029\\mathbb{Z}$ 中没有解，且勒让德符号的值为 $-1$，符合要求。", "answer": "$$\\boxed{-1}$$", "id": "3013383"}, {"introduction": "在现代数学中，计算验证是建立直觉和确认理论结果的有力工具。这个练习 [@problem_id:3021697] 要求你编写一个程序，对数百个素数来检验二次互反律的补充定律。通过比较欧拉判别法的直接计算结果与源于同余分类规则的预测值，你将对这些基本定理的一致性和威力获得切实的体会。", "problem": "设 $p$ 是一个奇素数。勒让德符号 (Legendre symbol) $\\left(\\frac{a}{p}\\right)$ 对整数 $a$ 定义如下：如果 $a$ 是模 $p$ 的二次剩余且 $a \\not\\equiv 0 \\pmod{p}$，则 $\\left(\\frac{a}{p}\\right)=1$；如果 $a$ 是模 $p$ 的二次非剩余，则 $\\left(\\frac{a}{p}\\right)=-1$；如果 $p$ 整除 $a$，则 $\\left(\\frac{a}{p}\\right)=0$。一个在计算上很有用的特征是欧拉判别法 (Euler's criterion)：对于整数 $a$ 且 $p \\nmid a$，有 $a^{(p-1)/2} \\equiv \\left(\\frac{a}{p}\\right) \\pmod{p}$，因此 $a^{(p-1)/2} \\equiv 1 \\pmod{p}$ 当且仅当 $\\left(\\frac{a}{p}\\right)=1$，而 $a^{(p-1)/2} \\equiv -1 \\pmod{p}$ 当且仅当 $\\left(\\frac{a}{p}\\right)=-1$。\n\n目标是通过比较在所有小于 200 的奇素数 $p$ 上，对特定整数 $a=-1$ 和 $a=2$ 的 $\\left(\\frac{a}{p}\\right)$ 的两个独立计算值，来数值验证二次互反律 (Quadratic Reciprocity) 的补充定律：\n- 通过欧拉判别法直接计算 $\\left(\\frac{a}{p}\\right)$。\n- 根据高斯引理 (Gauss's lemma) 得到的对模 $p$ 的特定剩余集合的奇偶性进行计数论证，从而推导出的同余类分析得到的 $\\left(\\frac{a}{p}\\right)$ 的预测符号。\n\n为了使验证更稳健并测试这些定律的一致性，程序还应包括对 $a=-2$ 的第三个检查，利用了对于整数 $a$ 和 $b$ 且 $p \\nmid ab$ 时有 $\\left(\\frac{ab}{p}\\right)=\\left(\\frac{a}{p}\\right)\\left(\\frac{b}{p}\\right)$ 这一事实，这样 $a=-2$ 的行为可以从 $a=-1$ 和 $a=2$ 的行为中推断出来。\n\n你的任务是：\n- 生成所有满足 $3 \\le p  200$ 的奇素数 $p$。\n- 对于每个这样的素数 $p$，使用欧拉判别法计算 $a=-1$、$a=2$ 和 $a=-2$ 时的 $\\left(\\frac{a}{p}\\right)$。\n- 对于每个这样的素数 $p$，使用源于高斯引理给出的剩余奇偶性分析的同余类规则，计算 $\\left(\\frac{a}{p}\\right)$ 的预测值（不使用 $\\left(\\frac{a}{p}\\right)$ 的直接计算来生成预测）。\n- 对于三个 $a$ 值中的每一个，返回一个布尔值，指示直接计算的 $\\left(\\frac{a}{p}\\right)$ 值是否与所有小于 200 的奇素数 $p$ 的预测值一致。\n\n测试套件和覆盖范围：\n- 情况 $a=-1$：这测试了在所有奇素数上的第一补充定律，包括边界素数 $p=3$ 和 $p=199$。\n- 情况 $a=2$：这测试了在所有奇素数上的第二补充定律，并根据模 8 的剩余类来区分素数。\n- 情况 $a=-2$：这测试了源于乘法性的一致性检查，提供了对模 8 的剩余类的额外覆盖。\n\n最终输出格式：\n- 你的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表。该列表必须按 $[R_{-1},R_{2},R_{-2}]$ 的顺序排列，其中每个 $R_{a}$ 是对应 $a$ 的布尔结果。例如，如果所有三个验证在小于 200 的所有奇素数的测试套件中都成功，输出可能看起来像 $[{\\rm True},{\\rm True},{\\rm True}]$。", "solution": "我们从定义和基本工具开始。对于一个奇素数 $p$ 和整数 $a$ 且 $p \\nmid a$，勒让德符号 $\\left(\\frac{a}{p}\\right)$ 指示 $a$ 是否是模 $p$ 的二次剩余。欧拉判别法 (Euler's criterion) 陈述如下：\n$$\na^{(p-1)/2} \\equiv \\left(\\frac{a}{p}\\right) \\pmod{p}.\n$$\n因此，为了数值计算 $\\left(\\frac{a}{p}\\right)$，我们可以将 $a$ 对 $p$ 取模，计算 $a^{(p-1)/2} \\bmod p$ 的值，并将结果映射到 $1$ 或 $-1$。\n\n为了在不进行直接幂运算的情况下预测特定 $a$ 的 $\\left(\\frac{a}{p}\\right)$ 值，我们使用高斯引理 (Gauss's lemma)。高斯引理断言，对于奇素数 $p$ 和整数 $a$ 且 $p \\nmid a$，如果我们考虑集合 $\\{a,2a,\\dots,((p-1)/2)a\\}$ 模 $p$ 的值，并计算其中最小正剩余数大于 $p/2$ 的个数，记为 $n(a)$，那么\n$$\n\\left(\\frac{a}{p}\\right) = (-1)^{n(a)}.\n$$\n将此计数论证应用于特殊整数 $a=-1$ 和 $a=2$，可以得到 $\\left(\\frac{a}{p}\\right)$ 关于 $p$ 对小模数的同余类特征。\n\n首先，对于 $a=-1$：剩余集合为 $\\{-1,-2,\\dots,-(p-1)/2\\}$；当取最小正剩余数时，其中恰好有 $(p-1)/2$ 个大于 $p/2$，而这个计数的奇偶性取决于 $p \\equiv 1 \\pmod{4}$ 还是 $p \\equiv 3 \\pmod{4}$。由此可以推导出公式\n$$\n\\left(\\frac{-1}{p}\\right) = (-1)^{(p-1)/2},\n$$\n这等价于如果 $p \\equiv 1 \\pmod{4}$，则 $\\left(\\frac{-1}{p}\\right)=1$；如果 $p \\equiv 3 \\pmod{4}$，则 $\\left(\\frac{-1}{p}\\right)=-1$。\n\n其次，对于 $a=2$：考察剩余 $2,4,\\dots,p-1$ 并计算其中有多少落在 $(p/2,p)$ 区间内，可以得到既定的特征\n$$\n\\left(\\frac{2}{p}\\right) = (-1)^{(p^2-1)/8},\n$$\n这等价于如果 $p \\equiv 1 \\text{ 或 } 7 \\pmod{8}$，则 $\\left(\\frac{2}{p}\\right)=1$；如果 $p \\equiv 3 \\text{ 或 } 5 \\pmod{8}$，则 $\\left(\\frac{2}{p}\\right)=-1$。\n\n根据勒让德符号的乘法性，对于 $a=-2$ 我们有\n$$\n\\left(\\frac{-2}{p}\\right) = \\left(\\frac{-1}{p}\\right)\\,\\left(\\frac{2}{p}\\right) = (-1)^{(p-1)/2}\\,(-1)^{(p^2-1)/8} = (-1)^{(p-1)/2 + (p^2-1)/8}.\n$$\n等价地，如果 $p \\equiv 1 \\text{ 或 } 3 \\pmod{8}$，则 $\\left(\\frac{-2}{p}\\right)=1$；如果 $p \\equiv 5 \\text{ 或 } 7 \\pmod{8}$，则 $\\left(\\frac{-2}{p}\\right)=-1$。\n\n算法规划：\n1. 生成所有满足 $3 \\le p  200$ 的奇素数 $p$。使用埃拉托斯特尼筛法 (sieve of Eratosthenes) 筛选出 199 以下的所有素数，然后滤掉 $p=2$ 即可。\n2. 实现一个函数，使用欧拉判别法计算 $\\left(\\frac{a}{p}\\right)$：将 $a$ 对 $p$ 取模得到 $a \\bmod p$，计算 $a^{(p-1)/2} \\bmod p$ 的值，并将结果 $1 \\mapsto 1$，$p-1 \\mapsto -1$。对于选定的 $a \\in \\{-1,2,-2\\}$ 和奇素数 $p$，该值不可能为 $0$。\n3. 实现一个函数，使用上面推导出的同余类规则计算 $\\left(\\frac{a}{p}\\right)$ 的预测值：\n   - 对于 $a=-1$，如果 $p \\equiv 1 \\pmod{4}$ 则返回 $1$，否则返回 $-1$。\n   - 对于 $a=2$，如果 $p \\equiv 1 \\text{ 或 } 7 \\pmod{8}$ 则返回 $1$，否则返回 $-1$。\n   - 对于 $a=-2$，返回对 $a=-1$ 和 $a=2$ 的预测值的乘积（等价地，使用上面的模 8 规则）。\n4. 对于每个 $a \\in \\{-1,2,-2\\}$，验证对于所有小于 200 的奇素数 $p$，通过欧拉判别法计算的 $\\left(\\frac{a}{p}\\right)$ 都等于预测值。为每个 $a$ 记录一个布尔值，表示该定律是否对集合中的每个素数都成立。\n5. 按照要求的格式，将三个布尔值以 $[R_{-1},R_{2},R_{-2}]$ 的顺序单行输出。\n\n该过程数值验证了 $\\left(\\frac{-1}{p}\\right)$ 和 $\\left(\\frac{2}{p}\\right)$ 的补充定律，以及通过乘法性得到的 $\\left(\\frac{-2}{p}\\right)$ 的一致性，在小于 200 的所有奇素数的整个指定测试套件中均成立。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\n\ndef sieve_primes_upto(n: int):\n    \"\"\"Return list of all primes = n using a simple sieve.\"\"\"\n    if n  2:\n        return []\n    is_prime = [True] * (n + 1)\n    is_prime[0] = is_prime[1] = False\n    p = 2\n    while p * p = n:\n        if is_prime[p]:\n            step = p\n            start = p * p\n            is_prime[start:n+1:step] = [False] * (((n - start) // step) + 1)\n        p += 1\n    return [i for i, flag in enumerate(is_prime) if flag]\n\ndef legendre_symbol(a: int, p: int) -> int:\n    \"\"\"\n    Compute (a/p) for odd prime p using Euler's criterion.\n    Returns 1 if a is a quadratic residue mod p, -1 if not.\n    Assumes p does not divide a for given a in {-1,2,-2} and odd primes p.\n    \"\"\"\n    a_mod = a % p\n    # Euler's criterion: a^{(p-1)/2} ≡ (a/p) (mod p)\n    val = pow(a_mod, (p - 1) // 2, p)\n    if val == 1:\n        return 1\n    elif val == p - 1:\n        return -1\n    else:\n        # For completeness; should not happen for a in {-1,2,-2} and odd primes p\n        return 0\n\ndef predicted_legendre(a: int, p: int) -> int:\n    \"\"\"\n    Predicted value of (a/p) using supplementary laws:\n    - (-1/p) = 1 if p ≡ 1 (mod 4), else -1\n    - (2/p) = 1 if p ≡ 1 or 7 (mod 8), else -1\n    - (-2/p) = (-1/p)*(2/p)\n    \"\"\"\n    if a == -1:\n        return 1 if (p % 4) == 1 else -1\n    elif a == 2:\n        return 1 if (p % 8) in (1, 7) else -1\n    elif a == -2:\n        # Use multiplicativity: (-2/p) = (-1/p)*(2/p)\n        return predicted_legendre(-1, p) * predicted_legendre(2, p)\n    else:\n        raise ValueError(\"Unsupported a\")\n\ndef solve():\n    # Define the test cases from the problem statement.\n    # We verify for a in {-1, 2, -2} across all odd primes p  200.\n    test_cases = [-1, 2, -2]\n\n    # Generate odd primes less than 200\n    primes = [p for p in sieve_primes_upto(199) if p % 2 == 1]\n\n    results = []\n    for a in test_cases:\n        all_match = True\n        for p in primes:\n            ls = legendre_symbol(a, p)\n            pred = predicted_legendre(a, p)\n            if ls != pred:\n                all_match = False\n                break\n        results.append(all_match)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "3021697"}]}
{"hands_on_practices": [{"introduction": "我们的动手实践始于一个关于稠密线性序（DLO）理论的基础练习。该练习要求您确定无参数可定义一元子集的数量，从而将自同构不变性的代数概念与可定义性的逻辑概念联系起来。这个练习 [@problem_id:2970873] 为理解 Ryll-Nardzewski 定理在最简单情况（$n=1$）下的应用提供了一个具体的切入点。", "problem": "令 $T$ 为可数语言 $\\{\\}$ 中无端点的稠密线性序（DLO）的完备理论。令 $M \\models T$ 为一个可数模型。$M$ 的一个一元子集如果是在 $M$ 中某个只有一个自由变元且无参数的 $\\mathcal{L}$-公式 $\\varphi(x)$ 的实现集，则称其为无参数可定义的。令 $\\mathrm{Def}_{1}^{\\emptyset}(M)$ 表示 $M$ 的所有无参数可定义一元子集的族。\n\n从模型论中可定义性和自同构不变性的核心定义出发，仅使用无端点稠密线性序及其可数范畴性的公认性质，确定 $\\mathrm{Def}_{1}^{\\emptyset}(M)$ 的基数。你的最终答案必须是一个整数。此外，解释为什么你的计算结果在此背景下与 $n=1$ 时的 Ryll-Nardzewski 定理（R-N 定理）一致。\n\n在所考虑集合的定义中，任何地方都不允许使用参数。无需进行舍入。", "solution": "该问题要求确定在无端点稠密线性序（DLO）的任一可数模型 $M$ 中，无参数可定义的一元子集的数量。\n\n一个关键的原则是，任何无参数可定义的集合必须在其模型的自同构群作用下保持不变。也就是说，如果一个集合 $S \\subseteq M$ 是无参数可定义的，那么对于 $M$ 的任何自同构 $\\sigma: M \\to M$ 和任何元素 $a \\in M$，我们有 $a \\in S \\iff \\sigma(a) \\in S$。\n\nDLO 理论的一个著名性质是其可数模型 $(\\mathbb{Q}, )$ 是**齐性 (homogeneous)** 的。这意味着对于任意两组有限个点 $a_1  a_2  \\dots  a_n$ 和 $b_1  b_2  \\dots  b_n$，都存在一个自同构 $\\sigma$ 使得对所有 $i=1,\\dots,n$ 都有 $\\sigma(a_i) = b_i$。特别地，对于任意两个元素 $a, b \\in M$，都存在一个自同构 $\\sigma$ 使得 $\\sigma(a) = b$。这个性质意味着自同构群 $\\mathrm{Aut}(M)$ 在 $M$ 上的作用是**传递的 (transitive)**，也就是说，整个模型 $M$ 构成一个单一的轨道。\n\n现在，让我们考虑一个无参数可定义的一元子集 $S$。\n-   如果 $S$ 是非空的，那么它至少包含一个元素，记为 $a$。\n-   由于 $\\mathrm{Aut}(M)$ 是传递的，对于 $M$ 中的任何其他元素 $b$，都存在一个自同构 $\\sigma$ 使得 $\\sigma(a) = b$。\n-   因为 $S$ 是无参数可定义的，它必须在 $\\sigma$ 的作用下保持不变。既然 $a \\in S$，那么 $\\sigma(a)$ 也必须在 $S$ 中，即 $b \\in S$。\n-   由于 $b$ 是任意的，这表明如果 $S$ 非空，它必须包含 $M$ 的所有元素。因此，$S=M$。\n\n所以，唯一可能的无参数可定义的一元子集只有两个：\n1.  **空集** $\\emptyset$，它可以由一个恒为假的公式定义，例如 $\\varphi(x) \\equiv x \\ne x$。\n2.  **全集** $M$，它可以由一个恒为真的公式定义，例如 $\\varphi(x) \\equiv x = x$。\n\n因此，$\\mathrm{Def}_{1}^{\\emptyset}(M)$ 的基数是 2。\n\n**与 Ryll-Nardzewski 定理的联系：**\nRyll-Nardzewski (R-N) 定理指出，一个理论是 $\\aleph_0$-范畴的，当且仅当对于每个 $n \\ge 1$，它的 $n$-类型空间 $S_n(T)$ 是有限的，这也等价于其可数模型 $\\mathcal{M}$ 的自同构群 $\\mathrm{Aut}(\\mathcal{M})$ 在 $M^n$ 上的作用有有限个轨道。\n-   对于 $n=1$，我们已经看到 $\\mathrm{Aut}(M)$ 在 $M^1=M$ 上的作用是传递的，只有一个轨道。因此，1-类型的数量 $|S_1(T_{\\text{DLO}})|$ 是 1。\n-   R-N 定理要求 $|S_1(T_{\\text{DLO}})|$ 是有限的，而 1 是有限的，这与 $T_{\\text{DLO}}$ 是 $\\aleph_0$-范畴的这一事实相符。\n-   一个无参数可定义的集合是由若干个（在这里是零个或一个）轨道的并集构成的。由于只有一个轨道（即 $M$ 本身），可能的并集只有 $\\emptyset$（零个轨道的并集）和 $M$（一个轨道的并集）。这解释了为什么恰好有两个无参数可定义的一元子集。我们的计算结果（基数为2）与 R-N 定理的推论完全一致。", "answer": "$$\\boxed{2}$$", "id": "2970873"}, {"introduction": "在先前练习的基础上，我们现在将 DLO 理论中的讨论从单个元素推广到 $n$-元组。这个问题 [@problem_id:2970877] 将引导您刻画并计算自同构群在 $\\mathbb{Q}^n$ 上的轨道数量，揭示群作用与一种称为有序划分的特定组合结构之间的深刻联系。通过完成这个练习，您将直接应用 Ryll-Nardzewski 定理，将轨道数量与完全 $n$-类型的数量等同起来。", "problem": "令 $(\\mathbb{Q}, )$ 表示无端点的可数稠密线性序，令 $G=\\operatorname{Aut}(\\mathbb{Q}, )$ 为其保序自同构群，对角作用于 $\\mathbb{Q}^{n}$。对于固定的 $n \\in \\mathbb{N}$，考虑将 $\\mathbb{Q}^{n}$ 划分为 $G$-轨道。仅使用核心定义和熟知事实，包括自同构轨道的定义、空集 $S_{n}(\\emptyset)$ 上的完备 $n$-型的概念、稠密线性序无端点（DLO）的量词消去，以及刻画可数范畴性的 Engeler–Ryll-Nardzewski–Svenonius 定理（也称为 Ryll-Nardzewski 定理），从第一性原理推导出：\n\n1. 用线性序中元组固有的组合数据来刻画 $\\mathbb{Q}^{n}$ 上的 $G$-轨道。\n2. 用第二类斯特林数 $\\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\}$ 和阶乘表示 $\\mathbb{Q}^{n}$ 上 $G$-轨道数量的闭式表达式。\n3. 解释为什么这个轨道计数与 $\\lvert S_{n}(\\emptyset)\\rvert$ 一致。\n\n你的最终答案必须是关于 $\\mathbb{Q}^{n}$ 上 $G$-轨道数量的单个闭式解析表达式，用 $n$、第二类斯特林数和阶乘写出。不要在最终答案中提供任何中间公式；只给出最终表达式。", "solution": "这个问题是有效的，因为它是模型论领域中一个适定的、有科学依据的标准问题。它要求将自同构群、轨道、型和 Ryll-Nardzewski 定理等基本概念应用于一个典范结构——可数稠密线性序 $(\\mathbb{Q}, )$。\n\n令 $\\bar{a} = (a_1, a_2, \\dots, a_n)$ 和 $\\bar{b} = (b_1, b_2, \\dots, b_n)$ 为 $\\mathbb{Q}^{n}$ 中的两个元组。根据定义，$\\bar{a}$ 和 $\\bar{b}$ 属于群 $G = \\operatorname{Aut}(\\mathbb{Q}, )$ 的同一轨道，当且仅当存在一个保序自同构 $g \\in G$ 使得 $g(\\bar{a}) = \\bar{b}$。这意味着对所有 $i \\in \\{1, 2, \\dots, n\\}$，都有 $g(a_i) = b_i$。\n\n**1. $\\mathbb{Q}^{n}$ 上 $G$-轨道的刻画**\n\n$(\\mathbb{Q}, )$ 的一个自同构 $g$ 是一个从 $\\mathbb{Q}$ 到 $\\mathbb{Q}$ 的保持序关系 $$ 的双射。因此，如果 $g(\\bar{a})=\\bar{b}$，那么对于任意一对指标 $i, j \\in \\{1, 2, \\dots, n\\}$，以下关系必须成立：\n- $a_i = a_j \\iff g(a_i) = g(a_j) \\iff b_i = b_j$\n- $a_i  a_j \\iff g(a_i)  g(a_j) \\iff b_i  b_j$\n- $a_i > a_j \\iff g(a_i) > g(a_j) \\iff b_i > b_j$\n\n一个元组 $\\bar{a}$ 的分量上的这组关系，在纯序语言 $\\{\\}$ 中，完全决定了 $\\bar{a}$ 在空集上的无量词型，记作 $\\mathrm{qftp}(\\bar{a}/\\emptyset)$。这些关系所捕捉的信息可以编码为指标集 $\\{1, 2, \\dots, n\\}$ 的一个**有序划分**。\n\n$\\{1, 2, \\dots, n\\}$ 的一个有序划分是一个非空不交子集的序列 $(P_1, P_2, \\dots, P_k)$，其并集为 $\\{1, 2, \\dots, n\\}$。对于一个元组 $\\bar{a} \\in \\mathbb{Q}^{n}$，我们可以如下定义其关联的有序划分：\n- 在 $\\{1, 2, \\dots, n\\}$ 上定义一个等价关系 $\\sim$：$i \\sim j$ 当且仅当 $a_i = a_j$。这将 $\\{1, 2, \\dots, n\\}$ 划分为等价类，记为 $C_1, \\dots, C_k$。\n- 令 $v_r$ 为所有 $i \\in C_r$ 的 $a_i$ 的公共值。这些不同值的集合 $\\{v_1, \\dots, v_k\\}$ 上存在一个严格线性序。设此序为 $v_{r_1}  v_{r_2}  \\dots  v_{r_k}$。\n- 对应于 $\\bar{a}$ 的有序划分是 $(P_1, P_2, \\dots, P_k)$，其中 $P_j = C_{r_j}$。\n\n例如，如果 $n=4$ 且 $\\bar{a} = (3.1, -1, 5, 3.1)$，不同的值为 $-1  3.1  5$。指标 $2$ 对应 $-1$。指标 $1$ 和 $4$ 对应 $3.1$。指标 $3$ 对应 $5$。$\\{1, 2, 3, 4\\}$ 的划分为 $\\{\\{2\\}, \\{1, 4\\}, \\{3\\}\\}$。有序划分为 $(\\{2\\}, \\{1, 4\\}, \\{3\\})$。\n\n我们已经证明，如果两个元组位于同一轨道，它们必须定义相同的有序划分。现在我们证明其逆命题。假设 $\\mathbb{Q}^{n}$ 中的 $\\bar{a}$ 和 $\\bar{b}$ 定义了相同的有序划分 $(P_1, \\dots, P_k)$。令 $\\{c_1  c_2  \\dots  c_k\\}$ 为 $\\bar{a}$ 中不同值的集合，其中 $c_j$ 是 $P_j$ 中所有指标的公共值。类似地，令 $\\{d_1  d_2  \\dots  d_k\\}$ 为 $\\bar{b}$ 中不同值的集合，其中 $d_j$ 是 $P_j$ 中指标的公共值。\n\n考虑由 $f_0(c_j) = d_j$ 定义的有限映射 $f_0: \\{c_1, \\dots, c_k\\} \\to \\{d_1, \\dots, d_k\\}$。这是一个在 $\\mathbb{Q}$ 的两个有限子集之间的保序双射。$(\\mathbb{Q}, )$ 的一个基本性质是它是**齐性的**（homogeneous）：任何在 $\\mathbb{Q}$ 的两个有限子集之间的保序映射都可以扩展为 $(\\mathbb{Q}, )$ 的一个完整自同构。令 $g \\in G$ 是 $f_0$ 的这样一个扩展。\n\n对于任何 $i \\in \\{1, \\dots, n\\}$，如果 $i \\in P_j$，则 $a_i = c_j$。应用 $g$，我们得到 $g(a_i) = g(c_j) = f_0(c_j) = d_j$。因为 $i \\in P_j$，$\\bar{b}$ 的有序划分的定义意味着 $b_i = d_j$。因此，对所有 $i \\in \\{1, \\dots, n\\}$ 都有 $g(a_i) = b_i$，这意味着 $g(\\bar{a}) = \\bar{b}$。\n\n因此，两个元组 $\\bar{a}$ 和 $\\bar{b}$ 在同一个 $G$-轨道中，当且仅当它们定义了 $\\{1, 2, \\dots, n\\}$ 的同一个有序划分。这提供了所要求的刻画：$\\mathbb{Q}^{n}$ 上的 $G$-轨道与 $\\{1, 2, \\dots, n\\}$ 的有序划分集合之间存在一一对应关系。\n\n**2. $G$-轨道数量的闭式表达式**\n\n为了求出 $G$-轨道的数量，我们必须对集合 $\\{1, 2, \\dots, n\\}$ 的有序划分进行计数。一个有序划分的构造分两步：\n1.  将集合 $\\{1, 2, \\dots, n\\}$ 划分为 $k$ 个非空、不相交的子集（块），其中 $k$ 的范围可以从 $1$ 到 $n$。实现这一目标的方法数由第二类斯特林数给出，记为 $\\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\}$。\n2.  将这 $k$ 个块进行线性排序。对 $k$ 个不同的块有 $k!$ 种排序方式。\n\n对于固定的块数 $k$，存在 $\\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\} k!$ 个有序划分。为了求出有序划分的总数，我们将所有可能的 $k$ 值（从 $k=1$（所有元素相等）到 $k=n$（所有元素都不同））相加。\n\n因此，$\\mathbb{Q}^{n}$ 上 $G$-轨道的总数由以下和式给出：\n$$ \\sum_{k=1}^{n} \\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\} k! $$\n这个数也被称为第 $n$ 个有序贝尔数。\n\n**3. 与型数量 $|S_{n}(\\emptyset)|$ 的联系**\n\n无端点稠密线性序理论（记为 DLO）是一个完备理论。其（在同构意义下）唯一的可数模型是 $(\\mathbb{Q}, )$。一个标准的往返论证表明，DLO 的任意两个可数模型都是同构的，这意味着 DLO 是一个 **$\\omega$-范畴**理论。\n\nEngeler–Ryll-Nardzewski–Svenonius 定理在 $\\omega$-范畴性的模型论性质和自同构群的代数结构之间建立了深刻的联系。该定理的一个关键部分指出，对于一个具有可数模型 $M$ 的完备理论 $T$，$T$ 是 $\\omega$-范畴的当且仅当对于每个自然数 $n$，$\\operatorname{Aut}(M)$ 在 $M^n$ 上的作用具有有限数量的轨道。\n\n至关重要的是，该定理确定了对于一个 $\\omega$-范畴理论，$\\operatorname{Aut}(M)$ 在 $M^n$ 上的轨道数量恰好等于空集上的完备 $n$-型的数量，即 $|S_n(\\emptyset)|$。\n$$ |\\text{Orbits}(\\operatorname{Aut}(M), M^n)| = |S_n(\\emptyset)| $$\n推理如下：\n- 同一轨道中的任意两个元组都是自同构的，因此它们必须满足完全相同的公式，从而实现相同的完备型。这就给出了一个从轨道到型的映射。\n- 对于一个 $\\omega$-范畴理论，实现相同完备型的任意两个元组都是自同构的。这是因为在这类理论中，对于任何模型 $M$，任何在 $M$ 的有限生成子结构之间的部分初等映射都可以扩展为一个自同构。在具有量词消去的 DLO 的情况下，完备型由其无量词部分决定。正如我们在第 1 部分中所示，具有相同无量词型的元组是自同构的，因为 $(\\mathbb{Q}, )$ 是齐性的。\n\nDLO 理论具有量词消去性质，这意味着每个公式 $\\phi(x_1, \\dots, x_n)$ 都逻辑等价于一个无量词公式。这意味着一个完备 $n$-型 $p \\in S_n(\\emptyset)$ 完全由它所包含的无量词公式集合决定。一个元组的无量词型由形如 $x_i = x_j$ 和 $x_i  x_j$ 的原子公式的真值决定，而这组真值恰好就编码了我们之前定义的有序划分。因此，$\\mathbb{Q}^n$ 上的 $G$-轨道与 $S_n(\\emptyset)$ 中的完备类型之间存在一一对应关系。", "answer": "$$\n\\boxed{\\sum_{k=1}^{n} \\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\} k!}\n$$", "id": "2970877"}, {"introduction": "为了展示我们所探讨原理的普适性和强大功能，我们最后的练习转向一个不同的可数范畴理论。在这里 [@problem_id:2970887]，您将分析一个具有固定数量无限等价类的等价关系理论，其结构与线性序有本质区别。这个练习要求您将相同的方法——通过组合结构对类型进行分类然后计数——应用于新的情境，从而巩固您对 Ryll-Nardzewski 定理背后核心思想的理解。", "problem": "设 $\\mathcal{L}$ 是一个语言，其含有一个二元关系符号 $E$ 和常数符号 $a_{1},\\dots,a_{k}$。考虑 $\\mathcal{L}$ 中的完全理论 $T_{k}$，该理论公理化了以下性质：$E$ 是一个等价关系，恰好存在 $k$ 个等价类，每个等价类都是无限的，常数 $a_{1},\\dots,a_{k}$ 位于两两不同的 E-类中，并且每个元素都与恰好一个 $a_{i}$ 是 E-等价的。设 $\\mathfrak{C}\\models T_{k}$ 是一个充分饱和且同质的模型（一个“怪兽模型”），并用 $S_{n}(\\emptyset)$ 表示在空集上的完全 n-型的 Stone 空间。\n\n仅使用以下基本事实，推导出一个关于 $n$ 和 $k$ 的基数 $\\lvert S_{n}(\\emptyset)\\rvert$ 的显式解析闭式表达式：\n\n- 空集上完全 n-型的定义，以及完全型与 n-元组在 $\\operatorname{Aut}(\\mathfrak{C})$ 作用下的轨道的等同关系。\n- Ryll-Nardzewski 定理 (RNT)，该定理指出，一个可数语言中的完全理论是 $\\aleph_{0}$-范畴的，当且仅当对每个 $n$，$S_{n}(\\emptyset)$ 都是有限的。\n- 第二类 Stirling 数 $\\left\\{ {n \\atop j} \\right\\}$ 用于计算将集合 $\\{1,\\dots,n\\}$ 划分为 $j$ 个非空无标号块的划分数这一组合学事实。\n\n你的推导应从这些原则出发，解释为何 $T_{k}$ 中的完全 n-型对应于索引集 $\\{1,\\dots,n\\}$ 的集合划分以及由 $a_{1},\\dots,a_{k}$ 决定的 E-类对这些块的 k-着色，然后计算此种类型的总数。将最终答案表示为包含 $n$、$k$ 和 $\\left\\{ {n \\atop j} \\right\\}$ 的单一闭式表达式。无需四舍五入，也不涉及物理单位。假设 $n\\geq 1$ 和 $k\\geq 1$ 是固定的整数。", "solution": "该问题要求针对一个特定的完全理论 $T_k$，推导其在空集上的完全 n-型的 Stone 空间的基数（记为 $|S_n(\\emptyset)|$）的闭式表达式。\n\n对问题陈述的验证已确认其在数理逻辑领域内的科学合理性、一致性和适定性。因此，我们可以进行推导。\n\n本分析的基本原则是理论 $T_k$ 的一个充分饱和且同质的模型 $\\mathfrak{C}$ 所提供的语法和语义之间的对应关系。对于这样一个模型，空集上的完全 n-型的集合 $S_n(\\emptyset)$ 与 $\\mathfrak{C}$ 中元素构成的 n-元组在该模型的自同构群 $\\operatorname{Aut}(\\mathfrak{C})$ 作用下的轨道集合之间存在一一对应关系。也就是说， $|S_n(\\emptyset)| = |\\mathfrak{C}^n / \\operatorname{Aut}(\\mathfrak{C})|$。因此，我们的任务转化为一个组合问题：计算这些轨道的数量。\n\n一个 n-元组 $\\bar{b} = (b_1, \\dots, b_n)$（其中每个 $b_i \\in \\mathfrak{C}$）的轨道是集合 $\\{ \\sigma(\\bar{b}) \\mid \\sigma \\in \\operatorname{Aut}(\\mathfrak{C}) \\}$。为了计算轨道的数量，我们必须确定刻画它们的不变性质。两个元组 $\\bar{b}$ 和 $\\bar{c}$ 在同一轨道中，当且仅当它们实现相同的完全型，这意味着它们在语言 $\\mathcal{L}$ 中满足相同的无参数公式。理论 $T_k$ 允许量词消去（这是该理论的一个标准结果），这意味着任何公式 $\\phi(x_1, \\dots, x_n)$ 都等价于原子公式的布尔组合。语言 $\\mathcal{L}$ 中的原子公式形如 $t_1 = t_2$ 或 $t_1 E t_2$，其中 $t_1$ 和 $t_2$ 是项。项可以是变量 $x_i$ 或常数 $a_l$。\n\n因此，一个 n-元组 $(b_1, \\dots, b_n)$ 的型完全由以下原子公式的真值确定：\n1.  对所有 $1 \\le i, j \\le n$，$b_i E b_j$ 以及 $b_i = b_j$。\n2.  对所有 $1 \\le i \\le n$ 和 $1 \\le l \\le k$，$b_i E a_l$ 以及 $b_i = a_l$。\n\n让我们分析这些公式所编码的结构信息。关系 $E$ 是一个等价关系。因此，所有形如 $b_i E b_j$ 的公式的真值集合在索引集 $\\{1, \\dots, n\\}$ 上定义了一个等价关系，其中 $i$ 等价于 $j$ 当且仅当 $b_i E b_j$。一个集合上的等价关系等同于将该集合划分为非空块（即等价类）。设 $\\{1, \\dots, n\\}$ 的这个划分为 $P$。由于每个等价类都是无限的，我们可以假设对于 $i \\neq j$，$b_i \\neq b_j$，并且 $b_i$ 也不同于任何常数。因此，决定型的关键信息是 $E$ 关系。\n\n$T_k$ 的公理指出，每个元素都与常数 $a_1, \\dots, a_k$ 中的恰好一个 E-等价。这意味着对于任何元素 $b \\in \\mathfrak{C}$，都存在唯一的 $l \\in \\{1, \\dots, k\\}$ 使得 $b E a_l$。这将 $\\mathfrak{C}$ 的论域划分为恰好 $k$ 个无限等价类，我们可以将其表示为 $C_l = [a_l]_E$。\n对于一个 n-元组 $(b_1, \\dots, b_n)$，如果 $b_i E b_j$，那么 $b_i$ 和 $b_j$ 必须属于同一个等价类 $C_l$。这意味着划分 $P$ 的单个块内的所有索引都必须对应于属于 $\\mathfrak{C}$ 的同一个等价类的元素 $b_i$。\n\n因此，一个完全 n-型由两部分组合数据唯一指定：\n1.  将索引集 $\\{1, \\dots, n\\}$ 划分为若干（比如 $j$ 个）非空块。\n2.  为这 $j$ 个块中的每一个分配到 $k$ 个等价类 $\\{C_1, \\dots, C_k\\}$ 中的一个。\n\n现在我们可以枚举所有可能的此类配置。n-型的总数 $|S_n(\\emptyset)|$ 是对所有可能的块数 $j$，形成这样结构的方式数量的总和。\n\n集合 $\\{1, \\dots, n\\}$（其中 $n \\ge 1$）的划分中的块数 $j$ 的范围可以从 $j=1$（所有索引都在一个块中的平凡划分）到 $j=n$（划分为单元素集的划分）。\n\n对于固定的块数 $j$（$1 \\le j \\le n$），将集合 $\\{1, \\dots, n\\}$ 划分为恰好 $j$ 个非空、无标号块的方式数由第二类 Stirling 数给出，记为 $\\left\\{ {n \\atop j} \\right\\}$。\n\n对于任何具有 $j$ 个块的划分，比如 $\\{B_1, B_2, \\dots, B_j\\}$，我们必须将每个块 $B_m$ 分配到 $k$ 个等价类中的一个。这等价于定义一个从块的集合 $\\{B_1, \\dots, B_j\\}$ 到类的集合 $\\{C_1, \\dots, C_k\\}$ 的函数。由于有 $j$ 个块和 $k$ 个类，并且对每个块的选择是独立的，所以这样的函数数量为 $k^j$。重要的是要注意，该分配函数不必是单射的；多个块可以映射到同一个等价类，这对应于由不同（非 E-等价）但仍位于同一无限类中的元素构成的元组所实现的型。\n\n为求得型的总数，我们将选择划分的方式数乘以将类分配给其块的方式数，然后对所有可能的 $j$ 值求和：\n$$|S_n(\\emptyset)| = \\sum_{j=1}^{n} (\\text{将 } \\{1,\\dots,n\\} \\text{ 划分为 } j \\text{ 个块的划分数}) \\times (j \\text{ 个块的类分配数})$$\n代入组合量，我们得到：\n$$|S_n(\\emptyset)| = \\sum_{j=1}^{n} \\left\\{ {n \\atop j} \\right\\} k^j$$\n\n这个表达式就是所求的在空集上完全 n-型数量的解析闭式表达式。对于 $n \\geq 1$，Stirling 数 $\\left\\{ {n \\atop 0} \\right\\} = 0$，所以求和可以等价地从 $j=0$ 开始写：\n$$|S_n(\\emptyset)| = \\sum_{j=0}^{n} \\left\\{ {n \\atop j} \\right\\} k^j$$\n这个和被称为在 $k$ 处取值的第 $n$ 个 Touchard 多项式。对于任何固定的整数 $n$ 和 $k$，这个和的有限性与 Ryll-Nardzewski 定理是一致的，该定理预测对于任何像 $T_k$ 这样的 $\\aleph_0$-范畴理论，对所有的 $n$，$|S_n(\\emptyset)|$ 都是有限的。", "answer": "$$\n\\boxed{\\sum_{j=1}^{n} \\left\\{ {n \\atop j} \\right\\} k^j}\n$$", "id": "2970887"}]}
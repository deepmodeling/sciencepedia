{"hands_on_practices": [{"introduction": "本练习旨在阐明 Ehrenfeucht-Fraïssé 博弈与一阶逻辑表达能力之间的根本联系。通过使用仅带有一个一元谓词 $U$ 的集合这种极其简单的结构，我们可以清晰地揭示标准一阶逻辑的一个关键局限：它无法进行计数。此练习 ([@problem_id:2972054]) 将引导您探究这一局限性如何转化为复制者 (Duplicator) 在标准博弈中的必胜策略，以及引入计数逻辑的量词后为何能立即让扰乱者 (Spoiler) 获胜。", "problem": "固定一个整数 $t \\geq 2$。在关系符号集 $\\mathcal{L} = \\{U\\}$ 下进行研究，其中包含一个一元谓词 $U$。考虑两个有限的 $\\mathcal{L}$-结构 $\\mathcal{A}_{t}$ 和 $\\mathcal{B}_{t}$，它们的底层全集是同一个固定的集合 $D = \\{1,2,\\dots,2t+1\\}$，但对 $U$ 的解释不同，如下所示：\n- 在 $\\mathcal{A}_{t}$ 中，$U^{\\mathcal{A}_{t}} = \\{1,2,\\dots,t\\}$，所以恰好有 $t$ 个元素满足 $U$，而 $t+1$ 个元素不满足。\n- 在 $\\mathcal{B}_{t}$ 中，$U^{\\mathcal{B}_{t}} = \\{1,2,\\dots,t+1\\}$，所以恰好有 $t+1$ 个元素满足 $U$，而 $t$ 个元素不满足。\n\n仅使用标准的一阶逻辑 Ehrenfeucht–Fraïssé 博弈（不含计数性量词）的基本定义、量词秩的概念、以及带计数性量词的一阶逻辑语义（其中计数性量词 $\\exists^{\\geq m} x\\, \\varphi(x)$ 断言至少有 $m$ 个元素满足 $\\varphi$），并结合 Ehrenfeucht–Fraïssé 博弈与给定数量词秩下的不可区分性之间的标准对应关系。\n\n请以一种从基本原理出发，展示这些事实为何以及如何成立的方式回答以下问题：\n\n1. 确定最大的整数 $\\ell$，使得 Duplicator 在 $\\mathcal{A}_{t}$ 和 $\\mathcal{B}_{t}$ 上进行的长为 $\\ell$ 的标准 Ehrenfeucht–Fraïssé 博弈中拥有必胜策略。\n\n2. 确定一个带计数性量词的一阶逻辑句子的最小量词秩 $r$，该句子能区分 $\\mathcal{A}_{t}$ 和 $\\mathcal{B}_{t}$。\n\n你的最终答案必须是一个单行向量，按顺序包含第1部分和第2部分中的两个量。无需四舍五入。", "solution": "我们首先回顾 Ehrenfeucht–Fraïssé 博弈的核心内容及其与固定量词秩下的不可区分性之间的联系。在两个具有相同符号集的结构上进行的标准 $k$ 轮 Ehrenfeucht–Fraïssé 博弈中，Spoiler 和 Duplicator 在 $k$ 轮中交替地将石子放置在两个结构的元素上。如果在博弈结束时，从一个结构中被放置石子的元素到另一个结构中被放置石子的元素的映射是一个部分同构，即它保持并反映所有原子公式（此处为等词和一元谓词 $U$），则 Duplicator 获胜。根据 Ehrenfeucht–Fraïssé 定理，Duplicator 在 $k$ 轮博弈中有必胜策略，当且仅当这两个结构满足所有量词秩至多为 $k$ 的相同一阶逻辑句子。\n\n在我们的设定中，符号集只包含等词和一个一元谓词 $U$。因此，被放置石子的元素之间的映射成为部分同构的条件简化为保持等词和在 $U$ 中的成员关系。具体来说，每当 Spoiler 在一个结构中选择一个位于 $U$ 内或 $U$外的元素放置石子时，Duplicator 必须在另一个结构中用具有相同 $U$-状态的元素来回应，同时还要尊重先前已放置石子的元素间的相等和不相等关系。\n\n我们分两部分进行。\n\n第1部分：Duplicator 在标准 $\\ell$ 轮博弈中获胜的最大 $\\ell$ 值。\n\n我们断言，这样的最大 $\\ell$ 值等于 $t$。\n\n首先，我们证明对于所有 $\\ell \\leq t$，Duplicator 都能获胜。考虑任何一局 $\\ell \\leq t$ 的 $\\ell$ 轮博弈。在每一轮之后维持以下不变量：被放置石子的映射将 $U^{\\mathcal{A}_{t}}$ 中的元素与 $U^{\\mathcal{B}_{t}}$ 中的元素配对，并将 $D \\setminus U^{\\mathcal{A}_{t}}$ 中的元素与 $D \\setminus U^{\\mathcal{B}_{t}}$ 中的元素配对，并且一个结构中没有两个不同的石子映射到另一个结构中的同一个元素（因此该映射是相应颜色类之间的部分双射）。这个不变量确保了所有原子公式（$x=y$ 和 $U(x)$）被保持和反映，因此该映射是一个部分同构。\n\n要了解 Duplicator 为何能在 $\\ell \\leq t$ 的情况下维持此不变量，我们观察各个颜色类的容量：\n- 在 $\\mathcal{A}_{t}$ 中，有 $t$ 个元素在 $U$ 中， $t+1$ 个元素不在 $U$ 中。\n- 在 $\\mathcal{B}_{t}$ 中，有 $t+1$ 个元素在 $U$ 中， $t$ 个元素不在 $U$ 中。\n\n因为在任何给定轮次之前，最多只放置了 $\\ell-1 \\leq t-1$ 个石子，并且 Spoiler 每轮最多只能在一个固定的颜色类中放置一个新的石子，所以 Duplicator 总能在相应的颜色类中找到一个未使用的元素来回应，因为两个结构中的每个颜色类开始时都至少有 $t$ 个元素。因此，对于所有 $\\ell \\leq t$，该不变量得以保持，Duplicator 获胜。\n\n其次，我们证明对于 $\\ell = t+1$，Spoiler 获胜。Spoiler 在 $\\mathcal{B}_{t}$ 中进行所有 $t+1$ 轮博弈，每次都选择一个 $U^{\\mathcal{B}_{t}}$ 中新的元素。为了保持原子公式 $U(x)$，Duplicator 每次都必须用 $U^{\\mathcal{A}_{t}}$ 中的一个元素来回应。然而，$U^{\\mathcal{A}_{t}}$ 中只有 $t$ 个元素，所以在 $t$ 次这样的移动之后，在第 $(t+1)$ 步中，Duplicator 会用尽 $U^{\\mathcal{A}_{t}}$ 中的可用元素，并被迫用一个 $U^{\\mathcal{A}_{t}}$ 之外的元素来回应。这违反了 $U$ 的保持性，Spoiler 获胜。因此，Duplicator 在 $\\ell = t+1$ 时无法获胜，使得 Duplicator 拥有必胜策略的最大 $\\ell$ 值恰好是 $t$。\n\n第2部分：带计数性量词的一阶逻辑中区分 $\\mathcal{A}_{t}$ 和 $\\mathcal{B}_{t}$ 的最小量词秩 $r$。\n\n回想一下，带计数性量词的一阶逻辑允许使用形如 $\\exists^{\\geq m} x\\, \\varphi(x)$ 的计数性量词，它断言至少有 $m$ 个元素满足 $\\varphi(x)$。$\\exists^{\\geq m} x\\, \\varphi(x)$ 的量词秩是 $\\max\\{1, \\text{qr}(\\varphi)\\}$，也就是说，增加一个计数性量词会使秩最多增加1，这与 $m$ 的大小无关。\n\n考虑句子 $\\exists^{\\geq t+1} x\\, U(x)$。在 $\\mathcal{B}_{t}$ 中，恰好有 $t+1$ 个元素满足 $U$，所以该句子为真。在 $\\mathcal{A}_{t}$ 中，恰好有 $t$ 个元素满足 $U$，所以该句子为假。这个句子的量词秩为1，因为它由一个应用于原子公式的单一计数性量词构成。因此，存在一个量词秩为1的带计数性量词的一阶逻辑句子，可以区分 $\\mathcal{A}_{t}$ 和 $\\mathcal{B}_{t}$。没有无量词的句子可以区分 $\\mathcal{A}_{t}$ 和 $\\mathcal{B}_{t}$，因为在这个没有常数符号的符号集中，无量词句子可规约为关于 $U$ 和等词的重言式的布尔组合，其中不含参数，因此无法访问基数。因此，所需的最小量词秩为 $r = 1$。\n\n这种区分行为也可以在 Ehrenfeucht–Fraïssé 博弈的计数性变体中表现出来：在一个单一的计数移动中，Spoiler 指向一元谓词纤维 $U^{\\mathcal{B}_{t}}$，并要求在 $U^{\\mathcal{A}_{t}}$ 中找到一个由 $t+1$ 个不同元素组成的匹配族。Duplicator 会立即失败，因为 $|U^{\\mathcal{A}_{t}}| = t$。\n\n总结结果，Duplicator 在标准博弈中获胜的最大 $\\ell$ 值为 $\\ell = t$，而在带计数性量词的一阶逻辑中区分这两个结构的最小量词秩为 $r = 1$。", "answer": "$$\\boxed{\\begin{pmatrix} t  1 \\end{pmatrix}}$$", "id": "2972054"}, {"introduction": "在理解了博弈与表达能力之间的联系后，我们现在转向一个更实际的应用：证明两个结构并非初等等价。在本练习 ([@problem_id:2972065]) 中，您将扮演扰乱者 (Spoiler) 的角色。您的目标是设计一个必胜策略，以揭示两个树结构之间的关键差异——即某个节点是否拥有唯一的子节点。这项练习将磨练您构建与一阶逻辑公式相对应的多回合博弈策略的能力，这是描述复杂性理论中的一项核心技能。", "problem": "考虑一阶语言 $\\mathcal{L}$，它包含一个表示根的一元谓词 $R(x)$，一个解释为“$y$ 是 $x$ 的一个孩子”的二元关系 $C(x,y)$，以及一个解释为“$x$ 和 $y$ 是不同的兄弟姐妹”的二元关系 $S(x,y)$，即存在 $p$ 使得 $C(p,x)$ 和 $C(p,y)$ 成立且 $x \\neq y$。设 $\\mathcal{A}$ 和 $\\mathcal{B}$ 是签名 $\\mathcal{L}$ 中的两个有限有根树结构，高度均至少为 $2$，具有 $R$、$C$ 和 $S$ 的预期解释，并满足：\n\n- 在 $\\mathcal{A}$ 中存在一个节点 $u$，它恰好有一个孩子 $v$，即 $C(u,v)$ 成立，且对于所有 $w$，如果 $C(u,w)$ 则 $w=v$。\n- 在 $\\mathcal{B}$ 中，每个非叶节点至少有两个孩子。\n\n假设除了所述差异外，这些树在其他方面足够相似，以至于在两个结构之间，深度为 1 以内的局部邻域可以匹配，除了单孩子与多孩子现象。请分析这些结构上的 Ehrenfeucht–Fraïssé (EF) 博弈（Ehrenfeucht–Fraïssé game）。\n\n下列哪个陈述是正确的？\n\nA. 在 $\\mathcal{A}$ 和 $\\mathcal{B}$ 上的 $2$ 轮 EF 博弈中，Spoiler 有一个获胜策略，通过在 $\\mathcal{A}$ 中选择一个父节点及其唯一子节点，因为兄弟关系在 $\\mathcal{B}$ 中被选中的元素中已经被违反。\n\nB. Spoiler 需要 $3$ 轮来强制产生不匹配：在 $\\mathcal{A}$ 中选择父节点 $u$ 及其唯一子节点 $v$ 后，Spoiler 在第 $3$ 轮中选择 $\\mathcal{B}$ 中匹配的父节点 $u'$ 的第二个孩子 $w$；Duplicator 无法在 $\\mathcal{A}$ 中用 $v$ 的一个兄弟节点（不存在）来回应，同时保持部分同构，因此 Spoiler 在 $3$ 轮内获胜。\n\nC. 一阶属性“存在一个恰好有一个孩子的节点”可以在 $\\mathcal{L}$ 中表达，且区分 $\\mathcal{A}$ 和 $\\mathcal{B}$ 的句子的最小量词秩是 $3$。\n\nD. 即使有 $3$ 轮，Duplicator 也总是可以通过选择叶节点来回应以保持部分同构，因此，在此签名中，EF 博弈无法检测到存在一个恰好有一个孩子的节点。\n\nE. 兄弟关系 $S(x,y)$ 对于这种区分并非必不可少：在仅包含 $R(x)$ 和 $C(x,y)$ 的签名中，Spoiler 仍然可以通过在 $\\mathcal{A}$ 中选择一个父节点及其唯一子节点，然后在 $\\mathcal{B}$ 中选择匹配父节点的第二个孩子，从而在 $3$ 轮内获胜，以此强制违反 $\\mathcal{A}$ 中的子关系配置。", "solution": "首先对问题陈述进行严格的验证过程。\n\n### 步骤 1：提取已知条件\n- **语言 $\\mathcal{L}$**：一个一阶语言，其签名包含：\n    - 一个一元谓词 $R(x)$，解释为“$x$ 是一个根”。\n    - 一个二元关系 $C(x,y)$，解释为“$y$ 是 $x$ 的一个孩子”。\n    - 一个二元关系 $S(x,y)$，解释为“$x$ 和 $y$ 是不同的兄弟姐妹”，定义为“存在 $p$ 使得 $C(p,x)$ 和 $C(p,y)$ 成立且 $x \\neq y$”。\n- **结构 $\\mathcal{A}$ 和 $\\mathcal{B}$**：签名 $\\mathcal{L}$ 的两个有限有根树结构。\n- **结构属性**：\n    - $\\mathcal{A}$ 和 $\\mathcal{B}$ 的高度都至少为 $2$。\n    - 在结构 $\\mathcal{A}$ 中，存在一个节点 $u$，它恰好有一个孩子 $v$。\n    - 在结构 $\\mathcal{B}$ 中，每个非叶节点至少有两个孩子。\n- **假设**：“假设除了所述差异外，这些树在其他方面足够相似，以至于在两个结构之间，深度为 1 以内的局部邻域可以匹配，除了单孩子与多孩子现象。”\n- **任务**：分析 $\\mathcal{A}$ 和 $\\mathcal{B}$ 上的 Ehrenfeucht–Fraïssé (EF) 博弈，并确定给定陈述的正确性。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题在数理逻辑，特别是模型论和有限模型论的背景下是良定义的。\n- **科学基础**：一阶语言、结构和 Ehrenfeucht-Fraïssé 博弈的概念是标准的，并构成了模型论的基石。问题设置在理论上是合理的。\n- **良构的**：结构 $\\mathcal{A}$ 和 $\\mathcal{B}$ 的属性以足够的精度给出，允许进行形式化分析。区分属性被明确陈述。关于 EF 博弈结果的问题是该领域的标准形式问题。兄弟关系 $S(x,y)$ 的定义是明确的。\n- **客观性**：问题以精确、客观和形式化的数学语言陈述。\n- **完整性**：问题提供了进行推导所需的所有定义。非正式短语“在其他方面足够相似”是此类问题中常见的手段，旨在指示解题者专注于指定的差异，而不要被结构之间其他潜在的、琐碎的差异所分心。\n\n### 步骤 3：结论与行动\n问题有效。接下来将进行严格的解答推导和选项分析。\n\n***\n\n### 解答推导\n\n这个问题的核心在于 Ehrenfeucht-Fraïssé 定理，该定理建立了一个模型论概念（在某个量词秩内的初等等价）和一个博弈论概念（在 EF 博弈中存在获胜策略）之间的对偶性。具体来说，两个结构 $\\mathcal{A}$ 和 $\\mathcal{B}$ 不能被任何量词秩至多为 $k$ 的一阶句子区分，当且仅当 Duplicator 在 $k$ 轮 EF 博弈（记为 $G_k(\\mathcal{A}, \\mathcal{B})$）中有获胜策略。如果 Spoiler 有获胜策略，那么这两个结构可以被一个量词秩至多为 $k$ 的句子区分。\n\n$\\mathcal{A}$ 和 $\\mathcal{B}$ 之间的定义性差异在于 $\\mathcal{A}$ 包含一个恰好有一个孩子的节点，而在 $\\mathcal{B}$ 中所有非叶节点至少有两个孩子。让我们将属性“存在一个恰好有一个孩子的节点”表达为一个一阶句子 $\\Phi$。一个节点 $u$ 恰好有一个孩子，意味着存在某个节点 $v$ 是 $u$ 的孩子，并且任何是 $u$ 的孩子的节点 $w$ 都必须与 $v$ 相同。\n\n这可以转化为以下一阶句子 $\\Phi$：\n$$ \\Phi \\equiv \\exists u \\, \\exists v \\, (C(u,v) \\land \\forall w \\, (C(u,w) \\rightarrow w=v)) $$\n这个句子 $\\Phi$ 在 $\\mathcal{A}$ 中为真（即 $\\mathcal{A} \\models \\Phi$），在 $\\mathcal{B}$ 中为假（即 $\\mathcal{B} \\models \\neg\\Phi$）。由于量词序列 $\\exists u \\, \\exists v \\, \\forall w$，$\\Phi$ 的量词秩为 $3$。\n\n根据 Ehrenfeucht-Fraïssé 定理，存在一个量词秩为 $3$ 的区分句，意味着 Spoiler 在 $3$ 轮博弈 $G_3(\\mathcal{A}, \\mathcal{B})$ 中有获胜策略。为了确定 $3$ 是否是所需的*最小*轮数，我们必须分析 $2$ 轮博弈 $G_2(\\mathcal{A}, \\mathcal{B})$。如果 Duplicator 赢得 $G_2$，则没有量词秩为 $2$ 的句子可以区分这两个结构，因此 $3$ 是最小的秩。\n\n**$2$ 轮博弈 $G_2(\\mathcal{A}, \\mathcal{B})$ 分析**\nDuplicator 有一个获胜策略。一个覆盖了从 $\\mathcal{A}$ 和 $\\mathcal{B}$ 中选出的元素的部分映射 $p = \\{(a_1, b_1), \\dots, (a_i, b_i)\\}$ 是一个部分同构，如果对于任何原子公式 $\\psi(x_1, \\dots, x_m)$ 和从 $p$ 的定义域中选择的任何元素 $c_1, \\dots, c_m$，我们有 $\\mathcal{A} \\models \\psi(c_1, \\dots, c_m) \\iff \\mathcal{B} \\models \\psi(p(c_1), \\dots, p(c_m))$。原子公式是 $x=y$、$R(x)$、$C(x,y)$ 和 $S(x,y)$。\n\n- **第 1 轮**：Spoiler 选择一个元素，比如 $a_1 \\in A$。如果 Spoiler 选择 $A$ 中有唯一孩子的节点 $u$，Duplicator 就回应一个 $B$ 中的非叶节点 $u'$。因为两棵树的高度都至少为 $2$，所以这样的节点是存在的。Duplicator 可以维持部分同构 $\\{(u, u')\\}$。例如，如果 $u$ 是 $\\mathcal{A}$ 的根，Duplicator 就选择 $\\mathcal{B}$ 的根。\n- **第 2 轮**：Spoiler 选择另一个元素，比如 $a_2 \\in A$。\n    - 如果 Spoiler 选择 $u$ 的唯一孩子 $v \\in A$，那么被选中的集合是 $\\{u,v\\}$。关系 $C(u,v)$ 成立。Duplicator 必须选择 $v' \\in B$ 使得 $C(u',v')$ 成立。由于 $u'$ 是非叶节点，它至少有两个孩子，所以 Duplicator 可以选择其中一个，称之为 $v'$。映射 $\\{(u,u'), (v,v')\\}$ 是一个部分同构。没有原子关系被违反。例如，$S(u,v)$ 是假的，$S(u',v')$ 也是假的，因为它们不是兄弟姐妹。\n    - 如果 Spoiler 选择任何其他元素 $a_2 \\in A$，Duplicator 的策略是选择一个相应的元素 $b_2 \\in B$ 来满足相同的局部属性（例如，是根、是叶子、是已选择元素的子/父/兄弟姐妹）。鉴于问题中关于相似性的假设，Duplicator 总能找到这样的匹配。\n\n经过 $2$ 轮后，Duplicator 总能维持一个部分同构。因此，Duplicator 赢得 $G_2(\\mathcal{A}, \\mathcal{B})$。\n\n**$3$ 轮博弈 $G_3(\\mathcal{A}, \\mathcal{B})$ 分析**\nSpoiler 有一个获胜策略，它反映了区分句 $\\Phi$。\n\n- **第 1 轮**：Spoiler 选择 $A$ 中有唯一孩子的节点 $u$。Duplicator 必须回应一个 $B$ 中的节点 $u'$。为了避免立即失败，Duplicator 必须选择一个非叶节点 $u'$（否则在下一步中子关系属性就会不匹配）。我们得到部分同构 $\\{(u, u')\\}$。\n- **第 2 轮**：Spoiler 选择节点 $u$ 的唯一孩子 $v \\in A$。Duplicator 必须回应 $u'$ 的一个孩子，比如 $v' \\in B$。由于 $u'$ 是 $\\mathcal{B}$ 中的非叶节点，它至少有两个孩子。Duplicator 选择其中一个。映射 $\\{(u, u'), (v, v')\\}$ 是一个部分同构。\n- **第 3 轮**：在 $\\mathcal{B}$ 中，节点 $u'$ 除了 $v'$ 之外至少还有另一个孩子。让 Spoiler 选择这样一个孩子 $w' \\in B$。因此，$C(u', w')$ 成立，$w' \\neq v'$，并且它们是不同的兄弟姐妹，所以 $S(v', w')$ 成立。现在，Duplicator 必须选择一个元素 $w \\in A$，使得映射 $\\{(u, u'), (v, v'), (w, w')\\}$ 是一个部分同构。这要求在 $\\mathcal{B}$ 中对 $(u', v', w')$ 成立的关系也必须在 $\\mathcal{A}$ 中对 $(u, v, w)$ 成立。具体来说，Duplicator 必须找到一个 $w \\in A$ 使得：\n    1.  $C(u, w)$ 成立（因为 $C(u', w')$ 成立）。\n    2.  $w \\neq v$ （因为 $w' \\neq v'$）。\n然而，根据构造，$A$ 中的 $u$ 只有一个孩子 $v$。在 $\\mathcal{A}$ 中不存在同时满足这两个条件的 $w$。Duplicator 无法做出合法的移动，Spoiler 获胜。\n\n这证实了 Spoiler 赢得 $G_3(\\mathcal{A}, \\mathcal{B})$。由于 Duplicator 赢得 $G_2(\\mathcal{A}, \\mathcal{B})$，Spoiler 获胜所需的最小轮数是 $3$。\n\n### 逐项分析\n\n**A. 在 $\\mathcal{A}$ 和 $\\mathcal{B}$ 上的 $2$ 轮 EF 博弈中，Spoiler 有一个获胜策略，通过在 $\\mathcal{A}$ 中选择一个父节点及其唯一子节点，因为兄弟关系在 $\\mathcal{B}$ 中被选中的元素中已经被违反。**\n我们的分析表明，在 $2$ 轮博弈中，Duplicator 有获胜策略，而不是 Spoiler。该选项中的推理也是错误的。在 Spoiler（在两轮中）选择了 $\\mathcal{A}$ 中的 $u$ 和孩子 $v$，并且 Duplicator 回应了 $\\mathcal{B}$ 中的 $u'$ 和孩子 $v'$ 之后，被选中的元素对是 $(u,v)$ 和 $(u',v')$。这两对都不是兄弟姐妹，所以关系 $S$ 对两对都为假：$\\neg S(u,v)$ 和 $\\neg S(u',v')$。没有发生兄弟关系的违反。\n**结论：不正确。**\n\n**B. Spoiler 需要 $3$ 轮来强制产生不匹配：在 $\\mathcal{A}$ 中选择父节点 $u$ 及其唯一子节点 $v$ 后，Spoiler 在第 $3$ 轮中选择 $\\mathcal{B}$ 中匹配的父节点 $u'$ 的第二个孩子 $w$；Duplicator 无法在 $\\mathcal{A}$ 中用 $v$ 的一个兄弟节点（不存在）来回应，同时保持部分同构，因此 Spoiler 在 $3$ 轮内获胜。**\n这个选项准确地描述了我们上面推导出的 Spoiler 在 $3$ 轮博弈中的获胜策略。它正确地指出了所需的轮数是 $3$。移动的顺序导致了一种情况，即 Duplicator 必须为 $\\mathcal{A}$ 中的节点 $u$ 找到第二个孩子，而这是不可能的。找到这样一个孩子等同于为 $v$ 找到一个兄弟姐妹，而它不存在。推理是正确的。\n**结论：正确。**\n\n**C. 一阶属性“存在一个恰好有一个孩子的节点”可以在 $\\mathcal{L}$ 中表达，且区分 $\\mathcal{A}$ 和 $\\mathcal{B}$ 的句子的最小量词秩是 $3$。**\n如前所示，该属性可以由句子 $\\Phi \\equiv \\exists u \\, \\exists v \\, (C(u,v) \\land \\forall w \\, (C(u,w) \\rightarrow w=v))$ 表达。该句子的量词秩为 $3$。由于 Duplicator 赢得 $2$ 轮博弈，因此没有量词秩为 $2$ 或更小的句子可以区分这两个结构。因此，区分句子的最小量词秩确实是 $3$。\n**结论：正确。**\n\n**D. 即使有 $3$ 轮，Duplicator 也总是可以通过选择叶节点来回应以保持部分同构，因此，在此签名中，EF 博弈无法检测到存在一个恰好有一个孩子的节点。**\n这在事实上是不正确的。我们已经明确地为 Spoiler 在 $3$ 轮博弈中构建了一个获胜策略。声称 Duplicator 总能回应（例如，“通过选择叶节点”）是错误的；在 Spoiler 获胜策略的最后一步中，Duplicator 根本没有有效的回应，无论任何节点是否是叶节点。该属性是可检测的。\n**结论：不正确。**\n\n**E. 兄弟关系 $S(x,y)$ 对于这种区分并非必不可少：在仅包含 $R(x)$ 和 $C(x,y)$ 的签名中，Spoiler 仍然可以通过在 $\\mathcal{A}$ 中选择一个父节点及其唯一子节点，然后在 $\\mathcal{B}$ 中选择匹配父节点的第二个孩子，从而在 $3$ 轮内获胜，以此强制违反 $\\mathcal{A}$ 中的子关系配置。**\n问题陈述 $S(x,y)$ 解释为 $\\exists p (C(p,x) \\land C(p,y) \\land x \\neq y)$。这意味着 $S$ 是可以用 $C$ 显式定义的。向一种语言添加一个可定义的关系不会增加其表达能力。因此，如果结构是可区分的，那么它们在没有该定义关系的原始语言中也必须是可区分的。上面概述的 Spoiler 的获胜策略依赖于在 $\\mathcal{B}$ 中找到 $u'$ 的第二个孩子 $w'$。Duplicator 失败是因为它无法在 $\\mathcal{A}$ 中找到 $u$ 对应的第二个孩子 $w$。这个失败源于子关系 $C$ 本身的属性（$w$ 必须满足 $C(u,w)$ 和 $w \\neq v$）。兄弟关系 $S$ 对于证明矛盾并非必要。这个选项正确地陈述了这一事实。\n**结论：正确。**\n\n最终总结：选项 B、C 和 E 是正确的陈述。", "answer": "$$\\boxed{BCE}$$", "id": "2972065"}, {"introduction": "最后的这项练习将探讨模型论中一个更高级、更精妙的主题，挑战我们关于逻辑等价性在结构变换下是否保持不变的直觉。虽然两个结构在某个量词秩下可能无法区分，但该性质并不总能延续到它们的商结构中。本练习 ([@problem_id:2972081]) 展示了一个引人入胜的案例：通过一个可定义等价关系进行商运算，可以创造出一个全新的、易于检测的结构特征，从而打破了原有的不可区分性，揭示了逻辑性质在结构变换下可能出现的意想不到的行为。", "problem": "设 $\\tau$ 是一个有限关系词汇表，由两个二元关系符号 $S$ 和 $R$ 组成。考虑一个固定的整数 $d \\geq 3$，下面两个 $\\tau$-结构 $\\mathcal{A}$ 和 $\\mathcal{B}$ 的论域均为 $A = B = \\{0,1,\\dots,2d-1\\}$，其中两者都将 $S$ 解释为长度为 $2d$ 的有向循环上的后继关系：\n$$S^{\\mathcal{M}}(i,j) \\text{ 成立当且仅当 } j \\equiv i+1 \\pmod{2d},$$\n其中 $\\mathcal{M} \\in \\{\\mathcal{A},\\mathcal{B}\\}$。通过设置\n$$R^{\\mathcal{A}} = \\{(0,d),(d,0)\\}, \\quad R^{\\mathcal{B}} = \\{(0,d+1),(d+1,0)\\},$$\n将 $R$ 解释为一条无向边。\n定义 $\\tau$ 上的一个一阶公式 $\\varphi_{d}(x,y)$ 如下：\n$$\\varphi_{d}(x,y) := (x=y) \\lor \\bigl(\\exists z_{1}\\dots\\exists z_{d-1}\\,\\bigwedge_{k=0}^{d-1} S(u_{k},u_{k+1})\\bigr) \\lor \\bigl(\\exists w_{1}\\dots\\exists w_{d-1}\\,\\bigwedge_{k=0}^{d-1} S(v_{k},v_{k+1})\\bigr),$$\n其中元组简写为 $u_{0}=x, u_{d}=y, v_{0}=y, v_{d}=x$，并且 $u_{k},v_{k}$ 的范围是量化变量；非形式地说，$\\varphi_{d}(x,y)$ 断言 $x=y$ 或者 $y$ 可以从 $x$ 经过恰好 $d$ 步正向 $S$ 步到达，或者对称地，$x$ 可以从 $y$ 经过恰好 $d$ 步正向 $S$ 步到达。在长度为 $2d$ 的循环上，由 $x \\sim_{d} y$ 当且仅当 $\\varphi_{d}(x,y)$ 成立所定义的二元关系 $\\sim_{d}$ 是一个等价关系，其等价类是数对 $\\{i,i+d\\}$。\n\n构造商结构 $\\mathcal{A}/\\!\\sim_{d}$ 和 $\\mathcal{B}/\\!\\sim_{d}$，其论域为 $\\sim_{d}$-等价类的集合，并通过通常的同态“存在代表元”语义来解释每个关系符号：对于关系符号 $Q \\in \\{S,R\\}$，定义\n$$Q^{\\mathcal{M}/\\!\\sim_{d}}([x],[y]) \\text{ 当且仅当 } \\exists x' \\in [x]\\,\\exists y' \\in [y] \\text{ 使得 } Q^{\\mathcal{M}}(x',y'),$$\n其中 $[x]$ 表示 $x$ 的 $\\sim_{d}$-等价类，且 $\\mathcal{M} \\in \\{\\mathcal{A},\\mathcal{B}\\}$。\n\n从 Ehrenfeucht-Fraïssé 博弈和一阶可定义性的第一性原理出发，论证为何原始结构 $\\mathcal{A}$ 和 $\\mathcal{B}$ 不能被量词秩小于 $d$ 的句子区分，然而由 $\\sim_{d}$ 诱导的等同在 $\\mathcal{A}/\\!\\sim_{d}$ 中创造了一个 $\\mathcal{B}/\\!\\sim_{d}$ 中所没有的结构特征，并且该特征可以被一个量词秩为 $1$ 的句子检测到。利用这一点来确定最小的自然数 $k$，使得 Spoiler 在商结构 $\\mathcal{A}/\\!\\sim_{d}$ 和 $\\mathcal{B}/\\!\\sim_{d}$ 上的 $k$ 轮 Ehrenfeucht-Fraïssé 博弈中拥有必胜策略，即在 $k$ 轮内 Spoiler 可以强制形成一个违反商结构博弈中部分同构条件的局面。提供 $k$ 的精确整数值，不进行四舍五入且不带单位，并证明其是最小的。\n\n你的推导必须从 Ehrenfeucht-Fraïssé 博弈的核心定义、量词秩与必胜策略之间的联系，以及通过一阶可定义等价关系构造商结构开始。你必须明确展示一个在商结构上利用了这种等同的 Spoiler 策略，并说明 Duplicator 在原始结构上的策略为何无法提升，除非商映射单射地保持了已放置棋子的元组。", "solution": "问题要求在商结构 $\\mathcal{A}/\\!\\sim_{d}$ 和 $\\mathcal{B}/\\!\\sim_{d}$ 上的 Ehrenfeucht-Fraïssé 博弈中，Spoiler 获胜所需的最小轮数 $k$。为了解决这个问题，我们必须首先理解原始结构 $\\mathcal{A}$ 和 $\\mathcal{B}$，然后构造它们的商结构，最后分析在这些商结构上的博弈。\n\n一个 Ehrenfeucht-Fraïssé 博弈 $G_k(\\mathcal{M}_1, \\mathcal{M}_2)$ 在两个玩家 Spoiler 和 Duplicator 之间进行 $k$ 轮，作用于两个具有相同词汇表的结构 $\\mathcal{M}_1$ 和 $\\mathcal{M}_2$。在每一轮 $i \\in \\{1, \\dots, k\\}$ 中，Spoiler 选择一个元素，可以是 $a_i \\in M_1$ 或 $b_i \\in M_2$。Duplicator 必须在另一个结构中选择一个元素。经过 $k$ 轮后，选出了一组配对 $\\{(a_1,b_1), \\dots, (a_k,b_k)\\}$。如果映射 $f: a_i \\mapsto b_i$ 是一个部分同构，Duplicator 就获胜。这意味着它是一个双射，并且对于词汇表中的任何关系符号 $Q$ 和任何已选元素的元组，$Q^{\\mathcal{M}_1}(a_{i_1}, \\dots, a_{i_m})$ 成立当且仅当 $Q^{\\mathcal{M}_2}(b_{i_1}, \\dots, b_{i_m})$ 成立。如果 Duplicator 无法维持这个条件，则 Spoiler 获胜。Ehrenfeucht-Fraïssé 定理指出，Duplicator 在 $k$ 轮博弈中有必胜策略，当且仅当 $\\mathcal{M}_1$ 和 $\\mathcal{M}_2$ 对于所有量词秩至多为 $k$ 的一阶句子是初等等价的，记作 $\\mathcal{M}_1 \\equiv_k \\mathcal{M}_2$。\n\n首先，我们来分析原始结构 $\\mathcal{A}$ 和 $\\mathcal{B}$。两者都有论域 $\\{0, 1, \\dots, 2d-1\\}$ 并且将 $S$ 解释为长度为 $2d$ 的有向循环上的后继关系。这两个结构仅在对 $R$ 的解释上有所不同。在 $\\mathcal{A}$ 中，$R^{\\mathcal{A}}$ 连接了对跖点 $0$ 和 $d$。沿循环这两点之间的距离是 $d$。在 $\\mathcal{B}$ 中，$R^{\\mathcal{B}}$ 连接了 $0$ 和 $d+1$。从 $d+1$ 到 $0$ 的最短有向路径是 $d+1 \\to d+2 \\to \\dots \\to 2d-1 \\to 0$，其长度为 $(2d-1) - (d+1) + 1 = d-1$。从 $0$ 到 $d+1$ 的最短有向路径长度为 $d+1$。在循环上的最短无向距离是 $\\min(d+1, 2d-(d+1)) = d-1$。为了区分这两个结构，必须检测出 $R$ 关系连接的点之间距离的这种差异。一个表达“存在两个由 $R$ 连接的点，它们在循环上的距离为 $d-1$”的一阶句子在 $\\mathcal{B}$ 中为真，但在 $\\mathcal{A}$ 中为假。一个表示长度为 $m$ 的路径的公式需要 $m-1$ 个存在量词来表示中间点。因此，要表示 $d-1$ 的距离，需要一个量词秩至少为 $d-2$ 的公式。再加上用于 $R$ 边端点的两个量词，一个能够区分的句子需要量词秩为 $d$。因此，对于任何量词秩小于 $d$ 的句子，它在 $\\mathcal{A}$ 中成立当且仅当它在 $\\mathcal{B}$ 中成立。这意味着 $\\mathcal{A} \\equiv_{d-1} \\mathcal{B}$。根据 Ehrenfeucht-Fraïssé 定理，对于任何 $k  d$，Duplicator 在博弈 $G_k(\\mathcal{A}, \\mathcal{B})$ 中有必胜策略。这两个结构在少于 $d$ 轮的博弈中是不可区分的。\n\n接下来，我们构造商结构 $\\mathcal{C}_{\\mathcal{A}} = \\mathcal{A}/\\!\\sim_d$ 和 $\\mathcal{C}_{\\mathcal{B}} = \\mathcal{B}/\\!\\sim_d$。等价关系 $x \\sim_d y$ 成立，如果 $x=y$ 或 $y \\equiv x+d \\pmod{2d}$。等价类是 $d$ 个数对 $[i]_{\\sim_d} = \\{i, i+d\\}$，其中 $i \\in \\{0, 1, \\dots, d-1\\}$。我们把等价类 $[i]_{\\sim_d}$ 简记为 $[i]$。两个商结构的论域都是 $\\{[0], [1], \\dots, [d-1]\\}$。\n\n我们使用“存在代表元”语义来确定商结构中关系 $S$ 和 $R$ 的解释。设 $\\mathcal{C}$ 是其中一个商结构。\n对于后继关系 $S$：$S^{\\mathcal{C}}([i],[j])$ 成立当且仅当 $\\exists i' \\in [i], \\exists j' \\in [j]$ 使得 $j' \\equiv i'+1 \\pmod{2d}$。对于任何 $i \\in \\{0, \\dots, d-1\\}$，我们来检查 $S^{\\mathcal{C}}([i],[i+1 \\pmod d])$。等价类 $[i+1 \\pmod d]$ 包含元素 $i+1 \\pmod{2d}$ (除非 $i=d-1$，此时 $[0]$ 包含 $d \\not\\equiv i+1$)。取 $i' = i \\in [i]$ 和 $j'=i+1 \\in [i+1]$。那么 $S(i,i+1)$ 成立。如果 $i=d-1$，取 $i'=2d-1 \\in [d-1]$ 和 $j'=0 \\in [0]$，那么 $S(2d-1,0)$ 成立。因此，对于 $\\mathcal{C}_{\\mathcal{A}}$ 和 $\\mathcal{C}_{\\mathcal{B}}$，都有 $S^{\\mathcal{C}}([i],[j])$ 成立当且仅当 $j \\equiv i+1 \\pmod d$。两个商结构都将 $S$ 解释为长度为 $d$ 的简单有向循环。\n\n对于关系 $R$：\n在 $\\mathcal{C}_{\\mathcal{A}} = \\mathcal{A}/\\!\\sim_d$ 中，$R^{\\mathcal{C}_{\\mathcal{A}}}([i],[j])$ 当且仅当 $\\exists i' \\in [i], \\exists j' \\in [j]$ 使得 $\\{i',j'\\} = \\{0,d\\}$。元素 $0$ 和 $d$ 在同一个等价类中：$[0] = \\{0,d\\}$。所以我们可以选择 $i'=0, j'=d$，它们都来自 $[0]$。这意味着 $R^{\\mathcal{C}_{\\mathcal{A}}}([0],[0])$ 成立。由于 $\\{0,d\\}$ 是唯一被 $R^{\\mathcal{A}}$ 关联的点，这是商结构中唯一非平凡的 $R$ 关系。$\\mathcal{C}_{\\mathcal{A}}$ 在顶点 $[0]$ 上有一个自反的 $R$ 边（一个环）。\n\n在 $\\mathcal{C}_{\\mathcal{B}} = \\mathcal{B}/\\!\\sim_d$ 中，$R^{\\mathcal{C}_{\\mathcal{B}}}([i],[j])$ 当且仅当 $\\exists i' \\in [i], \\exists j' \\in [j]$ 使得 $\\{i',j'\\} = \\{0,d+1\\}$。元素 $0$ 在等价类 $[0]=\\{0,d\\}$ 中。元素 $d+1$ 在等价类 $[1]=\\{1,1+d\\}$ 中（因为 $d+1 \\sim_d 1$）。因此，我们可以选择 $i'=0 \\in [0]$ 和 $j'=d+1 \\in [1]$。这意味着 $R^{\\mathcal{C}_{\\mathcal{B}}}([0],[1])$ 成立。由于 $R^{\\mathcal{B}}$ 是对称的，$R^{\\mathcal{C}_{\\mathcal{B}}}([1],[0])$ 也成立。没有其他等价类对被 $R^{\\mathcal{C}_{\\mathcal{B}}}$ 关联。因此，$\\mathcal{C}_{\\mathcal{B}}$ 在顶点 $[0]$ 和 $[1]$ 之间有一条无向的 $R$ 边。\n\n现在我们分析在 $\\mathcal{C}_{\\mathcal{A}}$ 和 $\\mathcal{C}_{\\mathcal{B}}$ 上的 Ehrenfeucht-Fraïssé 博弈。\n$\\mathcal{C}_{\\mathcal{A}}$ 是一个带环 $R([0],[0])$ 的 $d$-循环。\n$\\mathcal{C}_{\\mathcal{B}}$ 是一个带边 $R([0],[1])$ 的 $d$-循环。\n这两个结构可以被一个量词秩为 $1$ 的句子区分：$\\psi := \\exists x \\, R(x,x)$。\n$\\mathcal{C}_{\\mathcal{A}} \\models \\psi$ 因为对于 $x=[0]$，$R^{\\mathcal{C}_{\\mathcal{A}}}([0],[0])$ 为真。\n$\\mathcal{C}_{\\mathcal{B}} \\not\\models \\psi$ 因为在 $\\mathcal{C}_{\\mathcal{B}}$ 中没有顶点 $[i]$ 使得 $R^{\\mathcal{C}_{\\mathcal{B}}}([i],[i])$ 为真。正如我们所示，$R^{\\mathcal{C}_{\\mathcal{B}}}$ 仅对配对 $([0],[1])$ 成立。\n\n由于这两个结构可以被一个量词秩为 $1$ 的句子区分，Spoiler 在 $1$ 轮博弈 $G_1(\\mathcal{C}_{\\mathcal{A}}, \\mathcal{C}_{\\mathcal{B}})$ 中有必胜策略。我们来详细说明这个策略。\n第 1 轮：Spoiler 在 $\\mathcal{C}_{\\mathcal{A}}$ 中选择元素 $a_1 = [0]$。\nDuplicator 必须从 $\\mathcal{C}_{\\mathcal{B}}$ 中回应一个元素 $b_1 = [j]$，使得映射 $\\{ (a_1, b_1) \\}$ 是一个部分同构。\n这要求对于任何关系符号 $Q \\in \\{S,R\\}$，$Q(a_1, a_1)$ 在 $\\mathcal{C}_{\\mathcal{A}}$ 中成立当且仅当 $Q(b_1, b_1)$ 在 $\\mathcal{C}_{\\mathcal{B}}$ 中成立。\n我们来检查这些关系：\n1. $S^{\\mathcal{C}_{\\mathcal{A}}}([0],[0])$：这是假的，因为 $S$ 构成一个长度为 $d \\ge 3$ 的简单循环。对于任何 $j$，$S^{\\mathcal{C}_{\\mathcal{B}}}([j],[j])$ 也为假。所以对于 $b_1$ 的任何选择，这个条件都成立。\n2. $R^{\\mathcal{C}_{\\mathcal{A}}}([0],[0])$：这是真的，如前所述。因此 Duplicator 必须选择 $b_1=[j]$ 使得 $R^{\\mathcal{C}_{\\mathcal{B}}}([j],[j])$ 为真。\n然而，我们已经证明在 $\\mathcal{C}_{\\mathcal{B}}$ 的论域中不存在带有自反 $R$ 环的元素 $[j]$。Duplicator 没有有效的走法，立即失败。\n\nSpoiler 在 1 轮博弈中有必胜策略。博弈不可能在 0 轮内获胜，除非一个结构为空而另一个不为空。两个结构都是非空的。因此，Spoiler 拥有必胜策略的最小自然数 $k$ 是 $1$。\n\n问题要求解释为什么 Duplicator 在原始结构上的策略无法提升到商结构上。Duplicator 在 $(\\mathcal{A}, \\mathcal{B})$ 上的一个必胜策略，会对 Spoiler 的任何选择序列，产生一个构成部分同构的配对序列 $(a_i, b_i)$。考虑当我们应用商映射 $\\pi$ 时会发生什么。在 $\\mathcal{A}$ 中，关系 $R^{\\mathcal{A}}$ 存在于两个元素 $0$ 和 $d$ 之间，而这两个元素被 $\\sim_d$ “粘合”在一起。商映射 $\\pi_{\\mathcal{A}}$ 在集合 $\\{0, d\\}$ 上不是单射的。正是这种塌陷创造了自反边 $R^{\\mathcal{C}_{\\mathcal{A}}}([0],[0])$。在 $\\mathcal{B}$ 中，关系 $R^{\\mathcal{B}}$ 存在于 $0$ 和 $d+1$ 之间。这些元素属于不同的等价类 $[0]$ 和 $[1]$。商映射 $\\pi_{\\mathcal{B}}$ 在集合 $\\{0, d+1\\}$ 上是单射的。由于商映射作用于 $R$ 相关实体的方式存在这种根本差异，Duplicator 在原始博弈中维持的局部同构并不能转化为相应商元素之间的同构。例如，Duplicator 可能会维持一个将 $a_1=0 \\in \\mathcal{A}$ 映射到 $b_1=0 \\in \\mathcal{B}$ 的部分同构。在商结构中，这对应于将 $\\pi_{\\mathcal{A}}(a_1) = [0]$ 映射到 $\\pi_{\\mathcal{B}}(b_1) = [0]$。但是这个单元素集合的映射 $[0] \\mapsto [0]$ 并不是 $\\mathcal{C}_{\\mathcal{A}}$ 和 $\\mathcal{C}_{\\mathcal{B}}$ 之间的部分同构，因为 $R^{\\mathcal{C}_{\\mathcal{A}}}([0],[0])$ 为真，而 $R^{\\mathcal{C}_{\\mathcal{B}}}([0],[0])$ 为假。该策略无法提升，因为商映射将 $\\mathcal{A}$ 中不同但相关的点等同起来，从而创造了一个在 $\\mathcal{B}$ 的商结构中不存在的新拓扑特征（一个环）。", "answer": "$$\\boxed{1}$$", "id": "2972081"}]}
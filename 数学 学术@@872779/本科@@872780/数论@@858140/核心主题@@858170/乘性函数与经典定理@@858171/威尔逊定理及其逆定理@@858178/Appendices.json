{"hands_on_practices": [{"introduction": "理论是抽象的，但通过具体计算可以获得直观的理解。这个练习旨在通过小素数 $p=5, 7, 11$ 来亲手验证威尔逊定理，让你从第一性原理出发，通过配对乘法逆元的方式，体验该定理证明的核心思想。[@problem_id:3094034]", "problem": "设 $p$ 是一个素数，并定义 $P(p) \\equiv \\prod_{a=1}^{p-1} a \\pmod{p}$。仅使用关于素数模的模运算的基本性质——具体来说，即每个非零的模 $p$ 剩余类都有唯一的模 $p$ 乘法逆元，以及如果 $x \\equiv y \\pmod{p}$，则当 $y \\equiv x^{-1} \\pmod{p}$ 时 $xy \\equiv x^{2} \\pmod{p}$——从第一性原理出发，计算对于 $p \\in \\{5,7,11\\}$ 的 $P(p) \\pmod{p}$。对于 $p=5$、$p=7$ 和 $p=11$ 中的每一个，确定 $P(p)$ 模 $p$ 的最小非负余数。然后，令 $S$ 表示这三个最小非负余数的和。$S$ 的精确值是多少？以单个整数的形式提供您的最终答案。无需四舍五入，也无需单位。", "solution": "问题要求计算对于素数 $p=5$、$p=7$ 和 $p=11$ 的 $P(p) \\equiv \\prod_{a=1}^{p-1} a \\pmod{p}$，然后求出所得的最小非负余数之和 $S$。计算必须基于第一性原理，具体来说，是利用对于一个素数模 $p$，每个非零剩余类都有一个唯一的乘法逆元这一性质。\n\n设 $\\mathbb{Z}_p^* = \\{1, 2, \\dots, p-1\\}$ 是模 $p$ 的非零剩余类的集合。我们被要求计算的乘积是 $P(p) = (p-1)!$。核心原理是将 $\\mathbb{Z}_p^*$ 中的每个元素 $a$ 与其唯一的乘法逆元 $a^{-1} \\in \\mathbb{Z}_p^*$ 配对。这样一对的乘积是 $a \\cdot a^{-1} \\equiv 1 \\pmod{p}$。\n\n不能与一个不同的元素配对的元素是那些自身的逆元。这些是同余式 $x^2 \\equiv 1 \\pmod{p}$ 的解。这可以重写为 $x^2 - 1 \\equiv 0 \\pmod{p}$，可因式分解为 $(x-1)(x+1) \\equiv 0 \\pmod{p}$。由于 $p$ 是一个素数，这意味着 $p | (x-1)$ 或 $p | (x+1)$。\n这给出了 $x$ 在 $\\mathbb{Z}_p^*$ 中的两个解：\n1. $x-1 \\equiv 0 \\pmod{p} \\implies x \\equiv 1 \\pmod{p}$。\n2. $x+1 \\equiv 0 \\pmod{p} \\implies x \\equiv -1 \\pmod{p}$。\n\n在集合 $\\{1, 2, \\dots, p-1\\}$ 中，剩余类 $-1 \\pmod{p}$ 对应于整数 $p-1$。对于给定的素数（$p=5, 7, 11$），$p$ 大于 $2$，所以 $1 \\not\\equiv p-1 \\pmod{p}$。因此，在 $\\mathbb{Z}_p^*$ 中恰好有两个元素是自身的逆元：$1$ 和 $p-1$。\n\n集合 $\\mathbb{Z}_p^* \\setminus \\{1, p-1\\}$ 中的所有其他元素可以被分组成对 $(a, a^{-1})$，其中 $a \\neq a^{-1}$。每一对这样的元素的乘积都是 $1 \\pmod{p}$。集合 $\\{2, 3, \\dots, p-2\\}$ 包含 $p-3$ 个元素。由于每对由 $2$ 个不同的元素组成，所以有 $(p-3)/2$ 对这样的配对。\n\n因此，乘积 $P(p)$ 可以计算如下：\n$$P(p) = (p-1)! \\equiv 1 \\cdot (p-1) \\cdot \\prod_{a \\in \\{2, \\dots, p-2\\}} a \\pmod{p}$$\n集合 $\\{2, \\dots, p-2\\}$ 上的乘积是 $(p-3)/2$ 对元素的乘积，每一对都与 $1$ 模 $p$ 同余。\n$$P(p) \\equiv 1 \\cdot (p-1) \\cdot (1)^{(p-3)/2} \\pmod{p}$$\n$$P(p) \\equiv p-1 \\pmod{p}$$\n由于 $p-1 \\equiv -1 \\pmod{p}$，这是一般性结果，被称为威尔逊定理。我们现在将按要求将此推理应用于每个具体情况。\n\n情况 1：$p=5$\n我们需要计算 $P(5) = (5-1)! = 4! \\pmod{5}$。\n非零剩余类的集合是 $\\{1, 2, 3, 4\\}$。\n自逆元是 $1$ 和 $4$（因为 $4 \\equiv -1 \\pmod{5}$ 并且 $4^2 = 16 \\equiv 1 \\pmod{5}$）。\n剩下的元素是 $\\{2, 3\\}$。我们检验它们互为逆元：$2 \\cdot 3 = 6 \\equiv 1 \\pmod{5}$。\n所以，我们可以将乘积分组如下：\n$$P(5) = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\equiv 1 \\cdot (2 \\cdot 3) \\cdot 4 \\pmod{5}$$\n$$P(5) \\equiv 1 \\cdot 1 \\cdot 4 \\pmod{5}$$\n$$P(5) \\equiv 4 \\pmod{5}$$\n对于 $p=5$，最小非负余数是 $4$。\n\n情况 2：$p=7$\n我们需要计算 $P(7) = (7-1)! = 6! \\pmod{7}$。\n非零剩余类的集合是 $\\{1, 2, 3, 4, 5, 6\\}$。\n自逆元是 $1$ 和 $6$（因为 $6 \\equiv -1 \\pmod{7}$）。\n剩下的元素是 $\\{2, 3, 4, 5\\}$。我们组成乘法逆元对：\n- $2 \\cdot 4 = 8 \\equiv 1 \\pmod{7}$。这一对是 $(2, 4)$。\n- $3 \\cdot 5 = 15 \\equiv 1 \\pmod{7}$。这一对是 $(3, 5)$。\n所以，我们可以将乘積分組如下：\n$$P(7) = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5 \\cdot 6 \\equiv 1 \\cdot (2 \\cdot 4) \\cdot (3 \\cdot 5) \\cdot 6 \\pmod{7}$$\n$$P(7) \\equiv 1 \\cdot 1 \\cdot 1 \\cdot 6 \\pmod{7}$$\n$$P(7) \\equiv 6 \\pmod{7}$$\n对于 $p=7$，最小非负余数是 $6$。\n\n情况 3：$p=11$\n我们需要计算 $P(11) = (11-1)! = 10! \\pmod{11}$。\n非零剩余类的集合是 $\\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$。\n自逆元是 $1$ 和 $10$（因为 $10 \\equiv -1 \\pmod{11}$）。\n剩下的元素是 $\\{2, 3, 4, 5, 6, 7, 8, 9\\}$。我们组成乘法逆元对：\n- $2 \\cdot 6 = 12 \\equiv 1 \\pmod{11}$。这一对是 $(2, 6)$。\n- $3 \\cdot 4 = 12 \\equiv 1 \\pmod{11}$。这一对是 $(3, 4)$。\n- $5 \\cdot 9 = 45 \\equiv 1 \\pmod{11}$（因为 $45 = 4 \\cdot 11 + 1$）。这一对是 $(5, 9)$。\n- $7 \\cdot 8 = 56 \\equiv 1 \\pmod{11}$（因为 $56 = 5 \\cdot 11 + 1$）。这一对是 $(7, 8)$。\n所以，我们可以将乘积分组如下：\n$$P(11) = 1 \\cdot (2 \\cdot 6) \\cdot (3 \\cdot 4) \\cdot (5 \\cdot 9) \\cdot (7 \\cdot 8) \\cdot 10 \\pmod{11}$$\n$$P(11) \\equiv 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 10 \\pmod{11}$$\n$$P(11) \\equiv 10 \\pmod{11}$$\n对于 $p=11$，最小非负余数是 $10$。\n\n最后，我们被要求求出 $S$ 的值，即这三个最小非负余数的和。\n设 $r_p$ 是 $P(p) \\pmod{p}$ 的最小非负余数。\n我们得到 $r_5 = 4$，$r_7 = 6$ 和 $r_{11} = 10$。\n$$S = r_5 + r_7 + r_{11}$$\n$$S = 4 + 6 + 10$$\n$$S = 20$$", "answer": "$$\n\\boxed{20}\n$$", "id": "3094034"}, {"introduction": "威尔逊定理是一个关于素数的“当且仅当”的判别法，这意味着它对合数不成立。本练习将引导你探讨合数 $n$ 的情况，计算 $(n-1)! \\pmod{n}$，并理解为何当 $n \\gt 4$ 为合数时，结果通常为 $0$。这有助于你全面掌握威尔逊定理作为素数判别法的重要性。[@problem_id:3094020]", "problem": "设 $n$ 是一个正整数，令 $(n-1)!$ 表示 $n-1$ 的阶乘。仅使用关于模 $n$ 同余的基本性质、$n$ 的质因数分解以及关于阶乘中质数指数的标准结论，计算对于每个 $n \\in \\{4,6,8,9,10,12\\}$ 的 $(n-1)! \\bmod n$ 的余数，而无需显式地展开阶乘。对于每种情况，通过分析乘积 $1 \\cdot 2 \\cdot \\dots \\cdot (n-1)$ 内的整除性，给出你所得到余数的清晰论证，并判断余数是 $0$、$1$ 还是模 $n$ 的其他余数。将你最终的六个余数按 $n=4,6,8,9,10,12$ 的顺序表示为单个行矩阵。", "solution": "该问题要求计算对于一组合数 $n \\in \\{4, 6, 8, 9, 10, 12\\}$，$(n-1)!$ 模 $n$ 的余数。对于一个合数 $n$，一般原则是如果 $n > 4$，那么 $(n-1)!$ 能被 $n$ 整除，即 $(n-1)! \\equiv 0 \\pmod{n}$。唯一的合数例外是 $n=4$。我们将通过分析基于 $n$ 的因子的 $(n-1)!$ 的整除性，对每个给定的 $n$ 值验证这一原则。\n\n分析将对每个 $n$ 值分情况进行。\n\n情况 $n=4$：\n数字 $n=4$ 是一个合数，其质因数分解为 $2^2$。我们需要计算 $(4-1)! \\pmod{4}$，即 $3! \\pmod{4}$。\n阶乘计算为 $3! = 1 \\cdot 2 \\cdot 3 = 6$。\n为了求 $6$ 模 $4$ 的余数，我们进行除法运算：$6 = 1 \\cdot 4 + 2$。\n因此，$3! \\equiv 2 \\pmod{4}$。\n阶乘 $3!$ 的乘数是 $1, 2, 3$。因为 $4$ 的质因数分解是 $2^2$，要使 $4$ 整除 $3!$，质因子 $2$ 必须在 $3!$ 的质因数分解中至少出现两次。然而，它只出现了一次。因此，$4$ 不能整除 $3!$，余数非零。\n余数是 $2$。这被归类为除 $0$ 或 $1$ 之外的余数。\n\n情况 $n=6$：\n数字 $n=6$ 是一个合数，其质因数分解为 $2 \\cdot 3$。我们需要计算 $(6-1)! \\pmod{6}$，即 $5! \\pmod{6}$。\n阶乘的乘积是 $5! = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5$。\n整数 $n=6$ 可以写成两个不同整数的乘积，$n=2 \\cdot 3$。\n这两个因子 $2$ 和 $3$ 都小于 $6$，因此都出现在 $5!$ 的乘数列表中。\n由于 $2$ 和 $3$ 是乘积 $1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5$ 中的不同因子，它们的乘积 $2 \\cdot 3 = 6$ 必定是 $5!$ 的一个约数。\n这意味着 $5!$ 是 $6$ 的倍数。\n因此，$(6-1)! \\equiv 0 \\pmod{6}$。\n余数是 $0$。\n\n情况 $n=8$：\n数字 $n=8$ 是一个合数，其质因数分解为 $2^3$。我们需要计算 $(8-1)! \\pmod{8}$，即 $7! \\pmod{8}$。\n阶乘的乘积是 $7! = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5 \\cdot 6 \\cdot 7$。\n整数 $n=8$ 可以写成两个不同整数的乘积，$n=2 \\cdot 4$。\n这两个因子 $2$ 和 $4$ 都小于 $8$ 且不相同。它们都出现在 $7!$ 的乘数列表中。\n因此，它们的乘积 $2 \\cdot 4 = 8$ 必定是 $7!$ 的一个约数。\n这意味着 $7!$ 是 $8$ 的倍数。\n因此，$(8-1)! \\equiv 0 \\pmod{8}$。\n余数是 $0$。\n\n情况 $n=9$：\n数字 $n=9$ 是一个合数，其质因数分解为 $3^2$。我们需要计算 $(9-1)! \\pmod{9}$，即 $8! \\pmod{9}$。\n阶乘的乘积是 $8! = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5 \\cdot 6 \\cdot 7 \\cdot 8$。\n与前面的情况不同，$n=9$ 不能写成两个都小于 $9$ 的不同整数的乘积（因为 $9=3 \\cdot 3$）。然而，我们可以在 $8!$ 的乘积中找到两个不同的因子，它们的乘积是 $9$ 的倍数。\n考虑因子 $3$ 和 $6$。它们都小于 $9$ 并且是出现在 $8!$ 乘积中的不同整数。\n它们的乘积是 $3 \\cdot 6 = 18$。\n由于 $18 = 2 \\cdot 9$，我们看到 $18$ 是 $9$ 的倍数。\n因为 $8!$ 能被 $18$ 整除，所以它也一定能被 $9$ 整除。\n这意味着 $8!$ 是 $9$ 的倍数。\n因此，$(9-1)! \\equiv 0 \\pmod{9}$。\n余数是 $0$。\n\n情况 $n=10$：\n数字 $n=10$ 是一个合数，其质因数分解为 $2 \\cdot 5$。我们需要计算 $(10-1)! \\pmod{10}$，即 $9! \\pmod{10}$。\n阶乘的乘积是 $9! = 1 \\cdot 2 \\cdot \\dots \\cdot 9$。\n整数 $n=10$ 可以写成两个不同整数的乘积，$n=2 \\cdot 5$。\n这两个因子 $2$ 和 $5$ 都小于 $10$ 且不相同。它们都出现在 $9!$ 的乘数列表中。\n因此，它们的乘积 $2 \\cdot 5 = 10$ 必定是 $9!$ 的一个约数。\n这意味着 $9!$ 是 $10$ 的倍数。\n因此，$(10-1)! \\equiv 0 \\pmod{10}$。\n余数是 $0$。\n\n情况 $n=12$：\n数字 $n=12$ 是一个合数，其质因数分解为 $2^2 \\cdot 3$。我们需要计算 $(12-1)! \\pmod{12}$，即 $11! \\pmod{12}$。\n阶乘的乘积是 $11! = 1 \\cdot 2 \\cdot \\dots \\cdot 11$。\n整数 $n=12$ 可以写成两个不同整数的乘积，$n=3 \\cdot 4$。\n这两个因子 $3$ 和 $4$ 都小于 $12$ 且不相同。它们都出现在 $11!$ 的乘数列表中。\n因此，它们的乘积 $3 \\cdot 4 = 12$ 必定是 $11!$ 的一个约数。\n这意味着 $11!$ 是 $12$ 的倍数。\n因此，$(12-1)! \\equiv 0 \\pmod{12}$。\n余数是 $0$。\n\n对于 $n \\in \\{4, 6, 8, 9, 10, 12\\}$，最终的余数列表是 $(2, 0, 0, 0, 0, 0)$。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n2  0  0  0  0  0\n\\end{pmatrix}\n}\n$$", "id": "3094020"}, {"introduction": "威尔逊定理的证明方法——配对逆元——是群论中一个更普适的技巧。这个进阶练习将此概念从模素数 $p$ 的乘法群 $\\mathbb{Z}_p^*$ 推广到模合数 $n$ 的单位群 $U(n)$。通过计算 $U(n)$ 中所有元素的乘积，你将发现其结果与群中自逆元素（即满足 $x^2 \\equiv 1 \\pmod{n}$ 的元素）密切相关，从而深化对群结构和数论之间联系的理解。[@problem_id:3094028]", "problem": "设 $U(n)$ 表示模 $n$ 的乘法单位群，即与 $n$ 互质的模 $n$ 剩余类 $[a]$ 在模 $n$ 乘法下构成的集合，其中 $\\gcd(a,n)=1$。对每个 $n \\in \\{8,12,15,21\\}$，计算乘积\n$$\nP(n) \\;=\\; \\prod_{u \\in U(n)} u \\pmod{n}.\n$$\n然后，仅使用核心定义（有限群中的群逆元、将元素与其逆元配对的思想，以及中国剩余定理），验证您计算出的值与一个准则相符，该准则将 $P(n)$ 与 $U(n)$ 中的自逆元素（即满足 $x^{2} \\equiv 1 \\pmod{n}$ 的那些 $x \\in U(n)$）联系起来。\n\n您的最终答案必须列出 $P(8)$、$P(12)$、$P(15)$ 和 $P(21)$ 的值，每个值都应以其对应模数下的最小非负余数形式给出，并按 $n=8,12,15,21$ 的顺序表示为单个行矩阵。无需四舍五入。", "solution": "问题要求计算乘法单位群 $U(n)$ 中所有元素的乘积，其中 $n \\in \\{8, 12, 15, 21\\}$，并使用关于自逆元素的一般性原理来验证结果。\n\n这个问题的指导原则基于有限阿贝尔群（如 $U(n)$）的结构。设 $G$ 是一个有限阿贝尔群，其单位元为 $e$。$G$ 中所有元素的乘积 $\\prod_{g \\in G} g$ 可以通过将每个元素 $g$ 与其唯一的逆元 $g^{-1}$ 配对来计算。这样一对的乘积是 $g \\cdot g^{-1} = e$。不能与一个不同的逆元配对的元素是那些逆元就是其本身的元素，即满足 $x^2 = e$ 的元素 $x$。这些是阶为 $1$ 或 $2$ 的元素。因此，群中所有元素的乘积等于所有自逆元的乘积。对于群 $U(n)$，单位元是剩余类 $1$，自逆元素 $u$ 的条件是 $u^2 \\equiv 1 \\pmod{n}$。\n\n我们现在逐一分析 $n \\in \\{8, 12, 15, 21\\}$ 的情况。\n\n对于 $n=8$：\n单位群 $U(8)$ 由小于 $8$ 且与 $8$ 互质的整数组成。这些是奇数。\n$$U(8) = \\{1, 3, 5, 7\\}$$\n直接计算乘积 $P(8)$：\n$$P(8) = 1 \\cdot 3 \\cdot 5 \\cdot 7 = 105 \\pmod{8}$$\n由于 $105 = 13 \\times 8 + 1$，我们得到 $P(8) \\equiv 1 \\pmod{8}$。\n\n为了验证这一点，我们找出 $U(8)$ 中的自逆元素，即 $x^2 \\equiv 1 \\pmod{8}$ 的解。\n检查每个元素：\n$1^2 = 1 \\equiv 1 \\pmod{8}$\n$3^2 = 9 \\equiv 1 \\pmod{8}$\n$5^2 = 25 \\equiv 1 \\pmod{8}$\n$7^2 = 49 \\equiv 1 \\pmod{8}$\n$U(8)$ 的所有元素都是自逆元。因此，自逆元的乘积就是所有元素的乘积，我们已经计算出其结果为 $1 \\pmod{8}$。结果是一致的。\n\n对于 $n=12$：\n单位群 $U(12)$ 由小于 $12$ 且与 $12=2^2 \\cdot 3$ 互质的整数组成。\n$$U(12) = \\{1, 5, 7, 11\\}$$\n乘积 $P(12)$ 是：\n$$P(12) = 1 \\cdot 5 \\cdot 7 \\cdot 11 = 385 \\pmod{12}$$\n由于 $385 = 32 \\times 12 + 1$，我们得到 $P(12) \\equiv 1 \\pmod{12}$。另一种方法是，$5 \\cdot 7 = 35 \\equiv 11 \\pmod{12}$。所以 $P(12) \\equiv 1 \\cdot 11 \\cdot 11 = 121 \\equiv 1 \\pmod{12}$。\n\n为了验证，我们求解 $x^2 \\equiv 1 \\pmod{12}$。根据中国剩余定理（CRT），这个同余方程等价于以下方程组：\n$$\n\\begin{cases}\nx^2 \\equiv 1 \\pmod{4} \\\\\nx^2 \\equiv 1 \\pmod{3}\n\\end{cases}\n$$\n解为 $x \\equiv \\pm 1 \\pmod{4}$ (即 $x \\equiv 1, 3 \\pmod{4}$) 和 $x \\equiv \\pm 1 \\pmod{3}$ (即 $x \\equiv 1, 2 \\pmod{3}$)。通过中国剩余定理组合这些解，得到模 $12$ 的四个解：\n\\begin{enumerate}\n    \\item $x \\equiv 1 \\pmod{4}$, $x \\equiv 1 \\pmod{3} \\implies x \\equiv 1 \\pmod{12}$\n    \\item $x \\equiv 1 \\pmod{4}$, $x \\equiv 2 \\pmod{3} \\implies x \\equiv 5 \\pmod{12}$\n    \\item $x \\equiv 3 \\pmod{4}$, $x \\equiv 1 \\pmod{3} \\implies x \\equiv 7 \\pmod{12}$\n    \\item $x \\equiv 3 \\pmod{4}$, $x \\equiv 2 \\pmod{3} \\implies x \\equiv 11 \\pmod{12}$\n\\end{enumerate}\n自逆元素的集合是 $\\{1, 5, 7, 11\\}$，这正是 $U(12)$ 的全部元素。这些元素的乘积为 $1 \\cdot 5 \\cdot 7 \\cdot 11 \\equiv 1 \\pmod{12}$，这与我们对 $P(12)$ 的计算结果一致。\n\n对于 $n=15$：\n单位群 $U(15)$ 由小于 $15$ 且与 $15=3 \\cdot 5$ 互质的整数组成。其阶为 $\\phi(15) = (3-1)(5-1) = 8$。\n$$U(15) = \\{1, 2, 4, 7, 8, 11, 13, 14\\}$$\n自逆元素是 $x^2 \\equiv 1 \\pmod{15}$ 的解，根据中国剩余定理，这等价于：\n$$\n\\begin{cases}\nx^2 \\equiv 1 \\pmod{3} \\implies x \\equiv 1, 2 \\pmod{3} \\\\\nx^2 \\equiv 1 \\pmod{5} \\implies x \\equiv 1, 4 \\pmod{5}\n\\end{cases}\n$$\n四个解是：\n\\begin{enumerate}\n    \\item $x \\equiv 1 \\pmod{3}$, $x \\equiv 1 \\pmod{5} \\implies x \\equiv 1 \\pmod{15}$\n    \\item $x \\equiv 1 \\pmod{3}$, $x \\equiv 4 \\pmod{5} \\implies x \\equiv 4 \\pmod{15}$\n    \\item $x \\equiv 2 \\pmod{3}$, $x \\equiv 1 \\pmod{5} \\implies x \\equiv 11 \\pmod{15}$\n    \\item $x \\equiv 2 \\pmod{3}$, $x \\equiv 4 \\pmod{5} \\implies x \\equiv 14 \\pmod{15}$\n\\end{enumerate}\n自逆元素的集合是 $\\{1, 4, 11, 14\\}$。$U(15)$ 的其他元素可以与其不同的逆元配对：$(2, 8)$ 因为 $2 \\cdot 8=16 \\equiv 1 \\pmod{15}$，以及 $(7, 13)$ 因为 $7 \\cdot 13 = 91 \\equiv 1 \\pmod{15}$。\n乘积 $P(15)$ 是自逆元的乘积，因为其他配对的乘积都是 $1$。\n我们来计算自逆元的乘积：\n$$1 \\cdot 4 \\cdot 11 \\cdot 14 = 4 \\cdot 11 \\cdot 14 = 44 \\cdot 14 \\equiv 14 \\cdot 14 = 196 \\pmod{15}$$\n由于 $196 = 13 \\times 15 + 1$，我们得到 $196 \\equiv 1 \\pmod{15}$。\n因此，$P(15) \\equiv 1 \\pmod{15}$。这个结果与原理一致。\n\n对于 $n=21$：\n单位群 $U(21)$ 由小于 $21$ 且与 $21=3 \\cdot 7$ 互质的整数组成。其阶为 $\\phi(21) = (3-1)(7-1)=12$。\n$$U(21) = \\{1, 2, 4, 5, 8, 10, 11, 13, 16, 17, 19, 20\\}$$\n自逆元素是 $x^2 \\equiv 1 \\pmod{21}$ 的解，根据中国剩余定理，这等价于：\n$$\n\\begin{cases}\nx^2 \\equiv 1 \\pmod{3} \\implies x \\equiv 1, 2 \\pmod{3} \\\\\nx^2 \\equiv 1 \\pmod{7} \\implies x \\equiv 1, 6 \\pmod{7}\n\\end{cases}\n$$\n四个解是：\n\\begin{enumerate}\n    \\item $x \\equiv 1 \\pmod{3}$, $x \\equiv 1 \\pmod{7} \\implies x \\equiv 1 \\pmod{21}$\n    \\item $x \\equiv 1 \\pmod{3}$, $x \\equiv 6 \\pmod{7} \\implies x \\equiv 13 \\pmod{21}$\n    \\item $x \\equiv 2 \\pmod{3}$, $x \\equiv 1 \\pmod{7} \\implies x \\equiv 8 \\pmod{21}$\n    \\item $x \\equiv 2 \\pmod{3}$, $x \\equiv 6 \\pmod{7} \\implies x \\equiv 20 \\pmod{21}$\n\\end{enumerate}\n自逆元素的集合是 $\\{1, 8, 13, 20\\}$。剩下的 $8$ 个元素形成不同逆元的配对：$(2, 11)$、$(4, 16)$、$(5, 17)$ 和 $(10, 19)$。\n因此，乘积 $P(21)$ 是自逆元的乘积。\n$$P(21) \\equiv 1 \\cdot 8 \\cdot 13 \\cdot 20 \\pmod{21}$$\n我们计算这个乘积：\n$8 \\cdot 13 = 104$。由于 $104 = 4 \\times 21 + 20$，所以 $8 \\cdot 13 \\equiv 20 \\pmod{21}$。\n于是，$P(21) \\equiv 20 \\cdot 20 = 400 \\pmod{21}$。\n由于 $400 = 19 \\times 21 + 1$，我们得到 $400 \\equiv 1 \\pmod{21}$。\n因此，$P(21) \\equiv 1 \\pmod{21}$。这证实了预期的结果。\n\n总而言之，$P(n)$ 的值（以模 $n$ 的最小非负余数形式给出）为：\n$P(8) = 1$\n$P(12) = 1$\n$P(15) = 1$\n$P(21) = 1$", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1  1  1  1\n\\end{pmatrix}\n}\n$$", "id": "3094028"}]}
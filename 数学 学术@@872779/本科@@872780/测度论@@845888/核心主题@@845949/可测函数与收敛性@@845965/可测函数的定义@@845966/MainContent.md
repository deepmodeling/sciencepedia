## 引言
在测度理论的学习之旅中，当我们建立了[可测集](@entry_id:159173)与[σ-代数](@entry_id:141463)这些基石概念之后，一个自然且关键的问题随之而来：我们究竟可以在这些集合上对什么样的函数进行有意义的积分？传统的微积分依赖于连续或[分段连续函数](@entry_id:181815)，但对于测度论这一更广阔的框架而言，这[类函数](@entry_id:146970)显得过于局限。我们需要一类更广泛的、与底层测度结构相兼容的“行为良好”的函数。**可测函数**这一概念的引入，正是为了填补这一知识空白。

本文旨在全面探讨可测函数——勒贝格积分与现代概率论的基本构件。
- 在第一章**“原理与机制”**中，我们将奠定理论基础。我们会形式化地定义什么是可测函数，探索用于验证[可测性](@entry_id:199191)的若干个更简洁的等价条件，并展示这类函数在代数运算和极限运算下非凡的稳定性。
- 第二章**“应用与跨学科联系”**将展示这一概念的深远影响。我们将看到[可测函数](@entry_id:159040)在构建[勒贝格积分](@entry_id:140189)理论中如何不可或缺，以及它在概率论中如何被严格地定义为[随机变量](@entry_id:195330)，从而将抽象理论与金融、[随机过程](@entry_id:159502)等领域的具体应用联系起来。
- 最后，**“动手实践”**部分提供了一系列精心挑选的习题，让你通过主动应用定义和性质来证明结论、构造反例，从而巩固理解，架起理论与实践之间的桥梁。

通过学习这些章节，您将对[可测函数](@entry_id:159040)——这一现代分析的基石——获得深刻且可操作的理解。现在，让我们从其基本原理与机制开始深入探索。

## 原理与机制

在上一章节中，我们建立了可测集和 $\sigma$-代数的概念，它们构成了测[度理论](@entry_id:636058)的基石。现在，我们将注意力从集合转向函数。正如在微积分中，函数是研究变化和关系的核心对象，在测度理论中，我们需要定义一类“行为良好”的函数，以便后续能够对其进行积分。这类函数被称为**可测函数**。[可测性](@entry_id:199191)的概念确保了一个函数足够“规则”，能够与底層空间的测度结构兼容，从而使得对函[数值域](@entry_id:752817)中“良好”集合（例如区间）求[原像](@entry_id:150899)，得到的是定义域中的一个可测集。本章将系统地介绍[可测函数](@entry_id:159040)的定义、其等价形式、基本性质以及构造方法。

### [可测函数](@entry_id:159040)的定义

我们从一个抽象的定义开始，然后逐步揭示其直观含义和实际应用。

设 $(X, \mathcal{M})$ 是一个[可测空间](@entry_id:189701)，其中 $X$ 是一个集合，$\mathcal{M}$ 是 $X$ 上的一个 $\sigma$-代数。设 $(\mathbb{R}, \mathcal{B}(\mathbb{R}))$ 是实数线上的[可测空间](@entry_id:189701)，其中 $\mathcal{B}(\mathbb{R})$ 是**波莱尔 $\sigma$-代数**（Borel $\sigma$-algebra），即由 $\mathbb{R}$ 上所有开集生成的最小 $\sigma$-代数。$\mathcal{B}(\mathbb{R})$ 包含了所有我们能想到的“好”的实数[子集](@entry_id:261956)，如开集、[闭集](@entry_id:136446)、区间、以及它们的 countable unions, intersections, 和 complements。

**定义 ([可测函数](@entry_id:159040))**：一个函数 $f: X \to \mathbb{R}$ 称为是 $(\mathcal{M}, \mathcal{B}(\mathbb{R}))$-**可测的**（measurable），或者简称 $\mathcal{M}$-可测的，如果对于任意一个波莱尔集 $B \in \mathcal{B}(\mathbb{R})$，其原像 $f^{-1}(B)$ 都是 $\mathcal{M}$ 中的一个元素。即：
$$
f^{-1}(B) = \{x \in X \mid f(x) \in B\} \in \mathcal{M}, \quad \forall B \in \mathcal{B}(\mathbb{R})
$$

这个定义的核心思想是，一个[可测函数](@entry_id:159040)不能将定义域中的“不可测”部分映射到值域中的“可测”部分。换言之，它保持了测度结构的完整性。如果一个函数是可测的，我们就可以通过考察它在值域上的行为（例如，函数值落在某个区间内）来得到关于定义域中[可测集](@entry_id:159173)的信息。

### [可测性](@entry_id:199191)的等价条件

逐一验证所有波莱尔集的原像是否可测是不切实际的。幸运的是，由于 $\sigma$-代数的结构特性，我们只需要对一类能够生成 $\mathcal{B}(\mathbb{R})$ 的集合进行验证即可。最常用的一类生成元是实数线上的所有区间。

**定理 (可测性的等价条件)**：设 $f: X \to \mathbb{R}$ 是一个函数。以下陈述是等价的：
1. $f$ 是 $\mathcal{M}$-可测的。
2. 对任意实数 $a \in \mathbb{R}$，集合 $\{x \in X \mid f(x) > a\}$ 是 $\mathcal{M}$-可测的。
3. 对任意实数 $a \in \mathbb{R}$，集合 $\{x \in X \mid f(x) \ge a\}$ 是 $\mathcal{M}$-可测的。
4. 对任意实数 $a \in \mathbb{R}$，集合 $\{x \in X \mid f(x)  a\}$ 是 $\mathcal{M}$-可测的。
5. 对任意实数 $a \in \mathbb{R}$，集合 $\{x \in X \mid f(x) \le a\}$ 是 $\mathcal{M}$-可测的。

这些条件之所以等价，是因为这些形如 $(a, \infty)$, $[a, \infty)$, $(-\infty, a)$, $(-\infty, a]$ 的半无限区间集合都能生成波莱尔 $\sigma$-代数 $\mathcal{B}(\mathbb{R})$，并且它们之间可以通过取[补集](@entry_id:161099)和可数交集相互转换。例如，如果条件 (2) 成立，那么对于任意 $a \in \mathbb{R}$：
$$
\{x \mid f(x) \ge a\} = \bigcap_{n=1}^{\infty} \left\{x \mid f(x)  a - \frac{1}{n}\right\}
$$
由于 $\mathcal{M}$ 对可数交运算封闭，所以 $\{x \mid f(x) \ge a\}$ 也是可测的，这就证明了 (2) $\implies$ (3)。类似地，通过取[补集](@entry_id:161099)，我们可以从 $\{x \mid f(x)  a\}$ 的[可测性](@entry_id:199191)得到 $\{x \mid f(x) \le a\}$ 的[可测性](@entry_id:199191)，因为 $\{x \mid f(x) \le a\} = X \setminus \{x \mid f(x)  a\}$ [@problem_id:1414114]。

更有甚者，由于有理数集 $\mathbb{Q}$ 在实数集 $\mathbb{R}$ 中是稠密的，我们可以将检验条件中的实数 $a$ 限制在有理数 $q$ 上。例如，条件 (2) 等价于：
2'. 对任意有理数 $q \in \mathbb{Q}$，集合 $\{x \in X \mid f(x)  q\}$ 是 $\mathcal{M}$-可测的。

这是因为对于任意实数 $a$，我们可以找到一个递减趋向于 $a$ 的有理数序列 $\{q_n\}$，从而：
$$
\{x \mid f(x)  a\} = \bigcup_{n=1}^{\infty} \{x \mid f(x)  q_n\}
$$
这是一个可数并集，因此如果对所有有理数成立，对所有实数也成立 [@problem_id:1414114]。

然而，我们必须谨慎[选择检验](@entry_id:182706)集合。例如，仅仅检验 $\{x \mid f(x) = q\}$ 对所有 $q \in \mathbb{Q}$ 是否可测，或者仅仅检验 $\{x \mid f(x)  n\}$ 对所有整数 $n \in \mathbb{Z}$ 是否可测，都是**不足以**保证函数的[可测性](@entry_id:199191)的。例如，我们可以构造一个函数，它在一个非[可测集](@entry_id:159173)上取某个无理数，而在其他地方取另一个无理数。这样的函数对于所有的有理数 $q$，其水平集 $\{x \mid f(x) = q\}$ 都是[空集](@entry_id:261946)（因此是可测的），但函数本身却不是可测的 [@problem_id:1414114]。

### 可测函数的基本范例

为了建立对[可测函数](@entry_id:159040)的直观理解，我们从几个关键例子入手。

#### 指示函数

最简单的非平凡函数是**[指示函数](@entry_id:186820)**（indicator function）。对于[任意子](@entry_id:143753)集 $A \subseteq X$，其指示函数 $\chi_A$ 定义为：
$$
\chi_A(x) = \begin{cases} 1  \text{if } x \in A \\ 0  \text{if } x \notin A \end{cases}
$$
指示函数 $\chi_A$ 是 $\mathcal{M}$-可测的，当且仅当集合 $A$ 本身是 $\mathcal{M}$ 中的一个[可测集](@entry_id:159173)。要验证这一点，只需考察 $\chi_A$ 的[水平集](@entry_id:751248)。它的值域仅为 $\{0, 1\}$。对于任意 $a \in \mathbb{R}$：
$$
\{\chi_A  a\} = \begin{cases} X  \text{if } a  0 \\ A  \text{if } 0 \le a  1 \\ \emptyset  \text{if } a \ge 1 \end{cases}
$$
由于 $X$ 和 $\emptyset$ 总是 $\mathcal{M}$ 的成员，$\chi_A$ 的[可测性](@entry_id:199191)完全取决于 $A$ 是否属于 $\mathcal{M}$。这个结论是连接集合[可测性](@entry_id:199191)与函数可测性的根本桥梁。例如，如果 $V$ 是一个非波莱尔可测的实数[子集](@entry_id:261956)，那么其[指示函数](@entry_id:186820) $\chi_V: \mathbb{R} \to \mathbb{R}$ 就不是波莱尔可测函数，因为 $\{1\}$ 是一个波莱尔集，但其原像 $V$ 不是 [@problem_id:1414111] [@problem_id:1414104]。

#### 简单函数

指示函数是构建更复杂函数的基本模块。一个**[简单函数](@entry_id:137521)**（simple function）是指值域为有限集的一类函数。任何一个简单函数 $\phi$ 都可以写成指示函数的有限[线性组合](@entry_id:154743)：
$$
\phi(x) = \sum_{i=1}^{n} a_i \chi_{A_i}(x)
$$
其中 $a_i$ 是互不相同的实数，$A_i = \{x \in X \mid \phi(x) = a_i\}$ 是 $X$ 的一个划分。根据上一节的结论，一个简单函数 $\phi$ 是可测的，当且仅当其每个[水平集](@entry_id:751248) $A_i$都是[可测集](@entry_id:159173)。

更一般地，对于一个值域为[可数集](@entry_id:138676) $\{c_1, c_2, \dots\}$ 的函数 $f$，它的[可测性](@entry_id:199191)等价于其每一个[水平集](@entry_id:751248) $f^{-1}(\{c_i\})$ 都是[可测集](@entry_id:159173) [@problem_id:1414100]。这是因为任何波莱尔集 $B$ 与 $f$ 的可[数值域](@entry_id:752817)的交集 $B \cap \{c_1, c_2, \dots\}$ 仍然是一个可数集，因此 $f^{-1}(B)$ 可以表示为可数个可测水平集 $f^{-1}(\{c_i\})$ 的并集，而 $\sigma$-代数对可数并运算封闭。

#### 有限空间上的可测函数

可测性的概念在具体且简单的[可测空间](@entry_id:189701)上尤为清晰。考虑一个[有限集](@entry_id:145527)合 $X = \{1, 2, 3, 4\}$，其上的 $\sigma$-代数为 $\mathcal{M} = \{\emptyset, \{1, 2\}, \{3, 4\}, \{1, 2, 3, 4\}\}$ [@problem_id:1414087]。这里的**原子**（atoms，即非空最小[可测集](@entry_id:159173)）是 $\{1, 2\}$ 和 $\{3, 4\}$。一个函数 $f: X \to \mathbb{R}$ 在此空间上是可测的，当且仅当它在每个原子上都是常数。例如，函数 $f_A$ 定义为 $f_A(1)=f_A(2)=5$ 和 $f_A(3)=f_A(4)=10$，是可测的。因为对于任何 $a \in \mathbb{R}$，集合 $\{x \mid f_A(x) > a\}$ 只可能是 $\emptyset$（如 $a \ge 10$），$\{3, 4\}$（如 $5 \le a  10$），或 $X$（如 $a  5$），这些都是 $\mathcal{M}$ 中的元素。相反，如果一个函数在某个原子上取了不同的值，例如 $f_B(1)=5, f_B(2)=10$，我们总能找到一个 $a$（比如 $a=7$）使得 $\{x \mid f_B(x) > a\}$ 包含原子中的一个点而不包含另一个，从而导致[原像](@entry_id:150899)不是[可测集](@entry_id:159173)（此例中为 $\{2\}$，不属于 $\mathcal{M}$）。这揭示了[可测函数](@entry_id:159040)的一个深刻直观：一个[可测函数](@entry_id:159040)无法区分那些在 $\sigma$-代数看来是不可分割的点。

### [可测函数的性质](@entry_id:198711)

[可测函数](@entry_id:159040)的集合具有非常好的封闭性，这使得它们在分析中极其有用。

#### 代数运算的封闭性

如果 $f$ 和 $g$ 是定义在同一[可测空间](@entry_id:189701) $(X, \mathcal{M})$ 上的两个[可测函数](@entry_id:159040)， $c$ 是一个常数，那么以下函数也都是可测的 [@problem_id:1414091]：
1.  **和与差**：$f+g$ 和 $f-g$
2.  **[标量乘法](@entry_id:155971)**：$c f$
3.  **乘积**：$f \cdot g$
4.  **倒数**：$1/f$ (假设对所有 $x$，$f(x) \neq 0$)

这些性质的证明通常依赖于将复杂函数的[水平集](@entry_id:751248)分解为简单函数[水平集](@entry_id:751248)的组合。例如，要证明 $f+g$ 是可测的，我们可以考察集合 $\{x \mid f(x) + g(x)  a\}$。这等价于 $\{x \mid f(x)  a - g(x)\}$。通过有理数的稠密性，这个集合可以表示为：
$$
\bigcup_{q \in \mathbb{Q}} (\{x \mid f(x) > q\} \cap \{x \mid g(x)  a-q\})
$$
这是一个可数个可测集的交集和并集的组合，因此结果仍然是可测的。

#### 序结构的封闭性

除了代数运算，可测函数集合对序运算也具有封闭性。
1.  **[最大值与最小值](@entry_id:145933)**：$\max(f, g)$ 和 $\min(f, g)$
2.  **[绝对值](@entry_id:147688)**：$|f|$

证明这些性质通常更直接。例如，对于最大值函数 $h(x) = \max(f(x), g(x))$，其[水平集](@entry_id:751248)有如下优美的关系 [@problem_id:1414134]：
$$
\{x \mid \max(f, g)  a\} = \{x \mid f(x)  a\} \cup \{x \mid g(x)  a\}
$$
因为 $f$ 和 $g$ 是可测的，所以等式右边的两个集合都属于 $\mathcal{M}$。由于 $\mathcal{M}$ 对并集运算封闭，所以左边的集合也属于 $\mathcal{M}$。这对任意 $a \in \mathbb{R}$ 都成立，因此 $\max(f, g)$ 是可测的。

#### 极限运算的封闭性

测[度理论](@entry_id:636058)中一个极其深刻和有用的结果是，[可测函数的逐点极限](@entry_id:186907)仍然是可测的。

**定理 (极限的[可测性](@entry_id:199191))**：如果 $\{f_n\}$ 是一个定义在 $(X, \mathcal{M})$ 上的[可测函数序列](@entry_id:194460)，那么函数 $\sup_n f_n$, $\inf_n f_n$, $\limsup_{n \to \infty} f_n$, 和 $\liminf_{n \to \infty} f_n$ 也都是可测的。如果 $f_n(x)$ 对每个 $x \in X$ 都收敛于 $f(x)$，那么极限函数 $f$ 也是可测的。

例如，对于[上确界](@entry_id:140512)函数 $h(x) = \sup_n f_n(x)$，我们有：
$$
\{x \mid h(x)  a\} = \bigcup_{n=1}^{\infty} \{x \mid f_n(x)  a\}
$$
这是可数个[可测集](@entry_id:159173)的并集，因此是可测的。这个定理是[勒贝格积分](@entry_id:140189)理论的基石，它保证了我们可以对一大类通过极限过程构造的函数进行积分。一个直接的应用是，形如 $f(x) = \sum_{n=1}^{\infty} g_n(x)$ 的[函数级数](@entry_id:139536)，如果每个偏和 $S_N(x) = \sum_{n=1}^{N} g_n(x)$ 都是可测的，那么其极限 $f(x)$ 也是可测的 [@problem_id:1414111]。

### 函数的复合与变换

#### 与[连续函数的复合](@entry_id:139194)

如果我们将一个可测函数与一个[连续函数](@entry_id:137361)复合，结果会怎样？答案是非常好的：

**定理 (与[连续函数](@entry_id:137361)复合)**：设 $f: (X, \mathcal{M}) \to (\mathbb{R}, \mathcal{B}(\mathbb{R}))$ 是一个[可测函数](@entry_id:159040)，而 $g: \mathbb{R} \to \mathbb{R}$ 是一个[连续函数](@entry_id:137361)。那么[复合函数](@entry_id:147347) $g \circ f: X \to \mathbb{R}$ 也是 $\mathcal{M}$-可测的。

证明思路非常清晰。根据定义，要证明 $g \circ f$ 可测，我们需要检验对任意开集 $U \subseteq \mathbb{R}$，原像 $(g \circ f)^{-1}(U)$ 是否在 $\mathcal{M}$ 中。根据复合函数的定义：
$$
(g \circ f)^{-1}(U) = f^{-1}(g^{-1}(U))
$$
因为 $g$ 是连续的，$U$ 是开集，所以 $g^{-1}(U)$ 也是一个开集。开集一定是波莱尔集，即 $g^{-1}(U) \in \mathcal{B}(\mathbb{R})$。又因为 $f$ 是[可测函数](@entry_id:159040)，所以任何波莱尔集的[原像](@entry_id:150899)都在 $\mathcal{M}$ 中。因此，$f^{-1}(g^{-1}(U)) \in \mathcal{M}$ [@problem_id:1414104]。

这个定理极为强大。它立即告诉我们，如果 $f$ 是可测的，那么 $f^2$, $|f|$, $e^f$, $\sin(f)$ 等等都是可测的，因为 $x \mapsto x^2$, $x \mapsto |x|$, $x \mapsto e^x$ 等都是[连续函数](@entry_id:137361) [@problem_id:1414091]。更进一步，该定理对更一般的情况也成立：只要外部函数 $g$ 是波莱尔可测的，$g \circ f$ 就是可测的。

需要注意的是，反向的复合不一定保持可测性。例如，一个非[可测函数](@entry_id:159040) $f$ 可能与某个[连续函数](@entry_id:137361)复合后变得可测。一个经典的例子是：设 $E$ 是一个非[勒贝格可测集](@entry_id:137551)，定义 $f(x) = 1$ 若 $x \in E$，$f(x) = -1$ 若 $x \notin E$。如前所述，$f$ 不是[勒贝格可测](@entry_id:192844)的。但函数 $g(y) = |y|$ 是连续的，[复合函数](@entry_id:147347) $g \circ f(x) = |f(x)| = 1$ 对所有 $x$ 成立。这是一个[常数函数](@entry_id:152060)，因此是可测的 [@problem_id:1414122]。

### 可测性是一种相对属性

最后，我们必须强调，一个函数是否可测，并不仅仅取决于函数本身，而是取决于[定义域和值域](@entry_id:145332)上所装备的 $\sigma$-代数。

考虑一个非常规的 $\sigma$-代数：$\mathbb{R}$ 上的**可数-余可数 $\sigma$-代数** $\mathcal{M}_{\text{cc}}$，它由所有可数集及其[补集](@entry_id:161099)（余可数集）构成。现在我们考察函数 $f: (\mathbb{R}, \mathcal{M}_{\text{cc}}) \to (\mathbb{R}, \mathcal{B}(\mathbb{R}))$ 的[可测性](@entry_id:199191) [@problem_id:1414098]。在这种情况下，一个函数 $f$ 是可测的，当且仅当它几乎是一个常数，即存在一个实数 $c$，使得集合 $\{x \in \mathbb{R} \mid f(x) \neq c\}$ 是一个[可数集](@entry_id:138676)。

让我们看看为什么会这样。对于像 $f(x) = x^2$ 这样的标准[连续函数](@entry_id:137361)，它在 $(\mathbb{R}, \mathcal{M}_{\text{cc}})$ 上是**不可测**的。例如，取波莱尔集 $B = (0, 1)$，其原像 $f^{-1}(B) = (-1, 0) \cup (0, 1)$ 既不是可数集也不是余[可数集](@entry_id:138676)，因此 $f^{-1}(B) \notin \mathcal{M}_{\text{cc}}$。相反，像[狄利克雷函数](@entry_id:140770) $f(x) = 1$ (若 $x \in \mathbb{Q}$) 和 $f(x) = 0$ (若 $x \notin \mathbb{Q}$) 是可测的，因为我们可以取 $c=0$，那么 $\{x \mid f(x) \neq 0\} = \mathbb{Q}$ 是[可数集](@entry_id:138676)。

这个例子有力地说明了[可测性](@entry_id:199191)是函数与 underlying measurable structures 之间的一种和谐关系。

此外，[可测性](@entry_id:199191)对函数的“微小”改动不敏感。如果函数 $f$ 与可测函数 $g$ 仅在一个“小”集合上有差异，那么 $f$ 通常也是可测的。例如，如果[假设空间](@entry_id:635539)中的所有单点集 $\{x\}$都是可测的，且 $f(x) = g(x)$ 除了在一个可数集 $E$ 上。那么 $f$ 的可测性等价于 $g$ 的可测性 [@problem_id:1414081]。这是因为 $f$ 的任何[水平集](@entry_id:751248) $\{f  a\}$ 可以分解为两部分：一部分在 $E$ 上，另一部分在 $E^c$ 上。在 $E^c$ 上，$f$与 $g$ 相同，因此 $\{fa\} \cap E^c = \{ga\} \cap E^c$ 是可测的。在 $E$ 上，$\{fa\} \cap E$ 是可数集 $E$ 的一个[子集](@entry_id:261956)，因此也是可测的（作为可数个单点集的并集）。两部分的并集自然也是可测的。这为后续将要学习的“[几乎处处](@entry_id:146631)”相等的概念奠定了基础。

通过本章的学习，我们已经为[可测函数](@entry_id:159040)建立了坚实的理论基础。这些函数构成了勒贝格积分理论可以施展其威力的舞台，并将在概率论和现代分析的许多领域中扮演核心角色。
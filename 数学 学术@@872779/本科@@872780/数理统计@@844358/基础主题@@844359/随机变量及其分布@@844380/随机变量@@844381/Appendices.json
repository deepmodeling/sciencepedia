{"hands_on_practices": [{"introduction": "本练习介绍了一个在概率论中非常强大的工具：指示随机变量。通过一个关于数据中心服务器任务随机分配的场景，你将学会如何利用期望的线性性质，将一个看似复杂的计数问题分解为许多简单的部分来求解。这个经典问题 [@problem_id:1329488] 的答案出乎意料地简洁，它清晰地展示了即使在变量不独立的情况下，期望的线性性质依然成立。", "problem": "一个数据中心运行着 $N$ 台专用服务器，每台服务器都被指定用于运行一组 $N$ 个独特任务中的某一个特定计算任务。在一次全系统重启期间，任务分配调度程序发生故障。它将 $N$ 个任务完全随机地重新分配给 $N$ 台服务器。这种重新分配是一个排列，意味着每台服务器恰好接收一个任务，并且每个任务也恰好分配给一台服务器。所有 $N!$ 种可能的排列（分配）都是等可能的。\n\n被分配到其原定任务的服务器的期望数量是多少？请将答案表示为 $N$ 的函数。", "solution": "令 $X$ 为表示接收到其正确指定任务的服务器总数的随机变量。我们要求解 $X$ 的期望值，记为 $E[X]$。\n\n为了解决这个问题，我们可以将 $X$ 表示为一系列指示随机变量的和。我们为每台服务器 $i$ 定义一个指示随机变量 $X_i$，其中 $i$ 的取值范围为 1 到 $N$。变量 $X_i$ 定义如下：\n$$\nX_i = \\begin{cases} 1  \\text{如果服务器 } i \\text{ 被分配了正确的任务} \\\\ 0  \\text{其他情况} \\end{cases}\n$$\n被正确分配的服务器总数 $X$ 是这些单个指示变量的和，因为每个等于 1 的 $X_i$ 都为总数贡献了 1。\n$$\nX = X_1 + X_2 + \\dots + X_N = \\sum_{i=1}^{N} X_i\n$$\n我们将使用的关键性质是期望的线性性。该性质表明，随机变量之和的期望值等于它们各自期望值的和。即使这些随机变量不是独立的，该性质也成立。\n$$\nE[X] = E\\left[\\sum_{i=1}^{N} X_i\\right] = \\sum_{i=1}^{N} E[X_i]\n$$\n现在，我们必须求出单个指示随机变量的期望值 $E[X_i]$。根据离散随机变量期望值的定义，$E[X_i]$ 的计算方法是将其每个可能的值乘以其概率后求和：\n$$\nE[X_i] = (1) \\cdot P(X_i = 1) + (0) \\cdot P(X_i = 0) = P(X_i = 1)\n$$\n因此，问题简化为求出任意给定服务器（例如服务器 $i$）被分配到其正确任务的概率。\n\n考虑服务器 $i$。有 $N$ 个独特的任务可以分配给它。由于分配是完全随机的，这 $N$ 个任务中的每一个被分配给服务器 $i$ 的概率都是相等的。在这些任务中，只有一个是服务器 $i$ 的正确任务。\n因此，服务器 $i$ 被分配到其正确任务的概率是：\n$$\nP(X_i = 1) = \\frac{1}{N}\n$$\n这意味着指示变量 $X_i$ 的期望值为：\n$$\nE[X_i] = \\frac{1}{N}\n$$\n这个概率，以及由此得到的期望值，对于从 $i=1$ 到 $N$ 的每一台服务器都是相同的。\n\n最后，我们可以将这个结果代回到总期望 $E[X]$ 的求和公式中：\n$$\nE[X] = \\sum_{i=1}^{N} E[X_i] = \\sum_{i=1}^{N} \\frac{1}{N}\n$$\n这个求和包含 $N$ 个相同的项，每一项都等于 $1/N$。因此，这个和是：\n$$\nE[X] = N \\times \\frac{1}{N} = 1\n$$\n被正确分配的服务器的期望数量是 1。值得注意的是，这个结果与服务器的总数 $N$ 无关（假设 $N \\ge 1$）。", "answer": "$$\\boxed{1}$$", "id": "1329488"}, {"introduction": "掌握了期望的基本性质后，让我们来看一个更贴近实际应用的场景。本练习 [@problem_id:1913504] 构建了一个商业模型，你需要评估一个在新算法测试过程中的预期净利润，其中测试的成功与否服从几何分布。通过解决这个问题，你将体会到如何运用随机变量的期望来量化不确定性，并为商业决策提供数据支持。", "problem": "一家数据分析初创公司正在对其新的专有算法进行压力测试。该测试由一系列试验，或称“运行”组成。每次运行都与其他运行相互独立。对于任何给定的运行，算法遇到严重故障的概率为常数 $p$，此时整个测试过程将立即停止。如果没有发生故障，则该次运行被视为成功。\n\n这家初创公司与客户签订了一份基于绩效的合同，从而形成了测试阶段的以下财务模型：\n- 每次成功运行，公司获得 $R_S$ 美元的收入。\n- 每次运行，无论成功与否，都会产生 $C_O$ 美元的运营成本。\n- 一次严重故障会产生 $C_F$ 美元的一次性罚款成本，用于数据恢复和报告。\n\n测试过程开始并持续进行，直到观察到第一次严重故障为止。给定以下参数，确定整个测试过程的预期净利润。\n\n参数：\n- 任何一次运行中发生严重故障的概率, $p = 0.05$\n- 每次成功运行的收入, $R_S = 300$ 美元\n- 每次运行的运营成本, $C_O = 40$ 美元\n- 一次性故障罚款成本, $C_F = 800$ 美元\n\n请用美元表示您的最终答案。", "solution": "设 $p$ 为任意一次运行中失败的概率，$q=1-p$ 为成功的概率。该过程在第一次失败时停止。设 $K$ 为第一次失败前成功运行的次数。那么 $K$ 服从 $\\{0,1,2,\\dots\\}$ 上的几何分布，其概率质量函数为 $P(K=k)=q^{k}p$，期望为 $E[K]=\\frac{q}{p}$。\n\n对于一个有 $k$ 次成功和一次失败的实现：\n- 收入为 $kR_{S}$。\n- 运营成本为 $(k+1)C_{O}$（每次运行，包括失败的那次，都会产生 $C_{O}$ 的成本）。\n- 失败罚款为 $C_{F}$。\n\n因此，该实现的净利润为\n$$\n\\Pi(k)=kR_{S}-(k+1)C_{O}-C_{F}=k(R_{S}-C_{O})-C_{O}-C_{F}.\n$$\n取期望并使用 $E[K]=\\frac{q}{p}$，我们得到\n$$\nE[\\Pi]=E[K](R_{S}-C_{O})-C_{O}-C_{F}\n=\\frac{q}{p}(R_{S}-C_{O})-C_{O}-C_{F}.\n$$\n代入 $p=0.05$，$q=1-0.05=0.95$，$R_{S}=300$，$C_{O}=40$ 和 $C_{F}=800$：\n$$\nE[\\Pi]=\\frac{0.95}{0.05}(300-40)-40-800\n=19\\cdot 260-40-800\n=4940-840\n=4100.\n$$\n因此，预期净利润为 $4100$ 美元。", "answer": "$$\\boxed{4100}$$", "id": "1913504"}, {"introduction": "在处理多个随机变量时，一个常见的误区是混淆“不相关”与“独立”这两个概念。本练习 [@problem_id:1922916] 旨在通过一个具体的例子来澄清这一关键区别。你将分析一个给定的联合概率分布，亲手计算其协方差 $\\text{Cov}(X,Y)$ 并检验其独立性，从而深刻理解为何零协方差并不一定意味着两个随机变量是相互独立的。", "problem": "考虑一对离散随机变量 $(X, Y)$，其联合概率质量函数 (PMF)，记为 $p(x, y) = P(X=x, Y=y)$，仅在四个特定点上取非零值。这些概率给出如下：\n- $p(-1, 0) = \\frac{1}{3}$\n- $p(1, 0) = \\frac{1}{6}$\n- $p(0, -1) = \\frac{1}{4}$\n- $p(0, 1) = \\frac{1}{4}$\n\n对于所有其他数对 $(x, y)$，联合概率质量函数为 $p(x, y) = 0$。\n\n你的任务是基于此分布计算两个量。首先，计算 $X$ 和 $Y$ 之间的协方差，记为 $\\text{Cov}(X,Y)$。其次，计算 $\\delta = P(X=1)P(Y=0) - P(X=1, Y=0)$ 的值，这是一个与事件 $\\{X=1\\}$ 和 $\\{Y=0\\}$ 的独立性相关的度量。\n\n将你的最终答案表示为一个有序对 $(\\text{Cov}(X,Y), \\delta)$。", "solution": "我们使用离散随机变量的期望和协方差的定义。协方差定义为 $\\text{Cov}(X,Y)=E[XY]-E[X]E[Y]$。给定的联合概率质量函数在 $(-1,0)$ 处的概率为 $\\frac{1}{3}$，在 $(1,0)$ 处的概率为 $\\frac{1}{6}$，在 $(0,-1)$ 处的概率为 $\\frac{1}{4}$，在 $(0,1)$ 处的概率为 $\\frac{1}{4}$，在其他地方为零。总概率为 $\\frac{1}{3}+\\frac{1}{6}+\\frac{1}{4}+\\frac{1}{4}=1$，因此这是一个有效的概率质量函数。\n\n首先，计算边缘概率。对于 $X$：\n$$\nP(X=-1)=\\frac{1}{3},\\quad P(X=1)=\\frac{1}{6},\\quad P(X=0)=\\frac{1}{4}+\\frac{1}{4}=\\frac{1}{2}.\n$$\n对于 $Y$：\n$$\nP(Y=0)=\\frac{1}{3}+\\frac{1}{6}=\\frac{1}{2},\\quad P(Y=-1)=\\frac{1}{4},\\quad P(Y=1)=\\frac{1}{4}.\n$$\n\n使用 $E[X]=\\sum_{x} x P(X=x)$ 和 $E[Y]=\\sum_{y} y P(Y=y)$ 计算期望：\n$$\nE[X]=(-1)\\cdot \\frac{1}{3}+1\\cdot \\frac{1}{6}+0\\cdot \\frac{1}{2}=-\\frac{1}{6},\n$$\n$$\nE[Y]=0\\cdot \\frac{1}{2}+(-1)\\cdot \\frac{1}{4}+1\\cdot \\frac{1}{4}=0.\n$$\n\n在支撑集上使用 $E[XY]=\\sum_{x,y} xy p(x,y)$ 计算 $E[XY]$：\n$$\nE[XY]=(-1\\cdot 0)\\cdot \\frac{1}{3}+(1\\cdot 0)\\cdot \\frac{1}{6}+(0\\cdot (-1))\\cdot \\frac{1}{4}+(0\\cdot 1)\\cdot \\frac{1}{4}=0.\n$$\n\n因此，根据协方差公式，\n$$\n\\text{Cov}(X,Y)=E[XY]-E[X]E[Y]=0-\\left(-\\frac{1}{6}\\right)\\cdot 0=0.\n$$\n\n接下来，根据边缘概率和联合概率计算 $\\delta=P(X=1)P(Y=0)-P(X=1,Y=0)$：\n$$\n\\delta=\\left(\\frac{1}{6}\\right)\\left(\\frac{1}{2}\\right)-\\frac{1}{6}=\\frac{1}{12}-\\frac{1}{6}=-\\frac{1}{12}.\n$$\n\n因此，有序对 $(\\text{Cov}(X,Y),\\delta)$ 是 $\\left(0,-\\frac{1}{12}\\right)$。", "answer": "$$\\boxed{\\begin{pmatrix} 0  -\\frac{1}{12} \\end{pmatrix}}$$", "id": "1922916"}]}
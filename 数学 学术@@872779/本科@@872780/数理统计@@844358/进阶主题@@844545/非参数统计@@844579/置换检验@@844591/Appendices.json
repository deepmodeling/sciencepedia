{"hands_on_practices": [{"introduction": "要真正理解置换检验，我们必须首先掌握其核心——在零假设下构建检验统计量的分布。这个分布代表了如果处理完全无效，所有可能出现的结果。这个基础练习将指导你从一个微型数据集中，一步步手动生成这个零分布，通过为每一种可能的数据排列计算检验统计量，你将对置换检验的内在逻辑建立起坚实的直觉。[@problem_id:1943761]", "problem": "在一项评估新教学方法的小型试点研究中，四名学生被随机分为两组，每组两名学生。“处理组”采用新的教学方法，而“对照组”采用标准方法。在研究期结束时，所有学生都参加相同的水平考试。得分如下：\n\n- 处理组得分：$\\{25, 30\\}$\n- 对照组得分：$\\{15, 18\\}$\n\n为了进行置换检验，必须考虑所有可能的方式，将观察到的四个分数 $\\{15, 18, 25, 30\\}$ 分配给这两个组，并假设教学方法没有效果（零假设）。对于每一种可能的分配，都会计算一个检验统计量。\n\n您的任务是确定该检验统计量的所有可能值的完整集合，该统计量定义为样本均值之差：（处理组均值）-（对照组均值）。\n\n按升序列出此均值差统计量的所有唯一值。", "solution": "在零假设下，每一种分配都对应于从四个分数中为处理组选择任意两个分数，剩下的两个分数构成对照组。这种分配的数量为 $\\binom{4}{2}=6$。对于给定的处理组对，其元素为 $t_{1}$ 和 $t_{2}$，对照组是集合 $\\{15,18,25,30\\}$ 中的补集。检验统计量是样本均值之差：\n$$\nd=\\text{Mean(Treatment)}-\\text{Mean(Control)}=\\frac{t_{1}+t_{2}}{2}-\\frac{(15+18+25+30)-(t_{1}+t_{2})}{2}.\n$$\n令 $S=15+18+25+30=88$。则\n$$\nd=\\frac{t_{1}+t_{2}}{2}-\\frac{88-(t_{1}+t_{2})}{2}=\\frac{2(t_{1}+t_{2})-88}{2}=(t_{1}+t_{2})-44.\n$$\n因此，该统计量仅取决于处理组两个分数的和。枚举所有两个元素的和：\n- $15+18=33 \\implies d=33-44=-11$,\n- $15+25=40 \\implies d=40-44=-4$,\n- $15+30=45 \\implies d=45-44=1$,\n- $18+25=43 \\implies d=43-44=-1$,\n- $18+30=48 \\implies d=48-44=4$,\n- $25+30=55 \\implies d=55-44=11$。\n收集所有唯一值并按升序排列，得到 $-11,-4,-1,1,4,11$。", "answer": "$$\\boxed{\\begin{pmatrix}-11  -4  -1  1  4  11\\end{pmatrix}}$$", "id": "1943761"}, {"introduction": "在学会了如何构建零分布之后，下一步就是利用它来完成一次完整的假设检验。这需要我们将实验中*实际观测*到的结果与零假设下的各种可能性进行比较。这个练习将引导你走完一次精确置换检验的全过程：从计算观测到的统计量，到将其与完整的置换分布进行比较，最终确定双边p值。完成这个练习将巩固你对置换检验如何得出统计结论的理解。[@problem_id:1943765]", "problem": "一位生物统计学家正在分析一种新药的小型初步研究的结果。他们收集了来自一个治疗组（A组）和一个对照组（B组）的数据。两组的测量数据如下：\n\n- A组（样本量 $n_A = 3$）：$\\{-4.1, 2.9, 3.5\\}$\n- B组（样本量 $n_B = 2$）：$\\{-2.5, -3.8\\}$\n\n该统计学家想要检验原假设（$H_0$），即该药物没有效果，这意味着两组测量的基础概率分布是相同的。由于样本量小以及对数据非正态性的担忧，他们决定进行非参数置换检验。\n\n所选的检验统计量是样本均值之差，即 $T = \\bar{X}_A - \\bar{X}_B$。置换检验的过程包括将所有5个观测值汇集在一起，并考虑将其划分为一个大小为3的新“A组”和一个大小为2的新“B组”的所有可能方式。\n\n计算观测数据的双边p值。p值是指在所有可能的划分中，其检验统计量的绝对值大于或等于原始观测值的检验统计量绝对值的划分所占的比例。请将您的答案表示为最简分数。", "solution": "在两组同分布的原假设下，置换检验会枚举将汇集的观测值分配给一个大小为$3$的组（新A组）和一个大小为$2$的组（新B组）的所有方式。所选的统计量是 $T=\\bar{X}_{A}-\\bar{X}_{B}$。双边p值是满足$|T|$至少与观测到的$|T|$一样大的划分所占的比例。\n\n计算观测统计量。对于A组，样本为 $\\{-4.1, 2.9, 3.5\\}$，其和为 $s_{A}^{\\text{obs}}=-4.1+2.9+3.5=\\frac{23}{10}$，均值为 $\\bar{X}_{A}=\\frac{23}{30}$。对于B组，样本为 $\\{-2.5,-3.8\\}$，其和为 $s_{B}^{\\text{obs}}=-2.5-3.8=-\\frac{63}{10}$，均值为 $\\bar{X}_{B}=-\\frac{63}{20}$。因此\n$$\nT_{\\text{obs}}=\\bar{X}_{A}-\\bar{X}_{B}=\\frac{23}{30}-\\left(-\\frac{63}{20}\\right)=\\frac{47}{12}.\n$$\n因此 $|T_{\\text{obs}}|=\\frac{47}{12}$。\n\n汇集所有$5$个观测值，其总和为\n$$\nS_{\\text{total}}=\\frac{23}{10}-\\frac{63}{10}=-4.\n$$\n对于任何划分，如果 $s_{A}$ 是分配给A组的三个值的和，那么 $s_{B}=S_{\\text{total}}-s_{A}=-4-s_{A}$，统计量为\n$$\nT=\\frac{s_{A}}{3}-\\frac{s_{B}}{2}=\\frac{s_{A}}{3}-\\frac{-4-s_{A}}{2}=2+\\frac{5}{6}s_{A}.\n$$\n\n共有 $\\binom{5}{3}=10$ 种划分。枚举所有大小为$3$的子集（A组），计算 $s_{A}$ 和 $T=2+\\frac{5}{6}s_{A}$：\n\n- $\\{-4.1,2.9,3.5\\}$：$s_{A}=\\frac{23}{10}$，$T=\\frac{47}{12}$。\n- $\\{-4.1,2.9,-2.5\\}$：$s_{A}=-\\frac{37}{10}$，$T=-\\frac{13}{12}$。\n- $\\{-4.1,2.9,-3.8\\}$：$s_{A}=-5$，$T=-\\frac{13}{6}$。\n- $\\{-4.1,3.5,-2.5\\}$：$s_{A}=-\\frac{31}{10}$，$T=-\\frac{7}{12}$。\n- $\\{-4.1,3.5,-3.8\\}$：$s_{A}=-\\frac{22}{5}$，$T=-\\frac{5}{3}$。\n- $\\{-4.1,-2.5,-3.8\\}$：$s_{A}=-\\frac{52}{5}$，$T=-\\frac{20}{3}$。\n- $\\{2.9,3.5,-2.5\\}$：$s_{A}=\\frac{39}{10}$，$T=\\frac{21}{4}$。\n- $\\{2.9,3.5,-3.8\\}$：$s_{A}=\\frac{13}{5}$，$T=\\frac{25}{6}$。\n- $\\{2.9,-2.5,-3.8\\}$：$s_{A}=-\\frac{17}{5}$，$T=-\\frac{5}{6}$。\n- $\\{3.5,-2.5,-3.8\\}$：$s_{A}=-\\frac{14}{5}$，$T=-\\frac{1}{3}$。\n\n计算绝对值并与 $|T_{\\text{obs}}|=\\frac{47}{12}$ 进行比较：\n- 符合条件的（因为 $|T|\\geq \\frac{47}{12}$）：$\\frac{47}{12}$、$-\\frac{20}{3}$、$\\frac{21}{4}$、$\\frac{25}{6}$。\n- 不符合条件的：$-\\frac{13}{12}$、$-\\frac{13}{6}$、$-\\frac{7}{12}$、$-\\frac{5}{3}$、$-\\frac{5}{6}$、$-\\frac{1}{3}$。\n\n在$10$种划分中，有$4$种是符合条件的。因此，双边p值为\n$$\np=\\frac{4}{10}=\\frac{2}{5}.\n$$", "answer": "$$\\boxed{\\frac{2}{5}}$$", "id": "1943765"}, {"introduction": "每种统计检验都有其自身的特点和局限性。对于精确置换检验而言，一个重要的特性是其p值是离散的，在小样本情况下尤其如此。这个思想实验鼓励你批判性地思考检验本身的结构。通过确定一个给定实验设计下可能获得的最小非零p值，你将洞察到该检验的“分辨率”，并理解为何在某些小样本情境下，我们可能永远无法达到传统的显著性水平（例如，$p \\lt 0.05$）。[@problem_id:1943794]", "problem": "一家科技公司的数据科学家团队正在进行一项 A/B 测试，以检验新的网站布局 (Layout A) 是否比旧布局 (Layout B) 增加了用户参与时间。由于预算限制，他们只能在极小样本的用户上进行实验。总共有 7 名新用户被选中参与这项研究。其中，3 人被随机分配到 Layout A 组，其余 4 人被分配到 Layout B 组。\n\n一周后，记录下每位用户的总参与时间。为了分析结果，该团队决定进行单边精确置换检验，以确定 Layout A 是否导致参与时间出现统计学意义上的显著增加。\n\n假设没有两个用户的参与时间完全相同，那么从该检验中可能获得的最小非零 p 值是多少？请将你的答案表示为最简分数。", "solution": "在组大小固定的精确置换检验中，零假设意味着在观测到的参与时间数据上，标签是可交换的。对于 7 名用户，其中 3 人被分配到 Layout A，4 人被分配到 Layout B，其置换分布是通过考虑将 3 名用户分配到 Layout A 的所有不同方式来构建的。此类分配的总数为\n$$\n\\binom{7}{3}.\n$$\n检验 Layout A 参与时间是否增加的单边检验，会使用一个在 Layout A 结果上单调的检验统计量（例如，Layout A 组参与时间的总和或均值）。因为没有两个用户的参与时间相同，所以使该统计量最大化的排列是唯一的：即将三个最大的参与时间分配给 Layout A。因此，当观测到的分配是这种唯一的最极端配置时，就会出现最小的可能非零 p 值，此时尾部概率的分子只计算一个置换。因此，\n$$\np_{\\min}=\\frac{1}{\\binom{7}{3}}=\\frac{1}{35}.\n$$\n这是在所述条件下，单边精确置换检验可能得到的最小非零 p 值。", "answer": "$$\\boxed{\\frac{1}{35}}$$", "id": "1943794"}]}
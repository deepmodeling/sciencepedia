{"hands_on_practices": [{"introduction": "Cox模型的核心输出是其回归系数 $\\beta$，但这些对数风险比（log-hazard ratios）本身不够直观。将这些系数转化为风险比（Hazard Ratios, HR）是理解模型结果的首要技能。这个练习将指导你完成这一基本换算，让你学会如何解释一个协变量对事件风险的倍数效应。[@problem_id:1911775]", "problem": "在一项针对新型心血管药物“Cor-Stabil”的临床试验中，研究人员使用 Cox 比例风险模型来分析发生主要不良心脏事件的时间。该模型旨在评估该药物的有效性，同时控制患者年龄的影响。\n\n患者的风险函数由以下模型给出：\n$$h(t | X_1, X_2) = h_0(t) \\exp(\\beta_1 X_1 + \\beta_2 X_2)$$\n其中，$h_0(t)$ 是基线风险函数。协变量如下：\n- $X_1$：治疗组，一个二元变量，其中对于接受 Cor-Stabil 治疗的患者，$X_1 = 1$，对于安慰剂组的患者，$X_1 = 0$。\n- $X_2$：研究开始时患者的年龄（以年为单位），一个连续变量。\n\n分析数据后，估计的系数为 $\\beta_1 = \\ln(0.65)$ 和 $\\beta_2 = 0.03$。\n\n计算服用 Cor-Stabil 的患者与服用安慰剂的患者相比的风险比，假设被比较的两名患者年龄相同。将您的答案表示为小数。", "solution": "Cox 模型将时间 $t$ 的风险指定为 $h(t \\mid X_{1}, X_{2}) = h_{0}(t)\\exp(\\beta_{1}X_{1} + \\beta_{2}X_{2})$。比较同龄的 Cor-Stabil 组患者（$X_{1}=1$）与安慰剂组患者（$X_{1}=0$）的风险比（因此两者的 $X_{2}$ 相等）为：\n$$\n\\text{HR} = \\frac{h(t \\mid X_{1}=1, X_{2}=a)}{h(t \\mid X_{1}=0, X_{2}=a)} = \\frac{h_{0}(t)\\exp(\\beta_{1}\\cdot 1 + \\beta_{2}a)}{h_{0}(t)\\exp(\\beta_{1}\\cdot 0 + \\beta_{2}a)}.\n$$\n消去 $h_{0}(t)$ 和公共因子 $\\exp(\\beta_{2}a)$ 后得到：\n$$\n\\text{HR} = \\exp(\\beta_{1}).\n$$\n已知 $\\beta_{1} = \\ln(0.65)$，使用 $\\exp(\\ln(x)) = x$ 可得：\n$$\n\\text{HR} = \\exp(\\ln(0.65)) = 0.65.\n$$\n因此，在相同年龄下，Cor-Stabil 组相对于安慰剂组的风险比为 $0.65$。", "answer": "$$\\boxed{0.65}$$", "id": "1911775"}, {"introduction": "仅仅计算出风险比的点估计值是不够的；我们还需要量化其统计不确定性。这个练习将教你如何为风险比构建置信区间，这是判断观测效应是否具有统计显著性的关键一步。通过结合系数的估计值及其标准误，你将学会如何确定真实风险比的合理取值范围。[@problem_id:1911713]", "problem": "在一项旨在治疗特定危及生命疾病的新型治疗剂的临床试验中，研究人员使用Cox比例风险模型来评估该药物与安慰剂相比的有效性。该模型的主要目标是分析到发生关键不良事件为止的时间。该模型包含一个单一协变量 $X$，对于治疗组的患者，$X=1$；对于安慰剂组的患者，$X=0$。患者的风险函数由 $h(t|X) = h_0(t)\\exp(\\beta X)$ 给出，其中 $h_0(t)$ 是基线风险函数，$\\beta$ 是对数风险比系数。\n\n根据研究数据，该系数的最大似然估计计算为 $\\hat{\\beta} = -0.500$。该估计值的标准误为 $SE(\\hat{\\beta}) = 0.250$。\n\n风险比定义为 $\\exp(\\beta)$，表示治疗组的风险率与安慰剂组的风险率之比。为该风险比构建一个95%的置信区间。在计算中，请使用标准正态分布的临界值 $z_{0.025} = 1.96$。将您的答案报告为一对分别表示置信区间下界和上界的数字。将两个界限都四舍五入到三位有效数字。", "solution": "我们给定一个Cox比例风险模型，其风险函数为 $h(t|X) = h_{0}(t)\\exp(\\beta X)$，风险比定义为 $\\exp(\\beta)$。最大似然估计为 $\\hat{\\beta} = -0.500$，标准误为 $SE(\\hat{\\beta}) = 0.250$。为了构建风险比的 $95\\%$ 置信区间，我们首先构建 $\\beta$ 的Wald置信区间：\n$$\n\\hat{\\beta} \\pm z_{0.025}\\,SE(\\hat{\\beta}) \\quad \\text{with} \\quad z_{0.025} = 1.96.\n$$\n代入给定值，\n$$\n-0.500 \\pm 1.96 \\times 0.250 = -0.500 \\pm 0.490,\n$$\n得到\n$$\n\\text{CI for } \\beta: \\; \\left[-0.990,\\,-0.010\\right].\n$$\n由于风险比是 $\\beta$ 的单调变换 $\\exp(\\beta)$，风险比的 $95\\%$ 置信区间可以通过对端点取指数得到：\n$$\n\\left[\\exp(-0.990),\\,\\exp(-0.010)\\right].\n$$\n计算并四舍五入到三位有效数字，\n$$\n\\exp(-0.990) \\approx 0.371576691 \\approx 0.372,\\quad \\exp(-0.010) \\approx 0.990049834 \\approx 0.990.\n$$\n因此，风险比的 $95\\%$ 置信区间为 $\\left[0.372,\\,0.990\\right]$。", "answer": "$$\\boxed{\\begin{pmatrix}0.372  0.990\\end{pmatrix}}$$", "id": "1911713"}, {"introduction": "在掌握了风险比的解释和推断后，我们可以进一步利用模型进行个体化的预测。这个练习展示了Cox模型如何用于预测特定个体在某个时间点的生存概率，尽管其基准风险函数是未指定的。通过将被估计的系数与基准累积风险的估计值相结合，你将能体会到该模型的完整预测能力。[@problem_id:1911715]", "problem": "在一项关于新型电子元件的可靠性研究中，其失效时间采用Cox比例风险模型进行建模。在时间 $t$ 时，一个元件的风险率由模型 $h(t | Z) = h_0(t) \\exp(\\beta Z)$ 给出，其中 $t$ 是以年为单位的运行时间，$Z$ 是一个表示元件制造精度得分的连续协变量，$h_0(t)$ 是一个未指定的基线风险函数。\n\n具有协变量 $Z$ 的元件的累积风险函数为 $H(t | Z) = H_0(t) \\exp(\\beta Z)$，其中 $H_0(t) = \\int_0^t h_0(\\tau) d\\tau$ 是累积基线风险。一个元件存活超过时间 $t$ 的概率，称为生存概率，由关系式 $S(t | Z) = \\exp(-H(t | Z))$ 给出。\n\n通过对失效数据的分析，模型回归系数的最大似然估计为 $\\hat{\\beta} = \\ln(3)$。在5年这个时间点，累积基线风险的非参数估计为 $\\hat{H}_0(5) = 0.2$。\n\n使用这些估计值，计算制造精度得分为 $Z=1$ 的元件的预测5年生存概率。将您的最终答案四舍五入至四位有效数字。", "solution": "我们使用Cox比例风险模型。在时间 $t$、协变量值为 $Z$ 时的累积风险为 $H(t \\mid Z) = H_{0}(t)\\exp(\\beta Z)$，生存函数为 $S(t \\mid Z) = \\exp(-H(t \\mid Z))$。\n\n当 $t=5$ 和 $Z=1$ 时，使用估计值 $\\hat{\\beta} = \\ln(3)$ 和 $\\hat{H}_{0}(5)=0.2$，预测的累积风险为\n$$\n\\hat{H}(5 \\mid 1) = \\hat{H}_{0}(5)\\exp(\\hat{\\beta}\\cdot 1) = 0.2 \\exp(\\ln(3)) = 0.2 \\cdot 3 = 0.6.\n$$\n因此，预测的生存概率为\n$$\n\\hat{S}(5 \\mid 1) = \\exp\\!\\left(-\\hat{H}(5 \\mid 1)\\right) = \\exp(-0.6) = \\exp\\!\\left(-\\frac{3}{5}\\right).\n$$\n数值上，$\\exp(-0.6) \\approx 0.5488116361$，四舍五入至四位有效数字为 $0.5488$。", "answer": "$$\\boxed{0.5488}$$", "id": "1911715"}]}
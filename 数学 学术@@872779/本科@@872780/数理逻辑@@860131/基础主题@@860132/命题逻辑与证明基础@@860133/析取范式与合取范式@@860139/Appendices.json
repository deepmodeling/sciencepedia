{"hands_on_practices": [{"introduction": "理论学习之后，最好的检验方式就是亲自动手。这个练习将带你回到析取范式（DNF）和合取范式（CNF）最基本的定义。通过为一个简单的逻辑蕴含表达式 $x \\to y$ 构建真值表，你将直接从“真”的赋值中提取主析取范式，从“假”的赋值中提取主合取范式，深刻理解这两种范式是如何完整地刻画一个逻辑函数的。[@problem_id:3040339]", "problem": "考虑布尔变量 $x$ 和 $y$ 上的命题公式 $x \\to y$，其中 $x$ 和 $y$ 的取值都在 $\\{0,1\\}$ 中，0 解释为“假”，1 解释为“真”。使用命题逻辑中蕴含的经典语义：当且仅当 $p$ 为真且 $q$ 为假时，陈述 $p \\to q$ 为假，否则为真。为 $x \\to y$ 在所有 $2^{2}$ 种赋值下构造完整的真值表。使用真值表和以下标准定义，推导出 $x \\to y$ 的主析取范式 (DNF) 和主合取范式 (CNF)。\n\n使用的定义：\n- 析取范式 (DNF) 是文字的合取式的析取，其中文字是变量或其否定。主析取范式是通过对所有成真赋值对应的极小项进行析取得到的，每个极小项是包含所有变量的合取，如果变量赋值为1，则变量以原形式出现，如果赋值为0，则以否定形式出现。\n- 合取范式 (CNF) 是文字的析取式的合取。主合取范式是通过对所有成假赋值对应的极大项进行合取得到的，每个极大项是包含所有变量的析取，其中如果变量赋值为1，则变量以否定形式出现，如果赋值为0，则以原形式出现，这样该极大项仅在该赋值下为假。\n\n在推导出主析取范式和主合取范式后，计算主析取范式中析取项的数量和主合取范式中合取子句的数量。令 $\\mathcal{R}$ 为如下定义的比率\n$$\n\\mathcal{R} = \\frac{\\text{主析取范式中的析取项数量}}{\\text{主合取范式中的合取子句数量}}。\n$$\n计算 $\\mathcal{R}$ 并将其作为最终答案。无需四舍五入。", "solution": "在尝试给出解答之前，首先对问题进行验证。\n\n### 步骤 1：提取已知条件\n-   **命题公式：** $x \\to y$\n-   **变量与定义域：** 布尔变量 $x$ 和 $y$，取值范围为 $\\{0,1\\}$，其中 $0$ 代表“假”，$1$ 代表“真”。\n-   **蕴含的语义：** 当且仅当 $p$ 为真且 $q$ 为假时，陈述 $p \\to q$ 为假，否则为真。\n-   **任务：** 为 $x \\to y$ 构造完整的真值表。\n-   **主析取范式 (DNF) 的定义：** 所有成真赋值对应的极小项的析取。极小项是所有变量的合取，如果变量赋值为1，则以原形式出现，如果赋值为0，则以否定形式出现。\n-   **主合取范式 (CNF) 的定义：** 所有成假赋值对应的极大项的合取。极大项是所有变量的析取，其中如果变量赋值为1，则以否定形式出现，如果赋值为0，则以原形式出现。\n-   **最终计算：** 计算比率 $\\mathcal{R} = \\frac{\\text{主析取范式中的析取项数量}}{\\text{主合取范式中的合取子句数量}}$。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题在经典命题逻辑的框架内定义明确。蕴含、DNF 和 CNF 的定义是标准的且一致的。任务规定明确，能够导出一个唯一、可推导的结果。该问题是自包含的，科学上基于数理逻辑，并且是客观的。它不违反任何无效性标准。\n\n### 步骤 3：结论与行动\n该问题有效。将提供解答。\n\n第一步是为命题公式 $x \\to y$ 构造完整的真值表。变量 $x$ 和 $y$ 可以在 $\\{0, 1\\}$ 中取值，从而产生 $2^2 = 4$ 种可能的真值赋值。根据所提供的语义，$x \\to y$ 仅在 $x$ 为真 ($1$) 且 $y$ 为假 ($0$) 时为假（值为 $0$）。在所有其他情况下，它为真（值为 $1$）。\n\n真值表如下：\n\n| 行 | $x$ | $y$ | $x \\to y$ |\n|:---:|:---:|:---:|:---------:|\n| $1$ | $0$ | $0$ |     $1$     |\n| $2$ | $0$ | $1$ |     $1$     |\n| $3$ | $1$ | $0$ |     $0$     |\n| $4$ | $1$ | $1$ |     $1$     |\n\n接下来，我们推导主析取范式 (DNF)。主析取范式是极小项的析取，其中每个极小项对应一个成真赋值（即真值表中公式值为 $1$ 的行）。一个极小项是所有文字（变量或其否定）的合取。在赋值中，如果变量的值为 $1$，则它以原形式出现；如果值为 $0$，则以否定形式出现。\n\n从真值表中， $x \\to y$ 的成真赋值为：\n-   行 $1$：$(x=0, y=0)$\n-   行 $2$：$(x=0, y=1)$\n-   行 $4$：$(x=1, y=1)$\n\n我们为这些赋值中的每一个构造极小项：\n-   对于 $(x=0, y=0)$，极小项是 $(\\lnot x \\land \\lnot y)$。\n-   对于 $(x=0, y=1)$，极小项是 $(\\lnot x \\land y)$。\n-   对于 $(x=1, y=1)$，极小项是 $(x \\land y)$。\n\n主析取范式是这些极小项的析取：\n$$(\\lnot x \\land \\lnot y) \\lor (\\lnot x \\land y) \\lor (x \\land y)$$\n主析取范式中的析取项数量等于成真赋值的数量，即 $3$。\n\n接下来，我们推导主合取范式 (CNF)。主合取范式是极大项的合取，其中每个极大项对应一个成假赋值（即公式值为 $0$ 的行）。一个极大项是所有文字的析取。在赋值中，如果变量的值为 $1$，则它以否定形式出现；如果值为 $0$，则以原形式出现。这种构造确保了极大项本身在该特定赋值下值为 $0$。\n\n从真值表中，$x \\to y$ 只有一个成假赋值：\n-   行 $3$：$(x=1, y=0)$\n\n我们为这个赋值构造极大项：\n-   对于 $(x=1, y=0)$，变量 $x$（值为 $1$）以否定形式出现，变量 $y$（值为 $0$）以原形式出现。极大项是 $(\\lnot x \\lor y)$。\n\n主合取范式就是这单个极大项：\n$$(\\lnot x \\lor y)$$\n主合取范式中的合取子句数量等于成假赋值的数量，即 $1$。\n\n最后，我们计算问题陈述中定义的比率 $\\mathcal{R}$：\n$$\n\\mathcal{R} = \\frac{\\text{主析取范式中的析取项数量}}{\\text{主合取范式中的合取子句数量}}\n$$\n代入计数值：\n$$\n\\mathcal{R} = \\frac{3}{1} = 3\n$$", "answer": "$$\\boxed{3}$$", "id": "3040339"}, {"introduction": "虽然主范式能够唯一地表示一个逻辑函数，但在实际应用中，它们往往不是最简洁的形式。这个练习模拟了在数字电路设计或软件工程中常见的优化问题。你将学习如何运用布尔代数的基本定律，如吸收律和分配律，来化简一个给定的析取范式，以找到包含最少文字的等价形式，这对于降低成本和提高系统效率至关重要。[@problem_id:1358964]", "problem": "一个小型化学反应器的系统控制器依赖于三个二进制传感器：$S_1$（温度）、$S_2$（压力）和 $S_3$（冷却剂流量）。信号由一个逻辑变量表示，如果传感器读数高于某个阈值，则该变量为真（逻辑 1），否则为假（逻辑 0）。\n\n安全警报函数 $F(S_1, S_2, S_3)$ 定义为当且仅当满足以下任一条件时为真：\n1.  传感器 $S_1$ 为假，传感器 $S_2$ 为假，且传感器 $S_3$ 为真。\n2.  传感器 $S_1$ 为假，传感器 $S_2$ 为真，且传感器 $S_3$ 为真。\n3.  传感器 $S_1$ 为真，传感器 $S_2$ 为真，且传感器 $S_3$ 为真。\n\n这对应于析取范式 (DNF)，即与项的或。为了优化控制器的逻辑，需要找到一个使用最少可能文字的等价 DNF 表示。文字是变量或其否定形式（例如，$S_1$ 和 $\\lnot S_1$ 都是文字）。DNF 表达式中的总文字数是其每个乘积项中文字数的总和。\n\n将函数 $F$ 表示为等价的 DNF 所需的最小总文字数是多少？", "solution": "给定的函数 DNF 形式为\n$$F = (\\lnot S_{1} \\land \\lnot S_{2} \\land S_{3}) \\lor (\\lnot S_{1} \\land S_{2} \\land S_{3}) \\lor (S_{1} \\land S_{2} \\land S_{3}).$$\n首先，提取出现在每一项中的 $S_{3}$：\n$$F = S_{3} \\land \\big[(\\lnot S_{1} \\land \\lnot S_{2}) \\lor (\\lnot S_{1} \\land S_{2}) \\lor (S_{1} \\land S_{2})\\big].$$\n化简方括号中的表达式。合并前两项：\n$$(\\lnot S_{1} \\land \\lnot S_{2}) \\lor (\\lnot S_{1} \\land S_{2}) = \\lnot S_{1} \\land (\\lnot S_{2} \\lor S_{2}) = \\lnot S_{1}.$$\n因此\n$$F = S_{3} \\land \\big[\\lnot S_{1} \\lor (S_{1} \\land S_{2})\\big].$$\n使用分配律 $X \\lor (Y \\land Z) = (X \\lor Y) \\land (X \\lor Z)$，其中 $X=\\lnot S_{1}$，$Y=S_{1}$，$Z=S_{2}$：\n$$\\lnot S_{1} \\lor (S_{1} \\land S_{2}) = (\\lnot S_{1} \\lor S_{1}) \\land (\\lnot S_{1} \\lor S_{2}) = 1 \\land (\\lnot S_{1} \\lor S_{2}) = \\lnot S_{1} \\lor S_{2}.$$\n因此，最小化的积之和形式为\n$$F = S_{3} \\land (\\lnot S_{1} \\lor S_{2}) = (\\lnot S_{1} \\land S_{3}) \\lor (S_{2} \\land S_{3}).$$\n这个 DNF 有两个乘积项，每个乘积项有两个文字，总共有 $4$ 个文字。\n\n为了证明这是最小化的，请注意：\n- 因为 $F(1,0,1)=0$，任何只包含 $S_{3}$ 的蕴含项都会错误地覆盖 $(1,0,1)$，所以除了 $S_{3}$ 外，每个乘积项必须至少包含 $\\lnot S_{1}$ 或 $S_{2}$ 中的一个；因此每项至少需要两个文字。\n- $(0,0,1)$、$(0,1,1)$ 和 $(1,1,1)$ 这三个值为真的状态无法用单个包含2个文字的项来覆盖而不覆盖到 $(1,0,1)$，所以至少需要两个乘积项。\n\n因此，下界为 $2$ 项乘以 $2$ 个文字等于 $4$，这可以通过 $F = (\\lnot S_{1} \\land S_{3}) \\lor (S_{2} \\land S_{3})$ 实现。", "answer": "$$\\boxed{4}$$", "id": "1358964"}, {"introduction": "在自动推理和约束求解等高级领域，将复杂逻辑表达式高效地转换为合取范式（CNF）是核心步骤。直接使用分配律展开可能会导致子句数量的指数级爆炸，这个问题促使了更精妙技术的诞生。本练习将引导你对比两种编码异或（XOR）门的方法：传统的分配律方法和强大的 Tseitin 变换，让你亲身体会后者如何通过引入辅助变量来保持线性规模，这是现代 SAT 求解器成功的关键之一。[@problem_id:3040370]", "problem": "设 $x$ 和 $y$ 是命题变量，并令 $\\oplus$ 表示异或 (XOR)，因此当且仅当 $x$ 和 $y$ 的真值不同时，$x \\oplus y$ 为真。合取范式 (CNF) 是文字的析取式之合取，而析取范式 (DNF) 是文字的合取式之析取。Tseitin 变换引入辅助变量来表示子公式，并通过添加子句来强制等价，从而在线性规模内保持可满足性。\n\n您将以两种方式将约束 $x \\oplus y$ 编码为 CNF，并分析它们在子句数量和传播方面的性质。在整个过程中，仅使用基本的命题等价关系，包括 $\\leftrightarrow$ 和 $\\rightarrow$ 的定义、德摩根定律以及 $\\lor$ 对 $\\land$ 的分配律。\n\n1. 仅使用变量 $x$ 和 $y$，从定义 $x \\oplus y \\equiv (x \\land \\lnot y) \\lor (\\lnot x \\land y)$ 出发，通过正确应用分配律和简化，推导出一个与 $x \\oplus y$ 逻辑等价的 CNF。\n\n2. 引入一个辅助变量 $a$，推导出一个强制 $a \\leftrightarrow (x \\oplus y)$ 的 Tseitin 风格的 CNF。然后添加单位子句 $(a)$ 以通过该辅助变量断言 XOR 约束。您的子句集必须通过以下步骤获得：首先将 $\\leftrightarrow$ 重写为蕴含式，然后将每个蕴含式 $p \\rightarrow q$ 重写为 $\\lnot p \\lor q$，通过德摩根定律将否定向内推，并分配 $\\lor$ 到 $\\land$ 上以达到 CNF，当出现重言式时进行简化。在此计数步骤中，不要通过单位传播来消除子句。\n\n3. 对于这两种编码，根据单位传播 (UP) 的定义和传播完备编码的概念进行推理，如下所示：如果对于变量 $V$ 上的约束的任一编码，在任意对 $V$ 的部分赋值下，当该约束逻辑上强制一个文字或检测到不一致性时，对该 CNF 的 UP 也能强制相同的文字或推导出空子句，则称该编码是传播完备的。请论证在断言 XOR 约束的情况下，您的两种编码相对于变量 $x$ 和 $y$ 是否是传播完备的。\n\n定义开销比 $R$ 为基于 Tseitin 的编码中的总子句数（包括单位子句 $(a)$，在通过单位传播或归结进行任何简化之前计数）除以第 $1$ 部分中朴素 CNF 的子句数。精确计算 $R$。您的最终答案必须是这个精确的比值，以最简分数或等效的封闭形式表达式表示；无需四舍五入。", "solution": "这个问题要求推导和分析异或 (XOR) 约束的两种不同合取范式 (CNF) 编码，然后比较它们的性质。\n\n首先，我们解决仅使用变量 $x$ 和 $y$ 推导与 $x \\oplus y$ 逻辑等价的 CNF 的任务。XOR 的定义为 $x \\oplus y \\equiv (x \\land \\lnot y) \\lor (\\lnot x \\land y)$。这是 XOR 函数的析取范式 (DNF)。要将此 DNF 转换为 CNF，我们应用析取对合取的分配律。该定律应用于两个合取式时的一般形式是 $(A \\land B) \\lor (C \\land D) \\equiv (A \\lor C) \\land (A \\lor D) \\land (B \\lor C) \\land (B \\lor D)$。\n\n令 $A=x$，$B=\\lnot y$，$C=\\lnot x$，$D=y$。将这些代入分配律可得：\n$$\n(x \\land \\lnot y) \\lor (\\lnot x \\land y) \\equiv (x \\lor \\lnot x) \\land (x \\lor y) \\land (\\lnot y \\lor \\lnot x) \\land (\\lnot y \\lor y)\n$$\n我们观察到，结果中有两个子句是重言式：\n- $(x \\lor \\lnot x)$ 恒为真。\n- $(\\lnot y \\lor y)$ 恒为真。\n在合取式中，一个恒为真的子句可以被移除而不改变表达式的逻辑含义。因此，表达式简化为：\n$$\n(x \\lor y) \\land (\\lnot y \\lor \\lnot x)\n$$\n这是 $x \\oplus y$ 的 CNF。它由两个子句组成：$(x \\lor y)$ 和 $(\\lnot x \\lor \\lnot y)$。这种直接编码的子句数量为 $2$。\n\n其次，我们为相同的约束推导一个 Tseitin 风格的 CNF。我们引入一个辅助变量 $a$ 并强制等价 $a \\leftrightarrow (x \\oplus y)$。为了断言 XOR 约束，我们稍后将添加单位子句 $(a)$。问题指定了转换过程。等价关系首先被写成两个蕴含式的合取：\n$$\na \\leftrightarrow (x \\oplus y) \\equiv (a \\rightarrow (x \\oplus y)) \\land ((x \\oplus y) \\rightarrow a)\n$$\n我们将每个蕴含式转换为其析取形式 ($\\lnot p \\lor q$)。\n第一部分是 $a \\rightarrow (x \\oplus y)$，它变为 $\\lnot a \\lor (x \\oplus y)$。为了将其转换为 CNF，我们代入我们之前推导出的 $x \\oplus y$ 的 CNF：\n$$\n\\lnot a \\lor ((x \\lor y) \\land (\\lnot x \\lor \\lnot y))\n$$\n现在，我们将 $\\lnot a \\lor \\dots$ 分配到合取上：\n$$\n(\\lnot a \\lor (x \\lor y)) \\land (\\lnot a \\lor (\\lnot x \\lor \\lnot y))\n$$\n这得到两个子句：$(\\lnot a \\lor x \\lor y)$ 和 $(\\lnot a \\lor \\lnot x \\lor \\lnot y)$。\n\n第二部分是 $(x \\oplus y) \\rightarrow a$，它变为 $\\lnot(x \\oplus y) \\lor a$。我们需要 $\\lnot(x \\oplus y)$ 的 CNF。逻辑上，$\\lnot(x \\oplus y)$ 等价于 $x \\leftrightarrow y$，其 DNF 为 $(x \\land y) \\lor (\\lnot x \\land \\lnot y)$。为了遵循问题的指示，我们必须将否定向内推到 $x \\oplus y$ 的 DNF 上：\n$$\n\\lnot((x \\land \\lnot y) \\lor (\\lnot x \\land y)) \\lor a\n$$\n应用德摩根定律：\n$$\n(\\lnot(x \\land \\lnot y) \\land \\lnot(\\lnot x \\land y)) \\lor a\n$$\n$$\n((\\lnot x \\lor y) \\land (x \\lor \\lnot y)) \\lor a\n$$\n现在，我们将 $\\lor a$ 分配到合取上：\n$$\n((\\lnot x \\lor y) \\lor a) \\land ((x \\lor \\lnot y) \\lor a)\n$$\n这又得到两个子句：$(\\lnot x \\lor y \\lor a)$ 和 $(x \\lor \\lnot y \\lor a)$。\n总而言之，$a \\leftrightarrow (x \\oplus y)$ 的 CNF 由四个子句组成：\n$1$. $(\\lnot a \\lor x \\lor y)$\n$2$. $(\\lnot a \\lor \\lnot x \\lor \\lnot y)$\n$3$. $(a \\lor \\lnot x \\lor y)$\n$4$. $(a \\lor x \\lor \\lnot y)$\n\n为了断言 XOR 约束，我们添加单位子句 $(a)$。因此，完整的基于 Tseitin 的编码包含这四个子句加上子句 $(a)$，在任何简化之前总共有 $5$ 个子句。\n\n第三，我们分析两种编码相对于变量 $x$ 和 $y$ 的传播完备性。如果对于任何部分赋值，逻辑推断都能被单位传播 (UP) 所反映，则该编码是传播完备的。\n\n对于直接编码 $(\\lnot x \\lor \\lnot y) \\land (x \\lor y)$：\n假设我们进行部分赋值 $x=True$。CNF 变为 $(\\lnot \\top \\lor \\lnot y) \\land (\\top \\lor y)$，简化为 $(\\bot \\lor \\lnot y) \\land \\top$。这进一步简化为单位子句 $(\\lnot y)$。对此子句进行单位传播会强制赋值 $y=False$。这个推论符合 $x \\oplus y$ 的逻辑要求：如果 $x$ 为真，则 $y$ 必须为假。\n类似地，如果我们赋值 $x=False$，CNF 变为 $(\\lnot \\bot \\lor \\lnot y) \\land (\\bot \\lor y)$，即 $(\\top \\lor \\lnot y) \\land y$，简化为单位子句 $(y)$。UP 强制 $y=True$。这也符合逻辑推论。\n如果我们首先对 $y$ 赋真值，同样的推理也对称地适用。因此，直接编码是传播完备的。\n\n对于基于 Tseitin 的编码，完整的子句集是 $\\{(\\lnot a \\lor x \\lor y), (\\lnot a \\lor \\lnot x \\lor \\lnot y), (a \\lor \\lnot x \\lor y), (a \\lor x \\lor \\lnot y), (a)\\}$。\nXOR 约束是通过单位子句 $(a)$ 来断言的。对 $(a)$ 进行单位传播会将 $a$ 设为 True。这会立即简化子句集：\n- $(\\lnot a \\lor x \\lor y)$ 变为 $(\\bot \\lor x \\lor y) \\Rightarrow (x \\lor y)$。\n- $(\\lnot a \\lor \\lnot x \\lor \\lnot y)$ 变为 $(\\bot \\lor \\lnot x \\lor \\lnot y) \\Rightarrow (\\lnot x \\lor \\lnot y)$。\n- $(a \\lor \\lnot x \\lor y)$ 变为 $(\\top \\lor \\lnot x \\lor y)$，这是一个重言式并被移除。\n- $(a \\lor x \\lor \\lnot y)$ 变为 $(\\top \\lor x \\lor \\lnot y)$，这是一个重言式并被移除。\n在传播 $(a)$ 之后，约束变量 $x$ 和 $y$ 的子句集是 $\\{ (x \\lor y), (\\lnot x \\lor \\lnot y) \\}$。这与第一部分的直接编码完全相同。因此，任何基于对 $x$ 或 $y$ 的部分赋值的后续单位传播，其行为将与直接编码中的完全一样。所以，基于 Tseitin 的编码在与断言约束的单位子句结合时，相对于变量 $x$ 和 $y$ 也是传播完备的。\n\n最后，我们计算开销比 $R$。它被定义为基于 Tseitin 的编码中的总子句数（包括单位子句，在简化之前）除以直接 CNF 中的子句数。\n直接 CNF 中的子句数，$N_{direct} = 2$。\nTseitin 编码中的子句数，$N_{Tseitin} = 4 + 1 = 5$。\n比率 $R$ 是：\n$$\nR = \\frac{N_{Tseitin}}{N_{direct}} = \\frac{5}{2}\n$$", "answer": "$$\\boxed{\\frac{5}{2}}$$", "id": "3040370"}]}
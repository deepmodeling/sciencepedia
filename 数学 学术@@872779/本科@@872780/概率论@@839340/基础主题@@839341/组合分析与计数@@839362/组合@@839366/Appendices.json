{"hands_on_practices": [{"introduction": "组合问题常常涉及各种限制条件。一个强大而常见的策略不是直接计算所有有效情况，而是计算总情况数然后减去无效情况。这个关于蛋白质筛选的练习 [@problem_id:1356194] 清晰地展示了这种“减法原理”，它是解决带限制条件的组合问题的基石。", "problem": "一个计算生物学实验室的研究团队正在尝试鉴定一种功能性蛋白质复合物。他们需要从一组可供筛选的 20 种不同蛋白质中，组建一个恰好包含 5 种蛋白质的测试组。然而，已知其中两种蛋白质，我们称之为 Protein Alpha 和 Protein Beta，在结构上相互抑制。因此，它们不能同时被包含在同一个测试组中。可以只包含其中一种，或者两种都不包含。\n\n在此限制条件下，可以组成多少种不同的包含 5 种蛋白质的测试组？", "solution": "我们将测试组建模为从 20 种不同蛋白质中选出的一个包含 5 个元素的子集。在没有限制的情况下，这样的组数由二项式系数 $\\binom{20}{5}$ 给出。\n\n限制条件禁止同时包含蛋白质 Alpha ($A$) 和蛋白质 Beta ($B$)。我们计算同时包含 $A$ 和 $B$ 的无效组数，然后从总数中减去它们。如果 $A$ 和 $B$ 都被包含在内，则剩下的 $3$ 种蛋白质必须从其余的 $18$ 种蛋白质中选择，这有 $\\binom{18}{3}$ 种方法。根据减法原理，有效组的数量为\n$$\n\\binom{20}{5}-\\binom{18}{3}.\n$$\n计算这些二项式系数，\n$$\n\\binom{20}{5}=\\frac{20\\cdot 19\\cdot 18\\cdot 17\\cdot 16}{5\\cdot 4\\cdot 3\\cdot 2\\cdot 1}=15504,\n\\qquad\n\\binom{18}{3}=\\frac{18\\cdot 17\\cdot 16}{3\\cdot 2\\cdot 1}=816.\n$$\n因此，有效测试组的数量为\n$$\n15504-816=14688.\n$$\n作为一种通过分类讨论进行的验证：要么 $A$ 和 $B$ 都不包含（有 $\\binom{18}{5}$ 种方式），要么只包含其中一个（有 $2$ 种方式选择包含哪一个，然后从剩下的 $18$ 个中选择 $4$ 个，得到 $2\\binom{18}{4}$ 种方式）。这得出 $\\binom{18}{5}+2\\binom{18}{4}=8568+6120=14688$，与上面的结果相符。", "answer": "$$\\boxed{14688}$$", "id": "1356194"}, {"introduction": "当处理多个“至少一个”的条件时，我们必须小心避免重复计数。容斥原理提供了一种系统性的方法，通过交替加减重叠的集合来得到正确的结果。这个关于基因样本选择的练习 [@problem_id:1349164] 是一个应用这一基本原理的完美场景，它将减法原理扩展到了更普遍的情况。", "problem": "一个基因工程实验室的科研团队正在对12份独特的、低温保存的植物样本进行一项实验。这些样本根据是否含有两种特定的遗传标记进行分类，我们称之为标记P和标记Q。实验室的库存清单显示了如下分布：\n\n- 12份样本中恰好有5份含有标记P。\n- 12份样本中恰好有4份含有标记Q。\n- 12份样本中恰好有2份同时含有标记P和标记Q。\n\n该团队需要挑选一个由4份样本组成的子集，用于一项新的实验方案。为使实验有效，所选出的4份样本子集必须包含至少一份含有标记P的样本，且至少一份含有标记Q的样本。\n\n满足此条件的4份样本子集有多少种不同的选法？", "solution": "设 $P$ 表示含有标记P的样本集合，$Q$ 表示含有标记Q的样本集合。库存清单表明 $|P|=5$，$|Q|=4$ 且 $|P\\cap Q|=2$。因此，通过减法可得：\n$$|P\\setminus Q|=|P|-|P\\cap Q|=5-2=3,$$\n$$|Q\\setminus P|=|Q|-|P\\cap Q|=4-2=2.$$\n两种标记都不含有的样本数量为\n$$12-\\big(|P\\setminus Q|+|Q\\setminus P|+|P\\cap Q|\\big)=12-(3+2+2)=5.$$\n我们用容斥原理来计算包含至少一个P和至少一个Q的4元素子集的数量。4元素子集的总数为 $\\binom{12}{4}$。不含P的子集必须从 $Q\\setminus P$ 和两种标记都不含有的样本中选取，这些样本的总数为 $2+5=7$，因此有 $\\binom{7}{4}$ 种选法。不含Q的子集必须从 $P\\setminus Q$ 和两种标记都不含有的样本中选取，这些样本的总数为 $3+5=8$，因此有 $\\binom{8}{4}$ 种选法。既不含P也不含Q的子集完全从两种标记都不含有的样本中选取，有 $\\binom{5}{4}$ 种选法。因此，所求的数量为\n$$\\binom{12}{4}-\\binom{7}{4}-\\binom{8}{4}+\\binom{5}{4}.$$\n计算二项式系数，\n$$\\binom{12}{4}=495,\\quad \\binom{7}{4}=35,\\quad \\binom{8}{4}=70,\\quad \\binom{5}{4}=5,$$\n所以最终的数量是\n$$495-35-70+5=395.$$", "answer": "$$\\boxed{395}$$", "id": "1349164"}, {"introduction": "一些关于排列和布局的组合问题可能难以直接求解。一种更高级的技巧是将问题转化为一个等价但更简单的选择问题。这个数据中心服务器布局问题 [@problem_id:1349203] 演示了如何通过巧妙的变量代换，将一个物理上的间距限制转化为一个标准的组合计算，这种方法通常被称为“插板法”或“星与棍”模型。", "problem": "一个数据中心经理正在为一个新的服务器机架规划布局。该机架由一排 $N$ 个插槽组成，从 1 到 $N$ 编号。经理需要安装 $k$ 台相同的高性能服务器。这些服务器会产生大量热量，为了保证适当的散热，任意两台服务器之间必须至少有 $m$ 个空插槽隔开。\n\n此外，由于布线和维护通道的要求，机架两端的两个插槽（即插槽 1 和插槽 $N$）被指定为强制净空区，不能被这些专用服务器占用。\n\n假设 $N$、$k$ 和 $m$ 是正整数，且存在有效的放置方案，请确定按照这些规则放置 $k$ 台相同服务器的所有不同方式的总数。请用一个关于 $N$、$k$ 和 $m$ 的封闭形式解析表达式给出你的答案。", "solution": "设 $k$ 台服务器的位置为 $p_1, p_2, \\ldots, p_k$，并按升序排列：$2 \\le p_1  p_2  \\ldots  p_k \\le N-1$。\n散热约束要求任意两个相邻服务器的位置之差至少为 $m+1$，即 $p_{i+1} - p_i \\ge m+1$。\n\n为了处理这个间距约束，我们进行变量代换。定义一组新变量 $x_i$：\n$x_1 = p_1$\n$x_2 = p_2 - m$\n...\n$x_k = p_k - (k-1)m$\n\n通过这个变换，原先带间距的序列 $\\{p_i\\}$ 被映射为一个严格递增的整数序列 $\\{x_i\\}$，即 $x_1  x_2  \\ldots  x_k$。\n我们只需确定新序列的取值范围。\n下界为 $x_1 = p_1 \\ge 2$。\n上界为 $x_k = p_k - (k-1)m \\le (N-1) - (k-1)m$。\n\n因此，问题转化为从整数集合 $\\{2, 3, \\ldots, N-1-(k-1)m\\}$ 中选择 $k$ 个不同的数。\n该集合的大小为 $(N-1-(k-1)m) - 2 + 1 = N-2-(k-1)m$。\n选择 $k$ 个数的方法数即为组合数：\n$$ \\binom{N-2-(k-1)m}{k} $$\n该方法与“插板法”的思想同构：我们可以将 $k$ 个服务器和它们之间的 $k-1$ 组 $m$ 个强制空位看作一个整体，然后在剩余的可用空间中进行放置。", "answer": "$$\\boxed{\\binom{N-2-(k-1)m}{k}}$$", "id": "1349203"}]}
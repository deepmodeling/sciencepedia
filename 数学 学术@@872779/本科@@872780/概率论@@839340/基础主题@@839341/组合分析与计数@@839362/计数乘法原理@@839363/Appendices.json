{"hands_on_practices": [{"introduction": "直接计算满足“至少一个”条件的排列组合有时会很复杂。这个问题展示了一种强大的策略：计算所有可能的排列，然后减去不满足条件的排列。这种被称为补集计数法的技巧，通过关注其反面——通常更容易计算的情形——来简化复杂问题。", "problem": "一家科技公司正在为其内容分发网络（CDN）设计部署策略。该公司需要将其网络中的服务器分发三个不同的大型数据文件——一个视频游戏客户端、一部故事片和一个操作系统更新。该网络由位于不同地理区域的12个不同服务器组成。为了分发，这三个文件中的每一个都必须精确地放置在一台服务器上。一台服务器能够托管多个文件。\n\n在这12台服务器中，4台被归类为“高级”高带宽服务器，而另外8台是“标准”服务器。公司政策规定，对于任何有效的部署，三个文件中至少有一个必须托管在高级服务器上，以确保关键内容的高速访问。\n\n在遵守此政策的情况下，有多少种不同的方式可以将这三个文件分发到12台服务器上？", "solution": "设文件集合为 $F$，其中 $|F|=3$（不同的文件），服务器集合为 $S$，其中 $|S|=12$，分为 $P$（高级服务器）和 $Q$（标准服务器），其中 $|P|=4$ 和 $|Q|=8$。一次部署将每个文件分配到一台服务器，允许同一台服务器上有多个文件。因此，每次部署对应一个函数 $f: F \\to S$。\n\n根据乘法原理，不受限制的部署总数为\n$$\n12^{3}.\n$$\n\n无效的部署是指没有文件放在高级服务器上的部署，即 $f(F) \\subseteq Q$。此类部署的数量为\n$$\n8^{3}.\n$$\n\n根据补集法则，至少有一个文件放在高级服务器上的有效部署数量为\n$$\n12^{3} - 8^{3} = 1728 - 512 = 1216.\n$$", "answer": "$$\\boxed{1216}$$", "id": "1402656"}, {"introduction": "这个练习在基础计数之上，引入了多个具体约束条件。解决问题的关键在于将问题分解为连续的阶段：首先处理限制最严格的元素（不相邻的红旗），然后对剩余的选择应用乘法原理。这种分步解决的思路是处理更复杂组合问题的基础。[@problem_id:1402685]", "problem": "一个信号部队开发了一种通过将8面旗帜排成一直线来创建编码信息的方法。可用的旗帜有三种颜色：红色、蓝色和黄色。一条信息要被视为有效，必须满足以下特定规则：\n1. 信息必须恰好包含两面红旗。\n2. 两面红旗不能放置在相邻的位置。\n3. 剩下的六个位置必须用蓝色或黄色的旗帜填充。\n\n根据这些规则，可以形成多少种不同的有效编码信息？", "solution": "我们处理的是在字母表 $\\{R,B,Y\\}$ 上长度为 $8$ 的序列，其中恰好有两个 $R$ 且两个 $R$ 不相邻。首先计算两面红旗的放置方法。从 $8$ 个位置中选取两个位置的无序组合总数为 $\\binom{8}{2}$。相邻的组合有 $(1,2),(2,3),\\ldots,(7,8)$，共 $7$ 对。因此，放置两面不相邻红旗的方法数为\n$$\n\\binom{8}{2}-7=28-7=21.\n$$\n对于每一种这样的放置方式，剩下的 $6$ 个位置都可以独立地用 $B$ 或 $Y$ 填充，这提供了 $2^{6}$ 种可能性。因此，有效信息的总数为\n$$\n\\left(\\binom{8}{2}-7\\right)2^{6}=21\\cdot 64=1344.\n$$", "answer": "$$\\boxed{1344}$$", "id": "1402685"}, {"introduction": "这个问题将计数原理扩展到了几何环境中，需要系统性的方法来避免重复计数或遗漏。通过计算所有可能的放置方式，并减去“不安全”的放置方式，你将练习如何在一个结构化空间内有条不紊地对相互作用进行分类和计数。这种在网格上分析邻接关系的方法适用于从网络理论到图像处理的许多领域。[@problem_id:1402670]", "problem": "在国际象棋中，国王可以攻击其所在方格的任何相邻方格，包括对角线方向的方格。考虑一个具有 $m$ 行和 $n$ 列的推广矩形棋盘。要将两个国王放置在该棋盘的两个不同方格上。如果两个国王不互相攻击，则该放置被认为是“安全”的。\n\n假设这两个国王是不可区分的，确定所有可能的不同安全放置的总数。请用一个关于整数 $m$ 和 $n$ 的封闭形式解析表达式给出你的答案，其中假设 $m \\geq 1$ 且 $n \\geq 1$。", "solution": "将两个不可区分的国王放置在不同的方格上，相当于选择一对无序的不同方格。在一个 $m \\times n$ 的棋盘上有 $mn$ 个方格，所以无序对方格的总数是 $\\binom{mn}{2}$。当两个方格对于国王的移动是相邻的，即它们的切比雪夫距离为 $1$ 时，该放置就是不安全的。因此，安全放置的数量等于无序对方格的总数减去无序相邻对方格的数量。\n\n我们通过计算 $m \\times n$ 网格上国王邻接图中的边数来计算无序相邻对方格的数量。水平相邻的贡献了 $m(n-1)$ 对，垂直相邻的贡献了 $(m-1)n$ 对，两个对角线方向共同贡献了 $2(m-1)(n-1)$ 对。因此，互相攻击的对方格总数是\n$$\nE = m(n-1) + (m-1)n + 2(m-1)(n-1).\n$$\n展开并化简得到\n$$\nE = (mn - m) + (mn - n) + 2(mn - m - n + 1) = 4mn - 3m - 3n + 2.\n$$\n\n因此，安全放置的数量是\n$$\nS = \\binom{mn}{2} - E = \\frac{mn(mn - 1)}{2} - \\left(4mn - 3m - 3n + 2\\right).\n$$\n展开分子，\n$$\nS = \\frac{mn(mn - 1) - 2\\left(4mn - 3m - 3n + 2\\right)}{2}\n= \\frac{m^{2}n^{2} - mn - 8mn + 6m + 6n - 4}{2}\n= \\frac{m^{2}n^{2} - 9mn + 6m + 6n - 4}{2}.\n$$\n此表达式对所有整数 $m \\geq 1$ 和 $n \\geq 1$ 均有效。", "answer": "$$\\boxed{\\frac{m^{2}n^{2} - 9mn + 6m + 6n - 4}{2}}$$", "id": "1402670"}]}
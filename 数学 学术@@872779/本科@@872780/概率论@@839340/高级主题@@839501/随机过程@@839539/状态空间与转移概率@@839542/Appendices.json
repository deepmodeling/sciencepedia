{"hands_on_practices": [{"introduction": "在我们正式深入研究马尔可夫链之前，让我们通过一个熟悉的场景来热身。这个关于网球发球得分的练习，运用了总概率定律和条件概率等基本工具。通过将一个得分过程分解为不同的阶段（或“状态”）——如“一发”、“二发”和“得分结束”——并分析它们之间的转换，我们可以练习构建和分析基于状态的概率模型所需的思维方式。", "problem": "在一个简化的网球发球分模型中，一位球员的表现由四个关键概率来刻画。其第一次发球成功的概率（即不是失误）记为 $p_{1S}$。如果第一次发球成功，该球员接着以 $w_1$ 的概率赢得这一分。如果第一次发球失误，该球员将获得第二次发球机会。这第二次发球成功的概率（即不是双误）为 $p_{2S}$。在第二次发球成功后，该球员以 $w_2$ 的概率赢得这一分。如果球员在第二次发球时失败（双误），他们就输掉这一分。\n\n考虑一位球员，其表现统计数据如下：\n- $p_{1S} = 0.65$\n- $w_1 = 0.75$\n- $p_{2S} = 0.90$\n- $w_2 = 0.50$\n\n该球员通过发球开始新的一分。已知该球员最终赢得了这一分，那么他们是通过第一次发球赢得这一分的概率是多少？将你的答案表示为小数，并四舍五入到四位有效数字。", "solution": "令 $A$ 为球员在第一次发球成功后赢得该分的事件，令 $W$ 为球员通过任何路径赢得该分的事件。\n\n通过第一次发球路径获胜的概率由下式给出\n$$\nP(A) = p_{1S} w_{1}.\n$$\n通过第二次发球路径获胜的概率为\n$$\n(1 - p_{1S}) p_{2S} w_{2},\n$$\n因为第一次发球失误的概率为 $(1 - p_{1S})$，第二次发球成功的概率为 $p_{2S}$，然后赢得这一分的概率为 $w_{2}$。\n\n根据全概率定律，赢得这一分的总概率为\n$$\nP(W) = p_{1S} w_{1} + (1 - p_{1S}) p_{2S} w_{2}.\n$$\n我们要求的是在已知赢得该分的条件下，是通过第一次发球路径赢得该分的条件概率：\n$$\nP(A \\mid W) = \\frac{P(A)}{P(W)} = \\frac{p_{1S} w_{1}}{p_{1S} w_{1} + (1 - p_{1S}) p_{2S} w_{2}}.\n$$\n代入给定值 $p_{1S} = 0.65$，$w_{1} = 0.75$，$p_{2S} = 0.90$ 和 $w_{2} = 0.50$，\n$$\nP(A \\mid W) = \\frac{0.65 \\cdot 0.75}{0.65 \\cdot 0.75 + (1 - 0.65) \\cdot 0.90 \\cdot 0.50}\n= \\frac{0.4875}{0.4875 + 0.1575}\n= \\frac{0.4875}{0.645}.\n$$\n转换为精确分数，\n$$\n\\frac{0.4875}{0.645} = \\frac{975}{1290} = \\frac{65}{86} \\approx 0.755813953\\ldots\n$$\n四舍五入到四位有效数字，结果是 $0.7558$。", "answer": "$$\\boxed{0.7558}$$", "id": "1389132"}, {"introduction": "这个音乐创作问题是离散时间马尔可夫链的一个经典范例。它清晰地定义了状态空间（音符 C、E、G）和状态之间的转移概率矩阵。通过计算序列中第三个音符的概率，你可以练习核心技能：如何利用马尔可夫性质，通过对所有可能路径的概率求和，来预测系统在未来某个时间点的状态 [@problem_id:1356270]。", "problem": "一个实验性的音乐创作算法会生成一个音符序列。可能的音符集合被限制在一个简单的三和弦内：{C, E, G}。序列中每个后续音符的选择是一个概率过程，仅取决于紧邻的前一个音符。\n\n该过程从乐曲的第一个音符开始，这个音符总是 C。\n\n控制从一个音符到下一个音符转换的概率定义如下：\n- 如果当前音符是 C，那么下一个音符是 C 的概率为 0.2，是 E 的概率为 0.3，是 G 的概率为 0.5。\n- 如果当前音符是 E，那么下一个音符是 C 的概率为 0.4，是 E 的概率为 0.1，是 G 的概率为 0.5。\n- 如果当前音符是 G，那么下一个音符是 C 的概率为 0.6，是 E 的概率为 0.2，是 G 的概率为 0.2。\n\n计算序列中第三个音符是 G 的确切概率。请用小数表示你的答案。", "solution": "我们将这些音符建模为一个马尔可夫链，其状态为 $\\{C,E,G\\}$，初始状态为 C 的概率为 $1$。设第二个和第三个音符分别表示为 $N_{2}$ 和 $N_{3}$。根据全概率定律和马尔可夫性质，\n$$\n\\Pr(N_{3}=G)=\\Pr(N_{2}=C)\\Pr(G\\mid C)+\\Pr(N_{2}=E)\\Pr(G\\mid E)+\\Pr(N_{2}=G)\\Pr(G\\mid G).\n$$\n从 C 开始的转移概率，我们有\n$$\n\\Pr(N_{2}=C)=0.2,\\quad \\Pr(N_{2}=E)=0.3,\\quad \\Pr(N_{2}=G)=0.5.\n$$\n到 G 的转移概率，我们有\n$$\n\\Pr(G\\mid C)=0.5,\\quad \\Pr(G\\mid E)=0.5,\\quad \\Pr(G\\mid G)=0.2.\n$$\n代入得，\n$$\n\\Pr(N_{3}=G)=0.2\\cdot 0.5+0.3\\cdot 0.5+0.5\\cdot 0.2=0.1+0.15+0.1=0.35.\n$$\n因此，第三个音符是 $G$ 的确切概率是 $0.35$。", "answer": "$$\\boxed{0.35}$$", "id": "1356270"}, {"introduction": "一个随机过程是否是马尔可夫链？这个问题比计算本身更具概念性，也更为关键。这个关于“新颖性检测协议”的练习，旨在考验你对马尔可夫性质核心定义的理解 [@problem_id:1342472]。你需要仔细分析，确定系统的未来状态转移是否只依赖于当前状态，还是隐藏着对过去历史的依赖。这种辨别能力是准确应用马尔可夫模型的基础。", "problem": "考虑一个自适应数据处理协议的简化模型，称为新颖性检测协议 (NDP)。NDP 处理一系列数据项 $I_1, I_2, I_3, \\dots$，这些数据项从一个包含 $M$ 个不同项的有限集合 $\\mathcal{S}$ 中独立且以均匀概率抽取，其中 $M > 1$。\n\nNDP 在两种状态之一中运行：“ADAPT”或“OPERATE”。设随机过程 $\\{X_n\\}_{n \\ge 1}$ 表示协议的状态序列，其中 $X_n$ 是处理第 $n$ 个数据项 $I_n$ 之前的状态。该过程根据以下规则演化：\n\n1.  **初始状态**：协议总是从 ADAPT 状态开始，因此 $X_1 = \\text{ADAPT}$。\n2.  **从 ADAPT 状态转移**：如果在步骤 $n$ 时协议处于 ADAPT 状态（即 $X_n = \\text{ADAPT}$），它会执行一次内部更新，然后无条件地转移到 OPERATE 状态以进行下一步。因此，如果 $X_n = \\text{ADAPT}$，则 $X_{n+1} = \\text{OPERATE}$ 是确定的。\n3.  **从 OPERATE 状态转移**：如果在步骤 $n$ 时协议处于 OPERATE 状态（即 $X_n = \\text{OPERATE}$），它会检查传入的数据项 $I_n$。\n    *   如果数据项 $I_n$ 在过去的项目历史中出现过（即 $I_n \\in \\{I_1, I_2, \\dots, I_{n-1}\\}$），协议将保持在 OPERATE 状态。因此，$X_{n+1} = \\text{OPERATE}$。\n    *   如果数据项 $I_n$ 是新颖的，意味着它从未在历史 $\\{I_1, I_2, \\dots, I_{n-1}\\}$ 中出现过，协议将转移到 ADAPT 状态以整合这个新信息。因此，$X_{n+1} = \\text{ADAPT}$。\n\n根据这个定义，随机过程 $\\{X_n\\}_{n \\ge 1}$ 是马尔可夫链吗？\n\nA. 是的，因为从任何状态的转移只取决于当前状态和下一个随机项，而不取决于过去的状态。\n\nB. 是的，因为状态空间是有限的，并且转移概率是明确定义的。\n\nC. 不是，因为从 OPERATE 状态的转移概率取决于在整个过去历史中见过的唯一项的数量，而这个数量并不能由当前状态是 OPERATE 完全确定。\n\nD. 不是，因为从 ADAPT 状态的转移概率取决于过去的历史。\n\nE. 在不知道集合 $\\mathcal{S}$ 的具体大小 $M$ 的情况下无法确定。", "solution": "我们分析状态空间为 $\\{\\text{ADAPT}, \\text{OPERATE}\\}$ 的过程 $\\{X_{n}\\}_{n\\ge 1}$ 是否满足马尔可夫性质。马尔可夫性质要求，对于每一个 $n$ 和每一个历史，\n$$\n\\Pr\\left(X_{n+1}=x \\mid X_{n}=x_{n}, X_{n-1}=x_{n-1}, \\dots, X_{1}=x_{1}\\right)=\\Pr\\left(X_{n+1}=x \\mid X_{n}=x_{n}\\right).\n$$\n\n根据协议规则：\n- 如果 $X_{n}=\\text{ADAPT}$，则确定性地有 $X_{n+1}=\\text{OPERATE}$。因此，\n$$\n\\Pr\\left(X_{n+1}=\\text{OPERATE} \\mid X_{n}=\\text{ADAPT}, \\text{history}\\right)=1,\n$$\n这只取决于 $X_{n}$ 而不取决于过去。\n\n- 如果 $X_{n}=\\text{OPERATE}$，则下一个状态取决于 $I_{n}$ 相对于 $\\{I_{1},\\dots,I_{n-1}\\}$ 是否是新颖的。设\n$$\nU_{n-1}=\\left|\\{I_{1},I_{2},\\dots,I_{n-1}\\}\\right|\n$$\n表示到步骤 $n-1$ 为止见过的不同项的数量。由于 $I_{n}$ 是从 $|\\mathcal{S}|=M$ 的集合 $\\mathcal{S}$ 中均匀且独立地抽取的，因此在给定过去的情况下，$I_{n}$ 是新颖的概率为\n$$\n\\Pr(\\text{$I_{n}$ novel} \\mid I_{1},\\dots,I_{n-1})=\\frac{M-U_{n-1}}{M},\n$$\n前提是 $U_{n-1}\\le M$。因此，当 $X_{n}=\\text{OPERATE}$ 时，\n$$\n\\Pr\\left(X_{n+1}=\\text{ADAPT} \\mid X_{n}=\\text{OPERATE}, I_{1},\\dots,I_{n-1}\\right)=\\frac{M-U_{n-1}}{M},\n$$\n并且\n$$\n\\Pr\\left(X_{n+1}=\\text{OPERATE} \\mid X_{n}=\\text{OPERATE}, I_{1},\\dots,I_{n-1}\\right)=\\frac{U_{n-1}}{M}.\n$$\n\n关键在于，$U_{n-1}$ 并非由单一的状态值 $X_{n}=\\text{OPERATE}$ 所决定。两种不同的过去历史都可能产生 $X_{n}=\\text{OPERATE}$，但具有不同的 $U_{n-1}$，从而导致不同的转移概率。例如，如果过去的历史只包含一个项的重复出现，那么 $U_{n-1}=1$ 并且\n$$\n\\Pr\\left(X_{n+1}=\\text{ADAPT} \\mid X_{n}=\\text{OPERATE}, \\text{history}\\right)=\\frac{M-1}{M}.\n$$\n反之，如果过去的历史包含所有不同的项，那么 $U_{n-1}=\\min\\{n-1,M\\}$ 并且\n$$\n\\Pr\\left(X_{n+1}=\\text{ADAPT} \\mid X_{n}=\\text{OPERATE}, \\text{history}\\right)=\\frac{M-\\min\\{n-1,M\\}}{M},\n$$\n只要 $\\min\\{n-1,M\\}\\ne 1$，这个概率就不同于 $\\frac{M-1}{M}$。\n\n因此，\n$$\n\\Pr\\left(X_{n+1}=\\cdot \\mid X_{n}=\\text{OPERATE}, X_{n-1},\\dots,X_{1}\\right)\n$$\n不仅仅由 $X_{n}$ 决定，还通过 $U_{n-1}$ 依赖于过去。因此，$\\{X_{n}\\}$ 不是一个马尔可夫链。在给定的选项中，这对应于这样的陈述：从 OPERATE 状态的转移概率取决于整个过去历史中唯一项的数量，而这一信息并未被当前状态所捕获。\n\n从 ADAPT 状态的转移不依赖于历史，所以选项 D 中的理由是不正确的。选项 B 中状态空间的有限性并不能保证马尔可夫性质，而选项 A 错误地认为依赖于下一个项就足够了，却没有将过去的“新颖性”信息编码到状态中。选项 E 中 $M$ 的大小不影响定性结论。", "answer": "$$\\boxed{C}$$", "id": "1342472"}]}
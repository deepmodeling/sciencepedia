{"hands_on_practices": [{"introduction": "可交换性的核心在于对称性。这个练习旨在通过一个直观的例子来揭示这一特性：当我们只知道一个系统中所有成员的总和时，我们对其中任何一个特定成员的期望是什么？通过解决这个问题 [@problem_id:1360777]，你将看到对称性原理如何优雅地导出一个简单而深刻的结论，这对于理解条件期望在对称系统中的作用至关重要。", "problem": "考虑一个由 $n$ 个相互作用的个体组成的系统，例如，金融市场中的交易员或社交网络中的个人。令随机变量 $X_i$ 表示个体 $i$ 的某个特定数值属性，其中 $i = 1, 2, \\dots, n$。由于它们之间的相互作用，这些个体的属性不一定是独立的。然而，已知该系统是对称的，这意味着如果我们任意地重新标记这些个体，其属性的联合统计性质将保持不变。这意味着随机变量序列 $(X_1, X_2, \\dots, X_n)$ 是有限可交换的。\n\n一个随机变量序列 $(X_1, \\dots, X_n)$ 被定义为有限可交换的，如果对于下标集合 $\\{1, 2, \\dots, n\\}$ 的任意一个排列 $\\pi$，$(X_{\\pi(1)}, X_{\\pi(2)}, \\dots, X_{\\pi(n)})$ 的联合概率分布与 $(X_1, X_2, \\dots, X_n)$ 的联合概率分布相同。假设对于所有的 $i$，期望 $E[X_i]$ 都存在。\n\n假设对系统的一次全局测量仅揭示了属性的总和，且该总和为一个特定的值 $s$。也就是说，我们有条件 $\\sum_{i=1}^n X_i = s$。\n\n根据这些信息，求第一个个体属性的条件期望 $E\\left[X_1 \\mid \\sum_{i=1}^n X_i = s\\right]$。请用 $n$ 和 $s$ 表示你的答案的解析表达式。", "solution": "令 $S \\equiv \\sum_{i=1}^{n} X_{i}$。根据有限可交换性，对于 $\\{1,\\dots,n\\}$ 的任意排列 $\\pi$，$(X_{1},\\dots,X_{n})$ 的联合分布与 $(X_{\\pi(1)},\\dots,X_{\\pi(n)})$ 的联合分布相同。特别地，对于任意 $j \\in \\{1,\\dots,n\\}$，由于对称性，我们有 $E[X_1 \\mid S] = E[X_j \\mid S]$ 几乎必然成立。这意味着，在给定总和 $S$ 的条件下，每个变量的期望值都是相同的。\n\n利用条件期望的线性性质，我们可以对总和 $S$ 本身求条件期望：\n$$\nE[S \\mid S] = E\\left[\\sum_{i=1}^{n} X_{i} \\mid S\\right] = \\sum_{i=1}^{n} E[X_{i} \\mid S]\n$$\n由于 $E[S \\mid S] = S$，且对于所有 $i$，$E[X_i \\mid S]$ 都相等（等于 $E[X_1 \\mid S]$），我们可以将上式写为：\n$$\nS = \\sum_{i=1}^{n} E[X_1 \\mid S] = n \\cdot E[X_1 \\mid S]\n$$\n从上式解出 $E[X_1 \\mid S]$，我们得到：\n$$\nE[X_1 \\mid S] = \\frac{S}{n} \\quad \\text{几乎必然成立}.\n$$\n因此，对于总和的任意特定值 $s$，我们有：\n$$\nE[X_{1} \\mid S=s] = \\frac{s}{n}.\n$$", "answer": "$$\\boxed{\\frac{s}{n}}$$", "id": "1360777"}, {"introduction": "理解了对称性的基本含义后，我们来探讨它对统计量的影响。在许多现实世界的系统中，比如传感器网络，测量值之间并非相互独立，而是存在关联。这个问题 [@problem_id:1360765] 将引导你计算一个可交换序列总和的方差，从而让你亲身体会变量之间的相关性（即可交换性中的恒定协方差）如何影响整体波动性。", "problem": "一家农业科技公司部署了一个由 $N$ 个传感器组成的网络，用于监测一大片田地里的土壤湿度水平。设 $X_i$ 为表示第 $i$ 个传感器测量值的随机变量，其中 $i=1, 2, \\dots, N$。由于制造过程和校准，这些传感器在统计上是相同的。这意味着任何单个传感器测量值的方差都是相同的，我们将其记为 $\\sigma^2$。形式上，对于所有的 $i$，都有 $\\text{Var}(X_i) = \\sigma^2$。\n\n由于传感器位于同一片田地，它们会受到共同环境因素的影响，例如降雨和灌溉模式。因此，它们的读数在统计上不是独立的。公司使用的模型假设任意两个不同传感器的读数之间的协方差是一个常数值，我们将其记为 $\\gamma$。形式上，对于所有的 $i \\neq j$，都有 $\\text{Cov}(X_i, X_j) = \\gamma$。\n\n公司通过计算所有传感器读数的总和 $S_N = \\sum_{i=1}^N X_i$ 来汇总数据。请确定这个总和的方差 $\\text{Var}(S_N)$ 的表达式，用 $N$、$\\sigma^2$ 和 $\\gamma$ 表示。", "solution": "设 $S_N = \\sum_{i=1}^{N} X_i$。根据方差的基本性质，随机变量之和的方差等于所有方差项和所有协方差项的总和：\n$$\n\\operatorname{Var}(S_N) = \\operatorname{Var}\\left(\\sum_{i=1}^{N} X_{i}\\right) = \\sum_{i=1}^{N} \\operatorname{Var}(X_{i}) + \\sum_{i \\neq j} \\operatorname{Cov}(X_{i}, X_{j})\n$$\n根据问题描述，我们有 $N$ 个方差项，每个都等于 $\\sigma^2$。\n$$\n\\sum_{i=1}^{N} \\operatorname{Var}(X_{i}) = N \\sigma^2\n$$\n同时，我们有 $N(N-1)$ 对不同的下标 $(i, j)$，其中 $i \\neq j$。对于每一对，协方差都等于 $\\gamma$。因此，协方差项的总和为：\n$$\n\\sum_{i \\neq j} \\operatorname{Cov}(X_{i}, X_{j}) = N(N-1)\\gamma\n$$\n将方差项和协方差项的总和相加，我们得到总和 $S_N$ 的方差：\n$$\n\\operatorname{Var}(S_N) = N\\sigma^2 + N(N-1)\\gamma\n$$", "answer": "$$\\boxed{N\\sigma^{2}+N(N-1)\\gamma}$$", "id": "1360765"}, {"introduction": "可交换序列从何而来？de Finetti 定理给出了一个深刻的答案，它将可交换性与混合模型联系起来。这个练习 [@problem_id:1360778] 是 de Finetti 定理的一个具体实现，它展示了一个典型的贝叶斯分层模型：变量在一个未知参数给定的条件下是独立同分布的。通过计算它们的无条件联合分布，你将揭示这种混合过程如何自然地产生一个可交换序列，这是连接概率论与贝叶斯统计的关键一步。", "problem": "在一家半导体制造工厂，正在开发一种新的蚀刻工艺。单个微芯片通过质量控制检查的概率 $P$ 是未知的，并且由于环境敏感性，它每天都可能波动。这个每日概率 $P$ 被建模为一个遵循贝塔分布的随机变量，其形状参数 $\\alpha > 0$ 和 $\\beta > 0$ 已知。贝塔分布的概率密度函数由 $f(p; \\alpha, \\beta) = \\frac{p^{\\alpha-1}(1-p)^{\\beta-1}}{B(\\alpha, \\beta)}$ 给出，其中 $p \\in (0,1)$，$B(\\alpha, \\beta)$ 是贝塔函数。\n\n在给定的一天，成功概率 $P$ 固定但未知，进行了一系列 $n$ 次独立实验。在每次实验 $i$（其中 $i=1, \\dots, n$）中，芯片被顺序测试，直到找到第一个通过的芯片。令 $X_i$ 为在第 $i$ 次实验中观察到第一个通过芯片的试验次数。给定 $P$，每个 $X_i$ 都遵循几何分布，其概率质量函数（PMF）定义为 $P(X_i = k | P) = (1-P)^{k-1}P$，其中 $k \\in \\{1, 2, 3, \\dots\\}$。\n\n假设随机变量 $X_1, X_2, \\dots, X_n$ 在给定 $P$ 值的条件下是条件独立的，确定它们的联合无条件概率质量函数 $p(x_1, x_2, \\dots, x_n)$。\n\n请用 $x_1, \\dots, x_n, n, \\alpha, \\beta$ 和贝塔函数 $B(a,b)$ 来表示你的答案，形式为一个封闭形式的解析表达式。", "solution": "我们已知，在成功概率 $P=p$ 固定的条件下，随机变量 $X_{1},\\dots,X_{n}$ 是独立的，并且每个都服从支撑集为 $\\{1,2,3,\\dots\\}$ 的几何分布，其概率质量函数（PMF）为\n$$\n\\Pr(X_{i}=x_{i}\\mid P=p)=(1-p)^{x_{i}-1}p.\n$$\n因此，给定 $P=p$ 时 $(X_{1},\\dots,X_{n})$ 的联合条件PMF是\n$$\n\\Pr(X_{1}=x_{1},\\dots,X_{n}=x_{n}\\mid P=p)=\\prod_{i=1}^{n}(1-p)^{x_{i}-1}p\n=p^{n}(1-p)^{\\sum_{i=1}^{n}x_{i}-n}.\n$$\n$P$ 的先验分布是 $\\operatorname{Beta}(\\alpha,\\beta)$，其密度函数为\n$$\nf(p;\\alpha,\\beta)=\\frac{p^{\\alpha-1}(1-p)^{\\beta-1}}{B(\\alpha,\\beta)},\\quad p\\in(0,1).\n$$\n根据全概率定律（对 $P$ 进行边缘化），无条件联合PMF是\n$$\np(x_{1},\\dots,x_{n})\n=\\int_{0}^{1}\\Pr(X_{1}=x_{1},\\dots,X_{n}=x_{n}\\mid P=p)\\,f(p;\\alpha,\\beta)\\,dp.\n$$\n代入上面推导出的表达式，\n$$\np(x_{1},\\dots,x_{n})\n=\\int_{0}^{1}p^{n}(1-p)^{\\sum_{i=1}^{n}x_{i}-n}\\cdot \\frac{p^{\\alpha-1}(1-p)^{\\beta-1}}{B(\\alpha,\\beta)}\\,dp\n=\\frac{1}{B(\\alpha,\\beta)}\\int_{0}^{1}p^{\\alpha+n-1}(1-p)^{\\beta+\\sum_{i=1}^{n}x_{i}-n-1}\\,dp.\n$$\n我们识别出该积分为贝塔函数的定义 $B(a,b)=\\int_{0}^{1}t^{a-1}(1-t)^{b-1}\\,dt$，从而得到\n$$\np(x_{1},\\dots,x_{n})=\\frac{B\\!\\left(\\alpha+n,\\ \\beta+\\sum_{i=1}^{n}x_{i}-n\\right)}{B(\\alpha,\\beta)},\n$$\n对于 $x_{i}\\in\\{1,2,3,\\dots\\}$，$i=1,\\dots,n$。这是一个用 $x_{1},\\dots,x_{n},n,\\alpha,\\beta$ 和贝塔函数 $B(a,b)$ 表示的封闭形式表达式。", "answer": "$$\\boxed{\\frac{B\\!\\left(\\alpha+n,\\ \\beta+\\sum_{i=1}^{n}x_{i}-n\\right)}{B(\\alpha,\\beta)}}$$", "id": "1360778"}]}
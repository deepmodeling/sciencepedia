{"hands_on_practices": [{"introduction": "本节的第一个实践练习将引导我们从基本原理出发，推导辐射传热领域一个最经典的结果。我们将研究两个无限大、平行的黑体表面之间的辐射换热，这是许多更复杂问题的理想化起点。通过这个练习[@problem_id:2518874]，你将巩固对斯特藩-玻尔兹曼定律和角系数基本概念的理解，并探讨理想化模型在实际应用中的局限性。", "problem": "两个非常大的、绝对黑体的、平坦的、漫射表面（平行板），标记为表面 $1$ 和表面 $2$，隔着真空间隙相对。两板分别处于等温状态，温度为 $T_1$ 和 $T_2$，并在横向方向上充分延伸，以至于在推导经典的平行板结果时可以忽略边缘效应。这两个表面只看到彼此。从热辐射的基本定义出发，即：(i) 黑体半球发射功率 $E_b(T)=\\sigma T^4$，(ii) 漫射发射的朗伯余弦定律，以及 (iii) 角系数作为离开一个表面并直接到达另一个表面的能量的几何分数的定义，推导出两板之间单位面积的净辐射热通量表达式，用 $\\sigma$、$T_1$ 和 $T_2$ 表示。\n\n然后，使用 $\\sigma=5.670374419\\times 10^{-8}\\ \\mathrm{W\\,m^{-2}K^{-4}}$，对 $T_1=1000\\ \\mathrm{K}$ 和 $T_2=500\\ \\mathrm{K}$ 的情况数值计算该通量。将最终数值答案以 $\\mathrm{kW\\,m^{-2}}$ 为单位表示，并四舍五入到四位有效数字。\n\n最后，定性讨论被无限大平行板理想化所忽略的边缘效应：如果平板实际上是边长为 $L$、在真空中以间隙 $s$ 分隔的有限、相同的正方形，解释单位面积的净交换相对于无限大平板结果有何改变，并描述在 $s/L\\to 0$ 和 $s/L\\to \\infty$ 的极限情况下，主阶修正项随几何比 $s/L$ 的预期标度关系。你的讨论应基于物理推理，但不需要数值计算。", "solution": "所提出的问题是热辐射领域的标准练习题，其提法适切，有科学依据且内部一致。因此，该问题被认为是有效的，并将按要求进行解答。解答按要求分为三个部分：热通量表达式的推导、数值计算以及对边缘效应的定性讨论。\n\n**第一部分：净辐射热通量的推导**\n\n我们从两个表面之间辐射交换的基本原理开始。这两个表面被指定为表面 $1$ 和表面 $2$，其绝对温度分别为 $T_1$ 和 $T_2$。\n\n一个温度为 $T$ 的黑体表面单位面积辐射的总能量由斯特藩-玻尔兹曼定律的半球发射功率给出：\n$$E_b(T) = \\sigma T^4$$\n其中 $\\sigma$ 是斯特藩-玻尔兹曼常数。\n\n对于一个漫射表面，其发射辐射的强度 $I_e$ 在表面上方的半球空间内所有方向上都是均匀的。对于漫射发射体，发射功率与强度之间的关系是 $E = \\pi I_e$。\n\n离开一个表面单位面积的总辐射能称为其辐射出射度 $J$。对于一个绝对黑体表面，没有反射，所以所有离开表面的辐射都必须来自发射。因此，黑体表面的辐射出射度等于其发射功率。\n对于表面 $1$：$J_1 = E_{b1} = \\sigma T_1^4$。\n对于表面 $2$：$J_2 = E_{b2} = \\sigma T_2^4$。\n\n角系数 $F_{1 \\to 2}$ 或 $F_{12}$ 定义为离开表面 $1$ 的总辐射中直接到达表面 $2$ 的部分。从表面 $1$ 到表面 $2$ 的总传热速率是离开表面 $1$ 的总能量与角系数的乘积：\n$$Q_{1 \\to 2} = A_1 J_1 F_{12}$$\n其中 $A_1$ 是表面 $1$ 的面积。\n\n类似地，从表面 $2$ 到表面 $1$ 的总传热速率是：\n$$Q_{2 \\to 1} = A_2 J_2 F_{21}$$\n其中 $A_2$ 是表面 $2$ 的面积，$F_{21}$ 是从表面 $2$ 到表面 $1$ 的角系数。\n\n两个表面之间的净传热速率 $Q_{net}$ 是这两个量之差：\n$$Q_{net} = Q_{1 \\to 2} - Q_{2 \\to 1} = A_1 J_1 F_{12} - A_2 J_2 F_{21}$$\n\n角系数的一个基本性质是倒易关系：$A_1 F_{12} = A_2 F_{21}$。应用此关系，净传热的表达式简化为：\n$$Q_{net} = A_1 F_{12} (J_1 - J_2)$$\n\n单位面积的净辐射热通量 $q''_{net}$ 定义为 $Q_{net}/A_1$。\n$$q''_{net} = \\frac{Q_{net}}{A_1} = F_{12} (J_1 - J_2)$$\n\n问题陈述中提到表面是“非常大的、平坦的、平行的平板”，并且“边缘效应可以忽略”。这是两个无限大平行板的理想化模型。在这种构造中，任何离开表面 $1$ 上任意点的辐射都必须截射到表面 $2$，因为它看不到任何其他表面。因此，离开表面 $1$ 并投射到表面 $2$ 的能量分数是1。\n$$F_{12} = 1$$\n\n将 $F_{12}=1$ 以及黑体表面的辐射出射度表达式代入热通量方程，得到最终表达式：\n$$q''_{net} = 1 \\cdot (\\sigma T_1^4 - \\sigma T_2^4) = \\sigma (T_1^4 - T_2^4)$$\n\n这是两个无限大、平行、黑体平板之间净辐射热通量的经典表达式。\n\n**第二部分：数值计算**\n\n问题提供了以下数值用于计算：\n- 表面 $1$ 的温度，$T_1 = 1000 \\ \\mathrm{K}$\n- 表面 $2$ 的温度，$T_2 = 500 \\ \\mathrm{K}$\n- 斯特藩-玻尔兹曼常数，$\\sigma = 5.670374419 \\times 10^{-8} \\ \\mathrm{W\\,m^{-2}K^{-4}}$\n\n我们将这些值代入推导出的净热通量表达式中：\n$$q''_{net} = (5.670374419 \\times 10^{-8} \\ \\mathrm{W\\,m^{-2}K^{-4}}) \\times \\left[ (1000 \\ \\mathrm{K})^4 - (500 \\ \\mathrm{K})^4 \\right]$$\n\n首先，我们计算温度项：\n$$(1000)^4 = (10^3)^4 = 10^{12} \\ \\mathrm{K}^4$$\n$$(500)^4 = (5 \\times 10^2)^4 = 5^4 \\times (10^2)^4 = 625 \\times 10^8 = 0.0625 \\times 10^{12} \\ \\mathrm{K}^4$$\n\n差值为：\n$$T_1^4 - T_2^4 = 10^{12} - 0.0625 \\times 10^{12} = (1 - 0.0625) \\times 10^{12} = 0.9375 \\times 10^{12} \\ \\mathrm{K}^4$$\n\n现在，我们计算热通量：\n$$q''_{net} = (5.670374419 \\times 10^{-8}) \\times (0.9375 \\times 10^{12}) \\ \\mathrm{W\\,m^{-2}}$$\n$$q''_{net} = 5.315975918... \\times 10^4 \\ \\mathrm{W\\,m^{-2}}$$\n\n结果要求以千瓦每平方米（$\\mathrm{kW\\,m^{-2}}$）为单位：\n$$q''_{net} = 53.15975918... \\ \\mathrm{kW\\,m^{-2}}$$\n\n四舍五入到四位有效数字，我们得到：\n$$q''_{net} \\approx 53.16 \\ \\mathrm{kW\\,m^{-2}}$$\n\n**第三部分：边缘效应的定性讨论**\n\n第一部分的推导假设了无限大平板，这使得角系数 $F_{12}$ 简化为 $1$。如果平板是边长为 $L$、间隙为 $s$ 的有限、相同的正方形，这种理想化就不再成立，边缘效应变得显著。\n\n主要的改变是，从表面 $1$ 到表面 $2$ 的角系数 $F_{12}$ 现在小于 $1$。这是因为从表面 $1$ 边缘附近位置发射的辐射现在可以通过板间的间隙逃逸到周围环境中，而不是投射到表面 $2$。周围环境通常被建模为一个温度极低（例如，$T_{surr} \\to 0 \\ \\mathrm{K}$）的黑体，充当一个完美的吸收体。\n\n两个有限平板之间单位面积的平均净热通量 $q''_{finite}$ 由 $F_{12} \\sigma (T_1^4 - T_2^4)$ 给出。由于 $F_{12} < 1$，有限平板单位面积的净辐射交换总是小于无限大平板的情况：$q''_{finite} < q''_{infinite}$。此外，局部热通量在板表面上不再是均匀的。它在平板中心附近最高，那里的几何形状最接近无限大的情况，并向边缘递减，因为那里对向平板的“视野”越来越多地被开放的周围环境所阻挡。\n\n这种偏差的大小取决于几何比 $s/L$。我们分析所要求的两个极限情况：\n\n1.  **极限 $s/L \\to 0$**：这对应于分离距离远小于平板尺寸的情况。在此极限下，几何形状非常接近无限大平行板。边缘效应是一个小扰动。从边缘“泄漏”出去的能量分数预计与“开放”的周边区域面积（$A_{edge} \\sim 4Ls$）与特征发射面积之比成正比。更严格的分析表明，角系数的主阶修正项与比率 $s/L$ 成正比。即，$F_{12} \\approx 1 - C(s/L)$，其中 $C$ 是一个数量级为1的常数。因此，热通量的主阶修正项，即 $q''_{infinite} - q''_{finite} = (1 - F_{12}) \\sigma (T_1^4 - T_2^4)$，随几何比 $s/L$ 线性变化。\n\n2.  **极限 $s/L \\to \\infty$**：这对应于分离距离远大于平板尺寸的情况。在此极限下，两板相距很远。从一个平板上任意一点的视角看，另一个平板所张的立体角非常小。在此情况下，无限大平板模型完全不适用。我们可以通过将平板视为被大距离 $s$ 分隔的微元面积来近似角系数。从微元面积 $dA_1$ 到距离为 $r$ 的有限面积 $A_2$ 的角系数为 $dF_{dA_1 \\to A_2} = \\frac{\\cos\\theta_1 \\cos\\theta_2}{\\pi r^2} A_2$。对于两个面积为 $A=L^2$、被大距离 $s$ 分隔的小平行板，我们有 $r \\approx s$、$\\theta_1 \\approx 0$ 和 $\\theta_2 \\approx 0$。从板1到板2的角系数在整个表面上近似为常数：\n    $$F_{12} \\approx \\frac{A_2}{\\pi s^2} = \\frac{L^2}{\\pi s^2} = \\frac{1}{\\pi} \\left(\\frac{L}{s}\\right)^2$$\n    在这个极限下，整个净热通量 $q''_{finite}=F_{12}q''_{infinite}$ 的标度关系为 $(L/s)^2$ 或 $(s/L)^{-2}$。随着分离距离的增加，通量非常迅速地趋近于零。", "answer": "$$\\boxed{\\pmatrix{ \\sigma(T_1^4 - T_2^4) & 53.16 }}$$", "id": "2518874"}, {"introduction": "在理想平行板模型的基础上，这个实践练习转向了更贴近现实的二维几何结构——有限宽度的长矩形板。我们将学习并应用霍特尔的交叉线法，这是一种用于计算二维系统中角系数的强大而巧妙的工具。掌握这种方法[@problem_id:2518823]将使你能够分析从工业炉内部到电子设备散热等多种工程配置。", "problem": "两块长的、等温的、漫射的黑色矩形平板在真空中相对放置。每块平板在平面外方向上无限长，因此该问题可以作为单位长度的二维问题来处理。平板1的宽度为$a$，温度均匀为$T_1$；平板2的宽度为$b$，温度均匀为$T_2$。它们的中心线对齐，两平板相互平行，均匀间距为$H$。假设没有其他辐射表面参与（即，任何环境的有效温度为$0\\ \\mathrm{K}$且在无限远处），因此只考虑两平板之间的直接辐射交换。\n\n从角系数的定义出发，使用适用于二维辐射交换的交叉线法，确定在对齐几何结构下，从平板1到平板2的角系数$F_{12}$（用$a$、$b$和$H$表示）。然后，利用黑体表面的基本辐射交换原理，推导出从平板1到平板2的单位长度净辐射传热率$Q'$的封闭形式表达式，该表达式是$a$、$b$、$H$、$T_1$和$T_2$的函数。\n\n最后，当$a = 0.4\\ \\mathrm{m}$，$b = 0.6\\ \\mathrm{m}$，$H = 0.2\\ \\mathrm{m}$，$T_1 = 1200\\ \\mathrm{K}$，$T_2 = 800\\ \\mathrm{K}$时，数值计算$Q'$，取斯蒂芬-玻尔兹曼常数$\\sigma = 5.670374419 \\times 10^{-8}\\ \\mathrm{W}\\,\\mathrm{m}^{-2}\\,\\mathrm{K}^{-4}$。将您的答案四舍五入到四位有效数字。以$\\mathrm{W}\\,\\mathrm{m}^{-1}$为单位表示$Q'$的最终结果。", "solution": "问题陈述在科学上是合理的、提法得当且客观的。它提出了一个辐射传热学中的标准问题，可以使用既定原理解答。所有必要的数据都已提供，没有内部矛盾或歧义。因此，我将给出完整的解答。\n\n该问题要求确定从平板1到平板2的角系数$F_{12}$，然后推导它们之间的单位长度净辐射传热率$Q'$。这些表面是黑体的、等温的，并处于二维配置中。\n\n首先，我们使用交叉线法（Hottel 法则）确定角系数$F_{12}$。对于在一个方向上无限长的两个表面（面积为$A_1$和$A_2$），表面1的单位长度面积$A'_1$与角系数$F_{12}$的乘积由下式给出：\n$$A'_1 F_{12} = \\frac{1}{2} \\left[ (\\text{Sum of lengths of crossed strings}) - (\\text{Sum of lengths of uncrossed strings}) \\right]$$\n此处，平板1的单位长度面积为$A'_1 = a \\times 1 = a$。\n\n我们建立一个坐标系。设两平板平行于$x$轴。平板1位于$y = \\frac{H}{2}$处，从$x = -\\frac{a}{2}$延伸到$x = \\frac{a}{2}$。平板2位于$y = -\\frac{H}{2}$处，从$x = -\\frac{b}{2}$延伸到$x = \\frac{b}{2}$。各顶点坐标为：\n- 平板1：$P_{1L} = (-\\frac{a}{2}, \\frac{H}{2})$ 和 $P_{1R} = (\\frac{a}{2}, \\frac{H}{2})$\n- 平板2：$P_{2L} = (-\\frac{b}{2}, -\\frac{H}{2})$ 和 $P_{2R} = (\\frac{b}{2}, -\\frac{H}{2})$\n\n交叉线连接平板的相对两端。其长度为$L_{1L,2R}$和$L_{1R,2L}$。根据对称性，这两条线的长度相等。\n$$L_{\\text{crossed}} = \\sqrt{\\left(\\frac{b}{2} - \\left(-\\frac{a}{2}\\right)\\right)^2 + \\left(-\\frac{H}{2} - \\frac{H}{2}\\right)^2} = \\sqrt{\\left(\\frac{a+b}{2}\\right)^2 + (-H)^2} = \\sqrt{\\frac{(a+b)^2}{4} + H^2}$$\n交叉线的总长度为 $2 L_{\\text{crossed}} = 2 \\sqrt{\\frac{(a+b)^2}{4} + H^2} = \\sqrt{(a+b)^2 + 4H^2}$。\n\n非交叉线连接平板的对应两端。其长度为$L_{1L,2L}$和$L_{1R,2R}$。根据对称性，这两条线的长度也相等。\n$$L_{\\text{uncrossed}} = \\sqrt{\\left(-\\frac{b}{2} - \\left(-\\frac{a}{2}\\right)\\right)^2 + \\left(-\\frac{H}{2} - \\frac{H}{2}\\right)^2} = \\sqrt{\\left(\\frac{a-b}{2}\\right)^2 + (-H)^2} = \\sqrt{\\frac{(a-b)^2}{4} + H^2}$$\n非交叉线的总长度为 $2 L_{\\text{uncrossed}} = 2 \\sqrt{\\frac{(a-b)^2}{4} + H^2} = \\sqrt{(a-b)^2 + 4H^2}$。\n\n将这些总长度代入交叉线法公式：\n$$a F_{12} = \\frac{1}{2} \\left[ \\sqrt{(a+b)^2 + 4H^2} - \\sqrt{(a-b)^2 + 4H^2} \\right]$$\n因此，角系数$F_{12}$为：\n$$F_{12} = \\frac{1}{2a} \\left[ \\sqrt{(a+b)^2 + 4H^2} - \\sqrt{(a-b)^2 + 4H^2} \\right]$$\n\n接下来，我们推导单位长度的净辐射传热率$Q'$。对于两个黑体表面，从表面1到表面2的净传热量由经角系数修正的斯蒂芬-玻尔兹曼定律给出：\n$$Q_{12} = A_1 F_{12} \\sigma (T_1^4 - T_2^4)$$\n其中$\\sigma$是斯蒂芬-玻尔兹曼常数。单位长度传热率$Q'$可以通过使用单位长度面积$A'_1 = a$求得。\n$$Q' = A'_1 F_{12} \\sigma (T_1^4 - T_2^4) = a F_{12} \\sigma (T_1^4 - T_2^4)$$\n我们可以直接代入几何项$a F_{12}$的表达式：\n$$Q' = \\frac{1}{2} \\left[ \\sqrt{(a+b)^2 + 4H^2} - \\sqrt{(a-b)^2 + 4H^2} \\right] \\sigma (T_1^4 - T_2^4)$$\n这就是所要求的单位长度净辐射传热率的封闭形式表达式。\n\n最后，我们使用给定值数值计算$Q'$：\n$a = 0.4 \\ \\mathrm{m}$\n$b = 0.6 \\ \\mathrm{m}$\n$H = 0.2 \\ \\mathrm{m}$\n$T_1 = 1200 \\ \\mathrm{K}$\n$T_2 = 800 \\ \\mathrm{K}$\n$\\sigma = 5.670374419 \\times 10^{-8} \\ \\mathrm{W}\\,\\mathrm{m}^{-2}\\,\\mathrm{K}^{-4}$ (斯蒂芬-玻尔兹曼常数)\n\n首先，计算几何因子，它等效于$a F_{12}$：\n$$a+b = 0.4 + 0.6 = 1.0 \\ \\mathrm{m}$$\n$$a-b = 0.4 - 0.6 = -0.2 \\ \\mathrm{m}$$\n$$4H^2 = 4(0.2)^2 = 4(0.04) = 0.16 \\ \\mathrm{m}^2$$\n$$a F_{12} = \\frac{1}{2} \\left[ \\sqrt{(1.0)^2 + 0.16} - \\sqrt{(-0.2)^2 + 0.16} \\right] \\ \\mathrm{m}$$\n$$a F_{12} = \\frac{1}{2} \\left[ \\sqrt{1.16} - \\sqrt{0.04 + 0.16} \\right] = \\frac{1}{2} \\left[ \\sqrt{1.16} - \\sqrt{0.20} \\right] \\ \\mathrm{m}$$\n$$a F_{12} \\approx \\frac{1}{2} [1.077033 - 0.447214] \\approx 0.3149095 \\ \\mathrm{m}$$\n\n接着，计算热学因子：\n$$T_1^4 = (1200)^4 = 2.0736 \\times 10^{12} \\ \\mathrm{K}^4$$\n$$T_2^4 = (800)^4 = 0.4096 \\times 10^{12} \\ \\mathrm{K}^4$$\n$$T_1^4 - T_2^4 = (2.0736 - 0.4096) \\times 10^{12} = 1.664 \\times 10^{12} \\ \\mathrm{K}^4$$\n$$\\sigma(T_1^4 - T_2^4) = (5.670374419 \\times 10^{-8}) \\times (1.664 \\times 10^{12}) \\ \\mathrm{W}\\,\\mathrm{m}^{-2}$$\n$$\\sigma(T_1^4 - T_2^4) \\approx 94355.03 \\ \\mathrm{W}\\,\\mathrm{m}^{-2}$$\n\n现在，计算最终的单位长度传热率：\n$$Q' = (a F_{12}) \\times \\sigma(T_1^4 - T_2^4)$$\n$$Q' \\approx (0.3149095 \\ \\mathrm{m}) \\times (94355.03 \\ \\mathrm{W}\\,\\mathrm{m}^{-2})$$\n$$Q' \\approx 29712.96 \\ \\mathrm{W}\\,\\mathrm{m}^{-1}$$\n\n将结果四舍五入至四位有效数字，得到：\n$$Q' = 29710 \\ \\mathrm{W}\\,\\mathrm{m}^{-1}$$\n用科学记数法表示为$2.971 \\times 10^4 \\ \\mathrm{W}\\,\\mathrm{m}^{-1}$。", "answer": "$$\n\\boxed{2.971 \\times 10^4}\n$$", "id": "2518823"}, {"introduction": "最后的这个实践练习将我们从简单的双表面系统带入到由$N$个表面组成的通用闭式系统。我们将解决一个常见且非常实用的工程问题：当某些表面的热流已知时，如何确定其他未知表面的温度。通过巧妙地将非线性的$T^4$项线性化，该练习[@problem_id:2518856]将训练你建立并求解线性方程组，这是计算传热学中的一项核心技能。", "problem": "您需要编写一个完整、可运行的程序，用于计算由多个漫射、等温、黑体表面组成的封闭体中，具有给定净辐射热流率的表面子集的未知绝对温度。您的方法必须从辐射热传递的基本原理出发。具体来说，您可以使用斯特藩-玻尔兹曼定律以及黑体漫射表面的辐射度、辐照度和角系数的定义。请勿使用任何预先推导的净交换公式；相反，您需要从第一性原理建立控制方程，并使用变量 $x_i \\equiv T_i^4$ 对其进行重构，以便得到一个关于 $x_i$ 的可解系统。\n\n物理设置和符号约定：\n- 存在 $N$ 个黑体、漫射、等温表面，每个表面的面积为 $A_i$，单位为平方米（$\\text{m}^2$）。\n- 角系数 $F_{ij}$ 是已知的，并且对于每个 $i$ 满足求和规则 $\\sum_{j=1}^N F_{ij} = 1$ 和互易关系 $A_i F_{ij} = A_j F_{ji}$。\n- 离开表面 $i$ 的净辐射热流率为 $Q_i$，单位为瓦特（$\\text{W}$），当净辐射能离开表面时取正值，当净辐射能进入表面时取负值。\n- 斯特藩-玻尔兹曼常数为 $\\sigma = 5.670374419 \\times 10^{-8}\\,\\text{W}\\,\\text{m}^{-2}\\,\\text{K}^{-4}$。\n- 部分表面具有给定的绝对温度 $T_i$（单位为开尔文，$\\text{K}$）。其余表面具有给定的净辐射热流率 $Q_i$（单位为瓦特，$\\text{W}$）。每个表面都恰好属于这两类中的一类。\n\n任务：\n- 从基本原理出发，推导每个表面的平衡方程，然后通过引入变量 $x_i \\equiv T_i^4$，为具有给定 $Q_i$ 的表面建立一个关于未知数 $\\{x_i\\}$ 的可解线性系统。求解这些 $x_i$ 后，恢复未知温度 $T_i = x_i^{1/4}$。\n- 对于下面描述的每个测试用例，计算具有给定 $Q_i$ 的表面的未知温度。\n- 所有温度均以开尔文（$\\text{K}$）表示，并四舍五入到三位小数。\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。每个测试用例对应一个未知温度列表，这些温度按表面索引升序排列。例如，一个包含三个测试用例的有效输出形式为 $[ [\\dots], [\\dots], [\\dots] ]$。\n\n测试套件：\n- 测试用例 1（两个平行的黑体平板）：\n  - 表面数量：$N = 2$。\n  - 面积：$(A_1, A_2) = (\\,2.0,\\,2.0\\,)$，单位 $\\text{m}^2$。\n  - 角系数：$F_{11} = 0$, $F_{12} = 1$, $F_{21} = 1$, $F_{22} = 0$。\n  - 给定数据：$T_1 = 400\\,\\text{K}$, $Q_2 = 500\\,\\text{W}$。\n  - 此用例的所需输出：包含 $T_2$ 的列表，单位为开尔文，四舍五入到三位小数。\n- 测试用例 2（三个具有非平凡角系数的黑体表面）：\n  - 表面数量：$N = 3$。\n  - 面积：$(A_1, A_2, A_3) = (\\,1.0,\\,2.0,\\,1.5\\,)$，单位 $\\text{m}^2$。\n  - 为满足互易性和求和规则而构造的角系数：\n    - $F_{12} = 0.75$, $F_{13} = 0.25$, $F_{21} = 0.375$, $F_{23} = 0.625$, $F_{31} = \\frac{1}{6}$, $F_{32} = \\frac{5}{6}$，以及 $F_{11} = F_{22} = F_{33} = 0$。\n  - 给定数据：$T_1 = 600\\,\\text{K}$, $T_3 = 300\\,\\text{K}$, $Q_2 = 100\\,\\text{W}$。\n  - 此用例的所需输出：包含 $T_2$ 的列表，单位为开尔文，四舍五入到三位小数。\n- 测试用例 3（四个对称耦合的黑体表面；通过一个给定温度来正则化近奇异结构）：\n  - 表面数量：$N = 4$。\n  - 面积：$(A_1, A_2, A_3, A_4) = (\\,1.0,\\,1.0,\\,1.0,\\,1.0\\,)$，单位 $\\text{m}^2$。\n  - 角系数：对于所有 $i$, $F_{ii} = 0$；对于所有 $i \\neq j$, $F_{ij} = \\frac{1}{3}$。\n  - 给定数据：$T_1 = 500\\,\\text{K}$, $Q_2 = 60\\,\\text{W}$, $Q_3 = -10\\,\\text{W}$, $Q_4 = -30\\,\\text{W}$。\n  - 此用例的所需输出：包含 $(T_2, T_3, T_4)$ 的列表，单位为开尔文，每个值四舍五入到三位小数，并按表面索引升序排列。\n\n最终输出格式：\n- 您的程序必须只打印一行：一个聚合了所有测试用例结果的外部列表。外部列表的每个元素是对应测试用例的未知温度的内部列表，四舍五入到三位小数，并以开尔文表示。例如，一个可接受的整体输出格式为 $[[400.000],[475.123],[\\dots]]$（所示数字仅为示例，不是要求的值）。", "solution": "对所述问题进行验证。\n\n**步骤 1：提取给定条件**\n- **系统**：一个由 $N$ 个漫射、等温、黑体表面组成的封闭体。\n- **表面属性**：面积 $A_i$（$\\text{m}^2$），绝对温度 $T_i$（$\\text{K}$）。\n- **辐射交换**：由角系数 $F_{ij}$ 表征，满足求和规则 $\\sum_{j=1}^N F_{ij} = 1$ 和互易关系 $A_i F_{ij} = A_j F_{ji}$。\n- **热负荷**：对于每个表面 $i$，要么给定温度 $T_i$，要么给定净辐射热流率 $Q_i$（$\\text{W}$）。当净热量离开表面时 $Q_i$ 为正。\n- **常数**：斯特藩-玻尔兹曼常数 $\\sigma = 5.670374419 \\times 10^{-8}\\,\\text{W}\\,\\text{m}^{-2}\\,\\text{K}^{-4}$。\n- **目标**：为具有给定 $Q_i$ 的表面计算未知温度 $T_i$。\n- **方法**：推导必须从第一性原理（斯特藩-玻尔兹曼定律、辐射度和辐照度的定义）开始，通过代换 $x_i \\equiv T_i^4$ 建立一个可解的线性系统，并求解未知温度。禁止使用预先推导的净交换公式。\n- **测试用例**：提供了三个具体的测试用例，包含所有必要的数据（$N$、$A_i$、$F_{ij}$ 以及给定的 $T_i$ 或 $Q_i$）。\n\n**步骤 2：使用提取的给定条件进行验证**\n- **科学依据**：该问题是辐射热传递中的一个标准练习，基于完善的物理定律（斯特藩-玻尔兹曼）和几何概念（角系数）。理想化假设（黑体、漫射、等温表面）是标准的，适合于一个正式问题。该问题在科学上是合理的。\n- **适定性**：问题明确指出，对于 $N$ 个表面中的每一个，温度 $T_i$ 或热流率 $Q_i$ 是已知的。这将系统划分为一组已知变量和未知变量。所要求的将其构造成关于未知数 $x_i = T_i^4$ 的线性系统是一种标准方法，通常会得到一个适定问题，特别是因为每个测试用例中至少指定了一个温度，这为热势提供了基准，并防止了平凡解/奇异解。\n- **客观性**：问题以精确、定量的术语陈述，没有主观性或含糊不清之处。\n- **一致性**：所有三个测试用例的数据都经过检查和验证，内部是一致的。角系数同时满足求和规则和互易规则。例如，在测试用例 2 中，$A_1 F_{12} = 1.0 \\times 0.75 = 0.75$ 且 $A_2 F_{21} = 2.0 \\times 0.375 = 0.75$，满足互易关系。所有其他关系也成立。\n- **完整性**：每个测试用例都提供了所有必需的信息——面积、角系数、常数和边界条件（给定的 $T$ 或 $Q$）。\n\n**步骤 3：结论与行动**\n该问题有效。它是一个定义明确、一致且可解的工程科学问题。将提供一个完整的、有理有据的解决方案。\n\n**控制方程的推导**\n\n将按要求从基本原理构建解决方案。\n\n1.  **黑体表面的辐射度**：对于黑体表面，吸收率 $\\alpha$ 为 $1$，发射率 $\\epsilon$ 为 $1$。表面不反射任何入射辐射。因此，辐射度 $J_i$（离开表面 $i$ 的总辐射通量）完全是发射性的。根据斯特藩-玻尔兹曼定律，黑体辐射功率为 $E_{b,i} = \\sigma T_i^4$。因此，对于黑体表面：\n    $$ J_i = E_{b,i} = \\sigma T_i^4 $$\n\n2.  **表面的辐照度**：辐照度 $G_i$（投射到表面 $i$ 上的总辐射通量）是来自封闭体中所有表面的辐射能量之和，如果表面是凹的（$F_{ii} > 0$），也包括其自身。离开表面 $j$ 并到达表面 $i$ 的能量是 $(J_j A_j) F_{ji}$。表面 $i$ 上的总辐照度是所有 $j$ 的总和：\n    $$ G_i A_i = \\sum_{j=1}^N (J_j A_j) F_{ji} $$\n    应用互易关系 $A_j F_{ji} = A_i F_{ij}$，我们简化 $G_i$ 的表达式：\n    $$ G_i A_i = \\sum_{j=1}^N J_j (A_i F_{ij}) \\implies G_i = \\sum_{j=1}^N J_j F_{ij} $$\n\n3.  **净辐射热流率**：离开表面 $i$ 的净辐射热流率 $Q_i$ 是离开和进入的辐射能量之差：\n    $$ Q_i = A_i (J_i - G_i) $$\n\n4.  **系统构建**：我们组合这些基本关系。将 $J_i$ 和 $G_i$ 的表达式代入热流率方程：\n    $$ Q_i = A_i \\left( \\sigma T_i^4 - \\sum_{j=1}^N (\\sigma T_j^4) F_{ij} \\right) $$\n    两边除以 $A_i$ 并提出 $\\sigma$：\n    $$ \\frac{Q_i}{A_i} = \\sigma \\left( T_i^4 - \\sum_{j=1}^N T_j^4 F_{ij} \\right) $$\n    按照指示，我们引入变量变换 $x_i = T_i^4$。系统在变量 $\\{x_i\\}$ 方面变为线性：\n    $$ \\frac{Q_i}{A_i} = \\sigma \\left( x_i - \\sum_{j=1}^N x_j F_{ij} \\right) $$\n    这为 $N$ 个表面中的每一个提供了一个方程。\n\n5.  **建立可解的线性系统**：表面被划分为两个集合：集合 $\\mathcal{T}$，其中温度 $T_k$（因此 $x_k = T_k^4$）是已知的；以及集合 $\\mathcal{Q}$，其中热流率 $Q_k$ 是已知的，但温度 $T_k$（因此 $x_k$）是未知的。我们必须求解 $\\{x_i | i \\in \\mathcal{Q}\\}$。\n\n    我们为每个表面 $i \\in \\mathcal{Q}$ 重新排列方程，将未知变量放在一边：\n    $$ x_i - \\sum_{j=1}^N x_j F_{ij} = \\frac{Q_i}{\\sigma A_i} $$\n    使用求和规则 $\\sum_{j=1}^N F_{ij} = 1$，我们可以写出 $x_i = x_i \\sum_{j=1}^N F_{ij} = \\sum_{j=1}^N x_i F_{ij}$。这不是最直接的路径。相反，我们重写求和：\n    $$ x_i - \\left(x_i F_{ii} + \\sum_{j \\neq i} x_j F_{ij}\\right) = \\frac{Q_i}{\\sigma A_i} $$\n    $$ x_i (1 - F_{ii}) - \\sum_{j \\neq i} x_j F_{ij} = \\frac{Q_i}{\\sigma A_i} $$\n    现在，我们将求和分离为未知变量和已知变量。对于对应于表面 $i \\in \\mathcal{Q}$ 的方程：\n    $$ x_i (1 - F_{ii}) - \\sum_{j \\in \\mathcal{Q}, j \\neq i} F_{ij} x_j - \\sum_{k \\in \\mathcal{T}} F_{ik} x_k = \\frac{Q_i}{\\sigma A_i} $$\n    将含有已知 $x_k$ 的项移到右边，得到关于未知数 $\\{x_j | j \\in \\mathcal{Q}\\}$ 的线性系统：\n    $$ x_i (1 - F_{ii}) - \\sum_{j \\in \\mathcal{Q}, j \\neq i} F_{ij} x_j = \\frac{Q_i}{\\sigma A_i} + \\sum_{k \\in \\mathcal{T}} F_{ik} x_k $$\n    这就构成了一个包含 $|\\mathcal{Q}|$ 个未知数的 $|\\mathcal{Q}|$ 个线性代数方程组。它可以写成矩阵形式 $M \\mathbf{X} = \\mathbf{b}$，其中：\n    - $\\mathbf{X}$ 是未知变量 $\\{x_j\\}_{j \\in \\mathcal{Q}}$ 的列向量。\n    - 系数矩阵 $M$ 的元素对应于集合 $\\mathcal{Q}$ 中表面的索引。设 $i'$ 和 $j'$ 为 $M$ 的行和列索引，而 $i, j$ 为 $\\mathcal{Q}$ 中对应的表面索引。\n      - $M_{i'i'} = 1 - F_{ii}$\n      - $M_{i'j'} = -F_{ij}$ 对于 $i \\neq j$\n    - 右侧向量 $\\mathbf{b}$ 的元素 $b_{i'}$ 对应于表面 $i \\in \\mathcal{Q}$：\n      - $b_{i'} = \\frac{Q_i}{\\sigma A_i} + \\sum_{k \\in \\mathcal{T}} F_{ik} x_k$ 其中 $x_k = T_k^4$ 是已知值。\n\n6.  **求解步骤**：\n    对于每个测试用例，我们将：\n    a. 识别集合 $\\mathcal{T}$ 和 $\\mathcal{Q}$。\n    b. 使用提供的数据（$A_i, F_{ij}, Q_i, T_k$）构建矩阵 $M$ 和向量 $\\mathbf{b}$。\n    c. 求解线性系统 $M \\mathbf{X} = \\mathbf{b}$ 以获得未知数向量 $\\mathbf{X}$。\n    d. 对于解向量 $\\mathbf{X}$ 的每个分量 $x_i$，计算相应的温度 $T_i = (x_i)^{1/4}$。\n    e. 收集计算出的温度，将其四舍五入到三位小数，并按要求格式化。\n\n这种结构化的、基于原理的方法确保了正确性并遵守了问题约束。", "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves for unknown temperatures in radiative heat transfer problems\n    for enclosures of diffuse, black surfaces.\n    \"\"\"\n    \n    sigma = 5.670374419e-8\n\n    def solve_radiative_system(N, A, F, T_known, Q_known):\n        \"\"\"\n        Forms and solves the linear system for unknown temperatures.\n\n        Args:\n            N (int): Number of surfaces.\n            A (np.ndarray): Array of surface areas (m^2).\n            F (np.ndarray): Matrix of view factors.\n            T_known (dict): Dictionary of {surface_idx: temp_K} for surfaces with known temperature.\n            Q_known (dict): Dictionary of {surface_idx: heat_rate_W} for surfaces with known heat rate.\n\n        Returns:\n            list: A list of the calculated unknown temperatures in Kelvin, sorted by surface index.\n        \"\"\"\n        # Indices of surfaces with unknown temperature (surfaces with prescribed Q)\n        q_indices = sorted(list(Q_known.keys()))\n        \n        # Indices of surfaces with known temperature (surfaces with prescribed T)\n        t_indices = sorted(list(T_known.keys()))\n        \n        num_unknowns = len(q_indices)\n        if num_unknowns == 0:\n            return []\n\n        # Pre-calculate x_k = T_k^4 for known temperatures\n        x_known = {k: v**4 for k, v in T_known.items()}\n        \n        # Initialize the matrix M and vector b for the system M*X = b\n        M = np.zeros((num_unknowns, num_unknowns))\n        b = np.zeros(num_unknowns)\n        \n        # Populate the matrix M and vector b\n        for i in range(num_unknowns):\n            surf_i = q_indices[i] # This is the 1-based surface index\n            idx_i = surf_i - 1    # This is the 0-based array index\n            \n            # Calculate the right-hand side vector b\n            q_term = Q_known[surf_i] / (sigma * A[idx_i])\n            \n            sum_term = 0.0\n            for k in t_indices:\n                idx_k = k - 1\n                sum_term += F[idx_i, idx_k] * x_known[k]\n            \n            b[i] = q_term + sum_term\n            \n            # Populate the coefficient matrix M\n            for j in range(num_unknowns):\n                surf_j = q_indices[j]\n                idx_j = surf_j - 1\n                \n                if i == j:\n                    M[i, j] = 1.0 - F[idx_i, idx_i]\n                else:\n                    M[i, j] = -F[idx_i, idx_j]\n\n        # Solve the linear system for the unknown x values\n        try:\n            x_unknown_vec = np.linalg.solve(M, b)\n        except np.linalg.LinAlgError:\n            # This case should not occur for the given well-posed problems\n            return [float('nan')] * num_unknowns\n\n        # Map solved x values back to their surface indices\n        x_unknown = {q_indices[i]: x_unknown_vec[i] for i in range(num_unknowns)}\n        \n        # Calculate temperatures from x values (T = x^(1/4))\n        # Ensure non-negative before taking the root for physical validity\n        temps_unknown = {\n            k: (v**0.25 if v >= 0 else float('nan'))\n            for k, v in x_unknown.items()\n        }\n        \n        # Return a list of temperatures, sorted by surface index\n        return [temps_unknown[k] for k in sorted(temps_unknown.keys())]\n\n    # --- Test Suite ---\n    test_cases = [\n        # Test Case 1: Two parallel, black plates\n        {\n            \"N\": 2,\n            \"A\": np.array([2.0, 2.0]),\n            \"F\": np.array([[0.0, 1.0], [1.0, 0.0]]),\n            \"T_known\": {1: 400.0},\n            \"Q_known\": {2: 500.0}\n        },\n        # Test Case 2: Three black surfaces\n        {\n            \"N\": 3,\n            \"A\": np.array([1.0, 2.0, 1.5]),\n            \"F\": np.array([\n                [0.0, 0.75, 0.25],\n                [0.375, 0.0, 0.625],\n                [1.0/6.0, 5.0/6.0, 0.0]\n            ]),\n            \"T_known\": {1: 600.0, 3: 300.0},\n            \"Q_known\": {2: 100.0}\n        },\n        # Test Case 3: Four symmetric black surfaces\n        {\n            \"N\": 4,\n            \"A\": np.array([1.0, 1.0, 1.0, 1.0]),\n            \"F\": np.array([\n                [0.0, 1/3, 1/3, 1/3],\n                [1/3, 0.0, 1/3, 1/3],\n                [1/3, 1/3, 0.0, 1/3],\n                [1/3, 1/3, 1/3, 0.0]\n            ]),\n            \"T_known\": {1: 500.0},\n            \"Q_known\": {2: 60.0, 3: -10.0, 4: -30.0}\n        }\n    ]\n\n    all_results = []\n    for case in test_cases:\n        temps = solve_radiative_system(\n            case[\"N\"], case[\"A\"], case[\"F\"], case[\"T_known\"], case[\"Q_known\"]\n        )\n        all_results.append(temps)\n\n    # Format the final output string as specified: [[...],[...],...]\n    case_results_str = []\n    for res_list in all_results:\n        # Round each temperature to three decimal places\n        formatted_temps = [f\"{t:.3f}\" for t in res_list]\n        case_str = '[' + ','.join(formatted_temps) + ']'\n        case_results_str.append(case_str)\n    \n    final_output_str = '[' + ','.join(case_results_str) + ']'\n    print(final_output_str)\n\nsolve()\n```", "id": "2518856"}]}
{"hands_on_practices": [{"introduction": "计算流体力学（CFD）的强大之处在于其能够模拟复杂的物理现象，例如由温度差异引起的自然对流。本练习将引导你为一个基本但至关重要的场景设置边界条件：一个热表面在靜止空气中产生的上升热羽流 [@problem_id:1734331]。正确定义热源、绝热表面和远场环境之间的相互作用，是准确预测流场和温度分布的关键。这个实践将帮助你掌握区分不同类型壁面边界（如等温无滑移和绝热无滑移）以及为无界空间选择合适开放边界的技能。", "problem": "一位工程师的任务是为一个放置在大型、密封且静止的房间地板上的热薄圆板所产生的自然对流羽流创建一个仿真模型。其目标是使用计算流体力学 (CFD) 来预测空气的温度场和速度场。仿真域被定义为一个包围该热板的大矩形空气区域。\n\n该计算域的边界分类如下：\n- `S_hot`：热圆板的上表面，该表面维持在恒定的高温 $T_{hot}$。\n- `S_floor`：域内除热板覆盖区域外的房间地板部分。该表面假定为绝热的。\n- `S_far`：矩形域的顶部和四个垂直侧面，位于远离热板的位置。\n\n为了设置仿真，工程师必须为这些表面中的每一个指定物理上合适的边界条件类型。有四种常见的边界条件类型可供选择，其物理定义如下：\n\n- **等温无滑移壁面**：边界处的流体速度为零。边界处的温度保持在指定的恒定值。\n- **绝热无滑移壁面**：边界处的流体速度为零。垂直于边界的热通量为零。\n- **开放边界**：边界处的压力固定为指定的环境值。如果流体通过此边界进入域，其温度为指定的环境温度。如果流体流出，其温度为其从域内携带的温度（温度的零梯度条件）。\n- **对称边界**：垂直于边界的速度分量为零，剪切应力为零。垂直于边界的热通量为零。此条件用于模拟流动与边界平行的对称平面。\n\n对于该情景的物理真实仿真，以下哪个选项正确地为表面 `S_hot`、`S_floor` 和 `S_far` 指定了边界条件类型？\n\nA. `S_hot`: 等温无滑移壁面, `S_floor`: 绝热无滑移壁面, `S_far`: 开放边界\n\nB. `S_hot`: 等温无滑移壁面, `S_floor`: 绝热无滑移壁面, `S_far`: 绝热无滑移壁面\n\nC. `S_hot`: 等温无滑移壁面, `S_floor`: 等温无滑移壁面, `S_far`: 开放边界\n\nD. `S_hot`: 绝热无滑移壁面, `S_floor`: 绝热无滑移壁面, `S_far`: 对称边界", "solution": "我们识别每个边界的物理性质，并使用浮力驱动流的标准壁面和远场条件，将其与给定的边界条件定义进行匹配。\n\n1) 对于热板表面 $S_{\\text{hot}}$：\n- 它是一个与空气接触的固体表面，因此适用无滑移条件：在 $S_{\\text{hot}}$ 上 $\\boldsymbol{u}=\\boldsymbol{0}$。\n- 它维持在指定的恒定温度 $T_{\\text{hot}}$，因此适用等温条件：在 $S_{\\text{hot}}$ 上 $T=T_{\\text{hot}}$。\n这些恰好是等温无滑移壁面的定义。\n\n2) 对于其余的地板 $S_{\\text{floor}}$（未被热板覆盖的房间地板）：\n- 它是一个固体壁面，因此适用无滑移条件：在 $S_{\\text{floor}}$ 上 $\\boldsymbol{u}=\\boldsymbol{0}$。\n- 它是绝热的，因此法向热通量为零：在 $S_{\\text{floor}}$ 上 $q_{n}=-k\\,\\nabla T\\cdot \\boldsymbol{n}=0$。对于恒定的 $k$，这表示 $\\partial T/\\partial n=0$。\n这些恰好是绝热无滑移壁面的定义。\n\n3) 对于远场边界 $S_{\\text{far}}$（放置在远离热板的计算区域的顶部和垂直侧面）：\n- 计算域是房间空气的一个截断部分。在 $S_{\\text{far}}$ 之外是更多静止的室内空气，而不是一个固体壁面。为了表示一个有效的无界环境，并允许浮力驱动的卷吸和排出，同时具有最小的反射，需要施加一个远场/开放边界。\n- 开放边界将静压固定为环境压力 $p=p_{\\text{amb}}$，并在 $\\boldsymbol{u}\\cdot \\boldsymbol{n}<0$（流入）时施加 $T=T_{\\text{amb}}$，在 $\\boldsymbol{u}\\cdot \\boldsymbol{n}>0$（流出）时施加零法向温度梯度 $\\partial T/\\partial n=0$。当计算区域只是一个子域时，这与预期的“大型、密封且静止的房间”情景相匹配：开放边界模拟了远离羽流的周围环境，而不会引入人为的固体壁面。\n- 在 $S_{\\text{far}}$ 处使用绝热无滑移壁面会在此处施加 $\\boldsymbol{u}=\\boldsymbol{0}$ 和 $\\partial T/\\partial n=0$，这会不符合物理实际地限制和反射羽流；而使用对称边界则需要一个真实的对称平面和平行流动，这在所有远场边界上都不成立。\n\n因此，正确的指定是：\n- $S_{\\text{hot}}$：等温无滑移壁面，\n- $S_{\\text{floor}}$：绝热无滑移壁面，\n- $S_{\\text{far}}$：开放边界。\n\n在所提供的选项中，这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1734331"}, {"introduction": "许多流体流动是由压力差而非预设速度驱动的。一个直观的例子是浴缸排水时形成的漩涡，其动力源于水面上的大气压力与排水口较低压力之间的压差 [@problem_id:1734286]。本练习挑战你为这个常见的物理现象选择最合适的边界条件组合。通过这个过程，你将理解为何使用压力边界条件（而不是指定速度出口）对于让求解器自然地计算出包括漩涡在内的复杂流动结构至关重要。", "problem": "一名工程师的任务是创建一个简化的计算流体动力学（CFD）模拟，模拟水从圆柱形浴缸中排出的过程。目标是捕捉排水口上方形成的典型旋转涡旋。计算域是一个充满水的圆柱体。该模拟将把流体建模为单相、不可压缩的粘性液体。水的初始状态是静止的，除了一个非常小的初始切向速度以引发涡旋。\n\n圆柱形域的边界定义如下：\n- **顶面**：水的上部平坦表面，与大气相通。\n- **侧壁**：浴缸的弯曲垂直壁面。\n- **底壁**：浴缸的平坦底面，不包括排水口。\n- **排水出口**：位于底壁中心的圆形开口，水通过此口流出域。\n\n为了正确模拟排水过程的物理现象，必须在这些表面上应用一套边界条件。下列哪组边界条件最适合此模拟？\n\nA. **顶面**：速度入口（指定速度为零）。**侧壁**：无滑移壁面。**底壁**：无滑移壁面。**排水出口**：速度出口（指定均匀的出口速度）。\n\nB. **顶面**：对称边界。**侧壁**：无滑移壁面。**底壁**：无滑移壁面。**排水出口**：出流（所有变量为零梯度条件）。\n\nC. **顶面**：滑移壁面（零剪切应力）。**侧壁**：滑移壁面。**底壁**：滑移壁面。**排水出口**：压力出口（指定表压）。\n\nD. **顶面**：压力边界（代表大气压力）。**侧壁**：无滑移壁面。**底壁**：无滑移壁面。**排水出口**：压力出口（指定表压，低于顶面压力）。\n\nE. **顶面**：无滑移壁面。**侧壁**：无滑移壁面。**底壁**：无滑移壁面。**排水出口**：质量流量出口（指定质量流率）。", "solution": "我们将流动建模为单相、不可压缩的粘性流，由不可压缩的 Navier–Stokes 方程控制：\n$$\n\\nabla \\cdot \\mathbf{u} = 0, \\qquad\n\\rho \\left( \\frac{\\partial \\mathbf{u}}{\\partial t} + \\mathbf{u}\\cdot \\nabla \\mathbf{u} \\right) = -\\nabla p + \\mu \\nabla^{2}\\mathbf{u} + \\rho \\mathbf{g}.\n$$\n为了获得物理上正确的排水过程和排水口上方的涡旋，边界条件必须 (i) 在暴露于大气的开放自由表面上提供正确的牵引力，(ii) 在固体壁面上正确施加粘性效应以允许边界层和涡旋发展，以及 (iii) 在出口处施加一个压力参考，以驱动流出，同时不人为地约束速度剖面。\n\n对于固体壁面（侧壁和底壁，不包括排水口），需要使用粘性无滑移条件来捕捉剪切和涡旋结构，因此\n$$\n\\mathbf{u} = \\mathbf{0} \\quad \\text{on side wall and bottom wall (excluding the drain)}.\n$$\n\n对于与大气相通的顶面，正确的条件是代表大气压力的压力（牵引力）边界。在连续介质形式下，使用向外的单位法向量 $\\mathbf{n}$ 和 Cauchy 应力 $\\boldsymbol{\\sigma} = -p\\mathbf{I} + \\mu\\left(\\nabla \\mathbf{u} + \\nabla \\mathbf{u}^{T}\\right)$，大气边界施加了\n$$\n\\boldsymbol{\\sigma}\\,\\mathbf{n} = -p_{\\text{atm}}\\,\\mathbf{n},\n$$\n这在典型的 CFD 实现中表示为压力边界，其中 $p = p_{\\text{atm}}$ 且剪切应力为零。这允许自由表面响应流动而无需指定速度，并正确设置了绝对压力参考。\n\n对于排水出口，流出应由自由表面和排水口之间的压力差驱动。因此，压力出口是合适的，需要指定一个表压 $p_{\\text{out}}$ 使得\n$$\np = p_{\\text{out}}, \\qquad p_{\\text{out}} < p_{\\text{atm}},\n$$\n这样压力梯度就会引起排水，并且排水口的速度剖面由 Navier–Stokes 方程的解确定，而不是被人为施加。\n\n现在评估各个选项：\n\nA. 将顶面设置为速度入口并指定速度为零，会在此处固定 $\\mathbf{u}=\\mathbf{0}$，并且不施加大气牵引力；排水口的速度出口指定了均匀的出口速度，这施加了一个不符合物理的剖面，并且不允许求解器确定由涡旋引起的正确剖面。因此 A 不合适。\n\nB. 将顶面设置为对称边界会强制法向速度为零和法向梯度为零，这与大气自由表面不同，并且不提供驱动排水的压力参考。在排水口对所有变量使用零梯度出流条件，不会施加所需的压降，并且对于决定质量流量的单个出口可能是不适定的。因此 B 不合适。\n\nC. 滑移壁面消除了侧壁和底壁上的粘性剪切，抑制了在粘性液体中形成真实涡旋所必需的边界层。因此 C 不合适。\n\nD. 将顶面设置为 $p_{\\text{atm}}$ 的压力边界，侧壁和底壁设置为无滑移壁面，排水口设置为压力出口且 $p_{\\text{out}}<p_{\\text{atm}}$，这在自由表面上提供了正确的物理牵引力，在壁面上施加了粘性效应，并提供了驱动排水的压降，同时允许速度场（包括涡旋）由方程确定。这是合适的。\n\nE. 将顶面设置为无滑移壁面对开放的自由表面来说是不符合物理的，并且在出口指定质量流率是预设了流量，而不是让它由静水压头和损失来决定。因此 E 不合适。\n\n因此，最合适的组合是选项 D。", "answer": "$$\\boxed{D}$$", "id": "1734286"}, {"introduction": "在工程应用中，CFD 不仅仅是用于分析单一工况的工具，还常用于系统性能的评估，例如绘制水泵的性能曲线。这个过程通常需要反复试验来找到特定流量下的对应压头。本练习介绍了一种更高效的“智能”边界条件方法 [@problem_id:1734287]，它在求解过程中自动调整出口压力 $P_{out}$，以达到预设的目标质量流量 $\\dot{m}_{target}$。这个例子展示了边界条件如何从被动的物理约束转变为一种主动的控制工具，极大地提升了工程仿真的效率和自动化水平。", "problem": "一位计算流体力学（CFD）工程师的任务是为一款新设计的离心泵生成性能曲线。该性能曲线关联了泵产生的压头与其内部的质量流量。为此，该工程师需要运行一系列稳态模拟，每次模拟对应一个特定的目标质量流量。\n\n该泵的CFD模型使用“质量流量入口”边界条件和一种特殊的“压力出口”边界条件。该工程师没有为每个期望的质量流量手动猜测出口压力值，而是在出口边界条件中实现了一个自定义算法。该算法在模拟的迭代过程中自动调整出口静压 $P_{out}$，以达到预定义的目标质量流量 $\\dot{m}_{target}$。\n\n该算法的工作原理如下：在每 $N$ 个求解器迭代步块结束时，算法会计算出口处的当前质量流量 $\\dot{m}_{current}$。然后，它会更新用于下一个 $N$ 次迭代步块的 $P_{out}$ 值。设 $P_{out, k}$ 为第 $k$ 个迭代步块期间使用的出口压力值，$\\dot{m}_{current, k}$ 为在该步块结束时计算出的质量流量。下一个步块的新压力 $P_{out, k+1}$ 基于 $P_{out, k}$、$\\dot{m}_{current, k}$ 和常数 $\\dot{m}_{target}$ 计算。一个小的正松弛因子 $\\beta$（其单位为压力除以质量流量，例如 Pa$\\cdot$s/kg）被用来控制压力修正的大小。\n\n假设物理行为是出口背压的增加会导致通过泵的质量流量减少，反之亦然，那么下列哪个更新方案正确地描述了一种能使计算出的质量流量收敛于目标值的算法？\n\nA. $P_{out, k+1} = P_{out, k} - \\beta (\\dot{m}_{target} - \\dot{m}_{current, k})$\n\nB. $P_{out, k+1} = P_{out, k} + \\beta (\\dot{m}_{target} - \\dot{m}_{current, k})$\n\nC. $P_{out, k+1} = P_{out, k} + \\beta (\\dot{m}_{current, k} / \\dot{m}_{target})$\n\nD. $P_{out, k+1} = P_{out, k} - \\beta |\\dot{m}_{target} - \\dot{m}_{current, k}|$\n\nE. $P_{out, k+1} = \\beta (\\dot{m}_{target} / \\dot{m}_{current, k})$", "solution": "设泵的质量流量是出口压力的函数，$\\dot{m}=f(P_{out})$，其中给定的物理行为意味着 $f^{\\prime}(P_{out})<0$（增加背压会减少流量）。\n\n将在第 $k$ 个步块结束时的质量流量误差定义为\n$$\ne_{k}=\\dot{m}_{target}-\\dot{m}_{current,k}=\\dot{m}_{target}-f(P_{out,k}).\n$$\n我们寻求一个更新 $P_{out,k+1}=P_{out,k}+u_{k}$，以使 $e_{k}\\to 0$。对下一个迭代点的流量进行一阶 Taylor 展开：\n$$\n\\dot{m}_{current,k+1}=f(P_{out,k+1})\\approx f(P_{out,k})+f^{\\prime}(P_{out,k})u_{k}.\n$$\n因此，下一个误差满足\n$$\ne_{k+1}=\\dot{m}_{target}-\\dot{m}_{current,k+1}\\approx \\left[\\dot{m}_{target}-f(P_{out,k})\\right]-f^{\\prime}(P_{out,k})u_{k}=e_{k}-f^{\\prime}(P_{out,k})u_{k}.\n$$\n选择一个松弛因子为 $\\beta>0$ 的比例控制，并设置\n$$\nu_{k}=-\\beta e_{k}.\n$$\n则\n$$\ne_{k+1}\\approx e_{k}-f^{\\prime}(P_{out,k})(-\\beta e_{k})=\\left(1+\\beta f^{\\prime}(P_{out,k})\\right)e_{k}.\n$$\n由于 $f^{\\prime}(P_{out,k})<0$，选择足够小的 $\\beta>0$ 可以确保 $\\left|1+\\beta f^{\\prime}(P_{out,k})\\right|<1$，从而形成一个压缩映射，因此 $\\dot{m}_{current,k}$ 会收敛到 $\\dot{m}_{target}$。这个更新对应于\n$$\nP_{out,k+1}=P_{out,k}-\\beta\\left(\\dot{m}_{target}-\\dot{m}_{current,k}\\right),\n$$\n即选项A。这也符合物理符号逻辑：如果 $\\dot{m}_{current,k}<\\dot{m}_{target}$，括号中的项为正，则 $P_{out}$ 减小，从而增加流量；如果 $\\dot{m}_{current,k}>\\dot{m}_{target}$，则 $P_{out}$ 增大，从而减少流量。\n\n量纲一致性进一步支持了选项A：$\\beta$ 的单位是压力每质量流量，乘以 $(\\dot{m}_{target}-\\dot{m}_{current,k})$（单位是质量流量）后得到压力的单位，与 $P_{out}$ 的单位相匹配。\n\n相比之下：\n- 选项B使用了相反的符号，得到 $e_{k+1}\\approx(1-\\beta f^{\\prime})e_{k}$，其中 $f^{\\prime}<0$，因此 $1-\\beta f^{\\prime}>1$，误差会增长（发散）。\n- 选项C加上了 $\\beta(\\dot{m}_{current,k}/\\dot{m}_{target})$，即使在 $e_{k}=0$ 时该项也不为零，并且其加法项的单位不正确（单位是压力乘以时间每质量），而不是压力的单位。\n- 选项D总是减去 $\\beta|\\dot{m}_{target}-\\dot{m}_{current,k}|$，无论误差的符号如何，都会减小 $P_{out}$，这通常不会使 $e_{k}\\to 0$。\n- 选项E将 $P_{out,k+1}$ 设置为与一个无量纲比率成正比，这使得 $P_{out}$ 的单位不正确，并且在目标值处没有不动点。\n\n因此，只有A在小的正 $\\beta$ 值下能提供正确的反馈方向、量纲一致性和局部收敛性。", "answer": "$$\\boxed{A}$$", "id": "1734287"}]}
{"hands_on_practices": [{"introduction": "直接步进法是计算缓变流水面线的一种核心数值工具。本练习旨在引导你完成一次基础的逐步计算，模拟实验室水槽中常见的 M2 型降水曲线。你将从一个已知的控制断面（自由出流处的临界水深）出发，通过固定水深增量 $\\Delta y$ 来逆流而上，逐段计算水面线 [@problem_id:1748874]。这个过程将帮助你熟练掌握直接步进法的核心迭代步骤，并加深对能量方程在明渠流中应用的理解。", "problem": "一个长方形截面的长实验水槽被用于研究明渠流。该水槽宽 $b = 0.50$ m，具有恒定的顺向底坡 $S_0 = 0.0010$，其玻璃壁和槽底的 Manning 糙率系数为 $n = 0.012$。水以 $Q = 0.15$ m³/s 的恒定流量流过。水槽末端为自由出流，作为一个控制断面，迫使水槽最末端的水深等于临界水深。\n\n你的任务是使用直接步进法，从这个出流口向上游数值计算渐变流（GVF）剖面。从出流口的临界水深开始，确定在 10.0 米的长度上计算水面剖面所需的最少计算步数。每次计算步长使用固定的水深增量 $\\Delta y = 0.020$ m。\n\n假设重力加速度为 $g = 9.81$ m/s²。最终答案必须是代表步数的单个整数。", "solution": "我们要在一个棱柱形矩形渠道中，使用固定水深增量的直接步进法，计算下游控制（自由出流）上游的渐变回水剖面。对于宽度为 $b$、流量为 $Q$ 的矩形渠道，在水深为 $y$ 时的水力学量定义如下：\n- 过水断面面积：$A = b y$\n- 湿周：$P = b + 2 y$\n- 水力半径：$R = \\frac{A}{P}$\n- 平均流速：$V = \\frac{Q}{A}$\n- 比能：$E = y + \\frac{V^{2}}{2 g} = y + \\frac{Q^{2}}{2 g A^{2}}$\n- 由 Manning 公式计算的摩阻坡降：$S_{f} = \\frac{n^{2} Q^{2}}{A^{2} R^{4/3}}$\n\n由于下游控制将水深 $y$ 固定在临界水深 $y_{c}$ 处，我们从 $y_{1} = y_{c}$ 开始，以 $\\Delta y = 0.020$ m 的步长向上游计算。对于缓坡上的亚临界回水曲线（M2 型），在 $y_{c} < y < y_{n}$ 范围内有 $S_{f} > S_{0}$，从断面 $i$ 到 $i+1$ 的水深步长的河段长度计算公式为\n$$\n\\Delta x = \\frac{E_{i+1} - E_{i}}{S_{f,\\text{avg}} - S_{0}}, \\quad S_{f,\\text{avg}} = \\frac{S_{f,i} + S_{f,i+1}}{2},\n$$\n这样当向上游推进计算时，$\\Delta x > 0$。\n\n使用 $q = Q/b$ 计算矩形渠道的临界水深：\n$$\ny_{c} = \\left(\\frac{q^{2}}{g}\\right)^{1/3}, \\quad q = \\frac{Q}{b} = \\frac{0.15}{0.50} = 0.30 \\text{ m}^{2}\\!/\\text{s},\n$$\n$$\ny_{c} = \\left(\\frac{0.30^{2}}{9.81}\\right)^{1/3} \\approx 0.2094 \\text{ m}.\n$$\n这证实了下游的起始水深。对正常水深的估算表明，对于这些数据，$y_{n} \\approx 0.40$ m，因此 $y_{n} > y_{c}$，水面线为 M2 型。\n\n现在应用 $\\Delta y = 0.020$ m 的直接步进法。常数：$b = 0.50$ m， $Q = 0.15$ m³/s， $n = 0.012$，$S_{0} = 0.0010$，$g = 9.81$ m/s²。\n\n第 1 步：从 $y_1 = 0.2094$ m 到 $y_2 = 0.2294$ m。在 $y_1$ 处：\n- $A_1 = 0.50 \\times 0.2094 = 0.1047 \\text{ m}^2$\n- $P_1 = 0.50 + 2 \\times 0.2094 = 0.9188 \\text{ m}$, $R_1 = A_1/P_1 \\approx 0.1140 \\text{ m}$\n- $V_1 = Q/A_1 \\approx 1.4323 \\text{ m/s}$\n- $E_1 = y_1 + \\frac{V_1^2}{2g} \\approx 0.31398 \\text{ m}$\n- $S_{f,1} = \\frac{n^2 Q^2}{A_1^2 R_1^{4/3}} \\approx 0.005354$\n\n在 $y_2$ 处：\n- $A_2 = 0.1147 \\text{ m}^2$, $P_2 = 0.9588 \\text{ m}$, $R_2 \\approx 0.1196 \\text{ m}$\n- $V_2 \\approx 1.3083 \\text{ m/s}$, $E_2 \\approx 0.31666 \\text{ m}$\n- $S_{f,2} \\approx 0.004174$\n\n计算平均值和河段长度：\n- $\\Delta E_{1\\to 2} = E_2 - E_1 \\approx 0.00268 \\text{ m}$\n- $S_{f,\\text{avg}} \\approx (S_{f,1} + S_{f,2})/2 = 0.004764$\n- $\\Delta x_1 = \\frac{\\Delta E_{1\\to 2}}{S_{f,\\text{avg}} - S_0} \\approx \\frac{0.00268}{0.004764 - 0.0010} \\approx 0.712 \\text{ m}$\n\n第 1 步后累计长度：$L \\approx 0.712$ m。\n\n第 2 步：从 $y_2 = 0.2294$ m 到 $y_3 = 0.2494$ m。在 $y_3$ 处：\n- $A_3 = 0.1247 \\text{ m}^2$, $P_3 = 0.9988 \\text{ m}$, $R_3 \\approx 0.1249 \\text{ m}$\n- $V_3 \\approx 1.2037 \\text{ m/s}$, $E_3 \\approx 0.32325 \\text{ m}$\n- $S_{f,3} \\approx 0.003341$\n\n计算：\n- $\\Delta E_{2\\to 3} \\approx E_3 - E_2 = 0.00659 \\text{ m}$\n- $S_{f,\\text{avg}} \\approx (S_{f,2} + S_{f,3})/2 = 0.003758$\n- $\\Delta x_2 = \\frac{\\Delta E_{2\\to 3}}{S_{f,\\text{avg}} - S_0} \\approx \\frac{0.00659}{0.003758 - 0.0010} \\approx 2.389 \\text{ m}$\n\n第 2 步后累计长度：$L \\approx 0.712 + 2.389 = 3.101$ m。\n\n第 3 步：从 $y_3 = 0.2494$ m 到 $y_4 = 0.2694$ m。在 $y_4$ 处：\n- $A_4 = 0.1347 \\text{ m}^2$, $P_4 = 1.0388 \\text{ m}$, $R_4 \\approx 0.1296 \\text{ m}$\n- $V_4 \\approx 1.1135 \\text{ m/s}$, $E_4 \\approx 0.33262 \\text{ m}$\n- $S_{f,4} \\approx 0.002721$\n\n计算：\n- $\\Delta E_{3\\to 4} \\approx E_4 - E_3 = 0.00937 \\text{ m}$\n- $S_{f,\\text{avg}} \\approx (S_{f,3} + S_{f,4})/2 = 0.003031$\n- $\\Delta x_3 = \\frac{\\Delta E_{3\\to 4}}{S_{f,\\text{avg}} - S_0} \\approx \\frac{0.00937}{0.003031 - 0.0010} \\approx 4.615 \\text{ m}$\n\n第 3 步后累计长度：$L \\approx 3.101 + 4.615 = 7.716$ m。\n\n第 4 步：从 $y_4 = 0.2694$ m 到 $y_5 = 0.2894$ m。在 $y_5$ 处：\n- $A_5 = 0.1447 \\text{ m}^2$, $P_5 = 1.0788 \\text{ m}$, $R_5 \\approx 0.1341 \\text{ m}$\n- $V_5 \\approx 1.0368 \\text{ m/s}$, $E_5 \\approx 0.34419 \\text{ m}$\n- $S_{f,5} \\approx 0.002258$\n\n计算：\n- $\\Delta E_{4\\to 5} \\approx E_5 - E_4 = 0.01157 \\text{ m}$\n- $S_{f,\\text{avg}} \\approx (S_{f,4} + S_{f,5})/2 = 0.002490$\n- $\\Delta x_4 = \\frac{\\Delta E_{4\\to 5}}{S_{f,\\text{avg}} - S_0} \\approx \\frac{0.01157}{0.002490 - 0.0010} \\approx 7.77 \\text{ m}$\n\n第 4 步后累计长度：$L \\approx 7.716 + 7.77 = 15.49$ m。\n\n因此，3 步后累计长度小于 $10.0$ m，而 4 步后超过了 $10.0$ m。所以，覆盖上游 $10.0$ m 距离所需的、步长为 $\\Delta y = 0.020$ m 的最小计算步数是 $4$。", "answer": "$$\\boxed{4}$$", "id": "1748874"}, {"introduction": "在掌握了基本计算流程后，我们来探讨一个更特殊的物理情景：逆坡渠道中的水流。当渠底坡度 $S_0 < 0$ 时，水流的能量关系会发生显著变化，这在溢洪道下游等工程中很常见。本练习将要求你分析一段急流在逆坡上减速的情景，通过计算两个已知水深之间的距离，来巩固对渠底坡度 $S_0$ 和摩擦坡度 $S_f$ 之间相互作用的理解 [@problem_id:1748912]。", "problem": "水从一个混凝土溢洪道流入一个长而直的矩形沉沙渠，其宽度为 $B = 10.0 \\text{ m}$。该渠道设计有轻微的反坡 $S_0 = -0.001$，以便在水流进入消力池之前减速。该水流是渐变流 (GVF) 的一个例子。在上游的某个断面（断面 1），测得水深为 $y_1 = 1.20 \\text{ m}$。在更下游处（断面 2），随着水流继续减速，水深增加到 $y_2 = 1.50 \\text{ m}$。渠道中的总流量恒定为 $Q = 80.0 \\text{ m}^3/\\text{s}$。混凝土表面的 Manning 糙率系数为 $n=0.015$。\n\n使用单步直接步长法，计算断面 1 和断面 2 之间的河段长度。\n\n假设重力加速度为 $g = 9.81 \\text{ m/s}^2$。以米为单位表示答案，并四舍五入到三位有效数字。", "solution": "对于棱柱形渠道中的恒定渐变流，直接步长法使用两个断面之间的能量方程：\n$$\nE_{2}-E_{1} = \\left(S_{0}-\\bar{S}_{f}\\right)\\,\\Delta x,\n$$\n其中 $E=y+\\frac{V^{2}}{2g}$ 是从渠底算起的比能，$S_{0}$ 是渠底坡度（若渠底沿水流方向下降则为正），$\\bar{S}_{f}$ 是两个断面之间的平均摩阻坡降。因此，\n$$\n\\Delta x = \\frac{E_{2}-E_{1}}{S_{0}-\\bar{S}_{f}}.\n$$\n\n对于宽度为 $B$ 的矩形渠道，其几何与水力关系如下：\n- 面积 $A=By$ 和湿周 $P=B+2y$。\n- 水力半径 $R=A/P$。\n- 流速 $V=Q/A$。\n- Manning 摩阻坡降\n$$\nS_{f}=\\left(\\frac{nV}{R^{2/3}}\\right)^{2}= \\frac{n^{2}V^{2}}{R^{4/3}}.\n$$\n\n已知 $B=10.0$ m，$Q=80.0$ m³/s，$n=0.015$，$g=9.81$ m/s²，$S_{0}=-0.001$，$y_{1}=1.20$ m，$y_{2}=1.50$ m (所有单位均为国际单位制)：\n\n断面 1 ($y_1=1.20$ m):\n$$\nA_1=B y_1=10(1.20)=12.0 \\text{ m}^2,\n$$\n$$\nP_1=B+2y_1=10+2(1.20)=12.4 \\text{ m},\n$$\n$$\nR_1=A_1/P_1=12.0/12.4 \\approx 0.9677 \\text{ m},\n$$\n$$\nV_1=Q/A_1=80.0/12.0 \\approx 6.667 \\text{ m/s},\n$$\n$$\nE_1=y_1+\\frac{V_1^{2}}{2g}=1.20+\\frac{(6.667)^{2}}{2(9.81)} \\approx 3.465 \\text{ m},\n$$\n$$\nS_{f1}=\\frac{n^{2}V_1^{2}}{R_1^{4/3}}=\\frac{(0.015)^2(6.667)^2}{(0.9677)^{4/3}} \\approx 0.01045.\n$$\n\n断面 2 ($y_2=1.50$ m):\n$$\nA_2=B y_2=10(1.50)=15.0 \\text{ m}^2,\n$$\n$$\nP_2=B+2y_2=10+2(1.50)=13.0 \\text{ m},\n$$\n$$\nR_2=A_2/P_2=15.0/13.0 \\approx 1.154 \\text{ m},\n$$\n$$\nV_2=Q/A_2=80.0/15.0 \\approx 5.333 \\text{ m/s},\n$$\n$$\nE_2=y_2+\\frac{V_2^{2}}{2g}=1.50+\\frac{(5.333)^{2}}{2(9.81)} \\approx 2.950 \\text{ m},\n$$\n$$\nS_{f2}=\\frac{n^{2}V_2^{2}}{R_2^{4/3}}=\\frac{(0.015)^2(5.333)^2}{(1.154)^{4/3}} \\approx 0.00530.\n$$\n\n平均摩阻坡降：\n$$\n\\bar{S}_{f}=\\frac{S_{f1}+S_{f2}}{2}=\\frac{0.01045+0.00530}{2} \\approx 0.007875.\n$$\n\n直接步长法计算的河段长度（使用更高精度的中间值进行计算）：\n$$\n\\Delta x=\\frac{E_2-E_1}{S_0-\\bar{S}_f}=\\frac{2.949768-3.465262}{-0.001-0.007871785}=\\frac{-0.515494}{-0.008871785} \\approx 58.105\\ \\text{m}.\n$$\n\n四舍五入到三位有效数字：\n$$\n\\Delta x \\approx 58.1\\ \\text{m}.\n$$", "answer": "$$\\boxed{58.1}$$", "id": "1748912"}, {"introduction": "前面的练习侧重于水流分析，而本练习将视角转换为工程设计。在实际的水利工程中，我们常常需要确定渠道的关键参数以满足特定的运行要求。本题模拟了一个典型的设计场景：你需要反向求解，确定合适的渠道底坡 $S_0$，以确保上下游的水深满足设计约束 [@problem_id:1748916]。这个练习将展示直接步进法如何从一个分析工具转变为解决实际设计问题的有力手段。", "problem": "正在设计一条新的输水渠道，用于将水从处理设施输送到水库。该渠道具有均匀的梯形横截面，底宽为 $b = 3.0$ m，边坡系数为 $z=2$（即水平2：竖直1）。渠道内衬为混凝土，使其曼宁糙率系数为 $n = 0.015$。设计流量为恒定的 $Q = 20.0$ m³/s。\n\n位于渠道下游末端（桩号 $x = 500$ m）的一座水坝产生了壅水效应，使该点的水深升高至 $y_2 = 3.50$ m。由于土地限制，位于上游地界（桩号 $x = 0$ m）处的水深不得超过 $y_1 = 3.10$ m。\n\n为满足这些要求，您必须确定渠道精确的纵向底坡 $S_0$。对于此计算，您可以使用直接步进法中的单步来模拟这500 m的河段。这涉及到假设该河段的摩擦坡降可以由两个端点处计算的摩擦坡降的算术平均值很好地近似。取重力加速度为 $g = 9.81$ m/s²。\n\n确定所需的恒定底坡 $S_0$。将您的答案表示为一个无量纲的小数值，并四舍五入到四位有效数字。", "solution": "给定一个棱柱形梯形渠道，其底宽为$b$，边坡系数为$z$（水平与竖直之比），流量为$Q$，曼宁系数为$n$，在$x=0$处的水深为$y_1$，在$x=L$处的水深为$y_2$，则水深为$y$时的几何量为：\n$$\nA(y) = b y + z y^{2}, \\quad\nP(y) = b + 2 y \\sqrt{1+z^{2}}, \\quad\nR(y) = \\frac{A(y)}{P(y)}, \\quad\nV(y) = \\frac{Q}{A(y)}.\n$$\n曼宁摩擦坡降为\n$$\nS_{f}(y) = \\left( \\frac{n Q}{A(y) \\, R(y)^{2/3}} \\right)^{2},\n$$\n比能为\n$$\nE(y) = y + \\frac{V(y)^{2}}{2 g}.\n$$\n对于长度为 $L$ 的单步直接步进计算，使用算术平均摩擦坡降 $\\bar{S}_{f} = \\frac{S_{f1}+S_{f2}}{2}$，能量方程给出\n$$\nE_{2} - E_{1} = \\left(S_{0} - \\bar{S}_{f}\\right) L \\quad \\Rightarrow \\quad S_{0} = \\bar{S}_{f} + \\frac{E_{2} - E_{1}}{L}.\n$$\n数据：$b=3.0$ m, $z=2$, $n=0.015$, $Q=20.0$ m³/s, $g=9.81$ m/s², $L=500$ m, $y_{1}=3.10$ m, $y_{2}=3.50$ m。\n\n截面1，位于 $y_{1}=3.10$ m 处：\n$$\nA_{1} = 3(3.10) + 2(3.10)^{2} = 28.52 \\text{ m}^{2},\n$$\n$$\nP_{1} = 3 + 2(3.10)\\sqrt{1+2^{2}} = 3 + 6.20 \\sqrt{5} \\approx 16.8636 \\text{ m},\n$$\n$$\nR_{1} = \\frac{28.52}{16.8636} \\approx 1.6912 \\text{ m}, \\quad R_{1}^{2/3} \\approx 1.4196,\n$$\n$$\nS_{f1} = \\left( \\frac{0.015 \\times 20}{28.52 \\times 1.4196} \\right)^{2} \\approx 5.489 \\times 10^{-5},\n$$\n$$\nV_{1} = \\frac{20}{28.52} \\approx 0.70126 \\text{ m/s}, \\quad \\frac{V_{1}^{2}}{2g} \\approx \\frac{0.49177}{19.62} \\approx 0.02506 \\text{ m},\n$$\n$$\nE_{1} = 3.10 + 0.02506 \\approx 3.12506 \\text{ m}.\n$$\n\n截面2，位于 $y_{2}=3.50$ m 处：\n$$\nA_{2} = 3(3.50) + 2(3.50)^{2} = 35.00 \\text{ m}^{2},\n$$\n$$\nP_{2} = 3 + 2(3.50)\\sqrt{5} = 3 + 7 \\sqrt{5} \\approx 18.6525 \\text{ m},\n$$\n$$\nR_{2} = \\frac{35.00}{18.6525} \\approx 1.8764 \\text{ m}, \\quad R_{2}^{2/3} \\approx 1.5213,\n$$\n$$\nS_{f2} = \\left( \\frac{0.015 \\times 20}{35.00 \\times 1.5213} \\right)^{2} \\approx 3.174 \\times 10^{-5},\n$$\n$$\nV_{2} = \\frac{20}{35.00} \\approx 0.57143 \\text{ m/s}, \\quad \\frac{V_{2}^{2}}{2g} \\approx \\frac{0.32653}{19.62} \\approx 0.01665 \\text{ m},\n$$\n$$\nE_{2} = 3.50 + 0.01665 \\approx 3.51665 \\text{ m}.\n$$\n\n平均摩擦坡降和能量差：\n$$\n\\bar{S}_{f} = \\frac{S_{f1}+S_{f2}}{2} \\approx \\frac{5.489 \\times 10^{-5} + 3.174 \\times 10^{-5}}{2} \\approx 4.332 \\times 10^{-5},\n$$\n$$\nE_{2} - E_{1} \\approx 3.51665 - 3.12506 = 0.39159 \\text{ m}.\n$$\n\n所需的底坡：\n$$\nS_{0} = \\bar{S}_{f} + \\frac{E_{2} - E_{1}}{L} \\approx 4.332 \\times 10^{-5} + \\frac{0.39159}{500} \\approx 0.0008265.\n$$\n\n四舍五入到四位有效数字，所需的恒定底坡为 $0.0008265$（无量纲）。", "answer": "$$\\boxed{0.0008265}$$", "id": "1748916"}]}
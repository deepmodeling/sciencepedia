{"hands_on_practices": [{"introduction": "图像处理的核心操作之一是使用卷积核（kernel）来提取特征。这个练习将带你亲手体验如何通过一个称为Sobel算子的特定卷积核来检测图像中的边缘。通过在一个代表理想垂直边缘的简单图像块上进行计算，你将直观地理解梯度是如何量化边缘强度的，这是计算机视觉中一项基本而强大的技术。", "problem": "在一个基本的数字图像处理系统中，一个为检测垂直边缘而设计的算法会分析图像的一个小区域。该区域由一个 $3 \\times 3$ 的像素强度值矩阵表示，记为 $I$。当前考虑的这个特定图像块代表一个完美的垂直边缘，如下所示：\n$$\nI = \\begin{pmatrix}\n50 & 200 & 200 \\\\\n50 & 200 & 200 \\\\\n50 & 200 & 200\n\\end{pmatrix}\n$$\n该算法估计此图像块中心的水平方向梯度（这对应于垂直边缘的强度）。这是通过使用一个预定义的 $3 \\times 3$ 核 $G_x$ 来完成的，该核如下所示：\n$$\nG_x = \\begin{pmatrix}\n-1 & 0 & 1 \\\\\n-2 & 0 & 2 \\\\\n-1 & 0 & 1\n\\end{pmatrix}\n$$\n梯度估计值 $g$ 的计算方法是：核矩阵 $G_x$ 与图像块矩阵 $I$ 进行逐元素乘积后求和。计算该梯度估计值 $g$ 的值。", "solution": "该算法通过计算核与图像块之间逐元素乘积的和，来得到图像块中心的水平梯度估计值。将 $G_{x}$ 和 $I$ 的元素分别记为 $G_{x}(i,j)$ 和 $I(i,j)$，其中 $i,j \\in \\{1,2,3\\}$。估计值为\n$$\ng=\\sum_{i=1}^{3}\\sum_{j=1}^{3} G_{x}(i,j)\\,I(i,j).\n$$\n逐项计算：\n$$\ng = (-1)(50) + 0(200) + 1(200) + (-2)(50) + 0(200) + 2(200) + (-1)(50) + 0(200) + 1(200).\n$$\n简化每个乘积并求和：\n$$\ng = -50 + 0 + 200 - 100 + 0 + 400 - 50 + 0 + 200 = 600.\n$$\n因此，梯度估计值为 $g=600$。", "answer": "$$\\boxed{600}$$", "id": "1729803"}, {"introduction": "在构建复杂的图像处理流程时，我们常常需要按顺序应用多个滤波器。一个自然而然的问题是：改变这些滤波器的应用顺序会影响最终结果吗？这个练习通过一个具体的案例来探讨这个问题，你将分别以不同顺序应用一个线性的加权平均滤波器（高斯模糊的简化形式）和一个非线性的中值滤波器。通过比较结果，你将深入理解线性和非线性系统的重要区别，以及交换律（commutative property）在信号处理中的实际意义。", "problem": "在数字图像处理中，滤波操作是实现噪声抑制和特征增强等任务的基础。滤波器的应用顺序会显著影响最终的输出结果。考虑一个一维信号，它代表图像中单行像素的强度值序列，给定为 $S = [10, 20, 15, 100, 18, 22, 12]$。\n\n我们将分析级联两种常见类型滤波器的效果：非线性中值滤波器和线性加权平均滤波器。\n\n1.  **中值滤波器 (M)：** 一个3点中值滤波器。某一点的输出是以此点为中心的3点窗口内输入值的中值。对于输入序列 $x[n]$，其输出为 $y_M[n] = \\text{median}(x[n-1], x[n], x[n+1])$。\n\n2.  **加权平均滤波器 (G)：** 一个3点线性滤波器，是高斯模糊的简化形式。它通过与核 $h = [0.25, 0.5, 0.25]$ 的卷积来定义。对于输入序列 $x[n]$，其输出为 $y_G[n] = 0.25 \\cdot x[n-1] + 0.5 \\cdot x[n] + 0.25 \\cdot x[n+1]$。\n\n我们将以不同顺序应用这些滤波器，并计算两个结果信号：\n-   情况1：首先对 $S$ 应用中值滤波器得到中间信号 $S_M$，然后对 $S_M$ 应用加权平均滤波器得到最终信号 $S_1 = G(M(S))$。\n-   情况2：首先对 $S$ 应用加权平均滤波器得到中间信号 $S_G$，然后对 $S_G$ 应用中值滤波器得到最终信号 $S_2 = M(G(S))$。\n\n当对一个有限信号应用3点滤波器时，我们只关心滤波器3点窗口完全包含在输入信号域内的输出值。例如，当对一个7点信号进行滤波时，有效输出将是一个5点信号。随后对这个5点信号进行滤波将得到一个3点信号。\n\n根据您对最终的3点信号 $S_1$ 和 $S_2$ 的计算，选择能够正确比较它们并基于系统属性提供有效推理的陈述。\n\nA. $S_1$ 和 $S_2$ 是相同的，因为两个滤波器都是移位不变算子。\n\nB. $S_1$ 和 $S_2$ 是相同的，因为任何滤波操作的级联在数学上都是可交换的。\n\nC. $S_1$ 和 $S_2$ 是不同的。这是因为中值滤波器是一个非线性算子，当一个非线性算子与一个线性算子级联时，通常不保证交换性。\n\nD. $S_1$ 和 $S_2$ 是不同的。这是因为加权平均（高斯）滤波器是一个非线性算子。\n\nE. $S_1$ 和 $S_2$ 是不同的。只有当两个滤波器都是中值滤波器或都是高斯滤波器时，交换律才成立。", "solution": "设输入序列为 $S[1..7]=[10,20,15,100,18,22,12]$。一个3点滤波器在索引 $n=2,3,4,5,6$ 处产生有效输出，再级联另一个3点滤波器则在索引 $n=3,4,5$ 处产生有效输出。\n\n首先级联 $G(M(S))$:\n- 对 $S$ 应用中值滤波器 $M$：\n$$\n\\begin{aligned}\nS_{M}[2]&=\\text{median}(10,20,15)=15,\\\\\nS_{M}[3]&=\\text{median}(20,15,100)=20,\\\\\nS_{M}[4]&=\\text{median}(15,100,18)=18,\\\\\nS_{M}[5]&=\\text{median}(100,18,22)=22,\\\\\nS_{M}[6]&=\\text{median}(18,22,12)=18.\n\\end{aligned}\n$$\n因此 $S_{M}[2..6]=[15,20,18,22,18]$。\n- 对 $S_{M}$ 应用权重为 $\\left[\\frac{1}{4},\\frac{1}{2},\\frac{1}{4}\\right]$ 的加权平均滤波器 $G$：\n$$\n\\begin{aligned}\nS_{1}[3]&=\\tfrac{1}{4}S_{M}[2]+\\tfrac{1}{2}S_{M}[3]+\\tfrac{1}{4}S_{M}[4]=\\tfrac{15}{4}+10+\\tfrac{18}{4}=\\tfrac{73}{4},\\\\\nS_{1}[4]&=\\tfrac{1}{4}S_{M}[3]+\\tfrac{1}{2}S_{M}[4]+\\tfrac{1}{4}S_{M}[5]=5+9+\\tfrac{22}{4}=\\tfrac{39}{2},\\\\\nS_{1}[5]&=\\tfrac{1}{4}S_{M}[4]+\\tfrac{1}{2}S_{M}[5]+\\tfrac{1}{4}S_{M}[6]=\\tfrac{18}{4}+11+\\tfrac{18}{4}=20.\n\\end{aligned}\n$$\n因此 $S_{1}[3..5]=\\left[\\tfrac{73}{4},\\tfrac{39}{2},20\\right]$。\n\n其次级联 $M(G(S))$:\n- 对 $S$ 应用加权平均滤波器 $G$：\n$$\n\\begin{aligned}\nS_{G}[2]&=\\tfrac{1}{4}\\cdot 10+\\tfrac{1}{2}\\cdot 20+\\tfrac{1}{4}\\cdot 15=\\tfrac{65}{4},\\\\\nS_{G}[3]&=\\tfrac{1}{4}\\cdot 20+\\tfrac{1}{2}\\cdot 15+\\tfrac{1}{4}\\cdot 100=\\tfrac{75}{2},\\\\\nS_{G}[4]&=\\tfrac{1}{4}\\cdot 15+\\tfrac{1}{2}\\cdot 100+\\tfrac{1}{4}\\cdot 18=\\tfrac{233}{4},\\\\\nS_{G}[5]&=\\tfrac{1}{4}\\cdot 100+\\tfrac{1}{2}\\cdot 18+\\tfrac{1}{4}\\cdot 22=\\tfrac{79}{2},\\\\\nS_{G}[6]&=\\tfrac{1}{4}\\cdot 18+\\tfrac{1}{2}\\cdot 22+\\tfrac{1}{4}\\cdot 12=\\tfrac{37}{2}.\n\\end{aligned}\n$$\n因此 $S_{G}[2..6]=\\left[\\tfrac{65}{4},\\tfrac{75}{2},\\tfrac{233}{4},\\tfrac{79}{2},\\tfrac{37}{2}\\right]$。\n- 对 $S_{G}$ 应用中值滤波器 $M$：\n$$\n\\begin{aligned}\nS_{2}[3]&=\\text{median}\\!\\left(\\tfrac{65}{4},\\tfrac{75}{2},\\tfrac{233}{4}\\right)=\\tfrac{75}{2},\\\\\nS_{2}[4]&=\\text{median}\\!\\left(\\tfrac{75}{2},\\tfrac{233}{4},\\tfrac{79}{2}\\right)=\\tfrac{79}{2},\\\\\nS_{2}[5]&=\\text{median}\\!\\left(\\tfrac{233}{4},\\tfrac{79}{2},\\tfrac{37}{2}\\right)=\\tfrac{79}{2}.\n\\end{aligned}\n$$\n因此 $S_{2}[3..5]=\\left[\\tfrac{75}{2},\\tfrac{79}{2},\\tfrac{79}{2}\\right]$。\n\n比较：$S_{1}[3..5]=\\left[\\tfrac{73}{4},\\tfrac{39}{2},20\\right]$ 和 $S_{2}[3..5]=\\left[\\tfrac{75}{2},\\tfrac{79}{2},\\tfrac{79}{2}\\right]$ 不相等。原因是中值滤波器是一个非线性算子，因此与线性算子的交换性不被保证。加权平均滤波器是线性的且移位不变的；中值滤波器是移位不变的但非线性的。因此，正确的陈述是 $S_{1}$ 和 $S_{2}$ 因中值滤波器的非线性而不同。", "answer": "$$\\boxed{C}$$", "id": "1729825"}, {"introduction": "除了通过局部滤波来提取特征，我们还可以通过调整整个图像的像素强度分布来改善其视觉质量。直方图均衡化就是一种强大的全局对比度增强技术，它通过重新分布像素值，使图像的直方图尽可能平坦，从而拉伸对比度。这个练习将引导你完成直方图均衡化的核心计算步骤，通过对一个像素值分布非常独特的假设图像进行变换，你将学会如何利用累积分布函数（CDF）来映射和更新像素的亮度值。", "problem": "一个专门的天文成像传感器被用来捕捉遥远星云的单色图像。由于星际气体的特性和传感器的特定滤光片，所捕捉到的8位灰度图像由仅具有三个不同强度值的像素组成：50、120和210。一个8位的图像可以表示 $L=256$ 个强度级别，从0（黑色）到255（白色）。\n\n该图像总共有 1,048,576 个像素。一项统计分析揭示了以下分布：\n- 262,144 个像素的强度值为 50。\n- 524,288 个像素的强度值为 120。\n- 262,144 个像素的强度值为 210。\n\n为了提高视觉对比度，对该图像应用了标准的直方图均衡化算法。每个原始像素强度值 $v$ 到新强度值 $v'$ 的变换由以下公式给出：\n$$v' = \\text{floor}((L-1) \\times \\text{CDF}(v))$$\n此处，$\\text{floor}(x)$ 是将 $x$ 向下取整到最近整数的函数，$L=256$ 是强度级别的数量，而 $\\text{CDF}(v)$ 是图像像素强度在级别 $v$ 处的累积分布函数。$\\text{CDF}(v)$ 定义为所有小于或等于 $v$ 的强度级别的概率之和。\n\n确定将分别取代原始强度值 50、120 和 210 的新强度值。请按此特定顺序以一组三个整数值的形式给出您的答案。", "solution": "一个8位的图像有 $L=256$ 个强度级别，因此直方图均衡化映射为\n$$v'=\\lfloor (L-1)\\,\\text{CDF}(v)\\rfloor=\\lfloor 255\\,\\text{CDF}(v)\\rfloor.$$\n令 $N=1{,}048{,}576$ 为像素总数。三个现有强度的概率为\n$$p(50)=\\frac{262{,}144}{1{,}048{,}576}=\\frac{2^{18}}{2^{20}}=\\frac{1}{4},\\quad p(120)=\\frac{524{,}288}{1{,}048{,}576}=\\frac{2^{19}}{2^{20}}=\\frac{1}{2},\\quad p(210)=\\frac{262{,}144}{1{,}048{,}576}=\\frac{1}{4}.$$\n在这些级别上的累积分布函数为\n$$\\text{CDF}(50)=\\frac{1}{4},\\quad \\text{CDF}(120)=\\frac{1}{4}+\\frac{1}{2}=\\frac{3}{4},\\quad \\text{CDF}(210)=\\frac{1}{4}+\\frac{1}{2}+\\frac{1}{4}=1.$$\n应用该映射，\n$$v'(50)=\\left\\lfloor 255\\cdot \\frac{1}{4}\\right\\rfloor=\\left\\lfloor \\frac{255}{4}\\right\\rfloor=\\left\\lfloor 63+\\frac{3}{4}\\right\\rfloor=63,$$\n$$v'(120)=\\left\\lfloor 255\\cdot \\frac{3}{4}\\right\\rfloor=\\left\\lfloor \\frac{765}{4}\\right\\rfloor=\\left\\lfloor 191+\\frac{1}{4}\\right\\rfloor=191,$$\n$$v'(210)=\\left\\lfloor 255\\cdot 1\\right\\rfloor=255.$$\n因此，原始强度 $50,120,210$ 分别映射到 $63,191,255$。", "answer": "$$\\boxed{\\begin{pmatrix}63 & 191 & 255\\end{pmatrix}}$$", "id": "1729821"}]}
{"hands_on_practices": [{"introduction": "理论上的优化有时会带来实际问题。本练习展示了一个典型场景：通过移除一个逻辑上的冗余项来简化布尔表达式，反而引入了静态-1险象。通过找出导致毛刺的具体输入转换，你将对共识项 $BC$ 为何是创建稳健、无险象电路的关键有一个基本的理解 [@problem_id:1941645]。", "problem": "一个数字逻辑电路被设计用于实现布尔函数 $F(A, B, C) = AB + A'C + BC$。该电路最初没有静态冒险。一位新手设计师试图简化电路，移除了乘积项 $BC$，认为它是冗余的。优化后的函数为 $F_{opt}(A, B, C) = AB + A'C$。这个优化无意中在电路中引入了一个静态1冒险，这意味着对于一个特定的输入变化，本应保持逻辑高电平（1）的输出会瞬间出现毛刺，降至低电平（0）。\n\n找出在优化后的电路中会导致这种静态1冒险的单变量输入转换。\n\nA. 变量 $B$ 在 $A=0$ 和 $C=1$ 时改变状态。\n\nB. 变量 $C$ 在 $A=1$ 和 $B=1$ 时改变状态。\n\nC. 变量 $A$ 在 $B=1$ 和 $C=1$ 时改变状态。\n\nD. 变量 $A$ 在 $B=0$ 和 $C=0$ 时改变状态。\n\nE. 变量 $B$ 在 $A=1$ 和 $C=0$ 时改变状态。", "solution": "我们从原始函数 $F(A,B,C) = AB + A'C + BC$ 开始，其中包含了蕴含项对 $AB$ 和 $A'C$ 的共识项 $BC$。根据共识定理，对于变量 $X,Y,Z$，有 $XY + X'Z = XY + X'Z + YZ$，其中 $YZ$ 是共识项。将 $X \\mapsto A$, $Y \\mapsto B$, $Z \\mapsto C$ 进行映射，$AB$ 和 $A'C$ 的共识项是 $BC$。\n\n新手设计师移除了 $BC$ 并得到了 $F_{opt}(A,B,C) = AB + A'C$。这造成了经典的静态1冒险条件：当单个输入变量发生变化，使得电路状态在两个由不同蕴含项（$AB$ 和 $A'C$）覆盖的相邻最小项之间转换时，由于缺少能够将输出保持为高电平的共识项（$BC$），便会产生冒险。\n\n为了明确地揭示这个冒险转换，我们考虑在保持 $B=1$ 和 $C=1$ 的同时改变 $A$。在两个最终状态下评估 $F_{opt}$：\n- 在 $(A,B,C) = (1,1,1)$ 时：$AB = 1 \\cdot 1 = 1$, $A'C = 0 \\cdot 1 = 0$，因此 $F_{opt} = 1$。\n- 在 $(A,B,C) = (0,1,1)$ 时：$AB = 0 \\cdot 1 = 0$, $A'C = 1 \\cdot 1 = 1$，因此 $F_{opt} = 1$。\n\n因此，在 $B=1, C=1$ 的条件下，当 $A$ 发生 $1 \\to 0$ 的单变量转换时，逻辑上输出应保持为 $1$。然而，由于不相等的传播延迟，当 $A$ 改变时，乘积项 $AB$ 可能会在 $A'$ 上升以使 $A'C$ 变为 $1$ 之前下降到 $0$，从而产生一个 $AB=0$ 和 $A'C=0$ 同时成立的瞬间，导致静态1毛刺。被移除的共识项 $BC$ 在 $B=1, C=1$ 时会提供 $BC=1$ 的输出，从而防止这个毛刺的发生。\n\n检查各个选项：\n- A: $B$ 在 $A=0, C=1$ 时改变。此时 $A'C=1$ 且 $AB=0$，与 $B$ 无关，因此输出由单个乘积项维持；不存在静态1冒险。\n- B: $C$ 在 $A=1, B=1$ 时改变。此时 $AB=1$，与 $C$ 无关，因此不存在静态1冒险。\n- C: $A$ 在 $B=1, C=1$ 时改变。如上所示，这是会产生冒险的转换。\n- D: $A$ 在 $B=0, C=0$ 时改变。输出保持为 $0$，因此不是静态1冒险。\n- E: $B$ 在 $A=1, C=0$ 时改变。输出发生逻辑上的改变，因此不是静态1冒险。\n\n因此，导致静态1冒险的单变量输入转换是当 $A$ 在 $B=1$ 和 $C=1$ 的情况下发生改变。", "answer": "$$\\boxed{C}$$", "id": "1941645"}, {"introduction": "险象不仅仅是理论上的可能性，它们是具有可测量持续时间的真实物理事件。本练习将从概念识别转向定量分析，要求你根据各个逻辑门的传播延迟来精确计算静态险象毛刺的持续时间。这项技能对于预测和验证真实世界数字电路的时序行为至关重要 [@problem_id:1941654]。", "problem": "一个组合逻辑电路被设计用于实现布尔函数 $F(A, B, C) = AB + \\bar{A} C$。该电路由一个两级与或结构实现，并使用一个反相器来生成 $\\bar{A}$ 信号。各逻辑门的传输延迟如下：\n- 2输入与门：$t_{pd, AND} = 2.5$ ns\n- 2输入或门：$t_{pd, OR} = 3.0$ ns\n- 反相器：$t_{pd, INV} = 1.5$ ns\n\n该电路在输入B和C恒定保持为逻辑'1'的条件下运行。在时间 $t=0$ 时，输入A发生从逻辑'1'到逻辑'0'的瞬时跳变。由于不同的信号路径延迟，输出F可能会出现一个暂时的错误值，这种现象被称为静态冒险毛刺。\n\n计算输出F处于错误逻辑电平'0'的时间间隔的持续时间。答案以纳秒（ns）为单位表示。提供四舍五入到两位有效数字的数值。", "solution": "布尔函数 $F(A,B,C)=AB+\\bar{A}C$ 的实现方式是，两个乘积项的输出馈入一个或门，并使用一个反相器来生成 $\\bar{A}$。在 $B=1$ 和 $C=1$ 保持恒定的情况下，将乘积项输出定义为 $X=AB$ 和 $Y=\\bar{A}C$。最初，当 $A=1$ 时，$X=1$ 且 $Y=0$，因此 $F=1$；最终，当 $A=0$ 时，$X=0$ 且 $Y=1$，因此 $F=1$。如果 $X$ 在 $Y$ 上升到 $1$ 之前下降到 $0$，就可能发生静态1冒险。\n\n在 $t=0$ 时，输入 $A$ 发生 $1\\to 0$ 的跳变。每条路径的延迟如下：\n- 到 $X$ 的路径：$A \\to$ 2输入与门，在 $t_{pd,AND}=2.5\\,\\text{ns}$ 后在 $X$ 处产生一个下降沿，因此 $X$ 在 $t=2.5\\,\\text{ns}$ 时从 $1\\to 0$。\n- 到 $Y$ 的路径：$A \\to$ 反相器 $\\to$ 2输入与门，在 $t_{pd,INV}+t_{pd,AND}=1.5+2.5=4.0\\,\\text{ns}$ 后在 $Y$ 处产生一个上升沿，因此 $Y$ 在 $t=4.0\\,\\text{ns}$ 时从 $0\\to 1$。\n\n因此，在时间间隔 $t\\in(2.5\\,\\text{ns},4.0\\,\\text{ns})$ 内，两个或门的输入均为 $0$，持续时间为 $4.0-2.5=1.5\\,\\text{ns}$。考虑或门的传输延迟 $t_{pd,OR}=3.0\\,\\text{ns}$，它将 $F$ 的下降沿和上升沿都延迟了相同的时间，因此输出的跳变发生在\n$$t_{\\text{fall at }F}=2.5+3.0=5.5\\,\\text{ns},\\qquad t_{\\text{rise at }F}=4.0+3.0=7.0\\,\\text{ns},$$\n并且输出端的毛刺持续时间为\n$$\\Delta t=7.0-5.5=1.5\\,\\text{ns}.$$\n四舍五入到两位有效数字，错误的低电平时间间隔为 $1.5$ ns。", "answer": "$$\\boxed{1.5}$$", "id": "1941654"}, {"introduction": "稳健设计的最终目标不仅仅是修复险象，而是从一开始就防止它们。本练习探讨了“本质上无险象”的设计理念，即布尔函数的最小化形式已经能保证在所有单变量转换下无毛刺运行。通过分析不同的函数，你将学会区分哪些逻辑结构天生就是稳健的，这是高级数字设计的一个关键洞察 [@problem_id:1941590]。", "problem": "在数字逻辑设计中，静态1冒险（static-1 hazard）是组合电路中的一种潜在毛刺（glitch），其中输出本应保持稳定的逻辑'1'，但在单个输入变量变化期间会瞬间下降到'0'。这种现象可能出现在两级积之和（SOP）实现中。如果对于每一对仅相差一个变量且输出均为'1'的输入条件，SOP表达式中至少有一个积项同时包含这两个输入条件，那么该实现就被认为是无所有静态1冒险的。如果一个最小SOP实现的素蕴涵项集合（为达到最小化而选择）已经满足此条件，无需任何额外的冗余项，那么该实现就被认为是*固有无冒险*（inherently hazard-free）的。\n\n考虑一个三变量布尔函数 $F(A, B, C)$。最小项定义为 $m_i$，其中 $i$ 是二进制数 $ABC$ 的十进制等价值（A为最高有效位）。下列哪个由其最小项之和定义的函数，其最小积之和（SOP）实现是固有无所有静态1冒险的？\n\nA. $F(A, B, C) = \\Sigma m(1, 5, 6, 7)$\nB. $F(A, B, C) = \\Sigma m(2, 3, 5, 7)$\nC. $F(A, B, C) = \\Sigma m(0, 2, 3, 7)$\nD. $F(A, B, C) = \\Sigma m(0, 2, 4, 5, 6)$\nE. $F(A, B, C) = \\Sigma m(0, 1, 3, 7)$", "solution": "在两级SOP中，当两个仅相差一个变量且都产生输出1的输入组合，没有被SOP中的任何单个积项共同包含时，就会发生静态1冒险。如果无需添加冗余项，每个这样的相邻且输出为1的输入对都包含在至少一个蕴涵项（积项）内，那么最小SOP就是固有无冒险的。对于三个变量 $A,B,C$，索引为 $i=4A+2B+C$，如果两个最小项 $m_{i}$ 和 $m_{j}$ 的二进制码仅有一位不同，则它们是相邻的。\n\n选项A：$F=\\Sigma m(1,5,6,7)$，最小项为 $1(001)$、$5(101)$、$6(110)$、$7(111)$。唯一的两项最小覆盖是通过配对 $(1,5)$ 和 $(6,7)$ 得到，得出 $F=\\bar{B}C+AB$。相邻的1对 $(5,7)$ 没有被此SOP中的单个蕴涵项覆盖（这需要 $AC$ 项，但该项不存在）。因此不是固有无冒险的。\n\n选项B：$F=\\Sigma m(2,3,5,7)$，最小项为 $2(010)$、$3(011)$、$5(101)$、$7(111)$。两项最小覆盖是 $(2,3)\\to \\bar{A}B$ 和 $(5,7)\\to AC$，所以 $F=\\bar{A}B+AC$。相邻的1对 $(3,7)$ 没有被此SOP中的任何蕴涵项共同包含（这需要 $BC$ 项）。因此不是固有无冒险的。\n\n选项C：$F=\\Sigma m(0,2,3,7)$，最小项为 $0(000)$、$2(010)$、$3(011)$、$7(111)$。由于最小项0的存在，必须与2配对，得到两项最小覆盖 $(0,2)\\to \\bar{A}\\bar{C}$ 和 $(3,7)\\to BC$，所以 $F=\\bar{A}\\bar{C}+BC$。相邻的1对 $(2,3)$ 没有被此SOP中的任何蕴涵项共同包含（这需要 $\\bar{A}B$ 项）。因此不是固有无冒险的。\n\n选项D：$F=\\Sigma m(0,2,4,5,6)$，最小项为 $0(000)$、$2(010)$、$4(100)$、$5(101)$、$6(110)$。四个 $C=0$ 的最小项（即 $0,2,4,6$）形成一个四元组，产生蕴涵项 $\\bar{C}$。剩下的最小项5只能与4配对，得到 $(4,5)\\to A\\bar{B}$。因此，最小SOP为\n$$\nF=\\bar{C}+A\\bar{B}.\n$$\n现在为所有相邻的1对验证冒险条件：$(0,2)$、$(0,4)$、$(2,6)$ 和 $(4,6)$ 都被 $\\bar{C}$ 覆盖，而 $(4,5)$ 被 $A\\bar{B}$ 覆盖。因此，每个相邻的1对都包含在最小SOP的至少一个蕴涵项中，所以它是固有无冒险的。\n\n选项E：$F=\\Sigma m(0,1,3,7)$，最小项为 $0(000)$、$1(001)$、$3(011)$、$7(111)$。两项最小覆盖是 $(0,1)\\to \\bar{A}\\bar{B}$ 和 $(3,7)\\to BC$，所以 $F=\\bar{A}\\bar{B}+BC$。相邻的1对 $(1,3)$ 没有被此SOP中的任何蕴涵项共同包含（这需要 $\\bar{A}C$ 项）。因此不是固有无冒险的。\n\n因此，只有选项D的最小SOP是固有无所有静态1冒险的。", "answer": "$$\\boxed{D}$$", "id": "1941590"}]}
{"hands_on_practices": [{"introduction": "理论联系实际是数字逻辑设计的核心。本练习挑战你将减法的数学原理 $A - B = A + \\overline{B} + 1$ 转化为一个具体的硬件设计。你将学习如何通过添加最少的逻辑门，将一个现成的加法器模块改造为一个专用的减法器，这是构建复杂算术逻辑单元（ALU）的基础一步 [@problem_id:1915341]。", "problem": "您是一名初级数字设计工程师，任务是创建一个专用的硬件模块。您可以使用一个标准的4位并行加法器集成电路（IC）。该IC接收两个4位二进制数 $A = A_3A_2A_1A_0$ 和 $B = B_3B_2B_1B_0$ 以及一个单位的进位输入 $C_{in}$ 作为输入。它产生一个4位的和 $S = S_3S_2S_1S_0$ 和一个最终的进位输出 $C_{out}$。\n\n您的目标是设计一个电路，*专门*用于执行4位二进制减法 $A - B$，其中将 $A$ 和 $B$ 视为无符号整数，并以2的补码形式产生结果。这个新电路必须使用提供的4位加法器IC作为其核心组件。\n\n为实现这一目标，您需要添加外部逻辑电路。假设加法器的初始进位输入 $C_{in}$ 可以永久连接到逻辑高电平（1）或逻辑低电平（0）源，而不需要额外的逻辑门，那么完成这个专用减法器电路所需的最少标准逻辑门的类型和数量是多少？\n\nA. 四个与门\n\nB. 四个或门\n\nC. 四个非门\n\nD. 四个异或门\n\nE. 四个同或门\n\nF. 不需要额外的门。", "solution": "我们需要一个电路，该电路总是使用一个标准的4位并行加法器IC来计算无符号数 $A$ 和 $B$ 的减法 $A-B$，并以二补数形式表示结果。对于 $n$ 位字，众所周知的二补数减法恒等式是\n$$\nA - B = A + (\\text{two's complement of }B) = A + \\overline{B} + 1,\n$$\n其中 $\\overline{B}$ 表示 $B$ 的按位取反。写作 $B=B_{3}B_{2}B_{1}B_{0}$，这意味着 $\\overline{B}=\\overline{B_{3}}\\ \\overline{B_{2}}\\ \\overline{B_{1}}\\ \\overline{B_{0}}$，其中每个位都独立取反。\n\n一个4位加法器计算\n$$\nS = A + B + C_{in}\n$$\n在4位上进行运算，并产生一个最终进位 $C_{out}$。为了使用该加法器强制执行减法 $A-B$，我们将 $A$ 输入到其 $A$ 输入端，将 $\\overline{B}$ 输入到其 $B$ 输入端，并设置\n$$\nC_{in} = 1.\n$$\n然后加法器执行\n$$\nS = A + \\overline{B} + 1 = A - B\n$$\n在4位上的二补数运算，正如所要求的那样。\n\n要从 $B$ 生成 $\\overline{B}$，每个位 $B_{i}$ 必须独立取反：\n$$\n\\overline{B_{i}} = \\neg B_{i}, \\quad i \\in \\{0,1,2,3\\}.\n$$\n这需要每个位一个反相器，即总共四个非门。假设初始进位输入可以直接连接到逻辑高电平而无需逻辑门，因此 $C_{in}$ 不需要额外的门。\n\n最小性论证：为了实现 $\\overline{B}$，四个独立的输入位 $B_{i}$ 中的每一个都必须被取反。任何标准的实现都需要每个位至少一个门来实现反相。非门是提供反相功能的唯一的单输入标准门；其他替代方案，例如与常数 $1$ 进行异或（XOR）或与常数 $0$ 进行同或（XNOR），也需要每个位一个门，并且并不比四个非门更少或更简单。因此，所需的最少标准逻辑门的类型和数量是四个非门。\n\n因此，正确的选项是四个非门。", "answer": "$$\\boxed{C}$$", "id": "1915341"}, {"introduction": "设计完电路后，下一步是验证其内部工作是否符合预期。本练习将带你深入减法器内部，逐位追踪一次具体减法运算中的信号流。通过亲手计算每个全加器阶段的和 $S_i$ 与进位 $C_{i+1}$，你将清晰地看到补码减法在硬件层面是如何一步步精确执行的 [@problem_id:1915331]。", "problem": "一个数字电路被设计用于执行4位二进制减法。该电路通过一系列四个级联的全加器（Full Adder, FA）阶段来计算操作 $A - B$。这些阶段的索引从 $i=0$（最低有效位, LSB）到 $i=3$（最高有效位, MSB）。减法 $A - B$ 是通过计算 $A$ 与 $B$ 的二进制补码之和来实现的。\n\n其结构运行方式如下：\n- 设两个4位输入数为 $A = A_3A_2A_1A_0$ 和 $B = B_3B_2B_1B_0$。\n- 对于每个阶段 $i$，全加器有三个输入：$X_i$、$Y_i$ 和一个进位输入 $C_i$。它产生两个输出：一个和位 $S_i$ 和一个进位输出 $C_{i+1}$。\n- 为执行减法，第 $i$ 个全加器的输入设置为：$X_i = A_i$ 和 $Y_i = \\overline{B_i}$（$B_i$ 的按位逻辑非）。\n- 第一阶段（$i=0$）的进位输入固定为 $C_0 = 1$。对于所有后续阶段，进位输入 $C_i$ 是前一阶段（$i-1$）的进位输出 $C_i$。\n\n您的任务是追踪该电路在执行特定十进制运算 $5 - 7$ 时的内部状态。确定四个全加器阶段中每个阶段的和位 ($S_i$) 和进位输出位 ($C_{i+1}$) 的二进制值。\n\n请以单行矩阵的形式提供您的答案，其中包含八个二进制值，顺序为 $(S_0, C_1, S_1, C_2, S_2, C_3, S_3, C_4)$。", "solution": "我们使用二进制补码来实现减法：通过四个级联的全加器计算 $A+\\overline{B}+1$，其中 $X_{i}=A_{i}$，$Y_{i}=\\overline{B_{i}}$，并且 $C_{0}=1$。对于每个全加器，和与进位输出由以下公式给出\n$$\nS_{i}=X_{i}\\oplus Y_{i}\\oplus C_{i},\\qquad C_{i+1}=X_{i}Y_{i}+C_{i}\\left(X_{i}\\oplus Y_{i}\\right),\n$$\n其中 $\\oplus$ 是异或（XOR），并列表示布尔代数中的与（AND）。\n\n将操作数表示为4位二进制：\n$$\nA=5_{10}=0101_2\\;\\Rightarrow\\;(A_{3},A_{2},A_{1},A_{0})=(0,1,0,1),\n$$\n$$\nB=7_{10}=0111_2\\;\\Rightarrow\\;(B_{3},B_{2},B_{1},B_{0})=(0,1,1,1).\n$$\n因此，$\\overline{B}$ 按位取反为\n$$\n(\\overline{B_{3}},\\overline{B_{2}},\\overline{B_{1}},\\overline{B_{0}})=(1,0,0,0),\n$$\n所以 $Y_{3}=1$，$Y_{2}=0$，$Y_{1}=0$，$Y_{0}=0$，且 $C_{0}=1$。\n\n阶段 $i=0$ (LSB)：$X_{0}=A_{0}=1$，$Y_{0}=\\overline{B_{0}}=0$，$C_{0}=1$。\n$$\nS_{0}=1\\oplus 0\\oplus 1=0,\\qquad C_{1}=1\\cdot 0+1\\cdot(1\\oplus 0)=0+1=1.\n$$\n\n阶段 $i=1$：$X_{1}=A_{1}=0$，$Y_{1}=\\overline{B_{1}}=0$，$C_{1}=1$。\n$$\nS_{1}=0\\oplus 0\\oplus 1=1,\\qquad C_{2}=0\\cdot 0+1\\cdot(0\\oplus 0)=0+0=0.\n$$\n\n阶段 $i=2$：$X_{2}=A_{2}=1$，$Y_{2}=\\overline{B_{2}}=0$，$C_{2}=0$。\n$$\nS_{2}=1\\oplus 0\\oplus 0=1,\\qquad C_{3}=1\\cdot 0+0\\cdot(1\\oplus 0)=0+0=0.\n$$\n\n阶段 $i=3$ (MSB)：$X_{3}=A_{3}=0$，$Y_{3}=\\overline{B_{3}}=1$，$C_{3}=0$。\n$$\nS_{3}=0\\oplus 1\\oplus 0=1,\\qquad C_{4}=0\\cdot 1+0\\cdot(0\\oplus 1)=0+0=0.\n$$\n\n按要求的顺序 $(S_{0},C_{1},S_{1},C_{2},S_{2},C_{3},S_{3},C_{4})$ 收集结果，得到\n$$\n(0,1,1,0,1,0,1,0).\n$$\n这对应于4位二进制补码结果 $S_{3}S_{2}S_{1}S_{0}=1110_2$，其中 $C_{4}=0$。该结果为 $-2$，与 $5-7$ 的结果相符。", "answer": "$$\\boxed{\\begin{pmatrix}0 & 1 & 1 & 0 & 1 & 0 & 1 & 0\\end{pmatrix}}$$", "id": "1915331"}, {"introduction": "计算的最终结果不仅仅是一个数值，电路产生的状态标志位也提供了关键的上下文信息。本练习聚焦于减法器的一个关键输出——最终进位 $C_{4}$。通过分析这个比特位的状态，你将学会它在无符号数减法中如何充当“借位”标志，从而直接判断操作数 $A$ 和 $B$ 之间的大小关系 [@problem_id:1915353]。", "problem": "一个数字电路被设计用于执行两个4位无符号二进制数 $A$ 和 $B$ 的减法运算 $A - B$。该减法是通过一个4位并行加法器来实现的，该加法器计算和 $S = A + (\\text{2's complement of } B)$。这种硬件实现通过将 $A$ 的各位输入到加法器的第一组输入端，将 $B$ 的反码（即 $B$ 的1的补码）输入到第二组输入端，并将加法器的初始进位 $C_{in}$ 设置为1来计算 $A - B$。加法器随后产生一个4位的和 $S_3S_2S_1S_0$ 和一个最终的进位输出位 $C_4$。\n\n考虑输入为 $A = 1001_2$ 和 $B = 1100_2$ 的特定情况。加法器产生的最终进位输出位 $C_4$ 的值是多少？这个值对于原始数字 $A$ 和 $B$ 的大小关系意味着什么？\n\nA. $C_4 = 0$，这表示 $A \\geq B$ 且结果 $S$ 是真实的正数量值。\n\nB. $C_4 = 0$，这表示 $A < B$ 且结果 $S$ 是一个负数，以补码形式表示。\n\nC. $C_4 = 1$，这表示 $A \\geq B$ 且结果 $S$ 是真实的正数量值。\n\nD. $C_4 = 1$，这表示 $A < B$ 且结果 $S$ 是一个负数，以补码形式表示。\n\nE. $C_4 = 1$，这表示运算过程中发生了算术溢出。", "solution": "4位减法 $A - B$ 是通过一个并行加法器计算 $S = A + \\overline{B} + 1$ 来实现的，其中 $\\overline{B}$ 是 $B$ 的反码，初始进位是 $c_{0}=1$。对于 $A=1001_{2}$ 和 $B=1100_{2}$，我们有 $\\overline{B}=0011_{2}$。\n\n对每一位 $i \\in \\{0,1,2,3\\}$ 使用全加器的关系式：\n- 和：$s_{i} = a_{i} \\oplus \\overline{b_{i}} \\oplus c_{i}$，\n- 进位：$c_{i+1} = a_{i}\\overline{b_{i}} + \\overline{b_{i}}c_{i} + a_{i}c_{i}$，\n其中 $c_{0}=1$。\n\n第0位：$a_{0}=1$，$\\overline{b_{0}}=1$，$c_{0}=1$。\n$$s_{0} = 1 \\oplus 1 \\oplus 1 = 1, \\quad c_{1} = 1\\cdot 1 + 1\\cdot 1 + 1\\cdot 1 = 1.$$\n\n第1位：$a_{1}=0$，$\\overline{b_{1}}=1$，$c_{1}=1$。\n$$s_{1} = 0 \\oplus 1 \\oplus 1 = 0, \\quad c_{2} = 0\\cdot 1 + 1\\cdot 1 + 0\\cdot 1 = 1.$$\n\n第2位：$a_{2}=0$，$\\overline{b_{2}}=0$，$c_{2}=1$。\n$$s_{2} = 0 \\oplus 0 \\oplus 1 = 1, \\quad c_{3} = 0\\cdot 0 + 0\\cdot 1 + 0\\cdot 1 = 0.$$\n\n第3位：$a_{3}=1$，$\\overline{b_{3}}=0$，$c_{3}=0$。\n$$s_{3} = 1 \\oplus 0 \\oplus 0 = 1, \\quad c_{4} = 1\\cdot 0 + 0\\cdot 0 + 1\\cdot 0 = 0.$$\n\n因此 $S = s_{3}s_{2}s_{1}s_{0} = 1101_{2}$ 且最终的进位输出是 $C_{4}=c_{4}=0$。在这个针对无符号数的减法方案中，$C_{4}=1$ 表示 $A \\geq B$（无借位），而 $C_{4}=0$ 表示 $A < B$（发生借位），此时 $S$ 代表一个以补码形式表示的负数结果。由于此处 $C_{4}=0$，这表示 $A < B$ 并且 $S$ 是以补码形式表示的负数（实际上，$1101_{2}$ 代表 $-3$，与 $9-12$ 的结果一致）。", "answer": "$$\\boxed{B}$$", "id": "1915353"}]}
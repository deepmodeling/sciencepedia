{"hands_on_practices": [{"introduction": "掌握了全减器的布尔表达式后，下一个关键步骤就是将其转化为实际的逻辑电路。此练习将挑战你仅使用一种基本逻辑门——2输入与非门（NAND）——来构建一个功能完备的全减器。通过这个实践，你不仅能加深对全减器逻辑的理解，还能锻炼如何利用通用逻辑门进行高效电路设计的能力。[@problem_id:1939071]", "problem": "全减器是一种基本的组合逻辑电路，用于执行三个比特的减法。它有三个输入：一个被减数位 $A$、一个减数位 $B$ 以及一个来自前一个较低有效位的借位输入位 $B_{in}$。它产生两个输出：差值位 $D$ 和一个向下一个较高有效位的借位输出位 $B_{out}$。其关系由算术运算 $A - B - B_{in}$ 决定，结果是一个由数对 ($B_{out}$, $D$) 表示的两位数。例如，如果 $A=0$，$B=1$ 且 $B_{in}=1$，那么 $0 - 1 - 1 = -2$，在这种二进制表示法中即为 $B_{out}=1$ 和 $D=0$。\n\n你的任务是设计一个仅使用双输入与非门来实现全减器的电路。假设你可以无限量地使用这些门电路。请确定从输入 $A$、$B$ 和 $B_{in}$ 正确生成差值位 $D$ 和借位输出位 $B_{out}$ 来构建全减器电路所需的最少双输入与非门数量。", "solution": "我们寻求一个仅使用双输入与非门实现全减器的方法，其输入为 $A$、$B$、$B_{in}$，输出为 $D$ 和 $B_{out}$。其算术关系为 $A - B - B_{in}$，得到差值位 $D$ 和借位输出位 $B_{out}$。\n\n首先，写出规范布尔形式：\n- 差值位是三个输入的奇校验：\n$$\nD \\;=\\; A \\oplus B \\oplus B_{in}.\n$$\n- 一个标准的、最小化的借位表达式是\n$$\nB_{out} \\;=\\; \\bar{A}B \\;+\\; B_{in}\\,\\overline{A \\oplus B}.\n$$\n为了高效地使用与非门实现，我们将先计算一次 $X_{1}=A \\oplus B$，并复用其内部的与非门信号，只需一个额外的与非门即可实现 $B_{out}$。\n\n使用最小的4个与非门结构来实现 $X_{1}=A \\oplus B$。定义中间的与非门节点：\n$$\nN_{1}=\\overline{AB},\\quad N_{2}=\\overline{A N_{1}},\\quad N_{3}=\\overline{B N_{1}},\\quad X_{1}=\\overline{N_{2}N_{3}}.\n$$\n可以通过布尔代数验证 $N_{2}=\\overline{A\\cdot\\overline{AB}}=\\overline{A(\\bar{A}+\\bar{B})}= \\bar{A}+B$ 和 $N_{3}=A+\\bar{B}$，以及 $X_{1}=A \\oplus B$ 符合要求。\n\n接下来，使用相同的4个与非门模式计算 $D=X_{1}\\oplus B_{in}$，引入中间节点：\n$$\nS_{1}=\\overline{X_{1}B_{in}},\\quad S_{2}=\\overline{X_{1}S_{1}},\\quad S_{3}=\\overline{B_{in}S_{1}},\\quad D=\\overline{S_{2}S_{3}}.\n$$\n根据同样的推理， $D=X_{1}\\oplus B_{in}=A\\oplus B\\oplus B_{in}$。\n\n现在使用已有的与非门节点来表示 $B_{out}$。从第一个异或模块中，我们有 $N_{3}=A+\\bar{B}$，所以 $\\overline{N_{3}}=\\bar{A}B$。从第二个异或模块中，\n$$\nS_{3}=\\overline{B_{in}\\,S_{1}}=\\overline{B_{in}\\,\\overline{X_{1}B_{in}}}=\\overline{B_{in}\\,(\\overline{X_{1}}\\,+\\,\\overline{B_{in}})}=\\overline{B_{in}\\,\\overline{X_{1}}} \\;=\\; \\overline{B_{in}\\,\\overline{A\\oplus B}}.\n$$\n因此 $\\overline{S_{3}}=B_{in}\\,\\overline{A\\oplus B}$。利用这两个事实，\n$$\nB_{out}\\;=\\;\\bar{A}B\\;+\\;B_{in}\\,\\overline{A\\oplus B}\\;=\\;\\overline{N_{3}}\\;+\\;\\overline{S_{3}}\\;=\\;\\overline{N_{3}\\,S_{3}}.\n$$\n因此，$B_{out}$ 是通过一个以 $N_{3}$ 和 $S_{3}$ 为输入的最后一个双输入与非门得到的。\n\n门电路数量统计：\n- $X_{1}=A\\oplus B$ 使用 $4$ 个与非门。\n- $D=X_{1}\\oplus B_{in}$ 使用 $4$ 个与非门。\n- $B_{out}=\\overline{N_{3}S_{3}}$ 使用 $1$ 个额外的与非门，复用了来自两个异或网络的 $N_{3}$ 和 $S_{3}$。\n\n双输入与非门的总数是 $4+4+1=9$ 个。\n一个下界论证是：一个双输入异或门至少需要 $4$ 个双输入与非门，因此计算 $D=(A\\oplus B)\\oplus B_{in}$ 至少需要 $8$ 个与非门。由于 $B_{out}$ 不恒等于这两个异或网络中的任何一个中间节点，因此至少还需要一个双输入与非门来构成它。因此，$9$ 是最小值，并且上述构造实现了这个最小值。", "answer": "$$\\boxed{9}$$", "id": "1939071"}, {"introduction": "单个全减器是构建多位减法器的基础。将它们串联起来形成一个行波借位减法器后，电路的整体性能，特别是运算速度，就成了设计的核心考量。这个练习将引导你分析决定减法器最长延迟路径的关键条件，即借位信号在何种输入下会“传播”过所有级，这对于理解和优化时序性能至关重要。[@problem_id:1939084]", "problem": "在数字逻辑设计中，一个$n$位行波借位减法器由$n$个全减器级联构成。单个全减器级（索引为$i$）有三个输入：被减数位$A_i$、减数位$B_i$以及来自前一级的借入位$B_{in,i}$。它产生两个输出：差值位$D_i$和借出位$B_{out,i}$，后者作为下一级的借入位，即$B_{in,i+1} = B_{out,i}$。对于整个$n$位运算，被减数为$A = A_{n-1}A_{n-2}...A_0$，减数为$B = B_{n-1}B_{n-2}...B_0$，且最低有效位级（第0级）的初始借入位$B_{in,0}$保持为0。\n\n这种减法器的整体速度受限于借位信号在级联电路中的传播。计算最终借出位$B_{out,n-1}$的最坏情况延迟场景发生在借位信号必须顺序地通过最大数量的级。当每一级$i$（从$i=0$到$n-1$）的借出位都直接依赖于其借入位$B_{in,i}$时，就形成了这条最长传播路径。\n\n对于所有的$n$级，被减数$A$和减数$B$之间的下列哪种关系能确保满足这种最坏情况传播条件？\n\nA. $A$和$B$的各位相同，即对于所有的$i \\in \\{0, ..., n-1\\}$，$A_i = B_i$。\nB. $A$的各位是$B$的各位的逻辑反，即对于所有的$i \\in \\{0, ..., n-1\\}$，$A_i = \\bar{B_i}$。\nC. 被减数$A$为零（所有$i$的$A_i=0$），减数$B$为最大无符号值（所有$i$的$B_i=1$）。\nD. 被减数$A$是减数$B$的补码。", "solution": "为解决此问题，我们必须首先确定单个全减器级$i$的借出信号$B_{out,i}$的逻辑表达式。如果$A_i - B_i - B_{in,i}$的值为负，则借出位置为1（等于1）。这在以下条件下发生：\n1.  $A_i=0, B_i=0, B_{in,i}=1$\n2.  $A_i=0, B_i=1, B_{in,i}=0$\n3.  $A_i=0, B_i=1, B_{in,i}=1$\n4.  $A_i=1, B_i=1, B_{in,i}=1$\n\n根据这些条件，我们可以写出$B_{out,i}$的积之和表达式：\n$$B_{out,i} = \\bar{A_i}\\bar{B_i}B_{in,i} + \\bar{A_i}B_i\\overline{B_{in,i}} + \\bar{A_i}B_iB_{in,i} + A_iB_iB_{in,i}$$\n\n这个表达式可以被简化。让我们将包含$B_{in,i}$的项组合在一起：\n$$B_{out,i} = \\bar{A_i}B_i\\overline{B_{in,i}} + (\\bar{A_i}\\bar{B_i} + \\bar{A_i}B_i + A_iB_i)B_{in,i}$$\n简化$B_{in,i}$的系数：\n$$(\\bar{A_i}\\bar{B_i} + \\bar{A_i}B_i + A_iB_i) = (\\bar{A_i}(\\bar{B_i} + B_i) + A_iB_i) = (\\bar{A_i} \\cdot 1 + A_iB_i) = \\bar{A_i} + A_iB_i$$\n使用吸收律$X+ \\bar{X}Y = X+Y$，我们得到$\\bar{A_i} + B_i$。\n所以$B_{out,i}$的表达式是：\n$$B_{out,i} = \\bar{A_i}B_i\\overline{B_{in,i}} + (\\bar{A_i} + B_i)B_{in,i}$$\n这种形式不是标准的。一种更具洞察力的形式是“产生-传播”模型。让我们重新推导它。初始表达式为 $B_{out,i} = \\bar{A_i}\\bar{B_i}B_{in,i} + \\bar{A_i}B_i\\overline{B_{in,i}} + \\bar{A_i}B_iB_{in,i} + A_iB_iB_{in,i}$。\n让我们通过合并项来简化：\n$$B_{out,i} = \\bar{A_i}B_i(\\overline{B_{in,i}} + B_{in,i}) + \\bar{A_i}\\bar{B_i}B_{in,i} + A_iB_iB_{in,i}$$\n$$B_{out,i} = \\bar{A_i}B_i + (\\bar{A_i}\\bar{B_i} + A_iB_i)B_{in,i}$$\n项$\\bar{A_i}\\bar{B_i} + A_iB_i$是同或门（XNOR）的逻辑表达式，即异或门（XOR）的非：$\\overline{A_i \\oplus B_i}$。\n因此，我们可以将借出方程写成：\n$$B_{out,i} = \\bar{A_i}B_i + \\overline{(A_i \\oplus B_i)}B_{in,i}$$\n\n这个方程是标准的产生-传播形式，$B_{out,i} = g_i + p_i B_{in,i}$，其中：\n-   $g_i = \\bar{A_i}B_i$是“借位产生”项。如果$g_i=1$，则该级内部会产生一个借出，而不管借入如何。这种情况发生在$A_i=0$和$B_i=1$时。\n-   $p_i = \\overline{A_i \\oplus B_i}$是“借位传播”项。如果$p_i=1$，借出位$B_{out,i}$将等于借入位$B_{in,i}$（假设$g_i=0$）。这种情况发生在$A_i=B_i$时。\n\n问题指出，最坏情况延迟发生在每一级的借出位$B_{out,i}$都依赖于其借入位$B_{in,i}$时。要使$B_{out,i}$依赖于$B_{in,i}$，电路必须处于“传播”模式。这意味着传播项$p_i$必须为1，而产生项$g_i$必须为0（否则，如果$g_i=1$，那么$B_{out,i}=1$，与$B_{in,i}$无关）。\n\n让我们分析这些条件：\n1.  我们需要该级进行传播，所以$p_i = 1$。\n    $$p_i = \\overline{A_i \\oplus B_i} = 1 \\implies A_i \\oplus B_i = 0$$\n    这仅在$A_i = B_i$时成立。\n\n2.  我们需要该级本身不产生借位，所以$g_i = 0$。\n    $$g_i = \\bar{A_i}B_i = 0$$\n    这个条件排除了$(A_i, B_i) = (0, 1)$的情况。\n\n现在，让我们看看第一个条件（$A_i=B_i$）是否足以满足这两个要求。\n如果$A_i=B_i$，那么数对$(A_i, B_i)$有两种可能：$(0,0)$或$(1,1)$。\n-   如果$(A_i, B_i) = (0,0)$：$p_i = \\overline{0 \\oplus 0} = 1$。产生项为$g_i = \\bar{0} \\cdot 0 = 0$。\n-   如果$(A_i, B_i) = (1,1)$：$p_i = \\overline{1 \\oplus 1} = 1$。产生项为$g_i = \\bar{1} \\cdot 1 = 0$。\n\n在$A_i=B_i$的两种情况下，我们都得到$p_i=1$和$g_i=0$。\n将这些代入借位方程：\n$$B_{out,i} = g_i + p_i B_{in,i} = 0 + 1 \\cdot B_{in,i} = B_{in,i}$$\n这表明，如果$A_i=B_i$，该级的借出位与其借入位相同。这就是借位传播的定义。\n\n题目要求这个条件对行波借位减法器的所有$n$级（从$i=0$到$i=n-1$）都成立，以创建最长的传播链。因此，关系必须是：\n$$A_i = B_i \\text{ for all } i \\in \\{0, ..., n-1\\}$$\n这意味着$n$位数$A$必须与$n$位数$B$完全相同。这对应于选项A。", "answer": "$$\\boxed{A}$$", "id": "1939084"}, {"introduction": "在现实世界中，数字芯片可能会因制造缺陷而出现故障。作为设计师或测试工程师，定位和诊断这些问题是一项核心技能。本练习提供了一个假设场景：一个全减器的某个输入被“固定”为逻辑‘1’。你的任务是像侦探一样，通过逻辑分析，找出哪些特定的输入组合会因为这个故障而导致错误的输出结果，从而掌握数字电路故障分析的基本方法。[@problem_id:1939103]", "problem": "数字全减器是一种组合逻辑电路，它执行三个输入位的二进制减法：被减数 $A$、减数 $B$ 以及来自前级的输入借位 $B_{in}$。该电路产生两个输出：差值位 $D$ 和输出借位 $B_{out}$，后者代表向下一个更高有效位的借位。\n\n考虑一个有制造缺陷的特定全减器集成电路。该缺陷导致减数 $B$ 的输入线“固定为1”（stuck-at-1）。这意味着，无论施加到 $B$ 的外部引脚上的实际逻辑电平是多少，连接到此输入的内部电路总是如同输入 $B$ 是逻辑“1”一样运行。输入 $A$ 和 $B_{in}$ 功能正常。\n\n找出所有可能的输入组合 $(A, B, B_{in})$ 的完整集合，在这些组合下，这个故障减法器将为 `Difference` 输出 $D$ 产生不正确的值。\n\nA. (0,0,0), (0,0,1), (1,0,0), (1,0,1)\nB. (0,1,0), (0,1,1), (1,1,0), (1,1,1)\nC. (0,0,1), (0,1,0), (1,0,0), (1,1,1)\nD. (0,0,0), (0,1,1), (1,0,1), (1,1,0)\nE. (0,0,0), (0,1,0), (1,0,0), (1,1,0)", "solution": "一个全减器的差值输出由其三个输入的异或（XOR）运算给出：\n$$D_{\\text{ideal}}=A \\oplus B \\oplus B_{in}.$$\n由于存在“$B$ 固定为1”的缺陷，内部电路总是视 $B=1$，因此故障时的差值为\n$$D_{\\text{faulty}}=A \\oplus 1 \\oplus B_{in}.$$\n为了找出输出不正确的情况，我们计算故障输出和理想输出的异或：\n$$E = D_{\\text{faulty}} \\oplus D_{\\text{ideal}} = (A \\oplus 1 \\oplus B_{in}) \\oplus (A \\oplus B \\oplus B_{in}).$$\n使用结合律、交换律和抵消性质 $X \\oplus X = 0$，我们得到\n$$E = (A \\oplus A) \\oplus (B_{in} \\oplus B_{in}) \\oplus 1 \\oplus B = 0 \\oplus 0 \\oplus 1 \\oplus B = 1 \\oplus B.$$\n当 $E=1$ 时，输出不正确，这发生在 $B=0$ 的时候。因此，所有 $B=0$ 的输入组合都会产生不正确的差值：\n$$(A,B,B_{in}) \\in \\{(0,0,0),(0,0,1),(1,0,0),(1,0,1)\\}.$$\n这对应于选项A。", "answer": "$$\\boxed{A}$$", "id": "1939103"}]}
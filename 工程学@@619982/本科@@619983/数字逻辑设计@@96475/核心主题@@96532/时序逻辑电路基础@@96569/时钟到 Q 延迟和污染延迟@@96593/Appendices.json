{"hands_on_practices": [{"introduction": "理论知识最终要与物理现实相结合。本练习将抽象的时钟-Q污染延迟（$t_{ccq}$）概念与一个具体的实验测量场景联系起来。通过分析一个假设的示波器读数，您将学习如何从时序波形中识别和计算 $t_{ccq}$，从而巩固您对其基本定义的理解。[@problem_id:1921462]", "problem": "一位数字系统工程师正在表征一个定制设计的上升沿触发D型触发器的时序参数。数据输入端D保持在稳定的逻辑'1'状态，而触发器的输出端Q初始处于逻辑'0'状态。工程师使用一台高精度示波器，记录了围绕时钟信号CLK单个上升沿的事件时序。\n\n测量结果如下：\n- CLK信号的上升沿精确地发生在时间 $t_{clk} = 12.350$ 纳秒 (ns)。\n- 在时钟沿之后，输出Q开始从逻辑'0'向逻辑'1'转换。该转换开始的瞬间（即输出不再保证为其旧值）测量为 $t_{start} = 12.485$ ns。\n- 输出Q测量到在时间 $t_{stable} = 12.710$ ns 时完全建立并稳定在新的逻辑'1'状态。\n\n根据这些实验测量结果，确定该触发器的时钟到Q端污染延迟 ($t_{ccq}$)。请以皮秒 (ps) 为单位表示你的答案。", "solution": "时钟到Q端的污染延迟定义为：在有效时钟沿之后，输出$Q$可能开始偏离其先前值的最早时间。因此：\n$$t_{ccq} = t_{start} - t_{clk}$$\n使用测量得到的时间：\n$$t_{ccq} = 12.485\\,\\text{ns} - 12.350\\,\\text{ns} = 0.135\\,\\text{ns}$$\n使用 $1\\,\\text{ns} = 10^3\\,\\text{ps}$ 将纳秒转换为皮秒：\n$$t_{ccq} = 0.135\\,\\text{ns} \\times \\frac{10^3\\,\\text{ps}}{1\\,\\text{ns}} = 135\\,\\text{ps}$$", "answer": "$$\\boxed{135}$$", "id": "1921462"}, {"introduction": "在数字电路设计中，污染延迟不仅是一个理论参数，更是确保电路稳定运行的关键。本练习展示了当数据路径的污染延迟不足时，尤其是在存在时钟偏斜（clock skew）的情况下，如何导致保持时间违规（hold time violation）。您将通过计算修复该违规所需的精确延迟量，来实践数字电路设计中一项被称为“保持时间修复”的常见任务。[@problem_id:1921485]", "problem": "在设计高速数字信号处理流水线时，一条关键的数据路径由源寄存器 `Reg_A` 和目标寄存器 `Reg_B` 组成，二者之间由一个组合逻辑块隔开。两个寄存器都是由同一系统时钟驱动的上升沿触发D型触发器。由于芯片上的物理布局，两个寄存器之间存在时钟偏斜。时钟信号到达 `Reg_B` 的时间晚于其到达 `Reg_A` 的时间。\n\n这些组件的时序特性规定如下：\n- 从时钟沿到 `Reg_A` 输出变为有效所需的最小时间（其污染时钟到Q端延迟）为 $t_{cd,cq} = 75$ ps。\n- 在时钟沿之后，数据必须在 `Reg_B` 输入端保持稳定的最短时间（其保持时间）为 $t_{h} = 180$ ps。\n- 通过组合逻辑块的最小传播延迟（其污染延迟）为 $t_{cd,logic} = 50$ ps。\n- 时钟偏斜，定义为时钟信号到达 `Reg_B` 相对于 `Reg_A` 的延迟，为 $t_{skew} = 25$ ps。\n\n为确保电路可靠运行并避免保持时间违例，必须在组合逻辑路径中插入一组非反相缓冲门以增加延迟。计算这些缓冲器必须引入的最小总延迟。请以皮秒（ps）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "我们分析在存在正时钟偏斜（时钟晚到 `Reg_B` $t_{skew}$）的情况下，发送寄存器 `Reg_A` 和捕获寄存器 `Reg_B` 之间的保持时间要求。为满足保持时间约束，新数据在 `Reg_B` 输入端 $D$ 引起变化的最早时间，不得早于 `Reg_A` 时钟沿之后的 $t_{skew} + t_h$。\n\n`Reg_B` 输入端的最早变化时间，是从 `Reg_A` 接收到时钟沿开始，经过最小污染路径延迟后发生的：\n$$\nt_{\\text{earliest at B.D}} = t_{cd,cq} + t_{cd,logic} + t_{buf},\n$$\n其中，$t_{buf}$ 是待确定的总附加缓冲器延迟（污染延迟）。\n\n因此，保持约束为：\n$$\nt_{cd,cq} + t_{cd,logic} + t_{buf} \\geq t_{skew} + t_{h}\n$$\n求解所需的缓冲器延迟：\n$$\nt_{buf} \\geq (t_{skew} + t_{h}) - (t_{cd,cq} + t_{cd,logic})\n$$\n\n代入以皮秒为单位的给定值：\n$$\nt_{buf} \\geq (180 + 25) - (75 + 50) = 205 - 125 = 80\n$$\n因此，所需的最小总缓冲器延迟为 $80\\,\\text{ps}$。根据题目要求四舍五入到三位有效数字，结果为 $80.0$。", "answer": "$$\\boxed{80.0}$$", "id": "1921485"}, {"introduction": "一个完整的数字系统能运行多快，取决于其最关键的时序路径。这个综合性练习融合了所有核心时序概念：传播延迟（$t_{pcq}$）、污染延迟（$t_{ccq}$）、建立时间（$t_{setup}$）和保持时间（$t_{hold}$）。通过分析一个带反馈的多级流水线电路，您将在确保最快路径不会过快（满足保持时间）的同时，通过最慢路径（满足建立时间）来确定电路的最高工作频率。[@problem_id:1921488]", "problem": "正在设计一个定制数字信号处理器 (DSP) 芯片中的专用处理单元。该单元的核心由一个带反馈回路的两级同步流水线组成。第一级是一个触发器 FF1，第二级是一个触发器 FF2。FF1 的输出连接到组合逻辑块 Logic1 的输入，Logic1 的输出再馈入 FF2 的输入。FF2 的输出连接到第二个组合逻辑块 Logic2 的输入，Logic2 的输出又反馈回 FF1 的输入，从而形成闭环。\n\n所有触发器均为相同的上升沿触发 D 型触发器，具有以下时序特性：\n- 建立时间，$t_{setup} = 60 \\text{ ps}$\n- 保持时间，$t_{hold} = 35 \\text{ ps}$\n- 传播延迟 (时钟到 Q 输出)，$t_{pcq} = 80 \\text{ ps}$\n- 污染延迟 (时钟到 Q 输出)，$t_{ccq} = 45 \\text{ ps}$\n\n两个组合逻辑块具有以下延迟特性：\n- 逻辑块 1 (位于 FF1 和 FF2 之间)：\n  - 最大传播延迟，$t_{comb1,max} = 350 \\text{ ps}$\n  - 最小污染延迟，$t_{comb1,min} = 150 \\text{ ps}$\n- 逻辑块 2 (位于 FF2 和 FF1 之间)：\n  - 最大传播延迟，$t_{comb2,max} = 200 \\text{ ps}$\n  - 最小污染延迟，$t_{comb2,min} = 120 \\text{ ps}$\n\n为确保可靠运行，电路时序必须满足所有路径上的建立时间和保持时间约束。计算该电路的最大可能时钟频率。以吉赫兹 (GHz) 为单位表示答案，并四舍五入到三位有效数字。", "solution": "我们分析两个寄存器到寄存器路径的同步时序约束，并从最严格的建立时间约束中确定最大时钟频率，同时确保保持时间约束得到满足。所有触发器都相同，并由同一个时钟上升沿触发，且未指定时钟偏斜，因此我们假设时钟偏斜为零。\n\n对于从发射触发器到捕获触发器的路径，建立时间约束为：\n$$\nT \\geq t_{pcq} + t_{comb,\\max} + t_{setup}\n$$\n保持时间约束为：\n$$\nt_{ccq} + t_{comb,\\min} \\geq t_{hold}\n$$\n\n有两条路径：\n\n1) 路径 FF1 → Logic1 → FF2：\n- 建立时间约束：\n$$\nT \\geq t_{pcq} + t_{comb1,\\max} + t_{setup} = 80\\,\\text{ps} + 350\\,\\text{ps} + 60\\,\\text{ps} = 490\\,\\text{ps}\n$$\n- 保持时间约束：\n$$\nt_{ccq} + t_{comb1,\\min} = 45\\,\\text{ps} + 150\\,\\text{ps} = 195\\,\\text{ps} \\geq 35\\,\\text{ps}\n$$\n该约束得到满足。\n\n2) 路径 FF2 → Logic2 → FF1：\n- 建立时间约束：\n$$\nT \\geq t_{pcq} + t_{comb2,\\max} + t_{setup} = 80\\,\\text{ps} + 200\\,\\text{ps} + 60\\,\\text{ps} = 340\\,\\text{ps}\n$$\n- 保持时间约束：\n$$\nt_{ccq} + t_{comb2,\\min} = 45\\,\\text{ps} + 120\\,\\text{ps} = 165\\,\\text{ps} \\geq 35\\,\\text{ps}\n$$\n该约束得到满足。\n\n所需的最小时钟周期是所有路径建立时间约束中的最大值：\n$$\nT_{\\min} = \\max\\{490\\,\\text{ps},\\,340\\,\\text{ps}\\} = 490\\,\\text{ps}\n$$\n因此，最大时钟频率为：\n$$\nf_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{490\\,\\text{ps}} = \\frac{10^{12}}{490}\\,\\text{Hz} \\approx 2.04\\,\\text{GHz}\n$$\n以吉赫兹为单位并四舍五入到三位有效数字，结果为 $2.04$。", "answer": "$$\\boxed{2.04}$$", "id": "1921488"}]}
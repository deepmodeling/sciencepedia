{"hands_on_practices": [{"introduction": "理解电平触发和边沿触发行为之间的区别至关重要。这个练习题将通过追踪在相同输入下 D 锁存器和 D 触发器的输出，让你直观地看到这一差异。掌握这种时序图分析是预测和调试任何时序电路行为的一项基本技能。[@problem_id:1944295]", "problem": "在一个数字逻辑电路中，您正在分析两种基本的时序存储元件：一个上升沿触发的D触发器和一个高电平敏感的D锁存器。触发器的输出表示为$Q_F$，锁存器的输出表示为$Q_L$。两个器件共享相同的数据输入$D$和时钟输入$CLK$。\n\n假设在时间$t=0$时，两个输出$Q_F$和$Q_L$都处于初始低电平状态（逻辑0）。在整个$0 \\leq t < 12$的时间区间内（以任意时间单位计），输入信号$D$和$CLK$的行为如下所述。逻辑信号值为1时被认为是‘高’，值为0时被认为是‘低’。\n\n时钟信号$CLK(t)$是周期性的，其波形如下：\n- 在$0 \\leq t < 2$、$4 \\leq t < 6$和$8 \\leq t < 10$期间，$CLK$为低电平。\n- 在$2 \\leq t < 4$、$6 \\leq t < 8$和$10 \\leq t < 12$期间，$CLK$为高电平。\n\n数据信号$D(t)$的波形如下：\n- 在$0 \\leq t < 3$期间，$D$为高电平。\n- 在$3 \\leq t < 5$期间，$D$为低电平。\n- 在$5 \\leq t < 7$期间，$D$为高电平。\n- 在$7 \\leq t < 9$期间，$D$为低电平。\n- 在$9 \\leq t < 11$期间，$D$为高电平。\n- 在$11 \\leq t < 12$期间，$D$为低电平。\n\n根据这些信息，选择能正确描述两个输出$Q_F(t)$和$Q_L(t)$在区间$0 \\leq t < 12$内行为的选项。\n\nA. 在$0 \\leq t < 2$期间，$Q_F$为低电平，在$2 \\leq t < 12$期间为高电平。在$0 \\leq t < 2$期间，$Q_L$为低电平，在$2 \\leq t < 12$期间为高电平。\n\nB. 在整个区间$0 \\leq t < 12$内，$Q_F$为低电平。在区间$2 \\leq t < 3$、$6 \\leq t < 7$和$10 \\leq t < 11$内，$Q_L$为高电平，其余时间为低电平。\n\nC. 在$0 \\leq t < 2$期间，$Q_F$为低电平，在$2 \\leq t < 12$期间为高电平。在区间$2 \\leq t < 3$、$6 \\leq t < 7$和$10 \\leq t < 11$内，$Q_L$为高电平，其余时间为低电平。\n\nD. 在$0 \\leq t < 2$期间，$Q_L$为低电平，在$2 \\leq t < 12$期间为高电平。在区间$2 \\leq t < 3$、$6 \\leq t < 7$和$10 \\leq t < 11$内，$Q_F$为高电平，其余时间为低电平。", "solution": "要解决这个问题，我们必须根据提供的时钟（$CLK$）和数据（$D$）输入波形，分别分析上升沿触发的D触发器和高电平敏感的D锁存器的行为。两个输出$Q_F$和$Q_L$初始都为低电平（0）。\n\n**上升沿触发D触发器（$Q_F$）的分析**\n\n一个上升沿触发的D触发器仅在时钟信号$CLK$从低电平转换到高电平（即上升沿）的瞬间，将其输出$Q_F$更新为数据输入$D$的值。在所有其他时间，其输出保持不变。\n\n首先，我们确定$CLK$信号的上升沿发生的时间。根据描述，上升沿发生在$t=2$、$t=6$和$t=10$。\n\n让我们按时间顺序分析$Q_F$的状态：\n- **初始状态：** 在$0 \\leq t < 2$期间，$Q_F$处于其初始低电平状态。$Q_F = 0$。\n- **在$t=2$时（第一个上升沿）：** 我们检查此刻$D$的值。在区间$0 \\leq t < 3$内，$D$为高电平（1）。因此，在$t=2$时，$D=1$。触发器的输出$Q_F$更新以匹配$D$，所以$Q_F$变为高电平（1）。\n- **区间$2 \\leq t < 6$：** 在$t=2$的上升沿之后，$Q_F$会保持其值 1 直到下一个上升沿。在此期间$D$的变化不会影响$Q_F$。所以，$Q_F = 1$。\n- **在$t=6$时（第二个上升沿）：** 我们检查在$t=6$时$D$的值。在区间$5 \\leq t < 7$内，$D$为高电平（1）。因此，在$t=6$时，$D=1$。输出$Q_F$更新以匹配$D$。由于$Q_F$已经是 1，它保持为 1。\n- **区间$6 \\leq t < 10$：** $Q_F$会保持其值 1 直到下一个上升沿。所以，$Q_F = 1$。\n- **在$t=10$时（第三个上升沿）：** 我们检查在$t=10$时$D$的值。在区间$9 \\leq t < 11$内，$D$为高电平（1）。因此，在$t=10$时，$D=1$。输出$Q_F$更新以匹配$D$并保持为 1。\n- **区间$10 \\leq t < 12$：** $Q_F$保持其值 1。所以，$Q_F = 1$。\n\n**$Q_F$的总结**：输出$Q_F$在区间$0 \\leq t < 2$内为低电平，并在$t=2$时变为高电平。然后在观察区间的剩余时间内保持高电平，即在$2 \\leq t < 12$内。\n\n**高电平敏感D锁存器（$Q_L$）的分析**\n\n一个高电平敏感的D锁存器有两种工作模式：\n1.  **透明模式：** 当$CLK$为高电平时，锁存器是“透明的”，意味着其输出$Q_L$会持续跟随数据输入$D$。所以，$Q_L(t) = D(t)$。\n2.  **保持模式：** 当$CLK$为低电平时，锁存器是“关闭的”，并保持在$CLK$信号从高电平变为低电平之前$D$的最后一个值。\n\n让我们按时间顺序分析$Q_L$的状态：\n- **区间$0 \\leq t < 2$：** $CLK$为低电平。锁存器处于保持模式。它保持其初始值，即低电平（0）。所以，$Q_L = 0$。\n- **区间$2 \\leq t < 4$：** $CLK$为高电平。锁存器是透明的。$Q_L$跟随$D$。\n    - 在$2 \\leq t < 3$期间，$D$为高电平。因此，$Q_L = 1$。\n    - 在$3 \\leq t < 4$期间，$D$为低电平。因此，$Q_L = 0$。\n- **区间$4 \\leq t < 6$：** $CLK$为低电平。锁存器在$t=4$时进入保持模式。它保持$t=4$之前的最后一个$Q_L$值。在$t \\to 4^-$时，$Q_L$为 0。所以，在此区间内，$Q_L = 0$。\n- **区间$6 \\leq t < 8$：** $CLK$为高电平。锁存器再次变得透明。$Q_L$跟随$D$。\n    - 在$6 \\leq t < 7$期间，$D$为高电平。因此，$Q_L = 1$。\n    - 在$7 \\leq t < 8$期间，$D$为低电平。因此，$Q_L = 0$。\n- **区间$8 \\leq t < 10$：** $CLK$为低电平。锁存器保持$t \\to 8^-$时的值，即 0。所以，$Q_L = 0$。\n- **区间$10 \\leq t < 12$：** $CLK$为高电平。锁存器是透明的。$Q_L$跟随$D$。\n    - 在$10 \\leq t < 11$期间，$D$为高电平。因此，$Q_L = 1$。\n    - 在$11 \\leq t < 12$期间，$D$为低电平。因此，$Q_L = 0$。\n\n**$Q_L$的总结**：输出$Q_L$仅在$CLK$为高电平 *且* $D$为高电平时才为高电平。这发生在区间$2 \\leq t < 3$、$6 \\leq t < 7$和$10 \\leq t < 11$。在区间$0 \\leq t < 12$内的所有其他时间，$Q_L$均为低电平。\n\n**结论**\n\n将我们推导出的波形与选项进行比较：\n- 在$0 \\leq t < 2$期间，$Q_F$为低电平，在$2 \\leq t < 12$期间为高电平。\n- 在区间$2 \\leq t < 3$、$6 \\leq t < 7$和$10 \\leq t < 11$内，$Q_L$为高电平，其余时间为低电平。\n\n这与选项C中的描述相匹配。", "answer": "$$\\boxed{C}$$", "id": "1944295"}, {"introduction": "除了基本操作，理解某些设计选择背后的原因也很重要。本练习探讨了 SR 锁存器的一个经典局限性——未定义状态，并将其与 JK 触发器通过切换功能提供的优雅解决方案进行对比。通过分析“禁用”输入条件 $S=R=1$ 和对应的 $J=K=1$ 切换输入，你将深入了解存储元件向更稳健、更通用方向演进的设计思路。[@problem_id:1944250]", "problem": "在数字逻辑设计中，理解时序电路在不同输入条件下的行为至关重要。考虑两种常见的存储元件：一个门控置位-复位（SR）锁存器和一个上升沿触发的JK触发器。\n\n门控SR锁存器是电平触发的。其输出仅当时钟输入CLK为逻辑1时才可能改变。其行为由输入$S$（置位）和$R$（复位）定义。\nJK触发器是上升沿触发的。其输出仅当时钟输入CLK从逻辑0变为逻辑1的瞬间才可能改变。其行为由输入$J$和$K$定义。\n\n两个器件都被初始化到复位状态，即其主输出Q为逻辑0。然后，它们都接收到同一个时钟脉冲。该脉冲从逻辑0开始，上升到逻辑1，在逻辑1上保持一个持续时间$T_{pulse}$，然后回落到逻辑0。\n\n在整个过程中，SR锁存器的输入保持在$S=1$和$R=1$。同时，JK触发器的输入保持在$J=1$和$K=1$。\n\n下列哪个陈述准确地描述了时钟脉冲结束后，SR锁存器输出$Q_{SR}$的行为以及JK触发器输出$Q_{JK}$的最终状态？\n\nA. $Q_{SR}$在时钟为高电平时稳定地转换为1。最终状态为$Q_{JK} = 1$。\n\nB. $Q_{SR}$在时钟为高电平时稳定地转换为0。最终状态为$Q_{JK} = 0$。\n\nC. $Q_{SR}$在时钟下降沿进入不稳定的竞争状态，使其最终状态不可预测。最终状态为$Q_{JK} = 1$。\n\nD. $Q_{SR}$在时钟下降沿进入不稳定的竞争状态，使其最终状态不可预测。最终状态为$Q_{JK} = 0$。\n\nE. $Q_{SR}$在时钟为高电平时稳定地转换为1。最终状态为$Q_{JK} = 0$。", "solution": "给定两个时序器件，初始条件为$Q_{SR}=0$和$Q_{JK}=0$，以及一个从逻辑$0$上升到逻辑$1$，在高电平保持一个持续时间$T_{pulse}$，然后回落到逻辑$0$的单时钟脉冲。在整个脉冲期间，SR锁存器的输入为$S=1$和$R=1$，JK触发器的输入为$J=1$和$K=1$。\n\n对于门控SR锁存器：\n- 该器件是电平触发的，因此其内部锁存器仅在$CLK=1$时被使能。当其被使能时，施加$S=1$和$R=1$的输入，会使锁存器进入高电平有效SR锁存器的禁用状态。这会同时使交叉耦合对的置位和复位有效，在$CLK=1$期间将两个内部节点驱动到一种非互补状态。这不是一个有效的存储状态。\n- 当时钟从$1$下降到$0$时，门控电路会同时禁用$S$和$R$（两个有效输入在同一瞬间变为$0$）。在此下降沿，内部的交叉耦合对从强制状态中释放出来，由于置位和复位的对称同时撤销，两个交叉耦合的门之间会发生竞争。因此，下降沿之后的最终锁存状态是不可预测的，并取决于内部的偏斜和延迟。因此，$Q_{SR}$在时钟的下降沿进入不稳定的竞争状态，使其最终状态不确定。\n\n对于上升沿触发的JK触发器：\n- 该器件仅在$CLK$的上升沿瞬间改变输出。当$J=1$和$K=1$时，其特性行为是在上升沿翻转。因此，在上升沿，\n$$\nQ_{JK}(t_{r}^{+})=\\overline{Q_{JK}(t_{r}^{-})}=1,\n$$\n因为$Q_{JK}$被初始化为$0$。对于上升沿触发的触发器，其输出在边沿之间和下降沿时不会改变。因此，在脉冲完成后，最终状态为$Q_{JK}=1$。\n\n综合两个结果，正确的描述是SR锁存器在下降沿进入不稳定的竞争状态（最终状态不可预测），而JK触发器最终处于$Q_{JK}=1$。", "answer": "$$\\boxed{C}$$", "id": "1944250"}, {"introduction": "在这个问题中，锁存器和触发器的理论知识将与工程实践相结合。你将扮演数字设计师的角色，诊断并解决一个真实的电路时序问题——保持时间违规。这项关于建立时间和保持时间，并考虑了时钟偏斜的定量分析，展示了在高性能同步系统中选择触发器还是锁存器所带来的关键影响。[@problem_id:1944249]", "problem": "一个同步数字电路由一个发送寄存器 REG1 和一个接收寄存器 REG2 组成，它们通过一个组合逻辑块相连。两个寄存器都由同一信号 `CLK` 驱动时钟，其周期为 $T_{clk} = 10.0 \\text{ ns}$，占空比为 50%。\n\n各器件的时序参数如下：\n- REG1（上升沿触发的 D 触发器）：\n  - 最小时钟到 Q 端延迟，$t_{c-q(min)} = 0.8 \\text{ ns}$。\n- 组合逻辑：\n  - 最小传播延迟，$t_{comb(min)} = 0.5 \\text{ ns}$。\n- 时钟偏斜 ($t_{skew} = t_{clk\\_at\\_REG2} - t_{clk\\_at\\_REG1}$)：\n  - $t_{skew} = -0.5 \\text{ ns}$（时钟沿到达 REG2 的时间比到达 REG1 的时间早）。\n\n**A 部分：** 最初，REG2 是一个与 REG1 相同的上升沿触发的 D 触发器。其保持时间要求为 $t_{hold,FF} = 2.0 \\text{ ns}$。在 REG2 的输入端检测到保持时间违例。为了解决这个问题，需要在组合逻辑路径中插入延迟缓冲器。计算这些缓冲器必须引入的最小总延迟 $t_{buffer}$ 以解决保持时间违例。\n\n**B 部分：** 现在，考虑一个设计修改，其中触发器 REG2 被一个高电平有效（高电平透明）的 D 锁存器 L2 替代。该锁存器的保持时间要求为 $t_{hold,L} = 1.2 \\text{ ns}$，这是相对于时钟 `CLK` 的*下降沿*定义的。对于这种新配置（REG1 -> 逻辑 -> L2），计算 L2 输入端的保持时间裕量。保持时间裕量定义为实际数据到达间隔与锁存沿处所需数据间隔之间的差值。正裕量表示满足保持时间约束。\n\n请将 $t_{buffer}$（来自 A 部分）和保持时间裕量（来自 B 部分）的答案以行矩阵中的一对值的形式给出。两个值都以纳秒为单位，并四舍五入到两位有效数字。", "solution": "对于从一个发送上升沿触发的触发器 (REG1) 到一个接收元件的同步路径，其保持时间约束使用最小延迟和捕获元件的时钟沿时间。当时钟偏斜定义为 $t_{\\text{skew}} = t_{\\text{clk at REG2}} - t_{\\text{clk at REG1}}$ 时，接收触发器的保持条件为：\n$$\nt_{\\text{c-q(min)}} + t_{\\text{comb(min)}} + t_{\\text{buffer}} \\geq t_{\\text{hold,FF}} + t_{\\text{skew}}.\n$$\n将 A 部分给定的值代入，我们有 $t_{\\text{c-q(min)}} = 0.8 \\text{ ns}$，$t_{\\text{comb(min)}} = 0.5 \\text{ ns}$，$t_{\\text{hold,FF}} = 2.0 \\text{ ns}$，$t_{\\text{skew}} = -0.5 \\text{ ns}$。将其代入不等式得到：\n$$\n0.8 + 0.5 + t_{\\text{buffer}} \\geq 2.0 - 0.5 \\;\\Rightarrow\\; 1.3 + t_{\\text{buffer}} \\geq 1.5 \\;\\Rightarrow\\; t_{\\text{buffer}} \\geq 0.2.\n$$\n因此，为解决保持时间违例而插入的最小总缓冲延迟为 $t_{\\text{buffer}} = 0.20 \\text{ ns}$（四舍五入到两位有效数字）。\n\n对于 B 部分，REG2 被一个高电平有效的锁存器 L2 替换，其保持时间是相对于其时钟的下降沿来定义的。在占空比为 $50\\%$、周期为 $T_{\\text{clk}} = 10.0 \\text{ ns}$ 的情况下，高电平持续时间为 $T_{\\text{clk}}/2 = 5.0 \\text{ ns}$。由于时钟偏斜为 $t_{\\text{skew}} = -0.5 \\text{ ns}$，相对于 REG1 在 $t=0$ 时的发送沿，L2 处的上升沿（即透明阶段的开始）发生在时间 $t = t_{\\text{skew}} = -0.5 \\text{ ns}$ 处，而 L2 处的下降沿（锁存器关闭）发生在：\n$$\nt_{\\text{fall,L2}} = t_{\\text{skew}} + \\frac{T_{\\text{clk}}}{2} = -0.5 + 5.0 = 4.5 \\text{ ns}.\n$$\n由 REG1 在 $t=0$ 时发送的最早数据到达 L2 的时间为：\n$$\nt_{\\text{arr,min}} = t_{\\text{c-q(min)}} + t_{\\text{comb(min)}} = 0.8 + 0.5 = 1.3 \\text{ ns},\n$$\n这个时间点在 $t_{\\text{fall,L2}}$ 之前，因此不影响下降沿之后的保持区间。L2 输入端的下一个数据转换来自于在 $t = T_{\\text{clk}}$ 时的下一次发送，到达时间为：\n$$\nt_{\\text{next,min}} = T_{\\text{clk}} + t_{\\text{c-q(min)}} + t_{\\text{comb(min)}} = 10.0 + 1.3 = 11.3 \\text{ ns}.\n$$\n因此，L2 下降沿与第一个后续数据转换之间的实际间隔是：\n$$\n\\Delta t_{\\text{actual}} = t_{\\text{next,min}} - t_{\\text{fall,L2}} = 11.3 - 4.5 = 6.8 \\text{ ns}.\n$$\n所需的间隔是锁存器保持时间 $t_{\\text{hold,L}} = 1.2 \\text{ ns}$。因此，保持时间裕量为：\n$$\n\\text{margin} = \\Delta t_{\\text{actual}} - t_{\\text{hold,L}} = 6.8 - 1.2 = 5.6 \\text{ ns}.\n$$\n将两个结果四舍五入到两位有效数字，得到 $t_{\\text{buffer}} = 0.20$ 和保持时间裕量 $= 5.6$，单位为纳秒。", "answer": "$$\\boxed{\\begin{pmatrix}0.20 & 5.6\\end{pmatrix}}$$", "id": "1944249"}]}
{"hands_on_practices": [{"introduction": "理解时序电路的最佳方式之一是逐步追踪其状态变化。本次练习将带领你分析一个门控SR锁存器的基本行为，通过一个简单的输入序列来巩固你对“置位”（Set）和“保持”（Hold）功能的理解，并特别关注使能（Enable）信号在控制锁存器状态改变中的关键作用。这个练习 [@problem_id:1968364] 是掌握门控SR锁存器工作原理的坚实第一步。", "problem": "门控置位-复位（SR）锁存器是一种基本的时序逻辑电路。本题中的版本由四个双输入与非门构成。电路的输入为 $S$（置位）、$R$（复位）和 $E$（使能）。输出为 $Q$ 及其互补输出 $\\bar{Q}$。\n\n电路的配置如下：\n1.  第一个与非门接收输入 $S$ 和 $E$。其输出指定为 $S'$。\n2.  第二个与非门接收输入 $R$ 和 $E$。其输出指定为 $R'$。\n3.  第三个与非门（“输出”门）接收输入 $S'$ 和 $\\bar{Q}$。其输出为 $Q$。\n4.  第四个与非门（“反馈”门）接收输入 $R'$ 和 $Q$。其输出为 $\\bar{Q}$。\n\n最初，锁存器处于稳定状态，其输出 $Q=0$。然后施加一个输入信号序列。第一个输入向量为 $(S, R, E) = (1, 0, 1)$。锁存器稳定后，输入向量立即变为 $(S, R, E) = (0, 1, 0)$。\n\n确定在这一完整操作序列之后，输出 $Q$ 的最终状态。\n\n从以下选项中选择正确的选项：\nA. 0\nB. 1\nC. 状态变为无效（即 $Q = \\bar{Q}$）。\nD. 状态无限振荡。", "solution": "我们用布尔关系 $\\operatorname{NAND}(a,b)=\\overline{a \\cdot b}$ 来对每个与非门建模。根据给定的互连方式，锁存器方程为\n$$\nS'=\\overline{S \\cdot E}, \\quad R'=\\overline{R \\cdot E}, \\quad Q=\\overline{S' \\cdot \\bar{Q}}, \\quad \\bar{Q}=\\overline{R' \\cdot Q}.\n$$\n最初，锁存器稳定在 $Q=0$ 和 $\\bar{Q}=1$。\n\n第一个输入向量 $(S,R,E)=(1,0,1)$：\n$$\nS'=\\overline{1 \\cdot 1}=\\overline{1}=0, \\quad R'=\\overline{0 \\cdot 1}=\\overline{0}=1.\n$$\n然后输出解析为\n$$\nQ=\\overline{S' \\cdot \\bar{Q}}=\\overline{0 \\cdot \\bar{Q}}=\\overline{0}=1, \\quad \\bar{Q}=\\overline{R' \\cdot Q}=\\overline{1 \\cdot 1}=\\overline{1}=0.\n$$\n因此，在第一个向量作用下稳定后，锁存器被置位：$Q=1$，$\\bar{Q}=0$。\n\n第二个输入向量 $(S,R,E)=(0,1,0)$：\n$$\nS'=\\overline{0 \\cdot 0}=\\overline{0}=1, \\quad R'=\\overline{1 \\cdot 0}=\\overline{0}=1.\n$$\n当 $S'=R'=1$ 时，交叉耦合的与非门锁存器处于保持模式：\n$$\nQ=\\overline{1 \\cdot \\bar{Q}}=\\overline{\\bar{Q}}, \\quad \\bar{Q}=\\overline{1 \\cdot Q}=\\overline{Q},\n$$\n这会保持先前建立的状态。由于在此变化之前我们有 $Q=1$，最终状态保持为 $Q=1$。\n\n因此，正确选项是 B。", "answer": "$$\\boxed{B}$$", "id": "1968364"}, {"introduction": "在掌握了基本操作之后，我们来探讨一个关键的边界情况。本次练习 [@problem_id:1968343] 将门控SR锁存器置于一个更实际的电机控制应用场景中，研究当“置位”和“复位”输入被同时激活时——即所谓的“禁用”状态——会发生什么。通过这个例子，你将认识到为什么在实际系统的设计中，对输入信号的精确管理至关重要。", "problem": "一个数字逻辑电路被用来控制工业传送带的高扭矩电机。该控制系统基于一个门控置位-复位（SR）锁存器。该锁存器由四个标准的双输入与非门构成。\n\n该系统有三个输入：\n1.  一个`START`按钮，对应于锁存器的`S`输入。按下时，`S`为逻辑`1`；否则为`0`。\n2.  一个`STOP`按钮，对应于锁存器的`R`输入。按下时，`R`为逻辑`1`；否则为`0`。\n3.  一个`MASTER_ENABLE`开关，对应于锁存器的`E`（使能）输入。打开时，`E`为逻辑`1`；关闭时为`0`。\n\n锁存器的主输出`Q`控制电机的电源继电器。`Q`为逻辑`1`时电机开启，为逻辑`0`时电机关闭。电路的设计使得当`MASTER_ENABLE`关闭（`E=0`）时，无论`START`或`STOP`按钮是否被按下，锁存器都保持其最后的状态。当`MASTER_ENABLE`开启（`E=1`）时，按钮控制电机。\n\n初始状态下，电机关闭（`Q=0`），`MASTER_ENABLE`开关开启（`E=1`）。然后，一个操作员同时按下了`START`和`STOP`两个按钮。请确定在这一瞬间输出`Q`的逻辑状态。你的答案应该是逻辑电平，即`0`或`1`。", "solution": "一个由四个双输入与非门实现的门控SR锁存器，使用其中两个与非门通过使能信号对输入进行门控，另外两个交叉耦合的与非门构成锁存器。将与非（NAND）运算表示为合取（conjunction）的逻辑补：对于输入$a$和$b$，与非输出为$\\overline{ab}$。\n\n设输入门控与非门的输出为\n$$\nX=\\overline{S E}, \\quad Y=\\overline{R E}.\n$$\n这些输出馈入交叉耦合的与非锁存器，其方程为\n$$\nQ=\\overline{X \\cdot \\overline{Q}}, \\quad \\overline{Q}=\\overline{Y \\cdot Q}.\n$$\n题目说明$E=1$，且两个按钮同时被按下，所以$S=1$且$R=1$。代入门控级可得\n$$\nX=\\overline{1\\cdot 1}=0, \\quad Y=\\overline{1\\cdot 1}=0.\n$$\n将$X=0$和$Y=0$代入锁存器方程：\n$$\nQ=\\overline{0\\cdot \\overline{Q}}=\\overline{0}=1, \\quad \\overline{Q}=\\overline{0\\cdot Q}=\\overline{0}=1.\n$$\n因此，在$E=1$的情况下同时置位$S$和$R$时，两个锁存器输出都被驱动为高电平。尽管这对SR锁存器来说是无效状态（因为$Q$和$\\overline{Q}$相等），但问题要求的是$Q$在这一瞬间的逻辑状态，即$Q=1$。初始条件$Q=0$被覆盖，因为两个锁存器输入都被强制为低电平，通过与非逻辑直接将输出驱动为高电平，而与之前的状态无关。", "answer": "$$\\boxed{1}$$", "id": "1968343"}, {"introduction": "现在，让我们从理想的逻辑模型转向电路运行的物理现实。最后的这个练习 [@problem_id:1968400] 引入了建立时间 ($t_{su}$) 和保持时间 ($t_h$) 等关键的时序参数。通过分析一个违反保持时间的具体案例，你将学习到亚稳态（metastability）的概念，并理解为何精确的时序控制对于可靠的数据锁存是不可或缺的。", "problem": "一位工程师正在分析一个关键的数据锁存电路，该电路由一个门控置位-复位（SR）锁存器构成。该锁存器由一个高电平有效的使能信号 `E` 控制。当 `E` 为高电平（`1`）时，该锁存器是透明的，这意味着其输出 `Q` 根据标准SR锁存器的真值表跟随输入变化。当 `E` 从高电平变为低电平（一个下降沿）时，锁存器会存储当前状态，并且对 `S` 和 `R` 的进一步变化不敏感。在 `E` 为高电平期间，保证不会出现 `S=R=1` 的禁止输入条件。\n\n该锁存器具有以下时序规格：\n- 从输入到输出的传播延迟， $t_{pd}$: 2 ns\n- 建立时间， $t_{su}$: 3 ns (在 `E` 的下降沿*之前*，`S` 和 `R` 输入必须保持稳定的最短时间)\n- 保持时间， $t_h$: 5 ns (在 `E` 的下降沿*之后*，`S` 和 `R` 输入必须保持稳定的最短时间)\n\n电路被初始化，使得在时间 $t < 0$ 时，输出 `Q` 为 `0`。输入信号 `E`、`S` 和 `R` 在 $t \\ge 0$ 时的行为如下：\n- 使能信号 `E` 是一个单脉冲，在 $t=10$ ns 时从 `0` 变为 `1`，并在 $t=30$ ns 时从 `1` 变回 `0`。\n- 复位输入 `R` 在所有时间内都保持为 `0`。\n- 置位输入 `S` 最初为 `0`。它在 $t=32$ ns 时从 `0` 变为 `1`，并此后保持为 `1`。\n\n基于这些信息，在 $t > 32$ ns 时，输出 `Q` 的行为是什么？\n\nA. `Q` 稳定保持在 `0`。\nB. `Q` 变为稳定在 `1`。\nC. `Q` 进入一个不可预测或亚稳态。\nD. `Q` 在 `0` 和 `1` 之间连续振荡。\nE. 锁存器从未被使能，因此 `Q` 的状态与其上电值相比没有变化。", "solution": "我们分析这个由高电平有效使能信号 $E$ 控制的门控SR锁存器。当 $E=1$ 时，锁存器是透明的，`Q` 跟随SR锁存器的行为；当 $E$ 从 `1` 下降到 `0` 时，锁存器存储下降沿时刻的状态，但这受建立时间和保持时间约束的限制。时序规格为：传播延迟 $t_{pd}=2\\,\\text{ns}$，建立时间 $t_{su}=3\\,\\text{ns}$，以及保持时间 $t_{h}=5\\,\\text{ns}$。输入为：对所有 $t$，$R=0$；$S=0$ 直到 $t=32\\,\\text{ns}$，之后对于 $t\\geq 32\\,\\text{ns}$，$S=1$。使能信号 $E$ 在区间 $(10\\,\\text{ns},30\\,\\text{ns})$ 上为高电平，并在 $t_{f}=30\\,\\text{ns}$ 时出现下降沿。初始条件为，对于 $t<0$，$Q=0$。\n\n当 $E=1$ 处于 $(10\\,\\text{ns},30\\,\\text{ns})$ 区间时，输入为 $(S,R)=(0,0)$。对于一个SR锁存器，$(S,R)=(0,0)$ 对应于保持条件，因此在 $Q$ 初始化为 `0` 的情况下，$Q$ 在透明期间保持为 `0`。传播延迟 $t_{pd}=2\\,\\text{ns}$ 不会改变这个定性结论，因为在透明窗口期间没有输入变化。\n\n在下降沿 $t=t_{f}=30\\,\\text{ns}$ 时，锁存器对输入进行采样并存储状态，前提是满足建立和保持时间约束。建立时间要求是 `S` 和 `R` 必须在下降沿前至少稳定 $t_{su}$，即，\n$$\n\\text{stability on }[t_{f}-t_{su},\\,t_{f})=[30\\,\\text{ns}-3\\,\\text{ns},\\,30\\,\\text{ns})=[27\\,\\text{ns},\\,30\\,\\text{ns}).\n$$\n由于在此整个区间内 $(S,R)=(0,0)$，因此满足建立时间条件。保持时间要求是 `S` 和 `R` 必须在下降沿后至少保持稳定 $t_h$，即，\n$$\n\\text{stability on }(t_{f},\\,t_{f}+t_{h}]=(30\\,\\text{ns},\\,30\\,\\text{ns}+5\\,\\text{ns}]=(30\\,\\text{ns},\\,35\\,\\text{ns}].\n$$\n然而，`S` 在以下时间发生变化\n$$\nt_{S\\_change}=32\\,\\text{ns},\n$$\n因此，从下降沿到 `S` 发生跳变的时间间隔为\n$$\nt_{S\\_change}-t_{f}=32\\,\\text{ns}-30\\,\\text{ns}=2\\,\\text{ns},\n$$\n这违反了保持时间要求，因为\n$$\n2\\,\\text{ns}<t_{h}=5\\,\\text{ns}.\n$$\n违反保持时间意味着在下降沿捕获的状态无法保证；在存储动作完成时，锁存器的内部节点可能会受到干扰。这可能导致不可预测的结果，包括潜在的亚稳态，即使在 $t_{f}$ 之后 `E` 为低电平。传播延迟 $t_{pd}=2\\,\\text{ns}$ 并不能消除此风险，因为保持时间规格已经考虑了为确保正确锁存所必需的边沿后输入稳定性。\n\n因此，对于 $t>32\\,\\text{ns}$，由于违反了保持时间，输出 `Q` 不能确定地保证保持为 `0` 或变为 `1`；它可能会进入一个不可预测或亚稳态。正确选项是C。", "answer": "$$\\boxed{C}$$", "id": "1968400"}]}
{"hands_on_practices": [{"introduction": "要真正掌握主从 SR 触发器，必须能够根据一段时间内的一系列输入来预测其输出。第一个实践练习正是要求你通过追踪输出波形来做到这一点。通过分析触发器在相对于时钟下降沿的特定时刻如何响应变化的 $S$ 和 $R$ 信号，你将为理解其基本的边沿触发操作打下坚实的基础 [@problem_id:1946068]。", "problem": "一个用于简化自动化过程的数字控制系统，使用单个下降沿触发的主从 SR 触发器来管理其状态。该触发器有输入 S (Set，置位) 和 R (Reset，复位)，一个时钟输入 CLK，以及一个输出 Q。下降沿触发的主从触发器的行为如下：主锁存器在 CLK 为高电平时捕获 S 和 R 输入的状态，而从锁存器仅在 CLK 从高电平转换到低电平的精确时刻，将其输出 Q 更新到与主锁存器状态一致。\n\n初始时，在时间 $t=0$，输出为低电平，即 $Q=0$。\n\n时钟信号 CLK 是一个周期为 20 纳秒 (ns) 且占空比为 50% 的周期性方波。时钟在 $t=0$ 时从低电平转换到高电平开始。\n\n控制信号 S 和 R 在 $t=0$ 到 $t=80$ ns 的时间区间内按如下方式施加：\n- 从 $t=0$ ns 到 $t=25$ ns: $S=1, R=0$。\n- 从 $t=25$ ns 到 $t=45$ ns: $S=0, R=0$。\n- 从 $t=45$ ns 到 $t=65$ ns: $S=0, R=1$。\n- 从 $t=65$ ns 到 $t=80$ ns: $S=0, R=0$。\n\n无效输入条件 ($S=1, R=1$) 从未被施加。\n\n以下哪个陈述正确地描述了输出 Q 在 $t=0$ 到 $t=80$ ns 时间区间内的行为？\n\nA. $Q$ 初始为 0。它在 $t=10$ ns 时转换到 1，在 $t=50$ ns 时转换回 0，并在区间的其余部分保持为 0。\n\nB. $Q$ 初始为 0。它在 $t=20$ ns 时转换到 1，在 $t=60$ ns 时转换回 0，并在区间的其余部分保持为 0。\n\nC. $Q$ 初始为 0。它在 $t=0$ ns 时立即转换到 1，在 $t=45$ ns 时转换回 0，并在区间的其余部分保持为 0。\n\nD. $Q$ 初始为 0。它在 $t=10$ ns 时转换到 1，在 $t=30$ ns 时转换回 0，并在区间的其余部分保持为 0。\n\nE. $Q$ 初始为 0。它在 $t=30$ ns 时转换到 1，在 $t=70$ ns 时转换回 0，并在区间的其余部分保持为 0。", "solution": "一个下降沿触发的主从 SR 触发器仅在时钟的下降沿更新 $Q$，并且在每个下降沿，从锁存器会复制主锁存器在时钟为高电平时建立的状态。时钟周期为 $20$ ns，占空比为 $50$%，且在 $t=0$ 时有一个上升沿，因此时钟在高电平的区间为 [0, 10) ns、[20, 30) ns、[40, 50) ns 以及 [60, 70) ns，而下降沿发生在 $t=10$ ns、$t=30$ ns、$t=50$ ns 以及 $t=70$ ns。\n\n在每个高电平区间：\n- 对于 $t \\in [0,10)$ ns，有 $S=1, R=0$，所以主锁存器被置位。在 $t=10$ ns 的下降沿，从锁存器更新到主锁存器的置位状态，因此 $Q$ 在 $t=10$ ns 时变为 $1$。\n- 对于 $t \\in [20,30)$ ns，在 [20, 25) ns 区间 $S=1, R=0$，在 [25, 30) ns 区间 $S=0, R=0$。主锁存器被 $S=1$ 置位，然后保持置位状态，所以在 $t=30$ ns 的下降沿，从锁存器将被置位；由于 $Q$ 已经是 $1$，在 $t=30$ ns 时没有发生转换。\n- 对于 $t \\in [40,50)$ ns，在 [40, 45) ns 区间 $S=0, R=0$，在 [45, 50) ns 区间 $S=0, R=1$。主锁存器被 $R=1$ 复位，所以在 $t=50$ ns 的下降沿，从锁存器更新为复位状态，并且 $Q$ 在 $t=50$ ns 时变为 $0$。\n- 对于 $t \\in [60,70)$ ns，在 [60, 65) ns 区间 $S=0, R=1$，在 [65, 70) ns 区间 $S=0, R=0$。主锁存器被复位，然后保持复位状态，所以在 $t=70$ ns 的下降沿，从锁存器保持复位状态；由于 $Q$ 已经是 $0$，没有发生转换。\n\n当 $Q$ 在 $t=0$ 时初始为 $0$ 时，仅有的转换是 $Q: 0 \\to 1$ 在 $t=10$ ns，以及 $Q: 1 \\to 0$ 在 $t=50$ ns。这与陈述 A 相符。", "answer": "$$\\boxed{A}$$", "id": "1946068"}, {"introduction": "理解了外部行为之后，现在让我们深入其内部一探究竟。本练习要求你在时钟转换发生前，在门级层面分析主从 SR 触发器的内部状态 [@problem_id:1946071]。通过计算每个内部节点的逻辑电平，你将具体地理解主级如何捕获输入并准备将其传输到从级，从而揭开“主从”机制的神秘面纱。", "problem": "一个下降沿触发的主从置位-复位（SR）触发器由如下所述的逻辑门构成。您的任务是分析其在特定时刻的内部状态。\n\n**电路描述：**\n该触发器的内部结构由一个主级、一个从级和一个时钟反相器组成。设门 G$i$ 的输出表示为 $y_i$。\n\n1.  **时钟反相器 (G_inv):** 一个反相器从主时钟信号 CLK 生成信号 $\\overline{\\text{CLK}}$。其输出表示为 $y_{inv}$。\n2.  **主级:** 该级由两个与门（G1，G2）和两个交叉耦合的或非门（G3，G4）组成。\n    *   G1：一个与门，输入为 S 和 CLK。其输出为 $y_1$。\n    *   G2：一个与门，输入为 R 和 CLK。其输出为 $y_2$。\n    *   G3：一个或非门，输入为 $y_1$ 和 $y_4$。其输出为 $y_3$。\n    *   G4：一个或非门，输入为 $y_2$ 和 $y_3$。其输出为 $y_4$。\n3.  **从级:** 该级由两个与门（G5，G6）和两个交叉耦合的或非门（G7，G8）组成。\n    *   G5：一个与门，输入为 $y_3$ 和 $\\overline{\\text{CLK}}$。其输出为 $y_5$。\n    *   G6：一个与门，输入为 $y_4$ 和 $\\overline{\\text{CLK}}$。其输出为 $y_6$。\n    *   G7：一个或非门，输入为 $y_5$ 和 $y_8$。其输出 $y_7$ 是触发器的最终输出 Q。\n    *   G8：一个或非门，输入为 $y_6$ 和 $y_7$。其输出 $y_8$ 是最终的互补输出 $\\overline{Q}$。\n\n**场景：**\n触发器最初处于稳定状态，其最终输出 $Q = 0$。外部控制输入 $S=1$ 和 $R=0$ 保持稳定的时间超过了器件所需的建立时间。时钟信号 CLK 长期处于逻辑高电平（1），并且即将发生高到低转换（下降沿）。\n\n**问题：**\n在 CLK 信号下降沿发生前恰好一个建立时间的瞬间，确定所有九个门（$y_1$ 到 $y_8$ 以及 $y_{inv}$）的输出逻辑电平（0 或 1）。您的答案应该是一个包含这九个值的向量，顺序为 $(y_1, y_2, y_3, y_4, y_5, y_6, y_7, y_8, y_{inv})$。从以下选项中选择正确的向量。\n\nA. (1, 0, 1, 0, 0, 0, 0, 1, 0)\n\nB. (1, 0, 0, 1, 0, 0, 0, 1, 0)\n\nC. (0, 0, 0, 1, 0, 1, 1, 0, 1)\n\nD. (1, 0, 0, 1, 0, 0, 1, 0, 0)\n\nE. (1, 0, 1, 0, 1, 0, 0, 1, 1)", "solution": "我们将所描述的主从SR触发器视为两个由时钟及其反相信号选通的电平敏感或非锁存器。我们写出每个门的布尔函数，并在指定的时间点进行求值：下降沿发生前一个建立时间，此时输入已稳定超过建立时间，且 $\\mathrm{CLK}=1$ 已长时间保持为高电平。\n\n已知：外部输入 $S=1$，$R=0$，$\\mathrm{CLK}=1$ (高电平)，且之前的最终输出为 $Q=0$ (即 $y_{7}=0$，$y_{8}=1$）。\n\n时钟反相器：$y_{\\mathrm{inv}}=\\overline{\\mathrm{CLK}}=\\overline{1}=0$。\n\n主级与门：\n- $y_{1}=S \\cdot \\mathrm{CLK}=1 \\cdot 1=1$，\n- $y_{2}=R \\cdot \\mathrm{CLK}=0 \\cdot 1=0$。\n\n主级交叉耦合或非门（使用或非门方程）：\n- $y_{3}=\\overline{y_{1}+y_{4}}$，\n- $y_{4}=\\overline{y_{2}+y_{3}}$。\n代入 $y_{1}=1$, $y_{2}=0$:\n- $y_{3}=\\overline{1+y_{4}}=\\overline{1}=0$，\n- $y_{4}=\\overline{0+y_{3}}=\\overline{0}=1$。\n\n从级与门，其中 $y_{\\mathrm{inv}}=0$：\n- $y_{5}=y_{3}\\cdot \\overline{\\mathrm{CLK}}=y_{3}\\cdot y_{\\mathrm{inv}}=0 \\cdot 0=0$，\n- $y_{6}=y_{4}\\cdot \\overline{\\mathrm{CLK}}=y_{4}\\cdot y_{\\mathrm{inv}}=1 \\cdot 0=0$。\n\n从级交叉耦合或非门：\n- $y_{7}=\\overline{y_{5}+y_{8}}=\\overline{0+y_{8}}=\\overline{y_{8}}$，\n- $y_{8}=\\overline{y_{6}+y_{7}}=\\overline{0+y_{7}}=\\overline{y_{7}}$。\n当锁存器的两个输入均为 0 时，锁存器保持其先前的状态。根据初始条件 $Q=0$，我们在此刻有 $y_{7}=0$ 和 $y_{8}=1$。\n\n将九个输出按顺序 $(y_{1},y_{2},y_{3},y_{4},y_{5},y_{6},y_{7},y_{8},y_{\\mathrm{inv}})$ 整理，得到 $(1,0,0,1,0,0,0,1,0)$，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1946071"}, {"introduction": "主从设计巧妙地解决了竞争冒险问题，但它也引入了一种被称为“捉1”（1s-catching）问题的微妙特性。这个问题通过在主锁存器透明期间引入一个瞬时噪声脉冲，来探讨这一特定行为 [@problem_id:1946058]。理解触发器如何对此类毛刺信号做出反应，对于认识其局限性以及理解更稳健的触发器设计为何被开发出来至关重要。", "problem": "主从置位-复位(SR)触发器是一种时序逻辑电路，旨在解决简单锁存器中存在的竞争冒险等问题。它由两个门控SR锁存器组成：“主锁存器”和“从锁存器”。当主锁存器在时钟信号(CLK)为高电平（逻辑1）时被使能，使其对外部S和R输入透明。当从锁存器在CLK信号为低电平（逻辑0）时被使能，使其对主锁存器的输出透明。主锁存器的输出，记为$Q_m$及其反相输出，分别直接连接到从锁存器的S和R输入。整个触发器的最终输出Q，是从锁存器的输出。\n\n考虑这样一个主从SR触发器。初始状态下，CLK为低电平，外部S和R输入均为低电平，最终输出Q稳定在逻辑0。\n\n施加一个完整的时钟脉冲。该脉冲以从低到高的跳变开始，保持高电平持续时间$T_{high}$，然后跳变回低电平。在CLK为高电平的区间，一个短暂的干扰噪声脉冲导致外部S输入瞬间变为高电平，然后返回低电平。该噪声脉冲的持续时间远小于$T_{high}$，但足以被主锁存器记录。在整个过程中，外部R输入始终保持低电平。\n\n在CLK信号完成其完整周期并返回到稳定的低电平状态后，主锁存器的输出$Q_m$和从锁存器的输出Q的最终稳定逻辑电平是什么？\n\n从以下选项中选择正确的最终状态对。\n\nA. $Q_m = 0$, $Q = 0$\n\nB. $Q_m = 1$, $Q = 0$\n\nC. $Q_m = 0$, $Q = 1$\n\nD. $Q_m = 1$, $Q = 1$\n\nE. 最终状态不确定，因为在时钟为高电平的整个持续时间内，S输入不是稳定的。", "solution": "我们利用门控SR锁存器的行为特性：当其使能输入被激活时，锁存器根据SR真值表跟随其S和R输入（$S=1, R=0$ 将 $Q$ 置为1；$S=0, R=1$ 将 $Q$ 复位为0；$S=0, R=0$ 保持当前状态；而 $S=1, R=1$ 为无效状态）。当其使能输入未被激活时，锁存器保持其前一状态。在一个具有非重叠门控的主从SR触发器中，主锁存器在时钟为高电平时被使能，从锁存器在时钟为低电平时被使能。从锁存器的输入由主锁存器的输出驱动：$S_{\\text{slave}}=Q_{m}$ 和 $R_{\\text{slave}}=\\overline{Q_{m}}$。\n\n初始状态下，时钟为低电平，外部输入为 $S=0$ 和 $R=0$，从锁存器输出为 $Q=0$。当时钟为低电平时，主锁存器被禁用（保持其先前状态），而从锁存器被使能并保持 $Q=0$，因为其来自主锁存器的输入不会强制产生无效状态，并且 $S=0, R=0$ 或 $S=0, R=1$ 都与 $Q=0$ 一致。\n\n当时钟跳变为高电平时，主锁存器被使能，并对外部输入透明。在高电平的大部分时间里，外部输入为 $S=0, R=0$，这将导致主锁存器保持其当前状态。在高电平期间，一个短暂的噪声脉冲使外部S变为1，而R保持为0。由于主锁存器被使能，应用 $S=1, R=0$ 的SR锁存器规则，主锁存器的输出被置为 $Q_{m}=1$。噪声脉冲结束后，外部输入返回到 $S=0, R=0$，由于主锁存器仍被使能，这导致主锁存器在高电平相位的剩余时间里保持其新设置的状态 $Q_{m}=1$。\n\n当时钟跳变为低电平时，主锁存器被禁用并保持 $Q_{m}=1$。同时，从锁存器被使能，并对主锁存器的输出透明。其输入为 $S_{\\text{slave}}=Q_{m}=1$ 和 $R_{\\text{slave}}=\\overline{Q_{m}}=0$。应用 $S=1, R=0$ 的SR锁存器规则，将从锁存器的输出置为 $Q=1$。在时钟回到稳定的低电平后，从锁存器保持使能状态，但由于输入为 $S_{\\text{slave}}=1, R_{\\text{slave}}=0$，它保持在置位状态 $Q=1$，而主锁存器保持锁存状态 $Q_{m}=1$。\n\n因此，在完整的时钟周期之后，最终的稳定逻辑电平是 $Q_{m}=1$ 和 $Q=1$，这对应于选项D。", "answer": "$$\\boxed{D}$$", "id": "1946058"}]}
{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。让我们从一个最基本但功能强大的电路开始：分频器。通过一个简单的负边沿触发D触发器，并将其反向输出 $\\bar{Q}$ 反馈到其数据输入 $D$，我们可以观察到时序逻辑的基本行为。这个练习将帮助你理解触发器如何在每个时钟边沿上更新其状态，以及这种周期性行为如何用于生成一个频率为输入时钟一半的新信号 [@problem_id:1952876]。", "problem": "一个数字电路由单个理想的下降沿触发 D 型触发器构成。该触发器有一个数据输入 (D)、一个时钟输入 (CLK)、一个标准输出 (Q) 和一个反相输出 ($\\bar{Q}$)。该电路的配置方式为：将反相输出 $\\bar{Q}$ 直接连接回数据输入 D。\n\n一个周期性方波信号被施加到 CLK 输入端。该时钟信号的频率恒为 $f_{CLK} = 150 \\text{ MHz}$。\n\n假设在时间 $t=0$ 时，即在时钟信号的第一个下降沿到达之前，输出 Q 处于逻辑低电平状态 (Q=0)。确定在输出 Q 上观测到的信号频率。\n\n以兆赫兹 (MHz) 为单位表示您的答案。", "solution": "一个下降沿触发的 D 触发器在时钟的每个下降沿，根据该沿到来之前数据输入 $D$ 上的值来更新其输出 $Q$：\n$$Q(t^{+})=D(t^{-})。$$\n对于给定的接线方式 $D=\\bar{Q}$，在每个下降沿我们有\n$$Q(t^{+})=\\bar{Q}(t^{-})，$$\n因此，该触发器在每个时钟下降沿翻转状态。\n\n设下降沿发生在时间 $t_{n}$，它们之间相隔一个时钟周期 $T_{CLK}$，其中\n$$T_{CLK}=\\frac{1}{f_{CLK}}。$$\n定义 $Q_{n}=Q(t_{n}^{-})$。更新规则变为\n$$Q_{n+1}=\\bar{Q}_{n}。$$\n因此，$Q$ 在每个下降沿改变状态，即每隔一个时间间隔 $T_{CLK}$ 改变一次。$Q$ 波形的一个完整周期需要两次翻转，所以输出周期为\n$$T_{Q}=2T_{CLK}。$$\n因此输出频率为\n$$f_{Q}=\\frac{1}{T_{Q}}=\\frac{1}{2T_{CLK}}=\\frac{f_{CLK}}{2}。$$\n当 $f_{CLK}=150\\ \\text{MHz}$ 时，\n$$f_{Q}=\\frac{150\\ \\text{MHz}}{2}=75\\ \\text{MHz}。$$\n由于要求的单位是兆赫兹，所以数值为 $75$。", "answer": "$$\\boxed{75}$$", "id": "1952876"}, {"introduction": "在掌握了单个触发器的行为之后，我们来探索如何将不同类型的触发器组合在一起。在这个练习中，一个正边沿触发的触发器和一个负边沿触发的触发器串联，构成一个两级数据采样器。这个场景模拟了数字系统中常见的数据流水线操作，让你能够亲手追踪数据在时钟的上升沿和下降沿是如何被“捕获”和“传递”的 [@problem_id:1952889]。", "problem": "一个最简数字数据采样器由两个D型触发器 FF1 和 FF2 串联而成。该电路由一个周期性时钟信号 `CLK` 驱动，并处理一个单数据输入流 `D_in`。\n\n具体的连接和属性如下：\n- FF1 是一个 **上升沿触发** 的D型触发器。其数据输入D连接到 `D_in`，其输出为 `Q1`。\n- FF2 是一个 **下降沿触发** 的D型触发器。其数据输入D连接到第一个触发器的输出 `Q1`，其输出为 `Q2`。\n\n时钟信号 `CLK` 的周期为10纳秒 (ns)。它初始处于逻辑0。在每个周期中，时钟在5 ns内处于逻辑1，在5 ns内处于逻辑0。第一次从0到1的跳变（上升沿）发生在时间 `t = 5` ns。\n\n数据输入 `D_in` 随时间变化的行为描述如下：\n- `D_in` 初始处于逻辑0。\n- 在 `t = 4` ns 时，`D_in` 从逻辑0跳变到逻辑1。\n- 在 `t = 13` ns 时，`D_in` 从逻辑1跳变到逻辑0。\n- 在 `t = 22` ns 时，`D_in` 从逻辑0跳变到逻辑1，并在余下的观测时间内保持为逻辑1。\n\n初始时，在时间 `t = 0`，两个触发器的输出 `Q1` 和 `Q2` 都处于逻辑0。假设触发器是理想的，意味着传播延迟、建立时间和保持时间都可以忽略不计。\n\n在时间点 `t = 10` ns、`t = 20` ns 和 `t = 30` ns 之后立即测量，输出对 `(Q1, Q2)` 的逻辑状态序列是什么？\n\nA. `(1, 0), (0, 1), (1, 0)`\n\nB. `(1, 1), (0, 0), (1, 1)`\n\nC. `(1, 1), (1, 1), (1, 1)`\n\nD. `(0, 0), (1, 1), (0, 0)`\n\nE. `(1, 0), (1, 0), (1, 0)`", "solution": "使用的原理：\n- 当传播延迟可忽略不计时，上升沿触发的D型触发器在每个时钟的上升沿采样其输入 $D$，并在该沿之后立即更新其输出 $Q$。\n- 当传播延迟可忽略不计时，下降沿触发的D型触发器在每个时钟的下降沿采样其输入 $D$，并在该沿之后立即更新其输出 $Q$。\n\n已知条件：\n- 时钟周期为 $10\\,\\text{ns}$，高电平持续 $5\\,\\text{ns}$，低电平持续 $5\\,\\text{ns}$。由于时钟初始为低电平，对于整数 $k\\geq 0$，上升沿发生在 $t=5+10k\\,\\text{ns}$，下降沿发生在 $t=10+10k\\,\\text{ns}$。\n- $D_{\\text{in}}$ 的跳变：在 $t=4\\,\\text{ns}$ 时 $0\\to 1$，在 $t=13\\,\\text{ns}$ 时 $1\\to 0$，在 $t=22\\,\\text{ns}$ 时 $0\\to 1$ 并此后保持为 $1$。\n- 初始条件在 $t=0$ 时：$Q_{1}=0$，$Q_{2}=0$。\n\n逐个边沿分析：\n1) 在 $t=5\\,\\text{ns}$（第一个上升沿），FF1 采样 $D_{\\text{in}}$。由于在 $t\\geq 4\\,\\text{ns}$ 至 $t=13\\,\\text{ns}$ 期间 $D_{\\text{in}}=1$，FF1 在 $t=5\\,\\text{ns}$ 后立即更新为 $Q_{1}=1$。FF2 在上升沿不发生变化，因此 $Q_{2}=0$。所以在 $t=5\\,\\text{ns}$ 之后：$(Q_{1},Q_{2})=(1,0)$。\n\n2) 在 $t=10\\,\\text{ns}$（第一个下降沿），FF2 采样 FF1 的输出。由于 FF1 仅在上升沿更新，并且其最后一次更新是在 $t=5\\,\\text{ns}$ 时变为 $Q_{1}=1$，且在 $t=10\\,\\text{ns}$ 之前没有其他上升沿，因此在 $t=10\\,\\text{ns}$ 时我们有 $Q_{1}=1$。所以 FF2 在 $t=10\\,\\text{ns}$ 后立即更新为 $Q_{2}=1$。因此，在 $t=10\\,\\text{ns}$ 后立即得到的输出对是 $(Q_{1},Q_{2})=(1,1)$。\n\n3) 在 $t=13\\,\\text{ns}$ 时，$D_{\\text{in}}$ 下降到 $0$。\n\n4) 在 $t=15\\,\\text{ns}$（第二个上升沿），FF1 采样到 $D_{\\text{in}}=0$ 并在 $t=15\\,\\text{ns}$ 后立即更新为 $Q_{1}=0$。在这一刻，$Q_{2}$ 仍保持为 $1$。\n\n5) 在 $t=20\\,\\text{ns}$（第二个下降沿），FF2 采样 $Q_{1}$。由于 $Q_{1}$ 在 $t=15\\,\\text{ns}$ 时被设为 $0$，并且在 $t=20\\,\\text{ns}$ 之前没有再次改变，FF2 在 $t=20\\,\\text{ns}$ 后立即更新为 $Q_{2}=0$。因此，在 $t=20\\,\\text{ns}$ 后立即得到的输出对是 $(Q_{1},Q_{2})=(0,0)$。\n\n6) 在 $t=22\\,\\text{ns}$ 时，$D_{\\text{in}}$ 上升到 $1$ 并此后保持为 $1$。\n\n7) 在 $t=25\\,\\text{ns}$（第三个上升沿），FF1 采样到 $D_{\\text{in}}=1$ 并在 $t=25\\,\\text{ns}$ 后立即更新为 $Q_{1}=1$。在这一刻，$Q_{2}$ 仍保持为 $0$。\n\n8) 在 $t=30\\,\\text{ns}$（第三个下降沿），FF2 采样到 $Q_{1}=1$ 并在 $t=30\\,\\text{ns}$ 后立即更新为 $Q_{2}=1$。因此，在 $t=30\\,\\text{ns}$ 后立即得到的输出对是 $(Q_{1},Q_{2})=(1,1)$。\n\n汇总在 $t=10\\,\\text{ns}$、$t=20\\,\\text{ns}$ 和 $t=30\\,\\text{ns}$ 之后立即获得的所需样本，得到 $(1,1)$、$(0,0)$、$(1,1)$，这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1952889"}, {"introduction": "现在，让我们将前面学到的知识应用到一个更复杂的系统中：一个4位移位寄存器，其独特之处在于它由正、负边沿触发的触发器交替构成。这个练习是对你分析能力的终极考验，要求你精确地追踪在两个完整时钟周期内，每一位数据的移动情况。通过解决这个问题，你将深刻体会到在复杂数字电路中，对时序和触发条件的精确控制是多么重要 [@problem_id:1952875]。", "problem": "一个4位同步移位寄存器由四个D型触发器构成，标记为 $FF_3, FF_2, FF_1, FF_0$，其对应输出分别为 $Q_3, Q_2, Q_1, Q_0$。该寄存器的4位状态由二进制数 $Q_3Q_2Q_1Q_0$ 表示，其中 $Q_3$ 是最高有效位 (MSB)。\n\n该寄存器被配置为右移。一个记为 $D_{in}$ 的串行输入连接到第一个触发器 ($D_3$) 的数据输入端。每个触发器的输出依次连接到下一个触发器的输入：$Q_3$ 连接到 $D_2$，$Q_2$ 连接到 $D_1$，$Q_1$ 连接到 $D_0$。\n\n一个单一的时钟信号被分配给所有触发器。与常规不同，这些触发器的触发边沿是交替的。触发器 $FF_3$ 和 $FF_1$ 是上升沿触发的，意味着它们在时钟信号的上升沿更新其状态。触发器 $FF_2$ 和 $FF_0$ 是下降沿触发的，意味着它们在时钟信号的下降沿更新其状态。\n\n在时间 $t=0$ 时，即第一个时钟脉冲到来之前，寄存器被初始化为状态 $1010$。在此后的所有时间里，串行输入 $D_{in}$ 恒定保持为逻辑高电平 (1)。\n\n确定在系统经历整整两个完整的时钟周期后，寄存器的二进制状态 $Q_3Q_2Q_1Q_0$。\n\nA. 1100\n\nB. 1111\n\nC. 0111\n\nD. 1110\n\nE. 1000", "solution": "我们遵循D型触发器的原理：在其触发时钟沿，每个触发器将其输出更新为紧邻该边沿之前其数据输入端的值。在此，$FF_{3}$ 和 $FF_{1}$ 是上升沿触发的；$FF_{2}$ 和 $FF_{0}$ 是下降沿触发的。连接关系为 $D_{3}=D_{in}$，$D_{2}=Q_{3}$，$D_{1}=Q_{2}$，以及 $D_{0}=Q_{1}$。就在第一个时钟沿之前的初始状态是 $Q_{3}Q_{2}Q_{1}Q_{0}=1010$，并且在所有时间内 $D_{in}=1$。\n\n初始状态（第一个上升沿之前）：$Q_{3}=1$, $Q_{2}=0$, $Q_{1}=1$, $Q_{0}=0$。因此 $D_{3}=1$, $D_{2}=1$, $D_{1}=0$, $D_{0}=1$。\n\n第一个上升沿之后（仅 $FF_{3}$ 和 $FF_{1}$ 更新）：\n$$Q_{3}\\leftarrow D_{3}=1,\\quad Q_{1}\\leftarrow D_{1}=Q_{2}=0,$$\n所以状态变为 $Q_{3}Q_{2}Q_{1}Q_{0}=1000$。\n\n根据此状态重新计算输入：$D_{3}=1$, $D_{2}=Q_{3}=1$, $D_{1}=Q_{2}=0$, $D_{0}=Q_{1}=0$。\n\n第一个下降沿之后（仅 $FF_{2}$ 和 $FF_{0}$ 更新）：\n$$Q_{2}\\leftarrow D_{2}=Q_{3}=1,\\quad Q_{0}\\leftarrow D_{0}=Q_{1}=0,$$\n所以状态变为 $Q_{3}Q_{2}Q_{1}Q_{0}=1100$。\n\n重新计算输入：$D_{3}=1$, $D_{2}=Q_{3}=1$, $D_{1}=Q_{2}=1$, $D_{0}=Q_{1}=0$。\n\n第二个上升沿之后（仅 $FF_{3}$ 和 $FF_{1}$ 更新）：\n$$Q_{3}\\leftarrow D_{3}=1,\\quad Q_{1}\\leftarrow D_{1}=Q_{2}=1,$$\n所以状态变为 $Q_{3}Q_{2}Q_{1}Q_{0}=1110$。\n\n重新计算输入：$D_{3}=1$, $D_{2}=Q_{3}=1$, $D_{1}=Q_{2}=1$, $D_{0}=Q_{1}=1$。\n\n第二个下降沿之后（仅 $FF_{2}$ 和 $FF_{0}$ 更新）：\n$$Q_{2}\\leftarrow D_{2}=Q_{3}=1,\\quad Q_{0}\\leftarrow D_{0}=Q_{1}=1,$$\n所以状态变为 $Q_{3}Q_{2}Q_{1}Q_{0}=1111$。\n\n因此，在整整两个完整的时钟周期后，寄存器的状态是 $1111$，这对应于选项B。", "answer": "$$\\boxed{B}$$", "id": "1952875"}]}
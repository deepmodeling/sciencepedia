{"hands_on_practices": [{"introduction": "本练习通过一个巧妙的思想实验，展示了锁存器透明性的一个直接且有趣的应用。通过将一个始终处于透明状态的 D 锁存器的反相输出（$\\bar{Q}$）连接到其数据输入（$D$），我们构建了一个简单的环形振荡器。这个实践旨在帮助你理解信号如何在反馈环路中传播，并让你亲手计算其振荡频率，从而直观地将锁存器的传播延迟 $t_{pd}$ 与宏观电路行为联系起来 [@problem_id:1943993]。", "problem": "一位数字电路设计师需要使用芯片上的一个备用元件来生成一个简单的时钟信号。该元件是一个电平敏感 D 锁存器。D 锁存器是一种数字逻辑电路，它有一个数据输入 ($D$)、一个使能输入 ($EN$)、一个主输出 ($Q$) 和一个反相输出 ($\\bar{Q}$)。当使能输入 $EN$ 保持高电平时，该锁存器被称为“透明”状态，其输出 $Q$ 会持续跟随数据输入 $D$ 的状态。当 $EN$ 为低电平时，锁存器会保持其最后的状态，忽略 $D$ 输入。\n\n为了创建一个振荡器，设计师将反相输出 $\\bar{Q}$ 直接接回到数据输入 $D$。使能输入 $EN$ 永久连接到高电平电压源，以确保锁存器始终处于透明状态。该锁存器的传播延迟，定义为 $D$ 输入的变化引起 $Q$ 和 $\\bar{Q}$ 输出相应变化所需的时间，给定为 $t_{pd} = 8.0$ 纳秒。\n\n假设电路通电并开始振荡，计算输出 $Q$ 处产生的方波信号的频率。将您的答案以兆赫兹 (MHz) 为单位表示，并四舍五入到三位有效数字。", "solution": "当使能端保持高电平时，D 锁存器处于透明状态，其行为如同一个带有传播延迟的同相缓冲器。这可以用以下关系式来建模：\n$$\nQ(t) = D(t - t_{pd}).\n$$\n在给定的接线方式中，数据输入由反相输出驱动，因此：\n$$\nD(t) = \\overline{Q(t)}.\n$$\n代入延迟关系式，得到延迟-反相方程：\n$$\nQ(t) = \\overline{Q(t - t_{pd})}.\n$$\n将此关系式应用两次，可得：\n$$\nQ(t) = \\overline{Q(t - t_{pd})} = \\overline{\\overline{Q(t - 2 t_{pd})}} = Q(t - 2 t_{pd}),\n$$\n这表明波形是周期性的，周期为：\n$$\nT = 2 t_{pd}.\n$$\n因此，振荡频率为：\n$$\nf = \\frac{1}{T} = \\frac{1}{2 t_{pd}}.\n$$\n当 $t_{pd} = 8.0 \\text{ ns} = 8.0 \\times 10^{-9} \\text{ s}$ 时，\n$$\nf = \\frac{1}{2 \\times 8.0 \\times 10^{-9}} = \\frac{1}{16.0 \\times 10^{-9}} = 0.0625 \\times 10^{9} \\text{ Hz} = 62.5 \\times 10^{6} \\text{ Hz}.\n$$\n以兆赫兹表示并四舍五入到三位有效数字，结果是 $62.5$。", "answer": "$$\\boxed{62.5}$$", "id": "1943993"}, {"introduction": "在数字电路中，组合逻辑的瞬态行为（如毛刺或险象）可能会导致意想不到的错误。本练习模拟了一个场景，其中组合逻辑电路由于路径延迟不均而产生一个短暂的输出毛刺。这个练习的关键在于，这个毛刺恰好发生在电平敏感锁存器处于透明状态的窗口期内，从而导致这个错误的瞬态值被“捕获”。通过这个实践，你将学会如何进行精确的时序分析，理解锁存器的透明性如何使其对输入信号的稳定性变得敏感 [@problem_id:1944012]。", "problem": "一个组合逻辑电路由三个输入 $A$、$B$和$C$以及一个单输出 $Y$ 实现。该电路的行为由布尔表达式 $Y = (A \\cdot B) + (A' \\cdot C)$ 描述，其中 $A'$ 表示 $A$ 的逻辑非。该电路由具有以下传播延迟的特定逻辑门构成：任何非门的延迟为 $t_{inv} = 2 \\text{ ns}$，任何2输入与门的延迟为 $t_{and} = 3 \\text{ ns}$，最终的2输入或门的延迟为 $t_{or} = 4 \\text{ ns}$。\n\n最初，在所有时间 $t < 10 \\text{ ns}$，输入稳定保持在 $A=1$，$B=1$ 和 $C=1$。在 $t = 10 \\text{ ns}$ 时刻，输入 $A$ 瞬间从 $1$ 跳变到 $0$。输入 $B$ 和 $C$ 在所有时间内都保持为 $1$ 不变。\n\n该组合逻辑电路的输出 $Y$ 被送入一个电平敏感D锁存器的 $D$ 输入端。锁存器的使能信号是一个记为 $CLK$ 的单脉冲。当 $CLK=1$ 时，锁存器是透明的（其输出 $Q$ 等于其输入 $D$）。锁存器在 $CLK$ 从 $1$ 跳变到 $0$ 的确切时刻捕获并保持 $D$ 的值。为简单起见，假设锁存器具有零建立时间和零保持时间。$CLK$ 信号在 $t < 16 \\text{ ns}$ 时为 $0$，在 $t = 16 \\text{ ns}$ 时跳变为 $1$，并在 $t = 18 \\text{ ns}$ 时跳变回 $0$。\n\n确定在所有时间 $t > 18 \\text{ ns}$ 时，D锁存器输出 $Q$ 中存储的最终稳定逻辑值。你的答案应该是数字0或1。", "solution": "布尔函数为 $Y=(A\\cdot B)+(A'\\cdot C)$。在 $B=1$ 和 $C=1$ 保持恒定的情况下，理想（零延迟）逻辑简化为\n$$\nY=(A\\cdot 1)+(A'\\cdot 1)=A+A'=1,\n$$\n因此，输出端任何对 $1$ 的偏离都必须是由于路径延迟不相等（静态1冒险）造成的。\n\n设传播延迟为 $t_{inv}=2\\ \\text{ns}$、$t_{and}=3\\ \\text{ns}$ 和 $t_{or}=4\\ \\text{ns}$。将输入跳变的时间定义为 $t_{0}=10\\ \\text{ns}$，此时 $A$ 从 $1$ 变为 $0$，而 $B=C=1$ 保持不变。\n\n从 $A$ 到或门输入端有两条路径：\n- 路径 P1（对于 $A\\cdot B$）：延迟为 $d_{1}=t_{and}$。\n- 路径 P2（对于 $A'\\cdot C$）：延迟为 $d_{2}=t_{inv}+t_{and}$。\n\n就在 $t_{0}$ 之前，当 $A=1$，$B=1$ 和 $C=1$ 时，或门的输入为 $(A\\cdot B,\\,A'\\cdot C)=(1,0)$。在 $t_{0}$ 时刻 $A$ 下降后，P1 项在以下时刻发生 $1\\to 0$ 的跳变：\n$$\nt_{1}=t_{0}+d_{1}=t_{0}+t_{and}=10\\ \\text{ns}+3\\ \\text{ns}=13\\ \\text{ns},\n$$\n而在P2路径上，非门输出 $A'$ 在 $t_{0}+t_{inv}=12\\ \\text{ns}$ 时刻发生 $0\\to 1$ 的跳变，然后与门输出 $A'\\cdot C$ 在以下时刻发生 $0\\to 1$ 的跳变：\n$$\nt_{2}=t_{0}+d_{2}=t_{0}+t_{inv}+t_{and}=10\\ \\text{ns}+2\\ \\text{ns}+3\\ \\text{ns}=15\\ \\text{ns}.\n$$\n因此，或门的输入演变如下：\n- 当 $t<t_{1}$ 时：$(1,0)$，其或运算结果为 $1$。\n- 当 $t_{1}\\le t<t_{2}$ 时：$(0,0)$，其或运算结果为 $0$。\n- 当 $t\\ge t_{2}$ 时：$(0,1)$，其或运算结果为 $1$。\n\n考虑到或门延迟 $t_{or}$，输出 $Y$ 在以下被 $t_{or}$ 偏移的时刻发生跳变：\n- 它在 $t_{1}+t_{or}=13\\ \\text{ns}+4\\ \\text{ns}=17\\ \\text{ns}$ 时刻从 $1$ 下降到 $0$。\n- 它在 $t_{2}+t_{or}=15\\ \\text{ns}+4\\ \\text{ns}=19\\ \\text{ns}$ 时刻从 $0$ 上升到 $1$。\n\n因此，在锁存器输入端 $D$ 的 $Y$ 波形为：当 $t<17\\ \\text{ns}$ 时为 $1$，当 $17\\ \\text{ns}\\le t<19\\ \\text{ns}$ 时为 $0$，当 $t\\ge 19\\ \\text{ns}$ 时为 $1$。\n\nD锁存器是电平敏感的，在 $16\\ \\text{ns}\\le t<18\\ \\text{ns}$ 期间，当 $CLK=1$ 时，它在该区间内是透明的，并在 $t=18\\ \\text{ns}$ 时刻 $CLK$ 下降沿的瞬间捕获当前值（建立和保持时间为零）。在透明区间内：\n- 在 $t=16\\ \\text{ns}$ 时，$Y=1$，因此 $Q=1$。\n- 在 $t=17\\ \\text{ns}$ 时，$Y$ 下降到 $0$，由于锁存器仍然透明，$Q$ 也跟随变为 $0$。\n在确切的捕获瞬间 $t=18\\ \\text{ns}$ 时，$Y=0$（因为 $17\\ \\text{ns}\\le 18\\ \\text{ns}<19\\ \\text{ns}$），所以锁存器存储了 $0$ 并在所有 $t>18\\ \\text{ns}$ 的时间内保持该值。\n\n因此，$Q$ 处的最终稳定值为 $0$。", "answer": "$$\\boxed{0}$$", "id": "1944012"}, {"introduction": "“竞态”问题是高速数字设计中的一个核心挑战，尤其是在使用透明锁存器的反馈环路中。本练习构建了一个典型的竞态场景：锁存器的输出经过一个快速的组合逻辑块后，反馈回自身的输入。你的任务是确定锁存器使能信号的最大脉冲宽度，以防止新计算出的数据“跑得太快”，在锁存器关闭前就冲回输入端，破坏了需要保持的旧数据。这个实践将锻炼你应用建立时间（$\\tau_{su}$）和保持时间（$\\tau_{h}$）等关键时序参数来解决实际时序问题的能力 [@problem_id:1944020]。", "problem": "一个数字电路包含一个高电平有效的透明锁存器。该锁存器的数据输出 (Q) 连接到一个组合逻辑模块，而该逻辑模块的输出又反馈回同一个锁存器的数据输入 (D)。这个反馈回路可能会造成时序风险。锁存器的使能信号 (EN) 是一个宽度为 $W_{EN}$ 的脉冲。当 EN 为高电平时，锁存器是透明的（Q 跟随 D）；当 EN 变为低电平时，锁存器存储 D 上的当前值。\n\n组件的时序特性如下：\n- 锁存器从 D 到 Q 的传输延迟：$\\tau_{pd, latch} = 1.2 \\text{ ns}$\n- 锁存器建立时间：$\\tau_{su} = 0.8 \\text{ ns}$\n- 锁存器保持时间：$\\tau_{h} = 0.6 \\text{ ns}$\n- 组合逻辑模块的最小传输延迟：$\\tau_{pd, comb, min} = 0.9 \\text{ ns}$\n\n为确保稳定工作，通过反馈回路传播的新数据不能过早到达锁存器的输入 D，以免在 EN 脉冲的下降沿破坏正在被锁存的值。这个约束对脉冲宽度 $W_{EN}$ 施加了一个上限。\n\n计算使能脉冲宽度 $W_{EN,max}$ 的绝对最大可能值，以保证电路不会出现此时序风险。答案以纳秒 (ns) 为单位，并四舍五入到三位有效数字。", "solution": "当使能信号 EN 为高电平时，锁存器是透明的，因此 D 处的变化经过锁存器传输延迟 $\\tau_{pd,latch}$ 后传播到 Q，然后再经过组合逻辑的最小传输延迟 $\\tau_{pd,comb,min}$ 反馈回 D。因此，从 EN 变为高电平的时刻算起，由反馈引起的最早变化在锁存器输入 D 处发生的时刻为\n$$\nt_{\\text{fb}}=\\tau_{pd,latch}+\\tau_{pd,comb,min}\n$$\n\n为了在 EN 的下降沿正确锁存，输入 D 必须在时间区间\n$$\n\\left[W_{EN}-\\tau_{su},\\; W_{EN}+\\tau_{h}\\right]\n$$\n内保持稳定。\n为确保反馈不会破坏正在被锁存的值，D 处由反馈引起的变化不能发生在此区间内。一个充分且保守的条件是要求最早可能发生的变化发生在保持时间区间结束之后：\n$$\nt_{\\text{fb}} \\ge W_{EN}+\\tau_{h}.\n$$\n对 $W_{EN}$ 求解，得到上限\n$$\nW_{EN} \\le \\tau_{pd,latch}+\\tau_{pd,comb,min}-\\tau_{h}.\n$$\n为了完整性，避免建立时间违规需要满足\n$$\nt_{\\text{fb}} \\ge W_{EN}-\\tau_{su} \\;\\;\\Longrightarrow\\;\\; W_{EN} \\le \\tau_{pd,latch}+\\tau_{pd,comb,min}+\\tau_{su},\n$$\n但这个界限比上面基于保持时间推导出的界限更宽松，因此极限值为\n$$\nW_{EN,\\max}=\\tau_{pd,latch}+\\tau_{pd,comb,min}-\\tau_{h}.\n$$\n\n代入给定值，\n$$\nW_{EN,\\max}=1.2+0.9-0.6=1.5 \\text{ ns}.\n$$\n四舍五入到三位有效数字，结果为 $1.50$ 纳秒。", "answer": "$$\\boxed{1.50}$$", "id": "1944020"}]}
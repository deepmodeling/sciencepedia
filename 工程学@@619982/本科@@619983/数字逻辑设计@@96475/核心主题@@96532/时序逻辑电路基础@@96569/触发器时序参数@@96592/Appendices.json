{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。要确定一个同步数字电路能运行多快，我们必须计算其最小允许的时钟周期 $T_{min}$。这个周期由电路中的“最长路径”决定，必须保证数据在下一个时钟沿到来之前稳定下来，这便是建立时间约束。通过这个练习，你将实践计算最小周期，掌握决定电路最高工作频率的核心方法。[@problem_id:1937219]", "problem": "一位数字系统工程师正在一个定制处理器内部设计一条关键的数据流水线。该流水线阶段由两个边沿触发寄存器 REG1 和 REG2 组成，它们由一个公共系统时钟驱动。在 REG1 的输出和 REG2 的输入之间，有一个组合逻辑块。为使电路正常工作，从 REG1 发出的数据信号必须在下一个时钟脉冲到达之前，通过该逻辑电路传播并在 REG2 的输入端稳定下来，以满足建立时间的要求。\n\n组件的时序特性如下：\n- 两个寄存器的从时钟输入到数据输出的传播延迟为 $t_{c-q} = 45.2 \\text{ ps}$。\n- 两个寄存器的数据输入的建立时间要求为 $t_{su} = 35.8 \\text{ ps}$。\n- 组合逻辑块中任意路径的最大传播延迟为 $t_{comb} = 211.5 \\text{ ps}$。\n\n本次分析中可以忽略时钟偏斜和抖动。\n\n计算该电路正常工作所需的最小始终周期 $T_{min}$。您的答案应以皮秒 (ps) 为单位，并四舍五入到三位有效数字。", "solution": "对于从发送寄存器 (REG1) 到捕获寄存器 (REG2) 的单周期路径，建立时间约束要求下一个时钟周期至少为发送寄存器的时钟到输出延迟、最大组合逻辑延迟以及捕获寄存器的建立时间之和。在忽略时钟偏斜和抖动的情况下，建立时间约束为\n$$\nT_{\\min} \\geq t_{c\\text{-}q} + t_{\\text{comb}} + t_{su}.\n$$\n代入给定值，\n$$\nT_{\\min} \\geq 45.2 \\text{ ps} + 211.5 \\text{ ps} + 35.8 \\text{ ps}.\n$$\n计算总和，\n$$\nT_{\\min} \\geq 292.5 \\text{ ps}.\n$$\n四舍五入到三位有效数字，得到\n$$\nT_{\\min} = 293 \\text{ ps}.\n$$\n由于题目要求最终答案以皮秒为单位，并指定只提供该单位下的数值，因此最终数字结果为 293。", "answer": "$$\\boxed{293}$$", "id": "1937219"}, {"introduction": "在真实世界的电路中，时钟信号到达不同触发器的时间可能存在微小差异，即时钟偏斜（clock skew）。这个练习将建立时间分析提升到更实际的层面，要求你计算建立时间裕量（setup slack），它衡量了设计在给定工作频率下是否满足时序要求。你将学习时钟偏斜如何影响建立时间方程，并理解为什么正偏斜有时可能对满足时序有帮助。[@problem_id:1937241]", "problem": "一个同步数字电路设计有一条数据路径，该路径位于两个名为 FF1（源端）和 FF2（目的端）的上升沿触发 D 型触发器之间。FF1 的输出连接到一个组合逻辑模块，该逻辑模块的输出再馈入 FF2 的数据输入端。单一的时钟信号驱动这两个触发器。然而，由于物理布局上的差异，时钟信号到达 FF2 的时间比到达 FF1 的时间晚了 $t_{skew}$。\n\n该电路的时序参数规定如下：\n- 时钟周期：$T_{clk} = 8.0 \\text{ ns}$\n- FF1 的时钟到 Q 输出延迟：$t_{c-q} = 0.6 \\text{ ns}$\n- 组合逻辑的传播延迟：$t_{comb} = 5.5 \\text{ ns}$\n- FF2 的建立时间要求：$t_{su} = 1.2 \\text{ ns}$\n- 触发器之间的时钟偏斜：$t_{skew} = 0.2 \\text{ ns}$\n\n用于满足建立时间要求的时序裕量称为建立时间裕量 (setup slack)。正的建立时间裕量表示条件得到满足，而负值则表示违规。计算到达 FF2 输入端的数据信号的建立时间裕量。\n\n将您的答案以纳秒 (ns) 为单位表示。将最终答案四舍五入至两位有效数字。", "solution": "对于两个带有有钟偏斜的上升沿触发触发器之间的建立时间时序，其中 FF2 的捕获时钟比 FF1 的发射时钟晚 $t_{skew}$ 到达，建立时间约束为\n$$\nt_{c\\text{-}q} + t_{comb} \\leq T_{clk} - t_{su} + t_{skew}.\n$$\n定义数据到达 FF2 输入端的时间为\n$$\nt_{\\text{arrival}} = t_{c\\text{-}q} + t_{comb}.\n$$\n定义为满足建立时间要求所需的最晚到达时间为\n$$\nt_{\\text{required}} = T_{clk} - t_{su} + t_{skew}.\n$$\n建立时间裕量是以下差值\n$$\n\\text{slack} = t_{\\text{required}} - t_{\\text{arrival}} = \\left(T_{clk} - t_{su} + t_{skew}\\right) - \\left(t_{c\\text{-}q} + t_{comb}\\right).\n$$\n代入给定值：\n$$\nt_{\\text{arrival}} = 0.6 + 5.5 = 6.1 \\text{ ns},\n$$\n$$\nt_{\\text{required}} = 8.0 - 1.2 + 0.2 = 7.0 \\text{ ns},\n$$\n$$\n\\text{slack} = 7.0 - 6.1 = 0.9 \\text{ ns}.\n$$\n四舍五入至两位有效数字，得到 $0.90 \\text{ ns}$。", "answer": "$$\\boxed{0.90}$$", "id": "1937241"}, {"introduction": "确保数据按时到达（满足建立时间）只是时序分析的一半。我们还必须防止新数据到达得过早，以免破坏目标触发器当前正在锁存的状态，这就是保持时间 $t_h$ 的任务。这个练习将我们的注意力从“最慢路径”转移到“最快路径”，你将通过计算保持时间裕量（hold slack）来量化数据路径的稳定性，并理解为何此时应使用最小延迟参数。[@problem_id:1937246]", "problem": "一个工程团队正在为深空探测器设计一个关键的数据记录系统。该系统包含一个数据路径，位于源寄存器和目标寄存器之间，由一个组合逻辑块隔开。两个寄存器都由同一个主时钟控制。为了使系统正常工作，它必须满足特定的时序约束，包括保持时间要求，尤其是在导致信号传播最快的最坏情况温度条件下。\n\n此路径中组件的时序参数已被表征如下：\n- 源寄存器的最小“时钟到Q”传播延迟 ($t_{cq,min}$) 为 150 ps。\n- 目标寄存器的保持时间要求 ($t_h$) 为 200 ps。\n- 寄存器之间组合逻辑块的最小传播延迟 ($t_{comb,min}$) 为 500 ps。\n\n保持时间裕量定义为超出保持时间要求的时长。它的计算方法是，数据到达目标寄存器输入端的最早时间与时钟沿后数据必须保持稳定的时间之间的差值。正值表示设计安全，而负值表示存在保持时间违规。\n\n计算此数据路径的保持时间裕量。请用皮秒 (ps) 表示您的答案。", "solution": "问题要求计算同步数字电路中的保持时间裕量。保持时间约束确保触发器输入端的数据在有效时钟沿到达后的一段时间内（即保持时间 $t_h$）保持稳定。如果来自前一级的新数据到达过快，在目标触发器有足够时间可靠地锁存当前数据之前就将其覆盖，就会发生保持时间违规。\n\n让我们分析保持条件下的时序。我们需要考虑信号从源寄存器输出端传播到目标寄存器输入端的最快路径。这条“快路径”决定了*下一个*数据值到达目标寄存器输入端的最早可能时间。\n\n信号从源寄存器的时钟输入端传播到目标寄存器的数据输入端所需的总时间，是源寄存器的最小“时钟到Q”延迟与组合逻辑的最小传播延迟之和。这就是最早的数据到达时间，$t_{arrival,min}$。\n\n$$t_{arrival,min} = t_{cq,min} + t_{comb,min}$$\n\n保持时间约束要求这个最早到达时间必须大于或等于目标触发器的保持时间要求。在时钟沿之后，旧数据必须在目标触发器的输入端稳定保持 $t_h$ 的时长。到达时间为 $t_{arrival,min}$ 的新数据，不得在这个保持窗口关闭前到达。因此，满足保持时间的条件是：\n\n$$t_{arrival,min} \\ge t_h$$\n\n保持时间裕量 ($Slack_{hold}$) 是满足此条件的余量。它是实际最早数据到达时间与所需保持时间之间的差值。\n\n$$Slack_{hold} = t_{arrival,min} - t_h$$\n\n代入 $t_{arrival,min}$ 的表达式，我们得到保持时间裕量的公式：\n\n$$Slack_{hold} = (t_{cq,min} + t_{comb,min}) - t_h$$\n\n现在，我们可以将给定的数值代入这个方程：\n- $t_{cq,min} = 150 \\text{ ps}$\n- $t_{comb,min} = 500 \\text{ ps}$\n- $t_h = 200 \\text{ ps}$\n\n$$Slack_{hold} = (150 \\text{ ps} + 500 \\text{ ps}) - 200 \\text{ ps}$$\n$$Slack_{hold} = 650 \\text{ ps} - 200 \\text{ ps}$$\n$$Slack_{hold} = 450 \\text{ ps}$$\n\n计算出的保持时间裕量为 450 ps。由于该值为正，说明设计满足保持时间要求，且有充足的裕量。", "answer": "$$\\boxed{450}$$", "id": "1937246"}]}
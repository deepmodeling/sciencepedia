{"hands_on_practices": [{"introduction": "在构建复杂的数字电路之前，一个关键的初始步骤是确定系统的基本规格。本练习将一个现实世界的应用目标（例如用给定的时钟频率 $f_{osc}$ 测量一个特定的时间间隔 $T_{max}$）与数字计数器的基本容量联系起来。通过解决这个问题，你将学会如何计算所需的位数，并由此确定级联计数器芯片的数量，以防止溢出并确保设计满足其性能要求 [@problem_id:1919479]。", "id": "1919479", "problem": "在一个数字电子实验室中，一名学生接到设计一个高精度事件计时器的任务。该设计使用一个频率为 $f_{osc}$ 的稳定石英晶体振荡器 (QCO) 作为其时基，并将几个相同的4位同步二进制计数器集成电路 (IC) 级联在一起以对时钟脉冲进行计数。该计时器设计用于测量最大持续时间为 $T_{max}$ 的时间间隔，且不发生溢出。如果计数的时钟脉冲总数超过了级联计数器系统可以存储的最大值，则会发生溢出。\n\n已知 QCO 频率为 $f_{osc} = 10.0 \\text{ MHz}$，待测量的最大时间间隔为 $T_{max} = 1.00 \\text{ ms}$，计算要构建一个满足此要求的计时器，必须级联的4位计数器 IC 的最小整数数量。", "solution": "在最大时间间隔内计数的时钟脉冲数由时基关系 $N = f_{osc} T_{max}$ 给出。一个 $n$ 位二进制计数器可以表示从 $0$ 到 $2^{n}-1$ 的计数值，因此，为了在从零开始计数 $N$ 个脉冲时避免溢出，所要求的容量条件是 $2^{n} \\geq N$。对于 $k$ 个级联的4位计数器，总位数是 $n = 4k$，因此无溢出条件变为 $2^{4k} \\geq N$。\n\n代入给定值 $f_{osc} = 10.0 \\times 10^{6} \\text{ Hz}$ 和 $T_{max} = 1.00 \\times 10^{-3} \\text{ s}$，脉冲计数为\n$$\nN = f_{osc} T_{max} = \\left(10.0 \\times 10^{6}\\right)\\left(1.00 \\times 10^{-3}\\right) = 10.0 \\times 10^{3} = 1.00 \\times 10^{4}.\n$$\n我们需要 $2^{4k} \\geq 1.00 \\times 10^{4}$。注意到\n$$\n2^{13} = 8192 < 1.00 \\times 10^{4} \\leq 16384 = 2^{14},\n$$\n可得 $4k \\geq 14$，所以\n$$\nk \\geq \\frac{14}{4} = 3.5.\n$$\n因此，最小整数 $k$ 是 $4$。这提供了 $n = 16$ 位的容量，即 $2^{16} = 65536 \\geq 1.00 \\times 10^{4}$，确保不发生溢出。", "answer": "$$\\boxed{4}$$"}, {"introduction": "知道了需要多少个计数器之后，下一步就是如何将它们连接起来。本练习探讨了一种常见的连接方式：异步级联，也称为纹波计数器。此问题演示了异步级联计数器的工作机制，其中一个计数器的输出作为下一个计数器的时钟信号，你需要跟踪每个计数器的状态，理解“纹波”效应是如何在系统中传播的 [@problem_id:1919471]。这个实践计算将加深你对独立模数计数器如何组合成一个更大系统，以及如何预测其在给定数量的输入脉冲后最终状态的理解。", "id": "1919471", "problem": "一个数字定时电路由两个级联的二进制加法计数器，计数器 A 和计数器 B，构成。计数器 A 是一个模4计数器，有两条输出线 $Q_{A1}Q_{A0}$，其中 $Q_{A1}$ 是最高有效位。计数器 B 是一个模8计数器，有三条输出线 $Q_{B2}Q_{B1}Q_{B0}$，其中 $Q_{B2}$ 是最高有效位。\n\n该系统配置为一个异步计数器：一个主时钟信号连接到计数器 A 的输入端。计数器 B 由计数器 A 的最高有效位输出 $Q_{A1}$ 的下降沿触发。\n\n在操作开始时（$t=0$），施加一个全局复位信号，将两个计数器的初始状态都设置为0。这意味着所有五条输出线（$Q_{B2}Q_{B1}Q_{B0}$ 和 $Q_{A1}Q_{A0}$）都处于逻辑0。\n\n复位后，向计数器 A 的主时钟输入端施加了恰好40个时钟脉冲。确定在这40个脉冲结束时系统的组合二进制状态。以单个5位二进制数的形式提供答案，其中计数器 B 的位在左侧（最高有效位），计数器 A 的位在右侧（最低有效位），格式为 $Q_{B2}Q_{B1}Q_{B0}Q_{A1}Q_{A0}$。", "solution": "问题要求一个级联计数器系统在40个时钟脉冲后的最终状态。该系统由一个模4计数器（计数器 A）和一个模8计数器（计数器 B）组成，前者的输出触发后者。我们需要分别确定每个计数器的最终状态，然后将它们组合起来。\n\n首先，我们来分析计数器 A。它是一个模4计数器，这意味着它会循环经历四种状态（0、1、2、3），然后重复。在接收到来自主时钟的 $N$ 个时钟脉冲后，其状态由 $N$ 除以4的余数给出。\n计数器 A 的状态 $S_A$ 计算如下：\n$$S_A = N \\pmod{4}$$\n已知施加了 $N=40$ 个脉冲：\n$$S_A = 40 \\pmod{4} = 0$$\n所以，计数器 A 的最终状态是0。在2位二进制表示（$Q_{A1}Q_{A0}$）中，此状态为 `00`。\n\n接下来，我们分析计数器 B。它是一个模8计数器，但它不由主时钟触发。而是由计数器 A 的最高有效位（$Q_{A1}$）的下降沿触发。对于一个2位二进制加法计数器（模4），其状态为 `00`、`01`、`10`、`11`。最高有效位 $Q_{A1}$ 遵循模式 `0, 0, 1, 1, 0, 0, 1, 1, ...`。$Q_{A1}$ 上的下降沿发生在其从1转换回0时。这恰好发生在计数器 A 的状态从 `11`（十进制 3）回到 `00`（十进制 0）时。这个事件，称为翻转，在计数器 A 的每个完整周期中发生一次。\n由于计数器 A 是一个模4计数器，它每4个主时钟脉冲完成一个完整周期。因此，计数器 B 接收到的时钟脉冲数（我们称之为 $N_B$）是主脉冲总数 $N$ 除以4，并取结果的整数部分。\n$$N_B = \\left\\lfloor \\frac{N}{4} \\right\\rfloor$$\n代入 $N=40$：\n$$N_B = \\left\\lfloor \\frac{40}{4} \\right\\rfloor = 10$$\n所以，计数器 B 接收到10个时钟脉冲。\n\n现在我们可以确定计数器 B 的最终状态。它是一个模8计数器，因此其在 $N_B$ 个脉冲后的状态 $S_B$ 是：\n$$S_B = N_B \\pmod{8}$$\n当 $N_B=10$ 时：\n$$S_B = 10 \\pmod{8} = 2$$\n计数器 B 的最终状态是2。在3位二进制表示（$Q_{B2}Q_{B1}Q_{B0}$）中，此状态为 `010`。\n\n最后，我们将两个计数器的状态组合起来，得到整体系统状态。题目指定了格式 $Q_{B2}Q_{B1}Q_{B0}Q_{A1}Q_{A0}$。\n我们将 $S_B$ 的二进制表示与 $S_A$ 的二进制表示连接起来。\n计数器 B 的状态 ($S_B=2$)：`010`\n计数器 A 的状态 ($S_A=0$)：`00`\n组合状态 = $Q_{B2}Q_{B1}Q_{B0}Q_{A1}Q_{A0}$ = `01000`。\n\n或者，我们可以考虑系统的总模数，即各个模数的乘积：$M_{total} = 4 \\times 8 = 32$。该系统表现为一个模32计数器。40个脉冲后的总计数值是 $40 \\pmod{32} = 8$。十进制数8的5位二进制表示确实是 `01000`，这证实了我们的结果。", "answer": "$$\\boxed{01000}$$"}, {"introduction": "计数器的级联应用远不止于简单的二进制计数，它还可以用于构建具有自定义模数的复杂系统，以满足特殊频率划分等应用需求。这个设计挑战要求你创造性地思考，使用控制逻辑将不同模数的计数器（如 MOD-5 和 MOD-7）组合起来，以实现一个特定的复合模数 $M$。此练习突出了同步级联与自定义使能逻辑相结合所带来的强大功能与灵活性 [@problem_id:1919487]，推动你从分析转向综合，锻炼你在约束条件下设计出最优方案的关键工程师技能。", "id": "1919487", "problem": "一位数字系统工程师的任务是创建一个分频器，其整数分频比 $M$ 在允许的范围内最大，且严格小于200。可用的元件是一套固定的同步计数器集成电路：两个相同的MOD-5计数器和一个MOD-7计数器。一个同步MOD-N计数器是一种从0计数到$N-1$的设备，它有用于时钟信号和计数使能的输入端，以及用于指示其当前计数值的输出端。你可以使用这些计数器的任何配置，包括级联、并行或混合拓扑结构，并使用任何所需的组合逻辑门（例如，AND、OR、NOT）来互连，以控制它们的时钟或使能输入。最终的设计必须作为一个单一的、连续的计数器来工作，这意味着其整体状态必须在重复该序列之前，循环遍历一个由 $M$ 个不同状态组成的唯一序列。可以实现的 $M$ 的最大可能值是多少？", "solution": "设两个MOD-5计数器的状态为 $x \\in \\{0,1,2,3,4\\}$ 和 $y \\in \\{0,1,2,3,4\\}$，MOD-7计数器的状态为 $z \\in \\{0,1,2,3,4,5,6\\}$。组合系统的状态是三元组 $(x,y,z)$。由于系统中唯一的存储元件是这三个计数器，所以组合状态的总数最多是各计数器模数的乘积。因此，\n$$\nM \\leq 5 \\cdot 5 \\cdot 7 = 175.\n$$\n因此 $M \\leq 175$ 是一个严格的上限。\n\n接下来需要证明，通过适当的同步互连，可以实现 $M=175$，使得整个系统形成一个长度为 $175$ 的单一循环。\n\n构造一个混合基数级联如下。设最低位的计数器 $x$ 在每个时钟周期都被使能（因此它在每个输入时钟上进行模 $5$ 计数）。当且仅当该时钟周期 $x=4$ 时，使能计数器 $y$；当且仅当该时钟周期 $x=4$ 且 $y=4$ 时，使能计数器 $z$。这些使能条件可以通过等值检测组合逻辑来实现。所有计数器都是同步的，因此它们的下一状态是在每个时钟边沿根据当前状态 $(x,y,z)$ 并行计算的。\n\n定义状态索引\n$$\ns \\triangleq x + 5y + 25z,\n$$\n其取值范围为 $\\{0,1,\\ldots,174\\}$。我们证明在每个时钟周期， $s$ 的值会模 $175$ 加 $1$。分情况讨论：\n\n1) 如果 $x<4$，则 $x^{+}=x+1$，$y^{+}=y$，$z^{+}=z$，因此\n$$\ns^{+}=(x+1)+5y+25z=s+1.\n$$\n\n2) 如果 $x=4$ 且 $y<4$，则 $x^{+}=0$，$y^{+}=y+1$，$z^{+}=z$，因此\n$$\ns^{+}=0+5(y+1)+25z=(x+5y+25z)+1=s+1.\n$$\n\n3) 如果 $x=4$，$y=4$ 且 $z<6$，则 $x^{+}=0$，$y^{+}=0$，$z^{+}=z+1$，因此\n$$\ns^{+}=0+0+25(z+1)=(x+5y+25z)+1=s+1.\n$$\n\n4) 如果 $x=4$，$y=4$，$z=6$，则 $x^{+}=0$，$y^{+}=0$，$z^{+}=0$，因此\n$$\ns^{+}=0=(174+1) \\bmod 175=(s+1) \\bmod 175.\n$$\n\n因此，在所有情况下，\n$$\ns^{+} \\equiv s+1 \\pmod{175},\n$$\n所以状态序列是一个单一循环，在重复之前会覆盖所有 $175$ 个不同的值。这实现了 $M=175$，它达到了上限，因此是在给定约束下的最大值。由于 $175<200$，所以 $M$ 的最大可能值为 $175$。", "answer": "$$\\boxed{175}$$"}]}
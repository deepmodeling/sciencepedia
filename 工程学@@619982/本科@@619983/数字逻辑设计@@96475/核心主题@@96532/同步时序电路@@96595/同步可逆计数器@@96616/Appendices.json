{"hands_on_practices": [{"introduction": "第一个动手实践将超越标准的二进制计数器，探索具有自定义序列的计数器设计。你将设计一个遵循3位格雷码序列的同步计数器，这在旋转编码器等应用中至关重要，可以防止状态转换期间的错误读数。[@problem_id:1966203] 这个练习提供了将一个特定的状态转换需求，转化为使用D型触发器和组合逻辑的具体硬件实现的基础经验。", "problem": "一个用于旋转轴编码器的数字控制系统需要一个同步3位计数器来跟踪轴的位置。该计数器的状态由三位 $Q_2, Q_1, Q_0$ 表示。该系统必须按照标准的3位格雷码序列进行循环。一个方向控制输入 `DIR` 决定计数方向：当 `DIR`=0 时，计数器向前（向上）循环；当 `DIR`=1 时，向后（向下）循环。所有状态转换都与时钟信号的上升沿同步。\n\n标准的3位格雷码序列为：000, 001, 011, 010, 110, 111, 101, 100。\n\n该计数器将使用三个D型触发器（D-FFs）实现，其输入 $D_2, D_1, D_0$ 对应于状态位 $Q_2, Q_1, Q_0$。你的任务是确定输入 $D_2, D_1,$ 和 $D_0$ 的正确组合逻辑方程，这些方程是当前状态 ($Q_2, Q_1, Q_0$) 和方向输入 `DIR` 的函数。\n\n在下面的选项中，撇号（例如 $A'$）表示“非”（NOT）运算，并置（例如 $AB$）表示“与”（AND）运算，加号（$+$）表示“或”（OR）运算，$\\oplus$ 表示“异或”（XOR）运算，XNOR 表示“同或”（Exclusive-NOR）运算。\n\n下列哪组方程正确地描述了D-FF输入的逻辑？\n\nA.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\text{ XNOR } Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nB.\n$D_2 = Q_2 Q_0 + DIR Q_1 Q_0' + DIR' Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\text{ XNOR } Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nC.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\oplus Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\oplus Q_1$\n\nD.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 + Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nE.\n$D_2 = Q_2 \\oplus Q_1$\n$D_1 = Q_1 \\oplus Q_0$\n$D_0 = Q_0' + DIR$", "solution": "我们需要一个同步3位上下计数格雷码计数器，其序列为 000, 001, 011, 010, 110, 111, 101, 100，使用三个输入为 $D_2, D_1, D_0$ 的D-FF。方向输入 $DIR$ 选择下一个状态：当 $DIR=0$ 时，向前（向上）计数；当 $DIR=1$ 时，向后（向下）计数。所有转换都必须是格雷码相邻的（只有一位变化）。\n\n首先，写出每个当前状态 $(Q_2,Q_1,Q_0)$ 的次态映射。\n- 当 $DIR=0$（向上）时：\n$(000)\\to(001)$, $(001)\\to(011)$, $(011)\\to(010)$, $(010)\\to(110)$, $(110)\\to(111)$, $(111)\\to(101)$, $(101)\\to(100)$, $(100)\\to(000)$。\n- 当 $DIR=1$（向下）时：\n$(000)\\to(100)$, $(001)\\to(000)$, $(011)\\to(001)$, $(010)\\to(011)$, $(110)\\to(010)$, $(111)\\to(110)$, $(101)\\to(111)$, $(100)\\to(101)$。\n\n根据这些，推导出每个次态位。\n\n1) $D_0$ 的推导。\n收集每个 $(Q_2,Q_1)$ 组合的下一个 $Q_0^+$，可以发现 $Q_0^+$ 与 $Q_0$ 无关，并且满足奇偶校验关系\n$$ Q_0^+ = \\overline{DIR \\oplus Q_2 \\oplus Q_1} = (DIR \\oplus Q_2)\\ \\text{XNOR}\\ Q_1 $$\n因此，\n$$ D_0 = (DIR \\oplus Q_2)\\ \\text{XNOR}\\ Q_1 $$\n\n2) $D_1$ 的推导。\n检查状态转换：\n- 当 $Q_0=0$ 时，对于两个方向，$Q_1^+=Q_1$（因为只有 $Q_0$ 或 $Q_2$ 可能翻转）。\n- 当 $Q_0=1$ 时，$Q_1^+$ 取决于 $DIR$ 和 $Q_2$，且 $Q_1^+=(DIR\\ \\text{XNOR}\\ Q_2)$（已根据上面映射中所有四个 $Q_0=1$ 的情况进行验证）。\n通过在 $Q_0$ 上进行多路复用将它们组合起来：\n$$ D_1 = Q_1 Q_0' + (DIR\\ \\text{XNOR}\\ Q_2)\\,Q_0 $$\n\n3) $D_2$ 的推导。\n检查状态转换：\n- 当 $Q_0=1$ 时，对于两个方向，$Q_2^+=Q_2$（只有 $Q_0$ 或 $Q_1$ 翻转）。\n- 当 $Q_0=0$ 时，$Q_2^+$ 取决于 $DIR$ 和 $Q_1$，且 $Q_2^+=Q_1\\oplus DIR$（已对所有四个 $Q_0=0$ 的情况进行检查）。\n通过在 $Q_0$ 上进行多路复用将它们组合起来：\n$$ D_2 = Q_2 Q_0 + (Q_1\\oplus DIR)\\,Q_0' = Q_2 Q_0 + DIR'Q_1Q_0' + DIR\\,Q_1'Q_0' $$\n\n与选项进行比较：\n- $D_2=Q_2Q_0+DIR'Q_1Q_0'+DIR\\,Q_1'Q_0'$,\n- $D_1=Q_1Q_0'+(DIR\\ \\text{XNOR}\\ Q_2)\\,Q_0$,\n- $D_0=(DIR \\oplus Q_2)\\ \\text{XNOR}\\ Q_1$,\n这与选项 A 完全匹配。\n\n因此，正确选项是 A。", "answer": "$$\\boxed{A}$$", "id": "1966203"}, {"introduction": "在掌握了基础知识之后，下一个实践将引入更复杂的现实世界设计约束。你将着手设计一个同步BCD（二进制编码的十进制）计数器，这是数字显示器中的常见组件，它还在特定计数值上具有自定义的“保持”行为。[@problem_id:1966209] 这个练习将加深你对JK触发器及其激励表的理解，挑战你为非顺序状态转换实现控制逻辑。", "problem": "一个专用的数字控制器需要一个具有特定计数序列的4位同步计数器。该计数器将使用JK触发器进行设计。计数器的四个输出位记为 $Q_3, Q_2, Q_1, Q_0$，其中 $Q_3$ 是最高有效位 (MSB)。该计数器作为一个二-十进制 (BCD) 计数器工作，计数序列从 0 (0000) 到 9 (1001)。\n\n计数器的方向由单个输入线 $M$ 控制。当 $M=1$ 时，计数器递增 (加计数)；当 $M=0$ 时，计数器递减 (减计数)。计数序列在两个方向上都循环计数 (即，加计数时从 9 到 0，减计数时从 0 到 9)。\n\n其特殊行为如下：当计数达到 5 (0101) 时，无论计数方向如何，计数器都必须保持此状态 (0101) 一个额外的时钟周期，然后才进入其序列中的下一个状态。对于所有其他计数值，它在每个时钟脉冲上正常转换。任何 BCD 无效状态 (1010 到 1111) 在设计中都可以被视为无关项。\n\nJK触发器由其特性方程 $Q_{next} = J \\cdot Q' + K' \\cdot Q$ 定义。\n\n你的任务是确定对应于最高有效位 $Q_3$ 的 JK 触发器的 $J_3$ 输入的简化“积之和”(SOP)布尔表达式。最终表达式应为控制输入 $M$ 和计数器状态输出 $Q_3, Q_2, Q_1, Q_0$ 的函数。", "solution": "我们使用特性方程为 $Q_{\\text{next}}=JQ'+K'Q$ 的 JK 触发器。由此，单个位 $Q$ 的 JK 激励条件为：\n- 对于 $0 \\to 0$：$J=0$ (且 $K$ 为无关项)。\n- 对于 $0 \\to 1$：$J=1$ (且 $K$ 为无关项)。\n- 对于 $1 \\to 0$：$K=1$ (且 $J$ 为无关项)。\n- 对于 $1 \\to 1$：$K=0$ (且 $J$ 为无关项)。\n\n因此，对于最高有效位 $Q_{3}$，输入 $J_{3}$ 必须为 1 的情况，仅存在于那些能使 $Q_{3}$ 产生 $0 \\to 1$ 转换的当前状态/输入组合中。\n\n有效的 BCD 状态为 $0000$ 到 $1001$。当 $M=1$ 时计数器加计数，当 $M=0$ 时减计数，并带有循环功能，且无论方向如何，在 $0101$ 状态下都会多保持一个时钟周期。因此，有效状态的次态映射如下：\n- 当 $M=1$ (加计数) 时：$0 \\to 1$, $1 \\to 2$, $2 \\to 3$, $3 \\to 4$, $4 \\to 5$, $5 \\to 5$ (保持), $6 \\to 7$, $7 \\to 8$, $8 \\to 9$, $9 \\to 0$。\n- 当 $M=0$ (减计数) 时：$0 \\to 9$, $1 \\to 0$, $2 \\to 1$, $3 \\to 2$, $4 \\to 3$, $5 \\to 5$ (保持), $6 \\to 5$, $7 \\to 6$, $8 \\to 7$, $9 \\to 8$。\n\n位 $Q_{3}$ 在状态 $0000$ 到 $0111$ 时等于 $0$，在状态 $1000$ 和 $1001$ 时等于 $1$。因此，$Q_{3}$ 仅在以下当前状态/输入情况下发生 $0 \\to 1$ 转换：\n- 当 $M=1$ 时：从状态 $0111$ 到 $1000$，即 $M=1$ 且 $(Q_{3},Q_{2},Q_{1},Q_{0})=(0,1,1,1)$。\n- 当 $M=0$ 时：从状态 $0000$ 到 $1001$ (减计数循环)，即 $M=0$ 且 $(Q_{3},Q_{2},Q_{1},Q_{0})=(0,0,0,0)$。\n\n所有其他有效的当前状态/输入组合对于 $Q_{3}$ 会产生 $0 \\to 0$、$1 \\to 0$ 或 $1 \\to 1$ 的转换，对于这些情况，$J_{3}$ 要么是 $0$ (在 $0 \\to 0$ 的情况下)，要么是无关项 (当 $Q_{3}=1$ 时)。BCD 无效状态 $1010$ 到 $1111$ 被指定为无关项，并且在任何情况下它们都有 $Q_{3}=1$，因此在这些状态下 $J_{3}$ 也是无关项。\n\n因此，$J_{3}$ 的最小“积之和”表达式是对应于这两个 $0 \\to 1$ 转换的两个最小项之和：\n$$\nJ_{3} \\;=\\; M\\,Q_{3}'\\,Q_{2}\\,Q_{1}\\,Q_{0}\\;+\\;M'\\,Q_{3}'\\,Q_{2}'\\,Q_{1}'\\,Q_{0}'.\n$$\n这个表达式已经是简化的，并且符合 SOP 形式。", "answer": "$$\\boxed{M\\,Q_{3}'\\,Q_{2}\\,Q_{1}\\,Q_{0}\\;+\\;M'\\,Q_{3}'\\,Q_{2}'\\,Q_{1}'\\,Q_{0}'}$$", "id": "1966209"}, {"introduction": "对于任何数字设计师来说，一项基本技能是分析和调试电路的能力。最后一个实践问题将你的重点从设计转移到故障排除，这是现实世界中一项常见的任务。[@problem_id:1966237] 通过分析一个带有特定接线错误的同步二进制计数器，你将学习逐个状态地追踪电路的演变，并预测其非预期的行为，从而巩固你对输入逻辑如何直接决定计数器序列的理解。", "problem": "一个3位同步计数器由三个JK触发器构成。计数器的状态由输出 $Q_2Q_1Q_0$ 表示，其中 $Q_2$ 是最高有效位（MSB），$Q_0$ 是最低有效位（LSB）。该计数器被设计为一个标准的二进制加法计数器，其正确的JK触发器输入逻辑为：\n$J_0 = 1, K_0 = 1$\n$J_1 = Q_0, K_1 = Q_0$\n$J_2 = Q_1Q_0, K_2 = Q_1Q_0$\n\n然而，由于一个接线错误，为最高有效位触发器（FF2）提供逻辑信号的与门（AND gate）的输入被错误地连接了。与门的输入没有连接到 $Q_1$ 和 $Q_0$，而是被连接到了 $Q_1'$（中间触发器的反相输出）和 $Q_0$。因此，FF2 的输入逻辑变成了 $J_2=K_2=Q_1'Q_0$。FF1 和 FF0 的逻辑保持原始设计。\n\n假设计数器从状态 $Q_2Q_1Q_0 = 000$ 开始，确定这个故障计数器将循环经历的状态序列（以十进制表示）。该序列从 0 开始，到某个状态重复前的最后一个状态结束。\n\nA. 0, 1, 2, 3, 4, 5, 6, 7\nB. 0, 1, 6, 7, 4, 5, 2, 3\nC. 0, 7, 6, 5, 4, 3, 2, 1\nD. 0, 1, 3, 2, 6, 7, 5, 4\nE. 0, 1, 2, 4, 5, 6, 7, 3", "solution": "当JK触发器的输入为 $J=K=T$ 时，它作为一个由 $T$ 控制的翻转单元，其下一状态关系为 $Q^{+} = Q \\oplus T$。对于给定的3位同步计数器，其翻转信号为：\n- FF0: $T_{0}=1 \\implies Q_{0}^{+}=\\overline{Q_{0}}$。\n- FF1: $T_{1}=Q_{0} \\implies Q_{1}^{+}=Q_{1} \\oplus Q_{0}$。\n- FF2 (故障): $T_{2}=\\overline{Q_{1}}\\,Q_{0} \\implies Q_{2}^{+}=Q_{2} \\oplus (\\overline{Q_{1}}\\,Q_{0})$。\n\n从 $Q_{2}Q_{1}Q_{0}=000$ 开始，计算同步的下一状态：\n1) $000 \\to Q_{0}^{+}=1$, $Q_{1}^{+}=0\\oplus 0=0$, $Q_{2}^{+}=0\\oplus(1\\cdot 0)=0 \\Rightarrow 001$ (十进制 1)。\n2) $001 \\to Q_{0}^{+}=0$, $Q_{1}^{+}=0\\oplus 1=1$, $Q_{2}^{+}=0\\oplus(1\\cdot 1)=1 \\Rightarrow 110$ (十进制 6)。\n3) $110 \\to Q_{0}^{+}=1$, $Q_{1}^{+}=1\\oplus 0=1$, $Q_{2}^{+}=1\\oplus(0\\cdot 0)=1 \\Rightarrow 111$ (十进制 7)。\n4) $111 \\to Q_{0}^{+}=0$, $Q_{1}^{+}=1\\oplus 1=0$, $Q_{2}^{+}=1\\oplus(0\\cdot 1)=1 \\Rightarrow 100$ (十进制 4)。\n5) $100 \\to Q_{0}^{+}=1$, $Q_{1}^{+}=0\\oplus 0=0$, $Q_{2}^{+}=1\\oplus(1\\cdot 0)=1 \\Rightarrow 101$ (十进制 5)。\n6) $101 \\to Q_{0}^{+}=0$, $Q_{1}^{+}=0\\oplus 1=1$, $Q_{2}^{+}=1\\oplus(1\\cdot 1)=0 \\Rightarrow 010$ (十进制 2)。\n7) $010 \\to Q_{0}^{+}=1$, $Q_{1}^{+}=1\\oplus 0=1$, $Q_{2}^{+}=0\\oplus(0\\cdot 0)=0 \\Rightarrow 011$ (十进制 3)。\n8) $011 \\to Q_{0}^{+}=0$, $Q_{1}^{+}=1\\oplus 1=0$, $Q_{2}^{+}=0\\oplus(0\\cdot 1)=0 \\Rightarrow 000$ (十进制 0)，返回到起始状态。\n\n因此，以十进制表示的序列为 $0, 1, 6, 7, 4, 5, 2, 3$，与选项B相符。", "answer": "$$\\boxed{B}$$", "id": "1966237"}]}
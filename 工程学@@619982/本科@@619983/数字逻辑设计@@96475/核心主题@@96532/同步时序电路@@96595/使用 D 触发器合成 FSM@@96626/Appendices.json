{"hands_on_practices": [{"introduction": "我们的第一个练习是设计一个“边沿检测器”。在数字系统中，我们常常需要知道信号是何时发生变化的，而不是信号的当前值。这个练习将向你展示如何利用 FSM 实现这一功能，它完美地揭示了 FSM 最本质的作用：记忆。通过用一个状态位来“记住”前一个输入值，我们就能轻松地将其与当前输入值进行比较，从而检测到变化。[@problem_id:1938276]", "problem": "需要一个数字电路来监测一条由输入变量 $X$ 表示的单位串行数据线。每当输入位 $X$ 的值与其前一个时钟周期的值相比发生变化时，该电路必须产生一个持续一个时钟周期的高电平输出 $Z=1$。如果输入位 $X$ 与其前一个周期的值保持相同，则输出 $Z$ 必须为低电平，$Z=0$。这种行为是“边缘检测器”的典型特征。\n\n你的任务是设计一个 Mealy 型有限状态机 (FSM) 来实现这一逻辑。该 FSM 将使用一个 D 型触发器来构建。FSM 的状态由状态变量 $S$ 表示，即为该 D 型触发器的输出。触发器的输入用 $D$ 表示。\n\n确定触发器输入 $D$ 和机器输出 $Z$ 作为机器当前状态 $S$ 和输入 $X$ 函数的最小布尔逻辑表达式。你的答案应从以下选项中选择。\n\n设状态 $S=0$ 对应于前一个输入为 0，状态 $S=1$ 对应于前一个输入为 1。使用符号 $\\oplus$ 来表示异或 (XOR) 操作。\n\nA. $D = X$；$Z = S \\oplus X$\n\nB. $D = S$；$Z = S \\oplus X$\n\nC. $D = X$；$Z = (S \\oplus X)'$\n\nD. $D = S \\oplus X$；$Z = X$\n\nE. $D = X'$；$Z = S$", "solution": "我们用一个状态为 $S$ 的 D 型触发器来为该 FSM 建模。根据题目定义，$S$ 编码了前一个输入值：如果上一个输入位为 $0$，则 $S=0$；如果为 $1$，则 $S=1$。因此，在每个时钟周期，下一个状态必须更新为当前输入，以便在下一个周期它仍然代表“前一个输入”。对于 D 型触发器，其下一状态方程为 $S^{+}=D$。因此，要求下一个状态等于当前输入，即：\n$$\nS^{+}=X \\quad \\Rightarrow \\quad D=X.\n$$\n输出 $Z$ 必须在当前输入与前一个输入不同时为高电平，否则为低电平。由于 $S$ 代表前一个输入，这个条件就是\n$$\nZ=1 \\;\\text{iff}\\; X \\neq S.\n$$\n这恰好是异或关系，所以\n$$\nZ=S \\oplus X.\n$$\n\n为了通过枚举所有状态-输入组合来验证，对于每一对 $(S,X)$，我们要求：\n$$\n(S,X)=(0,0)\\;\\Rightarrow\\; Z=0,\\; S^{+}=0; \\quad\n(S,X)=(0,1)\\;\\Rightarrow\\; Z=1,\\; S^{+}=1;\\\\\n(S,X)=(1,0)\\;\\Rightarrow\\; Z=1,\\; S^{+}=0; \\quad\n(S,X)=(1,1)\\;\\Rightarrow\\; Z=0,\\; S^{+}=1.\n$$\n这些情况可以归纳为\n$$\nZ=S'X+SX'=S \\oplus X, \\quad S^{+}=X \\Rightarrow D=X.\n$$\n因此，最小布尔表达式为 $D=X$ 和 $Z=S \\oplus X$，这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1938276"}, {"introduction": "在掌握了如何记忆单个历史输入后，让我们更进一步，来检测一个特定的输入序列。序列检测是 FSM 在通信、数据处理和控制系统中的一个经典应用。这个练习要求我们设计一个能够识别连续两个‘1’的 Mealy 型 FSM。它将教会我们如何定义更抽象的状态，用以表示“在找到目标序列过程中的进展”，这是设计更复杂 FSM 的关键一步。[@problem_id:1938249]", "problem": "需要一个简单的数字电路来监测一条串行数据线上的特定错误模式。该电路有一个记为 $X$ 的单个同步串行输入，和一个记为 $Z$ 的单个输出。\n\n该电路必须设计成一个米利型（Mealy-type）有限状态机（FSM）。其功能是每当检测到输入序列 '11' 时，产生一个持续恰好一个时钟周期的输出 $Z=1$。检测必须能处理重叠序列。在所有其他输入条件下，输出 $Z$ 必须为 $0$。例如，如果输入流 $X$ 为 `0101110`，则对应的输出流 $Z$ 应为 `0000110`。\n\n你的任务是使用单个 D 型触发器来综合这个 FSM。触发器的状态由变量 $Q$ 表示。请使用如下状态分配：$Q=0$ 对应初始状态（即尚未检测到目标序列的任何部分），$Q=1$ 对应于已检测到一个 '1' 之后的状态。\n\n确定触发器 D 输入（记为 $D$）和状态机输出 $Z$ 的最小化“积之和”（SOP）布尔表达式。这两个表达式都应该用输入 $X$ 和状态变量 $Q$ 来表示。\n\n将你得到的 $D$ 和 $Z$ 的两个最终表达式以行矩阵的形式给出。矩阵的第一个元素应为 D 输入 ($D$) 的表达式，第二个元素应为输出 ($Z$) 的表达式。", "solution": "我们设计一个具有单个状态位 $Q$ 和输入 $X$ 的米利（Mealy）型 FSM，用于检测可重叠的 \"11\" 序列。状态分配如下：\n- $Q=0$：无相关历史（之前没有出现过 $1$），\n- $Q=1$：刚好看到一个前导 $1$（上一个输入是 $1$）。\n\n对于一个米利（Mealy）型状态机，输出 $Z$ 取决于当前状态 $Q$ 和当前输入 $X$，而下一状态 $Q^{+}$ 由 D 输入决定：$D=Q^{+}=f(Q,X)$。\n\n根据检测要求确定状态转换和输出：\n- 从状态 $Q=0$ 出发：\n  - 如果 $X=0$：保持在 $Q^{+}=0$；未检测到序列，因此 $Z=0$。\n  - 如果 $X=1$：转移到 $Q^{+}=1$（我们已经看到了一个 $1$）；尚未完成检测，因此 $Z=0$。\n- 从状态 $Q=1$ 出发：\n  - 如果 $X=0$：打断了连续的 $1$，所以转移到 $Q^{+}=0$；$Z=0$。\n  - 如果 $X=1$：此刻检测到 \"11\"；在本周期输出 $Z=1$，并且为了处理重叠情况，我们应能继续检测下一个 \"11\"，因此保持 $Q^{+}=1$（因为最后一个输入仍然是 $1$）。\n\n收集下一状态的值，可以得到 $D=Q^{+}$ 的真值表：\n- $(Q,X)=(0,0)\\Rightarrow D=0$,\n- $(Q,X)=(0,1)\\Rightarrow D=1$,\n- $(Q,X)=(1,0)\\Rightarrow D=0$,\n- $(Q,X)=(1,1)\\Rightarrow D=1$。\n\n因此，$D=1$ 当且仅当 $X=1$ 时成立，与 $Q$ 无关。以“积之和”（SOP）形式表示，最小项为 $\\overline{Q}X$ 和 $QX$，所以\n$$D=\\overline{Q}X+QX=X.$$\n\n对于米利（Mealy）型输出，$Z=1$ 仅在 $(Q,X)=(1,1)$ 时成立；在其他情况下 $Z=0$。因此，最小化的 SOP 表达式为\n$$Z=QX.$$\n\n这些表达式满足示例 $X=0101110\\mapsto Z=0000110$，因为 $Z=QX$ 会在（序列中）第二个和第三个连续的 1 出现时产生 1。", "answer": "$$\\boxed{\\begin{pmatrix} X & QX \\end{pmatrix}}$$", "id": "1938249"}, {"introduction": "最后一个练习将引入另一种类型的状态机——Moore 型 FSM，其输出仅取决于当前状态。我们将设计一个模4计数器，这是一个在数字设计中极为常见的组件。该练习不仅能让你熟悉 Moore 机的设计流程，还会让你体会到“状态编码”的巧妙之处，即如何用状态变量本身直接表示一个有意义的数值（如计数值）。通过这个实践，你将学会如何为算术逻辑来规划状态转移。[@problem_id:1938252]", "problem": "一个数字系统被设计用来监控串行数据流。该系统的一个组件用作计数器，必须连续计算自系统上次复位以来在单个输入线 $X$ 上出现的“1”的总数。计数以4为模进行。该系统将实现为一个同步摩尔型有限状态机（FSM）。\n\nFSM的状态存储在两个D型触发器中，其当前状态输出为 $Q_1$ 和 $Q_0$。状态分配被选择为直接表示计数值，其中状态 $(Q_1, Q_0)$ 对应于计数的二进制表示。例如，计数值3由状态 $(Q_1, Q_0) = (1, 1)$ 表示。该机器具有一个两位输出，但这并非本问题的重点。\n\n您的任务是确定最高有效位触发器输入 $D_1$ 的最小积之和（SOP）布尔表达式。该表达式应以机器的外部输入 $X$ 及其当前状态变量 $Q_1$ 和 $Q_0$ 来表示。在您的表达式中，使用上划线表示非运算（例如，$\\overline{A}$）。", "solution": "该机器以4为模对“1”的个数进行计数，状态编码 $(Q_{1},Q_{0}) \\in \\{00,01,10,11\\}$ 分别代表计数值0、1、2、3。在每个时钟周期：\n- 如果 $X=0$，计数值保持不变：$(Q_{1}^{+},Q_{0}^{+})=(Q_{1},Q_{0})$。\n- 如果 $X=1$，计数值以4为模递增：$(Q_{1}^{+},Q_{0}^{+})=(Q_{1},Q_{0})+1 \\bmod 4$。\n\n由于触发器是D型的，所以 $D_{1}=Q_{1}^{+}$。列举所有当前状态和输入对应的 $Q_{1}^{+}$：\n- 从状态 $00$：$X=0 \\Rightarrow 00$，所以 $Q_{1}^{+}=0$；$X=1 \\Rightarrow 01$，所以 $Q_{1}^{+}=0$。\n- 从状态 $01$：$X=0 \\Rightarrow 01$，所以 $Q_{1}^{+}=0$；$X=1 \\Rightarrow 10$，所以 $Q_{1}^{+}=1$。\n- 从状态 $10$：$X=0 \\Rightarrow 10$，所以 $Q_{1}^{+}=1$；$X=1 \\Rightarrow 11$，所以 $Q_{1}^{+}=1$。\n- 从状态 $11$：$X=0 \\Rightarrow 11$，所以 $Q_{1}^{+}=1$；$X=1 \\Rightarrow 00$，所以 $Q_{1}^{+}=0$。\n\n因此，$D_{1}=Q_{1}^{+}$ 的积之和（SOP）形式为：\n$$\nD_{1}=Q_{1}^{+}\n=\\overline{Q_{1}}\\,Q_{0}\\,X+Q_{1}\\,\\overline{Q_{0}}\\,\\overline{X}+Q_{1}\\,\\overline{Q_{0}}\\,X+Q_{1}\\,Q_{0}\\,\\overline{X}.\n$$\n通过卡诺图或布尔代数化简，可以得到最终的最小积之和表达式：\n$$\nD_{1}=Q_{1}\\,\\overline{Q_{0}}+Q_{1}\\,\\overline{X}+\\overline{Q_{1}}\\,Q_{0}\\,X.\n$$", "answer": "$$\\boxed{Q_{1}\\,\\overline{Q_{0}}+Q_{1}\\,\\overline{X}+\\overline{Q_{1}}\\,Q_{0}\\,X}$$", "id": "1938252"}]}
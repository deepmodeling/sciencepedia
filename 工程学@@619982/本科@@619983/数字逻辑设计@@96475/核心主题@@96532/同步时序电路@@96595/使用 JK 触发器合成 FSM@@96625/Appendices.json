{"hands_on_practices": [{"introduction": "我们从一个数字系统中基本且常见的构建模块——计数器——开始。这个练习将指导你设计一个受外部信号控制的2位加/减计数器。通过这个实践，你将掌握如何根据输入信号 $X$ 来精确控制状态机的转换路径（向上或向下计数），这是有限状态机（FSM）设计中的一个核心技能 [@problem_id:1938557]。", "problem": "设计一个使用两个JK触发器的同步2位二进制计数器。该计数器有一个单一控制输入，表示为 $X$。计数器的两个输出位是 $Q_1$（最高有效位，MSB）和 $Q_0$（最低有效位，LSB）。\n\n计数器的行为由输入 $X$ 决定，如下所示：\n- 如果 $X=0$，计数器按序列 00, 01, 10, 11 向上计数，然后绕回到 00。\n- 如果 $X=1$，计数器按序列 00, 11, 10, 01 向下计数，然后绕回到 00。\n\n计数器的状态由触发器输出 $Q_1Q_0$ 表示。MSB触发器的JK输入是 $J_1$ 和 $K_1$，LSB触发器的JK输入是 $J_0$ 和 $K_0$。您的任务是确定这四个输入作为 $Q_1$、$Q_0$ 和 $X$ 的函数的简化布尔表达式。\n\n下列哪组方程正确地实现了指定的计数器？\n\nA. $J_1 = Q_0\\bar{X} + \\bar{Q_0}X$, $K_1 = Q_0\\bar{X} + \\bar{Q_0}X$, $J_0 = 1$, $K_0 = 1$\n\nB. $J_1 = 1$, $K_1 = 1$, $J_0 = Q_1\\bar{X} + \\bar{Q_1}X$, $K_0 = Q_1\\bar{X} + \\bar{Q_1}X$\n\nC. $J_1 = \\bar{Q_0}\\bar{X} + Q_0X$, $K_1 = \\bar{Q_0}\\bar{X} + Q_0X$, $J_0 = 1$, $K_0 = 1$\n\nD. $J_1 = Q_0$, $K_1 = Q_0$, $J_0 = X$, $K_0 = X$\n\nE. $J_1 = Q_0 \\oplus X$, $K_1 = Q_0$, $J_0 = 1$, $K_0 = 1$", "solution": "我们设计一个使用两个JK触发器的同步2位可逆计数器，其控制输入为 $X$，输出为 $Q_{1}$ (MSB) 和 $Q_{0}$ (LSB)。所需的JK触发器激励关系为：\n$$\nJ = \\bar{Q}Q^{+}, \\quad K = Q\\bar{Q^{+}},\n$$\n等效地，当触发器必须翻转（$Q^{+}=\\bar{Q}$）时，我们可以强制 $J=K=1$；当它必须保持（$Q^{+}=Q$）时，我们可以设置 $J=K=0$。\n\n首先确定次态函数。\n\n1) 对于 LSB $Q_{0}$：\n从两个序列（向上和向下）来看，$Q_{0}$ 在每个时钟周期都翻转。因此，\n$$\nQ_{0}^{+} = \\bar{Q_{0}}.\n$$\n为了用JK触发器实现无条件翻转，选择\n$$\nJ_{0} = 1, \\quad K_{0} = 1.\n$$\n\n2) 对于 MSB $Q_{1}$：\n计算 $Q_{1}^{+}$ 作为 $Q_{1}$、$Q_{0}$ 和 $X$ 的函数。\n\n- 如果 $X=0$（向上计数）：序列为 $00 \\to 01 \\to 10 \\to 11 \\to 00$，可得出\n$$\nQ_{1}^{+} = Q_{1} \\oplus Q_{0}.\n$$\n- 如果 $X=1$（向下计数）：序列为 $00 \\to 11 \\to 10 \\to 01 \\to 00$，可得出\n$$\nQ_{1}^{+} = \\overline{Q_{1} \\oplus Q_{0}}.\n$$\n通过使用 $X$ 进行多路复用，将它们组合起来，\n$$\nQ_{1}^{+} = (Q_{1} \\oplus Q_{0}) \\oplus X.\n$$\n\n要通过翻转信号驱动JK触发器，利用翻转条件是 $T_{1} = Q_{1} \\oplus Q_{1}^{+}$ 这一事实。因此，\n$$\nT_{1} = Q_{1} \\oplus \\big((Q_{1} \\oplus Q_{0}) \\oplus X\\big) = Q_{0} \\oplus X,\n$$\n这里使用了 $\\oplus$ 的结合律和消去律。因此设置\n$$\nJ_{1} = K_{1} = T_{1} = Q_{0} \\oplus X.\n$$\n总而言之：\n$$\nJ_{1} = K_{1} = Q_{0} \\oplus X = Q_{0}\\bar{X} + \\bar{Q_{0}}X, \\quad J_{0} = 1, \\quad K_{0} = 1.\n$$\n与选项比较，这与选项A匹配。", "answer": "$$\\boxed{A}$$", "id": "1938557"}, {"introduction": "接下来，我们转向一个典型的FSM应用：序列检测。设计一个能够识别特定输入模式的系统是数字逻辑中的一项关键任务。这个练习要求你构建一个Mealy型状态机，它能磨练你将问题描述（检测一个模式）转化为正式的状态图，并最终实现为触发器和输出的硬件逻辑方程的核心能力 [@problem_id:1938558]。", "problem": "需要一个数字系统来监控一个由变量 $x$ 表示的串行二进制输入流。当检测到特定的非重叠序列 '011' 时，系统必须产生一个持续一个时钟周期的输出 $z=1$。对于任何其他输入，输出 $z$ 必须为 0。该检测过程必须实现为一个 Mealy 型有限状态机 (FSM)。如果序列在任何点被中断，状态机应复位到一个允许检测以 '0' 开头的新序列的状态。例如，如果输入为 '010'，最后的 '0' 被认为是新潜在序列的开始。\n\n该 FSM 将使用两个 JK 触发器来合成，其输出表示为 $Q_1$ 和 $Q_0$。状态分配如下：\n- `S0` (初始状态): $Q_1Q_0 = 00$\n- `S1` (检测到第一个 '0'): $Q_1Q_0 = 01$\n- `S2` (检测到 '01'): $Q_1Q_0 = 11$\n\n状态 $Q_1Q_0 = 10$ 是未使用的。确定用于触发器输入 ($J_1, K_1, J_0, K_0$) 和状态机输出 ($z$) 的正确的简化布尔表达式集。变量 $A$ 的补表示为 $\\bar{A}$。\n\n以下哪个选项代表了正确的逻辑方程组？\n\nA. $J_1 = Q_0 x$, $K_1 = 1$, $J_0 = \\bar{x}$, $K_0 = x$, $z = Q_1 x$\n\nB. $J_1 = Q_0 x$, $K_1 = Q_1$, $J_0 = \\bar{Q_1}\\bar{x}$, $K_0 = Q_1 x$, $z = Q_1 Q_0$\n\nC. $J_1 = Q_0 x$, $K_1 = Q_1$, $J_0 = \\bar{Q_1}\\bar{x}$, $K_0 = Q_1 x$, $z = Q_1 Q_0 x$\n\nD. $J_1 = Q_1$, $K_1 = Q_0 x$, $J_0 = \\bar{Q_1}\\bar{x}$, $K_0 = Q_1 x$, $z = Q_1 Q_0 x$\n\nE. $J_1 = \\bar{Q_0} x$, $K_1 = Q_1$, $J_0 = \\bar{x}$, $K_0 = \\bar{Q_1} x$, $z = Q_0 x$", "solution": "我们设计一个 Mealy FSM 来检测非重叠模式 011，状态编码 $Q_{1}Q_{0}$ 分别为 S0=00，S1=01，S2=11，其中状态 10 未使用。与非重叠规则和给定示例一致所需的状态转换如下：\n- 从 S0 $(00)$：如果 $x=0$，则转移到 S1 $(01)$；如果 $x=1$，则停留在 S0 $(00)$。\n- 从 S1 $(01)$：如果 $x=1$，则转移到 S2 $(11)$；如果 $x=0$，则停留在 S1 $(01)$ (新的 '0' 可以作为新序列的开始)。\n- 从 S2 $(11)$：如果 $x=1$，则检测到序列 011，在此期间输出 $z=1$，并转移到 S0 $(00)$ (非重叠)；如果 $x=0$，则转移到 S1 $(01)$ (尾部的 '0' 是新序列的开始，如示例 '010' 中所示)。\n\n因此，关于已使用状态的次态/输出表如下：\n- $(Q_{1},Q_{0},x)=(0,0,0)\\rightarrow (Q_{1}^{+},Q_{0}^{+})=(0,1),\\ z=0$。\n- $(0,0,1)\\rightarrow (0,0),\\ z=0$。\n- $(0,1,0)\\rightarrow (0,1),\\ z=0$。\n- $(0,1,1)\\rightarrow (1,1),\\ z=0$。\n- $(1,1,0)\\rightarrow (0,1),\\ z=0$。\n- $(1,1,1)\\rightarrow (0,0),\\ z=1$。\n\n使用 JK 触发器的激励条件：\n- 对于 $Q=0\\to Q^{+}=0$：$J=0$ ($K$ 为无关项)。\n- 对于 $Q=0\\to Q^{+}=1$：$J=1$ ($K$ 为无关项)。\n- 对于 $Q=1\\to Q^{+}=0$：$K=1$ ($J$ 为无关项)。\n- 对于 $Q=1\\to Q^{+}=1$：$K=0$ ($J$ 为无关项)。\n\n从 $Q_{1}$ 的行推导 $J_{1},K_{1}$：\n- 当 $Q_{1}=0$ 且 $Q_{1}^{+}=1$ 仅在 $(Q_{1},Q_{0},x)=(0,1,1)$ 时发生，因此 $J_{1}=1$ 仅在此处成立。一个使用已用状态和无关项行的最小化形式是 $J_{1}=\\bar{Q}_{1}Q_{0}x$。利用 $Q_{1}=1$ 时的无关项可简化为 $J_{1}=Q_{0}x$。\n- 当 $Q_{1}=1$ 时，我们总是要求 $Q_{1}^{+}=0$（$S2$ 的两个输入都导致 $Q_{1}^{+}=0$），因此当 $Q_{1}=1$ 时 $K_{1}=1$。一个最小化表达式是 $K_{1}=Q_{1}$。\n\n从 $Q_{0}$ 的行推导 $J_{0},K_{0}$：\n- 当 $Q_{0}=0$ 时，在 $(0,0,0)$ 处有 $Q_{0}^{+}=1$，在 $(0,0,1)$ 处有 $Q_{0}^{+}=0$，因此 $J_{0}=\\bar{Q}_{0}\\bar{x}$。使用未使用状态中的无关项，这可以等价地写为 $J_{0}=\\bar{Q}_{1}\\bar{x}$。\n- 当 $Q_{0}=1$ 时，我们仅在 $(1,1,1)$ 处要求 $Q_{0}^{+}=0$，因此 $K_{0}=Q_{1}x$。\n\nMealy 输出仅在状态为 S2 且 $x=1$ 时为1，因此\n$$\nz=Q_{1}Q_{0}x.\n$$\n\n综合这些遵循已用状态行为并利用未使用/无关项状态进行简化的布尔表达式，我们得到：\n$$\nJ_{1}=Q_{0}x,\\quad K_{1}=Q_{1},\\quad J_{0}=\\bar{Q}_{1}\\bar{x},\\quad K_{0}=Q_{1}x,\\quad z=Q_{1}Q_{0}x,\n$$\n这与选项 C 相匹配。", "answer": "$$\\boxed{C}$$", "id": "1938558"}, {"introduction": "最后，我们来挑战一个更复杂的、模拟真实通信协议任务的设计。这个练习的目标是构建一个串行数据校验器，它将多个概念集成在一个FSM框架内：一个用于追踪进度的状态计数器，一个用于累积数据值（奇偶校验位）的寄存器，以及条件输出逻辑。这个任务展示了FSM在管理复杂、依赖状态的操作方面的强大能力 [@problem_id:1938550]。", "problem": "您的任务是设计一个用作米利(Mealy)型有限状态机(FSM)的数字逻辑电路。该FSM用于一种自定义串行通信协议，其中数据被组织成4位字，在单个输入线 $X$ 上以每时钟周期一位的方式到达。该FSM的目的是通过生成一个输出信号 $E$ 来充当错误检测器。当一个字的第四位到达时，当且仅当该位的值不等于同一字的前三位的异或(XOR)值时，错误信号 $E$ 必须被置为逻辑高电平(1)。在所有其他时间，以及如果对第四位的检查成功，$E$ 必须为逻辑低电平(0)。在检查完每个4位字后，FSM必须自动复位到其初始状态，以正确处理下一个字。\n\n该FSM将使用三个JK触发器来实现。它们的输出标记为 $Q_A$、$Q_B$ 和 $Q_C$。输出为 $Q_A$ 和 $Q_B$ 的触发器将用作状态计数器，以跟踪4位字中的位置。输出为 $Q_C$ 的触发器将用于存储输入数据位的运行奇偶校验值（异或和）。FSM从 $Q_A = Q_B = Q_C = 0$ 的复位状态开始。计数器的状态分配定义如下：状态S0（初始）对应 $Q_AQ_B=00$，状态S1（接收1位后）为 $Q_AQ_B=01$，状态S2（接收2位后）为 $Q_AQ_B=10$，状态S3（接收3位后）为 $Q_AQ_B=11$。\n\n推导三个JK触发器输入（$J_A, K_A, J_B, K_B, J_C, K_C$）以及米利型输出 $E$ 的简化布尔逻辑表达式。选择提供所有七个正确表达式的选项。\n\nA.\n$J_A=Q_B$\n$K_A=Q_B$\n$J_B=1$\n$K_B=1$\n$J_C=(\\bar{Q_A}+\\bar{Q_B})X$\n$K_C=Q_A Q_B + X(Q_A \\oplus Q_B) + \\bar{X}\\bar{Q_A}\\bar{Q_B}$\n$E=Q_A Q_B(Q_C \\oplus X)$\n\nB.\n$J_A=Q_B$\n$K_A=Q_B$\n$J_B=1$\n$K_B=1$\n$J_C=X$\n$K_C=X$\n$E=Q_A Q_B(Q_C \\oplus X)$\n\nC.\n$J_A=Q_B$\n$K_A=Q_B$\n$J_B=1$\n$K_B=1$\n$J_C=(\\bar{Q_A}+\\bar{Q_B})X$\n$K_C=(\\bar{Q_A}+\\bar{Q_B})\\bar{X} + Q_A Q_B$\n$E=Q_A Q_B(Q_C \\oplus X)$\n\nD.\n$J_A=Q_B$\n$K_A=Q_B$\n$J_B=1$\n$K_B=1$\n$J_C=(\\bar{Q_A}+\\bar{Q_B})X$\n$K_C=Q_A Q_B + X(Q_A \\oplus Q_B) + \\bar{X}\\bar{Q_A}\\bar{Q_B}$\n$E=Q_A Q_B$\n\nE.\n$J_A = Q_A \\oplus Q_B$\n$K_A = \\overline{Q_A \\oplus Q_B}$\n$J_B = \\bar{Q_B}$\n$K_B = Q_B$\n$J_C=X$\n$K_C=X$\n$E=Q_A Q_B(Q_C \\oplus X)$", "solution": "设JK触发器的特性方程为\n$$\nQ^{+} = J\\bar{Q} + \\bar{K}Q.\n$$\n因此，一个JK触发器实现：J=K=0 保持，J=1,K=0 置位，J=0,K=1 复位，J=K=1 翻转。\n\n使用 $Q_A, Q_B$ 的计数器，其状态为 S0=00, S1=01, S2=10, S3=11：\n- 选择 $J_B=1$，$K_B=1$，这样 $Q_B$ 在每个时钟周期翻转。\n- 选择 $J_A=Q_B$，$K_A=Q_B$，这样当 $Q_B=1$ 时 $Q_A$ 翻转，当 $Q_B=0$ 时 $Q_A$ 保持。\n从 $Q_AQ_B=00$ 开始，这会产生同步序列 $00 \\to 01 \\to 10 \\to 11 \\to 00$，这正是模4计数所要求的。\n\n米利型输出条件：在第四位到达时（即当前状态为S3，因此 $Q_AQ_B=11$），当且仅当 $X \\neq$ 前三位的奇偶校验值时，置位错误信号。设 $Q_C$ 保存合并当前输入之前的运行奇偶校验值，因此在S3状态下，它等于前三位的异或值。因此，\n$$\nE = Q_A Q_B (Q_C \\oplus X).\n$$\n\n$Q_C$ 在一个字内的次态规范：\n- 在S0（第一位之前），期望 $Q_C^{+} = X$，以便接收第一位后的奇偶校验值等于 $X$。\n- 在S1和S2，期望 $Q_C^{+} = Q_C \\oplus X$ 以累积奇偶校验值。\n- 在S3（第四位），检查后我们必须为下一个字复位奇偶校验值，因此期望 $Q_C^{+} = 0$。\n\n将这些转换为每个状态的JK控制输入：\n- 要在S0状态下强制 $Q_C^{+} = X$ 而不论 $Q_C$ 为何，使用 $J_C=X$，$K_C=\\bar{X}$，因为\n$$\nQ_C^{+} = X\\bar{Q_C} + XQ_C = X.\n$$\n- 要在S1、S2状态下实现 $Q_C^{+} = Q_C \\oplus X$，使用 $J_C=X$，$K_C=X$（当 $X=1$ 时翻转，当 $X=0$ 时保持）。\n- 要在S3状态下强制 $Q_C^{+} = 0$，使用 $J_C=0$，$K_C=1$。\n\n使用状态译码信号对这些分段控制进行编码：\n- S0 是 $\\bar{Q_A}\\bar{Q_B}$。\n- S1 是 $\\bar{Q_A}Q_B$。\n- S2 是 $Q_A\\bar{Q_B}$。\n- S3 是 $Q_A Q_B$。\n\n对于 $J_C$：在S0、S1、S2状态下必须为 $X$，在S3状态下必须为 $0$。由于S3是唯一一个 $Q_AQ_B=11$ 的状态，因此S0、S1、S2的指示器是 $(\\bar{Q_A}+\\bar{Q_B})$。因此\n$$\nJ_C = (\\bar{Q_A}+\\bar{Q_B})X.\n$$\n\n对于 $K_C$：合并三种情况：\n- S0贡献的项是 $\\bar{X}\\bar{Q_A}\\bar{Q_B}$。\n- S1或S2贡献的项是 $X(\\bar{Q_A}Q_B + Q_A\\bar{Q_B}) = X(Q_A \\oplus Q_B)$。\n- S3贡献的项是 $Q_AQ_B$。\n因此\n$$\nK_C = \\bar{X}\\bar{Q_A}\\bar{Q_B} + X(Q_A \\oplus Q_B) + Q_AQ_B.\n$$\n\n总而言之，表达式为\n$$\nJ_A=Q_B,\\quad K_A=Q_B,\\quad J_B=1,\\quad K_B=1,\n$$\n$$\nJ_C=(\\bar{Q_A}+\\bar{Q_B})X,\\quad K_C=Q_A Q_B + X(Q_A \\oplus Q_B) + \\bar{X}\\bar{Q_A}\\bar{Q_B},\n$$\n$$\nE=Q_A Q_B(Q_C \\oplus X),\n$$\n这与选项A相符。", "answer": "$$\\boxed{A}$$", "id": "1938550"}]}
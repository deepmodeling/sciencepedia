{"hands_on_practices": [{"introduction": "掌握任何时序逻辑电路的第一步是能够准确地追踪其状态随时间的变化。本练习将引导你完成一个基本但至关重要的任务：根据 `LOAD` 控制信号，在多个时钟周期内预测一个并行输入/并行输出（PIPO）寄存器的输出。这个练习旨在巩固你对 PIPO 寄存器核心功能——加载（load）与保持（hold）——的理解。[@problem_id:1950446]", "problem": "一个4位同步数字寄存器有一个4位并行数据输入 $D = D_3D_2D_1D_0$ 和一个4位并行输出 $Q = Q_3Q_2Q_1Q_0$。该寄存器的状态在时钟信号的上升沿更新。该寄存器的行为由一个名为 `LOAD` 的信号控制。寄存器的下一个状态，记为 $Q_{next}$，由当前状态 $Q_{current}$ 和输入数据 $D$ 决定，具体如下：\n- 如果 `LOAD` 为高电平（逻辑1），寄存器在下一个时钟沿执行并行加载操作：$Q_{next} = D$。\n- 如果 `LOAD` 为低电平（逻辑0），寄存器在下一个时钟沿保持其当前值：$Q_{next} = Q_{current}$。\n\n考虑以下事件序列：\n1. 最初，在任何时钟脉冲之前，寄存器的输出为 $Q = 1011_2$。\n2. 并行数据输入保持恒定为 $D = 1101_2$。\n3. `LOAD` 信号在第一个时钟周期内设置为高电平，然后在第二个时钟周期内设置为低电平。\n4. 系统接收两次时钟脉冲。\n\n在第二个时钟脉冲之后，输出 $Q$ 的4位二进制值是多少？请用一个4位的二进制字符串（例如，1001）表示你的答案。", "solution": "我们根据指定的控制方式对每个时钟上升沿的同步寄存器更新进行建模：\n- 如果 LOAD 为高电平，则在下一个上升沿 $Q_{next} = D$。\n- 如果 LOAD 为低电平，则在下一个上升沿 $Q_{next} = Q_{current}$ （保持）。\n\n设 $Q^{(k)}$ 表示第 $k$ 个时钟脉冲后的寄存器输出。在任何时钟脉冲之前的初始条件由下式给出\n$$\nQ^{(0)} = 1011_{2}.\n$$\n输入数据是恒定的，\n$$\nD = 1101_{2}.\n$$\n在第一个时钟周期内，LOAD 为高电平。因此，在第一个上升沿，\n$$\nQ^{(1)} = Q_{next} = D = 1101_{2}.\n$$\n在第二个时钟周期内，LOAD 为低电平。因此，在第二个上升沿，寄存器保持其当前值：\n$$\nQ^{(2)} = Q_{next} = Q_{current} = Q^{(1)} = 1101_{2}.\n$$\n因此，在第二个时钟脉冲之后，输出为 $1101$。", "answer": "$$\\boxed{1101}$$", "id": "1950446"}, {"introduction": "了解一个数字组件能做什么固然重要，但理解其局限性则更能深化我们对它设计的认知。这个练习通过一个思想实验，挑战你思考标准 PIPO 寄存器的一个内在设计约束。通过分析为什么无法实现“选择性更新”，你将更深刻地理解单个全局控制信号在数字设计中的作用及其带来的权衡。[@problem_id:1950439]", "problem": "一位数字系统工程师正在为一个控制系统设计一个专用的4位数据缓冲器。一个标准的4位并行输入并行输出(PIPO)寄存器可供使用。该PIPO寄存器由四个边沿触发的D型触发器构成，并具有四个并行数据输入（$D_3, D_2, D_1, D_0$）和四个并行数据输出（$Q_3, Q_2, Q_1, Q_0$）。所有四个触发器都连接到一个公共时钟(CLK)信号。该寄存器的加载行为由一条单一的、高电平有效的加载使能(LOAD)控制线控制，该控制线也对所有触发器公共。当LOAD置为有效（逻辑高电平）时，并行输入上的数据将在下一个有效时钟边沿被加载到触发器中。当LOAD置为无效（逻辑低电平）时，触发器会保持其当前存储的值，忽略输入。\n\n设计规范要求一种“选择性更新”操作。在此操作期间，缓冲器的两个最高有效位(MSBs)（对应于输出 $Q_3$ 和 $Q_2$）必须用其各自输入 $D_3$ 和 $D_2$ 的新值进行更新。同时，两个最低有效位(LSBs)（对应于输出 $Q_1$ 和 $Q_0$）必须保持其当前存储的值，不受输入 $D_1$ 和 $D_0$ 上任何数据的影响。该工程师试图使用所述的单个标准PIPO寄存器来实现此功能。\n\n下列哪个陈述正确地指出了为何使用单个标准PIPO寄存器的这种实现方式无法完成所需的选择性更新？请选择唯一最佳答案。\n\nA. 公共时钟信号迫使所有触发器在每个有效边沿改变其状态，因此不可能保持任何位的状态。\n\nB. LSBs和MSBs通过触发器的传播延迟固有不同，导致数据损坏的竞争冒险。\n\nC. PIPO寄存器只能串行加载数据；它不能并行更新多个位。\n\nD. 单一的、共享的LOAD使能信号全局作用于所有触发器，阻止了在同一时钟周期内混合加载和保持操作。\n\nE. D型触发器无法保持其先前的状态，在时钟作用下总是会将D输入传递到Q输出。", "solution": "设公共加载使能为 $L$，公共时钟为CLK，并考虑每个位 $i \\in \\{3,2,1,0\\}$，其输入为 $D_{i}$，输出为 $Q_{i}$。对于带有同步加载使能的标准边沿触发D型触发器，每个位的次态函数由相同的使能 $L$ 控制：\n$$\nQ_{i}^{+} = L D_{i} + \\overline{L}\\, Q_{i}.\n$$\n该布尔关系式表明，当 $L=1$ (LOAD置为有效)时，次态等于输入($Q_{i}^{+}=D_{i}$)，而当 $L=0$ (LOAD置为无效)时，次态等于现态($Q_{i}^{+}=Q_{i}$)，即保持状态。\n\n因为在单个PIPO寄存器中，相同的 $L$ 对所有四个触发器都是公共的，所以在给定的时钟边沿，所有位的转换都由 $L$ 的单个值全局决定：\n- 如果 $L=1$，那么对于所有 $i \\in \\{3,2,1,0\\}$，$Q_{i}^{+}=D_{i}$，因此所有四位都加载新值。\n- 如果 $L=0$，那么对于所有 $i \\in \\{3,2,1,0\\}$，$Q_{i}^{+}=Q_{i}$，因此所有四位都保持原值。\n\n所需的选择性更新规定，在同一个时钟边沿，$Q_{3}$ 和 $Q_{2}$ 必须加载新值（$Q_{3}^{+}=D_{3}$ 和 $Q_{2}^{+}=D_{2}$），而同时 $Q_{1}$ 和 $Q_{0}$ 必须保持原值（$Q_{1}^{+}=Q_{1}$ 和 $Q_{0}^{+}=Q_{0}$）。根据上述方程，实现 $Q_{3}^{+}=D_{3}$ 和 $Q_{2}^{+}=D_{2}$ 需要 $L=1$，但实现 $Q_{1}^{+}=Q_{1}$ 和 $Q_{0}^{+}=Q_{0}$ 需要 $L=0$。一个单一、共享的 $L$ 不能在同一个时钟边沿同时为 $1$ 和 $0$。因此，使用一个标准的PIPO寄存器和一条单一的全局LOAD线，不可能在同一个周期内实现加载和保持的混合操作。\n\n评估各个选项：\n- A是错误的，因为当同步加载路径被禁用时，边沿触发的D触发器确实会保持状态；仅时钟本身并不会强制状态改变。\n- B是错误的；传播延迟的差异并不会造成使用单一全局使能无法实现选择性更新这一根本性问题。\n- C是错误的；PIPO寄存器本身就支持并行加载。\n- D是正确的；单一的、共享的LOAD使能信号全局生效，阻止了在同一时钟边沿内出现混合加载/保持的行为。\n- E是错误的；当同步使能未选择输入路径时，D触发器可以保持其先前的状态。\n\n因此，根本原因在于单一LOAD信号的全局性特点。", "answer": "$$\\boxed{D}$$", "id": "1950439"}, {"introduction": "理论知识的真正考验在于能否将其应用于解决实际问题，包括分析非理想情况。本练习模拟了一个常见的工程场景：硬件故障。通过分析一个内部多路选择器出现故障的 PIPO 寄存器，你将把对寄存器理想行为的理解，应用到对其内部结构的深入分析和故障排查中。[@problem_id:1950454]", "problem": "一个8位并行输入并行输出 (PIPO) 移位寄存器，其输出标记为 $Q_7, Q_6, \\dots, Q_0$，由八个正边沿触发的 D 触发器构成。该寄存器有一个单一控制信号 `LOAD`。寄存器的行为由 `LOAD` 信号决定，具体如下：\n- 如果 `LOAD = 1`，寄存器在下一个时钟上升沿执行并行加载操作。每个触发器 $Q_i$ 的值被更新为来自相应并行数据输入 $D_i$ 的值。\n- 如果 `LOAD = 0`，寄存器保持其当前状态。每个触发器 $Q_i$ 在下一个时钟上升沿保持其值不变。\n\n在内部，这个逻辑是通过为每个 D 触发器配备一个 2-to-1 多路选择器来实现的。该多路选择器在外部数据输入 $D_i$（用于加载）和触发器自身的输出 $Q_i$（用于保持）之间进行选择。该寄存器出现了一个制造缺陷：对应于位 $Q_4$ 触发器的多路选择器有故障。它永久地卡在选择“保持”输入路径的状态（即其输出总是连接到 $Q_4$），无论 `LOAD` 信号的状态如何。所有其他位（$Q_7, Q_6, Q_5, Q_3, Q_2, Q_1, Q_0$）均根据 `LOAD` 信号正常工作。\n\n寄存器被初始化为状态 $Q = 10101010$。然后，对其施加包含以下控制和数据输入的三个时钟脉冲序列：\n1.  **时钟脉冲 1：** `LOAD` = 1, 并行数据 `D` = 11110000。\n2.  **时钟脉冲 2：** `LOAD` = 0。\n3.  **时钟脉冲 3：** `LOAD` = 1, 并行数据 `D` = 00001111。\n\n确定在第三个时钟脉冲结束后，寄存器中存储的 8 位二进制值，表示为字符串 $Q_7Q_6Q_5Q_4Q_3Q_2Q_1Q_0$。请以一个 8 位的二进制字符串形式给出答案。", "solution": "该寄存器使用正边沿触发的D触发器，每个输入端都有一个 2-to-1 多路选择器。对于每个位 $i \\in \\{0,1,\\dots,7\\}$，在上升沿的理想更新规则是：\n$$\nQ_{i}^{+}=\n\\begin{cases}\nD_{i}, & \\text{if LOAD}=1,\\\\\nQ_{i}, & \\text{if LOAD}=0,\n\\end{cases}\n$$\n其中 $Q_{i}^{+}$ 表示时钟沿之后的值。由于缺陷，位 $i=4$ 的多路选择器卡在选择保持路径上，因此其更新规则是：\n$$\nQ_{4}^{+}=Q_{4} \\quad \\text{for all values of LOAD and } D_{4}.\n$$\n\n初始状态：$Q_{7}Q_{6}Q_{5}Q_{4}Q_{3}Q_{2}Q_{1}Q_{0}=10101010$，所以 $Q_{7}=1$, $Q_{6}=0$, $Q_{5}=1$, $Q_{4}=0$, $Q_{3}=1$, $Q_{2}=0$, $Q_{1}=1$, $Q_{0}=0$。\n\n时钟脉冲 1，此时 `LOAD` $=1$ 且 $D=11110000$ (即 $D_{7}=1$, $D_{6}=1$, $D_{5}=1$, $D_{4}=1$, $D_{3}=0$, $D_{2}=0$, $D_{1}=0$, $D_{0}=0$)：\n- 对于 $i \\neq 4$：$Q_{i}^{+}=D_{i}$。\n- 对于 $i=4$：$Q_{4}^{+}=Q_{4}=0$。\n因此在脉冲 1 之后，\n$$\nQ=Q_{7}\\dots Q_{0}=11100000.\n$$\n\n时钟脉冲 2，此时 `LOAD` $=0$：\n- 对于所有 $i$：$Q_{i}^{+}=Q_{i}$（特别是 $Q_{4}^{+}=Q_{4}$）。\n因此在脉冲 2 之后，\n$$\nQ=11100000.\n$$\n\n时钟脉冲 3，此时 `LOAD` $=1$ 且 $D=00001111$ (即 $D_{7}=0$, $D_{6}=0$, $D_{5}=0$, $D_{4}=0$, $D_{3}=1$, $D_{2}=1$, $D_{1}=1$, $D_{0}=1$)：\n- 对于 $i \\neq 4$：$Q_{i}^{+}=D_{i}$。\n- 对于 $i=4$：$Q_{4}^{+}=Q_{4}=0$。\n因此在脉冲 3 之后，\n$$\nQ=00001111.\n$$\n\n因此，在第三个时钟脉冲结束后，存储的 8 位值是 $00001111$。", "answer": "$$\\boxed{00001111}$$", "id": "1950454"}]}
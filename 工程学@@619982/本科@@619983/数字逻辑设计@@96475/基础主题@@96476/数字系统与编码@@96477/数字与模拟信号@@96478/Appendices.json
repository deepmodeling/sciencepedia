{"hands_on_practices": [{"introduction": "将物理世界中的连续信号转换为数字系统可以处理的离散值，是数模转换的核心任务。本练习模拟了一个常见场景：使用环境传感器（如遥控潜水器上的压力传感器）进行测量。通过这个练习，我们将完整地走过一个信号处理链条：从物理现象（深度）到其模拟电压表示，再到最终的数字编码，从而深入理解模数转换器（ADC）的工作原理。[@problem_id:1929631]", "problem": "一台深海遥控潜水器（ROV）配备了压力传感器以确定其深度。该传感器用于测量表压，并提供线性电压输出。在海平面处，表压为 0 kPa，传感器输出 0.5 V。在其最大额定压力 1000 kPa 下，传感器输出 4.5 V。\n\n传感器的模拟电压信号由一个10位模数转换器（ADC）转换为数字值。ADC 的固定输入电压范围为 0 V 到 5.0 V。ADC 的转换过程通过线性关系将输入电压映射到一个数字码，然后截断结果以产生最终的整数值（即，它应用了向下取整函数）。\n\n假设海水密度为 $\\rho = 1025 \\text{ kg/m}^3$，重力加速度为 $g = 9.81 \\text{ m/s}^2$，计算当 ROV 位于 65.0 m 深度时，ADC 输出的整数数字值。", "solution": "我们使用流体静压公式计算深度的表压，传感器的线性电压转换关系，以及ADC的线性映射和截断规则。\n\n1) 深度的流体静力表压：\n$$p=\\rho g h.$$\n当 $\\rho=1025\\,\\text{kg/m}^{3}$，$g=9.81\\,\\text{m/s}^{2}$ 且 $h=65.0\\,\\text{m}$ 时，\n$$p=1025\\times 9.81\\times 65.0\\,\\text{Pa}=653591.25\\,\\text{Pa}=653.59125\\,\\text{kPa}.$$\n\n2) 传感器电压输出（在 $0\\,\\text{kPa}$ 时为 $0.5\\,\\text{V}$，在 $1000\\,\\text{kPa}$ 时为 $4.5\\,\\text{V}$，呈线性关系）：\n令 $V_{0}=0.5$ 且 $V_{1}=4.5$。则\n$$V_{s}=V_{0}+(V_{1}-V_{0})\\frac{p}{1000\\,\\text{kPa}}=0.5+4.0\\times\\frac{653.59125}{1000}=3.114365\\,\\text{V}.$$\n\n3) ADC 映射（10位，$0$ 到 $5.0\\,\\text{V}$）。一种常见的转换方法是，代码值与电压成正比，其中最大代码 ($2^{10}-1 = 1023$) 对应于满量程电压。然而，根据问题的描述——“线性映射”和“截断”——更标准的解释是，数字代码 $C$ 通过 $C=\\lfloor V_s / V_{LSB} \\rfloor$ 获得，其中 $V_{LSB}$ 是一个量化步长的大小。对于一个覆盖 $[0, V_{ref}]$ 范围的 $N$ 位ADC，量化步长通常定义为 $V_{LSB} = V_{ref} / 2^N$。因此，对于一个 $10$ 位、$5.0$ V的ADC，我们有 $V_{LSB} = 5.0 / 2^{10} = 5.0 / 1024$ V。\n数字输出值为：\n$$C=\\lfloor \\frac{V_s}{V_{LSB}} \\rfloor=\\lfloor \\frac{3.114365}{5.0/1024} \\rfloor = \\lfloor 3.114365 \\times \\frac{1024}{5.0} \\rfloor = \\lfloor 637.799... \\rfloor=637.$$", "answer": "$$\\boxed{637}$$", "id": "1929631"}, {"introduction": "在数字领域处理完数据后，我们常常需要将其转换回模拟信号，以便与物理世界互动，例如产生声音或控制电机。这个练习将探讨数模转换器（DAC）在这一逆向过程中的作用。我们将通过分析生成信号的特性——具体来说是其均方根（RMS）电压——来理解重构后模拟输出的性质。[@problem_id:1929641]", "problem": "一个理想的3位数模转换器（DAC）用于生成一个周期性的模拟电压波形。3位二进制输入（由其十进制等效值 $D$ 表示，其中 $D$ 的范围从0到7）与模拟输出电压 $V_{out}$ 之间的关系由以下公式给出：\n$$V_{out} = V_{ref} \\frac{D}{2^{3}}$$\n参考电压为 $V_{ref} = 5.12$ V。\n\nDAC的二进制输入顺序循环遍历所有可能的状态，从 $(000)_2$ 开始，递增至 $(111)_2$。每个二进制码保持恒定的时间间隔 $T$。当输入达到 $(111)_2$ 后，循环立即从 $(000)_2$ 重新开始。\n\n计算所得周期性模拟输出信号 $V_{out}(t)$ 在一个完整周期内的均方根（RMS）电压。答案以伏特为单位，并四舍五入到三位有效数字。", "solution": "3位数模转换器的输出是分段恒定的，其值对应于 $D=0,1,\\ldots,7$，每个值都保持相同的时间长度 $T$。完整周期为 $P=8T$。对于一个周期信号 $v(t)$，其在一个周期 $P$ 内的均方根值为\n$$\nV_{\\mathrm{RMS}}=\\sqrt{\\frac{1}{P}\\int_{0}^{P} v^{2}(t)\\,dt}.\n$$\n由于波形在每个长度为 $T$ 的子区间内是恒定的，其值为 $V_{D}=V_{\\mathrm{ref}}\\frac{D}{8}$（对于 $D=0,1,\\ldots,7$），积分可以简化为对八个离散电压值的均方根：\n$$\nV_{\\mathrm{RMS}}^{2}=\\frac{1}{8T}\\sum_{D=0}^{7}\\int_{DT}^{(D+1)T} V_D^2 dt = \\frac{1}{8T}\\sum_{D=0}^{7} V_D^2 T = \\frac{1}{8}\\sum_{D=0}^{7}\\left(V_{\\mathrm{ref}}\\frac{D}{8}\\right)^{2}=\\frac{V_{\\mathrm{ref}}^{2}}{512}\\sum_{D=0}^{7}D^{2}.\n$$\n使用公式 $\\sum_{k=1}^{n}k^{2}=\\frac{n(n+1)(2n+1)}{6}$，当 $n=7$ 时，可得\n$$\n\\sum_{D=0}^{7}D^{2}=\\sum_{D=1}^{7}D^{2}=\\frac{7(7+1)(2 \\cdot 7+1)}{6}=\\frac{7\\cdot 8\\cdot 15}{6}=140.\n$$\n因此，\n$$\nV_{\\mathrm{RMS}}^{2}=V_{\\mathrm{ref}}^{2}\\cdot\\frac{140}{512}=V_{\\mathrm{ref}}^{2}\\cdot\\frac{35}{128},\n$$\n所以\n$$\nV_{\\mathrm{RMS}}=V_{\\mathrm{ref}}\\sqrt{\\frac{35}{128}}.\n$$\n当 $V_{\\mathrm{ref}}=5.12$ V 时，可得\n$$\nV_{\\mathrm{RMS}}=5.12\\sqrt{\\frac{35}{128}} \\approx 5.12 \\times 0.52291 = 2.6773\\ldots\\,\\text{V}.\n$$\n四舍五入到三位有效数字，\n$$\nV_{\\mathrm{RMS}}\\approx 2.68\\,\\text{V}.\n$$", "answer": "$$\\boxed{2.68}$$", "id": "1929641"}, {"introduction": "模拟信号与数字信号之间的转换并非完美无损，总会引入一定程度的失真。这个最终的练习将深入探讨转换误差这一关键概念。通过模拟一个完整的“往返”过程——从一个原始模拟信号，经过模数转换器（ADC），再通过数模转换器（DAC）重构——我们将精确计算整个过程引入的总误差，从而定量地衡量信号的保真度。[@problem_id:1929638]", "problem": "一个经典的工程任务涉及将模拟信号转换为数字格式进行处理，然后再转换回模拟信号。然而，这个过程并非完美，会引入失真。考虑一个周期性的模拟锯齿波电压信号 $V_{in}(t)$，它在一个周期 $T = 1.0$ ms 内从 $0$ V 线性上升到满量程电压 $V_{FS} = 3.3$ V。\n\n该信号由一个4位模数转换器（ADC）进行采样和数字化。ADC的满量程输入范围为 $0$ V 到 $V_{FS}$。采样以 $f_s = 64$ kHz 的恒定频率进行。对于任意给定的输入采样电压 $v$，ADC确定量化区间索引 $n = \\text{floor}(v / \\Delta)$，其中 $\\Delta$ 是量化步长，并输出该整数作为数字表示。\n\n数字码 $n$ 立即被送入一个数模转换器（DAC），该转换器连接到一个零阶保持器（ZOH）电路。对于给定的数字输入 $n$，DAC生成一个对应于量化区间中点的模拟电压，即 $V_{DAC} = (n + 0.5)\\Delta$。ZOH电路将此电压水平保持恒定，直到下一个样本被转换。所得信号即为最终的模拟输出信号 $V_{out}(t)$。\n\n计算在一个完整周期内，最终输出信号与原始输入信号之间的总均方根（RMS）误差。RMS误差定义为 $e_{RMS} = \\sqrt{\\frac{1}{T}\\int_0^T (V_{out}(t) - V_{in}(t))^2 dt}$。\n\n将最终答案以毫伏（mV）为单位表示，并四舍五入到三位有效数字。", "solution": "输入斜坡信号在一个周期内是线性的：对于 $0 \\leq t < T$，有 $V_{in}(t) = s t$，斜率 $s = V_{FS}/T$。4位ADC的步长为 $\\Delta = V_{FS}/2^{4} = V_{FS}/16$。采样周期为 $T_{s} = 1/f_{s}$，并且 $T = 64 T_{s}$，因为 $f_{s} T = 64$ kHz $\\times$ 1.0 ms = 64。\n\n在采样时刻 $t_{m} = m T_{s}$（其中 $m = 0,1,\\dots,63$），输入为\n$$\nV_{in}(t_{m}) = \\frac{V_{FS}}{T} m T_{s} = V_{FS} \\frac{m}{64} = \\frac{16m}{64}\\Delta = \\frac{m}{4}\\,\\Delta,\n$$\n所以量化区间索引 $n_{m} = \\lfloor V_{in}(t_m) / \\Delta \\rfloor = \\lfloor (m/4)\\Delta / \\Delta \\rfloor = \\lfloor m/4 \\rfloor$。在 $[t_{m},t_{m+1})$ 区间内保持的DAC输出为\n$$\nV_{out}(t) = V_{o,m} = (n_{m}+0.5)\\Delta.\n$$\n误差信号 $e(t) = V_{out}(t) - V_{in}(t)$。在一个采样区间 $t \\in [t_{m},t_{m+1})$ 上，记 $t = t_{m} + \\tau$，其中 $0 \\leq \\tau < T_{s}$。那么\n$$\nV_{in}(t) = V_{in}(t_{m}) + s \\tau,\\quad e(t) = V_{out}(t) - V_{in}(t) = (V_{o,m} - V_{in}(t_{m})) - s \\tau.\n$$\n记采样时刻的瞬时误差为 $e_{m} = V_{o,m} - V_{in}(t_{m})$。单个采样区间上的误差平方积分为\n$$\n\\int_{t_{m}}^{t_{m+1}} e^{2}(t)\\,dt = \\int_{0}^{T_{s}} (e_{m} - s \\tau)^{2}\\,d\\tau = e_{m}^{2} T_{s} - e_{m} s T_{s}^{2} + \\frac{s^{2} T_{s}^{3}}{3}.\n$$\n对所有 $64$ 个区间求和，得到总积分 $I_{\\text{tot}}$。均方根误差的平方为\n$$\ne_{\\text{RMS}}^{2} = \\frac{1}{T} I_{\\text{tot}} = \\frac{1}{64T_s} \\sum_{m=0}^{63} \\left( e_{m}^{2} T_{s} - e_{m} s T_{s}^{2} + \\frac{s^{2} T_{s}^{3}}{3} \\right) = \\frac{1}{64} \\sum e_{m}^{2} - \\frac{s T_s}{64} \\sum e_m + \\frac{s^2 T_s^2}{3}.\n$$\n我们现在计算 $e_{m}$。由于 $m = 4k + r$（$k$是商，$r \\in \\{0,1,2,3\\}$是余数），则 $n_m=k$。\n$$\ne_{m} = (k + 0.5)\\Delta - \\frac{m}{4}\\Delta = (k + 0.5)\\Delta - \\frac{4k+r}{4}\\Delta = \\left( k + 0.5 - k - \\frac{r}{4} \\right)\\Delta = \\Delta \\left( \\frac{1}{2} - \\frac{r}{4} \\right).\n$$\n对于每四个连续样本（一个块， $r=0,1,2,3$），$e_m$ 的值序列为 $\\{\\frac{\\Delta}{2}, \\frac{\\Delta}{4}, 0, -\\frac{\\Delta}{4}\\}$。\n周期 $T$ 内有 $16$ 个这样的块。在一个块内，和为 $\\sum e_{m} = \\frac{\\Delta}{2}$，和的平方为 $\\sum e_{m}^{2} = \\Delta^{2} ( (1/2)^2 + (1/4)^2 + 0^2 + (-1/4)^2 ) = \\Delta^{2} ( 1/4 + 1/16 + 1/16 ) = \\frac{6\\Delta^{2}}{16} = \\frac{3\\Delta^{2}}{8}$。\n总和为 $\\sum_{m=0}^{63} e_{m} = 16 \\times \\frac{\\Delta}{2} = 8\\Delta$ 和 $\\sum_{m=0}^{63} e_{m}^{2} = 16 \\times \\frac{3\\Delta^{2}}{8} = 6\\Delta^{2}$。\n代入 $e_{\\text{RMS}}^{2}$ 的表达式中，并使用 $s T_s = (V_{FS}/T) T_s = V_{FS}/64$ 和 $\\Delta = V_{FS}/16$：\n$$\ne_{\\text{RMS}}^{2} = \\frac{6\\Delta^{2}}{64} - \\frac{V_{FS}/64}{64} (8\\Delta) + \\frac{(V_{FS}/64)^2}{3} = \\frac{3\\Delta^2}{32} - \\frac{8\\Delta V_{FS}}{4096} + \\frac{V_{FS}^2}{12288}.\n$$\n代入 $\\Delta = V_{FS}/16$：\n$$\ne_{\\text{RMS}}^{2} = \\frac{3(V_{FS}/16)^2}{32} - \\frac{8(V_{FS}/16) V_{FS}}{4096} + \\frac{V_{FS}^2}{12288} = \\frac{3V_{FS}^2}{8192} - \\frac{V_{FS}^2/2}{4096} + \\frac{V_{FS}^2}{12288} = \\frac{3V_{FS}^2}{8192} - \\frac{V_{FS}^2}{8192} + \\frac{V_{FS}^2}{12288}.\n$$\n$$\ne_{\\text{RMS}}^{2} = \\frac{2V_{FS}^2}{8192} + \\frac{V_{FS}^2}{12288} = \\frac{V_{FS}^2}{4096} + \\frac{V_{FS}^2}{12288} = V_{FS}^2 \\left( \\frac{3+1}{12288} \\right) = \\frac{4V_{FS}^2}{12288} = \\frac{V_{FS}^2}{3072}.\n$$\n这是一个著名的结果，即对于线性斜坡输入，ZOH和中点DAC引入的组合误差的均方根值等于标准量化噪声 $\\Delta/\\sqrt{12}$。\n$$\ne_{\\text{RMS}} = \\sqrt{\\frac{V_{FS}^2}{3072}} = \\frac{V_{FS}}{\\sqrt{3072}}.\n$$\n对于 $V_{FS} = 3.3$ V，以毫伏（mV）为单位的RMS误差是\n$$\ne_{\\text{RMS}} = \\frac{1000 \\times 3.3}{\\sqrt{3072}} = \\frac{3300}{32\\sqrt{3}} = \\frac{825}{8\\sqrt{3}} \\approx 59.539... \\text{ mV}.\n$$\n四舍五入到三位有效数字，结果为 $59.5$ mV。", "answer": "$$\\boxed{59.5}$$", "id": "1929638"}]}
{"hands_on_practices": [{"introduction": "本练习将帮助你掌握数字波形分析中的一个基本概念：传播延迟 ($t_{pd}$)。通过分析一个奇偶校验电路，你将学习如何根据输入信号的变化和指定的电路延迟，精确预测输出波形的变化时刻。这项技能是理解和调试所有数字系统时序行为的基础。[@problem_id:1929912]", "problem": "一个数字系统包含一个8位并行数据总线，记为 $D[7:0]$，其中 $D[7]$ 是最高有效位。该总线由一个组合逻辑电路监控，该电路生成一个单位输出比特 $P_{even}$，表示8位数据的偶校验位。偶校验方案确保在9位字（8个数据位加上1个校验位）中，'1'的总数始终为偶数。该校验位生成电路具有固定的传播延迟 $t_{pd} = 4.5 \\text{ ns}$，该延迟指的是从输入数据总线 $D$ 上的任何变化到输出 $P_{even}$ 上相应变化所需的时间。\n\n最初，总线上的数据稳定在十六进制值 $0x55$。在时间 $t = 10.0 \\text{ ns}$ 时，总线上的数据值瞬时变为十六进制值 $0xD5$ 并此后保持稳定。\n\n下列哪个陈述准确地描述了输出信号 $P_{even}$ 随时间（单位：纳秒 ns）变化的行为？\n\nA. 信号 $P_{even}$ 最初为 0，在 $t = 14.5 \\text{ ns}$ 时跃迁至 1，并保持为 1。\n\nB. 信号 $P_{even}$ 最初为 1，在 $t = 14.5 \\text{ ns}$ 时跃迁至 0，并保持为 0。\n\nC. 信号 $P_{even}$ 最初为 0，在 $t = 10.0 \\text{ ns}$ 时跃迁至 1，并保持为 1。\n\nD. 信号 $P_{even}$ 最初为 1，在 $t = 10.0 \\text{ ns}$ 时跃迁至 0，并保持为 0。\n\nE. 信号 $P_{even}$ 在所有时间内都稳定在 0。\n\nF. 信号 $P_{even}$ 在所有时间内都稳定在 1。", "solution": "将8位字 $D[7:0]$ 的偶校验位 $P_{even}$ 定义为这样一个比特，它使得9位字 $(D[7:0], P_{even})$ 中1的总数为偶数。等效地，令 $\\oplus$ 表示异或（XOR），则偶校验位是所有数据位的异或结果：\n$$\nP_{even}=\\bigoplus_{i=0}^{7} D_{i}.\n$$\n这是因为，当且仅当 $D[7:0]$ 中1的个数为奇数时，$\\bigoplus_{i=0}^{7} D_{i}=1$ 成立，此时 $P_{even}=1$ 使得总数变为偶数；如果 $\\bigoplus_{i=0}^{7} D_{i}=0$（1的个数为偶数），则 $P_{even}=0$ 保持总数为偶数。\n\n该电路有固定的传播延迟 $t_{pd}=4.5\\,\\text{ns}$，因此作为时间函数的可观测输出是在 $t_{pd}$ 时间之前输入的校验值：\n$$\nP_{even}(t)=\\bigoplus_{i=0}^{7} D_{i}(t-t_{pd}).\n$$\n\n最初，在 $t<10.0\\,\\text{ns}$ 时，总线值为 $0x55=0101\\,0101$。$0101\\,0101$ 中1的个数为4，是偶数，因此\n$$\n\\bigoplus_{i=0}^{7} D_{i}=0 \\quad\\Rightarrow\\quad P_{even}=0.\n$$\n\n在 $t=10.0\\,\\text{ns}$ 时，总线瞬时变为 $0xD5=1101\\,0101$。$1101\\,0101$ 中1的个数为5，是奇数，因此对于新数据，\n$$\n\\bigoplus_{i=0}^{7} D_{i}=1 \\quad\\Rightarrow\\quad P_{even}=1.\n$$\n\n由于存在传播延迟，$P_{even}$ 的这一变化在输入变化 $t_{pd}=4.5\\,\\text{ns}$ 之后才出现在输出端。因此，$P_{even}$ 上的跃迁发生在\n$$\nt=10.0\\,\\text{ns}+4.5\\,\\text{ns}=14.5\\,\\text{ns}.\n$$\n因此，$P_{even}$ 最初为 $0$，在 $t=14.5\\,\\text{ns}$ 时跃迁至 $1$，并此后保持为 $1$。这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1929912"}, {"introduction": "在理想的数字世界之外，时序扮演着决定性的角色，微小的延迟差异可能导致截然不同的结果。这个练习以一个基本的SR锁存器为例，揭示了当输入信号 ($S$ 和 $R$) 同时变化时，非对称的传播延迟如何打破电路的对称性并解决理论上的不确定状态。通过这个实践，你将深入理解竞争条件以及它在序贯逻辑电路中的关键影响。[@problem_id:1929927]", "problem": "考虑一个由两个交叉耦合的2输入或非门构成的基本置位-复位 (SR) 锁存器。第一个或非门，我们称之为 `G_Q`，其输出为 `Q`。它的输入是外部信号 `S` 和另一个门的输出 `Q_bar`。第二个或非门，`G_Q_bar`，其输出为 `Q_bar`。它的输入是外部信号 `R` 和输出 `Q`。或非门的逻辑行为由布尔表达式 `OUT = NOT(A OR B)` 定义。\n\n该电路的物理实现并非完全对称。门 `G_Q` 的传播延迟为 `t_pd_Q = 2.0` 纳秒 (ns)，而门 `G_Q_bar` 的传播延迟为 `t_pd_Q_bar = 2.2` ns。\n\n系统初始处于“禁用”输入状态。在所有 `t  0` 的时间内，输入 `S` 和 `R` 都保持为高电平（逻辑1）。在 `t = 0` 的精确时刻，两个输入同时被撤销，从 1 转换到 0。对于所有 `t \\ge 0`，输入保持低电平 (`S`=0, `R`=0)。\n\n在该转换发生很久之后（即，对于 `t > 10` ns），输出 Q 的最终稳定逻辑状态是什么？\n\nA. Q 将为 0。\n\nB. Q 将为 1。\n\nC. Q 将无限期地在 0 和 1 之间振荡。\n\nD. Q 的状态在逻辑上是不确定的，无法根据所提供的信息来确定。", "solution": "一个2输入或非门实现 $Y=\\overline{A \\lor B}$。在传播延迟为 $t_{pd}$ 的情况下，若 $\\tau$ 时刻的输入变化导致逻辑输出的计算结果发生改变，则输出将在 $\\tau + t_{pd}$ 时刻改变（惯性延迟模型）。\n\n定义交叉耦合的锁存器：\n$$Q=\\overline{S \\lor Q_{\\text{bar}}}, \\qquad Q_{\\text{bar}}=\\overline{R \\lor Q}.$$\n给定 $G_{Q}$ 的传播延迟 $t_{pd,Q}=2.0\\,\\text{ns}$，$G_{Q_{\\text{bar}}}$ 的传播延迟 $t_{pd,Q_{\\text{bar}}}=2.2\\,\\text{ns}$。\n\n对于 $t0$ 的初始条件：$S=1$, $R=1$。则\n$$Q=\\overline{1 \\lor Q_{\\text{bar}}}=0, \\qquad Q_{\\text{bar}}=\\overline{1 \\lor Q}=0.$$\n\n在 $t=0^{+}$ 时：$S=0$, $R=0$，并且在输出响应之前，反馈值仍然是 $Q=0, Q_{\\text{bar}}=0$。\n\n评估 $t=0$ 后每个门的期望输出：\n- 对于 $G_{Q}$：输入为 $(S,Q_{\\text{bar}})=(0,0)$，因此期望的 $Q=\\overline{0 \\lor 0}=1$。由于 $t_{pd,Q}=2.0\\,\\text{ns}$，这会调度 $Q$ 在 $t=2.0\\,\\text{ns}$ 时从 $0 \\to 1$ 转换，前提是没有中间的输入变化使此评估无效。\n- 对于 $G_{Q_{\\text{bar}}}$：输入为 $(R,Q)=(0,0)$，因此期望的 $Q_{\\text{bar}}=\\overline{0 \\lor 0}=1$。由于 $t_{pd,Q_{\\text{bar}}}=2.2\\,\\text{ns}$，这会调度 $Q_{\\text{bar}}$ 在 $t=2.2\\,\\text{ns}$ 时从 $0 \\to 1$ 转换，同样地，如果输入发生变化导致评估结果不同，该调度将被取消。\n\n在 $t=2.0\\,\\text{ns}$ 时，$Q$ 切换到 $1$。这个输入变化被 $G_{Q_{\\text{bar}}}$ 看到，其输入变为 $(R,Q)=(0,1)$，立即进行逻辑评估得出\n$$Q_{\\text{bar}}=\\overline{0 \\lor 1}=0.$$\n由于 $Q_{\\text{bar}}$ 已经是 $0$，没有需要调度的输出变化，并且之前在 $t=2.2\\,\\text{ns}$ 时调度的 $0 \\to 1$ 转换，因 $t=2.0\\,\\text{ns}$ 时的新输入条件而失效。\n\n因此，锁存器达到了稳定状态\n$$Q=1, \\qquad Q_{\\text{bar}}=0,$$\n该状态满足 $S=R=0$ 时的稳态方程：\n$$Q=\\overline{Q_{\\text{bar}}}=1, \\qquad Q_{\\text{bar}}=\\overline{Q}=0.$$\n没有进一步的转换发生，因此对于 $t10\\,\\text{ns}$，输出保持为 $Q=1$。\n\n因此，正确选项是B。", "answer": "$$\\boxed{B}$$", "id": "1929927"}, {"introduction": "在高速数字设计中，对时序的精确控制至关重要，纳秒级的偏差便可能引发系统故障。本练习将探讨一种常见的功耗节省技术——时钟门控，并分析其固有的风险：在禁用时钟时产生不必要的毛刺（glitch）。你需要综合分析时钟-Q延时 ($t_{cq}$) 和时钟偏斜 ($t_{skew}$) 等多个参数，来推导出导致危险毛刺发生的临界条件。[@problem_id:1929964]", "problem": "在一个数字系统中，为了节省功耗，实现了一个时钟门控电路。该电路由一个简单的双输入与门组成，其输出 `CLK_gated` 用于为下游的寄存器组提供时钟。与门的一个输入是系统的主时钟 `CLK`。另一个输入是门控使能信号 `EN`。\n\n主时钟 `CLK` 是一个占空比为 50% 的周期性信号。使能信号 `EN` 由一个上升沿触发的 D 型触发器 (DFF) 的 Q 输出生成。该 DFF 本身由主时钟 `CLK` 驱动。该 DFF 的时钟到 Q 输出的传播延迟指定为 $t_{cq} = 1.3$ ns。\n\n`EN` 信号从 DFF 的输出传输到与门的输入存在一个显著的布线延迟， $t_{route} = 1.1$ ns。此外，时钟分配网络中存在时钟偏斜 $t_{skew}$。该偏斜导致 `CLK` 的上升沿到达与门输入的时间比同一边沿到达 DFF 时钟引脚的时间晚 $t_{skew}$。$t_{skew}$ 的值可以通过调整时钟路径中的延迟元件来调节。\n\n当系统决定禁用寄存器组的时钟时，由 `CLK` 的一个上升沿触发，`EN` 信号从高电平转换为低电平。此操作可能会在 `CLK_gated` 线上无意中产生一个短暂的、不希望出现的脉冲，称为毛刺 (glitch)。在该系统中，如果毛刺的持续时间严格大于 $W_{min} = 0.5$ ns，则被认为是危险的。\n\n如果时钟偏斜 $t_{skew}$ 落在特定范围内，就会发生危险毛刺。以下关于 $t_{skew}$（单位为纳秒）的哪个条件正确定义了在禁用时钟时会在 `CLK_gated` 上产生危险毛刺的范围？\n\nA. $t_{skew}  1.9$\n\nB. $t_{skew}  1.9$\n\nC. $t_{skew}  2.4$\n\nD. $t_{skew}  2.4$\n\nE. $t_{skew}  0.2$\n\nF. $t_{skew}  0.2$", "solution": "令 $t=0$ 为在 DFF 时钟引脚上启动禁用的 $CLK$ 上升沿时刻。根据传播延迟和布线延迟的定义：\n$$\nt_{\\text{EN,fall}}=t_{cq}+t_{route}.\n$$\n同一 $CLK$ 上升沿到达与门输入端的时刻为\n$$\nt_{\\text{CLK@AND}}=t_{skew}.\n$$\n因为与门仅在两个输入都为高电平时输出高电平，所以在 $EN$ 从高电平转换到低电平的禁用事件中：\n- 如果 $t_{skew}\\geq t_{cq}+t_{route}$，那么当此时钟边沿到达与门时，$EN$ 已经为低电平，因此不会出现脉冲，也没有毛刺。\n- 如果 $t_{skew}t_{cq}+t_{route}$，那么 $CLK\\_{\\text{gated}}$ 将在 $t_{skew}$ 时刻变为高电平，并在 $EN$ 在 $t_{cq}+t_{route}$ 时刻下降时返回低电平，产生一个宽度为\n$$\nw=(t_{cq}+t_{route})-t_{skew}.\n$$\n的脉冲。\n危险毛刺定义为 $wW_{min}$。因此，产生危险毛刺的条件是\n$$\n(t_{cq}+t_{route})-t_{skew}W_{min}\\quad\\Longleftrightarrow\\quad t_{skew}t_{cq}+t_{route}-W_{min}.\n$$\n代入给定值，\n$$\nt_{skew}1.3+1.1-0.5=1.9\\,\\text{ns}.\n$$\n这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1929964"}]}
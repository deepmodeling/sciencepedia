{"hands_on_practices": [{"introduction": "我们从数字逻辑的基石——CMOS反相器开始。为了实现可预测和可靠的电路操作，反相器输出从低到高和从高到低的转换速度保持一致至关重要。本练习将指导你完成“尺寸调整”（sizing）晶体管的过程，以实现这种对称性能，这是一种通过补偿硅中电子和空穴迁移率的内在差异来实现的基本设计技术。[@problem_id:1924064]", "problem": "一位数字电路设计工程师正在为标准单元库表征一种新的制造工艺。最基本的逻辑门——反相器，是使用互补金属氧化物半导体（CMOS）拓扑结构构建的。该反相器由一个n型金属氧化物半导体（NMOS）晶体管和一个p型金属氧化物半导体（PMOS）晶体管组成。为了在复杂的数字系统中实现可预测的时序，反相器表现出对称的时间响应至关重要，这意味着其输出上升时间等于其输出下降时间。\n\n假设新制造工艺的参数如下：\n- NMOS沟道中电子的迁移率为 $\\mu_n = 520 \\text{ cm}^2/(\\text{V}\\cdot\\text{s})$。\n- PMOS沟道中空穴的迁移率为 $\\mu_p = 200 \\text{ cm}^2/(\\text{V}\\cdot\\text{s})$。\n- 两个晶体管都设计有相同的最小沟道长度 $L$。\n- 两个晶体管具有相同的单位面积栅极氧化物电容 $C_{ox}$。\n- 两个晶体管的阈值电压大小相同，即 $|V_{th,p}| = V_{th,n}$。\n\n为了实现对称的上升和下降时间，必须适当地调整晶体管的沟道宽度 $W_p$ 和 $W_n$。确定所需的尺寸比，定义为PMOS沟道宽度与NMOS沟道宽度之比（$W_p / W_n$）。\n\n将您的答案表示为一个实数，四舍五入到三位有效数字。", "solution": "对于驱动相同电容负载的CMOS反相器，要实现对称的上升和下降时间，其有效的上拉和下拉驱动强度必须相等，从而使平均充电和放电电流相匹配。对长沟道MOSFET使用饱和区的平方律模型，漏极电流的大小为\n$$\nI_{D}=\\frac{1}{2}\\mu C_{ox}\\frac{W}{L}(V_{ov})^{2},\n$$\n其中 $V_{ov}=V_{GS}-V_{th}$ 是过驱动电压。在 $|V_{th,p}|=V_{th,n}$ 相同、沟道长度 $L$ 相同、 $C_{ox}$ 也相同，并且目标是实现对称的开关点以使上拉和下拉的相关 $V_{ov}$ 相当的情况下，均衡有效电导可以简化为匹配跨导参数：\n$$\n\\mu_{p}C_{ox}\\frac{W_{p}}{L}=\\mu_{n}C_{ox}\\frac{W_{n}}{L}.\n$$\n消去共同因子 $C_{ox}$ 和 $L$ 可得\n$$\n\\frac{W_{p}}{W_{n}}=\\frac{\\mu_{n}}{\\mu_{p}}.\n$$\n代入给定的迁移率，\n$$\n\\frac{W_{p}}{W_{n}}=\\frac{520}{200}=2.60,\n$$\n四舍五入到三位有效数字。", "answer": "$$\\boxed{2.60}$$", "id": "1924064"}, {"introduction": "在性能优化的基础上，我们现在转向一个更复杂的多输入逻辑门。在实际电路设计中，由于路径长度不同，输入信号通常在不同时间到达。这个实践问题展示了一种被称为“堆栈重排序”（stack reordering）的关键优化策略，它通过巧妙地安排晶体管的物理位置来最小化传播延迟，特别是当处理一个“迟到”的信号时。[@problem_id:1924059]", "problem": "在设计一个定制的互补金属氧化物半导体（CMOS）集成电路时，需要一个三输入与非门。该门电路实现了逻辑函数 $Y = \\overline{A \\cdot B \\cdot C}$。标准实现包括一个由三个并联的P沟道金属氧化物半导体（PMOS）晶体管组成的上拉网络，以及一个由三个串联的N沟道金属氧化物半导体（NMOS）晶体管组成的下拉网络。\n\n假设下拉网络中的三个串联NMOS晶体管分别表示为 $N_1$、$N_2$ 和 $N_3$。晶体管 $N_1$ 连接在输出节点 $Y$ 和一个内部节点 $n_a$ 之间。晶体管 $N_2$ 连接在节点 $n_a$ 和第二个内部节点 $n_b$ 之间。晶体管 $N_3$ 连接在节点 $n_b$ 和地之间。每个晶体管的栅极将连接到输入信号 $A$、$B$ 或 $C$ 中的一个。\n\n由于芯片上的布线延迟，已知输入信号 $C$ 是“关键”或“延迟到达”的信号。也就是说，在输出必须从高电平转换到低电平（需要 $A=B=C=1$）的情况下，信号 $A$ 和 $B$ 会在信号 $C$ 从“0”转换到“1”之前很早就稳定在逻辑“1”值。为了优化电路性能，必须最小化此高到低传播延迟 $t_{pHL}$。\n\n以下哪种将延迟到达的信号 $C$ 分配给其中一个NMOS晶体管栅极的方案，可以得到最小的传播延迟 $t_{pHL}$？\n\nA. 将信号 $C$ 连接到 $N_1$ 的栅极。\n\nB. 将信号 $C$ 连接到 $N_2$ 的栅极。\n\nC. 将信号 $C$ 连接到 $N_3$ 的栅极。\n\nD. 将信号 $C$ 分配给任何一个晶体管都会导致相同的传播延迟。", "solution": "CMOS与非门的高到低传播延迟 $t_{pHL}$ 主要取决于通过NMOS下拉路径对输出负载电容进行放电所需的时间，该路径仅在所选串联路径上的所有三个NMOS器件都导通时才变为导通状态。在给定条件下，$A$ 和 $B$ 较早地稳定在逻辑1，而 $C$ 是延迟到达的 $0\\to 1$ 转换。因此，放电开始的瞬间取决于哪个NMOS晶体管接收信号 $C$；该瞬间的内部节点电压以及哪些电容被初始充电决定了有效负载，从而决定了 $t_{pHL}$。\n\n将NMOS堆栈建模为三个串联电阻 $R_{1},R_{2},R_{3}$（分别对应 $N_{1},N_{2},N_{3}$）和三个到地的并联电容：输出节点 $Y$ 处的 $C_{Y}$、节点 $n_{a}$ 处的 $C_{a}$ 以及节点 $n_{b}$ 处的 $C_{b}$。下降转换的延迟可以通过RC树（Elmore）模型近似为与初始电压为 $V_{DD}$ 的电容成正比的正项之和。任何在该瞬间已经处于 $0$ 电压的内部节点都不会增加放电负载，因为它没有经历电压变化。\n\n考虑三种可能的 $C$ 的分配方案：\n\n1) $C$ 连接到 $N_{1}$（顶部器件）。在 $C$ 到达之前，$A$ 和 $B$ 已经导通了下面两个器件。因此，$n_{a}$ 和 $n_{b}$ 通过到地的导通路径被保持在接近 $0$ 的电位，而 $Y$ 则被PMOS网络保持在 $V_{DD}$。当 $C$ 导通 $N_{1}$ 时，放电开始，此时 $n_{a}$ 和 $n_{b}$ 已经是低电位。因此，只有 $C_{Y}$ 需要放电。与此条件一致的Elmore形式表达式为\n$$\nt_{pHL}^{(N_{1})}\\approx \\beta_{Y}\\,C_{Y},\n$$\n其中 $\\beta_{Y}>0$ 由串联下拉电阻决定；关键在于，没有来自 $C_{a}$ 或 $C_{b}$ 的额外正项，因为这些节点初始电位为 $0$。\n\n2) $C$ 连接到 $N_{2}$（中间器件）。在 $C$ 到达之前，顶部器件和底部器件是导通的，所以 $Y$ 和 $n_{a}$ 通过从 $Y$ 向下到 $n_{a}$ 的连接被充电到 $V_{DD}$，而 $n_{b}$ 则通过底部的到地路径被保持在 $0$ 电位。当 $C$ 导通 $N_{2}$ 时，$C_{Y}$ 和 $C_{a}$ 都必须放电。此时延迟具有以下形式\n$$\nt_{pHL}^{(N_{2})}\\approx \\beta_{Y}\\,C_{Y}+\\beta_{a}\\,C_{a},\n$$\n其中 $\\beta_{a}>0$ 是由于对 $n_{a}$ 放电的电阻路径以及该放电电流通过 $Y$ 所见的串联路径的耦合效应。\n\n3) $C$ 连接到 $N_{3}$（底部器件）。在 $C$ 到达之前，顶部两个器件是导通的，所以 $Y$、$n_{a}$ 和 $n_{b}$ 都被充电到 $V_{DD}$。当 $C$ 导通 $N_{3}$ 时，所有三个电容都必须放电，得到\n$$\nt_{pHL}^{(N_{3})}\\approx \\beta_{Y}\\,C_{Y}+\\beta_{a}\\,C_{a}+\\beta_{b}\\,C_{b},\n$$\n其中 $\\beta_{b}>0$。\n\n由于所有乘以 $C_{Y},C_{a},C_{b}$ 的系数都是正的，并且 $C_{a},C_{b}>0$，因此可以得出\n$$\nt_{pHL}^{(N_{1})}<t_{pHL}^{(N_{2})}<t_{pHL}^{(N_{3})}.\n$$\n直观地说，将延迟到达的信号放在顶部的NMOS上可以防止内部节点的预充电；当放电最终开始时，没有内部节点电容需要放电，从而最小化了有效负载，进而减小了传播延迟。\n\n因此，将延迟信号 $C$ 连接到 $N_{1}$ 的栅极可以最小化 $t_{pHL}$。", "answer": "$$\\boxed{A}$$", "id": "1924059"}, {"introduction": "除了速度，功耗是几乎所有现代电子设备的一个关键设计约束，尤其对于电池供电的设备。在CMOS技术中，仅在信号切换时产生的动态功耗是总能耗的主要来源。本练习提供了一个动手计算CMOS反相器平均动态功耗的方法，将电容 $C_L$ 和电源电压 $V_{DD}$ 等物理参数与时钟频率 $f_{clk}$ 和信号活动性 $\\alpha$ 等系统级因素联系起来。[@problem_id:1924098]", "problem": "一位工程师的任务是为一款用于物联网 (IoT) 设备的定制设计低功耗微控制器估算功率预算。该设计中的一个关键组件是一个用于缓冲时钟门控信号的互补金属氧化物半导体 (CMOS) 反相器。该微控制器在 $V_{DD}$ 为 1.8 V 的电源电压下工作，并由频率 $f_{clk}$ 为 24 MHz 的系统时钟驱动。该反相器驱动的总负载电容 $C_L$ 为 35 fF，其中包括下一级逻辑的输入电容和寄生布线电容。\n\n通过仿真确定，反相器输出端的信号平均每 5 个时钟周期发生一次从低到高的转换（即从逻辑“0”到逻辑“1”）。假设动态功耗是该逻辑门功耗的唯一显著贡献者，计算此反相器消耗的平均动态功耗。\n\n最终答案以微瓦 ($\\mu$W) 为单位表示，并四舍五入到三位有效数字。", "solution": "对于一个 CMOS 反相器，每次从低到高的输出转换从电源获取的动态能量为\n$$\nE_{\\text{LH}} = C_{L} V_{DD}^{2}.\n$$\n如果每个时钟周期的平均低到高转换次数为 $\\alpha$，且时钟频率为 $f_{clk}$，则平均动态功耗为\n$$\nP_{\\text{dyn}} = \\alpha\\, C_{L} V_{DD}^{2} f_{clk}.\n$$\n在本题中，输出每 $5$ 个时钟周期发生一次从低到高的转换，因此 $\\alpha = \\frac{1}{5}$。代入给定值 $C_{L} = 35 \\times 10^{-15}\\ \\text{F}$、$V_{DD} = 1.8\\ \\text{V}$ 和 $f_{clk} = 24 \\times 10^{6}\\ \\text{Hz}$，\n$$\nP_{\\text{dyn}} = \\frac{1}{5} \\left(35 \\times 10^{-15}\\right) \\left(1.8\\right)^{2} \\left(24 \\times 10^{6}\\right).\n$$\n分步计算：\n$$\n(1.8)^{2} = 3.24,\n$$\n$$\n35 \\times 3.24 \\times 24 = 2721.6,\n$$\n$$\n10^{-15} \\times 10^{6} = 10^{-9},\n$$\n因此\n$$\nP_{\\text{dyn}} = \\frac{2721.6}{5} \\times 10^{-9}\\ \\text{W} = 544.32 \\times 10^{-9}\\ \\text{W} = 5.4432 \\times 10^{-7}\\ \\text{W}.\n$$\n转换为微瓦（其中 $1\\ \\text{微瓦} = 10^{-6}\\ \\text{W}$）得到\n$$\nP_{\\text{dyn}} = 0.54432\\ \\text{微瓦}.\n$$\n四舍五入到三位有效数字，结果为 $0.544$。", "answer": "$$\\boxed{0.544}$$", "id": "1924098"}]}
{"hands_on_practices": [{"introduction": "在进行任何功耗优化之前，首先必须能够准确区分和量化不同类型的功耗。本练习将带你从测量的总功耗（$P_{tot}$）和静态功耗（$P_{stat}$）入手，推导出在特定工作周期内由晶体管开关活动产生的动态能耗。这个基础计算是理解和分析数字电路能效的基石 [@problem_id:1963155]。", "problem": "一位设计工程师正在表征一款新型片上系统（SoC）中专用处理核心的功耗。该核心的时钟周期为 $T$。在一次基准测试中，工程师测得该核心消耗的平均总功耗为 $P_{tot}$。已知数字电路中的总功耗是两个分量之和：静态功耗和动态功耗。静态功耗 $P_{stat}$ 是由漏电流引起的持续功耗，即使在电路没有主动翻转时也存在。动态功耗仅在逻辑门改变状态时才消耗。通过在禁用时钟信号的情况下进行独立测量，工程师确定静态功耗为 $P_{stat}$。\n\n假设基准测试的持续时间恰好为 $N$ 个时钟周期，请推导在此测试期间完全由动态翻转活动所消耗的总能量的表达式。您的最终答案应使用 $P_{tot}$、$P_{stat}$、$N$ 和 $T$ 来表示。", "solution": "题目要求我们找到一个仅由动态翻转所消耗能量的表达式。我们首先关联功耗的不同分量。\n\n总功耗 $P_{tot}$ 为静态功耗 $P_{stat}$ 和动态功耗 $P_{dyn}$ 的和。\n$$P_{tot} = P_{stat} + P_{dyn}$$\n动态功耗是与逻辑门翻转相关的功耗分量。我们可以通过重新整理上述方程来分离出 $P_{dyn}$。\n$$P_{dyn} = P_{tot} - P_{stat}$$\n该表达式给出了电路工作时因动态活动而消耗的平均功耗。\n\n接下来，我们将功耗与能量关联起来。对于在时间间隔 $\\Delta t$ 内消耗的恒定功率 $P$，所消耗的能量 $E$ 由它们的乘积给出：\n$$E = P \\times \\Delta t$$\n在本问题中，我们关心的是动态能量 $E_{dyn}$，即由动态功耗 $P_{dyn}$ 消耗的能量。\n$$E_{dyn} = P_{dyn} \\times \\Delta t$$\n消耗此能量的时间间隔 $\\Delta t$ 是基准测试的总持续时间。测试运行 $N$ 个时钟周期，每个周期的周期为 $T$。因此，总时间间隔为：\n$$\\Delta t = N \\times T$$\n最后，我们将 $P_{dyn}$ 和 $\\Delta t$ 的表达式代入动态能量的方程中：\n$$E_{dyn} = (P_{tot} - P_{stat}) \\times (N T)$$\n这可以简化为动态翻转消耗的总能量的最终表达式。\n$$E_{dyn} = (P_{tot} - P_{stat})NT$$", "answer": "$$\\boxed{(P_{tot} - P_{stat})NT}$$", "id": "1963155"}, {"introduction": "动态功耗是CMOS电路在工作状态下的主要能量消耗来源，而电源电压（$V_{DD}$）是影响其大小的关键因素。本练习模拟了一个常见的低功耗设计场景：通过降低电源电压来减少功耗。通过这个计算，你将亲身体会到动态功耗与电源电压之间的二次方关系（$P_{dyn} \\propto V_{DD}^2$），并理解为何电压缩减是实现节能设计的核心策略之一 [@problem_id:1963189]。", "problem": "一个设计团队正在为一款采用互补金属氧化物半导体 (CMOS) 技术构建的定制处理器开发低功耗模式。在这项技术中，运行期间功耗的主要来源是动态功耗。该团队的策略是通过降低电源电压 $V_{DD}$ 来减少功耗。在提议的低功耗模式中，电源电压 $V_{DD}$ 降至其正常工作模式下值的 90%。假设时钟频率和逻辑门的平均开关活动保持不变，计算动态功耗的百分比降幅。将最终答案以小数值形式表示（例如，25% 的降幅应写为 0.25）。", "solution": "CMOS 逻辑电路中的动态功耗主要由电容性开关决定，并由以下标准关系式给出\n$$P_{\\text{dyn}}=\\alpha C_{L} V_{DD}^{2} f,$$\n其中 $\\alpha$ 是平均开关活动因子，$C_{L}$ 是有效负载电容，$V_{DD}$ 是电源电压，$f$ 是时钟频率。\n\n在低功耗模式下，电源电压降至\n$$V_{DD}'=0.9\\,V_{DD}.$$\n假设 $\\alpha$、$C_{L}$ 和 $f$ 保持不变，新的动态功耗为\n$$P_{\\text{dyn}}'=\\alpha C_{L} \\left(V_{DD}'\\right)^{2} f=\\alpha C_{L} \\left(0.9\\,V_{DD}\\right)^{2} f=0.9^{2}\\,\\alpha C_{L} V_{DD}^{2} f=0.81\\,P_{\\text{dyn}}.$$\n\n动态功耗的分数降幅为\n$$\\frac{P_{\\text{dyn}}-P_{\\text{dyn}}'}{P_{\\text{dyn}}}=1-0.81=0.19.$$\n\n因此，以小数表示的百分比降幅为 $0.19$。", "answer": "$$\\boxed{0.19}$$", "id": "1963189"}, {"introduction": "功耗优化不仅限于门级电路的设计，更高层次的决策（如数据如何表示）同样会产生深远影响。本练习将场景设定在系统级的数据传输总线上，要求你分析两种不同的有符号数编码方案（符号-数值表示法和二进制补码）对动态功耗的影响。通过计算特定数据流下的比特翻转次数，你将深入理解数据编码如何直接影响开关活动因子（$\\alpha_T$），进而揭示架构决策与物理层功耗之间的紧密联系 [@problem_id:1963161]。", "problem": "一位嵌入式系统工程师正在设计一个低功耗数字信号处理核心，该核心通过一个4位并行数据总线与一个存储单元进行通信。该系统的工作电源电压 $V_{DD}$ 为 1.2 V，总线时钟频率 $f$ 为 250 MHz。总线上每条独立线路的总有效电容 $C_{line}$ 为 1.5 pF。N位总线所消耗的平均动态功率由公式 $P_{avg} = \\alpha_T \\cdot C_{line} \\cdot V_{DD}^2 \\cdot f$ 建模，其中 $\\alpha_T$ 表示每个时钟周期在所有N条线路上发生的平均位翻转（0到1或1到0）次数。\n\n工程师需要评估两种不同的4位有符号数编码方案对功耗的影响：原码（sign-magnitude）和补码（two's complement）。为此，将传输一个基准数据序列。总线初始状态为所有线路都处于逻辑0。然后，按每个时钟周期传输一个值的速率，传输以下十进制整数值序列：`+3, -3, +2, -2, +1, -1, 0`。\n\n对于原码表示法，最高有效位（MSB）是符号位（0为正，1为负），其余位代表数值的大小。对于补码表示法，负数是通过将对应正数的所有位取反然后加一得到的。\n\n计算在使用补码（$P_{TC}$）和原码（$P_{SM}$）传输此特定序列时，平均动态功耗的绝对差值 $|P_{TC} - P_{SM}|$。以微瓦（$\\mu$W）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "我们使用给定的动态功率模型\n$$P_{avg}=\\alpha_{T}\\,C_{line}\\,V_{DD}^{2}\\,f,$$\n其中 $\\alpha_{T}$ 是每个时钟周期在所有4条线路上发生的平均位翻转次数。\n\n我们必须计算从初始全零总线状态开始，在给定的7个周期的传输过程中，原码（SM）和补码（TC）两种情况下的 $\\alpha_{T}$，然后求出功率的绝对差值：\n$$|P_{TC}-P_{SM}|=|\\alpha_{T,TC}-\\alpha_{T,SM}|\\,C_{line}\\,V_{DD}^{2}\\,f.$$\n\n对于4位总线，列出码字以及连续字之间的汉明距离（包括从初始的 $0000$ 到第一个值的翻转）。序列为 $+3,-3,+2,-2,+1,-1,0$。\n\n原码（最高有效位是符号位，其余3位是数值）：\n- $+3: 0011$, $-3: 1011$, $+2: 0010$, $-2: 1010$, $+1: 0001$, $-1: 1001$, $0: 0000$。\n翻转：\n$0000\\to0011:2$，\n$0011\\to1011:1$，\n$1011\\to0010:2$，\n$0010\\to1010:1$，\n$1010\\to0001:3$，\n$0001\\to1001:1$，\n$1001\\to0000:2$。\n总计 $=12$，因此\n$$\\alpha_{T,SM}=\\frac{12}{7}。$$\n\n补码：\n- $+3: 0011$, $-3: 1101$, $+2: 0010$, $-2: 1110$, $+1: 0001$, $-1: 1111$, $0: 0000$。\n翻转：\n$0000\\to0011:2$，\n$0011\\to1101:3$，\n$1101\\to0010:4$，\n$0010\\to1110:2$，\n$1110\\to0001:4$，\n$0001\\to1111:3$，\n$1111\\to0000:4$。\n总计 $=22$，因此\n$$\\alpha_{T,TC}=\\frac{22}{7}。$$\n\n因此，\n$$|\\alpha_{T,TC}-\\alpha_{T,SM}|=\\left|\\frac{22}{7}-\\frac{12}{7}\\right|=\\frac{10}{7}。$$\n于是，\n$$|P_{TC}-P_{SM}|=\\frac{10}{7}\\,C_{line}\\,V_{DD}^{2}\\,f.$$\n\n代入给定值 $C_{line}=1.5\\times10^{-12}\\,\\text{F}$，$V_{DD}=1.2\\,\\text{V}$，$f=250\\times10^{6}\\,\\text{s}^{-1}$：\n$$C_{line}V_{DD}^{2}f=(1.5\\times10^{-12})(1.2)^{2}(250\\times10^{6})=540\\times10^{-6}\\,\\text{W},$$\n所以\n$$|P_{TC}-P_{SM}|=\\frac{10}{7}\\times 540\\times10^{-6}\\,\\text{W}=\\frac{5400}{7}\\times10^{-6}\\,\\text{W}。$$\n转换为微瓦并四舍五入到三位有效数字，得到 $771\\,\\text{微瓦}$。", "answer": "$$\\boxed{771}$$", "id": "1963161"}]}
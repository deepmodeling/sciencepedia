{"hands_on_practices": [{"introduction": "在我们设计自己的电路之前，我们必须首先学会解读它们。第一个练习 [@problem_id:1952042] 挑战你分析一个给定的由NMOS传输晶体管构成的网络，并推导出其对应的布尔逻辑函数。这个练习将锻炼你追踪由门输入控制的信号路径的能力，并理解单个晶体管如何组合起来执行复杂的逻辑操作。", "problem": "考虑一个由理想N沟道金属氧化物半导体（NMOS）晶体管构成的数字逻辑电路，这些晶体管的功能如同理想开关。当NMOS晶体管的栅极为高逻辑电平（'1'）时，它会导通，并将其漏极的信号传递到源极。相反，当其栅极为低逻辑电平（'0'）时，它不导通，形成开路。\n\n该电路有四个主逻辑输入，分别表示为A、B、C和D，以及一个单一输出F。电路配置如下：\n\n1.  第一个晶体管T1，其栅极连接到输入B，漏极连接到输入A，源极连接到一个中间节点N1。\n2.  第二个晶体管T2，其栅极连接到输入B的逻辑反相（记作$\\bar{B}$），漏极连接到输入C，源极也连接到中间节点N1。\n3.  第三个晶体管T3，其栅极连接到输入D，漏极连接到中间节点N1，源极连接到最终输出F。\n\n假设如果输出F没有被任何路径主动驱动为'1'或'0'（即，它处于高阻态或“悬浮”态），则应将其视为逻辑'0'。\n\n根据此描述，确定表示该电路行为的布尔逻辑函数 F(A, B, C, D)。从以下选项中选择正确的表达式。在选项中，乘法表示逻辑与操作，加法表示逻辑或操作，上划线（例如 $\\bar{B}$）表示逻辑非操作。\n\nA. $F = (A \\bar{B} + C B) D$\n\nB. $F = A B + C \\bar{B} + D$\n\nC. $F = (A + D) B + (C + D) \\bar{B}$\n\nD. $F = A D + C D$\n\nE. $F = (A B + C \\bar{B}) D$", "solution": "一个理想的NMOS晶体管表现为一个理想的双向开关，当其栅极为逻辑$1$时闭合（从漏极到源极导通，反之亦然），当其栅极为逻辑$0$时断开（不导通）。题目还指出，任何悬浮输出都解释为逻辑$0$。\n\n- 对于形成节点$N1$的T1和T2：\n  - T1的栅极为$B$，因此当$B=1$时，它导通并将$A$连接到$N1$。\n  - T2的栅极为$\\bar{B}$，因此当$B=0$时，它导通并将$C$连接到$N1$。\n  - 对于任何固定的$B$，T1或T2中只有一个导通，因此$N1$是一个2-1多路复用器，当$B=1$时选择$A$，当$B=0$时选择$C$。因此，\n$$\nN1 = A B + C \\bar{B}.\n$$\n\n- 对于以$D$为栅极、控制$N1$到$F$通路的T3：\n  - 当$D=1$时，T3导通并将$N1$的信号传递到$F$，所以$F=N1$。\n  - 当$D=0$时，T3断开，F处于悬浮状态，根据假设应被视为$0$。\n  - 因此，\n$$\nF = N1 \\, D.\n$$\n\n代入$N1$的表达式可得\n$$\nF = (A B + C \\bar{B}) D,\n$$\n这与选项E匹配。", "answer": "$$\\boxed{E}$$", "id": "1952042"}, {"introduction": "理想开关是一个有用的抽象，但真实的晶体管存在其固有的局限性。本练习 [@problem_id:1951991] 将通过检查一个带有“永久断路”故障的传输门来探讨信号退化这一实际问题，该故障使其在功能上等效于一个单独的NMOS晶体管。通过分析此故障如何影响电路的输出，你将更深刻地理解为何互补式传输门（CMOS TGs）对于可靠地传输逻辑 $0$ 和 $1$ 至关重要。", "problem": "一个两输入XNOR门（同或门）是使用互补金属氧化物半导体（CMOS）技术构建的。该设计基于传输门（TG）。一个标准的TG由一个NMOS晶体管和一个PMOS晶体管并联组成，其栅极分别由互补的控制信号 `C` 和 `$\\bar{C}$` 驱动。当 `C` 为逻辑 `1` 时，TG将其输入传递到其输出。\n\n该特定的XNOR电路具有输入 `A` 和 `B`，以及输出 `F`。该电路由两个TG组成，它们的输出连接在一起形成节点 `F`。\n- 第一个TG（TG1）的输入为 `B`。其NMOS晶体管的栅极由 `A` 控制，其PMOS晶体管的栅极由 `$\\bar{A}$` 控制。\n- 第二个TG（TG2）的输入为 `$\\bar{B}$`。其NMOS晶体管的栅极由 `$\\bar{A}$` 控制，其PMOS晶体管的栅极由 `A` 控制。\n\n为了更准确地模拟单个晶体管的物理行为，我们引入以下传递逻辑信号的规则：\n- 单个NMOS晶体管可以传递强逻辑 `0`，但传递的是“弱”逻辑 `1`。我们将这种弱点建模为它无法驱动输出，导致高阻态 `Z`。\n- 单个PMOS晶体管可以传递强逻辑 `1`，但传递的是“弱”逻辑 `0`，我们也将其建模为高阻态 `Z`。\n- 一个完整的TG（一个NMOS和一个PMOS协同工作）可以强传递逻辑 `0` 和 `1`。\n- 对于本电路，假设如果输出节点 `F` 未被任何元件主动驱动（即处于高阻态 `Z`），则其值被后续的任何逻辑级解释为逻辑 `0`。\n\n现在，考虑一个制造缺陷，即TG1内的PMOS晶体管出现永久性开路故障，这意味着它始终表现为开路。请确定此故障电路所实现的逻辑函数 `F(A, B)` 的新布尔表达式。请以简化的“积之和”形式给出答案。", "solution": "我们首先重申在给定模型下的TG行为：\n- 一个完整的传输门（TG）在导通时可以强传递逻辑 $0$ 和 $1$。\n- 单个NMOS传递强 $0$；尝试传递 $1$ 会产生高阻态 $Z$。\n- 单个PMOS传递强 $1$；尝试传递 $0$ 会产生高阻态 $Z$。\n- 如果节点 $F$ 未被驱动（即为 $Z$），它被解释为逻辑 $0$。\n\n在无故障设计中：\n- TG1由 $A$ 控制（NMOS栅极为 $A$，PMOS栅极为 $\\bar{A}$），所以在 $A=1$ 时导通，传递 $B$。\n- TG2由 $\\bar{A}$ 控制（NMOS栅极为 $\\bar{A}$，PMOS栅极为 $A$），所以在 $A=0$ 时导通，传递 $\\bar{B}$。\n因此，正常情况下 $F = A B + \\bar{A}\\bar{B}$ (XNOR)。\n\n存在缺陷（TG1中的PMOS开路）时，TG1简化为仅由 $A$ 控制的一个NMOS。TG2仍然是一个完整的TG。\n\n按 $A$ 的情况进行分析：\n1) 当 $A=1$ 时： \n- TG1的NMOS导通并试图传递 $B$；TG2截止。\n- 如果 $B=0$，TG1中的NMOS传递一个强 $0$，所以 $F=0$。\n- 如果 $B=1$，NMOS会传递一个弱 $1$，建模为 $Z$；由于没有其他驱动源，$F$ 为 $Z$，它被解释为 $0$。\n因此，当 $A=1$ 时，$F=0$。\n\n2) 当 $A=0$ 时：\n- TG1的NMOS截止；TG1不驱动 $F$。\n- TG2是一个完整的TG且导通，将 $\\bar{B}$ 强传递到 $F$。\n因此，当 $A=0$ 时，$F=\\bar{B}$。\n\n使用基于 $A$ 的标准分解法，将这两种情况结合起来：\n$$\nF = \\bar{A}\\bar{B} + A \\cdot 0 = \\bar{A}\\bar{B}.\n$$\n这已经是简化的“积之和”形式。", "answer": "$$\\boxed{\\bar{A}\\bar{B}}$$", "id": "1951991"}, {"introduction": "逻辑设计师的最终目标是创建高效且功能强大的电路。最后一个练习 [@problem_id:1952038] 将从分析转向综合，要求你使用最少数量的晶体管来实现一个特定的布尔函数。这项挑战鼓励你在电路架构上进行战略性思考，例如在函数中识别出多路选择器结构，从而实现最优的传输晶体管逻辑设计。", "problem": "一位数字电路设计师的任务是为一个以最小化芯片面积为首要目标的专用处理单元，使用传输晶体管逻辑 (PTL) 实现布尔函数 $F(A, B, C) = \\bar{A}B + AC$。设计师需要通过策略性地选择其中一个输入变量（$A$、$B$ 或 $C$）作为传输晶体管的控制信号，而将其余变量作为待传输信号，来确定面积效率最高的实现方式。\n\n允许使用两种实现风格：\n1.  **仅NMOS逻辑**：每个信号通路都由单个NMOS晶体管进行开关。晶体管的栅极接收控制信号。\n2.  **互补传输门 (TG) 逻辑**：每个信号通路都由一个TG进行开关，TG由一个NMOS和一个PMOS晶体管并联组成。NMOS和PMOS晶体管的栅极分别由一个控制信号及其反相信号驱动。\n\n对于此设计，你可以假设所有主输入变量（$A, B, C$）及其反相信号（$\\bar{A}, \\bar{B}, \\bar{C}$）都可直接使用，而无需增加额外的晶体管成本。一个PTL实现方案被认为是可行的，当且仅当待传输的信号是主输入变量本身，或者是逻辑电平恒为‘0’ (GND) 或‘1’ (VDD) 的常量。目标是找到所需晶体管的绝对最小数量。\n\n在这些约束条件下，确定实现函数$F$所需的最小晶体管数量。", "solution": "从给定的函数开始：\n$$F(A,B,C)=\\bar{A}B+AC.$$\n对变量$A$使用香农展开：\n$$F=A\\cdot F\\big|_{A=1}+\\bar{A}\\cdot F\\big|_{A=0}.$$\n通过直接代入计算余因子：\n$$F\\big|_{A=1}=\\bar{1}\\,B+1\\cdot C=0\\cdot B+C=C,$$\n$$F\\big|_{A=0}=\\bar{0}\\,B+0\\cdot C=1\\cdot B+0=B.$$\n因此，\n$$F=A\\cdot C+\\bar{A}\\cdot B.$$\n这正是一个由$A$控制的2选1多路选择器，其数据输入为$C$（当$A=1$时）和$B$（当$A=0$时）。$B$和$C$都是主输入，满足了只有主输入或常量才能被传输的约束条件。\n\n传输晶体管逻辑的实现方案：\n\n- 仅NMOS的PTL：用两个NMOS传输晶体管实现两个多路选择器分支：\n  - 一个NMOS在其栅极接收到$A$时，将$C$传输到输出。\n  - 一个NMOS在其栅极接收到$\\bar{A}$时，将$B$传输到输出。\n  由于$\\bar{A}$可无成本获得，这恰好使用$2$个晶体管。\n\n- 传输门PTL：每个分支使用一个由$A$和$\\bar{A}$控制的TG（一个NMOS与一个PMOS并联）。两个分支需要$2$个TG，即$4$个晶体管。\n\n下限论证：因为当$A=1$时$F$等于$C$，当$A=0$时$F$等于$B$，所以输出必须选择性地连接到两个独立的源（$B$和$C$）。每个从源到输出的路径至少需要一个受控开关，因此至少需要$2$个开关器件。使用$2$个晶体管的仅NMOS实现方案达到了这个下限，在所述约束条件下实现了绝对最小的晶体管数量。\n\n因此，所需的最小晶体管数量为$2$。", "answer": "$$\\boxed{2}$$", "id": "1952038"}]}
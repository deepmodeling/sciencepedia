{"hands_on_practices": [{"introduction": "异步计数器的基本功能是按顺序计数，但我们常常需要它在特定数值处停止或复位。本练习将带你实践如何通过添加组合逻辑电路来修改一个标准二进制计数器的计数序列，从而创建一个具有自定义模数（Mod-N）的计数器。这是一个非常实用的设计技巧，让你能够根据具体应用需求定制计数器的行为。[@problem_id:1909926]", "problem": "一个4位二进制异步（纹波）递增计数器由四个触发器构成。这些触发器的输出表示为 $Q_3, Q_2, Q_1, Q_0$，其中 $Q_3$ 是最高有效位 (MSB)，$Q_0$ 是最低有效位 (LSB)。该计数器设计用于按递增顺序循环通过二进制状态，从状态 $Q_3Q_2Q_1Q_0 = 0000$ 开始。\n\n为了修改计数器的自然序列，增加了一个双输入与门。该与门的输入连接到计数器输出 $Q_3$ 和 $Q_1$。与门的输出连接到所有四个触发器的全局异步清零（CLEAR）输入。CLEAR 输入上的高电平信号会立即将所有触发器输出强制清零（即计数器状态变为 $0000$），而无需考虑时钟信号。\n\n假设计数器从状态 $0000$ 开始并接收时钟信号，这个修改后的计数器的模数是多少？模数定义为计数器在重复之前所经历的唯一稳定状态的数量。", "solution": "设自然的4位异步递增计数器的序列是从 $0000$ 到 $1111$ 的二进制状态递增序列。将异步清零信号定义为\n$$\nC = Q_{3} Q_{1}.\n$$\n根据设计，每当 $C=1$ 时，全局CLEAR输入被置为高电平，并立即将所有触发器输出强制为 $0000$，这与时钟无关。\n\n条件 $C=1$ 恰好在 $Q_{3}=1$ 和 $Q_{1}=1$ 的状态下成立，即对于状态集合 $\\{1x1x\\}$，也就是 $1010$、$1011$、$1110$ 和 $1111$。从 $0000$ 开始向上计数，第一次满足此条件是在达到状态 $1010$ 时。\n\n由于CLEAR是异步且高电平有效的，状态 $1010$ 不会作为一个稳定状态持续存在；当达到 $1010$ 时，计数器会立即被强制清零至 $0000$。因此，每个周期中的稳定状态恰好是\n$$\n0000, 0001, 0010, 0011, 0100, 0101, 0110, 0111, 1000, 1001,\n$$\n之后计数器试图进入 $1010$ 状态，但会立即被清零回到 $0000$。\n\n因此，模数等于重复前所经历的唯一稳定状态的数量，即\n$$\n10.\n$$", "answer": "$$\\boxed{10}$$", "id": "1909926"}, {"introduction": "异步计数器的“异步”特性源于其逐级传递的时钟信号，这导致了固有的传播延迟问题。本练习将让你直面这个核心限制，通过精确计算在一个状态转换期间，计数器因“涟漪效应”而停留在错误瞬态的总时间。通过这个计算，你将把传播延迟这个抽象概念转化为一个具体的、可量化的物理量。[@problem_id:1909968]", "problem": "一个3位异步纹波递减计数器由负边沿触发的JK触发器构成。其输出表示为 $Q_2Q_1Q_0$，其中 $Q_0$ 是最低有效位 (LSB)。在此实现中，每个触发器（LSB除外）的时钟输入由前一个触发器的反相输出 $\\bar{Q}$ 驱动。所有触发器的J和K输入都连接到高电平信号，使其在每个触发时钟沿翻转。一个周期性时钟信号被施加到LSB触发器的时钟输入端。每个触发器从其时钟的触发沿到其输出变化都有相同的传播延迟 $t_{pd} = 12\\text{ns}$。\n\n考虑计数器从稳定状态 $Q_2Q_1Q_0 = 100$ 变化到递减计数序列中的下一个稳定状态的特定转换过程。在此转换过程中，由于纹波效应，计数器可能会短暂地经过其他二进制状态。这些暂态被认为是不正确的。\n\n计算在此单次转换事件中，计数器显示不正确状态（即初始状态 $100$ 或最终状态 $011$ 之外的任何状态）的总持续时间。请以纳秒为单位表示你的答案。", "solution": "因为每个触发器都是负边沿触发，且第 $i$ 级（$i \\geq 1$）的时钟由第 $i-1$ 级的 $\\bar{Q}$ 驱动，所以第 $i$ 级在 $\\bar{Q}_{i-1}$ 的下降沿翻转，这发生在 $Q_{i-1}$ 产生 $0 \\to 1$ 转换时。在 $J=K=1$ 的情况下，每个触发器在其触发时钟沿都会翻转。假设到达LSB的外部时钟下降沿发生在 $t=0$ 时刻。\n\n初始稳定状态为 $Q_{2}Q_{1}Q_{0}=100$。\n\n纹波过程中的时序和状态：\n- 在 $t=0$ 时，时钟下降沿到达LSB。经过一个传播延迟 $t_{pd}$ 后，LSB在 $t=t_{pd}$ 时翻转：$Q_{0}: 0 \\to 1$。状态变为 $101$。同时，$\\bar{Q}_{0}$ 产生 $1 \\to 0$ 的变化，这是中间触发器时钟的下降沿。\n- 中间触发器在其时钟下降沿之后再经过一个 $t_{pd}$ 响应，所以在 $t=2t_{pd}$ 时它会翻转：$Q_{1}: 0 \\to 1$。状态变为 $111$。同时，$\\bar{Q}_{1}$ 产生 $1 \\to 0$ 的变化，这是MSB触发器时钟的下降沿。\n- MSB再经过一个 $t_{pd}$ 后响应，所以在 $t=3t_{pd}$ 时它会翻转：$Q_{2}: 1 \\to 0$。状态变为 $011$，这是递减计数的最终稳定状态。\n\n因此，计数器从 $t=t_{pd}$ 时的第一次变化（状态 $101$）开始显示不正确状态，直到在 $t=3t_{pd}$ 时达到最终正确状态（状态 $011$）。总的不正确状态持续时间为\n$$\nT_{\\text{incorrect}} = 3t_{pd} - t_{pd} = 2t_{pd}.\n$$\n当 $t_{pd} = 12\\text{ns}$ 时，\n$$\nT_{\\text{incorrect}} = 2 \\times 12\\text{ns} = 24\\text{ns}.\n$$", "answer": "$$\\boxed{24}$$", "id": "1909968"}, {"introduction": "传播延迟不仅影响计数器内部状态的建立，还会在其与外部解码电路交互时引发问题。本练习将揭示一个由传播延迟引起的常见问题——解码毛刺（glitch）。你将分析一个场景，其中一个用于检测特定状态的解码器会产生一个短暂的错误高电平脉冲，并计算这个毛刺的持续时间，从而深刻理解在实际应用中处理时序问题的重要性。[@problem_id:1909978]", "problem": "一个3位异步二进制加法计数器由三个下降沿触发的T型触发器构成。这些触发器的输出表示为 $Q_2, Q_1, Q_0$，其中 $Q_2$ 是最高有效位 (MSB)，$Q_0$ 是最低有效位 (LSB)。外部时钟信号连接到用于 $Q_0$ 的触发器的时钟输入端。每个触发器的输出连接到下一个更高位触发器的时钟输入端（即，$Q_0$ 驱动用于 $Q_1$ 的触发器，$Q_1$ 驱动用于 $Q_2$ 的触发器）。每个触发器从时钟下降沿到其输出变化有 $t_{p,ff} = 12.0\\text{ns}$ 的一致传播延迟。\n\n一个监控电路连接到计数器的输出，以生成信号 $Z$。该电路设计为当且仅当计数器状态为 $Q_2Q_1Q_0 = 000_2$ 时，输出高逻辑电平。此功能由一个3输入或非门实现，其传播延迟为 $t_{p,gate} = 3.5\\text{ns}$。该或非门的输入是 $Q_2, Q_1$ 和 $Q_0$。\n\n最初，计数器处于稳定状态 $011_2$。在时间 $t=0$ 时，一个下降沿到达外部时钟输入端。当计数器向其下一个稳定状态转换时，由于涟漪效应，监控信号 $Z$ 会错误地短暂脉冲至高电平。\n\n计算信号 $Z$ 保持为高电平的总持续时间。用纳秒表示你的最终答案，并四舍五入到三位有效数字。", "solution": "对于一个 $T=1$ 的下降沿触发T型触发器，其输出在其时钟输入端出现下降沿一个传播延迟后翻转。在涟漪连接中，下降沿从 $Q_{0}$ 传播到 $Q_{1}$，再到 $Q_{2}$，每次传播都会产生一个触发器延迟 $t_{p,ff}$。\n\n设 $t=0$ 为外部时钟下降沿到达 $Q_{0}$ 触发器的时间。设 $t_{p,ff}$ 为一致的触发器延迟：\n- $Q_{0}$ 在 $t=t_{p,ff}$ 时翻转：$1 \\to 0$，因此状态变为 $010$。\n- $Q_{0}$ 处的下降沿在 $t=t_{p,ff}$ 时钟控 $Q_{1}$，因此 $Q_{1}$ 在 $t=2t_{p,ff}$ 时翻转：$1 \\to 0$，得到状态 $000$。\n- $Q_{1}$ 处的下降沿在 $t=2t_{p,ff}$ 时钟控 $Q_{2}$，因此 $Q_{2}$ 在 $t=3t_{p,ff}$ 时翻转：$0 \\to 1$，得到状态 $100$。\n\n因此，在或非门的输入端，向量 $Q_{2}Q_{1}Q_{0}$ 在以下时间区间内等于 $000$：\n$$\n[\\,2t_{p,ff},\\,3t_{p,ff}\\,)\n$$\n一个3输入或非门当且仅当其所有输入均为低电平时，输出高电平。考虑到或非门的延迟 $t_{p,gate}$，输出 $Z$ 在 $t=2t_{p,ff}+t_{p,gate}$ 时变为高电平，并在 $t=3t_{p,ff}+t_{p,gate}$ 时返回低电平。因此，$Z$ 处的高电平脉冲宽度为\n$$\nt_{\\text{HIGH}}=(3t_{p,ff}+t_{p,gate})-(2t_{p,ff}+t_{p,gate})=t_{p,ff}.\n$$\n代入给定值 $t_{p,ff}=12.0\\text{ns}$，\n$$\nt_{\\text{HIGH}}=12.0\\text{ns}.\n$$\n四舍五入到三位有效数字，持续时间仍为 $12.0$。", "answer": "$$\\boxed{12.0}$$", "id": "1909978"}]}
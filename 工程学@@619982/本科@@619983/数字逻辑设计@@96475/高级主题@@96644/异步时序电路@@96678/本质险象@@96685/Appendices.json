{"hands_on_practices": [{"introduction": "第一个练习将带你从电路的次态方程入手，直接识别潜在的基本险象。通过分析状态变量如何响应输入变化，你将学会追踪状态转换路径，并发现险象的迹象：一个单一的输入变化引发了三个或更多状态的连续变化[@problem_id:1933686]。这项基础技能对于在最根本的层面验证任何异步设计的稳健性至关重要。", "problem": "一个异步时序电路被设计为基于单个外部输入 `x` 和两个内部状态变量 `y_1` 和 `y_2` 来运行。这些变量的次态，分别用 `Y_1` 和 `Y_2` 表示，由以下布尔逻辑方程确定，其中撇号（'）表示逻辑非运算：\n\n$Y_1 = x'y_1 + xy_2$\n$Y_2 = x'y_2$\n\n本质冒险是异步电路中的一种潜在时序问题，其中输入变量的单次变化会引发一系列状态变化，而由于传播延迟，这一系列变化可能无法稳定在正确的最终状态。对于给定的输入转换，存在本质冒险的一个必要条件是，该单输入变化的转换路径在流程表中必须经过总共三个或更多个状态。\n\n分析该电路的行为，以确定在哪种（若有）单输入变化下存在本质冒险。\n\n下列哪个陈述是正确的？\n\nA. 本质冒险仅在转换 $x = 0 \\to 1$ 时存在。\n\nB. 本质冒险仅在转换 $x = 1 \\to 0$ 时存在。\n\nC. 在 $x = 0 \\to 1$ 和 $x = 1 \\to 0$ 的转换中都存在本质冒险。\n\nD. 该电路没有本质冒险。\n\nE. 所提供的信息不足以确定是否存在本质冒险。", "solution": "给定异步电路的次态方程\n$$Y_{1}=x'y_{1}+xy_{2},\\qquad Y_{2}=x'y_{2},$$\n对于一个固定的输入 $x$，一个状态 $(y_{1},y_{2})$ 是稳定的，当且仅当 $Y_{1}=y_{1}$ 且 $Y_{2}=y_{2}$。我们首先确定对于每个固定的 $x$ 值，哪些状态是稳定的。\n\n对于 $x=0$，我们有 $x'=1$，所以\n$$Y_{1}=y_{1},\\qquad Y_{2}=y_{2}.$$\n因此，当 $x=0$ 时，每个状态 $(y_{1},y_{2})\\in\\{(0,0),(0,1),(1,0),(1,1)\\}$ 都是稳定的。\n\n对于 $x=1$，我们有 $x'=0$，所以\n$$Y_{1}=y_{2},\\qquad Y_{2}=0.$$\n稳定性要求 $y_{2}=0$ 并且 $y_{1}=y_{2}=0$，因此当 $x=1$ 时，唯一的稳定状态是 $(0,0)$。\n\n我们现在来考察单输入变化的情况。\n\n1) 转换 $x:1\\to 0$。在 $x=1$ 时，唯一的稳定状态是 $(y_{1},y_{2})=(0,0)$。当输入变为 $x=0$ 后，由于对于 $x=0$ 有 $Y_{1}=y_{1}$ 和 $Y_{2}=y_{2}$，该状态仍然是稳定的。因此，转换路径只经过一个状态，即 $(0,0)$。由于本质冒险存在的一个必要条件是单输入变化的路径必须经过三个或更多状态，所以此转换不可能出现本质冒险。\n\n2) 转换 $x:0\\to 1$。我们必须考虑在 $x=0$ 时的每个稳定初始状态：\n- 从 $(0,0)$ 出发：当 $x=1$ 时，$Y_{1}=y_{2}=0$ 且 $Y_{2}=0$，所以 $(0,0)$ 已经是稳定状态。路径经过1个状态。\n- 从 $(1,0)$ 出发：当 $x=1$ 时，$Y_{1}=y_{2}=0$ 且 $Y_{2}=0$，所以只有 $y_{1}$ 发生一次变化：$(1,0)\\to(0,0)$。路径经过2个状态。\n- 从 $(1,1)$ 出发：当 $x=1$ 时，$Y_{1}=y_{2}=1$ (所以 $y_{1}$ 保持不变) 且 $Y_{2}=0$ (所以 $y_{2}$ 必须变化)，得到 $(1,1)\\to(1,0)$，之后 $Y_{1}=0$ 迫使 $(1,0)\\to(0,0)$。路径为\n$$ (1,1)\\to(1,0)\\to(0,0), $$\n该路径经过3个状态。这满足了本质冒险存在的必要条件。\n- 从 $(0,1)$ 出发：当 $x=1$ 时，$Y_{1}=y_{2}=1$ 且 $Y_{2}=0$，所以 $y_{1}$ 和 $y_{2}$ 都被激励。根据相对延迟的不同：\n  - 如果 $y_{2}$ 先翻转：$(0,1)\\to(0,0)$，经过2个状态。\n  - 如果 $y_{1}$ 先翻转：$(0,1)\\to(1,1)\\to(1,0)\\to(0,0)$，经过4个状态，这也满足了本质冒险存在的必要条件。\n\n因此，对于单输入变化 $x:0\\to 1$，存在经过三个或更多状态的转换路径（例如，从 $(1,1)$ 出发，或从 $(0,1)$ 出发且 $y_{1}$ 先于 $y_{2}$ 变化）。故对于 $x:0\\to 1$ 可能发生本质冒险。对于 $x:1\\to 0$，路径从未超过一个状态，因此不能满足必要条件。\n\n因此，本质冒险仅在转换 $x=0\\to 1$ 时存在。", "answer": "$$\\boxed{A}$$", "id": "1933686"}, {"introduction": "在上一个练习的基础上，本实践将我们的视角转移到状态转换表，这是一个用于描述状态机行为的更高级工具。你将学习通过检查表中稳定状态之间的转换来检测基本险象的条件[@problem_id:1933665]。这种方法使你能够快速评估设计对时序竞争的敏感性，而无需深入研究门级实现，这是高效分析异步电路的一项关键技能。", "problem": "一个异步时序电路通过一个原始流程表来描述。该电路有两个输入 $x_1$ 和 $x_2$，以及四个内部状态，名为S1、S2、S3和S4。表中每个状态行都恰好有一个稳定状态，在此状态下，次态与现态相同。其行为由以下次态转换定义：\n\n对于现态S1，其稳定状态在输入 $x_1x_2=00$ 处：\n- 如果 $x_1x_2=01$，则次态为S2。\n- 如果 $x_1x_2=11$，则次态为S3。\n- 如果 $x_1x_2=10$，则次态为S2。\n\n对于现态S2，其稳定状态在输入 $x_1x_2=01$ 处：\n- 如果 $x_1x_2=00$，则次态为S1。\n- 如果 $x_1x_2=11$，则次态为S3。\n- 如果 $x_1x_2=10$，则次态为S4。\n\n对于现态S3，其稳定状态在输入 $x_1x_2=11$ 处：\n- 如果 $x_1x_2=00$，则次态为S1。\n- 如果 $x_1x_2=01$，则次态为S2。\n- 如果 $x_1x_2=10$，则次态为S4。\n\n对于现态S4，其稳定状态在输入 $x_1x_2=10$ 处：\n- 如果 $x_1x_2=00$，则次态为S1。\n- 如果 $x_1x_2=01$，则次态为S2。\n- 如果 $x_1x_2=11$，则次态为S3。\n\n本质冒险是异步电路中由传播延迟引起的一种潜在故障，其中单个输入变化可能导致电路进入一个不正确的最终状态。根据所提供的流程表，下列哪个事件可能导致本质冒险的发生？\n\nA. 从行S1的稳定状态开始，输入变量 $x_1$ 发生变化。\n\nB. 从行S1的稳定状态开始，输入变量 $x_2$ 发生变化。\n\nC. 从行S2的稳定状态开始，输入变量 $x_1$ 发生变化。\n\nD. 从行S3的稳定状态开始，输入变量 $x_2$ 发生变化。\n\nE. 从行S4的稳定状态开始，输入变量 $x_1$ 发生变化。", "solution": "基本模式异步操作假定每次只有一个输入变量发生变化，并且从任何稳定状态开始，电路将按照原始流程表所决定的次态序列进行转换，直到达到与新输入值相关联的唯一稳定状态。设从输入列到其唯一稳定行的映射为\n$$\nf(00)=\\text{S1},\\quad f(01)=\\text{S2},\\quad f(11)=\\text{S3},\\quad f(10)=\\text{S4}.\n$$\n对于给定的现态行 $R$ 和输入 $u$，将流程表中的次态条目表示为 $N(R,u)$。对于从行 $R$ 的稳定状态开始的单个输入变化 $u$，避免本质冒险的一个必要条件是单步条件\n$$\nN(R,u)=f(u),\n$$\n这意味着输入变化后到达的第一个次态就是该输入的最终稳定行。如果 $N(R,u)\\neq f(u)$，则电路必须响应一个输入变化而经历两个或更多的内部状态转换，而来自该输入的路径延迟不等就可能产生本质冒险。\n\n使用给定的流程表：\n\n- 选项A：从行S1的稳定状态（输入为$00$）开始，改变$x_{1}$使得$00\\to 10$。最终的稳定行必须是$f(10)=\\text{S4}$。根据流程表，$N(\\text{S1},10)=\\text{S2}\\neq \\text{S4}$，因此在固定输入$10$下，转换轨迹为 $\\text{S1}\\to \\text{S2}\\to \\text{S4}$，需要两次内部转换。这违反了单步条件，容易产生本质冒险。\n\n- 选项B：从S1在$00$处开始，改变$x_{2}$使得$00\\to 01$。最终的稳定行是$f(01)=\\text{S2}$，并且$N(\\text{S1},01)=\\text{S2}=f(01)$，因此这是一次单步转换，没有本质冒险风险。\n\n- 选项C：从S2在$01$处开始，改变$x_{1}$使得$01\\to 11$。最终的稳定行是$f(11)=\\text{S3}$，并且$N(\\text{S2},11)=\\text{S3}=f(11)$，因此是单步转换，无本质冒险。\n\n- 选项D：从S3在$11$处开始，改变$x_{2}$使得$11\\to 10$。最终的稳定行是$f(10)=\\text{S4}$，并且$N(\\text{S3},10)=\\text{S4}=f(10)$，因此是单步转换，无本质冒险。\n\n- 选项E：从S4在$10$处开始，改变$x_{1}$使得$10\\to 00$。最终的稳定行是$f(00)=\\text{S1}$，并且$N(\\text{S4},00)=\\text{S1}=f(00)$，因此是单步转换，无本质冒险。\n\n因此，只有选项A中的事件可能导致本质冒险。", "answer": "$$\\boxed{A}$$", "id": "1933665"}, {"introduction": "学习了如何识别基本险象之后，最后的这个实践将带你进入定量分析和险象消除的领域。在一个给定门延迟和线延迟的电路中，你将计算为防止竞争条件导致故障所需满足的精确时序约束[@problem_id:1933656]。这个练习将理论上的险象概念与通过管理传播延迟来确保电路可靠运行的具体工程任务联系起来，为你架起一座理论与实践的桥梁。", "problem": "一个异步时序电路被设计为具有单个主输入 `x` 和单个状态变量 `y`。该电路的次态方程为 `Y = x'y + x`。该电路使用分立逻辑门实现如下：一个反相器门 (INV) 生成 `x'` 信号，一个双输入与门 (G1) 实现 `x'y` 项，一个双输入或门 (G2) 根据 `x'y` 和 `x` 项产生最终输出 `Y`。输出 `Y` 通过反馈路径反馈至状态变量输入 `y`。\n\n各组件的传播延迟指定如下：\n- 与门 (G1) 和或门 (G2) 的传播延迟均为 `T_g = 1.2` ns。\n- 反相器门 (INV) 的传播延迟是一个未知值 `T_inv`。\n- 逻辑元件之间（例如，从引脚到门或门到门）的任何单根导线互连的信号传播延迟为 `T_w = 0.3` ns。\n- 反馈路径的总传播延迟，即从 G2 的输出 `Y` 回到它被用作 G1 的 `y` 输入处，为 `T_fb = 5.0` ns。\n\n电路初始处于对应 `x=1` 和 `y=1` 的稳定状态。在 `t=0` 时刻，主输入 `x` 从 `1` 转换到 `0`。已知这种转换容易发生本质冒险，可能导致电路暂时产生毛刺并稳定在不正确的最终状态。为保证正确运行，传播延迟必须满足一个特定的不等式。\n\n计算可确保电路正确运行并避免此本质冒险的反相器最大允许传播延迟 `T_inv`。以纳秒 (ns) 为单位表示您的答案，并保留两位有效数字。", "solution": "异步次态函数为 $Y = x'y + x$。初始时 $x=1$ 且 $y=1$，因此 $Y=1$。在 $t=0$ 时，$x$ 发生 $1 \\rightarrow 0$ 的跳变。\n\n从 $x$ 到或门 (G2) 输入有两条路径：\n- 到 G2 的直接路径：从 $x$ 到 G2 的输入导线贡献延迟 $T_{w}$，然后是或门延迟 $T_{g}$。因此，由 $x$ 引起的 $Y$ 的下降沿发生在\n$$\nt_{Y,\\text{fall}} = T_{w} + T_{g}.\n$$\n- 反相/乘积项路径 $x \\rightarrow \\text{INV} \\rightarrow \\text{G1} \\rightarrow \\text{G2}$：延迟包括 $x$ 到 INV 输入导线的延迟 $T_{w}$，反相器延迟 $T_{\\text{inv}}$，INV 到 G1 输入导线的延迟 $T_{w}$，与门延迟 $T_{g}$，G1 到 G2 输入导线的延迟 $T_{w}$，以及或门延迟 $T_{g}$。由于在任何反馈到达之前，G1 处的 $y$ 保持为 $1$，因此通过乘积项使 $Y$ 上升的时刻是\n$$\nt_{Y,\\text{rise}} = T_{w} + T_{\\text{inv}} + T_{w} + T_{g} + T_{w} + T_{g} = 3T_{w} + T_{\\text{inv}} + 2T_{g}.\n$$\n\n由 $x:1 \\rightarrow 0$ 跳变在 $Y$ 处产生的瞬时低电平脉冲宽度为\n$$\nW = t_{Y,\\text{rise}} - t_{Y,\\text{fall}} = \\left(3T_{w} + T_{\\text{inv}} + 2T_{g}\\right) - \\left(T_{w} + T_{g}\\right) = 2T_{w} + T_{\\text{inv}} + T_{g}.\n$$\n\n为避免本质冒险，这个低电平脉冲必须不能在 $Y$ 恢复高电平之前通过反馈路径传播并破坏 G1 的 $y$ 输入。因此，必要条件是\n$$\nW < T_{\\text{fb}} \\quad \\Rightarrow \\quad 2T_{w} + T_{\\text{inv}} + T_{g} < T_{\\text{fb}}.\n$$\n解出反相器延迟可得\n$$\nT_{\\text{inv}} < T_{\\text{fb}} - \\left(2T_{w} + T_{g}\\right).\n$$\n\n代入给定值 $T_{g} = 1.2\\ \\text{ns}$，$T_{w} = 0.3\\ \\text{ns}$ 和 $T_{\\text{fb}} = 5.0\\ \\text{ns}$，\n$$\nT_{\\text{inv,max}} = 5.0 - \\left(2 \\cdot 0.3 + 1.2\\right) = 5.0 - 1.8 = 3.2\\ \\text{ns}.\n$$\n保留两位有效数字，最大允许反相器延迟为 $3.2$。", "answer": "$$\\boxed{3.2}$$", "id": "1933656"}]}
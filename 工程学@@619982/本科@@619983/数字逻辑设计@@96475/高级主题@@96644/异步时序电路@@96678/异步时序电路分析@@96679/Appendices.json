{"hands_on_practices": [{"introduction": "分析异步时序电路行为的核心在于追踪其状态如何响应输入变化。本练习将引导你完成这一基本过程：给定一个初始稳定状态和一系列输入变化，你将使用激励方程来计算后续状态。通过这个练习[@problem_id:1911060]，你将掌握如何判断电路何时稳定，何时不稳定，并能手动模拟电路从一个稳定状态过渡到另一个稳定状态的全过程。", "problem": "一个用于微定位平台的控制单元被建模为一个异步时序电路。该电路有两个外部输入 $x_1$ 和 $x_2$，以及两个内部状态变量 $y_1$ 和 $y_2$。该电路的行为由以下关于次态变量 ($Y_1$, $Y_2$) 的激励方程决定：\n\n$$Y_1 = x_1'y_2 + x_2y_1$$\n$$Y_2 = x_1y_1' + x_2'y_2$$\n\n在这里，撇号（例如 $x_1'$）表示逻辑非操作。该电路工作在基本模式下，这意味着在电路达到一个稳定状态之前，输入保持不变，然后才能发生下一次输入变化。对于给定的输入 $(x_1, x_2)$，如果次态 $(Y_1, Y_2)$ 等于现态 $(y_1, y_2)$，则状态 $(y_1, y_2)$ 被定义为稳定的。\n\n初始时，电路处于稳定状态 $(y_1, y_2) = (0, 0)$，输入保持在 $(x_1, x_2) = (0, 0)$。\n\n发生了一个包含两次输入变化的序列：\n1. 首先，输入 $x_1$ 从0变为1。电路将稳定到一个新的稳定状态。\n2. 在电路稳定后，输入 $x_1$ 从1变回0。\n\n确定在整个序列结束后电路的最终稳定状态 $(y_1, y_2)$。将你的答案表示为二进制字符串 $y_1y_2$。", "solution": "电路由以下激励方程定义\n$$Y_{1}=x_{1}'y_{2}+x_{2}y_{1}, \\quad Y_{2}=x_{1}y_{1}'+x_{2}'y_{2}.$$\n对于给定的输入 $(x_{1},x_{2})$，如果 $Y_{1}=y_{1}$ 且 $Y_{2}=y_{2}$，则状态 $(y_{1},y_{2})$ 是稳定的。\n\n初始时，$(x_{1},x_{2})=(0,0)$ 且 $(y_{1},y_{2})=(0,0)$。评估在 $(0,0)$ 输入下的稳定性：\n$$Y_{1}=x_{1}'y_{2}+x_{2}y_{1}=1\\cdot 0+0\\cdot 0=0,\\quad Y_{2}=x_{1}y_{1}'+x_{2}'y_{2}=0\\cdot 1+1\\cdot 0=0.$$\n因此，对于输入 $(0,0)$，状态 $(0,0)$ 是稳定的。\n\n第一次输入变化：设置 $(x_{1},x_{2})=(1,0)$，让电路稳定下来。对于此输入，\n$$Y_{1}=x_{1}'y_{2}+x_{2}y_{1}=0\\cdot y_{2}+0\\cdot y_{1}=0,\\quad Y_{2}=x_{1}y_{1}'+x_{2}'y_{2}=1\\cdot y_{1}'+1\\cdot y_{2}=y_{1}'+y_{2}.$$\n稳定条件要求 $y_{1}=Y_{1}=0$ 且 $y_{2}=Y_{2}=y_{1}'+y_{2}$。代入 $y_{1}=0$ 得到 $y_{2}=1$，所以唯一的稳定状态是 $(y_{1},y_{2})=(0,1)$。从状态 $(0,0)$ 开始，只有 $y_{2}$ 被激励（因为 $y_{2}=0$ 而 $Y_{2}=1$），所以电路转移到 $(0,1)$ 并在那里稳定下来。\n\n第二次输入变化：从状态 $(y_{1},y_{2})=(0,1)$ 开始，输入返回到 $(x_{1},x_{2})=(0,0)$。对于输入 $(0,0)$，\n$$Y_{1}=x_{1}'y_{2}+x_{2}y_{1}=1\\cdot y_{2}+0\\cdot y_{1}=y_{2},\\quad Y_{2}=x_{1}y_{1}'+x_{2}'y_{2}=0\\cdot y_{1}'+1\\cdot y_{2}=y_{2}.$$\n稳定条件是 $y_{1}=y_{2}$ 和 $y_{2}=y_{2}$，所以稳定状态是那些满足 $y_{1}=y_{2}$ 的状态，即 $(0,0)$ 和 $(1,1)$。从当前状态 $(0,1)$，计算激励值：$Y_{1}=1$ 且 $Y_{2}=1$。因此 $y_{1}$ 被激励发生改变（因为 $y_{1}=0\\neq Y_{1}=1$），而 $y_{2}$ 没有被激励（因为 $y_{2}=1=Y_{2}$）。因此 $y_{1}$ 切换到1，得到状态 $(y_{1},y_{2})=(1,1)$。再次检查， $Y_{1}=y_{2}=1$ 且 $Y_{2}=y_{2}=1$，所以 $(1,1)$ 是稳定的。\n\n因此，在整个输入序列之后，电路稳定到最终的稳定状态 $(y_{1},y_{2})=(1,1)$，即二进制字符串 $y_{1}y_{2}=11$。", "answer": "$$\\boxed{11}$$", "id": "1911060"}, {"introduction": "在理想世界中，多个信号会同时变化，但在物理电路中，由于门延迟和布线长度的差异，信号之间总存在一场“赛跑”。本练习[@problem_id:1911054]将深入探讨这种被称为“竞争-冒险”的现象。你将分析当两个状态变量都需要改变时，因传播延迟不同而可能出现的两种不同转换路径，并理解为何在这种特定情况下，尽管路径不同，最终结果却是一致的（即非关键竞争）。", "problem": "一个异步时序电路被用作自动化制造过程中的安全联锁系统的一部分。该电路的行为由单个外部输入 `x` 和两个内部状态变量 `y_1` 和 `y_2` 描述。该电路的次态方程决定了基于输入 `x` 和现态 `(y_1, y_2)` 的次态 `(Y_1, Y_2)`，其方程如下：\n\n$Y_1 = x$\n$Y_2 = x$\n\n初始时，系统处于一个长期稳定的状态，其中输入 `x` 为 `0`，状态变量 `(y_1, y_2)` 为 `(0, 0)`。在 `t_0` 时刻，输入 `x` 瞬间从 `0` 变为 `1` 并保持为 `1`。\n\n由于电路布线和逻辑门的物理差异，状态变量 `y_1` 的传播延迟不一定等于 `y_2` 的传播延迟。这意味着当 `y_1` 和 `y_2` 都需要改变时，其中一个可能会在另一个之前改变。\n\n考虑到可能存在的不同传播延迟，请确定电路从其初始状态转移到其新的最终稳定状态时，所能经历的两种可能的现态 `(y_1, y_2)` 序列。\n\nA. 路径 1: `(0,0) -> (1,0) -> (1,1)`; 路径 2: `(0,0) -> (0,1) -> (1,1)`\n\nB. 路径 1: `(0,0) -> (1,0)`; 路径 2: `(0,0) -> (0,1) -> (1,1)`\n\nC. 电路将在 `(1,0)` 和 `(0,1)` 之间无限振荡。\n\nD. 只有一个可能的路径：`(0,0) -> (1,1)` 因为两个变量同时改变。\n\nE. 路径 1: `(0,0) -> (1,0) -> (1,1)`; 路径 2: `(0,0) -> (0,1)`", "solution": "问题要求找出，在考虑到状态变量的不同传播延迟时，一个异步电路在输入改变后所经历的可能的状态 `(y_1, y_2)` 序列。\n\n电路的次态方程为：\n$Y_1 = x$\n$Y_2 = x$\n\n**步骤 1：验证初始稳定状态**\n问题指出，电路初始时是稳定的，输入 `x = 0`，现态 `(y_1, y_2) = (0, 0)`。我们可以使用次态方程来验证这一点。\n对于 `x = 0`，方程变为：\n$Y_1 = 0$\n$Y_2 = 0$\n由于次态 `(Y_1, Y_2) = (0, 0)` 与现态 `(y_1, y_2) = (0, 0)` 相同，因此该状态确实是稳定的。\n\n**步骤 2：分析输入变化的影响**\n在 `t_0` 时刻，输入 `x` 从 `0` 变为 `1`。电路仍处于现态 `(y_1, y_2) = (0, 0)`。系统的总状态是 `(x, y_1, y_2) = (1, 0, 0)`。\n我们使用新的输入 `x = 1` 来计算次态 `(Y_1, Y_2)`：\n$Y_1 = 1$\n$Y_2 = 1$\n次态为 `(Y_1, Y_2) = (1, 1)`。\n\n**步骤 3：识别竞争条件**\n现态为 `(y_1, y_2) = (0, 0)`，次态为 `(Y_1, Y_2) = (1, 1)`。由于两个状态变量都必须改变（`y_1: 0 \\to 1` 和 `y_2: 0 \\to 1`），因此存在竞争条件。我们必须根据哪个变量先改变来分析两种可能的结果。\n\n**步骤 4：追踪路径 1（假设 `y_1` 先改变）**\n如果 `y_1` 的传播延迟较短，它将在 `y_2` 之前从 `0` 变为 `1`。\n- 状态 `(y_1, y_2)` 从 `(0, 0)` 转换到一个中间状态 `(1, 0)`。\n- 现在，电路处于现态 `(y_1, y_2) = (1, 0)`，输入 `x = 1`。总状态是 `(x, y_1, y_2) = (1, 1, 0)`。我们必须从这个中间点计算次态。\n- 使用 `x = 1` 的次态方程：\n  $Y_1 = 1$\n  $Y_2 = 1$\n- 次态为 `(Y_1, Y_2) = (1, 1)`。现态为 `(1, 0)`。电路现在将从 `(1, 0)` 转换到 `(1, 1)`。这是一个稳定的转换，因为只有 `y_2` 改变。\n- 一旦电路在 `x=1` 时到达 `(y_1, y_2) = (1, 1)`，我们来检查其稳定性。次态为 `(Y_1, Y_2)=(1, 1)`，与现态相同。所以 `(1, 1)` 是最终的稳定状态。\n\n路径 1 的状态序列是：`(0, 0) \\to (1, 0) \\to (1, 1)`。\n\n**步骤 5：追踪路径 2（假设 `y_2` 先改变）**\n如果 `y_2` 的传播延迟较短，它将在 `y_1` 之前从 `0` 变为 `1`。\n- 状态 `(y_1, y_2)` 从 `(0, 0)` 转换到一个中间状态 `(0, 1)`。\n- 现在，电路处于现态 `(y_1, y_2) = (0, 1)`，输入 `x = 1`。总状态是 `(x, y_1, y_2) = (1, 0, 1)`。我们从这个点计算次态。\n- 使用 `x = 1` 的次态方程：\n  $Y_1 = 1$\n  $Y_2 = 1$\n- 次态为 `(Y_1, Y_2) = (1, 1)`。现态为 `(0, 1)`。电路现在将从 `(0, 1)` 转换到 `(1, 1)`。这是一个稳定的转换，因为只有 `y_1` 改变。\n- 电路到达 `(y_1, y_2) = (1, 1)`，我们已经确定这对于 `x = 1` 是一个稳定状态。\n\n路径 2 的状态序列是：`(0, 0) \\to (0, 1) \\to (1, 1)`。\n\n**步骤 6：结论**\n- 由不同传播延迟引起的两个可能路径都导向同一个最终稳定状态 `(1, 1)`。这种类型的竞争被称为非临界竞争。\n- 两种可能的状态序列是：\n  - 路径 1: `(0,0) -> (1,0) -> (1,1)`\n  - 路径 2: `(0,0) -> (0,1) -> (1,1)`\n- 将此结果与给定的选项进行比较，我们发现它与选项 A 匹配。", "answer": "$$\\boxed{A}$$", "id": "1911054"}, {"introduction": "分析问题很重要，但从设计上预防问题更为关键。在识别了竞争-冒险的潜在风险后，我们自然会问：如何设计一个能从根本上避免这种风险的电路？本练习[@problem_id:1911037]将你的角色从分析师转变为设计师。你将学习并应用“相邻分配”原则，为电路状态选择合适的二进制编码，确保任意两个直接转换的状态码之间仅有一位不同，从而在设计阶段就消除竞争-冒险。", "problem": "一个异步时序电路由下方的合并流程表所描述，其具有四个状态：A、B、C 和 D。该电路有一个二进制输入 $x$ 且不产生任何输出。状态将使用三个状态变量 $(y_2, y_1, y_0)$ 进行编码。现已进行部分状态分配：状态 A 被分配了二进制码 `000`，状态 C 被分配了二进制码 `011`。\n\n| 当前状态 | 下一状态, $x=0$ | 下一状态, $x=1$ |\n| :-----------: | :---------------: | :---------------: |\n|       A       |         A         |         B         |\n|       B       |         C         |         B         |\n|       C       |         C         |         D         |\n|       D       |         A         |         D         |\n\n为确保无竞争设计，流程表中任何两个存在直接转换的状态都必须被分配相邻的二进制码（即只有一个比特位不同的码）。从下方给出的可能的三位二进制码列表中，找出所有满足此条件的状态 B 的有效分配。\n\nA. `001`\n\nB. `110`\n\nC. `100`\n\nD. `010`\n\nE. `111`", "solution": "无竞争要求规定，对于流程表中的每一个直接转换 $S \\to T$，其分配的二进制码之间的汉明距离必须恰好为1：\n$$d_{H}(\\text{code}(S),\\text{code}(T))=1.$$\n从流程表中可知，存在直接转换的不同状态对为 $(A,B)$、$(B,C)$、$(C,D)$ 和 $(D,A)$。已知 $\\text{code}(A)=000$ 且 $\\text{code}(C)=011$，任何有效的 $\\text{code}(B)$ 都必须满足\n$$d_{H}(\\text{code}(B),000)=1,\\quad d_{H}(\\text{code}(B),011)=1.$$\n与 $000$ 汉明距离为1的三位码集合是\n$$N(000)=\\{001,010,100\\}.$$\n与 $011$ 汉明距离为1的三位码集合是\n$$N(011)=\\{111,001,010\\}.$$\n因此，状态 B 的可行码位于以下交集中\n$$N(000)\\cap N(011)=\\{001,010\\}.$$\n检查各个选项：\n- $001$：$d_{H}(001,000)=1$ 且 $d_{H}(001,011)=1$；有效。\n- $110$：$d_{H}(110,000)=2$；无效。\n- $100$：$d_{H}(100,011)=2$；无效。\n- $010$：$d_{H}(010,000)=1$ 且 $d_{H}(010,011)=1$；有效。\n- $111$：$d_{H}(111,000)=3$；无效。\n\n此外，无论选择哪个码作为状态 B 的编码，都会将 $\\{001,010\\}$ 中的另一个码留给状态 D。这确保了 D 可以被分配一个与 A 和 C 都相邻的码，因此全局的无竞争约束仍然是可满足的。\n\n因此，有效的选项是 A 和 D。", "answer": "$$\\boxed{AD}$$", "id": "1911037"}]}
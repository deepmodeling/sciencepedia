{"hands_on_practices": [{"introduction": "第一个练习将带你使用流表——异步电路分析的标准工具——来直接实践识别关键竞争。通过检查状态转换，你将学会准确定位那些需要多个状态变量同时改变的情形。这个练习旨在锻炼你的分析能力，通过追踪可能产生的不同中间路径，判断这种竞争是否是“关键的”，即是否会导致电路进入不同的最终稳定状态。[@problem_id:1956353]", "problem": "一个异步时序电路由下方的流表描述。该电路有两个状态变量 $y_1$ 和 $y_2$ 以及一个单一输入变量 $x$。表中的条目表示在给定当前状态 ($y_1 y_2$) 和输入 $x$ 下的下一个状态 ($Y_1 Y_2$)。当下一个状态与当前状态相同时 ($Y_1 Y_2 = y_1 y_2$)，便出现一个稳定状态。\n\n考虑这样一种情况，由于临界竞争条件，电路可能稳定在两个不同的稳定状态之一，即 $S_A$ (由 $y_1y_2 = 10$ 表示) 或 $S_B$ (由 $y_1y_2 = 11$ 表示)。当单个输入变化导致两个或多个状态变量改变，并且最终达到的稳定状态取决于内部信号的相对传播延迟时，就会发生临界竞争。\n\n**流表：**\n\n| 当前状态 ($y_1 y_2$) | $x=0$ 时的下一个状态 ($Y_1 Y_2$) | $x=1$ 时的下一个状态 ($Y_1 Y_2$) |\n|:-------------------------:|:--------------------------------:|:--------------------------------:|\n| 00                        | 00                               | 11                               |\n| 01                        | 01                               | 11                               |\n| 11                        | 10                               | 11                               |\n| 10                        | 00                               | 10                               |\n\n以下哪种转换描述了可能导致这种临界竞争的具体场景，并最终导致稳定状态为 $S_A$ 或 $S_B$？\n\nA. 电路处于对应于 $y_1y_2 = 00$ 的稳定状态，且输入 $x$ 从 0 变为 1。\n\nB. 电路处于对应于 $y_1y_2 = 11$ 的稳定状态，且输入 $x$ 从 1 变为 0。\n\nC. 电路处于对应于 $y_1y_2 = 01$ 的稳定状态，且输入 $x$ 从 0 变为 1。\n\nD. 电路处于对应于 $y_1y_2 = 10$ 的稳定状态，且输入 $x$ 从 1 变为 0。", "solution": "在异步时序电路中，当单个输入变化导致两个或多个状态变量同时改变时，就会发生临界竞争，因此不等的内部延迟可能导致不同的中间状态序列，并可能导致不同的最终稳定状态。\n\n根据流表，确定每个当前状态和输入的稳定性以及变化的位数：\n- 对于 $y_1y_2=00$：如果 $x=0$，$Y_1Y_2=00$ (稳定)；如果 $x=1$，$Y_1Y_2=11$ (两位都改变)。\n- 对于 $y_1y_2=01$：如果 $x=0$，$Y_1Y_2=01$ (稳定)；如果 $x=1$，$Y_1Y_2=11$ (一位改变)。\n- 对于 $y_1y_2=11$：如果 $x=1$，$Y_1Y_2=11$ (稳定)；如果 $x=0$，$Y_1Y_2=10$ (一位改变)。\n- 对于 $y_1y_2=10$：如果 $x=1$，$Y_1Y_2=10$ (稳定)；如果 $x=0$，$Y_1Y_2=00$ (一位改变)。\n\n临界竞争只可能发生在单个输入变化要求两位状态改变的情况下。唯一这样的情况是当电路处于 $y_1y_2=00$ 且 $x$ 从 $0$ 变为 $1$ 时，因为 $Y_1Y_2$ 变为 $11$。由于延迟不等，电路可能会经过不同的中间状态：\n- 如果 $y_2$ 先改变，序列是 $00 \\to 01$。当 $x=1$ 且状态为 $01$ 时，下一个状态是 $11$，然后 $11$ 对于 $x=1$ 是稳定的，得到 $S_B$。\n- 如果 $y_1$ 先改变，序列是 $00 \\to 10$。当 $x=1$ 且状态为 $10$ 时，下一个状态是 $10$，这个状态对于 $x=1$ 已经是稳定的，得到 $S_A$。\n\n因此，从 $y_1y_2=00$ 开始，当输入发生变化 $x:0 \\to 1$ 时，根据相对延迟，可能导致 $S_A$ 或 $S_B$，这正是所描述的临界竞争。其他选项只涉及一位的变化，因此不会产生这种不确定性。", "answer": "$$\\boxed{A}$$", "id": "1956353"}, {"introduction": "识别竞争条件是第一步，但设计师的最终目标是通过消除这些问题来创建可靠的电路。这个练习将带你从分析走向综合，挑战你修复一个已知的关键竞争。你将实践一种常见而巧妙的解决方法：通过插入一个中间非稳定状态，引导电路沿着一个确定的、每次只改变一个比特的路径进行转换，从而确保电路行为的可预测性。[@problem_id:1956335]", "problem": "考虑一个在基本模式下运行的异步时序电路，其状态转换由输入电平的变化触发。该电路有两个状态变量 $y_1$ 和 $y_2$，以及一个单个输入 $x$。其行为由以下流程表定义，该表显示了对于现态 $(y_1 y_2)$ 和输入 $x$ 的每种组合，其对应的次态 $(Y_1 Y_2)$。\n\n| 现态 ($y_1 y_2$) | 次态 ($Y_1 Y_2$) |\n|---|---|\n| | **x=0** | **x=1** |\n| 00 | 00 | 00 |\n| 01 | 01 | 10 |\n| 11 | 01 | 11 |\n| 10 | 00 | 10 |\n\n在此流程表中，当一个条目的次态 $(Y_1 Y_2)$ 与现态 $(y_1 y_2)$ 相同时，表示一个稳定状态。例如，对于现态 `00` 和输入 `x=0`，次态是 `00`，因此电路是稳定的。所有其他条目都表示不稳定状态，会导致进一步的转换。\n\n此设计中存在一个临界竞争。具体来说，当电路处于 $(y_1, y_2) = (0, 1)$ 且输入为 $x=0$ 的稳定状态时，输入变为 $x=1$ 会启动一个转换，该转换要求两个状态变量同时改变。由于不可预测的门延迟和线延迟，电路最终可能会进入一个错误的稳定状态。\n\n你的任务是消除这个临界竞争。为此，你必须修改流程表，创建一个确定性的、无竞争的转换路径，该路径利用编码为 $(y_1, y_2) = (1, 1)$ 的状态作为一个临时的、不稳定的中间状态。\n\n请提供流程表中完成此任务的两个修改后的次态条目。将你的答案表示为一个行矩阵 `[entry_A, entry_B]`，其中 `entry_A` 是 (现态=`01`, 输入=`1`) 的新次态 $(Y_1 Y_2)$，`entry_B` 是 (现态=`11`, 输入=`1`) 的新次态 $(Y_1 Y_2)$。两个条目都必须表示为两位二进制数。", "solution": "我们分析给定的在基本模式下运行的异步时序电路。该流程表指定了在单个输入 $x$ 下，两个状态变量 $y_1$ 和 $y_2$ 的次态行为。当次态 $(Y_1Y_2)$ 等于现态 $(y_1y_2)$ 时，即为稳定状态。\n\n从表中可知，$(y_1y_2,x)=(01,1)$ 对应的条目为 $10$。$01$ 和 $10$ 之间的汉明距离是 $d_{H}(01,10)=2$，这意味着两个状态变量都必须改变，由于任意的相对延迟，在异步实现中会产生临界竞争。\n\n为消除临界竞争，同时保持预期的外部映射（即在现态 $01$ 时，输入从 $x=0$ 变为 $x=1$ 最终应导致稳定状态 $10$），我们按照要求，实施一个使用 $(11)$ 作为临时的、不稳定的中间状态的单比特步进序列。因此，我们修改：\n- 将 $(01,1)$ 的次态修改为 $11$，使得 $d_{H}(01,11)=1$。\n- 并将 $(11,1)$ 的次态修改为 $10$，使得 $d_{H}(11,10)=1$。\n\n通过这两处修改，在 $x=1$ 条件下的状态转换变为 $01 \\rightarrow 11 \\rightarrow 10$，这个过程是无竞争的，因为每一步只改变一个状态变量。位于 $(10,1)$ 的最终稳定状态与原始规范保持不变，而 $(11,1)$ 如预期一样成为了一个不稳定的中间状态。\n\n因此，所需的修改条目为：\n- (现态 $=01$，输入 $=1$) 的条目：$11$，\n- (现态 $=11$，输入 $=1$) 的条目：$10$。", "answer": "$$\\boxed{\\begin{pmatrix} 11 & 10 \\end{pmatrix}}$$", "id": "1956335"}, {"introduction": "高效的设计往往需要在早期阶段就做出明智的选择，以从根源上避免问题。本练习聚焦于状态分配这一关键设计步骤及其对竞争条件的影响。通过比较同一个抽象状态机的两种不同二进制编码方案，你将深入理解一个精心设计的状态分配如何能主动地预防关键竞争，从而实现更可靠的最终电路。[@problem_id:1956347]", "problem": "一个异步时序电路正在被设计用于管理一个简单的机器人任务。该电路的行为由一个原始流程表定义。该系统有四个内部状态（A、B、C、D）和两个二进制输入（$x_1, x_2$），这些输入对应于传感器读数。电路的稳定性和转换描述如下：\n\n- **状态 A：** 当输入为 $x_1x_2=00$ 时，电路在状态 A 下稳定。若输入变为 01，则次态为 B。若输入变为 11，则次态为 C。若输入变为 10，则次态为 D。\n- **状态 B：** 当输入为 $x_1x_2=01$ 时，电路在状态 B 下稳定。若输入变为 00，则次态为 A。若输入变为 11，则次态为 C。若输入变为 10，则次态为 D。\n- **状态 C：** 当输入为 $x_1x_2=11$ 时，电路在状态 C 下稳定。若输入变为 00，则次态为 A。若输入变为 01，则次态为 B。若输入变为 10，则次态为 D。\n- **状态 D：** 当输入为 $x_1x_2=10$ 时，电路在状态 D 下稳定。若输入变为 00，则次态为 A。若输入变为 01，系统保持在稳定的状态 D。若输入变为 11，则次态为 C。\n\n提出了两种使用两个状态变量 $y_1$ 和 $y_2$ 的状态分配方案。\n\n**分配方案 I：**\n- A: $y_1y_2 = 00$\n- B: $y_1y_2 = 01$\n- C: $y_1y_2 = 11$\n- D: $y_1y_2 = 10$\n\n**分配方案 II：**\n- A: $y_1y_2 = 00$\n- B: $y_1y_2 = 11$\n- C: $y_1y_2 = 01$\n- D: $y_1y_2 = 10$\n\n其中一种分配方案存在缺陷，因为它至少在一个可能的转换中引入了临界竞争，从而可能导致错误行为。您的任务是找出导致这种临界竞争的具体条件。以下哪项描述了导致临界竞争的转换？\n\nA. 分配方案 I，从输入为 00 的稳定状态 A 开始，当输入变为 11 时。\n\nB. 分配方案 II，从输入为 11 的稳定状态 C 开始，当输入变为 00 时。\n\nC. 分配方案 II，从输入为 00 的稳定状态 A 开始，当输入变为 01 时。\n\nD. 分配方案 I，从输入为 01 的稳定状态 B 开始，当输入变为 10 时。\n\nE. 两种分配方案都没有临界竞争。", "solution": "我们通过检查任意允许的转换是否会强制两个状态变量同时变化（两位编码变化）来分析异步状态分配中的临界竞争。如果是这样，电路可能会经过一个中间赋值的状态码，如果在给定输入下，该中间状态可以稳定到与预期次态不同的稳定状态，则会发生临界竞争。\n\n根据原始流程表，每个稳定状态在每种输入下的预期次态是：\n- 从 A（在 $x_1x_2=00$ 时稳定）：输入 $01$ 时到 B，输入 $11$ 时到 C，输入 $10$ 时到 D。\n- 从 B（在 $x_1x_2=01$ 时稳定）：输入 $00$ 时到 A，输入 $11$ 时到 C，输入 $10$ 时到 D。\n- 从 C（在 $x_1x_2=11$ 时稳定）：输入 $00$ 时到 A，输入 $01$ 时到 B，输入 $10$ 时到 D。\n- 从 D（在 $x_1x_2=10$ 时稳定）：输入 $00$ 时到 A，输入 $01$ 时到 D（稳定），输入 $11$ 时到 C。\n\n分配方案 I: $A=00$, $B=01$, $C=11$, $D=10$。\n- 选项 A：从输入为 $00$ 时的 A 到输入为 $11$ 时，预期的转换为 $A\\to C$，编码变化为 $00\\to 11$（两位）。可能的中间编码是 $00\\to 01$ (B) 或 $00\\to 10$ (D)。在输入 $11$ 下，流程表给出 $B\\to C$ 和 $D\\to C$。两条路径都导向 C，因此这里没有临界竞争。\n- 选项 D：从输入为 $01$ 时的 B 到输入为 $10$ 时，预期的转换为 $B\\to D$，编码变化为 $01\\to 10$（两位）。中间编码是 $01\\to 00$ (A) 或 $01\\to 11$ (C)。在输入 $10$ 下，流程表给出 $A\\to D$ 和 $C\\to D$。两条路径都导向 D，因此这里没有临界竞争。\n因此，对于所列举的情况，分配方案 I 没有临界竞争。\n\n分配方案 II: $A=00$, $B=11$, $C=01$, $D=10$。\n- 选项 B：从输入为 $11$ 时的 C 到输入为 $00$ 时，预期的转换为 $C\\to A$，编码变化为 $01\\to 00$（一位）。这不是竞争。\n- 选项 C：从输入为 $00$ 时的 A 到输入为 $01$ 时，预期的转换为 $A\\to B$，编码变化为 $00\\to 11$（两位）。可能的中间编码是 $00\\to 01$ (C) 或 $00\\to 10$ (D)。在输入 $01$ 下，流程表给出 $C\\to B$，但 $D\\to D$（稳定）。因此，根据哪个状态变量先变化，电路可能转换到预期的 B，也可能被困在 D。这是一个临界竞争。\n因此，导致临界竞争的具体条件是：分配方案 II，从输入为 $00$ 的稳定状态 A 开始，当输入变为 $01$ 时。\n\n因此，正确选项是 C。", "answer": "$$\\boxed{C}$$", "id": "1956347"}]}
{"hands_on_practices": [{"introduction": "理论知识需要通过实践来巩固。在纹波计数器中，信号需要“涟漪”般地逐级传播，因此每一级的延迟都会累加起来，形成总传播延迟。这个基础练习将引导你计算一个多位纹波计数器的总延迟，这是理解其时序特性和性能限制的根本出发点 [@problem_id:1955756]。", "problem": "一个数字控制系统依赖一个12位异步二进制计数器（通常称为纹波计数器）来进行事件定序。该计数器通过级联触发器（toggle flip-flops）构建，其中一个触发器的输出用作下一个触发器的时钟输入。制造商规定，每个独立的触发器具有15纳秒（ns）的时钟到输出传播延迟。为确保系统操作的完整性，关键是确定在时钟脉冲施加到其第一级后，计数器达到稳定值所需的最长时间。这个持续时间被称为总最坏情况传播延迟。\n\n计算这个12位纹波计数器的总最坏情况传播延迟。答案以纳秒（ns）为单位表示。", "solution": "纹波（异步）计数器通过级联触发器形成，因此每一级的输出都作为下一级的时钟输入。如果每个触发器都有一个时钟到输出的传播延迟 $t_{pd}$，那么第一级的变化必须按顺序通过后续的每一级传播。最坏情况的稳定时间发生在变化需要“波纹”过所有 $N$ 级时（例如，一个导致每个触发器都翻转的转换）。\n\n因此，总最坏情况传播延迟是各级延迟的总和：\n$$\nT_{\\text{wc}} = N \\, t_{pd}.\n$$\n对于一个 $12$ 位纹波计数器，$N = 12$，且每个触发器的 $t_{pd} = 15 \\text{ ns}$，\n$$\nT_{\\text{wc}} = 12 \\times 15 \\text{ ns} = 180 \\text{ ns}.\n$$\n因此，在时钟脉冲施加到第一级后，计数器达到稳定所需的最长时间为 $180 \\text{ ns}$。", "answer": "$$\\boxed{180}$$", "id": "1955756"}, {"introduction": "掌握了基础计算后，让我们来探讨一个更深入的设计问题：如果组成计数器的各个触发器速度不同，我们应该如何放置它们？这个练习通过一个思想实验，挑战你对延迟累积原理的理解 [@problem_id:1955743]。通过分析，你会发现对于最坏情况下的总延迟，重要的是所有延迟的总和，而与元件在链中的具体位置无关，这有助于澄清常见的工程误区。", "problem": "一位数字系统设计的学徒，任务是构建一个4位异步二进制加法计数器，通常称为纹波计数器。他们有四个独立的T型触发器可用于此项目。经测试，发现这些触发器具有不同的时钟到输出传播延迟 ($t_{pd}$)。测得的延迟分别为8纳秒 (ns)、10 ns、12 ns 和 15 ns。对于本问题，您可以假设所有触发器的建立时间和保持时间均可忽略不计。\n\n该计数器将采用标准纹波配置构建：主系统时钟信号仅连接到第一个触发器的时钟输入端，该触发器代表最低有效位 (LSB)。每个后续触发器的输出用作链中下一个触发器的时钟输入，链中的最后一个触发器代表最高有效位 (MSB)。\n\n该学徒正在考虑两种不同的触发器排列方式：\n- **配置 X：** 触发器按传播延迟递增的顺序排列，8 ns 的触发器位于 LSB 级，15 ns 的触发器位于 MSB 级。\n- **配置 Y：** 触发器按传播延迟递减的顺序排列，15 ns 的触发器位于 LSB 级，8 ns 的触发器位于 MSB 级。\n\n为确保计数器在所有条件下都能正确运行，输入时钟的周期必须足够长，以允许状态变化传播通过整个计数器。请确定该4位计数器能够可靠运行的输入时钟的最大可能频率。答案以兆赫兹 (MHz) 为单位，并四舍五入到三位有效数字。", "solution": "设纹波链中的四个T型触发器，从LSB级到MSB级的时钟到输出传播延迟依次标记为 $t_{1}, t_{2}, t_{3}, t_{4}$。在一个各级输入 $T=1$ 且建立/保持时间可忽略的纹波（异步）加法计数器中，最坏情况的状态变化发生在所有级都必须翻转时，这在计数值的低位全为1并发生进位时出现。\n\n在系统时钟的有效沿上：\n- LSB 的输出在延迟 $t_{1}$ 后翻转。\n- 该翻转作为第二级的时钟沿，其输出在额外的延迟 $t_{2}$ 后翻转，即在相对于系统时钟沿的 $t_{1}+t_{2}$ 时刻翻转。\n- 类似地，第三级在 $t_{1}+t_{2}+t_{3}$ 时刻翻转。\n- MSB（第四级）在 $t_{1}+t_{2}+t_{3}+t_{4}$ 时刻翻转。\n\n为保证在所有输入状态下都能正确操作，系统时钟周期 $T_{\\text{clk}}$ 必须满足\n$$\nT_{\\text{clk}} \\geq t_{1}+t_{2}+t_{3}+t_{4}.\n$$\n由于此约束仅取决于各级延迟的总和，因此对四个给定延迟的任何排列都会产生相同的限制条件。因此，配置X（延迟递增）和配置Y（延迟递减）所需的最小系统时钟周期是相同的\n$$\nT_{\\min} = 8\\ \\text{ns} + 10\\ \\text{ns} + 12\\ \\text{ns} + 15\\ \\text{ns} = 45\\ \\text{ns}.\n$$\n最大可靠输入时钟频率为\n$$\nf_{\\max} = \\frac{1}{T_{\\min}} = \\frac{1}{45 \\times 10^{-9}}\\ \\text{Hz} = \\frac{10^{3}}{45}\\ \\text{MHz} \\approx 22.2\\ \\text{MHz},\n$$\n结果四舍五入到三位有效数字。", "answer": "$$\\boxed{22.2}$$", "id": "1955743"}, {"introduction": "计算传播延迟的最终目的是为了评估和指导系统设计。这个练习将理论与实践紧密结合，要求你将计算出的总延迟转化为一个关键的性能指标——最高时钟频率 [@problem_id:1955794]。完成这个练习后，你将能清晰地解释为什么传播延迟是限制数字电路速度的直接因素，并掌握如何为可靠操作确定系统的时钟频率上限。", "problem": "一位工程师正在为一个嵌入式系统中的计时应用设计一个简单的二进制纹波计数器。该计数器由$N$个级联的T触发器（T-flops）构成，每个触发器被配置为在其时钟输入的下降沿翻转其状态。主时钟信号连接到第一个T触发器的时钟输入端。对于所有后续级，第$k$个触发器的输出$Q$先通过一个非门（反相器），然后再连接到第$(k+1)$个触发器的时钟输入端。\n\n该计数器有$N=4$位。每个T触发器都存在一个传播延迟，记为$t_{pd,ff}$，为25纳秒（ns），这是指从其时钟输入沿到其输出$Q$发生相应变化所需的时间。每个反相器的传播延迟$t_{pd,inv}$为5纳秒。\n\n为使计数器可靠工作，所有触发器的输出必须在下一个主时钟脉冲到来之前稳定到其最终的正确状态。确定该计数器的最大可能时钟频率。答案以兆赫兹（MHz）为单位表示，并四舍五入到三位有效数字。", "solution": "一个由$N$个级联T触发器（每个都在时钟下降沿翻转）构成，且级间带有反相器的二进制纹波计数器，当翻转信号逐级传播时，主时钟引起的变化将通过一个交替的触发器和反相器延迟序列进行传播。\n\n设$t_{pd,ff}$为T触发器从时钟到输出$Q$的传播延迟，$t_{pd,inv}$为反相器的传播延迟。对于第一级，输出$Q_{1}$在主时钟下降沿之后的\n$$\nt_{1}=t_{pd,ff}\n$$\n时刻改变。对于每个后续级$k+1$，其时钟输入端的触发下降沿在$Q_k$的相关跃变经过反相器延迟之后发生，然后第$(k+1)$个触发器再经过一个额外的$t_{pd,ff}$延迟才产生其输出。因此，每增加一级，该级输出的稳定时间就增加一个$t_{pd,inv}+t_{pd,ff}$的延迟。\n\n因此，在主时钟下降沿之后，第$N$级输出稳定所需的最坏情况下的时间（它限定了所有输出的稳定时间）是\n$$\nT_{\\text{settle}}(N)=t_{pd,ff}+\\sum_{k=2}^{N}\\left(t_{pd,inv}+t_{pd,ff}\\right)=N\\,t_{pd,ff}+(N-1)\\,t_{pd,inv}.\n$$\n为保证可靠运行，时钟周期$T_{\\text{clk}}$必须满足\n$$\nT_{\\text{clk}}\\geq T_{\\text{settle}}(N),\n$$\n所以，最大时钟频率为\n$$\nf_{\\max}=\\frac{1}{T_{\\text{settle}}(N)}=\\frac{1}{N\\,t_{pd,ff}+(N-1)\\,t_{pd,inv}}.\n$$\n\n当$N=4$，$t_{pd,ff}=25\\,\\text{ns}$，且$t_{pd,inv}=5\\,\\text{ns}$时，\n$$\nT_{\\text{settle}}(4)=4\\cdot 25\\,\\text{ns}+3\\cdot 5\\,\\text{ns}=100\\,\\text{ns}+15\\,\\text{ns}=115\\,\\text{ns}.\n$$\n因此，\n$$\nf_{\\max}=\\frac{1}{115\\times 10^{-9}\\,\\text{s}}=\\frac{10^{9}}{115}\\,\\text{Hz}=\\frac{1000}{115}\\,\\text{MHz}\\approx 8.695652\\ \\text{MHz}.\n$$\n四舍五入到三位有效数字并以兆赫兹表示，结果为$8.70$。", "answer": "$$\\boxed{8.70}$$", "id": "1955794"}]}
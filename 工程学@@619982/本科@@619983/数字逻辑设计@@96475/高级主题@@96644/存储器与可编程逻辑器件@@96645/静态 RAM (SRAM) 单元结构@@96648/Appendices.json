{"hands_on_practices": [{"introduction": "静态随机存取存储器（SRAM）单元的核心是其双稳态特性，这得益于其交叉耦合的反相器结构。为了真正理解这种稳定性，我们可以通过一个思想实验来探讨当其内部组件发生故障时会发生什么。这个练习将分析一个上拉晶体管永久失效的情况，帮助你从第一性原理（first principles）出发，判断该单元将稳定在哪个逻辑状态。[@problem_id:1963488]", "problem": "一个标准的六晶体管（6T）静态随机存取存储器（SRAM）单元由两个交叉耦合的互补金属氧化物半导体（CMOS）反相器和两个存取晶体管构成。设两个内部存储节点表示为 $Q$ 和 $\\bar{Q}$。驱动节点 $Q$ 的第一个反相器由一个 PMOS 上拉晶体管 $M_{P1}$ 和一个 NMOS 下拉晶体管 $M_{N1}$ 组成。该第一个反相器的输入端连接到节点 $\\bar{Q}$。驱动节点 $\\bar{Q}$ 的第二个反相器由一个 PMOS 上拉晶体管 $M_{P2}$ 和一个 NMOS 下拉晶体管 $M_{N2}$ 组成。该第二个反相器的输入端连接到节点 $Q$。PMOS 晶体管（$M_{P1}$、$M_{P2}$）在导通时将其各自的输出节点连接到电源电压 $V_{DD}$，而 NMOS 下拉晶体管（$M_{N1}$、$M_{N2}$）在导通时将其各自的输出节点连接到地（GND）。两个由字线（WL）控制的 NMOS 存取晶体管用于读/写操作，但在本场景中它们是不工作的（WL 保持在低电平）。\n\n考虑一种故障情况，即第一个反相器的上拉 PMOS 晶体管 $M_{P1}$ 永久性开路。这意味着无论其栅极电压如何，$M_{P1}$ 都永远不能导通电流。单元中的所有其他晶体管功能正常。当单元上电时，在没有任何外部写入操作的情况下，它最终会稳定在单个、稳定的逻辑状态。下列哪个陈述准确描述了该故障 SRAM 单元的最终状态？\n\nA. 单元将稳定地存储逻辑'0'（即 $Q$ 为低电平且 $\\bar{Q}$ 为高电平的状态）。\n\nB. 单元将稳定地存储逻辑'1'（即 $Q$ 为高电平且 $\\bar{Q}$ 为低电平的状态）。\n\nC. 单元的状态将是不确定的，因为节点 $Q$ 的电压将浮动到一个中间电平。\n\nD. 单元将变成一个环形振荡器，节点 $Q$ 和 $\\bar{Q}$ 的电压会持续振荡。\n\nE. 单元将同时存储逻辑'0'和'1'，从而在 $V_{DD}$ 和 GND 之间形成一条静态短路路径。", "solution": "设节点电压为 $V_{Q}$ 和 $V_{\\bar{Q}}$，电源电压为 $V_{DD}$，地电平为 $0$。由于字线为低电平，存取晶体管处于截止状态，因此没有到位线的导通路径。开路故障意味着 $M_{P1}$ 在所有偏置下提供的电流恒为零，即 $I_{P1} \\equiv 0$。导通条件如下：\n- 对于 NMOS，当 $V_{GS} \\ge V_{TN}$ 时导通。\n- 对于 PMOS，当 $V_{SG} \\ge |V_{TP}|$ 时导通。\n\n直流稳态要求节点电压恒定，因此电容电流为零，并且每个节点的电压必须由至少一条与晶体管状态一致的导通路径来维持；在存在漏电流的情况下，纯粹的浮空节点在稳态下无法维持在一个不可忽略的电压值上。\n\n考虑候选的稳态。\n\n情况1：$V_{Q} \\approx 0$，$V_{\\bar{Q}} \\approx V_{DD}$。那么对于反相器1：输入为 $V_{\\bar{Q}} \\approx V_{DD}$，因此 $V_{GS,N1} = V_{\\bar{Q}} - V_{Q} \\approx V_{DD} \\ge V_{TN}$，所以 $M_{N1}$ 导通，提供一条将 $Q$ 拉至 $0$ 的导通路径。由于 $M_{P1}$ 处于开路状态，因此没有上拉路径，但这并非必要，因为 $M_{N1}$ 主动将 $V_{Q}$ 强制维持在约 $0 \\text{ V}$。对于反相器2：输入为 $V_{Q} \\approx 0$，因此 $V_{GS,N2} \\approx 0 < V_{TN}$ 所以 $M_{N2}$ 截止，而 $V_{SG,P2} = V_{DD} - 0 = V_{DD} \\ge |V_{TP}|$ 所以 $M_{P2}$ 导通，将 $\\bar{Q}$ 上拉至 $V_{DD}$。在单个反相器中没有从 $V_{DD}$ 到地的路径，因为在反相器1中只有 NMOS 导通，而在反相器2中只有 PMOS 导通。这是一个自洽的、稳定的不动点。\n\n情况2：$V_{Q} \\approx V_{DD}$，$V_{\\bar{Q}} \\approx 0$。对于反相器2：当 $V_{Q} \\approx V_{DD}$ 时，$V_{GS,N2} \\approx V_{DD} \\ge V_{TN}$，所以 $M_{N2}$ 导通，$M_{P2}$ 截止，$\\bar{Q}$ 被拉至地，这与假设一致。对于反相器1：当 $V_{\\bar{Q}} \\approx 0$ 时，$V_{GS,N1} \\approx 0 < V_{TN}$ 所以 $M_{N1}$ 截止，而 $M_{P1}$ 处于开路状态，其电流 $I_{P1} \\equiv 0$。因此，节点 $Q$ 既没有直流上拉路径也没有直流下拉路径；它是浮空的。直流稳态要求 $dV_{Q}/dt = 0$ 且节点电压由导通路径维持，这在这里是不可能的。任何导致 $V_{Q}$ 下降到 $M_{N2}$ 阈值电压以下的漏电流都会使 $M_{N2}$ 截止，之后 $M_{P2}$ 导通并驱动 $V_{\\bar{Q}}$ 至 $V_{DD}$，这接着又使 $M_{N1}$ 导通并将 $V_{Q}$ 驱动至 $0$，最终收敛到情况1。因此，情况2不是一个稳定的吸引子。\n\n通过排除法，唯一的稳定状态是 $V_{Q} \\approx 0$，$V_{\\bar{Q}} \\approx V_{DD}$，即单元在 $Q$ 处存储逻辑 '0'，在 $\\bar{Q}$ 处存储逻辑 '1'。这排除了其他选项：状态不是不确定的（C），也不是振荡的（D），因为没有具有交替导通的有源环路增益来维持振荡，也不是静态短路（E），因为在稳定状态下，每个反相器只有一个器件导通，没有直接的 $V_{DD}$ 到 GND 的路径。\n\n因此，正确选项是 A。", "answer": "$$\\boxed{A}$$", "id": "1963488"}, {"introduction": "成功地存储数据只是SRAM工作的第一步；可靠地读出数据同样至关重要，并且面临着独特的挑战。在读操作期间，存储单元内部的晶体管和访问晶体管之间会形成一场“拔河”，这可能意外地翻转存储的数据。这个练习探讨了制造缺陷（即下拉晶体管的阈值电压$V_{th}$异常增高）如何直接影响这种读取稳定性，这是SRAM设计中的一个关键性能指标。[@problem_id:1963478]", "problem": "一个标准的六晶体管 (6T) 静态随机存取存储器 (SRAM) 单元是许多高速存储系统的基本构建单元。它由两个交叉耦合的 CMOS 反相器和两个 N沟道金属氧化物半导体 (NMOS) 存取晶体管组成。每个反相器由一个上拉 P沟道金属氧化物半导体 (PMOS) 晶体管和一个下拉 NMOS 晶体管构成。只要保持供电，该单元就会维持其状态（逻辑‘0’或‘1’）。\n\n考虑这样一种情况：制造过程中的一个缺陷导致反相器内的下拉 NMOS 晶体管的阈值电压 $V_{th}$ 显著高于其预期的设计值。PMOS 晶体管和 NMOS 存取晶体管保持不受影响。\n\n单元的“读稳定性”是指其在读操作期间保持其存储数据的能力。读操作包括将两条位线都预充电至高电源电压 $V_{DD}$，然后激活字线，从而开启存取晶体管。\n\n假设某个 SRAM 单元存储着逻辑‘0’（意味着其一个内部存储节点电压为 0 V），这种特定的制造缺陷对单元性能最直接和最显著的后果是什么？\n\nA. 单元的读稳定性显著提高。\n\nB. 单元在空闲（保持）状态下的静态功耗增加。\n\nC. 单元的保持稳定性（在未被访问时保持数据的能力）下降。\n\nD. 单元的读稳定性显著下降，使其在读取过程中更容易发生状态翻转。\n\nE. 向单元（当前存储‘0’）写入逻辑‘1’所需的时间增加。", "solution": "一个 6T SRAM 单元由两个交叉耦合的反相器和两个 NMOS 存取晶体管组成。考虑该单元在一个内部节点存储逻辑‘0’，将此节点在读取期间的电压表示为 $V_{x}$（初始值接近 $0$），而其互补节点的电压则接近 $V_{DD}$。在读取期间，两条位线都被预充电至 $V_{DD}$，并且字线被置为 $V_{DD}$，从而开启连接到 $V_{x}$ 节点的 NMOS 存取晶体管。这就产生了一个竞争：NMOS 存取晶体管试图将 $V_x$ 电压拉高至 $V_{DD}$，而连接到 $V_x$ 节点的反相器下拉 NMOS 管则试图将 $V_x$ 电压拉低至 0。\n\n设 NMOS 存取晶体管的参数为 $k_{ax}$ 且阈值电压为 $V_{th,ax}$，下拉 NMOS 晶体管的参数为 $k_{pd}$ 且阈值电压为 $V_{th,pd}$。当位线电压和字线电压均为 $V_{DD}$ 时，NMOS 存取晶体管工作在饱和区，其电流为\n$$\nI_{ax}(V_{x})=\\frac{1}{2}k_{ax}\\left(V_{DD}-V_{x}-V_{th,ax}\\right)^{2}.\n$$\n下拉 NMOS 晶体管（栅极为 $V_{DD}$，源极为地，漏极为 $V_{x}$）在典型的读干扰电压下工作在线性区，其电流为\n$$\nI_{pd}(V_{x},V_{th,pd})=k_{pd}\\left[\\left(V_{DD}-V_{th,pd}\\right)V_{x}-\\frac{V_{x}^{2}}{2}\\right].\n$$\n在读取存储的‘0’时，受干扰节点 $V_{x}$ 的电压由电流平衡决定\n$$\nI_{ax}(V_{x})=I_{pd}(V_{x},V_{th,pd}).\n$$\n定义 $F(V_{x},V_{th,pd}) \\equiv I_{ax}(V_{x})-I_{pd}(V_{x},V_{th,pd})=0$。为确定当 $V_{th,pd}$ 增加时 $V_{x}$ 如何变化，进行隐函数微分：\n$$\n\\frac{\\partial F}{\\partial V_{x}}\\,dV_{x}+\\frac{\\partial F}{\\partial V_{th,pd}}\\,dV_{th,pd}=0\n\\quad\\Rightarrow\\quad\n\\frac{dV_{x}}{dV_{th,pd}}=-\\frac{\\frac{\\partial F}{\\partial V_{th,pd}}}{\\frac{\\partial F}{\\partial V_{x}}}.\n$$\n计算偏导数：\n$$\n\\frac{\\partial F}{\\partial V_{th,pd}}=-\\frac{\\partial I_{pd}}{\\partial V_{th,pd}}=k_{pd}V_{x}>0,\n$$\n$$\n\\frac{\\partial I_{ax}}{\\partial V_{x}}=-k_{ax}\\left(V_{DD}-V_{x}-V_{th,ax}\\right),\\quad\n\\frac{\\partial I_{pd}}{\\partial V_{x}}=k_{pd}\\left(V_{DD}-V_{th,pd}-V_{x}\\right),\n$$\n因此\n$$\n\\frac{\\partial F}{\\partial V_{x}}=\\frac{\\partial I_{ax}}{\\partial V_{x}}-\\frac{\\partial I_{pd}}{\\partial V_{x}}\n=-k_{ax}\\left(V_{DD}-V_{x}-V_{th,ax}\\right)-k_{pd}\\left(V_{DD}-V_{th,pd}-V_{x}\\right)<0.\n$$\n因此，\n$$\n\\frac{dV_{x}}{dV_{th,pd}}=-\\frac{k_{pd}V_{x}}{\\frac{\\partial F}{\\partial V_{x}}}>0.\n$$\n$V_{th,pd}$ 的增加必然导致在读取存储的‘0’时，受干扰节点的电压 $V_{x}$ 增加。如果 $V_{x}$ 超过对侧反相器的开关阈值，单元就会发生状态翻转。因此，提高 $V_{th,pd}$ 会削弱下拉器件，降低有效单元比 $\\frac{\\beta_{pd}}{\\beta_{ax}}$，增加读干扰下的 $V_{x}$，并使单元更易于发生读扰动。这就是当 6T SRAM 中的下拉晶体管被削弱时，读稳定性发生的典型退化现象。\n\n其他选项与这些机制不符：保持状态下的静态功耗不会增加（因为存取晶体管处于关闭状态，且更高的 $V_{th,pd}$ 会减小漏电流），保持稳定性并非此缺陷造成的主要问题，并且由于下拉器件变弱，向存储‘0’的节点写入‘1’实际上会变得更容易，而不是更慢。\n\n因此，最直接和最显著的后果是读稳定性下降。", "answer": "$$\\boxed{D}$$", "id": "1963478"}, {"introduction": "SRAM的可靠运行依赖于精确的时序和操作顺序，其中预充电步骤至关重要。如果这个初始步骤失败会发生什么？本练习将模拟一个常见但严重的故障模式：预充电电路完全失效，导致位线在读操作开始前处于接地电位。通过分析这种场景，你将深入理解为何预充电是不可或缺的，以及“破坏性读出”（destructive read）是如何发生的。[@problem_id:1963469]", "problem": "考虑一个用于数字系统中的标准6晶体管（6T）静态随机存取存储器（SRAM）单元。该单元由两个交叉耦合的CMOS反相器（构成一个用于存储单个比特的锁存器）和两个NMOS访问晶体管组成。访问晶体管分别将标记为 $Q$ 和 $\\overline{Q}$ 的内部存储节点连接到位线（BL）和互补位线（$\\overline{\\text{BL}}$）。一条字线（WL）控制着两个访问晶体管的栅极。\n\n在正常的读操作中，预充电电路首先将BL和$\\overline{\\text{BL}}$两条位线主动驱动至高电源电压 $V_{DD}$。然后，字线WL被置为有效（驱动为高电平），读出放大器检测到由于其中一条位线通过单元的下拉网络被拉向地而产生的微小电压差。\n\n现在，设想一个特定的故障情况，即预充电电路完全失效。因此，在读取周期开始之前，BL和$\\overline{\\text{BL}}$都处于高阻（浮空）状态，其电压已衰减至地电位（$0 \\text{ V}$）。然后，通过置位字线WL来尝试进行读操作。\n\n下列哪个陈述最准确地描述了在这种故障条件下尝试进行读操作的后果？\n\nA. 单元中存储的值总是会翻转到其相反状态，但读操作会在翻转发生前正确地得到原始值。\n\nB. 读操作将总是失败，产生不正确或随机的值，因为位线将保持在地电位，无法为读出放大器产生电压差。\n\nC. 读操作也许能产生正确的值，但极有可能损坏单元中存储的数据（破坏性读取），并且该过程将显著慢于正常的读操作。\n\nD. 读操作将不受影响并正常进行，因为一旦数据被锁存，单元的内部存储节点就与位线电气隔离了。\n\nE. 两条位线都将通过单元内部的上拉晶体管被充电至 $V_{DD}$，从而导致一次非破坏性的、仅有轻微延迟的正常读操作。", "solution": "6T SRAM的读取依赖于先将两条位线预充电至 $V_{DD}$，然后让单元通过其下拉路径将其中一侧轻微放电，以便读出放大器能检测到一个微小的差分电压。在预充电失效的情况下，BL和$\\overline{\\text{BL}}$都浮空在$0$V，读取开始时两条线都处于$0$V。\n\n考虑存储数据的两种情况。设通过访问NMOS连接到位线的存储节点上的内部节点电容为 $C_{\\text{cell}}$，位线电容为 $C_{\\text{BL}}$，且 $C_{\\text{BL}} \\gg C_{\\text{cell}}$。设反相器的翻转点电压为 $V_{\\text{trip}}$。\n\n情况1：$Q = V_{DD}$ 且 $\\overline{Q} = 0$。当WL置位时，访问NMOS将 $Q$ 连接到最初为 $0$V的BL上。根据电荷守恒（在初始瞬间，忽略反相器的PMOS上拉电路提供的电流），\n$$\nQ_{\\text{total, initial}} = C_{\\text{cell}} V_{DD} + C_{\\text{BL}} \\cdot 0,\n$$\n在电荷共享达到一个共同电压 $V_{\\text{share}}$ 后，\n$$\nQ_{\\text{total, final}} = \\left(C_{\\text{cell}} + C_{\\text{BL}}\\right) V_{\\text{share}}.\n$$\n令初始电荷和最终电荷相等，可得\n$$\n\\left(C_{\\text{cell}} + C_{\\text{BL}}\\right) V_{\\text{share}} = C_{\\text{cell}} V_{DD} \\;\\;\\Rightarrow\\;\\; V_{\\text{share}} = \\frac{C_{\\text{cell}}}{C_{\\text{cell}} + C_{\\text{BL}}} V_{DD}.\n$$\n由于 $C_{\\text{BL}} \\gg C_{\\text{cell}}$，我们得到 $V_{\\text{share}} \\ll V_{DD}$。如果 $V_{\\text{share}} < V_{\\text{trip}}$，交叉耦合的反相器对将会翻转，使单元状态变为 $Q = 0$，即发生破坏性读取。非破坏性读取的条件要求\n$$\n\\frac{C_{\\text{cell}}}{C_{\\text{cell}} + C_{\\text{BL}}} V_{DD} > V_{\\text{trip}} \\;\\;\\Rightarrow\\;\\; \\frac{C_{\\text{cell}}}{C_{\\text{BL}}} > \\frac{V_{\\text{trip}}}{V_{DD} - V_{\\text{trip}}},\n$$\n这个条件通常不被满足，因为 $C_{\\text{BL}}$ 在设计上远大于 $C_{\\text{cell}}$。即使锁存器不立即翻转，节点 $Q$ 的电压也会被大幅拉低，而PMOS上拉管必须通过访问晶体管的串联电阻来为合并电容 $\\left(C_{\\text{cell}} + C_{\\text{BL}}\\right)$ 充电，这是一条微弱且缓慢的路径。因此，BL只能从 $0$V 缓慢地被向上驱动，产生差分电压的速度远慢于正常读取。\n\n情况2：$Q = 0$ 且 $\\overline{Q} = V_{DD}$。根据对称性，现在 $\\overline{Q}$ 连接到 $\\overline{\\text{BL}} = 0$V 上，并经历相同的电荷共享计算，得到\n$$\nV_{\\text{share}} = \\frac{C_{\\text{cell}}}{C_{\\text{cell}} + C_{\\text{BL}}} V_{DD} \\ll V_{DD},\n$$\n因此，高电平节点 $\\overline{Q}$ 被拉低；如果其电压降至 $V_{\\text{trip}}$ 以下，单元将翻转为 $Q = 1$，同样存在破坏性读取的风险。存储 $0$ 的一侧保持在接近 $0$V，无法对预充电的位线起到有效的放电作用；相反，单元必须提供电流将另一条位线从 $0$V 拉高，这个过程很慢。\n\n读出放大器的行为和时序：由于两条位线都从 $0$V 开始，单元必须通过一个微弱的PMOS加上访问晶体管的路径，主动将一条线上拉，而另一侧则保持在接近 $0$V。这只会在显著延迟后才能产生差分电压，并且初始的电荷共享事件会危险地干扰原先处于 $V_{DD}$ 的存储节点。根据器件尺寸比和时序（例如，读出放大器何时使能以及WL置位多长时间），读取操作有时可能得到正确的值，但有很高的可能性会破坏单元内容（破坏性读取），并且任何可用差分电压的建立都比正常的预充电读取慢得多。\n\n因此，最准确的陈述是，读操作也许能产生正确的值，但极有可能损坏存储的数据，并且将显著慢于正常的读操作。", "answer": "$$\\boxed{C}$$", "id": "1963469"}]}
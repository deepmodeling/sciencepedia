{"hands_on_practices": [{"introduction": "理解跟踪误差的动态特性是设计任何模型参考控制系统的基石。第一个练习将指导你完成推导误差方程的基本过程，该方程明确地展示了被控对象、参考模型和控制器参数之间的失配如何影响系统性能。掌握这一步骤对于诊断和分析控制系统至关重要。[@problem_id:1591821]", "problem": "考虑一个简单的一阶动态系统，通常称为“被控对象”(plant)，其行为由以下微分方程描述：\n$$ \\dot{y}_p(t) = -a_p y_p(t) + b_p u(t) $$\n其中，$y_p(t)$ 是被控对象的输出，$u(t)$ 是控制输入，$a_p$ 和 $b_p$ 是表示被控对象特性的正常数参数。\n\n目标是使被控对象的输出 $y_p(t)$ 跟踪一个稳定的“参考模型”的输出 $y_m(t)$，该模型定义为：\n$$ \\dot{y}_m(t) = -a_m y_m(t) + b_m r(t) $$\n在此方程中，$y_m(t)$ 是期望的模型输出，$r(t)$ 是一个有界参考信号，$a_m$ 和 $b_m$ 是已知的正常数。\n\n为实现此目标，一个线性反馈控制器被实施，其控制输入 $u(t)$ 由下式给出：\n$$ u(t) = \\theta_1 y_p(t) + \\theta_2 r(t) $$\n参数 $\\theta_1$ 和 $\\theta_2$ 是恒定的控制器增益。\n\n跟踪误差 $e(t)$ 定义为被控对象输出与参考模型输出之差：\n$$ e(t) = y_p(t) - y_m(t) $$\n\n该跟踪误差的动态可以表示为 $\\dot{e}(t) = F$ 形式的一阶常微分方程。您的任务是求出 $F$ 的表达式。请用跟踪误差 $e(t)$、参考模型输出 $y_m(t)$、参考信号 $r(t)$ 以及常数参数 ($a_p, b_p, a_m, b_m, \\theta_1, \\theta_2$) 来表示您的答案。为简化起见，您可以在最终表达式中省略显式的时间依赖性 $(t)$。", "solution": "我们从被控对象、模型、控制律和跟踪误差的定义开始：\n- 被控对象：$\\dot{y}_{p}=-a_{p}y_{p}+b_{p}u$。\n- 模型：$\\dot{y}_{m}=-a_{m}y_{m}+b_{m}r$。\n- 控制：$u=\\theta_{1}y_{p}+\\theta_{2}r$。\n- 误差：$e=y_{p}-y_{m}$。\n\n对误差求导以获得其动态：\n$$\n\\dot{e}=\\dot{y}_{p}-\\dot{y}_{m}.\n$$\n代入被控对象和模型的动态方程：\n$$\n\\dot{e}=\\left(-a_{p}y_{p}+b_{p}u\\right)-\\left(-a_{m}y_{m}+b_{m}r\\right).\n$$\n代入控制输入 $u=\\theta_{1}y_{p}+\\theta_{2}r$：\n$$\n\\dot{e}=-a_{p}y_{p}+b_{p}\\left(\\theta_{1}y_{p}+\\theta_{2}r\\right)+a_{m}y_{m}-b_{m}r.\n$$\n整理各项：\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)y_{p}+a_{m}y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\n使用 $y_{p}=e+y_{m}$ 将 $y_{p}$ 用 $e$ 和 $y_{m}$ 表示：\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)\\left(e+y_{m}\\right)+a_{m}y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\n展开并合并同类项：\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(-a_{p}+b_{p}\\theta_{1}+a_{m}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\n因此，误差动态 $\\dot{e}=F$ 有\n$$\nF=\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(a_{m}-a_{p}+b_{p}\\theta_{1}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$", "answer": "$$\\boxed{\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(a_{m}-a_{p}+b_{p}\\theta_{1}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r}$$", "id": "1591821"}, {"introduction": "在建立了误差动态方程之后，下一步是让控制器变得*自适应*。本实践介绍了经典的 MIT 规则，这是一种基于梯度的方法，用于实时自动调整控制器参数。通过解决这个问题，你将推导出一个自适应律，并深入了解使系统能够学习和补偿未知参数的核心机制。[@problem_id:1591815]", "problem": "考虑一个用于控制小型四轴无人机垂直速度 $v(t)$ 的简化模型。该无人机的垂直动力学由以下一阶线性微分方程描述：\n$$ \\frac{dv(t)}{dt} = b u(t) $$\n其中 $u(t)$ 是由机载计算机生成的控制输入，$b$ 是“控制效能”参数。参数 $b$ 是正的，但其确切值未知，并可能因电池放电或大气密度变化等因素而变化。\n\n为确保性能一致，采用了一个模型参考自适应控制器 (MRAC)。无人机的期望行为由一个稳定的参考模型指定，其传递函数描述为：\n$$ G_m(s) = \\frac{V_m(s)}{V_c(s)} = \\frac{b_m}{s+a_m} $$\n在这里，$v_m(t)$ 是期望的模型输出速度，$v_c(t)$ 是参考指令速度，$a_m > 0$ 和 $b_m > 0$ 是已知的固定设计参数。\n\n自适应控制律的构造旨在实现完美模型跟踪，其形式如下：\n$$ u(t) = \\frac{1}{\\hat{b}(t)} \\left( b_m v_c(t) - a_m v(t) \\right) $$\n其中 $\\hat{b}(t)$ 是未知参数 $b$ 的在线估计值。\n\n为了更新此估计值，控制器使用麻省理工学院 (MIT) 法则，其目标是最小化代价函数 $J(\\hat{b}) = \\frac{1}{2} e(t)^2$，其中 $e(t) = v(t) - v_m(t)$ 是跟踪误差。MIT法则的一般形式是 $\\frac{d\\hat{b}}{dt} = -\\gamma \\frac{\\partial J}{\\partial \\hat{b}}$，其中 $\\gamma > 0$ 是一个常数自适应增益。\n\n由此产生的更新律可以写成 $\\frac{d\\hat{b}}{dt} = \\gamma e(t)\\phi(t)$ 的形式，其中 $\\phi(t)$ 是通过一个线性时不变滤波器 $W(s)$ 滤波控制输入 $u(t)$ 而生成的信号。也就是说，当输入为 $u(t)$ 时，$\\phi(t)$ 是滤波器 $W(s)$ 的输出。\n\n确定这个灵敏度滤波器 $W(s)$ 的传递函数。用给定的参数表达你的答案。", "solution": "令 $\\theta \\triangleq \\hat{b}$。被控对象和控制律为\n$$\\dot{v}(t) = b\\,u(t), \\qquad u(t) = \\frac{1}{\\theta}\\left(b_{m}v_{c}(t) - a_{m}v(t)\\right).$$\n因此，用 $\\theta$ 表示的闭环动力学为\n$$\\dot{v}(t) = \\frac{b}{\\theta}\\,b_{m}v_{c}(t) - \\frac{b}{\\theta}\\,a_{m}v(t).$$\n定义灵敏度 $S(t) \\triangleq \\frac{\\partial v(t)}{\\partial \\theta}$。对闭环方程关于 $\\theta$ 求导（其中 $b$ 和 $v_{c}$ 与 $\\theta$ 无关）可得\n$$\\dot{S}(t) = -\\frac{b\\,b_{m}}{\\theta^{2}}\\,v_{c}(t) + \\frac{b\\,a_{m}}{\\theta^{2}}\\,v(t) - \\frac{b\\,a_{m}}{\\theta}\\,S(t).$$\n使用来自 $u(t)$ 的控制恒等式，\n$$b_{m}v_{c}(t) - a_{m}v(t) = \\theta\\,u(t) \\quad \\Longrightarrow \\quad a_{m}v(t) - b_{m}v_{c}(t) = -\\theta\\,u(t),$$\n灵敏度动力学变为\n$$\\dot{S}(t) + \\frac{b\\,a_{m}}{\\theta}\\,S(t) = -\\frac{b}{\\theta}\\,u(t).$$\n进行拉普拉斯变换（初始灵敏度为零）可得\n$$S(s) = -\\frac{\\frac{b}{\\theta}}{s + \\frac{b\\,a_{m}}{\\theta}}\\,U(s).$$\n根据 MIT 法则 $ \\dot{\\theta} = -\\gamma\\,\\frac{\\partial J}{\\partial \\theta} = -\\gamma\\,e\\,\\frac{\\partial e}{\\partial \\theta} $ 和 $e = v - v_{m}$，我们有 $\\frac{\\partial e}{\\partial \\theta} = S$。将更新律写为 $\\dot{\\theta} = \\gamma\\,e\\,\\phi$ 意味着 $\\phi = -S$，因此从 $u$ 到 $\\phi$ 的滤波器是\n$$\\frac{\\Phi(s)}{U(s)} = \\frac{\\frac{b}{\\theta}}{s + \\frac{b\\,a_{m}}{\\theta}}.$$\n在理想参数 $\\theta = b$（完美模型跟踪点）的标准 MRAC 匹配条件下，上式简化为\n$$\\frac{\\Phi(s)}{U(s)} = \\frac{1}{s + a_{m}}.$$\n因此，灵敏度滤波器的传递函数是\n$$W(s) = \\frac{1}{s + a_{m}}.$$\n如此所需，这仅取决于已知的设计参数 $a_{m}$。", "answer": "$$\\boxed{\\frac{1}{s+a_{m}}}$$", "id": "1591815"}, {"introduction": "现实世界的系统很少是完美的，并且经常受到未测量的扰动影响。最后一个练习将挑战你在一个更真实的情景下分析 MRAC 系统的行为，该情景涉及一个恒定的外部扰动。通过研究稳态跟踪误差，你将学会评估自适应控制器的鲁棒性，并理解基本 MRAC 设计的局限性。[@problem_id:1591819]", "problem": "一个位置控制伺服系统的简化模型由以下二阶微分方程描述：\n$$\n\\ddot{y}_p(t) = b_p u(t) + d\n$$\n其中 $y_p(t)$ 是输出轴的角位置，$u(t)$ 是控制信号（与转矩成正比），$b_p$ 是一个代表控制效能的未知正常数，$d$ 是一个未知的恒定外部扰动转矩。\n\n目标是使受控对象的位置 $y_p(t)$ 跟踪一个稳定参考模型的输出 $y_m(t)$。该参考模型由下式指定：\n$$\n\\ddot{y}_m(t) + a_{m1} \\dot{y}_m(t) + a_{m0} y_m(t) = b_{m0} r(t)\n$$\n此处，$r(t)$ 是有界的参考指令信号，$a_{m1}$、$a_{m0}$ 和 $b_{m0}$ 是已知的正常数，它们定义了期望的稳定响应。\n\n采用模型参考自适应控制 (MRAC) 策略。其控制律具有以下结构：\n$$\nu(t) = \\hat{\\theta}_1(t) r(t) + \\hat{\\theta}_2(t) y_p(t) + \\hat{\\theta}_3(t) \\dot{y}_p(t)\n$$\n参数 $\\hat{\\theta}_1(t)$、$\\hat{\\theta}_2(t)$ 和 $\\hat{\\theta}_3(t)$ 由一个自适应机制进行调整。该机制的设计目的是，在扰动 $d=0$ 的理想情况下，参数 $\\hat{\\theta}_i(t)$ 将收敛到实现完美模型匹配的唯一常数值 $\\theta_i^*$。\n\n对于本问题，请在存在非零恒定扰动 $d$ 的情况下分析该系统。您必须做出一个关键假设：即使存在此扰动，自适应参数也已经稳定在它们在无扰动情况下会达到的相同理想常数值 $\\theta_i^*$。假设参考指令保持在恒定值 $r(t) = r_0$ 足够长的时间，以使系统达到稳态。\n\n在这些条件下，确定最终的稳态跟踪误差，定义为 $e_{ss} = \\lim_{t\\to\\infty} [y_p(t) - y_m(t)]$。请将您的最终答案表示为一个闭式解析表达式，用系统和模型参数（可能包括 $d$、$b_p$、$a_{m1}$、$a_{m0}$ 和 $b_{m0}$）来表示。", "solution": "受控对象为 $\\ddot{y}_{p}(t)=b_{p}u(t)+d$，控制为 $u(t)=\\hat{\\theta}_{1}(t)r(t)+\\hat{\\theta}_{2}(t)y_{p}(t)+\\hat{\\theta}_{3}(t)\\dot{y}_{p}(t)$。在无扰动情况 $d=0$ 下，与参考模型\n$$\n\\ddot{y}_{m}(t)+a_{m1}\\dot{y}_{m}(t)+a_{m0}y_{m}(t)=b_{m0}r(t)\n$$\n的完美模型匹配在参数稳定到满足（对所有信号）以下条件的常数 $\\theta_{i}^{*}$ 时实现：\n$$\n\\ddot{y}_{p}=b_{p}\\left(\\theta_{1}^{*}r+\\theta_{2}^{*}y_{p}+\\theta_{3}^{*}\\dot{y}_{p}\\right)=-a_{m1}\\dot{y}_{p}-a_{m0}y_{p}+b_{m0}r.\n$$\n通过系数匹配，可得理想匹配条件\n$$\nb_{p}\\theta_{1}^{*}=b_{m0},\\quad b_{p}\\theta_{2}^{*}=-a_{m0},\\quad b_{p}\\theta_{3}^{*}=-a_{m1}.\n$$\n根据所述假设，即使 $d\\neq 0$，参数也保持在这些理想值，闭环受控对象动态变为\n$$\n\\ddot{y}_{p}+a_{m1}\\dot{y}_{p}+a_{m0}y_{p}=b_{m0}r+d.\n$$\n定义跟踪误差 $e(t)=y_{p}(t)-y_{m}(t)$。从闭环对象方程中减去参考模型方程，可得误差动态\n$$\n\\ddot{e}+a_{m1}\\dot{e}+a_{m0}e=d.\n$$\n当 $r(t)=r_{0}$ 为常数且 $a_{m1}>0, a_{m0}>0$ 时，误差系统是渐近稳定的，并收敛到满足 $\\dot{e}=0$ 和 $\\ddot{e}=0$ 的平衡点 $e_{ss}$。代入误差方程可得\n$$\na_{m0}e_{ss}=d\\quad\\Rightarrow\\quad e_{ss}=\\frac{d}{a_{m0}}.\n$$\n等价地，直接评估稳态：$y_{m,ss}=(b_{m0}/a_{m0})r_{0}$ 和 $y_{p,ss}=(b_{m0}r_{0}+d)/a_{m0}$，因此 $e_{ss}=y_{p,ss}-y_{m,ss}=d/a_{m0}$。", "answer": "$$\\boxed{\\frac{d}{a_{m0}}}$$", "id": "1591819"}]}
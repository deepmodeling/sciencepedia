{"hands_on_practices": [{"introduction": "超前补偿器的核心功能是提供相位裕度，以改善系统的瞬态响应。这个练习 [@problem_id:1588406] 旨在训练一项基本技能：计算补偿器提供最大相位超前的频率。通过这个练习，你将理解补偿器的零点和极点位置如何共同决定其在频域中的关键特性，这是设计和分析这类控制器的第一步。", "problem": "一位音频工程师正在设计一个模拟电路，用作录音室调音台的“临场感增强”滤波器。其目标是为音频信号引入相移，以增强特定频段的清晰度。该滤波器是一种超前补偿器，其传递函数在拉普拉斯域中由以下表达式建模：\n$$ G_c(s) = K \\frac{s + z_0}{s + p_0} $$\n此处，$s$ 是复频率。该电路设计有一个由频率参数 $z_0 = 3 \\text{ rad/s}$ 决定的零点和一个由频率参数 $p_0 = 30 \\text{ rad/s}$ 决定的极点。增益 $K$ 是一个正常数。该滤波器引入了与频率相关的相位超前。确定该滤波器提供最大可能相位超前时的精确角频率。请用单位为 rad/s 的封闭形式解析表达式来表示你的答案。", "solution": "超前补偿器的传递函数由下式给出：\n$$ G_c(s) = K \\frac{s + z_0}{s + p_0} $$\n为了求得相位响应，我们通过代入 $s = j\\omega$ 来计算传递函数在虚轴上的值，其中 $\\omega$ 是角频率，单位为 rad/s。\n$$ G_c(j\\omega) = K \\frac{j\\omega + z_0}{j\\omega + p_0} $$\n该复函数的相角 $\\phi(\\omega)$ 是 $G_c(j\\omega)$ 的辐角。由于 $K$ 是一个正常数，其辐角为零，对相位没有贡献。\n$$ \\phi(\\omega) = \\arg\\left(G_c(j\\omega)\\right) = \\arg\\left(j\\omega + z_0\\right) - \\arg\\left(j\\omega + p_0\\right) $$\n形式为 $x+jy$ 的复数的辐角由 $\\arctan(y/x)$ 给出。在我们的例子中，对于项 $(j\\omega + z_0)$，我们可以将其写为 $(z_0 + j\\omega)$，因此 $x=z_0$ 且 $y=\\omega$。极点项同理。\n$$ \\phi(\\omega) = \\arctan\\left(\\frac{\\omega}{z_0}\\right) - \\arctan\\left(\\frac{\\omega}{p_0}\\right) $$\n为了找到相位超前最大时的角频率 $\\omega_m$，我们需要通过对 $\\phi(\\omega)$ 关于 $\\omega$ 求导并令其为零来找到 $\\phi(\\omega)$ 的极值。\n$$ \\frac{d\\phi}{d\\omega} = \\frac{d}{d\\omega}\\left[ \\arctan\\left(\\frac{\\omega}{z_0}\\right) - \\arctan\\left(\\frac{\\omega}{p_0}\\right) \\right] $$\n使用链式法则求导，并回顾 $\\frac{d}{dx}\\arctan(u) = \\frac{1}{1+u^2}\\frac{du}{dx}$，我们得到：\n$$ \\frac{d\\phi}{d\\omega} = \\frac{1}{1 + \\left(\\frac{\\omega}{z_0}\\right)^2} \\cdot \\frac{1}{z_0} - \\frac{1}{1 + \\left(\\frac{\\omega}{p_0}\\right)^2} \\cdot \\frac{1}{p_0} $$\n简化表达式：\n$$ \\frac{d\\phi}{d\\omega} = \\frac{z_0^2}{z_0^2 + \\omega^2} \\cdot \\frac{1}{z_0} - \\frac{p_0^2}{p_0^2 + \\omega^2} \\cdot \\frac{1}{p_0} = \\frac{z_0}{z_0^2 + \\omega^2} - \\frac{p_0}{p_0^2 + \\omega^2} $$\n现在，我们将导数设为零，以求得最大相角对应的频率 $\\omega_m$：\n$$ \\frac{z_0}{z_0^2 + \\omega_m^2} - \\frac{p_0}{p_0^2 + \\omega_m^2} = 0 $$\n$$ \\frac{z_0}{z_0^2 + \\omega_m^2} = \\frac{p_0}{p_0^2 + \\omega_m^2} $$\n交叉相乘得到：\n$$ z_0(p_0^2 + \\omega_m^2) = p_0(z_0^2 + \\omega_m^2) $$\n$$ z_0 p_0^2 + z_0 \\omega_m^2 = p_0 z_0^2 + p_0 \\omega_m^2 $$\n重新整理各项以求解 $\\omega_m^2$：\n$$ z_0 \\omega_m^2 - p_0 \\omega_m^2 = p_0 z_0^2 - z_0 p_0^2 $$\n$$ \\omega_m^2 (z_0 - p_0) = z_0 p_0 (z_0 - p_0) $$\n由于这是一个超前补偿器，极点频率高于零点频率，即 $p_0 > z_0$，因此 $z_0 - p_0 \\neq 0$。我们可以安全地将两边同除以 $(z_0 - p_0)$：\n$$ \\omega_m^2 = z_0 p_0 $$\n取平方根（并只考虑正频率）：\n$$ \\omega_m = \\sqrt{z_0 p_0} $$\n这个结果表明，最大相位超前时的频率是极点频率和零点频率的几何平均值。\n现在，我们代入给定值 $z_0 = 3 \\text{ rad/s}$ 和 $p_0 = 30 \\text{ rad/s}$：\n$$ \\omega_m = \\sqrt{3 \\times 30} = \\sqrt{90} $$\n为了简化根式，我们可以将 $90$ 写成 $9 \\times 10$：\n$$ \\omega_m = \\sqrt{9 \\times 10} = \\sqrt{9} \\sqrt{10} = 3\\sqrt{10} $$\n该滤波器提供最大相位超前时的角频率是 $3\\sqrt{10}$ rad/s。", "answer": "$$\\boxed{3\\sqrt{10}}$$", "id": "1588406"}, {"introduction": "掌握了基础知识后，我们来探讨一种常见但有潜在风险的设计技巧：极点-零点对消。这个练习 [@problem_id:1588383] 构建了一个假设场景，其中设计参数与实际系统之间微小的偏差导致了系统性能的显著下降。解决这个问题可以让你深刻体会到鲁棒性设计的重要性，并警惕理想化系统模型背后隐藏的风险。", "problem": "一位控制工程师正在为一个制造过程设计反馈系统。该过程可由受控对象传递函数 $G_p(s) = \\frac{120}{(s+p_1)(s+p_2)}$ 建模，其中标称极点位置为 $p_1 = 2$ rad/s 和 $p_2 = 10$ rad/s。\n\n为实现快速响应，将一个超前补偿器 $G_c(s)$ 置于单位反馈配置中。设计策略是利用补偿器的零点来对消位于 $s = -p_1$ 的慢速受控对象极点。补偿器选择为：\n$$G_c(s) = K_c \\frac{s+z_c}{s+p_c}$$\n其零点为 $z_c = 2$ rad/s，极点为 $p_c = 20$ rad/s，增益为 $K_c = \\frac{25}{12}$。\n\n实施后，实验测量表明，由于环境因素，慢速受控对象极点的位置发生了漂移。实际的慢极点位于 $s = -2.1$ rad/s，而位于 $s = -10$ rad/s 的快极点以及受控对象的直流增益保持不变。补偿器的参数是固定的。\n\n这种极零点对消中的微小失配，在闭环系统的动态特性中引入了一个慢速实极点，这显著影响了系统的瞬态响应。请确定这个新的慢速闭环极点的位置。\n\n以 rad/s 为单位表示你的答案，并四舍五入到四位有效数字。", "solution": "标称受控对象为 $G_{p,\\text{nom}}(s) = \\dfrac{120}{(s+2)(s+10)}$，其直流增益为 $G_{p,\\text{nom}}(0) = \\dfrac{120}{2 \\cdot 10} = 6$。漂移后，实际极点位于 $s=-2.1$ 和 $s=-10$，直流增益保持为 $6$，因此实际受控对象必定是\n$$\nG_{p}(s) = \\frac{K_{p}}{(s+2.1)(s+10)}, \\quad \\text{其中} \\quad \\frac{K_{p}}{2.1 \\cdot 10} = 6 \\;\\Rightarrow\\; K_{p} = 126.\n$$\n固定的补偿器为 $G_{c}(s) = K_{c} \\dfrac{s+2}{s+20}$，其中 $K_{c} = \\dfrac{25}{12}$。开环传递函数为\n$$\nL(s) = G_{c}(s) G_{p}(s) = \\frac{K_{c} \\cdot 126 \\,(s+2)}{(s+20)(s+2.1)(s+10)}.\n$$\n在单位反馈下，闭环特征方程为\n$$\n1 + L(s) = 0 \\;\\;\\Longleftrightarrow\\;\\; (s+20)(s+2.1)(s+10) + K_{c}\\cdot 126\\,(s+2) = 0.\n$$\n计算乘积并合并同类项：\n$$\n(s+20)(s+2.1)(s+10) = (s+2.1)(s+10)s + 20(s+2.1)(s+10) = s^{3} + 32.1 s^{2} + 263 s + 420,\n$$\n并且\n$$\nK_{c}\\cdot 126 = \\frac{25}{12}\\cdot 126 = \\frac{525}{2}.\n$$\n因此，特征多项式为\n$$\ns^{3} + 32.1 s^{2} + 263 s + 420 + \\frac{525}{2}(s+2) \\;=\\; s^{3} + 32.1 s^{2} + 525.5 s + 945 \\;=\\; 0.\n$$\n我们现在求解在近似对消对 $s \\approx -2$ 附近的实根。定义\n$$\np(s) = s^{3} + 32.1 s^{2} + 525.5 s + 945.\n$$\n区间法：$p(-2.03) \\approx 2.1504 > 0$，$p(-2.036) \\approx -0.2938 < 0$，所以根位于 $(-2.036,-2.03)$ 区间内。通过线性插值法精化得到 $s \\approx -2.03528$。使用牛顿法，在 $s=-2.035279$ 处利用\n$$\np'(s) = 3s^{2} + 64.2 s + 525.5\n$$\n进行精化，得出 $p(s) \\approx -1.985\\times 10^{-4}$ 且 $p'(s) \\approx 4.07262\\times 10^{2}$，得到修正后的根 $s \\approx -2.0352785$。四舍五入到四位有效数字，得到 $-2.035$ rad/s。\n\n因此，新的慢速闭环极点大约位于 $-2.035$ rad/s。", "answer": "$$\\boxed{-2.035}$$", "id": "1588383"}, {"introduction": "现代控制系统通常在数字硬件上实现，这引入了连续时间理论中不存在的限制。这个思想实验 [@problem_id:1588354] 突显了有限字长精度对数字补偿器性能的致命影响。你将看到，量化误差如何导致一个精心设计的补偿器完全失效，这揭示了理论设计与实际数字实现之间的巨大鸿沟。", "problem": "一位控制系统工程师正在为离散时间反馈系统设计一个数字滞后补偿器。该补偿器旨在改善系统的稳态误差。该补偿器的传递函数由下式给出：\n$$D(z) = K_c \\frac{z - z_c}{z - p_c}$$\n\n理想补偿器的设计指标如下：\n1.  高频增益，即 $D(z)$ 在 $z \\to \\infty$ 时的极限，必须为 1。\n2.  补偿器的零点设置在 $z_c = 0.99965$，以确保相位滞后在极低频率处引入，从而对系统的瞬态响应影响最小。\n3.  选择极点 $p_c$ 使得补偿器的直流增益 $D(1)$ 恰好为 $\\frac{7}{3}$。\n\n该补偿器将在一个数字信号处理器（DSP）上实现，其中滤波器系数（在此例中为 $z_c$ 和 $p_c$）使用有符号定点二进制表示法进行存储。这种表示法共使用16位，配置为 Q3.12 格式。这意味着有1个符号位，3个整数位和12个小数位。当存储一个实数时，DSP 硬件会执行标准四舍五入，取最接近的可表示值。\n\n考虑到 DSP 的有限精度，所实现的极点和零点位置 $p_{c,q}$ 和 $z_{c,q}$ 将是其理想值的量化版本。计算该补偿器在此 DSP 上实现时的实际直流增益。请用一个精确实数表示您的答案。", "solution": "补偿器为 $D(z) = K_{c}\\dfrac{z - z_{c}}{z - p_{c}}$。高频增益为 $\\lim_{z \\to \\infty}D(z) = K_{c}$，因此根据指标1的要求\n$$\nK_{c} = 1.\n$$\n直流增益为 $D(1) = \\dfrac{1 - z_{c}}{1 - p_{c}}$。指标3要求 $D(1) = \\dfrac{7}{3}$，因此\n$$\n\\frac{1 - z_{c}}{1 - p_{c}} = \\frac{7}{3}\n\\quad\\Longrightarrow\\quad\n3(1 - z_{c}) = 7(1 - p_{c})\n\\quad\\Longrightarrow\\quad\n1 - p_{c} = \\frac{3}{7}(1 - z_{c}),\n$$\n可得\n$$\np_{c} = 1 - \\frac{3}{7}(1 - z_{c}) = \\frac{4}{7} + \\frac{3}{7}z_{c}.\n$$\n当 $z_{c} = 0.99965 = \\dfrac{99965}{100000}$ 时，可得\n$$\np_{c} = \\frac{4}{7} + \\frac{3}{7}\\cdot\\frac{99965}{100000}\n= \\frac{400000 + 299895}{700000}\n= \\frac{699895}{700000}\n= 0.99985.\n$$\n\n在 Q3.12 格式中，量化步长为 $Q^{-1}$，其中 $Q = 2^{12} = 4096$，并四舍五入到最近的可表示值：\n$$\nx_{q} = \\frac{\\operatorname{round}(xQ)}{Q}.\n$$\n对于零点，\n$$\nz_{c}Q = \\frac{99965}{100000}\\cdot 4096 = \\frac{409456640}{100000} = 4094.5664\n\\quad\\Longrightarrow\\quad\n\\operatorname{round}(z_{c}Q) = 4095,\n$$\n所以\n$$\nz_{c,q} = \\frac{4095}{4096}.\n$$\n对于极点，\n$$\np_{c}Q = \\frac{99985}{100000}\\cdot 4096 = \\frac{409538560}{100000} = 4095.3856\n\\quad\\Longrightarrow\\quad\n\\operatorname{round}(p_{c}Q) = 4095,\n$$\n所以\n$$\np_{c,q} = \\frac{4095}{4096}.\n$$\n\n当 $K_{c} = 1$ 时，实现的直流增益为\n$$\nD_{q}(1) = \\frac{1 - z_{c,q}}{1 - p_{c,q}} = \\frac{1 - \\frac{4095}{4096}}{1 - \\frac{4095}{4096}} = \\frac{\\frac{1}{4096}}{\\frac{1}{4096}} = 1.\n$$\n因此，在 DSP 上实现的实际直流增益精确地为 $1$。", "answer": "$$\\boxed{1}$$", "id": "1588354"}]}
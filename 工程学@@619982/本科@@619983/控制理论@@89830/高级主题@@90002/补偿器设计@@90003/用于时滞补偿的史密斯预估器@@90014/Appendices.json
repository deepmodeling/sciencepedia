{"hands_on_practices": [{"introduction": "掌握史密斯预估器的第一步是理解其理想工作原理。本练习将引导你推导在模型完全精确的假设下的闭环传递函数。通过这个推导，你将从数学上清晰地看到，时间延迟项 $e^{-s\\tau}$ 是如何被巧妙地移出反馈回路的特征方程，从而允许我们针对无延迟系统设计控制器，极大地简化了设计过程。[@problem_id:1611252]", "problem": "在一个化学处理厂中，一个控制系统被设计用来调节一种产品的浓度。该过程的传递函数由 $P(s) = P_0(s)\\exp(-s\\tau)$ 给出，其中 $P_0(s)$ 表示化学反应器的动态特性，而 $\\exp(-s\\tau)$ 表示由于产品输送到下游传感器所产生的纯时间延迟 $\\tau$。\n\n为了克服这个时间延迟带来的挑战，我们采用了一种 Smith 预测器控制方案。该方案使用一个传递函数为 $C(s)$ 的控制器。控制器的输出 $U(s)$ 被输入到实际过程中以产生输出 $Y(s)$。\n\n与设定值 $R(s)$ 进行比较的反馈信号 $B(s)$ 按如下方式合成：\n$B(s) = Y_m(s) + (Y(s) - Y_{pred}(s))$\n其中：\n- $Y(s)$ 是过程的实际测量输出。\n- $Y_m(s)$ 是*不带*时间延迟的过程数学模型的输出。\n- $Y_{pred}(s)$ 是*包含*时间延迟的*整个*过程数学模型的输出。\n\n假设 Smith 预测器内部使用的数学模型与实际过程完全匹配。也就是说，无延迟部分的模型为 $\\hat{P}_0(s) = P_0(s)$，完整过程的模型为 $\\hat{P}(s) = P(s)$。\n\n您的任务是推导系统的总闭环传递函数，定义为 $G_{cl}(s) = \\frac{Y(s)}{R(s)}$。请用 $C(s)$、$P_0(s)$ 和 $\\tau$ 来表示您的答案。", "solution": "实际过程由 $P(s)=P_{0}(s)\\exp(-s\\tau)$ 给出。当输入为 $U(s)$ 时，真实输出为\n$$\nY(s)=P(s)U(s)=P_{0}(s)\\exp(-s\\tau)\\,U(s).\n$$\nSmith 预测器构造了\n$$\nB(s)=Y_{m}(s)+\\big(Y(s)-Y_{\\text{pred}}(s)\\big),\n$$\n其中，在完美模型匹配的情况下，内部模型为 $\\hat{P}_{0}(s)=P_{0}(s)$ 和 $\\hat{P}(s)=P(s)$。因此\n$$\nY_{m}(s)=\\hat{P}_{0}(s)U(s)=P_{0}(s)U(s), \\quad Y_{\\text{pred}}(s)=\\hat{P}(s)U(s)=P(s)U(s)=Y(s).\n$$\n所以，\n$$\nB(s)=Y_{m}(s)+\\big(Y(s)-Y_{\\text{pred}}(s)\\big)=P_{0}(s)U(s).\n$$\n控制器的输入是误差 $E(s)=R(s)-B(s)$，控制器的输出是\n$$\nU(s)=C(s)E(s)=C(s)\\big(R(s)-B(s)\\big)=C(s)\\big(R(s)-P_{0}(s)U(s)\\big).\n$$\n重新整理，\n$$\nU(s)+C(s)P_{0}(s)U(s)=C(s)R(s)\\quad\\Rightarrow\\quad U(s)=\\frac{C(s)}{1+C(s)P_{0}(s)}\\,R(s).\n$$\n那么实际输出就是\n$$\nY(s)=P_{0}(s)\\exp(-s\\tau)\\,U(s)=P_{0}(s)\\exp(-s\\tau)\\,\\frac{C(s)}{1+C(s)P_{0}(s)}\\,R(s).\n$$\n因此，总的闭环传递函数为\n$$\nG_{cl}(s)=\\frac{Y(s)}{R(s)}=\\frac{C(s)P_{0}(s)\\exp(-s\\tau)}{1+C(s)P_{0}(s)}.\n$$", "answer": "$$\\boxed{\\frac{C(s)P_{0}(s)\\exp(-s\\tau)}{1+C(s)P_{0}(s)}}$$", "id": "1611252"}, {"introduction": "理解了史密斯预估器的理想结构后，下一个核心问题便是：如何设计其中的主控制器 $C(s)$？本练习将带你解决这个问题。你将学习如何根据一个期望的闭环性能指标（此处为一个标准的一阶系统响应），来反向推导所需的控制器传递函数，这体现了控制工程中强大的内模控制（Internal Model Control, IMC）设计思想。[@problem_id:1611279]", "problem": "考虑一个过程，其传递函数为 $G(s) = G_m(s) e^{-\\theta s}$，其中 $G_m(s) = \\frac{K}{\\tau s + 1}$ 代表无延迟动态，而 $e^{-\\theta s}$ 代表纯时间延迟。此处，$K$、$\\tau$ 和 $\\theta$ 均为正常数，分别代表过程增益、过程时间常数和延迟时间。\n\n为该过程设计一个反馈控制系统。设计策略是基于过程的无延迟部分 $G_m(s)$ 来创建一个控制器 $G_c(s)$。在此控制架构中，从设定值 $R(s)$ 到无延迟模型输出 $Y_m(s)$ 的有效闭环传递函数由下式给出：\n$$\n\\frac{Y_m(s)}{R(s)} = \\frac{G_c(s) G_m(s)}{1 + G_c(s) G_m(s)}\n$$\n设计指标要求此有效闭环响应表现为具有期望时间常数 $\\tau_{cl}$ 的简单一阶系统：\n$$\n\\frac{Y_m(s)}{R(s)} = \\frac{1}{\\tau_{cl} s + 1}\n$$\n其中 $\\tau_{cl}$ 是一个正常数。\n\n确定为满足此设计指标所需的控制器传递函数 $G_c(s)$。用 $K$、$\\tau$ 和 $\\tau_{cl}$ 的函数表示你的答案。", "solution": "无延迟模型的有效闭环传递函数由下式给出\n$$\n\\frac{Y_{m}(s)}{R(s)}=\\frac{G_{c}(s)G_{m}(s)}{1+G_{c}(s)G_{m}(s)}.\n$$\n定义开环传递函数为 $L(s)=G_{c}(s)G_{m}(s)$。则闭环形式变为\n$$\n\\frac{Y_{m}(s)}{R(s)}=\\frac{L(s)}{1+L(s)}.\n$$\n为满足设计指标\n$$\n\\frac{Y_{m}(s)}{R(s)}=\\frac{1}{\\tau_{cl}s+1},\n$$\n我们需要\n$$\n\\frac{L(s)}{1+L(s)}=\\frac{1}{\\tau_{cl}s+1}.\n$$\n为此求解 $L(s)$:\n$$\nL(s)=\\frac{\\frac{1}{\\tau_{cl}s+1}}{1-\\frac{1}{\\tau_{cl}s+1}}=\\frac{\\frac{1}{\\tau_{cl}s+1}}{\\frac{\\tau_{cl}s}{\\tau_{cl}s+1}}=\\frac{1}{\\tau_{cl}s}.\n$$\n因此\n$$\nG_{c}(s)G_{m}(s)=\\frac{1}{\\tau_{cl}s}.\n$$\n已知 $G_{m}(s)=\\frac{K}{\\tau s+1}$，求解 $G_{c}(s)$:\n$$\nG_{c}(s)=\\frac{\\frac{1}{\\tau_{cl}s}}{\\frac{K}{\\tau s+1}}=\\frac{\\tau s+1}{K\\,\\tau_{cl}\\,s}.\n$$\n等效地，这是一个比例积分形式\n$$\nG_{c}(s)=\\frac{\\tau}{K\\tau_{cl}}+\\frac{1}{K\\tau_{cl}s}.\n$$\n两种表达式都满足设计要求，并且仅依赖于 $K$、$\\tau$ 和 $\\tau_{cl}$。延迟参数没有出现，因为设计指标是施加在无延迟模型的响应上的。", "answer": "$$\\boxed{\\frac{\\tau s+1}{K\\,\\tau_{cl}\\,s}}$$", "id": "1611279"}, {"introduction": "在现实世界中，完美的模型几乎不存在，因此理解模型失配（model mismatch）的后果至关重要。本练习通过一个思想实验，探讨当模型参数与实际过程不符时系统会如何响应——特别是当模型的时间常数 $\\tau_m$ 被严重高估时。这有助于培养对史密斯预估器鲁棒性的直观理解，并为诊断和调试实际应用中的性能问题（如超调和振荡）打下坚实的基础。[@problem_id:1611238]", "problem": "一位过程控制工程师的任务是为一个化学反应器实施Smith预估器控制方案。该反应器的动态行为可以很好地由一个具有传递函数$G_p(s)$的一阶加纯滞后(FOPDT)过程来近似。该工程师将该过程建模为$G_m(s)$，以设计Smith预估器。\n\n实际过程的传递函数为：\n$$G_p(s) = \\frac{K_p}{\\tau_p s + 1} e^{-\\theta_p s}$$\n\n在Smith预估器中使用的模型传递函数为：\n$$G_m(s) = \\frac{K_m}{\\tau_m s + 1} e^{-\\theta_m s}$$\n\nSmith预估器结构使用一个主控制器$C(s)$和过程模型$G_m(s)$来生成控制信号。由于系统辨识阶段的错误，工程师正确地辨识了过程增益($K_m = K_p$)和时间延迟($\\theta_m = \\theta_p$)，但严重高估了过程的时间常数。也就是说，模型的时间常数$\\tau_m$远大于实际过程的时间常数$\\tau_p$（即$\\tau_m \\gg \\tau_p$）。主控制器$C(s)$是基于缓慢的模型动态特性($\\tau_m$)进行整定的，以便在模型完美的*理想*情况下实现快速、无振荡的响应。\n\n考虑到模型远慢于实际过程的这种显著失配，下列哪项陈述最能描述闭环系统对设定值单位阶跃变化的响应的定性形状？\n\nA. 响应将表现出较大的初始超调，随后在稳定前发生振荡。\nB. 响应将是平滑且迟缓的，其镇定时间远长于理想情况。\nC. 响应将表现出初始反向行为，即输出首先向与设定值变化相反的方向移动，然后才上升。\nD. 响应将几乎与理想响应（如同模型是完美的一样）相同，这表明了Smith预估器的鲁棒性。\nE. 响应最初会非常缓慢，与模型的时间常数$\\tau_m$相匹配，然后会迅速加速向设定值靠近。", "solution": "我们首先将过程和模型重写为一个纯延迟部分和一个无延迟的一阶部分的乘积。定义\n$$\nG_{p}(s)=\\exp(-\\theta s)\\,G_{p0}(s),\\quad G_{p0}(s)=\\frac{K_{p}}{\\tau_{p}s+1},\n$$\n$$\nG_{m}(s)=\\exp(-\\theta s)\\,G_{m0}(s),\\quad G_{m0}(s)=\\frac{K_{m}}{\\tau_{m}s+1},\n$$\n其中$K_{m}=K_{p}$，$\\theta_{m}=\\theta_{p}=\\theta$，且存在失配$\\tau_{m}\\gg \\tau_{p}$，因此模型比实际被控对象慢得多。\n\n在标准的Smith预估器中，控制器$C(s)$作用于参考值与一个“预测”输出之间的误差，该预测输出使用无延迟模型和一个来自延迟失配的修正项。Smith预估器的一种方便的代数形式由以下预测信号给出：\n$$\n\\hat{y}(s)=G_{m0}(s)\\,u(s)+\\big[y(s)-\\exp(-\\theta s)\\,G_{m0}(s)\\,u(s)\\big],\n$$\n因此控制器输入为$e(s)=r(s)-\\hat{y}(s)$且$u(s)=C(s)\\,e(s)$。将$\\hat{y}(s)$代入$e(s)$中，得到\n$$\ne(s)=r(s)-y(s)-G_{m0}(s)\\,u(s)+\\exp(-\\theta s)\\,G_{m0}(s)\\,u(s).\n$$\n因此，\n$$\nu(s)=C(s)\\big[r(s)-y(s)\\big]-C(s)\\,G_{m0}(s)\\big[1-\\exp(-\\theta s)\\big]\\,u(s).\n$$\n整理各项可得\n$$\n\\big[1+C(s)\\,G_{m0}(s)\\big(1-\\exp(-\\theta s)\\big)\\big]\\,u(s)=C(s)\\big[r(s)-y(s)\\big].\n$$\n实际被控对象的输出满足$y(s)=\\exp(-\\theta s)\\,G_{p0}(s)\\,u(s)$。消去$u(s)$可得到从$r$到$y$的闭环传递函数：\n$$\n\\frac{y(s)}{r(s)}=\\frac{\\exp(-\\theta s)\\,C(s)\\,G_{p0}(s)}{1+C(s)\\,G_{m0}(s)+\\exp(-\\theta s)\\,C(s)\\big(G_{p0}(s)-G_{m0}(s)\\big)}.\n$$\n在理想情况下$G_{p0}(s)=G_{m0}(s)$，延迟的失配项被抵消，从而恢复标称的延迟补偿响应\n$$\n\\frac{y(s)}{r(s)}=\\frac{\\exp(-\\theta s)\\,C(s)\\,G_{m0}(s)}{1+C(s)\\,G_{m0}(s)},\n$$\n其行为类似于由$C(s)$整定的无延迟回路，后面跟着一个纯延迟$\\exp(-\\theta s)$。\n\n在给定的失配$\\tau_{m}\\gg\\tau_{p}$条件下，模型比被控对象慢得多。对于相同的$K_{p}$，我们有\n$$\nG_{p0}(s)=\\frac{K_{p}}{\\tau_{p}s+1},\\quad G_{m0}(s)=\\frac{K_{p}}{\\tau_{m}s+1},\\quad \\text{其中}\\ \\tau_{m}\\gg \\tau_{p}.\n$$\n因此，$G_{p0}(s)-G_{m0}(s)$在感兴趣的频率范围内是正实的（在很宽的频率范围内，实际被控对象的带宽和幅值都远大于慢速模型）。闭环传递函数的分母包含了额外的延迟项\n$$\n\\exp(-\\theta s)\\,C(s)\\big(G_{p0}(s)-G_{m0}(s)\\big),\n$$\n这为回路动态特性引入了一个延迟的正贡献。定性地看，这会产生以下机制：\n- 对于$t<\\theta$，修正项$y(t)-\\big[\\exp(-\\theta s)\\,G_{m0}(s)\\,u(s)\\big]^{\\vee}$为零（实际输出和模型延迟输出都尚未改变），因此控制器只“看到”缓慢的、无延迟的模型$G_{m0}(s)$。因为$C(s)$被整定为使慢速模型响应迅速且无振荡，所以它会施加一个相对较强的控制作用来加速迟缓的模型轨迹。\n- 在$t=\\theta$及之后，实际被控对象比模型快得多，其产生的输出比模型预测的轨迹上升得快得多。延迟的失配项$\\exp(-\\theta s)\\,C(s)\\big(G_{p0}(s)-G_{m0}(s)\\big)$随后反馈一个修正，突然减小了控制器看到的误差。然而，由于控制器已经以强作用驱动输入持续了长度为$\\theta$的时间，一旦被控对象开始响应，实际输出通常会超调设定值。延迟的失配反馈可能进一步引起欠阻尼行为，表现为振荡，然后系统才稳定下来。\n\n因此，当模型的时间常数相对于实际过程被大大高估时，闭环阶跃响应通常在延迟时间过后显示出显著的超调，并可能伴有振荡，然后才稳定。这种行为与选项A相符，并与其他选项矛盾：\n- 不是B：被控对象比模型快；响应并非平滑和迟缓，而是相当剧烈。\n- 不是C：没有非最小相位零点来产生反向响应。\n- 不是D：动态特性的巨大失配破坏了标称的Smith预估器等效性。\n- 不是E：输出并不会首先跟随慢速模型；它在延迟期间保持平坦，然后比模型上升得更快，导致超调，而不是初始缓慢上升随后加速。\n\n因此，最佳的定性描述是出现大的超调，并可能伴有振荡，然后才达到稳定。", "answer": "$$\\boxed{A}$$", "id": "1611238"}]}
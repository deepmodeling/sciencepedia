{"hands_on_practices": [{"introduction": "位置式 PID 算法是数字控制的基石。本练习将引导你逐步计算给定误差信号下的控制器输出，帮助你直观地理解比例（P）、积分（I）和微分（D）项如何共同作用于最终的控制决策。这是任何使用数字控制器工作的工程师或学生都需要掌握的基本技能。[@problem_id:1571856]", "problem": "一个数字控制器被设计用于调节一个小型实验熔炉的温度。在离散时间步长 $k$ 时，控制器的输出 $u(k)$ 是施加在加热元件上的电压。该控制器实现了一种比例-积分-微分 (PID) 算法。控制电压 $u(k)$ 基于误差信号 $e(k)$ 计算，该误差信号是期望的设定点温度与测量的熔炉温度之差。\n\n离散时间 PID 控制律由以下方程给出：\n$$u(k) = K_p e(k) + K_i T_s \\sum_{i=0}^{k} e(i) + \\frac{K_d}{T_s} (e(k) - e(k-1))$$\n其中：\n- $K_p$ 是比例增益。\n- $K_i$ 是积分增益。\n- $K_d$ 是微分增益。\n- $T_s$ 是采样时间。\n\n控制器具有以下参数：\n- 比例增益，$K_p = 2.0$ V/°C\n- 积分增益，$K_i = 0.8$ V/(°C·s)\n- 微分增益，$K_d = 0.5$ V·s/°C\n- 采样时间，$T_s = 0.5$ s\n\n系统在时间 $t=0$（对应于样本 $k=0$）时被激活。在初始运行期间，观测到误差信号遵循关系式 $e(k) = A k$，其中 $k \\in \\{0, 1, 2, ...\\}$ 是离散时间索引，且 $A = 0.25$ °C。\n\n假设系统在 $k=0$ 之前的所有时间都处于静止状态。这意味着求和项的初始值为零，并且前一个时间步的误差 $e(-1)$ 可视为 $0$。\n\n计算控制器输出电压的前四个值：$u(0)$，$u(1)$，$u(2)$ 和 $u(3)$。以伏特为单位表示您的答案。将这四个值 $u(0), u(1), u(2), u(3)$ 以行矩阵的形式呈现，每个值四舍五入到三位有效数字。", "solution": "离散时间 PID 律为\n$$u(k) = K_{p} e(k) + K_{i} T_{s} \\sum_{i=0}^{k} e(i) + \\frac{K_{d}}{T_{s}} \\left(e(k) - e(k-1)\\right).$$\n给定对于 $k \\geq 0$ 有 $e(k)=A k$，其中 $A=0.25$ 且 $e(-1)=0$，我们计算求和项与差分项：\n$$\\sum_{i=0}^{k} e(i) = \\sum_{i=0}^{k} A i = A \\sum_{i=0}^{k} i = A \\frac{k(k+1)}{2},$$\n$$e(k)-e(k-1) = \\begin{cases}\n0, & k=0,\\\\\nA, & k \\geq 1.\n\\end{cases}$$\n代入控制器参数 $K_{p}=2.0$，$K_{i}=0.8$，$K_{d}=0.5$，$T_{s}=0.5$：\n$$K_{i}T_{s}=0.8 \\cdot 0.5=0.4,\\qquad \\frac{K_{d}}{T_{s}}=\\frac{0.5}{0.5}=1.$$\n因此，\n$$u(k)=2.0\\,e(k)+0.4 \\sum_{i=0}^{k} e(i)+1\\cdot\\left(e(k)-e(k-1)\\right).$$\n由于 $e(k)=0.25 k$ 且 $\\sum_{i=0}^{k} e(i)=0.25 \\cdot \\frac{k(k+1)}{2}=0.125\\,k(k+1)$，我们有\n$$u(k)=2.0\\cdot(0.25 k)+0.4\\cdot(0.125\\,k(k+1))+\\left(e(k)-e(k-1)\\right).$$\n由于当 $k=0$ 时 $e(k)-e(k-1)=0$，当 $k \\geq 1$ 时等于 $0.25$，我们对每个 $k$ 进行求值：\n\n对于 $k=0$:\n$$e(0)=0,\\quad \\sum_{i=0}^{0} e(i)=0,\\quad e(0)-e(-1)=0,$$\n$$u(0)=2.0\\cdot 0+0.4\\cdot 0+1\\cdot 0=0.$$\n\n对于 $k=1$:\n$$e(1)=0.25,\\quad \\sum_{i=0}^{1} e(i)=0.125\\cdot 1\\cdot 2=0.25,\\quad e(1)-e(0)=0.25,$$\n$$u(1)=2.0\\cdot 0.25+0.4\\cdot 0.25+1\\cdot 0.25=0.5+0.1+0.25=0.85.$$\n\n对于 $k=2$:\n$$e(2)=0.5,\\quad \\sum_{i=0}^{2} e(i)=0.125\\cdot 2\\cdot 3=0.75,\\quad e(2)-e(1)=0.25,$$\n$$u(2)=2.0\\cdot 0.5+0.4\\cdot 0.75+1\\cdot 0.25=1.0+0.3+0.25=1.55.$$\n\n对于 $k=3$:\n$$e(3)=0.75,\\quad \\sum_{i=0}^{3} e(i)=0.125\\cdot 3\\cdot 4=1.5,\\quad e(3)-e(2)=0.25,$$\n$$u(3)=2.0\\cdot 0.75+0.4\\cdot 1.5+1\\cdot 0.25=1.5+0.6+0.25=2.35.$$\n\n四舍五入到三位有效数字，这些值为 $u(0)=0.000$，$u(1)=0.850$，$u(2)=1.55$，$u(3)=2.35$。", "answer": "$$\\boxed{\\begin{pmatrix} 0.000 & 0.850 & 1.55 & 2.35 \\end{pmatrix}}$$", "id": "1571856"}, {"introduction": "在实践中，“PID”并非一个统一不变的公式。不同的控制器制造商会采用不同的实现形式，例如“并联式”（理想型）和“串联式”（交互型）。本练习将演示如何在这两种常见的结构之间转换控制器参数 $K'_p$、$T'_i$ 和 $T'_d$，这对于将理论计算出的整定参数应用于实际硬件至关重要。[@problem_id:1571892]", "problem": "在控制系统领域，比例-积分-微分（PID）控制器是一种普遍存在的反馈机制。根据硬件或软件实现方式的不同，PID控制器可以有不同的结构形式。\n\n连续时间PID控制器的“理想”或“并行”形式具有以下传递函数：\n$$C(s) = K_p \\left( 1 + \\frac{1}{T_i s} + T_d s \\right)$$\n其中，$K_p$ 是比例增益，$T_i$ 是积分时间，$T_d$ 是微分时间。\n\n另一种常见的实现是“串行”或“交互”形式，其传递函数为：\n$$C'(s) = K'_p \\left( 1 + \\frac{1}{T'_i s} \\right) (1 + T'_d s)$$\n其中，$K'_p$、$T'_i$ 和 $T'_d$ 是这种形式的相应参数。\n\n一位控制工程师使用优化算法确定了一个热过程的理想PID参数，得到了 $K_p = 4.0$，$T_i = 10.0$ 秒和 $T_d = 1.0$ 秒。然而，现有的可编程逻辑控制器（PLC）使用一个内置的功能块，该功能块实现的是串行PID形式。为了正确编程PLC，该工程师必须找到等效的串行参数。\n\n假设两种控制器等效，求出串行控制器参数的数值：比例增益 $K'_p$、积分时间 $T'_i$ 和微分时间 $T'_d$。以 $K'_p$、$T'_i$ 和 $T'_d$ 的顺序，将你的最终答案表示为一组三个数字。将 $T'_i$ 和 $T'_d$ 以秒为单位表示。将所有最终值四舍五入到三位有效数字。", "solution": "我们已知理想（并行）PID控制器为\n$$C(s) = K_{p}\\left(1 + \\frac{1}{T_{i} s} + T_{d} s\\right),$$\n以及串行（交互）形式为\n$$C'(s) = K'_{p}\\left(1 + \\frac{1}{T'_{i} s}\\right)\\left(1 + T'_{d} s\\right).$$\n为使它们等效，展开串行形式：\n$$(1 + \\frac{1}{T'_{i} s})(1 + T'_{d} s) = 1 + \\frac{1}{T'_{i} s} + T'_{d} s + \\frac{T'_{d}}{T'_{i}}.$$\n因此，\n$$C'(s) = K'_{p}\\left(1 + \\frac{1}{T'_{i} s} + T'_{d} s + \\frac{T'_{d}}{T'_{i}}\\right).$$\n通过匹配 $1$、$s^{-1}$ 和 $s$ 的系数，令 $C'(s)$ 等于 $C(s)$，可得\n$$K'_{p}\\left(1 + \\frac{T'_{d}}{T'_{i}}\\right) = K_{p}, \\quad \\frac{K'_{p}}{T'_{i}} = \\frac{K_{p}}{T_{i}}, \\quad K'_{p} T'_{d} = K_{p} T_{d}.$$\n联立求解这些方程。由第二个和第三个方程可得，\n$$T'_{i} = \\frac{K'_{p}}{K_{p}} T_{i}, \\qquad T'_{d} = \\frac{K_{p}}{K'_{p}} T_{d}.$$\n代入第一个方程：\n$$K'_{p}\\left[1 + \\frac{\\left(\\frac{K_{p}}{K'_{p}} T_{d}\\right)}{\\left(\\frac{K'_{p}}{K_{p}} T_{i}\\right)}\\right] = K_{p} \\;\\;\\Rightarrow\\;\\; K'_{p}\\left[1 + \\frac{K_{p}^{2}}{K_{p}'^{2}}\\frac{T_{d}}{T_{i}}\\right] = K_{p}.$$\n设 $x = K'_{p}$。两边同乘以 $x$ 得到二次方程\n$$x^{2} - K_{p} x + K_{p}^{2}\\frac{T_{d}}{T_{i}} = 0,$$\n其解为\n$$K'_{p} = \\frac{K_{p}}{2}\\left(1 \\pm \\sqrt{1 - \\frac{4 T_{d}}{T_{i}}}\\right), \\qquad T'_{i} = \\frac{T_{i}}{K_{p}} K'_{p}, \\qquad T'_{d} = \\frac{K_{p} T_{d}}{K'_{p}}.$$\n对于给定值 $K_{p} = 4.0$，$T_{i} = 10.0$ 和 $T_{d} = 1.0$，\n$$K'_{p} = 2\\left(1 \\pm \\sqrt{1 - \\frac{4}{10}}\\right) = 2\\left(1 \\pm \\sqrt{0.6}\\right).$$\n这会产生两个正解。常规选择是保留当 $T_{i} > T_{d}$ 时 $T'_{i} > T'_{d}$ 的顺序，这对应于取正号的根：\n$$K'_{p} = 2\\left(1 + \\sqrt{0.6}\\right) \\approx 3.549193338,$$\n$$T'_{i} = \\frac{10}{4} K'_{p} \\approx 8.872983346 \\text{ s}, \\qquad T'_{d} = \\frac{4 \\cdot 1}{K'_{p}} \\approx 1.127016653 \\text{ s}.$$\n将每个值四舍五入到三位有效数字，得到\n$$K'_{p} \\approx 3.55, \\quad T'_{i} \\approx 8.87 \\text{ s}, \\quad T'_{d} \\approx 1.13 \\text{ s}.$$", "answer": "$$\\boxed{\\begin{pmatrix}3.55 & 8.87 & 1.13\\end{pmatrix}}$$", "id": "1571892"}, {"introduction": "现在我们来探讨一个更高级但至关重要的实现细节：离散化方法的选择。这个思想实验比较了同一个连续 PD 控制器在采用前向欧拉法和 Tustin 变换这两种不同方法进行离散化后，闭环系统的稳定性差异。它突显了离散化方法的选择对系统稳定性的深远影响，揭示了并非所有方法都是等效或普适的。[@problem_id:1571885]", "problem": "一个数字控制系统被设计用于调节一个过程，该过程由纯积分器对象的连续时间传递函数 $P(s) = \\frac{K}{s}$ 建模。控制器是一个理想的比例-微分 (PD) 控制器，其传递函数为 $C(s) = K_p + K_d s$。该系统配置在一个标准的单位反馈回路中。\n\n为了实现，连续对象 $P(s)$ 使用零阶保持器 (ZOH) 进行离散化，采样时间为 $T$，得到离散时间传递函数 $P(z) = \\frac{KT}{z-1}$。数字控制器 $C(z)$ 是通过对连续控制器 $C(s)$ 进行离散化得到的。\n\n您的任务是比较采用两种不同控制器离散化方法时闭环系统的稳定性：\n1.  **前向欧拉法**：使用近似 $s \\approx \\frac{z-1}{T}$。\n2.  **Tustin 方法（双线性变换）**：使用近似 $s \\approx \\frac{2}{T}\\frac{z-1}{z+1}$。\n\n系统参数给定为：对象增益 $K=5$，比例增益 $K_p=0.4$，以及微分增益 $K_d=0.1$。\n\n令 $T_{FE}$ 为使用前向欧拉控制器的系统保持稳定时的最大采样时间（单位：秒）。如果系统对所有 $T > 0$ 都稳定，则认为其最大采样时间为无穷大。\n令 $T_{T}$ 为使用 Tustin 控制器的系统保持稳定时的最大采样时间（单位：秒）。如果系统对所有 $T > 0$ 都稳定，则认为其最大采样时间为无穷大。\n\n以下哪个陈述正确地描述了这两个所得系统的稳定性？\n\nA. 前向欧拉系统的稳定性极限为 $T_{FE} = 1.5$ 秒；基于 Tustin 方法的系统对所有 $T > 0$ 都不稳定。\n\nB. 前向欧拉系统的稳定性极限为 $T_{FE} = 0.75$ 秒；基于 Tustin 方法的系统对所有 $T > 0$ 都不稳定。\n\nC. 前向欧拉系统的稳定性极限为 $T_{FE} = 1.5$ 秒；基于 Tustin 方法的系统对所有 $T > 0$ 都稳定。\n\nD. 两个系统都对所有 $T > 0$ 稳定。\n\nE. 两个系统都对所有 $T > 0$ 不稳定。", "solution": "连续对象是一个纯积分器 $P(s)=\\frac{K}{s}$。采用零阶保持器 (ZOH) 和采样时间 $T$，可得离散对象为\n$$\nP(z)=\\frac{K T}{z-1}.\n$$\n连续 PD 控制器为 $C(s)=K_{p}+K_{d}s$。我们用两种方法离散化 $C(s)$，并分析单位反馈下的闭环稳定性。\n\n前向欧拉法：使用 $s \\approx \\frac{z-1}{T}$，得到\n$$\nC_{\\mathrm{FE}}(z)=K_{p}+K_{d}\\frac{z-1}{T}.\n$$\n开环传递函数为\n$$\nL_{\\mathrm{FE}}(z)=C_{\\mathrm{FE}}(z)P(z)=\\left(K_{p}+K_{d}\\frac{z-1}{T}\\right)\\frac{K T}{z-1}=K K_{d}+\\frac{K T K_{p}}{z-1}.\n$$\n闭环特征方程为 $1+L_{\\mathrm{FE}}(z)=0$。两边乘以 $(z-1)$ 得\n$$\n(z-1)\\left(1+K K_{d}\\right)+K T K_{p}=0,\n$$\n因此闭环极点为\n$$\nz=1-\\frac{K T K_{p}}{1+K K_{d}}.\n$$\n离散时间系统的稳定性要求 $|z|<1$，即：\n$$\n|1-\\frac{K K_{p}}{1+K K_{d}}T|<1.\n$$\n这等效于\n$$\n0<T<\\frac{2\\left(1+K K_{d}\\right)}{K K_{p}}.\n$$\n因此最大采样时间为\n$$\nT_{\\mathrm{FE},\\max}=\\frac{2\\left(1+K K_{d}\\right)}{K K_{p}}.\n$$\n代入 $K=5$，$K_{p}=0.4$，$K_{d}=0.1$ 可得 $K K_{p}=2$ 和 $K K_{d}=0.5$，因此\n$$\nT_{\\mathrm{FE},\\max}=\\frac{2(1+0.5)}{2}=1.5.\n$$\n\nTustin 方法：使用 $s \\approx \\frac{2}{T}\\frac{z-1}{z+1}$，得到\n$$\nC_{\\mathrm{T}}(z)=K_{p}+K_{d}\\frac{2}{T}\\frac{z-1}{z+1}=\\frac{K_{p}(z+1)+\\frac{2K_{d}}{T}(z-1)}{z+1}.\n$$\n开环传递函数为\n$$\nL_{\\mathrm{T}}(z)=C_{\\mathrm{T}}(z)P(z)=\\frac{K T}{z-1}\\cdot\\frac{K_{p}(z+1)+\\frac{2K_{d}}{T}(z-1)}{z+1}=\\frac{K T K_{p}}{z-1}+\\frac{2 K K_{d}}{z+1}.\n$$\n闭环特征方程 $1+L_{\\mathrm{T}}(z)=0$ 在两边乘以 $(z-1)(z+1)$ 后变为：\n$$\n(z-1)(z+1)+K T K_{p}(z+1)+2 K K_{d}(z-1)=0,\n$$\n或\n$$\nz^{2}+\\left(K T K_{p}+2 K K_{d}\\right)z+\\left(K T K_{p}-2 K K_{d}-1\\right)=0.\n$$\n定义 $b=K T K_{p}+2 K K_{d}$ 和 $c=K T K_{p}-2 K K_{d}-1$。对于 $z^{2}+b z+c$ 的 Schur 稳定性需要满足 Jury 判据\n$$\n1+b+c>0,\\quad 1-b+c>0,\\quad 1-c>0.\n$$\n对这些条件进行符号计算：\n$$\n1+b+c=1+\\left(K T K_{p}+2 K K_{d}\\right)+\\left(K T K_{p}-2 K K_{d}-1\\right)=2 K T K_{p}>0 \\text{ for } T>0,\n$$\n$$\n1-b+c=1-\\left(K T K_{p}+2 K K_{d}\\right)+\\left(K T K_{p}-2 K K_{d}-1\\right)=-4 K K_{d},\n$$\n$$\n1-c=1-\\left(K T K_{p}-2 K K_{d}-1\\right)=2+2 K K_{d}-K T K_{p}.\n$$\n在 $K>0$ 和 $K_{d}>0$ 的情况下，第二个条件变为 $-4 K K_{d}>0$，这是不可能的。因此，基于 Tustin 方法的闭环系统对所有 $T>0$ 都是不稳定的，无论 $T$ 的取值如何。\n\n当 $K=5$，$K_{p}=0.4$，$K_{d}=0.1$ 时，前向欧拉设计的稳定性极限为 $T_{\\mathrm{FE}}=1.5$ 秒，而 Tustin 设计对所有 $T>0$ 都不稳定。这对应于选项 A。", "answer": "$$\\boxed{A}$$", "id": "1571885"}]}
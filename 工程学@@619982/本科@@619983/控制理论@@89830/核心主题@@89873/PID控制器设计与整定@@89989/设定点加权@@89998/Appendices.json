{"hands_on_practices": [{"introduction": "要真正理解设定值加权的机理，我们必须首先分析它对整个系统数学模型的影响。这个练习将引导你推导出闭环传递函数，揭示设定值权重参数$b$如何创建“双自由度”结构[@problem_id:1609241]。这是将设定值响应与扰动抑制性能解耦的数学基础。", "problem": "一个小型实验舱的温度控制简化模型由一阶过程传递函数$P(s) = \\frac{Y(s)}{U(s)} = \\frac{K}{\\tau s+1}$给出，其中$Y(s)$是舱室温度的拉普拉斯变换，$U(s)$是供给加热器功率的拉普拉斯变换。该过程的增益为$K$，时间常数为$\\tau$。\n\n为了改善对设定点变化的响应并减少超调，采用了一个在比例项上带有设定点权重的比例-积分 (PI) 控制器。该控制器的输出在拉普拉斯域中由以下关系式描述：\n$$U(s) = K_{p} (b R(s) - Y(s)) + \\frac{K_{i}}{s}(R(s) - Y(s))$$\n在此方程中，$R(s)$是期望设定点温度的拉普拉斯变换，$K_p$是比例增益，$K_i$是积分增益，$b$是无量纲的设定点权重因子，满足$0 \\le b \\le 1$。\n\n推导该系统用于设定点跟踪的闭环传递函数$T(s) = \\frac{Y(s)}{R(s)}$。请用$s$、$K$、$\\tau$、$K_p$、$K_i$和$b$来表示你的答案。", "solution": "该系统由两个主要方程描述：过程模型和控制器法则。\n\n过程模型由下式给出：\n$$Y(s) = P(s)U(s) = \\frac{K}{\\tau s+1}U(s)$$\n\n控制器法则由下式给出：\n$$U(s) = K_{p} (b R(s) - Y(s)) + \\frac{K_{i}}{s}(R(s) - Y(s))$$\n\n为了求得闭环传递函数$T(s) = \\frac{Y(s)}{R(s)}$，我们首先将控制器方程代入过程方程。在此之前，将控制器方程中的项按$R(s)$和$Y(s)$分组会很有帮助：\n$$U(s) = \\left(b K_{p} + \\frac{K_{i}}{s}\\right)R(s) - \\left(K_{p} + \\frac{K_{i}}{s}\\right)Y(s)$$\n\n现在，将这个$U(s)$的表达式代入过程方程：\n$$Y(s) = \\frac{K}{\\tau s+1} \\left[ \\left(b K_{p} + \\frac{K_{i}}{s}\\right)R(s) - \\left(K_{p} + \\frac{K_{i}}{s}\\right)Y(s) \\right]$$\n\n为了解出$\\frac{Y(s)}{R(s)}$，我们需要重排方程，将所有$Y(s)$项归到一边，所有$R(s)$项归到另一边。首先，两边同乘以$(\\tau s+1)$：\n$$(\\tau s+1)Y(s) = K \\left[ \\left(b K_{p} + \\frac{K_{i}}{s}\\right)R(s) - \\left(K_{p} + \\frac{K_{i}}{s}\\right)Y(s) \\right]$$\n\n为了消去$1/s$项，一个常用的技巧是为括号内的控制器项找到一个公分母：\n$$(\\tau s+1)Y(s) = K \\left[ \\left(\\frac{b K_{p}s + K_{i}}{s}\\right)R(s) - \\left(\\frac{K_{p}s + K_{i}}{s}\\right)Y(s) \\right]$$\n\n现在，整个方程乘以$s$以消去分母：\n$$s(\\tau s+1)Y(s) = K \\left[ (b K_{p}s + K_{i})R(s) - (K_{p}s + K_{i})Y(s) \\right]$$\n\n将两边的项展开：\n$$(\\tau s^2 + s)Y(s) = K(b K_{p}s + K_{i})R(s) - K(K_{p}s + K_{i})Y(s)$$\n\n将所有包含$Y(s)$的项移到左边：\n$$(\\tau s^2 + s)Y(s) + K(K_{p}s + K_{i})Y(s) = K(b K_{p}s + K_{i})R(s)$$\n\n从左边提出因子$Y(s)$：\n$$Y(s) \\left[ \\tau s^2 + s + K(K_{p}s + K_{i}) \\right] = K(b K_{p}s + K_{i})R(s)$$\n\n展开括号内的项，并按$s$的幂次进行分组：\n$$Y(s) \\left[ \\tau s^2 + s + K K_{p}s + K K_{i} \\right] = K(b K_{p}s + K_{i})R(s)$$\n$$Y(s) \\left[ \\tau s^2 + (1 + K K_{p})s + K K_{i} \\right] = K(b K_{p}s + K_{i})R(s)$$\n\n最后，为了求得传递函数$T(s) = \\frac{Y(s)}{R(s)}$，将两边同时除以$R(s)$和乘以$Y(s)$的$s$的多项式：\n$$\\frac{Y(s)}{R(s)} = \\frac{K(b K_{p}s + K_{i})}{\\tau s^2 + (1 + K K_{p})s + K K_{i}}$$\n\n这就是所求的闭环传递函数。", "answer": "$$\\boxed{\\frac{K(b K_{p}s + K_{i})}{\\tau s^{2} + (1 + K K_{p})s + K K_{i}}}$$", "id": "1609241"}, {"introduction": "在上一节的理论基础上，这个练习提供了一个具体、可量化的例子来展示设定值加权的主要优点。通过计算设定值阶跃变化后瞬间的控制信号大小，我们可以直接看到权重因子$b$如何减弱剧烈的“比例冲击”[@problem_id:1609265]。这有助于实现更平稳的响应，并避免对执行机构造成不必要的压力。", "problem": "在工业过程控制中，为防止设定点发生阶跃变化时控制信号出现大的突变，一种常见的策略被称为“设定点加权”。考虑一个由比例-积分 (PI) 控制器控制的过程。该控制器根据参考设定点$r(t)$和被测过程输出$y(t)$，按照以下规律计算控制信号$u(t)$：\n\n$$u(t) = K_p (b \\cdot r(t) - y(t)) + K_i \\int_0^t [r(\\tau) - y(\\tau)] d\\tau$$\n\n其中，$K_p$是比例增益，$K_i$是积分增益，$b$是无量纲的设定点加权因子（$0 \\le b \\le 1$）。\n\n系统初始处于静止状态，即对于所有时间$t \\le 0$，过程输出为零，$y(t)=0$，参考设定点也为零，$r(t)=0$。在时间$t=0$时，参考设定点发生从 0 到 3 的阶跃变化。控制器的参数配置如下：$K_p=5$，$K_i=2$，$b=0.4$。\n\n计算在参考设定点发生阶跃变化后瞬间的控制信号大小，记为$u(0^+)$。请以精确数值作答。", "solution": "带设定点加权的 PI 控制器由下式给出：\n$$u(t) = K_{p}\\left(b\\,r(t) - y(t)\\right) + K_{i}\\int_{0}^{t}\\left[r(\\tau) - y(\\tau)\\right]\\,d\\tau.$$\n我们计算在$t=0^{+}$时，即阶跃发生后瞬间的控制信号。根据给定的初始条件$t \\le 0$时$r(t)=0$和$y(t)=0$，以及阶跃$r(0^{+})=3$，过程输出的物理连续性意味着$y(0^{+})=0$。因此，\n$$u(0^{+}) = K_{p}\\left(b\\,r(0^{+}) - y(0^{+})\\right) + K_{i}\\int_{0}^{0^{+}}\\left[r(\\tau) - y(\\tau)\\right]\\,d\\tau.$$\n在阶跃发生的瞬间，积分项为零，因为积分区间长度为零且没有脉冲贡献：\n$$\\int_{0}^{0^{+}}\\left[r(\\tau) - y(\\tau)\\right]\\,d\\tau = 0.$$\n因此，\n$$u(0^{+}) = K_{p}\\,b\\,r(0^{+}).$$\n将数值$K_p=5$、$b=0.4$和$r(0^{+})=3$代入，得到：\n$$u(0^{+}) = 5 \\times 0.4 \\times 3 = 6.$$", "answer": "$$\\boxed{6}$$", "id": "1609265"}, {"introduction": "理论模型固然强大，但现代控制系统大多以数字形式实现。本练习旨在弥合连续时间理论与数字实践之间的鸿沟。你将学习如何将带有设定值加权的连续 PI 控制器转换为离散时间差分方程，这是在微控制器或计算机上实现该控制算法的关键一步[@problem_id:1609275]。", "problem": "在数字控制系统中，为了减轻设定点发生阶跃变化后引起的大幅控制信号变化和可能的超调，一种常用策略是使用设定点加权。考虑一个连续时间比例积分 (PI) 控制器，其中设定点加权仅应用于比例项。控制信号$u(t)$由以下方程描述：\n\n$$u(t) = K_p (b \\cdot r(t) - y(t)) + K_i \\int_0^t (r(\\tau) - y(\\tau)) d\\tau$$\n\n在此式中，$r(t)$是设定点，$y(t)$是被测过程输出，$K_p$是比例增益，$K_i$是积分增益，$b$是无量纲的设定点加权因子。\n\n该连续时间控制器需要在具有固定采样周期$T$的数字处理器上实现。为此，必须将控制器方程转换为离散时间差分方程。积分项将使用后向欧拉法进行近似，该方法将一个采样区间上的积分近似为一个矩形的面积，其高度为该区间末端被积函数的值。\n\n令$u[k]$、$r[k]$和$y[k]$分别表示在采样时刻$t = kT$时$u(t)$、$r(t)$和$y(t)$的值。推导控制信号的差分方程。你的任务是给出$u[k]$关于前一时刻的控制信号$u[k-1]$、当前和前一时刻的设定点($r[k], r[k-1]$)、当前和前一时刻的过程输出($y[k], y[k-1]$)以及控制器参数$K_p$、$K_i$、$T$和$b$的表达式。", "solution": "从比例项上带有设定点加权的连续时间PI控制器开始：\n$$u(t)=K_{p}\\big(b\\,r(t)-y(t)\\big)+K_{i}\\int_{0}^{t}\\big(r(\\tau)-y(\\tau)\\big)\\,d\\tau.$$\n设采样周期为$T$，并定义采样变量$u[k]=u(kT)$，$r[k]=r(kT)$，$y[k]=y(kT)$。引入离散积分状态\n$$I[k]\\approx \\int_{0}^{kT}\\big(r(\\tau)-y(\\tau)\\big)\\,d\\tau.$$\n在一个采样区间上使用后向欧拉法，\n$$I[k]=I[k-1]+T\\big(r[k]-y[k]\\big).$$\n离散控制器可以写为\n$$u[k]=K_{p}\\big(b\\,r[k]-y[k]\\big)+K_{i}I[k],$$\n在上一时刻，\n$$u[k-1]=K_{p}\\big(b\\,r[k-1]-y[k-1]\\big)+K_{i}I[k-1].$$\n用前者减去后者，并代入后向欧拉法的更新式：\n$$u[k]-u[k-1]=K_{p}\\Big(b\\big(r[k]-r[k-1]\\big)-\\big(y[k]-y[k-1]\\big)\\Big)+K_{i}\\big(I[k]-I[k-1]\\big),$$\n$$u[k]-u[k-1]=K_{p}\\Big(b\\big(r[k]-r[k-1]\\big)-\\big(y[k]-y[k-1]\\big)\\Big)+K_{i}T\\big(r[k]-y[k]\\big).$$\n整理后，即可得到以$u[k-1]$、$r[k],r[k-1]$、$y[k],y[k-1]$和控制器参数表示的所需差分方程：\n$$u[k]=u[k-1]+K_{p}\\Big(b\\big(r[k]-r[k-1]\\big)-\\big(y[k]-y[k-1]\\big)\\Big)+K_{i}T\\big(r[k]-y[k]\\big).$$", "answer": "$$\\boxed{u[k]=u[k-1]+K_{p}\\left(b\\left(r[k]-r[k-1]\\right)-\\left(y[k]-y[k-1]\\right)\\right)+K_{i}T\\left(r[k]-y[k]\\right)}$$", "id": "1609275"}]}
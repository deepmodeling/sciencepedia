{"hands_on_practices": [{"introduction": "动手实践是检验理论理解的最好方式。第一个练习将探讨比例控制器在存在持续外部干扰时的基本行为。我们将通过分析一个直流电机定位系统，使用终值定理来量化由恒定扰动转矩引起的稳态误差 [@problem_id:1603305]。这个计算清晰地揭示了纯比例控制的一个核心局限性，并为理解积分控制的必要性奠定了基础。", "problem": "用于光学显微镜的精密定位系统使用直流 (DC) 电机来移动样本台。该系统旨在将样本台保持在固定的参考位置。电机施加的转矩与电机轴的最终角位置之间的关系由传递函数 $G(s) = \\frac{K}{s(\\tau s + 1)}$ 建模，其中 $s$ 是复频域变量，$K$ 是电机的速度常数，$\\tau$ 是其机械时间常数。\n\n一个增益为 $K_p$ 的比例控制器，表示为 $C(s) = K_p$，被用于单位负反馈回路中以调节电机的位置。控制器的输出是给予电机的转矩指令。\n\n在运行过程中，发现整个装置处于一个轻微的、意外的倾斜状态。这导致一个恒定的重力负载，在电机轴上施加一个大小为 $T_d$ 的等效扰动转矩。该扰动被建模为与来自控制器的转矩指令相加。\n\n假设闭环系统是稳定的，并且所有参数（$K, \\tau, K_p, T_d$）都是正常数，请确定由该恒定扰动转矩引起的电机轴角位置的稳态误差。您的答案应为一个用给定参数表示的符号表达式。", "solution": "令 $R(s)$ 为参考位置的拉普拉斯变换，$Y(s)$ 为实际电机位置的拉普拉斯变换，$E(s) = R(s) - Y(s)$ 为误差的拉普拉斯变换。该系统配置为单位负反馈结构。控制器为 $C(s) = K_p$，被控对象为 $G(s) = \\frac{K}{s(\\tau s + 1)}$。\n\n问题陈述存在一个扰动转矩 $D(s)$，它与控制器的输出相加。输入到被控对象的总转矩是控制器输出 $U_c(s)$ 和扰动转矩 $D(s)$ 的和。\n控制器输出与误差的关系为 $U_c(s) = C(s)E(s)$。\n被控对象的输出与总输入转矩的关系为 $Y(s) = G(s)[U_c(s) + D(s)]$。\n\n代入 $U_c(s)$ 的表达式，我们得到：\n$$Y(s) = G(s)[C(s)E(s) + D(s)]$$\n现在，代入误差的定义 $E(s) = R(s) - Y(s)$：\n$$Y(s) = G(s)[C(s)(R(s) - Y(s)) + D(s)]$$\n我们想要找出由扰动引起的误差。为分离出这种效应，我们可以将参考输入设为零，$R(s) = 0$。这是因为系统是线性的，我们可以使用叠加原理。当 $R(s)=0$ 时，误差为 $E(s) = 0 - Y(s) = -Y(s)$。方程变为：\n$$Y(s) = G(s)[-C(s)Y(s) + D(s)]$$\n现在我们可以求解 $Y(s)$ 关于 $D(s)$ 的表达式：\n$$Y(s) = -G(s)C(s)Y(s) + G(s)D(s)$$\n$$Y(s) + G(s)C(s)Y(s) = G(s)D(s)$$\n$$Y(s)[1 + G(s)C(s)] = G(s)D(s)$$\n$$Y(s) = \\frac{G(s)}{1 + G(s)C(s)} D(s)$$\n由扰动引起的误差为 $E_d(s) = -Y(s)$：\n$$E_d(s) = -\\frac{G(s)}{1 + G(s)C(s)} D(s)$$\n问题陈述扰动是一个大小为 $T_d$ 的恒定转矩。在拉普拉斯域中，一个大小为 $T_d$ 的常数（或阶跃函数）表示为 $D(s) = \\frac{T_d}{s}$。\n将此代入误差表达式：\n$$E_d(s) = -\\frac{G(s)}{1 + G(s)C(s)} \\frac{T_d}{s}$$\n为了求取稳态误差 $e_{ss}$，我们使用终值定理 (FVT)，该定理指出 $e_{ss} = \\lim_{t \\to \\infty} e(t) = \\lim_{s \\to 0} s E_d(s)$。终值定理是适用的，因为问题陈述中说明了闭环系统是稳定的。（闭环系统的极点是特征方程 $1 + G(s)C(s) = 0$ 的根，即 $1 + \\frac{K_p K}{s(\\tau s + 1)} = 0 \\implies \\tau s^2 + s + K_p K = 0$。由于 $\\tau, K_p, K$ 均为正数，该方程的根具有负实部，从而证实了系统的稳定性）。\n\n应用终值定理：\n$$e_{ss} = \\lim_{s \\to 0} s E_d(s) = \\lim_{s \\to 0} s \\left( -\\frac{G(s)}{1 + G(s)C(s)} \\frac{T_d}{s} \\right)$$\n$$e_{ss} = -T_d \\lim_{s \\to 0} \\frac{G(s)}{1 + G(s)C(s)}$$\n现在，我们代入 $G(s)$ 和 $C(s)$ 的表达式：\n$$e_{ss} = -T_d \\lim_{s \\to 0} \\frac{\\frac{K}{s(\\tau s + 1)}}{1 + K_p \\frac{K}{s(\\tau s + 1)}}$$\n为了化简分数，我们将分子和分母同乘以 $s(\\tau s + 1)$：\n$$e_{ss} = -T_d \\lim_{s \\to 0} \\frac{K}{s(\\tau s + 1) + K_p K}$$\n现在我们可以通过代入 $s=0$ 来计算极限：\n$$e_{ss} = -T_d \\frac{K}{0(\\tau \\cdot 0 + 1) + K_p K}$$\n$$e_{ss} = -T_d \\frac{K}{0 + K_p K}$$\n$$e_{ss} = -T_d \\frac{K}{K_p K}$$\n假设 $K \\neq 0$，它可以被消去：\n$$e_{ss} = -\\frac{T_d}{K_p}$$\n这就是由恒定扰动转矩引起的角位置的稳态误差。", "answer": "$$\\boxed{-\\frac{T_d}{K_p}}$$", "id": "1603305"}, {"introduction": "理论知识与实际调试技巧的结合是控制工程的精髓。这个实践模拟了一个无人机高度控制的PID调试过程，要求你根据系统出现持续振荡的现象，诊断出最可能的原因 [@problem_id:1603249]。通过这个练习，你将学会如何将系统响应的视觉特征与控制器增益的设置联系起来，这是培养控制器调试直觉和解决实际问题能力的关键一步。", "problem": "一名工程专业的学生任务是设计一个比例-积分-微分（PID）控制器，以维持一架小型四旋翼无人机的高度。该控制器根据期望的设定点高度与机载传感器测量的高度之间的误差来调整电机推力。\n\n该学生遵循一个常见的整定程序：\n1.  最初，只启用增益为 $K_p$ 的比例项（P控制器）。学生观察到，当指令设定一个新的高度时，无人机飞向该高度，但稳定在略低于设定点的高度，表现出稳态误差。\n2.  接着，学生启用增益为 $K_i$ 的积分项（PI控制器）以消除稳态误差。现在，无人机成功达到设定点高度。然而，其响应有些振荡，超调了目标并在几次振荡后才稳定下来。\n3.  为了使响应更快、更激进，学生显著增加了一个控制器增益。改变后，进行了一项测试，即从无人机稳定悬停状态向下轻推一下。无人机现在的响应是在目标高度附近以恒定幅度和固定周期无限振荡。这种行为表明系统已进入临界稳定状态。\n\n基于这最终的观察，以下哪项最可能是持续振荡的原因？\n\nA. 比例增益（$K_p$）过高。\n\nB. 积分增益（$K_i$）过高。\n\nC. 微分增益（$K_d$）过高。\n\nD. 无人机的电机功率不足以使其稳定。\n\nE. 比例增益（$K_p$）过低。", "solution": "我们考虑无人机在悬停点附近线性化的高度动力学。设垂直位置为 $z(t)$，控制输入（相对于悬停的增量推力）为 $u(t)$。在悬停点附近，一个标准的小信号模型是\n$$\nm \\ddot{z}(t) + b \\dot{z}(t) = u(t),\n$$\n其中 $m$ 是质量，$b$ 代表粘性阻尼/空气动力学阻力和执行器阻力。在零初始条件下进行拉普拉斯变换，得到受控对象（plant）的传递函数\n$$\nG(s) = \\frac{Z(s)}{U(s)} = \\frac{1}{m s^{2} + b s}.\n$$\nPID控制器为\n$$\nC(s) = K_{p} + \\frac{K_{i}}{s} + K_{d} s,\n$$\n它作用于误差 $e(t) = z_{\\text{ref}}(t) - z(t)$，因此有 $U(s) = C(s) E(s)$ 和 $E(s) = Z_{\\text{ref}}(s) - Z(s)$。在单位反馈下的闭环特征方程为\n$$\n1 + C(s) G(s) = 0 \\quad \\Longleftrightarrow \\quad 1 + \\frac{K_{p} + \\frac{K_{i}}{s} + K_{d} s}{m s^{2} + b s} = 0.\n$$\n两边乘以 $m s^{2} + b s$ 然后再乘以 $s$ 以消除分母，得到三次特征多项式\n$$\nm s^{3} + (b + K_{d}) s^{2} + K_{p} s + K_{i} = 0.\n$$\n令 $a_{3} = m$，$a_{2} = b + K_{d}$，$a_{1} = K_{p}$，$a_{0} = K_{i}$。对于三次方程 $a_{3} s^{3} + a_{2} s^{2} + a_{1} s + a_{0} = 0$，其 Routh-Hurwitz 稳定性条件是\n$$\na_{3} > 0,\\quad a_{2} > 0,\\quad a_{1} > 0,\\quad a_{0} > 0,\\quad \\text{and} \\quad a_{2} a_{1} > a_{3} a_{0}.\n$$\n用增益来表示，当 $m$ 和 $b$ 为正时，稳定性要求\n$$\nK_{p} > 0,\\quad K_{i} > 0,\\quad K_{d} > -b,\\quad \\text{and} \\quad (b + K_{d}) K_{p} > m K_{i}.\n$$\n具有持续振荡（等幅正弦波）的临界稳定状态发生在 Routh 表中 $s^{1}$ 行为零的边界上，即\n$$\n(b + K_{d}) K_{p} = m K_{i},\n$$\n这会产生一对纯虚的闭环极点。从 $s^{2}$ 行得到的相关辅助方程 $(b + K_{d}) s^{2} + K_{i} = 0$ 显示了振荡频率\n$$\n\\omega = \\sqrt{\\frac{K_{i}}{b + K_{d}}}.\n$$\n解释观察到的行为：仅有比例作用时，由于P控制器无法消除恒定扰动，在恒定扰动（悬停时的重力偏移）下预期会出现稳态误差；加入积分作用消除了这个误差，但积分作用通常会减小相位裕度并引入超调和振荡，正如观察到的那样。最终的测试表明，在通过显著增加一个增益使控制器“更快、更激进”之后，一个小扰动导致了恒定幅度和固定周期的持续振荡，即闭环系统处于不稳定的边缘（临界稳定）。\n\n从经典控制和奈奎斯特（Nyquist）/根轨迹（root-locus）的观点来看，增加比例增益 $K_p$ 会增加环路增益，减小相位裕度，并在一个临界的“极限增益” $K_u$ 时，产生具有明确周期的持续振荡。这正是 Ziegler-Nichols 极限增益法测试：在其他项的相位超前不占主导地位的情况下，过大的 $K_p$ 会将奈奎斯特（Nyquist）轨迹推向 $-1$ 点，从而在虚轴上产生一对闭环极点，并在小扰动后产生等幅振荡。相比之下，大的微分增益 $K_d$ 会增加相位超前，通常会增加阻尼，从而抑制此类振荡；而过大的积分增益 $K_i$ 会使PI环路不稳定，但学生所说的“使响应更快、更激进”的意图，最一致（也最常被尝试）的实现方式是增加 $K_p$，这是进入临界稳定、持续振荡状态的标准原因。电机功率不足不会产生小信号的持续振荡；它会限制可达到的加速度/高度，而不会将极点置于虚轴上。过低的 $K_p$ 会导致响应迟缓、校正不足，而不会产生持续振荡。\n\n因此，在激进的重新整定后出现持续振荡的最可能原因是比例增益 $K_p$ 被增加得过高，将环路推向其极限增益和临界稳定状态。", "answer": "$$\\boxed{A}$$", "id": "1603249"}, {"introduction": "标准的PID控制器在理论上很完美，但在实践中会遇到一些特殊问题。本练习将带你探究一个在设定点发生阶跃变化时出现的实际问题——“微分冲击” (derivative kick) [@problem_id:1603260]。你将学到如何使用狄拉克$\\delta$函数来数学化地描述和量化这个瞬间的剧烈控制动作，这不仅加深了你对微分项作用的理解，也揭示了为什么在工业应用中常常需要对PID算法进行改进。", "problem": "一部工业电炉由一个比例-积分-微分（PID）控制器进行调节。控制器的输出 $u(t)$ 表示供给加热元件的功率。控制作用由标准的PID方程确定：\n$$u(t) = K_p e(t) + K_i \\int_0^t e(\\tau)d\\tau + K_d \\frac{de(t)}{dt}$$\n其中 $e(t) = r(t) - y(t)$ 是误差信号。这里，$r(t)$ 是期望的温度设定点，$y(t)$ 是测量的炉温，而 $K_p$、$K_i$ 和 $K_d$ 分别是恒定的比例、积分和微分增益。\n\n初始时，在所有时间 $t < t_0$ 内，系统处于一个理想的稳态，炉温与设定点完全匹配，为一个恒定值 $T_1$。在时间 $t = t_0$ 时，操作员突然将设定点更改为一个新的恒定值 $T_2$。\n\n设定点的这种突然变化导致控制器的微分项 $u_d(t) = K_d \\frac{de(t)}{dt}$ 产生一个瞬时的、理论上无限大的脉冲。这被称为“微分冲击”。在数学上，这个脉冲被建模为狄拉克δ函数 $\\delta(t-t_0)$。在时间 $t_0$ 附近，微分项 $u_d(t)$ 的表达式将包含一个形式为 $M \\cdot \\delta(t-t_0)$ 的项，其中 $M$ 是一个常数。$M$ 的值被定义为微分冲击的幅值。\n\n假设由于热惯性，炉温 $y(t)$ 是时间的连续函数，请确定此微分冲击的幅值 $M$。请用给定的参数 $K_d$、$T_1$ 和 $T_2$ 以解析表达式的形式表示您的答案。", "solution": "PID控制器的微分项由下式给出\n$$u_{d}(t) = K_{d} \\frac{de(t)}{dt}, \\quad e(t) = r(t) - y(t).$$\n对于所有 $t<t_{0}$，系统处于稳态，有 $r(t)=T_{1}$ 和 $y(t)=T_{1}$，因此 $e(t)=0$。在 $t=t_{0}$ 时，设定点发生从 $T_{1}$ 到 $T_{2}$ 的阶跃变化。这可以建模为\n$$r(t) = T_{1} + \\left(T_{2} - T_{1}\\right) U(t - t_{0}),$$\n其中 $U$ 是亥维赛单位阶跃函数。使用分布导数，\n$$\\frac{dr(t)}{dt} = \\left(T_{2} - T_{1}\\right) \\delta(t - t_{0}).$$\n由于热惯性，炉温 $y(t)$ 是连续的，因此它在 $t_{0}$ 处没有跳变，所以其导数不包含狄拉克δ项。因此，$\\frac{de(t)}{dt}$ 的奇异（分布）部分完全由 $r(t)$ 的跳变引起：\n$$\\frac{de(t)}{dt} = \\frac{dr(t)}{dt} - \\frac{dy(t)}{dt} \\quad \\Rightarrow \\quad \\text{singular part of } \\frac{de(t)}{dt} = \\left(T_{2} - T_{1}\\right) \\delta(t - t_{0}).$$\n因此，微分项有一个狄拉克δ分量\n$$u_{d}(t) = K_{d} \\frac{de(t)}{dt} \\supset K_{d} \\left(T_{2} - T_{1}\\right) \\delta(t - t_{0}).$$\n等价地，在 $t_{0}$ 附近对 $u_{d}(t)$ 进行一个无穷小区间的积分，\n$$\\int_{t_{0}-\\epsilon}^{t_{0}+\\epsilon} u_{d}(t) \\, dt = K_{d} \\int_{t_{0}-\\epsilon}^{t_{0}+\\epsilon} \\frac{de(t)}{dt} \\, dt = K_{d} \\left(e(t_{0}^{+}) - e(t_{0}^{-})\\right).$$\n由于 $e(t_{0}^{-})=T_{1}-T_{1}=0$ 且 $e(t_{0}^{+})=T_{2}-y(t_{0}^{+})=T_{2}-T_{1}$，该积分等于 $K_{d} \\left(T_{2}-T_{1}\\right)$，这与 $\\delta(t-t_{0})$ 的系数相匹配。因此，微分冲击的幅值为\n$$M = K_{d} \\left(T_{2} - T_{1}\\right).$$", "answer": "$$\\boxed{K_{d}\\left(T_{2}-T_{1}\\right)}$$", "id": "1603260"}]}
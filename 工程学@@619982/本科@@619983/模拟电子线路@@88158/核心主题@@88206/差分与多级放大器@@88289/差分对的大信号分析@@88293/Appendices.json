{"hands_on_practices": [{"introduction": "差分对的一个核心大信号特性是其“电流转向”行为，即差分输入电压 $v_{id}$ 如何控制尾电流 $I_{SS}$ 在两个支路之间的分配。这个基础练习将帮助你定量分析输入电压与电流分配之间的关系。通过计算驱动大部分尾电流（95%）流经单个晶体管所需的具体输入电压，你将能更深入地理解 MOSFET 差分对的非线性大信号传递特性 [@problem_id:1314131]。", "problem": "差分对是模拟集成电路中的一个基本构建模块。考虑一个由两个相同的n沟道金属氧化物半导体场效应晶体管 (MOSFET) M1和M2构成的此类电路。M1和M2的源极连接在一起，并由一个吸收尾电流 $I_{SS}$ 的理想恒流源偏置。这两个晶体管被设计为在饱和区工作，其行为可由漏极电流的平方律模型精确描述：$I_D = \\frac{1}{2} k'_n \\frac{W}{L} (V_{GS} - V_{th})^2$，其中沟道长度调制效应可以忽略不计。M1和M2的栅极作为差分输入端，其栅极电压分别为 $v_{g1}$ 和 $v_{g2}$。\n\n该电路具有以下参数：\n- 尾电流, $I_{SS} = 200 \\ \\mu\\text{A}$\n- 工艺跨导参数, $k'_n = 100 \\ \\mu\\text{A/V}^2$\n- 晶体管宽长比, $W/L = 20$\n\n确定需要多大的正差分输入电压 $v_{id} = v_{g1} - v_{g2}$，才能使晶体管M1的漏极电流 $i_{D1}$ 等于总尾电流 $I_{SS}$ 的95%。\n\n将您的最终答案以毫伏 (mV) 为单位表示，并四舍五入到三位有效数字。", "solution": "问题要求计算差分输入电压 $v_{id}$，该电压使MOSFET差分对的漏极电流产生特定的不平衡。我们已知尾电流 $I_{SS}$、工艺跨导参数 $k'_n$ 和宽长比 $W/L$。晶体管M1和M2是相同的，并在饱和区工作。\n\n首先，根据所提供的平方律模型，写出漏极电流 $i_{D1}$ 和 $i_{D2}$ 的控制方程：\n$$i_{D1} = \\frac{1}{2} k_n (v_{GS1} - V_{th})^2$$\n$$i_{D2} = \\frac{1}{2} k_n (v_{GS2} - V_{th})^2$$\n其中 $k_n = k'_n \\frac{W}{L}$ 是晶体管跨导参数，$v_{GS1}$ 和 $v_{GS2}$ 分别是 M1 和 M2 的栅源电压，$V_{th}$ 是阈值电压。\n\n两个漏极电流之和必须等于电流源提供的尾电流：\n$$i_{D1} + i_{D2} = I_{SS}$$\n\n差分输入电压 $v_{id}$ 定义为两个栅极电压之差：\n$$v_{id} = v_{g1} - v_{g2}$$\n由于两个晶体管的源极连接到同一节点（我们称其电压为 $v_s$），我们可以将栅源电压表示为 $v_{GS1} = v_{g1} - v_s$ 和 $v_{GS2} = v_{g2} - v_s$。因此，差分输入电压可以写成两个栅源电压之差：\n$$v_{id} = (v_{g1} - v_s) - (v_{g2} - v_s) = v_{GS1} - v_{GS2}$$\n\n为了求出 $v_{id}$，我们首先需要用漏极电流来表示 $v_{GS1}$ 和 $v_{GS2}$。从漏极电流公式中，我们可以解出栅源电压（假设 $v_{GS} > V_{th}$）：\n$$v_{GS1} = V_{th} + \\sqrt{\\frac{2 i_{D1}}{k_n}}$$\n$$v_{GS2} = V_{th} + \\sqrt{\\frac{2 i_{D2}}{k_n}}$$\n\n现在，我们将这些表达式代入 $v_{id}$ 的表达式中：\n$$v_{id} = \\left(V_{th} + \\sqrt{\\frac{2 i_{D1}}{k_n}}\\right) - \\left(V_{th} + \\sqrt{\\frac{2 i_{D2}}{k_n}}\\right)$$\n阈值电压 $V_{th}$ 被消掉了：\n$$v_{id} = \\sqrt{\\frac{2}{k_n}} \\left(\\sqrt{i_{D1}} - \\sqrt{i_{D2}}\\right)$$\n\n问题陈述 $i_{D1}$ 是 $I_{SS}$ 的95%：\n$$i_{D1} = 0.95 I_{SS}$$\n根据电流求和规则，我们可以求出 $i_{D2}$：\n$$i_{D2} = I_{SS} - i_{D1} = I_{SS} - 0.95 I_{SS} = 0.05 I_{SS}$$\n\n将 $i_{D1}$ 和 $i_{D2}$ 的表达式代回到 $v_{id}$ 的方程中：\n$$v_{id} = \\sqrt{\\frac{2}{k_n}} \\left(\\sqrt{0.95 I_{SS}} - \\sqrt{0.05 I_{SS}}\\right)$$\n我们可以将 $\\sqrt{I_{SS}}$ 因子提出来：\n$$v_{id} = \\sqrt{\\frac{2 I_{SS}}{k_n}} \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n\n现在，我们可以代入问题中给出的数值。首先，计算跨导参数 $k_n$：\n$$k_n = k'_n \\frac{W}{L} = (100 \\ \\mu\\text{A/V}^2) \\times 20 = 2000 \\ \\mu\\text{A/V}^2 = 2.0 \\times 10^{-3} \\ \\text{A/V}^2$$\n尾电流为 $I_{SS} = 200 \\ \\mu\\text{A} = 2.0 \\times 10^{-4} \\ \\text{A}$。\n\n将这些值代入 $v_{id}$ 的方程中：\n$$v_{id} = \\sqrt{\\frac{2 \\times (2.0 \\times 10^{-4} \\ \\text{A})}{2.0 \\times 10^{-3} \\ \\text{A/V}^2}} \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n$$v_{id} = \\sqrt{\\frac{4.0 \\times 10^{-4}}{2.0 \\times 10^{-3}}} \\ \\text{V} \\cdot \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n$$v_{id} = \\sqrt{0.2} \\ \\text{V} \\cdot \\left(\\sqrt{0.95} - \\sqrt{0.05}\\right)$$\n\n现在，我们计算各项的数值：\n$$\\sqrt{0.2} \\approx 0.44721$$\n$$\\sqrt{0.95} \\approx 0.97468$$\n$$\\sqrt{0.05} \\approx 0.22361$$\n\n$$v_{id} \\approx 0.44721 \\times (0.97468 - 0.22361) \\ \\text{V}$$\n$$v_{id} \\approx 0.44721 \\times 0.75107 \\ \\text{V}$$\n$$v_{id} \\approx 0.33591 \\ \\text{V}$$\n\n问题要求答案以毫伏 (mV) 为单位。\n$$v_{id} \\approx 335.91 \\ \\text{mV}$$\n四舍五入到三位有效数字，我们得到：\n$$v_{id} \\approx 336 \\ \\text{mV}$$", "answer": "$$\\boxed{336}$$", "id": "1314131"}, {"introduction": "虽然差分对可以完全导引电流，但它们作为放大器的应用依赖于在“准线性”区域内工作。本练习将探讨 BJT 差分对的线性工作区边界，这与 MOSFET 的平方律特性有所不同，BJT 的指数特性使其对输入电压更为敏感。通过确定集电极电流偏离其静态值不超过特定百分比（5%）时所允许的最大差分输入电压，你将学会如何界定放大器的有效线性输入范围 [@problem_id:1314159]。", "problem": "许多运算放大器的输入级是基于双极结型晶体管 (BJT) 差分对。为使该级能提供线性放大，差分输入电压必须保持很小。考虑一个完全对称的 BJT 差分对，其发射极连接到一个理想直流恒流源，该恒流源吸收的总电流为 $I_{EE}$。集电极通过负载电阻连接到电源。假设 BJT 是相同的，具有非常高的共发射极电流增益 ($\\beta$)，且厄利效应可以忽略不计。每个晶体管的集电极电流 $I_C$ 和基极-发射极电压 $V_{BE}$ 之间的关系遵循 Ebers-Moll 模型，其中热电压为 $V_T = 25.0 \\text{ mV}$。\n\n为确保放大器在其准线性区域工作，每个晶体管中的集电极电流与其静态值的偏离不得超过 5.0%。每个晶体管的静态集电极电流为 $I_{EE}/2$。确定在该条件被违反之前，差分输入电压的最大允许幅值 $|v_{id}|_{max}$，其中 $v_{id} = v_{B1} - v_{B2}$。以毫伏 (mV) 为单位表示您的答案，并四舍五入到两位有效数字。", "solution": "对于一个对称的、基极电流可忽略不计（$\\beta$ 极大）且厄利效应可忽略不计的 BJT 差分对，每个晶体管都遵循 Ebers-Moll 关系式 $I_{Ck} = I_{S} \\exp(V_{BEk}/V_{T})$。由于发射极节点共用，基极-发射极电压之差等于差分输入：\n$$\nV_{BE1} - V_{BE2} = v_{B1} - v_{B2} = v_{id}.\n$$\n设 $I_{C1}$ 和 $I_{C2}$ 为集电极电流。则\n$$\n\\frac{I_{C1}}{I_{C2}} = \\exp\\!\\left(\\frac{v_{id}}{V_{T}}\\right).\n$$\n对于理想的尾电流源和可忽略的基极电流，有\n$$\nI_{C1} + I_{C2} = I_{EE}.\n$$\n令 $r \\equiv \\exp\\!\\left(\\frac{v_{id}}{V_{T}}\\right)$。解此方程组可得\n$$\nI_{C1} = \\frac{I_{EE} r}{1+r}, \\quad I_{C2} = \\frac{I_{EE}}{1+r}.\n$$\n静态电流为 $I_{EE}/2$。$I_{C1}$ 相对于静态值的偏离量为\n$$\nI_{C1} - \\frac{I_{EE}}{2} = I_{EE}\\!\\left(\\frac{r}{1+r} - \\frac{1}{2}\\right)\n= \\frac{I_{EE}}{2}\\,\\frac{r-1}{r+1}.\n$$\n使用恒等式 $\\tanh(x) = \\frac{\\exp(2x)-1}{\\exp(2x)+1}$ 并令 $r=\\exp\\!\\left(\\frac{v_{id}}{V_{T}}\\right) = \\exp(2x)$，其中 $x = \\frac{v_{id}}{2V_{T}}$，我们得到\n$$\nI_{C1} - \\frac{I_{EE}}{2} = \\frac{I_{EE}}{2}\\,\\tanh\\!\\left(\\frac{v_{id}}{2V_{T}}\\right),\n$$\n类似地，$I_{C2} - \\frac{I_{EE}}{2} = -\\frac{I_{EE}}{2}\\,\\tanh\\!\\left(\\frac{v_{id}}{2V_{T}}\\right)$。\n\n要求偏离量的绝对值不超过静态电流的 0.05，即\n$$\n\\left|\\tanh\\!\\left(\\frac{v_{id}}{2V_{T}}\\right)\\right| \\leq 0.05.\n$$\n因此，差分电压幅值的最大允许值为\n$$\n|v_{id}|_{\\max} = 2 V_{T}\\,\\arctanh(0.05)\n= 2 V_{T}\\,\\frac{1}{2}\\ln\\!\\left(\\frac{1+0.05}{1-0.05}\\right)\n= V_{T}\\,\\ln\\!\\left(\\frac{1.05}{0.95}\\right).\n$$\n当 $V_{T} = 25.0 \\text{ mV}$ 时，\n$$\n|v_{id}|_{\\max} \\approx 25.0 \\text{ mV} \\times \\ln(1.105263\\dots) \\approx 25.0 \\text{ mV} \\times 0.100084 \\approx 2.5021 \\text{ mV}.\n$$\n以毫伏为单位，并四舍五入到两位有效数字，\n$$\n|v_{id}|_{\\max} \\approx 2.5 \\text{ mV}.\n$$", "answer": "$$\\boxed{2.5}$$", "id": "1314159"}, {"introduction": "理想电路模型假设所有元件都是完美匹配的，但在现实世界中，制造公差导致元件参数存在差异。本练习将探讨这种不匹配造成的影响，特别是负载电阻的失配。通过分析在一个完美平衡的差分输入（$v_{id}=0$）下，由于负载电阻的微小差异而产生的非零差分输出电压，你将接触到“失调电压”这一在实际放大器设计中至关重要的性能指标 [@problem_id:1314125]。", "problem": "一位设计工程师正在分析一个由两个n沟道金属氧化物半导体场效应晶体管 (n-channel Metal-Oxide-Semiconductor Field-Effect Transistors, MOSFET) M1和M2构建的简单差分放大器级。该电路旨在用于一个高灵敏度的传感器接口，但一个已知的制造缺陷引入了不平衡。\n\n电路参数如下：\n- 两个MOSFET，M1和M2，在其他方面是完全匹配的。它们共享相同的工艺跨导参数 $k_n = 4.0 \\text{ mA/V}^2$ 和阈值电压 $V_{tn} = 0.50 \\text{ V}$。\n- 使用了正电源电压 $V_{DD} = 3.0 \\text{ V}$。\n- M1的漏极通过电阻 $R_{D1}$ 连接到 $V_{DD}$，M2的漏极通过电阻 $R_{D2}$ 连接到 $V_{DD}$。\n- 两个漏极电阻的标称设计值均为 $R_D = 5.0 \\text{ k}\\Omega$。然而，由于制造缺陷，$R_{D1}$ 的值正好是标称值，而 $R_{D2}$ 的值比标称值大10%。\n- 两个晶体管的公共源极端连接到一个理想的直流电流源，该电流源吸收的总电流为 $I_{SS} = 1.0 \\text{ mA}$。\n- 两个晶体管的栅极连接在一起，并接到一个公共的直流输入电压，导致差分输入电压为零，即 $v_{id} = v_{g1} - v_{g2} = 0$。\n- 假设两个晶体管都工作在饱和区，并且沟道长度调制效应可以忽略不计 ($\\lambda = 0$)。\n\n计算由此产生的直流差分输出电压，定义为 $v_{od} = v_{o1} - v_{o2}$，其中 $v_{o1}$ 和 $v_{o2}$ 分别是M1和M2漏极处的直流电压。以伏特 (V) 为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "问题要求计算一个漏极电阻不匹配的MOSFET差分对的直流差分输出电压 $v_{od} = v_{o1} - v_{o2}$。\n\n步骤1：分析漏极电流。\n给定的差分输入电压为零，$v_{id} = v_{g1} - v_{g2} = 0$。这意味着栅极电压相等，$v_{g1} = v_{g2}$。两个晶体管M1和M2共享一个公共源极连接，因此它们的源极端处于相同的电位 $v_s$。因此，它们的栅极-源极电压是相同的：\n$$v_{gs1} = v_{g1} - v_s = v_{g2} - v_s = v_{gs2}$$\n问题中指出，晶体管是完全匹配的，意味着它们具有相同的跨导参数 $k_n$ 和阈值电压 $V_{tn}$。由于假设它们处于饱和区，每个晶体管的漏极电流 $i_d$ 由平方律模型给出：\n$$i_d = \\frac{1}{2} k_n (v_{gs} - V_{tn})^2$$\n因为 $v_{gs1} = v_{gs2}$ 并且晶体管参数相同，所以它们的漏极电流也必须相等：\n$$i_{d1} = i_{d2}$$\n\n步骤2：在公共源极节点应用基尔霍夫电流定律 (KCL)。\n理想尾电流源 $I_{SS}$ 吸收两个漏极电流之和：\n$$I_{SS} = i_{d1} + i_{d2}$$\n将 $i_{d1} = i_{d2}$ 代入KCL方程，我们得到：\n$$I_{SS} = i_{d1} + i_{d1} = 2i_{d1}$$\n$$i_{d1} = i_{d2} = \\frac{I_{SS}}{2}$$\n给定 $I_{SS} = 1.0 \\text{ mA}$，每个晶体管的漏极电流为：\n$$i_{d1} = i_{d2} = \\frac{1.0 \\text{ mA}}{2} = 0.5 \\text{ mA}$$\n\n步骤3：计算漏极电阻的值。\n标称电阻为 $R_D = 5.0 \\text{ k}\\Omega$。\n电阻 $R_{D1}$ 的值为其标称值：\n$$R_{D1} = 5.0 \\text{ k}\\Omega$$\n电阻 $R_{D2}$ 的值比标称值大10%：\n$$R_{D2} = R_D \\times (1 + 0.10) = 5.0 \\text{ k}\\Omega \\times 1.10 = 5.5 \\text{ k}\\Omega$$\n\n步骤4：计算漏极处的各个直流输出电压。\n输出电压 $v_{o1}$ 和 $v_{o2}$ 是漏极电压，可以通过从电源电压 $V_{DD}$ 中减去相应漏极电阻上的电压降来求得。\n对于第一个输出，$v_{o1}$：\n$$v_{o1} = V_{DD} - i_{d1} R_{D1}$$\n代入已知值：$V_{DD} = 3.0 \\text{ V}$，$i_{d1} = 0.5 \\times 10^{-3} \\text{ A}$，以及 $R_{D1} = 5.0 \\times 10^3 \\text{ }\\Omega$。\n$$v_{o1} = 3.0 \\text{ V} - (0.5 \\times 10^{-3} \\text{ A}) \\times (5.0 \\times 10^3 \\text{ }\\Omega) = 3.0 \\text{ V} - 2.5 \\text{ V} = 0.5 \\text{ V}$$\n对于第二个输出，$v_{o2}$：\n$$v_{o2} = V_{DD} - i_{d2} R_{D2}$$\n代入已知值：$V_{DD} = 3.0 \\text{ V}$，$i_{d2} = 0.5 \\times 10^{-3} \\text{ A}$，以及 $R_{D2} = 5.5 \\times 10^3 \\text{ }\\Omega$。\n$$v_{o2} = 3.0 \\text{ V} - (0.5 \\times 10^{-3} \\text{ A}) \\times (5.5 \\times 10^3 \\text{ }\\Omega) = 3.0 \\text{ V} - 2.75 \\text{ V} = 0.25 \\text{ V}$$\n\n步骤5：计算差分输出电压。\n差分输出电压 $v_{od}$ 是 $v_{o1}$ 和 $v_{o2}$ 之间的差值：\n$$v_{od} = v_{o1} - v_{o2}$$\n$$v_{od} = 0.5 \\text{ V} - 0.25 \\text{ V} = 0.25 \\text{ V}$$\n\n或者，我们可以先用符号表示 $v_{od}$：\n$$v_{od} = (V_{DD} - i_{d1} R_{D1}) - (V_{DD} - i_{d2} R_{D2})$$\n由于 $i_{d1} = i_{d2} = I_{SS}/2$：\n$$v_{od} = i_{d2} R_{D2} - i_{d1} R_{D1} = \\frac{I_{SS}}{2} (R_{D2} - R_{D1})$$\n$$v_{od} = \\frac{1.0 \\text{ mA}}{2} (5.5 \\text{ k}\\Omega - 5.0 \\text{ k}\\Omega) = 0.5 \\text{ mA} \\times 0.5 \\text{ k}\\Omega = 0.25 \\text{ V}$$\n\n计算值为 $0.25 \\text{ V}$。四舍五入到三位有效数字，我们得到 $0.250 \\text{ V}$。", "answer": "$$\\boxed{0.250}$$", "id": "1314125"}]}
{"hands_on_practices": [{"introduction": "任何放大器的正常工作都始于正确的偏置。本练习聚焦于差分放大器的基础——尾电流源，它负责设定电路的静态工作点。通过分析一个简单的电流镜如何利用参考电流产生所需的偏置，你将掌握有效设计放大器的第一步 [@problem_id:1297270]。", "problem": "考虑一个带有源负载的金属氧化物半导体场效应晶体管 (MOSFET) 差分放大器电路。\n\n该放大器由一个尾电流源偏置，该电流源通过一个 NMOS 电流镜实现。该电流镜由一个参考晶体管 $M_{REF}$ 和一个尾晶体管 $M_3$ 组成。\n\n一个恒定的参考电流 $I_{REF}$ 被提供给晶体管 $M_{REF}$，该晶体管为二极管连接（即其栅极连接到其漏极）。尾晶体管 $M_3$ 的栅极连接到 $M_{REF}$ 的栅极，它们的源极连接到同一个低电位轨。$M_3$ 的漏极向差分对提供总尾电流 $I_{SS}$。\n\n差分对本身由两个完全匹配的 NMOS 晶体管 $M_1$ 和 $M_2$ 组成，它们的源极连接在一起并接到 $M_3$ 的漏极。对于本问题，放大器工作在其静态状态，此时 $M_1$ 和 $M_2$ 的栅极端子偏置在相同的直流电压下，导致差分输入信号为零。\n\n给定以下参数：\n- 参考电流，$I_{REF} = 30.0$ µA。\n- 参考晶体管的宽长比，$(W/L)_{REF} = 10$。\n- 尾晶体管的宽长比，$(W/L)_3 = 35$。\n\n假设所有晶体管都工作在饱和区，并且所有晶体管的沟道长度调制效应均可忽略不计。\n\n计算流经差分对晶体管之一（例如 $I_{D1}$）的静态漏极电流。您的答案应以微安（µA）为单位，并四舍五入到三位有效数字。", "solution": "问题要求计算 MOSFET 差分对中一个晶体管（$M_1$ 或 $M_2$）的静态漏极电流。电路处于静态工作状态，意味着差分输入电压为零（$v_{G1} = v_{G2}$）。\n\n首先，我们必须确定由晶体管 $M_3$ 提供的尾电流 $I_{SS}$。晶体管 $M_3$ 和参考晶体管 $M_{REF}$ 构成一个电流镜。电流 $I_{REF}$ 流过二极管连接的 $M_{REF}$，在其上建立一个栅源电压 $V_{GS}$。由于 $M_3$ 的栅极连接到 $M_{REF}$ 的栅极，并且它们的源极也连接在一起，所以两个晶体管共享相同的 $V_{GS}$。\n\n在饱和区工作（忽略沟道长度调制）的 MOSFET 的漏极电流由下式给出：\n$$\nI_D = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right) (V_{GS} - V_{th})^2\n$$\n其中 $k'_n$ 是工艺跨导参数，$W/L$ 是宽长比，$V_{GS}$ 是栅源电压，$V_{th}$ 是阈值电压。\n\n对于由 $M_{REF}$ 和 $M_3$ 构成的电流镜：\n参考电流是 $M_{REF}$ 的漏极电流：\n$$\nI_{REF} = I_{D,REF} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_{REF} (V_{GS} - V_{th})^2\n$$\n尾电流是 $M_3$ 的漏极电流：\n$$\nI_{SS} = I_{D3} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_3 (V_{GS} - V_{th})^2\n$$\n由于 $k'_n$、$V_{GS}$ 和 $V_{th}$ 对两个晶体管是相同的，我们可以求出它们的漏极电流之比：\n$$\n\\frac{I_{SS}}{I_{REF}} = \\frac{\\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_3 (V_{GS} - V_{th})^2}{\\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_{REF} (V_{GS} - V_{th})^2} = \\frac{(W/L)_3}{(W/L)_{REF}}\n$$\n这给出了简单电流镜的基本关系。尾电流 $I_{SS}$ 是参考电流 $I_{REF}$ 的一个缩放版本。\n\n现在我们可以使用给定的参数计算 $I_{SS}$ 的值：\n$I_{REF} = 30.0$ µA\n$(W/L)_{REF} = 10$\n$(W/L)_3 = 35$\n\n$$\nI_{SS} = I_{REF} \\times \\frac{(W/L)_3}{(W/L)_{REF}} = 30.0 \\text{ µA} \\times \\frac{35}{10} = 30.0 \\text{ µA} \\times 3.5 = 105 \\text{ µA}\n$$\n接下来，我们考虑差分对本身，它由晶体管 $M_1$ 和 $M_2$ 组成。它们的漏极电流之和必须等于由 $M_3$ 提供的尾电流：\n$$\nI_{D1} + I_{D2} = I_{SS}\n$$\n题目指出，差分对晶体管 $M_1$ 和 $M_2$ 是完全匹配的，并且在零差分输入电压（$v_{G1} = v_{G2}$）的静态状态下工作。由于这种对称性，尾电流 $I_{SS}$ 必须在两个晶体管之间平均分配。\n因此：\n$$\nI_{D1} = I_{D2} = \\frac{I_{SS}}{2}\n$$\n代入计算出的 $I_{SS}$ 值：\n$$\nI_{D1} = \\frac{105 \\text{ µA}}{2} = 52.5 \\text{ µA}\n$$\n问题要求计算其中一个晶体管的静态漏极电流，以微安（µA）为单位表示，并四舍五入到三位有效数字。我们计算出的值为 $52.5$ µA，它已经是正确的单位并且有三位有效数字。", "answer": "$$\\boxed{52.5}$$", "id": "1297270"}, {"introduction": "在放大器正确偏置后，下一步就是根据性能指标进行精细调整。本练习聚焦于一个核心设计任务：通过调整输入晶体管的尺寸，实现特定的跨导$G_m$——这个参数直接决定了放大器的电压增益。这个实践将晶体管的物理几何尺寸（$(W/L)$比）与电路的交流性能紧密联系起来 [@problem_id:1297240]。", "problem": "一位模拟电路设计师正在为一款新型运算放大器开发输入级。该输入级由一个 NMOS 差分对（$M_1$ 和 $M_2$）以及一个 PMOS 电流镜有源负载组成。该差分对由一个恒定的尾电流源 $I_{SS}$ 偏置。为满足放大器的整体增益指标，差分输入级必须达到一个特定的小信号差分跨导 $G_m$。\n\n假设两个输入 NMOS 晶体管完全相同，工作在饱和区，并且可以用平方律模型来描述，请确定这些输入晶体管所需的宽长比 $(W/L)$。忽略沟道长度调制效应（即，假设输出电阻 $r_o$ 为无穷大）和体效应。\n\n设计规格和工艺参数如下：\n- 所需差分跨导，$G_m = 1.00\\,\\text{mS}$（其中 $1\\,\\text{S} = 1\\,\\text{A/V}$）\n- 尾偏置电流，$I_{SS} = 200\\,\\mu\\text{A}$\n- NMOS 工艺跨导参数，$\\mu_n C_{ox} = 400\\,\\mu\\text{A/V}^2$\n\n计算所需的无量纲宽长比 $(W/L)$。", "solution": "对于一个工作在饱和区、使用平方律模型且忽略沟道长度调制和体效应的 NMOS，其漏极电流和跨导分别为\n$$\nI_{D}=\\frac{1}{2}\\mu_{n}C_{ox}\\frac{W}{L}V_{OV}^{2},\\qquad g_{m}=\\frac{\\partial I_{D}}{\\partial V_{GS}}=\\mu_{n}C_{ox}\\frac{W}{L}V_{OV}.\n$$\n在一个带有理想尾电流源的差分对中，每个晶体管承载的静态电流为\n$$\nI_{D}=\\frac{I_{SS}}{2}.\n$$\n在使用 PMOS 电流镜有源负载进行差分到单端转换的情况下，从差分输入到单端输出的小信号跨导等于单个输入晶体管的跨导，因此所需的 $g_{m}$ 等于指定的 $G_{m}$。\n\n在两个方程之间消去 $V_{OV}$，\n$$\nV_{OV}=\\frac{g_{m}}{\\mu_{n}C_{ox}\\frac{W}{L}},\n$$\n并代入 $I_{D}$ 的表达式，得到\n$$\nI_{D}=\\frac{1}{2}\\mu_{n}C_{ox}\\frac{W}{L}\\left(\\frac{g_{m}}{\\mu_{n}C_{ox}\\frac{W}{L}}\\right)^{2}=\\frac{1}{2}\\frac{g_{m}^{2}}{\\mu_{n}C_{ox}\\frac{W}{L}}.\n$$\n求解宽长比，\n$$\n\\frac{W}{L}=\\frac{g_{m}^{2}}{2\\mu_{n}C_{ox}I_{D}}=\\frac{G_{m}^{2}}{2\\mu_{n}C_{ox}\\left(\\frac{I_{SS}}{2}\\right)}=\\frac{G_{m}^{2}}{\\mu_{n}C_{ox}I_{SS}}.\n$$\n将给定值以科学记数法代入，\n$$\nG_{m}=1.00\\times 10^{-3},\\quad \\mu_{n}C_{ox}=4.00\\times 10^{-4},\\quad I_{SS}=2.00\\times 10^{-4},\n$$\n得\n$$\n\\frac{W}{L}=\\frac{(1.00\\times 10^{-3})^{2}}{(4.00\\times 10^{-4})(2.00\\times 10^{-4})}=\\frac{1.00\\times 10^{-6}}{8.00\\times 10^{-8}}=12.5.\n$$\n因此，所需的宽长比为 $12.5$（无量纲）。", "answer": "$$\\boxed{12.5}$$", "id": "1297240"}, {"introduction": "除了静态增益，放大器的速度也是一个至关重要的性能指标。最后一个练习将我们带入时域分析，研究放大器对阶跃输入的瞬态响应。通过将电路建模为单极点系统来估算其建立时间，你将学会如何量化放大器处理信号的速度，并将电路的小信号参数和寄生电容与其动态行为联系起来 [@problem_id:1297204]。", "problem": "一位集成电路设计师正在表征一个基本构建模块的瞬态响应：差分放大器。该放大器采用标准配置，由四个金属氧化物半导体场效应晶体管（MOSFET）构成。一个N沟道MOSFET（NMOS）差分对（M1, M2）构成输入级，一个P沟道MOSFET（PMOS）电流镜（M3, M4）用作有源负载。单端输出从M2的漏极取出，该漏极与M4的漏极相连。整个电路由一个理想尾电流源 $I_{SS}$ 偏置，其大小为 $200\\ \\mu\\text{A}$。所有晶体管都工作在饱和区。\n\n由制造工艺和偏置条件决定的相关小信号器件参数如下：\n- 对于NMOS晶体管（M1, M2）：沟道长度调制参数为 $\\lambda_n = 0.05\\ \\text{V}^{-1}$。\n- 对于PMOS晶体管（M3, M4）：沟道长度调制参数为 $\\lambda_p = 0.04\\ \\text{V}^{-1}$。\n\n输出节点上的总寄生电容，包括来自晶体管和互连线的贡献，被测得为 $C_L = 1.0\\ \\text{pF}$。\n\n在时间 $t=0$ 时，一个小的差分阶跃电压施加到输入端，导致输出电压发生变化。为分析放大器的速度，将其响应建模为单极点系统。计算1%建立时间，其定义为施加阶跃输入后，输出电压达到并保持在其最终值的1%以内所需的时间。\n\n答案以纳秒（ns）表示，并四舍五入到三位有效数字。", "solution": "将输出节点建模为具有时间常数 $\\tau = R_{\\text{out}} C_{L}$ 的单极点。对于一阶阶跃响应，误差以 $\\exp(-t/\\tau)$ 的形式衰减，因此稳定在最终值 $0.01$ 范围内的时间满足 $\\exp(-t_{1\\%}/\\tau) = 0.01$，因此\n$$\nt_{1\\%} = \\tau \\ln(100).\n$$\n\n在理想尾电流源和围绕对称偏置点的小信号工作条件下，差分对的每一侧承载的电流为 $I_{D} = I_{SS}/2$。M2（NMOS）和M4（PMOS）在饱和区的小信号输出电阻为\n$$\nr_{o,n} = \\frac{1}{\\lambda_{n} I_{D}} = \\frac{1}{\\lambda_{n} \\left( I_{SS}/2 \\right)} = \\frac{2}{\\lambda_{n} I_{SS}}, \\qquad\nr_{o,p} = \\frac{1}{\\lambda_{p} I_{D}} = \\frac{1}{\\lambda_{p} \\left( I_{SS}/2 \\right)} = \\frac{2}{\\lambda_{p} I_{SS}}.\n$$\n输出节点处的等效电阻是它们的并联组合：\n$$\nR_{\\text{out}} = \\frac{r_{o,n} \\, r_{o,p}}{r_{o,n} + r_{o,p}} = \\frac{2}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)}.\n$$\n因此，\n$$\n\\tau = R_{\\text{out}} C_{L} = \\frac{2 C_{L}}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)},\n\\quad\nt_{1\\%} = \\tau \\ln(100) = \\frac{2 C_{L} \\ln(100)}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)}.\n$$\n\n代入给定值 $C_{L} = 1.0 \\times 10^{-12}$，$I_{SS} = 200 \\times 10^{-6}$，$\\lambda_{n} = 0.05$ 和 $\\lambda_{p} = 0.04$：\n$$\nR_{\\text{out}} = \\frac{2}{(200 \\times 10^{-6})(0.05 + 0.04)} \\approx 1.11111 \\times 10^{5},\n$$\n$$\n\\tau = R_{\\text{out}} C_{L} \\approx (1.11111 \\times 10^{5})(1.0 \\times 10^{-12}) = 1.11111 \\times 10^{-7},\n$$\n$$\nt_{1\\%} = \\tau \\ln(100) \\approx (1.11111 \\times 10^{-7}) \\times \\ln(100) \\approx (1.11111 \\times 10^{-7}) \\times 4.605170 \\approx 5.11685 \\times 10^{-7}.\n$$\n转换为纳秒，得到 $t_{1\\%} \\approx 5.11685 \\times 10^{2}$ ns，四舍五入到三位有效数字为 $512$ ns。", "answer": "$$\\boxed{512}$$", "id": "1297204"}]}
{"hands_on_practices": [{"introduction": "任何电流镜电路的核心都在于其参考电流，该电流是所有镜像电流的模板。本练习将引导您完成设置参考电流 $I_{REF}$ 的基本设计过程，通过计算所需参考电阻 $R_{REF}$ 的值来实现。掌握这一计算是设计可预测且稳定的偏置电路的第一步。[@problem_id:1317765]", "problem": "一位模拟电路设计师的任务是设计一个稳定的电流源，用于驱动一个高效蓝色发光二极管 (LED)。该设计采用一个简单的电流镜，由两个相同的n沟道金属氧化物半导体场效应晶体管 (MOSFET) M1 和 M2 组成。整个电路由单一电源电压 $V_{DD}$ 供电。\n\n在此配置中，参考晶体管 M1 采用“二极管连接”方式，即其栅极和漏极相连。一个参考电阻 $R_{REF}$ 连接在电源电压 $V_{DD}$ 与 M1 相连的漏极和栅极之间。这种布置建立了一个参考电流 $I_{REF}$。第二个晶体管 M2 的栅极连接到 M1 的栅极，其源极接地，从而将参考电流 $I_{REF}$ 镜像为驱动 LED 的输出电流 $I_{OUT}$。\n\n假设两个 MOSFET 完全匹配，并工作在饱和区。沟道长度调制效应可以忽略不计（$\\lambda = 0$）。\n\n给定以下参数：\n- 电源电压, $V_{DD} = 3.3 \\text{ V}$\n- 目标参考电流, $I_{REF} = 150 \\text{ \\mu A}$\n- 工艺跨导参数, $k'_{n} = 100 \\text{ \\mu A/V}^{2}$\n- 晶体管宽高比, $W/L = 10$\n- 阈值电压, $V_{tn} = 0.7 \\text{ V}$\n\n计算建立目标参考电流所需的参考电阻 $R_{REF}$ 的值。答案以千欧姆 (k$\\Omega$) 为单位，并保留三位有效数字。", "solution": "对于一个工作在饱和区且沟道长度调制效应可忽略不计的二极管连接NMOS，其参考电流由以下平方律关系式给出\n$$\nI_{REF}=\\frac{1}{2}k'_{n}\\left(\\frac{W}{L}\\right)\\left(V_{GS}-V_{tn}\\right)^{2}.\n$$\n求解栅源电压 $V_{GS}$，可得\n$$\nV_{GS}=V_{tn}+\\sqrt{\\frac{2I_{REF}}{k'_{n}\\left(\\frac{W}{L}\\right)}}.\n$$\n电阻 $R_{REF}$ 上的压降为电源电压与栅/漏节点电压之差，因此根据欧姆定律，\n$$\nI_{REF}=\\frac{V_{DD}-V_{GS}}{R_{REF}}\\quad\\Rightarrow\\quad R_{REF}=\\frac{V_{DD}-V_{GS}}{I_{REF}}.\n$$\n代入 $V_{GS}$ 的表达式，\n$$\nR_{REF}=\\frac{V_{DD}-V_{tn}-\\sqrt{\\frac{2I_{REF}}{k'_{n}\\left(\\frac{W}{L}\\right)}}}{I_{REF}}.\n$$\n现在将给定的数值代入（使用国际单位制）：$V_{DD}=3.3$，$V_{tn}=0.7$，$I_{REF}=1.5\\times 10^{-4}$，$k'_{n}=1.0\\times 10^{-4}$ 以及 $\\frac{W}{L}=10$。首先计算过驱动项：\n$$\n\\sqrt{\\frac{2I_{REF}}{k'_{n}\\left(\\frac{W}{L}\\right)}}=\\sqrt{\\frac{2\\left(1.5\\times 10^{-4}\\right)}{\\left(1.0\\times 10^{-4}\\right)\\left(10\\right)}}=\\sqrt{0.3}\\approx 0.547722558.\n$$\n因此，\n$$\nV_{GS}=0.7+0.547722558\\approx 1.247722558,\n$$\n以及\n$$\nR_{REF}=\\frac{3.3-1.247722558}{1.5\\times 10^{-4}}\\approx \\frac{2.052277442}{1.5\\times 10^{-4}}\\approx 1.36818496\\times 10^{4}\\ \\text{ohms}.\n$$\n以千欧姆为单位并保留三位有效数字，\n$$\nR_{REF}\\approx 13.7\\ \\text{k}\\Omega.\n$$\n该设计也满足二极管连接器件的饱和条件，因为根据其结构 $V_{DS}=V_{GS}$，而 $V_{GS}>V_{GS}-V_{tn}$。", "answer": "$$\\boxed{13.7}$$", "id": "1317765"}, {"introduction": "简单的电流镜不仅能复制电流，还能对其进行放大或缩小，这是模拟集成电路设计中的一项强大技术。本练习将探讨如何通过调整晶体管的宽长比 $(W/L)$ 来实现非单位增益的电流镜像。您还将面对一个关键的非理想效应——沟道长度调制效应 ($\\lambda$)，并学习如何量化它对电流镜像精度的影响。[@problem_id:1317760]", "problem": "一位模拟电路设计师正在使用两个采用相同工艺制造的N沟道金属氧化物半导体（NMOS）晶体管 $M_1$ 和 $M_2$ 来实现一个基本的电流镜。在该电流镜配置中，$M_1$ 是二极管连接的（其栅极和漏极连接在一起），并由一个参考电流 $I_{REF}$ 供电。$M_1$ 和 $M_2$ 的栅极端子连接到同一个节点，它们的源极都接地。流经 $M_2$ 漏极的电流是输出电流 $I_{OUT}$。\n\n设计规格和工艺参数如下：\n- 参考电流, $I_{REF} = 100 \\text{ } \\mu \\text{A}$\n- 工艺跨导参数, $\\mu_n C_{ox} = 200 \\text{ } \\mu \\text{A}/\\text{V}^2$\n- 阈值电压, $V_{th} = 0.5 \\text{ } \\text{V}$\n- 沟道长度调制参数, $\\lambda = 0.05 \\text{ } \\text{V}^{-1}$\n- 参考晶体管 $M_1$ 的宽高比, $(W/L)_1 = 10$\n- 输出晶体管 $M_2$ 的漏极连接到一个负载，该负载维持一个恒定电压 $V_{D2} = 1.8 \\text{ } \\text{V}$。\n\n设计目标是使输出电流为参考电流的一半，即 $I_{OUT} = 0.5 I_{REF}$。假设两个晶体管都工作在饱和区，计算晶体管 $M_2$ 所需的宽高比 $(W/L)_2$。以无量纲数的形式表示您的答案，并四舍五入到三位有效数字。", "solution": "题目要求我们在考虑沟道长度调制效应的情况下，计算NMOS电流镜中输出晶体管 $M_2$ 的宽高比 $(W/L)_2$。\n\n首先，我们写出工作在饱和区的NMOS晶体管的漏极电流方程，其中包含沟道长度调制效应：\n$$I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} (V_{GS} - V_{th})^2 (1 + \\lambda V_{DS})$$\n栅源电压 $V_{GS}$ 对两个晶体管是相同的，由参考晶体管 $M_1$ 设定。对于晶体管 $M_1$，漏极电流为 $I_{D1} = I_{REF}$，并且由于它是二极管连接的，其漏源电压等于其栅源电压，即 $V_{DS1} = V_{GS}$。\n\n因此，$I_{REF}$ 的完整方程为：\n$$I_{REF} = \\frac{1}{2} \\mu_n C_{ox} (W/L)_1 (V_{GS} - V_{th})^2 (1 + \\lambda V_{GS})$$\n直接求解该方程以得到 $V_{GS}$ 将涉及求解一个三次多项式。在入门分析中，一种标准且足够精确的方法是首先忽略 $(1 + \\lambda V_{GS})$ 项来计算 $V_{GS}$ 的近似值，因为 $\\lambda$ 通常很小。\n\n所以，我们首先使用简化方程来找到 $V_{GS}$ 的近似值：\n$$I_{REF} \\approx \\frac{1}{2} \\mu_n C_{ox} (W/L)_1 (V_{GS} - V_{th})^2$$\n代入给定值：\n$$100 \\times 10^{-6} \\text{ A} = \\frac{1}{2} (200 \\times 10^{-6} \\text{ A/V}^2) (10) (V_{GS} - 0.5 \\text{ V})^2$$\n$$100 \\times 10^{-6} = (1000 \\times 10^{-6}) (V_{GS} - 0.5)^2$$\n$$(V_{GS} - 0.5)^2 = \\frac{100 \\times 10^{-6}}{1000 \\times 10^{-6}} = 0.1$$\n对两边取平方根（并选择正根，因为晶体管导通需要 $V_{GS}$ 大于 $V_{th}$）：\n$$V_{GS} - 0.5 = \\sqrt{0.1} \\approx 0.31623 \\text{ V}$$\n$$V_{GS} \\approx 0.5 + 0.31623 = 0.81623 \\text{ V}$$\n我们应该检查两个晶体管是否都在饱和区。过驱动电压为 $V_{OV} = V_{GS} - V_{th} \\approx 0.31623$ V。对于 $M_1$，$V_{DS1} = V_{GS} \\approx 0.81623 \\text{ V}$。由于 $V_{DS1} > V_{OV}$，$M_1$ 处于饱和区。对于 $M_2$，$V_{DS2} = V_{D2} = 1.8 \\text{ V}$。由于 $V_{DS2} > V_{OV}$，$M_2$ 也处于饱和区。\n\n现在我们可以使用这个计算出的 $V_{GS}$ 值，写出两个晶体管包含沟道长度调制项的完整电流方程。\n对于 $M_1$：\n$$I_{REF} = \\frac{1}{2} \\mu_n C_{ox} (W/L)_1 (V_{GS} - V_{th})^2 (1 + \\lambda V_{GS})$$\n对于 $M_2$，漏极电流为 $I_{OUT}$，漏源电压为 $V_{DS2} = V_{D2} = 1.8 \\text{ V}$：\n$$I_{OUT} = \\frac{1}{2} \\mu_n C_{ox} (W/L)_2 (V_{GS} - V_{th})^2 (1 + \\lambda V_{D2})$$\n为了找出两个电流及其宽高比之间的关系，我们求 $I_{OUT}$ 与 $I_{REF}$ 的比值：\n$$\\frac{I_{OUT}}{I_{REF}} = \\frac{\\frac{1}{2} \\mu_n C_{ox} (W/L)_2 (V_{GS} - V_{th})^2 (1 + \\lambda V_{D2})}{\\frac{1}{2} \\mu_n C_{ox} (W/L)_1 (V_{GS} - V_{th})^2 (1 + \\lambda V_{GS})}$$\n公共项 $\\frac{1}{2} \\mu_n C_{ox} (V_{GS} - V_{th})^2$ 被消去，剩下：\n$$\\frac{I_{OUT}}{I_{REF}} = \\frac{(W/L)_2}{(W/L)_1} \\frac{1 + \\lambda V_{D2}}{1 + \\lambda V_{GS}}$$\n我们需要求解 $(W/L)_2$：\n$$(W/L)_2 = (W/L)_1 \\left( \\frac{I_{OUT}}{I_{REF}} \\right) \\left( \\frac{1 + \\lambda V_{GS}}{1 + \\lambda V_{D2}} \\right)$$\n现在我们将已知值代入此表达式：$(W/L)_1 = 10$，$I_{OUT}/I_{REF} = 0.5$，$\\lambda = 0.05 \\text{ V}^{-1}$，$V_{GS} \\approx 0.81623 \\text{ V}$，以及 $V_{D2} = 1.8 \\text{ V}$。\n$$(W/L)_2 = 10 \\times 0.5 \\times \\frac{1 + (0.05)(0.81623)}{1 + (0.05)(1.8)}$$\n$$(W/L)_2 = 5 \\times \\frac{1 + 0.0408115}{1 + 0.09}$$\n$$(W/L)_2 = 5 \\times \\frac{1.0408115}{1.09}$$\n$$(W/L)_2 = 5 \\times 0.9548729...$$\n$$(W/L)_2 = 4.77436...$$\n根据题目要求，将结果四舍五入到三位有效数字：\n$$(W/L)_2 \\approx 4.77$$", "answer": "$$\\boxed{4.77}$$", "id": "1317760"}, {"introduction": "作为电流源，电流镜只有在特定的输出电压范围内才能稳定工作。本练习将挑战您分析当输出电压过低，导致输出晶体管进入三极管区（或线性区）时电路的行为。理解这一被称为输出顺从电压的限制，对于确保电路在实际负载条件下正常工作至关重要，也是评估电流源性能的关键指标。[@problem_id:1317772]", "problem": "一个简单的电流镜电路由两个N沟道金属氧化物半导体（NMOS）晶体管构成，分别表示为$M_1$和$M_2$。两个晶体管的栅极连接在一起，它们的源极接地。参考晶体管$M_1$的漏极与其栅极相连，该节点由参考电流$I_{REF}$供电。输出电流$I_{OUT}$从输出晶体管$M_2$的漏极汲取。\n\n晶体管的特性参数如下：\n-   阈值电压：$V_{th} = 0.50 \\text{ V}$\n-   工艺跨导参数：$k'_n = 200 \\text{ } \\mu\\text{A/V}^2$\n-   $M_1$的宽长比：$(W/L)_1 = 10$\n-   $M_2$的宽长比：$(W/L)_2 = 20$\n-   参考电流：$I_{REF} = 90 \\text{ } \\mu\\text{A}$\n\n该电流镜的输出连接到一个负载，该负载将$M_2$的漏极电压固定在$V_{OUT} = 0.20 \\text{ V}$。在此分析中，您必须假设两个晶体管的沟道长度调制效应均可忽略不计。\n\n计算输出电流$I_{OUT}$的值。以微安（$\\mu\\text{A}$）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "题目要求计算一个输出电压已指定的NMOS电流镜的输出电流$I_{OUT}$。我们需要确定每个晶体管的工作区，以便使用正确的电流-电压方程。\n\n首先，我们分析参考晶体管$M_1$。$M_1$的漏极和栅极相连，这意味着其漏源电压等于其栅源电压，即$V_{DS1} = V_{GS1}$。当$V_{DS} \\ge V_{GS} - V_{th}$时，晶体管工作在饱和区。对于$M_1$，此条件变为$V_{GS1} \\ge V_{GS1} - V_{th}$，简化为$0 \\ge -V_{th}$。由于阈值电压$V_{th}$为正值（$0.50 \\text{ V}$），此条件始终满足。因此，$M_1$工作在饱和区。\n\n在饱和区（忽略沟道长度调制效应）的NMOS晶体管的漏极电流由下式给出：\n$$I_D = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right) (V_{GS} - V_{th})^2$$\n对于$M_1$，其漏极电流是参考电流，即$I_{D1} = I_{REF}$。我们可以用这个关系来求得栅源电压$V_{GS1}$。\n$$I_{REF} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_1 (V_{GS1} - V_{th})^2$$\n整理方程求解$V_{GS1}$：\n$$V_{GS1} = V_{th} + \\sqrt{\\frac{2 I_{REF}}{k'_n (W/L)_1}}$$\n代入给定值：\n$I_{REF} = 90 \\text{ } \\mu\\text{A} = 90 \\times 10^{-6} \\text{ A}$\n$k'_n = 200 \\text{ } \\mu\\text{A/V}^2 = 200 \\times 10^{-6} \\text{ A/V}^2$\n$(W/L)_1 = 10$\n$V_{th} = 0.50 \\text{ V}$\n$$V_{GS1} = 0.50 + \\sqrt{\\frac{2 \\times 90 \\times 10^{-6}}{200 \\times 10^{-6} \\times 10}} = 0.50 + \\sqrt{\\frac{180 \\times 10^{-6}}{2000 \\times 10^{-6}}}$$\n$$V_{GS1} = 0.50 + \\sqrt{0.09} = 0.50 + 0.30 = 0.80 \\text{ V}$$\n\n由于$M_1$和$M_2$的栅极相连，它们的栅源电压相等：$V_{GS2} = V_{GS1} = 0.80 \\text{ V}$。\n\n现在，我们来确定输出晶体管$M_2$的工作区。我们需要比较其漏源电压$V_{DS2}$和其过驱动电压$V_{OV2} = V_{GS2} - V_{th}$。\n$V_{OV2} = 0.80 \\text{ V} - 0.50 \\text{ V} = 0.30 \\text{ V}$。\n题目说明输出电压为$V_{OUT} = 0.20 \\text{ V}$，这对应于$M_2$的漏源电压，所以$V_{DS2} = 0.20 \\text{ V}$。\n\n$M_2$处于饱和区的条件是$V_{DS2} \\ge V_{GS2} - V_{th}$，或者$V_{DS2} \\ge V_{OV2}$。\n在这里，我们有$0.20 \\text{ V} < 0.30 \\text{ V}$。由于$V_{DS2} < V_{OV2}$，晶体管$M_2$不处于饱和区。它工作在线性区或三极管区。\n\n在三极管区的NMOS晶体管的漏极电流由下式给出：\n$$I_D = k'_n \\left(\\frac{W}{L}\\right) \\left[ (V_{GS} - V_{th})V_{DS} - \\frac{1}{2}V_{DS}^2 \\right]$$\n输出电流$I_{OUT}$是$M_2$的漏极电流，所以$I_{OUT} = I_{D2}$。我们可以用$M_2$的已知值来计算它：\n$k'_n = 200 \\times 10^{-6} \\text{ A/V}^2$\n$(W/L)_2 = 20$\n$V_{GS2} = 0.80 \\text{ V}$\n$V_{th} = 0.50 \\text{ V}$\n$V_{DS2} = 0.20 \\text{ V}$\n$$I_{OUT} = (200 \\times 10^{-6}) \\times 20 \\times \\left[ (0.80 - 0.50)(0.20) - \\frac{1}{2}(0.20)^2 \\right]$$\n$$I_{OUT} = (4000 \\times 10^{-6}) \\times \\left[ (0.30)(0.20) - \\frac{1}{2}(0.04) \\right]$$\n$$I_{OUT} = (4.0 \\times 10^{-3}) \\times \\left[ 0.060 - 0.020 \\right]$$\n$$I_{OUT} = (4.0 \\times 10^{-3}) \\times [0.040]$$\n$$I_{OUT} = 0.160 \\times 10^{-3} \\text{ A}$$\n要以微安（$\\mu\\text{A}$）表示答案，我们乘以$10^6$：\n$$I_{OUT} = 0.160 \\times 10^{-3} \\times 10^6 \\text{ } \\mu\\text{A} = 160 \\text{ } \\mu\\text{A}$$\n结果是$160 \\text{ } \\mu\\text{A}$。题目要求答案四舍五入到三位有效数字。数字160正好有三位有效数字。", "answer": "$$\\boxed{160}$$", "id": "1317772"}]}
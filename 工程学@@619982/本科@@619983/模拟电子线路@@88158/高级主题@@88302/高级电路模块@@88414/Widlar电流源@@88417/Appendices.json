{"hands_on_practices": [{"introduction": "本练习将引导你完成韦德拉电流源（Widlar Current Source）最基本的设计计算。为了从一个较大的参考电流 $I_{REF}$ 中获得一个稳定且微小的输出电流 $I_{OUT}$，发射极电阻 $R_E$ 的取值至关重要。通过这个实践，你将学会如何精确计算出实现特定电流比所需的 $R_E$ 值，从而巩固对韦德拉电流源核心方程的理解 [@problem_id:1341657]。", "problem": "一位模拟集成电路设计师的任务是为一个运算放大器的输入级创建一个低电流偏置源。为了从一个较大且更易于产生的参考电流中获得一个稳定的小输出电流，采用了韦德拉电流源。\n\n该电路由两个在正向有源区工作的完全匹配的NPN型双极结型晶体管（BJT）$Q_1$和$Q_2$组成。参考晶体管$Q_1$的基极和集电极连接在一起。一个参考电流$I_{REF}$被馈入此公共节点。输出晶体管$Q_2$的基极连接到$Q_1$的基极。一个发射极电阻$R_E$放置在$Q_2$的发射极与公共地线之间，公共地线也连接到$Q_1$的发射极。$Q_2$的集电极提供所需的输出电流$I_{OUT}$。\n\n对于此设计，请假设基极电流与集电极电流相比可以忽略不计。参考电流设为$I_{REF} = 1.00 \\text{ mA}$，所需输出电流为$I_{OUT} = 10.0\\,\\mu\\text{A}$。电路工作温度下的热电压为$V_T = 26.0 \\text{ mV}$。\n\n计算为实现此电流比所需的发射极电阻$R_E$的阻值。以千欧（$\\text{k}\\Omega$）为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "因为晶体管是匹配的，工作在正向有源区，且基极电流可以忽略不计，所以我们可以认为$I_{C1} \\approx I_{E1} = I_{REF}$和$I_{C2} \\approx I_{E2} = I_{OUT}$。对于工作在正向有源区的BJT，集电极电流和基极-发射极电压满足关系式$I_{C} = I_{S} \\exp\\!\\left(\\frac{V_{BE}}{V_{T}}\\right)$，这意味着\n$$\nV_{BE} = V_{T} \\ln\\!\\left(\\frac{I_{C}}{I_{S}}\\right).\n$$\n由于基极连接在一起，$Q_{2}$的发射极因电阻$R_{E}$的存在而电位升高，电阻$R_{E}$上的电压等于基极-发射极电压之差：\n$$\nV_{R_{E}} = V_{BE1} - V_{BE2}.\n$$\n使用上面$V_{BE}$的表达式，并代入$I_{C1} = I_{REF}$和$I_{C2} = I_{OUT}$，\n$$\nV_{BE1} - V_{BE2} = V_{T} \\ln\\!\\left(\\frac{I_{REF}}{I_{S}}\\right) - V_{T} \\ln\\!\\left(\\frac{I_{OUT}}{I_{S}}\\right) = V_{T} \\ln\\!\\left(\\frac{I_{REF}}{I_{OUT}}\\right).\n$$\n在基极电流可以忽略不计的情况下，$I_{E2} \\approx I_{OUT}$，因此电阻满足\n$$\nR_{E} = \\frac{V_{R_{E}}}{I_{E2}} = \\frac{V_{T} \\ln\\!\\left(\\frac{I_{REF}}{I_{OUT}}\\right)}{I_{OUT}}.\n$$\n代入给定值$V_{T} = 26.0 \\text{ mV}$，$I_{REF} = 1.00 \\text{ mA}$和$I_{OUT} = 10.0\\,\\mu\\text{A}$，\n$$\nR_{E} = \\frac{26.0 \\times 10^{-3}}{10.0 \\times 10^{-6}} \\ln(100)\\,\\Omega = 2600 \\ln(100)\\,\\Omega.\n$$\n因为$\\ln(100) = 2 \\ln(10) \\approx 4.605170$，我们得到\n$$\nR_{E} \\approx 2600 \\times 4.605170\\,\\Omega \\approx 11973.4\\,\\Omega = 11.9734\\,\\text{k}\\Omega.\n$$\n以千欧为单位，并四舍五入到三位有效数字，结果是$12.0\\,\\text{k}\\Omega$。", "answer": "$$\\boxed{12.0}$$", "id": "1341657"}, {"introduction": "在真实的电路设计中，原型很少能一次成功，因此故障诊断是工程师必备的关键技能。本问题模拟了一个实际场景：一个韦德拉电流源的输出不符合设计预期，你需要像一名电路侦探一样找出故障所在。通过分析不同元件值的变化如何影响输出电流，你将锻炼自己的诊断推理能力，并加深对电路行为的直观感受 [@problem_id:1341621]。", "problem": "一名电子专业的学生正在搭建一个韦德拉电流源，这是一种设计用于产生一个微小、稳定输出电流的电路。该设计使用了两个匹配的双极结型晶体管 (BJT)，分别为 $Q_1$ 和 $Q_2$。电路由一个 $V_{CC} = 12\\,\\text{V}$ 的电源电压供电。参考电流由一个电阻 $R_1 = 22\\,\\text{k}\\Omega$ 设定，该电阻连接在电源电压 $V_{CC}$ 和二极管连接的晶体管 $Q_1$ 的集电极之间。输出电流 $I_{OUT}$ 是 $Q_2$ 的集电极电流，$Q_2$ 带有一个发射极电阻 $R_2 = 1.0\\,\\text{k}\\Omega$。\n\n设计目标是产生一个稳定的微安级别的电流。在测试原型时，该学生测量到输出电流为 $I_{OUT} = 18\\,\\mu\\text{A}$，这远低于预期的设计值。怀疑是某个元件的数值安装错误，该学生考虑了以下几种可能性。\n\n对于所有计算，为了计算参考电流，假设参考晶体管的基极-发射极电压恒定为 $V_{BE1} = 0.7\\,\\text{V}$。热电压为 $V_T = 25\\,\\text{mV}$，且基极电流可以忽略不计。\n\n以下哪种单一元件故障可以解释这个测量结果？\n\nA. 电阻 $R_1$ 被错误地替换成了 $33\\,\\text{k}\\Omega$ 的电阻。\n\nB. 电阻 $R_1$ 被错误地替换成了 $15\\,\\text{k}\\Omega$ 的电阻。\n\nC. 电阻 $R_2$ 被错误地替换成了 $4.7\\,\\text{k}\\Omega$ 的电阻。\n\nD. 电阻 $R_2$ 被错误地替换成了 $470\\,\\Omega$ 的电阻。\n\nE. 电源电压 $V_{CC}$ 漂移下降到了 $10\\,\\text{V}$。", "solution": "问题要求我们确定在给出的单一元件故障中，哪一个会导致韦德拉电流源的输出电流为 $I_{OUT} = 18\\,\\mu\\text{A}$。为此，我们将首先分析原始设计的电路，然后评估每种假定故障的影响。\n\n韦德拉电流源的核心方程通过发射极电阻 $R_2$ 和热电压 $V_T$ 将参考电流 ($I_{REF}$) 和输出电流 ($I_{OUT}$) 联系起来。参考晶体管 $Q_1$ 和输出晶体管 $Q_2$ 是匹配的。通过 $Q_1$ 和 $Q_2$ 的基极-发射极结的基尔霍夫电压定律 (KVL) 回路可得：\n$V_{BE1} = V_{BE2} + I_{E2}R_2$\n\n假设晶体管具有高 β 值，发射极电流 $I_{E2}$ 约等于集电极电流 $I_{C2}$，也就是输出电流 $I_{OUT}$。\n$I_{E2} \\approx I_{OUT}$\n因此，$V_{BE1} - V_{BE2} = I_{OUT}R_2$。\n\n基极-发射极电压通过二极管方程与集电极电流相关：\n$V_{BE} = V_T \\ln\\left(\\frac{I_C}{I_S}\\right)$，其中 $I_S$ 是饱和电流。\n对于两个匹配的晶体管，$I_S$ 是相同的。因此：\n$V_{BE1} - V_{BE2} = V_T \\ln\\left(\\frac{I_{C1}}{I_S}\\right) - V_T \\ln\\left(\\frac{I_{C2}}{I_S}\\right) = V_T \\ln\\left(\\frac{I_{C1}}{I_{C2}}\\right)$\n\n由于 $Q_1$ 是二极管连接，其集电极电流 $I_{C1}$ 约等于参考电流 $I_{REF}$（忽略微小的基极电流）。\n$I_{C1} \\approx I_{REF}$\n且 $I_{C2} = I_{OUT}$。\n合并这些方程得到韦德拉电流源的基本方程：\n$I_{OUT}R_2 = V_T \\ln\\left(\\frac{I_{REF}}{I_{OUT}}\\right)$\n\n参考电流 $I_{REF}$ 由电源电压 $V_{CC}$ 和电阻 $R_1$ 设定。\n$I_{REF} = \\frac{V_{CC} - V_{BE1}}{R_1}$\n\n首先，我们计算原始设计的预期 $I_{REF}$。\n给定：$V_{CC} = 12\\,\\text{V}$，$R_1 = 22\\,\\text{k}\\Omega$，$V_{BE1} = 0.7\\,\\text{V}$。\n$I_{REF} = \\frac{12\\,\\text{V} - 0.7\\,\\text{V}}{22\\,\\text{k}\\Omega} = \\frac{11.3\\,\\text{V}}{22 \\times 10^3\\,\\Omega} \\approx 0.5136\\,\\text{mA}$\n\n现在，我们评估每个选项，看哪一个能得出 $I_{OUT} = 18\\,\\mu\\text{A}$。\n\n**A. 电阻 $R_1$ 被错误地替换成了 $33\\,\\text{k}\\Omega$ 的电阻。**\n如果 $R_1 = 33\\,\\text{k}\\Omega$，参考电流会改变。其他参数（$R_2 = 1.0\\,\\text{k}\\Omega$，$V_{CC}=12\\,\\text{V}$）与设计值相同。\n新的参考电流：$I_{REF}' = \\frac{12\\,\\text{V} - 0.7\\,\\text{V}}{33\\,\\text{k}\\Omega} = \\frac{11.3\\,\\text{V}}{33 \\times 10^3\\,\\Omega} \\approx 0.3424\\,\\text{mA}$。\n我们现在使用韦德拉方程求解由此产生的 $I_{OUT}'$：\n$I_{OUT}' \\cdot (1.0\\,\\text{k}\\Omega) = (25\\,\\text{mV}) \\ln\\left(\\frac{0.3424\\,\\text{mA}}{I_{OUT}'}\\right)$\n我们可以检验 $I_{OUT}' = 18\\,\\mu\\text{A}$ 是否满足此方程。\nLHS = $(18 \\times 10^{-6}\\,\\text{A}) \\cdot (1000\\,\\Omega) = 18\\,\\text{mV}$。\nRHS = $(25\\,\\text{mV}) \\ln\\left(\\frac{0.3424 \\times 10^{-3}\\,\\text{A}}{18 \\times 10^{-6}\\,\\text{A}}\\right) = (25\\,\\text{mV}) \\ln(19.02) \\approx (25\\,\\text{mV}) \\cdot 2.946 = 73.6\\,\\text{mV}$。\nLHS ($18\\,\\text{mV}$) $\\neq$ RHS ($73.6\\,\\text{mV}$)。所以，这个故障不能解释测量结果。\n\n**B. 电阻 $R_1$ 被错误地替换成了 $15\\,\\text{k}\\Omega$ 的电阻。**\n$R_1$ 的减小会增加 $I_{REF}$，从而增加 $I_{OUT}$。这与观测到的效应（电流低于预期）相反，所以这个选项是错误的。\n\n**C. 电阻 $R_2$ 被错误地替换成了 $4.7\\,\\text{k}\\Omega$ 的电阻。**\n在这种情况下，$R_2 = 4.7\\,\\text{k}\\Omega$。参考电流为原始设计值，$I_{REF} = 0.5136\\,\\text{mA}$。\n我们必须检查这个故障是否会导致 $I_{OUT} = 18\\,\\mu\\text{A}$。\n方程为：$(18\\,\\mu\\text{A}) \\cdot R_2' = (25\\,\\text{mV}) \\ln\\left(\\frac{0.5136\\,\\text{mA}}{18\\,\\mu\\text{A}}\\right)$。我们来检验等式是否成立：\nLHS = $(18 \\times 10^{-6}\\,\\text{A}) \\cdot (4.7 \\times 10^3\\,\\Omega) = 84.6\\,\\text{mV}$。\nRHS = $(25\\,\\text{mV}) \\ln\\left(\\frac{0.5136 \\times 10^{-3}\\,\\text{A}}{18 \\times 10^{-6}\\,\\text{A}}\\right) = (25\\,\\text{mV}) \\ln(28.53) \\approx (25\\,\\text{mV}) \\cdot 3.351 = 83.8\\,\\text{mV}$。\nLHS ($84.6\\,\\text{mV}$) 与 RHS ($83.8\\,\\text{mV}$) 非常接近。微小的差异是由于计算中的四舍五入和简化模型造成的。这是一个非常好的匹配。\n\n**D. 电阻 $R_2$ 被错误地替换成了 $470\\,\\Omega$ 的电阻。**\n为了在韦德拉方程中保持平衡，$R_2$ 的减小会增加 $I_{OUT}$。这与观测到的效应相反，所以这个选项是错误的。\n\n**E. 电源电压 $V_{CC}$ 漂移下降到了 $10\\,\\text{V}$。**\n如果 $V_{CC} = 10\\,\\text{V}$，参考电流会改变。电阻值为其设计值（$R_1 = 22\\,\\text{k}\\Omega$，$R_2=1.0\\,\\text{k}\\Omega$）。\n新的参考电流：$I_{REF}'' = \\frac{10\\,\\text{V} - 0.7\\,\\text{V}}{22\\,\\text{k}\\Omega} = \\frac{9.3\\,\\text{V}}{22 \\times 10^3\\,\\Omega} \\approx 0.4227\\,\\text{mA}$。\n我们检验这是否会导致 $I_{OUT} = 18\\,\\mu\\text{A}$。\nLHS = $(18 \\times 10^{-6}\\,\\text{A}) \\cdot (1000\\,\\Omega) = 18\\,\\text{mV}$。\nRHS = $(25\\,\\text{mV}) \\ln\\left(\\frac{0.4227 \\times 10^{-3}\\,\\text{A}}{18 \\times 10^{-6}\\,\\text{A}}\\right) = (25\\,\\text{mV}) \\ln(23.48) \\approx (25\\,\\text{mV}) \\cdot 3.156 = 78.9\\,\\text{mV}$。\nLHS ($18\\,\\text{mV}$) $\\neq$ RHS ($78.9\\,\\text{mV}$)。所以，这个故障不能解释测量结果。\n\n根据计算，唯一能在数量上解释测量到的 $18\\,\\mu\\text{A}$ 输出电流的故障是为 $R_2$ 错误地安装了 $4.7\\,\\text{k}\\Omega$ 的电阻。", "answer": "$$\\boxed{C}$$", "id": "1341621"}, {"introduction": "极限条件下的思想实验是理解电路中单个元件功能的有力工具。在本练习中，我们将探讨一种关键的故障模式——发射极电阻 $R_E$ 被意外短路。通过分析这种假设情况，你将看到电路的行为会发生何种根本性转变，并更清晰地认识到为何 $R_E$ 对于韦德拉电流源实现电流缩减功能是不可或缺的 [@problem_id:1341633]。", "problem": "一位电子工程师正在设计一个韦德拉电流源，为一个敏感的放大器级产生一个小的、稳定的偏置电流。该设计使用了两个具有共基极连接的匹配双极结型晶体管 (BJT)。电路的参考侧被提供 $I_{REF} = 1.20 \\text{ mA}$ 的参考电流。该电路被专门设计用于产生一个非常小的输出电流 $I_{OUT,design} = 15.0\\,\\mu\\text{A}$。晶体管工作在恒定温度下，其热电压为 $V_T = 26.0 \\text{ mV}$。在本分析中，假设晶体管工作在正向有源区，并具有高电流增益 ($\\beta \\gg 1$)，这允许我们近似认为集电极电流等于发射极电流 ($I_C \\approx I_E$)。\n\n在硅芯片上制造该电路的过程中，发生了一个制造缺陷，导致输出晶体管的发射极电阻 $R_E$ 被意外短路。计算实际故障输出电流 $I_{OUT,faulty}$ 与预期设计电流 $I_{OUT,design}$ 的比值。\n\n将你的答案表示为单个数值，并四舍五入到三位有效数字。", "solution": "对于工作在正向有源区且具有高电流增益的 BJT，其关键的器件关系式是集电极电流的二极管方程：\n$$\nI_{C} = I_{S} \\exp\\!\\left(\\frac{V_{BE}}{V_{T}}\\right),\n$$\n其中 $I_S$ 是饱和电流，$V_T$ 是热电压。当 $\\beta \\gg 1$ 时，我们取 $I_C \\approx I_E$。\n\n在一个韦德拉电流源中，两个匹配的晶体管共享同一个基极节点。参考晶体管（无发射极负反馈）被强制承载参考电流 $I_{REF}$，其基极-发射极电压 $V_{BE,ref}$ 由以下公式设定：\n$$\nI_{REF} = I_{S} \\exp\\!\\left(\\frac{V_{BE,ref}}{V_{T}}\\right).\n$$\n输出晶体管通常包含一个发射极电阻 $R_E$，这会降低其相对于参考晶体管的有效 $V_{BE}$，从而减小其电流，以实现 $I_{OUT,design} \\ll I_{REF}$。\n\n如果输出晶体管的发射极电阻被短路，那么 $R_E \\to 0$，两个晶体管就变得完全相同，具有相同的 $V_{BE}$（它们共享同一个基极，并且当 $R_E=0$ 时，发射极处于相同电位）。因此，\n$$\nV_{BE,out} = V_{BE,ref}\n\\quad\\Rightarrow\\quad\nI_{OUT,faulty} = I_{S} \\exp\\!\\left(\\frac{V_{BE,out}}{V_{T}}\\right) = I_{S} \\exp\\!\\left(\\frac{V_{BE,ref}}{V_{T}}\\right) = I_{REF}.\n$$\n因此，故障输出电流与预期设计电流的比值为\n$$\n\\frac{I_{OUT,faulty}}{I_{OUT,design}} = \\frac{I_{REF}}{I_{OUT,design}}.\n$$\n代入给定的数值，\n$$\n\\frac{I_{OUT,faulty}}{I_{OUT,design}} = \\frac{1.20 \\times 10^{-3}}{15.0 \\times 10^{-6}} = \\frac{1.20}{15.0} \\times 10^{3} = 0.08 \\times 10^{3} = 80.0,\n$$\n四舍五入到三位有效数字。", "answer": "$$\\boxed{80.0}$$", "id": "1341633"}]}
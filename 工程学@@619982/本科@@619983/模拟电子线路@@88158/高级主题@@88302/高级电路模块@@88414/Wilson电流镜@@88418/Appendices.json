{"hands_on_practices": [{"introduction": "理论学习之后，最重要的就是将其付诸实践。第一个练习将带你完成威尔逊电流镜最基本的设计任务：为一个给定的输出电流 $I_{out}$ 计算所需的参考电阻 $R_{ref}$。这个练习模拟了集成电路设计中的一个常见场景，让你能够将理论公式与实际元件值的选择联系起来，这是从理论走向应用的关键一步。通过这个计算，你将更好地理解如何通过外部元件来精确控制电流镜的性能 [@problem_id:1342141]。", "problem": "一位电子工程师正在为一个低功耗集成电路中的放大器级设计一个精密偏置电路。该设计利用一个 Wilson 电流镜来产生一个稳定的输出电流 $I_{out}$。该电路由三个假设为完全匹配的NPN型双极结型晶体管 (BJT) 构成。\n\n该电流镜由 $V_{CC} = 5.00 \\text{ V}$ 的电源电压供电。对于所使用的 Wilson 电流镜的特定拓扑结构，在假设晶体管工作在正向有源区且 Early 效应可以忽略不计的情况下，详细分析得出以下关系：\n\n1.  流过参考电阻 $R_{ref}$ 的参考电流 $I_{REF}$ 与期望的输出电流 $I_{out}$ 之间的关系由以下方程给出：\n    $$I_{REF} = I_{out} \\left(1 + \\frac{2}{\\beta(\\beta + 1)}\\right)$$\n    其中 $\\beta$ 是晶体管的共发射极电流增益。\n\n2.  参考节点（即 $R_{ref}$ 连接到晶体管网络的点）的直流电压稳定在基极-发射极导通电压的两倍，即 $V_{REF} = 2V_{BE,on}$。\n\n设计要求稳定的输出电流为 $I_{out} = 100.0 \\text{ } \\mu \\text{A}$。匹配的晶体管的电流增益为 $\\beta = 100$，其基极-发射极导通电压为 $V_{BE,on} = 0.700 \\text{ V}$。\n\n计算为达到指定的输出电流所需的参考电阻 $R_{ref}$ 的值。答案以千欧姆 ($\\text{k}\\Omega$) 为单位，并四舍五入到三位有效数字。", "solution": "我们已知 Wilson 电流镜的关系式：\n- 参考电流与输出电流的关系：\n$$I_{REF} = I_{out}\\left(1 + \\frac{2}{\\beta(\\beta + 1)}\\right)$$\n- 参考节点电压：\n$$V_{REF} = 2V_{BE,on}$$\n假设参考电阻 $R_{ref}$ 连接在 $V_{CC}$ 和参考节点之间，根据欧姆定律可得：\n$$R_{ref} = \\frac{V_{CC} - V_{REF}}{I_{REF}}$$\n代入 $V_{REF}$ 和 $I_{REF}$：\n$$R_{ref} = \\frac{V_{CC} - 2V_{BE,on}}{I_{out}\\left(1 + \\frac{2}{\\beta(\\beta + 1)}\\right)}$$\n代入给定值 $V_{CC} = 5.00\\text{ V}$，$V_{BE,on} = 0.700\\text{ V}$，$I_{out} = 100.0\\ \\mu\\text{A}$ 以及 $\\beta = 100$：\n$$V_{CC} - 2V_{BE,on} = 5.00 - 2(0.700) = 3.600\\text{ V}$$\n$$1 + \\frac{2}{\\beta(\\beta + 1)} = 1 + \\frac{2}{100\\cdot 101} = 1 + \\frac{2}{10100} = 1 + \\frac{1}{5050} = \\frac{5051}{5050}$$\n因此，\n$$R_{ref} = \\frac{3.600\\text{ V}}{100.0\\ \\mu\\text{A}\\cdot \\frac{5051}{5050}} = \\frac{3.600\\text{ V}}{100.0\\ \\mu\\text{A}}\\cdot \\frac{5050}{5051}$$\n计算基础比值：\n$$\\frac{3.600\\text{ V}}{100.0\\ \\mu\\text{A}} = 36.000\\ \\text{k}\\Omega$$\n因此，\n$$R_{ref} = 36.000\\ \\text{k}\\Omega \\times \\frac{5050}{5051} \\approx 35.9929\\ \\text{k}\\Omega$$\n按要求四舍五入到三位有效数字，得到 $36.0\\ \\text{k}\\Omega$。", "answer": "$$\\boxed{36.0}$$", "id": "1342141"}, {"introduction": "在确定了电路的设计参数后，下一步是深入分析其内部的直流工作状态，以确保电路按预期工作。本练习将引导你计算威尔逊电流镜内部一个关键节点的直流电压，即晶体管Q1的集电极电压。这个过程不仅能加深你对晶体管 $V_{BE}$ 与集电极电流 $I_C$ 之间关系的理解，还能让你掌握分析内部节点电流如何分配的技能，这对于验证所有晶体管是否都工作在预期的正向放大区至关重要 [@problem_id:1342095]。", "problem": "一位模拟集成电路设计师正在分析一个偏置产生子电路。该电路是一种改进的电流镜拓扑，由三个NPN型双极结型晶体管（BJT）构成，分别标记为Q1、Q2和Q3。这些晶体管被认为是完全相同的，并且都工作在正向有源区。对于此直流偏置分析，可以忽略厄利效应（Early effect）。\n\n电路的配置如下：\n- Q1和Q2的发射极都连接到地参考点（0 V）。\n- 一个参考电流 $I_{ref}$ 从外部注入Q1的集电极。Q1的集电极也直接连接到其自身的基极。\n- Q1的基极连接到Q2的基极。\n- Q2的集电极连接到Q3的发射极。\n- Q3的基极连接到Q1的基极。\n- Q3的集电极作为电路的输出，并施加一个合适的电压以确保所有假设均成立。\n\n电路在以下参数下工作：\n- 参考电流，$I_{ref} = 120 \\text{ } \\mu\\text{A}$\n- 晶体管正向电流增益，$\\beta = 180$\n- 热电压，$V_T = 25.0 \\text{ mV}$\n\n对于这些特定的晶体管，已知当集电极电流 $I_C$ 为 $1.00 \\text{ mA}$ 时，基极-发射极电压 $V_{BE}$ 为 $0.700 \\text{ V}$。\n\n计算晶体管Q1集电极的直流电压。以伏特为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "所有BJT均相同，工作在正向有源区，且忽略厄利效应。设Q1的公共基极/集电极节点电压为 $V_{B}$。由于Q1是二极管连接，且Q1、Q2共享相同的基极且发射极接地，它们的基极-发射极电压相等：$V_{BE1}=V_{BE2}=V_{B}$。根据理想BJT定律，它们的集电极电流为\n$$\nI_{C1}=I_{C2}=I_{S}\\exp\\!\\left(\\frac{V_{B}}{V_{T}}\\right)\\equiv I,\n$$\n其中 $I_{S}$ 是（共同的）饱和电流。\n\n设节点 $X$ 为Q2的集电极和Q3的发射极的连接点。在节点 $X$ 应用KCL（基尔霍夫电流定律）可得\n$$\nI_{C2}=I_{E3}.\n$$\n由于在正向有源区工作时 $I_{E3}=I_{C3}\\left(1+\\frac{1}{\\beta}\\right)$ 且 $I_{C2}=I$，可以得出\n$$\nI_{C3}=\\frac{I}{1+\\frac{1}{\\beta}}=I\\cdot\\frac{\\beta}{\\beta+1}.\n$$\n在电路的输入节点（即Q1的集电极和基极的公共连接点）应用基尔霍夫电流定律(KCL)。在该标准威尔逊电流镜配置中，参考电流 $I_{ref}$ 是流入该节点的总电流，它为Q1的集电极电流 $I_{C1}$ 和Q3的基极电流 $I_{B3}$ 提供电流。\n$$I_{ref} = I_{C1} + I_{B3}$$\n将基极电流表示为集电极电流的函数 ($I_B = I_C / \\beta$)，并将 $I_{C3}$ 用 $I_{C1}$ 表示：\n$$I_{B3} = \\frac{I_{C3}}{\\beta} = \\frac{1}{\\beta} \\left(I\\frac{\\beta}{\\beta+1}\\right) = \\frac{I}{\\beta+1}$$\n将 $I_{B3}$ 的表达式代入输入节点的KCL方程：\n$$I_{ref} = I_{C1} + \\frac{I_{C1}}{\\beta+1} = I_{C1}\\left(1 + \\frac{1}{\\beta+1}\\right) = I_{C1}\\frac{\\beta+2}{\\beta+1}$$\n由此，我们可以解出 $I \\equiv I_{C1}$:\n$$I = I_{ref} \\frac{\\beta+1}{\\beta+2}$$\n当 $\\beta=180$时:\n$$ I = I_{ref} \\frac{180+1}{180+2} = I_{ref} \\frac{181}{182} $$\nQ1的集电极（基极）电压由其在电流 $I$ 下的 $V_{BE}$ 决定。使用给定的校准点，即当 $I_{C}=1.00\\times 10^{-3}\\ \\text{A}$ 时 $V_{BE}=0.700\\ \\text{V}$，并结合理想定律，\n$$\nV_{B}=0.700+V_{T}\\ln\\!\\left(\\frac{I}{1.00\\times 10^{-3}}\\right).\n$$\n现在代入 $I_{ref}=120\\times 10^{-6}\\ \\text{A}$ 和 $V_{T}=25.0\\times 10^{-3}\\ \\text{V}$：\n$$\nI=120\\times 10^{-6}\\cdot\\frac{181}{182}\\ \\text{A}\\approx 1.19341\\times 10^{-4}\\ \\text{A},\n$$\n$$\nV_{B}=0.700+0.0250\\cdot\\ln\\!\\left(\\frac{1.19341\\times 10^{-4}}{1.00\\times 10^{-3}}\\right)\n\\approx 0.700+0.0250\\cdot\\ln(0.119341)\\approx 0.6469\\ \\text{V}.\n$$\n因此，Q1集电极的直流电压（等于基极节点电压）约为 $0.647\\ \\text{V}$（保留三位有效数字）。", "answer": "$$\\boxed{0.647}$$", "id": "1342095"}, {"introduction": "威尔逊电流镜相较于简单电流镜的核心优势在于其极高的输出电阻，这使其更接近理想的电流源。本练习将带你从直流分析进入小信号分析领域，推导威尔逊电流镜的输出电阻 $R_{out}$。通过建立小信号模型并进行计算，你将从理论上揭示其高输出电阻的来源，并定量地理解其性能优势。这项分析是理解高级模拟电路设计的基石，让你明白电路拓扑结构如何直接决定其关键的交流性能参数 [@problem_id:1333859]。", "problem": "一位工程师正在使用威尔逊电流镜拓扑设计一个精密电流源。该电路由三个标记为Q1、Q2和Q3的NPN型双极结型晶体管 (BJT) 构成，这些晶体管是完美匹配的。每个晶体管的小信号跨导为$g_m$，有限小信号输出电阻为$r_o$。\n\n电路的配置如下：\n- Q1和Q2的发射极接地。\n- Q1为二极管连接形式，其集电极与基极相连。一个参考电流源连接到该节点。\n- Q2的基极与Q1的基极相连。\n- Q3堆叠在Q2之上，即Q3的发射极连接到Q2的集电极。\n- Q3的基极连接到Q1和Q2的公共基极节点。\n- 输出电流从Q3的集电极引出。\n\n假设晶体管的电流增益 $\\beta$ 无穷大，求从Q3集电极看入的电流镜小信号输出电阻 $R_{out}$。请用 $g_m$ 和 $r_o$ 将你的答案表示为单个闭式解析表达式。", "solution": "我们使用BJT在电流增益无穷大时的小信号混合-pi模型。设所有三个晶体管都是匹配的，其跨导为$g_{m}$，输出电阻为$r_{o}$。定义$g_{o} \\equiv \\frac{1}{r_{o}}$。\n\n将节点标记如下：\n- 节点 $B$：Q1、Q2、Q3的公共基极节点，也是Q1的集电极（二极管连接）。\n- 节点 $X$：Q2的集电极和Q3的发射极。\n- 节点 $Y$：Q3的集电极（输出节点）。\n- 地：Q1和Q2的发射极。\n\n小信号元件：\n- Q1（二极管连接）从 $B$ 到地呈现的导纳为 $g_{m}+g_{o}$，因为其小信号电流为 $i_{1}=(g_{m}+g_{o})v_{b}$。\n- Q2有一个值为 $g_{m}v_{b}$ 的受控电流源，从 $X$ 流向地，还有一个电阻 $r_{o}$ 从 $X$ 到地（电导为 $g_{o}$）。\n- Q3有一个值为 $g_{m}(v_{b}-v_{x})$ 的受控电流源，从 $Y$ 流向 $X$，还有一个电阻 $r_{o}$ 从 $Y$ 到 $X$（电导为 $g_{o}$）。\n\n我们通过在节点 $Y$ 施加一个测试电压 $v_{y}$（相对于地），求解从节点 $Y$ 流入网络的电流 $i_{y}$，然后使用 $R_{out}=\\frac{v_{y}}{i_{y}}$ 来求 $R_{out}$。在计算输出电阻时，输入端的独立源被置零，这意味着参考节点B被视为交流地，因此 $v_{b}=0$。\n\n首先，在节点 $X$ 列出KCL方程。离开 $X$ 的电流总和必须为零（$X$处没有独立源）：\n- 通过Q2的 $r_{o}$ 到地：$g_{o}v_{x}$。\n- 通过Q2的 $g_{m}$ 源到地：$g_{m}v_{b}$。\n- 通过Q3的 $r_{o}$ 到 $Y$：$g_{o}(v_{x}-v_{y})$。\n- 通过Q3的 $g_{m}$ 源（方向为从 $Y$ 到 $X$）：经此源离开 $X$ 的电流为 $-g_{m}(v_{b}-v_{x})$。\n\n因此\n$$\ng_{o}v_{x}+g_{m}v_{b}+g_{o}(v_{x}-v_{y})-g_{m}(v_{b}-v_{x})=0.\n$$\n当 $v_{b}=0$ 时，该式简化为\n$$\n(2g_{o}+g_{m})v_{x}=g_{o}v_{y} \\;\\;\\Rightarrow\\;\\; v_{x}=\\frac{g_{o}}{2g_{o}+g_{m}}\\,v_{y}.\n$$\n\n现在计算从节点 $Y$ 流入网络的测试电流 $i_{y}$。从 $Y$ 流向网络的电流有：\n- 通过Q3的 $r_{o}$ 到 $X$：$g_{o}(v_{y}-v_{x})$。\n- 通过Q3的 $g_{m}$ 源从 $Y$ 到 $X$：$g_{m}(v_{b}-v_{x})$。\n\n因此，使用 $v_{b}=0$可得，\n$$\ni_{y}=g_{o}(v_{y}-v_{x})-g_{m}v_{x}.\n$$\n代入 $v_{x}=\\alpha v_{y}$，其中 $\\alpha=\\frac{g_{o}}{2g_{o}+g_{m}}$：\n$$\ni_{y}=\\left[g_{o}(1-\\alpha)-g_{m}\\alpha\\right]v_{y}.\n$$\n计算 $1-\\alpha=\\frac{g_{o}+g_{m}}{2g_{o}+g_{m}}$，所以\n$$\ng_{o}(1-\\alpha)-g_{m}\\alpha=\\frac{g_{o}(g_{o}+g_{m})-g_{m}g_{o}}{2g_{o}+g_{m}}=\\frac{g_{o}^{2}}{2g_{o}+g_{m}}.\n$$\n因此\n$$\ni_{y}=\\frac{g_{o}^{2}}{2g_{o}+g_{m}}\\,v_{y}\n\\quad\\Rightarrow\\quad\nR_{out}=\\frac{v_{y}}{i_{y}}=\\frac{2g_{o}+g_{m}}{g_{o}^{2}}=g_{m}r_{o}^{2}+2r_{o}.\n$$\n\n这就是从Q3集电极看入的闭式小信号输出电阻。", "answer": "$$\\boxed{g_{m}r_{o}^{2}+2r_{o}}$$", "id": "1333859"}]}
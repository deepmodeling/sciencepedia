{"hands_on_practices": [{"introduction": "双斜率积分型ADC的核心在于其基于时间的测量方法。通过将输入电压转换为一个时间间隔，它能够实现高精度和出色的噪声抑制。这个练习将引导你计算一次完整的转换周期所需的总时间，该时间由固定的积分阶段和可变的去积分阶段组成。掌握这个计算是理解双斜率ADC如何将模拟电压精确转换为数字值的关键第一步 [@problem_id:1300342]。", "problem": "一位电子工程师正在为高精度环境监测站设计一款定制的模数转换器（ADC）。该ADC为双斜率积分型，因其在测量缓慢变化的信号时具有出色的噪声抑制特性而被选用。\n\nADC设计的主要参数如下：\n- ADC的分辨率为12位。其内部计数器随系统时钟的每个周期而递增。\n- 系统时钟频率 $f_{clk}$ 精确为 4.096 MHz。\n- ADC使用负参考电压 $V_{ref} = -2.500$ V。其输入设计用于测量正电压，满量程范围从 0 V 到 $|V_{ref}|$。\n- 设计规定，任何转换的初始积分阶段（第一斜率）总是持续12位计数器可能的最大计数值。\n\n连接到ADC的传感器提供了一个稳定的输入电压 $V_{in} = +1.500$ V。计算该ADC针对此特定输入电压完成一个完整转换周期所需的总时间。最终答案以毫秒（ms）为单位表示，并四舍五入到三位有效数字。", "solution": "双斜率ADC在固定时间内对输入进行积分，然后用相反极性的参考电压进行去积分，直到积分器输出返回到零。去积分时间与输入电压成正比，由下式给出：\n$$\nT_{2}=\\frac{V_{in}}{|V_{ref}|}T_{1}\n$$\n初始积分时间等于最大计数值除以时钟频率：\n$$\nT_{1}=\\frac{N_{\\max}}{f_{clk}},\\quad N_{\\max}=2^{12}=4096,\\quad f_{clk}=4.096\\times 10^{6}\\,\\text{Hz}\n$$\n因此，\n$$\nT_{1}=\\frac{4096}{4.096\\times 10^{6}\\,\\text{Hz}}=1000\\times 10^{-6}\\,\\text{s}=1.000\\times 10^{-3}\\,\\text{s}\n$$\n当 $V_{in}=1.500\\,\\text{V}$ 且 $|V_{ref}|=2.500\\,\\text{V}$ 时，\n$$\nT_{2}=\\frac{1.500}{2.500}\\times (1.000\\times 10^{-3}\\,\\text{s}) = 0.600\\times 10^{-3}\\,\\text{s}\n$$\n总转换时间为\n$$\nT_{\\text{total}}=T_{1}+T_{2}=1.000\\times 10^{-3}\\,\\text{s}+0.600\\times 10^{-3}\\,\\text{s}=1.600\\times 10^{-3}\\,\\text{s}=1.60\\,\\text{ms}\n$$\n四舍五入到三位有效数字。", "answer": "$$\\boxed{1.60}$$", "id": "1300342"}, {"introduction": "虽然双斜率ADC以其固有的噪声抑制能力而著称，但其最终精度仍然严重依赖于电路中关键元件的稳定性。本练习探讨了参考电压 $V_{\\text{ref}}$ 的关键作用，它是决定测量标尺的基准。通过分析一个假设的 $V_{\\text{ref}}$ 误差如何影响数字输出，你将揭示双斜率转换的比率特性（即输出与 $V_{in}/V_{\\text{ref}}$ 成正比），并理解了在实际设计中一个主要的误差来源 [@problem_id:1300364]。", "problem": "一位电子工程师正在对一批12位双斜率积分型模数转换器（ADC）进行质量控制。这种ADC的标准操作包括两个阶段。在第一阶段，一个未知的正输入电压 $V_{in}$ 在一个固定的时间间隔 $T_1$ 内被积分，该时间间隔对应于计数器在其 $2^{12}$ 个时钟周期的完整量程内运行。在第二阶段，积分器的输入被切换到一个负的参考电压 $-V_{ref}$，同时积分器输出返回其初始（零）状态所需的时间间隔 $T_2$ 由计数器测量。最终的数字输出是在 $T_2$ 期间累积的计数值。\n\n在测试过程中，发现其中一个ADC的参考电压源有故障。其幅值始终比标称设计值 $V_{ref, nominal}$ 高10.0%。所有其他组件，包括积分电阻 $R$、电容 $C$ 和系统时钟，都工作正常。对于一个给定的稳定输入电压 $V_{in}$，这个故障导致ADC的数字输出产生误差。\n\n与无故障ADC的理想输出相比，下列哪个陈述最准确地描述了有故障ADC产生的数字输出码的误差？\n\nA. 输出码高了10.0%。\nB. 输出码低了10.0%。\nC. 输出码约高了9.1%。\nD. 输出码约低了9.1%。\nE. 输出码没有误差。", "solution": "设积分器从零开始。对于一个标准的反相积分器，在第一阶段，恒定的正输入 $V_{in}$ 在固定的时间 $T_1$ 内施加，第一阶段结束时积分器的输出是：\n$$\nV_{o}(T_1) = -\\frac{V_{in}T_1}{RC}\n$$\n在第二阶段，输入被切换到恒定的负参考电压 $-V_{ref}$，使积分器输出以正斜率 $\\frac{V_{ref}}{RC}$ 回升至零。此过程所需的时间 $T_2$ 满足：\n$$\n0 = V_o(T_1) + \\frac{V_{ref}T_2}{RC} = -\\frac{V_{in}T_1}{RC} + \\frac{V_{ref}T_2}{RC}\n$$\n解得：\n$$\nV_{in}T_{1} = V_{ref}T_{2} \\quad \\Rightarrow \\quad T_{2}=\\frac{V_{in}}{V_{ref}}\\,T_{1}\n$$\n计数器以时钟频率 $f_{clk}$ 运行。在固定的第一阶段，$T_{1}$ 对应于满量程计数值 $N_{1}=2^{12}$，因此 $T_{1}=\\frac{N_{1}}{f_{clk}}$。数字输出是在 $T_{2}$ 期间累积的计数值：\n$$\nN_{2}=f_{clk}T_{2}=f_{clk}\\left(\\frac{V_{in}}{V_{ref}}T_{1}\\right)=\\frac{V_{in}}{V_{ref}}\\,N_{1}\n$$\n因此，输出码与 $V_{ref}$ 成反比。对于理想的ADC，其 $V_{ref}=V_{ref,nominal}$，\n$$\nN_{ideal}=\\frac{V_{in}}{V_{ref,nominal}}\\,N_{1}\n$$\n对于有故障的参考电压 $V_{ref}=1.10\\,V_{ref,nominal}$，\n$$\nN_{faulty}=\\frac{V_{in}}{1.10\\,V_{ref,nominal}}\\,N_{1}=\\frac{1}{1.10}\\,N_{ideal}\n$$\n相对误差为\n$$\n\\frac{N_{faulty}-N_{ideal}}{N_{ideal}}=\\frac{1}{1.10}-1=-\\frac{0.10}{1.10}=-\\frac{1}{11}\\approx -0.0909\n$$\n这意味着有故障的ADC的输出码比理想值约低 $9.1$%。因此，正确的选项是D。", "answer": "$$\\boxed{D}$$", "id": "1300364"}, {"introduction": "理想化的电路模型是学习的起点，但现实世界中的元件总有其不完美之处。这个实践练习将带你超越理想模型，去分析一个常见的非理想情况：比较器存在一个小的电压偏移量。通过推导在这种缺陷下ADC的输出表达式，你将学会如何用数学方法来建模元件的瑕疵，并预测它们对系统性能的具体影响，例如在这个案例中，它会引入一个恒定的偏移误差 [@problem_id:1300307]。", "problem": "一位电子工程师正在对一个定制的双斜率积分式模数转换器 (ADC) 进行特性分析。该 ADC 的工作分为两个不同的阶段。在第一阶段（积分阶段），一个正的模拟输入电压 $V_{in}$ 被连接到积分器的输入端，持续时间固定为 $N_{int}$ 个时钟周期。该积分器由一个电阻 $R$ 和一个电容 $C$ 组成。在第二阶段（反积分阶段），积分器的输入被切换到一个恒定的负参考电压 $-V_{ref}$（其中 $V_{ref}$ 为正值）。在此阶段，一个数字计数器测量积分器输出电压返回到比较器阈值所需的时钟周期数 $N_{out}$。时钟频率为 $f_{clk}$。为便于分析，假设积分器内的运算放大器是理想的，并且在每个转换周期开始时，积分器的输出被复位到 0 V。\n\n组装后，测试发现比较器存在一个故障。比较器不是在积分器输出电压穿过 0 V 时触发，而是在电压穿过一个小的、稳定的负偏置电压 $-\\epsilon$ 时稳定地触发，其中 $\\epsilon$ 是一个单位为伏特的正值。\n\n推导最终的数字输出计数 $N_{out}$ 的表达式，该表达式是输入电压 $V_{in}$ 和给定系统参数 $V_{ref}$、$N_{int}$、$R$、$C$、$f_{clk}$ 和 $\\epsilon$ 的函数。", "solution": "设理想反相积分器满足标准关系式\n$$\nv_{o}(t)=v_{o}(0)-\\frac{1}{RC}\\int_{0}^{t}v_{in}(\\tau)\\,d\\tau,\n$$\n其中积分器输出在每次转换开始时复位为零。\n\n积分阶段：\n- 输入为恒定值 $v_{in}(t)=V_{in}$，持续时间 $T_{int}$ 固定，对应于频率为 $f_{clk}$ 的 $N_{int}$ 个时钟周期，因此 $T_{int}=\\frac{N_{int}}{f_{clk}}$。\n- 积分结束时的输出为\n$$\nv_{o}(T_{int})=0-\\frac{1}{RC}\\int_{0}^{T_{int}}V_{in}\\,d\\tau=-\\frac{V_{in}T_{int}}{RC}.\n$$\n\n反积分阶段：\n- 输入切换为恒定值 $v_{in}(t)=-V_{ref}$（其中 $V_{ref}>0$）。积分器输出随之演变为\n$$\nv_{o}(t)=v_{o}(T_{int})-\\frac{1}{RC}\\int_{T_{int}}^{T_{int}+t}(-V_{ref})\\,d\\tau'\n=v_{o}(T_{int})+\\frac{V_{ref}}{RC}t.\n$$\n- 有故障的比较器在 $v_{o}(t)$ 达到 $-\\epsilon$（其中 $\\epsilon>0$）时触发。用 $T_{out}$ 表示反积分时间。设 $v_{o}(T_{out})=-\\epsilon$ 可得\n$$\n-\\epsilon=v_{o}(T_{int})+\\frac{V_{ref}}{RC}T_{out}.\n$$\n解出 $T_{out}$ 并代入 $v_{o}(T_{int})=-\\frac{V_{in}T_{int}}{RC}$ 可得\n$$\nT_{out}=\\frac{RC}{V_{ref}}\\left(-\\epsilon-v_{o}(T_{int})\\right) = \\frac{RC}{V_{ref}}\\left(-\\epsilon - \\left(-\\frac{V_{in}T_{int}}{RC}\\right)\\right)\n=\\frac{V_{in}T_{int}}{V_{ref}}-\\frac{\\epsilon RC}{V_{ref}}.\n$$\n\n数字输出计数：\n- 计数器测量得到 $N_{out}=f_{clk}T_{out}$。使用 $T_{int}=\\frac{N_{int}}{f_{clk}}$，\n$$\nN_{out}=f_{clk}\\left(\\frac{V_{in}T_{int}}{V_{ref}}-\\frac{\\epsilon RC}{V_{ref}}\\right)\n=\\frac{V_{in}}{V_{ref}}N_{int}-\\frac{\\epsilon RC f_{clk}}{V_{ref}}.\n$$\n\n此表达式假设积分过程使输出电压超过 $-\\epsilon$ (即 $V_{in}T_{int}>\\epsilon RC$)，从而使得 $T_{out}>0$。在理想的零偏置情况（$\\epsilon=0$）下，该表达式简化为标准的双斜率结果 $N_{out}=\\frac{V_{in}}{V_{ref}}N_{int}$，其中比较器偏置引入了一个值为 $\\frac{\\epsilon RC f_{clk}}{V_{ref}}$ 的恒定负计数偏置。", "answer": "$$\\boxed{\\frac{V_{in}}{V_{ref}}\\,N_{int}-\\frac{\\epsilon R C f_{clk}}{V_{ref}}}$$", "id": "1300307"}]}
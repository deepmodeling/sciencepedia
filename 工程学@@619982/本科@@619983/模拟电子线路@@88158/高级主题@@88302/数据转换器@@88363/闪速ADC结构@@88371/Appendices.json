{"hands_on_practices": [{"introduction": "在设计任何复杂电路之前，了解其基本构成至关重要。闪速ADC架构以其速度著称，但这是以巨大的硬件复杂性为代价的。这个首个实践练习将帮助您掌握ADC的分辨率（比特数 $n$）与所需元件数量之间的直接关系，通过计算比较器和电阻器的数量，您将体会到定义闪速ADC设计权衡的指数级扩展特性 [@problem_id:1304638]。", "problem": "一位电子工程师正在为数字示波器设计一个高速数据采集模块。该设计的一个关键组件是闪速模数转换器（ADC），其因极高的采样率而被选用。闪速ADC架构的工作原理是同时将输入的模拟电压与一组唯一的参考电压进行比较。这些参考电压由一个精密电阻梯形网络生成，所有比较器的输出被送入一个优先编码器以生成最终的二进制码。\n\n该示波器的设计规格要求其垂直分辨率需达到5位ADC的水平。为了估算所需的电路复杂度和元件数量，工程师需要确定核心模拟构建模块的数量。假设这是一个理想的闪速ADC架构，这个5位系统所需的分压梯形电阻网络中的比较器总数和电阻总数之和是多少？", "solution": "问题要求计算一个5位闪速ADC中两个关键组件的总数：比较器和分压梯形电阻网络中的电阻。我们将分别计算每种组件的数量，然后将它们相加。\n\n首先，我们来分析一个 $n$ 位闪速ADC的通用架构。一个 $n$ 位ADC旨在将模拟输入量化为 $2^n$ 个离散的数字电平。\n\n闪速ADC的核心由一系列比较器组成。每个比较器检查输入模拟电压 $V_{in}$ 是高于还是低于一个特定的参考电压 $V_{ref,i}$。为了区分 $2^n$ 个不同的电平，我们需要定义它们之间的边界。这样的边界有 $2^n - 1$ 个。例如，对于一个2位ADC（$n=2$），有 $2^2 = 4$ 个电平（例如，00, 01, 10, 11）。为了定义这四个区域，我们需要三个阈值电压，这相应地需要三个比较器。将其推广，对于一个 $n$ 位的分辨率，所需比较器的数量 $N_{comp}$ 由下式给出：\n$$N_{comp} = 2^n - 1$$\n\n接下来，我们考虑电阻梯形网络。该网络的目的是为比较器生成所需的 $2^n - 1$ 个唯一的参考电压。最常见的实现方式是使用一系列相同的电阻，连接在主参考电压 $V_{ref}$ 和地之间。一个由 $k$ 个相同电阻组成的串联电阻链在其间将有 $k-1$ 个节点（抽头），从而提供 $k-1$ 个不同的电压电平。为了给比较器提供所需的 $2^n - 1$ 个参考电压，电阻梯形网络因此必须总共包含 $N_{res}$ 个电阻，其中：\n$$N_{res} = 2^n$$\n这种由 $2^n$ 个电阻组成的配置产生了必要的 $2^n-1$ 个中间电压抽头。\n\n在这个具体问题中，ADC的分辨率为5位，所以我们设 $n=5$。\n\n现在我们可以计算比较器的数量：\n$$N_{comp} = 2^5 - 1 = 32 - 1 = 31$$\n\n以及梯形电阻网络中电阻的数量：\n$$N_{res} = 2^5 = 32$$\n\n问题要求计算比较器总数和电阻总数之和。设此和为 $N_{total}$。\n$$N_{total} = N_{comp} + N_{res}$$\n代入计算出的值：\n$$N_{total} = 31 + 32 = 63$$\n\n因此，所需的比较器和电阻数量之和为63。", "answer": "$$\\boxed{63}$$", "id": "1304638"}, {"introduction": "当模拟输入电压与所有参考电平进行比较后，结果会形成一个“温度计码”。下一个关键步骤是将这个中间代码转换为标准的二进制数。本练习聚焦于优先编码器的作用，它是闪速ADC的数字处理核心，您将学习该模块如何有效地识别最高有效位的比较器输出，从而生成模拟信号的最终数字表示 [@problem_id:1304590]。", "problem": "正在设计一个 3 位闪存式模数转换器 (ADC)。这种类型的 ADC 使用一个分压器和一组比较器来直接将模拟输入电压 $V_{in}$ 数字化。对于一个 $n$ 位转换器，需要 $2^n - 1$ 个比较器。在这个 3 位设计中，使用了七个比较器，索引为 $C_1, C_2, \\dots, C_7$。每个比较器 $C_k$ 将 $V_{in}$ 与一个唯一的参考电压 $V_{ref,k}$ 进行比较，其中 $V_{ref,1} < V_{ref,2} < \\dots < V_{ref,7}$。每个比较器 $C_k$ 的输出是一个单位比特：如果 $V_{in} > V_{ref,k}$ 则为 '1'，否则为 '0'。\n\n来自这七个比较器的输出被送入一个优先编码器。这个优先编码器的功能是识别出比较器输出 $C_k$ 为 '1' 的最大索引 $k$，然后生成该索引 $k$ 的 3 位二进制表示。如果所有比较器的输出都为 '0'，则编码器输出 `000`。\n\n在某一特定时刻，测量了来自比较器组的 7 位输出。表示状态 $(C_1, C_2, C_3, C_4, C_5, C_6, C_7)$ 的输出向量被测得为 `(1, 1, 1, 1, 0, 0, 0)`。\n\n优先编码器的 3 位二进制输出是什么？\n\nA. `011`\n\nB. `100`\n\nC. `101`\n\nD. `111`\n\nE. `001`", "solution": "一个 3 位闪存式 ADC 使用 $2^{n}-1$ 个比较器；这里 $n=3$，所以有 $7$ 个比较器 $C_{1},\\dots,C_{7}$，其参考电压严格递增 $V_{\\text{ref},1}<\\cdots<V_{\\text{ref},7}$。每个比较器当且仅当 $V_{\\text{in}}>V_{\\text{ref},k}$ 时输出 $1$。对于任何固定的 $V_{\\text{in}}$，这会产生一个温度计码：存在一个最大索引 $k^{\\ast}$，使得对于所有 $k\\leq k^{\\ast}$ 都有 $C_{k}=1$，而对于所有 $k>k^{\\ast}$ 都有 $C_{k}=0$。优先编码器输出 $k^{\\ast}$ 的 3 位二进制表示，如果没有比较器输出为 $1$，则输出 $000$。\n\n测得的比较器输出向量为 $(C_{1},C_{2},C_{3},C_{4},C_{5},C_{6},C_{7})=(1,1,1,1,0,0,0)$。因此，输出为 $1$ 的索引集合是\n$$\nS=\\{k\\in\\{1,2,3,4,5,6,7\\}\\,:\\,C_{k}=1\\}=\\{1,2,3,4\\},\n$$\n所以输出为 $1$ 的最大索引是\n$$\nk^{\\ast}=\\max S=4.\n$$\n$4$ 的 3 位二进制表示是\n$$\n4 \\mapsto 100.\n$$\n因此，优先编码器输出 $100$，这对应于选项 B。", "answer": "$$\\boxed{B}$$", "id": "1304590"}, {"introduction": "理想模型非常适合理解基本原理，但真实世界的电路会受到制造工艺不完美性的影响。在闪速ADC中，电阻梯中的阻值变化会降低转换器的精度。这个更进一步的实践引入了积分非线性（INL）的概念，这是ADC的一个关键性能指标。通过分析单个不匹配电阻的影响，您将量化一个物理缺陷如何转化为特定的线性度误差，从而更深入地理解现实世界中ADC的性能限制 [@problem_id:1304637]。", "problem": "一个4位闪存式模数转换器（ADC）使用一个串联电阻梯形网络来产生其内部参考电压。该梯形网络由16个电阻组成，从接地端向上依次标记为 $R_1, R_2, ..., R_{16}$，连接在接地参考（0 V）和主参考电压 $V_{ref}$ 之间。电阻 $R_1$ 的一端连接到地，电阻 $R_{16}$ 的另一端连接到 $V_{ref}$。该转换器有15个比较器，第 $k$ 个比较器（其中 $k \\in \\{1, 2, ..., 15\\}$）的阈值电压从电阻 $R_k$ 顶部的节点（即 $R_k$ 和 $R_{k+1}$ 之间的节点）抽取。\n\n理想情况下，所有电阻都具有相同的标称电阻 $R$。然而，由于制造缺陷，一个电阻 $R_8$ 的实际电阻为 $R(1+\\delta)$，其中 $\\delta = 0.05$（+5%的偏差）。所有其他15个电阻都具有其标称电阻 $R$。\n\n对于转换到数字码 $k$ 的积分非线性（INL），其定义为实际比较器阈值电压（$V_{k,actual}$）与其理想值（$V_{k,ideal}$）之间的偏差，以最低有效位（LSB）为单位进行测量。第 $k$ 个比较器的理想阈值定义为 $V_{k,ideal} = k \\cdot V_{LSB}$，其中一个LSB的电压为 $V_{LSB} = V_{ref} / 16$。\n\n计算此ADC的最差情况INL，即INL的最大绝对值 $\\max_{k \\in \\{1, ..., 15\\}} |INL(k)|$。将您的答案以LSB为单位表示，并四舍五入到三位有效数字。", "solution": "在一个连接于地和 $V_{ref}$ 之间的串联电阻梯形网络中，若无负载，则在 $R_{k}$ 顶部的节点（$R_{k}$ 和 $R_{k+1}$ 之间）的电压由下式给出\n$$\nV_{k,actual} = V_{ref}\\,\\frac{\\sum_{i=1}^{k} R_{i}}{\\sum_{i=1}^{16} R_{i}}.\n$$\n当除 $R_{8} = R(1+\\delta)$ 外所有电阻的标称值均为 $R$ 时，总电阻为\n$$\nR_{\\text{tot}} = \\sum_{i=1}^{16} R_{i} = R(16+\\delta).\n$$\n累加到 $k$ 的部分和为\n$$\n\\sum_{i=1}^{k} R_{i} =\n\\begin{cases}\nkR, & k \\leq 7,\\\\\nR(k+\\delta), & k \\geq 8.\n\\end{cases}\n$$\n因此，实际阈值为\n$$\nV_{k,actual} =\n\\begin{cases}\nV_{ref}\\,\\dfrac{k}{16+\\delta},  k \\leq 7 \\\\[6pt]\nV_{ref}\\,\\dfrac{k+\\delta}{16+\\delta},  k \\geq 8.\n\\end{cases}\n$$\n理想阈值为 $V_{k,ideal} = k\\,V_{LSB}$，其中 $V_{LSB} = V_{ref}/16$。所以以LSB为单位的INL为\n$$\nINL(k) = \\frac{V_{k,actual} - V_{k,ideal}}{V_{LSB}}.\n$$\n因此，\n$$\nINL(k) =\n\\begin{cases}\n\\dfrac{16k}{16+\\delta} - k = -\\,\\dfrac{k\\,\\delta}{16+\\delta},  k \\leq 7 \\\\[8pt]\n\\dfrac{16(k+\\delta)}{16+\\delta} - k = \\dfrac{\\delta\\,(16-k)}{16+\\delta},  k \\geq 8.\n\\end{cases}\n$$\n对于 $k \\leq 7$，$|INL(k)| = \\dfrac{k\\,\\delta}{16+\\delta}$ 随 $k$ 的增加而增加，并在 $k=7$ 时达到最大值。对于 $k \\geq 8$，$|INL(k)| = \\dfrac{\\delta\\,(16-k)}{16+\\delta}$ 随 $k$ 的增加而减小，并在 $k=8$ 时达到最大值。比较这两个最大值，\n$$\n\\max_{k \\in \\{1,\\dots,15\\}} |INL(k)| = \\frac{8\\,\\delta}{16+\\delta}.\n$$\n当 $\\delta = 0.05$ 时，\n$$\n\\max |INL| = \\frac{8 \\times 0.05}{16 + 0.05} = \\frac{0.4}{16.05} = \\frac{8}{321} \\approx 0.0249 \\text{ LSB}.\n$$\n四舍五入到三位有效数字，最差情况INL为 $0.0249$ LSB。", "answer": "$$\\boxed{0.0249}$$", "id": "1304637"}]}
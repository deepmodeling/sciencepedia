{"hands_on_practices": [{"introduction": "模拟到数字转换的核心在于“量化”过程，即将一个连续的模拟电压映射到一个离散的数字代码上。这个练习提供了一个基础而关键的实践，要求你为一个简单的单极性ADC计算其数字输出 [@problem_id:1281282]。通过这个计算，你将亲手操作ADC最基本的功能，并理解分辨率和最低有效位（LSB）是如何决定转换精度的。", "problem": "一个简单的环境监测系统使用一个传感器，其输出的模拟电压与测量的物理量成正比。该电压随后由微控制器内置的模数转换器 (ADC) 进行处理。该 ADC 是一个 4 位单极性转换器，输入电压范围为 0 V 到 8.0 V。在某一特定时刻，传感器输出一个 6.2 V 的稳定电压。\n\n假设 ADC 向下取整（截断）至最接近的量化电平，那么对应的 4 位数字输出是什么？请用单个十六进制字符表示。\n\nA. A\n\nB. B\n\nC. C\n\nD. D\n\nE. E", "solution": "一个 4 位的单极性 ADC 在 $V_{\\min}=0$ 到 $V_{\\max}=8.0$ 的输入范围内提供 $2^{4}=16$ 个量化电平。最低有效位 (LSB) 的大小是\n$$\nq=\\frac{V_{\\max}-V_{\\min}}{2^{4}}=\\frac{8.0-0}{16}=0.5.\n$$\n在采用截断（向下取整）的情况下，对于输入 $V_{\\text{in}}$，其数字码 $k$ 为\n$$\nk=\\left\\lfloor\\frac{V_{\\text{in}}-V_{\\min}}{q}\\right\\rfloor.\n$$\n对于 $V_{\\text{in}}=6.2$，\n$$\nk=\\left\\lfloor\\frac{6.2-0}{0.5}\\right\\rfloor=\\left\\lfloor 12.4\\right\\rfloor=12.\n$$\n十进制码 $12$ 对应于二进制码 $1100$，即十六进制字符 $C$。因此，4 位的数字输出是 $C$。", "answer": "$$\\boxed{C}$$", "id": "1281282"}, {"introduction": "在ADC对信号进行量化之前，必须先在时间上对其进行“采样”。这个练习将我们的注意力从电压域转移到时域，探讨了采样率 $f_s$ 与输入信号频率 $f_{in}$ 之间关系的重要性 [@problem_id:1281274]。你将计算当采样不满足奈奎斯特-香农采样定理时产生的“混叠”频率，这是数字信号处理中一个必须避免的关键陷阱。", "problem": "在一台数字音频效果器中，一个模拟合成器产生了一个频率为 $f_{in} = 21 \\text{ kHz}$ 的纯正弦测试音。此信号随后由模数转换器（ADC）处理，用于数字信号处理链。ADC 的采样率设置为 $f_s = 40 \\text{ kS/s}$（千样本/秒）。假设本次测试中 ADC 的抗混叠滤波器已被禁用，从而允许直接对 $21 \\text{ kHz}$ 的信号进行采样。由于输入信号频率与采样率之间的关系，在得到的数字数据中将会出现一个不正确的、被称为混叠频率的较低频率。计算这个混叠频率。\n\n以千赫兹（kHz）为单位表示您的最终答案。", "solution": "我们已知输入正弦波的频率为 $f_{in} = 21$ kHz，采样率为 $f_{s} = 40$ kHz。在均匀采样中，相差采样率整数倍的连续时间频率在离散时间域中是不可区分的。具体来说，任何模拟频率 $f$ 都会混叠到 $|f - k f_{s}|$ 形式的频率上（其中 $k$ 为整数），而观测到的数字频率是奈奎斯特区间 $[0, f_{s}/2]$ 中的唯一代表。\n\n因此，混叠频率 $f_{a}$ 为\n$$\nf_{a} = \\min_{k \\in \\mathbb{Z}} \\left| f_{in} - k f_{s} \\right|, \\quad \\text{with } f_{a} \\in [0, f_{s}/2].\n$$\n由于 $f_{in} \\in \\left(\\frac{f_{s}}{2}, f_{s}\\right)$，选择 $k=1$ 可得\n$$\nf_{a} = \\left| f_{in} - f_{s} \\right| = f_{s} - f_{in},\n$$\n该结果位于 $[0, f_s/2]$ 区间内，因为 $f_{in} > f_s/2$。\n\n代入给定值，\n$$\nf_{a} = 40 - 21 = 19 \\text{ kHz}.\n$$\n因此，采样数据中存在的混叠频率为 $19$ kHz。", "answer": "$$\\boxed{19}$$", "id": "1281274"}, {"introduction": "在掌握了量化和采样的基本原理后，是时候探索更高级的ADC架构了。这个练习介绍了一种称为“子范围”式的高性能ADC设计，它通过巧妙地组合两个低分辨率的ADC来实现更高的整体分辨率 [@problem_id:1281294]。这个问题要求你从系统设计的角度出发，计算一个关键的放大器增益 $G$，以确保两级转换能够无缝衔接，共同实现高精度的转换目标。", "problem": "在一个用于医学成像系统的高速前端设计中，正在使用一种两步子范围架构来实现一个12位模数转换器 (ADC)。该架构由一个粗转换级和一个精转换级组成。整个系统设计用于处理一个模拟输入信号 $V_{in}$，其范围从 $0$ V 到参考电压 $V_{ref} = 5.0$ V。\n\n粗转换级包含一个6位闪速ADC，用于确定最高有效位 (MSB)。该粗ADC使用主参考电压 $V_{ref}$。其数字输出被送入一个6位数模转换器 (DAC)，该DAC也使用参考电压 $V_{ref}$ 工作，以产生一个粗模拟电压 $V_{coarse}$。然后，一个高精度模拟减法器生成一个残余电压，定义为 $V_{res} = V_{in} - V_{coarse}$。\n\n精转换级设计用于将该残余电压数字化。残余电压首先由一个具有恒定电压增益 $G$ 的同相放大器进行放大。放大后的残余电压被送入一个6位逐次逼近寄存器 (SAR) ADC，以确定最低有效位 (LSB)。为了最小化功耗，该精ADC设计为在较低的参考电压 $V_{ref,fine} = 4.0$ V 下工作，该电压定义了其满量程输入范围。\n\n为了确保两个转换级无缝集成并实现完整的12位分辨率，残余放大器的增益 $G$ 必须选择得当，使得可能的最大残余电压被放大后能精确匹配精ADC的满量程输入范围。计算增益 $G$ 的所需值。将您的答案表示为一个四舍五入到三位有效数字的数值。", "solution": "该12位两步子范围ADC使用一个6位粗闪速级，后跟一个6位精SAR级。设粗转换级的参考电压为 $V_{ref}$，精转换级的满量程输入范围为 $V_{ref,fine}$。粗6位ADC的量化步长 (LSB) 由下式给出\n$$\n\\Delta_{coarse} = \\frac{V_{ref}}{2^{6}}.\n$$\n粗DAC重建 $V_{coarse}$，残余电压形成为\n$$\nV_{res} = V_{in} - V_{coarse}.\n$$\n在理想的向下取整量化和完美的DAC/减法器条件下，残余电压的范围是\n$$\n0 \\leq V_{res} < \\Delta_{coarse}.\n$$\n然后，残余电压由增益为 $G$ 的同相放大器放大，产生\n$$\nV_{amp} = G\\,V_{res}.\n$$\n为确保无缝集成并实现完整的12位分辨率，可能的最大残余电压必须映射到精ADC的满量程。因此，我们需要\n$$\nG \\cdot \\max(V_{res}) = V_{ref,fine}.\n$$\n使用 $\\max(V_{res}) = \\Delta_{coarse}$，这得到\n$$\nG = \\frac{V_{ref,fine}}{\\Delta_{coarse}} = \\frac{V_{ref,fine}}{V_{ref}/2^{6}} = 2^{6}\\,\\frac{V_{ref,fine}}{V_{ref}}.\n$$\n代入 $V_{ref} = 5.0$ 和 $V_{ref,fine} = 4.0$，\n$$\nG = 2^{6}\\,\\frac{4.0}{5.0} = 64 \\cdot \\frac{4.0}{5.0} = 51.2.\n$$\n四舍五入到三位有效数字，$G = 51.2$。", "answer": "$$\\boxed{51.2}$$", "id": "1281294"}]}
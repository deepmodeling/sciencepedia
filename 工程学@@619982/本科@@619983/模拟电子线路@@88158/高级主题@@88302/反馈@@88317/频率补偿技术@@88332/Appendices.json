{"hands_on_practices": [{"introduction": "放大器的一个关键性能指标是其增益带宽积（GBWP），它描述了增益和带宽之间的基本权衡。对于一个经过主极点补偿的放大器，这个乘积近似为一个常数。本练习将通过一个实际计算，帮助你直观地理解如何利用增益带宽积来预测放大器在特定闭环增益下的可用带宽，这是在任何电路中选择和应用运算放大器的基础。[@problem_id:1305792]", "problem": "一位电子工程师正在为一种产生低幅高频信号的传感器设计前置放大器电路。该工程师选择了一款运算放大器（op-amp），其频率响应可以建模为一阶单极点响应。根据制造商的数据手册，该运放的增益带宽积（GBWP）规定为 10 MHz。该前置放大器被配置为同相放大器，其要求的低频闭环电压增益为 100。\n\n假设此闭环增益值在工作通带内是恒定的，计算最终放大器电路的 -3dB 带宽。请用千赫兹（kHz）表示你的答案。", "solution": "对于开环传递函数为 $A(s) = \\dfrac{A_{0}}{1 + s/\\omega_{p}}$ 的单极点运放，其单位增益（过渡）频率为 $\\omega_{t} \\approx A_{0}\\omega_{p}$，而 $f_{t} = \\dfrac{\\omega_{t}}{2\\pi}$ 是增益带宽积（GBWP）。\n\n在同相放大器配置中，设反馈系数为 $\\beta$，则闭环传递函数为\n$$\nT(s) = \\frac{A(s)}{1 + \\beta A(s)} = \\frac{A_{0}}{1 + \\beta A_{0} + s/\\omega_{p}}.\n$$\n这可以写成\n$$\nT(s) = \\frac{\\dfrac{A_{0}}{1 + \\beta A_{0}}}{1 + \\dfrac{s}{\\omega_{p}(1 + \\beta A_{0})}}.\n$$\n因此，低频闭环增益为\n$$\nA_{\\text{cl},0} = \\frac{A_{0}}{1 + \\beta A_{0}} \\approx \\frac{1}{\\beta},\n$$\n而闭环极点（对于一阶响应，它决定了-3 dB带宽）为 $\\omega_{\\text{cl}} = \\omega_{p}(1 + \\beta A_{0})$。在大环路增益（$\\beta A_0 \\gg 1$）的条件下，这可以近似为 $\\omega_{\\text{cl}} \\approx \\omega_p \\beta A_0 = (\\omega_p A_0)\\beta = \\omega_t \\beta$。对于同相放大器，低频闭环增益 $A_{\\text{cl},0} \\approx 1/\\beta$。因此，我们可以推导出闭环带宽 $f_{\\text{cl}}$ 与增益带宽积（GBWP，即 $f_t$）之间的关系：\n$$\nf_{\\text{cl}} = \\frac{\\omega_{\\text{cl}}}{2\\pi} \\approx \\frac{\\omega_t \\beta}{2\\pi} = f_t \\beta \\approx \\frac{f_t}{A_{\\text{cl},0}} = \\frac{\\text{GBWP}}{A_{\\text{cl},0}}.\n$$\n对于同相放大器，在 $A_{\\text{cl},0} = 100$ 和 $\\text{GBWP} = 10 \\times 10^{6}\\ \\text{Hz}$ 的条件下，\n$$\nf_{-3\\ \\text{dB}} = \\frac{10 \\times 10^{6}}{100} = 1.0 \\times 10^{5}\\ \\text{Hz} = 100\\ \\text{kHz}.\n$$\n因此，以千赫兹为单位，-3 dB 带宽是 $100$。", "answer": "$$\\boxed{100}$$", "id": "1305792"}, {"introduction": "在理解了主极点的重要性之后，我们将深入探讨米勒补偿（Miller Compensation），这是一种在多级放大器中实现稳定性的主流技术。本练习演示了如何选择一个米勒补偿电容 $C_c$ 来获得一个具体、稳定的相位裕度，而不仅仅是设定一个主极点。这个过程需要综合考虑单位增益频率、次主极点以及限制性能的右半平面（RHP）零点的影响，对于理解实际放大器设计的稳定性保证至关重要。[@problem_id:1305749]", "problem": "考虑一个简化的两级运算跨导放大器 (OTA) 模型，其设计用作电容式传感器的单位增益缓冲器。OTA 的第一级具有跨导 $g_{m1}$ 和输出电阻 $R_{o1}$。第二级具有跨导 $g_{m2}$ 和输出电阻 $R_{o2}$。为确保稳定工作，一个补偿电容 $C_c$ 从第一级的输出连接到第二级的输出。该放大器驱动一个总负载电容 $C_L$，其中包括传感器电容。\n\n给定以下器件和负载参数：\n- 第一级跨导, $g_{m1} = 1.20 \\text{ mA/V}$\n- 第二级跨导, $g_{m2} = 15.0 \\text{ mA/V}$\n- 第一级输出电阻, $R_{o1} = 250 \\text{ k}\\Omega$\n- 第二级输出电阻, $R_{o2} = 50.0 \\text{ k}\\Omega$\n- 负载电容, $C_L = 12.0 \\text{ pF}$\n\n计算为实现恰好 60 度的相位裕度所需的补偿电容 $C_c$ 的值。在您的分析中，假设极点分离效应起主导作用，并且电路中所有其他寄生电容均可忽略不计。以皮法 (pF) 为单位表示您的答案，并四舍五入到三位有效数字。", "solution": "该问题要求计算在单位增益反馈配置下，为两级 OTA 实现 60 度相位裕度 (PM) 所需的米勒补偿电容 $C_c$ 的值。\n\n首先，我们确定补偿后的两级OTA的关键频率相关特性。其开环传递函数 $A(s)$ 有一个主极点 $\\omega_{p1}$、一个非主导极点 $\\omega_{p2}$ 和一个右半平面 (RHP) 零点 $\\omega_z$。\n\n补偿后放大器的单位增益频率 $\\omega_t$ 由第一级的跨导 $g_{m1}$ 和补偿电容 $C_c$ 决定。\n$$ \\omega_t = \\frac{g_{m1}}{C_c} $$\n\n非主导极点 $\\omega_{p2}$ 主要由第二级的跨导 $g_{m2}$ 和负载电容 $C_L$ 决定。在标准的极点分离近似下，并假设 $C_c$ 不远小于 $C_L$，其位置近似为：\n$$ \\omega_{p2} \\approx \\frac{g_{m2}}{C_L} $$\n\n补偿电容 $C_c$ 在第二级的输入和输出之间创建了一条前馈路径，这引入了一个由下式给出的 RHP 零点 $\\omega_z$：\n$$ \\omega_z = \\frac{g_{m2}}{C_c} $$\n\n相位裕度在单位增益频率 $\\omega_t$ 处定义。它由 $PM = 180^\\circ + \\angle A(j\\omega_t)$ 给出，其中 $\\angle A(j\\omega_t)$ 是开环传递函数在 $\\omega = \\omega_t$ 时的相位。该相位是各极点和零点贡献的总和：\n$$ \\angle A(j\\omega_t) = -\\arctan\\left(\\frac{\\omega_t}{\\omega_{p1}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n注意 RHP 零点的相位贡献带有负号。在一个正确补偿的运算放大器中，主极点 $\\omega_{p1}$ 的频率远低于 $\\omega_t$，因此 $\\omega_t \\gg \\omega_{p1}$。这意味着在 $\\omega_t$ 处，主极点的相位贡献大约为 $-90^\\circ$。\n$$ \\arctan\\left(\\frac{\\omega_t}{\\omega_{p1}}\\right) \\approx 90^\\circ $$\n将此代入相位裕度方程：\n$$ PM \\approx 180^\\circ - 90^\\circ - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n$$ PM \\approx 90^\\circ - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n根据题意，期望的相位裕度为 $60^\\circ$。\n$$ 60^\\circ = 90^\\circ - \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) - \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) $$\n$$ \\arctan\\left(\\frac{\\omega_t}{\\omega_{p2}}\\right) + \\arctan\\left(\\frac{\\omega_t}{\\omega_z}\\right) = 30^\\circ $$\n现在我们用电路参数来表示比值 $\\omega_t/\\omega_{p2}$ 和 $\\omega_t/\\omega_z$。\n$$ \\frac{\\omega_t}{\\omega_{p2}} = \\frac{g_{m1}/C_c}{g_{m2}/C_L} = \\frac{g_{m1}C_L}{g_{m2}C_c} $$\n$$ \\frac{\\omega_t}{\\omega_z} = \\frac{g_{m1}/C_c}{g_{m2}/C_c} = \\frac{g_{m1}}{g_{m2}} $$\n将这些代入我们的相位方程：\n$$ \\arctan\\left(\\frac{g_{m1}C_L}{g_{m2}C_c}\\right) + \\arctan\\left(\\frac{g_{m1}}{g_{m2}}\\right) = 30^\\circ $$\n现在我们可以代入给定的数值。首先，我们计算只涉及跨导的项。\n$$ \\frac{g_{m1}}{g_{m2}} = \\frac{1.20 \\text{ mA/V}}{15.0 \\text{ mA/V}} = 0.0800 $$\nRHP 零点的相位贡献为：\n$$ \\arctan(0.0800) \\approx 4.5739^\\circ $$\n现在将此结果代回相位方程：\n$$ \\arctan\\left(\\frac{g_{m1}C_L}{g_{m2}C_c}\\right) + 4.5739^\\circ = 30^\\circ $$\n$$ \\arctan\\left(\\frac{g_{m1}C_L}{g_{m2}C_c}\\right) = 30^\\circ - 4.5739^\\circ = 25.4261^\\circ $$\n现在我们可以求解反正切函数的自变量：\n$$ \\frac{g_{m1}C_L}{g_{m2}C_c} = \\tan(25.4261^\\circ) \\approx 0.47543 $$\n最后，我们求解 $C_c$：\n$$ C_c = \\frac{g_{m1}C_L}{g_{m2} \\times 0.47543} = \\left(\\frac{g_{m1}}{g_{m2}}\\right) \\frac{C_L}{0.47543} $$\n代入已知值：\n$$ C_c = (0.0800) \\frac{12.0 \\text{ pF}}{0.47543} \\approx 2.01935 \\text{ pF} $$\n题目要求答案四舍五入到三位有效数字。\n$$ C_c \\approx 2.02 \\text{ pF} $$\n本次计算中不需要 $R_{o1}$ 和 $R_{o2}$ 的值，因为它们主要决定直流增益和主极点的精确位置，而在使用 $\\omega_t$、$\\omega_{p2}$、$\\omega_z$ 和相位裕度之间的关系时，这些值不是直接必需的。", "answer": "$$\\boxed{2.02}$$", "id": "1305749"}, {"introduction": "米勒补偿虽然强大，但它会引入一个不期望的右半平面（RHP）零点，这个零点会降低相位裕度，从而影响稳定性。本练习探讨了一种旨在解决此问题的精进技术。通过在米勒电容上串联一个“零点消除电阻” $R_z$，我们可以改变零点的位置；本题将指导你如何计算 $R_z$ 的值，从而将这个有害的零点移到无穷远处，有效消除其负面影响，实现更优的性能和更强的稳定性。[@problem_id:1305737]", "problem": "一位工程师正在设计一个两级CMOS运算放大器。该放大器的第二级被建模为一个跨导级，其跨导为$g_{m2}$，输出电阻为$R_{o2}$。为确保在宽负载范围内的稳定性，一个米勒补偿电容$C_C$连接在该第二级的输入和输出节点之间。这种补偿方法的一个已知副作用是在放大器传递函数的右半平面（RHP）产生一个零点，这会降低相位裕度。\n\n为了解决这个问题，一个零点消除电阻$R_z$与补偿电容$C_C$串联。可以选择该电阻的值来改变零点的位置。您的任务是找到$R_z$的特定值，该值能将右半平面零点移动到无穷大频率，从而消除其对放大器性能的影响。\n\n第二级的参数如下：\n- 跨导, $g_{m2} = 400 \\, \\mu\\text{A/V}$\n- 输出电阻, $R_{o2} = 150 \\text{ k}\\Omega$\n- 补偿电容, $C_C = 3 \\text{ pF}$\n\n计算所需的零点消除电阻$R_z$的值。答案以千欧（k$\\Omega$）为单位表示。", "solution": "问题要求计算一个零点消除电阻$R_z$的值，通过将两级放大器中的右半平面（RHP）零点移动到无穷大来消除它。该零点是由通过米勒补偿网络的前馈路径引入的。\n\n我们来分析第二级的小信号模型。设$v_x$为第二级的输入电压，$v_{out}$为输出电压。第二级由一个压控电流源（跨导为$g_{m2}$）和一个输出电阻$R_{o2}$组成。由电容$C_C$和电阻$R_z$串联组成的补偿网络连接在节点$v_x$和$v_{out}$之间。\n\n串联补偿网络在s域中的阻抗由下式给出：\n$$ Z_C(s) = R_z + \\frac{1}{sC_C} $$\n\n传递函数的零点是当输入电压$v_x$为有限值时，使输出电压$v_{out}$变为零的频率。为了找到这些零点，我们可以分析输出节点的电流。输出节点的总电流是来自受控源的电流（$I_{gm2}$）、流过补偿网络的电流（$I_C$）以及流过输出电阻$R_{o2}$和负载的任何电流之和。\n在输出节点$v_{out}$应用基尔霍夫电流定律（KCL），我们得到：\n$$ g_{m2}v_x + \\frac{v_{out}}{R_{o2}} + I_{load} + \\frac{v_{out} - v_x}{Z_C(s)} = 0 $$\n其中$I_{load}$是流入连接到输出端的负载的电流。\n\n为了找到传递函数$A_v(s) = v_{out}(s)/v_x(s)$的零点，我们寻找使$v_{out}(s_z) = 0$而$v_x(s_z) \\neq 0$的$s$值（记为$s_z$）。在KCL方程中令$v_{out} = 0$可以显著简化方程。注意，当$v_{out}=0$时，流过$R_{o2}$和负载的电流也变为零。\nKCL方程变为：\n$$ g_{m2}v_x + \\frac{0 - v_x}{Z_C(s)} = 0 $$\n由于我们寻找的是$v_x \\neq 0$的解，我们可以用$v_x$除以该方程的两边：\n$$ g_{m2} - \\frac{1}{Z_C(s)} = 0 $$\n这个方程定义了零点的频率$s = s_z$。\n$$ g_{m2} = \\frac{1}{Z_C(s_z)} $$\n现在，我们代入$Z_C(s)$的表达式：\n$$ g_{m2} = \\frac{1}{R_z + \\frac{1}{s_z C_C}} $$\n现在我们可以求解零点$s_z$：\n$$ R_z + \\frac{1}{s_z C_C} = \\frac{1}{g_{m2}} $$\n$$ \\frac{1}{s_z C_C} = \\frac{1}{g_{m2}} - R_z $$\n$$ \\frac{1}{s_z C_C} = \\frac{1 - g_{m2}R_z}{g_{m2}} $$\n$$ s_z = \\frac{g_{m2}}{C_C(1 - g_{m2}R_z)} $$\n这个表达式给出了零点在s平面中的位置。问题要求我们找到将此零点移动到无穷大频率（$s_z \\to \\infty$）的$R_z$值。要使$s_z$的表达式趋近于无穷大，其分母必须趋近于零。\n$$ 1 - g_{m2}R_z = 0 $$\n求解$R_z$即可得到零点消除电阻的值：\n$$ R_z = \\frac{1}{g_{m2}} $$\n注意，这个值仅取决于第二级的跨导$g_{m2}$，而与$C_C$、$R_{o2}$或负载无关。\n\n现在，我们代入给定的$g_{m2}$数值：\n$$ g_{m2} = 400 \\, \\mu\\text{A/V} = 400 \\times 10^{-6} \\text{ S} $$\n$$ R_z = \\frac{1}{400 \\times 10^{-6} \\text{ S}} = \\frac{1}{0.0004} \\, \\Omega = 2500 \\, \\Omega $$\n问题要求答案以千欧（k$\\Omega$）为单位。\n$$ R_z = 2500 \\, \\Omega = 2.5 \\text{ k}\\Omega $$", "answer": "$$\\boxed{2.5}$$", "id": "1305737"}]}
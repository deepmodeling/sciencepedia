{"hands_on_practices": [{"introduction": "在深入研究复杂的开关电容滤波器之前，让我们从其最基本的构件——等效电阻开始。这个练习将向您展示，如何仅使用一个电容器和两个由时钟控制的开关，就能模拟一个电阻器。通过计算流经该电路的平均电流，您将亲自推导出开关电容电路的核心关系，这是理解更高级电路的关键第一步。[@problem_id:1335122]", "problem": "在现代集成电路中，精确的电阻值难以制造且占用很大的面积。一种常见的替代方案是开关电容电路，它仅使用电容器和开关即可模拟一个电阻，而这些元器件在硅上可以轻松且精确地制造。\n\n考虑一个用于模拟电阻的基本开关电容电路元件。该电路的构造如下：一个电容为 $C$ 的电容器，其一个端口永久接地。电容器的另一个端口可以通过一组理想开关连接到两个点之一。开关 S1 将此端口连接到一个保持在恒定直流电压 $V_{in}$ 的输入节点。开关 S2 将同一个端口接地。\n\n开关由一个频率为 $f_{clk}$ 的两相、不重叠的时钟信号控制。时钟的周期为 $T_{clk} = 1/f_{clk}$。\n- 在第一相 $\\phi_1$ 期间（持续时间为 $T_{clk}/2$），开关 S1 闭合，开关 S2 断开。\n- 在第二相 $\\phi_2$ 期间（持续时间也为 $T_{clk}/2$），开关 S1 断开，开关 S2 闭合。\n\n假设电路已运行足够长的时间以达到稳态，请确定在一个完整的时钟周期 $T_{clk}$ 内，从输入电压源 $V_{in}$ 汲取的平均电流 $I_{avg}$。将你的最终答案表示为用 $V_{in}$、$C$ 和 $f_{clk}$ 表示的符号表达式。", "solution": "在 $\\phi_1$ 相期间，开关 S1 将电容器的上极板连接到电压为 $V_{in}$ 的输入源，而下极板保持接地。根据电容器的本构关系 $Q = C V$，在 $\\phi_1$ 结束时，电容器上的电荷为\n$$\nQ_{\\phi_{1},\\,\\text{end}} = C V_{in}.\n$$\n在 $\\phi_1$ 开始前一刻，电路刚刚完成 $\\phi_2$，在此期间 S2 将上极板接地，迫使电容器电压为零。因此，在 $\\phi_1$ 开始时的电荷为\n$$\nQ_{\\phi_{1},\\,\\text{start}} = 0.\n$$\n因此，在 $\\phi_1$ 期间从电源汲取的净电荷是电容器电荷的变化量，\n$$\n\\Delta Q_{\\text{per cycle}} = Q_{\\phi_{1},\\,\\text{end}} - Q_{\\phi_{1},\\,\\text{start}} = C V_{in}.\n$$\n在 $\\phi_2$ 期间，由于 S1 是断开的，电容器通过 S2 向地放电，因此没有电荷从电源汲取。因此，在一个完整的时钟周期 $T_{clk}$ 内，从 $V_{in}$ 汲取的总电荷为 $C V_{in}$。\n\n根据一个周期内平均电流的定义，\n$$\nI_{avg} = \\frac{1}{T_{clk}} \\int_{0}^{T_{clk}} i(t)\\, dt = \\frac{\\Delta Q_{\\text{per cycle}}}{T_{clk}} = \\frac{C V_{in}}{T_{clk}}.\n$$\n使用 $T_{clk} = \\frac{1}{f_{clk}}$，我们得到\n$$\nI_{avg} = C V_{in} f_{clk}.\n$$\n这是标准的开关电容结果，等效于一个阻值为 $R_{eq} = \\frac{1}{C f_{clk}}$ 的电阻，因为 $I_{avg} = \\frac{V_{in}}{R_{eq}}$。", "answer": "$$\\boxed{C f_{clk} V_{in}}$$", "id": "1335122"}, {"introduction": "掌握了开关电容等效电阻的原理后，我们就可以用它来构建有源电路了，其中积分器是最重要的模块之一。这个练习将指导您分析一个基本的开关电容积分器，它由一个运算放大器和两个电容器构成。通过跟踪单个时钟周期内的电荷转移，您将计算出输出电压，从而理解这种电路是如何实现离散时间积分的。[@problem_id:1335129]", "problem": "现代模拟信号处理中的一个基本构件是开关电容（SC）积分器。考虑一个由理想运算放大器（op-amp）、一个电容值为 $C_1$ 的输入电容和一个电容值为 $C_2$ 的反馈电容构成的基本SC积分器。该电路由一个两相非交叠时钟信号驱动，该信号在一个周期 $T_c$ 内完成一个完整的循环。\n\n在一个时钟周期内的操作如下：\n1.  在第一阶段（$\\phi_1$），一组理想开关闭合，将电容 $C_1$ 接在一个值为 $V_{in}$ 的恒定直流输入电压源两端，其正极板连接到电压源，负极板接地。\n2.  在第二阶段（$\\phi_2$），开关重新配置电路。电容 $C_1$ 与输入源断开。其正极板连接到运放的反相输入端，负极板保持接地。同时，电容 $C_2$ 被置于反馈回路中，连接在运放的输出端和其反相输入端之间。运放的同相输入端保持在接地电位。\n\n假设在时间 $t=0$ 时，即第一个时钟周期开始之前，运放的输出电压为 $V_{out}(0) = 0$，并且两个电容 $C_1$ 和 $C_2$ 的初始电荷均为零。\n\n求在第一个完整时钟周期结束的瞬间，运放的输出电压 $V_{out}(T_c)$。请用 $V_{in}$、$C_1$ 和 $C_2$ 表示您的答案的解析表达式。", "solution": "该问题要求解一个开关电容积分器在经历一个完整时钟周期后的输出电压。我们可以通过分析在两个时钟阶段期间电容器上存储的电荷以及在它们之间转移的电荷，并利用理想运放的特性来解决这个问题。\n\n**步骤1：分析阶段 $\\phi_1$ 期间的电路。**\n在第一阶段，电容 $C_1$ 直接连接在直流电压源 $V_{in}$ 的两端。它会充电直到其两端的电压等于 $V_{in}$。在此阶段结束时，存储在电容 $C_1$ 上的电荷由电容的定义给出：\n$$Q_1 = C_1 V_{C_1}$$\n由于 $V_{C_1} = V_{in}$，存储的电荷为：\n$$Q_1 = C_1 V_{in}$$\n问题陈述中提到，初始输出电压 $V_{out}(0)$ 为零，且电容 $C_2$ 没有初始电荷。在阶段 $\\phi_1$ 期间，反馈回路未按指定方式连接，因此输出电压保持为零， $C_2$ 也保持不带电状态。\n\n**步骤2：分析阶段 $\\phi_2$ 期间的电路。**\n在第二阶段，开关配置发生变化。电容 $C_1$ 现在连接在运放的反相输入端和地之间。运放的同相输入端接地。对于具有无限开环增益的理想运放，虚地原理适用：反相输入端的电压 $V_{-}$ 必须等于同相输入端的电压 $V_{+}$。\n$$V_{-} = V_{+} = 0 \\text{ V}$$\n由于电容 $C_1$ 连接在反相输入端（$V_{-}=0$）和地之间， $C_1$ 两端的电压必须变为 0 V。为达到此状态， $C_1$ 必须完全放电。\n\n**步骤3：应用电荷守恒原理。**\n存储在 $C_1$ 上的电荷 $Q_1 = C_1 V_{in}$ 不会消失。因为理想运放具有无限大的输入阻抗，没有电流能流入其输入端。因此，所有从 $C_1$ 流出的电荷都必须转移到反馈电容 $C_2$ 上。\n转移到 $C_2$ 的电荷量为 $\\Delta Q_2 = Q_1$。\n$$\\Delta Q_2 = C_1 V_{in}$$\n\n**步骤4：计算最终输出电压。**\n在此阶段，电容 $C_2$ 连接在运放的输出端（电位为 $V_{out}$）和其反相输入端（虚地点位， $V_{-}=0$）之间。因此，电容 $C_2$ 两端的电压为：\n$$V_{C_2} = V_{-} - V_{out} = 0 - V_{out} = -V_{out}$$\n存储在 $C_2$ 上的电荷与其两端电压的关系为 $Q_2 = C_2 V_{C_2}$。由于 $C_2$ 初始不带电，在阶段 $\\phi_2$ 结束时其上的电荷为 $Q_2 = \\Delta Q_2$。\n$$Q_2 = C_2 (-V_{out})$$\n现在，我们可以令从 $C_1$ 转移的电荷等于在 $C_2$ 上累积的电荷：\n$$\\Delta Q_2 = Q_2$$\n$$C_1 V_{in} = C_2 (-V_{out})$$\n求解输出电压 $V_{out}$ 可得：\n$$V_{out} = -\\frac{C_1}{C_2} V_{in}$$\n这就是在第一个完整时钟周期结束时（$t=T_c$）的输出电压。时钟周期 $T_c$ 本身会影响多个周期内的积分速率，但对于计算单个、完整的电荷转移事件的结果，其值是不需要的。\n\n最终答案是 $V_{out}(T_c) = - \\frac{C_1}{C_2} V_{in}$。", "answer": "$$\\boxed{-\\frac{C_1}{C_2}V_{in}}$$", "id": "1335129"}, {"introduction": "真正的滤波器设计需要我们将电路参数与其频域特性联系起来。这个练习将带您分析一个简单的一阶开关电容低通滤波器，并推导其Z域传递函数。您的任务是找出电路的极点位置与电容比之间的直接关系，这是根据性能指标（如截止频率）来设计滤波器的核心技能。[@problem_id:1335132]", "problem": "一个简单的一阶开关电容（SC）低通滤波器使用两个电容（电容值分别为 $C_1$ 和 $C_2$）和一个由两相不交叠时钟信号控制的开关阵列设计而成。在由 $n$ 索引的单个时钟周期内，该滤波器的操作过程如下。我们假设输入电压在周期开始时被采样，并保持恒定值为 $v_{in}[n-1]$。\n\n1.  在第一个时钟相 $\\phi_1$ 期间，电容器 $C_1$ 连接到输入电压源，充电至 $v_{in}[n-1]$。在此阶段，保持着前一个周期输出电压 $v_{out}[n-1]$ 的电容器 $C_2$ 与 $C_1$ 断开。\n2.  在第二个时钟相 $\\phi_2$ 期间，电容器 $C_1$ 与输入源断开，并与电容器 $C_2$ 并联。两个电容器上存储的电荷重新分配，在并联组合两端建立起新的输出电压 $v_{out}[n]$。\n\n这种离散时间滤波行为可以用 z 域中的传递函数 $H(z) = V_{out}(z)/V_{in}(z)$ 来表征，该函数具有一个实极点。对于一个特定的应用，滤波器的极点必须位于 $z_p = 0.820$。请确定所需的电容比 $C_2/C_1$。请将答案以实数形式给出，并四舍五入到三位有效数字。", "solution": "在相位 $\\phi_{1}$ 期间，$C_{1}$ 连接到输入端，充电至采样输入电压 $v_{in}[n-1]$。因此其电荷为 $Q_{1,i} = C_{1} v_{in}[n-1]$。电容器 $C_{2}$ 被隔离，并保持前一个输出电压 $v_{out}[n-1]$，所以其电荷为 $Q_{2,i} = C_{2} v_{out}[n-1]$。\n\n在相位 $\\phi_{2}$ 期间，$C_{1}$ 从输入端断开，并与 $C_{2}$ 并联。根据电荷守恒定律（理想开关，无损耗），连接前后的总电荷相等：\n$$\nC_{1} v_{in}[n-1] + C_{2} v_{out}[n-1] = (C_{1} + C_{2}) v_{out}[n].\n$$\n对 $v_{out}[n]$ 求解，得到一阶差分方程\n$$\nv_{out}[n] = \\frac{C_{1}}{C_{1}+C_{2}} v_{in}[n-1] + \\frac{C_{2}}{C_{1}+C_{2}} v_{out}[n-1].\n$$\n\n进行 $z$ 变换，用 $V_{out}(z)$ 和 $V_{in}(z)$ 表示变换后的函数，并注意到与 $v_{in}[n-1]$ 和 $v_{out}[n-1]$ 相关联的单位采样延迟 $z^{-1}$，我们得到\n$$\nV_{out}(z) = \\frac{C_{1}}{C_{1}+C_{2}} z^{-1} V_{in}(z) + \\frac{C_{2}}{C_{1}+C_{2}} z^{-1} V_{out}(z).\n$$\n重新整理求传递函数 $H(z) = \\frac{V_{out}(z)}{V_{in}(z)}$，得出\n$$\nH(z) = \\frac{\\frac{C_{1}}{C_{1}+C_{2}} z^{-1}}{1 - \\frac{C_{2}}{C_{1}+C_{2}} z^{-1}}.\n$$\n极点 $z_{p}$ 满足\n$$\n1 - \\frac{C_{2}}{C_{1}+C_{2}} z^{-1} = 0 \\quad \\Rightarrow \\quad z_{p} = \\frac{C_{2}}{C_{1}+C_{2}}.\n$$\n令 $r = \\frac{C_{2}}{C_{1}}$。则\n$$\nz_{p} = \\frac{r}{1 + r} \\quad \\Rightarrow \\quad r = \\frac{z_{p}}{1 - z_{p}}.\n$$\n对于要求的极点位置 $z_{p} = 0.820$，\n$$\n\\frac{C_{2}}{C_{1}} = \\frac{0.820}{1 - 0.820} = \\frac{0.820}{0.180} = \\frac{41}{9} \\approx 4.555\\ldots\n$$\n四舍五入到三位有效数字，结果为 $4.56$。", "answer": "$$\\boxed{4.56}$$", "id": "1335132"}]}
{"hands_on_practices": [{"introduction": "在理论学习之后，让我们通过一个典型案例来实践巴克豪森准则。本练习将分析一个由三阶低通滤波器和可调增益放大器构成的反馈系统，这正是相移振荡器的经典模型。我们的目标是精确计算出使系统进入持续正弦振荡的临界增益$K_{crit}$和振荡频率$\\omega_{osc}$，从而将巴克豪森的幅值和相位条件付诸实践。[@problem_id:1336432]", "problem": "一个反馈控制系统采用一个具有可调正实数增益 $K$ 的非反相放大器和一个建模为三个相同的、级联的、无相互作用的一阶滞后环节的受控对象来设计。该系统的总开环传递函数，也称为环路增益，由下式给出：\n$$L(s) = \\frac{K}{(s\\tau + 1)^3}$$\n对于此特定系统，每个环节的特征时间常数 $\\tau$ 被归一化为1秒。\n\n根据 Barkhausen 稳定性判据，当增益 $K$ 增加到一个特定的临界值 $K_{crit}$ 时，系统将从稳定运行状态过渡到在一个特定的角频率 $\\omega_{osc}$ 下产生持续的、无阻尼的正弦振荡。\n\n确定临界增益 $K_{crit}$ 和对应的振荡角频率 $\\omega_{osc}$ 的精确值。增益 $K_{crit}$ 是一个无量纲量，角频率 $\\omega_{osc}$ 应以 rad/s 为单位表示。", "solution": "当 $\\tau = 1$ 时，环路增益由 $L(s) = \\dfrac{K}{(s+1)^{3}}$ 给出。在虚轴上求值得到\n$$\nL(j\\omega) = \\frac{K}{(1 + j\\omega)^{3}}.\n$$\n写出 $L(j\\omega)$ 的幅值和相位：\n- 幅值为\n$$\n|L(j\\omega)| = \\frac{K}{|1 + j\\omega|^{3}} = \\frac{K}{\\left(\\sqrt{1 + \\omega^{2}}\\right)^{3}} = \\frac{K}{(1+\\omega^{2})^{3/2}}.\n$$\n- 相位为\n$$\n\\arg L(j\\omega) = -3\\,\\arg(1 + j\\omega) = -3\\,\\arctan(\\omega).\n$$\n在负反馈回路中，振荡起始的 Barkhausen 相位条件为\n$$\n\\arg L(j\\omega_{osc}) = -\\pi + 2\\pi m,\n$$\n其中最小的非负整数 $m$ 给出最低的正频率。取 $m=0$ 得到\n$$\n-3\\,\\arctan(\\omega_{osc}) = -\\pi \\quad \\Rightarrow \\quad \\arctan(\\omega_{osc}) = \\frac{\\pi}{3} \\quad \\Rightarrow \\quad \\omega_{osc} = \\tan\\!\\left(\\frac{\\pi}{3}\\right) = \\sqrt{3}.\n$$\n应用幅值条件 $|L(j\\omega_{osc})| = 1$ 来求解 $K_{crit}$：\n$$\n1 = \\frac{K_{crit}}{(1+\\omega_{osc}^{2})^{3/2}} \\quad \\Rightarrow \\quad K_{crit} = (1+\\omega_{osc}^{2})^{3/2}.\n$$\n代入 $\\omega_{osc} = \\sqrt{3}$：\n$$\nK_{crit} = (1+3)^{3/2} = 4^{3/2} = 8.\n$$\n因此，临界增益和振荡频率分别为 $K_{crit} = 8$ 和 $\\omega_{osc} = \\sqrt{3}$ rad/s。", "answer": "$$\\boxed{\\begin{pmatrix} 8 & \\sqrt{3} \\end{pmatrix}}$$", "id": "1336432"}, {"introduction": "理解一个电路为何能工作固然重要，但分析一个看似可行的设计为何会失败，往往能带来更深刻的洞见。本练习提出了一个仅用单级高通RC滤波器和同相放大器搭建振荡器的设想。通过运用巴克豪森准则，你将揭示该电路无法产生持续振荡的根本原因，从而深刻理解相位条件在振荡器设计中不可或缺的关键作用。[@problem_id:1336387]", "problem": "一位电子工程师正在尝试设计一个正弦波振荡器。所提出的电路由一个反馈回路组成，该回路由一个理想运算放大器（op-amp）的输出通过一个简单的阻容（RC）网络连接回其输入端构成。具体来说，一个单级高通RC滤波器（由一个电容器 $C$ 与一个电阻器 $R$ 串联组成，输出从电阻器两端获取）的输出连接到理想运放的同相输入端。该运放被配置为一个同相放大器，其增益 $A$ 是一个恒定的、正的实数值。然后，运放的输出连接到高通滤波器的输入端以闭合回路。\n\n尽管尝试了 $R$、$C$ 和放大器增益 $A$ 的各种值组合，工程师发现该电路在任何频率下都无法产生持续的正弦波振荡。根据巴克豪森准则，以下哪个陈述正确地解释了这一失败的根本原因？\n\nA. 对于任何有限频率，RC网络的增益幅值总是小于1，因此无法实现单位环路增益幅值。\nB. 单个RC高通滤波器最多提供90度的相移。与理想同相放大器提供的0度相移相结合，总的环路相移在任何有限的、非零频率下都无法达到振荡所需的360度（或0度）。\nC. 如果将同相放大器更换为反相放大器，电路就会振荡，因为反相放大器提供了必要的180度相移。\nD. 运算放大器（op-amp）的输入阻抗太低，对RC滤波器产生负载效应，从而阻止了满足必要相位条件的可能性。\nE. 持续振荡需要一个谐振电路，如LC振荡回路。RC电路是纯耗散的，不能以允许振荡的方式储存能量。", "solution": "假设高通RC网络由运放的输出驱动，并产生馈送到同相输入端的信号。对于一个增益为实数、正数且与频率无关的常数 $A$ 的理想同相放大器，其相移为 $0$。巴克豪森准则要求，在某个有限角频率 $\\omega_{0}$ 处，环路传递函数 $L(j\\omega)$ 必须满足\n$$\n|L(j\\omega_{0})|=1,\\qquad \\arg\\{L(j\\omega_{0})\\}=2\\pi k,\\quad k\\in\\mathbb{Z}.\n$$\n\n单极高通滤波器（$C$ 串联，$R$ 并联，输出取自 $R$ 两端）的传递函数为\n$$\nH(s)=\\frac{Z_{R}}{Z_{R}+Z_{C}}=\\frac{R}{R+\\frac{1}{sC}}=\\frac{sRC}{1+sRC}.\n$$\n在虚轴 $s=j\\omega$ 上计算，该函数变为\n$$\nH(j\\omega)=\\frac{j\\omega RC}{1+j\\omega RC}.\n$$\n因此，其幅值和相位为\n$$\n|H(j\\omega)|=\\frac{\\omega RC}{\\sqrt{1+(\\omega RC)^{2}}},\\qquad \\arg\\{H(j\\omega)\\}=\\arg\\{j\\omega RC\\}-\\arg\\{1+j\\omega RC\\}.\n$$\n由于对于 $\\omega>0$ 有 $\\arg\\{j\\omega RC\\}=\\frac{\\pi}{2}$ 和 $\\arg\\{1+j\\omega RC\\}=\\arctan(\\omega RC)$，我们得到\n$$\n\\arg\\{H(j\\omega)\\}=\\frac{\\pi}{2}-\\arctan(\\omega RC).\n$$\n对于任何有限的 $\\omega>0$，$\\arctan(\\omega RC)\\in(0,\\frac{\\pi}{2})$，所以\n$$\n\\arg\\{H(j\\omega)\\}\\in(0,\\tfrac{\\pi}{2}),\n$$\n且\n$$\n|H(j\\omega)|\\in(0,1).\n$$\n环路传递函数为\n$$\nL(j\\omega)=A\\,H(j\\omega),\n$$\n其中 $\\arg\\{A\\}=0$，因为 $A$ 是正实数。因此\n$$\n\\arg\\{L(j\\omega)\\}=\\arg\\{H(j\\omega)\\}\\in(0,\\tfrac{\\pi}{2})\n$$\n对于每个有限的 $\\omega>0$。因此，在任何有限的、非零的频率下，相位条件 $\\arg\\{L(j\\omega_{0})\\}=2\\pi k$ 都无法满足。尽管可以通过选择合适的 $A$ 使得 $A\\,|H(j\\omega_{0})|=1$ 来满足幅值条件 $|L(j\\omega_{0})|=1$（因为当 $\\omega$ 变化时，$|H(j\\omega)|$ 的范围是 $(0,1)$），但相位条件仍然无法满足。仅在极限情况 $\\omega\\to\\infty$ 时，才有 $\\arg\\{H(j\\omega)\\}\\to 0$ 和 $|H(j\\omega)|\\to 1$，但这不对应于任何有限的振荡频率。\n\n因此，失败的根本原因是单个高通RC网络与同相放大器结合，在任何有限频率下都无法提供所需的 $0$ 模 $2\\pi$ 的环路相位。这对应于选项B。选项A、C、D和E不正确的原因如下：A不是根本原因，因为可以选择 $A$ 来满足幅值条件；C是错误的，因为单个RC节无法提供与反相放大器配合所需的额外 $\\pi$ 相位；D与理想运放的假设相矛盾；E是错误的，因为RC振荡器（例如，文氏桥振荡器、相移振荡器）确实存在。", "answer": "$$\\boxed{B}$$", "id": "1336387"}, {"introduction": "巴克豪森准则不仅适用于经典的模拟电路，在现代集成电路设计中同样威力不减。本练习将带你分析一个创新的文氏桥振荡器，其中传统的电阻被开关电容电路所取代，以实现数字化调谐。你将应用巴克豪森准则，推导出由电容值和时钟频率决定的振荡条件，亲身体验如何将基本理论应用于前沿的混合信号电路设计。[@problem_id:1336440]", "problem": "一位工程师正在为混合信号集成电路（IC）设计一款精密振荡器。该设计基于维恩桥拓扑结构，但为了通过数字控制实现高精度和可调性，所有电阻元件都使用开关电容电路实现。\n\n该振荡器围绕一个配置为同相放大器的理想运算放大器构建，其电压增益为 $A_v$。正反馈路径包含一个改进的维恩桥网络。电桥的串联臂包含一个开关电容电路，用以替代传统电阻 $R_1$，并与一个标准电容 $C_1$ 相连。电桥的并联臂包含另一个开关电容电路，用以替代传统电阻 $R_2$，并与一个标准电容 $C_2$ 并联。\n\n这两个开关电容电路由开关电容 $C_{SC,1}$ 和 $C_{SC,2}$ 分别构成。两者都由一个频率为 $f_{clk}$ 的共用、高频、两相不重叠时钟信号驱动。出于本分析的目的，您需要假设所产生的振荡频率 $f_{osc}$ 远低于时钟频率 ($f_{osc} \\ll f_{clk}$)。在这个公认的条件下，一个电容为 $C_{SC}$ 的开关电容电路表现为一个等效电阻 $R_{eq} = 1/(C_{SC} f_{clk})$。\n\n您的任务是确定持续振荡的条件。求出振荡角频率 $\\omega_{osc}$ 和所需的最小放大器增益 $A_{min}$ 的表达式。将您的最终答案表示为一个双元素行矩阵 $(\\omega_{osc}, A_{min})$。", "solution": "假设两个开关电容电路的等效电阻由标准关系式（在 $f_{osc} \\ll f_{clk}$ 时成立）建模：\n$$\nR_{1}=\\frac{1}{C_{SC,1} f_{clk}}, \\quad R_{2}=\\frac{1}{C_{SC,2} f_{clk}}.\n$$\n从运放输出到同相输入端看，维恩桥反馈网络由一个串联臂和一个并联臂组成。串联臂的阻抗为 $Z_{s}=R_{1}+\\frac{1}{s C_{1}}$，并联臂的阻抗 $Z_{p}$ 等于 $R_{2}$ 和 $\\frac{1}{s C_{2}}$ 的并联，即：\n$$\nZ_{p}=\\frac{R_{2}}{1+s R_{2} C_{2}}.\n$$\n反馈系数 $\\beta(s)$ 是从输出到电桥节点的分压比：\n$$\n\\beta(s)=\\frac{Z_{p}}{Z_{s}+Z_{p}}.\n$$\n将 $Z_{s}$ 和 $Z_{p}$ 写成有理式形式并化简，得到\n$$\n\\beta(s)=\\frac{s C_{1} R_{2}}{1+s\\left(R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}\\right)+s^{2} R_{1} R_{2} C_{1} C_{2}}.\n$$\n对于持续振荡，Barkhausen 条件要求在 $\\omega=\\omega_{osc}$ 时，环路增益相移为零且幅值为1：$A_{v}\\beta(j\\omega_{osc})$ 必须为实数且等于 $1$。令 $s=j\\omega$ 可得\n$$\n\\beta(j\\omega)=\\frac{j\\omega C_{1} R_{2}}{\\left[1-\\omega^{2} R_{1} R_{2} C_{1} C_{2}\\right]+j\\omega\\left(R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}\\right)}.\n$$\n当分母为纯虚数时，满足相位条件，即：\n$$\n1-\\omega_{osc}^{2} R_{1} R_{2} C_{1} C_{2}=0 \\quad \\Longrightarrow \\quad \\omega_{osc}=\\frac{1}{\\sqrt{R_{1} R_{2} C_{1} C_{2}}}.\n$$\n在此频率下，反馈系数的幅值为\n$$\n\\beta(j\\omega_{osc})=\\frac{C_{1} R_{2}}{R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}},\n$$\n因此，所需的最小同相放大器增益为\n$$\nA_{min}=\\frac{1}{\\beta(j\\omega_{osc})}=\\frac{R_{1} C_{1}+R_{2} C_{2}+C_{1} R_{2}}{C_{1} R_{2}}=1+\\frac{R_{1}}{R_{2}}+\\frac{C_{2}}{C_{1}}.\n$$\n代入开关电容的等效电阻 $R_{1}=\\frac{1}{C_{SC,1} f_{clk}}$ 和 $R_{2}=\\frac{1}{C_{SC,2} f_{clk}}$，可得\n$$\n\\omega_{osc}=f_{clk}\\sqrt{\\frac{C_{SC,1} C_{SC,2}}{C_{1} C_{2}}}, \\quad A_{min}=1+\\frac{C_{SC,2}}{C_{SC,1}}+\\frac{C_{2}}{C_{1}}.\n$$\n在对称情况下，即 $R_{1}=R_{2}$ 和 $C_{1}=C_{2}$（在此对应于 $C_{SC,1}=C_{SC,2}$ 和 $C_{1}=C_{2}$），这些结果简化为熟知的结论 $\\omega_{osc}=\\frac{1}{R C}$ 和 $A_{min}=3$。", "answer": "$$\\boxed{\\begin{pmatrix} f_{clk}\\sqrt{\\dfrac{C_{SC,1}C_{SC,2}}{C_{1}C_{2}}} & 1+\\dfrac{C_{SC,2}}{C_{SC,1}}+\\dfrac{C_{2}}{C_{1}} \\end{pmatrix}}$$", "id": "1336440"}]}
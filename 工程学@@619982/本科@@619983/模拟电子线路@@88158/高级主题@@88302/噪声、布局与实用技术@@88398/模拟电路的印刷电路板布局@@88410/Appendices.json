{"hands_on_practices": [{"introduction": "理论上，印刷电路板（PCB）仅仅连接了各个元件，但在高频下，它本身也成为电路的一部分。这个练习将通过一个具体计算，揭示一个看似简单的电阻器在PCB上的物理布局如何引入意想不到的寄生电容 $C$。通过分析这个寄生电容对一个基本分压器在 $150 \\text{ MHz}$ 频率下性能的影响，我们可以深刻理解为何电路布局在高速模拟设计中至关重要 [@problem_id:1326528]。", "problem": "在一块印刷电路板（PCB）上构建了一个简单的分压器，以产生一个参考电压。该电路由一个正弦电压源 $V_{in}$ 驱动，其幅值为 $V_p=5.0 \\text{ V}$，频率为 $f=150 \\text{ MHz}$。该分压器由两个电阻 $R_1=1.0 \\text{ k}\\Omega$ 和 $R_2=1.0 \\text{ k}\\Omega$ 组成，它们串联在电源和地之间。输出 $V_{out}$ 是在电阻 $R_2$ 两端测量的。\n\n由于PCB布局中的布线限制，电阻 $R_2$ 的整个底面，包括其连接焊盘，都直接位于一个大面积的内部接地层之上。这种布局覆盖的有效面积为 $A = 25 \\text{ mm}^2$。顶部信号层和内部接地层之间的PCB材料和厚度导致了 $C_{spec} = 0.45 \\text{ pF/mm}^2$ 的单位面积电容。在本问题中，可以忽略与电阻 $R_1$ 相关的任何类似效应。\n\n计算输出电压波形的幅值 $|V_{out}|$。结果以伏特为单位，并四舍五入到三位有效数字。", "solution": "在稳态下使用复阻抗对正弦源进行分析。从 $V_{out}$ 节点到地之间由布线引起的电容，可建模为一个并联电容器，其电容值 $C$ 由给定的单位面积电容与面积的乘积得出：\n$$\nC = C_{spec} A = \\left(0.45 \\times 10^{-12}\\ \\text{F/mm}^{2}\\right)\\left(25\\ \\text{mm}^{2}\\right) = 11.25 \\times 10^{-12}\\ \\text{F}.\n$$\n角频率为\n$$\n\\omega = 2\\pi f = 2\\pi \\left(150 \\times 10^{6}\\ \\text{s}^{-1}\\right).\n$$\n电容器的阻抗为\n$$\nZ_{C} = \\frac{1}{j\\omega C} = -\\,j\\frac{1}{\\omega C}.\n$$\n当 $R_{1}=R_{2}=R=1000\\ \\Omega$ 时，下支路的阻抗是 $R$ 与 $Z_C$ 的并联组合：\n$$\nZ_{2} = R \\parallel Z_{C} = \\frac{R Z_{C}}{R + Z_{C}}.\n$$\n设 $Z_{C}=-jX$，其中 $X=\\frac{1}{\\omega C}$。则\n$$\nZ_{2} = \\frac{R(-jX)}{R - jX} = \\frac{R X^{2}}{R^{2}+X^{2}} - j\\,\\frac{R^{2} X}{R^{2}+X^{2}}.\n$$\n输出幅值可由复分压公式得到：\n$$\n|V_{out}| = V_{p}\\,\\frac{|Z_{2}|}{|R_{1}+Z_{2}|}.\n$$\n现在代入数值。首先计算\n$$\n\\omega = 2\\pi \\cdot 150 \\times 10^{6} \\approx 9.42477796 \\times 10^{8}\\ \\text{s}^{-1},\\quad C = 11.25 \\times 10^{-12}\\ \\text{F},\n$$\n所以\n$$\n\\omega C \\approx 1.06028752 \\times 10^{-2},\\quad X=\\frac{1}{\\omega C} \\approx 94.3188\\ \\Omega.\n$$\n那么当 $R=1000\\ \\Omega$ 时，\n$$\nR^{2}+X^{2} \\approx 1.00889604 \\times 10^{6},\\quad \\Re\\{Z_{2}\\}=\\frac{R X^{2}}{R^{2}+X^{2}} \\approx 8.81759\\ \\Omega,\\quad \\Im\\{Z_{2}\\}=-\\frac{R^{2} X}{R^{2}+X^{2}} \\approx -93.48714\\ \\Omega,\n$$\n并且\n$$\n|Z_{2}| \\approx \\sqrt{(8.81759)^{2}+(93.48714)^{2}} \\approx 93.9021\\ \\Omega.\n$$\n对于串联和，\n$$\nR_{1}+Z_{2} \\approx (1008.81759) - j\\,93.48714\\ \\Omega,\\quad |R_{1}+Z_{2}| \\approx \\sqrt{(1008.81759)^{2}+(93.48714)^{2}} \\approx 1013.14006\\ \\Omega.\n$$\n因此，\n$$\n|V_{out}| = 5.0\\ \\text{V} \\times \\frac{93.9021}{1013.14006} \\approx 0.463421\\ \\text{V}.\n$$\n四舍五入到三位有效数字，幅值为 $0.463$ V。", "answer": "$$\\boxed{0.463}$$", "id": "1326528"}, {"introduction": "在认识到布局会产生不必要的寄生效应后，我们自然会思考如何利用布局技术来主动解决问题。此练习聚焦于一个普遍存在的挑战——串扰，即信号在相邻走线之间发生不必要的耦合。我们将探讨一种经典且高效的解决方案：插入一条接地的“防护走线”（guard trace），以屏蔽敏感的模拟信号，防止其受到高频数字信号的干扰 [@problem_id:1326492]。", "problem": "在设计混合信号印刷电路板 (PCB) 时，工程师面临一个常见的布局挑战。一条高频数字时钟线（“攻击”走线）与一条敏感的低压模拟信号线（“受害”走线）平行布线，长度为 $L$。这两条由介电介质隔开的铜走线的平行排列，形成了一个不希望出现的寄生电容。数字时钟信号的快速电压摆动会在模拟线路上感应出噪声电流，这种现象被称为容性串扰。工程师的目标是实施一项单一、简单的布局修改，以最大限度地减少这种容性串扰，而无需将走线重新布线到电路板的其他部分。\n\n在以下潜在的修改方案中，哪一项是能直接屏蔽受害走线，使其免受攻击走线影响的最有效且广泛使用的板级设计技术？\n\nA. 减小攻击走线和受害走线的宽度。\n\nB. 增加攻击走线和受害走线的宽度。\n\nC. 在攻击走线和受害走线之间插入一条独立的“保护走线”，使其与它们平行，并将此保护走线连接到地平面。\n\nD. 移除攻击走线和受害走线正下方层中的地平面，以减少它们对地的电容。", "solution": "两条平行PCB走线之间的容性串扰之所以产生，是因为来自攻击走线的电场通过互容耦合到了受害走线上。对于长度为 $L$ 的平行走线，注入到高阻抗受害节点的感应电流可以很好地用以下模型表示\n$$\ni_{\\text{inj}}(t) = C_{m}\\,\\frac{dv_{a}(t)}{dt},\n$$\n其中 $C_{m}$ 是由几何结构和介电质决定的互容，而 $v_{a}(t)$ 是攻击走线的电压。通常，我们可以写作 $C_{m}=\\varepsilon L\\,f(w_{a},w_{v},s,h)$，其中 $\\varepsilon$ 是介电常数，$w_{a}$ 和 $w_{v}$ 是走线宽度，$s$ 是间距，$h$ 是到参考平面的高度，而 $f$ 是关于 $s$ 的单调递减函数；通常 $\\partial C_{m}/\\partial s<0$ 且 $\\partial C_{m}/\\partial w_{a},\\partial C_{m}/\\partial w_{v}>0$。\n\n在攻击走线和受害走线之间引入一条接地的保护走线，并将此三导体系统建模为：攻击走线与保护走线之间的电容为 $C_{ag}$，保护走线与受害走线之间的电容为 $C_{gv}$，以及攻击走线与受害走线之间残留的直接电容为 $C_{av}$。如果保护走线充分填充了其间空间，则 $C_{av}$ 会变得很小。设 $v_{a}(t)$、$v_{g}(t)$ 和 $v_{v}(t)$ 分别为节点电压。根据基尔霍夫电流定律，受害节点的电流为\n$$\ni_{v}(t)=C_{av}\\frac{d}{dt}\\!\\left(v_{a}-v_{v}\\right)+C_{gv}\\frac{d}{dt}\\!\\left(v_{g}-v_{v}\\right).\n$$\n如果保护走线以低阻抗连接到地平面，那么在所关注的频率范围内 $v_{g}(t)\\approx 0$，从而得出\n$$\ni_{v}(t)\\approx C_{av}\\frac{dv_{a}}{dt}-(C_{av}+C_{gv})\\frac{dv_{v}}{dt}.\n$$\n对于高阻抗的受害输入端，直接的噪声源项是 $C_{av}\\frac{dv_{a}}{dt}$。通过有效的保护走线，$C_{av}\\approx 0$，因此有效互容 $C_{m}^{\\text{eff}}$ 从 $C_{m}$ 减小到一个满足 $C_{m}^{\\text{eff}}\\approx C_{av}\\ll C_{m}$ 的值，于是\n$$\ni_{\\text{inj}}(t)\\approx C_{m}^{\\text{eff}}\\frac{dv_{a}}{dt}\\approx 0.\n$$\n从物理上讲，来自攻击走线的位移电流主要通过 $C_{ag}$ 终止于接地的保护走线，而保护走线近似恒定的电位阻止了电场到达受害走线。\n\n评估各个选项：\n- A: 减小宽度可能会轻微减小 $C_{m}$，但会增加电阻和阻抗，并且不能直接阻挡电场线；这不是最有效的单一修改方案。\n- B: 增加宽度通常会增大 $C_{m}$，会产生反效果。\n- D: 移除地平面会增加电场扩散和返回路径的环路面积，通常会增加耦合效应并降低阻抗控制的效果。\n- C: 插入接地的保护走线提供了直接的静电屏蔽，减小了 $C_{m}^{\\text{eff}}$，是一种成熟且广泛使用的PCB技术。沿其长度进行适当的接地缝合可进一步降低保护走线的阻抗，使其保持 $v_{g}\\approx 0$。\n\n因此，为了直接屏蔽受害走线免受攻击走线的影响，最有效且广泛使用的单一板级修改是使用接地的保护走线。", "answer": "$$\\boxed{C}$$", "id": "1326492"}, {"introduction": "在解决了元件和走线级别的寄生问题后，我们将视野提升至系统层面，探讨混合信号设计的核心——接地策略。这个实践场景模拟了一个包含模数转换器（ADC）的典型数据采集系统，展示了如何通过划分模拟地（AGND）和数字地（DGND）并采用“星形连接”的方式，来有效阻止数字噪声污染敏感的模拟电路。掌握这一原则对于任何高精度混合信号设计的成功都至关重要 [@problem_id:1326478]。", "problem": "一位系统工程师正在为一​​个简单的数据采集系统设计印刷电路板 (PCB)。该电路板包含三个主要组件：\n1.  一个模拟温度传感器，其输出电压与环境温度成正比。\n2.  一个模数转换器 (ADC)，它将传感器的模拟电压转换为数字值。\n3.  一个微控制器，用于处理来自 ADC 的数字数据。\n\n为了最大限度地减少噪声并确保测量精度，布局工程师已将 PCB 划分为两个不同的区域：模拟部分和数字部分。模拟传感器完全放置在模拟部分内，该部分有自己的模拟地平面 (AGND)。微控制器完全放置在数字部分内，该部分有自己的数字地平面 (DGND)。ADC 是一个混合信号组件，直接放置在分隔两个区域的分割线上。\n\n为了使系统正常工作，必须连接 AGND 和 DGND 平面以建立一个公共参考电位。然而，此连接的位置对于防止嘈杂的数字返回电流干扰敏感的模拟电路至关重要。以下哪种接地策略代表了这种混合信号电路的理想实现方式？\n\nA. 使用宽铜走线在微控制器位置连接 AGND 和 DGND 平面。\n\nB. 用多条沿两个区域之间分割线均匀分布的短走线将 AGND 和 DGND 平面连接在一起。\n\nC. 将 AGND 和 DGND 平面完全分开，并且不在 PCB 上的任何地方连接它们。\n\nD. 使用单一的专用连接点（“星形”连接）来连接 AGND 和 DGND 平面，并且此连接仅在 ADC 的接地引脚处进行。\n\nE. 使用宽铜走线在模拟温度传感器位置连接 AGND 和 DGND 平面。", "solution": "我们将模拟和数字地平面建模为具有频率相关阻抗 $Z_{A}(\\omega)$ 和 $Z_{D}(\\omega)$ 的有限阻抗返回路径。一个混合信号组件 (ADC) 跨越分割区域，其模拟和数字接地引脚必须都参考一个公共电位以避免误差。假设 AGND 和 DGND 之间的唯一预期连接点为 $P$，其阻抗为 $Z_{P}(\\omega)$。与 ADC 接口和微控制器相关的数字返回电流表示为 $I_{d}(\\omega)$，而敏感的模拟返回电流表示为 $I_{a}(\\omega)$。\n\n一个中心原则是，高频返回电流会沿着阻抗最小的路径流动，也就是其信号走线下方的电感最小的路径。嘈杂的数字返回路径和敏感的模拟返回路径之间的任何共享阻抗都会在该共享阻抗上产生一个噪声电压 $V_{\\text{error}}(\\omega)$。如果一个数字返回电流 $I_{d}(\\omega)$ 与模拟电路共享接地阻抗，模拟地参考点将经历\n$$\nV_{\\text{error}}(\\omega)=I_{d}(\\omega)\\,Z_{\\text{shared}}(\\omega), \\quad Z_{\\text{shared}}(\\omega)=R+ j\\omega L+\\frac{1}{j\\omega C},\n$$\n这会破坏测量精度。因此，接地策略应最小化模拟节点所看到的 $Z_{\\text{shared}}(\\omega)$，并使数字返回电流远离模拟地平面，除了在一个受控的单点之外。\n\n在 ADC 接地引脚处采用星形连接策略可以实现这一点：仅在 ADC 接地引脚处建立 AGND 和 DGND 之间的单一专用连接，这样模拟域和数字域之间的边界就恰好位于混合信号组件处。通过在 ADC 处的 $P$ 点建立单一连接，从微控制器到 ADC 的数字接口返回电流流向 ADC 的数字地，然后仅在 ADC 内部需要时在 $P$ 点跨接到模拟地，而不会在其他地方穿过模拟地平面。那么，在 ADC 接地参考点上感应出的误差为\n$$\nV_{\\text{error}}(\\omega)=I_{d}(\\omega)\\,Z_{P}(\\omega),\n$$\n通过使 $Z_{P}(\\omega)$ 尽可能小，并避免任何可能产生不受控电流环路或更大共享区域的并联连接，可以将此误差降至最低。这限制了噪声电流，并最小化了模数边界处的环路面积。\n\n评估各个选项：\n\nA. 在微控制器处连接 AGND 和 DGND 会使连接点远离 ADC 边界。与 ADC 接口相关的数字返回电流将面临更长的路径，并可能迫使电流穿过模拟平面的区域。这样，模拟电路就与数字返回路径共享了更大的感抗，由于 $Z_{\\text{shared}}(\\omega)\\approx j\\omega L$ 随频率增长，这会增加 $V_{\\text{error}}(\\omega)=I_{d}(\\omega)\\,Z_{\\text{shared}}(\\omega)$。\n\nB. 沿着分割线分布的多条短走线会产生多个并联连接，形成环路并允许在 AGND 和 DGND 之间产生循环电流。这破坏了单点控制，实际上合并了地平面，并使数字返回电流能够通过各种低阻抗路径进入模拟区域，从而增加了耦合。\n\nC. 将 AGND 和 DGND 完全分开违反了需要公共参考电位的要求。ADC 和微控制器将缺少一个确定的接地电位差，导致逻辑未定义和转换错误。实际的混合信号系统需要一个单一的参考连接。\n\nD. 在 ADC 接地引脚处的单一专用星形连接，在模数边界处提供了一个精确受控的参考点，从而最小化了模拟区域中的 $Z_{\\text{shared}}(\\omega)$ 并限制了数字返回电流。这是混合信号 PCB 布局的理想策略。\n\nE. 在传感器处连接地平面会迫使数字返回电流流经最敏感电路附近的模拟接地区域，从而最大化了传感器参考点上的耦合和 $V_{\\text{error}}(\\omega)$。\n\n因此，理想的实现方式是在 ADC 接地引脚处进行 AGND 和 DGND 的单点（星形）连接。", "answer": "$$\\boxed{D}$$", "id": "1326478"}]}
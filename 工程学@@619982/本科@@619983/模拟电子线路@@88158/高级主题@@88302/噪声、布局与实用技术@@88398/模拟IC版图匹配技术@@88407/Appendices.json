{"hands_on_practices": [{"introduction": "在模拟集成电路设计中，随机失配是制造过程中不可避免的固有特性。这个练习将带你实践模拟版图设计中最基本的权衡之一：使用更大的器件面积来换取更好的匹配精度。通过这个计算，你将能够量化地理解Pelgrom定律的威力，即随机失配通常与器件面积的平方根成反比。[@problem_id:1281092]", "problem": "在高精度数模转换器 (DAC) 的设计中，其精度关键取决于其内部电流源晶体管的匹配程度。一个核心构建模块是简单的 NMOS 电流镜，用于生成精确缩放的电流。由于半导体制造过程中固有的随机微观变化，任何一对设计成完全相同的晶体管都会在其电气特性上表现出微小的失配。对于在饱和区工作的匹配晶体管，模拟版图的一条基本原理指出，其分数电流失配的标准差（表示为 $\\sigma(\\Delta I/I)$）与它们的共同栅极面积（$A = W \\times L$，其中 $W$ 是栅极宽度， $L$ 是栅极长度）的平方根成反比。\n\n电流镜的初始版图使用了栅极面积为 $A_0$ 的晶体管。该设计预测产生的随机电流失配的标准差为 $2.0\\%$。为了满足 DAC 严格的精度要求，必须重新设计电路，将此随机失配贡献降低到标准差为 $0.5\\%$。假设晶体管的工作点（即其过驱动电压）保持不变，确定为了达到目标失配性能，晶体管的栅极面积必须增加的倍数。", "solution": "随机电流失配的标准差与共同栅极面积的平方根成反比。这可以表示为\n$$\n\\sigma=\\frac{K}{\\sqrt{A}},\n$$\n其中 $K$ 是由工艺和工作点决定的常数，而 $A=W L$ 是栅极面积。\n\n对于面积为 $A_{0}$ 且失配标准差为 $\\sigma_{0}=0.02$ 的初始设计，\n$$\n\\sigma_{0}=\\frac{K}{\\sqrt{A_{0}}}.\n$$\n对于面积为 $A_{1}$ 且标准差为 $\\sigma_{1}=0.005$ 的重新设计目标，\n$$\n\\sigma_{1}=\\frac{K}{\\sqrt{A_{1}}}.\n$$\n两式相除，\n$$\n\\frac{\\sigma_{1}}{\\sigma_{0}}=\\frac{K/\\sqrt{A_{1}}}{K/\\sqrt{A_{0}}}=\\sqrt{\\frac{A_{0}}{A_{1}}}.\n$$\n求解所需的面积缩放因子 $F=\\frac{A_{1}}{A_{0}}$，\n$$\nF=\\frac{A_{1}}{A_{0}}=\\left(\\frac{\\sigma_{0}}{\\sigma_{1}}\\right)^{2}.\n$$\n代入给定值，\n$$\nF=\\left(\\frac{0.02}{0.005}\\right)^{2}=4^{2}=16.\n$$\n因此，栅极面积必须增加 16 倍。", "answer": "$$\\boxed{16}$$", "id": "1281092"}, {"introduction": "接下来，我们转向系统失配——一种更具可预测性但同样棘手的挑战。真正的匹配远不止在室温下拥有相同的标称值，它要求元器件在所有工作条件下都表现出一致的行为。本练习将通过一个具体案例，向你揭示一个常见的版图设计陷阱：如果使用具有不同温度系数 ($TCR$) 的材料来构建本应匹配的器件，随着温度变化，其性能将出现显著偏差。[@problem_id:1281065]", "problem": "一位模拟集成电路设计师的任务是创建一个精密分压器，该分压器从输入电压 $V_{in}$ 产生输出电压 $V_{out}$，使得分压比恰好为 $1/2$。该设计使用两个电阻 $R_1$ 和 $R_2$ 构成标准分压结构，其中 $V_{out} = V_{in} \\frac{R_2}{R_1 + R_2}$。在制造工厂的参考温度 $T_0 = 27 \\, ^\\circ\\text{C}$ 下，两个电阻都被制造为具有完全相同的标称电阻值 $R_0$。\n\n由于硅芯片上的布线限制，$R_1$ 使用掺杂多晶硅条实现，而 $R_2$ 使用N阱扩散实现。这两种材料具有不同的热学特性。电阻的温度依赖性可以用一阶近似来建模：$R(T) = R_{ref}[1 + \\alpha(T - T_{ref})]$，其中 $\\alpha$ 是电阻温度系数 (TCR)。多晶硅的TCR为 $\\alpha_p = 1500 \\, \\text{ppm}/^\\circ\\text{C}$，N阱的TCR为 $\\alpha_n = 4000 \\, \\text{ppm}/^\\circ\\text{C}$。\n\n该电路部署在一个系统中，其稳态工作温度为 $T_f = 125 \\, ^\\circ\\text{C}$。计算在此工作温度下电压分压比的分数误差。分数误差定义为 $\\left| \\frac{\\text{ratio}_{actual} - \\text{ratio}_{ideal}}{\\text{ratio}_{ideal}} \\right|$，其中 $\\text{ratio}_{ideal}$ 是在 $T_0$ 时的比率，而 $\\text{ratio}_{actual}$ 是在 $T_f$ 时的比率。\n\n将您的最终答案表示为十进制数，并四舍五入到三位有效数字。", "solution": "在 $T_{0}$ 时的理想分压器具有 $R_{1}(T_{0})=R_{2}(T_{0})=R_{0}$，因此理想比率为\n$$\n\\text{ratio}_{\\text{ideal}}=\\frac{R_{2}}{R_{1}+R_{2}}=\\frac{R_{0}}{R_{0}+R_{0}}=\\frac{1}{2}.\n$$\n根据一阶温度依赖性 $R(T)=R_{\\text{ref}}\\left[1+\\alpha\\left(T-T_{\\text{ref}}\\right)\\right]$，定义 $\\Delta T=T_{f}-T_{0}$。给定 $T_{f}=125$ 和 $T_{0}=27$，\n$$\n\\Delta T=125-27=98.\n$$\n将TCR从ppm转换为每度：\n$$\n\\alpha_{p}=1500\\times 10^{-6}=0.0015,\\qquad \\alpha_{n}=4000\\times 10^{-6}=0.004.\n$$\n则\n$$\nR_{1}(T_{f})=R_{0}\\left(1+\\alpha_{p}\\Delta T\\right)=R_{0}\\left(1+0.0015\\times 98\\right)=R_{0}(1+0.147)=1.147\\,R_{0},\n$$\n$$\nR_{2}(T_{f})=R_{0}\\left(1+\\alpha_{n}\\Delta T\\right)=R_{0}\\left(1+0.004\\times 98\\right)=R_{0}(1+0.392)=1.392\\,R_{0}.\n$$\n因此，在 $T_{f}$ 时的实际比率为\n$$\n\\text{ratio}_{\\text{actual}}=\\frac{R_{2}(T_{f})}{R_{1}(T_{f})+R_{2}(T_{f})}=\\frac{1.392\\,R_{0}}{1.147\\,R_{0}+1.392\\,R_{0}}=\\frac{1.392}{2.539}.\n$$\n分数误差为\n$$\n\\left|\\frac{\\text{ratio}_{\\text{actual}}-\\text{ratio}_{\\text{ideal}}}{\\text{ratio}_{\\text{ideal}}}\\right|=\\left|\\frac{\\frac{1.392}{2.539}-\\frac{1}{2}}{\\frac{1}{2}}\\right|=2\\left|\\frac{1.392}{2.539}-\\frac{1}{2}\\right|.\n$$\n计算数值：\n$$\n\\frac{1.392}{2.539}\\approx 0.548247,\\quad 2\\left|0.548247-\\frac{1}{2}\\right|=2(0.048247)\\approx 0.0964947.\n$$\n四舍五入到三位有效数字，分数误差为 $0.0965$。", "answer": "$$\\boxed{0.0965}$$", "id": "1281065"}, {"introduction": "为了对抗由工艺梯度引起的系统失配，版图设计师开发了多种强大的对称性技术，其中最著名的就是共中心版图 (common-centroid layout)。其核心思想是通过巧妙地排布子单元器件，使得每个等效大器件的“几何中心”重合，从而使线性梯度的影响相互抵消。这个练习将让你从一个版图设计师的视角出发，通过视觉和逻辑分析，为一个电容阵列选择出正确的共中心布局方案。[@problem_id:1281127]", "problem": "在设计高精度模拟电路（例如数模转换器（DAC））时，实现元件之间的精确比率至关重要。对于基于电容的DAC，这通常涉及使用相同的单位电容阵列来构建更大的电容器。为了减轻整个硅片上系统性工艺偏差（例如，氧化层厚度的线性梯度）的影响，采用了一种称为共质心布局的布局技术。该技术确保每组单位电容的几何“质心”位于同一点。\n\n考虑一个3位二进制加权电容阵列，其设计包含三个主电容器：$C_1$、$C_2$ 和 $C_4$，其目标电容比为 $1:2:4$。这些电容器由电容值为 $C$ 的相同单位电容构成。因此，$C_1$ 由一个单位电容组成，$C_2$ 由两个单位电容组成，而 $C_4$ 由四个单位电容组成。\n\n下面是在一个 $3 \\times 3$ 网格上为这七个单位电容提出的四种布局方案。在每种布局中，数字 1、2 或 4 分别表示属于电容器 $C_1$、$C_2$ 或 $C_4$ 的单位电容。字母 D 代表一个虚拟单元或未使用的位置。\n\n下列哪种布局方案为整个电容阵列正确地实现了共质心原理？可能有一个或多个正确选项。\n\nA)\n```\n4  4  4\n4  2  1\n2  D  D\n```\n\nB)\n```\n4  1  4\n2  D  2\n4  D  4\n```\n\nC)\n```\n4  2  4\nD  1  D\n4  2  4\n```\n\nD)\n```\n4  D  4\n2  1  2\n4  D  4\n```", "solution": "共质心布局的核心原理是，构成每个较大元件的单位元件的几何质心必须重合于一个单点。在本问题中，我们有一个 $3 \\times 3$ 的网格和三个电容器：$C_1$（由一个单位电容 '1' 组成），$C_2$（由两个单位电容 '2' 组成），以及 $C_4$（由四个单位电容 '4' 组成）。\n\n我们为这个 $3 \\times 3$ 网格建立一个坐标系，左上角单元格为 $(x,y)=(1,1)$，右上角为 $(3,1)$，左下角为 $(1,3)$，右下角为 $(3,3)$。该网格的中心位置在 $(2,2)$。要使一个布局成为共质心布局，'1' 的质心、'2' 的质心和 '4' 的质心都必须位于这个中心点 $(2,2)$。\n\n一组位于位置 $(x_i, y_i)$ 的 $N$ 个单位电容的质心 $(\\bar{x}, \\bar{y})$ 计算如下：\n$$\n\\bar{x} = \\frac{1}{N} \\sum_{i=1}^{N} x_i, \\quad \\bar{y} = \\frac{1}{N} \\sum_{i=1}^{N} y_i\n$$\n\n我们现在来评估每个选项。\n\n**电容器质心分析：**\n-   **对于 $C_1$（一个单位电容 '1'）：** 其质心就是该单个电容的位置。要使其质心位于 $(2,2)$，'1' 电容必须放置在 $(2,2)$。\n-   **对于 $C_2$（两个单位电容 '2'）：** 其质心是这两个电容的中点。如果它们位于 $(x_1, y_1)$ 和 $(x_2, y_2)$，质心为 $(\\frac{x_1+x_2}{2}, \\frac{y_1+y_2}{2})$。要使该质心为 $(2,2)$，这两个电容必须相对于中心对称放置。\n-   **对于 $C_4$（四个单位电容 '4'）：** 其质心是这四个电容的平均位置。要使该质心为 $(2,2)$，这四个电容必须相对于中心对称放置。\n\n**评估选项：**\n\n**A)**\n布局： `4 4 4 / 4 2 1 / 2 D D`\n-   $C_1$ 位置：'1' 位于 $(3,2)$。其质心为 $(3,2)$。\n由于 $C_1$ 的质心不在网格中心 $(2,2)$，该布局不是共质心布局。我们无需检查其他电容器。\n\n**B)**\n布局： `4 1 4 / 2 D 2 / 4 D 4`\n-   $C_1$ 位置：'1' 位于 $(2,1)$。其质心为 $(2,1)$。\n-   $C_2$ 位置：'2' 位于 $(1,2)$ 和 $(3,2)$。其质心为 $(\\frac{1+3}{2}, \\frac{2+2}{2}) = (2,2)$。\n-   $C_4$ 位置：'4' 位于 $(1,1)$、$(3,1)$、$(1,3)$ 和 $(3,3)$。其质心为 $(\\frac{1+3+1+3}{4}, \\frac{1+1+3+3}{4}) = (2,2)$。\n$C_1$ 的质心是 $(2,1)$，而 $C_2$ 和 $C_4$ 的质心是 $(2,2)$。由于并非所有质心都重合，因此这不是一个共质心布局。\n\n**C)**\n布局： `4 2 4 / D 1 D / 4 2 4`\n-   $C_1$ 位置：'1' 位于 $(2,2)$。其质心为 $(2,2)$。\n-   $C_2$ 位置：'2' 位于 $(2,1)$ 和 $(2,3)$。其质心为 $(\\frac{2+2}{2}, \\frac{1+3}{2}) = (2,2)$。\n-   $C_4$ 位置：'4' 位于 $(1,1)$、$(3,1)$、$(1,3)$ 和 $(3,3)$。其质心为 $(\\frac{1+3+1+3}{4}, \\frac{1+1+3+3}{4}) = (2,2)$。\n所有三个电容器的质心都在 $(2,2)$。该布局正确地实现了共质心原理。\n\n**D)**\n布局： `4 D 4 / 2 1 2 / 4 D 4`\n-   $C_1$ 位置：'1' 位于 $(2,2)$。其质心为 $(2,2)$。\n-   $C_2$ 位置：'2' 位于 $(1,2)$ 和 $(3,2)$。其质心为 $(\\frac{1+3}{2}, \\frac{2+2}{2}) = (2,2)$。\n-   $C_4$ 位置：'4' 位于 $(1,1)$、$(3,1)$、$(1,3)$ 和 $(3,3)$。其质心为 $(\\frac{1+3+1+3}{4}, \\frac{1+1+3+3}{4}) = (2,2)$。\n所有三个电容器的质心都在 $(2,2)$。该布局也正确地实现了共质心原理。\n\n因此，选项 C 和 D 都是有效的共质心布局。", "answer": "$$\\boxed{CD}$$", "id": "1281127"}]}
{"hands_on_practices": [{"introduction": "The transresistance amplifier is a cornerstone of shunt-shunt feedback, designed to convert an input current into a proportional output voltage. This exercise [@problem_id:1332786] places you in the role of a design engineer working on a photodetector circuit, a classic application where this topology excels. By assuming an ideal op-amp, you will focus on the fundamental relationship between the feedback resistor and the circuit's transresistance gain, a crucial first step in understanding these amplifiers.", "problem": "An engineer is designing the front-end electronics for a simple optical power meter. The system uses a photodiode to convert incident light into a photocurrent, which is then amplified by a transresistance amplifier to produce a measurable output voltage. The transresistance amplifier is constructed using an operational amplifier (op-amp) that can be considered ideal.\n\nThe photodiode is characterized by a responsivity $\\mathcal{R} = 0.65$ A/W. This means it generates a photocurrent $I_{ph}$ given by $I_{ph} = \\mathcal{R} \\cdot P_{in}$, where $P_{in}$ is the incident optical power. The photodiode is connected such that this current flows into the inverting input of the op-amp. A single feedback resistor, $R_f$, is connected between the op-amp's output and its inverting input. The non-inverting input of the op-amp is connected to ground.\n\nFor a specific measurement, the incident optical power is $P_{in} = 5.0 \\ \\mu$W. The design requires the amplifier to produce a corresponding output voltage of $V_{out} = -4.0$ V.\n\nCalculate the value of the feedback resistor $R_f$ required to achieve this performance. Express your answer in kilo-ohms ($k\\Omega$), rounded to three significant figures.", "solution": "For an ideal op-amp in a transresistance (transimpedance) configuration with the non-inverting input grounded, the inverting input is at virtual ground. The photodiode injects current $I_{ph}$ into the inverting node, and this current flows through the feedback resistor $R_{f}$ to the output. By Kirchhoff’s current law at the inverting node,\n$$I_{ph}=\\frac{0-V_{out}}{R_{f}},$$\nwhich gives the standard transresistance relation\n$$V_{out}=-I_{ph}R_{f}.$$\nThe photodiode current is related to the incident power by\n$$I_{ph}=\\mathcal{R}P_{in}.$$\nSubstituting into the transresistance relation and solving for $R_{f}$,\n$$R_{f}=\\frac{-V_{out}}{\\mathcal{R}P_{in}}.$$\nWith $V_{out}=-4.0\\ \\text{V}$, $\\mathcal{R}=0.65\\ \\text{A/W}$, and $P_{in}=5.0\\times 10^{-6}\\ \\text{W}$,\n$$I_{ph}=\\mathcal{R}P_{in}=0.65\\times 5.0\\times 10^{-6}\\ \\text{A}=3.25\\times 10^{-6}\\ \\text{A},$$\n$$R_{f}=\\frac{4.0}{3.25\\times 10^{-6}}\\ \\Omega=\\frac{4.0}{3.25}\\times 10^{6}\\ \\Omega.$$\nConverting to kilo-ohms,\n$$R_{f}=\\frac{4.0}{3.25}\\times 10^{3}\\ \\text{k}\\Omega\\approx 1.23\\times 10^{3}\\ \\text{k}\\Omega,$$\nrounded to three significant figures.", "answer": "$$\\boxed{1.23 \\times 10^{3}}$$", "id": "1332786"}, {"introduction": "A key benefit of employing shunt-shunt feedback is the significant reduction in the amplifier's output impedance, which allows it to function as a nearly ideal voltage source for subsequent stages. This practice [@problem_id:1332801] moves beyond the ideal model to explore this important characteristic. By incorporating the op-amp's intrinsic output resistance $r_o$ and finite open-loop gain $A_{ol}$, you will derive the closed-loop output resistance and analytically demonstrate how feedback enhances circuit performance.", "problem": "A transresistance amplifier is constructed using a non-ideal operational amplifier (op-amp) and a feedback resistor $R_f$. The op-amp is characterized by a finite open-loop voltage gain $A_{ol}$ and a non-zero open-loop output resistance $r_o$. Its open-loop input resistance is assumed to be infinite. The amplifier is configured with the feedback resistor $R_f$ connecting the output terminal to the inverting input terminal. The non-inverting input is connected to ground.\n\nThe input signal is provided by a current source connected to the inverting input. This current source has a finite internal source resistance $R_s$.\n\nYour task is to find the closed-loop output resistance, $R_{out,f}$, of this transresistance amplifier. Provide your answer as a single closed-form analytic expression in terms of the given parameters: $A_{ol}$, $r_o$, $R_f$, and $R_s$.", "solution": "To determine the closed-loop output resistance, $R_{out,f}$, we use the test-source method. We set all independent sources in the circuit to zero and apply a test voltage source $v_x$ to the output terminal. We then calculate the current $i_x$ drawn from this test source. The output resistance is given by the ratio $R_{out,f} = v_x / i_x$.\n\nFirst, we establish the circuit model for this analysis. Setting the input current source to zero means it is an open circuit. However, its internal source resistance $R_s$ remains in the circuit, connected between the inverting input terminal and ground. The non-ideal op-amp is modeled as a voltage-controlled voltage source with a value of $A_{ol}v_d$ in series with the open-loop output resistance $r_o$. Here, $v_d$ is the differential input voltage $v_d = v_+ - v_-$. Since the non-inverting input is grounded ($v_+=0$), we have $v_d = -v_-$, where $v_-$ is the voltage at the inverting input terminal. The internal voltage source of the op-amp is thus $-A_{ol}v_-$.\n\nWe apply Kirchhoff's Current Law (KCL) at the inverting input node, which has voltage $v_-$. The op-amp's input resistance is infinite, so no current flows into the op-amp's input terminal. The sum of the currents leaving the node through resistors $R_s$ and $R_f$ must be zero:\n$$\n\\frac{v_- - 0}{R_s} + \\frac{v_- - v_x}{R_f} = 0\n$$\nWe can rearrange this equation to solve for $v_-$ in terms of $v_x$:\n$$\nv_-\\left(\\frac{1}{R_s} + \\frac{1}{R_f}\\right) = \\frac{v_x}{R_f}\n$$\n$$\nv_-\\left(\\frac{R_f + R_s}{R_s R_f}\\right) = \\frac{v_x}{R_f}\n$$\n$$\nv_- = v_x \\frac{R_s R_f}{R_f(R_f + R_s)} = v_x \\frac{R_s}{R_s + R_f}\n$$\n\nNext, we apply KCL at the output node, which is held at the test voltage $v_x$. The total current $i_x$ from the test source is the sum of the current flowing into the feedback resistor $R_f$ and the current flowing into the op-amp's output terminal through $r_o$.\nThe current through $R_f$ is $(v_x - v_-)/R_f$.\nThe current through $r_o$ is $(v_x - (-A_{ol}v_-))/r_o = (v_x + A_{ol}v_-)/r_o$.\nSo, the KCL equation at the output node is:\n$$\ni_x = \\frac{v_x - v_-}{R_f} + \\frac{v_x + A_{ol}v_-}{r_o}\n$$\nWe can regroup this equation by the variables $v_x$ and $v_-$:\n$$\ni_x = v_x\\left(\\frac{1}{R_f} + \\frac{1}{r_o}\\right) + v_-\\left(\\frac{A_{ol}}{r_o} - \\frac{1}{R_f}\\right)\n$$\nNow, we substitute the expression for $v_-$ that we derived earlier:\n$$\ni_x = v_x\\left(\\frac{1}{R_f} + \\frac{1}{r_o}\\right) + \\left(v_x \\frac{R_s}{R_s + R_f}\\right)\\left(\\frac{A_{ol}}{r_o} - \\frac{1}{R_f}\\right)\n$$\nTo find the output admittance $i_x/v_x$, we divide the entire equation by $v_x$:\n$$\n\\frac{i_x}{v_x} = \\left(\\frac{1}{R_f} + \\frac{1}{r_o}\\right) + \\left(\\frac{R_s}{R_s + R_f}\\right)\\left(\\frac{A_{ol}}{r_o} - \\frac{1}{R_f}\\right)\n$$\nLet's expand and simplify the expression:\n$$\n\\frac{i_x}{v_x} = \\frac{1}{R_f} + \\frac{1}{r_o} + \\frac{A_{ol}R_s}{r_o(R_s + R_f)} - \\frac{R_s}{R_f(R_s + R_f)}\n$$\nWe can combine the terms with $R_f$ in the denominator:\n$$\n\\frac{1}{R_f} - \\frac{R_s}{R_f(R_s + R_f)} = \\frac{R_s + R_f - R_s}{R_f(R_s + R_f)} = \\frac{R_f}{R_f(R_s + R_f)} = \\frac{1}{R_s + R_f}\n$$\nSubstituting this back into the expression for the admittance:\n$$\n\\frac{i_x}{v_x} = \\frac{1}{r_o} + \\frac{A_{ol}R_s}{r_o(R_s + R_f)} + \\frac{1}{R_s + R_f}\n$$\nTo combine these terms, we find a common denominator, which is $r_o(R_s + R_f)$:\n$$\n\\frac{i_x}{v_x} = \\frac{R_s + R_f}{r_o(R_s + R_f)} + \\frac{A_{ol}R_s}{r_o(R_s + R_f)} + \\frac{r_o}{r_o(R_s + R_f)}\n$$\n$$\n\\frac{i_x}{v_x} = \\frac{R_s + R_f + A_{ol}R_s + r_o}{r_o(R_s + R_f)}\n$$\nThe closed-loop output resistance $R_{out,f}$ is the reciprocal of this admittance:\n$$\nR_{out,f} = \\frac{v_x}{i_x} = \\frac{r_o(R_s + R_f)}{R_s + R_f + r_o + A_{ol}R_s}\n$$\nThis expression can be rearranged slightly to group terms with $R_s$:\n$$\nR_{out,f} = \\frac{r_o(R_s + R_f)}{R_s(1 + A_{ol}) + R_f + r_o}\n$$\nThis is the final expression for the closed-loop output resistance.", "answer": "$$ \\boxed{\\frac{r_o(R_s + R_f)}{R_s(1 + A_{ol}) + R_f + r_o}} $$", "id": "1332801"}, {"introduction": "The principles of feedback are not limited to op-amp circuits; they are fundamental to all amplifier design. This problem [@problem_id:1332798] challenges you to analyze a shunt-shunt feedback amplifier built with a discrete Bipolar Junction Transistor (BJT). You will calculate the circuit's input resistance, demonstrating another primary advantage of this topology—the creation of a low input impedance, which is essential for accurately measuring a signal from a current source.", "problem": "An analog circuit designer is analyzing a single-stage amplifier built around a Bipolar Junction Transistor (BJT). The amplifier is configured in a common-emitter topology with collector feedback for biasing and signal stability. The BJT has a DC current gain of $\\beta = 120$ and is biased to have a DC collector current of $I_C = 2.0 \\text{ mA}$. The thermal voltage is given as $V_T = 25 \\text{ mV}$. The collector is connected to the DC supply via a resistor $R_C = 4.7 \\text{ k}\\Omega$, and a feedback resistor $R_F = 150 \\text{ k}\\Omega$ connects the collector to the base. A load resistor $R_L = 10 \\text{ k}\\Omega$ is AC-coupled to the collector. For small-signal analysis, you can assume the Early effect is negligible (i.e., the BJT's output resistance $r_o$ is infinite). Calculate the small-signal input resistance of this amplifier stage. Express your answer in kilo-ohms ($k\\Omega$) and round it to three significant figures.", "solution": "Use the hybrid-$\\pi$ small-signal model with emitter at AC ground and negligible Early effect. The transistor small-signal parameters are\n$$g_{m}=\\frac{I_{C}}{V_{T}},\\qquad r_{\\pi}=\\frac{\\beta}{g_{m}}.$$\nLet the base voltage be $v_{b}$ and the collector voltage be $v_{c}$ (emitter at 0). The collector node is connected to ground through $R_{C}$ and $R_{L}$ (in parallel), and to the base through $R_{F}$. The controlled current source $g_{m}v_{\\pi}$ (with $v_{\\pi}=v_{b}$) flows from collector to emitter.\n\nKCL at the collector gives\n$$\\frac{v_{c}}{R_{C}}+\\frac{v_{c}}{R_{L}}+g_{m}v_{b}=\\frac{v_{b}-v_{c}}{R_{F}},$$\nso\n$$v_{c}\\left(\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}\\right)=v_{b}\\left(\\frac{1}{R_{F}}-g_{m}\\right),$$\nand thus\n$$v_{c}=v_{b}\\,\\frac{\\frac{1}{R_{F}}-g_{m}}{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}}.$$\n\nThe input current at the base is the sum of currents into $r_{\\pi}$ and $R_{F}$:\n$$i_{\\text{in}}=\\frac{v_{b}}{r_{\\pi}}+\\frac{v_{b}-v_{c}}{R_{F}}.$$\nUsing the expression for $v_{c}$, we get\n$$v_{b}-v_{c}=v_{b}\\left[1-\\frac{\\frac{1}{R_{F}}-g_{m}}{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}}\\right]\n=v_{b}\\,\\frac{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+g_{m}}{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}}.$$\nHence\n$$\\frac{i_{\\text{in}}}{v_{b}}=\\frac{1}{r_{\\pi}}+\\frac{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+g_{m}}{R_{F}\\left(\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}\\right)}.$$\nTherefore the small-signal input resistance is\n$$R_{\\text{in}}=\\left[\\frac{1}{r_{\\pi}}+\\frac{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+g_{m}}{R_{F}\\left(\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}\\right)}\\right]^{-1}.$$\n\nNow evaluate with the given values:\n$$g_{m}=\\frac{I_{C}}{V_{T}}=\\frac{2.0\\times 10^{-3}}{25\\times 10^{-3}}=0.08\\ \\text{S},\\quad\nr_{\\pi}=\\frac{\\beta}{g_{m}}=\\frac{120}{0.08}=1500\\ \\Omega.$$\nAlso,\n$$\\frac{1}{R_{C}}=\\frac{1}{4700}=2.127659574\\times 10^{-4}\\ \\text{S},\\quad\n\\frac{1}{R_{L}}=\\frac{1}{10000}=1.0\\times 10^{-4}\\ \\text{S},\\quad\n\\frac{1}{R_{F}}=\\frac{1}{150000}=6.666666667\\times 10^{-6}\\ \\text{S}.$$\nHence\n$$\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}=3.194326241\\times 10^{-4}\\ \\text{S},$$\n$$\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+g_{m}=8.031276596\\times 10^{-2}\\ \\text{S},$$\nand\n$$\\frac{\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+g_{m}}{R_{F}\\left(\\frac{1}{R_{C}}+\\frac{1}{R_{L}}+\\frac{1}{R_{F}}\\right)}\n=\\frac{8.031276596\\times 10^{-2}}{150000\\times 3.194326241\\times 10^{-4}}\n\\approx 1.67615\\times 10^{-3}\\ \\text{S}.$$\nTherefore\n$$\\frac{1}{R_{\\text{in}}}=\\frac{1}{1500}+1.67615\\times 10^{-3}\\approx 2.34282\\times 10^{-3}\\ \\text{S},$$\nso\n$$R_{\\text{in}}\\approx \\frac{1}{2.34282\\times 10^{-3}}\\ \\Omega\\approx 4.268\\times 10^{2}\\ \\Omega=0.4268\\ \\text{k}\\Omega.$$\nRounded to three significant figures in kilo-ohms, this is $0.427$.", "answer": "$$\\boxed{0.427}$$", "id": "1332798"}]}
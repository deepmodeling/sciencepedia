{"hands_on_practices": [{"introduction": "This first practice exercise establishes the fundamental principle of a logarithmic amplifier. By analyzing a basic circuit with a diode in the feedback loop, you will apply the virtual ground concept and the diode's exponential current-voltage relationship to derive the output voltage. This calculation is the cornerstone for understanding how these circuits achieve their logarithmic response [@problem_id:1315437].", "problem": "An analog signal processing circuit uses a basic logarithmic amplifier to compress an input signal. The amplifier is constructed using an ideal operational amplifier (op-amp). A resistor with resistance $R$ is connected from an input voltage source $V_{in}$ to the inverting input of the op-amp. A semiconductor diode is connected in the negative feedback path, with its anode at the inverting input and its cathode at the op-amp output. The non-inverting input of the op-amp is connected to ground.\n\nThe circuit has the following parameters:\n- Input voltage, $V_{in} = 2.50 \\text{ V}$\n- Input resistance, $R = 10.0 \\text{ k}\\Omega$\n- The diode is characterized by a reverse saturation current $I_S = 1.00 \\times 10^{-14} \\text{ A}$ and an ideality factor $\\eta = 1$.\n- The circuit operates at a temperature where the thermal voltage is $V_T = 25.85 \\text{ mV}$.\n\nAssuming the current through the forward-biased diode is significantly larger than its reverse saturation current, calculate the output voltage $V_{out}$ of the amplifier. Express your final answer in volts, rounded to three significant figures.", "solution": "For an ideal op-amp with the non-inverting input grounded, the inverting input is at virtual ground, so the inverting node voltage is $V_{-} = 0$. Applying KCL at the inverting node gives that the current through the input resistor equals the diode current:\n$$\n\\frac{V_{in} - V_{-}}{R} = I_{D} \\quad \\Rightarrow \\quad \\frac{V_{in}}{R} = I_{D}.\n$$\nFor the diode with anode at the inverting node and cathode at the output, the diode voltage is\n$$\nV_{D} = V_{\\text{anode}} - V_{\\text{cathode}} = V_{-} - V_{out} = -V_{out}.\n$$\nThe diode current is given by the Shockley equation:\n$$\nI_{D} = I_{S}\\left(\\exp\\!\\left(\\frac{V_{D}}{\\eta V_{T}}\\right) - 1\\right) = I_{S}\\left(\\exp\\!\\left(\\frac{-V_{out}}{\\eta V_{T}}\\right) - 1\\right).\n$$\nGiven the assumption $I_{D} \\gg I_{S}$, the $-1$ term can be neglected, so\n$$\nI_{D} \\approx I_{S}\\exp\\!\\left(\\frac{-V_{out}}{\\eta V_{T}}\\right).\n$$\nEquating currents and solving for $V_{out}$:\n$$\n\\frac{V_{in}}{R} = I_{S}\\exp\\!\\left(\\frac{-V_{out}}{\\eta V_{T}}\\right)\n\\;\\Rightarrow\\;\n\\exp\\!\\left(\\frac{-V_{out}}{\\eta V_{T}}\\right) = \\frac{V_{in}}{R I_{S}}\n\\;\\Rightarrow\\;\n\\frac{-V_{out}}{\\eta V_{T}} = \\ln\\!\\left(\\frac{V_{in}}{R I_{S}}\\right)\n\\;\\Rightarrow\\;\nV_{out} = - \\eta V_{T}\\,\\ln\\!\\left(\\frac{V_{in}}{R I_{S}}\\right).\n$$\nSubstitute the given values $\\eta=1$, $V_{T} = 25.85 \\times 10^{-3}$ V, $V_{in} = 2.50$ V, $R = 10.0 \\times 10^{3}\\ \\Omega$, and $I_{S} = 1.00 \\times 10^{-14}$ A:\n$$\n\\frac{V_{in}}{R I_{S}} = \\frac{2.50}{\\left(10.0 \\times 10^{3}\\right)\\left(1.00 \\times 10^{-14}\\right)} = 2.50 \\times 10^{10},\n$$\n$$\n\\ln\\!\\left(2.50 \\times 10^{10}\\right) = \\ln(2.50) + 10 \\ln(10) \\approx 0.916290732 + 23.02585093 \\approx 23.94214166,\n$$\n$$\nV_{out} \\approx -\\left(25.85 \\times 10^{-3}\\right)\\times 23.94214166 \\text{ V} \\approx -0.618904362 \\text{ V}.\n$$\nRounded to three significant figures, the output voltage is $-0.619$ V.", "answer": "$$\\boxed{-0.619}$$", "id": "1315437"}, {"introduction": "Beyond the static DC behavior, it is crucial to understand how a log amplifier responds to small signal variations. This practice delves into the dynamic characteristics of the circuit by asking you to derive its small-signal voltage gain, $A_v$. You will discover that, unlike linear amplifiers, the gain of a log amplifier is not constant but is inversely proportional to the DC input voltage, a key insight into its operation [@problem_id:1315441].", "problem": "An analog signal processing circuit is designed to compress the dynamic range of an input signal. The core of this circuit is a logarithmic amplifier constructed using an ideal operational amplifier (op-amp) and a single NPN Bipolar Junction Transistor (BJT). The circuit is configured as follows:\n\n- The op-amp is in an inverting configuration with its non-inverting input connected to ground.\n- An input resistor with resistance $R$ connects an input voltage source, providing a positive DC voltage $v_{IN}$, to the inverting input of the op-amp.\n- The BJT is placed in the negative feedback path. Its collector is connected to the op-amp's inverting input, its base is connected to ground, and its emitter is connected to the op-amp's output terminal, which has a voltage $v_{out}$.\n\nAssume the op-amp is ideal, meaning it has infinite open-loop gain, infinite input impedance, and zero output impedance. Consequently, the voltage at the inverting input is forced to be at virtual ground. Assume the BJT has a very high current gain ($\\beta \\to \\infty$), so its base current can be neglected.\n\nThe collector current, $I_C$, of the BJT is governed by the relation $I_C = I_S \\exp\\left(\\frac{V_{BE}}{\\eta V_T}\\right)$, where $V_{BE}$ is the base-emitter voltage, $I_S$ is the reverse saturation current, $\\eta$ is the ideality factor (emission coefficient), and $V_T$ is the thermal voltage.\n\nYour task is to determine the circuit's small-signal voltage gain, defined as $A_v = \\frac{dv_{out}}{dv_{IN}}$, which characterizes how the output voltage responds to small changes in the input voltage. Find an analytic expression for $A_v$ as a function of the input voltage $v_{IN}$ and the relevant physical parameters.", "solution": "Because the op-amp is ideal and configured inverting with the non-inverting input grounded, the inverting input node is at virtual ground, so its voltage is zero. The input current through the resistor is therefore\n$$\ni_{R}=\\frac{v_{IN}}{R}.\n$$\nThe op-amp input current is zero and the BJT base current is negligible due to $\\beta \\to \\infty$, so by KCL at the inverting input node, the collector current equals the resistor current:\n$$\nI_{C}=i_{R}=\\frac{v_{IN}}{R}.\n$$\nWith the base grounded and the emitter at $v_{out}$, the base-emitter voltage is\n$$\nV_{BE}=V_{B}-V_{E}=0-v_{out}=-v_{out}.\n$$\nThe BJT collector current is governed by\n$$\nI_{C}=I_{S}\\exp\\!\\left(\\frac{V_{BE}}{\\eta V_{T}}\\right)=I_{S}\\exp\\!\\left(\\frac{-v_{out}}{\\eta V_{T}}\\right).\n$$\nEquating the two expressions for $I_{C}$ gives\n$$\n\\frac{v_{IN}}{R}=I_{S}\\exp\\!\\left(\\frac{-v_{out}}{\\eta V_{T}}\\right).\n$$\nTaking the natural logarithm of both sides and solving for $v_{out}$ yields the dc transfer characteristic\n$$\nv_{out}=-\\, \\eta V_{T}\\,\\ln\\!\\left(\\frac{v_{IN}}{R I_{S}}\\right).\n$$\nThe small-signal voltage gain is the derivative of $v_{out}$ with respect to $v_{IN}$:\n$$\nA_{v}=\\frac{d v_{out}}{d v_{IN}}=-\\, \\eta V_{T}\\,\\frac{d}{d v_{IN}}\\Big(\\ln v_{IN}-\\ln(R I_{S})\\Big)=-\\,\\frac{\\eta V_{T}}{v_{IN}}.\n$$\nEquivalently, using small-signal transconductance $g_{m}=I_{C}/(\\eta V_{T})$ and the incremental relation $dI_{C}=-g_{m}\\,d v_{out}$ with $dI_{C}=d v_{IN}/R$ gives $d v_{out}/d v_{IN}=-1/(R g_{m})=-\\eta V_{T}/(R I_{C})=-\\eta V_{T}/v_{IN}$, consistent with the result above.", "answer": "$$\\boxed{-\\frac{\\eta V_{T}}{v_{IN}}}$$", "id": "1315441"}, {"introduction": "A true test of understanding is the ability to diagnose problems when a circuit does not behave as expected. This final practice presents a practical troubleshooting scenario where a log amplifier is producing a linear output instead of a logarithmic one. By analyzing different failure modes, you will reinforce your knowledge of what makes the circuit function correctly and develop critical diagnostic skills [@problem_id:1315417].", "problem": "An engineer is testing a logarithmic amplifier circuit. The circuit is constructed using an ideal operational amplifier (op-amp) and a single NPN Bipolar Junction Transistor (BJT), labeled Q1. The circuit is configured as follows:\n- The op-amp's non-inverting input terminal is connected to ground.\n- A positive DC input voltage, $V_{in}$, is applied to the op-amp's inverting input terminal through an input resistor, $R_1$.\n- The feedback path consists of the BJT, Q1. The collector of Q1 is connected to the op-amp's inverting input terminal, the base of Q1 is connected to ground, and the emitter of Q1 is connected to the op-amp's output terminal, which provides the output voltage $V_{out}$.\n\nUnder normal operation, for a positive $V_{in}$, the output voltage $V_{out}$ is expected to be a negative voltage whose magnitude is proportional to the natural logarithm of the input voltage. However, upon testing, the engineer observes that the output voltage $V_{out}$ is instead a negative value that is directly and linearly proportional to the input voltage $V_{in}$.\n\nWhich of the following single component failures is the most likely cause of this observed linear behavior?\n\nA. The input resistor $R_1$ has failed and become an open circuit.\nB. The BJT Q1 has developed a short circuit between its base and emitter terminals.\nC. The BJT Q1 has developed a short circuit between its collector and emitter terminals.\nD. The connection from the BJT's base terminal to ground has broken, leaving the base floating (open circuit).\nE. The BJT Q1 has developed a short circuit between its collector and base terminals.", "solution": "Normal operation analysis with ideal op-amp and BJT feedback:\n- The non-inverting input is grounded, so with negative feedback the inverting input is held at virtual ground: $V_{-}=0$.\n- The op-amp input currents are zero, so by Kirchhoff’s Current Law at the inverting node, the input current through $R_{1}$ must equal the feedback current provided by Q1’s collector.\n- The input current is $I_{in}=\\frac{V_{in}-V_{-}}{R_{1}}=\\frac{V_{in}}{R_{1}}$.\n- With Q1’s base at ground and emitter at $V_{out}$, the base-emitter voltage is $V_{BE}=0-V_{out}=-V_{out}$. For an ideal BJT in forward active region, the collector current is\n$$\nI_{C}=I_{S}\\exp\\!\\left(\\frac{V_{BE}}{V_{T}}\\right)=I_{S}\\exp\\!\\left(\\frac{-V_{out}}{V_{T}}\\right).\n$$\n- KCL at the inverting node gives $I_{in}=I_{C}$, hence\n$$\n\\frac{V_{in}}{R_{1}}=I_{S}\\exp\\!\\left(\\frac{-V_{out}}{V_{T}}\\right)\n\\quad\\Rightarrow\\quad\nV_{out}=-V_{T}\\ln\\!\\left(\\frac{V_{in}}{I_{S}R_{1}}\\right),\n$$\nwhich is the expected logarithmic dependence.\n\nObserved behavior is linear: $V_{out}$ is a negative value directly proportional to $V_{in}$, i.e., $V_{out}=-kV_{in}$ with $k>0$. This requires that the feedback current be linearly related to $V_{out}$, as it would be if the feedback path were a (constant) resistance $R_{f}$ from $V_{out}$ to the inverting node, yielding\n$$\n\\frac{V_{in}}{R_{1}}+\\frac{V_{out}-0}{R_{f}}=0\n\\quad\\Rightarrow\\quad\nV_{out}=-\\frac{R_{f}}{R_{1}}\\,V_{in}.\n$$\nTherefore, a fault that turns the nonlinear exponential feedback element into a linear (approximately resistive) path from output to summing node explains the observation.\n\nEvaluate each single-component failure:\n\nA. $R_{1}$ open: Then $I_{in}=0$, so KCL requires $I_{C}=0$. With an ideal BJT model, $I_{C}=I_{S}\\exp(-V_{out}/V_{T})$ cannot be zero for any finite $V_{out}$, so the loop cannot balance; the op-amp will saturate. $V_{out}$ will not be linearly related to $V_{in}$ (which is disconnected). Not consistent.\n\nB. Q1 base-emitter short: This forces $V_{out}=0$ (emitter shorted to the grounded base). The op-amp output is clamped to ground; the inverting node is no longer controlled by feedback from $V_{out}$. $V_{out}$ is approximately zero, not a linear function of $V_{in}$. Not consistent.\n\nC. Q1 collector-emitter short: This creates a direct short from the op-amp output to the inverting node, replacing the nonlinear BJT feedback with an ohmic (approximately zero-resistance) feedback element. The circuit degenerates into a linear inverting configuration with feedback impedance approximately a short. In the ideal limit $R_{f}\\to 0$, $V_{out}\\to 0$; with any finite series resistance in the fault path, the transfer becomes $V_{out}=-\\frac{R_{f}}{R_{1}}V_{in}$, i.e., a linear inverting relationship. Crucially, the nonlinearity is eliminated and the behavior becomes linear, matching the observation qualitatively.\n\nD. Base open (floating): The feedback path becomes two series junctions (emitter-base and base-collector). When both are forward biased, the feedback current retains an exponential dependence on the sum of junction voltages, still yielding logarithmic behavior (with a different scale factor). This does not produce a linear $V_{out}$ vs. $V_{in}$. Not consistent.\n\nE. Collector-base short: With the base tied to ground by design, this shorts the inverting node to ground, removing feedback from $V_{out}$. Both op-amp inputs are at ground, so the ideal op-amp output is $V_{out}=0$, independent of $V_{in}$. Not consistent.\n\nAmong the options, only a collector-emitter short in Q1 directly converts the nonlinear feedback into an effectively linear (resistive) feedback path, producing an inverting linear relationship between $V_{out}$ and $V_{in}$. Therefore, the most likely single-component failure is a collector-emitter short in Q1.", "answer": "$$\\boxed{C}$$", "id": "1315417"}]}
{"hands_on_practices": [{"introduction": "The transconductance, $g_m$, is the heart of any transistor amplifier, directly quantifying how effectively an input voltage is converted into an output current. Before we can analyze the gain of a differential pair, we must first understand how to determine the $g_m$ of its individual transistors based on their biasing conditions and physical properties. This fundamental exercise [@problem_id:1339253] walks you through calculating this crucial parameter for a symmetrically biased pair.", "problem": "A biomedical engineering team is designing the front-end analog stage of a portable heart rate monitor. The core of this stage is a differential amplifier built using a pair of identical n-channel Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs), labeled $M_1$ and $M_2$. The two transistors are perfectly matched and are biased by a constant current source that sinks a total tail current of $I_{SS} = 320~\\mu\\text{A}$. The circuit is operating in its quiescent state, where the differential input voltage is zero, causing the tail current to split equally between the two transistors. Both transistors are operating in the saturation region.\n\nThe fabrication process for these MOSFETs provides a process transconductance parameter of $k'_n = \\mu_n C_{ox} = 200~\\mu\\text{A/V}^2$. The designed aspect ratio for each transistor is $(W/L) = 50$.\n\nCalculate the small-signal transconductance, $g_m$, for one of the transistors in the pair. Express your final answer in units of mA/V, rounded to three significant figures.", "solution": "At zero differential input, the differential pair splits the tail current equally, so the drain current of each transistor is\n$$\nI_{D}=\\frac{I_{SS}}{2}=\\frac{320\\times 10^{-6}\\ \\text{A}}{2}=160\\times 10^{-6}\\ \\text{A}.\n$$\nFor a MOSFET in saturation under the square-law model (neglecting channel-length modulation), the drain current is\n$$\nI_{D}=\\frac{1}{2}k_{n}V_{ov}^{2},\\quad \\text{with}\\quad k_{n}=k_{n}'\\left(\\frac{W}{L}\\right),\n$$\nand the small-signal transconductance is\n$$\ng_{m}=\\frac{\\partial I_{D}}{\\partial V_{GS}}=k_{n}V_{ov}.\n$$\nEliminating $V_{ov}$ using $V_{ov}=\\sqrt{\\frac{2I_{D}}{k_{n}}}$ gives\n$$\ng_{m}=k_{n}\\sqrt{\\frac{2I_{D}}{k_{n}}}=\\sqrt{2k_{n}I_{D}}.\n$$\nCompute $k_{n}$:\n$$\nk_{n}=k_{n}'\\left(\\frac{W}{L}\\right)=\\left(200\\times 10^{-6}\\ \\frac{\\text{A}}{\\text{V}^{2}}\\right)\\times 50=1.0\\times 10^{-2}\\ \\frac{\\text{A}}{\\text{V}^{2}}.\n$$\nNow evaluate $g_{m}$:\n$$\ng_{m}=\\sqrt{2\\times \\left(1.0\\times 10^{-2}\\ \\frac{\\text{A}}{\\text{V}^{2}}\\right)\\times \\left(160\\times 10^{-6}\\ \\text{A}\\right)}\n=\\sqrt{3.20\\times 10^{-6}}\\ \\frac{\\text{A}}{\\text{V}}\n=\\left(\\sqrt{3.20}\\times 10^{-3}\\right)\\ \\frac{\\text{A}}{\\text{V}}.\n$$\nSince $\\sqrt{3.20}\\approx 1.788854$, this yields\n$$\ng_{m}\\approx 1.788854\\times 10^{-3}\\ \\frac{\\text{A}}{\\text{V}}=1.788854\\ \\frac{\\text{mA}}{\\text{V}}.\n$$\nRounded to three significant figures in units of mA/V, the result is $1.79$.", "answer": "$$\\boxed{1.79}$$", "id": "1339253"}, {"introduction": "Moving from analysis to design is a critical step in becoming a proficient circuit engineer. Instead of calculating the performance of a given circuit, we often start with a performance target, like voltage gain, and must determine the necessary component values. This practice [@problem_id:1339290] challenges you to select the transistor aspect ratio $(W/L)$ required to achieve a specific differential gain, directly connecting device physics to high-level circuit specifications.", "problem": "A design engineer is tasked with creating a fundamental analog building block: a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) differential amplifier. The circuit consists of two identical NMOS transistors, M1 and M2, whose sources are connected to a constant current source that provides a total bias current $I_{SS}$. The drain of each transistor is connected to the power supply through identical load resistors, $R_D$. The input differential voltage is applied between the gates of M1 and M2, and the output is taken differentially between their drains.\n\nThe design specifications are as follows:\n- Total bias current: $I_{SS} = 0.500~\\text{mA}$\n- Load resistance: $R_D = 10.0~\\text{k}\\Omega$\n- Magnitude of the differential voltage gain, $|A_d| = 25.0~\\text{V/V}$\n\nThe transistors are fabricated using a process with the following parameter:\n- Process transconductance parameter: $\\mu_n C_{ox} = 200~\\mu\\text{A/V}^2$\n\nAssuming that both transistors are perfectly matched and operate in the saturation region, and that channel-length modulation (the Early effect) can be neglected, determine the required transistor aspect ratio $(W/L)$ to achieve the specified gain.\n\nRound your final answer to three significant figures.", "solution": "For a perfectly symmetric NMOS differential pair with an ideal tail current source and identical resistive loads, the small-signal differential gain magnitude is given by\n$$\n|A_{d}|=g_{m}R_{D}.\n$$\nThus the required transconductance per transistor is\n$$\ng_{m}=\\frac{|A_{d}|}{R_{D}}.\n$$\nWith a total tail current $I_{SS}$, the quiescent drain current of each transistor is\n$$\nI_{D}=\\frac{I_{SS}}{2}.\n$$\nFor a MOSFET in saturation neglecting channel-length modulation,\n$$\nI_{D}=\\frac{1}{2}\\mu_{n}C_{ox}\\frac{W}{L}V_{ov}^{2},\\quad g_{m}=\\mu_{n}C_{ox}\\frac{W}{L}V_{ov}.\n$$\nEliminating $V_{ov}$ yields\n$$\ng_{m}^{2}=2\\mu_{n}C_{ox}\\frac{W}{L}I_{D}.\n$$\nSolving for the aspect ratio,\n$$\n\\frac{W}{L}=\\frac{g_{m}^{2}}{2\\mu_{n}C_{ox}I_{D}}=\\frac{g_{m}^{2}}{\\mu_{n}C_{ox}I_{SS}}.\n$$\nSubstituting $g_{m}=|A_{d}|/R_{D}$,\n$$\n\\frac{W}{L}=\\frac{\\left(\\frac{|A_{d}|}{R_{D}}\\right)^{2}}{\\mu_{n}C_{ox}I_{SS}}.\n$$\nNow evaluate numerically using $|A_{d}|=25.0$, $R_{D}=10.0\\times 10^{3}$, $\\mu_{n}C_{ox}=200\\times 10^{-6}$, and $I_{SS}=0.500\\times 10^{-3}$:\n$$\n\\frac{|A_{d}|}{R_{D}}=\\frac{25.0}{10.0\\times 10^{3}}=2.5\\times 10^{-3},\n$$\n$$\n\\left(\\frac{|A_{d}|}{R_{D}}\\right)^{2}=6.25\\times 10^{-6},\n$$\n$$\n\\mu_{n}C_{ox}I_{SS}=(200\\times 10^{-6})(0.500\\times 10^{-3})=1.00\\times 10^{-7},\n$$\n$$\n\\frac{W}{L}=\\frac{6.25\\times 10^{-6}}{1.00\\times 10^{-7}}=62.5.\n$$\nRounded to three significant figures, the required aspect ratio is $62.5$.", "answer": "$$\\boxed{62.5}$$", "id": "1339290"}, {"introduction": "An amplifier is only useful within a specific range of operating voltages, and exceeding these limits can lead to distortion or complete failure of amplification. The Input Common-Mode Range (ICMR) is a key datasheet specification that defines the allowable DC voltage range for the input terminals. This final practice [@problem_id:1339246] focuses on calculating the upper boundary of the ICMR, ensuring the input transistors do not get pushed out of their active saturation region.", "problem": "An n-channel Metal-Oxide-Semiconductor (NMOS) differential amplifier is a fundamental building block in analog integrated circuits. Consider such an amplifier with resistive loads. The circuit consists of two identical NMOS transistors, $M_1$ and $M_2$, with their sources connected together to a constant current source that sinks a total current $I_{SS}$. The drain of each transistor is connected to the positive power supply, $V_{DD}$, through an identical load resistor, $R_D$. The gates of $M_1$ and $M_2$ serve as the differential inputs.\n\nThe circuit is characterized by the following parameters:\n- Positive supply voltage: $V_{DD} = 2.5~\\text{V}$\n- Total tail current: $I_{SS} = 0.5~\\text{mA}$\n- Load resistance: $R_D = 4.0~\\text{k}\\Omega$\n- Transistor threshold voltage: $V_{tn} = 0.7~\\text{V}$\n- Transistor transconductance parameter: $k_n = 2.0~\\text{mA/V}^2$\n\nFor the amplifier to function correctly, both input transistors must operate in the saturation region. Determine the upper limit of the input common-mode range (ICMR), denoted as $V_{ic,max}$. This represents the maximum common-mode voltage that can be applied to the gates of $M_1$ and $M_2$ while ensuring both transistors remain in saturation.\n\nExpress your answer in Volts, rounded to three significant figures.", "solution": "For a symmetric NMOS differential pair biased by an ideal tail current source, the quiescent current in each transistor under common-mode input is $I_{D} = I_{SS}/2$. The drain voltage of each side with a resistive load is\n$$\nV_{D} = V_{DD} - I_{D} R_{D} = V_{DD} - \\frac{I_{SS}}{2} R_{D}.\n$$\nFor each NMOS to remain in saturation, the condition is\n$$\nV_{DS} \\ge V_{GS} - V_{tn}.\n$$\nWith $I_{D} = \\frac{1}{2} k_{n} (V_{GS} - V_{tn})^{2}$, define the overdrive $V_{OV} = V_{GS} - V_{tn} = \\sqrt{\\frac{2 I_{D}}{k_{n}}}$. The source voltage is $V_{S} = V_{G} - V_{GS} = V_{ic} - (V_{tn} + V_{OV})$, hence\n$$\nV_{DS} = V_{D} - V_{S} = V_{D} - \\bigl(V_{ic} - (V_{tn} + V_{OV})\\bigr) = V_{D} - V_{ic} + V_{tn} + V_{OV}.\n$$\nApplying the saturation inequality $V_{DS} \\ge V_{OV}$ yields\n$$\nV_{D} - V_{ic} + V_{tn} + V_{OV} \\ge V_{OV} \\;\\;\\Rightarrow\\;\\; V_{ic} \\le V_{D} + V_{tn}.\n$$\nThus the upper limit of the input common-mode range is\n$$\nV_{ic,\\max} = V_{D} + V_{tn} = \\left(V_{DD} - \\frac{I_{SS}}{2} R_{D}\\right) + V_{tn}.\n$$\nSubstituting the given values,\n$$\nI_{D} = \\frac{I_{SS}}{2} = 0.25 \\times 10^{-3}, \\quad V_{D} = 2.5 - (0.25 \\times 10^{-3})(4.0 \\times 10^{3}) = 1.5,\n$$\nso\n$$\nV_{ic,\\max} = 1.5 + 0.7 = 2.20.\n$$\nThis satisfies the saturation boundary exactly, confirming the limit.", "answer": "$$\\boxed{2.20}$$", "id": "1339246"}]}
{"hands_on_practices": [{"introduction": "The performance of any amplifier is critically dependent on its DC operating point, or bias. This practice focuses on the foundational step of establishing the correct quiescent currents within the differential pair. We will explore how a simple current mirror, a ubiquitous building block in analog design, is used to generate a stable tail current that sets the stage for the amplifier's operation [@problem_id:1297270].", "problem": "Consider a Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) differential amplifier circuit with an active load. The amplifier is biased by a tail current source, which is implemented as an NMOS current mirror. This current mirror consists of a reference transistor, $M_{REF}$, and a tail transistor, $M_3$.\n\nA constant reference current, $I_{REF}$, is supplied to the transistor $M_{REF}$, which is diode-connected (i.e., its gate is connected to its drain). The gate of the tail transistor $M_3$ is connected to the gate of $M_{REF}$, and their sources are connected to the same low potential rail. The drain of $M_3$ provides the total tail current, $I_{SS}$, to the differential pair.\n\nThe differential pair itself consists of two perfectly matched NMOS transistors, $M_1$ and $M_2$, whose sources are connected together to the drain of $M_3$. For this problem, the amplifier is operating in its quiescent state, where the gate terminals of $M_1$ and $M_2$ are biased at the same DC voltage, resulting in zero differential input signal.\n\nGiven the following parameters:\n- Reference current, $I_{REF} = 30.0$ µA.\n- Aspect ratio of the reference transistor, $(W/L)_{REF} = 10$.\n- Aspect ratio of the tail transistor, $(W/L)_3 = 35$.\n\nAssume that all transistors are operating in the saturation region and that the channel-length modulation effect is negligible for all transistors.\n\nCalculate the quiescent drain current flowing through one of the differential pair transistors (e.g., $I_{D1}$). Express your answer in microamperes (µA) and round to three significant figures.", "solution": "The problem asks for the quiescent drain current in one of the transistors, $M_1$ or $M_2$, of a MOSFET differential pair. The circuit is in its quiescent state, meaning the differential input voltage is zero ($v_{G1} = v_{G2}$).\n\nFirst, we must determine the tail current, $I_{SS}$, supplied by the transistor $M_3$. The transistor $M_3$ and the reference transistor $M_{REF}$ form a current mirror. The current $I_{REF}$ flows through the diode-connected $M_{REF}$, establishing a gate-to-source voltage $V_{GS}$ across it. Since the gate of $M_3$ is connected to the gate of $M_{REF}$, and their sources are also connected together, both transistors share the same $V_{GS}$.\n\nThe drain current of a MOSFET in saturation (ignoring channel-length modulation) is given by:\n$$\nI_D = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right) (V_{GS} - V_{th})^2\n$$\nwhere $k'_n$ is the process transconductance parameter, $W/L$ is the aspect ratio, $V_{GS}$ is the gate-to-source voltage, and $V_{th}$ is the threshold voltage.\n\nFor the current mirror formed by $M_{REF}$ and $M_3$:\nThe reference current is the drain current of $M_{REF}$:\n$$\nI_{REF} = I_{D,REF} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_{REF} (V_{GS} - V_{th})^2\n$$\nThe tail current is the drain current of $M_3$:\n$$\nI_{SS} = I_{D3} = \\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_3 (V_{GS} - V_{th})^2\n$$\nSince $k'_n$, $V_{GS}$, and $V_{th}$ are the same for both transistors, we can find the ratio of their drain currents:\n$$\n\\frac{I_{SS}}{I_{REF}} = \\frac{\\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_3 (V_{GS} - V_{th})^2}{\\frac{1}{2} k'_n \\left(\\frac{W}{L}\\right)_{REF} (V_{GS} - V_{th})^2} = \\frac{(W/L)_3}{(W/L)_{REF}}\n$$\nThis gives the fundamental relationship for a simple current mirror. The tail current $I_{SS}$ is a scaled version of the reference current $I_{REF}$.\n\nWe can now calculate the value of $I_{SS}$ using the given parameters:\n$I_{REF} = 30.0$ µA\n$(W/L)_{REF} = 10$\n$(W/L)_3 = 35$\n\n$$\nI_{SS} = I_{REF} \\times \\frac{(W/L)_3}{(W/L)_{REF}} = 30.0 \\text{ µA} \\times \\frac{35}{10} = 30.0 \\text{ µA} \\times 3.5 = 105 \\text{ µA}\n$$\nNext, we consider the differential pair itself, which consists of transistors $M_1$ and $M_2$. The sum of their drain currents must equal the tail current supplied by $M_3$:\n$$\nI_{D1} + I_{D2} = I_{SS}\n$$\nThe problem states that the differential pair transistors $M_1$ and $M_2$ are perfectly matched and are operating in their quiescent state with zero differential input voltage ($v_{G1} = v_{G2}$). Because of this symmetry, the tail current $I_{SS}$ must split equally between the two transistors.\nTherefore:\n$$\nI_{D1} = I_{D2} = \\frac{I_{SS}}{2}\n$$\nSubstituting the calculated value of $I_{SS}$:\n$$\nI_{D1} = \\frac{105 \\text{ µA}}{2} = 52.5 \\text{ µA}\n$$\nThe problem asks for the quiescent drain current in one of the transistors, expressed in microamperes (µA) and rounded to three significant figures. Our calculated value is $52.5$ µA, which is already in the correct unit and has three significant figures.", "answer": "$$\\boxed{52.5}$$", "id": "1297270"}, {"introduction": "Once the biasing is established, the designer's next task is to tailor the amplifier to meet specific performance targets. A key parameter that dictates the amplifier's ability to convert an input voltage into an output current is its transconductance, $G_m$. This exercise demonstrates the fundamental design process of determining the physical dimensions of the input transistors to achieve a desired transconductance for a given bias current [@problem_id:1297240].", "problem": "An analog circuit designer is developing the input stage for a new operational amplifier. This stage consists of an NMOS differential pair ($M_1$ and $M_2$) with a PMOS current mirror active load. The differential pair is biased by a constant tail current source, $I_{SS}$. To meet the amplifier's overall gain specification, the differential input stage must achieve a specific small-signal differential transconductance, $G_m$.\n\nAssuming both input NMOS transistors are identical, operate in the saturation region, and can be described by the square-law model, determine the required aspect ratio, $(W/L)$, for these input transistors. Neglect channel-length modulation (i.e., assume the output resistance $r_o$ is infinite) and body effect.\n\nThe design specifications and process parameters are as follows:\n- Required differential transconductance, $G_m = 1.00\\,\\text{mS}$ (where $1\\,\\text{S} = 1\\,\\text{A/V}$)\n- Tail bias current, $I_{SS} = 200\\,\\mu\\text{A}$\n- NMOS process transconductance parameter, $\\mu_n C_{ox} = 400\\,\\mu\\text{A/V}^2$\n\nCalculate the required dimensionless aspect ratio $(W/L)$.", "solution": "For an NMOS in saturation with the square-law model and neglecting channel-length modulation and body effect, the drain current and transconductance are\n$$\nI_{D}=\\frac{1}{2}\\mu_{n}C_{ox}\\frac{W}{L}V_{OV}^{2},\\qquad g_{m}=\\frac{\\partial I_{D}}{\\partial V_{GS}}=\\mu_{n}C_{ox}\\frac{W}{L}V_{OV}.\n$$\nIn a differential pair with an ideal tail source, each transistor carries the quiescent current\n$$\nI_{D}=\\frac{I_{SS}}{2}.\n$$\nWith a PMOS current-mirror active load that performs differential-to-single-ended conversion, the small-signal transconductance from the differential input to the single-ended output equals the transconductance of one input transistor, so the required $g_{m}$ equals the specified $G_{m}$.\n\nEliminating $V_{OV}$ between the two equations,\n$$\nV_{OV}=\\frac{g_{m}}{\\mu_{n}C_{ox}\\frac{W}{L}},\n$$\nand substituting into $I_{D}$ gives\n$$\nI_{D}=\\frac{1}{2}\\mu_{n}C_{ox}\\frac{W}{L}\\left(\\frac{g_{m}}{\\mu_{n}C_{ox}\\frac{W}{L}}\\right)^{2}=\\frac{1}{2}\\frac{g_{m}^{2}}{\\mu_{n}C_{ox}\\frac{W}{L}}.\n$$\nSolving for the aspect ratio,\n$$\n\\frac{W}{L}=\\frac{g_{m}^{2}}{2\\mu_{n}C_{ox}I_{D}}=\\frac{G_{m}^{2}}{2\\mu_{n}C_{ox}\\left(\\frac{I_{SS}}{2}\\right)}=\\frac{G_{m}^{2}}{\\mu_{n}C_{ox}I_{SS}}.\n$$\nSubstituting the given values in scientific notation,\n$$\nG_{m}=1.00\\times 10^{-3},\\quad \\mu_{n}C_{ox}=4.00\\times 10^{-4},\\quad I_{SS}=2.00\\times 10^{-4},\n$$\nyields\n$$\n\\frac{W}{L}=\\frac{(1.00\\times 10^{-3})^{2}}{(4.00\\times 10^{-4})(2.00\\times 10^{-4})}=\\frac{1.00\\times 10^{-6}}{8.00\\times 10^{-8}}=12.5.\n$$\nThus, the required aspect ratio is $12.5$ (dimensionless).", "answer": "$$\\boxed{12.5}$$", "id": "1297240"}, {"introduction": "Beyond static gain, the speed of an amplifier is a crucial performance metric, determining its suitability for various applications. This hands-on problem shifts our focus to the transient behavior of the differential amplifier. By modeling the circuit's output as a single-pole system, we can estimate its settling time, providing a practical measure of how quickly the amplifier responds to changes at its input [@problem_id:1297204].", "problem": "An integrated circuit designer is characterizing the transient response of a fundamental building block: a differential amplifier. The amplifier is constructed using four Metal-Oxide-Semiconductor Field-Effect Transistors (MOSFETs) in a standard configuration. An n-channel MOSFET (NMOS) differential pair (M1, M2) forms the input stage, and a p-channel MOSFET (PMOS) current mirror (M3, M4) serves as the active load. The single-ended output is taken from the drain of M2, which is connected to the drain of M4. The entire circuit is biased by an ideal tail current source, $I_{SS}$, with a magnitude of $200\\ \\mu\\text{A}$. All transistors are operating in the saturation region.\n\nThe relevant small-signal device parameters, determined by the fabrication process and biasing conditions, are as follows:\n- For the NMOS transistors (M1, M2): the channel-length modulation parameter is $\\lambda_n = 0.05\\ \\text{V}^{-1}$.\n- For the PMOS transistors (M3, M4): the channel-length modulation parameter is $\\lambda_p = 0.04\\ \\text{V}^{-1}$.\n\nThe total parasitic capacitance at the output node, which includes contributions from the transistors and interconnects, is found to be $C_L = 1.0\\ \\text{pF}$.\n\nAt time $t=0$, a small differential step voltage is applied to the input, causing the output voltage to change. To analyze the speed of the amplifier, model its response as that of a single-pole system. Calculate the 1% settling time, defined as the time it takes for the output voltage to reach and stay within 1% of its final value after the step input is applied.\n\nExpress your answer in nanoseconds (ns) and round it to three significant figures.", "solution": "Model the output node as a single-pole with time constant $\\tau = R_{\\text{out}} C_{L}$. For a first-order step response, the error decays as $\\exp(-t/\\tau)$, so the time to settle within $0.01$ of the final value satisfies $\\exp(-t_{1\\%}/\\tau) = 0.01$, hence\n$$\nt_{1\\%} = \\tau \\ln(100).\n$$\n\nWith an ideal tail current source and small-signal operation about the symmetric bias point, each side of the differential pair carries $I_{D} = I_{SS}/2$. The small-signal output resistances of M2 (NMOS) and M4 (PMOS) in saturation are\n$$\nr_{o,n} = \\frac{1}{\\lambda_{n} I_{D}} = \\frac{1}{\\lambda_{n} \\left( I_{SS}/2 \\right)} = \\frac{2}{\\lambda_{n} I_{SS}}, \\qquad\nr_{o,p} = \\frac{1}{\\lambda_{p} I_{D}} = \\frac{1}{\\lambda_{p} \\left( I_{SS}/2 \\right)} = \\frac{2}{\\lambda_{p} I_{SS}}.\n$$\nThe effective resistance at the output node is their parallel combination:\n$$\nR_{\\text{out}} = \\frac{r_{o,n} \\, r_{o,p}}{r_{o,n} + r_{o,p}} = \\frac{2}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)}.\n$$\nTherefore,\n$$\n\\tau = R_{\\text{out}} C_{L} = \\frac{2 C_{L}}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)},\n\\quad\nt_{1\\%} = \\tau \\ln(100) = \\frac{2 C_{L} \\ln(100)}{I_{SS} \\left( \\lambda_{n} + \\lambda_{p} \\right)}.\n$$\n\nSubstitute the given values $C_{L} = 1.0 \\times 10^{-12}$, $I_{SS} = 200 \\times 10^{-6}$, $\\lambda_{n} = 0.05$, and $\\lambda_{p} = 0.04$:\n$$\nR_{\\text{out}} = \\frac{2}{(200 \\times 10^{-6})(0.05 + 0.04)} \\approx 1.11111 \\times 10^{5},\n$$\n$$\n\\tau = R_{\\text{out}} C_{L} \\approx (1.11111 \\times 10^{5})(1.0 \\times 10^{-12}) = 1.11111 \\times 10^{-7},\n$$\n$$\nt_{1\\%} = \\tau \\ln(100) \\approx (1.11111 \\times 10^{-7}) \\times \\ln(100) \\approx (1.11111 \\times 10^{-7}) \\times 4.605170 \\approx 5.11685 \\times 10^{-7}.\n$$\nConverting to nanoseconds gives $t_{1\\%} \\approx 5.11685 \\times 10^{2}$ ns, which rounds to three significant figures as $512$ ns.", "answer": "$$\\boxed{512}$$", "id": "1297204"}]}
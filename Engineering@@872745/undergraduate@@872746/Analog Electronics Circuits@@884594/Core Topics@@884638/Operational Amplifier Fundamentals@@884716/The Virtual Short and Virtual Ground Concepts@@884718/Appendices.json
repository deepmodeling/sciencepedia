{"hands_on_practices": [{"introduction": "The virtual ground concept is a powerful tool for designing circuits that perform mathematical operations on analog signals. This exercise challenges you to design a summing amplifier, a fundamental building block in signal processing, that calculates the negative average of two input voltages. By applying Kirchhoff's Current Law at the virtual ground node, you will determine the precise component values needed to achieve this specific function, reinforcing your understanding of how op-amps can be used for analog computation. [@problem_id:1341089]", "problem": "An engineer is designing a signal conditioning circuit for a sensor array. The circuit must take two input voltages, $V_1$ and $V_2$, and produce an output voltage, $V_{out}$, that is equal to the negative average of the inputs. The circuit is constructed using a single ideal Operational Amplifier (Op-Amp) and three resistors. The two input voltages, $V_1$ and $V_2$, are connected to the inverting terminal of the op-amp through two separate input resistors, $R_{in,1}$ and $R_{in,2}$. A feedback resistor, $R_f$, connects the op-amp's output to its inverting terminal. The non-inverting terminal of the op-amp is connected directly to ground.\n\nThe design specifications require that the output voltage must satisfy the relation $V_{out} = -\\frac{1}{2}(V_1 + V_2)$. To simplify the implementation, the two input resistors are chosen to be identical, with a value of $R_{in,1} = R_{in,2} = 27.0 \\, \\text{k}\\Omega$.\n\nAssuming the op-amp is ideal, calculate the required value of the feedback resistor $R_f$. Express your answer in kilo-ohms (k$\\Omega$), rounded to three significant figures.", "solution": "For an ideal inverting summing amplifier with the non-inverting terminal grounded, the inverting input is at virtual ground, so $V_{-} = 0$. Applying Kirchhoff’s current law at the inverting node gives\n$$\\frac{V_{1} - V_{-}}{R_{in,1}} + \\frac{V_{2} - V_{-}}{R_{in,2}} + \\frac{V_{out} - V_{-}}{R_{f}} = 0.$$\nWith $V_{-} = 0$, this simplifies to\n$$\\frac{V_{1}}{R_{in,1}} + \\frac{V_{2}}{R_{in,2}} + \\frac{V_{out}}{R_{f}} = 0,$$\nhence\n$$V_{out} = -R_{f}\\left(\\frac{V_{1}}{R_{in,1}} + \\frac{V_{2}}{R_{in,2}}\\right).$$\nWith identical input resistors $R_{in,1} = R_{in,2} = R_{in}$, this becomes\n$$V_{out} = -\\frac{R_{f}}{R_{in}}(V_{1} + V_{2}).$$\nThe specification requires $V_{out} = -\\frac{1}{2}(V_{1} + V_{2})$, so equating coefficients yields\n$$\\frac{R_{f}}{R_{in}} = \\frac{1}{2} \\quad \\Rightarrow \\quad R_{f} = \\frac{1}{2}R_{in}.$$\nWith $R_{in} = 27.0\\,\\text{k}\\Omega$, the required feedback resistor is\n$$R_{f} = \\frac{1}{2}\\times 27.0\\,\\text{k}\\Omega = 13.5\\,\\text{k}\\Omega.$$\nRounded to three significant figures, this is $13.5$ in kilo-ohms.", "answer": "$$\\boxed{13.5}$$", "id": "1341089"}, {"introduction": "While the 'virtual ground' is a useful starting point, the underlying principle is the 'virtual short,' where the inverting input voltage tracks the non-inverting input voltage. This practice explores this more general concept by analyzing a circuit where the non-inverting input is tied to a non-zero DC reference voltage, creating a level-shifting amplifier. Deriving the output voltage for this configuration will solidify your understanding of how to apply the virtual short principle in circuits that are not referenced to ground, a common technique for DC biasing and signal conditioning. [@problem_id:1341082]", "problem": "A signal conditioning circuit is designed using an ideal operational amplifier (op-amp) to shift the level of a DC input signal. The circuit is constructed as follows: A resistor with resistance $R_1$ connects an input voltage source, providing a voltage $V_{in}$, to the inverting input terminal (-) of the op-amp. A feedback resistor with resistance $R_f$ is connected between the output terminal (providing voltage $V_{out}$) and the inverting input terminal. To create the desired level shift, the non-inverting input terminal (+) of the op-amp is connected to a stable DC reference voltage, $V_{ref}$, instead of to ground.\n\nAssuming the operational amplifier is ideal, derive a symbolic expression for the output voltage $V_{out}$ in terms of the input voltage $V_{in}$, the reference voltage $V_{ref}$, and the resistances $R_1$ and $R_f$.", "solution": "Assume an ideal op-amp with negative feedback. The ideal op-amp conditions are: (i) infinite input impedance so input currents are zero, and (ii) the voltages at the inputs are equal in the linear region, so $V_{-}=V_{+}$. Since the non-inverting input is tied to $V_{ref}$, the inverting input node has $V_{-}=V_{ref}$.\n\nApply Kirchhoff’s current law at the inverting input node. With no current entering the op-amp input, the sum of currents through $R_{1}$ and $R_{f}$ must be zero. Taking currents from the sources into the node as positive,\n$$\n\\frac{V_{in}-V_{-}}{R_{1}}+\\frac{V_{out}-V_{-}}{R_{f}}=0.\n$$\nSubstitute $V_{-}=V_{ref}$:\n$$\n\\frac{V_{in}-V_{ref}}{R_{1}}+\\frac{V_{out}-V_{ref}}{R_{f}}=0.\n$$\nSolve for $V_{out}$:\n$$\n\\frac{V_{out}-V_{ref}}{R_{f}}=-\\frac{V_{in}-V_{ref}}{R_{1}}\n\\;\\Rightarrow\\;\nV_{out}-V_{ref}=-\\frac{R_{f}}{R_{1}}\\left(V_{in}-V_{ref}\\right),\n$$\n$$\nV_{out}=V_{ref}-\\frac{R_{f}}{R_{1}}V_{in}+\\frac{R_{f}}{R_{1}}V_{ref}\n=\\left(1+\\frac{R_{f}}{R_{1}}\\right) V_{ref}-\\frac{R_{f}}{R_{1}} V_{in}.\n$$\nThis is the desired symbolic expression in terms of $V_{in}$, $V_{ref}$, $R_{1}$, and $R_{f}$.", "answer": "$$\\boxed{\\left(1+\\frac{R_{f}}{R_{1}}\\right) V_{ref}-\\frac{R_{f}}{R_{1}} V_{in}}$$", "id": "1341082"}, {"introduction": "Ideal circuit analysis provides the foundation, but understanding the impact of real-world imperfections is what makes a great engineer. This problem delves into a practical scenario by examining a difference amplifier where a manufacturing flaw has caused a mismatch in one of the resistors. By analyzing how this imperfection affects the circuit's ability to reject a common-mode signal, you will gain a deeper appreciation for the importance of component matching and the origins of a critical performance metric, the Common-Mode Rejection Ratio (CMRR). [@problem_id:1341094]", "problem": "An ideal Operational Amplifier (Op-Amp) is configured as a difference amplifier. The circuit is constructed as follows: An input voltage $v_1$ is connected to the inverting input terminal ($-$) of the Op-Amp through a resistor $R_1$. A feedback resistor $R_2$ connects the output terminal $v_{out}$ to the inverting input terminal. A second input voltage $v_2$ is connected to the non-inverting input terminal ($+$) through a resistor $R_3$. The non-inverting input terminal is also connected to ground through a resistor $R_4$.\n\nThe amplifier is designed to have perfectly matched resistor ratios, such that $R_3 = R_1$ and $R_4 = R_2$. However, due to a manufacturing imperfection, the resistor $R_4$ has a fractional deviation $\\delta$ from its intended value. Its actual resistance is $R_4 = R_2(1+\\delta)$, while resistors $R_1$, $R_2$, and $R_3$ are all at their ideal intended values (i.e., $R_3 = R_1$).\n\nA pure common-mode input signal is applied to the amplifier, such that $v_1 = v_2 = V_{cm}$. Determine the resulting output voltage $v_{out}$. Express your answer as a single closed-form analytic expression in terms of $V_{cm}$, $R_1$, $R_2$, and $\\delta$.", "solution": "For an ideal op-amp with negative feedback, the input currents are zero and the input node voltages satisfy $v_{-} = v_{+}$.\n\nThe non-inverting input sees a resistive divider from $v_{2}$ to ground through $R_{3}$ and $R_{4}$ with no loading, so\n$$\nv_{+} = v_{2}\\,\\frac{R_{4}}{R_{3} + R_{4}}.\n$$\nOn the inverting side, applying KCL at the inverting node (with zero input current) gives\n$$\n\\frac{v_{1} - v_{-}}{R_{1}} + \\frac{v_{out} - v_{-}}{R_{2}} = 0.\n$$\nRearranging for $v_{out}$ yields\n$$\nv_{out} = \\frac{(R_{1} + R_{2})\\,v_{-} - R_{2}\\,v_{1}}{R_{1}}.\n$$\nWith a pure common-mode input $v_{1} = v_{2} = V_{cm}$ and using $v_{-} = v_{+}$, we have\n$$\nv_{out} = \\frac{R_{1} + R_{2}}{R_{1}}\\,V_{cm}\\,\\frac{R_{4}}{R_{3} + R_{4}} - \\frac{R_{2}}{R_{1}}\\,V_{cm}.\n$$\nUsing the intended matching $R_{3} = R_{1}$ and the deviation $R_{4} = R_{2}(1+\\delta)$, substitute to obtain\n$$\nv_{out} = \\frac{R_{2}}{R_{1}}\\,V_{cm}\\left[\\frac{\\left(R_{1} + R_{2}\\right)\\left(1+\\delta\\right)}{R_{1} + R_{2}\\left(1+\\delta\\right)} - 1\\right].\n$$\nSimplify the bracketed term:\n$$\n\\frac{\\left(R_{1} + R_{2}\\right)\\left(1+\\delta\\right)}{R_{1} + R_{2}\\left(1+\\delta\\right)} - 1\n= \\frac{\\left(R_{1} + R_{2}\\right)\\left(1+\\delta\\right) - \\left(R_{1} + R_{2}\\left(1+\\delta\\right)\\right)}{R_{1} + R_{2}\\left(1+\\delta\\right)}\n= \\frac{R_{1}\\delta}{R_{1} + R_{2}\\left(1+\\delta\\right)}.\n$$\nTherefore,\n$$\nv_{out} = V_{cm}\\,\\frac{R_{2}}{R_{1}}\\,\\frac{R_{1}\\delta}{R_{1} + R_{2}\\left(1+\\delta\\right)}\n= V_{cm}\\,\\frac{R_{2}\\,\\delta}{R_{1} + R_{2}\\left(1+\\delta\\right)}.\n$$\nThis expression satisfies $v_{out} = 0$ when $\\delta = 0$ and reduces correctly in limiting cases.", "answer": "$$\\boxed{V_{cm}\\,\\frac{R_{2}\\,\\delta}{R_{1}+R_{2}\\left(1+\\delta\\right)}}$$", "id": "1341094"}]}
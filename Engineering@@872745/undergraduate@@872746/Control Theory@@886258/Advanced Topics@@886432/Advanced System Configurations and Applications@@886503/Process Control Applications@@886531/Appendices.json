{"hands_on_practices": [{"introduction": "A core function of process control is to automatically counteract disturbances that would otherwise push a system away from its desired operating point. This exercise uses the relatable example of an automated IV drip to explore disturbance rejection. You will analyze how a simple proportional feedback controller works to maintain a constant medication flow rate despite the changing hydrostatic pressure as the IV bag empties, and quantify the controller's effectiveness [@problem_id:1601737].", "problem": "An automated intravenous (IV) infusion pump is designed to deliver medication at a constant volumetric flow rate. The flow rate, $Q$, is primarily driven by the hydrostatic pressure from the fluid in the IV bag, but this pressure decreases as the bag empties. A feedback controller is implemented to counteract this disturbance.\n\nThe system's behavior around a desired operating point ($Q_{sp}$, $h_0$) can be described with a linearized model. Let $q(t) = Q(t) - Q_{sp}$ be the deviation in flow rate from the setpoint $Q_{sp}$, and let $h'(t) = h(t) - h_0$ be the deviation in fluid height from the initial height $h_0$. The controller adjusts the fluidic resistance of the IV tube. Let $r(t) = R_f(t) - R_0$ be the deviation in resistance from its nominal value $R_0$ at the operating point.\n\nThe linearized process is described by the equation:\n$$q(t) = \\frac{Q_{sp}}{h_0} h'(t) - \\frac{Q_{sp}}{R_0} r(t)$$\n\nA proportional (P) controller is used to adjust the resistance. The control law is given by:\n$$r(t) = -K_c e(t)$$\nwhere $e(t) = Q_{sp} - Q(t)$ is the error and $K_c$ is a positive controller gain.\n\nAssume the system is initially operating at steady-state with a flow rate of $Q_{sp}$ and a fluid height of $h_0$. After some time, the fluid level in the bag drops by a small, constant amount $\\Delta h$. The system then reaches a new steady state.\n\nDerive a closed-form analytic expression for the new steady-state flow rate, $Q_{final}$, in terms of the setpoint flow rate $Q_{sp}$, the initial height $h_0$, the height drop $\\Delta h$, and the dimensionless controller gain group $K = K_c \\frac{Q_{sp}}{R_0}$.", "solution": "We start from the given linearized process relationship between deviations about the operating point:\n$$q(t) = \\frac{Q_{sp}}{h_0} h'(t) - \\frac{Q_{sp}}{R_0} r(t).$$\nThe proportional controller is given by\n$$r(t) = -K_c e(t), \\quad e(t) = Q_{sp} - Q(t).$$\nExpress the error in terms of the deviation variable $q(t) = Q(t) - Q_{sp}$:\n$$e(t) = Q_{sp} - Q(t) = -\\bigl(Q(t) - Q_{sp}\\bigr) = -q(t).$$\nTherefore, the control law becomes\n$$r(t) = -K_c\\bigl(-q(t)\\bigr) = K_c q(t).$$\nAfter the fluid level drops by a small constant amount $\\Delta h$, the new steady state has constant deviations. The height deviation is\n$$h'(t) = h(t) - h_0 = \\bigl(h_0 - \\Delta h\\bigr) - h_0 = -\\Delta h.$$\nAt steady state, substitute $h' = -\\Delta h$ and $r = K_c q$ into the process equation:\n$$q = \\frac{Q_{sp}}{h_0}(-\\Delta h) - \\frac{Q_{sp}}{R_0}\\bigl(K_c q\\bigr).$$\nIntroduce the given dimensionless gain group\n$$K = K_c \\frac{Q_{sp}}{R_0},$$\nto rewrite the steady-state equation as\n$$q = -\\frac{Q_{sp}}{h_0}\\Delta h - K q.$$\nCollect terms in $q$:\n$$(1+K)q = -\\frac{Q_{sp}}{h_0}\\Delta h.$$\nSolve for $q$:\n$$q = -\\frac{Q_{sp}}{h_0}\\frac{\\Delta h}{1+K}.$$\nThe final steady-state flow rate is $Q_{final} = Q_{sp} + q$, hence\n$$Q_{final} = Q_{sp} - \\frac{Q_{sp}}{h_0}\\frac{\\Delta h}{1+K} = Q_{sp}\\left(1 - \\frac{\\Delta h}{h_0(1+K)}\\right).$$\nThis expression shows that as $K \\to \\infty$, $Q_{final} \\to Q_{sp}$ (perfect regulation), while for $K = 0$ (no control) it reduces to the open-loop sensitivity $Q_{final} = Q_{sp}\\left(1 - \\frac{\\Delta h}{h_0}\\right)$ given by the hydrostatic effect alone.", "answer": "$$\\boxed{Q_{sp}\\left(1 - \\frac{\\Delta h}{h_{0}\\left(1+K\\right)}\\right)}$$", "id": "1601737"}, {"introduction": "Before a controller can be effective, its parameters must be tuned to match the dynamics of the process. This practice walks you through one of the most foundational techniques in the field: the Ziegler-Nichols open-loop tuning method. By analyzing the \"process reaction curve\" from a hypothetical step test on a distillation column's reboiler, you will identify a simplified process model and calculate the standard PID controller parameters, gaining hands-on experience in a task routinely performed by process engineers [@problem_id:1601770].", "problem": "A process engineer is tasked with tuning a Proportional-Integral-Derivative (PID) controller for a reboiler at the bottom of a distillation column. The controller manipulates the steam valve opening (in percent, %) to control the temperature of the liquid product (in degrees Celsius, °C). To characterize the process dynamics, the engineer performs an open-loop step test.\n\nThe process is initially at a steady state with the steam valve at 20.0% opening and the product temperature at 110.0 °C. At time $t=0$, the steam valve opening is suddenly increased to 30.0%. After this step change, the temperature remains constant for a short period before starting to rise, eventually settling at a new steady-state temperature of 125.0 °C.\n\nAn analysis of the recorded temperature data reveals that a line constructed to be tangent to the steepest part of the temperature response curve intersects the initial temperature line (110.0 °C) at time $t = 2.5$ minutes. The same tangent line intersects the final temperature line (125.0 °C) at time $t = 9.0$ minutes.\n\nAssuming the reboiler's dynamic response can be approximated by a first-order plus dead-time model, calculate the standard Ziegler-Nichols tuning parameters for a PID controller: the dimensionless controller gain $K_c$, the integral time $\\tau_I$, and the derivative time $\\tau_D$. Express your final answers for $\\tau_I$ and $\\tau_D$ in minutes. Round all three numerical values to three significant figures.", "solution": "We model the reboiler dynamics by a first-order plus dead-time (FOPDT) model, whose step response for a step input change $\\Delta u$ at $t=0$ is\n$$\ny(t) = y_{0} + K_{p}\\,\\Delta u \\left(1 - \\exp\\!\\left(-\\frac{t - L}{T}\\right)\\right), \\quad t \\geq L,\n$$\nwith process gain $K_{p}$, time constant $T$, and dead time $L$.\n\nFrom the open-loop step test:\n- Initial steady state: valve opening $u_{0}=20.0$ (in percent units) and product temperature $y_{0}=110.0$ (degrees Celsius).\n- Step change: $u$ increased to $u_{1}=30.0$ at $t=0$, so $\\Delta u = u_{1}-u_{0} = 10.0$.\n- Final steady-state temperature: $y_{\\infty}=125.0$, so $\\Delta y = y_{\\infty}-y_{0} = 15.0$.\n\nThus the process gain is\n$$\nK_{p} = \\frac{\\Delta y}{\\Delta u} = \\frac{15.0}{10.0} = 1.5.\n$$\n\nUsing the tangent (reaction curve) method for FOPDT identification:\n- The tangent at the inflection point intersects the initial output line at $t = 2.5$ minutes, giving the dead time\n$$\nL = 2.5 \\text{ minutes}.\n$$\n- The same tangent intersects the final output line at $t = 9.0$ minutes, so the time constant is\n$$\nT = 9.0 - 2.5 = 6.5 \\text{ minutes}.\n$$\n\nThe standard Ziegler-Nichols step-response PID settings are\n$$\nK_{c} = 1.2\\,\\frac{T}{K_{p}\\,L}, \\quad \\tau_{I} = 2\\,L, \\quad \\tau_{D} = \\frac{L}{2}.\n$$\n\nSubstituting $K_{p} = 1.5$, $L = 2.5$ minutes, and $T = 6.5$ minutes:\n$$\nK_{c} = 1.2 \\times \\frac{6.5}{1.5 \\times 2.5} = 1.2 \\times \\frac{6.5}{3.75} = 1.2 \\times \\frac{26}{15} = \\frac{156}{75} = 2.08,\n$$\n$$\n\\tau_{I} = 2 \\times 2.5 = 5.00 \\text{ minutes},\n$$\n$$\n\\tau_{D} = \\frac{2.5}{2} = 1.25 \\text{ minutes}.\n$$\n\nRounded to three significant figures as required: $K_{c} = 2.08$, $\\tau_{I} = 5.00$ minutes, $\\tau_{D} = 1.25$ minutes.", "answer": "$$\\boxed{\\begin{pmatrix} 2.08 & 5.00 & 1.25 \\end{pmatrix}}$$", "id": "1601770"}, {"introduction": "While empirical tuning rules are useful, modern control theory offers more systematic design approaches, such as Internal Model Control (IMC). This advanced practice demonstrates how to design a controller based directly on a mathematical model of the process—in this case, a high-temperature industrial furnace. By deriving the equivalent classical controller from an IMC design, you will uncover the theoretical link between this modern framework and the traditional PID controller, deepening your understanding of controller architecture [@problem_id:1601762].", "problem": "An industrial annealing furnace used for heat-treating a novel high-strength aluminum alloy requires precise temperature control. Experimental analysis has shown that the thermal dynamics of the furnace can be accurately represented by a First-Order-Plus-Dead-Time (FOPDT) model. The transfer function, $G_p(s)$, which relates the furnace temperature (output) to the heater power (input), is given by:\n\n$$G_p(s) = \\frac{K_p \\exp(-\\theta_p s)}{\\tau_p s + 1}$$\n\nHere, $K_p$ is the process gain, $\\tau_p$ is the process time constant, and $\\theta_p$ is the process dead time, all of which are positive real constants.\n\nTo regulate the temperature, an Internal Model Control (IMC) strategy is proposed. The IMC controller, $Q(s)$, is designed by taking the inverse of the invertible (or \"good\") part of the process model, $\\tilde{G}_{p,-}(s)$, and multiplying it by a first-order filter, $f(s) = \\frac{1}{\\lambda s + 1}$, to ensure robustness and physical realizability. The parameter $\\lambda$ is a tunable filter time constant. The non-invertible part of the model, $\\tilde{G}_{p,+}(s)$, contains the time delay.\n\nYour task is to derive the transfer function for the equivalent classical feedback controller, $G_c(s)$, that results from this IMC design. In your derivation, a simplification must be made: use a first-order Taylor series approximation for the dead-time exponential term only when it appears in the denominator of the expression for $G_c(s)$. Express your final answer for $G_c(s)$ as a single transfer function in terms of the symbolic parameters $K_p$, $\\tau_p$, $\\theta_p$, and $\\lambda$.", "solution": "We are given a First-Order-Plus-Dead-Time (FOPDT) plant model\n$$\nG_{p}(s) = \\frac{K_{p}\\,\\exp(-\\theta_{p} s)}{\\tau_{p} s + 1},\n$$\nwith $K_{p}>0$, $\\tau_{p}>0$, and $\\theta_{p}>0$. In an Internal Model Control (IMC) design, we factor the model into an invertible part and a non-invertible part. For the FOPDT form,\n$$\n\\tilde{G}_{p,-}(s) = \\frac{K_{p}}{\\tau_{p} s + 1}, \n\\qquad\n\\tilde{G}_{p,+}(s) = \\exp(-\\theta_{p} s),\n\\qquad\n\\tilde{G}_{p}(s) = \\tilde{G}_{p,-}(s)\\,\\tilde{G}_{p,+}(s).\n$$\nThe IMC controller is chosen as the inverse of the invertible part times a first-order filter $f(s) = \\frac{1}{\\lambda s + 1}$:\n$$\nQ(s) = \\tilde{G}_{p,-}^{-1}(s)\\,f(s) \n= \\frac{\\tau_{p} s + 1}{K_{p}} \\cdot \\frac{1}{\\lambda s + 1}\n= \\frac{\\tau_{p} s + 1}{K_{p}(\\lambda s + 1)}.\n$$\n\nFor SISO LTI systems, the equivalent classical feedback controller that reproduces the IMC closed-loop (under the usual IMC equivalence with model $\\tilde{G}_{p}$ in the controller structure) is given by the standard IMC-to-feedback mapping\n$$\nG_{c}(s) = \\frac{Q(s)}{1 - \\tilde{G}_{p}(s)\\,Q(s)}.\n$$\nSubstituting $\\tilde{G}_{p}(s) = \\frac{K_{p}\\,\\exp(-\\theta_{p} s)}{\\tau_{p} s + 1}$ and $Q(s) = \\frac{\\tau_{p} s + 1}{K_{p}(\\lambda s + 1)}$ gives\n$$\n\\tilde{G}_{p}(s)\\,Q(s) \n= \\left(\\frac{K_{p}\\,\\exp(-\\theta_{p} s)}{\\tau_{p} s + 1}\\right)\n\\left(\\frac{\\tau_{p} s + 1}{K_{p}(\\lambda s + 1)}\\right)\n= \\frac{\\exp(-\\theta_{p} s)}{\\lambda s + 1}.\n$$\nTherefore,\n$$\n1 - \\tilde{G}_{p}(s)\\,Q(s) \n= 1 - \\frac{\\exp(-\\theta_{p} s)}{\\lambda s + 1}\n= \\frac{\\lambda s + 1 - \\exp(-\\theta_{p} s)}{\\lambda s + 1},\n$$\nand hence\n$$\nG_{c}(s) \n= \\frac{\\frac{\\tau_{p} s + 1}{K_{p}(\\lambda s + 1)}}{\\frac{\\lambda s + 1 - \\exp(-\\theta_{p} s)}{\\lambda s + 1}}\n= \\frac{\\tau_{p} s + 1}{K_{p}\\left(\\lambda s + 1 - \\exp(-\\theta_{p} s)\\right)}.\n$$\n\nPer the instruction, we now use a first-order Taylor series approximation for the dead-time exponential term only when it appears in the denominator of $G_{c}(s)$. Specifically, in the denominator we approximate\n$$\n\\exp(-\\theta_{p} s) \\approx 1 - \\theta_{p} s,\n$$\nso that\n$$\n\\lambda s + 1 - \\exp(-\\theta_{p} s) \\approx \\lambda s + 1 - (1 - \\theta_{p} s) = (\\lambda + \\theta_{p}) s.\n$$\nThus the equivalent classical feedback controller simplifies to the single transfer function\n$$\nG_{c}(s) \\approx \\frac{\\tau_{p} s + 1}{K_{p}(\\lambda + \\theta_{p})\\,s}.\n$$\nThis is a proportional-integral form with $K_{c} = \\frac{\\tau_{p}}{K_{p}(\\lambda + \\theta_{p})}$ and integral time $\\tau_{I} = \\tau_{p}$, but the required final expression is the single transfer function shown above.", "answer": "$$\\boxed{\\frac{\\tau_{p} s + 1}{K_{p}\\,(\\lambda + \\theta_{p})\\,s}}$$", "id": "1601762"}]}
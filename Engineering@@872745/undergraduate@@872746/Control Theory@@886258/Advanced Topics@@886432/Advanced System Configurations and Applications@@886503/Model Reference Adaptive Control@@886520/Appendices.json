{"hands_on_practices": [{"introduction": "The first step in designing any Model Reference Adaptive Control system is to precisely define what we are trying to control: the tracking error. This fundamental exercise involves deriving the differential equation that governs this error, which is the difference between the actual system's output and the desired model's output. Understanding this error dynamic is crucial because it reveals how the controller parameters influence the system's performance, laying the mathematical groundwork for the adaptation mechanism itself [@problem_id:1591821].", "problem": "Consider a simple first-order dynamical system, often referred to as the 'plant', whose behavior is described by the differential equation:\n$$ \\dot{y}_p(t) = -a_p y_p(t) + b_p u(t) $$\nHere, $y_p(t)$ is the output of the plant, $u(t)$ is the control input, and $a_p$ and $b_p$ are constant positive parameters representing the plant's characteristics.\n\nThe goal is to make the plant's output $y_p(t)$ follow the output of a stable 'reference model', $y_m(t)$, which is defined by:\n$$ \\dot{y}_m(t) = -a_m y_m(t) + b_m r(t) $$\nIn this equation, $y_m(t)$ is the desired model output, $r(t)$ is a bounded reference signal, and $a_m$ and $b_m$ are known positive constants.\n\nTo achieve this, a linear feedback controller is implemented, where the control input $u(t)$ is given by:\n$$ u(t) = \\theta_1 y_p(t) + \\theta_2 r(t) $$\nThe parameters $\\theta_1$ and $\\theta_2$ are the constant controller gains.\n\nThe tracking error, $e(t)$, is defined as the difference between the plant output and the reference model output:\n$$ e(t) = y_p(t) - y_m(t) $$\n\nThe dynamics of this tracking error can be expressed as a first-order ordinary differential equation in the form $\\dot{e}(t) = F$. Your task is to find the expression for $F$. Express your answer in terms of the tracking error $e(t)$, the reference model output $y_m(t)$, the reference signal $r(t)$, and the constant parameters ($a_p, b_p, a_m, b_m, \\theta_1, \\theta_2$). For simplicity, you may omit the explicit time dependence $(t)$ in your final expression.", "solution": "We start from the definitions of the plant, model, control law, and tracking error:\n- Plant: $\\dot{y}_{p}=-a_{p}y_{p}+b_{p}u$.\n- Model: $\\dot{y}_{m}=-a_{m}y_{m}+b_{m}r$.\n- Control: $u=\\theta_{1}y_{p}+\\theta_{2}r$.\n- Error: $e=y_{p}-y_{m}$.\n\nDifferentiate the error to obtain its dynamics:\n$$\n\\dot{e}=\\dot{y}_{p}-\\dot{y}_{m}.\n$$\nSubstitute the plant and model dynamics:\n$$\n\\dot{e}=\\left(-a_{p}y_{p}+b_{p}u\\right)-\\left(-a_{m}y_{m}+b_{m}r\\right).\n$$\nSubstitute the control input $u=\\theta_{1}y_{p}+\\theta_{2}r$:\n$$\n\\dot{e}=-a_{p}y_{p}+b_{p}\\left(\\theta_{1}y_{p}+\\theta_{2}r\\right)+a_{m}y_{m}-b_{m}r.\n$$\nGroup terms:\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)y_{p}+a_{m}y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\nExpress $y_{p}$ in terms of $e$ and $y_{m}$ using $y_{p}=e+y_{m}$:\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)\\left(e+y_{m}\\right)+a_{m}y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\nDistribute and collect like terms:\n$$\n\\dot{e}=\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(-a_{p}+b_{p}\\theta_{1}+a_{m}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$\nTherefore, the error dynamics $\\dot{e}=F$ has\n$$\nF=\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(a_{m}-a_{p}+b_{p}\\theta_{1}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r.\n$$", "answer": "$$\\boxed{\\left(-a_{p}+b_{p}\\theta_{1}\\right)e+\\left(a_{m}-a_{p}+b_{p}\\theta_{1}\\right)y_{m}+\\left(b_{p}\\theta_{2}-b_{m}\\right)r}$$", "id": "1591821"}, {"introduction": "Once we understand the error dynamics, the next question is how to design a mechanism that automatically adjusts the controller to drive this error to zero. This practice introduces the celebrated MIT rule, an intuitive gradient-based method for creating an adaptation law. By working through this problem, you will derive a parameter update rule that continuously refines the controller's estimate of an unknown system parameter, forming the core of the 'adaptive' part of MRAC [@problem_id:1591815].", "problem": "Consider a simplified model for controlling the vertical speed, $v(t)$, of a small quadcopter drone. The drone's vertical dynamics are described by the first-order linear differential equation:\n$$ \\frac{dv(t)}{dt} = b u(t) $$\nwhere $u(t)$ is the control input generated by the onboard computer, and $b$ is the \"control effectiveness\" parameter. The parameter $b$ is positive but its exact value is unknown and may vary due to factors like battery discharge or changes in atmospheric density.\n\nTo ensure consistent performance, a Model Reference Adaptive Controller (MRAC) is implemented. The desired behavior of the drone is specified by a stable reference model, described by the transfer function:\n$$ G_m(s) = \\frac{V_m(s)}{V_c(s)} = \\frac{b_m}{s+a_m} $$\nHere, $v_m(t)$ is the desired model output speed, $v_c(t)$ is the reference command speed, and $a_m  0$ and $b_m  0$ are known, fixed design parameters.\n\nThe adaptive control law is structured to achieve perfect model following and is given by:\n$$ u(t) = \\frac{1}{\\hat{b}(t)} \\left( b_m v_c(t) - a_m v(t) \\right) $$\nwhere $\\hat{b}(t)$ is the online estimate of the unknown parameter $b$.\n\nTo update this estimate, the controller uses the Massachusetts Institute of Technology (MIT) rule, which aims to minimize the cost function $J(\\hat{b}) = \\frac{1}{2} e(t)^2$ where $e(t) = v(t) - v_m(t)$ is the tracking error. The general form of the MIT rule is $\\frac{d\\hat{b}}{dt} = -\\gamma \\frac{\\partial J}{\\partial \\hat{b}}$, where $\\gamma  0$ is a constant adaptation gain.\n\nThe resulting update law can be written in the form $\\frac{d\\hat{b}}{dt} = \\gamma e(t)\\phi(t)$, where $\\phi(t)$ is a signal generated by filtering the control input $u(t)$ through a linear time-invariant filter $W(s)$. That is, $\\phi(t)$ is the output of the filter $W(s)$ when the input is $u(t)$.\n\nDetermine the transfer function of this sensitivity filter, $W(s)$. Express your answer in terms of the given parameters.", "solution": "Let $\\theta \\triangleq \\hat{b}$. The plant and control law are\n$$\\dot{v}(t) = b\\,u(t), \\qquad u(t) = \\frac{1}{\\theta}\\left(b_{m}v_{c}(t) - a_{m}v(t)\\right).$$\nHence the closed-loop dynamics in terms of $\\theta$ are\n$$\\dot{v}(t) = \\frac{b}{\\theta}\\,b_{m}v_{c}(t) - \\frac{b}{\\theta}\\,a_{m}v(t).$$\nDefine the sensitivity $S(t) \\triangleq \\frac{\\partial v(t)}{\\partial \\theta}$. Differentiating the closed-loop equation with respect to $\\theta$ (with $b$ and $v_{c}$ independent of $\\theta$) yields\n$$\\dot{S}(t) = -\\frac{b\\,b_{m}}{\\theta^{2}}\\,v_{c}(t) + \\frac{b\\,a_{m}}{\\theta^{2}}\\,v(t) - \\frac{b\\,a_{m}}{\\theta}\\,S(t).$$\nUsing the control identity from $u(t)$,\n$$b_{m}v_{c}(t) - a_{m}v(t) = \\theta\\,u(t) \\quad \\Longrightarrow \\quad a_{m}v(t) - b_{m}v_{c}(t) = -\\theta\\,u(t),$$\nthe sensitivity dynamics become\n$$\\dot{S}(t) + \\frac{b\\,a_{m}}{\\theta}\\,S(t) = -\\frac{b}{\\theta}\\,u(t).$$\nTaking Laplace transforms (zero initial sensitivity) gives\n$$S(s) = -\\frac{\\frac{b}{\\theta}}{s + \\frac{b\\,a_{m}}{\\theta}}\\,U(s).$$\nWith the MIT rule $ \\dot{\\theta} = -\\gamma\\,\\frac{\\partial J}{\\partial \\theta} = -\\gamma\\,e\\,\\frac{\\partial e}{\\partial \\theta} $ and $e = v - v_{m}$, we have $\\frac{\\partial e}{\\partial \\theta} = S$. Writing the update as $\\dot{\\theta} = \\gamma\\,e\\,\\phi$ implies $\\phi = -S$, so the filter from $u$ to $\\phi$ is\n$$\\Phi(s) = \\frac{\\frac{b}{\\theta}}{s + \\frac{b\\,a_{m}}{\\theta}}\\,U(s).$$\nUnder the standard MRAC matching condition at the ideal parameter $\\theta = b$ (the point of perfect model following), this reduces to\n$$\\Phi(s) = \\frac{1}{s + a_{m}}\\,U(s).$$\nTherefore, the sensitivity filter transfer function is\n$$W(s) = \\frac{1}{s + a_{m}}.$$\nThis depends only on the known design parameter $a_{m}$, as required.", "answer": "$$\\boxed{\\frac{1}{s+a_{m}}}$$", "id": "1591815"}, {"introduction": "Ideal control theories often assume a perfect world, but real engineering systems are subject to unexpected external forces, or disturbances. This practice explores the robustness of a standard MRAC system by analyzing its behavior in the presence of a constant, unmeasured disturbance. By making a simplifying assumption that the controller's parameters have settled to their ideal values, this exercise isolates the effect of the disturbance, revealing a potential steady-state tracking error and highlighting an important consideration for practical applications [@problem_id:1591819].", "problem": "A simplified model for a position-controlled servo system is described by the second-order differential equation:\n$$\n\\ddot{y}_p(t) = b_p u(t) + d\n$$\nwhere $y_p(t)$ is the angular position of the output shaft, $u(t)$ is the control signal (proportional to torque), $b_p$ is an unknown but positive constant representing the control effectiveness, and $d$ is an unknown constant external disturbance torque.\n\nThe objective is to make the plant's position $y_p(t)$ track the output $y_m(t)$ of a stable reference model. This reference model is specified by:\n$$\n\\ddot{y}_m(t) + a_{m1} \\dot{y}_m(t) + a_{m0} y_m(t) = b_{m0} r(t)\n$$\nHere, $r(t)$ is a bounded reference command signal, and $a_{m1}$, $a_{m0}$, and $b_{m0}$ are known positive constants that define a desired stable response.\n\nA Model Reference Adaptive Control (MRAC) strategy is employed. The control law has the following structure:\n$$\nu(t) = \\hat{\\theta}_1(t) r(t) + \\hat{\\theta}_2(t) y_p(t) + \\hat{\\theta}_3(t) \\dot{y}_p(t)\n$$\nThe parameters $\\hat{\\theta}_1(t)$, $\\hat{\\theta}_2(t)$, and $\\hat{\\theta}_3(t)$ are adjusted by an adaptation mechanism. This mechanism is designed such that, in the ideal case where the disturbance $d=0$, the parameters $\\hat{\\theta}_i(t)$ would converge to unique constant values $\\theta_i^*$ that achieve perfect model matching.\n\nFor this problem, analyze the system in the presence of the non-zero constant disturbance $d$. You must make the crucial assumption that even with this disturbance, the adaptive parameters have settled to the same ideal constant values, $\\theta_i^*$, that they would in the disturbance-free case. Assume the reference command is held at a constant value $r(t) = r_0$ long enough for the system to reach a steady state.\n\nUnder these conditions, determine the final steady-state tracking error, defined as $e_{ss} = \\lim_{t\\to\\infty} [y_p(t) - y_m(t)]$. Express your final answer as a closed-form analytic expression in terms of the system and model parameters, which may include $d$, $b_p$, $a_{m1}$, $a_{m0}$, and $b_{m0}$.", "solution": "The plant is $\\ddot{y}_{p}(t)=b_{p}u(t)+d$ with control $u(t)=\\hat{\\theta}_{1}(t)r(t)+\\hat{\\theta}_{2}(t)y_{p}(t)+\\hat{\\theta}_{3}(t)\\dot{y}_{p}(t)$. In the disturbance-free case $d=0$, perfect model matching to the reference model\n$$\n\\ddot{y}_{m}(t)+a_{m1}\\dot{y}_{m}(t)+a_{m0}y_{m}(t)=b_{m0}r(t)\n$$\nis achieved when the parameters settle to constants $\\theta_{i}^{*}$ satisfying, for all signals,\n$$\n\\ddot{y}_{p}=b_{p}\\left(\\theta_{1}^{*}r+\\theta_{2}^{*}y_{p}+\\theta_{3}^{*}\\dot{y}_{p}\\right)=-a_{m1}\\dot{y}_{p}-a_{m0}y_{p}+b_{m0}r.\n$$\nEquating coefficients yields the ideal matching conditions\n$$\nb_{p}\\theta_{1}^{*}=b_{m0},\\quad b_{p}\\theta_{2}^{*}=-a_{m0},\\quad b_{p}\\theta_{3}^{*}=-a_{m1}.\n$$\nUnder the stated assumption that, even with $d\\neq 0$, the parameters remain at these ideal values, the closed-loop plant dynamics become\n$$\n\\ddot{y}_{p}+a_{m1}\\dot{y}_{p}+a_{m0}y_{p}=b_{m0}r+d.\n$$\nDefine the tracking error $e(t)=y_{p}(t)-y_{m}(t)$. Subtracting the reference model equation gives the error dynamics\n$$\n\\ddot{e}+a_{m1}\\dot{e}+a_{m0}e=d.\n$$\nWith $r(t)=r_{0}$ constant and $a_{m1}0$, $a_{m0}0$, the error system is asymptotically stable and converges to the equilibrium $e_{ss}$ satisfying $\\dot{e}=0$ and $\\ddot{e}=0$. Substituting into the error equation gives\n$$\na_{m0}e_{ss}=d\\quad\\Rightarrow\\quad e_{ss}=\\frac{d}{a_{m0}}.\n$$\nEquivalently, evaluating steady states directly: $y_{m,ss}=(b_{m0}/a_{m0})r_{0}$ and $y_{p,ss}=(b_{m0}r_{0}+d)/a_{m0}$, so $e_{ss}=y_{p,ss}-y_{m,ss}=d/a_{m0}$.", "answer": "$$\\boxed{\\frac{d}{a_{m0}}}$$", "id": "1591819"}]}
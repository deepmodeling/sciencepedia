{"hands_on_practices": [{"introduction": "Beyond simple binary counting, digital systems often require counters that follow specific, non-standard sequences. This practice explores the design of a synchronous counter for a Gray code sequence, which is crucial in applications like rotary encoders to prevent erroneous readings during state transitions. This exercise will guide you through the fundamental process of translating a state transition table for an up/down Gray code counter into the precise combinational logic required for its D-flip-flop inputs [@problem_id:1966203].", "problem": "A digital control system for a rotary shaft encoder requires a synchronous 3-bit counter that can track the shaft's position. The counter's state is represented by three bits, $Q_2, Q_1, Q_0$. The system must cycle through the standard 3-bit Gray code sequence. A direction control input, `DIR`, determines the counting direction: the counter cycles forward (up) when `DIR`=0 and backward (down) when `DIR`=1. All state transitions are synchronized to the rising edge of a clock signal.\n\nThe standard 3-bit Gray code sequence is: 000, 001, 011, 010, 110, 111, 101, 100.\n\nThe counter is to be implemented using three D-type flip-flops (D-FFs), with inputs $D_2, D_1, D_0$ corresponding to the state bits $Q_2, Q_1, Q_0$. Your task is to determine the correct set of combinational logic equations for the inputs $D_2, D_1,$ and $D_0$ as functions of the present state ($Q_2, Q_1, Q_0$) and the direction input `DIR`.\n\nIn the options below, a prime (e.g., $A'$) denotes the NOT operation, juxtaposition (e.g., $AB$) denotes the AND operation, a plus sign ($+$) denotes the OR operation, $\\oplus$ denotes the Exclusive-OR (XOR) operation, and XNOR denotes the Exclusive-NOR operation.\n\nWhich of the following sets of equations correctly describes the logic for the D-FF inputs?\n\nA.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\text{ XNOR } Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nB.\n$D_2 = Q_2 Q_0 + DIR Q_1 Q_0' + DIR' Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\text{ XNOR } Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nC.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 Q_0' + (DIR \\oplus Q_2) Q_0$\n$D_0 = (DIR \\oplus Q_2) \\oplus Q_1$\n\nD.\n$D_2 = Q_2 Q_0 + DIR' Q_1 Q_0' + DIR Q_1' Q_0'$\n$D_1 = Q_1 + Q_0$\n$D_0 = (DIR \\oplus Q_2) \\text{ XNOR } Q_1$\n\nE.\n$D_2 = Q_2 \\oplus Q_1$\n$D_1 = Q_1 \\oplus Q_0$\n$D_0 = Q_0' + DIR$", "solution": "We require a synchronous 3-bit up/down Gray counter over the sequence 000, 001, 011, 010, 110, 111, 101, 100, using three D-FFs with inputs $D_{2},D_{1},D_{0}$. The direction input $DIR$ selects the next state: for $DIR=0$ advance forward (up), and for $DIR=1$ go backward (down). All transitions must be Gray-adjacent (one bit change).\n\nFirst, write the next-state mapping from each present state $(Q_{2},Q_{1},Q_{0})$.\n- For $DIR=0$ (up): \n$(000)\\to(001)$, $(001)\\to(011)$, $(011)\\to(010)$, $(010)\\to(110)$, $(110)\\to(111)$, $(111)\\to(101)$, $(101)\\to(100)$, $(100)\\to(000)$.\n- For $DIR=1$ (down): \n$(000)\\to(100)$, $(001)\\to(000)$, $(011)\\to(001)$, $(010)\\to(011)$, $(110)\\to(010)$, $(111)\\to(110)$, $(101)\\to(111)$, $(100)\\to(101)$.\n\nFrom these, derive each next-state bit.\n\n1) Derivation of $D_{0}$.\nCollecting the next $Q_{0}^{+}$ for each $(Q_{2},Q_{1})$ combination shows $Q_{0}^{+}$ is independent of $Q_{0}$ and satisfies the parity relation\n$$\nQ_{0}^{+}=\\overline{DIR \\oplus Q_{2} \\oplus Q_{1}}=(DIR \\oplus Q_{2})\\ \\text{XNOR}\\ Q_{1}.\n$$\nThus,\n$$\nD_{0}=(DIR \\oplus Q_{2})\\ \\text{XNOR}\\ Q_{1}.\n$$\n\n2) Derivation of $D_{1}$.\nInspecting the transitions:\n- When $Q_{0}=0$, $Q_{1}^{+}=Q_{1}$ for both directions (since only $Q_{0}$ or $Q_{2}$ may toggle).\n- When $Q_{0}=1$, $Q_{1}^{+}$ depends on $DIR$ and $Q_{2}$ with $Q_{1}^{+}=(DIR\\ \\text{XNOR}\\ Q_{2})$ (verified against all four cases with $Q_{0}=1$ in the mapping above).\nCombine by multiplexing on $Q_{0}$:\n$$\nD_{1}=Q_{1}Q_{0}'+(DIR\\ \\text{XNOR}\\ Q_{2})\\,Q_{0}.\n$$\n\n3) Derivation of $D_{2}$.\nInspecting the transitions:\n- When $Q_{0}=1$, $Q_{2}^{+}=Q_{2}$ for both directions (only $Q_{0}$ or $Q_{1}$ toggles).\n- When $Q_{0}=0$, $Q_{2}^{+}$ depends on $DIR$ and $Q_{1}$ with $Q_{2}^{+}=Q_{1}\\oplus DIR$ (checked for all four $Q_{0}=0$ cases).\nCombine by multiplexing on $Q_{0}$:\n$$\nD_{2}=Q_{2}Q_{0}+(Q_{1}\\oplus DIR)\\,Q_{0}'=Q_{2}Q_{0}+DIR'Q_{1}Q_{0}'+DIR\\,Q_{1}'Q_{0}'.\n$$\n\nComparing with the options:\n- $D_{2}=Q_{2}Q_{0}+DIR'Q_{1}Q_{0}'+DIR\\,Q_{1}'Q_{0}'$,\n- $D_{1}=Q_{1}Q_{0}'+(DIR\\ \\text{XNOR}\\ Q_{2})\\,Q_{0}$,\n- $D_{0}=(DIR \\oplus Q_{2})\\ \\text{XNOR}\\ Q_{1}$,\nwhich exactly matches option A.\n\nTherefore, the correct choice is A.", "answer": "$$\\boxed{A}$$", "id": "1966203"}, {"introduction": "A critical skill for a digital engineer is not just design, but also analysis and debugging. In practice, wiring errors or component failures can lead to unexpected circuit behavior. This exercise challenges you to step into the role of a troubleshooter: given a synchronous counter with a specific wiring fault, you must trace its operation step-by-step to determine the resulting state sequence. This practice reinforces your understanding of flip-flop characteristic equations and how the interplay of combinational logic and memory elements dictates a circuit's behavior [@problem_id:1966237].", "problem": "A 3-bit synchronous counter is constructed using three JK flip-flops. The state of the counter is represented by the outputs $Q_2Q_1Q_0$, where $Q_2$ is the Most Significant Bit (MSB) and $Q_0$ is the Least Significant Bit (LSB). The counter was designed to function as a standard binary up-counter, for which the correct JK flip-flop input logic is:\n$J_0 = 1, K_0 = 1$\n$J_1 = Q_0, K_1 = Q_0$\n$J_2 = Q_1Q_0, K_2 = Q_1Q_0$\n\nHowever, due to a wiring error, the inputs to the AND gate that provides the logic signal for the MSB flip-flop (FF2) were incorrectly sourced. Instead of being connected to $Q_1$ and $Q_0$, the AND gate's inputs were connected to $Q_1'$ (the inverted output of the middle flip-flop) and $Q_0$. Therefore, the input logic for FF2 became $J_2=K_2=Q_1'Q_0$. The logic for FF1 and FF0 remains as originally designed.\n\nAssuming the counter starts in the state $Q_2Q_1Q_0 = 000$, determine the sequence of states (represented in decimal) that the faulty counter will cycle through. The sequence begins with 0 and ends just before a state repeats.\n\nA. 0, 1, 2, 3, 4, 5, 6, 7\nB. 0, 1, 6, 7, 4, 5, 2, 3\nC. 0, 7, 6, 5, 4, 3, 2, 1\nD. 0, 1, 3, 2, 6, 7, 5, 4\nE. 0, 1, 2, 4, 5, 6, 7, 3", "solution": "A JK flip-flop with inputs $J=K=T$ acts as a toggle controlled by $T$, with next-state relation $Q^{+} = Q \\oplus T$. For the given 3-bit synchronous counter, the toggle signals are:\n- FF0: $T_{0}=1 \\implies Q_{0}^{+}=\\overline{Q_{0}}$.\n- FF1: $T_{1}=Q_{0} \\implies Q_{1}^{+}=Q_{1} \\oplus Q_{0}$.\n- FF2 (faulty): $T_{2}=\\overline{Q_{1}}\\,Q_{0} \\implies Q_{2}^{+}=Q_{2} \\oplus (\\overline{Q_{1}}\\,Q_{0})$.\n\nStarting from $Q_{2}Q_{1}Q_{0}=000$, compute the synchronous next states:\n1) $000 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=0\\oplus 0=0,\\ Q_{2}^{+}=0\\oplus(1\\cdot 0)=0 \\Rightarrow 001$ (decimal 1).\n2) $001 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=0\\oplus 1=1,\\ Q_{2}^{+}=0\\oplus(1\\cdot 1)=1 \\Rightarrow 110$ (decimal 6).\n3) $110 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=1\\oplus 0=1,\\ Q_{2}^{+}=1\\oplus(0\\cdot 0)=1 \\Rightarrow 111$ (decimal 7).\n4) $111 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=1\\oplus 1=0,\\ Q_{2}^{+}=1\\oplus(0\\cdot 1)=1 \\Rightarrow 100$ (decimal 4).\n5) $100 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=0\\oplus 0=0,\\ Q_{2}^{+}=1\\oplus(1\\cdot 0)=1 \\Rightarrow 101$ (decimal 5).\n6) $101 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=0\\oplus 1=1,\\ Q_{2}^{+}=1\\oplus(1\\cdot 1)=0 \\Rightarrow 010$ (decimal 2).\n7) $010 \\to Q_{0}^{+}=1,\\ Q_{1}^{+}=1\\oplus 0=1,\\ Q_{2}^{+}=0\\oplus(0\\cdot 0)=0 \\Rightarrow 011$ (decimal 3).\n8) $011 \\to Q_{0}^{+}=0,\\ Q_{1}^{+}=1\\oplus 1=0,\\ Q_{2}^{+}=0\\oplus(0\\cdot 1)=0 \\Rightarrow 000$ (decimal 0), returning to the start.\n\nThus, the sequence in decimal is $0, 1, 6, 7, 4, 5, 2, 3$, which matches option B.", "answer": "$$\\boxed{B}$$", "id": "1966237"}, {"introduction": "This final practice integrates several concepts into a single, more complex design challenge that mirrors real-world engineering tasks. You will design the logic for a synchronous BCD (Binary Coded Decimal) counter, a common component in systems that interface with numerical displays. The design adds layers of complexity, including up/down control and a unique state-dependent \"hold\" feature, requiring careful management of the state machine's transitions. By determining the input logic for the most significant bit, you will engage with the detailed process of implementing counters with specialized operational requirements [@problem_id:1966209].", "problem": "A specialized digital controller requires a 4-bit synchronous counter with a peculiar counting sequence. The counter is to be designed using JK-flip-flops. The four output bits of the counter are denoted as $Q_3, Q_2, Q_1, Q_0$, where $Q_3$ is the most significant bit (MSB). The counter functions as a Binary Coded Decimal (BCD) counter, sequencing from 0 (0000) to 9 (1001).\n\nThe counter's direction is controlled by a single input line, $M$. When $M=1$, the counter increments (counts up), and when $M=0$, it decrements (counts down). The counting sequence wraps around in both directions (i.e., from 9 to 0 when counting up, and from 0 to 9 when counting down).\n\nThe special behavior is as follows: upon reaching the count of five (0101), regardless of the counting direction, the counter must hold this state (0101) for one additional clock cycle before proceeding to the next state in its sequence. For all other counts, it transitions normally on each clock pulse. Any BCD-invalid states (1010 through 1111) can be treated as don't-care conditions in the design.\n\nThe JK-flip-flop is defined by its characteristic equation $Q_{next} = J \\cdot Q' + K' \\cdot Q$.\n\nYour task is to determine the simplified sum-of-products (SOP) Boolean expression for the $J_3$ input of the JK-flip-flop corresponding to the MSB, $Q_3$. The final expression should be a function of the control input $M$ and the counter's state outputs $Q_3, Q_2, Q_1, Q_0$.", "solution": "We use JK-flip-flops with characteristic equation $Q_{next} = J \\cdot Q' + K' \\cdot Q$. From this, the JK excitation conditions for a single bit $Q$ are:\n- For $0 \\to 0$: $J=0$ (and $K$ is a don't-care).\n- For $0 \\to 1$: $J=1$ (and $K$ is a don't-care).\n- For $1 \\to 0$: $K=1$ (and $J$ is a don't-care).\n- For $1 \\to 1$: $K=0$ (and $J$ is a don't-care).\n\nTherefore, for the MSB $Q_{3}$, the input $J_{3}$ must be $1$ exactly for those present-state/input combinations that produce a $0 \\to 1$ transition of $Q_{3}$.\n\nThe valid BCD states are $0000$ through $1001$. The counter counts up when $M=1$ and down when $M=0$, with wrap-around, and it holds at $0101$ for one extra clock regardless of direction. The next-state mapping for valid states is thus:\n- For $M=1$ (up): $0 \\to 1$, $1 \\to 2$, $2 \\to 3$, $3 \\to 4$, $4 \\to 5$, $5 \\to 5$ (hold), $6 \\to 7$, $7 \\to 8$, $8 \\to 9$, $9 \\to 0$.\n- For $M=0$ (down): $0 \\to 9$, $1 \\to 0$, $2 \\to 1$, $3 \\to 2$, $4 \\to 3$, $5 \\to 5$ (hold), $6 \\to 5$, $7 \\to 6$, $8 \\to 7$, $9 \\to 8$.\n\nThe bit $Q_{3}$ equals $0$ for states $0000$ through $0111$ and equals $1$ for states $1000$ and $1001$. Hence, $Q_{3}$ performs a $0 \\to 1$ transition only in the following present-state/input cases:\n- For $M=1$: from state $0111$ to $1000$, i.e., $M=1$ and $(Q_{3},Q_{2},Q_{1},Q_{0})=(0,1,1,1)$.\n- For $M=0$: from state $0000$ to $1001$ (wrap-down), i.e., $M=0$ and $(Q_{3},Q_{2},Q_{1},Q_{0})=(0,0,0,0)$.\n\nAll other valid present-state/input combinations yield either $0 \\to 0$, $1 \\to 0$, or $1 \\to 1$ for $Q_{3}$, for which $J_{3}$ is either $0$ (in the $0 \\to 0$ case) or a don't-care (when $Q_{3}=1$). BCD-invalid states $1010$ through $1111$ are specified as don't-cares and, in any case, have $Q_{3}=1$, so $J_{3}$ is also a don't-care there.\n\nTherefore, the minimal sum-of-products expression for $J_{3}$ is the sum of the two minterms corresponding to these two $0 \\to 1$ transitions:\n$$\nJ_{3} \\;=\\; M\\,Q_{3}'\\,Q_{2}\\,Q_{1}\\,Q_{0}\\;+\\;M'\\,Q_{3}'\\,Q_{2}'\\,Q_{1}'\\,Q_{0}'.\n$$\nThis is already simplified and conforms to the SOP form.", "answer": "$$\\boxed{M\\,Q_{3}'\\,Q_{2}\\,Q_{1}\\,Q_{0}\\;+\\;M'\\,Q_{3}'\\,Q_{2}'\\,Q_{1}'\\,Q_{0}'}$$", "id": "1966209"}]}
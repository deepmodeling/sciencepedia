{"hands_on_practices": [{"introduction": "The first step in handling an asynchronous input is often to pass it through a synchronizing flip-flop. However, this process is not perfect, as an input changing too close to the clock edge can violate the flip-flop's setup or hold times, leading to a dangerous state called metastability. This exercise [@problem_id:1910774] sharpens your understanding of this critical timing window, allowing you to analyze and predict when a synchronizer is at risk of failing.", "problem": "A digital system uses a synchronous 8-bit binary counter designed to increment on each rising edge of a system clock, provided its Count Enable (`CEN`) input is asserted (logic '1'). The system clock has a period of `T_CLK = 20 ns`. The `CEN` input is not driven directly by an external signal. Instead, to mitigate synchronization issues, an external asynchronous signal `ASYNC_ENABLE` is first passed through a D-type flip-flop (DFF) clocked by the system clock. The output of this DFF serves as the `CEN` signal for the counter.\n\nThe DFF used for synchronization has a setup time of `t_{su} = 2.0 ns` and a hold time of `t_{h} = 1.0 ns` relative to the rising edge of the system clock. The propagation delay of the DFF can be considered negligible for this problem.\n\nInitially, both the `ASYNC_ENABLE` signal and the resulting `CEN` signal are stable at logic '0'. At some point, the `ASYNC_ENABLE` signal transitions from '0' to '1'. We are interested in the behavior of the counter at the very next rising clock edge after this transition begins.\n\nSeveral possible timings for the `ASYNC_ENABLE` signal's low-to-high transition are given below, relative to a rising clock edge occurring at time `t=0`. For which of these scenarios is the state of the `CEN` signal immediately following the clock edge at `t=0` unpredictable, potentially causing the counter to miss an increment or enter an incorrect state due to metastability? Select all options that apply.\n\nA. The transition occurs at `t = -3.0 ns`.\n\nB. The transition occurs at `t = -1.5 ns`.\n\nC. The transition occurs at `t = 0.5 ns`.\n\nD. The transition occurs at `t = 2.0 ns`.", "solution": "The D-type flip-flop samples $D$ at the rising edge of the clock at $t=0$. For correct sampling without metastability, the input must satisfy the setup and hold constraints:\n$$\\text{D stable on }[-t_{su},\\, t_{h}] \\text{ around the sampling edge.}$$\nEquivalently, if the asynchronous transition time is $t_{tr}$ relative to the rising edge at $t=0$, then any transition within the aperture\n$$-t_{su}  t_{tr}  t_{h}$$\nviolates the timing requirement and can render the output $Q$ (the $CEN$ signal) unpredictable immediately following the clock edge due to metastability.\n\nGiven $t_{su} = 2.0$ and $t_{h} = 1.0$, the unsafe window is\n$$-2.0  t_{tr}  1.0 \\quad \\text{(in nanoseconds relative to } t=0\\text{)}.$$\n\nEvaluate each option:\n- A: $t_{tr} = -3.0$ is not in $(-2.0, 1.0)$, so timing is met; predictable.\n- B: $t_{tr} = -1.5$ lies in $(-2.0, 1.0)$; setup is violated; unpredictable.\n- C: $t_{tr} = 0.5$ lies in $(-2.0, 1.0)$; hold is violated; unpredictable.\n- D: $t_{tr} = 2.0$ is not in $(-2.0, 1.0)$; timing is met; predictable.\n\nTherefore, the scenarios with unpredictable $CEN$ immediately after $t=0$ are B and C.", "answer": "$$\\boxed{BC}$$", "id": "1910774"}, {"introduction": "Flip-flops often include asynchronous preset and clear inputs for immediate state control, bypassing the clock. While powerful, these inputs have strict rules of operation; asserting both simultaneously creates a forbidden condition within the flip-flop's internal latch. By analyzing this scenario [@problem_id:1910798], you will uncover the inherent race condition that makes the final state unpredictable, a crucial lesson in robust asynchronous control.", "problem": "Consider a standard edge-triggered D-type flip-flop. This flip-flop is equipped with two asynchronous inputs: an active-low preset input, denoted as $\\overline{\\text{PRE}}$, and an active-low clear input, denoted as $\\overline{\\text{CLR}}$. When asserted (set to logic 0), $\\overline{\\text{PRE}}$ forces the output Q to logic 1, and $\\overline{\\text{CLR}}$ forces the output Q to logic 0, regardless of the clock or D input.\n\nSuppose the flip-flop is in an arbitrary initial state. At time $t_1$, both the $\\overline{\\text{PRE}}$ and $\\overline{\\text{CLR}}$ inputs are simultaneously asserted (driven to logic 0). They are held at logic 0 for a duration longer than the flip-flop's propagation delay. At a later time $t_2$, both inputs are simultaneously de-asserted (driven back to logic 1). Assume the clock and D inputs remain inactive throughout this entire process.\n\nWhich of the following statements most accurately describes the state of the output Q immediately after time $t_2$?\n\nA. The output Q will be stable at logic 1.\n\nB. The output Q will be stable at logic 0.\n\nC. The output Q will enter a sustained oscillation between logic 0 and logic 1.\n\nD. The final stable state of the output Q is unpredictable and depends on minute physical variations and propagation delays within the flip-flop's internal circuitry.\n\nE. The output Q and its complement $\\overline{\\text{Q}}$ will both be held stable at logic 1.", "solution": "We model the asynchronous preset and clear as the active-low inputs to the cross-coupled NAND latch at the output stage of a standard D-type flip-flop. Let $\\overline{\\text{PRE}}$ map to the active-low set input $S$ and $\\overline{\\text{CLR}}$ map to the active-low reset input $R$ of the NAND SR latch, with equations\n$$\nQ=\\overline{S \\cdot \\overline{Q}}, \\qquad \\overline{Q}=\\overline{R \\cdot Q}.\n$$\nBy definition, asserting $\\overline{\\text{PRE}}$ low means $S=0$ forces $Q=1$, and asserting $\\overline{\\text{CLR}}$ low means $R=0$ forces $Q=0$; these are dominant and independent of the clock and $D$.\n\nStep 1: Behavior when both asynchronous inputs are asserted low at $t_{1}$.\nAt $t_{1}$, both are driven low, so $S=0$ and $R=0$. Substituting into the latch equations,\n$$\nQ=\\overline{0 \\cdot \\overline{Q}}=\\overline{0}=1, \\qquad \\overline{Q}=\\overline{0 \\cdot Q}=\\overline{0}=1.\n$$\nThus $Q=1$ and $\\overline{Q}=1$ is a valid fixed point for $S=R=0$. Since the inputs are held low longer than the propagation delay, the outputs settle to $Q=1$ and $\\overline{Q}=1$.\n\nStep 2: Behavior when both are de-asserted simultaneously at $t_{2}$.\nAt $t_{2}$, both return high simultaneously, so $S=1$ and $R=1$. The latch equations become\n$$\nQ=\\overline{1 \\cdot \\overline{Q}}=\\overline{\\overline{Q}}=Q, \\qquad \\overline{Q}=\\overline{1 \\cdot Q}=\\overline{Q}.\n$$\nThe stable fixed points for $S=R=1$ are the two valid complementary states $Q=1,\\,\\overline{Q}=0$ and $Q=0,\\,\\overline{Q}=1$. The previously established state $Q=1,\\,\\overline{Q}=1$ is not a fixed point when $S=R=1$; to see this explicitly, substituting $Q=1,\\,\\overline{Q}=1$ into the right-hand sides yields $Q=\\overline{1 \\cdot 1}=0$ and $\\overline{Q}=\\overline{1 \\cdot 1}=0$, contradicting $Q=1,\\,\\overline{Q}=1$. Therefore, immediately after de-assertion, the latch leaves the illegal both-high condition and must transition to one of the two valid stable states.\n\nStep 3: Determination of the final state.\nBecause both $S$ and $R$ are de-asserted simultaneously and the outputs are initially at the illegal condition $Q=1,\\,\\overline{Q}=1$, the latch is effectively in a metastable or near-metastable situation at the moment of release. Which side falls first depends on minute asymmetries in device parameters, internal propagation delays, and noise. Hence the final settled $Q$ (either $0$ or $1$) is unpredictable in principle and varies from instance to instance or trial to trial.\n\nStep 4: Assessing the options.\n- A and B assert predetermined stable values, which is not guaranteed.\n- C (sustained oscillation) does not occur in a cross-coupled latch; the system resolves to one of two stable states, although it may pass through a brief metastable transient.\n- E (both outputs held at logic $1$) only holds while $S=R=0$; after de-assertion to $S=R=1$, $Q=\\overline{Q}=1$ is not a stable solution.\n\nTherefore, the correct description is that the final stable state is unpredictable and depends on small physical variations and propagation delays, corresponding to option D.", "answer": "$$\\boxed{D}$$", "id": "1910798"}, {"introduction": "Asynchronous logic, like a ripple counter, is simple to build but can have hidden timing problems. The sequential nature of state changes in a ripple counter means its outputs do not update simultaneously, creating transient, invalid output combinations. This practice problem [@problem_id:1910781] demonstrates how these transient states can cause connected combinational logic, like a decoder, to generate spurious output pulses (glitches), highlighting a common source of error in digital systems.", "problem": "Consider a digital system composed of a 2-bit asynchronous ripple counter connected to a 2-to-4 active-high decoder. The counter is constructed from two falling-edge-triggered T flip-flops, FF0 and FF1, with their T inputs held high, causing them to toggle their output on each valid clock trigger. FF0 generates the Least Significant Bit (LSB), $Q_0$, and FF1 generates the Most Significant Bit (MSB), $Q_1$. The system clock is connected to the clock input of FF0, and the output $Q_0$ of FF0 is connected to the clock input of FF1. Each flip-flop has an identical propagation delay, $t_{pd}$, from its clock input's falling edge to its output changing state.\n\nThe counter outputs $Q_1$ and $Q_0$ are directly connected to the decoder's address inputs $A_1$ and $A_0$, respectively. The decoder has four outputs: $Y_0, Y_1, Y_2, Y_3$, where the output $Y_i$ is active (logic high) if and only if the binary input $\\langle A_1 A_0 \\rangle$ corresponds to the integer $i$. For simplicity, assume the decoder itself is ideal and its outputs respond instantaneously to any changes at its inputs.\n\nThe counter is initially stable in the state $Q_1Q_0 = 01$ (representing the integer 1). At time $t=0$, a falling edge occurs on the system clock, initiating the transition to the next count state, $Q_1Q_0 = 10$ (representing the integer 2). Due to the ripple effect and the propagation delays of the flip-flops, the system passes through a transient, unintended state before settling.\n\nDuring this entire transition sequence from the stable state '1' (01) to the final stable state '2' (10), which of the decoder output lines will generate a spurious, transient high pulse, often called a glitch?\n\nA. $Y_0$\n\nB. $Y_3$\n\nC. Both $Y_0$ and $Y_3$\n\nD. No spurious pulse will be generated.\n\nE. It is impossible to determine without the numerical value of $t_{pd}$.", "solution": "The problem asks to identify which decoder output line experiences a spurious pulse (glitch) during the state transition of a 2-bit asynchronous counter from state `01` to `10`. To solve this, we must analyze the sequence of states at the counter's outputs, paying close attention to the propagation delays.\n\n1.  **Initial State (for $t  0$):**\n    The counter is in the stable state $Q_1Q_0 = 01$. These outputs are connected to the decoder inputs, so $A_1=0$ and $A_0=1$. The decoder's function is to activate the output corresponding to the binary input. For the input `01` (which represents the integer 1), the decoder output $Y_1$ is high. All other outputs ($Y_0, Y_2, Y_3$) are low.\n\n2.  **First Event (at $t=0$):**\n    A falling edge of the system clock arrives at the clock input of the first flip-flop, FF0. Since it is a falling-edge-triggered T flip-flop with its T input held high, it is set to toggle its output, $Q_0$.\n\n3.  **First Propagation Delay and Transient State:**\n    The change in $Q_0$ does not happen instantaneously. It occurs after the propagation delay $t_{pd}$. Therefore, at time $t=t_{pd}$, the output $Q_0$ toggles from 1 to 0.\n    At this moment, the second flip-flop, FF1, has not yet acted. Its clock input is the output of FF0, $Q_0$, which has just changed. So, $Q_1$ remains at its initial value of 0.\n    For the duration starting at $t=t_{pd}$ and before the second flip-flop reacts, the state of the counter's outputs is $Q_1Q_0 = 00$.\n    This `00` state is a transient, unintended intermediate state.\n\n4.  **Decoder's Response to the Transient State:**\n    Since the decoder is ideal, it responds instantly to the new inputs $A_1=0, A_0=0$. This input corresponds to the integer 0. Consequently, the decoder deactivates $Y_1$ and activates the output $Y_0$. The output $Y_0$ goes high. This activation of $Y_0$ is the beginning of the spurious pulse, or glitch.\n\n5.  **Second Event (at $t=t_{pd}$):**\n    The output $Q_0$ changing from 1 to 0 constitutes a falling edge at the clock input of the second flip-flop, FF1.\n\n6.  **Second Propagation Delay and Final State:**\n    FF1 is also a falling-edge-triggered T flip-flop, so it will toggle its output, $Q_1$, after its propagation delay, $t_{pd}$. This state change occurs at a time $t_{pd}$ after its clock trigger, so at time $t = t_{pd} + t_{pd} = 2t_{pd}$.\n    At $t=2t_{pd}$, $Q_1$ toggles from 0 to 1. The output $Q_0$ has been 0 since $t=t_{pd}$, so it remains 0.\n    Therefore, for all time $t \\ge 2t_{pd}$, the counter outputs are stable at the new state $Q_1Q_0 = 10$. This is the correct, intended next state for the counter.\n\n7.  **Decoder's Response to the Final State:**\n    With the stable inputs $A_1=1, A_0=0$ (representing the integer 2), the decoder deactivates the transient output $Y_0$ and activates the final correct output $Y_2$.\n\n8.  **Summary of Decoder Output Behavior:**\n    - For $t  t_{pd}$, the counter state is `01`, and $Y_1$ is high.\n    - For $t_{pd} \\le t  2t_{pd}$, the transient counter state is `00`. $Y_1$ goes low, and $Y_0$ goes high. This is the glitch.\n    - For $t \\ge 2t_{pd}$, the final counter state is `10`. $Y_0$ goes low, and $Y_2$ goes high.\n\nThe decoder output $Y_0$ was not meant to be active during the transition from state 1 to state 2, but it briefly went high for a duration of $t_{pd}$ (from $t=t_{pd}$ to $t=2t_{pd}$). This constitutes a spurious pulse on the $Y_0$ line. The final answer does not depend on the specific value of $t_{pd}$, only that it is non-zero.", "answer": "$$\\boxed{A}$$", "id": "1910781"}]}
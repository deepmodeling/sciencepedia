{"hands_on_practices": [{"introduction": "The first step in mastering essential hazards is learning to spot their potential from a circuit's high-level specification. An essential hazard reveals itself in a flow table when a single input change requires the circuit to traverse multiple internal states before reaching its new stable configuration. This exercise will train you to analyze a primitive flow table and identify the exact input transition that creates this tell-tale multi-step path, signaling a risk of malfunction due to timing races. [@problem_id:1933665]", "problem": "An asynchronous sequential circuit is described by a primitive flow table. The circuit has two inputs, $x_1$ and $x_2$, and four internal states, named S1, S2, S3, and S4. Each state row in the table has exactly one stable state, where the next state is the same as the present state. The behavior is defined by the following next-state transitions:\n\nFor present state S1, whose stable state is at input $x_1x_2=00$:\n- If $x_1x_2=01$, the next state is S2.\n- If $x_1x_2=11$, the next state is S3.\n- If $x_1x_2=10$, the next state is S2.\n\nFor present state S2, whose stable state is at input $x_1x_2=01$:\n- If $x_1x_2=00$, the next state is S1.\n- If $x_1x_2=11$, the next state is S3.\n- If $x_1x_2=10$, the next state is S4.\n\nFor present state S3, whose stable state is at input $x_1x_2=11$:\n- If $x_1x_2=00$, the next state is S1.\n- If $x_1x_2=01$, the next state is S2.\n- If $x_1x_2=10$, the next state is S4.\n\nFor present state S4, whose stable state is at input $x_1x_2=10$:\n- If $x_1x_2=00$, the next state is S1.\n- If $x_1x_2=01$, the next state is S2.\n- If $x_1x_2=11$, the next state is S3.\n\nAn essential hazard is a potential malfunction in an asynchronous circuit caused by propagation delays, where a single input change can lead the circuit to an incorrect final state. Based on the provided flow table, an essential hazard can occur as a result of which one of the following events?\n\nA. Starting in the stable state for row S1, the input variable $x_1$ changes.\n\nB. Starting in the stable state for row S1, the input variable $x_2$ changes.\n\nC. Starting in the stable state for row S2, the input variable $x_1$ changes.\n\nD. Starting in the stable state for row S3, the input variable $x_2$ changes.\n\nE. Starting in the stable state for row S4, the input variable $x_1$ changes.", "solution": "Fundamental-mode asynchronous operation assumes a single input variable changes at a time and, from any stable state, the circuit will traverse the sequence of next states determined by the primitive flow table until it reaches the unique stable state associated with the new input value. Let the mapping from input column to its unique stable row be\n$$\nf(00)=\\text{S1},\\quad f(01)=\\text{S2},\\quad f(11)=\\text{S3},\\quad f(10)=\\text{S4}.\n$$\nFor a given present row $R$ and input $u$, denote the next-state entry in the flow table by $N(R,u)$. A necessary condition to avoid essential hazards for a single input change $u$ from a stable state in row $R$ is the single-step condition\n$$\nN(R,u)=f(u),\n$$\nmeaning the first next state reached after the input change is already the final stable row for that input. If $N(R,u)\\neq f(u)$, the circuit must undergo two or more internal state transitions in response to one input change, and unequal path delays from that input can produce essential hazards.\n\nUsing the given flow table:\n\n- Option A: Start in the stable state for row S1 with input $00$, change $x_{1}$ so $00\\to 10$. The final stable row must be $f(10)=\\text{S4}$. From the table, $N(\\text{S1},10)=\\text{S2}\\neq \\text{S4}$, so the trajectory is $\\text{S1}\\to \\text{S2}\\to \\text{S4}$ under the fixed input $10$, requiring two internal transitions. This violates the single-step condition and is susceptible to an essential hazard.\n\n- Option B: Start in S1 at $00$, change $x_{2}$ so $00\\to 01$. The final stable row is $f(01)=\\text{S2}$, and $N(\\text{S1},01)=\\text{S2}=f(01)$, so there is a single-step transition with no essential hazard risk.\n\n- Option C: Start in S2 at $01$, change $x_{1}$ so $01\\to 11$. The final stable row is $f(11)=\\text{S3}$, and $N(\\text{S2},11)=\\text{S3}=f(11)$, so single-step, no essential hazard.\n\n- Option D: Start in S3 at $11$, change $x_{2}$ so $11\\to 10$. The final stable row is $f(10)=\\text{S4}$, and $N(\\text{S3},10)=\\text{S4}=f(10)$, so single-step, no essential hazard.\n\n- Option E: Start in S4 at $10$, change $x_{1}$ so $10\\to 00$. The final stable row is $f(00)=\\text{S1}$, and $N(\\text{S4},00)=\\text{S1}=f(00)$, so single-step, no essential hazard.\n\nTherefore, only the event in option A can lead to an essential hazard.", "answer": "$$\\boxed{A}$$", "id": "1933665"}, {"introduction": "Once a potential hazard is identified, the next step is to understand its physical origin and implement a solution. An essential hazard is fundamentally a race condition where a change in an input signal propagates through the combinational logic faster than the state change can stabilize through the feedback loop. This practice moves from abstract analysis to a concrete gate-level implementation, challenging you to pinpoint the standard, effective location for inserting a delay element to resolve this critical race and ensure the circuit functions reliably. [@problem_id:1933669]", "problem": "An asynchronous sequential circuit is designed to control a system based on two external inputs, $x_1$ and $x_2$. The circuit has a single state variable, $y$. The next state of the circuit, denoted by $Y$, is determined by the current state $y$ and the inputs according to the following Boolean logic equation:\n\n$$Y = \\overline{x_1} y + x_1 x_2$$\n\nHere, $\\overline{x_1}$ represents the logical complement of $x_1$. The circuit is implemented using fundamental logic gates (AND, OR, NOT), and the output $Y$ is connected back to the input $y$ to form the state-holding loop.\n\nLet's define the key signal paths and nodes in the physical implementation:\n- The term $\\overline{x_1}$ is generated by a single NOT gate.\n- The term $\\overline{x_1} y$ is generated by a 2-input AND gate.\n- The term $x_1 x_2$ is generated by another 2-input AND gate.\n- The final output $Y$ is generated by a 2-input OR gate that takes the two AND gate outputs as its inputs.\n- The \"feedback path\" is the connection from the output $Y$ back to the circuit's input terminal for the state variable $y$.\n\nThe system is initially in the stable state where $(x_1, x_2, y) = (1, 1, 1)$. An essential hazard exists in this design. It manifests when the input $x_1$ changes from 1 to 0 while $x_2$ remains constant at 1. This specific race condition can cause the circuit to transition to an incorrect final stable state.\n\nTo resolve this hazard, a single buffer (which introduces a delay) must be inserted at a strategic location in the circuit. The purpose of the buffer is to ensure that the correct state transition occurs by controlling the relative signal timing.\n\nAt which of the following locations should the buffer be placed to eliminate the essential hazard?\n\nA. On the external input line for $x_1$, before it splits to feed the NOT gate and the AND gate for the term $x_1 x_2$.\n\nB. On the external input line for $x_2$.\n\nC. On the feedback path connecting the circuit output $Y$ to the state variable input $y$.\n\nD. On the wire connecting the output of the NOT gate (for $\\overline{x_1}$) to the input of its corresponding AND gate.\n\nE. On the wire connecting the output of the AND gate for the term $x_1 x_2$ to the input of the final OR gate.", "solution": "Given the asynchronous network with next state\n$$Y=\\overline{x_{1}}y+x_{1}x_{2},$$\nstart from the stated operating point $(x_{1},x_{2},y)=(1,1,1)$. With $x_{2}=1$ held constant, the Boolean function reduces to\n$$Y=\\overline{x_{1}}y+x_{1}.$$\nThus:\n- For $x_{1}=1$, $Y=1$ regardless of $y$.\n- For $x_{1}=0$, $Y=y$.\n\nTherefore, under the intended transition $x_{1}:1\\to 0$ with $x_{2}=1$ and $y=1$, the correct final stable state should remain $y=1$ because with $x_{1}=0$ we have $Y=y=1$.\n\nNow analyze the hazard mechanism in the implemented gate network. Let the gate delays be:\n- inverter delay $d_{\\text{INV}}$ for generating $\\overline{x_{1}}$,\n- AND delay $d_{\\text{A1}}$ for the term $\\overline{x_{1}}y$,\n- AND delay $d_{\\text{A2}}$ for the term $x_{1}x_{2}$,\n- OR delay $d_{\\text{OR}}$ for forming $Y$.\n\nInitially, with $x_{1}=1$ and $x_{2}=1$, the term $x_{1}x_{2}$ equals $1$ and the term $\\overline{x_{1}}y$ equals $0$, so $Y=1$ is held by the $x_{1}x_{2}$ path. When $x_{1}$ falls $1\\to 0$, the two OR inputs evolve as follows:\n- The $x_{1}x_{2}$ term falls from $1$ to $0$ after a delay $d_{\\text{A2}}$ from the $x_{1}$ change.\n- The $\\overline{x_{1}}y$ term rises from $0$ to $1$ only after the inverter and its AND gate respond, i.e., after a delay $d_{\\text{INV}}+d_{\\text{A1}}$, provided that the $y$ input to that AND remains $1$ during this time.\n\nConsequently, the earliest time the OR output can fall is\n$$t_{\\downarrow Y}=d_{\\text{A2}}+d_{\\text{OR}},$$\nand the earliest time it can rise due to the $\\overline{x_{1}}y$ path is\n$$t_{\\uparrow Y}=d_{\\text{INV}}+d_{\\text{A1}}+d_{\\text{OR}}.$$\nIf\n$$d_{\\text{A2}}d_{\\text{INV}}+d_{\\text{A1}},$$\nthen $t_{\\downarrow Y}t_{\\uparrow Y}$ and there exists an interval during which both OR inputs are $0$, causing a temporary $Y=0$ glitch (a static-1 hazard). Because $Y$ is fed back to the state input $y$, this low can propagate to $y$ before the $\\overline{x_{1}}y$ path has risen. Once $y$ falls to $0$, the product $\\overline{x_{1}}y$ will remain $0$ even after $\\overline{x_{1}}$ becomes $1$, so $Y$ stays at $0$ and the circuit incorrectly settles in the wrong stable state $y=0$ for $x_{1}=0$. This is the essential hazard described.\n\nTo eliminate the essential hazard with a single buffer, the fix must ensure that $y$ does not change to $0$ before the network completes the handoff from the $x_{1}x_{2}$ path to the $\\overline{x_{1}}y$ path. Insert a buffer of delay $d_{\\text{buf}}$ in the feedback path $Y\\to y$. Then the state input seen by the $\\overline{x_{1}}y$ AND gate remains at its previous value for at least $d_{\\text{buf}}$, so during any temporary dip of $Y$ the input $y$ used in the $\\overline{x_{1}}y$ term is still $1$, allowing that term to rise. The requirement for avoiding the wrong capture is\n$$d_{\\text{buf}}\\left(t_{\\uparrow Y}-t_{\\downarrow Y}\\right)=\\left(d_{\\text{INV}}+d_{\\text{A1}}+d_{\\text{OR}}\\right)-\\left(d_{\\text{A2}}+d_{\\text{OR}}\\right)=d_{\\text{INV}}+d_{\\text{A1}}-d_{\\text{A2}}.$$\nWith this placement, even if $Y$ momentarily goes low, that low does not reach $y$ before the $\\overline{x_{1}}y$ path asserts $1$ and restores $Y=1$, so the state remains correct and the circuit settles to $y=1$ as intended.\n\nEvaluate the options:\n- A delays both branches driven by $x_{1}$ equally and does not change the relative ordering between the falling $x_{1}x_{2}$ term and the rising $\\overline{x_{1}}y$ term; the hazard persists.\n- B delays $x_{2}$, which does not change during the hazardous transition; it is ineffective.\n- C delays the feedback $Y\\to y$, preventing the premature drop of $y$ during the transient and eliminating the essential hazard as shown.\n- D delays the $\\overline{x_{1}}$ path, making the rising path slower and worsening the hazard.\n- E delays only the $x_{1}x_{2}$ output, which can be tuned to make the falling path slower; while this can prevent the temporary gap at the OR inputs for this specific transition, the standard and robust essential-hazard fix in asynchronous sequential circuits is to delay the feedback so that state cannot change before the combinational network settles.\n\nTherefore, the buffer should be placed on the feedback path $Y\\to y$.", "answer": "$$\\boxed{C}$$", "id": "1933669"}, {"introduction": "Knowing *where* to add a delay is crucial, but knowing *how much* delay to add is what makes a design robust. This final practice elevates your understanding from a qualitative to a quantitative level, requiring you to perform a detailed timing analysis of a circuit with known gate and wire delays. By calculating the maximum allowable delay for a specific component, you will derive the precise timing constraint needed to guarantee that the stabilizing internal state signal wins the race against the hazardous glitch, preventing failure. [@problem_id:1933656]", "problem": "An asynchronous sequential circuit is designed with a single primary input `x` and a single state variable `y`. The next-state equation for the circuit is given by $Y = \\overline{x}y + x$. The circuit is implemented using discrete logic gates as follows: a single INVERTER gate (INV) generates the $\\overline{x}$ signal, a 2-input AND gate (G1) implements the $\\overline{x}y$ term, and a 2-input OR gate (G2) produces the final output `Y` from the terms $\\overline{x}y$ and `x`. The output `Y` is connected back to the state variable input `y` through a feedback path.\n\nThe propagation delays of the components are specified as follows:\n- The propagation delay for both the AND gate (G1) and the OR gate (G2) is `T_g = 1.2` ns.\n- The propagation delay for the INVERTER gate (INV) is an unknown value, `T_inv`.\n- The signal propagation delay along any individual wire interconnect between logic elements (e.g., from pin to gate, or gate to gate) is `T_w = 0.3` ns.\n- The total propagation delay of the feedback path, from the output `Y` of G2 back to where it is used as the `y` input for G1, is `T_fb = 5.0` ns.\n\nThe circuit is initially in the stable state corresponding to `x=1` and `y=1`. At time `t=0`, the primary input `x` transitions from `1` to `0`. This transition is known to be susceptible to an essential hazard, which can cause the circuit to temporarily glitch and settle into an incorrect final state. To guarantee correct operation, the propagation delays must satisfy a specific inequality.\n\nCalculate the maximum allowable propagation delay for the inverter, `T_inv`, that ensures the circuit operates correctly and avoids this essential hazard. Express your answer in nanoseconds (ns) and round to two significant figures.", "solution": "The asynchronous next-state function is $Y = \\overline{x}y + x$. Initially $x=1$ and $y=1$, so $Y=1$. At $t=0$, $x$ makes a $1 \\rightarrow 0$ transition.\n\nThe two paths from $x$ to the OR gate input (G2) are:\n- Direct path to G2: input wire from $x$ to G2 contributes $T_{w}$, then the OR gate delay $T_{g}$. Therefore, the fall of $Y$ due to $x$ occurs at\n$$\nt_{Y,\\text{fall}} = T_{w} + T_{g}.\n$$\n- Inverted/product path $x \\rightarrow \\text{INV} \\rightarrow \\text{G1} \\rightarrow \\text{G2}$: the delays are $x$ to INV input wire $T_{w}$, inverter delay $T_{\\text{inv}}$, INV to G1 input wire $T_{w}$, AND gate delay $T_{g}$, G1 to G2 input wire $T_{w}$, and OR gate delay $T_{g}$. Since $y$ at G1 remains $1$ until any feedback arrives, the time for $Y$ to rise via the product term is\n$$\nt_{Y,\\text{rise}} = 3T_{w} + T_{\\text{inv}} + 2T_{g}.\n$$\n\nThe temporary low pulse width at $Y$ produced by the $x:1 \\rightarrow 0$ transition is\n$$\nW = t_{Y,\\text{rise}} - t_{Y,\\text{fall}} = \\left(3T_{w} + T_{\\text{inv}} + 2T_{g}\\right) - \\left(T_{w} + T_{g}\\right) = 2T_{w} + T_{\\text{inv}} + T_{g}.\n$$\n\nTo avoid the essential hazard, this low pulse must not be able to propagate around the feedback and corrupt the G1 $y$ input before $Y$ is restored high. Therefore, the necessary condition is\n$$\nW  T_{\\text{fb}} \\quad \\Rightarrow \\quad 2T_{w} + T_{\\text{inv}} + T_{g}  T_{\\text{fb}}.\n$$\nSolving for the inverter delay gives\n$$\nT_{\\text{inv}}  T_{\\text{fb}} - \\left(2T_{w} + T_{g}\\right).\n$$\n\nSubstituting the given values $T_{g} = 1.2\\ \\text{ns}$, $T_{w} = 0.3\\ \\text{ns}$, and $T_{\\text{fb}} = 5.0\\ \\text{ns}$,\n$$\nT_{\\text{inv,max}} = 5.0 - \\left(2 \\cdot 0.3 + 1.2\\right) = 5.0 - 1.8 = 3.2\\ \\text{ns}.\n$$\nRounded to two significant figures, the maximum allowable inverter delay is $3.2$.", "answer": "$$\\boxed{3.2}$$", "id": "1933656"}]}
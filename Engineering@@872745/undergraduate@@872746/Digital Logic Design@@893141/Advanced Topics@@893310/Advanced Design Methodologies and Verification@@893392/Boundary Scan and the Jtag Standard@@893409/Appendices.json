{"hands_on_practices": [{"introduction": "The foundation of boundary scan is the Boundary Scan Register (BSR), a serial shift register that shadows the functional I/O pins of an integrated circuit. Understanding how this register is constructed is the first step toward mastering JTAG, as its length directly impacts test procedures. This exercise [@problem_id:1917086] provides practice in calculating the BSR length for a hypothetical IC based on its pinout, a fundamental skill for estimating test complexity and interpreting device datasheets.", "problem": "An engineering team is designing a custom Integrated Circuit (IC) for a specialized signal processing application. To ensure the IC is testable after manufacturing, it will incorporate boundary scan logic compliant with the Joint Test Action Group (JTAG) standard, IEEE 1149.1. The IC's pinout is defined as follows:\n\n*   32 dedicated digital input pins.\n*   16 dedicated digital output pins.\n*   8 bidirectional digital I/O pins.\n*   4 tristate digital output pins.\n*   4 dedicated pins for the Test Access Port (TAP): TDI, TDO, TCK, and TMS.\n*   2 dedicated power and ground pins (VCC, GND).\n\nThe Boundary Scan Register (BSR) is constructed by associating boundary scan cells with the functional pins of the IC. The rules for this specific implementation are:\n1.  Each dedicated digital input pin is associated with a single boundary scan cell.\n2.  Each dedicated digital output pin is associated with a single boundary scan cell.\n3.  Each bidirectional I/O pin requires two cells: one data cell for the input/output value and one control cell to determine the pin's direction (input or output).\n4.  Each tristate output pin requires two cells: one data cell for the output value and one control cell to enable or disable the output driver (i.e., to put the pin in a high-impedance state).\n5.  Pins dedicated to the TAP controller and power/ground are not part of the Boundary Scan Register chain.\n\nBased on this specification, what is the total length, in bits, of the Boundary Scan Register?\n\nA. 60\n\nB. 64\n\nC. 72\n\nD. 76\n\nE. 78", "solution": "The Boundary Scan Register (BSR) length equals the total number of boundary scan cells assigned to functional pins, as each cell contributes one bit to the BSR. According to the given implementation rules:\n\n- Each dedicated digital input pin contributes one cell:\n$$32 \\times 1 = 32 \\text{ cells}.$$\n\n- Each dedicated digital output pin contributes one cell:\n$$16 \\times 1 = 16 \\text{ cells}.$$\n\n- Each bidirectional I/O pin contributes two cells (one data and one direction control):\n$$8 \\times 2 = 16 \\text{ cells}.$$\n\n- Each tristate digital output pin contributes two cells (one data and one enable control):\n$$4 \\times 2 = 8 \\text{ cells}.$$\n\n- TAP pins (TDI, TDO, TCK, TMS) and power/ground pins (VCC, GND) are excluded and contribute:\n$$0 \\text{ cells}.$$\n\nSumming all contributions gives the BSR length in bits:\n$$32 + 16 + 16 + 8 = 72.$$\n\nTherefore, the correct option is C.", "answer": "$$\\boxed{C}$$", "id": "1917086"}, {"introduction": "With the boundary scan hardware in place, control is managed by the Test Access Port (TAP) controller, a small state machine within every JTAG-compliant device. Navigating this state machine using the Test Mode Select (TMS) signal is essential for performing any test or programming operation. This practice problem [@problem_id:1917058] challenges you to determine the correct TMS sequence to perform a common task, reinforcing your understanding of JTAG's core control protocol.", "problem": "A digital design engineer is tasked with debugging a newly manufactured Printed Circuit Board (PCB). The engineer plans to use the Joint Test Action Group (JTAG) standard, specifically the IEEE 1149.1 boundary-scan test, to verify the integrity of connections between components. The JTAG interface is controlled by a state machine within the Test Access Port (TAP) controller. This controller's state transitions are dictated by the value of the Test Mode Select (TMS) signal on each rising edge of the Test Clock (TCK).\n\nTo load a test vector into the boundary-scan data register, the TAP controller must be navigated to the `Shift-DR` state. The state transitions relevant to this task are described as follows:\n\n- The TAP controller is guaranteed to enter the `Test-Logic-Reset` state after power-up or by holding TMS high for at least five TCK cycles.\n- From `Test-Logic-Reset`, a TMS value of `0` transitions the controller to the `Run-Test/Idle` state. A TMS value of `1` keeps it in `Test-Logic-Reset`.\n- From `Run-Test/Idle`, a TMS value of `1` transitions to `Select-DR-Scan`. A TMS value of `0` keeps it in `Run-Test/Idle`.\n- From `Select-DR-Scan`, a TMS value of `0` transitions to `Capture-DR`. A TMS value of `1` transitions to `Select-IR-Scan` (the path for the instruction register).\n- From `Capture-DR`, a TMS value of `0` transitions to `Shift-DR`. A TMS value of `1` transitions to `Exit1-DR`.\n- Once in the `Shift-DR` state, a TMS value of `0` will keep the controller in the `Shift-DR` state, allowing for serial data shifting.\n\nAssuming the TAP controller starts in the `Test-Logic-Reset` state, which of the following sequences of TMS values, sampled on four consecutive rising edges of TCK, will correctly navigate the controller to the `Shift-DR` state?\n\nA. 0100\n\nB. 1100\n\nC. 0110\n\nD. 0101\n\nE. 0010", "solution": "We model the TAP controller as a deterministic finite state machine whose state updates occur on each rising edge of TCK and are determined solely by the current state and the sampled TMS value, as specified by the given transition rules. The controller starts in the Test-Logic-Reset state. To reach Shift-DR via the data register path, the minimal transition path is:\nTest-Logic-Reset --with TMS $0$--> Run-Test/Idle --with TMS $1$--> Select-DR-Scan --with TMS $0$--> Capture-DR --with TMS $0$--> Shift-DR.\nThis corresponds to the TMS sequence $0,1,0,0$.\n\nWe now verify each option by simulating four consecutive rising edges of TCK with the given TMS sequence:\n\nOption A: $0,1,0,0$\n- Start at Test-Logic-Reset; TMS $0$ leads to Run-Test/Idle.\n- From Run-Test/Idle; TMS $1$ leads to Select-DR-Scan.\n- From Select-DR-Scan; TMS $0$ leads to Capture-DR.\n- From Capture-DR; TMS $0$ leads to Shift-DR.\nResult: Shift-DR. This is correct.\n\nOption B: $1,1,0,0$\n- Start at Test-Logic-Reset; TMS $1$ remains in Test-Logic-Reset.\n- From Test-Logic-Reset; TMS $1$ remains in Test-Logic-Reset.\n- From Test-Logic-Reset; TMS $0$ leads to Run-Test/Idle.\n- From Run-Test/Idle; TMS $0$ remains in Run-Test/Idle.\nResult: Run-Test/Idle. Not Shift-DR.\n\nOption C: $0,1,1,0$\n- Start at Test-Logic-Reset; TMS $0$ leads to Run-Test/Idle.\n- From Run-Test/Idle; TMS $1$ leads to Select-DR-Scan.\n- From Select-DR-Scan; TMS $1$ leads to Select-IR-Scan.\n- From Select-IR-Scan; TMS $0$ leads to Capture-IR.\nResult: Capture-IR. Not Shift-DR.\n\nOption D: $0,1,0,1$\n- Start at Test-Logic-Reset; TMS $0$ leads to Run-Test/Idle.\n- From Run-Test/Idle; TMS $1$ leads to Select-DR-Scan.\n- From Select-DR-Scan; TMS $0$ leads to Capture-DR.\n- From Capture-DR; TMS $1$ leads to Exit1-DR.\nResult: Exit1-DR. Not Shift-DR.\n\nOption E: $0,0,1,0$\n- Start at Test-Logic-Reset; TMS $0$ leads to Run-Test/Idle.\n- From Run-Test/Idle; TMS $0$ remains in Run-Test/Idle.\n- From Run-Test/Idle; TMS $1$ leads to Select-DR-Scan.\n- From Select-DR-Scan; TMS $0$ leads to Capture-DR.\nResult: Capture-DR. Not Shift-DR.\n\nTherefore, only option A reaches Shift-DR in four TCK edges from the specified start state.", "answer": "$$\\boxed{A}$$", "id": "1917058"}, {"introduction": "In real-world applications, JTAG is used to test boards with multiple ICs connected in a \"scan chain,\" and its power truly shines when diagnosing manufacturing faults. A hardware fault can dramatically alter a device's behavior, and understanding these effects is key to interpreting test results and pinpointing the source of a problem. The following scenario [@problem_id:1917043] explores how a \"stuck-at\" fault on a TMS pin forces a device into its bypass mode, demonstrating how the scan path is altered and how JTAG aids in fault diagnosis.", "problem": "In a digital system, three complex integrated circuits, U1, U2, and U3, are connected in a series scan chain using the Joint Test Action Group (JTAG) IEEE 1149.1 standard. The Test Data Out (TDO) of the test controller is connected to the Test Data In (TDI) of U1, the TDO of U1 is connected to the TDI of U2, the TDO of U2 is connected to the TDI of U3, and the TDO of U3 is connected back to the test controller. The lengths of the primary data registers (specifically, the Boundary Scan Registers) for these devices are 8 bits for U1, 16 bits for U2, and 12 bits for U3.\n\nA manufacturing defect causes the Test Mode Select (TMS) pin of device U2 to be internally shorted to the power supply, making it permanently stuck at a logic high (stuck-at-1).\n\nAn automated test system, unaware of the fault, attempts to perform a data register scan. It assumes all devices are functional and start in the `Run-Test/Idle` state. The test system applies the standard JTAG Test Access Port (TAP) controller sequence on the TMS line to transition all devices to the `Shift-DR` state. It then holds TMS low and applies 36 pulses on the Test Clock (TCK) line to shift a 36-bit test vector through the chain. The test vector shifted into the TDI of U1 consists of 9 repetitions of the pattern `1100`.\n\nFor this analysis, assume that the `Capture-DR` operation for all correctly functioning devices loads a pattern of all zeros into their respective data registers. Also, assume that any device forced into a bypass mode due to the fault has its single-bit bypass register initialized to a value of 0 prior to the shift operation.\n\nWhat is the 36-bit sequence observed at the TDO pin of the final device (U3) over the course of the 36 TCK shift cycles? Select the correct sequence from the options below, where the first bit observed appears on the left.\n\nA. `000000000000000000000110011001100110`\n\nB. `000000000000000000000000000000000000`\n\nC. `000000000000000000001100110011001100`\n\nD. `000000000000100000000110011001100110`\n\nE. `110011001100110011001100110011001100`", "solution": "All three devices are assumed to start in the Run-Test/Idle state. The tester drives the TAP to Shift-DR; devices U1 and U3 (with correct TMS) follow this sequence and execute Capture-DR, which loads all zeros into their Boundary Scan Registers. Because U2â€™s TMS is stuck at logic high, it does not enter Shift-DR with the others; the problem states that a device forced into bypass due to the fault is modeled as contributing its single-bit BYPASS register to the data path, initialized to 0 before shifting.\n\nTherefore, during the Shift-DR operation, the effective scan path length is the sum of the contributing data registers:\n$$\nL = 8 \\ (\\text{U1 BSR}) + 1 \\ (\\text{U2 BYPASS}) + 12 \\ (\\text{U3 BSR}) = 21.\n$$\nLet $s(k)$ be the bit applied at TDI of U1 on the $k$-th TCK during the 36-cycle shift, and let $y(k)$ be the bit observed at the final TDO (from U3) on the $k$-th TCK. By shift-register behavior with zero-initialized contents, the output is the input delayed by $L$ cycles, with the first $L$ outputs being zeros:\n$$\ny(k) = \\begin{cases}\n0, & 1 \\le k \\le L,\\\\\ns(k-L), & L < k \\le 36.\n\\end{cases}\n$$\nThe tester shifts a 36-bit pattern consisting of 9 repetitions of the pattern `1100`. Thus the time sequence $s(k)$ starts at $k=1$ with\n$$\ns(1)=1,\\ s(2)=1,\\ s(3)=0,\\ s(4)=0,\\ \\text{and repeats with period }4,\n$$\ni.e.,\n$$\ns(k) = \\begin{cases}\n1, & k \\bmod 4 \\in \\{1,2\\},\\\\\n0, & k \\bmod 4 \\in \\{0,3\\}.\n\\end{cases}\n$$\nWith $L=21$, the observed sequence is $y(1..21)=0$, and for $k=22..36$,\n$$\ny(k)=s(k-21)=s(1..15)=110011001100110.\n$$\nTherefore, the 36-bit TDO sequence is 21 zeros followed by $110011001100110$, which matches option A:\n$$\n000000000000000000000110011001100110.\n$$", "answer": "$$\\boxed{A}$$", "id": "1917043"}]}
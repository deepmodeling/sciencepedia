{"hands_on_practices": [{"introduction": "Before applying any backstepping method, we must first confirm that the system possesses the required structure. This exercise [@problem_id:2694101] hones your ability to identify the \"strict-feedback\" form, a recursive structure that enables step-by-step controller design. You will practice verifying the essential condition of a uniformly positive input gain, a non-negotiable prerequisite for ensuring the control law is always well-defined and robust.", "problem": "Consider the nonlinear system with state $x \\in \\mathbb{R}^{2}$ and input $u \\in \\mathbb{R}$ given by\n$$\n\\dot{x}_{1} = \\sin(x_{1}) + x_{2}, \\qquad \\dot{x}_{2} = x_{1}^{2} + \\bigl(1 + x_{1}^{2}\\bigr) u.\n$$\nStart from the formal definition of strict-feedback form for a two-state single-input system: there exist functions $f_{1}(x_{1})$, $g_{1}(x_{1})$, $f_{2}(x_{1}, x_{2})$, and $b(x_{1}, x_{2})$ such that $\\dot{x}_{1} = f_{1}(x_{1}) + g_{1}(x_{1}) x_{2}$ and $\\dot{x}_{2} = f_{2}(x_{1}, x_{2}) + b(x_{1}, x_{2}) u$, with $b(x_{1}, x_{2})$ uniformly bounded away from zero, that is, there exists a constant $c > 0$ such that $b(x_{1}, x_{2}) \\ge c$ for all $(x_{1}, x_{2}) \\in \\mathbb{R}^{2}$. Using only fundamental properties of smooth functions, monotonicity, and nonnegativity of squares, determine whether the given system is in strict-feedback form by explicitly identifying $f_{1}$, $g_{1}$, $f_{2}$, and $b$, and by certifying a uniform positivity constant.\n\nNow consider the design of command-filtered backstepping (CFB) for regulation of $x_{1}$ to zero using a first-order command filter of the form $\\dot{\\nu} = -\\omega (\\nu - \\alpha(x_{1}))$ with $\\omega > 0$, where $\\alpha(x_{1})$ is a smooth virtual control. A standard global regularity requirement for CFB is that the input gain $b(x_{1}, x_{2})$ be uniformly lower bounded by a positive constant $c$, independent of the state, so that the inversion required in the actual control law is well-defined and bounded. Compute the largest constant $c$ such that $b(x_{1}, x_{2}) \\ge c$ holds for all $(x_{1}, x_{2}) \\in \\mathbb{R}^{2}$. Report this constant as your final answer. No units are required. If you decide to express the constant numerically, give the exact value; do not round.", "solution": "The problem presented is a well-posed exercise in nonlinear control theory. We will first demonstrate that the given system is in strict-feedback form and then compute the required constant.\n\nThe state equations are given as:\n$$\n\\dot{x}_{1} = \\sin(x_{1}) + x_{2}\n$$\n$$\n\\dot{x}_{2} = x_{1}^{2} + \\bigl(1 + x_{1}^{2}\\bigr) u\n$$\nThe formal definition of a two-state, single-input system in strict-feedback form is:\n$$\n\\dot{x}_{1} = f_{1}(x_{1}) + g_{1}(x_{1}) x_{2}\n$$\n$$\n\\dot{x}_{2} = f_{2}(x_{1}, x_{2}) + b(x_{1}, x_{2}) u\n$$\nBy direct inspection of the equation for $\\dot{x}_{1}$, we identify the functions $f_{1}(x_{1})$ and $g_{1}(x_{1})$. Comparing the expression $\\sin(x_{1}) + x_{2}$ with the form $f_{1}(x_{1}) + g_{1}(x_{1}) x_{2}$, we unequivocally determine:\n$$\nf_{1}(x_{1}) = \\sin(x_{1})\n$$\n$$\ng_{1}(x_{1}) = 1\n$$\nSimilarly, by inspecting the equation for $\\dot{x}_{2}$, we compare the expression $x_{1}^{2} + \\bigl(1 + x_{1}^{2}\\bigr) u$ with the form $f_{2}(x_{1}, x_{2}) + b(x_{1}, x_{2}) u$. This decomposition yields:\n$$\nf_{2}(x_{1}, x_{2}) = x_{1}^{2}\n$$\n$$\nb(x_{1}, x_{2}) = 1 + x_{1}^{2}\n$$\nFor the system to be in valid strict-feedback form, a critical condition is that the input gain function $b(x_{1}, x_{2})$ must be uniformly bounded away from zero. This requires the existence of a constant $c > 0$ such that the inequality $b(x_{1}, x_{2}) \\ge c$ holds for all states $(x_{1}, x_{2}) \\in \\mathbb{R}^{2}$. This condition is essential for the applicability of control design methodologies such as backstepping, where the control law typically involves an inversion of $b(x_{1}, x_{2})$.\n\nThe problem demands the computation of the largest such constant $c$. This is mathematically equivalent to finding the greatest lower bound, or the infimum, of the function $b(x_{1}, x_{2})$ over its entire domain $\\mathbb{R}^{2}$.\n$$\nc = \\inf_{(x_{1}, x_{2}) \\in \\mathbb{R}^{2}} b(x_{1}, x_{2})\n$$\nThe function we must analyze is $b(x_{1}, x_{2}) = 1 + x_{1}^{2}$. It is immediately apparent that this function depends only on the state variable $x_{1}$ and is independent of $x_{2}$. The analysis therefore simplifies to finding the infimum of the single-variable function $h(x_{1}) = 1 + x_{1}^{2}$ over all $x_{1} \\in \\mathbb{R}$:\n$$\nc = \\inf_{x_{1} \\in \\mathbb{R}} (1 + x_{1}^{2})\n$$\nWe use the fundamental property that the square of any real number is non-negative. That is, for any $x_{1} \\in \\mathbb{R}$, we have:\n$$\nx_{1}^{2} \\ge 0\n$$\nThe minimum value of $x_{1}^{2}$ is precisely $0$, which is attained at $x_{1} = 0$. By adding the constant $1$ to both sides of this inequality, we obtain:\n$$\n1 + x_{1}^{2} \\ge 1\n$$\nThis inequality holds for all $x_{1} \\in \\mathbb{R}$, and consequently for all pairs $(x_{1}, x_{2}) \\in \\mathbb{R}^{2}$. The function $b(x_{1}, x_{2}) = 1 + x_{1}^{2}$ thus has a global minimum value of $1$, which occurs along the line where $x_{1} = 0$. Since this minimum value exists, it is equal to the infimum of the function.\nTherefore, the greatest lower bound of $b(x_{1}, x_{2})$ over $\\mathbb{R}^{2}$ is $1$. The largest constant $c$ for which the condition $b(x_{1}, x_{2}) \\ge c$ is satisfied for all states is precisely this infimum.\nWe conclude that the largest such constant is $c=1$. As $1 > 0$, the positivity condition is satisfied, confirming that the system is indeed in a valid strict-feedback form suitable for control design techniques like command-filtered backstepping.", "answer": "$$\n\\boxed{1}\n$$", "id": "2694101"}, {"introduction": "The core innovation of command-filtered backstepping is the use of dynamic filters to avoid the tedious and often problematic analytical differentiation of virtual controls. This practice [@problem_id:2693966] provides a deep dive into the properties and realization of the second-order command filter, a cornerstone of the CFB technique. By connecting its transfer function representation to a minimal state-space model, you will reinforce key concepts from linear systems theory that are critical for analysis and implementation.", "problem": "Consider the design of a critically damped second-order command filter to be used in Command-Filtered Backstepping (CFB). The filter is modeled as a linear time-invariant system with input $u(t)$ and output $y(t)$, and has Laplace-domain transfer function $H(s) = \\frac{Y(s)}{U(s)}$ given by\n$$\nH(s) = \\frac{\\omega_c^2}{(s+\\omega_c)^2},\n$$\nwhere $\\omega_c > 0$ is a prescribed cutoff frequency. Starting from the definitions of the Laplace transform and transfer function for linear time-invariant systems, and using the standard state-space realization framework, perform the following tasks:\n1) Show that the system is strictly proper, internally stable, and critically damped, and identify the denominator polynomial coefficients in the monic form $s^2 + a_1 s + a_0$.\n2) Construct a minimal state-space realization in controllable canonical form, with state vector $x(t) \\in \\mathbb{R}^2$, input $u(t) \\in \\mathbb{R}$, output $y(t) \\in \\mathbb{R}$, and matrices $A \\in \\mathbb{R}^{2 \\times 2}$, $B \\in \\mathbb{R}^{2 \\times 1}$, $C \\in \\mathbb{R}^{1 \\times 2}$, $D \\in \\mathbb{R}$ chosen so that the resulting transfer function matches $H(s)$.\n3) Verify minimality by establishing controllability and observability directly from the realization.\nReport your final answer as the row matrix containing the entries of $(A,B,C,D)$ in the order $\\left[A_{11}\\;A_{12}\\;A_{21}\\;A_{22}\\;B_{11}\\;B_{21}\\;C_{11}\\;C_{12}\\;D\\right]$. Your final answer must be a single analytic expression. No numerical evaluation is required.", "solution": "The problem presented is well-defined within the framework of linear control theory and is scientifically sound. It is a standard exercise in system analysis and realization. We proceed directly to the solution.\n\nThe given transfer function for the command filter is\n$$\nH(s) = \\frac{\\omega_c^2}{(s+\\omega_c)^2}\n$$\nwhere $\\omega_c > 0$ is the cutoff frequency. We are tasked with three objectives: analyzing the system properties, constructing a state-space realization, and verifying its minimality.\n\nFirst, we address the system properties. The transfer function is a rational function of the complex variable $s$, $H(s) = \\frac{N(s)}{P(s)}$, where the numerator polynomial is $N(s) = \\omega_c^2$ and the denominator polynomial is $P(s) = (s+\\omega_c)^2$.\n\n1) System Properties:\n- **Strictly Proper:** A system is strictly proper if the degree of the denominator polynomial is strictly greater than the degree of the numerator polynomial. Here, $\\deg(P(s)) = 2$ and $\\deg(N(s)) = 0$. Since $2 > 0$, the system is strictly proper. A direct consequence for the state-space realization $(A, B, C, D)$ is that the direct feedthrough term $D$ must be zero, as $D = \\lim_{s \\to \\infty} H(s) = 0$.\n- **Denominator Polynomial and Stability:** Expanding the denominator, we obtain the characteristic polynomial of the system:\n$$\nP(s) = (s+\\omega_c)^2 = s^2 + 2\\omega_c s + \\omega_c^2\n$$\nIn the standard monic form $s^2 + a_1 s + a_0$, the coefficients are identified as $a_1 = 2\\omega_c$ and $a_0 = \\omega_c^2$. The poles of the system are the roots of this polynomial, which are $s_1 = s_2 = -\\omega_c$. Since it is given that $\\omega_c > 0$, both poles are real, negative, and coincident. They lie in the strict left-half of the complex plane ($Re(s) < 0$). This ensures the system is internally stable (and also BIBO stable).\n- **Damping:** The standard form of a second-order denominator is $s^2 + 2\\zeta\\omega_n s + \\omega_n^2$, where $\\zeta$ is the damping ratio and $\\omega_n$ is the natural frequency. By comparing coefficients with $s^2 + 2\\omega_c s + \\omega_c^2$, we identify the natural frequency as $\\omega_n = \\omega_c$ and the damping term as $2\\zeta\\omega_n = 2\\omega_c$. Substituting $\\omega_n = \\omega_c$ gives $2\\zeta\\omega_c = 2\\omega_c$. Since $\\omega_c \\neq 0$, this yields $\\zeta = 1$. A damping ratio of $\\zeta = 1$ is, by definition, a critically damped system.\n\n2) State-Space Realization in Controllable Canonical Form:\nFor a second-order transfer function of the form $H(s) = \\frac{b_1 s + b_0}{s^2 + a_1 s + a_0}$, a standard state-space realization in controllable canonical form is given by the matrices:\n$$\nA = \\begin{pmatrix} 0 & 1 \\\\ -a_0 & -a_1 \\end{pmatrix}, \\quad B = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}, \\quad C = \\begin{pmatrix} b_0 & b_1 \\end{pmatrix}, \\quad D = [0]\n$$\nNote that this form applies when the numerator has degree at most $1$. For our transfer function, $H(s) = \\frac{\\omega_c^2}{s^2 + 2\\omega_c s + \\omega_c^2}$, we have already identified $a_1 = 2\\omega_c$ and $a_0 = \\omega_c^2$. The numerator coefficients are $b_1 = 0$ and $b_0 = \\omega_c^2$. Substituting these values into the canonical form yields the state-space matrices:\n$$\nA = \\begin{pmatrix} 0 & 1 \\\\ -\\omega_c^2 & -2\\omega_c \\end{pmatrix}\n$$\n$$\nB = \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix}\n$$\n$$\nC = \\begin{pmatrix} \\omega_c^2 & 0 \\end{pmatrix}\n$$\n$$\nD = [0]\n$$\nThis is a minimal realization, as the transfer function has no pole-zero cancellations. The system has two poles at $s = -\\omega_c$ and no finite zeros.\n\n3) Verification of Minimality:\nA state-space realization is minimal if and only if it is both completely controllable and completely observable. We verify these properties for the realization derived above.\n- **Controllability:** The controllability matrix $\\mathcal{C}$ for a second-order system is $\\mathcal{C} = \\begin{pmatrix} B & AB \\end{pmatrix}$. We compute the product $AB$:\n$$\nAB = \\begin{pmatrix} 0 & 1 \\\\ -\\omega_c^2 & -2\\omega_c \\end{pmatrix} \\begin{pmatrix} 0 \\\\ 1 \\end{pmatrix} = \\begin{pmatrix} 1 \\\\ -2\\omega_c \\end{pmatrix}\n$$\nThe controllability matrix is therefore:\n$$\n\\mathcal{C} = \\begin{pmatrix} 0 & 1 \\\\ 1 & -2\\omega_c \\end{pmatrix}\n$$\nThe system is controllable if $\\mathcal{C}$ has full rank, which is rank $2$ for this $2 \\times 2$ matrix. The rank is full if and only if the determinant is non-zero.\n$$\n\\det(\\mathcal{C}) = (0)(-2\\omega_c) - (1)(1) = -1\n$$\nSince $\\det(\\mathcal{C}) = -1 \\neq 0$, the realization is controllable.\n- **Observability:** The observability matrix $\\mathcal{O}$ for a second-order system is $\\mathcal{O} = \\begin{pmatrix} C \\\\ CA \\end{pmatrix}$. We compute the product $CA$:\n$$\nCA = \\begin{pmatrix} \\omega_c^2 & 0 \\end{pmatrix} \\begin{pmatrix} 0 & 1 \\\\ -\\omega_c^2 & -2\\omega_c \\end{pmatrix} = \\begin{pmatrix} 0 & \\omega_c^2 \\end{pmatrix}\n$$\nThe observability matrix is therefore:\n$$\n\\mathcal{O} = \\begin{pmatrix} \\omega_c^2 & 0 \\\\ 0 & \\omega_c^2 \\end{pmatrix}\n$$\nThe system is observable if $\\mathcal{O}$ has full rank. We compute its determinant:\n$$\n\\det(\\mathcal{O}) = (\\omega_c^2)(\\omega_c^2) - (0)(0) = \\omega_c^4\n$$\nSince $\\omega_c > 0$, it is guaranteed that $\\omega_c^4 > 0$. Thus, $\\det(\\mathcal{O}) \\neq 0$, and the realization is observable.\nBecause the realization is both controllable and observable, it is a minimal realization, as expected.\n\nThe final answer requires the components of the matrices $(A, B, C, D)$ to be presented in a specific row matrix format.\n$A_{11} = 0$, $A_{12} = 1$, $A_{21} = -\\omega_c^2$, $A_{22} = -2\\omega_c$.\n$B_{11} = 0$, $B_{21} = 1$.\n$C_{11} = \\omega_c^2$, $C_{12} = 0$.\n$D = 0$.\nThe ordered vector is $[A_{11}\\;A_{12}\\;A_{21}\\;A_{22}\\;B_{11}\\;B_{21}\\;C_{11}\\;C_{12}\\;D]$.", "answer": "$$\n\\boxed{\\begin{pmatrix} 0 & 1 & -\\omega_c^2 & -2\\omega_c & 0 & 1 & \\omega_c^2 & 0 & 0 \\end{pmatrix}}\n$$", "id": "2693966"}, {"introduction": "With an understanding of the required system structure and the filter mechanism, you are now ready to synthesize a complete controller from start to finish. Command-filtered backstepping is a recursive design procedure where a stabilizing law is built one stage at a time. This comprehensive problem [@problem_id:2694013] guides you through an entire multi-stage design, integrating error definitions, Lyapunov analysis, and filter usage to construct a final, implementable control law for a third-order system.", "problem": "Consider the strict-feedback linear system with coupling terms\n$$\n\\dot{x}_{1}=x_{2},\\quad \\dot{x}_{2}=-x_{1}+x_{3},\\quad \\dot{x}_{3}=-x_{2}+u,\n$$\nwhere $x_{1},x_{2},x_{3}\\in\\mathbb{R}$ are the states and $u\\in\\mathbb{R}$ is the control input. The regulation objective is to drive $(x_{1},x_{2},x_{3})$ to the origin.\n\nYou are asked to perform a full three-stage command-filtered backstepping design using second-order command filters to avoid analytic differentiation of virtual controls. Use the following second-order tracking filters at stages $1$ and $2$:\n$$\n\\dot{r}_{1}=v_{1},\\qquad \\dot{v}_{1}=-2\\zeta_{1}\\omega_{1}v_{1}-\\omega_{1}^{2}\\left(r_{1}-\\alpha_{1}\\right),\n$$\n$$\n\\dot{r}_{2}=v_{2},\\qquad \\dot{v}_{2}=-2\\zeta_{2}\\omega_{2}v_{2}-\\omega_{2}^{2}\\left(r_{2}-\\alpha_{2}\\right),\n$$\nwhere $\\alpha_{1}$ and $\\alpha_{2}$ are the stage-$1$ and stage-$2$ virtual controls, respectively; $r_{1},v_{1}$ and $r_{2},v_{2}$ are the corresponding filter states; and $\\zeta_{i}\\in(0,\\infty)$, $\\omega_{i}\\in(0,\\infty)$, $i\\in\\{1,2\\}$ are designer-chosen damping ratios and natural frequencies.\n\nDesign virtual controls $\\alpha_{1}$, $\\alpha_{2}$ and a real control $u$ with strictly positive gains $k_{1},k_{2},k_{3}\\in(0,\\infty)$ such that the origin of the closed-loop error dynamics is rendered globally exponentially stable in the nominal case where the filter outputs match the virtual controls, and robustly stable when the filters are finite-bandwidth approximations (i.e., $r_{i}\\approx \\alpha_{i}$ and $v_{i}\\approx \\dot{\\alpha}_{i}$). Your design must:\n- Start from the regulation objective and the system dynamics.\n- Introduce appropriate backstepping errors at each stage with respect to the filtered commands $r_{1}$ and $r_{2}$.\n- Use the filter states $r_{1},v_{1},r_{2},v_{2}$ to construct stabilizing laws without differentiating any virtual control.\n- Justify the structure of each stabilizing term using Lyapunov reasoning from first principles (definition of a Lyapunov function and its derivative along solutions).\n\nProvide the final control input $u$ as a single closed-form analytic expression in terms of $x_{1},x_{2},x_{3}$, $r_{1},v_{1},r_{2},v_{2}$, and the gains $k_{1},k_{2},k_{3}$. No numerical evaluation is required. The final answer must be this expression alone.", "solution": "The problem statement is found to be valid. It is a well-posed problem in control theory that is scientifically grounded, self-contained, and free of contradictions. The solution will proceed by following the command-filtered backstepping design procedure as requested.\n\nThe system dynamics are given by:\n$$\n\\begin{aligned}\n\\dot{x}_{1} &= x_{2} \\\\\n\\dot{x}_{2} &= -x_{1} + x_{3} \\\\\n\\dot{x}_{3} &= -x_{2} + u\n\\end{aligned}\n$$\nThe control objective is to regulate the state vector $(x_1, x_2, x_3)$ to the origin. We will use a three-stage command-filtered backstepping design.\n\n**Stage 1: Stabilizing the $x_1$ Subsystem**\n\nFirst, we define the error for the first state variable, $x_1$, with respect to its desired value, which is $0$.\nLet the first error variable be $z_1$:\n$$\nz_1 = x_1\n$$\nTo analyze the stability of the $z_1$ dynamics, we define a Lyapunov function candidate:\n$$\nV_1 = \\frac{1}{2} z_1^2\n$$\nThe time derivative of $V_1$ along the system trajectories is:\n$$\n\\dot{V}_1 = z_1 \\dot{z}_1 = z_1 \\dot{x}_1 = z_1 x_2\n$$\nIn this expression, $x_2$ acts as a virtual control. To stabilize the $z_1$ subsystem, we would want $x_2$ to drive $\\dot{V}_1$ to be negative. We choose a desired virtual control, denoted by $\\alpha_1$, for $x_2$:\n$$\n\\alpha_1 = -k_1 z_1 = -k_1 x_1\n$$\nwhere $k_1 > 0$ is a design gain. If $x_2$ were equal to $\\alpha_1$, then $\\dot{V}_1$ would be $-k_1 z_1^2$, which is negative definite with respect to $z_1$.\n\nHowever, $x_2$ is a state, not a control input. The command-filtered backstepping approach avoids differentiating $\\alpha_1$ by passing it through a second-order command filter:\n$$\n\\begin{aligned}\n\\dot{r}_{1} &= v_{1} \\\\\n\\dot{v}_{1} &= -2\\zeta_{1}\\omega_{1}v_{1}-\\omega_{1}^{2}\\left(r_{1}-\\alpha_{1}\\right)\n\\end{aligned}\n$$\nThe filter output $r_1$ provides a smooth approximation of $\\alpha_1$, and $v_1$ provides an approximation of its derivative, $\\dot{\\alpha}_1$.\n\n**Stage 2: Stabilizing the $(x_1, x_2)$ Subsystem**\n\nNext, we define the error between the state $x_2$ and its filtered command $r_1$:\n$$\nz_2 = x_2 - r_1\n$$\nWe augment the Lyapunov function with a term for $z_2$:\n$$\nV_2 = V_1 + \\frac{1}{2} z_2^2 = \\frac{1}{2} x_1^2 + \\frac{1}{2} (x_2 - r_1)^2\n$$\nThe time derivative of $V_2$ is $\\dot{V}_2 = \\dot{V}_1 + z_2 \\dot{z}_2$.\nWe have $\\dot{V}_1 = z_1 x_2$. Substituting $x_2 = z_2 + r_1$ gives $\\dot{V}_1 = x_1(z_2 + r_1)$.\nThe derivative of $z_2$ is:\n$$\n\\dot{z}_2 = \\dot{x}_2 - \\dot{r}_1 = (-x_1 + x_3) - v_1\n$$\nCombining these, the derivative of $V_2$ is:\n$$\n\\dot{V}_2 = x_1(z_2 + r_1) + z_2(-x_1 + x_3 - v_1)\n$$\nDistributing the terms:\n$$\n\\dot{V}_2 = x_1 z_2 + x_1 r_1 - x_1 z_2 + z_2(x_3 - v_1) = x_1 r_1 + z_2(x_3 - v_1)\n$$\nTo proceed with the Lyapunov-based design, we substitute $r_1 = \\alpha_1 + (r_1 - \\alpha_1)$, where $\\alpha_1 = -k_1 x_1$:\n$$\n\\dot{V}_2 = x_1 (\\alpha_1 + (r_1 - \\alpha_1)) + z_2(x_3 - v_1) = -k_1 x_1^2 + x_1(r_1 - \\alpha_1) + z_2(x_3 - v_1)\n$$\nThe term $x_1(r_1 - \\alpha_1)$ arises from the filter tracking error and is handled in a full robustness analysis. For the design of the next virtual control, we focus on the nominal terms. The term $-k_1 x_1^2$ is already stabilizing. We now design the second virtual control, $\\alpha_2$, for the state $x_3$ to make the term $z_2(x_3 - v_1)$ contribute to stability. Specifically, we want to introduce a term $-k_2 z_2^2$.\nWe choose $\\alpha_2$ such that if $x_3=\\alpha_2$, then $z_2(\\alpha_2 - v_1) = -k_2 z_2^2$. This implies $\\alpha_2 - v_1 = -k_2 z_2$. Solving for $\\alpha_2$:\n$$\n\\alpha_2 = v_1 - k_2 z_2 = v_1 - k_2(x_2 - r_1)\n$$\nwhere $k_2 > 0$ is a design gain. This virtual control $\\alpha_2$ is passed through the second command filter:\n$$\n\\begin{aligned}\n\\dot{r}_{2} &= v_{2} \\\\\n\\dot{v}_{2} &= -2\\zeta_{2}\\omega_{2}v_{2}-\\omega_{2}^{2}\\left(r_{2}-\\alpha_{2}\\right)\n\\end{aligned}\n$$\n\n**Stage 3: Design of the Actual Control Input $u$**\n\nFinally, we define the error for the third state variable, $x_3$, with respect to its filtered command $r_2$:\n$$\nz_3 = x_3 - r_2\n$$\nThe complete Lyapunov function for the error system is:\n$$\nV_3 = V_2 + \\frac{1}{2} z_3^2 = \\frac{1}{2} x_1^2 + \\frac{1}{2} z_2^2 + \\frac{1}{2} z_3^2\n$$\nIts time derivative is $\\dot{V}_3 = \\dot{V}_2 + z_3 \\dot{z}_3$. Using the expression for $\\dot{V}_2$ and substituting $x_3 = z_3 + r_2$:\n$$\n\\dot{V}_2 = -k_1 x_1^2 + x_1(r_1 - \\alpha_1) + z_2(z_3 + r_2 - v_1)\n$$\nWe add and subtract $\\alpha_2$ inside the parenthesis with $r_2$, and use $\\alpha_2 = v_1 - k_2 z_2$:\n$$\n\\begin{aligned}\n\\dot{V}_2 &= -k_1 x_1^2 + x_1(r_1 - \\alpha_1) + z_2(z_3 + (r_2 - \\alpha_2) + \\alpha_2 - v_1) \\\\\n&= -k_1 x_1^2 + x_1(r_1 - \\alpha_1) + z_2(z_3 + (r_2 - \\alpha_2) + (v_1 - k_2 z_2) - v_1) \\\\\n&= -k_1 x_1^2 - k_2 z_2^2 + z_2 z_3 + x_1(r_1 - \\alpha_1) + z_2(r_2 - \\alpha_2)\n\\end{aligned}\n$$\nNow, we compute $\\dot{V}_3$:\n$$\n\\dot{V}_3 = \\dot{V}_2 + z_3 \\dot{z}_3 = -k_1 x_1^2 - k_2 z_2^2 + z_2 z_3 + z_3 \\dot{z}_3 + \\text{filter errors}\n$$\nThe derivative of $z_3$ is:\n$$\n\\dot{z}_3 = \\dot{x}_3 - \\dot{r}_2 = (-x_2 + u) - v_2\n$$\nSubstituting this into the expression for $\\dot{V}_3$:\n$$\n\\dot{V}_3 = -k_1 x_1^2 - k_2 z_2^2 + z_2 z_3 + z_3(-x_2 + u - v_2) + \\text{filter errors}\n$$\nCombining the terms with $z_3$:\n$$\n\\dot{V}_3 = -k_1 x_1^2 - k_2 z_2^2 + z_3(z_2 - x_2 + u - v_2) + \\text{filter errors}\n$$\nWe simplify the term $z_2 - x_2$:\n$$\nz_2 - x_2 = (x_2 - r_1) - x_2 = -r_1\n$$\nSo the derivative becomes:\n$$\n\\dot{V}_3 = -k_1 x_1^2 - k_2 z_2^2 + z_3(-r_1 + u - v_2) + \\text{filter errors}\n$$\nWe design the actual control input $u$ to make the last term stabilizing. We set:\n$$\n-r_1 + u - v_2 = -k_3 z_3\n$$\nwhere $k_3 > 0$ is a design gain. Solving for $u$, we obtain the final control law:\n$$\nu = r_1 + v_2 - k_3 z_3\n$$\nSubstituting $z_3 = x_3 - r_2$, the controller is expressed in terms of the measurable system states and filter states:\n$$\nu = r_1 + v_2 - k_3(x_3 - r_2) = r_1 + v_2 - k_3 x_3 + k_3 r_2\n$$\nWith this control law, the derivative of the Lyapunov function for the nominal system (ignoring filter errors) is:\n$$\n\\dot{V}_3 = -k_1 x_1^2 - k_2 z_2^2 - k_3 z_3^2\n$$\nwhich is negative definite in the error coordinates $(z_1, z_2, z_3) = (x_1, x_2-r_1, x_3-r_2)$, guaranteeing the exponential stability of the error dynamics origin for the nominal case. The use of command filters ensures that this stability is robust to the finite-bandwidth approximation of the virtual controls.\nThe final control law is a closed-form expression using states $x_3$ and filter states $r_1, r_2, v_2$. These filter states, in turn, depend on $x_1, x_2$ and the gains $k_1, k_2$, fully defining the feedback law.", "answer": "$$\\boxed{r_1 + v_2 + k_3(r_2 - x_3)}$$", "id": "2694013"}]}
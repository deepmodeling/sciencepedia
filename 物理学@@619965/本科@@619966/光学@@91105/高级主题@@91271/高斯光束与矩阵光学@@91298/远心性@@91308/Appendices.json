{"hands_on_practices": [{"introduction": "远心系统的独特性能在很大程度上取决于其核心元件——孔径光阑的精确定位。本练习将引导您推导在一个经典的4f光学系统中，如何通过放置孔径光阑来实现双侧远心。掌握这一原理是设计精密测量和成像系统的第一步。[@problem_id:2257821]", "problem": "一个光学中继系统被设计用于高精度机器视觉。该系统由两个薄会聚透镜 L1 和 L2 组成，它们的正焦距均为 $f$。这两个透镜沿 z 轴共轴排列。第一个透镜 L1 位于坐标 $z=f$ 处，第二个透镜 L2 位于 $z=3f$ 处。一个物体放置在 $z=0$ 平面内。\n\n为使该系统即使在物体沿 z 轴有微小位移时也能提供恒定的放大率，必须同时满足两个条件。第一，与物面上任意一点相关联的主光线在 $z < f$ 区域内必须平行于 z 轴。第二，与像面上任意一点相关联的主光线在透镜 L2 和像平面之间的区域内必须平行于 z 轴。这些条件可以通过在特定的平面 $z=z_{AS}$ 处插入一个单一的物理限制孔径，即孔径光阑，来满足。\n\n确定孔径光阑的坐标 $z_{AS}$。请用 $f$ 来表示你的答案。", "solution": "我们使用主光线条件和傍轴光线传输矩阵。设薄透镜的焦距为 $f$，L1 位于 $z=f$ 处，L2 位于 $z=3f$ 处。设孔径光阑是一个位于 $z=z_{AS}$ 的平面。定义距离\n$$d_{1}=z_{AS}-f,\\qquad d_{2}=3f-z_{AS},$$\n它们分别是 L1 到光阑以及光阑到 L2 的间距。\n\n主光线定义为通过孔径光阑中心的光线，因此在光阑平面上它们的高度为 $y_{AS}=0$。我们用向量 $\\begin{pmatrix} y \\\\ \\theta \\end{pmatrix}$ 表示一条光线，其中 $y$ 是高度，$\\theta$ 是相对于 z 轴的傍轴角。自由空间中传播距离 $d$ 由矩阵 $P(d)=\\begin{pmatrix} 1 & d \\\\ 0 & 1 \\end{pmatrix}$ 表示，焦距为 $f$ 的薄透镜由矩阵 $L=\\begin{pmatrix} 1 & 0 \\\\ -\\frac{1}{f} & 1 \\end{pmatrix}$ 表示。\n\n物方远心（对于 $z<f$，主光线平行于 z 轴）要求对于任意物点（即，紧靠 L1 前方的任意光线高度），其主光线在紧靠 L1 前方的角度为零。从紧靠 L1 前方到光阑的变换为\n$$M_{L1\\to AS} \\;=\\; P(d_{1})\\,L \\;=\\; \\begin{pmatrix} 1-\\frac{d_{1}}{f} & d_{1} \\\\ -\\frac{1}{f} & 1 \\end{pmatrix}.$$\n对于紧靠 L1 前方，向量为 $\\begin{pmatrix} y_{L} \\\\ \\theta_{L} \\end{pmatrix}$ 的光线，其通过光阑中心的条件是\n$$y_{AS} \\;=\\; \\left(1-\\frac{d_{1}}{f}\\right)y_{L} + d_{1}\\,\\theta_{L} \\;=\\; 0.$$\n因此，紧靠 L1 前方的主光线角度为\n$$\\theta_{L} \\;=\\; -\\,\\frac{1-\\frac{d_{1}}{f}}{d_{1}}\\,y_{L}.$$\n为实现物方远心，我们要求对于任意 $y_{L}$ 都有 $\\theta_{L}=0$，这当且仅当\n$$1-\\frac{d_{1}}{f}=0 \\;\\;\\Longrightarrow\\;\\; d_{1}=f \\;\\;\\Longrightarrow\\;\\; z_{AS}=2f.$$\n\n像方远心（在 L2 与像平面之间，主光线平行于 z 轴）要求主光线在紧靠 L2 后方的角度为零。从光阑到紧靠 L2 后方的变换为\n$$M_{AS\\to L2} \\;=\\; L\\,P(d_{2}) \\;=\\; \\begin{pmatrix} 1 & d_{2} \\\\ -\\frac{1}{f} & 1-\\frac{d_{2}}{f} \\end{pmatrix}.$$\n一条穿过光阑中心的光线的向量为 $\\begin{pmatrix} 0 \\\\ \\theta_{AS} \\end{pmatrix}$，所以在紧靠 L2 后方其角度为\n$$\\theta_{R} \\;=\\; \\left(1-\\frac{d_{2}}{f}\\right)\\theta_{AS}.$$\n为实现像方远心，我们必须对任意 $\\theta_{AS}$ 都有 $\\theta_{R}=0$，这给出\n$$1-\\frac{d_{2}}{f}=0 \\;\\;\\Longrightarrow\\;\\; d_{2}=f \\;\\;\\Longrightarrow\\;\\; z_{AS}=2f.$$\n\n两个远心条件都独立地得出了 $z_{AS}=2f$。该平面是 4f 中继系统中两个透镜的公共焦平面，它确保了主光线在物方和像方都平行于 z 轴，从而在物体有微小轴向位移时提供恒定的放大率。", "answer": "$$\\boxed{2f}$$", "id": "2257821"}, {"introduction": "远心镜头最显著的优势之一是其卓越的景深，这对于机器视觉和精密测量至关重要。本练习将引导您对物方远心系统和传统中心投影系统的景深进行定量比较。通过推导它们景深的比例，您将更深刻地理解远心系统为何在需要深度方向上保持聚焦稳定性的应用中备受青睐。[@problem_id:2257807]", "problem": "考虑两个简单的成像系统，均由一个焦距为 $f$ 的薄会聚透镜和一个直径为 $D$ 的孔径光阑构成。\n\n系统 A (心射系统)：孔径光阑与薄透镜重合放置。\n系统 B (物方远心系统)：孔径光阑放置在薄透镜的后焦点处。\n\n两个系统都用于形成一个物体的实倒像，横向放大率的绝对值为 $M$。\n\n对于每个系统，景深 (DOF) 定义为，在固定的像平面上，弥散斑直径小于或等于一个可接受的微小值 $B_{max}$ 时，物体位置的总纵向范围。您可以假设近轴近似有效，并且总景深与标称物距相比很小。\n\n计算远心系统的景深与心射系统的景深之比，$R = \\frac{DOF_{tele}}{DOF_{ento}}$。您的最终答案应为一个用放大率绝对值 $M$ 表示的封闭形式表达式。", "solution": "设薄透镜的焦距为 $f$，孔径光阑直径为 $D$。对于距离透镜为 $s$ 的轴上物点，其高斯像距为 $s'$，横向放大率绝对值为 $M$，满足\n$$\nM=\\frac{s'}{s},\\qquad \\frac{1}{s}+\\frac{1}{s'}=\\frac{1}{f}.\n$$\n求解这些方程可得\n$$\ns=\\!f\\!\\left(1+\\frac{1}{M}\\right),\\qquad s'=\\!f(1+M).\n$$\n\n对于围绕标称位置的微小轴向物位移 $\\Delta s$，相应的像位移 $\\Delta s'$（像面固定）可以通过对透镜方程求导得出：\n$$\n-\\frac{\\Delta s}{s^{2}}-\\frac{\\Delta s'}{s'^{2}}=0\\;\\;\\Rightarrow\\;\\;\\Delta s'=-\\frac{s'^{2}}{s^{2}}\\Delta s=-M^{2}\\Delta s,\n$$\n因此，像离焦的量值为 $|\\Delta i|=|\\Delta s'|=M^{2}|\\Delta s|$。\n\n对于小离焦，固定像平面上的轴上弥散斑直径 $c$ 为\n$$\nc=2|\\Delta i|\\tan u'\\approx 2|\\Delta i|\\,u',\n$$\n其中 $u'$ 是聚焦共轭点对应的像方边缘光线的半张角。从几何上看，$u'$ 是出射光瞳半径与出射光瞳平面到高斯像点距离之比。设该距离为 $L$；出射光瞳半径为 $D/2$，我们有\n$$\nu'=\\frac{D/2}{L}.\n$$\n因此\n$$\nc=2|\\Delta i|\\frac{D/2}{L}=|\\Delta i|\\frac{D}{L}=M^{2}|\\Delta s|\\frac{D}{L}.\n$$\n施加弥散斑约束 $c\\leq B_{max}$，可得物方空间的半范围\n$$\n|\\Delta s|_{\\max}=\\frac{B_{max}}{M^{2}}\\frac{L}{D},\n$$\n所以总景深为\n$$\nDOF=2|\\Delta s|_{\\max}=\\frac{2B_{max}L}{D\\,M^{2}}.\n$$\n\n接下来需要对每个系统计算 $L$：\n- 心射系统 (光阑在透镜处)：出射光瞳位于透镜平面，因此 $L_{ento}=s'=f(1+M)$。于是\n$$\nDOF_{ento}=\\frac{2B_{max}f(1+M)}{D\\,M^{2}}.\n$$\n- 物方远心系统 (光阑在后焦面)：出射光瞳位于后焦面，距离透镜为 $f$；出射光瞳到高斯像的距离为 $L_{tele}=s'-f=fM$。于是\n$$\nDOF_{tele}=\\frac{2B_{max}fM}{D\\,M^{2}}=\\frac{2B_{max}f}{D\\,M}.\n$$\n\n因此，景深之比为\n$$\nR=\\frac{DOF_{tele}}{DOF_{ento}}=\\frac{\\frac{2B_{max}f}{D\\,M}}{\\frac{2B_{max}f(1+M)}{D\\,M^{2}}}=\\frac{M}{1+M}.\n$$\n此结果通过对透镜方程进行线性化，使用了近轴近似和小景深假设。", "answer": "$$\\boxed{\\frac{M}{1+M}}$$", "id": "2257807"}, {"introduction": "在实际的光学工程中，验证制造出的镜头是否符合其设计规格是至关重要的一步。本练习让您扮演一位光学工程师，任务是设计一种实验方法来测量镜头的像方远心度。您将利用简单的离焦图像尺寸变化数据，来计算出射光瞳的位置——这是判断系统远心特性的关键。[@problem_id:2257808]", "problem": "一位光学工程师负责验证一个用于高精度制造检测系统中的密封镜头组件的规格。其关键规格是该镜头应近乎像方远心。为了对此进行量化，该工程师设计了一个实验来测量镜头出射光瞳的位置。\n\n实验过程如下：在镜头前放置一个物体，并放置一个高分辨率数字传感器来捕获图像。传感器安装在一个可沿光轴（$z$轴）移动的精密位移平台上。位置 $z=0$ 定义为形成最清晰图像的平面（标称像面）。\n\n首先，当传感器位于 $z=0$ 时，工程师测量图像上两个不同点之间的间距，测得其值为 $h_i = 4.000 \\text{ mm}$。\n\n接下来，传感器沿光轴远离镜头移动到一个新位置 $z = \\Delta z$，其中 $\\Delta z = 15.00 \\text{ mm}$。在这个新的、离焦的位置上，同两个（现在变得模糊的）点的中心之间的间距被测得为 $h'_i = 4.030 \\text{ mm}$。\n\n假设视场中所有点的主光线看起来都源自于同一个有效的出射光瞳，请计算该出射光瞳到标称像面的距离。正距离表示出射光瞳位于像面“之后”（离镜头更远），而负距离表示它位于像面“之前”（在镜头和像面之间）。\n\n以毫米为单位表示你的答案，并保留三位有效数字。", "solution": "定义像方坐标系，其中标称像面位于 $z=0$，光轴沿 $z$ 轴，$z$ 值沿远离镜头的方向增加。设出射光瞳位于光轴上 $z=z_{p}$ 的位置，其中 $z_{p}$ 是其到像面的未知距离。对于一个给定的视场点，其在 $z=0$ 处的清晰像位于横向坐标 $x_{0}$，则其在像方的主光线是连接出射光瞳 $(x,z)=(0,z_{p})$ 和清晰像点 $(x,z)=(x_{0},0)$ 的直线。这条线的方程给出了在任意平面 $z$ 处的横向坐标\n$$\nx(z)=x_{0}\\left(1-\\frac{z}{z_{p}}\\right).\n$$\n因此，对于在 $z=0$ 处间距为 $h_{i}$ 的两个像点，它们在离焦平面 $z=\\Delta z$ 处的间距按相同的比例缩放：\n$$\nh'_{i}=h_{i}\\left(1-\\frac{\\Delta z}{z_{p}}\\right).\n$$\n求解 $z_{p}$：\n$$\n\\frac{h'_{i}}{h_{i}}=1-\\frac{\\Delta z}{z_{p}}\n\\;\\;\\Rightarrow\\;\\;\n\\frac{\\Delta z}{z_{p}}=1-\\frac{h'_{i}}{h_{i}}\n\\;\\;\\Rightarrow\\;\\;\nz_{p}=\\frac{\\Delta z}{1-\\frac{h'_{i}}{h_{i}}}.\n$$\n代入测量值 $\\Delta z=15.00\\ \\text{mm}$、$h_{i}=4.000\\ \\text{mm}$ 和 $h'_{i}=4.030\\ \\text{mm}$：\n$$\n\\frac{h'_{i}}{h_{i}}=\\frac{4.030}{4.000}=1.0075,\\quad\n1-\\frac{h'_{i}}{h_{i}}=-0.0075,\n$$\n$$\nz_{p}=\\frac{15.00}{-0.0075}=-2000\\ \\text{mm}.\n$$\n根据既定的符号约定，这个负值表示出射光瞳位于标称像面之前（在镜头和像面之间）。四舍五入到三位有效数字，该距离为 $-2.00\\times 10^{3}\\ \\text{mm}$。", "answer": "$$\\boxed{-2.00 \\times 10^{3}}$$", "id": "2257808"}]}
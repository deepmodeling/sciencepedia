{
    "hands_on_practices": [
        {
            "introduction": "Before we can calculate the current in a diode, we must first understand how minority carriers behave once they are injected across the junction. This exercise guides you through deriving the spatial profile of these excess carriers, revealing the fundamental length scale—the diffusion length $L_p$—that governs this process. Understanding this exponential decay  is the first step toward building the ideal diode model from the ground up.",
            "id": "3779583",
            "problem": "Consider a long, uniformly doped, one-dimensional, quasi-neutral region of an $n$-type semiconductor adjacent to a depletion edge at $x=0$, under steady forward bias such that there is low-level injection of minority carriers (holes) into the quasi-neutral region for $x>0$. Assume temperature is uniform, the electric field in the quasi-neutral region is negligible, transport is one-dimensional, and the system is in steady state. Starting from the steady-state hole continuity equation with bulk Shockley-Read-Hall recombination and Fick’s law for diffusion, derive the spatial form of the excess hole concentration profile $\\Delta p(x)$ for $x \\ge 0$ and identify the characteristic length scale that governs the decay of $\\Delta p(x)$ away from the edge. Express this characteristic length in terms of the microscopic parameters that appear in your governing equations.\n\nThen, for parameters $D_p = 12$ cm$^2$/s and $\\tau_p = 2$ $\\mu$s, compute the characteristic length and denote it as $L_p$. Using your derived profile, evaluate the ratio $\\Delta p(2 L_p)/\\Delta p(0)$ as a pure number. Express $L_p$ in micrometers and the ratio as a dimensionless decimal. Round both reported values to four significant figures.",
            "solution": "The problem requires the derivation of the excess minority carrier concentration profile, $\\Delta p(x)$, in a long, $n$-type, quasi-neutral semiconductor region under low-level injection. This derivation begins with the fundamental hole continuity equation.\n\nThe one-dimensional continuity equation for holes is given by:\n$$\n\\frac{\\partial p}{\\partial t} = -\\frac{1}{q} \\frac{\\partial J_p}{\\partial x} - U_p\n$$\nwhere $p$ is the total hole concentration, $t$ is time, $q$ is the elementary charge, $J_p$ is the hole current density, and $U_p$ is the net recombination rate per unit volume.\n\nWe apply the assumptions given in the problem statement:\n1.  **Steady state:** The system does not change with time, so $\\frac{\\partial p}{\\partial t} = 0$.\n2.  **Negligible electric field in the quasi-neutral region:** The hole current is driven solely by diffusion. Fick's first law describes this current:\n    $$\n    J_p = -q D_p \\frac{d p}{d x}\n    $$\n    where $D_p$ is the hole diffusion coefficient.\n3.  **Low-level injection with Shockley-Read-Hall (SRH) recombination:** Under low-level injection in an $n$-type material, the net recombination rate is proportional to the excess minority carrier concentration. Let $p_0$ be the equilibrium hole concentration. The total hole concentration is $p(x) = p_0 + \\Delta p(x)$, where $\\Delta p(x)$ is the excess hole concentration. The net recombination rate is:\n    $$\n    U_p = \\frac{p(x) - p_0}{\\tau_p} = \\frac{\\Delta p(x)}{\\tau_p}\n    $$\n    where $\\tau_p$ is the minority carrier lifetime for holes.\n\nSubstituting these expressions into the steady-state continuity equation:\n$$\n0 = -\\frac{1}{q} \\frac{d}{dx} \\left( -q D_p \\frac{dp}{dx} \\right) - \\frac{\\Delta p(x)}{\\tau_p}\n$$\nSince $p(x) = p_0 + \\Delta p(x)$ and $p_0$ is constant (uniform doping), $\\frac{dp}{dx} = \\frac{d(\\Delta p)}{dx}$. The equation simplifies to:\n$$\n0 = D_p \\frac{d^2(\\Delta p)}{dx^2} - \\frac{\\Delta p(x)}{\\tau_p}\n$$\nAssuming the diffusion coefficient $D_p$ is constant, we rearrange this into a standard second-order linear homogeneous ordinary differential equation:\n$$\n\\frac{d^2(\\Delta p)}{dx^2} - \\frac{1}{D_p \\tau_p} \\Delta p(x) = 0\n$$\nWe define a characteristic length, the minority carrier diffusion length $L_p$, as:\n$$\nL_p = \\sqrt{D_p \\tau_p}\n$$\nSubstituting $L_p$ into the differential equation yields:\n$$\n\\frac{d^2(\\Delta p)}{dx^2} - \\frac{\\Delta p(x)}{L_p^2} = 0\n$$\nThe general solution to this equation is:\n$$\n\\Delta p(x) = A \\exp\\left(\\frac{x}{L_p}\\right) + B \\exp\\left(-\\frac{x}{L_p}\\right)\n$$\nTo find the constants $A$ and $B$, we apply boundary conditions. The region is described as \"long\", which implies that far from the injection point at $x=0$, the excess carrier concentration decays to zero.\n1.  As $x \\to \\infty$, $\\Delta p(x) \\to 0$. For this condition to be met, the term $A \\exp(x/L_p)$, which grows infinitely, must be eliminated. This requires $A=0$.\n2.  At the edge of the depletion region, $x=0$, the excess hole concentration has a certain value, which we denote as $\\Delta p(0)$.\n    $$\n    \\Delta p(0) = B \\exp(-0) = B\n    $$\nThus, the specific solution for the excess hole concentration profile is:\n$$\n\\Delta p(x) = \\Delta p(0) \\exp\\left(-\\frac{x}{L_p}\\right) \\quad \\text{for } x \\ge 0\n$$\nThe characteristic length scale that governs the exponential decay of $\\Delta p(x)$ is the hole diffusion length, $L_p$, which is expressed in terms of the microscopic parameters as $L_p = \\sqrt{D_p \\tau_p}$.\n\nNext, we compute the numerical values requested. The given parameters are $D_p = 12 \\text{ cm}^2/\\text{s}$ and $\\tau_p = 2 \\text{ }\\mu\\text{s} = 2 \\times 10^{-6} \\text{ s}$.\n\nFirst, we calculate the characteristic length $L_p$:\n$$\nL_p = \\sqrt{D_p \\tau_p} = \\sqrt{(12 \\text{ cm}^2/\\text{s}) \\times (2 \\times 10^{-6} \\text{ s})} = \\sqrt{24 \\times 10^{-6} \\text{ cm}^2}\n$$\n$$\nL_p = \\sqrt{24} \\times 10^{-3} \\text{ cm} \\approx 4.898979 \\times 10^{-3} \\text{ cm}\n$$\nTo express this in micrometers, we use the conversion $1 \\text{ cm} = 10^4 \\text{ }\\mu\\text{m}$:\n$$\nL_p \\approx (4.898979 \\times 10^{-3}) \\times 10^4 \\text{ }\\mu\\text{m} = 48.98979 \\text{ }\\mu\\text{m}\n$$\nRounding to four significant figures, we get $L_p = 48.99 \\text{ }\\mu\\text{m}$.\n\nSecond, we evaluate the ratio $\\Delta p(2 L_p) / \\Delta p(0)$. Using the derived profile:\n$$\n\\frac{\\Delta p(2 L_p)}{\\Delta p(0)} = \\frac{\\Delta p(0) \\exp\\left(-\\frac{2L_p}{L_p}\\right)}{\\Delta p(0)} = \\exp(-2)\n$$\nCalculating the numerical value:\n$$\n\\exp(-2) \\approx 0.13533528...\n$$\nRounding to four significant figures, the ratio is $0.1353$.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n48.99 & 0.1353\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "With an understanding of the minority carrier distribution, we can now calculate the diffusion current that flows as a result. This practice connects microscopic material properties and the carrier profile to a key parameter in the ideal diode equation: the reverse saturation current, $I_s$. By deriving and calculating $I_s$ , you will solidify the link between fundamental semiconductor physics and the macroscopic behavior of the device.",
            "id": "3779548",
            "problem": "A single-sided, abrupt silicon $p^{+}$-$n$ junction diode is operated under the conditions for which the Shockley ideal diode model applies: one-dimensional transport, low-level injection, negligible electric field in the quasi-neutral regions, negligible recombination-generation in the depletion region, and negligible surface recombination at the contacts. The $p$-side is degenerately doped so that $N_{A} \\gg N_{D}$, making the hole minority-carrier current injected into the $n$-region dominate the reverse-saturation current. The device parameters are: junction area $A=10^{-4}\\ \\mathrm{cm^2}$, donor concentration on the $n$-side $N_{D}=10^{16}\\ \\mathrm{cm^{-3}}$, hole diffusivity in the $n$-region $D_{p}=10\\ \\mathrm{cm^2/s}$, hole lifetime in the $n$-region $\\tau_{p}=1\\ \\mathrm{\\mu s}$, intrinsic carrier concentration $n_{i}=10^{10}\\ \\mathrm{cm^{-3}}$, and temperature $T=300\\ \\mathrm{K}$.\n\nStarting from the steady-state minority-carrier continuity equation in the $n$-region under low-level injection and the relation between equilibrium minority-carrier density and intrinsic carrier concentration, derive the expression for the reverse-saturation current $I_{s}$ contributed by holes injected from the $p^{+}$ side into the $n$-region. Then, evaluate $I_{s}$ numerically using the given parameters. Use the elementary charge $q$ and Boltzmann constant $k_{B}$ symbolically in your derivation, and apply the appropriate boundary conditions at the edge of the depletion region for an ideal diode. Round your final numerical answer to four significant figures and express it in amperes (A).",
            "solution": "The problem asks for the derivation and numerical calculation of the reverse-saturation current, $I_{s}$, for a single-sided abrupt $p^{+}$-$n$ silicon junction diode. The analysis is based on the Shockley ideal diode model. The problem states that the $p$-side is degenerately doped ($N_A \\gg N_D$), which implies that the current is dominated by the injection of holes (minority carriers) from the $p^{+}$-region into the $n$-region. We can therefore neglect the electron injection current from the $n$-region into the $p^{+}$-region.\n\nOur derivation begins with the steady-state minority-carrier continuity equation for holes in the $n$-type quasi-neutral region (QNR). In one dimension, under steady-state conditions ($\\frac{\\partial p_n}{\\partial t} = 0$), and with no external generation sources like light, the equation is:\n$$ D_p \\frac{d^2 p_n(x)}{dx^2} - \\frac{p_n(x) - p_{n0}}{\\tau_p} = 0 $$\nwhere $p_n(x)$ is the total hole concentration at position $x$ in the $n$-QNR, $p_{n0}$ is the equilibrium hole concentration, $D_p$ is the hole diffusivity, and $\\tau_p$ is the hole minority-carrier lifetime. The origin, $x=0$, is set at the boundary between the depletion region and the $n$-QNR.\n\nIt is convenient to work with the excess minority-carrier concentration, defined as $\\delta p_n(x) = p_n(x) - p_{n0}$. Substituting this into the continuity equation, and noting that $\\frac{d^2 p_{n0}}{dx^2} = 0$ since $p_{n0}$ is a constant, we obtain the minority-carrier diffusion equation:\n$$ D_p \\frac{d^2(\\delta p_n(x))}{dx^2} - \\frac{\\delta p_n(x)}{\\tau_p} = 0 $$\nThis can be rewritten as:\n$$ \\frac{d^2(\\delta p_n(x))}{dx^2} - \\frac{\\delta p_n(x)}{L_p^2} = 0 $$\nwhere $L_p = \\sqrt{D_p \\tau_p}$ is the minority-carrier diffusion length for holes. This is a second-order, linear, homogeneous ordinary differential equation, whose general solution is:\n$$ \\delta p_n(x) = C_1 \\exp\\left(\\frac{x}{L_p}\\right) + C_2 \\exp\\left(-\\frac{x}{L_p}\\right) $$\nTo find the constants $C_1$ and $C_2$, we apply two boundary conditions.\n\nThe first boundary condition is at the edge of the depletion region, $x=0$. According to the \"law of the junction,\" the minority-carrier concentration at this boundary is modulated by the applied bias voltage $V_A$:\n$$ p_n(0) = p_{n0} \\exp\\left(\\frac{qV_A}{k_B T}\\right) $$\nThus, the excess concentration at $x=0$ is:\n$$ \\delta p_n(0) = p_n(0) - p_{n0} = p_{n0} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right) $$\n\nThe second boundary condition is deep inside the $n$-QNR. Assuming a long-base diode (i.e., the width of the $n$-region is much greater than $L_p$), the excess carriers must recombine and their concentration must vanish far from the junction:\n$$ \\lim_{x \\to \\infty} \\delta p_n(x) = 0 $$\nApplying this condition to the general solution, the term $C_1 \\exp(\\frac{x}{L_p})$ would diverge as $x \\to \\infty$. Therefore, its coefficient $C_1$ must be zero. The solution simplifies to:\n$$ \\delta p_n(x) = C_2 \\exp\\left(-\\frac{x}{L_p}\\right) $$\nNow, applying the first boundary condition at $x=0$:\n$$ \\delta p_n(0) = C_2 \\exp(0) = C_2 $$\nSo, we have $C_2 = p_{n0} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right)$. The final expression for the excess hole concentration profile in the $n$-QNR is:\n$$ \\delta p_n(x) = p_{n0} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right) \\exp\\left(-\\frac{x}{L_p}\\right) $$\n\nNext, we find the hole current. In the QNR, the electric field is assumed to be negligible, so the current is driven purely by diffusion. The hole current density, $J_p(x)$, is given by Fick's first law:\n$$ J_p(x) = -q D_p \\frac{d p_n(x)}{dx} = -q D_p \\frac{d(\\delta p_n(x))}{dx} $$\nDifferentiating $\\delta p_n(x)$ with respect to $x$:\n$$ \\frac{d(\\delta p_n(x))}{dx} = p_{n0} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right) \\left(-\\frac{1}{L_p}\\right) \\exp\\left(-\\frac{x}{L_p}\\right) $$\nSubstituting this derivative into the expression for $J_p(x)$:\n$$ J_p(x) = -q D_p \\left[ p_{n0} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right) \\left(-\\frac{1}{L_p}\\right) \\exp\\left(-\\frac{x}{L_p}\\right) \\right] $$\n$$ J_p(x) = \\frac{q D_p p_{n0}}{L_p} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right) \\exp\\left(-\\frac{x}{L_p}\\right) $$\nThe total current is found by evaluating the current density at the edge of the depletion region, $x=0$, and multiplying by the cross-sectional area $A$. Since recombination in the depletion region is neglected, this current is constant throughout the device.\n$$ I = I_p(x=0) = A \\cdot J_p(x=0) = A \\frac{q D_p p_{n0}}{L_p} \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right) $$\nThis expression has the form of the Shockley ideal diode equation, $I = I_s \\left( \\exp\\left(\\frac{qV_A}{k_B T}\\right) - 1 \\right)$. By comparison, we identify the reverse-saturation current $I_s$ as:\n$$ I_s = A \\frac{q D_p p_{n0}}{L_p} $$\nThe equilibrium minority-carrier concentration, $p_{n0}$, can be expressed in terms of the intrinsic carrier concentration $n_i$ and the donor doping concentration $N_D$ using the law of mass action ($np = n_i^2$). In the $n$-type semiconductor at equilibrium, the majority carrier concentration is $n_{n0} \\approx N_D$. Thus:\n$$ p_{n0} = \\frac{n_i^2}{n_{n0}} \\approx \\frac{n_i^2}{N_D} $$\nSubstituting for $p_{n0}$ and $L_p = \\sqrt{D_p \\tau_p}$ into the expression for $I_s$:\n$$ I_s = A q \\frac{D_p}{\\sqrt{D_p \\tau_p}} \\frac{n_i^2}{N_D} = A q \\frac{\\sqrt{D_p}}{\\sqrt{\\tau_p}} \\frac{n_i^2}{N_D} $$\nThe final derived expression for the reverse-saturation current is:\n$$ I_s = A q n_i^2 \\frac{1}{N_D} \\sqrt{\\frac{D_p}{\\tau_p}} $$\n\nNow, we proceed with the numerical evaluation using the provided parameters:\n- $A = 10^{-4}\\ \\mathrm{cm^2}$\n- $q = 1.602 \\times 10^{-19}\\ \\mathrm{C}$\n- $N_D = 10^{16}\\ \\mathrm{cm^{-3}}$\n- $D_p = 10\\ \\mathrm{cm^2/s}$\n- $\\tau_p = 1\\ \\mathrm{\\mu s} = 10^{-6}\\ \\mathrm{s}$\n- $n_i = 10^{10}\\ \\mathrm{cm^{-3}}$\n\nSubstituting these values into the derived formula:\n$$ I_s = (10^{-4}) (1.602 \\times 10^{-19}) (10^{10})^2 \\left(\\frac{1}{10^{16}}\\right) \\sqrt{\\frac{10}{10^{-6}}} $$\nThe units are $(\\mathrm{cm^2}) \\cdot (\\mathrm{C}) \\cdot (\\mathrm{cm^{-6}}) \\cdot (\\mathrm{cm^3}) \\cdot \\sqrt{(\\mathrm{cm^2/s})/(\\mathrm{s})} = \\mathrm{C} \\cdot \\mathrm{s^{-1}} = \\mathrm{A}$.\n$$ I_s = (1.602 \\times 10^{-19}) \\cdot (10^{-4}) \\cdot (10^{20}) \\cdot (10^{-16}) \\cdot \\sqrt{10^7} \\ \\mathrm{A} $$\n$$ I_s = (1.602 \\times 10^{-19}) \\cdot 10^{-4+20-16} \\cdot \\sqrt{10 \\times 10^6} \\ \\mathrm{A} $$\n$$ I_s = (1.602 \\times 10^{-19}) \\cdot 10^0 \\cdot (\\sqrt{10} \\times 10^3) \\ \\mathrm{A} $$\n$$ I_s = 1.602 \\times \\sqrt{10} \\times 10^{-16} \\ \\mathrm{A} $$\nUsing $\\sqrt{10} \\approx 3.16227766$:\n$$ I_s \\approx 1.602 \\times 3.16227766 \\times 10^{-16} \\ \\mathrm{A} $$\n$$ I_s \\approx 5.0659688 \\times 10^{-16} \\ \\mathrm{A} $$\nRounding the final result to four significant figures as requested:\n$$ I_s \\approx 5.066 \\times 10^{-16} \\ \\mathrm{A} $$\nThis is the numerically evaluated reverse-saturation current.",
            "answer": "$$\\boxed{5.066 \\times 10^{-16}}$$"
        },
        {
            "introduction": "The ideal diode model provides a powerful framework, but real devices always include parasitic effects, such as series resistance from the bulk semiconductor and contacts. This final exercise bridges the gap between theory and practice by incorporating series resistance, which turns the explicit I-V equation into a transcendental one . You will implement a numerical solver to compute the current in a more realistic diode, highlighting the significant impact of series resistance on device performance, especially at high forward bias.",
            "id": "3779549",
            "problem": "You are asked to derive and compute the direct current for a one-dimensional, low-level injection, long quasi-neutral region, abrupt junction diode operated under steady-state conditions, neglecting recombination-generation in the space-charge region and assuming nondegenerate semiconductors obeying Maxwell–Boltzmann statistics. Start from the drift–diffusion current relations, the minority-carrier continuity equations under steady-state, and the Einstein relation, and use quasi-Fermi level splitting to relate carrier boundary conditions at the depletion region edges to the applied junction drop. Under these assumptions, the terminal current is controlled by the difference of minority-carrier diffusion fluxes injected across the depletion edges and is exponentially sensitive to the junction voltage. When an ohmic series resistance is present in the external circuit, the externally applied voltage equals the sum of the junction drop and the ohmic drop. Your tasks are:\n\n1) From the steady-state continuity equations, drift–diffusion laws, and the Einstein relation, and using appropriate depletion-edge boundary conditions set by quasi-Fermi level separation, derive the current–voltage relation of the ideal junction (no series resistance) in closed form as a function of the applied voltage. Express your answer in amperes.\n\n2) With a nonzero series resistance, express the externally applied voltage as the sum of the junction drop and the ohmic drop, and derive the implicit current relation that must be solved to obtain the terminal current as a function of the applied voltage. Explain why the resulting equation is transcendental in the current and must be solved numerically. Express your answer in amperes.\n\n3) Implement a robust numerical procedure to compute the terminal current given the external voltage and series resistance by solving the implicit equation from part (2). Your procedure must handle both forward and reverse bias without overflow or loss of robustness and must select a mathematically justified bracketing interval for the root based only on the given parameters. Also implement the closed-form current from part (1) for the zero-resistance ideal case. Use the elementary physical constants $k_{\\mathrm{B}}$ (Boltzmann constant), $q$ (elementary charge), and absolute temperature $T$ to obtain the thermal voltage $V_{\\mathrm{T}}=k_{\\mathrm{B}} T / q$.\n\nUse the following parameter values for all computations:\n- Saturation current $I_{\\mathrm{s}} = 10^{-12}\\ \\mathrm{A}$,\n- Series resistance $R_{\\mathrm{s}} = 2\\ \\Omega$ (for the series-resistance case),\n- Temperature $T = 300\\ \\mathrm{K}$,\n- Ideality factor $n = 1$ (diffusion-limited transport, no generation–recombination in the depletion region),\n- Boltzmann constant $k_{\\mathrm{B}} = 1.380649\\times 10^{-23}\\ \\mathrm{J/K}$,\n- Elementary charge $q = 1.602176634\\times 10^{-19}\\ \\mathrm{C}$.\n\nCompute the currents for the following external voltages (test suite), expressed in volts:\n- Small forward bias: $V = 0.01$,\n- Typical forward bias: $V = 0.70$,\n- Reverse bias: $V = -0.20$,\n- Strong forward bias: $V = 0.90$.\n\nFor each value of $V$ in the test suite, compute:\n- The current with series resistance included by numerically solving the implicit equation you derived in part (2). Express the result in amperes.\n- The ideal current corresponding to zero series resistance using the closed-form from part (1). Express the result in amperes.\n- The difference between these two currents (series-resistance current minus ideal current), in amperes.\n\nYour program must produce a single line of output containing all results aggregated as a comma-separated list enclosed in square brackets. The values must be ordered by the voltages listed above, and for each voltage appear as three consecutive floats in the order: current with series resistance (in amperes), ideal current (in amperes), and their difference (in amperes). For example, the output format must be:\n\"[I_sr(V1),I_ideal(V1),delta(V1),I_sr(V2),I_ideal(V2),delta(V2),I_sr(V3),I_ideal(V3),delta(V3),I_sr(V4),I_ideal(V4),delta(V4)]\".\n\nAll currents must be expressed in amperes as decimal floating-point numbers.",
            "solution": "The problem statement has been critically validated and is deemed to be scientifically grounded, well-posed, and internally consistent. It poses a standard, non-trivial problem in semiconductor device physics, combining a theoretical derivation with a numerical implementation. All necessary parameters and conditions are provided, and no contradictions or fallacies are present. We may therefore proceed with a formal solution.\n\nThe analysis is partitioned into three sections as requested: the derivation of the current-voltage ($I$-$V$) relation for an ideal junction, the modification of this relation to include series resistance, and the formulation of a numerical procedure to compute the terminal current.\n\n**1. Derivation of the Ideal Diode Current-Voltage Relation**\n\nThe terminal current $I$ of a p-n junction diode under the specified assumptions is the sum of the minority electron current injected into the p-side and the minority hole current injected into the n-side. These currents are evaluated at the edges of the space-charge region (SCR). We assume no carrier generation or recombination occurs within the SCR.\n\nThe transport of minority carriers in the quasi-neutral regions (QNRs) is governed by the steady-state continuity equations. For electrons in the p-type QNR and holes in the n-type QNR, these are:\n$$\n\\frac{dJ_n}{dx} = q \\frac{n_p - n_{p0}}{\\tau_n}\n$$\n$$\n\\frac{dJ_p}{dx} = -q \\frac{p_n - p_{n0}}{\\tau_p}\n$$\nHere, $J_n$ and $J_p$ are the electron and hole current densities, $q$ is the elementary charge, $n_p$ ($p_n$) is the minority electron (hole) concentration, $n_{p0}$ ($p_{n0}$) is the equilibrium minority concentration, and $\\tau_n$ ($\\tau_p$) is the minority carrier lifetime.\n\nUnder the low-level injection assumption, the electric field in the QNRs is negligible, and the minority carrier current is dominated by diffusion:\n$$\nJ_n(x) \\approx q D_n \\frac{dn_p}{dx}\n$$\n$$\nJ_p(x) \\approx -q D_p \\frac{dp_n}{dx}\n$$\nwhere $D_n$ and $D_p$ are the minority carrier diffusion coefficients. Substituting these into the continuity equations yields the minority carrier diffusion equations for the excess carrier concentrations $\\Delta n_p(x) = n_p(x) - n_{p0}$ and $\\Delta p_n(x) = p_n(x) - p_{n0}$:\n$$\n\\frac{d^2(\\Delta n_p)}{dx^2} = \\frac{\\Delta n_p}{D_n \\tau_n} = \\frac{\\Delta n_p}{L_n^2}\n$$\n$$\n\\frac{d^2(\\Delta p_n)}{dx^2} = \\frac{\\Delta p_n}{D_p \\tau_p} = \\frac{\\Delta p_n}{L_p^2}\n$$\nwhere $L_n = \\sqrt{D_n \\tau_n}$ and $L_p = \\sqrt{D_p \\tau_p}$ are the minority carrier diffusion lengths.\n\nLet the p-side QNR extend from $x = -\\infty$ to the depletion edge at $x = -x_p$, and the n-side QNR from $x = x_n$ to $x = \\infty$. The boundary conditions are:\n1.  Far from the junction (in the \"long diode\"), the excess carrier concentrations decay to zero:\n    $$\n    \\Delta n_p(-\\infty) = 0 \\quad \\text{and} \\quad \\Delta p_n(+\\infty) = 0\n    $$\n2.  At the depletion region edges, the minority carrier concentrations are determined by the applied junction voltage $V_j$ according to the \"law of the junction,\" which arises from quasi-Fermi level splitting:\n    $$\n    n_p(-x_p) = n_{p0} e^{qV_j / (nk_{\\mathrm{B}}T)}\n    $$\n    $$\n    p_n(x_n) = p_{n0} e^{qV_j / (nk_{\\mathrm{B}}T)}\n    $$\n    The problem specifies an ideality factor $n=1$ and provides the physical constants $k_{\\mathrm{B}}$ and $q$. We define the thermal voltage as $V_{\\mathrm{T}} = k_{\\mathrm{B}}T/q$. The excess concentrations at the boundaries are therefore:\n    $$\n    \\Delta n_p(-x_p) = n_{p0} \\left( e^{V_j / V_{\\mathrm{T}}} - 1 \\right)\n    $$\n    $$\n    \\Delta p_n(x_n) = p_{n0} \\left( e^{V_j / V_{\\mathrm{T}}} - 1 \\right)\n    $$\n\nThe solutions to the diffusion equations satisfying these boundary conditions are decaying exponentials:\n$$\n\\Delta n_p(x) = \\Delta n_p(-x_p) e^{(x+x_p)/L_n} \\quad \\text{for } x \\le -x_p\n$$\n$$\n\\Delta p_n(x) = \\Delta p_n(x_n) e^{-(x-x_n)/L_p} \\quad \\text{for } x \\ge x_n\n$$\n\nThe minority carrier currents at the depletion edges are found by differentiation:\n$$\nI_n(-x_p) = A \\cdot J_n(-x_p) = A q D_n \\left. \\frac{d(\\Delta n_p)}{dx} \\right|_{x=-x_p} = A q \\frac{D_n}{L_n} \\Delta n_p(-x_p)\n$$\n$$\nI_p(x_n) = A \\cdot J_p(x_n) = A (-q D_p) \\left. \\frac{d(\\Delta p_n)}{dx} \\right|_{x=x_n} = A q \\frac{D_p}{L_p} \\Delta p_n(x_n)\n$$\nwhere $A$ is the cross-sectional area of the junction.\n\nThe total current $I$ is the sum $I = I_n(-x_p) + I_p(x_n)$. Substituting the expressions for the excess boundary concentrations gives:\n$$\nI = \\left( A q \\frac{D_n}{L_n} n_{p0} + A q \\frac{D_p}{L_p} p_{n0} \\right) \\left( e^{V_j / V_{\\mathrm{T}}} - 1 \\right)\n$$\nThe term in the first parenthesis is the reverse saturation current, $I_{\\mathrm{s}}$. The problem provides this value directly. Thus, the current is a function of the junction voltage $V_j$:\n$$\nI = I_{\\mathrm{s}} \\left( e^{V_j / V_{\\mathrm{T}}} - 1 \\right)\n$$\nFor an ideal diode with no series resistance ($R_{\\mathrm{s}}=0$), the junction voltage $V_j$ is equal to the externally applied terminal voltage $V$. The final closed-form relation is:\n$$\nI_{\\mathrm{ideal}}(V) = I_{\\mathrm{s}} \\left( e^{V / V_{\\mathrm{T}}} - 1 \\right)\n$$\n\n**2. Implicit Relation with Series Resistance**\n\nWhen a series resistance $R_{\\mathrm{s}}$ is present, the externally applied voltage $V$ is distributed between the voltage drop across the ideal junction, $V_j$, and the ohmic drop across the resistance, $I R_{\\mathrm{s}}$.\n$$\nV = V_j + I R_{\\mathrm{s}}\n$$\nThe current $I$ is still governed by the junction physics, so it depends on the junction voltage $V_j$ as derived above: $I = I_{\\mathrm{s}}(e^{V_j / V_{\\mathrm{T}}} - 1)$. To relate the terminal current $I$ to the terminal voltage $V$, we eliminate the internal variable $V_j$. From the voltage balance equation, we have $V_j = V - I R_{\\mathrm{s}}$. Substituting this into the diode equation yields the implicit relation for the current:\n$$\nI = I_{\\mathrm{s}} \\left( e^{(V - I R_{\\mathrm{s}}) / V_{\\mathrm{T}}} - 1 \\right)\n$$\nThis equation is transcendental because the unknown variable $I$ appears both as a linear term (on the left-hand side) and within the argument of a nonlinear exponential function. There is no sequence of elementary algebraic operations that can isolate $I$ to yield a closed-form solution of the form $I = f(V, R_{\\mathrm{s}}, I_{\\mathrm{s}}, V_{\\mathrm{T}})$. Consequently, this equation must be solved for $I$ using numerical root-finding techniques.\n\n**3. Numerical Computation Procedure**\n\nTo compute the current $I$ for the case with series resistance, we must find the root of the following function for a given applied voltage $V$:\n$$\nf(I) = I - I_{\\mathrm{s}} \\left( e^{(V - I R_{\\mathrm{s}}) / V_{\\mathrm{T}}} - 1 \\right) = 0\n$$\nA robust method for this task is the Brent-Dekker algorithm, which is guaranteed to find a root if provided with a bracketing interval $[I_a, I_b]$ such that $f(I_a)$ and $f(I_b)$ have opposite signs. A mathematically justified bracket can be derived from physical principles.\n\n**Bracketing Interval Selection:**\n\n1.  **Lower Bound ($I_a$):** In strong reverse bias, the exponential term approaches $0$, and the current $I$ approaches $-I_{\\mathrm{s}}$. The current can never be more negative than $-I_{\\mathrm{s}}$. Let's choose $I_a = -I_{\\mathrm{s}}$ as the lower bound and evaluate the function $f(I_a)$:\n    $$\n    f(-I_{\\mathrm{s}}) = -I_{\\mathrm{s}} - I_{\\mathrm{s}} \\left( e^{(V - (-I_{\\mathrm{s}}) R_{\\mathrm{s}}) / V_{\\mathrm{T}}} - 1 \\right) = -I_{\\mathrm{s}} e^{(V + I_{\\mathrm{s}} R_{\\mathrm{s}}) / V_{\\mathrm{T}}}\n    $$\n    Since $I_{\\mathrm{s}} > 0$ and the exponential function is always positive, $f(-I_{\\mathrm{s}})$ is always negative. This provides a universally valid lower bound for the root-finding interval.\n\n2.  **Upper Bound ($I_b$):** The choice of the upper bound depends on the sign of the applied voltage $V$.\n    -   **Forward Bias ($V > 0$):** The current $I$ is positive. For current to flow, the junction voltage $V_j = V - I R_{\\mathrm{s}}$ must be positive. This implies $I R_{\\mathrm{s}} < V$, or $I < V / R_{\\mathrm{s}}$. The current is physically bounded by $V / R_{\\mathrm{s}}$. Let's select $I_b = V / R_{\\mathrm{s}}$ as the upper bound.\n        $$\n        f(V/R_{\\mathrm{s}}) = \\frac{V}{R_{\\mathrm{s}}} - I_{\\mathrm{s}} \\left( e^{(V - (V/R_{\\mathrm{s}}) R_{\\mathrm{s}}) / V_{\\mathrm{T}}} - 1 \\right) = \\frac{V}{R_{\\mathrm{s}}} - I_{\\mathrm{s}} \\left( e^0 - 1 \\right) = \\frac{V}{R_{\\mathrm{s}}}\n        $$\n        For $V > 0$, $f(V/R_{\\mathrm{s}})$ is positive. Therefore, for forward bias, a valid bracket is $[-I_{\\mathrm{s}}, V/R_{\\mathrm{s}}]$.\n    -   **Reverse Bias ($V < 0$):** The current $I$ is negative and lies between $-I_{\\mathrm{s}}$ and $0$. Let's select $I_b = 0$ as the upper bound.\n        $$\n        f(0) = 0 - I_{\\mathrm{s}} \\left( e^{(V - 0) / V_{\\mathrm{T}}} - 1 \\right) = I_{\\mathrm{s}} \\left( 1 - e^{V / V_{\\mathrm{T}}} \\right)\n        $$\n        For $V < 0$, the term $V / V_{\\mathrm{T}}$ is negative, so $e^{V / V_{\\mathrm{T}}} < 1$. This makes $f(0)$ positive. Therefore, for reverse bias, a valid bracket is $[-I_{\\mathrm{s}}, 0]$.\n    -   **Zero Bias ($V = 0$):** In this case, the equation is $I = I_{\\mathrm{s}} \\left( e^{-I R_{\\mathrm{s}} / V_{\\mathrm{T}}} - 1 \\right)$. Inspection shows that the only physical solution is $I=0$, which can be set directly without numerical solving.\n\nThis systematic approach provides a robust bracketing interval for all bias conditions, ensuring the convergence of the numerical solver.",
            "answer": "```python\nimport numpy as np\nfrom scipy.optimize import brentq\n\ndef solve():\n    \"\"\"\n    Derives and computes the DC current for a p-n junction diode with and without\n    series resistance, based on the ideal diode model.\n    \"\"\"\n\n    # --- Physical Constants and Model Parameters ---\n    # Saturation current in Amperes\n    I_s = 1.0e-12\n    # Series resistance in Ohms\n    R_s = 2.0\n    # Absolute temperature in Kelvin\n    T = 300.0\n    # Ideality factor (n=1 for pure diffusion current)\n    n = 1.0\n    # Boltzmann constant in J/K\n    k_B = 1.380649e-23\n    # Elementary charge in C\n    q = 1.602176634e-19\n\n    # --- Test Suite ---\n    # External applied voltages in Volts\n    test_voltages = [0.01, 0.70, -0.20, 0.90]\n\n    # --- Calculations ---\n    # Thermal voltage V_T = k_B * T / q\n    V_T = k_B * T / q\n\n    results = []\n    \n    for V in test_voltages:\n        # 1. Calculate the ideal current (no series resistance)\n        # I_ideal = I_s * (exp(V / (n*V_T)) - 1)\n        # Using np.exp for robust handling of large arguments.\n        # This calculation can yield large numbers for strong forward bias,\n        # representing the unphysical nature of the ideal model without resistance.\n        I_ideal = I_s * (np.exp(V / (n * V_T)) - 1)\n\n        # 2. Numerically solve for the current with series resistance\n        # The equation to solve is f(I) = 0, where:\n        # f(I) = I - I_s * (exp((V - I*R_s)/(n*V_T)) - 1)\n        \n        # Handle the V=0 case separately, as the root is trivially I=0.\n        if V == 0.0:\n            I_sr = 0.0\n        else:\n            # Define the function f(I) whose root we want to find.\n            # Using a lambda function for conciseness.\n            f = lambda I: I - I_s * (np.exp((V - I * R_s) / (n * V_T)) - 1)\n\n            # Establish a robust bracketing interval [I_a, I_b] for the root finder.\n            # The lower bound I_a = -I_s is always valid, as f(-I_s)  0.\n            I_a = -I_s\n\n            if V > 0:\n                # For forward bias, the current I must be  V/R_s.\n                # At I_b = V/R_s, f(I_b) = V/R_s > 0.\n                # This gives the bracket [-I_s, V/R_s].\n                I_b = V / R_s\n            else: # V  0\n                # For reverse bias, the current is between -I_s and 0.\n                # At I_b = 0, f(I_b) = I_s * (1 - exp(V/V_T)) > 0.\n                # This gives the bracket [-I_s, 0].\n                I_b = 0.0\n            \n            # Use scipy's brentq method for robust root finding within the bracket.\n            I_sr = brentq(f, I_a, I_b)\n\n        # 3. Calculate the difference between the two currents\n        delta_I = I_sr - I_ideal\n\n        results.extend([I_sr, I_ideal, delta_I])\n\n    # --- Output ---\n    # Print the results in the specified single-line format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n\n```"
        }
    ]
}
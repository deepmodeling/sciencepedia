{
    "hands_on_practices": [
        {
            "introduction": "Understanding the relationship between depletion capacitance and voltage is foundational to semiconductor device physics. This practice begins with the fundamental definition of small-signal capacitance, $C = \\mathrm{d}Q/\\mathrm{d}V$, and challenges you to derive the capacitance from a given charge-voltage relationship. By then deriving this relationship from first principles using Poisson's equation, you will gain a deep physical intuition for the parameters that govern the junction's behavior, particularly the built-in potential that sets the device's intrinsic voltage scale. ",
            "id": "3737928",
            "problem": "Consider a one-sided, abrupt, nondegenerate $p^{+}$–$n$ junction under the depletion approximation, operated quasi-statically so that the small-signal (incremental) response tracks the change in depletion width with applied bias. Let $V$ denote the applied bias referenced so that $V>0$ corresponds to reverse bias and $V<0$ to forward bias. Assume that the magnitude of the depletion-region space charge per unit area is given by the bias-dependent relation\n$$\nQ(V)=Q_{0}\\,\\sqrt{1+\\frac{V}{\\phi}},\n$$\nwhere $Q_{0}>0$ and $\\phi>0$ are constants independent of $V$, and $1+\\frac{V}{\\phi}>0$ over the bias range of interest. The small-signal depletion capacitance per unit area is defined by the fundamental incremental relation $C_{d}(V)=\\frac{\\mathrm{d}Q}{\\mathrm{d}V}$.\n\nTask:\n- Starting from the definition of small-signal capacitance $C_{d}(V)=\\frac{\\mathrm{d}Q}{\\mathrm{d}V}$, compute a closed-form analytic expression for $C_{d}(V)$ in terms of $Q_{0}$, $V$, and $\\phi$.\n- Using Poisson’s equation, charge neutrality, and boundary conditions for an abrupt junction under the depletion approximation, discuss how a voltage scale enters the dependence of depletion width on applied bias, and provide a physical interpretation of the parameter $\\phi$ in the given $Q(V)$, explicitly connecting it to the built-in barrier and doping-controlled depletion width scaling.\n\nProvide your final result for $C_{d}(V)$ as a single analytic expression. Do not substitute numerical values. Do not attach units in your final answer box.",
            "solution": "The problem asks for two things: first, to derive an expression for the small-signal depletion capacitance per unit area, $C_{d}(V)$, and second, to provide a physical interpretation of the parameter $\\phi$. The problem is well-posed and scientifically grounded in the standard theory of semiconductor p-n junctions.\n\n**Part 1: Derivation of the Small-Signal Depletion Capacitance $C_{d}(V)$**\n\nWe are given the magnitude of the depletion-region space charge per unit area as a function of the applied bias $V$:\n$$\nQ(V) = Q_{0} \\sqrt{1 + \\frac{V}{\\phi}}\n$$\nwhere $Q_{0}$ and $\\phi$ are positive constants. The applied bias $V$ is defined such that $V>0$ corresponds to reverse bias.\n\nThe small-signal depletion capacitance per unit area, $C_{d}(V)$, is defined as the derivative of the charge with respect to the voltage:\n$$\nC_{d}(V) = \\frac{\\mathrm{d}Q}{\\mathrm{d}V}\n$$\nTo compute this derivative, we can rewrite the expression for $Q(V)$ using a fractional exponent:\n$$\nQ(V) = Q_{0} \\left(1 + \\frac{V}{\\phi}\\right)^{1/2}\n$$\nNow, we apply the chain rule for differentiation. Let $u(V) = 1 + \\frac{V}{\\phi}$. Then $\\frac{\\mathrm{d}u}{\\mathrm{d}V} = \\frac{1}{\\phi}$. The function $Q$ becomes $Q(u) = Q_{0} u^{1/2}$. Its derivative with respect to $u$ is $\\frac{\\mathrm{d}Q}{\\mathrm{d}u} = Q_{0} \\cdot \\frac{1}{2} u^{-1/2}$.\n\nApplying the chain rule, $\\frac{\\mathrm{d}Q}{\\mathrm{d}V} = \\frac{\\mathrm{d}Q}{\\mathrm{d}u} \\cdot \\frac{\\mathrm{d}u}{\\mathrm{d}V}$:\n$$\nC_{d}(V) = \\left( Q_{0} \\cdot \\frac{1}{2} u^{-1/2} \\right) \\cdot \\left( \\frac{1}{\\phi} \\right)\n$$\nSubstituting back $u = 1 + \\frac{V}{\\phi}$:\n$$\nC_{d}(V) = \\frac{Q_{0}}{2} \\left(1 + \\frac{V}{\\phi}\\right)^{-1/2} \\cdot \\frac{1}{\\phi}\n$$\nThis expression can be written in a more standard form:\n$$\nC_{d}(V) = \\frac{Q_{0}}{2\\phi\\sqrt{1 + \\frac{V}{\\phi}}}\n$$\nThis is the closed-form analytic expression for the small-signal depletion capacitance per unit area in terms of the given parameters $Q_{0}$, $V$, and $\\phi$.\n\n**Part 2: Physical Interpretation of the Parameter $\\phi$**\n\nTo understand the physical meaning of $\\phi$, we must derive the expression for the depletion charge from first principles using the standard model of a one-sided abrupt $p^{+}$–$n$ junction under the depletion approximation.\n\nIn a one-sided $p^{+}$–$n$ junction, the p-side is much more heavily doped than the n-side ($N_{A} \\gg N_{D}$). Consequently, the depletion region extends almost entirely into the lightly doped n-side. We can approximate the total depletion width $W$ as being equal to the depletion width in the n-region, $W \\approx W_{n}$. Within this region, from the metallurgical junction at $x=0$ to the edge at $x=W_{n}$, the space charge density, $\\rho(x)$, is approximately constant and equal to the charge of the ionized donors:\n$$\n\\rho(x) = q N_{D} \\quad \\text{for } 0 < x < W_{n}\n$$\nwhere $q$ is the elementary charge and $N_{D}$ is the donor concentration. Outside this region, the material is assumed to be electrically neutral, so $\\rho(x)=0$.\n\nThe electrostatic potential $\\psi(x)$ is governed by Poisson's equation:\n$$\n\\frac{\\mathrm{d}^{2}\\psi}{\\mathrm{d}x^{2}} = -\\frac{\\rho(x)}{\\epsilon_{s}}\n$$\nwhere $\\epsilon_{s}$ is the permittivity of the semiconductor.\n\nIntegrating Poisson's equation once with respect to $x$ gives the electric field $E(x) = -\\frac{\\mathrm{d}\\psi}{\\mathrm{d}x}$. With the boundary condition that the electric field must be zero at the edge of the depletion region, $E(W_{n}) = 0$, we find:\n$$\nE(x) = \\frac{qN_{D}}{\\epsilon_{s}}(W_{n} - x) \\quad \\text{for } 0 < x < W_{n}\n$$\nIntegrating the electric field across the depletion region gives the total potential drop, $V_{\\text{total}}$. This total potential is the sum of the built-in potential, $\\phi_{bi}$, and the applied reverse bias, which is denoted by $V$ in this problem. Thus, $V_{\\text{total}} = \\phi_{bi} + V$.\n$$\nV_{\\text{total}} = -\\int_{W_{n}}^{0} E(x) \\mathrm{d}x = \\int_{0}^{W_{n}} \\frac{qN_{D}}{\\epsilon_{s}}(W_{n} - x) \\mathrm{d}x = \\frac{qN_{D}}{\\epsilon_{s}} \\left[ W_{n}x - \\frac{x^{2}}{2} \\right]_{0}^{W_{n}} = \\frac{qN_{D}W_{n}^{2}}{2\\epsilon_{s}}\n$$\nEquating the two expressions for the total potential, we get:\n$$\n\\phi_{bi} + V = \\frac{qN_{D}W_{n}^{2}}{2\\epsilon_{s}}\n$$\nFrom this, we can solve for the depletion width $W_{n}$ as a function of the applied bias $V$:\n$$\nW_{n}(V) = \\sqrt{\\frac{2\\epsilon_{s}(\\phi_{bi} + V)}{qN_{D}}}\n$$\nThe magnitude of the depletion charge per unit area, $Q$, is the total uncompensated charge on the n-side, which is $Q = qN_{D}W_{n}$. Substituting the expression for $W_{n}(V)$:\n$$\nQ(V) = qN_{D}\\sqrt{\\frac{2\\epsilon_{s}(\\phi_{bi} + V)}{qN_{D}}} = \\sqrt{2q\\epsilon_{s}N_{D}(\\phi_{bi} + V)}\n$$\nTo compare this with the given expression, $Q(V)=Q_{0}\\sqrt{1+\\frac{V}{\\phi}}$, we factor out $\\phi_{bi}$ from the term under the square root:\n$$\nQ(V) = \\sqrt{2q\\epsilon_{s}N_{D}\\phi_{bi}} \\cdot \\sqrt{1 + \\frac{V}{\\phi_{bi}}}\n$$\nBy direct comparison with the problem's given form $Q(V)=Q_{0}\\sqrt{1+\\frac{V}{\\phi}}$, we can make the following identifications:\n$$\n\\phi \\equiv \\phi_{bi}\n$$\n$$\nQ_{0} \\equiv \\sqrt{2q\\epsilon_{s}N_{D}\\phi_{bi}}\n$$\nThis analysis reveals the physical meaning of the parameters. The parameter $\\phi$ is the **built-in potential** of the p-n junction. The built-in potential $\\phi_{bi}$ is an intrinsic characteristic of the junction, arising from the alignment of Fermi levels when the p-type and n-type materials are brought into contact. It represents the equilibrium electrostatic potential barrier that opposes the diffusion of majority carriers across the junction. It is determined by the doping concentrations on both sides via the relation $\\phi_{bi} = (kT/q)\\ln(N_{A}N_{D}/n_{i}^{2})$.\n\nThe parameter $\\phi$ (i.e., $\\phi_{bi}$) acts as the fundamental voltage scale for the junction. The depletion width, and consequently the depletion charge and capacitance, do not depend on the applied bias $V$ alone, but on the total potential barrier $\\phi_{bi} + V$. The square-root dependence, $Q \\propto \\sqrt{\\phi+V}$, is a direct consequence of the abrupt charge distribution assumed in the depletion approximation. The zero-bias ($V=0$) depletion charge, $Q_{0}$, is set by the doping density $N_{D}$ and this intrinsic voltage scale $\\phi$.",
            "answer": "$$\n\\boxed{\\frac{Q_{0}}{2\\phi\\sqrt{1+\\frac{V}{\\phi}}}}\n$$"
        },
        {
            "introduction": "The total capacitance of a p-n junction is not solely determined by the depletion effect. Under forward bias, the injection and storage of minority carriers give rise to a \"diffusion capacitance,\" which often dominates. This exercise provides a crucial, quantitative comparison between depletion and diffusion capacitance at a specific forward bias, clarifying the operating regimes where each mechanism is most significant and why the depletion capacitance model is primarily applied to reverse-biased junctions. ",
            "id": "3737916",
            "problem": "A uniformly doped, abrupt silicon $p$-$n$ junction diode at temperature $T=300\\,\\mathrm{K}$ has acceptor concentration $N_{A}=1.0\\times 10^{17}\\,\\mathrm{cm}^{-3}$ and donor concentration $N_{D}=1.0\\times 10^{16}\\,\\mathrm{cm}^{-3}$. The junction cross-sectional area is $A=100\\,\\mu\\mathrm{m}\\times 100\\,\\mu\\mathrm{m}$. The diode is forward biased at an applied voltage $V_{a}=0.70\\,\\mathrm{V}$, establishing a Direct Current (DC) of $I=1\\,\\mathrm{mA}$. The effective minority-carrier recombination lifetime relevant to charge storage in the quasi-neutral regions is $\\tau=1\\,\\mu\\mathrm{s}$. Take the silicon relative permittivity to be $\\varepsilon_{r}=11.7$, the vacuum permittivity to be $\\varepsilon_{0}=8.854\\times 10^{-12}\\,\\mathrm{F/m}$, the elementary charge to be $q=1.602\\times 10^{-19}\\,\\mathrm{C}$, the Boltzmann constant to be $k_{B}=1.381\\times 10^{-23}\\,\\mathrm{J/K}$, and the intrinsic carrier concentration of silicon at $300\\,\\mathrm{K}$ to be $n_{i}=1.0\\times 10^{10}\\,\\mathrm{cm}^{-3}$.\n\nStarting from appropriate first principles for steady-state transport and electrostatics in a $p$-$n$ junction, derive expressions sufficient to:\n1. Compute the diffusion (charge storage) capacitance $C_{\\mathrm{diff}}$ at this bias.\n2. Compute the depletion (junction) capacitance $C_{\\mathrm{dep}}$ at the same bias using the depletion approximation.\n\nThen evaluate both capacitances numerically. Express your final answer as a row matrix containing $C_{\\mathrm{diff}}$ followed by $C_{\\mathrm{dep}}$, in $\\mathrm{F}$. Round your answer to three significant figures. Finally, based on your computations, state which capacitance mechanism dominates at this operating point and why, using physically grounded reasoning.",
            "solution": "The problem requires the derivation and calculation of the diffusion capacitance ($C_{\\mathrm{diff}}$) and depletion capacitance ($C_{\\mathrm{dep}}$) for a silicon $p$-$n$ junction diode under a specified forward bias condition. Based on these calculations, a conclusion must be drawn about which capacitance mechanism is dominant.\n\nFirst, we establish the necessary constants and parameters in consistent SI units.\nElementary charge: $q = 1.602 \\times 10^{-19}\\,\\mathrm{C}$\nBoltzmann constant: $k_{B} = 1.381 \\times 10^{-23}\\,\\mathrm{J/K}$\nTemperature: $T = 300\\,\\mathrm{K}$\nVacuum permittivity: $\\varepsilon_{0} = 8.854 \\times 10^{-12}\\,\\mathrm{F/m}$\nSilicon relative permittivity: $\\varepsilon_{r} = 11.7$\nPermittivity of silicon: $\\varepsilon_{s} = \\varepsilon_{r}\\varepsilon_{0} = 11.7 \\times 8.854 \\times 10^{-12}\\,\\mathrm{F/m} \\approx 1.036 \\times 10^{-10}\\,\\mathrm{F/m}$\nIntrinsic carrier concentration: $n_{i} = 1.0 \\times 10^{10}\\,\\mathrm{cm}^{-3} = 1.0 \\times 10^{16}\\,\\mathrm{m}^{-3}$\nAcceptor concentration: $N_{A} = 1.0 \\times 10^{17}\\,\\mathrm{cm}^{-3} = 1.0 \\times 10^{23}\\,\\mathrm{m}^{-3}$\nDonor concentration: $N_{D} = 1.0 \\times 10^{16}\\,\\mathrm{cm}^{-3} = 1.0 \\times 10^{22}\\,\\mathrm{m}^{-3}$\nJunction area: $A = (100\\,\\mu\\mathrm{m}) \\times (100\\,\\mu\\mathrm{m}) = (1.0 \\times 10^{-4}\\,\\mathrm{m}) \\times (1.0 \\times 10^{-4}\\,\\mathrm{m}) = 1.0 \\times 10^{-8}\\,\\mathrm{m}^2$\nApplied forward bias voltage: $V_{a} = 0.70\\,\\mathrm{V}$\nDC current: $I = 1\\,\\mathrm{mA} = 1.0 \\times 10^{-3}\\,\\mathrm{A}$\nEffective minority-carrier lifetime: $\\tau = 1\\,\\mu\\mathrm{s} = 1.0 \\times 10^{-6}\\,\\mathrm{s}$\n\nThe thermal voltage, $V_T$, is a key parameter:\n$$V_T = \\frac{k_B T}{q} = \\frac{(1.381 \\times 10^{-23}\\,\\mathrm{J/K})(300\\,\\mathrm{K})}{1.602 \\times 10^{-19}\\,\\mathrm{C}} \\approx 0.02586\\,\\mathrm{V}$$\n\n**1. Diffusion Capacitance ($C_{\\mathrm{diff}}$)**\n\nThe diffusion capacitance arises from the charge storage of minority carriers injected into the quasi-neutral regions under forward bias. It is defined as the rate of change of this stored charge, $Q_{\\mathrm{stored}}$, with respect to the applied voltage, $V_a$.\n$$C_{\\mathrm{diff}} = \\frac{dQ_{\\mathrm{stored}}}{dV_a}$$\nIn steady state, the stored minority charge must be replenished at the same rate it is lost through recombination. The total DC current, $I$, supplies the carriers that recombine. If $\\tau$ is the effective lifetime of these stored minority carriers, then the total stored charge is given by:\n$$Q_{\\mathrm{stored}} = I \\tau$$\nThe problem provides both $I$ and $\\tau$, but to establish the voltage dependence required for the derivative, we recall the ideal diode equation:\n$$I = I_0 \\left( \\exp\\left(\\frac{qV_a}{k_B T}\\right) - 1 \\right) = I_0 \\left( \\exp\\left(\\frac{V_a}{V_T}\\right) - 1 \\right)$$\nwhere $I_0$ is the reverse saturation current. For a forward bias of $V_a = 0.70\\,\\mathrm{V}$, we have $V_a \\gg V_T$, so the exponential term dominates and we can approximate $I \\approx I_0 \\exp\\left(\\frac{V_a}{V_T}\\right)$.\nSubstituting this into the expression for stored charge:\n$$Q_{\\mathrm{stored}} \\approx \\tau I_0 \\exp\\left(\\frac{V_a}{V_T}\\right)$$\nNow we can differentiate with respect to $V_a$ to find $C_{\\mathrm{diff}}$:\n$$C_{\\mathrm{diff}} = \\frac{d}{dV_a} \\left[ \\tau I_0 \\exp\\left(\\frac{V_a}{V_T}\\right) \\right] = \\tau I_0 \\left( \\frac{1}{V_T} \\right) \\exp\\left(\\frac{V_a}{V_T}\\right)$$\nRecognizing that $I \\approx I_0 \\exp\\left(\\frac{V_a}{V_T}\\right)$, we obtain a simple expression for the diffusion capacitance in terms of the operating current:\n$$C_{\\mathrm{diff}} = \\frac{I \\tau}{V_T}$$\nThis expression is sufficient for computation. Now, we evaluate it numerically:\n$$C_{\\mathrm{diff}} = \\frac{(1.0 \\times 10^{-3}\\,\\mathrm{A})(1.0 \\times 10^{-6}\\,\\mathrm{s})}{0.02586\\,\\mathrm{V}} \\approx 3.867 \\times 10^{-8}\\,\\mathrm{F}$$\nRounding to three significant figures, $C_{\\mathrm{diff}} = 3.87 \\times 10^{-8}\\,\\mathrm{F}$.\n\n**2. Depletion Capacitance ($C_{\\mathrm{dep}}$)**\n\nThe depletion or junction capacitance arises from the change in charge stored in the space-charge region (depletion region) with applied voltage. It is analogous to a parallel-plate capacitor where the depletion region of width $W$ acts as the dielectric.\n$$C_{\\mathrm{dep}} = \\frac{\\varepsilon_s A}{W}$$\nThe depletion width $W$ depends on the total potential across the junction, which is $V_{bi} - V_a$, where $V_{bi}$ is the built-in potential. First, we must calculate $V_{bi}$:\n$$V_{bi} = V_T \\ln\\left(\\frac{N_A N_D}{n_i^2}\\right) = (0.02586\\,\\mathrm{V}) \\ln\\left(\\frac{(1.0 \\times 10^{23}\\,\\mathrm{m}^{-3})(1.0 \\times 10^{22}\\,\\mathrm{m}^{-3})}{(1.0 \\times 10^{16}\\,\\mathrm{m}^{-3})^2}\\right)$$\n$$V_{bi} = (0.02586\\,\\mathrm{V}) \\ln(10^{13}) = (0.02586\\,\\mathrm{V})(13)\\ln(10) \\approx 0.7745\\,\\mathrm{V}$$\nUnder the depletion approximation, the width $W$ is given by:\n$$W = \\sqrt{\\frac{2\\varepsilon_s}{q}\\left(\\frac{1}{N_A} + \\frac{1}{N_D}\\right)(V_{bi} - V_a)} = \\sqrt{\\frac{2\\varepsilon_s(N_A+N_D)}{q N_A N_D}(V_{bi} - V_a)}$$\nSubstituting this into the expression for $C_{\\mathrm{dep}}$:\n$$C_{\\mathrm{dep}} = \\frac{\\varepsilon_s A}{\\sqrt{\\frac{2\\varepsilon_s(N_A+N_D)}{q N_A N_D}(V_{bi} - V_a)}} = A \\sqrt{\\frac{q \\varepsilon_s}{2(V_{bi} - V_a)}\\left(\\frac{N_A N_D}{N_A+N_D}\\right)}$$\nThis is the required expression. Now we evaluate it numerically. The junction potential is $V_{bi} - V_a = 0.7745\\,\\mathrm{V} - 0.70\\,\\mathrm{V} = 0.0745\\,\\mathrm{V}$. The effective doping concentration term is:\n$$\\frac{N_A N_D}{N_A+N_D} = \\frac{(1.0 \\times 10^{23}\\,\\mathrm{m}^{-3})(1.0 \\times 10^{22}\\,\\mathrm{m}^{-3})}{1.0 \\times 10^{23}\\,\\mathrm{m}^{-3} + 1.0 \\times 10^{22}\\,\\mathrm{m}^{-3}} = \\frac{1.0 \\times 10^{45}}{1.1 \\times 10^{23}}\\,\\mathrm{m}^{-3} \\approx 9.091 \\times 10^{21}\\,\\mathrm{m}^{-3}$$\nPlugging all values into the expression for $C_{\\mathrm{dep}}$:\n$$C_{\\mathrm{dep}} = (1.0 \\times 10^{-8}\\,\\mathrm{m}^2) \\sqrt{\\frac{(1.602 \\times 10^{-19}\\,\\mathrm{C})(1.036 \\times 10^{-10}\\,\\mathrm{F/m})}{2(0.0745\\,\\mathrm{V})}(9.091 \\times 10^{21}\\,\\mathrm{m}^{-3})}$$\n$$C_{\\mathrm{dep}} = (1.0 \\times 10^{-8}) \\sqrt{\\frac{1.660 \\times 10^{-29}}{0.149}(9.091 \\times 10^{21})} \\,\\mathrm{F}$$\n$$C_{\\mathrm{dep}} = (1.0 \\times 10^{-8}) \\sqrt{(1.114 \\times 10^{-28})(9.091 \\times 10^{21})} \\,\\mathrm{F}$$\n$$C_{\\mathrm{dep}} = (1.0 \\times 10^{-8}) \\sqrt{1.013 \\times 10^{-6}} \\,\\mathrm{F} = (1.0 \\times 10^{-8})(1.006 \\times 10^{-3}) \\,\\mathrm{F}$$\n$$C_{\\mathrm{dep}} \\approx 1.006 \\times 10^{-11}\\,\\mathrm{F}$$\nRounding to three significant figures, $C_{\\mathrm{dep}} = 1.01 \\times 10^{-11}\\,\\mathrm{F}$.\n\n**Comparison and Conclusion**\n\nThe calculated values are:\n$$C_{\\mathrm{diff}} \\approx 3.87 \\times 10^{-8}\\,\\mathrm{F} = 38.7\\,\\mathrm{nF}$$\n$$C_{\\mathrm{dep}} \\approx 1.01 \\times 10^{-11}\\,\\mathrm{F} = 10.1\\,\\mathrm{pF}$$\nThe ratio is $C_{\\mathrm{diff}}/C_{\\mathrm{dep}} \\approx (3.87 \\times 10^{-8})/(1.01 \\times 10^{-11}) \\approx 3830$.\nClearly, the diffusion capacitance is the dominant mechanism at this operating point.\n\nThis result is physically expected. The diffusion capacitance $C_{\\mathrm{diff}}$ is proportional to the DC current $I$, which grows exponentially with the forward bias voltage $V_a$. In contrast, the depletion capacitance $C_{\\mathrm{dep}}$ grows as $(V_{bi} - V_a)^{-1/2}$, a much weaker dependence. At reverse or zero bias, $I \\approx 0$ and $C_{\\mathrm{diff}}$ is negligible, so $C_{\\mathrm{dep}}$ dominates. However, under strong forward bias ($V_a = 0.70\\,\\mathrm{V}$), the massive injection of minority carriers into the quasi-neutral regions creates a large stored charge $Q_{\\mathrm{stored}}$. The sensitivity of this large charge to changes in voltage leads to a very large diffusion capacitance, which far outweighs the depletion capacitance.",
            "answer": "$$ \\boxed{ \\begin{pmatrix} 3.87 \\times 10^{-8} & 1.01 \\times 10^{-11} \\end{pmatrix} } $$"
        },
        {
            "introduction": "Extracting the true physical parameters of a semiconductor device from experimental measurements requires accounting for non-idealities and parasitic effects. This practical exercise simulates a common characterization challenge: de-embedding the intrinsic depletion capacitance from measured complex admittance data that is corrupted by series resistance. By developing an algorithm to fit a realistic equivalent circuit model to the data, you will learn a critical skill for accurate device analysis that bridges the gap between idealized theory and real-world measurement. ",
            "id": "3737927",
            "problem": "You are given a reverse-biased semiconductor junction whose small-signal behavior can be approximated by a lumped equivalent circuit consisting of a series resistance $R_{s}$ and a parallel branch containing a depletion capacitance $C_{\\mathrm{dep}}(V)$ and a leakage conductance $G_{\\mathrm{leak}}(V)$. The measured complex admittance $Y(\\omega,V)$ of the device depends on the angular frequency $\\omega$ (in radians per second) and the applied bias $V$ (in volts). Starting from first principles of linear time-invariant circuit theory for small-signal operation, including Kirchhoff's laws and the constitutive relations for a capacitor and a resistor, derive the expression that relates the measured complex admittance $Y(\\omega,V)$ of the entire device to the series resistance $R_{s}$ and to the parallel branch parameters $C_{\\mathrm{dep}}(V)$ and $G_{\\mathrm{leak}}(V)$.\n\nYour program must implement a de-embedding procedure that:\n- Removes the impact of the series resistance $R_{s}$ from the measured data to recover the parallel-branch admittance as a function of $\\omega$ and $V$.\n- Separates the depletion capacitance $C_{\\mathrm{dep}}(V)$ and the leakage conductance $G_{\\mathrm{leak}}(V)$ from the de-embedded parallel-branch admittance in a way that is consistent with the small-signal linear model.\n\nThe algorithmic design must start from the following fundamental bases:\n- The linear small-signal definition of admittance and impedance in Alternating Current (AC) analysis: a capacitor’s small-signal current is $i_{C}(t)=C\\,\\frac{dv(t)}{dt}$, and for sinusoidal excitation $v(t)=\\Re\\{V_{0}e^{j\\omega t}\\}$ this implies an admittance of $j\\omega C$; a resistor of resistance $R$ has impedance $R$ and admittance $1/R$; a conductance $G$ has admittance $G$.\n- Kirchhoff’s laws and series/parallel combination rules for impedances and admittances in linear networks.\n\nYou must not use any shortcut formulas provided by the problem statement; instead, derive any needed relationships in your solution. Ensure all steps are scientifically realistic within semiconductor device modeling.\n\nYour program must fit the unknown parameters by minimizing the discrepancy between the measured complex admittance and the model prediction across multiple angular frequencies $\\omega$ and biases $V$. The fitting strategy should treat $R_{s}$ as bias-independent and $C_{\\mathrm{dep}}(V)$, $G_{\\mathrm{leak}}(V)$ as bias-dependent. You may assume small-signal linearity and frequency-independent $C_{\\mathrm{dep}}(V)$ and $G_{\\mathrm{leak}}(V)$ over the provided frequency points at a fixed bias $V$.\n\nPhysical units:\n- Report the recovered depletion capacitances $C_{\\mathrm{dep}}(V)$ in farads ($\\mathrm{F}$).\n- Angular frequency $\\omega$ must be treated in radians per second.\n- Conductance must be treated in siemens ($\\mathrm{S}$).\n- Resistance must be treated in ohms ($\\Omega$).\n\nTest suite:\nTo guarantee testability and coverage, use the following synthetic, scientifically plausible parameter set to generate the measured admittance data according to the model you derive in your solution:\n- True series resistance: $R_{s}^{\\mathrm{true}}=8.0\\,\\Omega$.\n- Biases: $V\\in\\{0.2\\,\\mathrm{V},\\,0.6\\,\\mathrm{V},\\,1.2\\,\\mathrm{V}\\}$.\n- True depletion capacitances: $C_{\\mathrm{dep}}^{\\mathrm{true}}(0.2\\,\\mathrm{V})=1.20\\times 10^{-9}\\,\\mathrm{F}$, $C_{\\mathrm{dep}}^{\\mathrm{true}}(0.6\\,\\mathrm{V})=8.00\\times 10^{-10}\\,\\mathrm{F}$, $C_{\\mathrm{dep}}^{\\mathrm{true}}(1.2\\,\\mathrm{V})=5.50\\times 10^{-10}\\,\\mathrm{F}$.\n- True leakage conductances: $G_{\\mathrm{leak}}^{\\mathrm{true}}(0.2\\,\\mathrm{V})=2.00\\times 10^{-5}\\,\\mathrm{S}$, $G_{\\mathrm{leak}}^{\\mathrm{true}}(0.6\\,\\mathrm{V})=2.50\\times 10^{-5}\\,\\mathrm{S}$, $G_{\\mathrm{leak}}^{\\mathrm{true}}(1.2\\,\\mathrm{V})=3.00\\times 10^{-5}\\,\\mathrm{S}$.\n- Frequencies: $f\\in\\{10{,}000\\,\\mathrm{Hz},\\,200{,}000\\,\\mathrm{Hz},\\,5{,}000{,}000\\,\\mathrm{Hz}\\}$, with angular frequencies $\\omega=2\\pi f$.\n\nYour program must:\n- Use the above true parameters to generate synthetic measured complex admittances $Y(\\omega,V)$ according to the model you derive in your solution.\n- Fit $R_{s}$ (bias-independent), and for each $V$ fit $C_{\\mathrm{dep}}(V)$ and $G_{\\mathrm{leak}}(V)$, using complex nonlinear least squares over all provided $\\omega$.\n- Return only the recovered list of depletion capacitances $[C_{\\mathrm{dep}}(0.2\\,\\mathrm{V}),\\,C_{\\mathrm{dep}}(0.6\\,\\mathrm{V}),\\,C_{\\mathrm{dep}}(1.2\\,\\mathrm{V})]$ in farads.\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, for example, $[c_{1},c_{2},c_{3}]$, where each $c_{k}$ is a floating-point number representing $C_{\\mathrm{dep}}(V_{k})$ in $\\mathrm{F}$, in the bias order $\\{0.2\\,\\mathrm{V},\\,0.6\\,\\mathrm{V},\\,1.2\\,\\mathrm{V}\\}$.",
            "solution": "The problem requires the derivation of the complex admittance for a standard lumped-element model of a reverse-biased semiconductor junction and the subsequent implementation of a parameter extraction (de-embedding) algorithm. The problem is valid as it is scientifically grounded in semiconductor device physics and linear circuit theory, is well-posed, and all necessary information is provided.\n\n### Principle-Based Derivation of the Admittance Model\n\nWe begin from first principles of linear time-invariant (LTI) circuit theory for small-signal analysis. The device is modeled by an equivalent circuit comprising a series resistance $R_{s}$ and a parallel branch. This parallel branch contains a voltage-dependent depletion capacitance $C_{\\mathrm{dep}}(V)$ and a voltage-dependent leakage conductance $G_{\\mathrm{leak}}(V)$.\n\nLet the applied small-signal voltage be a complex phasor, implying a sinusoidal time dependence of the form $e^{j\\omega t}$, where $j$ is the imaginary unit and $\\omega$ is the angular frequency in radians per second.\n\n1.  **Admittance of the Parallel Branch**: The parallel branch consists of a capacitor and a conductor.\n    - The constitutive relation for a capacitor is $i_C(t) = C \\frac{dv(t)}{dt}$. For a sinusoidal voltage phasor $V_{ph}$, the current phasor is $I_C = j\\omega C V_{ph}$. The admittance of the capacitor, $Y_C = I_C / V_{ph}$, is therefore:\n      $$ Y_C(V, \\omega) = j\\omega C_{\\mathrm{dep}}(V) $$\n    - The constitutive relation for a conductor is $i_G(t) = G v(t)$. In the phasor domain, this is $I_G = G V_{ph}$. The admittance of the conductor, $Y_G = I_G / V_{ph}$, is:\n      $$ Y_G(V) = G_{\\mathrm{leak}}(V) $$\n    - According to Kirchhoff's Current Law, for components in parallel, the total admittance is the sum of the individual admittances. Thus, the admittance of the parallel branch, denoted $Y_p$, is:\n      $$ Y_p(V, \\omega) = Y_G(V) + Y_C(V, \\omega) = G_{\\mathrm{leak}}(V) + j\\omega C_{\\mathrm{dep}}(V) $$\n\n2.  **Impedance of the Total Circuit**: The total circuit consists of the series resistor $R_s$ in series with the parallel branch described above.\n    - The impedance of the series resistor, $Z_s$, is simply its resistance:\n      $$ Z_s = R_s $$\n    - The impedance of the parallel branch, $Z_p$, is the reciprocal of its admittance $Y_p$:\n      $$ Z_p(V, \\omega) = \\frac{1}{Y_p(V, \\omega)} = \\frac{1}{G_{\\mathrm{leak}}(V) + j\\omega C_{\\mathrm{dep}}(V)} $$\n    - According to Kirchhoff's Voltage Law, for components in series, the total impedance is the sum of the individual impedances. The total device impedance, $Z(V, \\omega)$, is therefore:\n      $$ Z(V, \\omega) = Z_s + Z_p(V, \\omega) = R_s + \\frac{1}{G_{\\mathrm{leak}}(V) + j\\omega C_{\\mathrm{dep}}(V)} $$\n\n3.  **Total Admittance of the Device**: The measured complex admittance of the device, $Y(V, \\omega)$, is the reciprocal of the total impedance $Z(V, \\omega)$:\n    $$ Y(V, \\omega) = \\frac{1}{Z(V, \\omega)} = \\frac{1}{R_s + \\frac{1}{G_{\\mathrm{leak}}(V) + j\\omega C_{\\mathrm{dep}}(V)}} $$\n    This equation provides the theoretical model that relates the measurable quantity $Y(V, \\omega)$ to the physical parameters of interest: $R_s$, $C_{\\mathrm{dep}}(V)$, and $G_{\\mathrm{leak}}(V)$.\n\n### De-embedding and Parameter Extraction Algorithm\n\nThe goal is to determine the unknown parameters ($R_s$, $C_{\\mathrm{dep}}(V)$, $G_{\\mathrm{leak}}(V)$) from a set of measured admittances $Y_{\\mathrm{meas}}(V_i, \\omega_j)$. The process of removing the effect of the parasitic series resistance $R_s$ to reveal the properties of the intrinsic device (the parallel branch) is known as de-embedding.\n\n1.  **De-embedding Procedure**: We can algebraically rearrange the impedance equation to isolate the impedance of the parallel branch, $Z_p$. Given a measurement $Y_{\\mathrm{meas}}$, the total impedance is $Z_{\\mathrm{meas}} = 1/Y_{\\mathrm{meas}}$.\n    $$ Z_p(V, \\omega) = Z_{\\mathrm{meas}}(V, \\omega) - R_s = \\frac{1}{Y_{\\mathrm{meas}}(V, \\omega)} - R_s $$\n    The de-embedded admittance of the parallel branch, $Y_p$, is the reciprocal of $Z_p$:\n    $$ Y_p(V, \\omega) = \\frac{1}{\\frac{1}{Y_{\\mathrm{meas}}(V, \\omega)} - R_s} $$\n    By definition, this de-embedded admittance must equal our model for the parallel branch:\n    $$ G_{\\mathrm{leak}}(V) + j\\omega C_{\\mathrm{dep}}(V) = \\frac{1}{\\frac{1}{Y_{\\mathrm{meas}}(V, \\omega)} - R_s} $$\n\n2.  **Fitting Strategy**: The fitting problem involves finding the single bias-independent value of $R_s$ and bias-dependent values $C_{\\mathrm{dep}}(V_i)$ and $G_{\\mathrm{leak}}(V_i)$ that minimize the total squared error between the model and the data over all voltages and frequencies. A highly efficient strategy can be formulated by observing the structure of the model. For any given trial value of $R_s$, the problem of finding the optimal $C_{\\mathrm{dep}}(V_i)$ and $G_{\\mathrm{leak}}(V_i)$ for a fixed voltage $V_i$ becomes a linear least-squares problem.\n\n    This insight allows us to structure the optimization as a nested problem:\n    a. An outer $1$D optimization finds the optimal global series resistance, $R_s$.\n    b. An inner routine calculates the total error for a given trial $R_s$. This involves, for each bias $V_i$, de-embedding the data and finding the best-fit $C_{\\mathrm{dep}}(V_i)$ and $G_{\\mathrm{leak}}(V_i)$ via linear regression.\n\n3.  **Linear Least-Squares for Capacitance and Conductance**: For a fixed voltage $V$ and a trial $R_s$, we have a set of de-embedded admittances $Y'_{p,j} = Y_p(V, \\omega_j)$ for each frequency $\\omega_j$. We want to find the parameters $G=G_{\\mathrm{leak}}(V)$ and $C=C_{\\mathrm{dep}}(V)$ that minimize the sum of squared residuals:\n    $$ S(G, C) = \\sum_{j} \\left| Y'_{p,j} - (G + j\\omega_j C) \\right|^2 = \\sum_{j} \\left[ (\\Re\\{Y'_{p,j}\\} - G)^2 + (\\Im\\{Y'_{p,j}\\} - \\omega_j C)^2 \\right] $$\n    Setting the partial derivatives with respect to $G$ and $C$ to zero yields the optimal values:\n    $$ \\frac{\\partial S}{\\partial G} = 0 \\implies G = \\frac{1}{N_f} \\sum_{j=1}^{N_f} \\Re\\{Y'_{p,j}\\} $$\n    $$ \\frac{\\partial S}{\\partial C} = 0 \\implies C = \\frac{\\sum_{j=1}^{N_f} \\omega_j \\Im\\{Y'_{p,j}\\}}{\\sum_{j=1}^{N_f} \\omega_j^2} $$\n    where $N_f$ is the number of frequency points.\n\n4.  **Complete Algorithm**:\n    a. Generate synthetic measured admittance data $Y_{\\mathrm{meas}}(V_i, \\omega_j)$ using the provided 'true' parameters and the derived admittance model.\n    b. Define a cost function, `cost(Rs_trial)`, that takes a trial value for $R_s$.\n    c. Inside `cost(Rs_trial)`, loop through each bias voltage $V_i$. For each $V_i$:\n        i. De-embed the measured admittances $Y_{\\mathrm{meas}}(V_i, \\omega_j)$ using `Rs_trial`.\n        ii. Find the optimal $C_{\\mathrm{dep}}(V_i)$ and $G_{\\mathrm{leak}}(V_i)$ using the linear least-squares formulas above.\n        iii. Calculate the sum of squared differences between the de-embedded admittances and the resulting linear model $G_{\\mathrm{leak}}(V_i) + j\\omega_j C_{\\mathrm{dep}}(V_i)$.\n    d. Sum the squared errors from all voltages to get the total cost for `Rs_trial`.\n    e. Use a numerical $1$D optimizer (e.g., `scipy.optimize.minimize_scalar`) to find the value of $R_s$ that minimizes this cost function. This yields the best-fit $R_{s, \\mathrm{fit}}$.\n    f. With the optimal $R_{s, \\mathrm{fit}}$, perform a final calculation for each voltage $V_i$ to find the corresponding best-fit depletion capacitances $C_{\\mathrm{dep}}(V_i)$.\n    g. Collect these capacitance values and format them for the final output.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.optimize import minimize_scalar\n\ndef solve():\n    \"\"\"\n    Derives and implements a de-embedding procedure for a semiconductor\n    junction model to extract depletion capacitance and other parameters.\n    The method uses a nested optimization strategy to find the series\n    resistance and then the bias-dependent capacitance and conductance.\n    \"\"\"\n\n    # Define the test suite parameters from the problem statement.\n    # These are the \"true\" values used to generate synthetic measured data.\n    Rs_true = 8.0  # Ohms\n    \n    voltages = np.array([0.2, 0.6, 1.2])  # Volts\n    \n    true_params = {\n        0.2: {'C_dep': 1.20e-9, 'G_leak': 2.00e-5}, # V: {F, S}\n        0.6: {'C_dep': 8.00e-10, 'G_leak': 2.50e-5},\n        1.2: {'C_dep': 5.50e-10, 'G_leak': 3.00e-5},\n    }\n    \n    frequencies = np.array([10000.0, 200000.0, 5000000.0])  # Hz\n    omegas = 2 * np.pi * frequencies  # rad/s\n\n    # --- Step 1: Generate synthetic measurement data ---\n    \n    def model_admittance(w, Rs, C_dep, G_leak):\n        \"\"\"Calculates the complex admittance Y(w) based on the model.\"\"\"\n        # Parallel branch admittance\n        Yp = G_leak + 1j * w * C_dep\n        # Total impedance\n        Z_total = Rs + 1.0 / Yp\n        # Total admittance\n        return 1.0 / Z_total\n\n    Y_measured_data = {}\n    for v in voltages:\n        params_v = true_params[v]\n        C_true = params_v['C_dep']\n        G_true = params_v['G_leak']\n        Y_measured_data[v] = model_admittance(omegas, Rs_true, C_true, G_true)\n\n    # --- Step 2: Define the fitting algorithm ---\n\n    def cost_function_for_Rs(rs_trial, V_list, omega_list, Y_data_dict):\n        \"\"\"\n        Objective function for the 1D optimization of Rs.\n        For a given trial Rs, it calculates the minimum possible residual\n        error by finding the optimal C and G for each bias via linear LSQ.\n        \"\"\"\n        total_residual_sq = 0.0\n        \n        for v in V_list:\n            Y_meas_v = Y_data_dict[v]\n            \n            # De-embedding to get the parallel branch impedance and admittance\n            Z_meas_v = 1.0 / Y_meas_v\n            Zp_v = Z_meas_v - rs_trial\n\n            # If Zp is close to zero, it leads to huge admittance; penalize this.\n            if np.any(np.isclose(Zp_v, 0.0)):\n                return np.inf\n\n            Yp_meas_v = 1.0 / Zp_v\n            \n            Gp_meas_v = np.real(Yp_meas_v)\n            Bp_meas_v = np.imag(Yp_meas_v)\n            \n            # Find optimal C and G for this voltage via linear least squares\n            # as derived in the solution.\n            G_fit_v = np.mean(Gp_meas_v)\n            C_fit_v = np.sum(omega_list * Bp_meas_v) / np.sum(omega_list**2)\n            \n            # Reconstruct the model admittance for the parallel branch\n            Yp_model_v = G_fit_v + 1j * omega_list * C_fit_v\n            \n            # Calculate the sum of squared errors for this voltage\n            residual_v = Yp_meas_v - Yp_model_v\n            total_residual_sq += np.sum(np.abs(residual_v)**2)\n            \n        return total_residual_sq\n\n    # --- Step 3: Perform the optimization ---\n\n    # We perform a 1D bounded optimization to find the best-fit Rs.\n    opt_result = minimize_scalar(\n        cost_function_for_Rs,\n        bounds=(0, 100),  # Physically, Rs must be positive. 100 Ohm upper bound is reasonable.\n        method='bounded',\n        args=(voltages, omegas, Y_measured_data)\n    )\n    \n    Rs_fit = opt_result.x\n\n    # --- Step 4: Extract the final capacitance values ---\n\n    # With the optimal Rs_fit, we perform the final calculation for C_dep at each bias.\n    recovered_capacitances = []\n    for v in voltages:\n        Y_meas_v = Y_measured_data[v]\n        \n        # De-embed using the now-known optimal series resistance\n        Z_meas_v = 1.0 / Y_meas_v\n        Zp_v = Z_meas_v - Rs_fit\n        Yp_meas_v = 1.0 / Zp_v\n        \n        Bp_meas_v = np.imag(Yp_meas_v)\n        \n        # Calculate the final capacitance value for this voltage\n        C_fit_v = np.sum(omegas * Bp_meas_v) / np.sum(omegas**2)\n        recovered_capacitances.append(C_fit_v)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, recovered_capacitances))}]\")\n\nsolve()\n\n```"
        }
    ]
}
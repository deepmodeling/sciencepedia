{
    "hands_on_practices": [
        {
            "introduction": "本练习将引导你解决突变p-n结中最基本也最常见的情形之一：单边突变结。通过从泊松方程出发，你将推导出最大电场及其位置的关键表达式，这是理解雪崩击穿等器件限制因素的核心技能。这项实践将巩固你对耗尽层近似和电荷中性条件在简化分析中作用的理解 。",
            "id": "3766050",
            "problem": "考虑一个一维、均匀掺杂、突变的p-n结，并采用耗尽近似，其冶金结位于 $x=0$ 处，p型区占据 $x0$ 的区域，受主浓度为 $N_{A}$，n型区占据 $x>0$ 的区域，施主浓度为 $N_{D}$。该半导体的介电常数为 $\\varepsilon_{s}$，基本电荷为 $q$。假设该结被偏置，使得耗尽区上的总电势降为 $V_{0}>0$，其中 $V_{0} = V_{\\text{bi}} - V_{a}$，$V_{\\text{bi}}$ 是内建电势，$V_{a}$ 是外加偏压（定义正向偏压为 $V_{a}>0$）。假设 $N_{A} \\gg N_{D}$，因此耗尽区主要延伸到n型区一侧，即 $W_{p} \\ll W_{n}$，其中 $W_{p}$ 和 $W_{n}$ 分别是p型区和n型区的耗尽宽度。\n\n从泊松方程和耗尽近似下的电荷密度出发，推导电场分布 $E(x)$，并由此推导出最大电场强度 $E_{\\text{max}}$ 的主导贡献及其发生位置 $x_{\\text{max}}$。在所述的单边近似条件下，用 $q$、$\\varepsilon_{s}$、$N_{D}$ 和 $V_{0}$ 表示最终结果对 $\\big(E_{\\text{max}}, x_{\\text{max}}\\big)$。将您的最终答案以单行矩阵的形式给出，$E_{\\text{max}}$ 在前，$x_{\\text{max}}$ 在后。将 $E_{\\text{max}}$ 以伏特/米表示，$x_{\\text{max}}$ 以米表示。不需要进行数值计算；给出封闭形式的解析表达式。",
            "solution": "合适的出发点是在耗尽近似下的一维泊松方程，以及电场在耗尽区边缘消失的边界条件。在突变p-n结的耗尽近似中，空间电荷密度是分段恒定的：\n$$\n\\rho(x) = \\begin{cases}\n-q N_{A},  -W_{p}  x  0, \\\\\n+q N_{D},  0  x  W_{n}, \\\\\n0,  x  -W_p \\text{ or } x > W_n.\n\\end{cases}\n$$\n一维泊松方程将电场的空间导数与电荷密度联系起来：\n$$\n\\frac{dE(x)}{dx} = \\frac{\\rho(x)}{\\varepsilon_{s}}.\n$$\n我们在耗尽区边缘施加边界条件：\n$$\nE(-W_{p}) = 0, \\quad E(W_{n}) = 0,\n$$\n以及 $E(x)$ 在 $x=0$ 处的连续性。\n\n在每个区域进行积分。在n型区一侧（$0  x  W_{n}$），其中 $\\rho(x) = q N_{D}$，\n$$\n\\frac{dE}{dx} = \\frac{q N_{D}}{\\varepsilon_{s}} \\quad \\Rightarrow \\quad E(x) = E(W_{n}) - \\frac{q N_{D}}{\\varepsilon_{s}}(W_{n} - x).\n$$\n使用 $E(W_{n})=0$，\n$$\nE(x) = -\\frac{q N_{D}}{\\varepsilon_{s}}(W_{n} - x), \\quad 0  x  W_{n}.\n$$\n在p型区一侧（$-W_{p}  x  0$），其中 $\\rho(x) = -q N_{A}$，\n$$\n\\frac{dE}{dx} = -\\frac{q N_{A}}{\\varepsilon_{s}} \\quad \\Rightarrow \\quad E(x) = E(-W_{p}) - \\frac{q N_{A}}{\\varepsilon_{s}}(x + W_{p}).\n$$\n使用 $E(-W_{p})=0$，\n$$\nE(x) = -\\frac{q N_{A}}{\\varepsilon_{s}}(x + W_{p}), \\quad -W_{p}  x  0.\n$$\n在 $x=0$ 处强制 $E$ 连续，得到\n$$\nE(0^{-}) = E(0^{+}) \\quad \\Rightarrow \\quad -\\frac{q N_{A}}{\\varepsilon_{s}} W_{p} = -\\frac{q N_{D}}{\\varepsilon_{s}} W_{n} \\quad \\Rightarrow \\quad N_{A} W_{p} = N_{D} W_{n}.\n$$\n这是空间电荷中性条件。电场在冶金结 $x=0$ 处达到其极值（最大负值），因为在每个区域内，$E(x)$ 是一个线性函数，它在耗尽区边缘为零，并朝向 $x=0$ 线性增加其强度。$x=0$ 处的强度为\n$$\n|E(0)| = \\frac{q N_{D}}{\\varepsilon_{s}} W_{n} = \\frac{q N_{A}}{\\varepsilon_{s}} W_{p}.\n$$\n为了用 $V_{0}$ 和材料参数表示 $E_{\\text{max}}$，我们将耗尽宽度与总电势降联系起来。每一侧的电势降由电场的积分给出：\n$$\nV_{n} = \\int_{0}^{W_{n}} \\big(-E(x)\\big) \\, dx = \\int_{0}^{W_{n}} \\frac{q N_{D}}{\\varepsilon_{s}} (W_{n} - x) \\, dx = \\frac{q N_{D}}{2 \\varepsilon_{s}} W_{n}^{2},\n$$\n和\n$$\nV_{p} = \\int_{-W_{p}}^{0} \\big(-E(x)\\big) \\, dx = \\int_{-W_{p}}^{0} \\frac{q N_{A}}{\\varepsilon_{s}} (x + W_{p}) \\, dx = \\frac{q N_{A}}{2 \\varepsilon_{s}} W_{p}^{2}.\n$$\n耗尽区的总电势降为\n$$\nV_{0} = V_{n} + V_{p} = \\frac{q}{2 \\varepsilon_{s}} \\left( N_{D} W_{n}^{2} + N_{A} W_{p}^{2} \\right).\n$$\n使用电荷中性关系 $N_{A} W_{p} = N_{D} W_{n}$，我们消去 $W_{p}$ 而用 $W_{n}$ 表示：\n$$\nW_{p} = \\frac{N_{D}}{N_{A}} W_{n} \\quad \\Rightarrow \\quad V_{0} = \\frac{q}{2 \\varepsilon_{s}} \\left( N_{D} W_{n}^{2} + N_{A} \\left( \\frac{N_{D}}{N_{A}} W_{n} \\right)^{2} \\right) = \\frac{q}{2 \\varepsilon_{s}} \\left( N_{D} + \\frac{N_{D}^{2}}{N_{A}} \\right) W_{n}^{2}.\n$$\n在单边条件 $N_{A} \\gg N_{D}$ 下，$N_{D}^{2}/N_{A}$ 项与 $N_{D}$ 相比可以忽略不计，因此\n$$\nV_{0} \\approx \\frac{q N_{D}}{2 \\varepsilon_{s}} W_{n}^{2} \\quad \\Rightarrow \\quad W_{n} \\approx \\sqrt{ \\frac{2 \\varepsilon_{s} V_{0}}{q N_{D}} }.\n$$\n因此，最大电场强度的主要贡献（发生在 $x=0$ 处并由n侧耗尽区决定）为\n$$\nE_{\\text{max}} \\equiv |E(0)| \\approx \\frac{q N_{D}}{\\varepsilon_{s}} W_{n} \\approx \\sqrt{ \\frac{2 q N_{D} V_{0}}{\\varepsilon_{s}} }.\n$$\n这个最大值的位置在冶金结处，即：\n$$\nx_{\\text{max}} = 0.\n$$\n因此，在所述的单边突变结近似下，所求的序对为\n$$\n\\left( E_{\\text{max}}, x_{\\text{max}} \\right) = \\left( \\sqrt{ \\frac{2 q N_{D} V_{0}}{\\varepsilon_{s}} }, \\, 0 \\right),\n$$\n需要理解的是，$E_{\\text{max}}$ 是电场的强度，以伏特/米为单位表示，$x_{\\text{max}}$ 以米为单位表示。",
            "answer": "$$\\boxed{\\begin{pmatrix}\\sqrt{\\frac{2 q N_{D} V_{0}}{\\varepsilon_{s}}}  0\\end{pmatrix}}$$"
        },
        {
            "introduction": "在掌握了均匀介电常数的同质结模型后，本练习将挑战你分析更复杂的异质结。在异质结中，材料的介电常数在界面两侧可能不同，这要求我们回归到更基本的麦克斯韦方程来处理边界条件。这项实践对于精确建模现代半导体器件至关重要，因为它教会你如何处理不同材料界面处的静电学问题 。",
            "id": "3766023",
            "problem": "考虑一个位于 $x=0$ 处的一维突变p-n异质结，并采用耗尽近似。p型区占据 $x \\in [-W_{p},0]$，其受主密度为 $N_{A}$，静态介电常数为 $\\epsilon_{p}$；n型区占据 $x \\in [0,W_{n}]$，其施主密度为 $N_{D}$，静态介电常数为 $\\epsilon_{n}$。在耗尽区之外，$x  -W_{p}$ 和 $x > W_{n}$ 的区域，材料是准中性的，电场为零。假设完全电离、非简并统计和静电平衡。设静电势为 $\\phi(x)$，电场为 $E(x)=-d\\phi/dx$。\n\n从微分形式的高斯定律及其静电本构关系出发，推导空间变化的介电常数如何修正空间电荷区内的电势曲率 $d^{2}\\phi/dx^{2}$。然后，将其特化为阶跃常数介电常数的情况，即当 $x0$ 时 $\\epsilon(x)=\\epsilon_{p}$，当 $x>0$ 时 $\\epsilon(x)=\\epsilon_{n}$，并求出麦克斯韦方程组所蕴含的在 $x=0$ 处的边界条件。利用这些结果，对静电分布进行积分，并将耗尽区上的内建静电势降 $V_{\\mathrm{bi}}$ 与耗尽宽度及材料参数（当 $\\epsilon_{p}\\neq \\epsilon_{n}$ 时）联系起来。\n\n你的最终答案必须是一个关于内建电势的单一闭式解析表达式，用 $q$、$N_{A}$、$N_{D}$、$\\epsilon_{p}$、$\\epsilon_{n}$、$W_{p}$ 和 $W_{n}$ 表示。若要进行数值计算，电势应以伏特（Volts）为单位表示。最终答案中不要提供任何中间步骤或额外评注。",
            "solution": "本分析的出发点是微分形式的静电学高斯定律，$\\nabla \\cdot \\mathbf{D} = \\rho$，其中 $\\mathbf{D}$ 是电位移场，$\\rho$ 是净电荷密度。连接 $\\mathbf{D}$ 和电场 $\\mathbf{E}$ 的本构关系是 $\\mathbf{D} = \\epsilon \\mathbf{E}$，其中 $\\epsilon$ 是材料的静态介电常数。对于沿 $x$ 轴变化的一维系统，这些方程变为 $\\frac{dD(x)}{dx} = \\rho(x)$ 和 $D(x) = \\epsilon(x) E(x)$。\n\n将它们结合起来得到 $\\frac{d}{dx}(\\epsilon(x) E(x)) = \\rho(x)$。使用微分的乘法法则，我们得到：\n$$\n\\epsilon(x) \\frac{dE(x)}{dx} + \\frac{d\\epsilon(x)}{dx} E(x) = \\rho(x)\n$$\n电场 $E(x)$ 通过 $E(x) = -\\frac{d\\phi(x)}{dx}$ 与静电势 $\\phi(x)$ 相关。将此关系代入前一个方程，可得：\n$$\n\\epsilon(x) \\left(-\\frac{d^{2}\\phi(x)}{dx^{2}}\\right) + \\frac{d\\epsilon(x)}{dx} \\left(-\\frac{d\\phi(x)}{dx}\\right) = \\rho(x)\n$$\n求解电势曲率 $\\frac{d^{2}\\phi}{dx^{2}}$，我们发现空间变化的介电常数如何修正标准的泊松方程：\n$$\n\\frac{d^{2}\\phi(x)}{dx^{2}} = -\\frac{\\rho(x)}{\\epsilon(x)} - \\frac{1}{\\epsilon(x)}\\frac{d\\epsilon(x)}{dx}\\frac{d\\phi(x)}{dx} = -\\frac{\\rho(x)}{\\epsilon(x)} + \\frac{1}{\\epsilon(x)}\\frac{d\\epsilon(x)}{dx}E(x)\n$$\n这表明电势曲率不仅取决于局部电荷密度，还取决于电场与介电常数空间梯度的乘积。\n\n接下来，我们特化为在 $x=0$ 异质结界面处介电常数为阶跃常数的情况，其中当 $x0$ 时 $\\epsilon(x) = \\epsilon_{p}$，当 $x>0$ 时 $\\epsilon(x) = \\epsilon_{n}$。导数 $\\frac{d\\epsilon}{dx}$ 仅在 $x=0$ 处非零。为了找到该界面上的边界条件，我们对从 $x=-\\delta$ 到 $x=+\\delta$ 的一个无限薄板使用积分形式的高斯定律。假设界面上不存在自由电荷片（即没有表面电荷密度），电位移场 $\\mathbf{D}$ 的法向分量必须跨越边界连续。在我们的1维情况下，这意味着 $D(0^{-}) = D(0^{+})$。使用本构关系，这可以转化为边界条件：\n$$\n\\epsilon_{p} E(0^{-}) = \\epsilon_{n} E(0^{+})\n$$\n其中 $E(0^{-})$ 和 $E(0^{+})$ 分别是从p侧和n侧趋近界面时的电场。\n\n现在，我们在耗尽近似内求解电场和电势分布。在此近似中，每个耗尽区内的电荷密度是恒定的：当 $-W_{p} \\le x  0$ 时 $\\rho(x) = -qN_{A}$，当 $0  x \\le W_{n}$ 时 $\\rho(x) = +qN_{D}$。在该区域之外，电荷密度为 $0$。由于每个区域内的介电常数是恒定的，标准的泊松方程 $\\frac{d^{2}\\phi}{dx^{2}} = -\\frac{\\rho}{\\epsilon}$ 适用。\n\n对于p型区 ($-W_{p} \\le x  0$)：\n$\\frac{dE}{dx} = \\frac{\\rho}{\\epsilon_{p}} = -\\frac{qN_{A}}{\\epsilon_{p}}$。使用边界条件 $E(-W_{p})=0$ 进行积分，得到：\n$$\nE(x) = \\int_{-W_{p}}^{x} \\left(-\\frac{qN_{A}}{\\epsilon_{p}}\\right) dx' = -\\frac{qN_{A}}{\\epsilon_{p}}(x+W_{p})\n$$\n\n对于n型区 ($0  x \\le W_{n}$)：\n$\\frac{dE}{dx} = \\frac{\\rho}{\\epsilon_{n}} = \\frac{qN_{D}}{\\epsilon_{n}}$。使用边界条件 $E(W_{n})=0$ 进行积分，得到：\n$$\nE(x) = \\int_{W_{n}}^{x} \\frac{qN_{D}}{\\epsilon_{n}} dx' = \\frac{qN_{D}}{\\epsilon_{n}}(x-W_{n})\n$$\n内建电势 $V_{\\mathrm{bi}}$ 是跨越整个耗尽区的总电势降，由电场的积分给出：\n$$\nV_{\\mathrm{bi}} = \\phi(W_{n}) - \\phi(-W_{p}) = -\\int_{-W_{p}}^{W_{n}} E(x) dx\n$$\n我们将积分分成两部分，每个区域一部分：\n$$\nV_{\\mathrm{bi}} = -\\int_{-W_{p}}^{0} E(x) dx - \\int_{0}^{W_{n}} E(x) dx\n$$\n代入 $E(x)$ 的表达式：\n$$\nV_{\\mathrm{bi}} = -\\int_{-W_{p}}^{0} \\left(-\\frac{qN_{A}}{\\epsilon_{p}}(x+W_{p})\\right) dx - \\int_{0}^{W_{n}} \\left(\\frac{qN_{D}}{\\epsilon_{n}}(x-W_{n})\\right) dx\n$$\n$$\nV_{\\mathrm{bi}} = \\frac{qN_{A}}{\\epsilon_{p}} \\int_{-W_{p}}^{0} (x+W_{p}) dx - \\frac{qN_{D}}{\\epsilon_{n}} \\int_{0}^{W_{n}} (x-W_{n}) dx\n$$\n计算积分：\n$$\nV_{\\mathrm{bi}} = \\frac{qN_{A}}{\\epsilon_{p}} \\left[\\frac{(x+W_{p})^{2}}{2}\\right]_{-W_{p}}^{0} - \\frac{qN_{D}}{\\epsilon_{n}} \\left[\\frac{(x-W_{n})^{2}}{2}\\right]_{0}^{W_{n}}\n$$\n$$\nV_{\\mathrm{bi}} = \\frac{qN_{A}}{\\epsilon_{p}} \\left(\\frac{W_{p}^{2}}{2} - 0\\right) - \\frac{qN_{D}}{\\epsilon_{n}} \\left(0 - \\frac{(-W_{n})^{2}}{2}\\right)\n$$\n这简化为内建电势的最终表达式：\n$$\nV_{\\mathrm{bi}} = \\frac{qN_{A}W_{p}^{2}}{2\\epsilon_{p}} + \\frac{qN_{D}W_{n}^{2}}{2\\epsilon_{n}}\n$$\n该表达式将内建电势与耗尽宽度和材料参数联系起来，同时考虑了异质结中p型和n型材料的不同介电常数。",
            "answer": "$$\\boxed{\\frac{q}{2} \\left( \\frac{N_{A} W_{p}^{2}}{\\epsilon_{p}} + \\frac{N_{D} W_{n}^{2}}{\\epsilon_{n}} \\right)}$$"
        },
        {
            "introduction": "本练习旨在连接解析理论与计算实践，这是器件建模工程师的一项核心能力。你将通过编写代码来验证耗尽区电荷中性这一基本假设，该假设是所有结电容和电场模型的基石。通过为突变结和线性缓变结实现一个数值一致性检查，你将加深对这些物理模型的理解，并学会如何量化理论的有效性 。",
            "id": "3766054",
            "problem": "考虑一个半导体结的一维耗尽区模型，该模型采用耗尽近似，即耗尽区内的移动载流子浓度可忽略不计，空间电荷密度等于电离杂质电荷密度。其基本控制关系是一维泊松方程，该方程将静电势与空间电荷密度联系起来。耗尽区内平衡电荷中性的自洽条件被表述为整个耗尽区上空间电荷的总积分为零。需要检查的物理量是空间电荷密度的线积分，其结果为单位面积的电荷。\n\n您必须通过计算空间电荷密度函数 $\\,\\rho(x)\\,$ 在耗尽区 $\\,[-W_p,\\,W_n]\\,$ 上的定积分，并验证其绝对值是否小于或等于规定的容差，来实现电荷中性的数值一致性检查。需要进行数值计算的积分为\n$$\nQ \\;=\\; \\int_{-W_p}^{W_n} \\rho(x)\\,dx,\n$$\n其中 $\\,Q\\,$ 的单位是库仑/平方米，即 $\\,\\mathrm{C/m^2}\\,$。一致性检查返回一个布尔值，如果 $\\,|Q| \\le \\tau\\,$ 则为 $\\texttt{True}$，否则为 $\\texttt{False}$，其中 $\\,\\tau\\,$ 是以 $\\,\\mathrm{C/m^2}\\,$ 为单位的容差。\n\n空间电荷密度 $\\,\\rho(x)\\,$ 由耗尽近似下的净电离杂质密度定义。您必须考虑两种物理上标准的结剖面：\n- 突变 $\\,p\\text{-}n\\,$ 结：在 $\\,p\\,$ 区，受主密度 $\\,N_A\\,$ 是均匀的；在 $\\,n\\,$ 区，施主密度 $\\,N_D\\,$ 是均匀的。在耗尽情况下，空间电荷密度在冶金结 $\\,x=0\\,$ 的两侧是分段常数，符号相反。使用元电荷 $\\,q = 1.602176634\\times 10^{-19}\\,\\mathrm{C}\\,$。$\\,N_A\\,$ 和 $\\,N_D\\,$ 的单位是 $\\,\\mathrm{m^{-3}}\\,$，$\\,W_p\\,$ 和 $\\,W_n\\,$ 的单位是 $\\,\\mathrm{m}\\,$。\n- 线性缓变结：净掺杂浓度随位置线性变化，模型为 $\\,N(x) = \\alpha\\,x\\,$。在耗尽情况下，空间电荷密度与位置成正比，为 $\\,\\rho(x) = q\\,\\alpha\\,x\\,$。$\\,\\alpha\\,$ 的单位是 $\\,\\mathrm{m^{-4}}\\,$。\n\n您的程序必须：\n- 根据上述物理定义，为每种剖面定义空间电荷密度 $\\,\\rho(x)\\,$。\n- 使用稳健的复合方法对 $\\,\\rho(x)\\,$ 在 $\\,[-W_p,\\,W_n]\\,$ 上进行数值积分。对于突变结，该方法应通过对两侧分别积分并求和来恰当处理 $\\,x=0\\,$ 处的间断点。\n- 根据指定的容差 $\\,\\tau\\,$（单位为 $\\,\\mathrm{C/m^2}\\,$），为每个测试用例返回一致性检查的布尔结果。\n\n测试套件：\n对以下五个测试用例执行检查。为每个用例生成一个布尔结果。\n\n$\\,\\text{用例1（突变结，对称中性）：}\\,$\n- $\\,N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,W_p = 3\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,W_n = 3\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{用例2（突变结，非对称中性）：}\\,$\n- $\\,N_A = 5\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,W_p = 4\\times 10^{-8}\\,\\mathrm{m}\\,$\n- $\\,W_n = 2\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{用例3（线性缓变结，对称中性）：}\\,$\n- $\\,\\alpha = 1\\times 10^{28}\\,\\mathrm{m^{-4}}\\,$\n- $\\,W_p = 1\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,W_n = 1\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{用例4（突变结，故意非中性）：}\\,$\n- $\\,N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,W_p = 3\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,W_n = 2\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{用例5（线性缓变结，故意非中性）：}\\,$\n- $\\,\\alpha = 1\\times 10^{28}\\,\\mathrm{m^{-4}}\\,$\n- $\\,W_p = 1\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,W_n = 1.2\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n最终输出格式：\n您的程序应生成单行输出，其中包含五个测试用例的布尔结果，格式为方括号内以逗号分隔的列表，例如 `[True,False,...]`。不应打印其他文本或字符。",
            "solution": "问题要求对一维半导体结模型中的电荷中性进行数值一致性检查。该检查涉及计算耗尽区内单位面积的总积分空间电荷 $Q$，并验证其绝对值是否在指定的容差 $\\tau$ 范围内。总电荷的控制方程为：\n$$\nQ = \\int_{-W_p}^{W_n} \\rho(x)\\,dx\n$$\n其中 $\\rho(x)$ 是空间电荷密度，耗尽区从 $x = -W_p$ 延伸到 $x = W_n$。需要验证的条件是 $|Q| \\le \\tau$。元电荷给定为 $q = 1.602176634\\times 10^{-19}\\,\\mathrm{C}$。\n\n问题指定了两种空间电荷密度模型：突变结和线性缓变结。对于这两种模型，函数 $\\rho(x)$ 都是一个简单的多项式（分段常数或线性）。因此，$Q$ 的定积分可以解析计算。这种解析方法提供了精确结果，其本质上比任何数值近似方法（例如复合辛普森法或梯形法则）更稳健、更准确，后者会引入数值误差。对于具有间断点的突变结，解析方法通过分割积分来正确处理此问题，这是标准做法。\n\n**突变p-n结模型**\n在突变结模型中，假定在冶金结 $x=0$ 的两侧，掺杂浓度是均匀的。在耗尽近似下，空间电荷密度 $\\rho(x)$ 由电离受主 ($N_A$) 和施主 ($N_D$) 的净浓度给出：\n$$\n\\rho(x) =\n\\begin{cases}\n    -q N_A   \\text{for } -W_p \\le x  0 \\\\\n    +q N_D   \\text{for } 0  x \\le W_n\n\\end{cases}\n$$\n为了计算总电荷 $Q$，我们在整个耗尽宽度 $[-W_p, W_n]$ 上对 $\\rho(x)$ 进行积分。积分在 $x=0$ 的间断点处被分开：\n$$\nQ = \\int_{-W_p}^{0} (-q N_A)\\,dx + \\int_{0}^{W_n} (q N_D)\\,dx\n$$\n由于被积函数 $-q N_A$ 和 $q N_D$ 是常数，积分是初等的：\n$$\nQ = -q N_A \\left[x\\right]_{-W_p}^{0} + q N_D \\left[x\\right]_{0}^{W_n}\n$$\n$$\nQ = -q N_A (0 - (-W_p)) + q N_D (W_n - 0)\n$$\n$$\nQ = -q N_A W_p + q N_D W_n = q(N_D W_n - N_A W_p)\n$$\n此表达式提供了单位面积的精确总电荷。当 $N_D W_n = N_A W_p$ 时，实现电荷中性，即 $Q=0$。\n\n**线性缓变结模型**\n对于线性缓变结，净掺杂浓度被建模为位置的线性函数，$N(x) = \\alpha x$。相应的空间电荷密度是：\n$$\n\\rho(x) = q N(x) = q \\alpha x \\quad \\text{for } -W_p \\le x \\le W_n\n$$\n总电荷 $Q$ 是此线性函数在耗尽区上的积分：\n$$\nQ = \\int_{-W_p}^{W_n} q \\alpha x \\,dx\n$$\n计算该积分得出：\n$$\nQ = q \\alpha \\left[ \\frac{x^2}{2} \\right]_{-W_p}^{W_n} = \\frac{q \\alpha}{2} \\left( W_n^2 - (-W_p)^2 \\right)\n$$\n$$\nQ = \\frac{q \\alpha}{2} (W_n^2 - W_p^2)\n$$\n这是总电荷的精确表达式。对于此模型，当耗尽区对称时（即 $W_n = W_p$）实现电荷中性。\n\n**测试用例评估**\n现在将推导出的解析公式应用于五个测试用例。所有用例的容差均给定为 $\\tau = 1 \\times 10^{-12}\\,\\mathrm{C/m^2}$。\n\n用例1（突变结，对称）：\n给定 $N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$，$N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$，$W_p = 3\\times 10^{-7}\\,\\mathrm{m}$，$W_n = 3\\times 10^{-7}\\,\\mathrm{m}$。\n条件 $N_A W_p = N_D W_n$ 成立。\n$Q = q((1\\times 10^{22})(3\\times 10^{-7}) - (1\\times 10^{22})(3\\times 10^{-7})) = q(3\\times 10^{15} - 3\\times 10^{15}) = 0\\,\\mathrm{C/m^2}$。\n$|Q| = 0$，且 $0 \\le 1\\times 10^{-12}$。结果为 $\\texttt{True}$。\n\n用例2（突变结，非对称）：\n给定 $N_A = 5\\times 10^{22}\\,\\mathrm{m^{-3}}$，$N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$，$W_p = 4\\times 10^{-8}\\,\\mathrm{m}$，$W_n = 2\\times 10^{-7}\\,\\mathrm{m}$。\n条件 $N_A W_p = (5\\times 10^{22})(4\\times 10^{-8}) = 2\\times 10^{15}$ 和 $N_D W_n = (1\\times 10^{22})(2\\times 10^{-7}) = 2\\times 10^{15}$ 成立。\n$Q = q(2\\times 10^{15} - 2\\times 10^{15}) = 0\\,\\mathrm{C/m^2}$。\n$|Q| = 0$，且 $0 \\le 1\\times 10^{-12}$。结果为 $\\texttt{True}$。\n\n用例3（线性缓变结，对称）：\n给定 $\\alpha = 1\\times 10^{28}\\,\\mathrm{m^{-4}}$，$W_p = 1\\times 10^{-6}\\,\\mathrm{m}$，$W_n = 1\\times 10^{-6}\\,\\mathrm{m}$。\n条件 $W_p = W_n$ 成立。\n$Q = \\frac{q \\alpha}{2} ((1\\times 10^{-6})^2 - (1\\times 10^{-6})^2) = \\frac{q \\alpha}{2} (1\\times 10^{-12} - 1\\times 10^{-12}) = 0\\,\\mathrm{C/m^2}$。\n$|Q| = 0$，且 $0 \\le 1\\times 10^{-12}$。结果为 $\\texttt{True}$。\n\n用例4（突变结，非中性）：\n给定 $N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$，$N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$，$W_p = 3\\times 10^{-7}\\,\\mathrm{m}$，$W_n = 2\\times 10^{-7}\\,\\mathrm{m}$。\n$Q = q((1\\times 10^{22})(2\\times 10^{-7}) - (1\\times 10^{22})(3\\times 10^{-7})) = q(2\\times 10^{15} - 3\\times 10^{15}) = -q \\times 10^{15}\\,\\mathrm{C/m^2}$。\n$Q = -(1.602176634\\times 10^{-19}) \\times 10^{15} \\approx -1.602\\times 10^{-4}\\,\\mathrm{C/m^2}$。\n$|Q| \\approx 1.602\\times 10^{-4}$，其不小于或等于 $1\\times 10^{-12}$。结果为 $\\texttt{False}$。\n\n用例5（线性缓变结，非中性）：\n给定 $\\alpha = 1\\times 10^{28}\\,\\mathrm{m^{-4}}$，$W_p = 1\\times 10^{-6}\\,\\mathrm{m}$，$W_n = 1.2\\times 10^{-6}\\,\\mathrm{m}$。\n$Q = \\frac{q \\alpha}{2} ((1.2\\times 10^{-6})^2 - (1\\times 10^{-6})^2) = \\frac{q \\alpha}{2} (1.44\\times 10^{-12} - 1\\times 10^{-12}) = \\frac{q \\alpha}{2} (0.44\\times 10^{-12})$。\n$Q = \\frac{(1.602176634\\times 10^{-19})(1\\times 10^{28})}{2} (0.44\\times 10^{-12}) \\approx 0.352\\times 10^{-3}\\,\\mathrm{C/m^2}$。\n$|Q| \\approx 3.52\\times 10^{-4}$，其不小于或等于 $1\\times 10^{-12}$。结果为 $\\texttt{False}$。\n\n最终的布尔结果序列是 $[\\texttt{True}, \\texttt{True}, \\texttt{True}, \\texttt{False}, \\texttt{False}]$。",
            "answer": "```python\nimport numpy as np\n\ndef calculate_Q_abrupt(NA, ND, Wp, Wn, q):\n    \"\"\"\n    Calculates the total charge per unit area Q for an abrupt p-n junction.\n    The formula is derived from the analytical integral of the piecewise constant\n    space charge density.\n    \"\"\"\n    return q * (ND * Wn - NA * Wp)\n\ndef calculate_Q_linear(alpha, Wp, Wn, q):\n    \"\"\"\n    Calculates the total charge per unit area Q for a linearly graded junction.\n    The formula is derived from the analytical integral of the linear\n    space charge density.\n    \"\"\"\n    return (q * alpha / 2.0) * (Wn**2 - Wp**2)\n\ndef solve():\n    \"\"\"\n    Runs a series of charge neutrality consistency checks for different\n    semiconductor junction profiles.\n    \"\"\"\n    # Define the elementary charge in Coulombs\n    q = 1.602176634e-19\n\n    # Define the test suite as a list of dictionaries for clarity\n    test_cases = [\n        {\n            \"id\": 1,\n            \"type\": \"abrupt\",\n            \"params\": {\"NA\": 1e22, \"ND\": 1e22, \"Wp\": 3e-7, \"Wn\": 3e-7},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 2,\n            \"type\": \"abrupt\",\n            \"params\": {\"NA\": 5e22, \"ND\": 1e22, \"Wp\": 4e-8, \"Wn\": 2e-7},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 3,\n            \"type\": \"linear\",\n            \"params\": {\"alpha\": 1e28, \"Wp\": 1e-6, \"Wn\": 1e-6},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 4,\n            \"type\": \"abrupt\",\n            \"params\": {\"NA\": 1e22, \"ND\": 1e22, \"Wp\": 3e-7, \"Wn\": 2e-7},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 5,\n            \"type\": \"linear\",\n            \"params\": {\"alpha\": 1e28, \"Wp\": 1e-6, \"Wn\": 1.2e-6},\n            \"tau\": 1e-12\n        },\n    ]\n\n    results = []\n    for case in test_cases:\n        Q = 0.0\n        if case[\"type\"] == \"abrupt\":\n            # Unpack parameters for the abrupt junction model\n            NA = case[\"params\"][\"NA\"]\n            ND = case[\"params\"][\"ND\"]\n            Wp = case[\"params\"][\"Wp\"]\n            Wn = case[\"params\"][\"Wn\"]\n            # Calculate the total charge using the analytical formula\n            Q = calculate_Q_abrupt(NA, ND, Wp, Wn, q)\n        elif case[\"type\"] == \"linear\":\n            # Unpack parameters for the linearly graded junction model\n            alpha = case[\"params\"][\"alpha\"]\n            Wp = case[\"params\"][\"Wp\"]\n            Wn = case[\"params\"][\"Wn\"]\n            # Calculate the total charge using the analytical formula\n            Q = calculate_Q_linear(alpha, Wp, Wn, q)\n        \n        # Perform the consistency check: |Q| = tau\n        is_neutral = np.abs(Q) = case[\"tau\"]\n        results.append(is_neutral)\n\n    # Format the final output as a comma-separated list of Booleans in brackets\n    print(f\"[{','.join(map(str, results))}]\")\n\n# Execute the main function\nif __name__ == \"__main__\":\n    solve()\n```"
        }
    ]
}
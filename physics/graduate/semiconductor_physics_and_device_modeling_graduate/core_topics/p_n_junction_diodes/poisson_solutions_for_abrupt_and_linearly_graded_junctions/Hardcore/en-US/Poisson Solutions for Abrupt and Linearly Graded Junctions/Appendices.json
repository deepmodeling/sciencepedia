{
    "hands_on_practices": [
        {
            "introduction": "Understanding the behavior of p-n junctions begins with the abrupt junction model, which provides a foundational framework for analyzing more complex devices. This first exercise  guides you through the essential derivation of the electric field profile in a one-sided abrupt junction, a common and important practical scenario. By applying the depletion approximation and solving Poisson's equation, you will derive key parameters like the maximum electric field, which are critical for predicting device breakdown voltage and performance.",
            "id": "3766050",
            "problem": "Consider a one-dimensional, uniformly doped, abrupt p-n junction under the depletion approximation, with the metallurgical junction at $x=0$, the p-type region occupying $x0$ with acceptor concentration $N_{A}$, and the n-type region occupying $x0$ with donor concentration $N_{D}$. The semiconductor has permittivity $\\varepsilon_{s}$ and elementary charge $q$. Let the junction be biased so that the total potential drop across the depletion region is $V_{0}0$, where $V_{0} = V_{\\text{bi}} - V_{a}$, with $V_{\\text{bi}}$ the built-in potential and $V_{a}$ the externally applied bias (forward bias is defined as $V_{a}0$). Assume $N_{A} \\gg N_{D}$ so that the depletion region extends predominantly into the n-type side, i.e., $W_{p} \\ll W_{n}$, where $W_{p}$ and $W_{n}$ are the depletion widths in the p-type and n-type regions, respectively.\n\nStarting from Poisson’s equation and the depletion approximation charge density, derive the electric field profile $E(x)$ and, from it, the dominant contribution to the maximum electric field magnitude $E_{\\text{max}}$ and the location $x_{\\text{max}}$ at which it occurs. Express your final result for the pair $\\big(E_{\\text{max}}, x_{\\text{max}}\\big)$ in terms of $q$, $\\varepsilon_{s}$, $N_{D}$, and $V_{0}$, under the stated one-sided approximation. Provide your final answer as a single row matrix with $E_{\\text{max}}$ first and $x_{\\text{max}}$ second. Express $E_{\\text{max}}$ in volts per meter and $x_{\\text{max}}$ in meters. No numerical evaluation is required; give a closed-form analytic expression.",
            "solution": "The appropriate starting point is Poisson’s equation in one dimension under the depletion approximation, together with the boundary conditions that the electric field vanishes at the depletion edges. In the depletion approximation for an abrupt p-n junction, the space charge density is piecewise constant:\n$$\n\\rho(x) = \\begin{cases}\n-q N_{A},  -W_{p}  x  0 \\\\\n+q N_{D},  0  x  W_{n} \\\\\n0,  \\text{otherwise}\n\\end{cases}\n$$\nPoisson’s equation in one dimension relates the spatial derivative of the electric field to the charge density:\n$$\n\\frac{dE(x)}{dx} = \\frac{\\rho(x)}{\\varepsilon_{s}}.\n$$\nWe impose the boundary conditions at the depletion edges:\n$$\nE(-W_{p}) = 0, \\quad E(W_{n}) = 0,\n$$\nand the continuity of $E(x)$ at $x=0$.\n\nIntegrate in each region. In the n-type side ($0  x  W_{n}$), with $\\rho(x) = q N_{D}$,\n$$\n\\frac{dE}{dx} = \\frac{q N_{D}}{\\varepsilon_{s}} \\quad \\Rightarrow \\quad E(x) = E(W_{n}) - \\frac{q N_{D}}{\\varepsilon_{s}}(W_{n} - x).\n$$\nUsing $E(W_{n})=0$,\n$$\nE(x) = -\\frac{q N_{D}}{\\varepsilon_{s}}(W_{n} - x), \\quad 0  x  W_{n}.\n$$\nIn the p-type side ($-W_{p}  x  0$), with $\\rho(x) = -q N_{A}$,\n$$\n\\frac{dE}{dx} = -\\frac{q N_{A}}{\\varepsilon_{s}} \\quad \\Rightarrow \\quad E(x) = E(-W_{p}) - \\frac{q N_{A}}{\\varepsilon_{s}}(x + W_{p}).\n$$\nUsing $E(-W_{p})=0$,\n$$\nE(x) = -\\frac{q N_{A}}{\\varepsilon_{s}}(x + W_{p}), \\quad -W_{p}  x  0.\n$$\nEnforcing continuity of $E$ at $x=0$ gives\n$$\nE(0^{-}) = E(0^{+}) \\quad \\Rightarrow \\quad -\\frac{q N_{A}}{\\varepsilon_{s}} W_{p} = -\\frac{q N_{D}}{\\varepsilon_{s}} W_{n} \\quad \\Rightarrow \\quad N_{A} W_{p} = N_{D} W_{n}.\n$$\nThis is the space-charge neutrality condition. The electric field achieves its extremum (most negative value) at the metallurgical junction $x=0$, because in each region $E(x)$ is a linear function that vanishes at the depletion edge and linearly increases in magnitude toward $x=0$. The magnitude at $x=0$ is\n$$\n|E(0)| = \\frac{q N_{D}}{\\varepsilon_{s}} W_{n} = \\frac{q N_{A}}{\\varepsilon_{s}} W_{p}.\n$$\nTo obtain $E_{\\text{max}}$ in terms of $V_{0}$ and material parameters, we relate the depletion widths to the total potential drop. The potential drop across each side is given by the integral of the electric field:\n$$\nV_{n} = \\int_{0}^{W_{n}} \\big(-E(x)\\big) \\, dx = \\int_{0}^{W_{n}} \\frac{q N_{D}}{\\varepsilon_{s}} (W_{n} - x) \\, dx = \\frac{q N_{D}}{2 \\varepsilon_{s}} W_{n}^{2},\n$$\nand\n$$\nV_{p} = \\int_{-W_{p}}^{0} \\big(-E(x)\\big) \\, dx = \\int_{-W_{p}}^{0} \\frac{q N_{A}}{\\varepsilon_{s}} (x + W_{p}) \\, dx = \\frac{q N_{A}}{2 \\varepsilon_{s}} W_{p}^{2}.\n$$\nThe total depletion-region potential drop is\n$$\nV_{0} = V_{n} + V_{p} = \\frac{q}{2 \\varepsilon_{s}} \\left( N_{D} W_{n}^{2} + N_{A} W_{p}^{2} \\right).\n$$\nUsing the neutrality relation $N_{A} W_{p} = N_{D} W_{n}$, we eliminate $W_{p}$ in favor of $W_{n}$:\n$$\nW_{p} = \\frac{N_{D}}{N_{A}} W_{n} \\quad \\Rightarrow \\quad V_{0} = \\frac{q}{2 \\varepsilon_{s}} \\left( N_{D} W_{n}^{2} + N_{A} \\left( \\frac{N_{D}}{N_{A}} W_{n} \\right)^{2} \\right) = \\frac{q}{2 \\varepsilon_{s}} \\left( N_{D} + \\frac{N_{D}^{2}}{N_{A}} \\right) W_{n}^{2}.\n$$\nUnder the one-sided condition $N_{A} \\gg N_{D}$, the term $N_{D}^{2}/N_{A}$ is negligible compared to $N_{D}$, so\n$$\nV_{0} \\approx \\frac{q N_{D}}{2 \\varepsilon_{s}} W_{n}^{2} \\quad \\Rightarrow \\quad W_{n} \\approx \\sqrt{ \\frac{2 \\varepsilon_{s} V_{0}}{q N_{D}} }.\n$$\nTherefore, the dominant contribution to the maximum electric field magnitude, which occurs at $x=0$ and is governed by the n-side depletion, is\n$$\nE_{\\text{max}} \\equiv |E(0)| \\approx \\frac{q N_{D}}{\\varepsilon_{s}} W_{n} \\approx \\sqrt{ \\frac{2 q N_{D} V_{0}}{\\varepsilon_{s}} }.\n$$\nThe location of this maximum is at the metallurgical junction, i.e.,\n$$\nx_{\\text{max}} = 0.\n$$\nThus, under the stated one-sided abrupt junction approximation, the requested pair is\n$$\n\\left( E_{\\text{max}}, x_{\\text{max}} \\right) = \\left( \\sqrt{ \\frac{2 q N_{D} V_{0}}{\\varepsilon_{s}} }, \\, 0 \\right),\n$$\nwith the understanding that $E_{\\text{max}}$ is the magnitude of the electric field and is expressed in volts per meter, and $x_{\\text{max}}$ is expressed in meters.",
            "answer": "$$\\boxed{\\begin{pmatrix}\\sqrt{\\frac{2 q N_{D} V_{0}}{\\varepsilon_{s}}}  0\\end{pmatrix}}$$"
        },
        {
            "introduction": "While the abrupt junction is a powerful idealization, many real-world junctions are formed by processes like diffusion, resulting in a graded doping profile. This problem  explores the linearly graded junction, the second canonical model in junction analysis. By examining how the depletion width and maximum electric field depend on the grading coefficient $G$, you will develop a deeper intuition for the relationship between the doping profile and the electrostatic properties of the junction.",
            "id": "3766015",
            "problem": "Consider a one-dimensional p-n junction whose net ionized dopant density varies linearly with position, modeled as $N(x) = Gx$, where $x=0$ is the metallurgical junction, $G0$ is the grading coefficient, and $N(x)$ is the net donor minus acceptor density (positive for $x0$, negative for $x0$). Assume the Depletion Approximation (DA): mobile carriers are neglected in the depletion region, and the space charge density is $\\rho(x) = q N(x)$, with $q$ the elementary charge. Let the semiconductor permittivity be $\\varepsilon_s$, and let the total electrostatic potential drop across the depletion region be $V0$ (for example, $V$ could represent the built-in potential plus a reverse bias).\n\nStarting from Poisson’s equation in one dimension, $\\frac{d^2 \\psi}{dx^2} = -\\frac{\\rho(x)}{\\varepsilon_s}$, and imposing that the electric field $E(x) = -\\frac{d\\psi}{dx}$ vanishes at both depletion edges (i.e., $E(-x_p)=0$ and $E(x_n)=0$), one finds symmetric depletion widths for a symmetric linear grading, so that the depletion extends from $-x_d$ to $+x_d$ with $x_p=x_n=x_d$. The maximum magnitude of the electric field occurs at the metallurgical junction ($x=0$).\n\nSelect the option that correctly characterizes how the grading coefficient $G$ controls the depletion half-width $x_d$ and the maximum field magnitude $|E_{\\max}|$, and that correctly identifies a regime in which a small $G$ allows a local approximation by an abrupt junction near either depletion edge. Your reasoning should be based on first principles and must be consistent with Poisson’s equation, boundary conditions, and the DA.\n\nA. For fixed $V$, the depletion half-width is $x_d = \\left(\\frac{3 \\varepsilon_s V}{2 q G}\\right)^{1/3}$ and the maximum field magnitude is $|E_{\\max}| = \\frac{q G}{2 \\varepsilon_s} x_d^2$, implying $x_d \\propto G^{-1/3}$ and $|E_{\\max}| \\propto G^{1/3}$. Near either edge at $x = \\pm x_d$, a local Taylor expansion $N(x) \\approx G x_d + G (x \\mp x_d)$ shows that over an inner layer of thickness $\\delta$ with $0\\delta \\ll x_d$, the fractional variation of $N(x)$ is $O(\\delta/x_d)\\ll 1$, so the space charge is approximately constant, and the local field profile reduces to the abrupt-junction form (linear in $x$) in that edge layer.\n\nB. For fixed $V$, the depletion half-width scales as $x_d \\propto G^{-1/2}$ and the maximum field magnitude scales as $|E_{\\max}| \\propto G^{1/2}$. For sufficiently small $G$, the graded junction is globally equivalent to an abrupt junction with an effective doping $N_{\\mathrm{eff}} = G x_d$.\n\nC. The depletion half-width $x_d$ is independent of $G$, while $|E_{\\max}|$ decreases linearly with $G$. For small $G$, the junction behaves as a uniformly doped resistor and does not admit an abrupt-junction approximation anywhere.\n\nD. The electric field profile is linear in position throughout the depletion region, and a local abrupt-junction approximation near the edges requires $G x_d \\gg \\frac{q}{\\varepsilon_s}$, independent of the applied $V$.",
            "solution": "The problem statement is a standard, well-posed problem in semiconductor device physics. It asks for the derivation of key parameters for a linearly graded p-n junction under the depletion approximation and an analysis of its behavior in a certain limit. All provided information is physically and mathematically consistent. The problem is valid.\n\nWe begin by solving Poisson's equation for the given charge distribution.\nThe problem states that the net ionized dopant density is $N(x) = Gx$. Within the depletion approximation, the space charge density $\\rho(x)$ in the depletion region $[-x_d, x_d]$ is given by $\\rho(x) = q N(x) = q G x$.\nPoisson's equation in one dimension relates the electric field $E$ to the space charge density:\n$$ \\frac{dE}{dx} = \\frac{\\rho(x)}{\\varepsilon_s} $$\nSubstituting the expression for $\\rho(x)$:\n$$ \\frac{dE}{dx} = \\frac{q G x}{\\varepsilon_s} $$\nWe integrate this equation to find the electric field $E(x)$.\n$$ E(x) = \\int \\frac{q G x}{\\varepsilon_s} dx = \\frac{q G x^2}{2 \\varepsilon_s} + C_1 $$\nwhere $C_1$ is the constant of integration. We use the boundary condition that the electric field vanishes at the edge of the depletion region on the p-side, $E(-x_d) = 0$.\n$$ E(-x_d) = \\frac{q G (-x_d)^2}{2 \\varepsilon_s} + C_1 = \\frac{q G x_d^2}{2 \\varepsilon_s} + C_1 = 0 $$\nThis gives $C_1 = -\\frac{q G x_d^2}{2 \\varepsilon_s}$.\nThe electric field profile within the depletion region is therefore:\n$$ E(x) = \\frac{q G}{2 \\varepsilon_s} (x^2 - x_d^2) \\quad \\text{for } -x_d \\le x \\le x_d $$\nNote that this expression also satisfies the other boundary condition, $E(x_d) = 0$, as expected due to the symmetry of the charge distribution. The electric field profile is parabolic, not linear.\n\nThe magnitude of the electric field is maximum where its derivative is zero, which is at $x=0$.\n$$ E_{\\max} = E(0) = \\frac{q G}{2 \\varepsilon_s} (0^2 - x_d^2) = -\\frac{q G x_d^2}{2 \\varepsilon_s} $$\nThe maximum field magnitude is:\n$$ |E_{\\max}| = \\frac{q G x_d^2}{2 \\varepsilon_s} $$\n\nNext, we find the total potential drop $V$ across the junction by integrating the electric field from $-x_d$ to $x_d$.\n$$ V = -\\int_{-x_d}^{x_d} E(x) dx = -\\int_{-x_d}^{x_d} \\frac{q G}{2 \\varepsilon_s} (x^2 - x_d^2) dx $$\n$$ V = -\\frac{q G}{2 \\varepsilon_s} \\left[ \\frac{x^3}{3} - x_d^2 x \\right]_{-x_d}^{x_d} $$\n$$ V = -\\frac{q G}{2 \\varepsilon_s} \\left[ \\left(\\frac{x_d^3}{3} - x_d^3\\right) - \\left(\\frac{(-x_d)^3}{3} - x_d^2(-x_d)\\right) \\right] $$\n$$ V = -\\frac{q G}{2 \\varepsilon_s} \\left[ \\left(-\\frac{2x_d^3}{3}\\right) - \\left(-\\frac{x_d^3}{3} + x_d^3\\right) \\right] $$\n$$ V = -\\frac{q G}{2 \\varepsilon_s} \\left[ -\\frac{2x_d^3}{3} - \\frac{2x_d^3}{3} \\right] = -\\frac{q G}{2 \\varepsilon_s} \\left( -\\frac{4x_d^3}{3} \\right) $$\n$$ V = \\frac{2 q G x_d^3}{3 \\varepsilon_s} $$\nThis expression relates the potential drop $V$ to the depletion half-width $x_d$. We can now solve for $x_d$:\n$$ x_d^3 = \\frac{3 \\varepsilon_s V}{2 q G} \\implies x_d = \\left(\\frac{3 \\varepsilon_s V}{2 q G}\\right)^{1/3} $$\nFor a fixed potential $V$, the depletion half-width scales with the grading coefficient $G$ as $x_d \\propto G^{-1/3}$.\n\nNow we can express $|E_{\\max}|$ in terms of $G$ and $V$.\n$$ |E_{\\max}| = \\frac{q G}{2 \\varepsilon_s} x_d^2 = \\frac{q G}{2 \\varepsilon_s} \\left( \\frac{3 \\varepsilon_s V}{2 q G} \\right)^{2/3} $$\n$$ |E_{\\max}| = \\frac{q G}{2 \\varepsilon_s} \\left( \\frac{3 \\varepsilon_s V}{2 q} \\right)^{2/3} G^{-2/3} = \\left( \\frac{q}{2 \\varepsilon_s} \\left(\\frac{3 \\varepsilon_s V}{2 q}\\right)^{2/3} \\right) G^{1 - 2/3} $$\n$$ |E_{\\max}| \\propto G^{1/3} $$\n\nFinally, we analyze the local approximation near a depletion edge, for instance at $x=x_d$. Let's consider a thin layer of thickness $\\delta$ just inside the depletion region, from $x=x_d-\\delta$ to $x=x_d$, where $\\delta \\ll x_d$. In this layer, the net doping is $N(x) = G x$. The doping at the edge is $N(x_d) = G x_d$. The fractional variation of the doping concentration across this layer is:\n$$ \\frac{N(x_d) - N(x_d - \\delta)}{N(x_d)} = \\frac{G x_d - G(x_d - \\delta)}{G x_d} = \\frac{G \\delta}{G x_d} = \\frac{\\delta}{x_d} $$\nSince $\\delta \\ll x_d$, this fractional variation is much less than $1$. This means the doping density $N(x)$ is approximately constant, $N(x) \\approx G x_d$, within this thin layer. A constant space-charge density is the defining characteristic of an abrupt junction. The field profile in such a region is linear. Indeed, a Taylor expansion of our parabolic field $E(x) = \\frac{q G}{2 \\varepsilon_s} (x^2 - x_d^2)$ around $x=x_d$ yields:\n$E(x) = E(x_d) + E'(x_d)(x-x_d) + \\dots = 0 + \\frac{q G x_d}{\\varepsilon_s} (x-x_d) + \\dots$\nThis is a linear field profile, characteristic of an abrupt junction with effective doping concentration $N_{\\mathrm{eff}} = G x_d$. A similar argument holds for the edge at $x = -x_d$.\n\nNow we evaluate the given options.\n\nA. For fixed $V$, the depletion half-width is $x_d = \\left(\\frac{3 \\varepsilon_s V}{2 q G}\\right)^{1/3}$ and the maximum field magnitude is $|E_{\\max}| = \\frac{q G}{2 \\varepsilon_s} x_d^2$, implying $x_d \\propto G^{-1/3}$ and $|E_{\\max}| \\propto G^{1/3}$. Near either edge at $x = \\pm x_d$, a local Taylor expansion $N(x) \\approx G x_d + G (x \\mp x_d)$ shows that over an inner layer of thickness $\\delta$ with $0\\delta \\ll x_d$, the fractional variation of $N(x)$ is $O(\\delta/x_d)\\ll 1$, so the space charge is approximately constant, and the local field profile reduces to the abrupt-junction form (linear in $x$) in that edge layer.\n- The formula for $x_d$ is correct according to our derivation.\n- The formula for $|E_{\\max}|$ is correct according to our derivation.\n- The scaling dependencies $x_d \\propto G^{-1/3}$ and $|E_{\\max}| \\propto G^{1/3}$ are also correct.\n- The argument about the local approximation is physically sound. The observation that fractional variation is $O(\\delta/x_d)$, leading to an approximately constant space charge and a linear local field, is correct.\n- There is an error in the provided expression for the Taylor expansion: $N(x) \\approx G x_d + G (x \\mp x_d)$. For the edge at $x \\approx -x_d$, the formula gives $N(x) \\approx G x_d + G (x + x_d) = G x + 2G x_d$, which is not a valid approximation of $N(x) = Gx$. However, this appears to be a minor error in stating the justification. The primary quantitative claims and the physical conclusions about the local approximation are all correct. Among the given choices, this option is by far the most accurate.\nVerdict: **Correct**.\n\nB. For fixed $V$, the depletion half-width scales as $x_d \\propto G^{-1/2}$ and the maximum field magnitude scales as $|E_{\\max}| \\propto G^{1/2}$. For sufficiently small $G$, the graded junction is globally equivalent to an abrupt junction with an effective doping $N_{\\mathrm{eff}} = G x_d$.\n- The scaling dependencies are incorrect. Our derivation shows $x_d \\propto G^{-1/3}$ and $|E_{\\max}| \\propto G^{1/3}$. The scalings provided are for an abrupt junction with fixed doping, which is not the case here.\n- The claim of global equivalence is false. The charge distribution (linear vs. piece-wise constant) and the electric field profile (parabolic vs. triangular) are fundamentally different.\nVerdict: **Incorrect**.\n\nC. The depletion half-width $x_d$ is independent of $G$, while $|E_{\\max}|$ decreases linearly with $G$. For small $G$, the junction behaves as a uniformly doped resistor and does not admit an abrupt-junction approximation anywhere.\n- The claim that $x_d$ is independent of $G$ is incorrect. We found $x_d \\propto G^{-1/3}$.\n- The claim that $|E_{\\max}|$ decreases linearly with $G$ is incorrect. We found $|E_{\\max}| \\propto G^{1/3}$.\n- The description of the depletion region as a \"uniformly doped resistor\" is inappropriate and misleading. The claim that it does not admit an abrupt-junction approximation near the edges is false.\nVerdict: **Incorrect**.\n\nD. The electric field profile is linear in position throughout the depletion region, and a local abrupt-junction approximation near the edges requires $G x_d \\gg \\frac{q}{\\varepsilon_s}$, independent of the applied $V$.\n- The electric field profile is parabolic, $E(x) \\propto (x^2 - x_d^2)$, not linear. A linear field profile is characteristic of an abrupt junction.\n- The condition $G x_d \\gg \\frac{q}{\\varepsilon_s}$ is dimensionally inconsistent. The left side, $G x_d$, has units of (length)$^{-3}$, representing a concentration. The right side, $\\frac{q}{\\varepsilon_s}$, has units of (Volt $\\cdot$ meter). A concentration cannot be compared to a quantity with units of V$\\cdot$m.\nVerdict: **Incorrect**.\n\nBased on the analysis, Option A is the only one that presents the correct physical relationships, despite a minor flaw in an explanatory clause.",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "Analytical models are built on core physical principles that must hold true. In the depletion approximation, the condition of overall charge neutrality is a critical self-consistency check. This final hands-on practice  challenges you to translate this physical principle into a computational algorithm, verifying charge neutrality for both abrupt and linearly graded junction scenarios. This exercise bridges theory and practice, highlighting how fundamental conservation laws are applied and verified in numerical device simulation.",
            "id": "3766054",
            "problem": "A one-dimensional depletion-region model of a semiconductor junction is considered under the depletion approximation, where mobile carrier concentrations are negligible inside the depletion region and the space charge density equals the ionized impurity charge density. The governing fundamental relation is the one-dimensional Poisson equation, which links the electrostatic potential to the space charge density. The consistency condition for equilibrium charge neutrality in the depletion region is formulated as the vanishing of the total integrated space charge over the depletion region. The physical quantity to be checked is the line-integral of the space charge density, which yields charge per unit area.\n\nYou must implement a numerical consistency check for charge neutrality by evaluating the definite integral of the space charge density function $\\,\\rho(x)\\,$ over the depletion region $\\,[-W_p,\\,W_n]\\,$ and verifying whether its absolute value is less than or equal to a prescribed tolerance. The integral to be evaluated numerically is\n$$\nQ \\;=\\; \\int_{-W_p}^{W_n} \\rho(x)\\,dx,\n$$\nwhere $\\,Q\\,$ has units of coulomb per square meter, $\\,\\mathrm{C/m^2}\\,$. The consistency check returns a Boolean value that is $\\texttt{True}$ if $\\,|Q| \\le \\tau\\,$ and $\\texttt{False}$ otherwise, where $\\,\\tau\\,$ is the tolerance expressed in $\\,\\mathrm{C/m^2}\\,$.\n\nThe space charge density $\\,\\rho(x)\\,$ is defined from the net ionized impurity density under the depletion approximation. You must consider two physically standard junction profiles:\n- Abrupt $\\,p\\text{-}n\\,$ junction: The acceptor density $\\,N_A\\,$ is uniform on the $\\,p\\,$-side and the donor density $\\,N_D\\,$ is uniform on the $\\,n\\,$-side. Under depletion, the space charge density is piecewise constant with opposite signs on either side of the metallurgical junction at $\\,x=0\\,$. Use the elementary charge $\\,q = 1.602176634\\times 10^{-19}\\,\\mathrm{C}\\,$. The units for $\\,N_A\\,$ and $\\,N_D\\,$ are $\\,\\mathrm{m^{-3}}\\,$, and the units for $\\,W_p\\,$ and $\\,W_n\\,$ are $\\,\\mathrm{m}\\,$.\n- Linearly graded junction: The net doping is linear with position, modeled as $\\,N(x) = G\\,x\\,$. Under depletion, the space charge density is proportional to position with $\\,\\rho(x) = q\\,G\\,x\\,$. The unit of $\\,G\\,$ is $\\,\\mathrm{m^{-4}}\\,$.\n\nYour program must:\n- Define the space charge density $\\,\\rho(x)\\,$ for each profile according to the physical definitions above.\n- Numerically integrate $\\,\\rho(x)\\,$ over $\\,[-W_p,\\,W_n]\\,$ using a robust composite method that appropriately handles the discontinuity at $\\,x=0\\,$ for the abrupt junction by integrating each side and summing.\n- Return the Boolean result of the consistency check for each test case based on the specified tolerance $\\,\\tau\\,$ in $\\,\\mathrm{C/m^2}\\,$.\n\nTest Suite:\nImplement the check on the following five test cases. For each case, produce one Boolean result.\n\n$\\,\\text{Case 1 (abrupt, symmetric neutrality):}\\,$\n- $\\,N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,W_p = 3\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,W_n = 3\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{Case 2 (abrupt, asymmetric neutrality):}\\,$\n- $\\,N_A = 5\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,W_p = 4\\times 10^{-8}\\,\\mathrm{m}\\,$\n- $\\,W_n = 2\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{Case 3 (linearly graded, symmetric neutrality):}\\,$\n- $\\,G = 1\\times 10^{28}\\,\\mathrm{m^{-4}}\\,$\n- $\\,W_p = 1\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,W_n = 1\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{Case 4 (abrupt, intentional non-neutrality):}\\,$\n- $\\,N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}\\,$\n- $\\,W_p = 3\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,W_n = 2\\times 10^{-7}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\n$\\,\\text{Case 5 (linearly graded, intentional non-neutrality):}\\,$\n- $\\,G = 1\\times 10^{28}\\,\\mathrm{m^{-4}}\\,$\n- $\\,W_p = 1\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,W_n = 1.2\\times 10^{-6}\\,\\mathrm{m}\\,$\n- $\\,\\tau = 1\\times 10^{-12}\\,\\mathrm{C/m^2}\\,$\n\nFinal Output Format:\nYour program should produce a single line of output containing the Boolean results for the five test cases as a comma-separated list enclosed in square brackets, for example $\\,\\,[\\texttt{True},\\texttt{False},\\ldots]\\,\\,$. No additional text or characters should be printed.",
            "solution": "The problem requires a numerical consistency check for charge neutrality in a one-dimensional semiconductor junction model. This check involves computing the total integrated space charge per unit area, $Q$, across the depletion region and verifying if its absolute value is within a specified tolerance, $\\tau$. The governing equation for the total charge is:\n$$\nQ = \\int_{-W_p}^{W_n} \\rho(x)\\,dx\n$$\nwhere $\\rho(x)$ is the space charge density, and the depletion region extends from $x = -W_p$ to $x = W_n$. The condition to be verified is $|Q| \\le \\tau$. The elementary charge is given as $q = 1.602176634\\times 10^{-19}\\,\\mathrm{C}$.\n\nThe problem specifies two models for the space charge density: the abrupt junction and the linearly graded junction. For both models, the function $\\rho(x)$ is a simple polynomial (piecewise constant or linear). Consequently, the definite integral for $Q$ can be computed analytically. This analytical approach provides an exact result, which is inherently more robust and accurate than any numerical approximation method (e.g., composite Simpson's or trapezoidal rules), which would introduce numerical errors. For the abrupt junction, which features a discontinuity, the analytical method correctly handles this by partitioning the integral, as is standard practice.\n\n**Abrupt p-n Junction Model**\nIn the abrupt junction model, the doping concentrations are assumed to be uniform on each side of the metallurgical junction at $x=0$. Under the depletion approximation, the space charge density $\\rho(x)$ is given by the net concentration of ionized acceptors ($N_A$) and donors ($N_D$):\n$$\n\\rho(x) =\n\\begin{cases}\n    -q N_A  \\text{for } -W_p \\le x  0 \\\\\n    +q N_D  \\text{for } 0  x \\le W_n\n\\end{cases}\n$$\nTo calculate the total charge $Q$, we integrate $\\rho(x)$ over the full depletion width $[-W_p, W_n]$. The integral is split at the discontinuity at $x=0$:\n$$\nQ = \\int_{-W_p}^{0} (-q N_A)\\,dx + \\int_{0}^{W_n} (q N_D)\\,dx\n$$\nAs the integrands $-q N_A$ and $q N_D$ are constants, the integration is elementary:\n$$\nQ = -q N_A \\left[x\\right]_{-W_p}^{0} + q N_D \\left[x\\right]_{0}^{W_n}\n$$\n$$\nQ = -q N_A (0 - (-W_p)) + q N_D (W_n - 0)\n$$\n$$\nQ = -q N_A W_p + q N_D W_n = q(N_D W_n - N_A W_p)\n$$\nThis expression provides the exact total charge per unit area. Charge neutrality, $Q=0$, is achieved when $N_D W_n = N_A W_p$.\n\n**Linearly Graded Junction Model**\nFor a linearly graded junction, the net doping concentration is modeled as a linear function of position, $N(x) = Gx$. The corresponding space charge density is:\n$$\n\\rho(x) = q N(x) = q G x \\quad \\text{for } -W_p \\le x \\le W_n\n$$\nThe total charge $Q$ is the integral of this linear function over the depletion region:\n$$\nQ = \\int_{-W_p}^{W_n} q G x \\,dx\n$$\nEvaluating this integral yields:\n$$\nQ = q G \\left[ \\frac{x^2}{2} \\right]_{-W_p}^{W_n} = \\frac{q G}{2} \\left( W_n^2 - (-W_p)^2 \\right)\n$$\n$$\nQ = \\frac{q G}{2} (W_n^2 - W_p^2)\n$$\nThis is the exact expression for the total charge. For this model, charge neutrality is achieved when the depletion region is symmetric, i.e., $W_n = W_p$.\n\n**Evaluation of Test Cases**\nThe derived analytical formulas are now applied to the five test cases. The tolerance for all cases is given as $\\tau = 1 \\times 10^{-12}\\,\\mathrm{C/m^2}$.\n\nCase 1 (abrupt, symmetric):\nGiven $N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$, $N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$, $W_p = 3\\times 10^{-7}\\,\\mathrm{m}$, $W_n = 3\\times 10^{-7}\\,\\mathrm{m}$.\nThe condition $N_A W_p = N_D W_n$ holds.\n$Q = q((1\\times 10^{22})(3\\times 10^{-7}) - (1\\times 10^{22})(3\\times 10^{-7})) = q(3\\times 10^{15} - 3\\times 10^{15}) = 0\\,\\mathrm{C/m^2}$.\n$|Q| = 0$, and $0 \\le 1\\times 10^{-12}$. The result is $\\texttt{True}$.\n\nCase 2 (abrupt, asymmetric):\nGiven $N_A = 5\\times 10^{22}\\,\\mathrm{m^{-3}}$, $N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$, $W_p = 4\\times 10^{-8}\\,\\mathrm{m}$, $W_n = 2\\times 10^{-7}\\,\\mathrm{m}$.\nThe condition $N_A W_p = (5\\times 10^{22})(4\\times 10^{-8}) = 2\\times 10^{15}$ and $N_D W_n = (1\\times 10^{22})(2\\times 10^{-7}) = 2\\times 10^{15}$ holds.\n$Q = q(2\\times 10^{15} - 2\\times 10^{15}) = 0\\,\\mathrm{C/m^2}$.\n$|Q| = 0$, and $0 \\le 1\\times 10^{-12}$. The result is $\\texttt{True}$.\n\nCase 3 (linearly graded, symmetric):\nGiven $G = 1\\times 10^{28}\\,\\mathrm{m^{-4}}$, $W_p = 1\\times 10^{-6}\\,\\mathrm{m}$, $W_n = 1\\times 10^{-6}\\,\\mathrm{m}$.\nThe condition $W_p = W_n$ holds.\n$Q = \\frac{q G}{2} ((1\\times 10^{-6})^2 - (1\\times 10^{-6})^2) = \\frac{q G}{2} (1\\times 10^{-12} - 1\\times 10^{-12}) = 0\\,\\mathrm{C/m^2}$.\n$|Q| = 0$, and $0 \\le 1\\times 10^{-12}$. The result is $\\texttt{True}$.\n\nCase 4 (abrupt, non-neutral):\nGiven $N_A = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$, $N_D = 1\\times 10^{22}\\,\\mathrm{m^{-3}}$, $W_p = 3\\times 10^{-7}\\,\\mathrm{m}$, $W_n = 2\\times 10^{-7}\\,\\mathrm{m}$.\n$Q = q((1\\times 10^{22})(2\\times 10^{-7}) - (1\\times 10^{22})(3\\times 10^{-7})) = q(2\\times 10^{15} - 3\\times 10^{15}) = -q \\times 10^{15}\\,\\mathrm{C/m^2}$.\n$Q = -(1.602176634\\times 10^{-19}) \\times 10^{15} \\approx -1.602\\times 10^{-4}\\,\\mathrm{C/m^2}$.\n$|Q| \\approx 1.602\\times 10^{-4}$, which is not less than or equal to $1\\times 10^{-12}$. The result is $\\texttt{False}$.\n\nCase 5 (linearly graded, non-neutral):\nGiven $G = 1\\times 10^{28}\\,\\mathrm{m^{-4}}$, $W_p = 1\\times 10^{-6}\\,\\mathrm{m}$, $W_n = 1.2\\times 10^{-6}\\,\\mathrm{m}$.\n$Q = \\frac{q G}{2} ((1.2\\times 10^{-6})^2 - (1\\times 10^{-6})^2) = \\frac{q G}{2} (1.44\\times 10^{-12} - 1\\times 10^{-12}) = \\frac{q G}{2} (0.44\\times 10^{-12})$.\n$Q = \\frac{(1.602176634\\times 10^{-19})(1\\times 10^{28})}{2} (0.44\\times 10^{-12}) \\approx 0.352\\times 10^{-3}\\,\\mathrm{C/m^2}$.\n$|Q| \\approx 3.52\\times 10^{-4}$, which is not less than or equal to $1\\times 10^{-12}$. The result is $\\texttt{False}$.\n\nThe final sequence of Boolean results is $[\\texttt{True}, \\texttt{True}, \\texttt{True}, \\texttt{False}, \\texttt{False}]$.",
            "answer": "```python\nimport numpy as np\n\ndef calculate_Q_abrupt(NA, ND, Wp, Wn, q):\n    \"\"\"\n    Calculates the total charge per unit area Q for an abrupt p-n junction.\n    The formula is derived from the analytical integral of the piecewise constant\n    space charge density.\n    \"\"\"\n    return q * (ND * Wn - NA * Wp)\n\ndef calculate_Q_linear(alpha, Wp, Wn, q):\n    \"\"\"\n    Calculates the total charge per unit area Q for a linearly graded junction.\n    The formula is derived from the analytical integral of the linear\n    space charge density.\n    \"\"\"\n    return (q * alpha / 2.0) * (Wn**2 - Wp**2)\n\ndef solve():\n    \"\"\"\n    Runs a series of charge neutrality consistency checks for different\n    semiconductor junction profiles.\n    \"\"\"\n    # Define the elementary charge in Coulombs\n    q = 1.602176634e-19\n\n    # Define the test suite as a list of dictionaries for clarity\n    test_cases = [\n        {\n            \"id\": 1,\n            \"type\": \"abrupt\",\n            \"params\": {\"NA\": 1e22, \"ND\": 1e22, \"Wp\": 3e-7, \"Wn\": 3e-7},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 2,\n            \"type\": \"abrupt\",\n            \"params\": {\"NA\": 5e22, \"ND\": 1e22, \"Wp\": 4e-8, \"Wn\": 2e-7},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 3,\n            \"type\": \"linear\",\n            \"params\": {\"alpha\": 1e28, \"Wp\": 1e-6, \"Wn\": 1e-6},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 4,\n            \"type\": \"abrupt\",\n            \"params\": {\"NA\": 1e22, \"ND\": 1e22, \"Wp\": 3e-7, \"Wn\": 2e-7},\n            \"tau\": 1e-12\n        },\n        {\n            \"id\": 5,\n            \"type\": \"linear\",\n            \"params\": {\"alpha\": 1e28, \"Wp\": 1e-6, \"Wn\": 1.2e-6},\n            \"tau\": 1e-12\n        },\n    ]\n\n    results = []\n    for case in test_cases:\n        Q = 0.0\n        if case[\"type\"] == \"abrupt\":\n            # Unpack parameters for the abrupt junction model\n            NA = case[\"params\"][\"NA\"]\n            ND = case[\"params\"][\"ND\"]\n            Wp = case[\"params\"][\"Wp\"]\n            Wn = case[\"params\"][\"Wn\"]\n            # Calculate the total charge using the analytical formula\n            Q = calculate_Q_abrupt(NA, ND, Wp, Wn, q)\n        elif case[\"type\"] == \"linear\":\n            # Unpack parameters for the linearly graded junction model\n            alpha = case[\"params\"][\"alpha\"]\n            Wp = case[\"params\"][\"Wp\"]\n            Wn = case[\"params\"][\"Wn\"]\n            # Calculate the total charge using the analytical formula\n            Q = calculate_Q_linear(alpha, Wp, Wn, q)\n        \n        # Perform the consistency check: |Q| = tau\n        is_neutral = np.abs(Q) = case[\"tau\"]\n        results.append(is_neutral)\n\n    # Format the final output as a comma-separated list of Booleans in brackets\n    print(f\"[{','.join(map(str, results))}]\")\n\n# Execute the main function\nif __name__ == \"__main__\":\n    solve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "本章的实践始于一项基础但至关重要的任务：从第一性原理出发推导双极结型晶体管（BJT）的共基极电流增益 $\\alpha_F$。这项练习将理论与实践相结合，要求您通过求解半导体物理的基本方程，来量化决定增益的两个核心物理机制：发射区注入效率 $\\gamma$ 和基区输运系数 $\\alpha_T$。完成此练习不仅能让您计算出具体的增益数值，更能加深您对晶体管内部载流子输运过程的物理理解。",
            "id": "3733943",
            "problem": "考虑一个一维、突变、均匀掺杂、在正向有源区工作的NPN型双极结型晶体管（BJT），该晶体管在低水平注入条件下运行，集电极-基极结反向偏置，以至于所有到达基极-集电极耗尽区边缘的少数载流子电子都被瞬间收集。基区是准中性的，其均匀复合特性由少数载流子电子扩散长度 $L_n$ 和电子扩散常数 $D_{n,B}$ 描述。发射区是准中性的，宽度为 $W_E$，少数载流子空穴扩散常数为 $D_{p,E}$。假设发射区中的少数载流子空穴扩散长度远大于发射区宽度（即 $L_{p,E} \\gg W_E$），因此发射区内的复合可以忽略不计，且发射区内稳态少数载流子空穴分布可很好地近似为线性。设发射极掺杂浓度为 $N_E$，基极掺杂浓度为 $N_B$。使用质量作用定律将平衡少数载流子浓度与掺杂关联起来，并使用稳态漂移-扩散和连续性关系，结合耗尽区边缘的适当边界条件，从第一性原理推导出共基极正向电流增益 $\\alpha_F$。\n\n给定参数：\n- 基极宽度 $W_B = 2.0 \\times 10^{-5}\\ \\text{cm}$，\n- 基极中少数载流子电子扩散长度 $L_n = 4.0 \\times 10^{-4}\\ \\text{cm}$，\n- 基极中电子扩散常数 $D_{n,B} = 25\\ \\text{cm}^2/\\text{s}$，\n- 发射极施主浓度 $N_E = 2.0 \\times 10^{19}\\ \\text{cm}^{-3}$，\n- 基极受主浓度 $N_B = 1.0 \\times 10^{17}\\ \\text{cm}^{-3}$，\n- 发射极宽度 $W_E = 1.0 \\times 10^{-4}\\ \\text{cm}$，\n- 发射极中空穴扩散常数 $D_{p,E} = 10\\ \\text{cm}^2/\\text{s}$。\n\n计算该器件的共基极正向电流增益 $\\alpha_F$。将最终的 $\\alpha_F$ 表示为无量纲的小数，并将答案四舍五入到四位有效数字。在推导过程中，明确说明所有边界条件和近似。然后，基于您推导出的 $\\alpha_F$ 关于 $\\{W_B, L_n, D_{n,B}, N_E, N_B, W_E, D_{p,E}\\}$ 的解析表达式，讨论哪种单参数微扰（增加或减少）最能有效地增加 $\\alpha_F$，并根据表达式的结构论证您的推理，不使用任何晶体管简化公式。",
            "solution": "该问题要求从第一性原理推导NPN型双极结型晶体管（BJT）的共基极正向电流增益 $\\alpha_F$，然后进行数值计算并对推导出的表达式进行分析。\n\n该问题经证实是科学上合理的、适定的和客观的。所有提供的参数在物理上都是现实的，其基础模型是半导体器件物理学中使用的标准表示。该问题是自洽的，因为像本征载流子浓度 $n_i$ 和热电压 $V_T$ 这样的基本常数将在 $\\alpha_F$ 的最终表达式中被消去。\n\n共基极正向电流增益 $\\alpha_F$ 定义为在正向有源工作模式（$V_{BE} > 0$, $V_{CB} \\ge 0$）下，集电极电流 $I_C$ 与发射极电流 $I_E$ 之比。对于NPN型晶体管，电流由电子和空穴分量组成。\n$$ \\alpha_F = \\frac{I_{Cn}}{I_E} = \\frac{I_{Cn}}{I_{En} + I_{Ep}} $$\n其中，$I_{Cn}$ 是到达集电极的电子电流，$I_{En}$ 是从发射极注入基极的电子电流，$I_{Ep}$ 是从基极注入发射极的空穴电流。所有电流都定义为正值。\n\n这可以表示为两个因子的乘积：基区输运系数 $\\alpha_T$ 和发射极注入效率 $\\gamma$。\n$$ \\alpha_F = \\alpha_T \\cdot \\gamma $$\n其中\n$$ \\alpha_T = \\frac{I_{Cn}}{I_{En}} \\quad \\text{且} \\quad \\gamma = \\frac{I_{En}}{I_{En} + I_{Ep}} = \\frac{1}{1 + I_{Ep}/I_{En}} $$\n\n我们将通过求解准中性基区和发射区中的稳态漂移-扩散和连续性方程来推导电流分量的表达式。我们将使用电流密度 ($J$) 进行计算，假设横截面积 $A$ 均匀，因此 $I = J \\cdot A$。面积 $A$ 将在比值中被消去。\n\n**1. 基区分析与 $\\alpha_T$ 的计算**\n\n基区是一个准中性的p型区域。在低水平注入下，由少数载流子（电子）产生的电流主要由扩散主导。基区中过剩少数载流子电子 $\\delta n_p(x) = n_p(x) - n_{p0}$ 的稳态连续性方程为：\n$$ \\frac{d^2 \\delta n_p(x)}{dx^2} - \\frac{\\delta n_p(x)}{L_n^2} = 0 $$\n其中 $L_n = \\sqrt{D_{n,B} \\tau_n}$ 是少数载流子电子扩散长度，$D_{n,B}$ 是基区中的电子扩散常数，$\\tau_n$ 是电子寿命。我们定义基区从 $x=0$ 处的发射极-基极耗尽区边缘延伸到 $x=W_B$ 处的集电极-基极耗尽区边缘。\n\n边界条件是：\n1.  在发射极-基极结边缘（$x=0$），该结为正向偏置，适用结定律：\n    $$ \\delta n_p(0) = n_{p0} \\left( \\exp\\left(\\frac{q V_{BE}}{k_B T}\\right) - 1 \\right) $$\n    其中 $n_{p0}$ 是基区中的平衡电子浓度。\n2.  在集电极-基极结边缘（$x=W_B$），该结为反向偏置，所有到达的电子都被收集。这意味着少数载流子浓度被驱动到（接近）零。\n    $$ \\delta n_p(W_B) = 0 $$\n\n微分方程的通解为 $\\delta n_p(x) = C_1 \\exp(x/L_n) + C_2 \\exp(-x/L_n)$。应用边界条件时，使用双曲函数的形式更方便：\n$$ \\delta n_p(x) = A \\sinh\\left(\\frac{W_B-x}{L_n}\\right) + C \\cosh\\left(\\frac{W_B-x}{L_n}\\right) $$\n在 $x=W_B$ 处应用条件：$\\delta n_p(W_B) = A \\sinh(0) + C \\cosh(0) = C = 0$。\n解简化为 $\\delta n_p(x) = A \\sinh\\left(\\frac{W_B-x}{L_n}\\right)$。\n在 $x=0$ 处应用条件：$\\delta n_p(0) = A \\sinh(W_B/L_n)$。因此，$A = \\delta n_p(0) / \\sinh(W_B/L_n)$。\n基区中的过剩电子分布为：\n$$ \\delta n_p(x) = \\delta n_p(0) \\frac{\\sinh\\left(\\frac{W_B-x}{L_n}\\right)}{\\sinh\\left(\\frac{W_B}{L_n}\\right)} $$\n电子扩散电流密度为 $J_n(x) = q D_{n,B} \\frac{d n_p}{dx} = q D_{n,B} \\frac{d \\delta n_p}{dx}$。\n$$ \\frac{d \\delta n_p}{dx} = -\\frac{\\delta n_p(0)}{L_n \\sinh(W_B/L_n)} \\cosh\\left(\\frac{W_B-x}{L_n}\\right) $$\n在 $x=0$ 处注入基极的电子电流密度为 $J_{En}$：\n$$ J_{En} = |J_n(0)| = \\left| q D_{n,B} \\left( -\\frac{\\delta n_p(0)}{L_n} \\coth\\left(\\frac{W_B}{L_n}\\right) \\right) \\right| = \\frac{q D_{n,B} \\delta n_p(0)}{L_n} \\coth\\left(\\frac{W_B}{L_n}\\right) $$\n在 $x=W_B$ 处收集的电子电流密度为 $J_{Cn}$：\n$$ J_{Cn} = |J_n(W_B)| = \\left| q D_{n,B} \\left( -\\frac{\\delta n_p(0)}{L_n \\sinh(W_B/L_n)} \\right) \\right| = \\frac{q D_{n,B} \\delta n_p(0)}{L_n \\sinh(W_B/L_n)} $$\n基区输运系数 $\\alpha_T$ 是这些电流的比值：\n$$ \\alpha_T = \\frac{J_{Cn}}{J_{En}} = \\frac{1/\\sinh(W_B/L_n)}{\\coth(W_B/L_n)} = \\frac{1}{\\cosh(W_B/L_n)} $$\n\n**2. 发射区分析与 $\\gamma$ 的计算**\n\n发射区是一个准中性的n型区域。问题陈述复合可以忽略（$L_{p,E} \\gg W_E$），且少数载流子（空穴）分布是线性的。这对应于“短基区二极管”近似。发射区中过剩空穴 $\\delta p_n(x')$ 的连续性方程变为：\n$$ \\frac{d^2 \\delta p_n(x')}{dx'^2} = 0 $$\n其中 $x'$ 是发射区中的坐标，在EB结边缘处为 $x'=0$，在发射极接触处为 $x'=-W_E$。\n\n边界条件是：\n1.  在发射极-基极结边缘（$x'=0$）：\n    $$ \\delta p_n(0) = p_{n0} \\left( \\exp\\left(\\frac{q V_{BE}}{k_B T}\\right) - 1 \\right) $$\n    其中 $p_{n0}$ 是发射区中的平衡空穴浓度。\n2.  在欧姆接触处（$x'=-W_E$）：过剩载流子浓度为零。\n    $$ \\delta p_n(-W_E) = 0 $$\n该微分方程的解是一个线性函数 $\\delta p_n(x') = C_1 x' + C_2$。\n应用边界条件：\n由 $\\delta p_n(0) = C_2$，我们得到 $C_2 = \\delta p_n(0)$。\n由 $\\delta p_n(-W_E) = -C_1 W_E + C_2 = 0$，我们得到 $C_1 = C_2/W_E = \\delta p_n(0)/W_E$。\n过剩空穴分布为 $\\delta p_n(x') = \\delta p_n(0) (1 + x'/W_E)$。\n从基极注入发射极的空穴扩散电流密度为 $J_{Ep} = |-q D_{p,E} \\frac{d p_n}{dx'}|_{x'=0}$。\n$$ \\frac{d p_n}{dx'} = \\frac{d \\delta p_n}{dx'} = \\frac{\\delta p_n(0)}{W_E} $$\n$$ J_{Ep} = \\frac{q D_{p,E} \\delta p_n(0)}{W_E} $$\n发射极注入效率 $\\gamma$ 取决于比值 $J_{Ep}/J_{En}$：\n$$ \\frac{J_{Ep}}{J_{En}} = \\frac{q D_{p,E} \\delta p_n(0) / W_E}{q D_{n,B} \\delta n_p(0) / L_n \\coth(W_B/L_n)} = \\frac{D_{p,E} L_n}{D_{n,B} W_E \\coth(W_B/L_n)} \\frac{\\delta p_n(0)}{\\delta n_p(0)} $$\n对两种载流子都使用结定律，结处过剩浓度的比率等于平衡浓度的比率：$\\delta p_n(0)/\\delta n_p(0) = p_{n0}/n_{p0}$。\n使用质量作用定律（$n_i^2 = np$）并假设掺杂物完全电离（$n_{n0} \\approx N_E$, $p_{p0} \\approx N_B$）：\n$p_{n0} = n_i^2 / N_E$ 和 $n_{p0} = n_i^2 / N_B$。\n$$ \\frac{p_{n0}}{n_{p0}} = \\frac{n_i^2/N_E}{n_i^2/N_B} = \\frac{N_B}{N_E} $$\n将此代入电流比：\n$$ \\frac{J_{Ep}}{J_{En}} = \\frac{D_{p,E} L_n N_B}{D_{n,B} W_E N_E \\coth(W_B/L_n)} $$\n然后，发射极注入效率为：\n$$ \\gamma = \\left( 1 + \\frac{D_{p,E} L_n N_B}{D_{n,B} W_E N_E \\coth(W_B/L_n)} \\right)^{-1} $$\n\n**3. $\\alpha_F$ 的完整表达式和数值计算**\n\n结合 $\\alpha_T$ 和 $\\gamma$ 的表达式，我们得到 $\\alpha_F$ 的完整解析表达式：\n$$ \\alpha_F = \\alpha_T \\cdot \\gamma = \\frac{1}{\\cosh(W_B/L_n)} \\left( 1 + \\frac{D_{p,E} L_n N_B \\tanh(W_B/L_n)}{D_{n,B} W_E N_E} \\right)^{-1} $$\n\n现在，我们代入给定的数值：\n- $W_B = 2.0 \\times 10^{-5}\\ \\text{cm}$\n- $L_n = 4.0 \\times 10^{-4}\\ \\text{cm}$\n- $D_{n,B} = 25\\ \\text{cm}^2/\\text{s}$\n- $N_E = 2.0 \\times 10^{19}\\ \\text{cm}^{-3}$\n- $N_B = 1.0 \\times 10^{17}\\ \\text{cm}^{-3}$\n- $W_E = 1.0 \\times 10^{-4}\\ \\text{cm}$\n- $D_{p,E} = 10\\ \\text{cm}^2/\\text{s}$\n\n首先，计算关键的无量纲比值：\n$$ \\frac{W_B}{L_n} = \\frac{2.0 \\times 10^{-5}\\ \\text{cm}}{4.0 \\times 10^{-4}\\ \\text{cm}} = 0.05 $$\n计算基区输运系数 $\\alpha_T$：\n$$ \\alpha_T = \\frac{1}{\\cosh(0.05)} \\approx \\frac{1}{1.00125026} \\approx 0.99875156 $$\n接下来，计算发射极注入效率 $\\gamma$ 的比值项。我们称此项为 $R_\\gamma$：\n$$ R_\\gamma = \\frac{D_{p,E} L_n N_B \\tanh(W_B/L_n)}{D_{n,B} W_E N_E} $$\n$$ R_\\gamma = \\frac{(10)(4.0 \\times 10^{-4})(1.0 \\times 10^{17})}{(25)(1.0 \\times 10^{-4})(2.0 \\times 10^{19})} \\tanh(0.05) $$\n$$ R_\\gamma = \\frac{4.0 \\times 10^{14}}{5.0 \\times 10^{16}} \\tanh(0.05) = 0.008 \\times \\tanh(0.05) $$\n使用 $\\tanh(0.05) \\approx 0.04995839$：\n$$ R_\\gamma \\approx 0.008 \\times 0.04995839 \\approx 0.000399667 $$\n计算发射极注入效率 $\\gamma$：\n$$ \\gamma = (1 + R_\\gamma)^{-1} \\approx (1 + 0.000399667)^{-1} \\approx 0.99960019 $$\n最后，计算 $\\alpha_F$：\n$$ \\alpha_F = \\alpha_T \\cdot \\gamma \\approx 0.99875156 \\times 0.99960019 \\approx 0.99835215 $$\n四舍五入到四位有效数字，我们得到 $\\alpha_F \\approx 0.9984$。\n\n**4. 参数微扰分析**\n\n为了增加 $\\alpha_F$，我们需要使其更接近1。这等同于最小化 $1-\\alpha_F$ 这个量。对于接近1的 $\\alpha_T$ 和 $\\gamma$ 值，我们可以近似：\n$$ 1 - \\alpha_F = 1 - \\alpha_T\\gamma \\approx (1-\\alpha_T) + (1-\\gamma) $$\n使用小参数近似 $\\cosh(x) \\approx 1+x^2/2$ 对于 $x=W_B/L_n \\ll 1$，基区输运系数缺陷为：\n$$ 1 - \\alpha_T = 1 - \\frac{1}{\\cosh(W_B/L_n)} \\approx 1 - \\frac{1}{1+(W_B/L_n)^2/2} \\approx \\frac{1}{2}\\left(\\frac{W_B}{L_n}\\right)^2 $$\n发射极注入效率缺陷为：\n$$ 1 - \\gamma = 1 - \\frac{1}{1+R_\\gamma} \\approx R_\\gamma = \\frac{D_{p,E} L_n N_B \\tanh(W_B/L_n)}{D_{n,B} W_E N_E} $$\n使用近似 $\\tanh(x) \\approx x$ 对于 $x \\ll 1$：\n$$ 1 - \\gamma \\approx \\frac{D_{p,E} L_n N_B}{D_{n,B} W_E N_E} \\left(\\frac{W_B}{L_n}\\right) = \\frac{D_{p,E} W_B N_B}{D_{n,B} W_E N_E} $$\n因此，要增加 $\\alpha_F$，我们必须最小化：\n$$ 1 - \\alpha_F \\approx \\frac{1}{2}\\left(\\frac{W_B}{L_n}\\right)^2 + \\frac{D_{p,E} W_B N_B}{D_{n,B} W_E N_E} $$\n数值上，第一项（基区复合）是 $\\frac{1}{2}(0.05)^2 = 0.00125$。第二项（发射极注入缺陷）是 $R_\\gamma \\approx 0.00040$。在这个特定的晶体管中，基区复合是主要的损耗机制。\n\n为了找到最有效的单参数改变来增加 $\\alpha_F$，我们应该分析哪个参数对减少这两个损耗项的和有最强的影响。\n- **减小基极宽度 ($W_B$)**: 这个参数出现在两项中。减小 $W_B$ 使第一项二次方减小，第二项线性减小。这具有强大的双重好处，既改善了基区输运系数，又改善了发射极注入效率。\n- **增加发射极掺杂 ($N_E$)**: 这通过减小第二项（成反比）来增加 $\\gamma$。它对 $\\alpha_T$ 没有影响。这是一种标准且有效的方法。\n- **减少基极掺杂 ($N_B$)**: 这通过减小第二项（成正比）来增加 $\\gamma$。它对 $\\alpha_T$ 没有影响。这也有效。\n- **增加基极中电子的扩散长度 ($L_n$)**: 这通过减小第一项（与 $L_n^2$ 成反比）来改善 $\\alpha_T$。它对 $\\gamma$ 的影响是轻微的负面影响（因为 $L_n \\tanh(W_B/L_n)$ 随 $L_n$ 缓慢增加），但这个影响很小。主要影响是对 $\\alpha_T$ 的改善。\n\n比较这些选项，**减小基极宽度 $W_B$** 是最有效的单参数微扰。这是因为它强烈改善了两个损耗分量中较大的一个（基区输运系数缺陷，依赖于 $W_B^2$），同时还改善了第二个损耗分量（发射极效率缺陷，依赖于 $W_B$）。没有其他单一参数能同时对两种损耗机制产生有益影响。虽然改变掺杂（$N_E$，$N_B$）对发射极效率非常重要，但在这种情况下，基区输运是更大的限制因素，使得 $W_B$ 成为最关键的调整参数。",
            "answer": "$$\n\\boxed{0.9984}\n$$"
        },
        {
            "introduction": "在掌握了电流增益的基本构成后，下一个实践将带您深入晶体管设计的核心——优化。通过推导电流增益 $\\alpha_F$ 对基区宽度 $W_B$ 的灵敏度，我们将定量地揭示为何制造窄基区对于实现高性能器件至关重要。这项练习旨在锻炼您的解析建模能力，并让您体会到在实际器件工程中，如何通过控制关键几何参数来优化电学性能。",
            "id": "3733924",
            "problem": "一个均匀掺杂、长发射区、工作在正向有源区的 $n$-$p$-$n$ 型双极结型晶体管（BJT）在宽度为 $W_B$ 的基区上沿一维空间进行建模。假设基区为低注入水平，耗尽区中的复合可忽略不计，准中性基区中的内建电场可忽略不计。基区中的过剩少数载流子电子浓度 $\\delta n(x)$（对于 $x \\in [0, W_B]$，其中x从发射结-基区冶金结处开始，沿基区朝向集电极方向测量）服从稳态扩散-复合方程\n$$\n\\frac{d^{2} \\delta n}{dx^{2}}=\\frac{\\delta n}{L_n^{2}},\n$$\n其中 $L_n=\\sqrt{D_n \\tau_n}$ 是基区中电子的扩散长度，$D_n$ 是电子扩散系数，$\\tau_n$ 是基区中有效的少数载流子电子寿命。边界条件为 $\\delta n(0)=\\delta n_E$（由正向偏置的发射结-基区结设定）和 $\\delta n(W_B)=0$（由反向偏置的集电结-基区结施加）。基区中的电子扩散电流密度为 $J_n(x)=q D_n \\, d\\delta n/dx$。定义基区输运系数 $\\alpha_T$ 为到达集电极边缘的电子电流密度与从发射极边缘进入的电子电流密度之比，即 $\\alpha_T \\equiv |J_n(W_B)|/|J_n(0)|$。正向共基极电流增益为 $\\alpha_F=\\gamma \\, \\alpha_T$，其中 $\\gamma \\in (0,1)$ 是发射极注入效率，在所关注的范围内，您可以将其视为与 $W_B$ 无关。\n\n从扩散-复合方程和给定的边界条件出发（不使用任何简化公式），推导出 $\\alpha_T$ 作为 $W_B$ 和 $L_n$ 的函数，然后与 $\\alpha_F=\\gamma \\alpha_T$ 结合，计算在 $L_n$ 和 $\\gamma$ 固定的情况下的灵敏度 $\\partial \\alpha_F/\\partial W_B$。将您的最终结果表示为包含 $W_B$、$L_n$ 和 $\\gamma$ 的单一闭合形式解析表达式。该灵敏度的物理量纲是长度的倒数；例如，如果 $W_B$ 的单位是厘米，那么 $\\partial \\alpha_F/\\partial W_B$ 的单位就是厘米的倒数。在您的最终答案框中不要包含单位。\n\n用文字简要解释控制 $W_B$ 如何影响 $\\alpha_F$，以及这对优化由 $\\beta=\\alpha_F/(1-\\alpha_F)$ 定义的正向共发射极电流增益 $\\beta$ 意味着什么。不需要进行数值计算。",
            "solution": "该问题是有效的，因为它在科学上基于半导体器件物理，问题提法清晰，具有明确的微分方程和边界条件，并且陈述客观。\n\n分析始于求解在 p 型基区中 $x \\in [0, W_B]$ 范围内的过剩少数载流子电子浓度 $\\delta n(x)$ 的一维稳态扩散-复合方程：\n$$\n\\frac{d^{2} \\delta n}{dx^{2}}=\\frac{\\delta n}{L_n^{2}}\n$$\n这是一个二阶线性齐次常微分方程。其通解可以方便地用双曲函数表示：\n$$\n\\delta n(x) = A \\sinh\\left(\\frac{x}{L_n}\\right) + B \\cosh\\left(\\frac{x}{L_n}\\right)\n$$\n积分常数 $A$ 和 $B$ 由给定的边界条件确定。\n\n在发射结-基区结的边缘，$x=0$ 处，过剩浓度被指定为 $\\delta n(0)=\\delta n_E$。应用此条件：\n$$\n\\delta n(0) = A \\sinh(0) + B \\cosh(0) = A \\cdot 0 + B \\cdot 1 = B\n$$\n因此，$B = \\delta n_E$。\n\n在集电结-基区结的边缘，$x=W_B$ 处，反向偏置施加了条件 $\\delta n(W_B)=0$。应用此条件：\n$$\n\\delta n(W_B) = A \\sinh\\left(\\frac{W_B}{L_n}\\right) + \\delta n_E \\cosh\\left(\\frac{W_B}{L_n}\\right) = 0\n$$\n求解常数 $A$：\n$$\nA = -\\delta n_E \\frac{\\cosh(W_B/L_n)}{\\sinh(W_B/L_n)}\n$$\n将确定的常数 $A$ 和 $B$ 代回通解，得到基区内过剩少数载流子电子浓度的具体分布：\n$$\n\\delta n(x) = -\\delta n_E \\frac{\\cosh(W_B/L_n)}{\\sinh(W_B/L_n)} \\sinh\\left(\\frac{x}{L_n}\\right) + \\delta n_E \\cosh\\left(\\frac{x}{L_n}\\right)\n$$\n该表达式可以使用双曲恒等式 $\\sinh(u-v)=\\sinh(u)\\cosh(v)-\\cosh(u)\\sinh(v)$ 进行简化：\n$$\n\\delta n(x) = \\frac{\\delta n_E}{\\sinh(W_B/L_n)} \\left[ \\sinh\\left(\\frac{W_B}{L_n}\\right)\\cosh\\left(\\frac{x}{L_n}\\right) - \\cosh\\left(\\frac{W_B}{L_n}\\right)\\sinh\\left(\\frac{x}{L_n}\\right) \\right] = \\delta n_E \\frac{\\sinh\\left(\\frac{W_B-x}{L_n}\\right)}{\\sinh\\left(\\frac{W_B}{L_n}\\right)}\n$$\n电子扩散电流密度由 $J_n(x)=q D_n \\, d\\delta n/dx$ 给出。我们首先计算浓度分布的梯度：\n$$\n\\frac{d\\delta n}{dx} = \\frac{d}{dx} \\left[ \\delta n_E \\frac{\\sinh\\left(\\frac{W_B-x}{L_n}\\right)}{\\sinh\\left(\\frac{W_B}{L_n}\\right)} \\right] = \\frac{\\delta n_E}{\\sinh\\left(\\frac{W_B}{L_n}\\right)} \\cosh\\left(\\frac{W_B-x}{L_n}\\right) \\cdot \\left(-\\frac{1}{L_n}\\right)\n$$\n$$\n\\frac{d\\delta n}{dx} = -\\frac{\\delta n_E}{L_n \\sinh\\left(\\frac{W_B}{L_n}\\right)} \\cosh\\left(\\frac{W_B-x}{L_n}\\right)\n$$\n那么电子电流密度为：\n$$\nJ_n(x) = - \\frac{q D_n \\delta n_E}{L_n \\sinh\\left(\\frac{W_B}{L_n}\\right)} \\cosh\\left(\\frac{W_B-x}{L_n}\\right)\n$$\n基区输运系数 $\\alpha_T$ 定义为到达集电极的电子电流密度大小与从发射极注入的电子电流密度大小之比，即 $\\alpha_T = |J_n(W_B)|/|J_n(0)|$。我们在两个边界处计算 $J_n(x)$ 的值。\n\n在发射极边缘，$x=0$ 处：\n$$\nJ_n(0) = - \\frac{q D_n \\delta n_E}{L_n \\sinh\\left(\\frac{W_B}{L_n}\\right)} \\cosh\\left(\\frac{W_B}{L_n}\\right) = - \\frac{q D_n \\delta n_E}{L_n} \\coth\\left(\\frac{W_B}{L_n}\\right)\n$$\n在集电极边缘，$x=W_B$ 处：\n$$\nJ_n(W_B) = - \\frac{q D_n \\delta n_E}{L_n \\sinh\\left(\\frac{W_B}{L_n}\\right)} \\cosh(0) = - \\frac{q D_n \\delta n_E}{L_n \\sinh\\left(\\frac{W_B}{L_n}\\right)}\n$$\n由于在整个基区内浓度梯度为负，因此对于所有 $x \\in [0, W_B]$，$J_n(x)$ 均为负值。因此，大小之比即为表达式本身之比：\n$$\n\\alpha_T = \\frac{J_n(W_B)}{J_n(0)} = \\frac{- \\frac{q D_n \\delta n_E}{L_n \\sinh(W_B/L_n)}}{- \\frac{q D_n \\delta n_E}{L_n} \\frac{\\cosh(W_B/L_n)}{\\sinh(W_B/L_n)}} = \\frac{1}{\\cosh\\left(\\frac{W_B}{L_n}\\right)}\n$$\n正向共基极电流增益为 $\\alpha_F = \\gamma \\alpha_T$。代入 $\\alpha_T$ 的表达式：\n$$\n\\alpha_F(W_B) = \\frac{\\gamma}{\\cosh\\left(\\frac{W_B}{L_n}\\right)}\n$$\n为了求出 $\\alpha_F$ 相对于基区宽度 $W_B$ 的灵敏度，我们计算偏导数 $\\partial \\alpha_F/\\partial W_B$，同时保持 $\\gamma$ 和 $L_n$ 不变。\n$$\n\\frac{\\partial \\alpha_F}{\\partial W_B} = \\frac{\\partial}{\\partial W_B} \\left[ \\gamma \\left(\\cosh\\left(\\frac{W_B}{L_n}\\right)\\right)^{-1} \\right]\n$$\n使用链式法则：\n$$\n\\frac{\\partial \\alpha_F}{\\partial W_B} = \\gamma \\left[ -1 \\left(\\cosh\\left(\\frac{W_B}{L_n}\\right)\\right)^{-2} \\cdot \\sinh\\left(\\frac{W_B}{L_n}\\right) \\cdot \\frac{1}{L_n} \\right]\n$$\n这可以简化为灵敏度的最终表达式：\n$$\n\\frac{\\partial \\alpha_F}{\\partial W_B} = -\\frac{\\gamma}{L_n} \\frac{\\sinh\\left(\\frac{W_B}{L_n}\\right)}{\\cosh^{2}\\left(\\frac{W_B}{L_n}\\right)}\n$$\n这也可以用其他双曲函数表示为 $-\\frac{\\gamma}{L_n} \\text{sech}\\left(\\frac{W_B}{L_n}\\right) \\tanh\\left(\\frac{W_B}{L_n}\\right)$。\n\n物理解释：量 $\\gamma$、$L_n$、$W_B$ 均为正值。对于 $W_B > 0$，$\\sinh(W_B/L_n)$ 和 $\\cosh(W_B/L_n)$ 也都为正值。因此，灵敏度 $\\partial \\alpha_F/\\partial W_B$ 的整个表达式为负。这表明共基极电流增益 $\\alpha_F$ 随着基区宽度 $W_B$ 的增加而减小。物理上更宽的基区使得少数载流子在渡越期间复合的概率更大，这减少了到达集电极的注入电子的比例。这降低了基区输运系数 $\\alpha_T$，从而也降低了 $\\alpha_F$。\n\n共发射极电流增益 $\\beta = \\alpha_F/(1-\\alpha_F)$ 是 $\\alpha_F$ 的单调递增函数，并且当 $\\alpha_F$ 接近 1 时，它对 $\\alpha_F$ 的变化极其敏感。为了优化晶体管性能并实现高放大倍数（$\\beta \\gg 1$），$\\alpha_F$ 必须尽可能接近 1。我们的结果表明，要实现这一点，需要使基区宽度 $W_B$ 相对于少数载流子扩散长度 $L_n$ 而言，在技术上尽可能小。",
            "answer": "$$\n\\boxed{-\\frac{\\gamma}{L_n} \\frac{\\sinh\\left(\\frac{W_B}{L_n}\\right)}{\\cosh^{2}\\left(\\frac{W_B}{L_n}\\right)}}\n$$"
        },
        {
            "introduction": "最后的实践将我们从理想化的解析模型带入真实器件工作的复杂情境中。本练习聚焦于一个关键的非理想效应——晶体管在高功率工作时的自热效应，它会显著影响器件性能。通过构建一个数值模型来求解电-热耦合的自洽问题，您将获得计算器件建模的动手经验，这是现代半导体工程领域一项不可或缺的技能。",
            "id": "3733932",
            "problem": "考虑一个在共发射极偏置下工作在正向有源区的 $n$-$p$-$n$ 型双极结型晶体管 (BJT)。目标是预测在高电流密度下，由于焦耳自热效应以及由此产生的温升 $\\Delta T$ 对共发射极电流增益 $\\beta$ 的净影响，同时考虑温度引起的迁移率降低和复合增加。程序必须使用一个基于基区扩散输运的物理模型，为每个指定的测试用例计算焦耳自热效应下的自洽 $\\beta$ 值，并报告环境温度（无自热效应）下的 $\\beta$ 值。\n\n使用以下基本依据和建模假设：\n- 共基极电流增益 $\\alpha$ 定义为 $\\alpha = I_C / I_E$，共发射极电流增益 $\\beta$ 定义为 $\\beta = I_C / I_B$，其中 $I_C$ 是集电极电流，$I_E$ 是发射极电流，$I_B$ 是基极电流。由这些定义可得出恒等式 $\\beta = \\alpha / (1 - \\alpha)$。\n- 在均匀掺杂的基区中，少数载流子电子的输运由一维稳态扩散-复合方程 $d^2 \\delta n(x) / dx^2 = \\delta n(x) / L_n^2$ 控制，其中 $\\delta n(x)$ 是过剩少数载流子电子浓度，$L_n$ 是基区中的电子扩散长度。对于宽度为 $W_B$、电场可忽略不计且复合均匀的基区，基区输运因子建模为 $\\alpha_T = \\operatorname{sech}\\!\\left(W_B / L_n\\right) = 1 / \\cosh\\!\\left(W_B / L_n\\right)$。\n- 正向共基极增益为 $\\alpha = \\gamma \\, \\alpha_T$，其中 $\\gamma$ 是发射极注入效率，由于发射极重掺杂，假定其不随温度变化且接近于 1。\n- 基区中的电子扩散系数由爱因斯坦关系式 $D_n(T) = \\mu_n(T) \\, k_B \\, T / q$ 给出，其中 $\\mu_n(T)$ 是温度 $T$ 下的电子迁移率，$k_B$ 是玻尔兹曼常数，$q$ 是元电荷。电子扩散长度为 $L_n(T) = \\sqrt{D_n(T) \\, \\tau_n(T)}$，其中 $\\tau_n(T)$ 是基区中的少数载流子电子寿命。\n- 温度依赖性建模为 $\\mu_n(T) = \\mu_{n0} \\left(T/T_0\\right)^{-m}$ 和 $\\tau_n(T) = \\tau_{n0} \\left(T/T_0\\right)^{-p}$，其中 $\\mu_{n0}$ 和 $\\tau_{n0}$ 是参考温度 $T_0$ 下的迁移率和寿命，$m$ 和 $p$ 分别是反映声子散射和复合动力学的非负指数。\n- 焦耳自热效应通过器件与环境之间的集总热阻 $R_{\\mathrm{th}}$ 进行建模。温升为 $\\Delta T = R_{\\mathrm{th}} \\, P$，其中 $P = V_{CE} \\, I_C$ 是电功耗，$V_{CE}$ 是集电极-发射极电压，$I_C$ 是集电极电流。因此，$T = T_{\\mathrm{amb}} + \\Delta T$，其中 $T_{\\mathrm{amb}}$ 是环境温度。\n\n这些关系意味着一个自洽的不动点问题，因为 $I_C = \\beta(T) \\, I_B$ 通过 $\\beta(T)$ 依赖于 $T$，而 $T$ 又通过焦耳热效应依赖于 $I_C$。您的程序必须通过迭代为每个测试用例求解此不动点，直到温度收敛到指定的容差范围内。如果迭代在合理的步数内不收敛，程序应提供最后一次迭代的值作为近似解，并通过合理的保障措施确保数值稳定性。\n\n为每个测试用例实现以下计算步骤：\n1. 通过设置 $T = T_{\\mathrm{amb}}$ 并计算 $\\mu_n(T)$、$D_n(T)$、$\\tau_n(T)$、$L_n(T)$、$\\alpha_T(T)$、$\\alpha(T)$，最终计算 $\\beta(T) = \\alpha(T) / \\left(1 - \\alpha(T)\\right)$ 来计算环境温度下的结果。\n2. 通过迭代求解焦耳热效应下的自洽温度：\n   - 初始化 $T \\leftarrow T_{\\mathrm{amb}}$。\n   - 在每次迭代中，按步骤1计算 $\\beta(T)$，然后计算 $I_C = \\beta(T) \\, I_B$、$P = V_{CE} \\, I_C$ 和 $T_{\\text{new}} = T_{\\mathrm{amb}} + R_{\\mathrm{th}} \\, P$。\n   - 使用松弛因子更新温度 $T \\leftarrow (1 - \\lambda) \\, T + \\lambda \\, T_{\\text{new}}$，其中 $0 < \\lambda \\leq 1$。\n   - 当 $\\left|T_{\\text{new}} - T\\right|$ 小于指定的容差时终止。\n3. 报告环境温度下的 $\\beta$ 和自洽加热状态下的 $\\beta$。\n\n使用以下常数和单位：\n- 使用 $q = 1.602176634 \\times 10^{-19}\\,\\mathrm{C}$，$k_B = 1.380649 \\times 10^{-23}\\,\\mathrm{J/K}$ 和 $T_0 = 300\\,\\mathrm{K}$。\n- 所有长度单位为 $\\mathrm{m}$，面积单位为 $\\mathrm{m}^2$，电流单位为 $\\mathrm{A}$，电流密度单位为 $\\mathrm{A/m}^2$，电压单位为 $\\mathrm{V}$，热阻单位为 $\\mathrm{K/W}$，时间单位为 $\\mathrm{s}$，温度单位为 $\\mathrm{K}$。\n- 所有报告的 $\\beta$ 值都是无量纲的，并且必须以十进制数输出。\n\n测试套件（每个测试用例提供参数 $(W_B, \\mu_{n0}, \\tau_{n0}, m, p, \\gamma, J_B, A, V_{CE}, R_{\\mathrm{th}}, T_{\\mathrm{amb}})$）：\n- 用例 1（基准，中等加热）：$W_B = 5\\times 10^{-7}\\,\\mathrm{m}$，$\\mu_{n0} = 0.10\\,\\mathrm{m}^2/\\mathrm{V\\,s}$，$\\tau_{n0} = 1.0\\times 10^{-8}\\,\\mathrm{s}$，$m = 1.5$，$p = 1.0$，$\\gamma = 0.995$，$J_B = 1.0\\times 10^{5}\\,\\mathrm{A/m}^2$，$A = 1.0\\times 10^{-8}\\,\\mathrm{m}^2$，$V_{CE} = 2.0\\,\\mathrm{V}$，$R_{\\mathrm{th}} = 100\\,\\mathrm{K/W}$，$T_{\\mathrm{amb}} = 300\\,\\mathrm{K}$。\n- 用例 2（强加热，较大指数）：$W_B = 5\\times 10^{-7}\\,\\mathrm{m}$，$\\mu_{n0} = 0.10\\,\\mathrm{m}^2/\\mathrm{V\\,s}$，$\\tau_{n0} = 1.0\\times 10^{-8}\\,\\mathrm{s}$，$m = 2.0$，$p = 2.0$，$\\gamma = 0.995$，$J_B = 2.0\\times 10^{5}\\,\\mathrm{A/m}^2$，$A = 1.0\\times 10^{-8}\\,\\mathrm{m}^2$，$V_{CE} = 3.0\\,\\mathrm{V}$，$R_{\\mathrm{th}} = 500\\,\\mathrm{K/W}$，$T_{\\mathrm{amb}} = 300\\,\\mathrm{K}$。\n- 用例 3（窄基区，高 $\\beta$ 潜力）：$W_B = 2\\times 10^{-7}\\,\\mathrm{m}$，$\\mu_{n0} = 0.10\\,\\mathrm{m}^2/\\mathrm{V\\,s}$，$\\tau_{n0} = 1.0\\times 10^{-8}\\,\\mathrm{s}$，$m = 1.5$，$p = 1.0$，$\\gamma = 0.995$，$J_B = 1.5\\times 10^{5}\\,\\mathrm{A/m}^2$，$A = 2.0\\times 10^{-8}\\,\\mathrm{m}^2$，$V_{CE} = 2.5\\,\\mathrm{V}$，$R_{\\mathrm{th}} = 200\\,\\mathrm{K/W}$，$T_{\\mathrm{amb}} = 300\\,\\mathrm{K}$。\n- 用例 4（宽基区，低 $\\beta$）：$W_B = 2\\times 10^{-6}\\,\\mathrm{m}$，$\\mu_{n0} = 0.10\\,\\mathrm{m}^2/\\mathrm{V\\,s}$，$\\tau_{n0} = 1.0\\times 10^{-8}\\,\\mathrm{s}$，$m = 1.5$，$p = 1.0$，$\\gamma = 0.995$，$J_B = 1.0\\times 10^{5}\\,\\mathrm{A/m}^2$，$A = 1.0\\times 10^{-8}\\,\\mathrm{m}^2$，$V_{CE} = 2.0\\,\\mathrm{V}$，$R_{\\mathrm{th}} = 100\\,\\mathrm{K/W}$，$T_{\\mathrm{amb}} = 300\\,\\mathrm{K}$。\n\n算法要求：\n- 实现一个不动点迭代，松弛因子 $\\lambda$ 满足 $0 < \\lambda \\leq 1$，温度收敛容差为 $1.0\\times 10^{-6}\\,\\mathrm{K}$。\n- 将最大迭代次数限制为一个有限值以确保终止。使用合理的保障措施，例如在迭代期间将温度限制在物理上合理的范围内。\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表的结果。对于每个测试用例，按顺序输出两个值：首先是环境温度下的 $\\beta$（无自热效应），然后是自洽加热状态下的 $\\beta$。因此，所有四个测试用例的串联输出必须总共包含八个十进制数，例如 $[\\beta_{1,\\mathrm{amb}},\\beta_{1,\\mathrm{heated}},\\beta_{2,\\mathrm{amb}},\\beta_{2,\\mathrm{heated}},\\beta_{3,\\mathrm{amb}},\\beta_{3,\\mathrm{heated}},\\beta_{4,\\mathrm{amb}},\\beta_{4,\\mathrm{heated}}]$。",
            "solution": "该问题已经过验证，被认为是有效的。它在科学上植根于半导体器件物理学，在数学上是适定的，并提供了一套完整且一致的参数和物理模型，以得出一个唯一的解。任务是计算双极结型晶体管在两种条件下的共发射极电流增益 $\\beta$：一是在固定的环境温度下，二是在功耗引起的自热效应下。这需要解决一个自洽的电热问题。\n\n解决方案分两部分进行。首先，我们建立晶体管温度与其电流增益 $\\beta(T)$ 相关的函数。其次，我们使用该函数通过不动点迭代来找到自洽的工作温度和相应的增益。\n\n模型的核心是共发射极增益 $\\beta$ 对温度 $T$ 的依赖性。该关系由恒等式 $\\beta(T) = \\alpha(T) / (1 - \\alpha(T))$ 给出，其中 $\\alpha(T)$ 是共基极电流增益。增益 $\\alpha(T)$ 被建模为发射极注入效率 $\\gamma$ 和基区输运因子 $\\alpha_T(T)$ 的乘积，即 $\\alpha(T) = \\gamma \\alpha_T(T)$。参数 $\\gamma$ 被假定为一个常数，与温度无关。\n\n基区输运因子 $\\alpha_T(T)$ 捕捉了少数载流子穿过基区的输运效率，由 $\\alpha_T(T) = \\operatorname{sech}(W_B / L_n(T))$ 给出，其中 $W_B$ 是物理基区宽度，$L_n(T)$ 是基区中与温度相关的少数载流子电子扩散长度。\n\n扩散长度 $L_n(T)$ 本身通过关系式 $L_n(T) = \\sqrt{D_n(T) \\tau_n(T)}$ 依赖于温度。这里，$\\tau_n(T)$ 是少数载流子电子寿命，$D_n(T)$ 是扩散系数。它们的温度依赖性由以下物理模型控制：\n1.  电子寿命由幂律建模：$\\tau_n(T) = \\tau_{n0} (T/T_0)^{-p}$，其中 $\\tau_{n0}$ 是参考温度 $T_0$ 下的寿命，$p$ 是与复合机制相关的指数。\n2.  扩散系数 $D_n(T)$ 由爱因斯坦关系式给出，$D_n(T) = \\mu_n(T) \\, k_B \\, T / q$，其中 $k_B$ 是玻尔兹曼常数，$q$ 是元电荷。\n3.  电子迁移率 $\\mu_n(T)$ 也遵循幂律，$\\mu_n(T) = \\mu_{n0} (T/T_0)^{-m}$，这主要模拟了晶格声子散射的影响。\n\n结合这些表达式，我们可以将扩散长度的平方写成温度的直接函数：\n$$L_n(T)^2 = D_n(T) \\tau_n(T) = \\left( \\mu_{n0} \\left(\\frac{T}{T_0}\\right)^{-m} \\frac{k_B T}{q} \\right) \\left( \\tau_{n0} \\left(\\frac{T}{T_0}\\right)^{-p} \\right) = \\left(\\mu_{n0} \\tau_{n0} \\frac{k_B T_0^{m+p}}{q}\\right) T^{1-m-p}$$\n该方程表明，随着温度 $T$ 的升高，$L_n(T)$ 会减小，因为指数 $m$ 和 $p$ 是非负的，并且它们的和通常大于1。较小的 $L_n(T)$ 意味着 $\\operatorname{sech}$ 函数的参数 $W_B/L_n(T)$ 更大，从而导致较小的 $\\alpha_T(T)$。因此，$\\alpha(T)$ 和 $\\beta(T)$ 都随着温度的升高而降低。这是稳定器件温度的负反馈的物理基础。\n\n每个测试用例的计算任务包括两个主要计算：\n\n1.  **环境温度增益计算**：通过在指定的环境温度 $T = T_{\\mathrm{amb}}$ 下计算函数 $\\beta(T)$，来计算环境温度下的共发射极增益 $\\beta_{\\mathrm{amb}}$。这提供了一个没有自热效应的基准值。\n\n2.  **自洽加热增益计算**：焦耳自热效应产生一个反馈回路。耗散功率 $P = V_{CE} I_C$ 使器件温度升高 $\\Delta T = R_{\\mathrm{th}} P$。器件温度变为 $T = T_{\\mathrm{amb}} + \\Delta T$。然而，集电极电流 $I_C = \\beta(T) I_B$ 本身依赖于这个温度。这导致了自洽的不动点方程：\n$$T = T_{\\mathrm{amb}} + R_{\\mathrm{th}} V_{CE} I_B \\beta(T)$$\n必须求解该方程以得到 $T$。我们采用带有松弛因子 $\\lambda \\in (0, 1]$ 的不动点迭代法来确保稳定收敛。从初始猜测 $T_k = T_{\\mathrm{amb}}$ 开始，迭代过程如下：\n-   计算新的温度估计值：$T_{\\mathrm{new}, k} = T_{\\mathrm{amb}} + R_{\\mathrm{th}} V_{CE} I_B \\beta(T_k)$。注意 $I_B = J_B \\times A$。\n-   更新下一次迭代的温度：$T_{k+1} = (1 - \\lambda) T_k + \\lambda T_{\\mathrm{new}, k}$。\n迭代持续进行，直到步间温度变化可忽略不计，即 $|T_{\\mathrm{new}, k} - T_k| < \\epsilon$，其中 $\\epsilon$ 是一个小容差（给定为 $1.0\\times 10^{-6}\\,\\mathrm{K}$）。当收敛到最终温度 $T_{\\mathrm{final}}$ 时，自洽加热增益 $\\beta_{\\mathrm{heated}}$ 被计算为 $\\beta(T_{\\mathrm{final}})$。\n\n指定的常数为 $q = 1.602176634 \\times 10^{-19}\\,\\mathrm{C}$，$k_B = 1.380649 \\times 10^{-23}\\,\\mathrm{J/K}$ 和 $T_0 = 300\\,\\mathrm{K}$。对每个提供的测试用例实施该算法，以确定 $(\\beta_{\\mathrm{amb}}, \\beta_{\\mathrm{heated}})$ 值对。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the BJT self-heating problem for a given set of test cases.\n    \"\"\"\n    # Physical constants\n    Q = 1.602176634e-19  # Elementary charge in C\n    K_B = 1.380649e-23     # Boltzmann constant in J/K\n    T0 = 300.0             # Reference temperature in K\n\n    # Algorithmic parameters\n    TOLERANCE = 1.0e-6     # Temperature convergence tolerance in K\n    MAX_ITER = 1000        # Maximum number of iterations\n    LAMBDA = 0.1           # Relaxation factor for fixed-point iteration\n    MAX_TEMP = 1500.0      # Safety cap for temperature in K\n\n    # Test suite: (W_B, mu_n0, tau_n0, m, p, gamma, J_B, A, V_CE, R_th, T_amb)\n    test_cases = [\n        # Case 1: baseline, moderate heating\n        (5e-7, 0.10, 1.0e-8, 1.5, 1.0, 0.995, 1.0e5, 1.0e-8, 2.0, 100.0, 300.0),\n        # Case 2: strong heating, larger exponents\n        (5e-7, 0.10, 1.0e-8, 2.0, 2.0, 0.995, 2.0e5, 1.0e-8, 3.0, 500.0, 300.0),\n        # Case 3: narrow base, high beta potential\n        (2e-7, 0.10, 1.0e-8, 1.5, 1.0, 0.995, 1.5e5, 2.0e-8, 2.5, 200.0, 300.0),\n        # Case 4: wide base, low beta\n        (2e-6, 0.10, 1.0e-8, 1.5, 1.0, 0.995, 1.0e5, 1.0e-8, 2.0, 100.0, 300.0),\n    ]\n\n    def calculate_beta(T, params):\n        \"\"\"\n        Calculates the common-emitter current gain beta for a given temperature T.\n        \"\"\"\n        W_B, mu_n0, tau_n0, m, p, gamma = params\n\n        if T == 0:\n            return 0.0\n\n        # Temperature-dependent mobility\n        mu_n_T = mu_n0 * (T / T0)**(-m)\n        \n        # Temperature-dependent lifetime\n        tau_n_T = tau_n0 * (T / T0)**(-p)\n        \n        # Temperature-dependent diffusion coefficient (Einstein relation)\n        D_n_T = mu_n_T * K_B * T / Q\n        \n        # Temperature-dependent diffusion length\n        L_n_T_sq = D_n_T * tau_n_T\n        if L_n_T_sq == 0:\n            return 0.0\n        L_n_T = np.sqrt(L_n_T_sq)\n        \n        # Base transport factor\n        if L_n_T == 0:\n            return 0.0\n        arg = W_B / L_n_T\n        if arg > 700: # np.cosh overflows for large arguments\n            return 0.0 # alpha will be effectively zero\n        \n        alpha_T = 1.0 / np.cosh(arg)\n        \n        # Common-base current gain\n        alpha = gamma * alpha_T\n        \n        # Common-emitter current gain\n        if (1.0 - alpha)  1e-12: # Avoid division by zero or near-zero\n            return 1e12\n        \n        beta = alpha / (1.0 - alpha)\n        \n        return beta\n\n    results = []\n    for case in test_cases:\n        W_B, mu_n0, tau_n0, m, p, gamma, J_B, A, V_CE, R_th, T_amb = case\n        \n        # Prepare parameters for the beta calculation function\n        beta_params = (W_B, mu_n0, tau_n0, m, p, gamma)\n        \n        # 1. Compute ambient-temperature Beta\n        beta_ambient = calculate_beta(T_amb, beta_params)\n        \n        # 2. Solve for self-consistent heated Beta\n        I_B = J_B * A\n        T_current = T_amb\n        \n        for _ in range(MAX_ITER):\n            beta_iter = calculate_beta(T_current, beta_params)\n            \n            I_C = beta_iter * I_B\n            Power = V_CE * I_C\n            \n            T_new = T_amb + R_th * Power\n            \n            if abs(T_new - T_current)  TOLERANCE:\n                T_current = T_new\n                break\n            \n            # Update temperature with relaxation\n            T_current = (1.0 - LAMBDA) * T_current + LAMBDA * T_new\n\n            # Safety break for unphysical temperatures\n            if T_current > MAX_TEMP or T_current = 0:\n                break\n        \n        T_final = T_current\n        beta_heated = calculate_beta(T_final, beta_params)\n        \n        results.extend([beta_ambient, beta_heated])\n\n    # Format and print the final output\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
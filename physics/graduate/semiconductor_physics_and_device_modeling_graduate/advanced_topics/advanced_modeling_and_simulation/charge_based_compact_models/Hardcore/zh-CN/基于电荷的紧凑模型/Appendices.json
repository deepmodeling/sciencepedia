{
    "hands_on_practices": [
        {
            "introduction": "掌握任何半导体器件建模的核心在于理解施加的电压如何调控器件内部的电荷分布。本练习将引导你通过第一性原理计算，在一个MOS电容器的弱反型区中，求解表面电势和关键的反型电荷，这是低功耗电路设计的关键工作区。通过这个计算过程，你将亲身体验物理近似的运用，并验证其在特定条件下的自洽性与合理性 。",
            "id": "3733660",
            "problem": "考虑一个在均匀掺杂的p型衬底上的长沟道硅金属-氧化物-半导体（MOS）电容器，在准静态条件下工作于弱反型区。氧化物是理想的且没有固定电荷，金属栅极的功函数相匹配，使得平带电压为零。给定以下参数：\n- 受主浓度 $N_{A} = 1.0 \\times 10^{23}\\,\\mathrm{m}^{-3}$。\n- 单位面积的氧化层电容 $C_{\\mathrm{ox}} = 3.0 \\times 10^{-3}\\,\\mathrm{F/m}^{2}$。\n- 温度 $T = 300\\,\\mathrm{K}$。\n- 硅的本征载流子浓度 $n_{i} = 1.0 \\times 10^{16}\\,\\mathrm{m}^{-3}$。\n- 硅的相对介电常数 $\\varepsilon_{r,\\mathrm{Si}} = 11.7$ 和真空介电常数 $\\varepsilon_{0} = 8.854187817 \\times 10^{-12}\\,\\mathrm{F/m}$，因此硅的介电常数是 $\\varepsilon_{s} = \\varepsilon_{r,\\mathrm{Si}} \\varepsilon_{0}$。\n- 基本常数：元电荷 $q$，Boltzmann常数 $k_{B}$。\n设外加栅极电压为 $V_{g} = 1.00\\,\\mathrm{V}$，平带电压为 $V_{\\mathrm{FB}} = 0\\,\\mathrm{V}$。在弱反型区采用耗尽近似进行计算。从半导体中的一维Poisson方程、少数载流子的Boltzmann关系以及氧化物-半导体界面处的Gauss定律出发，推导计算所需表达式：\n1) 半导体表面的表面电势 $\\psi_{s}$，以及\n2) 表面的单位面积反型层电荷 $Q_{\\mathrm{inv}}$。\n使用物理上一致的弱反型近似，即在栅极方程中保留耗尽项而忽略反型项来获得 $\\psi_{s}$，然后根据少数载流子统计和耗尽区中的线性化Debye屏蔽计算 $Q_{\\mathrm{inv}}$。最后，通过比较在计算出的 $\\psi_{s}$ 下得到的耗尽电荷和反型电荷的大小，评论这两种公式的一致性。\n将 $\\psi_{s}$ 的最终数值以伏特（V）表示，将 $Q_{\\mathrm{inv}}$ 的最终数值以 $\\mathrm{C/m}^{2}$ 表示。将你的答案四舍五入到三位有效数字。最终答案必须是一个计算结果。",
            "solution": "题目要求计算一个工作在弱反型区的硅MOS电容器的表面电势 $\\psi_{s}$ 和单位面积反型层电荷 $Q_{\\mathrm{inv}}$。题目指示我们首先通过仅用耗尽电荷来近似半导体总电荷来求得 $\\psi_{s}$，然后再计算 $Q_{\\mathrm{inv}}$。最后，我们必须评论这种方法的一致性。\n\n我们首先建立基本关系。施加在MOS结构上的栅极电压 $V_{g}$ 分布在氧化层和半导体之间。当平带电压 $V_{\\mathrm{FB}} = 0\\,\\mathrm{V}$ 时，栅极电压方程为：\n$$V_{g} = \\psi_{s} + V_{\\mathrm{ox}}$$\n其中 $\\psi_{s}$ 是表面电势，$V_{\\mathrm{ox}}$ 是氧化层上的电压降。根据氧化物-半导体界面处的Gauss定律，$V_{\\mathrm{ox}} = -Q_{s}/C_{\\mathrm{ox}}$，其中 $Q_{s}$ 是半导体中单位面积的总电荷，$C_{\\mathrm{ox}}$ 是单位面积的氧化层电容。因此：\n$$V_{g} = \\psi_{s} - \\frac{Q_{s}}{C_{\\mathrm{ox}}}$$\n半导体总电荷 $Q_{s}$ 是耗尽电荷 $Q_{\\mathrm{dep}}$ 和反型电荷 $Q_{\\mathrm{inv}}$ 的和：$Q_{s} = Q_{\\mathrm{dep}} + Q_{\\mathrm{inv}}$。\n\n对于p型衬底，在耗尽近似下，耗尽电荷由下式给出：\n$$Q_{\\mathrm{dep}} = -q N_{A} W_{\\mathrm{dep}}$$\n其中 $N_{A}$ 是受主浓度，$W_{\\mathrm{dep}}$ 是耗尽宽度。对于 $\\psi_{s} > 0$，耗尽宽度与表面电势的关系为 $W_{\\mathrm{dep}} = \\sqrt{2\\varepsilon_{s}\\psi_{s}/(qN_{A})}$。将此代入 $Q_{\\mathrm{dep}}$ 的表达式中，得到：\n$$Q_{\\mathrm{dep}} = -\\sqrt{2q\\varepsilon_{s}N_{A}\\psi_{s}}$$\n其中 $\\varepsilon_{s} = \\varepsilon_{r,\\mathrm{Si}}\\varepsilon_{0}$ 是硅的介电常数。\n\n题目指定，为了求得 $\\psi_{s}$，我们应该在一个近似中工作，即在栅极电压方程中忽略反型电荷。这是弱反型区的特征，其中 $|Q_{\\mathrm{inv}}| \\ll |Q_{\\mathrm{dep}}|$。因此，我们设 $Q_{s} \\approx Q_{\\mathrm{dep}}$。栅极电压方程变为：\n$$V_{g} = \\psi_{s} - \\frac{Q_{\\mathrm{dep}}}{C_{\\mathrm{ox}}} = \\psi_{s} + \\frac{\\sqrt{2q\\varepsilon_{s}N_{A}\\psi_{s}}}{C_{\\mathrm{ox}}}$$\n这可以写成 $V_{g} = \\psi_{s} + \\gamma\\sqrt{\\psi_{s}}$，其中 $\\gamma = \\frac{\\sqrt{2q\\varepsilon_{s}N_{A}}}{C_{\\mathrm{ox}}}$ 是体效应参数。\n\n让我们计算 $\\gamma$ 的值。所需的常数为：\n$q = 1.602177 \\times 10^{-19}\\,\\mathrm{C}$\n$\\varepsilon_{0} = 8.854188 \\times 10^{-12}\\,\\mathrm{F/m}$\n$\\varepsilon_{r,\\mathrm{Si}} = 11.7$\n$\\varepsilon_{s} = 11.7 \\times 8.854188 \\times 10^{-12}\\,\\mathrm{F/m} \\approx 1.03595 \\times 10^{-10}\\,\\mathrm{F/m}$\n$N_{A} = 1.0 \\times 10^{23}\\,\\mathrm{m}^{-3}$\n$C_{\\mathrm{ox}} = 3.0 \\times 10^{-3}\\,\\mathrm{F/m}^{2}$\n\n$$\\gamma = \\frac{\\sqrt{2 (1.602177 \\times 10^{-19}\\,\\mathrm{C}) (1.03595 \\times 10^{-10}\\,\\mathrm{F/m}) (1.0 \\times 10^{23}\\,\\mathrm{m}^{-3})}}{3.0 \\times 10^{-3}\\,\\mathrm{F/m}^{2}}$$\n$$\\gamma \\approx \\frac{\\sqrt{3.3194 \\times 10^{-6}}}{3.0 \\times 10^{-3}} \\,\\mathrm{V}^{1/2} \\approx \\frac{1.8219 \\times 10^{-3}}{3.0 \\times 10^{-3}} \\,\\mathrm{V}^{1/2} \\approx 0.6073\\,\\mathrm{V}^{1/2}$$\n当 $V_{g} = 1.00\\,\\mathrm{V}$ 时，我们必须解以下方程：\n$$1.00 = \\psi_{s} + 0.6073\\sqrt{\\psi_{s}}$$\n令 $x = \\sqrt{\\psi_{s}}$。该方程是关于 $x$ 的二次方程：$x^2 + 0.6073x - 1.00 = 0$。使用二次公式并取正根（因为 $x=\\sqrt{\\psi_{s}}$ 必须是实数且为正）：\n$$x = \\frac{-0.6073 + \\sqrt{(0.6073)^2 - 4(1)(-1.00)}}{2(1)} = \\frac{-0.6073 + \\sqrt{0.3688 + 4}}{2} = \\frac{-0.6073 + 2.0902}{2} \\approx 0.74145$$\n因此，表面电势为：\n$$\\psi_{s} = x^2 \\approx (0.74145)^2 \\approx 0.5497\\,\\mathrm{V}$$\n为了验证这对应于弱反型，我们计算体费米电势 $\\phi_{F}$。热电压为 $V_{T} = k_{B}T/q$。在 $T=300\\,\\mathrm{K}$ 时，$V_{T} \\approx 0.025852\\,\\mathrm{V}$。\n$$\\phi_{F} = V_{T} \\ln\\left(\\frac{N_{A}}{n_{i}}\\right) = (0.025852\\,\\mathrm{V}) \\ln\\left(\\frac{1.0 \\times 10^{23}\\,\\mathrm{m}^{-3}}{1.0 \\times 10^{16}\\,\\mathrm{m}^{-3}}\\right) = (0.025852\\,\\mathrm{V}) \\ln(10^7) \\approx 0.4167\\,\\mathrm{V}$$\n强反型的起始点通常定义为 $\\psi_{s} = 2\\phi_{F} \\approx 0.8334\\,\\mathrm{V}$。由于我们计算出的 $\\psi_s \\approx 0.550\\,\\mathrm{V}$ 满足 $\\phi_F  \\psi_s  2\\phi_F$，因此该电容器确实处于弱反型状态，与我们的假设一致。\n\n接下来，我们计算反型电荷 $Q_{\\mathrm{inv}}$。反型电荷是反型层中少数载流子（电子）的积分电荷：\n$$Q_{\\mathrm{inv}} = -q \\int_{0}^{\\infty} n(x) dx$$\n这里我们忽略了平衡少数载流子浓度 $n_{p0}$。电子浓度 $n(x)$ 由Boltzmann关系给出：\n$$n(x) = \\frac{n_{i}^2}{N_{A}} \\exp\\left(\\frac{\\psi(x)}{V_{T}}\\right)$$\n反型层非常薄，因此我们可以将其内部的电势 $\\psi(x)$ 近似为随离表面距离线性变化：$\\psi(x) \\approx \\psi_{s} - E_{s}x$，其中 $E_{s}$ 是表面电场的强度。将此代入 $Q_{\\mathrm{inv}}$ 的积分中：\n$$Q_{\\mathrm{inv}} \\approx -q \\int_{0}^{\\infty} \\frac{n_{i}^2}{N_{A}} \\exp\\left(\\frac{\\psi_{s} - E_{s}x}{V_{T}}\\right) dx = -q \\left(\\frac{n_{i}^2}{N_{A}} \\exp\\left(\\frac{\\psi_{s}}{V_{T}}\\right)\\right) \\int_{0}^{\\infty} \\exp\\left(-\\frac{E_{s}x}{V_{T}}\\right) dx$$\n第一项是表面电子浓度 $n_{s}$。积分结果为 $V_{T}/E_{s}$。因此，\n$$Q_{\\mathrm{inv}} \\approx -q n_{s} \\left(\\frac{V_{T}}{E_{s}}\\right)$$\n表面电场 $E_{s}$ 由 $E_s = -Q_s/\\varepsilon_s$ 给出。与我们求 $\\psi_s$ 的近似一致，我们使用 $Q_{s} \\approx Q_{\\mathrm{dep}}$。\n$$E_{s} \\approx \\frac{-Q_{\\mathrm{dep}}}{\\varepsilon_{s}} = \\frac{\\sqrt{2q\\varepsilon_{s}N_{A}\\psi_{s}}}{\\varepsilon_{s}} = \\sqrt{\\frac{2qN_{A}\\psi_{s}}{\\varepsilon_{s}}}$$\n使用计算出的 $\\psi_s \\approx 0.5497\\,\\mathrm{V}$：\n$$E_{s} \\approx \\sqrt{\\frac{2(1.602177 \\times 10^{-19})(1.0 \\times 10^{23})(0.5497)}{1.03595 \\times 10^{-10}}} \\approx \\sqrt{1.700 \\times 10^{14}} \\approx 1.304 \\times 10^7\\,\\mathrm{V/m}$$\n表面电子浓度 $n_{s}$ 为：\n$$n_{s} = \\frac{(1.0 \\times 10^{16})^2}{1.0 \\times 10^{23}} \\exp\\left(\\frac{0.5497}{0.025852}\\right) = 10^9 \\exp(21.263) \\approx 10^9 \\times (1.716 \\times 10^9) = 1.716 \\times 10^{18}\\,\\mathrm{m}^{-3}$$\n现在我们可以计算 $Q_{\\mathrm{inv}}$：\n$$Q_{\\mathrm{inv}} \\approx -(1.602177 \\times 10^{-19}\\,\\mathrm{C}) (1.716 \\times 10^{18}\\,\\mathrm{m}^{-3}) \\left(\\frac{0.025852\\,\\mathrm{V}}{1.304 \\times 10^7\\,\\mathrm{V/m}}\\right)$$\n$$Q_{\\mathrm{inv}} \\approx -(2.749 \\times 10^{-1}\\,\\mathrm{C/m^3}) (1.9825 \\times 10^{-9}\\,\\mathrm{m}) \\approx -5.450 \\times 10^{-10}\\,\\mathrm{C/m}^2$$\n\n最后，我们评论其一致性。我们比较耗尽电荷和反型电荷的大小。\n耗尽电荷为：\n$$Q_{\\mathrm{dep}} = -\\sqrt{2q\\varepsilon_{s}N_{A}\\psi_{s}} = -\\sqrt{2(1.602 \\times 10^{-19})(1.036 \\times 10^{-10})(10^{23})(0.5497)} \\approx -1.351 \\times 10^{-3}\\,\\mathrm{C/m}^2$$\n反型电荷为 $Q_{\\mathrm{inv}} \\approx -5.45 \\times 10^{-10}\\,\\mathrm{C/m}^2$。\n它们大小的比值为：\n$$\\frac{|Q_{\\mathrm{inv}}|}{|Q_{\\mathrm{dep}}|} = \\frac{5.45 \\times 10^{-10}}{1.351 \\times 10^{-3}} \\approx 4.03 \\times 10^{-7}$$\n由于 $|Q_{\\mathrm{inv}}| \\ll |Q_{\\mathrm{dep}}|$，耗尽电荷比反型电荷大六个数量级以上。这一结果为用于计算表面电势 $\\psi_s$ 的初始近似 $Q_s \\approx Q_{\\mathrm{dep}}$ 提供了有力的证明。因此，该方法是自洽的。\n\n将最终数值四舍五入到三位有效数字：\n$\\psi_{s} = 0.550\\,\\mathrm{V}$\n$Q_{\\mathrm{inv}} = -5.45 \\times 10^{-10}\\,\\mathrm{C/m^2}$",
            "answer": "$$\\boxed{\\begin{pmatrix} 0.550  -5.45 \\times 10^{-10} \\end{pmatrix}}$$"
        },
        {
            "introduction": "在实际的紧凑模型中，为了确保电路仿真器的收敛性和计算效率，必须使用平滑且连续可微的函数来描述从关断到开启的整个工作区间。本练习聚焦于模型构建中的一个关键数学技巧：平滑函数的构造。你将分析一个常用的平滑函数，并通过解析计算证明它能够在深积累和强反型这两个物理极限下，精确地还原为理论上的分段模型行为，从而保证模型的物理准确性 。",
            "id": "3733686",
            "problem": "考虑一个在温度 $T$ 下工作的长沟道、准静态、对称的金属-氧化物-半导体场效应晶体管 (MOSFET)，其漏源偏压和体偏压均为零。设单位面积的氧化层电容为 $C_{\\mathrm{ox}}$，热电压为 $V_{T} = k_{B} T / q$，其中 $k_{B}$ 是玻尔兹曼常数，$q$ 是基本电荷。定义栅极过驱动电压 $x = V_{GS} - V_{\\mathrm{TH}}$，其中 $V_{GS}$ 是栅源电压，$V_{\\mathrm{TH}}$ 是阈值电压。在电荷片近似中，未平滑（分段）公式下的单位面积反型层电荷为\n$$\nQ_{\\mathrm{inv,unsm}}(x) = \\begin{cases}\n0,  x  0, \\\\\n-C_{\\mathrm{ox}}\\,x,  x \\ge 0.\n\\end{cases}\n$$\n一种常见的紧凑模型平滑策略是将不连续的 $\\max\\{0,x\\}$ 替换为一个平滑的softplus型函数。考虑平滑后的单位面积反型层电荷\n$$\nQ_{\\mathrm{inv,sm}}(x) = -C_{\\mathrm{ox}}\\,s_{\\beta}(x), \\quad s_{\\beta}(x) = \\beta\\,V_{T}\\,\\ln\\!\\left(1 + \\exp\\!\\left(\\frac{x}{\\beta\\,V_{T}}\\right)\\right),\n$$\n其中 $\\beta  0$ 是一个无量纲锐度参数。从栅极氧化层的高斯定律和沟道的电荷片近似出发，并仅使用指数和对数函数的性质，计算平滑后反型层电荷在深积累和强反型区域的渐近极限。具体来说，计算\n$$\nA = \\lim_{x \\to -\\infty} Q_{\\mathrm{inv,sm}}(x), \\qquad B = \\lim_{x \\to +\\infty} \\frac{Q_{\\mathrm{inv,sm}}(x)}{-C_{\\mathrm{ox}}\\,x}.\n$$\n以行矩阵格式将您的最终答案报告为有序对 $\\left(A, B\\right)$。无需进行数值舍入。最终量 $A$ 和 $B$ 是无量纲的，或其隐式单位在计算比值 $B$ 时会相互抵消，因此最终的方框答案中不应包含任何单位。",
            "solution": "基于电荷的金属-氧化物-半导体场效应晶体管 (MOSFET) 紧凑模型描述始于栅极氧化层的高斯定律和界面处的准静态电荷平衡。在一维栅叠层结构中，高斯定律将单位面积的栅极电荷 $Q_{G}$ 与单位面积的氧化层电容 $C_{\\mathrm{ox}}$ 以及氧化层上的电压降联系起来，\n$$\nQ_{G} = -C_{\\mathrm{ox}}\\,(V_{G} - \\psi_{s}),\n$$\n其中 $V_{G}$ 是相对于源极的栅极电压，$\\psi_{s}$ 是表面电势。在电荷片近似中，沟道中的可动电荷由位于界面处的反型电荷片 $Q_{\\mathrm{inv}}$ 表示，剩余的电荷是半导体体内的耗尽或积累电荷。在阈值电压时，对于n沟道器件，表面电势 $\\psi_{s}$ 约等于 $2\\phi_{F}$（其中 $\\phi_{F}$ 是费米势），而在强反型区，可动反型电荷占主导地位，反型层电荷随栅极过驱动电压 $x = V_{GS} - V_{\\mathrm{TH}}$ 线性增加。这得出了标准的未平滑分段模型\n$$\nQ_{\\mathrm{inv,unsm}}(x) = \\begin{cases}\n0,  x  0, \\\\\n-C_{\\mathrm{ox}}\\,x,  x \\ge 0,\n\\end{cases}\n$$\n其中 $x0$ 分支对应于耗尽或积累（无反型电荷），而 $x\\ge 0$ 分支对应于强反型，此时反型层电荷通过氧化层平衡栅极静电。\n\n为了在不同工作区之间生成一个平滑、可微的紧凑模型，我们用softplus型函数替换不连续的 $\\max\\{0,x\\}$\n$$\ns_{\\beta}(x) = \\beta\\,V_{T}\\,\\ln\\!\\left(1 + \\exp\\!\\left(\\frac{x}{\\beta\\,V_{T}}\\right)\\right),\n$$\n并定义平滑后的反型层电荷\n$$\nQ_{\\mathrm{inv,sm}}(x) = -C_{\\mathrm{ox}}\\,s_{\\beta}(x).\n$$\n我们现在分析 $Q_{\\mathrm{inv,sm}}$ 在深积累 ($x \\to -\\infty$) 和强反型 ($x \\to +\\infty$) 区域的渐近极限，并将其与未平滑模型的渐近线进行比较。\n\n首先，考虑深积累极限 $x \\to -\\infty$。令 $y = x/(\\beta V_{T})$。则 $y \\to -\\infty$，我们使用指数函数的性质 $\\exp(y) \\to 0$ 当 $y \\to -\\infty$。因此，\n$$\ns_{\\beta}(x) = \\beta\\,V_{T}\\,\\ln\\!\\left(1 + \\exp(y)\\right) \\xrightarrow[y\\to -\\infty]{} \\beta\\,V_{T}\\,\\ln(1 + 0) = \\beta\\,V_{T}\\,\\ln(1) = 0.\n$$\n于是，\n$$\nA = \\lim_{x \\to -\\infty} Q_{\\mathrm{inv,sm}}(x) = -C_{\\mathrm{ox}} \\cdot 0 = 0,\n$$\n这与 $x0$ 时未平滑模型的渐近线 $Q_{\\mathrm{inv,unsm}}(x) \\to 0$ 相匹配。\n\n其次，考虑强反型极限 $x \\to +\\infty$。当 $y = x/(\\beta V_{T})$ 且 $y \\to +\\infty$ 时，我们使用对数恒等式\n$$\n\\ln\\!\\left(1 + \\exp(y)\\right) = y + \\ln\\!\\left(1 + \\exp(-y)\\right),\n$$\n并注意到当 $y \\to +\\infty$ 时，$\\exp(-y) \\to 0$，因此 $\\ln\\!\\left(1 + \\exp(-y)\\right) \\to \\ln(1) = 0$。因此，\n$$\ns_{\\beta}(x) = \\beta\\,V_{T}\\,\\left[y + \\ln\\!\\left(1 + \\exp(-y)\\right)\\right] \\xrightarrow[y\\to +\\infty]{} \\beta\\,V_{T}\\,y = \\beta\\,V_{T}\\,\\frac{x}{\\beta\\,V_{T}} = x.\n$$\n由此可得\n$$\nQ_{\\mathrm{inv,sm}}(x) \\xrightarrow[x\\to +\\infty]{} -C_{\\mathrm{ox}}\\,x.\n$$\n与 $x \\ge 0$ 时未平滑模型的强反型分支 $Q_{\\mathrm{inv,unsm}}(x) = -C_{\\mathrm{ox}}\\,x$ 相比，我们看到在渐近极限下两者完全一致。所要求的比值为\n$$\nB = \\lim_{x \\to +\\infty} \\frac{Q_{\\mathrm{inv,sm}}(x)}{-C_{\\mathrm{ox}}\\,x} = \\lim_{x \\to +\\infty} \\frac{-C_{\\mathrm{ox}}\\,x}{-C_{\\mathrm{ox}}\\,x} = 1.\n$$\n\n汇总结果，有序对为 $\\left(A, B\\right) = \\left(0, 1\\right)$，这表明所选的平滑函数保留了未平滑反型层电荷在深积累和强反型区域的渐近特性。",
            "answer": "$$\\boxed{\\begin{pmatrix}0  1\\end{pmatrix}}$$"
        },
        {
            "introduction": "基于电荷的紧凑模型相对于早期基于电容的模型，其最根本的优势在于保证了电荷守恒。这个看似抽象的物理原则在动态电路仿真中至关重要，违反它会导致仿真结果出现非物理的“电荷泵浦”效应。通过这个编程实践，你将直接对比经典的Ward-Dutton电荷分配模型和早期的Meyer电容模型，在瞬态仿真中亲眼见证电荷守恒的实现与失效，从而深刻理解现代紧凑模型的核心价值 。",
            "id": "3733681",
            "problem": "考虑一个本征三端金属-氧化物-半导体场效应晶体管 (MOSFET)，该晶体管处于渐变沟道近似和准静态工作条件下。该器件的栅极宽度为 $W$，栅极长度为 $L$，栅氧化层厚度为 $t_{\\mathrm{ox}}$，氧化物介电常数为 $\\varepsilon_{\\mathrm{ox}}$，阈值电压为 $V_{\\mathrm{th}}$。栅源电压 $V_{\\mathrm{gs}}$ 保持恒定，源极接地 ($V_{\\mathrm{s}}=0$)，漏极电压 $V_{\\mathrm{d}}$ 从初始值 $V_{\\mathrm{d},1}$ 阶跃到最终值 $V_{\\mathrm{d},2}$。所有电荷必须以库仑 (Coulombs) 为单位计算，所有电压必须以伏特 (Volts) 为单位。\n\n您的任务是实现两种用于终端电荷的紧凑建模方法，并比较它们在瞬态漏极电压阶跃下的电荷守恒特性：\n\n1) Ward-Dutton (WD) 电荷分配法：\n- 使用基于电荷的公式，该公式以渐变沟道近似下的电荷片模型为基础。局部沟道电势 $V(x)$ 沿着 $x \\in [0,L]$ 从源极到漏极单调变化，单位长度的反型电荷由相对于沟道电势的局部栅极过驱动电压决定。只应包括反型电荷；耗尽电容和交叠电容被忽略。\n- 通过沿沟道使用 Ward-Dutton 加权来划分分布的沟道电荷，定义栅极 ($Q_{\\mathrm{g}}$)、漏极 ($Q_{\\mathrm{d}}$) 和源极 ($Q_{\\mathrm{s}}$) 的终端电荷。该划分必须确保在任何静态偏置点下都满足 $Q_{\\mathrm{g}} + Q_{\\mathrm{d}} + Q_{\\mathrm{s}} = 0$。\n- 计算漏极阶跃前后的终端电荷，即在 $V_{\\mathrm{d},1}$ 时的 $(Q_{\\mathrm{g},1},Q_{\\mathrm{d},1},Q_{\\mathrm{s},1})$ 和在 $V_{\\mathrm{d},2}$ 时的 $(Q_{\\mathrm{g},2},Q_{\\mathrm{d},2},Q_{\\mathrm{s},2})$，然后形成增量 $\\Delta Q_{\\mathrm{g}}=Q_{\\mathrm{g},2}-Q_{\\mathrm{g},1}$，$\\Delta Q_{\\mathrm{d}}=Q_{\\mathrm{d},2}-Q_{\\mathrm{d},1}$，$\\Delta Q_{\\mathrm{s}}=Q_{\\mathrm{s},2}-Q_{\\mathrm{s},1}$。\n\n2) Meyer 电容分配法：\n- 用只连接在栅极与源极 ($C_{\\mathrm{gs}}$) 和栅极与漏极 ($C_{\\mathrm{gd}}$) 之间的压变电容器来表示该器件，其值由强反型下的工作区决定。在线性区（未夹断），$C_{\\mathrm{gd}}$ 非零；在饱和区（夹断），$C_{\\mathrm{gd}}$ 为零；在阈值以下，所有栅极-沟道电容均为零。此方法中没有明确定义漏极或源极端子的沟道电荷状态。\n- 在固定栅极偏置下，根据漏极电压阶跃，计算由 $C_{\\mathrm{gd}}$ 引起的增量栅极电荷变化 $\\Delta Q_{\\mathrm{g}}^{\\mathrm{Meyer}}$，并设置 $\\Delta Q_{\\mathrm{d}}^{\\mathrm{Meyer}}=0$，$\\Delta Q_{\\mathrm{s}}^{\\mathrm{Meyer}}=0$。\n\n从基本定律和经过充分检验的事实出发，即关联氧化物电容密度与 $\\varepsilon_{\\mathrm{ox}}$ 和 $t_{\\mathrm{ox}}$ 的高斯定律、渐变沟道近似下反型电荷的电荷片描述，以及将终端电容定义为终端电荷相对于终端电压的偏导数，推导出您将要实现的 Ward-Dutton 终端电荷和 Meyer 分配法。\n\n然后，对于下面的每个测试用例，计算两种建模方法的增量终端电荷之和 $\\Delta Q_{\\mathrm{g}}+\\Delta Q_{\\mathrm{d}}+\\Delta Q_{\\mathrm{s}}$，并将其与零比较以评估电荷守恒性。如果总和的绝对值小于 $10^{-18}\\ \\mathrm{C}$，则认为结果是电荷守恒的。\n\n使用以下器件和偏置参数（均以国际单位制给出）：\n- 氧化物介电常数: $\\varepsilon_{\\mathrm{ox}} = 3.9 \\times \\varepsilon_{0}$，其中 $\\varepsilon_{0} = 8.854187817\\times 10^{-12}\\ \\mathrm{F/m}$。\n- 氧化层厚度: $t_{\\mathrm{ox}} = 5.0\\times 10^{-9}\\ \\mathrm{m}$。\n- 栅极宽度: $W = 1.0\\times 10^{-6}\\ \\mathrm{m}$。\n- 栅极长度: $L = 1.0\\times 10^{-6}\\ \\mathrm{m}$。\n- 阈值电压: $V_{\\mathrm{th}} = 0.4\\ \\mathrm{V}$。\n- 源极电压: $V_{\\mathrm{s}} = 0.0\\ \\mathrm{V}$。\n\n不同栅极偏置下的漏极阶跃测试套件：\n- 情况 A (线性区): $V_{\\mathrm{gs}} = 0.8\\ \\mathrm{V}$, $V_{\\mathrm{d},1} = 0.2\\ \\mathrm{V}$, $V_{\\mathrm{d},2} = 0.3\\ \\mathrm{V}$。\n- 情况 B (进入饱和区): $V_{\\mathrm{gs}} = 0.8\\ \\mathrm{V}$, $V_{\\mathrm{d},1} = 0.3\\ \\mathrm{V}$, $V_{\\mathrm{d},2} = 0.7\\ \\mathrm{V}$。\n- 情况 C (在边界然后进入饱和区): $V_{\\mathrm{gs}} = 0.8\\ \\mathrm{V}$, $V_{\\mathrm{d},1} = 0.4\\ \\mathrm{V}$, $V_{\\mathrm{d},2} = 0.5\\ \\mathrm{V}$。\n- 情况 D (亚阈值区): $V_{\\mathrm{gs}} = 0.3\\ \\mathrm{V}$, $V_{\\mathrm{d},1} = 0.1\\ \\mathrm{V}$, $V_{\\mathrm{d},2} = 0.2\\ \\mathrm{V}$。\n\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表的结果。该列表必须按以下顺序包含八个布尔值条目：情况 A 的 Ward-Dutton 守恒性，情况 A 的 Meyer 守恒性，情况 B 的 Ward-Dutton 守恒性，情况 B 的 Meyer 守恒性，情况 C 的 Ward-Dutton 守恒性，情况 C 的 Meyer 守恒性，情况 D 的 Ward-Dutton 守恒性，情况 D 的 Meyer 守恒性。例如，格式应如下：\"[true,false,true,false,true,false,true,true]\"。",
            "solution": "### 基于原理的解决方案\n\n该分析需要推导和实现两种不同的 MOSFET 电荷模型。在整个分析过程中，所有电压单位为伏特，尺寸单位为米，电荷单位为库仑。\n\n**1. 准备工作：氧化物电容**\n首先，我们计算单位面积的栅氧化层电容 $C'_{\\mathrm{ox}}$ 和总栅极电容 $C_{\\mathrm{ox}}$，它们是两种模型的基本参数。根据平行板电容器的高斯定律：\n$$C'_{\\mathrm{ox}} = \\frac{\\varepsilon_{\\mathrm{ox}}}{t_{\\mathrm{ox}}}$$\n对于给定的几何结构，总栅极电容为：\n$$C_{\\mathrm{ox}} = W L C'_{\\mathrm{ox}} = \\frac{W L \\varepsilon_{\\mathrm{ox}}}{t_{\\mathrm{ox}}}$$\n\n**2. Ward-Dutton (WD) 电荷分配模型**\n该模型建立在电荷守恒原理之上。器件内的总电荷被计算并分配到各个端子，确保在任何瞬态过程中流动的净电荷为零。\n\n该模型从沟道中的反型电荷密度 $q'_{i}$ 开始。在电荷片近似下，对于高于阈值 $V_{\\mathrm{th}}$ 的栅源电压 $V_{\\mathrm{gs}}$，沿沟道位置 $x$ 处具有局部电势 $V(x)$ 的单位面积反型电荷为：\n$$q'_{i}(x) = -C'_{\\mathrm{ox}} (V_{\\mathrm{gs}} - V_{\\mathrm{th}} - V(x))$$\n此式在 $V_{\\mathrm{gs}} > V_{\\mathrm{th}}$ 时成立。如果 $V_{\\mathrm{gs}} \\le V_{\\mathrm{th}}$（亚阈值区），根据问题的范围，我们认为反型电荷为零。\n\n总反型电荷 $Q_I$ 是电荷密度在整个栅极面积上的积分。我们不执行需要知道电势分布 $V(x)$ 的空间积分，而是使用通过对电压积分推导出的标准电荷片模型结果。令 $V_{gt} = V_{gs} - V_{th}$ 为栅极过驱动电压。在线性区，对于 $0 \\le V_d \\le V_{gt}$，总反型电荷由下式给出：\n$$Q_I = -\\frac{2}{3} C_{\\mathrm{ox}} \\frac{V_{gt}^2 + V_{gt}(V_{gt}-V_d) + (V_{gt}-V_d)^2}{V_{gt} + (V_{gt}-V_d)}$$\n在饱和区，对于 $V_d > V_{gt}$，沟道在漏极端以 $V_{gt}$ 的电势夹断。假定在此点之后的漏极电压下，电荷分布是固定的（忽略沟道长度调制）。因此，通过设置有效漏极电压 $V_{deff} = \\min(V_d, V_{gt})$ 来计算电荷。总反型电荷的通用表达式变为：\n$$Q_I(V_{gs}, V_d) = \\begin{cases} -\\frac{2}{3} C_{\\mathrm{ox}} \\frac{3V_{gt}^2 - 3V_{gt}V_{deff} + V_{deff}^2}{2V_{gt} - V_{deff}}  \\text{若 } V_{gt} > 0 \\\\ 0  \\text{若 } V_{gt} \\le 0 \\end{cases}$$\n其中 $V_{deff} = \\min(V_d, V_{gt})$。\n\n然后定义终端电荷。忽略耗尽电荷，栅极电荷 $Q_g$ 是总沟道电荷的镜像：\n$$Q_g = -Q_I$$\n总沟道电荷 $Q_I$ 在源极和漏极端子之间进行划分。归属于漏极的电荷分数 $X_d = Q_d / Q_I$ 可以从电荷分布的矩推导出来。该划分因子的一个标准且精确的近似是：\n$$X_d = \\frac{1}{2} - \\frac{V_{deff}}{6V_{gt}} + \\frac{V_{deff}^2}{24V_{gt}^2}$$\n因此，源极和漏极的终端电荷为：\n$$Q_d = X_d Q_I$$\n$$Q_s = (1-X_d) Q_I$$\n通过这种构造，终端电荷的总和始终为零：\n$$Q_g + Q_d + Q_s = (-Q_I) + (X_d Q_I) + ((1-X_d) Q_I) = -Q_I + Q_I(X_d + 1 - X_d) = 0$$\n这是电荷守恒模型的一个决定性特征。当漏极电压从 $V_{d,1}$ 阶跃到 $V_{d,2}$ 时，增量电荷为 $\\Delta Q_i = Q_i(V_{d,2}) - Q_i(V_{d,1})$。这些增量之和为：\n$$\\Delta Q_g + \\Delta Q_d + \\Delta Q_s = (Q_{g,2}-Q_{g,1}) + (Q_{d,2}-Q_{d,1}) + (Q_{s,2}-Q_{s,1}) = (Q_{g,2}+Q_{d,2}+Q_{s,2}) - (Q_{g,1}+Q_{d,1}+Q_{s,1}) = 0 - 0 = 0$$\n因此，Ward-Dutton 模型对于任何电压阶跃都是内在电荷守恒的。任何非零的总和都将归因于浮点数值误差。\n\n**3. Meyer 电容模型**\nMeyer 模型是一个更简单、更早期的模型，它使用压变电容器来近似 MOSFET 的电容行为。它不明确跟踪沟道电荷，这导致了不一致性。增量电荷是从电容计算的，而不是从状态电荷计算的。\n\n该模型定义了两个关键电容器 $C_{gs}$ 和 $C_{gd}$，其值取决于工作区域。\n- **亚阈值区 ($V_{gs} \\le V_{th}$)**：所有栅-沟道电容均为零。$C_{gs} = 0$，$C_{gd} = 0$。\n- **线性区 ($V_{gs} > V_{th}$ 且 $0 \\le V_d  V_{gs}-V_{th}$)**：沟道连接源极和漏极，栅极与整个沟道发生电容耦合。Meyer 通过划分总电容来近似这种情况：$C_{gs} = C_{gd} = \\frac{1}{2} C_{\\mathrm{ox}}$。\n- **饱和区 ($V_{gs} > V_{th}$ 且 $V_d \\ge V_{gs}-V_{th}$)**：沟道在漏极处夹断。栅极对沟道漏极端的影响被认为是零。因此，$C_{gd} = 0$。栅-源电容通常近似为 $C_{gs} = \\frac{2}{3} C_{\\mathrm{ox}}$。\n\n该问题涉及在恒定 $V_{gs}$ 下的漏极电压阶跃。增量栅极电荷是栅-漏电容在电压阶跃上的积分：\n$$\\Delta Q_g^{\\mathrm{Meyer}} = \\int_{V_{d,1}}^{V_{d,2}} C_{gd}(V_d') dV_d'$$\n问题明确定义了其他增量电荷：\n$$\\Delta Q_d^{\\mathrm{Meyer}} = 0$$\n$$\\Delta Q_s^{\\mathrm{Meyer}} = 0$$\n因此，增量电荷的总和为 $\\sum \\Delta Q_i = \\Delta Q_g^{\\mathrm{Meyer}}$。\n令 $V_{dsat} = V_{gs} - V_{th}$。$\\Delta Q_g^{\\mathrm{Meyer}}$ 的积分变成一个分段计算：\n- 如果阶跃完全在线性区 ($V_{d,2}  V_{dsat}$): $\\Delta Q_g^{\\mathrm{Meyer}} = \\int_{V_{d,1}}^{V_{d,2}} \\frac{1}{2}C_{\\mathrm{ox}} dV_d' = \\frac{1}{2}C_{\\mathrm{ox}}(V_{d,2}-V_{d,1})$。\n- 如果阶跃完全在饱和区 ($V_{d,1} \\ge V_{dsat}$): $\\Delta Q_g^{\\mathrm{Meyer}} = \\int_{V_{d,1}}^{V_{d,2}} 0 \\ dV_d' = 0$。\n- 如果阶跃从线性区跨越到饱和区 ($V_{d,1}  V_{dsat} \\le V_{d,2}$): $\\Delta Q_g^{\\mathrm{Meyer}} = \\int_{V_{d,1}}^{V_{dsat}} \\frac{1}{2}C_{\\mathrm{ox}} dV_d' + \\int_{V_{dsat}}^{V_{d,2}} 0 \\ dV_d' = \\frac{1}{2}C_{\\mathrm{ox}}(V_{dsat}-V_{d,1})$。\n- 如果器件处于亚阈值区 ($V_{gs} \\le V_{th}$): $C_{gd}=0$，所以 $\\Delta Q_g^{\\mathrm{Meyer}} = 0$。\n\n在 Meyer 模型中，只要 $\\Delta Q_g^{\\mathrm{Meyer}}$ 非零，增量电荷的总和就非零。这种未能守恒电荷的现象，被称为“电荷泵”问题，是该模型的一个著名缺陷。\n\n**4. 测试用例分析**\n- **情况 A (线性区)**: $V_{gs}=0.8$, $V_d: 0.2 \\to 0.3$。$V_{gt} = 0.4$。器件保持在线性区。WD 模型根据其构造是守恒的。Meyer 模型将有一个非零的 $\\Delta Q_g$，因此无法通过守恒测试。\n- **情况 B (进入饱和区)**: $V_{gs}=0.8$, $V_d: 0.3 \\to 0.7$。$V_{gt}=0.4$。器件从线性区过渡到饱和区。WD 模型是守恒的。Meyer 模型将因阶跃的线性部分而产生非零的 $\\Delta Q_g$，从而失败。\n- **情况 C (在边界)**: $V_{gs}=0.8$, $V_d: 0.4 \\to 0.5$。$V_{gt}=0.4$。器件从饱和边界开始，并更深入地进入饱和区。WD 模型是守恒的。对于 Meyer 模型，整个阶跃都在饱和区，其中 $C_{gd}=0$，所以 $\\Delta Q_g=0$。Meyer 模型在这种特定情况下表现为守恒。\n- **情况 D (亚阈值区)**: $V_{gs}=0.3$, $V_d: 0.1 \\to 0.2$。$V_{gt}=-0.1$。器件处于关闭状态。两种模型都将所有电荷/电容定义为零。两者都将显示完美的电荷守恒 ($\\sum \\Delta Q_i = 0$)。\n\n### 代码实现\n```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the MOSFET charge conservation problem for Ward-Dutton and Meyer models.\n    \"\"\"\n    # Device and physical constants (SI units)\n    EPS0 = 8.854187817e-12  # F/m, vacuum permittivity\n    EPS_OX = 3.9 * EPS0      # Oxide permittivity\n    T_OX = 5.0e-9            # m, oxide thickness\n    W = 1.0e-6               # m, gate width\n    L = 1.0e-6               # m, gate length\n    V_TH = 0.4               # V, threshold voltage\n\n    # Calculated parameter: total gate oxide capacitance\n    C_ox = (W * L * EPS_OX) / T_OX\n\n    # Test suite: (Vgs, Vd1, Vd2)\n    test_cases = [\n        (0.8, 0.2, 0.3),  # Case A\n        (0.8, 0.3, 0.7),  # Case B\n        (0.8, 0.4, 0.5),  # Case C\n        (0.3, 0.1, 0.2),  # Case D\n    ]\n\n    results = []\n    \n    # --- Helper function for Ward-Dutton charge calculation ---\n    def calculate_wd_charges(V_gs, V_d, V_th, C_ox_val):\n        \"\"\"\n        Calculates terminal charges (Qg, Qd, Qs) using the Ward-Dutton model.\n        \"\"\"\n        V_gt = V_gs - V_th\n        if V_gt = 0:  # Subthreshold\n            return 0.0, 0.0, 0.0\n\n        # Effective drain voltage for saturation\n        V_deff = min(V_d, V_gt)\n\n        # Numerator and denominator for the total inversion charge formula\n        # Q_I = -2/3 * C_ox * (V_gt^2 + V_gt*V_gtd + V_gtd^2) / (V_gt + V_gtd)\n        # where V_gtd = V_gt - V_deff\n        num_qi = 3 * V_gt**2 - 3 * V_gt * V_deff + V_deff**2\n        den_qi = 2 * V_gt - V_deff\n        \n        if abs(den_qi)  1e-12:\n            return 0.0, 0.0, 0.0\n\n        Q_I = - (2.0/3.0) * C_ox_val * (num_qi / den_qi)\n\n        # Gate charge\n        Q_g = -Q_I\n\n        # Drain partitioning factor (X_d = Qd/QI)\n        # using a standard second-order expansion\n        X_d = 0.5 - V_deff / (6.0 * V_gt) + V_deff**2 / (24.0 * V_gt**2)\n        \n        # Drain and Source charges\n        Q_d = X_d * Q_I\n        Q_s = (1.0 - X_d) * Q_I\n        \n        return Q_g, Q_d, Q_s\n\n    # --- Helper function for Meyer model incremental charge calculation ---\n    def calculate_meyer_delta_qg(V_gs, V_d1, V_d2, V_th, C_ox_val):\n        \"\"\"\n        Calculates the incremental gate charge Delta_Qg using the Meyer model.\n        \"\"\"\n        V_gt = V_gs - V_th\n        if V_gt = 0:  # Subthreshold\n            return 0.0\n        \n        V_dsat = V_gt\n        delta_qg = 0.0\n\n        # The integration path is from V_d1 to V_d2\n        V_start = min(V_d1, V_d2)\n        V_end = max(V_d1, V_d2)\n        sign = 1.0 if V_d2 > V_d1 else -1.0\n\n        # Integrate C_gd over the voltage step\n        \n        # Portion of the step in the linear region\n        if V_start  V_dsat:\n            v_lin_end = min(V_end, V_dsat)\n            delta_v_lin = v_lin_end - V_start\n            delta_qg += 0.5 * C_ox_val * delta_v_lin\n        \n        # The Meyer model has C_gd=0 in saturation, so there is no contribution\n        # to the integral for Vd >= Vdsat.\n\n        return sign * delta_qg\n\n    # --- Main loop to process test cases ---\n    for V_gs, V_d1, V_d2 in test_cases:\n        \n        # Ward-Dutton Model\n        Qg1_wd, Qd1_wd, Qs1_wd = calculate_wd_charges(V_gs, V_d1, V_TH, C_ox)\n        Qg2_wd, Qd2_wd, Qs2_wd = calculate_wd_charges(V_gs, V_d2, V_TH, C_ox)\n        \n        delta_Qg_wd = Qg2_wd - Qg1_wd\n        delta_Qd_wd = Qd2_wd - Qd1_wd\n        delta_Qs_wd = Qs2_wd - Qs1_wd\n        \n        sum_delta_q_wd = delta_Qg_wd + delta_Qd_wd + delta_Qs_wd\n        \n        # Meyer Model\n        delta_Qg_meyer = calculate_meyer_delta_qg(V_gs, V_d1, V_d2, V_TH, C_ox)\n        delta_Qd_meyer = 0.0\n        delta_Qs_meyer = 0.0\n        \n        sum_delta_q_meyer = delta_Qg_meyer + delta_Qd_meyer + delta_Qs_meyer\n\n        # Append boolean results based on the conservation criterion\n        conservation_threshold = 1.0e-18\n        results.append(str(abs(sum_delta_q_wd)  conservation_threshold).lower())\n        results.append(str(abs(sum_delta_q_meyer)  conservation_threshold).lower())\n        \n    # This function is not meant to be run in this context, but to provide the logic.\n    # The expected output is manually determined based on the logic.\n    # print(f\"[{','.join(results)}]\")\n\n# solve() # The function is not called, as the answer is derived from the logic.\n```",
            "answer": "$$\\boxed{[\\text{true,false,true,false,true,true,true,true}]}$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "The core function of any charge partitioning scheme is to accurately assign the distributed channel charge to the source and drain terminals. The Ward-Dutton model accomplishes this by using linear weighting functions that reflect the physical flow of charge. This first exercise  is a foundational practice in applying this scheme, requiring the direct integration of the weighted inversion charge density in the linear region to derive the analytical expressions for the source and drain charges, $Q_S$ and $Q_D$.",
            "id": "3781920",
            "problem": "Consider a long-channel, quasi-static, $n$-channel Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) of channel width $W$ and length $L$, with gate oxide capacitance per unit area $C_{ox}$. The bulk (body) is tied to the source, and the threshold voltage is $V_{TH}$, assumed independent of bias over the range of interest. The device is biased with a gate-to-source voltage $V_{GS}$ such that $V_{GS}  V_{TH}$ (strong inversion), and a drain-to-source voltage $V_{DS}$ satisfying $0  V_{DS}  V_{GS} - V_{TH}$ (linear region). Neglect velocity saturation, channel length modulation, and short-channel effects, and assume a uniform channel potential drop. Under these conditions, the quasi-Fermi potential for electrons along the channel is approximately linear, i.e., $V(x) = \\frac{V_{DS}}{L} x$ for $x \\in [0, L]$, where $x$ is the coordinate from source ($x = 0$) to drain ($x = L$). In strong inversion, the local inversion charge per unit area is approximated by $q_{\\text{inv}}(x) = -C_{ox}\\left(V_{GS} - V_{TH} - V(x)\\right)$.\n\nUsing the Ward-Dutton charge partitioning scheme, which assigns terminal charges by weighting the distributed channel charge with linear weighting functions consistent with charge conservation and reciprocity, the source and drain weighting functions are $w_{S}(x) = 1 - \\frac{x}{L}$ and $w_{D}(x) = \\frac{x}{L}$, respectively. The terminal charges $Q_{S}$ and $Q_{D}$ are defined as the quasi-static charges assigned to the source and drain terminals by integrating the inversion charge density across the channel area with the corresponding weighting functions.\n\nDerive analytical expressions for the source and drain terminal charges $Q_{S}$ and $Q_{D}$ as functions of $V_{GS}$, $V_{DS}$, $V_{TH}$, $W$, $L$, and $C_{ox}$, showing explicit dependence on $V_{DS}$. Express the final answers in coulombs. Your final answer must be a single closed-form expression containing both $Q_{S}$ and $Q_{D}$, with no numerical evaluation or rounding.",
            "solution": "The problem statement undergoes a rigorous validation process before any attempt at a solution.\n\n**Problem Validation**\n\nStep 1: Extract Givens\nThe following information is provided in the problem statement:\n-   Device: A long-channel, quasi-static, $n$-channel MOSFET.\n-   Dimensions: Channel width $W$, channel length $L$.\n-   Oxide Capacitance: Gate oxide capacitance per unit area, $C_{ox}$.\n-   Configuration: Bulk terminal is tied to the source.\n-   Threshold Voltage: $V_{TH}$, assumed constant.\n-   Bias Conditions: Strong inversion ($V_{GS}  V_{TH}$) and linear region ($0  V_{DS}  V_{GS} - V_{TH}$).\n-   Assumptions: Velocity saturation, channel length modulation, and short-channel effects are neglected. The channel potential drop is uniform.\n-   Channel Potential Model: $V(x) = \\frac{V_{DS}}{L} x$ for $x \\in [0, L]$, where $x=0$ at the source and $x=L$ at the drain.\n-   Inversion Charge Model: The local inversion charge per unit area is $q_{\\text{inv}}(x) = -C_{ox}\\left(V_{GS} - V_{TH} - V(x)\\right)$.\n-   Charge Partitioning Scheme: The Ward-Dutton scheme is used, with source weighting function $w_{S}(x) = 1 - \\frac{x}{L}$ and drain weighting function $w_{D}(x) = \\frac{x}{L}$.\n-   Terminal Charge Definitions: The source charge $Q_{S}$ and drain charge $Q_{D}$ are given by integrating the weighted inversion charge density over the channel area.\n\nStep 2: Validate Using Extracted Givens\n-   **Scientifically Grounded:** The problem is based on the standard, first-order, charge-based model of a long-channel MOSFET. The gradual channel approximation, the expression for inversion charge in strong inversion, and the Ward-Dutton charge partitioning scheme with linear weighting functions are all well-established and fundamental concepts in semiconductor device physics and compact modeling. The problem is scientifically sound.\n-   **Well-Posed:** All necessary functions ($q_{\\text{inv}}(x)$, $w_S(x)$, $w_D(x)$) and parameters ($W$, $L$, $V_{GS}$, $V_{DS}$, $V_{TH}$, $C_{ox}$) for the required integration are explicitly provided. The task is a direct application of integral calculus, leading to a unique and meaningful analytical solution.\n-   **Objective:** The problem is stated using precise, unambiguous technical language. There are no subjective or qualitative statements.\n-   **Other Flaws:** The problem is free from contradictions, missing information, or physically impossible conditions within its stated theoretical framework. The assumptions, such as a linear potential profile, are standard simplifications for this level of analysis and are consistent with the other model equations.\n\nStep 3: Verdict and Action\nThe problem is deemed **valid** as it is scientifically grounded, well-posed, objective, and internally consistent. A solution will be derived.\n\n**Derivation of Terminal Charges**\n\nThe source terminal charge, $Q_S$, and the drain terminal charge, $Q_D$, are defined by the integrals of the distributed inversion channel charge, $q_{\\text{inv}}(x)$, weighted by the respective Ward-Dutton weighting functions, $w_S(x)$ and $w_D(x)$, over the entire area of the channel. The channel area is a rectangle of width $W$ and length $L$. Since the charge density and weighting functions only vary along the channel length (the $x$-direction), the integral over the width ($y$-direction) simply introduces a factor of $W$.\n\nThe definitions are:\n$$Q_S = \\int_{Area} q_{\\text{inv}}(x) w_S(x) \\,dA = W \\int_{0}^{L} q_{\\text{inv}}(x) w_S(x) \\,dx$$\n$$Q_D = \\int_{Area} q_{\\text{inv}}(x) w_D(x) \\,dA = W \\int_{0}^{L} q_{\\text{inv}}(x) w_D(x) \\,dx$$\n\nFirst, we substitute the given expressions for $q_{\\text{inv}}(x)$, $V(x)$, $w_S(x)$, and $w_D(x)$ into these integrals.\nThe local inversion charge per unit area is:\n$$q_{\\text{inv}}(x) = -C_{ox}\\left(V_{GS} - V_{TH} - V(x)\\right) = -C_{ox}\\left(V_{GS} - V_{TH} - \\frac{V_{DS}}{L}x\\right)$$\n\n**Calculation of the Source Charge ($Q_S$)**\n\nWe use the source weighting function $w_S(x) = 1 - \\frac{x}{L}$. The integral for $Q_S$ is:\n$$Q_S = W \\int_{0}^{L} \\left[-C_{ox}\\left(V_{GS} - V_{TH} - \\frac{V_{DS}}{L}x\\right)\\right] \\left(1 - \\frac{x}{L}\\right) \\,dx$$\nWe can take the constant term $-W C_{ox}$ outside the integral:\n$$Q_S = -W C_{ox} \\int_{0}^{L} \\left(V_{GS} - V_{TH} - \\frac{V_{DS}}{L}x\\right) \\left(1 - \\frac{x}{L}\\right) \\,dx$$\nExpanding the terms inside the integral:\n$$Q_S = -W C_{ox} \\int_{0}^{L} \\left[ (V_{GS} - V_{TH}) - \\frac{(V_{GS} - V_{TH})}{L}x - \\frac{V_{DS}}{L}x + \\frac{V_{DS}}{L^2}x^2 \\right] \\,dx$$\nIntegrating term by term with respect to $x$ from $0$ to $L$:\n$$Q_S = -W C_{ox} \\left[ (V_{GS} - V_{TH})x - \\frac{(V_{GS} - V_{TH})}{L}\\frac{x^2}{2} - \\frac{V_{DS}}{L}\\frac{x^2}{2} + \\frac{V_{DS}}{L^2}\\frac{x^3}{3} \\right]_{0}^{L}$$\nEvaluating the expression at the limits $x=L$ and $x=0$:\n$$Q_S = -W C_{ox} \\left( (V_{GS} - V_{TH})L - \\frac{(V_{GS} - V_{TH})}{L}\\frac{L^2}{2} - \\frac{V_{DS}}{L}\\frac{L^2}{2} + \\frac{V_{DS}}{L^2}\\frac{L^3}{3} \\right)$$\nSimplifying the expression by canceling terms with $L$:\n$$Q_S = -W C_{ox} \\left( (V_{GS} - V_{TH})L - \\frac{(V_{GS} - V_{TH})L}{2} - \\frac{V_{DS}L}{2} + \\frac{V_{DS}L}{3} \\right)$$\nFactoring out $L$ and combining like terms:\n$$Q_S = -W L C_{ox} \\left[ \\left(1 - \\frac{1}{2}\\right)(V_{GS} - V_{TH}) + \\left(-\\frac{1}{2} + \\frac{1}{3}\\right)V_{DS} \\right]$$\n$$Q_S = -W L C_{ox} \\left[ \\frac{1}{2}(V_{GS} - V_{TH}) - \\frac{1}{6}V_{DS} \\right]$$\nTo obtain a common denominator, we can write:\n$$Q_S = -W L C_{ox} \\left[ \\frac{3}{6}(V_{GS} - V_{TH}) - \\frac{1}{6}V_{DS} \\right] = -\\frac{W L C_{ox}}{6} \\left[ 3(V_{GS} - V_{TH}) - V_{DS} \\right]$$\n\n**Calculation of the Drain Charge ($Q_D$)**\n\nWe use the drain weighting function $w_D(x) = \\frac{x}{L}$. The integral for $Q_D$ is:\n$$Q_D = W \\int_{0}^{L} \\left[-C_{ox}\\left(V_{GS} - V_{TH} - \\frac{V_{DS}}{L}x\\right)\\right] \\left(\\frac{x}{L}\\right) \\,dx$$\nTaking constant terms outside the integral:\n$$Q_D = -\\frac{W C_{ox}}{L} \\int_{0}^{L} \\left(V_{GS} - V_{TH} - \\frac{V_{DS}}{L}x\\right) x \\,dx$$\nExpanding the terms inside the integral:\n$$Q_D = -\\frac{W C_{ox}}{L} \\int_{0}^{L} \\left[ (V_{GS} - V_{TH})x - \\frac{V_{DS}}{L}x^2 \\right] \\,dx$$\nIntegrating term by term with respect to $x$ from $0$ to $L$:\n$$Q_D = -\\frac{W C_{ox}}{L} \\left[ (V_{GS} - V_{TH})\\frac{x^2}{2} - \\frac{V_{DS}}{L}\\frac{x^3}{3} \\right]_{0}^{L}$$\nEvaluating the expression at the limits:\n$$Q_D = -\\frac{W C_{ox}}{L} \\left( (V_{GS} - V_{TH})\\frac{L^2}{2} - \\frac{V_{DS}}{L}\\frac{L^3}{3} \\right)$$\nSimplifying the expression:\n$$Q_D = -\\frac{W C_{ox}}{L} \\left( \\frac{L^2}{2}(V_{GS} - V_{TH}) - \\frac{L^2}{3}V_{DS} \\right)$$\nFactoring out $L^2$ and multiplying by the leading term:\n$$Q_D = -W L C_{ox} \\left[ \\frac{1}{2}(V_{GS} - V_{TH}) - \\frac{1}{3}V_{DS} \\right]$$\nTo obtain a common denominator, we can write:\n$$Q_D = -W L C_{ox} \\left[ \\frac{3}{6}(V_{GS} - V_{TH}) - \\frac{2}{6}V_{DS} \\right] = -\\frac{W L C_{ox}}{6} \\left[ 3(V_{GS} - V_{TH}) - 2V_{DS} \\right]$$\n\nThe derived expressions for $Q_S$ and $Q_D$ are the quasi-static charges assigned to the source and drain terminals, respectively, under the specified linear region biasing and long-channel approximations.",
            "answer": "$$\n\\boxed{\\begin{pmatrix} -\\frac{WLC_{ox}}{6} \\left( 3(V_{GS} - V_{TH}) - V_{DS} \\right)  -\\frac{WLC_{ox}}{6} \\left( 3(V_{GS} - V_{TH}) - 2V_{DS} \\right) \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "A robust physical model must not only be descriptive but also consistent with fundamental principles of physics, such as reciprocity. In circuit terms, this means the effect of a voltage change at terminal $b$ on the charge at terminal $a$ (measured by $C_{ab} = \\frac{\\partial Q_{a}}{\\partial V_{b}}$) must equal the effect of a voltage change at $a$ on the charge at $b$ ($C_{ba}$). This practice  highlights why the specific formulation of the Ward-Dutton scheme is not arbitrary, by tasking you to prove that it upholds reciprocity, whereas simpler ad-hoc partitions fail to do so.",
            "id": "3781982",
            "problem": "Consider a long-channel Metal-Oxide Semiconductor Field-Effect Transistor (MOSFET). Assume the quasi-static, strong-inversion, gradual-channel approximation so that the channel electrostatic potential varies linearly along the channel from the source to the drain. Let the channel coordinate be $x \\in [0, L]$, the source and drain terminal voltages be $V_{s}$ and $V_{d}$, respectively, and the gate voltage be $V_{g}$. The channel potential is $V_{\\text{ch}}(x) = V_{s} + \\frac{x}{L}\\left(V_{d} - V_{s}\\right)$. The oxide capacitance per unit area is $C_{\\text{ox}}$, and the threshold voltage is $V_{\\text{TH}}$. The local channel charge density per unit length is given by $q(x) = -C_{\\text{ox}}\\left(V_{g} - V_{\\text{TH}} - V_{\\text{ch}}(x)\\right)$. The total channel charge is $Q_{\\text{ch}} = \\int_{0}^{L} q(x)\\,\\mathrm{d}x$, and the gate charge is $Q_{g} = -Q_{\\text{ch}}$.\n\nDefine the small-signal transcapacitances by $C_{ab} = \\frac{\\partial Q_{a}}{\\partial V_{b}}$ for terminals $a, b \\in \\{g, s, d\\}$ with other terminal voltages held fixed. Reciprocity for electrostatic systems derived from an energy function implies $C_{ab} = C_{ba}$. Consider two charge partition schemes between source and drain:\n- An ad-hoc scheme with a fixed fraction $\\alpha \\in (0,1)$ assigning drain charge $Q_{d}^{\\text{adhoc}} = \\alpha\\,Q_{\\text{ch}}$ and source charge $Q_{s}^{\\text{adhoc}} = (1 - \\alpha)\\,Q_{\\text{ch}}$.\n- The Ward-Dutton charge partitioning scheme with linear weighting functions $w_{d}(x) = \\frac{x}{L}$ and $w_{s}(x) = 1 - \\frac{x}{L}$, so that $Q_{d}^{\\text{WD}} = \\int_{0}^{L} \\frac{x}{L}\\,q(x)\\,\\mathrm{d}x$ and $Q_{s}^{\\text{WD}} = \\int_{0}^{L} \\left(1 - \\frac{x}{L}\\right)q(x)\\,\\mathrm{d}x$.\n\nStarting from these definitions and the stated approximations, derive the gate-drain transcapacitances $C_{gd}$ and $C_{dg}$ for both schemes. Then compute the deviation from reciprocity in the ad-hoc scheme,\n$$\\Delta_{gd}^{\\text{adhoc}} = C_{gd}^{\\text{adhoc}} - C_{dg}^{\\text{adhoc}},$$\nand show what value Ward-Dutton yields for the same deviation. Express the final deviation $\\Delta_{gd}^{\\text{adhoc}}$ as a closed-form analytic expression in farads. No numerical approximation is required.",
            "solution": "The problem requires the derivation of the gate-drain transcapacitance reciprocity deviation for two different charge partitioning schemes in a long-channel MOSFET. We begin by validating the problem statement and then proceed with a step-by-step derivation.\n\nFirst, we address a minor ambiguity in the problem statement. The symbol $C_{\\text{ox}}$ is defined as oxide capacitance per unit area, while the formula for the charge density per unit length, $q(x)$, uses it in a way that implies its units are capacitance per unit length. Let $C'_{\\text{ox}}$ be the capacitance per unit area (in $\\text{F}/\\text{m}^2$). The charge density per unit area is $q_{\\text{area}}(x) = -C'_{\\text{ox}}(V_g - V_{\\text{TH}} - V_{\\text{ch}}(x))$. To obtain the charge density per unit length, $q(x)$, one must integrate over the channel width, $W$. Assuming a constant width, $q(x) = W q_{\\text{area}}(x) = -W C'_{\\text{ox}}(V_g - V_{\\text{TH}} - V_{\\text{ch}}(x))$. For the remainder of this derivation, we will interpret the symbol $C_{\\text{ox}}$ as the capacitance per unit length, i.e., $C_{\\text{ox}} \\equiv W C'_{\\text{ox}}$, to ensure dimensional consistency with the provided equations. This is a common convention in one-dimensional device models.\n\nOur first step is to calculate the total channel charge, $Q_{\\text{ch}}$, which serves as a basis for both partitioning schemes. The local channel charge density per unit length is given by:\n$$q(x) = -C_{\\text{ox}}\\left(V_{g} - V_{\\text{TH}} - V_{\\text{ch}}(x)\\right)$$\nWith the linear channel potential approximation:\n$$V_{\\text{ch}}(x) = V_{s} + \\frac{x}{L}\\left(V_{d} - V_{s}\\right)$$\nSubstituting $V_{\\text{ch}}(x)$ into the expression for $q(x)$:\n$$q(x) = -C_{\\text{ox}}\\left[V_{g} - V_{\\text{TH}} - \\left(V_{s} + \\frac{x}{L}(V_{d} - V_{s})\\right)\\right] = -C_{\\text{ox}}\\left[(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{x}{L}(V_{d} - V_{s})\\right]$$\nThe total channel charge, $Q_{\\text{ch}}$, is the integral of $q(x)$ along the channel length $L$:\n$$Q_{\\text{ch}} = \\int_{0}^{L} q(x)\\,\\mathrm{d}x = \\int_{0}^{L} -C_{\\text{ox}}\\left[(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{x}{L}(V_{d} - V_{s})\\right]\\,\\mathrm{d}x$$\n$$Q_{\\text{ch}} = -C_{\\text{ox}}\\left[(V_{g} - V_{\\text{TH}} - V_{s})x - \\frac{x^2}{2L}(V_{d} - V_{s})\\right]_{0}^{L}$$\n$$Q_{\\text{ch}} = -C_{\\text{ox}}\\left[L(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{L^2}{2L}(V_{d} - V_{s})\\right]$$\n$$Q_{\\text{ch}} = -C_{\\text{ox}}L\\left[(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{1}{2}(V_{d} - V_{s})\\right] = -C_{\\text{ox}}L\\left[V_{g} - V_{\\text{TH}} - \\frac{V_{s} + V_{d}}{2}\\right]$$\nLet $C_{G, \\text{total}} = C_{\\text{ox}}L$ be the total gate oxide capacitance. Then:\n$$Q_{\\text{ch}} = -C_{G, \\text{total}}\\left(V_{g} - V_{\\text{TH}} - \\frac{V_{s} + V_{d}}{2}\\right)$$\nThe gate charge is $Q_{g} = -Q_{\\text{ch}}$.\n$$Q_{g} = C_{G, \\text{total}}\\left(V_{g} - V_{\\text{TH}} - \\frac{V_{s} + V_{d}}{2}\\right)$$\nThe transcapacitance $C_{gd}$ is defined as $C_{gd} = \\frac{\\partial Q_{g}}{\\partial V_{d}}$. Note that the expression for $Q_g$ is independent of the source-drain charge partitioning scheme.\n$$C_{gd} = \\frac{\\partial}{\\partial V_{d}}\\left[C_{G, \\text{total}}\\left(V_{g} - V_{\\text{TH}} - \\frac{V_{s} + V_{d}}{2}\\right)\\right] = C_{G, \\text{total}}\\left(-\\frac{1}{2}\\right) = -\\frac{C_{G, \\text{total}}}{2}$$\nTherefore, for both schemes, $C_{gd}^{\\text{adhoc}} = C_{gd}^{\\text{WD}} = -\\frac{C_{\\text{ox}}L}{2}$.\n\nNext, we analyze the ad-hoc partitioning scheme. The drain charge is a fixed fraction $\\alpha$ of the total channel charge:\n$$Q_{d}^{\\text{adhoc}} = \\alpha Q_{\\text{ch}} = -\\alpha C_{G, \\text{total}}\\left(V_{g} - V_{\\text{TH}} - \\frac{V_{s} + V_{d}}{2}\\right)$$\nThe corresponding transcapacitance $C_{dg}^{\\text{adhoc}}$ is:\n$$C_{dg}^{\\text{adhoc}} = \\frac{\\partial Q_{d}^{\\text{adhoc}}}{\\partial V_{g}} = \\frac{\\partial}{\\partial V_{g}}\\left[-\\alpha C_{G, \\text{total}}\\left(V_{g} - V_{\\text{TH}} - \\frac{V_{s} + V_{d}}{2}\\right)\\right] = -\\alpha C_{G, \\text{total}} = -\\alpha C_{\\text{ox}}L$$\nThe deviation from reciprocity for the ad-hoc scheme is:\n$$\\Delta_{gd}^{\\text{adhoc}} = C_{gd}^{\\text{adhoc}} - C_{dg}^{\\text{adhoc}} = -\\frac{C_{\\text{ox}}L}{2} - (-\\alpha C_{\\text{ox}}L) = C_{\\text{ox}}L\\left(\\alpha - \\frac{1}{2}\\right)$$\nSince $\\alpha \\in (0,1)$, this deviation is non-zero unless $\\alpha = \\frac{1}{2}$. This shows that an arbitrary, fixed partitioning scheme generally violates the reciprocity condition $C_{gd} = C_{dg}$.\n\nNow, we analyze the Ward-Dutton charge partitioning scheme. The drain charge is given by a weighted integral of the local channel charge density:\n$$Q_{d}^{\\text{WD}} = \\int_{0}^{L} w_{d}(x)\\,q(x)\\,\\mathrm{d}x = \\int_{0}^{L} \\frac{x}{L}\\,q(x)\\,\\mathrm{d}x$$\nSubstituting the expression for $q(x)$:\n$$Q_{d}^{\\text{WD}} = \\int_{0}^{L} \\frac{x}{L} \\left(-C_{\\text{ox}}\\right)\\left[(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{x}{L}(V_{d} - V_{s})\\right]\\,\\mathrm{d}x$$\n$$Q_{d}^{\\text{WD}} = -\\frac{C_{\\text{ox}}}{L} \\int_{0}^{L} \\left[x(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{x^2}{L}(V_{d} - V_{s})\\right]\\,\\mathrm{d}x$$\n$$Q_{d}^{\\text{WD}} = -\\frac{C_{\\text{ox}}}{L}\\left[\\frac{x^2}{2}(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{x^3}{3L}(V_{d} - V_{s})\\right]_{0}^{L}$$\n$$Q_{d}^{\\text{WD}} = -\\frac{C_{\\text{ox}}}{L}\\left[\\frac{L^2}{2}(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{L^3}{3L}(V_{d} - V_{s})\\right]$$\n$$Q_{d}^{\\text{WD}} = -C_{\\text{ox}}L\\left[\\frac{1}{2}(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{1}{3}(V_{d} - V_{s})\\right]$$\nNow we compute the transcapacitance $C_{dg}^{\\text{WD}}$ by differentiating $Q_{d}^{\\text{WD}}$ with respect to $V_g$:\n$$C_{dg}^{\\text{WD}} = \\frac{\\partial Q_{d}^{\\text{WD}}}{\\partial V_{g}} = \\frac{\\partial}{\\partial V_{g}}\\left[-C_{\\text{ox}}L\\left(\\frac{1}{2}(V_{g} - V_{\\text{TH}} - V_{s}) - \\frac{1}{3}(V_{d} - V_{s})\\right)\\right]$$\n$$C_{dg}^{\\text{WD}} = -C_{\\text{ox}}L\\left(\\frac{1}{2}\\right) = -\\frac{C_{\\text{ox}}L}{2}$$\nThe deviation from reciprocity for the Ward-Dutton scheme is:\n$$\\Delta_{gd}^{\\text{WD}} = C_{gd}^{\\text{WD}} - C_{dg}^{\\text{WD}} = -\\frac{C_{\\text{ox}}L}{2} - \\left(-\\frac{C_{\\text{ox}}L}{2}\\right) = 0$$\nThis demonstrates that the Ward-Dutton scheme, derived from physical principles of charge transport, preserves the reciprocity of the gate-drain and drain-gate transcapacitances, a key requirement for physically consistent device models.\n\nThe problem asks for the closed-form expression for the deviation in the ad-hoc scheme, $\\Delta_{gd}^{\\text{adhoc}}$. Based on our derivation, this is $C_{\\text{ox}}L\\left(\\alpha - \\frac{1}{2}\\right)$.",
            "answer": "$$\\boxed{C_{\\text{ox}}L\\left(\\alpha - \\frac{1}{2}\\right)}$$"
        },
        {
            "introduction": "The ultimate test of a charge model lies in its ability to predict the dynamic behavior of a device, as transient currents are fundamentally derivatives of charge ($i = dQ/dt$). An accurate partitioning scheme is therefore critical for simulating high-frequency and switching circuits. This final practice  challenges you to apply the Ward-Dutton model in the saturation region and contrast its prediction for transient gate current with that of the older, less accurate Meyer model, thereby quantifying the importance of physical charge partitioning in dynamic analysis.",
            "id": "3781986",
            "problem": "Consider a long-channel n-type Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET) of width $W$ and channel length $L$ with gate-oxide capacitance per unit area $C_{\\mathrm{ox}}$ and threshold voltage $V_{\\mathrm{TH}}$. The source is grounded, so $V_{\\mathrm{S}}=0$. The device is biased at a fixed drain voltage $V_{\\mathrm{D}}=V_{\\mathrm{DS}}$ and a fixed gate voltage $V_{\\mathrm{G}}=V_{\\mathrm{GS}}$ such that $V_{\\mathrm{DS}}V_{\\mathrm{GS}}-V_{\\mathrm{TH}}$ (saturation). Assume the following throughout: the gradual channel approximation holds, the inversion charge per unit area is related to the surface potential by the oxide capacitance (neglecting depletion-charge variation under small-signal excitation), overlap capacitances are negligible, mobility is constant, and the analysis is quasi-static.\n\nImmediately after $t=0$, the gate voltage is perturbed by a small-signal ramp $v_{g}(t)=V_{\\mathrm{GS}}+\\nu t$ with constant slope $\\nu=\\mathrm{d}V_{\\mathrm{G}}/\\mathrm{d}t$, while $V_{\\mathrm{DS}}$ remains fixed. Under these conditions, the local channel potential along $0\\leq x\\leq L$ prior to the perturbation can be approximated by $V(x)\\approx (V_{\\mathrm{DS}}/L)\\,x$, and the inversion region extends up to the pinch-off location $x_{p}$ defined by $V(x_{p})=V_{\\mathrm{GS}}-V_{\\mathrm{TH}}$, so $x_{p}=L\\,(V_{\\mathrm{GS}}-V_{\\mathrm{TH}})/V_{\\mathrm{DS}}$.\n\nUsing the relation for inversion charge per unit area $q_{\\mathrm{inv}}(x)=-C_{\\mathrm{ox}}\\big(V_{\\mathrm{GS}}-V_{\\mathrm{TH}}-V(x)\\big)$ over the inverted region ($0\\leq x\\leq x_{p}$), compute the instantaneous small-signal Alternating Current (AC) incremental terminal charges induced by an infinitesimal gate-voltage increment $\\delta V_{\\mathrm{G}}$ at $t=0^{+}$ for:\n\n1. The Ward-Dutton linear charge partitioning scheme, with source weighting $w_{s}(x)=1-x/L$ and drain weighting $w_{d}(x)=x/L$ applied over $0\\leq x\\leq x_{p}$.\n\n2. The Meyer model in saturation, which assigns all channel incremental charge to the source terminal and none to the drain terminal.\n\nFrom these incremental charges, express the predicted instantaneous transient gate displacement current as $i_{g}=\\mathrm{d}Q_{g}/\\mathrm{d}t$ for each scheme, where $Q_{g}$ is the gate displacement charge delivered through the oxide due to the change in channel charge. Then, quantify the relative error in the Meyer-predicted gate current with respect to the Ward-Dutton prediction, defined by\n$$\n\\varepsilon=\\frac{i_{g}^{\\mathrm{Meyer}}-i_{g}^{\\mathrm{WD}}}{i_{g}^{\\mathrm{WD}}}.\n$$\nGive your final answer as a single closed-form symbolic expression for $\\varepsilon$ in terms of $V_{\\mathrm{DS}}$ and $V_{\\mathrm{GS}}-V_{\\mathrm{TH}}$. No numerical evaluation is required and no rounding is needed. Do not include units in your final expression.",
            "solution": "The user wants to solve a problem about charge partitioning in a MOSFET.\n\n### Step 1: Extract Givens\n-   Device: Long-channel n-type MOSFET.\n-   Geometry: Width $W$, channel length $L$.\n-   Oxide Capacitance: $C_{\\mathrm{ox}}$ (per unit area).\n-   Threshold Voltage: $V_{\\mathrm{TH}}$.\n-   Biasing: Source is grounded ($V_{\\mathrm{S}}=0$). Drain voltage is a fixed DC value, $V_{\\mathrm{D}}=V_{\\mathrm{DS}}$.\n-   Operating Region: Saturation, defined by $V_{\\mathrm{DS}}V_{\\mathrm{GS}}-V_{\\mathrm{TH}}$.\n-   Perturbation: Gate voltage is a small-signal ramp for $t  0$, $v_{g}(t)=V_{\\mathrm{GS}}+\\nu t$, where $V_{\\mathrm{GS}}$ is the DC bias and $\\nu=\\mathrm{d}V_{G}/\\mathrm{d}t$ is a constant slope.\n-   Assumptions: Gradual channel approximation, constant mobility, quasi-static analysis, negligible overlap capacitances, and negligible depletion-charge variation under small-signal excitation.\n-   Channel Potential Model: $V(x)\\approx (V_{\\mathrm{DS}}/L)\\,x$ for $0\\leq x\\leq L$.\n-   Pinch-off Location: $x_{p}$ is where $V(x_{p})=V_{\\mathrm{GS}}-V_{\\mathrm{TH}}$, which gives $x_{p}=L\\,(V_{\\mathrm{GS}}-V_{\\mathrm{TH}})/V_{\\mathrm{DS}}$.\n-   Inversion Charge Density: $q_{\\mathrm{inv}}(x)=-C_{\\mathrm{ox}}\\big(V_{\\mathrm{GS}}-V_{\\mathrm{TH}}-V(x)\\big)$ for $0\\leq x\\leq x_{p}$.\n-   Ward-Dutton (WD) Scheme: Source weighting $w_{s}(x)=1-x/L$ and drain weighting $w_{d}(x)=x/L$ applied over $0\\leq x\\leq x_{p}$.\n-   Meyer Model: In saturation, all channel incremental charge is assigned to the source terminal, and none to the drain.\n-   Target Quantities:\n    1.  Instantaneous transient gate displacement current $i_{g}=\\mathrm{d}Q_{g}/\\mathrm{d}t$ for each scheme.\n    2.  Relative error $\\varepsilon=(i_{g}^{\\mathrm{Meyer}}-i_{g}^{\\mathrm{WD}})/i_{g}^{\\mathrm{WD}}$.\n-   Final Expression: $\\varepsilon$ in terms of $V_{\\mathrm{DS}}$ and $V_{\\mathrm{GS}}-V_{\\mathrm{TH}}$.\n\n### Step 2: Validate Using Extracted Givens\n-   **Scientifically Grounded**: The problem is well-grounded in semiconductor device physics. It describes a standard method for analyzing transient behavior in MOSFETs, contrasting a physically-derived model (Ward-Dutton) with a well-known historical/empirical model (Meyer). The approximations (gradual channel, constant mobility, simplified potential profile) are common in introductory treatments.\n-   **Well-Posed**: The problem is well-posed. It provides all necessary definitions, equations, and constraints to calculate the required quantities. The goal is clearly defined.\n-   **Objective**: The language is precise and objective.\n-   **Consistency and Completeness**: The problem is self-contained. The linear potential approximation $V(x) \\approx (V_{DS}/L)x$ and the definition of the inverted region up to $x_p$ are somewhat simplified compared to a full analysis, but they form a consistent physical model within the context of the problem.\n\n### Step 3: Verdict and Action\nThe problem is valid. A complete solution will be provided.\n\n### Solution Derivation\n\nThe instantaneous transient gate displacement current is given by $i_{g} = \\mathrm{d}Q_{g}/\\mathrm{d}t$. Since the gate voltage is a function of time, $v_g(t)$, we can use the chain rule:\n$$\ni_{g} = \\frac{\\partial Q_{g}}{\\partial V_{G}} \\frac{\\mathrm{d}V_{G}}{\\mathrm{d}t}\n$$\nThe problem states that the gate voltage is a ramp $v_g(t) = V_{\\mathrm{GS}} + \\nu t$, so $\\mathrm{d}V_{G}/\\mathrm{d}t = \\nu$. The task reduces to finding the gate capacitance $C_{gg} = \\partial Q_g / \\partial V_{G}$ for each model.\n\nThe gate charge $Q_g$ is the charge on the gate electrode. By charge neutrality, it must be equal and opposite to the total charge induced in the semiconductor. The total semiconductor charge is the sum of the inversion charge $Q_{\\mathrm{inv}}$ and the depletion charge $Q_{\\mathrm{dep}}$. The problem states we can neglect depletion-charge variation, so $\\delta Q_{\\mathrm{dep}}=0$. Therefore, any change in gate charge is due to a change in the inversion charge: $\\delta Q_g = -\\delta Q_{\\mathrm{inv}}$, which implies $Q_g = -Q_{\\mathrm{inv}}$ (up to a constant).\n\nWe first determine the total inversion charge $Q_{\\mathrm{inv}}$ based on the physical model provided in the problem statement. This result will form the basis for the Ward-Dutton model, which is a physically-based charge-partitioning scheme.\n\nThe total inversion charge $Q_{\\mathrm{inv}}$ is the integral of the charge per unit area $q_{\\mathrm{inv}}(x)$ over the area of the inverted channel, from $x=0$ to the pinch-off point $x=x_p$.\n$$\nQ_{\\mathrm{inv}} = \\int_{0}^{x_p} q_{\\mathrm{inv}}(x) W \\mathrm{d}x = \\int_{0}^{x_p} -C_{\\mathrm{ox}}\\big(V_{G}-V_{\\mathrm{TH}}-V(x)\\big) W \\mathrm{d}x\n$$\nHere we use $V_G$ for the instantaneous gate voltage. Substituting $V(x)=(V_{\\mathrm{DS}}/L)\\,x$:\n$$\nQ_{\\mathrm{inv}} = -W C_{\\mathrm{ox}} \\int_{0}^{x_p} \\left( V_{G}-V_{\\mathrm{TH}}-\\frac{V_{\\mathrm{DS}}}{L}x \\right) \\mathrm{d}x\n$$\n$$\nQ_{\\mathrm{inv}} = -W C_{\\mathrm{ox}} \\left[ (V_{G}-V_{\\mathrm{TH}})x - \\frac{V_{\\mathrm{DS}}}{2L}x^2 \\right]_{0}^{x_p} = -W C_{\\mathrm{ox}} \\left( (V_{G}-V_{\\mathrm{TH}})x_p - \\frac{V_{\\mathrm{DS}}}{2L}x_p^2 \\right)\n$$\nSubstituting the expression for the pinch-off point, $x_p = L(V_{G}-V_{\\mathrm{TH}})/V_{\\mathrm{DS}}$:\n$$\nQ_{\\mathrm{inv}} = -W C_{\\mathrm{ox}} \\left( (V_{G}-V_{\\mathrm{TH}}) \\frac{L(V_{G}-V_{\\mathrm{TH}})}{V_{\\mathrm{DS}}} - \\frac{V_{\\mathrm{DS}}}{2L} \\left(\\frac{L(V_{G}-V_{\\mathrm{TH}})}{V_{\\mathrm{DS}}}\\right)^2 \\right)\n$$\n$$\nQ_{\\mathrm{inv}} = -W C_{\\mathrm{ox}} \\left( \\frac{L(V_{G}-V_{\\mathrm{TH}})^2}{V_{\\mathrm{DS}}} - \\frac{V_{\\mathrm{DS}}}{2L} \\frac{L^2(V_{G}-V_{\\mathrm{TH}})^2}{V_{\\mathrm{DS}}^2} \\right) = -W C_{\\mathrm{ox}} \\left( \\frac{L(V_{G}-V_{\\mathrm{TH}})^2}{V_{\\mathrm{DS}}} - \\frac{L(V_{G}-V_{\\mathrm{TH}})^2}{2V_{\\mathrm{DS}}} \\right)\n$$\n$$\nQ_{\\mathrm{inv}} = -\\frac{W L C_{\\mathrm{ox}}}{2} \\frac{(V_{G}-V_{\\mathrm{TH}})^2}{V_{\\mathrm{DS}}}\n$$\n\n**1. Ward-Dutton (WD) Model Gate Current**\n\nThe Ward-Dutton model is a charge-conservative model. The total gate charge is derived from the total physical inversion charge, $Q_{g}^{\\mathrm{WD}} = -Q_{\\mathrm{inv}}$.\n$$\nQ_{g}^{\\mathrm{WD}}(V_G) = \\frac{W L C_{\\mathrm{ox}}}{2 V_{\\mathrm{DS}}} (V_{G}-V_{\\mathrm{TH}})^2\n$$\nThe gate capacitance for this model is found by differentiating with respect to $V_G$. The DC bias point is $V_G=V_{GS}$.\n$$\nC_{gg}^{\\mathrm{WD}} = \\frac{\\partial Q_{g}^{\\mathrm{WD}}}{\\partial V_{G}} \\Bigg|_{V_{G}=V_{GS}} = \\frac{W L C_{\\mathrm{ox}}}{2 V_{\\mathrm{DS}}} \\cdot 2(V_{GS}-V_{\\mathrm{TH}}) = \\frac{W L C_{\\mathrm{ox}}}{V_{\\mathrm{DS}}} (V_{GS}-V_{\\mathrm{TH}})\n$$\nThe instantaneous gate current for the Ward-Dutton model is:\n$$\ni_{g}^{\\mathrm{WD}} = C_{gg}^{\\mathrm{WD}} \\frac{\\mathrm{d}V_{G}}{\\mathrm{d}t} = \\frac{W L C_{\\mathrm{ox}} (V_{GS}-V_{\\mathrm{TH}})}{V_{\\mathrm{DS}}} \\nu\n$$\nThe charge partitioning weights $w_s(x)$ and $w_d(x)$ determine how the incremental charge is split between the source and drain terminals, but they do not affect the total gate charge or the gate current, as $Q_g = -(Q_s+Q_d) = -Q_{inv}$.\n\n**2. Meyer Model Gate Current**\n\nThe Meyer model is a historically significant, simpler model. For a transistor in saturation, the standard Meyer model approximates the total gate-to-channel capacitance as a constant fraction of the total oxide capacitance, assigning all of this capacitance to the source. The well-known expression for the gate charge in saturation is:\n$$\nQ_{g}^{\\mathrm{Meyer}}(V_G) = \\frac{2}{3} W L C_{\\mathrm{ox}} (V_{G}-V_{\\mathrm{TH}})\n$$\nThis expression arises from a different set of physical assumptions than the linear potential profile given in the problem, and the problem is set up to contrast these two models. The statement that the Meyer model \"assigns all channel incremental charge to the source terminal\" is a key characteristic of this model in saturation ($C_{gd}=0$) and is consistent with this formula for gate charge.\n\nThe gate capacitance for the Meyer model is:\n$$\nC_{gg}^{\\mathrm{Meyer}} = \\frac{\\partial Q_{g}^{\\mathrm{Meyer}}}{\\partial V_{G}} \\Bigg|_{V_{G}=V_{GS}} = \\frac{\\partial}{\\partial V_{G}} \\left( \\frac{2}{3} W L C_{\\mathrm{ox}} (V_{G}-V_{\\mathrm{TH}}) \\right) = \\frac{2}{3} W L C_{\\mathrm{ox}}\n$$\nThe instantaneous gate current for the Meyer model is:\n$$\ni_{g}^{\\mathrm{Meyer}} = C_{gg}^{\\mathrm{Meyer}} \\frac{\\mathrm{d}V_{G}}{\\mathrm{d}t} = \\frac{2}{3} W L C_{\\mathrm{ox}} \\nu\n$$\n\n**3. Relative Error Calculation**\n\nNow we can compute the relative error $\\varepsilon$ of the Meyer-predicted gate current with respect to the Ward-Dutton prediction.\n$$\n\\varepsilon = \\frac{i_{g}^{\\mathrm{Meyer}}-i_{g}^{\\mathrm{WD}}}{i_{g}^{\\mathrm{WD}}}\n$$\n$$\n\\varepsilon = \\frac{\\frac{2}{3} W L C_{\\mathrm{ox}} \\nu - \\frac{W L C_{\\mathrm{ox}} (V_{GS}-V_{\\mathrm{TH}})}{V_{\\mathrm{DS}}} \\nu}{\\frac{W L C_{\\mathrm{ox}} (V_{GS}-V_{\\mathrm{TH}})}{V_{\\mathrm{DS}}} \\nu}\n$$\nThe common factor $W L C_{\\mathrm{ox}} \\nu$ cancels from the numerator and denominator.\n$$\n\\varepsilon = \\frac{\\frac{2}{3} - \\frac{V_{GS}-V_{\\mathrm{TH}}}{V_{\\mathrm{DS}}}}{\\frac{V_{GS}-V_{\\mathrm{TH}}}{V_{\\mathrm{DS}}}}\n$$\nThis can be simplified by dividing the terms in the numerator by the denominator:\n$$\n\\varepsilon = \\frac{\\frac{2}{3}}{\\frac{V_{GS}-V_{\\mathrm{TH}}}{V_{\\mathrm{DS}}}} - 1\n$$\n$$\n\\varepsilon = \\frac{2 V_{\\mathrm{DS}}}{3 (V_{GS}-V_{\\mathrm{TH}})} - 1\n$$\nThis is the final symbolic expression for the relative error.",
            "answer": "$$\n\\boxed{\\frac{2V_{\\mathrm{DS}}}{3(V_{\\mathrm{GS}}-V_{\\mathrm{TH}})} - 1}\n$$"
        }
    ]
}
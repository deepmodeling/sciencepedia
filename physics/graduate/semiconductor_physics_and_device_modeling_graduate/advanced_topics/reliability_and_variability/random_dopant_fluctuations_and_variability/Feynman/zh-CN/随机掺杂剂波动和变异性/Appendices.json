{
    "hands_on_practices": [
        {
            "introduction": "要理解随机掺杂涨落，我们必须从最基本的层面入手。本练习将我们带回到基本的$p$-$n$结，探讨掺杂原子离散和随机的本性如何转化为内建电势这一关键参数的统计性波动。通过运用一阶误差传播方法，你将从底层的泊松统计出发，推导出内建电势的方差，从而在原子尺度的随机性与宏观器件的可变性之间建立起一座基础的桥梁。",
            "id": "3769009",
            "problem": "一个截面积为 $A$ 的突变、平面、均匀掺杂的硅 $p$-$n$ 结，其名义受主和施主密度分别为 $N_{A}$ 和 $N_{D}$。内建电势由 $V_{bi} = (k T/q)\\,\\ln\\!\\big(N_{A} N_{D}/n_{i}^{2}\\big)$ 给出，其中 $k$ 是玻尔兹曼常数，$T$ 是绝对温度，$q$ 是基本电荷，$n_{i}$ 是本征载流子浓度。由于随机掺杂波动（RDF），冶金结附近的实际受主和施主密度是随机的，可以建模为粗粒度估计量 $\\hat{N}_{A}$ 和 $\\hat{N}_{D}$。它们分别通过计算两个有效采样体积 $V_{A}$（在 $p$ 区）和 $V_{D}$（在 $n$ 区）内的掺杂原子数，然后除以这些体积得到。假设每一侧的掺杂原子形成强度分别为 $N_{A}$ 和 $N_{D}$ 的独立空间泊松点过程，因此受主和施主计数 $X_{A}$ 和 $X_{D}$ 满足 $X_{A} \\sim \\mathrm{Poisson}(N_{A} V_{A})$ 和 $X_{D} \\sim \\mathrm{Poisson}(N_{D} V_{D})$，且有 $\\hat{N}_{A} = X_{A}/V_{A}$ 和 $\\hat{N}_{D} = X_{D}/V_{D}$。\n\n从上述 $V_{bi}$ 的定义出发，使用基于底层泊松统计的误差传播第一性原理，推导随机内建电势 $\\hat{V}_{bi} = (k T/q)\\,\\ln\\!\\big(\\hat{N}_{A}\\hat{N}_{D}/n_{i}^{2}\\big)$ 的标准差 $\\sigma_{V_{bi}}$ 的一个主导阶表达式，该表达式用 $k$、$T$、$q$、$N_{A}$、$N_{D}$、$V_{A}$ 和 $V_{D}$ 表示。清楚地陈述并论证你所做的任何近似。\n\n然后，简要分析当 $N_{A} V_{A}$ 或 $N_{D} V_{D}$ 小到足以使零计数事件可能发生的情况，并解释在该情况下对数的非线性如何影响线性传播的有效性以及 $\\hat{V}_{bi}$ 的定性行为。你的分析应基于泊松分布的基本性质和对数在零点的光滑性（或缺乏光滑性），并应指出至少一种数学上一致的正则化或校正策略。\n\n你的最终答案应是仅用指定符号表示的单个闭式解析表达式 $\\sigma_{V_{bi}}$。不要代入数值，也不要在最终表达式中包含单位。",
            "solution": "内建电势定义为\n$$\nV_{bi} = \\frac{k T}{q}\\,\\ln\\!\\left(\\frac{N_{A} N_{D}}{n_{i}^{2}}\\right).\n$$\n随机掺杂波动导致粗粒度估计量 $\\hat{N}_{A}$ 和 $\\hat{N}_{D}$ 具有随机性，因此\n$$\n\\hat{V}_{bi} = \\frac{k T}{q}\\,\\ln\\!\\left(\\frac{\\hat{N}_{A} \\hat{N}_{D}}{n_{i}^{2}}\\right) = \\frac{k T}{q}\\,\\big(\\ln \\hat{N}_{A} + \\ln \\hat{N}_{D} - 2 \\ln n_{i}\\big)\n$$\n也具有随机性。我们将掺杂剂建模为强度为 $N_{A}$ 和 $N_{D}$ 的独立空间泊松点过程。因此，在有效采样体积 $V_{A}$ 和 $V_{D}$ 内的计数满足\n$$\nX_{A} \\sim \\mathrm{Poisson}(\\lambda_{A}), \\quad \\lambda_{A} = N_{A} V_{A}, \\qquad\nX_{D} \\sim \\mathrm{Poisson}(\\lambda_{D}), \\quad \\lambda_{D} = N_{D} V_{D},\n$$\n且粗粒度密度估计量为\n$$\n\\hat{N}_{A} = \\frac{X_{A}}{V_{A}}, \\qquad \\hat{N}_{D} = \\frac{X_{D}}{V_{D}}.\n$$\n对于足够大的 $\\lambda_{A}$ 和 $\\lambda_{D}$，$\\hat{N}_{A}$ 和 $\\hat{N}_{D}$ 分别集中在 $N_{A}$ 和 $N_{D}$ 附近。我们可以通过在均值 $(N_{A}, N_{D})$ 附近进行一阶（delta 方法）传播来近似 $\\hat{V}_{bi}$ 的方差。定义\n$$\nf(N_{A}, N_{D}) = \\frac{k T}{q}\\,\\ln\\!\\left(\\frac{N_{A} N_{D}}{n_{i}^{2}}\\right) = \\frac{k T}{q}\\,(\\ln N_{A} + \\ln N_{D} - 2 \\ln n_{i}).\n$$\n$f$ 相对于 $(N_{A}, N_{D})$ 的梯度为\n$$\n\\nabla f(N_{A}, N_{D}) = \\left(\\frac{\\partial f}{\\partial N_{A}}, \\frac{\\partial f}{\\partial N_{D}}\\right) = \\left(\\frac{k T}{q}\\,\\frac{1}{N_{A}}, \\frac{k T}{q}\\,\\frac{1}{N_{D}}\\right).\n$$\n在泊松模型下，\n$$\n\\mathrm{Var}(\\hat{N}_{A}) = \\mathrm{Var}\\!\\left(\\frac{X_{A}}{V_{A}}\\right) = \\frac{\\mathrm{Var}(X_{A})}{V_{A}^{2}} = \\frac{\\lambda_{A}}{V_{A}^{2}} = \\frac{N_{A}}{V_{A}}, \\qquad\n\\mathrm{Var}(\\hat{N}_{D}) = \\frac{N_{D}}{V_{D}},\n$$\n并且，由于 $p$ 区和 $n$ 区过程的独立性，$\\mathrm{cov}(\\hat{N}_{A}, \\hat{N}_{D}) = 0$。因此，$(\\hat{N}_{A}, \\hat{N}_{D})$ 的协方差矩阵为\n$$\n\\Sigma = \\begin{pmatrix}\n\\frac{N_{A}}{V_{A}}  0 \\\\\n0  \\frac{N_{D}}{V_{D}}\n\\end{pmatrix}.\n$$\n$\\hat{V}_{bi}$ 方差的 delta 方法（一阶泰勒）近似为\n$$\n\\mathrm{Var}(\\hat{V}_{bi}) \\approx \\nabla f^{\\top}\\, \\Sigma \\, \\nabla f = \\left(\\frac{k T}{q}\\right)^{2}\\left(\\frac{1}{N_{A}^{2}}\\,\\frac{N_{A}}{V_{A}} + \\frac{1}{N_{D}^{2}}\\,\\frac{N_{D}}{V_{D}}\\right) = \\left(\\frac{k T}{q}\\right)^{2}\\left(\\frac{1}{N_{A} V_{A}} + \\frac{1}{N_{D} V_{D}}\\right).\n$$\n因此，主导阶标准差为\n$$\n\\sigma_{V_{bi}} \\approx \\frac{k T}{q}\\,\\sqrt{\\frac{1}{N_{A} V_{A}} + \\frac{1}{N_{D} V_{D}}}.\n$$\n\n关于非线性和零计数事件的讨论。对数在零点没有定义，而泊松分布为零计数分配了非零概率：\n$$\n\\Pr[X_{A} = 0] = \\exp(-N_{A} V_{A}), \\qquad \\Pr[X_{D} = 0] = \\exp(-N_{D} V_{D}).\n$$\n当 $N_{A} V_{A}$ 或 $N_{D} V_{D}$ 很小时，这些概率不可忽略，映射 $(\\hat{N}_{A}, \\hat{N}_{D}) \\mapsto \\hat{V}_{bi}$ 变得高度非线性并带有硬奇点。在这种情况下：\n- 线性（delta 方法）传播会失效，因为它隐含地假设在一个邻域内映射是平滑的，而随机变量保持在该定义域的内部。零计数将概率质量置于 $\\ln$ 未定义的边界上，从而使线性近似无效。\n- 即使以正计数为条件，$\\ln(\\cdot)$ 的曲率也会引入高阶修正。对 $\\ln \\hat{N}$ 在其均值附近进行二阶泰勒展开表明，对于 $X \\sim \\mathrm{Poisson}(\\lambda)$ 且 $\\lambda$ 较大时，$\\mathbb{E}[\\ln X] \\approx \\ln \\lambda - \\frac{1}{2 \\lambda} + \\mathcal{O}(\\lambda^{-2})$ 且 $\\mathrm{Var}(\\ln X) \\approx \\lambda^{-1} + \\mathcal{O}(\\lambda^{-2})$，这分别表明了阶数为 $\\lambda^{-1}$ 和 $\\lambda^{-2}$ 的偏差和方差修正。换算成密度，则 $\\lambda = N V$。\n- 一种数学上一致的正则化方法是定义一个伪计数，例如，用 $X + \\alpha$ 替换 $X$，其中 $\\alpha > 0$ 是一个小数（如 $\\alpha = 1$），这样 $\\ln(\\hat{N})$ 就总有定义。这将有效强度移至 $\\lambda + \\alpha$，并以一个明确、可控的偏差为代价来正则化零点的奇点。或者，可以以 $X>0$ 为条件，并使用条件分布，将期望替换为 $\\mathbb{E}[\\cdot \\mid X>0]$，这可以消除奇点，但会同时修改均值和方差。\n\n重要的是，在所有此类正则化中，对于大的 $N V$，主导阶方差贡献仍然是 $\\sim 1/(N V)$，这正是推导出的表达式所捕获的项。当 $N_{A} V_{A}$ 或 $N_{D} V_{D}$ 不大时，该近似会失效，此时高阶项和零计数处理占主导地位，简单的平方根定律会低估真实的可变性，并且无法描述由 $\\hat{N}$ 可能接近零的实现所引入的重尾。",
            "answer": "$$\\boxed{\\frac{k T}{q}\\,\\sqrt{\\frac{1}{N_{A} V_{A}} + \\frac{1}{N_{D} V_{D}}}}$$"
        },
        {
            "introduction": "在掌握了基本原理之后，我们现在将对可变性的理解应用到最重要的现代器件——MOSFET上。本练习将研究随机掺杂涨落以及系统性的工艺梯度如何共同导致阈值电压的失配。你将分析共质心版图（一种关键的模拟电路设计技术）在减小这些波动方面的有效性，并学会区分系统性效应的消除和随机性效应的统计平均。",
            "id": "3769111",
            "problem": "考虑两个匹配的金属-氧化物-半导体场效应晶体管 (MOSFET)，器件$\\mathrm{A}$和器件$\\mathrm{B}$，每个都由$m=16$个相同的单元指状管（unit finger）复合而成，并以完美的共质心（common-centroid）模式排列在边长为$S=100\\,\\mu\\mathrm{m}$的方形版图内。每个单元指状管的宽度为$W_u=0.5\\,\\mu\\mathrm{m}$，长度为$L_u=0.06\\,\\mu\\mathrm{m}$。假设阈值电压存在一个确定性的线性空间梯度，沿着版图的$x$轴方向，其值为$\\mathrm{d}V_{TH}/\\mathrm{d}x=g=1\\,\\mathrm{mV}/\\mathrm{mm}$，并假设对称性使得器件$\\mathrm{A}$中单元指状管的平均$x$坐标等于器件$\\mathrm{B}$的。设位于位置$x_j$的单元指状管$j$的阈值电压模型为\n$$\nV_{TH,j} = V_0 + g\\,x_j + \\varepsilon_j,\n$$\n其中$V_0$是一个基准阈值电压，而$\\varepsilon_j$是由随机掺杂波动（Random Dopant Fluctuations, RDF）引起的零均值随机扰动，假设在所有单元指状管和所有器件间是独立同分布的。\n\n根据离散掺杂统计和静电学，已经公认RDF会导致阈值电压波动，其方差与有效器件面积成反比。对于一个单元指状管，假设受RDF限制的阈值方差遵循\n$$\n\\sigma_u^2 = \\frac{A_{VT}^2}{W_u L_u},\n$$\n其中$A_{VT}$是一个与工艺相关的常数（Pelgrom系数），它综合了阈值电压对离散掺杂数量波动的敏感度；对于该工艺，取$A_{VT}=3\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$作为一个实际值。您可以假设$\\varepsilon_j$在所有单元指状管之间是独立的，并且梯度在整个版图上是严格线性的。\n\n将每个器件的复合阈值电压定义为其$m$个单元指状管的算术平均值，\n$$\n\\overline{V}_{TH,\\mathrm{A}}=\\frac{1}{m}\\sum_{j\\in \\mathrm{A}} V_{TH,j},\\qquad \\overline{V}_{TH,\\mathrm{B}}=\\frac{1}{m}\\sum_{k\\in \\mathrm{B}} V_{TH,k},\n$$\n并将失配定义为$\\Delta V_{TH}=\\overline{V}_{TH,\\mathrm{A}}-\\overline{V}_{TH,\\mathrm{B}}$。\n\n从线性叠加、随机扰动的独立性、以及源于离散掺杂泊松统计和到栅极的静电耦合的、由RDF引起的阈值波动的面积缩放特性等基本属性出发，推导共质心布局如何影响由梯度驱动的失配和由RDF驱动的失配，并为给定参数量化残余失配方差$\\mathrm{Var}(\\Delta V_{TH})$。哪个选项是正确的？\n\nA. 在理想的共质心版图中，一阶线性梯度在失配中被抵消，而随机掺杂波动不受几何布局的影响；残余失配方差为$\\mathrm{Var}(\\Delta V_{TH})=\\dfrac{2A_{VT}^2}{m\\,W_u L_u}$，对于给定的数值，其计算结果为$37.5\\,\\mathrm{mV}^2$。\n\nB. 共质心布局同时抑制了线性和随机掺杂波动；残余失配方差的缩放关系为$\\dfrac{2A_{VT}^2}{m^2\\,W_u L_u}$，对于给定的数值，其计算结果为$2.34\\,\\mathrm{mV}^2$。\n\nC. 在共质心布局中线性梯度不会被抵消，因为单元指状管在空间上是分散的；残余失配主要由梯度决定，其方差的计算结果约为$0.05\\,\\mathrm{mV}^2$。\n\nD. 线性梯度被部分抵消，留下一个与质心间距成正比的残余量，而随机掺杂波动被平均掉了；残余失配方差为$\\dfrac{A_{VT}^2}{m\\,W_u L_u}$，对于给定的数值，其计算结果为$18.75\\,\\mathrm{mV}^2$。",
            "solution": "### 步骤1：提取已知条件\n- 匹配的MOSFET：器件A和器件B。\n- 每个器件的单元指状管数量：$m = 16$。\n- 版图类型：方形完美共质心布局。\n- 版图边长：$S=100\\,\\mu\\mathrm{m}$。\n- 单元指状管宽度：$W_u = 0.5\\,\\mu\\mathrm{m}$。\n- 单元指状管长度：$L_u = 0.06\\,\\mu\\mathrm{m}$。\n- 阈值电压的线性空间梯度：$\\mathrm{d}V_{TH}/\\mathrm{d}x = g = 1\\,\\mathrm{mV}/\\mathrm{mm}$。\n- 共质心对称条件：器件A中单元指状管的平均$x$坐标等于器件B的。设$\\bar{x}_\\mathrm{A}$和$\\bar{x}_\\mathrm{B}$为这些平均值；则$\\bar{x}_\\mathrm{A} = \\bar{x}_\\mathrm{B}$。\n- 单元指状管阈值电压模型：$V_{TH,j} = V_0 + g\\,x_j + \\varepsilon_j$。\n- $V_0$：基准阈值电压。\n- $\\varepsilon_j$：零均值随机扰动（RDF），独立同分布（i.i.d.）。\n- 一个单元指状管的RDF方差：$\\sigma_u^2 = \\frac{A_{VT}^2}{W_u L_u}$。\n- Pelgrom系数：$A_{VT} = 3\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$。\n- 复合阈值电压的定义：$\\overline{V}_{TH,\\mathrm{A}} = \\frac{1}{m}\\sum_{j\\in \\mathrm{A}} V_{TH,j}$ 和 $\\overline{V}_{TH,\\mathrm{B}} = \\frac{1}{m}\\sum_{k\\in \\mathrm{B}} V_{TH,k}$。\n- 失配的定义：$\\Delta V_{TH} = \\overline{V}_{TH,\\mathrm{A}} - \\overline{V}_{TH,\\mathrm{B}}$。\n- 任务是推导残余失配方差$\\mathrm{Var}(\\Delta V_{TH})$。\n\n### 步骤2：使用提取的已知条件进行验证\n问题陈述的评估如下：\n- **科学依据：** 该问题基于半导体器件物理和模拟集成电路设计的既定原则。失配的来源（系统性梯度和随机掺杂波动）、用于RDF方差缩放的Pelgrom模型（$\\sigma_{V_{TH}}^2 \\propto 1/(WL)$）以及使用共质心版图消除梯度，这些都是该领域的标准和基本概念。所提供的物理参数（$A_{VT}$、器件尺寸、梯度大小）是符合实际的。\n- **定义明确：** 计算失配方差所需的所有信息、模型和参数都已提供。问题具体，并且基于所提供的模型有一个唯一的、可推导的答案。\n- **客观性：** 问题以精确、定量和客观的语言陈述，没有歧义或主观成分。\n\n### 步骤3：结论与行动\n该问题是有效的。现在开始解题过程。\n\n### 失配方差的推导\n\n器件A的复合阈值电压定义为其$m$个单元指状管的算术平均值：\n$$\n\\overline{V}_{TH,\\mathrm{A}} = \\frac{1}{m}\\sum_{j\\in \\mathrm{A}} V_{TH,j}\n$$\n代入$V_{TH,j}$的模型：\n$$\n\\overline{V}_{TH,\\mathrm{A}} = \\frac{1}{m}\\sum_{j\\in \\mathrm{A}} (V_0 + g\\,x_j + \\varepsilon_j) = \\frac{1}{m} (m V_0) + g \\left(\\frac{1}{m}\\sum_{j\\in \\mathrm{A}} x_j\\right) + \\frac{1}{m}\\sum_{j\\in \\mathrm{A}} \\varepsilon_j\n$$\n设$\\bar{x}_\\mathrm{A} = \\frac{1}{m}\\sum_{j\\in \\mathrm{A}} x_j$为器件A的质心（平均$x$坐标），并设$\\bar{\\varepsilon}_\\mathrm{A} = \\frac{1}{m}\\sum_{j\\in \\mathrm{A}} \\varepsilon_j$为器件A的平均随机扰动。表达式简化为：\n$$\n\\overline{V}_{TH,\\mathrm{A}} = V_0 + g\\,\\bar{x}_\\mathrm{A} + \\bar{\\varepsilon}_\\mathrm{A}\n$$\n同理，对于器件B：\n$$\n\\overline{V}_{TH,\\mathrm{B}} = V_0 + g\\,\\bar{x}_\\mathrm{B} + \\bar{\\varepsilon}_\\mathrm{B}\n$$\n失配$\\Delta V_{TH}$是这两个复合电压之差：\n$$\n\\Delta V_{TH} = \\overline{V}_{TH,\\mathrm{A}} - \\overline{V}_{TH,\\mathrm{B}} = (V_0 + g\\,\\bar{x}_\\mathrm{A} + \\bar{\\varepsilon}_\\mathrm{A}) - (V_0 + g\\,\\bar{x}_\\mathrm{B} + \\bar{\\varepsilon}_\\mathrm{B})\n$$\n$$\n\\Delta V_{TH} = g(\\bar{x}_\\mathrm{A} - \\bar{x}_\\mathrm{B}) + (\\bar{\\varepsilon}_\\mathrm{A} - \\bar{\\varepsilon}_\\mathrm{B})\n$$\n该表达式将失配分为两个部分：一个是由梯度引起的系统性分量$g(\\bar{x}_\\mathrm{A} - \\bar{x}_\\mathrm{B})$，另一个是由RDF引起的随机分量$\\bar{\\varepsilon}_\\mathrm{A} - \\bar{\\varepsilon}_\\mathrm{B}$。\n\n问题陈述中指出，这些器件以“完美的共质心模式”排列，并且“器件A中单元指状管的平均$x$坐标等于器件B的”。这明确意味着$\\bar{x}_\\mathrm{A} = \\bar{x}_\\mathrm{B}$。因此，失配的系统性分量为零：\n$$\ng(\\bar{x}_\\mathrm{A} - \\bar{x}_\\mathrm{B}) = 0\n$$\n这证明了共质心版图的基本原理：它们可以抵消器件间失配中的一阶线性梯度。\n\n因此，残余失配纯粹是由随机波动引起的：\n$$\n\\Delta V_{TH} = \\bar{\\varepsilon}_\\mathrm{A} - \\bar{\\varepsilon}_\\mathrm{B}\n$$\n我们需要求这个失配的方差$\\mathrm{Var}(\\Delta V_{TH})$。随机扰动$\\varepsilon_j$在所有单元指状管之间是独立同分布的，无论它们属于器件A还是器件B。因此，平均扰动$\\bar{\\varepsilon}_\\mathrm{A}$和$\\bar{\\varepsilon}_\\mathrm{B}$是独立的随机变量。对于两个独立的随机变量，它们差的方差等于它们方差的和：\n$$\n\\mathrm{Var}(\\Delta V_{TH}) = \\mathrm{Var}(\\bar{\\varepsilon}_\\mathrm{A} - \\bar{\\varepsilon}_\\mathrm{B}) = \\mathrm{Var}(\\bar{\\varepsilon}_\\mathrm{A}) + \\mathrm{Var}(\\bar{\\varepsilon}_\\mathrm{B})\n$$\n现在，我们来求单个器件（比如A）的平均扰动的方差。由于器件A的$\\varepsilon_j$是独立同分布的，每个的方差都是$\\sigma_u^2$：\n$$\n\\mathrm{Var}(\\bar{\\varepsilon}_\\mathrm{A}) = \\mathrm{Var}\\left(\\frac{1}{m}\\sum_{j\\in \\mathrm{A}} \\varepsilon_j\\right) = \\frac{1}{m^2} \\mathrm{Var}\\left(\\sum_{j\\in \\mathrm{A}} \\varepsilon_j\\right) = \\frac{1}{m^2} \\sum_{j\\in \\mathrm{A}} \\mathrm{Var}(\\varepsilon_j) = \\frac{1}{m^2} (m \\sigma_u^2) = \\frac{\\sigma_u^2}{m}\n$$\n根据对称性，器件B的方差是相同的：$\\mathrm{Var}(\\bar{\\varepsilon}_\\mathrm{B}) = \\frac{\\sigma_u^2}{m}$。\n将这些代入总失配方差的表达式中：\n$$\n\\mathrm{Var}(\\Delta V_{TH}) = \\frac{\\sigma_u^2}{m} + \\frac{\\sigma_u^2}{m} = \\frac{2\\sigma_u^2}{m}\n$$\n最后，我们代入给定的单元指状管方差的Pelgrom模型表达式$\\sigma_u^2 = \\frac{A_{VT}^2}{W_u L_u}$：\n$$\n\\mathrm{Var}(\\Delta V_{TH}) = \\frac{2}{m} \\left( \\frac{A_{VT}^2}{W_u L_u} \\right) = \\frac{2A_{VT}^2}{m W_u L_u}\n$$\n\n### 数值计算\n给定：\n- $A_{VT} = 3\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$\n- $m = 16$\n- $W_u = 0.5\\,\\mu\\mathrm{m}$\n- $L_u = 0.06\\,\\mu\\mathrm{m}$\n\n首先，计算单元指状管的面积：\n$$\nW_u L_u = (0.5\\,\\mu\\mathrm{m})(0.06\\,\\mu\\mathrm{m}) = 0.03\\,\\mu\\mathrm{m}^2\n$$\n接下来，计算Pelgrom系数的平方：\n$$\nA_{VT}^2 = (3\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m})^2 = 9\\,\\mathrm{mV}^2\\cdot\\mu\\mathrm{m}^2\n$$\n现在，将数值代入推导出的失配方差公式中：\n$$\n\\mathrm{Var}(\\Delta V_{TH}) = \\frac{2 \\times (9\\,\\mathrm{mV}^2\\cdot\\mu\\mathrm{m}^2)}{16 \\times (0.03\\,\\mu\\mathrm{m}^2)} = \\frac{18}{0.48}\\,\\mathrm{mV}^2\n$$\n$$\n\\mathrm{Var}(\\Delta V_{TH}) = \\frac{1800}{48}\\,\\mathrm{mV}^2 = \\frac{300}{8}\\,\\mathrm{mV}^2 = \\frac{75}{2}\\,\\mathrm{mV}^2 = 37.5\\,\\mathrm{mV}^2\n$$\n\n### 逐项分析选项\n\n**A. 在理想的共质心版图中，一阶线性梯度在失配中被抵消，而随机掺杂波动不受几何布局的影响；残余失配方差为$\\mathrm{Var}(\\Delta V_{TH})=\\dfrac{2A_{VT}^2}{m\\,W_u L_u}$，对于给定的数值，其计算结果为$37.5\\,\\mathrm{mV}^2$。**\n- **分析：** 此陈述准确地反映了推导过程。共质心版图完美地抵消了线性梯度项。“随机掺杂波动不受几何布局的影响”这句话在上下文中是正确的，意味着共质心布局不像对系统性梯度那样，对空间不相关的随机分量提供任何特殊的抵消作用。RDF分量的方差只是通过对$m$个指状管进行统计平均而减小。公式$\\mathrm{Var}(\\Delta V_{TH})=\\dfrac{2A_{VT}^2}{m\\,W_u L_u}$是正确的。计算结果$37.5\\,\\mathrm{mV}^2$也是正确的。\n- **结论：** **正确**。\n\n**B. 共质心布局同时抑制了线性和随机掺杂波动；残余失配方差的缩放关系为$\\dfrac{2A_{VT}^2}{m^2\\,W_u L_u}$，对于给定的数值，其计算结果为$2.34\\,\\mathrm{mV}^2$。**\n- **分析：** 该选项给出了一个错误的失配方差公式。$m$个独立同分布变量的均值的方差与$1/m$成比例，而不是$1/m^2$。推导出的公式是$\\frac{2A_{VT}^2}{m W_u L_u}$。分母中的$m^2$因子是错误的。\n- **结论：** **错误**。\n\n**C. 在共质心布局中线性梯度不会被抵消，因为单元指状管在空间上是分散的；残余失配主要由梯度决定，其方差的计算结果约为$0.05\\,\\mathrm{mV}^2$。**\n- **分析：** 该陈述从根本上误解了共质心版图的目的和效果。其主要功能恰恰是通过确保匹配器件的质心重合来抵消线性（以及其他低阶）梯度。问题陈述保证了这一条件。此外，系统性梯度对失配贡献的是一个确定性的偏移，而不是方差。该选项错误地混淆了这些概念。\n- **结论：** **错误**。\n\n**D. 线性梯度被部分抵消，留下一个与质心间距成正比的残余量，而随机掺杂波动被平均掉了；残余失配方差为$\\dfrac{A_{VT}^2}{m\\,W_u L_u}$，对于给定的数值，其计算结果为$18.75\\,\\mathrm{mV}^2$。**\n- **分析：** 该选项错误地陈述了对于所描述的完美版图，梯度仅“部分抵消”。更重要的是，它给出了错误的失配方差公式。表达式$\\dfrac{A_{VT}^2}{m\\,W_u L_u}$代表的是单个器件复合阈值电压的方差，即$\\mathrm{Var}(\\overline{V}_{TH,\\mathrm{A}})$，而不是两个器件之间差值的方差，即$\\mathrm{Var}(\\overline{V}_{TH,\\mathrm{A}} - \\overline{V}_{TH,\\mathrm{B}})$。差值的方差是各自方差的和，因此需要一个因子2。\n- **结论：** **错误**。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "建模可变性的最终目标是实现稳健的电路设计。最后一个练习将我们的视角从单个器件提升到完整电路，解决一个真实的优化设计问题。利用成熟的Pelgrom定律，你将在固定的总面积预算下，确定晶体管面积的最优分配，以最小化电路的总输出失调方差。这个练习具体展示了统计器件物理学如何直接指导系统级的工程决策。",
            "id": "3769078",
            "problem": "一个多级金属-氧化物-半导体（MOS）放大器主要受到随机掺杂波动引起的阈值电压变化的影响。考虑一组由 $i\\in\\{1,2,3,4,5\\}$ 索引的 $N=5$ 个晶体管，其阈值电压扰动根据 Pelgrom 失配定律独立同分布。令 $a_i=W_i L_i$ 表示分配给晶体管 $i$ 的器件面积。每个器件的阈值失配标准差遵循 Pelgrom 定律，$\\sigma_{\\Delta V_{T,i}}=A_{VT}/\\sqrt{a_i}$，其中 Pelgrom 面积系数为 $A_{VT}=3.0\\,\\mathrm{mV}\\cdot\\mu\\mathrm{m}$。电路输出参考失调 $y$ 相对于阈值扰动的一阶线性化结果为 $y\\approx\\sum_{i=1}^{5}s_i\\,\\Delta V_{T,i}$，其中给定的小信号灵敏度为 $s_1=1.5$、$s_2=1.5$、$s_3=0.5$、$s_4=1.0$ 和 $s_5=1.0$（无量纲）。假设 $\\Delta V_{T,i}$ 是独立的零均值高斯随机变量。\n\n你的任务是在固定的总面积预算下，分配面积 $\\{a_i\\}_{i=1}^{5}$ 以最小化输出失调方差。可用总面积为 $A_{\\mathrm{tot}}=110\\,\\mu\\mathrm{m}^2$，并且你必须满足 $\\sum_{i=1}^{5}a_i=A_{\\mathrm{tot}}$ 和对所有 $i$ 都有 $a_i>0$。从以下基本事实出发：(i) Pelgrom 定律将失配方差与面积成反比地联系起来；(ii) 对于独立的零均值扰动，输出方差等于灵敏度加权的输入方差之和，请执行以下操作：\n\n- 用变量 $a_i$ 和给定的常数，构建最小化输出方差的优化问题。\n- 在可行域 $\\{a_i>0,\\sum a_i=A_{\\mathrm{tot}}\\}$ 内，确定目标函数的凸性。\n- 使用第一性原理（例如，拉格朗日乘数法或卡罗需-库恩-塔克条件）求解该优化问题，以获得关于给定参数的最优解 $a_i^{\\star}$ 的闭式解。\n- 使用所提供的数据，计算 $a_i^{\\star}$ 的最优数值。\n\n以单位为 $\\mu\\mathrm{m}^2$ 的单行向量 $\\bigl[a_1^{\\star},\\,a_2^{\\star},\\,a_3^{\\star},\\,a_4^{\\star},\\,a_5^{\\star}\\bigr]$ 报告你的最终答案。将每个条目四舍五入到三位有效数字。在最终的方框向量中不要包含单位；按此处的指示，以 $\\mu\\mathrm{m}^2$ 为单位表示条目。",
            "solution": "该问题要求找到器件面积 $\\{a_i\\}_{i=1}^{5}$ 的最优分配，以在总面积约束下最小化多级 MOS 放大器的输出失调方差。分析过程将首先构建优化问题，然后确定其凸性，接着使用拉格朗日乘数法求解，最后计算数值解。\n\n**1. 优化问题的构建**\n\n输出参考失调 $y$ 由阈值电压扰动 $\\Delta V_{T,i}$ 的线性组合给出：\n$$y \\approx \\sum_{i=1}^{N} s_i \\Delta V_{T,i}$$\n其中 $N=5$ 是晶体管的数量，$s_i$ 是各自的灵敏度。问题陈述了扰动 $\\Delta V_{T,i}$ 是独立的零均值高斯随机变量。输出失调的方差 $\\sigma_y^2$ 由下式给出：\n$$\\sigma_y^2 = \\mathrm{Var}(y) = \\mathrm{Var}\\left(\\sum_{i=1}^{N} s_i \\Delta V_{T,i}\\right)$$\n由于变量 $\\Delta V_{T,i}$ 的独立性，和的方差等于方差的和：\n$$\\sigma_y^2 = \\sum_{i=1}^{N} \\mathrm{Var}(s_i \\Delta V_{T,i})$$\n使用方差属性 $\\mathrm{Var}(c X) = c^2 \\mathrm{Var}(X)$（其中 $c$ 是常数），我们有：\n$$\\sigma_y^2 = \\sum_{i=1}^{N} s_i^2 \\mathrm{Var}(\\Delta V_{T,i})$$\n器件 $i$ 的阈值电压扰动的方差 $\\mathrm{Var}(\\Delta V_{T,i})$ 是其标准差的平方，即 $\\sigma_{\\Delta V_{T,i}}^2$。Pelgrom 定律给出的标准差为 $\\sigma_{\\Delta V_{T,i}} = A_{VT} / \\sqrt{a_i}$，其中 $a_i$ 是器件面积，$A_{VT}$ 是 Pelgrom 面积系数。因此，方差为：\n$$\\mathrm{Var}(\\Delta V_{T,i}) = \\sigma_{\\Delta V_{T,i}}^2 = \\left(\\frac{A_{VT}}{\\sqrt{a_i}}\\right)^2 = \\frac{A_{VT}^2}{a_i}$$\n将此表达式代回 $\\sigma_y^2$ 的方程中，我们得到要最小化的目标函数：\n$$\\sigma_y^2(a_1, \\dots, a_N) = \\sum_{i=1}^{N} s_i^2 \\frac{A_{VT}^2}{a_i} = A_{VT}^2 \\sum_{i=1}^{N} \\frac{s_i^2}{a_i}$$\n由于 $A_{VT}$ 是给定的正常数，最小化 $\\sigma_y^2$ 等价于最小化函数 $F(a_1, \\dots, a_N)$：\n$$F(a_1, \\dots, a_N) = \\sum_{i=1}^{N} \\frac{s_i^2}{a_i}$$\n该最小化受制于器件面积的约束：\n1.  总面积约束：$\\sum_{i=1}^{N} a_i = A_{\\mathrm{tot}}$\n2.  正值约束：对于所有 $i \\in \\{1, \\dots, N\\}$，$a_i > 0$\n\n完整的优化问题是：\n$$\\text{最小化} \\quad F(\\mathbf{a}) = \\sum_{i=1}^{N} \\frac{s_i^2}{a_i}$$\n$$\\text{约束条件为} \\quad \\sum_{i=1}^{N} a_i = A_{\\mathrm{tot}} \\quad \\text{且} \\quad a_i > 0 \\quad \\forall i$$\n\n**2. 问题的凸性**\n\n为证明这是一个凸优化问题，我们必须证明目标函数和可行集都是凸的。\n可行集由约束条件定义。约束 $\\sum_{i=1}^{N} a_i = A_{\\mathrm{tot}}$ 在 $\\mathbb{R}^N$ 中定义了一个仿射超平面。约束 $a_i > 0$ 定义了一个开凸集（正象限）。仿射集和凸集的交集是凸的。因此，可行域是一个凸集。\n\n目标函数为 $F(\\mathbf{a}) = \\sum_{i=1}^{N} f_i(a_i)$，其中 $f_i(a_i) = s_i^2/a_i$。如果一个函数的二阶导数非负，则该函数是凸函数。对于每一项 $f_i(a_i)$：\n$$\\frac{d f_i}{d a_i} = -\\frac{s_i^2}{a_i^2}$$\n$$\\frac{d^2 f_i}{d a_i^2} = \\frac{2 s_i^2}{a_i^3}$$\n在可行域中，$a_i > 0$。由于 $s_i^2 \\ge 0$，二阶导数 $\\frac{d^2 f_i}{d a_i^2}$ 对所有 $i$ 都是非负的。因此，每个函数 $f_i(a_i)$ 在定义域 $a_i > 0$ 上都是凸的。凸函数的和也是凸的，所以目标函数 $F(\\mathbf{a})$ 是凸的。\n\n由于我们是在一个凸集上最小化一个凸函数，因此找到的任何局部最小值都是全局最小值。\n\n**3. 求解优化问题**\n\n我们使用拉格朗日乘数法来解决这个约束优化问题。通过组合目标函数和等式约束，构建拉格朗日函数 $\\mathcal{L}$：\n$$\\mathcal{L}(\\mathbf{a}, \\lambda) = F(\\mathbf{a}) - \\lambda \\left(\\sum_{i=1}^{N} a_i - A_{\\mathrm{tot}}\\right) = \\sum_{i=1}^{N} \\frac{s_i^2}{a_i} - \\lambda \\left(\\sum_{i=1}^{N} a_i - A_{\\mathrm{tot}}\\right)$$\n最优解必须满足卡罗需-库恩-塔克（KKT）条件。我们通过将拉格朗日函数相对于 $\\mathbf{a}$ 和 $\\lambda$ 的梯度设为零来找到驻点。对于每个 $j \\in \\{1, \\dots, N\\}$：\n$$\\frac{\\partial \\mathcal{L}}{\\partial a_j} = -\\frac{s_j^2}{a_j^2} - \\lambda = 0$$\n这意味着：\n$$-\\frac{s_j^2}{a_j^2} = \\lambda \\implies a_j^2 = -\\frac{s_j^2}{\\lambda}$$\n由于 $a_j > 0$ 且 $s_j^2 \\ge 0$，我们必须有 $\\lambda  0$。我们可以解出 $a_j$：\n$$a_j = \\sqrt{-\\frac{s_j^2}{\\lambda}} = \\frac{|s_j|}{\\sqrt{-\\lambda}}$$\n给定的灵敏度 $s_j$ 是正的，所以 $|s_j| = s_j$。\n$$a_j = \\frac{s_j}{\\sqrt{-\\lambda}}$$\n现在我们使用总面积约束 $\\sum_{j=1}^{N} a_j = A_{\\mathrm{tot}}$ 来求出拉格朗日乘数 $\\lambda$ 的值：\n$$\\sum_{j=1}^{N} \\frac{s_j}{\\sqrt{-\\lambda}} = A_{\\mathrm{tot}}$$\n将含有 $\\lambda$ 的项因子分解出来：\n$$\\frac{1}{\\sqrt{-\\lambda}} \\sum_{j=1}^{N} s_j = A_{\\mathrm{tot}}$$\n$$\\frac{1}{\\sqrt{-\\lambda}} = \\frac{A_{\\mathrm{tot}}}{\\sum_{k=1}^{N} s_k}$$\n将此表达式代回 $a_j$ 的方程中：\n$$a_j^{\\star} = s_j \\left(\\frac{1}{\\sqrt{-\\lambda}}\\right) = s_j \\frac{A_{\\mathrm{tot}}}{\\sum_{k=1}^{N} s_k}$$\n这个表达式给出了每个晶体管的最优面积分配 $a_j^{\\star}$。这个结果表明，总面积 $A_{\\mathrm{tot}}$ 应根据晶体管的灵敏度 $s_j$ 按正比分配。由于所有的 $s_j > 0$ 且 $A_{\\mathrm{tot}} > 0$，条件 $a_j^{\\star} > 0$ 得以满足。\n\n**4. 数值计算**\n\n我们现在将给定的数值代入推导出的公式中。\n晶体管数量为 $N=5$。\n总面积为 $A_{\\mathrm{tot}} = 110\\,\\mu\\mathrm{m}^2$。\n灵敏度为 $s_1=1.5$、$s_2=1.5$、$s_3=0.5$、$s_4=1.0$ 和 $s_5=1.0$。\n\n首先，我们计算灵敏度之和：\n$$\\sum_{k=1}^{5} s_k = 1.5 + 1.5 + 0.5 + 1.0 + 1.0 = 5.5$$\n现在我们可以计算每个晶体管的最优面积：\n$$a_1^{\\star} = A_{\\mathrm{tot}} \\frac{s_1}{\\sum s_k} = 110\\,\\mu\\mathrm{m}^2 \\times \\frac{1.5}{5.5} = 110 \\times \\frac{3}{11}\\,\\mu\\mathrm{m}^2 = 30\\,\\mu\\mathrm{m}^2$$\n$$a_2^{\\star} = A_{\\mathrm{tot}} \\frac{s_2}{\\sum s_k} = 110\\,\\mu\\mathrm{m}^2 \\times \\frac{1.5}{5.5} = 110 \\times \\frac{3}{11}\\,\\mu\\mathrm{m}^2 = 30\\,\\mu\\mathrm{m}^2$$\n$$a_3^{\\star} = A_{\\mathrm{tot}} \\frac{s_3}{\\sum s_k} = 110\\,\\mu\\mathrm{m}^2 \\times \\frac{0.5}{5.5} = 110 \\times \\frac{1}{11}\\,\\mu\\mathrm{m}^2 = 10\\,\\mu\\mathrm{m}^2$$\n$$a_4^{\\star} = A_{\\mathrm{tot}} \\frac{s_4}{\\sum s_k} = 110\\,\\mu\\mathrm{m}^2 \\times \\frac{1.0}{5.5} = 110 \\times \\frac{2}{11}\\,\\mu\\mathrm{m}^2 = 20\\,\\mu\\mathrm{m}^2$$\n$$a_5^{\\star} = A_{\\mathrm{tot}} \\frac{s_5}{\\sum s_k} = 110\\,\\mu\\mathrm{m}^2 \\times \\frac{1.0}{5.5} = 110 \\times \\frac{2}{11}\\,\\mu\\mathrm{m}^2 = 20\\,\\mu\\mathrm{m}^2$$\n问题要求四舍五入到三位有效数字。计算出的整数值可以写作带有一位小数的形式以满足此要求。\n最优面积为：\n$a_1^{\\star} = 30.0\\,\\mu\\mathrm{m}^2$\n$a_2^{\\star} = 30.0\\,\\mu\\mathrm{m}^2$\n$a_3^{\\star} = 10.0\\,\\mu\\mathrm{m}^2$\n$a_4^{\\star} = 20.0\\,\\mu\\mathrm{m}^2$\n$a_5^{\\star} = 20.0\\,\\mu\\mathrm{m}^2$\n\n最终答案是这些值的行向量。",
            "answer": "$$\\boxed{\\begin{pmatrix} 30.0  30.0  10.0  20.0  20.0 \\end{pmatrix}}$$"
        }
    ]
}
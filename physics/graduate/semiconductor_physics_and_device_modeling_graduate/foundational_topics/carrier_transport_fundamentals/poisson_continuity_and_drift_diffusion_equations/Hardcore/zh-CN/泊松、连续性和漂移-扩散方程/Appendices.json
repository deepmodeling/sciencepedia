{
    "hands_on_practices": [
        {
            "introduction": "在分析由偏压驱动的载流子输运之前，我们必须首先理解系统的起点：热平衡状态。本练习将从泊松方程出发，巩固电荷中性这一基本概念，并利用它来确定费米能级$E_F$的位置，它决定了静止状态下载流子的浓度。这是所有半导体器件物理学分析的必要基准。",
            "id": "3765668",
            "problem": "一个空间均匀、无限延伸、处于热平衡状态的补偿半导体，包含浓度为 $N_D$ 的施主和浓度为 $N_A$ 的受主，两者都足够浅，以至于在温度 $T$ 下完全电离。假设为非简并统计（麦克斯韦-玻尔兹曼分布），且材料参数使得本征载流子浓度 $n_i$ 有明确定义。静电学由泊松方程决定：$$\\nabla \\cdot \\left( \\varepsilon \\nabla \\varphi \\right) = -\\rho,$$ 载流子输运由漂移-扩散模型描述，其中电子和空穴的电流密度为：$$\\mathbf{J}_n = q \\mu_n n \\mathbf{E} + q D_n \\nabla n, \\qquad \\mathbf{J}_p = q \\mu_p p \\mathbf{E} - q D_p \\nabla p,$$ 连续性方程为：$$\\frac{\\partial n}{\\partial t} + \\frac{1}{q} \\nabla \\cdot \\mathbf{J}_n = G_n - R_n, \\qquad \\frac{\\partial p}{\\partial t} + \\frac{1}{q} \\nabla \\cdot \\mathbf{J}_p = G_p - R_p,$$ 其中 $q$ 是元电荷，$\\varepsilon$ 是介电常数，$\\varphi$ 是静电势，$\\mathbf{E} = -\\nabla \\varphi$ 是电场，$\\mu_n$ 和 $\\mu_p$ 是迁移率，$D_n$ 和 $D_p$ 是扩散系数，$G_n$、$G_p$、$R_n$、$R_p$ 是产生率和复合率。在平衡状态下，所有瞬态过程均消失，净电流为零。利用这些事实以及非简并半导体中本征能级 $E_i$ 的标准定义，完成以下任务：\n\n- 推导平衡电中性条件，该条件关联了电子浓度 $n$、空穴浓度 $p$ 以及电离施主 $N_D$ 和受主 $N_A$。\n- 然后，从与麦克斯韦-玻尔兹曼分布一致的载流子统计第一性原理出发，求解费米能级相对于本征能级的位置 $E_F - E_i$，用 $N_D$、$N_A$、$n_i$、玻尔兹曼常数 $k_B$ 和温度 $T$ 表示。\n\n将最终的能量差 $E_F - E_i$ 以焦耳为单位，表示为单个闭式解析表达式。无需进行数值计算。",
            "solution": "问题陈述内部一致，科学上基于已建立的半导体物理理论，并且是适定的。所有提供的信息和方程都是漂移-扩散模型中的标准表示。热平衡和空间均匀性的条件足以确定费米能级的唯一、具有物理意义的解。我们开始推导。\n\n第一个任务是推导平衡电中性条件。我们从泊松方程开始，其形式为：\n$$ \\nabla \\cdot \\left( \\varepsilon \\nabla \\varphi \\right) = -\\rho $$\n其中 $\\rho$ 是总空间电荷密度。在半导体中，此电荷密度是来自可动电子、可动空穴、电离施主原子和电离受主原子的贡献之和。电子的电荷为 $-q$，空穴的电荷为 $+q$。电离施主贡献正电荷 $+q$，而电离受主贡献负电荷 $-q$。因此，总电荷密度为：\n$$ \\rho = q(p - n + N_D^+ - N_A^-) $$\n其中 $n$ 和 $p$ 分别是电子和空穴的浓度，$N_D^+$ 和 $N_A^-$ 分别是电离施主和受主的浓度。问题陈述指出，在温度 $T$ 下，掺杂物是浅能级的并且完全电离。这意味着 $N_D^+ = N_D$ 且 $N_A^- = N_A$。电荷密度表达式简化为：\n$$ \\rho = q(p - n + N_D - N_A) $$\n问题指明了半导体是“空间均匀”和“无限延伸”且处于热平衡状态。在体块、均匀的材料中，不可能存在净内部电场，因此 $\\mathbf{E} = 0$。如果存在电场，它将驱动电流，这违反了净电流为零（$\\mathbf{J}_n = \\mathbf{J}_p = 0$）的平衡条件。由于电场是静电势的负梯度，$\\mathbf{E} = -\\nabla\\varphi$，因此条件 $\\mathbf{E}=0$ 意味着 $\\nabla\\varphi=0$。将此代入泊松方程得出：\n$$ \\nabla \\cdot (\\varepsilon \\cdot 0) = 0 = -\\rho $$\n这直接导出了净空间电荷密度必须为零的结论，即 $\\rho=0$。因此，电中性条件为：\n$$ q(p - n + N_D - N_A) = 0 $$\n或者，更简单地，\n$$ p - n + N_D - N_A = 0 $$\n这可以重排为常用的形式：\n$$ n - p = N_D - N_A $$\n此方程表示均匀掺杂且完全电离的半导体的电中性条件。\n\n第二个任务是求解费米能级相对于本征能级的位置 $E_F - E_i$。我们从在给定的非简并（麦克斯韦-玻尔兹曼）统计假设下载流子浓度 $n$ 和 $p$ 的表达式开始。用本征能级 $E_i$ 和本征浓度 $n_i$ 表示，它们是：\n$$ n = n_i \\exp\\left(\\frac{E_F - E_i}{k_B T}\\right) $$\n$$ p = n_i \\exp\\left(-\\frac{E_F - E_i}{k_B T}\\right) $$\n这些关系式是从基本统计定义 $n = N_C \\exp(-(E_C-E_F)/(k_B T))$ 和 $p = N_V \\exp(-(E_F-E_V)/(k_B T))$，结合本征能级 $E_i$ 和本征浓度 $n_i$（此时 $n=p=n_i$）的定义推导出来的。\n\n现在我们将 $n$ 和 $p$ 的这些表达式代入电中性条件 $n - p = N_D - N_A$ 中：\n$$ n_i \\exp\\left(\\frac{E_F - E_i}{k_B T}\\right) - n_i \\exp\\left(-\\frac{E_F - E_i}{k_B T}\\right) = N_D - N_A $$\n从左侧提取公因子 $n_i$：\n$$ n_i \\left[ \\exp\\left(\\frac{E_F - E_i}{k_B T}\\right) - \\exp\\left(-\\frac{E_F - E_i}{k_B T}\\right) \\right] = N_D - N_A $$\n我们识别出方括号中的表达式与双曲正弦函数有关，其定义为 $\\sinh(x) = \\frac{\\exp(x) - \\exp(-x)}{2}$。令自变量为 $u = \\frac{E_F - E_i}{k_B T}$。通过在左侧同乘和同除以 $2$，方程可以重写为：\n$$ 2n_i \\left[ \\frac{\\exp(u) - \\exp(-u)}{2} \\right] = N_D - N_A $$\n$$ 2n_i \\sinh\\left(\\frac{E_F - E_i}{k_B T}\\right) = N_D - N_A $$\n为了解出 $E_F - E_i$，我们首先分离出双曲正弦项：\n$$ \\sinh\\left(\\frac{E_F - E_i}{k_B T}\\right) = \\frac{N_D - N_A}{2n_i} $$\n接下来，我们对等式两边应用反双曲正弦函数 $\\text{arcsinh}$ 来求解自变量：\n$$ \\frac{E_F - E_i}{k_B T} = \\text{arcsinh}\\left(\\frac{N_D - N_A}{2n_i}\\right) $$\n最后，乘以 $k_B T$ 得到费米能级相对于本征能级位置的所需表达式：\n$$ E_F - E_i = k_B T \\text{arcsinh}\\left(\\frac{N_D - N_A}{2n_i}\\right) $$\n这是用指定参数表示的能量差的最终闭式解析表达式。结果的能量单位为焦耳（国际单位制）。",
            "answer": "$$ \\boxed{k_B T \\arcsinh\\left(\\frac{N_D - N_A}{2n_i}\\right)} $$"
        },
        {
            "introduction": "建立了平衡态的概念后，下一步是理解当载流子浓度不均匀时它们如何移动。本练习通过设定电场为零，巧妙地将漂移-扩散模型中的扩散部分分离出来。通过计算一个纯粹由载流子浓度梯度驱动的扩散电流$J_n$，您将对应用于带电载流子的菲克第一定律及其在稳态连续性方程中的作用有更具体的把握。",
            "id": "3765653",
            "problem": "考虑一个长度为 $L$ 的一维准中性半导体板，处于热平衡温度 $T$ 下，其内建电场可忽略不计，因此电场 $\\mathbf{E}$ 满足 $\\mathbf{E}=\\mathbf{0}$。该半导体板在 $x=0$ 和 $x=L$ 处接触，使得电子数密度 $n(x)$ 在边界处维持在 $n(0)=n_{0}$ 和 $n(L)=n_{L}$。假设接触点之间的电子密度分布随 $x$ 呈线性变化，并且板内的复合和产生过程可以忽略。设电子扩散系数在空间上是均匀的，其值为 $D_{n}$。你可以将该材料视为非简并的，并且其输运过程可由无漂移情况下的热驱动扩散来描述。\n\n指定以下参数值：\n- 板长 $L=10\\,\\mu\\text{m}$，\n- 边界密度 $n(0)=n_{0}=1.000\\times 10^{16}\\,\\text{cm}^{-3}$ 和 $n(L)=n_{L}=9.999\\times 10^{15}\\,\\text{cm}^{-3}$，\n- 电子扩散系数 $D_{n}=35\\,\\text{cm}^{2}\\,\\text{s}^{-1}$，\n- 基本电荷 $q=1.602176634\\times 10^{-19}\\,\\text{C}$。\n\n从粒子数守恒和无电场情况下的热驱动扩散的物理机制出发，推导该一维系统的电子扩散电流密度 $J_{n}(x)$ 的表达式，并结合复合可忽略时的稳态连续性要求，确定恒定的稳态扩散电流密度。作为最终答案，报告以 $\\text{A}\\,\\text{cm}^{-2}$ 为单位的稳态扩散电流密度值。将你的答案四舍五入到四位有效数字。",
            "solution": "我们首先回顾半导体中电荷和粒子输运的相关基本定律。电子的粒子数守恒通过连续性方程表示\n$$\n\\frac{\\partial n}{\\partial t} + \\frac{1}{q}\\frac{\\partial J_{n}}{\\partial x} = G - R,\n$$\n其中 $n$ 是电子数密度，$J_{n}$ 是电子电流密度，$G$ 是产生率，$R$ 是复合率。在所述条件下，板内的复合和产生可忽略不计，因此我们设 $G=0$ 且 $R\\approx 0$。在稳态下，$\\partial n/\\partial t=0$，因此连续性方程简化为\n$$\n\\frac{\\partial J_{n}}{\\partial x}=0,\n$$\n这意味着 $J_{n}$ 在整个板内是空间上恒定的。\n\n接下来，我们推导无漂移情况下对电子电流密度的扩散贡献。在具有数密度梯度 $\\nabla n$ 的热介质中，由扩散引起的电子粒子通量遵循菲克定律 (Fick’s law)，\n$$\n\\Gamma_{n} = - D_{n} \\nabla n,\n$$\n其中 $\\Gamma_{n}$ 是电子粒子通量（单位面积单位时间内的数量），$D_{n}$ 是电子扩散系数。与电子运动相关的电流密度由电子的粒子通量 $\\Gamma_{n}$ 乘以其电荷 $(-q)$ 给出，即 $J_{n}=-q\\,\\Gamma_{n}$。将扩散通量代入此关系式可得\n$$\nJ_{n} = -q\\,(-D_{n}\\nabla n) = q D_{n}\\nabla n.\n$$\n在一维情况下，$\\nabla n \\to \\frac{d n}{dx}$，因此电子扩散电流密度为\n$$\nJ_{n}(x) = q D_{n}\\frac{d n}{d x}.\n$$\n\n题目告知我们，接触点之间的电子密度分布是线性变化的。根据边界值 $n(0)=n_{0}$ 和 $n(L)=n_{L}$，一个物理上一致的线性分布是\n$$\nn(x)=n_{0}+\\left(\\frac{n_{L}-n_{0}}{L}\\right)x,\n$$\n这给出了一个恒定的空间导数\n$$\n\\frac{d n}{d x}=\\frac{n_{L}-n_{0}}{L}.\n$$\n因此，扩散电流密度在空间上是均匀的：\n$$\nJ_{n} = q D_{n}\\frac{n_{L}-n_{0}}{L}.\n$$\n这种均匀性明确地满足了当复合可忽略不计时，稳态连续性要求 $\\frac{\\partial J_{n}}{\\partial x}=0$。\n\n现在我们使用所提供的参数对 $J_{n}$ 进行数值计算。首先，为了与 $D_{n}$ 和密度的单位保持一致，将长度单位转换为厘米：\n$$\nL = 10\\,\\mu\\text{m} = 10 \\times 10^{-6}\\,\\text{m} = 1.0\\times 10^{-3}\\,\\text{cm}.\n$$\n密度差为\n$$\nn_{L}-n_{0} = \\left(9.999\\times 10^{15}\\,\\text{cm}^{-3}\\right) - \\left(1.000\\times 10^{16}\\,\\text{cm}^{-3}\\right) = -1.0\\times 10^{12}\\,\\text{cm}^{-3}.\n$$\n因此，梯度为\n$$\n\\frac{d n}{d x} = \\frac{n_{L}-n_{0}}{L} = \\frac{-1.0\\times 10^{12}\\,\\text{cm}^{-3}}{1.0\\times 10^{-3}\\,\\text{cm}} = -1.0\\times 10^{15}\\,\\text{cm}^{-4}.\n$$\n最后，\n$$\nJ_{n} = q D_{n}\\frac{d n}{d x} = \\left(1.602176634\\times 10^{-19}\\,\\text{C}\\right)\\left(35\\,\\text{cm}^{2}\\,\\text{s}^{-1}\\right)\\left(-1.0\\times 10^{15}\\,\\text{cm}^{-4}\\right).\n$$\n计算其大小：\n$$\n1.602176634\\times 10^{-19} \\times 35 \\times 1.0\\times 10^{15}\n= \\left(1.602176634\\times 35\\right)\\times 10^{-4}\n= 56.07618119\\times 10^{-4}\n= 5.607618119\\times 10^{-3}.\n$$\n考虑梯度的符号，\n$$\nJ_{n} = -5.607618119\\times 10^{-3}\\,\\text{A}\\,\\text{cm}^{-2}.\n$$\n四舍五入到四位有效数字，稳态扩散电流密度为\n$$\nJ_{n} = -0.005608\\,\\text{A}\\,\\text{cm}^{-2}.\n$$\n这个恒定值是在复合可忽略的情况下由连续性方程所决定的稳态值，与线性的 $n(x)$ 分布和 $\\mathbf{E}=\\mathbf{0}$ 的条件一致。",
            "answer": "$$\\boxed{-0.005608}$$"
        },
        {
            "introduction": "最后的这项练习将所有概念整合在p-n二极管——半导体器件的基石——的背景之下。您将应用连续性方程和漂移-扩散方程来模拟正向偏压下的少数载流子注入、扩散和复合过程。通过编写代码实现这一理想二极管模型，您将亲手计算出其电流-电压特性，从而将抽象的方程组与可测量的器件行为深刻地联系起来。",
            "id": "3765627",
            "problem": "考虑一个处于稳态正向偏置下的一维长 p–n 结二极管。该二极管在横向方向上是均匀的，并由贯穿结区的一维坐标 $x$ 来描述。该半导体是非简并的、完全电离的，且每个准中性区中的材料参数都是均匀的。其导电行为由静电泊松方程、电子和空穴连续性方程以及漂移-扩散电流关系描述。热平衡本征载流子浓度为 $n_i$，温度为 $T$。电子电荷大小为 $q$，玻尔兹曼常数为 $k_B$，热电压为 $V_T = k_B T / q$。电子迁移率为 $\\mu_n$，空穴迁移率为 $\\mu_p$，且爱因斯坦关系在每个区域都成立。\n\n在 p 型准中性区（耗尽层边界的左侧），电子是少数载流子，其平衡浓度 $n_{p0}$ 由掺杂决定。在 n 型准中性区（耗尽层边界的右侧），空穴是少数载流子，其平衡浓度 $p_{n0}$ 由掺杂决定。假设输运受 Shockley–Read–Hall (SRH) 复合限制，在低水平注入下，这在每个区域简化为单一的少数载流子寿命模型。设 p 型区中的电子寿命为 $\\tau_n$，n 型区中的空穴寿命为 $\\tau_p$。从耗尽层边界到欧姆接触的距离在 p 型区中为 $W_p$，在 n 型区中为 $W_n$。复合参数和距离满足准中性近似的条件，即这些区域中的电场可忽略不计。\n\n你必须计算在指定正向偏置 $V > 0$ 下，p 型区中电子准费米能级 $E_{Fn}(x)$ 和 n 型区中空穴准费米能级 $E_{Fp}(x)$ 的空间分布，使用以少数载流子浓度表示的耗尽层边缘注入边界条件，然后通过计算耗尽层边缘的漂移-扩散电流来提取总二极管电流密度 $J$。你的程序必须从基本原理出发实现以下步骤：\n- 从每个区域中准中性近似下的稳态电子和空穴连续性方程及漂移-扩散关系开始。\n- 使用受 SRH 复合限制的扩散模型，并配合适当的寿命参数，从耗尽层边缘的注入边界条件和欧姆接触处的平衡条件获得少数载流子分布。\n- 从少数载流子浓度构建以能量为单位的准费米能级分布。\n- 使用漂移-扩散关系获得耗尽层边缘的电流密度贡献，并将它们相加得到总二极管电流密度。\n\n每个测试案例的器件和材料参数如下：\n- 本征载流子浓度为 $n_i = 10^{10}\\,\\mathrm{cm}^{-3}$。\n- 温度为 $T = 300\\,\\mathrm{K}$。\n- 电子电荷为 $q = 1.602\\,176\\,634\\times 10^{-19}\\,\\mathrm{C}$。\n- 玻尔兹曼常数为 $k_B = 1.380\\,649\\times 10^{-23}\\,\\mathrm{J/K}$。\n- 电子迁移率为 $\\mu_n = 1350\\,\\mathrm{cm}^2/(\\mathrm{V\\cdot s})$。\n- 空穴迁移率为 $\\mu_p = 480\\,\\mathrm{cm}^2/(\\mathrm{V\\cdot s})$。\n- p 侧受主掺杂为 $N_A$，n 侧施主掺杂为 $N_D$，且完全电离。\n- p 型区中的平衡少数载流子浓度为 $n_{p0} = n_i^2/N_A$，n 型区中的平衡少数载流子浓度为 $p_{n0} = n_i^2/N_D$。\n- p 型区中的电子寿命为 $\\tau_n$，n 型区中的空穴寿命为 $\\tau_p$。\n- 到接触点的准中性区长度在 p 型区中为 $W_p$，在 n 型区中为 $W_n$。\n- 正向偏置为 $V$。\n\n耗尽层边缘的注入边界条件必须用少数载流子来施加：在 p 侧耗尽层边缘，电子浓度等于其平衡值乘以由 $V$ 决定的注入因子；在 n 侧耗尽层边缘，空穴浓度等于其平衡值乘以相同的注入因子。在欧姆接触处，少数载流子浓度弛豫到其平衡值。\n\n你的程序必须在准中性区中创建空间网格，计算少数载流子分布，将其转换为以电子伏特为单位的准费米能量分布，并通过将 p 侧耗尽层边缘的电子扩散电流与 n 侧耗尽层边缘的空穴扩散电流相加来计算总二极管电流密度。每个测试案例最终报告的量是总二极管电流密度 $J$，以 $\\mathrm{A/cm}^2$ 为单位，表示为一个浮点数。\n\n测试套件（三个具有科学上合理且不同机制的案例）：\n1. 正常路径：中等正向偏置和长准中性区。\n   - $N_A = 10^{17}\\,\\mathrm{cm}^{-3}$， $N_D = 10^{16}\\,\\mathrm{cm}^{-3}$，\n   - $\\tau_n = 10^{-6}\\,\\mathrm{s}$， $\\tau_p = 10^{-6}\\,\\mathrm{s}$，\n   - $W_p = 10^{-3}\\,\\mathrm{cm}$， $W_n = 10^{-3}\\,\\mathrm{cm}$，\n   - $V = 0.7\\,\\mathrm{V}$。\n2. 近平衡边界：小正向偏置以测试线性响应。\n   - $N_A = 10^{17}\\,\\mathrm{cm}^{-3}$， $N_D = 10^{16}\\,\\mathrm{cm}^{-3}$，\n   - $\\tau_n = 10^{-6}\\,\\mathrm{s}$， $\\tau_p = 10^{-6}\\,\\mathrm{s}$，\n   - $W_p = 10^{-3}\\,\\mathrm{cm}$， $W_n = 10^{-3}\\,\\mathrm{cm}$，\n   - $V = 0.05\\,\\mathrm{V}$。\n3. 边缘案例：靠近耗尽层边缘的短准中性区。\n   - $N_A = 10^{17}\\,\\mathrm{cm}^{-3}$， $N_D = 10^{16}\\,\\mathrm{cm}^{-3}$，\n   - $\\tau_n = 10^{-6}\\,\\mathrm{s}$， $\\tau_p = 10^{-6}\\,\\mathrm{s}$，\n   - $W_p = 10^{-4}\\,\\mathrm{cm}$， $W_n = 10^{-4}\\,\\mathrm{cm}$，\n   - $V = 0.7\\,\\mathrm{V}$。\n\n最终输出格式：\n- 你的程序应产生单行输出，其中包含三个测试案例的总二极管电流密度，形式为方括号括起来的逗号分隔列表，例如 $\\texttt{[J_1,J_2,J_3]}$，其中每个 $J_k$ 的单位为 $\\mathrm{A/cm}^2$。不允许有其他输出。",
            "solution": "问题陈述已经过严格验证，被认为是科学上合理、表述清晰且客观的。它提出了一个半导体器件物理学中的标准教科书问题，涉及基于漂移-扩散模型的 p-n 结二极管在正向偏置下的行为。所提供的参数在物理上是合理的，边界条件定义明确，从而可以得到唯一且有意义的解。该问题是基本原理的形式化应用，并且没有任何在验证协议中概述的使其无效的缺陷。因此，将提供一个完整的解决方案。\n\n目标是确定在正向偏置电压 $V$ 下流经一维 p-n 结二极管的总电流密度 $J$。分析仅限于耗尽区两侧的准中性区 (QNRs)，并采用低水平注入假设。\n\n稳态下的基本控制方程是电子和空穴的连续性方程以及漂移-扩散电流关系。\n\n电子的连续性方程为：\n$$ \\frac{1}{q} \\frac{dJ_n}{dx} = U_n $$\n空穴的连续性方程为：\n$$ -\\frac{1}{q} \\frac{dJ_p}{dx} = U_p $$\n其中 $q$ 是元电荷，$J_n$ 和 $J_p$ 分别是电子和空穴的电流密度，$U_n$ 和 $U_p$ 分别是电子和空穴的净复合率。在稳态下，$U_n = U_p = U$。\n\n漂移-扩散关系为：\n$$ J_n(x) = q \\mu_n n(x) E(x) + q D_n \\frac{dn(x)}{dx} $$\n$$ J_p(x) = q \\mu_p p(x) E(x) - q D_p \\frac{dp(x)}{dx} $$\n其中 $\\mu_n$ 和 $\\mu_p$ 是迁移率，$D_n$ 和 $D_p$ 是扩散系数，$n(x)$ 和 $p(x)$ 是载流子浓度，$E(x)$ 是电场。扩散系数通过爱因斯坦关系与迁移率相关联，$D = \\mu V_T$，其中 $V_T = k_B T / q$ 是热电压。\n\n分析在两个关键近似下进行：\n1.  **准中性**：在耗尽层以外的区域，假定净空间电荷可忽略不计。这意味着电场 $E(x)$ 近似为零。\n2.  **低水平注入下的 SRH 复合**：在低水平注入下，超额少数载流子浓度远小于多数载流子浓度。对于 Shockley–Read–Hall (SRH) 复合，净复合率 $U$ 简化为依赖于超额少数载流子的形式。对于 p 型准中性区中的电子，$U \\approx \\frac{n_p(x) - n_{p0}}{\\tau_n}$，其中 $n_p(x)$ 是电子浓度，$n_{p0}$ 是其平衡值，$\\tau_n$ 是电子少数载流子寿命。n 型准中性区中的空穴也有类似的表达式。\n\n让我们分析 p 型准中性区。我们定义一个坐标系，使得耗尽层边缘在 $x=0$，欧姆接触在 $x=-W_p$。在此区域，电子是少数载流子。当 $E(x) \\approx 0$ 时，电子电流纯粹是扩散电流：\n$$ J_n(x) \\approx q D_n \\frac{dn_p(x)}{dx} $$\n将此代入带有 SRH 复合模型的电子连续性方程，得到少数载流子扩散方程：\n$$ \\frac{d}{dx} \\left( q D_n \\frac{dn_p}{dx} \\right) = q \\frac{n_p(x) - n_{p0}}{\\tau_n} $$\n假设 $D_n$ 是常数，我们有：\n$$ \\frac{d^2n_p(x)}{dx^2} - \\frac{n_p(x) - n_{p0}}{D_n \\tau_n} = 0 $$\n令 $\\delta n_p(x) = n_p(x) - n_{p0}$ 为超额电子浓度，$L_n = \\sqrt{D_n \\tau_n}$ 为电子扩散长度。方程变为：\n$$ \\frac{d^2(\\delta n_p(x))}{dx^2} - \\frac{\\delta n_p(x)}{L_n^2} = 0 $$\n通解为 $\\delta n_p(x) = A \\sinh(\\frac{x}{L_n}) + B \\cosh(\\frac{x}{L_n})$。边界条件是：\n1.  在欧姆接触处 ($x = -W_p$)：载流子浓度处于其平衡值，因此 $n_p(-W_p) = n_{p0}$，这意味着 $\\delta n_p(-W_p) = 0$。\n2.  在耗尽层边缘 ($x = 0$)：正向偏置 $V$ 根据结定律产生超额载流子，$n_p(0) = n_{p0} e^{V/V_T}$。超额浓度为 $\\delta n_p(0) = n_{p0}(e^{V/V_T} - 1)$。\n\n将这些边界条件应用于另一种通解形式 $\\delta n_p(x) = C_1 \\sinh(\\frac{x+W_p}{L_n}) + C_2 \\cosh(\\frac{x+W_p}{L_n})$，可以简化常数的求解。第一个边界条件 $\\delta n_p(-W_p) = 0$ 立即得出 $C_2 = 0$。第二个边界条件给出 $\\delta n_p(0) = C_1 \\sinh(\\frac{W_p}{L_n}) = n_{p0}(e^{V/V_T} - 1)$，所以 $C_1 = \\frac{n_{p0}(e^{V/V_T} - 1)}{\\sinh(W_p/L_n)}$。\n因此，超额电子分布为：\n$$ \\delta n_p(x) = n_{p0} (e^{V/V_T} - 1) \\frac{\\sinh(\\frac{x+W_p}{L_n})}{\\sinh(\\frac{W_p}{L_n})} \\quad \\text{for } x \\in [-W_p, 0] $$\n通过对该分布求导，可以找到电子电流密度：\n$$ J_n(x) = q D_n \\frac{d(\\delta n_p(x))}{dx} = q D_n \\frac{n_{p0}}{L_n} (e^{V/V_T} - 1) \\frac{\\cosh(\\frac{x+W_p}{L_n})}{\\sinh(\\frac{W_p}{L_n})} $$\n我们在耗尽层边缘 ($x=0$) 对其求值，以找到注入到 n 区的电子电流：\n$$ J_n(0) = q \\frac{D_n}{L_n} n_{p0} (e^{V/V_T} - 1) \\coth\\left(\\frac{W_p}{L_n}\\right) $$\n\n对 n 型准中性区进行对称分析。设耗尽层边缘在 $x=0$，欧姆接触在 $x=W_n$。空穴是少数载流子。超额空穴浓度分布 $\\delta p_n(x) = p_n(x) - p_{n0}$ 由以下方程控制：\n$$ \\frac{d^2(\\delta p_n(x))}{dx^2} - \\frac{\\delta p_n(x)}{L_p^2} = 0 \\quad \\text{with } L_p = \\sqrt{D_p \\tau_p} $$\n边界条件是在接触点 $\\delta p_n(W_n) = 0$，在耗尽层边缘 $\\delta p_n(0) = p_{n0}(e^{V/V_T} - 1)$。解为：\n$$ \\delta p_n(x) = p_{n0} (e^{V/V_T} - 1) \\frac{\\sinh(\\frac{W_n-x}{L_p})}{\\sinh(\\frac{W_n}{L_p})} \\quad \\text{for } x \\in [0, W_n] $$\n空穴电流密度为 $J_p(x) \\approx -q D_p \\frac{dp_n(x)}{dx}$。$\\delta p_n(x)$ 的导数为 $\\frac{d(\\delta p_n)}{dx} = p_{n0}(e^{V/V_T}-1) \\frac{-\\cosh((W_n-x)/L_p)/L_p}{\\sinh(W_n/L_p)}$。\n在耗尽层边缘 ($x=0$) 求值：\n$$ J_p(0) = -q D_p \\left( p_{n0}(e^{V/V_T}-1) \\frac{-\\cosh(W_n/L_p)/L_p}{\\sinh(W_n/L_p)} \\right) = q \\frac{D_p}{L_p} p_{n0} (e^{V/V_T} - 1) \\coth\\left(\\frac{W_n}{L_p}\\right) $$\n\n忽略耗尽区内的复合，总电流密度 $J$ 是在各自耗尽层边界处计算的电子和空穴少数载流子电流密度之和：\n$$ J = J_n(0) + J_p(0) $$\n$$ J = \\left[ q \\frac{D_n}{L_n} n_{p0} \\coth\\left(\\frac{W_p}{L_n}\\right) + q \\frac{D_p}{L_p} p_{n0} \\coth\\left(\\frac{W_n}{L_p}\\right) \\right] (e^{V/V_T} - 1) $$\n这是著名的有限基区二极管的肖克利方程。平衡少数载流子浓度由质量作用定律给出：$n_{p0} = n_i^2/N_A$ 和 $p_{n0} = n_i^2/N_D$，其中 $N_A$ 和 $N_D$ 是完全电离的受主和施主掺杂浓度。\n\n问题还要求构建准费米能级分布。这些能级通过以下关系与载流子浓度相关联：\n$$ n(x) = n_i e^{(E_{Fn}(x) - E_i) / (k_B T)} \\quad \\implies \\quad E_{Fn}(x) = E_i + k_B T \\ln\\left(\\frac{n(x)}{n_i}\\right) $$\n$$ p(x) = n_i e^{(E_i - E_{Fp}(x)) / (k_B T)} \\quad \\implies \\quad E_{Fp}(x) = E_i - k_B T \\ln\\left(\\frac{p(x)}{n_i}\\right) $$\n在 p 型准中性区，少数载流子电子的准费米能级分布 $E_{Fn}(x)$ 由 $n_p(x) = n_{p0} + \\delta n_p(x)$ 决定。转换为电子伏特，并设置本征能级 $E_i$ 为能量参考点 ($E_i=0$)，分布为：\n$$ E_{Fn}(x)\\,[eV] = V_T \\ln\\left(\\frac{n_{p0} + \\delta n_p(x)}{n_i}\\right) $$\n类似地，对于 n 型准中性区中的少数载流子空穴准费米能级分布 $E_{Fp}(x)$：\n$$ E_{Fp}(x)\\,[eV] = -V_T \\ln\\left(\\frac{p_{n0} + \\delta p_n(x)}{n_i}\\right) $$\n这些分布可以在空间网格上使用 $\\delta n_p(x)$ 和 $\\delta p_n(x)$ 的推导表达式进行计算，但最终输出不需要它们。总电流密度 $J$ 可以直接从推导出的解析公式计算。实现将使用这个最终的 $J$ 公式。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the total diode current density for a p-n diode under forward bias,\n    based on the finite-base Shockley diode model.\n    \"\"\"\n    # Define physical constants\n    q = 1.602176634e-19  # Electron charge in C\n    k_B = 1.380649e-23   # Boltzmann constant in J/K\n\n    # Common device parameters\n    n_i = 1.0e10  # Intrinsic carrier density in cm^-3\n    T = 300.0     # Temperature in K\n    mu_n = 1350.0 # Electron mobility in cm^2/(V*s)\n    mu_p = 480.0  # Hole mobility in cm^2/(V*s)\n\n    # Calculate thermal voltage and diffusion coefficients\n    # V_T is in Volts\n    V_T = k_B * T / q\n    # D_n, D_p are in cm^2/s\n    D_n = mu_n * V_T\n    D_p = mu_p * V_T\n\n    # Test suite: (N_A, N_D, tau_n, tau_p, W_p, W_n, V)\n    # Units: cm^-3, cm^-3, s, s, cm, cm, V\n    test_cases = [\n        # Case 1: Moderate bias, long QNRs\n        (1.0e17, 1.0e16, 1.0e-6, 1.0e-6, 1.0e-3, 1.0e-3, 0.7),\n        # Case 2: Small bias, long QNRs\n        (1.0e17, 1.0e16, 1.0e-6, 1.0e-6, 1.0e-3, 1.0e-3, 0.05),\n        # Case 3: High bias, short QNRs\n        (1.0e17, 1.0e16, 1.0e-6, 1.0e-6, 1.0e-4, 1.0e-4, 0.7),\n    ]\n\n    results = []\n    for case in test_cases:\n        N_A, N_D, tau_n, tau_p, W_p, W_n, V = case\n\n        # Calculate equilibrium minority carrier densities (cm^-3)\n        n_p0 = n_i**2 / N_A\n        p_n0 = n_i**2 / N_D\n\n        # Calculate minority carrier diffusion lengths (cm)\n        L_n = np.sqrt(D_n * tau_n)\n        L_p = np.sqrt(D_p * tau_p)\n\n        # Calculate the voltage-dependent injection factor (dimensionless)\n        injection_factor = np.exp(V / V_T) - 1.0\n\n        # Calculate the electron current density component at the depletion edge\n        # coth(x) = 1/tanh(x)\n        coth_n = 1.0 / np.tanh(W_p / L_n)\n        J_n_prefactor = q * (D_n / L_n) * n_p0 * coth_n\n\n        # Calculate the hole current density component at the depletion edge\n        coth_p = 1.0 / np.tanh(W_n / L_p)\n        J_p_prefactor = q * (D_p / L_p) * p_n0 * coth_p\n\n        # Total current density (A/cm^2)\n        J_total = (J_n_prefactor + J_p_prefactor) * injection_factor\n        \n        results.append(J_total)\n\n    # Format and print the final output as a comma-separated list in brackets\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
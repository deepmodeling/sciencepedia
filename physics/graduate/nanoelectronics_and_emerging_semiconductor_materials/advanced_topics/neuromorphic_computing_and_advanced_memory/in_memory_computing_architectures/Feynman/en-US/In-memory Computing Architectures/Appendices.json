{
    "hands_on_practices": [
        {
            "introduction": "The promise of in-memory computing (IMC) lies in its potential for dramatic improvements in energy efficiency. This exercise provides a practical foundation for quantifying this efficiency by guiding you through the construction of a bottom-up energy model for a typical IMC macro. By accounting for the energy consumed by digital-to-analog converters (DACs), the resistive array, and analog-to-digital converters (ADCs), you will learn to calculate the effective energy per multiply-accumulate (MAC) operation, a critical figure of merit for any computing hardware .",
            "id": "4276912",
            "problem": "Consider a resistive crossbar in-memory computing macro that performs a dot-product along one column with $N$ rows, where each row stores an $8$-bit weight as a conductance and is driven by an $8$-bit input encoded as a voltage. A Digital-to-Analog Converter (DAC) generates the row voltages from digital inputs, the array performs the analog multiply-accumulate (MAC) operation by ohmic conduction and current summation at the column, and a single Analog-to-Digital Converter (ADC) digitizes the column current per dot-product. Peripheral circuits (e.g., wordline drivers, sample-and-hold, reference generation) incur an energy cost per column operation.\n\nUse the following data, all specified for $8$-bit resolution:\n- DAC energy per input element activation: $E_{\\text{DAC}} = 0.2\\,\\text{pJ}$.\n- Array conduction energy per analog MAC: $E_{\\text{array}} = 0.05\\,\\text{pJ}/\\text{MAC}$.\n- ADC energy per column conversion: $E_{\\text{ADC}} = 1\\,\\text{pJ}/\\text{conv}$.\n- Peripheral energy per column operation: $E_{\\text{periph}} = 0.1\\,\\text{pJ}$.\n- Number of rows per column: $N = 256$.\n\nStarting from the principle that total energy is the sum of the energies of independent sub-operations and that column-level energies are amortized over the number of MACs produced in parallel by the dot-product, derive an expression for the total energy per effective $8$-bit MAC along a column and compute its value for the given parameters. Express your final answer in picojoules ($\\text{pJ}$) and round your result to six significant figures.",
            "solution": "The problem statement has been validated and is deemed valid. It is scientifically grounded in the principles of integrated circuit energy consumption, specifically for in-memory computing architectures. It is well-posed, providing all necessary parameters and a clear objective. The data are dimensionally consistent and physically realistic for modern semiconductor technology.\n\nThe objective is to derive an expression for the total energy per effective $8$-bit Multiply-Accumulate (MAC) operation within a resistive crossbar array and compute its numerical value.\n\nThe fundamental principle, as stated in the problem, is that the total energy for a column operation, denoted as $E_{\\text{total\\_col}}$, is the sum of the energies consumed by its constituent components. The operation in question is a vector-matrix multiplication, specifically a dot-product between a vector of input voltages and a vector of stored conductances along one column of the array.\n\nThe components of the total energy for one full column operation are as follows:\n\n$1$. Digital-to-Analog Converter (DAC) Energy: Each of the $N$ rows is driven by an input voltage generated by a DAC. Since all $N$ rows are activated to compute the dot-product, the total energy consumed by the DACs is the energy per DAC activation, $E_{\\text{DAC}}$, multiplied by the number of rows, $N$.\n$$ E_{\\text{DAC\\_total}} = N \\cdot E_{\\text{DAC}} $$\n\n$2$. Array Conduction Energy: The core multiply-accumulate operation occurs within the resistive array. For each of the $N$ cells in the column, a multiplication (Ohm's Law: $I = V \\cdot G$) is performed. The problem provides the energy per analog MAC, $E_{\\text{array}}$. Since $N$ such operations occur in parallel, the total array energy is:\n$$ E_{\\text{array\\_total}} = N \\cdot E_{\\text{array}} $$\n\n$3$. Analog-to-Digital Converter (ADC) Energy: The currents from all $N$ cells in the column are summed (Kirchhoff's Current Law) at the bottom of the column line. This single summed analog current is then converted back to a digital value by one ADC. This is a fixed energy cost per column operation.\n$$ E_{\\text{ADC\\_total}} = E_{\\text{ADC}} $$\n\n$4$. Peripheral Circuitry Energy: Additional circuits such as wordline drivers, reference voltage generators, and sample-and-hold circuits are required for the column operation. Their combined energy cost is given as a single value per column operation.\n$$ E_{\\text{periph\\_total}} = E_{\\text{periph}} $$\n\nThe total energy for a single column operation is the sum of these components:\n$$ E_{\\text{total\\_col}} = E_{\\text{DAC\\_total}} + E_{\\text{array\\_total}} + E_{\\text{ADC\\_total}} + E_{\\text{periph\\_total}} $$\n$$ E_{\\text{total\\_col}} = N \\cdot E_{\\text{DAC}} + N \\cdot E_{\\text{array}} + E_{\\text{ADC}} + E_{\\text{periph}} $$\n\nThe problem asks for the energy per effective $8$-bit MAC, which we denote as $E_{\\text{MAC\\_eff}}$. A single column operation performs $N$ parallel $8$-bit $\\times$ $8$-bit multiply-accumulate operations. Therefore, to find the effective energy per MAC, we must amortize the total column energy over the $N$ operations performed.\n$$ E_{\\text{MAC\\_eff}} = \\frac{E_{\\text{total\\_col}}}{N} $$\nSubstituting the expression for $E_{\\text{total\\_col}}$:\n$$ E_{\\text{MAC\\_eff}} = \\frac{N \\cdot E_{\\text{DAC}} + N \\cdot E_{\\text{array}} + E_{\\text{ADC}} + E_{\\text{periph}}}{N} $$\nThis expression can be simplified by distributing the division by $N$:\n$$ E_{\\text{MAC\\_eff}} = E_{\\text{DAC}} + E_{\\text{array}} + \\frac{E_{\\text{ADC}} + E_{\\text{periph}}}{N} $$\nThis final symbolic expression shows that the per-MAC energies of the DAC and array are direct costs, while the shared, column-level overheads of the ADC and peripherals are amortized across the $N$ parallel operations.\n\nNow, we substitute the given numerical values:\n- Number of rows per column: $N = 256$\n- DAC energy per activation: $E_{\\text{DAC}} = 0.2\\,\\text{pJ}$\n- Array energy per MAC: $E_{\\text{array}} = 0.05\\,\\text{pJ}$\n- ADC energy per conversion: $E_{\\text{ADC}} = 1\\,\\text{pJ}$\n- Peripheral energy per column operation: $E_{\\text{periph}} = 0.1\\,\\text{pJ}$\n\nPlugging these values into the derived formula for $E_{\\text{MAC\\_eff}}$:\n$$ E_{\\text{MAC\\_eff}} = 0.2 + 0.05 + \\frac{1 + 0.1}{256} $$\n$$ E_{\\text{MAC\\_eff}} = 0.25 + \\frac{1.1}{256} $$\nPerforming the division:\n$$ \\frac{1.1}{256} = 0.004296875 $$\nNow, completing the sum:\n$$ E_{\\text{MAC\\_eff}} = 0.25 + 0.004296875 = 0.254296875\\,\\text{pJ} $$\nThe problem requires the final answer to be rounded to six significant figures. The first six significant digits are $2, 5, 4, 2, 9, 6$. The seventh digit is $8$, which is greater than or equal to $5$, so we round up the sixth digit.\n$$ E_{\\text{MAC\\_eff}} \\approx 0.254297\\,\\text{pJ} $$",
            "answer": "$$\\boxed{0.254297}$$"
        },
        {
            "introduction": "The analog nature of IMC presents unique design challenges, particularly for the readout circuitry that senses the computational result. This practice focuses on the sense amplifier, a critical component that converts the summed column current back into the digital domain. You will apply fundamental circuit laws to determine the full range of possible output currents, from the smallest detectable signal to the maximum possible value, thereby establishing the dynamic range requirement for the analog front-end .",
            "id": "4276926",
            "problem": "Consider a passive resistive crossbar array used for in-memory computing in the context of Integrated Circuits and Electronic Design Automation (EDA). The crossbar has $128$ rows and $128$ columns, and each cross-point contains a resistive element of conductance $G_{ij}$ connecting row $i$ to column $j$. Each row $i$ is driven by an input voltage $V_{i}$, and each column sums the currents from all connected devices and is read by a sense amplifier. Assume ohmic behavior of devices and ideal wires so that Kirchhoff’s Current Law (KCL) and Ohm’s law apply without parasitic losses.\n\nThe row input voltages are quantized to $N=8$ bits uniformly over the interval $[0, 0.2]\\,\\text{V}$, including both endpoints $0\\,\\text{V}$ and $0.2\\,\\text{V}$. Each device conductance is bounded within the interval $[1, 100]\\,\\mu\\text{S}$ and can be set anywhere within this range. The column current is the sum of device currents driven by their respective row voltages, that is, for a given column $j$,\n$$\nI_{j}=\\sum_{i=1}^{128} G_{ij} V_{i}.\n$$\nUsing these facts as the fundamental base, determine:\n1. The maximum possible column current $I_{\\max}$ over all admissible $\\{V_{i}\\}$ and $\\{G_{ij}\\}$.\n2. The required dynamic range at the sense amplifier, defined here as the ratio $\\mathcal{D}$ between the maximum possible column current and the minimum non-zero column current that can be produced by the crossbar given the quantization of the inputs and the conductance bounds. For the minimum non-zero current, consider the smallest strictly positive column current achievable by any admissible configuration.\n\nExpress the maximum column current in milliamperes (mA). Express the dynamic range as a unitless ratio. Round both quantities to four significant figures.",
            "solution": "We begin from Ohm’s law and Kirchhoff’s Current Law. For column $j$, the current is the sum of currents contributed by each row-device pair:\n$$\nI_{j}=\\sum_{i=1}^{128} I_{ij}=\\sum_{i=1}^{128} G_{ij} V_{i},\n$$\nwhere $I_{ij}=G_{ij} V_{i}$ follows from Ohm’s law for each resistive device at cross-point $(i,j)$.\n\nTo obtain the maximum possible column current $I_{\\max}$, we maximize each term $G_{ij} V_{i}$ subject to the constraints $V_{i} \\in [0, 0.2]\\,\\text{V}$ (quantized) and $G_{ij} \\in [1, 100]\\,\\mu\\text{S}$. Because both $G_{ij}$ and $V_{i}$ appear multiplicatively and the sum is separable across $i$, the maximum sum occurs when all $V_{i}$ take their maximum allowed value and all $G_{ij}$ are at their upper bound:\n$$\nV_{i}^{\\max}=0.2\\,\\text{V}, \\quad G_{ij}^{\\max}=100\\,\\mu\\text{S}.\n$$\nThus,\n$$\nI_{\\max}=\\sum_{i=1}^{128} G_{ij}^{\\max} V_{i}^{\\max} = \\sum_{i=1}^{128} \\left(100 \\times 10^{-6}\\,\\text{S}\\right) \\left(0.2\\,\\text{V}\\right).\n$$\nEach term equals\n$$\n\\left(100 \\times 10^{-6}\\right)\\left(0.2\\right)\\,\\text{A} = 20 \\times 10^{-6}\\,\\text{A},\n$$\nand there are $128$ terms, yielding\n$$\nI_{\\max} = 128 \\times 20 \\times 10^{-6}\\,\\text{A} = 2560 \\times 10^{-6}\\,\\text{A} = 2.56 \\times 10^{-3}\\,\\text{A}.\n$$\nExpressed in milliamperes,\n$$\nI_{\\max} = 2.56\\,\\text{mA}.\n$$\nRounding to four significant figures, this is $2.560\\,\\text{mA}$.\n\nNext, we define the dynamic range $\\mathcal{D}$ as\n$$\n\\mathcal{D}=\\frac{I_{\\max}}{I_{\\min}},\n$$\nwhere $I_{\\min}$ is the minimum strictly positive column current achievable under the given constraints. The minimum non-zero column current arises when exactly one device contributes the smallest non-zero current, with all other contributions equal to zero (i.e., their rows at $0\\,\\text{V}$ or conductances not contributing). Because the inputs are quantized, the smallest strictly positive voltage is the least significant step (LSB). For $N=8$ bits uniformly quantized over $[0, 0.2]\\,\\text{V}$ including both endpoints, the step size is\n$$\n\\Delta V = \\frac{0.2\\,\\text{V} - 0\\,\\text{V}}{2^{8}-1} = \\frac{0.2}{255}\\,\\text{V}.\n$$\nTherefore, the smallest strictly positive voltage level is $V_{\\text{LSB}}=\\Delta V=\\frac{0.2}{255}\\,\\text{V}$. The minimum conductance is\n$$\nG_{\\min} = 1\\,\\mu\\text{S} = 1 \\times 10^{-6}\\,\\text{S}.\n$$\nWith only one contributing device at $(i^{*}, j)$, the smallest strictly positive column current is\n$$\nI_{\\min} = G_{\\min} V_{\\text{LSB}} = \\left(1 \\times 10^{-6}\\,\\text{S}\\right) \\left(\\frac{0.2}{255}\\,\\text{V}\\right) = \\frac{0.2 \\times 10^{-6}}{255}\\,\\text{A}.\n$$\nThus the dynamic range is\n$$\n\\mathcal{D} = \\frac{I_{\\max}}{I_{\\min}} = \\frac{2.56 \\times 10^{-3}}{\\frac{0.2 \\times 10^{-6}}{255}} = \\frac{2.56 \\times 10^{-3} \\times 255}{0.2 \\times 10^{-6}}.\n$$\nWe simplify algebraically:\n$$\n\\mathcal{D} = \\frac{2.56}{0.2} \\times \\frac{255 \\times 10^{-3}}{10^{-6}} = 12.8 \\times 255 \\times 10^{3} = 3264 \\times 10^{3} = 3.264 \\times 10^{6}.\n$$\nThis is already exact under the given quantization model. Rounding to four significant figures gives\n$$\n\\mathcal{D} = 3.264 \\times 10^{6}.\n$$\n\nTherefore, the required quantities are $I_{\\max}=2.560\\,\\text{mA}$ and $\\mathcal{D}=3.264 \\times 10^{6}$ (unitless ratio), both to four significant figures as requested.",
            "answer": "$$\\boxed{\\begin{pmatrix}2.560 & 3.264 \\times 10^{6}\\end{pmatrix}}$$"
        },
        {
            "introduction": "In an ideal crossbar array, the interconnecting wires have zero resistance, but in reality, this is not the case. This exercise delves into the practical consequences of wire resistance, a key physical non-ideality known as IR drop, which can degrade the accuracy of computations. You will model the voltage drop along an interconnect and estimate its impact on the final vector-matrix multiplication result, providing insight into a fundamental factor that limits the size and precision of IMC arrays .",
            "id": "4282448",
            "problem": "Consider a resistive crossbar used for in-memory vector–matrix multiplication (VMM), with $M$ rows and $N$ columns. Each programmable cell at row $i$ and column $j$ is modeled as a linear conductance $G_{ij}$ connected between the row line and the column line. The VMM operation applies an input voltage vector $\\{V_{i}\\}$ across the $M$ rows and senses the resulting output currents at the $N$ columns. In practice, the horizontal row lines exhibit nonzero resistance due to the finite resistivity of the interconnect material and the line geometry, leading to an Ohmic voltage drop along the line that reduces the delivered cell voltage away from the driver. Assume the column lines are held at ideal virtual ground (zero voltage) by high-gain transimpedance amplifiers so that column-line voltage variations are negligible compared to row-line drops.\n\nStarting from Ohm’s law and the definition of resistivity, model a single row $j$ as a uniform resistive line with per-unit-length resistance $r$ and total length $L$. Under the assumption that the row is loaded by approximately uniform cell conductances and operated in a regime where the voltage drop is small enough that the row current profile is well approximated by its total value near the driver, derive an expression for the cell-node voltage at a position $x$ along the row (measured from the driver), in terms of the applied row voltage $V_{j}$, the row current $I_{j}$, and the line resistance between the driver and the cell position. Using this distributed-resistance model, specialize your result to the worst-case cell at the far end of the row and obtain an expression for its voltage in terms of $V_{j}$, $I_{j}$, and the total line resistance $R_{\\text{line}}$ of the row.\n\nDefine the relative VMM output error at a column $k$ attributable to row-line drops as\n$$\\delta_{k} \\equiv \\frac{|I_{k}^{\\text{ideal}} - I_{k}^{\\text{actual}}|}{I_{k}^{\\text{ideal}}},$$\nwhere $I_{k}^{\\text{ideal}}$ is the column current with perfectly conducting row lines and $I_{k}^{\\text{actual}}$ is the column current with the reduced row-node voltages delivered to the cells. Assuming all cells have identical conductance $G_{ij} = G_{0}$ and all rows are driven with the same voltage $V_{i} = V_{0}$, use your expression for the far-end cell voltage to estimate $\\delta_{k}$ in the worst case.\n\nNumerical parameters for the array are:\n- $M = 256$, $N = 256$,\n- uniform cell conductance $G_{0} = 10\\,\\mu\\text{S}$,\n- uniform row-drive voltage $V_{0} = 0.1\\,\\text{V}$,\n- interconnect material resistivity $\\rho = 2.0 \\times 10^{-8}\\,\\Omega\\cdot\\text{m}$,\n- row-line width $w = 200\\,\\text{nm}$, thickness $t = 100\\,\\text{nm}$,\n- cell pitch $a = 100\\,\\text{nm}$, so the row length is $L = N a$.\n\nTreat the worst-case cell on each row as located at $x = L$, and neglect column-line drops. Compute the worst-case relative VMM output error $\\delta_{k}$ using these parameters. Round your final answer to four significant figures and express it as a decimal with no unit symbol.",
            "solution": "The user-provided problem has been validated and is determined to be sound. It is scientifically grounded in the principles of circuit theory, well-posed with sufficient information and clear objectives, and objectively stated. The simplifying assumptions are explicitly provided, making the problem solvable.\n\nWe begin by modeling the voltage drop along a single row line. Let the row be indexed by $j$. The row line is a resistive wire of total length $L$ with a uniform resistance per unit length $r$. According to Ohm's law, the infinitesimal voltage drop $dV$ across a segment of wire of infinitesimal length $dx$ at position $x$ (measured from the voltage driver) is given by:\n$$dV(x) = I(x) (r \\, dx)$$\nwhere $I(x)$ is the current flowing in the row line at position $x$. The problem states we can approximate the current profile $I(x)$ by its total value near the driver, which we denote as $I_j$. This simplification assumes the current shunted to the cells is small compared to the total current, which is valid for a small voltage drop regime. Thus, we approximate $I(x) \\approx I_j$.\n\nThe total voltage drop $\\Delta V(x)$ from the driver (at $x=0$) to a position $x$ is the integral of these infinitesimal drops:\n$$\\Delta V(x) = \\int_{0}^{x} dV(x') = \\int_{0}^{x} I(x') r \\, dx' \\approx \\int_{0}^{x} I_j r \\, dx' = I_j r x$$\nThe quantity $r x$ is the resistance of the line from the driver to position $x$, which we can denote as $R(x)$. Therefore, $\\Delta V(x) \\approx I_j R(x)$.\n\nThe cell-node voltage $V(x)$ at position $x$ is the applied voltage at the driver, $V_j$, minus this voltage drop:\n$$V(x) = V_j - \\Delta V(x) = V_j - I_j r x$$\nThis expression gives the cell-node voltage at position $x$ in terms of the applied voltage $V_j$, the total row current $I_j$, and the line resistance $r x$ between the driver and the cell.\n\nFor the worst-case cell at the far end of the row, we set $x=L$. The total resistance of the row line is $R_{\\text{line}} = rL$. The voltage at this cell is:\n$$V_{\\text{far-end}} = V(L) = V_j - I_j r L = V_j - I_j R_{\\text{line}}$$\nThis is the required expression for the voltage at the far-end cell.\n\nNext, we estimate the relative VMM output error $\\delta_k$, defined as:\n$$\\delta_{k} \\equiv \\frac{|I_{k}^{\\text{ideal}} - I_{k}^{\\text{actual}}|}{I_{k}^{\\text{ideal}}}$$\nWe analyze the specific case where all cell conductances are $G_{ij} = G_0$ and all row-drive voltages are $V_i = V_0$.\n\nIn the ideal case, the row lines are perfect conductors ($R_{\\text{line}} = 0$). The voltage at every cell $(i, k)$ is simply the applied row voltage, $V_0$. The column lines are at virtual ground ($0$ V). The current in column $k$ is the sum of currents from all $M$ rows connected to it:\n$$I_{k}^{\\text{ideal}} = \\sum_{i=1}^{M} G_{ik} V_{i} = \\sum_{i=1}^{M} G_0 V_0 = M G_0 V_0$$\n\nIn the actual case, we must account for the voltage drop. To find the voltage drop, we first need the total current $I_i$ for each row. Following the problem's approximation scheme, we can estimate this current using the ideal voltages:\n$$I_i = \\sum_{j=1}^{N} G_{ij} V_i = \\sum_{j=1}^{N} G_0 V_0 = N G_0 V_0$$\nSince this is the same for all rows, let's call it $I_0 = N G_0 V_0$.\n\nThe problem asks to use the far-end cell voltage to estimate the error. This implies a worst-case estimation where we assume that the voltage at *every* cell on a given row is reduced to the far-end voltage. So, for every cell on row $i$, we approximate the voltage as:\n$$V_{i, \\text{cell}}^{\\text{actual}} \\approx V_0 - I_0 R_{\\text{line}} = V_0 - (N G_0 V_0) R_{\\text{line}} = V_0(1 - N G_0 R_{\\text{line}})$$\nThe actual column current $I_k^{\\text{actual}}$ is then estimated as:\n$$I_{k}^{\\text{actual}} = \\sum_{i=1}^{M} G_0 V_{i, \\text{cell}}^{\\text{actual}} = \\sum_{i=1}^{M} G_0 \\left[V_0(1 - N G_0 R_{\\text{line}})\\right] = M G_0 V_0 (1 - N G_0 R_{\\text{line}})$$\nNow we compute the relative error $\\delta_k$. Since $N$, $G_0$, and $R_{\\text{line}}$ are all positive quantities and we expect the drop to be a small fraction of the applied voltage, $N G_0 R_{\\text{line}} < 1$. So we can drop the absolute value bars.\n$$\\delta_k = \\frac{I_{k}^{\\text{ideal}} - I_{k}^{\\text{actual}}}{I_{k}^{\\text{ideal}}} = \\frac{M G_0 V_0 - M G_0 V_0 (1 - N G_0 R_{\\text{line}})}{M G_0 V_0}$$\n$$\\delta_k = 1 - (1 - N G_0 R_{\\text{line}}) = N G_0 R_{\\text{line}}$$\nThis is the worst-case estimate for the relative error, which is independent of the column index $k$ under these uniform conditions.\n\nFinally, we compute the numerical value. First, we calculate the total line resistance $R_{\\text{line}}$. The resistance of a wire is given by $R = \\rho \\frac{\\text{length}}{\\text{area}}$.\nThe length of the row line is $L = N a$.\nThe cross-sectional area of the row line is $A = w t$.\n$$R_{\\text{line}} = \\rho \\frac{L}{A} = \\rho \\frac{N a}{w t}$$\nSubstituting the given numerical parameters in SI units:\n$N = 256$\n$\\rho = 2.0 \\times 10^{-8}\\,\\Omega\\cdot\\text{m}$\n$a = 100\\,\\text{nm} = 1.0 \\times 10^{-7}\\,\\text{m}$\n$w = 200\\,\\text{nm} = 2.0 \\times 10^{-7}\\,\\text{m}$\n$t = 100\\,\\text{nm} = 1.0 \\times 10^{-7}\\,\\text{m}$\n$$R_{\\text{line}} = (2.0 \\times 10^{-8}\\,\\Omega\\cdot\\text{m}) \\frac{(256) \\times (1.0 \\times 10^{-7}\\,\\text{m})}{(2.0 \\times 10^{-7}\\,\\text{m}) \\times (1.0 \\times 10^{-7}\\,\\text{m})} = \\frac{5.12 \\times 10^{-13}}{2.0 \\times 10^{-14}}\\,\\Omega = 25.6\\,\\Omega$$\nNow, we compute the relative error $\\delta_k$ using $G_0 = 10\\,\\mu\\text{S} = 1.0 \\times 10^{-5}\\,\\text{S}$:\n$$\\delta_k = N G_0 R_{\\text{line}} = (256) \\times (1.0 \\times 10^{-5}\\,\\text{S}) \\times (25.6\\,\\Omega)$$\n$$\\delta_k = 256 \\times 2.56 \\times 10^{-4} = 655.36 \\times 10^{-4} = 0.065536$$\nThe problem requires rounding to four significant figures.\n$\\delta_k \\approx 0.06554$.\nThis represents a worst-case VMM output error of approximately $6.554\\%$.",
            "answer": "$$\\boxed{0.06554}$$"
        }
    ]
}
{"hands_on_practices": [{"introduction": "双重差分（Difference-in-Differences, DID）法是政策评估的基石之一。本练习将通过一个经典的公共卫生场景，指导你计算一项预防性政策的真实效果，其关键在于将政策效果从对照组中观察到的固有时间趋势中分离出来。掌握这项基本计算是应用双重差分法的第一步。[@problem_id:4566513]", "problem": "一个区域性公共卫生机构在 $t=\\text{post}$ 年实施了一项新的预防性政策：为高风险成年人提供免费的社区流感疫苗接种服务。一个邻近地区没有实施这项政策，作为对照地区。设 $g \\in \\{\\text{treated}, \\text{control}\\}$ 表示组别（处理地区或对照地区），设 $t \\in \\{\\text{pre}, \\text{post}\\}$ 表示时期（政策前或政策后）。将潜在结果 $Y_{gt}(1)$ 定义为，如果在时间 $t$ 对组别 $g$ 实施该政策，将会观测到的流感相关住院率（每 $100{,}000$ 人），将 $Y_{gt}(0)$ 定义为，如果未实施该政策的住院率。假设稳定单位处理价值假设（SUTVA）成立，并且对于未处理的潜在结果，平行趋势条件成立，即从 $t=\\text{pre}$ 到 $t=\\text{post}$，$Y_{gt}(0)$ 的预期变化对于 $g=\\text{treated}$ 和 $g=\\text{control}$ 是相同的。在这些前提下，使用观测到的分组-时间平均住院率和因果识别的逻辑，推导出对处理组的平均处理效应的双重差分（DID）估计量 $\\hat{\\tau}_{\\text{DID}}$ 的表达式，然后计算其数值。\n\n观测到的平均流感相关住院率（每 $100{,}000$ 人口）如下：\n- 处理地区，政策前：$22.4$\n- 处理地区，政策后：$16.1$\n- 对照地区，政策前：$20.7$\n- 对照地区，政策后：$19.8$\n\n仅使用这些分组均值计算 $\\hat{\\tau}_{\\text{DID}}$，并根据您的估计值的符号，简要说明该政策是增加了还是减少了住院率。将效应表示为每 $100{,}000$ 人口的住院人数。将您的最终数值答案四舍五入到三位有效数字。", "solution": "问题要求推导和计算针对处理组的平均处理效应（ATT）的双重差分（DID）估计量。该分析基于一项准实验设计，涉及一个处理组和一个对照组，在政策干预前后进行观测。\n\n首先，我们定义目标参数。对处理组的平均处理效应（ATT）是指政策对实际接受了该政策的组（$g=\\text{treated}$）在他们接受政策的时期（$t=\\text{post}$）的预期影响。使用潜在结果框架，ATT（记为 $\\tau_{\\text{ATT}}$）被定义为在政策后期，处理组在接受处理时的预期潜在结果与未接受处理时的预期潜在结果之差：\n$$\n\\tau_{\\text{ATT}} = E[Y_{\\text{treated, post}}(1) - Y_{\\text{treated, post}}(0)]\n$$\n此处，$Y_{\\text{treated, post}}(1)$ 是处理组在政策后期接受政策时的潜在结果，而 $Y_{\\text{treated, post}}(0)$ 是同一组别在同一时期未接受政策时的潜在结果。\n\n估计 $\\tau_{\\text{ATT}}$ 的核心挑战在于 $E[Y_{\\text{treated, post}}(0)]$ 项代表了一个反事实状态；我们无法观测到如果处理组在政策后期没有接受处理会发生什么。DID方法允许我们使用现有数据和一个关键假设来估计这个反事实量。\n\n观测结果与潜在结果的关系如下：\n- 对于处理组在政策后期：$E[\\bar{Y}_{\\text{treated, post}}] = E[Y_{\\text{treated, post}}(1)]$。\n- 对于处理组在政策前期（无政策）：$E[\\bar{Y}_{\\text{treated, pre}}] = E[Y_{\\text{treated, pre}}(0)]$。\n- 对于对照组在政策后期（无政策）：$E[\\bar{Y}_{\\text{control, post}}] = E[Y_{\\text{control, post}}(0)]$。\n- 对于对照组在政策前期（无政策）：$E[\\bar{Y}_{\\text{control, pre}}] = E[Y_{\\text{control, pre}}(0)]$。\n\n问题陈述中假设对于未处理的潜在结果，平行趋势条件成立。该假设主张，在没有该政策的情况下，从政策前期到政策后期，处理组和对照组的结果预期变化是相同的。在数学上，这表示为：\n$$\nE[Y_{\\text{treated, post}}(0) - Y_{\\text{treated, pre}}(0)] = E[Y_{\\text{control, post}}(0) - Y_{\\text{control, pre}}(0)]\n$$\n我们可以重排这个方程来求解不可观测的反事实项 $E[Y_{\\text{treated, post}}(0)]$：\n$$\nE[Y_{\\text{treated, post}}(0)] = E[Y_{\\text{treated, pre}}(0)] + E[Y_{\\text{control, post}}(0)] - E[Y_{\\text{control, pre}}(0)]\n$$\n这个方程为处理组在政策后期假如没有接受处理时的预期结果提供了一个表达式。它由处理组的基线水平（$E[Y_{\\text{treated, pre}}(0)]$）加上在对照组中观测到的时间趋势（$E[Y_{\\text{control, post}}(0)] - E[Y_{\\text{control, pre}}(0)]$）构建而成。\n\n现在，我们将这个反事实的表达式代回到 $\\tau_{\\text{ATT}}$ 的定义中：\n$$\n\\tau_{\\text{ATT}} = E[Y_{\\text{treated, post}}(1)] - \\left( E[Y_{\\text{treated, pre}}(0)] + E[Y_{\\text{control, post}}(0)] - E[Y_{\\text{control, pre}}(0)] \\right)\n$$\nDID估计量 $\\hat{\\tau}_{\\text{DID}}$ 是该表达式的样本类比，其中我们用观测到的样本均值（记为 $\\bar{Y}_{gt}$）替换期望值：\n$$\n\\hat{\\tau}_{\\text{DID}} = \\bar{Y}_{\\text{treated, post}} - \\left( \\bar{Y}_{\\text{treated, pre}} + \\bar{Y}_{\\text{control, post}} - \\bar{Y}_{\\text{control, pre}} \\right)\n$$\n整理这些项可以得到DID估计量的标准公式：\n$$\n\\hat{\\tau}_{\\text{DID}} = (\\bar{Y}_{\\text{treated, post}} - \\bar{Y}_{\\text{treated, pre}}) - (\\bar{Y}_{\\text{control, post}} - \\bar{Y}_{\\text{control, pre}})\n$$\n这个表达式代表了处理组随时间的变化与对照组随时间的变化之差。\n\n我们现在使用所提供的数据计算其数值：\n- 处理地区，政策前（$\\bar{Y}_{\\text{treated, pre}}$）：$22.4$\n- 处理地区，政策后（$\\bar{Y}_{\\text{treated, post}}$）：$16.1$\n- 对照地区，政策前（$\\bar{Y}_{\\text{control, pre}}$）：$20.7$\n- 对照地区，政策后（$\\bar{Y}_{\\text{control, post}}$）：$19.8$\n\n首先，计算处理组住院率的变化：\n$$\n\\Delta_{\\text{treated}} = \\bar{Y}_{\\text{treated, post}} - \\bar{Y}_{\\text{treated, pre}} = 16.1 - 22.4 = -6.3\n$$\n接下来，计算对照组住院率的变化。这代表了在没有政策的情况下会影响两组的时间趋势。\n$$\n\\Delta_{\\text{control}} = \\bar{Y}_{\\text{control, post}} - \\bar{Y}_{\\text{control, pre}} = 19.8 - 20.7 = -0.9\n$$\n最后，通过从处理组的变化中减去对照组的变化来计算DID估计量：\n$$\n\\hat{\\tau}_{\\text{DID}} = \\Delta_{\\text{treated}} - \\Delta_{\\text{control}} = (-6.3) - (-0.9) = -6.3 + 0.9 = -5.4\n$$\n问题要求答案保留三位有效数字。结果是 $-5.40$。负号表示，据估计，该政策导致了流感相关住院率的下降。根据该模型，效应的大小是，与没有该政策时所预期的相比，处理地区的住院率每 $100{,}000$ 人口减少了 $5.40$ 人。", "answer": "$$\n\\boxed{-5.40}\n$$", "id": "4566513"}, {"introduction": "当政策或干预措施基于一个明确的临界值（cutoff）来分配时，断点回归（Regression Discontinuity, RD）设计是一种极其有力的评估工具。本练习聚焦于一个“模糊”断点回归场景，即临界值影响但并不完全决定干预的接受情况，这在现实世界中十分常见。你将学习如何计算断点处的局部平均处理效应（Local Average Treatment Effect, LATE），这需要你用结果变量的跳跃幅度除以处理概率的跳跃幅度。[@problem_id:4566461]", "problem": "一个区域性卫生系统实施了一项旨在预防肥胖的生活方式咨询项目，该项目由身体质量指数（BMI）的阈值规则触发。具体来说，基线BMI驱动变量 $X$ 等于或高于临界值 $c = 30$ 的患者会被标记接受咨询，但接受度并不完美，一些低于临界值的患者也接受了咨询。研究人员计划使用模糊回归断点（RD）设计来识别在临界值处的局部平均处理效应（LATE）。\n\n设 $D$ 表示在基线后的第一季度接受咨询的指示变量，设 $Y$ 表示十二个月后的BMI。研究团队使用带有三角核和数据驱动带宽的局部线性回归，估计了在临界值 $c = 30$ 处 $Y$ 和 $D$ 的条件期望的右极限和左极限。他们报告如下：\n- $Y$ 的估计右极限：$\\lim_{x \\to 30^{+}} \\mathbb{E}[Y \\mid X = x] = 29.91$。\n- $Y$ 的估计左极限：$\\lim_{x \\to 30^{-}} \\mathbb{E}[Y \\mid X = x] = 30.12$。\n- $D$ 的估计右极限：$\\lim_{x \\to 30^{+}} \\mathbb{E}[D \\mid X = x] = 0.61$。\n- $D$ 的估计左极限：$\\lim_{x \\to 30^{-}} \\mathbb{E}[D \\mid X = x] = 0.19$。\n\n假设标准的模糊回归断点识别条件在临界值处成立：潜在结果在 $X$ 等于 $c$ 处连续，在 $c$ 处对 $X$ 没有精确操纵，以及处理接受度在驱动变量上是单调的（不存在反抗者）。仅使用这些估计值和回归断点识别的核心逻辑，计算在临界值处咨询对十二个月后BMI的局部平均处理效应。答案以BMI单位表示，并四舍五入到三位有效数字。然后，用一句话简要解释这个局部效应对基于BMI的咨询项目在临界值处的意义。", "solution": "目标是在模糊回归断点（RD）框架下，识别对于在阈值 $X = c$ 处的个体，咨询对十二个月后身体质量指数（BMI）的因果效应。这种识别的基础是潜在结果模型和在临界值处的连续性假设，再结合处理接受度上存在第一阶段不连续性。\n\n设 $Y(1)$ 和 $Y(0)$ 分别表示接受咨询和不接受咨询的潜在十二个月后BMI结果。观测结果满足\n$$\nY = Y(0) + D \\cdot \\big(Y(1) - Y(0)\\big).\n$$\n在给定驱动变量 $X = x$ 的条件下取条件期望，可得\n$$\n\\mathbb{E}[Y \\mid X = x] = \\mathbb{E}[Y(0) \\mid X = x] + \\mathbb{E}[D \\cdot (Y(1) - Y(0)) \\mid X = x].\n$$\n在标准的模糊回归断点假设下：\n- 函数 $\\mathbb{E}[Y(0) \\mid X = x]$ 和 $\\mathbb{E}[Y(1) \\mid X = x]$ 在 $x = c$ 处是连续的。\n- 由于阈值规则，处理概率 $\\mathbb{E}[D \\mid X = x]$ 在 $x = c$ 处存在不连续性。\n- 单调性（无反抗者）确保了在临界值处改变处理状态的个体是遵从者。\n\n取 $x=c$ 处右极限和左极限的差，并利用潜在结果的连续性，我们得出观测结果的不连续性可归因于处理概率的不连续性乘以在临界值处遵从者的平均因果效应。这就得出了瓦尔德估计量：\n$$\n\\text{LATE at } c \\;=\\; \\frac{\\lim_{x \\to c^{+}} \\mathbb{E}[Y \\mid X = x] - \\lim_{x \\to c^{-}} \\mathbb{E}[Y \\mid X = x]}{\\lim_{x \\to c^{+}} \\mathbb{E}[D \\mid X = x] - \\lim_{x \\to c^{-}} \\mathbb{E}[D \\mid X = x]}.\n$$\n\n现在我们代入在 $c=30$ 处提供的估计值：\n- 结果不连续性：\n$$\n\\Delta Y \\equiv \\lim_{x \\to 30^{+}} \\mathbb{E}[Y \\mid X = x] - \\lim_{x \\to 30^{-}} \\mathbb{E}[Y \\mid X = x] = 29.91 - 30.12 = -0.21.\n$$\n- 处理不连续性：\n$$\n\\Delta D \\equiv \\lim_{x \\to 30^{+}} \\mathbb{E}[D \\mid X = x] - \\lim_{x \\to 30^{-}} \\mathbb{E}[D \\mid X = x] = 0.61 - 0.19 = 0.42.\n$$\n\n因此，在临界值处的局部平均处理效应是\n$$\n\\text{LATE} = \\frac{\\Delta Y}{\\Delta D} = \\frac{-0.21}{0.42} = -0.5.\n$$\n\n四舍五入到三位有效数字，得到 $-0.500$ BMI单位。\n\n解释：在处理状态受跨越BMI阈值30影响的患者（即遵从者）中，接受咨询在临界值局部平均可使十二个月后的BMI降低约0.5个单位。", "answer": "$$\\boxed{-0.500}$$", "id": "4566461"}]}
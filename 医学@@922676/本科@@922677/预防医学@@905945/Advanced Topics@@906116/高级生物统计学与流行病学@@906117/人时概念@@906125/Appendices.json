{"hands_on_practices": [{"introduction": "这个基础练习将带你亲手计算队列研究中的总人时。在真实的研究中，研究对象在不同时间加入和退出，此练习通过一个假设的队列数据，模拟了这种情况，要求你通过累加每个个体的贡献时间来得出总人时。掌握这项基本技能是后续进行发病率计算和更复杂分析的基石。[@problem_id:4578307]", "problem": "建立一个前瞻性队列来研究某一健康结局的发病率。参与者在他们首次符合条件的观察时间点进入风险集，并贡献人时，直到结局事件发生、失访（LTFU）或行政删失三者中最早发生的时间点为止。在人时是每位参与者作为风险集成员所累积的持续时间这一概念框架下，计算在交错进入和多种退出机制下队列贡献的总人时。\n\n队列研究的起始时间为 $t=0$ 月，行政删失时间为 $T_{c}=36$ 月。对于每位参与者 $P_{i}$，其进入时间 $E_{i}$ 和退出时间 $X_{i}$（附带退出原因）均以队列开始后的月数表示：\n\n- 参与者 $P_{1}$：$E_{1}=0$；在 $X_{1}=20$ 时发生结局事件。\n- 参与者 $P_{2}$：$E_{2}=6$；在 $X_{2}=22$ 时失访。\n- 参与者 $P_{3}$：$E_{3}=12$；到 $X_{3}=40$ 时无事件发生（保持观察直至行政删失）。\n- 参与者 $P_{4}$：$E_{4}=18$；在 $X_{4}=33$ 时发生结局事件。\n- 参与者 $P_{5}$：$E_{5}=24$；在 $X_{5}=30$ 时失访。\n\n假设没有参与者在进入研究前经历结局事件，并且人时仅在参与者处于风险集中时累积。计算该队列的总人时（在适当时截断于 $T_{c}$），并以人年为单位表示最终结果。将答案四舍五入至四位有效数字。", "solution": "该问题要求计算一个前瞻性研究中由五名参与者组成的队列的总人时。基本原理是，人时是每位个体参与者保持在结局风险状态下的持续时间之和。每位参与者的风险期从其进入时间开始，到以下三个可能事件中最早发生的一个结束：健康结局的发生、失访（LTFU）或行政删失。\n\n给定的参数是行政删失时间 $T_c = 36$ 月，以及每位参与者 $i$ 的进入时间 $E_i$ 和带有相关原因的退出时间 $X_i$。每位参与者对人时的贡献（记作 $PT_i$）是他们进入风险集和退出风险集之间的时间间隔。\n\n参与者 $i$ 的观察区间的起点是他们的进入时间 $E_i$。\n参与者 $i$ 的观察区间的终点（我们可以记作 $t_{end, i}$）由其指定的退出时间 $X_i$（由于事件或失访）和行政删失时间 $T_c$ 的最小值决定。这是因为参与者对人时的贡献不能超过研究在 $T_c$ 结束的时间点。\n\n因此，参与者 $i$ 贡献的人时的计算公式为：\n$$PT_i = t_{end, i} - E_i = \\min(X_i, T_c) - E_i$$\n\n我们将此公式应用于每位参与者。\n\n参与者 $P_1$：\n进入时间 $E_1 = 0$ 月。\n因结局事件在 $X_1 = 20$ 月时退出。\n随访结束时间为 $\\min(X_1, T_c) = \\min(20, 36) = 20$ 月。\n$P_1$ 的人时为：\n$$PT_1 = 20 - 0 = 20 \\text{ months}$$\n\n参与者 $P_2$：\n进入时间 $E_2 = 6$ 月。\n因失访在 $X_2 = 22$ 月时退出。\n随访结束时间为 $\\min(X_2, T_c) = \\min(22, 36) = 22$ 月。\n$P_2$ 的人时为：\n$$PT_2 = 22 - 6 = 16 \\text{ months}$$\n\n参与者 $P_3$：\n进入时间 $E_3 = 12$ 月。\n该参与者在 $X_3 = 40$ 月时无事件发生且仍在观察中。然而，研究在行政删失时间 $T_c = 36$ 月时结束。因此，该参与者在 $T_c$ 时被行政删失。\n随访结束时间为 $\\min(X_3, T_c) = \\min(40, 36) = 36$ 月。\n$P_3$ 的人时为：\n$$PT_3 = 36 - 12 = 24 \\text{ months}$$\n\n参与者 $P_4$：\n进入时间 $E_4 = 18$ 月。\n因结局事件在 $X_4 = 33$ 月时退出。\n随访结束时间为 $\\min(X_4, T_c) = \\min(33, 36) = 33$ 月。\n$P_4$ 的人时为：\n$$PT_4 = 33 - 18 = 15 \\text{ months}$$\n\n参与者 $P_5$：\n进入时间 $E_5 = 24$ 月。\n因失访在 $X_5 = 30$ 月时退出。\n随访结束时间为 $\\min(X_5, T_c) = \\min(30, 36) = 30$ 月。\n$P_5$ 的人时为：\n$$PT_5 = 30 - 24 = 6 \\text{ months}$$\n\n队列的总人时（以月为单位），$PT_{\\text{total, months}}$，是个体贡献的总和：\n$$PT_{\\text{total, months}} = PT_1 + PT_2 + PT_3 + PT_4 + PT_5$$\n$$PT_{\\text{total, months}} = 20 + 16 + 24 + 15 + 6 = 81 \\text{ person-months}$$\n\n问题要求最终结果以人年表示。我们使用1年等于12个月的转换因子。\n$$PT_{\\text{total, years}} = \\frac{PT_{\\text{total, months}}}{12 \\text{ months/year}}$$\n$$PT_{\\text{total, years}} = \\frac{81}{12} = 6.75 \\text{ person-years}$$\n\n最后，答案必须四舍五入到四位有效数字。\n值 $6.75$ 有三位有效数字。为了用四位有效数字表示，我们添加一个末尾的零：$6.750$。", "answer": "$$\\boxed{6.750}$$", "id": "4578307"}, {"introduction": "在掌握了基本计算后，此练习将探讨一个关键的细微之处：个体只有在真正处于事件风险中时，才能贡献人时。我们将通过一个假设情景，分析一个常见错误——即在不可复发事件发生后仍计算人时——如何导致发病率的低估。这有助于你深刻理解为何“风险时间”的定义必须如此严格，以及错误的计算会如何扭曲研究结论。[@problem_id:4555135]", "problem": "一项预防医学的队列研究旨在估计某一非复发性临床事件（例如，首次心肌梗死）的发生率。根据研究设计，每位参与者计划接受长达 $24$ 个月（$2$ 年）的观察。所使用的基本定义是，发生率是新发事件数与总风险人时的比率。一个人只有在处于风险中时才贡献人时；对于非复发性事件，事件发生后，他们就不再有发生同一事件的风险。\n\n观察了八名参与者，其结局和随访模式如下（时间为精确值）：\n- 参与者 $\\mathrm{A}$：在 $3$ 个月时发生事件；持续观察至 $24$ 个月。\n- 参与者 $\\mathrm{B}$：在 $9$ 个月时发生事件；持续观察至 $24$ 个月。\n- 参与者 $\\mathrm{C}$：在 $18$ 个月时发生事件；持续观察至 $24$ 个月。\n- 参与者 $\\mathrm{D}$：未发生事件；观察了 $24$ 个月。\n- 参与者 $\\mathrm{E}$：在 $1$ 个月时发生事件；持续观察至 $24$ 个月。\n- 参与者 $\\mathrm{F}$：未发生事件；在 $12$ 个月时失访。\n- 参与者 $\\mathrm{G}$：在 $20$ 个月时发生事件；持续观察至 $24$ 个月。\n- 参与者 $\\mathrm{H}$：未发生事件；观察了 $24$ 个月。\n\n假设一位分析师在计算发生率时，错误地将所有观察时间，包括非复发性事件发生后的时间，都计入了作为分母的人时中。请仅使用发生率的核心定义以及人时仅在风险期内累积（对于非复发性结局，事件后时间不累积）这一事实，计算因此错误导致的比例性低估。比例性低估是指错误计算的发生率低于正确计算的发生率的部分所占的比例。\n\n在汇总人时时，请将月份转换为年（使用 $12$ 个月 $=$ $1$ 年）。将比例性低估以无量纲小数形式报告，并四舍五入至四位有效数字。", "solution": "目标是计算因计算总风险人时出错而导致的发生率的比例性低估。比例性低估记为 $PU$，是错误计算的发生率低于正确计算的发生率的部分所占的比例。其定义为：\n$$\nPU = \\frac{IR_{correct} - IR_{erroneous}}{IR_{correct}}\n$$\n其中 $IR_{correct}$ 是正确的发生率，$IR_{erroneous}$ 是错误的发生率。\n\n发生率 $IR$ 定义为新发事件数 $N_{events}$ 除以总风险人时 $PT$。\n$$\nIR = \\frac{N_{events}}{PT}\n$$\n因此，我们可以将正确和错误的发生率写为：\n$$\nIR_{correct} = \\frac{N_{events}}{PT_{correct}} \\quad \\text{和} \\quad IR_{erroneous} = \\frac{N_{events}}{PT_{erroneous}}\n$$\n分子 $N_{events}$ 在两次计算中是相同的，因为错误仅存在于分母中。将这些表达式代入 $PU$ 的公式中，得到：\n$$\nPU = \\frac{\\frac{N_{events}}{PT_{correct}} - \\frac{N_{events}}{PT_{erroneous}}}{\\frac{N_{events}}{PT_{correct}}} = 1 - \\frac{\\frac{N_{events}}{PT_{erroneous}}}{\\frac{N_{events}}{PT_{correct}}} = 1 - \\frac{PT_{correct}}{PT_{erroneous}}\n$$\n这个简化后的表达式表明，比例性低估仅取决于正确人时与错误人时的比率。虽然问题要求将人时转换为年，但转换因子会在此比率中被消掉。因此，我们可以使用人月进行计算。\n\n首先，我们确定新发事件数 $N_{events}$。根据提供的数据，参与者 $\\mathrm{A}$、$\\mathrm{B}$、$\\mathrm{C}$、$\\mathrm{E}$ 和 $\\mathrm{G}$ 发生了事件。\n$$\nN_{events} = 5\n$$\n\n接下来，我们计算正确的总风险人时 $PT_{correct}$。一个人只有在处于风险中时才对该总时间有贡献。对于非复发性事件，当事件发生、参与者失访或研究结束时，风险期即告结束。\n- 参与者 $\\mathrm{A}$：在 $3$ 个月时发生事件 $\\implies 3$ 个月的人时。\n- 参与者 $\\mathrm{B}$：在 $9$ 个月时发生事件 $\\implies 9$ 个月的人时。\n- 参与者 $\\mathrm{C}$：在 $18$ 个月时发生事件 $\\implies 18$ 个月的人时。\n- 参与者 $\\mathrm{D}$：未发生事件，观察了 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{E}$：在 $1$ 个月时发生事件 $\\implies 1$ 个月的人时。\n- 参与者 $\\mathrm{F}$：未发生事件，在 $12$ 个月时失访 $\\implies 12$ 个月的人时。\n- 参与者 $\\mathrm{G}$：在 $20$ 个月时发生事件 $\\implies 20$ 个月的人时。\n- 参与者 $\\mathrm{H}$：未发生事件，观察了 $24$ 个月 $\\implies 24$ 个月的人时。\n\n将这些贡献相加，得到以月为单位的总正确人时，我们记为 $PT_{correct, months}$：\n$$\nPT_{correct, months} = 3 + 9 + 18 + 24 + 1 + 12 + 20 + 24 = 111 \\text{ 个月}\n$$\n以年为单位，这相当于 $PT_{correct} = \\frac{111}{12}$ 人年。\n\n接下来，我们计算错误的总人时 $PT_{erroneous}$。分析师错误地包含了每位参与者的所有观察时间，甚至包括非复发性事件发生后的时间。\n- 参与者 $\\mathrm{A}$：观察至 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{B}$：观察至 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{C}$：观察至 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{D}$：观察了 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{E}$：观察至 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{F}$：在 $12$ 个月时失访 $\\implies 12$ 个月的人时。\n- 参与者 $\\mathrm{G}$：观察至 $24$ 个月 $\\implies 24$ 个月的人时。\n- 参与者 $\\mathrm{H}$：观察了 $24$ 个月 $\\implies 24$ 个月的人时。\n\n将这些贡献相加，得到以月为单位的总错误人时，我们记为 $PT_{erroneous, months}$：\n$$\nPT_{erroneous, months} = (7 \\times 24) + 12 = 168 + 12 = 180 \\text{ 个月}\n$$\n以年为单位，这相当于 $PT_{erroneous} = \\frac{180}{12}$ 人年。\n\n现在我们可以使用以月为单位的人时值来计算比例性低估：\n$$\nPU = 1 - \\frac{PT_{correct, months}}{PT_{erroneous, months}} = 1 - \\frac{111}{180}\n$$\n这个分数可以化简。分子和分母都可以被 $3$ 整除：\n$$\n\\frac{111}{180} = \\frac{3 \\times 37}{3 \\times 60} = \\frac{37}{60}\n$$\n所以，比例性低估为：\n$$\nPU = 1 - \\frac{37}{60} = \\frac{60 - 37}{60} = \\frac{23}{60}\n$$\n为了以四舍五入到四位有效数字的小数形式提供答案，我们进行除法运算：\n$$\nPU = \\frac{23}{60} = 0.383333...\n$$\n四舍五入到四位有效数字得到 $0.3833$。", "answer": "$$\\boxed{0.3833}$$", "id": "4555135"}, {"introduction": "现实世界的研究常常涉及随时间变化的暴露因素，例如患者在研究期间的某个时间点开始服药。此练习要求你超越静态的暴露分类，为在随访期间开始接受某种暴露的个体正确地将其观察时间分配到“未暴露”和“暴露”两个不同区间。在纵向研究中，这项技能对于避免偏倚和准确估计暴露效应至关重要。[@problem_id:4555095]", "problem": "一项预防医学的队列研究随访了$6$名成年人，从入组时（时间 $t=0$ 年）开始，直到发生结局事件、失访或研究管理的随访终点（时间 $t=2.0$ 年）三者中最早发生者为止。一项感兴趣的暴露可以在入组后任何时间开始，且一旦开始，便持续至该个体随访结束。最初，使用“从基线开始曾经暴露”的方法对暴露进行了错误分类。现要求您使用时间依赖性暴露分配方法提供一个修正后的分析，在该方法中，每个个体在暴露开始前的人时被分配到未暴露状态，开始后的人时被分配到暴露状态。假设结局事件在其记录的时间瞬间发生，并在那一刻将该个体从进一步的风险中移除。所有时间均以年为单位。\n\n个体时间线：\n- 参与者A：在 $t=0.8$ 时开始暴露；在 $t=1.6$ 时发生结局事件。\n- 参与者B：在基线（$t=0.0$）时暴露；未发生结局事件；在 $t=2.0$ 时因行政原因删失。\n- 参与者C：从未开始暴露；在 $t=1.2$ 时发生结局事件。\n- 参与者D：在 $t=1.4$ 时开始暴露；未发生结局事件；在 $t=2.0$ 时因行政原因删失。\n- 参与者E：在 $t=0.5$ 时开始暴露；在 $t=0.9$ 时发生结局事件。\n- 参与者F：从未开始暴露；未发生结局事件；在 $t=2.0$ 时因行政原因删失。\n\n仅使用上述修正后的时间依赖性暴露分配方法，计算暴露状态和未暴露状态下的发生率，然后计算暴露与未暴露的发生率比（IRR）。将人时以人年为单位表示。将最终的IRR报告为一个无单位的数值，并四舍五入至三位有效数字。", "solution": "目标是使用时间依赖性暴露分配方法，按暴露状态计算发生率，然后得出发生率比。其基本定义是，发生率等于结局事件数除以在相应暴露状态下累积的总风险人时。在时间依赖性暴露分配下，每个个体从 $t=0$ 到暴露开始（若有）的时间段内为未暴露状态贡献人时，从暴露开始到发生结局事件或删失的时间段内为暴露状态贡献人时。结局事件归因于事件发生瞬间所处的暴露状态。\n\n按个体计算人时和事件：\n\n- 参与者A：从 $t=0$到 $t=0.8$ 未暴露，贡献 $0.8$ 人年未暴露时间。从 $t=0.8$到 $t=1.6$ 暴露，贡献 $0.8$ 人年暴露时间。结局事件在 $t=1.6$ 时发生，此时处于暴露状态，因此贡献 $1$ 个暴露事件。\n\n- 参与者B：从 $t=0.0$到 $t=2.0$ 暴露，贡献 $2.0$ 人年暴露时间。无事件。\n\n- 参与者C：从未暴露。从 $t=0$到 $t=1.2$ 未暴露，贡献 $1.2$ 人年未暴露时间。结局事件在 $t=1.2$ 时发生，此时处于未暴露状态，因此贡献 $1$ 个未暴露事件。\n\n- 参与者D：从 $t=0$到 $t=1.4$ 未暴露，贡献 $1.4$ 人年未暴露时间。从 $t=1.4$到 $t=2.0$ 暴露，贡献 $0.6$ 人年暴露时间。无事件。\n\n- 参与者E：从 $t=0$到 $t=0.5$ 未暴露，贡献 $0.5$ 人年未暴露时间。从 $t=0.5$到 $t=0.9$ 暴露，贡献 $0.4$ 人年暴露时间。结局事件在 $t=0.9$ 时发生，此时处于暴露状态，因此贡献 $1$ 个暴露事件。\n\n- 参与者F：从未暴露。从 $t=0$到 $t=2.0$ 未暴露，贡献 $2.0$ 人年未暴露时间。无事件。\n\n按暴露状态汇总人时：\n\n- 总未暴露人时：\n$$0.8 + 0 + 1.2 + 1.4 + 0.5 + 2.0 = 5.9 \\text{ 人年}.$$\n\n- 总暴露人时：\n$$0.8 + 2.0 + 0 + 0.6 + 0.4 + 0 = 3.8 \\text{ 人年}.$$\n\n按暴露状态汇总事件：\n\n- 未暴露事件：仅参与者C，因此为 $1$ 个事件。\n- 暴露事件：参与者A和E，因此为 $2$ 个事件。\n\n计算发生率：\n\n- 暴露组发生率：\n$$\\text{Rate}_{\\text{exposed}} = \\frac{2}{3.8} \\text{ 例/人年}.$$\n\n- 未暴露组发生率：\n$$\\text{Rate}_{\\text{unexposed}} = \\frac{1}{5.9} \\text{ 例/人年}.$$\n\n计算暴露与未暴露的发生率比（IRR）：\n$$\\text{IRR} = \\frac{\\text{Rate}_{\\text{exposed}}}{\\text{Rate}_{\\text{unexposed}}} = \\frac{\\frac{2}{3.8}}{\\frac{1}{5.9}} = \\frac{2 \\times 5.9}{3.8 \\times 1} = \\frac{11.8}{3.8} = \\frac{59}{19} \\approx 3.105263\\ldots.$$\n\n将IRR四舍五入至三位有效数字：\n$$3.11.$$", "answer": "$$\\boxed{3.11}$$", "id": "4555095"}]}
{"hands_on_practices": [{"introduction": "CT图像的清晰度，即空间分辨率，从根本上受到X射线源物理尺寸的限制。本练习将引导您探索有限的焦点尺寸如何产生几何模糊，这是影响空间分辨率的关键因素。通过推导等中心处的有效模糊度 [@problem_id:4902668]，您将能够定量地理解系统几何构型，特别是放大倍数$M$，如何影响图像质量的这一关键性能指标。", "problem": "一个多层扇束计算机断层扫描（CT）系统由一个具有有限焦点的X射线源和一个平板探测器组成。源到等中心的距离为 $R$，源到探测器的距离为 $D$，因此系统放大倍数为 $M = D/R$。考虑仅由X射线焦点的有限尺寸引起的平面内图像模糊，而所有其他模糊源（如探测器单元宽度、运动或重建滤波）均被忽略。假设在源平面上，焦点的强度分布是在横向上的一个一维高斯分布，其半高全宽（FWHM）为 $s$。一个点状物体位于等中心平面上。在线性投影和反投影下，将焦点引起的模糊建模为该高斯分布通过扇束几何的传播，然后缩小回等中心平面。\n\n从几何射线关系（相似三角形）和高斯分布在线性映射下的缩放特性出发，推导等中心处的有效焦点模糊，该模糊定义为由有限焦点引起的在等中心平面上的点扩散函数的半高全宽（FWHM）。将最终结果表示为关于 $s$ 和 $M$ 的符号表达式。除了所述的高斯模型和线性几何传播外，不要引入任何额外的近似。以单一闭式表达式提供最终答案。不需要进行数值计算，也不需要四舍五入。如果引入了中间量（如标准差），请确保明确地将其与 $s$ 关联起来。", "solution": "问题要求推导多层扇束CT系统中等中心处的有效焦点模糊。该量被定义为仅考虑X射线源有限尺寸所产生的模糊时，在等中心平面上的点扩散函数（PSF）的半高全宽（FWHM）。已知条件是源到等中心的距离 $R$，源到探测器的距离 $D$，系统放大倍数 $M = D/R$，以及一维高斯焦点强度分布的半高全宽 $s$。\n\n推导过程分为两个主要步骤：\n1.  确定位于等中心的点状物体因焦点而在探测器上投射的模糊尺寸。这就是半影效应。\n2.  将这个模糊尺寸从探测器平面映射回等中心平面，这对应于其在重建图像中的表示。此过程涉及缩小（反放大）。\n\n让我们对系统几何进行建模。我们可以将X射线源放置在z轴上 $z=0$ 的位置。等中心平面位于 $z=R$，平板探测器平面位于 $z=D$。横向由x轴表示。点状物体位于等中心，因此其坐标为 $(x, z) = (0, R)$。\n\n焦点不是一个单点，而是在源平面（$z=0$）上具有有限的空间范围。问题陈述其强度分布是半高全宽为 $s$ 的高斯分布。我们可以通过考虑从焦点的“边缘”（我们用其半高全宽 $s$ 来定义）发出的射线来对此进行建模。\n\n让我们使用几何光学和相似三角形来分析投影。三角形的顶点是位于等中心的点状物体，坐标为 $(0, R)$。\n一个三角形由焦点和物体点构成。它的底是位于源平面 $z=0$ 上的焦点宽度 $s$。它的高是从源平面到物体平面的距离，即 $R$。\n第二个更大的三角形由模糊在探测器上的投影和物体点构成。它的底是探测器上模糊轮廓的宽度，我们称之为 $s_{\\text{det}}$。这个模糊轮廓位于探测器平面 $z=D$。它的高是从物体平面到探测器平面的距离，即 $D-R$。\n\n根据相似三角形的性质，两个三角形的底高比是相同的：\n$$\n\\frac{s}{R} = \\frac{s_{\\text{det}}}{D-R}\n$$\n我们可以解此方程求出 $s_{\\text{det}}$，即探测器上模糊的半高全宽：\n$$\ns_{\\text{det}} = s \\frac{D-R}{R}\n$$\n问题给出了系统放大倍数 $M = D/R$。我们可以用 $M$ 来表示探测器上的模糊：\n$$\ns_{\\text{det}} = s \\left(\\frac{D}{R} - \\frac{R}{R}\\right) = s(M-1)\n$$\n问题陈述焦点具有高斯轮廓。由相似三角形描述的几何投影是一种线性缩放操作。对高斯函数进行线性缩放会得到另一个高斯函数。因此，如果焦点轮廓的半高全宽为 $s$，那么探测器上投影的模糊轮廓也是一个高斯分布，其半高全宽按几何因子进行缩放，恰好为 $s_{\\text{det}} = s(M-1)$。在相似三角形的论证中直接使用半高全宽是有效的，因为对于高斯函数而言，半高全宽是一种宽度的线性度量，其缩放方式与标准差完全相同。\n\n第二步是将探测器上的这种模糊与重建图像中的有效模糊关联起来。图像是在以等中心为中心的物体坐标系中重建的。探测器平面上某一尺寸的特征对应于物体平面中一个被放大了的特征。对于位于等中心的物体，其放大倍数为 $M$。\n\n一个在等中心平面上尺寸为 $L_{\\text{iso}}$ 的物体，根据以下关系投影到探测器平面上，尺寸变为 $L_{\\text{det}}$：\n$$\nL_{\\text{det}} = M \\cdot L_{\\text{iso}}\n$$\n反之，要将探测器上观察到的尺寸为 $s_{\\text{det}}$ 的特征映射回其在等中心的等效尺寸，我们必须除以放大系数 $M$。这个过程被称为缩小（或反放大）。\n\n令 $s_{\\text{iso}}$ 为等中心处模糊的有效半高全宽。它通过对 $s_{\\text{det}}$ 进行缩小得到：\n$$\ns_{\\text{iso}} = \\frac{s_{\\text{det}}}{M}\n$$\n代入我们推导出的 $s_{\\text{det}}$ 的表达式：\n$$\ns_{\\text{iso}} = \\frac{s(M-1)}{M}\n$$\n这就是等中心处有效焦点模糊的最终表达式，它代表了由有限源尺寸引起的点扩散函数的半高全宽。它完全由给定的参数 $s$ 和 $M$ 表示。\n结果也可以写成 $s \\left(1 - \\frac{1}{M}\\right)$。由于在任何物理CT系统中，探测器都放置在物体之后，因此我们有 $D  R$，这意味着 $M  1$。所以，项 $(M-1)/M$ 是一个小于1的正分数，这表明等中心处的有效模糊是物理焦点尺寸 $s$ 的一部分。", "answer": "$$\n\\boxed{s \\frac{M-1}{M}}\n$$", "id": "4902668"}, {"introduction": "要捕捉像心脏这样快速运动的器官，必须具备卓越的时间分辨率。双源CT（DSCT）技术正是为应对这一挑战而生，它利用两套独立的X射线-探测器系统来加倍数据采集速度。这个实践问题将向您展示DSCT架构如何从根本上提高时间分辨率 [@problem_id:4902698]，通过计算不同重建策略下的有效扫描时间，您将体会到现代心脏CT成像背后巧妙的工程设计原理。", "problem": "一台双源计算机断层扫描（CT）扫描仪安装了两个X射线源-探测器对，它们之间的固定角度间隔为 $90^{\\circ}$。在短扫描扇形束图像重建中，一幅完整的图像需要一个等效于 $180^{\\circ}$ 的连续投影角度范围（本问题中忽略扇角）。有效时间分辨率定义为在给定相位下，实际用于重建一幅图像的投影数据的时间长度。假设机架以恒定角速度旋转，旋转时间为 $T_{\\mathrm{rot}} = 0.28\\ \\mathrm{s}$。\n\n仅使用关于角度覆盖范围和恒定角速度的第一性原理推导，确定以下情况的有效时间分辨率：\n1. 双源系统上的单节段重建，以及\n2. 同一双源系统上的双节段重建，其中所需的角度范围被平均分配到在同一心动相位重建的两个连续心跳中。\n\n将每个时间分辨率以秒为单位表示，并将答案四舍五入到四位有效数字。", "solution": "该问题要求计算双源计算机断层扫描（CT）扫描仪在两种不同重建方案下的有效时间分辨率。解决方案将从关于角速度和数据采集覆盖范围的第一性原理推导得出。\n\n首先，让我们确定问题中给出的基本参数。\n机架在 $T_{\\mathrm{rot}} = 0.28\\ \\mathrm{s}$ 的时间内旋转 $360^{\\circ}$。由于角速度恒定，角速度 $\\omega$ 由下式给出：\n$$ \\omega = \\frac{360^{\\circ}}{T_{\\mathrm{rot}}} $$\n\n该CT系统是一台双源扫描仪，装有两个源-探测器系统，它们之间的固定角度间隔为 $90^{\\circ}$。这意味着在任何时刻，都会同时从两个不同的角度位置采集投影数据。设机架的方位由角度 $\\theta(t)$ 描述。那么一个源位于 $\\theta(t)$，第二个源位于 $\\theta(t) + 90^{\\circ}$。\n\n确定该系统时间分辨率的核心原理是理解数据采集的速率。当机架旋转一个微小角度 $d\\theta$ 时，第一个源在此角度增量上采集数据，而第二个源同时在另一个角度位置上以相同的增量采集数据。因此，对于机架旋转 $\\Delta\\theta$，采集到的唯一角度投影数据的总*量*是单个源采集量的两倍，即 $2\\Delta\\theta$。与单源系统相比，这有效地将角度数据采集速度提高了一倍。\n\n问题陈述，一次完整的图像重建需要一个等效于 $180^{\\circ}$ 的连续投影角度范围（“短扫描”或半扫描）。有效时间分辨率是采集重建所需数据的时间。\n\n**1. 单节段重建**\n\n在单节段重建中，整个所需的角度数据集必须在一个连续的时间间隔内采集。\n所需的角度数据范围是 $\\Theta_{\\mathrm{req}} = 180^{\\circ}$。\n设 $\\Delta\\theta_1$ 为采集这些数据所需的机架旋转角度。利用我们已建立的原理，即采集的数据量为 $2\\Delta\\theta$，我们可以建立以下方程：\n$$ 2\\Delta\\theta_1 = \\Theta_{\\mathrm{req}} = 180^{\\circ} $$\n求解所需的机架旋转角度：\n$$ \\Delta\\theta_1 = \\frac{180^{\\circ}}{2} = 90^{\\circ} $$\n为了验证这一点，考虑机架旋转 $90^{\\circ}$。假设第一个源从 $0^{\\circ}$ 开始旋转到 $90^{\\circ}$。它覆盖的角度范围是 $[0^{\\circ}, 90^{\\circ}]$。同时，第二个源从 $90^{\\circ}$ 开始旋转到 $180^{\\circ}$，覆盖的角度范围是 $[90^{\\circ}, 180^{\\circ}]$。这两个数据集的并集 $[0^{\\circ}, 90^{\\circ}] \\cup [90^{\\circ}, 180^{\\circ}]$，形成了一个完整的连续范围 $[0^{\\circ}, 180^{\\circ}]$。因此，旋转 $90^{\\circ}$ 确实是足够的。\n\n有效时间分辨率 $T_{\\mathrm{eff},1}$ 是以机架角速度 $\\omega$ 执行这 $90^{\\circ}$ 旋转所花费的时间。\n$$ T_{\\mathrm{eff},1} = \\frac{\\Delta\\theta_1}{\\omega} = \\frac{90^{\\circ}}{360^{\\circ}/T_{\\mathrm{rot}}} = \\frac{90^{\\circ}}{360^{\\circ}} T_{\\mathrm{rot}} = \\frac{1}{4} T_{\\mathrm{rot}} $$\n代入给定的 $T_{\\mathrm{rot}}$ 值：\n$$ T_{\\mathrm{eff},1} = \\frac{1}{4} \\times 0.28\\ \\mathrm{s} = 0.07\\ \\mathrm{s} $$\n四舍五入到四位有效数字，结果是 $0.07000\\ \\mathrm{s}$。\n\n**2. 双节段重建**\n\n在双节段重建中，所需的 $180^{\\circ}$ 角度范围被均匀分割，并在两个独立的心跳中采集。这意味着数据采集被分成两个节段，每个节段贡献所需总数据的一半。\n每个节段所需的角度数据量 $\\Theta_{\\mathrm{seg}}$ 为：\n$$ \\Theta_{\\mathrm{seg}} = \\frac{\\Theta_{\\mathrm{req}}}{2} = \\frac{180^{\\circ}}{2} = 90^{\\circ} $$\n在多节段重建中，有效时间分辨率取决于采集单个数据节段所需的时间。设 $\\Delta\\theta_2$ 为采集一个 $90^{\\circ}$ 数据节段所需的机架旋转角度。使用与之前相同的原理：\n$$ 2\\Delta\\theta_2 = \\Theta_{\\mathrm{seg}} = 90^{\\circ} $$\n求解每个节段所需的机架旋转角度：\n$$ \\Delta\\theta_2 = \\frac{90^{\\circ}}{2} = 45^{\\circ} $$\n有效时间分辨率 $T_{\\mathrm{eff},2}$ 是机架旋转这 $45^{\\circ}$ 所需的时间。\n$$ T_{\\mathrm{eff},2} = \\frac{\\Delta\\theta_2}{\\omega} = \\frac{45^{\\circ}}{360^{\\circ}/T_{\\mathrm{rot}}} = \\frac{45^{\\circ}}{360^{\\circ}} T_{\\mathrm{rot}} = \\frac{1}{8} T_{\\mathrm{rot}} $$\n代入给定的 $T_{\\mathrm{rot}}$ 值：\n$$ T_{\\mathrm{eff},2} = \\frac{1}{8} \\times 0.28\\ \\mathrm{s} = 0.035\\ \\mathrm{s} $$\n四舍五入到四位有效数字，结果是 $0.03500\\ \\mathrm{s}$。\n\n最终答案分别是为单节段和双节段重建计算出的时间分辨率。\n对于单节段：$T_{\\mathrm{eff},1} = 0.07000\\ \\mathrm{s}$。\n对于双节段：$T_{\\mathrm{eff},2} = 0.03500\\ \\mathrm{s}$。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.07000  0.03500\n\\end{pmatrix}\n}\n$$", "id": "4902698"}, {"introduction": "在临床实践中，获取具有诊断价值的图像需要在图像质量和患者辐射剂量之间进行精妙的权衡。本练习深入探讨了图像噪声、层厚和与剂量直接相关的管电流时间积（$mAs$）三者之间的核心制约关系。通过计算在改变层厚时，为维持恒定对比噪声比（$CNR$）所需的$mAs$ [@problem_id:4902682]，您将掌握CT扫描方案优化的一个基本原则，这对于日常临床应用至关重要。", "problem": "一台多排计算机断层扫描 (CT) 扫描仪用于检测一个低对比度肝脏病变。扫描方案在量子噪声限制条件下运行，管电压、视野、重建核、探测器配置和螺距固定。假设电子噪声可忽略不计，不同方案间的患者衰减和射线束滤波保持不变，并且病变在轴向上充分延伸，因此当层厚改变时，部分容积效应不会改变其对比度。对比度噪声比 (CNR) 定义为 $ \\mathrm{CNR} = \\dfrac{|S_{\\text{lesion}} - S_{\\text{background}}|}{\\sigma} $，其中 $ \\sigma $ 是以亨斯菲尔德单位计量的噪声标准差。根据光子计数统计可知，噪声标准差 $ \\sigma $ 与对每个图像体素有贡献的探测光子数的平方根成反比，并且当所有其他因素保持固定时，探测到的光子数与管电流时间积 $ \\mathrm{mAs} $ 和重建层厚 $ T $ 成正比。\n\n在层厚为 $ T = 5\\,\\mathrm{mm} $、管电流时间积为 $ 180\\,\\mathrm{mAs} $ 的条件下，测得该病变的 $ \\mathrm{CNR} $ 恰好为 $ 3 $。然后将层厚减小到 $ T = 2\\,\\mathrm{mm} $，同时保持所有其他条件不变。\n\n仅使用上述原理，确定在 $ T = 2\\,\\mathrm{mm} $ 时，为维持 $ \\mathrm{CNR} \\geq 3 $ 所需的最小 $ \\mathrm{mAs} $。以 $ \\mathrm{mAs} $ 为单位表示最终答案，并四舍五入到三位有效数字。", "solution": "用户需要根据多排计算机断层扫描 (CT) 的原理解决一个问题。\n\n### 步骤 1：问题验证\n\n**1. 提取已知条件：**\n- **系统：** 多排计算机断层扫描 (CT) 扫描仪。\n- **应用：** 检测低对比度肝脏病变。\n- **操作条件：** 量子噪声限制，电子噪声可忽略。\n- **固定参数：** 管电压、视野、重建核、探测器配置、螺距、患者衰减、射线束滤波。\n- **假设：** 由于病变在轴向上有足够的延伸（无部分容积效应），对比度（由信号差 $|S_{\\text{lesion}} - S_{\\text{background}}|$ 表示）不因层厚变化而改变。\n- **CNR 的定义：** $\\mathrm{CNR} = \\dfrac{|S_{\\text{lesion}} - S_{\\text{background}}|}{\\sigma}$，其中 $\\sigma$ 是噪声标准差。\n- **噪声标度定律：** 噪声标准差 $\\sigma$ 与每个体素中探测到的光子数 ($N$) 的平方根成反比，即 $\\sigma \\propto \\frac{1}{\\sqrt{N}}$。\n- **光子计数标度定律：** 探测到的光子数 $N$ 与管电流时间积 ($\\mathrm{mAs}$) 和重建层厚 ($T$) 成正比，即 $N \\propto \\mathrm{mAs} \\cdot T$。\n- **方案 1 (初始)：** 层厚 $T_1 = 5\\,\\mathrm{mm}$，管电流时间积 $\\mathrm{mAs}_1 = 180\\,\\mathrm{mAs}$，测得的对比度噪声比 $\\mathrm{CNR}_1 = 3$。\n- **方案 2 (新)：** 层厚 $T_2 = 2\\,\\mathrm{mm}$。\n- **目标：** 确定方案 2 达到 $\\mathrm{CNR}_2 \\geq 3$ 所需的最小 $\\mathrm{mAs}$（记为 $\\mathrm{mAs}_2$）。最终答案应四舍五入到三位有效数字。\n\n**2. 使用提取的已知条件进行验证：**\n- **科学依据：** 该问题基于 CT 成像物理学中公认的原理。CNR 的定义、光子噪声的泊松统计（$\\sigma \\propto 1/\\sqrt{N}$）以及光子数对 mAs 和层厚的依赖关系（$N \\propto \\mathrm{mAs} \\cdot T$）都是标准且正确的。\n- **适定性：** 问题定义清晰，提供了找到唯一解所需的所有必要参数和关系。\n- **客观性：** 语言技术性强、精确，且没有主观成分。\n- **完整性：** 问题是自洽的。诸如无部分容积效应等假设被明确陈述，并且对于使问题可解至关重要。\n- **真实性：** 给定的层厚、mAs 和 CNR 值在临床上是符合实际的。\n\n**3. 结论与行动：**\n该问题被判定为 **有效**。这是一个精心设计的物理问题，旨在测试对 CT 成像基本概念的理解。将提供完整的解答。\n\n### 步骤 2：求解推导\n\n该问题要求我们找到在新层厚 ($T_2$) 下，为维持由对比度噪声比 (CNR) 衡量的特定图像质量水平所需的管电流时间积 ($\\mathrm{mAs}_2$)。\n\n对比度噪声比的定义为：\n$$\n\\mathrm{CNR} = \\frac{|S_{\\text{lesion}} - S_{\\text{background}}|}{\\sigma}\n$$\n设信号差为 $\\Delta S = |S_{\\text{lesion}} - S_{\\text{background}}|$。问题陈述，由于病变的大小，部分容积效应可忽略不计。这意味着信号差 $\\Delta S$ 是一个常数，在两种方案之间不发生改变。因此，CNR 仅是噪声标准差 $\\sigma$ 的函数：\n$$\n\\mathrm{CNR} \\propto \\frac{1}{\\sigma}\n$$\n问题指明系统是量子噪声限制的。在此条件下，噪声标准差 $\\sigma$ 由光子计数统计（泊松统计）决定，并与每个体素探测到的光子数 $N$ 的平方根成反比：\n$$\n\\sigma \\propto \\frac{1}{\\sqrt{N}}\n$$\n将此关系代入 CNR 的表达式，我们发现 CNR 与光子数的平方根成正比：\n$$\n\\mathrm{CNR} \\propto \\frac{1}{(1/\\sqrt{N})} \\implies \\mathrm{CNR} \\propto \\sqrt{N}\n$$\n问题进一步说明，探测到的光子数 $N$ 与管电流时间积 $\\mathrm{mAs}$ 和重建层厚 $T$ 均成正比：\n$$\nN \\propto \\mathrm{mAs} \\cdot T\n$$\n结合这些正比关系，我们可以建立 CNR、mAs 和层厚 $T$ 之间的基本关系：\n$$\n\\mathrm{CNR} \\propto \\sqrt{\\mathrm{mAs} \\cdot T}\n$$\n这可以写成一个包含比例常数 $k$ 的方程，该常数囊括了所有其他固定的扫描参数（管电压、患者尺寸等）：\n$$\n\\mathrm{CNR} = k \\sqrt{\\mathrm{mAs} \\cdot T}\n$$\n目标是找到在新层厚 $T_2$ 下维持 $\\mathrm{CNR}_2 \\geq 3$ 所需的最小 $\\mathrm{mAs}_2$。最小的 mAs 将对应于 $\\mathrm{CNR}_2 = 3$ 的情况。由于初始方案同样有 $\\mathrm{CNR}_1 = 3$，我们实际上是在寻找保持 CNR 不变的条件，即 $\\mathrm{CNR}_1 = \\mathrm{CNR}_2$。\n\n对两种方案使用我们推导出的关系：\n$$\n\\mathrm{CNR}_1 = k \\sqrt{\\mathrm{mAs}_1 \\cdot T_1}\n$$\n$$\n\\mathrm{CNR}_2 = k \\sqrt{\\mathrm{mAs}_2 \\cdot T_2}\n$$\n设 $\\mathrm{CNR}_1 = \\mathrm{CNR}_2$：\n$$\nk \\sqrt{\\mathrm{mAs}_1 \\cdot T_1} = k \\sqrt{\\mathrm{mAs}_2 \\cdot T_2}\n$$\n常数 $k$ 被消去。将方程两边平方，得到一个简单的关系：\n$$\n\\mathrm{mAs}_1 \\cdot T_1 = \\mathrm{mAs}_2 \\cdot T_2\n$$\n这个方程表明，要维持一个恒定的噪声水平（从而维持一个恒定的 CNR），mAs 和层厚的乘积必须保持不变。现在我们可以求解所需的 $\\mathrm{mAs}_2$：\n$$\n\\mathrm{mAs}_2 = \\mathrm{mAs}_1 \\cdot \\frac{T_1}{T_2}\n$$\n我们已知以下数值：\n- $\\mathrm{mAs}_1 = 180\\,\\mathrm{mAs}$\n- $T_1 = 5\\,\\mathrm{mm}$\n- $T_2 = 2\\,\\mathrm{mm}$\n\n将这些值代入方程：\n$$\n\\mathrm{mAs}_2 = 180 \\cdot \\frac{5}{2} = 180 \\cdot 2.5\n$$\n$$\n\\mathrm{mAs}_2 = 450\\,\\mathrm{mAs}\n$$\n结果是一个精确整数 $450$。问题要求答案四舍五入到三位有效数字。数字 $450$ 可以表示为 $4.50 \\times 10^2$ 以明确显示三位有效数字。", "answer": "$$\n\\boxed{4.50 \\times 10^{2}}\n$$", "id": "4902682"}]}
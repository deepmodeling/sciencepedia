{"hands_on_practices": [{"introduction": "筛查工具的价值不仅取决于其理论上的准确性（如灵敏度$Se$和特异度$Sp$），更关键的是在实际应用中的预测能力。一个阳性结果到底有多大可能性是真正的阳性（即阳性预测值，$PPV$）？本练习将指导你基于筛查工具的基本特性和人群患病率$\\pi$来计算阳性预测值（$PPV$）和阴性预测值（$NPV$），并理解这些指标如何直接影响诊所的实际工作流程，例如，决定了需要转介给社会服务资源的患者数量[@problem_id:4396192]。", "problem": "一个社区健康中心使用一种通过电子健康记录（EHR）管理的简短、有效的工具，将针对食物不安全的标准化社会风险筛查整合到常规临床护理中。该工具在诊所人群中的性能表现为：灵敏度 $Se = 0.80$，特异度 $Sp = 0.90$，以及根据近期社区健康需求评估估计得出的该状况的患病率 $\\pi = 0.20$。诊所的政策是为每一个筛查阳性的结果自动生成食物援助资源的转介，该诊所每周接诊 $500$ 名不同的成年患者。\n\n从灵敏度 $Se = P(T^{+} \\mid D)$ 和特异度 $Sp = P(T^{-} \\mid \\bar{D})$ 的定义出发，其中 $D$ 表示存在食物不安全，$T^{+}$ 表示阳性测试（筛查）结果，请使用贝叶斯定理和全概率定律，推导出阳性预测值（PPV）$P(D \\mid T^{+})$ 和阴性预测值（NPV）$P(\\bar{D} \\mid T^{-})$ 关于 $Se$、$Sp$ 和 $\\pi$ 的表达式。然后，根据给定的 $Se$、$Sp$ 和 $\\pi$ 计算 $PPV$ 和 $NPV$ 的数值。将 $PPV$ 和 $NPV$ 表示为小数，并四舍五入至四位有效数字。\n\n最后，计算预期的每周转介负荷，其定义为在“转介所有筛查阳性者”的政策下，每周将接受转介的预期患者人数。以每周患者人数的形式报告此转介负荷。请按 $PPV$、$NPV$、预期转介人数的顺序提供您的最终答案。", "solution": "在尝试解答之前，对问题陈述的有效性进行评估。\n\n### 第1步：提取已知条件\n- 灵敏度：$Se = P(T^{+} \\mid D) = 0.80$\n- 特异度：$Sp = P(T^{-} \\mid \\bar{D}) = 0.90$\n- 食物不安全的患病率：$\\pi = P(D) = 0.20$\n- $D$：患者存在食物不安全的事件。\n- $\\bar{D}$：患者不存在食物不安全的事件。\n- $T^{+}$：测试结果为阳性的事件。\n- $T^{-}$：测试结果为阴性的事件。\n- 每周独立成年患者总数：$N = 500$\n- 政策：为每个阳性筛查结果（$T^{+}$）生成转介。\n\n### 第2步：使用提取的已知条件进行验证\n该问题具有科学依据、提法恰当且客观。它基于概率论的基本原理（贝叶斯定理、全概率定律）和标准的流行病学指标（灵敏度、特异度、患病率、预测值）。问题是自洽的，提供了所有必需的数据和定义。数值（$Se=0.80$, $Sp=0.90$, $\\pi=0.20$）对于公共卫生筛查场景是现实的。问题要求进行具体的、可形式化的推导和计算，并且不存在逻辑矛盾或含糊之处。\n\n### 第3步：结论与行动\n问题被判定为**有效**。将提供完整解答。\n\n### 预测值的推导\n\n阳性预测值（$PPV$）是指测试结果为阳性的患者确实患有该状况的概率，定义为 $P(D \\mid T^{+})$。使用贝叶斯定理：\n$$PPV = P(D \\mid T^{+}) = \\frac{P(T^{+} \\mid D) P(D)}{P(T^{+})}$$\n分子包含给定项：$P(T^{+} \\mid D) = Se$ 和 $P(D) = \\pi$。\n分母 $P(T^{+})$ 是测试结果为阳性的总概率。我们使用全概率定律展开此项：\n$$P(T^{+}) = P(T^{+} \\mid D) P(D) + P(T^{+} \\mid \\bar{D}) P(\\bar{D})$$\n我们可以识别此展开式中的各个组成部分：\n- $P(D) = \\pi$，所以 $P(\\bar{D}) = 1 - P(D) = 1 - \\pi$。\n- $P(T^{+} \\mid D) = Se$。\n- $P(T^{+} \\mid \\bar{D})$ 是假阳性率。它是特异度 $Sp = P(T^{-} \\mid \\bar{D})$ 的补集。因此，$P(T^{+} \\mid \\bar{D}) = 1 - P(T^{-} \\mid \\bar{D}) = 1 - Sp$。\n\n将这些代入 $P(T^{+})$ 的表达式中：\n$$P(T^{+}) = (Se \\cdot \\pi) + ((1 - Sp) \\cdot (1 - \\pi))$$\n最后，将此代回 $PPV$ 的贝叶斯定理表达式中，得到通用公式：\n$$PPV = \\frac{Se \\cdot \\pi}{Se \\cdot \\pi + (1 - Sp)(1 - \\pi)}$$\n\n阴性预测值（$NPV$）是指测试结果为阴性的患者确实未患该状况的概率，定义为 $P(\\bar{D} \\mid T^{-})$。使用贝叶斯定理：\n$$NPV = P(\\bar{D} \\mid T^{-}) = \\frac{P(T^{-} \\mid \\bar{D}) P(\\bar{D})}{P(T^{-})}$$\n分子包含给定项：$P(T^{-} \\mid \\bar{D}) = Sp$ 和 $P(\\bar{D}) = 1 - \\pi$。\n分母 $P(T^{-})$ 是测试结果为阴性的总概率。我们使用全概率定律展开此项：\n$$P(T^{-}) = P(T^{-} \\mid D) P(D) + P(T^{-} \\mid \\bar{D}) P(\\bar{D})$$\n我们可以识别此展开式中的各个组成部分：\n- $P(D) = \\pi$ 和 $P(\\bar{D}) = 1 - \\pi$。\n- $P(T^{-} \\mid \\bar{D}) = Sp$。\n- $P(T^{-} \\mid D)$ 是假阴性率。它是灵敏度 $Se = P(T^{+} \\mid D)$ 的补集。因此，$P(T^{-} \\mid D) = 1 - P(T^{+} \\mid D) = 1 - Se$。\n\n将这些代入 $P(T^{-})$ 的表达式中：\n$$P(T^{-}) = ((1 - Se) \\cdot \\pi) + (Sp \\cdot (1 - \\pi))$$\n最后，将此代回 $NPV$ 的贝叶斯定理表达式中，得到通用公式：\n$$NPV = \\frac{Sp(1 - \\pi)}{(1 - Se)\\pi + Sp(1 - \\pi)}$$\n\n### PPV 和 NPV 的数值计算\n使用给定值 $Se = 0.80$，$Sp = 0.90$ 和 $\\pi = 0.20$：\n\n对于 $PPV$：\n$$PPV = \\frac{0.80 \\cdot 0.20}{(0.80 \\cdot 0.20) + (1 - 0.90)(1 - 0.20)} = \\frac{0.16}{0.16 + (0.10)(0.80)} = \\frac{0.16}{0.16 + 0.08} = \\frac{0.16}{0.24} = \\frac{2}{3}$$\n作为小数并四舍五入至四位有效数字，$PPV \\approx 0.6667$。\n\n对于 $NPV$：\n$$NPV = \\frac{0.90(1 - 0.20)}{(1 - 0.80)(0.20) + 0.90(1 - 0.20)} = \\frac{0.90 \\cdot 0.80}{(0.20)(0.20) + 0.90(0.80)} = \\frac{0.72}{0.04 + 0.72} = \\frac{0.72}{0.76} = \\frac{18}{19}$$\n作为小数并四舍五入至四位有效数字，$NPV \\approx 0.9474$。\n\n### 预期每周转介负荷的计算\n诊所的政策是转介所有筛查阳性的患者。预期的每周转介负荷是每周的患者总数 $N$ 乘以测试结果为阳性的概率 $P(T^{+})$。\n预期转介数 $= N \\cdot P(T^{+})$\n我们已经推导并计算了 $P(T^{+})$：\n$$P(T^{+}) = (Se \\cdot \\pi) + ((1 - Sp) \\cdot (1 - \\pi)) = 0.24$$\n每周有 $N = 500$ 名患者：\n预期转介数 $= 500 \\cdot 0.24 = 120$\n预期的每周转介负荷是 $120$ 名患者。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.6667  0.9474  120\n\\end{pmatrix}\n}\n$$", "id": "4396192"}, {"introduction": "随着技术发展，许多卫生系统开始采用算法预测模型来大规模识别社会风险，这比传统筛查方法更高效。然而，这些强大的工具也可能引入或放大系统性偏见，导致医疗服务的不公平。本练习旨在挑战你同时像数据科学家和临床医生一样思考，在真实的临床情境中识别不同类型的算法偏见，例如标签偏见、代表性偏见和部署偏见[@problem_id:4396139]。掌握这些概念对于在医疗保健领域负责任地部署人工智能技术至关重要。", "problem": "一个卫生系统计划将社会风险筛查模型整合到常规临床护理中，以识别存在食品不安全和住房不稳定风险的患者。该模型以常规收集的数据（人口统计信息、既往就诊记录、语言偏好和先前的社会需求评估）作为输入，并输出社会风险的预测概率 $\\hat{p}$。领导层要求数据科学团队解释什么是算法偏见，并对几种现实情况下的偏见来源进行分类。\n\n考虑在社会风险预测的临床实施中的以下情况：\n\n情景一：在模型开发过程中，为了监督模型，团队使用国际疾病分类编码和电子健康记录（EHR；Electronic Health Record）中的结构化字段作为存在社会需求的目标，尽管许多社会需求仅记录在自由文本注释中或根本没有记录。众所周知，对于就医机会有限和讲非英语语言的患者来说，记录不足的情况更为常见。\n\n情景二：训练集完全来自一个大型城市学术医疗中心。在该模型将要使用的地区，一半的患者在社区诊所接受治疗，这些诊所服务的未参保和非英语患者的比例高于该学术中心。与部署人群相比，训练队列中非英语使用者和未参保个体的代表性不足。\n\n情景三：该模型在住院环境中进行了调整，以在固定阈值下最大化敏感性，然后以相同的决策阈值部署在初级保健诊所。在初级保健中，有记录的社会需求的普遍性低于住院护理，并且初级保健的护理团队有不同的工作流程和资源限制。\n\n哪个选项既正确定义了社会风险预测中的算法偏见，又分别将情景一、情景二和情景三正确地分类为标签偏见、代表性偏见和部署偏见？\n\nA. 算法偏见是预测性能中的任何随机误差。情景一是代表性偏见，情景二是标签偏见，情景三是部署偏见。\n\nB. 算法偏见是一种系统性的误差模式，导致不同群体之间的模型性能或决策不公平。情景一是标签偏见，情景二是代表性偏见，情景三是部署偏见。\n\nC. 算法偏见是开发人员在代码中固化的有意歧视。情景一是部署偏见，情景二是代表性偏见，情景三是标签偏见。\n\nD. 算法偏见仅仅是不同群体之间模型校准的差异。情景一是标签偏见，情景二是选择偏见，情景三是部署偏见。\n\nE. 算法偏见通过在更多数据上重新训练来消除。情景一是测量偏见，情景二是代表性偏见，情景三是数据泄漏。", "solution": "该问题要求对涉及临床环境中社会风险预测模型的几种情景进行批判性评估。任务是确定哪个选项正确定义了算法偏见，并正确分类了三个给定情景中各自的偏见来源。\n\n### 问题验证\n\n**步骤 1：提取已知信息**\n-   **背景：** 一个卫生系统正在实施一个社会风险筛查模型。\n-   **模型输入：** 常规收集的数据（人口统计信息、既往就诊记录、语言偏好和先前的社会需求评估）。\n-   **模型输出：** 社会风险的预测概率，表示为 $\\hat{p}$（例如，食品不安全、住房不稳定）。\n-   **情景一：** 模型的监督变量（社会需求的真实标签）是使用结构化电子健康记录数据（国际疾病分类编码、结构化字段）定义的。然而，许多社会需求仅记录在自由文本注释中或根本没有记录。明确指出，对于就医机会有限和讲非英语语言的患者来说，这种记录不足的情况更为常见。\n-   **情景二：** 模型在来自单一大型城市学术医疗中心的数据上进行训练。预期的部署人群包括社区诊所，这些诊所服务的未参保和非英语患者的比例更高。与部署人群相比，训练数据中这些特定群体的代表性不足。\n-   **情景三：** 模型在住院环境中进行调整，以在固定阈值下最大化敏感性。然后以相同的阈值部署在初级保健诊所。有记录的社会需求在初级保健环境中的普遍性较低，并且临床工作流程和可用资源也不同。\n-   **问题：** 确定哪个选项提供了算法偏见的正确定义，并将情景一、情景二和情景三分别正确地分类为标签偏见、代表性偏见和部署偏见。\n\n**步骤 2：使用提取的已知信息进行验证**\n根据验证标准对问题陈述进行评估。\n-   **科学依据：** 该问题牢固地植根于已确立的数据科学领域，特别是处理机器学习中的公平性和伦理问题。算法偏见及其子类型（标签偏见、代表性偏见、部署偏见）的概念是该领域的标准术语。临床应用是现实的，并且是当前研究和实施的重要领域。该问题具有科学合理性。\n-   **定义明确：** 该问题提供了三个独特、描述清晰的情景，并要求根据提供的定义对其进行分类。结构清晰，通过应用该领域的标准定义可以得出确定的答案。\n-   **客观性：** 情景使用精确、客观的语言进行描述。对患者人群和数据源的描述是问题背景下的事实陈述，不含主观或基于意见的主张。\n\n**缺陷清单：**\n1.  **科学或事实不健全：** 无。这些概念是标准的。\n2.  **无法形式化或不相关：** 无。这些情景是应用机器学习中定义明确问题的具体例子。\n3.  **不完整或矛盾的设置：** 无。每个情景都是独立的，并为分类提供了足够的信息。\n4.  **不切实际或不可行：** 无。这些是在部署临床预测模型时非常现实的挑战。\n5.  **问题不适定或结构不良：** 无。\n6.  **伪深刻、琐碎或同义反复：** 无。该问题需要应用特定的、非平凡的知识。\n7.  **无法通过科学方法验证：** 无。这些分类可以根据机器学习文献中的正式定义进行验证。\n\n**步骤 3：结论与行动**\n问题陈述有效。我现在将进行完整的解答。\n\n### 推导与选项分析\n\n首先，让我们确定机器学习公平领域中关键概念的正式定义。\n\n-   **算法偏见 (Algorithmic Bias)：** 指计算机系统中系统性的、可重复的错误，这些错误会造成不公平的结果，例如偏袒任意一个用户群体而非其他群体。它不是随机误差，而是一种持续的、有偏的结果模式，可能导致不公平或歧视性的决策。\n-   **标签偏见 (Label Bias)（或测量偏见 (Measurement Bias)）：** 当用于标记真实情况（ground truth）的数据是目标实际结果的有缺陷或有偏见的代理时，就会发生这种偏见。如果标签的质量或准确性在不同群体之间存在系统性差异，模型将学习到这些系统性的不准确性。在情景一中，社会需求的“标签”基于结构化的电子健康记录字段。问题陈述指出，这种标记方法系统性地低估了非英语使用者和就医机会有限者的社会需求。因此，标签本身对这些群体存在偏见。这是一个典型的**标签偏见**案例。\n-   **代表性偏见 (Representation Bias)（或抽样偏见 (Sampling Bias)）：** 当训练数据集不能准确反映模型将被部署的目标人群时，就会产生这种偏见。如果某些子群体在训练数据中代表性不足或过高，模型可能无法很好地泛化到这些子群体，导致对他们的性能较差。在情景二中，训练数据来自一个学术医疗中心，而部署人群还包括社区诊所，其患者人口构成不同（更多的未参保者、更多的非英语使用者）。训练数据“与部署人群相比，非英语使用者和未参保个体的代表性不足”。这就是**代表性偏见**的定义。\n-   **部署偏见 (Deployment Bias)（或实施偏见 (Implementation Bias)）：** 当模型开发的背景与部署的背景不匹配时，就会发生这种偏见。这可能涉及人群特征的变化（人群漂移）、模型预测使用方式的差异，或基础数据生成过程的转变。在情景三中，模型是为住院环境（社会需求普遍性高）开发和调整的，但却部署在初级保健环境（普遍性低）。结果的普遍性是一个关键参数。对于给定的敏感性和特异性，普遍性的变化会极大地改变阳性预测值（$$PPV = \\frac{\\text{sensitivity} \\times \\text{prevalence}}{\\text{sensitivity} \\times \\text{prevalence} + (1 - \\text{specificity}) \\times (1 - \\text{prevalence})}$$）。在一个低普遍性环境中使用为高普遍性环境优化的阈值，可能会导致非常低的PPV和大量的假阳性，从而给初级保健团队不同的工作流程和资源限制带来过重负担。这种开发与部署背景之间的不匹配是**部署偏见**的典型例子。\n\n基于此分析，正确的分类是：\n-   情景一：标签偏见\n-   情景二：代表性偏见\n-   情景三：部署偏见\n\n现在，我们评估每个选项。\n\n**A. 算法偏见是预测性能中的任何随机误差。情景一是代表性偏见，情景二是标签偏见，情景三是部署偏见。**\n-   **偏见的定义：** 算法偏见是“任何随机误差”的说法从根本上是**不正确**的。偏见是系统性的，不是随机的。随机的、不可约的误差几乎是所有统计模型的组成部分，与偏见是不同的。\n-   **分类：** 该分类交换了情景一和情景二的标签。情景一是标签偏见，不是代表性偏见。情景二是代表性偏见，不是标签偏见。这是**不正确**的。\n-   **结论：** **不正确**。\n\n**B. 算法偏见是一种系统性的误差模式，导致不同群体之间的模型性能或决策不公平。情景一是标签偏见，情景二是代表性偏见，情景三是部署偏见。**\n-   **偏见的定义：** 这个定义是**正确**的。它准确地抓住了算法偏见的本质，即一种导致不公平结果的系统性现象，而非随机现象。\n-   **分类：** 对所有三个情景的分类——情景一为标签偏见，情景二为代表性偏见，情景三为部署偏见——都是**正确**的，这与上述的原则性分析一致。\n-   **结论：** **正确**。\n\n**C. 算法偏见是开发人员在代码中固化的有意歧视。情景一是部署偏见，情景二是代表性偏见，情景三是标签偏见。**\n-   **偏见的定义：** 这个定义是**不正确**的。虽然有意歧视是偏见的一个可能且恶劣的来源，但绝大多数算法偏见是无意的，源于有缺陷的数据、不恰当的模型选择或部署中的不匹配。将其定义为纯粹是故意的，是一种严重的错误描述。\n-   **分类：** 该分类将情景一错误地识别为部署偏见，将情景三错误地识别为标签偏见。这是**不正确**的。\n-   **结论：** **不正确**。\n\n**D. 算法偏见仅仅是不同群体之间模型校准的差异。情景一是标签偏见，情景二是选择偏见，情景三是部署偏见。**\n-   **偏见的定义：** 偏见“仅仅是不同群体之间模型校准的差异”的定义是**不正确**的。校准不佳是偏见的一个重要表现，但不是唯一的表现。即使在一个校准良好的模型中，偏见也可以表现为群体间在准确率、假阳性率、假阴性率和其他性能指标上的差异。该定义过于狭隘。\n-   **分类：** 分类大部分是正确的。“选择偏见”是通常与代表性偏见同义使用的术语。情景一和三的分类是正确的。然而，有缺陷的偏见定义使得整个选项不正确。\n-   **结论：** **不正确**。\n\n**E. 算法偏见通过在更多数据上重新训练来消除。情景一是测量偏见，情景二是代表性偏见，情景三是数据泄漏。**\n-   **偏见的定义：** 这不是偏见的定义，而是对其缓解措施的一种过于简单化且通常不正确的陈述。仅仅添加更多同类数据可能会放大现有偏见。虽然更多*有代表性*的数据可以解决代表性偏见，但它不能修复标签偏见或部署偏见。这个陈述是**不正确**的。\n-   **分类：** 将情景一分类为“测量偏见”（标签偏见的同义词）和情景二分类为“代表性偏见”是正确的。然而，将情景三分类为“数据泄漏”是**不正确**的。数据泄漏指的是在模型开发过程中不恰当地使用了训练数据之外的信息，导致性能指标虚高。情景三描述的是开发环境和部署环境之间的不匹配，这是部署偏见，而不是数据泄漏。\n-   **结论：** **不正确**。\n\n只有选项B同时提供了对算法偏见的准确定义和对所有三个情景的正确分类。", "answer": "$$\\boxed{B}$$", "id": "4396139"}, {"introduction": "成功地将社会风险筛查融入临床护理，不仅需要准确识别有需求的患者，还需要确保卫生系统有能力应对这些需求。本练习将运用排队论——一种来自运筹学的强大工具——来为转诊至社工的患者流建立数学模型。通过计算患者的平均等待时间$W$，你将学会如何定量评估一个临床工作流程的可持续性，并预测当转诊量增加时可能对系统造成的影响[@problem_id:4396144]。", "problem": "一家初级保健诊所已将标准化的社会风险筛查纳入常规诊疗中。有已识别社会需求的患者会被转介给现场的社会工作者，由其处理食物无保障、住房不稳定或交通障碍等需求。假设转介的到达是一个速率为 $\\lambda$（每小时）的泊松过程，每次转介所需的服务时间服从速率为 $\\mu$（每小时）的指数分布，有一名社会工作者按先到先得的原则为转介提供服务，且系统在 $\\lambda  \\mu$ 的稳态下运行。\n\n仅使用稳态生灭平衡和利特尔定律，从第一性原理出发，推导出一个转介在系统中的预期总时间 $W$（即等待加服务时间）的表达式，该表达式是 $\\lambda$ 和 $\\mu$ 的函数。\n\n然后，对于一家诊所，其中 $\\lambda = 5.4$ 每小时，$\\mu = 6.75$ 每小时，计算该表达式的值。用分钟表示最终时间，并将答案四舍五入到四位有效数字。", "solution": "该问题描述了一个排队系统，可以建模为M/M/1排队模型。到达是马尔可夫的（M），遵循速率为 $\\lambda$ 的泊松过程；服务时间是马尔可夫的（M），遵循速率为 $\\mu$ 的指数分布；且有 $1$ 个服务台。系统被假定处于稳态，这要求交通强度 $\\rho = \\lambda/\\mu$ 小于 $1$。问题陈述给出了条件 $\\lambda  \\mu$，这确保了这一点。\n\n我们的目标是使用两个基本原理：生灭过程的稳态平衡方程和利特尔定律，来推导转介在系统中的预期总时间 $W$。\n\n设 $n$ 为系统中的转介数量（包括在队列中等待或正在接受服务）。系统在任意时间 $t$ 的状态由 $n(t)$ 给出。在稳态下，我们关心的是概率分布 $P_n$，即系统中存在 $n$ 个转介的长期概率。状态空间是非负整数集合 $\\{0, 1, 2, \\dots\\}$。\n\n对于一个生灭过程，转移速率如下：\n- 出生率（新转介的到达）：对于所有 $n \\ge 0$，$\\lambda_n = \\lambda$。\n- 死亡率（服务完成）：对于所有 $n \\ge 1$，$\\mu_n = \\mu$，且 $\\mu_0 = 0$。\n\n稳态平衡方程指出，对于每个状态 $n$，进入该状态的速率必须等于离开该状态的速率。\n\n对于状态 $n=0$：\n系统以速率 $\\mu P_1$ 从状态1进入状态0。它以速率 $\\lambda P_0$ 从状态0离开进入状态1。\n$$ \\mu P_1 = \\lambda P_0 $$\n这得到 $P_1 = \\frac{\\lambda}{\\mu} P_0$。我们定义交通强度 $\\rho = \\frac{\\lambda}{\\mu}$。那么，$P_1 = \\rho P_0$。\n\n对于任意状态 $n \\ge 1$：\n系统可以从状态 $n-1$（一次到达）或从状态 $n+1$（一次服务完成）进入状态 $n$。进入状态 $n$ 的总速率是 $\\lambda P_{n-1} + \\mu P_{n+1}$。系统可以离开状态 $n$ 进入状态 $n-1$（一次服务完成）或进入状态 $n+1$（一次到达）。离开状态 $n$ 的总速率是 $(\\lambda + \\mu) P_n$。\n平衡方程为：\n$$ \\lambda P_{n-1} + \\mu P_{n+1} = (\\lambda + \\mu) P_n $$\n我们可以用这些方程来找到 $P_n$ 关于 $P_0$ 的通式。我们已经有 $P_1 = \\rho P_0$。\n当 $n=1$ 时，平衡方程为 $\\lambda P_0 + \\mu P_2 = (\\lambda + \\mu) P_1$。\n代入 $P_1 = \\frac{\\lambda}{\\mu} P_0$：\n$$ \\lambda P_0 + \\mu P_2 = (\\lambda + \\mu) \\frac{\\lambda}{\\mu} P_0 $$\n$$ \\mu P_2 = \\frac{\\lambda(\\lambda+\\mu)}{\\mu} P_0 - \\lambda P_0 = \\left( \\frac{\\lambda^2+\\lambda\\mu}{\\mu} - \\frac{\\lambda\\mu}{\\mu} \\right) P_0 = \\frac{\\lambda^2}{\\mu} P_0 $$\n$$ P_2 = \\frac{\\lambda^2}{\\mu^2} P_0 = \\rho^2 P_0 $$\n通过归纳法，可以证明通解为对于所有 $n \\ge 0$，$P_n = \\rho^n P_0$。\n\n为了求出 $P_0$，我们使用归一化条件，即所有概率之和必须为 $1$：\n$$ \\sum_{n=0}^{\\infty} P_n = 1 $$\n$$ \\sum_{n=0}^{\\infty} \\rho^n P_0 = P_0 \\sum_{n=0}^{\\infty} \\rho^n = 1 $$\n这个和是一个几何级数。因为给定 $\\lambda  \\mu$，所以 $\\rho  1$，级数收敛：\n$$ \\sum_{n=0}^{\\infty} \\rho^n = \\frac{1}{1-\\rho} $$\n将此代入归一化方程：\n$$ P_0 \\left( \\frac{1}{1-\\rho} \\right) = 1 \\implies P_0 = 1-\\rho $$\n因此，系统中存在 $n$ 个转介的稳态概率为：\n$$ P_n = (1-\\rho)\\rho^n, \\quad n=0, 1, 2, \\dots $$\n\n接下来，我们计算系统中的预期转介数，记为 $L$。这是分布 $P_n$ 的期望值：\n$$ L = E[n] = \\sum_{n=0}^{\\infty} n P_n = \\sum_{n=0}^{\\infty} n (1-\\rho)\\rho^n $$\n$$ L = (1-\\rho) \\sum_{n=0}^{\\infty} n \\rho^n = (1-\\rho) \\sum_{n=1}^{\\infty} n \\rho^n $$\n我们使用算术-几何级数求和的恒等式，对于 $|x|1$，有 $\\sum_{n=1}^{\\infty} n x^n = \\frac{x}{(1-x)^2}$。\n$$ L = (1-\\rho) \\left( \\frac{\\rho}{(1-\\rho)^2} \\right) = \\frac{\\rho}{1-\\rho} $$\n代入 $\\rho = \\lambda/\\mu$：\n$$ L = \\frac{\\lambda/\\mu}{1 - \\lambda/\\mu} = \\frac{\\lambda/\\mu}{(\\mu-\\lambda)/\\mu} = \\frac{\\lambda}{\\mu-\\lambda} $$\n这个关于 $L$ 的表达式仅通过稳态生灭平衡方程推导得出。\n\n最后，我们应用利特尔定律。利特尔定律指出，在一个稳定系统中，顾客的长期平均数量 $L$ 等于长期平均有效到达率 $\\lambda_{eff}$ 乘以顾客在系统中花费的平均时间 $W$。\n$$ L = \\lambda_{eff} W $$\n对于这个系统，没有转介被拒绝，因此有效到达率就是到达率，即 $\\lambda_{eff} = \\lambda$。\n$$ L = \\lambda W $$\n我们现在可以解出 $W$，即在系统中的预期总时间：\n$$ W = \\frac{L}{\\lambda} $$\n代入我们推导出的 $L$ 的表达式：\n$$ W = \\frac{1}{\\lambda} \\left( \\frac{\\lambda}{\\mu-\\lambda} \\right) = \\frac{1}{\\mu-\\lambda} $$\n这就是所要求的 $W$ 作为 $\\lambda$ 和 $\\mu$ 的函数的表达式，它是按照要求从第一性原理推导出来的。\n\n现在，我们为给定的诊所参数计算该表达式的值：\n到达率 $\\lambda = 5.4$ 每小时。\n服务率 $\\mu = 6.75$ 每小时。\n\n首先，我们确认稳态条件 $\\lambda  \\mu$ 得到满足：$5.4  6.75$，这是成立的。\n我们现在计算 $W$：\n$$ W = \\frac{1}{\\mu - \\lambda} = \\frac{1}{6.75 - 5.4} = \\frac{1}{1.35} \\text{ 小时} $$\n问题要求答案以分钟为单位。我们通过乘以 $60$ 将小时转换为分钟：\n$$ W_{\\text{分钟}} = \\frac{1}{1.35} \\times 60 = \\frac{60}{1.35} $$\n为简化计算：\n$$ W_{\\text{分钟}} = \\frac{60}{135/100} = \\frac{60 \\times 100}{135} = \\frac{6000}{135} $$\n将分子和分母除以它们的最大公约数，即 $45$：\n$6000 \\div 45 = (6000 \\div 5) \\div 9 = 1200 \\div 9 = 400/3$。\n$135 \\div 45 = 3$。\n所以，\n$$ W_{\\text{分钟}} = \\frac{400}{3} = 133.333\\dots \\text{ 分钟} $$\n让我重新检查一下计算。\n$$ \\frac{6000}{135} = \\frac{1200}{27} = \\frac{400}{9} $$\n啊，一个计算错误。$1200 \\div 9$ 是不正确的。$1200/3=400$, $27/3=9$。所以是 $\\frac{400}{9}$。\n$$ W_{\\text{分钟}} = \\frac{400}{9} = 44.444\\dots \\text{ 分钟} $$\n问题要求将答案四舍五入到四位有效数字。这个数字是 $44.444\\dots$。前四位有效数字是 $4$、$4$、$4$、$4$。第五位有效数字是 $4$，小于 $5$，所以我们向下取整（即截断）。\n结果是 $44.44$。", "answer": "$$\\boxed{44.44}$$", "id": "4396144"}]}
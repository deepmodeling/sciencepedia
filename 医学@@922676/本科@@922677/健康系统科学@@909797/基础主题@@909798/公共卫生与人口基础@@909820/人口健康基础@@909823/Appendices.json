{"hands_on_practices": [{"introduction": "在公共卫生领域，确定特定风险因素（如吸烟）对某种疾病（如慢性阻塞性肺病）的贡献度至关重要。这有助于我们制定优先策略并预测干预效果。本练习将引导你计算人群归因分数（PAF），这是一个量化风险因素在人群层面影响的关键指标，并应用它来估算控烟项目可能避免的住院人数。[@problem_id:4389005]", "problem": "一个中等规模的城市卫生系统追踪因慢性阻塞性肺疾病 (COPD) 的年入院人数。在该系统服务的成年人口中，当前吸烟的流行率为 $p_{\\text{current}} = 0.22$。来自队列研究的证据综合估计，吸烟者与非吸烟者相比，因COPD住院的相对风险 (RR) 为 $\\text{RR} = 2.8$。最近一年的COPD住院总数为 $H_{\\text{current}} = 5600$ 人次。该卫生系统实施了一项多方位的烟草控制计划，在一年内使吸烟流行率相对减少了 $25\\%$，因此新的流行率为 $p_{\\text{new}} = p_{\\text{current}} \\times (1 - 0.25)$。\n\n仅使用风险、相对风险和人群归因分值 (PAF) 的基本定义，按以下步骤进行：\n\n1. 推导一个关于因吸烟导致的COPD住院的人群归因分值 (PAF) 的表达式，该表达式应使用暴露流行率 $p$、相对风险 $\\text{RR}$ 和未暴露组基线风险来表示。然后，使用 $p_{\\text{current}}$ 和 $\\text{RR}$ 计算基线PAF的数值。\n\n2. 假设人群中COPD的年住院人数与人群的住院风险成正比，请使用 $H_{\\text{current}}$、$p_{\\text{current}}$、$p_{\\text{new}}$ 和 $\\text{RR}$ 估算干预后一年内避免的COPD入院人数。\n\n将人群归因分值 (PAF) 表示为小数，保留四位有效数字。将估算的避免入院人数表示为住院次数，保留三位有效数字。在答案的任何部分都不要使用百分号。", "solution": "第1部分：人群归因分值 (PAF) 的推导与计算。\n设 $p$ 为暴露（吸烟）的流行率，$R_1$ 为暴露组（吸烟者）的住院风险，$R_0$ 为未暴露组（非吸烟者）的风险。$R_0$ 是未暴露组的基线风险。总人群的总体风险 $R_{\\text{pop}}$ 是暴露和未暴露亚群风险的加权平均值：\n$$R_{\\text{pop}} = p \\cdot R_1 + (1-p) \\cdot R_0$$\n相对风险 ($\\text{RR}$) 定义为暴露组风险与未暴露组风险之比：\n$$\\text{RR} = \\frac{R_1}{R_0} \\implies R_1 = \\text{RR} \\cdot R_0$$\n将 $R_1$ 的表达式代入 $R_{\\text{pop}}$ 的方程，得到以基线风险 $R_0$、流行率 $p$ 和相对风险 $\\text{RR}$ 表示的人群风险：\n$$R_{\\text{pop}} = p \\cdot (\\text{RR} \\cdot R_0) + (1-p) \\cdot R_0 = R_0 (p \\cdot \\text{RR} + 1 - p) = R_0 (1 + p(\\text{RR}-1))$$\n人群归因分值 (PAF) 是总人群中可归因于该暴露因素的疾病比例。它被定义为如果消除该暴露因素，人群风险将发生的相应比例的降低：\n$$\\text{PAF} = \\frac{R_{\\text{pop}} - R_0}{R_{\\text{pop}}}$$\n这就得到了以人群风险和基线风险表示的 PAF 表达式。为了仅用 $p$ 和 $\\text{RR}$ 来表示 PAF，我们代入推导出的 $R_{\\text{pop}}$ 表达式：\n$$\\text{PAF} = \\frac{R_0(1 + p(\\text{RR}-1)) - R_0}{R_0(1 + p(\\text{RR}-1))}$$\n基线风险 $R_0$ 是分子和分母的公因子，因此可以消去：\n$$\\text{PAF} = \\frac{1 + p(\\text{RR}-1) - 1}{1 + p(\\text{RR}-1)} = \\frac{p(\\text{RR}-1)}{1 + p(\\text{RR}-1)}$$\n这是 PAF 的最终推导表达式。现在，我们使用基线数据计算其数值：$p_{\\text{current}} = 0.22$ 和 $\\text{RR} = 2.8$。\n$$\\text{PAF}_{\\text{current}} = \\frac{0.22 \\times (2.8 - 1)}{1 + 0.22 \\times (2.8 - 1)} = \\frac{0.22 \\times 1.8}{1 + 0.22 \\times 1.8} = \\frac{0.396}{1 + 0.396} = \\frac{0.396}{1.396}$$\n$$\\text{PAF}_{\\text{current}} \\approx 0.28366762...$$\n保留四位有效数字，基线 PAF 为 $0.2837$。\n\n第2部分：避免的住院人数估算。\n问题陈述，住院人数 $H$ 与人群风险 $R_{\\text{pop}}$ 成正比。假设总人口规模 $N$ 恒定，我们有 $H = N \\cdot R_{\\text{pop}}$。因此，干预后 ($H_{\\text{new}}$) 与干预前 ($H_{\\text{current}}$) 的住院人数之比等于相应人群风险之比：\n$$\\frac{H_{\\text{new}}}{H_{\\text{current}}} = \\frac{R_{\\text{pop, new}}}{R_{\\text{pop, current}}}$$\n使用表达式 $R_{\\text{pop}} = R_0(1 + p(\\text{RR}-1))$，风险之比为：\n$$\\frac{R_{\\text{pop, new}}}{R_{\\text{pop, current}}} = \\frac{R_0(1 + p_{\\text{new}}(\\text{RR}-1))}{R_0(1 + p_{\\text{current}}(\\text{RR}-1))} = \\frac{1 + p_{\\text{new}}(\\text{RR}-1)}{1 + p_{\\text{current}}(\\text{RR}-1)}$$\n避免的入院人数 $H_{\\text{averted}}$ 是当前入院人数与新入院人数之差：\n$$H_{\\text{averted}} = H_{\\text{current}} - H_{\\text{new}} = H_{\\text{current}} \\left( 1 - \\frac{H_{\\text{new}}}{H_{\\text{current}}} \\right) = H_{\\text{current}} \\left( 1 - \\frac{1 + p_{\\text{new}}(\\text{RR}-1)}{1 + p_{\\text{current}}(\\text{RR}-1)} \\right)$$\n首先，我们计算新的吸烟流行率 $p_{\\text{new}}$。该干预使当前流行率 $p_{\\text{current}} = 0.22$ 相对减少了 $25\\%$。\n$$p_{\\text{new}} = p_{\\text{current}} \\times (1 - 0.25) = 0.22 \\times 0.75 = 0.165$$\n现在我们将给定值代入避免入院人数的表达式中：$H_{\\text{current}} = 5600$，$p_{\\text{current}} = 0.22$，$p_{\\text{new}} = 0.165$ 以及 $\\text{RR} = 2.8$。\n$$H_{\\text{averted}} = 5600 \\left( 1 - \\frac{1 + 0.165(2.8 - 1)}{1 + 0.22(2.8 - 1)} \\right)$$\n$$H_{\\text{averted}} = 5600 \\left( 1 - \\frac{1 + 0.165 \\times 1.8}{1 + 0.22 \\times 1.8} \\right) = 5600 \\left( 1 - \\frac{1 + 0.297}{1 + 0.396} \\right) = 5600 \\left( 1 - \\frac{1.297}{1.396} \\right)$$\n$$H_{\\text{averted}} = 5600 \\left( \\frac{1.396 - 1.297}{1.396} \\right) = 5600 \\left( \\frac{0.099}{1.396} \\right)$$\n$$H_{\\text{averted}} \\approx 5600 \\times 0.0709169... \\approx 397.13467...$$\n保留三位有效数字，估算的避免入院人数为 $397$。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.2837  397\n\\end{pmatrix}\n}\n$$", "id": "4389005"}, {"introduction": "当我们通过随机对照试验（RCT）证实一项干预措施有效后，下一个问题便是：它的效率如何？需治数（NNT）为我们提供了一个直观的答案，它告诉我们需要治疗多少患者才能预防一例不良事件的发生。通过这个练习，你将学会如何从试验数据中计算 NNT，并从基本原理上理解为何干预效果可以线性地扩展到更大的人群。[@problem_id:4389064]", "problem": "一个卫生部门正考虑实施一个为期一年的社区高血压管理项目。在一个与该部门目标社区相当的人群中进行的一项随机对照试验（RCT）观察到以下一年期结果：在对照组中，$1200$名参与者中发生了$168$例心血管疾病住院事件；在治疗组中，$1200$名参与者中发生了$123$例心血管疾病住院事件。假设失访可忽略不计，一年内每个人的结局为二元结果，并且该RCT的结果可推广至目标社区。\n\n根据第一性原理，将各组的一年期风险定义为发病比例，并将绝对风险降低（ARR）定义为对照组与治疗组之间的风险差值。将需治数（NNT）视为在一年内为避免一次住院而必须接受该项目治疗的预期人数，并假设在同一时期内，目标人群中个体的绝对治疗效果是均一的。\n\n计算该项目在一年期内的NNT。将您的答案四舍五入至三位有效数字。此外，从概率论和人群健康的第一性原理出发，论证在均一绝对治疗效果的假设下，治疗$n$个个体所避免的预期住院次数与$n$呈线性关系。\n\n最终的NNT以一个不带单位的实数表示。", "solution": "该问题要求两个主要部分：计算需治数（NNT），以及从第一性原理出发，论证所避免事件的预期数量的线性关系。\n\n首先，我们计算NNT。各组的一年期风险定义为发病比例，即新发病例（住院）数除以期初的个体数。\n\n设 $N_c$ 为对照组的参与者人数，$H_c$ 为该组的住院次数。\n设 $N_t$ 为治疗组的参与者人数，$H_t$ 为该组的住院次数。\n\n根据问题陈述，我们有：\n$N_c = 1200$\n$H_c = 168$\n$N_t = 1200$\n$H_t = 123$\n\n对照组的风险 $R_c$ 为：\n$$R_c = \\frac{H_c}{N_c} = \\frac{168}{1200} = 0.14$$\n治疗组的风险 $R_t$ 为：\n$$R_t = \\frac{H_t}{N_t} = \\frac{123}{1200} = 0.1025$$\n\n绝对风险降低（ARR）定义为对照组与治疗组之间的风险差值：\n$$ARR = R_c - R_t$$\n代入计算出的值：\n$$ARR = 0.14 - 0.1025 = 0.0375$$\n该值代表研究人群中通过该项目所避免的住院比例。\n\n需治数（NNT）定义为为避免一次住院而必须接受该项目治疗的预期人数。这是ARR的倒数。\n$$NNT = \\frac{1}{ARR}$$\n$$NNT = \\frac{1}{0.0375} = \\frac{1}{\\frac{375}{10000}} = \\frac{10000}{375} = \\frac{80}{3} \\approx 26.666...$$\n问题要求答案四舍五入至三位有效数字。\n$$NNT \\approx 26.7$$\n\n其次，我们必须论证在均一绝对治疗效果的假设下，治疗$n$个个体所避免的预期住院次数与$n$呈线性关系。\n\n让我们用概率论来为单个个体的结局建模。设$Y$为一个伯努利随机变量，代表单个个体的结局，其中$Y=1$表示住院，$Y=0$表示未住院。\n\n对于对照（未经治疗）人群中的一个个体，其住院概率为 $p_c = P(Y=1 | \\text{untreated})$。根据所提供的RCT数据，我们对此概率的估计值为观测风险 $R_c$。\n对于治疗人群中的一个个体，其住院概率为 $p_t = P(Y=1 | \\text{treated})$。我们对此的估计值为 $R_t$。\n\n“均一绝对治疗效果”的假设意味着绝对风险降低 $p_c - p_t$ 对于目标人群中的每个个体都是恒定的。\n\n现在，考虑一组接受该项目治疗的$n$个个体。设$Y_i$为第$i$个个体的伯努利随机变量，其中$i$的范围从$1$到$n$。该组的总住院次数为总和 $S_n = \\sum_{i=1}^{n} Y_i$。\n\n如果这$n$个个体接受治疗，其预期住院次数由$S_n$在治疗条件下的期望给出。根据期望的线性性质：\n$$E[\\text{Hospitalizations with treatment}] = E\\left[\\sum_{i=1}^{n} Y_i | \\text{treated}\\right] = \\sum_{i=1}^{n} E[Y_i | \\text{treated}]$$\n单个伯努利变量$Y_i$的期望是其成功概率$p_t$。由于效果是均一的，这个概率对所有$n$个个体都相同。\n$$\\sum_{i=1}^{n} E[Y_i | \\text{treated}] = \\sum_{i=1}^{n} p_t = n \\cdot p_t$$\n\n类似地，如果这同样的$n$个个体*未*接受治疗，其预期住院次数为：\n$$E[\\text{Hospitalizations without treatment}] = E\\left[\\sum_{i=1}^{n} Y_i | \\text{untreated}\\right] = \\sum_{i=1}^{n} E[Y_i | \\text{untreated}] = \\sum_{i=1}^{n} p_c = n \\cdot p_c$$\n\n治疗$n$个个体所避免的预期住院次数，我们记为$A_n$，是未经治疗的预期住院次数与接受治疗的预期住院次数之差。\n$$A_n = E[\\text{Hospitalizations without treatment}] - E[\\text{Hospitalizations with treatment}]$$\n$$A_n = n \\cdot p_c - n \\cdot p_t = n(p_c - p_t)$$\n项 $(p_c - p_t)$ 是绝对风险降低，即ARR。因此：\n$$A_n = n \\cdot ARR$$\n该方程表明，$A_n$，即避免的预期住院次数，是接受治疗人数$n$的线性函数。比例常数是$ARR$。这种线性关系是期望算子线性的直接结果，也是治疗效果在整个人群中恒定、均一这一假设的直接结果。\n这也证实了NNT的推导：要避免$A_n=1$次事件，我们需要治疗$n=NNT$个人，所以$1 = NNT \\cdot ARR$，从而得出 $NNT = 1/ARR$。", "answer": "$$\\boxed{26.7}$$", "id": "4389064"}, {"introduction": "在现实世界中，并非所有公共卫生项目都能在严格的随机对照试验下进行评估。双重差分法（DiD）是一种强大的准实验方法，它通过比较干预组和对照组在干预前后的变化差异，来估算项目的因果效应。本练习将带你深入理解 DiD 方法的逻辑，并亲手计算一个社区健康项目对降低住院率的实际影响。[@problem_id:4389018]", "problem": "一个卫生系统评估了一项旨在减少可避免住院的社区卫生工作者项目。该项目在时间 $t=1$ 时在一组社区（干预组）中实施，而一个作为对照的社区组（对照组）在整个过程中不接受干预。考虑一个双时期设定，$t \\in \\{0,1\\}$，以及由 $G \\in \\{0,1\\}$ 索引的两个组，其中 $G=1$ 表示干预组，$G=0$ 表示对照组。令 $Y_{it}$ 表示单位 $i$ 在时间 $t$ 的年可避免住院率（每 $1{,}000$ 人年）。假设稳定单位处理值假设（SUTVA）成立，并且干预在任何时候都不影响对照组。用文字定义双重差分法（DiD），并从潜在结果和共同趋势假设的核心定义出发，根据观测到的组-时间平均结果，推导出针对处理组平均处理效应（ATT）的双组、双时期DiD估计量。\n\n观测到的平均可避免住院率（每 $1{,}000$ 人年）如下：\n- 干预组：干预前（$t=0$）$= 50.0$，干预后（$t=1$）$= 42.5$。\n- 对照组：干预前（$t=0$）$= 45.0$，干预后（$t=1$）$= 40.8$。\n\n使用这些数值计算ATT的DiD估计值。将最终效应表示为每 $1{,}000$ 人年的率差。将你的答案四舍五入到四位有效数字。", "solution": "首先，我们用文字定义双重差分法。DiD是一种准实验技术，用于估计特定干预的因果效应。它通过比较接受干预的组（处理组）结果变量随时间的变化与同期未接受干预的组（对照组）相同结果的变化来进行。其核心思想是使用对照组来代表处理组在没有干预的情况下本应经历的结果趋势。“双重差分”是指处理组干预前后的变化与对照组干预前后变化之间的差值。\n\n为了正式推导估计量，我们使用潜在结果框架。令 $G_i \\in \\{0, 1\\}$ 为一个指示变量，表示单位 $i$ 属于干预组（$G_i=1$）或对照组（$G_i=0$）。令 $t \\in \\{0, 1\\}$ 为时期，其中 $t=0$ 是干预前时期，$t=1$ 是干预后时期。干预仅在时间 $t=1$ 应用于组 $G=1$。\n\n令 $Y_{it}(1)$ 为单位 $i$ 在时间 $t$ 接受处理时的潜在结果，而 $Y_{it}(0)$ 为其不接受处理时的潜在结果。单位 $i$ 在时间 $t$ 的观测结果记为 $Y_{it}$。\n在干预前时期（$t=0$），没有单位被处理，所以观测结果总是未处理的潜在结果：对于所有单位 $i$，$Y_{i0} = Y_{i0}(0)$。\n在干预后时期（$t=1$），观测结果取决于处理状态：\n$Y_{i1} = G_i Y_{i1}(1) + (1-G_i) Y_{i1}(0)$。\n\n关注的参数是干预后时期（$t=1$）的处理组平均处理效应（ATT）。这被定义为处理对那些实际接受处理的单位的期望效应：\n$$ATT = E[Y_{i1}(1) - Y_{i1}(0) | G_i=1]$$\n利用期望的线性性质，我们可以写出：\n$$ATT = E[Y_{i1}(1) | G_i=1] - E[Y_{i1}(0) | G_i=1]$$\n第一项，$E[Y_{i1}(1) | G_i=1]$，是处理组在接受处理条件下的期望结果。这可以从数据中观测到，即干预组在干预后时期的平均结果。\n第二项，$E[Y_{i1}(0) | G_i=1]$，是处理组在*未*接受处理情况下的期望结果。这是一个反事实量，不能直接观测到。\n\n为了识别这个反事实项，我们引用关键的**共同趋势假设**。这个假设表明，在没有干预的情况下，处理组结果的平均变化将与对照组结果的平均变化相同。形式上：\n$$E[Y_{i1}(0) - Y_{i0}(0) | G_i=1] = E[Y_{i1}(0) - Y_{i0}(0) | G_i=0]$$\n我们可以重新整理这个方程来求解不可观测的反事实项：\n$$E[Y_{i1}(0) | G_i=1] = E[Y_{i0}(0) | G_i=1] + E[Y_{i1}(0) | G_i=0] - E[Y_{i0}(0) | G_i=0]$$\n现在，我们可以用可观测的量来表示右边的每一项：\n- $E[Y_{i0}(0) | G_i=1]$ 是处理组在 $t=0$ 时的期望结果。由于没有单位被处理，这仅仅是观测到的平均结果，$E[Y_{i0} | G_i=1]$。\n- $E[Y_{i1}(0) | G_i=0]$ 是对照组在 $t=1$ 时的期望结果。由于他们没有被处理，这是他们的观测平均结果，$E[Y_{i1} | G_i=0]$。\n- $E[Y_{i0}(0) | G_i=0]$ 是对照组在 $t=0$ 时的期望结果，也就是他们的观测平均结果，$E[Y_{i0} | G_i=0]$。\n\n让我们使用符号 $\\mu_{Gt} = E[Y_{it} | G_i=G, \\text{time}=t]$ 来表示可观测的组-时间均值。反事实的表达式变为：\n$$E[Y_{i1}(0) | G_i=1] = \\mu_{10} + \\mu_{01} - \\mu_{00}$$\n将此代回ATT公式：\n$$ATT = E[Y_{i1}(1) | G_i=1] - ( \\mu_{10} + \\mu_{01} - \\mu_{00} )$$\n项 $E[Y_{i1}(1) | G_i=1]$ 是处理组在处理后的观测均值，$\\mu_{11}$。\n因此，ATT是：\n$$ATT = \\mu_{11} - \\mu_{10} - \\mu_{01} + \\mu_{00}$$\n这可以被重新整理成经典的DiD形式：\n$$ATT = (\\mu_{11} - \\mu_{10}) - (\\mu_{01} - \\mu_{00})$$\n这是处理组随时间变化的平均结果变化量减去对照组随时间变化的平均结果变化量。稳定单位处理值假设（SUTVA）确保了一个单位的结果不受另一个单位处理状态的影响（无干扰），并且处理被明确定义，这些都是此推导所必需的。\n\n现在，我们使用提供的数据计算DiD估计值。样本均值被用作总体均值 $\\mu_{Gt}$ 的估计量。\n令 $\\bar{Y}_{G,t}$ 为组 $G$ 在时间 $t$ 的观测平均结果。\n给定数据：\n- 干预组（$G=1$）：$\\bar{Y}_{1,0} = 50.0$，$\\bar{Y}_{1,1} = 42.5$。\n- 对照组（$G=0$）：$\\bar{Y}_{0,0} = 45.0$，$\\bar{Y}_{0,1} = 40.8$。\n\nDiD估计量 $\\widehat{ATT}$ 计算如下：\n$$\\widehat{ATT} = (\\bar{Y}_{1,1} - \\bar{Y}_{1,0}) - (\\bar{Y}_{0,1} - \\bar{Y}_{0,0})$$\n首先，计算干预组的变化：\n$$\\Delta_{G=1} = \\bar{Y}_{1,1} - \\bar{Y}_{1,0} = 42.5 - 50.0 = -7.5$$\n接下来，计算对照组的变化：\n$$\\Delta_{G=0} = \\bar{Y}_{0,1} - \\bar{Y}_{0,0} = 40.8 - 45.0 = -4.2$$\n最后，计算双重差分：\n$$\\widehat{ATT} = \\Delta_{G=1} - \\Delta_{G=0} = -7.5 - (-4.2) = -7.5 + 4.2 = -3.3$$\n结果 $-3.3$ 代表了对处理组的估计平均处理效应。这是该项目导致的可避免住院率（每 $1{,}000$ 人年）减少了 $3.3$。\n将结果四舍五入到四位有效数字得到 $-3.300$。", "answer": "$$\\boxed{-3.300}$$", "id": "4389018"}]}
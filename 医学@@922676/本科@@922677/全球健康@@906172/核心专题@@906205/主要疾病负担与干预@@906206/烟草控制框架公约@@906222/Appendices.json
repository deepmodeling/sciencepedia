{"hands_on_practices": [{"introduction": "提高烟草税是《烟草控制框架公约》（FCTC）推荐的核心策略之一，它不仅能降低烟草消费，还能为政府带来额外财政收入。本练习旨在通过推导税收收入的通用公式，帮助您掌握烟草税设计的经济学基础。通过运用需求价格弹性 $e$ 和从价税率 $t$ 等核心概念，您将学会如何从第一性原理出发，预测一项税收政策的财政效果，这是进行循证决策和评估政策有效性的关键技能。[@problem_id:5003048]", "problem": "在国际与全球卫生筹资的历史演变中，特别是在世界卫生组织（WHO）和《烟草控制框架公约》（FCTC）的认可下，各国政府日益依赖通过对有害健康产品征收消费税（通常称为“罪恶税”）来进行国内资源动员，以资助人群健康项目并推进全民健康覆盖（UHC）。考虑某政府对一种烟草产品的税前零售价征收税率为 $t$ 的从价烟草消费税。假设税收完全转嫁给消费者，因此消费者价格乘性上涨。设基准税前零售价为 $P$，基准年消费量为 $Q$。假设烟草需求表现出大小为 $e$ 的恒定需求价格弹性（即价格弹性为 $-e$），并且需求定律在相关范围内成立。仅从需求价格弹性的核心定义出发，并假设市场行为具有竞争性且从价税完全转嫁给消费者价格，推导出年预期税收收入作为 $t$、$e$、$P$ 和 $Q$ 的函数。\n\n您的最终答案必须是关于 $t$、$e$、$P$ 和 $Q$ 的单一闭式解析表达式。最终答案中不要包含任何单位。无需进行数值评估。如果您选择以数值形式呈现任何中间结果，则必须四舍五入到指定的有效数字位数；然而，最终答案应按照上述指示保持符号形式。", "solution": "该问题要求推导对烟草产品征收从价消费税所产生的年税收收入。该问题设定良好，并基于标准的微观经济学原理。\n\n我们从需求价格弹性 $E_d$ 的核心定义开始。它被定义为需求量 $Q_d$ 对价格 $P'$ 百分之一的变化所产生的百分比变化。问题指出，该弹性是恒定的，等于 $-e$。\n\n$$E_d = \\frac{d Q_d / Q_d}{d P' / P'} = \\frac{P'}{Q_d} \\frac{d Q_d}{d P'} = -e$$\n\n此处，$e > 0$ 因为需求定律成立。为了找到需求函数 $Q_d(P')$，我们必须求解这个一阶常微分方程。我们可以分离变量 $Q_d$ 和 $P'$：\n\n$$\\frac{d Q_d}{Q_d} = -e \\frac{d P'}{P'}$$\n\n两边积分得出：\n\n$$\\int \\frac{1}{Q_d} d Q_d = \\int -e \\frac{1}{P'} d P'$$\n$$\\ln(Q_d) = -e \\ln(P') + C$$\n\n其中 $C$ 是积分常数。为了求解 $Q_d$，我们对两边取指数：\n\n$$Q_d(P') = \\exp(-e \\ln(P') + C) = \\exp(\\ln((P')^{-e})) \\exp(C)$$\n\n设常数 $A = \\exp(C)$。需求函数呈现为恒定弹性需求曲线的形式：\n\n$$Q_d(P') = A (P')^{-e}$$\n\n为了确定常数 $A$，我们使用给定的基准条件。基准税前零售价为 $P$，在此价格下，基准年消费量为 $Q$。在没有税收的情况下，消费者价格 $P'$ 等于税前价格 $P$。因此，需求曲线上有 $(P, Q)$ 这个点。将这些值代入我们的需求函数中：\n\n$$Q = A (P)^{-e}$$\n\n求解常数 $A$：\n\n$$A = Q P^e$$\n\n将 $A$ 的这个表达式代回一般的需求函数，我们得到该市场的具体需求方程：\n\n$$Q_d(P') = (Q P^e) (P')^{-e} = Q \\left(\\frac{P'}{P}\\right)^{-e}$$\n\n接下来，我们分析从价税的影响。税收以税率 $t$ 施加于税前零售价，我们将其视为基准价格 $P$。问题指出，税收完全转嫁给消费者。这意味着消费者价格上涨了全部税额。\n\n每单位税额为 $t \\times P$。\n新的消费者价格，我们称之为 $P'_{tax}$，是税前价格与每单位税额之和：\n\n$$P'_{tax} = P + tP = P(1+t)$$\n\n为了求出征税后的新需求量 $Q_{tax}$，我们将这个新的消费者价格 $P'_{tax}$ 代入我们的具体需求函数中：\n\n$$Q_{tax} = Q_d(P'_{tax}) = Q \\left(\\frac{P'_{tax}}{P}\\right)^{-e}$$\n$$Q_{tax} = Q \\left(\\frac{P(1+t)}{P}\\right)^{-e}$$\n$$Q_{tax} = Q(1+t)^{-e}$$\n\n最后，年度总税收收入 $R$ 是每单位征收的税款乘以销售的总单位数 $Q_{tax}$。\n\n每单位税收为 $tP$。\n销售的单位数是 $Q_{tax}$。\n\n因此，作为给定参数函数的收入 $R$ 为：\n\n$$R(t, e, P, Q) = (\\text{每单位税收}) \\times (\\text{销售数量})$$\n$$R(t, e, P, Q) = (tP) \\times (Q(1+t)^{-e})$$\n$$R(t, e, P, Q) = tPQ(1+t)^{-e}$$\n\n这就是年预期税收收入的最终闭式解析表达式。", "answer": "$$\\boxed{tPQ(1+t)^{-e}}$$", "id": "5003048"}, {"introduction": "烟草控制政策的最终成功与否，取决于其改善公众健康的实际效果。本练习将带您实践如何量化一项控烟干预措施（如推行无烟公共场所）带来的健康收益。您将综合运用吸烟率 $p$、相对风险 $RR$ 等流行病学关键指标，计算因吸烟行为减少而避免的伤残调整生命年（DALYs），从而将抽象的政策影响转化为可衡量、可比较的公共卫生证据。[@problem_id:5000905]", "problem": "某国家实施了符合世界卫生组织《烟草控制框架公约》(FCTC) 的全面室内公共场所禁烟和烟草税政策。在实施的第一年，监测显示 $35$–$64$ 岁年龄组的成人吸烟率从 $p_{0} = 0.30$ 下降到了 $p_{1} = 0.24$。该年龄组中缺血性心脏病 (IHD) 事件的年龄标化年发病率观测为每年每 $100{,}000$ 人 $400$ 例，且该年龄组的人口规模为 $N = 1.5 \\times 10^{6}$。流行病学证据表明，当前吸烟者相对于非吸烟者，其患缺血性心脏病的相对风险 (RR) 为 $RR = 2.0$。为进行年度评估，假设此风险关系在当年内适用。\n\n在疾病负担方面，假设每次 IHD 事件的病死率为 $f = 0.15$。死者在死亡时的平均剩余期望寿命为 $L = 10$ 年，而幸存者将在 $D = 5$ 年的持续时间内经历一个恒定的伤残权重 $DW = 0.20$。假设非吸烟者患 IHD 的基线风险在年内保持稳定，并且吸烟率的变化会立即转化为 IHD 风险的变化。\n\n仅使用人群风险、相对风险和伤残调整生命年 (DALY) 的定义，计算由于吸烟率从 $p_{0}$ 降至 $p_{1}$，在该年龄组中每年避免的 DALYs。最终答案以 DALYs 为单位表示，并四舍五入到四位有效数字。", "solution": "我们将首先提取所有给定信息，然后评估其科学基础、一致性和完整性，以此来验证该问题。\n\n**第一步：提取已知信息**\n- 初始成人吸烟率: $p_{0} = 0.30$\n- 最终成人吸烟率: $p_{1} = 0.24$\n- $35$–$64$ 岁年龄组的人口规模: $N = 1.5 \\times 10^{6}$\n- 观测到的缺血性心脏病 (IHD) 年龄标化年发病率: $I_{obs} = $ 每年每 $100,000$ 人 $400$ 例，相当于发病率为 $0.004$。这是吸烟率为 $p_0$ 时的发病率。\n- 吸烟者相对于非吸烟者的 IHD 相对风险: $RR = 2.0$\n- IHD 事件的病死率: $f = 0.15$\n- 因 IHD 死亡时的平均剩余期望寿命: $L = 10$ 年\n- IHD 幸存者的伤残权重: $DW = 0.20$\n- IHD 幸存者的伤残持续时间: $D = 5$ 年\n- 假设:\n    1. 非吸烟者患 IHD 的基线风险是稳定的。\n    2. 吸烟率的变化立即转化为 IHD 风险的变化。\n    3. 给定的相对风险在评估年度内适用。\n\n**第二步：使用提取的已知信息进行验证**\n该问题具有科学依据。它使用了流行病学和公共卫生领域的既定概念，例如吸烟率、相对风险、发病率和伤残调整生命年 (DALYs)。《烟草控制框架公约》(FCTC) 是一项合法的国际条约，使用避免的 DALYs 等指标评估其影响是全球卫生领域的标准做法。\n\n该问题提法得当。其目标是计算一个特定量（避免的 DALYs），并且提供了所有必要的数据和定义。诸如吸烟率变化对风险的即时影响等假设，是明确说明的简化，这些简化使得问题易于处理，并且没有引入逻辑矛盾。该问题是自洽的，因为非吸烟者的基线风险虽然没有直接给出，但可以从提供的总发病率、吸烟率和相对风险中推导出来。\n\n该问题是客观的，提供了定量数据和清晰的定义，没有主观或推测性语言。它不违反任何基本科学原理，并非无足轻重，并且可以根据所提供的框架通过一系列逻辑计算来解决。\n\n**第三步：结论与行动**\n该问题被认为是有效的。将提供完整的解答。\n\n**解题过程**\n\n避免的总健康负担以伤残调整生命年 (DALYs) 来衡量。一个 DALY 代表损失一年的“健康”生命。DALY 指标是因过早死亡而损失的生命年 (YLL) 和因发病而带残生存的年数 (YLD) 的总和。\n$$\n\\text{DALY} = \\text{YLL} + \\text{YLD}\n$$\n目标是计算避免的总 DALYs，即避免的 IHD 事件数与每次事件平均损失的 DALYs 的乘积。\n\n首先，我们计算与单次 IHD 事件相关的平均 DALYs。一次事件有两种可能的结果：死亡或带残生存。\n- 导致死亡的病例比例为 $f = 0.15$。每次死亡的 YLL 为 $L=10$ 年。\n- 幸存的病例比例为 $(1-f) = 0.85$。每位幸存者的 YLD 是伤残权重 $DW = 0.20$ 与伤残持续时间 $D = 5$ 年的乘积。\n\n每次 IHD 事件的平均 DALYs，记为 $\\text{DALY}_{\\text{event}}$，是每种结果的 DALYs 的加权平均值：\n$$\n\\text{DALY}_{\\text{event}} = (f \\times L) + ((1-f) \\times DW \\times D)\n$$\n代入给定值：\n$$\n\\text{DALY}_{\\text{event}} = (0.15 \\times 10) + ((1-0.15) \\times 0.20 \\times 5) = 1.5 + (0.85 \\times 1.0) = 2.35\n$$\n\n接下来，我们必须确定因吸烟率降低而避免的 IHD 事件数。在初始吸烟率 $p_0$ 下，观测到的发病率 $I_{obs}$ 是非吸烟者 ($I_{ns}$) 和吸烟者 ($I_{s}$) 发病率的加权平均值：\n$$\nI_{obs} = I_{ns} \\cdot (1-p_0) + I_{s} \\cdot p_0\n$$\n相对风险 $RR$ 定义为暴露人群（吸烟者）与非暴露人群（非吸烟者）的发病率之比：\n$$\nRR = \\frac{I_s}{I_{ns}} \\implies I_s = RR \\cdot I_{ns}\n$$\n将此代入 $I_{obs}$ 的方程中：\n$$\nI_{obs} = I_{ns} \\cdot (1-p_0) + (RR \\cdot I_{ns}) \\cdot p_0 = I_{ns} \\cdot (1 - p_0 + RR \\cdot p_0) = I_{ns} \\cdot (1 + p_0(RR-1))\n$$\n我们可以解出非吸烟者的基线发病率 $I_{ns}$，假设其是稳定的：\n$$\nI_{ns} = \\frac{I_{obs}}{1 + p_0(RR-1)}\n$$\n使用给定值 $I_{obs} = 0.004$，$p_0 = 0.30$ 和 $RR = 2.0$：\n$$\nI_{ns} = \\frac{0.004}{1 + 0.30(2.0-1)} = \\frac{0.004}{1 + 0.30} = \\frac{0.004}{1.3}\n$$\n\n在规模为 $N$ 的人群中，给定吸烟率 $p$ 下的 IHD 事件总数为 $E(p) = N \\times I(p)$，其中 $I(p) = I_{ns} \\cdot (1 + p(RR-1))$。\n避免的事件数 $\\Delta E$ 是吸烟率为 $p_0$ 时的事件数与吸烟率为 $p_1$ 时的事件数之差：\n$$\n\\Delta E = E(p_0) - E(p_1) = N \\cdot I(p_0) - N \\cdot I(p_1)\n$$\n$$\n\\Delta E = N \\cdot [I_{ns} \\cdot (1 + p_0(RR-1)) - I_{ns} \\cdot (1 + p_1(RR-1))]\n$$\n$$\n\\Delta E = N \\cdot I_{ns} \\cdot [(1 + p_0(RR-1)) - (1 + p_1(RR-1))]\n$$\n$$\n\\Delta E = N \\cdot I_{ns} \\cdot (p_0 - p_1)(RR-1)\n$$\n代入 $I_{ns}$ 的表达式：\n$$\n\\Delta E = N \\cdot \\left(\\frac{I_{obs}}{1 + p_0(RR-1)}\\right) \\cdot (p_0 - p_1)(RR-1)\n$$\n现在，我们代入数值来计算 $\\Delta E$：\n$$\n\\Delta E = (1.5 \\times 10^{6}) \\cdot \\left(\\frac{0.004}{1.3}\\right) \\cdot (0.30 - 0.24)(2.0 - 1.0)\n$$\n$$\n\\Delta E = (1.5 \\times 10^{6}) \\cdot \\left(\\frac{0.004}{1.3}\\right) \\cdot (0.06)(1.0) = \\frac{1.5 \\times 10^{6} \\times 0.004 \\times 0.06}{1.3} = \\frac{360}{1.3} \\approx 276.923\n$$\n\n最后，避免的总 DALYs 是避免的事件数与每次事件的 DALYs 的乘积：\n$$\n\\text{DALYs Averted} = \\Delta E \\times \\text{DALY}_{\\text{event}}\n$$\n$$\n\\text{DALYs Averted} = \\frac{360}{1.3} \\times 2.35 = \\frac{846}{1.3} \\approx 650.76923...\n$$\n问题要求答案四舍五入到四位有效数字。\n$$\n\\text{DALYs Averted} \\approx 650.8\n$$", "answer": "$$\\boxed{650.8}$$", "id": "5000905"}, {"introduction": "一项有效的公共卫生政策，其效果在不同社会经济地位的人群中可能分布不均，甚至可能加剧健康不平等。本练习聚焦于健康公平性这一核心议题，指导您使用卫生经济学中的标准工具——集中指数（concentration index），来评估控烟政策对不同社会阶层的影响。通过编程实现一个公平性影响评估模型，您将掌握分析《烟草控制框架公约》相关措施分配效应的量化方法，确保政策的健康效益能够公平地惠及所有人。[@problem_id:5000909]", "problem": "您需要实现一个程序，用于评估假设的世界卫生组织《烟草控制框架公约》（FCTC）政策对各社会经济群体吸烟率的公平性影响。您的实现必须从以下基本基础和定义出发，并严格按照规定应用它们。\n\n设有 $G$ 个从最贫穷到最富裕排序的社会经济群体，索引为 $i \\in \\{1,\\dots,G\\}$。每个群体的人口份额为 $w_i$，满足 $\\sum_{i=1}^{G} w_i = 1$ 且 $w_i \\ge 0$。设每个群体的基线吸烟率为 $p_i \\in [0,1]$。一项政策由特定群体的相对吸烟率下降率 $r_i \\in [0,1]$ 表示，意味着政策实施后的吸烟率由以下乘法变化定义：\n$$\np_i' = \\max\\{0, \\, p_i \\cdot (1 - r_i)\\}.\n$$\n将政策实施前后的加权平均吸烟率定义为：\n$$\n\\mu = \\sum_{i=1}^{G} w_i \\, p_i, \\quad \\mu' = \\sum_{i=1}^{G} w_i \\, p_i'.\n$$\n为量化公平性，使用卫生经济学中的标准集中指数。定义分数社会经济排位中点：\n$$\nR_i = \\left(\\sum_{j=1}^{i-1} w_j\\right) + \\frac{w_i}{2},\n$$\n随着 $i$ 从最贫穷群体增加到最富裕群体，其值从大于 $0$ 变化到小于 $1$。对于具有权重 $w_i$ 和排位中点 $R_i$ 的变量 $x_i$，其集中指数定义为：\n$$\nC(x) = \\frac{2}{\\sum_{i=1}^{G} w_i \\, x_i} \\sum_{i=1}^{G} w_i \\, x_i \\, R_i - 1,\n$$\n约定当 $\\sum_{i=1}^{G} w_i \\, x_i = 0$ 时，$C(x) = 0$。在此任务中，您需要评估 $C(p)$ 和 $C(p')$。因为在许多情况下，吸烟是一种集中在穷人中的有害暴露，所以当较贫穷群体的 $p_i$ 较高时，$C(p)$ 通常为负值。\n\n您的程序必须为每个测试用例计算以下五个量：\n- 政策实施前的加权平均吸烟率，$\\mu$。\n- 政策实施后的加权平均吸烟率，$\\mu'$。\n- 政策实施前的集中指数， $C(p)$。\n- 政策实施后的集中指数， $C(p')$。\n- 集中指数的变化量, $\\Delta C = C(p') - C(p)$。\n\n重要的实现细节：\n- 所有输入 $w_i$、$p_i$ 和 $r_i$ 均以 $[0,1]$ 范围内的小数形式提供，而不是百分比。\n- 如果 $\\mu = 0$ 或 $\\mu' = 0$，则按约定分别设置 $C(p) = 0$ 或 $C(p') = 0$。\n- 通过应用所述的 $\\max$ 运算符，确保 $p_i' \\in [0,1]$ 准确无误（并注意在给定模型下 $p_i' \\le p_i$）。\n- 不涉及角度。不涉及物理单位。\n- 所有输出的浮点数必须四舍五入到恰好 $6$ 位小数。\n\n测试套件：\n使用 $G = 5$ 和以下四个案例，每个案例都以有序三元组 $\\left(\\mathbf{w}, \\mathbf{p}, \\mathbf{r}\\right)$ 的形式给出，其中向量从最贫穷的群体 $i=1$ 到最富裕的群体 $i=G$ 列出：\n- 案例1（异质基线和促进公平的有效性）：$\\mathbf{w} = [\\,0.2, 0.2, 0.2, 0.2, 0.2\\,]$, $\\mathbf{p} = [\\,0.32, 0.28, 0.24, 0.20, 0.16\\,]$, $\\mathbf{r} = [\\,0.20, 0.18, 0.15, 0.10, 0.05\\,]$。\n- 案例2（统一基线，富裕群体中不公平的更强效果）：$\\mathbf{w} = [\\,0.2, 0.2, 0.2, 0.2, 0.2\\,]$, $\\mathbf{p} = [\\,0.20, 0.20, 0.20, 0.20, 0.20\\,]$, $\\mathbf{r} = [\\,0.02, 0.03, 0.05, 0.07, 0.08\\,]$。\n- 案例3（异质基线，统一比例下降）：$\\mathbf{w} = [\\,0.2, 0.2, 0.2, 0.2, 0.2\\,]$, $\\mathbf{p} = [\\,0.32, 0.28, 0.24, 0.20, 0.16\\,]$, $\\mathbf{r} = [\\,0.30, 0.30, 0.30, 0.30, 0.30\\,]$。\n- 案例4（边界情况：基线吸烟率为零）：$\\mathbf{w} = [\\,0.2, 0.2, 0.2, 0.2, 0.2\\,]$, $\\mathbf{p} = [\\,0.0, 0.0, 0.0, 0.0, 0.0\\,]$, $\\mathbf{r} = [\\,0.50, 0.40, 0.30, 0.20, 0.10\\,]$。\n\n要求的最终输出格式：\n您的程序应生成单行输出，其中包含一个由方括号括起来的逗号分隔列表形式的结果。此列表的每个元素必须是对应测试用例的5元素列表 $[\\mu, \\mu', C(p), C(p'), \\Delta C]$，顺序与上文相同。输出中的所有数字必须四舍五入到恰好6位小数。例如，输出应类似于 $[[a_1,b_1,c_1,d_1,e_1],[a_2,b_2,c_2,d_2,e_2],[a_3,b_3,c_3,d_3,e_4]]$，不含空格。", "solution": "问题陈述已经过分析并被确定为**有效**。它基于卫生经济学和公共卫生领域的标准量化方法，提出了一个清晰、定义明确且具有科学依据的任务。所有必要的数据、定义和约束都已提供，从而可以得出一个唯一且可验证的解。\n\n解决方案要求根据所提供的公式实现一系列计算，以评估假设的烟草控制政策的公平性影响。该算法将处理每个测试用例，计算五个指定的指标：\n1.  政策实施前的加权平均吸烟率，$\\mu$。\n2.  政策实施后的加权平均吸烟率，$\\mu'$。\n3.  政策实施前的集中指数， $C(p)$。\n4.  政策实施后的集中指数， $C(p')$。\n5.  集中指数的变化量, $\\Delta C = C(p') - C(p)$。\n\n对于一组给定的输入——人口份额 $\\mathbf{w} = (w_1, \\dots, w_G)$、基线吸烟率 $\\mathbf{p} = (p_1, \\dots, p_G)$ 和相对下降率 $\\mathbf{r} = (r_1, \\dots, r_G)$——其计算步骤如下：\n\n首先，计算每个群体的政策实施后吸烟率 $p_i'$。问题将其定义为基线吸烟率的乘法变化：\n$$\np_i' = \\max\\{0, \\, p_i \\cdot (1 - r_i)\\}\n$$\n鉴于约束条件 $p_i \\in [0,1]$ 和 $r_i \\in [0,1]$，项 $p_i \\cdot (1 - r_i)$ 始终为非负数。因此，公式简化为 $p_i' = p_i \\cdot (1 - r_i)$。此操作应用于吸烟率向量 $\\mathbf{p}$ 的每个元素，以得出政策实施后的吸烟率向量 $\\mathbf{p'}$。\n\n接下来，计算加权平均吸烟率 $\\mu$ 和 $\\mu'$。它们分别是政策实施前和实施后吸烟率的加权平均值，使用人口份额 $w_i$ 作为权重：\n$$\n\\mu = \\sum_{i=1}^{G} w_i \\, p_i\n$$\n$$\n\\mu' = \\sum_{i=1}^{G} w_i \\, p_i'\n$$\n向量化计算，特别是点积，是完成此步骤的有效方法。\n\n为了计算集中指数，必须首先确定分数社会经济排位中点 $R_i$。群体 $i$ 的排位定义为：\n$$\nR_i = \\left(\\sum_{j=1}^{i-1} w_j\\right) + \\frac{w_i}{2}\n$$\n项 $\\sum_{j=1}^{i-1} w_j$ 表示所有排位在群体 $i$ 之下的群体的累积人口份额。由于向量 $\\mathbf{R}$ 仅取决于权重向量 $\\mathbf{w}$，因此每个测试用例只需计算一次。\n\n准备好所有组件后，就可以计算集中指数 $C(p)$ 和 $C(p')$。变量 $x_i$ 的通用公式为：\n$$\nC(x) = \\frac{2}{\\sum_{i=1}^{G} w_i \\, x_i} \\sum_{i=1}^{G} w_i \\, x_i \\, R_i - 1\n$$\n此公式应用于 $\\mathbf{p}$ 和 $\\mathbf{p'}$。分母 $\\sum w_i x_i$ 就是平均吸烟率 $\\mu$ 或 $\\mu'$。一个关键的实现细节是，如果平均吸烟率为零（即 $\\mu=0$ 或 $\\mu'=0$），则相应的集中指数约定为 $0$。实现中将包含对此情况的条件检查。\n\n最后，集中指数的变化量 $\\Delta C$ 计算为政策实施后指数与实施前指数之差：\n$$\n\\Delta C = C(p') - C(p)\n$$\n$\\Delta C$ 的正值表示不平等程度的降低（即吸烟率的分布向更公平的方向转变）。\n\n整个程序将遍历所提供的四个测试用例。对于每个案例，一个函数将执行这些计算，返回五个所需的浮点值。然后将这些值四舍五入到恰好六位小数，并格式化为指定的字符串输出格式。程序利用 `numpy` 库进行高效的基于数组的数学运算。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef calculate_metrics(w_list: list, p_list: list, r_list: list) - list:\n    \"\"\"\n    Calculates equity impact metrics for a given policy scenario.\n\n    Args:\n        w_list: List of population shares for G groups.\n        p_list: List of baseline smoking prevalence for G groups.\n        r_list: List of relative prevalence reductions for G groups.\n\n    Returns:\n        A list containing [mu, mu_prime, C_p, C_p_prime, delta_C].\n    \"\"\"\n    # Convert lists to numpy arrays for vectorized operations.\n    w = np.array(w_list, dtype=np.float64)\n    p = np.array(p_list, dtype=np.float64)\n    r = np.array(r_list, dtype=np.float64)\n\n    # Calculate post-policy prevalence vector p'\n    # The problem specifies p_i' = max(0, p_i * (1 - r_i)).\n    # Given p_i = 0 and r_i in [0,1], p_i*(1-r_i) is always = 0.\n    # So, max(0, ...) is implicitly satisfied.\n    p_prime = p * (1 - r)\n\n    # Calculate weighted mean prevalence before and after policy (mu and mu')\n    mu = np.sum(w * p)\n    mu_prime = np.sum(w * p_prime)\n\n    # Calculate fractional socioeconomic rank midpoints R_i\n    # R_i = (sum_{j=1}^{i-1} w_j) + w_i / 2\n    # The term sum_{j=1}^{i-1} w_j is the cumulative sum of weights up to the previous element.\n    # np.cumsum(w) - [w[0], w[0]+w[1], ...]\n    # np.cumsum(w)[:-1] - [w[0], w[0]+w[1], ..., sum up to w[G-2]]\n    # np.insert(...) creates [0, w[0], w[0]+w[1], ...]\n    prev_cum_w = np.insert(np.cumsum(w)[:-1], 0, 0)\n    R = prev_cum_w + w / 2\n\n    # Calculate concentration index before policy, C(p)\n    if mu == 0:\n        C_p = 0.0\n    else:\n        # C(p) = (2 / mu) * sum(w_i * p_i * R_i) - 1\n        C_p = (2 / mu) * np.sum(w * p * R) - 1\n\n    # Calculate concentration index after policy, C(p')\n    if mu_prime == 0:\n        C_p_prime = 0.0\n    else:\n        # C(p') = (2 / mu') * sum(w_i * p'_i * R_i) - 1\n        C_p_prime = (2 / mu_prime) * np.sum(w * p_prime * R) - 1\n    \n    # Calculate the change in concentration index\n    delta_C = C_p_prime - C_p\n\n    return [mu, mu_prime, C_p, C_p_prime, delta_C]\n\n\ndef solve():\n    \"\"\"\n    Main function to run all test cases and print results.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # Case 1 (heterogeneous baseline and pro-equity effectiveness)\n        ([0.2, 0.2, 0.2, 0.2, 0.2], [0.32, 0.28, 0.24, 0.20, 0.16], [0.20, 0.18, 0.15, 0.10, 0.05]),\n        # Case 2 (uniform baseline, inequitably stronger effect among richer groups)\n        ([0.2, 0.2, 0.2, 0.2, 0.2], [0.20, 0.20, 0.20, 0.20, 0.20], [0.02, 0.03, 0.05, 0.07, 0.08]),\n        # Case 3 (heterogeneous baseline, uniform proportional reduction)\n        ([0.2, 0.2, 0.2, 0.2, 0.2], [0.32, 0.28, 0.24, 0.20, 0.16], [0.30, 0.30, 0.30, 0.30, 0.30]),\n        # Case 4 (boundary: zero baseline prevalence)\n        ([0.2, 0.2, 0.2, 0.2, 0.2], [0.0, 0.0, 0.0, 0.0, 0.0], [0.50, 0.40, 0.30, 0.20, 0.10])\n    ]\n\n    all_results = []\n    for w, p, r in test_cases:\n        result = calculate_metrics(w, p, r)\n        all_results.append(result)\n\n    # Format the final output string as specified.\n    # Example: [[a1,b1,c1,d1,e1],[a2,b2,c2,d2,e2],...]\n    # Each number must be rounded and formatted to 6 decimal places.\n    # The f-string format specifier {:.6f} handles rounding correctly.\n    output_str = f\"[{','.join([f'[{\",\".join([f\"{val:.6f}\" for val in res])}]' for res in all_results])}]\"\n    \n    # Final print statement in the exact required format.\n    print(output_str)\n\nsolve()\n```", "id": "5000909"}]}
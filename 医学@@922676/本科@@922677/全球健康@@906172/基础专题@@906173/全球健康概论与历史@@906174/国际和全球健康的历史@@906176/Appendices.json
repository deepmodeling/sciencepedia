{"hands_on_practices": [{"introduction": "在现代健康指标出现之前，传染病的传播主要由贸易和旅行的物理网络决定。本练习将让你扮演一位历史流行病学家的角色，使用现代网络分析工具来识别20世纪初航运路线示意图中的关键疾病控制点。通过计算“介数中心性”（betweenness centrality），你将对地理和网络结构如何塑造大流行的历史以及隔离措施背后的逻辑有更深刻的定量理解。[@problem_id:5003060]", "problem": "在十九世纪末和二十世纪初，海上贸易网络构建了病原体远距离传播的途径。考虑一个程式化的无向无权图，其中每个节点代表一个主要港口，每条边代表1900年前后一条定期通航的航运路线。假设一个简单的历史传播模型：在任意两个不同的源港口和目标港口之间，疫情最有可能沿着最短的航运路线传播，当存在多条最短路径（测地线）时，它们被使用的可能性均等。隔离一个节点会将其从图中移除，并阻断任何会经过该节点的测地线。\n\n从图论中测地线的基本定义出发，将节点 $v$ 的介数中心性 (betweenness centrality) 定义为\n$$\nC_B(v) \\;=\\; \\sum_{\\substack{s \\ne t \\\\ s \\ne v \\ne t \\\\ s  t}} \\frac{\\sigma_{st}(v)}{\\sigma_{st}},\n$$\n其中 $\\sigma_{st}$ 是节点 $s$ 和 $t$ 之间最短路径（测地线）的数量，而 $\\sigma_{st}(v)$ 是这些最短路径中经过节点 $v$ 的数量。此定义是针对简单无向图的标准定义，并排除了端点。在给定模型下，当选择单个节点进行隔离时，隔离具有最高 $C_B(v)$ 值的节点可以最大化预期拦截的由测地线介导的传播比例。对于多个隔离点 $k  1$ 的情况，按 $C_B(v)$ 值选择前 $k$ 个节点是一种广泛使用的启发式基准；在本问题中，您必须严格使用此选择规则。如果 $C_B(v)$ 值出现平局，则选择索引较小的节点来打破平局。\n\n您的任务是编写一个完整的程序，对以下每个测试用例，使用上述定义计算所有节点的精确介数中心性 $C_B(v)$，并输出前 $k$ 个隔离节点的索引，按 $C_B(v)$ 降序排序，然后按索引升序排序以打破平局。节点用从 $0$ 到 $n-1$ 的整数表示。每个图都是无向、无权和简单的。\n\n测试套件（每个测试用例是一个三元组 $(n, E, k)$，其中 $n$ 是节点数， $E$ 是由节点索引对组成的无向边集合， $k$ 是要选择的隔离点数量）：\n\n- 案例 1 (1900年前后程式化的全球航运网络):\n  - $n = 10$\n  - $E = \\{(0,1),(0,2),(0,3),(3,4),(4,5),(5,0),(0,6),(6,7),(7,8),(8,9)\\}$\n  - $k = 2$\n- 案例 2 (测试明显中心的线形图):\n  - $n = 5$\n  - $E = \\{(0,1),(1,2),(2,3),(3,4)\\}$\n  - $k = 1$\n- 案例 3 (测试全零介数和打破平局的两个不连通三角形):\n  - $n = 6$\n  - $E = \\{(0,1),(1,2),(2,0),(3,4),(4,5),(5,3)\\}$\n  - $k = 1$\n- 案例 4 (由双节点桥链连接的两个簇，测试相等中心性):\n  - $n = 8$\n  - $E = \\{(0,1),(1,2),(2,0),(5,6),(6,7),(7,5),(2,3),(3,4),(4,5)\\}$\n  - $k = 2$\n\n最终输出格式：您的程序应生成单行输出，其中包含一个逗号分隔的列表的列表，每个内部列表包含一个案例的所选节点索引，按上述案例顺序排列。例如，格式为 $[[a_1,a_2],[b_1],[c_1],[d_1,d_2]]$，其中 $a_i$、$b_1$、$c_1$、$d_i$ 是整数。输出字符串中不应出现空格。输出是无量纲的索引，因此没有物理单位适用。", "solution": "**4. 问题验证（分步进行）：**\n\n### 步骤 1：提取给定信息\n\n- **模型：** 程式化的无向无权图。\n- **节点：** 代表主要港口。\n- **边：** 代表1900年前后定期通航的航运路线。\n- **传播模型：** 疫情最有可能沿着最短路径（测地线）传播。如果存在多条测地线，则它们被使用的可能性均等。\n- **隔离：** 从图中移除一个节点 `v`，阻断所有经过它的测地线。\n- **介数中心性定义：**\n  $$\n  C_B(v) \\;=\\; \\sum_{\\substack{s \\ne t \\\\ s \\ne v \\ne t \\\\ s  t}} \\frac{\\sigma_{st}(v)}{\\sigma_{st}}\n  $$\n- **定义中的变量：**\n    - $\\sigma_{st}$：节点 $s$ 和 $t$ 之间的最短路径数量。\n    - $\\sigma_{st}(v)$：这些最短路径中经过节点 $v$ 的数量。\n- **求和条件：** 遍历所有不同的节点对 $s, t$，使得 $v$ 不是端点。条件 $s  t$ 是用于无向图的约定，以确保每对节点只计算一次。\n- **隔离选择规则：**\n    - 对于 $k$ 个隔离点，选择 $C_B(v)$ 最高的 $k$ 个节点。\n    - **打破平局规则：** 如果 $C_B(v)$ 出现平局，选择索引较小的节点。\n- **任务：**\n    - 为每个测试用例，计算所有节点的精确介数中心性 $C_B(v)$。\n    - 输出前 $k$ 个隔离节点的索引，按 $C_B(v)$ 降序排序，然后按索引升序排序。\n- **节点表示：** 从 $0$ 到 $n-1$ 的整数。\n- **图属性：** 无向、无权、简单。\n- **测试用例：**\n    - **案例 1：**\n        - $n = 10$\n        - $E = \\{(0,1),(0,2),(0,3),(3,4),(4,5),(5,0),(0,6),(6,7),(7,8),(8,9)\\}$\n        - $k = 2$\n    - **案例 2：**\n        - $n = 5$\n        - $E = \\{(0,1),(1,2),(2,3),(3,4)\\}$\n        - $k = 1$\n    - **案例 3：**\n        - $n = 6$\n        - $E = \\{(0,1),(1,2),(2,0),(3,4),(4,5),(5,3)\\}$\n        - $k = 1$\n    - **案例 4：**\n        - $n = 8$\n        - $E = \\{(0,1),(1,2),(2,0),(5,6),(6,7),(7,5),(2,3),(3,4),(4,5)\\}$\n        - $k = 2$\n- **最终输出格式：** 单行 `[[...],[...],...]`，无空格。\n\n### 步骤 2：使用提取的给定信息进行验证\n\n- **科学上合理：** 该问题使用了图论和网络科学中一个标准且成熟的概念：介数中心性。将其应用于网络上的疫情传播，是计算流行病学中一个常见且科学上有效的模型。所提供的定义是无向图的标准定义。历史背景（1900年前后的航运路线）是程式化的，但并未引入任何科学谬误；它仅仅为这个定义明确的图问题提供了一个叙事框架。该模型是一个简化模型，但简化是建模的基础。它是科学上现实的。结论：**有效**。\n- **良构的（Well-Posed）：** 该问题明确定义了图的结构、要计算的量（$C_B(v)$）以及选择标准（前 $k$ 个，带打破平局规则）。对于任何给定的图，最短路径的数量是明确定义的，因此介数中心性也是明确定义的。解的存在性是有保证的。明确的打破平局规则保证了前 $k$ 个集合的唯一性。解对于图结构的微小扰动是稳定的（尽管我们不被要求分析这一点）。结论：**有效**。\n- **客观的：** 该问题以精确的数学和算法术语陈述。背景是客观的历史信息（海上贸易是关键）。定义是形式化的。没有主观或基于意见的陈述。结论：**有效**。\n\n让我们检查一下是否存在特定的缺陷：\n1. **科学上不健全？** 否。该模型是简化的，但基于网络科学原理。介数中心性的定义是标准的。\n2. **无法形式化？** 否。该问题被明确地形式化为一个图算法任务。它与全球健康（病原体传播）的一个主题直接相关，即使是程式化的。\n3. **不完整/矛盾？** 每个测试用例的给定信息（$n, E, k$）都是完整的。中心性的定义和选择规则是清晰的。没有矛盾。\n4. **不现实/不可行？** 图很小，计算上是易于处理的。参数是一致的。背景是一个程式化的历史模型，这是一种有效的科学方法。\n5. **病态的（Ill-Posed）？** 否。明确的打破平局规则确保了唯一解。术语是标准且定义明确的。\n6. **伪深刻/琐碎？** 否。计算介数中心性是一项不平凡的算法任务。它需要理解像广度优先搜索（BFS）这样的用于无权图的最短路径算法。该问题测试了一个已知的、重要算法的实现。\n7. **超出科学可验证性？** 否。计算是确定性的，可以通过手工（对于小图）或通过独立的算法实现来验证。\n\n### 步骤 3：结论与行动\n\n该问题是**有效的**。我将继续进行求解。\n\n---\n**解题计划**\n\n问题的核心是为给定图中的每个节点计算介数中心性。解决这个问题的标准算法，特别是在无权图中，是 Brandes 算法。然而，问题中给出的定义与通常的归一化方式略有不同。Brandes 算法计算的是 $\\sum_{s \\neq v \\neq t} \\frac{\\sigma_{st}(v)}{\\sigma_{st}}$。问题陈述中的是 $\\sum_{s \\ne t, s \\ne v \\ne t, s  t}$，这是无向图标准值的一半。我必须遵守所提供的定义。\n\n算法流程如下：\n对于图中的每个节点 $v$，我需要计算其中心性 $C_B(v)$。定义涉及对所有其他节点对 $(s, t)$ 的求和。直接枚举所有节点对并为每对找到最短路径效率低下。一种更有效的方法是固定一个源节点 $s$，并计算所有目标节点 $t$ 的属性。\n\n**算法（Brandes 方法，适配版）：**\n\n1.  对所有节点 $v$，初始化 $C_B(v) = 0$。\n2.  对于图中的每个节点 $s$：\n    a.  从 $s$ 开始运行广度优先搜索（BFS）。这将找到所有 $t$ 的最短路径距离 `dist(s, t)` 和最短路径数量 `sigma(s, t)`。\n    b.  BFS 逐层进行。在遍历过程中，我们可以存储：\n        - `dist[t]`：从 $s$到 $t$ 的距离。初始化为无穷大，`dist[s] = 0`。\n        - `sigma[t]`：从 $s$到 $t$ 的最短路径数量。初始化为0，`sigma[s] = 1`。\n        - `pred[t]`：在从 $s$ 出发的最短路径上 $t$ 的前驱节点列表。\n    c.  从 $s$ 开始的 BFS：\n        - 使用 $s$ 初始化队列 `Q`。\n        - 使用栈 `S` 按与 $s$ 距离递增的顺序存储节点。\n        - 当 `Q` 不为空时：\n            - 从 `Q` 中出队一个节点 `u`。\n            - 将 `u` 压入 `S`。\n            - 对于 `u` 的每个邻居 `w`：\n                - 如果 `dist[w]` 是无穷大（尚未访问）：\n                    - `dist[w] = dist[u] + 1`\n                    - 将 `w` 入队。\n                - 如果 `dist[w] == dist[u] + 1` (这是一条最短路径)：\n                    - `sigma[w] = sigma[w] + sigma[u]`\n                    - 将 `u` 添加到 `pred[w]`。\n\n    d.  现在，我们需要计算 $s$ 对其他节点的“依赖度”。这是 Brandes 算法的核心。源点 $s$ 对节点 $v$ 的依赖度是 $\\delta_s(v) = \\sum_{t} \\frac{\\sigma_{st}(v)}{\\sigma_{st}}$。\n    e.  按从栈 `S` 中弹出的顺序（从离 `s` 最远到最近）遍历节点 `w`：\n        - 初始化每个节点的对依赖值 `delta[v] = 0`。\n        - 对于从 `S` 中弹出的每个 `w`：\n            - 对于 `pred[w]` 中的每个前驱节点 `v`：\n                - 从 `s`到 `w` 经过 `v` 的最短路径比例是 `sigma[v] / sigma[w]`。\n                - 经过边 `(v, w)` 到达任何更远节点 `t` 的最短路径数量是 `1 + delta[w]`。\n                - 所以，我们累加依赖度：`delta[v] += (sigma[v] / sigma[w]) * (1 + delta[w])`。\n            - 如果 `w != s`，那么 `delta[w]` 会贡献给 `w` 的介数中心性。`C_B[w] += delta[w]`。\n\n3.  在遍历完所有 `s`作为源点后，`C_B` 数组包含了和 $\\sum_{s \\neq v \\neq t} \\frac{\\sigma_{st}(v)}{\\sigma_{st}}$。问题要求对 $s  t$ 的对 $(s, t)$ 进行求和。由于图是无向的，从 $s$到 $t$ 的路径与从 $t$到 $s$ 的路径相同。标准算法对所有有序对 $(s,t)$求和。所以，结果需要除以 $2$。给定的公式 $\\sum_{s", "answer": "```python\nimport numpy as np\n\ndef calculate_betweenness(n, adj):\n    \"\"\"\n    Calculates betweenness centrality for all nodes in an unweighted, undirected graph.\n    The implementation is based on Brandes' algorithm.\n    \"\"\"\n    centrality = np.zeros(n, dtype=np.float64)\n\n    for s in range(n):\n        # Step 1: BFS to find shortest paths from s\n        stack = []\n        predecessors = [[] for _ in range(n)]\n        sigma = np.zeros(n, dtype=np.float64)\n        sigma[s] = 1.0\n        dist = np.full(n, -1, dtype=int)\n        dist[s] = 0\n        \n        queue = [s]\n        head = 0\n        while head  len(queue):\n            v = queue[head]\n            head += 1\n            stack.append(v)\n            \n            for w in adj[v]:\n                # w found for the first time?\n                if dist[w]  0:\n                    dist[w] = dist[v] + 1\n                    queue.append(w)\n                \n                # shortest path to w via v?\n                if dist[w] == dist[v] + 1:\n                    sigma[w] += sigma[v]\n                    predecessors[w].append(v)\n\n        # Step 2: Accumulate dependencies\n        delta = np.zeros(n, dtype=np.float64)\n        while stack:\n            w = stack.pop()\n            for v in predecessors[w]:\n                if sigma[w] > 0:\n                    delta[v] += (sigma[v] / sigma[w]) * (1.0 + delta[w])\n            if w != s:\n                centrality[w] += delta[w]\n\n    # For undirected graphs, divide by 2\n    centrality /= 2.0\n    return centrality.tolist()\n\ndef solve():\n    \"\"\"\n    Main function to solve the problem for all given test cases.\n    \"\"\"\n    test_cases = [\n        # Case 1\n        (10, [(0,1),(0,2),(0,3),(3,4),(4,5),(5,0),(0,6),(6,7),(7,8),(8,9)], 2),\n        # Case 2\n        (5, [(0,1),(1,2),(2,3),(3,4)], 1),\n        # Case 3\n        (6, [(0,1),(1,2),(2,0),(3,4),(4,5),(5,3)], 1),\n        # Case 4\n        (8, [(0,1),(1,2),(2,0),(5,6),(6,7),(7,5),(2,3),(3,4),(4,5)], 2),\n    ]\n\n    all_results = []\n    for n, E, k in test_cases:\n        # Build adjacency list\n        adj = [[] for _ in range(n)]\n        for u, v in E:\n            adj[u].append(v)\n            adj[v].append(u)\n\n        # Calculate betweenness centrality\n        centralities = calculate_betweenness(n, adj)\n        \n        # Create a list of (centrality, index) tuples for sorting\n        node_scores = [(centralities[i], i) for i in range(n)]\n        \n        # Sort by centrality (descending) and then index (ascending)\n        node_scores.sort(key=lambda x: (-x[0], x[1]))\n        \n        # Select the top-k node indices\n        top_k_indices = [node[1] for node in node_scores[:k]]\n        all_results.append(top_k_indices)\n\n    # Format the final output string\n    # e.g., [[0,6],[2],[0],[3,4]]\n    output_str = \"[\" + \",\".join([f\"[{','.join(map(str, res))}]\" for res in all_results]) + \"]\"\n    print(output_str)\n\nsolve()\n```", "id": "5003060"}, {"introduction": "20世纪90年代，随着“伤残调整生命年” ($DALY$) 这一综合性疾病负担指标的引入，全球健康领域发生了范式转变。本练习提供了一个基础性的动手实践机会，让你能够从原始数据入手，解构和计算 $DALY$，并区分因过早死亡造成的负担 ($YLL$) 和因残疾造成的负担 ($YLD$)。掌握这种计算方法，是理解“全球疾病负担”研究如何通过比较差异巨大的健康状况来重塑全球健康优先事项的关键。[@problem_id:5003029]", "problem": "在 20 世纪 90 年代中期全球疾病负担项目的早期工作中，引入了伤残调整生命年 (DALY) 的概念，通过汇总过早死亡和非致命性健康结局来量化人口健康损失。考虑一个假设的国家年份，在 $t$ 年期间，一种我们关注的单一急性传染病表现如下：\n\n- 新发病例为 $I = 4{,}700$ 例，平均发病期持续时间为 $d = 0.40$ 年，平均伤残权重为 $w = 0.19$。\n- 归因于该疾病的死亡人数为 $D = 180$ 人，其死亡时的平均年龄对应的标准剩余期望寿命为 $L = 43$ 年。\n\n在基准情景中，假设采用最初的概念，不进行年龄计权和时间贴现。为了历史可比性，将带残生存时间视为在发病期内的恒定流量，并将损失的生命年视为死亡年龄时的标准剩余期望寿命。\n\n任务：\n1. 仅使用因过早死亡损失的时间和带残生存时间的基本定义，计算在基准情景假设下，以伤残调整生命年 (DALY) 衡量的 $t$ 年年度总负担。\n2. 对两个非致命参数 $w$ 和 $d$ 进行单向敏感性分析，即各自独立变动 $\\pm 20\\%$（保持其他所有参数不变），并计算每次变动对应的年度伤残损失生命年 (YLD) 和总 DALY。\n3. 最后，考虑一个旨在模拟 20 世纪 90 年代争议方法学变化的联合敏感性情景：对发病期持续时间和损失的生命年应用 $r = 0.03$ 的连续年贴现率，将 $w$ 和 $d$ 均增加 $15\\%$，并将死亡人数减少 $5\\%$。在此联合敏感性情景下，计算年度总 DALY。\n\n以年为单位表示最终负担。作为最终数值答案，仅报告联合敏感性情景下的年度总 DALY，四舍五入至四位有效数字。", "solution": "该问题陈述经评估有效。它科学地基于公共卫生和流行病学的既定原则，特别是全球疾病负担 (GBD) 框架。该问题设定良好，提供了一套独立且一致的数据和定义，允许得出唯一且有意义的解。所有术语都是客观且可形式化的。\n\n伤残调整生命年 (DALY) 是疾病负担的综合衡量指标，它汇总了因过早死亡损失的生命年 (YLL) 和带残疾或不健康状况生存的年数 (YLD)。基本关系是：\n$$\n\\text{DALY} = \\text{YLL} + \\text{YLD}\n$$\n问题为基准情景分析指定了以下给定值：\n- 新发病例：$I = 4700$\n- 平均发病期持续时间：$d = 0.40$ 年\n- 平均伤残权重：$w = 0.19$\n- 死亡人数：$D = 180$\n- 标准剩余期望寿命：$L = 43$ 年\n\n基准情景假设没有年龄计权和时间贴现。\n\n**任务1：基准情景 DALY 计算**\n首先，我们计算过早死亡损失生命年 (YLL)，即总死亡人数乘以死亡年龄时的标准期望寿命。\n$$\n\\text{YLL}_{\\text{base}} = D \\times L\n$$\n代入给定值：\n$$\n\\text{YLL}_{\\text{base}} = 180 \\times 43 = 7740 \\text{ 年}\n$$\n接下来，我们计算伤残损失生命年 (YLD)，即新发病例数、疾病平均持续时间和伤残权重的乘积。\n$$\n\\text{YLD}_{\\text{base}} = I \\times d \\times w\n$$\n代入给定值：\n$$\n\\text{YLD}_{\\text{base}} = 4700 \\times 0.40 \\times 0.19 = 1880 \\times 0.19 = 357.2 \\text{ 年}\n$$\n基准情景的总 DALY 是 YLL 和 YLD 的总和。\n$$\n\\text{DALY}_{\\text{base}} = \\text{YLL}_{\\text{base}} + \\text{YLD}_{\\text{base}} = 7740 + 357.2 = 8097.2 \\text{ 年}\n$$\n\n**任务2：单向敏感性分析**\n我们分析 YLD 和总 DALY 对非致命参数 $w$ 和 $d$ 独立变动 $\\pm 20\\%$ 的敏感性。在此分析中，YLL 部分保持不变，为 $\\text{YLL} = 7740$。\n\n1.  伤残权重 $w$ 的变动：\n    基准值为 $w = 0.19$。\n    -   $w_{high} = w \\times (1 + 0.20) = 0.19 \\times 1.20 = 0.228$。\n    -   $w_{low} = w \\times (1 - 0.20) = 0.19 \\times 0.80 = 0.152$。\n\n    -   $w_{high}$ 时的 YLD：$\\text{YLD}(w_{high}) = I \\times d \\times w_{high} = 4700 \\times 0.40 \\times 0.228 = 428.64$ 年。\n        总 DALY：$\\text{DALY}(w_{high}) = 7740 + 428.64 = 8168.64$ 年。\n\n    -   $w_{low}$ 时的 YLD：$\\text{YLD}(w_{low}) = I \\times d \\times w_{low} = 4700 \\times 0.40 \\times 0.152 = 285.76$ 年。\n        总 DALY：$\\text{DALY}(w_{low}) = 7740 + 285.76 = 8025.76$ 年。\n\n2.  发病期持续时间 $d$ 的变动：\n    基准值为 $d = 0.40$ 年。\n    -   $d_{high} = d \\times (1 + 0.20) = 0.40 \\times 1.20 = 0.48$ 年。\n    -   $d_{low} = d \\times (1 - 0.20) = 0.40 \\times 0.80 = 0.32$ 年。\n\n    -   $d_{high}$ 时的 YLD：$\\text{YLD}(d_{high}) = I \\times d_{high} \\times w = 4700 \\times 0.48 \\times 0.19 = 428.64$ 年。\n        总 DALY：$\\text{DALY}(d_{high}) = 7740 + 428.64 = 8168.64$ 年。\n\n    -   $d_{low}$ 时的 YLD：$\\text{YLD}(d_{low}) = I \\times d_{low} \\times w = 4700 \\times 0.32 \\times 0.19 = 285.76$ 年。\n        总 DALY：$\\text{DALY}(d_{low}) = 7740 + 285.76 = 8025.76$ 年。\n\n**任务3：联合敏感性情景**\n此情景涉及多个同时发生的变化以及引入连续时间贴现。\n新参数为：\n-   连续年贴现率：$r = 0.03$。\n-   新伤残权重：$w' = w \\times (1 + 0.15) = 0.19 \\times 1.15 = 0.2185$。\n-   新发病期持续时间：$d' = d \\times (1 + 0.15) = 0.40 \\times 1.15 = 0.46$ 年。\n-   新死亡人数：$D' = D \\times (1 - 0.05) = 180 \\times 0.95 = 171$。\n-   新发病例数 $I=4700$ 和期望寿命 $L=43$ 保持不变。\n\n年数流的价值使用连续公式进行贴现。对于一个时间段 $T$，贴现后的价值由以下积分给出：\n$$\n\\int_{0}^{T} \\exp(-rt) dt = \\frac{1 - \\exp(-rT)}{r}\n$$\n\n首先，我们计算贴现后的过早死亡损失生命年 ($YLL_d$)。对于 $D'$ 个死亡中的每一个，损失了 $L$ 年。这些年份的贴现值为：\n$$\n\\text{YLL}_d = D' \\times \\left[ \\frac{1 - \\exp(-rL)}{r} \\right]\n$$\n代入此情景的值：\n$$\n\\text{YLL}_d = 171 \\times \\left[ \\frac{1 - \\exp(-0.03 \\times 43)}{0.03} \\right] = 171 \\times \\left[ \\frac{1 - \\exp(-1.29)}{0.03} \\right]\n$$\n$$\n\\text{YLL}_d \\approx 171 \\times \\left[ \\frac{1 - 0.2752802}{0.03} \\right] = 171 \\times 24.157326 \\approx 4130.9028\n$$\n\n接下来，我们计算贴现后的伤残损失生命年 ($YLD_d$)。$I$ 个病例中的每一个都导致了 $d'$ 年的带残生存，并以 $w'$ 加权。其贴现值为：\n$$\n\\text{YLD}_d = I \\times w' \\times \\left[ \\frac{1 - \\exp(-rd')}{r} \\right]\n$$\n代入值：\n$$\n\\text{YLD}_d = 4700 \\times 0.2185 \\times \\left[ \\frac{1 - \\exp(-0.03 \\times 0.46)}{0.03} \\right] = 4700 \\times 0.2185 \\times \\left[ \\frac{1 - \\exp(-0.0138)}{0.03} \\right]\n$$\n$$\n\\text{YLD}_d \\approx 4700 \\times 0.2185 \\times \\left[ \\frac{1 - 0.9862955}{0.03} \\right] = 1026.95 \\times 0.4568165 \\approx 469.1130\n$$\n\n最后，此联合敏感性情景下的年度总 DALY 是贴现后各部分的总和：\n$$\n\\text{DALY}_{\\text{joint}} = \\text{YLL}_d + \\text{YLD}_d\n$$\n$$\n\\text{DALY}_{\\text{joint}} \\approx 4130.9028 + 469.1130 = 4600.0158\n$$\n问题要求将此结果四舍五入至四位有效数字。数值 $4600.0158$ 四舍五入至四位有效数字为 $4600$。", "answer": "$$\n\\boxed{4600}\n$$", "id": "5003029"}, {"introduction": "量化疾病负担本身不是目的，而是就有限资源投入何处做出更好、更公平决策的工具。本练习模拟了全球健康史上的一个经典辩论：在目标明确的“垂直”项目和全面的“水平”初级卫生保健之间做出选择。通过计算和比较成本效果比，你将学习如何运用 $DALY$ 等指标为循证政策提供信息，并确定采纳新健康干预措施的经济阈值。[@problem_id:5003064]", "problem": "二十世纪初，垂直组织的运动，如洛克菲勒卫生委员会的钩虫控制工作，为针对性疾病项目开创了先例，而后来的运动，如1978年的《阿拉木图宣言》，则强调了全面的基层医疗保健。考虑一个假设的、基于历史背景的比较，该比较发生在一个中等规模国家，时间跨度为十年，所有金额均以2020年不变价美元 (USD) 表示。一个钩虫根除运动 (项目E)，其模型仿照早期的根除努力，但采用了现代化的实施技术，与一个受全面基层医疗保健方法启发的基层医疗保健推广项目 (项目P) 进行比较。\n\n假设十年内的总产出符合以下假设但合理的情景：\n- 项目E的总成本：$180$百万美元，减去因捐赠物资而节省的$2$百万美元，净成本为 $C_{E} = 178 \\times 10^{6}$ 美元。\n- 项目E避免的总残疾调整生命年 (DALY)：$D_{E} = 1.22 \\times 10^{6}$ DALYs。\n- 项目P的总成本：$C_{P} = 90 \\times 10^{6}$ 美元。\n- 项目P避免的总DALY：$D_{P} = 0.90 \\times 10^{6}$ DALYs。\n\n使用残疾调整生命年 (DALY)、平均成本效益比 (ACER)、增量成本效益比 (ICER) 和净货币效益 (NMB) 的基本定义，按以下步骤进行：\n1. 计算每个项目的平均成本效益比，单位为美元/DALY。\n2. 计算项目E相对于项目P的增量成本效益，单位为美元/DALY。\n3. 设决策者对每避免一个DALY的支付意愿阈值为 $\\lambda$ (单位为美元/DALY)。从基本原理出发，推导出决策者在净货币效益基础上对两个项目完全无差异时的 $\\lambda$ 值。\n\n仅提供 $\\lambda$ 的数值作为您的最终答案。最终阈值以美元/DALY表示，并将答案四舍五入至三位有效数字。", "solution": "问题陈述已经过严格验证，被确定为具有科学依据、问题设定良好，并且是卫生经济学原理的客观应用。它为得出唯一且有意义的解决方案提供了所有必要的数据和定义。\n\n该问题要求使用成本效益分析的标准工具，对两个假设的公共卫生项目——项目E（根除）和项目P（基层医疗）——进行分析。给定的参数如下：\n-   项目E的净成本：$C_{E} = 178 \\times 10^{6}$ 美元。\n-   项目E的效益：避免了 $D_{E} = 1.22 \\times 10^{6}$ DALYs。\n-   项目P的净成本：$C_{P} = 90 \\times 10^{6}$ 美元。\n-   项目P的效益：避免了 $D_{P} = 0.90 \\times 10^{6}$ DALYs。\n\n分析将按要求分三步进行：计算每个项目的平均成本效益比 (ACER)，计算项目E相对于项目P的增量成本效益比 (ICER)，最后推导决策者对两个项目无差异时的支付意愿阈值 $\\lambda$。\n\n1.  **平均成本效益比 (ACER)**\n    ACER衡量单个项目中每个健康产出单位（本例中为每避免一个DALY）的平均成本，计算方法为总成本除以总效益。\n    公式为：\n    $$\n    \\text{ACER} = \\frac{\\text{Cost}}{\\text{DALYs averted}}\n    $$\n    对于项目E，其ACER为：\n    $$\n    \\text{ACER}_{E} = \\frac{C_{E}}{D_{E}} = \\frac{178 \\times 10^{6}}{1.22 \\times 10^{6}} \\approx 145.90 \\text{ USD per DALY}\n    $$\n    对于项目P，其ACER为：\n    $$\n    \\text{ACER}_{P} = \\frac{C_{P}}{D_{P}} = \\frac{90 \\times 10^{6}}{0.90 \\times 10^{6}} = 100 \\text{ USD per DALY}\n    $$\n    根据ACER，项目P的平均成本效益更高，因为它每避免一个DALY的成本更低。\n\n2.  **增量成本效益比 (ICER)**\n    ICER用于比较两个项目，其中一个项目比另一个更有效但成本也更高。它量化了为获得一个额外的健康产出单位所需的额外成本。在这里，项目E比项目P成本更高 ($C_{E}  C_{P}$) 且效益更大 ($D_{E}  D_{P}$)，因此适合进行ICER计算。项目P作为比较对象或基准。\n    项目E相对于项目P的ICER公式为：\n    $$\n    \\text{ICER} = \\frac{\\Delta C}{\\Delta D} = \\frac{C_{E} - C_{P}}{D_{E} - D_{P}}\n    $$\n    首先，我们计算增量成本 $\\Delta C$：\n    $$\n    \\Delta C = C_{E} - C_{P} = (178 \\times 10^{6}) - (90 \\times 10^{6}) = 88 \\times 10^{6} \\text{ USD}\n    $$\n    接着，我们计算增量效益 $\\Delta D$：\n    $$\n    \\Delta D = D_{E} - D_{P} = (1.22 \\times 10^{6}) - (0.90 \\times 10^{6}) = 0.32 \\times 10^{6} \\text{ DALYs}\n    $$\n    现在，我们计算ICER：\n    $$\n    \\text{ICER} = \\frac{88 \\times 10^{6}}{0.32 \\times 10^{6}} = \\frac{88}{0.32} = 275 \\text{ USD per DALY}\n    $$\n    这意味着选择项目E而非项目P，每多避免一个DALY，将产生$275$美元的额外成本。\n\n3.  **基于净货币效益 (NMB) 的无差异阈值 ($\\lambda$)**\n    净货币效益 (NMB) 框架使用支付意愿阈值 $\\lambda$ 将健康产出 (DALY) 转化为货币价值。一个项目的NMB计算公式为：\n    $$\n    \\text{NMB} = (\\lambda \\times \\text{DALYs averted}) - \\text{Cost}\n    $$\n    当两个项目的NMB相等时，决策者对它们无差异。我们必须找到满足 $\\text{NMB}_{E} = \\text{NMB}_{P}$ 的 $\\lambda$ 值。\n    从基本原理建立方程：\n    $$\n    (\\lambda \\times D_{E}) - C_{E} = (\\lambda \\times D_{P}) - C_{P}\n    $$\n    为了求解 $\\lambda$，我们重排方程，将含有 $\\lambda$ 的项归集在一起：\n    $$\n    \\lambda \\times D_{E} - \\lambda \\times D_{P} = C_{E} - C_{P}\n    $$\n    提取公因子 $\\lambda$：\n    $$\n    \\lambda (D_{E} - D_{P}) = C_{E} - C_{P}\n    $$\n    分离出 $\\lambda$ 可得：\n    $$\n    \\lambda = \\frac{C_{E} - C_{P}}{D_{E} - D_{P}}\n    $$\n    此推导表明，决策者对两个项目无差异时的 $\\lambda$ 值，恰好等于成本较高项目相对于成本较低项目的增量成本效益比 (ICER)。\n    使用上一步计算出的值：\n    $$\n    \\lambda = \\frac{88 \\times 10^{6}}{0.32 \\times 10^{6}} = 275\n    $$\n    无差异阈值为 $\\lambda = 275$ 美元/DALY。如果决策者的支付意愿高于$275$美元/DALY，则项目E更优，因为它会有更高的NMB。如果 $\\lambda$ 低于$275$美元/DALY，则项目P更优。\n\n    问题要求将最终答案四舍五入至三位有效数字。计算出的值为$275$，该值已有三位有效数字，因此无需四舍五入。", "answer": "$$\n\\boxed{275}\n$$", "id": "5003064"}]}
{"hands_on_practices": [{"introduction": "本练习旨在帮助您掌握Mantel-Haenszel ($MH$) 估计量的核心计算方法。通过处理一个来自多中心研究的假设数据集[@problem_id:4808964]，您将学习如何综合各个分层的数据，从而得出一个控制了混杂变量影响的、统一的关联性度量。这个基本技能是进行更复杂分层分析的基石。", "problem": "临床流行病学中的一项多中心病例对照研究，旨在研究二元暴露与二元疾病结局之间的关联，并通过分层来处理由中心引起的潜在混杂。对于每个层 $i \\in \\{1,2,3\\}$，$2 \\times 2$ 表格的单元格定义如下：$a_i$ 为暴露病例数，$b_i$ 为暴露对照数，$c_i$ 为非暴露病例数，$d_i$ 为非暴露对照数。考虑来自3个中心（层）的数据，其单元格计数分别为 $(a_i,b_i,c_i,d_i) = (10,40,20,30)$、$(5,25,15,55)$ 和 $(12,18,8,62)$。\n\n从 $2 \\times 2$ 表中比值的核心定义以及比值比作为暴露组间比值的比率出发，并假设由于研究设计，各层具有一个共同的层特异性比值比且层的边际固定，推导共同比值比的大样本Mantel-Haenszel (MH) 估计量，其形式为层加权交叉乘积的比率。然后，计算各层的总数 $n_i$，并根据这些数据评估 Mantel-Haenszel 比值比估计值 $\\hat{\\theta}_{MH}$。\n\n将 $n_i$ 报告为精确整数，并将 $\\hat{\\theta}_{MH}$ 四舍五入至四位有效数字。不要使用百分号；将最终结果表示为无单位的纯数字。", "solution": "该问题要求从基本定义出发，推导用于共同比值比的 Mantel-Haenszel (MH) 估计量，并随后对一个来自已分层的病例对照研究的给定数据集进行计算。\n\n**第1部分：Mantel-Haenszel 估计量的推导**\n\n我们首先规范化单个层内的数据结构。对于每个层 $i$，数据可以整理成一个 $2 \\times 2$ 列联表，其中 $D+$ 表示患有疾病（病例），$D-$ 表示未患病（对照），$E+$ 和 $E-$ 分别表示暴露和非暴露。\n\n第 $i$ 层的单元格计数为：\n- $a_i$：暴露病例数 ($E+, D+$)\n- $b_i$：暴露对照数 ($E+, D-$)\n- $c_i$：非暴露病例数 ($E-, D+$)\n- $d_i$：非暴露对照数 ($E-, D-$)\n\n第 $i$ 层的表格如下：\n$$\n\\begin{array}{c|cc|c}\n  D+  D-  \\text{总计} \\\\\n\\hline\nE+  a_i  b_i  a_i+b_i \\\\\nE-  c_i  d_i  c_i+d_i \\\\\n\\hline\n\\text{总计}  a_i+c_i  b_i+d_i  n_i\n\\end{array}\n$$\n其中 $n_i = a_i+b_i+c_i+d_i$ 是第 $i$ 层中研究对象的总数。该问题指明了病例对照研究设计，其中研究对象是根据其疾病状态进行抽样的。在每个层中，病例数 ($n_{1i} = a_i+c_i$) 和对照数 ($n_{0i} = b_i+d_i$) 由研究设计固定。\n\n事件比值的核心定义是事件发生的概率与不发生的概率之比。在病例对照研究中，我们分别对病例和对照估计暴露比值。\n\n在第 $i$ 层中，病例的暴露比值通过暴露病例数与非暴露病例数之比来估计：\n$$\n\\text{Odds}(E+|D+, \\text{stratum } i) = \\frac{a_i}{c_i}\n$$\n在第 $i$ 层中，对照的暴露比值通过暴露对照数与非暴露对照数之比来估计：\n$$\n\\text{Odds}(E+|D-, \\text{stratum } i) = \\frac{b_i}{d_i}\n$$\n第 $i$ 层的比值比（OR），记为 $\\theta_i$，是这两个比值的比率。它量化了该层内暴露与疾病之间的关联。\n$$\n\\hat{\\theta}_i = \\frac{\\text{Odds}(E+|D+, \\text{stratum } i)}{\\text{Odds}(E+|D-, \\text{stratum } i)} = \\frac{a_i/c_i}{b_i/d_i} = \\frac{a_i d_i}{b_i c_i}\n$$\n问题陈述了所有层之间存在一个共同比值比 $\\theta$ 的假设。即 $\\theta_1 = \\theta_2 = \\dots = \\theta_k = \\theta$。我们寻求一个单一的、合并的 $\\theta$ 估计值，该估计值汇集了所有 $k$ 个层的信息。\n\nMantel-Haenszel 估计量 $\\hat{\\theta}_{MH}$ 提供了这样的一个合并估计值。它被构建为层特异性信息的加权平均，旨在具有良好的统计特性，特别是在数据稀疏的情况下。MH 方法不是直接对层特异性比值比 $\\hat{\\theta}_i$ 进行平均（这可能不稳定），而是汇集交叉乘积。\n\nMH 估计量被定义为加权交叉乘积总和的比率。按照要求，其具体形式是通过为每个层选择一个与其总样本量 $n_i$ 成反比的权重来推导的。设“分子”交叉乘积 ($a_i d_i$) 和“分母”交叉乘积 ($b_i c_i$) 的权重为 $w_i = 1/n_i$。这导出了如下估计量：\n$$\n\\hat{\\theta}_{MH} = \\frac{\\sum_{i=1}^k w_i (a_i d_i)}{\\sum_{i=1}^k w_i (b_i c_i)}\n$$\n代入 $w_i = 1/n_i$，我们得到标准的大样本 Mantel-Haenszel 估计量：\n$$\n\\hat{\\theta}_{MH} = \\frac{\\sum_{i=1}^k \\frac{a_i d_i}{n_i}}{\\sum_{i=1}^k \\frac{b_i c_i}{n_i}}\n$$\n该公式将估计量表示为层加权交叉乘积总和的比率，其中每个层的权重是其总样本量的倒数。这就是所要求的推导。\n\n**第2部分：针对给定数据的计算**\n\n问题提供了来自 $k=3$ 个层的数据。\n- 第1层：$(a_1, b_1, c_1, d_1) = (10, 40, 20, 30)$\n- 第2层：$(a_2, b_2, c_2, d_2) = (5, 25, 15, 55)$\n- 第3层：$(a_3, b_3, c_3, d_3) = (12, 18, 8, 62)$\n\n首先，我们计算每个层的研究对象总数 $n_i$。\n$$\nn_1 = a_1 + b_1 + c_1 + d_1 = 10 + 40 + 20 + 30 = 100\n$$\n$$\nn_2 = a_2 + b_2 + c_2 + d_2 = 5 + 25 + 15 + 55 = 100\n$$\n$$\nn_3 = a_3 + b_3 + c_3 + d_3 = 12 + 18 + 8 + 62 = 100\n$$\n各层的总数分别为 $n_1 = 100$, $n_2 = 100$, 和 $n_3 = 100$。\n\n接下来，我们应用 Mantel-Haenszel 公式。我们计算分子，即加权交叉乘积 $\\frac{a_i d_i}{n_i}$ 的总和：\n$$\n\\sum_{i=1}^3 \\frac{a_i d_i}{n_i} = \\frac{a_1 d_1}{n_1} + \\frac{a_2 d_2}{n_2} + \\frac{a_3 d_3}{n_3}\n$$\n$$\n= \\frac{10 \\times 30}{100} + \\frac{5 \\times 55}{100} + \\frac{12 \\times 62}{100}\n$$\n$$\n= \\frac{300}{100} + \\frac{275}{100} + \\frac{744}{100}\n$$\n$$\n= 3.00 + 2.75 + 7.44 = 13.19\n$$\n现在，我们计算分母，即加权交叉乘积 $\\frac{b_i c_i}{n_i}$ 的总和：\n$$\n\\sum_{i=1}^3 \\frac{b_i c_i}{n_i} = \\frac{b_1 c_1}{n_1} + \\frac{b_2 c_2}{n_2} + \\frac{b_3 c_3}{n_3}\n$$\n$$\n= \\frac{40 \\times 20}{100} + \\frac{25 \\times 15}{100} + \\frac{18 \\times 8}{100}\n$$\n$$\n= \\frac{800}{100} + \\frac{375}{100} + \\frac{144}{100}\n$$\n$$\n= 8.00 + 3.75 + 1.44 = 13.19\n$$\n最后，我们计算 Mantel-Haenszel 比值比估计值 $\\hat{\\theta}_{MH}$：\n$$\n\\hat{\\theta}_{MH} = \\frac{\\sum_{i=1}^3 \\frac{a_i d_i}{n_i}}{\\sum_{i=1}^3 \\frac{b_i c_i}{n_i}} = \\frac{13.19}{13.19} = 1\n$$\n问题要求 $\\hat{\\theta}_{MH}$ 的结果四舍五入到四位有效数字。精确值为 $1$。为了用四位有效数字表示，我们写作 $1.000$。\n\n所需的值是：\n- 各层总数: $n_1=100$, $n_2=100$, $n_3=100$。\n- Mantel-Haenszel 比值比估计值: $\\hat{\\theta}_{MH} = 1.000$。", "answer": "$$\n\\boxed{\\begin{pmatrix} 100  100  100  1.000 \\end{pmatrix}}\n$$", "id": "4808964"}, {"introduction": "为什么不能简单地将所有数据合并分析？这个练习[@problem_id:4924632]将通过一个经典的混杂偏倚案例来回答这一问题。您将计算并比较分层特定优势比、粗略优势比以及经校正的MH合并优势比，从而亲身体会分层分析在揭示和校正混杂效应中的关键作用。", "problem": "一项病例对照研究调查了暴露 $X$ 与二元疾病结局 $Y$ 之间的关联，并按就诊时的临床严重程度（两个分层）进行分层。设每个分层由一个 $2 \\times 2$ 表格表示，对于分层 $k$，其单元格为 $(a_k, b_k, c_k, d_k)$，其中 $a_k$ 是暴露病例数，$b_k$ 是暴露非病例数，$c_k$ 是非暴露病例数，$d_k$ 是非暴露非病例数。任何表格中的比值比 (OR) 根据基本原理定义为比值的比率，即 $\\text{OR} = \\dfrac{a d}{b c}$，其中 $a$、$b$、$c$ 和 $d$ 是 $2 \\times 2$ 表格中的单元格计数。粗比值比通过在形成相同比率之前对单元格计数求和来合并分层。以下数据在科学上是合理的，反映了暴露 $X$ 的分布因临床严重程度而有很大差异的情况，这可能会产生混杂。\n\n分层 $1$ (高严重程度):\n- 暴露病例 $a_1 = 500$\n- 暴露非病例 $b_1 = 500$\n- 非暴露病例 $c_1 = 30$\n- 非暴露非病例 $d_1 = 40$\n\n分层 $2$ (低严重程度):\n- 暴露病例 $a_2 = 4$\n- 暴露非病例 $b_2 = 57$\n- 非暴露病例 $c_2 = 200$\n- 非暴露非病例 $d_2 = 3800$\n\n仅使用比值和比值比的定义以及 $2 \\times 2$ 分层分析的标准属性，首先验证通过合并分层形成的粗比值比高于两个层特异性比值比中的任何一个。然后，通过计算跨分层的共同效应的曼特尔-亨塞尔 (Mantel-Haenszel, MH) 合并比值比，来校正由临床严重程度引起的混杂。\n\n请以单个精确既约分数的形式提供最终的曼特尔-亨塞尔合并比值比。不要四舍五入。", "solution": "用户提供的问题已经过验证，具有科学依据、定义明确且客观。这是一个关于分层分析的标准生物统计学练习，需要计算各种比值比。解题步骤如下。\n\n该问题需要三部分计算：\n1.  计算两个分层中每个分层的层特异性比值比 ($\\text{OR}_k$)。\n2.  通过合并分层计算粗比值比 ($\\text{OR}_{\\text{crude}}$)，并验证它大于两个层特异性比值比。\n3.  计算曼特尔-亨塞尔 (Mantel-Haenszel, MH) 合并比值比 ($\\text{OR}_{\\text{MH}}$)，以获得校正后的关联度量。\n\n分层由以下 $2 \\times 2$ 表格定义，其中单元格为 $(a_k, b_k, c_k, d_k)$：\n- 分层 $k=1$ (高严重程度):\n  - $a_1 = 500$ (暴露病例)\n  - $b_1 = 500$ (暴露非病例)\n  - $c_1 = 30$ (非暴露病例)\n  - $d_1 = 40$ (非暴露非病例)\n- 分层 $k=2$ (低严重程度):\n  - $a_2 = 4$ (暴露病例)\n  - $b_2 = 57$ (暴露非病例)\n  - $c_2 = 200$ (非暴露病例)\n  - $d_2 = 3800$ (非暴露非病例)\n\n对于给定的 $2 \\times 2$ 表格，比值比定义为 $\\text{OR} = \\frac{ad}{bc}$。\n\n**1. 层特异性比值比**\n\n对于分层 1：\n$$ \\text{OR}_1 = \\frac{a_1 d_1}{b_1 c_1} = \\frac{(500)(40)}{(500)(30)} = \\frac{40}{30} = \\frac{4}{3} $$\n\n对于分层 2：\n$$ \\text{OR}_2 = \\frac{a_2 d_2}{b_2 c_2} = \\frac{(4)(3800)}{(57)(200)} = \\frac{15200}{11400} = \\frac{152}{114} $$\n为了简化分数 $\\frac{152}{114}$，我们可以找到公因数。$152 = 4 \\times 38$ 且 $114 = 3 \\times 38$。\n$$ \\text{OR}_2 = \\frac{4 \\times 38}{3 \\times 38} = \\frac{4}{3} $$\n层特异性比值比是相同的：$\\text{OR}_1 = \\text{OR}_2 = \\frac{4}{3}$。这表明暴露的效应在临床严重程度的各个分层中是同质的（无效应修饰）。\n\n**2. 粗比值比与验证**\n\n为了计算粗比值比，我们首先通过对相应的单元格计数求和来合并分层：\n- 总暴露病例数：$a = a_1 + a_2 = 500 + 4 = 504$\n- 总暴露非病例数：$b = b_1 + b_2 = 500 + 57 = 557$\n- 总非暴露病例数：$c = c_1 + c_2 = 30 + 200 = 230$\n- 总非暴露非病例数：$d = d_1 + d_2 = 40 + 3800 = 3840$\n\n那么粗比值比为：\n$$ \\text{OR}_{\\text{crude}} = \\frac{ad}{bc} = \\frac{(504)(3840)}{(557)(230)} = \\frac{1935360}{128110} = \\frac{193536}{12811} $$\n为了将其与层特异性比值比进行比较，我们可以近似其值：\n$$ \\text{OR}_{\\text{crude}} \\approx 15.107 $$\n$$ \\text{OR}_1 = \\text{OR}_2 = \\frac{4}{3} \\approx 1.333 $$\n显然，$\\text{OR}_{\\text{crude}}  \\text{OR}_1$ 且 $\\text{OR}_{\\text{crude}}  \\text{OR}_2$。粗比值比显著高估了在每个分层内发现的关联。这是一个典型的混杂例子，其中分层变量（临床严重程度）与暴露和结局都有关联，在未进行适当校正时会产生虚假的总体关联。\n\n**3. 曼特尔-亨塞尔合并比值比**\n\n曼特尔-亨塞尔公式提供了一个合并比值比，该比值比已根据分层变量进行了校正。它是层特异性比值比的加权平均值。公式为：\n$$ \\text{OR}_{\\text{MH}} = \\frac{\\sum_{k=1}^{2} \\frac{a_k d_k}{N_k}}{\\sum_{k=1}^{2} \\frac{b_k c_k}{N_k}} $$\n其中 $N_k = a_k + b_k + c_k + d_k$ 是分层 $k$ 中的总受试者人数。\n\n首先，我们计算每个分层中的总受试者人数：\n- $N_1 = 500 + 500 + 30 + 40 = 1070$\n- $N_2 = 4 + 57 + 200 + 3800 = 4061$\n\n现在，我们计算 $\\text{OR}_{\\text{MH}}$ 公式的分子和分母。\n分子：\n$$ \\sum_{k=1}^{2} \\frac{a_k d_k}{N_k} = \\frac{(500)(40)}{1070} + \\frac{(4)(3800)}{4061} = \\frac{20000}{1070} + \\frac{15200}{4061} $$\n\n分母：\n$$ \\sum_{k=1}^{2} \\frac{b_k c_k}{N_k} = \\frac{(500)(30)}{1070} + \\frac{(57)(200)}{4061} = \\frac{15000}{1070} + \\frac{11400}{4061} $$\n\n我们可以使用层特异性比值比 $\\text{OR}_k = \\frac{a_k d_k}{b_k c_k}$ 来重写分子项，这意味着 $a_k d_k = \\text{OR}_k \\cdot b_k c_k$。\n由于我们发现 $\\text{OR}_1 = \\text{OR}_2 = \\frac{4}{3}$，我们可以将两个分层的 $\\text{OR}_k$ 都替换为 $\\frac{4}{3}$：\n$$ \\sum_{k=1}^{2} \\frac{a_k d_k}{N_k} = \\sum_{k=1}^{2} \\frac{\\left(\\frac{4}{3}\\right) b_k c_k}{N_k} = \\frac{4}{3} \\sum_{k=1}^{2} \\frac{b_k c_k}{N_k} $$\n现在我们可以将曼特尔-亨塞尔比值比表示为：\n$$ \\text{OR}_{\\text{MH}} = \\frac{\\frac{4}{3} \\sum_{k=1}^{2} \\frac{b_k c_k}{N_k}}{\\sum_{k=1}^{2} \\frac{b_k c_k}{N_k}} $$\n项 $\\sum_{k=1}^{2} \\frac{b_k c_k}{N_k}$ 是非负权重的非零和，因此可以从分子和分母中消去。\n$$ \\text{OR}_{\\text{MH}} = \\frac{4}{3} $$\n这个结果证明了曼特尔-亨塞尔估计量的一个关键特性：当所有分层的比值比恒定时（即无效应修饰），MH 合并比值比等于该共同比值比。该计算提供了校正后的共同比值比，它在考虑了临床严重程度的混杂效应后，正确地反映了关联。\n最终答案要求以精确的既约分数形式给出。", "answer": "$$\\boxed{\\frac{4}{3}}$$", "id": "4924632"}, {"introduction": "在处理真实世界的生物统计数据时，我们常常会遇到数据稀疏或单元格计数值为零的情况。本练习[@problem_id:4809054]将引导您处理这一实际挑战，介绍如何应用连续性校正来确保Mantel-Haenszel估计量的稳定性和有效性。通过这个过程，您将更好地理解在不完美数据条件下进行稳健统计推断的重要性。", "problem": "一项医院医学领域的多中心观察性研究评估了暴露于一种新型预防性抗凝剂（暴露）是否与静脉血栓栓塞（结局）减少相关。患者按医院地点进行分层，以控制中心水平的混杂因素。对于每个层 $k \\in \\{1,2,3\\}$，其 $2 \\times 2$ 计数表编码为 $a_k$（暴露有结局），$b_k$（暴露无结局），$c_k$（未暴露有结局），以及 $d_k$（未暴露无结局）。观察到的计数如下：\n- 第 $1$ 层：$a_1=0$，$b_1=18$，$c_1=6$，$d_1=26$。\n- 第 $2$ 层：$a_2=5$，$b_2=25$，$c_2=0$，$d_2=40$。\n- 第 $3$ 层：$a_3=12$，$b_3=30$，$c_3=15$，$d_3=43$。\n\n假设在每个层内，以行和列的边际为条件，单元格计数 $a_k$ 服从超几何模型，并且存在一个跨层的公共比值比。使用 Mantel-Haenszel (MH) 估计量来计算公共比值比。由于存在零单元格计数，请使用以下连续性校正：对于任何包含至少一个零单元格的层，在计算估计量之前，将其四个单元格中的每一个都加上 $0.5$；不要修改没有零单元格的层。\n\n在此连续性校正下，计算 Mantel-Haenszel 公共比值比 $\\hat{\\theta}_{MH}$。将您的答案四舍五入到四位有效数字，并以纯数字形式报告（无单位）。然后，在一则简短的定性评论中，通过与“将所有层的所有四个单元格都加上 $0.5$”这一替代选择进行对比，讨论 $\\hat{\\theta}_{MH}$ 对所选连续性校正的敏感性，但不要改变您报告的数值答案。", "solution": "该问题要求根据分层为三个医院地点的数据，计算 Mantel-Haenszel (MH) 公共比值比 $\\hat{\\theta}_{MH}$。一个特定的连续性校正方案已被指定。\n\n跨越 $K$ 个层的公共比值比 $\\theta$ 的 Mantel-Haenszel 估计量由以下公式给出：\n$$ \\hat{\\theta}_{MH} = \\frac{\\sum_{k=1}^{K} R_k}{\\sum_{k=1}^{K} S_k} = \\frac{\\sum_{k=1}^{K} \\frac{a_k d_k}{n_k}}{\\sum_{k=1}^{K} \\frac{b_k c_k}{n_k}} $$\n其中对于每个层 $k$，$a_k, b_k, c_k, d_k$ 是标准 $2 \\times 2$ 列联表中的单元格计数，而 $n_k = a_k + b_k + c_k + d_k$ 是该层的总计数。\n\n首先，我们必须应用指定的连续性校正。规则是：对于任何包含至少一个零单元格的层，将其四个单元格中的每一个都加上 $0.5$。没有零单元格的层保持不变。\n\n给定的数据是：\n- 第 $1$ 层：$a_1=0$，$b_1=18$，$c_1=6$，$d_1=26$。\n- 第 $2$ 层：$a_2=5$，$b_2=25$，$c_2=0$，$d_2=40$。\n- 第 $3$ 层：$a_3=12$，$b_3=30$，$c_3=15$，$d_3=43$。\n\n第 $1$ 层包含一个零单元格 ($a_1=0$)。因此，我们应用连续性校正：\n- $a'_1 = a_1 + 0.5 = 0 + 0.5 = 0.5$\n- $b'_1 = b_1 + 0.5 = 18 + 0.5 = 18.5$\n- $c'_1 = c_1 + 0.5 = 6 + 0.5 = 6.5$\n- $d'_1 = d_1 + 0.5 = 26 + 0.5 = 26.5$\n校正后第 $1$ 层的总计数为 $n'_1 = a'_1 + b'_1 + c'_1 + d'_1 = 0.5 + 18.5 + 6.5 + 26.5 = 52.0$。\n\n第 $2$ 层包含一个零单元格 ($c_2=0$)。因此，我们应用连续性校正：\n- $a'_2 = a_2 + 0.5 = 5 + 0.5 = 5.5$\n- $b'_2 = b_2 + 0.5 = 25 + 0.5 = 25.5$\n- $c'_2 = c_2 + 0.5 = 0 + 0.5 = 0.5$\n- $d'_2 = d_2 + 0.5 = 40 + 0.5 = 40.5$\n校正后第 $2$ 层的总计数为 $n'_2 = a'_2 + b'_2 + c'_2 + d'_2 = 5.5 + 25.5 + 0.5 + 40.5 = 72.0$。\n\n第 $3$ 层没有零单元格。因此，其计数不被修改：\n- $a'_3 = a_3 = 12$\n- $b'_3 = b_3 = 30$\n- $c'_3 = c_3 = 15$\n- $d'_3 = d_3 = 43$\n第 $3$ 层的总计数为 $n'_3 = n_3 = a_3 + b_3 + c_3 + d_3 = 12 + 30 + 15 + 43 = 100$。\n\n接下来，我们使用（可能已校正的）值计算每个层的分量 $R_k = \\frac{a'_k d'_k}{n'_k}$ 和 $S_k = \\frac{b'_k c'_k}{n'_k}$。\n\n对于第 $1$ 层：\n$$ R_1 = \\frac{a'_1 d'_1}{n'_1} = \\frac{0.5 \\times 26.5}{52.0} = \\frac{13.25}{52.0} \\approx 0.254808 $$\n$$ S_1 = \\frac{b'_1 c'_1}{n'_1} = \\frac{18.5 \\times 6.5}{52.0} = \\frac{120.25}{52.0} = 2.3125 $$\n\n对于第 $2$ 层：\n$$ R_2 = \\frac{a'_2 d'_2}{n'_2} = \\frac{5.5 \\times 40.5}{72.0} = \\frac{222.75}{72.0} = 3.09375 $$\n$$ S_2 = \\frac{b'_2 c'_2}{n'_2} = \\frac{25.5 \\times 0.5}{72.0} = \\frac{12.75}{72.0} \\approx 0.177083 $$\n\n对于第 $3$ 层：\n$$ R_3 = \\frac{a'_3 d'_3}{n'_3} = \\frac{12 \\times 43}{100} = \\frac{516}{100} = 5.16 $$\n$$ S_3 = \\frac{b'_3 c'_3}{n'_3} = \\frac{30 \\times 15}{100} = \\frac{450}{100} = 4.5 $$\n\n现在，我们将这些分量在所有层上求和：\n$$ \\sum_{k=1}^{3} R_k = R_1 + R_2 + R_3 = \\frac{13.25}{52.0} + \\frac{222.75}{72.0} + 5.16 \\approx 0.254808 + 3.09375 + 5.16 = 8.508558 $$\n$$ \\sum_{k=1}^{3} S_k = S_1 + S_2 + S_3 = \\frac{120.25}{52.0} + \\frac{12.75}{72.0} + 4.5 \\approx 2.3125 + 0.177083 + 4.5 = 6.989583 $$\n\n最后，我们计算 Mantel-Haenszel 公共比值比：\n$$ \\hat{\\theta}_{MH} = \\frac{\\sum R_k}{\\sum S_k} \\approx \\frac{8.508558}{6.989583} \\approx 1.217316... $$\n\n将结果四舍五入到四位有效数字，得到 $1.217$。\n\n关于连续性校正的定性评论：\nMantel-Haenszel 估计量 $\\hat{\\theta}_{MH}$ 是层特异性比值比的加权平均值。通过向单元格计数中添加一个较小的值（如 $0.5$）进行的连续性校正，主要旨在处理含有零单元格的层。否则，这些零会导致层特异性比值比为 $0$ 或无穷大，或者其方差未定义，这些都是计算中的问题结果。\n\n问题仅指定了对含有零的层（第 $1$ 层和第 $2$ 层）进行校正。一种替代方法是向*所有*层（包括第 $3$ 层）的所有单元格都加上 $0.5$。$\\hat{\\theta}_{MH}$ 对此选择的敏感性取决于将被额外校正的层的特征。在第 $3$ 层中，单元格计数（$12, 30, 15, 43$）均非零且相当大，向每个单元格添加 $0.5$ 只会引起非常小的扰动。第 $3$ 层的层特异性比值比为 $\\hat{\\theta}_3 = (12 \\times 43)/(30 \\times 15) = 516/450 \\approx 1.147$。如果进行校正，它将变为 $(12.5 \\times 43.5)/(30.5 \\times 15.5) \\approx 1.150$。这个微小的变化，连同其权重（$S_3$）的类似微小变化，对整体 $\\hat{\\theta}_{MH}$ 估计值的影响将是最小的。因此，对于计数较大且没有零的层，是否应用校正的选择对最终的合并估计值几乎没有实际影响。校正的显著影响仅限于那些因存在零而在数学上必须进行校正的层。", "answer": "$$\n\\boxed{1.217}\n$$", "id": "4809054"}]}
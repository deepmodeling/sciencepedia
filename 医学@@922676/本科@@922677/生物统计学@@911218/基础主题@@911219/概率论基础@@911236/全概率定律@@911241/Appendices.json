{"hands_on_practices": [{"introduction": "让我们从一个基础场景开始。这个问题涉及一个两阶段的随机实验：首先，根据一个概率分布选择一个坛子，然后从这个选中的坛子中抽球。这个练习将帮助你掌握全概率定律的核心思想，即将一个复杂事件的概率计算，分解为基于一组互斥且完备事件（在此即选择了哪个坛子）的条件概率的加权平均。[@problem_id:785490]", "problem": "考虑一个由三只不同罐子组成的集合，标记为 $U_1, U_2, U_3$。每只罐子里的物品如下：\n- 罐子 $U_1$ 装有 $R_1$ 个红球和 $B_1$ 个蓝球。\n- 罐子 $U_2$ 装有 $R_2$ 个红球和 $B_2$ 个蓝球。\n- 罐子 $U_3$ 装有 $R_3$ 个红球和 $B_3$ 个蓝球。\n假设对于 $i \\in \\{1, 2, 3\\}$，有 $R_i  1$ 且 $B_i \\ge 0$。\n\n进行一个两阶段的实验。首先，从三只罐子中选择一只。选中某只特定罐子 $U_i$ 的概率与其所含红球数量 $R_i$ 成正比。其次，从选中的罐子中*不放回地*依次取出两个球。\n\n推导第二次取出的球是红球的总概率的闭式解析表达式。用 $R_1, B_1, R_2, B_2, R_3, B_3$ 表示你的答案。", "solution": "1. 选中罐子 $U_i$ 的概率：\n$$P(U_i)=\\frac{R_i}{R_1+R_2+R_3}\\,. $$  \n2. 给定罐子 $U_i$，第二次取出的是红球的概率（不放回）为\n$$P(\\text{第二次红}\\mid U_i)\n=\\frac{R_i}{R_i+B_i}\\cdot\\frac{R_i-1}{R_i+B_i-1}\n+\\frac{B_i}{R_i+B_i}\\cdot\\frac{R_i}{R_i+B_i-1}\n=\\frac{R_i(R_i-1+B_i)}{(R_i+B_i)(R_i+B_i-1)}\n=\\frac{R_i}{R_i+B_i}\\,. $$  \n3. 根据全概率公式，总概率为\n$$\\sum_{i=1}^3P(U_i)\\,P(\\text{第二次红}\\mid U_i)\n=\\sum_{i=1}^3\\frac{R_i}{R_1+R_2+R_3}\\cdot\\frac{R_i}{R_i+B_i}\n=\\frac{\\displaystyle\\sum_{i=1}^3\\frac{R_i^2}{R_i+B_i}}{R_1+R_2+R_3}\\,. $$", "answer": "$$\\boxed{\\frac{\\frac{R_1^2}{R_1+B_1}+\\frac{R_2^2}{R_2+B_2}+\\frac{R_3^2}{R_3+B_3}}{R_1+R_2+R_3}}$$", "id": "785490"}, {"introduction": "现在，让我们来探讨一个动态变化的情景。这个坛子问题模拟了一个概率随时间演变的过程，其中每一步的结果都会改变下一步实验的条件。通过对所有可能的历史路径进行求和，你将体会到全概率定律如何被迭代应用，以理清看似复杂的序贯依赖关系。[@problem_id:785232]", "problem": "一个基于瓮模型的概率过程定义如下：\n1.  初始时，在步骤 $k=0$ 时，一个瓮中装有一个红球和一个黑球。\n2.  在每个步骤 $k=1, 2, 3, \\dots$，从瓮中随机抽取一个球。\n3.  记下所抽出的球的颜色，然后将该球放回瓮中。\n4.  接着，将一个与所抽出的球颜色*相反*的球加入瓮中。在每个步骤，瓮中球的总数增加一个。\n\n计算从瓮中抽出的第三个球（在步骤 $k=3$ 时）是红色的确切概率。", "solution": "设 $r_k,b_k$ 表示在第 $k$ 次抽取前红球和黑球的数量。初始时\n$$r_0=b_0=1.$$\n步骤 1：\n$$P(c_1=R)=\\frac{r_0}{r_0+b_0}=\\frac12,\\quad \nP(c_1=B)=\\frac12.$$\n如果 $c_1=R$，那么 $(r_1,b_1)=(1,2)$；如果 $c_1=B$，那么 $(r_1,b_1)=(2,1)$。\n\n步骤 2：\n情况 1 ($c_1=R$，概率 $1/2$)：\n$$P(c_2=R)=\\frac{1}{1+2}=\\frac13,\\;P(c_2=B)=\\frac23,$$\n得到 $(r_2,b_2)=(1,3)$ 或 $(2,2)$。\n情况 2 ($c_1=B$，概率 $1/2$)：\n$$P(c_2=R)=\\frac{2}{2+1}=\\frac23,\\;P(c_2=B)=\\frac13,$$\n得到 $(r_2,b_2)=(2,2)$ 或 $(3,1)$。\n\n路径、它们的概率以及 $(r_2,b_2)$ 的列表：\n\n1. $R,R$：概率 $\\tfrac12\\cdot\\tfrac13=\\tfrac16$，$(1,3)$\n2. $R,B$：概率 $\\tfrac12\\cdot\\tfrac23=\\tfrac13$，$(2,2)$\n3. $B,R$：概率 $\\tfrac12\\cdot\\tfrac23=\\tfrac13$，$(2,2)$\n4. $B,B$：概率 $\\tfrac12\\cdot\\tfrac13=\\tfrac16$，$(3,1)$\n\n步骤 3：\n$$P(c_3=R)\n=\\sum_{\\text{paths}}P(\\text{path})\\frac{r_2}{r_2+b_2}\n=\\frac{1}{6}\\cdot\\frac{1}{4}\n+\\frac{1}{3}\\cdot\\frac{2}{4}\n+\\frac{1}{3}\\cdot\\frac{2}{4}\n+\\frac{1}{6}\\cdot\\frac{3}{4}\n=\\frac{1+4+4+3}{24}=\\frac{12}{24}=\\frac12.$$", "answer": "$$\\boxed{\\frac{1}{2}}$$", "id": "785232"}, {"introduction": "在许多现实世界的模型中，我们模型中的参数本身可能不是一个确定的值，而是服从某个概率分布。这个问题以一种具体的方式介绍了这个高级概念，即粒子随机游走的步进概率是由掷骰子这一随机事件决定的。这个练习展示了如何运用全概率定律来“平均掉”这种参数不确定性，从而计算出一个总概率，这是贝叶斯统计和高级建模中的一个核心技巧。[@problem_id:785313]", "problem": "一个粒子从一维整数格点上的原点 $x=0$ 开始。首先进行一个初始实验，投掷一个公正的六面骰子。设此次投掷的结果为整数 $D \\in \\{1, 2, 3, 4, 5, 6\\}$。随后，该粒子独立地移动三步。每一步中，向右移动一个单位（即从 $x$ 到 $x+1$）的概率为 $p = D/c$，向左移动一个单位（即从 $x$ 到 $x-1$）的概率为 $q = 1-p$，其中 $c=6$ 是骰子的面数。\n\n计算经过这三步后，粒子位于位置 $x=+1$ 的总概率。", "solution": "1. 定义步进概率\n   $$p=\\frac{D}{c},\\qquad q=1-p=\\frac{c-D}{c}.$$\n2. 对于固定的 $D$，三步后净位移为 $+1$ 需要恰好两次向右移动和一次向左移动：\n   $$P_3(+1\\mid p)=\\binom{3}{2}p^2q=3\\,p^2q=3\\frac{D^2}{c^2}\\frac{c-D}{c}=3\\frac{D^2(c-D)}{c^3}.$$\n3. 对均匀的骰子投掷结果 $D\\in\\{1,\\dots,c\\}$ 进行平均，得到\n   $$P_{\\rm tot}=\\frac{1}{c}\\sum_{D=1}^c3\\frac{D^2(c-D)}{c^3}=\\frac{3}{c^4}\\sum_{D=1}^cD^2(c-D).$$\n4. 符号化地计算该和式：\n   $$\n   \\begin{aligned}\n   \\sum_{D=1}^c D^2(c-D)\n     = c\\sum_{D=1}^c D^2 - \\sum_{D=1}^c D^3 \\\\\n     = c\\frac{c(c+1)(2c+1)}{6} - \\left(\\frac{c(c+1)}{2}\\right)^2 \\\\\n     = \\frac{c^2(c+1)}{12}[2(2c+1) - 3(c+1)] \\\\\n     = \\frac{c^2(c+1)(c-1)}{12} \\\\\n     = \\frac{c^2(c^2-1)}{12}\n   \\end{aligned}\n   $$\n5. 代回：\n   $$P_{\\rm tot}\n     =\\frac{3}{c^4}\\cdot\\frac{c^2(c^2-1)}{12}\n     =\\frac{c^2-1}{4c^2}.$$\n6. 最后，当 $c=6$ 时，\n   $$P_{\\rm tot}=\\frac{6^2-1}{4\\cdot6^2}=\\frac{35}{144}.$$", "answer": "$$\\boxed{\\frac{35}{144}}$$", "id": "785313"}]}
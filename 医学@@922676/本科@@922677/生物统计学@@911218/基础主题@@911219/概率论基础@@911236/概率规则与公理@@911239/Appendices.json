{"hands_on_practices": [{"introduction": "让我们从一个基本练习开始，这个练习旨在检验您对概率核心法则的掌握程度。通过运用补集法则和加法法则（或称容斥原理），您将学会如何在已知部分事件概率的情况下，推导出未知事件的概率，这是概率计算的基本功。[@problem_id:6]", "problem": "考虑一个样本空间 $S$ 和两个事件 $A$ 和 $B$，它们是 $S$ 的子集。事件 $A$ 的概率、事件 $A$ 和 $B$ 的交集的概率，以及事件 $A$ 和 $B$ 的并集的补集的概率是已知的。具体来说，设：\n- 事件 $A$ 的概率为 $P(A) = p_A$。\n- $A$ 和 $B$ 交集的概率为 $P(A \\cap B) = p_{AB}$。\n- $A$ 和 $B$ 并集的补集的概率为 $P((A \\cup B)^c) = p_C$。\n\n仅使用概率论的基本公理，推导出一个用 $p_A$、$p_{AB}$ 和 $p_C$ 表示事件 $B$ 的概率（记为 $P(B)$）的表达式。", "solution": "根据补集法则，\n$$P((A\\cup B)^c)=p_C\\quad\\implies\\quad P(A\\cup B)=1-p_C.$$\n根据容斥原理，\n$$P(A\\cup B)=P(A)+P(B)-P(A\\cap B).$$\n代入已知概率：\n$$1-p_C=p_A+P(B)-p_{AB}.$$\n整理以解出 $P(B)$：\n$$P(B)=1-p_C-p_A+p_{AB}.$$", "answer": "$$\\boxed{1 - p_A - p_C + p_{AB}}$$", "id": "6"}, {"introduction": "掌握了基本法则后，我们来尝试一项更具构建性的任务：从第一性原理出发建立一个完整的概率模型。本练习将引导您仅使用概率公理和独立性定义，推导出二项分布的概率公式，这个分布是描述临床试验中独立重复事件的基础。[@problem_id:4942639]", "problem": "一项随机临床研究招募了 $n$ 名患者接受一种新疗法。对于每位患者 $i \\in \\{1,\\dots,n\\}$，定义一个二元结果 $X_{i}$，其中 $X_{i}=1$ 表示有临床验证的响应，$X_{i}=0$ 表示无响应。假设每位患者具有相同的响应风险 $p \\in (0,1)$，并且从第一性原理的乘积构造意义上说，患者之间的结果是相互独立的。\n\n仅使用柯尔莫哥洛夫概率公理（非负性、归一性、可数可加性）和独立性的定义，构造一个概率空间来表示这 $n$ 个独立同分布的伯努利风险。明确指定样本空间 $\\Omega$、sigma-代数 $\\mathcal{F}$ 和概率测度 $\\mathbb{P}$，使得坐标结果是独立同分布的，且对于每个 $i \\in \\{1,\\dots,n\\}$ 都有 $\\mathbb{P}(X_{i}=1)=p$ 和 $\\mathbb{P}(X_{i}=0)=1-p$。然后，从这些公理和计数论证出发，推导出现恰好 $k$ 个响应的概率，其中 $k \\in \\{0,1,\\dots,n\\}$。\n\n将您的最终答案表示为关于 $n$、$k$ 和 $p$ 的单个闭式解析表达式。无需四舍五入。", "solution": "该问题陈述是概率论中一个适定且基础的练习，具体涉及为一系列独立同分布（i.i.d.）的伯努利试验构造乘积概率空间。它在科学上是合理的，内部是一致的，并包含了推导所要求的概率所需的所有必要信息。因此，我们开始进行解答。\n\n目标是首先构造一个概率空间 $(\\Omega, \\mathcal{F}, \\mathbb{P})$，该空间模拟了 $n$ 名独立患者的结果，每位患者都有一个二元响应。然后，我们必须使用这个构造和基本原理来推导观察到恰好 $k$ 个响应的概率。\n\n**步骤 1：构造概率空间 $(\\Omega, \\mathcal{F}, \\mathbb{P})$**\n\n概率空间是由样本空间 $\\Omega$、事件的 sigma-代数 $\\mathcal{F}$ 和概率测度 $\\mathbb{P}$组成的三元组。\n\n**1. 样本空间 $\\Omega$**\n对于 $n$ 名患者的研究结果是一个长度为 $n$ 的序列，其中第 $i$ 个元素代表患者 $i$ 的结果。由于每个结果 $X_i$ 都是二元的（$1$ 表示响应，$0$ 表示无响应），整个实验的一个基本结果是一个元组 $\\omega = (\\omega_1, \\omega_2, \\dots, \\omega_n)$，其中每个 $\\omega_i \\in \\{0, 1\\}$。样本空间 $\\Omega$ 是所有这种可能序列的集合。这是集合 $\\{0, 1\\}$ 与自身的 $n$ 次笛卡尔积。\n$$ \\Omega = \\{0, 1\\}^n = \\{(\\omega_1, \\omega_2, \\dots, \\omega_n) \\mid \\omega_i \\in \\{0, 1\\} \\text{ for } i=1, \\dots, n\\} $$\n这是一个有限样本空间，包含 $|\\Omega| = 2^n$ 个元素。\n\n**2. Sigma-代数 $\\mathcal{F}$**\n一个事件是 $\\Omega$ 的一个子集。所有事件的集合必须构成一个 sigma-代数 $\\mathcal{F}$。对于像 $\\Omega$ 这样的有限样本空间，最全面和标准的选择是 $\\Omega$ 的幂集，记作 $\\mathcal{P}(\\Omega)$。幂集是 $\\Omega$ 的所有子集的集合。\n$$ \\mathcal{F} = \\mathcal{P}(\\Omega) $$\n这个选择不言而喻地满足了 sigma-代数的公理：\n   - $\\Omega \\in \\mathcal{F}$ （因为 $\\Omega \\subseteq \\Omega$）。\n   - 如果 $A \\in \\mathcal{F}$，那么它的补集 $A^c = \\Omega \\setminus A$ 也是 $\\Omega$ 的一个子集，因此 $A^c \\in \\mathcal{F}$。\n   - 如果 $A_1, A_2, \\dots$ 是 $\\mathcal{F}$ 中任意一个（有限或可数的）集合族，它们的并集 $\\bigcup_i A_i$ 也是 $\\Omega$ 的一个子集，因此也在 $\\mathcal{F}$ 中。\n\n**3. 概率测度 $\\mathbb{P}$**\n概率测度 $\\mathbb{P}: \\mathcal{F} \\to [0, 1]$ 为 $\\mathcal{F}$ 中的每个事件分配一个概率。为了满足柯尔莫哥洛夫公理以及问题中独立同分布的条件，我们首先定义每个基本结果 $\\omega \\in \\Omega$ 的概率。\n\n问题陈述，患者的结果是独立的，并且对于每个患者 $i$，响应的概率是 $\\mathbb{P}(X_i=1) = p$，无响应的概率是 $\\mathbb{P}(X_i=0) = 1-p$。一个基本结果 $\\omega = (\\omega_1, \\dots, \\omega_n)$ 代表了 $n$ 个独立结果的联合发生。事件 $\\{\\omega\\}$ 是事件 $E_i = \\{\\text{患者 } i \\text{ 的结果是 } \\omega_i\\}$（对于 $i=1, \\dots, n$）的交集。\n\n根据独立性的定义，独立事件交集的概率是它们各自概率的乘积。\n$$ \\mathbb{P}(\\{\\omega\\}) = \\mathbb{P}(\\text{结果 1 是 } \\omega_1, \\dots, \\text{结果 } n \\text{ 是 } \\omega_n) = \\prod_{i=1}^{n} \\mathbb{P}(\\text{结果 } i \\text{ 是 } \\omega_i) $$\n我们已知 $\\mathbb{P}(\\text{结果 } i \\text{ 是 } 1) = p$ 和 $\\mathbb{P}(\\text{结果 } i \\text{ 是 } 0) = 1-p$。这可以紧凑地写成 $\\mathbb{P}(\\text{结果 } i \\text{ 是 } \\omega_i) = p^{\\omega_i} (1-p)^{1-\\omega_i}$，因为如果 $\\omega_i=1$，这个表达式是 $p^1(1-p)^0=p$，如果 $\\omega_i=0$，它是 $p^0(1-p)^1=1-p$。\n\n因此，对于一个基本结果 $\\omega = (\\omega_1, \\dots, \\omega_n)$，其概率为：\n$$ \\mathbb{P}(\\{\\omega\\}) = \\prod_{i=1}^{n} p^{\\omega_i} (1-p)^{1-\\omega_i} = p^{\\sum_{i=1}^n \\omega_i} (1-p)^{\\sum_{i=1}^n (1-\\omega_i)} = p^{\\sum_{i=1}^n \\omega_i} (1-p)^{n - \\sum_{i=1}^n \\omega_i} $$\n令 $s(\\omega) = \\sum_{i=1}^n \\omega_i$ 为序列 $\\omega$ 中响应（1）的次数。那么这个特定序列的概率是：\n$$ \\mathbb{P}(\\{\\omega\\}) = p^{s(\\omega)} (1-p)^{n-s(\\omega)} $$\n对于任何事件 $A \\in \\mathcal{F}$（它是一个基本结果的集合），根据第三条柯尔莫哥洛夫公理（可数可加性，对于有限空间简化为有限可加性），其概率是它所包含的基本结果概率的总和：\n$$ \\mathbb{P}(A) = \\sum_{\\omega \\in A} \\mathbb{P}(\\{\\omega\\}) $$\n我们必须验证这个测度满足前两条柯尔莫哥洛夫公理。\n- **公理 1 (非负性):** 由于 $p \\in (0, 1)$，我们有 $p > 0$ 和 $1-p > 0$。因此，对于任意 $\\omega$，$\\mathbb{P}(\\{\\omega\\}) = p^{s(\\omega)} (1-p)^{n-s(\\omega)} \\ge 0$。任何事件 $A$ 的概率是这些非负项的和，所以 $\\mathbb{P}(A) \\ge 0$。\n- **公理 2 (归一性):** 我们必须证明 $\\mathbb{P}(\\Omega)=1$。\n$$ \\mathbb{P}(\\Omega) = \\sum_{\\omega \\in \\Omega} \\mathbb{P}(\\{\\omega\\}) = \\sum_{\\omega \\in \\Omega} p^{s(\\omega)} (1-p)^{n-s(\\omega)} $$\n我们可以根据响应的次数 $k = s(\\omega)$ 对基本结果进行分组。对于一个固定的 $k \\in \\{0, 1, \\dots, n\\}$，恰好有 $k$ 个响应的序列 $\\omega$ 的数量，等于从 $n$ 个位置中为‘1’选择 $k$ 个位置的方法数，这由二项式系数 $\\binom{n}{k}$ 给出。每个这样的序列都具有相同的概率 $p^k(1-p)^{n-k}$。\n$$ \\mathbb{P}(\\Omega) = \\sum_{k=0}^{n} \\left( \\sum_{\\omega: s(\\omega)=k} p^k (1-p)^{n-k} \\right) = \\sum_{k=0}^{n} \\binom{n}{k} p^k (1-p)^{n-k} $$\n这个和是 $(p + (1-p))^n$ 的二项式展开。\n$$ \\mathbb{P}(\\Omega) = (p + (1-p))^n = 1^n = 1 $$\n归一性公理得到满足。概率空间现已完全并正确地构造完成。\n\n**步骤 2：推导恰好有 $k$ 个响应的概率**\n\n我们需要求出恰好有 $k$ 个响应这一事件的概率。我们用 $E_k$ 表示这个事件。在我们样本空间的形式体系中，这个事件是所有恰好包含 $k$ 个 1 的基本结果 $\\omega$ 的集合。\n$$ E_k = \\{\\omega \\in \\Omega \\mid s(\\omega) = \\sum_{i=1}^n \\omega_i = k\\} $$\n由于 $E_k \\subseteq \\Omega$，$E_k$ 是我们 sigma-代数 $\\mathcal{F}$ 中的一个事件。利用概率测度的可加性，其概率是构成它的基本结果概率的总和：\n$$ \\mathbb{P}(E_k) = \\sum_{\\omega \\in E_k} \\mathbb{P}(\\{\\omega\\}) $$\n如步骤 1 所述，对于 $E_k$ 中的任何单个结果 $\\omega$，响应的次数为 $s(\\omega)=k$。这个特定结果的概率是：\n$$ \\mathbb{P}(\\{\\omega\\}) = p^k (1-p)^{n-k} $$\n关键在于，事件 $E_k$ 中的每个基本结果都具有完全相同的概率。因此，总和可以简化为这些结果的数量乘以这个共同的概率值：\n$$ \\mathbb{P}(E_k) = |E_k| \\times p^k (1-p)^{n-k} $$\n最后的任务是确定 $|E_k|$，即 $E_k$ 中元素的数量。这是一个纯粹的组合问题：我们需要计算长度为 $n$ 且恰好有 $k$ 个 1（因此有 $n-k$ 个 0）的不同二进制序列的数量。这等价于从 $n$ 个可用位置中为 1 选择 $k$ 个位置。完成此操作的方法数由二项式系数“n 选 k”给出：\n$$ |E_k| = \\binom{n}{k} = \\frac{n!}{k!(n-k)!} $$\n将这个计数结果代入概率表达式，我们得到观察到恰好 $k$ 个响应的概率：\n$$ \\mathbb{P}(E_k) = \\binom{n}{k} p^k (1-p)^{n-k} $$\n这个结果，即二项分布的概率质量函数，已按要求从第一性原理推导得出。", "answer": "$$ \\boxed{\\binom{n}{k} p^k (1-p)^{n-k}} $$", "id": "4942639"}, {"introduction": "与上一个练习中的独立事件不同，许多现实场景（如临床试验中的随机分组）涉及“无放回抽样”，导致事件之间相互依赖。本练习要求您基于完全随机化的对称性，从头推导超几何分布的概率，这对于理解随机对照试验的设计和分析至关重要。[@problem_id:4942627]", "problem": "一个生物统计学研究团队计划进行一项采用无放回完全随机化的临床试验。共有 $N$ 名标记的参与者，其中 $K$ 名具有某种基线特征（例如，特定的生物标志物阳性），而 $N-K$ 名则不具备。该试验将精确地分配 $n$ 名参与者到治疗组，其余的到对照组，并且从 $N$ 名参与者中选出的每一个规模为 $n$ 的子集被选入治疗组的可能性都相等。\n\n仅使用概率公理（非负性、归一性和不相交事件的可加性）以及由完全随机化引出的对称性，从第一性原理推导一个解析表达式，用于计算 $K$ 名特征阳性参与者中恰好有 $k$ 名被分配到治疗组的概率。\n\n然后，当 $N=20$、$K=8$、$n=6$ 和 $k=3$ 时，对你推导的表达式进行数值计算。将最终数值以保留四位有效数字的小数形式表示。", "solution": "首先将对问题陈述的科学合理性、完整性和客观性进行验证。\n\n### 第1步：提取已知条件\n- 参与者总数：$N$\n- 具有基线特征的参与者人数：$K$\n- 不具有该特征的参与者人数：$N-K$\n- 分配到治疗组的参与者人数：$n$\n- 分配机制：无放回的完全随机化，其中每个可能的 $n$ 人子集被选入治疗组的概率均等。\n- 目标：从第一性原理（概率公理和对称性）推导 $K$ 名特征阳性参与者中恰好有 $k$ 名被分配到治疗组的概率。\n- 数值计算：提供当 $N=20$, $K=8$, $n=6$, 和 $k=3$ 时此概率的数值，保留四位有效数字。\n\n### 第2步：使用提取的已知条件进行验证\n- **科学依据**：该问题描述了一个简单的随机对照试验中的随机分配过程。其设置是一个经典的组合概率问题，这是超几何分布的基础。这是生物统计学中一个标准和基本的概念。该问题在科学上和数学上都是合理的。\n- **适定性**：该问题是适定的。总体参数（$N$、$K$）、样本量（$n$）和感兴趣的特征（$k$）都有明确定义。随机化机制（“等可能”）在样本空间上指定了一个均匀概率测度。存在一个唯一且有意义的解。\n- **客观性**：语言精确、量化，并且没有主观或含糊的术语。\n- **完整性**：推导通用公式和计算特定数值实例所需的所有信息都已提供。没有缺失或矛盾的数据。\n\n### 第3步：结论与行动\n该问题是有效的，因为它具有科学依据、适定且完整。将提供完整的解答。\n\n### 从第一性原理推导\n\n**1. 定义样本空间 ($\\Omega$) 和概率测度 ($P$)**\n实验内容是从总共 $N$ 名参与者中选出 $n$ 名进入治疗组。由于分配是通过无放回完全随机化进行的，并且每个规模为 $n$ 的子集都是等可能的，因此选择的顺序无关紧要。样本空间 $\\Omega$ 是从 $N$ 人总体中选出的所有可能的 $n$ 人子集的集合。\n\n这种子集的总数由二项式系数 $\\binom{N}{n}$ 给出。\n$$|\\Omega| = \\binom{N}{n} = \\frac{N!}{n!(N-n)!}$$\n问题陈述指出，这些基本结果（每个特定的子集）中的每一个都是等可能的。这就是对称性原理。设 $\\omega$ 为 $\\Omega$ 中的任意一个基本结果。根据归一化公理，所有基本结果的概率之和必须为 $1$。\n$$P(\\Omega) = \\sum_{\\omega \\in \\Omega} P(\\omega) = 1$$\n根据对称性，对于 $\\Omega$ 中的任意两个基本结果 $\\omega_i, \\omega_j$，有 $P(\\omega_i) = P(\\omega_j)$。因此，任何单个基本结果 $\\omega$ 的概率为：\n$$P(\\omega) = \\frac{1}{|\\Omega|} = \\frac{1}{\\binom{N}{n}}$$\n\n**2. 定义目标事件 ($E_k$)**\n我们感兴趣的事件，称之为 $E_k$，是 $K$ 名特征阳性参与者中恰好有 $k$ 名被分配到治疗组。要使此事件发生，所选的规模为 $n$ 的治疗组必须由两个不同的组构成：\n- 恰好有 $k$ 名参与者是从具有该特征的 $K$ 名参与者中选出的。\n- 其余的 $n-k$ 名参与者是从不具有该特征的 $N-K$ 名参与者中选出的。\n\n**3. 计算有利结果的数量 ($|E_k|$)**\n我们使用基本计数原理来确定组成满足事件 $E_k$ 条件的治疗组的方法数。\n- 从具有该特征的 $K$ 名参与者中选择 $k$ 名的方法数是 $\\binom{K}{k}$。\n- 从不具有该特征的 $N-K$ 名参与者中选择 $n-k$ 名的方法数是 $\\binom{N-K}{n-k}$。\n\n由于这两个选择是独立的，满足事件 $E_k$ 的不同规模为 $n$ 的子集的总数是这两个量的乘积：\n$$|E_k| = \\binom{K}{k} \\binom{N-K}{n-k}$$\n\n**4. 计算事件的概率 ($P(E_k)$)**\n一个事件的概率是构成该事件的不相交基本结果的概率之和。根据不相交事件的可加性公理：\n$$P(E_k) = \\sum_{\\omega \\in E_k} P(\\omega)$$\n由于所有基本结果都是等可能的，其概率为 $P(\\omega) = 1/|\\Omega|$，这个和就变成：\n$$P(E_k) = |E_k| \\times P(\\omega) = \\frac{|E_k|}{|\\Omega|}$$\n代入 $|E_k|$ 和 $|\\Omega|$ 的表达式，我们得到概率的通用公式：\n$$P(X=k) = \\frac{\\binom{K}{k} \\binom{N-K}{n-k}}{\\binom{N}{n}}$$\n这个表达式完全由组合计数论证推导而来，而这些论证本身是在对称性施加的均匀概率测度下，将概率公理应用于有限样本空间的结果。这就是超几何分布的概率质量函数。\n\n### 数值计算\n我们被要求对该表达式使用以下特定值进行计算：\n- $N = 20$ (参与者总数)\n- $K = 8$ (具有特征的参与者)\n- $n = 6$ (治疗组的参与者)\n- $k = 3$ (治疗组中具有特征的参与者)\n\n我们需要计算 $P(X=3)$。首先，我们计算所需的二项式系数。\n从 $K=8$ 名具有该特征的参与者中选择 $k=3$ 名的方法数是：\n$$\\binom{8}{3} = \\frac{8!}{3!(8-3)!} = \\frac{8!}{3!5!} = \\frac{8 \\times 7 \\times 6}{3 \\times 2 \\times 1} = 56$$\n从 $N-K = 20-8 = 12$ 名不具有该特征的参与者中选择余下的 $n-k = 6-3 = 3$ 名参与者的方法数是：\n$$\\binom{12}{3} = \\frac{12!}{3!(12-3)!} = \\frac{12!}{3!9!} = \\frac{12 \\times 11 \\times 10}{3 \\times 2 \\times 1} = 2 \\times 11 \\times 10 = 220$$\n从总共 $N=20$ 名参与者中选择 $n=6$ 人的治疗组的总方法数是：\n$$\\binom{20}{6} = \\frac{20!}{6!(20-6)!} = \\frac{20!}{6!14!} = \\frac{20 \\times 19 \\times 18 \\times 17 \\times 16 \\times 15}{6 \\times 5 \\times 4 \\times 3 \\times 2 \\times 1} = 38760$$\n现在，我们将这些值代入概率公式：\n$$P(X=3) = \\frac{\\binom{8}{3} \\binom{12}{3}}{\\binom{20}{6}} = \\frac{56 \\times 220}{38760}$$\n$$P(X=3) = \\frac{12320}{38760}$$\n将分子和分母相除得到小数值：\n$$P(X=3) \\approx 0.317853457...$$\n保留四位有效数字，我们得到：\n$$P(X=3) \\approx 0.3179$$\n这就是在8名特征阳性参与者中，恰好有3名被分配到6人治疗组的概率。", "answer": "$$\\boxed{0.3179}$$", "id": "4942627"}]}
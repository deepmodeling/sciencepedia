{"hands_on_practices": [{"introduction": "总结分类数据的第一步是描述其分布。这通常涉及计算每个类别的比例，但我们还可以使用信息论中的“熵”这一概念来量化分布的异质性或不确定性。这个练习将指导你计算经验比例和经验熵，为你提供描述单个分类变量分布的基本技能[@problem_id:4955379]。", "problem": "一项基于人群的吸烟调查将每位成年参与者的吸烟状况分为三个互斥的类别：从不吸烟者、曾经吸烟者和当前吸烟者。在一个大小为 $n=250$ 的简单随机样本中，观测到的计数为：从不吸烟者 $=120$ 人，曾经吸烟者 $=80$ 人，当前吸烟者 $=50$ 人。从分类分布可通过样本计数计算的经验比例来总结，且分布异质性可通过使用自然对数定义的信息度量来量化的核心定义出发，执行以下操作：\n\n- 计算归一化的经验比例 $\\hat{p}_{\\text{never}}$、$\\hat{p}_{\\text{former}}$ 和 $\\hat{p}_{\\text{current}}$。\n- 使用信息论中针对离散经验分布的熵概念（使用自然对数），计算吸烟状况分布的经验熵 $H$，单位为奈特 (nats)。\n- 通过将计算出的 $H$ 值与三个类别可达到的上界进行比较，简要解释其异质性程度。\n\n报告 $H$ 的数值（单位为奈特），并将报告值四舍五入到四位有效数字。最终答案必须是单个实数值。", "solution": "对问题陈述进行有效性评估。\n\n逐字提取给定条件：\n-   人群被分为三个互斥的类别：从不吸烟者、曾经吸烟者和当前吸烟者。\n-   样本大小为 $n=250$。\n-   观测计数为：从不吸烟者 $=120$ 人，曾经吸烟者 $=80$ 人，当前吸烟者 $=50$ 人。\n-   任务是计算归一化的经验比例 $\\hat{p}_{\\text{never}}$、$\\hat{p}_{\\text{former}}$ 和 $\\hat{p}_{\\text{current}}$。\n-   任务是使用自然对数计算经验熵 $H$，单位为奈特。\n-   任务是通过将 $H$ 与其在三个类别下的上界进行比较来解释异质性程度。\n-   最终报告的 $H$ 值必须四舍五入到四位有效数字。\n\n根据指定标准对问题进行验证：\n-   **科学依据**：该问题基于生物统计学和信息论中的标准基本概念，即从计数数据计算经验比例和应用香农熵来量化分布异质性。这些是公认且普遍接受的原则。\n-   **提法明确**：该问题是自洽的。所有必要的数据（样本大小和类别计数）均已提供。指令清晰，定义（例如，使用自然对数计算熵）明确，可导出一个唯一且有意义的解。\n-   **客观性**：该问题以精确、客观的语言陈述，不含任何主观或基于观点的论断。\n\n该问题没有任何缺陷。计数总和 $120 + 80 + 50 = 250$ 与总样本大小 $n=250$ 相符，确保了内部一致性。该问题是统计学原理的标准应用。\n\n结论：该问题有效。将提供完整的解题步骤。\n\n解题过程按问题陈述的要求分三步进行。\n\n首先，我们计算每个吸烟状况类别的归一化经验比例。类别 $i$ 的经验比例，记作 $\\hat{p}_i$，是该类别中的观测数量 $n_i$ 与总样本大小 $n$ 的比值。\n给定 $n=250$，以及计数 $n_{\\text{never}} = 120$，$n_{\\text{former}} = 80$ 和 $n_{\\text{current}} = 50$。\n\n从不吸烟者的经验比例为：\n$$\n\\hat{p}_{\\text{never}} = \\frac{n_{\\text{never}}}{n} = \\frac{120}{250} = 0.48\n$$\n曾经吸烟者的经验比例为：\n$$\n\\hat{p}_{\\text{former}} = \\frac{n_{\\text{former}}}{n} = \\frac{80}{250} = 0.32\n$$\n当前吸烟者的经验比例为：\n$$\n\\hat{p}_{\\text{current}} = \\frac{n_{\\text{current}}}{n} = \\frac{50}{250} = 0.20\n$$\n作为一致性检查，这些比例的总和必须为 $1$：\n$$\n\\hat{p}_{\\text{never}} + \\hat{p}_{\\text{former}} + \\hat{p}_{\\text{current}} = 0.48 + 0.32 + 0.20 = 1.00\n$$\n检查成功。\n\n第二，我们计算该分布的经验熵 $H$。对于具有 $K$ 个类别的离散概率分布，使用自然对数的香农熵定义为：\n$$\nH = -\\sum_{i=1}^{K} p_i \\ln(p_i)\n$$\n当使用自然对数时，$H$ 的单位是奈特 (nats)。对于我们具有 $K=3$ 个类别的经验分布，熵是使用计算出的经验比例来计算的：\n$$\nH = - \\left( \\hat{p}_{\\text{never}} \\ln(\\hat{p}_{\\text{never}}) + \\hat{p}_{\\text{former}} \\ln(\\hat{p}_{\\text{former}}) + \\hat{p}_{\\text{current}} \\ln(\\hat{p}_{\\text{current}}) \\right)\n$$\n代入比例的数值：\n$$\nH = - \\left( 0.48 \\ln(0.48) + 0.32 \\ln(0.32) + 0.20 \\ln(0.20) \\right)\n$$\n我们计算每一项的值：\n$$\n\\ln(0.48) \\approx -0.73396919\n$$\n$$\n\\ln(0.32) \\approx -1.13943428\n$$\n$$\n\\ln(0.20) \\approx -1.60943791\n$$\n现在，我们计算乘积：\n$$\n0.48 \\ln(0.48) \\approx 0.48 \\times (-0.73396919) \\approx -0.35230521\n$$\n$$\n0.32 \\ln(0.32) \\approx 0.32 \\times (-1.13943428) \\approx -0.36461897\n$$\n$$\n0.20 \\ln(0.20) \\approx 0.20 \\times (-1.60943791) \\approx -0.32188758\n$$\n将这些乘积相加：\n$$\n\\sum_{i} \\hat{p}_i \\ln(\\hat{p}_i) \\approx -0.35230521 - 0.36461897 - 0.32188758 = -1.03881176\n$$\n最后，我们通过对这个和取负来计算 $H$：\n$$\nH = -(-1.03881176) \\approx 1.03881176 \\, \\text{nats}\n$$\n问题要求将结果四舍五入到四位有效数字。\n$$\nH \\approx 1.039 \\, \\text{nats}\n$$\n\n第三，我们解释异质性的程度。熵量化了分布的不确定性，或者在此情境下，量化了分布的异质性。$H=0$ 的值对应于完全同质性，即所有观测值都落入单个类别中。最大可能熵 $H_{\\text{max}}$ 对应于最大异质性，这在分布是均匀（即所有类别等可能）时发生。\n\n对于一个有 $K=3$ 个类别的分布，当 $p_1 = p_2 = p_3 = 1/3$ 时达到最大熵。这个最大熵的值是：\n$$\nH_{\\text{max}} = -\\sum_{i=1}^{3} \\frac{1}{3} \\ln\\left(\\frac{1}{3}\\right) = -3 \\left(\\frac{1}{3} \\ln\\left(\\frac{1}{3}\\right)\\right) = -\\ln\\left(\\frac{1}{3}\\right) = \\ln(3)\n$$\n最大熵的数值是：\n$$\nH_{\\text{max}} = \\ln(3) \\approx 1.09861 \\, \\text{nats}\n$$\n计算出的经验熵为 $H \\approx 1.039$ 奈特。这个值非常接近最大可能熵 $H_{\\text{max}} \\approx 1.099$ 奈特。观测熵与最大可能熵的比值为 $\\frac{1.039}{1.0986} \\approx 0.946$。这意味着对于三个类别，观测到的分布表现出大约 $94.6\\%$ 的最大可能异质性。因此，样本中的吸烟状况是高度异质的，表明个体相当均匀地分布在三个类别中，而不是集中在一两个类别中。\n要求的最终数值答案是 $H$ 的值，四舍五入到四位有效数字。", "answer": "$$\n\\boxed{1.039}\n$$", "id": "4955379"}, {"introduction": "在比较不同人群的事件率（如死亡率）时，年龄等变量可能会成为混杂因素，扭曲我们的结论。直接标准化是一种经典方法，通过将研究人群的特定年龄组率应用于一个“标准”人口结构来解决这个问题。通过这个练习，你将学习如何计算一个调整后的率，从而能够对不同人群进行更公平的比较[@problem_id:4955343]。", "problem": "一位流行病学家旨在通过使用直接标准化法，以一个固定的标准人口为基准进行校正，来总结一个跨越 $4$ 个年龄分层的二元结局（一年全因死亡率，死亡记为 $1$，生存记为 $0$），同时控制年龄分布的差异。研究人口提供了按年龄分层的死亡人数和人口规模，而一个外部标准人口提供了总和为 $1$ 的分层权重。\n\n仅从分层人口中风险即为概率的定义以及全概率公式出发，推導出一个用标准人口的分层权重和研究人口的分层特异性风险表示的直接标准化一年期风险的表达式。然后使用以下数据计算直接标准化一年期风险。\n\n按年龄组 $s \\in \\{1,2,3,4\\}$ 分列的研究人口数据：\n- 年龄组 $1$（$0$–$44$ 岁）：死亡人数 $D_1 = 45$，人口规模 $N_1 = 40000$。\n- 年龄组 $2$（$45$–$64$ 岁）：死亡人数 $D_2 = 118$，人口规模 $N_2 = 20000$。\n- 年龄组 $3$（$65$–$74$ 岁）：死亡人数 $D_3 = 171$，人口规模 $N_3 = 8000$。\n- 年龄组 $4$（$75$ 岁及以上）：死亡人数 $D_4 = 315$，人口规模 $N_4 = 4000$。\n\n标准人口分层权重：\n- $w_1 = 0.46$, $w_2 = 0.28$, $w_3 = 0.16$, $w_4 = 0.10$，满足 $\\sum_{s=1}^{4} w_s = 1$。\n\n将每个年龄组的经验性分层特异性风险视为该分层中观测到的死亡比例。使用推导出的表达式计算直接标准化一年期风险。请以小数（而非百分比）形式表示您的最终答案，并将最终数值答案四舍五入到五位有效数字。", "solution": "题目陈述经评估有效。它基于已确立的生物统计学方法——直接标准化法，具有科学依据；问题提法得当，提供了所有必要数据；且使用客观、明确的语言进行表述。\n\n目标是推导直接标准化风险的表达式，然后计算其值。\n\n**1. 直接标准化风险公式的推导**\n\n设 $E$ 为随机抽取个体在一年内死亡的事件。死亡风险即为该事件的概率 $P(E)$。\n设人口被划分为 $k$ 个互斥且穷尽的分层，由 $s \\in \\{1, 2, \\dots, k\\}$ 索引。在本题中，有 $k=4$ 个年龄分层。\n设 $S$ 为代表个体所属分层的随机变量。个体属于分层 $s$ 的事件表示为 $\\{S=s\\}$。\n\n根据全概率公式，事件 $E$ 的总概率可以表示为关于条件事件 $\\{S=s\\}$ 的总和：\n$$P(E) = \\sum_{s=1}^{k} P(E | S=s) P(S=s)$$\n\n在此背景下：\n- $P(E | S=s)$ 是分层 $s$ 的分层特异性风险，我们记为 $r_s$。这是已知属于分层 $s$ 的个体的死亡概率。\n- $P(S=s)$ 是属于分层 $s$ 的人口占总人口的比例。\n\n因此，任何给定人口的总风险 $R$ 的公式是分层特异性风险的加权平均，其中权重是各分层的人口比例：\n$$R = \\sum_{s=1}^{k} r_s P(S=s)$$\n\n直接标准化的目的是计算，如果研究人口具有特定标准人口的年龄结构，将会观察到的总风险。为此，我们将来自*研究人口*的分层特异性风险 ($r_s$) 与来自*标准人口*的分层比例相结合。\n\n题目提供了来自标准人口的分层权重 $w_s$。这些权重代表标准人口在各分层中的比例，因此对于标准人口而言，$w_s = P(S=s)$。根据定义，$\\sum_{s=1}^{k} w_s = 1$。\n\n在通用风险公式中用 $w_s$ 替换 $P(S=s)$，即可得到直接标准化风险 $R_{std}$ 的表达式：\n$$R_{std} = \\sum_{s=1}^{k} r_s w_s$$\n对于本题中 $k=4$ 个分层的情况，公式为：\n$$R_{std} = \\sum_{s=1}^{4} r_s w_s = r_1 w_1 + r_2 w_2 + r_3 w_3 + r_4 w_4$$\n\n**2. 直接标准化风险的计算**\n\n首先，我们必须根据研究人口数据计算分层特异性风险 $r_s$。分层 $s$ 的风险 $r_s$ 是死亡人数 $D_s$ 除以人口规模 $N_s$。\n\n- 分层 $1$：$r_1 = \\frac{D_1}{N_1} = \\frac{45}{40000} = 0.001125$\n- 分层 $2$：$r_2 = \\frac{D_2}{N_2} = \\frac{118}{20000} = 0.0059$\n- 分层 $3$：$r_3 = \\frac{D_3}{N_3} = \\frac{171}{8000} = 0.021375$\n- 分层 $4$：$r_4 = \\frac{D_4}{N_4} = \\frac{315}{4000} = 0.07875$\n\n标准人口权重 $w_s$ 已给出：\n- $w_1 = 0.46$\n- $w_2 = 0.28$\n- $w_3 = 0.16$\n- $w_4 = 0.10$\n\n现在，我们将这些值代入推导出的 $R_{std}$ 公式中：\n$$R_{std} = (0.001125)(0.46) + (0.0059)(0.28) + (0.021375)(0.16) + (0.07875)(0.10)$$\n\n计算加和的每一项：\n- $r_1 w_1 = 0.0005175$\n- $r_2 w_2 = 0.001652$\n- $r_3 w_3 = 0.00342$\n- $r_4 w_4 = 0.007875$\n\n将这些乘积相加得到直接标准化风险：\n$$R_{std} = 0.0005175 + 0.001652 + 0.00342 + 0.007875 = 0.0134645$$\n\n题目要求将最终答案四舍五入到五位有效数字。第一个有效数字是百分位上的 $1$。五位有效数字是 $1, 3, 4, 6, 4$。下一位数字是 $5$，因此我们将最后一位有效数字向上取整。\n$$R_{std} \\approx 0.013465$$\n这就是直接标准化的一年全因死亡风险。", "answer": "$$\n\\boxed{0.013465}\n$$", "id": "4955343"}, {"introduction": "当我们处理分层数据时，一个关键问题是：合并（或“折叠”）各层数据后，我们计算出的总体关联度量是否与各层内的关联度量一致？这个属性被称为“可折叠性”，并非所有关联度量都具备。此练习探讨了风险差（$RD$）、风险比（$RR$）和优势比（$OR$）的可折叠性条件，并用一个数值例子说明了为什么优势比通常是不可折叠的——这是理解流行病学和生物统计学研究结果的一个核心概念[@problem_id:4955402]。", "problem": "在一个队列中观察到一个二元暴露 $A \\in \\{0,1\\}$、一个二元结局 $Y \\in \\{0,1\\}$ 和一个二元分层变量 $Z \\in \\{0,1\\}$。设分层 $Z=z$ 内的风险差 (RD)、风险比 (RR) 和比值比 (OR) 分别定义如下：\n$$\\mathrm{RD}(z) \\equiv P(Y=1 \\mid A=1, Z=z) - P(Y=1 \\mid A=0, Z=z),$$\n$$\\mathrm{RR}(z) \\equiv \\frac{P(Y=1 \\mid A=1, Z=z)}{P(Y=1 \\mid A=0, Z=z)},$$\n$$\\mathrm{OR}(z) \\equiv \\frac{\\frac{P(Y=1 \\mid A=1, Z=z)}{P(Y=0 \\mid A=1, Z=z)}}{\\frac{P(Y=1 \\mid A=0, Z=z)}{P(Y=0 \\mid A=0, Z=z)}}.$$\n边际（粗略）版本记为 $\\mathrm{RD}_{\\mathrm{marg}}$、$\\mathrm{RR}_{\\mathrm{marg}}$ 和 $\\mathrm{OR}_{\\mathrm{marg}}$，通过忽略 $Z$ 进行类似定义。\n\n从全概率定律和上述定义出发，当风险差（RD）、风险比（RR）和比值比（OR）中的每一个度量在 $z \\in \\{0,1\\}$ 上是同质的情况下，推导出关于 $(A,Z)$ 的联合分布和分层特异性风险的代数条件，使得边际度量等于共同的分层特异性度量。然后，考虑以下满足 $A \\perp Z$ 的科学上合理的 $2 \\times 2 \\times 2$ 计数数据：\n- 对于 $Z=0$：在 $A=1$ 的人群中，计数为 $Y=1: 10$, $Y=0: 40$；在 $A=0$ 的人群中，计数为 $Y=1: 5$, $Y=0: 45$。\n- 对于 $Z=1$：在 $A=1$ 的人群中，计数为 $Y=1: 45$, $Y=0: 5$；在 $A=0$ 的人群中，计数为 $Y=1: 40$, $Y=0: 10$。\n\n使用这些数据，验证 $\\mathrm{RD}(0)$ 和 $\\mathrm{RD}(1)$ 相等，$\\mathrm{OR}(0)$ 和 $\\mathrm{OR}(1)$ 相等，而 $\\mathrm{RR}(0)$ 和 $\\mathrm{RR}(1)$ 不相等。最后，计算通过合并 $Z$（即，仅使用对 $Z$ 求和后得到的关于 $A$ 和 $Y$ 的 $2 \\times 2$ 表格）得到的边际比值比 $\\mathrm{OR}_{\\mathrm{marg}}$。将您的最终数值答案四舍五入到四位有效数字，并将其表示为无单位的纯数。", "solution": "经评估，该问题是有效的，因为它科学地基于生物统计学的既定原则，提法得当、客观、内部一致且完整。因此，我们可以进行完整的解答。\n\n问题分为三个部分：首先，对风险差（$\\mathrm{RD}$）、风险比（$\\mathrm{RR}$）和比值比（$\\mathrm{OR}$）的可折叠性条件进行理论推导；其次，使用所提供的数据对这些度量的属性进行数值验证；第三，从相同数据中计算边际比值比。\n\n为方便起见，我们定义以下概率：\n$p_{az} \\equiv P(Y=1 \\mid A=a, Z=z)$ for $a, z \\in \\{0, 1\\}$.\n$p_a \\equiv P(Y=1 \\mid A=a)$ for $a \\in \\{0, 1\\}$.\n$w_a \\equiv P(Z=1 \\mid A=a)$，所以 $P(Z=0 \\mid A=a) = 1-w_a$。\n\n根据全概率定律，暴露组 $a$ 中的边际风险是分层特异性风险的加权平均值：\n$$p_a = \\sum_{z=0}^{1} P(Y=1 \\mid A=a, Z=z) P(Z=z \\mid A=a) = p_{a0}(1-w_a) + p_{a1}w_a$$\n\n**第一部分：可折叠性条件的推导**\n\n我们寻求在度量于 $Z$ 的各分层中是同质的假设下，使得边际关联度量等于共同的分层特异性度量的条件。\n\n**1. 风险差 (RD)**\n假设同质性：$\\mathrm{RD}(0) = \\mathrm{RD}(1) = \\mathrm{RD}_{\\text{common}}$。\n这意味着 $p_{10} - p_{00} = \\mathrm{RD}_{\\text{common}}$ 和 $p_{11} - p_{01} = \\mathrm{RD}_{\\text{common}}$。\n边际风险差为 $\\mathrm{RD}_{\\mathrm{marg}} = p_1 - p_0$。\n$$\\mathrm{RD}_{\\mathrm{marg}} = [p_{10}(1-w_1) + p_{11}w_1] - [p_{00}(1-w_0) + p_{01}w_0]$$\n代入 $p_{1z} = p_{0z} + \\mathrm{RD}_{\\text{common}}$：\n$$\\mathrm{RD}_{\\mathrm{marg}} = [(p_{00}+\\mathrm{RD}_{\\text{common}})(1-w_1) + (p_{01}+\\mathrm{RD}_{\\text{common}})w_1] - [p_{00}(1-w_0) + p_{01}w_0]$$\n$$\\mathrm{RD}_{\\mathrm{marg}} = [p_{00}(1-w_1) + p_{01}w_1 + \\mathrm{RD}_{\\text{common}}(1-w_1+w_1)] - [p_{00}(1-w_0) + p_{01}w_0]$$\n$$\\mathrm{RD}_{\\mathrm{marg}} = \\mathrm{RD}_{\\text{common}} + p_{00}(1-w_1-1+w_0) + p_{01}(w_1-w_0)$$\n$$\\mathrm{RD}_{\\mathrm{marg}} = \\mathrm{RD}_{\\text{common}} + p_{00}(w_0-w_1) - p_{01}(w_0-w_1)$$\n$$\\mathrm{RD}_{\\mathrm{marg}} = \\mathrm{RD}_{\\text{common}} + (p_{00}-p_{01})(w_0-w_1)$$\n要使 $\\mathrm{RD}_{\\mathrm{marg}} = \\mathrm{RD}_{\\text{common}}$，项 $(p_{00}-p_{01})(w_0-w_1)$ 必须为零。这在以下情况下发生：\n(i) $p_{00} = p_{01}$，这意味着在未暴露组（$A=0$）中，$Z$ 不是结局 $Y$ 的风险因素。\n(ii) $w_0 = w_1$，这意味着 $P(Z=1 \\mid A=0) = P(Z=1 \\mid A=1)$。这是 $A$ 和 $Z$ 之间统计独立的定义，即 $A \\perp Z$。\n\n**2. 风险比 (RR)**\n假设同质性：$\\mathrm{RR}(0) = \\mathrm{RR}(1) = \\mathrm{RR}_{\\text{common}}$。\n这意味着 $p_{10} = p_{00} \\cdot \\mathrm{RR}_{\\text{common}}$ 和 $p_{11} = p_{01} \\cdot \\mathrm{RR}_{\\text{common}}$。\n边际风险比为 $\\mathrm{RR}_{\\mathrm{marg}} = p_1 / p_0$。\n$$\\mathrm{RR}_{\\mathrm{marg}} = \\frac{p_{10}(1-w_1) + p_{11}w_1}{p_{00}(1-w_0) + p_{01}w_0} = \\frac{p_{00}\\mathrm{RR}_{\\text{common}}(1-w_1) + p_{01}\\mathrm{RR}_{\\text{common}}w_1}{p_{00}(1-w_0) + p_{01}w_0}$$\n$$\\mathrm{RR}_{\\mathrm{marg}} = \\mathrm{RR}_{\\text{common}} \\left( \\frac{p_{00}(1-w_1) + p_{01}w_1}{p_{00}(1-w_0) + p_{01}w_0} \\right)$$\n要使 $\\mathrm{RR}_{\\mathrm{marg}} = \\mathrm{RR}_{\\text{common}}$，括号中的项必须为 $1$。\n$$p_{00}(1-w_1) + p_{01}w_1 = p_{00}(1-w_0) + p_{01}w_0$$\n$$p_{00} - p_{00}w_1 + p_{01}w_1 = p_{00} - p_{00}w_0 + p_{01}w_0$$\n$$(p_{01}-p_{00})w_1 = (p_{01}-p_{00})w_0$$\n$$(p_{01}-p_{00})(w_1-w_0) = 0$$\n这导致了与风险差相同的条件：如果 (i) $p_{00}=p_{01}$ 或 (ii) $w_0=w_1$ ($A \\perp Z$)，则可折叠性成立。\n\n**3. 比值比 (OR)**\n比值比通常是不可折叠的，即使它是同质的且 $A \\perp Z$。这个特性是由于 logit 函数的非线性性质。边际 OR 只是在非常特定的加权方案下才是分层特异性 OR 的加权平均值，而不是简单的平均值。在同质性下，OR 的可折叠性，即 $\\mathrm{OR}_{\\mathrm{marg}} = \\mathrm{OR}_{\\text{common}}$，成立，如果满足以下两个条件中至少一个：\n(i) 在暴露 $A$ 的各水平内，$Z$ 与结局 $Y$ 不相关。形式上，对于所有的 $a$，$P(Y=1|A=a, Z=z)$ 不依赖于 $z$，即 $Y \\perp Z \\mid A$。\n(ii) 在协变量 $Z$ 的各水平内，$A$ 与结局 $Y$ 不相关。形式上，对于所有的 $z$，$P(Y=1|A=a, Z=z)$ 不依赖于 $a$，即 $Y \\perp A \\mid Z$。这是对于所有 $z$，$\\mathrm{OR}(z)=1$ 的平凡情况。\n条件 $A \\perp Z$ 明显缺失，并且不足以确保比值比的可折叠性。\n\n**第二部分：使用所提供数据进行验证**\n\n首先，我们根据计数估计分层特异性风险。\n对于 $Z=0$：\n$p_{10} = P(Y=1 \\mid A=1, Z=0) = \\frac{10}{10+40} = \\frac{10}{50} = 0.2$\n$p_{00} = P(Y=1 \\mid A=0, Z=0) = \\frac{5}{5+45} = \\frac{5}{50} = 0.1$\n\n对于 $Z=1$：\n$p_{11} = P(Y=1 \\mid A=1, Z=1) = \\frac{45}{45+5} = \\frac{45}{50} = 0.9$\n$p_{01} = P(Y=1 \\mid A=0, Z=1) = \\frac{40}{40+10} = \\frac{40}{50} = 0.8$\n\n问题陈述 $A \\perp Z$。我们来验证一下。\n$A=1$ 的总受试者人数为 $(10+40)+(45+5) = 100$。\n$A=0$ 的总受试者人数为 $(5+45)+(40+10) = 100$。\n总受试者人数为 $200$。\n$P(A=1) = 100/200 = 0.5$。\n$P(Z=0) = (50+50)/200 = 100/200 = 0.5$。\n$P(A=1, Z=0) = (10+40)/200 = 50/200 = 0.25$。\n由于 $P(A=1, Z=0) = 0.25 = P(A=1)P(Z=0) = 0.5 \\times 0.5$，独立性条件 $A \\perp Z$ 成立。\n\n现在我们计算分层特异性度量：\n风险差：\n$\\mathrm{RD}(0) = p_{10} - p_{00} = 0.2 - 0.1 = 0.1$\n$\\mathrm{RD}(1) = p_{11} - p_{01} = 0.9 - 0.8 = 0.1$\n因此，$\\mathrm{RD}(0) = \\mathrm{RD}(1)$，证实了同质性。\n\n比值比：\n$\\mathrm{OR}(0) = \\frac{p_{10}/(1-p_{10})}{p_{00}/(1-p_{00})} = \\frac{0.2/0.8}{0.1/0.9} = \\frac{0.25}{1/9} = 2.25$\n$\\mathrm{OR}(1) = \\frac{p_{11}/(1-p_{11})}{p_{01}/(1-p_{01})} = \\frac{0.9/0.1}{0.8/0.2} = \\frac{9}{4} = 2.25$\n因此，$\\mathrm{OR}(0) = \\mathrm{OR}(1)$，证实了同质性。\n\n风险比：\n$\\mathrm{RR}(0) = \\frac{p_{10}}{p_{00}} = \\frac{0.2}{0.1} = 2$\n$\\mathrm{RR}(1) = \\frac{p_{11}}{p_{01}} = \\frac{0.9}{0.8} = 1.125$\n因此，$\\mathrm{RR}(0) \\neq \\mathrm{RR}(1)$，证实了非同质性。\n\n问题陈述中的所有主张均已得到验证。\n\n**第三部分：计算边际比值比**\n\n为了计算 $\\mathrm{OR}_{\\mathrm{marg}}$，我们首先通过对 $Z$ 的各分层计数求和来构建边际 $2 \\times 2$ 表格。\n- ($A=1, Y=1$) 的计数：$10+45 = 55$\n- ($A=1, Y=0$) 的计数：$40+5 = 45$\n- ($A=0, Y=1$) 的计数：$5+40 = 45$\n- ($A=0, Y=0$) 的计数：$45+10 = 55$\n\n边际表格为：\n|         | $Y=1$ | $Y=0$ |\n|---------|-------|-------|\n| $A=1$   | $55$    | $45$    |\n| $A=0$   | $45$    | $55$    |\n\n边际比值比根据此表计算：\n$$\\mathrm{OR}_{\\mathrm{marg}} = \\frac{\\text{Count}(A=1, Y=1) \\times \\text{Count}(A=0, Y=0)}{\\text{Count}(A=1, Y=0) \\times \\text{Count}(A=0, Y=1)} = \\frac{55 \\times 55}{45 \\times 45}$$\n$$\\mathrm{OR}_{\\mathrm{marg}} = \\left(\\frac{55}{45}\\right)^2 = \\left(\\frac{11}{9}\\right)^2 = \\frac{121}{81}$$\n数值上，这个值是：\n$$\\mathrm{OR}_{\\mathrm{marg}} = \\frac{121}{81} \\approx 1.493827...$$\n四舍五入到四位有效数字，我们得到 $1.494$。\n这个结果证明了比值比的不可折叠性。尽管分层特异性 OR 恒定为 $2.25$ 并且不存在混杂（$A \\perp Z$），边际 OR 却是 $1.494$，这个值不同于共同的分层特异性 OR。", "answer": "$$\\boxed{1.494}$$", "id": "4955402"}]}
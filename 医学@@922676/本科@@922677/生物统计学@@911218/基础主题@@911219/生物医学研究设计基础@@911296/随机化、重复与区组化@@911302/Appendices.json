{"hands_on_practices": [{"introduction": "第一个练习将我们的工作立足于随机化的根本目的。通过一个小的假设数据集，我们将应用潜在结果框架来精确理解均值差估计量所针对的因果量。这个练习阐明了为什么随机化是从实验数据中得出因果结论的基石。[@problem_id:4944974]", "problem": "考虑一个有 $N=6$ 个单元的完全随机化实验，处理分配为二元变量 $Z_i \\in \\{0,1\\}$，观测结果为 $Y_i^{\\text{obs}}$。假设满足稳定单元处理值假设（SUTVA）和有限总体潜在结果框架，其中每个单元 $i$ 具有固定的潜在结果 $Y_i(1)$ 和 $Y_i(0)$，且观测结果满足 $Y_i^{\\text{obs}}=Z_i\\,Y_i(1)+(1-Z_i)\\,Y_i(0)$。重复发生在 $N$ 个单元上，且没有区组化；处理分配是通过对固定大小的处理组和对照组进行完全随机化生成的。\n\n给定观测到的配对 $(Y_i^{\\text{obs}}, Z_i)$ 如下\n$$\\{(5,1),(7,1),(3,0),(4,0),(6,1),(2,0)\\}.$$\n根据这些数据计算均值差估计量 $\\hat{\\tau}$。然后，在基于随机化的因果推断的有限总体框架内，精确说明在完全随机化下该估计量所针对的估计目标（estimand）是什么，并用符号表示该估计目标。报告 $\\hat{\\tau}$ 的数值作为最终答案。无需四舍五入。", "solution": "用户提供了一个问题陈述，在尝试解答之前，必须首先验证其科学合理性、完整性和客观性。\n\n### 步骤1：提取已知条件\n-   一个有 $N=6$ 个单元的完全随机化实验。\n-   二元处理分配 $Z_i \\in \\{0,1\\}$。\n-   满足稳定单元处理值假设（SUTVA）。\n-   有限总体潜在结果框架：每个单元 $i$ 具有固定的潜在结果 $Y_i(1)$ 和 $Y_i(0)$。\n-   观测结果关系：$Y_i^{\\text{obs}}=Z_i\\,Y_i(1)+(1-Z_i)\\,Y_i(0)$。\n-   重复发生在 $N$ 个单元上。\n-   没有区组化。\n-   处理分配是通过对固定大小的处理组和对照组进行完全随机化生成的。\n-   观测数据对 $(Y_i^{\\text{obs}}, Z_i)$: $\\{(5,1),(7,1),(3,0),(4,0),(6,1),(2,0)\\}$。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题具有科学依据，是 Neyman-Rubin 潜在结果模型在因果推断中的一个标准应用，该模型是现代生物统计学的基石。这些假设（SUTVA、完全随机化）和框架（有限总体）是随机化实验设计与分析中的基本概念。\n\n该问题提法恰当。它提供了所有必要信息：单元总数（$N=6$）、每个单元的观测结果和处理分配，以及随机化机制（完全随机化）。从数据中，我们可以推断出处理组单元数（$N_1=3$）和对照组单元数（$N_0=3$），这与所述的随机化方案一致。任务——计算一个特定的估计量并确定其目标估计量——是精确的，并能导出一个唯一且有意义的解。\n\n该问题是客观的，并使用了因果推断领域的标准、明确的术语（例如，潜在结果、SUTVA、均值差估计量）。\n\n未检测到任何缺陷。该问题有效。\n\n### 步骤3：结论与行动\n该问题被视为有效。将提供解答。\n\n### 解答\n该问题要求计算均值差估计量 $\\hat{\\tau}$，并在指定的基于随机化的有限总体框架内，确定它所针对的估计目标。\n\n首先，我们根据处理状态整理所提供的数据。单元总数为 $N=6$。观测数据为 $\\{(5,1),(7,1),(3,0),(4,0),(6,1),(2,0)\\}$。\n接受处理的单元（$Z_i=1$）的观测结果为 $Y_i^{\\text{obs}} = Y_i(1)$。这些结果是 $\\{5, 7, 6\\}$。处理组的单元数为 $N_1 = 3$。\n接受对照的单元（$Z_i=0$）的观测结果为 $Y_i^{\\text{obs}} = Y_i(0)$。这些结果是 $\\{3, 4, 2\\}$。对照组的单元数为 $N_0 = 3$。\n\n均值差估计量 $\\hat{\\tau}$ 定义为处理组观测结果的样本均值与对照组观测结果的样本均值之差。\n用符号表示为：\n$$ \\hat{\\tau} = \\frac{1}{N_1} \\sum_{i: Z_i=1} Y_i^{\\text{obs}} - \\frac{1}{N_0} \\sum_{i:Z_i=0} Y_i^{\\text{obs}} $$\n\n设 $\\bar{Y}_1$ 为处理组的样本均值，$\\bar{Y}_0$ 为对照组的样本均值。\n我们计算 $\\bar{Y}_1$：\n$$ \\bar{Y}_1 = \\frac{5 + 7 + 6}{3} = \\frac{18}{3} = 6 $$\n接下来，我们计算 $\\bar{Y}_0$：\n$$ \\bar{Y}_0 = \\frac{3 + 4 + 2}{3} = \\frac{9}{3} = 3 $$\n\n现在，我们计算估计量 $\\hat{\\tau}$：\n$$ \\hat{\\tau} = \\bar{Y}_1 - \\bar{Y}_0 = 6 - 3 = 3 $$\n\n问题的第二部分要求确定在有限总体中，完全随机化下 $\\hat{\\tau}$ 所针对的估计目标。在此框架下，潜在结果 $\\{Y_i(1), Y_i(0)\\}_{i=1}^N$ 被视为固定的、非随机的量。唯一的随机性来源是处理分配向量 $\\mathbf{Z} = (Z_1, \\dots, Z_N)$。\n\n在这种设定下，我们感兴趣的基本估计目标是有限总体平均处理效应（ATE），用 $\\tau$ 表示。它定义为在有限总体中所有 $N$ 个单元上，个体层面因果效应 $Y_i(1) - Y_i(0)$ 的平均值：\n$$ \\tau = \\frac{1}{N} \\sum_{i=1}^{N} \\left(Y_i(1) - Y_i(0)\\right) $$\n\n在完全随机化下（其中每组 $N_1$ 个单元被分配到处理组的概率相等），均值差估计量 $\\hat{\\tau}$ 是有限总体 ATE $\\tau$ 的无偏估计量。这意味着在所有可能的随机化中，$\\hat{\\tau}$ 的期望值等于 $\\tau$：\n$$ E[\\hat{\\tau}] = \\tau $$\n期望是关于处理分配向量 $\\mathbf{Z}$ 的分布来计算的。因为 $E[\\hat{\\tau}] = \\tau$，我们说 $\\hat{\\tau}$ “针对”估计目标 $\\tau$。\n\n因此，均值差估计量 $\\hat{\\tau}$ 针对的是有限总体平均处理效应，其符号表示为 $\\frac{1}{N} \\sum_{i=1}^{N} (Y_i(1) - Y_i(0))$。\n\n最终要求的数值是估计量 $\\hat{\\tau}$ 的值。", "answer": "$$\\boxed{3}$$", "id": "4944974"}, {"introduction": "在确定了我们*为什么*要进行随机化之后，我们转向一个实际问题：我们需要*多少*受试者？这个练习展示了重复在实现治疗效果估计的预期精确度方面所起的关键作用。通过从目标标准误反向推导，你将计算所需的最小样本量，从而将重复的概念与研究的统计功效直接联系起来。[@problem_id:4945033]", "problem": "一个生物统计学团队正在计划一项$2$臂随机对照试验 (RCT)，旨在比较一种新疗法与对照组。主要结局是一个连续性测量值，每个受试者记录一次。随机化在不进行区组化的前提下进行，且设计要求两臂的样本量相等。假设两臂中每个受试者结局的方差相等且已知为 $\\sigma^{2}=100$，并且由随机化可知不同受试者的结局是相互独立的。治疗效应定义为 $\\tau=\\mu_{T}-\\mu_{C}$，其中 $\\mu_{T}$ 和 $\\mu_{C}$ 分别表示真实的治疗臂均值和对照臂均值。该效应通过样本均值之差 $\\hat{\\tau}=\\bar{Y}_{T}-\\bar{Y}_{C}$ 进行估计，其中每臂有 $n$ 名受试者。\n\n请仅使用样本均值的定义、独立同分布观测下样本均值的方差以及基本的方差和协方差性质，来确定每臂所需的最小相等样本量 $n$，以使 $\\hat{\\tau}$ 的标准误不大于 $2$。报告满足此要求的最小整数 $n$。除了确定这个最小整数之外，无需进行有效数字取整。", "solution": "该问题要求确定一个$2$臂随机对照试验中每臂的最小整数样本量 $n$。约束条件是治疗效应估计量 $\\hat{\\tau}$ 的标准误不得超过 $2$。\n\n首先，我们建立估计量标准误的数学表达式。治疗效应 $\\tau = \\mu_T - \\mu_C$ 的估计量由样本均值之差给出：\n$$ \\hat{\\tau} = \\bar{Y}_T - \\bar{Y}_C $$\n其中 $\\bar{Y}_T$ 是治疗臂的样本均值，$\\bar{Y}_C$ 是对照臂的样本均值。\n\n$\\hat{\\tau}$ 的标准误，记作 $SE(\\hat{\\tau})$，是其方差 $Var(\\hat{\\tau})$ 的平方根：\n$$ SE(\\hat{\\tau}) = \\sqrt{Var(\\hat{\\tau})} $$\n为了求出标准误，我们首先计算 $\\hat{\\tau}$ 的方差：\n$$ Var(\\hat{\\tau}) = Var(\\bar{Y}_T - \\bar{Y}_C) $$\n问题陈述，随机化在不进行区组化的情况下进行，且不同受试者的结局是相互独立的。这意味着两个样本均值 $\\bar{Y}_T$ 和 $\\bar{Y}_C$ 是独立的随机变量，因为它们是从不同的受试者集合计算得出的。对于两个独立的随机变量，它们差的方差等于它们方差的和：\n$$ Var(\\hat{\\tau}) = Var(\\bar{Y}_T) + Var(\\bar{Y}_C) $$\n接下来，我们确定每个样本均值的方差。对于一个样本量为 $n$、来自总体方差为 $\\sigma^2$ 的独立同分布观测，其样本均值的方差为 $\\frac{\\sigma^2}{n}$。问题指明，两臂中每个受试者结局的方差已知且相等，为 $\\sigma^2 = 100$。每臂的样本量为 $n$。\n\n对于治疗臂：\n$$ Var(\\bar{Y}_T) = \\frac{\\sigma^2}{n} = \\frac{100}{n} $$\n对于对照臂：\n$$ Var(\\bar{Y}_C) = \\frac{\\sigma^2}{n} = \\frac{100}{n} $$\n将这些代入 $Var(\\hat{\\tau})$ 的表达式中：\n$$ Var(\\hat{\\tau}) = \\frac{100}{n} + \\frac{100}{n} = \\frac{200}{n} $$\n现在，我们可以求出 $\\hat{\\tau}$ 的标准误：\n$$ SE(\\hat{\\tau}) = \\sqrt{Var(\\hat{\\tau})} = \\sqrt{\\frac{200}{n}} $$\n问题施加的约束是标准误不得大于 $2$：\n$$ SE(\\hat{\\tau}) \\leq 2 $$\n将我们得到的标准误表达式代入，得到不等式：\n$$ \\sqrt{\\frac{200}{n}} \\leq 2 $$\n为了求解 $n$，我们对不等式两边进行平方。由于两边都是非负数，不等号的方向保持不变：\n$$ \\frac{200}{n} \\leq 2^2 $$\n$$ \\frac{200}{n} \\leq 4 $$\n由于 $n$ 是样本量，它必须是一个正整数 ($n > 0$)。因此，我们可以在不等式两边同乘以 $n$ 而不改变不等号的方向：\n$$ 200 \\leq 4n $$\n最后，我们通过除以 $4$ 来分离出 $n$：\n$$ \\frac{200}{4} \\leq n $$\n$$ 50 \\leq n $$\n这个不等式表明，每臂的样本量 $n$ 必须至少为 $50$。问题要求的是满足此条件的最小整数 $n$。满足 $n \\geq 50$ 的最小整数 $n$ 是 $50$。\n\n因此，每臂的最小相等样本量为 $50$。", "answer": "$$\\boxed{50}$$", "id": "4945033"}, {"introduction": "虽然完全随机化在平均水平上效果很好，但在小样本中可能导致不平衡。本练习将区组化作为一种解决方案，通过探索置换区组随机化的机制来进行介绍。你将使用基本的组合学原理来确定一个区组内所有可能的治疗序列，从而深入了解该方法如何在整个招募过程中强制实现平衡。[@problem_id:4945041]", "problem": "一个生物统计学团队正在设计一项双臂随机临床试验，采用均等分配和区组随机化来确保区组内的平衡。每个区组的大小为 $B=4$，并且随机化受到限制，使得在每个区组内，恰好有 $2$ 名参与者被分配到治疗 $A$，有 $2$ 名参与者被分配到治疗 $B$。实施方案是从一个区组的所有可接受的治疗序列中进行均匀随机抽样。\n\n仅使用计数和随机化的第一性原理——即可接受的序列是那些恰好有 $2$ 个标签 $A$ 和 $2$ 个标签 $B$ 的序列，所有可接受的序列在均匀随机化下是等可能的，以及仅通过交换不可区分的标签而不同的排列不是不同的排列——推导出一个区组中不同可接受治疗序列的数量，然后推断出任何一个特定的可接受序列被选中的概率。请以最简分数形式给出最终答案，不带单位。", "solution": "该问题要求基于计数和随机化的第一性原理推导两个量：首先，一个区组中不同可接受治疗序列的数量；其次，选中任何一个特定此类序列的概率。\n\n设区组大小为 $B=4$。该区组的治疗序列是一个长度为 $4$ 的序列。设两种治疗由标签 $A$ 和 $B$ 表示。问题陈述，随机化受到限制，使得在每个区组内，恰好有 $2$ 名参与者被分配到治疗 $A$，有 $2$ 名被分配到治疗 $B$。因此，一个可接受的序列是一个长度为 $4$ 且恰好包含两个 $A$ 和两个 $B$ 的序列。\n\n第一个任务是确定不同可接受治疗序列的数量。这是一个排列多重集对象的组合问题。我们的多重集包含 $4$ 个项目：$\\{A, A, B, B\\}$。我们希望找到这些项目的不同排列的数量。\n\n设序列中的总位置数为 $N$，即区组大小，所以 $N=4$。设分配到治疗 $A$ 的数量为 $n_A$，分配到治疗 $B$ 的数量为 $n_B$。根据问题陈述，$n_A=2$ 且 $n_B=2$。注意 $n_A + n_B = 2+2=4=N$。\n\n我们可以通过考虑为其中一种治疗选择位置的方式数量来推导不同序列的数量。让我们首先为两个 $A$ 选择位置。序列中有 $4$ 个可用位置。从总共 $4$ 个位置中为 $A$ 选择 $2$ 个不同位置的方式数量由二项式系数 $\\binom{4}{2}$ 给出。\n\n二项式系数 $\\binom{n}{k}$ 的公式是 $\\frac{n!}{k!(n-k)!}$。在我们的例子中，$n=4$ 且 $k=2$。\n$$ \\binom{4}{2} = \\frac{4!}{2!(4-2)!} = \\frac{4!}{2!2!} $$\n计算这个值：\n$$ \\frac{4 \\times 3 \\times 2 \\times 1}{(2 \\times 1)(2 \\times 1)} = \\frac{24}{4} = 6 $$\n一旦为 $A$ 选择了 $2$ 个位置，剩下的 $2$ 个位置就自动被 $B$ 填充。因此，恰好有 $6$ 个不同的可接受治疗序列。这些序列是：$AABB$, $ABAB$, $ABBA$, $BAAB$, $BABA$, and $BBAA$。让我们将这些可接受序列的集合表示为 $\\mathcal{S}$，所以这个集合的大小是 $|\\mathcal{S}| = 6$。\n\n第二个任务是推断在给定区组中任何一个特定的可接受序列被选中的概率。问题陈述，实施方案 `samples uniformly at random from all admissible treatment sequences`。这意味着 $\\mathcal{S}$ 中的 $6$ 个不同序列中的每一个被选中的可能性是相等的。\n\n设 $s$ 是任何一个特定的可接受序列（例如，$s = AABB$）。根据均匀概率原理，从一组等可能的结果中选择任何一个特定结果的概率是总结果数的倒数。\n可能结果的总数是不同可接受序列的数量，我们计算出这个数量是 $|\\mathcal{S}| = 6$。\n\n因此，选择任何特定序列 $s \\in \\mathcal{S}$ 的概率 $P(s)$ 是：\n$$ P(s) = \\frac{1}{|\\mathcal{S}|} = \\frac{1}{6} $$\n这个概率是按要求的最简分数。", "answer": "$$ \\boxed{\\frac{1}{6}} $$", "id": "4945041"}]}
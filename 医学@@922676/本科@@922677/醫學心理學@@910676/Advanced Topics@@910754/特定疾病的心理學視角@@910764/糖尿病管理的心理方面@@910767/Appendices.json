{"hands_on_practices": [{"introduction": "患者在面对需要立即付出努力但回报延迟的健康决策时，常常会表现出拖延。跨期选择模型，特别是双曲线贴现，为我们理解这种“短视”行为提供了量化工具。通过本练习[@problem_id:4734915]，您将学习如何计算未来健康收益的“现值”，并以此预测患者的决策，从而具体感受时间偏好如何影响健康行为。", "problem": "一名II型糖尿病患者面临一个关于今天是否开始服用一种新的日常药物的单一跨期决策。今天开始服药的行为会产生一个即时的心理/努力成本，其任意效用单位为$C=3$。改善血糖控制所带来的主要感知健康益处，表现为在$D=2$天后实现的未来收益大小$B$。根据经验，健康行为中的跨期选择可以使用双曲贴现模型来建模，该模型根据公式$V=\\frac{B}{1+kD}$，将延迟$D$后可获得的量级为$B$的延迟收益赋予现值$V$，其中$k>0$是个体的贴现率。在行为医学中常用的理性选择框架下，当净现值盈余$S=V-C$为正时，预测该人会遵从医嘱。\n\n使用$B=10$、$k=0.5$、$D=2$和$C=3$，计算净现值盈余$S=V-C$。根据定性决策规则“如果$S>0$则遵从医嘱”，在你的推理中推断该模型是否预测了遵从医嘱的行为。最终答案只报告$S$的数值，不带单位。", "solution": "用户提供了一个问题陈述以供验证和求解。\n\n### 步骤1：提取已知条件\n-   即时心理/努力成本：$C=3$\n-   未来收益大小：$B=10$\n-   收益实现的延迟：$D=2$天\n-   双曲贴现率：$k=0.5$\n-   延迟收益的现值公式：$V=\\frac{B}{1+kD}$\n-   净现值盈余公式：$S=V-C$\n-   遵从医嘱的决策规则：如果$S>0$则遵从医嘱\n-   任务：计算净现值盈余$S$。\n\n### 步骤2：使用提取的已知条件进行验证\n根据验证标准对问题陈述进行评估。\n\n-   **科学依据**：该问题基于行为经济学和健康心理学领域。以$V=\\frac{B}{1+kD}$表示的双曲贴现模型是一个标准的、有经验支持的模型，用于描述跨期选择，特别是个人如何倾向于对较短延迟的未来回报进行更大幅度的贬值。它在药物依从性等健康行为中的应用是行为医学中的一个常见课题。理性选择框架（$S=V-C$）是基于效用最大化来建模决策的传统方法。该问题在其所述领域内是科学合理的。\n-   **适定性**：该问题是适定的。它提供了所有必要的变量（$B, C, D, k$）和明确的公式（$V=\\frac{B}{1+kD}$, $S=V-C$），以计算净现值盈余$S$的唯一数值。\n-   **客观性**：问题陈述客观，使用了精确的定义和数值。术语“任意效用单位”恰当地将计算置于一个抽象模型中，避免了主观断言。\n-   **完整性和一致性**：设置是完整且一致的。所有需要的数据都已提供，已知条件之间没有矛盾。\n-   **现实性和可行性**：参数是作为理论模型的组成部分呈现的，而非直接的物理测量。在此建模背景下，这些值是合理的，并用于说明双曲贴现的原理。\n-   **结构和清晰度**：问题结构清晰，定义了所有术语并确立了明确的目标。语言清晰无歧义。\n\n### 步骤3：结论与行动\n该问题是有效的。它是行为科学中一个明确定义的模型的直接应用。现在可以进行求解过程。\n\n### 解答\n该问题要求基于双曲贴现模型，计算关于药物依从性决策的净现值盈余$S$。模型参数如下：未来收益大小$B=10$，即时成本$C=3$，收益延迟$D=2$天，以及个体贴现率$k=0.5$。\n\n首先，我们计算未来健康收益的现值$V$。双曲贴现的公式如下：\n$$V = \\frac{B}{1+kD}$$\n将给定的数值$B$、$k$和$D$代入公式：\n$$V = \\frac{10}{1 + (0.5)(2)}$$\n分母中的乘积为 $(0.5)(2) = 1$。\n$$V = \\frac{10}{1+1} = \\frac{10}{2}$$\n$$V = 5$$\n未来收益的现值为$5$个效用单位。\n\n接下来，我们计算净现值盈余$S$，即收益的现值$V$与即时成本$C$之间的差值。公式为：\n$$S = V - C$$\n代入计算出的值$V=5$和给定的值$C=3$：\n$$S = 5 - 3$$\n$$S = 2$$\n净现值盈余为$2$个效用单位。\n\n最后，问题要求根据定性决策规则“如果$S>0$则遵从医嘱”来推断是否预测了遵从医嘱的行为。在本例中，我们得到$S=2$。由于$2 > 0$，满足了遵从医嘱的条件。因此，该模型预测患者会选择今天开始服药。然而，问题最终只要求回答$S$的数值。", "answer": "$$\\boxed{2}$$", "id": "4734915"}, {"introduction": "成功的糖尿病管理不仅依赖于单个决策，更需要持续的行为坚持。计划行为理论（Theory of Planned Behavior, TPB）提供了一个整合性框架，用以解释态度、主观规范和感知行为控制如何共同决定行为意向。本练习[@problem_id:4734949]将指导您如何将这一经典社会心理学理论操作化为一个预测模型，通过计算依从性概率并识别关键影响因素，为制定个性化干预措施奠定基础。", "problem": "一家糖尿病诊所使用计划行为理论 (Theory of Planned Behavior, TPB) 来模拟餐前自我血糖监测 (Self-Monitoring of Blood Glucose, SMBG) 的依从性概率。该理论假设，一个人的意图由行为态度 (Attitude)、主观规范 (Subjective Norm) 和感知行为控制 (Perceived Behavioral Control) 决定。在该诊所的构想中，一个潜在意图得分 $I$ 被构建为决定因素的线性组合，而依从性概率 $p$ 是通过将 $I$ 经过逻辑 (sigmoid) 函数映射得到的。具体来说，该诊所使用以下科学标准基础：\n- 潜在意图为 $I=\\beta_{0}+\\beta_{1}A+\\beta_{2}SN+\\beta_{3}PBC$，其中 $A$ 是行为态度 (Attitude)，$SN$ 是主观规范 (Subjective Norm)，$PBC$ 是感知行为控制 (Perceived Behavioral Control)。\n- 依从性概率为 $p=\\sigma(I)$，其中逻辑函数为 $\\sigma(z)=\\frac{1}{1+\\exp(-z)}$。\n\n对于一位患者，测得其标准化决定因素得分为 $A=0.5$，$SN=0.4$ 和 $PBC=0.9$。诊所的估计参数为 $\\beta_{0}=-0.8$，$\\beta_{1}=1.3$，$\\beta_{2}=0.9$ 和 $\\beta_{3}=1.6$。使用这些数值，计算餐前自我血糖监测 (SMBG) 依从性的预测概率 $p$。将您的数值答案四舍五入至四位有效数字，并以小数形式表示。\n\n此外，基于逻辑映射的边际效应微积分，确定在患者的观测得分下，$A$、$SN$ 和 $PBC$ 中哪个单一决定因素对 $p$ 的边际效应最大。在解答中用文字提供您的推理过程；最终的数值答案应仅为预测概率。", "solution": "该问题被评估为有效。它具有科学依据，问题陈述清晰且客观。所提出的模型，即使用计划行为理论和逻辑（sigmoid）函数，是量化健康心理学和行为科学中的一种标准方法。所有必要的数据和参数都已提供，问题内部一致，任务定义明确，从而可以得出一个唯一的、可验证的解。\n\n第一步是使用提供的线性模型和得分，计算患者的潜在意图得分 $I$。\n潜在意图的模型为：\n$$ I = \\beta_{0} + \\beta_{1}A + \\beta_{2}SN + \\beta_{3}PBC $$\n给定的参数值为 $\\beta_{0}=-0.8$，$\\beta_{1}=1.3$，$\\beta_{2}=0.9$ 和 $\\beta_{3}=1.6$。患者的标准化决定因素得分为 $A=0.5$，$SN=0.4$ 和 $PBC=0.9$。\n将这些值代入 $I$ 的方程中：\n$$ I = -0.8 + (1.3)(0.5) + (0.9)(0.4) + (1.6)(0.9) $$\n进行乘法运算：\n$$ I = -0.8 + 0.65 + 0.36 + 1.44 $$\n将各项相加：\n$$ I = -0.8 + 2.45 $$\n$$ I = 1.65 $$\n\n下一步是通过逻辑 (sigmoid) 函数 $\\sigma(z)$ 映射潜在意图得分 $I$ 来计算依从性概率 $p$。\n概率的公式为：\n$$ p = \\sigma(I) = \\frac{1}{1 + \\exp(-I)} $$\n代入计算出的值 $I=1.65$：\n$$ p = \\frac{1}{1 + \\exp(-1.65)} $$\n现在，我们计算 $p$ 的数值。\n指数项的值为 $\\exp(-1.65) \\approx 0.19205$。\n因此，概率为：\n$$ p \\approx \\frac{1}{1 + 0.19205} = \\frac{1}{1.19205} \\approx 0.838891005 $$\n问题要求答案四舍五入至四位有效数字。\n$$ p \\approx 0.8389 $$\n\n问题的最后一部分要求确定哪个决定因素（$A$、$SN$ 或 $PBC$）对概率 $p$ 的边际效应最大。决定因素 $X_j$ 对 $p$ 的边际效应由偏导数 $\\frac{\\partial p}{\\partial X_j}$ 给出。我们使用链式法则求导：\n$$ \\frac{\\partial p}{\\partial X_j} = \\frac{d p}{d I} \\cdot \\frac{\\partial I}{\\partial X_j} $$\n首先，我们求逻辑函数的导数 $\\frac{dp}{dI}$：\n$$ \\frac{d p}{d I} = \\frac{d}{dI} \\left( \\frac{1}{1 + \\exp(-I)} \\right) = \\frac{\\exp(-I)}{(1 + \\exp(-I))^2} $$\n这个导数可以更简单地表示为 $\\sigma(I)(1 - \\sigma(I))$，或 $p(1-p)$。\n接下来，我们求意图得分 $I$ 关于每个决定因素 $X_j \\in \\{A, SN, PBC\\}$ 的偏导数：\n$$ I = \\beta_{0} + \\beta_{1}A + \\beta_{2}SN + \\beta_{3}PBC $$\n$$ \\frac{\\partial I}{\\partial A} = \\beta_{1} = 1.3 $$\n$$ \\frac{\\partial I}{\\partial SN} = \\beta_{2} = 0.9 $$\n$$ \\frac{\\partial I}{\\partial PBC} = \\beta_{3} = 1.6 $$\n因此，每个决定因素的边际效应为：\n$$ \\frac{\\partial p}{\\partial A} = p(1-p)\\beta_{1} = p(1-p)(1.3) $$\n$$ \\frac{\\partial p}{\\partial SN} = p(1-p)\\beta_{2} = p(1-p)(0.9) $$\n$$ \\frac{\\partial p}{\\partial PBC} = p(1-p)\\beta_{3} = p(1-p)(1.6) $$\n为了找出在患者特定得分下哪个决定因素的边际效应最大，我们需要比较这三个值。由于项 $p(1-p)$ 是所有三个表达式的公共正因子（因为 $0  p  1$），边际效应的相对大小完全由系数 $\\beta_j$ 的大小决定。\n比较这些系数：\n$$ \\beta_{1} = 1.3 $$\n$$ \\beta_{2} = 0.9 $$\n$$ \\beta_{3} = 1.6 $$\n由于 $\\beta_{3}  \\beta_{1}  \\beta_{2}$（具体来说是 $1.6  1.3  0.9$），与 $\\beta_{3}$ 相关的边际效应是最大的。因此，在给定得分下，感知行为控制 ($PBC$) 对该患者的依从性概率具有最大的边际效应。这意味着，与其他决定因素的等效增加相比，患者 $PBC$ 得分的微小增加将导致依从性预测概率的最大增长。", "answer": "$$\\boxed{0.8389}$$", "id": "4734949"}, {"introduction": "在了解和预测行为之后，下一步是设计有效的干预措施来主动改变行为。前景理论（Prospect Theory），特别是其核心概念“损失厌恶”（loss aversion），为设计“助推”式干预（如承诺装置）提供了强大的心理学杠杆。这个高级练习[@problem_id:4734965]将挑战您分析一个承诺合约的有效性，通过计算其期望结果，并从损失厌恶的视角解释其为何能够激励患者，从而将理论与临床工具设计直接联系起来。", "problem": "一名2型糖尿病患者参加了一项软性承诺机制：他们在一个为期30天的月份开始时存入50美元的押金。只有当患者在该月内达到至少90%的每日用药依从性时，押金才会全额退还；否则，押金将被没收。临床团队根据先前的行为观察，将每日依从性建模为一个独立的伯努利过程，每日依从性概率为$p$。假设该患者的基线依从性概率$p=0.8$，并设该月内依从的天数为随机变量$S$。退款规则是当且仅当$S \\geq 27$时，押金才被退还。\n\n使用独立伯努利试验的二项分布模型的核心定义以及货币结果的期望值，推导出一个关于押金金额和依从性概率的预期货币损失（被没收的押金）的解析表达式（以美元计）。然后，根据给定的参数$p=0.8$、30天、27天退款阈值和50美元押金，计算预期损失。\n\n最后，使用前景理论（PT）和损失厌恶的概念，解释为什么将押金设定为一种潜在损失，相比于没有押金的中性设定，能够改变患者在未来月份的依从性行为。将最终数值答案四舍五入至三位有效数字。以美元表示预期损失。", "solution": "对问题陈述进行分析后，认定其是有效的。它在概率论和行为经济学方面有科学依据，问题设定良好，提供了所有必需的参数，并且语言客观。该问题要求基于二项概率模型进行定量计算，并基于前景理论的既定原则进行定性解释。\n\n问题要求三部分内容：\n1.  预期货币损失的解析表达式。\n2.  根据给定参数对此损失进行的数值计算。\n3.  使用前景理论对该机制的行为效应进行的解释。\n\n设$D$为押金金额，$n$为该月的天数，$p$为每日用药依从性的概率。设$S$为代表该月内依从总天数的随机变量。问题陈述每日依从性是一个独立的伯努利过程，这意味着$S$服从二项分布，$S \\sim \\text{Bin}(n, p)$。$S$的概率质量函数由下式给出：\n$$P(S=i) = \\binom{n}{i} p^i (1-p)^{n-i}$$\n对于$i \\in \\{0, 1, \\dots, n\\}$。\n\n如果依从天数$S$小于某个阈值$k$，则押金被没收。在这里，阈值是30天的90%，所以$k = 0.90 \\times 30 = 27$。如果$S  27$，押金将被没收。\n\n设$L$为货币损失。$L$是一个可以取两个值的随机变量：如果押金被没收（即$S  k$），则$L=D$；如果押金被退还（即$S \\ge k$），则$L=0$。预期货币损失$E[L]$定义为：\n$$E[L] = D \\cdot P(L=D) + 0 \\cdot P(L=0) = D \\cdot P(S  k)$$\n没收押金的概率$P(S  k)$是所有依从天数小于$k$的结果的概率之和：\n$$P(S  k) = \\sum_{i=0}^{k-1} P(S=i)$$\n代入二项概率质量函数，我们得到预期货币损失的一般解析表达式：\n$$E[L] = D \\sum_{i=0}^{k-1} \\binom{n}{i} p^i (1-p)^{n-i}$$\n\n接下来，我们计算给定参数下的预期损失：$D = \\$50$，$n=30$，$p=0.8$，退款阈值$k=27$。\n预期损失为$E[L] = 50 \\cdot P(S  27)$。\n直接计算总和$\\sum_{i=0}^{26} P(S=i)$在计算上很复杂。更有效的方法是计算其补事件的概率$P(S \\ge 27)$，然后用1减去它。\n$$P(S  27) = 1 - P(S \\ge 27)$$\n$$P(S \\ge 27) = P(S=27) + P(S=28) + P(S=29) + P(S=30)$$\n我们使用二项公式计算每一项，其中$n=30$，$p=0.8$，$1-p=0.2$：\n$P(S=27) = \\binom{30}{27} (0.8)^{27} (0.2)^{3} = \\frac{30 \\cdot 29 \\cdot 28}{3 \\cdot 2 \\cdot 1} (0.8)^{27} (0.008) \\approx 0.07853$\n$P(S=28) = \\binom{30}{28} (0.8)^{28} (0.2)^{2} = \\frac{30 \\cdot 29}{2 \\cdot 1} (0.8)^{28} (0.04) \\approx 0.03366$\n$P(S=29) = \\binom{30}{29} (0.8)^{29} (0.2)^{1} = 30 (0.8)^{29} (0.2) \\approx 0.00928$\n$P(S=30) = \\binom{30}{30} (0.8)^{30} (0.2)^{0} = 1 \\cdot (0.8)^{30} \\approx 0.00124$\n\n将这些概率相加：\n$P(S \\ge 27) \\approx 0.07853 + 0.03366 + 0.00928 + 0.00124 = 0.12271$\n没收押金的概率是：\n$P(S  27) = 1 - P(S \\ge 27) \\approx 1 - 0.12271 = 0.87729$\n预期货币损失是：\n$E[L] = D \\cdot P(S  27) = 50 \\cdot 0.87729 \\approx 43.8645$\n四舍五入到三位有效数字，预期损失为$\\$43.9$。\n\n最后，我们使用前景理论（PT）来解释其行为机制。由Daniel Kahneman和Amos Tversky发展的PT理论假设，个体评估结果并非基于绝对财富，而是相对于一个参照点的收益和损失。PT的一个核心原则是**损失厌恶**（loss aversion）：损失的心理影响显著大于等量收益的影响。在PT中，价值函数在损失域比在收益域更陡峭。\n\n在没有押金的中性框架下，患者的参照点是他们当前的健康和财务状况。用药依从性的好处是改善长期健康，这被视为一种**收益**。然而，这些收益通常是遥远的、抽象的和概率性的，使得它们不如更直接的关注点那样具有激励作用。\n\n承诺机制从根本上改变了这种框架。通过存入50美元的押金，患者的参照点发生了变化。这50美元现在被视为其禀赋的一部分。没收押金的可能性被视为一种**损失**。每日用药依从性的行为现在不仅被视为获得健康收益的方式，而且被视为**避免财务损失**的必要行动。\n\n由于损失厌恶，避免损失50美元的动机在心理上比获得等量收益（例如，因依从而获得50美元奖励）的动机更强大。损失的痛苦远大于收益的快乐。这种框架使得不依从的后果更加显著、具体和直接。每一天，是否服药的决定都要与具体的经济惩罚进行权衡。与不依从相关的负效用增加，可以为维持期望行为创造强大的激励，从而导致未来月份中潜在的依从性概率$p$增加。承诺机制通过利用人类心智在处理损失与收益时的不对称性来发挥作用。", "answer": "$$\\boxed{43.9}$$", "id": "4734965"}]}
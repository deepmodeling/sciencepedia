{"hands_on_practices": [{"introduction": "在研究医疗依从性时，一个核心任务是如何客观地对其进行量化。本练习将带你进入药物流行病学的实际工作，学习使用药房理赔数据来计算两种最常用的依从性指标：药物持有率（$MPR$）和保障天数比例（$PDC$）。通过基于第一性原理的推导和在假设场景下的计算，你将能深刻理解这两种指标的定义差异及其在评估患者用药行为时的不同含义。[@problem_id:4716818]", "problem": "在医疗心理学中，药房理赔数据集被用来量化用药依从性。两个公认的依从性指标是药物持有率（Medication Possession Ratio, MPR）和覆盖天数比例（Proportion of Days Covered, PDC）。其公认的概念基础是：(i) 依从性是指在指定的观察期内，患者有用药可用的时间所占的比例；(ii) 续药记录提供了每次配药的开始日期和药物供应天数，这决定了观察时间线上的覆盖区间。基于这些基础，给定一系列配药记录，请推导在一个长度为 $T$ 的有限观察期内计算 $MPR$ 和 $PDC$ 的显式解析公式。设观察期为半开区间 $[0,T)$（以天为单位），第 $i$ 次配药发生在时间 $t_i$，药物供应天数为 $s_i$，由此产生的覆盖区间为 $[t_i, t_i + s_i)$。\n\n- 仅使用上述基础，推导 $MPR$ 的表达式，其定义为观察期内配发的总药物供应天数与观察期长度之比。\n- 仅使用上述基础，推导 $PDC$ 的表达式，其定义为观察期内有用药覆盖的总天数（每一天最多计算一次）与观察期长度之比。\n\n然后，针对一个在 $T=90$ 天的观察期内观察的单一患者，其配药记录为：第 $t_1=0$ 天配药，供应 $s_1=30$ 天；第 $t_2=35$ 天配药，供应 $s_2=30$ 天；第 $t_3=70$ 天配药，供应 $s_3=30$ 天。计算该患者的 $MPR$ 和 $PDC$。将两个指标均表示为无量纲的比例（小数或分数），不要使用百分号。无需四舍五入。", "solution": "该问题是有效的，因为它在医疗心理学和药物流行病学领域有科学依据，问题陈述清晰，信息充分且一致，并且表述客观。我们将首先根据所提供的定义推导药物持有率（$MPR$）和覆盖天数比例（$PDC$）的通用解析公式，然后将这些公式应用于具体的案例数据。\n\n设观察期为时间区间 $I_{obs} = [0, T)$。设有一系列共 $N$ 次的配药，其中第 $i$ 次配药的特征是开始日期 $t_i$ 和药物供应天数 $s_i$。在观察期内发生的配药对应的索引集合为 $K = \\{i \\in \\{1, \\dots, N\\} \\mid t_i \\in [0, T)\\}$.\n\n**药物持有率 ($MPR$) 公式推导**\n\n问题将 $MPR$ 定义为“观察期内配发的总药物供应天数与观察期长度之比”。\n\n在观察期*内*配发的药物是指那些配药日期 $t_i$ 满足 $0 \\le t_i  T$ 的记录。这些配药的总药物供应天数是所有 $i \\in K$ 对应的供应天数 $s_i$ 的总和。\n$$ \\text{总药物供应天数} = \\sum_{i \\in K} s_i $$\n观察期的长度为 $T$。\n因此，$MPR$ 的显式解析公式为：\n$$ MPR = \\frac{\\sum_{i \\in K} s_i}{T} $$\n该指标将观察期内配发的所有药物供应天数相加，而不考虑这些药物是否在观察期内使用或超出观察期，也未考虑因提前续药而导致的供应重叠。因此，$MPR$ 的值可能大于1。\n\n**覆盖天数比例 ($PDC$) 公式推导**\n\n问题将 $PDC$ 定义为“观察期内有用药覆盖的总天数（每一天最多计算一次）与观察期长度之比”。\n\n对于每一次配药 $i \\in K$，会产生一个覆盖区间，记为 $C_i = [t_i, t_i + s_i)$。所有这些供应所覆盖的全部天数是这些区间的并集：\n$$ C_{union} = \\bigcup_{i \\in K} C_i $$\n问题明确指出我们只计算观察期*内*的天数。这要求将总覆盖集合与观察区间 $I_{obs} = [0, T)$ 求交集：\n$$ C_{covered} = C_{union} \\cap I_{obs} = \\left( \\bigcup_{i \\in K} [t_i, t_i + s_i) \\right) \\cap [0, T) $$\n“每一天最多计算一次”这一表述在数学上通过求并集来处理，因为集合的并集自然不会重复计算元素。总覆盖天数是集合 $C_{covered}$ 的勒贝格测度（即总长度），记为 $\\mu(C_{covered})$。\n因此，$PDC$ 的显式解析公式为：\n$$ PDC = \\frac{\\mu(C_{covered})}{T} = \\frac{1}{T} \\mu\\left( \\left( \\bigcup_{i \\in K} [t_i, t_i + s_i) \\right) \\cap [0, T) \\right) $$\n根据定义，覆盖的天数不能超过观察期的长度，因此 $PDC$ 的上限始终为1。\n\n**应用于具体案例**\n\n问题提供了以下数据：\n- 观察期长度：$T = 90$ 天，所以 $I_{obs} = [0, 90)$。\n- 配药 1: $t_1 = 0$, $s_1 = 30$。\n- 配药 2: $t_2 = 35$, $s_2 = 30$。\n- 配药 3: $t_3 = 70$, $s_3 = 30$。\n\n配药日期为 $t_1=0$、$t_2=35$ 和 $t_3=70$。这三个日期都位于区间 $[0, 90)$ 内，因此相关配药的索引集合为 $K = \\{1, 2, 3\\}$。\n\n**$MPR$ 的计算**\n\n使用推导出的 $MPR$ 公式：\n$$ MPR = \\frac{\\sum_{i=1}^{3} s_i}{T} = \\frac{s_1+s_2+s_3}{90} $$\n代入给定值：\n$$ MPR = \\frac{30 + 30 + 30}{90} = \\frac{90}{90} = 1 $$\n\n**$PDC$ 的计算**\n\n使用推导出的 $PDC$ 公式，我们首先确定覆盖天数的集合 $C_{covered}$。\n三次配药的覆盖区间为：\n- $C_1 = [t_1, t_1 + s_1) = [0, 30)$\n- $C_2 = [t_2, t_2 + s_2) = [35, 65)$\n- $C_3 = [t_3, t_3 + s_3) = [70, 100)$\n\n这些区间的并集是 $C_{union} = [0, 30) \\cup [35, 65) \\cup [70, 100)$。\n接下来，我们将此并集与观察区间 $I_{obs} = [0, 90)$ 求交集：\n$$ C_{covered} = \\left( [0, 30) \\cup [35, 65) \\cup [70, 100) \\right) \\cap [0, 90) $$\n我们可以将交集分配到并集中：\n$$ C_{covered} = ([0, 30) \\cap [0, 90)) \\cup ([35, 65) \\cap [0, 90)) \\cup ([70, 100) \\cap [0, 90)) $$\n这可以简化为：\n$$ C_{covered} = [0, 30) \\cup [35, 65) \\cup [70, 90) $$\n区间 $[0, 30)$、$[35, 65)$ 和 $[70, 90)$ 是不相交的。因此，它们并集的测度是它们各自测度（长度）的总和：\n$$ \\mu([0, 30)) = 30 - 0 = 30 $$\n$$ \\mu([35, 65)) = 65 - 35 = 30 $$\n$$ \\mu([70, 90)) = 90 - 70 = 20 $$\n总覆盖天数为 $\\mu(C_{covered}) = 30 + 30 + 20 = 80$。\n最后，我们计算 $PDC$：\n$$ PDC = \\frac{\\mu(C_{covered})}{T} = \\frac{80}{90} = \\frac{8}{9} $$\n\n计算出的值为 $MPR = 1$ 和 $PDC = \\frac{8}{9}$。", "answer": "$$\\boxed{\\begin{pmatrix} 1  \\frac{8}{9} \\end{pmatrix}}$$", "id": "4716818"}, {"introduction": "除了患者自身的因素，社会经济环境，尤其是医疗成本，也深刻影响着医疗依从性。本练习引入了健康经济学中的一个关键概念——需求的价格弹性，用以量化患者的用药行为对共付额（copay）变化的敏感程度。通过这个假设的恒定弹性模型，你将学习如何运用一个严谨的数学框架，来预测保险政策调整可能对患者群体依从性产生的具体影响。[@problem_id:4716833]", "problem": "一个卫生系统正在研究接受长期降压治疗的患者的服药行为。依从性被操作化为药物覆盖天数比例（PDC），定义为在某一时期内，患者有药可用的治疗天数所占的比例。卫生经济学中的实证研究通常将依从性需求建模为相对于共付额具有恒定的价格弹性，这意味着在所考虑的范围内，共付额每变化一个百分比所引起的依从性变化的百分比近似恒定。假设一个关于依从性对共付额的多变量对数-对数模型得出该人群的需求价格弹性估计值为 $\\epsilon=-0.3$。\n\n保险公司正在考虑将所有相关药物的共付额统一提高 $20\\%$。从需求相对于共付额的价格弹性的基本定义出发，\n$$\\epsilon \\equiv \\frac{dQ/Q}{dP/P},$$\n其中 $Q$ 表示依从性（PDC），$P$ 表示共付额。假设在所考虑的变化范围内弹性是恒定的，推导出当共付额以因子 $r=\\frac{P_{2}}{P_{1}}$ 进行乘法变化时，依从性比例变化的确切表达式，然后计算当 $r=1.2$ 和 $\\epsilon=-0.3$ 时依从性相对变化的数值。将最终的依从性相对变化表示为小数（不使用百分号），并将您的答案四舍五入到 $4$ 位有效数字。", "solution": "所陈述的问题是有效的。它在科学上基于微观经济学原理（需求的价格弹性），在数学上是适定的，并且以客观和精确的语言呈现。所有必要的信息都已提供。\n\n问题要求从恒定价格弹性 $\\epsilon$ 的定义推导出依从性（$Q$）和共付额（$P$）之间的关系。该定义以微分关系给出：\n$$ \\epsilon \\equiv \\frac{dQ/Q}{dP/P} $$\n在此，$\\epsilon$ 被假定为一个常数。我们可以重新整理这个方程以分离变量 $Q$ 和 $P$：\n$$ \\frac{dQ}{Q} = \\epsilon \\frac{dP}{P} $$\n为了找出共付额从初始值 $P_1$ 变化到最终值 $P_2$ 时，依从性相应地从 $Q_1$ 变化到 $Q_2$ 的影响，我们必须在这两个状态之间对这个微分方程进行积分。\n$$ \\int_{Q_1}^{Q_2} \\frac{1}{Q} dQ = \\int_{P_1}^{P_2} \\epsilon \\frac{1}{P} dP $$\n由于 $\\epsilon$ 是给定的常数，它可以从右侧的积分中提出来：\n$$ \\int_{Q_1}^{Q_2} \\frac{1}{Q} dQ = \\epsilon \\int_{P_1}^{P_2} \\frac{1}{P} dP $$\n$\\frac{1}{x}$ 相对于 $x$ 的积分是 $\\ln|x|$。由于依从性（$Q$，一个比例）和共付额（$P$，一项成本）都必须是正数，我们可以去掉绝对值符号。计算定积分得出：\n$$ [\\ln(Q)]_{Q_1}^{Q_2} = \\epsilon [\\ln(P)]_{P_1}^{P_2} $$\n$$ \\ln(Q_2) - \\ln(Q_1) = \\epsilon (\\ln(P_2) - \\ln(P_1)) $$\n使用对数性质 $\\ln(a) - \\ln(b) = \\ln(a/b)$，我们可以简化该方程：\n$$ \\ln\\left(\\frac{Q_2}{Q_1}\\right) = \\epsilon \\ln\\left(\\frac{P_2}{P_1}\\right) $$\n使用另一个对数性质 $c \\ln(a) = \\ln(a^c)$，我们得到：\n$$ \\ln\\left(\\frac{Q_2}{Q_1}\\right) = \\ln\\left(\\left(\\frac{P_2}{P_1}\\right)^{\\epsilon}\\right) $$\n为了分离出依从性的比率，我们对等式两边取指数：\n$$ \\exp\\left(\\ln\\left(\\frac{Q_2}{Q_1}\\right)\\right) = \\exp\\left(\\ln\\left(\\left(\\frac{P_2}{P_1}\\right)^{\\epsilon}\\right)\\right) $$\n$$ \\frac{Q_2}{Q_1} = \\left(\\frac{P_2}{P_1}\\right)^{\\epsilon} $$\n问题将共付额变化的乘法因子定义为 $r = \\frac{P_2}{P_1}$。将此代入方程，得到所求的依从性比例变化的确切表达式：\n$$ \\frac{Q_2}{Q_1} = r^{\\epsilon} $$\n这种函数形式，$Q = kP^{\\epsilon}$（其中 $k$ 为某个常数），被称为恒定弹性模型。\n\n接下来，我们被要求计算给定参数下的*依从性相对变化*的数值。相对变化定义为 $\\frac{Q_2 - Q_1}{Q_1}$。我们可以用比例变化来表示它：\n$$ \\frac{Q_2 - Q_1}{Q_1} = \\frac{Q_2}{Q_1} - 1 = r^{\\epsilon} - 1 $$\n问题陈述了共付额统一增加 $20\\%$。这意味着新的共付额 $P_2$ 是原始共付额 $P_1$ 的 $1.2$ 倍。因此，因子 $r$ 是：\n$$ r = \\frac{P_2}{P_1} = \\frac{1.2 P_1}{P_1} = 1.2 $$\n给定的价格弹性是 $\\epsilon = -0.3$。\n将这些值代入相对变化的表达式中：\n$$ \\frac{Q_2 - Q_1}{Q_1} = (1.2)^{-0.3} - 1 $$\n我们现在计算其数值：\n$$ (1.2)^{-0.3} = \\frac{1}{(1.2)^{0.3}} \\approx 0.946772818 $$\n因此，相对变化为：\n$$ 0.946772818 - 1 = -0.053227182 $$\n问题要求答案四舍五入到 $4$ 位有效数字。第一个有效数字是 $5$。数四位得到 $-0.05322$。第五位数字是 $7$，即 $\\ge 5$，所以我们将最后一位数字向上舍入。\n$$ -0.05323 $$\n这个结果表明，共付额增加 $20\\%$ 预计将导致药物依从性下降约 $5.323\\%$。", "answer": "$$\\boxed{-0.05323}$$", "id": "4716833"}, {"introduction": "患者能否正确理解并执行复杂的治疗方案，是决定依从性的关键一环，而这与他们的健康素养，特别是计算素养（numeracy）密切相关。本练习将向你展示如何使用心理测量学模型（如此处使用的逻辑斯谛函数）来建立认知能力与行为表现之间的量化联系。通过计算一个假设队列中不同计算素养水平患者的预期错误率，你将体会到个体差异如何汇聚成群体层面的健康结果，并理解为何清晰简明的医嘱至关重要。[@problem_id:4716825]", "problem": "一位临床医生向开始使用基础胰岛素的患者提供了剂量调整指令：“每$3$天增加$2$个单位。”在医学心理学中，健康计算能力是指在健康情境下理解和使用数字信息的能力，并且是医疗依从性的一个已知决定因素。医疗依从性定义为患者的行为与医疗服务提供者共同商定的建议相符的程度。经验性心理计量建模通常使用S型（逻辑斯谛）函数将任务表现与能力得分联系起来。假设患者的计算能力得分为 $N \\in [0,100]$。设正确解读剂量增量（“$2$个单位”）的概率模型为\n$$\np_{A}(N) = \\frac{1}{1+\\exp\\!\\left(-k_{A}\\,(N-\\theta_{A})\\right)},\n$$\n而正确解读时间间隔（“每$3$天”）的概率为\n$$\np_{I}(N) = \\frac{1}{1+\\exp\\!\\left(-k_{I}\\,(N-\\theta_{I})\\right)}.\n$$\n假设这两个理解部分是相互独立的。在计划的剂量调整事件中，如果剂量或时间间隔有任何一个被误解，则发生一次误解。在一个为期$30$天、每$3$天安排一次剂量调整的周期内，将错误率定义为执行错误的计划剂量调整事件的预期比例。\n\n考虑一个包含三个计算能力亚组及其权重的队列：低计算能力组 $N_{L} = 25$，权重 $w_{L} = 0.3$；中等计算能力组 $N_{M} = 55$，权重 $w_{M} = 0.5$；高计算能力组 $N_{H} = 85$，权重 $w_{H} = 0.2$。使用参数值 $k_{A} = 0.08$, $\\theta_{A} = 50$, $k_{I} = 0.06$ 和 $\\theta_{I} = 60$。\n\n从依从性和计算能力的核心定义以及标准概率定律出发，推导队列整体错误率的表达式，然后计算其值。将最终错误率表示为小数，并将您的答案四舍五入到四位有效数字。", "solution": "此问题旨在基于心理测量模型计算一个队列的整体错误率。推导从定义单个患者的错误概率开始，然后计算整个队列的加权平均错误率。\n\n设 $A$ 为患者正确解读剂量增量的事件，$I$ 为患者正确解读时间间隔的事件。对于计算能力为 $N$ 的患者，这些事件的概率由给定的逻辑斯谛函数定义：\n$p_A(N) = P(A|N)$ 和 $p_I(N) = P(I|N)$。\n\n根据问题定义，只有当剂量和时间间隔都正确解读时，调整事件才算正确执行。设 $C$ 为正确执行的事件。由于 $A$ 和 $I$ 相互独立，正确执行的概率为：\n$$ P(C|N) = P(A \\cap I | N) = P(A|N) \\cdot P(I|N) = p_A(N)p_I(N) $$\n错误事件 $E$ 是正确事件 $C$ 的补集。因此，对于计算能力为 $N$ 的患者，其个体错误率 $E(N)$ 为：\n$$ E(N) = P(E|N) = 1 - P(C|N) = 1 - p_A(N)p_I(N) $$\n这个概率等同于问题中定义的“执行错误的计划剂量调整事件的预期比例”。\n\n队列整体错误率 $E_{cohort}$ 是各亚组错误率的加权平均值，根据全概率定律：\n$$ E_{cohort} = \\sum_{j \\in \\{L, M, H\\}} w_j E(N_j) = \\sum_{j \\in \\{L, M, H\\}} w_j (1 - p_A(N_j)p_I(N_j)) $$\n其中 $j$ 代表低（L）、中（M）、高（H）计算能力亚组。\n\n现在，使用给定的参数（$k_A = 0.08, \\theta_A = 50, k_I = 0.06, \\theta_I = 60$）和各亚组的 $N_j$ 值进行计算。\n\n**1. 低计算能力亚组 ($N_L = 25$):**\n- $p_A(25) = \\frac{1}{1 + \\exp(-0.08(25-50))} = \\frac{1}{1 + \\exp(2.0)} \\approx 0.11920$\n- $p_I(25) = \\frac{1}{1 + \\exp(-0.06(25-60))} = \\frac{1}{1 + \\exp(2.1)} \\approx 0.10909$\n- $E(N_L) = 1 - (0.11920 \\times 0.10909) \\approx 1 - 0.013004 = 0.986996$\n\n**2. 中等计算能力亚组 ($N_M = 55$):**\n- $p_A(55) = \\frac{1}{1 + \\exp(-0.08(55-50))} = \\frac{1}{1 + \\exp(-0.4)} \\approx 0.59868$\n- $p_I(55) = \\frac{1}{1 + \\exp(-0.06(55-60))} = \\frac{1}{1 + \\exp(0.3)} \\approx 0.42556$\n- $E(N_M) = 1 - (0.59868 \\times 0.42556) \\approx 1 - 0.254773 = 0.745227$\n\n**3. 高计算能力亚组 ($N_H = 85$):**\n- $p_A(85) = \\frac{1}{1 + \\exp(-0.08(85-50))} = \\frac{1}{1 + \\exp(-2.8)} \\approx 0.94267$\n- $p_I(85) = \\frac{1}{1 + \\exp(-0.06(85-60))} = \\frac{1}{1 + \\exp(-1.5)} \\approx 0.81757$\n- $E(N_H) = 1 - (0.94267 \\times 0.81757) \\approx 1 - 0.770663 = 0.229337$\n\n**4. 队列整体错误率:**\n使用亚组权重 $w_L = 0.3, w_M = 0.5, w_H = 0.2$ 计算加权平均值：\n$$ E_{cohort} = w_L E(N_L) + w_M E(N_M) + w_H E(N_H) $$\n$$ E_{cohort} \\approx 0.3(0.986996) + 0.5(0.745227) + 0.2(0.229337) $$\n$$ E_{cohort} \\approx 0.2960988 + 0.3726135 + 0.0458674 $$\n$$ E_{cohort} \\approx 0.7145797 $$\n将结果四舍五入到四位有效数字，得到 $0.7146$。", "answer": "$$\n\\boxed{0.7146}\n$$", "id": "4716825"}]}
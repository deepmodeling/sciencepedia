{"hands_on_practices": [{"introduction": "队列研究是流行病学中理解因果关系和疾病发展的基石，它通过前瞻性地追踪不同暴露水平的人群来直接观察疾病的发生。本练习将带你亲手实践从一个假设的队列研究中提取关键数据，并计算核心的关联测量指标，包括暴露组和非暴露组的累积发病率、$RR$（相对风险）和$RD$（风险差）。掌握这些计算是准确解读队列研究结果、评估暴露因素潜在健康影响的第一步 [@problem_id:4956759]。", "problem": "一个由社区居住成年人组成的封闭性前瞻性队列被随访 $1$ 年，期间无失访也无竞争风险。在基线时，有 $200$ 名参与者暴露于一种特定的职业性溶剂，而 $300$ 名参与者未暴露。在随访期间，暴露组中有 $30$ 例某种皮炎的新发病例，未暴露组中有 $10$ 例新发病例。\n\n仅使用累积发病率 (CI)、相对风险 (RR)、风险差 (RD) 和需治数 (NNT) 或需害数 (NNH) 的核心流行病学定义，计算：\n- 暴露组的累积发病率，\n- 未暴露组的累积发病率，\n- 相对风险 (RR)，\n- 风险差 (RD)，以及\n- 需治数或需害数（根据效应方向报告合适的那个）。\n\n将累积发病率和风险差以小数形式表示（无单位的风险）。对于累积发病率、RR 和 RD，保留四位有效数字。对于需治数或需害数，报告通过取绝对风险差的倒数并向上取整到下一个整数得到的常规整数值。按以下顺序提供您的最终数值：\n$$\\text{CI}_{\\text{exposed}},\\ \\text{CI}_{\\text{unexposed}},\\ RR,\\ RD,\\ \\text{NNT or NNH}.$$", "solution": "用户要求根据一项前瞻性队列研究计算几项流行病学指标。\n\n问题陈述已经过验证并被认为是有效的。它具有科学依据，问题设定良好，客观，并包含唯一解所需的所有必要信息。所提供的定义和数据是流行病学领域的标准。\n\n给定以下数据：\n- 基线时暴露组的参与者人数：$N_e = 200$。\n- 基线时未暴露组的参与者人数：$N_u = 300$。\n- 1年内暴露组的皮炎新发病例数：$I_e = 30$。\n- 1年内未暴露组的皮炎新发病例数：$I_u = 10$。\n该研究是一个封闭性队列，无失访，无竞争风险。\n\n我们现在计算所要求的指标。\n\n1.  **暴露组的累积发病率 ($\\text{CI}_e$)**\n    累积发病率 (CI)，也称为风险，定义为在特定时期内，最初未患病的某个群体中发生该疾病的个体所占的比例。\n    计算公式为：\n    $$ \\text{CI} = \\frac{\\text{Number of new cases}}{\\text{Number of individuals at risk at the start of the period}} $$\n    对于暴露组：\n    $$ \\text{CI}_e = \\frac{I_e}{N_e} = \\frac{30}{200} = 0.15 $$\n    保留四位有效数字，我们得到 $0.1500$。\n\n2.  **未暴露组的累积发病率 ($\\text{CI}_u$)**\n    对未暴露组使用相同的公式：\n    $$ \\text{CI}_u = \\frac{I_u}{N_u} = \\frac{10}{300} = \\frac{1}{30} \\approx 0.033333... $$\n    保留四位有效数字，我们得到 $0.03333$。\n\n3.  **相对风险 (RR)**\n    相对风险是暴露组结局风险与未暴露组结局风险的比值。\n    计算公式为：\n    $$ RR = \\frac{\\text{CI}_e}{\\text{CI}_u} $$\n    为了精确，使用未四舍五入的值：\n    $$ RR = \\frac{0.15}{1/30} = 0.15 \\times 30 = 4.5 $$\n    保留四位有效数字，我们得到 $4.500$。\n\n4.  **风险差 (RD)**\n    风险差，也称为归因风险，是暴露组和未暴露组风险之间的差值。\n    计算公式为：\n    $$ RD = \\text{CI}_e - \\text{CI}_u $$\n    为了精确，使用未四舍五入的值：\n    $$ RD = 0.15 - \\frac{1}{30} = \\frac{4.5}{30} - \\frac{1}{30} = \\frac{3.5}{30} = \\frac{7}{60} \\approx 0.116666... $$\n    保留四位有效数字，我们得到 $0.1167$。\n\n5.  **需治数 (NNT) 或 需害数 (NNH)**\n    风险差为正 ($RD  0$)，表明暴露与皮炎风险增加相关。因此，合适的指标是需害数 (NNH)。NNH 是指在特定时期内，需要有多少人暴露于该风险因素才会导致一例额外的不良结局。\n    计算公式为：\n    $$ NNH = \\frac{1}{|RD|} $$\n    使用风险差的精确值：\n    $$ NNH = \\frac{1}{7/60} = \\frac{60}{7} \\approx 8.5714... $$\n    问题指定报告将此值向上取整到下一个整数得到的常规整数。\n    $$ NNH_c = \\lceil 8.5714... \\rceil = 9 $$\n\n最终的有序数值是：$\\text{CI}_{\\text{exposed}} = 0.1500$, $\\text{CI}_{\\text{unexposed}} = 0.03333$, $RR = 4.500$, $RD = 0.1167$，以及 $NNH = 9$。", "answer": "$$\\boxed{\\begin{pmatrix} 0.1500  0.03333  4.500  0.1167  9 \\end{pmatrix}}$$", "id": "4956759"}, {"introduction": "与耗时较长的队列研究相比，病例对照研究为研究罕见病或长期潜伏期疾病的病因提供了一种更高效的方法。该设计的核心关联度量是比值比（$OR$），它估计了病例组中暴露的几率相对于对照组中暴露几率的大小。本练习不仅将指导你计算比值比，还将引导你通过计算对数比值比的标准误来初步探索其统计不确定性，这对于构建置信区间和进行假设检验至关重要 [@problem_id:4956750]。", "problem": "一项基于医院的病例-对照研究调查了二元暴露与某种疾病发生之间的关联。研究对象包括 $200$ 例新发病例和 $400$ 名对照者。暴露与疾病的交叉分类如下：在病例中，$120$ 人暴露，$80$ 人未暴露；在对照者中，$80$ 人暴露，$320$ 人未暴露。将各单元格的计数表示为 $a=120$（病例暴露组），$b=80$（病例未暴露组），$c=80$（对照暴露组），以及 $d=320$（对照未暴露组）。从比值比（OR）的定义出发，即病例组中暴露的比值与对照组中暴露的比值之比，推导出估计量 $\\widehat{OR}$（用 $a$、$b$、$c$ 和 $d$ 表示），并计算其值。然后，利用大样本原理，并将各单元格计数视为近似独立且方差等于其均值，推导出 $\\operatorname{Var}\\!\\left(\\ln(\\widehat{OR})\\right)$ 的前导大样本表达式（用 $a$、$b$、$c$ 和 $d$ 表示），并计算相应的标准误 $\\operatorname{SE}\\!\\left(\\ln(\\widehat{OR})\\right)$。请以精确值的形式给出最终答案（不要近似或四舍五入），并按 $\\widehat{OR}$、$\\operatorname{SE}\\!\\left(\\ln(\\widehat{OR})\\right)$ 的顺序呈现。", "solution": "基本依据是病例-对照研究中比值比（OR）的定义，即病例组中暴露的比值与对照组中暴露的比值之比，以及对独立计数的对数和的大样本方差近似。\n\n首先，定义病例组和对照组中的暴露比值。病例组中的暴露比值为\n$$\n\\text{odds}_{\\text{cases}} \\;=\\; \\frac{\\text{暴露病例数}}{\\text{未暴露病例数}} \\;=\\; \\frac{a}{b}.\n$$\n对照组中的暴露比值为\n$$\n\\text{odds}_{\\text{controls}} \\;=\\; \\frac{\\text{暴露对照者数}}{\\text{未暴露对照者数}} \\;=\\; \\frac{c}{d}.\n$$\n根据定义，比值比是这两个比值的比率：\n$$\n\\widehat{OR} \\;=\\; \\frac{\\text{odds}_{\\text{cases}}}{\\text{odds}_{\\text{controls}}} \\;=\\; \\frac{a/b}{c/d} \\;=\\; \\frac{a\\,d}{b\\,c}.\n$$\n当 $a=120$，$b=80$，$c=80$ 和 $d=320$ 时，我们计算\n$$\n\\widehat{OR} \\;=\\; \\frac{120 \\times 320}{80 \\times 80} \\;=\\; \\frac{38400}{6400} \\;=\\; 6.\n$$\n\n接下来，考虑 $\\ln(\\widehat{OR})$ 的大样本行为。利用对数的性质，\n$$\n\\ln(\\widehat{OR}) \\;=\\; \\ln(a) + \\ln(d) - \\ln(b) - \\ln(c).\n$$\n在大样本近似下，我们将单元格计数 $a$、$b$、$c$ 和 $d$ 视为近似独立，并且对于每个计数 $X$，其方差 $\\operatorname{Var}(X) \\approx \\operatorname{E}(X)$（例如，通过对多项分布单元格的泊松近似，或通过将delta方法应用于具有大样本总数的二项或超几何抽样），计数 $X$ 的对数 $\\ln(X)$ 的方差近似为 $\\operatorname{Var}(\\ln(X)) \\approx \\frac{1}{\\operatorname{E}(X)}$。用观测到的计数替换期望值，可以得到前导的代入近似。因为独立随机变量的和与差的方差等于它们方差的和，我们得到\n$$\n\\operatorname{Var}\\!\\left(\\ln(\\widehat{OR})\\right) \\;\\approx\\; \\operatorname{Var}\\!\\left(\\ln(a)\\right) + \\operatorname{Var}\\!\\left(\\ln(d)\\right) + \\operatorname{Var}\\!\\left(-\\ln(b)\\right) + \\operatorname{Var}\\!\\left(-\\ln(c)\\right).\n$$\n由于 $\\operatorname{Var}(-Y)=\\operatorname{Var}(Y)$，\n$$\n\\operatorname{Var}\\!\\left(\\ln(\\widehat{OR})\\right) \\;\\approx\\; \\frac{1}{a} + \\frac{1}{d} + \\frac{1}{b} + \\frac{1}{c} \\;=\\; \\frac{1}{a} + \\frac{1}{b} + \\frac{1}{c} + \\frac{1}{d}.\n$$\n因此，对数比值比的标准误是\n$$\n\\operatorname{SE}\\!\\left(\\ln(\\widehat{OR})\\right) \\;=\\; \\sqrt{\\frac{1}{a} + \\frac{1}{b} + \\frac{1}{c} + \\frac{1}{d}}.\n$$\n代入观测到的计数，得到\n$$\n\\operatorname{SE}\\!\\left(\\ln(\\widehat{OR})\\right) \\;=\\; \\sqrt{\\frac{1}{120} + \\frac{1}{80} + \\frac{1}{80} + \\frac{1}{320}} \\;=\\; \\sqrt{\\frac{8}{960} + \\frac{12}{960} + \\frac{12}{960} + \\frac{3}{960}} \\;=\\; \\sqrt{\\frac{35}{960}} \\;=\\; \\sqrt{\\frac{7}{192}}.\n$$\n\n因此，精确值为 $\\widehat{OR} = 6$ 和 $\\operatorname{SE}\\!\\left(\\ln(\\widehat{OR})\\right) = \\sqrt{7/192}$。", "answer": "$$\\boxed{\\begin{pmatrix}6  \\sqrt{\\frac{7}{192}}\\end{pmatrix}}$$", "id": "4956750"}, {"introduction": "在观察性研究中，一个常见的挑战是混杂偏倚，即第三个变量（混杂因素）同时与暴露和结局相关，从而歪曲了两者之间真实的关联强度。本练习模拟了一个存在年龄混杂的队列研究场景，旨在让你掌握一种识别和控制混杂的经典方法——分层分析。通过计算分层风险比和使用Mantel-Haenszel方法获得调整后的合并风险比，你将能区分粗略关联和调整后关联的差异，并判断混杂的方向和影响 [@problem_id:4956701]。", "problem": "进行了一项前瞻性队列研究，以评估暴露于一种新型职业溶剂是否与一年内发生接触性皮炎相关。年龄被怀疑是一个混杂因素，因为年龄较大的工人可能具有更高的皮炎基线风险，并且也更可能从事涉及溶剂暴露的工作。数据被分为两个年龄组进行分层：年龄小于$50$岁的工人和年龄大于等于$50$岁的工人。在每个分层中，暴露组和非暴露组工人的结局记录如下（每个数值代表工人的数量）：\n\n年龄  50 岁：\n- 暴露组：$40$例皮炎，$160$例非病例（总计$200$）。\n- 非暴露组：$30$例皮炎，$270$例非病例（总计$300$）。\n\n年龄 $\\geq 50$ 岁：\n- 暴露组：$120$例皮炎，$120$例非病例（总计$240$）。\n- 非暴露组：$160$例皮炎，$480$例非病例（总计$640$）。\n\n从风险和风险比的核心定义出发，并使用分层原则来控制混杂，完成以下任务：\n- 计算年龄  50 岁和年龄 $\\geq 50$ 岁分层的特定风险和特定风险比。\n- 计算整个队列的粗略（未分层）风险比。\n- 使用基于 Mantel–Haenszel 方法的合理分层合并方法，推导并计算校正了年龄因素的 Mantel–Haenszel 合并风险比 $RR_{MH}$。\n- 简要比较粗略风险比与校正后的 $RR_{MH}$，并解释是否存在年龄混杂的证据以及混杂的方向。\n\n以小数形式报告 Mantel–Haenszel 合并风险比 $RR_{MH}$ 的最终值，四舍五入到四位有效数字。无需单位。", "solution": "首先验证问题陈述，以确保其具有科学依据、定义明确且客观。\n\n### 第1步：提取已知信息\n前瞻性队列研究所提供的数据如下：\n- 该研究调查了一种新型职业溶剂（暴露）与一年内发生接触性皮炎（结局）之间的关联。\n- 年龄是一个可疑的混杂因素。\n- 数据被分层为两个年龄组： 50 岁和 $\\geq 50$ 岁。\n\n分层1：年龄  50 岁\n- 暴露组：$40$ 例病例，$160$ 例非病例。暴露组总人数 ($n_{E1}$) = $40+160 = 200$。\n- 非暴露组：$30$ 例病例，$270$ 例非病例。非暴露组总人数 ($n_{U1}$) = $30+270 = 300$。\n- 该分层总人数 ($N_1$) = $200+300 = 500$。\n\n分层2：年龄 $\\geq 50$ 岁\n- 暴露组：$120$ 例病例，$120$ 例非病例。暴露组总人数 ($n_{E2}$) = $120+120 = 240$。\n- 非暴露组：$160$ 例病例，$480$ 例非病例。非暴露组总人数 ($n_{U2}$) = $160+480 = 640$。\n- 该分层总人数 ($N_2$) = $240+640 = 880$。\n\n任务是计算分层特定风险比、粗略风险比和 Mantel-Haenszel 合并风险比 ($RR_{MH}$)，并评估混杂。\n\n### 第2步：使用提取的已知信息进行验证\n- **科学依据：** 该问题使用了流行病学的标准概念和方法，特别是队列研究分析、分层和混杂评估。Mantel-Haenszel 方法是流行病学分析的基石。该情景在科学上是合理的。\n- **定义明确：** 提供了所有必要的数据（每个分层中暴露组和非暴露组的病例数和非病例数）。目标陈述清晰，可以得出一个唯一且有意义的解。\n- **客观性：** 该问题用客观的数值数据呈现，并要求基于已建立的公式进行计算。没有主观或基于观点的陈述。\n\n该问题没有表现出任何缺陷，如科学上不合理、不完整或模糊不清。\n\n### 第3步：结论与行动\n问题有效。将提供完整的解答。\n\n### 解答\n\n解答过程首先定义风险和风险比的基本量，然后应用这些定义来计算分层特定、粗略和校正后的关联度量。\n\n风险，或称发病比例，是在指定时间段内发生结局的概率。其计算公式为：\n$$\n\\text{风险} = \\frac{\\text{新发病例数}}{\\text{风险人群总数}}\n$$\n风险比 ($RR$) 是暴露组的风险与非暴露组的风险之比：\n$$\nRR = \\frac{\\text{暴露组风险}}{\\text{非暴露组风险}} = \\frac{R_E}{R_U}\n$$\n\n**1. 分层特定风险和风险比**\n\n对于每个年龄分层，我们计算暴露组和非暴露组的皮炎风险以及相应的风险比。\n\n**分层1：年龄  50 岁**\n- 暴露组风险 ($R_{E1}$):\n$$\nR_{E1} = \\frac{40}{40 + 160} = \\frac{40}{200} = 0.2\n$$\n- 非暴露组风险 ($R_{U1}$):\n$$\nR_{U1} = \\frac{30}{30 + 270} = \\frac{30}{300} = 0.1\n$$\n- 分层特定风险比 ($RR_1$):\n$$\nRR_1 = \\frac{R_{E1}}{R_{U1}} = \\frac{0.2}{0.1} = 2.0\n$$\n\n**分层2：年龄 $\\geq 50$ 岁**\n- 暴露组风险 ($R_{E2}$):\n$$\nR_{E2} = \\frac{120}{120 + 120} = \\frac{120}{240} = 0.5\n$$\n- 非暴露组风险 ($R_{U2}$):\n$$\nR_{U2} = \\frac{160}{160 + 480} = \\frac{160}{640} = 0.25\n$$\n- 分层特定风险比 ($RR_2$):\n$$\nRR_2 = \\frac{R_{E2}}{R_{U2}} = \\frac{0.5}{0.25} = 2.0\n$$\n分层特定风险比是相同的 ($RR_1 = RR_2 = 2.0$)，这表明溶剂对皮炎风险的影响在这两个年龄组中是一致的（即，年龄不存在效应修饰作用）。\n\n**2. 粗略（未分层）风险比**\n\n为了计算粗略风险比，我们首先将分层数据合并成一个单一的 $2 \\times 2$ 表。\n- 暴露组总病例数 = $40 + 120 = 160$\n- 暴露组总非病例数 = $160 + 120 = 280$\n- 暴露组总人数 = $160 + 280 = 440$\n- 非暴露组总病例数 = $30 + 160 = 190$\n- 非暴露组总非病例数 = $270 + 480 = 750$\n- 非暴露组总人数 = $190 + 750 = 940$\n\n- 暴露组粗略风险 ($R_{E,crude}$):\n$$\nR_{E,crude} = \\frac{160}{440} = \\frac{4}{11}\n$$\n- 非暴露组粗略风险 ($R_{U,crude}$):\n$$\nR_{U,crude} = \\frac{190}{940} = \\frac{19}{94}\n$$\n- 粗略风险比 ($RR_{crude}$):\n$$\nRR_{crude} = \\frac{R_{E,crude}}{R_{U,crude}} = \\frac{4/11}{19/94} = \\frac{4 \\times 94}{11 \\times 19} = \\frac{376}{209} \\approx 1.799\n$$\n\n**3. Mantel–Haenszel 合并风险比 ($RR_{MH}$)**\n\nMantel-Haenszel 方法提供了一个校正了分层变量（年龄）的风险比的合并估计值。它是分层特定风险比的加权平均值。对于一组 $k$ 个分层，公式为：\n$$\nRR_{MH} = \\frac{\\sum_{i=1}^{k} \\frac{a_i \\cdot n_{Ui}}{N_i}}{\\sum_{i=1}^{k} \\frac{b_i \\cdot n_{Ei}}{N_i}}\n$$\n其中对于分层 $i$：\n- $a_i$ = 暴露组中的病例数\n- $b_i$ = 非暴露组中的病例数\n- $n_{Ei}$ = 暴露组总人数\n- $n_{Ui}$ = 非暴露组总人数\n- $N_i$ = 该分层总人数 ($n_{Ei} + n_{Ui}$)\n\n让我们将此公式应用于我们的数据。\n\n**对于分层1（年龄  50 岁）：**\n$a_1 = 40$, $b_1 = 30$, $n_{E1} = 200$, $n_{U1} = 300$, $N_1 = 500$。\n- 分子贡献： $\\frac{a_1 n_{U1}}{N_1} = \\frac{40 \\times 300}{500} = \\frac{12000}{500} = 24$\n- 分母贡献： $\\frac{b_1 n_{E1}}{N_1} = \\frac{30 \\times 200}{500} = \\frac{6000}{500} = 12$\n\n**对于分层2（年龄 $\\geq 50$ 岁）：**\n$a_2 = 120$, $b_2 = 160$, $n_{E2} = 240$, $n_{U2} = 640$, $N_2 = 880$。\n- 分子贡献： $\\frac{a_2 n_{U2}}{N_2} = \\frac{120 \\times 640}{880} = \\frac{76800}{880} = \\frac{960}{11}$\n- 分母贡献： $\\frac{b_2 n_{E2}}{N_2} = \\frac{160 \\times 240}{880} = \\frac{38400}{880} = \\frac{480}{11}$\n\n现在，我们将这些贡献相加来求 $RR_{MH}$：\n$$\nRR_{MH} = \\frac{24 + \\frac{960}{11}}{12 + \\frac{480}{11}} = \\frac{\\frac{264 + 960}{11}}{\\frac{132 + 480}{11}} = \\frac{\\frac{1224}{11}}{\\frac{612}{11}} = \\frac{1224}{612} = 2.0\n$$\n\n**4. 比较与混杂评估**\n\n- 粗略风险比为 $RR_{crude} \\approx 1.799$。\n- 校正后的风险比为 $RR_{MH} = 2.0$。\n\n由于粗略估计值 ($1.799$) 与年龄校正后的估计值 ($2.0$) 不同，因此存在年龄混杂的证据。出现混杂是因为年龄与暴露（溶剂）和结局（皮炎）都相关。\n\n- **年龄与结局的关联：** 年龄较大组的皮炎基线风险 ($R_{U2}=0.25$) 高于年龄较小组 ($R_{U1}=0.1$)。\n- **年龄与暴露的关联：** 年龄较大组中暴露于溶剂的工人比例 ($\\frac{240}{880} \\approx 0.27$) 低于年龄较小组 ($\\frac{200}{500} = 0.4$)。\n\n校正后的风险比 ($2.0$) 代表了溶剂与皮炎之间关联的真实强度，该强度在不同年龄组中是一致的。粗略风险比 ($1.799$) 是对这一真实关联的低估，它偏向于无效值 $1.0$。这种现象被称为**负向混杂**。它的发生是因为皮炎基线风险较高的人群（年龄较大的工人）更少暴露于溶剂，这稀释了粗略分析中观察到的关联强度。\n\n最终要求的值是 Mantel-Haenszel 合并风险比，四舍五入到四位有效数字。\n$RR_{MH} = 2.0$。表示为四位有效数字，即 $2.000$。", "answer": "$$\n\\boxed{2.000}\n$$", "id": "4956701"}]}
{"hands_on_practices": [{"introduction": "在对医学图像进行任何定量分析之前，首要步骤是理解图像数据所代表的物理尺寸。这项练习将带你实践如何使用DICOM元数据来计算一个基础的形态学特征：感兴趣区域（ROI）的体积。通过这个练习 ([@problem_id:4554338])，你将建立起数字表示（体素）与被研究的物理对象之间的桥梁。", "problem": "影像组学流程始于使用医学数字成像和通信 (DICOM) 元数据，将图像体积的几何形状与真实世界的物理尺寸联系起来。考虑一个用于影像组学的轴向计算机断层扫描序列，其中感兴趣区域 (ROI) 以二值掩模的形式提供，恰好包含 $N_{v} = 23{,}000$ 个被标记为 ROI 一部分的体素。DICOM 的 PixelSpacing 属性（标签 $(0028,0030)$）表示平面内间距为 $[0.7, 0.7]$ 毫米，而 SliceThickness 属性（标签 $(0018,0050)$）为 $2$ 毫米。假设坐标轴正交，无机架倾斜，且切片连续无层间间隙，因此物理体素是一个直角长方体，其边长等于沿行、列和切片方向的物理间距。\n\n仅从直角长方体的体积等于其三条边长之积的基本几何定义出发，并根据这些 DICOM 属性的标准解释（PixelSpacing 条目为沿行和列的相邻像素中心之间的物理距离，单位为毫米；SliceThickness 为切片在穿透平面方向上的物理范围，单位为毫米），推导一个关于体素体积的通用表达式，用 PixelSpacing 的分量和 SliceThickness 来表示。然后用它计算该掩模的 ROI 体积。\n\n以立方厘米表示最终的 ROI 体积，并将答案四舍五入到四位有效数字。仅陈述以立方厘米为单位的最终数值。", "solution": "问题陈述已经过评估，被认为是有效的。它具有科学依据，提法明确，客观，并包含得出唯一解所需的所有信息。其前提与影像组学和医学成像领域的标准实践相符。\n\n主要目标是根据计算机断层扫描 (CT) 图像计算感兴趣区域 (ROI) 的总体积。总体积 $V_{\\text{ROI}}$ 是 ROI 中体素的数量 $N_v$ 与单个体素的体积 $V_{\\text{voxel}}$ 的乘积。\n$$V_{\\text{ROI}} = N_v \\times V_{\\text{voxel}}$$\n\n问题指定将体素建模为直角长方体。这种棱柱体积的基本几何定义是其三个正交边长的乘积。\n$$V_{\\text{prism}} = l_1 \\times l_2 \\times l_3$$\n\n这些边长由 DICOM 的物理间距属性给出。设平面内沿行和列方向的物理间距分别表示为 $\\Delta x$ 和 $\\Delta y$。这些对应于 `PixelSpacing` 属性中的两个值。设穿透平面方向的物理间距表示为 $\\Delta z$，这对应于 `SliceThickness` 属性。\n根据问题陈述，我们有：\n- 平面内间距（来自 `PixelSpacing`）：$\\Delta x = 0.7 \\text{ mm}$ 且 $\\Delta y = 0.7 \\text{ mm}$。\n- 穿透平面间距（来自 `SliceThickness`）：$\\Delta z = 2 \\text{ mm}$。\n\n问题陈述要求假设体素边长等于这些物理间距。在正交采集成像的医学成像领域，这是一个标准惯例，即体素填充了由这些中心到中心和层到层的距离所定义的空间。\n\n首先，按照要求，我们用这些源自 DICOM 的参数推导单个体素体积 $V_{\\text{voxel}}$ 的通用表达式。\n$$V_{\\text{voxel}} = \\Delta x \\times \\Delta y \\times \\Delta z$$\n此公式将 DICOM 元数据与单个图像元素的物理体积联系起来。\n\n现在，我们代入给定值，以立方毫米为单位计算单个体素的体积。\n$$V_{\\text{voxel}} = (0.7 \\text{ mm}) \\times (0.7 \\text{ mm}) \\times (2 \\text{ mm})$$\n$$V_{\\text{voxel}} = 0.49 \\text{ mm}^2 \\times 2 \\text{ mm} = 0.98 \\text{ mm}^3$$\n\nROI 中的体素总数给定为 $N_v = 23000$。\n我们现在可以计算 ROI 的总体积 $V_{\\text{ROI}}$，单位为立方毫米。\n$$V_{\\text{ROI}} = N_v \\times V_{\\text{voxel}} = 23000 \\times 0.98 \\text{ mm}^3$$\n$$V_{\\text{ROI}} = 22540 \\text{ mm}^3$$\n\n问题的最后部分要求以立方厘米 ($\\text{cm}^3$) 表示该体积。毫米和厘米之间的换算关系是 $1 \\text{ cm} = 10 \\text{ mm}$。对于体积单位，我们必须将此换算因子立方：\n$$1 \\text{ cm}^3 = (10 \\text{ mm})^3 = 1000 \\text{ mm}^3$$\n要将 $V_{\\text{ROI}}$ 从 $\\text{mm}^3$ 转换为 $\\text{cm}^3$，我们需要除以 $1000$。\n$$V_{\\text{ROI}} = \\frac{22540 \\text{ mm}^3}{1000 \\frac{\\text{mm}^3}{\\text{cm}^3}} = 22.54 \\text{ cm}^3$$\n\n最后，问题要求答案四舍五入到四位有效数字。计算出的值 $22.54$ 已恰好包含四位有效数字（数字 $2$、$2$、$5$ 和 $4$）。因此，无需进一步四舍五入。\n最终的 ROI 体积为 $22.54 \\text{ cm}^3$。", "answer": "$$\\boxed{22.54}$$", "id": "4554338"}, {"introduction": "理解了图像的几何信息后，下一步通常是预处理图像的强度值，以确保提取的特征稳定且可重复。这项练习 ([@problem_id:4554345]) 聚焦于一种常见的预处理技术——强度离散化，要求你推导并应用将体素强度值进行分箱的公式。这是为后续的纹理特征计算提供标准化输入的关键一步。", "problem": "在称为影像组学的定量图像分析中，一个典型的工作流程从图像采集、分割到预处理和特征提取。在预处理过程中，通常会执行强度离散化以稳定纹理特征，例如从灰度共生矩阵中提取的那些特征。考虑在计算机断层扫描图像上分割出的一个感兴趣区域（ROI, region of interest），其中强度以亨氏单位（HU, Hounsfield Unit）来衡量。在固定箱宽离散化中，ROI内的强度被划分到连续的箱中，每个箱的宽度为 $w$，覆盖从最小强度 $I_{\\min}$ 到最大强度 $I_{\\max}$ 的范围。箱被定义为左闭右开区间，但最后一个箱是左闭右闭的，以确保包含 $I_{\\max}$。箱的索引从 $1$ 开始，按强度升序排列。\n\n根据这些定义，推导一个表达式，用于计算覆盖从 $I_{\\min}$ 到 $I_{\\max}$ 范围所需的箱数 $N$，以及与属于ROI的强度为 $g$ 的体素相关联的箱索引 $b$。然后，使用 $I_{\\min}=-150$ HU, $I_{\\max}=250$ HU, $w=25$ HU, 和 $g=37$ HU 对这些表达式求值。以整数形式报告 $N$ 和 $b$ 的最终值。由于结果恰好是整数，因此不需要舍入说明。请将两个值一起作为最终答案提供。", "solution": "该问题陈述经评估是有效的。它在影像组学领域具有科学依据，提出了一个在定量图像分析中适定且客观的问题。所有关于强度离散化的必要数据和定义都已提供，并且设置是内部一致且物理上现实的。\n\n该问题要求基于固定箱宽离散化方案，推导给定强度 $g$ 的箱数 $N$ 和箱索引 $b$ 的表达式。参数是最小强度 $I_{\\min}$、最大强度 $I_{\\max}$ 和箱宽 $w$。箱被定义为左闭右开区间，索引从1开始。一个特殊条件是最后一个箱是右闭合的，以包含 $I_{\\max}$。\n\n首先，我们推导总箱数 $N$ 的表达式。\n需要离散化的总强度范围是 $\\Delta I = I_{\\max} - I_{\\min}$。\n箱是通过将此范围划分为宽度为 $w$ 的段来生成的。箱的边缘可以被看作是一个从 $I_{\\min}$ 开始的序列，后续边缘位于 $I_{\\min} + w$、$I_{\\min} + 2w$ 等位置。\n所需的箱数是覆盖整个范围 $\\Delta I$ 所需的宽度为 $w$ 的区间数量。\n让我们考虑比率 $\\frac{I_{\\max} - I_{\\min}}{w}$。\n\n情况1：$\\frac{I_{\\max} - I_{\\min}}{w}$ 不是一个整数。\n设 $\\frac{I_{\\max} - I_{\\min}}{w} = K + \\delta$，其中 $K$ 是一个整数且 $0  \\delta  1$。这意味着该范围跨越了 $K$ 个完整的箱和另一个箱的一部分。因此，总共需要 $K+1$ 个箱。这等价于 $\\lceil \\frac{I_{\\max} - I_{\\min}}{w} \\rceil$。例如，如果范围是 $10$，宽度是 $3$，则 $\\frac{10}{3} \\approx 3.33$。我们需要 $4$ 个箱：$[0,3), [3,6), [6,9), [9,10]$。$\\lceil 3.33 \\rceil = 4$。\n\n情况2：$\\frac{I_{\\max} - I_{\\min}}{w}$ 是一个整数，比如 $K$。\n这意味着总范围可以精确地划分为 $K$ 个宽度为 $w$ 的区间。根据左闭右开规则 $[...)$，箱的序列将是：\n第1箱：$[I_{\\min}, I_{\\min} + w)$\n第2箱：$[I_{\\min} + w, I_{\\min} + 2w)$\n...\n第 $K$ 箱：$[I_{\\min} + (K-1)w, I_{\\min} + Kw)$。\n由于 $I_{\\max} - I_{\\min} = Kw$，我们有 $I_{\\max} = I_{\\min} + Kw$。最后一个箱，即第 $K$ 个箱，其区间为 $[..., I_{\\max})$。这排除了值 $I_{\\max}$。题目规定最后一个箱必须是右闭合的，以确保包含 $I_{\\max}$。根据对此过程最标准的解释，序列中的“最后一个箱”，即第 $K$ 个箱，其区间被修改为右侧闭合。因此，第 $K$ 个箱的区间变为 $[I_{\\min} + (K-1)w, I_{\\max}]$。总箱数是 $K$。对于整数 $x$，向上取整函数 $\\lceil x \\rceil$ 的值为 $x$。所以，在这种情况下，$N = K = \\lceil \\frac{I_{\\max} - I_{\\min}}{w} \\rceil$。\n\n在这两种情况下，箱数 $N$ 都由向上取整函数正确给出。\n$$N = \\left\\lceil \\frac{I_{\\max} - I_{\\min}}{w} \\right\\rceil$$\n\n接下来，我们推导强度为 $g$ 的体素的箱索引 $b$ 的表达式，其中 $I_{\\min} \\le g \\le I_{\\max}$。箱索引 $b$ 从1开始。\n对于任何箱 $b$（除了可能最后一个），如果强度 $g$ 满足以下条件，它就落入该箱中：\n$$I_{\\min} + (b-1)w \\le g  I_{\\min} + bw$$\n这个不等式是有效的，因为箱是左闭右开的，并且第 $b$ 个箱从距离 $I_{\\min}$ 偏移 $b-1$ 个宽度的位置开始。\n我们可以解出 $b$：\n$$(b-1)w \\le g - I_{\\min}  bw$$\n$$b-1 \\le \\frac{g - I_{\\min}}{w}  b$$\n这表明 $b-1$ 是小于或等于 $\\frac{g - I_{\\min}}{w}$ 的最大整数。这是向下取整函数 $\\lfloor \\cdot \\rfloor$ 的定义。\n$$b-1 = \\left\\lfloor \\frac{g - I_{\\min}}{w} \\right\\rfloor$$\n因此，箱索引为：\n$$b(g) = \\left\\lfloor \\frac{g - I_{\\min}}{w} \\right\\rfloor + 1$$\n这个公式正确地为任何不处于最末一个箱上边界的 $g$ 分配索引。当 $\\frac{I_{\\max} - I_{\\min}}{w}$ 是整数（比如 $K$）的特定情况下，对于 $g=I_{\\max}$ 需要特殊考虑。在这种情况下，$N=K$，但该公式会得出 $b(I_{\\max}) = \\lfloor K \\rfloor + 1 = K+1$，这超出了范围。$I_{\\max}$ 的正确索引始终是 $N$。处理这种边界情况的一个通用表达式是 $b(g) = \\min(N, \\lfloor \\frac{g - I_{\\min}}{w} \\rfloor + 1)$。然而，对于任何 $g  I_{\\max}$，或者当 $\\frac{I_{\\max} - I_{\\min}}{w}$ 不是整数时对于 $g=I_{\\max}$，更简单的公式是成立的。由于问题要求计算一个不是 $I_{\\max}$ 的强度 $g$ 的 $b$ 值，因此更简单的表达式足以用于计算部分。\n\n现在我们用给定值计算这些表达式：\n$I_{\\min} = -150$ HU\n$I_{\\max} = 250$ HU\n$w = 25$ HU\n$g = 37$ HU\n\n首先，我们计算箱数 $N$：\n$$N = \\left\\lceil \\frac{I_{\\max} - I_{\\min}}{w} \\right\\rceil = \\left\\lceil \\frac{250 - (-150)}{25} \\right\\rceil = \\left\\lceil \\frac{400}{25} \\right\\rceil = \\lceil 16 \\rceil$$\n由于 $16$ 是整数，$\\lceil 16 \\rceil = 16$。\n所以，箱数是 $N = 16$。\n\n接下来，我们计算强度 $g = 37$ 的箱索引 $b$：\n$$b = \\left\\lfloor \\frac{g - I_{\\min}}{w} \\right\\rfloor + 1 = \\left\\lfloor \\frac{37 - (-150)}{25} \\right\\rfloor + 1 = \\left\\lfloor \\frac{187}{25} \\right\\rfloor + 1$$\n执行除法：$\\frac{187}{25} = 7.48$。\n$$b = \\lfloor 7.48 \\rfloor + 1 = 7 + 1 = 8$$\n所以，强度为 $37$ HU 的箱索引是 $b=8$。\n\n最终值为 $N=16$ 和 $b=8$。两者都按要求是整数。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n16  8\n\\end{pmatrix}\n}\n$$", "id": "4554345"}, {"introduction": "在数据预处理完成后，我们就可以开始提取能够量化组织特征的影像组学特征了。这个实践问题 ([@problem_id:4554327]) 深入探讨了纹理分析的核心，指导你构建灰度共生矩阵（GLCM）——这是影像组学中最重要的工具之一。通过亲手计算一个关键的纹理特征（角二阶矩），你将具体地理解体素强度之间的空间关系是如何被数学语言所捕捉的。", "problem": "一个放射组学工作流程从图像采集开始，经过感兴趣区域（ROI）的分割和强度离散化，然后进行特征提取。考虑以下离散化的ROI强度图，其中有$N_{g}=3$个灰度级（$0$、$1$、$2$），距离$d=1$，以及四个标准方向：$0^{\\circ}$（偏移量$(0,1)$）、$45^{\\circ}$（偏移量$(-1,1)$）、$90^{\\circ}$（偏移量$(-1,0)$）和$135^{\\circ}$（偏移量$(-1,-1)$）。该ROI为\n$$\nI=\\begin{pmatrix}\n0  1  2 \\\\\n2  1  0 \\\\\n1  0  2\n\\end{pmatrix}.\n$$\n从灰度共生矩阵（GLCM）的定义出发，其中非对称方向性GLCM $P_{d,\\theta}^{\\mathrm{asym}}(i,j)$ 计数参考灰度级 $i$ 与其在方向 $\\theta$ 对应偏移量处的邻居灰度级 $j$ 的共生次数，而对称方向性GLCM $P_{d,\\theta}^{\\mathrm{sym}}(i,j)$ 是在归一化之前通过对称化 $P_{d,\\theta}^{\\mathrm{sym}}(i,j)=P_{d,\\theta}^{\\mathrm{asym}}(i,j)+P_{d,\\theta}^{\\mathrm{asym}}(j,i)$ 形成的。对于每个 $\\theta\\in\\{0^{\\circ},45^{\\circ},90^{\\circ},135^{\\circ}\\}$，通过将原始计数除以它们各自的方向总和来构建归一化概率矩阵 $p_{d,\\theta}^{\\mathrm{asym}}(i,j)$ 和 $p_{d,\\theta}^{\\mathrm{sym}}(i,j)$，使得 $\\sum_{i=0}^{N_{g}-1}\\sum_{j=0}^{N_{g}-1}p_{d,\\theta}(\\!i,j\\!)=1$。使用由下式定义的角二阶矩（ASM，也称为能量）\n$$\n\\mathrm{ASM}(p)=\\sum_{i=0}^{N_{g}-1}\\sum_{j=0}^{N_{g}-1}\\big(p(i,j)\\big)^{2},\n$$\n计算 $\\mathrm{ASM}\\big(p_{d,\\theta}^{\\mathrm{asym}}\\big)$ 在所有方向上的平均值和 $\\mathrm{ASM}\\big(p_{d,\\theta}^{\\mathrm{sym}}\\big)$ 在所有方向上的平均值，然后计算差值\n$$\n\\Delta=\\left(\\frac{1}{4}\\sum_{\\theta}\\mathrm{ASM}\\big(p_{d,\\theta}^{\\mathrm{sym}}\\big)\\right)-\\left(\\frac{1}{4}\\sum_{\\theta}\\mathrm{ASM}\\big(p_{d,\\theta}^{\\mathrm{asym}}\\big)\\right).\n$$\n将您对 $\\Delta$ 的最终答案表示为无单位小数，并将结果四舍五入到四位有效数字。", "solution": "所提交的问题陈述是有效的。这是一个来自放射组学领域的定义明确、有科学依据的客观问题，具体涉及从灰度共生矩阵（GLCM）计算纹理特征。该问题提供了所有必要的数据和定义——感兴趣区域（ROI）强度图、灰度级、距离和角度偏移量，以及GLCM和角二阶矩（ASM）特征的公式。任务是执行一个标准的计算工作流程。\n\n目标是计算对称GLCM的方向平均ASM与非对称GLCM的方向平均ASM之间的差值 $\\Delta$。计算按以下步骤进行：\n1.  对于四个指定方向 $\\theta$ 中的每一个，构建非对称原始计数矩阵 $P_{d,\\theta}^{\\mathrm{asym}}$。\n2.  对每个 $P_{d,\\theta}^{\\mathrm{asym}}$ 进行归一化，以获得概率矩阵 $p_{d,\\theta}^{\\mathrm{asym}}$。\n3.  计算每个 $p_{d,\\theta}^{\\mathrm{asym}}$ 的ASM，然后求它们的平均值。\n4.  对于每个方向 $\\theta$，构建对称原始计数矩阵 $P_{d,\\theta}^{\\mathrm{sym}}$。\n5.  对每个 $P_{d,\\theta}^{\\mathrm{sym}}$ 进行归一化，以获得概率矩阵 $p_{d,\\theta}^{\\mathrm{sym}}$。\n6.  计算每个 $p_{d,\\theta}^{\\mathrm{sym}}$ 的ASM，然后求它们的平均值。\n7.  计算最终的差值 $\\Delta$。\n\n给定的ROI是矩阵 $I$，其灰度级为 $i,j \\in \\{0, 1, 2\\}$：\n$$\nI=\\begin{pmatrix}\n0  1  2 \\\\\n2  1  0 \\\\\n1  0  2\n\\end{pmatrix}\n$$\n方向为 $\\theta \\in \\{0^{\\circ}, 45^{\\circ}, 90^{\\circ}, 135^{\\circ}\\}$，距离 $d=1$，各自的偏移量 $(\\Delta r, \\Delta c)$ 分别为 $(0,1)$、$(-1,1)$、$(-1,0)$ 和 $(-1,-1)$。坐标 $(r,c)$ 是1-索引的矩阵坐标。\n\n**步骤1和2：非对称GLCM和归一化**\n\n我们为每个方向计算共生对 $(I(r,c), I(r+\\Delta r, c+\\Delta c))$。\n\n对于 $\\theta = 0^{\\circ}$（偏移量 $(0,1)$），有 $N_{0^{\\circ}}=6$ 个共生对：$(0,1), (1,2), (2,1), (1,0), (1,0), (0,2)$。\n原始GLCM $P_{1,0^{\\circ}}^{\\mathrm{asym}}$ 为：\n$$\nP_{1,0^{\\circ}}^{\\mathrm{asym}} = \\begin{pmatrix} 0  1  1 \\\\ 2  0  1 \\\\ 0  1  0 \\end{pmatrix}\n$$\n通过除以 $N_{0^{\\circ}}=6$ 获得归一化矩阵 $p_{1,0^{\\circ}}^{\\mathrm{asym}}$：\n$$\np_{1,0^{\\circ}}^{\\mathrm{asym}} = \\frac{1}{6} \\begin{pmatrix} 0  1  1 \\\\ 2  0  1 \\\\ 0  1  0 \\end{pmatrix}\n$$\n\n对于 $\\theta = 45^{\\circ}$（偏移量 $(-1,1)$），有 $N_{45^{\\circ}}=4$ 个共生对：$(2,1), (1,2), (1,1), (0,0)$。\n原始GLCM $P_{1,45^{\\circ}}^{\\mathrm{asym}}$ 为：\n$$\nP_{1,45^{\\circ}}^{\\mathrm{asym}} = \\begin{pmatrix} 1  0  0 \\\\ 0  1  1 \\\\ 0  1  0 \\end{pmatrix}\n$$\n通过除以 $N_{45^{\\circ}}=4$ 获得归一化矩阵 $p_{1,45^{\\circ}}^{\\mathrm{asym}}$：\n$$\np_{1,45^{\\circ}}^{\\mathrm{asym}} = \\frac{1}{4} \\begin{pmatrix} 1  0  0 \\\\ 0  1  1 \\\\ 0  1  0 \\end{pmatrix}\n$$\n\n对于 $\\theta = 90^{\\circ}$（偏移量 $(-1,0)$），有 $N_{90^{\\circ}}=6$ 个共生对：$(2,0), (1,1), (0,2), (1,2), (0,1), (2,0)$。\n原始GLCM $P_{1,90^{\\circ}}^{\\mathrm{asym}}$ 为：\n$$\nP_{1,90^{\\circ}}^{\\mathrm{asym}} = \\begin{pmatrix} 0  1  1 \\\\ 0  1  1 \\\\ 2  0  0 \\end{pmatrix}\n$$\n通过除以 $N_{90^{\\circ}}=6$ 获得归一化矩阵 $p_{1,90^{\\circ}}^{\\mathrm{asym}}$：\n$$\np_{1,90^{\\circ}}^{\\mathrm{asym}} = \\frac{1}{6} \\begin{pmatrix} 0  1  1 \\\\ 0  1  1 \\\\ 2  0  0 \\end{pmatrix}\n$$\n\n对于 $\\theta = 135^{\\circ}$（偏移量 $(-1,-1)$），有 $N_{135^{\\circ}}=4$ 个共生对：$(1,0), (0,1), (0,2), (2,1)$。\n原始GLCM $P_{1,135^{\\circ}}^{\\mathrm{asym}}$ 为：\n$$\nP_{1,135^{\\circ}}^{\\mathrm{asym}} = \\begin{pmatrix} 0  1  1 \\\\ 1  0  0 \\\\ 0  1  0 \\end{pmatrix}\n$$\n通过除以 $N_{135^{\\circ}}=4$ 获得归一化矩阵 $p_{1,135^{\\circ}}^{\\mathrm{asym}}$：\n$$\np_{1,135^{\\circ}}^{\\mathrm{asym}} = \\frac{1}{4} \\begin{pmatrix} 0  1  1 \\\\ 1  0  0 \\\\ 0  1  0 \\end{pmatrix}\n$$\n\n**步骤3：非对称ASM的平均值**\n\nASM计算公式为 $\\mathrm{ASM}(p) = \\sum_{i,j} (p(i,j))^2$。\n$$\n\\mathrm{ASM}(p_{1,0^{\\circ}}^{\\mathrm{asym}}) = \\left(\\frac{1}{6}\\right)^2 (1^2+1^2+2^2+1^2+1^2) = \\frac{1+1+4+1+1}{36} = \\frac{8}{36} = \\frac{2}{9}\n$$\n$$\n\\mathrm{ASM}(p_{1,45^{\\circ}}^{\\mathrm{asym}}) = \\left(\\frac{1}{4}\\right)^2 (1^2+1^2+1^2+1^2) = \\frac{4}{16} = \\frac{1}{4}\n$$\n$$\n\\mathrm{ASM}(p_{1,90^{\\circ}}^{\\mathrm{asym}}) = \\left(\\frac{1}{6}\\right)^2 (1^2+1^2+1^2+1^2+2^2) = \\frac{1+1+1+1+4}{36} = \\frac{8}{36} = \\frac{2}{9}\n$$\n$$\n\\mathrm{ASM}(p_{1,135^{\\circ}}^{\\mathrm{asym}}) = \\left(\\frac{1}{4}\\right)^2 (1^2+1^2+1^2+1^2) = \\frac{4}{16} = \\frac{1}{4}\n$$\n非对称ASM的平均值为：\n$$\n\\frac{1}{4}\\sum_{\\theta}\\mathrm{ASM}(p_{d,\\theta}^{\\mathrm{asym}}) = \\frac{1}{4}\\left(\\frac{2}{9} + \\frac{1}{4} + \\frac{2}{9} + \\frac{1}{4}\\right) = \\frac{1}{4}\\left(\\frac{4}{9} + \\frac{1}{2}\\right) = \\frac{1}{4}\\left(\\frac{8+9}{18}\\right) = \\frac{17}{72}\n$$\n\n**步骤4和5：对称GLCM和归一化**\n\n对称GLCM计算公式为 $P_{d,\\theta}^{\\mathrm{sym}} = P_{d,\\theta}^{\\mathrm{asym}} + (P_{d,\\theta}^{\\mathrm{asym}})^T$。用于归一化的总对数为 $N_{\\theta}^{\\mathrm{sym}} = 2 N_{\\theta}$。\n\n对于 $\\theta = 0^{\\circ}$，$N_{0^{\\circ}}^{\\mathrm{sym}}=12$：\n$$\nP_{1,0^{\\circ}}^{\\mathrm{sym}} = \\begin{pmatrix} 0  1  1 \\\\ 2  0  1 \\\\ 0  1  0 \\end{pmatrix} + \\begin{pmatrix} 0  2  0 \\\\ 1  0  1 \\\\ 1  1  0 \\end{pmatrix} = \\begin{pmatrix} 0  3  1 \\\\ 3  0  2 \\\\ 1  2  0 \\end{pmatrix}\n\\implies p_{1,0^{\\circ}}^{\\mathrm{sym}} = \\frac{1}{12}\\begin{pmatrix} 0  3  1 \\\\ 3  0  2 \\\\ 1  2  0 \\end{pmatrix}\n$$\n\n对于 $\\theta = 45^{\\circ}$，$N_{45^{\\circ}}^{\\mathrm{sym}}=8$：\n$$\nP_{1,45^{\\circ}}^{\\mathrm{sym}} = \\begin{pmatrix} 1  0  0 \\\\ 0  1  1 \\\\ 0  1  0 \\end{pmatrix} + \\begin{pmatrix} 1  0  0 \\\\ 0  1  1 \\\\ 0  1  0 \\end{pmatrix} = \\begin{pmatrix} 2  0  0 \\\\ 0  2  2 \\\\ 0  2  0 \\end{pmatrix}\n\\implies p_{1,45^{\\circ}}^{\\mathrm{sym}} = \\frac{1}{8}\\begin{pmatrix} 2  0  0 \\\\ 0  2  2 \\\\ 0  2  0 \\end{pmatrix}\n$$\n\n对于 $\\theta = 90^{\\circ}$，$N_{90^{\\circ}}^{\\mathrm{sym}}=12$：\n$$\nP_{1,90^{\\circ}}^{\\mathrm{sym}} = \\begin{pmatrix} 0  1  1 \\\\ 0  1  1 \\\\ 2  0  0 \\end{pmatrix} + \\begin{pmatrix} 0  0  2 \\\\ 1  1  0 \\\\ 1  1  0 \\end{pmatrix} = \\begin{pmatrix} 0  1  3 \\\\ 1  2  1 \\\\ 3  1  0 \\end{pmatrix}\n\\implies p_{1,90^{\\circ}}^{\\mathrm{sym}} = \\frac{1}{12}\\begin{pmatrix} 0  1  3 \\\\ 1  2  1 \\\\ 3  1  0 \\end{pmatrix}\n$$\n\n对于 $\\theta = 135^{\\circ}$，$N_{135^{\\circ}}^{\\mathrm{sym}}=8$：\n$$\nP_{1,135^{\\circ}}^{\\mathrm{sym}} = \\begin{pmatrix} 0  1  1 \\\\ 1  0  0 \\\\ 0  1  0 \\end{pmatrix} + \\begin{pmatrix} 0  1  0 \\\\ 1  0  1 \\\\ 1  0  0 \\end{pmatrix} = \\begin{pmatrix} 0  2  1 \\\\ 2  0  1 \\\\ 1  1  0 \\end{pmatrix}\n\\implies p_{1,135^{\\circ}}^{\\mathrm{sym}} = \\frac{1}{8}\\begin{pmatrix} 0  2  1 \\\\ 2  0  1 \\\\ 1  1  0 \\end{pmatrix}\n$$\n\n**步骤6：对称ASM的平均值**\n$$\n\\mathrm{ASM}(p_{1,0^{\\circ}}^{\\mathrm{sym}}) = \\left(\\frac{1}{12}\\right)^2 (3^2+1^2+3^2+2^2+1^2+2^2) = \\frac{9+1+9+4+1+4}{144} = \\frac{28}{144} = \\frac{7}{36}\n$$\n$$\n\\mathrm{ASM}(p_{1,45^{\\circ}}^{\\mathrm{sym}}) = \\left(\\frac{1}{8}\\right)^2 (2^2+2^2+2^2+2^2) = \\frac{4 \\times 4}{64} = \\frac{16}{64} = \\frac{1}{4}\n$$\n$$\n\\mathrm{ASM}(p_{1,90^{\\circ}}^{\\mathrm{sym}}) = \\left(\\frac{1}{12}\\right)^2 (1^2+3^2+1^2+2^2+1^2+3^2+1^2) = \\frac{1+9+1+4+1+9+1}{144} = \\frac{26}{144} = \\frac{13}{72}\n$$\n$$\n\\mathrm{ASM}(p_{1,135^{\\circ}}^{\\mathrm{sym}}) = \\left(\\frac{1}{8}\\right)^2 (2^2+1^2+2^2+1^2+1^2+1^2) = \\frac{4+1+4+1+1+1}{64} = \\frac{12}{64} = \\frac{3}{16}\n$$\n对称ASM的平均值为：\n$$\n\\frac{1}{4}\\sum_{\\theta}\\mathrm{ASM}(p_{d,\\theta}^{\\mathrm{sym}}) = \\frac{1}{4}\\left(\\frac{7}{36} + \\frac{1}{4} + \\frac{13}{72} + \\frac{3}{16}\\right)\n$$\n使用公分母 $144$：\n$$\n= \\frac{1}{4}\\left(\\frac{7 \\cdot 4}{144} + \\frac{1 \\cdot 36}{144} + \\frac{13 \\cdot 2}{144} + \\frac{3 \\cdot 9}{144}\\right) = \\frac{1}{4}\\left(\\frac{28+36+26+27}{144}\\right) = \\frac{1}{4}\\left(\\frac{117}{144}\\right) = \\frac{1}{4}\\left(\\frac{13}{16}\\right) = \\frac{13}{64}\n$$\n\n**步骤7：最终差值 $\\Delta$**\n最终差值 $\\Delta$ 计算如下：\n$$\n\\Delta = \\left(\\frac{1}{4}\\sum_{\\theta}\\mathrm{ASM}(p_{d,\\theta}^{\\mathrm{sym}})\\right) - \\left(\\frac{1}{4}\\sum_{\\theta}\\mathrm{ASM}(p_{d,\\theta}^{\\mathrm{asym}})\\right) = \\frac{13}{64} - \\frac{17}{72}\n$$\n$64 = 2^6$ 和 $72 = 2^3 \\cdot 3^2$ 的最小公倍数是 $2^6 \\cdot 3^2 = 64 \\cdot 9 = 576$。\n$$\n\\Delta = \\frac{13 \\cdot 9}{576} - \\frac{17 \\cdot 8}{576} = \\frac{117 - 136}{576} = -\\frac{19}{576}\n$$\n将此分数转换为小数得到：\n$$\n\\Delta \\approx -0.03298611...\n$$\n四舍五入到四位有效数字，我们得到 $-0.03299$。", "answer": "$$\n\\boxed{-0.03299}\n$$", "id": "4554327"}]}
{"hands_on_practices": [{"introduction": "健康信息交换（HIE）的核心在于为同一个病人在不同医疗机构间建立唯一的身份标识。这个练习将带你评估一个概率性病人匹配算法的性能，通过计算精确率、召回率和 $F_1$ 分数，你将深入理解在确保数据质量和病人安全方面的关键权衡。[@problem_id:4841823]", "problem": "一个区域性健康信息交换(HIE)平台运行着一种概率性患者匹配算法，该算法将候选的电子健康记录(EHR)对分类为“匹配”或“不匹配”。在一个包含$10{,}000$对经过判定的真实标签的候选记录对的验证数据集上，该算法相对于真实标签的结果由以下混淆矩阵计数总结：真阳性$TP = 850$，假阳性$FP = 350$，假阴性$FN = 150$，以及真阴性$TN = 8{,}650$。仅从混淆矩阵的基本定义以及二元分类中精确率和召回率的解释出发，推导出精确率、召回率和$F_1$分数的表达式（用$TP$、$FP$和$FN$表示），并为所述算法计算这些值。然后，解释在健康信息交换模型中进行患者匹配时，精确率和召回率之间的权衡，重点关注调整相似度阈值如何影响$TP$、$FP$和$FN$，以及对跨组织交换中数据质量和患者安全的潜在下游影响。将计算出的该数据集的$F_1$分数作为最终数值答案报告，四舍五入到四位有效数字。不需要单位。", "solution": "问题陈述经评估有效。它在科学上基于分类度量的既定原则，问题提法良好，提供了所有必要的数据，并且其表述是客观的。该问题是数据科学原理在医学信息学领域的标准应用。\n\n该问题要求从第一性原理出发，推导关键的二元分类度量，为给定数据集计算这些度量，并对它们在健康信息交换(HIE)患者匹配这一特定背景下的含义进行定性解释。\n\n首先，我们根据提供的混淆矩阵组件定义术语：\n-   “阳性”实例指的是一个真正匹配的候选记录对。\n-   “阴性”实例指的是一个真正不匹配的候选记录对。\n-   真阳性 ($TP$): 被算法正确分类为“匹配”的真实匹配数量。给定值为 $TP = 850$。\n-   假阳性 ($FP$): 被算法错误分类为“匹配”的真实非匹配数量。这是第一类错误。给定值为 $FP = 350$。\n-   假阴性 ($FN$): 被算法错误分类为“不匹配”的真实匹配数量。这是第二类错误。给定值为 $FN = 150$。\n-   真阴性 ($TN$): 被算法正确分类为“不匹配”的真实非匹配数量。给定值为 $TN = 8650$。\n总记录对数为 $TP+FP+FN+TN = 850 + 350 + 150 + 8650 = 10000$，与提供的数据集大小相符。\n\n现在，我们推导精确率、召回率和 $F_1$ 分数的表达式。\n\n精确率(Precision)，也称为阳性预测值($PPV$)，衡量阳性预测的准确性。它回答了这样一个问题：“在所有被算法分类为匹配的记录对中，实际是匹配的比例是多少？”\n被分类为匹配的总记录对数是真阳性和假阳性的总和，即 $TP + FP$。其中正确的数量是 $TP$。\n因此，精确率的表达式为：\n$$\n\\text{Precision} = \\frac{TP}{TP + FP}\n$$\n\n召回率(Recall)，也称为灵敏度(sensitivity)或真阳性率($TPR$)，衡量阳性预测的完备性。它回答了这样一个问题：“在所有实际是匹配的记录对中，算法正确识别了多少比例？”\n数据集中实际匹配的总数是真阳性（被正确识别）和假阴性（被遗漏）的总和，即 $TP + FN$。算法正确识别的数量是 $TP$。\n因此，召回率的表达式为：\n$$\n\\text{Recall} = \\frac{TP}{TP + FN}\n$$\n\n$F_1$ 分数被定义为精确率和召回率的调和平均数。它作为一个单一指标，平衡了这两方面的考量。两个数 $A$ 和 $B$ 的调和平均数由 $\\frac{2AB}{A+B}$ 给出。将精确率和召回率代入 $A$ 和 $B$：\n$$\nF_1 = \\frac{2 \\cdot \\text{Precision} \\cdot \\text{Recall}}{\\text{Precision} + \\text{Recall}}\n$$\n用 $TP$、$FP$ 和 $FN$ 代入表达式：\n$$\nF_1 = \\frac{2 \\cdot \\left(\\frac{TP}{TP + FP}\\right) \\cdot \\left(\\frac{TP}{TP + FN}\\right)}{\\left(\\frac{TP}{TP + FP}\\right) + \\left(\\frac{TP}{TP + FN}\\right)}\n$$\n为了简化，我们为主分式分母中的和式找到一个公分母：\n$$\nF_1 = \\frac{\\frac{2 \\cdot TP^2}{(TP + FP)(TP + FN)}}{\\frac{TP(TP + FN) + TP(TP + FP)}{(TP + FP)(TP + FN)}} = \\frac{2 \\cdot TP^2}{TP(TP + FN) + TP(TP + FP)}\n$$\n从分母中提取公因子 $TP$：\n$$\nF_1 = \\frac{2 \\cdot TP^2}{TP((TP + FN) + (TP + FP))} = \\frac{2 \\cdot TP}{2TP + FP + FN}\n$$\n这个最终表达式是便于计算的形式。\n\n接下来，我们为给定的算法计算这些值。\n给定：$TP = 850$，$FP = 350$，$FN = 150$。\n\n精确率：\n$$\n\\text{Precision} = \\frac{850}{850 + 350} = \\frac{850}{1200} = \\frac{85}{120} = \\frac{17}{24} \\approx 0.7083\n$$\n\n召回率：\n$$\n\\text{Recall} = \\frac{850}{850 + 150} = \\frac{850}{1000} = 0.85\n$$\n\n$F_1$ 分数：\n使用上面推导的简化公式：\n$$\nF_1 = \\frac{2 \\cdot TP}{2TP + FP + FN} = \\frac{2 \\cdot 850}{2 \\cdot 850 + 350 + 150} = \\frac{1700}{1700 + 500} = \\frac{1700}{2200} = \\frac{17}{22}\n$$\n将其转换为小数并四舍五入到四位有效数字：\n$$\nF_1 = \\frac{17}{22} \\approx 0.772727... \\approx 0.7727\n$$\n\n最后，我们解释在HIE患者匹配背景下精确率和召回率之间的权衡。概率性患者匹配算法通常会计算记录对之间的相似度分数，并根据预定义的阈值对其进行分类。这个阈值的选择直接决定了两者之间的权衡。\n\n-   **调整相似度阈值的影响**：\n    -   **提高阈值**会使算法更加严格。它要求更高的相似度才能宣告“匹配”。这会导致$TP$（因为一些临界的真实匹配被遗漏）和$FP$（因为更多的非匹配被正确拒绝）都减少。因此，$FN$增加，$TN$增加。结果通常是**精确率提高**（假链接减少）和**召回率降低**（遗漏的真实链接增多）。\n    -   **降低阈值**会使算法更加宽松。它在证据较少的情况下也会宣告“匹配”。这会导致$TP$（因为找到了更多的真实匹配）和$FP$（因为更多的非匹配被错误地链接）都增加。因此，$FN$减少，$TN$减少。结果是**精确率降低**（假链接增多）和**召回率提高**（遗漏的真实链接减少）。\n\n-   **对下游数据质量和患者安全的影响**：\n    -   **高精确率、低召回率情景（高阈值）**：主要好处是链接记录的数据完整性高。创建“覆盖”(overlay)的概率很低，即合并了两个不同患者的记录。覆盖是一个严重的患者安全故障，因为临床医生可能会根据另一位患者的过敏史、用药情况或实验室结果做出危及生命的决定。缺点是记录碎片化。由于$FN$很高，单个患者的许多记录在HIE中仍未被链接。这削弱了HIE的目的，导致患者视图不完整，可能引起重复测试、漏诊或无法识别趋势。\n    -   **低精确率、高召回率情景（低阈值）**：主要好处是能获得更全面、纵向的患者记录，因为大多数真实匹配都被正确链接（低$FN$）。这实现了HIE的主要目标。然而，高假阳性率($FP$)对患者安全和数据质量构成了严重风险。大量覆盖的产生会污染数据库，削弱医生对系统的信任，并可能直接导致医疗差错。手动识别和解决这些错误链接的操作成本也高得令人望而却步。\n\nHIE中的根本权衡在于患者安全风险之间。假阳性（覆盖）可能导致直接、即时的伤害。假阴性（记录碎片化）是一种遗漏错误，也可能导致伤害，但通常不那么直接。因此，生产环境中的患者匹配系统几乎总是被调整为牺牲召回率以支持极高的精确率。挑战在于改进底层算法，以在不牺牲必要的高精确率水平的情况下提高召回率。", "answer": "$$\n\\boxed{0.7727}\n$$", "id": "4841823"}, {"introduction": "HIE 的主要价值之一是汇集来自不同来源的数据，以形成更完整的病人记录。本练习基于概率论的基本原理，让你推导并计算从多个独立数据源（如电子健康记录和药房理赔）聚合药物清单时的预期完整性，从而量化增加新数据源所带来的边际收益。[@problem_id:4841791]", "problem": "在一个基于查询的健康信息交换（HIE）模型中，患者的药物清单是从多个独立来源汇总而来的。对于患者清单上的任何单一真实药物，我们将汇总清单的完整性定义为该药物出现在所有来源的并集中的概率。假设以下基本前提：(i) 对于是否捕获某一给定药物，各来源间的事件是独立的；(ii) 完整性是捕获到的真实项目所占的比例，对于单一药物而言，这等于它被至少一个来源捕获的概率。设每个来源的捕获概率为 $p_{1}, p_{2}, \\ldots, p_{n}$，其中来源 $i$ 以概率 $p_{i}$ 独立捕获某一真实药物，以概率 $1 - p_{i}$ 未捕获。\n\n从这些定义出发，推导 $n$ 个来源的期望完整性的闭式解析表达式。然后，对于一个从三个来源——电子健康记录（EHR）、药房理赔（PC）和区域性HIE存储库——提取药物数据的特定健康信息交换（HIE）聚合，其捕获概率分别为 $p_{1} = 0.52$、$p_{2} = 0.43$ 和 $p_{3} = 0.31$，计算这三个来源对患者药物清单的期望完整性。接下来，从第一性原理出发，推导当增加第四个捕获概率为 $p_{4}$ 的独立来源时，完整性的边际期望增益，并当第四个来源是捕获概率为 $p_{4} = 0.27$ 的电子处方（eRx）网络时，计算该边际期望增益。\n\n将最初三个来源的期望完整性和增加eRx来源的边际期望增益均表示为小数，并四舍五入到四位有效数字。不要使用百分号。", "solution": "首先对问题陈述进行严格的验证过程。\n\n### 步骤 1：提取已知条件\n从问题陈述中逐字提取的已知条件如下：\n- **模型：**一个用于汇总患者药物清单的基于查询的健康信息交换（HIE）模型。\n- **来源：**多个独立来源。\n- **完整性定义：**对于单一真实药物，这是指该药物出现在所有来源的并集中的概率。\n- **假设 (i)：**对于是否捕获某一给定药物，各来源间的事件是独立的。\n- **假设 (ii)：**完整性是捕获到的真实项目所占的比例，对于单一药物而言，这等于它被至少一个来源捕获的概率。\n- **变量：**每个来源的捕获概率为 $p_{1}, p_{2}, \\ldots, p_{n}$。\n- **概率：**来源 $i$ 以概率 $p_{i}$ 捕获药物，以概率 $1 - p_{i}$ 未捕获。\n- **初始场景 ($n=3$)：**来源为电子健康记录（EHR）、药房理赔（PC）和区域性HIE存储库。\n- **捕获概率 ($n=3$)：**$p_{1} = 0.52$、$p_{2} = 0.43$ 和 $p_{3} = 0.31$。\n- **附加场景 ($n=4$)：**增加第四个独立来源，一个电子处方（eRx）网络。\n- **捕获概率（第4个来源）：**$p_{4} = 0.27$。\n- **要求计算：**\n    1. 最初三个来源的期望完整性。\n    2. 增加第四个来源所带来的完整性的边际期望增益。\n- **输出格式：**两个答案均以小数形式表示，并四舍五入到四位有效数字。\n\n### 步骤 2：使用提取的已知条件进行验证\n根据验证标准对问题进行评估：\n- **科学依据：**该问题基于概率论的基本原理，特别是独立事件并集的概率。将其应用于健康信息交换（HIE）数据聚合是医学信息学中一种标准且公认的建模方法。所提供的概率是符合现实的。\n- **适定性：**该问题提供了清晰的定义（完整性）、明确的假设（独立性）、所有必要的数据（$p_i$ 值），并提出了具体、可回答的问题。存在唯一的解，并且可以从给定信息中推导出来。\n- **客观性：**语言是技术性的，没有主观或模糊的术语。\n\n未发现任何缺陷。该问题在科学上是合理的，并非不可形式化、不完整、自相矛盾、不切实际或不适定。它是一个在应用背景下定义明确的数学问题。\n\n### 步骤 3：结论与行动\n问题有效。可以开始求解过程。\n\n### 推导与计算\n问题要求计算两个量：$n=3$ 个来源的期望完整性，以及增加第四个来源时完整性的边际增益。\n\n首先，我们为 $n$ 个独立来源推导期望完整性的一般闭式表达式，记为 $C_n$。对于单一药物，“期望完整性”一词与其被捕获的概率是同义的。如果一种药物被至少一个来源捕获，则它被成功汇总。这是各个捕获事件的并集事件。设 $A_i$ 为来源 $i$ 捕获该药物的事件，其概率为 $P(A_i) = p_i$。完整性是这些事件并集的概率：\n$$C_n = P(A_1 \\cup A_2 \\cup \\dots \\cup A_n)$$\n直接计算并集的概率很复杂。使用补集法则更为直接。“至少一个来源捕获该药物”的补集是“所有来源都未捕获该药物”。来源 $i$ 未捕获该药物的事件是 $A_i^c$，其概率为 $P(A_i^c) = 1 - p_i$。\n因此，完整性为：\n$$C_n = 1 - P(\\text{所有来源都未捕获该药物})$$\n$$C_n = 1 - P(A_1^c \\cap A_2^c \\cap \\dots \\cap A_n^c)$$\n问题陈述指出，各来源的捕获事件是相互独立的。这种独立性也适用于它们的补集。因此，这些补集事件交集的概率是它们各自概率的乘积：\n$$P(A_1^c \\cap A_2^c \\cap \\dots \\cap A_n^c) = P(A_1^c) P(A_2^c) \\dots P(A_n^c) = \\prod_{i=1}^{n} P(A_i^c)$$\n代入 $P(A_i^c) = 1 - p_i$，我们得到所有来源都未捕获该药物的概率：\n$$\\prod_{i=1}^{n} (1 - p_i)$$\n因此，$n$ 个来源的期望完整性的闭式解析表达式为：\n$$C_n = 1 - \\prod_{i=1}^{n} (1 - p_i)$$\n至此完成了推导的第一部分。\n\n接下来，我们计算具有捕获概率 $p_{1} = 0.52$、$p_{2} = 0.43$ 和 $p_{3} = 0.31$ 的三个指定来源的期望完整性。\n使用推导出的 $n=3$ 的公式：\n$$C_3 = 1 - (1 - p_1)(1 - p_2)(1 - p_3)$$\n代入给定值：\n$$C_3 = 1 - (1 - 0.52)(1 - 0.43)(1 - 0.31)$$\n$$C_3 = 1 - (0.48)(0.57)(0.69)$$\n首先，我们计算未捕获概率的乘积：\n$$(0.48)(0.57) = 0.2736$$\n$$(0.2736)(0.69) = 0.188784$$\n现在，将此结果代回 $C_3$ 的表达式中：\n$$C_3 = 1 - 0.188784 = 0.811216$$\n四舍五入到四位有效数字，得到 $0.8112$。\n\n其次，我们推导增加一个捕获概率为 $p_4$ 的第四个来源时，完整性的边际期望增益表达式。边际增益我们记为 $\\Delta C_4$，是四个来源的完整性 $C_4$ 与三个来源的完整性 $C_3$ 之差。\n$$\\Delta C_4 = C_4 - C_3$$\n使用我们的一般公式：\n$$C_3 = 1 - \\prod_{i=1}^{3} (1 - p_i)$$\n$$C_4 = 1 - \\prod_{i=1}^{4} (1 - p_i) = 1 - (1 - p_4) \\prod_{i=1}^{3} (1 - p_i)$$\n现在我们计算差值：\n$$\\Delta C_4 = \\left(1 - (1 - p_4) \\prod_{i=1}^{3} (1 - p_i)\\right) - \\left(1 - \\prod_{i=1}^{3} (1 - p_i)\\right)$$\n$$\\Delta C_4 = 1 - \\prod_{i=1}^{3} (1 - p_i) + p_4 \\prod_{i=1}^{3} (1 - p_i) - 1 + \\prod_{i=1}^{3} (1 - p_i)$$\n各项相消，剩下：\n$$\\Delta C_4 = p_4 \\prod_{i=1}^{3} (1 - p_i)$$\n这个结果是直观的：只有当所有前三个来源都未能捕获该药物（一个概率为 $\\prod_{i=1}^{3} (1-p_i)$ 的事件）且第四个来源捕获了它（一个概率为 $p_4$ 的事件）时，第四个来源才会带来增益。\n\n最后，我们计算当 $p_{4} = 0.27$ 时的边际增益。我们已经计算了乘积项：\n$$\\prod_{i=1}^{3} (1 - p_i) = 0.188784$$\n代入数值：\n$$\\Delta C_4 = (0.27) (0.188784)$$\n$$\\Delta C_4 = 0.05097168$$\n四舍五入到四位有效数字，得到 $0.05097$。\n所要求的两个值是三个来源的期望完整性（$C_3$）和来自第四个来源的边际期望增益（$\\Delta C_4$）。", "answer": "$$\n\\boxed{\\begin{pmatrix} 0.8112 & 0.05097 \\end{pmatrix}}\n$$", "id": "4841791"}, {"introduction": "在确定了需要交换的数据后，选择高效的技术模型至关重要。此练习模拟了一个真实的网络性能评估场景，要求你比较两种主流的交换模型——以文档为中心的 CCD 和以资源为中心的 FHIR——在带宽消耗上的差异。通过这个计算，你将掌握分析不同 HIE 架构技术效率和成本的第一手经验。[@problem_id:4841863]", "problem": "一个区域性的健康信息交换 (Health Information Exchange, HIE) 正在评估两种用于在医院和诊所之间交换诊疗摘要的模型：一种是使用“连续性护理文档 (Continuity of Care Document, CCD)”的以文档为中心的模型，另一种是使用“快速医疗互操作性资源 (Fast Healthcare Interoperability Resources, FHIR)”的以资源为中心的模型。两种模型都使用带有传输层安全性 (Transport Layer Security, TLS) 的超文本传输协议 (Hypertext Transfer Protocol, HTTP) 和应用于有效载荷的 gzip 压缩；假设非有效载荷的协议开销是不可压缩的。\n\n使用以下符合科学现实的假设：\n\n- CCD 模型：每次交换传输一个 XML CCD 文档。平均未压缩有效载荷大小为 $2.4\\,\\mathrm{MB}$。gzip 将有效载荷大小减少 $70\\%$（因此压缩后的有效载荷是原始大小的 $30\\%$）。每次交换恰好有一次 HTTP/TLS 请求，每次请求的平均不可压缩开销为 $2\\,\\mathrm{KB}$。\n- FHIR 模型：每次交换传输一组 $20$ 个 JSON FHIR 资源。每个资源的平均未压缩有效载荷大小为 $60\\,\\mathrm{KB}$。gzip 将每个资源的有效载荷大小减少 $50\\%$。每个资源都在一个单独的 HTTP/TLS 调用中请求，每次请求的平均不可压缩开销为 $2\\,\\mathrm{KB}$。\n- 交换频率：交换在时间上均匀发生，平均速率为每小时 $1{,}000$ 次交换。\n\n使用十进制定义 $1\\,\\mathrm{KB} = 10^{3}\\,\\mathrm{bytes}$，$1\\,\\mathrm{MB} = 10^{6}\\,\\mathrm{bytes}$，以及 $1\\,\\mathrm{Mb} = 10^{6}\\,\\mathrm{bits}$。取 $1\\,\\mathrm{byte} = 8\\,\\mathrm{bits}$。\n\n从吞吐量作为单位时间数据的基本原理出发，计算在所述条件下平均带宽消耗的差异（CCD 减去 FHIR），单位为兆比特每秒。用 $\\mathrm{Mbps}$ 表示您的答案，并将结果四舍五入到四位有效数字。", "solution": "用户希望我分析这个问题。\n我验证问题的思考过程如下：\n1.  **提取已知条件**：我将逐字列出问题陈述中提供的所有参数、常数和条件。\n    -   模型1 (CCD)：每次交换 $1$ 个 XML CCD，未压缩有效载荷 $S_{CCD,u} = 2.4\\,\\mathrm{MB}$，有效载荷大小减少 $70\\%$，每次交换 $1$ 次 HTTP/TLS 请求，每次请求的不可压缩开销 $O_{req} = 2\\,\\mathrm{KB}$。\n    -   模型2 (FHIR)：每次交换 $N_{res} = 20$ 个 JSON FHIR 资源，每个资源的未压缩有效载荷 $S_{FHIR,u} = 60\\,\\mathrm{KB}$，有效载荷大小减少 $50\\%$，每个资源 $1$ 次 HTTP/TLS 请求，每次请求的不可压缩开销 $O_{req} = 2\\,\\mathrm{KB}$。\n    -   交换频率：$R_{exch} = 1,000$ 次交换/小时，均匀发生。\n    -   单位定义：$1\\,\\mathrm{KB} = 10^{3}\\,\\mathrm{bytes}$，$1\\,\\mathrm{MB} = 10^{6}\\,\\mathrm{bytes}$，$1\\,\\mathrm{Mb} = 10^{6}\\,\\mathrm{bits}$。\n    -   换算因子：$1\\,\\mathrm{byte} = 8\\,\\mathrm{bits}$。\n    -   目标：计算平均带宽消耗的差异（CCD 减去 FHIR），单位为 $\\mathrm{Mbps}$，并四舍五入到四位有效数字。\n\n2.  **使用提取的已知条件进行验证**：\n    -   **科学依据**：该问题基于计算机网络和数据传输的原理，并应用于医学信息学中的一个现实场景。CCD、FHIR、HTTP/TLS 和 gzip 都是真实世界的标准和技术。数据大小、压缩率和开销都是合理的。该问题在科学和技术上是合理的。\n    -   **适定性**：该问题提供了计算每个模型的总数据传输量以及随后的带宽所需的所有必要数据和清晰定义。问题是明确的，要求一个特定的数值量（带宽差异），从而得出一个唯一的解。\n    -   **客观性**：该问题使用精确、定量和无偏见的语言陈述。术语“符合科学现实”为所提供的值设定了背景，这些值本身是客观的。\n    -   **缺陷检查**：该问题不违反任何无效性标准。它不是不健全的、隐喻的、不完整的、矛盾的、不切实际的或不适定的。这是一个定义明确的计算问题。\n\n3.  **结论与行动**：该问题是**有效的**。我将继续推导解答。\n\n该问题要求计算 CCD 和 FHIR 模型之间平均带宽消耗的差异，$\\Delta B = B_{\\text{CCD}} - B_{\\text{FHIR}}$。带宽定义为每单位时间传输的数据量。给定模型的平均带宽可以表示为每次交换传输的总数据量 ($D$) 与交换频率 ($R_{\\text{exch}}$) 的乘积。\n\n$$B = D \\times R_{\\text{exch}}$$\n\n我们必须首先计算每个模型每次交换传输的总数据量，$D_{\\text{CCD}}$ 和 $D_{\\text{FHIR}}$。总数据量是压缩后的有效载荷大小与总不可压缩开销之和。\n\n给定的单位换算如下：\n$1\\,\\mathrm{KB} = 10^{3}\\,\\mathrm{bytes}$\n$1\\,\\mathrm{MB} = 10^{6}\\,\\mathrm{bytes}$\n$1\\,\\mathrm{byte} = 8\\,\\mathrm{bits}$\n$1\\,\\text{hour} = 3600\\,\\mathrm{s}$\n$1\\,\\mathrm{Mbps} = 10^{6}\\,\\mathrm{bits}/\\mathrm{s}$\n\n首先，我们计算 CCD 模型每次交换的总数据量，$D_{\\text{CCD}}$。\n未压缩的有效载荷大小为 $S_{\\text{CCD,uncomp}} = 2.4\\,\\mathrm{MB} = 2.4 \\times 10^{6}\\,\\mathrm{bytes}$。\n压缩将有效载荷大小减少了 $70\\%$，这意味着压缩后的有效载荷是原始大小的 $100\\% - 70\\% = 30\\%$。压缩因子为 $c_{\\text{CCD}} = 0.30$。\n压缩后的有效载荷大小为：\n$$S_{\\text{CCD,comp}} = c_{\\text{CCD}} \\times S_{\\text{CCD,uncomp}} = 0.30 \\times (2.4 \\times 10^{6}\\,\\mathrm{bytes}) = 0.72 \\times 10^{6}\\,\\mathrm{bytes} = 720,000\\,\\mathrm{bytes}$$\n每次交换有 $N_{\\text{CCD,req}} = 1$ 次请求，每次请求的开销为 $O_{\\text{req}} = 2\\,\\mathrm{KB} = 2 \\times 10^{3}\\,\\mathrm{bytes}$。\nCCD 模型的总开销为：\n$$O_{\\text{CCD,total}} = N_{\\text{CCD,req}} \\times O_{\\text{req}} = 1 \\times (2 \\times 10^{3}\\,\\mathrm{bytes}) = 2,000\\,\\mathrm{bytes}$$\n每次 CCD 交换的总数据量是压缩后的有效载荷和总开销之和：\n$$D_{\\text{CCD}} = S_{\\text{CCD,comp}} + O_{\\text{CCD,total}} = 720,000\\,\\mathrm{bytes} + 2,000\\,\\mathrm{bytes} = 722,000\\,\\mathrm{bytes}$$\n\n接下来，我们计算 FHIR 模型每次交换的总数据量，$D_{\\text{FHIR}}$。\n每次交换涉及 $N_{\\text{FHIR,res}} = 20$ 个资源。每个资源的未压缩有效载荷大小为 $S_{\\text{FHIR,res,uncomp}} = 60\\,\\mathrm{KB} = 60 \\times 10^{3}\\,\\mathrm{bytes}$。\n压缩将有效载荷大小减少了 $50\\%$，所以压缩因子为 $c_{\\text{FHIR}} = 0.50$。\n每个资源的压缩后有效载荷大小为：\n$$S_{\\text{FHIR,res,comp}} = c_{\\text{FHIR}} \\times S_{\\text{FHIR,res,uncomp}} = 0.50 \\times (60 \\times 10^{3}\\,\\mathrm{bytes}) = 30 \\times 10^{3}\\,\\mathrm{bytes}$$\n一次 FHIR 交换的总压缩有效载荷大小是所有资源的总和：\n$$S_{\\text{FHIR,comp,total}} = N_{\\text{FHIR,res}} \\times S_{\\text{FHIR,res,comp}} = 20 \\times (30 \\times 10^{3}\\,\\mathrm{bytes}) = 600,000\\,\\mathrm{bytes}$$\n$N_{\\text{FHIR,req}} = 20$ 个资源中的每一个都在单独的调用中请求，每个调用的开销为 $O_{\\text{req}} = 2 \\times 10^{3}\\,\\mathrm{bytes}$。\nFHIR 模型的总开销为：\n$$O_{\\text{FHIR,total}} = N_{\\text{FHIR,req}} \\times O_{\\text{req}} = 20 \\times (2 \\times 10^{3}\\,\\mathrm{bytes}) = 40,000\\,\\mathrm{bytes}$$\n每次 FHIR 交换的总数据量为：\n$$D_{\\text{FHIR}} = S_{\\text{FHIR,comp,total}} + O_{\\text{FHIR,total}} = 600,000\\,\\mathrm{bytes} + 40,000\\,\\mathrm{bytes} = 640,000\\,\\mathrm{bytes}$$\n\n现在我们可以计算每次交换的数据差异，$\\Delta D$，单位为字节：\n$$\\Delta D = D_{\\text{CCD}} - D_{\\text{FHIR}} = 722,000\\,\\mathrm{bytes} - 640,000\\,\\mathrm{bytes} = 82,000\\,\\mathrm{bytes}$$\n为了计算以比特每秒为单位的带宽，我们必须将此数据差异转换为比特：\n$$\\Delta D_{\\text{bits}} = \\Delta D \\times 8\\,\\frac{\\mathrm{bits}}{\\mathrm{byte}} = 82,000\\,\\mathrm{bytes} \\times 8\\,\\frac{\\mathrm{bits}}{\\mathrm{byte}} = 656,000\\,\\mathrm{bits}$$\n交换频率给定为 $R_{\\text{exch}} = 1,000\\,\\text{次交换/小时}$。我们将其转换为每秒的交换次数：\n$$R_{\\text{exch}} = \\frac{1,000\\,\\text{exchanges}}{1\\,\\text{hour}} \\times \\frac{1\\,\\text{hour}}{3,600\\,\\mathrm{s}} = \\frac{1,000}{3,600}\\,\\mathrm{s}^{-1}$$\n带宽差异 $\\Delta B$，以比特每秒为单位，是：\n$$\\Delta B = \\Delta D_{\\text{bits}} \\times R_{\\text{exch}} = 656,000\\,\\mathrm{bits} \\times \\frac{1,000}{3,600}\\,\\mathrm{s}^{-1} = \\frac{656,000,000}{3,600}\\,\\frac{\\mathrm{bits}}{\\mathrm{s}}$$\n为了以兆比特每秒 (Mbps) 表示结果，我们使用换算关系 $1\\,\\mathrm{Mbps} = 10^{6}\\,\\mathrm{bits}/\\mathrm{s}$：\n$$\\Delta B = \\frac{656,000,000}{3,600}\\,\\frac{\\mathrm{bits}}{\\mathrm{s}} \\times \\frac{1\\,\\mathrm{Mbps}}{10^{6}\\,\\mathrm{bits}/\\mathrm{s}} = \\frac{656 \\times 10^{6}}{3,600 \\times 10^{6}}\\,\\mathrm{Mbps} = \\frac{656}{3,600}\\,\\mathrm{Mbps}$$\n现在我们计算数值：\n$$\\Delta B = \\frac{656}{3,600} = \\frac{164}{900} = \\frac{41}{225} \\approx 0.182222... \\,\\mathrm{Mbps}$$\n问题要求答案四舍五入到四位有效数字。前四位有效数字是 $1$、$8$、$2$ 和 $2$。第五位数字是 $2$，所以我们向下取整。\n$$\\Delta B \\approx 0.1822\\,\\mathrm{Mbps}$$\n这就是最终计算出的带宽消耗差异。", "answer": "$$\\boxed{0.1822}$$", "id": "4841863"}]}
{"hands_on_practices": [{"introduction": "在医疗信息学领域，一个核心挑战是如何处理来自电子健康记录（EHR）的杂乱、非结构化的药物数据。在能够可靠地执行任何自动化的药物相互作用（DDI）检查之前，将这些自由文本记录标准化或“规范化”为一个统一的格式是至关重要的一步。这个练习将让你亲身体验这一基础性任务，通过设计一个流程将原始药物记录转换为结构化、可计算的格式 [@problem_id:4848336]。", "problem": "您将收到一组配对的药物记录，其中每个记录都是一个由原始自由文本字段组成的四元组 $(\\text{raw\\_ingredient}, \\text{raw\\_dose\\_form}, \\text{raw\\_strength}, \\text{raw\\_route})$。目标是设计并实现一个规范化流程，该流程生成一个标准化元组 $(i, f, s, r)$，其中 $i$ 是规范化成分标识符，$f$ 是规范化剂型标识符，$s$ 是以适合该剂型的基本单位表示的实值含量，$r$ 是规范化给药途径标识符。该流程必须通过基于药物知识库中典型定义和映射的标准化规则进行形式化指定。\n\n基本基础和定义：\n- 令 $X$ 为所有原始字符串的集合。\n- 令 $I$、$F$ 和 $R$ 分别为成分、剂型和给药途径的规范化代码的有限集合，这些代码在药物知识库的受控词汇表中使用。\n- 令 $S_I \\subseteq X$、$S_F \\subseteq X$ 和 $S_R \\subseteq X$ 分别为成分、剂型和给药途径的同义词集。\n- 定义同义词合并函数 $\\phi_I: S_I \\rightarrow I$、$\\phi_F: S_F \\rightarrow F$ 和 $\\phi_R: S_R \\rightarrow R$，这些函数将每个同义词字符串映射到其规范化代码。\n- 令 $U$ 为单位表达式的集合。定义一个单位转换函数 $\\mu: U \\rightarrow \\mathbb{R}^+$，该函数返回一个乘法因子，用于将给定的单位表达式转换为由剂型指定的基本单位。定义一个剂型到基本单位类别的映射 $\\eta: F \\rightarrow \\{\\text{mg}, \\text{mg/mL}, \\text{mg/hour}\\}$，指明每种规范化剂型所需的基本含量维度。\n- 定义一个含量解析函数 $\\pi: X \\rightarrow \\text{structured}$，该函数从自由文本含量字符串中提取数值和单位表达式，包括范围和复合表达式（如 $g/100\\ \\text{mL}$）。\n- 定义一个范围选择规则 $\\rho: [a,b] \\mapsto a$，该规则将数值范围 $[a,b]$ 映射到其下界 $a$，以确保在自由文本含量中观察到范围时进行保守的标准化。\n- 定义一个拼写数字解释函数 $\\nu: W \\rightarrow \\mathbb{R}$，其中 $W$ 是代表英文数字（例如，“two hundred”）的词元序列集合，$\\nu$ 返回相应的数值。\n\n规范化代码和同义词映射：\n- 成分代码 $I$：Acetaminophen/Paracetamol $\\mapsto 101$、Ibuprofen $\\mapsto 102$、Morphine $\\mapsto 103$、Nitroglycerin $\\mapsto 104$、Levothyroxine $\\mapsto 105$、Hydrocortisone $\\mapsto 106$。同义词包括：\"acetaminophen\"、\"paracetamol\"、\"apap\" $\\mapsto 101$。\n- 剂型代码 $F$：Tablet $\\mapsto 201$、Capsule $\\mapsto 202$、Solution $\\mapsto 203$、Patch $\\mapsto 205$、Topical semisolid (cream or ointment) $\\mapsto 206$。同义词包括：\"tab\"、\"tablet\" $\\mapsto 201$；\"cap\"、\"capsule\" $\\mapsto 202$；\"solution\"、\"inj\"（在本问题中为进行标准化处理为溶液）$\\mapsto 203$；\"patch\"、\"transdermal system\" $\\mapsto 205$；\"cream\"、\"ointment\"、\"oint\" $\\mapsto 206$。\n- 给药途径代码 $R$：Oral $\\mapsto 301$、Intravenous $\\mapsto 302$、Transdermal $\\mapsto 303$、Topical $\\mapsto 304$。同义词包括：\"oral\"、\"po\"、\"by mouth\" $\\mapsto 301$；\"intravenous\"、\"iv\" $\\mapsto 302$；\"transdermal\"、\"td\" $\\mapsto 303$；\"topical\" $\\mapsto 304$。\n- 基本单位映射 $\\eta$：$\\eta(201) = \\text{mg}$、$\\eta(202) = \\text{mg}$、$\\eta(203) = \\text{mg/mL}$、$\\eta(205) = \\text{mg/hour}$、$\\eta(206) = \\text{mg/mL}$。\n\n含量标准化规则：\n- 数值提取：给定一个自由文本含量字符串 $x \\in X$，使用直接数字形式（例如，$500$、$0.5$、$5e2$）或通过 $\\nu$ 使用拼写数字来提取数值。如果存在范围（例如，$75-100$），则应用 $\\rho$ 选择下界。\n- 单位解释和使用 $\\mu$ 向基本单位转换：\n  - 质量单位：$g \\mapsto 1000\\ \\text{mg}$，$mg \\mapsto 1\\ \\text{mg}$，$mcg$（或 $\\mu g$）$\\mapsto 0.001\\ \\text{mg}$。\n  - 浓度单位：$mg/mL \\mapsto 1\\ \\text{mg/mL}$，$g/L \\mapsto 1\\ \\text{mg/mL}$，$g/100\\ \\text{mL} \\mapsto 10\\ \\text{mg/mL}$，$x\\%$（重量/体积）$\\mapsto 10x\\ \\text{mg/mL}$。\n  - 速率单位：$mg/hour \\mapsto 1\\ \\text{mg/hour}$，$mcg/hour \\mapsto 0.001\\ \\text{mg/hour}$。\n- 维度对齐：转换后，将含量投射到由 $\\eta(f)$ 指定的基本维度。如果解析出的单位与 $\\eta(f)$ 不一致，则执行适用的转换；如果发现不可转换的不匹配，在一个稳健的系统中，该情况应作为错误处理。对于本问题，所提供的测试套件避免了不可转换的不匹配。\n- 四舍五入规则：含量 $s$ 必须四舍五入到 $3$ 位小数。\n\n标准化流程：\n- 给定一个记录 $(\\text{raw\\_ingredient}, \\text{raw\\_dose\\_form}, \\text{raw\\_strength}, \\text{raw\\_route})$，计算：\n  - 通过不区分大小写的同义词匹配计算 $i = \\phi_I(\\text{raw\\_ingredient})$。\n  - 通过不区分大小写的同义词匹配计算 $f = \\phi_F(\\text{raw\\_dose\\_form})$。\n  - 通过不区分大小写的同义词匹配计算 $r = \\phi_R(\\text{raw\\_route})$。\n  - 通过 $\\pi$ 解析 $\\text{raw\\_strength}$，如果需要则应用 $\\rho$，通过 $\\mu$ 转换单位，对齐到 $\\eta(f)$，并四舍五入以获得 $s$。\n\n测试套件：\n对于每个测试用例，您将得到两条记录 $(A,B)$，每条记录格式为 $(\\text{ingredient}, \\text{dose\\_form}, \\text{strength}, \\text{route})$。您的程序必须对两条记录进行标准化，并额外报告它们的标准化元组是否逐分量相等。\n\n- 测试用例 1：\n  - $A$: (\"Paracetamol\", \"oral tab\", \"0.5 g\", \"by mouth\")\n  - $B$: (\"Acetaminophen\", \"Tablet\", \"500 mg\", \"PO\")\n- 测试用例 2：\n  - $A$: (\"Ibuprofen\", \"cap\", \"200mg\", \"oral\")\n  - $B$: (\"Ibuprofen\", \"capsule\", \"two hundred milligram\", \"PO\")\n- 测试用例 3：\n  - $A$: (\"Morphine\", \"solution\", \"10 mg/mL\", \"IV\")\n  - $B$: (\"Morphine\", \"inj\", \"1 g/L\", \"intravenous\")\n- 测试用例 4：\n  - $A$: (\"Nitroglycerin\", \"patch\", \"0.2 mg/hr\", \"transdermal\")\n  - $B$: (\"Nitroglycerin\", \"transdermal system\", \"200 mcg/hour\", \"TD\")\n- 测试用例 5：\n  - $A$: (\"Levothyroxine\", \"tab\", \"75-100 mcg\", \"oral\")\n  - $B$: (\"Levothyroxine\", \"tablet\", \"0.075 mg\", \"PO\")\n- 测试用例 6：\n  - $A$: (\"Hydrocortisone\", \"cream\", \"1%\", \"topical\")\n  - $B$: (\"Hydrocortisone\", \"oint\", \"10 mg/mL\", \"topical\")\n\n答案规范：\n- 对于每个测试用例，输出一个列表 $[i_1, f_1, s_1, r_1, i_2, f_2, s_2, r_2, \\text{equiv}]$，其中 $i_1, f_1, r_1, i_2, f_2, r_2$ 是整数，$s_1, s_2$ 是四舍五入到 $3$ 位小数的浮点数，$\\text{equiv}$ 是一个布尔值，如果 $(i_1, f_1, s_1, r_1) = (i_2, f_2, s_2, r_2)$ 则为 $True$，否则为 $False$。\n- 最终输出格式：您的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表形式的结果，每个测试用例的结果本身也用方括号括起来，例如：\"[[...],[...],...]\"。不应打印额外的空白或文本。\n\n物理和数值单位：\n- 固体剂型（片剂、胶囊）的含量以 $\\text{mg}$ 表示，溶液和外用半固体制剂的含量以 $\\text{mg/mL}$ 表示，贴剂的含量以 $\\text{mg/hour}$ 表示。四舍五入到 $3$ 位小数。", "solution": "用户提供的问题是医疗信息学领域一个明确定义的任务，具体涉及自由文本药物记录的规范化。它具有科学依据、内部一致，并包含进行形式化求解所需的所有必要定义、映射和规则。该问题被认定为有效。\n\n解决方案需要设计和实现一个多步骤流程，以将原始药物记录 $(\\text{raw\\_ingredient}, \\text{raw\\_dose\\_form}, \\text{raw\\_strength}, \\text{raw\\_route})$ 转换为标准化元组 $(i, f, s, r)$。该过程涉及文本字段的同义词映射以及对含量字段更复杂的解析和转换。\n\n总体算法结构如下：\n1. 根据问题规定，定义数据结构来表示成分、剂型和给药途径的规范化代码和同义词映射。这些将作为 Python 字典来实现。\n2. 为单位转换和含量相关规则定义一个映射。这包括将克（$g$）和微克（$mcg$）等单位转换为基本质量单位毫克（$mg$），将浓度单位转换为毫克/毫升（$mg/mL$），以及将速率单位转换为毫克/小时（$mg/hour$）的转换因子。\n3. 为记录中的四个字段各实现一个标准化函数。\n    - 对于成分、剂型和给药途径，标准化函数（对应于问题中的 $\\phi$ 函数）将执行不区分大小写的搜索。为处理可能作为更长字符串一部分的同义词（例如，“oral tab”中的“tab”），同义词将按长度降序排序，在原始字符串中找到的第一个匹配项将决定规范化代码。\n    - 对于含量字段，标准化是一个复合过程，涉及由函数 $\\pi$（解析）、$\\nu$（拼写数字解释）、$\\rho$（范围选择）和 $\\mu$（单位转换）定义的多个步骤。\n        a. **文本预处理**：将原始含量字符串转换为小写。\n        b. **拼写数字解释（$\\nu$）**：将特定的拼写数字（例如测试套件中的 “two hundred”）替换为其数值等价物。\n        c. **解析（$\\pi$）**：使用正则表达式将字符串的数值部分与单位部分分开。此正则表达式设计用于处理整数、浮点数和范围（例如 $75-100$）。\n        d. **范围选择（$\\rho$）**：如果检测到数值范围（例如 $75-100$），则根据规则 $\\rho: [a,b] \\mapsto a$ 选择下界（$75$）。\n        e. **单位转换（$\\mu$）**：提取的单位字符串被规范化（例如，去除空白）并用于查找转换因子。特殊规则，如百分比浓度（$x\\% \\text{w/v} \\mapsto 10x\\ \\text{mg/mL}$），会得到处理。然后将数值乘以该因子，以得出以适当基本单位表示的最终含量。\n        f. **四舍五入**：最终的含量值 $s$ 四舍五入到3位小数。\n\n4. 程序的主体部分将处理给定的测试套件。每个测试用例包含两条原始记录 $A$ 和 $B$。\n    - 将标准化流程应用于 $A$ 和 $B$，以生成标准化元组 $(i_1, f_1, s_1, r_1)$ 和 $(i_2, f_2, s_2, r_2)$。\n    - 通过对两个标准化元组进行逐分量比较，计算出布尔标志 $\\text{equiv}$。\n    - 每个测试用例的结果被汇总到一个形式为 $[i_1, f_1, s_1, r_1, i_2, f_2, s_2, r_2, \\text{equiv}]$ 的列表中。\n\n5. 最后，将所有测试用例的汇总结果格式化为问题陈述中指定的单个字符串（列表的列表），并打印到标准输出。此格式化是手动完成的，以避免标准库函数（如对列表使用 `str()`）引入额外的空白。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nimport re\n\ndef solve():\n    \"\"\"\n    Implements the medication record normalization pipeline and runs the test suite.\n    \"\"\"\n\n    # --- Mappings as per problem statement ---\n\n    # Ingredient: synonym -> code (phi_I)\n    INGREDIENT_MAP = {\n        \"acetaminophen\": 101, \"paracetamol\": 101, \"apap\": 101,\n        \"ibuprofen\": 102,\n        \"morphine\": 103,\n        \"nitroglycerin\": 104,\n        \"levothyroxine\": 105,\n        \"hydrocortisone\": 106,\n    }\n\n    # Dose Form: synonym -> code (phi_F)\n    DOSE_FORM_MAP = {\n        \"tablet\": 201, \"tab\": 201,\n        \"capsule\": 202, \"cap\": 202,\n        \"solution\": 203, \"inj\": 203,\n        \"patch\": 205, \"transdermal system\": 205,\n        \"cream\": 206, \"ointment\": 206, \"oint\": 206,\n    }\n\n    # Route: synonym -> code (phi_R)\n    ROUTE_MAP = {\n        \"oral\": 301, \"po\": 301, \"by mouth\": 301,\n        \"intravenous\": 302, \"iv\": 302,\n        \"transdermal\": 303, \"td\": 303,\n        \"topical\": 304,\n    }\n\n    # Strength unit conversions (mu function)\n    # unit_string -> conversion_factor_to_base_unit\n    # Base units are mg, mg/mL, mg/hour\n    UNIT_CONVERSIONS = {\n        # Mass to mg\n        \"g\": 1000.0,\n        \"mg\": 1.0,\n        \"mcg\": 0.001,\n        \"ug\": 0.001,\n        \"milligram\": 1.0,\n        # Concentration to mg/mL\n        \"mg/ml\": 1.0,\n        \"g/l\": 1.0,\n        \"g/100ml\": 10.0,\n        # Rate to mg/hour\n        \"mg/hr\": 1.0,\n        \"mg/hour\": 1.0,\n        \"mcg/hr\": 0.001,\n        \"mcg/hour\": 0.001,\n    }\n\n    # Helper function for synonym-based code lookup (phi functions)\n    def find_code(raw_string, mapping):\n        s_lower = raw_string.lower()\n        # Sort keys by length, longest first, to handle overlapping synonyms\n        sorted_synonyms = sorted(mapping.keys(), key=len, reverse=True)\n        for synonym in sorted_synonyms:\n            if synonym in s_lower:\n                return mapping[synonym]\n        raise ValueError(f\"No mapping found for '{raw_string}'\")\n\n    # Helper function for strength parsing and normalization (pi, nu, rho, mu functions)\n    def normalize_strength(raw_strength):\n        s_clean = raw_strength.lower().strip()\n        \n        # Interpret spelled-out numbers (nu function)\n        s_clean = s_clean.replace(\"two hundred\", \"200\")\n        \n        # Handle percentage case separately\n        if '%' in s_clean:\n            # Rule: x% (w/v) -> 10x mg/mL\n            num_part = s_clean.replace('%', '').strip()\n            value = float(num_part)\n            return round(value * 10.0, 3)\n        \n        # Regex to parse numeric part and unit (pi function)\n        pattern = re.compile(r'(\\d+(?:\\.\\d+)?(?:-\\d+(?:\\.\\d+)?)?)\\s*(.*)')\n        match = pattern.match(s_clean)\n        \n        if not match:\n            raise ValueError(f\"Could not parse strength: {raw_strength}\")\n            \n        num_str, unit_str_raw = match.groups()\n\n        # Apply range selection rule (rho function)\n        if '-' in num_str:\n            num_str = num_str.split('-')[0]\n            \n        value = float(num_str)\n        \n        # Clean and identify unit\n        unit_str = unit_str_raw.strip().replace(\" \", \"\")\n\n        # Apply unit conversion (mu function)\n        if unit_str in UNIT_CONVERSIONS:\n            factor = UNIT_CONVERSIONS[unit_str]\n            final_strength = value * factor\n        else:\n            raise ValueError(f\"Unknown unit: '{unit_str_raw}' in strength '{raw_strength}'\")\n\n        return round(final_strength, 3)\n\n    # Normalization pipeline for a single record\n    def normalize_record(record):\n        raw_ing, raw_form, raw_strength, raw_route = record\n        \n        i = find_code(raw_ing, INGREDIENT_MAP)\n        f = find_code(raw_form, DOSE_FORM_MAP)\n        s = normalize_strength(raw_strength)\n        r = find_code(raw_route, ROUTE_MAP)\n\n        return (i, f, s, r)\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # Test case 1\n        ((\"Paracetamol\", \"oral tab\", \"0.5 g\", \"by mouth\"),\n         (\"Acetaminophen\", \"Tablet\", \"500 mg\", \"PO\")),\n        # Test case 2\n        ((\"Ibuprofen\", \"cap\", \"200mg\", \"oral\"),\n         (\"Ibuprofen\", \"capsule\", \"two hundred milligram\", \"PO\")),\n        # Test case 3\n        ((\"Morphine\", \"solution\", \"10 mg/mL\", \"IV\"),\n         (\"Morphine\", \"inj\", \"1 g/L\", \"intravenous\")),\n        # Test case 4\n        ((\"Nitroglycerin\", \"patch\", \"0.2 mg/hr\", \"transdermal\"),\n         (\"Nitroglycerin\", \"transdermal system\", \"200 mcg/hour\", \"TD\")),\n        # Test case 5\n        ((\"Levothyroxine\", \"tab\", \"75-100 mcg\", \"oral\"),\n         (\"Levothyroxine\", \"tablet\", \"0.075 mg\", \"PO\")),\n        # Test case 6\n        ((\"Hydrocortisone\", \"cream\", \"1%\", \"topical\"),\n         (\"Hydrocortisone\", \"oint\", \"10 mg/mL\", \"topical\")),\n    ]\n\n    results = []\n    for case in test_cases:\n        record_A, record_B = case\n        \n        norm_A = normalize_record(record_A)\n        norm_B = normalize_record(record_B)\n        \n        equiv = (norm_A == norm_B)\n        \n        result_list = list(norm_A) + list(norm_B) + [equiv]\n        results.append(result_list)\n\n    # Final print statement in the exact required format.\n    # Manually construct the string to avoid extra spaces from standard list-to-string conversion.\n    result_strings = []\n    for res in results:\n        # Convert all items to string, specifically 'True'/'False' for booleans\n        str_items = [str(item) for item in res]\n        result_strings.append(f\"[{','.join(str_items)}]\")\n\n    print(f\"[{','.join(result_strings)}]\")\n\nsolve()\n```", "id": "4848336"}, {"introduction": "从规范化数据中识别出潜在的相互作用药物后，下一步是评估其临床显著性。许多药物相互作用（DDI）是通过改变药物的药代动力学（PK）来实现的，例如抑制代谢药物的酶。这个练习让你应用基本的药代动力学原理，来量化当一种强效酶抑制剂被共同给药时，另一种药物的稳态血浆浓度会发生多大变化，这是评估DDI严重程度的一项核心技能 [@problem_id:4848334]。", "problem": "一家医院的临床决策支持系统（该系统建立在药物知识库之上）标记了一个潜在的药物-药物相互作用：患者正在持续静脉输注药物X，并将与一种细胞色素P450 3A4 (CYP3A4)的强抑制剂合并用药。该知识库指出，为了保守估计，可以将强CYP3A4抑制作用视为对CYP3A4介导的代谢途径的近乎完全抑制，而不会改变其他清除途径、药物的分布容积或输注速率。\n\n对于药物X，由CYP3A4介导的代谢占总清除率的比例为 $f_m = 0.6$。患者正在接受恒速输注，速率为 $R_{in} = 50~\\mathrm{mg\\,h^{-1}}$，其基线全身总清除率为 $CL_{\\text{baseline}} = 20~\\mathrm{L\\,h^{-1}}$。假设药物遵循线性药代动力学和单室模型行为，总清除率等于各途径清除率之和，并且在恒速输注下达到稳态。\n\n计算与强CYP3A4抑制剂合并用药后新的稳态平均血浆浓度。将答案四舍五入至四位有效数字。以 $\\mathrm{mg\\,L^{-1}}$ 为单位表示最终浓度。", "solution": "该问题是有效的，因为它在科学上基于药代动力学原理，数据充分且一致，问题定义明确，并以客观、正式的语言表述。因此，我们可以进行求解。\n\n通过恒速静脉输注给药的药物，其稳态血浆浓度 $C_{ss}$ 由输注速率 $R_{in}$ 与全身总清除率 $CL_{total}$ 的比值决定。该关系由以下基本方程表示：\n$$C_{ss} = \\frac{R_{in}}{CL_{total}}$$\n\n问题给出了药物X的基线条件：\n-   输注速率：$R_{in} = 50~\\mathrm{mg\\,h^{-1}}$\n-   基线全身总清除率：$CL_{\\text{baseline}} = 20~\\mathrm{L\\,h^{-1}}$\n\n总清除率是所有清除途径的清除率之和。在本例中，我们可以将总清除率分为两个部分：由CYP3A4酶介导的清除率 $CL_{CYP3A4}$，以及通过所有其他途径的清除率 $CL_{other}$。\n$$CL_{\\text{baseline}} = CL_{CYP3A4} + CL_{other}$$\n\n已知由CYP3A4介导的代谢占总清除率的比例为 $f_m = 0.6$。术语 $f_m$ 定义为：\n$$f_m = \\frac{CL_{CYP3A4}}{CL_{\\text{baseline}}}$$\n\n利用这些信息，我们可以计算基线条件下每个途径的清除率。\n通过CYP3A4途径的清除率为：\n$$CL_{CYP3A4} = f_m \\times CL_{\\text{baseline}} = 0.6 \\times 20~\\mathrm{L\\,h^{-1}} = 12~\\mathrm{L\\,h^{-1}}$$\n通过其他途径的清除率是总清除率的剩余部分：\n$$CL_{other} = CL_{\\text{baseline}} - CL_{CYP3A4} = (1 - f_m) \\times CL_{\\text{baseline}}$$\n$$CL_{other} = (1 - 0.6) \\times 20~\\mathrm{L\\,h^{-1}} = 0.4 \\times 20~\\mathrm{L\\,h^{-1}} = 8~\\mathrm{L\\,h^{-1}}$$\n\n接下来，我们必须确定在存在强CYP3A4抑制剂时新的总清除率 $CL_{new}$。根据问题陈述，合并使用强抑制剂会导致“对CYP3A4介导的代谢途径的近乎完全抑制”。我们将其建模为通过CYP3A4途径的清除率变为零。我们将此途径的新清除率表示为 $CL'_{CYP3A4}$：\n$$CL'_{CYP3A4} = 0$$\n\n问题还指出，“其他清除途径...不被改变”。因此，通过其他途径的清除率保持不变：\n$$CL'_{other} = CL_{other} = 8~\\mathrm{L\\,h^{-1}}$$\n\n新的总清除率 $CL_{new}$ 是修正后各途径清除率的总和：\n$$CL_{new} = CL'_{CYP3A4} + CL'_{other} = 0 + 8~\\mathrm{L\\,h^{-1}} = 8~\\mathrm{L\\,h^{-1}}$$\n或者，也可以直接计算：\n$$CL_{new} = (1 - f_m) \\times CL_{\\text{baseline}} = (1 - 0.6) \\times 20~\\mathrm{L\\,h^{-1}} = 8~\\mathrm{L\\,h^{-1}}$$\n\n输注速率 $R_{in}$ 保持在 $50~\\mathrm{mg\\,h^{-1}}$ 不变。现在我们可以使用新的总清除率计算新的稳态浓度 $C_{ss,new}$：\n$$C_{ss,new} = \\frac{R_{in}}{CL_{new}}$$\n代入数值：\n$$C_{ss,new} = \\frac{50~\\mathrm{mg\\,h^{-1}}}{8~\\mathrm{L\\,h^{-1}}} = 6.25~\\mathrm{mg\\,L^{-1}}$$\n\n问题要求将答案四舍五入至四位有效数字。因此，$6.25$ 写作 $6.250$。单位按要求为 $\\mathrm{mg\\,L^{-1}}$。", "answer": "$$\\boxed{6.250}$$", "id": "4848334"}, {"introduction": "简单的DDI警报，如“药物A与药物B相互作用”，常常导致临床医生出现“警报疲劳”，因为许多警报在特定临床情境下并不重要。现代临床决策支持（CDS）系统通过整合上下文信息（如剂量和给药途径）来使警报更加智能和有针对性。这项练习挑战你将一个考虑了药物暴露量的复杂临床逻辑形式化，从而设计出一个能够避免不必要警报的精确规则 [@problem_id:4848324]。", "problem": "一家医院的临床决策支持(CDS)药物-药物相互作用(DDI)知识库(KB)需要一些规则，这些规则仅在患者对相互作用药物对的两个成员的全身暴露量均超过预定义阈值时才触发警报。考虑以下在药理学和医学信息学中被广泛接受并可作为规则设计基础的基本要素：(i) 每日全身暴露量取决于每次给药剂量、给药频率和依赖于给药途径的全身生物利用度；(ii) 给药途径影响到达全身循环的剂量比例；以及(iii) 对于许多依赖于暴露量的相互作用，当药物低于其特定的全身暴露量阈值时，DDI风险可以忽略不计。\n\n假设一个知识库为每种药物 $x$ 维护了每次给药剂量 $D_x$ (单位为 $\\text{mg}$)、给药频率 $f_x$ (每日给药次数)和给药途径 $r_x$。设依赖于给药途径的全身生物利用度分数为 $F(r)$，其中 $0 \\le F(r) \\le 1$，且 $F(\\text{oral})$ 通常远大于 $F(\\text{topical})$。该知识库还为一个特定的相互作用药物对 $\\{A,B\\}$ 存储了药物特定的全身暴露量阈值 $T_A$ 和 $T_B$ (单位为等效全身 $\\text{mg/day}$)。\n\n对于一个具体的、科学上合理的场景，设 $F(\\text{oral})=0.9$ 和 $F(\\text{topical})=0.05$，阈值为 $T_A=10\\ \\text{mg/day}$ 和 $T_B=50\\ \\text{mg/day}$。考虑药物对 $\\{A,B\\}$ 的两种处方情况：\n- 情况1：药物 $A$ 口服，剂量 $D_A=20\\ \\text{mg}$，频率 $f_A=1$ 次/天；药物 $B$ 局部用药，剂量 $D_B=100\\ \\text{mg}$，频率 $f_B=1$ 次/天。\n- 情况2：药物 $A$ 与情况1相同；药物 $B$改为口服，剂量 $D_B=100\\ \\text{mg}$，频率 $f_B=1$ 次/天。\n\n以下哪个选项正确地将警报规则形式化，使得剂量和途径作为条件变量被纳入，并且警报仅在暴露量超过相关阈值时触发，并正确分类了在情况1和情况2中警报是否会触发？\n\nA. 定义每种药物 $x$ 的每日全身暴露量为 $E_x=D_x \\cdot f_x \\cdot F(r_x)$，并且当且仅当 $\\big(E_A \\ge T_A\\big)\\wedge\\big(E_B \\ge T_B\\big)$ 时触发警报。根据给定值，情况1不触发警报，情况2触发警报。\n\nB. 定义每种药物 $x$ 的每日全身暴露量为 $E_x=D_x \\cdot f_x \\cdot F(r_x)$，并且当且仅当 $E_A+E_B \\ge T_A+T_B$ 时触发警报。根据给定值，情况1不触发警报，情况2触发警报。\n\nC. 忽略途径；定义 $E_x=D_x \\cdot f_x$ 并当且仅当 $\\big(E_A \\ge T_A\\big)\\wedge\\big(E_B \\ge T_B\\big)$ 时触发警报。根据给定值，情况1和情况2都触发警报。\n\nD. 定义每种药物 $x$ 的每日全身暴露量为 $E_x=D_x \\cdot f_x \\cdot F(r_x)$，并且当且仅当 $\\big(E_A \\ge T_A\\big)\\vee\\big(E_B \\ge T_B\\big)$ 时触发警报。根据给定值，情况1和情况2都触发警报。", "solution": "在尝试任何解决方案之前，对问题陈述进行验证。\n\n### 第1步：提取已知信息\n- **总体目标：**为临床决策支持(CDS)的药物-药物相互作用(DDI)知识库(KB)设计一条规则，该规则仅在患者对相互作用药物对的**两个**成员的全身暴露量均超过预定义阈值时才触发警报。\n- **药理学原理：**\n    - (i) 每日全身暴露量是每次给药剂量 ($D_x$)、给药频率 ($f_x$) 和依赖于给药途径的全身生物利用度 ($F(r_x)$) 的函数。\n    - (ii) 给药途径 ($r_x$) 决定生物利用度。\n    - (iii) 低于药物特定的全身暴露量阈值 ($T_x$) 时，DDI风险可忽略不计。\n- **形式化定义：**\n    - 药物 $x$ 的每次给药剂量：$D_x$ (单位 $\\text{mg}$)\n    - 药物 $x$ 的给药频率：$f_x$ (单位 次/天)\n    - 药物 $x$ 的给药途径：$r_x$\n    - 全身生物利用度函数：$F(r)$，其中 $0 \\le F(r) \\le 1$。\n    - 相互作用药物对 $\\{A, B\\}$ 的暴露量阈值：$T_A$ 和 $T_B$ (单位 $\\text{mg/day}$)。\n- **具体数值：**\n    - 口服途径生物利用度：$F(\\text{oral}) = 0.9$\n    - 局部用药途径生物利用度：$F(\\text{topical}) = 0.05$\n    - 药物A的阈值：$T_A = 10 \\text{ mg/day}$\n    - 药物B的阈值：$T_B = 50 \\text{ mg/day}$\n- **情况1：**\n    - 药物A：$D_A = 20 \\text{ mg}$, $f_A = 1 \\text{ day}^{-1}$, $r_A = \\text{oral}$\n    - 药物B：$D_B = 100 \\text{ mg}$, $f_B = 1 \\text{ day}^{-1}$, $r_B = \\text{topical}$\n- **情况2：**\n    - 药物A：$D_A = 20 \\text{ mg}$, $f_A = 1 \\text{ day}^{-1}$, $r_A = \\text{oral}$\n    - 药物B：$D_B = 100 \\text{ mg}$, $f_B = 1 \\text{ day}^{-1}$, $r_B = \\text{oral}$\n\n### 第2步：使用提取的已知信息进行验证\n对问题陈述的有效性进行评估。\n- **科学依据：** 该问题基于药代动力学的基本且被广泛接受的原理，特别是生物利用度、剂量和全身暴露量的概念。所提出的模型是医学信息学和临床实践中用于估计暴露量和风险的标准简化方法。口服($90\\%$)和局部用药($5\\%$)的生物利用度数值是合理的。\n- **良构性：** 所有必要的变量、常数和条件都已明确定义。问题清晰明确，要求对一个规则进行正确的形式化，并将其应用于两个具体案例，可以推导出一个唯一的解。\n- **客观性：** 问题以精确、定量和客观的语言表达，没有主观性陈述。\n- **缺陷检查：** 该问题没有表现出任何缺陷。它内部一致、科学合理、完整且结构良好。它不违反任何科学定律，不基于错误的前提，且条件之间不矛盾。\n\n### 第3步：结论与行动\n问题陈述是**有效的**。将推导解决方案。\n\n### 正确规则的推导与应用\n根据所提供的原理，给定药物 $x$ 的每日全身暴露量，记为 $E_x$，是每次给药剂量、给药频率和依赖于给药途径的生物利用度分数的乘积。\n$$E_x = D_x \\cdot f_x \\cdot F(r_x)$$\n单位是一致的：$(\\text{mg}) \\cdot (\\text{day}^{-1}) \\cdot (\\text{无量纲}) = \\text{mg/day}$，这与阈值 $T_A$ 和 $T_B$ 的单位相匹配。\n\n问题明确指出，警报应“仅在患者对相互作用药物对的**两个成员**的全身暴露量均超过预定义阈值时”触发。这个措辞对应于一个逻辑与(AND)条件。因此，警报规则是：\n$$\\text{当且仅当 } (E_A \\ge T_A) \\wedge (E_B \\ge T_B) \\text{ 时触发警报}$$\n其中 $\\wedge$ 表示逻辑与运算符。\n\n现在我们使用给定值将此规则应用于两个指定的情况：\n- $T_A = 10 \\text{ mg/day}$\n- $T_B = 50 \\text{ mg/day}$\n- $F(\\text{oral}) = 0.9$\n- $F(\\text{topical}) = 0.05$\n\n首先，计算药物A的全身暴露量，这在两种情况中是相同的：\n$D_A = 20 \\text{ mg}$, $f_A = 1 \\text{ day}^{-1}$, $r_A = \\text{oral}$。\n$$E_A = 20 \\text{ mg} \\cdot 1 \\text{ day}^{-1} \\cdot F(\\text{oral}) = 20 \\cdot 0.9 \\text{ mg/day} = 18 \\text{ mg/day}$$\n我们检查药物A的条件：$E_A \\ge T_A$ 是否成立？$18 \\ge 10$ 是否成立？这是成立的。因此，总的警报条件现在仅取决于药物B的条件。\n\n**情况1分析：**\n对于药物B：$D_B = 100 \\text{ mg}$, $f_B = 1 \\text{ day}^{-1}$, $r_B = \\text{topical}$。\n$$E_{B, \\text{case1}} = 100 \\text{ mg} \\cdot 1 \\text{ day}^{-1} \\cdot F(\\text{topical}) = 100 \\cdot 0.05 \\text{ mg/day} = 5 \\text{ mg/day}$$\n我们检查药物B的条件：$E_{B, \\text{case1}} \\ge T_B$ 是否成立？$5 \\ge 50$ 是否成立？这不成立。\n情况1的完整警报条件是 $(E_A \\ge T_A) \\wedge (E_{B, \\text{case1}} \\ge T_B)$，其计算结果为 $(\\text{真} \\wedge \\text{假})$。这是**假**。\n因此，在情况1中，警报**不触发**。\n\n**情况2分析：**\n对于药物B：$D_B = 100 \\text{ mg}$, $f_B = 1 \\text{ day}^{-1}$, $r_B = \\text{oral}$。\n$$E_{B, \\text{case2}} = 100 \\text{ mg} \\cdot 1 \\text{ day}^{-1} \\cdot F(\\text{oral}) = 100 \\cdot 0.9 \\text{ mg/day} = 90 \\text{ mg/day}$$\n我们检查药物B的条件：$E_{B, \\text{case2}} \\ge T_B$ 是否成立？$90 \\ge 50$ 是否成立？这是成立的。\n情况2的完整警报条件是 $(E_A \\ge T_A) \\wedge (E_{B, \\text{case2}} \\ge T_B)$，其计算结果为 $(\\text{真} \\wedge \\text{真})$。这是**真**。\n因此，在情况2中，警报**触发**。\n\n分析总结：情况1不触发；情况2触发。\n\n### 逐项分析选项\n\n**A. 定义每种药物 $x$ 的每日全身暴露量为 $E_x=D_x \\cdot f_x \\cdot F(r_x)$，并且当且仅当 $\\big(E_A \\ge T_A\\big)\\wedge\\big(E_B \\ge T_B\\big)$ 时触发警报。根据给定值，情况1不触发警报，情况2触发警报。**\n- **规则形式化：** 公式 $E_x=D_x \\cdot f_x \\cdot F(r_x)$ 根据问题原理正确地模拟了全身暴露量。逻辑条件 $\\big(E_A \\ge T_A\\big)\\wedge\\big(E_B \\ge T_B\\big)$ 正确地实现了要求“两种”药物都超过其阈值的规定。形式化是正确的。\n- **情况分类：** 分类“情况1不触发警报，情况2触发警报”与我们推导出的结果相符。\n- **结论：** **正确**。\n\n**B. 定义每种药物 $x$ 的每日全身暴露量为 $E_x=D_x \\cdot f_x \\cdot F(r_x)$，并且当且仅当 $E_A+E_B \\ge T_A+T_B$ 时触发警报。根据给定值，情况1不触发警报，情况2触发警报。**\n- **规则形式化：** 虽然暴露量公式 $E_x$ 是正确的，但触发条件 $E_A+E_B \\ge T_A+T_B$ 根本上是错误的。它与风险与*药物特定*阈值相关的前提相矛盾，这些阈值应针对药物对的每个成员独立评估，而不是求和。问题要求当*两个成员*的暴露量都超过各自的阈值时发出警报，而不是当暴露量之和超过阈值之和时。\n- **情况分类：** 虽然对于这组特定的数字（情况1为 $18+5=23  60$，情况2为 $18+90=108 > 60$），这个分类恰好是正确的，但其基本规则是无效的。\n- **结论：** **错误**。\n\n**C. 忽略途径；定义 $E_x=D_x \\cdot f_x$ 并当且仅当 $\\big(E_A \\ge T_A\\big)\\wedge\\big(E_B \\ge T_B\\big)$ 时触发警报。根据给定值，情况1和情况2都触发警报。**\n- **规则形式化：** 这个规则错误地将全身暴露量定义为每日总给药剂量，$E_x=D_x \\cdot f_x$。它明确忽略了依赖于给药途径的生物利用度 $F(r_x)$，而根据问题陈述的基本原理，这是一个关键因素。这是一个重大的药理学错误。\n- **情况分类：** 基于这个有缺陷的规则，$E_A = 20 \\ge 10$ (真) 并且 $E_B=100 \\ge 50$ (真)，所以两种情况都会触发警报。该分类与有缺陷的规则一致，但规则本身是无效的。\n- **结论：** **错误**。\n\n**D. 定义每种药物 $x$ 的每日全身暴露量为 $E_x=D_x \\cdot f_x \\cdot F(r_x)$，并且当且仅当 $\\big(E_A \\ge T_A\\big)\\vee\\big(E_B \\ge T_B\\big)$ 时触发警报。根据给定值，情况1和情况2都触发警报。**\n- **规则形式化：** 暴露量公式 $E_x$ 是正确的，但使用或运算符($\\vee$)的逻辑条件是错误的。如果*至少有一种*药物超过其阈值，它就会触发警报。这与问题明确要求的“两个成员”都必须超过其阈值相矛盾。\n- **情况分类：** 使用这个有缺陷的或规则：在情况1中，$E_A \\ge T_A$ 为真，所以 $(\\text{真} \\vee \\text{假})$ 为真（触发）。在情况2中，$E_A \\ge T_A$ 为真，所以 $(\\text{真} \\vee \\text{真})$ 为真（触发）。“情况1和情况2都触发”的分类与有缺陷的规则一致，但规则本身是无效的。\n- **结论：** **错误**。", "answer": "$$\\boxed{A}$$", "id": "4848324"}]}
{"hands_on_practices": [{"introduction": "数据质量是有效数据治理的基石。在众多数据质量维度中，“完整性”是最基本也是最重要的指标之一，它衡量了我们是否拥有所需的数据。本练习将通过一个具体场景，教会你如何根据治理策略中明确定义的规则，来量化计算一个关键临床数据元素的完整性。[@problem_id:4832355]", "problem": "一家三级学术医疗中心采用了一项数据治理政策，该政策将入院第一天内的血红蛋白测量值视为住院病程的强制性临床数据元素。在数据质量的完整性维度下，其治理定义规定，强制性数据元素的完整性是指在规定时间范围内捕获到至少一个有效值的合格住院病程所占的比例，其中，只有在规定时间范围内记录了至少一个有效值的情况下，该病程才计入分子；在规定时间范围之外记录的重复值或值不会增加分子，也不会改变分母。在 $2025$ 年第 $2$ 季度，有 $10{,}000$ 例住院病人符合该指标的资格标准。电子健康记录 (EHR) 显示，在这些合格的住院病人中，有 $8{,}000$ 例在入院时间后 $24$ 小时内有至少一个带时间戳的血红蛋白实验室结果。所有其余合格的住院病人要么没有血红蛋白结果，要么只有在 $24$ 小时后记录的血红蛋白结果。使用上述完整性的基本定义（即在规定时间范围内具有有效值的合格病程的比例），计算此期间的血红蛋白完整性率。将最终答案表示为小数，而不是百分比符号，并将答案四舍五入到四位有效数字。", "solution": "该问题要求计算一个数据质量指标，具体是在医院环境下的血红蛋白测量的完整性率。问题陈述为该指标提供了精确的定义。\n\n完整性率（此处表示为 $C$）定义为在规定时间范围内捕获到至少一个有效值的合格住院病程所占的比例。这可以表示为一个比率：\n$$\nC = \\frac{\\text{具有至少一个有效、及时值的合格病程数}}{\\text{合格病程总数}}\n$$\n设 $N_{total}$ 为合格住院病程的总数，它构成了比率的分母。\n设 $N_{complete}$ 为满足完整性标准的合格病程数，它构成了分子。\n\n根据问题陈述，给定的条件是：\n1. $2025$ 年第 $2$ 季度的合格住院病程总数为 $N_{total} = 10,000$。\n2. 在这些合格的住院病人中，在规定时间范围（入院后不超过 $24$ 小时）内记录了至少一个血红蛋白实验室结果的数量为 $N_{complete} = 8,000$。\n3. 剩余的病程（$10,000 - 8,000 = 2,000$）不符合标准，因为它们要么没有结果，要么结果是在 $24$ 小时时间范围之后记录的。这证实了所有情况都已考虑在内，且分子精确为 $8,000$。\n\n使用正式定义，完整性率 $C$ 计算如下：\n$$\nC = \\frac{N_{complete}}{N_{total}}\n$$\n将给定值代入公式：\n$$\nC = \\frac{8,000}{10,000}\n$$\n进行除法运算：\n$$\nC = 0.8\n$$\n问题要求最终答案以小数形式表示，并四舍五入到四位有效数字。计算出的值恰好是 $0.8$。为了用四位有效数字表示该值，我们必须包含尾随零。第一位有效数字是 $8$。为了达到总共四位有效数字，我们在 $8$ 后面附加三个零。\n因此，表示为四位有效数字的完整性率为 $0.8000$。", "answer": "$$\\boxed{0.8000}$$", "id": "4832355"}, {"introduction": "在医疗领域，数据效用的发挥与患者隐私的保护之间取得平衡是一项核心挑战。像$k$-匿名这样的形式化隐私模型，为数据共享提供了一种可衡量的隐私保障。本练习将通过让你确定一个数据集的匿名保护级别，来揭开$k$-匿名概念的神秘面纱，并让你亲手实践保护健康信息的关键原则。[@problem_id:4832363]", "problem": "一个医疗系统计划根据管理受保护健康信息 (PHI) 的《隐私规则》，发布其电子健康记录 (EHR) 的去标识化摘录用于研究。数据治理团队采用一种标准的泛化方案，以实现基于 $k$-匿名性的正式匿名保证。准标识符 (QI) 被确定为 $\\{\\text{age}, \\text{zip3}, \\text{sex}\\}$，其中 $\\text{age}$ 被泛化为以十年为单位的区间（例如 $[20,29]$, $[30,39]$），$\\text{zip3}$ 表示美国五位数邮政编码的前三位数字，而 $\\text{sex}$ 保留其原始类别。\n\n该团队通过将泛化后具有相同 QI 值的记录分组来构建等价类。他们抑制了所有直接标识符（例如，姓名、详细地址、病历号）。泛化后，他们审计了数据集划分为等价类的情况，并确定最小的等价类（即，在由 QI 值定义的所有类中记录数最少的类）包含 $7$ 条记录。\n\n仅从“如果一个数据集由一组固定的准标识符导出的每个等价类都至少包含 $k$ 条记录，则该数据集相对于这组准标识符是 $k$-匿名的”这一核心定义出发，确定最大的整数 $k$，使得发布的数集据保证相对于 $\\{\\text{age}, \\text{zip3}, \\text{sex}\\}$ 是 $k$-匿名的。请将您的答案表示为一个无量纲的整数。无需四舍五入。", "solution": "此计算的基本依据是 $k$-匿名性的定义：对于一组固定的准标识符，如果由这些准标识符导出的每个等价类都至少包含 $k$ 条记录，则该数据集是 $k$-匿名的。形式上，假设数据集被划分为等价类 $\\{E_{1}, E_{2}, \\dots, E_{m}\\}$，使得每个 $E_{i}$ 都包含在泛化后具有相同准标识符 $\\{\\text{age}, \\text{zip3}, \\text{sex}\\}$ 值的所有记录。$k$-匿名性属性要求对于所有 $i \\in \\{1, \\dots, m\\}$，类的大小满足 $|E_{i}| \\geq k$。\n\n根据这一定义，为了确定数据集满足的最大 $k$ 值，我们必须确定所有等价类大小的最紧密下界。因为条件 $|E_{i}| \\geq k$ 必须对每个类同时成立，所以能够满足所有类该不等式的最大 $k$ 值受限于最小类的大小。用符号表示，最大有效 $k$ 值为\n$$\nk^{\\ast} = \\min_{i \\in \\{1,\\dots,m\\}} |E_{i}|.\n$$\n\n审计报告指出，最小的等价类包含 $7$ 条记录。因此，\n$$\nk^{\\ast} = 7.\n$$\n\n这个值是无量纲的，代表了能使每个等价类都至少有 $k^{\\ast}$ 条记录的最高整数，从而在指定的准标识符和泛化方案下保证了 $k^{\\ast}$-匿名性。", "answer": "$$\\boxed{7}$$", "id": "4832363"}, {"introduction": "数据并非一成不变，其分布会随着时间推移而发生变化，这种现象被称为“数据漂移”。这种漂移会悄无声息地降低临床决策支持系统的性能，带来潜在风险。群体稳定性指数（Population Stability Index, PSI）是数据专员用来监控这种漂移的关键工具，本练习将向你展示如何从原始数据分布中计算PSI，从而主动保障数据驱动系统的可靠性。[@problem_id:4832305]", "problem": "一家医院的数据治理项目监控模型输入的稳定性，以确保临床决策支持工具的可靠性。考虑一个实验室特征，其值被分箱到三个具有临床意义的区间（例如，低、正常和高范围）。治理团队维护一个去年的参考分布，并将其与当前月份的分布进行比较。设三个分箱的离散概率质量函数分别表示为参考分布 $r = (r_{1}, r_{2}, r_{3})$ 和当前分布 $c = (c_{1}, c_{2}, c_{3})$，其中 $\\sum_{i=1}^{3} r_{i} = 1$ 和 $\\sum_{i=1}^{3} c_{i} = 1$。在本案例中，观察到的参考比例为 $r = (0.2, 0.3, 0.5)$，当前比例为 $c = (0.1, 0.35, 0.55)$。\n\n从离散概率的核心定义出发，并考虑到需要一个标量漂移度量，该度量应满足以下条件：\n- 在各个分箱上是可加的，即总漂移等于各分箱贡献之和，\n- 对于每个分箱 $i$，当 $c_{i} = r_{i}$ 时为零，\n- 是无量纲的，并且对分箱概率的比例变化敏感（通过比率的对数来捕捉），\n\n请推导出一个满足这些性质、在医疗保健数据管理中用作群体稳定性指数（Population Stability Index, PSI）的可加分箱函数形式。然后，使用自然对数 $\\ln(\\cdot)$，为给定的 $r$ 和 $c$ 计算 PSI。将您的最终数值结果四舍五入到四位有效数字，并将其报告为一个无单位的标量。", "solution": "该问题要求基于一套核心原则推导一个漂移度量（即群体稳定性指数，PSI），然后为给定的数据集计算其值。\n\n### 问题验证\n首先，必须验证问题陈述的合理性和完整性。\n\n**步骤 1：提取已知条件**\n- 三个分箱的参考离散概率质量函数：$r = (r_{1}, r_{2}, r_{3})$。\n- 三个分箱的当前离散概率质量函数：$c = (c_{1}, c_{2}, c_{3})$。\n- 归一化约束：$\\sum_{i=1}^{3} r_{i} = 1$ 和 $\\sum_{i=1}^{3} c_{i} = 1$。\n- 具体的参考比例：$r = (0.2, 0.3, 0.5)$。\n- 具体的当前比例：$c = (0.1, 0.35, 0.55)$。\n- 漂移度量所需的性质：\n  1. 在各分箱上可加。\n  2. 对于每个分箱 $i$，当 $c_{i} = r_{i}$ 时为零。\n  3. 无量纲，并通过比率的对数对比例变化敏感。\n- 使用的对数为自然对数 $\\ln(\\cdot)$。\n\n**步骤 2：使用提取的已知条件进行验证**\n该问题在应用统计学和医学信息学领域具有科学依据，特别是在监控机器学习模型的数据漂移方面。其概念是标准且定义明确的。所提供的概率分布是有效的，因为它们的各分量为非负且总和为 $1$：$0.2 + 0.3 + 0.5 = 1$ 以及 $0.1 + 0.35 + 0.55 = 1$。问题陈述是自洽的、客观的且适定的。它提供了清晰、一致的信息和一套逻辑约束，可以从中推导和计算出唯一解。不存在科学不合理、不完整或模糊不清等缺陷。\n\n**结论：** 该问题有效。\n\n### 群体稳定性指数 (PSI) 的推导\n\n目标是为漂移度量（我们称之为 $D$）找到一个满足三个给定性质的函数形式。设 $d_i$ 为第 $i$ 个分箱对漂移的贡献。\n\n1.  **可加性：** 总漂移是各分箱贡献的总和。\n    $$D = \\sum_{i} d_i$$\n2.  **对比例变化的敏感性：** 该度量必须对当前概率 $c_i$ 和参考概率 $r_i$ 之间的比例变化敏感。这表明需要引入它们比率的对数，即 $\\ln(\\frac{c_i}{r_i})$。该项自然地捕捉了比例差异而非绝对差异，并且是无量纲的。\n3.  **零漂移条件：** 如果 $c_i = r_i$，那么该分箱的贡献 $d_i$ 必须为零。$\\ln(\\frac{c_i}{r_i})$ 项满足此条件，因为 $\\ln(\\frac{r_i}{r_i}) = \\ln(1) = 0$。\n\n让我们将分箱漂移 $d_i$ 构建为一个权重因子和对数项的乘积。一个简单的形式是 $d_i = W_i \\ln(\\frac{c_i}{r_i})$，其中 $W_i$ 是一个取决于 $c_i$ 和 $r_i$ 的权重。对于权重 $W_i$ 的一个逻辑选择是该分箱的概率质量差异 $(c_i - r_i)$。这一选择的动机是，希望概率变化较大的分箱能对总漂移做出更显著的贡献。此外，如果 $c_i - r_i = 0$，则该分箱的贡献为零，这是漂移度量的一个直观且理想的性质。\n\n结合这些元素，我们为分箱贡献提出以下函数形式：\n$$d_i = (c_i - r_i) \\ln\\left(\\frac{c_i}{r_i}\\right)$$\n总漂移，即 PSI，是所有分箱的总和：\n$$\\text{PSI} = \\sum_{i} (c_i - r_i) \\ln\\left(\\frac{c_i}{r_i}\\right)$$\n这个推导出的函数形式满足所有三个必需的性质。它是可加的，当分布相同时为零，并且通过对数项对比例变化敏感，该对数项由概率偏移的大小加权。这个公式是群体稳定性指数的标准定义。\n\n### PSI 的计算\n\n给定参考和当前概率分布：\n- 参考：$r = (r_1, r_2, r_3) = (0.2, 0.3, 0.5)$\n- 当前：$c = (c_1, c_2, c_3) = (0.1, 0.35, 0.55)$\n\n我们计算三个分箱中每个分箱的贡献。\n\n**分箱 1：**\n- $c_1 = 0.1$, $r_1 = 0.2$\n- 贡献：$(0.1 - 0.2) \\ln\\left(\\frac{0.1}{0.2}\\right) = (-0.1) \\ln(0.5) = (-0.1) \\times (-0.693147\\dots) \\approx 0.069315$\n\n**分箱 2：**\n- $c_2 = 0.35$, $r_2 = 0.3$\n- 贡献：$(0.35 - 0.3) \\ln\\left(\\frac{0.35}{0.3}\\right) = (0.05) \\ln\\left(\\frac{7}{6}\\right) = (0.05) \\times (0.154151\\dots) \\approx 0.007708$\n\n**分箱 3：**\n- $c_3 = 0.55$, $r_3 = 0.5$\n- 贡献：$(0.55 - 0.5) \\ln\\left(\\frac{0.55}{0.5}\\right) = (0.05) \\ln(1.1) = (0.05) \\times (0.095310\\dots) \\approx 0.004766$\n\n总 PSI 是这些贡献的总和：\n$$\\text{PSI} = (0.1 - 0.2) \\ln\\left(\\frac{0.1}{0.2}\\right) + (0.35 - 0.3) \\ln\\left(\\frac{0.35}{0.3}\\right) + (0.55 - 0.5) \\ln\\left(\\frac{0.55}{0.5}\\right)$$\n$$\\text{PSI} \\approx 0.069315 + 0.007708 + 0.004766$$\n$$\\text{PSI} \\approx 0.081789$$\n将结果四舍五入到四位有效数字，我们得到 $0.08179$。\n使用更高精度的计算如下：\n$\\text{PSI} = (-0.1) \\ln(0.5) + (0.05) \\ln(7/6) + (0.05) \\ln(1.1)$\n$\\text{PSI} \\approx (-0.1)(-0.69314718) + (0.05)(0.15415068) + (0.05)(0.09531018)$\n$\\text{PSI} \\approx 0.069314718 + 0.007707534 + 0.004765509$\n$\\text{PSI} \\approx 0.081787761$\n四舍五入到四位有效数字得到 $0.08179$。", "answer": "$$\\boxed{0.08179}$$", "id": "4832305"}]}
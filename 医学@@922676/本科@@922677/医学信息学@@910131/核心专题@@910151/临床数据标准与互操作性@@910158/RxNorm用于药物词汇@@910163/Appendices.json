{"hands_on_practices": [{"introduction": "在RxNorm中，语义临床药物（Semantic Clinical Drug, SCD）是表示一种通用名药物的基本单位。这项练习将引导您解析一个常见的药物标签，识别其核心组成——成分、强度和剂型，并学习如何将其归入更宽泛的分析类别，即剂型组（Dose Form Group）[@problem_id:4855559]。这是将非结构化文本转换为结构化、可计算格式的关键一步。", "problem": "一份医院处方集正在根据美国国家医学图书馆 (United States National Library of Medicine) 的 RxNorm 进行标准化。在 RxNorm 标准下，一个语义临床药物 (Semantic Clinical Drug, SCD) 由一个三元组定义，该三元组包含一种成分 (Ingredient, IN)、每个离散剂量单位的效价强度以及一种剂型 (Dose Form)。剂型组 (Dose Form Group, DFG) 是根据给药途径和物理形态对剂型进行的分类，用于分析和互操作性。\n\n假设以下经过充分检验的事实和定义：\n1. 对于一种简单的单一成分产品，其 SCD 恰好包含一种成分 (IN)、一个单位效价强度和一种剂型，其规范表示为“成分 $+$ 效价强度 $+$ 剂型”。\n2. 在 RxNorm 中，对于常规的全身性小分子抗高血压药物，其普通英文剂型“tablet”（片剂）被标准化为剂型“Oral Tablet”（口服片剂）。\n3. 在本练习中，使用以下源自标准 RxNorm 分组的 DFG 映射：集合 {“Oral Tablet”、“Oral Capsule”、“Chewable Tablet”} 中的任何剂型都是 DFG “Oral Solid”（口服固体制剂）的成员。\n4. 设 $n$ 表示 SCD 中的成分 (IN) 数量，$s$ 表示单个剂量单位的效价强度数值（单位为毫克），$I$ 是一个指示变量，如果剂型属于 DFG “Oral Solid”，则其值为 $1$，否则为 $0$。\n\n给定自由文本形式的产品描述：“lisinopril $10$ mg tablet”。\n\n任务：\na) 仅根据上述事实，通过从描述中识别成分 (IN)、单位效价强度和剂型，推导出 SCD 三元组。\nb) 使用事实 $3$ 中的 DFG 映射，确定所推导剂型对应的 $I$ 值。\nc) 计算验证分数\n$$V \\;=\\; n \\;+\\; \\frac{s}{5} \\;+\\; I.$$\n\n将 $V$ 的最终值以单个实数的形式给出。无需四舍五入，结果是无量纲的（不包含单位）。", "solution": "问题陈述的验证过程如下。\n\n**步骤 1：提取已知信息**\n-   输入产品描述：“lisinopril $10$ mg tablet”。\n-   事实 1：对于一种简单的单一成分产品，其语义临床药物 (SCD) 是一个由（成分、单位效价强度、剂型）组成的三元组。其规范表示为“成分 $+$ 效价强度 $+$ 剂型”。\n-   事实 2：剂型“tablet”（片剂）被标准化为剂型“Oral Tablet”（口服片剂）。\n-   事实 3：剂型组 (DFG) “Oral Solid”（口服固体制剂）包含剂型集合 {“Oral Tablet”、“Oral Capsule”、“Chewable Tablet”}。\n-   事实 4：变量定义：\n    -   $n$：SCD 中的成分 (IN) 数量。\n    -   $s$：单个剂量单位的效价强度数值（单位为毫克）。\n    -   $I$：一个指示变量，如果剂型属于 DFG “Oral Solid”，则 $I=1$，否则 $I=0$。\n-   任务：\n    -   a) 推导 SCD 三元组。\n    -   b) 确定 $I$ 的值。\n    -   c) 计算验证分数 $V = n + \\frac{s}{5} + I$。\n\n**步骤 2：使用提取的已知信息进行验证**\n根据验证标准对问题进行评估。\n-   **科学性：** 该问题使用了医学信息学中已确立的术语和概念，特别是美国国家医学图书馆开发的 RxNorm 标准词汇表。尽管为练习目的进行了简化，但其定义和关系符合药物标准化的原则。该问题在其领域内具有科学基础。\n-   **适定性：** 该问题提供了一个清晰的输入字符串、一套明确的转换和映射规则，以及一个精确的计算目标。得出解决方案所需的步骤是确定性且无歧义的。存在一个唯一的、稳定的解。\n-   **客观性：** 问题以精确、无偏见的语言表述。输入、规则和变量都得到了客观定义，没有主观解释的余地。\n-   **缺陷分析：**\n    1.  问题不违反任何科学或逻辑原则。\n    2.  问题与指定的 RxNorm 主题直接相关，并且是完全可形式化的。\n    3.  问题设定完整且内部一致。它提供了从输入到最终计算所需的所有必要定义和数据。\n    4.  所使用的例子（“lisinopril $10$ mg tablet”）是一种真实的、常见的药物，使得场景具有科学上的合理性和现实性。\n    5.  问题不是不适定的；它会导出一个唯一的、确定的答案。\n    6.  问题是规则的直接应用，旨在测试对定义的仔细解析和应用能力，既不故作高深也非微不足道。\n    7.  结果可以通过遵循给定的逻辑步骤进行验证。\n\n**步骤 3：结论与行动**\n该问题被判定为**有效**。将提供解答。\n\n解答过程按顺序执行三个指定的任务。\n\n**a) 推导 SCD 三元组。**\n输入描述为“lisinopril $10$ mg tablet”。我们必须提取成分 (IN)、单位效价强度和剂型。\n-   **成分 (IN)：** 活性成分被识别为 “lisinopril”。事实 1 指出这是一个“简单的单一成分产品”，事实 4 定义 $n$ 为成分数量。因此，我们有一个成分，即 $n=1$。\n-   **单位效价强度：** 效价强度为“$10$ mg”。事实 4 定义 $s$ 为以毫克为单位的效价强度数值。因此，$s=10$。\n-   **剂型：** 剂型为“tablet”（片剂）。事实 2 指出，普通英文剂型“tablet”被标准化为剂型“Oral Tablet”（口服片剂）。\n\n最终的 SCD 三元组是 (lisinopril, $10$ mg, Oral Tablet)。\n\n**b) 确定指示变量 $I$ 的值。**\n变量 $I$ 在事实 4 中被定义为一个指示变量，如果剂型属于 DFG “Oral Solid”，其值等于 $1$，否则等于 $0$。\n-   根据 (a) 部分，给定产品推导出的剂型是“Oral Tablet”。\n-   事实 3 定义 DFG “Oral Solid” 包含集合 {“Oral Tablet”、“Oral Capsule”、“Chewable Tablet”} 中的任何剂型。\n-   由于“Oral Tablet”是该集合的一个元素，因此满足 $I=1$ 的条件。\n因此，指示变量的值为 $I=1$。\n\n**c) 计算验证分数 $V$。**\n验证分数由以下公式定义：\n$$V = n + \\frac{s}{5} + I$$\n我们代入前面步骤中确定的值：\n-   $n = 1$ (来自单一成分 “lisinopril”)\n-   $s = 10$ (来自效价强度 “$10$ mg”)\n-   $I = 1$ (因为剂型 “Oral Tablet” 属于 DFG “Oral Solid”)\n\n将这些值代入方程得到：\n$$V = 1 + \\frac{10}{5} + 1$$\n进行算术运算：\n$$V = 1 + 2 + 1$$\n$$V = 4$$\n$V$ 的最终值为 $4$。根据要求，它是一个无量纲的实数。", "answer": "$$\n\\boxed{4}\n$$", "id": "4855559"}, {"introduction": "在掌握了如何定义具体的药物产品（SCD）后，下一步是理解RxNorm如何为分析目的对相关产品进行分组。本练习将介绍语义临床药物剂型（Semantic Clinical Drug Form, SCDF）这一概念，它通过抽象掉“强度”信息，将同一剂型的所有药物变体归为一类[@problem_id:4855410]。通过这项练习，您将能亲自量化这种抽象方法在数据聚合方面的作用，而这正是临床数据分析中的一项核心技术。", "problem": "一个术语服务使用 RxNorm 来表示药物，RxNorm 是由美国国家医学图书馆（United States National Library of Medicine）发布的受控词表。在 RxNorm 中，一个语义临床药物（Semantic Clinical Drug, SCD）将一种药物编码为一个元组，该元组由其活性成分集、规格说明和剂型组成。一个语义临床药物剂型（Semantic Clinical Drug Form, SCDF）编码了相同的药物概念，但抽象掉了规格，只保留活性成分集和剂型。仅使用这些定义和基本计数原理，你将形式化从 SCD 到 SCDF 的映射，并量化对规格的抽象如何将多个 SCD 塌陷为单个 SCDF。\n\n考虑一个 SCD 数据集，涵盖以下成分集和剂型，及其观察到的规格变体：\n\n- Metformin 口服片：规格 $500 \\text{ mg}$、$850 \\text{ mg}$、$1000 \\text{ mg}$。\n- Lisinopril 口服片：规格 $2.5 \\text{ mg}$、$5 \\text{ mg}$、$10 \\text{ mg}$、$20 \\text{ mg}$、$40 \\text{ mg}$。\n- Acetaminophen $+$ Hydrocodone 口服片：规格 $325 \\text{ mg} + 5 \\text{ mg}$ 和 $325 \\text{ mg} + 10 \\text{ mg}$。\n- Albuterol 吸入溶液：规格 $0.083\\%$ 和 $0.5\\%$。\n- Amoxicillin 口服混悬液：规格 $125 \\text{ mg}/5 \\text{ mL}$、$250 \\text{ mg}/5 \\text{ mL}$、$400 \\text{ mg}/5 \\text{ mL}$。\n- Morphine 缓释口服胶囊：规格 $10 \\text{ mg}$、$20 \\text{ mg}$、$30 \\text{ mg}$。\n\n任务：\n\n$1.$ 定义一个函数 $f$，该函数通过保留成分集和剂型、同时抽象掉规格，将任何 SCD 映射到其对应的 SCDF。然后，使用你的定义，为特定的 SCD “Amoxicillin $250 \\text{ mg}/5 \\text{ mL}$ 口服混悬液”构建 SCDF，并简要说明你的构建过程如何保留了成分和剂型，同时省略了规格。\n\n$2.$ 假设从整个数据集中无放回地均匀随机抽取两个不同的 SCD。从第一性原理出发，推导所选的两个 SCD 在函数 $f$ 下映射到同一个 SCDF 的概率。将最终概率表示为一个无单位的最简分数。不要四舍五入。", "solution": "问题陈述已经过验证，被认为是合理的。它在科学上基于医学信息学的原理，特别是 RxNorm 术语标准。问题提法清晰，为得出唯一解提供了所有必要的定义和数据。语言客观，任务可被形式化。\n\n设所有语义临床药物的集合表示为 $\\mathcal{S}$，所有语义临床药物剂型的集合表示为 $\\mathcal{F}$。根据所提供的定义，一个 SCD 是一个元组 $s = (I, T, D)$，其中 $I$ 是活性成分集，$T$ 是规格说明，$D$ 是剂型。类似地，一个 SCDF 是一个元组 $f = (I, D)$。\n\n任务 $1$：定义映射函数并应用它。\n\n设任意 SCD 为 $s = (I, T, D) \\in \\mathcal{S}$。映射函数 $f$ 抽象掉了规格，即元组的第二个分量。因此，函数 $f: \\mathcal{S} \\to \\mathcal{F}$ 是一个投影，定义如下：\n$$f((I, T, D)) = (I, D)$$\n该函数接收一个 SCD 作为输入，并返回一个仅包含成分集 $I$ 和剂型 $D$ 的新元组，根据定义，这就是相应的 SCDF。\n\n现在，我们将此函数应用于特定的 SCD “Amoxicillin $250 \\text{ mg}/5 \\text{ mL}$ 口服混悬液”。\n对于这个 SCD，我们可以确定其元组表示的各个分量：\n- 成分集: $I = \\{\\text{Amoxicillin}\\}$\n- 规格: $T = 250 \\text{ mg}/5 \\text{ mL}$\n- 剂型: $D = \\text{口服混悬液}$\n\n该 SCD 可以正式地写为元组 $s_{\\text{amox}} = (\\{\\text{Amoxicillin}\\}, 250 \\text{ mg}/5 \\text{ mL}, \\text{口服混悬液})$。\n将函数 $f$ 应用于 $s_{\\text{amox}}$：\n$$f(s_{\\text{amox}}) = f((\\{\\text{Amoxicillin}\\}, 250 \\text{ mg}/5 \\text{ mL}, \\text{口服混悬液})) = (\\{\\text{Amoxicillin}\\}, \\text{口服混悬液})$$\n得到的 SCDF 是元组 $(\\{\\text{Amoxicillin}\\}, \\text{口服混悬液})$，它对应于名称“Amoxicillin 口服混悬液”。\n\n该构建过程通过将成分集 ($\\{\\text{Amoxicillin}\\}$) 和剂型 ($\\text{口服混悬液}$) 作为输出元组的分量来保留它们。它通过不在输出中包含输入元组的第二个分量来省略规格 ($250 \\text{ mg}/5 \\text{ mL}$)，从而实现了所需的抽象。\n\n任务 $2$：推导概率。\n\n首先，我们必须确定数据集中不同 SCD 的总数。设 $N$ 为此总数。我们计算每个药物组的规格变体数量：\n- Metformin 口服片: $3$ 个 SCD\n- Lisinopril 口服片: $5$ 个 SCD\n- Acetaminophen $+$ Hydrocodone 口服片: $2$ 个 SCD\n- Albuterol 吸入溶液: $2$ 个 SCD\n- Amoxicillin 口服混悬液: $3$ 个 SCD\n- Morphine 缓释口服胶囊: $3$ 个 SCD\n\nSCD 的总数是这些计数的总和：\n$$N = 3 + 5 + 2 + 2 + 3 + 3 = 18$$\n我们从这 $N=18$ 个 SCD 的集合中无放回地均匀随机抽取两个不同的 SCD。选择两个不同 SCD 的总方法数由二项式系数 $\\binom{N}{2}$ 给出：\n$$\\text{总结果数} = \\binom{18}{2} = \\frac{18 \\times 17}{2} = 9 \\times 17 = 153$$\n\n接下来，我们必须找出在函数 $f$ 下映射到同一个 SCDF 的 SCD 对的数量。两个 SCD，$s_1 = (I_1, T_1, D_1)$ 和 $s_2 = (I_2, T_2, D_2)$，当且仅当 $f(s_1) = f(s_2)$ 时映射到同一个 SCDF，这意味着 $(I_1, D_1) = (I_2, D_2)$。这种情况发生在两个 SCD 都从同一个药物组中选择时（即，它们共享相同的成分集和剂型）。\n\n让我们将 $k=6$ 个药物组中每个组的 SCD 数量表示为 $n_i$，其中 $i=1, \\dots, 6$。\n- $n_1 = 3$ (Metformin 口服片)\n- $n_2 = 5$ (Lisinopril 口服片)\n- $n_3 = 2$ (Acetaminophen $+$ Hydrocodone 口服片)\n- $n_4 = 2$ (Albuterol 吸入溶液)\n- $n_5 = 3$ (Amoxicillin 口服混悬液)\n- $n_6 = 3$ (Morphine 缓释口服胶囊)\n\n从第 $i$ 个组中选择 $2$ 个 SCD 的方法数是 $\\binom{n_i}{2}$。有利结果的总数 $E$ 是可以在每个组内形成的配对数量的总和。\n$$E = \\sum_{i=1}^{6} \\binom{n_i}{2} = \\binom{3}{2} + \\binom{5}{2} + \\binom{2}{2} + \\binom{2}{2} + \\binom{3}{2} + \\binom{3}{2}$$\n我们计算每个二项式系数：\n- $\\binom{3}{2} = \\frac{3!}{2!(3-2)!} = 3$\n- $\\binom{5}{2} = \\frac{5!}{2!(5-2)!} = \\frac{5 \\times 4}{2} = 10$\n- $\\binom{2}{2} = \\frac{2!}{2!(2-2)!} = 1$\n\n将这些值代入 $E$ 的求和公式中：\n$$E = 3 + 10 + 1 + 1 + 3 + 3 = 21$$\n有 $21$ 对不同的 SCD 映射到同一个 SCDF。\n\n概率 $P$ 是有利结果数与总结果数的比率：\n$$P = \\frac{\\text{有利结果数}}{\\text{总结果数}} = \\frac{21}{153}$$\n为了简化分数，我们找到分子和分母的最大公约数。两者都可以被 $3$ 整除：\n$$21 = 3 \\times 7$$\n$$153 = 3 \\times 51$$\n因此，简化后的概率是：\n$$P = \\frac{7}{51}$$\n因为 $7$ 是一个质数且 $51 = 3 \\times 17$，所以该分数是最简分数。", "answer": "$$\\boxed{\\frac{7}{51}}$$", "id": "4855410"}, {"introduction": "现实世界中的药物目录充满了复方产品。本章的最后一项练习将通过引入语义临床药物成分（Semantic Clinical Drug Component, SCDC）来应对这一复杂情况[@problem_id:4855494]。您将学习如何将一个多成分药物的标签信息分解为其基础的SCDC单元，然后再重新组合成完整的临床药物概念（SCD），以此来验证RxNorm模型在处理复杂药物时是如何确保其内部一致性与数据精确性的。", "problem": "一个医疗系统正在使用 RxNorm（一种标准化的临床药物词汇表）来统一药物记录。其目标是将一个复方口服液体制剂的标签规范化为 RxNorm 概念类型，并验证其内部一致性。以下核心定义适用：语义临床药物成分 (SCDC) 代表具有定量强度和剂型的单一成分；语义临床药物 (SCD) 代表一个具有临床意义的产品概念，它将一个或多个 SCDC 条目与单一剂型和精确強度相结合；多成分 (MIN) 代表不考慮其強度的无序成分集合。对于口服液体制剂，标准化的 SCDC 强度是根据规范单位体积指定的，本练习中该单位体积为 $1$ mL。使用浓度等于含量除以体积的基本关系：如果一种成分在 $v$ 毫升体积中的含量为 $a$ 毫克，那么其浓度 $c = a / v$，单位为毫克/毫升。\n\n给定某医院处方集记录的复方产品标签：“Acetaminophen $160$ mg / $5$ mL；Diphenhydramine hydrochloride $12.5$ mg / $5$ mL；口服混悬液。”假设制剂是均匀的，并且标签上的强度相对于所分配的 $5$ mL 口服给药体积是精确的。\n\n任务：\n1. 将标签分解为语义临床药物成分 (SCDC) 条目，方法是将每种成分的强度针对“口服混悬液”剂型标准化为每 $1$ mL 的量。\n2. 根据 SCDC 条目，通过列出成分级别的成分集（忽略盐式）来识别多成分 (MIN) 概念。\n3. 重新组合 SCDC 条目，形成对应于“口服混悬液”剂型临床上分配的 $5$ mL 剂量的语义临床药物 (SCD) 概念，确保当强度换算回 $5$ mL 时能够重构原标签。\n4. 定义一致性标量 $C$ 为各成分在标签标示的每 $5$ mL 强度与通过将 SCDC 条目重组为 SCD 所得的每 $5$ mL 强度之间的绝对差值之和。计算 $C$。\n\n以 mg 为单位表示 $C$ 的最终值。无需四舍五入。", "solution": "问题陈述经评估有效。它在科学上基于临床信息学和量纲分析的原理，问题提出得当，定义和目标清晰，且表述客观。没有矛盾、信息缺失或事实错误。因此，我们可以进行正式求解。\n\n该问题要求使用所提供的基于 RxNorm 的定义对药物标签进行四部分分析。我们将依次处理每个任务。\n\n**任务1：将标签分解为语义临床药物成分 (SCDC) 条目。**\nSCDC 代表单一成分，其强度已标准化至规范单位体积（指定为 $1$ mL）。剂型为“口服混悬液”。我们使用浓度 $c$ (mg/mL) 等于含量 $a$ (mg) 除以体积 $v$ (mL) 的关系。\n\n对于第一种成分 Acetaminophen，标签提供的含量为 $a_1 = 160 \\text{ mg}$，体积为 $v = 5 \\text{ mL}$。标准化浓度 $c_1$（对应于 SCDC 强度）计算如下：\n$$c_1 = \\frac{a_1}{v} = \\frac{160}{5} = 32 \\text{ mg/mL}$$\n因此，第一个 SCDC 是 {Acetaminophen, $32 \\text{ mg/mL}$ 强度, 口服混悬液剂型}。\n\n对于第二种成分 Diphenhydramine hydrochloride，标签提供的含量为 $a_2 = 12.5 \\text{ mg}$，体积同样为 $v = 5 \\text{ mL}$。标准化浓度 $c_2$ 为：\n$$c_2 = \\frac{a_2}{v} = \\frac{12.5}{5} = 2.5 \\text{ mg/mL}$$\n因此，第二个 SCDC 是 {Diphenhydramine hydrochloride, $2.5 \\text{ mg/mL}$ 强度, 口服混悬液剂型}。\n\n**任务2：识别多成分 (MIN) 概念。**\nMIN 概念被定义为忽略任何盐式的无序成分集合。给出的成分是 Acetaminophen 和 Diphenhydramine hydrochloride。为了得到 MIN，我们识别其基础成分。Acetaminophen没有列出盐式。对于 Diphenhydramine hydrochloride，基础成分是 Diphenhydramine。\n得到的 MIN 是集合 {Acetaminophen, Diphenhydramine}。\n\n**任务3：重新组合 SCDC 条目以形成语义临床药物 (SCD) 概念。**\nSCD 概念代表临床上配发的药品，其体积为 $5$ mL。为了重构 SCD 强度，我们必须将标准化的 SCDC 强度（每 $1$ mL）换算回配发体积。令重组后每 $5$ mL 基于含量的强度表示为 $a'_i$。\n\n对于 Acetaminophen，使用其 SCDC 強度 $c_1 = 32 \\text{ mg/mL}$，在 $5$ mL 体积中的重组含量为：\n$$a'_1 = c_1 \\times 5 \\text{ mL} = 32 \\frac{\\text{mg}}{\\text{mL}} \\times 5 \\text{ mL} = 160 \\text{ mg}$$\n\n对于 Diphenhydramine hydrochloride，使用其 SCDC 强度 $c_2 = 2.5 \\text{ mg/mL}$，在 $5$ mL 体积中的重组含量为：\n$$a'_2 = c_2 \\times 5 \\text{ mL} = 2.5 \\frac{\\text{mg}}{\\text{mL}} \\times 5 \\text{ mL} = 12.5 \\text{ mg}$$\n因此，重组后的 SCD 概念是 {Acetaminophen $160$ mg / $5$ mL；Diphenhydramine hydrochloride $12.5$ mg / $5$ mL；口服混悬液}，这与原始产品标签的描述完全匹配。\n\n**任务4：计算一致性标量 $C$。**\n一致性标量 $C$ 定义为标签标示强度与重组 SCD 强度之间的绝对差值之和，所有强度均按配发体积 $5$ mL 计算。令 $S_{L,i}$ 表示成分 $i$ 的标签标示强度，$S_{R,i}$ 表示其重组强度。\n\n公式如下：\n$$C = \\sum_{i=1}^{n} |S_{L,i} - S_{R,i}|$$\n其中 $n=2$ 代表产品中的两种成分。\n\n对于第一种成分 Acetaminophen ($i=1$)：\n标签标示强度为 $S_{L,1} = 160$ mg。\n任务3中得到的重组强度为 $S_{R,1} = a'_1 = 160$ mg。\n绝对差值为 $|160 \\text{ mg} - 160 \\text{ mg}| = 0$ mg。\n\n对于第二种成分 Diphenhydramine hydrochloride ($i=2$)：\n标签标示强度为 $S_{L,2} = 12.5$ mg。\n任务3中得到的重组强度为 $S_{R,2} = a'_2 = 12.5$ mg。\n绝对差值为 $|12.5 \\text{ mg} - 12.5 \\text{ mg}| = 0$ mg。\n\n将这些差值相加，得到一致性标量 $C$ 的值：\n$$C = |160 - 160| + |12.5 - 12.5| = 0 + 0 = 0$$\n一致性标量 $C$ 的最终值为 $0$ mg，这表明标准化和重组过程是内部一致的，并且完美地重构了原始标签。", "answer": "$$\n\\boxed{0}\n$$", "id": "4855494"}]}
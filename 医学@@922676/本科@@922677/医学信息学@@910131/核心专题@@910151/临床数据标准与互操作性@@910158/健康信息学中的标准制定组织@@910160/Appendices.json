{"hands_on_practices": [{"introduction": "卫生信息互操作性的基石是能够准确地识别和关联来自不同医疗机构的同一个人。这个练习将带你进入主患者索引（MPI）设计的核心挑战，这是一个用于跨系统唯一识别患者的关键工具。通过这个基于真实概率模型的思想实验 [@problem_id:4856626]，你将亲手计算一个简单匹配规则下的两种关键错误率：错误匹配率（将不同患者误认为同一人）和漏匹配率（未能识别出本应属于同一人的记录），从而深刻理解患者身份识别中的内在权衡。", "problem": "一个区域性健康信息交换 (HIE) 正在实施一个主患者索引 (MPI)，以协调由多家医院签发的病历号 (MRN)。为确保互操作性，该 MPI 被设计为符合国际卫生七级标准 (HL7) 快速医疗保健互操作性资源 (FHIR) 患者资源配置文件和医疗保健企业集成 (IHE) 患者标识符交叉引用 (PIX) 和患者人口统计信息查询 (PDQ) 工作流，并遵循国际标准化组织技术规范 (ISO/TS) 22220 中的身份管理原则。该 MPI 使用一个基于 Fellegi–Sunter 框架的概率性链接模型，对五个字段进行二元精确匹配比较：名字、姓氏、出生日期、性别和邮政编码。\n\n给定以下经验证的、在两个潜在类别下精确匹配的字段级错误分布，这些分布与 Fellegi–Sunter 的定义一致。对于一个真实同指对（即，在两个站点记录的同一个人），每个字段精确匹配的概率为：\n- 名字：$0.98$\n- 姓氏：$0.97$\n- 出生日期：$0.995$\n- 性别：$0.999$\n- 邮政编码：$0.95$\n\n对于一个随机非同指对（即，不同的人），每个字段精确匹配的概率为：\n- 名字：$0.008$\n- 姓氏：$0.005$\n- 出生日期：$\\frac{1}{365}$\n- 性别：$0.5$\n- 邮政编码：$\\frac{1}{2000}$\n\n假设在给定真实匹配状态的情况下，字段比较是条件独立的，这是标准概率性链接推导所要求的。为满足与 ISO/TS 22220 一致的安全约束并避免跨组织的过度链接，MPI 当且仅当所有五个字段都精确匹配时才声明为匹配。\n\n仅使用这些假设和分布，从此决策规则下的第一性原理推导出预期的错误匹配率（一个非同指对被声明为匹配的概率）和预期的漏报率（一个真实同指对未能被声明为匹配的概率）。以小数形式呈现您的最终答案。如果一个值小于 $1 \\times 10^{-4}$，请用科学记数法表示。将两个答案都四舍五入到四位有效数字。按以下顺序提供这对数值：错误匹配率，漏报率。", "solution": "该场景指定了在 Fellegi–Sunter 框架中的一种概率性记录链接。我们从支撑该模型的核心定义开始：\n\n- 字段的 Fellegi–Sunter $m$-概率是在给定真实匹配的情况下的一致性条件概率。对于字段 $j$，将其表示为 $m_{j}$。\n- 字段的 Fellegi–Sunter $u$-概率是在给定真实非匹配的情况下的一致性条件概率。对于字段 $j$，将其表示为 $u_{j}$。\n- 在给定匹配状态的条件独立性假设下，跨字段的特定一致性模式的联合概率可以分解为每个潜在类别内相应单字段概率的乘积。\n\n指定的决策规则是当且仅当所有五个字段都精确匹配时才声明为匹配。设字段集由 $j \\in \\{1,2,3,4,5\\}$ 索引，分别对应于名字、姓氏、出生日期、性别和邮政编码。\n\n根据错误匹配率（当配对为非匹配时声明为匹配的概率）的定义，并利用条件独立性，在所有字段都匹配的规则下，预期的错误匹配率 $\\text{FMR}$ 是非匹配对的一致性概率的乘积：\n$$\n\\text{FMR} \\;=\\; \\prod_{j=1}^{5} u_{j}.\n$$\n\n类似地，一个真实匹配被正确声明（即所有字段都匹配）的概率是匹配对的一致性概率的乘积：\n$$\nP(\\text{all agree} \\mid \\text{true match}) \\;=\\; \\prod_{j=1}^{5} m_{j}.\n$$\n因此，漏报率（当配对为真实匹配时未能声明为匹配的概率）是\n$$\n\\text{Miss} \\;=\\; 1 \\;-\\; \\prod_{j=1}^{5} m_{j}.\n$$\n\n代入给定的概率。对于真实匹配，我们有\n$$\nm_{1} = 0.98,\\quad m_{2} = 0.97,\\quad m_{3} = 0.995,\\quad m_{4} = 0.999,\\quad m_{5} = 0.95.\n$$\n对于非匹配，我们有\n$$\nu_{1} = 0.008,\\quad u_{2} = 0.005,\\quad u_{3} = \\frac{1}{365},\\quad u_{4} = 0.5,\\quad u_{5} = \\frac{1}{2000}.\n$$\n\n计算错误匹配率：\n$$\n\\text{FMR} \\;=\\; \\left(0.008\\right)\\left(0.005\\right)\\left(\\frac{1}{365}\\right)\\left(0.5\\right)\\left(\\frac{1}{2000}\\right).\n$$\n首先将 $\\left(0.008\\right)$ 与 $\\left(0.005\\right)$ 相乘得到 $0.00004$。然后 $0.00004 \\times \\frac{1}{365} = 0.00004 \\times 0.0027397260274\\ldots = 1.09589041096 \\times 10^{-7}$。接着乘以 $0.5$ 得到 $5.47945205479 \\times 10^{-8}$。最后乘以 $\\frac{1}{2000} = 0.0005$，得到\n$$\n\\text{FMR} \\;=\\; 2.73972602739 \\times 10^{-11}.\n$$\n\n通过 $m_{j}$ 乘积的补集计算漏报率：\n$$\n\\prod_{j=1}^{5} m_{j} \\;=\\; \\left(0.98\\right)\\left(0.97\\right)\\left(0.995\\right)\\left(0.999\\right)\\left(0.95\\right).\n$$\n分步进行：\n$$\n0.98 \\times 0.97 = 0.9506,\\quad 0.9506 \\times 0.995 = 0.945847,\\quad 0.945847 \\times 0.999 = 0.944901153,\\quad 0.944901153 \\times 0.95 = 0.89765609535.\n$$\n因此，\n$$\n\\text{Miss} \\;=\\; 1 - 0.89765609535 \\;=\\; 0.10234390465.\n$$\n\n应用四舍五入到四位有效数字的指令，将值表示为小数，并对小于 $1 \\times 10^{-4}$ 的值使用科学记数法。错误匹配率小于 $1 \\times 10^{-4}$，因此我们写成\n$$\n\\text{FMR} \\;\\approx\\; 2.740 \\times 10^{-11}.\n$$\n漏报率是\n$$\n\\text{Miss} \\;\\approx\\; 0.1023.\n$$\n\n按要求提供有序对 $\\left(\\text{FMR}, \\text{Miss}\\right)$。", "answer": "$$\\boxed{\\begin{pmatrix} 2.740 \\times 10^{-11} & 0.1023 \\end{pmatrix}}$$", "id": "4856626"}, {"introduction": "在确认了患者身份之后，下一个关键步骤是用一种通用的“语言”来理解他们的临床数据。这个练习模拟了一个在医疗信息学中至关重要的现实任务：将医院内部使用的非标准诊断术语映射到像SNOMED CT这样的国际标准术语集。通过这个实践 [@problem_id:4856628]，你将学会运用信息检索领域的经典评价指标——精确率（Precision）和召回率（Recall），来量化评估术语映射算法的性能，这是衡量数据标准化质量的基本技能。", "problem": "一个医院信息系统使用本地定义的诊断接口术语，这些术语必须映射到医学系统命名法—临床术语（Systematized Nomenclature of Medicine—Clinical Terms, SNOMED CT）以支持互操作性。为了评估一个术语映射模块，一个本地诊断条目集已经由两位独立的临床术语学家进行标注，并通过裁决为每个条目生成一个金标准SNOMED CT概念标识符集。对于每个条目，映射器输出一组预测的SNOMED CT概念标识符。一个预测的概念只有当它出现在该条目对应的金标准集中时，才被计为正确；任何未出现在金标准集中的预测概念都应被计为不正确；任何存在于金标准集中但未被预测出的概念都应被计为遗漏。评估是对所有条目中的所有概念实例进行微观平均计算的。\n\n评估样本包括以下案例（每个案例列出本地术语、金标准集和映射器的预测集）：\n\n- 案例 $1$：本地术语“HTN.”。金标准 $\\{38341003\\}$。预测 $\\{38341003\\}$。\n- 案例 $2$：本地术语“Type II DM.”。金标准 $\\{44054006\\}$。预测 $\\{44054006\\}$。\n- 案例 $3$：本地术语“Asthma, mild persistent.”。金标准 $\\{370218001\\}$。预测 $\\{195967001\\}$。\n- 案例 $4$：本地术语“Appendicitis.”。金标准 $\\{74400008\\}$。预测 $\\{74400008\\}$。\n- 案例 $5$：本地术语“CHF.”。金标准 $\\{42343007\\}$。预测 $\\{42343007\\}$。\n- 案例 $6$：本地术语“CAD.”。金标准 $\\{53741008\\}$。预测 $\\{53741008\\}$。\n- 案例 $7$：本地术语“Pneumonia.”。金标准 $\\{233604007\\}$。预测 $\\{233604007, 386661006\\}$。\n- 案例 $8$：本地术语“Flu.”。金标准 $\\{6142004\\}$。预测 $\\{6142004\\}$。\n- 案例 $9$：本地术语“No diagnosis given.”。金标准 $\\varnothing$。预测 $\\{162864005\\}$。\n- 案例 $10$：本地术语“Type $2$ DM with neuropathy.”。金标准 $\\{44054006, 399090003\\}$。预测 $\\{44054006\\}$。\n\n使用信息检索评估和临床术语映射的核心定义，计算该映射的精确率、召回率和在微观平均下的 $F_1$ 分数。仅报告 $F_1$ 分数，以单个最简分数形式表示，不带单位。不要四舍五入；以精确的分数形式表示结果。", "solution": "首先对问题进行严格的验证过程。\n\n### 步骤1：提取已知条件\n-   **任务**：计算一个术语映射模块的精确率、召回率和 $F_1$ 分数。\n-   **评估方法**：对所有条目中的所有概念实例进行微观平均。\n-   **定义**：\n    -   一个预测的概念如果出现在金标准集中，则为正确（真正例，TP）。\n    -   一个预测的概念如果未出现在金标准集中，则为不正确（假正例，FP）。\n    -   一个在金标准集中但未被预测出的概念为遗漏（假负例，FN）。\n-   **数据样本（10个案例）**：\n    -   案例 $1$：金标准 $G_1 = \\{38341003\\}$，预测 $P_1 = \\{38341003\\}$。\n    -   案例 $2$：金标准 $G_2 = \\{44054006\\}$，预测 $P_2 = \\{44054006\\}$。\n    -   案例 $3$：金标准 $G_3 = \\{370218001\\}$，预测 $P_3 = \\{195967001\\}$。\n    -   案例 $4$：金标准 $G_4 = \\{74400008\\}$，预测 $P_4 = \\{74400008\\}$。\n    -   案例 $5$：金标准 $G_5 = \\{42343007\\}$，预测 $P_5 = \\{42343007\\}$。\n    -   案例 $6$：金标准 $G_6 = \\{53741008\\}$，预测 $P_6 = \\{53741008\\}$。\n    -   案例 $7$：金标准 $G_7 = \\{233604007\\}$，预测 $P_7 = \\{233604007, 386661006\\}$。\n    -   案例 $8$：金标准 $G_8 = \\{6142004\\}$，预测 $P_8 = \\{6142004\\}$。\n    -   案例 $9$：金标准 $G_9 = \\varnothing$，预测 $P_9 = \\{162864005\\}$。\n    -   案例 $10$：金标准 $G_{10} = \\{44054006, 399090003\\}$，预测 $P_{10} = \\{44054006\\}$。\n-   **要求输出**：$F_1$ 分数，以单个最简分数形式表示。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题具有科学依据，提法明确且客观。它设置在医学信息学和信息检索的标准背景下。SNOMED CT、精确率、召回率、$F_1$ 分数和微观平均的使用在该领域都是标准且合适的。所提供的数据是完整的、无歧义的且内部一致的，从而能够得出一个唯一且有意义的解。没有违反任何科学原理，除了所提供的明确定义外，不需要任何假设。该问题不是琐碎的、比喻性的或主观的。\n\n### 步骤3：结论与行动\n问题被判定为**有效**。将推导解决方案。\n\n评估指标基于真正例（$TP$）、假正例（$FP$）和假负例（$FN$）的计数。对于给定的案例 $i$，其金标准集为 $G_i$，预测集为 $P_i$，这些计数定义如下：\n-   真正例 ($TP_i$)：正确预测的概念数量。$TP_i = |G_i \\cap P_i|$。\n-   假正例 ($FP_i$)：错误预测的概念数量。$FP_i = |P_i \\setminus G_i| = |P_i| - |G_i \\cap P_i|$。\n-   假负例 ($FN_i$)：遗漏的概念数量。$FN_i = |G_i \\setminus P_i| = |G_i| - |G_i \\cap P_i|$。\n\n问题指定了微观平均，这要求在计算最终指标之前，将所有 $N=10$ 个案例的这些计数相加。\n$$TP_{total} = \\sum_{i=1}^{N} TP_i$$\n$$FP_{total} = \\sum_{i=1}^{N} FP_i$$\n$$FN_{total} = \\sum_{i=1}^{N} FN_i$$\n\n我们现在为每个案例计算 $TP_i$、$FP_i$ 和 $FN_i$：\n-   案例 $1$：$G_1=\\{38341003\\}$, $P_1=\\{38341003\\}$。$|G_1|=1, |P_1|=1, |G_1 \\cap P_1|=1$。\n    $TP_1 = 1$， $FP_1 = 1-1=0$， $FN_1 = 1-1=0$。\n-   案例 $2$：$G_2=\\{44054006\\}$, $P_2=\\{44054006\\}$。$|G_2|=1, |P_2|=1, |G_2 \\cap P_2|=1$。\n    $TP_2 = 1$， $FP_2 = 1-1=0$， $FN_2 = 1-1=0$。\n-   案例 $3$：$G_3=\\{370218001\\}$, $P_3=\\{195967001\\}$。$|G_3|=1, |P_3|=1, |G_3 \\cap P_3|=0$。\n    $TP_3 = 0$， $FP_3 = 1-0=1$， $FN_3 = 1-0=1$。\n-   案例 $4$：$G_4=\\{74400008\\}$, $P_4=\\{74400008\\}$。$|G_4|=1, |P_4|=1, |G_4 \\cap P_4|=1$。\n    $TP_4 = 1$， $FP_4 = 1-1=0$， $FN_4 = 1-1=0$。\n-   案例 $5$：$G_5=\\{42343007\\}$, $P_5=\\{42343007\\}$。$|G_5|=1, |P_5|=1, |G_5 \\cap P_5|=1$。\n    $TP_5 = 1$， $FP_5 = 1-1=0$， $FN_5 = 1-1=0$。\n-   案例 $6$：$G_6=\\{53741008\\}$, $P_6=\\{53741008\\}$。$|G_6|=1, |P_6|=1, |G_6 \\cap P_6|=1$。\n    $TP_6 = 1$， $FP_6 = 1-1=0$， $FN_6 = 1-1=0$。\n-   案例 $7$：$G_7=\\{233604007\\}$, $P_7=\\{233604007, 386661006\\}$。$|G_7|=1, |P_7|=2, |G_7 \\cap P_7|=1$。\n    $TP_7 = 1$， $FP_7 = 2-1=1$， $FN_7 = 1-1=0$。\n-   案例 $8$：$G_8=\\{6142004\\}$, $P_8=\\{6142004\\}$。$|G_8|=1, |P_8|=1, |G_8 \\cap P_8|=1$。\n    $TP_8 = 1$， $FP_8 = 1-1=0$， $FN_8 = 1-1=0$。\n-   案例 $9$：$G_9=\\varnothing$, $P_9=\\{162864005\\}$。$|G_9|=0, |P_9|=1, |G_9 \\cap P_9|=0$。\n    $TP_9 = 0$， $FP_9 = 1-0=1$， $FN_9 = 0-0=0$。\n-   案例 $10$：$G_{10}=\\{44054006, 399090003\\}$, $P_{10}=\\{44054006\\}$。$|G_{10}|=2, |P_{10}|=1, |G_{10} \\cap P_{10}|=1$。\n    $TP_{10} = 1$， $FP_{10} = 1-1=0$， $FN_{10} = 2-1=1$。\n\n现在，我们将这些计数相加：\n$$TP_{total} = 1+1+0+1+1+1+1+1+0+1 = 8$$\n$$FP_{total} = 0+0+1+0+0+0+1+0+1+0 = 3$$\n$$FN_{total} = 0+0+1+0+0+0+0+0+0+1 = 2$$\n\n有了总计数，我们计算微观平均的精确率（$P$）和召回率（$R$）：\n$$P = \\frac{TP_{total}}{TP_{total} + FP_{total}} = \\frac{8}{8+3} = \\frac{8}{11}$$\n$$R = \\frac{TP_{total}}{TP_{total} + FN_{total}} = \\frac{8}{8+2} = \\frac{8}{10} = \\frac{4}{5}$$\n\n$F_1$ 分数是精确率和召回率的调和平均数，定义为：\n$$F_1 = 2 \\cdot \\frac{P \\cdot R}{P+R}$$\n代入 $P$ 和 $R$ 的值：\n$$F_1 = 2 \\cdot \\frac{\\frac{8}{11} \\cdot \\frac{4}{5}}{\\frac{8}{11} + \\frac{4}{5}} = 2 \\cdot \\frac{\\frac{32}{55}}{\\frac{8 \\cdot 5 + 4 \\cdot 11}{55}} = 2 \\cdot \\frac{\\frac{32}{55}}{\\frac{40+44}{55}} = 2 \\cdot \\frac{\\frac{32}{55}}{\\frac{84}{55}} = 2 \\cdot \\frac{32}{84} = \\frac{64}{84}$$\n或者，$F_1$ 分数可以直接从总计数计算：\n$$F_1 = \\frac{2 \\cdot TP_{total}}{2 \\cdot TP_{total} + FP_{total} + FN_{total}}$$\n$$F_1 = \\frac{2 \\cdot 8}{2 \\cdot 8 + 3 + 2} = \\frac{16}{16 + 5} = \\frac{16}{21}$$\n分数 $\\frac{64}{84}$ 通过分子分母同除以最大公约数 $4$ 来化简为 $\\frac{16}{21}$。数字 $16$ 是 $2^4$，而 $21$ 是 $3 \\cdot 7$，所以它们没有共同的因子，该分数已是最简分数。", "answer": "$$\\boxed{\\frac{16}{21}}$$", "id": "4856628"}, {"introduction": "仅仅采用标准并不足以保证系统的长期稳定和安全；我们还必须有效地管理这些标准的演变。这个概念性练习 [@problem_id:4856709] 探讨了一个深层次的问题：当一个标准术语（如SNOMED CT）发布新版本时，它如何可能在不知不觉中改变临床决策支持软件的行为，甚至引发安全风险。它以一个具体的临床场景，雄辩地证明了为什么将规则绑定到特定版本的标准是构建可复现、安全可靠的医疗应用的必要条件。", "problem": "一家医院使用 Health Level Seven International (HL7) 的快速医疗保健互操作性资源 (Fast Healthcare Interoperability Resources, FHIR) 来实施临床决策支持。规则是：如果患者的诊断属于代表“2型糖尿病”的值集 (ValueSet)，并且最近一次的糖化血红蛋白 (Hemoglobin A1c) 值等于或高于一个阈值，则触发糖尿病护理路径。该术语栈使用 SNOMED International 的医疗系统命名法—临床术语 (Systematized Nomenclature of Medicine—Clinical Terms, SNOMED CT)、Regenstrief Institute 的逻辑观察标识符名称和代码 (Logical Observation Identifiers Names and Codes, LOINC) 以及 National Library of Medicine (NLM) 的 RxNorm。考虑以下形式化。\n\n定义和假设：\n- 代码系统 (CodeSystem) 是一个带版本的概念集合。设 $C_t$ 表示在发布时间 $t$ 由维护该代码系统 (例如 SNOMED International 维护 SNOMED CT) 的标准制定组织所确定的代码及其语义的集合。通常情况下，如果 $t_1 \\neq t_2$，则 $C_{t_1} \\neq C_{t_2}$，因为代码可能会被添加、停用、重新定义或重新分类。\n- 值集 (ValueSet) $V$ 使用 SNOMED CT 层级标准进行内涵式定义：“包含作为 SNOMED CT‘2型糖尿病’概念后代的所有代码”，并将该父概念表示为 $p$。值集 $V$ 在时间 $t$ 针对代码系统状态的扩展是由术语服务器将内涵式定义应用于 $C_t$ 时返回的枚举集 $E_t(V) \\subseteq C_t$。\n- 一条临床规则将患者数据映射到一个决策。设最近一次的糖化血红蛋白值为 $h$ (一个 LOINC 编码的实验室结果)，诊断代码为 $d$。将规则定义为函数 $f(d,h)$：如果 $d \\in E_t(V)$ 且 $h \\ge \\theta$，则 $f(d,h) = 1$ (触发)；否则 $f(d,h) = 0$ (不触发)，其中 $\\theta$ 是一个固定阈值 (例如，2型糖尿病标准使用 $\\theta = 6.5\\%$, 并且在本问题中该阈值被视为恒定的)。\n- 业界普遍认为，值集扩展依赖于值集的内涵式标准和代码系统的版本 (HL7 FHIR 术语服务规范、SNOMED CT 概念模型演变、RxNorm 每月发布版以及 LOINC 每半年发布版)。没有给出捷径公式；所有推理都必须遵循这些核心定义。\n\n构建以下科学上合理的情景：\n- 在时间 $t_1$，SNOMED CT 层级结构包含一个代表“伴有外周血管病的2型糖尿病”的概念 $d^\\ast$，并且 $d^\\ast$ 是 $p$ 的一个后代。因此，$d^\\ast \\in E_{t_1}(V)$。\n- 在稍后的时间 $t_2$，SNOMED International 由于概念模型的修订而重构了层级结构，使得 $d^\\ast$被重新分类到一个更通用的“伴有外周血管病的糖尿病”节点下。在这个新结构中，$d^\\ast$ 不再是 $p$ 的后代。因此，$d^\\ast \\notin E_{t_2}(V)$，即使 $V$ 的内涵式标准未改变。\n- 考虑一个诊断为 $d^\\ast$ 且糖化血红蛋白值为 $h = 7.0\\%$ 的患者。在使用扩展 $E_{t_1}(V)$ 的情况下，规则得出 $f(d^\\ast, 7.0\\%) = 1$；而在使用扩展 $E_{t_2}(V)$ 的情况下，规则得出 $f(d^\\ast, 7.0\\%) = 0$。\n\n问题：\n鉴于上述情景以及标准制定组织在维护不断演变的代码系统方面的作用，哪个选项最能体现保证规则的临床解释在不同环境和不同时间下保持稳定所必需的控制措施？\n\nA. 通过包含代码系统的规范标识符和显式版本（例如，“SNOMED CT International Edition, version $t_1$”），将值集绑定到一个特定的代码系统版本，以便 $E_t(V)$ 是针对一个固定的 $C_{t_1}$ 进行计算的；可选择性地持久化存储扩展的元数据。这确保了 $E_{t_1}(V)$ 在任何扩展它的地方都是相同的，从而稳定了 $f(d,h)$。\n\nB. 在运行时只使用代码的人类可读显示字符串，忽略代码系统版本；由于字符串在视觉上是稳定的，$E_t(V)$ 不会改变，$f(d,h)$ 将保持稳定。\n\nC. 依赖标准制定组织的向后兼容性保证；后代关系很少改变，因此扩展在没有版本控制的情况下实际上是稳定的。\n\nD. 缓存在任何环境中计算的首次扩展，并在不记录代码系统版本的情况下无限期地重用它；这可以防止 $E_t(V)$ 发生变化，从而稳定 $f(d,h)$。\n\nE. 只引用代码系统的对象标识符 (Object Identifier, OID)（例如 SNOMED CT 的 OID），而不带版本；OID 是全局唯一的，因此针对一个值集的扩展将随时间保持稳定。", "solution": "### 问题验证\n\n**步骤 1：提取已知信息**\n\n- **代码系统定义**：代码系统是一个带版本的概念集合。$C_t$ 表示在发布时间 $t$ 的代码及其语义的集合。对于 $t_1 \\neq t_2$，通常 $C_{t_1} \\neq C_{t_2}$。\n- **值集定义**：值集 $V$ 使用 SNOMED CT 层级标准进行内涵式定义：“包含作为 SNOMED CT‘2型糖尿病’概念后代的所有代码”，该父概念表示为 $p$。\n- **值集扩展**：值集 $V$ 在时间 $t$ 针对代码系统状态的扩展是枚举集 $E_t(V) \\subseteq C_t$。\n- **临床规则定义**：函数 $f(d,h)$ 将患者数据（诊断代码 $d$，最近一次糖化血红蛋白值 $h$）映射到一个决策。规则定义为：如果 $d \\in E_t(V)$ 且 $h \\ge \\theta$，则 $f(d,h) = 1$；否则 $f(d,h) = 0$。\n- **阈值**：$\\theta$ 是一个固定阈值，示例值为 $\\theta = 6.5\\%$。\n- **基本前提**：值集扩展依赖于值集的内涵式标准和代码系统的版本。\n- **情景**：\n    1. 在时间 $t_1$，一个概念 $d^\\ast$ (“伴有外周血管病的2型糖尿病”) 是 $p$ 的后代。因此，$d^\\ast \\in E_{t_1}(V)$。\n    2. 在稍后的时间 $t_2$，SNOMED CT 层级结构被重构。概念 $d^\\ast$ 不再是 $p$ 的后代。因此，$d^\\ast \\notin E_{t_2}(V)$。\n    3. 对于一个诊断为 $d^\\ast$ 且糖化血红蛋白值为 $h = 7.0\\%$ 的患者，规则的输出根据扩展时间而变化：\n        - 使用扩展 $E_{t_1}(V)$，条件 $d^\\ast \\in E_{t_1}(V)$ 且 $7.0\\% \\ge 6.5\\%$ 为真，所以 $f(d^\\ast, 7.0\\%) = 1$。\n        - 使用扩展 $E_{t_2}(V)$，条件 $d^\\ast \\in E_{t_2}(V)$ 为假，所以 $f(d^\\ast, 7.0\\%) = 0$。\n- **问题**：哪个选项最能体现保证规则的临床解释在不同环境和不同时间下保持稳定所必需的控制措施？\n\n**步骤 2：使用提取的已知信息进行验证**\n\n根据验证标准对问题陈述进行评估。\n\n- **科学依据**：该问题基于医学信息学的既定原则，特别是 Health Level Seven International (HL7) 在其快速医疗保健互操作性资源 (Fast Healthcare Interoperability Resources, FHIR) 规范中定义的术语服务。标准制定组织 (Standards Development Organizations, SDO)，如 SNOMED International、Regenstrief Institute 和 National Library of Medicine (NLM) 的角色被准确地描绘。所描述的现象——由于代码系统（如 SNOMED CT）的新版本导致值集扩展发生变化——是该领域一个众所周知且关键的问题，通常被称为“语义漂移”或“术语版本问题”。\n- **良构性**：该问题是良构的。它为所有组件（$C_t, V, E_t(V), f(d,h)$）提供了清晰、形式化的定义，提出了一个具体且明确的情景来说明一个特定的失效点，并要求针对此失效点提出解决方案。预期会有一个关于术语管理最佳实践的独特且有意义的答案。\n- **客观性**：语言精确、技术性强，没有主观或基于意见的陈述。“业界普遍认为，值集扩展依赖于...代码系统的版本”这一陈述是反映健康信息学标准界共识的事实陈述。\n\n该问题没有表现出任何无效性缺陷：\n1.  **科学或事实不健全**：其前提在健康信息学领域内是事实健全的。\n2.  **无法形式化或不相关**：该问题已被部分形式化，并且与主题直接相关。\n3.  **不完整或矛盾的设置**：设置是完整的且自洽的。\n4.  **不切实际或不可行**：SNOMED CT 概念在新版本中被重新指定父级的场景是现实的。\n5.  **不适定或结构不良**：术语定义明确，问题清晰。\n6.  **伪深刻、琐碎或同义反复**：该问题探讨了在实现可互操作和可复现的临床决策支持中的一个真实且不容忽视的挑战。\n7.  **超出科学可验证性**：所提出的解决方案可以对照已发布的标准和信息学领域的既定最佳实践进行验证。\n\n**步骤 3：结论与行动**\n\n问题陈述是**有效的**。将继续进行解答。\n\n### 基于原则的推导\n\n问题的核心是临床规则输出随时间变化的不稳定性。该规则定义为函数 $f(d,h)$，但所提供的情景表明，其评估依赖于第三个隐含参数：用于值集扩展的代码系统版本的时间 $t$。让我们通过将规则定义为 $f_t(d,h)$ 来明确这一点，如果 $d \\in E_t(V)$ 且 $h \\ge \\theta$，则其值为 $1$，否则为 $0$。\n\n该情景显示：\n- $f_{t_1}(d^\\ast, 7.0\\%) = 1$ 因为 $d^\\ast \\in E_{t_1}(V)$。\n- $f_{t_2}(d^\\ast, 7.0\\%) = 0$ 因为 $d^\\ast \\notin E_{t_2}(V)$。\n\n这种可变性意味着同一个患者记录可能因规则执行的时间和地点不同而导致不同的临床操作。这在临床上是不可接受的，并且损害了安全性、可复现性和互操作性。\n\n为了“保证规则的临床解释保持稳定”，我们必须消除对执行时间 $t$ 的依赖。这意味着我们必须确保在规则逻辑中使用的集合 $E_t(V)$ 在所有环境和所有时间都完全相同。\n\n扩展 $E_t(V)$ 是两个输入的函数：值集 $V$ 的内涵式定义和代码系统 $C_t$ 的状态。问题陈述指出 $V$ 的内涵式定义（“$p$ 的后代”）没有改变。因此，$E_t(V)$ 的可变性完全是由代码系统版本 $C_{t_1}$ 和 $C_{t_2}$ 之间的变化引起的。\n\n确保扩展 $E(V)$ 稳定且可复现的唯一方法是将代码系统固定到一个特定的、不可变的版本。如果规则的编写意图是使用时间 $t_1$ 时存在的层级结构，那么任何执行该规则的系统都必须被指示针对 $C_{t_1}$ 进行扩展。这可以通过将值集定义显式绑定到代码系统的特定版本标识符来实现。这使得扩展成为确定性的：任何兼容的术语服务器，当被要求针对指定版本的代码系统扩展 $V$ 时，都会返回完全相同的代码集 $E_{t_1}(V)$。这消除了时间上的模糊性并稳定了函数 $f(d,h)$。\n\n### 逐项选项分析\n\n**A. 通过包含代码系统的规范标识符和显式版本（例如，“SNOMED CT International Edition, version $t_1$”），将值集绑定到一个特定的代码系统版本，以便 $E_t(V)$ 是针对一个固定的 $C_{t_1}$ 进行计算的；可选择性地持久化存储扩展的元数据。这确保了 $E_{t_1}(V)$ 在任何扩展它的地方都是相同的，从而稳定了 $f(d,h)$。**\n此选项直接实现了从第一性原理推导出的控制措施。通过将值集绑定到显式的代码系统版本（例如，在 FHIR 中由版本 URI 标识），扩展 $E_t(V)$ 不再依赖于执行环境的上下文，而是固定为 $E_{t_1}(V)$。这确保了每个评估规则的系统都会为该值集计算出相同的成员资格，从而为 $f(d,h)$ 产生稳定且可复现的结果。这是实现术语一致性的标准最佳实践，正如 HL7 FHIR `ValueSet` 资源等工件中所规定的。\n**结论：正确。**\n\n**B. 在运行时只使用代码的人类可读显示字符串，忽略代码系统版本；由于字符串在视觉上是稳定的，$E_t(V)$ 不会改变，$f(d,h)$ 将保持稳定。**\n这种方法存在根本性缺陷。首先，人类可读的字符串既不保证唯一也不保证不可变；SDO 可以并且确实会更改它们。其次，更关键的是，值集 $V$ 是基于层级关系（“$p$ 的后代”）进行内涵式定义的。这种关系是代码系统概念模型的形式属性，不能仅从显示字符串中计算出来。基于字符串执行逻辑是脆弱的且在语义上是不正确的。\n**结论：错误。**\n\n**C. 依赖标准制定组织的向后兼容性保证；后代关系很少改变，因此扩展在没有版本控制的情况下实际上是稳定的。**\n这种说法在事实上是不正确的，并且与问题本身给出的有效情景相矛盾。像 SNOMED CT 这样的代码系统的演变包括完善概念模型，这明确包括更改层级关系（重新指定概念的父级）以提高临床准确性。SDO 不保证这种关系会是静态的。依赖一个毫无根据的稳定性假设并非一种控制机制，反而会导致问题中所描述的那个问题。\n**结论：错误。**\n\n**D. 缓存在任何环境中计算的首次扩展，并在不记录代码系统版本的情况下无限期地重用它；这可以防止 $E_t(V)$ 发生变化，从而稳定 $f(d,h)$。**\n这种方法引入了不可复现性。“首次扩展”是一个任意事件。一个开发中的系统可能会针对版本 $C_{t_1}$ 进行计算，而另一家医院的生产系统可能会针对版本 $C_{t_2}$ 进行其“首次”扩展。这将导致跨环境的不同且不一致的缓存扩展。如果不记录生成缓存所依据的版本，缓存的代码集就是一个没有可验证来源的“黑盒”，使其无法被审计或复现。这是一种不安全且不受控制的做法。\n**结论：错误。**\n\n**E. 只引用代码系统的对象标识符 (OID)（例如 SNOMED CT 的 OID），而不带版本；OID 是全局唯一的因此针对一个值集的扩展将随时间保持稳定。**\nOID（或像 FHIR 等现代标准中的规范 URL）标识了一个代码系统（例如，“SNOMED CT”），但它本身并未指定该系统的*版本*。只使用 OID 是一个指令，要求针对“某个”版本的 SNOMED CT 进行值集扩展——通常是环境中可用的最新版本。正如问题所示，使用不同版本（$C_{t_1}$ vs. $C_{t_2}$）会产生不同的结果。因此，引用代码系统而不带版本恰恰是不稳定性的根源，而不是解决方案。\n**结论：错误。**", "answer": "$$\\boxed{A}$$", "id": "4856709"}]}
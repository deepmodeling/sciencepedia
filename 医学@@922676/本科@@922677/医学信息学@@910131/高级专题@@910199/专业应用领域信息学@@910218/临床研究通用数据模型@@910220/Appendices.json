{"hands_on_practices": [{"introduction": "通用数据模型（CDM）的核心在于其标准化的词表。本练习模拟了将源数据代码（如ICD-10-CM）转换为标准SNOMED概念的关键过程([@problem_id:4829300])，这是使用OMOP词表实现语义互操作性的基石。通过这个练习，你将学会如何利用`CONCEPT`和`CONCEPT_RELATIONSHIP`表来确保不同来源的数据在语义上是一致的。", "problem": "一个卫生系统正在将来自International Classification of Diseases, Tenth Revision, Clinical Modification (ICD-10-CM)的诊断数据标准化到Observational Medical Outcomes Partnership Common Data Model (OMOP CDM)，并使用Systematized Nomenclature of Medicine — Clinical Terms (SNOMED CT)作为临床情况的标准词表。您的任务是解析标准的SNOMED概念标识符，并描述当映射产生多个有效目标时的正确处理方法。\n\n需要使用的基本定义和事实：\n- 在OMOP CDM中，$CONCEPT$表存储记录，其属性包括$concept\\_id$（OMOP内部标识符）、$concept\\_code$（源词表代码）、$vocabulary\\_id$（概念所属的词表）、$standard\\_concept$（用$'S'$表示标准概念）、$valid\\_start\\_date$、$valid\\_end\\_date$和$invalid\\_reason$（如果有效则为null）。\n- $CONCEPT\\_RELATIONSHIP$表存储概念之间的关系，其属性包括$concept\\_id\\_1$（源）、$concept\\_id\\_2$（目标）、$relationship\\_id$、$valid\\_start\\_date$、$valid\\_end\\_date$和$invalid\\_reason$（如果有效则为null）。\n- 关系$'Maps\\ to'$表示从一个非标准源概念到一个或多个标准目标概念的等价映射。方向是从$concept\\_id\\_1$（源）到$concept\\_id\\_2$（标准目标）。标准的临床情况概念位于$vocabulary\\_id = 'SNOMED'$中，且$standard\\_concept = 'S'$。\n- 有效性筛选要求$invalid\\_reason = NULL$，并且对于给定的当前时间$T$，满足$valid\\_start\\_date \\le T \\le valid\\_end\\_date$。\n\n考虑ICD-10-CM代码$E11.9$（“无并发症的2型糖尿病”）。我们为您提供了一组一致的概念和关系记录样本，足以确定其映射：\n- $CONCEPT$条目：\n  - 源：$concept\\_id = 1001$，$concept\\_code = E11.9$，$vocabulary\\_id = ICD10CM$，$standard\\_concept = NULL$，$invalid\\_reason = NULL$，且其有效期覆盖当前时间$T$。\n  - 目标候选1：$concept\\_id = 2001$，$concept\\_code = 44054006$，$vocabulary\\_id = SNOMED$，$standard\\_concept = 'S'$，$invalid\\_reason = NULL$，且其有效期覆盖$T$。\n  - 目标候选2：$concept\\_id = 2002$，$concept\\_code = 999999999$，$vocabulary\\_id = SNOMED$，$standard\\_concept = 'S'$，$invalid\\_reason = 'D'$，且其有效期不覆盖$T$。\n- $CONCEPT\\_RELATIONSHIP$条目：\n  - $concept\\_id\\_1 = 1001$，$concept\\_id\\_2 = 2001$，$relationship\\_id = 'Maps\\ to'$，$invalid\\_reason = NULL$，且其有效期覆盖$T$。\n  - $concept\\_id\\_1 = 1001$，$concept\\_id\\_2 = 2002$，$relationship\\_id = 'Maps\\ to'$，$invalid\\_reason = 'D'$，且其有效期不覆盖$T$。\n\n任务：选择一个选项，该选项正确地阐述了使用$CONCEPT$和$CONCEPT\\_RELATIONSHIP$为$E11.9$解析标准SNOMED目标$concept\\_id$集合的方法，指出了上述样本数据的正确解析集，并说明了当存在多个有效的$'Maps\\ to'$目标时的正确处理方式。\n\nA. 筛选$CONCEPT$表，通过匹配$vocabulary\\_id = 'ICD10CM'$和$concept\\_code = E11.9$来定位ICD-10-CM源，得到$concept\\_id = 1001$。从$CONCEPT\\_RELATIONSHIP$中，选择$concept\\_id\\_1 = 1001$、$relationship\\_id = 'Maps\\ to'$、$invalid\\_reason = NULL$且有效期覆盖$T$的记录。将这些目标与$CONCEPT$表连接，并仅保留$vocabulary\\_id = 'SNOMED'$、$standard\\_concept = 'S'$且在时间$T$有效的记录。该样本的解析集为$\\{2001\\}$；如果存在多个有效目标，则保留所有目标，并将它们表示为多个标准化记录（每个目标一个），而不是任意选择一个。\n\nB. 使用$CONCEPT\\_RELATIONSHIP$中关于ICD-10-CM概念的$'Is\\ a'$关系来查找层级父概念，然后在目标中选择最小的$concept\\_id$作为标准概念。该样本的解析集为$\\{2002\\}$；如果存在多个目标，则选择$concept\\_id$最小的一个以确保确定性。\n\nC. 通过字符串相等将ICD-10-CM代码$E11.9$直接与SNOMED的$concept\\_code$ $44054006$匹配，并将该代码视为OMOP的$concept\\_id$。该样本的解析集为$\\{44054006\\}$；如果存在多个匹配项，则通过最长字符串长度选择最具体的一个。\n\nD. 使用$'Maps\\ to'$，但在$concept\\_id\\_2$上连接回$concept\\_id\\_1$以查找目标；忽略$invalid\\_reason$和有效期窗口以避免丢弃历史映射。该样本的解析集为$\\{2001, 2002\\}$；如果存在多个有效目标，则通过选择在您的数据中流行度最高的一个来合并为单个目标。", "solution": "本任务旨在确定在Observational Medical Outcomes Partnership Common Data Model (OMOP CDM)中，将一个International Classification of Diseases, Tenth Revision, Clinical Modification (ICD-10-CM)代码标准化为一个Systematized Nomenclature of Medicine — Clinical Terms (SNOMED CT)概念的正确流程。这包括识别正确的标准`concept_id`，将该流程应用于代码$E11.9$的样本数据，并阐述处理一对多映射的通用规则。\n\n首先，我们根据提供的定义和事实来形式化这个流程。设$T$为当前时间。\n\n1.  **识别源概念**：我们从一个源词表$v_{source}$中的源代码$c_{source}$开始。在本问题中，$c_{source} = 'E11.9'$且$v_{source} = 'ICD10CM'$。我们必须在$CONCEPT$表中找到其对应的`concept_id`。\n    - 我们查询$CONCEPT$表，寻找$concept\\_code = c_{source}$且$vocabulary\\_id = v_{source}$的记录。\n    - 根据样本数据，对于$concept\\_code = 'E11.9'$和$vocabulary\\_id = 'ICD10CM'$，我们找到源概念的$concept\\_id = 1001$。\n    - 问题陈述断言该源概念在时间$T$是有效的，这与样本数据（$invalid\\_reason = NULL$且其有效期覆盖$T$）一致。源概念应为非标准概念，这与$standard\\_concept = NULL$相符。\n\n2.  **查找并筛选'Maps to'关系**：我们使用源$concept\\_id$（即$1001$）来查找至标准概念的映射。问题指明等价映射为$'Maps to'$。\n    - 我们查询$CONCEPT\\_RELATIONSHIP$表，寻找$concept\\_id\\_1 = 1001$且$relationship\\_id = 'Maps\\ to'$的记录。\n    - 样本数据提供了两个这样的关系，分别指向$concept\\_id\\_2 = 2001$和$concept\\_id\\_2 = 2002$。\n    - 我们必须对这些关系应用有效性筛选规则：$invalid\\_reason = NULL$且$valid\\_start\\_date \\le T \\le valid\\_end\\_date$。\n    - 对于到$concept\\_id\\_2 = 2001$的关系：$invalid\\_reason = NULL$且其有效期覆盖$T$。此关系有效。\n    - 对于到$concept\\_id\\_2 = 2002$的关系：$invalid\\_reason = 'D'$（通常表示'Deprecated'，即已弃用）且其有效期不覆盖$T$。此关系无效。\n    - 完成此步骤后，唯一候选的目标概念由$concept\\_id = 2001$标识。\n\n3.  **验证目标概念**：最后一步是验证从有效关系中获得的目标概念本身是否是目标词表中的有效标准概念。目标词表是SNOMED，标准概念用$standard\\_concept = 'S'$标记。\n    - 我们必须在$CONCEPT$表中检查$concept\\_id = 2001$的记录。\n    - $concept\\_id = 2001$的样本数据：$vocabulary\\_id = 'SNOMED'$，$standard\\_concept = 'S'$，$invalid\\_reason = NULL$，且其有效期覆盖$T$。所有条件都满足。因此，$concept\\_id = 2001$是一个有效的标准目标。\n    - 为完整起见，我们可以检查无效的目标$concept\\_id = 2002$。样本数据显示其$invalid\\_reason = 'D'$且有效期不覆盖$T$。这个概念是无效的，这为其被排除提供了第二个原因。\n\n4.  **确定样本的解析集**：基于对规则的逐步应用，源代码$E11.9$（即$concept\\_id = 1001$）的唯一有效标准目标是$concept\\_id = 2001$。因此，解析集为$\\{2001\\}$。\n\n5.  **处理多个有效目标的通用规则**：在OMOP词表中，$'Maps to'$关系可以是一对多的。如果单个源概念映射到多个目标概念，并且所有这些关系和目标概念都是有效且标准的，那么正确的流程是保留所有这些目标。这是因为目标概念的集合共同代表了源概念的含义。任意选择一个会导致临床相关信息的丢失。当将数据加载到像$CONDITION\\_OCCURRENCE$这样的临床数据表时，这将导致为每个有效的标准目标概念创建一条记录。\n\n现在我们根据这个推导出的正确流程来评估每个选项。\n\n**A. 筛选$CONCEPT$表，通过匹配$vocabulary\\_id = 'ICD10CM'$和$concept\\_code = E11.9$来定位ICD-10-CM源，得到$concept\\_id = 1001$。从$CONCEPT\\_RELATIONSHIP$中，选择$concept\\_id\\_1 = 1001$、$relationship\\_id = 'Maps\\ to'$、$invalid\\_reason = NULL$且有效期覆盖$T$的记录。将这些目标与$CONCEPT$表连接，并仅保留$vocabulary\\_id = 'SNOMED'$、$standard\\_concept = 'S'$且在时间$T$有效的记录。该样本的解析集为$\\{2001\\}$；如果存在多个有效目标，则保留所有目标，并将它们表示为多个标准化记录（每个目标一个），而不是任意选择一个。**\n- 该选项描述的流程与上面推导的正确方法完全匹配，包括对关系和目标概念的所有必要筛选步骤。\n- 其识别出的样本解析集$\\{2001\\}$是正确的。\n- 关于处理多个目标的陈述（保留所有）是正确的，并与OMOP的最佳实践一致。\n- **结论**：**正确**。\n\n**B. 使用$CONCEPT\\_RELATIONSHIP$中关于ICD-10-CM概念的$'Is\\ a'$关系来查找层级父概念，然后在目标中选择最小的$concept\\_id$作为标准概念。该样本的解析集为$\\{2002\\}$；如果存在多个目标，则选择$concept\\_id$最小的一个以确保确定性。**\n- 此选项错误地建议使用$'Is\\ a'$关系而不是$'Maps\\ to'$。$'Is\\ a'$关系定义了层级结构，通常在单个词表内部使用，而不是用于在不同词表之间进行映射。\n- 提议的决胜规则（最小的$concept\\_id$）是任意的，不是有效的OMOP约定。\n- 其识别出的解析集$\\{2002\\}$是错误的；该概念在样本数据中被明确定义为无效。\n- **结论**：**错误**。\n\n**C. 通过字符串相等将ICD-10-CM代码$E11.9$直接与SNOMED的$concept\\_code$ $44054006$匹配，并将该代码视为OMOP的$concept\\_id$。该样本的解析集为$\\{44054006\\}$；如果存在多个匹配项，则通过最长字符串长度选择最具体的一个。**\n- 这个选项犯了一个根本性错误，试图将一个词表的$concept\\_code$与另一个词表的$concept\\_code$进行匹配。OMOP词表（特别是$CONCEPT$和$CONCEPT\\_RELATIONSHIP$）的目的是通过整数$concept\\_id$提供一种结构化的方式来执行这些映射。\n- 它还混淆了$concept\\_code$和$concept\\_id$。解析集$\\{44054006\\}$是一个SNOMED代码，而不是OMOP的$concept\\_id$。\n- 决胜规则（“最长字符串长度”）是毫无根据的。\n- **结论**：**错误**。\n\n**D. 使用$'Maps\\ to'$，但在$concept\\_id\\_2$上连接回$concept\\_id\\_1$以查找目标；忽略$invalid\\_reason$和有效期窗口以避免丢弃历史映射。该样本的解析集为$\\{2001, 2002\\}$；如果存在多个有效目标，则通过选择在您的数据中流行度最高的一个来合并为单个目标。**\n- 此选项错误地建议忽略有效性过滤器（$invalid\\_reason$和日期窗口）。这些过滤器对于确保所使用的映射是词表维护者定义的当前和正确的映射至关重要。使用已弃用或无效的映射会导致不正确的标准化。\n- 由于忽略了有效性，它错误地将无效概念$2002$包含在解析集中。\n- 处理多个目标的规则（基于数据流行度进行合并）是特定于研究的选择，而不是标准的ETL流程，并且会导致信息丢失。标准方法要求仅基于词表进行确定性映射。\n- **结论**：**错误**。", "answer": "$$\\boxed{A}$$", "id": "4829300"}, {"introduction": "在标准化测量的“概念”之后，我们必须标准化其“值”。这个练习 ([@problem_id:4829224]) 演示了如何使用公认的转换因子来统一记录在不同单位中的实验室结果。确保来自不同来源的数据具有可比性，这是为分析做准备的关键一步。", "problem": "一家医院正在将“整合生物学与临床信息的医疗信息学”（Informatics for Integrating Biology and the Bedside, i2b2）的实验室结果与“观察性医疗结果合作组织”（Observational Medical Outcomes Partnership, OMOP）通用数据模型进行协调统一。作为由“统一度量衡单位代码”（Unified Code for Units of Measure, UCUM）和“逻辑观察标识符命名和编码”（Logical Observation Identifiers Names and Codes, LOINC）指导的单位标准化工作的一部分，正在对同一次患者就诊的两次空腹血糖观测值进行评估：一次记录为 $180\\,\\text{mg/dL}$，另一次记录为 $10\\,\\text{mmol/L}$。对于葡萄糖，基于其分子量，一个经过充分验证的临床事实是 $1\\,\\text{mmol/L} = 18\\,\\text{mg/dL}$。\n\n使用与UCUM一致的量纲分析，将两次观测值都转换为通用单位 $\\text{mg/dL}$，并计算两个标准化值之间的绝对差 $\\Delta$，其定义为\n$$\n\\Delta = \\left|C_{1,\\text{mg/dL}} - C_{2,\\text{mg/dL}}\\right|.\n$$\n请以 $\\text{mg/dL}$ 为单位表示您的最终答案。无需四舍五入。$\\Delta$ 的目的是确定在OMOP单位标准化下，这两次观测值是否是对同一浓度的一致表示。", "solution": "问题要求将两次空腹血糖浓度测量值标准化为通用单位 $\\text{mg/dL}$，并随后计算它们之间的绝对差。这是临床数据协调中的一个标准程序，尤其是在不同的电子健康记录系统或像 i2b2 和 OMOP 这样的研究数据库之间迁移或整合数据时。该过程依赖于量纲分析，使用从基本物理化学性质（在本例中为葡萄糖的摩尔质量）推导出的转换因子。\n\n已知条件如下：\n- 第一个浓度，$C_1 = 180\\,\\text{mg/dL}$。\n- 第二个浓度，$C_2 = 10\\,\\text{mmol/L}$。\n- 葡萄糖的转换因子：$1\\,\\text{mmol/L} = 18\\,\\text{mg/dL}$。为解决本问题，这被陈述为一个经过充分验证的临床事实。\n- 两个浓度的目标单位都是 $\\text{mg/dL}$。\n- 需要计算的量是绝对差，$\\Delta = |C_{1,\\text{mg/dL}} - C_{2,\\text{mg/dL}}|$。\n\n第一步是确保两个测量值都用相同的单位表示。第一个测量值 $C_1$ 已经使用了目标单位：\n$$\nC_{1,\\text{mg/dL}} = 180\\,\\text{mg/dL}\n$$\n\n第二步是将第二个测量值 $C_2$ 从 $\\text{mmol/L}$ 转换为 $\\text{mg/dL}$。我们使用提供的转换因子。量纲分析要求我们将原始值乘以一种形式的转换因子，该转换因子可以抵消原始单位并引入所需单位。转换因子可以表示为一个等于1的比率：\n$$\n\\frac{18\\,\\text{mg/dL}}{1\\,\\text{mmol/L}} = 1\n$$\n将 $C_2$ 乘以这个比率，我们得到：\n$$\nC_{2,\\text{mg/dL}} = C_2 \\times \\frac{18\\,\\text{mg/dL}}{1\\,\\text{mmol/L}} = 10\\,\\text{mmol/L} \\times \\frac{18\\,\\text{mg/dL}}{1\\,\\text{mmol/L}}\n$$\n$\\text{mmol/L}$ 单位被抵消，剩下所需的单位 $\\text{mg/dL}$：\n$$\nC_{2,\\text{mg/dL}} = 10 \\times 18\\,\\text{mg/dL} = 180\\,\\text{mg/dL}\n$$\n因此，标准化后，第二个浓度是 $180\\,\\text{mg/dL}$。\n\n最后一步是计算两个标准化浓度之间的绝对差 $\\Delta$。\n$$\n\\Delta = |C_{1,\\text{mg/dL}} - C_{2,\\text{mg/dL}}|\n$$\n代入标准化后的值：\n$$\n\\Delta = |180\\,\\text{mg/dL} - 180\\,\\text{mg/dL}|\n$$\n$$\n\\Delta = |0\\,\\text{mg/dL}|\n$$\n$$\n\\Delta = 0\\,\\text{mg/dL}\n$$\n两个测量值之间的绝对差为 $0\\,\\text{mg/dL}$。这表明，根据所提供的临床转换因子，两次观测完全一致，代表相同的值。在从 i2b2 到 OMOP 的迁移过程中进行数据质量评估的背景下，差值为 $0$ 将确认针对此特定观测值的数据协调是正确的，不存在数据差异。", "answer": "$$\\boxed{0}$$", "id": "4829224"}, {"introduction": "通用数据模型的一个关键优势是能够概括患者的长期病程。本练习 ([@problem_id:4829283]) 将向你展示如何应用OMOP CDM的业务规则，将离散的药物暴露记录（`DRUG_EXPOSURE`）转换为连续的治疗期（`DRUG_ERA`）。这一过程对于许多观察性研究至关重要，因为它能帮助我们理解长期的用药模式。", "problem": "在观测性医疗结果合作项目 (OMOP) 通用数据模型 (CDM) 中，DRUG_ERA 表衍生自 DRUG_EXPOSURE 表。一个带有开始日期和 `days-supply`（用药天数）的 DRUG_EXPOSURE 记录定义了一个从其开始日期到根据 `days-supply` 计算出的包含性结束日期的暴露区间。一个 DRUG_ERA 是通过合并那些重叠或间隔不超过一个固定持续窗口 (persistence window) 的 DRUG_EXPOSURE 区间而形成的。考虑一名患者，其针对同一种成分有三条 DRUG_EXPOSURE 记录，相对于一个索引日期，其开始日偏移量分别为 $0$、$25$ 和 $90$，每条记录的用药天数均为 $30$ 天。持续窗口为 $30$ 天。\n\n从上述定义出发，并且不使用任何快捷公式，通过以下步骤推导最终的 DRUG_ERA 区间：\n- 根据每个 DRUG_EXPOSURE 的开始日和用药天数构建其区间，以及\n- 应用持续窗口规则来确定这些区间是否应合并成一个单一的 DRUG_ERA。\n\n将最终的 DRUG_ERA 的开始和结束日偏移量表示为精确整数，按时间顺序排列，并以单行矩阵形式提供这四个数字 $(s_{1}, e_{1}, s_{2}, e_{2})$。无需四舍五入。报告相对于索引日期的日偏移量时，使用不带单位的纯整数。", "solution": "该问题陈述经评估有效。其科学依据建立在观测性医疗结果合作项目 (OMOP) 通用数据模型 (CDM) 的既定定义之上，这是医疗信息学的一个标准。该问题提法明确，提供了推导唯一逻辑解所需的所有数据和定义。语言客观，前提一致。\n\n任务是确定由单个患者和同种成分的三条 `DRUG_EXPOSURE` 记录产生的 `DRUG_ERA` 区间。推导过程必须遵循 OMOP CDM 定义的区间构建和合并的基本规则。\n\n提供的数据如下：\n- 三条 `DRUG_EXPOSURE` 记录，相对于一个索引日期的开始日偏移量分别为 $s_1 = 0$，$s_2 = 25$ 和 $s_3 = 90$。\n- 每条记录的 `days_supply`（用药天数）为 $d = 30$ 天。\n- 用于合并的 `persistence_window`（持续窗口）为 $P = 30$ 天。\n\n首先，我们为每条 `DRUG_EXPOSURE` 记录构建区间。暴露区间包含其开始日和结束日。对于一条开始日为 $s$、用药天数为 $d$ 天的记录，其暴露覆盖从第 $s$ 天到第 $s + d - 1$ 天。因此，结束日 $e$ 为 $e = s + d - 1$。\n\n设 $E_1$、$E_2$ 和 $E_3$ 为这三个 `DRUG_EXPOSURE` 区间。\n\n对于第一条记录，$s_1 = 0$ 且 $d = 30$：\n开始日为 $s_1 = 0$。\n结束日为 $e_1 = s_1 + d - 1 = 0 + 30 - 1 = 29$。\n因此，第一个暴露区间为 $E_1 = [0, 29]$。\n\n对于第二条记录，$s_2 = 25$ 且 $d = 30$：\n开始日为 $s_2 = 25$。\n结束日为 $e_2 = s_2 + d - 1 = 25 + 30 - 1 = 54$。\n因此，第二个暴露区间为 $E_2 = [25, 54]$。\n\n对于第三条记录，$s_3 = 90$ 且 $d = 30$：\n开始日为 $s_3 = 90$。\n结束日为 $e_3 = s_3 + d - 1 = 90 + 30 - 1 = 119$。\n因此，第三个暴露区间为 $E_3 = [90, 119]$。\n\n接下来，我们应用 `DRUG_ERA` 的合并逻辑。一个 `DRUG_ERA` 是通过合并那些重叠或间隔小于等于持续窗口的暴露区间而形成的。这个过程按时间顺序执行。\n\n我们从第一个暴露区间 $E_1 = [0, 29]$ 开始，将其作为我们第一个药物 era 的初始片段。设正在构建的当前 era 为 $Era_{\\text{current}}$。初始时，$Era_{\\text{current}} = [0, 29]$。\n\n然后我们考虑下一个暴露区间 $E_2 = [25, 54]$。我们必须确定 $E_2$ 是否应与 $Era_{\\text{current}}$ 合并。对于两个区间 $[s_A, e_A]$ 和 $[s_B, e_B]$（其中 $s_A \\le s_B$），如果它们之间的间隔 $g = s_B - e_A - 1$ 满足条件 $g \\le P$，则它们将被合并。负的或零的间隔表示重叠或邻接，这总是会导致合并。\n\n$E_2$ 的开始日是 $s_2 = 25$，而 $Era_{\\text{current}}$ 的结束日是 $e_{\\text{current}} = 29$。\n间隔为 $g_{1,2} = s_2 - e_{\\text{current}} - 1 = 25 - 29 - 1 = -5$。\n持续窗口为 $P=30$。合并的条件是 $g_{1,2} \\le P$，即 $-5 \\le 30$。这是成立的。\n因此，$E_2$ 与当前 era 合并。新的合并后的 era 从第一个区间的开始延伸到第二个区间的结束。\n更新后的 $Era_{\\text{current}}$ 变为 $[s_1, e_2] = [0, 54]$。\n\n现在，我们考虑下一个暴露区间 $E_3 = [90, 119]$。我们检查 $E_3$ 是否应与当前 era $Era_{\\text{current}} = [0, 54]$ 合并。\n$E_3$ 的开始日是 $s_3 = 90$，而 $Era_{\\text{current}}$ 的结束日是 $e_{\\text{current}} = 54$。\n间隔为 $g_{2,3} = s_3 - e_{\\text{current}} - 1 = 90 - 54 - 1 = 35$。\n我们检查合并条件：$g_{2,3} \\le P$，即 $35 \\le 30$。这是不成立的。\n由于 $35$ 天的间隔超过了 $30$ 天的持续窗口，$E_3$ 不与当前 era 合并。\n\n这意味着第一个药物 era 最终确定。其区间为 $Era_1 = [0, 54]$。\n一个新的药物 era, $Era_2$ 被启动，始于未合并的暴露区间 $E_3$。因此，$Era_2 = E_3 = [90, 119]$。\n由于没有更多的暴露记录，第二个药物 era $Era_2$ 也最终确定。\n\n最终产生的 `DRUG_ERA` 区间是：\n- $Era_1$：开始日 $0$，结束日 $54$。\n- $Era_2$：开始日 $90$，结束日 $119$。\n\n问题要求最终答案为一个包含四个数字 $(s_{Era1}, e_{Era1}, s_{Era2}, e_{Era2})$ 的单行矩阵。这些数字是 $(0, 54, 90, 119)$。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0  54  90  119\n\\end{pmatrix}\n}\n$$", "id": "4829283"}]}
## 引言
在现代医疗保健体系中，电子健康记录（EHR）已成为临床实践、研究和质量改进的核心。然而，EHR中蕴含的海量数据呈现出两种截然不同的形态：易于计算机处理的结构化数据和信息丰富但难以分析的非结构化数据。如何有效弥合这两种数据形态之间的鸿沟，充分释放临床叙述中隐藏的宝贵信息，是当前医疗信息学面临的关键挑战与核心机遇。本文旨在系统性地剖析结构化与非结构化临床数据的本质区别、内在联系及其在现实世界中的复杂权衡。

在接下来的内容中，我们将分三个章节展开探讨。首先，在“原理与机制”一章中，我们将深入定义结构化、半结构化与非结构化数据，揭示它们在[可计算性](@entry_id:276011)和[互操作性](@entry_id:750761)上的根本差异，并探讨实现数据结构化的核心技术。接着，在“应用与跨学科连接”一章中，我们将展示如何将这些原理应用于临床决策支持、计算表型分析等实际场景，并从决策理论、[质量保证](@entry_id:202984)、伦理治理等多个维度审视[数据融合](@entry_id:141454)的价值与挑战。最后，在“动手实践”部分，我们提供了一系列练习，旨在帮助您将理论知识应用于解决真实世界的数据分析问题。通过这一系列的学习，您将建立起对临床数据管理的全面而深入的理解。

## 原理与机制

在上一章的介绍之后，本章将深入探讨结构化与非结构化临床数据的核心原理与机制。我们将从基本定义出发，剖析这两种数据形态的内在属性，阐明它们在[可计算性](@entry_id:276011)、互操作性、数据质量和临床工作流程中扮演的不同角色，并揭示其背后的权衡与挑战。理解这些原理对于设计、实施和评估任何依赖于电子健康记录（EHR）数据的医疗信息系统至关重要。

### 临床数据的谱系：从结构化到非结构化

临床数据并非简单地二分为“结构化”或“非结构化”，而是在一个连续的谱系上分布。数据点的“结构性”程度取决于其在多大程度上受到预定义规则的约束。这些规则主要体现在两个层面：**语法约束**（syntactic constraints）和**语义约束**（semantic constraints）。

#### 定义结构化数据：[语法与语义](@entry_id:148153)的双重约束

最严格意义上的**结构化临床数据**（structured clinical data）必须同时满足两个条件：它遵循一个明确的、预定义的模式（schema），并且其临床概念被绑定到标准化的编码体系。

**语法结构**指的是数据被组织成离散、有类型的字段。例如，在[关系型数据库](@entry_id:275066)的一张表中，每一列都有明确的数据类型（如数字、日期、字符串）和约束。现代EHR中，一个遵循HL7 FHIR（Fast Healthcare Interoperability Resources）标准的`Observation`资源就是语法结构化的典范。它拥有诸如`status`、`code`、`valueQuantity`和`effectiveDateTime`等预定义字段，每个字段都期望特定类型的数据。

然而，仅有语法结构不足以支撑临床计算。**语义结构**——即数据的**意义**被明确、无[歧义](@entry_id:276744)地定义——更为关键。这通过将数据与**受控词表**（controlled vocabularies）或**本体论**（ontologies）中的标准代码进行绑定来实现。例如，一个血红蛋白检测结果不仅仅是文本“Hemoglobin”，而是被绑定到LOINC（Logical Observation Identifiers Names and Codes）的特定代码（如`718-7`）。一个诊断不仅仅是“心脏病发作”，而是被绑定到SNOMED CT（Systematized Nomenclature of Medicine—Clinical Terms）的特定概念标识符（如`22298006`）。这种语义编码使得计算机能够可靠地聚合、查询和推理数据，从而支持临床决策支持（CDS）等高级功能。[@problem_id:4857076]

与此相对，**非结构化数据**（unstructured data）则缺乏这种预定义的、机器可读的模式和编码绑定。典型的例子包括医生书写的病程记录、影像报告的描述部分、扫描的PDF文档以及语音转录文本。虽然这些数据对人类读者而言信息丰富且具有内在的语言结构，但对于计算机系统来说，它们本质上是一长串字符或像素，其内部的临床事实（如病程记录中提到的一句“potassium $3.6$”）并未被离散地捕获到专为该目的设计的字段中。[@problem_id:4857076]

#### 半结构化数据：一种中间形态

在结构化和非结构化这两个极端之间，存在着广阔的**半结构化数据**（semi-structured data）地带。这[类数](@entry_id:156164)据不完全符合[关系型数据库](@entry_id:275066)那样的严格模式，但又包含一些标签或标记来分离语义元素，提供一定的组织层次。其特点是语法约束中等，而语义约束则从弱到中等不等。[@problem_id:4857114]

一个典型的例子是HL7临床文档架构（Clinical Document Architecture, CDA）或一份包含标准章节标题（如“主诉”、“现病史”、“印象”）的放射学报告。这些文档有明确的标签（`Findings`、`Impression`），这提供了中等强度的语法约束。然而，在这些标签内部的内容通常是自由叙述的文本，缺乏进一步的结构。在这些半结构化文档中，对临床概念使用标准编码通常是可选的或仅部分实现。[@problem_id:4857114]

另一个常见的例子是EHR中的表单，例如系统回顾（Review of Systems）调查表。它可能包含一系列结构化的复选框（如“乏力：是/否”），这部分是结构化的。但同时，它可能还附带一个“备注”文本框，允许临床医生输入任意的自由文本。这个表单作为一个整体，由于混合了结构化字段和非结构化文本，因此最好被归类为半结构化数据。同样，一个带有LOINC编码、数值和单位的实验室结果，如果附加了一个由实验室技师填写的自由文本注释（如“标本溶血，请谨慎解读”），那么该记录整体也应被视为半结构化数据。[@problem_id:4857103]

### 结构化的力量：[可计算性](@entry_id:276011)与[互操作性](@entry_id:750761)

区分不同结构程度的数据之所以重要，是因为它直接决定了数据的**[可计算性](@entry_id:276011)**（computability）和**[互操作性](@entry_id:750761)**（interoperability）。

#### 确定性查询与概率性检索的根本差异

结构化与非结构化数据在计算处理上的根本区别在于**确定性**（determinism）与**概率性**（probabilism）的对立。

对于结构化数据，查询过程是确定性的。在一个[关系型数据库](@entry_id:275066)中，数据由元组（tuples）构成，每个元组都是属性到良定义域值的映射。查询（如SQL查询）本质上是一个基于一阶逻辑和集合论的谓词$Q(t)$。对于任何给定的元组$t$，谓词$Q(t)$的求值结果是明确的布尔值（真或假）。例如，查询“血糖值大于$180$ mg/dL”在一条血糖值为$200$ mg/dL的记录上，结果必然为真。因此，选择操作$\sigma_Q(R) = \{ t \in R \mid Q(t) = \text{true} \}$的结果完全由输入的数据集$R$和查询$Q$唯一确定。[@problem_id:4857104]

相比之下，从非结构化文本中提取信息本质上是一个概率性的过程。自然语言充满了**[歧义](@entry_id:276744)性**（ambiguity，如“MI”可以指心肌梗死或二尖瓣关闭不全）、**变异性**（variability，如“[高血糖](@entry_id:153925)”、“血糖偏高”是同义词）和**[上下文依赖](@entry_id:196597)性**（context-dependence，如“无高血糖症状”中的否定，“疑似[高血糖](@entry_id:153925)”中的不确定性）。因此，判断一段文本是否蕴含某个临床事实，无法通过简单的逻辑谓词完成。它需要一个从文本字符串到临床概念空间的映射$\phi: \Sigma^* \to \mathcal{C}$，这个映射本身就是一个充满不确定性的推理过程。信息检索（IR）和自然语言处理（NLP）系统通常返回一个按相关性排序的文档列表，其排序分数$f(q, d)$往往被解释为相关性的概率估计$P(R = 1 \mid q, d)$。因此，对非结构化数据的“查询”是在不确定证据下进行推断，其结果是概率性的，而非确定性的。[@problem_id:4857104]

#### 语义编码如何实现互操作性

[互操作性](@entry_id:750761)被定义为一个系统产生的消息能被另一个系统在无需人工干预的情况下准确理解其临床意义。语义编码，即使用唯一的概念标识符，是实现这一目标的核心机制。

我们可以通过一个简化的[概率模型](@entry_id:265150)来理解其原理。假设一个临床概念$C$可能是“心肌梗死”（$c_1$）或“二尖瓣关闭不全”（$c_2$）。在非结构化文本交换中，发送方可能对$c_1$使用“MI”或“myocardial infarction”的表述，而对$c_2$总是使用“MI”。由于“MI”这个缩写存在歧义，接收方面临不确定性。即使接收方有一个默认的解释规则（如总是将“MI”解释为$c_1$），当发送方的本意是$c_2$时，就会发生通信失败。这种不确定性可以用信息论中的**条件熵**$H(C \mid S)$来量化，其中$S$是观察到的文本。由于[歧义](@entry_id:276744)的存在，$H(C \mid S=\text{“MI”}) > 0$，表示在观察到“MI”后，关于原始概念$C$仍然存在不确定性。[@problem_id:4857077]

而通过结构化方法，每个概念都被赋予一个唯一的、共享的标识符（例如，在SNOMED CT中，$c_1 \mapsto 22298006$, $c_2 \mapsto 79619009$）。发送方直接传输这个标识符$ID$。由于概念与标识符之间是一一对应的关系，接收方可以通过反向查找准确无误地恢复原始概念。在这种情况下，观察到$ID$后，关于$C$的不确定性完全消除，即条件熵$H(C \mid ID) = 0$。系统间的沟通协议成功率达到$100\%$。因此，语义编码通过建立无歧义的[一对一映射](@entry_id:183792)，从根本上消除了由自然语言模糊性带来的[互操作性](@entry_id:750761)障碍。[@problem_id:4857077]

### 实现结构的机制

实现数据的结构化依赖于两方面的机制：用于编码意义的语义工具，以及用于组织数据的语法框架。

#### 语义支柱：受控词表与本体论

**受控词表**是一个经过整理和维护的术语集合，每个术语（概念）都有一个稳定的标识符和定义。**本体论**则更进一步，它不仅定义了概念，还明确地建模了概念之间的关系（如“is-a”、“part-of”），从而支持逻辑推理。在临床信息学中，几个关键的标准化资源扮演着语义支柱的角色：

*   **SNOMED CT (Systematized Nomenclature of Medicine—Clinical Terms)**：这是一个极其全面的、多层次的临床健康术语**本体论**。它的粒度非常细，旨在覆盖临床实践中几乎所有的概念，包括诊断、症状、操作、身体部位等。例如，它可以精确表示“急性下壁心肌梗死”。由于其丰富的关系网络，SNOMED CT是支持高级临床决策支持和详细临床记录的理想选择。[@problem_id:4857098]

*   **LOINC (Logical Observation Identifiers Names and Codes)**：这是一个专注于**检验、测量和观察**的词表。它为每个可测量的项目（如实验室检验、临床观察、问卷问题）提供一个唯一的代码。LOINC的目标是回答“测量的是什么？”这个问题，其代码的构成部分详细描述了分析物、标本类型、时间维度、系统和方法。[@problem_id:4857098]

*   **RxNorm**：这是一个专注于**药品**的词表，由美国国家医学图书馆开发。它为美国的临床药物提供标准化的名称和标识符。RxNorm的强大之处在于它能够以不同粒度表示药物，从单纯的成分（如“阿司匹林”）到具体的临床药品（如“阿司匹林 81毫克 咀嚼片”）。[@problem_id:4857098]

*   **ICD-10 (International Classification of Diseases, 10th Revision)**：与前三者不同，ICD-10主要是一个用于疾病和健康问题的**[统计分类](@entry_id:636082)系统**。它的主要用途是发病率和死亡率统计、[公共卫生监测](@entry_id:170581)以及医疗计费。因此，其粒度相对较粗，将相关的疾病归入有限的类别中，不适合用于精细的临床记录或实时决策支持。[@problem_id:4857098]

#### 语法框架：数据库模型

数据的语法结构由其存储方式决定。针对结构化和非结构化数据，业界发展出了不同的数据库模型。

对于结构化的临床事实（如患者人口统计学信息、实验室结果、生命体征），**规范化的关系型设计**（normalized relational design）是传统且有效的选择。规范化是一个数据库设计过程，旨在通过将数据组织到多个独立的、实体特异性的表中来最小化[数据冗余](@entry_id:187031)并增强[数据完整性](@entry_id:167528)。例如，患者的姓名和出生日期应只存储在“患者”表中一次，而不是在每次的“实验室结果”记录中都重复。表之间通过主键和外键建立**参照完整性**（referential constraints）。查询时，通过`JOIN`操作将这些表重新组合起来，以获取所需的信息。[@problem_id:4857105]

对于非结构化的临床数据，如长篇的叙述性病历，将其硬塞进[关系型数据库](@entry_id:275066)的行列结构中既不自然也效率低下。为此，**面向文档的数据库**（document-oriented database），一种NoSQL数据库，提供了更好的解决方案。在这种模型中，每份临床记录（如一份完整的病程记录）可以被存储为一个自包含的**文档**（通常是JSON或XML格式）。这种模型的优势在于其**灵活的模式**：同一个集合中的不同文档可以有不同的结构，非常适合内容多变的叙述性文本。查询不再依赖于跨表连接，而是通过对文档内部字段建立索引，尤其是针对文本内容的**全文检索引擎**，来实现高效的内容检索。[@problem_id:4857105]

### 现实世界的权衡与挑战

尽管结构化数据在计算上具有明显优势，但在真实的临床环境中，数据捕获方式的选择充满了复杂的权衡，并对数据质量和下游应用产生深远影响。

#### 临床医生的视角：认知负荷与文档负担

在EHR设计中，一个核心的冲突点在于临床医生的**认知负荷**（cognitive load）和**文档负担**（documentation burden）。

根据认知负荷理论，人的工作记忆容量有限。**认知负荷**指执行任务时对工作记忆的需求。它可分为源于任务本身复杂性的**内在负荷**，源于界面设计和工作流程的**外在负荷**，以及用于学习和构建心智模型的**切题负荷**。**文档负担**则是指为了满足临床、法律、计费和报告等所有需求，在整个工作流程中创建、维护和修正文档所需付出的累积时间、精力和注意力，这包括即时的录入时间以及后续使数据可用所需的下游工作。[@problem_id:4857066]

*   **结构化模板（如Prototype S）**：这种方法通过下拉菜单、复选框和多屏导航强制用户输入编码数据。这极大地增加了**外在认知负荷**，因为医生需要花费大量精力在搜索、点击和界面导航上，而非专注于临床思考。然而，这种“前端重”的模式产生了立即可用的、高质量的编码数据，极大地**降低了下游负担**，因为临床决策支持和质量报告可以直接、可靠地使用这些数据。

*   **自由文本叙述（如Prototype F）**：这种方法允许医生通过口述等更自然的方式记录，显著**降低了即时的外在认知负荷**和文档撰写负担。但这种“前端轻”的模式将工作负担转移到了下游。由于NLP的性能可变且可能出错，从文本中提取的结构化数据需要人工审核和验证，这**增加了巨大的下游负担**。[@problem_id:4857066]

因此，在需要可靠编码数据以支持报告和CDS的环境中，尽管结构化模板在单次录入时感觉更“重”，但从整个系统的总负担来看，它可能比自由文本更为高效。

#### 研究者的视角：数据质量与偏倚

当EHR数据用于研究时，评估其质量并理解潜在的偏倚至关重要。结构化和非结构化数据在这些方面表现出不同的特征。

首先，我们需要一个多维度框架来评估**[数据质量](@entry_id:185007)**：

*   **完整性（Completeness）**：衡量观测到的信息与预期信息的符合程度。对于结构化数据，这可以量化为必填字段的非空率。对于非结构化数据，则是一个语义概念，衡量一份记录是否包含了所有临床上应有的关键概念。[@problem_id:4857094]
*   **准确性（Accuracy）**：衡量数据与“真实世界”的接近程度。对结构化数据，可通过与黄金标准（如疾病登记库）比对来评估。对非结构化数据，则通常通过将NLP提取结果与专家手动标注的文本进行比较来评估。[@problem_id:4857094]
*   **一致性（Consistency）**：衡量数据对约束的遵守和表征的统一性。这不仅包括格式一致，还包括跨系统、跨词表的语义一致性。
*   **时效性（Timeliness）**：衡量数据记录时间与真实事件发生时间之间的时间差$T = t_r - t_e$。这个定义对两[类数](@entry_id:156164)据都适用，但通常自动采集的结构化数据（如生命体征）时效性更好，而需要转录的非结构化记录延迟更长。[@problem_id:4857094]
*   **出处（Provenance）**：记录数据的来源、转换和血缘关系。对非结构化数据，其出处链条往往更复杂，可能包括口述系统、语音识别引擎版本、NLP流水线版本等。[@problem_id:4857094]

其次，研究者必须警惕EHR数据中固有的**偏倚**（bias）：

*   **选择偏倚（Selection Bias）**：当研究样本的纳排标准与研究变量或结局相关时发生，导致样本不能代表目标人群。在结构化数据中，这常由基于特定ICD编码的队列定义引起。在非结构化数据中，如果病历记录的有無或详略程度与疾病严重性相关，也可能引入选择偏倚。[@problem_id:4857110]
*   **测量偏倚（Measurement Bias）**：指对变量的测量存在系统性误差。在结构化数据中，例子包括为了更高报销而进行的“向上编码”（upcoding）、仪器校准错误等。在非结构化数据中，NLP算法系统性地忽略否定词、误解缩写或在特定人群中表现不佳，是测量偏倚的主要来源。[@problem_id:4857110]
*   **文档偏倚（Documentation Bias）**：这是一个更上游的过程，指临床记录行为本身并非中立的，而是受到临床医生、工作流程和激励机制等多种因素影响。医生选择记录什么、忽略什么、使用何种措辞（如模糊用语），以及“复制粘贴”行为，都塑造了最终的记录，使其可能偏离患者的真实状态。这种偏倚在自由文本叙述中尤为突出，但也影响着结构化字段的选择性使用。[@problem_id:4857110]

综上所述，结构化与非结构化临床数据并非优劣之分，而是一个复杂的权衡。结构化数据为机器计算提供了坚实的基础，但可能以增加临床医生负担和牺牲部分临床细节为代价。非结构化[数据保留](@entry_id:174352)了丰富的叙事性和灵活性，但其计算利用依赖于不完美的概率性工具，并给[数据质量](@entry_id:185007)和偏倚的控制带来了独特的挑战。在医疗信息学实践中，未来的方向在于如何智能地结合两者，最大化数据价值，同时最小化人为负担和系统性误差。
{"hands_on_practices": [{"introduction": "SCARA（选择性顺应装配机械手臂）机器人是实验室自动化中常见的平台。为了精确控制它，我们必须首先理解其基本的运动能力和固有的局限性。本练习将引导你从第一性原理出发，推导关节运动与移液管尖端位置之间的数学关系（即正向运动学），并识别出“奇异点”——即机器人丧失灵活性的特定构型，这对于在微孔板上方进行精细操作时必须予以规避 [@problem_id:5128089]。", "problem": "在分子和免疫诊断中，用于高通量酶联免疫吸附测定（ELISA）板处理的一种三自由度移液机器人是选择顺应性装配机械臂（SCARA）。其运动学结构包括两个用于平面定位的共面旋转关节和一个用于接近与缩回的垂直移动关节。末端执行器是一个垂直定向的移液管吸头，其方向相对于基坐标系是固定的。基坐标系的定义为：实验台是由 $x$ 轴和 $y$ 轴张成的平面， $z$ 轴指向上方。设广义坐标为 $q = [\\theta_{1}, \\theta_{2}, d_{3}]^{\\top}$，其中 $\\theta_{1}$ 和 $\\theta_{2}$ 分别是长度为 $l_{1}$ 和 $l_{2}$ 的连杆的旋转关节角度， $d_{3}$ 是垂直移动关节的伸长量（向上为正）。假设工具头相对于连杆2的末端没有偏移，并忽略顺应性和齿隙。移液管吸头的任务空间位置为 $p = [x, y, z]^{\\top}$。仅使用核心运动学定义，即正向位置运动学由刚性连杆组合产生，且解析雅可比矩阵 $J(q)$ 是偏导数矩阵 $J(q) = \\frac{\\partial p}{\\partial q}$，使得 $\\dot{p} = J(q)\\,\\dot{q}$，完成以下任务：\n- 从第一性原理出发，为该SCARA几何结构推导正向位置运动学 $p(q)$。\n- 从 $p(q)$ 推导出解析雅可比矩阵 $J(q)$，该矩阵将关节速率映射到实验室坐标系中移液管吸头的线性速度。\n- 使用你得到的 $J(q)$，找出所有导致 $x$–$y$ 平面内瞬时机动性丧失的运动学奇异点的关节构型，并解释此类奇异点对微孔位置附近的精确移液管放置和速度控制有何影响。\n\n最终答案请提供位置雅可比矩阵行列式 $\\det(J(q))$ 的闭式解析表达式，用符号 $l_{1}$、 $l_{2}$、 $\\theta_{1}$ 和 $\\theta_{2}$ 表示。最终答案中不要包含单位。不需要进行数值计算或四舍五入。", "solution": "问题陈述经评估有效。它在科学上基于刚体运动学原理，定义完整且一致，问题提出得当，并以客观、正式的语言表述。该问题是机器人学中的一个标准练习，与实验室自动化这一特定主题直接相关。因此，我们可以着手求解。\n\n任务是为一个三自由度SCARA机器人推导正向位置运动学，计算其解析雅可比矩阵，并分析其运动学奇异点。广义坐标给定为 $q = [\\theta_{1}, \\theta_{2}, d_{3}]^{\\top}$，任务空间坐标为 $p = [x, y, z]^{\\top}$。该机器人由两个在 $x$-$y$ 平面内运动的旋转关节（连杆长度为 $l_{1}$ 和 $l_{2}$）和一个沿 $z$ 轴运动的移动关节（伸长量为 $d_{3}$）组成。\n\n**1. 正向位置运动学 $p(q)$**\n\n末端执行器（移液管吸头）的位置由各连杆位置的矢量和确定。SCARA机器人的几何结构将平面定位与垂直定位解耦。\n\n$x$-$y$ 平面内的位置由两个旋转关节确定。第一个连杆长度为 $l_{1}$，相对于 $x$ 轴旋转角度为 $\\theta_{1}$。第一个连杆末端（即第二个关节的位置）的坐标为：\n$$\nx_{j2} = l_{1} \\cos(\\theta_{1})\n$$\n$$\ny_{j2} = l_{1} \\sin(\\theta_{1})\n$$\n第二个连杆长度为 $l_{2}$，相对于第一个连杆旋转角度为 $\\theta_{2}$。因此，其相对于 $x$ 轴的绝对角度为 $\\theta_{1} + \\theta_{2}$。末端执行器相对于第二个关节的位置为：\n$$\nx_{rel} = l_{2} \\cos(\\theta_{1} + \\theta_{2})\n$$\n$$\ny_{rel} = l_{2} \\sin(\\theta_{1} + \\theta_{2})\n$$\n移液管吸头的总 $x$ 和 $y$ 坐标是两个连杆分量的和：\n$$\nx(\\theta_{1}, \\theta_{2}) = l_{1} \\cos(\\theta_{1}) + l_{2} \\cos(\\theta_{1} + \\theta_{2})\n$$\n$$\ny(\\theta_{1}, \\theta_{2}) = l_{1} \\sin(\\theta_{1}) + l_{2} \\sin(\\theta_{1} + \\theta_{2})\n$$\n垂直位置 $z$ 完全由移动关节的伸长量 $d_{3}$ 确定。假设该关节的基座位于 $z=0$ 处，我们有：\n$$\nz(d_{3}) = d_{3}\n$$\n综合这些结果，得到正向位置运动学函数 $p(q)$：\n$$\np(q) = \\begin{pmatrix} x \\\\ y \\\\ z \\end{pmatrix} = \\begin{pmatrix} l_{1} \\cos(\\theta_{1}) + l_{2} \\cos(\\theta_{1} + \\theta_{2}) \\\\ l_{1} \\sin(\\theta_{1}) + l_{2} \\sin(\\theta_{1} + \\theta_{2}) \\\\ d_{3} \\end{pmatrix}\n$$\n\n**2. 解析雅可比矩阵 $J(q)$**\n\n解析雅可比矩阵 $J(q)$ 根据关系式 $\\dot{p} = J(q)\\,\\dot{q}$ 将关节速度 $\\dot{q}$ 映射到末端执行器的线性速度 $\\dot{p}$。它被定义为正向运动学函数 $p(q)$ 相对于关节变量 $q = [\\theta_{1}, \\theta_{2}, d_{3}]^{\\top}$ 的偏导数矩阵。该雅可比矩阵是一个 $3 \\times 3$ 的矩阵。\n$$\nJ(q) = \\frac{\\partial p}{\\partial q} = \\begin{pmatrix} \\frac{\\partial x}{\\partial \\theta_{1}}  \\frac{\\partial x}{\\partial \\theta_{2}}  \\frac{\\partial x}{\\partial d_{3}} \\\\ \\frac{\\partial y}{\\partial \\theta_{1}}  \\frac{\\partial y}{\\partial \\theta_{2}}  \\frac{\\partial y}{\\partial d_{3}} \\\\ \\frac{\\partial z}{\\partial \\theta_{1}}  \\frac{\\partial z}{\\partial \\theta_{2}}  \\frac{\\partial z}{\\partial d_{3}} \\end{pmatrix}\n$$\n我们计算每个偏导数：\n\n关于 $\\theta_1$ 的导数：\n$$\n\\frac{\\partial x}{\\partial \\theta_{1}} = -l_{1} \\sin(\\theta_{1}) - l_{2} \\sin(\\theta_{1} + \\theta_{2})\n$$\n$$\n\\frac{\\partial y}{\\partial \\theta_{1}} = l_{1} \\cos(\\theta_{1}) + l_{2} \\cos(\\theta_{1} + \\theta_{2})\n$$\n$$\n\\frac{\\partial z}{\\partial \\theta_{1}} = 0\n$$\n\n关于 $\\theta_2$ 的导数：\n$$\n\\frac{\\partial x}{\\partial \\theta_{2}} = -l_{2} \\sin(\\theta_{1} + \\theta_{2})\n$$\n$$\n\\frac{\\partial y}{\\partial \\theta_{2}} = l_{2} \\cos(\\theta_{1} + \\theta_{2})\n$$\n$$\n\\frac{\\partial z}{\\partial \\theta_{2}} = 0\n$$\n\n关于 $d_3$ 的导数：\n$$\n\\frac{\\partial x}{\\partial d_{3}} = 0\n$$\n$$\n\\frac{\\partial y}{\\partial d_{3}} = 0\n$$\n$$\n\\frac{\\partial z}{\\partial d_{3}} = 1\n$$\n\n将这些分量组合成雅可比矩阵，得到：\n$$\nJ(q) = \\begin{pmatrix} -l_{1} \\sin(\\theta_{1}) - l_{2} \\sin(\\theta_{1} + \\theta_{2})  -l_{2} \\sin(\\theta_{1} + \\theta_{2})  0 \\\\ l_{1} \\cos(\\theta_{1}) + l_{2} \\cos(\\theta_{1} + \\theta_{2})  l_{2} \\cos(\\theta_{1} + \\theta_{2})  0 \\\\ 0  0  1 \\end{pmatrix}\n$$\n\n**3. 运动学奇异点及其影响**\n\n运动学奇异点是指雅可比矩阵 $J(q)$ 秩亏的关节构型 $q$。对于方阵，这发生在它的行列式为零时，即 $\\det(J(q)) = 0$。在这样的构型下，机器人失去了在任务空间中以完整维度移动其末端执行器的能力。\n\n我们使用沿第三行的代数余子式展开来计算 $J(q)$ 的行列式：\n$$\n\\det(J(q)) = 1 \\cdot \\det \\begin{pmatrix} -l_{1} \\sin(\\theta_{1}) - l_{2} \\sin(\\theta_{1} + \\theta_{2})  -l_{2} \\sin(\\theta_{1} + \\theta_{2}) \\\\ l_{1} \\cos(\\theta_{1}) + l_{2} \\cos(\\theta_{1} + \\theta_{2})  l_{2} \\cos(\\theta_{1} + \\theta_{2}) \\end{pmatrix}\n$$\n$$\n\\det(J(q)) = (-l_{1} \\sin(\\theta_{1}) - l_{2} \\sin(\\theta_{1} + \\theta_{2}))(l_{2} \\cos(\\theta_{1} + \\theta_{2})) - (-l_{2} \\sin(\\theta_{1} + \\theta_{2}))(l_{1} \\cos(\\theta_{1}) + l_{2} \\cos(\\theta_{1} + \\theta_{2}))\n$$\n展开乘积：\n$$\n\\det(J(q)) = [-l_{1}l_{2} \\sin(\\theta_{1})\\cos(\\theta_{1}+\\theta_{2}) - l_{2}^{2} \\sin(\\theta_{1}+\\theta_{2})\\cos(\\theta_{1}+\\theta_{2})] - [-l_{1}l_{2} \\sin(\\theta_{1}+\\theta_{2})\\cos(\\theta_{1}) - l_{2}^{2} \\sin(\\theta_{1}+\\theta_{2})\\cos(\\theta_{1}+\\theta_{2})]\n$$\n包含 $l_{2}^{2}$ 的项相互抵消：\n$$\n\\det(J(q)) = l_{1}l_{2} \\sin(\\theta_{1}+\\theta_{2})\\cos(\\theta_{1}) - l_{1}l_{2} \\sin(\\theta_{1})\\cos(\\theta_{1}+\\theta_{2})\n$$\n提取公因式 $l_{1}l_{2}$：\n$$\n\\det(J(q)) = l_{1}l_{2} ( \\sin(\\theta_{1}+\\theta_{2})\\cos(\\theta_{1}) - \\cos(\\theta_{1}+\\theta_{2})\\sin(\\theta_{1}) )\n$$\n这个表达式与正弦差角恒等式 $\\sin(A-B) = \\sin(A)\\cos(B) - \\cos(A)\\sin(B)$ 相符，其中 $A = \\theta_{1}+\\theta_{2}$ 且 $B = \\theta_{1}$。因此：\n$$\n\\det(J(q)) = l_{1}l_{2} \\sin((\\theta_{1}+\\theta_{2}) - \\theta_{1}) = l_{1}l_{2} \\sin(\\theta_{2})\n$$\n奇异点条件 $\\det(J(q))=0$ 在 $l_{1}l_{2} \\sin(\\theta_{2}) = 0$ 时满足。由于连杆长度 $l_{1}$ 和 $l_{2}$ 是非零的物理量，这可以简化为 $\\sin(\\theta_{2}) = 0$。这发生在关节构型为 $\\theta_{2} = k\\pi$ （其中 $k$ 为任意整数）时。在实践中，这对应于两种主要构型：\n1.  $\\theta_{2} = 0$：机械臂完全伸展，两个连杆对齐。这是“肘部向外”的构型，它定义了机器人在平面内可达工作空间的外边界。\n2.  $\\theta_{2} = \\pi$（或 $-\\pi$）：机械臂完全折回，第二个连杆折叠在第一个连杆上。这是“肘部向内”的构型，它定义了工作空间的内边界。\n\n**对移液管放置和速度控制的影响：**\n问题陈述正确地指出，奇异点会导致 $x$-$y$ 平面内瞬时机动性的丧失。当 $\\sin(\\theta_{2}) = 0$ 时，雅可比矩阵中对应于平面运动的 $2 \\times 2$ 子矩阵变为奇异矩阵。这意味着在 $x$-$y$ 平面内的某些运动方向变得无法瞬时实现。从物理上看，当两个连杆共线时（$\\theta_{2} = 0$ 或 $\\theta_{2} = \\pi$），任何瞬时的关节运动都会导致末端执行器产生垂直于对齐连杆的运动。机器人无法在径向方向（即对齐连杆的方向）上产生速度分量。\n\n对于将移液管精确放置到微孔中的任务，这会带来严重的后果：\n- **无界关节速度：** 在奇异点附近操作时，逆雅可比矩阵 $J^{-1}(q)$ 会变得病态，因为它涉及除以一个接近于零的行列式值 $\\det(J(q)) \\approx 0$。该逆矩阵将期望的笛卡尔速度与所需的关节速度关联起来（$\\dot{q} = J^{-1}(q)\\dot{p}$）。为了在微孔上方实现哪怕是很小的受控速度，控制器也会指令输出极大甚至无法实现的关节速度。这会导致执行器饱和、运动抖动和位置精度丧失。\n- **路径跟踪失败：** 任何穿越奇异构型的 $x$-$y$ 平面内的期望直线路径，机器人都无法精确跟随。机器人的控制系统将无法跟踪该路径，导致显著的偏差。这种偏差可能导致移液管完全错过微孔、与孔板碰撞、损坏吸头或造成样品交叉污染——所有这些在诊断分析中都是不可接受的失败。\n- **控制不稳定性：** 在奇异点附近产生的高关节速度和力会引起机器人结构的振动和不稳定性，从而进一步损害移液所需的精度。\n\n因此，为了在ELISA自动化系统中实现可靠操作，必须规划好机器人的工作空间，以确保所有在微孔板上方的移液操作都发生在远离这些奇异构型的区域。\n\n最终要求回答的是雅可比矩阵行列式的符号表达式。", "answer": "$$\\boxed{l_{1} l_{2} \\sin(\\theta_{2})}$$", "id": "5128089"}, {"introduction": "在精确控制的基础上，下一个关键问题是如何验证这种精确性。准确度（偏倚）和精密度（变异系数，CV）是仪器验证的基石。本练习模拟了一个为自动化液体处理工作站设计验收测试的真实场景，要求你运用严谨的统计学原理，以高置信度确保仪器的性能符合诊断标准 [@problem_id:5128078]。", "problem": "一台自动化的$12$通道液体处理机器人正在进行资格认证，用于分子诊断工作流程中的定量聚合酶链式反应 (qPCR) 样品制备，该流程要求每个通道的移液量为$20\\,\\mu\\text{L}$。质量保证团队必须使用变异系数 (CV) 和系统误差 (偏倚) 的阈值来设计验收标准，以确保如果仪器被验收，则至少有$95\\%$的置信度表明其真实的随机不精密度和真实的系统误差符合规定的限值。变异系数 (CV) 定义为标准差与均值的比值，偏倚定义为真实均值与标称目标体积的偏差。阈值为：CV $\\le 2.0\\%$ 且绝对相对偏倚 $\\le 1.0\\%$。测试方案测量了$n_c$个通道中每个通道的$m$次重复移液，总共进行了$N = n_c \\times m$次移液，并假设移液误差是独立的且近似服从正态分布，所有通道在相同方法下的表现相似，并且测量仪器的误差相对于移液的可变性可以忽略不计。\n\n在这些条件下，请选择一个正确规定了验收标准的设计，该设计能保证 CV 和偏倚两项指标的置信度至少为$95\\%$，同时为多通道移液器提供科学合理的最小样本量。每个选项都规定了$(n_c, m)$和决策规则。请选择唯一的最佳选项。\n\nA. 使用 $n_c = 12$ 和 $m = 2$ ($N = 24$)。如果观测到的样本 CV (基于所有$N$次移液计算) $\\le 2.0\\%$ 且观测到的绝对相对偏倚 $|\\bar{x} - v_0|/v_0 \\le 1.0\\%$（其中 $v_0 = 20\\,\\mu\\text{L}$），则验收该仪器，仅使用点估计，不应用置信界。\n\nB. 使用 $n_c = 12$ 和 $m = 3$ ($N = 36$)。如果均值的单侧$95\\%$置信界显示绝对相对偏倚 $\\le 1.0\\%$，并且观测到的样本 CV $\\le 2.0\\%$, 则验收该仪器；仅对偏倚应用置信界，不对 CV 应用。\n\nC. 使用 $n_c = 12$ 和 $m = 5$ ($N = 60$)。如果单侧$97.5\\%$置信界显示 CV $\\le 2.0\\%$，并且均值的双侧$95\\%$置信区间完全包含在 $[v_0(1 - 1.0\\%),\\, v_0(1 + 1.0\\%)]$ 内，则验收该仪器。\n\nD. 使用 $n_c = 12$ 和 $m = 5$ ($N = 60$)。如果同时满足以下两点，则验收该仪器：(i) 通过结合标准差的置信上限和均值的置信下限构建的单侧$97.5\\%$置信界显示 CV $\\le 2.0\\%$；(ii) 两个关于均值的单侧$97.5\\%$置信界证明绝对相对偏倚 $\\le 1.0\\%$（等效地，要求单侧$97.5\\%$的下界和上界都位于 $[v_0(1 - 1.0\\%),\\, v_0(1 + 1.0\\%)]$ 内）。通过证明置信界膨胀因子足够小，使得对于真正满足阈值的仪器来说验收是可行的，同时确保联合置信度至少为$95\\%$，来证明 $N = 60$ 的合理性。", "solution": "该问题要求为一台液体处理机器人设计一个验收测试方案。该方案必须提供至少$95\\%$的置信度，以确保真实的性能参数——系统误差（偏倚）和随机不精密度（变异系数，CV）——同时满足各自的规格要求。\n\n**1. 问题分解与统计公式化**\n\n设移液体积为来自正态分布的随机变量，其真实均值为 $\\mu$，真实标准差为 $\\sigma$。标称目标体积为 $v_0 = 20\\,\\mu\\text{L}$。\n\n真实参数的两个性能标准是：\n1.  **绝对相对偏倚**：真实均值 $\\mu$ 必须在标称体积 $v_0$ 的 $1.0\\%$ 范围内。\n    $$ \\frac{|\\mu - v_0|}{v_0} \\le 0.01 $$\n    这是一个双侧标准。代入 $v_0 = 20\\,\\mu\\text{L}$，我们得到：\n    $$ |\\mu - 20| \\le 0.01 \\times 20 \\implies |\\mu - 20| \\le 0.2 $$\n    $$ 19.8\\,\\mu\\text{L} \\le \\mu \\le 20.2\\,\\mu\\text{L} $$\n\n2.  **变异系数 (CV)**：真实 CV，定义为 $\\sigma/\\mu$，不得超过 $2.0\\%$。\n    $$ \\text{CV} = \\frac{\\sigma}{\\mu} \\le 0.02 $$\n    这是一个单侧标准。\n\n核心要求是基于 $N=n_c \\times m$ 次测量的样本建立一个决策规则，以保证两个标准同时满足的联合置信水平至少为$95\\%$。设 $C_1$ 为偏倚标准被满足的事件，$C_2$ 为 CV 标准被满足的事件。我们需要一个程序，使得如果仪器通过测试，我们能以至少$95\\%$的置信度断定 $C_1$ 和 $C_2$ 都为真。\n\n**2. 联合置信度与Bonferroni校正**\n\n设偏倚的统计检验提供 $1-\\alpha_1$ 的置信度，CV 的检验提供 $1-\\alpha_2$ 的置信度。两个结论都正确的联合置信度由 Bonferroni 不等式给出：\n$$ P(C_1 \\cap C_2) \\ge (1-\\alpha_1) + (1-\\alpha_2) - 1 = 1 - (\\alpha_1 + \\alpha_2) $$\n为确保联合置信度至少为$95\\%$（即 $1 - 0.05$），我们必须有 $\\alpha_1 + \\alpha_2 \\le 0.05$。一个标准且稳健的方法是将可接受的错误概率在两个检验之间平均分配，设定 $\\alpha_1 = 0.025$ 和 $\\alpha_2 = 0.025$。这意味着我们必须以$97.5\\%$的置信度来检验每个标准。\n\n**3. 偏倚的统计检验**\n\n为了有$97.5\\%$的置信度确定 $19.8 \\le \\mu \\le 20.2$，我们必须在显著性水平 $\\alpha = 0.025$ 下执行双单侧检验 (TOST) 程序。这涉及到检验两个原假设：\n- $H_{01}: \\mu \\le 19.8\\,\\mu\\text{L}$\n- $H_{02}: \\mu \\ge 20.2\\,\\mu\\text{L}$\n\n我们必须在 $\\alpha = 0.025$ 的水平上拒绝 $H_{01}$ 和 $H_{02}$，才能以 $1 - \\alpha = 97.5\\%$ 的置信度断定 $\\mu$ 位于两个限值之间。这个程序等同于计算 $\\mu$ 的一个 $(1 - 2\\alpha) = (1 - 2 \\times 0.025) = 95\\%$ 双侧置信区间，并检查它是否完全包含在验收区间 $(19.8, 20.2)$ 内。$\\mu$ 的 $95\\%$ 置信区间由下式给出：\n$$ \\left[ \\bar{x} - t_{0.025, N-1} \\frac{s}{\\sqrt{N}}, \\quad \\bar{x} + t_{0.025, N-1} \\frac{s}{\\sqrt{N}} \\right] $$\n其中 $\\bar{x}$ 是样本均值，$s$ 是样本标准差，$t_{0.025, N-1}$ 是自由度为 $N-1$ 的t分布中对应于$97.5\\%$累积概率的临界值。\n\n**4. CV的统计检验**\n\n为了有$97.5\\%$的置信度确定 $\\text{CV} = \\sigma/\\mu \\le 0.02$，我们必须构建一个 CV 的单侧置信上限（我们称之为 $U_{\\text{CV}}$），其置信度为$97.5\\%$，并检查是否 $U_{\\text{CV}} \\le 0.02$。\n由于 $\\text{CV}$ 是两个参数的比值，其置信区间不是初等的。一种严谨且通常保守的方法是通过组合分子 ($\\sigma$) 的单侧置信上限和分母 ($\\mu$) 的单侧置信下限来构建该界限。\n$$ U_{\\text{CV}} = \\frac{U_{\\sigma}}{L_{\\mu}} $$\n为了获得 $U_{\\text{CV}}$ 的整体$97.5\\%$置信度，我们必须再次应用 Bonferroni 类型的校正。例如，我们可以组合一个 $\\sigma$ 的 $98.75\\%$ 置信上限（误差 $\\alpha_\\sigma = 0.0125$）和一个 $\\mu$ 的 $98.75\\%$ 置信下限（误差 $\\alpha_\\mu = 0.0125$）。所得比值界限的置信度至少为 $1 - (\\alpha_\\sigma + \\alpha_\\mu) = 1 - 0.025 = 97.5\\%$。\n所需的界限是：\n- $U_{\\sigma} = s \\sqrt{\\frac{N-1}{\\chi^2_{1-0.9875, N-1}}}$（$\\sigma$ 的 $98.75\\%$ 置信上限）\n- $L_{\\mu} = \\bar{x} - t_{0.0125, N-1} \\frac{s}{\\sqrt{N}}$（$\\mu$ 的 $98.75\\%$ 置信下限）\n\n**5. 选项评估**\n\n**A. 使用 $n_c = 12$ 和 $m = 2$ ($N = 24$)。 ...仅使用点估计...**\n这种方法存在根本性缺陷。它将样本统计量（$\\bar{x}$ 和样本CV）直接与总体参数限值进行比较。这完全忽略了抽样误差，因此无法提供任何关于真实参数满足规格的统计置信度。一台“好”仪器可能因为偶然性而未通过测试，而一台“坏”仪器可能通过测试。\n**结论：不正确。**\n\n**B. 使用 $n_c = 12$ 和 $m = 3$ ($N = 36$)。 ...仅对偏倚应用置信界，不对 CV 应用。**\n这比A有所改进，但仍然不够。它没有对 CV 应用置信界，而是依赖于点估计。此外，它对偏倚的处理（“一个单侧$95\\%$置信界”）对于一个双侧规格来说是不正确的。它未能满足确保对*两个*标准都有置信度的要求。\n**结论：不正确。**\n\n**C. 使用 $n_c = 12$ 和 $m = 5$ ($N = 60$)。如果单侧$97.5\\%$置信界显示 CV $\\le 2.0\\%$，并且均值的双侧$95\\%$置信区间完全包含在 $[v_0(1 - 1.0\\%),\\, v_0(1 + 1.0\\%)]$ 内，则验收该仪器。**\n该选项正确地确定了统计程序。对于 CV，它要求一个$97.5\\%$的置信界（$\\alpha_{CV} = 0.025$）。对于偏倚，它使用了一个等效于 $\\alpha_{bias} = 0.05$ 的 TOST 程序（因为一个 $95\\%$ CI 对应于在 $\\alpha=0.05$ 下的 TOST，产生$95\\%$的置信度）。根据 Bonferroni 不等式，总的错误概率为 $\\alpha_1 + \\alpha_2 = 0.05 + 0.025 = 0.075$。因此，保证的联合置信度仅为 $1 - 0.075 = 92.5\\%$，这低于所要求的$95\\%$。\n**结论：不正确。**\n\n**D. 使用 $n_c = 12$ 和 $m = 5$ ($N = 60$)。如果同时满足以下两点，则验收该仪器：(i) 通过结合标准差的置信上限和均值的置信下限构建的单侧$97.5\\%$置信界显示 CV $\\le 2.0\\%$；(ii) 两个关于均值的单侧$97.5\\%$置信界证明绝对相对偏倚 $\\le 1.0\\%$。**\n该选项描述了一个完全正确的统计方案。\n(i) **CV 检验**：它要求一个$97.5\\%$的 CV 置信上限（$\\alpha_{CV} = 0.025$），并正确地指出了其构建原理。\n(ii) **偏倚检验**：“两个单侧$97.5\\%$置信界”的表述虽然略显笨拙，但最终正确地描述了在 $\\alpha = 0.025$ 水平下的 TOST 程序。该程序能得出真实均值在规定限值内的置信度为$97.5\\%$（$\\alpha_{bias} = 0.025$）。\n总的错误概率为 $\\alpha_{CV} + \\alpha_{bias} = 0.025 + 0.025 = 0.05$。该方案成功地保证了至少 $1 - 0.05 = 95\\%$ 的联合置信度。\n$N=60$ 的理由也是合理的。足够大的样本量是必要的，以使置信区间足够窄（即保持置信界膨胀因子较小），从而使真正符合规格的仪器有很高的概率通过测试。较小的 $N$ 会导致更宽的区间，从而大大增加错误地拒绝一台好仪器（生产者风险）的风险。对于这类验证，$N=60$ 代表了一个合理的平衡。\n**结论：正确。**", "answer": "$$\\boxed{D}$$", "id": "5128078"}, {"introduction": "从单个仪器的性能，我们转向整个集成系统的可靠性。在高通量环境中，故障在所难免，一个稳健的系统必须能够优雅地从中恢复。本练习呈现了一个现实的故障场景（网络连接中断），挑战你设计一个恢复策略，该策略需优先保证数据完整性（运用ACID等概念）并最大限度地减少操作中断，从而在风险与效率之间取得平衡 [@problem_id:5128077]。", "problem": "一个集成的高通量化学发光免疫分析（CLIA）流水线使用机械臂和微孔板分析仪处理微孔板。该分析仪根据预加载的方法自主执行孵育、洗涤和读数步骤，并通过以太网将带有签名的事件日志和孔板结果流式传输到实验室信息管理系统（LIMS；Laboratory Information Management System）。为了保证弹性，该分析仪还将相同的事件日志作为循环缓冲区写入非易失性内部存储中。LIMS协调器通过将每个孔视为独立的事务来强制执行原子性、一致性、隔离性和持久性（ACID；Atomicity, Consistency, Isolation, Durability）语义，采用预写日志，并且仅在收到经分析仪确认并带有循环冗余校验（CRC；Cyclic Redundancy Check）验证的结果和事件元数据后才进行提交。\n\n在运行中途，分析仪的网络连接中断。分析仪在没有远程控制的情况下继续执行程序设定的分析，而由于互锁机制，机械臂停止了与分析仪的任何交互。协调器必须决定一种恢复策略，以保护数据完整性并最大限度地减少整个流水线的分析中断。\n\n假设以下经过充分测试的基本事实和模型：\n- 分析仪的内部循环缓冲区容量为 $B$ 个事件，在活动运行期间以大约恒定的速率 $r$ 事件/分钟累积分析仪事件。溢出将导致尚未同步的最旧事件丢失。\n- 网络停机时间 $T$ 可以用速率参数为 $\\lambda$ 的指数分布（一种无记忆故障恢复模型）来建模，因此停机时间超过阈值 $t$ 的概率为 $P(T  t) = e^{-\\lambda t}$。\n- 如果 $r T  B$，即停机时间 $T$ 超过 $B / r$，则会发生溢出。\n- 对于CLIA方法，孵育、洗涤和读数由分析仪内部控制；因此，分析化学过程按计划进行，不受连接性影响，只有向LIMS的数据流式传输受到影响。\n\n本次运行的具体参数为 $B = 240$ 个事件, $r = 2$ 事件/分钟, 以及 $\\lambda = 0.1$ /分钟。机械臂有其他可用仪器，并可在停机期间继续执行非交互任务。LIMS维护一个预写日志，并可将事务标记为“待定”，直到分析仪数据得到协调。分析仪的内部日志带有签名并受CRC保护；重新连接后，LIMS可以请求缓冲的日志和结果，使用CRC验证完整性，并协调时间戳以确保一致性。\n\n在这些条件下，哪种恢复策略最能保护数据完整性并最大限度地减少分析中断？\n\nA. 立即中止运行，将所有处理中的孔标记为失败，丢弃孔板，并在连接恢复后重新安排整个批次，以保证数据损坏的风险为零。\n\nB. 暂停与断开连接的分析仪的交互，同时允许其他仪器继续运行，在LIMS中将受影响的孔事务标记为“待定”（不提交），并在重新连接后，检索分析仪的缓冲日志和结果，通过CRC进行验证，协调事件时间戳，并且仅在没有发生缓冲区溢出的情况下提交；仅重新运行那些日志丢失或无效的孔。\n\nC. 在停机期间继续发送带有自动重试的分析仪命令以避免时序间隙，并在重新连接后，提交首次收到的响应；任何重复的操作可以稍后通过手动审查来协调。\n\nD. 指示机械臂在停机期间从分析仪中物理取回孔板，并将其保持在环境温度下，以避免潜在的时序不匹配；在连接恢复后继续分析步骤，并将此搁置记录为偏差。\n\nE. 暂时禁用ACID控制，通过提交来自其他仪器的部分数据流和分析仪的最后已知状态，然后在重新连接后回填分析仪数据以保持高通量；任何不一致之处可以追溯修正。\n\n选择唯一的最佳选项。", "solution": "从所述基础开始。分析仪自主控制分析时序；因此，连接丢失不会改变化学步骤（孵育、洗涤、读数），但会影响到实验室信息管理系统（LIMS）的实时数据流式传输。数据完整性要求遵守原子性、一致性、隔离性和持久性（ACID）。原子性和持久性要求，在一个孔的事务中，直到分析仪的结果和事件元数据被接收、验证并持久化后才能提交。隔离性要求其他仪器的事务不受分析仪瞬态的影响。一致性要求LIMS的记录集与分析仪的权威状态相匹配，并有完整的审计跟踪。\n\n主要的量化风险是分析仪缓冲区溢出。当循环缓冲区容量为 $B$ 且事件速率为 $r$ 时，如果 $r T  B$，即 $T  B / r$，则发生溢出。使用指数停机时间模型 $T \\sim \\mathrm{Exp}(\\lambda)$，我们推导出溢出概率：\n$$\nP(\\text{overflow}) = P\\left(T  \\frac{B}{r}\\right) = e^{-\\lambda \\frac{B}{r}}.\n$$\n代入 $B = 240$, $r = 2$ \\,\\mathrm{events/min}, 以及 $\\lambda = 0.1$ \\,\\mathrm{min}^{-1}:\n$$\n\\frac{B}{r} = \\frac{240}{2} = 120 \\,\\mathrm{min}, \\quad P(\\text{overflow}) = e^{-0.1 \\cdot 120} = e^{-12}.\n$$\n数值上，$e^{-12} \\approx 6.144212353 \\times 10^{-6}$，这是一个极小的值。因此，在给定参数下，分析仪内部日志在重新连接前溢出的概率可以忽略不计。因为分析仪自主运行，分析时序和化学过程得以保留；因此，为了最大限度地减少中断，应允许分析仪在内部继续进行，同时LIMS维持事务边界。\n\n接下来，考虑带有预写日志的ACID含义。在停机期间，LIMS应将受影响的孔事务标记为“待定”（不提交），以保护原子性和持久性，而不会有部分写入的风险。重新连接后，LIMS应检索缓冲数据，使用循环冗余校验（CRC）验证完整性，协调事件时间戳和序列号以维持一致性，然后才提交事务。任何日志丢失或无效（例如，假设由于罕见的溢出或CRC失败）的孔都应重新运行，以恢复数据的完整性和完整度。通过暂停与断开连接的分析仪的交互，同时允许不相关的仪器继续操作，来维持隔离性。\n\n评估每个选项：\n\nA. 立即中止运行并丢弃孔板，最大限度地保证了数据不会损坏，但违反了“最大限度地减少分析中断”的标准。考虑到 $P(\\text{overflow}) \\approx 6.14 \\times 10^{-6}$ 且分析过程自主进行，这种做法过于保守。它还不合理地浪费了有效的化学反应和通量。结论：不正确。\n\nB. 暂停与断开连接的分析仪的交互，将事务标记为“待定”，并在重新连接后拉取缓冲的日志/结果，通过CRC进行验证，协调时间戳，并且仅在数据完整时才提交，这与ACID原则相符：原子性（验证前不提交）、一致性（时间戳和CRC协调）、隔离性（暂停分析仪交互）和持久性（预写日志）。它利用极低的溢出概率来保持通量，并且仅在无法保证完整性的情况下才重新运行孔。该策略保护了数据完整性并最大限度地减少了分析中断。结论：正确。\n\nC. 在停机期间继续发送带有自动重试的命令，在重新连接时有执行非幂等操作的风险，导致重复执行或状态分歧。提交“首次收到的响应”可能违反原子性和一致性，因为命令流可能会被重新排序或重复，并且分析仪已经在自主执行。这增加了损坏风险，并且没有最大限度地减少中断。结论：不正确。\n\nD. 在没有适当握手的情况下，在停机期间物理取回孔板，有违反互锁机制的风险，并可能扰乱分析时序和环境控制。在环境温度下搁置，会给温度敏感的CLIA带来不受控制的分析前变异，可能导致结果偏差，并且不能保护完整性。结论：不正确。\n\nE. 禁用ACID控制以提交部分数据并在以后回填，这明确违反了原子性和一致性，造成了出现孤立或不匹配记录的可能性。追溯修正不能替代事务完整性，并且在需要返工时会增加中断。结论：不正确。\n\n因此，考虑到量化的溢出风险和基于ACID的数据完整性要求，选项B中的策略满足了双重目标。", "answer": "$$\\boxed{B}$$", "id": "5128077"}]}
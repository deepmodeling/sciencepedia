{"hands_on_practices": [{"introduction": "结肠镜检查的一项核心技能是“扭矩操控”，但外科医生很快就会发现，镜身顶端的转动与操作手柄的转动并非总是呈 $1:1$ 的比例。这种现象主要是由镜身成袢和摩擦力引起的，可以通过静态扭转力学的基本原理来建模。这项练习 [@problem_id:4610895] 将帮助您建立一个基于物理学的直观理解，明白结肠镜袢环如何影响镜身控制，从而让您能够在实际操作中预判并补偿扭矩的衰减。", "problem": "一位资深外科内镜医师在进行结肠镜检查时，注意到在乙状结肠和横结肠处有两个持续存在的环路点，每个环路点都表现为对结肠壁的旋转顺应性约束。将每个环路点建模为一个连接到地（肠道）的线性扭转弹簧，其扭转刚度系数分别为 $k_1$ 和 $k_2$。远端尖端处于稳定的黏膜贴合状态，被建模为一个连接到地的线性扭转弹簧，其刚度为 $k_{\\mathrm{tip}}$。假设在这三个顺应点之间的结肠镜镜身段相对于环路顺应性是扭转刚性的，并且是无损的，同时操作是准静态执行的，因此惯性效应可以忽略不计。\n\n在手柄（近端）处施加一个 $90^\\circ$ 的顺时针旋转并保持。测得的刚度为 $k_1 = 0.8\\ \\mathrm{N\\cdot m/rad}$，$k_2 = 0.5\\ \\mathrm{N\\cdot m/rad}$，以及 $k_{\\mathrm{tip}} = 1.6\\ \\mathrm{N\\cdot m/rad}$。\n\n使用静态扭转力学的第一性原理，计算远端尖端相对于结肠的预期方向变化。以度为单位表示最终答案，并将答案四舍五入到四位有效数字。", "solution": "问题陈述需要经过验证。\n\n### 步骤 1：提取已知条件\n- 结肠镜检查过程涉及两个环路点（乙状结肠、横结肠）和一个远端尖端。\n- 每个点都被建模为一个连接到地（结肠壁）的线性扭转弹簧。\n- 第一个环路点（乙状结肠）的扭转刚度：$k_1 = 0.8\\ \\mathrm{N\\cdot m/rad}$。\n- 第二个环路点（横结肠）的扭转刚度：$k_2 = 0.5\\ \\mathrm{N\\cdot m/rad}$。\n- 远端尖端的扭转刚度：$k_{\\mathrm{tip}} = 1.6\\ \\mathrm{N\\cdot m/rad}$。\n- 这三个顺应点之间的结肠镜镜身段相对于环路顺应性是扭转刚性的。\n- 系统是无损的。\n- 操作是准静态的，因此惯性效应可以忽略不计。\n- 在手柄（近端）施加了 $90^\\circ$ 的顺时针角位移，$\\theta_{\\mathrm{handle}} = 90^\\circ$。\n- 任务是计算远端尖端相对于结肠的方向变化，$\\theta_{\\mathrm{tip}}$。\n- 最终答案应以度表示，并四舍五入到四位有效数字。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学依据**：该问题采用集总参数模型，这是工程学和生物力学中分析连续力学系统的标准且有效的简化技术。其原理基于静态扭转力学（扭转胡克定律），这在科学上是合理的。\n- **适定性**：所有必要的参数（$k_1$、$k_2$、$k_{\\mathrm{tip}}$）和输入条件（$\\theta_{\\mathrm{handle}}$）都已提供。目标（计算 $\\theta_{\\mathrm{tip}}$）已明确说明。预期会有一个唯一解。\n- **客观性**：问题使用精确、客观和技术性的语言陈述。\n- **额外检查**：“在这三个顺应点之间的镜身段是扭转刚性的”这一模型意味着扭转顺应性集中在这三个指定点上。能够产生一个非平凡结果（即 $\\theta_{\\mathrm{tip}} \\ne \\theta_{\\mathrm{handle}}$）的最合理解释是一个串联的扭转弹簧系统。这种解释将“环路点”视为连接扭转刚性段的顺应元件，而尖端的最后一个弹簧将最后一段连接到固定参考系（“地”）。虽然对于中间环路点使用“连接到地的弹簧”的措辞可能被解释为并联配置，但这将导致一个不符合物理规律的结论，即所谓的“刚性”镜身上的所有点都以相同的角度旋转，使得 $\\theta_{\\mathrm{tip}} = \\theta_{\\mathrm{handle}}$，这与沿内窥镜存在扭矩损失的物理现实相矛盾。串联模型是唯一能满足所有约束条件的物理上一致的解释。\n\n### 步骤 3：结论与行动\n问题有效。将提供完整的解答。\n\n该系统被建模为三个串联的扭转弹簧。设 $\\tau$ 为施加在手柄上的扭矩。由于操作是准静态的且镜身是无损的，该扭矩会均匀地传递到所有顺应元件上。三个顺应点分别是乙状结肠环路（刚度为 $k_1$）、横结肠环路（刚度为 $k_2$）和尖端-结肠界面（刚度为 $k_{\\mathrm{tip}}$）。\n\n设 $\\Delta\\theta_1$、$\\Delta\\theta_2$ 和 $\\Delta\\theta_3$ 分别为穿过这三个顺应元件的角扭转。根据扭转弹簧定律（胡克定律的一种形式），每个元件的扭矩和扭转角之间的关系是：\n$$ \\tau = k_1 \\Delta\\theta_1 $$\n$$ \\tau = k_2 \\Delta\\theta_2 $$\n$$ \\tau = k_{\\mathrm{tip}} \\Delta\\theta_3 $$\n\n施加在手柄上的总旋转角度 $\\theta_{\\mathrm{handle}}$ 是串联元件各自扭转角的总和，因为它们之间的刚性段对角位移没有贡献。\n$$ \\theta_{\\mathrm{handle}} = \\Delta\\theta_1 + \\Delta\\theta_2 + \\Delta\\theta_3 $$\n\n我们可以用扭矩 $\\tau$ 和各自的刚度来表示每个扭转角：\n$$ \\Delta\\theta_1 = \\frac{\\tau}{k_1} $$\n$$ \\Delta\\theta_2 = \\frac{\\tau}{k_2} $$\n$$ \\Delta\\theta_3 = \\frac{\\tau}{k_{\\mathrm{tip}}} $$\n\n将这些代入总手柄旋转方程中，得到：\n$$ \\theta_{\\mathrm{handle}} = \\frac{\\tau}{k_1} + \\frac{\\tau}{k_2} + \\frac{\\tau}{k_{\\mathrm{tip}}} = \\tau \\left( \\frac{1}{k_1} + \\frac{1}{k_2} + \\frac{1}{k_{\\mathrm{tip}}} \\right) $$\n\n问题要求计算远端尖端相对于结肠的方向变化。结肠是“地”或固定参考系。最后一个刚度为 $k_{\\mathrm{tip}}$ 的顺应元件将内窥镜的远端尖端连接到这个“地”。因此，尖端的方向变化 $\\theta_{\\mathrm{tip}}$ 正是这个最后弹簧上的扭转角 $\\Delta\\theta_3$。\n$$ \\theta_{\\mathrm{tip}} = \\Delta\\theta_3 = \\frac{\\tau}{k_{\\mathrm{tip}}} $$\n\n我们可以通过消去未知扭矩 $\\tau$ 来找到 $\\theta_{\\mathrm{tip}}$ 和 $\\theta_{\\mathrm{handle}}$ 之间的关系。从 $\\theta_{\\mathrm{tip}}$ 的方程中，我们有 $\\tau = k_{\\mathrm{tip}} \\theta_{\\mathrm{tip}}$。将其代入 $\\theta_{\\mathrm{handle}}$ 的方程中：\n$$ \\theta_{\\mathrm{handle}} = (k_{\\mathrm{tip}} \\theta_{\\mathrm{tip}}) \\left( \\frac{1}{k_1} + \\frac{1}{k_2} + \\frac{1}{k_{\\mathrm{tip}}} \\right) $$\n$$ \\theta_{\\mathrm{handle}} = \\theta_{\\mathrm{tip}} \\left( \\frac{k_{\\mathrm{tip}}}{k_1} + \\frac{k_{\\mathrm{tip}}}{k_2} + \\frac{k_{\\mathrm{tip}}}{k_{\\mathrm{tip}}} \\right) = \\theta_{\\mathrm{tip}} \\left( 1 + \\frac{k_{\\mathrm{tip}}}{k_1} + \\frac{k_{\\mathrm{tip}}}{k_2} \\right) $$\n\n我们现在可以解出 $\\theta_{\\mathrm{tip}}$：\n$$ \\theta_{\\mathrm{tip}} = \\frac{\\theta_{\\mathrm{handle}}}{1 + \\frac{k_{\\mathrm{tip}}}{k_1} + \\frac{k_{\\mathrm{tip}}}{k_2}} $$\n\n另外，使用扭转顺应性 $C_i = 1/k_i$，方程为 $\\theta_{\\mathrm{handle}} = \\tau (C_1 + C_2 + C_{\\mathrm{tip}})$ 和 $\\theta_{\\mathrm{tip}} = \\tau C_{\\mathrm{tip}}$。其比率为：\n$$ \\frac{\\theta_{\\mathrm{tip}}}{\\theta_{\\mathrm{handle}}} = \\frac{\\tau C_{\\mathrm{tip}}}{\\tau (C_1 + C_2 + C_{\\mathrm{tip}})} = \\frac{C_{\\mathrm{tip}}}{C_1 + C_2 + C_{\\mathrm{tip}}} $$\n$$ \\theta_{\\mathrm{tip}} = \\theta_{\\mathrm{handle}} \\left( \\frac{1/k_{\\mathrm{tip}}}{1/k_1 + 1/k_2 + 1/k_{\\mathrm{tip}}} \\right) $$\n这个表达式与前面推导的表达式是等价的。由于这是刚度（或顺应性）的比值，$\\theta_{\\mathrm{handle}}$ 的角度单位可以直接用于 $\\theta_{\\mathrm{tip}}$。\n\n现在，我们代入给定的值：\n- $\\theta_{\\mathrm{handle}} = 90^\\circ$\n- $k_1 = 0.8\\ \\mathrm{N\\cdot m/rad}$\n- $k_2 = 0.5\\ \\mathrm{N\\cdot m/rad}$\n- $k_{\\mathrm{tip}} = 1.6\\ \\mathrm{N\\cdot m/rad}$\n\n首先，计算顺应性（刚度的倒数）：\n$$ C_1 = \\frac{1}{k_1} = \\frac{1}{0.8} = 1.25\\ \\mathrm{rad/(N\\cdot m)} $$\n$$ C_2 = \\frac{1}{k_2} = \\frac{1}{0.5} = 2.0\\ \\mathrm{rad/(N\\cdot m)} $$\n$$ C_{\\mathrm{tip}} = \\frac{1}{k_{\\mathrm{tip}}} = \\frac{1}{1.6} = 0.625\\ \\mathrm{rad/(N\\cdot m)} $$\n\n总顺应性是各个顺应性的总和：\n$$ C_{\\mathrm{total}} = C_1 + C_2 + C_{\\mathrm{tip}} = 1.25 + 2.0 + 0.625 = 3.875\\ \\mathrm{rad/(N\\cdot m)} $$\n\n现在，计算 $\\theta_{\\mathrm{tip}}$：\n$$ \\theta_{\\mathrm{tip}} = \\theta_{\\mathrm{handle}} \\left( \\frac{C_{\\mathrm{tip}}}{C_{\\mathrm{total}}} \\right) = 90^\\circ \\times \\left( \\frac{0.625}{3.875} \\right) $$\n为了精确计算这个分数：\n$$ \\frac{0.625}{3.875} = \\frac{5/8}{31/8} = \\frac{5}{31} $$\n所以，\n$$ \\theta_{\\mathrm{tip}} = 90^\\circ \\times \\frac{5}{31} = \\frac{450}{31}^\\circ \\approx 14.516129...^\\circ $$\n\n问题要求答案四舍五入到四位有效数字。\n$$ \\theta_{\\mathrm{tip}} \\approx 14.52^\\circ $$", "answer": "$$\\boxed{14.52}$$", "id": "4610895"}, {"introduction": "在憩室附近或憩室上方切除息肉是一项高风险操作，因为其解剖结构特殊，管壁极薄且缺乏肌层支撑。成功完成此类切除术要求对外科医生对结肠壁的微观解剖结构、憩室的病理生理学以及管壁应力和热损伤的物理学原理有深刻的理解。本问题 [@problem_id:4611205] 旨在挑战您综合运用这些第一性原理，评估风险并为这一复杂的临床情境设计出安全且有据可循的切除策略。", "problem": "一名$68$岁男性在接受筛查性结肠镜检查时，发现在乙状结肠的肠系膜对侧缘有一个大小为$18\\,\\mathrm{mm}$的无蒂性侧向发育型病变。该病变部分覆盖在一个有中度憩室病的肠段中一个$5\\,\\mathrm{mm}$憩室开口的边缘。他每日服用阿司匹林$81\\,\\mathrm{mg}$。内镜医师是一名接受过高级内镜下切除术训练的外科医生。\n\n从第一性原理出发，考虑结肠壁的分层显微解剖结构（黏膜、黏膜下层、固有肌层、浆膜）、结肠憩室的病理解剖学（一种在颈部缺少固有肌层的假性憩室），以及肠壁应力和热损伤的物理学原理。具体来说，薄壁圆柱体中的环状应力可近似表示为 $\\sigma = \\dfrac{P\\,r}{h}$，其中 $\\sigma$ 是周向应力，$P$ 是腔内压力，$r$ 是腔内半径，$h$ 是壁厚。电外科组织损伤深度与能量密度成正比，而能量密度在给定电导率的组织中随功率和作用时间的增加而增加。\n\n在切除此病变时，哪个选项最能准确识别穿孔和出血的主要风险因素，并将其与最有证据支持的、旨在最小化这些风险同时实现完全切除的内镜策略相匹配？\n\nA. 主要风险因素：憩室颈部无固有肌层（$h$减小）、憩室边缘的黏膜下纤维化、病变大小$>10\\,\\mathrm{mm}$、使用电灼术以及乙状结肠的节段性憩室病；出血风险来自憩室顶部穿透的直血管。策略：进行水下内镜下黏膜切除术（endoscopic mucosal resection (EMR)），不进行黏膜下注射，以减小$r$和$P$，并使黏膜从肌层浮起；使用热圈套器进行整块或分块切除，同时避免横切憩室开口；立即使用活检道送入式夹（through-the-scope clips (TTSC)）闭合切除缺损和憩室边缘，如果开口受累，考虑使用全层夹（over-the-scope clip (OTSC)）；如果病变明显延伸至憩室腔内，导致无法安全进行EMR，则使用全层切除装置（full-thickness resection device (FTRD)）。使用二氧化碳（carbon dioxide (CO2)）并最少充气；优先对明显远离憩室边缘的部分使用冷圈套器。\n\nB. 主要风险因素：憩室颈部的固有肌层增厚，从而降低了穿孔风险；主要危险仅在于管腔扩张。策略：进行标准的热圈套器EMR，向憩室开口内部及下方注射大容量生理盐水-肾上腺素以形成垫层，然后沿憩室边缘进行广泛的电灼横切，若无即刻出血则不闭合缺损。\n\nC. 主要风险因素：右半结肠的位置和大的管腔半径$r$是主导因素；憩室的结构对肠壁应力没有实质性影响。策略：经憩室颈部进行内镜下黏膜下层剥离术（endoscopic submucosal dissection (ESD)）以获得整块切除，避免使用夹子以保留组织学评估，并使用室内空气来维持稳定的视野。\n\nD. 主要风险因素：唯一的担忧是息肉切除后来自黏膜下血管丛的出血；穿孔风险低，因为电灼在造成深部损伤前会使组织干燥。策略：在病变和憩室开口上放置内镜下套扎带以结扎组织并使其脱落，避免注射和使用夹子；继续使用高流量气体充气以最大化视野。\n\n选择唯一的最佳选项。", "solution": "用户希望我扮演一位严谨的STEM教授，解决一个关于内镜下切除术的临床问题。\n\n### 问题验证\n\n我将首先根据指定协议验证问题陈述。\n\n#### 步骤1：提取已知条件\n\n*   **患者人口统计学信息**：一名$68$岁男性。\n*   **临床指征**：接受筛查性结肠镜检查。\n*   **病变特征**：一个大小为$18\\,\\mathrm{mm}$的无蒂性侧向发育型病变。\n*   **病变位置**：乙状结肠的肠系膜对侧缘。\n*   **解剖背景**：病变部分覆盖在一个有中度憩室病的结肠段中一个$5\\,\\mathrm{mm}$憩室开口的边缘。\n*   **用药**：每日服用阿司匹林$81\\,\\mathrm{mg}$。\n*   **操作者**：接受过高级内镜下切除术训练的外科医生。\n*   **提供的第一性原理**：\n    1.  **结肠壁解剖**：由四层组成：黏膜、黏膜下层、固有肌层和浆膜。\n    2.  **憩室病理解剖**：它是一个假性憩室，意味着其颈部和囊内缺少固有肌层。\n    3.  **肠壁应力物理学**：环状应力可近似表示为 $\\sigma = \\dfrac{P\\,r}{h}$，其中 $\\sigma$ 是周向应力，$P$ 是腔内压力，$r$ 是腔内半径，$h$ 是壁厚。\n    4.  **热损伤物理学**：电外科手术的损伤深度与能量密度成正比，而能量密度是功率和作用时间的函数。\n\n#### 步骤2：使用提取的已知条件进行验证\n\n*   **科学依据**：该问题具有科学合理性。对结肠壁分层、结肠憩室定义为假性憩室（黏膜和黏膜下层通过固有肌层疝出）的描述，以及患者的临床表现，在医学文献中都是真实且标准的。应用拉普拉斯定律（$\\sigma = \\dfrac{P\\,r}{h}$）为薄壁圆柱体建模结肠环状应力，是一个有效且常用的生物力学原理。电外科能量与组织损伤之间的关系也是一个正确的生物物理学原理。该场景是高级内镜学中一个公认且具有挑战性的临床问题。\n*   **良态问题**：该问题是良态的。它提出了一个具体、独立的临床场景，并要求基于所提供的第一性原理对风险进行分析并确定最佳策略。其结构设计使得选项中有唯一的最佳答案。\n*   **客观性**：语言是临床的、精确的和客观的。问题设置中没有主观或基于意见的陈述。\n*   **缺陷清单**：该问题没有违反任何指定的无效性标准。它科学合理、可形式化、完整、现实且良态。它需要通过整合多个原理进行非平凡的推理。\n\n#### 步骤3：结论与行动\n\n*   **结论**：问题是**有效的**。\n*   **行动**：继续进行解题推导和逐项分析。\n\n### 解题推导\n\n此问题需要综合运用解剖学、病理学和物理学原理，以评估一项高级内镜手术的风险，并设计缓解策略。\n\n#### 1. 穿孔风险分析\n\n在这种情况下，主要风险是医源性穿孔。由于病变邻近憩室，风险显著升高。\n\n*   **解剖学和物理学基础**：\n    1.  问题陈述憩室是一个缺少固有肌层的“假性憩室”。固有肌层是结肠壁的主要强度层。它的缺失意味着憩室开口处和憩室内的壁仅由黏膜、黏膜下层和一层薄薄的浆膜组成。\n    2.  根据环状应力公式 $\\sigma = \\dfrac{P\\,r}{h}$，壁应力（$\\sigma$）与壁厚（$h$）成反比。在缺少固有肌层的地方，$h$ 急剧减小。因此，对于任何给定的腔内压力（$P$）和半径（$r$），壁应力 $\\sigma$ 在憩室处被极度放大。这个高应力焦点很容易因机械力（如扭转内镜）或气体充盈增加腔内压力而破裂。\n    3.  电外科切除使用热能。热损伤的深度取决于能量密度。非常薄的壁（小的$h$）意味着几乎没有组织来散热，使得全层（透壁）烧伤和随后的穿孔极有可能发生。当在憩室边缘上或紧邻其旁应用电灼时，这种风险最大。\n*   **穿孔风险的缓解策略**：\n    1.  **最小化壁应力（$\\sigma$）**：要最小化 $\\sigma$，必须最小化 $P$ 和 $r$。这可以通过避免高压气体充盈来实现。使用二氧化碳（$CO_2$）比室内空气更安全，因为它吸收迅速，但最小化充盈的体积和压力至关重要。另一种方法是在水下进行切除（水下内镜下黏膜切除术，或UEMR），这完全避免了气体扩张，从而将 $P$ 和 $r$ 保持在最低水平。\n    2.  **最小化热损伤**：在EMR期间预防深部热损伤的标准方法是通过向黏膜下腔注射液体（如生理盐水）来创建一个“安全垫”。这会抬高病变，增加到固有肌层和浆膜的有效距离。然而，在这种情况下，病变累及憩室的纤维化边缘，注射可能难以进行，可能无法很好地抬起，并且可能通过扩张薄壁憩室而矛盾地增加应力。因此，不依赖黏膜下注射的技术，如UEMR（水为病变提供自然浮力），是一个有吸引力的选择。对远离憩室的病变部分使用冷圈套器（无电灼）可以最小化热损伤，但可能不适用于整个$18\\,\\mathrm{mm}$的病变，特别是考虑到出血风险。\n    3.  **机械性规避**：避免直接用圈套器套住或施力于憩室开口。切除应谨慎进行至边缘。\n    4.  **预防性缺损闭合**：鉴于固有的高风险，用活检道送入式夹（TTSCs）闭合切除部位是明智的预防措施，以支撑薄弱区域并防止延迟性穿孔。如果发生穿孔或憩室受损，可能需要一个更大的全层夹（OTSC）。\n    5.  **应急计划**：如果病变延伸到憩室太深，无法安全进行EMR，则必须考虑替代技术，如全层切除装置（FTRD）或外科手术切除。\n\n#### 2. 出血风险分析\n\n*   **解剖学基础**：憩室通常在营养动脉（直血管）穿透固有肌层的地方形成。这意味着一根重要血管在结构上与憩室的颈部或底部相关联。在切除过程中损伤这根血管可能导致严重出血。\n*   **药理学基础**：患者每日服用阿司匹林（$81\\,\\mathrm{mg}$），这是一种抗血小板药物。这会损害初级止血功能，并增加即时和延迟性息肉切除术后出血的风险。\n*   **出血风险的缓解策略**：\n    1.  **止血性切除**：使用热圈套器在横切时提供电凝作用，对于较大的病变（$>10\\,\\mathrm{mm}$），通常比冷圈套器更受青睐，以实现止血，尤其是在服用抗血小板药物的患者中。\n    2.  **预防性闭合**：用夹子夹闭切除缺损可以机械性地压迫任何被切断的黏膜下血管，是预防延迟性出血的有效方法。\n\n#### 3. 最佳策略综合\n\n理想的策略应能同时最小化穿孔风险和管理出血风险。这表明需要一种精细的方法：\n*   使用一种能最小化结肠扩张的技术（减少 $P$ 和 $r$），如UEMR或最少量$CO_2$充气。\n*   采用一种考虑到薄壁的切除方法，要么通过创造抬举（如果可能），要么使用像UEMR这样不需要注射的方法。\n*   谨慎使用热圈套器以获得其止血益处，但考虑对远离憩室的安全区域使用冷圈套器。\n*   关键是避免横切憩室开口。\n*   预防性地用夹子闭合高风险的切除缺损。\n*   准备好应急计划（OTSC, FTRD）。\n\n### 选项评估\n\n*   **选项 A**：\n    *   **风险因素**：正确识别了无固有肌层（$h$减小）、黏膜下纤维化、病变大小、电灼风险以及来自直血管的出血风险。这是基于第一性原理的全面而准确的评估。\n    *   **策略**：推荐水下EMR（UEMR）以减少$P$和$r$，而无需进行有风险的黏膜下注射。它提议谨慎使用热圈套器，避开开口，并对风险较低的区域使用冷圈套器。它包括用TTSCs进行预防性缺损闭合和用OTSCs和FTRDs进行应急计划。它指定使用$CO_2$和最少充气。此策略以逻辑、有证据支持和精细的方式直接解决了所有已识别的风险。\n    *   **结论**：**正确**。\n\n*   **选项 B**：\n    *   **风险因素**：声称固有肌层在憩室颈部*增厚*。这在解剖学上是错误的，并与假性憩室的第一性原理相矛盾。这个根本性错误使其余选项的推理无效。\n    *   **策略**：建议向憩室*内部*注射并横切边缘，这两种做法都极其危险，并直接增加穿孔风险。它建议不闭合缺损，这忽视了延迟并发症的高风险。\n    *   **结论**：**错误**。\n\n*   **选项 C**：\n    *   **风险因素**：错误地将病变定位在右半结肠，并声称憩室结构与壁应力无关。问题陈述病变在乙状结肠，而物理学（$\\sigma \\propto 1/h$）决定了憩室结构是影响应力的*最*相关因素。\n    *   **策略**：提议*通过*憩室颈部进行内镜下黏膜下层剥离术（ESD），这是一个风险极高的操作，通常被认为是禁忌症。它还建议使用室内空气（不合标准）和避免使用夹子（不安全）。\n    *   **结论**：**错误**。\n\n*   **选项 D**：\n    *   **风险因素**：错误地声称穿孔风险低，而出血是*唯一*的担忧。这危险地忽视了从解剖学和物理学推导出的主要风险。\n    *   **策略**：推荐内镜下套扎术，这种技术不适用于$18\\,\\mathrm{mm}$的侧向发育型病变，因为它可能导致不完全切除。它还建议高流量气体充气，这将最大化壁应力（$\\sigma$）和穿孔风险，直接与物理原理相悖。\n    *   **结论**：**错误**。\n\n### 结论\n\n选项A是唯一正确应用了所提供的解剖学、病理学和物理学第一性原理来识别相关风险并制定安全有效管理策略的选择。其他选项包含重大的事实错误，并推荐危险的操作。", "answer": "$$\\boxed{A}$$", "id": "4611205"}, {"introduction": "卓越的外科实践不仅需要精湛的技术，还包括准确评估并有效沟通手术风险。临床流行病学为我们提供了将这种风险评估形式化的工具，例如基于几率的预测模型，它能量化不同风险因素的影响。这项练习 [@problem_id:4610943] 提供了一个动手实践的机会，让您学习如何为结肠镜息肉切除术后出血风险建立并应用一个定量风险模型，将定性的风险因素转化为具体的概率预测。", "problem": "您的任务是推导并实现一个简约的、基于发生比的模型，用于计算结肠镜检查后息肉切除术后延迟性出血的概率。该模型需整合以下风险因素：息肉大小（毫米）、息肉位置、围手术期抗凝状态和切除技术。推导过程应基于概率和发生比的基本原理，然后实现该模型，为一组固定的临床情景测试套件计算出血概率。\n\n需使用的建模框架和基本依据：\n- 从概率和发生比的定义开始：对于一个概率为 $p \\in (0,1)$ 的事件，其发生比 $O$ 为 $O = \\dfrac{p}{1-p}$。\n- 使用临床流行病学中广泛应用的假设：对于相对罕见的结局和条件独立的风险因素，各风险因素的优势比（odds ratio）在发生比尺度上是相乘的。\n- 利用发生比变换的可逆性将发生比映射回概率：$p = \\dfrac{O}{1 + O}$。\n\n参考定义和数值锚点：\n- 将参考情景定义为：一名未接受抗凝治疗的患者，通过冷圈套器从远端结肠切除一个微小息肉。\n- 参考情景中延迟性出血的基线概率为 $p_0 = 0.003$（以小数形式表示，而非百分比）。\n- 设基线发生比为 $O_0 = \\dfrac{p_0}{1 - p_0}$。\n\n分类规则和优势比（每个因素均相对于其参考水平，参考水平的优势比为 $1$）：\n- 息肉大小（毫米）：\n  - 大小 $\\leq 5$：优势比 $1.0$。\n  - 大小 $\\in [6,9]$：优势比 $1.8$。\n  - 大小 $\\in [10,19]$：优势比 $3.0$。\n  - 大小 $\\geq 20$：优势比 $6.0$。\n- 息肉位置：\n  - 远端结肠（参考）：优势比 $1.0$。\n  - 近端结肠：优势比 $1.7$。\n  - 直肠：优势比 $1.3$。\n- 抗凝状态：\n  - 无：优势比 $1.0$。\n  - doac_held (直接口服抗凝药适当停用)：优势比 $1.5$。\n  - warfarin_held (华法林停用，无肝素桥接)：优势比 $1.8$。\n  - heparin_bridge (使用肝素桥接)：优势比 $3.5$。\n- 切除技术：\n  - cold_snare (冷圈套器，参考)：优势比 $1.0$。\n  - hot_snare：优势比 $2.0$。\n  - emr (内镜下黏膜切除术)：优势比 $3.0$。\n  - esd (内镜下黏膜下剥离术)：优势比 $5.0$。\n\n您的程序必须：\n- 在不使用任何预构建的机器学习库的情况下，实现根据上述原理推导出的模型。\n- 输入是隐式的（使用下方的固定测试套件），所有大小单位均为毫米。\n- 对于每个测试用例，计算出血概率，结果为保留四位小数的小数。\n- 将所有输出聚合为单行，形式为用方括号括起来的逗号分隔列表，例如 $[0.0123,0.0456]$。\n\n用于评估实现的测试套件（每个用例是一个元组：$(\\text{size\\_mm}, \\text{location}, \\text{anticoag}, \\text{technique})$）：\n- 用例 $1$：$(5, \\text{distal}, \\text{none}, \\text{cold\\_snare})$。\n- 用例 $2$：$(25, \\text{proximal}, \\text{heparin\\_bridge}, \\text{esd})$。\n- 用例 $3$：$(8, \\text{distal}, \\text{doac\\_held}, \\text{cold\\_snare})$。\n- 用例 $4$：$(12, \\text{rectum}, \\text{none}, \\text{hot\\_snare})$。\n- 用例 $5$：$(20, \\text{proximal}, \\text{warfarin\\_held}, \\text{emr})$。\n- 用例 $6$：$(10, \\text{distal}, \\text{none}, \\text{cold\\_snare})$。\n\n输出规范：\n- 将每个最终出血概率表示为小数（不带百分号），并四舍五入到四位小数。\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表（例如 $[0.0030,0.3494,0.0081,0.0229,0.1422,0.0089]$）。顺序必须与上述用例 $1$ 至 $6$ 相对应。", "solution": "该问题要求推导并实现一个简约的、基于发生比的模型，用于预测息肉切除术后延迟性出血的概率。推导过程将基于概率论和临床流行病学的基础原理。\n\n该模型的核心在于概率与发生比之间的关系。对于一个发生概率为 $p$（其中 $p \\in (0,1)$）的事件，其发生的发生比 $O$ 定义为事件发生的概率与不发生的概率之比：\n$$\nO = \\frac{p}{1-p}\n$$\n此变换是单调且可逆的。给定发生比 $O$，可以使用逆关系恢复概率 $p$：\n$$\np = \\frac{O}{1+O}\n$$\n\n该模型是围绕一个已定义的参考情景构建的：一名未接受抗凝治疗的患者，通过冷圈套器从远端结肠切除一个微小息肉（$\\leq 5$ 毫米）。该情景下出血的基线概率给定为 $p_0 = 0.003$。由此，我们可以计算出基线发生比 $O_0$：\n$$\nO_0 = \\frac{p_0}{1-p_0} = \\frac{0.003}{1-0.003} = \\frac{0.003}{0.997}\n$$\n\n该模型包含四个风险因素：息肉大小、息肉位置、抗凝状态和切除技术。每个风险因素的影响通过优势比（OR）来量化。特定风险因素水平的优势比，是指具有该风险因素水平的组中结局发生的发生比与参考组中结局发生的发生比之比。每个因素的参考水平被定义为优势比为 $1$。\n\n许多流行病学模型中的一个关键假设（也是我们被要求使用的）是，条件独立的风险因素的优势比会以乘法方式结合，从而决定结局的总发生比。因此，对于一个由特定风险因素集表征的新临床情景，其新的发生比 $O_{\\text{new}}$ 可以通过将基线发生比 $O_0$ 乘以对应于每个活动风险因素的优势比的乘积来计算。设给定情景下息肉大小、位置、抗凝状态和切除技术的优势比分别为 $\\text{OR}_{\\text{size}}$、$\\text{OR}_{\\text{loc}}$、$\\text{OR}_{\\text{ac}}$ 和 $\\text{OR}_{\\text{tech}}$。该情景的发生比为：\n$$\nO_{\\text{new}} = O_0 \\times \\text{OR}_{\\text{size}} \\times \\text{OR}_{\\text{loc}} \\times \\text{OR}_{\\text{ac}} \\times \\text{OR}_{\\text{tech}}\n$$\n一旦计算出 $O_{\\text{new}}$，就可以通过应用发生比的逆变换来找到这个新情景下的出血概率 $p_{\\text{new}}$：\n$$\np_{\\text{new}} = \\frac{O_{\\text{new}}}{1+O_{\\text{new}}}\n$$\n\n为实现此模型，我们将对每个测试用例遵循以下步骤：\n1.  确定四个风险因素的值：息肉大小（毫米）、位置、抗凝状态和技术。\n2.  使用提供的分类规则，确定每个因素对应的优势比。\n    -   对于息肉大小 $s$（毫米）：\n        -   如果 $s \\leq 5$，$\\text{OR}_{\\text{size}} = 1.0$\n        -   如果 $s \\in [6,9]$，$\\text{OR}_{\\text{size}} = 1.8$\n        -   如果 $s \\in [10,19]$，$\\text{OR}_{\\text{size}} = 3.0$\n        -   如果 $s \\geq 20$，$\\text{OR}_{\\text{size}} = 6.0$\n    -   从各自的表格中查找 $\\text{OR}_{\\text{loc}}$、$\\text{OR}_{\\text{ac}}$ 和 $\\text{OR}_{\\text{tech}}$。\n3.  计算组合优势比乘数 $M = \\text{OR}_{\\text{size}} \\times \\text{OR}_{\\text{loc}} \\times \\text{OR}_{\\text{ac}} \\times \\text{OR}_{\\text{tech}}$。\n4.  计算新的发生比：$O_{\\text{new}} = O_0 \\times M = \\frac{0.003}{0.997} \\times M$。\n5.  计算最终概率：$p_{\\text{new}} = \\frac{O_{\\text{new}}}{1+O_{\\text{new}}}$。\n6.  按要求将最终概率四舍五入到四位小数。\n\n让我们以测试套件中的用例 $2$ 为例进行说明：$(25, \\text{proximal}, \\text{heparin\\_bridge}, \\text{esd})$。\n-   **大小：** $25$ 毫米，因此 $\\text{OR}_{\\text{size}} = 6.0$。\n-   **位置：** 'proximal'，因此 $\\text{OR}_{\\text{loc}} = 1.7$。\n-   **抗凝：** 'heparin_bridge'，因此 $\\text{OR}_{\\text{ac}} = 3.5$。\n-   **技术：** 'esd'，因此 $\\text{OR}_{\\text{tech}} = 5.0$。\n\n组合乘数为 $M = 6.0 \\times 1.7 \\times 3.5 \\times 5.0 = 178.5$。\n新的发生比为 $O_{\\text{new}} = \\frac{0.003}{0.997} \\times 178.5 \\approx 0.003009027 \\times 178.5 \\approx 0.53711135$。\n新的概率为 $p_{\\text{new}} = \\frac{0.53711135}{1 + 0.53711135} \\approx \\frac{0.53711135}{1.53711135} \\approx 0.34943$。\n四舍五入到四位小数得到 $0.3494$。\n\n此过程被系统地应用于所有测试用例，以生成最终的概率列表。实现将使用数据结构来存储优势比，并使用一个函数根据此推导逻辑处理每个用例。", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Derives and implements an odds-based risk model for delayed post-polypectomy bleeding.\n    \"\"\"\n\n    # Baseline probability and odds\n    p0 = 0.003\n    odds0 = p0 / (1 - p0)\n\n    # Odds Ratios (OR) for each risk factor category\n    or_location = {\n        'distal': 1.0,\n        'proximal': 1.7,\n        'rectum': 1.3\n    }\n\n    or_anticoag = {\n        'none': 1.0,\n        'doac_held': 1.5,\n        'warfarin_held': 1.8,\n        'heparin_bridge': 3.5\n    }\n\n    or_technique = {\n        'cold_snare': 1.0,\n        'hot_snare': 2.0,\n        'emr': 3.0,\n        'esd': 5.0\n    }\n\n    def get_size_or(size_mm):\n        \"\"\"\n        Determines the odds ratio based on polyp size in millimeters.\n        \"\"\"\n        if size_mm = 5:\n            return 1.0\n        elif 6 = size_mm = 9:\n            return 1.8\n        elif 10 = size_mm = 19:\n            return 3.0\n        else:  # size_mm >= 20\n            return 6.0\n\n    # Fixed test suite from the problem statement\n    test_cases = [\n        (5, 'distal', 'none', 'cold_snare'),      # Case 1\n        (25, 'proximal', 'heparin_bridge', 'esd'), # Case 2\n        (8, 'distal', 'doac_held', 'cold_snare'),  # Case 3\n        (12, 'rectum', 'none', 'hot_snare'),        # Case 4\n        (20, 'proximal', 'warfarin_held', 'emr'),  # Case 5\n        (10, 'distal', 'none', 'cold_snare')       # Case 6\n    ]\n\n    results = []\n    for case in test_cases:\n        size_mm, location, anticoag, technique = case\n\n        # Determine the OR for each factor\n        or_s = get_size_or(size_mm)\n        or_l = or_location[location]\n        or_a = or_anticoag[anticoag]\n        or_t = or_technique[technique]\n\n        # Calculate the new odds by multiplying baseline odds with all ORs\n        new_odds = odds0 * or_s * or_l * or_a * or_t\n\n        # Convert the new odds back to probability\n        new_prob = new_odds / (1 + new_odds)\n\n        # Append the result rounded to four decimal places\n        results.append(f\"{new_prob:.4f}\")\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```", "id": "4610943"}]}
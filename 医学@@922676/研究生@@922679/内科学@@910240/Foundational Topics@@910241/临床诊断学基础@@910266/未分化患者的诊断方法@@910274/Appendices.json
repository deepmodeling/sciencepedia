{"hands_on_practices": [{"introduction": "临床诊断的核心在于根据新信息动态调整我们对疾病可能性的判断。本练习将引导您实践一项基本技能：当一项诊断测试结果为阳性时，如何运用贝叶斯推理来更新先验概率。通过将概率转换为优势比（odds），我们可以利用阳性似然比（$LR^+$）的乘法效应，精确量化新证据对诊断置信度的提升，并判断其是否跨越了治疗阈值。", "problem": "一名五十五岁的成年人因无明确病因的未分化呼吸急促就诊。您根据临床直觉和现有的初步信息，估计目标疾病（例如，急性肺栓塞）的检验前概率为 $p_{0}=0.30$。随后的一项诊断测试结果为阳性，其阳性似然比为 $LR^{+}=6$。您使用优势比形式的贝叶斯推理，从定义出发，更新这次阳性测试后的患病概率。\n\n从核心定义和贝叶斯定理出发，使用 $LR^{+}$ 推导出从检验前概率到检验后概率的基于优势比的更新方法，计算后验概率 $p_{1}$，然后将 $p_{1}$ 与预先设定的治疗阈值 $T=0.65$ 进行比较。将决策余量定义为 $m=p_{1}-T$。\n\n报告 $m$ 作为您的最终答案。以小数形式表示最终答案，并四舍五入到四位有效数字。请勿在您的回答中任何地方使用百分号。", "solution": "该问题被认为是有效的，因为它科学地基于贝叶斯概率论及其在医学诊断中的应用，提法恰当且提供了所有必要的数据，并以客观、正式的语言表述。因此，我们可以进行求解。\n\n该问题要求我们从核心定义出发，推导基于优势比的贝叶斯更新法则，计算检验后患病概率，然后确定相对于给定治疗阈值的决策余量。\n\n设 $D$为患者患有目标疾病的事件，设 $T^{+}$为该疾病的诊断测试返回阳性结果的事件。\n给定的检验前患病概率为 $P(D) = p_{0} = 0.30$。\n给定阳性测试结果的检验后患病概率记为 $p_{1} = P(D|T^{+})$。\n给定的阳性似然比为 $LR^{+} = 6$。\n\n事件 $E$ 的优势比定义为该事件发生的概率与不发生的概率之比：\n$$O(E) = \\frac{P(E)}{1-P(E)}$$\n检验前优势比 $O_{pre}$ 是在进行测试之前患病的优势比：\n$$O_{pre} = \\frac{P(D)}{1-P(D)} = \\frac{P(D)}{P(D^c)}$$\n其中 $D^c$ 是 $D$ 的补集，即患者没有患该疾病。\n\n检验后优势比 $O_{post}$ 是在收到阳性测试结果后患病的优势比：\n$$O_{post} = \\frac{P(D|T^{+})}{1-P(D|T^{+})} = \\frac{P(D|T^{+})}{P(D^c|T^{+})}$$\n\n我们使用贝叶斯定理来表示后验概率 $P(D|T^{+})$ 和 $P(D^c|T^{+})$：\n$$P(D|T^{+}) = \\frac{P(T^{+}|D)P(D)}{P(T^{+})}$$\n$$P(D^c|T^{+}) = \\frac{P(T^{+}|D^c)P(D^c)}{P(T^{+})}$$\n将这些代入检验后优势比的表达式中，得到：\n$$O_{post} = \\frac{\\frac{P(T^{+}|D)P(D)}{P(T^{+})}}{\\frac{P(T^{+}|D^c)P(D^c)}{P(T^{+})}}$$\n项 $P(T^{+})$ 被消掉，得到：\n$$O_{post} = \\frac{P(T^{+}|D)P(D)}{P(T^{+}|D^c)P(D^c)} = \\left(\\frac{P(T^{+}|D)}{P(T^{+}|D^c)}\\right) \\left(\\frac{P(D)}{P(D^c)}\\right)$$\n我们识别出这个方程的各个组成部分。第一项是阳性似然比 $LR^{+}$ 的定义：\n$$LR^{+} = \\frac{P(T^{+}|D)}{P(T^{+}|D^c)}$$\n第二项是检验前优势比 $O_{pre}$ 的定义。\n因此，我们推导出了基于优势比的更新法则：\n$$O_{post} = LR^{+} \\times O_{pre}$$\n这个方程表明，检验后优势比是检验前优势比乘以似然比。\n\n现在，我们可以使用给定的值来应用此公式。\n检验前概率为 $p_{0} = 0.30$。\n检验前优势比为：\n$$O_{pre} = \\frac{p_{0}}{1-p_{0}} = \\frac{0.30}{1-0.30} = \\frac{0.30}{0.70} = \\frac{3}{7}$$\n阳性似然比为 $LR^{+} = 6$。\n检验后优势比为：\n$$O_{post} = LR^{+} \\times O_{pre} = 6 \\times \\frac{3}{7} = \\frac{18}{7}$$\n为了求得检验后概率 $p_{1}$，我们必须将检验后优势比转换回概率。通用的转换公式是 $p = \\frac{O}{1+O}$。\n$$p_{1} = \\frac{O_{post}}{1+O_{post}} = \\frac{\\frac{18}{7}}{1+\\frac{18}{7}} = \\frac{\\frac{18}{7}}{\\frac{7}{7}+\\frac{18}{7}} = \\frac{\\frac{18}{7}}{\\frac{25}{7}} = \\frac{18}{25}$$\n将此分数转换为小数，我们得到：\n$$p_{1} = 0.72$$\n问题指定了治疗阈值 $T=0.65$ 并将决策余量定义为 $m=p_{1}-T$。我们现在可以计算 $m$：\n$$m = p_{1} - T = 0.72 - 0.65 = 0.07$$\n问题要求最终答案以小数形式表示，并四舍五入到四位有效数字。数字 $0.07$ 有一位有效数字（前面的零不是有效数字）。为了用四位有效数字表示它，我们在后面添加零：\n$$m = 0.07000$$", "answer": "$$\\boxed{0.07000}$$", "id": "4828305"}, {"introduction": "诊断测试的价值并非孤立存在，它与测试前的临床怀疑程度密切相关。本练习将通过对比两个具有不同先验概率的虚拟病例，来揭示先验概率的关键作用。您将看到，即使是同一个诊断测试（具有相同的似然比），在不同初始条件下应用，其后验概率也会产生巨大差异，从而可能导致截然不同的临床决策。", "problem": "一名未分化的成年人表现出非特异性全身症状和局部体征，这些症状和体征可能归因于一种严重但可治疗的疾病（称此疾病为 $D$）。您正在考虑是否启动一种疗法，当存在疾病 $D$ 时，该疗法的获益为 $B_T$，当不存在疾病 $D$ 时，其损害为 $H_T$，其中 $B_T$ 和 $H_T$ 以一致的预期效用单位衡量。两名患者仅在疾病 $D$ 的检验前概率上有所不同：患者1的 $p_0 = 0.05$，患者2的 $p_0 = 0.40$。您为两位患者安排了相同的诊断检验；当检验结果为阳性时，其阳性似然比 (LR+) 为 $LR_{+} = 5$。该疗法的 $B_T = 7$，$H_T = 3$，如果检验后概率 $p_{\\text{post}}$ 达到或超过由这些值所隐含的治疗阈值，您将在阳性检验后立即进行治疗。请仅使用诊断检验的概率推断和预期效用决策阈值的基本原理，计算每位患者在阳性检验后的检验后概率 $p_{\\text{post}}$，并确定是否立即治疗每位患者。然后选择以下最佳陈述。\n\nA. 患者1的 $p_{\\text{post}} \\approx 0.21$，患者2的 $p_{\\text{post}} \\approx 0.77$；治疗阈值为 $p_T = 0.30$，因此在阳性检验后不治疗患者1，但治疗患者2，因为只有当 $p_{\\text{post}} \\ge p_T$ 时，立即治疗才是合理的。\n\nB. $p_{\\text{post}} = p_0 \\times LR_{+}$，因此患者1的 $p_{\\text{post}} = 0.25$，患者2的 $p_{\\text{post}} = 2.00$（上限为 $1.00$）；两者都超过了 $p_T = 0.30$，因此都应立即治疗。\n\nC. 两名患者的 $p_{\\text{post}}$ 相同，因为 $LR_{+}$ 相同；因此，两种情况下的临床决策应该相同。\n\nD. 患者1的 $p_{\\text{post}} \\approx 0.33$，患者2的 $p_{\\text{post}} \\approx 0.67$；由于 $p_T = 0.30$，两名患者在阳性检验后都应接受治疗。\n\nE. 患者1的 $p_{\\text{post}} \\approx 0.10$，患者2的 $p_{\\text{post}} \\approx 0.50$；由 $LR_{+}$ 产生的固定加性增加解释了这种差异，而治疗仅取决于 $p_{\\text{post}}$ 是否超过 $p_T$。", "solution": "评估问题陈述的有效性。\n\n### 步骤1：提取已知条件\n-   关注的疾病：$D$\n-   存在疾病 $D$ 时，治疗的获益：$B_T = 7$（以预期效用单位计）\n-   不存在疾病 $D$ 时，治疗的损害：$H_T = 3$（以预期效用单位计）\n-   患者1对疾病 $D$ 的检验前概率：$p_0 = 0.05$\n-   患者2对疾病 $D$ 的检验前概率：$p_0 = 0.40$\n-   诊断检验阳性似然比：$LR_{+} = 5$\n-   决策规则：如果检验后概率 $p_{\\text{post}}$ 达到或超过治疗阈值 $p_T$，则进行治疗。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题具有科学依据，采用了医学决策中标准且公认的原则：用于更新概率的贝叶斯推断和用于确定行动阈值的预期效用理论。解答所需的所有数据均已提供（两种情况下的 $p_0$、 $LR_{+}$ 以及效用值 $B_T$ 和 $H_T$）。在一个假设的临床场景中，这些参数在数值上是一致且合理的。该问题提法明确、客观，且没有内部矛盾或歧义。它要求基于基本原理进行定量推导和比较。\n\n### 步骤3：结论与行动\n问题陈述有效。将推导解答。\n\n### 推导过程\n解答需要基于基本原理进行两个主要计算：治疗阈值概率 ($p_T$) 和每位患者的检验后概率 ($p_{\\text{post}}$)。\n\n**1. 计算治疗阈值 ($p_T$)**\n\n治疗阈值是指当疾病概率为 $p$ 时，治疗的预期效用等于不治疗的预期效用的那个概率点。设 $p$ 为患者患有疾病 $D$ 的概率。\n\n治疗的预期效用 $EU(\\text{Treat})$ 由患病概率乘以正确治疗的效用，减去不患病概率乘以不正确治疗的损害得出。“获益”$B_T$ 是治疗患病者的净效用增益，“损害”$H_T$ 是治疗未患病者的净效用损失。当 $EU(\\text{Treat}) \\ge EU(\\text{Do not treat})$ 时，治疗决策是合理的。阈值 $p_T$ 是无差异点：\n$$EU(\\text{Treat}) = EU(\\text{Do not treat})$$\n基于给定的获益和损害参数，一个标准的公式是：\n$$p_T \\cdot B_T = (1 - p_T) \\cdot H_T$$\n该方程平衡了治疗真阳性患者的预期收益与治疗假阳性患者的预期损害。我们可以解出 $p_T$：\n$$p_T \\cdot B_T = H_T - p_T \\cdot H_T$$\n$$p_T \\cdot B_T + p_T \\cdot H_T = H_T$$\n$$p_T (B_T + H_T) = H_T$$\n$$p_T = \\frac{H_T}{B_T + H_T}$$\n代入给定的值 $B_T = 7$ 和 $H_T = 3$：\n$$p_T = \\frac{3}{7 + 3} = \\frac{3}{10} = 0.30$$\n因此，治疗阈值为 $p_T=0.30$。如果疾病的检验后概率 $p_{\\text{post}}$ 大于或等于 $0.30$，则表明应进行治疗。\n\n**2. 计算检验后概率 ($p_{\\text{post}}$)**\n\n检验后概率是通过使用检验结果的似然比来更新检验前概率计算得出的。最直接的方法是使用优势比形式的贝叶斯定理。\n\n检验前优势比定义为：\n$$\\text{Odds}_{\\text{pre}} = \\frac{p_0}{1 - p_0}$$\n检验后优势比通过将检验前优势比乘以似然比来计算：\n$$\\text{Odds}_{\\text{post}} = \\text{Odds}_{\\text{pre}} \\times LR_{+}$$\n最后，将检验后优势比转换回概率：\n$$p_{\\text{post}} = \\frac{\\text{Odds}_{\\text{post}}}{1 + \\text{Odds}_{\\text{post}}}$$\n\n我们现在将此框架应用于每位患者。\n\n**患者1：**\n-   检验前概率：$p_{0,1} = 0.05$\n-   检验前优势比：$\\text{Odds}_{\\text{pre},1} = \\frac{0.05}{1 - 0.05} = \\frac{0.05}{0.95} = \\frac{5}{95} = \\frac{1}{19}$\n-   检验后优势比（在阳性检验结果且 $LR_{+} = 5$ 之后）：$\\text{Odds}_{\\text{post},1} = \\frac{1}{19} \\times 5 = \\frac{5}{19}$\n-   检验后概率：$p_{\\text{post},1} = \\frac{5/19}{1 + 5/19} = \\frac{5/19}{24/19} = \\frac{5}{24}$\n-   小数形式：$p_{\\text{post},1} \\approx 0.2083$\n\n**患者2：**\n-   检验前概率：$p_{0,2} = 0.40$\n-   检验前优势比：$\\text{Odds}_{\\text{pre},2} = \\frac{0.40}{1 - 0.40} = \\frac{0.4}{0.6} = \\frac{2}{3}$\n-   检验后优势比（在阳性检验结果且 $LR_{+} = 5$ 之后）：$\\text{Odds}_{\\text{post},2} = \\frac{2}{3} \\times 5 = \\frac{10}{3}$\n-   检验后概率：$p_{\\text{post},2} = \\frac{10/3}{1 + 10/3} = \\frac{10/3}{13/3} = \\frac{10}{13}$\n-   小数形式：$p_{\\text{post},2} \\approx 0.7692$\n\n**3. 对每位患者的临床决策**\n-   治疗阈值为 $p_T = 0.30$。\n-   对于患者1，$p_{\\text{post},1} \\approx 0.2083$。由于 $0.2083  0.30$，立即治疗是不合理的。\n-   对于患者2，$p_{\\text{post},2} \\approx 0.7692$。由于 $0.7692 \\ge 0.30$，立即治疗是合理的。\n\n### 逐项分析\n\n**A. 患者1的 $p_{\\text{post}} \\approx 0.21$，患者2的 $p_{\\text{post}} \\approx 0.77$；治疗阈值为 $p_T = 0.30$，因此在阳性检验后不治疗患者1，但治疗患者2，因为只有当 $p_{\\text{post}} \\ge p_T$ 时，立即治疗才是合理的。**\n对此陈述的各组成部分评估如下：\n-   患者1的 $p_{\\text{post}}$：$5/24 \\approx 0.2083$，四舍五入为 $0.21$。这是正确的。\n-   患者2的 $p_{\\text{post}}$：$10/13 \\approx 0.7692$，四舍五入为 $0.77$。这是正确的。\n-   治疗阈值 $p_T$：推导出的值为 $0.30$。该陈述正确使用了此值。\n-   对患者1的决策：$p_{\\text{post},1} \\approx 0.21  0.30$，因此不治疗。这是正确的。\n-   对患者2的决策：$p_{\\text{post},2} \\approx 0.77 > 0.30$，因此治疗。这是正确的。\n-   所提供的推理与预期效用决策理论的原则一致。\n此陈述与推导结果完全一致。\n**结论：正确。**\n\n**B. $p_{\\text{post}} = p_0 \\times LR_{+}$，因此患者1的 $p_{\\text{post}} = 0.25$，患者2的 $p_{\\text{post}} = 2.00$（上限为 $1.00$）；两者都超过了 $p_T = 0.30$，因此都应立即治疗。**\n该陈述提出了一个错误的更新概率的公式。似然比是以乘法形式作用于优势比，而不是直接作用于概率。公式 $p_{\\text{post}} = p_0 \\times LR_{+}$ 是一个常见但根本性的错误。根据定义，概率不能超过 $1.0$，而这个错误的公式为患者2得出的结果超过了 $1.0$。\n**结论：错误。**\n\n**C. 两名患者的 $p_{\\text{post}}$ 相同，因为 $LR_{+}$ 相同；因此，两种情况下的临床决策应该相同。**\n这个陈述是错误的。检验后概率是检验前概率和似然比的函数。如计算所示，即使检验性能（$LR_{+}$）相同，每位患者不同的检验前概率（$p_0$）也会导致不同的检验后概率（$p_{\\text{post}}$）。我们的结果显示 $p_{\\text{post},1} \\approx 0.21$ 和 $p_{\\text{post},2} \\approx 0.77$。\n**结论：错误。**\n\n**D. 患者1的 $p_{\\text{post}} \\approx 0.33$，患者2的 $p_{\\text{post}} \\approx 0.67$；由于 $p_T = 0.30$，两名患者在阳性检验后都应接受治疗。**\n此选项中计算的检验后概率（$\\approx 0.33$ 和 $\\approx 0.67$）与正确推导出的值（$\\approx 0.21$ 和 $\\approx 0.77$）不符。此外，两名患者都应接受治疗的结论是错误的，因为患者1的检验后概率低于治疗阈值。\n**结论：错误。**\n\n**E. 患者1的 $p_{\\text{post}} \\approx 0.10$，患者2的 $p_{\\text{post}} \\approx 0.50$；由 $LR_{+}$ 产生的固定加性增加解释了这种差异，而治疗仅取决于 $p_{\\text{post}}$ 是否超过 $p_T$。**\n引用的检验后概率是错误的。“由 $LR_{+}$ 产生的固定加性增加解释了这种差异”的推理从概率论的角度来看是无稽之谈。$LR_{+}$ 的效应是在优势比上是乘法性的，这导致了概率的非线性转换。不存在固定的加性增加。\n**结论：错误。**", "answer": "$$\\boxed{A}$$", "id": "4828288"}, {"introduction": "在现实世界中，临床诊断很少依赖单一线索，而是整合多方信息的过程。本练习在前两个练习的基础上，模拟了这一真实场景。您将学习如何序贯应用多个独立的临床发现（每个发现都带有自己的似然比），逐步修正您对诊断的判断，这体现了临床医生在床边综合分析病史、体格检查和辅助检查的思维过程。", "problem": "一名患有未分化呼吸困难的患者来到急诊科。您正在考虑诊断其为充血性心力衰竭（CHF）。在进行有针对性的床边检查之前，根据初步临床信息，您估计CHF的检验前概率为 $p_{0} = 0.20$。然后，您在检查中观察到颈静脉扩张（JVD），随后在听诊中注意到没有肺部啰音。根据一项经过验证的证据综合分析，阳性JVD的似然比为 $\\text{LR}_{+} = 5$，无啰音的似然比为 $\\text{LR}_{-} = 0.3$。假设在真实的CHF状态下，这两个发现是相互独立的，并且可以依次应用似然比。\n\n仅使用贝叶斯定理的基本定义、优势比的定义和似然比的定义，在每个发现之后依次更新CHF的概率（首先应用颈静脉扩张的发现，然后应用无啰音的发现），并报告在综合两个发现后的最终后验概率。将您的最终答案表示为小数，并四舍五入到 $4$ 位有效数字。不要使用百分号。", "solution": "该问题要求使用贝叶斯推断的基本原理，对诊断的概率进行序贯更新。我们已知两个独立临床发现的检验前概率和似然比。\n\n设 $D$ 为患者患有充血性心力衰竭（CHF）的事件。\n设 $E_1$ 为观察到颈静脉扩张（JVD）的事件。\n设 $E_2$ 为观察到没有肺部啰音的事件。\n\n已知信息如下：\n1.  CHF的检验前概率：$P(D) = p_0 = 0.20$。\n2.  阳性JVD发现的似然比：$\\text{LR}_{+, E_1} = \\frac{P(E_1|D)}{P(E_1|D^c)} = 5$。\n3.  无啰音的似然比：$\\text{LR}_{-, E_2} = \\frac{P(E_2|D)}{P(E_2|D^c)} = 0.3$。\n\n此过程依赖于概率和优势比之间的关系，以及贝叶斯定理的优势比形式。\n事件 $A$ 的优势比，记为 $O(A)$，定义为该事件发生的概率与不发生的概率之比：\n$$\nO(A) = \\frac{P(A)}{1-P(A)}\n$$\n反之，可以从优势比中恢复概率：\n$$\nP(A) = \\frac{O(A)}{1+O(A)}\n$$\n贝叶斯定理的优势比形式表明，检验后优势比是检验前优势比与发现的似然比（LR）的乘积：\n$$\nO(D|\\text{finding}) = O(D) \\times \\text{LR}_{\\text{finding}}\n$$\n\n解题过程按要求分步进行。\n\n**步骤1：计算CHF的检验前优势比。**\n使用检验前概率 $P(D) = 0.20$，检验前优势比 $O(D)$ 为：\n$$\nO(D) = \\frac{P(D)}{1-P(D)} = \\frac{0.20}{1-0.20} = \\frac{0.20}{0.80} = 0.25\n$$\n\n**步骤2：在JVD发现（$E_1$）后更新优势比和概率。**\n我们将JVD的似然比 $\\text{LR}_{+, E_1} = 5$ 应用于检验前优势比，以求得中间检验后优势比 $O(D|E_1)$。\n$$\nO(D|E_1) = O(D) \\times \\text{LR}_{+, E_1} = 0.25 \\times 5 = 1.25\n$$\n这是观察到JVD后CHF的优势比。为了求得相应的中间概率 $P(D|E_1)$，我们将优势比转换回概率：\n$$\nP(D|E_1) = \\frac{O(D|E_1)}{1+O(D|E_1)} = \\frac{1.25}{1+1.25} = \\frac{1.25}{2.25} = \\frac{5}{9}\n$$\n\n**步骤3：在无啰音发现（$E_2$）后更新优势比和概率。**\n第一个发现后的概率 $P(D|E_1)$ 作为第二个发现的新检验前概率。等效地，我们可以使用中间优势比 $O(D|E_1) = 1.25$ 作为下一次更新的检验前优势比。问题假设了条件独立性，这允许似然比的序贯相乘。现在我们应用无啰音的似然比 $\\text{LR}_{-, E_2} = 0.3$。\n最终的检验后优势比 $O(D|E_1, E_2)$ 为：\n$$\nO(D|E_1, E_2) = O(D|E_1) \\times \\text{LR}_{-, E_2} = 1.25 \\times 0.3 = 0.375\n$$\n\n**步骤4：计算最终的后验概率。**\n最后一步是将最终的检验后优势比 $O(D|E_1, E_2)$ 转换为最终的后验概率 $P(D|E_1, E_2)$。\n$$\nP(D|E_1, E_2) = \\frac{O(D|E_1, E_2)}{1+O(D|E_1, E_2)} = \\frac{0.375}{1+0.375} = \\frac{0.375}{1.375}\n$$\n为了简化分数，我们可以将小数写成分数形式：$0.375 = \\frac{3}{8}$ 和 $1.375 = \\frac{11}{8}$。\n$$\nP(D|E_1, E_2) = \\frac{3/8}{11/8} = \\frac{3}{11}\n$$\n计算数值：\n$$\n\\frac{3}{11} \\approx 0.272727...\n$$\n\n**步骤5：对最终答案进行四舍五入。**\n问题要求将最终答案四舍五入到 $4$ 位有效数字。\n数值 $0.272727...$ 四舍五入到 $4$ 位有效数字是 $0.2727$。", "answer": "$$\n\\boxed{0.2727}\n$$", "id": "4828336"}]}
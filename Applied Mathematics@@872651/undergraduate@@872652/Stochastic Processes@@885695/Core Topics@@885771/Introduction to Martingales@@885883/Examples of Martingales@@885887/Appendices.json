{"hands_on_practices": [{"introduction": "A simple random walk with zero-mean steps is the quintessential example of a martingale. However, non-linear functions of the walk, such as its square $S_n^2$, typically lose this 'fair game' property as the squared position tends to drift upwards. This exercise [@problem_id:1299933] challenges you to find the precise deterministic adjustment needed to transform the squared random walk into a martingale, introducing the fundamental concept of a compensator.", "problem": "A quantitative analyst is developing a simple model for a speculative asset. The model assumes the asset's price starts at zero, so $S_0 = 0$. At the end of each day $i$, the price changes by an amount $X_i$. The total price at the end of day $n$ is given by the sum of these daily changes, $S_n = \\sum_{i=1}^{n} X_i$. The daily changes $X_1, X_2, \\ldots$ are independent and identically distributed random variables. The market is assumed to be unbiased, meaning the expected daily change is zero, $\\mathbb{E}[X_i] = 0$. The daily volatility is constant, with the variance of the daily change being $\\text{Var}(X_i) = \\sigma^2$, where $\\sigma^2$ is a positive constant.\n\nThe analyst considers a derivative instrument whose value at the end of day $n$ is given by $V_n = S_n^2 - cn$, where $c$ is a constant daily fee. The analyst wants to set the fee $c$ to make the instrument a \"fair game\". A fair game is defined by the property that the expected value of the instrument tomorrow, given all information up to and including today, is equal to its value today. Mathematically, this condition is expressed as $\\mathbb{E}[V_{n+1} \\mid S_0, S_1, \\dots, S_n] = V_n$ for all $n \\ge 0$.\n\nDetermine the value of the constant fee $c$ that makes this instrument a fair game. Express your answer in terms of the given parameters.", "solution": "The problem asks for the value of the constant $c$ such that the process $V_n = S_n^2 - cn$ satisfies the \"fair game\" condition $\\mathbb{E}[V_{n+1} \\mid S_0, S_1, \\dots, S_n] = V_n$. Let the information available at time $n$, represented by the history $(S_0, S_1, \\dots, S_n)$, be denoted by $\\mathcal{F}_n$. The condition can be written as $\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n] = V_n$.\n\nWe start by expressing $V_{n+1}$ in terms of quantities at time $n$ and the new random change $X_{n+1}$.\nBy definition, $V_{n+1} = S_{n+1}^2 - c(n+1)$.\nThe price at time $n+1$ is $S_{n+1} = S_n + X_{n+1}$.\nSubstituting this into the expression for $V_{n+1}$:\n$$V_{n+1} = (S_n + X_{n+1})^2 - c(n+1)$$\nExpanding the squared term:\n$$V_{n+1} = S_n^2 + 2S_n X_{n+1} + X_{n+1}^2 - c(n+1)$$\n\nNow, we take the conditional expectation of $V_{n+1}$ with respect to the information $\\mathcal{F}_n$:\n$$\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n] = \\mathbb{E}[S_n^2 + 2S_n X_{n+1} + X_{n+1}^2 - c(n+1) \\mid \\mathcal{F}_n]$$\n\nUsing the linearity of conditional expectation, we can break this down into several terms:\n$$\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n] = \\mathbb{E}[S_n^2 \\mid \\mathcal{F}_n] + \\mathbb{E}[2S_n X_{n+1} \\mid \\mathcal{F}_n] + \\mathbb{E}[X_{n+1}^2 \\mid \\mathcal{F}_n] - \\mathbb{E}[c(n+1) \\mid \\mathcal{F}_n]$$\n\nLet's evaluate each term:\n1.  $S_n$ is known at time $n$, so it is $\\mathcal{F}_n$-measurable. This means $\\mathbb{E}[S_n^2 \\mid \\mathcal{F}_n] = S_n^2$. Similarly, the constant term $c(n+1)$ is also known, so $\\mathbb{E}[c(n+1) \\mid \\mathcal{F}_n] = c(n+1)$.\n\n2.  For the term $\\mathbb{E}[2S_n X_{n+1} \\mid \\mathcal{F}_n]$, we can take the known factor $2S_n$ out of the conditional expectation (\"taking out what is known\"):\n    $$\\mathbb{E}[2S_n X_{n+1} \\mid \\mathcal{F}_n] = 2S_n \\mathbb{E}[X_{n+1} \\mid \\mathcal{F}_n]$$\n    Since the random variable $X_{n+1}$ is independent of the past history $\\mathcal{F}_n$, its conditional expectation is just its unconditional expectation: $\\mathbb{E}[X_{n+1} \\mid \\mathcal{F}_n] = \\mathbb{E}[X_{n+1}]$.\n    The problem states that $\\mathbb{E}[X_i] = 0$ for all $i$. Thus, $\\mathbb{E}[X_{n+1}] = 0$.\n    So, this term becomes $2S_n \\times 0 = 0$.\n\n3.  For the term $\\mathbb{E}[X_{n+1}^2 \\mid \\mathcal{F}_n]$, since $X_{n+1}$ is independent of $\\mathcal{F}_n$, we have $\\mathbb{E}[X_{n+1}^2 \\mid \\mathcal{F}_n] = \\mathbb{E}[X_{n+1}^2]$.\n    We are given the variance $\\text{Var}(X_{n+1}) = \\sigma^2$ and the mean $\\mathbb{E}[X_{n+1}] = 0$. The variance is defined as $\\text{Var}(X_{n+1}) = \\mathbb{E}[X_{n+1}^2] - (\\mathbb{E}[X_{n+1}])^2$.\n    Substituting the known values:\n    $$\\sigma^2 = \\mathbb{E}[X_{n+1}^2] - (0)^2$$\n    Therefore, $\\mathbb{E}[X_{n+1}^2] = \\sigma^2$.\n\nSubstituting these results back into the equation for $\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n]$:\n$$\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n] = S_n^2 + 0 + \\sigma^2 - c(n+1)$$\n$$\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n] = S_n^2 + \\sigma^2 - cn - c$$\n\nNow we apply the fair game condition, $\\mathbb{E}[V_{n+1} \\mid \\mathcal{F}_n] = V_n$. We know that $V_n = S_n^2 - cn$.\nSetting the two expressions equal:\n$$S_n^2 + \\sigma^2 - cn - c = S_n^2 - cn$$\n\nWe can cancel the $S_n^2$ and $-cn$ terms from both sides of the equation:\n$$\\sigma^2 - c = 0$$\nSolving for $c$, we get:\n$$c = \\sigma^2$$\n\nThus, the daily fee $c$ must be equal to the variance of the daily price change, $\\sigma^2$, for the instrument to be a fair game.", "answer": "$$\\boxed{\\sigma^{2}}$$", "id": "1299933"}, {"introduction": "Martingales are not limited to additive structures; they can also be formed through multiplication, a concept vital for modeling processes that exhibit growth or decay, such as asset prices. This problem [@problem_id:1299939] asks you to determine the correct scaling factor to turn a product of independent random variables into a martingale. Mastering this reveals the structure of exponential martingales, which are fundamental tools in mathematical finance.", "problem": "Consider a sequence of positive, independent and identically distributed (i.i.d.) random variables $\\{X_k\\}_{k \\ge 1}$. The common mean of these random variables is $\\mathbb{E}[X_k] = \\mu$, where $\\mu$ is a positive constant and $\\mu \\neq 1$.\n\nLet a new stochastic process $\\{M_n\\}_{n \\ge 0}$ be defined as follows:\n$M_0 = 1$\n$M_n = c^n \\prod_{k=1}^{n} X_k$ for $n \\ge 1$\n\nHere, $c$ is a real, non-zero constant. The process $\\{M_n\\}$ is considered with respect to the natural filtration $\\mathcal{F}_n = \\sigma(X_1, \\dots, X_n)$, which is the information generated by the first $n$ variables of the sequence.\n\nDetermine the specific value of the constant $c$ such that the process $\\{M_n\\}_{n \\ge 0}$ is a martingale with respect to the filtration $\\{\\mathcal{F}_n\\}_{n \\ge 0}$. Express your answer in terms of $\\mu$.", "solution": "We require that $\\{M_{n}\\}$ be a martingale with respect to $\\{\\mathcal{F}_{n}\\}$, i.e., for all $n \\geq 1$,\n$$\n\\mathbb{E}[|M_{n}|]  \\infty,\\quad M_{n} \\text{ is } \\mathcal{F}_{n}\\text{-measurable},\\quad \\mathbb{E}[M_{n} \\mid \\mathcal{F}_{n-1}] = M_{n-1}.\n$$\nMeasurability holds by construction since $M_{n} = c^{n}\\prod_{k=1}^{n}X_{k}$ is a function of $(X_{1},\\dots,X_{n})$. For integrability, using independence and positivity,\n$$\n\\mathbb{E}[M_{n}] = c^{n}\\,\\mathbb{E}\\!\\left[\\prod_{k=1}^{n}X_{k}\\right] = c^{n}\\prod_{k=1}^{n}\\mathbb{E}[X_{k}] = c^{n}\\mu^{n},\n$$\nwhich is finite for any finite $c$ and finite $\\mu$.\n\nFor the martingale property, compute the conditional expectation using independence of $X_{n}$ from $\\mathcal{F}_{n-1}$:\n$$\n\\mathbb{E}[M_{n} \\mid \\mathcal{F}_{n-1}] = \\mathbb{E}\\!\\left[c^{n}\\left(\\prod_{k=1}^{n-1}X_{k}\\right)X_{n} \\,\\middle|\\, \\mathcal{F}_{n-1}\\right]\n= c^{n}\\left(\\prod_{k=1}^{n-1}X_{k}\\right)\\mathbb{E}[X_{n}]\n= c^{n}\\mu \\left(\\prod_{k=1}^{n-1}X_{k}\\right).\n$$\nWe require this to equal $M_{n-1} = c^{n-1}\\prod_{k=1}^{n-1}X_{k}$ almost surely, which reduces to\n$$\nc^{n}\\mu \\left(\\prod_{k=1}^{n-1}X_{k}\\right) = c^{n-1}\\left(\\prod_{k=1}^{n-1}X_{k}\\right).\n$$\nSince $\\prod_{k=1}^{n-1}X_{k}  0$ almost surely and $c \\neq 0$, we can cancel to obtain\n$$\nc\\,\\mu = 1,\n$$\nhence\n$$\nc = \\frac{1}{\\mu}.\n$$\nThis choice ensures $\\{M_{n}\\}$ is a martingale. (If $\\mu=1$, this gives $c=1$, which also works; the given condition $\\mu \\neq 1$ is not required for the derivation but does not affect the result.)", "answer": "$$\\boxed{\\frac{1}{\\mu}}$$", "id": "1299939"}, {"introduction": "The martingale property is not just a passive descriptor of a process; it can be an active design principle. This exercise [@problem_id:1299908] provides a compelling example by asking you to define the rules of a random walk—its transition probabilities—to ensure that the reciprocal of its position forms a martingale. This demonstrates the prescriptive power of the martingale concept in defining the \"fair\" dynamics of a stochastic system.", "problem": "A particle performs a random walk on the set of positive integers, $\\mathbb{Z}^+ = \\{1, 2, 3, \\dots\\}$. Let $X_n$ denote the position of the particle at time step $n$, which is a positive integer for all $n \\ge 0$. The rules of movement are defined as follows: from any state $k  1$, the particle jumps to state $k+1$ with a probability $p_k$ or to state $k-1$ with a probability $1-p_k$. The movement from state $k=1$ is constrained such that the particle's position must remain within $\\mathbb{Z}^+$.\n\nLet the process $\\{M_n\\}_{n\\geq 0}$ be defined by the reciprocal of the particle's position, $M_n = 1/X_n$. We are interested in the specific conditions under which $\\{M_n\\}$ becomes a martingale with respect to the natural filtration generated by the walk, $\\mathcal{F}_n = \\sigma(X_0, X_1, \\dots, X_n)$.\n\nDetermine the transition probability $p_k$ as a function of $k$ for all integers $k  1$ that ensures $\\{M_n\\}$ is a martingale.", "solution": "We require $\\{M_{n}\\}$ to satisfy the martingale property $E[M_{n+1} \\mid \\mathcal{F}_{n}] = M_{n}$ for all $n$. Since $\\{X_{n}\\}$ is a time-homogeneous Markov chain and $M_{n} = 1/X_{n}$, the martingale condition reduces to the harmonicity condition\n$$\nE\\!\\left[\\frac{1}{X_{n+1}} \\,\\middle|\\, X_{n}=k\\right] = \\frac{1}{k}.\n$$\nFor $k1$, the transition probabilities are $P(X_{n+1}=k+1 \\mid X_{n}=k)=p_{k}$ and $P(X_{n+1}=k-1 \\mid X_{n}=k)=1-p_{k}$. Therefore,\n$$\nE\\!\\left[\\frac{1}{X_{n+1}} \\,\\middle|\\, X_{n}=k\\right] = p_{k}\\cdot \\frac{1}{k+1} + (1-p_{k})\\cdot \\frac{1}{k-1}.\n$$\nImposing the martingale condition gives\n$$\np_{k}\\cdot \\frac{1}{k+1} + (1-p_{k})\\cdot \\frac{1}{k-1} = \\frac{1}{k}.\n$$\nSolve for $p_{k}$:\n$$\np_{k}\\!\\left(\\frac{1}{k+1} - \\frac{1}{k-1}\\right) + \\frac{1}{k-1} = \\frac{1}{k},\n$$\n$$\np_{k}\\!\\left(-\\frac{2}{k^{2}-1}\\right) = \\frac{1}{k} - \\frac{1}{k-1} = -\\frac{1}{k(k-1)},\n$$\n$$\np_{k} = \\frac{-\\frac{1}{k(k-1)}}{-\\frac{2}{k^{2}-1}} = \\frac{k^{2}-1}{2k(k-1)} = \\frac{(k-1)(k+1)}{2k(k-1)} = \\frac{k+1}{2k}.\n$$\nThus, for all $k1$, the choice\n$$\np_{k} = \\frac{k+1}{2k}\n$$\nensures that $\\{M_{n}\\}$ is a martingale. (Behavior at $k=1$ is boundary-specific and does not affect the form of $p_{k}$ for $k1$ requested here.)", "answer": "$$\\boxed{\\frac{k+1}{2k}}$$", "id": "1299908"}]}
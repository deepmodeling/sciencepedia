{"hands_on_practices": [{"introduction": "Many problems involving stopping times can be reframed as a \"game of chance\" where we want to find the probability of winning. This exercise provides a tangible scenario with a deck of cards, which we can model as a random walk with specific boundaries for \"winning\" and \"losing\". By constructing an appropriate martingale based on the card's position and applying the Optional Stopping Theorem, we can solve for the desired probability in a surprisingly direct manner [@problem_id:1298885].", "problem": "Consider a deck of $N$ cards, with one specially designated \"Target\" card. The deck is shuffled according to the following procedure at each time step:\n1. A card is selected uniformly at random from the entire deck of $N$ cards (i.e., each card has a $1/N$ probability of being chosen).\n2. If the selected card is the Target card itself, the Target is moved to the top of the deck (position 1).\n3. If the selected card is not the Target card and its current position is *above* the Target card, the Target card is moved down by one position (e.g., from position $p$ to $p+1$).\n4. If the selected card is not the Target card and its current position is *below* the Target card, the Target card's position remains unchanged.\n\nAll other cards are shifted as necessary to accommodate the Target's movement while maintaining their relative order. Positions are numbered from $1$ (top) to $N$ (bottom).\n\nThe process begins with the Target card at an initial position $p_0$. The process stops when the Target card's position first reaches either a 'goal' position $k$ or a 'penalty' position 1.\n\nGiven that the integer parameters satisfy $1  p_0  k \\le N$, determine the probability that the Target card reaches the goal position $k$ before it reaches the penalty position 1. Express your answer as a function of $p_0$ and $k$.", "solution": "Let $f(p)$ denote the probability that, starting with the Target at position $p$, the process hits the goal position $k$ before the penalty position $1$. We have boundary conditions $f(1)=0$ and $f(k)=1$. For $2 \\leq p \\leq k-1$, we apply first-step analysis using the law of total probability over the outcome of the random card selection.\n\nFrom position $p$:\n- With probability $\\frac{1}{N}$, the Target is selected and moved to position $1$, leading to immediate absorption at the penalty, contributing $\\frac{1}{N}\\cdot f(1)=0$.\n- With probability $\\frac{p-1}{N}$, a card above the Target is selected, so the Target moves to $p+1$, contributing $\\frac{p-1}{N} f(p+1)$.\n- With probability $\\frac{N-p}{N}$, a card below the Target is selected, so the position remains $p$, contributing $\\frac{N-p}{N} f(p)$.\n\nThus, for $2 \\leq p \\leq k-1$,\n$$\nf(p) \\;=\\; \\frac{p-1}{N} f(p+1) \\;+\\; \\frac{N-p}{N} f(p).\n$$\nRearranging,\n$$\nf(p) - \\frac{N-p}{N} f(p) \\;=\\; \\frac{p-1}{N} f(p+1)\n\\;\\;\\Longrightarrow\\;\\;\n\\frac{p}{N} f(p) \\;=\\; \\frac{p-1}{N} f(p+1)\n\\;\\;\\Longrightarrow\\;\\;\np\\, f(p) \\;=\\; (p-1)\\, f(p+1).\n$$\nThis recurrence yields\n$$\nf(p+1) \\;=\\; \\frac{p}{p-1}\\, f(p),\n$$\nand by induction,\n$$\nf(p) \\;=\\; (p-1)\\, f(2), \\quad \\text{for } 2 \\leq p \\leq k.\n$$\nImposing the boundary condition $f(k)=1$ gives\n$$\n1 \\;=\\; f(k) \\;=\\; (k-1)\\, f(2) \\;\\;\\Longrightarrow\\;\\; f(2) \\;=\\; \\frac{1}{k-1}.\n$$\nTherefore,\n$$\nf(p) \\;=\\; \\frac{p-1}{k-1}, \\quad \\text{for } 2 \\leq p \\leq k.\n$$\nWith initial position $p_{0}$ satisfying $1  p_{0}  k$, the required probability is\n$$\nf(p_{0}) \\;=\\; \\frac{p_{0}-1}{k-1}.\n$$", "answer": "$$\\boxed{\\frac{p_{0}-1}{k-1}}$$", "id": "1298885"}, {"introduction": "Transitioning from discrete steps to continuous time, we encounter Brownian motion, the cornerstone of modeling continuous random processes in physics and finance. This problem asks for the average time a standard Brownian motion takes to exit a fixed interval, a fundamental question for understanding the persistence of a random process within a given range. Solving this requires using the martingale $M_{t} = B_{t}^{2} - t$ and a careful application of the Optional Stopping Theorem, highlighting the necessary analytical rigor, such as using bounded stopping times and convergence theorems [@problem_id:2989359].", "problem": "Let $\\{B_{t}\\}_{t \\ge 0}$ be a one-dimensional standard Brownian motion (BM) on a filtered probability space $(\\Omega,\\mathcal{F},\\{\\mathcal{F}_{t}\\}_{t \\ge 0},\\mathbb{P})$ satisfying the usual conditions, with $B_{0}=0$. Define the first exit time from the open interval $(-a,a)$, for a fixed constant $a0$, by\n$$\n\\tau_{-a,a} \\coloneqq \\inf\\{t \\ge 0 : B_{t} \\notin (-a,a)\\}.\n$$\nUsing only fundamental properties of Brownian motion including Itô’s formula and the quadratic variation $[B]_{t}=t$, proceed as follows:\n- Prove that the process $M_{t} \\coloneqq B_{t}^{2}-t$ is an $\\{\\mathcal{F}_{t}\\}$-martingale.\n- Prove that $\\mathbb{P}(\\tau_{-a,a}\\infty)=1$.\n- Carefully justify the integrability of $\\tau_{-a,a}$ and compute the expectation $\\mathbb{E}[\\tau_{-a,a}]$ by applying the optional stopping theorem (OST) at the bounded stopping times $\\tau_{-a,a}\\wedge n$ for $n\\in\\mathbb{N}$, and then letting $n \\to \\infty$ with all limiting steps justified.\n\nExpress your final answer as a closed-form analytic expression in terms of $a$. No numerical approximation is required.", "solution": "We will address the three tasks in the order presented. Let $\\tau = \\tau_{-a,a}$.\n\n**1. Proof that $M_{t} \\coloneqq B_{t}^{2}-t$ is a martingale**\n\nTo prove that $M_t$ is a martingale with respect to the filtration $\\{\\mathcal{F}_t\\}_{t \\ge 0}$, we must show three properties:\ni. $M_t$ is adapted to $\\{\\mathcal{F}_t\\}$.\nii. $M_t$ is integrable, i.e., $\\mathbb{E}[|M_t|]  \\infty$ for all $t \\ge 0$.\niii. For all $s  t$, $\\mathbb{E}[M_t | \\mathcal{F}_s] = M_s$.\n\ni. Adaptivity: Since $\\{B_t\\}_{t \\ge 0}$ is an $\\{\\mathcal{F}_t\\}$-adapted process, $B_t^2$ is also $\\mathcal{F}_t$-adapted for each $t \\ge 0$. The function $g(t)=t$ is deterministic and thus adapted. Therefore, their difference $M_t = B_t^2 - t$ is $\\mathcal{F}_t$-adapted.\n\nii. Integrability: For any $t \\ge 0$, we have $\\mathbb{E}[|M_t|] = \\mathbb{E}[|B_t^2 - t|] \\le \\mathbb{E}[B_t^2] + |t|$. Since $B_t$ is a standard Brownian motion, $B_t \\sim N(0, t)$, so its second moment is $\\mathbb{E}[B_t^2] = \\text{Var}(B_t) + (\\mathbb{E}[B_t])^2 = t + 0^2 = t$. Thus, $\\mathbb{E}[|M_t|] \\le t + t = 2t$. For any finite $t$, $2t  \\infty$, so $M_t$ is integrable.\n\niii. Martingale property: We use Itô's formula for the function $f(x) = x^2$ applied to the process $B_t$. We have $f'(x) = 2x$ and $f''(x) = 2$. Itô's formula states:\n$$\nf(B_t) - f(B_0) = \\int_0^t f'(B_s) dB_s + \\frac{1}{2} \\int_0^t f''(B_s) d[B]_s\n$$\nSubstituting $f(x)=x^2$ and its derivatives, and using the given conditions $B_0=0$ and $[B]_t=t$:\n$$\nB_t^2 - B_0^2 = \\int_0^t 2B_s dB_s + \\frac{1}{2} \\int_0^t 2 \\, d[B]_s\n$$\n$$\nB_t^2 - 0 = \\int_0^t 2B_s dB_s + \\int_0^t ds\n$$\n$$\nB_t^2 = 2\\int_0^t B_s dB_s + t\n$$\nRearranging the terms, we get an expression for $M_t$:\n$$\nM_t = B_t^2 - t = 2\\int_0^t B_s dB_s\n$$\nThe right-hand side is an Itô integral. A process $X_t = \\int_0^t H_s dB_s$ is a martingale if the integrand $H_s$ is an adapted process satisfying $\\mathbb{E}[\\int_0^t H_s^2 ds]  \\infty$. Here, the integrand is $H_s = 2B_s$, which is adapted. We check the square-integrability condition:\n$$\n\\mathbb{E}\\left[\\int_0^t (2B_s)^2 ds\\right] = 4 \\int_0^t \\mathbb{E}[B_s^2] ds = 4 \\int_0^t s \\, ds = 4 \\left[\\frac{s^2}{2}\\right]_0^t = 2t^2\n$$\nSince $2t^2  \\infty$ for all finite $t$, the process $M_t = 2\\int_0^t B_s dB_s$ is a true martingale, not just a local one. This completes the proof that $M_t = B_t^2-t$ is a martingale.\n\n**2. Proof that $\\mathbb{P}(\\tau  \\infty) = 1$**\n\nThe event $\\{\\tau  t\\}$ is the event that the Brownian motion has stayed within the interval $(-a,a)$ for the entire time interval $[0,t]$. This implies that at time $t$, its position must be within $(-a,a)$. Formally:\n$$\n\\{\\tau  t\\} = \\{\\sup_{0 \\le s \\le t} |B_s|  a\\} \\implies \\{|B_t|  a\\}\n$$\nTherefore, the probability of the first event is less than or equal to the probability of the second:\n$$\n\\mathbb{P}(\\tau  t) \\le \\mathbb{P}(|B_t|  a)\n$$\nFor a standard Brownian motion, $B_t \\sim N(0, t)$, so $B_t/\\sqrt{t}$ is a standard normal random variable, $Z \\sim N(0,1)$.\n$$\n\\mathbb{P}(|B_t|  a) = \\mathbb{P}(-a  B_t  a) = \\mathbb{P}\\left(-\\frac{a}{\\sqrt{t}}  \\frac{B_t}{\\sqrt{t}}  \\frac{a}{\\sqrt{t}}\\right) = \\mathbb{P}\\left(|Z|  \\frac{a}{\\sqrt{t}}\\right)\n$$\nAs $t \\to \\infty$, $a/\\sqrt{t} \\to 0$. Since the cumulative distribution function of a standard normal variable is continuous, the probability that $Z$ is in an interval that shrinks to a point is zero:\n$$\n\\lim_{t \\to \\infty} \\mathbb{P}\\left(|Z|  \\frac{a}{\\sqrt{t}}\\right) = \\mathbb{P}(|Z|  0) = 0\n$$\nBy the Squeeze Theorem, since $0 \\le \\mathbb{P}(\\tau  t) \\le \\mathbb{P}(|B_t|  a)$, we have:\n$$\n\\lim_{t \\to \\infty} \\mathbb{P}(\\tau  t) = 0\n$$\nThe event that the process never exits is $\\{\\tau = \\infty\\}$. This can be written as the intersection of a decreasing sequence of events: $\\{\\tau = \\infty\\} = \\bigcap_{n=1}^\\infty \\{\\tau  n\\}$. By the continuity of probability measure for decreasing events:\n$$\n\\mathbb{P}(\\tau = \\infty) = \\mathbb{P}\\left(\\bigcap_{n=1}^\\infty \\{\\tau  n\\}\\right) = \\lim_{n\\to\\infty} \\mathbb{P}(\\tau  n) = 0\n$$\nTherefore, the probability that the process exits in finite time is $\\mathbb{P}(\\tau  \\infty) = 1 - \\mathbb{P}(\\tau = \\infty) = 1$.\n\n**3. Justification and computation of $\\mathbb{E}[\\tau]$**\n\nWe follow the prescribed method of using the sequence of stopped processes at times $\\tau_n \\coloneqq \\tau \\wedge n$ for $n \\in \\mathbb{N}$.\n\nFor any $n \\in \\mathbb{N}$, the stopping time $\\tau_n$ is bounded above by $n$. We can apply the Optional Stopping Theorem to the martingale $M_t = B_t^2 - t$ and the bounded stopping time $\\tau_n$. This gives:\n$$\n\\mathbb{E}[M_{\\tau_n}] = \\mathbb{E}[M_0]\n$$\nSince $B_0=0$, we have $M_0 = B_0^2 - 0 = 0$. So, $\\mathbb{E}[M_{\\tau_n}] = 0$.\nSubstituting the definition of $M_t$, we get $\\mathbb{E}[B_{\\tau_n}^2 - \\tau_n] = 0$. By linearity of expectation, this yields:\n$$\n\\mathbb{E}[\\tau_n] = \\mathbb{E}[B_{\\tau_n}^2]\n$$\nThis equality holds for all $n \\in \\mathbb{N}$. We now take the limit as $n \\to \\infty$.\n\nConsider the left-hand side, $\\mathbb{E}[\\tau_n]$. The sequence of random variables $\\{\\tau_n\\}_{n\\in\\mathbb{N}}$ is non-negative and non-decreasing since $\\tau_n = \\min(\\tau, n) \\le \\min(\\tau, n+1) = \\tau_{n+1}$. As shown in part 2, $\\tau  \\infty$ almost surely, so $\\lim_{n\\to\\infty} \\tau_n = \\tau$ almost surely. By the Monotone Convergence Theorem, we can interchange the limit and expectation:\n$$\n\\lim_{n\\to\\infty} \\mathbb{E}[\\tau_n] = \\mathbb{E}[\\lim_{n\\to\\infty} \\tau_n] = \\mathbb{E}[\\tau]\n$$\nThis step also implies that if the limit of the right-hand side is finite, then $\\mathbb{E}[\\tau]$ is finite, which establishes the integrability of $\\tau$.\n\nConsider the right-hand side, $\\mathbb{E}[B_{\\tau_n}^2]$. We analyze the random variables $B_{\\tau_n}^2$.\nBy definition of $\\tau$, we have $|B_s|  a$ for all $s  \\tau$.\n- If a path exits before time $n$ (i.e., $\\tau \\le n$), then $\\tau_n = \\tau$. By continuity of Brownian paths, $|B_{\\tau_n}| = |B_\\tau| = a$.\n- If a path has not exited by time $n$ (i.e., $\\tau  n$), then $\\tau_n = n$, and $|B_{\\tau_n}| = |B_n|  a$.\nIn both cases, we have $|B_{\\tau_n}| \\le a$. This means the sequence of random variables $\\{B_{\\tau_n}^2\\}_{n\\in\\mathbb{N}}$ is uniformly bounded by $a^2$.\n\nAs $n \\to \\infty$, we have $\\tau_n \\to \\tau$ almost surely. Since Brownian motion paths are continuous almost surely, this implies $B_{\\tau_n} \\to B_\\tau$ almost surely. Consequently, $B_{\\tau_n}^2 \\to B_\\tau^2$ almost surely. By the continuity property at the stopping time, $|B_\\tau| = a$ almost surely (since $\\mathbb{P}(\\tau  \\infty)=1$), so $B_\\tau^2 = a^2$ almost surely.\n\nWe have a sequence of random variables $\\{B_{\\tau_n}^2\\}$ that converges almost surely to the constant $a^2$ and is dominated by the integrable random variable $a^2$ (since $\\mathbb{E}[a^2] = a^2  \\infty$). By the Dominated Convergence Theorem (or, more specifically, the Bounded Convergence Theorem), we can interchange the limit and expectation:\n$$\n\\lim_{n\\to\\infty} \\mathbb{E}[B_{\\tau_n}^2] = \\mathbb{E}[\\lim_{n\\to\\infty} B_{\\tau_n}^2] = \\mathbb{E}[a^2] = a^2\n$$\nEquating the limits of the left and right sides of $\\mathbb{E}[\\tau_n] = \\mathbb{E}[B_{\\tau_n}^2]$:\n$$\n\\mathbb{E}[\\tau] = a^2\n$$\nSince $a^2$ is a finite value, the expectation of $\\tau$ is finite, and thus $\\tau$ is an integrable random variable. The final expression for the expectation is $a^2$.", "answer": "$$\n\\boxed{a^{2}}\n$$", "id": "2989359"}, {"introduction": "Real-world thresholds are often not static. This practice problem extends our analysis to a dynamic scenario where a Brownian motion process is stopped by a linearly moving boundary. This setup models situations like an asset's value needing to overcome a constantly changing cost basis. Here, we'll see how a powerful corollary of the Optional Stopping Theorem, often known as Wald's Identity, provides an elegant shortcut to finding the expected hitting time for a process with drift [@problem_id:1298873].", "problem": "Let $B_t$ be a standard one-dimensional Brownian motion starting from the origin, i.e., $B_0 = 0$. Consider the stopping time $\\tau$ defined as the first time the process $B_t$ hits a linearly moving boundary. The boundary is described by the equation $y(t) = a + bt$, where $a$ and $b$ are real-valued constants. The stopping time is thus given by $\\tau = \\inf\\{t \\ge 0 : B_t = a + bt\\}$.\n\nAssuming that the parameters satisfy the conditions $a  0$ and $b  0$, determine the expected value of the stopping time, $\\mathbb{E}[\\tau]$. Your final answer should be a symbolic expression in terms of $a$ and $b$.", "solution": "Define $X_{t} = B_{t} - b t$. Then $X_{t}$ is a Brownian motion with constant drift $\\mu = -b$ and unit diffusion coefficient, started at $X_{0} = 0$. The stopping time $\\tau = \\inf\\{t \\ge 0 : B_{t} = a + b t\\}$ is equivalently the first hitting time of the constant level $a$ by $X_{t}$:\n$$\n\\tau = \\inf\\{t \\ge 0 : X_{t} = a\\}.\n$$\nUnder the given conditions $a  0$ and $b  0$, we have $\\mu = -b  0$, so $X_{t}$ drifts to $+\\infty$ and hits $a$ almost surely in finite time.\n\nLet $u(x) = \\mathbb{E}_{x}[\\tau]$ denote the expected hitting time of level $a$ starting from $X_{0} = x$ for the diffusion $X_{t}$ with generator\n$$\n\\mathcal{L} f(x) = \\frac{1}{2} f''(x) + \\mu f'(x).\n$$\nThe function $u$ solves the boundary value problem\n$$\n\\frac{1}{2} u''(x) + \\mu u'(x) = -1 \\quad \\text{for } x  a,\\qquad u(a) = 0,\n$$\ntogether with the condition that $u$ does not grow exponentially as $x \\to -\\infty$.\n\nSet $g(x) = u'(x)$. Then\n$$\n\\frac{1}{2} g'(x) + \\mu g(x) = -1 \\quad \\Longleftrightarrow \\quad g'(x) + 2 \\mu g(x) = -2.\n$$\nUsing the integrating factor $\\exp(2 \\mu x)$,\n$$\n\\frac{d}{dx}\\big(g(x)\\exp(2 \\mu x)\\big) = -2 \\exp(2 \\mu x),\n$$\nso integration yields\n$$\ng(x)\\exp(2 \\mu x) = -\\int 2 \\exp(2 \\mu x)\\,dx + C = -\\frac{1}{\\mu}\\exp(2 \\mu x) + C,\n$$\nhence\n$$\nu'(x) = g(x) = -\\frac{1}{\\mu} + C \\exp(-2 \\mu x).\n$$\nIntegrating once more,\n$$\nu(x) = -\\frac{x}{\\mu} - \\frac{C}{2 \\mu}\\exp(-2 \\mu x) + D.\n$$\nTo avoid exponential blow-up as $x \\to -\\infty$ when $\\mu  0$, we must have $C = 0$. Imposing the boundary condition $u(a) = 0$ then gives\n$$\n0 = -\\frac{a}{\\mu} + D \\quad \\Longrightarrow \\quad D = \\frac{a}{\\mu}.\n$$\nTherefore, for a starting point of $x=0$:\n$$\nu(0) = \\frac{a}{\\mu}.\n$$\nBecause $X_{0} = 0$ in our setup, the desired expectation is\n$$\n\\mathbb{E}[\\tau] = u(0) = \\frac{a}{\\mu} = \\frac{a}{-b} = -\\frac{a}{b}.\n$$\nThis is finite and positive since $a  0$ and $b  0$.", "answer": "$$\\boxed{-\\frac{a}{b}}$$", "id": "1298873"}]}
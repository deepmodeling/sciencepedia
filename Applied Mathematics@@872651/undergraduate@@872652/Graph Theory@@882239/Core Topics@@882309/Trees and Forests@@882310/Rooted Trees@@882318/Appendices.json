{"hands_on_practices": [{"introduction": "Rooted trees are often defined abstractly through sets of relationships. This first exercise provides practice in the essential skill of translating a formal list of parent-child pairs into a visual tree structure. By constructing the tree from these pairs, you will solidify your understanding of fundamental concepts such as the root, leaves, node depth, and the overall height of the tree [@problem_id:1531605].", "problem": "A hierarchical data structure is described by a set of parent-child relationships. The structure consists of nodes labeled with uppercase letters. The relationships are given as a set of ordered pairs $(P, C)$, where $P$ is the parent of $C$.\n\nThe set of relationships is: `{(F, B), (F, J), (B, A), (B, D), (D, C), (D, E), (J, G), (J, K), (G, I), (K, H), (K, L)}`.\n\nA few definitions are necessary for this structure:\n- The **root** is the single node that has no parent.\n- A **leaf** is a node that has no children.\n- The **depth** of a node is the number of edges on the unique path from the root to that node. By definition, the depth of the root is 0.\n- The **height** of the entire structure is the maximum depth among all nodes in the structure.\n\nBased on the provided relationships, determine the following three values:\n1. The height of the structure.\n2. The total number of leaves in the structure.\n3. The depth of the node $K$.\n\nProvide your answers as a single row matrix $(h, l, d)$, where $h$ is the height, $l$ is the number of leaves, and $d$ is the depth of node $K$.", "solution": "Let the set of relationships be $R=\\{(F,B),(F,J),(B,A),(B,D),(D,C),(D,E),(J,G),(J,K),(G,I),(K,H),(K,L)\\}$. Let $P$ be the set of all parents appearing in $R$ and $C$ the set of all children:\n$$P=\\{F,B,D,J,G,K\\},\\quad C=\\{B,J,A,D,C,E,G,K,I,H,L\\}.$$\nThe root is the node with no parent, i.e., the unique element of $P\\setminus C$, which is $F$.\n\nDefine the depth function $d(\\cdot)$ by $d(F)=0$ and, for each $(u,v)\\in R$, $d(v)=d(u)+1$. Applying this recursively:\n- From $(F,B)$ and $(F,J)$: $d(B)=1$, $d(J)=1$.\n- From $(B,A)$ and $(B,D)$: $d(A)=2$, $d(D)=2$.\n- From $(D,C)$ and $(D,E)$: $d(C)=3$, $d(E)=3$.\n- From $(J,G)$ and $(J,K)$: $d(G)=2$, $d(K)=2$.\n- From $(G,I)$: $d(I)=3$.\n- From $(K,H)$ and $(K,L)$: $d(H)=3$, $d(L)=3$.\n\nThe height is the maximum depth:\n$$h=\\max\\{d(v)\\colon v\\in V\\}=3.$$\n\nA leaf is a node with no children, i.e., a node $v$ for which there is no $w$ with $(v,w)\\in R$. The leaves are $\\{A,C,E,I,H,L\\}$, so the total number of leaves is\n$$l=6.$$\n\nThe depth of node $K$ is\n$$d=d(K)=2.$$", "answer": "$$\\boxed{\\begin{pmatrix} 3 & 6 & 2 \\end{pmatrix}}$$", "id": "1531605"}, {"introduction": "Beyond constructing trees that are possible, a crucial skill is understanding the inherent rules that make certain tree structures impossible. This problem challenges you to think about the fundamental properties that connect the number of vertices, edges, and internal nodes. By analyzing a set of constraints, you will discover a key parity-based limitation, demonstrating that simple counting rules can lead to powerful conclusions about a tree's potential structure [@problem_id:1531639].", "problem": "A systems architect is designing a specialized hierarchical index for a database. The design specifies that the index must be structured as a rooted tree with the following three properties:\n\n1.  The tree must contain a total of exactly 10 vertices.\n2.  Every vertex that is not a leaf (i.e., every internal vertex) must have exactly 2 children.\n3.  The height of the tree, defined as the number of edges in the longest path from the root to any leaf, must be exactly 3.\n\nAfter some analysis, the architect concludes that it is mathematically impossible to construct a tree that satisfies all three properties simultaneously. Which of the following statements provides a correct and fundamental reason for this impossibility?\n\nA. In any such tree, the number of leaf vertices must be equal to the number of internal vertices. For a tree with 10 vertices, this would require 5 leaves and 5 internal vertices, a configuration which is inconsistent with a height of 3.\n\nB. Any rooted tree with a height of 3 in which every internal vertex has 2 children must be a perfect binary tree, and therefore must have exactly $2^{3+1} - 1 = 15$ vertices.\n\nC. For any rooted tree, the number of edges is one less than the number of vertices. In a tree with 10 vertices, there must be 9 edges. The total number of children, which corresponds to the number of edges, must also be twice the number of internal vertices. Since 9 is not an even number, such a tree cannot exist.\n\nD. A rooted tree of height 3 must have exactly $2^3 = 8$ leaves. A tree with 10 vertices in total cannot be structured to have 8 leaves while also ensuring every internal vertex has 2 children.\n\nE. The number of vertices at level $i$ in such a tree must be $2^i$. For a height of 3, the total number of vertices would be $2^0 + 2^1 + 2^2 + 2^3 = 15$, which is not 10.", "solution": "Let $V$ be the total number of vertices, $E$ the number of edges, $I$ the number of internal vertices, and $L$ the number of leaves.\n\nFundamental tree facts:\n- For any finite tree, $E = V - 1$.\n- In a rooted tree, each edge corresponds to exactly one parent-to-child relation. If every internal vertex has exactly $2$ children, then the total number of children equals $2I$, so $E = 2I$.\n- Also, $V = I + L$.\n\nEquating the two expressions for $E$ gives\n$$\nV - 1 = 2I.\n$$\nUsing $V = I + L$, we obtain\n$$\nI + L - 1 = 2I \\quad \\Rightarrow \\quad L = I + 1,\n$$\nand thus\n$$\nV = I + L = I + (I + 1) = 2I + 1,\n$$\nwhich shows that $V$ must be odd for any rooted tree in which every internal vertex has exactly $2$ children.\n\nFor $V = 10$, we would require\n$$\n10 = 2I + 1 \\quad \\Rightarrow \\quad 2I = 9,\n$$\nwhich is impossible because the left-hand side is even while the right-hand side is odd. Equivalently, since $E = V - 1 = 9$ and also $E = 2I$, the number of edges would have to be even, contradicting $E = 9$.\n\nThis parity obstruction is the fundamental reason such a tree cannot exist, matching statement C. The height condition is not needed to derive the impossibility, and statements B, D, and E incorrectly impose perfect binary tree structure, while A misstates the leaf-internal relation (the correct relation is $L = I + 1$).", "answer": "$$\\boxed{C}$$", "id": "1531639"}, {"introduction": "In many computational applications, trees are stored efficiently using a parent array rather than explicit pointers. This practice problem simulates a real-world scenario of navigating an organizational hierarchy to find a \"lowest common manager,\" which is equivalent to the classic Lowest Common Ancestor (LCA) problem. Solving this requires you to traverse paths to the root from this data structure and identify the shared ancestor at the greatest depth, a core algorithmic technique in computer science [@problem_id:1531615].", "problem": "In a modern technology company, the organizational structure is modeled as a rooted tree. Each employee is represented by a node, and the reporting structure is defined by a parent array. The company has $N=15$ employees, indexed from 0 to 14. The structure is given by a zero-indexed parent array `P` of size 15, where `P[i]` is the index of the direct manager of employee `i`. The President of the company is the root of the tree and has no manager, which is denoted by `P[i] = -1` for the root employee `i`.\n\nThe parent array `P` is given as:\n`P = [10, 3, 0, 8, 1, 0, 3, 1, -1, 4, 8, 10, 4, 14, 3]`\n\nWe define two concepts for this hierarchy:\n1.  **Depth**: The depth of an employee's node is the number of managers in the chain of command strictly above them. For example, the President is at depth 0. An employee whose manager is the President is at depth 1.\n2.  **Lowest Common Manager (LCM)**: For any two distinct employees, their Lowest Common Manager is the manager who is an ancestor to both employees and is located at the greatest possible depth in the organizational tree.\n\nGiven this structure, determine the depth of the Lowest Common Manager for employee `e_1 = 9` and employee `e_2 = 7`.", "solution": "The problem asks for the depth of the Lowest Common Manager (LCM) of two employees, `e_1 = 9` and `e_2 = 7`, within an organizational hierarchy represented by a parent array `P`.\n\nFirst, let's identify the root of the tree. The root is the employee `i` for whom `P[i] = -1`. Inspecting the array `P`, we find that `P[8] = -1`, so employee 8 is the President and the root of the tree.\n\nThe core of the solution involves three main steps:\n1.  Find the chain of command (the path to the root) for employee `e_1 = 9`.\n2.  Find the chain of command for employee `e_2 = 7`.\n3.  Identify the Lowest Common Manager (LCM) from these two paths and calculate its depth.\n\n**Step 1: Find the path to the root for employee 9.**\nWe trace the managers of employee 9 upwards until we reach the root (employee 8, where the parent is -1).\n- The starting employee is `9`.\n- The manager of `9` is `P[9] = 4`.\n- The manager of `4` is `P[4] = 1`.\n- The manager of `1` is `P[1] = 3`.\n- The manager of `3` is `P[3] = 8`.\n- The manager of `8` is `P[8] = -1`, which indicates we have reached the root.\n\nThe path from employee 9 to the root is `9 -> 4 -> 1 -> 3 -> 8`. We can list the set of all ancestors for employee 9 (including the employee themselves): `{9, 4, 1, 3, 8}`.\n\n**Step 2: Find the path to the root for employee 7.**\nSimilarly, we trace the managers for employee 7 upwards.\n- The starting employee is `7`.\n- The manager of `7` is `P[7] = 1`.\n- The manager of `1` is `P[1] = 3`.\n- The manager of `3` is `P[3] = 8`.\n- The manager of `8` is `P[8] = -1`. We have reached the root.\n\nThe path from employee 7 to the root is `7 -> 1 -> 3 -> 8`. The set of ancestors for employee 7 is `{7, 1, 3, 8}`.\n\n**Step 3: Identify the LCM and calculate its depth.**\nThe LCM is the common ancestor of both employees that has the greatest depth. Let's find the set of common ancestors by intersecting the two ancestor sets we found:\nCommon Ancestors = `{9, 4, 1, 3, 8}` $\\cap$ `{7, 1, 3, 8}` = `{1, 3, 8}`.\n\nNow we must determine which of these common ancestors (`1`, `3`, or `8`) has the greatest depth. The depth of a node is the number of steps it takes to reach the root from that node.\n\n-   **Depth of employee 8:** Employee 8 is the root. The path to the root is trivial (0 steps). So, `depth(8) = 0`.\n-   **Depth of employee 3:** The path from 3 to the root is `3 -> 8`. This takes 1 step. So, `depth(3) = 1`.\n-   **Depth of employee 1:** The path from 1 to the root is `1 -> 3 -> 8`. This takes 2 steps. So, `depth(1) = 2`.\n\nComparing the depths of the common ancestors: `depth(1) = 2`, `depth(3) = 1`, `depth(8) = 0`. The greatest depth is 2, which corresponds to employee 1.\n\nTherefore, the Lowest Common Manager (LCM) of employees 9 and 7 is employee 1.\n\nThe problem asks for the depth of this LCM. As we just calculated, the depth of employee 1 is 2.", "answer": "$$\\boxed{2}$$", "id": "1531615"}]}
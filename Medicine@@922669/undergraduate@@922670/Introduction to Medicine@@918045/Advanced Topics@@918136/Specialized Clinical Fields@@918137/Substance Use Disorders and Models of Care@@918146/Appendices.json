{"hands_on_practices": [{"introduction": "Screening for substance use disorders (SUDs) is a critical first step in many models of care, especially in primary care settings. However, the usefulness of a screening test depends on more than just its sensitivity and specificity; it is also heavily influenced by the prevalence of the disorder in the population being tested. This exercise challenges you to apply Bayes' theorem to calculate the Positive Predictive Value ($PPV$) of a hypothetical screening tool, providing a crucial, and often surprising, insight into the interpretation of a positive test result in a low-prevalence setting. [@problem_id:4981484]", "problem": "A primary care clinic implements a new screening questionnaire for substance use disorder (SUD). In this population, the prior probability (prevalence) of SUD is $\\pi = 0.05$. The screening test has sensitivity $0.85$ and specificity $0.90$. Using Bayes' theorem and the core definitions of sensitivity, specificity, and prevalence, derive from first principles the positive predictive value (PPV), defined as $PPV = P(\\text{SUD} \\mid \\text{Test positive})$, and then compute its numerical value for this setting. Express your final answer as a decimal and round to four significant figures. Do not use a percent sign.", "solution": "To compute the positive predictive value (PPV), we start from the definitions and Bayes' theorem.\n\nLet $D$ denote the event that a patient has substance use disorder (SUD), and let $T+$ denote a positive test result.\n\nCore definitions:\n- Sensitivity is $P(T+ \\mid D)$.\n- Specificity is $P(T- \\mid \\neg D)$.\n- Prevalence is $P(D) = \\pi$.\n\nWe seek $PPV = P(D \\mid T+)$.\n\nBy Bayes' theorem,\n$$\nP(D \\mid T+) = \\frac{P(T+ \\mid D)\\,P(D)}{P(T+)}.\n$$\n\nThe total probability of a positive test result $P(T+)$ can be expressed using the law of total probability:\n$$\nP(T+) = P(T+ \\mid D)\\,P(D) + P(T+ \\mid \\neg D)\\,P(\\neg D).\n$$\n\nWe use specificity to relate $P(T+ \\mid \\neg D)$ to known quantities. Since specificity $= P(T- \\mid \\neg D)$, we have\n$$\nP(T+ \\mid \\neg D) = 1 - P(T- \\mid \\neg D) = 1 - \\text{specificity}.\n$$\n\nSubstitute these into the expression for $P(D \\mid T+)$:\n$$\nP(D \\mid T+) = \\frac{P(T+ \\mid D)\\,P(D)}{P(T+ \\mid D)\\,P(D) + P(T+ \\mid \\neg D)\\,P(\\neg D)} = \\frac{(\\text{sensitivity})\\,\\pi}{(\\text{sensitivity})\\,\\pi + (1 - \\text{specificity})\\,(1 - \\pi)}.\n$$\n\nNow substitute the given values:\n- Sensitivity $= 0.85$,\n- Specificity $= 0.90$,\n- Prevalence $\\pi = 0.05$.\n\nCompute the numerator:\n$$\n(\\text{sensitivity})\\,\\pi = 0.85 \\times 0.05 = 0.0425.\n$$\n\nCompute the false positive rate:\n$$\n1 - \\text{specificity} = 1 - 0.90 = 0.10.\n$$\n\nCompute $(1 - \\pi)$:\n$$\n1 - \\pi = 1 - 0.05 = 0.95.\n$$\n\nCompute the denominator:\n$$\n(\\text{sensitivity})\\,\\pi + (1 - \\text{specificity})\\,(1 - \\pi) = 0.0425 + 0.10 \\times 0.95 = 0.0425 + 0.095 = 0.1375.\n$$\n\nTherefore,\n$$\nPPV = \\frac{0.0425}{0.1375} = 0.3090909\\ldots\n$$\n\nRounded to four significant figures, the PPV is $0.3091$.", "answer": "$$\\boxed{0.3091}$$", "id": "4981484"}, {"introduction": "Following a positive screen, a comprehensive assessment is essential to determine the most appropriate and least restrictive level of care. The American Society of Addiction Medicine (ASAM) criteria provide a multidimensional framework for this, but translating these complex guidelines into consistent decisions can be challenging. This practice asks you to construct a deterministic decision algorithm based on a simplified set of ASAM-inspired rules, giving you hands-on experience in operationalizing a model of care and structuring clinical judgment. [@problem_id:4981485]", "problem": "You are asked to design and implement a deterministic decision algorithm that maps American Society of Addiction Medicine (ASAM) multidimensional assessment results to a recommended level of care. The algorithm must operate on six severity scores corresponding to the ASAM dimensions, each scored on an ordinal scale from $0$ (no problem/risk) to $4$ (severe, imminent risk):\n\n- $D_1$: Acute intoxication and/or withdrawal potential.\n- $D_2$: Biomedical conditions and complications.\n- $D_3$: Emotional, behavioral, or cognitive conditions and complications.\n- $D_4$: Readiness to change.\n- $D_5$: Relapse, continued use, or continued problem potential.\n- $D_6$: Recovery and living environment.\n\nLet the input vector be $\\mathbf{s} = (s_1, s_2, s_3, s_4, s_5, s_6)$ with $s_i \\in \\{0,1,2,3,4\\}$. The algorithm must output a single integer $\\ell \\in \\{0,1,2,3,4\\}$ encoding the recommended level of care as follows (coarse categories aligned with ASAM levels): $0$ for early intervention (Level $0.5$), $1$ for outpatient (Level $1$), $2$ for intensive outpatient or partial hospitalization (Level $2$), $3$ for residential or medically monitored inpatient (Level $3$), and $4$ for medically managed inpatient (Level $4$).\n\nFundamental base and design principles you must use:\n- Monotonicity of risk and need: higher $s_i$ signifies greater severity and need for structure/supervision; recommended care $\\ell$ must be nondecreasing in each $s_i$.\n- Patient safety and least restrictive setting: choose the minimal $\\ell$ that satisfies safety and support requirements implied by the severity profile.\n- Multi-criteria dominance: when multiple constraints apply, the required $\\ell$ is the maximum lower bound required by any applicable constraint, except when an exact level is required by a safety override.\n\nDefine the following medically grounded threshold constraints that your algorithm must enforce. These thresholds represent clear clinical cutoffs per dimension that imply lower bounds on $\\ell$:\n\nSafety override (medical):\n- If $s_1 \\ge 4$ or $s_2 \\ge 4$, then $\\ell = 4$.\n\nMedical monitoring thresholds:\n- If $s_1 = 3$ or $s_2 = 3$, then $\\ell \\ge 3$.\n- If $s_1 = 2$ or $s_2 = 2$, then $\\ell \\ge 2$.\n\nPsychiatric containment thresholds (environment contingent):\n- If $s_3 \\ge 3$ and $s_6 \\ge 2$, then $\\ell \\ge 3$.\n- If $s_3 = 2$ and $s_6 \\ge 2$, then $\\ell \\ge 2$.\n\nMotivational structure thresholds (contingent on risk context):\n- If $s_4 = 4$ and $\\max(s_5, s_6) \\ge 2$, then $\\ell \\ge 3$.\n- If $s_4 = 3$ and $\\max(s_5, s_6) \\ge 2$, then $\\ell \\ge 2$.\n\nRelapse risk thresholds (environment contingent):\n- If $s_5 \\ge 3$ and $s_6 \\ge 2$, then $\\ell \\ge 3$.\n- If $s_5 = 2$ and $s_6 \\ge 2$, then $\\ell \\ge 2$.\n\nEnvironmental risk alone (without psychiatric or relapse comorbidity):\n- If $s_6 \\ge 3$ and $\\max(s_3, s_5) \\le 1$, then $\\ell \\ge 2$.\n\nEarly intervention boundary:\n- If $\\max(s_1, s_2, s_3, s_4, s_5, s_6) \\le 1$, then $\\ell = 0$.\n\nBaseline outpatient if no other threshold raises the level:\n- Otherwise, if none of the above constraints enforce $\\ell \\ge 2$ or higher and not early intervention, set $\\ell = 1$.\n\nAlgorithmic requirement:\n- Your program must compute the minimal $\\ell$ consistent with all applicable lower bounds, applying the safety override first, then taking the maximum of all lower bounds implied by the other constraints. Ensure $\\ell \\in \\{0,1,2,3,4\\}$.\n\nTest suite:\nFor each of the following input vectors $\\mathbf{s}$, compute the corresponding $\\ell$ and aggregate results as specified below.\n\n- Case $1$: $\\mathbf{s} = (1,1,0,1,1,1)$\n- Case $2$: $\\mathbf{s} = (1,0,1,2,1,1)$\n- Case $3$: $\\mathbf{s} = (1,1,1,2,2,2)$\n- Case $4$: $\\mathbf{s} = (1,1,3,2,1,2)$\n- Case $5$: $\\mathbf{s} = (4,1,1,1,1,1)$\n- Case $6$: $\\mathbf{s} = (3,1,1,1,1,1)$\n- Case $7$: $\\mathbf{s} = (1,1,1,4,3,2)$\n- Case $8$: $\\mathbf{s} = (1,1,1,1,1,3)$\n- Case $9$: $\\mathbf{s} = (2,1,1,1,1,1)$\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[r_1,r_2,\\dots,r_9]$), where each $r_i$ is the integer $\\ell$ for the corresponding test case in the exact order provided above. No additional text should be printed.", "solution": "The user has provided a valid, well-posed problem that requires the development of a deterministic algorithm for clinical decision support. The problem is grounded in the principles of the American Society of Addiction Medicine (ASAM) criteria for patient placement. The task is to map a multidimensional assessment vector to a discrete level of care.\n\nThe input is a six-dimensional vector $\\mathbf{s} = (s_1, s_2, s_3, s_4, s_5, s_6)$, where each component $s_i$ is an integer severity score from $\\{0, 1, 2, 3, 4\\}$. The output is a single integer $\\ell \\in \\{0, 1, 2, 3, 4\\}$ representing the recommended level of care. The algorithm must be designed based on principles of monotonicity, patient safety, and multi-criteria dominance, and must rigorously implement a given set of threshold-based rules.\n\nThe algorithmic design proceeds by translating the specified logical constraints into a sequential decision-making process. The process respects the hierarchy of rules, particularly the primacy of safety overrides and the handling of baseline conditions.\n\nLet the input vector be $\\mathbf{s} = (s_1, s_2, s_3, s_4, s_5, s_6)$. The algorithm determines the level of care $\\ell$ as follows:\n\n**Step 1: Check for Absolute Overrides**\n\nThe algorithm first evaluates the two rules that dictate a specific, non-negotiable level of care, overriding all other considerations.\n\n1.  **Safety Override**: This rule addresses imminent medical risk. If the score for acute intoxication/withdrawal potential ($D_1$) or biomedical conditions ($D_2$) is at its maximum, a medically managed inpatient setting is required.\n    $$ \\text{If } s_1 \\ge 4 \\text{ or } s_2 \\ge 4, \\text{ then } \\ell = 4. $$\n    If this condition is met, the algorithm terminates and returns $\\ell=4$.\n\n2.  **Early Intervention Boundary**: This rule identifies cases with minimal risk across all dimensions, which correspond to early intervention or prevention services.\n    $$ \\text{If } \\max(s_1, s_2, s_3, s_4, s_5, s_6) \\le 1, \\text{ then } \\ell = 0. $$\n    If this condition is met, the algorithm terminates and returns $\\ell=0$.\n\n**Step 2: Determine Minimum Required Level from Lower-Bound Constraints**\n\nIf neither of the absolute overrides is triggered, the algorithm proceeds to calculate the minimum required level of care based on a set of rules that establish lower bounds on $\\ell$. This embodies the \"multi-criteria dominance\" principle, whereby the most stringent requirement dictates the final level. We initialize a variable, $\\ell_{min}$, to $0$ and update it according to the following rules, always taking the maximum of the current $\\ell_{min}$ and any new lower bound.\n\n$$ \\ell_{min} \\leftarrow 0 $$\n\nThe rules are evaluated sequentially:\n\n*   **Medical Monitoring Thresholds**:\n    *   If $s_1 = 3$ or $s_2 = 3$, a level of at least $3$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$.\n    *   Else if $s_1 = 2$ or $s_2 = 2$, a level of at least $2$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n\n*   **Psychiatric Containment Thresholds**:\n    *   If $s_3 \\ge 3$ and $s_6 \\ge 2$, a level of at least $3$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$.\n    *   Else if $s_3 = 2$ and $s_6 \\ge 2$, a level of at least $2$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n\n*   **Motivational Structure Thresholds**:\n    *   If $s_4 = 4$ and $\\max(s_5, s_6) \\ge 2$, a level of at least $3$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$.\n    *   Else if $s_4 = 3$ and $\\max(s_5, s_6) \\ge 2$, a level of at least $2$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n\n*   **Relapse Risk Thresholds**:\n    *   If $s_5 \\ge 3$ and $s_6 \\ge 2$, a level of at least $3$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 3)$.\n    *   Else if $s_5 = 2$ and $s_6 \\ge 2$, a level of at least $2$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n\n*   **Environmental Risk Alone**:\n    *   If $s_6 \\ge 3$ and $\\max(s_3, s_5) \\le 1$, a level of at least $2$ is required. So, $\\ell_{min} \\leftarrow \\max(\\ell_{min}, 2)$.\n\nBy systematically applying the $\\max$ function, $\\ell_{min}$ will hold the highest lower bound required by any triggered rule.\n\n**Step 3: Apply Baseline Outpatient Rule and Finalize**\n\nAfter evaluating all lower-bound constraints, the final level of care is determined.\n\n*   If the calculated $\\ell_{min}$ is still $0$, it means that none of the constraints for $\\ell \\ge 2$ or $\\ell \\ge 3$ were met. Since the early intervention case ($\\ell=0$) has already been handled, this situation defaults to the baseline outpatient level. Thus, if $\\ell_{min} = 0$, the final level is $\\ell = 1$.\n*   If $\\ell_{min}$ is $2$ or $3$, this represents the minimal level that satisfies the most severe condition found. This becomes the final level of care. Thus, if $\\ell_{min} > 0$, the final level is $\\ell = \\ell_{min}$.\n\nThis logic can be summarized as:\n$$ \\ell = \\begin{cases} 4 & \\text{if } s_1 \\ge 4 \\text{ or } s_2 \\ge 4 \\\\ 0 & \\text{if } \\max(\\mathbf{s}) \\le 1 \\\\ 1 & \\text{if } \\ell_{min} = 0 \\\\ \\ell_{min} & \\text{if } \\ell_{min} > 0 \\end{cases} $$\nwhere the conditions are checked in order. This tiered approach correctly implements the rule hierarchy and ensures that for any input vector $\\mathbf{s}$, a unique, valid level of care $\\ell$ is determined.", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef determine_level_of_care(s: tuple[int, ...]) -> int:\n    \"\"\"\n    Computes the ASAM level of care based on a 6-dimensional severity vector.\n\n    Args:\n        s: A tuple of 6 integers (s1, s2, s3, s4, s5, s6), where each\n           score is on an ordinal scale from 0 to 4.\n\n    Returns:\n        An integer l from 0 to 4 representing the recommended level of care.\n    \"\"\"\n    s1, s2, s3, s4, s5, s6 = s\n\n    # Rule 1: Safety override (medical)\n    # If s1 >= 4 or s2 >= 4, then l = 4.\n    if s1 >= 4 or s2 >= 4:\n        return 4\n\n    # Rule 7: Early intervention boundary\n    # If max(s1...s6) <= 1, then l = 0.\n    if np.max(s) <= 1:\n        return 0\n\n    # Initialize the minimum required level based on lower-bound constraints.\n    # The initial value is 0. If no rule for level >= 2 is triggered, it will\n    # default to 1 later.\n    min_level = 0\n\n    # Rule 2: Medical monitoring thresholds\n    # l >= 3 if s1=3 or s2=3\n    # l >= 2 if s1=2 or s2=2\n    if s1 == 3 or s2 == 3:\n        min_level = max(min_level, 3)\n    elif s1 == 2 or s2 == 2:\n        min_level = max(min_level, 2)\n\n    # Rule 3: Psychiatric containment thresholds\n    # l >= 3 if s3>=3 and s6>=2\n    # l >= 2 if s3=2 and s6>=2\n    if s3 >= 3 and s6 >= 2:\n        min_level = max(min_level, 3)\n    elif s3 == 2 and s6 >= 2:\n        min_level = max(min_level, 2)\n\n    # Rule 4: Motivational structure thresholds\n    # l >= 3 if s4=4 and max(s5,s6)>=2\n    # l >= 2 if s4=3 and max(s5,s6)>=2\n    if s4 == 4 and max(s5, s6) >= 2:\n        min_level = max(min_level, 3)\n    elif s4 == 3 and max(s5, s6) >= 2:\n        min_level = max(min_level, 2)\n\n    # Rule 5: Relapse risk thresholds\n    # l >= 3 if s5>=3 and s6>=2\n    # l >= 2 if s5=2 and s6>=2\n    if s5 >= 3 and s6 >= 2:\n        min_level = max(min_level, 3)\n    elif s5 == 2 and s6 >= 2:\n        min_level = max(min_level, 2)\n\n    # Rule 6: Environmental risk alone\n    # l >= 2 if s6>=3 and max(s3,s5)<=1\n    if s6 >= 3 and max(s3, s5) <= 1:\n        min_level = max(min_level, 2)\n\n    # Rule 8: Baseline outpatient\n    # If no constraint enforced l >= 2 or higher, and it's not early\n    # intervention (already handled), the level is 1.\n    if min_level == 0:\n        return 1\n    else:\n        return min_level\n\ndef solve():\n    \"\"\"\n    Runs the decision algorithm on the provided test suite and prints the result.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (1, 1, 0, 1, 1, 1),  # Case 1\n        (1, 0, 1, 2, 1, 1),  # Case 2\n        (1, 1, 1, 2, 2, 2),  # Case 3\n        (1, 1, 3, 2, 1, 2),  # Case 4\n        (4, 1, 1, 1, 1, 1),  # Case 5\n        (3, 1, 1, 1, 1, 1),  # Case 6\n        (1, 1, 1, 4, 3, 2),  # Case 7\n        (1, 1, 1, 1, 1, 3),  # Case 8\n        (2, 1, 1, 1, 1, 1),  # Case 9\n    ]\n\n    results = []\n    for case in test_cases:\n        result = determine_level_of_care(case)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```", "id": "4981485"}, {"introduction": "Effective models of care rely on evidence-based interventions, and clinicians must be able to interpret data from clinical trials to understand a treatment's real-world impact. This exercise guides you through the calculation of the Number Needed to Treat ($NNT$), a powerful metric that translates risk reduction into an intuitive clinical figure. By working with data from a hypothetical trial on naltrexone for Alcohol Use Disorder, you will learn how to quantify and communicate the effectiveness of a specific medical intervention. [@problem_id:4981480]", "problem": "A randomized controlled trial in patients with Alcohol Use Disorder (AUD) compares usual care versus adding naltrexone to usual care. The primary outcome is experiencing at least one heavy drinking episode during a $6$-month follow-up. The cumulative risk of the outcome is $50\\%$ in the usual care group and $40\\%$ in the naltrexone group over $6$ months. Using only core definitions from clinical epidemiology—risk as a probability over a fixed interval, absolute risk reduction as the difference in risk between control and treatment, and the number needed to treat (NNT) as the reciprocal of the absolute risk reduction—derive the NNT to prevent one additional patient from experiencing at least one heavy drinking episode over the $6$-month period. Express your final answer as an exact integer; no rounding is required.", "solution": "The problem will be validated by first extracting the givens and definitions, and then assessing its scientific and logical integrity.\n\nThe givens are:\n1.  A randomized controlled trial compares two groups: a control group (usual care) and a treatment group (naltrexone plus usual care).\n2.  The patient population is individuals with Alcohol Use Disorder (AUD).\n3.  The follow-up period is $6$ months.\n4.  The outcome is experiencing at least one heavy drinking episode during the follow-up period.\n5.  The cumulative risk of the outcome in the control group, denoted $R_c$, is $50\\%$.\n6.  The cumulative risk of the outcome in the treatment group, denoted $R_t$, is $40\\%$.\n7.  The definition of Absolute Risk Reduction ($ARR$) is the difference in risk between the control and treatment groups: $ARR = R_c - R_t$.\n8.  The definition of Number Needed to Treat ($NNT$) is the reciprocal of the Absolute Risk Reduction: $NNT = \\frac{1}{ARR}$.\nThe objective is to calculate the $NNT$.\n\nThe problem is deemed valid. It is scientifically grounded, as it uses standard, well-defined metrics from clinical epidemiology ($R_c$, $R_t$, $ARR$, $NNT$) in a realistic context of a randomized controlled trial. The problem is well-posed, providing all necessary data and definitions for a unique solution. The language is objective and unambiguous. The provided risk values are plausible for the described clinical scenario. There are no contradictions, missing information, or violations of scientific principles.\n\nThe solution proceeds by applying the provided definitions to the given data.\n\nLet $R_c$ be the cumulative risk in the control group (usual care) and $R_t$ be the cumulative risk in the treatment group (naltrexone). The problem states these risks as percentages, which must be converted to probabilities (dimensionless numbers between $0$ and $1$) for calculation.\n\nThe risk in the control group is:\n$$R_c = 50\\% = \\frac{50}{100} = 0.50$$\nThe risk in the treatment group is:\n$$R_t = 40\\% = \\frac{40}{100} = 0.40$$\n\nThe Absolute Risk Reduction ($ARR$) is defined as the difference between the risk in the control group and the risk in the treatment group.\n$$ARR = R_c - R_t$$\nSubstituting the given values:\n$$ARR = 0.50 - 0.40 = 0.10$$\nThis value, $0.10$, represents the proportion of patients who are prevented from experiencing the adverse outcome (a heavy drinking episode) as a result of receiving the treatment (naltrexone) instead of the control (usual care).\n\nThe Number Needed to Treat ($NNT$) is defined as the reciprocal of the $ARR$. The $NNT$ represents the average number of patients who need to be treated with the intervention to prevent one additional adverse outcome.\n$$NNT = \\frac{1}{ARR}$$\nSubstituting the calculated value of $ARR$:\n$$NNT = \\frac{1}{0.10}$$\nPerforming the division:\n$$NNT = 10$$\n\nThe result is an exact integer, as required by the problem statement. The interpretation of this result is that, on average, $10$ patients with Alcohol Use Disorder must be treated with naltrexone for a period of $6$ months to prevent one additional patient from experiencing at least one heavy drinking episode, compared to providing usual care alone.", "answer": "$$\\boxed{10}$$", "id": "4981480"}]}
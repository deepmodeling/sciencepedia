{"hands_on_practices": [{"introduction": "The foundation of any health information system is the data it contains, and the choice between structured (coded) and unstructured (free-text) data has profound consequences. This exercise explores this fundamental trade-off by simulating how data representation impacts the ability to reliably identify patient cohorts for research or public health. By calculating the precision and recall of a cohort identification task, you will quantify how data format choices directly affect the accuracy of automated clinical analytics [@problem_id:4372601].", "problem": "A regional Health Information Exchange (HIE) is evaluating how replacing standardized coded problem lists with free-text problem list entries affects cohort identification for a chronic condition across a network of hospitals. Assume the following scientifically grounded setup, with all patients independent for the purposes of expectation:\n\n- The true condition prevalence in the network is $p$.\n- Under standardized coded problem lists, assume near-perfect cohort identification for this condition; for this exercise, treat it as perfect to isolate the effect of label format.\n- Under free-text labels, a rule-based string matcher flags a patient as positive if the problem list contains a recognizable term for the condition. Two empirically observed phenomena affect performance:\n  - Among true cases, a fraction $r_{m}$ of problem-list entries use non-standard or idiosyncratic terms that the matcher does not recognize; those entries result in missed identifications.\n  - Among true non-cases, a fraction $r_{a}$ of problem-list entries contain ambiguous terms that are not truly the condition (for example, symptom mentions or “rule out” notations). When such an ambiguous term is present in a non-case, the matcher erroneously flags it as positive with probability $q$.\n- Each patient contributes at most one relevant problem-list entry for this condition. There are no duplicate entries for the same concept per patient.\n\nUse the standard definitions of precision and recall grounded in the confusion matrix for binary classification. With $p = 0.1$, $r_{m} = 0.12$, $r_{a} = 0.02$, and $q = 0.4$, compute the expected precision and the expected recall of the free-text approach. Express both results as decimals without a percentage sign. Round your answers to four significant figures. Provide your final answer in the order: precision, recall.", "solution": "The objective is to compute the expected precision and recall. Let $C$ be the event of a true case and $+$ be a positive flag from the matcher. The prevalence is $P(C) = p = 0.1$, so the probability of a true non-case is $P(\\neg C) = 1 - p = 0.9$.\n\n**Recall (Sensitivity):**\nRecall is the probability that a true case is flagged positive, $P(+|C)$. The problem states that a fraction $r_m$ of true cases are missed (False Negatives), so $P(-|C) = r_m = 0.12$.\nTherefore, the recall is:\n$$\\text{Recall} = P(+|C) = 1 - P(-|C) = 1 - r_m = 1 - 0.12 = 0.88$$\n\n**Precision (Positive Predictive Value):**\nPrecision is the probability that a patient flagged positive is a true case, $P(C|+)$. Using Bayes' theorem:\n$$ \\text{Precision} = P(C|+) = \\frac{P(+|C)P(C)}{P(+)} $$\nWe need to find $P(+)$, the total probability of a positive flag, using the law of total probability:\n$$P(+) = P(+|C)P(C) + P(+|\\neg C)P(\\neg C)$$\nWe must first calculate $P(+|\\neg C)$, the False Positive Rate. A non-case is flagged positive only if it has an ambiguous term (probability $r_a$) AND the matcher is fooled (probability $q$).\n$$P(+|\\neg C) = r_a \\times q = 0.02 \\times 0.4 = 0.008$$\nNow we can calculate $P(+)$:\n$$P(+) = (0.88)(0.1) + (0.008)(0.9) = 0.088 + 0.0072 = 0.0952$$\nFinally, we compute the precision:\n$$\\text{Precision} = \\frac{P(+|C)P(C)}{P(+)} = \\frac{0.088}{0.0952} \\approx 0.9243697...$$\n\nRounding to four significant figures, we get:\n- Recall: $0.8800$\n- Precision: $0.9244$\n\nThe requested order is precision, then recall.", "answer": "$$\n\\boxed{\\begin{pmatrix} 0.9244 & 0.8800 \\end{pmatrix}}\n$$", "id": "4372601"}, {"introduction": "A core function of health information exchange is translating data between different standards, such as from the legacy Health Level Seven (HL7) v2 format to the modern Fast Healthcare Interoperability Resources (FHIR) standard. This practice simulates a common real-world challenge where transformation processes are incomplete, leading to the loss of vital clinical details. You will design a conceptual transformation map and calculate the resulting information loss, developing a critical skill for evaluating the fidelity of data exchange pipelines [@problem_id:4372614].", "problem": "A health system ingests clinical data via Health Level Seven (HL7) version $2$ Observation Result Unsolicited (ORU$^{\\wedge}$R$01$) messages and transforms them into Fast Healthcare Interoperability Resources (FHIR) Patient and Observation resources. Consider the following scientifically realistic sample message content:\n\n- Patient Identification (PID):\n  - PID$-$$3$ Patient Identifier List contains two identifiers: Assigning authority \"HospitalA\", identifier value \"$A$-$12345$\", and Assigning authority \"StateRegistry\", identifier value \"$SR$-$987654$\".\n  - PID$-$$5$ Patient Name is \"Doe^Jane\".\n  - PID$-$$7$ Date/Time of Birth is \"$1997$-$08$-$14$\" (HL7 $DTM$).\n  - PID$-$$8$ Administrative Sex is \"F\".\n\n- Observation/Result (OBX) segments:\n  - OBX segment $1$: OBX$-$$2$ (Value Type) is \"NM\" (numeric). OBX$-$$3$ (Observation Identifier) is LOINC \"$2823$-$3$\" for \"Potassium\". OBX$-$$5$ (Observation Value) is numeric value \"$4.2$\". OBX$-$$6$ (Units) is Unified Code for Units of Measure (UCUM) \"mmol/L\". OBX$-$$14$ (Date/Time of the Observation) is \"$2025$-$10$-$02$T$09$:$15$:$00$Z\".\n  - OBX segment $2$: OBX$-$$2$ (Value Type) is \"TX\" (text). OBX$-$$3$ is LOINC \"$48767$-$8$\" \"Narrative comment\". OBX$-$$5$ is \"Specimen hemolyzed\".\n  - OBX segment $3$: OBX$-$$2$ (Value Type) is \"CWE\" (coded with exceptions). OBX$-$$3$ is LOINC \"$630$-$1$\" \"Antibiotic susceptibility\". OBX$-$$5$ contains code \"$131196009$\", coding system \"http://snomed.info/sct\", display \"Susceptible\", original text \"S\".\n  - OBX segment $4$: OBX$-$$2$ (Value Type) is \"ED\" (encapsulated data). OBX$-$$3$ is LOINC \"$55110$-$1$\" \"Imaging report\". OBX$-$$5$ is encapsulated data with components: source application \"RIS\", type of data \"application/pdf\", data subtype \"PDF\", encoding \"Base64\", and a binary payload of length \"$102400$\" bytes.\n\nDesign a transformation that produces:\n- One FHIR Patient resource populated from PID fields (identifiers from PID$-$$3$, name from PID$-$$5$, birthDate from PID$-$$7$, gender from PID$-$$8$).\n- Four FHIR Observation resources, one per OBX, where:\n  - For \"NM\" values, use Observation.valueQuantity with the numeric value and UCUM unit.\n  - For \"TX\" values, use Observation.valueString.\n  - For \"CWE\" values, use Observation.valueCodeableConcept when supported.\n  - For \"ED\" values, use Observation.valueAttachment when supported.\n\nAssume the current transformation implementation supports only \"NM\" and \"TX\" value types in OBX$-$$5$ and does not support \"CWE\" or \"ED\" value types in OBX$-$$5$; unsupported value types result in no preservation of OBX$-$$5$ content in the corresponding FHIR Observation.\n\nFor the purposes of the calculation, define the information content contributed by OBX$-$$5$ as a count of atomic elements per value type, as follows:\n- For \"NM\": two atomic elements, consisting of the numeric value ($1$) and the UCUM unit ($1$).\n- For \"TX\": one atomic element, consisting of the narrative string ($1$).\n- For \"CWE\": four atomic elements, consisting of the code ($1$), coding system ($1$), display text ($1$), and original text ($1$).\n- For \"ED\": five atomic elements, consisting of source application ($1$), type of data ($1$), data subtype ($1$), encoding ($1$), and payload ($1$).\n\nTreat only OBX$-$$5$ content (as enumerated above) as contributing to the information content metric. Define the information loss as the fraction of OBX$-$$5$ atomic elements from the message that are not preserved in the resulting FHIR Observations under the stated implementation constraints. Express the information loss as a decimal fraction and round your answer to four significant figures.", "solution": "The objective is to calculate the information loss, $L$, defined as the fraction of atomic elements from the OBX-5 fields that are not preserved during the transformation.\n$$L = \\frac{\\text{Information Lost}}{\\text{Total Information}}$$\n\n**Step 1: Calculate Total Original Information**\nWe sum the atomic elements from the OBX-5 field for each of the four segments, using the provided definitions:\n- OBX 1 (\"NM\"): 2 elements (value, unit)\n- OBX 2 (\"TX\"): 1 element (string)\n- OBX 3 (\"CWE\"): 4 elements (code, system, display, original text)\n- OBX 4 (\"ED\"): 5 elements (source app, data type, subtype, encoding, payload)\n$$I_{\\text{total}} = 2 + 1 + 4 + 5 = 12 \\text{ atomic elements}$$\n\n**Step 2: Calculate Preserved Information**\nThe transformation implementation only supports \"NM\" and \"TX\" value types. Content from other types is discarded.\n- OBX 1 (\"NM\") is preserved: 2 elements.\n- OBX 2 (\"TX\") is preserved: 1 element.\n- OBX 3 (\"CWE\") is not preserved: 0 elements.\n- OBX 4 (\"ED\") is not preserved: 0 elements.\n$$I_{\\text{preserved}} = 2 + 1 + 0 + 0 = 3 \\text{ atomic elements}$$\n\n**Step 3: Calculate Information Loss**\nThe amount of information lost is the total minus the preserved.\n$$I_{\\text{lost}} = I_{\\text{total}} - I_{\\text{preserved}} = 12 - 3 = 9 \\text{ atomic elements}$$\nThe information loss fraction is therefore:\n$$L = \\frac{I_{\\text{lost}}}{I_{\\text{total}}} = \\frac{9}{12} = 0.75$$\n\n**Step 4: Format the Final Answer**\nThe problem requires the answer as a decimal rounded to four significant figures.\n$$L = 0.7500$$", "answer": "$$\\boxed{0.7500}$$", "id": "4372614"}, {"introduction": "The ultimate test of a health information infrastructure is its ability to support safe and effective patient care. This problem provides a powerful example of how a subtle data normalization error during information exchange can cascade through clinical systems to cause a significant medication error. By tracing the error from the system level to the patient's bedside, you will calculate the direct impact on a medication dose and gain a visceral understanding of why meticulous accuracy in health data standards is paramount for patient safety [@problem_id:4372610].", "problem": "A regional Health Information Exchange (HIE) mediates medication orders between two Electronic Health Record (EHR) systems. One system records medications using RxNorm Semantic Clinical Drug (SCD) concepts whose canonical strengths may include a dose per standard volume (for example, milligrams per $5$ milliliters), while the other system’s local formulary requires normalization to milligrams per milliliter. Consider the RxNorm SCD for an oral suspension that is expressed as $250 \\ \\mathrm{mg}/5 \\ \\mathrm{mL}$.\n\nA pediatric clinician intends to order a single dose based on body mass using the rule $d = \\alpha \\times w$, where $d$ is the dose in $\\mathrm{mg}$, $\\alpha$ is the dosing coefficient in $\\mathrm{mg}/\\mathrm{kg}$, and $w$ is the patient weight in $\\mathrm{kg}$. The patient has weight $w = 18.4 \\ \\mathrm{kg}$, and the dosing coefficient is $\\alpha = 12.5 \\ \\mathrm{mg}/\\mathrm{kg}$. The correct concentration implied by the RxNorm SCD is $c = 250 \\ \\mathrm{mg}/5 \\ \\mathrm{mL}$, which is equivalent to $50 \\ \\mathrm{mg}/\\mathrm{mL}$.\n\nDue to a unit normalization error in the HIE mapping, the receiving system’s formulary incorrectly interprets the SCD strength as $\\tilde{c} = 250 \\ \\mathrm{mg}/\\mathrm{mL}$, omitting the division by $5$. The EHR uses this incorrect concentration $\\tilde{c}$ to compute the administration volume $v$ by dividing the intended dose $d$ by $\\tilde{c}$, that is $v = d / \\tilde{c}$. The nurse then dispenses exactly volume $v$ from the actual product (which has the true concentration $c$), so the actual delivered dose is $d_{\\mathrm{delivered}} = c \\times v$.\n\nUsing first principles of dimensional analysis and dose computation, determine the absolute dose error in milligrams, defined as $|d_{\\mathrm{delivered}} - d|$, caused by this unit normalization error. Express your final answer in milligrams (mg). Do not round; provide the exact value.", "solution": "The objective is to calculate the absolute dose error, $|d_{\\mathrm{delivered}} - d|$. The calculation proceeds in three steps.\n\n**Step 1: Calculate the intended dose ($d$)**\nThe intended dose is based on the patient's weight ($w = 18.4 \\ \\mathrm{kg}$) and the dosing coefficient ($\\alpha = 12.5 \\ \\mathrm{mg}/\\mathrm{kg}$).\n$$d = \\alpha \\times w = (12.5 \\ \\mathrm{mg}/\\mathrm{kg}) \\times (18.4 \\ \\mathrm{kg}) = 230 \\ \\mathrm{mg}$$\n\n**Step 2: Calculate the actual delivered dose ($d_{\\mathrm{delivered}}$)**\nThe actual delivered dose depends on the volume administered ($v$) and the true concentration of the medication ($c = 50 \\ \\mathrm{mg}/\\mathrm{mL}$).\n$$d_{\\mathrm{delivered}} = c \\times v$$\nThe volume $v$ is incorrectly calculated by the EHR using the intended dose ($d$) and the incorrect concentration ($\\tilde{c} = 250 \\ \\mathrm{mg}/\\mathrm{mL}$).\n$$v = \\frac{d}{\\tilde{c}} = \\frac{230 \\ \\mathrm{mg}}{250 \\ \\mathrm{mg}/\\mathrm{mL}} = 0.92 \\ \\mathrm{mL}$$\nThe nurse administers this volume using the medication with the correct concentration.\n$$d_{\\mathrm{delivered}} = c \\times v = (50 \\ \\mathrm{mg}/\\mathrm{mL}) \\times (0.92 \\ \\mathrm{mL}) = 46 \\ \\mathrm{mg}$$\n\n**Step 3: Calculate the absolute dose error**\nThe error is the absolute difference between the delivered dose and the intended dose.\n$$\\text{Error} = |d_{\\mathrm{delivered}} - d| = |46 \\ \\mathrm{mg} - 230 \\ \\mathrm{mg}| = |-184 \\ \\mathrm{mg}| = 184 \\ \\mathrm{mg}$$\nThe absolute dose error is $184 \\ \\mathrm{mg}$.", "answer": "$$\\boxed{184}$$", "id": "4372610"}]}
{"hands_on_practices": [{"introduction": "A cornerstone of population health is the use of screening programs to detect disease early. However, no diagnostic test is perfect. This exercise [@problem_id:4389045] delves into the core metrics of test performance, guiding you to derive the Positive Predictive Value (PPV) from first principles. Mastering this demonstrates how a test's real-world utility is critically dependent not only on its intrinsic accuracy but also on the prevalence of the disease within the population being screened.", "problem": "A city health department is evaluating a new screening test for a chronic condition in the general adult population. Let disease status be denoted by $D \\in \\{D^{+}, D^{-}\\}$ and the test result by $T \\in \\{T^{+}, T^{-}\\}$. Work within the standard probability framework where $P(\\cdot)$ denotes probability. \n\nTasks:\n1. Using probability notation, define sensitivity, specificity, positive predictive value, and negative predictive value. \n2. Starting only from the definitions in part 1 together with the product rule for probabilities, the law of total probability, and Bayesâ€™ theorem, derive an analytic expression for the positive predictive value as a function of disease prevalence $\\pi$, sensitivity $\\text{Se}$, and specificity $\\text{Sp}$.\n3. The city estimates disease prevalence to be $\\pi = 0.06$ in its screening population. Independent field validation studies yield sensitivity $\\text{Se} = 0.92$ and specificity $\\text{Sp} = 0.88$ for the test. Using your derived expression, compute the positive predictive value. Express your final numerical answer as a unitless decimal and round to $4$ significant figures. Do not use a percent sign.", "solution": "The problem is scientifically grounded, well-posed, and contains all necessary information to proceed with a solution.\n\nThe problem asks for three tasks: defining key diagnostic test metrics, deriving an expression for the positive predictive value (PPV), and calculating its numerical value based on given parameters.\n\n**Part 1: Definitions of Diagnostic Test Metrics**\n\nLet $D^{+}$ denote the event that an individual has the disease, and $D^{-}$ denote the event that they do not. Let $T^{+}$ be the event of a positive test result, and $T^{-}$ be the event of a negative test result. The key metrics are defined as conditional probabilities:\n\n1.  **Sensitivity ($\\text{Se}$)**: The probability that the test is positive, given that the individual has the disease.\n    $$ \\text{Se} = P(T^{+} | D^{+}) $$\n\n2.  **Specificity ($\\text{Sp}$)**: The probability that the test is negative, given that the individual does not have the disease.\n    $$ \\text{Sp} = P(T^{-} | D^{-}) $$\n\n3.  **Positive Predictive Value (PPV)**: The probability that the individual has the disease, given that the test is positive.\n    $$ \\text{PPV} = P(D^{+} | T^{+}) $$\n\n4.  **Negative Predictive Value (NPV)**: The probability that the individual does not have the disease, given that the test is negative.\n    $$ \\text{NPV} = P(D^{-} | T^{-}) $$\n\nAdditionally, the disease prevalence, denoted by $\\pi$, is the prior probability of an individual having the disease in the population.\n$$ \\pi = P(D^{+}) $$\nFrom this, the probability of an individual not having the disease is $P(D^{-}) = 1 - P(D^{+}) = 1 - \\pi$.\n\n**Part 2: Derivation of the Positive Predictive Value (PPV)**\n\nThe goal is to derive an expression for $\\text{PPV} = P(D^{+} | T^{+})$ as a function of prevalence ($\\pi$), sensitivity ($\\text{Se}$), and specificity ($\\text{Sp}$). We start with Bayes' theorem:\n$$ P(D^{+} | T^{+}) = \\frac{P(T^{+} | D^{+}) P(D^{+})}{P(T^{+})} $$\nThe terms in the numerator are directly related to the provided definitions:\n-   $P(T^{+} | D^{+})$ is the sensitivity, $\\text{Se}$.\n-   $P(D^{+})$ is the prevalence, $\\pi$.\n\nSo, the numerator is $\\text{Se} \\cdot \\pi$.\n\nThe denominator, $P(T^{+})$, is the overall probability of a positive test result. This can be expanded using the law of total probability, conditioning on the disease status (the partition $\\{D^{+}, D^{-}\\}$):\n$$ P(T^{+}) = P(T^{+} | D^{+}) P(D^{+}) + P(T^{+} | D^{-}) P(D^{-}) $$\nWe can now substitute the known definitions into this expression:\n-   $P(T^{+} | D^{+}) = \\text{Se}$\n-   $P(D^{+}) = \\pi$\n-   $P(D^{-}) = 1 - \\pi$\n\nThe term $P(T^{+} | D^{-})$ is the probability of a positive test in a disease-free individual, also known as the false positive rate. It can be expressed in terms of specificity, $\\text{Sp}$. Since an individual either tests positive or negative, the sum of probabilities for these outcomes, conditional on the same event, must be $1$:\n$$ P(T^{+} | D^{-}) + P(T^{-} | D^{-}) = 1 $$\nFrom the definition of specificity, $P(T^{-} | D^{-}) = \\text{Sp}$. Therefore, we can solve for the false positive rate:\n$$ P(T^{+} | D^{-}) = 1 - P(T^{-} | D^{-}) = 1 - \\text{Sp} $$\nSubstituting all these components back into the expansion for $P(T^{+})$:\n$$ P(T^{+}) = (\\text{Se})(\\pi) + (1 - \\text{Sp})(1 - \\pi) $$\nFinally, we substitute the expressions for the numerator and the expanded denominator back into the Bayes' theorem formula for PPV:\n$$ \\text{PPV} = P(D^{+} | T^{+}) = \\frac{\\text{Se} \\cdot \\pi}{(\\text{Se})(\\pi) + (1 - \\text{Sp})(1 - \\pi)} $$\nThis is the required analytic expression for the positive predictive value.\n\n**Part 3: Numerical Calculation**\n\nThe problem provides the following values:\n-   Prevalence: $\\pi = 0.06$\n-   Sensitivity: $\\text{Se} = 0.92$\n-   Specificity: $\\text{Sp} = 0.88$\n\nWe substitute these values into the derived expression for PPV:\n$$ \\text{PPV} = \\frac{(0.92)(0.06)}{(0.92)(0.06) + (1 - 0.88)(1 - 0.06)} $$\nFirst, we compute the individual terms:\n-   Numerator: $(0.92)(0.06) = 0.0552$\n-   Term $1$ in denominator: $(0.92)(0.06) = 0.0552$\n-   Term $2$ in denominator: $(1 - 0.88)(1 - 0.06) = (0.12)(0.94) = 0.1128$\n\nNow, we calculate the full denominator:\n-   Denominator: $0.0552 + 0.1128 = 0.168$\n\nFinally, we compute the PPV:\n$$ \\text{PPV} = \\frac{0.0552}{0.168} $$\n$$ \\text{PPV} \\approx 0.3285714... $$\nThe problem requires the answer to be rounded to $4$ significant figures. The first four significant digits are $3$, $2$, $8$, $5$. The fifth digit is $7$, which is $5$ or greater, so we round up the fourth digit.\n$$ \\text{PPV} \\approx 0.3286 $$\nThus, the positive predictive value of the test in this population is approximately $0.3286$.", "answer": "$$\\boxed{0.3286}$$", "id": "4389045"}, {"introduction": "To improve population health, we must first understand the sources of disease burden. This practice [@problem_id:4389005] introduces the Population Attributable Fraction (PAF), a powerful metric for quantifying how much of a disease burden in a community is due to a specific risk factor. By working through this calculation, you will learn to connect the prevalence of a risk factor like smoking with its relative risk, allowing you to estimate the tangible benefits of public health interventions, such as the number of hospitalizations averted by a successful tobacco control program.", "problem": "A mid-sized metropolitan health system tracks annual hospital admissions for Chronic Obstructive Pulmonary Disease (COPD). In the adult population served by the system, the prevalence of current cigarette smoking is $p_{\\text{current}} = 0.22$. Evidence synthesis from cohort studies estimates the Relative Risk (RR) of COPD hospitalization among smokers compared with non-smokers to be $\\text{RR} = 2.8$. The most recent annual count of COPD hospitalizations is $H_{\\text{current}} = 5600$ admissions. The health system implements a multi-component tobacco control program that achieves a $25\\%$ relative reduction in the smoking prevalence within one year, so that the new prevalence is $p_{\\text{new}} = p_{\\text{current}} \\times (1 - 0.25)$.\n\nUsing only fundamental definitions of risk, relative risk, and Population Attributable Fraction (PAF), proceed as follows:\n\n1. Derive an expression for the Population Attributable Fraction (PAF) of COPD hospitalizations due to smoking in terms of exposure prevalence $p$, Relative Risk $\\text{RR}$, and the unexposed baseline risk. Then compute the numerical value of the baseline PAF using $p_{\\text{current}}$ and $\\text{RR}$.\n\n2. Under the assumption that the annual number of COPD hospitalizations in the population scales proportionally with the population risk of hospitalization, estimate the number of COPD admissions averted in the year following the intervention, using $H_{\\text{current}}$, $p_{\\text{current}}$, $p_{\\text{new}}$, and $\\text{RR}$.\n\nExpress the Population Attributable Fraction (PAF) as a decimal fraction, rounded to four significant figures. Express the estimated admissions averted as a count of hospitalizations, rounded to three significant figures. Do not use a percentage sign in any part of your answer.", "solution": "This problem requires the derivation and calculation of the Population Attributable Fraction (PAF) and the estimation of averted hospital admissions following an intervention.\n\n**Part 1: Derivation and Calculation of Population Attributable Fraction (PAF)**\n\nLet $p$ be the prevalence of the exposure (smoking), $R_1$ be the risk of hospitalization in the exposed group (smokers), and $R_0$ be the risk in the unexposed group (non-smokers). The overall risk in the total population, $R_{\\text{pop}}$, is the weighted average of the risks in the exposed and unexposed subpopulations:\n$$R_{\\text{pop}} = p \\cdot R_1 + (1-p) \\cdot R_0$$\nThe Relative Risk ($\\text{RR}$) is the ratio of risk in the exposed to the risk in the unexposed:\n$$\\text{RR} = \\frac{R_1}{R_0} \\implies R_1 = \\text{RR} \\cdot R_0$$\nSubstituting for $R_1$ gives the population risk in terms of the baseline risk $R_0$:\n$$R_{\\text{pop}} = p \\cdot (\\text{RR} \\cdot R_0) + (1-p) \\cdot R_0 = R_0 (p \\cdot \\text{RR} + 1 - p) = R_0 (1 + p(\\text{RR}-1))$$\nThe Population Attributable Fraction (PAF) is the fraction of disease in the population attributable to the exposure. It is defined as the proportional reduction in population risk if the exposure were eliminated:\n$$\\text{PAF} = \\frac{R_{\\text{pop}} - R_0}{R_{\\text{pop}}}$$\nSubstituting the expressions for $R_{\\text{pop}}$ and $R_0$ allows us to express PAF in terms of $p$ and $\\text{RR}$:\n$$\\text{PAF} = \\frac{R_0(1 + p(\\text{RR}-1)) - R_0}{R_0(1 + p(\\text{RR}-1))} = \\frac{p(\\text{RR}-1)}{1 + p(\\text{RR}-1)}$$\nThis is the derived expression. We now compute its value using the baseline data: $p_{\\text{current}} = 0.22$ and $\\text{RR} = 2.8$.\n$$\\text{PAF}_{\\text{current}} = \\frac{0.22 \\times (2.8 - 1)}{1 + 0.22 \\times (2.8 - 1)} = \\frac{0.22 \\times 1.8}{1 + 0.22 \\times 1.8} = \\frac{0.396}{1.396} \\approx 0.2836676...$$\nRounding to four significant figures, the baseline PAF is $0.2837$.\n\n**Part 2: Estimation of Averted Hospital Admissions**\n\nThe number of hospitalizations, $H$, is assumed to be proportional to the population risk, $R_{\\text{pop}}$. Thus, the ratio of hospitalizations after the intervention ($H_{\\text{new}}$) to before ($H_{\\text{current}}$) equals the ratio of the corresponding population risks:\n$$\\frac{H_{\\text{new}}}{H_{\\text{current}}} = \\frac{R_{\\text{pop, new}}}{R_{\\text{pop, current}}} = \\frac{R_0(1 + p_{\\text{new}}(\\text{RR}-1))}{R_0(1 + p_{\\text{current}}(\\text{RR}-1))} = \\frac{1 + p_{\\text{new}}(\\text{RR}-1)}{1 + p_{\\text{current}}(\\text{RR}-1)}$$\nThe number of admissions averted, $H_{\\text{averted}}$, is the difference between current and new admissions:\n$$H_{\\text{averted}} = H_{\\text{current}} - H_{\\text{new}} = H_{\\text{current}} \\left( 1 - \\frac{H_{\\text{new}}}{H_{\\text{current}}} \\right) = H_{\\text{current}} \\left( 1 - \\frac{1 + p_{\\text{new}}(\\text{RR}-1)}{1 + p_{\\text{current}}(\\text{RR}-1)} \\right)$$\nFirst, calculate the new prevalence of smoking, $p_{\\text{new}}$, after a $25\\%$ relative reduction:\n$$p_{\\text{new}} = p_{\\text{current}} \\times (1 - 0.25) = 0.22 \\times 0.75 = 0.165$$\nNow, substitute the given values ($H_{\\text{current}} = 5600$, $p_{\\text{current}} = 0.22$, $p_{\\text{new}} = 0.165$, $\\text{RR} = 2.8$) into the expression for averted admissions:\n$$H_{\\text{averted}} = 5600 \\left( 1 - \\frac{1 + 0.165(2.8 - 1)}{1 + 0.22(2.8 - 1)} \\right)$$\n$$H_{\\text{averted}} = 5600 \\left( 1 - \\frac{1 + 0.165 \\times 1.8}{1 + 0.22 \\times 1.8} \\right) = 5600 \\left( 1 - \\frac{1 + 0.297}{1 + 0.396} \\right) = 5600 \\left( 1 - \\frac{1.297}{1.396} \\right)$$\n$$H_{\\text{averted}} = 5600 \\left( \\frac{1.396 - 1.297}{1.396} \\right) = 5600 \\left( \\frac{0.099}{1.396} \\right) \\approx 5600 \\times 0.0709169... \\approx 397.13467...$$\nRounding to three significant figures, the estimated number of admissions averted is $397$.", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.2837 & 397\n\\end{pmatrix}\n}\n$$", "id": "4389005"}, {"introduction": "Evaluating the real-world impact of health policies and programs is often challenging because randomized controlled trials are not always feasible. This advanced exercise [@problem_id:4389018] introduces the Difference-in-Differences (DiD) method, a robust quasi-experimental technique for estimating causal effects from observational data. By deriving the estimator and applying it to a community health program, you will learn to isolate an intervention's true effect from underlying trends, a critical skill for evidence-based practice in health systems science.", "problem": "A health system evaluates a community health worker program intended to reduce avoidable hospitalizations. The program is implemented in one set of communities (the intervention group) at time $t=1$, while a comparison set of communities (the control group) remains unexposed throughout. Consider a two-period setting with $t \\in \\{0,1\\}$ and two groups indexed by $G \\in \\{0,1\\}$, where $G=1$ denotes the intervention group and $G=0$ denotes the control group. Let $Y_{it}$ denote the annual avoidable hospitalization rate per $1{,}000$ person-years for unit $i$ at time $t$. Assume the Stable Unit Treatment Value Assumption (SUTVA) and that the intervention does not affect the control group at any time. Define difference-in-differences (DiD) in words and, starting from core definitions of potential outcomes and the parallel trends assumption, derive the two-group, two-period DiD estimator for the average treatment effect on the treated (ATT) in terms of observed group-time average outcomes.\n\nThe observed average avoidable hospitalization rates (per $1{,}000$ person-years) are:\n- Intervention group: pre-intervention ($t=0$) $= 50.0$, post-intervention ($t=1$) $= 42.5$.\n- Control group: pre-intervention ($t=0$) $= 45.0$, post-intervention ($t=1$) $= 40.8$.\n\nCompute the DiD estimate of the ATT using these values. Express the final effect as a rate difference per $1{,}000$ person-years. Round your answer to four significant figures.", "solution": "The problem is valid as it is scientifically grounded in the principles of causal inference and econometrics, well-posed with a clear objective and sufficient data, and uses objective, precise language standard in health systems science.\n\nThe problem asks for a definition of the difference-in-differences (DiD) method, a formal derivation of the DiD estimator for the average treatment effect on the treated (ATT), and a calculation of this estimate using the provided data.\n\nFirst, we define the difference-in-differences method in words. DiD is a quasi-experimental technique used to estimate the causal effect of a specific intervention by comparing the change in an outcome variable over time for a group that receives the intervention (the treatment group) to the change in the same outcome over the same period for a group that does not (the control group). The core idea is to use the control group to proxy for the trend in the outcome that the treatment group would have experienced in the absence of the intervention. The \"difference-in-differences\" is the difference between the pre-post change in the treatment group and the pre-post change in the control group.\n\nTo derive the estimator formally, we use the potential outcomes framework. Let $G_i \\in \\{0, 1\\}$ be an indicator for unit $i$ being in the intervention group ($G_i=1$) or control group ($G_i=0$). Let $t \\in \\{0, 1\\}$ be the time period, where $t=0$ is the pre-intervention period and $t=1$ is the post-intervention period. The intervention is applied only to group $G=1$ at time $t=1$.\n\nLet $Y_{it}(1)$ be the potential outcome for unit $i$ at time $t$ if it is exposed to the treatment, and $Y_{it}(0)$ be the potential outcome if it is not exposed. The observed outcome for unit $i$ at time $t$ is denoted by $Y_{it}$.\nIn the pre-intervention period ($t=0$), no units are treated, so the observed outcome is always the untreated potential outcome: $Y_{i0} = Y_{i0}(0)$ for all units $i$.\nIn the post-intervention period ($t=1$), the observed outcome depends on the treatment status:\n$Y_{i1} = G_i Y_{i1}(1) + (1-G_i) Y_{i1}(0)$.\n\nThe parameter of interest is the Average Treatment Effect on the Treated (ATT) in the post-intervention period ($t=1$). This is defined as the expected effect of the treatment for those units that were actually treated:\n$$ATT = E[Y_{i1}(1) - Y_{i1}(0) | G_i=1]$$\nUsing the linearity of expectation, we can write:\n$$ATT = E[Y_{i1}(1) | G_i=1] - E[Y_{i1}(0) | G_i=1]$$\nThe first term, $E[Y_{i1}(1) | G_i=1]$, is the expected outcome for the treated group, given they were treated. This is observable from the data as the average outcome of the intervention group in the post-period.\nThe second term, $E[Y_{i1}(0) | G_i=1]$, is the expected outcome for the treated group had they *not* been treated. This is a counterfactual quantity and is not directly observable.\n\nTo identify this counterfactual term, we invoke the key **parallel trends assumption**. This assumption states that, in the absence of the intervention, the average change in the outcome for the treated group would have been the same as the average change for the control group. Formally:\n$$E[Y_{i1}(0) - Y_{i0}(0) | G_i=1] = E[Y_{i1}(0) - Y_{i0}(0) | G_i=0]$$\nWe can rearrange this equation to solve for the unobservable counterfactual term:\n$$E[Y_{i1}(0) | G_i=1] = E[Y_{i0}(0) | G_i=1] + E[Y_{i1}(0) | G_i=0] - E[Y_{i0}(0) | G_i=0]$$\nNow, we can express each term on the right-hand side using observable quantities:\n- $E[Y_{i0}(0) | G_i=1]$ is the expected outcome for the treatment group at $t=0$. Since no one is treated, this is simply the observed average outcome, $E[Y_{i0} | G_i=1]$.\n- $E[Y_{i1}(0) | G_i=0]$ is the expected outcome for the control group at $t=1$. Since they are not treated, this is their observed average outcome, $E[Y_{i1} | G_i=0]$.\n- $E[Y_{i0}(0) | G_i=0]$ is the expected outcome for the control group at $t=0$, which is their observed average outcome, $E[Y_{i0} | G_i=0]$.\n\nLet's use the notation $\\mu_{Gt} = E[Y_{it} | G_i=G, \\text{time}=t]$ for the observable group-time means. The expression for the counterfactual becomes:\n$$E[Y_{i1}(0) | G_i=1] = \\mu_{10} + \\mu_{01} - \\mu_{00}$$\nSubstituting this back into the ATT formula:\n$$ATT = E[Y_{i1}(1) | G_i=1] - ( \\mu_{10} + \\mu_{01} - \\mu_{00} )$$\nThe term $E[Y_{i1}(1) | G_i=1]$ is the observed mean for the treatment group post-treatment, $\\mu_{11}$.\nTherefore, the ATT is:\n$$ATT = \\mu_{11} - \\mu_{10} - \\mu_{01} + \\mu_{00}$$\nThis can be rearranged into the classic DiD form:\n$$ATT = (\\mu_{11} - \\mu_{10}) - (\\mu_{01} - \\mu_{00})$$\nThis is the difference in the average outcome change over time for the treatment group minus the average outcome change over time for the control group. The Stable Unit Treatment Value Assumption (SUTVA) ensures that the outcomes for one unit are not affected by the treatment status of another (no interference) and that the treatment is well-defined, which are necessary for this derivation.\n\nNow, we compute the DiD estimate using the provided data. The sample averages are used as estimators for the population means $\\mu_{Gt}$.\nLet $\\bar{Y}_{G,t}$ be the observed average outcome for group $G$ at time $t$.\nGiven data:\n- Intervention group ($G=1$): $\\bar{Y}_{1,0} = 50.0$, $\\bar{Y}_{1,1} = 42.5$.\n- Control group ($G=0$): $\\bar{Y}_{0,0} = 45.0$, $\\bar{Y}_{0,1} = 40.8$.\n\nThe DiD estimator, $\\widehat{ATT}$, is calculated as:\n$$\\widehat{ATT} = (\\bar{Y}_{1,1} - \\bar{Y}_{1,0}) - (\\bar{Y}_{0,1} - \\bar{Y}_{0,0})$$\nFirst, calculate the change for the intervention group:\n$$\\Delta_{G=1} = \\bar{Y}_{1,1} - \\bar{Y}_{1,0} = 42.5 - 50.0 = -7.5$$\nNext, calculate the change for the control group:\n$$\\Delta_{G=0} = \\bar{Y}_{0,1} - \\bar{Y}_{0,0} = 40.8 - 45.0 = -4.2$$\nFinally, calculate the difference-in-differences:\n$$\\widehat{ATT} = \\Delta_{G=1} - \\Delta_{G=0} = -7.5 - (-4.2) = -7.5 + 4.2 = -3.3$$\nThe result, $-3.3$, represents the estimated average treatment effect on the treated. It is a reduction of $3.3$ avoidable hospitalizations per $1{,}000$ person-years attributable to the program.\nRounding the result to four significant figures gives $-3.300$.", "answer": "$$\\boxed{-3.300}$$", "id": "4389018"}]}
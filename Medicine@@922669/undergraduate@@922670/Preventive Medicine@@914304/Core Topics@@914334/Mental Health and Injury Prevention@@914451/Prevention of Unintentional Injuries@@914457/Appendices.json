{"hands_on_practices": [{"introduction": "Effective injury prevention often begins with a deep understanding of the physical mechanisms of harm. This practice demonstrates how to translate a biophysical model of thermal injury into a concrete, life-saving public health policy. By applying principles derived from chemical kinetics to model skin damage, you will determine the relationship between water temperature and the time required to cause a severe burn, a calculation that directly informs safety standards for household water heaters [@problem_id:4560799].", "problem": "A municipal injury-prevention program is evaluating the risk of scald burns from hot tap water and wishes to set a maximum water heater setpoint that ensures adequate reaction time before a full-thickness burn occurs. Assume the rate of thermal injury to skin follows first-order Arrhenius kinetics, and irreversible injury accumulates as the damage integral\n$$\n\\Omega(t) \\;=\\; \\int_{0}^{t} A \\,\\exp\\!\\left(-\\frac{E_{a}}{R\\,T(\\tau)}\\right)\\, d\\tau,\n$$\nwhere $A$ is the pre-exponential factor, $E_{a}$ is the activation energy, $R$ is the universal gas constant, and $T(\\tau)$ is the absolute temperature of the affected tissue over time. Let the critical damage thresholds be $\\Omega_{\\mathrm{epi}}$ for an epidermal (partial-thickness) burn onset and $\\Omega_{\\mathrm{full}}$ for a full-thickness burn. Use the well-tested parameter values $A = 3.1 \\times 10^{98}\\ \\mathrm{s}^{-1}$, $E_{a} = 6.28 \\times 10^{5}\\ \\mathrm{J/mol}$, $R = 8.314\\ \\mathrm{J/(mol\\cdot K)}$, $\\Omega_{\\mathrm{epi}} = 0.53$, and $\\Omega_{\\mathrm{full}} = 1.00$. In flowing hot tap water at setpoint temperature $T_{w}$, assume a conservative worst-case in which the skin surface temperature rapidly equilibrates so that $T(\\tau) = T_{w}$ is constant during the exposure. \n\n(a) Starting from the damage integral, derive analytic expressions for the time-to-threshold functions $t_{\\mathrm{epi}}(T_{w})$ and $t_{\\mathrm{full}}(T_{w})$ as functions of the hot water absolute temperature $T_{w}$.\n\n(b) The municipality seeks a policy such that a full-thickness burn requires at least $t_{\\min} = 30\\ \\mathrm{s}$ of continuous exposure to hot water at the tap. Under the constant-temperature assumption above, determine the maximum permissible water heater setpoint $T_{\\mathrm{safe}}$ (in degrees Celsius) that satisfies $t_{\\mathrm{full}}(T_{\\mathrm{safe}}) \\ge t_{\\min}$. Express your final numerical answer in degrees Celsius and round your answer to three significant figures.", "solution": "The problem statement has been evaluated and is determined to be valid. It is scientifically grounded in the established Henriques-Moritz damage integral model for thermal injury, which uses the Arrhenius equation. All necessary parameters and conditions are provided, making the problem well-posed and self-contained. The language is objective and precise.\n\n(a) Derivation of the time-to-threshold functions $t_{\\mathrm{epi}}(T_{w})$ and $t_{\\mathrm{full}}(T_{w})$.\n\nThe accumulation of irreversible thermal injury is described by the damage integral:\n$$\n\\Omega(t) = \\int_{0}^{t} A \\exp\\left(-\\frac{E_{a}}{R T(\\tau)}\\right) d\\tau\n$$\nwhere $\\Omega(t)$ is the dimensionless damage index at time $t$, $A$ is the pre-exponential factor, $E_a$ is the activation energy, $R$ is the universal gas constant, and $T(\\tau)$ is the absolute temperature of the tissue as a function of time $\\tau$.\n\nThe problem states to assume a constant skin surface temperature equal to the hot water setpoint temperature, $T_w$. This simplifies the temperature function to $T(\\tau) = T_w$. Under this condition, the integrand becomes a constant with respect to the integration variable $\\tau$.\n$$\n\\Omega(t) = \\int_{0}^{t} A \\exp\\left(-\\frac{E_{a}}{R T_w}\\right) d\\tau\n$$\nWe can move the constant term outside the integral:\n$$\n\\Omega(t) = A \\exp\\left(-\\frac{E_{a}}{R T_w}\\right) \\int_{0}^{t} d\\tau\n$$\nEvaluating the simple integral yields:\n$$\n\\Omega(t) = A \\exp\\left(-\\frac{E_{a}}{R T_w}\\right) \\left[ \\tau \\right]_{0}^{t} = A \\exp\\left(-\\frac{E_{a}}{R T_w}\\right) t\n$$\nTo find the time $t$ required to reach a certain damage threshold $\\Omega$, we rearrange the equation to solve for $t$:\n$$\nt(\\Omega, T_w) = \\frac{\\Omega}{A \\exp\\left(-\\frac{E_{a}}{R T_w}\\right)} = \\frac{\\Omega}{A} \\exp\\left(\\frac{E_{a}}{R T_w}\\right)\n$$\nThis general expression can now be used to find the specific time-to-threshold functions for epidermal (partial-thickness) and full-thickness burns by substituting the respective critical damage thresholds, $\\Omega_{\\mathrm{epi}}$ and $\\Omega_{\\mathrm{full}}$.\n\nFor an epidermal burn, the threshold is $\\Omega_{\\mathrm{epi}}$. The time to reach this threshold, $t_{\\mathrm{epi}}$, is:\n$$\nt_{\\mathrm{epi}}(T_w) = \\frac{\\Omega_{\\mathrm{epi}}}{A} \\exp\\left(\\frac{E_{a}}{R T_w}\\right)\n$$\nFor a full-thickness burn, the threshold is $\\Omega_{\\mathrm{full}}$. The time to reach this threshold, $t_{\\mathrm{full}}$, is:\n$$\nt_{\\mathrm{full}}(T_w) = \\frac{\\Omega_{\\mathrm{full}}}{A} \\exp\\left(\\frac{E_{a}}{R T_w}\\right)\n$$\nThese are the required analytic expressions for the time-to-threshold functions.\n\n(b) Determination of the maximum permissible water heater setpoint $T_{\\mathrm{safe}}$.\n\nThe municipal policy requires that the continuous exposure time to cause a full-thickness burn must be at least $t_{\\min} = 30\\ \\mathrm{s}$. We need to find the maximum temperature, $T_{\\mathrm{safe}}$, that satisfies this condition. The relationship between time and temperature is inverse and exponential; a higher temperature leads to a shorter time to burn. Therefore, the maximum permissible temperature corresponds to the minimum allowed time. We set $t_{\\mathrm{full}}(T_{\\mathrm{safe}}) = t_{\\min}$.\n$$\nt_{\\min} = \\frac{\\Omega_{\\mathrm{full}}}{A} \\exp\\left(\\frac{E_{a}}{R T_{\\mathrm{safe}}}\\right)\n$$\nWe now solve this equation for $T_{\\mathrm{safe}}$. First, we isolate the exponential term:\n$$\n\\exp\\left(\\frac{E_{a}}{R T_{\\mathrm{safe}}}\\right) = \\frac{A t_{\\min}}{\\Omega_{\\mathrm{full}}}\n$$\nNext, we take the natural logarithm of both sides to eliminate the exponential function:\n$$\n\\ln\\left(\\exp\\left(\\frac{E_{a}}{R T_{\\mathrm{safe}}}\\right)\\right) = \\ln\\left(\\frac{A t_{\\min}}{\\Omega_{\\mathrm{full}}}\\right)\n$$\n$$\n\\frac{E_{a}}{R T_{\\mathrm{safe}}} = \\ln\\left(\\frac{A t_{\\min}}{\\Omega_{\\mathrm{full}}}\\right)\n$$\nFinally, we rearrange the equation algebraically to solve for $T_{\\mathrm{safe}}$:\n$$\nT_{\\mathrm{safe}} = \\frac{E_{a}}{R \\ln\\left(\\frac{A t_{\\min}}{\\Omega_{\\mathrm{full}}}\\right)}\n$$\nThis expression gives the maximum safe temperature in absolute units (Kelvin). We now substitute the given numerical values:\n$A = 3.1 \\times 10^{98}\\ \\mathrm{s}^{-1}$\n$E_{a} = 6.28 \\times 10^{5}\\ \\mathrm{J/mol}$\n$R = 8.314\\ \\mathrm{J/(mol\\cdot K)}$\n$\\Omega_{\\mathrm{full}} = 1.00$\n$t_{\\min} = 30\\ \\mathrm{s}$\n\nFirst, we calculate the argument of the natural logarithm:\n$$\n\\frac{A t_{\\min}}{\\Omega_{\\mathrm{full}}} = \\frac{(3.1 \\times 10^{98}) \\cdot (30)}{1.00} = 9.3 \\times 10^{99}\n$$\nNow, we compute the natural logarithm of this value:\n$$\n\\ln\\left(9.3 \\times 10^{99}\\right) = \\ln(9.3) + \\ln(10^{99}) = \\ln(9.3) + 99 \\ln(10) \\approx 2.23001 + 99 \\cdot (2.30259) \\approx 230.186\n$$\nNow, we substitute this into the expression for $T_{\\mathrm{safe}}$:\n$$\nT_{\\mathrm{safe}} = \\frac{6.28 \\times 10^{5}\\ \\mathrm{J/mol}}{(8.314\\ \\mathrm{J/(mol\\cdot K)}) \\cdot (230.186)} \\approx \\frac{6.28 \\times 10^{5}}{1913.68} \\ \\mathrm{K} \\approx 328.16\\ \\mathrm{K}\n$$\nThe problem requires the answer in degrees Celsius. The conversion from Kelvin to Celsius is $T(^{\\circ}\\text{C}) = T(\\text{K}) - 273.15$.\n$$\nT_{\\mathrm{safe}}(^{\\circ}\\text{C}) = 328.16 - 273.15 = 55.01\\ ^{\\circ}\\text{C}\n$$\nThe final answer must be rounded to three significant figures.\n$$\nT_{\\mathrm{safe}} \\approx 55.0\\ ^{\\circ}\\text{C}\n$$\nThus, the maximum permissible water heater setpoint to ensure that a full-thickness burn requires at least $30$ seconds of exposure is $55.0\\ ^{\\circ}\\text{C}$.", "answer": "$$\n\\boxed{55.0}\n$$", "id": "4560799"}, {"introduction": "In public health, we often rely on observational studies to evaluate interventions, but these can be influenced by unmeasured confounding variables. This exercise introduces a critical skill for assessing such evidence: sensitivity analysis. You will calculate the E-value, a metric that quantifies the strength of association an unmeasured confounder would need to have with both the exposure and outcome to nullify an observed result, enhancing your ability to interpret findings from non-randomized studies [@problem_id:4560767].", "problem": "A municipality evaluates whether household smoke alarm ownership reduces burn mortality in residential fires. In a prospective cohort of households, after adjustment for measured sociodemographic and housing covariates, the observed risk ratio (RR) comparing burn mortality among households with smoke alarms versus those without is $RR_{\\text{obs}} = 0.65$. To assess the robustness of this protective association to unmeasured confounding, you are asked to derive, from first principles, the expression for the minimum strength of association that an unmeasured confounder would need to have with both the exposure (smoke alarm ownership) and the outcome (burn mortality), on the risk ratio scale, to move the observed association to the null. This minimum strength is often summarized by an E-value.\n\nStarting from the core definition of a risk ratio, $RR = \\frac{P(Y=1 \\mid A=1)}{P(Y=1 \\mid A=0)}$, and standard worst-case bounds on unmeasured confounding expressed via a bias factor $B$ for a single unmeasured confounder, derive the E-value expression appropriate for a protective association and then compute the E-value for $RR_{\\text{obs}} = 0.65$. Round your final numeric answer to four significant figures. Express your final answer as a unitless quantity. Finally, briefly discuss how to interpret the computed E-value in the context of preventive strategies for residential burns (discussion is not part of the numerical answer).", "solution": "### Derivation and Solution\n\nLet $RR_{\\text{obs}}$ be the observed risk ratio and $RR_{\\text{true}}$ be the true risk ratio, free from the influence of unmeasured confounding. The relationship between them can be expressed via a bias factor, $B$, as:\n$$RR_{\\text{obs}} = RR_{\\text{true}} \\times B$$\nThe E-value quantifies the strength of an unmeasured confounder, $U$, required to \"explain away\" the observed association. Explaining away the association means demonstrating that the observed effect could arise from confounding alone, assuming the true effect is null, i.e., $RR_{\\text{true}} = 1$.\n\nFor a protective association, $RR_{\\text{obs}} < 1$. To shift this observed value to the null value of $1$, the bias factor $B$ must satisfy the relation $1 = RR_{\\text{obs}} \\times B$. This implies the bias factor needed is:\n$$B_{\\text{target}} = \\frac{1}{RR_{\\text{obs}}}$$\nSince $RR_{\\text{obs}} < 1$, the target bias factor $B_{\\text{target}}$ is greater than $1$, which is consistent with the standard definition of a bias factor's magnitude.\n\nLet $RR_{AU}$ be the risk ratio for the association between the unmeasured confounder $U$ and the exposure $A$, and let $RR_{YU}$ be the risk ratio for the association between the confounder $U$ and the outcome $Y$ (conditional on exposure). We assume these risk ratios are defined to be $\\geq 1$.\n\nA standard result in sensitivity analysis provides an upper bound on the magnitude of the bias factor $B$ that can be generated by a single unmeasured confounder with parameters $RR_{AU}$ and $RR_{YU}$:\n$$B \\leq \\frac{RR_{AU} \\times RR_{YU}}{RR_{AU} + RR_{YU} - 1}$$\nThe E-value is defined as the minimum value, let's call it $E$, that $RR_{AU}$ and $RR_{YU}$ would both need to take to potentially produce the target bias, $B_{\\text{target}}$. To find this minimum value, we set $RR_{AU} = RR_{YU} = E$ and equate the maximum possible bias to the target bias:\n$$B_{\\text{target}} = \\frac{E \\times E}{E + E - 1} = \\frac{E^2}{2E - 1}$$\nWe must now solve this equation for $E$. Rearranging the terms gives a quadratic equation in $E$:\n$$B_{\\text{target}}(2E - 1) = E^2$$\n$$E^2 - 2B_{\\text{target}}E + B_{\\text{target}} = 0$$\nUsing the quadratic formula, $E = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$, with $a=1$, $b=-2B_{\\text{target}}$, and $c=B_{\\text{target}}$:\n$$E = \\frac{2B_{\\text{target}} \\pm \\sqrt{(-2B_{\\text{target}})^2 - 4(1)(B_{\\text{target}})}}{2}$$\n$$E = \\frac{2B_{\\text{target}} \\pm \\sqrt{4B_{\\text{target}}^2 - 4B_{\\text{target}}}}{2}$$\n$$E = B_{\\text{target}} \\pm \\sqrt{B_{\\text{target}}^2 - B_{\\text{target}}}$$\nThe E-value represents the minimum required association strength. If the confounder associations were unequal (e.g., $RR_{AU} \\neq RR_{YU}$), one of them would have to be even larger than the value given by the larger root to achieve the same level of bias. Therefore, the formal definition of the E-value takes the larger root, which provides the necessary minimum value if the associations were equal.\n$$E\\text{-value} = B_{\\text{target}} + \\sqrt{B_{\\text{target}}^2 - B_{\\text{target}}}$$\nSubstituting $B_{\\text{target}} = 1/RR_{\\text{obs}}$ gives the final expression for the E-value for a protective association:\n$$E\\text{-value} = \\frac{1}{RR_{\\text{obs}}} + \\sqrt{\\left(\\frac{1}{RR_{\\text{obs}}}\\right)^2 - \\frac{1}{RR_{\\text{obs}}}}$$\n\nNow, we compute the E-value for the given observed risk ratio, $RR_{\\text{obs}} = 0.65$.\nFirst, calculate the target bias factor:\n$$B_{\\text{target}} = \\frac{1}{0.65}$$\nNow substitute this into the E-value formula:\n$$E = \\frac{1}{0.65} + \\sqrt{\\left(\\frac{1}{0.65}\\right)^2 - \\frac{1}{0.65}}$$\n$$E = \\frac{1}{0.65} + \\frac{\\sqrt{1 - 0.65}}{0.65}$$\n$$E = \\frac{1 + \\sqrt{0.35}}{0.65}$$\nNow, we compute the numerical value:\n$$E \\approx \\frac{1 + 0.591607978}{0.65} \\approx \\frac{1.591607978}{0.65} \\approx 2.448627659$$\nRounding to four significant figures, we get:\n$$E \\approx 2.449$$\n\n### Interpretation\nThe computed E-value of $2.449$ provides a quantitative measure of the robustness of the observed association to unmeasured confounding. It means that for an unmeasured confounder to fully account for the observed protective effect of smoke alarms ($RR_{\\text{obs}} = 0.65$), that confounder would need to have a risk ratio of at least $2.449$ with both smoke alarm ownership (the exposure) and burn mortality (the outcome), conditional on the covariates already included in the model. In practice, a public health official or researcher would consider whether it is plausible for such a strong, unmeasured confounder to exist. For instance, is it plausible that a factor like extreme poverty or a specific type of risky housing material, not adjusted for in the analysis, is associated with a nearly $2.5$-fold increase in the likelihood of not owning a smoke alarm and also a nearly $2.5$-fold increase in the risk of dying in a fire? If such a confounder is deemed unlikely, this E-value strengthens the inference that the observed association is causal, reinforcing the value of smoke alarms as a preventive strategy against residential burn mortality. Conversely, if a plausible confounder of that magnitude could exist, the result should be interpreted with more caution.", "answer": "$$\\boxed{2.449}$$", "id": "4560767"}, {"introduction": "Beyond determining if an intervention is effective, a key challenge in public health is allocating limited resources to achieve the greatest population benefit. This practice moves into the realm of systems thinking and optimization. You will use linear programming, a powerful tool from operations research, to create an optimal lifeguard staffing plan that minimizes expected drownings across multiple locations, subject to real-world budget and logistical constraints [@problem_id:4560788].", "problem": "You are tasked with formulating, justifying, and implementing a linear programming model to optimize the allocation of limited lifeguard coverage across multiple beaches and time blocks with the goal of minimizing expected drownings. The setting is the prevention of unintentional injuries (drowning) in preventive medicine. Use first principles of probability and resource allocation to derive the model.\n\nStart from the following fundamental base:\n- Linearity of expectation: for any set of independent or weakly dependent rare-event processes, the expected total count equals the sum of the block-wise expected counts. If a beach-time block has a baseline expected drowning count $R_{b,t}$ (events per block), the total expected drownings across all blocks is $\\sum_{b,t} R_{b,t}$ when there is no lifeguard coverage.\n- Rare-event approximation via a Poisson process (events per hour): when events are rare and surveillance acts to reduce the hazard rate approximately proportionally to lifeguard-hours expended, then an incremental coverage of $x_{b,t}$ lifeguard-hours reduces expected drownings by $\\alpha_{b,t} x_{b,t}$ in block $(b,t)$, where $\\alpha_{b,t}$ is the effectiveness coefficient measured in expected drownings prevented per lifeguard-hour. For physical realism, coverage is bounded such that $x_{b,t} \\le R_{b,t}/\\alpha_{b,t}$ when $\\alpha_{b,t} > 0$ so that expected drownings do not become negative in any block.\n- Resource constraints: lifeguard-hours are limited by time-block staffing availability and a daily total. Regulatory minimum coverage requirements may impose lower bounds $m_{b,t}$.\n\nDerive from these bases a linear programming model with decision variables $x_{b,t}$ representing lifeguard-hours allocated to beach $b$ in time-block $t$. Explain why the objective is linear and how the constraints are formed. Implement the model in a program that solves the linear program for the provided test suite and returns the requested outputs.\n\nDecision variable ordering requirement:\n- Use the ordering $(x_{1,1}, x_{1,2}, \\dots, x_{1,T}, x_{2,1}, \\dots, x_{B,T})$ for a problem with $B$ beaches and $T$ time-blocks.\n\nUnits and output specification:\n- Lifeguard coverage $x_{b,t}$ is measured in hours.\n- Expected drownings are counts of events per day.\n- For each test case, output a pair consisting of:\n  1. The minimal expected drownings as a float in events per day, rounded to three decimals.\n  2. The optimal allocation vector $\\left[x_{1,1}, x_{1,2}, \\dots, x_{B,T}\\right]$ in hours, each entry rounded to two decimals.\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (for example, \"[[0.123,[1.00,0.50]], ...]\").\n\nTest suite:\n- Test Case A (general case, three beaches and three time-blocks, moderate resources with one regulatory minimum):\n  - $B = 3$, $T = 3$.\n  - Baseline expected drownings per block $R$ (events per block):\n    - Beach $1$: $[0.10, 0.20, 0.05]$.\n    - Beach $2$: $[0.15, 0.05, 0.10]$.\n    - Beach $3$: $[0.30, 0.25, 0.20]$.\n  - Effectiveness coefficients $\\alpha$ (events prevented per lifeguard-hour):\n    - Beach $1$: $[0.04, 0.05, 0.02]$.\n    - Beach $2$: $[0.03, 0.02, 0.03]$.\n    - Beach $3$: $[0.06, 0.05, 0.04]$.\n  - Demand cap per block (maximum assignable hours due to logistics or diminishing returns): all blocks $3.00$ hours.\n  - Regulatory minima $m$ (hours): beach $3$, time-block $1$ requires $0.50$ hours; all other blocks require $0.00$ hours.\n  - Time-block staffing availability $L_t$ (hours): $[3.50, 5.00, 3.00]$.\n  - Daily total staffing $L_{\\text{total}}$ (hours): $9.00$.\n- Test Case B (edge case with zero effectiveness in some blocks and a regulatory minimum in an ineffective block):\n  - $B = 2$, $T = 2$.\n  - $R$:\n    - Beach $1$: $[0.12, 0.08]$.\n    - Beach $2$: $[0.07, 0.11]$.\n  - $\\alpha$:\n    - Beach $1$: $[0.00, 0.04]$.\n    - Beach $2$: $[0.03, 0.00]$.\n  - Demand cap per block: all blocks $1.00$ hours.\n  - Regulatory minima $m$: beach $2$, time-block $2$ requires $0.20$ hours; all other blocks require $0.00$ hours.\n  - $L_t$: $[0.50, 0.50]$.\n  - $L_{\\text{total}}$: $0.80$.\n- Test Case C (resources sufficient to saturate all beneficial coverage up to physical nonnegativity caps):\n  - $B = 2$, $T = 3$.\n  - $R$:\n    - Beach $1$: $[0.05, 0.10, 0.08]$.\n    - Beach $2$: $[0.02, 0.06, 0.04]$.\n  - $\\alpha$:\n    - Beach $1$: $[0.05, 0.05, 0.04]$.\n    - Beach $2$: $[0.02, 0.03, 0.02]$.\n  - Demand cap per block: all blocks $2.00$ hours.\n  - Regulatory minima $m$: all blocks $0.00$ hours.\n  - $L_t$: $[3.00, 4.00, 4.00]$.\n  - $L_{\\text{total}}$: $10.00$.\n\nImplementation requirements:\n- Formulate the linear program from the fundamental base, not by invoking any pre-given target formula.\n- Solve using a standard linear programming solver.\n- Use the specified variable ordering and units.\n- Produce the single-line output in the exact format described, aggregating the results from Test Case A, Test Case B, and Test Case C, in that order.", "solution": "The problem has been validated and is determined to be valid. It is scientifically grounded, well-posed, objective, and contains a complete and consistent setup for a standard linear programming problem.\n\n### Derivation of the Linear Programming Model\n\nThe objective is to minimize the total expected number of drownings across all beaches and time blocks by optimally allocating lifeguard-hours.\n\n**1. Decision Variables**\n\nThe decision variables are the number of lifeguard-hours allocated to each beach $b$ during each time-block $t$. Let us denote these as $x_{b,t}$, where $b \\in \\{1, \\dots, B\\}$ and $t \\in \\{1, \\dots, T\\}$. These variables are continuous and non-negative. For implementation, these $B \\times T$ variables are flattened into a single vector $\\mathbf{x}$ of length $N = B \\times T$ using the specified ordering: $\\mathbf{x} = (x_{1,1}, x_{1,2}, \\dots, x_{1,T}, x_{2,1}, \\dots, x_{B,T})$.\n\n**2. Objective Function**\n\nThe problem states that without any lifeguard coverage, the baseline expected drowning count in a block $(b,t)$ is $R_{b,t}$. The total expected drownings across all blocks would be the sum over all blocks, based on the linearity of expectation:\n$$D_{\\text{base}} = \\sum_{b=1}^{B} \\sum_{t=1}^{T} R_{b,t}$$\nThe allocation of $x_{b,t}$ lifeguard-hours reduces the expected drownings in block $(b,t)$ by an amount $\\alpha_{b,t} x_{b,t}$, where $\\alpha_{b,t}$ is the effectiveness coefficient. The total expected drownings, as a function of the allocation vector $\\mathbf{x}$, is therefore:\n$$D(\\mathbf{x}) = \\sum_{b=1}^{B} \\sum_{t=1}^{T} (R_{b,t} - \\alpha_{b,t} x_{b,t}) = \\left(\\sum_{b=1}^{B} \\sum_{t=1}^{T} R_{b,t}\\right) - \\left(\\sum_{b=1}^{B} \\sum_{t=1}^{T} \\alpha_{b,t} x_{b,t}\\right)$$\nTo minimize $D(\\mathbf{x})$, we must maximize the total reduction in drownings, since the first term, $D_{\\text{base}}$, is a constant. The optimization problem is thus:\n$$\\text{maximize} \\quad \\sum_{b=1}^{B} \\sum_{t=1}^{T} \\alpha_{b,t} x_{b,t}$$\nThis is a linear objective function, as it is a weighted sum of the decision variables $x_{b,t}$. Standard linear programming (LP) solvers typically perform minimization. To fit this framework, we can equivalently minimize the negative of the objective function:\n$$\\text{minimize} \\quad \\sum_{b=1}^{B} \\sum_{t=1}^{T} (-\\alpha_{b,t}) x_{b,t}$$\nThis can be written in vector form as $\\text{minimize} \\ \\mathbf{c}^T \\mathbf{x}$, where the components of the cost vector $\\mathbf{c}$ are $c_{b,t} = -\\alpha_{b,t}$.\n\n**3. Constraints**\n\nThe allocation of lifeguard-hours is subject to several constraints, all of which are linear.\n\n**3.1. Bounds on Individual Allocations**\n\nEach variable $x_{b,t}$ is bounded from below and above.\n- **Lower Bound (Regulatory Minima):** There is a mandatory minimum coverage $m_{b,t}$ for each block.\n$$x_{b,t} \\ge m_{b,t} \\quad \\forall b,t$$\nIf no minimum is specified, $m_{b,t} = 0$.\n- **Upper Bound (Physical Realism and Demand Caps):** There are two sources for upper bounds. First, the expected number of drownings in any block cannot be negative. This physical realism constraint requires $R_{b,t} - \\alpha_{b,t} x_{b,t} \\ge 0$. For $\\alpha_{b,t} > 0$, this implies $x_{b,t} \\le R_{b,t} / \\alpha_{b,t}$. If $\\alpha_{b,t} = 0$, this constraint imposes no upper limit on $x_{b,t}$. Second, a \"demand cap,\" denoted $c_{b,t}$, is given for each block. The allocation $x_{b,t}$ cannot exceed either of these limits. Thus, the upper bound $u_{b,t}$ is a composite:\n$$u_{b,t} = \\begin{cases} \\min(c_{b,t}, R_{b,t}/\\alpha_{b,t}) & \\text{if } \\alpha_{b,t} > 0 \\\\ c_{b,t} & \\text{if } \\alpha_{b,t} = 0 \\end{cases}$$\nThe complete bounds for each variable are:\n$$m_{b,t} \\le x_{b,t} \\le u_{b,t} \\quad \\forall b,t$$\n\n**3.2. Time-Block Staffing Availability**\n\nFor each time-block $t$, the sum of lifeguard-hours allocated across all beaches cannot exceed the total hours available for that block, $L_t$. This gives $T$ linear inequality constraints:\n$$\\sum_{b=1}^{B} x_{b,t} \\le L_t \\quad \\text{for each } t \\in \\{1, \\dots, T\\}$$\n\n**3.3. Daily Total Staffing**\n\nThe total number of lifeguard-hours allocated across all beaches and all time-blocks for the entire day must not exceed the daily total staffing budget, $L_{\\text{total}}$. This gives one additional linear inequality constraint:\n$$\\sum_{b=1}^{B} \\sum_{t=1}^{T} x_{b,t} \\le L_{\\text{total}}$$\n\n**Summary of the LP Formulation**\n\nThe complete linear programming model is:\n- **Objective:**\n$$\\text{Minimize} \\quad Z = \\sum_{b=1}^{B} \\sum_{t=1}^{T} (-\\alpha_{b,t}) x_{b,t}$$\n- **Subject to:**\n$$m_{b,t} \\le x_{b,t} \\le u_{b,t} \\quad \\forall b \\in \\{1,..,B\\}, t \\in \\{1,..,T\\}$$\n$$\\sum_{b=1}^{B} x_{b,t} \\le L_t \\quad \\forall t \\in \\{1,..,T\\}$$\n$$\\sum_{b=1}^{B} \\sum_{t=1}^{T} x_{b,t} \\le L_{\\text{total}}$$\nThis is a standard form for a linear program, which can be solved efficiently using established algorithms like the simplex or interior-point methods. The optimal value of the objective function, $Z^*$, can be used to find the minimal expected number of drownings: $D_{\\text{min}} = D_{\\text{base}} + Z^*$.", "answer": "```python\nimport numpy as np\nfrom scipy.optimize import linprog\n\ndef solve():\n    \"\"\"\n    Formulates and solves the lifeguard allocation linear programming problem\n    for a suite of test cases.\n    \"\"\"\n    test_cases = [\n        # Test Case A\n        {\n            \"B\": 3, \"T\": 3,\n            \"R\": np.array([[0.10, 0.20, 0.05], [0.15, 0.05, 0.10], [0.30, 0.25, 0.20]]),\n            \"alpha\": np.array([[0.04, 0.05, 0.02], [0.03, 0.02, 0.03], [0.06, 0.05, 0.04]]),\n            \"demand_cap\": 3.00,\n            \"m\": np.array([[0.00, 0.00, 0.00], [0.00, 0.00, 0.00], [0.50, 0.00, 0.00]]),\n            \"Lt\": np.array([3.50, 5.00, 3.00]),\n            \"L_total\": 9.00\n        },\n        # Test Case B\n        {\n            \"B\": 2, \"T\": 2,\n            \"R\": np.array([[0.12, 0.08], [0.07, 0.11]]),\n            \"alpha\": np.array([[0.00, 0.04], [0.03, 0.00]]),\n            \"demand_cap\": 1.00,\n            \"m\": np.array([[0.00, 0.00], [0.00, 0.20]]),\n            \"Lt\": np.array([0.50, 0.50]),\n            \"L_total\": 0.80\n        },\n        # Test Case C\n        {\n            \"B\": 2, \"T\": 3,\n            \"R\": np.array([[0.05, 0.10, 0.08], [0.02, 0.06, 0.04]]),\n            \"alpha\": np.array([[0.05, 0.05, 0.04], [0.02, 0.03, 0.02]]),\n            \"demand_cap\": 2.00,\n            \"m\": np.array([[0.00, 0.00, 0.00], [0.00, 0.00, 0.00]]),\n            \"Lt\": np.array([3.00, 4.00, 4.00]),\n            \"L_total\": 10.00\n        }\n    ]\n\n    results = []\n    for case in test_cases:\n        B, T = case[\"B\"], case[\"T\"]\n        R, alpha, m = case[\"R\"], case[\"alpha\"], case[\"m\"]\n        demand_cap, Lt, L_total = case[\"demand_cap\"], case[\"Lt\"], case[\"L_total\"]\n        \n        num_vars = B * T\n\n        # Flatten inputs according to the row-major (beach-major) order specified\n        # x = (x_11, x_12, ..., x_1T, x_21, ..., x_BT)\n        R_flat = R.flatten()\n        alpha_flat = alpha.flatten()\n        m_flat = m.flatten()\n\n        # Objective function: minimize -alpha^T * x\n        c = -alpha_flat\n\n        # Bounds for each variable x_bt\n        lower_bounds = m_flat\n        upper_bounds = np.full(num_vars, demand_cap)\n        \n        # Apply physical realism cap: x_bt <= R_bt / alpha_bt\n        # We use a mask to avoid division by zero where alpha_bt=0\n        positive_alpha_mask = alpha_flat > 0\n        physical_caps = np.full(num_vars, np.inf)\n        physical_caps[positive_alpha_mask] = R_flat[positive_alpha_mask] / alpha_flat[positive_alpha_mask]\n        \n        upper_bounds = np.minimum(upper_bounds, physical_caps)\n        \n        bounds = list(zip(lower_bounds, upper_bounds))\n\n        # Inequality constraints: A_ub * x <= b_ub\n        # T constraints for time-block limits + 1 for total daily limit\n        A_ub = np.zeros((T + 1, num_vars))\n        b_ub = np.zeros(T + 1)\n        \n        # Time-block constraints: sum_b(x_bt) <= Lt for each t\n        for t in range(T):\n            for b in range(B):\n                var_index = b * T + t\n                A_ub[t, var_index] = 1\n            b_ub[t] = Lt[t]\n            \n        # Daily total constraint: sum_b,t(x_bt) <= L_total\n        A_ub[T, :] = 1\n        b_ub[T] = L_total\n        \n        # Solve the linear program\n        # The 'highs' method is robust and the new default in recent SciPy\n        res = linprog(c, A_ub=A_ub, b_ub=b_ub, bounds=bounds, method='highs')\n\n        if res.success:\n            optimal_x = res.x\n            # Minimal expected drownings = D_base + min(-alpha*x)\n            # D_base is the sum of all baseline risks R_bt\n            d_base = np.sum(R)\n            min_drownings = d_base + res.fun\n        else:\n            # Handle cases where the problem is infeasible or unbounded\n            min_drownings = float('nan')\n            optimal_x = np.full(num_vars, float('nan'))\n\n        # Format the output as specified\n        min_drownings_str = f\"{min_drownings:.3f}\"\n        optimal_x_str = f\"[{','.join([f'{val:.2f}' for val in optimal_x])}]\"\n        results.append(f\"[{min_drownings_str},{optimal_x_str}]\")\n\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n```", "id": "4560788"}]}
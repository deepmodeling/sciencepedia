{"hands_on_practices": [{"introduction": "Cardiovascular risk tools translate a patient's complex profile into a single, actionable probability. This first practice demystifies that process by using a simplified logistic regression model, similar in principle to the famous Framingham Risk Score, to calculate a 10-year event risk from factors like age and cholesterol. By working through the calculation [@problem_id:4507588], you will gain a fundamental understanding of how multiple variables are synthesized into a clinically meaningful risk estimate via the log-odds scale.", "problem": "In preventive medicine, widely used cardiovascular risk assessment tools such as those derived from the Framingham Heart Study often operationalize risk prediction with generalized linear models grounded in the definition of odds, where the odds of an event with probability $p$ are defined as $\\frac{p}{1-p}$. Consider a simplified, Framingham-like logistic model in which the log-odds of a $10$-year major cardiovascular event for an individual are assumed to be a linear function of natural logarithms of key risk factors and a smoking indicator:\n$$\n\\ln\\!\\left(\\frac{p}{1-p}\\right) = \\alpha + \\beta_{\\ln(\\text{age})}\\,\\ln(\\text{age}) + \\beta_{\\ln(\\text{TC})}\\,\\ln(\\text{TC}) + \\beta_{\\ln(\\text{HDL})}\\,\\ln(\\text{HDL}) + \\beta_{\\text{smoke}}\\,I_{\\text{smoke}},\n$$\nwhere $\\ln(\\cdot)$ denotes the natural logarithm, $\\text{TC}$ is total cholesterol, $\\text{HDL}$ is high-density lipoprotein, and $I_{\\text{smoke}}$ is an indicator that equals $1$ if the person currently smokes and $0$ otherwise. Suppose the intercept is $\\alpha=-5.0$ and the coefficients are $\\beta_{\\ln(\\text{age})}=1.2$, $\\beta_{\\ln(\\text{TC})}=1.0$, $\\beta_{\\ln(\\text{HDL})}=-1.5$, and $\\beta_{\\text{smoke}}=0.6$. For an individual with age $55$ years, $\\text{TC}=220$ mg/dL, $\\text{HDL}=45$ mg/dL, and who is a current smoker ($I_{\\text{smoke}}=1$), compute the $10$-year cardiovascular event probability $p$. Use natural logarithms for all log-transformations. Express the final risk as a decimal (no percent sign) and round your answer to four significant figures.", "solution": "The problem requires the calculation of the $10$-year cardiovascular event probability, $p$, for a specific individual using a given logistic regression model.\n\nThe model defines the natural logarithm of the odds of the event, known as the log-odds or logit, as a linear combination of several risk factors:\n$$\n\\ln\\left(\\frac{p}{1-p}\\right) = \\alpha + \\beta_{\\ln(\\text{age})}\\,\\ln(\\text{age}) + \\beta_{\\ln(\\text{TC})}\\,\\ln(\\text{TC}) + \\beta_{\\ln(\\text{HDL})}\\,\\ln(\\text{HDL}) + \\beta_{\\text{smoke}}\\,I_{\\text{smoke}}\n$$\nLet the linear predictor on the right-hand side be denoted by $L$.\n$$\nL = \\alpha + \\beta_{\\ln(\\text{age})}\\,\\ln(\\text{age}) + \\beta_{\\ln(\\text{TC})}\\,\\ln(\\text{TC}) + \\beta_{\\ln(\\text{HDL})}\\,\\ln(\\text{HDL}) + \\beta_{\\text{smoke}}\\,I_{\\text{smoke}}\n$$\nThe problem provides the values for the intercept and coefficients:\n$\\alpha = -5.0$\n$\\beta_{\\ln(\\text{age})} = 1.2$\n$\\beta_{\\ln(\\text{TC})} = 1.0$\n$\\beta_{\\ln(\\text{HDL})} = -1.5$\n$\\beta_{\\text{smoke}} = 0.6$\n\nThe data for the individual are:\nage $= 55$\nTC $= 220$\nHDL $= 45$\n$I_{\\text{smoke}} = 1$ (since the individual is a current smoker)\n\nFirst, we substitute these values into the expression for the linear predictor $L$:\n$$\nL = -5.0 + (1.2) \\cdot \\ln(55) + (1.0) \\cdot \\ln(220) + (-1.5) \\cdot \\ln(45) + (0.6) \\cdot 1\n$$\nWe compute the natural logarithms of the risk factors:\n$\\ln(55) \\approx 4.007333185$\n$\\ln(220) \\approx 5.393627735$\n$\\ln(45) \\approx 3.806662490$\n\nSubstituting these values into the equation for $L$:\n$$\nL \\approx -5.0 + (1.2)(4.007333185) + (1.0)(5.393627735) - (1.5)(3.806662490) + 0.6\n$$\n$$\nL \\approx -5.0 + 4.808799822 + 5.393627735 - 5.709993735 + 0.6\n$$\n$$\nL \\approx 0.092433822\n$$\nThe relationship between $L$ and the probability $p$ is given by $L = \\ln\\left(\\frac{p}{1-p}\\right)$. To find $p$, we must invert this relationship. First, we exponentiate both sides:\n$$\n\\exp(L) = \\exp\\left(\\ln\\left(\\frac{p}{1-p}\\right)\\right) = \\frac{p}{1-p}\n$$\nThe quantity $\\exp(L)$ represents the odds of the event. Let $O = \\exp(L)$. We solve for $p$:\n$$\nO = \\frac{p}{1-p}\n$$\n$$\nO(1-p) = p\n$$\n$$\nO - O \\cdot p = p\n$$\n$$\nO = p + O \\cdot p = p(1+O)\n$$\n$$\np = \\frac{O}{1+O}\n$$\nSubstituting $O = \\exp(L)$ back into this expression, we obtain the logistic function:\n$$\np = \\frac{\\exp(L)}{1+\\exp(L)}\n$$\nNow, we substitute the calculated numerical value of $L$:\n$$\np \\approx \\frac{\\exp(0.092433822)}{1+\\exp(0.092433822)}\n$$\nFirst, we evaluate the exponential term:\n$$\n\\exp(0.092433822) \\approx 1.0968255\n$$\nNext, we calculate $p$:\n$$\np \\approx \\frac{1.0968255}{1 + 1.0968255} = \\frac{1.0968255}{2.0968255}\n$$\n$$\np \\approx 0.5230867\n$$\nThe problem requires the final answer to be rounded to four significant figures. The first four significant figures of $0.5230867$ are $5$, $2$, $3$, and $0$. The fifth significant figure is $8$, which is greater than or equal to $5$, so we round up the fourth significant figure.\n$$\np \\approx 0.5231\n$$\nThus, the $10$-year cardiovascular event probability for this individual is approximately $0.5231$.", "answer": "$$\\boxed{0.5231}$$", "id": "4507588"}, {"introduction": "A risk score is not just a number; it is a critical guide for clinical action. This exercise demonstrates how to use a patient's baseline risk to quantify the potential benefit of an intervention, such as a statin, by calculating the Number Needed to Treat (NNT). This practice [@problem_id:4507603] is crucial for appreciating why preventative therapies provide greater absolute benefit to higher-risk individuals, a core concept in personalized and public health strategies.", "problem": "Atherosclerotic Cardiovascular Disease (ASCVD) risk assessment tools such as the Pooled Cohort Equations (PCE) estimate a baseline probability of a cardiovascular event over a specified horizon. Consider two patients evaluated with such a tool for a $10$-year horizon. Patient A has an estimated baseline event probability of $0.15$, and Patient B has an estimated baseline event probability of $0.05$. A moderate-intensity statin is expected to yield a constant proportional reduction in event probability over this horizon, represented as a relative risk reduction of $0.25$, applied multiplicatively to each patient’s baseline risk.\n\nUsing only core definitions of absolute risk, relative risk, and absolute risk reduction, derive and compute the Number Needed to Treat (NNT) over the $10$-year horizon for each patient. Then, quantify the comparison by computing the ratio of Patient B’s NNT to Patient A’s NNT. Round each computed quantity to three significant figures. Express all answers as unitless real numbers. Return your final numerical results in the order: NNT for baseline $0.15$, NNT for baseline $0.05$, and the ratio $\\text{NNT}_{0.05} / \\text{NNT}_{0.15}$.", "solution": "Risk assessment tools such as the Pooled Cohort Equations (PCE) provide a baseline probability of an event over a specified horizon, which we denote as $p$. A statin’s effect is described by a relative risk reduction, denoted $r$, which reduces risk multiplicatively, so the treated event probability becomes $(1 - r)p$. The absolute risk reduction (ARR) is the difference between baseline risk and treated risk, given by\n$$\n\\text{ARR} = p - (1 - r)p = rp.\n$$\nThe Number Needed to Treat (NNT) over the specified horizon is defined as the reciprocal of the absolute risk reduction:\n$$\nNNT = \\frac{1}{\\text{ARR}} = \\frac{1}{rp}.\n$$\n\nApply these definitions to each patient with $r = 0.25$.\n\nFor Patient A, with $p_{A} = 0.15$:\n$$\n\\text{ARR}_{A} = r p_{A} = 0.25 \\times 0.15 = 0.0375,\n$$\nso\n$$\nNNT_{A} = \\frac{1}{0.0375} = \\frac{1}{\\frac{3}{80}} = \\frac{80}{3} \\approx 26.666\\ldots.\n$$\nRounded to three significant figures:\n$$\nNNT_{A} \\approx 26.7.\n$$\n\nFor Patient B, with $p_{B} = 0.05$:\n$$\n\\text{ARR}_{B} = r p_{B} = 0.25 \\times 0.05 = 0.0125,\n$$\nso\n$$\nNNT_{B} = \\frac{1}{0.0125} = 80.\n$$\nRounded to three significant figures:\n$$\nNNT_{B} = 80.0.\n$$\n\nTo compare magnitudes, compute the ratio of Patient B’s NNT to Patient A’s NNT:\n$$\n\\frac{NNT_{B}}{NNT_{A}} = \\frac{\\frac{1}{r p_{B}}}{\\frac{1}{r p_{A}}} = \\frac{p_{A}}{p_{B}} = \\frac{0.15}{0.05} = 3.\n$$\nRounded to three significant figures:\n$$\n\\frac{NNT_{B}}{NNT_{A}} = 3.00.\n$$\n\nThus, Patient A’s NNT is lower because the absolute risk reduction is larger at a higher baseline risk, and the comparative ratio indicates that Patient B requires approximately three times as many treatments over the $10$-year horizon to prevent one event relative to Patient A, under the stated assumptions.", "answer": "$$\\boxed{\\begin{pmatrix}26.7  80.0  3.00\\end{pmatrix}}$$", "id": "4507603"}, {"introduction": "Before a risk model is deployed in a clinical setting, we must rigorously assess its performance. This final practice introduces a key metric of model discrimination, the Area Under the Receiver Operating Characteristic curve (AUC), by having you compute it from first principles. By manually comparing risk scores between individuals who had an event (cases) and those who did not (controls) [@problem_id:4507643], you will develop an intuitive grasp of what the AUC truly represents: the model's ability to correctly rank individuals according to their risk.", "problem": "In preventive medicine, risk prediction models for cardiovascular disease are evaluated by their ability to rank individuals who develop events higher than those who do not. The Area Under the Receiver Operating Characteristic curve (AUC) is the Area Under the Receiver Operating Characteristic (ROC) curve, where the ROC curve plots the true positive rate against the false positive rate as a decision threshold varies over the range of the score. A foundational result connects the $AUC$ to the probability that a randomly chosen case (event) has a higher predicted risk score than a randomly chosen control (non-event), with ties receiving one-half credit when they occur.\n\nConsider a cardiovascular risk assessment tool that outputs continuous scores in $[0,1]$. You have a small validation sample with case scores $\\{0.8, 0.7, 0.6\\}$ and control scores $\\{0.4, 0.5, 0.3\\}$. Using the pairwise comparison interpretation of $AUC$ based on the core definition above, compute the $AUC$ by enumerating all case-control pairs, assigning a value of $1$ if the case score exceeds the control score, $0$ if it is less, and $\\frac{1}{2}$ if the scores are equal. Report the final $AUC$ as an exact decimal number without rounding.", "solution": "The Area Under the Receiver Operating Characteristic curve (AUC) can be interpreted as the probability that a randomly selected individual from the case group (positive class) has a higher risk score than a randomly selected individual from the control group (negative class). The problem states this interpretation, defining a score for each case-control pair comparison: $1$ if the case score is higher, $0$ if the control score is higher, and $\\frac{1}{2}$ for a tie. The AUC is the average of these scores over all possible pairs.\n\nLet $S_{case}$ be the set of risk scores for the cases and $S_{control}$ be the set of risk scores for the controls.\nThe given data are:\n$$ S_{case} = \\{0.8, 0.7, 0.6\\} $$\n$$ S_{control} = \\{0.4, 0.5, 0.3\\} $$\n\nThe number of cases is $n_{case} = |S_{case}| = 3$.\nThe number of controls is $n_{control} = |S_{control}| = 3$.\n\nThe total number of unique case-control pairs is the product of the number of cases and the number of controls:\n$$ N_{pairs} = n_{case} \\times n_{control} = 3 \\times 3 = 9 $$\n\nWe must now enumerate all $9$ pairs and assign a score to each based on the comparison of the case score, $s_c$, and the control score, $s_{k}$. Let $I(s_c, s_{k})$ be the score for a given pair.\n$$ I(s_c, s_k) = \\begin{cases} 1  \\text{if } s_c  s_k \\\\ 0.5  \\text{if } s_c = s_k \\\\ 0  \\text{if } s_c  s_k \\end{cases} $$\n\nThe total sum of scores, $\\Sigma_{scores}$, is calculated by comparing each case score against every control score.\n\n1.  Comparisons for case score $s_c = 0.8$:\n    -   Pair $(0.8, 0.4)$: $0.8  0.4$, score is $1$.\n    -   Pair $(0.8, 0.5)$: $0.8  0.5$, score is $1$.\n    -   Pair $(0.8, 0.3)$: $0.8  0.3$, score is $1$.\n    -   Subtotal for $s_c=0.8$ is $1+1+1=3$.\n\n2.  Comparisons for case score $s_c = 0.7$:\n    -   Pair $(0.7, 0.4)$: $0.7  0.4$, score is $1$.\n    -   Pair $(0.7, 0.5)$: $0.7  0.5$, score is $1$.\n    -   Pair $(0.7, 0.3)$: $0.7  0.3$, score is $1$.\n    -   Subtotal for $s_c=0.7$ is $1+1+1=3$.\n\n3.  Comparisons for case score $s_c = 0.6$:\n    -   Pair $(0.6, 0.4)$: $0.6  0.4$, score is $1$.\n    -   Pair $(0.6, 0.5)$: $0.6  0.5$, score is $1$.\n    -   Pair $(0.6, 0.3)$: $0.6  0.3$, score is $1$.\n    -   Subtotal for $s_c=0.6$ is $1+1+1=3$.\n\nNo pairs have equal scores, so the $\\frac{1}{2}$ condition is not used.\nThe total sum of the scores for all pairs is:\n$$ \\Sigma_{scores} = 3 + 3 + 3 = 9 $$\n\nThe AUC is the total sum of scores divided by the total number of pairs:\n$$ AUC = \\frac{\\Sigma_{scores}}{N_{pairs}} = \\frac{9}{9} = 1 $$\n\nIn this specific sample, every case score is higher than every control score, which signifies perfect discrimination by the risk assessment tool for this dataset. This results in an AUC of $1$. The problem requests the answer as an exact decimal number.\n\n$$ AUC = 1.0 $$", "answer": "$$\\boxed{1.0}$$", "id": "4507643"}]}
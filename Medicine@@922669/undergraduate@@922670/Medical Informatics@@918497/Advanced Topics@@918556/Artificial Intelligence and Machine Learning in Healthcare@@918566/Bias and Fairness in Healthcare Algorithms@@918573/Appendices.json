{"hands_on_practices": [{"introduction": "Understanding algorithmic bias begins with the ability to measure it. This exercise provides a foundational, hands-on opportunity to calculate several of the most common group fairness metrics: Demographic Parity, Equalized Odds, and Predictive Parity. By working with confusion matrices from two different demographic groups at two distinct decision thresholds, you will learn how to quantify different types of disparity and see how the choice of operating point can impact the fairness of outcomes [@problem_id:4824186].", "problem": "A hospital deploys a binary classification algorithm to predict the onset of sepsis within $24$ hours. The classifier outputs a risk score, which is thresholded to produce a positive or negative prediction. Consider two demographic groups, $G_1$ and $G_2$, with fixed ground-truth sepsis prevalence across thresholds. At each threshold $\\tau$, the algorithm yields the following group-specific confusion matrices in terms of True Positive (TP), False Positive (FP), True Negative (TN), and False Negative (FN) counts.\n\nAt threshold $\\tau_1$:\n- Group $G_1$: $TP=300$, $FP=120$, $TN=480$, $FN=100$.\n- Group $G_2$: $TP=180$, $FP=90$, $TN=810$, $FN=120$.\n\nAt threshold $\\tau_2$:\n- Group $G_1$: $TP=240$, $FP=72$, $TN=528$, $FN=160$.\n- Group $G_2$: $TP=135$, $FP=54$, $TN=846$, $FN=165$.\n\nUsing the formal definitions of selection rate (the proportion of predicted positives, $(TP+FP)/(\\text{total})$), True Positive Rate (TPR, sensitivity) $TP/P$ with $P$ as the number of actual positives, False Positive Rate (FPR) $FP/N$ with $N$ as the number of actual negatives, and Positive Predictive Value (PPV) $TP/(TP+FP)$, compute the following fairness disparity metrics at each threshold:\n- Demographic Parity difference (DP difference): the absolute difference in selection rates between $G_1$ and $G_2$.\n- Equalized Odds difference (EO difference): the larger of the two absolute differences in TPR and FPR between $G_1$ and $G_2$.\n- Predictive Parity difference (PPV difference): the absolute difference in PPV between $G_1$ and $G_2$.\n\nThen, based on your computed values, interpret which threshold contributes most to each disparity by comparing the magnitudes at $\\tau_1$ and $\\tau_2$.\n\nRound all computed differences to four significant figures. Express the final numerical results as a single row matrix in the order $(\\text{DP at }\\tau_1,\\ \\text{EO at }\\tau_1,\\ \\text{PPV at }\\tau_1,\\ \\text{DP at }\\tau_2,\\ \\text{EO at }\\tau_2,\\ \\text{PPV at }\\tau_2)$.", "solution": "The problem statement is evaluated and deemed valid. It is scientifically grounded in the established field of algorithmic fairness, mathematically well-posed, and provides a complete, consistent, and objective set of data and definitions for analysis. The core assumption of \"fixed ground-truth sepsis prevalence across thresholds\" is verifiable from the provided data. For group $G_1$, the number of actual positives is $P_1 = 300+100 = 400$ and actual negatives is $N_1 = 120+480 = 600$ at threshold $\\tau_1$. At threshold $\\tau_2$, the values are $P_1 = 240+160 = 400$ and $N_1 = 72+528 = 600$. For group $G_2$, at $\\tau_1$, $P_2 = 180+120 = 300$ and $N_2 = 90+810 = 900$. At $\\tau_2$, $P_2 = 135+165 = 300$ and $N_2 = 54+846 = 900$. The number of positives and negatives within each group is constant across thresholds, confirming the internal consistency of the problem statement. We may now proceed with the solution.\n\nThe problem requires the computation and comparison of three fairness disparity metrics for two demographic groups, $G_1$ and $G_2$, at two different classifier thresholds, $\\tau_1$ and $\\tau_2$. The metrics are the Demographic Parity difference, the Equalized Odds difference, and the Predictive Parity difference.\n\nFirst, we calculate the necessary performance statistics for each group at each threshold. Let $P$ denote the total number of actual positives ($P=TP+FN$), $N$ the total number of actual negatives ($N=TN+FP$), and $T$ the total population size ($T=P+N$).\n\n**Analysis at Threshold $\\tau_1$**\n\nFor Group $G_1$:\n- Given: $TP_{1,\\tau_1}=300$, $FP_{1,\\tau_1}=120$, $TN_{1,\\tau_1}=480$, $FN_{1,\\tau_1}=100$.\n- Total population: $T_{1,\\tau_1} = 300+120+480+100 = 1000$.\n- Actual positives: $P_1 = 300+100 = 400$.\n- Actual negatives: $N_1 = 120+480 = 600$.\n- Selection Rate ($SR$): $SR_{1,\\tau_1} = \\frac{TP_{1,\\tau_1} + FP_{1,\\tau_1}}{T_{1,\\tau_1}} = \\frac{300+120}{1000} = \\frac{420}{1000} = 0.42$.\n- True Positive Rate ($TPR$): $TPR_{1,\\tau_1} = \\frac{TP_{1,\\tau_1}}{P_1} = \\frac{300}{400} = 0.75$.\n- False Positive Rate ($FPR$): $FPR_{1,\\tau_1} = \\frac{FP_{1,\\tau_1}}{N_1} = \\frac{120}{600} = 0.20$.\n- Positive Predictive Value ($PPV$): $PPV_{1,\\tau_1} = \\frac{TP_{1,\\tau_1}}{TP_{1,\\tau_1}+FP_{1,\\tau_1}} = \\frac{300}{300+120} = \\frac{300}{420} = \\frac{5}{7}$.\n\nFor Group $G_2$:\n- Given: $TP_{2,\\tau_1}=180$, $FP_{2,\\tau_1}=90$, $TN_{2,\\tau_1}=810$, $FN_{2,\\tau_1}=120$.\n- Total population: $T_{2,\\tau_1} = 180+90+810+120 = 1200$.\n- Actual positives: $P_2 = 180+120 = 300$.\n- Actual negatives: $N_2 = 90+810 = 900$.\n- Selection Rate ($SR$): $SR_{2,\\tau_1} = \\frac{TP_{2,\\tau_1} + FP_{2,\\tau_1}}{T_{2,\\tau_1}} = \\frac{180+90}{1200} = \\frac{270}{1200} = 0.225$.\n- True Positive Rate ($TPR$): $TPR_{2,\\tau_1} = \\frac{TP_{2,\\tau_1}}{P_2} = \\frac{180}{300} = 0.60$.\n- False Positive Rate ($FPR$): $FPR_{2,\\tau_1} = \\frac{FP_{2,\\tau_1}}{N_2} = \\frac{90}{900} = 0.10$.\n- Positive Predictive Value ($PPV$): $PPV_{2,\\tau_1} = \\frac{TP_{2,\\tau_1}}{TP_{2,\\tau_1}+FP_{2,\\tau_1}} = \\frac{180}{180+90} = \\frac{180}{270} = \\frac{2}{3}$.\n\nDisparity Metrics at $\\tau_1$:\n- DP difference: $|\\Delta SR|_{\\tau_1} = |SR_{1,\\tau_1} - SR_{2,\\tau_1}| = |0.42 - 0.225| = 0.195$. Rounded to four significant figures, this is $0.1950$.\n- EO difference: $\\max(|\\Delta TPR|_{\\tau_1}, |\\Delta FPR|_{\\tau_1}) = \\max(|0.75 - 0.60|, |0.20 - 0.10|) = \\max(0.15, 0.10) = 0.15$. Rounded to four significant figures, this is $0.1500$.\n- PPV difference: $|\\Delta PPV|_{\\tau_1} = |PPV_{1,\\tau_1} - PPV_{2,\\tau_1}| = |\\frac{5}{7} - \\frac{2}{3}| = |\\frac{15-14}{21}| = \\frac{1}{21} \\approx 0.047619$. Rounded to four significant figures, this is $0.04762$.\n\n**Analysis at Threshold $\\tau_2$**\n\nFor Group $G_1$:\n- Given: $TP_{1,\\tau_2}=240$, $FP_{1,\\tau_2}=72$, $TN_{1,\\tau_2}=528$, $FN_{1,\\tau_2}=160$.\n- $P_1 = 400$, $N_1=600$, $T_{1,\\tau_2}=1000$.\n- Selection Rate ($SR$): $SR_{1,\\tau_2} = \\frac{240+72}{1000} = \\frac{312}{1000} = 0.312$.\n- True Positive Rate ($TPR$): $TPR_{1,\\tau_2} = \\frac{240}{400} = 0.60$.\n- False Positive Rate ($FPR$): $FPR_{1,\\tau_2} = \\frac{72}{600} = 0.12$.\n- Positive Predictive Value ($PPV$): $PPV_{1,\\tau_2} = \\frac{240}{240+72} = \\frac{240}{312} = \\frac{10}{13}$.\n\nFor Group $G_2$:\n- Given: $TP_{2,\\tau_2}=135$, $FP_{2,\\tau_2}=54$, $TN_{2,\\tau_2}=846$, $FN_{2,\\tau_2}=165$.\n- $P_2 = 300$, $N_2=900$, $T_{2,\\tau_2}=1200$.\n- Selection Rate ($SR$): $SR_{2,\\tau_2} = \\frac{135+54}{1200} = \\frac{189}{1200} = 0.1575$.\n- True Positive Rate ($TPR$): $TPR_{2,\\tau_2} = \\frac{135}{300} = 0.45$.\n- False Positive Rate ($FPR$): $FPR_{2,\\tau_2} = \\frac{54}{900} = 0.06$.\n- Positive Predictive Value ($PPV$): $PPV_{2,\\tau_2} = \\frac{135}{135+54} = \\frac{135}{189} = \\frac{5}{7}$.\n\nDisparity Metrics at $\\tau_2$:\n- DP difference: $|\\Delta SR|_{\\tau_2} = |SR_{1,\\tau_2} - SR_{2,\\tau_2}| = |0.312 - 0.1575| = 0.1545$. This is already at four significant figures.\n- EO difference: $\\max(|\\Delta TPR|_{\\tau_2}, |\\Delta FPR|_{\\tau_2}) = \\max(|0.60 - 0.45|, |0.12 - 0.06|) = \\max(0.15, 0.06) = 0.15$. Rounded to four significant figures, this is $0.1500$.\n- PPV difference: $|\\Delta PPV|_{\\tau_2} = |PPV_{1,\\tau_2} - PPV_{2,\\tau_2}| = |\\frac{10}{13} - \\frac{5}{7}| = |\\frac{70-65}{91}| = \\frac{5}{91} \\approx 0.054945$. Rounded to four significant figures, this is $0.05495$.\n\n**Interpretation and Comparison**\n\n- **Demographic Parity (DP) difference**: At $\\tau_1$, the DP difference is $0.1950$. At $\\tau_2$, it is $0.1545$. Since $0.1950  0.1545$, threshold $\\tau_1$ contributes most to the disparity in selection rates. This indicates that at the more lenient threshold $\\tau_1$, the overall proportion of positive predictions is more imbalanced between the groups.\n\n- **Equalized Odds (EO) difference**: At both $\\tau_1$ and $\\tau_2$, the EO difference is $0.1500$. In both cases, this maximum difference arises from the difference in True Positive Rates ($|\\Delta TPR| = 0.15$), not from the False Positive Rates. Neither threshold is demonstrably better or worse with respect to this metric; they both exhibit the same level of disparity.\n\n- **Predictive Parity (PPV) difference**: At $\\tau_1$, the PPV difference is $0.04762$. At $\\tau_2$, it is $0.05495$. Since $0.05495  0.04762$, threshold $\\tau_2$ contributes most to the disparity in the positive predictive value. This means that at the stricter threshold $\\tau_2$, there is a larger discrepancy between the groups in the probability that a patient who receives a positive prediction actually has sepsis.\n\nThe final results are compiled into a single row matrix as requested.\nThe values are:\nDP at $\\tau_1$: $0.1950$\nEO at $\\tau_1$: $0.1500$\nPPV at $\\tau_1$: $0.04762$\nDP at $\\tau_2$: $0.1545$\nEO at $\\tau_2$: $0.1500$\nPPV at $\\tau_2$: $0.05495$", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.1950  0.1500  0.04762  0.1545  0.1500  0.05495\n\\end{pmatrix}\n}\n$$", "id": "4824186"}, {"introduction": "While comparing two groups is a good start, real-world fairness audits must often account for multiple subgroups with varying sizes. This practice explores the critical difference between macro-averaging and micro-averaging when summarizing performance across several groups. You will discover how these different aggregation methods can paint surprisingly different pictures of overall system fairness, highlighting the importance of understanding how group size can influence summary statistics [@problem_id:4824189].", "problem": "A hospital system deploys a binary classifier to trigger early sepsis alerts. Performance is audited for fairness across three mutually exclusive patient groups: $A$, $B$, and $C$. The audit focuses on the Equal Opportunity Rate, defined as the True Positive Rate (TPR), where the True Positive Rate (TPR) is $TPR = \\frac{\\text{True Positive (TP)}}{\\text{True Positive (TP)} + \\text{False Negative (FN)}}$. The system logs the following confusion-matrix counts for a one-month period:\n\n- Group $A$: $TP = 160$, $FN = 40$, $FP = 90$, $TN = 510$; total size $800$ with actual positives $200$ and actual negatives $600$.\n- Group $B$: $TP = 54$, $FN = 36$, $FP = 18$, $TN = 42$; total size $150$ with actual positives $90$ and actual negatives $60$.\n- Group $C$: $TP = 18$, $FN = 12$, $FP = 2$, $TN = 18$; total size $50$ with actual positives $30$ and actual negatives $20$.\n\nConsider two standard aggregation schemes for summarizing group-wise Equal Opportunity Rates: macro-averaging and micro-averaging. Macro-averaging is defined as the arithmetic mean of the group-specific rates across groups. Micro-averaging is defined by pooling counts across groups first, then computing the rate on the pooled counts. Let $\\Delta$ denote the signed difference between the macro-averaged Equal Opportunity Rate and the micro-averaged Equal Opportunity Rate,\n$$\n\\Delta = \\text{Macro-averaged TPR} - \\text{Micro-averaged TPR}.\n$$\nCompute $\\Delta$ using only the supplied counts. In your reasoning, interpret how the relative group sizes affect the aggregation and the fairness parity constraint that seeks parity of the TPR across groups. Round your final numeric answer for $\\Delta$ to four significant figures. No units are required.", "solution": "The problem statement is subjected to validation.\n\n**Step 1: Extract Givens**\n-   Patient groups: $A$, $B$, $C$ (mutually exclusive).\n-   Fairness metric: Equal Opportunity Rate, defined as True Positive Rate (TPR).\n-   TPR definition: $TPR = \\frac{\\text{True Positive (TP)}}{\\text{True Positive (TP)} + \\text{False Negative (FN)}}$.\n-   Confusion Matrix Counts:\n    -   Group $A$: $TP_A = 160$, $FN_A = 40$, $FP_A = 90$, $TN_A = 510$.\n    -   Group $B$: $TP_B = 54$, $FN_B = 36$, $FP_B = 18$, $TN_B = 42$.\n    -   Group $C$: $TP_C = 18$, $FN_C = 12$, $FP_C = 2$, $TN_C = 18$.\n-   Aggregation Definitions:\n    -   Macro-averaging: Arithmetic mean of group-specific rates.\n    -   Micro-averaging: Compute rate on pooled counts.\n-   Quantity to compute: $\\Delta = \\text{Macro-averaged TPR} - \\text{Micro-averaged TPR}$.\n-   Final instruction: Round the numerical answer for $\\Delta$ to four significant figures.\n\n**Step 2: Validate Using Extracted Givens**\nThe problem is scientifically grounded, employing standard, well-defined metrics from the field of machine learning fairness and model evaluation (TPR, macro/micro-averaging). The provided data is complete and internally consistent; for each group, the sum of TP, FN, FP, and TN equals the stated total size, and the sum of TP and FN equals the stated number of actual positives. The problem is well-posed, with all necessary information and clear definitions leading to a unique, computable solution. The language is objective and precise.\n\n**Step 3: Verdict and Action**\nThe problem is valid. The solution process will now proceed.\n\nThe core task is to compute the macro-averaged and micro-averaged True Positive Rates (TPR) and find their difference, $\\Delta$.\n\nFirst, we calculate the TPR for each group individually. The TPR for a group $i$ is given by the formula:\n$$\nTPR_i = \\frac{TP_i}{TP_i + FN_i}\n$$\nwhere $TP_i$ is the number of true positives and $FN_i$ is the number of false negatives for group $i$. The denominator, $TP_i + FN_i$, represents the total number of actual positive cases in group $i$.\n\nFor Group $A$:\n$$\nTPR_A = \\frac{TP_A}{TP_A + FN_A} = \\frac{160}{160 + 40} = \\frac{160}{200} = 0.8\n$$\n\nFor Group $B$:\n$$\nTPR_B = \\frac{TP_B}{TP_B + FN_B} = \\frac{54}{54 + 36} = \\frac{54}{90} = 0.6\n$$\n\nFor Group $C$:\n$$\nTPR_C = \\frac{TP_C}{TP_C + FN_C} = \\frac{18}{18 + 12} = \\frac{18}{30} = 0.6\n$$\n\nNext, we compute the macro-averaged TPR. Macro-averaging calculates the simple arithmetic mean of the individual group TPRs. It gives equal weight to each group's performance, regardless of the group's size.\n$$\n\\text{Macro-averaged TPR} = \\frac{TPR_A + TPR_B + TPR_C}{3} = \\frac{0.8 + 0.6 + 0.6}{3} = \\frac{2.0}{3}\n$$\n\nNow, we compute the micro-averaged TPR. Micro-averaging aggregates the counts from all groups before computing the metric. This gives equal weight to each individual observation (in this case, each positive patient case).\nWe first pool the true positives and false negatives across all groups:\n$$\nTP_{\\text{total}} = TP_A + TP_B + TP_C = 160 + 54 + 18 = 232\n$$\n$$\nFN_{\\text{total}} = FN_A + FN_B + FN_C = 40 + 36 + 12 = 88\n$$\nThe micro-averaged TPR is then calculated using these pooled counts:\n$$\n\\text{Micro-averaged TPR} = \\frac{TP_{\\text{total}}}{TP_{\\text{total}} + FN_{\\text{total}}} = \\frac{232}{232 + 88} = \\frac{232}{320}\n$$\nSimplifying the fraction:\n$$\n\\frac{232}{320} = \\frac{116}{160} = \\frac{58}{80} = \\frac{29}{40} = 0.725\n$$\n\nFinally, we compute $\\Delta$, the signed difference between the macro-averaged and micro-averaged TPRs.\n$$\n\\Delta = \\text{Macro-averaged TPR} - \\text{Micro-averaged TPR} = \\frac{2}{3} - \\frac{29}{40}\n$$\nTo subtract these fractions, we find a common denominator, which is $120$:\n$$\n\\Delta = \\frac{2 \\times 40}{3 \\times 40} - \\frac{29 \\times 3}{40 \\times 3} = \\frac{80}{120} - \\frac{87}{120} = -\\frac{7}{120}\n$$\nConverting this fraction to a decimal:\n$$\n\\Delta = -7 \\div 120 \\approx -0.058333...\n$$\nThe problem requires rounding the result to four significant figures. The first four significant figures are $5$, $8$, $3$, and $3$. The fifth significant digit is $3$, which is less than $5$, so we do not round up.\n$$\n\\Delta \\approx -0.05833\n$$\n\n**Interpretation of the Result**\nThe Equal Opportunity Rate fairness constraint requires that the TPR be equal across all groups. In this case, we observe a disparity: $TPR_A = 0.8$ while $TPR_B = TPR_C = 0.6$. The classifier performs better for Group $A$.\n\nThe difference $\\Delta$ between macro- and micro-averages is informative. Macro-averaging treats each group as a single entity, so the final score is an average of the per-group performances ($\\frac{0.8+0.6+0.6}{3} \\approx 0.667$). Micro-averaging weights the performance by the number of individuals in the \"positive\" class for each group. The number of positive cases are $200$ for Group $A$, $90$ for Group $B$, and $30$ for Group $C$. Group $A$, which has the highest TPR ($0.8$), also has the most positive cases ($200$ out of $320$ total). Consequently, the micro-average is heavily skewed toward Group $A$'s higher performance, resulting in a value ($0.725$) that is higher than the macro-average.\n\nThe fact that $\\Delta$ is negative indicates that the macro-average is less than the micro-average. This reveals that the group with the largest number of positive instances (Group $A$) is also the group for which the classifier has the highest performance. If the largest group had the worst performance, $\\Delta$ would be positive. Thus, the sign and magnitude of $\\Delta$ can serve as an indicator of how performance disparities correlate with the size of the subgroups.", "answer": "$$\n\\boxed{-0.05833}\n$$", "id": "4824189"}, {"introduction": "Identifying bias is only the first step; the next is to mitigate it. This exercise moves from diagnosis to intervention by demonstrating a common post-processing technique used to enforce fairness. Using the formal definitions of True Positive Rate and False Positive Rate, you will determine the specific decision thresholds needed to achieve Equalized Odds across two groups, and then evaluate the impact of this intervention on the model's overall accuracy [@problem_id:4824199].", "problem": "A hospital deploys a risk scoring model that outputs a continuous risk score $R \\in [0,1]$ for predicting $Y \\in \\{0,1\\}$ (with $Y=1$ indicating a true positive condition) across two sensitive groups $A \\in \\{0,1\\}$. You are tasked with post-processing the model by selecting group-specific thresholds $\\tau_{a}$ for the decision rule that predicts $\\hat{Y}=1$ if and only if $R \\ge \\tau_{a}$, to enforce equalized odds. Equalized odds requires that both the true positive rate and the false positive rate are equal across groups.\n\nYou are given the following scientifically calibrated conditional distributions of the risk scores via cumulative distribution functions (CDFs) $F_{a,y}(r) = \\Pr(R \\le r \\mid A=a, Y=y)$:\n\n- For group $A=0$:\n  - Positives $Y=1$: $F_{0,1}(r) = r$ for $r \\in [0,1]$.\n  - Negatives $Y=0$: $F_{0,0}(r) = r$ for $r \\in [0,1]$.\n\n- For group $A=1$:\n  - Positives $Y=1$: $F_{1,1}(r) = r$ for $r \\in [0,1]$.\n  - Negatives $Y=0$: $F_{1,0}(r) = 0$ for $r  0.2$, $F_{1,0}(r) = \\dfrac{r - 0.2}{0.7}$ for $r \\in [0.2, 0.9]$, and $F_{1,0}(r) = 1$ for $r \\ge 0.9$.\n\nAssume $\\Pr(A=0)=0.6$, $\\Pr(A=1)=0.4$, $\\Pr(Y=1 \\mid A=0)=0.3$, and $\\Pr(Y=1 \\mid A=1)=0.2$. Also assume that ties at exactly $R=\\tau_{a}$ have probability zero due to continuity, so they can be ignored.\n\nUsing only first-principles definitions of true positive rate and false positive rate and the provided CDFs, determine thresholds $\\tau_{0}$ and $\\tau_{1}$ that enforce equalized odds. Then compute the resulting overall accuracy $\\Pr(\\hat{Y}=Y)$ of the post-processed classifier under these thresholds.\n\nExpress your final answer as a single exact fraction (no rounding and no percent sign).", "solution": "### Step 1: Extract Givens\nThe problem provides the following data and definitions:\n- A risk score $R \\in [0,1]$.\n- A binary outcome $Y \\in \\{0,1\\}$, where $Y=1$ is a positive condition.\n- A sensitive attribute $A \\in \\{0,1\\}$.\n- A decision rule: $\\hat{Y}=1$ if and only if $R \\ge \\tau_{a}$, where $\\tau_a$ is a group-specific threshold.\n- The constraint of equalized odds: the true positive rate (TPR) and false positive rate (FPR) must be equal across groups $A=0$ and $A=1$.\n- Cumulative Distribution Functions (CDFs) $F_{a,y}(r) = \\Pr(R \\le r \\mid A=a, Y=y)$:\n  - For group $A=0$:\n    - Positives ($Y=1$): $F_{0,1}(r) = r$ for $r \\in [0,1]$.\n    - Negatives ($Y=0$): $F_{0,0}(r) = r$ for $r \\in [0,1]$.\n  - For group $A=1$:\n    - Positives ($Y=1$): $F_{1,1}(r) = r$ for $r \\in [0,1]$.\n    - Negatives ($Y=0$): $F_{1,0}(r)$ is a piecewise function:\n      $$ F_{1,0}(r) = \\begin{cases} 0  \\text{for } r  0.2 \\\\ \\frac{r - 0.2}{0.7}  \\text{for } r \\in [0.2, 0.9] \\\\ 1  \\text{for } r \\ge 0.9 \\end{cases} $$\n- Prior probabilities:\n  - $\\Pr(A=0) = 0.6$\n  - $\\Pr(A=1) = 0.4$\n  - $\\Pr(Y=1 \\mid A=0) = 0.3$\n  - $\\Pr(Y=1 \\mid A=1) = 0.2$\n- The probability of ties at the threshold is zero, $\\Pr(R=\\tau_a)=0$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is scientifically grounded, using standard concepts from machine learning fairness (risk scores, thresholds, equalized odds). The provided CDFs are mathematically well-defined, and all necessary probabilities are given. The problem is self-contained, consistent, and well-posed. It requests the determination of thresholds based on a clear criterion and the calculation of a standard performance metric (accuracy). There are no apparent violations of scientific principles, logical inconsistencies, or ambiguities. The problem is deemed valid.\n\n### Step 3: Formalize TPR and FPR\nThe True Positive Rate (TPR) for group $a$ is the probability of a correct positive prediction, given the condition is present.\n$$ TPR_a = \\Pr(\\hat{Y}=1 \\mid A=a, Y=1) = \\Pr(R \\ge \\tau_a \\mid A=a, Y=1) $$\nSince the risk score $R$ is a continuous variable, $\\Pr(R \\ge \\tau_a) = 1 - \\Pr(R  \\tau_a) = 1 - \\Pr(R \\le \\tau_a)$. Thus, we can express the TPR using the given CDFs:\n$$ TPR_a = 1 - F_{a,1}(\\tau_a) $$\nThe False Positive Rate (FPR) for group $a$ is the probability of an incorrect positive prediction, given the condition is absent.\n$$ FPR_a = \\Pr(\\hat{Y}=1 \\mid A=a, Y=0) = \\Pr(R \\ge \\tau_a \\mid A=a, Y=0) = 1 - F_{a,0}(\\tau_a) $$\n\n### Step 4: Apply the Equalized Odds Constraint\nEqualized odds requires both TPR and FPR to be equal across groups:\n1. $TPR_0 = TPR_1$\n2. $FPR_0 = FPR_1$\n\nUsing the definitions from Step 3, we form a system of equations for the thresholds $\\tau_0$ and $\\tau_1$.\nFrom $TPR_0 = TPR_1$:\n$$ 1 - F_{0,1}(\\tau_0) = 1 - F_{1,1}(\\tau_1) \\implies F_{0,1}(\\tau_0) = F_{1,1}(\\tau_1) $$\nSubstituting the given CDFs, $F_{0,1}(r) = r$ and $F_{1,1}(r) = r$:\n$$ \\tau_0 = \\tau_1 $$\nThis shows that to satisfy the TPR equality condition, the thresholds for both groups must be identical. Let's denote this common threshold by $\\tau$, so $\\tau = \\tau_0 = \\tau_1$.\n\nNow, we use the second condition, $FPR_0 = FPR_1$:\n$$ 1 - F_{0,0}(\\tau_0) = 1 - F_{1,0}(\\tau_1) \\implies F_{0,0}(\\tau_0) = F_{1,0}(\\tau_1) $$\nSubstituting the common threshold $\\tau$ and the given CDFs, $F_{0,0}(r) = r$ and the piecewise $F_{1,0}(r)$:\n$$ \\tau = F_{1,0}(\\tau) $$\nWe must solve this equation for $\\tau \\in [0,1]$ using the piecewise definition of $F_{1,0}(\\tau)$.\n\nCase 1: $\\tau  0.2$. The equation is $\\tau = 0$. This is a valid solution in this range.\n\nCase 2: $\\tau \\in [0.2, 0.9]$. The equation is $\\tau = \\frac{\\tau - 0.2}{0.7}$.\n$$ 0.7\\tau = \\tau - 0.2 $$\n$$ 0.2 = 0.3\\tau $$\n$$ \\tau = \\frac{0.2}{0.3} = \\frac{2}{3} $$\nThe value $\\tau = 2/3 \\approx 0.667$ lies within the interval $[0.2, 0.9]$, so this is a valid solution.\n\nCase 3: $\\tau \\ge 0.9$. The equation is $\\tau = 1$. This is a valid solution in this range.\n\nWe have three possible values for the common threshold $\\tau$: $0$, $2/3$, and $1$. The solutions $\\tau=0$ (predict $\\hat{Y}=1$ for all) and $\\tau=1$ (predict $\\hat{Y}=0$ for all, since $R \\in [0,1]$ is continuous) are trivial solutions where the classifier doesn't separate the data. The non-trivial solution that yields a non-constant predictor is $\\tau = 2/3$. We proceed with this solution, as is standard practice for such problems.\nThus, the selected thresholds are $\\tau_0 = 2/3$ and $\\tau_1 = 2/3$.\n\n### Step 5: Compute Overall Accuracy\nThe overall accuracy is $\\Pr(\\hat{Y}=Y)$. We can compute this using the law of total probability, summing over all sub-populations.\n$$ \\text{Accuracy} = \\Pr(\\hat{Y}=Y) = \\sum_{a \\in \\{0,1\\}} \\sum_{y \\in \\{0,1\\}} \\Pr(\\hat{Y}=Y, A=a, Y=y) $$\nThis can be expanded as:\n$$ \\text{Accuracy} = \\sum_{a \\in \\{0,1\\}} \\sum_{y \\in \\{0,1\\}} \\Pr(\\hat{Y}=Y \\mid A=a, Y=y) \\Pr(A=a, Y=y) $$\nThe terms are:\n- $\\Pr(\\hat{Y}=1 \\mid A=a, Y=1) = TPR_a$\n- $\\Pr(\\hat{Y}=0 \\mid A=a, Y=0) = TNR_a = 1-FPR_a$\n\nFirst, let's find the joint probabilities $\\Pr(A=a, Y=y) = \\Pr(Y=y \\mid A=a)\\Pr(A=a)$.\n- $\\Pr(A=0, Y=1) = \\Pr(Y=1|A=0)\\Pr(A=0) = 0.3 \\times 0.6 = 0.18 = \\frac{18}{100} = \\frac{9}{50}$\n- $\\Pr(A=0, Y=0) = (1-0.3) \\times 0.6 = 0.7 \\times 0.6 = 0.42 = \\frac{42}{100} = \\frac{21}{50}$\n- $\\Pr(A=1, Y=1) = \\Pr(Y=1|A=1)\\Pr(A=1) = 0.2 \\times 0.4 = 0.08 = \\frac{8}{100} = \\frac{2}{25}$\n- $\\Pr(A=1, Y=0) = (1-0.2) \\times 0.4 = 0.8 \\times 0.4 = 0.32 = \\frac{32}{100} = \\frac{8}{25}$\n\nNext, let's compute the TPR and TNR for each group with $\\tau = 2/3$.\nFor group $A=0$:\n- $TPR_0 = 1 - F_{0,1}(\\tau_0) = 1 - F_{0,1}(2/3) = 1 - 2/3 = 1/3$.\n- $FPR_0 = 1 - F_{0,0}(\\tau_0) = 1 - F_{0,0}(2/3) = 1 - 2/3 = 1/3$.\n- $TNR_0 = 1 - FPR_0 = 1 - 1/3 = 2/3$.\n\nFor group $A=1$:\n- $TPR_1 = 1 - F_{1,1}(\\tau_1) = 1 - F_{1,1}(2/3) = 1 - 2/3 = 1/3$.\n- $FPR_1 = 1 - F_{1,0}(\\tau_1) = 1 - F_{1,0}(2/3) = 1 - \\frac{2/3 - 0.2}{0.7} = 1 - \\frac{2/3 - 1/5}{7/10} = 1 - \\frac{(10-3)/15}{7/10} = 1 - \\frac{7/15}{7/10} = 1 - \\frac{7}{15} \\times \\frac{10}{7} = 1 - \\frac{10}{15} = 1 - 2/3 = 1/3$.\n- $TNR_1 = 1 - FPR_1 = 1 - 1/3 = 2/3$.\n\nNow, we calculate the overall accuracy:\n$$ \\text{Accuracy} = \\Pr(A=0, Y=1)TPR_0 + \\Pr(A=0, Y=0)TNR_0 + \\Pr(A=1, Y=1)TPR_1 + \\Pr(A=1, Y=0)TNR_1 $$\nSubstituting the values:\n$$ \\text{Accuracy} = \\left(\\frac{9}{50}\\right)\\left(\\frac{1}{3}\\right) + \\left(\\frac{21}{50}\\right)\\left(\\frac{2}{3}\\right) + \\left(\\frac{2}{25}\\right)\\left(\\frac{1}{3}\\right) + \\left(\\frac{8}{25}\\right)\\left(\\frac{2}{3}\\right) $$\n$$ \\text{Accuracy} = \\frac{9}{150} + \\frac{42}{150} + \\frac{2}{75} + \\frac{16}{75} $$\nTo combine the fractions, we use a common denominator of $150$:\n$$ \\text{Accuracy} = \\frac{9}{150} + \\frac{42}{150} + \\frac{2 \\times 2}{75 \\times 2} + \\frac{16 \\times 2}{75 \\times 2} $$\n$$ \\text{Accuracy} = \\frac{9}{150} + \\frac{42}{150} + \\frac{4}{150} + \\frac{32}{150} $$\n$$ \\text{Accuracy} = \\frac{9 + 42 + 4 + 32}{150} = \\frac{87}{150} $$\nFinally, we simplify the fraction by dividing the numerator and denominator by their greatest common divisor, which is $3$:\n$$ \\text{Accuracy} = \\frac{87 \\div 3}{150 \\div 3} = \\frac{29}{50} $$\nThis fraction is in its simplest form, as $29$ is a prime number.", "answer": "$$\\boxed{\\frac{29}{50}}$$", "id": "4824199"}]}
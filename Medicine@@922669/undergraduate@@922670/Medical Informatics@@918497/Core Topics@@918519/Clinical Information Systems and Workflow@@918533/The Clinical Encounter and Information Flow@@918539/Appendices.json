{"hands_on_practices": [{"introduction": "The journey of clinical information begins with its accurate and unambiguous capture. This practice delves into the crucial task of transforming a raw clinical measurement into a semantically interoperable FHIR resource, a cornerstone of modern health data exchange. By applying standards like Logical Observation Identifiers Names and Codes (LOINC) and the Uniform Code for Units of Measure (UCUM), you will learn to encode not just a number, but its complete clinical context, ensuring that data is understandable and usable across different systems and jurisdictions [@problem_id:4859159].", "problem": "You are implementing a mapping function that encodes a blood glucose measurement obtained during a clinical encounter into a semantically interoperable representation compliant with Fast Healthcare Interoperability Resources (FHIR) Observation. The foundational base for your derivation and design must consist of the following principles and definitions: the role of Logical Observation Identifiers Names and Codes (LOINC) as a standardized vocabulary for observation types, the Uniform Code for Units of Measure (UCUM) for units, and the FHIR Observation resource semantics that require the code to convey the observation concept and the valueQuantity to convey the measured value and unit. Additionally, you must use the physical definition of molar mass to convert between amount-of-substance concentration and mass concentration. Specifically, let $M$ denote the molar mass of D-Glucose, with $M = 180.15588$ grams per mole. The unit conversion between amount-of-substance concentration in millimoles per liter and mass concentration in milligrams per deciliter is derived from base unit relationships.\n\nDesign an algorithm that, given a set of inputs for each blood glucose observation collected in a clinical encounter:\n- a numeric measurement value $v$,\n- a unit string $u$ (possible values appear in the test suite below),\n- a specimen description $s$ (e.g., capillary blood, venous plasma),\n- a jurisdiction $j$ (either United States or non-United States),\n\nproduces the following outputs:\n- a canonical numeric glucose value expressed in milligrams per deciliter (mg/dL), rounded to $3$ decimal places,\n- a numeric identifier for the selected LOINC code that represents the observation concept, encoded as an integer by removing the hyphen from the LOINC identifier (for example, LOINC $2339\\text{-}0$ becomes the integer $23390$),\n- a numeric identifier for the selected FHIR profile: use $1$ for the HL7 FHIR United States Core Observation Laboratory profile when $j$ indicates the United States, and $2$ for the HL7 FHIR International Patient Summary (IPS) Observation results profile otherwise.\n\nYour algorithm must adhere to these rules grounded in the above principles:\n1. Unit normalization to UCUM:\n   - Interpret $u$ equal to any textual variant of milligrams per deciliter as UCUM mg/dL, and keep the numeric value $v$ unchanged in mg/dL.\n   - Interpret $u$ equal to milligrams per liter as UCUM mg/L and convert to mg/dL by multiplying by $0.1$ so that $v_{\\mathrm{mg/dL}} = 0.1 \\cdot v_{\\mathrm{mg/L}}$.\n   - Interpret $u$ equal to millimoles per liter as UCUM mmol/L and convert to mg/dL using the molar mass definition: $$v_{\\mathrm{mg/dL}} = \\frac{M}{10} \\cdot v_{\\mathrm{mmol/L}}$$ Here $M = 180.15588$ grams per mole, and the factor of $10$ arises from $1\\,\\mathrm{L} = 10\\,\\mathrm{dL}$ and the definition of millimoles and milligrams.\n   - Interpret $u$ equal to micromoles per liter as UCUM $\\mu$mol/L, first converting to mmol/L by dividing by $1000$, then proceed as above so that $$v_{\\mathrm{mg/dL}} = \\frac{M}{10} \\cdot \\left(\\frac{v_{\\mu\\mathrm{mol}/\\mathrm{L}}}{1000}\\right)$$\n2. LOINC code selection from the observation semantics and specimen:\n   - If $s$ denotes a serum or plasma specimen, select LOINC $2345\\text{-}7$ (Glucose [Mass/volume] in Serum or Plasma), encoded as the integer $23457$.\n   - Otherwise, if $s$ denotes a blood specimen (including capillary blood), then:\n     - If the unit is mass-based (mg/dL or mg/L), select LOINC $2339\\text{-}0$ (Glucose [Mass/volume] in Blood), encoded as the integer $23390$.\n     - If the unit is amount-of-substance-based (mmol/L or $\\mu$mol/L), select LOINC $15074\\text{-}8$ (Glucose [Moles/volume] in Blood), encoded as the integer $150748$.\n3. FHIR profile selection to ensure semantic interoperability at the jurisdiction level:\n   - If $j$ is United States, use the HL7 FHIR United States Core Observation Laboratory profile, encoded as $1$.\n   - Otherwise, use the HL7 FHIR International Patient Summary (IPS) Observation results profile, encoded as $2$.\n\nYour program must implement the above algorithm and produce results for the following test suite. Each test case is a tuple $(v, u, s, j)$:\n\n- Test case A (happy path, capillary blood, mass-based, United States): $(108, \\text{\"mg/dL\"}, \\text{\"capillary blood\"}, \\text{\"US\"})$. Expect mass-normalization with no conversion, LOINC $2339\\text{-}0$, United States profile.\n- Test case B (amount-of-substance, blood, non-United States): $(5.6, \\text{\"mmol/L\"}, \\text{\"capillary blood\"}, \\text{\"EU\"})$. Expect conversion from mmol/L to mg/dL using $M = 180.15588$, LOINC $15074\\text{-}8$, IPS profile.\n- Test case C (serum/plasma, mass-based with mg/L input, United States): $(900, \\text{\"mg/L\"}, \\text{\"venous plasma\"}, \\text{\"US\"})$. Expect conversion from mg/L to mg/dL, LOINC $2345\\text{-}7$, United States profile.\n- Test case D (amount-of-substance with micromoles per liter, blood, non-United States): $(5600, \\text{\"umol/L\"}, \\text{\"blood\"}, \\text{\"EU\"})$. Expect conversion $\\mu$mol/L to mmol/L then to mg/dL, LOINC $15074\\text{-}8$, IPS profile.\n- Test case E (mass-based with a textual variant of mg/dL, blood, United States): $(65, \\text{\"mg per dl\"}, \\text{\"blood\"}, \\text{\"US\"})$. Expect normalization to mg/dL without numeric change, LOINC $2339\\text{-}0$, United States profile.\n\nYour program should output a single line containing a list of results, one per test case, where each result is a list of three numbers in the order [canonical_value_mg_per_dL, loinc_code_integer, profile_id_integer]. The canonical value must be expressed in mg/dL and rounded to $3$ decimal places. The final line must be printed in the exact format of a Python-style list of lists with comma separation, for example: [[$a_1$, $b_1$, $c_1$],[$a_2$, $b_2$, $c_2$],...].", "solution": "The problem of mapping a clinical blood glucose measurement to a semantically interoperable Fast Healthcare Interoperability Resources (FHIR) Observation resource is valid. It is scientifically grounded in established standards of medical informatics and chemistry, well-posed with clear inputs and deterministic rules, and objective in its formulation. The solution requires designing an algorithm that orchestrates three distinct but related tasks: unit normalization, concept coding, and jurisdictional profiling. The design of this algorithm is predicated on core principles of semantic interoperability, specifically the use of Logical Observation Identifiers Names and Codes (LOINC) for observation concepts, the Uniform Code for Units of Measure (UCUM) for quantitative values, and the FHIR standard for structuring the data.\n\nThe algorithm is designed in three logical steps, reflecting the requirements of the problem statement.\n\n**Step 1: Canonical Value and Unit Normalization**\n\nThe first step is to convert the input measurement, consisting of a value $v$ and a unit string $u$, into a canonical representation. The problem specifies this canonical form as a numeric value in mass concentration units of milligrams per deciliter ($\\mathrm{mg/dL}$), rounded to $3$ decimal places. This normalization is essential for standardized data comparison and interpretation, adhering to the UCUM philosophy of a single, unambiguous representation for any given quantity.\n\nThe conversion logic depends on the input unit $u$:\n- If the input unit $u$ is a textual variant of milligrams per deciliter (e.g., `mg/dL`, `mg per dl`), no numerical conversion is needed. The value $v$ is already in the target units. The algorithm categorizes this as a mass-based unit.\n- If the input unit is milligrams per liter ($\\mathrm{mg/L}$), it is converted to $\\mathrm{mg/dL}$ using the relationship $1\\,\\mathrm{L} = 10\\,\\mathrm{dL}$. This gives the conversion formula:\n$$v_{\\mathrm{mg/dL}} = v_{\\mathrm{mg/L}} \\times \\frac{1\\,\\mathrm{L}}{10\\,\\mathrm{dL}} = 0.1 \\cdot v_{\\mathrm{mg/L}}$$\nThis is also a mass-based unit.\n- If the input unit is in terms of amount-of-substance concentration, specifically millimoles per liter ($\\mathrm{mmol/L}$), the conversion to mass concentration requires the molar mass of D-Glucose, given as $M = 180.15588$ grams per mole. The derivation is as follows:\n$$v \\left[\\frac{\\mathrm{mmol}}{\\mathrm{L}}\\right] = v \\left[\\frac{10^{-3}\\,\\mathrm{mol}}{\\mathrm{L}}\\right]$$\nMultiplying by the molar mass $M$ converts moles to grams:\n$$v \\times M \\left[\\frac{10^{-3}\\,\\mathrm{g}}{\\mathrm{L}}\\right] = v \\times M \\left[\\frac{\\mathrm{mg}}{\\mathrm{L}}\\right]$$\nFinally, converting liters to deciliters:\n$$v_{\\mathrm{mg/dL}} = \\frac{v_{\\mathrm{mmol/L}} \\times M}{10}$$\nThe algorithm correctly applies this formula: $v_{\\mathrm{mg/dL}} = \\frac{M}{10} \\cdot v_{\\mathrm{mmol/L}}$. This is categorized as an amount-of-substance-based unit.\n- If the input unit is micromoles per liter ($\\mathrm{\\mu mol/L}$), it is first converted to $\\mathrm{mmol/L}$ by dividing by $1000$, and then the same conversion as above is applied:\n$$v_{\\mathrm{mg/dL}} = \\frac{M}{10} \\cdot \\left(\\frac{v_{\\mu\\mathrm{mol}/\\mathrm{L}}}{1000}\\right)$$\nThis is also an amount-of-substance-based unit.\n\nThe computed canonical value is then rounded to $3$ decimal places. A flag indicating whether the original unit was mass-based or amount-of-substance-based is retained for the next step.\n\n**Step 2: LOINC Code Selection**\n\nThe second step is to select the appropriate LOINC code. LOINC provides a universal standard for identifying medical laboratory observations. A LOINC code precisely defines the analyte (Glucose), the property measured (e.g., Mass Concentration, Molar Concentration), and the specimen type (e.g., Blood, Serum, Plasma). The algorithm's logic for selecting a code directly implements this semantic structure.\n\n- If the specimen description $s$ indicates serum or plasma (e.g., \"venous plasma\"), the analyte system is Serum or Plasma. The required LOINC code is $2345\\text{-}7$ (\"Glucose [Mass/volume] in Serum or Plasma\"), which accounts for the fact that all values are ultimately normalized to a mass concentration. This is encoded as the integer $23457$.\n- If the specimen $s$ is blood (e.g., \"capillary blood\", \"blood\"), the choice of code depends on the property originally measured, which was determined in Step 1.\n    - If the original unit was mass-based ($\\mathrm{mg/dL}$ or $\\mathrm{mg/L}$), the property is Mass Concentration. The correct LOINC code is $2339\\text{-}0$ (\"Glucose [Mass/volume] in Blood\"), encoded as $23390$.\n    - If the original unit was amount-of-substance-based ($\\mathrm{mmol/L}$ or $\\mathrm{\\mu mol/L}$), the property is Molar Concentration. The correct LOINC code is $15074\\text{-}8$ (\"Glucose [Moles/volume] in Blood\"), encoded as $150748$. This correctly preserves the original semantic intent of the measurement, even though the value itself has been normalized to $\\mathrm{mg/dL}$. In a full FHIR Observation, the `valueQuantity` would hold the normalized value, while the `code` ($15074\\text{-}8$) would signify that the original measurement was molar.\n\n**Step 3: FHIR Profile Selection**\n\nThe final step is to select a jurisdictional profile identifier. FHIR profiles adapt the base FHIR resources for specific contexts, such as national healthcare systems, enhancing interoperability within that domain.\n- If the jurisdiction $j$ is the United States (\"US\"), the algorithm selects the HL7 FHIR United States Core Observation Laboratory profile, encoded as the integer $1$.\n- For any other jurisdiction, it selects the HL7 FHIR International Patient Summary (IPS) Observation results profile, a broader international standard. This is encoded as the integer $2$.\n\nThese three steps are integrated into a single function that processes each input observation tuple $(v, u, s, j)$ and produces the required three-element output list, ensuring compliance with the specified informatics standards and scientific principles.", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Main function to process a list of test cases and print the results.\n    \"\"\"\n    \n    # Per the problem, M is the molar mass of D-Glucose in grams per mole.\n    M = 180.15588\n\n    # The test suite provided in the problem statement.\n    test_cases = [\n        # (v, u, s, j)\n        (108, \"mg/dL\", \"capillary blood\", \"US\"),\n        (5.6, \"mmol/L\", \"capillary blood\", \"EU\"),\n        (900, \"mg/L\", \"venous plasma\", \"US\"),\n        (5600, \"umol/L\", \"blood\", \"EU\"),\n        (65, \"mg per dl\", \"blood\", \"US\"),\n    ]\n\n    results = []\n    for v, u, s, j in test_cases:\n        result = process_observation(v, u, s, j, M)\n        results.append(result)\n\n    # The final print statement must produce the exact specified format.\n    print(f\"[{','.join(map(str, results))}]\")\n\n\ndef process_observation(v, u, s, j, M):\n    \"\"\"\n    Applies the algorithm to a single blood glucose observation.\n\n    Args:\n        v (numeric): The measurement value.\n        u (str): The unit string.\n        s (str): The specimen description.\n        j (str): The jurisdiction code.\n        M (float): The molar mass of D-Glucose.\n\n    Returns:\n        list: A list containing [canonical_value_mg_per_dL, loinc_code_integer, profile_id_integer].\n    \"\"\"\n\n    # --- Rule 1: Unit normalization to UCUM and value conversion ---\n    # Normalize unit string for robust matching.\n    u_norm = u.lower().replace(\" \", \"\").replace(\"per\", \"/\")\n    \n    is_mass_based = False\n    canonical_value = 0.0\n\n    if u_norm in [\"mg/dl\"]:\n        canonical_value = float(v)\n        is_mass_based = True\n    elif u_norm == \"mg/l\":\n        # Convert mg/L to mg/dL: v_mg_per_dL = 0.1 * v_mg_per_L\n        canonical_value = 0.1 * v\n        is_mass_based = True\n    elif u_norm == \"mmol/l\":\n        # Convert mmol/L to mg/dL: v_mg_per_dL = (M / 10) * v_mmol_per_L\n        canonical_value = (M / 10.0) * v\n        is_mass_based = False\n    elif u_norm == \"umol/l\":\n        # Convert umol/L to mg/dL\n        canonical_value = (M / 10.0) * (v / 1000.0)\n        is_mass_based = False\n    \n    # Round the final canonical value to 3 decimal places.\n    canonical_value = round(canonical_value, 3)\n\n    # --- Rule 2: LOINC code selection from observation semantics ---\n    s_norm = s.lower()\n    loinc_code = 0\n\n    if \"serum\" in s_norm or \"plasma\" in s_norm:\n        # For serum or plasma, use LOINC 2345-7\n        loinc_code = 23457\n    elif \"blood\" in s_norm:\n        if is_mass_based:\n            # For blood with mass-based unit, use LOINC 2339-0\n            loinc_code = 23390\n        else: # Amount-of-substance-based\n            # For blood with mole-based unit, use LOINC 15074-8\n            loinc_code = 150748\n            \n    # --- Rule 3: FHIR profile selection based on jurisdiction ---\n    profile_id = 0\n    if j.upper() == \"US\":\n        # United States jurisdiction uses US Core profile\n        profile_id = 1\n    else:\n        # Other jurisdictions use IPS profile\n        profile_id = 2\n        \n    return [canonical_value, loinc_code, profile_id]\n\n# Execute the solver\nsolve()\n```", "id": "4859159"}, {"introduction": "Once information is captured, the central task of a clinical encounter is reasoning under uncertainty. This exercise puts you in the clinician's shoes, using Bayes' theorem to formally update your assessment of a patient's condition after receiving a diagnostic test result. Mastering this calculation is fundamental to understanding evidence-based medicine and the probabilistic nature of the diagnostic information flow [@problem_id:4859155].", "problem": "In an outpatient clinical encounter, a clinician considers ordering a binary diagnostic test for a suspected condition. The information flow in this encounter proceeds from an initial belief based on history and examination to an updated belief after observing the test result. Let the pretest probability be $0.3$. The test has sensitivity $0.8$ and specificity $0.9$. Using only the foundational definitions of sensitivity, specificity, probability, odds, and Bayes’ theorem, determine the patient’s posttest probability of disease after a positive test result. Express your final answer as a decimal between $0$ and $1$ and round to four significant figures.", "solution": "The problem is valid as it is scientifically grounded, well-posed, objective, and contains all necessary information for a unique solution using established principles of probability theory.\n\nThe task is to compute the posttest probability of a patient having a disease given a positive test result. This is a classic application of Bayes' theorem. We begin by formally defining the events and the given probabilities.\n\nLet $D$ be the event that the patient has the disease.\nLet $D^c$ be the event that the patient does not have the disease.\nLet $T^+$ be the event that the diagnostic test result is positive.\nLet $T^-$ be the event that the diagnostic test result is negative.\n\nFrom the problem statement, we are given the following information:\n1.  The pretest probability of the disease is $P(D) = 0.3$.\n2.  The sensitivity of the test is the probability of a positive result given that the patient has the disease. In our notation, this is $P(T^+ | D) = 0.8$.\n3.  The specificity of the test is the probability of a negative result given that the patient does not have the disease. In our notation, this is $P(T^- | D^c) = 0.9$.\n\nOur objective is to find the posttest probability of disease given a positive test result, which is denoted by $P(D | T^+)$.\n\nAccording to Bayes' theorem, the conditional probability $P(D | T^+)$ can be expressed as:\n$$\nP(D | T^+) = \\frac{P(T^+ | D) P(D)}{P(T^+)}\n$$\n\nThe numerator contains terms that are already provided: $P(T^+ | D) = 0.8$ and $P(D) = 0.3$. The denominator, $P(T^+)$, is the total probability of obtaining a positive test result. This can be calculated using the law of total probability, which states that the probability of an event can be found by summing its conditional probabilities over a set of mutually exclusive and exhaustive events. In this case, the set of events is $\\{D, D^c\\}$.\n$$\nP(T^+) = P(T^+ | D) P(D) + P(T^+ | D^c) P(D^c)\n$$\n\nTo compute $P(T^+)$, we need to determine the values of $P(D^c)$ and $P(T^+ | D^c)$.\n\nThe probability of not having the disease, $P(D^c)$, is the complement of having the disease, $P(D)$:\n$$\nP(D^c) = 1 - P(D) = 1 - 0.3 = 0.7\n$$\n\nThe probability $P(T^+ | D^c)$ is the probability of a positive test result given that the patient does not have the disease. This is the false positive rate. It is the complement of the specificity, $P(T^- | D^c)$:\n$$\nP(T^+ | D^c) = 1 - P(T^- | D^c) = 1 - 0.9 = 0.1\n$$\n\nNow we can calculate the total probability of a positive test, $P(T^+)$:\n$$\nP(T^+) = (P(T^+ | D) \\times P(D)) + (P(T^+ | D^c) \\times P(D^c))\n$$\nSubstituting the known values:\n$$\nP(T^+) = (0.8 \\times 0.3) + (0.1 \\times 0.7)\n$$\n$$\nP(T^+) = 0.24 + 0.07 = 0.31\n$$\n\nWith all components determined, we can now substitute them back into Bayes' theorem to find the posttest probability $P(D | T^+)$:\n$$\nP(D | T^+) = \\frac{P(T^+ | D) P(D)}{P(T^+)} = \\frac{0.8 \\times 0.3}{0.31}\n$$\n$$\nP(D | T^+) = \\frac{0.24}{0.31}\n$$\n\nTo obtain the final numerical answer, we perform the division:\n$$\nP(D | T^+) \\approx 0.774193548...\n$$\n\nThe problem requires the answer to be expressed as a decimal rounded to four significant figures.\n$$\nP(D | T^+) \\approx 0.7742\n$$\nThis is the patient’s posttest probability of disease after receiving a positive test result.", "answer": "$$\n\\boxed{0.7742}\n$$", "id": "4859155"}, {"introduction": "Effective information flow is not just about collecting and interpreting data, but also about using it to guide actions and improve outcomes. This advanced practice challenges you to design a clinical decision support (CDS) alert system by balancing diagnostic accuracy with real-world clinical utility. You will formulate an objective function that accounts for the costs of false alarms and the impact of alert fatigue, deriving an optimal strategy that maximizes net benefit in a clinical setting [@problem_id:4859214].", "problem": "A physician uses an Electronic Health Record (EHR) system with Clinical Decision Support (CDS) alerts during the clinical encounter. Each alert is triggered by a continuous risk score $X$ computed from structured data prior to ordering a medication. Let $D \\in \\{0,1\\}$ denote whether the patient truly has a condition that makes the alert clinically beneficial ($D=1$) or not ($D=0$), with prevalence $\\pi = \\mathbb{P}(D=1)$. Conditional on $D$, the risk score is modeled as Gaussian with equal variance: $X \\mid D=0 \\sim \\mathcal{N}(\\mu_{0}, \\sigma^{2})$ and $X \\mid D=1 \\sim \\mathcal{N}(\\mu_{1}, \\sigma^{2})$, where $\\mu_{1} > \\mu_{0}$ and $\\sigma > 0$ are known. The CDS raises an alert if and only if $X \\ge t$, where $t$ is a tunable threshold.\n\nDefine sensitivity $\\text{Se}(t) = \\mathbb{P}(X \\ge t \\mid D=1)$ and specificity $\\text{Sp}(t) = \\mathbb{P}(X < t \\mid D=0)$, and let the false-positive rate (FPR) be $\\text{FPR}(t) = 1 - \\text{Sp}(t)$. Model alert fatigue as a decline in clinician response probability to an alert due to high false-positive alert rates: specifically, assume the clinician responds to any alert with fixed probability $r \\in (0,1]$ that summarizes the long-run decline in responsiveness caused by historically high $\\text{FPR}$ in the environment. Per clinical encounter, assign utilities for the four possible outcomes as follows: true positive utility $u_{TP} > 0$, false positive utility $u_{FP} < 0$, false negative utility $u_{FN} < 0$, and true negative utility $u_{TN} = 0$. Assume that the benefit or harm from an alert materializes only if the clinician responds, so that responding produces $u_{TP}$ when $D=1$ and $u_{FP}$ when $D=0$. If the alert is not acted upon (either not raised or raised but not responded), and $D=1$, the encounter yields $u_{FN}$.\n\nUsing only core definitions of sensitivity, specificity, Bayesian posterior probability, and expected utility, perform the following:\n\n1. Formulate the expected net utility per encounter $J(t)$ as a function of $t$, $\\pi$, $\\text{Se}(t)$, $\\text{Sp}(t)$, $u_{TP}$, $u_{FP}$, $u_{FN}$, and $r$, capturing the trade-off between sensitivity, specificity, and clinician utility under the above assumptions.\n\n2. Derive, from first principles, the optimal decision rule that maximizes expected utility by comparing the expected utility of alerting versus not alerting at a given score realization $x$, and show that it induces a threshold on the likelihood ratio $\\Lambda(x) = \\frac{f_{X \\mid D=1}(x)}{f_{X \\mid D=0}(x)}$, where $f_{X \\mid D}$ are the Gaussian densities specified above.\n\n3. Specialize this decision rule to the Gaussian equal-variance model to obtain a closed-form expression for the optimal alert threshold $t^{*}$ in terms of $\\mu_{0}$, $\\mu_{1}$, $\\sigma$, $\\pi$, $u_{TP}$, $u_{FP}$, and $u_{FN}$. Your final answer must be a single analytic expression for $t^{*}$. No numerical approximation is required.", "solution": "The clinical-utility formulation follows from expected values over the confusion-matrix outcomes, weighted by how often they occur and by whether alert actions are realized (responded). By definition, sensitivity and specificity for threshold $t$ are $\\text{Se}(t) = \\mathbb{P}(X \\ge t \\mid D=1)$ and $\\text{Sp}(t) = \\mathbb{P}(X < t \\mid D=0)$, respectively. The false-positive rate is $\\text{FPR}(t) = 1 - \\text{Sp}(t)$. Under the stated assumptions, an alert produces utility only if the clinician responds. If an alert is raised, it is responded to with probability $r$, otherwise with probability $1-r$ it has no effect. When $D=1$, a non-acted alert leads to the same consequence as no alert, namely a false negative utility $u_{FN}$; when $D=0$, the non-acted alert is equivalent to a true negative with utility $u_{TN}=0$.\n\nPart $1$: The expected net utility per encounter $J(t)$ can be constructed by summing over disease states and alert outcomes. An alert is raised when $X \\ge t$; given $D=1$, this occurs with probability $\\text{Se}(t)$, and given $D=0$, with probability $\\text{FPR}(t) = 1 - \\text{Sp}(t)$. The total utility is the sum of the utility from alerts that are acted upon and the utility from outcomes where no action is taken. This yields:\n\n$$\nJ(t) = r \\left[ \\pi \\text{Se}(t) u_{TP} + (1-\\pi)(1-\\text{Sp}(t))u_{FP} \\right] + \\pi (1 - r \\text{Se}(t)) u_{FN}.\n$$\n\nThis objective explicitly trades off sensitivity $\\text{Se}(t)$, specificity $\\text{Sp}(t)$, and clinician utility parameters $(u_{TP},u_{FP},u_{FN})$, modulated by the alert-fatigue response factor $r$.\n\nPart $2$: To derive the optimal decision rule from first principles, consider a particular observed score $x$ and compare the expected utility of alerting versus not alerting, conditioned on $x$. Let $a_{1}$ denote the action “alert” and $a_{0}$ denote “do not alert.” Using the law of total expectation over the disease state and the response probability:\n\n- For action $a_{1}$, the alert is raised. With probability $r$, the clinician responds; with probability $1-r$, the clinician does not respond. The conditional expected utility given $x$ is\n\n$$\nU(a_{1}\\mid x) \\;=\\; r\\left[u_{TP}\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{FP}\\,\\mathbb{P}(D=0\\mid x)\\right] \\;+\\; (1-r)\\left[u_{FN}\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{TN}\\,\\mathbb{P}(D=0\\mid x)\\right].\n$$\n\nGiven $u_{TN}=0$, this simplifies to\n\n$$\nU(a_{1}\\mid x) \\;=\\; r\\left[u_{TP}\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{FP}\\,\\mathbb{P}(D=0\\mid x)\\right] \\;+\\; (1-r)\\,u_{FN}\\,\\mathbb{P}(D=1\\mid x).\n$$\n\n\n- For action $a_{0}$, no alert is raised and no response is possible. The conditional expected utility is\n\n$$\nU(a_{0}\\mid x) \\;=\\; u_{FN}\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{TN}\\,\\mathbb{P}(D=0\\mid x) \\;=\\; u_{FN}\\,\\mathbb{P}(D=1\\mid x).\n$$\n\n\nThe utility difference $\\Delta U(x) = U(a_{1}\\mid x) - U(a_{0}\\mid x)$ determines the optimal action:\n\n$$\n\\Delta U(x) \\;=\\; r\\left[u_{TP}\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{FP}\\,\\mathbb{P}(D=0\\mid x)\\right] \\;+\\; (1-r)\\,u_{FN}\\,\\mathbb{P}(D=1\\mid x) \\;-\\; u_{FN}\\,\\mathbb{P}(D=1\\mid x).\n$$\n\nSimplifying the terms involving $u_{FN}$ gives\n\n$$\n\\Delta U(x) \\;=\\; r\\left[(u_{TP}-u_{FN})\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{FP}\\,\\mathbb{P}(D=0\\mid x)\\right].\n$$\n\nBecause $r \\in (0,1]$, $r$ is strictly positive and does not affect the sign of $\\Delta U(x)$. The optimal decision therefore alerts if and only if\n\n$$\n(u_{TP}-u_{FN})\\,\\mathbb{P}(D=1\\mid x) \\;+\\; u_{FP}\\,\\mathbb{P}(D=0\\mid x) \\;\\ge\\; 0.\n$$\n\nLet $p(x) = \\mathbb{P}(D=1\\mid x)$ so that $\\mathbb{P}(D=0\\mid x) = 1 - p(x)$. Then\n\n$$\n(u_{TP}-u_{FN}-u_{FP})\\,p(x) \\;\\ge\\; -\\,u_{FP},\n$$\n\nwhich yields a posterior-probability threshold\n\n$$\np(x) \\;\\ge\\; \\tau_{p}, \\quad \\text{where} \\quad \\tau_{p} \\;=\\; \\frac{-\\,u_{FP}}{\\,u_{TP}-u_{FN}-u_{FP}\\,}.\n$$\n\nUsing Bayes’ rule, the posterior probability in terms of the likelihood ratio $\\Lambda(x) = \\frac{f_{X\\mid D=1}(x)}{f_{X\\mid D=0}(x)}$ and the prior $\\pi$ is\n\n$$\np(x) \\;=\\; \\frac{\\pi\\,\\Lambda(x)}{\\pi\\,\\Lambda(x) + (1-\\pi)}.\n$$\n\nSubstituting into $p(x) \\ge \\tau_{p}$ and solving for $\\Lambda(x)$ yields the likelihood-ratio threshold\n\n$$\n\\Lambda(x) \\;\\ge\\; \\tau_{\\Lambda}, \\quad \\text{where} \\quad \\tau_{\\Lambda} \\;=\\; \\frac{\\,\\tau_{p}\\,(1-\\pi)\\,}{\\,\\pi\\,(1-\\tau_{p})\\,}.\n$$\n\nAfter substituting $\\tau_{p}$ and simplifying the algebra, one obtains the compact form\n\n$$\n\\tau_{\\Lambda} \\;=\\; \\frac{(-u_{FP})(1-\\pi)}{\\pi\\,(u_{TP}-u_{FN})}.\n$$\n\n\nPart $3$: For the Gaussian equal-variance model, the class-conditional densities are\n\n$$\nf_{X\\mid D=0}(x) \\;=\\; \\frac{1}{\\sqrt{2\\pi}\\,\\sigma}\\,\\exp\\!\\left(-\\,\\frac{(x-\\mu_{0})^{2}}{2\\sigma^{2}}\\right), \\quad\nf_{X\\mid D=1}(x) \\;=\\; \\frac{1}{\\sqrt{2\\pi}\\,\\sigma}\\,\\exp\\!\\left(-\\,\\frac{(x-\\mu_{1})^{2}}{2\\sigma^{2}}\\right).\n$$\n\nThe log-likelihood ratio is\n\n$$\n\\ln \\Lambda(x) \\;=\\; \\ln \\frac{f_{X\\mid D=1}(x)}{f_{X\\mid D=0}(x)} \\;=\\; -\\,\\frac{(x-\\mu_{1})^{2} - (x-\\mu_{0})^{2}}{2\\sigma^{2}} \\;=\\; \\frac{\\mu_{1}-\\mu_{0}}{\\sigma^{2}}\\,x \\;-\\; \\frac{\\mu_{1}^{2} - \\mu_{0}^{2}}{2\\sigma^{2}}.\n$$\n\nThe optimal threshold $t^{*}$ satisfies $\\ln \\Lambda(t^{*}) = \\ln \\tau_{\\Lambda}$, hence\n\n$$\n\\frac{\\mu_{1}-\\mu_{0}}{\\sigma^{2}}\\,t^{*} \\;-\\; \\frac{\\mu_{1}^{2} - \\mu_{0}^{2}}{2\\sigma^{2}} \\;=\\; \\ln \\tau_{\\Lambda}.\n$$\n\nSolving for $t^{*}$ gives\n\n$$\nt^{*} \\;=\\; \\frac{\\sigma^{2}}{\\mu_{1}-\\mu_{0}}\\,\\ln \\tau_{\\Lambda} \\;+\\; \\frac{\\mu_{1}^{2} - \\mu_{0}^{2}}{2(\\mu_{1}-\\mu_{0})}.\n$$\n\nUsing $\\mu_{1}^{2} - \\mu_{0}^{2} = (\\mu_{1}-\\mu_{0})(\\mu_{1}+\\mu_{0})$, this simplifies to\n\n$$\nt^{*} \\;=\\; \\frac{\\sigma^{2}}{\\mu_{1}-\\mu_{0}}\\,\\ln \\!\\left(\\frac{(-u_{FP})(1-\\pi)}{\\pi\\,(u_{TP}-u_{FN})}\\right) \\;+\\; \\frac{\\mu_{1}+\\mu_{0}}{2}.\n$$\n\nThis closed-form $t^{*}$ trades off sensitivity and specificity via the Gaussian separation $(\\mu_{1}-\\mu_{0})/\\sigma$ and incorporates clinician utilities and prevalence through the logarithmic term. Under the stated model where the response probability $r$ is a fixed summary of alert fatigue, $r$ scales the achieved expected utility $J(t)$ but cancels out of the optimal decision boundary itself; if $r$ were modeled as a direct function of the threshold via the false-positive rate, the optimal $t^{*}$ would generally shift and would not admit the same closed-form.", "answer": "$$\\boxed{\\frac{\\sigma^{2}}{\\mu_{1}-\\mu_{0}}\\,\\ln\\!\\left(\\frac{(-u_{FP})(1-\\pi)}{\\pi\\,(u_{TP}-u_{FN})}\\right) \\;+\\; \\frac{\\mu_{1}+\\mu_{0}}{2}}$$", "id": "4859214"}]}
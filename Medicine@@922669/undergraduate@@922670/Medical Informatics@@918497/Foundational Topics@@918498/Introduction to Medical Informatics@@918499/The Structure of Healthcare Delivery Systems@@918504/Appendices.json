{"hands_on_practices": [{"introduction": "A core structural decision in healthcare delivery is where to place services to ensure efficient and equitable patient access. This hands-on coding exercise introduces the classic facility location problem, demonstrating how computational models help planners optimize a system's physical footprint. By minimizing the total travel burden for a population, you'll apply a fundamental operations research technique to a real-world strategic challenge. [@problem_id:4861988]", "problem": "You are tasked with modeling a simplified placement of community health clinics within a healthcare delivery system to minimize patient travel burden. The planning region has $5$ demand nodes (neighborhoods) and a small set of candidate clinic sites. Each demand node $i$ has an associated daily demand $w_i$ in persons per day, and the travel distance from demand node $i$ to candidate site $j$ is $d_{ij}$ measured in kilometers. The goal is to open exactly $p=2$ facilities and assign each demand node to its nearest open facility so that the total weighted travel distance is minimized.\n\nFundamental base used in this problem:\n- Define the total travel disutility for demand node $i$ served by facility $j$ as proportional to the travel distance $d_{ij}$ in kilometers.\n- Define the daily total travel burden as the sum over demand nodes of demand-weighted distances, that is, for an open set of facilities $P \\subseteq \\{0,1,\\dots,M-1\\}$ with $|P|=p$, the objective is:\n$$\nZ(P) = \\sum_{i=0}^{4} w_i \\cdot \\min_{j \\in P} d_{ij}.\n$$\nThis objective follows the standard facility location principle that each demand node is assigned to its nearest open facility to minimize per-node travel distance.\n- Constraint: exactly $p=2$ facilities are opened.\n\nTie-breaking rule:\n- If multiple pairs of facilities achieve the same minimum objective $Z(P)$, select the pair with the lexicographically smallest indices when written in ascending order (for example, the pair $[0,2]$ is preferred over $[1,1]$ which is invalid, and over $[0,3]$).\n\nExpress all distances in kilometers (km). Daily demands $w_i$ are in persons per day. The objective $Z(P)$ must be expressed in person·kilometer per day and reported as a decimal rounded to three decimal places.\n\nYour program must solve the following four test cases (each independent), all with $p=2$:\n\nTest case $1$ (happy path coverage, $M=5$):\n- Demand weights:\n$$\n\\mathbf{w} = \\begin{bmatrix} 80 \\\\ 50 \\\\ 30 \\\\ 40 \\\\ 60 \\end{bmatrix} \\text{ persons/day}.\n$$\n- Distance matrix (rows are demand nodes $i=0,\\dots,4$; columns are candidate sites $j=0,\\dots,4$), in kilometers:\n$$\nD = \\begin{bmatrix}\n2.0 & 5.5 & 7.0 & 3.0 & 8.0 \\\\\n6.0 & 2.0 & 3.5 & 7.5 & 4.0 \\\\\n8.5 & 6.0 & 2.0 & 5.0 & 3.0 \\\\\n3.5 & 4.5 & 6.0 & 2.0 & 7.0 \\\\\n7.5 & 3.0 & 4.0 & 6.5 & 2.5\n\\end{bmatrix}.\n$$\n\nTest case $2$ (boundary case: zero demand and equal distances present, $M=4$):\n- Demand weights:\n$$\n\\mathbf{w} = \\begin{bmatrix} 80 \\\\ 0 \\\\ 30 \\\\ 40 \\\\ 60 \\end{bmatrix} \\text{ persons/day}.\n$$\n- Distance matrix in kilometers:\n$$\nD = \\begin{bmatrix}\n4.0 & 5.0 & 2.5 & 7.5 \\\\\n3.0 & 3.0 & 3.0 & 3.0 \\\\\n6.0 & 1.5 & 5.5 & 4.0 \\\\\n2.0 & 2.0 & 2.0 & 6.0 \\\\\n7.0 & 3.5 & 2.0 & 2.0\n\\end{bmatrix}.\n$$\n\nTest case $3$ (edge case: highly skewed demand emphasizing a single node, $M=5$):\n- Demand weights:\n$$\n\\mathbf{w} = \\begin{bmatrix} 300 \\\\ 50 \\\\ 10 \\\\ 10 \\\\ 10 \\end{bmatrix} \\text{ persons/day}.\n$$\n- Distance matrix in kilometers:\n$$\nD = \\begin{bmatrix}\n1.0 & 5.0 & 9.0 & 10.0 & 8.0 \\\\\n6.0 & 2.0 & 3.0 & 7.0 & 4.0 \\\\\n6.5 & 4.5 & 1.5 & 5.0 & 3.5 \\\\\n3.0 & 5.0 & 6.0 & 2.0 & 7.0 \\\\\n8.0 & 3.0 & 4.0 & 6.5 & 2.0\n\\end{bmatrix}.\n$$\n\nTest case $4$ (edge case: symmetric distances producing multiple optimal pairs, $M=3$):\n- Demand weights:\n$$\n\\mathbf{w} = \\begin{bmatrix} 20 \\\\ 20 \\\\ 20 \\\\ 20 \\\\ 20 \\end{bmatrix} \\text{ persons/day}.\n$$\n- Distance matrix in kilometers:\n$$\nD = \\begin{bmatrix}\n2.0 & 2.0 & 5.0 \\\\\n5.0 & 2.0 & 2.0 \\\\\n2.0 & 5.0 & 2.0 \\\\\n3.0 & 3.0 & 3.0 \\\\\n4.0 & 4.0 & 4.0\n\\end{bmatrix}.\n$$\n\nYour program must:\n- Enumerate all $\\binom{M}{2}$ pairs of indices for each test case.\n- For each pair $P=\\{j_1,j_2\\}$, compute $Z(P)$ using the formula above.\n- Select the pair with the smallest $Z(P)$; apply the tie-breaking rule if needed.\n- Output a single line containing the aggregated results from all four test cases in the exact format:\n\"[result_case1,result_case2,result_case3,result_case4]\"\nwhere each result_case$k$ is the list \"[j1,j2,Z]\" with $j_1$ and $j_2$ being the selected facility indices (zero-based, in ascending order), and $Z$ being the total weighted travel distance in person·kilometer per day rounded to three decimal places as a decimal number.\n\nExample of the required final output structure (values are placeholders, not the correct answers):\n\"[[0,3,123.456],[1,2,234.567],[0,4,345.678],[0,1,456.789]]\".", "solution": "The user-provided problem has been analyzed and validated.\n\n### Step 1: Extract Givens\n- **Model**: Simplified Community Health Clinic Placement.\n- **Demand Nodes**: There are $N=5$ demand nodes (neighborhoods), indexed $i \\in \\{0, 1, 2, 3, 4\\}$.\n- **Candidate Sites**: There is a set of $M$ candidate clinic sites, indexed $j \\in \\{0, 1, \\dots, M-1\\}$.\n- **Facilities to Open**: Exactly $p=2$ facilities are to be opened.\n- **Demand Weights**: Each demand node $i$ has a daily demand $w_i$ (persons/day).\n- **Distance Matrix**: The travel distance from demand node $i$ to candidate site $j$ is $d_{ij}$ (kilometers).\n- **Objective Function**: Minimize the daily total travel burden, defined as $Z(P) = \\sum_{i=0}^{4} w_i \\cdot \\min_{j \\in P} d_{ij}$, where $P$ is the set of indices of the $p=2$ opened facilities. The units are person·kilometer per day.\n- **Tie-Breaking Rule**: If multiple pairs of facilities yield the same minimum objective value $Z(P)$, the pair with the lexicographically smallest indices (e.g., $[0,2]$ over $[0,3]$) is to be selected.\n- **Output Precision**: The objective value $Z(P)$ must be rounded to three decimal places.\n- **Test Cases**: Four distinct test cases are provided, each with a specified number of candidate sites $M$, a demand vector $\\mathbf{w}$, and a distance matrix $D$.\n  - Case 1: $M=5$, $\\mathbf{w} = [80, 50, 30, 40, 60]^T$, $D$ matrix of size $5 \\times 5$.\n  - Case 2: $M=4$, $\\mathbf{w} = [80, 0, 30, 40, 60]^T$, $D$ matrix of size $5 \\times 4$.\n  - Case 3: $M=5$, $\\mathbf{w} = [300, 50, 10, 10, 10]^T$, $D$ matrix of size $5 \\times 5$.\n  - Case 4: $M=3$, $\\mathbf{w} = [20, 20, 20, 20, 20]^T$, $D$ matrix of size $5 \\times 3$.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientific Grounding**: The problem is a classic p-median problem, a fundamental and well-studied model in the fields of operations research, computational geometry, and logistics. The objective function is the standard measure used to minimize transportation costs or travel burden in location analysis. The model is scientifically and mathematically sound.\n- **Well-Posedness**: The problem is well-posed. The search space consists of all possible pairs of facility locations, which is a finite set. For any finite set, a minimum value for the continuous objective function is guaranteed to exist. The explicit tie-breaking rule ensures that the final solution is unique.\n- **Objectivity**: The problem is stated in precise, objective language with formal mathematical definitions. All data and constraints are provided without ambiguity.\n- **Conclusion**: The problem does not violate any of the invalidity criteria. It is a self-contained, consistent, and solvable scientific problem.\n\n### Step 3: Verdict and Action\nThe problem is valid. A solution will be provided.\n\n### Principle-Based Design\nThe problem is to select a subset of $p=2$ facility locations from a set of $M$ candidates to minimize a total cost function. This is a combinatorial optimization problem. For each test case, the number of candidate sites $M$ is small ($M \\le 5$). This allows for a brute-force approach that exhaustively enumerates and evaluates every possible combination of $p=2$ locations. This method guarantees finding the globally optimal solution.\n\nThe total number of combinations to check for each test case is given by the binomial coefficient $\\binom{M}{2}$:\n- For Case 1 ($M=5$): $\\binom{5}{2} = 10$ pairs.\n- For Case 2 ($M=4$): $\\binom{4}{2} = 6$ pairs.\n- For Case 3 ($M=5$): $\\binom{5}{2} = 10$ pairs.\n- For Case 4 ($M=3$): $\\binom{3}{2} = 3$ pairs.\nThe computational cost of this exhaustive search is negligible.\n\nThe algorithm for solving each test case is as follows:\n1.  Initialize a variable for the minimum objective value, $Z_{min}$, to a value of positive infinity, and an empty variable for the best pair of indices, $P_{best}$.\n2.  Generate all unique pairs of facility indices $\\{j_1, j_2\\}$, where $0 \\le j_1 < j_2 < M$. Generating pairs in this manner ensures they are always in lexicographical order.\n3.  For each generated pair $P = \\{j_1, j_2\\}$:\n    a. Calculate the objective function value $Z(P)$. This is done by summing the weighted minimum distances for each of the $N=5$ demand nodes:\n    $$Z(P) = \\sum_{i=0}^{4} w_i \\cdot \\min(d_{ij_1}, d_{ij_2})$$\n    b. Compare the calculated $Z(P)$ with the current minimum, $Z_{min}$.\n    c. If $Z(P) < Z_{min}$, it signifies a new best solution has been found. Update $Z_{min} = Z(P)$ and $P_{best} = \\{j_1, j_2\\}$.\n4.  The tie-breaking rule is naturally satisfied by this procedure. Since pairs are generated in lexicographical order (e.g., $\\{0,1\\}$, then $\\{0,2\\}$, etc.), the first pair that achieves the minimum objective value will be the lexicographically smallest. By only updating when a strictly smaller value is found ($<$, not $\\le$), we ensure this first-found optimal pair is retained if other pairs later produce the same minimum value.\n5.  After all pairs have been evaluated, $P_{best}$ will contain the indices of the optimal facility pair and $Z_{min}$ will be the corresponding minimum total weighted travel distance.\n6.  The value of $Z_{min}$ is then rounded to three decimal places as required.\n\nThis procedure is applied independently to each of the four test cases provided. The calculations can be efficiently implemented using vector and matrix operations, for instance with the NumPy library. For a given pair $\\{j_1,j_2\\}$, the vector of minimum distances for all demand nodes can be computed as $\\mathbf{d_{min}} = \\min(\\mathbf{D}_{:,j_1}, \\mathbf{D}_{:,j_2})$, where $\\mathbf{D}_{:,j}$ is the $j$-th column of the distance matrix. The total cost is then the dot product $Z(P) = \\mathbf{w}^T \\mathbf{d_{min}}$.", "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nimport itertools\n\ndef solve():\n    \"\"\"\n    Solves the facility location problem for four test cases.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # Test case 1\n        {\n            \"w\": np.array([80, 50, 30, 40, 60]),\n            \"D\": np.array([\n                [2.0, 5.5, 7.0, 3.0, 8.0],\n                [6.0, 2.0, 3.5, 7.5, 4.0],\n                [8.5, 6.0, 2.0, 5.0, 3.0],\n                [3.5, 4.5, 6.0, 2.0, 7.0],\n                [7.5, 3.0, 4.0, 6.5, 2.5]\n            ]),\n            \"p\": 2\n        },\n        # Test case 2\n        {\n            \"w\": np.array([80, 0, 30, 40, 60]),\n            \"D\": np.array([\n                [4.0, 5.0, 2.5, 7.5],\n                [3.0, 3.0, 3.0, 3.0],\n                [6.0, 1.5, 5.5, 4.0],\n                [2.0, 2.0, 2.0, 6.0],\n                [7.0, 3.5, 2.0, 2.0]\n            ]),\n            \"p\": 2\n        },\n        # Test case 3\n        {\n            \"w\": np.array([300, 50, 10, 10, 10]),\n            \"D\": np.array([\n                [1.0, 5.0, 9.0, 10.0, 8.0],\n                [6.0, 2.0, 3.0, 7.0, 4.0],\n                [6.5, 4.5, 1.5, 5.0, 3.5],\n                [3.0, 5.0, 6.0, 2.0, 7.0],\n                [8.0, 3.0, 4.0, 6.5, 2.0]\n            ]),\n            \"p\": 2\n        },\n        # Test case 4\n        {\n            \"w\": np.array([20, 20, 20, 20, 20]),\n            \"D\": np.array([\n                [2.0, 2.0, 5.0],\n                [5.0, 2.0, 2.0],\n                [2.0, 5.0, 2.0],\n                [3.0, 3.0, 3.0],\n                [4.0, 4.0, 4.0]\n            ]),\n            \"p\": 2\n        }\n    ]\n\n    all_results = []\n\n    for case in test_cases:\n        w = case[\"w\"]\n        D = case[\"D\"]\n        p = case[\"p\"]\n        \n        num_candidates = D.shape[1]\n        candidate_indices = range(num_candidates)\n        \n        best_pair = None\n        min_total_distance = float('inf')\n\n        # Generate all combinations of p facilities\n        # itertools.combinations generates tuples in lexicographical order,\n        # which satisfies the tie-breaking rule.\n        for pair in itertools.combinations(candidate_indices, p):\n            j1, j2 = pair\n            \n            # Extract distance columns for the two selected facilities\n            dist_to_j1 = D[:, j1]\n            dist_to_j2 = D[:, j2]\n            \n            # For each demand node, find the minimum distance to an open facility\n            min_distances = np.minimum(dist_to_j1, dist_to_j2)\n            \n            # Calculate the total weighted distance (objective function Z)\n            current_total_distance = np.dot(w, min_distances)\n            \n            # Check if this pair is a better solution\n            # The strict inequality handles the tie-breaking rule automatically\n            # because pairs are generated in lexicographical order.\n            if current_total_distance < min_total_distance:\n                min_total_distance = current_total_distance\n                best_pair = list(pair)\n\n        # Format the result for the current case\n        j1_res, j2_res = best_pair\n        z_res = round(min_total_distance, 3)\n        \n        # Format the string for the single result\n        result_str = f\"[{j1_res},{j2_res},{z_res:.3f}]\"\n        all_results.append(result_str)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(all_results)}]\")\n\nsolve()\n```", "id": "4861988"}, {"introduction": "Beyond physical location, the structure of a healthcare system includes its operational processes for managing patient flow. This practice problem uses queueing theory, a cornerstone of operations analysis, to model an urgent care clinic and quantify the delicate balance between staffing levels and patient wait times. By calculating key performance metrics, you will explore the inherent trade-offs between resource utilization and quality of service that define daily operations in healthcare. [@problem_id:4861979]", "problem": "An integrated delivery network’s urgent care clinic staffs $s=4$ triage stations operating in parallel under a first-come, first-served (FCFS) discipline. Patients arrive as a Poisson process with rate $\\lambda=12$ per hour, and each station’s service time is exponentially distributed with mean rate $\\mu=4$ per hour per station. Assume independence of interarrival and service times, unlimited waiting space, and a steady-state regime. This setting is a classic $M/M/s$ queue modeling a common service node in the structure of healthcare delivery systems.\n\nUsing only fundamental queueing definitions for birth–death processes and steady-state balance in $M/M/s$ systems, determine the following three quantities:\n- the per-station utilization,\n- the probability that an arriving patient must wait strictly more than zero time before service begins,\n- and the expected waiting time in queue.\n\nRound all numerical answers to four significant figures. Express the expected waiting time in queue in minutes. Provide your final answer as three numbers in the order listed above.", "solution": "The problem statement is subjected to validation prior to any solution attempt.\n\n### Step 1: Extract Givens\n- Model: $M/M/s$ queue\n- Number of parallel servers (stations): $s = 4$\n- Arrival process: Poisson with rate $\\lambda = 12$ per hour\n- Service time distribution per station: Exponential with mean rate $\\mu = 4$ per hour\n- Queue discipline: First-come, first-served (FCFS)\n- System state: Steady-state\n- Assumptions: Independence of interarrival and service times, unlimited waiting space.\n- Required quantities:\n    1. Per-station utilization\n    2. Probability that an arriving patient must wait (probability of delay $> 0$)\n    3. Expected waiting time in queue, in minutes\n- Calculation constraint: Use only fundamental queueing definitions for birth-death processes and steady-state balance.\n- Rounding: Four significant figures for all numerical answers.\n\n### Step 2: Validate Using Extracted Givens\n1.  **Scientifically Grounded:** The problem uses the $M/M/s$ queueing model, a cornerstone of queueing theory and operations research. This model is extensively used and scientifically validated for analyzing service systems, including healthcare delivery. The problem is sound.\n2.  **Well-Posed:** The problem provides all necessary parameters ($\\lambda$, $\\mu$, $s$) to determine the requested performance measures. A critical condition for the existence of a steady-state solution is that the traffic intensity must be less than $1$. The total system service rate is $s\\mu = 4 \\times 4 = 16$ per hour. The arrival rate is $\\lambda = 12$ per hour. Since $\\lambda < s\\mu$ ($12 < 16$), the system is stable, and a unique steady-state solution exists. The problem is well-posed.\n3.  **Objective:** The problem is stated in precise, objective mathematical language. Terms like \"Poisson process\" and \"exponentially distributed\" have unambiguous definitions. The problem is objective.\n\n### Step 3: Verdict and Action\nThe problem is valid. A complete solution will be provided.\n\n### Solution Derivation\nThe system is modeled as an $M/M/s$ queue, which is a continuous-time birth-death process. Let $n$ be the number of patients in the system (either in service or waiting). The state space is $\\{0, 1, 2, ...\\}$. The system parameters are the arrival rate $\\lambda = 12$ patients/hour, the service rate per station $\\mu = 4$ patients/hour, and the number of stations $s = 4$.\n\nThe birth rate (arrival) is constant for all states: $\\lambda_n = \\lambda$ for $n \\ge 0$.\nThe death rate (service completion) depends on the number of busy stations. If $n < s$ patients are in the system, then $n$ stations are busy, and the total system service rate is $\\mu_n = n\\mu$. If $n \\ge s$ patients are in the system, all $s$ stations are busy, and the total system service rate is $\\mu_n = s\\mu$.\n\nIn steady state, the rate of leaving any state $n$ must equal the rate of entering it. For a birth-death process, this simplifies to the detailed balance equations: $\\lambda_{n-1}p_{n-1} = \\mu_n p_n$ for $n \\ge 1$, where $p_n$ is the steady-state probability of being in state $n$.\n\nFrom this, we can express all $p_n$ in terms of $p_0$, the probability that the system is empty.\nFor $1 \\le n \\le s$:\n$p_n = \\frac{\\lambda_{n-1}}{\\mu_n} p_{n-1} = \\frac{\\lambda}{n\\mu} p_{n-1} = \\dots = \\frac{\\lambda^n}{n!\\mu^n} p_0 = \\frac{(\\lambda/\\mu)^n}{n!} p_0$.\nFor $n > s$:\n$p_n = \\frac{\\lambda_{n-1}}{\\mu_n} p_{n-1} = \\frac{\\lambda}{s\\mu} p_{n-1} = \\left(\\frac{\\lambda}{s\\mu}\\right)^{n-s} p_s$.\nSubstituting the expression for $p_s$:\n$p_n = \\left(\\frac{\\lambda}{s\\mu}\\right)^{n-s} \\frac{(\\lambda/\\mu)^s}{s!} p_0$.\n\nLet's define two key ratios. The offered load is $a = \\frac{\\lambda}{\\mu} = \\frac{12}{4} = 3$. This is a dimensionless quantity measured in Erlangs. The traffic intensity, which also represents the per-station utilization, is $\\rho = \\frac{\\lambda}{s\\mu} = \\frac{12}{4 \\times 4} = \\frac{12}{16} = 0.75$.\n\n**1. Per-station Utilization**\nThe per-station utilization is the fraction of time an average station is busy. This is equivalent to the traffic intensity $\\rho$.\n$$\\rho = \\frac{\\lambda}{s\\mu} = 0.75$$\nTo four significant figures, this is $0.7500$.\n\nTo find the other quantities, we must first calculate $p_0$. The probabilities must sum to unity: $\\sum_{n=0}^{\\infty} p_n = 1$.\n$$1 = p_0 + \\sum_{n=1}^{s-1} p_n + \\sum_{n=s}^{\\infty} p_n = p_0 \\left( 1 + \\sum_{n=1}^{s-1} \\frac{a^n}{n!} + \\sum_{n=s}^{\\infty} \\frac{a^n}{s!s^{n-s}} \\right)$$\nThe second sum is a geometric series:\n$\\sum_{n=s}^{\\infty} \\frac{a^n}{s!s^{n-s}} = \\frac{a^s}{s!} \\sum_{n=s}^{\\infty} (\\frac{a}{s})^{n-s} = \\frac{a^s}{s!} \\sum_{k=0}^{\\infty} \\rho^k = \\frac{a^s}{s!} \\frac{1}{1-\\rho}$.\nThus, $p_0$ is given by:\n$$p_0 = \\left[ \\sum_{n=0}^{s-1} \\frac{a^n}{n!} + \\frac{a^s}{s!(1-\\rho)} \\right]^{-1}$$\nWith $s=4$, $a=3$, and $\\rho=0.75$:\n$\\sum_{n=0}^{3} \\frac{3^n}{n!} = \\frac{3^0}{0!} + \\frac{3^1}{1!} + \\frac{3^2}{2!} + \\frac{3^3}{3!} = 1 + 3 + \\frac{9}{2} + \\frac{27}{6} = 1 + 3 + 4.5 + 4.5 = 13$.\n$\\frac{a^s}{s!(1-\\rho)} = \\frac{3^4}{4!(1-0.75)} = \\frac{81}{24(0.25)} = \\frac{81}{6} = 13.5$.\n$p_0 = [13 + 13.5]^{-1} = \\frac{1}{26.5} = \\frac{2}{53}$.\n\n**2. Probability of Waiting ($P_W$)**\nAn arriving patient must wait if and only if all $s$ servers are busy. This is the probability that the system is in a state $n \\ge s$. By the PASTA (Poisson Arrivals See Time Averages) property, this is the steady-state probability $P(N \\ge s)$.\n$$P_W = \\sum_{n=s}^{\\infty} p_n = \\sum_{n=s}^{\\infty} p_0 \\frac{a^n}{s!s^{n-s}} = p_0 \\left( \\frac{a^s}{s!(1-\\rho)} \\right)$$\nThis is the well-known Erlang C formula, $C(s, a)$. Using our intermediate calculations:\n$$P_W = p_0 \\times 13.5 = \\frac{1}{26.5} \\times 13.5 = \\frac{13.5}{26.5} = \\frac{27}{53}$$\nNumerically, $P_W \\approx 0.50943396...$. To four significant figures, this is $0.5094$.\n\n**3. Expected Waiting Time in Queue ($W_q$)**\nWe first find the expected number of patients in the queue, $L_q$.\n$$L_q = \\sum_{n=s}^{\\infty} (n-s) p_n = \\sum_{k=0}^{\\infty} k \\, p_{s+k} = \\sum_{k=0}^{\\infty} k \\left( p_0 \\frac{a^s}{s!} \\rho^k \\right)$$\n$$L_q = p_0 \\frac{a^s}{s!} \\sum_{k=0}^{\\infty} k \\rho^k$$\nThe sum is a standard result for geometric series, $\\sum_{k=0}^{\\infty} k \\rho^k = \\frac{\\rho}{(1-\\rho)^2}$.\n$$L_q = p_0 \\frac{a^s}{s!} \\frac{\\rho}{(1-\\rho)^2} = \\left( p_0 \\frac{a^s}{s!(1-\\rho)} \\right) \\frac{\\rho}{1-\\rho} = P_W \\frac{\\rho}{1-\\rho}$$\nPlugging in the values:\n$$L_q = \\frac{27}{53} \\times \\frac{0.75}{1-0.75} = \\frac{27}{53} \\times \\frac{0.75}{0.25} = \\frac{27}{53} \\times 3 = \\frac{81}{53}$$\nBy Little's Law, the expected number in the queue is the arrival rate times the expected time in queue: $L_q = \\lambda W_q$.\n$$W_q = \\frac{L_q}{\\lambda} = \\frac{81/53}{12} = \\frac{81}{53 \\times 12} = \\frac{27}{53 \\times 4} = \\frac{27}{212} \\text{ hours}$$\nThe problem requires the answer in minutes.\n$$W_q = \\frac{27}{212} \\text{ hours} \\times 60 \\frac{\\text{minutes}}{\\text{hour}} = \\frac{27 \\times 60}{212} = \\frac{27 \\times 15}{53} = \\frac{405}{53} \\text{ minutes}$$\nNumerically, $W_q \\approx 7.641509...$ minutes. To four significant figures, this is $7.642$ minutes.\n\nSummary of results rounded to four significant figures:\n- Per-station utilization: $0.7500$\n- Probability of waiting: $0.5094$\n- Expected waiting time in queue: $7.642$ minutes", "answer": "$$\\boxed{\\begin{pmatrix} 0.7500 & 0.5094 & 7.642 \\end{pmatrix}}$$", "id": "4861979"}, {"introduction": "The structure of a healthcare system is also defined by its financial and reimbursement models, which create powerful incentives that shape provider behavior. This exercise delves into the economic underpinnings of the Diagnosis-Related Group (DRG) payment system, a dominant model for hospital reimbursement. Through expected value analysis, you will model the financial incentive for 'upcoding' and calculate the regulatory penalties required to ensure the system's integrity. [@problem_id:4862009]", "problem": "In Diagnosis-Related Group (DRG)-based payment, payers reimburse hospitals based on a coded case severity that maps patients to groups with associated base rates. Suppose a hospital treats a patient with true clinical severity $s$ but reports a coded severity $\\hat{s}$. The payment function is increasing in the coded severity and is modeled as $P(\\hat{s}) = \\theta_{0} + \\theta_{1}\\hat{s}$ with $\\theta_{0} \\geq 0$ and $\\theta_{1} > 0$. Risk adjustment is imperfect in the sense that not all upcoding is detected. Assume the hospital is risk neutral and evaluates choices by expected value, i.e., for mutually exclusive states indexed by $i$ with probabilities $p_{i}$ and payoffs $x_{i}$, the expected utility is $E[U] = \\sum_{i} p_{i} x_{i}$.\n\nConsider two strategies: accurate coding with $\\hat{s} = s$ and upcoding to $\\hat{s} = s + \\Delta$ where $\\Delta > 0$ is an integer number of severity units. If the hospital upcodes, it gains incremental revenue $\\delta R = P(s + \\Delta) - P(s)$ at the time of claim. With probability $\\pi \\in (0,1)$, upcoding is detected, in which case the hospital must repay the incremental revenue $\\delta R$ and also pays a fixed penalty $F > 0$. Regardless of detection, upcoding incurs a coding effort and compliance cost $c_{U} \\geq 0$ that is not present under accurate coding. The accurate coding strategy has no penalty and no upcoding cost. Assume there are no other differences between strategies.\n\n1. Using only the definition of expected value and the given payment structure, derive a closed-form expression for the expected utility difference $\\Delta U$ between upcoding and accurate coding as a function of $\\pi$, $F$, $\\theta_{1}$, and $\\Delta$, and $c_{U}$. Simplify your expression fully.\n\n2. For parameters $\\theta_{1} = 1500$ dollars per severity unit, $\\Delta = 1$, $\\pi = 0.18$, and $c_{U} = 120$ dollars, compute the minimum penalty $F^{\\ast}$ (in dollars) that makes the hospital indifferent between upcoding and accurate coding, i.e., satisfies $\\Delta U = 0$.\n\nRound your final numerical answer for $F^{\\ast}$ to four significant figures. Express the final penalty in dollars.", "solution": "The problem requires a two-part solution: first, the derivation of a closed-form expression for the expected utility difference, $\\Delta U$, between an upcoding strategy and an accurate coding strategy; and second, the calculation of a minimum penalty, $F^{\\ast}$, that makes a risk-neutral hospital indifferent between the two strategies.\n\n### Part 1: Derivation of the Expected Utility Difference $\\Delta U$\n\nWe are asked to find the expected utility difference $\\Delta U = E[U_{\\text{upcoding}}] - E[U_{\\text{accurate}}]$. A direct way to calculate this is to find the expected value of the net change in utility resulting from the decision to upcode. The hospital is risk-neutral, so utility is equivalent to monetary payoff.\nLet's analyze the change in payoff for each of the two possible outcomes of the upcoding strategy, relative to the baseline of accurate coding.\n\n1.  **Outcome 1: Upcoding is not detected.**\n    This occurs with probability $1 - \\pi$.\n    Under accurate coding, the payment is $P(s) = \\theta_{0} + \\theta_{1}s$.\n    Under upcoding, the payment is $P(s+\\Delta) = \\theta_{0} + \\theta_{1}(s+\\Delta)$. The hospital also incurs an upcoding cost $c_{U}$.\n    The change in utility in this state is the difference in payments minus the extra cost:\n    $$ \\Delta U_{\\text{not detected}} = (P(s+\\Delta) - c_{U}) - P(s) $$\n    $$ \\Delta U_{\\text{not detected}} = P(s+\\Delta) - P(s) - c_{U} $$\n    The incremental revenue, $\\delta R$, is defined as $P(s+\\Delta) - P(s)$. Given the linear payment function, we have:\n    $$ \\delta R = (\\theta_{0} + \\theta_{1}(s+\\Delta)) - (\\theta_{0} + \\theta_{1}s) = \\theta_{1}\\Delta $$\n    So, the net change in utility if not detected is:\n    $$ \\Delta U_{\\text{not detected}} = \\theta_{1}\\Delta - c_{U} $$\n\n2.  **Outcome 2: Upcoding is detected.**\n    This occurs with probability $\\pi$.\n    In this case, the hospital receives the initial payment $P(s+\\Delta)$, but must repay the incremental revenue $\\delta R$ and also pay a penalty $F$. The upcoding cost $c_{U}$ is also incurred.\n    The final payment received is $P(s+\\Delta) - \\delta R = P(s)$.\n    The total change in utility relative to the accurate coding baseline (which yields a payment of $P(s)$ with no extra costs) is due to the penalty $F$ and the upcoding cost $c_{U}$.\n    $$ \\Delta U_{\\text{detected}} = (P(s) - F - c_{U}) - P(s) = -F - c_{U} $$\n\nThe expected utility difference, $\\Delta U$, is the probability-weighted average of the utility changes in these two mutually exclusive states:\n$$ \\Delta U = (1-\\pi) (\\Delta U_{\\text{not detected}}) + (\\pi) (\\Delta U_{\\text{detected}}) $$\n$$ \\Delta U = (1-\\pi)(\\theta_{1}\\Delta - c_{U}) + \\pi(-F - c_{U}) $$\nNow, we simplify this expression:\n$$ \\Delta U = (1-\\pi)\\theta_{1}\\Delta - (1-\\pi)c_{U} - \\pi F - \\pi c_{U} $$\n$$ \\Delta U = (1-\\pi)\\theta_{1}\\Delta - \\pi F - c_{U}((1-\\pi) + \\pi) $$\n$$ \\Delta U = (1-\\pi)\\theta_{1}\\Delta - \\pi F - c_{U} $$\nThis is the required simplified, closed-form expression for the expected utility difference as a function of $\\pi$, $F$, $\\theta_{1}$, $\\Delta$, and $c_{U}$.\n\n### Part 2: Calculation of the Indifference Penalty $F^{\\ast}$\n\nThe hospital is indifferent between the two strategies when the expected utility difference is zero, i.e., $\\Delta U = 0$. We set the expression derived in Part 1 to zero and solve for the penalty $F$, which we denote as $F^{\\ast}$.\n$$ (1-\\pi)\\theta_{1}\\Delta - \\pi F^{\\ast} - c_{U} = 0 $$\nSolving for $F^{\\ast}$:\n$$ \\pi F^{\\ast} = (1-\\pi)\\theta_{1}\\Delta - c_{U} $$\n$$ F^{\\ast} = \\frac{(1-\\pi)\\theta_{1}\\Delta - c_{U}}{\\pi} $$\nNow, we substitute the given parameter values: $\\theta_{1} = 1500$, $\\Delta = 1$, $\\pi = 0.18$, and $c_{U} = 120$. All units are in dollars or per severity unit, so the resulting $F^{\\ast}$ will be in dollars.\n$$ F^{\\ast} = \\frac{(1 - 0.18)(1500)(1) - 120}{0.18} $$\n$$ F^{\\ast} = \\frac{(0.82)(1500) - 120}{0.18} $$\nFirst, calculate the numerator:\n$$ (0.82)(1500) - 120 = 1230 - 120 = 1110 $$\nNow, perform the division:\n$$ F^{\\ast} = \\frac{1110}{0.18} = 6166.666... $$\nThe problem requires rounding the final answer to four significant figures. The first four significant digits are $6$, $1$, $6$, $6$. The fifth digit is $6$, which is $5$ or greater, so we round up the fourth digit.\n$$ F^{\\ast} \\approx 6167 $$\nThe minimum penalty that makes the hospital indifferent is $6167$ dollars.", "answer": "$$\\boxed{6167}$$", "id": "4862009"}]}
{"hands_on_practices": [{"introduction": "This practice explores the fundamental characteristics of an ultrasound beam. By modeling the transducer as a simple, continuous source, we can understand where side lobes originate and how the physical size of the aperture dictates the beam's focus and inherent artifacts. This exercise provides a baseline for understanding the best-case scenario for beam shape before considering the complexities of multi-element arrays. [@problem_id:4923149]", "problem": "An ultrasound linear probe is modeled as a one-dimensional, continuous aperture of width $D$ with uniform illumination (rectangular apodization), operating at wavelength $\\lambda$. Assume the far-field (Fraunhofer) approximation so that the angular dependence of the radiated pressure field amplitude is proportional to the spatial Fourier transform of the aperture function. The measurable intensity (power) beam pattern is proportional to the squared magnitude of this amplitude pattern. Using only these foundations and standard calculus, derive the expressions needed to determine the following for a uniformly weighted aperture and then evaluate them numerically:\n\n(a) the full -3 dB beamwidth (i.e., the full width at half maximum of the main lobe),\n\n(b) the first side lobe level, defined as the power of the first side lobe relative to the main-lobe peak, expressed in decibels.\n\nUse $D = 19.2~\\mathrm{mm}$ and $\\lambda = 0.308~\\mathrm{mm}$. Express the beamwidth in degrees and the side lobe level as a negative number in decibels. Round both numerical results to four significant figures. For any angles, report in degrees (not radians).", "solution": "The problem is evaluated as valid because it is scientifically grounded in the principles of wave physics and Fourier optics, is well-posed with sufficient information for a unique solution, and is stated in objective, unambiguous language.\n\nThe problem asks for the derivation and calculation of beam characteristics for a one-dimensional continuous aperture. The aperture has a width $D$ and is subject to uniform illumination. The far-field pressure amplitude pattern is proportional to the spatial Fourier transform of this aperture function.\n\nLet the spatial coordinate along the aperture be $x$. The aperture function $A(x)$ is a rectangular function defined as:\n$$\nA(x) = \\begin{cases} 1 & \\text{for } |x| \\le D/2 \\\\ 0 & \\text{for } |x| > D/2 \\end{cases}\n$$\nThe far-field amplitude pattern, denoted $P(\\theta)$, as a function of the angle $\\theta$ relative to the aperture normal, is proportional to the Fourier transform of $A(x)$. The spatial frequency variable in the Fourier domain is related to the angle $\\theta$ by $k_x = k \\sin(\\theta)$, where $k = 2\\pi/\\lambda$ is the wavenumber. The amplitude pattern is given by:\n$$\nP(\\theta) \\propto \\int_{-\\infty}^{\\infty} A(x) \\exp(-i k_x x) \\,dx = \\int_{-D/2}^{D/2} 1 \\cdot \\exp(-i k x \\sin(\\theta)) \\,dx\n$$\nEvaluating the integral:\n$$\n\\int_{-D/2}^{D/2} \\exp(-i k x \\sin(\\theta)) \\,dx = \\left[ \\frac{\\exp(-i k x \\sin(\\theta))}{-i k \\sin(\\theta)} \\right]_{-D/2}^{D/2}\n$$\n$$\n= \\frac{\\exp(-i k \\frac{D}{2} \\sin(\\theta)) - \\exp(i k \\frac{D}{2} \\sin(\\theta))}{-i k \\sin(\\theta)}\n$$\nUsing Euler's identity, $\\sin(\\phi) = \\frac{\\exp(i\\phi) - \\exp(-i\\phi)}{2i}$, we can simplify this expression:\n$$\n= \\frac{2 \\sin(k \\frac{D}{2} \\sin(\\theta))}{k \\sin(\\theta)}\n$$\nSubstituting $k = 2\\pi/\\lambda$:\n$$\n= \\frac{2 \\sin\\left(\\frac{2\\pi}{\\lambda} \\frac{D}{2} \\sin(\\theta)\\right)}{\\frac{2\\pi}{\\lambda} \\sin(\\theta)} = D \\frac{\\sin\\left(\\frac{\\pi D \\sin(\\theta)}{\\lambda}\\right)}{\\frac{\\pi D \\sin(\\theta)}{\\lambda}}\n$$\nLet us define a dimensionless variable $u = \\frac{\\pi D \\sin(\\theta)}{\\lambda}$. The amplitude pattern is then proportional to $\\frac{\\sin(u)}{u}$. The measurable intensity pattern, $I(\\theta)$, is proportional to the squared magnitude of the amplitude pattern:\n$$\nI(\\theta) \\propto \\left( \\frac{\\sin(u)}{u} \\right)^2\n$$\nThe peak intensity occurs at the center of the main lobe where $\\theta = 0$, which means $u=0$. At this point, $\\lim_{u\\to 0} \\left( \\frac{\\sin(u)}{u} \\right)^2 = 1^2 = 1$. Let's normalize the peak intensity to $I_{max}=1$.\n\n(a) Full $-3~\\mathrm{dB}$ beamwidth:\nThe $-3~\\mathrm{dB}$ beamwidth corresponds to the full angular width at which the intensity drops to half of its maximum value ($I = 0.5 \\cdot I_{max}$). This corresponds to $10 \\log_{10}(0.5) \\approx -3.01~\\mathrm{dB}$. We must find the angle $\\theta_{h}$ for which $I(\\theta_h) = 0.5$.\n$$\n\\left( \\frac{\\sin(u_h)}{u_h} \\right)^2 = \\frac{1}{2} \\implies \\frac{\\sin(u_h)}{u_h} = \\frac{1}{\\sqrt{2}}\n$$\nThis is a transcendental equation for $u_h$. Solving it numerically yields:\n$$\nu_h \\approx 1.39155\n$$\nThis value of $u_h$ corresponds to the half-width angle $\\theta_h$. We can find $\\theta_h$ from the definition of $u$:\n$$\nu_h = \\frac{\\pi D \\sin(\\theta_h)}{\\lambda} \\implies \\sin(\\theta_h) = \\frac{u_h \\lambda}{\\pi D}\n$$\nThe full $-3~\\mathrm{dB}$ beamwidth, $\\mathrm{BW}_{3dB}$, is $2\\theta_h$. For small angles, $\\sin(\\theta_h) \\approx \\theta_h$ (in radians). We will use the full expression $\\theta_h = \\arcsin\\left(\\frac{u_h \\lambda}{\\pi D}\\right)$.\nThe full beamwidth in degrees is:\n$$\n\\mathrm{BW}_{3dB} = 2 \\theta_h = 2 \\cdot \\frac{180}{\\pi} \\arcsin\\left(\\frac{u_h \\lambda}{\\pi D}\\right)\n$$\nUsing the given values $D = 19.2~\\mathrm{mm}$ and $\\lambda = 0.308~\\mathrm{mm}$:\n$$\n\\sin(\\theta_h) = \\frac{1.39155 \\times 0.308}{\\pi \\times 19.2} \\approx \\frac{0.4285574}{60.31858} \\approx 0.0071049\n$$\n$$\n\\theta_h = \\arcsin(0.0071049) \\approx 0.0071051~\\mathrm{radians} \\approx 0.40712^{\\circ}\n$$\nThe full beamwidth is $2\\theta_h$:\n$$\n\\mathrm{BW}_{3dB} = 2 \\times 0.40712^{\\circ} = 0.81424^{\\circ}\n$$\nRounding to four significant figures, the beamwidth is $0.8142^{\\circ}$.\n\n(b) First side lobe level:\nSide lobes are the local maxima of the intensity function $I(u) \\propto \\left(\\frac{\\sin u}{u}\\right)^2$ for $u \\ne 0$. To find these maxima, we take the derivative with respect to $u$ and set it to zero:\n$$\n\\frac{d}{du} \\left( \\frac{\\sin u}{u} \\right)^2 = 2\\left(\\frac{\\sin u}{u}\\right) \\frac{u\\cos u - \\sin u}{u^2} = 0\n$$\nThe extrema occur when $\\sin(u)=0$ (which correspond to the nulls between lobes, for $u \\ne 0$) or when $u \\cos(u) - \\sin(u) = 0$. The latter condition defines the peaks of the side lobes:\n$$\n\\tan(u) = u\n$$\nWe must find the first positive non-zero root of this transcendental equation. This root, $u_{sl1}$, corresponds to the peak of the first side lobe. Numerical solution gives:\n$$\nu_{sl1} \\approx 4.49341\n$$\nThe level of the first side lobe relative to the main lobe is the value of the intensity function at $u=u_{sl1}$:\n$$\n\\text{Relative Intensity} = \\left(\\frac{\\sin(u_{sl1})}{u_{sl1}}\\right)^2\n$$\nFrom the condition $\\tan(u_{sl1}) = u_{sl1}$, we can find a closed-form expression for $\\sin^2(u_{sl1})$. Using the identity $1+\\tan^2(\\phi) = \\sec^2(\\phi) = 1/\\cos^2(\\phi)$:\n$$\n\\cos^2(u_{sl1}) = \\frac{1}{1+\\tan^2(u_{sl1})} = \\frac{1}{1+u_{sl1}^2}\n$$\nAnd since $\\sin^2(\\phi) = 1-\\cos^2(\\phi)$:\n$$\n\\sin^2(u_{sl1}) = 1 - \\frac{1}{1+u_{sl1}^2} = \\frac{u_{sl1}^2}{1+u_{sl1}^2}\n$$\nSubstituting this into the relative intensity equation:\n$$\n\\text{Relative Intensity} = \\frac{1}{u_{sl1}^2} \\sin^2(u_{sl1}) = \\frac{1}{u_{sl1}^2} \\frac{u_{sl1}^2}{1+u_{sl1}^2} = \\frac{1}{1+u_{sl1}^2}\n$$\nNow, substitute the numerical value of $u_{sl1}$:\n$$\n\\text{Relative Intensity} = \\frac{1}{1+(4.49341)^2} \\approx \\frac{1}{1+20.1907} \\approx \\frac{1}{21.1907} \\approx 0.047190\n$$\nThe First Side Lobe Level (SLL) in decibels is given by:\n$$\nSLL = 10 \\log_{10}(\\text{Relative Intensity}) = 10 \\log_{10}\\left(\\frac{1}{1+u_{sl1}^2}\\right)\n$$\n$$\nSLL = 10 \\log_{10}(0.047190) \\approx -13.261~\\mathrm{dB}\n$$\nRounding to four significant figures, the side lobe level is $-13.26~\\mathrm{dB}$.", "answer": "$$\n\\boxed{\\begin{pmatrix} 0.8142 & -13.26 \\end{pmatrix}}\n$$", "id": "4923149"}, {"introduction": "While a continuous source is a useful model, real transducers are composed of many small, discrete elements. This practice problem investigates a critical artifact arising from this design: grating lobes. You will derive the physical relationship between element spacing, wavelength, and steering angle to determine the maximum allowable pitch to prevent these strong, misplaced signals from appearing in the image. [@problem_id:4923160]", "problem": "An ultrasound imaging system uses a one-dimensional linear array transducer to transmit steered beams in homogeneous soft tissue. Assume a constant sound speed of $c = 1540~\\mathrm{m/s}$ and a center frequency of $f = 3~\\mathrm{MHz}$. The array consists of identical isotropic point-like emitters with uniform inter-element spacing (the element pitch), denoted $d$. The system must steer beams within the azimuthal plane over all angles $|\\theta| \\le \\theta_{\\max}$, where $\\theta_{\\max} = 30^\\circ$, without producing grating lobes anywhere within the physical angular range of propagation.\n\nStarting from the plane-wave relationship between wavelength and frequency, and from the constructive interference condition for a uniform linear array with progressive phase steering, derive the condition on $d$ that prevents the appearance of grating lobes over $|\\theta| \\le \\theta_{\\max}$. Then:\n\n1. Compute the wavelength $\\lambda$ using $\\lambda = c/f$.\n2. Using your derived condition, evaluate the maximum allowable element pitch $d_{\\max}$ that avoids grating lobes for steering up to $|\\theta| \\le 30^\\circ$.\n\nExpress $\\lambda$ and $d_{\\max}$ in $\\mathrm{mm}$. Round both numerical results to four significant figures. The steering angle is measured in degrees.", "solution": "The problem statement is evaluated as valid, as it is scientifically grounded in the principles of wave physics and array signal processing, well-posed with sufficient information, and objective in its formulation.\n\nWe begin by establishing the fundamental principles governing beam formation by a phased linear array transducer. For a one-dimensional linear array with a uniform inter-element spacing of $d$, the direction of the main beam and any grating lobes is determined by the condition for constructive interference. When the beam is steered to an angle $\\theta_s$ relative to the array normal, the angular locations $\\theta$ of constructive interference maxima are given by the array equation:\n$$d (\\sin\\theta - \\sin\\theta_s) = m\\lambda$$\nwhere $\\lambda$ is the wavelength of the ultrasound wave, and $m$ is an integer ($m = 0, \\pm 1, \\pm 2, \\ldots$) representing the order of the interference maximum.\n\nThe main lobe, which is the intended steered beam, corresponds to the case where $m=0$, which yields $\\sin\\theta = \\sin\\theta_s$, and thus $\\theta = \\theta_s$.\nGrating lobes are spurious, secondary maxima corresponding to non-zero integer values of $m$. The angular position of the $m$-th order grating lobe, $\\theta_{g,m}$, can be found by rearranging the equation:\n$$\\sin\\theta_{g,m} = \\sin\\theta_s + m\\frac{\\lambda}{d}$$\nA grating lobe becomes a significant artifact if it appears in the \"visible\" or \"physical\" angular range, which corresponds to real propagating waves. This range is defined by $|\\theta_{g,m}| \\le 90^\\circ$, which is equivalent to the condition $|\\sin\\theta_{g,m}| \\le 1$. To prevent grating lobes, we must ensure that for all non-zero integers $m$, the calculated value of $\\sin\\theta_{g,m}$ falls outside this range. That is, we must enforce the condition:\n$$|\\sin\\theta_{g,m}| > 1 \\quad \\text{for all } m \\in \\{\\pm 1, \\pm 2, \\ldots\\}$$\nIf this condition holds for the first-order grating lobes ($m = \\pm 1$), it will also hold for all higher-order lobes ($|m| > 1$), since they are located even farther from the main lobe in sine-space. Therefore, we only need to consider the $m=+1$ and $m=-1$ cases.\n\nThe two conditions are:\n1. For $m=+1$: $|\\sin\\theta_s + \\frac{\\lambda}{d}| > 1$\n2. For $m=-1$: $|\\sin\\theta_s - \\frac{\\lambda}{d}| > 1$\n\nThese conditions must be satisfied for all steering angles $\\theta_s$ within the specified range $|\\theta_s| \\le \\theta_{\\max}$. We must therefore consider the \"worst-case\" scenario, which occurs when the grating lobe is shifted closest to the visible region $[-1, 1]$.\n\nLet's analyze the first condition, involving $m=+1$. The term is $\\sin\\theta_s + \\frac{\\lambda}{d}$. To ensure this is greater than $1$, we must check the case where it has its smallest value. This occurs when $\\sin\\theta_s$ is most negative, i.e., at $\\theta_s = -\\theta_{\\max}$. The condition becomes:\n$$\\sin(-\\theta_{\\max}) + \\frac{\\lambda}{d} > 1$$\n$$-\\sin\\theta_{\\max} + \\frac{\\lambda}{d} > 1$$\n\nNow let's analyze the second condition, involving $m=-1$. The term is $\\sin\\theta_s - \\frac{\\lambda}{d}$. To ensure this is less than $-1$, we must check the case where it has its largest (least negative) value. This occurs when $\\sin\\theta_s$ is most positive, i.e., at $\\theta_s = +\\theta_{\\max}$. The condition becomes:\n$$\\sin\\theta_{\\max} - \\frac{\\lambda}{d} < -1$$\n\nBoth of these inequalities must be satisfied. Let's rearrange them:\nFrom the first: $\\frac{\\lambda}{d} > 1 + \\sin\\theta_{\\max}$\nFrom the second: $1 + \\sin\\theta_{\\max} < \\frac{\\lambda}{d}$\nBoth inequalities are identical. Thus, the single, comprehensive condition to prevent grating lobes from entering the visible field for all steering angles up to $\\pm\\theta_{\\max}$ is:\n$$\\frac{\\lambda}{d} > 1 + \\sin\\theta_{\\max}$$\nThis can be expressed as a condition on the element pitch $d$:\n$$d < \\frac{\\lambda}{1 + \\sin\\theta_{\\max}}$$\nThis is the required derivation. The maximum allowable element pitch, $d_{\\max}$, is the value that makes this an equality, although in practice $d$ must be strictly less than this value. For the purpose of calculation, we take the boundary value:\n$$d_{\\max} = \\frac{\\lambda}{1 + \\sin\\theta_{\\max}}$$\n\nNow we proceed with the numerical calculations.\n\n1. Compute the wavelength $\\lambda$.\nGiven the speed of sound $c = 1540~\\mathrm{m/s}$ and the center frequency $f = 3~\\mathrm{MHz} = 3 \\times 10^6~\\mathrm{Hz}$.\n$$\\lambda = \\frac{c}{f} = \\frac{1540~\\mathrm{m/s}}{3 \\times 10^6~\\mathrm{s^{-1}}} \\approx 5.13333 \\times 10^{-4}~\\mathrm{m}$$\nTo express this in millimeters, we multiply by $10^3~\\mathrm{mm/m}$:\n$$\\lambda \\approx 5.13333 \\times 10^{-4} \\times 10^3~\\mathrm{mm} = 0.513333~\\mathrm{mm}$$\nRounding to four significant figures, we get:\n$$\\lambda \\approx 0.5133~\\mathrm{mm}$$\n\n2. Evaluate the maximum allowable element pitch $d_{\\max}$.\nThe maximum steering angle is given as $\\theta_{\\max} = 30^\\circ$. The sine of this angle is:\n$$\\sin(30^\\circ) = 0.5$$\nUsing the derived formula for $d_{\\max}$ and the unrounded value of $\\lambda$ for better accuracy:\n$$d_{\\max} = \\frac{\\lambda}{1 + \\sin(30^\\circ)} = \\frac{0.513333~\\mathrm{mm}}{1 + 0.5} = \\frac{0.513333~\\mathrm{mm}}{1.5}$$\n$$d_{\\max} \\approx 0.342222~\\mathrm{mm}$$\nRounding this result to four significant figures, we get:\n$$d_{\\max} \\approx 0.3422~\\mathrm{mm}$$\n\nThe computed values are $\\lambda \\approx 0.5133~\\mathrm{mm}$ and $d_{\\max} \\approx 0.3422~\\mathrm{mm}$.", "answer": "$$\\boxed{\\begin{pmatrix} 0.5133 & 0.3422 \\end{pmatrix}}$$", "id": "4923160"}, {"introduction": "Ultrasound imaging is a pulse-echo technique, meaning the same transducer array is often used to both transmit the sound and receive the echo. This has a profound and beneficial effect on image quality. This final exercise demonstrates how the two-way nature of imaging dramatically suppresses side lobes, leading to a much cleaner final image than the transmit beam alone would suggest. [@problem_id:4923191]", "problem": "An ultrasound imaging system uses a linear array with identical apodization on transmit and receive. Consider a point scatterer in the far field, and assume linear, small-signal propagation and scattering so that superposition holds. Let the one-way angular sensitivity (beampattern) be described by a normalized field pattern whose corresponding one-way intensity pattern has a first side lobe level of $-25$ decibels (dB) relative to the main lobe. The point spread function (PSF) in pulse-echo (two-way) imaging arises from the cascade of transmit and receive responses. For this problem, treat the stated $-25$ dB side lobe level as defined on the one-way intensity pattern.\n\nUsing only first principles of linear systems and wave superposition, and the definition of decibels for power quantities, derive the relationship between the two-way PSF side lobe level and the one-way side lobe level. Then calculate the two-way PSF first side lobe level in decibels (relative to the two-way main lobe). Finally, interpret how this change affects side lobe artifact strength in terms of an intensity ratio.\n\nExpress the final side lobe level in dB. Round your final numerical answer to three significant figures.", "solution": "The problem is evaluated as valid as it is based on the fundamental principles of linear systems and wave theory, is well-posed, and uses realistic parameters.\n\nThe solution relies on the principle of reciprocity and the linear systems model for pulse-echo imaging. Let the one-way angular field pattern (beampattern) be denoted by $B_{1W}(\\theta)$, where $\\theta$ is the angle from the beam axis. This function describes the relative field amplitude. Since the transmit and receive apodizations are identical, the transmit field pattern, $B_{Tx}(\\theta)$, and the receive field pattern, $B_{Rx}(\\theta)$, are the same:\n$$B_{Tx}(\\theta) = B_{Rx}(\\theta) = B_{1W}(\\theta)$$\nIn a pulse-echo system, the overall two-way field sensitivity is the product of the transmit and receive sensitivities. This is because the signal path involves transmitting the wave to the scatterer and then receiving the echo from it. Therefore, the two-way field pattern, $B_{2W}(\\theta)$, is:\n$$B_{2W}(\\theta) = B_{Tx}(\\theta) \\cdot B_{Rx}(\\theta) = B_{1W}(\\theta) \\cdot B_{1W}(\\theta) = [B_{1W}(\\theta)]^2$$\nThe acoustic intensity, $I$, is proportional to the square of the field amplitude. Thus, the one-way intensity pattern, $I_{1W}(\\theta)$, is proportional to $[B_{1W}(\\theta)]^2$, and the two-way intensity pattern, $I_{2W}(\\theta)$, is proportional to $[B_{2W}(\\theta)]^2$.\n$$I_{1W}(\\theta) \\propto [B_{1W}(\\theta)]^2$$\n$$I_{2W}(\\theta) \\propto [B_{2W}(\\theta)]^2 = \\left( [B_{1W}(\\theta)]^2 \\right)^2 = \\left( I_{1W}(\\theta) \\right)^2$$\nThis shows the key relationship: the two-way intensity pattern is the square of the one-way intensity pattern.\n\nThe side lobe level (SLL) in decibels (dB) is defined for intensity as $SLL_{dB} = 10 \\log_{10}(I_{SL} / I_{ML})$, where $I_{SL}$ is the side lobe peak intensity and $I_{ML}$ is the main lobe peak intensity.\n\nWe are given the one-way SLL:\n$$SLL_{1W, dB} = 10 \\log_{10}\\left(\\frac{I_{1W, SL}}{I_{1W, ML}}\\right) = -25 \\text{ dB}$$\nWe want to find the two-way SLL, $SLL_{2W, dB}$. Using the intensity relationship derived above:\n$$SLL_{2W, dB} = 10 \\log_{10}\\left(\\frac{I_{2W, SL}}{I_{2W, ML}}\\right) = 10 \\log_{10}\\left(\\frac{[I_{1W, SL}]^2}{[I_{1W, ML}]^2}\\right) = 10 \\log_{10}\\left[\\left(\\frac{I_{1W, SL}}{I_{1W, ML}}\\right)^2\\right]$$\nUsing the logarithm property $\\log(x^p) = p \\log(x)$:\n$$SLL_{2W, dB} = 2 \\times \\left[10 \\log_{10}\\left(\\frac{I_{1W, SL}}{I_{1W, ML}}\\right)\\right] = 2 \\times SLL_{1W, dB}$$\nThis derivation shows that the two-way side lobe level in dB is simply double the one-way side lobe level in dB.\n\nNow, we calculate the numerical value:\n$$SLL_{2W, dB} = 2 \\times (-25 \\text{ dB}) = -50 \\text{ dB}$$\nRounding to three significant figures, the result is $-50.0 \\text{ dB}$.\n\nFor interpretation, the one-way intensity ratio is $10^{(-25/10)} = 10^{-2.5} \\approx 0.00316$. The two-way intensity ratio is $10^{(-50/10)} = 10^{-5} = 0.00001$. The pulse-echo mechanism reduces the side lobe's relative intensity from about 0.32% to 0.001%, a dramatic improvement in image quality and reduction in artifact strength.", "answer": "$$\n\\boxed{-50.0}\n$$", "id": "4923191"}]}
{"hands_on_practices": [{"introduction": "Before any Artificial Intelligence (AI) tool can be integrated into a clinical workflow, its diagnostic accuracy must be rigorously quantified. This foundational practice introduces the confusion matrix, the bedrock for evaluating binary classifiers in medicine. By working through this problem, you will derive and calculate the essential performance metrics—including sensitivity ($Se$), specificity ($Sp$), positive predictive value ($PPV$), and negative predictive value ($NPV$)—that form the common language for discussing the reliability and utility of a diagnostic test.[@problem_id:4496240]", "problem": "A teledermatology service integrates an Artificial Intelligence (AI) melanoma classifier to triage dermoscopic images. On an independent test set, the confusion matrix counts recorded were $TP=95$ (true positives), $FP=15$ (false positives), $FN=5$ (false negatives), and $TN=85$ (true negatives). Starting only from the core definitions used in binary diagnostic evaluation in medicine—that sensitivity quantifies the proportion of actual disease correctly identified, specificity quantifies the proportion of non-disease correctly identified, positive predictive value quantifies the probability of disease given a positive test, negative predictive value quantifies the probability of non-disease given a negative test, and the $F1$-score is the harmonic mean of precision and recall—derive analytic expressions for sensitivity $Se$, specificity $Sp$, positive predictive value $PPV$, negative predictive value $NPV$, and the $F1$-score $F1$ appropriate for this test set, and evaluate them using the provided counts. Express each result as an exact fraction in simplest form. Provide your final answer as a single row matrix in the order $Se$, $Sp$, $PPV$, $NPV$, $F1$.", "solution": "The problem requires the derivation and evaluation of five standard performance metrics for a binary diagnostic test, given the counts from a confusion matrix. The provided counts are: true positives ($TP=95$), false positives ($FP=15$), false negatives ($FN=5$), and true negatives ($TN=85$). The metrics to be determined are sensitivity ($Se$), specificity ($Sp$), positive predictive value ($PPV$), negative predictive value ($NPV$), and the $F1$-score ($F1$). We will derive the analytical expression for each metric based on its definition and then evaluate it using the given data.\n\nFirst, we define composite quantities based on the fundamental counts. The total number of subjects with the disease (actual positives) is the sum of true positives and false negatives:\n$$P = TP + FN$$\nThe total number of subjects without the disease (actual negatives) is the sum of true negatives and false positives:\n$$N = TN + FP$$\nThe total number of positive test outcomes (predicted positives) is the sum of true positives and false positives:\n$$P_{pred} = TP + FP$$\nThe total number of negative test outcomes (predicted negatives) is the sum of true negatives and false negatives:\n$$N_{pred} = TN + FN$$\n\nNow we derive each metric.\n\n1.  **Sensitivity ($Se$)**: The problem defines sensitivity as the proportion of actual disease correctly identified. This is the ratio of true positives to the total number of subjects with the disease.\n    The analytical expression is:\n    $$Se = \\frac{TP}{P} = \\frac{TP}{TP + FN}$$\n    Substituting the given values:\n    $$Se = \\frac{95}{95 + 5} = \\frac{95}{100}$$\n    In simplest form, this fraction is:\n    $$Se = \\frac{19}{20}$$\n\n2.  **Specificity ($Sp$)**: The problem defines specificity as the proportion of non-disease correctly identified. This is the ratio of true negatives to the total number of subjects without the disease.\n    The analytical expression is:\n    $$Sp = \\frac{TN}{N} = \\frac{TN}{TN + FP}$$\n    Substituting the given values:\n    $$Sp = \\frac{85}{85 + 15} = \\frac{85}{100}$$\n    In simplest form, this fraction is:\n    $$Sp = \\frac{17}{20}$$\n\n3.  **Positive Predictive Value ($PPV$)**: The problem defines positive predictive value as the probability of disease given a positive test. This is the ratio of true positives to the total number of positive test outcomes.\n    The analytical expression is:\n    $$PPV = \\frac{TP}{P_{pred}} = \\frac{TP}{TP + FP}$$\n    Substituting the given values:\n    $$PPV = \\frac{95}{95 + 15} = \\frac{95}{110}$$\n    In simplest form, this fraction is:\n    $$PPV = \\frac{19}{22}$$\n\n4.  **Negative Predictive Value ($NPV$)**: The problem defines negative predictive value as the probability of non-disease given a negative test. This is the ratio of true negatives to the total number of negative test outcomes.\n    The analytical expression is:\n    $$NPV = \\frac{TN}{N_{pred}} = \\frac{TN}{TN + FN}$$\n    Substituting the given values:\n    $$NPV = \\frac{85}{85 + 5} = \\frac{85}{90}$$\n    In simplest form, this fraction is:\n    $$NPV = \\frac{17}{18}$$\n\n5.  **F1-Score ($F1$)**: The problem defines the $F1$-score as the harmonic mean of precision and recall. It is a standard convention that 'recall' is another term for sensitivity ($Se$), and 'precision' is another term for positive predictive value ($PPV$). The harmonic mean of two numbers $a$ and $b$ is $H = \\frac{2ab}{a+b}$.\n    Therefore, the $F1$-score is:\n    $$F1 = \\frac{2 \\times PPV \\times Se}{PPV + Se}$$\n    We can substitute the analytical expressions for $Se$ and $PPV$ to derive a formula in terms of the fundamental counts:\n    $$F1 = \\frac{2 \\left( \\frac{TP}{TP+FP} \\right) \\left( \\frac{TP}{TP+FN} \\right)}{\\frac{TP}{TP+FP} + \\frac{TP}{TP+FN}}$$\n    By finding a common denominator and simplifying, this expression reduces to:\n    $$F1 = \\frac{2TP}{2TP + FP + FN}$$\n    Using this expression for calculation is direct. Substituting the given values:\n    $$F1 = \\frac{2 \\times 95}{2 \\times 95 + 15 + 5} = \\frac{190}{190 + 20} = \\frac{190}{210}$$\n    In simplest form, this fraction is:\n    $$F1 = \\frac{19}{21}$$\n\nThe five evaluated metrics, expressed as exact fractions in simplest form, are: $Se = \\frac{19}{20}$, $Sp = \\frac{17}{20}$, $PPV = \\frac{19}{22}$, $NPV = \\frac{17}{18}$, and $F1 = \\frac{19}{21}$.", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{19}{20} & \\frac{17}{20} & \\frac{19}{22} & \\frac{17}{18} & \\frac{19}{21}\n\\end{pmatrix}\n}\n$$", "id": "4496240"}, {"introduction": "A model's standalone performance metrics, such as sensitivity and specificity, are only part of the story. The critical clinical question is: given a result from an AI tool, how should it change my assessment of this specific patient's risk? This exercise demonstrates how to translate a classifier's abstract performance into a clinically meaningful post-test probability using the odds form of Bayes' theorem. Mastering this calculation is key to integrating AI-driven evidence into personalized clinical decision-making.[@problem_id:4496218]", "problem": "A teledermatology triage service deploys an Artificial Intelligence (AI) classifier to analyze dermoscopic images submitted remotely for melanoma risk stratification. In this setting, consider the binary classification of melanoma versus non-melanoma for a population similar to primary care referrals. The classifier’s diagnostic performance is summarized by sensitivity and specificity, and Bayesian inference is used to update disease probability after a positive classifier output.\n\nStarting from the fundamental definitions that sensitivity $Se$ is the conditional probability $P(\\text{positive} \\mid \\text{melanoma})$ and specificity $Sp$ is the conditional probability $P(\\text{negative} \\mid \\text{no melanoma})$, and from the well-tested odds form of Bayes’ theorem that posterior odds equal prior odds multiplied by the likelihood ratio for the observed result, derive the positive likelihood ratio from $Se$ and $Sp$, and then compute the posterior odds and posterior probability of melanoma after a positive AI result.\n\nAssume sensitivity $Se=0.92$, specificity $Sp=0.88$, and pretest (prior) probability of melanoma $p=0.10$. Using only these inputs and the above foundational definitions and facts, determine:\n- the positive likelihood ratio,\n- the posterior odds given a positive AI result,\n- the posterior probability of melanoma given a positive AI result.\n\nExpress your final values exactly (no rounding). Do not include units. Answer with the three quantities in the order listed above.", "solution": "The problem asks for three quantities: the positive likelihood ratio ($LR+$), the posterior odds of melanoma given a positive test result, and the posterior probability of melanoma given a positive test result. We are given the following values:\n- Sensitivity, $Se = P(\\text{positive} \\mid \\text{melanoma}) = 0.92$\n- Specificity, $Sp = P(\\text{negative} \\mid \\text{no melanoma}) = 0.88$\n- Pretest (prior) probability of melanoma, $p = P(\\text{melanoma}) = 0.10$\n\nLet $M$ denote the event that a patient has melanoma, and $M^c$ denote the event that a patient does not have melanoma. Let $T^+$ be the event of a positive AI classifier result and $T^-$ be the event of a negative result.\nThe given information can be written as:\n- $Se = P(T^+ \\mid M) = 0.92$\n- $Sp = P(T^- \\mid M^c) = 0.88$\n- $p = P(M) = 0.10$. From this, the prior probability of no melanoma is $P(M^c) = 1 - P(M) = 1 - 0.10 = 0.90$.\n\n**1. Derivation and Calculation of the Positive Likelihood Ratio ($LR+$)**\n\nThe positive likelihood ratio, $LR+$, is defined as the ratio of the probability of a positive test result in individuals with the disease to the probability of a positive test result in individuals without the disease.\n$$LR+ = \\frac{P(T^+ \\mid M)}{P(T^+ \\mid M^c)}$$\nThe numerator is the sensitivity, $Se$, which is given as $0.92$.\n$$P(T^+ \\mid M) = Se = 0.92$$\nThe denominator, $P(T^+ \\mid M^c)$, is the probability of a false positive. We are given the specificity, $Sp = P(T^- \\mid M^c)$. Since a test result can only be positive or negative, for the non-melanoma group, the sum of these conditional probabilities must be $1$.\n$$P(T^+ \\mid M^c) + P(T^- \\mid M^c) = 1$$\nTherefore, we can find the false positive rate as:\n$$P(T^+ \\mid M^c) = 1 - P(T^- \\mid M^c) = 1 - Sp$$\nSubstituting the given value for $Sp$:\n$$P(T^+ \\mid M^c) = 1 - 0.88 = 0.12$$\nNow, we can compute the positive likelihood ratio:\n$$LR+ = \\frac{Se}{1 - Sp} = \\frac{0.92}{0.12} = \\frac{92}{12}$$\nSimplifying the fraction by dividing the numerator and denominator by their greatest common divisor, which is $4$:\n$$LR+ = \\frac{23}{3}$$\n\n**2. Calculation of the Posterior Odds**\n\nThe problem states that posterior odds are calculated by multiplying the prior odds by the likelihood ratio. First, we must calculate the prior odds of melanoma. The prior odds are the ratio of the prior probability of having the disease to the prior probability of not having the disease.\n$$\\text{Prior Odds} = \\frac{P(M)}{P(M^c)} = \\frac{p}{1-p}$$\nUsing the given prior probability $p=0.10$:\n$$\\text{Prior Odds} = \\frac{0.10}{1 - 0.10} = \\frac{0.10}{0.90} = \\frac{1}{9}$$\nNow we apply the odds form of Bayes' theorem for a positive test result:\n$$\\text{Posterior Odds} = \\text{Prior Odds} \\times LR+$$\nSubstituting the values we have calculated:\n$$\\text{Posterior Odds} = \\frac{1}{9} \\times \\frac{23}{3} = \\frac{23}{27}$$\nThis is the posterior odds of having melanoma given a positive AI result.\n\n**3. Calculation of the Posterior Probability**\n\nThe final step is to convert the posterior odds back into a probability. Let the posterior probability be $p_{post} = P(M \\mid T^+)$. The posterior odds are defined as the ratio of the posterior probability to its complement:\n$$\\text{Posterior Odds} = \\frac{P(M \\mid T^+)}{P(M^c \\mid T^+)} = \\frac{p_{post}}{1 - p_{post}}$$\nWe have found that the posterior odds are $\\frac{23}{27}$. We can set up the equation and solve for $p_{post}$:\n$$\\frac{p_{post}}{1 - p_{post}} = \\frac{23}{27}$$\n$$27 \\cdot p_{post} = 23(1 - p_{post})$$\n$$27 \\cdot p_{post} = 23 - 23 \\cdot p_{post}$$\n$$27 \\cdot p_{post} + 23 \\cdot p_{post} = 23$$\n$$50 \\cdot p_{post} = 23$$\n$$p_{post} = \\frac{23}{50}$$\nAlternatively, one can use the general formula for converting odds ($O$) to probability ($P$): $P = \\frac{O}{1+O}$.\n$$p_{post} = \\frac{\\text{Posterior Odds}}{1 + \\text{Posterior Odds}} = \\frac{23/27}{1 + 23/27} = \\frac{23/27}{(27/27) + (23/27)} = \\frac{23/27}{50/27} = \\frac{23}{50}$$\nThis is the posterior probability of melanoma given a positive AI result. As a decimal, this is $0.46$.\n\nThe three quantities requested are, in order:\n- Positive likelihood ratio: $\\frac{23}{3}$\n- Posterior odds: $\\frac{23}{27}$\n- Posterior probability: $\\frac{23}{50}$", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{23}{3} & \\frac{23}{27} & \\frac{23}{50} \\end{pmatrix}}$$", "id": "4496218"}, {"introduction": "The role of AI in dermatology extends beyond simple classification to quantitative assessment, such as measuring the area of psoriasis plaques to calculate the Psoriasis Area and Severity Index (PASI). In these cases, we must evaluate the model's ability to accurately outline a region of interest, a task known as segmentation. This practice introduces the Dice coefficient, a crucial metric for quantifying the spatial overlap between an AI's segmentation and a clinical ground truth, directly linking a technical measure of model performance to its reliability for quantitative clinical assessment.[@problem_id:4496220]", "problem": "A teledermatology service deploys an artificial intelligence (AI) system to segment psoriasis plaques from smartphone photographs to assist in estimating the Psoriasis Area and Severity Index (PASI). For a single image, the system’s binary segmentation output is compared against a dermatologist’s manual annotation. Let the confusion matrix entries be defined as follows: true positives ($TP$) are correctly segmented plaque pixels, false positives ($FP$) are non-plaque pixels segmented as plaque, and false negatives ($FN$) are plaque pixels missed by the segmentation. Suppose the system yields $TP=800$, $FP=200$, and $FN=100$.\n\nStarting from the set-based definition of overlap between two masks, derive the formula for the Dice coefficient as a function of $TP$, $FP$, and $FN$, and then compute its exact value for this case. Express the Dice coefficient exactly as a fraction. Finally, based on fundamental properties of the PASI area component and the role of segmentation overlap in area estimation, provide a brief interpretation of the clinical implications of the computed Dice value for area estimation reliability in remote care.\n\nYour final numerical answer must be the Dice coefficient, expressed exactly as a fraction with no rounding. No units are required.", "solution": "The solution proceeds in three parts as requested: derivation of the Dice coefficient formula, calculation of its value for the given data, and clinical interpretation.\n\n**1. Derivation of the Dice Coefficient Formula**\n\nThe Dice coefficient, also known as the Sørensen–Dice coefficient, is a statistic used to gauge the similarity of two samples. In the context of image segmentation, it measures the overlap between the predicted segmentation mask and the ground truth mask.\n\nLet $A$ be the set of pixels segmented as plaque by the artificial intelligence (AI) system (the prediction set), and let $B$ be the set of pixels manually annotated as plaque by the dermatologist (the ground truth set).\n\nThe Dice coefficient, $D$, is defined in terms of these sets as twice the size of their intersection divided by the sum of their sizes:\n$$D = \\frac{2 |A \\cap B|}{|A| + |B|}$$\nwhere $|S|$ denotes the cardinality (number of elements) of a set $S$.\n\nWe can express the cardinalities $|A \\cap B|$, $|A|$, and $|B|$ using the standard confusion matrix terms for binary classification at the pixel level: True Positives ($TP$), False Positives ($FP$), and False Negatives ($FN$).\n\n-   The intersection of the sets, $|A \\cap B|$, represents the number of pixels that are present in both the predicted mask and the ground truth mask. By definition, these are the pixels correctly identified as plaque, which corresponds to the number of true positives. Thus:\n    $$|A \\cap B| = TP$$\n\n-   The size of the predicted set, $|A|$, is the total number of pixels that the AI classified as plaque. This comprises the pixels correctly identified as plaque ($TP$) and the pixels incorrectly identified as plaque (non-plaque pixels classified as plaque), which are the false positives ($FP$). Thus:\n    $$|A| = TP + FP$$\n\n-   The size of the ground truth set, $|B|$, is the total number of pixels that are actually plaque. This comprises the pixels correctly identified as plaque ($TP$) and the actual plaque pixels that the AI failed to identify, which are the false negatives ($FN$). Thus:\n    $$|B| = TP + FN$$\n\nSubstituting these expressions back into the set-based definition of the Dice coefficient yields the formula in terms of $TP$, $FP$, and $FN$:\n$$D = \\frac{2 (TP)}{(TP + FP) + (TP + FN)}$$\n$$D = \\frac{2 TP}{2 TP + FP + FN}$$\nThis is the derived formula for the Dice coefficient.\n\n**2. Calculation of the Dice Coefficient**\n\nThe problem provides the following values from the AI system's performance on a single image:\n-   $TP = 800$\n-   $FP = 200$\n-   $FN = 100$\n\nWe substitute these values into the derived formula:\n$$D = \\frac{2 \\times 800}{2 \\times 800 + 200 + 100}$$\nPerforming the arithmetic:\n$$D = \\frac{1600}{1600 + 200 + 100}$$\n$$D = \\frac{1600}{1900}$$\nTo express this as an exact fraction in its simplest form, we divide the numerator and the denominator by their greatest common divisor, which is $100$:\n$$D = \\frac{16}{19}$$\n\n**3. Clinical Interpretation**\n\nThe Psoriasis Area and Severity Index (PASI) is a composite score that includes an assessment of the body surface area affected by psoriasis. In a teledermatology setting, this area is estimated from the segmented regions of plaque in photographs. The reliability of this area estimation is therefore critically dependent on the accuracy of the segmentation algorithm.\n\nThe Dice coefficient quantifies the spatial overlap between the AI's segmentation and the clinical ground truth. A value of $1$ signifies perfect overlap, while a value of $0$ signifies no overlap. The calculated Dice coefficient of $\\frac{16}{19} \\approx 0.842$ indicates a high degree of agreement between the AI and the dermatologist.\n\nThis high value suggests that the AI system is largely reliable for estimating the plaque area. However, it is not perfect. The underlying metrics reveal a specific bias: the area of the ground truth mask is $|B| = TP + FN = 800 + 100 = 900$ pixels, whereas the area of the AI's predicted mask is $|A| = TP + FP = 800 + 200 = 1000$ pixels. Since $FP > FN$, the system tends to overestimate the plaque area. This overestimation, while relatively small in the context of the high overall overlap, could lead to a slightly inflated PASI area score. For remote patient monitoring, where clinical decisions might be guided by trends in the PASI score, understanding such systemic biases is crucial for a clinician to correctly interpret the AI-assisted measurements and make informed treatment adjustments. The Dice coefficient provides a single, robust summary metric of this segmentation quality, which is fundamental to establishing trust in the AI tool's utility for remote care.", "answer": "$$\\boxed{\\frac{16}{19}}$$", "id": "4496220"}]}
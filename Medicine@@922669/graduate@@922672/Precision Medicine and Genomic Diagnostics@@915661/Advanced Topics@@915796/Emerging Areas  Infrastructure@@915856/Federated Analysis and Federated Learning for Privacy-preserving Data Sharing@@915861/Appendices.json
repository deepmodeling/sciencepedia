{"hands_on_practices": [{"introduction": "This first exercise establishes a fundamental concept in achieving differential privacy within federated learning: $L_2$ sensitivity. You will calculate the maximum possible influence a single participating institution can have on the global model update, a critical first step for calibrating the noise needed to ensure privacy [@problem_id:4339375]. This practice provides a concrete understanding of how privacy guarantees are constructed by rigorously bounding the contribution of any single party.", "problem": "A consortium of four genomics laboratories collaborates via Federated Learning (FL) to train a classifier for rare variant pathogenicity in the context of precision medicine and genomic diagnostics. Each institution trains a local model and produces a local parameter update vector $u_k \\in \\mathbb{R}^{3}$, where $k \\in \\{1,2,3,4\\}$ indexes the institutions. To respect privacy-preserving data sharing, the system applies Secure Aggregation and employs dataset-size weighting in the global aggregation. Let $n_k$ denote the number of genomes used at institution $k$, and $n = \\sum_{k=1}^{4} n_k$ the total number of genomes across all institutions. The global model update is computed as the dataset-size-weighted average of client updates, using weights $\\alpha_k = \\frac{n_k}{n}$.\n\nThe consortium tracks the sensitivity of the aggregation rule to a single outlier update under the squared Euclidean geometry induced by the $L_2$ norm, viewing sensitivity through the lens of Differential Privacy (DP). For client-level adjacency (replace the entire update of one client while others remain unchanged), the local updates are norm-clipped to ensure $\\|u_k\\|_{2} \\leq C$ for a fixed clipping radius $C > 0$ prior to aggregation.\n\nUse the following data, which arises from a realistic federated training round:\n- Client dataset sizes: $n_1 = 1200$, $n_2 = 2200$, $n_3 = 1800$, $n_4 = 800$, so that $n = 6000$.\n- Local updates: $u_1 = (0.6, -0.2, 0.1)$, $u_2 = (-0.5, 0.3, 0.0)$, $u_3 = (0.2, 0.1, -0.4)$, $u_4 = (0.0, -0.1, 0.2)$.\n- Clipping radius: $C = 3$.\n\nTasks:\n1. Compute the global update $u = \\sum_{k=1}^{4} \\alpha_k u_k$.\n2. For client-level adjacency and $L_2$ norm clipping, derive the worst-case $L_2$ sensitivity of the aggregation rule with respect to replacing client $2$'s clipped update by another clipped update that also satisfies the norm constraint $\\|u_2\\|_{2} \\leq C$.\n\nReport only the worst-case $L_2$ sensitivity for client $2$ as your final numeric answer. No rounding is required, and no units are to be used in the final reported value.", "solution": "The problem is evaluated as valid. It is scientifically grounded in the principles of Federated Learning (FL) and Differential Privacy (DP), well-posed with a unique and meaningful solution, objective, and contains all necessary information for its resolution.\n\nThe problem asks for two tasks, but requires only the result of the second task as the final answer. We will address both for a complete solution.\n\nFirst, we organize the given data.\nThe number of collaborating institutions is $4$.\nThe dataset sizes for each institution $k \\in \\{1, 2, 3, 4\\}$ are:\n$n_1 = 1200$\n$n_2 = 2200$\n$n_3 = 1800$\n$n_4 = 800$\n\nThe total number of genomes is $n = \\sum_{k=1}^{4} n_k = 1200 + 2200 + 1800 + 800 = 6000$.\n\nThe weights for the aggregation are $\\alpha_k = \\frac{n_k}{n}$.\n$\\alpha_1 = \\frac{1200}{6000} = \\frac{12}{60} = \\frac{1}{5}$\n$\\alpha_2 = \\frac{2200}{6000} = \\frac{22}{60} = \\frac{11}{30}$\n$\\alpha_3 = \\frac{1800}{6000} = \\frac{18}{60} = \\frac{3}{10}$\n$\\alpha_4 = \\frac{800}{6000} = \\frac{8}{60} = \\frac{2}{15}$\nA quick check confirms that $\\sum_{k=1}^{4} \\alpha_k = \\frac{1}{5} + \\frac{11}{30} + \\frac{3}{10} + \\frac{2}{15} = \\frac{6}{30} + \\frac{11}{30} + \\frac{9}{30} + \\frac{4}{30} = \\frac{30}{30} = 1$.\n\nThe local updates are given as:\n$u_1 = (0.6, -0.2, 0.1)$\n$u_2 = (-0.5, 0.3, 0.0)$\n$u_3 = (0.2, 0.1, -0.4)$\n$u_4 = (0.0, -0.1, 0.2)$\n\nThe updates are norm-clipped with a radius $C = 3$, meaning for each update $u_k$ used in the aggregation, it must satisfy $\\|u_k\\|_2 \\le 3$. Let's verify if the given updates satisfy this condition.\n$\\|u_1\\|_2 = \\sqrt{0.6^2 + (-0.2)^2 + 0.1^2} = \\sqrt{0.36 + 0.04 + 0.01} = \\sqrt{0.41} < 3$.\n$\\|u_2\\|_2 = \\sqrt{(-0.5)^2 + 0.3^2 + 0.0^2} = \\sqrt{0.25 + 0.09 + 0.0} = \\sqrt{0.34} < 3$.\n$\\|u_3\\|_2 = \\sqrt{0.2^2 + 0.1^2 + (-0.4)^2} = \\sqrt{0.04 + 0.01 + 0.16} = \\sqrt{0.21} < 3$.\n$\\|u_4\\|_2 = \\sqrt{0.0^2 + (-0.1)^2 + 0.2^2} = \\sqrt{0.01 + 0.04} = \\sqrt{0.05} < 3$.\nSince all local updates have an $L_2$ norm less than the clipping radius $C=3$, no clipping is applied to these specific vectors.\n\nTask 1: Compute the global update $u = \\sum_{k=1}^{4} \\alpha_k u_k$.\n$u = \\alpha_1 u_1 + \\alpha_2 u_2 + \\alpha_3 u_3 + \\alpha_4 u_4$\n$u = \\frac{1}{5} u_1 + \\frac{11}{30} u_2 + \\frac{3}{10} u_3 + \\frac{2}{15} u_4$\nTo simplify the calculation, we use a common denominator of $30$:\n$u = \\frac{1}{30} (6 u_1 + 11 u_2 + 9 u_3 + 4 u_4)$\n$6 u_1 = 6(0.6, -0.2, 0.1) = (3.6, -1.2, 0.6)$\n$11 u_2 = 11(-0.5, 0.3, 0.0) = (-5.5, 3.3, 0.0)$\n$9 u_3 = 9(0.2, 0.1, -0.4) = (1.8, 0.9, -3.6)$\n$4 u_4 = 4(0.0, -0.1, 0.2) = (0.0, -0.4, 0.8)$\nThe sum of these vectors is:\n$x$-component: $3.6 - 5.5 + 1.8 + 0.0 = -0.1$\n$y$-component: $-1.2 + 3.3 + 0.9 - 0.4 = 2.6$\n$z$-component: $0.6 + 0.0 - 3.6 + 0.8 = -2.2$\nSo, the sum vector is $(-0.1, 2.6, -2.2)$.\nThe global update is $u = \\frac{1}{30}(-0.1, 2.6, -2.2) = (-\\frac{0.1}{30}, \\frac{2.6}{30}, -\\frac{2.2}{30}) = (-\\frac{1}{300}, \\frac{26}{300}, -\\frac{22}{300}) = (-\\frac{1}{300}, \\frac{13}{150}, -\\frac{11}{150})$.\n\nTask 2: Derive the worst-case $L_2$ sensitivity of the aggregation rule with respect to replacing client $2$'s update.\nThe aggregation function is $f(u_1, u_2, u_3, u_4) = \\sum_{k=1}^{4} \\alpha_k u_k$.\nThe $L_2$ sensitivity is defined with respect to client-level adjacency. For client $2$, this means we consider two sets of inputs that are identical except for the update from client $2$. Let these sets be represented by the tuples of updates $U = (u_1, u_2, u_3, u_4)$ and $U' = (u_1, u_2', u_3, u_4)$. The updates $u_2$ and $u_2'$ can be any vectors in $\\mathbb{R}^3$ as long as they satisfy the norm clipping constraint, i.e., $\\|u_2\\|_2 \\leq C$ and $\\|u_2'\\|_2 \\leq C$.\n\nThe $L_2$ sensitivity for client $2$, denoted $\\Delta_2 f_2$, is the maximum possible change in the $L_2$ norm of the output $f$ over all such adjacent input sets:\n$$ \\Delta_2 f_2 = \\max_{U, U' \\text{ adjacent on client 2}} \\| f(U) - f(U') \\|_2 $$\nLet's compute the difference $f(U) - f(U')$:\n$$ f(U) - f(U') = \\left(\\sum_{k=1}^4 \\alpha_k u_k\\right) - \\left(\\alpha_1 u_1 + \\alpha_2 u_2' + \\alpha_3 u_3 + \\alpha_4 u_4\\right) $$\n$$ f(U) - f(U') = \\alpha_2 u_2 - \\alpha_2 u_2' = \\alpha_2(u_2 - u_2') $$\nNow, we take the $L_2$ norm of this difference:\n$$ \\|f(U) - f(U')\\|_2 = \\|\\alpha_2(u_2 - u_2')\\|_2 = |\\alpha_2| \\|u_2 - u_2'\\|_2 $$\nSince $\\alpha_2 = \\frac{n_2}{n}$ is non-negative, $|\\alpha_2| = \\alpha_2$.\n$$ \\|f(U) - f(U')\\|_2 = \\alpha_2 \\|u_2 - u_2'\\|_2 $$\nTo find the sensitivity, we must maximize this quantity over all valid choices for $u_2$ and $u_2'$:\n$$ \\Delta_2 f_2 = \\max_{\\substack{\\|u_2\\|_2 \\leq C \\\\ \\|u_2'\\|_2 \\leq C}} \\alpha_2 \\|u_2 - u_2'\\|_2 = \\alpha_2 \\left( \\max_{\\substack{\\|u_2\\|_2 \\leq C \\\\ \\|u_2'\\|_2 \\leq C}} \\|u_2 - u_2'\\|_2 \\right) $$\nThe term $\\max \\|u_2 - u_2'\\|_2$ represents the maximum Euclidean distance between any two points within a ball of radius $C$ centered at the origin. This maximum distance is the diameter of the ball, which is $2C$. This maximum is achieved when $u_2$ and $u_2'$ are on the surface of the ball and point in opposite directions, for example, $u_2 = v$ and $u_2' = -v$ where $\\|v\\|_2 = C$. In this case, $\\|u_2 - u_2'\\|_2 = \\|v - (-v)\\|_2 = \\|2v\\|_2 = 2\\|v\\|_2 = 2C$.\n\nTherefore, the worst-case $L_2$ sensitivity with respect to client $2$ is:\n$$ \\Delta_2 f_2 = \\alpha_2 (2C) $$\nIt is critical to note that this sensitivity does not depend on the actual update vectors provided in the problem, but only on the client's weight in the aggregation and the clipping bound.\n\nNow we substitute the given numerical values:\n$\\alpha_2 = \\frac{11}{30}$\n$C = 3$\n\n$$ \\Delta_2 f_2 = \\frac{11}{30} \\times (2 \\times 3) = \\frac{11}{30} \\times 6 = \\frac{66}{30} = \\frac{11}{5} $$\nThe worst-case $L_2$ sensitivity for client $2$ is $\\frac{11}{5}$.", "answer": "$$\\boxed{\\frac{11}{5}}$$", "id": "4339375"}, {"introduction": "While federated averaging is a common aggregation method, real-world systems must be resilient to errors, such as a data pipeline malfunction that produces an outlier update. This practice provides a hands-on comparison between the standard mean-based aggregation and a more robust alternative, the coordinate-wise median [@problem_id:4339357]. By quantifying the divergence between these two results, you will explore the vital role of robust statistics in maintaining the stability and integrity of federated genomic classifiers.", "problem": "Seven academic medical centers collaborate in privacy-preserving Federated Learning to train a genomic classifier for differentiating pathogenic from benign variants using regularized logistic regression. Under the cross-silo Federated Analysis framework, each site computes a local parameter update vector in $\\mathbb{R}^{4}$ from its private gradient step and shares it with the aggregator without disclosing raw genotype-phenotype data. Consider the following local update vectors (row vectors) from $n=7$ sites:\n$$\nu_{1} = (0.12,\\,-0.08,\\,0.05,\\,0.01),\\quad\nu_{2} = (0.10,\\,-0.07,\\,0.06,\\,0.02),\\quad\nu_{3} = (0.11,\\,-0.09,\\,0.04,\\,0.03),\n$$\n$$\nu_{4} = (0.09,\\,-0.06,\\,0.05,\\,0.00),\\quad\nu_{5} = (0.13,\\,-0.07,\\,0.07,\\,0.02),\\quad\nu_{6} = (0.12,\\,-0.08,\\,0.06,\\,0.01),\n$$\n$$\nu_{7} = (2.00,\\,-1.50,\\,1.20,\\,0.80).\n$$\nAssume $u_{7}$ is an outlier caused by a transient variant calling pipeline bug. Two canonical aggregation rules are considered:\n- Federated Averaging (FedAvg): the mean update $\\bar{u} = \\frac{1}{n}\\sum_{i=1}^{n} u_{i}$,\n- Coordinate-wise median: the vector $u_{\\mathrm{med}}$ whose $j$-th coordinate is the median of $\\{u_{1j},\\dots,u_{nj}\\}$ for $j \\in \\{1,2,3,4\\}$.\n\nStarting from standard definitions of these aggregators, compute the Euclidean distance $\\|\\bar{u} - u_{\\mathrm{med}}\\|_{2}$ between the mean and the coordinate-wise median in this setting. Provide your final numeric answer as an exact fraction in simplest form. Briefly interpret the robustness implications of this difference for the stability of genomic classifiers under federated training, grounding your reasoning in well-established properties of robust statistics and without referencing any raw patient-level data.", "solution": "The setting is cross-silo Federated Learning in precision medicine, where each site $i \\in \\{1,\\dots,7\\}$ sends a local update vector $u_{i} \\in \\mathbb{R}^{4}$ to an aggregator. The aggregator forms a global update using either the arithmetic mean (Federated Averaging) or the coordinate-wise median. We proceed from foundational definitions:\n\n1. The Federated Averaging (FedAvg) mean is defined by\n$$\n\\bar{u} \\equiv \\frac{1}{n} \\sum_{i=1}^{n} u_{i},\n$$\nwith $n=7$.\n\n2. The coordinate-wise median $u_{\\mathrm{med}}$ is defined by computing, for each coordinate $j \\in \\{1,2,3,4\\}$, the median of the multiset $\\{u_{1j},\\dots,u_{7j}\\}$; for odd $n$, the median is the $\\frac{n+1}{2}$-th element in the sorted order of that coordinate.\n\n3. The Euclidean distance is defined by\n$$\n\\|\\bar{u} - u_{\\mathrm{med}}\\|_{2} = \\sqrt{\\sum_{j=1}^{4} \\left(\\bar{u}_{j} - (u_{\\mathrm{med}})_{j}\\right)^{2}}.\n$$\n\nWe calculate $\\bar{u}$ coordinate-wise.\n\n- Coordinate $1$:\n$$\n\\sum_{i=1}^{6} u_{i1} = 0.12 + 0.10 + 0.11 + 0.09 + 0.13 + 0.12 = 0.67,\\quad \\text{and } u_{71}=2.00.\n$$\nThus,\n$$\n\\bar{u}_{1} = \\frac{0.67 + 2.00}{7} = \\frac{2.67}{7} = \\frac{267}{700}.\n$$\n\n- Coordinate $2$:\n$$\n\\sum_{i=1}^{6} u_{i2} = -0.08 - 0.07 - 0.09 - 0.06 - 0.07 - 0.08 = -0.45,\\quad \\text{and } u_{72}=-1.50.\n$$\nThus,\n$$\n\\bar{u}_{2} = \\frac{-0.45 - 1.50}{7} = \\frac{-1.95}{7} = -\\frac{195}{700} = -\\frac{39}{140}.\n$$\n\n- Coordinate $3$:\n$$\n\\sum_{i=1}^{6} u_{i3} = 0.05 + 0.06 + 0.04 + 0.05 + 0.07 + 0.06 = 0.33,\\quad \\text{and } u_{73}=1.20.\n$$\nThus,\n$$\n\\bar{u}_{3} = \\frac{0.33 + 1.20}{7} = \\frac{1.53}{7} = \\frac{153}{700}.\n$$\n\n- Coordinate $4$:\n$$\n\\sum_{i=1}^{6} u_{i4} = 0.01 + 0.02 + 0.03 + 0.00 + 0.02 + 0.01 = 0.09,\\quad \\text{and } u_{74}=0.80.\n$$\nThus,\n$$\n\\bar{u}_{4} = \\frac{0.09 + 0.80}{7} = \\frac{0.89}{7} = \\frac{89}{700}.\n$$\n\nNext, compute the coordinate-wise medians. For each coordinate, sort the $7$ values and take the $4$-th.\n\n- Coordinate $1$ values:\n$$\n\\{0.12,\\,0.10,\\,0.11,\\,0.09,\\,0.13,\\,0.12,\\,2.00\\} \\to \\{0.09,\\,0.10,\\,0.11,\\,0.12,\\,0.12,\\,0.13,\\,2.00\\},\n$$\nmedian is the $4$-th value, $0.12$, hence $(u_{\\mathrm{med}})_{1} = \\frac{12}{100} = \\frac{3}{25}$.\n\n- Coordinate $2$ values:\n$$\n\\{-0.08,\\,-0.07,\\,-0.09,\\,-0.06,\\,-0.07,\\,-0.08,\\,-1.50\\} \\to \\{-1.50,\\,-0.09,\\,-0.08,\\,-0.08,\\,-0.07,\\,-0.07,\\,-0.06\\},\n$$\nmedian is the $4$-th value, $-0.08$, hence $(u_{\\mathrm{med}})_{2} = -\\frac{8}{100} = -\\frac{2}{25}$.\n\n- Coordinate $3$ values:\n$$\n\\{0.05,\\,0.06,\\,0.04,\\,0.05,\\,0.07,\\,0.06,\\,1.20\\} \\to \\{0.04,\\,0.05,\\,0.05,\\,0.06,\\,0.06,\\,0.07,\\,1.20\\},\n$$\nmedian is the $4$-th value, $0.06$, hence $(u_{\\mathrm{med}})_{3} = \\frac{6}{100} = \\frac{3}{50}$.\n\n- Coordinate $4$ values:\n$$\n\\{0.01,\\,0.02,\\,0.03,\\,0.00,\\,0.02,\\,0.01,\\,0.80\\} \\to \\{0.00,\\,0.01,\\,0.01,\\,0.02,\\,0.02,\\,0.03,\\,0.80\\},\n$$\nmedian is the $4$-th value, $0.02$, hence $(u_{\\mathrm{med}})_{4} = \\frac{2}{100} = \\frac{1}{50}$.\n\nTherefore,\n$$\nu_{\\mathrm{med}} = \\left(\\frac{3}{25},\\, -\\frac{2}{25},\\, \\frac{3}{50},\\, \\frac{1}{50}\\right).\n$$\n\nForm the difference $d \\equiv \\bar{u} - u_{\\mathrm{med}}$ coordinate-wise:\n$$\nd_{1} = \\frac{267}{700} - \\frac{3}{25} = \\frac{267}{700} - \\frac{84}{700} = \\frac{183}{700},\n$$\n$$\nd_{2} = -\\frac{39}{140} - \\left(-\\frac{2}{25}\\right) = -\\frac{195}{700} + \\frac{56}{700} = -\\frac{139}{700},\n$$\n$$\nd_{3} = \\frac{153}{700} - \\frac{3}{50} = \\frac{153}{700} - \\frac{42}{700} = \\frac{111}{700},\n$$\n$$\nd_{4} = \\frac{89}{700} - \\frac{1}{50} = \\frac{89}{700} - \\frac{14}{700} = \\frac{75}{700}.\n$$\n\nCompute the Euclidean norm:\n$$\n\\|\\bar{u} - u_{\\mathrm{med}}\\|_{2} = \\sqrt{\\left(\\frac{183}{700}\\right)^{2} + \\left(\\frac{139}{700}\\right)^{2} + \\left(\\frac{111}{700}\\right)^{2} + \\left(\\frac{75}{700}\\right)^{2}}\n= \\frac{1}{700}\\sqrt{183^{2} + 139^{2} + 111^{2} + 75^{2}}.\n$$\nEvaluate the sum of squares:\n$$\n183^{2} = 33489,\\quad 139^{2} = 19321,\\quad 111^{2} = 12321,\\quad 75^{2} = 5625,\n$$\n$$\n33489 + 19321 + 12321 + 5625 = 70756.\n$$\nNote that $70756 = 266^{2}$, hence\n$$\n\\|\\bar{u} - u_{\\mathrm{med}}\\|_{2} = \\frac{266}{700} = \\frac{133}{350} = \\frac{19}{50}.\n$$\n\nInterpretation of robustness implications: In robust statistics, the coordinate-wise median has a breakdown point of $0.5$, meaning it can tolerate up to nearly $50\\%$ arbitrary contamination per coordinate without diverging, whereas the mean has a breakdown point of $0$ and is highly sensitive to extreme outliers. Here, despite the very large outlier $u_{7}$, the coordinate-wise median $u_{\\mathrm{med}}$ remains close to the central tendency of the six non-outlying updates, while the mean $\\bar{u}$ is substantially shifted. The Euclidean distance $\\frac{19}{50}$ quantifies this shift: a sizable discrepancy induced primarily by the single extreme update. For federated training of genomic classifiers, choosing the coordinate-wise median aggregation enhances stability against occasional corrupted or adversarial updates, thereby reducing the risk of propagating spurious signals into model parameters, all without compromising privacy by sharing raw patient-level genomic data.", "answer": "$$\\boxed{\\frac{19}{50}}$$", "id": "4339357"}, {"introduction": "Moving from algorithmic principles to practical deployment, this final exercise addresses the critical engineering challenges of communication and scalability in federated learning. You will model the time complexity of a full training round that includes a secure aggregation protocol, accounting for network bottlenecks at both the server and client sides [@problem_id:4339316]. This analysis is essential for assessing the feasibility of deploying federated systems in real-world clinical networks and understanding the trade-offs that govern their performance at scale.", "problem": "In a cross-silo Federated Learning (FL) setup for precision medicine and genomic diagnostics, suppose $K$ hospitals participate in Secure Aggregation (SA) to protect patient-level gradients. Consider SA implemented via pairwise mask seeds established with Elliptic-Curve Diffie–Hellman (ECDH). Let the global model payload be of size $S_{m} = 200 \\times 10^{6}$ bytes, and let the masked upload use an encryption scheme with ciphertext expansion factor $\\alpha = 2.2$, so the masked update per hospital has size $S_{u} = \\alpha S_{m}$ bytes. Each hospital executes a pairwise ECDH key exchange with every other hospital, sending one message of size $s_{k} = 64 \\times 10^{3}$ bytes to each peer during the SA setup phase. Assume symmetric hospital links with $B_{h} = 200 \\times 10^{6}$ bits per second and a central server with symmetric $B_{s} = 10 \\times 10^{9}$ bits per second. All links are full-duplex, and during each phase, transmissions proceed in parallel and the phase completes when its bottleneck link finishes.\n\nStarting from first principles—specifically, that the communication time for a transfer of $x$ bits over a link of capacity $B$ bits per second is $t = x/B$—derive (i) the system-wide per-round communication complexity in bits, (ii) the number of logical communication phases (round complexity) for SA in this setting, and (iii) the total round duration $T_{\\text{round}}(K)$ as the sum of the durations of the broadcast phase, the SA handshake phase, and the masked upload and aggregation phase, with each phase duration taken as the maximum of its contending bottlenecks. Then, under a time budget $T_{\\text{budget}} = 180$ seconds, determine the maximum integer $K$ such that $T_{\\text{round}}(K) \\leq T_{\\text{budget}}$.\n\nExpress the final answer as a single integer without units. If rounding is required, round to three significant figures. Use radians or degrees only if relevant to the calculation; angles are not relevant here.", "solution": "The problem is validated as scientifically grounded, well-posed, objective, and self-contained. All necessary information is provided to derive a solution based on fundamental principles of communication network analysis.\n\nThe solution proceeds by first deriving the expressions for the communication complexity and round duration in terms of the number of hospitals, $K$. Then, these expressions will be used to solve for the maximum value of $K$ that satisfies the given time budget. All data sizes must be converted from bytes to bits, using the conversion factor of $1$ byte $= 8$ bits.\n\nThe provided parameters are:\n- Number of participating hospitals: $K$\n- Global model payload size: $S_{m} = 200 \\times 10^{6}$ bytes\n- Ciphertext expansion factor: $\\alpha = 2.2$\n- Pairwise key exchange message size: $s_{k} = 64 \\times 10^{3}$ bytes\n- Hospital link bandwidth: $B_{h} = 200 \\times 10^{6}$ bits/s\n- Server link bandwidth: $B_{s} = 10 \\times 10^{9}$ bits/s\n- Time budget: $T_{\\text{budget}} = 180$ s\n\nFirst, we convert all data sizes to bits:\n- Model size in bits: $S_{m}^{\\text{bits}} = S_{m} \\times 8 = (200 \\times 10^{6}) \\times 8 = 1.6 \\times 10^{9}$ bits.\n- Masked update size in bits: $S_{u}^{\\text{bits}} = \\alpha S_{m} \\times 8 = 2.2 \\times (1.6 \\times 10^{9}) = 3.52 \\times 10^{9}$ bits.\n- Key message size in bits: $s_{k}^{\\text{bits}} = s_{k} \\times 8 = (64 \\times 10^{3}) \\times 8 = 5.12 \\times 10^{5}$ bits.\n\n(i) System-wide per-round communication complexity in bits, $C_{\\text{total}}(K)$.\nThe total communication is the sum of bits transferred in all three phases:\n1.  Broadcast phase: The server sends the model of size $S_{m}^{\\text{bits}}$ to each of the $K$ hospitals. The total bits sent are $K \\times S_{m}^{\\text{bits}}$.\n2.  SA handshake phase: Each of the $K$ hospitals performs a pairwise key exchange with the other $K-1$ hospitals. A single message has size $s_{k}^{\\text{bits}}$. The total number of messages is $K(K-1)$. The total bits sent are $K(K-1) \\times s_{k}^{\\text{bits}}$.\n3.  Masked upload phase: Each of the $K$ hospitals sends a masked update of size $S_{u}^{\\text{bits}}$ to the server. The total bits sent are $K \\times S_{u}^{\\text{bits}}$.\n\nThe total communication complexity is the sum of these contributions:\n$$C_{\\text{total}}(K) = K \\cdot S_{m}^{\\text{bits}} + K(K-1) \\cdot s_{k}^{\\text{bits}} + K \\cdot S_{u}^{\\text{bits}}$$\n$$C_{\\text{total}}(K) = K (S_{m}^{\\text{bits}} + (K-1)s_{k}^{\\text{bits}} + \\alpha S_{m}^{\\text{bits}})$$\n$$C_{\\text{total}}(K) = K [(1+\\alpha)S_{m}^{\\text{bits}} + (K-1)s_{k}^{\\text{bits}}]$$\n\n(ii) Number of logical communication phases.\nThe problem statement describes a sequence of three distinct communication stages:\n1.  The server broadcasts the global model to all hospitals.\n2.  The hospitals perform a pairwise Secure Aggregation (SA) handshake.\n3.  The hospitals upload their masked updates to the server for aggregation.\nTherefore, there are $3$ logical communication phases per round.\n\n(iii) Total round duration $T_{\\text{round}}(K)$.\nThe total duration is the sum of the durations of the three phases, $T_{\\text{round}}(K) = T_{1}(K) + T_{2}(K) + T_{3}(K)$. The duration of each phase is determined by its communication bottleneck.\n\n-   **Phase 1: Broadcast duration, $T_{1}(K)$**\n    The server sends $S_{m}^{\\text{bits}}$ to $K$ hospitals. The server's uplink must handle a total of $K \\times S_{m}^{\\text{bits}}$ of traffic. This takes time $t_{\\text{server}} = \\frac{K \\cdot S_{m}^{\\text{bits}}}{B_{s}}$. Each hospital's downlink must receive $S_{m}^{\\text{bits}}$ of traffic, which takes time $t_{\\text{hospital}} = \\frac{S_{m}^{\\text{bits}}}{B_{h}}$. The phase completes when all transfers are done, so its duration is the maximum of these times.\n    $$T_{1}(K) = \\max\\left(\\frac{K \\cdot S_{m}^{\\text{bits}}}{B_{s}}, \\frac{S_{m}^{\\text{bits}}}{B_{h}}\\right)$$\n\n-   **Phase 2: SA handshake duration, $T_{2}(K)$**\n    This phase involves only peer-to-peer communication among hospitals. Each hospital sends $K-1$ messages of size $s_{k}^{\\text{bits}}$. Since the links are full-duplex, we consider the bottleneck on the outgoing traffic. The total data sent by a single hospital is $(K-1)s_{k}^{\\text{bits}}$. The time required for this is determined by the hospital's link capacity $B_{h}$. As all hospitals perform this in parallel, the duration is:\n    $$T_{2}(K) = \\frac{(K-1) \\cdot s_{k}^{\\text{bits}}}{B_{h}}$$\n\n-   **Phase 3: Masked upload duration, $T_{3}(K)$**\n    $K$ hospitals upload $S_{u}^{\\text{bits}}$ each to the server. Each hospital's uplink takes time $t_{\\text{hospital}} = \\frac{S_{u}^{\\text{bits}}}{B_{h}}$. The server's downlink must receive a total of $K \\cdot S_{u}^{\\text{bits}}$ of traffic, which takes time $t_{\\text{server}} = \\frac{K \\cdot S_{u}^{\\text{bits}}}{B_{s}}$. The phase duration is the maximum of these times.\n    $$T_{3}(K) = \\max\\left(\\frac{S_{u}^{\\text{bits}}}{B_{h}}, \\frac{K \\cdot S_{u}^{\\text{bits}}}{B_{s}}\\right) = \\max\\left(\\frac{\\alpha S_{m}^{\\text{bits}}}{B_{h}}, \\frac{K \\alpha S_{m}^{\\text{bits}}}{B_{s}}\\right)$$\n\nThe total round duration is:\n$$T_{\\text{round}}(K) = \\max\\left(\\frac{K S_{m}^{\\text{bits}}}{B_{s}}, \\frac{S_{m}^{\\text{bits}}}{B_{h}}\\right) + \\frac{(K-1) s_{k}^{\\text{bits}}}{B_{h}} + \\max\\left(\\frac{\\alpha S_{m}^{\\text{bits}}}{B_{h}}, \\frac{K \\alpha S_{m}^{\\text{bits}}}{B_{s}}\\right)$$\n\n(iv) Maximum integer $K$ for a given time budget.\nWe need to find the maximum integer $K$ such that $T_{\\text{round}}(K) \\leq T_{\\text{budget}}$, where $T_{\\text{budget}} = 180$ s. We substitute the numerical values into the expression for $T_{\\text{round}}(K)$.\n\n-   For $T_{1}(K)$:\n    -   $\\frac{K S_{m}^{\\text{bits}}}{B_{s}} = \\frac{K \\times (1.6 \\times 10^{9})}{10 \\times 10^{9}} = 0.16 K$ s.\n    -   $\\frac{S_{m}^{\\text{bits}}}{B_{h}} = \\frac{1.6 \\times 10^{9}}{200 \\times 10^{6}} = 8$ s.\n    -   $T_{1}(K) = \\max(0.16 K, 8)$. The crossover occurs when $0.16K = 8$, which is $K = 50$.\n\n-   For $T_{2}(K)$:\n    -   $T_{2}(K) = \\frac{(K-1) \\times (5.12 \\times 10^{5})}{200 \\times 10^{6}} = \\frac{5.12 \\times 10^{5}}{2 \\times 10^{8}}(K-1) = 0.00256(K-1)$ s.\n\n-   For $T_{3}(K)$:\n    -   $\\frac{\\alpha S_{m}^{\\text{bits}}}{B_{h}} = \\frac{3.52 \\times 10^{9}}{200 \\times 10^{6}} = 17.6$ s.\n    -   $\\frac{K \\alpha S_{m}^{\\text{bits}}}{B_{s}} = \\frac{K \\times (3.52 \\times 10^{9})}{10 \\times 10^{9}} = 0.352 K$ s.\n    -   $T_{3}(K) = \\max(17.6, 0.352 K)$. The crossover occurs when $0.352K = 17.6$, which is $K = 50$.\n\nThe total duration $T_{\\text{round}}(K)$ has two regimes based on whether $K \\leq 50$ or $K > 50$.\n\nCase 1: $K \\leq 50$.\n$$T_{\\text{round}}(K) = 8 + 0.00256(K-1) + 17.6 = 25.6 + 0.00256K - 0.00256 = 25.59744 + 0.00256K$$\nFor $K=50$, $T_{\\text{round}}(50) = 25.59744 + 0.00256 \\times 50 = 25.72544$ s. This is comfortably below the $180$ s budget, so the maximum $K$ must be greater than $50$.\n\nCase 2: $K > 50$.\nIn this regime, both $\\max$ functions are determined by the term linear in $K$.\n$$T_{\\text{round}}(K) = 0.16K + 0.00256(K-1) + 0.352K$$\n$$T_{\\text{round}}(K) = 0.16K + 0.00256K - 0.00256 + 0.352K$$\n$$T_{\\text{round}}(K) = (0.16 + 0.00256 + 0.352)K - 0.00256$$\n$$T_{\\text{round}}(K) = 0.51456K - 0.00256$$\n\nNow, we solve the inequality $T_{\\text{round}}(K) \\leq 180$:\n$$0.51456K - 0.00256 \\leq 180$$\n$$0.51456K \\leq 180.00256$$\n$$K \\leq \\frac{180.00256}{0.51456}$$\n$$K \\leq 349.82...$$\n\nSince $K$ must be an integer, the maximum value for $K$ is $349$. This value is consistent with our assumption that $K > 50$.\nTo confirm, we can check the time for $K=349$:\n$T_{\\text{round}}(349) = 0.51456(349) - 0.00256 = 179.58144 - 0.00256 = 179.57888$ s, which is $\\leq 180$ s.\nFor $K=350$:\n$T_{\\text{round}}(350) = 0.51456(350) - 0.00256 = 180.096 - 0.00256 = 180.09344$ s, which is $> 180$ s.\n\nThus, the maximum integer number of hospitals is $349$.", "answer": "$$\\boxed{349}$$", "id": "4339316"}]}
{"hands_on_practices": [{"introduction": "我们从一个基本练习开始，它揭示了 ZX-演算图的底层语义。通过直接应用状态求和规则来计算一个闭合图的标量值，我们可以建立起关于图如何表示复数的直观理解。这个练习 [@problem_id:1198196] 是理解更复杂化简规则背后原理的基石。", "problem": "在一种称为ZX-演算的量子力学图形演算中，量子态和算符由张量网络图表示。该演算的一个基本组成部分是“Z-spider”，它是一个具有任意数量边（腿）和相关相位的顶点。\n\n一个闭合图（没有外部腿的图）的标量值由一种按态求和的范式确定。考虑一个由一组顶点 $V$ (spider) 和连接它们的边集 $E$ 组成的图。该值是通过对图中每条边所有可能的状态（$|0\\rangle$ 或 $|1\\rangle$）指派进行求和得到的。\n\n求值规则如下：\n1.  一个指派是一个函数 $c: E \\to \\{0, 1\\}$，它将每条边映射到一个状态。\n2.  对于一个给定的指派 $c$，每个具有相位 $\\alpha_v$ 和邻接边 $E_v$ 的Z-spider $v \\in V$ 对总乘积贡献一个因子：\n    -   如果 $E_v$ 中的所有边都被指派为状态 $|0\\rangle$（即对所有 $e \\in E_v$ 都有 $c(e)=0$），则贡献为 $1$。\n    -   如果 $E_v$ 中的所有边都被指派为状态 $|1\\rangle$（即对所有 $e \\in E_v$ 都有 $c(e)=1$），则贡献为 $e^{i\\alpha_v}$。\n    -   如果 $E_v$ 中的边被指派为 $|0\\rangle$ 和 $|1\\rangle$ 状态的混合，则贡献为 $0$。\n3.  整个图的值是所有 $2^{|E|}$ 种可能的状态指派下，这些顶点贡献的乘积之和。\n\n**问题：**\n考虑一个结构为四面体的闭合图。在四个顶点中的每一个上，都有一个Z-spider。所有四个spider都具有相同的相位 $\\alpha$。该图的边对应于四面体的六条边。\n\n计算当相位为 $\\alpha = \\pi/3$ 时此图的标量值。", "solution": "设顶点集为 $V = \\{v_1, v_2, v_3, v_4\\}$，边集为 $E$。该图是一个四面体，即完全图 $K_4$。顶点数为 $|V|=4$，边数为 $|E| = \\binom{4}{2} = 6$。每个顶点的度为3。\n\n我们用 $\\mathcal{Z}$ 表示该图的标量值，它由所有可能的状态指派（着色）$c: E \\to \\{0, 1\\}$ 的总和给出：\n$$ \\mathcal{Z} = \\sum_{c: E \\to \\{0,1\\}} \\prod_{j=1}^{4} C(v_j, c) $$\n其中 $C(v_j, c)$ 是顶点 $v_j$ 上的spider对着色 $c$ 的贡献。\n\n根据所给规则：\n-   如果所有与 $v_j$ 邻接的边都被着色为0，则 $C(v_j, c) = 1$。\n-   如果所有与 $v_j$ 邻接的边都被着色为1，则 $C(v_j, c) = e^{i\\alpha}$。\n-   如果与 $v_j$ 邻接的边颜色混合，则 $C(v_j, c) = 0$。\n\n求和中的一项不为零，当且仅当乘积 $\\prod_{j=1}^{4} C(v_j, c)$ 不为零。这要求对于每个顶点 $v_j$，其贡献 $C(v_j, c)$ 必须不为零。这反过来意味着，对于每个顶点 $v_j$，所有与其邻接的边必须具有相同的颜色。\n\n我们来分析这个约束。图 $K_4$ 是连通的。我们任选一个顶点，比如 $v_1$。为使其贡献不为零，所有三条与其邻接的边，即 $(v_1, v_2)$、$(v_1, v_3)$ 和 $(v_1, v_4)$，必须具有相同的颜色，我们称之为 $k \\in \\{0, 1\\}$。\n\n现在考虑一个相邻的顶点，比如 $v_2$。为使其贡献不为零，所有三条与其邻接的边，即 $(v_2, v_1)$、$(v_2, v_3)$ 和 $(v_2, v_4)$，也必须具有相同的颜色。由于其中一条边 $(v_1, v_2)$ 已经被着色为 $k$，所有与 $v_2$ 邻接的边也必须被着色为 $k$。\n\n我们可以对所有顶点重复此论证。由于该图是连通的，如果我们从任意一个顶点开始，并要求其邻接边是单色的，这个颜色限制会传播到所有相邻的顶点，并最终传播到整个图。因此，要使整个乘积项不为零，图中所有的边都必须具有相同的颜色。\n\n在 $2^6 = 64$ 种可能性中，这只留下了两种能够产生非零贡献的状态指派：\n1.  **全0指派（$c_0$）**：每条边 $e \\in E$ 都被指派为状态 $|0\\rangle$。\n2.  **全1指派（$c_1$）**：每条边 $e \\in E$ 都被指派为状态 $|1\\rangle$。\n\n我们来计算这两种指派各自的值。\n\n**情况1：全0指派（$c_0$）**\n对于每个顶点 $v_j$，其所有邻接边都被着色为0。根据规则，每个顶点的贡献是 $C(v_j, c_0) = 1$。\n此指派的总乘积为：\n$$ \\prod_{j=1}^{4} C(v_j, c_0) = 1 \\times 1 \\times 1 \\times 1 = 1 $$\n\n**情况2：全1指派（$c_1$）**\n对于每个顶点 $v_j$，其所有邻接边都被着色为1。根据规则，每个顶点的贡献是 $C(v_j, c_1) = e^{i\\alpha}$。\n此指派的总乘积为：\n$$ \\prod_{j=1}^{4} C(v_j, c_1) = e^{i\\alpha} \\times e^{i\\alpha} \\times e^{i\\alpha} \\times e^{i\\alpha} = e^{i4\\alpha} $$\n\n总标量值 $\\mathcal{Z}$ 是所有可能指派的贡献之和。由于只有 $c_0$ 和 $c_1$ 有贡献，我们得到：\n$$ \\mathcal{Z} = (\\text{来自 } c_0 \\text{ 的贡献}) + (\\text{来自 } c_1 \\text{ 的贡献}) = 1 + e^{i4\\alpha} $$\n\n问题指定相位为 $\\alpha = \\pi/3$。代入此值：\n$$ \\mathcal{Z} = 1 + e^{i4\\pi/3} $$\n\n我们可以使用欧拉公式 $e^{i\\theta} = \\cos(\\theta) + i\\sin(\\theta)$ 来计算该复指数：\n$$ e^{i4\\pi/3} = \\cos\\left(\\frac{4\\pi}{3}\\right) + i\\sin\\left(\\frac{4\\pi}{3}\\right) $$\n角 $4\\pi/3$ 在第三象限。参考角是 $\\pi/3$。\n$$ \\cos\\left(\\frac{4\\pi}{3}\\right) = -\\cos\\left(\\frac{\\pi}{3}\\right) = -\\frac{1}{2} $$\n$$ \\sin\\left(\\frac{4\\pi}{3}\\right) = -\\sin\\left(\\frac{\\pi}{3}\\right) = -\\frac{\\sqrt{3}}{2} $$\n所以，$e^{i4\\pi/3} = -\\frac{1}{2} - i\\frac{\\sqrt{3}}{2}$。\n\n最后，我们将此结果代回 $\\mathcal{Z}$ 的表达式中：\n$$ \\mathcal{Z} = 1 + \\left(-\\frac{1}{2} - i\\frac{\\sqrt{3}}{2}\\right) = \\left(1 - \\frac{1}{2}\\right) - i\\frac{\\sqrt{3}}{2} = \\frac{1}{2} - i\\frac{\\sqrt{3}}{2} $$\n这就是该图的最终标量值。", "answer": "$$ \\boxed{\\frac{1}{2} - i\\frac{\\sqrt{3}}{2}} $$", "id": "1198196"}, {"introduction": "虽然状态求和规则是基础，但 ZX-演算的真正威力在于其强大的图重写规则。这个练习 [@problem_id:1198194] 演示了如何将一个量子电路转换为 ZX-图，然后通过应用化简规则来高效地计算其矩阵元。这展示了该演算在分析和模拟量子过程中的实用性。", "problem": "ZX-演算是一种用于量子计算推理的图形语言。它基于由称作“蜘蛛”的特殊节点通过线连接而成的图形。\n\n**背景知识：**\n1.  **蜘蛛（Spiders）：** 蜘蛛主要有两种类型：\n    *   **Z-蜘蛛（绿点）：** 一个具有 $m$ 个输入、$n$ 个输出和相位 $\\alpha \\in [0, 2\\pi)$ 的Z-蜘蛛表示为 $Z(\\alpha)$。它代表一个线性映射，其在计算基 $\\{|0\\rangle, |1\\rangle\\}$ 下的矩阵元由 $\\langle i_1...i_n | Z(\\alpha) | j_1...j_m \\rangle = \\delta_{i_1...i_n,j_1...j_m,0...0} + e^{i\\alpha}\\delta_{i_1...i_n,j_1...j_m,1...1}$ 给出。这意味着它使所有连接的线相等（必须全部处于 $|0\\rangle$ 态或全部处于 $|1\\rangle$ 态），并在后一种情况下施加一个相位 $e^{i\\alpha}$。相位为 0 的蜘蛛通常不带标签绘制。\n    *   **X-蜘蛛（红点）：** 一个X-蜘蛛，表示为 $X(\\alpha)$，在哈达玛变换后的基 $\\{|+\\rangle, |-\\rangle\\}$ 中有类似的定义。一个 $X(0)$ 蜘蛛可以用Z-蜘蛛和哈达玛门（$H$）定义为 $X(0) = H Z(0) H$。\n\n2.  **特殊图形：**\n    *   计算基态 $|0\\rangle$ 和 $|1\\rangle$ 由带有一条输出线的Z-蜘蛛表示：$|0\\rangle \\equiv Z(0)$ 和 $|1\\rangle \\equiv Z(\\pi)$。右矢 $\\langle 0|$ 和 $\\langle 1|$ 与之相同，但带有一条输入线。\n    *   CNOT门，其中第一个量子比特为控制位，第二个为目标位（$\\text{CNOT}_{12}$），表示为控制量子比特线上的一个 Z(0) 蜘蛛通过一条边连接到目标量子比特线上的一个 X(0) 蜘蛛。\n\n    $$\n    \\text{CNOT}_{12} =\n    \\vcenter{\\hbox{\n    \\begin{tikzpicture}\n    \\node[circle,fill=green, scale=0.6] (Z) at (0,0.5) {};\n    \\node[circle,fill=red, scale=0.6] (X) at (0,-0.5) {};\n    \\draw (Z) -- (X);\n    \\draw (-1, 0.5) -- (Z) -- (1, 0.5);\n    \\draw (-1, -0.5) -- (X) -- (1, -0.5);\n    \\end{tikzpicture}\n    }}\n    $$\n\n3.  **组合与求值：**\n    *   **顺序组合（$U_2 \\circ U_1$）：** 将 $U_1$ 的输出线连接到 $U_2$ 的输入线。\n    *   **张量积（$U_1 \\otimes U_2$）：** 将 $U_1$ 的图形置于 $U_2$ 的图形之上。\n    *   **矩阵元 $\\langle \\psi | U | \\phi \\rangle$：** 这表示为一个闭合图（没有输入或输出的图），通过将 $|\\phi\\rangle$ 的图形连接到 $U$ 的输入，并将 $\\langle \\psi |$ 的图形连接到 $U$ 的输出来获得。\n    *   **标量求值：** 一个闭合图的计算结果为一个复数。一个相位为 $\\alpha$ 且没有连接任何线（自身构成一个图）的独立Z-蜘蛛的计算结果为标量 $1+e^{i\\alpha}$。具有多个不相连组件的图形的值是它们各自值的乘积。\n\n4.  **化简规则：**\n    *   **蜘蛛融合：** 任意两个相连的同色蜘蛛可以融合成一个同色的蜘蛛。它们的相位相加（模 $2\\pi$）。\n    *   **双代数规则：** 一个Z-蜘蛛和一个X-蜘蛛可以相互“穿过”。对于由一条或多条线连接的任意Z-蜘蛛（绿色）和X-蜘蛛（红色），以下恒等式成立：\n\n    $$\n    \\vcenter{\\hbox{\n    \\begin{tikzpicture}\n    \\node[circle,fill=green, scale=0.6] (Z) at (0,0) {};\n    \\node[circle,fill=red, scale=0.6] (X) at (1,0) {};\n    \\draw (Z) -- (X);\n    \\draw (Z) -- (-0.7, 0.5);\n    \\draw (Z) -- (-0.7, -0.5);\n    \\draw (X) -- (1.7, 0.5);\n    \\draw (X) -- (1.7, -0.5);\n    \\end{tikzpicture}\n    }}\n    \\quad = \\quad\n    \\vcenter{\\hbox{\n    \\begin{tikzpicture}\n    \\node[circle,fill=red, scale=0.6] (X1) at (-0.5,0.5) {};\n    \\node[circle,fill=red, scale=0.6] (X2) at (-0.5,-0.5) {};\n    \\node[circle,fill=green, scale=0.6] (Z1) at (0.5,0.5) {};\n    \\node[circle,fill=green, scale=0.6] (Z2) at (0.5,-0.5) {};\n    \\draw (-1.2, 0.5) -- (X1) -- (Z1) -- (1.2, 0.5);\n    \\draw (-1.2, -0.5) -- (X2) -- (Z2) -- (1.2, -0.5);\n    \\draw (X1) -- (Z2);\n    \\draw (X2) -- (Z1);\n    \\end{tikzpicture}\n    }}\n    $$\n    对于CNOT电路，一个关键的推论是，一个由单一边连接的 Z(0) 蜘蛛和一个 X(0) 蜘蛛可以通过将 Z 蜘蛛“复制”到 X 蜘蛛的其他支路上进行解耦。\n\n**问题：**\n考虑三量子比特算符 $U = (I \\otimes \\text{CNOT}_{23}) \\circ (\\text{CNOT}_{12} \\otimes I) \\circ (I \\otimes \\text{CNOT}_{23})$，其中 $\\text{CNOT}_{ij}$ 是以量子比特 $i$ 为控制位、量子比特 $j$ 为目标位的CNOT门。\n\n你的任务是计算矩阵元 $\\langle 101 | U | 011 \\rangle$ 的值。你必须使用ZX-演算进行此计算。将相应的ZX-图化简，直到它成为一个标量值。", "solution": "为了使用ZX-演算计算矩阵元 $\\langle 101 | U | 011 \\rangle$，我们遵循以下步骤：\n\n1.  **绘制图形**：首先，我们将整个计算过程绘制成一个闭合的ZX-图。\n    *   输入态 $|011\\rangle$ 表示为三个并列的Z-蜘蛛，从上到下（量子比特1到3）的相位分别为 $0, \\pi, \\pi$。\n    *   输出态 $\\langle 101|$ 表示为三个并列的Z-蜘蛛，相位分别为 $\\pi, 0, \\pi$。\n    *   算符 $U = (I \\otimes \\text{CNOT}_{23}) \\circ (\\text{CNOT}_{12} \\otimes I) \\circ (I \\otimes \\text{CNOT}_{23})$ 表示为三层CNOT门。每层CNOT门由一个Z(0)蜘蛛（在控制位上）和一个X(0)蜘蛛（在目标位上）通过一条内部连线构成。\n\n2.  **融合同色蜘蛛**：沿着三条水平的量子比特线，所有Z-蜘蛛（来自输入、输出和CNOT门）可以根据蜘蛛融合规则合并。\n    *   第一条线（量子比特1）：输入$Z(0)$、CNOT$_{12}$的控制$Z(0)$、输出$Z(\\pi)$。它们融合为 $Z(0+0+\\pi) = Z(\\pi)$。\n    *   第二条线（量子比特2）：输入$Z(\\pi)$、CNOT$_{12}$的目标$X(0)$、CNOT$_{23}$的控制$Z(0)$、另一个CNOT$_{23}$的控制$Z(0)$、输出$Z(0)$。所有Z-蜘蛛融合为 $Z(\\pi+0+0+0) = Z(\\pi)$。\n    *   第三条线（量子比特3）：输入$Z(\\pi)$、CNOT$_{23}$的目标$X(0)$、另一个CNOT$_{23}$的目标$X(0)$、输出$Z(\\pi)$。所有Z-蜘蛛融合为 $Z(\\pi+\\pi) = Z(2\\pi) = Z(0)$。\n\n    此时，图被简化为三个带相位的Z-蜘蛛和三个X(0)蜘蛛，它们之间通过代表CNOT的内部连线相连。\n\n3.  **应用代数规则进行化简**：该算符$U$的结构满足杨-巴克斯特方程，它等效于交换量子比特1和量子比特3的SWAP门。因此，$U |011\\rangle = |110\\rangle$。\n    那么，矩阵元的计算就变成了两个基态的内积：\n    $$ \\langle 101 | U | 011 \\rangle = \\langle 101 | 110 \\rangle $$\n    由于$|101\\rangle$和$|110\\rangle$是正交的计算基态，它们的内积为0。\n\n4.  **图形的最终值**：在ZX-演算中，这个结果表现为整个闭合图可以被化简为一个值为0的标量图。虽然详细的图形变换步骤（涉及双代数规则）较为复杂，但其最终结果是确定的。一条可能的化简路径是，图形的拓扑结构使得它可以被重写，并分离出一个值为 $1 + e^{i\\pi} = 1 - 1 = 0$ 的孤立部分。当一个图的一个连通分量的值为0时，整个图的值（作为各分量值的乘积）也为0。\n\n因此，该闭合图的标量值，即所求矩阵元，为0。", "answer": "$$\\boxed{0}$$", "id": "1198194"}, {"introduction": "最后，我们探讨一个高级应用，展示 ZX-演算在量子电路优化中的前沿作用。$T$ 门在容错量子计算中代价高昂，因此最小化其数量至关重要。在这个练习 [@problem_id:1198219] 中，您将通过将一个复杂的 ZX-图化简为“相位小工具范式”，来确定一个电路的最小 $T$ 门数量。", "problem": "ZX-演算是用于推理量子过程的一种图形语言。它由称为“spider”（蜘蛛）的节点构成的图组成，这些节点由代表量子比特的“线”连接。spider 有两种基本类型：Z-spider（绿色，记作 $Z(\\alpha)$）和 X-spider（红色，记作 $X(\\beta)$），它们各自带有一个相位 $\\alpha$ 或 $\\beta$。一个由 Clifford+T 门组成的量子电路可以被转换成一个 ZX-图，其中 T 门对应于相位是 $\\pi/4$ 的奇数倍的 spider。\n\n一种常见的 T-数优化策略是将电路的 ZX-图转换为*相位器件范式*（phase-gadget normal form）。该范式由一个互连的 X-spider（具有 Clifford 相位，即 $\\pi/2$ 的倍数）构成的“骨架”组成，这个骨架表示一个图态，并由放置在线上的称为*相位器件*（phase gadget）的 Z-spider 进行装饰。这样一个图的 T-数被定义为相位是 $\\pi/4$ 的奇数倍的相位器件的数量。\n\n考虑一个具有两个输入（$i_1, i_2$）和两个输出（$o_1, o_2$）的 ZX-图。该图的骨架由三个相位均为 0 的 X-spider（$X_1$、$X_2$ 和 $X_3$）组成。它们的连接方式如下：\n- $X_1$ 连接到输入 $i_1$、输出 $o_1$ 以及 $X_2$ 和 $X_3$。\n- $X_2$ 连接到输入 $i_2$ 以及 $X_1$ 和 $X_3$。\n- $X_3$ 连接到输出 $o_2$ 以及 $X_1$ 和 $X_2$。\n\n这形成了一个由 X-spider 构成的三角形。该图有四个 Z-spider 相位器件：\n- 器件 $Z_A$ 的相位为 $\\alpha = \\pi/4$，位于连接 $X_1$ 和 $X_2$ 的线上。\n- 器件 $Z_B$ 的相位为 $\\beta = 3\\pi/4$，位于连接 $X_1$ 和 $X_3$ 的线上。\n- 器件 $Z_C$ 的相位为 $\\gamma = -3\\pi/4$，位于连接 $X_2$ 和 $X_3$ 的线上。\n- 器件 $Z_D$ 的相位为 $\\delta = \\pi/2$，位于连接输入 $i_2$ 和 $X_2$ 的线上。\n\n使用 ZX-演算的重写规则，将此图简化为一个功能相同但具有最少数量的非 Clifford 相位器件的形式。这个最小 T-数是多少？", "solution": "我们的目标是化简给定的ZX-图，并计算其最小T-数。T-数等于图中非Clifford相位（$\\pi/4$的奇数倍）器件的数量。\n\n1.  **初始T-数分析**：\n    给定的四个Z-相位器件中：\n    - $Z_A(\\alpha = \\pi/4)$: 非Clifford ($1 \\cdot \\pi/4$)\n    - $Z_B(\\beta = 3\\pi/4)$: 非Clifford ($3 \\cdot \\pi/4$)\n    - $Z_C(\\gamma = -3\\pi/4)$: 非Clifford ($-3 \\cdot \\pi/4$)\n    - $Z_D(\\delta = \\pi/2)$: Clifford ($2 \\cdot \\pi/4$)\n    初始T-数为3。\n\n2.  **吸收边上的相位器件**：\n    我们可以使用一个重写规则，将位于两个X-spider之间的边上的Z-相位器件“吸收”到X-spider中。一个相位为$\\phi$的Z-器件位于两个X-spider之间，等效于将这两个X-spider的相位各增加$\\phi/2$。\n    我们将这个规则应用于$Z_A, Z_B, Z_C$：\n    - $Z_A(\\pi/4)$ 位于 $X_1, X_2$ 之间：$X_1$和$X_2$的相位各增加 $\\pi/8$。\n    - $Z_B(3\\pi/4)$ 位于 $X_1, X_3$ 之间：$X_1$和$X_3$的相位各增加 $3\\pi/8$。\n    - $Z_C(-3\\pi/4)$ 位于 $X_2, X_3$ 之间：$X_2$和$X_3$的相位各增加 $-3\\pi/8$。\n    \n    计算X-spider的新相位（初始相位均为0）：\n    - $X_1$ 新相位: $0 + \\pi/8 + 3\\pi/8 = 4\\pi/8 = \\pi/2$。\n    - $X_2$ 新相位: $0 + \\pi/8 - 3\\pi/8 = -2\\pi/8 = -\\pi/4$。\n    - $X_3$ 新相位: $0 + 3\\pi/8 - 3\\pi/8 = 0$。\n\n    此时，边器件$Z_A, Z_B, Z_C$被移除。图现在由三个带相位的X-spider和一个位于输入线上的器件$Z_D(\\pi/2)$组成。\n\n3.  **化简为相位器件范式**：\n    相位器件范式要求骨架中的所有X-spider都具有Clifford相位（$\\pi/2$的整数倍）。\n    - $X_1$的相位$\\pi/2$是Clifford的。\n    - $X_3$的相位$0$是Clifford的。\n    - $X_2$的相位$-\\pi/4$是非Clifford的。\n\n    为了使骨架变为Clifford，我们需要将$X_2$的非Clifford相位“提取”出来。一个相位为$\\theta$的X-spider等效于一个相位为0的X-spider，并在其任意一条腿（边）上附加一个相位为$\\theta$的Z-器件。\n    我们将$X_2(-\\pi/4)$分解为一个Clifford spider $X_2(0)$和一个新的非Clifford Z-器件$Z_{new}(-\\pi/4)$。\n\n4.  **最终T-数计算**：\n    经过化简，图的最终形式包含：\n    - 一个完全由Clifford X-spider组成的骨架：$X_1(\\pi/2)$、$X_2(0)$和$X_3(0)$。\n    - 两个Z-相位器件：\n        - 原始的$Z_D(\\pi/2)$，其相位是Clifford的。\n        - 新提取的$Z_{new}(-\\pi/4)$，其相位是非Clifford的。\n\n    图中只有一个非Clifford相位器件。因此，该电路的最小T-数为1。这些化简步骤保持了图所代表的幺正变换，因此这个T-数是最小的。", "answer": "$$\\boxed{1}$$", "id": "1198219"}]}
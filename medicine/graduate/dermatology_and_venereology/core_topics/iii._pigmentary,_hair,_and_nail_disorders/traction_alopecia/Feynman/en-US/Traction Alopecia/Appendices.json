{
    "hands_on_practices": [
        {
            "introduction": "Understanding the pathophysiology of traction alopecia begins at the microscopic level of a single hair shaft. This foundational exercise asks you to apply the core principle of tensile stress, defined as force per unit area ($\\sigma = F/A$), to a clinically relevant scenario. By calculating the stress induced by a typical grooming force, you will develop a quantitative intuition for the mechanical loads hair fibers can endure and how chronic, sub-fracture tension is the key mechanism driving this condition .",
            "id": "4498057",
            "problem": "A patient presents with early-stage traction alopecia characterized by perifollicular erythema and broken hairs at the frontal hairline after chronic tight braiding. To assess whether the mechanical load on individual hair shafts approaches fracture risk, model a single hair as a homogeneous cylindrical fiber with circular cross-section. Assume the hair shaft diameter is $d = 80 \\times 10^{-6}\\,\\mathrm{m}$ and the instantaneous tensile force transmitted to one hair during grooming is $F = 0.5\\,\\mathrm{N}$. Starting from the definition of Cauchy tensile stress and basic Euclidean geometry, compute the tensile stress $\\sigma$ on the hair shaft. Express the final stress in megapascals (MPa) and round your answer to four significant figures. Then, interpret within your derivation whether the computed value exceeds typical human hair fracture thresholds reported in the literature for untreated terminal scalp hair.",
            "solution": "The problem statement is first validated against the required criteria.\n\n### Step 1: Extract Givens\n-   Model: A single hair is a homogeneous cylindrical fiber with a circular cross-section.\n-   Hair shaft diameter: $d = 80 \\times 10^{-6}\\,\\mathrm{m}$.\n-   Instantaneous tensile force: $F = 0.5\\,\\mathrm{N}$.\n-   Task 1: Compute the tensile stress $\\sigma$ on the hair shaft.\n-   Task 2: Express the final stress in megapascals (MPa).\n-   Task 3: Round the answer to four significant figures.\n-   Task 4: Interpret the result in the context of hair fracture thresholds.\n\n### Step 2: Validate Using Extracted Givens\n1.  **Scientifically Grounded**: The problem is grounded in fundamental principles of solid mechanics (Cauchy stress) and biology (biomechanics of hair). The model of a hair as a cylindrical fiber is a standard and appropriate simplification. The values for hair diameter ($d = 80\\,\\mu\\mathrm{m}$) and tensile force ($F = 0.5\\,\\mathrm{N}$, approximately the weight of a $50\\,\\mathrm{g}$ mass) are physically realistic. Traction alopecia is a recognized medical condition resulting from chronic mechanical stress on hair follicles. The problem is scientifically sound.\n2.  **Well-Posed**: The problem is well-posed. It provides all necessary information (force $F$ and diameter $d$) to calculate the cross-sectional area and subsequently the tensile stress $\\sigma$. The instructions for units and rounding are unambiguous. A unique and meaningful solution exists.\n3.  **Objective**: The problem is stated in objective, quantitative terms, free from subjective language or opinion.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. A complete solution will be provided.\n\nThe objective is to calculate the tensile stress, $\\sigma$, on a single hair shaft. Tensile stress is defined as the force $F$ applied perpendicularly to a surface, divided by the cross-sectional area $A$ over which the force is distributed.\n\nThe governing equation for tensile stress is:\n$$\n\\sigma = \\frac{F}{A}\n$$\n\nThe hair shaft is modeled as a cylinder with a circular cross-section. The diameter of this circle is given as $d$. The radius, $r$, is half the diameter:\n$$\nr = \\frac{d}{2}\n$$\n\nThe cross-sectional area $A$ of the hair shaft is the area of this circle, which is given by the formula:\n$$\nA = \\pi r^2\n$$\n\nSubstituting the expression for the radius $r$ in terms of the diameter $d$, we find the area $A$:\n$$\nA = \\pi \\left(\\frac{d}{2}\\right)^2 = \\frac{\\pi d^2}{4}\n$$\n\nNow, we can substitute this expression for the area $A$ back into the formula for stress $\\sigma$:\n$$\n\\sigma = \\frac{F}{\\frac{\\pi d^2}{4}} = \\frac{4F}{\\pi d^2}\n$$\n\nThe given values are the force $F = 0.5\\,\\mathrm{N}$ and the diameter $d = 80 \\times 10^{-6}\\,\\mathrm{m}$. We can now substitute these numerical values into the derived expression for $\\sigma$:\n$$\n\\sigma = \\frac{4(0.5\\,\\mathrm{N})}{\\pi (80 \\times 10^{-6}\\,\\mathrm{m})^2}\n$$\n$$\n\\sigma = \\frac{2\\,\\mathrm{N}}{\\pi (6400 \\times 10^{-12}\\,\\mathrm{m}^2)}\n$$\n$$\n\\sigma = \\frac{2}{\\pi (6.4 \\times 10^{-9})}\\,\\mathrm{Pa}\n$$\nCalculating the numerical value:\n$$\n\\sigma \\approx 99471839.4\\,\\mathrm{Pa}\n$$\nThe unit of pascals ($\\mathrm{Pa}$) is equivalent to newtons per square meter ($\\mathrm{N/m^2}$).\n\nThe problem requires the answer to be expressed in megapascals (MPa). The conversion is $1\\,\\mathrm{MPa} = 10^6\\,\\mathrm{Pa}$. Therefore, to convert our result from Pa to MPa, we divide by $10^6$:\n$$\n\\sigma \\approx \\frac{99471839.4}{10^6}\\,\\mathrm{MPa} \\approx 99.4718394\\,\\mathrm{MPa}\n$$\n\nThe problem also requires rounding the final answer to four significant figures.\n$$\n\\sigma \\approx 99.47\\,\\mathrm{MPa}\n$$\n\nFinally, we must interpret this value. The ultimate tensile strength (the stress at which fracture occurs) of human terminal scalp hair is reported in the literature to typically range from approximately $150\\,\\mathrm{MPa}$ to $250\\,\\mathrm{MPa}$, depending on factors such as ethnicity, age, and chemical treatments. The calculated stress of $\\sigma \\approx 99.47\\,\\mathrm{MPa}$ is below this fracture threshold. However, this value represents approximately $40\\%$ to $66\\%$ of the typical fracture strength. While a single application of this force might not break a healthy hair, the chronic and repetitive application of such a substantial sub-fracture load is the definitive mechanism for traction alopecia. This chronic stress induces a subclinical inflammatory response (perifollicular erythema), which can lead to follicular damage, miniaturization of the hair follicle, and eventual permanent hair loss. The presence of broken hairs in the clinical presentation suggests that either peak forces can exceed $0.5\\,\\mathrm{N}$, or that some hairs are structurally weaker, or that material fatigue from repeated loading has lowered the fracture strength of the hair shafts. Therefore, the calculated stress is of high clinical and pathological significance.",
            "answer": "$$\n\\boxed{99.47}\n$$"
        },
        {
            "introduction": "Moving from fundamental physics to clinical application, a dermatologist's expertise lies in synthesizing evidence to arrive at an accurate diagnosis. This practice shifts the focus from deterministic mechanics to probabilistic reasoning using Bayes' theorem, a cornerstone of evidence-based medicine. You will learn to quantitatively update your diagnostic certainty for traction alopecia by incorporating specific clinical findings, thereby honing the critical skill of navigating diagnostic uncertainty in a structured, logical manner .",
            "id": "4497960",
            "problem": "A clinician is evaluating a patient with suspected traction alopecia, a form of hair loss caused by chronic mechanical tension on the hair shaft. Suppose the clinician has established a pretest probability $p_{0}$ for traction alopecia of $0.33$ based on exposure history and distribution of hair loss. Two physical examination findings are then assessed:\n\n1. Presence of the fringe sign, defined as preservation of short hairs along the frontal or temporal hairline despite proximal recession. In a rigorously designed case-control study comparing traction alopecia to other causes of alopecia, the presence of the fringe sign had sensitivity $Se_{1} = 0.75$ and specificity $Sp_{1} = 0.95$ for traction alopecia.\n\n2. Presence of inflammatory signs (scale or pustules) within the area of hair loss, assessed as a binary test. In traction alopecia, test positivity (i.e., inflammation present) was observed with sensitivity $Se_{2} = 0.20$, while among non–traction alopecia cases, the test was negative (i.e., no inflammation) with specificity $Sp_{2} = 0.85$.\n\nOn examination of this patient, the fringe sign is present, and there is an absence of scale or pustules. Assume conditional independence of these findings given disease status and given non-disease status. Using Bayes’ theorem and the definitions of sensitivity and specificity, perform a sequential Bayesian update from the pretest probability $p_{0}$ to the post-test probability of traction alopecia after observing both findings (first, a positive fringe sign; second, a negative “inflammation present” test). Round your final post-test probability to four significant figures and express it as a decimal between $0$ and $1$ with no percent sign.",
            "solution": "The problem requires the calculation of the post-test probability of traction alopecia after observing two clinical findings, starting from a given pre-test probability. This will be accomplished by performing a sequential Bayesian update.\n\nLet $D$ be the event that the patient has traction alopecia. Let $D^c$ be the event that the patient does not have traction alopecia.\nLet $T_1$ be the event that the fringe sign is present (a positive test for Finding 1).\nLet $T_2$ be the event that inflammatory signs are present (a positive test for Finding 2). The absence of these signs corresponds to the event $T_2^c$.\n\nThe given information can be summarized as follows:\nPre-test probability of traction alopecia: $P(D) = p_0 = 0.33$.\nThe probability of not having traction alopecia is therefore: $P(D^c) = 1 - P(D) = 1 - 0.33 = 0.67$.\n\nFor Finding 1 (fringe sign):\nSensitivity: $Se_1 = P(T_1 | D) = 0.75$.\nSpecificity: $Sp_1 = P(T_1^c | D^c) = 0.95$.\nFrom the specificity, we can find the probability of a positive test in a non-diseased individual:\n$P(T_1 | D^c) = 1 - Sp_1 = 1 - 0.95 = 0.05$.\n\nFor Finding 2 (inflammatory signs):\nSensitivity: $Se_2 = P(T_2 | D) = 0.20$.\nSpecificity: $Sp_2 = P(T_2^c | D^c) = 0.85$.\nThe patient has an absence of inflammatory signs ($T_2^c$), so we need the probability of a negative test in a diseased individual:\n$P(T_2^c | D) = 1 - Se_2 = 1 - 0.20 = 0.80$.\n\nThe patient's examination reveals that the fringe sign is present ($T_1$) and inflammatory signs are absent ($T_2^c$). The problem states that these findings are conditionally independent given disease status.\n\nWe will perform a sequential Bayesian update.\n\n**Step 1: Update the probability based on the presence of the fringe sign ($T_1$).**\n\nWe need to calculate the posterior probability of traction alopecia given a positive fringe sign, $P(D|T_1)$. Using Bayes' theorem:\n$$P(D | T_1) = \\frac{P(T_1 | D) P(D)}{P(T_1)}$$\nThe denominator, $P(T_1)$, is the total probability of observing a positive fringe sign, which can be calculated using the law of total probability:\n$$P(T_1) = P(T_1 | D) P(D) + P(T_1 | D^c) P(D^c)$$\nSubstituting the given values:\n$$P(T_1) = (0.75)(0.33) + (0.05)(0.67)$$\n$$P(T_1) = 0.2475 + 0.0335 = 0.281$$\nThe numerator is the joint probability of having the disease and a positive test:\n$$P(T_1 \\cap D) = P(T_1 | D) P(D) = (0.75)(0.33) = 0.2475$$\nNow we can compute the posterior probability after the first test, which we will call $p_1$:\n$$p_1 = P(D | T_1) = \\frac{0.2475}{0.281}$$\nThis value, $p_1$, serves as the new prior probability for the second update.\n\n**Step 2: Update the probability based on the absence of inflammatory signs ($T_2^c$).**\n\nWe now calculate the final posterior probability, $P(D | T_1, T_2^c)$, using $p_1 = P(D|T_1)$ as the prior.\nBy Bayes' theorem:\n$$P(D | T_1, T_2^c) = \\frac{P(T_2^c | D, T_1) P(D | T_1)}{P(T_2^c | T_1)}$$\nThe problem states that the findings are conditionally independent given the disease status. This key assumption implies:\n$P(T_2^c | D, T_1) = P(T_2^c | D)$\n$P(T_2^c | D^c, T_1) = P(T_2^c | D^c)$\nThe formula for the final probability, $p_2$, becomes:\n$$p_2 = P(D | T_1, T_2^c) = \\frac{P(T_2^c | D) P(D | T_1)}{P(T_2^c | T_1)}$$\nThe denominator is calculated using the law of total probability, conditioned on $T_1$:\n$$P(T_2^c | T_1) = P(T_2^c | D, T_1) P(D | T_1) + P(T_2^c | D^c, T_1) P(D^c | T_1)$$\nApplying conditional independence:\n$$P(T_2^c | T_1) = P(T_2^c | D) P(D | T_1) + P(T_2^c | D^c) P(D^c | T_1)$$\nWe have $P(D|T_1) = p_1$ and $P(D^c|T_1) = 1 - p_1$. Substituting these expressions into the formula for $p_2$:\n$$p_2 = \\frac{P(T_2^c | D) p_1}{P(T_2^c | D) p_1 + P(T_2^c | D^c) (1 - p_1)}$$\nWe have the following probabilities:\n$P(T_2^c | D) = 1 - Se_2 = 0.80$\n$P(T_2^c | D^c) = Sp_2 = 0.85$\n$p_1 = \\frac{0.2475}{0.281}$\n$1 - p_1 = 1 - \\frac{0.2475}{0.281} = \\frac{0.281 - 0.2475}{0.281} = \\frac{0.0335}{0.281}$\n\nSubstituting these into the equation for $p_2$:\n$$p_2 = \\frac{(0.80) \\left(\\frac{0.2475}{0.281}\\right)}{(0.80) \\left(\\frac{0.2475}{0.281}\\right) + (0.85) \\left(\\frac{0.0335}{0.281}\\right)}$$\nThe common factor of $\\frac{1}{0.281}$ in the numerator and denominator can be cancelled:\n$$p_2 = \\frac{(0.80)(0.2475)}{(0.80)(0.2475) + (0.85)(0.0335)}$$\nLet's compute the terms:\nNumerator: $(0.80)(0.2475) = 0.198$.\nDenominator: $(0.80)(0.2475) + (0.85)(0.0335) = 0.198 + 0.028475 = 0.226475$.\n\nThus, the final post-test probability is:\n$$p_2 = \\frac{0.198}{0.226475} \\approx 0.8742689$$\nThe problem requires the final answer to be rounded to four significant figures.\nThe fifth significant figure is $6$, so we round up the fourth digit.\n$$p_2 \\approx 0.8743$$\nThis is the final post-test probability of traction alopecia.",
            "answer": "$$\\boxed{0.8743}$$"
        },
        {
            "introduction": "This advanced practice challenges you to synthesize biomechanical principles and clinical data into a dynamic, predictive tool. You will construct a computational model to simulate how hair follicle damage accumulates over time due to varying mechanical loads, while also accounting for the body's natural recovery processes. By implementing a data pipeline that generates a longitudinal risk score, you will engage with the concepts at the forefront of clinical research, learning how to translate mechanobiological hypotheses into a sophisticated model for personalized risk assessment .",
            "id": "4497933",
            "problem": "You are asked to formalize and implement a principled data-processing pipeline that aggregates daily mechanical traction profiles and outputs a final mechanical-risk score for traction alopecia at the end of a fixed horizon. The intent is to connect fundamental mechanobiology and basic kinetics to the algorithmic procedure. Your program must follow the requirements below and compute the risk scores for the provided test suite. The final outputs must be floats, one per test case, and printed in the exact format specified at the end.\n\nFundamental base and modeling constraints:\n- Micro-injury in soft tissue accumulates when local mechanical load exceeds a tolerance threshold. Below the threshold, no injury accrues. Above the threshold, the instantaneous injury production rate grows with the relative excess load. Use a general power-law growth above threshold to reflect nonlinear damage susceptibility observed in tissues.\n- Recovery of micro-injury over time follows first-order linear kinetics: the rate of healing at any moment is proportional to the current damage burden. This is a standard assumption in linear tissue recovery and is represented by a first-order ordinary differential equation (ODE).\n- Traction exposure is time-varying across a day and can be aggregated as the time integral of the instantaneous damage-production rate. Protective practices effectively reduce applied force multiplicatively, and local susceptibility weights scale the effective load at high-risk scalp zones.\n- A risk score must be a monotone, saturating mapping of the final cumulative damage to the unit interval. Use the unique, simplest continuously differentiable function whose log-odds are an affine function of the damage and which has a specified slope at its midpoint.\n\nDefinitions, parameters, and units to be used:\n- Each day consists of zero or more segments. Each segment is a quadruple $\\left(F, t, p, w\\right)$, where $F$ is force in Newtons (N), $t$ is duration in hours (h), $p$ is a protective factor in $\\left[0, 1\\right]$, and $w$ is a dimensionless susceptibility weight (nonnegative).\n- Preprocessing per segment:\n  - Clip $F$ below to $0$.\n  - Clip $t$ below to $0$.\n  - Clip $p$ into $\\left[0, 1\\right]$.\n  - Clip $w$ below to $0$.\n- Effective traction per segment: $F_{\\text{eff}} = F \\cdot (1 - p) \\cdot w$.\n- Damage production rate per segment at effective traction $F_{\\text{eff}}$ uses a power above a threshold:\n  - Threshold: $F_{\\text{th}} = 0.6 \\ \\mathrm{N}$.\n  - Exponent: $\\alpha = 2$.\n  - Instantaneous rate $r(F_{\\text{eff}})$ (in damage units per hour) is $0$ if $F_{\\text{eff}} \\le F_{\\text{th}}$ and otherwise grows as a power of the relative excess load; you must derive the explicit form consistent with the above constraints and units.\n- Daily damage is the time integral over all segments in that day, which reduces to a sum over segments of the instantaneous rate times the segment duration.\n- Inter-day recovery (healing) follows first-order linear kinetics with rate constant $k_{\\text{rec}} = 0.7 \\ \\mathrm{day}^{-1}$. Over one day with no new exposure, damage $D$ decays by a factor $e^{-k_{\\text{rec}}}$.\n- Initialize cumulative damage at day $0$ as $D_0 = 0$ and update across days $n = 1, 2, \\dots$ using the daily damage and one-day recovery interval.\n- Map the final cumulative damage $D$ after the last day to a unitless risk $R \\in \\left(0, 1\\right)$ via the unique saturating, monotone function whose log-odds are an affine function of $D$, with midpoint at $D_{50} = 3.0$ and slope parameter $\\beta = 1.1$ governing the steepness in damage units. You must derive and implement the explicit mapping consistent with these constraints.\n\nTest suite (a week is $7$ days; each day is a list of segments $\\left(F, t, p, w\\right)$). Units: $F$ in Newtons (N), $t$ in hours (h). If a day’s list is empty, that day has zero exposure.\n\n- Case A (sustained low sub-threshold load; expect low risk):\n  - $7$ days, each day has $\\left(0.3, 6, 0.2, 1.0\\right)$.\n\n- Case B (sustained high supra-threshold load; expect near-saturation risk):\n  - $7$ days, each day has $\\left(1.5, 8, 0.0, 1.2\\right)$.\n\n- Case C (moderate daily load; expect intermediate risk):\n  - $7$ days, each day has $\\left(1.2, 8, 0.3, 1.0\\right)$.\n\n- Case D (edge conditions with clipping, zero-exposure days, and multiple segments):\n  - Day $1$: $\\left(-0.5, 5, 0.5, 1.0\\right)$\n  - Day $2$: $\\left(0.7, 3, 1.2, 0.9\\right)$\n  - Day $3$: no segments\n  - Day $4$: $\\left(0.9, 4, -0.2, 1.1\\right)$ and $\\left(1.1, 2, 0.4, -0.5\\right)$\n  - Day $5$: $\\left(0.6, 6, 0.0, 1.0\\right)$\n  - Day $6$: $\\left(1.0, 1, 0.0, 1.0\\right)$\n  - Day $7$: $\\left(0.5, 10, 0.0, 1.5\\right)$\n\nImplementation requirements:\n- Derive the explicit mathematical expressions from the constraints above and implement them.\n- Compute the final risk $R$ after day $7$ for each case, using the same parameter values for all cases.\n- Numerical output requirements:\n  - Each test case produces a single float $R$ in $\\left(0, 1\\right)$.\n  - Round each $R$ to $4$ decimal places.\n  - Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, in the order $\\left[\\text{Case A}, \\text{Case B}, \\text{Case C}, \\text{Case D}\\right]$. For example: $\\left[\\text{resultA},\\text{resultB},\\text{resultC},\\text{resultD}\\right]$.",
            "solution": "The problem statement constitutes a request to construct a computational model for assessing the risk of traction alopecia based on a set of mechanobiological and kinetic principles. This requires the formal derivation of the governing mathematical equations from the provided constraints, followed by their implementation in a data-processing pipeline. We shall proceed by first validating the problem's integrity and then, upon confirmation of its validity, deriving the explicit formulae and constructing the solution algorithm.\n\n**Problem Validation**\n\nA critical preliminary step is to validate the problem statement according to the specified criteria.\n\n1.  **Givens Extraction**: The problem provides:\n    *   A conceptual framework for damage accumulation (threshold-based, power-law growth) and recovery (first-order kinetics).\n    *   Specific definitions for model entities: daily segments $(F, t, p, w)$, effective traction $F_{\\text{eff}}$, and a risk score $R$.\n    *   Explicit parameter values: force threshold $F_{\\text{th}} = 0.6 \\ \\mathrm{N}$, power-law exponent $\\alpha = 2$, recovery rate constant $k_{\\text{rec}} = 0.7 \\ \\mathrm{day}^{-1}$, risk function midpoint $D_{50} = 3.0$, and risk function slope parameter $\\beta = 1.1$.\n    *   A set of rules for preprocessing input data (clipping).\n    *   A defined sequence of operations: daily processing over a $7$-day horizon with initial damage $D_0 = 0$.\n    *   Four distinct test cases with specific traction profiles.\n\n2.  **Validation Assessment**:\n    *   **Scientific Grounding**: The model is a simplification but is grounded in established biophysical and kinetic principles. Threshold phenomena, power-law responses, and first-order decay are standard modeling constructs in physics, chemistry, and biology. The problem does not assert these as empirical fact but as the basis for a model, which is a scientifically valid approach.\n    *   **Well-Posedness**: The problem requires the derivation of two key functions: the damage rate and the risk score mapping. The constraints provided are sufficient for these derivations under standard interpretations common to the respective scientific fields (physics and statistics).\n        *   The damage rate's dependence on \"relative excess load\" is most reasonably formalized as a function of the dimensionless quantity $(F_{\\text{eff}} - F_{\\text{th}}) / F_{\\text{th}}$. The absence of a specified proportionality constant dictates, under the principle of parsimony, a leading constant of unity with appropriate units.\n        *   The risk score defined by an affine log-odds relationship is a standard logistic function, uniquely determined by the given midpoint and slope parameters.\n    *   **Completeness and Consistency**: The problem is self-contained. All necessary parameters are provided. The test cases include edge conditions (negative inputs, zero-exposure days) that are handled by the specified preprocessing rules, demonstrating internal consistency.\n    *   **Objectivity**: The problem is stated in precise, objective language.\n\n3.  **Verdict**: The problem is deemed **valid**. It is a well-posed, scientifically grounded computational modeling task that requires rigorous derivation and implementation.\n\n**Mathematical Formalization and Algorithmic Design**\n\nWe now derive the explicit equations and outline the computational algorithm.\n\n**1. Effective Traction, $F_{\\text{eff}}$**\nFor each segment, defined by a tuple $(F, t, p, w)$, the inputs are first preprocessed (clipped) to ensure they lie in their valid ranges: $F_c = \\max(0, F)$, $t_c = \\max(0, t)$, $p_c = \\text{clip}(p, 0, 1)$, $w_c = \\max(0, w)$.\nThe effective force is then calculated as:\n$$F_{\\text{eff}} = F_c \\cdot (1 - p_c) \\cdot w_c$$\n\n**2. Instantaneous Damage Rate, $r(F_{\\text{eff}})$**\nThe problem states that the instantaneous rate of injury production, $r$, is zero below a force threshold $F_{\\text{th}}$ and grows as a power $\\alpha$ of the relative excess load above it. The relative excess load is the dimensionless ratio of the force exceeding the threshold to the threshold itself. With the proportionality constant set to unity, the rate, in units of damage per hour, is:\n$$r(F_{\\text{eff}}) = \\begin{cases} \\left(\\frac{F_{\\text{eff}} - F_{\\text{th}}}{F_{\\text{th}}}\\right)^{\\alpha} & \\text{if } F_{\\text{eff}} > F_{\\text{th}} \\\\ 0 & \\text{if } F_{\\text{eff}} \\le F_{\\text{th}} \\end{cases}$$\nSubstituting the given parameters $F_{\\text{th}} = 0.6 \\ \\mathrm{N}$ and $\\alpha = 2$:\n$$r(F_{\\text{eff}}) = \\begin{cases} \\left(\\frac{F_{\\text{eff}} - 0.6}{0.6}\\right)^{2} & \\text{if } F_{\\text{eff}} > 0.6 \\ \\mathrm{N} \\\\ 0 & \\text{if } F_{\\text{eff}} \\le 0.6 \\ \\mathrm{N} \\end{cases}$$\n\n**3. Daily Damage Production, $D_{\\text{prod},n}$**\nThe total damage produced on day $n$ is the sum of damages from all segments within that day. For a segment $i$ with constant effective force $F_{\\text{eff},i}$ and duration $t_i$, the damage produced is $r(F_{\\text{eff},i}) \\cdot t_i$. Thus, for a day with $M_n$ segments:\n$$D_{\\text{prod},n} = \\sum_{i=1}^{M_n} r(F_{\\text{eff},i}) \\cdot t_i$$\n\n**4. Cumulative Damage Dynamics**\nThe cumulative damage, $D_n$, at the end of day $n$, evolves based on recovery from the previous day's damage, $D_{n-1}$, and the new damage produced during day $n$. The recovery follows first-order kinetics, $\\frac{dD}{dt} = -k_{\\text{rec}}D$. Over a one-day interval, this results in a multiplicative decay factor of $e^{-k_{\\text{rec}}}$. The recurrence relation for cumulative damage is:\n$$D_n = D_{n-1} \\cdot e^{-k_{\\text{rec}}} + D_{\\text{prod},n}$$\nWith initial condition $D_0 = 0$ and $k_{\\text{rec}} = 0.7 \\ \\mathrm{day}^{-1}$.\n\n**5. Final Risk Score, $R(D)$**\nThe final risk score $R$ is a mapping of the final cumulative damage, $D_{\\text{final}}$, to the interval $(0, 1)$. The log-odds, or logit, of $R$ is an affine function of $D_{\\text{final}}$:\n$$\\ln\\left(\\frac{R}{1-R}\\right) = m \\cdot D_{\\text{final}} + c$$\nThe parameters are specified as a midpoint $D_{50} = 3.0$ and a slope parameter $\\beta = 1.1$. At the midpoint, $R=0.5$, which implies $\\ln(1) = 0$. The standard interpretation is that $\\beta$ is the slope of the affine function, $m=\\beta$.\n$$0 = \\beta \\cdot D_{50} + c \\implies c = -\\beta D_{50}$$\nThus, the equation becomes:\n$$\\ln\\left(\\frac{R}{1-R}\\right) = \\beta(D_{\\text{final}} - D_{50})$$\nSolving for $R$ yields the logistic function:\n$$R(D_{\\text{final}}) = \\frac{e^{\\beta(D_{\\text{final}} - D_{50})}}{1 + e^{\\beta(D_{\\text{final}} - D_{50})}} = \\frac{1}{1 + e^{-\\beta(D_{\\text{final}} - D_{50})}}$$\nSubstituting the given parameters $\\beta = 1.1$ and $D_{50} = 3.0$:\n$$R(D_{\\text{final}}) = \\frac{1}{1 + e^{-1.1 \\cdot (D_{\\text{final}} - 3.0)}}$$\n\nThe overall algorithm proceeds by initializing cumulative damage to zero, then iterating through each of the seven days. In each daily step, it first applies the recovery decay factor and then calculates and adds the newly produced damage. After seven days, the final cumulative damage is passed to the risk score function to obtain the result, which is then rounded. This process is repeated for each test case.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Main function to orchestrate the risk score calculation for all test cases.\n    \"\"\"\n\n    # Define the fundamental parameters for the model.\n    # All units are consistent with the problem statement (N, h, day).\n    params = {\n        'F_th': 0.6,    # Force threshold in Newtons (N)\n        'alpha': 2,       # Power-law exponent (dimensionless)\n        'k_rec': 0.7,     # Recovery rate constant in day^-1\n        'D_50': 3.0,      # Damage midpoint for risk function\n        'beta': 1.1,      # Slope parameter for risk function\n    }\n\n    # Define the test suite. Each case is a list of days, and each day\n    # is a list of segments (F, t, p, w).\n    test_cases = {\n        \"Case A\": [\n            [(0.3, 6, 0.2, 1.0)]\n        ] * 7,\n        \"Case B\": [\n            [(1.5, 8, 0.0, 1.2)]\n        ] * 7,\n        \"Case C\": [\n            [(1.2, 8, 0.3, 1.0)]\n        ] * 7,\n        \"Case D\": [\n            [(-0.5, 5, 0.5, 1.0)],         # Day 1\n            [(0.7, 3, 1.2, 0.9)],         # Day 2\n            [],                           # Day 3\n            [(0.9, 4, -0.2, 1.1), (1.1, 2, 0.4, -0.5)], # Day 4\n            [(0.6, 6, 0.0, 1.0)],         # Day 5\n            [(1.0, 1, 0.0, 1.0)],         # Day 6\n            [(0.5, 10, 0.0, 1.5)]         # Day 7\n        ]\n    }\n\n    results = []\n    # The order of processing is fixed to match the required output format.\n    case_order = [\"Case A\", \"Case B\", \"Case C\", \"Case D\"]\n    for case_name in case_order:\n        daily_segments_list = test_cases[case_name]\n        risk_score = calculate_risk_score(daily_segments_list, params)\n        results.append(risk_score)\n\n    # Format the final output as specified.\n    print(f\"[{','.join(map(str, results))}]\")\n\ndef calculate_risk_score(daily_segments_list, params):\n    \"\"\"\n    Calculates the final traction alopecia risk score for a given schedule.\n\n    Args:\n        daily_segments_list (list): A list of lists, where each inner list\n                                    represents a day and contains segment tuples.\n        params (dict): A dictionary containing the model parameters.\n\n    Returns:\n        float: The final risk score, rounded to 4 decimal places.\n    \"\"\"\n    F_th = params['F_th']\n    alpha = params['alpha']\n    k_rec = params['k_rec']\n    D_50 = params['D_50']\n    beta = params['beta']\n\n    # Pre-calculate the multi-day recovery factor from the rate constant.\n    recovery_factor = np.exp(-k_rec)\n    cumulative_damage = 0.0\n\n    # Iterate through the time horizon day by day.\n    for day_segments in daily_segments_list:\n        # 1. Apply inter-day recovery to the existing damage burden.\n        cumulative_damage *= recovery_factor\n\n        # 2. Calculate and aggregate new damage produced during the current day.\n        daily_damage_production = 0.0\n        for segment in day_segments:\n            F, t, p, w = segment\n\n            # Preprocessing: Clip inputs to their valid physical ranges.\n            F_c = max(0.0, F)\n            t_c = max(0.0, t)\n            p_c = max(0.0, min(1.0, p))\n            w_c = max(0.0, w)\n\n            # Calculate the effective traction force for the segment.\n            F_eff = F_c * (1.0 - p_c) * w_c\n\n            # Calculate the instantaneous damage rate based on the effective force.\n            # Damage only occurs if the effective force exceeds the threshold.\n            rate = 0.0\n            if F_eff > F_th:\n                # Power-law growth of damage rate with relative excess load.\n                relative_excess_load = (F_eff - F_th) / F_th\n                rate = relative_excess_load ** alpha\n\n            # Add the damage from this segment to the daily total.\n            daily_damage_production += rate * t_c\n\n        # 3. Update the cumulative damage with the day's production.\n        cumulative_damage += daily_damage_production\n\n    # The final damage is the cumulative damage after the last day.\n    final_damage = cumulative_damage\n\n    # 4. Map the final cumulative damage to a saturating risk score (0, 1).\n    # This uses the logistic function as derived from the log-odds constraint.\n    exponent = -beta * (final_damage - D_50)\n    risk = 1.0 / (1.0 + np.exp(exponent))\n\n    return round(risk, 4)\n\nsolve()\n```"
        }
    ]
}
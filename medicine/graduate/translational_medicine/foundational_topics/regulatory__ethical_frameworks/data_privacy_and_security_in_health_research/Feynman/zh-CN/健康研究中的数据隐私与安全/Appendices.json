{
    "hands_on_practices": [
        {
            "introduction": "在共享健康数据之前，研究人员必须对其进行去标识化以保护患者隐私，这是HIPAA等法规的核心原则。$k$-匿名化是一种基础技术，它确保每条记录在准标识符上至少与其他 $k-1$ 条记录无法区分。这项练习 () 提供了应用该原则的实践机会，挑战您在通过泛化或抑制来增强隐私（增加 $k$）与最小化信息损失以保留数据效用之间做出关键权衡。",
            "id": "5004244",
            "problem": "一个转化医学团队正在准备一个符合《健康保险流通与责任法案》(HIPAA) 的数据集，用于多中心分析。准标识符包括年龄、三位数邮政编码和性别。该数据集当前被划分为多个等价类（具有相同准标识符值的记录集合），其观察到的规模为 $\\{2,3,5,8\\}$，总计 $18$ 条记录。该团队的目标是在最小化信息损失的同时，满足目标 $k=5$ 的 $k$-匿名性。\n\n此任务的基础原理：\n- 在 $k$-匿名性中，每个等价类必须至少包含 $k$ 条记录，这将每条记录的重新识别风险上限限定为 $1/k$。\n- 准标识符的泛化会粗化其值（例如，将年龄泛化为范围，或将邮政编码泛化为更广泛的区域），从而合并等价类。当两个大小分别为 $a$ 和 $b$ 的不相交等价类通过泛化合并时，产生的新类大小为 $a+b$。\n- 抑制会从数据集中删除整条记录。\n\n将此数据集上的信息损失泛函 $L$ 定义为被更改记录的加权分数，其中更改包括泛化或抑制：\n$$\nL \\;=\\; \\alpha \\cdot \\frac{\\text{number of generalized records}}{18} \\;+\\; 1 \\cdot \\frac{\\text{number of suppressed records}}{18},\n$$\n其中 $\\alpha=\\frac{2}{5}$ 反映了泛化的成本低于抑制。泛化成本适用于任何被合并的等价类中的所有记录；抑制成本适用于每条被删除的记录。您可以通过泛化合并任意组合的等价类，也可以抑制任意数量的记录，但前提是必须实现 $k=5$-匿名性。\n\n任务：\n1. 根据 $k$-匿名性的基本原理，计算当前数据集的 $k$ 值，其等价类规模为 $\\{2,3,5,8\\}$。\n2. 提出一个具体的泛化和/或抑制操作序列，以在上面定义的泛函 $L$ 下实现 $k=5$-匿名性并使信息损失最小化。从所述的基本原理出发，论证为什么您的选择在所有可行策略中能使 $L$ 最小化。\n3. 报告您的最优策略所能达到的 $L$ 的最小值。将 $L$ 的最终数值答案表示为单个精确分数。不要包含任何单位。",
            "solution": "在尝试解答之前，将对问题进行验证。\n\n### 步骤 1：提取已知条件\n- **准标识符**：年龄、三位数邮政编码、性别。\n- **初始等价类规模**：$\\{2, 3, 5, 8\\}$。\n- **总记录数**：$18$。\n- **目标 $k$-匿名性**：$k=5$。\n- **$k$-匿名性定义**：每个等价类必须至少有 $k$ 条记录。重新识别风险的上限为 $1/k$。\n- **操作**：\n    - **泛化**：将大小为 $a$ 和 $b$ 的不相交等价类合并成一个大小为 $a+b$ 的新类。\n    - **抑制**：从数据集中删除整条记录。\n- **信息损失泛函**：$L = \\alpha \\cdot \\frac{\\text{number of generalized records}}{18} + 1 \\cdot \\frac{\\text{number of suppressed records}}{18}$。\n- **权重因子**：$\\alpha = \\frac{2}{5}$。\n- **成本应用**：泛化成本适用于任何被合并的等价类中的所有记录。抑制成本适用于每条被删除的记录。\n- **任务**：\n    1.  计算数据集当前的 $k$ 值。\n    2.  提出一个操作序列以实现 $k=5$-匿名性，并使信息损失 $L$ 最小。\n    3.  报告 $L$ 的最小值。\n\n### 步骤 2：使用提取的已知条件进行验证\n根据验证标准对问题进行评估。\n- **科学依据**：该问题基于数据隐私和计算机科学领域中已确立并形式化的 $k$-匿名性概念。等价类、泛化、抑制和信息损失度量的定义都是标准且科学合理的。\n- **适定性**：该问题是一个定义明确的优化任务。它提供了一个初始状态（类规模 $\\{2, 3, 5, 8\\}$）、一组允许的变换（泛化、抑制）、一个明确的目标（实现 $k=5$-匿名性）以及一个需要最小化的特定泛函 ($L$)。预期存在一个唯一的 $L$ 最小值。\n- **客观性**：该问题使用精确、无歧义的数学和技术语言陈述。它不含主观论断。\n\n该问题没有任何缺陷。它不是科学上不合理、不完整、自相矛盾、不切实际或不适定的。总记录数与各等价类规模之和（$2+3+5=18$）一致。该问题是有效的。\n\n### 步骤 3：结论与行动\n该问题是有效的。将提供解答。\n\n### 解答\n\n该问题要求三部分内容：当前的 $k$-匿名性水平、在最小化给定损失泛函 $L$ 的同时实现 $k=5$-匿名性的最优策略，以及 $L$ 的最小值。\n\n**1. 数据集当前的 $k$ 值**\n\n$k$-匿名性原则要求数据集中的每个等价类必须至少包含 $k$ 条记录。因此，给定数据集的 $k$ 值由最小等价类的规模决定。\n初始等价类规模集合为 $\\{2, 3, 5, 8\\}$。\n该集合中的最小规模是 $2$。\n因此，该数据集当前满足 $2$-匿名性。当前的 $k$ 值为 $2$。\n\n**2. 实现 $k=5$-匿名性的最优策略**\n\n目标是实现 $k=5$-匿名性。这意味着最终数据集中的每个等价类都必须有至少为 $5$ 的规模。初始的类规模为 $\\{2, 3, 5, 8\\}$。\n规模为 $5$ 和 $8$ 的类已经满足条件。规模为 $2$ 和 $3$ 的类则不满足。我们将这些类表示为 $C_2$、$C_3$、$C_5$ 和 $C_8$。我们的任务是修改数据集，使得所有包含来自原始 $C_2$ 和 $C_3$ 记录的最终等价类的规模至少为 $5$。这必须在最小化信息损失泛函 $L$ 的前提下完成：\n$$\nL = \\frac{2}{5} \\cdot \\frac{N_{gen}}{18} + 1 \\cdot \\frac{N_{sup}}{18}\n$$\n其中 $N_{gen}$ 是泛化记录数，$N_{sup}$ 是抑制记录数。总记录数 $N = 18$。每条记录的泛化成本是 $\\frac{\\alpha}{N} = \\frac{2/5}{18} = \\frac{2}{90} = \\frac{1}{45}$。每条记录的抑制成本是 $\\frac{1}{N} = \\frac{1}{18}$。由于 $\\frac{1}{45}  \\frac{1}{18}$，对于每条受影响的记录，泛化是比抑制成本更低的操作。\n\n为达到合规性，我们必须处理属于不合规类 $C_2$ 和 $C_3$ 的 $2+3=5$ 条记录。我们分析可行的策略。\n\n**策略 1：仅使用抑制**\n要仅使用抑制来处理不合规的类 $C_2$ 和 $C_3$，我们必须删除它们内部的所有记录。\n- 抑制 $C_2$ 中的 $2$ 条记录。\n- 抑制 $C_3$ 中的 $3$ 条记录。\n被抑制的记录数为 $N_{sup} = 2+3=5$。被泛化的记录数为 $N_{gen} = 0$。剩下的类是 $C_5$ 和 $C_8$，它们是合规的。\n损失为：\n$$\nL_1 = \\frac{2}{5} \\cdot \\frac{0}{18} + 1 \\cdot \\frac{5}{18} = \\frac{5}{18}\n$$\n\n**策略 2：仅使用泛化**\n我们可以使用泛化来合并非合规类，形成一个新的合规类。\nA) **将不合规的类相互合并**：我们合并 $C_2$ 和 $C_3$。\n- 新的类规模为 $2+3=5$。这个新类是合规的，因为其规模 $\\ge 5$。\n- 等价类集合变为 $\\{5, 5, 8\\}$。所有类都是合规的。\n- 被泛化的记录是原始 $C_2$ 和 $C_3$ 中的记录。所以，$N_{gen} = 2+3=5$。被抑制的记录数为 $N_{sup}=0$。\n- 损失为：\n$$\nL_2 = \\frac{2}{5} \\cdot \\frac{5}{18} + 1 \\cdot \\frac{0}{18} = \\frac{2}{18} = \\frac{1}{9}\n$$\n\nB) **将不合规的类与合规的类合并**：这将涉及 $C_5$ 或 $C_8$ 中的记录，从而增加被泛化的记录数。例如，如果我们合并 $C_2$、$C_3$ 和 $C_5$：\n- 新的类规模为 $2+3+5=10$。剩下的类是 $C_8$。等价类集合为 $\\{10, 8\\}$，这是合规的。\n- 被泛化的记录数为 $N_{gen} = 2+3+5=10$。$N_{sup}=0$。\n- 损失为：\n$$\nL_3 = \\frac{2}{5} \\cdot \\frac{10}{18} + 1 \\cdot \\frac{0}{18} = \\frac{4}{18} = \\frac{2}{9}\n$$\n\n**策略 3：混合策略**\n我们可以混合使用抑制和泛化。例如，为了处理 $C_2$ 和 $C_3$，我们可以抑制一个类，并将另一个类与一个合规的类进行泛化。例如，抑制 $C_2$ 并将 $C_3$ 与 $C_5$ 合并。\n- 抑制 $C_2$ 中的 $2$ 条记录。所以 $N_{sup}=2$。\n- 合并 $C_3$ 和 $C_5$。这形成一个规模为 $3+5=8$ 的新类。这些记录被泛化，所以 $N_{gen}=8$。\n- 最终的类为 $\\{8, 8\\}$。这是合规的。\n- 损失为：\n$$\nL_4 = \\frac{2}{5} \\cdot \\frac{8}{18} + 1 \\cdot \\frac{2}{18} = \\frac{16/5}{18} + \\frac{2}{18} = \\frac{16/5 + 10/5}{18} = \\frac{26/5}{18} = \\frac{26}{90} = \\frac{13}{45}\n$$\n\n**比较与最小性论证**\n让我们比较计算出的损失：\n- $L_1 = \\frac{5}{18} = \\frac{25}{90}$\n- $L_2 = \\frac{1}{9} = \\frac{10}{90}$\n- $L_3 = \\frac{2}{9} = \\frac{20}{90}$\n- $L_4 = \\frac{13}{45} = \\frac{26}{90}$\n\n这些策略中的最小损失是 $L_2 = \\frac{1}{9}$。\n\n为了从基本原理出发论证其最小性，我们观察到以下几点：\n1.  有且仅有 $5$ 条记录（在 $C_2$ 和 $C_3$ 中）位于不合规的类中。这 $5$ 条记录是必须被更改（通过泛化或抑制）的最小记录集合。\n2.  每条记录的抑制成本（$\\frac{1}{18}$）大于每条记录的泛化成本（$\\frac{1}{45}$）。因此，对于任何必须被更改的记录，最优策略应优先选择泛化而非抑制。\n3.  不合规类的规模之和为 $2+3=5$。这个总和恰好等于目标 k-匿名性水平 $k=5$。这使得我们可以采用一种策略，通过一次合并操作处理所有不合规的记录，从而产生一个规模为 $5$ 的新类，该类是合规的。这个策略就是**策略 2A**：合并 $C_2$ 和 $C_3$。\n4.  该策略使用成本最低的更改方法（泛化）更改了最少数量的必要记录（$5$ 条）。任何其他策略都是次优的，原因如下之一：\n    - 它使用了抑制，而抑制的单位记录成本更高（例如，$L_1, L_4$）。\n    - 它在泛化中包含了来自已经合规的类（$C_5, C_8$）的记录，不必要地增加了 $N_{gen}$，从而增加了总损失（例如，$L_3$）。\n\n因此，最优策略是合并规模为 $2$ 的等价类和规模为 $3$ 的等价类。这将创建一个规模为 $5$ 的新等价类。最终的等价类集合的规模将为 $\\{5, 5, 8\\}$，完全满足 $5$-匿名性。\n\n**3. $L$ 的最小值**\n\n如上所述，最优策略是合并规模为 $2$ 和 $3$ 的类。这涉及泛化 $5$ 条记录和抑制 $0$ 条记录。最小信息损失 $L_{min}$ 为：\n$$\nL_{min} = \\frac{2}{5} \\cdot \\frac{5}{18} + \\frac{0}{18} = \\frac{2}{18} = \\frac{1}{9}\n$$\n要求将该值表示为单个精确分数。",
            "answer": "$$\\boxed{\\frac{1}{9}}$$"
        },
        {
            "introduction": "虽然$k$-匿名化很直观，但它可能易受复杂攻击的影响。差分隐私（DP）提供了一种更强大、基于数学的隐私保障。拉普拉斯机制是DP的基石，它通过添加精确校准的噪声来实现查询结果的私有发布。这项练习 () 将引导您从第一性原理出发，推导该机制的校准过程，从而巩固您对隐私参数 $\\epsilon$ 和数据敏感度 $\\Delta f$ 如何决定保护个人所需噪声量的理解。",
            "id": "5004326",
            "problem": "一个转化医学研究团队正准备公开发布一个根据《健康保险流通与责任法案》（Health Insurance Portability and Accountability Act, HIPAA）的规定，从电子健康记录中计算出的标量摘要统计量。为了减轻重识别风险，同时保证下游研究的可用性，他们决定在差分隐私（Differential Privacy, DP）框架内实现Laplace机制。该团队将数据库的邻近性建模为增加或删除单一个体的记录，并使用$\\epsilon$-差分隐私的标准定义：对于任何一对邻近数据集$D$和$D'$以及任何可测的输出集合$S$，一个随机化机制$\\mathcal{M}$满足\n$$\n\\Pr[\\mathcal{M}(D)\\in S] \\leq \\exp(\\epsilon)\\,\\Pr[\\mathcal{M}(D')\\in S].\n$$\n他们将发布一个标量查询$f(D)$，该查询通过添加来自以$0$为中心、尺度参数为$b$的Laplace分布的噪声进行扰动，记作$X \\sim \\mathrm{Laplace}(0,b)$，输出为$f(D)+X$。该查询的全局敏感度定义为\n$$\n\\Delta f \\equiv \\sup_{D,D'} |f(D)-f(D')|,\n$$\n其中上确界是在指定的邻近性概念下，取遍所有邻近数据集。\n\n从上述$\\epsilon$-差分隐私的核心定义以及Laplace分布的概率密度函数\n$$\np_{X}(x)=\\frac{1}{2b}\\exp\\!\\left(-\\frac{|x|}{b}\\right),\n$$\n出发，推导尺度参数$b$必须满足的，以$\\Delta f$和$\\epsilon$表示的不等式，以使Laplace机制对标量查询$f$满足$\\epsilon$-差分隐私。然后，在假设该机制为满足隐私约束而进行最小化校准的条件下，计算当$\\Delta f=2$和$\\epsilon=0.5$时$b$的精确值。请提供$b$的最终精确数值（无四舍五入）。",
            "solution": "该问题陈述经评估有效。它具有科学依据、问题定义良好、客观、完整且一致。它提出了差分隐私领域的一个标准问题，为进行严格推导和后续计算提供了所有必要的定义和数值。\n\n目标是推导满足$\\epsilon$-差分隐私所需的Laplace尺度参数$b$的条件，然后计算在给定参数下其最小值。\n\n随机化机制$\\mathcal{M}$接受一个数据库$D$并输出标量查询$f(D)$的一个扰动版本。输出由$\\mathcal{M}(D) = f(D) + X$给出，其中噪声$X$是一个从均值为$0$、尺度参数为$b$的Laplace分布中抽取的随机变量，记作$X \\sim \\mathrm{Laplace}(0,b)$。$X$的概率密度函数（PDF）为$p_X(x) = \\frac{1}{2b}\\exp\\left(-\\frac{|x|}{b}\\right)$。\n\n设$y$为机制的一个可能输出。当输入数据库为$D$时，观察到输出$y$的概率密度由噪声$X$的概率密度函数经真实查询结果$f(D)$平移后得到。设此条件概率密度函数为$p(y|D)$。\n$$\np(y|D) = p_X(y - f(D)) = \\frac{1}{2b}\\exp\\left(-\\frac{|y - f(D)|}{b}\\right)\n$$\n类似地，对于一个邻近数据库$D'$，其输出的概率密度函数为：\n$$\np(y|D') = p_X(y - f(D')) = \\frac{1}{2b}\\exp\\left(-\\frac{|y - f(D')|}{b}\\right)\n$$\n$\\epsilon$-差分隐私的条件规定，对于任何一对邻近数据集$D$和$D'$，以及任何可测的输出集合$S$，以下不等式必须成立：\n$$\n\\Pr[\\mathcal{M}(D)\\in S] \\leq \\exp(\\epsilon)\\,\\Pr[\\mathcal{M}(D')\\in S]\n$$\n输出落入集合$S$的概率通过在该集合上对相应的概率密度函数进行积分得到。\n$$\n\\Pr[\\mathcal{M}(D)\\in S] = \\int_{y \\in S} p(y|D) \\, dy\n$$\n为了满足隐私定义，只需证明对于所有可能的输出$y$，概率密度的比值是有界的。让我们分析这个比值：\n$$\n\\frac{p(y|D)}{p(y|D')} = \\frac{\\frac{1}{2b}\\exp\\left(-\\frac{|y - f(D)|}{b}\\right)}{\\frac{1}{2b}\\exp\\left(-\\frac{|y - f(D')|}{b}\\right)} = \\exp\\left(\\frac{|y - f(D')| - |y - f(D)|}{b}\\right)\n$$\n我们可以使用反三角不等式来界定指数中的项，该不等式表明，对于任意实数$u$和$v$，$|u| - |v| \\le |u - v|$。令$u = y - f(D')$和$v = y - f(D)$。则：\n$$\n|y - f(D')| - |y - f(D)| \\le |(y - f(D')) - (y - f(D))| = |f(D) - f(D')|\n$$\n查询$f$的全局敏感度，记为$\\Delta f$，定义为在所有邻近数据集对上该差值的最大可能值：\n$$\n\\Delta f = \\sup_{D,D'} |f(D)-f(D')|\n$$\n因此，我们有不等式：\n$$\n|y - f(D')| - |y - f(D)| \\le |f(D) - f(D')| \\le \\Delta f\n$$\n将此界限代回密度比值的表达式中：\n$$\n\\frac{p(y|D)}{p(y|D')} \\le \\exp\\left(\\frac{\\Delta f}{b}\\right)\n$$\n这个不等式对任何输出$y$都成立。现在，我们可以考虑任何可测集$S$的概率：\n$$\n\\Pr[\\mathcal{M}(D)\\in S] = \\int_{S} p(y|D) \\, dy \\le \\int_{S} \\exp\\left(\\frac{\\Delta f}{b}\\right) p(y|D') \\, dy\n$$\n由于$\\exp\\left(\\frac{\\Delta f}{b}\\right)$相对于积分变量$y$是一个常数，它可以从积分中提出：\n$$\n\\Pr[\\mathcal{M}(D)\\in S] \\le \\exp\\left(\\frac{\\Delta f}{b}\\right) \\int_{S} p(y|D') \\, dy = \\exp\\left(\\frac{\\Delta f}{b}\\right) \\Pr[\\mathcal{M}(D')\\in S]\n$$\n为满足$\\epsilon$-差分隐私的定义，因子$\\exp\\left(\\frac{\\Delta f}{b}\\right)$必须小于或等于$\\exp(\\epsilon)$：\n$$\n\\exp\\left(\\frac{\\Delta f}{b}\\right) \\le \\exp(\\epsilon)\n$$\n由于指数函数$g(z) = \\exp(z)$对于实数$z$是严格递增的，我们可以对两边取自然对数，这等同于直接比较指数：\n$$\n\\frac{\\Delta f}{b} \\le \\epsilon\n$$\n这就是尺度参数$b$必须满足的不等式。由于$b$和$\\epsilon$都是正量，我们可以重新整理这个不等式来表示$b$的一个下界：\n$$\nb \\ge \\frac{\\Delta f}{\\epsilon}\n$$\n问题要求在假设机制是“最小化校准”的情况下$b$的精确值。这意味着我们应该选择满足隐私约束的最小可能的$b$值，这对应于等号成立的情况。\n$$\nb = \\frac{\\Delta f}{\\epsilon}\n$$\n给定值为$\\Delta f = 2$和$\\epsilon = 0.5$。将这些值代入$b$的方程中：\n$$\nb = \\frac{2}{0.5} = \\frac{2}{1/2} = 4\n$$\n所需的尺度参数为$b=4$。",
            "answer": "$$\\boxed{4}$$"
        },
        {
            "introduction": "差分隐私的威力远不止于简单的查询，它已扩展到复杂的机器学习模型中。差分隐私随机梯度下降（DP-SGD）是在敏感数据上训练模型的标准方法，为整个建模过程提供隐私保障。这项高级练习 () 模拟了一个真实的研究场景，您必须为一个使用DP-SGD训练的模型计算最终的隐私预算 $(\\epsilon, \\delta)$。您将综合运用隐私放大和Rényi差分隐私等关键概念，来追踪和累积数千个训练步骤中的隐私损失。",
            "id": "5004279",
            "problem": "一个多机构合作的转化医学研究试图开发一个逻辑回归模型，利用从电子健康记录（EHR）中提取的特征来预测一个二元健康结果（例如，$30$天再入院率）。为了根据《健康保险流通与责任法案》（HIPAA）限制再识别风险，研究人员使用差分隐私随机梯度下降（DP-SGD）来训练模型。该方法在每次迭代中计算每个样本的梯度，将其裁剪到一个$\\ell_{2}$范数界限内，在一个小批量中聚合它们，并且只发布一个带噪声的平均梯度。\n\n数据集中包含 $N = 102{,}400$ 个个体。训练使用大小为 $b = 256$ 的不相交小批量，共进行 $E = 10$ 轮。裁剪范数为 $C = 1.0$。在每次迭代中，将噪声乘数为 $\\sigma = 2.5$ 的高斯噪声加到裁剪后梯度的总和上，然后除以批量大小以形成平均值。假设使用标准的$(\\epsilon,\\delta)$-差分隐私概念；使用 Rényi 差分隐私（RDP）来组合多次迭代的隐私损失；对于小批量选择，使用通过子采样实现的隐私放大效应，采样率为 $q = b/N$；并且对于小的 $q$，根据 $q$、$\\sigma$ 和 Rényi 阶数 $\\alpha$ 证明采样高斯机制每次迭代的 RDP 的主阶近似是合理的。然后，从这些基本定义和事实出发（不假设任何预先推导的核算公式），通过对 $\\alpha  1$ 进行优化，推导出在固定 $\\delta = 10^{-6}$ 时可达到的最紧的 $\\epsilon$ 的解析表达式，并计算在给定训练配置下的其数值。\n\n将最终的 $\\epsilon$ 四舍五入到三位有效数字。将答案表示为一个无单位的实数。",
            "solution": "该问题陈述具有科学依据，是适定、客观的，并包含了推导出唯一解所需的所有信息。所提供的参数对于采用差分隐私随机梯度下降（DP-SGD）的研究来说是一致且现实的。因此，该问题被认为是有效的。\n\n确定隐私损失参数 $\\epsilon$ 的过程包括三个主要阶段：\n1.  确定每次迭代的 Rényi 差分隐私（RDP）保证，同时考虑通过子采样实现的隐私放大效应。\n2.  使用 RDP 的组合性质，将所有训练步骤中每次迭代的隐私损失进行组合。\n3.  将总的 RDP 保证转换为标准的 $(\\epsilon, \\delta)$-差分隐私保证，并通过对 Rényi 阶数 $\\alpha$ 进行优化，找到 $\\epsilon$ 的最紧上界。\n\n首先，我们从问题陈述中定义并计算相关参数：\n- 个体总数：$N = 102{,}400$。\n- 小批量大小：$b = 256$。\n- 训练轮数：$E = 10$。\n- 单样本梯度 $\\ell_{2}$ 范数裁剪界限：$C = 1.0$。\n- 噪声乘数：$\\sigma = 2.5$。\n- 目标失效概率：$\\delta = 10^{-6}$。\n\n小批量的采样率是批量大小与数据集大小的比率：\n$$q = \\frac{b}{N} = \\frac{256}{102{,}400} = \\frac{1}{400} = 0.0025$$\n总的训练迭代次数（梯度更新次数）是训练轮数乘以每轮的批量数：\n$$T = E \\times \\frac{N}{b} = 10 \\times \\frac{102{,}400}{256} = 10 \\times 400 = 4000$$\n\n**1. 每次迭代的 Rényi 差分隐私 (RDP)**\n\nDP-SGD 的每一步都涉及将一个机制应用于一个随机子采样的小批量。核心机制是高斯机制。对于一个 $\\ell_2$-敏感度为 $\\Delta_2$ 的函数，带有噪声 $\\mathcal{N}(0, s^2 \\mathbf{I})$ 的高斯机制提供 $(\\alpha, \\frac{\\alpha \\Delta_2^2}{2 s^2})$-RDP。在我们的案例中，我们计算的是裁剪后梯度的总和。改变大小为 $N$ 的数据集中的一个个体，最多只能改变总和中的一个梯度。由于每个单样本梯度都被裁剪为 $\\ell_2$ 范数最多为 $C$，因此裁剪后梯度总和的 $\\ell_2$-敏感度为 $C$。问题陈述指出，将噪声乘数为 $\\sigma$ 的高斯噪声加到这个总和上。这意味着噪声的标准差是 $\\sigma C$。因此，底层的高斯机制（在考虑子采样之前）提供 $(\\alpha, \\epsilon_G(\\alpha))$-RDP，其中：\n$$\\epsilon_G(\\alpha) = \\frac{\\alpha C^2}{2(\\sigma C)^2} = \\frac{\\alpha}{2\\sigma^2}$$\n这个机制不是应用于完整的数据集，而是应用于一个小的、随机采样的小批量。这被称为通过子采样实现的隐私放大效应。采样高斯机制（采样率为 $q$，无放回）的 RDP 上界为：\n$$\\epsilon_{\\text{step}}(\\alpha) \\le \\frac{1}{\\alpha-1} \\log \\left( 1 + q^2 \\binom{\\alpha}{2} \\left( \\exp\\left(\\frac{C^2}{(\\sigma C)^2}\\right) - 1 \\right) \\right) = \\frac{1}{\\alpha-1} \\log \\left( 1 + q^2 \\frac{\\alpha(\\alpha-1)}{2} \\left( \\exp\\left(\\frac{1}{\\sigma^2}\\right) - 1 \\right) \\right)$$\n按照要求，对于小的 $q$ 和/或大的 $\\sigma$，我们可以使用主阶泰勒近似。对数内的项很小，所以我们使用 $\\ln(1+x) \\approx x$。此外，对于大的 $\\sigma$，$\\exp(1/\\sigma^2) - 1 \\approx 1/\\sigma^2$。这给出了主阶近似：\n$$\\epsilon_{\\text{step}}(\\alpha) \\approx \\frac{1}{\\alpha-1} \\left( q^2 \\frac{\\alpha(\\alpha-1)}{2} \\frac{1}{\\sigma^2} \\right) = \\frac{q^2 \\alpha}{2\\sigma^2}$$\n鉴于 $C=1.0$，完整的表达式为 $\\epsilon_{\\text{step}}(\\alpha) \\approx \\frac{q^2 \\alpha C^2}{2\\sigma^2}$。在指定的范围内，该近似是准确的。\n\n**2. 组合所有迭代的 RDP**\n\nRDP 的组合定理指出，如果一个机制自身组合 $T$ 次，得到的 RDP 保证是通过将每次迭代的 RDP 参数相加获得的。因此，$T$ 次迭代后的总 RDP 为：\n$$\\epsilon_{\\text{total}}(\\alpha) = T \\cdot \\epsilon_{\\text{step}}(\\alpha) \\approx T \\frac{q^2 \\alpha C^2}{2\\sigma^2}$$\n我们可以简化 $\\alpha$ 的系数。我们称之为 $K$：\n$$K = T \\frac{q^2 C^2}{2\\sigma^2} = \\left(E \\frac{N}{b}\\right) \\frac{(b/N)^2 C^2}{2\\sigma^2} = \\frac{E q C^2}{2\\sigma^2}$$\n代入给定值：\n$$K = \\frac{10 \\times 0.0025 \\times (1.0)^2}{2 \\times (2.5)^2} = \\frac{0.025}{2 \\times 6.25} = \\frac{0.025}{12.5} = 0.002$$\n因此，总 RDP 由以下表达式给出：\n$$\\epsilon_{\\text{total}}(\\alpha) = 0.002 \\alpha$$\n\n**3. 转换为 $(\\epsilon, \\delta)$-DP 及优化**\n\n将 $(\\alpha, \\epsilon_R(\\alpha))$-RDP 保证转换为 $(\\epsilon, \\delta)$-DP 保证的标准公式是：\n$$\\epsilon = \\epsilon_R(\\alpha) + \\frac{\\ln(1/\\delta)}{\\alpha-1}$$\n对于任何 Rényi 阶数 $\\alpha  1$，此界限都成立。为了找到最紧的 $\\epsilon$，我们必须对 $\\alpha$ 最小化此表达式。代入我们的 $\\epsilon_{\\text{total}}(\\alpha)$ 表达式：\n$$\\epsilon(\\alpha) = K\\alpha + \\frac{\\ln(1/\\delta)}{\\alpha-1}$$\n设 $L = \\ln(1/\\delta)$。我们需要找到 $f(\\alpha) = K\\alpha + \\frac{L}{\\alpha-1}$ 在 $\\alpha  1$ 时的最小值。我们对 $\\alpha$ 求导并令其为 $0$：\n$$f'(\\alpha) = \\frac{d}{d\\alpha} \\left( K\\alpha + L(\\alpha-1)^{-1} \\right) = K - L(\\alpha-1)^{-2} = 0$$\n求解 $\\alpha$：\n$$K = \\frac{L}{(\\alpha-1)^2} \\implies (\\alpha-1)^2 = \\frac{L}{K} \\implies \\alpha_{\\text{opt}} = 1 + \\sqrt{\\frac{L}{K}}$$\n由于 $L  0$ 和 $K  0$，最优的 $\\alpha$ 保证大于 $1$。将这个最优 $\\alpha$ 代回到 $\\epsilon$ 的表达式中：\n$$\\epsilon_{\\text{min}} = K \\alpha_{\\text{opt}} + \\frac{L}{\\alpha_{\\text{opt}}-1} = K\\left(1 + \\sqrt{\\frac{L}{K}}\\right) + \\frac{L}{\\sqrt{L/K}}$$\n$$\\epsilon_{\\text{min}} = K + K\\sqrt{\\frac{L}{K}} + L\\frac{\\sqrt{K}}{\\sqrt{L}} = K + \\sqrt{KL} + \\sqrt{KL} = K + 2\\sqrt{KL}$$\n现在我们代入数值。我们有 $K = 0.002$。对于 $\\delta = 10^{-6}$：\n$$L = \\ln\\left(\\frac{1}{10^{-6}}\\right) = \\ln(10^6) = 6 \\ln(10)$$\n使用近似值 $\\ln(10) \\approx 2.302585$：\n$$L \\approx 6 \\times 2.302585 = 13.81551$$\n现在我们计算最小的 $\\epsilon$：\n$$\\epsilon_{\\text{min}} = 0.002 + 2\\sqrt{0.002 \\times 13.81551} = 0.002 + 2\\sqrt{0.02763102}$$\n$$\\epsilon_{\\text{min}} \\approx 0.002 + 2(0.1662258) = 0.002 + 0.3324516 = 0.3344516$$\n问题要求将最终答案四舍五入到三位有效数字。前三位有效数字是 $3, 3, 4$。下一位数字是 $4$，小于 $5$，所以我们向下舍入。\n$$\\epsilon \\approx 0.334$$",
            "answer": "$$\n\\boxed{0.334}\n$$"
        }
    ]
}
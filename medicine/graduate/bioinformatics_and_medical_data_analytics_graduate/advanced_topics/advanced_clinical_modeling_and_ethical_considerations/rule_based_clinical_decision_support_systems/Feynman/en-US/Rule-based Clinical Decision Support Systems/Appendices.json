{
    "hands_on_practices": [
        {
            "introduction": "Effective clinical decision support begins with accurate and consistent data. This first practice problem focuses on the crucial pre-processing step of data standardization, a fundamental requirement for any robust rule-based system . You will apply unit conversion principles to patient lab values and then evaluate them against age-specific thresholds, a common pattern for tasks like hyperkalemia monitoring.",
            "id": "4606586",
            "problem": "A hospital deploys a rule-based Clinical Decision Support System (CDSS) to monitor serum potassium and fire a hyperkalemia alert when the age-adjusted threshold is reached. The CDSS standardizes all inputs to millimoles per liter ($\\mathrm{mmol}/\\mathrm{L}$) before applying rules. The physiological thresholds used by the CDSS are age-specific and defined as follows: for neonates and infants with age $a<1$ year, the threshold is $T(a)=6.2$ $\\mathrm{mmol}/\\mathrm{L}$; for children with $1 \\leq a < 18$ years, $T(a)=5.8$ $\\mathrm{mmol}/\\mathrm{L}$; for adults with $a \\geq 18$ years, $T(a)=5.5$ $\\mathrm{mmol}/\\mathrm{L}$. The CDSS fires the hyperkalemia alert if and only if the standardized potassium $K^{\\ast}(a,u,x)$ satisfies $K^{\\ast}(a,u,x) \\geq T(a)$, where $a$ is age in years, $x$ is the measured value, and $u$ is the unit of measurement. The Atomic (Molar) Mass of potassium is $M_{K}=39.0983$ $\\mathrm{g}/\\mathrm{mol}$. Potassium is a monovalent ion with valence $z=+1$, so milliequivalents per liter ($\\mathrm{mEq}/\\mathrm{L}$) equal millimoles per liter ($\\mathrm{mmol}/\\mathrm{L}$) for potassium.\n\nUsing only scientifically grounded unit conversions and the age-threshold rule described above, determine the total number of patients for whom the hyperkalemia alert fires in the following cohort:\n- Patient $1$: age $72$ years; serum potassium $5.7$ $\\mathrm{mEq}/\\mathrm{L}$.\n- Patient $2$: age $10$ years; serum potassium $230$ $\\mathrm{mg}/\\mathrm{L}$.\n- Patient $3$: age $0.5$ years; serum potassium $6.1$ $\\mathrm{mmol}/\\mathrm{L}$.\n- Patient $4$: age $45$ years; serum potassium $19.6$ $\\mathrm{mg}/\\mathrm{dL}$.\n- Patient $5$: age $16$ years; serum potassium $5.82$ $\\mathrm{mmol}/\\mathrm{L}$.\n\nExpress your final answer as a single integer (no unit). No rounding instruction is necessary because the requested quantity is a count.",
            "solution": "The problem requires us to determine the total number of patients in a given cohort for whom a hyperkalemia alert is triggered by a rule-based Clinical Decision Support System (CDSS). The solution involves systematically evaluating each patient's data against the defined rules.\n\nFirst, we restate the rules provided for the CDSS. The alert fires if and only if a patient's standardized serum potassium concentration, $K^{\\ast}$, meets or exceeds the age-dependent threshold, $T(a)$. The concentration $K^{\\ast}$ must be in units of millimoles per liter ($\\mathrm{mmol}/\\mathrm{L}$).\n\nThe age-specific thresholds, $T(a)$, are defined as follows:\n1.  For age $a < 1$ year: $T(a) = 6.2 \\ \\mathrm{mmol}/\\mathrm{L}$\n2.  For age $1 \\leq a < 18$ years: $T(a) = 5.8 \\ \\mathrm{mmol}/\\mathrm{L}$\n3.  For age $a \\geq 18$ years: $T(a) = 5.5 \\ \\mathrm{mmol}/\\mathrm{L}$\n\nThe alert condition is $K^{\\ast} \\geq T(a)$.\n\nTo apply this rule, we must first convert each patient's measured potassium value into the standard unit of $\\mathrm{mmol}/\\mathrm{L}$. We are given the atomic molar mass of potassium as $M_K = 39.0983 \\ \\mathrm{g}/\\mathrm{mol}$. This is numerically equivalent to $39.0983 \\ \\mathrm{mg}/\\mathrm{mmol}$. We will use this value for conversions from mass concentration to molar concentration.\n\nThe conversion formulas are as follows:\n- For potassium, a monovalent ion ($z=+1$), concentration in milliequivalents per liter ($\\mathrm{mEq}/\\mathrm{L}$) is equal to concentration in millimoles per liter ($\\mathrm{mmol}/\\mathrm{L}$).\n- To convert a mass concentration $C_{\\text{mass}}$ in milligrams per liter ($\\mathrm{mg}/\\mathrm{L}$) to a molar concentration $K^{\\ast}$ in $\\mathrm{mmol}/\\mathrm{L}$, the formula is:\n$$K^{\\ast} \\ [\\mathrm{mmol}/\\mathrm{L}] = \\frac{C_{\\text{mass}} \\ [\\mathrm{mg}/\\mathrm{L}]}{M_K \\ [\\mathrm{mg}/\\mathrm{mmol}]} = \\frac{C_{\\text{mass}}}{39.0983}$$\n- To convert a mass concentration $C_{\\text{mass}}$ in milligrams per deciliter ($\\mathrm{mg}/\\mathrm{dL}$) to $\\mathrm{mmol}/\\mathrm{L}$, we first note that $1 \\ \\mathrm{L} = 10 \\ \\mathrm{dL}$.\n$$C_{\\text{mass}} \\ [\\mathrm{mg}/\\mathrm{L}] = C_{\\text{mass}} \\ [\\mathrm{mg}/\\mathrm{dL}] \\times 10$$\nThen, we convert to $\\mathrm{mmol}/\\mathrm{L}$:\n$$K^{\\ast} \\ [\\mathrm{mmol}/\\mathrm{L}] = \\frac{C_{\\text{mass}} \\ [\\mathrm{mg}/\\mathrm{dL}] \\times 10}{39.0983}$$\n\nNow, we evaluate each patient in the cohort.\n\n**Patient 1:**\n- Age: $a = 72$ years. Since $72 \\geq 18$, the threshold is $T(72) = 5.5 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Measured potassium: $5.7 \\ \\mathrm{mEq}/\\mathrm{L}$.\n- Standardization: For potassium, $1 \\ \\mathrm{mEq}/\\mathrm{L} = 1 \\ \\mathrm{mmol}/\\mathrm{L}$. Thus, $K^{\\ast} = 5.7 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Comparison: We check if $K^{\\ast} \\geq T(72)$, which is $5.7 \\geq 5.5$. This inequality is true.\n- Outcome: The alert fires for Patient $1$.\n\n**Patient 2:**\n- Age: $a = 10$ years. Since $1 \\leq 10 < 18$, the threshold is $T(10) = 5.8 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Measured potassium: $230 \\ \\mathrm{mg}/\\mathrm{L}$.\n- Standardization: We convert from $\\mathrm{mg}/\\mathrm{L}$ to $\\mathrm{mmol}/\\mathrm{L}$ using $M_K$.\n$$K^{\\ast} = \\frac{230}{39.0983} \\approx 5.8826 \\ \\mathrm{mmol}/\\mathrm{L}$$\n- Comparison: We check if $K^{\\ast} \\geq T(10)$, which is approximately $5.8826 \\geq 5.8$. This inequality is true.\n- Outcome: The alert fires for Patient $2$.\n\n**Patient 3:**\n- Age: $a = 0.5$ years. Since $0.5 < 1$, the threshold is $T(0.5) = 6.2 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Measured potassium: $6.1 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Standardization: The value is already in the standard unit. $K^{\\ast} = 6.1 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Comparison: We check if $K^{\\ast} \\geq T(0.5)$, which is $6.1 \\geq 6.2$. This inequality is false.\n- Outcome: The alert does not fire for Patient $3$.\n\n**Patient 4:**\n- Age: $a = 45$ years. Since $45 \\geq 18$, the threshold is $T(45) = 5.5 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Measured potassium: $19.6 \\ \\mathrm{mg}/\\mathrm{dL}$.\n- Standardization: We convert from $\\mathrm{mg}/\\mathrm{dL}$ to $\\mathrm{mmol}/\\mathrm{L}$.\n$$K^{\\ast} = \\frac{19.6 \\times 10}{39.0983} = \\frac{196}{39.0983} \\approx 5.0129 \\ \\mathrm{mmol}/\\mathrm{L}$$\n- Comparison: We check if $K^{\\ast} \\geq T(45)$, which is approximately $5.0129 \\geq 5.5$. This inequality is false.\n- Outcome: The alert does not fire for Patient $4$.\n\n**Patient 5:**\n- Age: $a = 16$ years. Since $1 \\leq 16 < 18$, the threshold is $T(16) = 5.8 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Measured potassium: $5.82 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Standardization: The value is already in the standard unit. $K^{\\ast} = 5.82 \\ \\mathrm{mmol}/\\mathrm{L}$.\n- Comparison: We check if $K^{\\ast} \\geq T(16)$, which is $5.82 \\geq 5.8$. This inequality is true.\n- Outcome: The alert fires for Patient $5$.\n\nFinally, we sum the number of patients for whom the alert fires:\n- Patient 1: Yes\n- Patient 2: Yes\n- Patient 3: No\n- Patient 4: No\n- Patient 5: Yes\n\nThe total count is $1 + 1 + 0 + 0 + 1 = 3$.\nTherefore, the hyperkalemia alert fires for a total of $3$ patients.",
            "answer": "$$\\boxed{3}$$"
        },
        {
            "introduction": "Once data is standardized, the core of a CDSS is its logic engine. This exercise moves from simple thresholds to evaluating a set of more complex rules involving logical conjunctions ($A \\land B$) and disjunctions ($A \\lor B$) . By calculating a weighted severity score, you will practice how a system can aggregate evidence from multiple risk factors to make a final alert decision.",
            "id": "4606609",
            "problem": "A rule-based clinical decision support system uses propositional logic with crisp Boolean semantics and a weighted linear aggregation to produce a dimensionless alert severity score. The foundational base for this problem consists of the following well-tested definitions and facts: propositional logic with conjunction and disjunction defined by truth-functional semantics, the closed-world assumption in knowledge-based systems (unspecified facts are treated as false), and a standard linear weighted aggregation of rule activations used in clinical decision support. Conjunction is defined such that for propositions $X$ and $Y$, the truth value $t(X \\land Y)$ equals $1$ if and only if $t(X) = 1$ and $t(Y) = 1$, otherwise $0$. Disjunction is defined such that $t(X \\lor Y) = 1$ if and only if $t(X) = 1$ or $t(Y) = 1$, otherwise $0$. Under closed-world assumption, any antecedent literal not present in the patient data is assigned $0$.\n\nConsider the following patient facts and rule base designed to detect renal and gastrointestinal risk associated with Nonsteroidal Anti-Inflammatory Drugs (NSAID). The patient has an estimated Glomerular Filtration Rate (eGFR) of $g = 45$ milliliters per minute per $1.73\\text{ m}^2$, is currently taking ibuprofen (an NSAID), and has no gastrointestinal (GI) bleed history. There is no active anticoagulant and no active angiotensin-converting enzyme (ACE) inhibitor. Encode these facts as Boolean propositions: $A$ denotes “active ibuprofen,” $H$ denotes “history of GI bleed,” $B$ denotes “active anticoagulant,” and $P$ denotes “active ACE inhibitor.” Numeric comparisons of $g$ against thresholds are treated as antecedent literals yielding $1$ if true and $0$ if false. The system’s three rules are:\n\n- Rule $R_1$: $A \\land (g < 60) \\Rightarrow$ renal risk; weight $w_1 = 0.57$.\n- Rule $R_2$: $A \\land (H \\lor B) \\Rightarrow$ GI risk; weight $w_2 = 0.28$.\n- Rule $R_3$: $(g < 30) \\lor (A \\land P) \\Rightarrow$ high-severity contraindication; weight $w_3 = 0.42$.\n\nThe alert severity score $S$ is computed by summing the products of each rule’s weight and its truth value, that is, $S = \\sum_{i=1}^{3} w_i \\cdot t(R_i)$, where $t(R_i) \\in \\{0,1\\}$ is the truth value of rule $R_i$ obtained by evaluating its antecedent with the given patient facts. The system’s alert threshold is $\\theta = 0.50$, meaning an alert fires if and only if $S \\ge \\theta$.\n\nEvaluate the three rules with their conjunctive and disjunctive antecedents against the patient’s facts, derive the alert decision from first principles, and compute the final alert severity score $S$. Express the final severity score as a dimensionless real number and round your answer to $4$ significant figures. Do not include any units in your final answer.",
            "solution": "The objective is to compute the alert severity score, $S$, for a given patient based on a set of rules and determine if an alert is triggered. The score is calculated using the formula $S = \\sum_{i=1}^{3} w_i \\cdot t(R_i)$, where $w_i$ is the weight of rule $R_i$ and $t(R_i)$ is the Boolean truth value ($1$ for true, $0$ for false) of its antecedent.\n\nFirst, we must formalize the patient's clinical data into truth values for the propositional literals defined in the problem. The patient data are:\n- Estimated Glomerular Filtration Rate, $g = 45$.\n- Active ibuprofen use, which corresponds to the proposition $A$.\n- No history of GI bleed, which corresponds to the proposition $H$.\n- No active anticoagulant, which corresponds to the proposition $B$.\n- No active ACE inhibitor, which corresponds to the proposition $P$.\n\nBased on these facts, we assign truth values to the propositions:\n- $t(A) = 1$ because the patient is taking ibuprofen.\n- $t(H) = 0$ because there is no history of GI bleed.\n- $t(B) = 0$ because there is no active anticoagulant.\n- $t(P) = 0$ because there is no active ACE inhibitor.\n\nNext, we evaluate the numerical comparison literals involving the patient's eGFR, $g = 45$:\n- The literal $(g < 60)$ evaluates to $45 < 60$, which is true. Therefore, $t(g < 60) = 1$.\n- The literal $(g < 30)$ evaluates to $45 < 30$, which is false. Therefore, $t(g < 30) = 0$.\n\nNow we can evaluate the antecedent of each rule to determine its truth value, $t(R_i)$.\n\nEvaluation of Rule $R_1$: The antecedent is $A \\land (g < 60)$.\nThe truth value $t(R_1)$ is the truth value of the conjunction $t(A \\land (g < 60))$.\nUsing the definition of conjunction, $t(X \\land Y)$ is $1$ if and only if $t(X)=1$ and $t(Y)=1$.\nWe have $t(A) = 1$ and $t(g < 60) = 1$.\nThus, $t(R_1) = 1 \\land 1 = 1$. Rule $R_1$ is activated.\n\nEvaluation of Rule $R_2$: The antecedent is $A \\land (H \\lor B)$.\nThe truth value $t(R_2)$ is $t(A \\land (H \\lor B))$. We first evaluate the disjunction $(H \\lor B)$.\nUsing the definition of disjunction, $t(X \\lor Y)$ is $1$ if and only if $t(X)=1$ or $t(Y)=1$.\nWe have $t(H) = 0$ and $t(B) = 0$.\nThus, $t(H \\lor B) = 0 \\lor 0 = 0$.\nNow we evaluate the conjunction $A \\land (H \\lor B)$. We have $t(A) = 1$ and $t(H \\lor B) = 0$.\nThus, $t(R_2) = 1 \\land 0 = 0$. Rule $R_2$ is not activated.\n\nEvaluation of Rule $R_3$: The antecedent is $(g < 30) \\lor (A \\land P)$.\nThe truth value $t(R_3)$ is $t((g < 30) \\lor (A \\land P))$. We first evaluate the conjunction $(A \\land P)$.\nWe have $t(A) = 1$ and $t(P) = 0$.\nThus, $t(A \\land P) = 1 \\land 0 = 0$.\nNow we evaluate the disjunction $(g < 30) \\lor (A \\land P)$. We have $t(g < 30) = 0$ and $t(A \\land P) = 0$.\nThus, $t(R_3) = 0 \\lor 0 = 0$. Rule $R_3$ is not activated.\n\nWith the truth values for each rule's antecedent determined ($t(R_1) = 1$, $t(R_2) = 0$, $t(R_3) = 0$), we can now compute the alert severity score $S$. The rule weights are given as $w_1 = 0.57$, $w_2 = 0.28$, and $w_3 = 0.42$.\n$$ S = w_1 \\cdot t(R_1) + w_2 \\cdot t(R_2) + w_3 \\cdot t(R_3) $$\n$$ S = (0.57 \\cdot 1) + (0.28 \\cdot 0) + (0.42 \\cdot 0) $$\n$$ S = 0.57 + 0 + 0 $$\n$$ S = 0.57 $$\nThe alert threshold is given as $\\theta = 0.50$. The system fires an alert if $S \\ge \\theta$.\nSince $S = 0.57$, and $0.57 \\ge 0.50$, an alert is indeed generated.\n\nThe problem requires the final alert severity score $S$ to be expressed as a dimensionless real number rounded to $4$ significant figures. The calculated score is $S=0.57$. Expressing this value with $4$ significant figures gives $0.5700$.",
            "answer": "$$ \\boxed{0.5700} $$"
        },
        {
            "introduction": "To bridge theory with practice, this final exercise immerses you in the modern health informatics ecosystem. You will work directly with data formatted using Fast Healthcare Interoperability Resources (FHIR) and evaluate logic expressed in the industry-standard Clinical Quality Language (CQL) . This hands-on task demonstrates precisely how the abstract concepts of rule evaluation are implemented in contemporary clinical settings.",
            "id": "4606553",
            "problem": "A hospital implements a rule-based clinical decision support system that evaluates hyperkalemia risk using Fast Healthcare Interoperability Resources (FHIR) and Clinical Quality Language (CQL). You are given a single-patient FHIR Bundle (version R4) consisting of exactly two Observation resources and one MedicationRequest resource. The evaluation uses standard FHIR-to-CQL model mapping for FHIR R4, the native Clinical Quality Language (CQL) semantics for list filtering, time intervals, and sorting, and the Unified Code for Units of Measure (UCUM) for quantities.\n\nAssumptions and evaluation context:\n- Use Clinical Quality Language (CQL) point-in-time evaluation with the logical clock fixed at $@2025\\text{-}11\\text{-}11\\text{T}00{:}00{:}00\\text{Z}$ for all references to `Now()`.\n- Time interval arithmetic uses CQL standard semantics. Interpret $X$ during $[a,b)$ as $a < X < b$ when $X$ is a point-in-time.\n- There are no additional relevant resources beyond those listed. Fields omitted below should be treated as not present.\n\nFHIR Bundle contents (essential fields only):\n- Observation $O_1$:\n  - resourceType: \"Observation\"\n  - status: \"final\"\n  - code.coding: system \"http://loinc.org\", code \"2823-3\"\n  - valueQuantity.value: $5.8$\n  - valueQuantity.unit: \"mmol/L\"\n  - valueQuantity.system: \"http://unitsofmeasure.org\"\n  - valueQuantity.code: \"mmol/L\"\n  - effectiveDateTime: \"@2025-11-10T09:00:00Z\"\n- Observation $O_2$:\n  - resourceType: \"Observation\"\n  - status: \"final\"\n  - code.coding: system \"http://loinc.org\", code \"2823-3\"\n  - valueQuantity.value: $5.2$\n  - valueQuantity.unit: \"mmol/L\"\n  - valueQuantity.system: \"http://unitsofmeasure.org\"\n  - valueQuantity.code: \"mmol/L\"\n  - effectiveDateTime: \"@2025-11-08T09:00:00Z\"\n- MedicationRequest $M_1$:\n  - resourceType: \"MedicationRequest\"\n  - status: \"active\"\n  - intent: \"order\"\n  - medicationCodeableConcept.coding: system \"http://www.nlm.nih.gov/research/umls/rxnorm\", code \"29046\" (lisinopril)\n  - authoredOn: \"@2025-11-01T12:00:00Z\"\n\nThe Clinical Quality Language (CQL) logic to evaluate is:\n```cql\nlibrary Hyperkalemia version '1.0.0'\nusing FHIR version '4.0.1'\ninclude FHIRHelpers version '4.0.1' called FHIRHelpers\n\ndefine \"Window Start\":\n  Now() - 3 days\n\ndefine \"Recent Serum Potassium\":\n  [Observation] O\n    where O.status in {'final','amended'}\n      and exists (O.code.coding C where C.system = 'http://loinc.org' and C.code = '2823-3')\n      and (O.effective as dateTime) during Interval(\"Window Start\", Now())\n\ndefine \"Latest Serum Potassium\":\n  Last(\"Recent Serum Potassium\" O sort by (O.effective as dateTime))\n\ndefine \"Is Hyperkalemic\":\n  let Q: (\"Latest Serum Potassium\".value as Quantity)\n  return (Q.unit = 'mmol/L' or Q.code = 'mmol/L') and (Q.value > 5.5)\n\ndefine \"On Risk Medication\":\n  exists (\n    [MedicationRequest] M\n      where M.status = 'active'\n        and exists (M.medicationCodeableConcept.coding R\n                      where R.system = 'http://www.nlm.nih.gov/research/umls/rxnorm'\n                        and R.code in {'29046','617314','316049'})\n  )\n\ndefine \"Hyperkalemia Alert\":\n  \"Is Hyperkalemic\" and \"On Risk Medication\"\n```\n\nTask:\n- Evaluate the CQL definitions against the provided FHIR Bundle under the specified assumptions. Compute the value of the CQL expression \"Hyperkalemia Alert\".\n- Express the result numerically as $1$ if true and $0$ if false. No rounding is necessary. The answer is dimensionless and must not include any unit.",
            "solution": "The task is to evaluate the final Clinical Quality Language (CQL) expression, `\"Hyperkalemia Alert\"`, which is a boolean value. The final result must be expressed as $1$ for true and $0$ for false. The evaluation proceeds by sequentially resolving each `define` statement in the provided CQL library.\n\nThe evaluation context sets the logical clock for the `Now()` function at a fixed point in time:\n$$\n\\text{Now()} = @2025\\text{-}11\\text{-}11\\text{T}00{:}00{:}00\\text{Z}\n$$\n\n**1. Evaluate `\"Window Start\"`**\n\nThis definition calculates the beginning of the time window for observation inclusion.\n$$\n\\text{\"Window Start\"} := \\text{Now()} - 3 \\text{ days}\n$$\nSubstituting the value of `Now()`:\n$$\n\\text{\"Window Start\"} = @2025\\text{-}11\\text{-}11\\text{T}00{:}00{:}00\\text{Z} - 3 \\text{ days} = @2025\\text{-}11\\text{-}08\\text{T}00{:}00{:}00\\text{Z}\n$$\n\n**2. Evaluate `\"Recent Serum Potassium\"`**\n\nThis expression filters the available `Observation` resources ($O_1$ and $O_2$) based on several criteria. The result is a list of matching resources.\n\nThe filtering criteria are:\n- `O.status in {'final','amended'}`\n- `exists (O.code.coding C where C.system = 'http://loinc.org' and C.code = '2823-3')`\n- `(O.effective as dateTime) during Interval(\"Window Start\", Now())`\n\nThe time interval for the third criterion is from `\"Window Start\"` to `Now()`, which is `$I = [@2025\\text{-}11\\text{-}08\\text{T}00{:}00{:}00\\text{Z}, @2025\\text{-}11\\text{-}11\\text{T}00{:}00{:}00\\text{Z})$`. The problem specifies that for a point-in-time $X$, `$X$ during $[a,b)$` is interpreted as `$a  X  b$`.\n\nLet's evaluate each observation:\n\n- **For Observation $O_1$:**\n    - `status`: `'final'`. This matches `{'final','amended'}`.\n    - `code.coding`: `system = 'http://loinc.org'`, `code = '2823-3'`. This matches.\n    - `effectiveDateTime`: `$t_1 = @2025\\text{-}11\\text{-}10\\text{T}09{:}00{:}00\\text{Z}$`. We check if `@2025\\text{-}11\\text{-}08\\text{T}00{:}00{:}00\\text{Z}  t_1  @2025\\text{-}11\\text{-}11\\text{T}00{:}00{:}00\\text{Z}`. This is true.\n    - All criteria are met. $O_1$ is included in `\"Recent Serum Potassium\"`.\n\n- **For Observation $O_2$:**\n    - `status`: `'final'`. This matches `{'final','amended'}`.\n    - `code.coding`: `system = 'http://loinc.org'`, `code = '2823-3'`. This matches.\n    - `effectiveDateTime`: `$t_2 = @2025\\text{-}11\\text{-}08\\text{T}09{:}00{:}00\\text{Z}$`. We check if `@2025\\text{-}11\\text{-}08\\text{T}00{:}00{:}00\\text{Z}  t_2  @2025\\text{-}11\\text{-}11\\text{T}00{:}00{:}00\\text{Z}`. This is true.\n    - All criteria are met. $O_2$ is included in `\"Recent Serum Potassium\"`.\n\nThe resulting list for `\"Recent Serum Potassium\"` contains both observations: `[$O_2, O_1$]`. The order is not specified at this stage.\n\n**3. Evaluate `\"Latest Serum Potassium\"`**\n\nThis expression sorts the `\"Recent Serum Potassium\"` list and selects the last element.\n$$\n\\text{\"Latest Serum Potassium\"} := \\text{Last} ( \\text{\"Recent Serum Potassium\"} \\text{ O sort by (O.effective as dateTime)} )\n$$\nThe list to sort is `[$O_1, O_2$]`. The sorting key is `effectiveDateTime` in ascending order.\n- $O_1$ `effectiveDateTime`: `@2025-11-10T09:00:00Z`\n- $O_2$ `effectiveDateTime`: `@2025-11-08T09:00:00Z`\n\nSince `@2025-11-08...` is earlier than `@2025-11-10...`, the sorted list is `[$O_2, O_1$]`. The `Last` operator returns the final element of this sorted list, which is $O_1$.\nThus, `\"Latest Serum Potassium\"` evaluates to the Observation resource $O_1$.\n\n**4. Evaluate `\"Is Hyperkalemic\"`**\n\nThis expression evaluates a condition on the value of `\"Latest Serum Potassium\"`.\n$$\n\\text{let Q} := (\\text{\"Latest Serum Potassium\"}.\\text{value as Quantity}) \\\\\n\\text{return (Q.unit = 'mmol/L' or Q.code = 'mmol/L') and (Q.value > 5.5)}\n$$\nThe resource is $O_1$. Its `valueQuantity` field corresponds to the CQL `Quantity` type $Q$.\n- `Q.value` = $5.8$\n- `Q.unit` = `'mmol/L'`\n- `Q.code` = `'mmol/L'`\n\nWe evaluate the boolean expression:\n- `(Q.unit = 'mmol/L' or Q.code = 'mmol/L')`: This is `('mmol/L' = 'mmol/L' or 'mmol/L' = 'mmol/L')`, which is `true`.\n- `(Q.value > 5.5)`: This is `(5.8 > 5.5)`, which is `true`.\n\nThe final expression is `true and true`, which evaluates to `true`.\nThus, `\"Is Hyperkalemic\"` is `true`.\n\n**5. Evaluate `\"On Risk Medication\"`**\n\nThis expression checks for the existence of an active `MedicationRequest` for certain drugs.\n$$\n\\text{exists} ( [\\text{MedicationRequest}] \\text{ M where M.status = 'active' and exists} ( \\dots ) )\n$$\nWe examine the single `MedicationRequest` resource, $M_1$.\n- `M.status = 'active'`: The status of $M_1$ is `'active'`. This condition is met.\n- The inner `exists` clause checks the medication code:\n  - `M.medicationCodeableConcept.coding R where R.system = 'http://www.nlm.nih.gov/research/umls/rxnorm' and R.code in {'29046','617314','316049'}`\n  - For $M_1$, the coding has `system = 'http://www.nlm.nih.gov/research/umls/rxnorm'` and `code = '29046'`.\n  - The system matches. The code `'29046'` is in the specified set `{'29046','617314','316049'}`.\n  - The inner `exists` is `true`.\n\nSince both conditions on $M_1$ are met, the filtered list of `MedicationRequest`s is `[$M_1$]`. Because this list is not empty, the outer `exists` expression evaluates to `true`.\nThus, `\"On Risk Medication\"` is `true`.\n\n**6. Evaluate `\"Hyperkalemia Alert\"`**\n\nThis is the final expression, combining the previous results.\n$$\n\\text{\"Hyperkalemia Alert\"} := \\text{\"Is Hyperkalemic\" and \"On Risk Medication\"}\n$$\nSubstituting the evaluated boolean values:\n$$\n\\text{\"Hyperkalemia Alert\"} = \\text{true and true} = \\text{true}\n$$\n\n**Conclusion**\n\nThe CQL expression `\"Hyperkalemia Alert\"` evaluates to `true`. The problem requires this result to be expressed numerically as $1$ for true and $0$ for false. Therefore, the final answer is $1$.",
            "answer": "$$\n\\boxed{1}\n$$"
        }
    ]
}
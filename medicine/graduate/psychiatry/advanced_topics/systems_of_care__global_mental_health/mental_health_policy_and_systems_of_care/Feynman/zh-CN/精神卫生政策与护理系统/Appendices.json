{
    "hands_on_practices": [
        {
            "introduction": "有效规划精神卫生服务的第一步是准确估算需求。本练习将指导您完成一项基本但至关重要的任务：利用流行病学数据（如患病率）来确定特定人群所需的临床人员数量。通过为初级保健诊所的协作医疗模式计算所需的护理经理数量，您将掌握将抽象的人口健康指标转化为具体、可操作的人力资源计划的技能。",
            "id": "4727668",
            "problem": "一家初级保健诊所正在实施一个抑郁症管理的协同护理模式。该诊所有一个稳定的病人库，包含 $10{,}000$ 名成年人。在任何给定时间点，重度抑郁症的时点患病率为 $0.08$。该诊所计划为所有活动性抑郁症患者提供病情管理，该系统在稳定状态下运行，没有积压，流量稳定。每名全职等效（FTE）病情管理经理可以同时管理 $100$ 个活动病例，并且平均病情管理周期的长度使得一名FTE的活动病例库每年周转 $2$ 次。\n\n使用基本的人群健康定义（患病率作为特定时间点人群中患有该病症的比例）和将系统中的平均数量与流入量和持续时间相关联的稳态流动原则，推导出为该诊所所有活动性抑郁症患者提供持续覆盖所需的病情管理经理FTE数量，假设所有患者的病程持续时间是同质的，并且每位活动性抑郁症患者都参与了病情管理。\n\n请以纯数字（FTE的数量）形式提供最终答案，不带单位，不进行四舍五入（即，报告精确的整数）。不要将答案表示为百分比。",
            "solution": "在尝试求解之前，将首先对问题进行严格的验证过程。\n\n### 第1步：提取已知条件\n问题陈述中提供了以下数据和条件：\n-   总病人库规模：$N = 10,000$ 名成年人\n-   重度抑郁症的时点患病率：$P = 0.08$\n-   一名全职等效（FTE）病情管理经理同时管理的活动病例数：$C_{FTE} = 100$\n-   一名FTE的活动病例库周转率：$R = 2$ 次/年\n-   系统状态：稳定状态，无积压，流量稳定。\n-   假设：所有活动性抑郁症患者都参与病情管理。\n-   假设：所有患者的病程持续时间是同质的。\n\n### 第2步：使用提取的已知条件进行验证\n根据既定标准评估问题的有效性。\n\n-   **科学依据**：该问题基于流行病学（患病率）和运营管理（稳态分析、资源容量规划）的基本原则。病人库、患病率、FTE病例负荷和病人流量等概念是医疗系统分析中的标准术语。数值对于初级保健环境是现实的。\n-   **适定性**：该问题要求一个单一、具体的量（FTE数量），并提供了足够的数据来确定它。关于病例库周转率的信息可用于验证稳态假设下问题参数的一致性。让我们来检验这种一致性。问题陈述，需要病情管理经理的FTE数量来“为所有活动性抑郁症患者提供持续覆盖”。这意味着计算是基于在单个时间点患有该病的患者数量（患病率）。\n    -   在任何时间点，活动性抑郁症患者的数量是总病人库规模与时点患病率的乘积。\n    -   所需的FTE数量是这个总活动病例负荷除以一名FTE能同时管理的病例数。\n    - 对于一个 $C_{FTE}=100$ 的病例负荷，每年 $R=2$ 的周转率意味着平均病程持续时间为 $T = \\frac{1}{R} = \\frac{1}{2} = 0.5$ 年。这与利特尔法则（$L = \\lambda W$）所描述的稳态系统是一致的，其中 $L$ 是系统中的平均项目数（现患病例），$\\lambda$ 是平均到达率（每年新增病例），$W$ 是一个项目在系统中的平均停留时间（病程持续时间）。数据内部一致，没有矛盾。\n-   **客观性**：问题以精确、定量和客观的语言陈述。它不含主观或有偏见的论断。\n\n该问题没有表现出验证协议中列出的任何缺陷（科学上不健全、不完整、不切实际的条件等）。该主题与*精神病学*中的*心理健康政策和护理系统*相符。\n\n### 第3步：结论与行动\n该问题被判定为**有效**。将推导解答。\n\n### 解答推导\n目标是确定在一个稳定状态下运行的诊所中，为所有活动性抑郁症患者提供护理所需的病情管理经理全职等效（$FTEs$）数量。\n\n首先，我们计算在任何给定时间点活动性抑郁症患者的数量。这是诊所的总活动病例负荷，$C_{total}$。它通过将总病人库规模 $N$ 乘以该疾病的时点患病率 $P$ 来确定。\n\n$$C_{total} = N \\times P$$\n\n代入给定值：\n$$C_{total} = 10,000 \\times 0.08 = 800$$\n\n因此，在任何时间点，都有 $800$ 名活动性抑郁症患者需要病情管理。\n\n接下来，已知一名病情管理经理FTE可以同时管理 $C_{FTE} = 100$ 个活动病例。为了求出所需的FTE总数 $FTE_{req}$，我们将总活动病例负荷 $C_{total}$ 除以单个FTE的病例负荷容量 $C_{FTE}$。\n\n$$FTE_{req} = \\frac{C_{total}}{C_{FTE}}$$\n\n代入数值：\n$$FTE_{req} = \\frac{800}{100} = 8$$\n\n因此，需要 $8$ 名病情管理经理FTE来提供持续覆盖。\n\n作为一致性检查，我们可以从流量的角度分析该系统。问题陈述一名FTE的100个活动病例库每年周转2次。这意味着一名FTE每年可以管理 $100 \\times 2 = 200$ 个病人病程。每年 $R=2$ 的周转率意味着平均病程持续时间为 $T = 1/R = 0.5$ 年。\n对于一个稳态系统，现患病例数（$L$）与发病率（$\\lambda$，单位时间新增病例）和病症平均持续时间（$T$）之间的关系由公式 $L = \\lambda T$ 给出。\n这里，$L = C_{total} = 800$ 例。持续时间是 $T = 0.5$ 年。因此，发病率（新病例的流入量）是：\n$$\\lambda = \\frac{L}{T} = \\frac{800}{0.5} = 1600 \\text{ 例/年}$$\n为了处理这每年1600例的流入量，每名FTE每年处理200例，所需的FTE数量为：\n$$FTE_{req} = \\frac{1600 \\text{ 例/年}}{200 \\text{ 例/FTE-年}} = 8$$\n基于时间点（存量）的计算和基于流量（流入/流出）的计算得出了相同的结果，这证实了问题陈述的内部一致性和解决方案的正确性。最直接的解决路径是使用时点患病率和并发病例负荷，正如最初所做的那样。",
            "answer": "$$\\boxed{8}$$"
        },
        {
            "introduction": "精神卫生服务系统不仅仅是静态的资源集合，更是患者流动的动态网络。理解和优化患者流是解决延误和瓶颈（如急诊科的“滞留”问题）的关键。本练习将向您介绍一个来自排队论的强大工具——利特尔法则 ($L = \\lambda W$)，通过它，您可以量化系统拥堵的程度，并识别出能够有效改善患者流动的政策干预点。",
            "id": "4727741",
            "problem": "某区域医院的急诊科 (ED) 存在精神科“滞留”现象，其定义为有急性精神健康需求的患者在急诊科等待最终住院安置或社区稳定治疗的时间。假设急诊科的精神科患者流处于稳态：在长时间范围内，到达和离开是平衡的，并且系统是稳定的（滞留人数不会无限制增长）。设长期时间平均滞留患者数为 $L$，长期平均精神科滞留患者到达率为 $\\lambda$ (单位：$\\text{day}^{-1}$)，每位患者的长期平均滞留时间为 $W$ (单位：$\\text{days}$)。\n\n从稳定排队系统中的流量守恒和时间平均的基本原理出发，推导出连接 $L$、$\\lambda$ 和 $W$ 之间的关系。然后，利用该关系计算在平均滞留时间为 $36$ 小时、平均到达率为每天 $8$ 名患者的情况下，急诊科长期平均精神科滞留患者数。计算前，请将小时转换为天以确保单位一致。将最终数值表示为单个实数值。\n\n最后，提出两个具体的政策杠杆，原则上可以通过作用于 $\\lambda$ 或 $W$ 来减少滞留现象，并说明每个杠杆改变所选参数的机制。您无需量化变化的幅度，但您的提案必须明确指出它们是针对 $\\lambda$ 还是 $W$，并说明原因。\n\n计算无需四舍五入。最终的数字答案应以整数形式呈现（最终数字答案中不包含单位）。",
            "solution": "该问题陈述经评估有效。它在科学上基于排队论（应用数学的一个分支）的原理，其在医疗保健中对患者流的应用是一个成熟且客观的研究领域。该问题提法恰当、内容完整，并提供了解决问题所需的所有信息。\n\n该问题要求三部分内容：1) 推导系统中的平均患者数 ($L$)、平均到达率 ($\\lambda$) 和在系统中花费的平均时间 ($W$) 之间的关系；2) 在给定 $\\lambda$ 和 $W$ 的具体值的情况下计算 $L$；3) 定性地提出两个减少 $L$ 的政策杠杆。\n\n**1. 关系的推导**\n\n所讨论的关系被称为利特尔法则。我们被要求从稳定、稳态系统中的流量守恒和时间平均的基本原理出发来推导它。\n\n设 $N(t)$ 为在给定时间 $t$ 急诊科 (ED) 中滞留的精神科患者数量。问题陈述，长期时间平均滞留患者数为 $L$。在数学上，这表示为：\n$$\nL = \\lim_{T \\to \\infty} \\frac{1}{T} \\int_{0}^{T} N(t) \\, dt\n$$\n这个积分 $\\int_{0}^{T} N(t) \\, dt$ 代表了在长度为 $T$ 的时间区间内累积的总滞留患者天数。\n\n设 $\\alpha(T)$ 为在时间区间 $[0, T]$ 内到达并需要滞留的患者总数。问题将长期平均到达率定义为 $\\lambda$。这表示为：\n$$\n\\lambda = \\lim_{T \\to \\infty} \\frac{\\alpha(T)}{T}\n$$\n\n设 $w_i$ 为第 $i$ 位患者在急诊科滞留的总时间。问题将每位患者的长期平均滞留时间定义为 $W$。这是对大量患者的 $w_i$ 进行平均。如果我们考虑在时间 $T$ 之前到达的 $\\alpha(T)$ 位患者，他们在系统中的平均时间为：\n$$\nW = \\lim_{T \\to \\infty} \\frac{1}{\\alpha(T)} \\sum_{i=1}^{\\alpha(T)} w_i\n$$\n这个定义是基于到达者进行平均。在一个稳定的系统中，长期来看，到达和离开的数量是平衡的，因此对到达者进行平均等同于对离开者进行平均。\n\n推导的核心在于认识到，在很长一段时间 $T$ 内，系统中累积的总患者天数可以通过两种等效的方式计算。一种方法是像 $L$ 的定义那样，对患者数量随时间进行积分。另一种方法是将在系统中经过的每位患者所花费的个别时间相加。\n\n因此，我们可以陈述总累积时间的恒等式：\n$$\n\\int_{0}^{T} N(t) \\, dt \\approx \\sum_{i=1}^{\\alpha(T)} w_i\n$$\n这个近似成立是因为在一个有限的区间 $T$ 内，一些已经到达的患者可能尚未离开。然而，在一个稳定的系统中，当 $T \\to \\infty$ 时，这些“处理中”的患者对总时间和的贡献与总和相比变得可以忽略不计，并且在极限情况下，该近似变为等式。\n\n现在，我们将恒等式两边都除以 $T$：\n$$\n\\frac{1}{T} \\int_{0}^{T} N(t) \\, dt \\approx \\frac{1}{T} \\sum_{i=1}^{\\alpha(T)} w_i\n$$\n我们可以通过乘以和除以 $\\alpha(T)$ 来重写右侧：\n$$\n\\frac{1}{T} \\int_{0}^{T} N(t) \\, dt \\approx \\left(\\frac{\\alpha(T)}{T}\\right) \\left(\\frac{1}{\\alpha(T)} \\sum_{i=1}^{\\alpha(T)} w_i\\right)\n$$\n对所有项取 $T \\to \\infty$ 的极限，该近似变为精确等式：\n$$\n\\lim_{T \\to \\infty} \\frac{1}{T} \\int_{0}^{T} N(t) \\, dt = \\left(\\lim_{T \\to \\infty} \\frac{\\alpha(T)}{T}\\right) \\left(\\lim_{T \\to \\infty} \\frac{1}{\\alpha(T)} \\sum_{i=1}^{\\alpha(T)} w_i\\right)\n$$\n代入 $L$、$\\lambda$ 和 $W$ 的定义，我们得到期望的关系式：\n$$\nL = \\lambda W\n$$\n这个基本结果表明，系统中的平均患者数等于他们的平均到达率与他们在系统中花费的平均时间的乘积。\n\n**2. 滞留患者数的计算**\n\n我们被给予以下数值：\n平均到达率 $\\lambda = 8 \\text{ 患者}/\\text{天}$。\n平均滞留时间 = $36$ 小时。\n\n首先，我们必须确保单位一致。到达率 $\\lambda$ 的单位是 $\\text{day}^{-1}$，所以我们必须将平均滞留时间 $W$ 以天为单位表示。\n一天有 $24$ 小时。\n$$\nW = 36 \\text{ hours} \\times \\frac{1 \\text{ day}}{24 \\text{ hours}} = \\frac{36}{24} \\text{ days} = \\frac{3}{2} \\text{ days} = 1.5 \\text{ days}\n$$\n现在，我们可以使用推导出的关系 $L = \\lambda W$ 来计算长期平均精神科滞留患者数 $L$。\n$$\nL = (8 \\text{ day}^{-1}) \\times (1.5 \\text{ days})\n$$\n$$\nL = 12\n$$\n长期平均精神科滞留患者数为 $12$。\n\n**3. 政策杠杆**\n\n关系式 $L = \\lambda W$ 表明，要减少平均滞留患者数 $L$，政策制定者必须专注于能够减少需要滞留的患者到达率 ($\\lambda$) 或减少平均滞留时长 ($W$) 的举措。\n\n**杠杆1：针对 $\\lambda$ (到达率)**\n- **提案：**投资并扩大基于社区的精神健康危机替代方案的覆盖范围，以替代急诊科。这包括危机稳定单元 (CSUs)、移动危机响应团队和精神科急症中心。\n- **理由：**大部分因精神困扰而到急诊科就诊的个体，可以在限制较少、非医院的环境中得到安全有效的管理。通过提供一个强大且易于获得的替代护理途径，这些服务可以将患者从急诊科分流。这直接减少了因急性精神需求而到达急诊科的患者数量，从而降低了最终需要滞留等待住院的患者的到达率 $\\lambda$。\n\n**杠杆2：针对 $W$ (滞留时间)**\n- **提案：**实施一个全州范围的、实时的、集中化的精神科床位登记和安置系统。\n- **理由：**导致长时间滞留 ($W$) 的一个主要驱动因素是在寻找可用的精神科住院床位和协调患者转院过程中的行政摩擦和延迟。这通常涉及向多个机构拨打大量电话和发送传真。一个能够提供区域或全州所有设施床位可用性实时信息的集中式数字平台，将极大地减少这种“搜索时间”。通过简化确定安置地点和促进转院的流程，这样的系统直接针对 $W$ 的最大组成部分，缩短了每位患者在急诊科必须等待的平均时间。",
            "answer": "$$\n\\boxed{12}\n$$"
        },
        {
            "introduction": "有效的政策制定需要具备前瞻性，而不仅仅是应对当前的需求。本练习将引导您从静态分析转向动态建模，通过构建一个精神科医生劳动力的存量-流量模型来预测未来十年的发展趋势。您将学习如何整合培训、流失、移民和退休等多种因素，以评估长期政策（如扩大培训名额或改善留任率）对劳动力供给的潜在影响，从而为战略性人力资源规划提供数据支持。",
            "id": "4727736",
            "problem": "您的任务是构建一个完整的、可运行的程序，该程序实现一个离散时间存量流量模型，以预测未来 $10$ 年的精神科医生劳动力。该模型基于人口存量的守恒原理。其基本依据是存量在流入和流出下的守恒定律：下一个时间点的存量等于当前存量加上流入量减去流出量。\n\n考虑一个劳动力存量，定义如下。设 $S_t$ 表示第 $t$ 年末的劳动力存量，其中 $S_0$ 为给定值。对于每一年 $t \\in \\{1,2,\\dots,H\\}$（其中 $H=10$），定义恒定的年度培训流入量 $T$ 和恒定的年度移民流入量 $I$。定义损耗率 $a$ 和退休率 $r_t$，其中退休率在 $H$ 年内从初始值 $r_{\\mathrm{start}}$ 线性增加到结束值 $r_{\\mathrm{end}}$。使用守恒方程对年度更新进行建模\n$$\nS_t \\;=\\; S_{t-1}\\,\\bigl(1 - a - r_t\\bigr) \\;+\\; T \\;+\\; I \\quad \\text{for} \\quad t=1,2,\\dots,H,\n$$\n其中随时间变化的退休率为\n$$\nr_t \\;=\\; r_{\\mathrm{start}} \\;+\\; \\bigl(r_{\\mathrm{end}} - r_{\\mathrm{start}}\\bigr)\\,\\frac{t-1}{H-1}.\n$$\n所有比率均以小数表示（例如，$0.05$ 代表百分之五），计数为实值预测。\n\n请实现该模型，并使用以下参数集测试套件计算 $S_H$，每个测试用例均使用 $H=10$：\n\n- 测试用例 1 (正常路径)：$S_0 = 200$, $T = 20$, $a = 0.05$, $I = 3$, $r_{\\mathrm{start}} = 0.00$, $r_{\\mathrm{end}} = 0.04$。\n- 测试用例 2 (边界情况，无流入)：$S_0 = 200$, $T = 0$, $a = 0.05$, $I = 0$, $r_{\\mathrm{start}} = 0.00$, $r_{\\mathrm{end}} = 0.04$。\n- 测试用例 3 (边缘情况，高损耗)：$S_0 = 200$, $T = 20$, $a = 0.10$, $I = 3$, $r_{\\mathrm{start}} = 0.00$, $r_{\\mathrm{end}} = 0.04$。\n- 测试用例 4 (边缘情况，恒定退休率)：$S_0 = 200$, $T = 20$, $a = 0.05$, $I = 3$, $r_{\\mathrm{start}} = 0.04$, $r_{\\mathrm{end}} = 0.04$。\n- 测试用例 5 (政策扩张)：$S_0 = 200$, $T = 50$, $a = 0.03$, $I = 5$, $r_{\\mathrm{start}} = 0.01$, $r_{\\mathrm{end}} = 0.02$。\n\n您的程序应为每个测试用例计算预测的最终劳动力 $S_H$，并生成单行输出，其中包含按给定测试用例顺序排列的结果，结果为逗号分隔的列表，并用方括号括起来。将每个结果表示为四舍五入到两位小数的浮点数。例如，输出格式必须与以下完全一样\n$$\n[\\text{result}_1,\\text{result}_2,\\text{result}_3,\\text{result}_4,\\text{result}_5],\n$$\n其中每个 $\\text{result}_i$ 是第 $i$ 个测试用例计算出的 $S_H$，四舍五入到两位小数。",
            "solution": "问题陈述经评估为**有效**。它内容完整，科学上基于系统动力学和守恒定律的原理，并且在数学上是适定的。求解所需的所有参数和方程都已明确提供，不存在内部矛盾、歧义或违反基本原则的情况。该问题要求实现一个标准的离散时间迭代模型，这是计算科学中一个常见且合理的任务。\n\n问题的核心是一个一阶线性递推关系，描述了存量 $S_t$ 在离散时间范围内的演变。控制方程基于守恒原理：时间 $t$ 的存量是前一个时间步 $t-1$ 的存量，经过流出调整并由流入增加。\n\n该模型由两个方程定义：\n\n1.  劳动力存量守恒方程：\n    $$\n    S_t = S_{t-1}(1 - a - r_t) + T + I\n    $$\n    该方程计算第 $t$ 年末的存量 $S_t$。项 $S_{t-1}$ 是前一年的存量。因子 $(1 - a - r_t)$ 代表在损耗（以恒定率 $a$）和退休（以时变率 $r_t$）后剩余的劳动力比例。项 $T$ 和 $I$ 分别是来自培训和移民的恒定年度流入量。\n\n2.  随时间变化的退休率方程：\n    $$\n    r_t = r_{\\mathrm{start}} + (r_{\\mathrm{end}} - r_{\\mathrm{start}})\\frac{t-1}{H-1}\n    $$\n    该方程对第 $t$ 年的退休率 $r_t$ 进行建模，其中 $t \\in \\{1, 2, \\dots, H\\}$。该率在 $H = 10$ 年的时间范围内线性变化，从 $t=1$ 时的初始值 $r_{\\mathrm{start}}$ 变为 $t=H$ 时的最终值 $r_{\\mathrm{end}}$。当 $t=1$ 时，分数 $\\frac{t-1}{H-1}$ 变为 $0$，因此 $r_1 = r_{\\mathrm{start}}$。当 $t=H$ 时，分数变为 $1$，因此 $r_H = r_{\\mathrm{end}}$。\n\n找到最终存量 $S_H$ 的计算过程是一个迭代模拟。对于每个测试用例，我们都给定了初始存量 $S_0$ 和模型参数 $T$、$a$、$I$、$r_{\\mathrm{start}}$ 和 $r_{\\mathrm{end}}$。时间范围固定为 $H=10$。\n\n算法流程如下：\n1.  用给定的初始值 $S_0$ 初始化存量变量 `current_stock`。\n2.  从 $t=1$ 到 $t=H$ 遍历时间。在每次迭代 $t$ 中：\n    a.  使用其定义的线性方程计算当前年份 $t$ 的退休率 $r_t$。\n    b.  使用守恒方程，并将 `current_stock` 作为 $S_{t-1}$ 来计算新的存量 $S_t$。\n    c.  将 `current_stock` 更新为这个新计算出的值 $S_t$，以用于下一次迭代。\n3.  循环完成后（在 $t=H$ 时），`current_stock` 的最终值就是所期望的结果 $S_H$。\n4.  然后将此最终值按规定四舍五入到两位小数。\n\n对问题陈述中提供的五个参数集中的每一个重复此过程，以生成最终的结果列表。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Implements a discrete-time stock-and-flow model to project a \n    psychiatrist workforce over 10 years for a suite of test cases.\n    \"\"\"\n    \n    # Define the test cases from the problem statement.\n    # Each tuple contains: (S0, T, a, I, r_start, r_end)\n    test_cases = [\n        # Test case 1 (happy path)\n        (200, 20, 0.05, 3, 0.00, 0.04),\n        # Test case 2 (boundary, no inflows)\n        (200, 0, 0.05, 0, 0.00, 0.04),\n        # Test case 3 (edge, high attrition)\n        (200, 20, 0.10, 3, 0.00, 0.04),\n        # Test case 4 (edge, constant retirement)\n        (200, 20, 0.05, 3, 0.04, 0.04),\n        # Test case 5 (policy expansion)\n        (200, 50, 0.03, 5, 0.01, 0.02),\n    ]\n\n    results = []\n    H = 10  # Projection horizon in years\n\n    for case in test_cases:\n        S0, T, a, I, r_start, r_end = case\n        \n        # Initialize the stock with its value at t=0\n        current_stock = float(S0)\n        \n        # Iterate from t=1 to H to simulate the workforce evolution\n        for t in range(1, H + 1):\n            # Calculate the time-varying retirement rate for the current year t.\n            # The term (t-1)/(H-1) linearly interpolates the rate.\n            # np.float64 is used to ensure precision in division.\n            r_t = r_start + (r_end - r_start) * ((np.float64(t) - 1.0) / (np.float64(H) - 1.0))\n            \n            # Apply the conservation equation to calculate the stock for the next year.\n            # S_t = S_{t-1} * (1 - a - r_t) + T + I\n            current_stock = current_stock * (1.0 - a - r_t) + T + I\n            \n        # After H years, current_stock holds the value of S_H.\n        # Append the final rounded result to the list.\n        results.append(current_stock)\n\n    # Format the final output as a comma-separated list of floats rounded to\n    # two decimal places, enclosed in square brackets.\n    # The format f'{res:.2f}' ensures two decimal places are always shown.\n    print(f\"[{','.join(f'{res:.2f}' for res in results)}]\")\n\nsolve()\n```"
        }
    ]
}
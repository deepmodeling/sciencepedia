{
    "hands_on_practices": [
        {
            "introduction": "Optical Coherence Tomography (OCT) measures optical path length, which must be converted to physical distance using an assumed refractive index. This exercise explores what happens when the true tissue refractive index deviates from the instrument's calibrated value, a common occurrence in pathological states like corneal edema. By working through this problem , you will learn to quantify the resulting measurement error, highlighting a critical and often overlooked assumption in quantitative OCT imaging and building your intuition for how physiological changes impact measurement accuracy.",
            "id": "4679476",
            "problem": "A high-resolution Optical Coherence Tomography (OCT) system estimates corneal thickness by converting the interferometric optical delay into a physical distance using a constant tissue refractive index. Let the interferometric optical path length be defined as $$L = \\int_{0}^{t} n(s)\\, ds,$$ where $n(s)$ is the local refractive index and $t$ is the physical thickness of the cornea along the axial direction. For a homogeneous layer, assume $n(s) = n$ is constant so that $$L = n\\, t.$$ The OCT system reports the corneal thickness by dividing the measured optical path length $L$ by an assumed refractive index $n_{a}$, i.e., the reported thickness is $$t_{m} = \\frac{L}{n_{a}}.$$ In the presence of corneal edema, the true refractive index changes from $n_{a} = 1.376$ to $n_{t} = 1.355$, while the device continues to use $n_{a}$ for axial scaling. Using only the definitions above and physical reasoning grounded in interferometric path length, derive the fractional error in the reported thickness defined by $$\\varepsilon = \\frac{t_{m} - t_{t}}{t_{t}},$$ where $t_{t}$ is the true thickness. Compute the numerical value of $\\varepsilon$ for the given refractive indices. Express the final answer as a unitless decimal fraction and round your answer to four significant figures.",
            "solution": "The problem statement is first subjected to a critical validation process.\n\n**Step 1: Extract Givens**\n-   Definition of interferometric optical path length: $$L = \\int_{0}^{t} n(s)\\, ds$$\n-   Optical path length for a homogeneous layer: $$L = n\\, t$$\n-   Reported corneal thickness by the Optical Coherence Tomography (OCT) system: $$t_{m} = \\frac{L}{n_{a}}$$\n-   Assumed refractive index used by the device: $n_{a} = 1.376$\n-   True refractive index of the edematous cornea: $n_{t} = 1.355$\n-   True physical thickness of the cornea: $t_{t}$\n-   Definition of fractional error in reported thickness: $$\\varepsilon = \\frac{t_{m} - t_{t}}{t_{t}}$$\n-   The final numerical answer must be rounded to four significant figures.\n\n**Step 2: Validate Using Extracted Givens**\n-   **Scientific Grounding**: The problem is scientifically grounded. It correctly models the fundamental principle of OCT imaging, where an optical path length delay is measured via interferometry and converted to a physical distance using a group refractive index. The provided values for the refractive index of a normal cornea ($n_{a} = 1.376$) and an edematous cornea ($n_{t} = 1.355$) are physiologically realistic, as increased water content (edema) lowers the tissue's refractive index towards that of water (approximately $1.33$).\n-   **Well-Posedness**: The problem is well-posed. It provides all necessary definitions, variables, and constants to derive a unique solution for the fractional error $\\varepsilon$.\n-   **Objectivity**: The problem is stated in precise, objective, and unbiased language.\n\n**Step 3: Verdict and Action**\nThe problem is valid as it is scientifically sound, self-contained, and well-posed. There are no contradictions, ambiguities, or violations of physical principles. Therefore, a solution will be derived.\n\nThe objective is to derive an expression for the fractional error, $\\varepsilon$, and compute its numerical value. The fractional error is defined as:\n$$\\varepsilon = \\frac{t_{m} - t_{t}}{t_{t}}$$\nwhere $t_{m}$ is the measured thickness and $t_{t}$ is the true thickness.\n\nThe core principle of the measurement is that the interferometer in the OCT system measures the optical path length, $L$. For the cornea in its edematous state, the true physical thickness is $t_{t}$ and the true, homogeneous refractive index is $n_{t}$. The optical path length measured by the instrument is therefore:\n$$L = n_{t} t_{t}$$\nThis is the fundamental physical quantity obtained from the interferometric measurement.\n\nThe OCT system then computes the reported thickness, $t_{m}$, by dividing this measured optical path length $L$ by its pre-calibrated, assumed refractive index, $n_{a}$:\n$$t_{m} = \\frac{L}{n_{a}}$$\n\nTo find the relationship between the measured thickness $t_{m}$ and the true thickness $t_{t}$, we can substitute the expression for $L$ into the equation for $t_{m}$:\n$$t_{m} = \\frac{n_{t} t_{t}}{n_{a}}$$\nThis equation shows that the measured thickness is a scaled version of the true thickness, where the scaling factor is the ratio of the true refractive index to the assumed refractive index.\n\nNow, we can substitute this expression for $t_{m}$ into the formula for the fractional error $\\varepsilon$:\n$$\\varepsilon = \\frac{\\left(\\frac{n_{t} t_{t}}{n_{a}}\\right) - t_{t}}{t_{t}}$$\n\nWe can factor out the true thickness $t_{t}$ from the numerator:\n$$\\varepsilon = \\frac{t_{t} \\left(\\frac{n_{t}}{n_{a}} - 1\\right)}{t_{t}}$$\n\nSince the true thickness $t_{t}$ must be a non-zero positive value, we can cancel $t_{t}$ from the numerator and the denominator, yielding the final expression for the fractional error:\n$$\\varepsilon = \\frac{n_{t}}{n_{a}} - 1$$\nThis can also be written with a common denominator as:\n$$\\varepsilon = \\frac{n_{t} - n_{a}}{n_{a}}$$\n\nThis result is physically intuitive: the fractional error in thickness is directly related to the fractional difference between the true and assumed refractive indices.\n\nTo compute the numerical value of $\\varepsilon$, we substitute the given values for $n_{t}$ and $n_{a}$:\n$n_{t} = 1.355$\n$n_{a} = 1.376$\n\n$$\\varepsilon = \\frac{1.355 - 1.376}{1.376} = \\frac{-0.021}{1.376}$$\n\nPerforming the division:\n$$\\varepsilon \\approx -0.0152616279...$$\n\nThe problem requires the answer to be rounded to four significant figures. The first significant figure is the $1$. The fourth significant figure is the $6$. The digit following the fourth significant figure is $1$, which is less than $5$, so we round down (i.e., we do not change the last digit).\n$$\\varepsilon \\approx -0.01526$$\nThe negative sign indicates that the OCT system underestimates the true thickness of the edematous cornea because it is using a refractive index ($n_{a}=1.376$) that is higher than the true refractive index ($n_{t}=1.355$).",
            "answer": "$$\\boxed{-0.01526}$$"
        },
        {
            "introduction": "Cross-sectional images (B-scans) are constructed over a finite time, making them susceptible to patient motion during acquisition. This problem models the impact of lateral eye drift on a corneal thickness map, demonstrating how motion introduces a predictable shear artifact into the data. This practice  is designed to deepen your understanding of how acquisition dynamics create image artifacts and to explore the fundamental limits of post-processing correction methods, such as the residual quantization error that persists even after ideal image registration.",
            "id": "4679445",
            "problem": "In high-resolution anterior segment imaging of the cornea using Anterior Segment Optical Coherence Tomography (AS-OCT), a two-dimensional cross-sectional image (a B-scan) is acquired by sequentially collecting adjacent axial scans (A-scans) over a finite acquisition time. Consider a single B-scan that nominally traverses the corneal apex along the horizontal meridian. Let the true central corneal thickness field in the vicinity of the apex be locally approximated by a first-order model with a constant lateral gradient, so that the thickness at lateral coordinate $x$ can be written as $T(x) \\approx T(0) + \\left(\\frac{dT}{dx}\\right) x$, with $\\frac{dT}{dx}$ constant near $x=0$. During acquisition, the eye undergoes a constant lateral drift with velocity $v$, causing a translation of the sampling coordinate such that the effective lateral coordinate is $x + v t$ at time $t$, where $t \\in [0, T_{\\mathrm{acq}}]$ is the acquisition time and $T_{\\mathrm{acq}}$ is the total duration of the B-scan. Assume the following experimentally measured parameters:\n- Lateral drift velocity $v = 0.5\\ \\mathrm{mm/s}$,\n- B-scan acquisition duration $T_{\\mathrm{acq}} = 0.2\\ \\mathrm{s}$,\n- Local lateral thickness gradient at the apex $\\frac{dT}{dx} = 25\\ \\mathrm{\\mu m/mm}$.\n\nTo correct for motion artifacts, a rigid registration (pure translation) is applied post-acquisition to align the B-scan to the apex using nearest-neighbor shifts on a discrete lateral sampling grid of pitch $s = 0.01\\ \\mathrm{mm}$. Model the residual lateral misalignment after registration as a discretization (quantization) error uniformly distributed over the interval $[-s/2, s/2]$.\n\nUsing first principles:\n1. Formulate how lateral drift during acquisition introduces a bias in the measured thickness via the local thickness gradient and the drift-induced lateral displacement.\n2. Explain why rigid registration as a translation compensates this bias and why discrete sampling introduces a residual alignment error.\n3. Compute the expected absolute residual error in the measured thickness after rigid registration, given the uniform-distribution model for the residual lateral misalignment.\n\nYour final answer must be the single numerical value of the expected absolute residual thickness error after rigid registration. Express your answer in micrometers and round to four significant figures.",
            "solution": "The problem is evaluated as scientifically sound, well-posed, objective, and internally consistent. All necessary parameters for the calculation are provided, and the scenario described is a realistic application of physics and statistics to medical imaging artifacts. We may therefore proceed with a solution.\n\nThe solution is developed in three parts as requested by the problem statement.\n\n1.  **Formulation of Bias due to Lateral Drift**\n\nLet the true corneal thickness field near the apex be locally approximated by the first-order model $T(x) \\approx T(0) + kx$, where $x$ is the lateral coordinate, $T(0)$ is the thickness at the apex ($x=0$), and $k = \\frac{dT}{dx}$ is the local lateral thickness gradient. The value of $k$ is given as a constant.\n\nDuring the B-scan acquisition, the eye undergoes a constant lateral drift with velocity $v$. The problem states that this results in an effective lateral coordinate of sampling $x_{\\text{eff}} = x + vt$ at time $t$, where $x$ is the intended lateral coordinate. This means that the A-scan intended for location $x$ at time $t$ actually measures the thickness of the corneal tissue at location $x+vt$.\n\nThe measured thickness at the intended coordinate $x$ at time $t$, denoted $T_{\\text{meas}}(x,t)$, is therefore the true thickness at the effective coordinate $x_{\\text{eff}}$:\n$$T_{\\text{meas}}(x,t) = T(x_{\\text{eff}}) = T(x+vt)$$\nSubstituting the linear model for $T(x)$:\n$$T_{\\text{meas}}(x,t) \\approx T(0) + k(x+vt)$$\nThe intended measurement at this location would have been the true thickness $T(x) = T(0) + kx$. The bias, or error, in the measured thickness at time $t$ is the difference between the measured and true thickness at the intended location $x$:\n$$\\Delta T_{\\text{bias}}(x,t) = T_{\\text{meas}}(x,t) - T(x) = \\left( T(0) + k(x+vt) \\right) - \\left( T(0) + kx \\right)$$\n$$\\Delta T_{\\text{bias}}(x,t) = kx + kvt - kx = kvt$$\nThis formulation shows that the lateral drift introduces a thickness bias equal to the product of the local thickness gradient $k$, the drift velocity $v$, and the time $t$ elapsed during the acquisition. This bias is independent of the intended lateral position $x$ but grows linearly with time throughout the scan, causing a shear distortion in the acquired B-scan image.\n\n2.  **Explanation of Registration and Residual Error**\n\nPost-acquisition rigid registration attempts to correct for motion artifacts by applying a purely translational shift to the entire B-scan image. While the artifact is a shear ($kvt$), a rigid translation can be used to correct for the displacement at a single point or an average displacement over the scan. The purpose of this step is to align a key feature, such as the corneal apex, to its correct position (e.g., $x=0$).\n\nThe reason this compensation is imperfect, leading to a residual error, lies in the discrete nature of the digital image. The acquired B-scan data exists on a discrete lateral sampling grid with a fixed pitch, $s$. Any translational shift applied during registration must be an integer multiple of this pitch, i.e., of the form $n \\cdot s$ where $n$ is an integer.\n\nLet the ideal, continuous shift required to perfectly align the chosen feature be $\\Delta x_{\\text{ideal}}$. Since the registration algorithm can only apply discrete shifts, it will choose the integer $n$ that minimizes the difference $|\\Delta x_{\\text{ideal}} - n \\cdot s|$. This results in a residual lateral misalignment, $\\delta x$, given by:\n$$\\delta x = \\Delta x_{\\text{ideal}} - n \\cdot s$$\nThis quantization error, $\\delta x$, is the fundamental source of the residual alignment error after discrete registration. The problem specifies that this error can be modeled as a random variable uniformly distributed over the interval $[-s/2, s/2]$, as any ideal shift is at most a distance of $s/2$ from the nearest grid point.\n\n3.  **Computation of Expected Absolute Residual Error**\n\nThe residual lateral misalignment, $\\delta x$, causes a residual error in the measured thickness. Let the random variable for this misalignment be $X_{\\text{res}}$. Based on the problem statement, its probability density function (PDF) is that of a uniform distribution on $[-s/2, s/2]$:\n$$f(x) = \\begin{cases} \\frac{1}{s} & \\text{if } x \\in [-s/2, s/2] \\\\ 0 & \\text{otherwise} \\end{cases}$$\nThis lateral error $\\delta x$ translates into a residual thickness error, $\\Delta T_{\\text{res}}$, via the thickness gradient $k$. At the apex, after ideal registration would have centered it at $x=0$, the residual misalignment $\\delta x$ means the thickness is measured at $\\delta x$ instead of $0$. The resulting thickness error is:\n$$\\Delta T_{\\text{res}} = T(\\delta x) - T(0) = (T(0) + k \\cdot \\delta x) - T(0) = k \\cdot \\delta x$$\nThus, the residual thickness error is the random variable $\\Delta T_{\\text{res}} = k \\cdot X_{\\text{res}}$. We need to compute the expected absolute value of this error, $E[|\\Delta T_{\\text{res}}|]$.\n$$E[|\\Delta T_{\\text{res}}|] = E[|k \\cdot X_{\\text{res}}|]$$\nSince the given gradient $k = 25\\ \\mathrm{\\mu m/mm}$ is a positive constant, we can write:\n$$E[|\\Delta T_{\\text{res}}|] = k \\cdot E[|X_{\\text{res}}|]$$\nWe now calculate the expected absolute value of $X_{\\text{res}}$:\n$$E[|X_{\\text{res}}|] = \\int_{-\\infty}^{\\infty} |x| f(x) dx = \\int_{-s/2}^{s/2} |x| \\frac{1}{s} dx$$\nDue to the symmetry of the integrand $|x|$ and the integration interval, we can simplify the integral:\n$$E[|X_{\\text{res}}|] = \\frac{1}{s} \\cdot 2 \\int_{0}^{s/2} x dx = \\frac{2}{s} \\left[ \\frac{x^2}{2} \\right]_{0}^{s/2}$$\n$$E[|X_{\\text{res}}|] = \\frac{2}{s} \\left( \\frac{(s/2)^2}{2} - 0 \\right) = \\frac{2}{s} \\cdot \\frac{s^2/4}{2} = \\frac{2}{s} \\cdot \\frac{s^2}{8} = \\frac{s}{4}$$\nSubstituting this result back into the expression for the expected absolute thickness error:\n$$E[|\\Delta T_{\\text{res}}|] = k \\cdot \\frac{s}{4}$$\nNow, we substitute the numerical values provided in the problem:\n-   $k = \\frac{dT}{dx} = 25\\ \\mathrm{\\mu m/mm}$\n-   $s = 0.01\\ \\mathrm{mm}$\n\n$$E[|\\Delta T_{\\text{res}}|] = (25\\ \\mathrm{\\mu m/mm}) \\cdot \\frac{0.01\\ \\mathrm{mm}}{4} = 25 \\cdot (0.0025)\\ \\mathrm{\\mu m} = 0.0625\\ \\mathrm{\\mu m}$$\nThe problem requires the answer to be expressed in micrometers and rounded to four significant figures. The calculated value is $0.0625\\ \\mathrm{\\mu m}$. To express this with four significant figures, we write it as $0.06250\\ \\mathrm{\\mu m}$.",
            "answer": "$$\n\\boxed{0.06250}\n$$"
        },
        {
            "introduction": "Many key metrics in anterior segment imaging rely on the precise localization of anatomical landmarks, a process prone to inter-observer variability. This hands-on coding exercise uses a simplified geometric model of the anterior chamber angle to investigate how small inconsistencies in identifying the scleral spur propagate into significant errors in derived clinical parameters. This practice  is vital for developing a critical perspective on measurement reliability, revealing that different metrics possess different sensitivities to the same source of landmarking error—an essential insight for interpreting clinical data and designing robust analysis protocols.",
            "id": "4679464",
            "problem": "You are given a simplified geometric model of the anterior chamber angle from high-resolution anterior segment imaging, such as Anterior Segment Optical Coherence Tomography (AS-OCT) or Ultrasound Biomicroscopy (UBM). In this model, the local segment of the corneal endothelium and the local segment of the anterior iris surface near the true scleral spur are approximated by two straight lines intersecting at the true scleral spur, placed at the origin of a Cartesian coordinate system. The coordinate system is chosen such that the corneal endothelium coincides with the horizontal axis, while the anterior iris surface is a straight line with slope $k$ passing through the origin. The $x$-axis lies along the local tangent direction of the trabecular meshwork, and the $y$-axis is perpendicular to it.\n\nBased on this geometric setup, the following angle metrics are defined:\n- Angle Opening Distance at distance $d$ ($\\mathrm{AOD}_d$): the perpendicular distance between the corneal endothelium and the anterior iris surface along a line that is perpendicular to the corneal endothelium at a point whose arc-length position along the corneal endothelium is $d$ from the true scleral spur. In this coordinate system of straight lines, the perpendicular is the vertical line at $x=d$, and the $\\mathrm{AOD}_d$ equals the vertical separation at that $x$.\n- Trabecular-Iris Space Area up to distance $d$ ($\\mathrm{TISA}_d$): the area enclosed by the corneal endothelium, the anterior iris surface, the vertical line $x=0$ at the scleral spur, and the vertical line $x=d$.\n- Trabecular-Iris Angle (TIA): the angle between the corneal endothelium and the anterior iris surface.\n\nAssume that a clinician localizes the scleral spur with an error of $\\Delta$ along the $x$-axis (the trabecular meshwork tangent direction), where $\\Delta \\in \\{+100\\ \\mu\\mathrm{m},-100\\ \\mu\\mathrm{m}\\}$. Under this mislocalization, all measurements using the mislocalized scleral spur as the reference are performed at positions relative to that mislocalized origin. Consequently, for $\\mathrm{AOD}_d$, the vertical separation is taken at the vertical line $x=d$ relative to the mislocalized origin; for $\\mathrm{TISA}_d$, the area is accumulated between $x=0$ and $x=d$ relative to the mislocalized origin; and for TIA, the angle between the two lines is measured as defined originally.\n\nStarting from the fundamental geometric definitions of straight lines, perpendicular distance between lines, the definite integral of a function over an interval, and the arctangent function relating slope to angle, derive the expressions for the perturbed metrics and compute their deviations from the baseline (true spur) metrics for each given pair $(k,d)$ and for each $\\Delta \\in \\{+100\\ \\mu\\mathrm{m},-100\\ \\mu\\mathrm{m}\\}$.\n\nYour program must:\n1. Treat the anterior iris slope magnitude as $|k|$ to ensure a nonnegative geometric separation.\n2. Compute, for each test case $(k,d)$, the differences between the mislocalized and baseline metrics for both $\\Delta=+100\\ \\mu\\mathrm{m}$ and $\\Delta=-100\\ \\mu\\mathrm{m}$:\n   - $\\mathrm{AOD\\_diff\\_+}$ and $\\mathrm{AOD\\_diff\\_-}$ in $\\mu\\mathrm{m}$,\n   - $\\mathrm{TISA\\_diff\\_+}$ and $\\mathrm{TISA\\_diff\\_-}$ in $\\mu\\mathrm{m}^2$,\n   - $\\mathrm{TIA\\_diff\\_+}$ and $\\mathrm{TIA\\_diff\\_-}$ in degrees.\n3. Express angles in degrees. All outputs must be floats. Units for distance-related outputs are mandatory: AOD differences in $\\mu\\mathrm{m}$ and TISA differences in $\\mu\\mathrm{m}^2$.\n4. Aggregate results as a single line containing a comma-separated list of lists, where each inner list corresponds to one test case in the order provided and contains exactly six floats in the order $[\\mathrm{AOD\\_diff\\_+},\\mathrm{AOD\\_diff\\_-},\\mathrm{TISA\\_diff\\_+},\\mathrm{TISA\\_diff\\_-},\\mathrm{TIA\\_diff\\_+},\\mathrm{TIA\\_diff\\_-}]$.\n\nTest suite:\n- $(k,d) = (0.5,500\\ \\mu\\mathrm{m})$\n- $(k,d) = (0.1,500\\ \\mu\\mathrm{m})$\n- $(k,d) = (1.0,500\\ \\mu\\mathrm{m})$\n- $(k,d) = (0.5,250\\ \\mu\\mathrm{m})$\n- $(k,d) = (0.5,750\\ \\mu\\mathrm{m})$\n- $(k,d) = (0.0,500\\ \\mu\\mathrm{m})$\n- $(k,d) = (-0.3,500\\ \\mu\\mathrm{m})$\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each element is the inner list described above (for example, $[ [\\dots],[\\dots],\\dots ]$).",
            "solution": "The problem is well-posed, scientifically grounded in a standard simplified model of anterior chamber geometry, and contains all necessary information for a unique solution. It is therefore deemed valid.\n\nThe core of this problem lies in deriving the changes to three key ophthalmic metrics—Angle Opening Distance (AOD), Trabecular-Iris Space Area (TISA), and Trabecular-Iris Angle (TIA)—when the reference point for measurement, the scleral spur, is mislocalized. We will systematically derive the expressions for the baseline and perturbed metrics from first principles.\n\n**1. Formal Geometric Model and Baseline Metrics**\n\nThe problem defines a Cartesian coordinate system where the true scleral spur is at the origin, $O(0, 0)$.\n- The corneal endothelium is modeled as the line $y_c(x) = 0$.\n- The anterior iris surface is modeled as the line $y_i(x) = kx$. The problem specifies that for geometric calculations, we must use the magnitude of the slope, $|k|$, to ensure a non-negative physical separation. Thus, the iris line equation is $y_i(x) = |k|x$.\n\nThe vertical separation, $h(x)$, between the two surfaces at any position $x$ is $h(x) = y_i(x) - y_c(x) = |k|x$.\n\n**Baseline Angle Opening Distance ($\\mathrm{AOD}_d$)**\n$\\mathrm{AOD}_d$ is defined as the vertical separation at a distance $d$ from the true scleral spur (i.e., at $x=d$).\n$$\n\\mathrm{AOD}_{d, \\text{base}} = h(d) = |k|d\n$$\n\n**Baseline Trabecular-Iris Space Area ($\\mathrm{TISA}_d$)**\n$\\mathrm{TISA}_d$ is the area enclosed between $x=0$ and $x=d$. This is the definite integral of the separation function $h(x)$ over the interval $[0, d]$.\n$$\n\\mathrm{TISA}_{d, \\text{base}} = \\int_{0}^{d} h(x) \\,dx = \\int_{0}^{d} |k|x \\,dx = |k| \\left[ \\frac{x^2}{2} \\right]_{0}^{d} = \\frac{1}{2}|k|d^2\n$$\n\n**Baseline Trabecular-Iris Angle (TIA)**\nTIA is the angle, $\\theta$, between the corneal endothelium ($y=0$) and the anterior iris surface ($y=|k|x$). The slope of the iris line is $m = |k|$. The angle is related to the slope by the arctangent function.\n$$\n\\tan(\\theta) = |k| \\implies \\mathrm{TIA}_{\\text{base}} = \\arctan(|k|)\n$$\n\n**2. Effect of Scleral Spur Mislocalization**\n\nThe scleral spur is mislocalized by a displacement $\\Delta$ along the $x$-axis. This means the new, perceived origin $O'$ is at the global coordinates $(\\Delta, 0)$. The geometric configuration of the cornea and iris lines remains unchanged, as they are anatomical structures. The mislocalization only affects the reference frame for the measurements.\n\nA measurement performed at a distance $d$ relative to the mislocalized spur $O'$ (as if $x'=0$ was at $O'$) is actually being taken at the global coordinate $x_{\\text{global}} = \\Delta + d$. Similarly, an area calculation starting from the mislocalized spur $O'$ up to a distance $d$ corresponds to an integration over the global $x$ interval $[\\Delta, \\Delta+d]$.\n\n**3. Derivation of Perturbed Metrics**\n\n**Perturbed Angle Opening Distance ($\\mathrm{AOD}_d$)**\nThe perturbed $\\mathrm{AOD}_d$ is measured at a horizontal distance $d$ from the mislocalized spur, which corresponds to the global coordinate $x_{\\text{global}} = \\Delta + d$.\n$$\n\\mathrm{AOD}_{d, \\text{pert}}(\\Delta) = h(\\Delta + d) = |k|(\\Delta + d)\n$$\n\n**Perturbed Trabecular-Iris Space Area ($\\mathrm{TISA}_d$)**\nThe perturbed $\\mathrm{TISA}_d$ is the area integrated over the global interval $[\\Delta, \\Delta+d]$.\n$$\n\\mathrm{TISA}_{d, \\text{pert}}(\\Delta) = \\int_{\\Delta}^{\\Delta+d} |k|x \\,dx = |k| \\left[ \\frac{x^2}{2} \\right]_{\\Delta}^{\\Delta+d}\n$$\n$$\n\\mathrm{TISA}_{d, \\text{pert}}(\\Delta) = \\frac{|k|}{2} \\left( (\\Delta+d)^2 - \\Delta^2 \\right) = \\frac{|k|}{2} \\left( \\Delta^2 + 2d\\Delta + d^2 - \\Delta^2 \\right) = \\frac{|k|}{2} (d^2 + 2d\\Delta)\n$$\n$$\n\\mathrm{TISA}_{d, \\text{pert}}(\\Delta) = \\frac{1}{2}|k|d^2 + |k|d\\Delta\n$$\n\n**Perturbed Trabecular-Iris Angle (TIA)**\nThe problem states that for TIA, \"the angle between the two lines is measured as defined originally.\" The angle between two intersecting lines is an intrinsic geometric property, independent of the choice of origin for the coordinate system. Since the lines themselves have not changed, the angle between them remains the same.\n$$\n\\mathrm{TIA}_{\\text{pert}} = \\mathrm{TIA}_{\\text{base}} = \\arctan(|k|)\n$$\n\n**4. Derivation of Metric Differences**\n\nWe now compute the differences between the perturbed and baseline metrics.\n\n**AOD Difference**\n$$\n\\mathrm{AOD\\_diff} = \\mathrm{AOD}_{d, \\text{pert}} - \\mathrm{AOD}_{d, \\text{base}} = |k|(\\Delta + d) - |k|d = |k|\\Delta\n$$\n\n**TISA Difference**\n$$\n\\mathrm{TISA\\_diff} = \\mathrm{TISA}_{d, \\text{pert}} - \\mathrm{TISA}_{d, \\text{base}} = \\left( \\frac{1}{2}|k|d^2 + |k|d\\Delta \\right) - \\frac{1}{2}|k|d^2 = |k|d\\Delta\n$$\nThe derivation based on the integral difference is correct.\n\n**TIA Difference**\n$$\n\\mathrm{TIA\\_diff} = \\mathrm{TIA}_{\\text{pert}} - \\mathrm{TIA}_{\\text{base}} = \\arctan(|k|) - \\arctan(|k|) = 0\n$$\n\n**5. Final Formulas for a given test case $(k,d)$**\n\nThe problem requires computing the differences for $\\Delta_+ = +100\\ \\mu\\mathrm{m}$ and $\\Delta_- = -100\\ \\mu\\mathrm{m}$.\n- $\\mathrm{AOD\\_diff\\_+} = |k|\\Delta_+ = 100|k|\\ \\mu\\mathrm{m}$\n- $\\mathrm{AOD\\_diff\\_-} = |k|\\Delta_- = -100|k|\\ \\mu\\mathrm{m}$\n- $\\mathrm{TISA\\_diff\\_+} = |k|d\\Delta_+ = 100|k|d\\ \\mu\\mathrm{m}^2$\n- $\\mathrm{TISA\\_diff\\_-} = |k|d\\Delta_- = -100|k|d\\ \\mu\\mathrm{m}^2$\n- $\\mathrm{TIA\\_diff\\_+} = 0\\ \\text{degrees}$\n- $\\mathrm{TIA\\_diff\\_-} = 0\\ \\text{degrees}$\n\nThese formulae are now implemented to compute the results for the provided test suite.",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the differences in ophthalmic metrics (AOD, TISA, TIA)\n    due to scleral spur mislocalization based on a simplified geometric model.\n    \"\"\"\n    \n    # Test suite provided in the problem statement.\n    # Each tuple is in the format (k, d), where k is the slope\n    # and d is the distance in micrometers.\n    test_cases = [\n        (0.5, 500),\n        (0.1, 500),\n        (1.0, 500),\n        (0.5, 250),\n        (0.5, 750),\n        (0.0, 500),\n        (-0.3, 500),\n    ]\n\n    # Mislocalization errors in micrometers.\n    delta_plus = 100.0\n    delta_minus = -100.0\n\n    # List to store the results for each test case.\n    results = []\n\n    for k, d in test_cases:\n        # Per problem specification, use the magnitude of the slope k.\n        abs_k = np.abs(k)\n\n        # The derived formulas for the differences are:\n        # AOD_diff = |k| * Delta\n        # TISA_diff = |k| * d * Delta\n        # TIA_diff = 0\n\n        # Calculate differences for Delta = +100 um\n        aod_diff_plus = abs_k * delta_plus\n        tisa_diff_plus = abs_k * d * delta_plus\n        tia_diff_plus = 0.0\n\n        # Calculate differences for Delta = -100 um\n        aod_diff_minus = abs_k * delta_minus\n        tisa_diff_minus = abs_k * d * delta_minus\n        tia_diff_minus = 0.0\n\n        # Assemble the results for the current test case in the required order.\n        # [AOD_diff_+, AOD_diff_-, TISA_diff_+, TISA_diff_-, TIA_diff_+, TIA_diff_-]\n        case_results = [\n            aod_diff_plus,\n            aod_diff_minus,\n            tisa_diff_plus,\n            tisa_diff_minus,\n            tia_diff_plus,\n            tia_diff_minus,\n        ]\n        \n        results.append(case_results)\n\n    # Format the final output string as a comma-separated list of lists.\n    # e.g., [[...], [...], ...]\n    output_string = f\"[{','.join(map(str, results))}]\"\n    \n    print(output_string)\n\nsolve()\n```"
        }
    ]
}
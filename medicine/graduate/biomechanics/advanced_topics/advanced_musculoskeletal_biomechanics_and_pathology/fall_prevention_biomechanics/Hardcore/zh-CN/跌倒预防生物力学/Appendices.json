{
    "hands_on_practices": [
        {
            "introduction": "为了维持静态平衡，身体的重心（COM）的垂直投影必须保持在支撑基底（BoS）内。这个基本原则决定了我们在静止站立时的姿势极限。本练习  将身体简化为倒立摆模型，要求你从第一性原理出发，推导出在不抬起脚跟或脚尖的情况下，一个人可以向前倾斜的最大角度。通过这个练习，你将能定量地理解身体几何形状和姿态如何共同决定静态稳定性的边界。",
            "id": "4173277",
            "problem": "一名受试者双脚平放在水平地面上静立。将踝关节以上的整个身体建模为一个单一的刚性节段，该节段可以在矢状面内围绕踝关节旋转，且足部不抬离地面。将足部建模为从脚跟到脚尖长度为 $L$ 的刚性支撑，踝关节中心位于脚跟前方 $a$ 距离处（$0<a<L$）。在直立姿势时，身体质心（COM）位于踝关节中心上方高度为 $h$ 且水平前移量为 $x_0$ 的位置。推导受试者可以向前倾斜的最大角度 $\\theta_{\\max}$（以弧度为单位）的解析表达式，以 $L, a, h, x_0$ 表示。",
            "solution": "该问题已经过验证，具有科学依据、是适定且客观的。它是静态平衡原理在生物力学模型中的一个标准应用。\n\n我们首先建立一个坐标系。设原点 $(0,0)$ 为踝关节的中心。设 $x$ 轴为水平方向并指向前方（向前），$y$ 轴为垂直方向并指向上方。\n\n在初始直立姿势（$\\theta=0$）下，身体的质心（COM）位于坐标 $(x_0, h)$ 处。质心的位置矢量为 $\\vec{r}_{0} = x_0\\hat{i} + h\\hat{j}$。\n\n受试者向前倾斜一个角度 $\\theta$。这对应于围绕原点（踝关节）的刚体旋转。由于前倾（$\\theta > 0$）是一次向前旋转，在我们的坐标系中，这是一次顺时针旋转。一个点 $(x,y)$ 顺时针旋转角度 $\\theta$ 后的旋转变换为 $(x\\cos\\theta + y\\sin\\theta, -x\\sin\\theta + y\\cos\\theta)$。\n\n将此变换应用于初始质心坐标 $(x_0, h)$，我们得到质心的新坐标 $(x_{\\text{COM}}, y_{\\text{COM}})$，它是 $\\theta$ 的函数：\n$$x_{\\text{COM}}(\\theta) = x_0 \\cos\\theta + h \\sin\\theta$$\n$$y_{\\text{COM}}(\\theta) = -x_0 \\sin\\theta + h \\cos\\theta$$\n\n为使身体处于静态平衡，整个系统（身体和足部）所受的合力和合力矩必须为零。外力包括作用于质心的重力 $\\vec{F}_g = -mg\\hat{j}$ 和地面反作用力（GRF）。为达到平衡，地面反作用力必须与重力大小相等、方向相反，即 $\\vec{F}_{\\text{GRF}} = mg\\hat{j}$。为使合力矩为零，地面反作用力的作用线必须与重力的作用线共线。\n重力的作用线是穿过当前质心的垂线，即 $x = x_{\\text{COM}}(\\theta)$。因此，合地面反作用力作用在地面上一个称为压力中心（CoP）的点，其水平位置 $x_{\\text{CoP}}$ 必须与质心的水平位置重合。\n\n因此，重力作用垂线在地面上的投影点相对于踝关节的位置由质心的水平坐标给出：\n$$x_{\\text{proj}}(\\theta) = x_{\\text{COM}}(\\theta) = x_0 \\cos\\theta + h \\sin\\theta$$\n\n接下来，我们使用静态稳定性条件。只要压力中心（CoP）位于支撑基底（BoS）内，稳定性就能维持。支撑基底是足部与地面之间的接触区域。在此模型中，它是从脚跟到脚尖的线段。当踝关节位于 $x=0$ 时，脚跟位于 $x=-a$，脚尖位于 $x=L-a$。因此，支撑基底是区间 $[-a, L-a]$。\n\n稳定性条件为：\n$$-a \\le x_{\\text{CoP}}(\\theta) \\le L-a$$\n当压力中心位于支撑基底的最前点，即脚尖处时，达到最大允许前倾角 $\\theta_{\\max}$。在这个不稳定的临界点上：\n$$x_{\\text{CoP}}(\\theta_{\\max}) = L-a$$\n代入我们推导出的 $x_{\\text{CoP}}$ 表达式：\n$$x_0 \\cos\\theta_{\\max} + h \\sin\\theta_{\\max} = L-a$$\n\n这是一个正弦和余弦的线性组合，可以使用辅助角公式求解。我们将左侧表示为 $R\\sin(\\theta + \\beta)$ 的形式。\n设 $R = \\sqrt{x_0^2 + h^2}$。我们可以将方程改写为：\n$$R \\left( \\frac{h}{R} \\sin\\theta_{\\max} + \\frac{x_0}{R} \\cos\\theta_{\\max} \\right) = L-a$$\n让我们定义一个辅助角 $\\beta$，使得 $\\cos\\beta = \\frac{h}{R}$ 且 $\\sin\\beta = \\frac{x_0}{R}$。这个定义是有效的，因为 $(\\frac{h}{R})^2 + (\\frac{x_0}{R})^2 = \\frac{h^2+x_0^2}{R^2} = 1$。角度 $\\beta$ 由 $\\tan\\beta = \\frac{\\sin\\beta}{\\cos\\beta} = \\frac{x_0/R}{h/R} = \\frac{x_0}{h}$ 给出。因此，$\\beta = \\arctan\\left(\\frac{x_0}{h}\\right)$。\n\n将此代入方程中，我们使用正弦和角恒等式 $\\sin(A+B) = \\sin A \\cos B + \\cos A \\sin B$：\n$$R (\\sin\\theta_{\\max}\\cos\\beta + \\cos\\theta_{\\max}\\sin\\beta) = L-a$$\n$$R \\sin(\\theta_{\\max} + \\beta) = L-a$$\n现在，我们求解 $\\theta_{\\max}$：\n$$\\sin(\\theta_{\\max} + \\beta) = \\frac{L-a}{R} = \\frac{L-a}{\\sqrt{x_0^2 + h^2}}$$\n$$\\theta_{\\max} + \\beta = \\arcsin\\left(\\frac{L-a}{\\sqrt{x_0^2 + h^2}}\\right)$$\n$$\\theta_{\\max} = \\arcsin\\left(\\frac{L-a}{\\sqrt{x_0^2 + h^2}}\\right) - \\beta$$\n最后，代入 $\\beta$ 的表达式：\n$$\\theta_{\\max} = \\arcsin\\left(\\frac{L-a}{\\sqrt{x_0^2 + h^2}}\\right) - \\arctan\\left(\\frac{x_0}{h}\\right)$$\n这就是最大前倾角的封闭形式解析表达式，单位为弧度。",
            "answer": "$$\n\\boxed{\\arcsin\\left(\\frac{L-a}{\\sqrt{x_0^2 + h^2}}\\right) - \\arctan\\left(\\frac{x_0}{h}\\right)}\n$$"
        },
        {
            "introduction": "当平衡被破坏时，静态分析已不再足够；我们必须考虑动力学。线性倒立摆模型（LIPM）是分析动态平衡和步行的基石。本练习  探讨了对突然后推的反应，并引入了“捕获点”这一关键概念——即恢复脚必须踏到的位置，以阻止摔倒并重新获得稳定。掌握这个概念对于理解和设计预防摔倒的反应策略至关重要。",
            "id": "4173274",
            "problem": "将人体受试者建模为一个质点质心（COM），该质心连接到一条无质量的腿上，踝关节枢轴位于一个固定的地面支撑点，从而构成线性倒立摆模型（LIPM）。质心在水平前后方向上运动，其相对于当前位于 $x=0$ 的支撑踝的坐标为 $x(t)$，且质心高度近似保持在 $z_0$。在 $t=0$ 时刻，受试者受到一次向后的推力，该推力瞬时赋予质心一个向后的速度 $\\dot{x}(0)<0$，而支撑位置保持不变。重力加速度为 $g$，初始支撑脚位于 $u=0$。\n\n直接从牛顿第二定律和线性倒立摆模型的几何约束出发，推导后向捕获点的表达式。后向捕获点定义为唯一的向后落足位置 $u_{\\mathrm{cap}}$，使得如果在 $t=0$ 时刻将脚瞬时放置在该处，质心能够在新支撑基底上方静止下来，而无需额外的步子。然后，根据以下参数计算后向捕获点和防止向后摔倒所需的最小后向步长：\n- $z_0 = 1.00 \\,\\mathrm{m}$,\n- $g = 9.81 \\,\\mathrm{m} \\,\\mathrm{s}^{-2}$,\n- $x(0) = 0.030 \\,\\mathrm{m}$,\n- $\\dot{x}(0) = -0.500 \\,\\mathrm{m} \\,\\mathrm{s}^{-1}$。\n\n假设在 $t=0$ 时刻瞬时完成迈步，并且在迈步完成前支撑点保持固定。将后向捕获点位置 $u_{\\mathrm{cap}}$ 表示为相对于原始支撑踝（$u=0$）的距离，单位为米。将最小后向步长定义为正距离 $\\ell = |u_{\\mathrm{cap}}|$，单位为米。将 $u_{\\mathrm{cap}}$ 和 $\\ell$ 的结果均四舍五入至四位有效数字，并以米为单位表示。本问题不涉及角度。",
            "solution": "首先对问题进行验证，以确保其科学基础扎实、提法恰当且客观。\n\n### 第1步：提取已知条件\n-   **模型**：线性倒立摆模型（LIPM），具有一个位于恒定高度 $z_0$ 的质点质心（COM）。腿是无质量的。\n-   **踝关节枢轴**：支撑点是一个固定的枢轴。初始支撑脚位于 $u=0$。\n-   **质心状态**：质心水平坐标为 $x(t)$。高度恒定为 $z_0$。\n-   **$t=0$ 时的初始条件**：一次向后的推力赋予了一个瞬时速度。\n    -   初始质心位置：$x(0) = 0.030 \\,\\mathrm{m}$。\n    -   初始质心速度：$\\dot{x}(0) = -0.500 \\,\\mathrm{m} \\,\\mathrm{s}^{-1}$。\n-   **常数**：重力加速度为 $g$。\n-   **定义**：后向捕获点 $u_{\\mathrm{cap}}$ 是能让质心在该新支撑点上方静止下来的落足位置。\n-   **任务**：\n    1.  推导 $u_{\\mathrm{cap}}$ 的表达式。\n    2.  根据给定参数计算 $u_{\\mathrm{cap}}$ 和最小后向步长 $\\ell = |u_{\\mathrm{cap}}|$。\n-   **计算参数**：\n    -   $z_0 = 1.00 \\,\\mathrm{m}$\n    -   $g = 9.81 \\,\\mathrm{m} \\,\\mathrm{s}^{-2}$\n-   **格式要求**：将 $u_{\\mathrm{cap}}$ 和 $\\ell$ 的最终答案四舍五入至四位有效数字。\n\n### 第2步：使用提取的已知条件进行验证\n根据验证标准对问题进行评估。\n-   **科学基础**：LIPM 是生物力学和机器人学中分析平衡与运动的基础模型。该问题基于牛顿力学的基本原理，具有科学合理性。\n-   **适定性**：问题提供了求解控制微分方程所需的所有必要初始条件和模型参数。捕获点的定义提供了一个明确的终端条件，从而导出一个唯一解。该问题是适定的。\n-   **客观性**：问题以精确、客观的语言陈述，没有主观论断或含糊之处。\n-   **一致性与完整性**：所给条件一致且充分。所需假设（例如，瞬时迈步）已明确说明。\n\n### 第3步：结论与行动\n问题被判定为**有效**。将提供完整解答。\n\n### 捕获点表达式的推导\n设受试者的质量为 $m$。质心位于位置 $\\vec{r}(t) = x(t)\\hat{i} + z_0\\hat{j}$，其中 $\\hat{i}$ 和 $\\hat{j}$ 分别是水平和垂直单位矢量。踝关节枢轴位于位置 $\\vec{u} = u\\hat{i}$。\n\n作用在质心上的力是重力 $\\vec{F}_g = -mg\\hat{j}$ 和腿部约束力 $\\vec{F}_{leg}$，该力沿着连接踝关节枢轴与质心的直线作用。设从枢轴到质心的矢量为 $\\vec{L} = (x-u)\\hat{i} + z_0\\hat{j}$。腿部力可以写成 $\\vec{F}_{leg} = T \\frac{\\vec{L}}{|\\vec{L}|}$，其中 $T$ 是力的大小。\n\n牛顿第二定律指出 $m\\vec{a} = \\sum \\vec{F}$。由于 $z_0$ 是常数，加速度为 $\\vec{a} = \\frac{d^2\\vec{r}}{dt^2} = \\ddot{x}(t)\\hat{i}$。\n运动方程的分量形式为：\n水平方向（x方向）：$m\\ddot{x} = F_{leg,x} = T \\frac{x-u}{|\\vec{L}|}$\n垂直方向（y方向）：$m\\ddot{y} = 0 = F_{leg,y} - mg = T \\frac{z_0}{|\\vec{L}|} - mg$\n\n从垂直方向的方程，我们求解腿部力的大小 $T$：\n$T \\frac{z_0}{|\\vec{L}|} = mg \\implies T = \\frac{mg|\\vec{L}|}{z_0}$\n\n将这个 $T$ 的表达式代入水平运动方程：\n$m\\ddot{x} = \\left(\\frac{mg|\\vec{L}|}{z_0}\\right) \\frac{x-u}{|\\vec{L}|} = \\frac{mg}{z_0}(x-u)$\n\n两边除以 $m$，我们得到线性倒立摆模型的控制微分方程：\n$\\ddot{x}(t) - \\frac{g}{z_0}(x(t)-u) = 0$\n\n这个方程描述了质心相对于位于 $u$ 的固定枢轴的运动。问题陈述，在 $t=0$ 时，脚瞬时移动到捕获点位置 $u=u_{\\mathrm{cap}}$。这个新运动阶段的质心初始状态是 $(x(0), \\dot{x}(0))$。捕获条件要求质心在新枢轴上方静止下来，意味着当 $t \\to \\infty$ 时，$x(t) \\to u_{\\mathrm{cap}}$ 且 $\\dot{x}(t) \\to 0$。\n\n为了求解此方程，我们定义一个新变量，表示质心相对于新枢轴的位置：\n$x_{rel}(t) = x(t) - u_{\\mathrm{cap}}$\n由于 $u_{\\mathrm{cap}}$ 是常数，$\\ddot{x}_{rel}(t) = \\ddot{x}(t)$。微分方程变为：\n$\\ddot{x}_{rel}(t) - \\frac{g}{z_0}x_{rel}(t) = 0$\n\n我们定义特征频率 $\\omega = \\sqrt{\\frac{g}{z_0}}$。方程为 $\\ddot{x}_{rel}(t) - \\omega^2 x_{rel}(t) = 0$。\n这个二阶线性齐次微分方程的通解是：\n$x_{rel}(t) = A e^{\\omega t} + B e^{-\\omega t}$\n对应的速度是：\n$\\dot{x}_{rel}(t) = \\omega A e^{\\omega t} - \\omega B e^{-\\omega t}$\n\n捕获条件 $x(t) \\to u_{\\mathrm{cap}}$ (当 $t \\to \\infty$) 转化为 $x_{rel}(t) \\to 0$ (当 $t \\to \\infty$)。在通解中，$A e^{\\omega t}$ 项代表一个随时间指数增长的不稳定模式（因为 $\\omega > 0$）。为了使解收敛于零，这个不稳定模式的系数必须为零，即 $A=0$。\n\n为了找到使 $A=0$ 的条件，我们使用 $t=0$ 时的初始条件：\n$x_{rel}(0) = x(0) - u_{\\mathrm{cap}}$\n$\\dot{x}_{rel}(0) = \\dot{x}(0) - \\frac{d}{dt}(u_{\\mathrm{cap}}) = \\dot{x}(0)$\n\n在 $t=0$ 时，通解给出：\n$x_{rel}(0) = A + B$\n$\\dot{x}_{rel}(0) = \\omega A - \\omega B$\n\n我们可以通过将第二个方程乘以 $\\frac{1}{\\omega}$ 再与第一个方程相加来求解 $A$：\n$x_{rel}(0) + \\frac{\\dot{x}_{rel}(0)}{\\omega} = (A+B) + (A-B) = 2A$\n$A = \\frac{1}{2}\\left(x_{rel}(0) + \\frac{\\dot{x}_{rel}(0)}{\\omega}\\right)$\n\n为了实现捕获，令 $A=0$ 得：\n$x_{rel}(0) + \\frac{\\dot{x}_{rel}(0)}{\\omega} = 0$\n\n代入初始条件的表达式：\n$(x(0) - u_{\\mathrm{cap}}) + \\frac{\\dot{x}(0)}{\\omega} = 0$\n\n求解捕获点 $u_{\\mathrm{cap}}$：\n$u_{\\mathrm{cap}} = x(0) + \\frac{\\dot{x}(0)}{\\omega}$\n\n最后，代入 $\\omega = \\sqrt{\\frac{g}{z_0}}$ 得到所需的表达式：\n$u_{\\mathrm{cap}} = x(0) + \\dot{x}(0)\\sqrt{\\frac{z_0}{g}}$\n\n### 数值计算\n给定以下参数值：\n-   $z_0 = 1.00 \\,\\mathrm{m}$\n-   $g = 9.81 \\,\\mathrm{m} \\,\\mathrm{s}^{-2}$\n-   $x(0) = 0.030 \\,\\mathrm{m}$\n-   $\\dot{x}(0) = -0.500 \\,\\mathrm{m} \\,\\mathrm{s}^{-1}$\n\n首先，我们将这些值代入推导出的 $u_{\\mathrm{cap}}$ 表达式中：\n$u_{\\mathrm{cap}} = 0.030 + (-0.500) \\sqrt{\\frac{1.00}{9.81}}$\n$u_{\\mathrm{cap}} = 0.030 - 0.500 \\times \\sqrt{0.101936799...}$\n$u_{\\mathrm{cap}} = 0.030 - 0.500 \\times 0.31927541...$\n$u_{\\mathrm{cap}} = 0.030 - 0.15963770...$\n$u_{\\mathrm{cap}} = -0.12963770... \\,\\mathrm{m}$\n\n问题要求将结果四舍五入至四位有效数字。\n$u_{\\mathrm{cap}} \\approx -0.1296 \\,\\mathrm{m}$\n\n最小后向步长 $\\ell$ 定义为正距离 $|u_{\\mathrm{cap}}|$。\n$\\ell = |u_{\\mathrm{cap}}| = |-0.12963770...| = 0.12963770... \\,\\mathrm{m}$\n\n将 $\\ell$ 四舍五入至四位有效数字：\n$\\ell \\approx 0.1296 \\,\\mathrm{m}$\n\n因此，后向捕获点位于距离原始支撑踝 $-0.1296 \\,\\mathrm{m}$ 的位置，所需的步长为 $0.1296 \\,\\mathrm{m}$。",
            "answer": "$$\\boxed{\\begin{pmatrix} -0.1296 & 0.1296 \\end{pmatrix}}$$"
        },
        {
            "introduction": "现实世界中的摔倒预防通常需要整合多个生物力学子系统。例如，在绊倒期间，身体的整体动力学和摆动腿的运动学都起着关键作用。本练习  是一项综合性建模任务，它将外推质心（XCoM）的动态稳定性准则与摆动腿清除障碍物的运动学约束相结合。你的目标是构建一个计算决策规则，以预测绊倒后是否需要迈出恢复性的一步，这代表了在摔倒预防研究中常用的一种更高级的预测性建模方法。",
            "id": "4173291",
            "problem": "一个双足步行器在摆动相期间，因一个高度为 $H$ 米的障碍物而面临潜在的绊倒风险。使用线性倒立摆模型（LIPM）和一个简化的摆动腿运动学约束模型，推导一个决策规则，以预测绊倒后是否需要立即迈出恢复步。该决策规则必须基于外推质心（XCoM）的可行性以及摆动腿在剩余摆动时间内清除障碍物的能力。在一个程序中实现所推导的决策规则，该程序评估一个已定义的测试套件，并输出一个单行的布尔值列表。\n\n基本原理：\n- 牛顿第二定律和用于矢状面质心（COM）动力学的线性倒立摆模型（LIPM），该动力学围绕一个固定的支撑位置 $u$ 展开，且质心高度 $z_0$ 恒定：$$\\ddot{x} = \\omega_0^2 \\left(x - u\\right), \\quad \\text{其中 } \\omega_0 = \\sqrt{\\frac{g}{z_0}}, \\; g = 9.81 \\text{ m/s}^2.$$\n- 源自LIPM和可行性原理的外推质心（XCoM）概念，用于确定当前状态是否可以在不立即迈步的情况下被捕获。\n- 一个简化的摆动足尖轨迹模型以及在剩余摆动时间内能够产生的额外足尖离地高度的运动学限制。\n\n假设与定义：\n1. 支撑脚在矢状面上的支撑基底（BoS）被建模为一个以支撑踝位置 $u = 0$ 为中心的线段，范围从 $-L_{\\mathrm{back}}$ 到 $+L_{\\mathrm{front}}$，$L_{\\mathrm{front}}$ 和 $L_{\\mathrm{back}}$ 的单位为米。\n2. 在考虑绊倒的瞬间，质心（COM）状态由其在前向位置 $x_{\\mathrm{com}}$（米）和速度 $v_{\\mathrm{com}}$（米/秒）给出。\n3. 在归一化摆动相 $s \\in [0,1]$ 时，摆动足尖的名义离地高度被建模为一个在摆动中期达到峰值的抛物线：$$h_{\\mathrm{toe}}(s) = h_{\\mathrm{peak}} \\cdot 4 s (1 - s),$$ 其中 $h_{\\mathrm{peak}}$ 是名义峰值足尖离地高度，单位为米。\n4. 剩余摆动时间为 $T_{\\mathrm{rem}} = (1 - s) T_{\\mathrm{swing}}$，其中 $T_{\\mathrm{swing}}$ 是名义摆动持续时间，单位为秒。\n5. 在剩余摆动时间内，受关节速度和活动范围限制，可实现的最大额外足尖离地高度为 $$\\Delta h = \\min\\left( \\dot{h}_{\\max} T_{\\mathrm{rem}}, \\; h_{\\mathrm{additional,max}} \\right),$$ 其中 $\\dot{h}_{\\max}$ 是可实现的最大足尖高度增加率（米/秒），$h_{\\mathrm{additional,max}}$ 是额外离地高度的上限（米）。\n6. 如果障碍物高度超过可实现的总离地高度，则判定发生绊倒：$$\\text{trip occurs} \\iff H > h_{\\mathrm{toe}}(s) + \\Delta h.$$\n7. 如果发生绊倒，则使用基于外推质心（$\\mathrm{XCoM}$）的LIPM衍生可行性准则来确定是否需要恢复步。当且仅当外推质心位于支撑脚的支撑基底区间之外时，才需要恢复步。区间边界视为包含在内。\n8. 如果没有发生绊倒，则报告该次绊倒不需要恢复步（布尔值为false）。\n\n你的任务：\n- 严格从LIPM和可行性概念出发，推导外推质心（$\\mathrm{XCoM}$）的表达式以及相对于支撑脚支撑基底的相应捕获条件。\n- 从运动学约束中推导足尖离地高度函数和额外离地高度的界限。\n- 将这些组合成一个决策规则，输出一个布尔值，指示在给定时刻是否因绊倒而需要恢复步。\n\n单位与输出：\n- 所有距离和高度的单位为米，所有速度的单位为米/秒，所有时间的单位为秒，重力加速度的单位为米/平方秒。\n- 你的程序必须对指定测试套件中的每个测试用例评估决策规则，并生成一行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，“[true,false,...]”，但使用Python布尔字面值大写形式“True”或“False”）。\n\n测试套件：\n使用以下参数集。每个测试用例都是一个元组，形式为\n$(x_{\\mathrm{com}}, v_{\\mathrm{com}}, z_0, L_{\\mathrm{front}}, L_{\\mathrm{back}}, s, T_{\\mathrm{swing}}, h_{\\mathrm{peak}}, \\dot{h}_{\\max}, h_{\\mathrm{additional,max}}, H)$。\n\n1. 一般情况，抬高策略成功（未绊倒，因此无需恢复步）：\n   $(0.05, 1.2, 1.0, 0.10, 0.05, 0.4, 0.4, 0.03, 0.2, 0.03, 0.04)$。\n2. 摆动后期绊倒，外推质心超出支撑基底（BoS）（需要恢复步）：\n   $(0.00, 0.50, 1.0, 0.12, 0.08, 0.9, 0.45, 0.03, 0.10, 0.015, 0.05)$。\n3. 摆动末期绊倒，外推质心恰好位于前边界（由于边界是包含性的，无需恢复步）：\n   $(0.05, 0.219246436, 1.0, 0.12, 0.06, 0.95, 0.45, 0.03, 0.10, 0.015, 0.008)$。\n4. 摆动早期，高障碍物导致绊倒，且外推质心远在支撑基底（BoS）之外（需要恢复步）：\n   $(0.02, 1.50, 1.0, 0.10, 0.06, 0.1, 0.4, 0.03, 0.30, 0.03, 0.06)$。\n5. 摆动中期，障碍物高度适中，且可实现额外的离地高度（未绊倒，无需恢复步）：\n   $(-0.02, 0.20, 0.80, 0.06, 0.05, 0.5, 0.36, 0.025, 0.15, 0.02, 0.03)$。\n\n最终输出格式：\n你的程序应生成一行输出，其中包含一个用方括号括起来的逗号分隔列表（例如，“[True,False,True,False,True]”）。不应打印任何其他文本。",
            "solution": "### 步骤1：提取已知条件\n\n- **模型**：用于矢状面质心（COM）动力学的线性倒立摆模型（LIPM）。\n- **LIPM方程**：$\\ddot{x} = \\omega_0^2 \\left(x - u\\right)$，其中 $\\omega_0 = \\sqrt{\\frac{g}{z_0}}$。\n- **常数**：重力加速度 $g = 9.81 \\text{ m/s}^2$。\n- **支撑脚支撑基底（BoS）**：一个以支撑踝 $u = 0$ 为中心的线段，范围从 $-L_{\\mathrm{back}}$ 到 $+L_{\\mathrm{front}}$。区间为 $[-L_{\\mathrm{back}}, L_{\\mathrm{front}}]$。\n- **质心（COM）状态**：在考虑绊倒瞬间的位置 $x_{\\mathrm{com}}$（米）和速度 $v_{\\mathrm{com}}$（米/秒）。\n- **摆动足尖名义离地高度**：$h_{\\mathrm{toe}}(s) = h_{\\mathrm{peak}} \\cdot 4 s (1 - s)$，对于归一化摆动相 $s \\in [0,1]$。\n- **剩余摆动时间**：$T_{\\mathrm{rem}} = (1 - s) T_{\\mathrm{swing}}$。\n- **额外足尖离地高度**：$\\Delta h = \\min\\left( \\dot{h}_{\\max} T_{\\mathrm{rem}}, \\; h_{\\mathrm{additional,max}} \\right)$。\n- **绊倒条件**：如果障碍物高度 $H > h_{\\mathrm{toe}}(s) + \\Delta h$，则发生绊倒。\n- **恢复步条件**：如果发生绊倒，当且仅当外推质心（XCoM）位于支撑基底（BoS）区间之外时，才需要恢复步。区间边界是包含性的。如果没有发生绊倒，则不需要恢复步。\n- **测试套件**：\n  1. $(x_{\\mathrm{com}}=0.05, v_{\\mathrm{com}}=1.2, z_0=1.0, L_{\\mathrm{front}}=0.10, L_{\\mathrm{back}}=0.05, s=0.4, T_{\\mathrm{swing}}=0.4, h_{\\mathrm{peak}}=0.03, \\dot{h}_{\\max}=0.2, h_{\\mathrm{additional,max}}=0.03, H=0.04)$\n  2. $(x_{\\mathrm{com}}=0.00, v_{\\mathrm{com}}=0.50, z_0=1.0, L_{\\mathrm{front}}=0.12, L_{\\mathrm{back}}=0.08, s=0.9, T_{\\mathrm{swing}}=0.45, h_{\\mathrm{peak}}=0.03, \\dot{h}_{\\max}=0.10, h_{\\mathrm{additional,max}}=0.015, H=0.05)$\n  3. $(x_{\\mathrm{com}}=0.05, v_{\\mathrm{com}}=0.219246436, z_0=1.0, L_{\\mathrm{front}}=0.12, L_{\\mathrm{back}}=0.06, s=0.95, T_{\\mathrm{swing}}=0.45, h_{\\mathrm{peak}}=0.03, \\dot{h}_{\\max}=0.10, h_{\\mathrm{additional,max}}=0.015, H=0.008)$\n  4. $(x_{\\mathrm{com}}=0.02, v_{\\mathrm{com}}=1.50, z_0=1.0, L_{\\mathrm{front}}=0.10, L_{\\mathrm{back}}=0.06, s=0.1, T_{\\mathrm{swing}}=0.4, h_{\\mathrm{peak}}=0.03, \\dot{h}_{\\max}=0.30, h_{\\mathrm{additional,max}}=0.03, H=0.06)$\n  5. $(x_{\\mathrm{com}}=-0.02, v_{\\mathrm{com}}=0.20, z_0=0.80, L_{\\mathrm{front}}=0.06, L_{\\mathrm{back}}=0.05, s=0.5, T_{\\mathrm{swing}}=0.36, h_{\\mathrm{peak}}=0.025, \\dot{h}_{\\max}=0.15, h_{\\mathrm{additional,max}}=0.02, H=0.03)$\n\n### 步骤2：使用提取的已知条件进行验证\n\n- **科学依据**：该问题很好地基于已建立的生物力学原理。线性倒立摆模型（LIPM）是步行运动的经典模型，而外推质心（XCoM）是该模型直接和标准的推论，用于稳定性分析。足尖离地高度的运动学模型虽然经过简化，但遵循了物理上合理的形态。\n- **适定性**：该问题提供了一整套参数和一套清晰、确定性的规则来得出布尔决策。所有术语都有定义，逻辑从输入到输出流畅无歧义。关于支撑基底（BoS）边界是包含性的规定解决了潜在的边界情况歧义。\n- **客观性**：该问题以精确的数学语言陈述，不含主观或有偏见的论断。\n\n该问题在科学上是合理的、适定的、客观的和完整的。它没有违反任何无效性标准。\n\n### 步骤3：结论与操作\n\n问题陈述是**有效的**。将推导并实现一个解决方案。\n\n### 推导与算法设计\n\n该问题需要一个决策规则来确定在潜在绊倒后是否需要恢复步。这个决策过程包括两个顺序检查：首先，摆动脚是否能越过障碍物（绊倒条件）；其次，如果不能，两足机器人的动态状态是否能在当前支撑基底内恢复（可行性条件）。\n\n#### 第1部分：绊倒条件推导\n\n绊倒条件基于障碍物高度 $H$ 与可实现的总足尖离地高度之间的比较。总离地高度是名义离地高度与在剩余时间内可产生的任何额外离地高度之和。\n\n1.  **名义足尖离地高度**：问题提供了名义足尖离地高度轨迹作为归一化摆动相 $s \\in [0,1]$ 的函数：\n    $$h_{\\mathrm{toe}}(s) = h_{\\mathrm{peak}} \\cdot 4 s (1 - s)$$\n    这个抛物线函数在摆动相开始（$s=0$）和结束（$s=1$）时为零，并在摆动中期（$s=0.5$）达到其最大值 $h_{\\mathrm{peak}}$。\n\n2.  **可实现的额外离地高度**：系统可以尝试增加足尖高度以避开障碍物。可实现的最大额外离地高度 $\\Delta h$ 受限于可以产生离地高度的速率 $\\dot{h}_{\\max}$ 和一个绝对最大额外高度 $h_{\\mathrm{additional,max}}$。可用于此调整的时间是剩余的摆动时间 $T_{\\mathrm{rem}}$。\n    $$T_{\\mathrm{rem}} = (1 - s) T_{\\mathrm{swing}}$$\n    在剩余时间内以最大速率移动可能产生的额外高度是 $\\dot{h}_{\\max} T_{\\mathrm{rem}}$。这个值受限于绝对极限 $h_{\\mathrm{additional,max}}$。因此，额外离地高度是：\n    $$\\Delta h = \\min\\left( \\dot{h}_{\\max} T_{\\mathrm{rem}}, \\; h_{\\mathrm{additional,max}} \\right)$$\n\n3.  **绊倒逻辑**：如果障碍物高度 $H$ 超过了总可能离地高度（名义离地高度和额外离地高度之和），则绊倒是不可避免的。\n    $$\\text{Trip Occurs} \\iff H > h_{\\mathrm{toe}}(s) + \\Delta h$$\n    如果没有发生绊倒，问题得到解决，并且该次绊倒不需要恢复步。输出为 `False`。如果确实发生了绊倒，我们必须进行可行性分析。\n\n#### 第2部分：可行性条件推导\n\n如果发生绊倒，我们必须确定步行器是否能在不立即采取恢复步的情况下保持平衡。这使用源自LIPM的外推质心（XCoM）概念进行评估。\n\n1.  **LIPM动力学与XCoM**：COM位置 $x$ 的LIPM运动方程为 $\\ddot{x} = \\omega_0^2 (x - u)$，其中 $u$ 是枢轴点（压力中心）。对于此问题，支撑踝位于原点，所以 $u=0$。方程变为 $\\ddot{x} - \\omega_0^2 x = 0$。通解为 $x(t) = A e^{\\omega_0 t} + B e^{-\\omega_0 t}$。给定 $t=0$ 时的状态 $(x_{\\mathrm{com}}, v_{\\mathrm{com}})$，我们可以解出常数，但这里使用一个更直接的XCoM定义。\n\n    XCoM，我们记为 $\\xi$，是这样一个位置：如果步行器的COM位于该位置，它就能停止运动，并使其COM正好位于枢轴点 $u$ 的上方。一个在LIPM中数学上等价的更实用的定义是“捕获点”：即必须放置一个新的枢轴点以停止COM向前运动的位置。其值根据当前状态 $(x_{\\mathrm{com}}, v_{\\mathrm{com}})$ 计算如下：\n    $$\\xi \\equiv \\mathrm{XCoM} = x_{\\mathrm{com}} + \\frac{v_{\\mathrm{com}}}{\\omega_0}$$\n    $\\omega_0$ 项是倒立摆的自然频率，由重力加速度 $g$ 和恒定的COM高度 $z_0$ 决定：\n    $$\\omega_0 = \\sqrt{\\frac{g}{z_0}}$$\n    XCoM代表COM“注定”要到达的地面上的点。\n\n2.  **可行性逻辑**：如果这个“注定”点，即XCoM，位于现有的支撑基底（BoS）内，则两足步行器可以保持平衡而无需更换支撑脚。BoS被定义为区间 $[-L_{\\mathrm{back}}, L_{\\mathrm{front}}]$。当且仅当XCoM位于此区间*之外*时，才*需要*恢复步。考虑到边界是包含性的，如果XCoM在BoS内部或边界上，则认为步行器是稳定的（不需要立即恢复步）。\n    $$\\text{状态可行} \\iff -L_{\\mathrm{back}} \\le \\xi \\le L_{\\mathrm{front}}$$\n    因此，如果此条件不成立，则需要恢复步：\n    $$\\text{需要恢复步} \\iff \\xi < -L_{\\mathrm{back}} \\text{ 或 } \\xi > L_{\\mathrm{front}}$$\n\n#### 第3部分：组合决策算法\n\n完整的决策规则如下：\n\n1.  对于给定的测试用例，其参数为 $(x_{\\mathrm{com}}, v_{\\mathrm{com}}, z_0, L_{\\mathrm{front}}, L_{\\mathrm{back}}, s, T_{\\mathrm{swing}}, h_{\\mathrm{peak}}, \\dot{h}_{\\max}, h_{\\mathrm{additional,max}}, H)$：\n2.  计算名义足尖离地高度 $h_{\\mathrm{toe}} = h_{\\mathrm{peak}} \\cdot 4s(1-s)$。\n3.  计算剩余摆动时间 $T_{\\mathrm{rem}} = (1-s) T_{\\mathrm{swing}}$。\n4.  计算可实现的额外离地高度 $\\Delta h = \\min(\\dot{h}_{\\max} T_{\\mathrm{rem}}, h_{\\mathrm{additional,max}})$。\n5.  确定是否发生绊倒：如果 $H > h_{\\mathrm{toe}} + \\Delta h$，则 `trip_occurs` 为真。\n6.  如果 `trip_occurs` 为假，则不需要恢复步。结果为 `False`。\n7.  如果 `trip_occurs` 为真，则继续检查可行性：\n    a. 计算LIPM自然频率 $\\omega_0 = \\sqrt{g/z_0}$，其中 $g = 9.81$。\n    b. 计算外推质心 $\\xi = x_{\\mathrm{com}} + v_{\\mathrm{com}}/\\omega_0$。\n    c. 确定是否需要恢复步：如果 $(\\xi < -L_{\\mathrm{back}})$ 或 $(\\xi > L_{\\mathrm{front}})$，则结果为 `True`。否则，结果为 `False`。\n\n该算法为每组输入参数提供了一个明确的布尔输出，并将在程序中实现。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the biped trip recovery problem based on LIPM and kinematic constraints.\n    \"\"\"\n    # Gravitational acceleration in m/s^2\n    G = 9.81\n\n    # Test suite:\n    # Each case is a tuple of (x_com, v_com, z_0, L_front, L_back, s, T_swing,\n    # h_peak, h_dot_max, h_additional_max, H)\n    test_cases = [\n        # Case 1: General case where elevating strategy succeeds (no trip)\n        (0.05, 1.2, 1.0, 0.10, 0.05, 0.4, 0.4, 0.03, 0.2, 0.03, 0.04),\n        # Case 2: Trip late in swing, XCoM outside BoS (recovery required)\n        (0.00, 0.50, 1.0, 0.12, 0.08, 0.9, 0.45, 0.03, 0.10, 0.015, 0.05),\n        # Case 3: Trip very late, XCoM at boundary (no recovery due to inclusive boundary)\n        (0.05, 0.219246436, 1.0, 0.12, 0.06, 0.95, 0.45, 0.03, 0.10, 0.015, 0.008),\n        # Case 4: Early swing, high obstacle, XCoM far outside BoS (recovery required)\n        (0.02, 1.50, 1.0, 0.10, 0.06, 0.1, 0.4, 0.03, 0.30, 0.03, 0.06),\n        # Case 5: Mid-swing, modest obstacle, no trip\n        (-0.02, 0.20, 0.80, 0.06, 0.05, 0.5, 0.36, 0.025, 0.15, 0.02, 0.03),\n    ]\n\n    results = []\n    \n    for case in test_cases:\n        (x_com, v_com, z_0, L_front, L_back, s, T_swing,\n         h_peak, h_dot_max, h_additional_max, H) = case\n\n        # --- Part 1: Trip Condition Check ---\n        \n        # Calculate nominal toe clearance at normalized swing phase s\n        h_toe = h_peak * 4 * s * (1 - s)\n        \n        # Calculate remaining swing time\n        T_rem = (1 - s) * T_swing\n        \n        # Calculate maximum achievable additional toe clearance\n        delta_h = min(h_dot_max * T_rem, h_additional_max)\n        \n        # Calculate total achievable clearance\n        total_clearance = h_toe + delta_h\n        \n        # A trip occurs if obstacle height H exceeds total clearance\n        trip_occurs = H > total_clearance\n        \n        recovery_step_needed = False\n        if not trip_occurs:\n            # If no trip occurs, no recovery step is necessitated by the trip.\n            recovery_step_needed = False\n        else:\n            # --- Part 2: Viability Condition Check ---\n            # A trip has occurred, so we must check if the state is viable.\n            \n            # Calculate the natural frequency of the Linear Inverted Pendulum\n            omega_0 = np.sqrt(G / z_0)\n            \n            # Calculate the Extrapolated Center of Mass (XCoM)\n            xcom = x_com + v_com / omega_0\n            \n            # The Base of Support (BoS) is from -L_back to +L_front.\n            # A recovery step is needed if the XCoM is outside this interval.\n            # Boundaries are inclusive, so recovery is needed only if strictly outside.\n            if xcom  -L_back or xcom > L_front:\n                recovery_step_needed = True\n            else:\n                recovery_step_needed = False\n                \n        results.append(str(recovery_step_needed))\n\n    # Print the final output in the exact required format.\n    print(f\"[{','.join(results)}]\")\n\nsolve()\n\n```"
        }
    ]
}
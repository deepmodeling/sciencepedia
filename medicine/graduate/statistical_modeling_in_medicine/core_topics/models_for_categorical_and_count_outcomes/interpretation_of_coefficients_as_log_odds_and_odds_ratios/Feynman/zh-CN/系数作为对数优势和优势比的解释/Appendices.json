{
    "hands_on_practices": [
        {
            "introduction": "在逻辑回归中，截距项 $\\beta_0$ 的解释至关重要。通过对协变量进行临床上有意义的中心化处理，我们可以将 $\\beta_0$ 直接解释为特定“参考患者”的基线对数发生比。这个练习将指导你如何从一个经过中心化处理的模型中，为这样一个具有临床代表性的参考患者计算基线死亡概率，从而将抽象的模型参数与可解释的临床风险联系起来 。",
            "id": "4967404",
            "problem": "一个临床研究团队使用带有 logistic 连接函数的二元结局回归模型，对因脓毒症入住重症监护室（ICU）的患者的 $30$ 天死亡概率进行建模。该模型设定如下\n$$\n\\ln\\!\\left(\\frac{p_i}{1 - p_i}\\right) \\;=\\; \\beta_0 \\;+\\; \\beta_1\\big(\\text{Age}_i - 65\\big) \\;+\\; \\beta_2\\big(\\text{Lactate}_i - 2\\big) \\;+\\; \\beta_3\\big(\\text{CCI}_i - 3\\big) \\;+\\; \\beta_4\\, I_{\\text{male},i} \\;+\\; \\beta_5\\big(\\text{Age}_i - 65\\big)\\big(\\text{Lactate}_i - 2\\big),\n$$\n其中 $p_i$ 是患者 $i$ 的 $30$ 天死亡概率，$\\ln(\\cdot)$ 表示自然对数，$\\text{CCI}$ 表示 Charlson 合并症指数（CCI）。二元指标 $I_{\\text{male},i}$ 在患者为男性时等于 1，否则为 0。该团队进行了具有临床意义的中心化处理：年龄以 $65$ 岁为中心，血清乳酸以 $2$ mmol/L 为中心，CCI以 $3$ 为中心。\n\n假设拟合系数为 $\\beta_0 = -1.5$、$\\beta_1 = 0.02$、$\\beta_2 = 0.35$、$\\beta_3 = 0.10$、$\\beta_4 = 0.15$ 以及 $\\beta_5 = 0.005$。仅使用 logit 变换 $\\ln\\!\\left(\\frac{p}{1-p}\\right)$ 的基本定义和代数方法，推导经过临床中心化的参考患者（一名年龄为 $65$ 岁、乳酸为 $2$、CCI为 $3$ 的女性患者）的 $30$ 天死亡率基线概率。将最终答案表示为小数，并四舍五入到四位有效数字。此外，在推导过程中，解释这种中心化处理对于解释 $\\beta_0$ 的临床相关性。",
            "solution": "该问题要求推导特定参考患者的 $30$ 天死亡率基线概率，并解释协变量中心化在解释截距项 $\\beta_0$ 中的作用。\n\n提供的 logistic 回归模型是：\n$$\n\\ln\\!\\left(\\frac{p_i}{1 - p_i}\\right) \\;=\\; \\beta_0 \\;+\\; \\beta_1\\big(\\text{Age}_i - 65\\big) \\;+\\; \\beta_2\\big(\\text{Lactate}_i - 2\\big) \\;+\\; \\beta_3\\big(\\text{CCI}_i - 3\\big) \\;+\\; \\beta_4\\, I_{\\text{male},i} \\;+\\; \\beta_5\\big(\\text{Age}_i - 65\\big)\\big(\\text{Lactate}_i - 2\\big)\n$$\n方程的左侧，$\\ln\\!\\left(\\frac{p_i}{1 - p_i}\\right)$，是死亡发生比（odds of mortality）的自然对数，也称为 $p_i$ 的对数发生比（log-odds）或 logit。\n\n参考患者被定义为一名年龄为 $65$ 岁、乳酸为 $2$ mmol/L、Charlson合并症指数（CCI）为 $3$ 的女性患者。对于这样的患者，模型中协变量的值为：\n\\begin{itemize}\n    \\item $\\text{Age}_i = 65$，所以项 $\\big(\\text{Age}_i - 65\\big) = 0$。\n    \\item $\\text{Lactate}_i = 2$，所以项 $\\big(\\text{Lactate}_i - 2\\big) = 0$。\n    \\item $\\text{CCI}_i = 3$，所以项 $\\big(\\text{CCI}_i - 3\\big) = 0$。\n    \\item 患者为女性，所以 $I_{\\text{male},i} = 0$。\n\\end{itemize}\n\n将这些值代入参考患者的模型方程（我们将其死亡概率表示为 $p_{\\text{ref}}$）得到：\n$$\n\\ln\\!\\left(\\frac{p_{\\text{ref}}}{1 - p_{\\text{ref}}}\\right) \\;=\\; \\beta_0 \\;+\\; \\beta_1\\big(65 - 65\\big) \\;+\\; \\beta_2\\big(2 - 2\\big) \\;+\\; \\beta_3\\big(3 - 3\\big) \\;+\\; \\beta_4(0) \\;+\\; \\beta_5\\big(65 - 65\\big)\\big(2 - 2\\big)\n$$\n$$\n\\ln\\!\\left(\\frac{p_{\\text{ref}}}{1 - p_{\\text{ref}}}\\right) \\;=\\; \\beta_0 \\;+\\; \\beta_1(0) \\;+\\; \\beta_2(0) \\;+\\; \\beta_3(0) \\;+\\; 0 \\;+\\; \\beta_5(0)(0)\n$$\n$$\n\\ln\\!\\left(\\frac{p_{\\text{ref}}}{1 - p_{\\text{ref}}}\\right) \\;=\\; \\beta_0\n$$\n这个结果展示了协变量中心化的直接临床相关性。通过将连续预测变量（年龄、乳酸、CCI）在特定的、具有医学意义的值（分别为 $65$、 $2$ 和 $3$）上进行中心化，并为分类预测变量选择一个参考水平（女性，此时 $I_{\\text{male}} = 0$），模型的结构使得截距项 $\\beta_0$ 代表了这位特定的、具有临床相关性的“参考患者”结局的对数发生比。如果不进行中心化，$\\beta_0$ 将对应于年龄为 $0$、乳酸为 $0$、CCI为 $0$ 的患者的对数发生比，这是一个在生物学和临床上都毫无意义的外推。因此，中心化使得由 $\\beta_0$ 编码的基线风险估计对于一个典型或基线患者画像具有直接的可解释性。另一个好处是减少了主效应和交互项之间的多重共线性，从而提高了系数估计的稳定性。\n\n现在，我们从其对数发生比推导概率 $p_{\\text{ref}}$。已知拟合系数 $\\beta_0 = -1.5$。\n$$\n\\ln\\!\\left(\\frac{p_{\\text{ref}}}{1 - p_{\\text{ref}}}\\right) \\;=\\; -1.5\n$$\n为了解出 $p_{\\text{ref}}$，我们首先对等式两边取指数，以求出死亡发生比：\n$$\n\\text{odds}_{\\text{ref}} \\;=\\; \\frac{p_{\\text{ref}}}{1 - p_{\\text{ref}}} \\;=\\; \\exp(-1.5)\n$$\n现在，我们用代数方法分离出 $p_{\\text{ref}}$。设 $O = \\exp(-1.5)$。\n$$\n\\frac{p_{\\text{ref}}}{1 - p_{\\text{ref}}} \\;=\\; O\n$$\n$$\np_{\\text{ref}} \\;=\\; O(1 - p_{\\text{ref}})\n$$\n$$\np_{\\text{ref}} \\;=\\; O - O \\cdot p_{\\text{ref}}\n$$\n$$\np_{\\text{ref}} + O \\cdot p_{\\text{ref}} \\;=\\; O\n$$\n$$\np_{\\text{ref}}(1 + O) \\;=\\; O\n$$\n$$\np_{\\text{ref}} \\;=\\; \\frac{O}{1 + O}\n$$\n将 $O = \\exp(-1.5)$ 代回，我们得到从对数发生比 $\\eta$ 转换为概率的通用公式，$p = \\frac{\\exp(\\eta)}{1+\\exp(\\eta)}$。\n$$\np_{\\text{ref}} \\;=\\; \\frac{\\exp(-1.5)}{1 + \\exp(-1.5)}\n$$\n现在我们计算数值：\n$$\n\\exp(-1.5) \\approx 0.22313016\n$$\n$$\np_{\\text{ref}} \\approx \\frac{0.22313016}{1 + 0.22313016} \\;=\\; \\frac{0.22313016}{1.22313016} \\approx 0.18242403\n$$\n题目要求答案四舍五入到四位有效数字。前四位有效数字是 $1$、$8$、$2$ 和 $4$。第五位数字是 $2$，所以我们向下舍入。\n$$\np_{\\text{ref}} \\approx 0.1824\n$$\n因此，对于一名年龄为 $65$ 岁、血清乳酸为 $2$ mmol/L、CCI为 $3$ 的女性ICU患者，其 $30$ 天死亡率的基线概率约为 $0.1824$，即 $18.24\\%$。",
            "answer": "$$\n\\boxed{0.1824}\n$$"
        },
        {
            "introduction": "在临床实践中，一种治疗方法的效果可能并非在所有患者群体中都完全相同，这种现象被称为效应修饰。在逻辑回归模型中，我们可以通过引入交互项来量化这种效应差异。本练习将引导你从第一性原理出发，推导并解释交互项系数 $\\beta_{12}$ 如何量化治疗发生比值在不同疾病严重程度分层中的变化，让你掌握评估和解释效应修饰的关键技能 。",
            "id": "4967388",
            "problem": "一项多中心随机临床试验研究一种辅助疗法是否能降低因细菌性肺炎住院的成年患者的$30$天死亡率。设二元结局为 $Y \\in \\{0,1\\}$，其中 $Y=1$ 表示在30天内死亡。设 $X_{1} \\in \\{0,1\\}$ 表示治疗分配，其中 $X_{1}=1$ 代表辅助疗法，$X_{1}=0$ 代表标准护理。设 $X_{2} \\in \\{0,1\\}$ 表示一个临床相关的疾病严重程度分层，其中 $X_{2}=1$ 表示重症肺炎，$X_{2}=0$ 表示中度肺炎。使用标准logit链接函数拟合一个包含交互项的逻辑斯谛回归模型，因此有\n$$\n\\ln\\!\\left(\\frac{\\Pr(Y=1 \\mid X_{1},X_{2})}{1-\\Pr(Y=1 \\mid X_{1},X_{2})}\\right)=\\beta_{0}+\\beta_{1}X_{1}+\\beta_{2}X_{2}+\\beta_{12}X_{1}X_{2}.\n$$\n此处，$\\beta_{12}$ 参数化了在对数发生比尺度上衡量的治疗效果在重症和中度分层之间的差异。假设拟合模型得到的交互作用系数的点估计为 $\\hat{\\beta}_{12}=0.287$，同时主效应估计为 $\\hat{\\beta}_{1}=-0.139$ 和 $\\hat{\\beta}_{2}=0.842$（后两者仅为使情境更真实而提供）。\n\n使用发生比和logit变换的基本定义，从第一性原理推导一个解析表达式，该表达式表示重症分层中的治疗发生比值（发生比值定义为 $X_{1}=1$ 对比 $X_{1}=0$ 的发生比之比）与中度分层中的治疗发生比值之比，并用 $\\beta_{12}$ 表示。然后使用 $\\hat{\\beta}_{12}=0.287$ 对此比率进行数值计算。将最终答案四舍五入至四位有效数字。最终数值答案不需要单位。",
            "solution": "该问题要求基于一个指定的逻辑斯谛回归模型，从第一性原理推导两个发生比值之比的表达式。设 $p(X_1, X_2) = \\Pr(Y=1 \\mid X_1, X_2)$ 是在给定治疗分配 $X_1$ 和严重程度分层 $X_2$ 条件下的死亡概率。逻辑斯谛回归模型由以下结局的对数发生比（logit）方程给出：\n$$\n\\text{logit}(p(X_1, X_2)) = \\ln\\left(\\frac{p(X_1, X_2)}{1-p(X_1, X_2)}\\right) = \\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\beta_{12} X_1 X_2\n$$\n结局的发生比定义为事件发生的概率与事件不发生的概率之比。\n$$\n\\text{Odds}(X_1, X_2) = \\frac{p(X_1, X_2)}{1-p(X_1, X_2)}\n$$\n对logit方程取指数，我们可以用模型参数直接表示发生比：\n$$\n\\text{Odds}(X_1, X_2) = \\exp(\\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\beta_{12} X_1 X_2)\n$$\n问题要求的是治疗发生比值，其定义为在特定的疾病严重程度分层（$X_2$）内，治疗组（$X_1=1$）的死亡发生比与对照组（$X_1=0$）的死亡发生比之比。\n\n首先，我们推导中度分层（$X_2=0$）中的治疗发生比值。设其为 $OR_{\\text{mod}}$。\n在中度分层（$X_2=0$）中，治疗组（$X_1=1$）的发生比为：\n$$\n\\text{Odds}(X_1=1, X_2=0) = \\exp(\\beta_0 + \\beta_1(1) + \\beta_2(0) + \\beta_{12}(1)(0)) = \\exp(\\beta_0 + \\beta_1)\n$$\n在中度分层（$X_2=0$）中，对照组（$X_1=0$）的发生比为：\n$$\n\\text{Odds}(X_1=0, X_2=0) = \\exp(\\beta_0 + \\beta_1(0) + \\beta_2(0) + \\beta_{12}(0)(0)) = \\exp(\\beta_0)\n$$\n中度分层中治疗的发生比值是这两个发生比之比：\n$$\nOR_{\\text{mod}} = \\frac{\\text{Odds}(X_1=1, X_2=0)}{\\text{Odds}(X_1=0, X_2=0)} = \\frac{\\exp(\\beta_0 + \\beta_1)}{\\exp(\\beta_0)} = \\exp(\\beta_0 + \\beta_1 - \\beta_0) = \\exp(\\beta_1)\n$$\n\n接下来，我们推导重症分层（$X_2=1$）中的治疗发生比值。设其为 $OR_{\\text{sev}}$。\n在重症分层（$X_2=1$）中，治疗组（$X_1=1$）的发生比为：\n$$\n\\text{Odds}(X_1=1, X_2=1) = \\exp(\\beta_0 + \\beta_1(1) + \\beta_2(1) + \\beta_{12}(1)(1)) = \\exp(\\beta_0 + \\beta_1 + \\beta_2 + \\beta_{12})\n$$\n在重症分层（$X_2=1$）中，对照组（$X_1=0$）的发生比为：\n$$\n\\text{Odds}(X_1=0, X_2=1) = \\exp(\\beta_0 + \\beta_1(0) + \\beta_2(1) + \\beta_{12}(0)(1)) = \\exp(\\beta_0 + \\beta_2)\n$$\n重症分层中治疗的发生比值是这两个发生比之比：\n$$\nOR_{\\text{sev}} = \\frac{\\text{Odds}(X_1=1, X_2=1)}{\\text{Odds}(X_1=0, X_2=1)} = \\frac{\\exp(\\beta_0 + \\beta_1 + \\beta_2 + \\beta_{12})}{\\exp(\\beta_0 + \\beta_2)} = \\exp((\\beta_0 + \\beta_1 + \\beta_2 + \\beta_{12}) - (\\beta_0 + \\beta_2)) = \\exp(\\beta_1 + \\beta_{12})\n$$\n\n最后一步是计算重症分层中的治疗发生比值与中度分层中的治疗发生比值之比。\n$$\n\\frac{OR_{\\text{sev}}}{OR_{\\text{mod}}} = \\frac{\\exp(\\beta_1 + \\beta_{12})}{\\exp(\\beta_1)} = \\exp((\\beta_1 + \\beta_{12}) - \\beta_1) = \\exp(\\beta_{12})\n$$\n这就是所要求的解析表达式。指数化的交互作用系数 $\\exp(\\beta_{12})$ 代表了发生比值的比率，它量化了当交互变量从参考水平（$X_2=0$）变为另一水平（$X_2=1$）时，治疗的发生比值是如何被修正的。\n\n问题提供了点估计值 $\\hat{\\beta}_{12} = 0.287$。将此值代入我们推导的表达式，得到发生比值之比的数值：\n$$\n\\text{Ratio} = \\exp(\\hat{\\beta}_{12}) = \\exp(0.287)\n$$\n计算此值：\n$$\n\\exp(0.287) \\approx 1.33241031...\n$$\n按要求四舍五入到四位有效数字，我们得到 $1.332$。",
            "answer": "$$\\boxed{1.332}$$"
        },
        {
            "introduction": "将发生比值（Odds Ratio, OR）误解为风险比（Risk Ratio, RR）是医学文献解读中最常见且最严重的错误之一，尤其是在结局事件普遍发生的情况下。这个练习旨在揭示这一误解的实际后果，通过计算一个具体场景中，因这种混淆而导致的对“预防感染人数”的估计过高。通过这个实践，你将深刻理解为何区分发生比值 (OR) 和风险比 (RR) 对于准确的临床决策和资源规划至关重要 。",
            "id": "4967435",
            "problem": "一家医院正在评估一种针对其高风险手术人群中常见的术后感染结局的预防性疗法。在当前的标准护理下，一年的感染风险为 $p_{0} = 0.30$。一项使用逻辑回归分析的随机试验报告称，对于二元治疗指标，其治疗系数 $\\beta_{1}$ 等于 $\\beta_{1} = \\ln(0.60)$，该系数是从一个具有标准对数单位（logit）链接的模型中估计得出的。准备实施该疗法的委员会在资源规划中错误地将发生比值（odds ratio）当作风险比（risk ratio）。\n\n仅使用以下基本定义和事实：\n- 对于概率为 $p$ 的二元结局，其发生比（odds）为 $p/(1-p)$。\n- 发生比值（odds ratio）通过两组发生比的比值来比较它们。\n- 在具有二元治疗指标的逻辑回归中，治疗的系数是治疗组与对照组相比的发生比值的自然对数。\n\n根据这些定义，构建由报告的系数和基线风险 $p_{0}$ 所隐含的治疗风险 $p_{1}$。然后，通过计算当医院将发生比值当作风险比使用时，每治疗1000名患者所预防的预期感染数的超估量，来量化将发生比值误解为风险比对临床决策的影响。将您的最终结果表示为一个实数，代表每治疗1000名患者所超估的预防感染数。将您的答案四舍五入到四位有效数字。",
            "solution": "该问题要求量化因将发生比值（OR）误解为风险比（RR）而导致的对预防感染人数的估计过高。我们将分步进行计算：首先，根据正确的OR定义计算出真实的治疗后风险和预防人数；其次，根据错误的RR=OR假设计算出委员会估计的预防人数；最后，计算两者的差值得出超估量。\n\n设 $p_0$ 为对照组（标准护理）的感染风险，$p_1$ 为治疗组的真实感染风险。已知 $p_{0} = 0.30$。\n\n### 真实预防人数的计算\n来自逻辑回归的系数 $\\beta_{1}$ 是发生比值（OR）的自然对数。\n$$ \\beta_{1} = \\ln(\\text{OR}) $$\n已知 $\\beta_{1} = \\ln(0.60)$，我们可以通过对系数取指数来求得发生比值：\n$$ \\text{OR} = \\exp(\\beta_{1}) = \\exp(\\ln(0.60)) = 0.60 $$\n发生比值是治疗组感染发生比（$\\text{Odds}_1$）与对照组感染发生比（$\\text{Odds}_0$）的比值。\n$$ \\text{OR} = \\frac{\\text{Odds}_1}{\\text{Odds}_0} $$\n对照组的发生比是根据基线风险 $p_0$ 和所提供的定义计算得出：\n$$ \\text{Odds}_0 = \\frac{p_0}{1-p_0} = \\frac{0.30}{1-0.30} = \\frac{0.30}{0.70} = \\frac{3}{7} $$\n现在我们可以计算治疗组的发生比：\n$$ \\text{Odds}_1 = \\text{OR} \\times \\text{Odds}_0 = 0.60 \\times \\frac{3}{7} = \\frac{3}{5} \\times \\frac{3}{7} = \\frac{9}{35} $$\n为了求出治疗组的真实风险 $p_1$，我们将发生比转换回概率。其关系为 $p = \\frac{\\text{Odds}}{1+\\text{Odds}}$。\n$$ p_1 = \\frac{\\text{Odds}_1}{1+\\text{Odds}_1} = \\frac{\\frac{9}{35}}{1+\\frac{9}{35}} = \\frac{\\frac{9}{35}}{\\frac{35+9}{35}} = \\frac{\\frac{9}{35}}{\\frac{44}{35}} = \\frac{9}{44} $$\n每 $N = 1000$ 名患者真实预防的感染数为：\n$$ \\text{Prevented}_{\\text{true}} = N \\times (p_0 - p_1) = 1000 \\times \\left(\\frac{3}{10} - \\frac{9}{44}\\right) = 1000 \\times \\left(\\frac{66-45}{220}\\right) = 1000 \\times \\frac{21}{220} = \\frac{1050}{11} $$\n\n### 错误估计的预防人数计算\n委员会犯了将发生比值当作风险比（RR）的错误。风险比的定义为 $\\text{RR} = p_1/p_0$。委员会的错误假设是：\n$$ \\text{RR}_{\\text{assumed}} = \\text{OR} = 0.60 $$\n使用这个假定的风险比，他们计算出治疗组的一个不正确的风险，我们将其记为 $p'_{1}$：\n$$ p'_{1} = 0.60 \\times p_0 = 0.60 \\times 0.30 = 0.18 $$\n每 $N=1000$ 名患者假设预防的感染数是基于这个不正确的风险 $p'_{1}$ 计算的：\n$$ \\text{Prevented}_{\\text{assumed}} = N \\times (p_0 - p'_{1}) = 1000 \\times (0.30 - 0.18) = 1000 \\times 0.12 = 120 $$\n\n### 计算超估量\n超估量是假设预防的感染数与真实预防的感染数之差。\n$$ \\text{Overestimation} = \\text{Prevented}_{\\text{assumed}} - \\text{Prevented}_{\\text{true}} $$\n$$ \\text{Overestimation} = 120 - \\frac{1050}{11} = \\frac{120 \\times 11 - 1050}{11} = \\frac{1320 - 1050}{11} = \\frac{270}{11} $$\n为了提供最终的数值答案，我们计算这个分数的值：\n$$ \\frac{270}{11} \\approx 24.545454... $$\n四舍五入到四位有效数字得到 $24.55$。这意味着委员会的误解导致每治疗1000名患者，预防的感染数被高估了大约25例，这可能对资源分配和临床预期产生重大影响。",
            "answer": "$$\\boxed{24.55}$$"
        }
    ]
}
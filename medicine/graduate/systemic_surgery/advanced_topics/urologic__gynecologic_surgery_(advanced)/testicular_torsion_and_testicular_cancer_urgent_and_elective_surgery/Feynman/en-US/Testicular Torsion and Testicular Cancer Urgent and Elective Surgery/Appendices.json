{
    "hands_on_practices": [
        {
            "introduction": "In the urgent evaluation of acute scrotal pain, a clinician's suspicion of testicular torsion must be continuously updated with new information. While a Color Doppler Ultrasound (CDUS) is a powerful diagnostic tool, its results are not absolute and must be interpreted in the context of the initial clinical assessment. This exercise guides you through the application of Bayes' theorem, a fundamental tool of evidence-based medicine, to formally calculate how a diagnostic test result should alter your suspicion, providing a quantitative basis for critical surgical decisions. ",
            "id": "5192819",
            "problem": "A surgical team evaluating acute scrotal pain is deciding whether to proceed with emergent scrotal exploration for suspected testicular torsion. Prior to imaging, they synthesize history, examination, and time-from-onset to estimate a pretest probability of torsion of $0.40$. A Color Doppler Ultrasound (CDUS) is obtained. From high-quality meta-analysis, the CDUS test characteristics for torsion in this context are a sensitivity of $0.90$ and a specificity of $0.95$. The scan is negative (no reduced intratesticular arterial flow and no whirlpool sign). Using only the fundamental definitions of sensitivity, specificity, conditional probability, and Bayes’ theorem with the law of total probability, derive an expression for the post-test probability of torsion given a negative CDUS and compute its value for the parameters above. Express your final answer as an exact fraction. If you choose to express it as a decimal, round to four significant figures and write it as a pure decimal (no percent sign).",
            "solution": "The problem requires the calculation of the post-test probability of testicular torsion given a negative Color Doppler Ultrasound (CDUS) result. This is a direct application of Bayes' theorem. We begin by formally defining the events and probabilities.\n\nLet $T$ be the event that the patient has testicular torsion.\nLet $T^c$ be the event that the patient does not have testicular torsion.\nLet $CDUS^+$ be the event that the CDUS test result is positive.\nLet $CDUS^-$ be the event that the CDUS test result is negative.\n\nFrom the problem statement, we are given the following information:\nThe pretest probability of torsion is $P(T) = 0.40$.\nFrom this, the pretest probability of not having torsion is $P(T^c) = 1 - P(T) = 1 - 0.40 = 0.60$.\n\nThe test characteristics are given as:\nThe sensitivity of the CDUS, which is the probability of a positive test given that the disease is present:\n$$\n\\text{Sensitivity} = P(CDUS^+ | T) = 0.90\n$$\nThe specificity of the CDUS, which is the probability of a negative test given that the disease is absent:\n$$\n\\text{Specificity} = P(CDUS^- | T^c) = 0.95\n$$\n\nWe are asked to find the post-test probability of torsion given a negative CDUS result, which is the conditional probability $P(T | CDUS^-)$.\n\nAccording to the definition of conditional probability, also known as Bayes' theorem, we have:\n$$\nP(T | CDUS^-) = \\frac{P(T \\cap CDUS^-)}{P(CDUS^-)}\n$$\nThe numerator can be re-written using the definition of conditional probability $P(CDUS^- | T) = \\frac{P(T \\cap CDUS^-)}{P(T)}$, which gives $P(T \\cap CDUS^-) = P(CDUS^- | T) \\cdot P(T)$.\n$$\nP(T | CDUS^-) = \\frac{P(CDUS^- | T) \\cdot P(T)}{P(CDUS^-)}\n$$\nThe denominator, $P(CDUS^-)$, is the total probability of a negative test result. It can be expanded using the law of total probability, which sums the probabilities of a negative test over all possible disease states (torsion or no torsion):\n$$\nP(CDUS^-) = P(CDUS^- | T) \\cdot P(T) + P(CDUS^- | T^c) \\cdot P(T^c)\n$$\nSubstituting this expansion into the Bayes' theorem expression, we get the full formula for the post-test probability:\n$$\nP(T | CDUS^-) = \\frac{P(CDUS^- | T) \\cdot P(T)}{P(CDUS^- | T) \\cdot P(T) + P(CDUS^- | T^c) \\cdot P(T^c)}\n$$\nNow, we must express all terms in this formula using the given information. We have:\n- $P(T) = 0.40$ (given pretest probability).\n- $P(T^c) = 1 - P(T) = 0.60$.\n- $P(CDUS^- | T^c)$ is the specificity, given as $0.95$.\n- $P(CDUS^- | T)$ is the probability of a negative test given the presence of torsion. This is the complement of the sensitivity. For a patient with torsion, the test can only be positive or negative, so $P(CDUS^+ | T) + P(CDUS^- | T) = 1$. This probability $P(CDUS^- | T)$ is also known as the false negative rate (FNR).\n$$\nP(CDUS^- | T) = 1 - P(CDUS^+ | T) = 1 - \\text{Sensitivity} = 1 - 0.90 = 0.10\n$$\nNow we can substitute all these numerical values into the formula:\n$$\nP(T | CDUS^-) = \\frac{(0.10) \\cdot (0.40)}{(0.10) \\cdot (0.40) + (0.95) \\cdot (0.60)}\n$$\nWe compute the numerator and the denominator separately.\nNumerator:\n$$\n(0.10) \\cdot (0.40) = 0.04\n$$\nDenominator:\n$$\n(0.10) \\cdot (0.40) + (0.95) \\cdot (0.60) = 0.04 + 0.57 = 0.61\n$$\nThus, the post-test probability is:\n$$\nP(T | CDUS^-) = \\frac{0.04}{0.61}\n$$\nTo express this as an exact fraction, we can write the decimals as fractions and simplify:\n$$\nP(T | CDUS^-) = \\frac{4/100}{61/100} = \\frac{4}{61}\n$$\nAs a decimal rounded to four significant figures, the value is $4 \\div 61 \\approx 0.0655737...$, which rounds to $0.06557$. The problem asks for an exact fraction, which is $\\frac{4}{61}$. This probability represents the updated belief that the patient has testicular torsion after receiving a negative CDUS result. The initial suspicion of $40\\%$ has been reduced to approximately $6.6\\%$.",
            "answer": "$$\\boxed{\\frac{4}{61}}$$"
        },
        {
            "introduction": "Effective surgical management extends beyond interpreting single tests to designing and evaluating entire clinical pathways. When faced with suspected testicular torsion, surgeons must weigh the competing demands of diagnostic certainty against the irreversible damage caused by ischemic delay. This practice challenges you to construct a quantitative decision model, enabling a rigorous comparison between an immediate-exploration strategy and a diagnostic-first approach, a core skill in developing and refining clinical protocols to optimize patient outcomes. ",
            "id": "5192928",
            "problem": "A surgical service is evaluating two management strategies for patients presenting with acute scrotal pain and clinical suspicion of testicular torsion, where the decision must balance urgency against diagnostic accuracy. Strategy A is immediate scrotal exploration upon arrival. Strategy B is a diagnostic pathway that uses Color Doppler Ultrasonography (CDU) prior to exploration. Use the following scientifically grounded assumptions and core definitions to construct a quantitative decision model and compute the requested quantity.\n\nFundamental definitions and well-tested facts:\n- Sensitivity and specificity are defined as follows: sensitivity is the probability of a positive test given disease is present, and specificity is the probability of a negative test given disease is absent. Let sensitivity be denoted by $\\text{se}$ and specificity by $\\text{sp}$.\n- The pretest probability (prevalence) of true testicular torsion among patients with clinical suspicion is denoted $p_{T}$.\n- Let $t_{0}$ denote the time from pain onset to presentation. Assume $t_{0}$ is uniformly distributed on $[a,b]$ with $a = 2$ hours and $b = 8$ hours, i.e., $t_{0} \\sim \\text{Uniform}(a,b)$.\n- Definitive viability of the torsed testis depends on the total ischemia time until surgical detorsion or exploration. Let the probability that a testis remains viable at time $t$ hours since pain onset be $S(t)$, modeled as a widely used piecewise-exponential form: $S(t) = 1$ for $t \\leq 6$ hours and $S(t) = \\exp\\!\\big(-(t - 6)/\\tau\\big)$ for $t > 6$ hours, where $\\tau$ is a time constant reflecting the decay of salvage probability after the $6$-hour threshold. Use $\\tau = 4$ hours. The probability of orchiectomy in a true torsion case explored at total time $t$ is therefore $1 - S(t)$.\n- Non-torsion cases never undergo orchiectomy under either strategy, even if explored.\n\nOperational parameters:\n- For immediate exploration (Strategy A), the fixed operative preparation delay is $d_{E} = 1$ hour.\n- For CDU-first (Strategy B), the CDU acquisition and interpretation delay is $d_{U} = 1$ hour; exploration follows immediately after a positive CDU or after a re-evaluation delay $d_{R} = 3$ hours if CDU is negative and symptoms persist.\n- For CDU, use $\\text{se} = 0.91$ and $\\text{sp} = 0.97$. Use $p_{T} = 0.35$.\n\nDecision structure:\n- Strategy A: All suspected cases go to exploration at time $t_{A} = t_{0} + d_{E}$. Orchiectomy occurs only in true torsion cases with probability $1 - S(t_{A})$.\n- Strategy B: All suspected cases undergo CDU at time $t_{0} + d_{U}$. True torsion cases have a positive CDU with probability $\\text{se}$, then go to exploration at $t_{B+} = t_{0} + d_{U} + d_{E}$; they have a negative CDU with probability $1 - \\text{se}$, then go to exploration at $t_{B-} = t_{0} + d_{U} + d_{R} + d_{E}$. Orchiectomy occurs only in true torsion cases with probability $1 - S(\\cdot)$ evaluated at the corresponding total time. Non-torsion cases do not undergo orchiectomy under either strategy.\n\nTask:\nStarting strictly from these definitions, build the decision tree probabilities and expected values formally, and compute the difference in expected orchiectomy rate, defined as the expected proportion of the presenting cohort who undergo orchiectomy under Strategy B minus Strategy A. Express the final difference as a decimal (no percentage sign). Round your answer to four significant figures.",
            "solution": "The user wants me to validate and solve a problem from the field of systemic surgery, specifically involving a decision analysis between two management strategies for suspected testicular torsion.\n\n### Step 1: Extract Givens\n-   **Definitions**:\n    -   Sensitivity ($\\text{se}$): Probability of a positive test given disease is present.\n    -   Specificity ($\\text{sp}$): Probability of a negative test given disease is absent.\n-   **Constants and Parameters**:\n    -   Pretest probability of testicular torsion: $p_{T} = 0.35$.\n    -   Distribution of time from pain onset to presentation: $t_{0} \\sim \\text{Uniform}(a,b)$ where $a=2$ hours and $b=8$ hours.\n    -   Probability of testis viability at time $t$: $S(t) = 1$ for $t \\leq 6$ hours and $S(t) = \\exp(-(t - 6)/\\tau)$ for $t > 6$ hours.\n    -   Time constant for viability decay: $\\tau = 4$ hours.\n    -   Probability of orchiectomy in a true torsion case at time $t$: $1 - S(t)$.\n    -   Orchiectomy in non-torsion cases: Never occurs.\n    -   Operative preparation delay: $d_{E} = 1$ hour.\n    -   CDU acquisition and interpretation delay: $d_{U} = 1$ hour.\n    -   Re-evaluation delay after negative CDU: $d_{R} = 3$ hours.\n    -   CDU sensitivity: $\\text{se} = 0.91$.\n    -   CDU specificity: $\\text{sp} = 0.97$.\n-   **Decision Structure**:\n    -   Strategy A (immediate exploration): Total ischemia time is $t_{A} = t_{0} + d_{E}$.\n    -   Strategy B (CDU-first):\n        -   For a true torsion case with a positive CDU (probability $\\text{se}$): Total ischemia time is $t_{B+} = t_{0} + d_{U} + d_{E}$.\n        -   For a true torsion case with a negative CDU (probability $1 - \\text{se}$): Total ischemia time is $t_{B-} = t_{0} + d_{U} + d_{R} + d_{E}$.\n-   **Task**: Compute the difference in expected orchiectomy rate, defined as (Strategy B rate) - (Strategy A rate), and round to four significant figures.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is subjected to validation:\n-   **Scientifically Grounded**: The problem is well-grounded in medical decision analysis. It uses standard epidemiological definitions (sensitivity, specificity, prevalence) and a clinically accepted piecewise-exponential model for testicular salvage rate as a function of ischemia time. The parameters are realistic for the clinical context described.\n-   **Well-Posed**: The problem is well-posed. All necessary variables, constants, distributions, and functional forms are explicitly provided. The objective—to compute the difference in expected values—is clearly stated and mathematically tractable.\n-   **Objective**: The language is precise, quantitative, and devoid of subjective or ambiguous terminology.\n\nThe problem does not exhibit any of the listed flaws (e.g., scientific unsoundness, incompleteness, contradiction, vagueness). The variable $\\text{sp}$ is provided but not required for the calculation, which is not a flaw, but rather a reflection of a real-world scenario where not all available data is needed for a specific question. The problem requires a multi-step calculation involving probability theory and calculus, making it non-trivial.\n\n### Step 3: Verdict and Action\nThe problem statement is **valid**. A complete solution will be provided.\n\nThe objective is to compute the difference in the expected orchiectomy rate between Strategy B and Strategy A, denoted as $\\Delta E = E_B - E_A$. The expected orchiectomy rate for a given strategy is the probability that a random patient from the cohort undergoes orchiectomy, averaged over the distribution of presentation times $t_0$.\n\nLet $T$ be the event of true testicular torsion. We are given the prevalence $P(T) = p_{T} = 0.35$. Since orchiectomy only occurs in true torsion cases, the probability of orchiectomy for any patient is $P(O) = P(O|T)P(T) = p_T P(O|T)$. The probability of orchiectomy for a torsion patient explored at time $t$ is $1 - S(t)$. The time of presentation $t_0$ is a random variable with probability density function $f(t_0) = \\frac{1}{b-a} = \\frac{1}{8-2} = \\frac{1}{6}$ for $t_0 \\in [2, 8]$.\n\n**Expected Orchiectomy Rate for Strategy A ($E_A$)**\nIn Strategy A, all patients go to exploration. For a patient with true torsion, the total ischemia time is $t_A = t_0 + d_E = t_0 + 1$. The expected orchiectomy rate is:\n$$E_A = \\int_{a}^{b} p_T \\left(1 - S(t_0 + 1)\\right) f(t_0) dt_0 = \\frac{p_T}{6} \\int_{2}^{8} (1 - S(t_0 + 1)) dt_0$$\nThe function $S(t)$ changes at $t=6$. For the argument $t_0+1$, this corresponds to $t_0=5$.\n-   For $t_0 \\in [2, 5]$, we have $t_0+1 \\in [3, 6]$, so $S(t_0+1) = 1$. The integrand $(1-S(t_0+1))$ is $0$.\n-   For $t_0 \\in (5, 8]$, we have $t_0+1 \\in (6, 9]$, so $S(t_0+1) = \\exp(-(t_0+1-6)/4) = \\exp(-(t_0-5)/4)$.\nThe integral becomes:\n$$E_A = \\frac{p_T}{6} \\int_5^8 \\left(1 - \\exp\\left(-\\frac{t_0-5}{4}\\right)\\right) dt_0$$\nLet $u = t_0 - 5$, so $du = dt_0$. The integration limits change from $[5, 8]$ to $[0, 3]$.\n$$E_A = \\frac{p_T}{6} \\int_0^3 (1 - \\exp(-u/4)) du = \\frac{p_T}{6} \\left[u + 4\\exp(-u/4)\\right]_0^3$$\n$$E_A = \\frac{p_T}{6} \\left( (3 + 4\\exp(-3/4)) - (0 + 4\\exp(0)) \\right) = \\frac{p_T}{6} (4\\exp(-3/4) - 1)$$\n\n**Expected Orchiectomy Rate for Strategy B ($E_B$)**\nIn Strategy B, a patient with true torsion follows one of two paths:\n1.  Positive CDU (probability $\\text{se}$): Exploration at $t_{B+} = t_0 + d_U + d_E = t_0 + 1 + 1 = t_0 + 2$. Orchiectomy probability is $1 - S(t_0+2)$.\n2.  Negative CDU (probability $1-\\text{se}$): Exploration at $t_{B-} = t_0 + d_U + d_R + d_E = t_0 + 1 + 3 + 1 = t_0 + 5$. Orchiectomy probability is $1 - S(t_0+5)$.\n\nThe expected rate is the weighted average over these paths, integrated over $t_0$:\n$$E_B = \\frac{p_T}{6} \\int_{2}^{8} \\left[ \\text{se}(1 - S(t_0+2)) + (1-\\text{se})(1 - S(t_0+5)) \\right] dt_0$$\nThis separates into two integrals, which we denote $I_1$ and $I_2$:\n$$E_B = \\frac{p_T}{6} \\left[ \\text{se} \\underbrace{\\int_2^8 (1 - S(t_0+2)) dt_0}_{I_1} + (1-\\text{se}) \\underbrace{\\int_2^8 (1 - S(t_0+5)) dt_0}_{I_2} \\right]$$\nFor $I_1$, the switch for $S(\\cdot)$ occurs at $t_0+2=6$, i.e., $t_0=4$.\n-   For $t_0 \\in [2, 4]$, $S(t_0+2) = 1$, so the integrand is $0$.\n-   For $t_0 \\in (4, 8]$, $S(t_0+2) = \\exp(-(t_0-4)/4)$.\n$$I_1 = \\int_4^8 \\left(1 - \\exp\\left(-\\frac{t_0-4}{4}\\right)\\right) dt_0 = \\left[t_0 + 4\\exp\\left(-\\frac{t_0-4}{4}\\right)\\right]_4^8$$\n$$I_1 = (8 + 4\\exp(-4/4)) - (4 + 4\\exp(0)) = 8 + 4\\exp(-1) - 4 - 4 = 4\\exp(-1)$$\nFor $I_2$, the argument is $t_0+5$. As $t_0 \\in [2, 8]$, $t_0+5 \\in [7, 13]$, which is always greater than $6$.\n$$S(t_0+5) = \\exp(-(t_0+5-6)/4) = \\exp(-(t_0-1)/4)$$\n$$I_2 = \\int_2^8 \\left(1 - \\exp\\left(-\\frac{t_0-1}{4}\\right)\\right) dt_0 = \\left[t_0 + 4\\exp\\left(-\\frac{t_0-1}{4}\\right)\\right]_2^8$$\n$$I_2 = \\left(8 + 4\\exp\\left(-\\frac{7}{4}\\right)\\right) - \\left(2 + 4\\exp\\left(-\\frac{1}{4}\\right)\\right) = 6 + 4\\exp(-7/4) - 4\\exp(-1/4)$$\nCombining these results gives $E_B$:\n$$E_B = \\frac{p_T}{6} \\left[ \\text{se}(4\\exp(-1)) + (1-\\text{se})(6 + 4\\exp(-7/4) - 4\\exp(-1/4)) \\right]$$\n\n**Difference in Expected Rates ($\\Delta E$)**\nThe required quantity is $\\Delta E = E_B - E_A$.\n$$\\Delta E = \\frac{p_T}{6} \\left[ \\text{se}(4\\exp(-1)) + (1-\\text{se})(6 + 4\\exp(-7/4) - 4\\exp(-1/4)) - (4\\exp(-3/4) - 1) \\right]$$\nNow, we substitute the given numerical values: $p_T=0.35$ and $\\text{se}=0.91$.\n$$\\Delta E = \\frac{0.35}{6} \\left[ 0.91(4\\exp(-1)) + 0.09(6 + 4\\exp(-7/4) - 4\\exp(-1/4)) - 4\\exp(-3/4) + 1 \\right]$$\nWe calculate the terms:\n$I_A \\equiv 4\\exp(-3/4) - 1 \\approx 4(0.472367) - 1 = 1.889468 - 1 = 0.889468$\n$E_A = \\frac{0.35}{6} \\times I_A \\approx 0.0518856$\n\n$I_1 = 4\\exp(-1) \\approx 4(0.367879) = 1.471516$\n$I_2 = 6 + 4\\exp(-7/4) - 4\\exp(-1/4) \\approx 6 + 4(0.173774) - 4(0.778801) = 6 + 0.695096 - 3.115204 = 3.579892$\nThe term in brackets for $E_B$ is:\n$$0.91 \\cdot I_1 + 0.09 \\cdot I_2 \\approx 0.91(1.471516) + 0.09(3.579892) = 1.339080 + 0.322190 = 1.661270$$\n$E_B = \\frac{0.35}{6} \\times 1.661270 \\approx 0.0969074$\n\nFinally, the difference is:\n$$\\Delta E = E_B - E_A \\approx 0.0969074 - 0.0518856 = 0.0450218$$\nRounding to four significant figures gives $0.04502$.",
            "answer": "$$\\boxed{0.04502}$$"
        },
        {
            "introduction": "While clinical data and statistical models establish the critical relationship between time and testicular viability, a deeper understanding comes from modeling the underlying pathophysiology. This advanced practice moves from epidemiology to mechanism, asking you to build a computational model of testicular hemodynamics from first principles of fluid dynamics and physiology. By simulating how the physical twisting of the spermatic cord compromises blood flow and oxygen delivery, you will gain a quantitative and intuitive grasp of the ischemic cascade that defines this surgical emergency. ",
            "id": "5192875",
            "problem": "You are asked to construct and implement a hemodynamic compartment model capturing how degrees of testicular torsion alter arterial inflow and venous outflow and thereby determine the time to tissue infarction. The model must be derived from fundamental fluid mechanics and microcirculatory physiology and implemented as a time-stepped numerical simulation. The objective is to compute the time, in minutes, until tissue oxygen stores are exhausted, given a fixed torsion angle and metabolic demand. If oxygen stores are not exhausted within the simulation window, you should return the full window duration.\n\nUse the following foundational bases and definitions as the starting point for your derivation and design:\n\n- Poiseuille’s law for laminar flow: $$Q = \\frac{\\Delta P \\,\\pi r^4}{8 \\mu L},$$ where $Q$ is volumetric flow, $\\Delta P$ is the pressure drop, $r$ is the effective vessel radius, $L$ is the effective vessel length, and $\\mu$ is blood dynamic viscosity. Accordingly, the hydraulic resistance satisfies $$R \\propto \\frac{L}{r^4}.$$\n- Starling resistor concept for collapsible venous segments: venous outflow depends on the difference between intravascular pressure and surrounding extravascular (external) pressure, with flow ceasing when the external pressure equals or exceeds intravascular pressure.\n- Mass conservation and compartment compliance: net inflow minus outflow changes the compartmental blood volume and pressures according to the compliance of the compartment.\n- Oxygen mass balance: tissue oxygen store changes according to inflow-delivered oxygen minus metabolic consumption.\n\nModel structure and variables:\n\n- Let the torsion angle be $\\theta$ (in degrees), and define the torsion count $n = \\theta / 180^\\circ$.\n- Let the arterial resistance be $R_a(\\theta)$ and venous resistance be $R_v(\\theta)$, each derived from Poiseuille’s law with torsion-modified effective geometric parameters. Assume torsion increases effective length and reduces effective radius according to $$L(\\theta) = L_0 \\,(1 + \\lambda n), \\quad r(\\theta) = r_0 \\, e^{-k n},$$ with distinct $(\\lambda,k)$ parameters for artery and vein. Use these relations to construct $R_a(\\theta)$ and $R_v(\\theta)$ from the base resistance definitions $R_{a0}$ and $R_{v0}$.\n- Let the mean arterial pressure be $P_a$ (in $\\text{mmHg}$), capillary compartment pressure be $P_c$ (in $\\text{mmHg}$), and external tissue pressure be $P_{\\text{ext}}$ (in $\\text{mmHg}$).\n- Arterial inflow and venous outflow are given by $$Q_a = \\max\\!\\left(\\frac{P_a - P_c}{R_a(\\theta)}, 0\\right), \\quad Q_v = \\max\\!\\left(\\frac{P_c - P_{\\text{ext}}}{R_v(\\theta)}, 0\\right),$$ with flows in $\\text{ml}/\\text{min}$ and resistances in $\\text{mmHg}\\cdot \\text{min}/\\text{ml}$.\n- Capillary pressure evolves by compliance $C_b$ (in $\\text{ml}/\\text{mmHg}$): $$\\frac{dP_c}{dt} = \\frac{Q_a - Q_v}{C_b}.$$\n- Edema volume $V_e$ (in $\\text{ml}$) accumulates from net inflow: $$\\frac{dV_e}{dt} = \\max(Q_a - Q_v, 0), \\quad P_{\\text{ext}} = P_{\\text{ext},0} + \\kappa_e V_e,$$ with $\\kappa_e$ (in $\\text{mmHg}/\\text{ml}$).\n- Tissue oxygen store $S$ (in $\\text{ml O}_2$) evolves via $$\\frac{dS}{dt} = Q_a \\, C_{\\text{O}_2} - M,$$ with oxygen content of blood $C_{\\text{O}_2}$ (in $\\text{ml O}_2/\\text{ml}$) and metabolic consumption $M$ (in $\\text{ml O}_2/\\text{min}$). Infarction occurs when $S \\le 0$.\n\nNumerical specification:\n\n- Use the explicit Euler method for time-stepping with $\\Delta t = 0.1\\,\\text{min}$ from $t=0$ to a maximum of $t_{\\max} = 720\\,\\text{min}$ (12 hours).\n- Initial conditions: $P_c(0) = 25\\,\\text{mmHg}$, $P_{\\text{ext}}(0) = P_{\\text{ext},0} = 5\\,\\text{mmHg}$, $V_e(0) = 0\\,\\text{ml}$, $S(0) = S_0$.\n- Parameters (use these exact values): $R_{a0} = 1\\,\\text{mmHg}\\cdot \\text{min}/\\text{ml}$, $R_{v0} = 0.5\\,\\text{mmHg}\\cdot \\text{min}/\\text{ml}$, $C_b = 2\\,\\text{ml}/\\text{mmHg}$, $\\kappa_e = 0.05\\,\\text{mmHg}/\\text{ml}$, $P_a = 70\\,\\text{mmHg}$, $C_{\\text{O}_2} = 0.2\\,\\text{ml O}_2/\\text{ml}$, $S_0 = 12\\,\\text{ml O}_2$, arterial geometry modifiers $\\lambda_a = 0.2$, $k_a = 0.4$, venous geometry modifiers $\\lambda_v = 0.3$, $k_v = 0.9$.\n- Angle input unit: degrees. Pressure unit: $\\text{mmHg}$. Flow unit: $\\text{ml}/\\text{min}$. Time unit: minutes. Oxygen units: $\\text{ml O}_2$.\n\nTarget computation:\n\n- For each test case, simulate until $S(t)$ crosses zero. Record the crossing time in minutes as a float rounded to one decimal. If $S(t)$ remains positive for the entire window up to $720\\,\\text{min}$, return $720.0$.\n\nTest suite:\n\nCompute the time-to-infarction for the following $(\\theta, M)$ pairs, where $\\theta$ is the torsion angle in degrees and $M$ is the metabolic consumption in $\\text{ml O}_2/\\text{min}$:\n\n1. $(0, 0.05)$ — control without torsion, typical metabolic demand.\n2. $(180, 0.05)$ — moderate torsion, typical metabolic demand.\n3. $(360, 0.05)$ — severe torsion, typical metabolic demand.\n4. $(720, 0.05)$ — extreme torsion, typical metabolic demand.\n5. $(360, 0.02)$ — severe torsion, reduced metabolic demand.\n\nFinal output format:\n\nYour program should produce a single line of output containing the five results as a comma-separated list enclosed in square brackets, with each time expressed in minutes as a float rounded to one decimal (e.g., \"[720.0,720.0,295.4,240.0,720.0]\").",
            "solution": "The problem statement is assessed to be **valid**. It is a well-defined problem in computational physiology, grounded in established scientific and mathematical principles. The model is built upon Poiseuille's law for fluid dynamics, the Starling resistor concept for venous flow, and established mass conservation principles for compartmental modeling. The parameters, initial conditions, and numerical methods are all explicitly defined, making the problem well-posed and solvable. There are no scientific absurdities, contradictions, or ambiguities.\n\nThe solution involves constructing and simulating a system of coupled ordinary differential equations (ODEs) that model the hemodynamics and oxygenation of testicular tissue under torsion.\n\nFirst, we formalize the torsion-dependent vascular resistances. The torsion count $n$ is defined as $n = \\theta / 180^\\circ$, where $\\theta$ is the angle of torsion in degrees. The problem states that hydraulic resistance $R$ is proportional to the ratio of effective vessel length $L$ to the fourth power of the effective radius $r$, i.e., $R \\propto L/r^4$. The dependencies of $L$ and $r$ on the torsion count $n$ are given as $L(\\theta) = L_0 (1 + \\lambda n)$ and $r(\\theta) = r_0 e^{-k n}$. The resistance $R(\\theta)$ at a given torsion angle can be expressed in terms of the baseline resistance $R_0 \\propto L_0/r_0^4$:\n$$R(\\theta) = R_0 \\cdot \\frac{L(\\theta)/L_0}{(r(\\theta)/r_0)^4} = R_0 \\frac{1 + \\lambda n}{(e^{-kn})^4} = R_0 (1 + \\lambda n) e^{4kn}$$\nThis general formula is applied to both arterial and venous segments using their respective baseline resistances ($R_{a0}$, $R_{v0}$) and geometry modification parameters ($\\lambda_a, k_a$ for the artery and $\\lambda_v, k_v$ for the vein). The specific resistance functions are:\n$$R_a(\\theta) = R_{a0} (1 + \\lambda_a n) e^{4k_a n}$$\n$$R_v(\\theta) = R_{v0} (1 + \\lambda_v n) e^{4k_v n}$$\n\nNext, we define the flows and the system of ODEs. Arterial inflow $Q_a$ and venous outflow $Q_v$ are driven by pressure gradients, and are constrained to be non-negative:\n$$Q_a = \\max\\!\\left(\\frac{P_a - P_c}{R_a(\\theta)}, 0\\right)$$\n$$Q_v = \\max\\!\\left(\\frac{P_c - P_{\\text{ext}}}{R_v(\\theta)}, 0.0\\right)$$\nHere, $P_a$ is the constant mean arterial pressure, $P_c$ is the dynamic capillary pressure, and $P_{\\text{ext}}$ is the dynamic external tissue pressure.\n\nThe evolution of the system's state variables—capillary pressure $P_c(t)$, edema volume $V_e(t)$, and tissue oxygen store $S(t)$—is governed by the following ODEs:\n1.  **Capillary Pressure Dynamics**: Based on the net flow into the capillary compartment and its compliance $C_b$.\n    $$\\frac{dP_c}{dt} = \\frac{Q_a - Q_v}{C_b}$$\n2.  **Edema Accumulation**: Assumed to occur when inflow exceeds outflow, leading to an increase in extravascular fluid volume $V_e$.\n    $$\\frac{dV_e}{dt} = \\max(Q_a - Q_v, 0)$$\n    This accumulated volume $V_e$ in turn increases the external tissue pressure $P_{\\text{ext}}$ from its baseline $P_{\\text{ext},0}$ via a stiffness constant $\\kappa_e$:\n    $$P_{\\text{ext}}(t) = P_{\\text{ext},0} + \\kappa_e V_e(t)$$\n3.  **Oxygen Store Dynamics**: Based on oxygen delivery via arterial inflow ($Q_a \\cdot C_{\\text{O}_2}$) and metabolic consumption ($M$).\n    $$\\frac{dS}{dt} = Q_a \\, C_{\\text{O}_2} - M$$\n\nThe problem mandates the use of the explicit Euler method for numerical integration with a time step $\\Delta t = 0.1\\,\\text{min}$. The discrete update rules for the state variables at each time step are:\n$$P_c(t+\\Delta t) = P_c(t) + \\left( \\frac{Q_a(t) - Q_v(t)}{C_b} \\right) \\Delta t$$\n$$V_e(t+\\Delta t) = V_e(t) + \\max(Q_a(t) - Q_v(t), 0) \\Delta t$$\n$$S(t+\\Delta t) = S(t) + (Q_a(t) \\cdot C_{\\text{O}_2} - M) \\Delta t$$\nThe flows $Q_a(t)$ and $Q_v(t)$ are calculated at the beginning of each step using the state variables at time $t$.\n\nThe simulation is initialized with a given set of parameters and initial conditions:\n-   Initial Conditions: $P_c(0) = 25\\,\\text{mmHg}$, $V_e(0) = 0\\,\\text{ml}$, $S(0) = S_0 = 12\\,\\text{ml O}_2$, $P_{\\text{ext},0} = 5\\,\\text{mmHg}$.\n-   Constant Parameters: $P_a = 70\\,\\text{mmHg}$, $R_{a0} = 1\\,\\text{mmHg}\\cdot \\text{min}/\\text{ml}$, $R_{v0} = 0.5\\,\\text{mmHg}\\cdot \\text{min}/\\text{ml}$, $C_b = 2\\,\\text{ml}/\\text{mmHg}$, $\\kappa_e = 0.05\\,\\text{mmHg}/\\text{ml}$, $C_{\\text{O}_2} = 0.2\\,\\text{ml O}_2/\\text{ml}$, $\\lambda_a = 0.2$, $k_a = 0.4$, $\\lambda_v = 0.3$, $k_v = 0.9$.\n\nThe simulation for each test case $(\\theta, M)$ runs from $t=0$ up to a maximum of $t_{\\max} = 720\\,\\text{min}$. In each time step, after updating the state variables, a check is performed for the infarction condition $S \\le 0$. If met, the simulation for that case terminates, and the current time is recorded. If the simulation completes up to $t_{\\max}$ without $S$ becoming non-positive, a time of $720.0\\,\\text{min}$ is recorded. This process is repeated for all specified test cases to generate the final list of results.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Main function to run simulations for all test cases and print results.\n    \"\"\"\n\n    def simulate_case(theta_deg, M):\n        \"\"\"\n        Simulates the hemodynamic model for a single case of torsion and metabolism.\n\n        Args:\n            theta_deg (float): The angle of torsion in degrees.\n            M (float): The metabolic consumption of oxygen in ml_O2/min.\n\n        Returns:\n            float: The time to infarction in minutes, rounded to one decimal place,\n                   or the maximum simulation time if no infarction occurs.\n        \"\"\"\n        # --- Model Parameters ---\n        R_a0 = 1.0       # mmHg*min/ml\n        R_v0 = 0.5       # mmHg*min/ml\n        C_b = 2.0        # ml/mmHg\n        kappa_e = 0.05   # mmHg/ml\n        P_a = 70.0       # mmHg\n        C_O2 = 0.2       # ml_O2/ml\n        S_0 = 12.0       # ml_O2\n        P_ext_0 = 5.0    # mmHg\n\n        # --- Geometry Modifiers ---\n        lambda_a = 0.2\n        k_a = 0.4\n        lambda_v = 0.3\n        k_v = 0.9\n\n        # --- Simulation Settings ---\n        dt = 0.1         # min\n        t_max = 720.0    # min\n\n        # --- Torsion-dependent Resistance Calculation ---\n        n = theta_deg / 180.0\n        R_a = R_a0 * (1 + lambda_a * n) * np.exp(4 * k_a * n)\n        R_v = R_v0 * (1 + lambda_v * n) * np.exp(4 * k_v * n)\n\n        # --- Initial Conditions ---\n        Pc = 25.0  # Capillary pressure (mmHg)\n        Ve = 0.0   # Edema volume (ml)\n        S = S_0    # Oxygen store (ml_O2)\n        t = 0.0    # Time (min)\n\n        # --- Simulation Loop ---\n        num_steps = int(t_max / dt)\n        for _ in range(num_steps):\n            # Calculate current external pressure\n            P_ext = P_ext_0 + kappa_e * Ve\n\n            # Calculate flows based on current pressures\n            Qa = max((P_a - Pc) / R_a, 0)\n            Qv = max((Pc - P_ext) / R_v, 0)\n\n            # Calculate time derivatives of state variables\n            dPcdt = (Qa - Qv) / C_b\n            dVedt = max(Qa - Qv, 0)\n            dSdt = Qa * C_O2 - M\n\n            # Update state variables using explicit Euler method\n            Pc += dPcdt * dt\n            Ve += dVedt * dt\n            S += dSdt * dt\n            t += dt\n\n            # Check for infarction condition\n            if S <= 0:\n                return round(t, 1)\n\n        # If simulation completes without infarction, return max time\n        return t_max\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (0.0, 0.05),    # Case 1: Control\n        (180.0, 0.05),  # Case 2: Moderate torsion\n        (360.0, 0.05),  # Case 3: Severe torsion\n        (720.0, 0.05),  # Case 4: Extreme torsion\n        (360.0, 0.02),  # Case 5: Severe torsion, low metabolism\n    ]\n\n    results = []\n    for theta, M in test_cases:\n        result = simulate_case(theta, M)\n        results.append(result)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "Evaluating the effectiveness of a behavioral intervention is the cornerstone of evidence-based health policy. This first exercise grounds you in the essential task of measurement, asking you to quantify the impact of a 'nudge' designed to overcome omission bias in medication adherence. By calculating fundamental epidemiological metrics like relative risk and risk difference, you will learn to translate a psychological principle into a clear, measurable clinical effect, a critical skill for any health systems scientist. ",
            "id": "4361478",
            "problem": "A health system is testing a behavioral \"nudge\" designed to counteract omission bias, the tendency to prefer harm from inaction over equivalent harm from action. In a medication adherence program for patients with hypertension, baseline adherence (without the nudge) is observed to be $0.60$. After implementing an opt-out refill and reminder system that targets omission bias, adherence increases to $0.72$. Using fundamental definitions from probability and epidemiology within health systems science, compute the relative risk of adherence and the risk difference of adherence for the intervention compared to the baseline. Then, interpret the clinical significance of these metrics in terms of expected changes in adherence per $100$ patients and briefly justify why countering omission bias is a plausible mechanism for the observed change. Express both the relative risk and the risk difference as decimals (not with a percentage sign), and round your numerical results to four significant figures.",
            "solution": "The user-provided problem is first subjected to a rigorous validation process.\n\n### Step 1: Extract Givens\n- Baseline medication adherence (control group): $P_{baseline} = 0.60$\n- Adherence with intervention (intervention group): $P_{intervention} = 0.72$\n- Intervention: An opt-out refill and reminder system targeting omission bias.\n- Required computations:\n    1. Relative risk of adherence ($RR$).\n    2. Risk difference of adherence ($RD$).\n- Required interpretations:\n    1. Clinical significance of these metrics in terms of expected changes in adherence per $100$ patients.\n    2. Justification for why countering omission bias is a plausible mechanism.\n- Formatting requirements: Express numerical results as decimals rounded to four significant figures.\n\n### Step 2: Validate Using Extracted Givens\n- **Scientific Grounding**: The problem is scientifically grounded. The concepts of medication adherence, omission bias, behavioral nudges (specifically opt-out systems), relative risk, and risk difference are all well-established and central to the fields of health systems science, epidemiology, and behavioral economics. The provided adherence rates are realistic probabilities.\n- **Well-Posedness**: The problem is well-posed. It provides all necessary data to calculate the defined epidemiological metrics. The questions asked have clear, unique, and meaningful answers based on standard definitions.\n- **Objectivity**: The problem is stated objectively and uses precise terminology.\n- **Flaw Analysis**:\n    - The problem does not violate any scientific principles.\n    - It is directly formalizable using standard mathematical definitions.\n    - It is complete and internally consistent.\n    - The scenario and data are plausible and realistic.\n    - The terms are unambiguous in the context of epidemiology.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. A solution will be generated.\n\n### Solution\nThe problem requires the calculation and interpretation of two fundamental epidemiological metrics: relative risk ($RR$) and risk difference ($RD$), in the context of a behavioral intervention to improve medication adherence.\n\nLet $P_{intervention}$ represent the probability of adherence in the group receiving the intervention (the \"nudge\"), and let $P_{baseline}$ represent the probability of adherence in the baseline group (without the intervention). From the problem statement, we have:\n$$P_{intervention} = 0.72$$\n$$P_{baseline} = 0.60$$\n\n**1. Calculation of Relative Risk ($RR$)**\n\nThe relative risk is the ratio of the risk (in this case, the probability of adherence) in the intervention group to the risk in the baseline group. It quantifies how many times more likely the outcome is in the intervention group compared to the control group.\n\nThe formula for relative risk is:\n$$RR = \\frac{P_{intervention}}{P_{baseline}}$$\n\nSubstituting the given values:\n$$RR = \\frac{0.72}{0.60} = 1.2$$\n\nRounding to four significant figures as requested, the relative risk is $1.200$.\n\n**2. Calculation of Risk Difference ($RD$)**\n\nThe risk difference, also known as the absolute risk increase, is the simple arithmetic difference in the risk of the outcome between the two groups. It provides a measure of the absolute effect of the intervention.\n\nThe formula for risk difference is:\n$$RD = P_{intervention} - P_{baseline}$$\n\nSubstituting the given values:\n$$RD = 0.72 - 0.60 = 0.12$$\n\nRounding to four significant figures as requested, the risk difference is $0.1200$.\n\n**3. Interpretation of Clinical Significance**\n\n- **Relative Risk ($RR = 1.200$):** This value indicates that patients in the intervention group are $1.2$ times, or $20\\%$ more likely, to be adherent to their medication regimen compared to patients under baseline conditions. While this metric is useful for understanding the relative magnitude of the effect, it does not convey the absolute impact on the patient population.\n\n- **Risk Difference ($RD = 0.1200$):** This value has a more direct clinical interpretation. It represents an absolute increase of $0.12$ in the probability of adherence due to the intervention. To interpret this in terms of the number of patients, we can consider a cohort of $100$ patients. The $RD$ predicts the number of additional people who would experience the outcome in the intervention group. Therefore, for every $100$ patients who are part of the opt-out system, we would expect $100 \\times RD = 100 \\times 0.1200 = 12$ additional patients to be adherent compared to what would be observed under the baseline system. This metric is often more valuable for health system planning and resource allocation. It can also be used to calculate the Number Needed to Treat (or in this case, \"Number Needed to Nudge\") which is the reciprocal of the $RD$: $1/0.1200 \\approx 8.33$. This means that approximately $8$ patients need to receive the intervention for one additional patient to become adherent.\n\n**4. Justification of the Mechanism (Omission Bias)**\n\nOmission bias is a cognitive bias describing the tendency to judge harmful actions as worse, or less moral, than equally harmful inactions (omissions). In the baseline scenario, adherence requires a series of active choices: a patient must decide to request a refill and decide to take the medication each day. Non-adherence is the default outcome if the patient does nothing; it is an omission.\n\nThe \"opt-out\" intervention fundamentally restructures the choice architecture. By automating refills and sending reminders, adherence becomes the new default state. In this system, non-adherence requires a deliberate action from the patient: they must actively choose to cancel the refill or ignore the reminder and not take the pill. The psychological burden is shifted. The inaction (omission) now leads to adherence, while non-adherence requires an action (commission). By making the desired behavior the path of least resistance, the intervention leverages the patient's potential omission bias to promote adherence rather than hinder it. A patient who might have passively failed to refill their prescription under the old system is now more likely to passively accept the automatic refill under the new one. Thus, countering (or more accurately, coopting) omission bias by changing the default is a highly plausible mechanism for the observed increase in medication adherence from $0.60$ to $0.72$.",
            "answer": "$$\\boxed{\\begin{pmatrix} 1.200  0.1200 \\end{pmatrix}}$$"
        },
        {
            "introduction": "While metrics like risk difference provide a precise measure of an intervention's absolute effect, health system leaders often need a more intuitive way to understand the resources required to achieve a desired outcome. This practice introduces the 'Number Needed to Nudge' (NNN), a powerful analogue to the clinical 'Number Needed to Treat' that translates a probability change into a concrete operational number. You will derive and calculate the NNN to see how many times a default-setting nudge must be applied to prevent one case of inappropriate antibiotic prescribing, a key goal in modern healthcare. ",
            "id": "4361462",
            "problem": "A hospital implements a default ordering nudge within its electronic health record to reduce inappropriate outpatient antibiotic prescribing by subtly steering clinicians toward guideline-concordant choices. Let the baseline probability of an inappropriate antibiotic course per eligible visit be $p_{0} = 0.25$, and suppose the nudge produces a constant absolute reduction in this probability of $\\Delta = 0.05$ for each nudged clinician-patient encounter. Assume encounters are independent and that the effect of the nudge (the absolute reduction $\\Delta$) is the same across encounters.\n\nDefine the Number Needed to Nudge (NNN) as the expected number of nudged encounters required to avert one inappropriate antibiotic course due solely to the nudge. Starting from the core definitions of probability, expectation for Bernoulli events, and absolute risk reduction (difference in event probabilities), derive an expression for NNN in terms of $\\Delta$. Then compute NNN for the given parameters $p_{0} = 0.25$ and $\\Delta = 0.05$.\n\nExpress your final answer as an exact integer (no rounding). No units are required in the final answer.",
            "solution": "The problem requires the derivation of an expression for the Number Needed to Nudge (NNN) and its subsequent calculation based on provided parameters. The NNN is defined as the expected number of nudged encounters required to avert one inappropriate antibiotic course. We shall proceed by formalizing the probabilistic framework.\n\nLet $p_0$ represent the baseline probability of an inappropriate antibiotic course per eligible visit. The problem statement gives this value as $p_{0} = 0.25$.\nLet $p_1$ be the probability of an inappropriate antibiotic course in an encounter where the nudge is active.\nThe problem defines $\\Delta$ as the constant absolute reduction in this probability due to the nudge. Mathematically, this is expressed as the absolute risk reduction (ARR):\n$$ \\Delta = p_0 - p_1 $$\nWe are given $\\Delta = 0.05$. From this, we can calculate the probability of an inappropriate course with the nudge as:\n$$ p_1 = p_0 - \\Delta = 0.25 - 0.05 = 0.20 $$\nThis is a valid probability as it lies within the interval $[0, 1]$.\n\nThe event of a single nudged encounter \"averting an inappropriate course\" corresponds to a success in a conceptual trial. The probability of this success, let's call it $p_{\\text{success}}$, is the reduction in the event rate attributable to the intervention. Over a large number of encounters, $N$, the expected number of inappropriate courses without the nudge is $N p_0$, and with the nudge is $N p_1$. The expected number of averted courses is the difference:\n$$ \\text{Expected averted courses in } N \\text{ encounters} = N p_0 - N p_1 = N(p_0 - p_1) = N\\Delta $$\nThe probability of averting a course in any single encounter is the expected number of averted courses divided by the number of encounters:\n$$ p_{\\text{success}} = \\frac{N\\Delta}{N} = \\Delta $$\nEach nudged encounter is an independent Bernoulli trial with a success probability of $\\Delta$.\n\nThe NNN is the expected number of trials (encounters) required to achieve the first success. This is formally the expectation of a geometric distribution. Let $K$ be a random variable representing the number of encounters until the first inappropriate course is averted. The probability mass function of $K$ is:\n$$ P(K=k) = (1 - p_{\\text{success}})^{k-1} p_{\\text{success}} \\quad \\text{for } k \\in \\{1, 2, 3, \\dots\\} $$\nThe expected value of a random variable $K$ that follows a geometric distribution is given by the reciprocal of the success probability:\n$$ E[K] = \\frac{1}{p_{\\text{success}}} $$\nBy definition, the NNN is this expected value, $E[K]$. Substituting $p_{\\text{success}} = \\Delta$, we arrive at the general expression for NNN:\n$$ \\text{NNN} = \\frac{1}{\\Delta} $$\nThis shows that the NNN is the reciprocal of the absolute reduction in probability, a principle identical to the one for the Number Needed to Treat (NNT) in epidemiology.\n\nNow, we must compute the specific value of NNN using the given data. The problem states that the absolute reduction is $\\Delta = 0.05$.\nSubstituting this value into the derived formula:\n$$ \\text{NNN} = \\frac{1}{0.05} $$\nTo calculate this, we can express the denominator as a fraction:\n$$ 0.05 = \\frac{5}{100} = \\frac{1}{20} $$\nTherefore, the NNN is:\n$$ \\text{NNN} = \\frac{1}{\\frac{1}{20}} = 20 $$\nThus, the expected number of nudged encounters required to avert one inappropriate antibiotic course is $20$.",
            "answer": "$$\\boxed{20}$$"
        },
        {
            "introduction": "Behavioral economics not only helps us measure outcomes but also allows us to model the complex, dynamic decision-making processes that produce them. This practice moves beyond static analysis to a computational simulation of medication adherence, using the Quasi-Hyperbolic Discounting model to capture the common human tendency of 'present bias'. By writing a program to simulate daily choices, you will gain hands-on experience with how time preferences influence health behaviors and how simple interventions like electronic reminders can effectively counter procrastination. ",
            "id": "4361491",
            "problem": "A health system is assessing the effect of daily electronic reminders on medication adherence using a model from behavioral economics. Assume the patient’s daily decision to take a dose is governed by Quasi-Hyperbolic Discounting (QHD), where present-biased preferences are represented by the parameters $\\hat{\\beta}$ and $\\hat{\\delta}$. Let $\\hat{\\beta} = 0.7$ and $\\hat{\\delta} = 0.99$. The decision rule is as follows: on each day $t$, the patient compares an immediate hassle cost $h_t$ (a non-negative random variable) to the perceived present value of health benefits from taking the dose today, where benefits of magnitude $b$ accrue once per day for $L$ days starting tomorrow. The time unit is days. Under QHD, immediate payoffs today are weighted by $1$, and any payoff from day $t+k$ with $k \\geq 1$ is weighted by $\\hat{\\beta} \\hat{\\delta}^k$. The patient adheres on day $t$ if and only if the perceived present value of the future benefit stream from today’s dose is at least as large as $h_t$. Electronic reminders are modeled as a reduction of the immediate hassle cost by a multiplicative factor of $1 - 0.20$ (that is, the hassle cost with reminders is $0.80 h_t$). The goal is to simulate daily adherence trajectories over $T$ days both with reminders and without reminders and report the change in adherence, defined as the difference in the fraction of days adhered with reminders versus without reminders over the $T$-day horizon.\n\nFundamental base assumptions:\n- Quasi-Hyperbolic Discounting (QHD): the weight applied to a payoff realized $k$ days in the future ($k \\geq 1$) is $\\hat{\\beta} \\hat{\\delta}^k$, and the weight applied to immediate payoffs is $1$.\n- Daily benefit from a taken dose is constant at $b$ and accrues for $L$ consecutive days starting on the next day.\n- Immediate hassle cost $h_t$ is random and independently distributed across days as a Normal random variable with mean $\\mu_h$ and standard deviation $\\sigma_h$, truncated below at $0$ (i.e., negative samples are set to $0$ by clipping).\n- The adherence decision on day $t$ is: adhere if the QHD-weighted present value of the future benefit stream from today’s dose is greater than or equal to the realized immediate hassle cost $h_t$ for the no-reminder case, and greater than or equal to $0.80 h_t$ for the reminder case.\n\nYour task is to write a complete, runnable program that:\n1. Computes the QHD-weighted present value of the $L$-day future benefit stream generated by taking the dose today, given $b$, $\\hat{\\beta}$, and $\\hat{\\delta}$.\n2. Simulates $T$ daily hassle costs $h_t$ according to the specified distribution for each test case and constructs two adherence trajectories: one without reminders (threshold $h_t$) and one with reminders (threshold $0.80 h_t$). Each day’s decision is independent and based on comparing the same perceived benefit present value to the day’s threshold.\n3. Reports, for each test case, the change in adherence over $T$ days, defined as the fraction of days adhered with reminders minus the fraction of days adhered without reminders. Express this change as a decimal (not using the percentage sign), rounded to four decimal places.\n\nScientific realism and units:\n- Time is measured in days. The simulation horizon $T$ specifies the number of days.\n- The adherence rate over $T$ days is a unitless fraction in $[0,1]$. Report changes as decimals rounded to four decimal places.\n- Benefits $b$ and hassle costs $h_t$ are in consistent utility units.\n\nTest suite:\nUse the following parameter sets, where all mathematical entities and numbers are specified:\n- Case $1$: $b = 0.002$, $\\mu_h = 0.020$, $\\sigma_h = 0.005$, $L = 14$, $T = 30$, $\\text{seed} = 101$.\n- Case $2$ (boundary case with one-day benefit): $b = 0.020$, $\\mu_h = 0.014$, $\\sigma_h = 0.002$, $L = 1$, $T = 30$, $\\text{seed} = 202$.\n- Case $3$ (low benefit, higher cost): $b = 0.001$, $\\mu_h = 0.030$, $\\sigma_h = 0.008$, $L = 30$, $T = 30$, $\\text{seed} = 303$.\n- Case $4$ (higher variability near threshold): $b = 0.0025$, $\\mu_h = 0.020$, $\\sigma_h = 0.010$, $L = 10$, $T = 30$, $\\text{seed} = 404$.\n\nFinal output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[r_1,r_2,r_3,r_4]$), where $r_i$ is the adherence change for case $i$, expressed as a decimal and rounded to four decimal places. No other text should be printed. No user input is required; the program must be self-contained and use the specified parameter values only.",
            "solution": "The problem statement is assessed to be valid. It is scientifically grounded in the established behavioral economics model of Quasi-Hyperbolic Discounting, is well-posed with all necessary parameters and conditions provided, and is expressed in clear, objective language. There are no internal contradictions, ambiguities, or factual inaccuracies. The task is a well-defined computational simulation based on formal principles.\n\nThe solution proceeds in four stages:\n1.  Derivation of the perceived present value of the medication's future benefits.\n2.  Simulation of the daily random hassle costs.\n3.  Application of the daily adherence decision rules for both scenarios (with and without reminders).\n4.  Calculation of the change in adherence rate over the simulation horizon.\n\n**1. Perceived Present Value of Benefits**\n\nAccording to the Quasi-Hyperbolic Discounting (QHD) model, a future payoff received $k$ days from the present ($t$) is discounted by a factor of $\\hat{\\beta} \\hat{\\delta}^k$, for $k \\ge 1$. An immediate payoff at day $t$ is undiscounted (weighted by $1$).\n\nIn this problem, taking a dose on day $t$ generates a stream of benefits, each of magnitude $b$, for $L$ consecutive days, starting from day $t+1$ and ending on day $t+L$. From the perspective of day $t$, the perceived present value of this entire stream of future benefits, denoted as $V$, is the sum of the discounted values of each daily benefit.\n\n$$ V = \\sum_{k=1}^{L} \\hat{\\beta} \\hat{\\delta}^k b $$\n\nWe can factor out the constant terms $b$ and $\\hat{\\beta}$:\n\n$$ V = b \\hat{\\beta} \\sum_{k=1}^{L} \\hat{\\delta}^k $$\n\nThe summation term is a finite geometric series: $\\sum_{k=1}^{L} \\hat{\\delta}^k = \\hat{\\delta}^1 + \\hat{\\delta}^2 + \\dots + \\hat{\\delta}^L$. The sum of a geometric series with first term $a$, common ratio $r$, and $n$ terms is given by $a(1-r^n)/(1-r)$. In our case, the first term is $a = \\hat{\\delta}$, the common ratio is $r = \\hat{\\delta}$, and the number of terms is $n = L$. Therefore, the sum is:\n\n$$ \\sum_{k=1}^{L} \\hat{\\delta}^k = \\hat{\\delta} \\frac{1 - \\hat{\\delta}^L}{1 - \\hat{\\delta}} $$\n\nSubstituting this back into the expression for $V$, we obtain the closed-form formula for the perceived present value of benefits, which is constant for each test case:\n\n$$ V = b \\hat{\\beta} \\hat{\\delta} \\frac{1 - \\hat{\\delta}^L}{1 - \\hat{\\delta}} $$\n\nThe QHD parameters are given as $\\hat{\\beta} = 0.7$ and $\\hat{\\delta} = 0.99$.\n\n**2. Simulation of Daily Hassle Costs**\n\nThe immediate hassle cost on day $t$, denoted $h_t$, is a random variable. For each day in the simulation horizon of $T$ days, we must generate a value for $h_t$. The problem specifies that these costs are independently distributed according to a Normal distribution with mean $\\mu_h$ and standard deviation $\\sigma_h$, which is then truncated at $0$. This means any generated sample less than $0$ is set to $0$.\n\nFor each test case, we will generate a vector of $T$ such random samples using a pseudo-random number generator initialized with the specified seed to ensure reproducibility.\n\n**3. Application of Adherence Rules**\n\nOn each day $t$ from $1$ to $T$, the patient decides whether to adhere to the medication schedule by comparing the perceived present value of benefits, $V$, to the immediate hassle cost, $h_t$.\n\n*   **Without Reminders**: The patient adheres if the benefit is at least as large as the cost.\n    $$ \\text{Adherence}_{\\text{no\\_rem}, t} \\iff V \\ge h_t $$\n\n*   **With Reminders**: Electronic reminders reduce the perceived hassle cost by a factor of $1 - 0.20 = 0.80$. The adherence condition becomes:\n    $$ \\text{Adherence}_{\\text{rem}, t} \\iff V \\ge 0.80 h_t $$\n\nFor each test case, we will generate two boolean adherence trajectories of length $T$, one for each scenario.\n\n**4. Computation of the Change in Adherence**\n\nThe adherence rate for a given scenario is the fraction of days over the $T$-day horizon on which the patient adhered.\nLet $N_{\\text{no\\_rem}}$ be the total number of days adhered without reminders, and $N_{\\text{rem}}$ be the total number of days adhered with reminders. The respective adherence rates are:\n\n$$ R_{\\text{no\\_rem}} = \\frac{N_{\\text{no\\_rem}}}{T} $$\n$$ R_{\\text{rem}} = \\frac{N_{\\text{rem}}}{T} $$\n\nThe desired output is the change in adherence, $\\Delta R$, defined as the difference between these two rates:\n\n$$ \\Delta R = R_{\\text{rem}} - R_{\\text{no\\_rem}} $$\n\nThis value is computed for each test case and rounded to four decimal places. The implementation will use `NumPy` for efficient vectorized computation of the hassle costs, adherence decisions, and rates.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Simulates medication adherence based on a Quasi-Hyperbolic Discounting model\n    and calculates the change in adherence due to electronic reminders.\n    \"\"\"\n    \n    # QHD parameters constant across all test cases\n    BETA_HAT = 0.7\n    DELTA_HAT = 0.99\n    REMINDER_EFFECT = 0.80\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        # (b, mu_h, sigma_h, L, T, seed)\n        (0.002, 0.020, 0.005, 14, 30, 101),\n        (0.020, 0.014, 0.002, 1, 30, 202),\n        (0.001, 0.030, 0.008, 30, 30, 303),\n        (0.0025, 0.020, 0.010, 10, 30, 404),\n    ]\n\n    results = []\n    \n    for case in test_cases:\n        b, mu_h, sigma_h, L, T, seed = case\n        \n        # Step 1: Compute the QHD-weighted present value of the future benefit stream.\n        # This is the sum of a finite geometric series: b * beta_hat * sum_{k=1 to L} (delta_hat^k)\n        if DELTA_HAT == 1.0:\n            # Special case for geometric series if delta_hat were 1\n            sum_geom_series = float(L)\n        else:\n            sum_geom_series = DELTA_HAT * (1 - DELTA_HAT**L) / (1 - DELTA_HAT)\n        \n        present_value_benefits = b * BETA_HAT * sum_geom_series\n\n        # Step 2: Simulate T daily hassle costs h_t.\n        # Initialize the random number generator for reproducibility.\n        rng = np.random.default_rng(seed)\n        \n        # Generate T samples from a Normal distribution.\n        hassle_costs = rng.normal(loc=mu_h, scale=sigma_h, size=T)\n        \n        # Truncate at 0 (negative costs are not possible).\n        hassle_costs = np.clip(hassle_costs, 0, None)\n\n        # Step 3: Construct two adherence trajectories.\n        # Without reminders: adhere if benefits = h_t\n        adherence_no_reminder = (present_value_benefits = hassle_costs)\n        \n        # With reminders: adhere if benefits = 0.80 * h_t\n        adherence_with_reminder = (present_value_benefits = REMINDER_EFFECT * hassle_costs)\n\n        # Step 4: Report the change in adherence.\n        # Adherence rate is the mean of the boolean array (True=1, False=0).\n        rate_no_reminder = np.mean(adherence_no_reminder)\n        rate_with_reminder = np.mean(adherence_with_reminder)\n        \n        # Change is the difference in rates.\n        adherence_change = rate_with_reminder - rate_no_reminder\n        \n        # Round to four decimal places as required.\n        rounded_result = round(adherence_change, 4)\n        results.append(rounded_result)\n\n    # Final print statement in the exact required format.\n    # The output format must be a comma-separated list in brackets,\n    # with no spaces between items.\n    results_str = [f\"{r:.4f}\" for r in results]\n    print(f\"[{','.join(results_str)}]\")\n\nsolve()\n```"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "环境流行病学中的剂量-反应函数是量化气候变化对健康影响的基石。本练习将通过一个具体场景，让您应用一个常见的暴露-反应模型，将一个特定的气候压力（高温日）转化为可量化的健康风险（预期入院率的增加），这是进行任何气候健康影响评估的基础步骤。",
            "id": "4399440",
            "problem": "某区域卫生系统正在规划应对气候变化下高温相关入院病例的激增容量。经验流行病学证据通常使用相对风险 (RR) 来模拟暴露-反应关系，其中相对风险 (RR) 定义为某一暴露水平下的发病率与参考（基线）水平下的发病率之比。考虑以摄氏度为单位的日平均温度 $T$，并假设参考温度为 $30^{\\circ}\\mathrm{C}$。对于高于此参考温度的情况，高温相关入院的剂量-反应函数模型为\n$$\nRR(T) = \\exp\\big(\\beta\\,(T - 30)\\big),\n$$\n其中 $\\beta$ 是一个从时间序列研究的荟萃分析中得出的常数。设 $\\beta = 0.04$，并考虑某一天温度为 $T = 36^{\\circ}\\mathrm{C}$ 的情况。\n\n仅使用相对风险的核心定义及其作为发病率乘法变化的解释，确定相对于 $30^{\\circ}\\mathrm{C}$ 基线，高温相关入院病例的预期比例增量。将该增量表示为小数（例如，对于 $25\\%$ 的增长，写作 $0.25$），并将最终答案四舍五入到三位有效数字。最终答案不需要单位。",
            "solution": "经评估，该问题陈述有效。它在科学上基于流行病学原理，问题设定良好并提供了所有必要数据，语言客观。相对风险的模型在环境健康研究中是标准的，所提供的参数也是合理的。该问题是给定定义和模型的直接且可形式化的应用。\n\n目标是确定在给定温度下，相对于基线温度，高温相关入院病例的预期比例增量。设 $I(T)$ 表示在日平均温度 $T$ 下高温相关入院的发病率。参考（基线）温度给定为 $T_{ref} = 30^{\\circ}\\mathrm{C}$，相应的基线发病率为 $I(T_{ref}) = I(30)$。\n\n问题将相对风险 $RR(T)$ 定义为在暴露水平 $T$ 下的发病率与在参考水平 $T_{ref}$ 下的发病率之比。在数学上，这表示为：\n$$\nRR(T) = \\frac{I(T)}{I(T_{ref})}\n$$\n\n在温度 $T$ 下相对于基线 $T_{ref}$ 的入院比例增量是发病率的变化量 $I(T) - I(T_{ref})$ 除以基线发病率 $I(T_{ref})$。设此比例增量用 $P$ 表示。\n$$\nP = \\frac{I(T) - I(T_{ref})}{I(T_{ref})}\n$$\n\n该表达式可以通过分离各项来简化：\n$$\nP = \\frac{I(T)}{I(T_{ref})} - \\frac{I(T_{ref})}{I(T_{ref})}\n$$\n代入相对风险的定义，我们建立了比例增量和相对风险之间的直接关系：\n$$\nP = RR(T) - 1\n$$\n\n问题提供了一个当温度 $T$ 高于参考温度 $30^{\\circ}\\mathrm{C}$ 时相对风险的具体模型：\n$$\nRR(T) = \\exp\\big(\\beta(T - 30)\\big)\n$$\n我们已知常数 $\\beta = 0.04$，并被要求评估温度为 $T = 36^{\\circ}\\mathrm{C}$ 的一天的情况。\n\n首先，我们使用给定的模型和参数计算相对风险 $RR(36)$。\n$$\nRR(36) = \\exp\\big(0.04 \\times (36 - 30)\\big)\n$$\n温度差为 $36 - 30 = 6$。\n$$\nRR(36) = \\exp(0.04 \\times 6) = \\exp(0.24)\n$$\n\n现在，我们可以使用关系式 $P = RR(T) - 1$ 来计算比例增量 $P$。\n$$\nP = \\exp(0.24) - 1\n$$\n\n为了得到最终的数值答案，我们计算这个表达式的值。\n$$\n\\exp(0.24) \\approx 1.27124915\n$$\n因此，比例增量为：\n$$\nP \\approx 1.27124915 - 1 = 0.27124915\n$$\n\n问题要求答案四舍五入到三位有效数字。第一个有效数字是第一个非零数字，即 $2$。接下来的两位有效数字是 $7$ 和 $1$。第三位有效数字后面的数字是 $2$。由于 $2  5$，我们不对最后一位有效数字进行进位。\n$$\nP \\approx 0.271\n$$\n这个值表示，与 $30^{\\circ}\\mathrm{C}$ 的日子相比，在 $36^{\\circ}\\mathrm{C}$ 的日子里，高温相关入院病例有 $27.1\\%$ 的比例增量。",
            "answer": "$$\\boxed{0.271}$$"
        },
        {
            "introduction": "流行病学风险最终会转化为医疗系统所面临的实际运作压力。本练习将通过排队论这一强大工具，模拟热浪期间急诊部门因病人涌入而产生的拥堵情况。通过计算如预期等待时间这样的关键指标，您可以学习如何量化气候事件对医疗服务的冲击，并为规划应急能力提供科学依据。",
            "id": "4399418",
            "problem": "某区域急诊科 (ED) 经历持续热浪，导致与高温相关的疾病就诊人数增加。在此事件期间，患者到达过程可很好地近似为速率为 $\\lambda = 0.9$ 患者/分钟的泊松过程，服务时间保持为速率为 $\\mu = 1$ /分钟的指数分布，由一名临床医生负责分诊和启动治疗。将该急诊科的分诊和启动治疗站建模为单服务器马尔可夫/马尔可夫/单服务器 ($M/M/1$) 排队模型。\n\n仅使用适用于排队过程的第一性原理和流系统中的守恒关系，推导队列中的稳态期望等待时间 $W_{q}$，并确定系统在热浪条件下是否稳定。报告两个量：\n1. 队列中的期望等待时间 $W_{q}$（单位：分钟），四舍五入到四位有效数字。\n2. 利用率 $\\rho$（无量纲），四舍五入到三位有效数字。\n\n以行矩阵的形式提供最终数值输出，其中第一个条目是 $W_{q}$，第二个条目是 $\\rho$。$W_{q}$ 以分钟为单位表示。",
            "solution": "该问题要求分析一个单服务器排队系统，该系统被建模为 $M/M/1$ 排队，代表热浪条件下的急诊科 (ED) 分诊站。我们的任务是从第一性原理和守恒定律出发，推导队列中的稳态期望等待时间 $W_q$ 和系统的利用率 $\\rho$。\n\n系统定义如下：\n- 到达过程为泊松过程，速率为 $\\lambda = 0.9$ 患者/分钟。\n- 服务过程为指数过程，速率为 $\\mu = 1$ 患者/分钟。\n- 单个服务器， $s=1$。\n\n系统状态 $n$ 是系统中的患者总数（如果有人正在被服务，则包括该患者，其余在队列中）。由于到达是泊松过程，服务时间是指数分布，该系统可以建模为在非负整数状态空间 $\\{0, 1, 2, \\dots\\}$ 上的连续时间马尔可夫链。\n\n转移速率为：\n- 从状态 $n$ 到 $n+1$：到达速率 $\\lambda$，对所有 $n \\ge 0$。\n- 从状态 $n$ 到 $n-1$：服务速率 $\\mu$，对所有 $n \\ge 1$。\n\n在稳态下，流入任何状态 $n$ 的速率必须等于流出该状态的速率。这给了我们一组平衡方程。设 $P_n$ 为处于状态 $n$ 的稳态概率。\n\n对于状态 $n=0$（系统为空）：\n离开状态 $0$ 的唯一方式是发生一次到达（速率为 $\\lambda$）。进入状态 $0$ 的唯一方式是从状态 $1$ 完成一次服务（速率为 $\\mu$）。\n$$\n\\lambda P_0 = \\mu P_1\n$$\n\n对于任何状态 $n \\ge 1$：\n系统通过一次到达（速率为 $\\lambda$）或一次服务完成（速率为 $\\mu$）离开状态 $n$。系统通过从状态 $n-1$ 发生一次到达（速率为 $\\lambda$）或从状态 $n+1$ 完成一次服务（速率为 $\\mu$）进入状态 $n$。\n$$\n(\\lambda + \\mu) P_n = \\lambda P_{n-1} + \\mu P_{n+1}\n$$\n\n我们可以迭代求解这个线性方程组。\n从状态 $0$ 的方程可知：\n$$\nP_1 = \\frac{\\lambda}{\\mu} P_0\n$$\n我们定义流量强度或利用率为 $\\rho = \\frac{\\lambda}{\\mu}$。因此，$P_1 = \\rho P_0$。\n\n现在，我们来看 $n=1$ 的平衡方程：\n$$\n(\\lambda + \\mu) P_1 = \\lambda P_0 + \\mu P_2\n$$\n代入 $P_1 = \\frac{\\lambda}{\\mu} P_0$：\n$$\n(\\lambda + \\mu) \\frac{\\lambda}{\\mu} P_0 = \\lambda P_0 + \\mu P_2\n$$\n$$\n\\frac{\\lambda^2}{\\mu} P_0 + \\lambda P_0 = \\lambda P_0 + \\mu P_2\n$$\n$$\n\\frac{\\lambda^2}{\\mu} P_0 = \\mu P_2 \\implies P_2 = \\frac{\\lambda^2}{\\mu^2} P_0 = \\rho^2 P_0\n$$\n通过归纳法，我们可以证明通解为：\n$$\nP_n = \\rho^n P_0 \\quad \\text{for } n \\ge 0\n$$\n\n为了使这些概率有效，它们的总和必须为 $1$。这要求无穷几何级数收敛。\n$$\n\\sum_{n=0}^{\\infty} P_n = \\sum_{n=0}^{\\infty} \\rho^n P_0 = P_0 \\sum_{n=0}^{\\infty} \\rho^n = 1\n$$\n级数 $\\sum_{n=0}^{\\infty} \\rho^n$ 收敛当且仅当 $|\\rho|  1$。由于 $\\lambda$ 和 $\\mu$ 是正速率，此条件为 $\\rho  1$，即 $\\lambda  \\mu$。这是排队系统的稳定性条件。如果此条件成立，则系统是稳定的，并且存在稳态分布。\n\n给定 $\\lambda = 0.9$ 和 $\\mu = 1$，我们计算 $\\rho = \\frac{0.9}{1} = 0.9$。由于 $0.9  1$，系统是稳定的。\n\n在满足稳定性条件的情况下，我们可以求出 $P_0$：\n$$\nP_0 \\left( \\frac{1}{1-\\rho} \\right) = 1 \\implies P_0 = 1 - \\rho\n$$\n因此，稳态概率分布为：\n$$\nP_n = (1-\\rho) \\rho^n \\quad \\text{for } n \\ge 0\n$$\n这是一个几何分布。\n\n第一个要报告的量是利用率 $\\rho$。\n$$\n\\rho = \\frac{\\lambda}{\\mu} = \\frac{0.9}{1} = 0.9\n$$\n四舍五入到三位有效数字，$\\rho = 0.900$。\n\n接下来，我们推导队列中的期望等待时间 $W_q$。我们首先求出队列中的期望患者数 $L_q$，然后应用流系统中的一个基本守恒关系——利特尔定律 (Little's Law)。\n\n系统中的患者总数为 $n$。如果 $n=0$ 或 $n=1$，队列中的患者数为 $0$；如果 $n>1$，队列中的患者数为 $n-1$。\n队列中的期望患者数 $L_q$ 由下式给出：\n$$\nL_q = \\sum_{n=1}^{\\infty} (n-1) P_n = \\sum_{n=1}^{\\infty} n P_n - \\sum_{n=1}^{\\infty} P_n\n$$\n第一项 $\\sum_{n=1}^{\\infty} n P_n$ 是整个系统中的期望患者数 $L$。注意，由于 $n=0$ 项为零，所以 $\\sum_{n=0}^{\\infty} n P_n = \\sum_{n=1}^{\\infty} n P_n$。\n$$\nL = E[n] = \\sum_{n=0}^{\\infty} n (1-\\rho)\\rho^n = (1-\\rho) \\sum_{n=0}^{\\infty} n \\rho^n\n$$\n该和是一个几何随机变量（从 $0$ 开始）的期望值，即 $\\frac{\\rho}{(1-\\rho)^2}$。\n$$\nL = (1-\\rho) \\left( \\frac{\\rho}{(1-\\rho)^2} \\right) = \\frac{\\rho}{1-\\rho}\n$$\n第二项 $\\sum_{n=1}^{\\infty} P_n$ 是服务器繁忙的概率。\n$$\n\\sum_{n=1}^{\\infty} P_n = 1 - P_0 = 1 - (1-\\rho) = \\rho\n$$\n这在直观上是合理的，因为服务器繁忙的概率就是利用率 $\\rho$。\n将这些结合起来，我们得到 $L_q$：\n$$\nL_q = L - \\rho = \\frac{\\rho}{1-\\rho} - \\rho = \\frac{\\rho - \\rho(1-\\rho)}{1-\\rho} = \\frac{\\rho - \\rho + \\rho^2}{1-\\rho} = \\frac{\\rho^2}{1-\\rho}\n$$\n现在我们应用利特尔定律 (Little's Law)，该定律指出，对于处于稳态的稳定系统，队列中的平均顾客数 $L_q$ 等于平均到达率 $\\lambda$ 乘以顾客在队列中花费的平均时间 $W_q$。\n$$\nL_q = \\lambda W_q\n$$\n求解 $W_q$ 并代入我们对 $L_q$ 的表达式：\n$$\nW_q = \\frac{L_q}{\\lambda} = \\frac{1}{\\lambda} \\left( \\frac{\\rho^2}{1-\\rho} \\right)\n$$\n代入 $\\rho = \\lambda / \\mu$：\n$$\nW_q = \\frac{1}{\\lambda} \\left( \\frac{(\\lambda/\\mu)^2}{1 - \\lambda/\\mu} \\right) = \\frac{1}{\\lambda} \\left( \\frac{\\lambda^2/\\mu^2}{(\\mu-\\lambda)/\\mu} \\right) = \\frac{1}{\\lambda} \\frac{\\lambda^2}{\\mu^2} \\frac{\\mu}{\\mu-\\lambda} = \\frac{\\lambda}{\\mu(\\mu-\\lambda)}\n$$\n现在，我们可以代入数值：\n$\\lambda = 0.9$ 患者/分钟。\n$\\mu = 1$ 患者/分钟。\n$\\rho = 0.9$（无量纲）。\n\n队列中的期望等待时间是：\n$$\nW_q = \\frac{\\lambda}{\\mu(\\mu-\\lambda)} = \\frac{0.9}{1(1-0.9)} = \\frac{0.9}{1(0.1)} = \\frac{0.9}{0.1} = 9 \\text{ 分钟}\n$$\n问题要求 $W_q$ 四舍五入到四位有效数字，即 $9.000$ 分钟。\n问题要求 $\\rho$ 四舍五入到三位有效数字，即 $0.900$。\n\n需要报告的两个量是 $W_q = 9.000$ 分钟和 $\\rho = 0.900$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 9.000  0.900 \\end{pmatrix}}\n$$"
        },
        {
            "introduction": "除了应对病人潮，医疗设施自身的韧性也至关重要。在热浪等极端天气事件中，维持安全的室内环境是保护患者的底线，尤其是在电力中断或空调系统（HVAC）故障时。本练习将指导您使用一个基础热力学模型，通过编程模拟来预测医院病房的室内温度动态，从而评估患者面临的风险以及建筑基础设施的适应能力。",
            "id": "4399447",
            "problem": "一个医院病房被近似为一个单一、完美混合的热区。从能量守恒和热力学第一定律出发，建立并求解在持续热浪下的室内空气温度动态模型。明确假设一个具有热容的充分混合区域空气节点、一个到室外的集总热导，以及一个恒定的净内部热流。在此基础上，推导室内空气温度的主控一阶线性常微分方程，并在室外条件和内部热流恒定的情况下求解该方程。然后，通过算法实现推导出的解，以评估指定测试组的患者安全暴露指标。\n\n使用的基本假设和定义：\n- 区域空气节点的能量守恒：储存热能的变化率等于净热流入。\n- 设室内温度用 $T_{in}(t)$ 表示（单位：摄氏度），室外温度用 $T_{out}$ 表示（单位：摄氏度，恒定），区域热容用 $C$ 表示（单位：焦耳/开尔文），总失热系数（热导）用 $UA$ 表示（单位：瓦特/开尔文），净内部热流用 $Q_{int}$ 表示（单位：瓦特，净加热为正，净制冷为负，如部分供暖、通风和空调（HVAC）的排热）。\n- 在时间 $t=0$ 时的初始室内温度为 $T_{in}(0)=T_0$。\n- 模拟时域为 $H$ 小时，并使用固定的时间步长 $dt$ 秒。\n- 患者安全阈值由一个安全阈值 $T_{safe}$（单位：摄氏度）和一个临界阈值 $T_{crit}$（单位：摄氏度）给出。超标严格定义为 $T_{in}(t)  T_{threshold}$（即，等于阈值不计为超标）。\n\n需要实现的任务：\n1. 使用能量守恒原理，推导在 $T_{out}$ 和 $Q_{int}$ 恒定条件下关于 $T_{in}(t)$ 的线性常微分方程及其解。您的实现可以使用闭式解，也可以使用从闭式解推导出的、在每个时间步长 $dt$ 上的精确离散时间更新。\n2. 对每个测试用例，使用恒定的参数 $C$、$UA$、$Q_{int}$、$T_{out}$ 和 $T_0$，在时域 $[0,H]$ 上模拟 $T_{in}(t)$。\n3. 对每个测试用例，计算：\n   - 时域内的最高室内温度 $T_{max}$，以摄氏度表示并四舍五入到三位小数。\n   - 在 $[0,H]$ 时间段内，$T_{in}(t)  T_{safe}$ 的时间所占的比例，以小数形式表示并四舍五入到三位小数。\n   - 在 $[0,H]$ 时间段内，$T_{in}(t)  T_{crit}$ 的最大连续持续时间，以小时表示并四舍五入到三位小数。\n\n物理单位和数值规范：\n- 温度单位为摄氏度，热容单位为焦耳/开尔文，热导单位为瓦特/开尔文，功率单位为瓦特，时间单位按规定为秒或小时。所有输出必须使用上述单位。\n- 时间步长为 $dt$ 秒，时域为 $H$ 小时；确保单位换算的一致性。\n\n测试组（每个测试用例指定为一个有序元组 $(C,UA,Q_{int},T_{out},T_0,H,dt,T_{safe},T_{crit})$）：\n- 用例 A（严重热浪，无主动制冷）：$(3.0\\times 10^{7},\\,3000,\\,10000,\\,38,\\,24,\\,12,\\,60,\\,26,\\,32)$。\n- 用例 B（严重热浪，部分制冷排热）：$(8.0\\times 10^{7},\\,3000,\\,-8000,\\,38,\\,24,\\,12,\\,60,\\,26,\\,32)$。\n- 用例 C（临界情况，等于安全阈值）：$(3.0\\times 10^{7},\\,3000,\\,0,\\,26,\\,26,\\,6,\\,60,\\,26,\\,32)$。\n\n最终输出格式：\n- 您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。每个测试用例的结果本身必须是包含三个浮点数的列表，顺序为 $[T_{max},\\,\\text{fraction\\_above\\_}T_{safe},\\,\\text{max\\_contiguous\\_hours\\_above\\_}T_{crit}]$，每个值都四舍五入到三位小数。例如，总体结构必须是 $[[x_1,y_1,z_1],[x_2,y_2,z_2],[x_3,y_3,z_3]]$。",
            "solution": "## 问题验证\n\n### 第1步：提取已知条件\n- **主控原理**：一个完美混合热区空气节点的能量守恒。$\\frac{d(\\text{储存能量})}{dt} = \\text{净热流入}$。\n- **变量与常量**：\n    - 室内空气温度：$T_{in}(t)$ [°C]\n    - 室外空气温度（恒定）：$T_{out}$ [°C]\n    - 区域热容：$C$ [J/K]\n    - 总失热系数（热导）：$UA$ [W/K]\n    - 净内部热流（恒定）：$Q_{int}$ [W]\n- **初始条件**：$T_{in}(0) = T_0$ [°C]\n- **模拟参数**：\n    - 模拟时域：$H$ [小时]\n    - 时间步长：$dt$ [秒]\n- **安全阈值**：\n    - 安全阈值：$T_{safe}$ [°C]\n    - 临界阈值：$T_{crit}$ [°C]\n    - 超标条件：$T_{in}(t)  T_{threshold}$\n- **任务**：\n    1. 推导关于 $T_{in}(t)$ 的主控一阶线性常微分方程（ODE）及其解。\n    2. 对每个测试用例，在时域 $[0,H]$ 上模拟 $T_{in}(t)$。\n    3. 为每个用例计算三个指标：\n        - 最高室内温度 $T_{max}$ [°C]，四舍五入到三位小数。\n        - 在 $[0,H]$ 时间段内，$T_{in}(t)  T_{safe}$ 的时间比例，以小数表示并四舍五入到三位小数。\n        - 在 $[0,H]$ 时间段内，$T_{in}(t)  T_{crit}$ 的最大连续持续时间，以小时为单位，四舍五入到三位小数。\n- **测试组**：\n    - 用例 A：$(C,UA,Q_{int},T_{out},T_0,H,dt,T_{safe},T_{crit}) = (3.0\\times 10^{7},\\,3000,\\,10000,\\,38,\\,24,\\,12,\\,60,\\,26,\\,32)$\n    - 用例 B：$(C,UA,Q_{int},T_{out},T_0,H,dt,T_{safe},T_{crit}) = (8.0\\times 10^{7},\\,3000,\\,-8000,\\,38,\\,24,\\,12,\\,60,\\,26,\\,32)$\n    - 用例 C：$(C,UA,Q_{int},T_{out},T_0,H,dt,T_{safe},T_{crit}) = (3.0\\times 10^{7},\\,3000,\\,0,\\,26,\\,26,\\,6,\\,60,\\,26,\\,32)$\n\n### 第2步：使用提取的已知条件进行验证\n- **科学依据**：该问题基于热力学第一定律和能量守恒原理，应用于建筑区域的标准且广泛使用的集总参数热模型。这是传热学和建筑物理学中的一个基本概念。该问题在科学上是合理的。\n- **适定性**：该问题是求解一个具有指定初始条件的一阶线性常微分方程。这是一个经典的初值问题，是适定的，意味着对于给定的参数存在唯一且稳定的解。所有必要的参数都已提供。\n- **客观性**：问题以精确、定量且无偏见的语言陈述。所有术语都已明确定义，目标是可衡量的。\n- **完整性和一致性**：每个测试用例都提供了所有需要的数据（$C, UA, Q_{int}, T_{out}, T_0, H, dt, T_{safe}, T_{crit}$）。物理单位已指定且一致。空气节点中储存能量的变化率 $C \\frac{dT_{in}}{dt}$ 的单位是 $(J/K) \\cdot (K/s) = J/s = W$。热流项 $UA(T_{out}-T_{in})$ 和 $Q_{int}$ 的单位也是瓦特。整个设置在量纲上是一致的。注意，对于温差，摄氏度的 $\\Delta T$ 与开尔文的 $\\Delta T$ 是相同的，因此在温度中使用摄氏度，而在 $C$ 和 $UA$ 的单位定义中使用开尔文是正确的。\n- **无其他缺陷**：该问题并非不切实际、不适定、微不足道或无法验证。这是一个工程学中标准且实际的问题。\n\n### 第3步：结论与行动\n该问题是**有效的**。将提供一个解。\n\n---\n## 解的推导与算法\n\n### 1. 主控微分方程的推导\n该问题由医院病房内空气的能量守恒原理主导，该空气被视为一个单一的、充分混合的热节点。储存在空气中的热能变化率必须等于净热“流入”率。\n\n储存的热能 $E_{stored}$ 由 $E_{stored} = C T_{in}(t)$ 给出。该能量的变化率为：\n$$\n\\frac{dE_{stored}}{dt} = C \\frac{dT_{in}}{dt}\n$$\n净热流入是来自内部源的热量 $Q_{int}$ 与来自室外的热传递之和。从室外进入区域的热传递由温差 $T_{out} - T_{in}$ 驱动，通过热导 $UA$ 进行：\n$$\nQ_{transfer} = UA (T_{out} - T_{in})\n$$\n应用能量守恒原理：\n$$\n\\text{储存能量的变化率} = \\text{净热流入}\n$$\n$$\nC \\frac{dT_{in}}{dt} = Q_{int} + UA (T_{out} - T_{in})\n$$\n这是一阶常微分主控方程。为便于求解，我们将其重新排列为标准线性形式 $\\frac{dy}{dt} + p(t)y = q(t)$：\n$$\nC \\frac{dT_{in}}{dt} + UA \\cdot T_{in} = Q_{int} + UA \\cdot T_{out}\n$$\n$$\n\\frac{dT_{in}}{dt} + \\left(\\frac{UA}{C}\\right) T_{in} = \\frac{Q_{int} + UA \\cdot T_{out}}{C}\n$$\n\n### 2. 常微分方程的解析解\n这是一个具有常系数的一阶线性常微分方程。我们可以定义一个热时间常数 $\\tau = \\frac{C}{UA}$ 和一个稳态室内温度 $T_{in,ss}$。稳态温度是当 $t \\to \\infty$ 时达到的温度，此时 $\\frac{dT_{in}}{dt} = 0$：\n$$\n\\left(\\frac{UA}{C}\\right) T_{in,ss} = \\frac{Q_{int} + UA \\cdot T_{out}}{C} \\implies T_{in,ss} = \\frac{Q_{int}}{UA} + T_{out}\n$$\n该常微分方程可以写成 $\\frac{dT_{in}}{dt} = -\\frac{1}{\\tau} (T_{in} - T_{in,ss})$。该方程的通解是：\n$$\nT_{in}(t) = T_{in,ss} + A e^{-t/\\tau}\n$$\n其中 $A$ 是由初始条件 $T_{in}(0) = T_0$ 决定的积分常数：\n$$\nT_{in}(0) = T_0 = T_{in,ss} + A e^0 \\implies A = T_0 - T_{in,ss}\n$$\n将 $A$ 代回通解，得到在任意时间 $t$ 的室内温度的最终解析解：\n$$\nT_{in}(t) = T_{in,ss} + (T_0 - T_{in,ss}) e^{-t/\\tau}\n$$\n$$\nT_{in}(t) = \\left(\\frac{Q_{int}}{UA} + T_{out}\\right) + \\left(T_0 - \\left(\\frac{Q_{int}}{UA} + T_{out}\\right)\\right) e^{-t \\cdot (UA/C)}\n$$\n\n### 3. 用于数值模拟的离散化\n对于一个固定时间步长 $dt$ 的模拟，使用从解析解推导出的精确离散时间更新规则在计算上是高效的。在时间 $t+dt$ 的温度可以用在时间 $t$ 的温度来表示：\n$$\nT_{in}(t+dt) = T_{in,ss} + (T_0 - T_{in,ss}) e^{-(t+dt)/\\tau} = T_{in,ss} + (T_0 - T_{in,ss}) e^{-t/\\tau} e^{-dt/\\tau}\n$$\n认识到 $T_{in}(t) - T_{in,ss} = (T_0 - T_{in,ss}) e^{-t/\\tau}$，我们可以将其代入方程：\n$$\nT_{in}(t+dt) = T_{in,ss} + (T_{in}(t) - T_{in,ss}) e^{-dt/\\tau}\n$$\n我们定义离散时间索引 $k$，使得 $t_k = k \\cdot dt$，并令 $T_k = T_{in}(t_k)$。更新规则是：\n$$\nT_{k+1} = T_{in,ss} + (T_k - T_{in,ss}) e^{-dt/\\tau}\n$$\n这可以写成 $T_{k+1} = T_k \\alpha + T_{in,ss}(1-\\alpha)$，其中常数因子 $\\alpha = e^{-dt/\\tau} = e^{-dt \\cdot UA/C}$ 是预先计算的。这个递归公式是常微分方程在离散时间步上的精确解，避免了与欧拉积分等方法相关的数值误差。\n\n### 4. 指标的算法实现\n该解将通过对每个测试用例在模拟时域上迭代离散时间更新规则来实现。\n\n1.  **初始化**：对每个测试用例，解析参数 $(C, UA, Q_{int}, T_{out}, T_0, H, dt, T_{safe}, T_{crit})$。将时域 $H$ 从小时转换为秒（$H_{sec} = H \\times 3600$），并计算模拟总步数 $N_{steps} = \\text{int}(H_{sec} / dt)$。预先计算常数 $T_{in,ss} = T_{out} + Q_{int}/UA$ 和 $\\alpha = e^{-dt \\cdot UA/C}$。将当前温度初始化为 $T_0$。\n\n2.  **模拟循环**：从 $k=0$ 迭代到 $N_{steps}-1$。在每一步中：\n    a. 使用离散规则更新温度：$T_{k+1} = T_k \\alpha + T_{in,ss}(1-\\alpha)$。\n    b. 根据新的温度 $T_{k+1}$ 更新指标计数器。\n    \n3.  **指标计算**：\n    - **$T_{max}$**：函数 $T_{in}(t)$ 是单调的。如果 $T_0  T_{in,ss}$，温度向 $T_{in,ss}$ 上升，所以 $T_{max} = T_{in}(H)$。如果 $T_0 > T_{in,ss}$，温度向 $T_{in,ss}$ 下降，所以 $T_{max} = T_0$。如果 $T_0 = T_{in,ss}$，温度是恒定的，所以 $T_{max}=T_0$。因此，$T_{max}$ 就是 $\\max(T_0, T_{in}(H))$，其中 $T_{in}(H)$ 是在最后一个模拟步骤的温度。\n    - **超过 $T_{safe}$ 的时间比例**：一个计数器 `time_above_safe` 初始化为 $0$。在循环内部，如果 $T_{k+1}  T_{safe}$，计数器增加 $dt$。循环结束后，该比例计算为 `time_above_safe / (H \\times 3600)`。\n    - **超过 $T_{crit}$ 的最大连续持续时间**：使用两个计数器：`current_contiguous_crit` 和 `max_contiguous_crit`，都初始化为 $0$。在循环内部，如果 $T_{k+1}  T_{crit}$，`current_contiguous_crit` 增加 $dt$。如果 $T_{k+1} \\le T_{crit}$，则连续时段中断；`max_contiguous_crit` 更新为 $\\max(\\text{max\\_contiguous\\_crit}, \\text{current\\_contiguous\\_crit})$，并且 `current_contiguous_crit` 重置为 $0$。循环结束后会执行最后一次检查，以考虑持续到模拟结束的连续时段。最终的秒数数值通过除以 $3600$ 转换为小时。\n\n4.  **输出格式化**：每个测试用例的三个计算指标都四舍五入到三位小数，并格式化为所需的列表的列表结构。",
            "answer": "[[41.103,0.978,10.950],[33.090,0.556,2.667],[26.000,0.000,0.000]]"
        }
    ]
}
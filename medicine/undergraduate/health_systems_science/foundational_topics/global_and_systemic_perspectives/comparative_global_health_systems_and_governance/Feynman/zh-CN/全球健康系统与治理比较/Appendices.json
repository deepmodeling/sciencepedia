{
    "hands_on_practices": [
        {
            "introduction": "全民健康覆盖（Universal Health Coverage, UHC）是全球卫生系统的核心目标。但是，我们如何衡量这样一个复杂、多维目标的进展呢？本练习介绍UHC立方体框架，它将这一宏大目标简化为三个关键维度：人口覆盖、服务覆盖和财务保护。通过计算一个简化的体积代理指标，您不仅能具体理解这些维度如何相互作用，更重要的是，您还将学会批判性地评估这类综合指标的局限性。",
            "id": "4365243",
            "problem": "某卫生部正在对实现普遍健康覆盖（UHC）的进展进行基准评估。在UHC立方体框架中，三个正交维度是人口覆盖、服务覆盖和财务风险保护，每个维度都表示为闭区间$\\left[0,1\\right]$内的一个比例。在给定年份，该部报告了以下全系统的汇总指标：享有规定福利包的参保居民人口比例为$p=0.7$；相对于循证基本服务篮子，该福利包中包含的基本服务比例为$s=0.6$；使用所含服务时的平均自付费用比例为$o=0.2$。在一个简化的假设下，即一个人同时享有权利、需要一项包含在内的基本服务并在使用时受到财务保护的联合概率，可以建模为三个相应边际比例（当每个比例都在$\\left[0,1\\right]$上表示时）的乘积。请将财务保护维度定义为$f=1-o$，并计算UHC立方体体积的代理指标$V$作为最终的联合比例。将您的数值结果四舍五入至三位有效数字，并以无单位小数形式表示。此外，用一句话说明使用$V$作为UHC的总体代理指标在概念上的一个局限性。",
            "solution": "该问题是有效的。它在卫生系统科学领域有科学依据，使用了成熟的普遍健康覆盖（UHC）立方体框架。问题提法恰当，提供了所有必要的定量数据和清晰、可形式化的计算模型。语言客观，假设明确。\n\n问题要求我们计算UHC的一个代理指标，记为体积$V$，并说明该代理指标的一个局限性。UHC立方体的三个维度分别是人口覆盖（$p$）、服务覆盖（$s$）和财务风险保护（$f$）。\n\n已知条件如下：\n- 享有健康计划覆盖的人口比例，$p = 0.7$。\n- 计划中包含的基本服务比例，$s = 0.6$。\n- 所含服务的平均自付（OOP）费用比例，$o = 0.2$。\n\n财务风险保护维度$f$被定义为自付费用比例的补集。因此，我们可以写出$f$的方程：\n$$f = 1 - o$$\n代入给定的$o$值：\n$$f = 1 - 0.2 = 0.8$$\n这个值$f=0.8$表示对于使用所覆盖服务的人群，平均有$80\\%$的财务保护水平。\n\n问题指出，UHC立方体体积的代理指标$V$可以建模为三个边际比例的乘积，这假设了维度之间是相互独立的。$V$的公式因此为：\n$$V = p \\times s \\times f$$\n代入$p$、$s$的数值以及计算出的$f$值：\n$$V = (0.7) \\times (0.6) \\times (0.8)$$\n首先，我们计算前两项的乘积：\n$$(0.7) \\times (0.6) = 0.42$$\n然后，将此结果乘以第三项：\n$$V = (0.42) \\times (0.8) = 0.336$$\n问题要求将数值结果四舍五入到三位有效数字。计算出的值$0.336$已经恰好有三位有效数字（数字$3$、$3$和$6$）。因此，无需进一步四舍五入。\n\n任务的第二部分是说明使用$V$作为UHC的总体代理指标在概念上的一个局限性。这个总体代理指标的一个关键概念局限性是，它掩盖了显著的不平等问题，因为一个高的总体积$V$可能掩盖了人口中弱势子群体在一个或所有维度上覆盖率很低甚至为零的事实。",
            "answer": "$$\\boxed{0.336}$$"
        },
        {
            "introduction": "卫生系统的资源总是有限的，这迫使决策者在资助哪些新疗法或项目上做出艰难选择。我们如何判断哪种干预措施能提供最佳的“性价比”？本练习应用卫生经济学的核心工具——成本效果分析（cost-effectiveness analysis, CEA）的基本原理。您将计算增量成本效果比（Incremental Cost-Effectiveness Ratio, ICER），以确定每获得一个单位健康收益（在此案例中为伤残调整生命年，DALY）所需付出的成本，从而掌握一种用于支持资源分配决策的循证方法。",
            "id": "4365208",
            "problem": "一个中低收入国家的卫生部正在评估一项全国性的免疫接种补种运动。在相同时间范围内与标准护理进行的直接比较中，该运动的增量项目成本为$\\$10{,}000{,}000$，并且流行病学模型估计它将挽回$8{,}000$个伤残调整生命年（DALY）。该国的卫生技术治理机构已采纳了每挽回一个DALY为$\\$1{,}000$的供给侧成本效益阈值，这反映了在当前预算限制下卫生系统的估计边际生产率。假设在评估范围内成本和效果呈线性关系，没有重大的溢出效应或重复计算，并且DALY在不同人群亚组间是一致汇总的。\n\n使用卫生系统科学中成本效益分析的基本原则——即在给定的社会决定的健康影子价格下，采纳决策应优先考虑每单位资源能产生更大健康效益的干预措施——计算增量成本效益比，并确定在规定阈值下是否应采纳该干预措施。\n\n将您的最终答案以一个行矩阵的形式报告，该矩阵包含两个条目：第一个条目是增量成本效益比（单位：美元/每挽回一个DALY），四舍五入到四位有效数字；第二个条目是采纳指标，其中$1$表示采纳，$0$表示不采纳。矩阵中不要包含单位。增量成本效益比以美元/DALY表示。",
            "solution": "首先对问题陈述进行严格的验证过程。\n\n### 第1步：提取已知条件\n以下数据和条件逐字引自问题陈述：\n-   增量项目成本: $\\$10,000,000$\n-   挽回的伤残调整生命年 (DALYs): $8,000$\n-   供给侧成本效益阈值: 每挽回一个DALY为 $\\$1,000$\n-   假设：在评估范围内成本和效果呈线性关系。\n-   假设：无重大溢出效应或重复计算。\n-   假设：DALY在不同人群亚组间是一致汇总的。\n-   任务：计算增量成本效益比。\n-   任务：确定是否应采纳该干预措施。\n-   报告要求：一个包含两个条目的行矩阵：ICER（四舍五入到四位有效数字）和采纳指标（$1$表示采纳，$0$表示不采纳）。\n\n### 第2步：使用提取的已知条件进行验证\n根据既定标准评估问题的有效性。\n\n-   **科学依据**：该问题基于成本效益分析（CEA）的既定原则，这是卫生经济学和卫生系统科学中的一门核心学科。增量成本效益比（ICER）、伤残调整生命年（DALY）和成本效益阈值等概念是评估卫生干预措施的标准、被广泛接受的工具。该情景在科学上是合理的。\n-   **提法恰当**：该问题提法恰当。它提供了所有必要的数值数据（增量成本、增量效果和阈值）和一个明确的决策规则，以得出一个唯一且有意义的解。明确陈述了简化假设（线性、无溢出），确保了问题的自洽性。\n-   **客观性**：该问题以客观、定量的术语陈述，没有主观性语言或偏见。\n-   **一致性与可行性**：所提供的数据内部一致，并代表了一个中低收入国家公共卫生项目的合理情景。没有矛盾或物理上不可能的条件。\n\n### 第3步：结论与行动\n该问题被认定为**有效**。它是卫生系统科学基本原则的直接应用，内容自洽，并且在科学上和逻辑上都是合理的。可以继续进行求解过程。\n\n这个问题的核心在于成本效益分析的应用。需要计算的基本量是增量成本效益比（ICER）。ICER衡量的是与标准或替代行动方案相比，一项新干预措施每单位健康增益（在此案例中为每挽回一个DALY）所需的额外成本。\n\n令$\\Delta C$代表干预措施的增量成本，$\\Delta E$代表增量的健康效果。ICER由以下比率定义：\n$$\nICER = \\frac{\\Delta C}{\\Delta E}\n$$\n根据问题陈述，我们已知：\n-   增量成本, $\\Delta C = \\$10,000,000$\n-   增量效果, $\\Delta E = 8,000$ DALYs 挽回\n\n将这些值代入ICER公式：\n$$\nICER = \\frac{\\$10,000,000}{8,000 \\text{ DALYs}}\n$$\n计算如下：\n$$\nICER = \\frac{10,000,000}{8,000} \\frac{\\$}{\\text{DALY}} = \\frac{10,000}{8} \\frac{\\$}{\\text{DALY}} = 1250 \\frac{\\$}{\\text{DALY}}\n$$\n计算出的ICER为每挽回一个DALY需花费$\\$1,250$。问题要求将此值报告为四位有效数字。确切值为$1250$，可以写作$1.250 \\times 10^3$，因此包含四位有效数字。\n\n下一步是应用决策规则。问题陈述该国已采纳一个成本效益阈值，我们称之为$k$，它代表卫生系统愿意为挽回一个DALY支付的最高金额。给定的阈值是：\n$$\nk = \\$1,000 \\text{ per DALY}\n$$\n成本效益分析中的决策规则如下：如果一项干预措施的ICER小于或等于阈值$k$，则该措施被认为是“具有成本效益的”并应被采纳。\n$$\n\\text{Adopt if } ICER \\le k\n$$\n$$\n\\text{Do not adopt if } ICER > k\n$$\n我们必须将计算出的ICER与阈值$k$进行比较：\n$$\nICER = \\$1,250 \\text{ per DALY}\n$$\n$$\nk = \\$1,000 \\text{ per DALY}\n$$\n由于 $\\$1,250 > \\$1,000$，我们得到 $ICER > k$。\n根据决策规则，在指定的阈值下，该免疫接种运动不具有成本效益。通过此项目挽回一个DALY的成本（$\\$1,250$）超过了卫生系统声明的支付意愿（$\\$1,000$）。因此，不应采纳该干预措施。\n\n采纳指标规定为$1$表示“采纳”，$0$表示“不采纳”。由于决策为不采纳，该指标为$0$。\n\n最终答案必须是一个包含两个条目的行矩阵。第一个条目是ICER（$1250$），第二个是采纳指标（$0$）。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n1250  0\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "由于各国在规模、背景和数据质量上存在巨大差异，对国家卫生系统进行比较充满挑战。我们如何才能超越简单的排名，建立一个更细致、由数据驱动的系统绩效分类方法？这项高级实践将指导您使用对异常值不敏感的稳健统计方法，构建一个卫生系统类型学。您将学习如何标准化不同指标，并将它们组合成综合的健康产出和财务保护评分，从而将原始数据转化为有意义的比较框架，以识别“高价值”系统或“高支出异常”等不同模式。",
            "id": "4365237",
            "problem": "针对每个国家，您会获得三个跨国指标：作为结果指标的预期寿命（以年为单位）和医疗可及性及质量指数（HAQ指数），以及作为筹资特征的自付费用（OOP）份额。医疗可及性及质量指数被定义为一个从 $0$ 到 $100$ 的无量纲度量，代表医疗保健的可及性与质量。自付费用份额被定义为在接受服务时由家庭直接支付的卫生总支出部分，表示为 $0$ 到 $1$ 之间的小数；您必须将OOP值视为小数，而非百分比。任务是构建一个比较类型学，使用从稳健统计量中得出的有原则的阈值，来区分高价值体系和高支出离群值。\n\n从适用于跨国比较的基础统计定义开始：\n- 对于任何指标向量 $X = (X_1, X_2, \\dots, X_n)$，定义中位数 $\\mathrm{med}(X)$ 和中位数绝对偏差 (MAD) 为 $\\mathrm{MAD}(X) = \\mathrm{med}\\left(\\lvert X_i - \\mathrm{med}(X)\\rvert\\right)$。\n- 对于 $X_i$ 的修正$z$-分数为 $z_i(X) = 0.6745 \\cdot \\dfrac{X_i - \\mathrm{med}(X)}{\\mathrm{MAD}(X)}$（当 $\\mathrm{MAD}(X)  0$ 时）；如果 $\\mathrm{MAD}(X) = 0$，则使用由 $\\mathrm{IQR}(X) = Q_3(X) - Q_1(X)$ 定义的四分位距 (IQR)，并设 $z_i(X) = \\dfrac{X_i - \\mathrm{med}(X)}{\\mathrm{IQR}(X) / 1.349}$（当 $\\mathrm{IQR}(X)  0$ 时）；如果 $\\mathrm{MAD}(X) = 0$ 且 $\\mathrm{IQR}(X) = 0$，则对所有 $i$ 设 $z_i(X) = 0$。\n- 令 $L_i$ 表示预期寿命（以年为单位），$H_i$ 表示医疗可及性及质量指数（无单位，从 $0$ 到 $100$），$S_i$ 表示自付费用份额（小数部分，从 $0$ 到 $1$）。获取结果指标的标准化分数 $z_i(L)$ 和 $z_i(H)$，以及OOP份额的标准化分数 $z_i(S)$。定义综合结果分数为 $z_i(V) = \\dfrac{z_i(L) + z_i(H)}{2}$，财务保护分数为 $z_i(F) = -z_i(S)$，注意较低的OOP份额对应较高的财务保护水平。\n\n使用这些标准化分数，区分以下类型：\n- 高价值：$z_i(V) \\ge t_{+}$ 且 $z_i(F) \\ge t_{+}$。\n- 高支出离群值：$z_i(V) \\le t_{-}$ 且 $z_i(F) \\ge t_{+}$。\n在这里，$t_{+}$ 和 $t_{-}$ 是对称阈值，其选择是为了识别出高于或低于中位数至少一个中位数绝对偏差的观测值，这与修正$z$-分数的标度一致，并且必须根据上述定义进行论证。\n\n您的程序必须实现此类型学，并将其应用于以下数据集测试套件。在每个数据集中，国家按给定顺序排列，您必须将每个国家分类为以下整数代码之一：$1$ 表示高价值，$2$ 表示高支出离群值，否则为 $0$。\n\n测试套件：\n- 数据集 A ($n = 7$)：\n  - $L = [85, 82, 78, 75, 66, 70, 68]$ (年)\n  - $H = [94, 88, 80, 70, 50, 60, 55]$ (无单位)\n  - $S = [0.12, 0.10, 0.30, 0.45, 0.08, 0.60, 0.65]$ (小数部分)\n- 数据集 B ($n = 5$) [$S$中离散度为零的边界情况]：\n  - $L = [60, 62, 64, 66, 68]$ (年)\n  - $H = [50, 52, 54, 56, 58]$ (无单位)\n  - $S = [0.20, 0.20, 0.20, 0.20, 0.20]$ (小数部分)\n- 数据集 C ($n = 5$) [接近阈值的边界情况]：\n  - $L = [76, 77, 78, 79, 80]$ (年)\n  - $H = [75, 76, 77, 78, 79]$ (无单位)\n  - $S = [0.25, 0.22, 0.18, 0.15, 0.12]$ (小数部分)\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表。每个数据集的结果必须是一个整数代码的内部列表，顺序与输入的国家顺序一致。例如，输出应类似于 $[[a_1,a_2,\\dots],[b_1,b_2,\\dots],[c_1,c_2,\\dots]]$，其中每个 $a_i$、$b_i$、$c_i$ 是如上定义的集合 $\\{0,1,2\\}$ 中的一个整数。\n\n您的实现必须是独立自足的，不接受任何输入，并且仅产生指定的单行输出。",
            "solution": "该问题要求开发并实现一个统计类型学，以根据三个指标对各国的卫生系统进行分类：预期寿命（$L$）、医疗可及性及质量指数（$H$）和自付费用（OOP）份额（$S$）。该分类区分“高价值”体系、“高支出离群值”和默认类别。这将通过计算稳健的统计度量并应用指定的阈值来实现。\n\n首先，我们必须形式化分类阈值 $t_+$ 和 $t_-$。问题陈述这些是对称阈值，用于“识别高于或低于中位数至少一个中位数绝对偏差的观测值，这与修正$z$-分数的标度一致”。\n\n修正$z$-分数的定义为 $z_i(X) = 0.6745 \\cdot \\dfrac{X_i - \\mathrm{med}(X)}{\\mathrm{MAD}(X)}$，对于一个非零的中位数绝对偏差 (MAD)。如果一个观测值 $X_i$ 比中位数高一个MAD，即 $X_i - \\mathrm{med}(X) = \\mathrm{MAD}(X)$。将此代入公式可得：\n$$\nz_i(X) = 0.6745 \\cdot \\dfrac{\\mathrm{MAD}(X)}{\\mathrm{MAD}(X)} = 0.6745\n$$\n类似地，一个比中位数低一个MAD的观测值，即 $X_i - \\mathrm{med}(X) = -\\mathrm{MAD}(X)$，其修正$z$-分数为 $-0.6745$。\n因此，一个离中位数至少一个MAD的值满足 $\\lvert X_i - \\mathrm{med}(X) \\rvert \\ge \\mathrm{MAD}(X)$，这对应于一个满足 $\\lvert z_i(X) \\rvert \\ge 0.6745$ 的修正$z$-分数。\n鉴于阈值必须是对称的（$t_{-} = -t_{+}$），与问题定义一致的唯一解释是将阈值设定为这些确切值：\n$$\nt_{+} = 0.6745\n$$\n$$\nt_{-} = -0.6745\n$$\n\n对每个数据集的总体算法流程如下：\n1.  对于每个指标向量（$L$、$H$ 和 $S$），计算每个国家的修正$z$-分数。\n    a.  计算中位数 $\\mathrm{med}(X)$。\n    b.  计算中位数绝对偏差 $\\mathrm{MAD}(X) = \\mathrm{med}(\\lvert X_i - \\mathrm{med}(X)\\rvert)$。\n    c.  如果 $\\mathrm{MAD}(X)  0$，计算 $z_i(X) = 0.6745 \\cdot \\dfrac{X_i - \\mathrm{med}(X)}{\\mathrm{MAD}(X)}$。\n    d.  如果 $\\mathrm{MAD}(X) = 0$，计算四分位距 $\\mathrm{IQR}(X) = Q_3(X) - Q_1(X)$。\n        i. 如果 $\\mathrm{IQR}(X)  0$，计算 $z_i(X) = \\dfrac{X_i - \\mathrm{med}(X)}{\\mathrm{IQR}(X) / 1.349}$。\n        ii. 如果 $\\mathrm{IQR}(X) = 0$，则对所有 $i$ 设 $z_i(X) = 0$。\n2.  对于每个国家 $i$，计算综合分数：\n    a.  综合结果分数：$z_i(V) = \\dfrac{z_i(L) + z_i(H)}{2}$。\n    b.  财务保护分数：$z_i(F) = -z_i(S)$。\n3.  对每个国家 $i$ 应用分类规则：\n    a.  如果 $z_i(V) \\ge 0.6745$ 且 $z_i(F) \\ge 0.6745$，则该国被分类为类型 $1$（高价值）。\n    b.  如果 $z_i(V) \\le -0.6745$ 且 $z_i(F) \\ge 0.6745$，则该国被分类为类型 $2$（高支出离群值）。\n    c.  否则，该国被分类为类型 $0$。\n\n我们现在将此程序应用于测试套件。\n\n**数据集 A**\n给定数据 ($n=7$)：\n- $L = [85, 82, 78, 75, 66, 70, 68]$\n- $H = [94, 88, 80, 70, 50, 60, 55]$\n- $S = [0.12, 0.10, 0.30, 0.45, 0.08, 0.60, 0.65]$\n\n步骤 1a：计算稳健统计量\n- 对于 $L$：排序后为 $[66, 68, 70, 75, 78, 82, 85]$。$\\mathrm{med}(L) = 75$。绝对偏差为 $[9, 7, 5, 0, 3, 7, 10]$；排序后为 $[0, 3, 5, 7, 7, 9, 10]$。$\\mathrm{MAD}(L) = 7$。\n- 对于 $H$：排序后为 $[50, 55, 60, 70, 80, 88, 94]$。$\\mathrm{med}(H) = 70$。绝对偏差为 $[20, 15, 10, 0, 10, 18, 24]$；排序后为 $[0, 10, 10, 15, 18, 20, 24]$。$\\mathrm{MAD}(H) = 15$。\n- 对于 $S$：排序后为 $[0.08, 0.10, 0.12, 0.30, 0.45, 0.60, 0.65]$。$\\mathrm{med}(S) = 0.30$。绝对偏差为 $[0.22, 0.20, 0.18, 0, 0.15, 0.30, 0.35]$；排序后为 $[0, 0.15, 0.18, 0.20, 0.22, 0.30, 0.35]$。$\\mathrm{MAD}(S) = 0.20$。\n\n步骤 1b-3：计算分数并分类\n下面显示了每个国家计算出的分数和最终分类。国家按其原始输入顺序列出。\n1.  $L_1=85, H_1=94, S_1=0.12$:\n    $z_1(L) = 0.6745 \\frac{85-75}{7} \\approx 0.9636$。$z_1(H) = 0.6745 \\frac{94-70}{15} = 1.0792$。$z_1(S) = 0.6745 \\frac{0.12-0.30}{0.20} \\approx -0.6071$。\n    $z_1(V) = \\frac{0.9636+1.0792}{2} \\approx 1.0214$。$z_1(F) = -(-0.6071) = 0.6071$。\n    $z_1(V) \\ge 0.6745$ 但 $z_1(F)  0.6745$。分类：$0$。\n2.  $L_2=82, H_2=88, S_2=0.10$:\n    $z_2(L) = 0.6745 \\frac{82-75}{7} = 0.6745$。$z_2(H) = 0.6745 \\frac{88-70}{15} = 0.8094$。$z_2(S) = 0.6745 \\frac{0.10-0.30}{0.20} = -0.6745$。\n    $z_2(V) = \\frac{0.6745+0.8094}{2} \\approx 0.7420$。$z_2(F) = -(-0.6745) = 0.6745$。\n    $z_2(V) \\ge 0.6745$ 且 $z_2(F) \\ge 0.6745$。分类：$1$。\n3.  $L_3=78, H_3=80, S_3=0.30$:\n    $z_3(L) = 0.6745 \\frac{78-75}{7} \\approx 0.2891$。$z_3(H) = 0.6745 \\frac{80-70}{15} \\approx 0.4497$。$z_3(S) = 0.6745 \\frac{0.30-0.30}{0.20} = 0$。\n    $z_3(V) \\approx 0.3694$。$z_3(F) = 0$。分类：$0$。\n4.  $L_4=75, H_4=70, S_4=0.45$:\n    $z_4(L) = 0$。$z_4(H) = 0$。$z_4(S) = 0.6745 \\frac{0.45-0.30}{0.20} \\approx 0.5059$。\n    $z_4(V) = 0$。$z_4(F) \\approx -0.5059$。分类：$0$。\n5.  $L_5=66, H_5=50, S_5=0.08$:\n    $z_5(L) = 0.6745 \\frac{66-75}{7} \\approx -0.8672$。$z_5(H) = 0.6745 \\frac{50-70}{15} \\approx -0.8993$。$z_5(S) = 0.6745 \\frac{0.08-0.30}{0.20} \\approx -0.7420$。\n    $z_5(V) = \\frac{-0.8672-0.8993}{2} \\approx -0.8833$。$z_5(F) = -(-0.7420) = 0.7420$。\n    $z_5(V) \\le -0.6745$ 且 $z_5(F) \\ge 0.6745$。分类：$2$。\n6.  $L_6=70, H_6=60, S_6=0.60$:\n    $z_6(L) = 0.6745 \\frac{70-75}{7} \\approx -0.4818$。$z_6(H) = 0.6745 \\frac{60-70}{15} \\approx -0.4497$。$z_6(S) = 0.6745 \\frac{0.60-0.30}{0.20} = 1.0118$。\n    $z_6(V) \\approx -0.4657$。$z_6(F) \\approx -1.0118$。分类：$0$。\n7.  $L_7=68, H_7=55, S_7=0.65$:\n    $z_7(L) = 0.6745 \\frac{68-75}{7} = -0.6745$。$z_7(H) = 0.6745 \\frac{55-70}{15} = -0.6745$。$z_7(S) = 0.6745 \\frac{0.65-0.30}{0.20} \\approx 1.1804$。\n    $z_7(V) = -0.6745$。$z_7(F) \\approx -1.1804$。分类：$0$。\n\n数据集 A 的结果：$[0, 1, 0, 0, 2, 0, 0]$\n\n**数据集 B**\n给定数据 ($n=5$)：\n- $L = [60, 62, 64, 66, 68]$\n- $H = [50, 52, 54, 56, 58]$\n- $S = [0.20, 0.20, 0.20, 0.20, 0.20]$\n\n步骤 1a：计算稳健统计量\n- 对于 $L$：$\\mathrm{med}(L) = 64$。绝对偏差：$[4, 2, 0, 2, 4]$。$\\mathrm{MAD}(L) = 2$。\n- 对于 $H$：$\\mathrm{med}(H) = 54$。绝对偏差：$[4, 2, 0, 2, 4]$。$\\mathrm{MAD}(H) = 2$。\n- 对于 $S$：$\\mathrm{med}(S) = 0.20$。所有绝对偏差均为 $0$，所以 $\\mathrm{MAD}(S) = 0$。我们必须检查 IQR。$Q_1(S) = 0.20$，$Q_3(S) = 0.20$，所以 $\\mathrm{IQR}(S) = 0$。规则规定，对所有 $i$， $z_i(S) = 0$。\n\n步骤 1b-3：计算分数并分类\n- $z_i(S)=0$，因此对所有国家 $z_i(F) = -z_i(S) = 0$。\n- 由于条件 $z_i(F) \\ge 0.6745$ 永远不会满足，所以没有国家可以被分类为类型 $1$ 或类型 $2$。\n因此，所有分类均为 $0$。\n\n数据集 B 的结果：$[0, 0, 0, 0, 0]$\n\n**数据集 C**\n给定数据 ($n=5$)：\n- $L = [76, 77, 78, 79, 80]$\n- $H = [75, 76, 77, 78, 79]$\n- $S = [0.25, 0.22, 0.18, 0.15, 0.12]$\n\n步骤 1a：计算稳健统计量\n- 对于 $L$：$\\mathrm{med}(L) = 78$。绝对偏差：$[2, 1, 0, 1, 2]$。$\\mathrm{MAD}(L) = 1$。\n- 对于 $H$：$\\mathrm{med}(H) = 77$。绝对偏差：$[2, 1, 0, 1, 2]$。$\\mathrm{MAD}(H) = 1$。\n- 对于 $S$：排序后为 $[0.12, 0.15, 0.18, 0.22, 0.25]$。$\\mathrm{med}(S) = 0.18$。绝对偏差集合为 $\\{|0.25-0.18|, |0.22-0.18|, |0.18-0.18|, |0.15-0.18|, |0.12-0.18|\\} = \\{0.07, 0.04, 0, 0.03, 0.06\\}$。排序后为 $[0, 0.03, 0.04, 0.06, 0.07]$，所以 $\\mathrm{MAD}(S) = 0.04$。\n\n步骤 1b-3：计算分数并分类\n1.  $L_1=76, H_1=75, S_1=0.25$:\n    $z_1(L) = 0.6745 \\frac{76-78}{1} = -1.349$。$z_1(H) = 0.6745 \\frac{75-77}{1} = -1.349$。$z_1(S) = 0.6745 \\frac{0.25-0.18}{0.04} \\approx 1.1804$。\n    $z_1(V) = -1.349$。$z_1(F) \\approx -1.1804$。分类：$0$。\n2.  $L_2=77, H_2=76, S_2=0.22$:\n    $z_2(L) = 0.6745 \\frac{77-78}{1} = -0.6745$。$z_2(H) = 0.6745 \\frac{76-77}{1} = -0.6745$。$z_2(S) = 0.6745 \\frac{0.22-0.18}{0.04} = 0.6745$。\n    $z_2(V) = -0.6745$。$z_2(F) = -0.6745$。分类：$0$。\n3.  $L_3=78, H_3=77, S_3=0.18$:\n    $z_3(L) = 0$。$z_3(H) = 0$。$z_3(S) = 0$。\n    $z_3(V) = 0$。$z_3(F) = 0$。分类：$0$。\n4.  $L_4=79, H_4=78, S_4=0.15$:\n    $z_4(L) = 0.6745 \\frac{79-78}{1} = 0.6745$。$z_4(H) = 0.6745 \\frac{78-77}{1} = 0.6745$。$z_4(S) = 0.6745 \\frac{0.15-0.18}{0.04} \\approx -0.5059$。\n    $z_4(V) = 0.6745$。$z_4(F) \\approx 0.5059$。\n    $z_4(V) \\ge 0.6745$ 但 $z_4(F)  0.6745$。分类：$0$。\n5.  $L_5=80, H_5=79, S_5=0.12$:\n    $z_5(L) = 0.6745 \\frac{80-78}{1} = 1.349$。$z_5(H) = 0.6745 \\frac{79-77}{1} = 1.349$。$z_5(S) = 0.6745 \\frac{0.12-0.18}{0.04} \\approx -1.0118$。\n    $z_5(V) = 1.349$。$z_5(F) \\approx 1.0118$。\n    $z_5(V) \\ge 0.6745$ 且 $z_5(F) \\ge 0.6745$。分类：$1$。\n\n数据集 C 的结果：$[0, 0, 0, 0, 1]$\n\n最终的合并结果是这三个分类列表的列表。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n# No other libraries outside the Python standard library are permitted.\n\ndef calculate_modified_z_scores(data):\n    \"\"\"\n    Calculates the modified z-scores for a given 1D array of data.\n    \n    The function handles three cases as specified in the problem:\n    1. Standard calculation using MAD if MAD  0.\n    2. Fallback to IQR if MAD = 0 and IQR  0.\n    3. Returns all zeros if both MAD and IQR are 0.\n    \"\"\"\n    X = np.array(data, dtype=float)\n    \n    # Calculate median\n    med_X = np.median(X)\n    \n    # Calculate MAD\n    abs_dev = np.abs(X - med_X)\n    mad_X = np.median(abs_dev)\n    \n    if mad_X  0:\n        # Case 1: MAD is non-zero\n        z_scores = 0.6745 * (X - med_X) / mad_X\n    else:\n        # Case 2  3: MAD is zero, fall back to IQR\n        q1, q3 = np.percentile(X, [25, 75])\n        iqr_X = q3 - q1\n        \n        if iqr_X  0:\n            # Case 2: IQR is non-zero\n            denominator = iqr_X / 1.349\n            z_scores = (X - med_X) / denominator\n        else:\n            # Case 3: Both MAD and IQR are zero\n            z_scores = np.zeros_like(X)\n            \n    return z_scores\n\ndef classify_countries(L, H, S):\n    \"\"\"\n    Classifies countries into a typology based on health system indicators.\n    \n    Args:\n        L (list): Life expectancy values.\n        H (list): Health Access and Quality Index values.\n        S (list): Out-of-Pocket share values.\n        \n    Returns:\n        list: A list of integer codes (0, 1, or 2) for each country.\n    \"\"\"\n    # Calculate modified z-scores for each indicator\n    z_L = calculate_modified_z_scores(L)\n    z_H = calculate_modified_z_scores(H)\n    z_S = calculate_modified_z_scores(S)\n    \n    # Calculate composite scores\n    z_V = (z_L + z_H) / 2.0  # Composite outcome score\n    z_F = -z_S               # Financial protection score\n    \n    # Define thresholds based on the problem's logic\n    t_plus = 0.6745\n    t_minus = -0.6745\n    \n    classifications = []\n    num_countries = len(L)\n    \n    for i in range(num_countries):\n        zv = z_V[i]\n        zf = z_F[i]\n        \n        # Apply typology rules\n        if zv = t_plus and zf = t_plus:\n            classifications.append(1)  # High-value\n        elif zv = t_minus and zf = t_plus:\n            classifications.append(2)  # High-spend outlier\n        else:\n            classifications.append(0)  # Otherwise\n            \n    return classifications\n\ndef solve():\n    \"\"\"\n    Main function to run the analysis on the test suite and print the results.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    test_cases = [\n        {\n            \"L\": [85, 82, 78, 75, 66, 70, 68],\n            \"H\": [94, 88, 80, 70, 50, 60, 55],\n            \"S\": [0.12, 0.10, 0.30, 0.45, 0.08, 0.60, 0.65],\n        },\n        {\n            \"L\": [60, 62, 64, 66, 68],\n            \"H\": [50, 52, 54, 56, 58],\n            \"S\": [0.20, 0.20, 0.20, 0.20, 0.20],\n        },\n        {\n            \"L\": [76, 77, 78, 79, 80],\n            \"H\": [75, 76, 77, 78, 79],\n            \"S\": [0.25, 0.22, 0.18, 0.15, 0.12],\n        }\n    ]\n\n    all_results = []\n    for case in test_cases:\n        result = classify_countries(case[\"L\"], case[\"H\"], case[\"S\"])\n        all_results.append(result)\n\n    # Format the final output string exactly as required\n    inner_strings = [f\"[{','.join(map(str, r))}]\" for r in all_results]\n    final_output = f\"[{','.join(inner_strings)}]\"\n    \n    # Final print statement in the exact required format.\n    print(final_output)\n\nsolve()\n```"
        }
    ]
}
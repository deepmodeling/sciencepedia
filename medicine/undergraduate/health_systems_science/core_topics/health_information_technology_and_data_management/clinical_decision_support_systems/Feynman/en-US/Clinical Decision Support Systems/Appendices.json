{
    "hands_on_practices": [
        {
            "introduction": "At the heart of many Clinical Decision Support Systems is the ability to update our belief about a patient's condition in light of new evidence. This process is governed by Bayes' theorem, which provides a formal way to combine a prior probability (prevalence) with new data from a diagnostic test. This exercise  will guide you through calculating posterior probabilities, a fundamental skill for interpreting test results and understanding how a CDSS quantifies diagnostic certainty.",
            "id": "4826791",
            "problem": "A Clinical Decision Support System (CDSS) is configured to assist with decision-making for a binary condition, denoted by $D$, using a single diagnostic test that returns a positive result ($+$) or negative result ($-$). The CDSS uses the following well-tested definitions: sensitivity, denoted $p(+\\mid D)$, is the probability that the test is positive given the disease is present; specificity, denoted $p(-\\mid D^{c})$, is the probability that the test is negative given the disease is absent; and prevalence, denoted $p(D)$, is the prior probability of disease in the target population. Consider a setting with $p(D)=0.2$, sensitivity $=0.9$, and specificity $=0.8$. The action policy in this CDSS uses two thresholds derived from expected utility considerations: a treatment threshold $\\tau_{\\mathrm{treat}}=0.3$ and a rule-out threshold $\\tau_{\\mathrm{ruleout}}=0.05$. Starting only from the core definitions of conditional probability and the law of total probability, compute $p(D\\mid +)$ and $p(D\\mid -)$ for a patient’s single test result. Provide the final numerical values in exact form. In your derivation, interpret the clinical relevance of these posterior probabilities by comparing them to $\\tau_{\\mathrm{treat}}$ and $\\tau_{\\mathrm{ruleout}}$; however, the final answer should consist solely of the two computed probabilities.",
            "solution": "The problem is well-posed, scientifically grounded, and provides all necessary information to compute the required posterior probabilities. The concepts of sensitivity, specificity, prevalence, and posterior probability are standard components of Bayesian statistics as applied to medical diagnostics. All provided numerical values are within valid probability ranges ($0$ to $1$) and represent a realistic clinical scenario. Therefore, the problem is valid.\n\nThe objective is to compute the posterior probabilities of a patient having the disease ($D$) given a positive test result ($+$) or a negative test result ($-$). These are denoted by $p(D\\mid +)$ and $p(D\\mid -)$, respectively. We will start from the core definition of conditional probability and the law of total probability to derive the results.\n\nThe givens are:\nPrevalence: $p(D) = 0.2$\nSensitivity: $p(+\\mid D) = 0.9$\nSpecificity: $p(-\\mid D^{c}) = 0.8$\n\nFrom the prevalence, we can determine the probability of the absence of disease, denoted by $D^c$:\n$$p(D^c) = 1 - p(D) = 1 - 0.2 = 0.8$$\n\nThe test results are binary (positive or negative). Therefore, we can find the probabilities of the complementary events for sensitivity and specificity:\nThe false negative rate is the probability of a negative test given the disease is present:\n$$p(-\\mid D) = 1 - p(+\\mid D) = 1 - 0.9 = 0.1$$\nThe false positive rate is the probability of a positive test given the disease is absent:\n$$p(+\\mid D^c) = 1 - p(-\\mid D^c) = 1 - 0.8 = 0.2$$\n\nWe will now compute $p(D\\mid +)$, the positive predictive value.\nBy the definition of conditional probability:\n$$p(D\\mid +) = \\frac{p(D \\cap +)}{p(+)}$$\nThe numerator, the joint probability of having the disease and testing positive, can be rewritten using the definition of conditional probability as $p(D \\cap +) = p(+\\mid D)p(D)$.\nThe denominator, the total probability of a positive test, is found using the law of total probability by conditioning on the presence or absence of the disease:\n$$p(+) = p(+ \\cap D) + p(+ \\cap D^c) = p(+\\mid D)p(D) + p(+\\mid D^c)p(D^c)$$\nCombining these gives Bayes' theorem for this case:\n$$p(D\\mid +) = \\frac{p(+\\mid D)p(D)}{p(+\\mid D)p(D) + p(+\\mid D^c)p(D^c)}$$\nSubstituting the numerical values:\n$$p(D\\mid +) = \\frac{0.9 \\times 0.2}{(0.9 \\times 0.2) + (0.2 \\times 0.8)} = \\frac{0.18}{0.18 + 0.16} = \\frac{0.18}{0.34}$$\nExpressing this as an exact fraction:\n$$p(D\\mid +) = \\frac{18}{34} = \\frac{9}{17}$$\n\nNext, we compute $p(D\\mid -)$, the probability of disease given a negative test.\nBy the definition of conditional probability:\n$$p(D\\mid -) = \\frac{p(D \\cap -)}{p(-)}$$\nThe numerator can be rewritten as $p(D \\cap -) = p(-\\mid D)p(D)$.\nThe denominator, the total probability of a negative test, is found using the law of total probability:\n$$p(-) = p(- \\cap D) + p(- \\cap D^c) = p(-\\mid D)p(D) + p(-\\mid D^c)p(D^c)$$\nAlternatively, since the test outcome is binary, $p(-) = 1 - p(+) = 1 - 0.34 = 0.66$.\nCombining these gives the corresponding form of Bayes' theorem:\n$$p(D\\mid -) = \\frac{p(-\\mid D)p(D)}{p(-\\mid D)p(D) + p(-\\mid D^c)p(D^c)}$$\nSubstituting the numerical values:\n$$p(D\\mid -) = \\frac{0.1 \\times 0.2}{(0.1 \\times 0.2) + (0.8 \\times 0.8)} = \\frac{0.02}{0.02 + 0.64} = \\frac{0.02}{0.66}$$\nExpressing this as an exact fraction:\n$$p(D\\mid -) = \\frac{2}{66} = \\frac{1}{33}$$\n\nFor clinical relevance, we compare these posterior probabilities to the given thresholds: the treatment threshold $\\tau_{\\mathrm{treat}}=0.3$ and the rule-out threshold $\\tau_{\\mathrm{ruleout}}=0.05$.\nThe prior probability of disease, $p(D)=0.2$, lies between these thresholds ($0.05 < 0.2 < 0.3$), indicating that a decision cannot be made without further information, warranting the test.\nAfter a positive test, the posterior probability is $p(D\\mid +) = \\frac{9}{17} \\approx 0.529$. Since $p(D\\mid +) > \\tau_{\\mathrm{treat}}$, the evidence is strong enough to recommend treatment.\nAfter a negative test, the posterior probability is $p(D\\mid -) = \\frac{1}{33} \\approx 0.0303$. Since $p(D\\mid -) < \\tau_{\\mathrm{ruleout}}$, the evidence is strong enough to rule out the disease and recommend no treatment.\nThe diagnostic test is effective in this context because it successfully moves the probability from the intermediate \"testing zone\" into the \"treat\" or \"rule-out\" zones.",
            "answer": "$$\\boxed{\\begin{pmatrix} \\frac{9}{17} & \\frac{1}{33} \\end{pmatrix}}$$"
        },
        {
            "introduction": "Knowing the probability of a disease is only the first step; the crucial next step is deciding what to do. This practice  introduces the concept of decision analysis, where a CDSS moves beyond pure probability to weigh the consequences of its recommendations. By assigning costs to different types of errors (false positives and false negatives), you will calculate the expected misclassification cost and learn how a system can rationally determine if the benefits of testing outweigh the risks.",
            "id": "4363287",
            "problem": "A hospital plans to integrate a binary diagnostic classifier into a Clinical Decision Support System (CDSS) to guide testing decisions for a condition with prevalence $\\pi = 0.10$. The classifier has sensitivity $\\text{Se} = 0.90$ and specificity $\\text{Sp} = 0.80$. The CDSS will consider misclassification costs where a false positive has cost $c_{FP} = 1$ and a false negative has cost $c_{FN} = 10$. Suppose the baseline policy when not testing is to classify all patients as negative. Using only the core definitions of sensitivity, specificity, prevalence, and Bayes theorem, derive the Positive Predictive Value (PPV) and Negative Predictive Value (NPV) of the classifier, compute the expected misclassification cost per patient when testing is used, compare it to the expected misclassification cost under the baseline no-test policy, and decide whether the CDSS should recommend testing under this cost structure. For grading, report only the expected misclassification cost per patient under the testing policy as a single real number. Express your final answer in cost units and round to four significant figures.",
            "solution": "The problem is assessed to be valid as it is scientifically grounded, well-posed, and objective, providing all necessary information for a unique solution without contradiction or ambiguity.\n\nLet $D$ be the event that a patient has the condition, and $D^c$ be the event that the patient does not have the condition. Let $T^+$ and $T^-$ be the events of a positive and negative test result, respectively. The givens can be formally expressed as probabilities:\n\nThe prevalence of the condition:\n$P(D) = \\pi = 0.10$\nThe probability of not having the condition is:\n$P(D^c) = 1 - \\pi = 1 - 0.10 = 0.90$\n\nThe sensitivity of the classifier:\n$\\text{Se} = P(T^+ | D) = 0.90$\nThis implies the false negative rate (FNR) is:\n$P(T^- | D) = 1 - \\text{Se} = 1 - 0.90 = 0.10$\n\nThe specificity of the classifier:\n$\\text{Sp} = P(T^- | D^c) = 0.80$\nThis implies the false positive rate (FPR) is:\n$P(T^+ | D^c) = 1 - \\text{Sp} = 1 - 0.80 = 0.20$\n\nThe costs of misclassification are given as:\nCost of a false positive, $c_{FP} = 1$. A false positive occurs when the patient is classified as positive but does not have the disease ($D^c$).\nCost of a false negative, $c_{FN} = 10$. A false negative occurs when the patient is classified as negative but has the disease ($D$).\n\nFirst, we derive the Positive Predictive Value (PPV) and Negative Predictive Value (NPV). This requires calculating the total probability of a positive test, $P(T^+)$, and a negative test, $P(T^-)$, using the law of total probability.\n\n$P(T^+) = P(T^+ | D)P(D) + P(T^+ | D^c)P(D^c)$\n$P(T^+) = (\\text{Se})(\\pi) + (1 - \\text{Sp})(1 - \\pi)$\n$P(T^+) = (0.90)(0.10) + (0.20)(0.90) = 0.09 + 0.18 = 0.27$\n\n$P(T^-) = P(T^- | D)P(D) + P(T^- | D^c)P(D^c)$\n$P(T^-) = (1 - \\text{Se})(\\pi) + (\\text{Sp})(1 - \\pi)$\n$P(T^-) = (0.10)(0.10) + (0.80)(0.90) = 0.01 + 0.72 = 0.73$\nAs a check, $P(T^+) + P(T^-) = 0.27 + 0.73 = 1.00$.\n\nThe Positive Predictive Value, $PPV = P(D | T^+)$, is the probability of having the disease given a positive test. Using Bayes' theorem:\n$PPV = P(D | T^+) = \\frac{P(T^+ | D)P(D)}{P(T^+)} = \\frac{(0.90)(0.10)}{0.27} = \\frac{0.09}{0.27} = \\frac{1}{3}$\n\nThe Negative Predictive Value, $NPV = P(D^c | T^-)$, is the probability of not having the disease given a negative test. Using Bayes' theorem:\n$NPV = P(D^c | T^-) = \\frac{P(T^- | D^c)P(D^c)}{P(T^-)} = \\frac{(0.80)(0.90)}{0.73} = \\frac{0.72}{0.73}$\n\nNext, we calculate the expected misclassification cost per patient when the CDSS uses the test. The policy is to classify a patient as positive if the test is positive ($T^+$) and negative if the test is negative ($T^-$). A cost is incurred only upon misclassification. There are two types of misclassification:\n\n1.  A False Positive (FP) occurs if the test is positive ($T^+$) but the patient is disease-free ($D^c$). The probability of this joint event is:\n    $P(\\text{FP}) = P(T^+, D^c) = P(T^+ | D^c)P(D^c) = (1 - \\text{Sp})(1 - \\pi) = (0.20)(0.90) = 0.18$\n\n2.  A False Negative (FN) occurs if the test is negative ($T^-$) but the patient has the disease ($D$). The probability of this joint event is:\n    $P(\\text{FN}) = P(T^-, D) = P(T^- | D)P(D) = (1 - \\text{Se})(\\pi) = (0.10)(0.10) = 0.01$\n\nThe expected misclassification cost per patient under the testing policy, $E[\\text{Cost}_{\\text{test}}]$, is the sum of the costs of each error type weighted by their respective probabilities:\n$E[\\text{Cost}_{\\text{test}}] = c_{FP} \\times P(\\text{FP}) + c_{FN} \\times P(\\text{FN})$\n$E[\\text{Cost}_{\\text{test}}] = (1) \\times (0.18) + (10) \\times (0.01)$\n$E[\\text{Cost}_{\\text{test}}] = 0.18 + 0.10 = 0.28$\n\nNow, we calculate the expected misclassification cost under the baseline no-test policy, where all patients are classified as negative.\nUnder this policy, a misclassification occurs only when a patient who is classified as negative actually has the disease. This is a false negative. The probability of this event is simply the prevalence of the disease, $P(D) = \\pi$.\nThere are no false positives, as no patient is ever classified as positive.\nThe expected cost under the no-test policy, $E[\\text{Cost}_{\\text{no-test}}]$, is:\n$E[\\text{Cost}_{\\text{no-test}}] = c_{FN} \\times P(\\text{patient has disease}) = c_{FN} \\times \\pi$\n$E[\\text{Cost}_{\\text{no-test}}] = (10) \\times (0.10) = 1.0$\n\nFinally, we compare the two expected costs to decide whether the CDSS should recommend testing.\n$E[\\text{Cost}_{\\text{test}}] = 0.28$\n$E[\\text{Cost}_{\\text{no-test}}] = 1.0$\nSince $0.28 < 1.0$, the expected misclassification cost is lower with the testing policy. Therefore, the CDSS should recommend testing.\n\nThe problem requires reporting only the expected misclassification cost per patient under the testing policy, rounded to four significant figures.\nThe calculated cost is $0.28$. To four significant figures, this is $0.2800$.",
            "answer": "$$\\boxed{0.2800}$$"
        },
        {
            "introduction": "While many CDSS rely on statistical models, an equally important class of systems is built on explicit, human-readable rules. These rule-based systems encode clinical knowledge directly using propositional logic, such as `IF-THEN` statements with conjunctive ($\\land$) and disjunctive ($\\lor$) conditions. In this exercise , you will simulate the logic of a drug safety alert system to determine if a patient's data triggers a clinical alert, providing insight into the transparent and deterministic nature of knowledge-based CDSS.",
            "id": "4606609",
            "problem": "A rule-based clinical decision support system uses propositional logic with crisp Boolean semantics and a weighted linear aggregation to produce a dimensionless alert severity score. The foundational base for this problem consists of the following well-tested definitions and facts: propositional logic with conjunction and disjunction defined by truth-functional semantics, the closed-world assumption in knowledge-based systems (unspecified facts are treated as false), and a standard linear weighted aggregation used in clinical decision support. Conjunction is defined such that for propositions $X$ and $Y$, the truth value $t(X \\land Y)$ equals $1$ if and only if $t(X) = 1$ and $t(Y) = 1$, otherwise $0$. Disjunction is defined such that $t(X \\lor Y) = 1$ if and only if $t(X) = 1$ or $t(Y) = 1$, otherwise $0$. Under closed-world assumption, any antecedent literal not present in the patient data is assigned a truth value of $0$.\n\nConsider the following patient facts and rule base designed to detect renal and gastrointestinal risk associated with Nonsteroidal Anti-Inflammatory Drugs (NSAID). The patient has an estimated Glomerular Filtration Rate (eGFR) of $g = 45$ milliliters per minute per $1.73\\text{ m}^2$, is currently taking ibuprofen (an NSAID), and has no gastrointestinal (GI) bleed history. There is no active anticoagulant and no active angiotensin-converting enzyme (ACE) inhibitor. Encode these facts as Boolean propositions: $A$ denotes “active ibuprofen,” $H$ denotes “history of GI bleed,” $B$ denotes “active anticoagulant,” and $P$ denotes “active ACE inhibitor.” Numeric comparisons of $g$ against thresholds are treated as antecedent literals yielding $1$ if true and $0$ if false. The system’s three rules are:\n\n- Rule $R_1$: $A \\land (g < 60) \\Rightarrow$ renal risk; weight $w_1 = 0.57$.\n- Rule $R_2$: $A \\land (H \\lor B) \\Rightarrow$ GI risk; weight $w_2 = 0.28$.\n- Rule $R_3$: $(g < 30) \\lor (A \\land P) \\Rightarrow$ high-severity contraindication; weight $w_3 = 0.42$.\n\nThe alert severity score $S$ is computed by summing the products of each rule’s weight and its truth value, that is, $S = \\sum_{i=1}^{3} w_i \\cdot t(R_i)$, where $t(R_i) \\in \\{0,1\\}$ is the truth value of rule $R_i$ obtained by evaluating its antecedent with the given patient facts. The system’s alert threshold is $\\theta = 0.50$, meaning an alert fires if and only if $S \\ge \\theta$.\n\nEvaluate the three rules with their conjunctive and disjunctive antecedents against the patient’s facts, derive the alert decision from first principles, and compute the final alert severity score $S$. Express the final severity score as a dimensionless real number and round your answer to $4$ significant figures. Do not include any units in your final answer.",
            "solution": "The problem is valid as it is scientifically grounded, well-posed, and objective. It provides a complete and consistent set of definitions, facts, and rules necessary to compute a unique solution using established principles of propositional logic and weighted aggregation, which are standard in the field of clinical decision support systems.\n\nThe objective is to compute the alert severity score, $S$, for a given patient based on a set of rules and determine if an alert is triggered. The score is calculated using the formula $S = \\sum_{i=1}^{3} w_i \\cdot t(R_i)$, where $w_i$ is the weight of rule $R_i$ and $t(R_i)$ is the Boolean truth value ($1$ for true, $0$ for false) of its antecedent.\n\nFirst, we must formalize the patient's clinical data into truth values for the propositional literals defined in the problem. The patient data are:\n- Estimated Glomerular Filtration Rate, $g = 45$.\n- Active ibuprofen use, which corresponds to the proposition $A$.\n- No history of GI bleed, which corresponds to the proposition $H$.\n- No active anticoagulant, which corresponds to the proposition $B$.\n- No active ACE inhibitor, which corresponds to the proposition $P$.\n\nBased on these facts, we assign truth values to the propositions:\n- $t(A) = 1$ because the patient is taking ibuprofen.\n- $t(H) = 0$ because there is no history of GI bleed.\n- $t(B) = 0$ because there is no active anticoagulant.\n- $t(P) = 0$ because there is no active ACE inhibitor.\n\nNext, we evaluate the numerical comparison literals involving the patient's eGFR, $g = 45$:\n- The literal $(g < 60)$ evaluates to $45 < 60$, which is true. Therefore, $t(g < 60) = 1$.\n- The literal $(g < 30)$ evaluates to $45 < 30$, which is false. Therefore, $t(g < 30) = 0$.\n\nNow we can evaluate the antecedent of each rule to determine its truth value, $t(R_i)$.\n\nEvaluation of Rule $R_1$: The antecedent is $A \\land (g < 60)$.\nThe truth value $t(R_1)$ is the truth value of the conjunction $t(A \\land (g < 60))$.\nUsing the definition of conjunction, $t(X \\land Y)$ is $1$ if and only if $t(X)=1$ and $t(Y)=1$.\nWe have $t(A) = 1$ and $t(g < 60) = 1$.\nThus, $t(R_1) = 1 \\land 1 = 1$. Rule $R_1$ is activated.\n\nEvaluation of Rule $R_2$: The antecedent is $A \\land (H \\lor B)$.\nThe truth value $t(R_2)$ is $t(A \\land (H \\lor B))$. We first evaluate the disjunction $(H \\lor B)$.\nUsing the definition of disjunction, $t(X \\lor Y)$ is $1$ if and only if $t(X)=1$ or $t(Y)=1$.\nWe have $t(H) = 0$ and $t(B) = 0$.\nThus, $t(H \\lor B) = 0 \\lor 0 = 0$.\nNow we evaluate the conjunction $A \\land (H \\lor B)$. We have $t(A) = 1$ and $t(H \\lor B) = 0$.\nThus, $t(R_2) = 1 \\land 0 = 0$. Rule $R_2$ is not activated.\n\nEvaluation of Rule $R_3$: The antecedent is $(g < 30) \\lor (A \\land P)$.\nThe truth value $t(R_3)$ is $t((g < 30) \\lor (A \\land P))$. We first evaluate the conjunction $(A \\land P)$.\nWe have $t(A) = 1$ and $t(P) = 0$.\nThus, $t(A \\land P) = 1 \\land 0 = 0$.\nNow we evaluate the disjunction $(g < 30) \\lor (A \\land P)$. We have $t(g < 30) = 0$ and $t(A \\land P) = 0$.\nThus, $t(R_3) = 0 \\lor 0 = 0$. Rule $R_3$ is not activated.\n\nWith the truth values for each rule's antecedent determined ($t(R_1) = 1$, $t(R_2) = 0$, $t(R_3) = 0$), we can now compute the alert severity score $S$. The rule weights are given as $w_1 = 0.57$, $w_2 = 0.28$, and $w_3 = 0.42$.\n$$ S = w_1 \\cdot t(R_1) + w_2 \\cdot t(R_2) + w_3 \\cdot t(R_3) $$\n$$ S = (0.57 \\cdot 1) + (0.28 \\cdot 0) + (0.42 \\cdot 0) $$\n$$ S = 0.57 + 0 + 0 $$\n$$ S = 0.57 $$\nThe alert threshold is given as $\\theta = 0.50$. The system fires an alert if $S \\ge \\theta$.\nSince $S = 0.57$, and $0.57 \\ge 0.50$, an alert is indeed generated.\n\nThe problem requires the final alert severity score $S$ to be expressed as a dimensionless real number rounded to $4$ significant figures. The calculated score is $S=0.57$. Expressing this value with $4$ significant figures gives $0.5700$.",
            "answer": "$$ \\boxed{0.5700} $$"
        }
    ]
}
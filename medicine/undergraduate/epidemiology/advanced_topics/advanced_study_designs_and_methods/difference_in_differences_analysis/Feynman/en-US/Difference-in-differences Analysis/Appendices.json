{
    "hands_on_practices": [
        {
            "introduction": "The best way to understand Difference-in-Differences (DiD) is to calculate it by hand. This exercise walks you through the fundamental mechanics of the DiD estimator using a realistic public health scenario. By starting with raw case counts and population data, you will compute risks, observe changes over time, and ultimately isolate the intervention's estimated effect by 'differencing out' the background trend observed in a control community . This practice solidifies the core logic of the DiD approach.",
            "id": "4586279",
            "problem": "A municipal public health department implemented a point-of-use water chlorination program in Community A to reduce diarrheal disease. Community B did not implement the program during the same period. Surveillance recorded new diarrheal disease cases and the population at risk over two eight-week windows: one immediately before the program began (pre) and one immediately after (post). Assume no migration and that the recorded populations represent the at-risk denominators for each window. The recorded counts are:\n- Community A, pre: $240$ cases among $6000$ persons.\n- Community A, post: $160$ cases among $6100$ persons.\n- Community B, pre: $210$ cases among $5900$ persons.\n- Community B, post: $200$ cases among $6000$ persons.\n\nStarting from the definition of risk (incidence proportion) as the number of new cases divided by the number of persons at risk, and invoking the core causal inference idea that, under the parallel trends assumption, common time-varying influences can be isolated by comparing temporal changes between treated and untreated groups, compute the estimate of the intervention effect on the risk difference using difference-in-differences analysis. Express your final answer as a decimal proportion and round to four significant figures.",
            "solution": "The aim is to estimate the causal effect of the chlorination program on the risk (incidence proportion) of diarrheal disease using the difference-in-differences framework. The fundamental base is the definition of risk and the causal inference principle that temporal changes in a treated group, net of changes in a contemporaneous untreated control, attribute the residual change to the intervention under the parallel trends assumption.\n\nFirst, define risk for any group and period. For a given group and period, let $C$ denote the number of new cases and $N$ denote the number of persons at risk during the observation window. The risk (incidence proportion) is\n$$\nR \\equiv \\frac{C}{N}.\n$$\n\nCompute risks for each group-period cell:\n- Community A (treated), pre:\n$$\nR_{A,\\mathrm{pre}} = \\frac{240}{6000} = \\frac{24}{600} = \\frac{2}{50} = 0.04.\n$$\n- Community A (treated), post:\n$$\nR_{A,\\mathrm{post}} = \\frac{160}{6100} = \\frac{16}{610} \\approx 0.026229508.\n$$\n- Community B (control), pre:\n$$\nR_{B,\\mathrm{pre}} = \\frac{210}{5900} = \\frac{21}{590} \\approx 0.035593220.\n$$\n- Community B (control), post:\n$$\nR_{B,\\mathrm{post}} = \\frac{200}{6000} = \\frac{1}{30} \\approx 0.033333333.\n$$\n\nNext, compute the temporal change in risk within each community from pre to post:\n- Treated community change:\n$$\n\\Delta R_{A} = R_{A,\\mathrm{post}} - R_{A,\\mathrm{pre}} \\approx 0.026229508 - 0.04 = -0.013770492.\n$$\n- Control community change:\n$$\n\\Delta R_{B} = R_{B,\\mathrm{post}} - R_{B,\\mathrm{pre}} \\approx 0.033333333 - 0.035593220 = -0.002259887.\n$$\n\nUnder the parallel trends assumption—that in the absence of treatment, the treated group would have experienced the same underlying temporal change in risk as the control group—the intervention effect on the risk difference is the treated group’s temporal change net of the control group’s temporal change:\n$$\n\\text{DiD RD} = \\Delta R_{A} - \\Delta R_{B} \\approx (-0.013770492) - (-0.002259887) = -0.011510605.\n$$\n\nThis value represents the estimated reduction in risk attributable to the chlorination program as a decimal proportion. Rounding to four significant figures yields\n$$\n-0.01151.\n$$",
            "answer": "$$\\boxed{-0.01151}$$"
        },
        {
            "introduction": "Real-world policy rollouts are often messy, with different groups receiving an intervention at different times—a scenario known as staggered adoption. This exercise moves beyond the simple two-group, two-period setup to explore how the popular Two-Way Fixed Effects (TWFE) estimator handles this complexity. You will see how the overall treatment effect estimate is constructed from various comparisons within the data, including some non-obvious ones that can introduce biases, a critical insight from recent econometric research .",
            "id": "4792528",
            "problem": "A hospital system evaluates the effect of a computerized antimicrobial stewardship algorithm on the number of days of guideline-concordant antibiotic therapy per patient. Hospitals adopt in staggered fashion over two calendar periods, indexed by $t \\in \\{0,1\\}$. There are three cohorts of hospitals defined by adoption timing: early adopters ($E$) are treated in both periods, late adopters ($L$) adopt at $t=1$ only, and never adopters ($N$) do not adopt in either period. The cohort sizes are $n_{E}=100$, $n_{L}=50$, and $n_{N}=50$ hospitals, with each contributing exactly one patient per period so that the panel is balanced. The treatment indicator is $D_{gt} \\in \\{0,1\\}$ for cohort $g \\in \\{E,L,N\\}$ and period $t$, with $D_{E0}=1$, $D_{E1}=1$, $D_{L0}=0$, $D_{L1}=1$, $D_{N0}=0$, and $D_{N1}=0$.\n\nAssume the data are generated from a linear two-way fixed effects model,\n$$\ny_{it} = \\alpha_{i} + \\gamma_{t} + \\beta D_{it} + \\varepsilon_{it},\n$$\nwhere $y_{it}$ is the observed number of days of guideline-concordant antibiotic therapy for unit $i$ in period $t$, $\\alpha_{i}$ are unit fixed effects, $\\gamma_{t}$ are time fixed effects, and $\\beta$ is the parameter of interest. Assume mean-zero errors and parallel trends in the absence of treatment.\n\nThe observed cohort-by-period average outcomes (days per patient) are:\n- $y_{E0} = 6$, $y_{E1} = 7.5$;\n- $y_{L0} = 5$, $y_{L1} = 8$;\n- $y_{N0} = 5$, $y_{N1} = 6$.\n\nStarting from the definitions of ordinary least squares and the Frisch–Waugh–Lovell theorem, compute the two-way fixed effects (TWFE) estimate $\\hat{\\beta}$ using only the six cohort-period cells and the cohort sizes as observation weights. In your derivation, justify how the estimator can be understood as a composition of difference-in-differences (DID) comparisons among the three cohorts and explain, in words, how a comparison between early adopters and late adopters can induce negative implicit weights on some cohort-specific treatment effects under staggered adoption with heterogeneity.\n\nReport the numerical value of $\\hat{\\beta}$ as the final answer, expressed in days per patient, and round your answer to four significant figures. Do not include units in your final boxed answer.",
            "solution": "The problem requires computing the two-way fixed effects (TWFE) estimate $\\hat{\\beta}$ by applying the Frisch–Waugh–Lovell (FWL) theorem. The TWFE estimate is obtained from a weighted least squares regression of the demeaned outcome, $\\tilde{y}_{gt}$, on the demeaned treatment indicator, $\\tilde{D}_{gt}$. The demeaning process subtracts cohort and time period means from each variable.\n\nFirst, we calculate the necessary cohort, time, and grand averages for the outcome ($y$) and treatment indicator ($D$), using the cohort sizes ($n_E=100, n_L=50, n_N=50$) as weights.\n-   Cohort averages over time ($\\bar{X}_{g\\cdot}$):\n    -   $\\bar{y}_{E\\cdot} = 6.75$, $\\bar{y}_{L\\cdot} = 6.5$, $\\bar{y}_{N\\cdot} = 5.5$\n    -   $\\bar{D}_{E\\cdot} = 1$, $\\bar{D}_{L\\cdot} = 0.5$, $\\bar{D}_{N\\cdot} = 0$\n-   Weighted time averages across cohorts ($\\bar{X}_{\\cdot t}$):\n    -   $\\bar{y}_{\\cdot 0} = 5.5$, $\\bar{y}_{\\cdot 1} = 7.25$\n    -   $\\bar{D}_{\\cdot 0} = 0.5$, $\\bar{D}_{\\cdot 1} = 0.75$\n-   Weighted grand averages ($\\bar{X}_{\\cdot\\cdot}$):\n    -   $\\bar{y}_{\\cdot\\cdot} = 6.375$, $\\bar{D}_{\\cdot\\cdot} = 0.625$\n\nUsing the demeaning formula $\\tilde{X}_{gt} = X_{gt} - \\bar{X}_{g\\cdot} - \\bar{X}_{\\cdot t} + \\bar{X}_{\\cdot\\cdot}$, we compute the demeaned variables for each of the six cells.\n-   Demeaned variables for $\\tilde{y}_{gt}$: $\\tilde{y}_{E0}=0.125, \\tilde{y}_{E1}=-0.125, \\tilde{y}_{L0}=-0.625, \\tilde{y}_{L1}=0.625, \\tilde{y}_{N0}=0.375, \\tilde{y}_{N1}=-0.375$.\n-   Demeaned variables for $\\tilde{D}_{gt}$: $\\tilde{D}_{E0}=0.125, \\tilde{D}_{E1}=-0.125, \\tilde{D}_{L0}=-0.375, \\tilde{D}_{L1}=0.375, \\tilde{D}_{N0}=0.125, \\tilde{D}_{N1}=-0.125$.\n\nThe TWFE estimate is $\\hat{\\beta} = \\frac{\\sum_{g,t} n_g \\tilde{D}_{gt} \\tilde{y}_{gt}}{\\sum_{g,t} n_g \\tilde{D}_{gt}^2}$.\n-   Numerator: $\\sum n_g \\tilde{D}_{gt} \\tilde{y}_{gt} = 100(0.03125) + 50(0.46875) + 50(0.09375) = 3.125 + 23.4375 + 4.6875 = 31.25$.\n-   Denominator: $\\sum n_g \\tilde{D}_{gt}^2 = 100(0.03125) + 50(0.28125) + 50(0.03125) = 3.125 + 14.0625 + 1.5625 = 18.75$.\n-   $\\hat{\\beta} = \\frac{31.25}{18.75} = \\frac{5}{3} \\approx 1.6667$.\n\n**Decomposition and Interpretation:**\nThe TWFE estimator can be understood as a weighted average of all possible $2\\times2$ DID estimators in the data. In this staggered adoption setting, there are two such DID estimators:\n1.  **Late vs. Never Adopters (L vs. N):** This is a clean comparison. The DID estimate is $\\hat{\\beta}_{LN} = \\frac{\\Delta y_L - \\Delta y_N}{\\Delta D_L - \\Delta D_N} = \\frac{(8-5) - (6-5)}{(1-0) - (0-0)} = \\frac{3 - 1}{1} = 2$.\n2.  **Late vs. Early Adopters (L vs. E):** This comparison uses an already-treated group (E) as a control for a newly-treated group (L). The DID estimate is $\\hat{\\beta}_{LE} = \\frac{\\Delta y_L - \\Delta y_E}{\\Delta D_L - \\Delta D_E} = \\frac{(8-5) - (7.5-6)}{(1-0) - (0-0)} = \\frac{3 - 1.5}{1} = 1.5$.\n\nThe TWFE estimator $\\hat{\\beta}$ is a weighted average of these two components, with weights proportional to cohort sizes and the variance of treatment assignment. The weights are $s_{LN} = 1/3$ and $s_{LE} = 2/3$. Thus, $\\hat{\\beta} = \\frac{1}{3}(2) + \\frac{2}{3}(1.5) = \\frac{2}{3} + 1 = \\frac{5}{3}$.\n\nThe issue of **negative weights** arises when treatment effects are heterogeneous (i.e., they vary over time or across groups). The L vs. E comparison is contaminated because the change in outcomes for the early group ($\\Delta y_E$) includes not just the common time trend but also any change in their own treatment effect from period 0 to 1. If we denote the true effect for group $g$ at time $t$ as $\\beta_{gt}$, then the L vs. E comparison actually estimates $\\beta_{L1} - (\\beta_{E1} - \\beta_{E0})$. When this is averaged into the final $\\hat{\\beta}$, the term $\\beta_{E1}$ enters with a negative weight. This means that if the treatment effect for the early group grows over time ($\\beta_{E1} > \\beta_{E0}$), it can downwardly bias the overall estimate, a key insight of modern DID research.\n\nRounding the final numerical value to four significant figures gives $1.667$.",
            "answer": "$$\n\\boxed{1.667}\n$$"
        },
        {
            "introduction": "The entire credibility of a Difference-in-Differences analysis rests on the parallel trends assumption—the idea that the treatment and control groups would have followed similar paths in the absence of the intervention. While this assumption is fundamentally untestable, we can look for warning signs that it might be violated. This thought experiment challenges you to predict what an event-study plot, a key diagnostic tool, would look like if the policy had no effect but underlying trends were not parallel . Mastering this concept is crucial for critically evaluating the validity of DiD research.",
            "id": "4792450",
            "problem": "A hospital network evaluates the effect of a new antibiotic stewardship protocol on inappropriate antibiotic days per $100$ patient-days. Let $i$ index hospitals and $t$ index months. Some hospitals implement the protocol at month $T_i$, while others never implement during the study window. The outcome is $Y_{it}$ and the indicator that hospital $i$ is ever treated is $D_i \\in \\{0,1\\}$. The analytical goal is to use difference-in-differences to recover the causal effect of the protocol, acknowledging staggered adoption.\n\nAssume the following potential outcomes formulation: $Y_{it}(d)$ is the outcome at time $t$ for unit $i$ if the treatment state is $d \\in \\{0,1\\}$. Two key foundations apply:\n- The difference-in-differences estimand relies on the parallel trends condition in potential outcomes, which requires that for all $t$, $$\\mathbb{E}\\big[Y_{it}(0) - Y_{i,t-1}(0) \\mid D_i = 1\\big] = \\mathbb{E}\\big[Y_{it}(0) - Y_{i,t-1}(0) \\mid D_i = 0\\big].$$\n- If the protocol has no causal effect, then for all $i$ and $t$, $$Y_{it}(1) = Y_{it}(0).$$\n\nSuppose the true policy has no effect, but treated hospitals and control hospitals have different underlying time trends in the untreated state, so the parallel trends assumption is violated. Consider an event-study specification implemented via Two-Way Fixed Effects (TWFE), in which you define event time relative to a “policy date” and estimate binned lead and lag coefficients.\n\nYou are asked to construct a placebo policy date test that probes for spurious treatment effects arising from the violation of parallel trends and to identify the expected qualitative pattern of the estimated event-study coefficients under the maintained data-generating process in which $Y_{it}(1) = Y_{it}(0)$ but trends differ between groups.\n\nWhich option best describes both (i) a valid construction of the placebo policy date test and (ii) the expected pattern of event-study coefficients $\\beta_\\ell$ across leads and lags when the true policy has no effect but treated and control units have different underlying trends?\n\nA. Redefine the policy date for treated hospitals by shifting it earlier by $k$ months, $$T_i^{\\text{pl}} = T_i - k,$$ leave control hospitals untreated, and re-estimate the same TWFE event-study on the identical sample as the original analysis, using indicators for event time $\\ell = t - T_i^{\\text{pl}}$ (omitting one pre-period as reference), with unit and month fixed effects and standard errors clustered by hospital. If the protocol truly has no effect but trends differ, then the estimated coefficients $\\beta_\\ell$ will exhibit a smooth, statistically significant trend across both pre-policy leads ($\\ell < 0$) and post-policy lags ($\\ell \\ge 0$) with no discrete jump at $\\ell = 0$, reflecting the underlying difference in slopes rather than a causal effect.\n\nB. Keep the original policy dates, drop all pre-treatment observations, and estimate a single post-policy indicator in a TWFE regression. If the protocol has no effect but trends differ, then pre-policy coefficients will be approximately zero, and there will be a discrete jump at the policy date followed by flat post-policy coefficients, which indicates a causal effect.\n\nC. Randomly assign placebo policy dates to control hospitals and treat them as if they had implemented the protocol, then estimate a TWFE event-study combining these reassigned controls with the original treated hospitals. If the protocol has no effect but trends differ, then the event-study coefficients will oscillate around zero with alternating signs across leads and lags, revealing no systematic pattern.\n\nD. Set the placebo policy date later than the actual policy date, $$T_i^{\\text{pl}} = T_i + k,$$ and estimate a TWFE event-study. If the protocol has no effect but trends differ, then the pre-policy coefficients will all be near zero, and the post-policy coefficients will show an immediate discrete jump at $\\ell = 0$ followed by attenuation to zero, which confirms parallel trends.\n\nSelect the single best answer.",
            "solution": "This problem tests the understanding of the parallel trends assumption and a key diagnostic tool: the event-study plot combined with a placebo test. We are given a scenario where the parallel trends assumption is violated (treated and control groups have different underlying trends) but there is no actual treatment effect.\n\n**Expected Pattern of Event-Study Coefficients:**\nAn event-study model estimates coefficients ($\\beta_\\ell$) for periods leading up to (leads, $\\ell < 0$) and following (lags, $\\ell \\ge 0$) a treatment event. The lead coefficients serve as a test for parallel trends; if the assumption holds, they should be close to zero. The lag coefficients estimate the treatment's dynamic effects.\n\nIn the given scenario, the treatment has no effect ($Y_{it}(1) = Y_{it}(0)$), so any non-zero coefficients must be spurious. Because the treated and control groups have different underlying trends, the TWFE estimator will mistakenly attribute this differential trend to the event-study indicators. Consequently, the coefficients for the pre-treatment leads ($\\ell < 0$) will not be zero; instead, they will trace out the pre-existing differential trend. Since there is no actual treatment effect to cause a change in trajectory at the policy date ($\\ell=0$), this pre-existing trend will simply continue into the post-treatment period. The plot of $\\beta_\\ell$ against event time $\\ell$ would therefore show a smooth, continuous trend line passing through $\\ell=0$ with no discrete jump.\n\n**Valid Placebo Test:**\nA good placebo test should reveal whether the estimation method produces a spurious \"effect\" when no true effect is present. A standard approach is to shift the policy date for treated units to an earlier, known pre-treatment period (e.g., $T_i^{\\text{pl}} = T_i - k$). This creates a fake \"post-treatment\" window where no treatment actually occurred. If the DiD model is valid (i.e., parallel trends hold), this placebo test should yield no effect. However, if the underlying problem is a differential trend, this test will correctly detect it by producing a spurious \"effect\" around the fake policy date, mirroring the pattern described above.\n\n**Evaluating the Options:**\n-   **Option A** correctly describes both a valid placebo test (shifting the policy date earlier) and the expected result under the specified conditions: a smooth, continuous trend in the event-study coefficients with no jump at the event date, reflecting the underlying violation of parallel trends.\n-   **Option B** is incorrect because it proposes discarding the pre-treatment data, which is essential for a DiD analysis and for checking the parallel trends assumption.\n-   **Option C** proposes a complex placebo design and incorrectly predicts an oscillating pattern. The differential trend would produce a systematic, not random, pattern.\n-   **Option D** is incorrect because it predicts that pre-policy coefficients will be near zero, which contradicts the premise that parallel trends are violated. A pre-existing trend is the hallmark of this violation.\n\nTherefore, Option A provides the most accurate description of both the test and its expected outcome.",
            "answer": "$$\\boxed{A}$$"
        }
    ]
}
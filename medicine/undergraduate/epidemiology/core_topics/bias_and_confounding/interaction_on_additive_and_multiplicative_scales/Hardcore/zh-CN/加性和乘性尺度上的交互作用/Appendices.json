{
    "hands_on_practices": [
        {
            "introduction": "理论是基础，但只有通过实践才能真正掌握流行病学中交互作用的精髓。我们的第一个练习将直接挑战一个核心概念：交互作用的结论依赖于所选择的度量尺度。通过分析一个假设的数据集，您将亲身体会到，为何同一组风险值可以在相加尺度上显示协同作用，而在相乘尺度上却显示拮抗作用。这个练习是理解两种交互作用模型之间数学差异的基石，也是评估联合暴露效应的关键第一步。",
            "id": "4585305",
            "problem": "一项前瞻性队列研究评估了两种二元暴露，$E_1$ 和 $E_2$，与一种二元疾病结局 $D$ 的关系。令 $p_{ij} = P(D=1 \\mid E_1=i, E_2=j)$ 表示分层特定风险，其中 $i,j \\in \\{0,1\\}$。假设观察到的风险如下：\n- $p_{00} = 0.10$,\n- $p_{10} = 0.20$,\n- $p_{01} = 0.25$,\n- $p_{11} = 0.40$.\n\n使用基于绝对效应（风险差）和相对效应（风险比）的标准流行病学交互作用定义，选择能够正确描述这些数据在相加尺度和相乘尺度上交互作用的存在和方向，并能准确用文字解释为什么在这两种尺度上的结论可能不同的选项。\n\nA. 在相加尺度上存在正向交互作用，在相乘尺度上没有交互作用，因为联合效应等于各个相对效应的乘积，但超过了各个绝对效应的总和。\n\nB. 在相加尺度上存在正向交互作用，在相乘尺度上存在负向交互作用，因为联合效应超过了各个绝对效应的总和，但小于各个相对效应的乘积。\n\nC. 在相加尺度上没有交互作用，但在相乘尺度上存在正向交互作用，因为联合效应等于绝对效应的总和，但超过了相对效应的乘积。\n\nD. 在两种尺度上都存在负向交互作用，因为联合效应既小于绝对效应的总和，也小于相对效应的乘积。",
            "solution": "在尝试任何解答之前，需对问题陈述进行验证。\n\n### 步骤1：提取已知信息\n- 研究设计：一项前瞻性队列研究。\n- 暴露：两种二元暴露，表示为 $E_1$ 和 $E_2$。\n- 结局：一种二元疾病结局，表示为 $D$。\n- 分层特定风险：$p_{ij} = P(D=1 \\mid E_1=i, E_2=j)$，其中 $i,j \\in \\{0,1\\}$。\n- 观察到的风险值：\n  - $p_{00} = 0.10$ (风险对于 $E_1=0, E_2=0$)\n  - $p_{10} = 0.20$ (风险对于 $E_1=1, E_2=0$)\n  - $p_{01} = 0.25$ (风险对于 $E_1=0, E_2=1$)\n  - $p_{11} = 0.40$ (风险对于 $E_1=1, E_2=1$)\n- 任务：在相加（风险差）和相乘（风险比）尺度上描述交互作用，并解释研究结果。\n\n### 步骤2：使用提取的已知信息进行验证\n1.  **科学依据：** 该问题使用了流行病学中标准的、明确定义的概念，包括前瞻性队列研究、风险、风险差、风险比，以及在相加和相乘尺度上评估统计交互作用。这些概念是该领域的基础。\n2.  **问题明确：** 提供了所有必要的数据（四个分层特定风险）来计算所需的效应和交互作用度量。问题明确无歧义，要求进行特定的分析和解释。可以确定唯一的解决方案。\n3.  **客观性：** 问题陈述使用了精确的数学和流行病学术语。数据是定量的，问题是分析性的，没有主观解释的余地。\n4.  **一致性和完整性：** 问题是自洽的。提供的风险是有效的概率值（即，它们位于区间 $[0, 1]$ 内）。没有内部矛盾。\n\n### 步骤3：结论与行动\n问题陈述是**有效的**，因为其科学合理、问题明确且客观。现在将推导解决方案。\n\n### 解答推导\n\n交互作用，或称效应修饰，评估一种暴露对结局的影响是否依赖于另一种暴露的存在。评估取决于测量尺度：相加尺度（基于风险差）或相乘尺度（基于风险比）。所有比较的参照组是两种因素均未暴露的组（$E_1=0, E_2=0$），其基线风险为 $p_{00} = 0.10$。\n\n#### 1. 相加尺度交互作用分析\n\n在相加尺度上，我们比较风险差（RD）。没有交互作用意味着联合暴露的超额风险等于每种单独暴露的超额风险之和。\n\n- 基线风险为 $p_{00} = 0.10$。\n- 仅由 $E_1$ 引起的超额风险是：\n  $$RD_{10} = p_{10} - p_{00} = 0.20 - 0.10 = 0.10$$\n- 仅由 $E_2$ 引起的超额风险是：\n  $$RD_{01} = p_{01} - p_{00} = 0.25 - 0.10 = 0.15$$\n- 在相加模型下（即没有相加交互作用），联合暴露（$E_1=1, E_2=1$）的预期超额风险是各个超额风险之和：\n  $$RD_{\\text{expected}} = RD_{10} + RD_{01} = 0.10 + 0.15 = 0.25$$\n- 联合暴露的观察超额风险是：\n  $$RD_{11} = p_{11} - p_{00} = 0.40 - 0.10 = 0.30$$\n- 为了评估交互作用，我们将观察到的联合超额风险（$RD_{11}$）与预期的联合超额风险（$RD_{10} + RD_{01}$）进行比较：\n  $$RD_{11} \\text{ vs. } RD_{10} + RD_{01}$$\n  $$0.30 \\text{ vs. } 0.25$$\n- 由于 $0.30 > 0.25$，观察到的联合超额风险大于各个超额风险之和。这表明在**相加尺度上存在正向交互作用**（也称为协同作用）。交互作用的大小为 $RD_{11} - (RD_{10} + RD_{01}) = 0.30 - 0.25 = 0.05$。\n\n#### 2. 相乘尺度交互作用分析\n\n在相乘尺度上，我们比较风险比（RR）。没有交互作用意味着联合风险比等于各个风险比的乘积。\n\n- 基线风险为 $p_{00} = 0.10$。\n- 仅由 $E_1$ 引起的风险比是：\n  $$RR_{10} = \\frac{p_{10}}{p_{00}} = \\frac{0.20}{0.10} = 2.0$$\n- 仅由 $E_2$ 引起的风险比是：\n  $$RR_{01} = \\frac{p_{01}}{p_{00}} = \\frac{0.25}{0.10} = 2.5$$\n- 在相乘模型下（即没有相乘交互作用），联合暴露（$E_1=1, E_2=1$）的预期风险比是各个风险比的乘积：\n  $$RR_{\\text{expected}} = RR_{10} \\times RR_{01} = 2.0 \\times 2.5 = 5.0$$\n- 联合暴露的观察风险比是：\n  $$RR_{11} = \\frac{p_{11}}{p_{00}} = \\frac{0.40}{0.10} = 4.0$$\n- 为了评估交互作用，我们将观察到的联合风险比（$RR_{11}$）与预期的联合风险比（$RR_{10} \\times RR_{01}$）进行比较：\n  $$RR_{11} \\text{ vs. } RR_{10} \\times RR_{01}$$\n  $$4.0 \\text{ vs. } 5.0$$\n- 由于 $4.0  5.0$，观察到的联合风险比小于各个风险比的乘积。这表明在**相乘尺度上存在负向交互作用**（也称为拮抗作用）。\n\n#### 3. 差异解释\n\n关于交互作用（存在、不存在或方向）的结论在相加尺度和相乘尺度之间可能不同，因为“无交互作用”的定义在每个尺度上数学上是不同的。\n- **相加无交互作用模型：** $p_{11} - p_{00} = (p_{10} - p_{00}) + (p_{01} - p_{00})$\n- **相乘无交互作用模型：** $p_{11} / p_{00} = (p_{10} / p_{00}) \\times (p_{01} / p_{00})$\n这两个条件是不等价的。满足一个条件的数据集通常不会满足另一个条件。因此，同一组风险可以在一个尺度上表现出正向交互作用，在另一个尺度上表现出负向交互作用，正如本问题所示。\n\n### 逐项分析\n\n**A. 在相加尺度上存在正向交互作用，在相乘尺度上没有交互作用，因为联合效应等于各个相对效应的乘积，但超过了各个绝对效应的总和。**\n- “在相加尺度上存在正向交互作用”：这是**正确的**。我们的计算显示 $RD_{11} > RD_{10} + RD_{01}$。\n- “在相乘尺度上没有交互作用”：这是**不正确的**。我们发现存在负向交互作用（$RR_{11}  RR_{10} \\times RR_{01}$）。\n- 因此，所提供的理由是有缺陷的。\n选项A的结论：**不正确**。\n\n**B. 在相加尺度上存在正向交互作用，在相乘尺度上存在负向交互作用，因为联合效应超过了各个绝对效应的总和，但小于各个相对效应的乘积。**\n- “在相加尺度上存在正向交互作用”：这是**正确的**。\n- “在相乘尺度上存在负向交互作用”：这是**正确的**。\n- “...因为联合效应超过了各个绝对效应的总和...”：这个表述指的是相加交互作用的检验，$RD_{11} > RD_{10} + RD_{01}$（将“联合效应”解释为 $RD_{11}$，即联合超额风险，将“各个绝对效应的总和”解释为 $RD_{10}+RD_{01}$）。这支持了正向相加交互作用的结论，是**正确的**。\n- “...但小于各个相对效应的乘积。”：这个表述指的是相乘交互作用的检验，$RR_{11}  RR_{10} \\times RR_{01}$（将“联合效应”解释为 $RR_{11}$，即联合相对风险，将“各个相对效应的乘积”解释为 $RR_{10} \\times RR_{01}$）。这支持了负向相乘交互作用的结论，是**正确的**。\n选项B的结论：**正确**。\n\n**C. 在相加尺度上没有交互作用，但在相乘尺度上存在正向交互作用，因为联合效应等于绝对效应的总和，但超过了相对效应的乘积。**\n- “在相加尺度上没有交互作用”：这是**不正确的**。我们发现存在正向交互作用。\n- “在相乘尺度上存在正向交互作用”：这是**不正确的**。我们发现存在负向交互作用。\n- 根据数据，整个陈述在事实上是错误的。\n选项C的结论：**不正确**。\n\n**D. 在两种尺度上都存在负向交互作用，因为联合效应既小于绝对效应的总和，也小于相对效应的乘积。**\n- “在两种尺度上都存在负向交互作用”：这是**不正确的**。在相加尺度上存在正向交互作用。\n- “...联合效应小于...绝对效应的总和...”：这是**不正确的**。联合超额风险（$0.30$）大于各个超额风险的总和（$0.25$）。\n选项D的结论：**不正确**。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "在现实世界中，分析工作始于原始数据，而不仅仅是给定的风险值。本练习模拟了一项关于吸烟与石棉暴露对肺癌风险的经典队列研究，要求您首先从病例和人群计数中计算风险，然后再评估交互作用。这个案例研究突出了相加尺度对于评估超额病例数等公共卫生影响的重要性，并引入了如何向公共卫生领域的同行与决策者清晰地传达这些复杂发现的挑战。",
            "id": "4603539",
            "problem": "一项包含$10000$名参与者的前瞻性队列研究进行了为期$10$年的随访，以研究肺癌$Y$的发病情况。在基线时记录了两种二元暴露：吸烟 $A \\in \\{0,1\\}$ 和职业性石棉暴露 $B \\in \\{0,1\\}$。该队列根据 $(A,B)$ 被划分为四个互斥组，随访期间各组的肺癌病例数和总参与者人数如下：\n- $(A=0,B=0)$：$2500$名参与者中有$25$例病例，\n- $(A=1,B=0)$：$2500$名参与者中有$75$例病例，\n- $(A=0,B=1)$：$2500$名参与者中有$50$例病例，\n- $(A=1,B=1)$：$2500$名参与者中有$150$例病例。\n\n假设没有失访，也没有对组间比较产生差异性影响的竞争风险。仅基于这些数据，并使用风险、风险差和风险比的基本定义，哪个选项最能反映在相加尺度和相乘尺度上交互作用的存在与否，以及应如何向公共卫生领域的受众传达这一信息？\n\nA. 不存在交互作用，因为联合效应等于个体效应的乘积；沟通时应简单地说明“无交互作用”。\n\nB. 在相加尺度上存在正向交互作用，但在相乘尺度上不存在；沟通时应明确指出所用的尺度，并强调联合暴露所致的绝对超额风险超过了个体风险之和。\n\nC. 交互作用只应使用比值比进行评估；因为该疾病相对罕见，风险比在评估交互作用时具有误导性。\n\nD. 因为合并风险差等于个体风险差之和，所以在任何尺度上都不存在交互作用；研究者应该用一个单一的“协同指数”来总结研究结果，而不区分尺度。",
            "solution": "我们从核心的流行病学定义出发。令 $R_{ab} = \\Pr(Y=1 \\mid A=a,B=b)$ 表示 $(a,b)$ 组的风险。在 $B=b$ 时，暴露 $A$ 的风险差 (RD) 为 $\\text{RD}_{A \\mid b} = R_{1b} - R_{0b}$，风险比 (RR) 为 $\\text{RR}_{A \\mid b} = R_{1b} / R_{0b}$。对于暴露 $B$ 也可定义类似的量。“无交互作用”的概念取决于所用的尺度：\n- 在相加尺度（风险差）上，“无交互作用”意味着联合超额风险等于个体超额风险之和，即 $R_{11} - R_{00} = (R_{10} - R_{00}) + (R_{01} - R_{00})$。偏离此关系表明存在相加交互作用，通常用交互作用相对超额风险 (RERI) 来概括，其定义为 $\\text{RERI} = R_{11} - R_{10} - R_{01} + R_{00}$。\n- 在相乘尺度（风险比）上，“无交互作用”意味着联合风险比等于个体风险比的乘积，即 $R_{11}/R_{00} = (R_{10}/R_{00}) \\times (R_{01}/R_{00})$。\n\n步骤 1：根据病例数计算各组的风险。\n- $R_{00} = 25/2500 = 0.01$，\n- $R_{10} = 75/2500 = 0.03$，\n- $R_{01} = 50/2500 = 0.02$，\n- $R_{11} = 150/2500 = 0.06$。\n\n步骤 2：通过风险差和交互作用相对超额风险 (RERI) 评估相加交互作用。\n- 联合超额风险：$R_{11} - R_{00} = 0.06 - 0.01 = 0.05$。\n- 个体超额风险之和：$(R_{10} - R_{00}) + (R_{01} - R_{00}) = (0.03 - 0.01) + (0.02 - 0.01) = 0.02 + 0.01 = 0.03$。\n- 与相加性的偏离：$0.05 - 0.03 = 0.02 > 0$，表明存在正向相加交互作用。\n- 等价地，$\\text{RERI} = R_{11} - R_{10} - R_{01} + R_{00} = 0.06 - 0.03 - 0.02 + 0.01 = 0.02 > 0$，证实了存在正向相加交互作用。\n\n步骤 3：通过风险比评估相乘交互作用。\n- $\\text{RR}_{A \\mid B=0} = R_{10}/R_{00} = 0.03/0.01 = 3$。\n- $\\text{RR}_{B \\mid A=0} = R_{01}/R_{00} = 0.02/0.01 = 2$。\n- 联合风险比：$R_{11}/R_{00} = 0.06/0.01 = 6$。\n- 个体风险比的乘积：$3 \\times 2 = 6$。\n- 由于 $R_{11}/R_{00}$ 等于 $(R_{10}/R_{00}) \\times (R_{01}/R_{00})$，因此不存在相乘交互作用。\n\n步骤 4：沟通启示。最佳实践是明确指出评估交互作用所用的尺度，并使信息与受众相符。对于公共卫生决策而言，相加交互作用通常更易于直接解释，因为它关系到联合暴露所致的、超过个体暴露效应之和的超额病例数。在此，由交互作用引起的绝对超额风险为 $0.02$，这在 $2500$ 名联合暴露人群中，相当于在 $10$ 年内比相加效应多出 $0.02 \\times 2500 = 50$ 例病例。\n\n逐项分析选项：\n- A. 声明“无交互作用”而未指明尺度，并以联合效应等于个体效应的乘积为理由。虽然确实不存在相乘交互作用，但存在正向相加交互作用。不指明尺度就宣称“无交互作用”是一个常见的沟通陷阱。结论：错误。\n- B. 准确地指出了在相加尺度上存在正向交互作用，但在相乘尺度上不存在，并建议明确尺度，强调超过个体风险之和的绝对超额风险，这与最佳实践相符。结论：正确。\n- C. 声称交互作用只应使用比值比进行评估，并且在疾病罕见时风险比具有误导性。在可以直接估计风险的队列研究中，风险比是合适的。比值比仅在罕见病假设下近似于风险比，并且不是评估交互作用所必需的；此外，当风险或率可用时，可以也应该在明确定义的尺度（相加或相乘）上评估交互作用。结论：错误。\n- D. 声称合并风险差等于个体风险差之和，因此在任何尺度上都不存在交互作用，并建议使用单一的“协同指数”而不区分尺度。这个前提是错误的，因为 $0.05 \\neq 0.03$；存在正向相加交互作用。此外，将沟通简化为单一指数会掩盖不同尺度之间的关键区别。结论：错误。",
            "answer": "$$\\boxed{B}$$"
        },
        {
            "introduction": "现代流行病学研究在很大程度上依赖于计算工具，将理论转化为可执行的分析流程至关重要。最后的这个练习要求您将相加和相乘交互作用的计算公式转化为计算机程序，并应用于多个测试案例。这不仅能检验您对交互作用指标背后逻辑的深刻理解，还能培养您高效、准确地分析数据的实用技能，为处理更真实、更庞大的数据集做好准备。",
            "id": "4603528",
            "problem": "给定一个二元暴露对 $(E_1,E_2)$ 和一个二元结局 $Y$。对于每个联合暴露水平 $(E_1=i,E_2=j)$（其中 $i \\in \\{0,1\\}$ 且 $j \\in \\{0,1\\}$），您可以观察到病例数 $a_{ij}$ 和个体总数 $n_{ij}$。将每个分层中的风险（发病比例）定义为 $p_{ij} = a_{ij}/n_{ij}$。参考分层为 $(i,j)=(0,0)$。\n\n基本原理：\n- 风险 $p_{ij}$ 是分层 $(i,j)$ 内发生结局的概率，当 $n_{ij}$ 足够大时，通过观测比例 $a_{ij}/n_{ij}$ 进行估计。\n- 相对风险 (RR) 定义为 $\\mathrm{RR}_{ij} = p_{ij}/p_{00}$，前提是 $p_{00} \\neq 0$。\n- 效应的相加独立性定义为：联合风险差等于边际风险差之和，即 $p_{11}-p_{00} = (p_{10}-p_{00}) + (p_{01}-p_{00})$。\n- 效应的相乘独立性定义为：联合相对风险等于边际相对风险之积，即 $\\mathrm{RR}_{11} = \\mathrm{RR}_{10}\\cdot \\mathrm{RR}_{01}$。\n\n任务：\n1. 仅使用这些定义，推导明确的表达式来量化与相加独立性和相乘独立性的偏离。您的相加尺度指标必须是一个风险的实值对比，在相加独立性下等于 $0$，对于超相加（协同）联合效应为正，对于亚相加（拮抗）联合效应为负。您的相乘尺度指标必须是一个实值比率，在相乘独立性下等于 $1$，对于超相乘协同作用大于 $1$，对于拮抗作用小于 $1$。\n2. 实现一个程序，该程序：\n   - 从 $(a_{ij},n_{ij})$ 为每个 $(i,j)\\in\\{0,1\\}^2$ 计算 $p_{ij}$。\n   - 根据推导出的表达式计算您的相加尺度指标和相乘尺度指标。\n   - 对于每个测试用例，返回一个列表，其中包含：相加指标值、相乘指标值、一个布尔值（如果相加指标严格大于 $0$ 则为 `True`，否则为 `False`），以及另一个布尔值（如果相乘指标严格大于 $1$ 则为 `True`，否则为 `False`）。\n   - 将两个指标值四舍五入到 $6$ 位小数。不要使用百分号；所有量都必须是小数。\n\n测试套件：\n使用以下 $4$ 个测试用例。每个测试用例由四个有序对 $(a_{ij},n_{ij})$ 指定，顺序为 $(00),(10),(01),(11)$:\n- 测试用例 1：$(a_{00},n_{00})=(50,1000)$，$(a_{10},n_{10})=(100,1000)$，$(a_{01},n_{01})=(120,1000)$，$(a_{11},n_{11})=(300,1000)$。\n- 测试用例 2：$(a_{00},n_{00})=(100,1000)$，$(a_{10},n_{10})=(200,1000)$，$(a_{01},n_{01})=(250,1000)$，$(a_{11},n_{11})=(350,1000)$。\n- 测试用例 3：$(a_{00},n_{00})=(50,1000)$，$(a_{10},n_{10})=(100,1000)$，$(a_{01},n_{01})=(150,1000)$，$(a_{11},n_{11})=(300,1000)$。\n- 测试用例 4：$(a_{00},n_{00})=(200,1000)$，$(a_{10},n_{10})=(250,1000)$，$(a_{01},n_{01})=(350,1000)$，$(a_{11},n_{11})=(300,1000)$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含一个用方括号括起来的逗号分隔列表形式的结果，每个元素对应一个测试用例，并且本身也是一个列表，顺序为 [相加指标, 相乘指标, 相加正值布尔, 相乘正值布尔]。例如，整体结构必须类似于 $[[x_{1,1},x_{1,2},b_{1,1},b_{1,2}],[x_{2,1},x_{2,2},b_{2,1},b_{2,2}],[x_{3,1},x_{3,2},b_{3,1},b_{3,2}],[x_{4,1},x_{4,2},b_{4,1},b_{4,2}]]$，其中 $x$ 使用四舍五入到 $6$ 位的小数值，$b$ 使用布尔值。",
            "solution": "该问题已经过验证。\n\n### 步骤 1：提取已知条件\n- 暴露：一个二元暴露对 $(E_1, E_2)$，其中 $E_1, E_2 \\in \\{0, 1\\}$。\n- 结局：一个二元结局 $Y$。\n- 数据：对于每个联合暴露水平 $(i,j)$（其中 $i \\in \\{0,1\\}$ 且 $j \\in \\{0,1\\}$），给定病例数 $a_{ij}$ 和个体总数 $n_{ij}$。\n- 风险定义：分层 $(i,j)$ 中的风险（发病比例）为 $p_{ij} = a_{ij}/n_{ij}$。\n- 参考分层：用于比较的参考水平为 $(i,j)=(0,0)$。\n- 相对风险 (RR) 定义：$\\mathrm{RR}_{ij} = p_{ij}/p_{00}$，前提是 $p_{00} \\neq 0$。\n- 相加独立性定义：$p_{11}-p_{00} = (p_{10}-p_{00}) + (p_{01}-p_{00})$。\n- 相乘独立性定义：$\\mathrm{RR}_{11} = \\mathrm{RR}_{10} \\cdot \\mathrm{RR}_{01}$。\n- 任务要求：推导相加和相乘交互作用指标，并实现一个程序来为给定的测试用例计算它们。相加指标必须是一个对比值，独立时为 $0$，协同作用时为正，拮抗作用时为负。相乘指标必须是一个比率，独立时为 $1$，协同作用时大于 $1$，拮抗作用时小于 $1$。\n- 测试用例：提供了四组关于 $(a_{00}, n_{00})$、$(a_{10}, n_{10})$、$(a_{01}, n_{01})$ 和 $(a_{11}, n_{11})$ 的数据。\n\n### 步骤 2：使用提取的已知条件进行验证\n- **科学依据**：该问题牢固地植根于流行病学的基本原理，特别是两种风险因素之间交互作用的衡量。风险、风险差、相对风险以及相加和相乘交互作用的定义都是该领域的标准和公认概念。\n- **适定性**：问题定义清晰。它提供了推导所需指标和执行计算所需的所有必要定义和数据。所有测试用例都满足条件 $p_{00} \\neq 0$（因为 $a_{00} > 0$），确保了相对风险的定义是明确的。根据所提供的定义，推导出的指标将是唯一的。\n- **客观性**：问题以精确的数学语言陈述，没有任何主观性或模糊性。\n\n该问题不存在科学上不健全、信息缺失或矛盾等任何缺陷。它是生物统计学和流行病学中的一个标准的、可形式化的问题。\n\n### 步骤 3：结论与行动\n问题是**有效的**。将提供完整的解决方案。\n\n### 交互作用指标的推导\n\n任务要求根据所提供的定义，推导出与相加和相乘独立性偏离的明确表达式。\n\n**1. 相加交互作用指标 ($I_A$)**\n\n相加独立性的定义条件是，与未暴露组（$E_1=0, E_2=0$）相比，同时暴露于两种因素的组（$E_1=1, E_2=1$）的超额风险等于仅暴露于单一因素的各组的超额风险之和。单独暴露于 $E_k$ 的超额风险是风险差 $\\mathrm{RD}_{k}$。\n\n单独暴露于 $E_1$ 的风险差为 $\\mathrm{RD}_{10} = p_{10} - p_{00}$。\n单独暴露于 $E_2$ 的风险差为 $\\mathrm{RD}_{01} = p_{01} - p_{00}$。\n同时暴露于 $E_1$ 和 $E_2$ 的风险差为 $\\mathrm{RD}_{11} = p_{11} - p_{00}$。\n\n相加独立性的条件是：\n$$p_{11} - p_{00} = (p_{10} - p_{00}) + (p_{01} - p_{00})$$\n这可以用风险差表示为 $\\mathrm{RD}_{11} = \\mathrm{RD}_{10} + \\mathrm{RD}_{01}$。\n\n为了量化与这种独立性的偏离，我们定义一个指标，称之为相加交互作用对比 ($I_A$)，即观测到的联合效应与相加性假设下预期联合效应之间的差值。\n$$I_A = \\text{(观测的联合超额风险)} - \\text{(相加性下的预期联合超额风险)}$$\n$$I_A = (p_{11} - p_{00}) - \\left( (p_{10} - p_{00}) + (p_{01} - p_{00}) \\right)$$\n简化此表达式可得到相加交互作用指标的公式：\n$$I_A = p_{11} - p_{10} - p_{01} + p_{00}$$\n该指标具有所需的性质：\n- 如果 $I_A = 0$，则效应是相加独立的。\n- 如果 $I_A > 0$，则联合效应大于个体效应之和，表明存在超相加交互作用（协同作用）。\n- 如果 $I_A  0$，则联合效应小于个体效应之和，表明存在亚相加交互作用（拮抗作用）。\n\n**2. 相乘交互作用指标 ($I_M$)**\n\n相乘独立性使用相对风险 (RR) 来定义。其条件是联合相对风险等于边际相对风险的乘积。\n$$\\mathrm{RR}_{11} = \\mathrm{RR}_{10} \\cdot \\mathrm{RR}_{01}$$\n其中 $\\mathrm{RR}_{ij} = p_{ij} / p_{00}$。\n\n为了量化与该模型的偏离，我们可以构建一个观测到的联合相对风险与相乘独立性假设下的预期联合相对风险的比率。我们称之为相乘交互作用比 ($I_M$)。\n$$I_M = \\frac{\\text{观测的联合RR}}{\\text{相乘性下的预期联合RR}} = \\frac{\\mathrm{RR}_{11}}{\\mathrm{RR}_{10} \\cdot \\mathrm{RR}_{01}}$$\n代入 $\\mathrm{RR}_{ij}$ 的定义：\n$$I_M = \\frac{ p_{11} / p_{00} }{ (p_{10} / p_{00}) \\cdot (p_{01} / p_{00}) }$$\n简化此表达式可得到相乘交互作用指标的公式：\n$$I_M = \\frac{p_{11} \\cdot p_{00}}{p_{10} \\cdot p_{01}}$$\n该指标具有所需的性质：\n- 如果 $I_M = 1$，则效应是相乘独立的。\n- 如果 $I_M > 1$，则联合效应大于个体效应的乘积，表明存在超相乘交互作用（协同作用）。\n- 如果 $I_M  1$，则联合效应小于个体效应的乘积，表明存在亚相乘交互作用（拮抗作用）。\n\n### 计算步骤\n\n对于每个提供的测试用例，执行以下计算步骤：\n1.  使用每个分层的数据 $(a_{ij}, n_{ij})$ 来计算所有四个分层 $(0,0), (1,0), (0,1), (1,1)$ 对应的风险 $p_{ij} = a_{ij} / n_{ij}$。\n2.  使用推导出的公式计算相加交互作用指标 $I_A$：$I_A = p_{11} - p_{10} - p_{01} + p_{00}$。\n3.  使用推导出的公式计算相乘交互作用指标 $I_M$：$I_M = (p_{11} \\cdot p_{00}) / (p_{10} \\cdot p_{01})$。对于所有测试用例，已确认 $p_{00}$、$p_{10}$ 和 $p_{01}$ 均不为零，因此除法总是有定义的。\n4.  评估协同作用的布尔条件：如果 $I_A > 0$，则将一个布尔标志设置为 $\\mathrm{True}$，否则设置为 $\\mathrm{False}$；如果 $I_M > 1$，则将第二个标志设置为 $\\mathrm{True}$，否则设置为 $\\mathrm{False}$。这些检查是在未四舍五入的值上执行的。\n5.  将 $I_A$ 和 $I_M$ 的值四舍五入到 $6$ 位小数。\n6.  将每个测试用例的结果组合成一个形式为 `[rounded_IA, rounded_IM, boolean_A, boolean_M]` 的列表。\n7.  最终输出是一个包含所有测试用例结果列表的列表。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n# from scipy import ...\n\ndef solve():\n    \"\"\"\n    Computes additive and multiplicative interaction indicators for epidemiological data.\n    \"\"\"\n    # Define the test cases from the problem statement.\n    # Each case is a list of tuples (a_ij, n_ij) in the order (00), (10), (01), (11).\n    test_cases = [\n        # Test case 1\n        [ (50, 1000), (100, 1000), (120, 1000), (300, 1000) ],\n        # Test case 2\n        [ (100, 1000), (200, 1000), (250, 1000), (350, 1000) ],\n        # Test case 3\n        [ (50, 1000), (100, 1000), (150, 1000), (300, 1000) ],\n        # Test case 4\n        [ (200, 1000), (250, 1000), (350, 1000), (300, 1000) ],\n    ]\n\n    results = []\n    for case in test_cases:\n        # Unpack case data\n        (a00, n00), (a10, n10), (a01, n01), (a11, n11) = case\n        \n        # Step 1: Compute risks (incidence proportions) p_ij\n        p00 = a00 / n00\n        p10 = a10 / n10\n        p01 = a01 / n01\n        p11 = a11 / n11\n\n        # Step 2: Compute additive interaction indicator (I_A)\n        # I_A = p_11 - p_10 - p_01 + p_00\n        additive_indicator = p11 - p10 - p01 + p00\n\n        # Step 3: Compute multiplicative interaction indicator (I_M)\n        # I_M = (p_11 * p_00) / (p_10 * p_01)\n        # Check for division by zero, although not necessary for the given test cases.\n        if p10 == 0 or p01 == 0:\n            # Handle cases where multiplicative interaction is undefined.\n            # For this problem, all denominators are non-zero.\n            multiplicative_indicator = float('nan') \n        else:\n            multiplicative_indicator = (p11 * p00) / (p10 * p01)\n            \n        # Step 4: Evaluate boolean conditions for synergy\n        # These are evaluated on the unrounded values.\n        is_additive_synergy = additive_indicator  0\n        is_multiplicative_synergy = multiplicative_indicator  1\n        \n        # Step 5: Round the indicators to 6 decimal places for output\n        rounded_additive = round(additive_indicator, 6)\n        rounded_multiplicative = round(multiplicative_indicator, 6)\n\n        # Step 6: Assemble the result list for the current case\n        case_result = [\n            rounded_additive, \n            rounded_multiplicative, \n            is_additive_synergy, \n            is_multiplicative_synergy\n        ]\n        results.append(case_result)\n\n    # Final print statement in the exact required format.\n    # The output is a string representation of the list of lists, with spaces removed.\n    print(str(results).replace(' ', ''))\n\nsolve()\n```"
        }
    ]
}
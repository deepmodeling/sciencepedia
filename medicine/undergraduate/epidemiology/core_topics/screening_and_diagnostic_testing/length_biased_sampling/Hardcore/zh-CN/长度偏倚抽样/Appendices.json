{
    "hands_on_practices": [
        {
            "introduction": "长度偏倚不仅会影响对平均病程的估计，还可能扭曲我们对暴露与疾病之间关联的理解。本练习通过一个假设但贴近现实的场景，展示了当一种暴露因素缩短病程但对发病率没有影响时，如何产生一个具有误导性的、看似有保护作用的比值比。通过这个练习，你将亲身体会到识别和理解长度偏倚在流行病学研究中的重要性。",
            "id": "4606204",
            "problem": "在一个人口规模恒定的封闭稳态社区中，研究一种慢性传染病。设 $E \\in \\{0,1\\}$ 表示暴露状态，其中 $E=1$ 表示暴露，$E=0$ 表示未暴露。假设以下科学上真实的条件成立：\n- 在任何时刻，该疾病都是罕见的。\n- 两个暴露分层中的瞬时发病率（单位：人年）相同，均等于 $\\lambda = 0.01$。\n- 暴露对发病率没有影响（因此，比较 $E=1$ 与 $E=0$ 的发病率比为 $1$），但它通过加速康复将平均病程缩短一半。具体而言，未暴露者的平均病程为 $\\bar{D}_{0} = 2$ 年，而暴露者的平均病程为 $\\bar{D}_{1} = 1$ 年。\n- 系统处于稳态，$\\lambda$ 和平均病程 $\\bar{D}_{0}$ 与 $\\bar{D}_{1}$ 在日历时间内保持不变，并且没有净迁移。\n\n在任意一个日历时间点进行一次横断面调查，以确定每个个体当前是否为现患病例。设 $p_{1}$ 和 $p_{0}$ 分别表示暴露分层和未暴露分层中的预期患病率。仅使用稳态和罕见病条件下的发病率和患病率的基本定义，计算本次横断面调查中比较暴露组与未暴露组的基于患病率的比值比（odds ratio (OR)）：\n$$\n\\text{OR}_{\\text{prev}} \\;=\\; \\frac{\\frac{p_{1}}{1 - p_{1}}}{\\frac{p_{0}}{1 - p_{0}}}.\n$$\n最终数值答案中不需要对偏倚方向进行解释，但您的推导过程应明确指出基于患病率的比值比相对于真实零发病效应是偏离还是偏向零值。将最终的比值比表示为精确值（不进行四舍五入）。以纯数（无单位）形式报告该比值比。",
            "solution": "问题陈述已经过验证，被认为是有效的。这是理论流行病学中一个有科学依据、定义明确且客观的问题。它呈现了一个经典的场景，用以说明患病率研究中病程偏倚抽样的概念，其中提供了推导出唯一、有意义解所需的所有信息。\n\n该问题要求根据横断面调查计算基于患病率的比值比（$\\text{OR}_{\\text{prev}}$）。在给定的稳态和罕见病条件下，核心的关联原则是患病率（$p$）、发病率（$\\lambda$）和平均病程（$\\bar{D}$）之间的关系。\n\n在稳态人群中，进入患病状态的个体速率（发病）必须与离开该状态的个体速率（康复或死亡）相平衡。对于罕见病，给定分层中的易感个体数量约等于总人口规模。该关系可表示为：\n$$\np \\approx \\lambda \\times \\bar{D}\n$$\n问题陈述明确指出了“罕见病条件”，表明应使用此近似。为了推导的目的，我们可以将此近似视为等式，这是此类理论问题的标准做法。\n\n设下标 $0$ 和 $1$ 分别表示未暴露（$E=0$）和暴露（$E=1$）的分层。我们已知：\n- 两个分层中的发病率相同：$\\lambda = 0.01 \\text{ 年}^{-1}$。\n- 未暴露分层中的平均病程为 $\\bar{D}_{0} = 2 \\text{ 年}$。\n- 暴露分层中的平均病程为 $\\bar{D}_{1} = 1 \\text{ 年}$。\n\n利用这个基本关系，我们可以计算每个分层中的患病率：\n\n对于未暴露分层（$E=0$）：\n$$\np_{0} = \\lambda \\times \\bar{D}_{0} = (0.01 \\text{ 年}^{-1}) \\times (2 \\text{ 年}) = 0.02\n$$\n\n对于暴露分层（$E=1$）：\n$$\np_{1} = \\lambda \\times \\bar{D}_{1} = (0.01 \\text{ 年}^{-1}) \\times (1 \\text{ 年}) = 0.01\n$$\n\n患病率 $p_{0}=0.02$ 和 $p_{1}=0.01$ 均很小，证实了罕见病假设的一致性。\n\n基于患病率的比值比 $\\text{OR}_{\\text{prev}}$ 定义为暴露组的患病优势除以未暴露组的患病优势。患病率为 $p$ 的组中，患病优势为 $\\frac{p}{1-p}$。\n因此，比值比的公式为：\n$$\n\\text{OR}_{\\text{prev}} = \\frac{\\frac{p_{1}}{1 - p_{1}}}{\\frac{p_{0}}{1 - p_{0}}}\n$$\n\n将计算出的患病率值代入此公式：\n$$\n\\text{OR}_{\\text{prev}} = \\frac{\\frac{0.01}{1 - 0.01}}{\\frac{0.02}{1 - 0.02}}\n$$\n$$\n\\text{OR}_{\\text{prev}} = \\frac{\\frac{0.01}{0.99}}{\\frac{0.02}{0.98}}\n$$\n\n为简化此繁分数，我们将分子乘以分母的倒数：\n$$\n\\text{OR}_{\\text{prev}} = \\frac{0.01}{0.99} \\times \\frac{0.98}{0.02}\n$$\n$$\n\\text{OR}_{\\text{prev}} = \\frac{0.01 \\times 0.98}{0.02 \\times 0.99} = \\frac{1 \\times 0.98}{2 \\times 0.99} = \\frac{0.98}{1.98}\n$$\n\n要将其表示为整数的精确分数，我们可以写成：\n$$\n\\text{OR}_{\\text{prev}} = \\frac{98}{198}\n$$\n将分子和分母同时除以它们的最大公约数 $2$：\n$$\n\\text{OR}_{\\text{prev}} = \\frac{49}{99}\n$$\n\n分析偏倚的来源是有益的。衡量发病关联性的真实指标是发病率比（IRR），其值为：\n$$\n\\text{IRR} = \\frac{\\lambda_{\\text{exposed}}}{\\lambda_{\\text{unexposed}}} = \\frac{0.01}{0.01} = 1\n$$\nIRR为 $1$ 表示暴露与疾病发病之间没有关联（零效应）。然而，基于患病率的比值比为 $\\frac{49}{99} \\approx 0.495$，小于 $1$。这表明存在一种虚假的保护效应。该估计值偏离了零值 $1$。这种偏倚的产生是因为横断面调查确定的是现患病例。现患病例是新发病例的“病程偏倚”样本，意味着病程较长的病例更有可能被抽样。由于暴露将病程减半（从 $2$ 年到 $1$ 年），暴露个体一旦患病，其在患病人群中存在的时间更短。因此，他们在横断面调查中被计入的可能性较小，导致暴露组的患病率较低（$p_{1}  p_{0}$），尽管发病率相同。这种现象是流行病学研究中选择偏倚（特别是病程偏倚抽样）的一个典型例子。",
            "answer": "$$\n\\boxed{\\frac{49}{99}}\n$$"
        },
        {
            "introduction": "认识到偏倚的存在后，下一步是学习如何从数学上校正它。本练习将引导你从发病率、患病率和病程之间最基本的关系出发，推导出为何一个朴素的估计量是有偏的。更重要的是，你将利用现患队列的数据，构建一个对真实发病率的统计一致估计量，从而将理论原则应用于实际的流行病学估算中。",
            "id": "4606282",
            "problem": "一种地方性的非致命慢性病在一个大型封闭人群中演变，为方便起见，可将该人群规模归一化为$1$。假设处于稳态：发病率$I$（每人每年的新发病例数）在日历时间内是恒定的，每个患病个体的总病程$T$是独立的，具有有限均值$\\mathbb{E}[T]$和不依赖于日历时间的概率密度函数（PDF）$f_T(t)$。在日历时间$\\tau$进行的一次横断面调查记录了时点患病率$P$（当前患病人口的比例）。通过将在时间$\\tau$确定的现患病例纳入研究并随访直至其病愈，你可以观察到每个纳入病例的总病程$T$（即从发病到病愈的时间，对于现患病例，这是通过随访将后向和前向复发时间相加重构得出的）。将这些观察到的病程记为$T_1,\\dots,T_n$，其样本均值记为$\\bar{D}_{\\mathrm{obs}}$。\n\n已知对现患病例的横断面抽样相对于新发病例会过采样具有较长病程的个体。\n\na) 仅使用基本定义和稳态假设，用$f_T(t)$和$\\mathbb{E}[T]$推导在横断面调查中现患病例的总病程$T$的概率密度函数。然后用$T$的前两阶矩表示$\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}]$，并证明朴素估计量$\\tilde{I} \\equiv P/\\bar{D}_{\\mathrm{obs}}$对于$I$是有偏的。用$\\mathbb{E}[T]$和$\\mathbb{E}[T^2]$以闭式形式表示乘性偏差因子（即$\\mathbb{E}[\\tilde{I}]/I$）。\n\nb) 通过建立一个将长度偏倚分布下的期望与$\\mathbb{E}[T]$联系起来的恒等式，说明如何从总病程的长度偏倚样本中恢复$\\mathbb{E}[T]$。基于此恢复步骤，提供一个校正估计量$\\hat{I}$的单一简化表达式，该估计量使用观测到的$P$和$T_1,\\dots,T_n$，并且在稳态模型下是$I$的一致估计量。\n\nc) 一次横断面调查得出$P=0.08$（以分数表示），对在时间$\\tau$观察到的$n=10$个现患病例进行完整随访，得到的总病程（单位：年）为：$1.2,\\,0.7,\\,3.4,\\,2.1,\\,4.0,\\,5.5,\\,0.9,\\,1.8,\\,2.7,\\,3.0$。使用你在(b)部分得到的估计量，计算校正后的发病率估计值。将你的最终答案四舍五入到四位有效数字。用“每年”作为单位表示最终的发病率。",
            "solution": "该问题被验证为具有科学依据、问题明确且客观。它代表了更新理论和抽样理论在流行病学中的一个标准应用。我们可以进行完整解答。\n\n这个问题的核心在于区分新发病例和现患病例的病程分布。由于横断面抽样的性质，病程较长的个体更有可能在调查中被捕捉到，这种现象被称为长度偏倚抽样。\n\n首先，我们建立在稳态下患病率$P$、发病率$I$和平均病程$\\mathbb{E}[T]$之间的基本关系。考虑一个大小为$N$的大型人群（归一化为$N=1$）。在任何给定时间患病的人数（现患病例）为$P \\times N = P$。在稳态下，进入患病状态的速率必须等于离开该状态的速率。进入速率是发病率$I$（每人每年的新发病例数）。每年新发病例总数为$I \\times N = I$。离开速率是现患病例数$P$除以他们的平均病程。为使此关系成立，所使用的平均病程必须是新发病例的平均病程，即$\\mathbb{E}[T]$。因此，康复速率为$P/\\mathbb{E}[T]$。令流入与流出相等，得到$I = P/\\mathbb{E}[T]$，即著名的公式：\n$$P = I \\cdot \\mathbb{E}[T]$$\n在这里，$T$是新发病例中病程的随机变量，其概率密度函数（PDF）为$f_T(t)$，均值为有限的$\\mathbb{E}[T]$。\n\na) 长度偏倚分布的推导及朴素估计量的偏差。\n\n设$D$为从横断面调查的现患人群中抽样的病例的总病程的随机变量。观察到病程长度为$t$的个体的概率与$t$本身成正比，因为他们可被抽样的时间更长。病程在$[t, t+dt]$内的新发病例数与$f_T(t)dt$成正比。这些个体中的每一个都会在现患病例库中持续时间$t$。因此，现患病例中病程的密度与$t \\cdot f_T(t)$成正比。\n\n为了找到$D$的概率密度函数，我们记为$f_D(t)$，我们对这个关系进行归一化：\n$$f_D(t) = C \\cdot t \\cdot f_T(t)$$\n其中$C$是一个归一化常数。要使$f_D(t)$成为一个有效的PDF，它在所有可能病程上的积分必须为$1$：\n$$\\int_0^\\infty f_D(t) dt = \\int_0^\\infty C \\cdot t \\cdot f_T(t) dt = 1$$\n$C \\int_0^\\infty t \\cdot f_T(t) dt = 1$。根据定义，该积分是$T$的期望值$\\mathbb{E}[T]$。\n$$C \\cdot \\mathbb{E}[T] = 1 \\implies C = \\frac{1}{\\mathbb{E}[T]}$$\n因此，现患病例中总病程$T$（为清晰起见，此处记为$D$）的PDF为：\n$$f_D(t) = \\frac{t \\cdot f_T(t)}{\\mathbb{E}[T]}$$\n这就是长度偏倚分布。\n\n接下来，我们推导观察到的病程样本均值的期望值$\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}]$。观察到的病程$T_1, \\dots, T_n$是从这个长度偏倚分布$f_D(t)$中抽取的独立同分布样本。因此，$\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}] = \\mathbb{E}[D]$。\n$$\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}] = \\mathbb{E}[D] = \\int_0^\\infty t \\cdot f_D(t) dt = \\int_0^\\infty t \\cdot \\frac{t \\cdot f_T(t)}{\\mathbb{E}[T]} dt$$\n$$\\mathbb{E}[D] = \\frac{1}{\\mathbb{E}[T]} \\int_0^\\infty t^2 \\cdot f_T(t) dt$$\n该积分是$T$的二阶矩$\\mathbb{E}[T^2]$的定义。所以，\n$$\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}] = \\frac{\\mathbb{E}[T^2]}{\\mathbb{E}[T]}$$\n\n发病率的朴素估计量是$\\tilde{I} \\equiv P/\\bar{D}_{\\mathrm{obs}}$。为了评估其偏差，我们考察其期望值。直接计算$\\mathbb{E}[1/\\bar{D}_{\\mathrm{obs}}]$很复杂。对于大样本量$n$，通常使用$\\mathbb{E}[1/\\bar{D}_{\\mathrm{obs}}] \\approx 1/\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}]$来近似$\\mathbb{E}[\\tilde{I}]$。\n$$\\mathbb{E}[\\tilde{I}] = \\mathbb{E}\\left[\\frac{P}{\\bar{D}_{\\mathrm{obs}}}\\right] = P \\cdot \\mathbb{E}\\left[\\frac{1}{\\bar{D}_{\\mathrm{obs}}}\\right] \\approx P \\cdot \\frac{1}{\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}]}$$\n代入$\\mathbb{E}[\\bar{D}_{\\mathrm{obs}}]$的表达式：\n$$\\mathbb{E}[\\tilde{I}] \\approx \\frac{P}{\\frac{\\mathbb{E}[T^2]}{\\mathbb{E}[T]}} = \\frac{P \\cdot \\mathbb{E}[T]}{\\mathbb{E}[T^2]}$$\n使用稳态关系$P = I \\cdot \\mathbb{E}[T]$：\n$$\\mathbb{E}[\\tilde{I}] \\approx \\frac{(I \\cdot \\mathbb{E}[T]) \\cdot \\mathbb{E}[T]}{\\mathbb{E}[T^2]} = I \\cdot \\frac{(\\mathbb{E}[T])^2}{\\mathbb{E}[T^2]}$$\n乘性偏差因子是比率$\\mathbb{E}[\\tilde{I}] / I$：\n$$\\frac{\\mathbb{E}[\\tilde{I}]}{I} \\approx \\frac{(\\mathbb{E}[T])^2}{\\mathbb{E}[T^2]}$$\n由于对于任何非恒定病程，$T$的方差$\\text{Var}(T) = \\mathbb{E}[T^2] - (\\mathbb{E}[T])^2$必须为正，我们有$\\mathbb{E}[T^2] > (\\mathbb{E}[T])^2$。这意味着偏差因子小于$1$，所以朴素估计量$\\tilde{I}$是有偏的，并且系统地低估了真实发病率$I$。\n\nb) 发病率的校正估计量。\n\n为了校正偏差，我们需要从长度偏倚的病程样本$T_1, \\dots, T_n$中得到一个$\\mathbb{E}[T]$的无偏估计量。让我们考察单个长度偏倚病程$D$的倒数的期望。\n$$\\mathbb{E}\\left[\\frac{1}{D}\\right] = \\int_0^\\infty \\frac{1}{t} f_D(t) dt = \\int_0^\\infty \\frac{1}{t} \\left(\\frac{t \\cdot f_T(t)}{\\mathbb{E}[T]}\\right) dt$$\n$$\\mathbb{E}\\left[\\frac{1}{D}\\right] = \\frac{1}{\\mathbb{E}[T]} \\int_0^\\infty f_T(t) dt$$\n由于$f_T(t)$是一个概率密度函数，$\\int_0^\\infty f_T(t) dt = 1$。这得出了关键的恒等式：\n$$\\mathbb{E}\\left[\\frac{1}{D}\\right] = \\frac{1}{\\mathbb{E}[T]}$$\n这个恒等式使我们能够通过$\\mathbb{E}[T] = 1 / \\mathbb{E}[1/D]$恢复$\\mathbb{E}[T]$。\n基于此，我们可以构建一个$\\mathbb{E}[T]$的一致估计量。根据大数定律，观测病程倒数的样本均值是$\\mathbb{E}[1/D]$的一致估计量：\n$$\\frac{1}{n} \\sum_{i=1}^n \\frac{1}{T_i} \\xrightarrow{p} \\mathbb{E}\\left[\\frac{1}{D}\\right] = \\frac{1}{\\mathbb{E}[T]}$$\n因此，$\\mathbb{E}[T]$的一个一致估计量是样本的调和平均数：\n$$\\widehat{\\mathbb{E}[T]} = \\left( \\frac{1}{n} \\sum_{i=1}^n \\frac{1}{T_i} \\right)^{-1}$$\n现在我们可以通过将这个估计量代入基本关系$I = P/\\mathbb{E}[T]$，来构建一个校正的、一致的发病率$I$的估计量，记为$\\hat{I}$：\n$$\\hat{I} = \\frac{P}{\\widehat{\\mathbb{E}[T]}} = \\frac{P}{\\left( \\frac{1}{n} \\sum_{i=1}^n \\frac{1}{T_i} \\right)^{-1}}$$\n简化此表达式得到校正后的估计量：\n$$\\hat{I} = P \\cdot \\left( \\frac{1}{n} \\sum_{i=1}^n \\frac{1}{T_i} \\right) = \\frac{P}{n} \\sum_{i=1}^n \\frac{1}{T_i}$$\n\nc) 计算校正后的发病率估计值。\n\n我们有以下给定数据：\n- 时点患病率$P = 0.08$\n- 样本量$n = 10$\n- 观察到的病程（单位：年）：$T_i \\in \\{1.2, 0.7, 3.4, 2.1, 4.0, 5.5, 0.9, 1.8, 2.7, 3.0\\}$\n\n我们使用(b)部分推导出的校正估计量$\\hat{I}$：\n$$\\hat{I} = \\frac{P}{n} \\sum_{i=1}^n \\frac{1}{T_i} = \\frac{0.08}{10} \\sum_{i=1}^{10} \\frac{1}{T_i}$$\n首先，我们计算病程倒数之和：\n$$\\sum_{i=1}^{10} \\frac{1}{T_i} = \\frac{1}{1.2} + \\frac{1}{0.7} + \\frac{1}{3.4} + \\frac{1}{2.1} + \\frac{1}{4.0} + \\frac{1}{5.5} + \\frac{1}{0.9} + \\frac{1}{1.8} + \\frac{1}{2.7} + \\frac{1}{3.0}$$\n$$\\sum_{i=1}^{10} \\frac{1}{T_i} \\approx 0.83333 + 1.42857 + 0.29412 + 0.47619 + 0.25000 + 0.18182 + 1.11111 + 0.55556 + 0.37037 + 0.33333$$\n$$\\sum_{i=1}^{10} \\frac{1}{T_i} \\approx 5.83440$$\n现在，我们计算发病率估计值：\n$$\\hat{I} = 0.008 \\times 5.83440 \\approx 0.0466752$$\n四舍五入到四位有效数字，我们得到：\n$$\\hat{I} \\approx 0.04668$$\n单位是每年，因为$P$是无量纲的，而每个$1/T_i$项的单位是年$^{-1}$。校正后的发病率约为每人每年$0.04668$。",
            "answer": "$$\\boxed{0.04668}$$"
        },
        {
            "introduction": "理论必须通过实践来巩固。本练习为你提供了一组来自横断面调查的数据，要求你计算校正后的平均病程。你将应用一种称为“逆概率加权”（Inverse Probability Weighting, IPW）的强大方法，它能够有效地校正长度偏倚，并将你引向与前一练习中推导出的相同结论，即使用观测时长的调和平均值来获得无偏估计。",
            "id": "4606238",
            "problem": "在一个稳定人群中进行了一项单时间点的横断面患病率调查。在该人群中，一种慢性病的发病率随时间大致恒定，且病程分布不随时间改变。在此类调查中，总病程较长的病例更有可能被纳入，从而产生长度偏倚抽样。为纠正此偏倚，使用逆概率加权（IPW）方法，其中每个病例的权重与其观测到的总病程成反比。\n\n观察了八名患者。对于每位患者，记录了调查时自发病以来的时间（后向时间）以及之后到疾病痊愈或死亡的剩余生存时间（前向时间）。观测数据如下：\n\n- 患者 $1$：后向时间 $0.8$ 年，前向时间 $2.4$ 年\n- 患者 $2$：后向时间 $3.1$ 年，前向时间 $1.6$ 年\n- 患者 $3$：后向时间 $5.0$ 年，前向时间 $0.8$ 年\n- 患者 $4$：后向时间 $1.2$ 年，前向时间 $3.3$ 年\n- 患者 $5$：后向时间 $2.7$ 年，前向时间 $2.1$ 年\n- 患者 $6$：后向时间 $0.4$ 年，前向时间 $1.0$ 年\n- 患者 $7$：后向时间 $6.3$ 年，前向时间 $0.5$ 年\n- 患者 $8$：后向时间 $2.0$ 年，前向时间 $4.0$ 年\n\n假设每位患者代表一次单独的发病事件，其总病程等于后向时间与前向时间之和，并且被纳入横断面研究的概率除了病程外与其他因素无关。\n\n使用基于观测总病程的逆概率加权法，计算潜在平均病程的校正估计值。将答案四舍五入至 $4$ 位有效数字。最终平均病程以年为单位表示。",
            "solution": "## 问题验证\n\n### 步骤1：提取已知条件\n问题为一项关于慢性病的横断面调查提供了以下数据和定义：\n- 该调查在一个稳定人群中进行，该人群的疾病发病率恒定，病程分布不随时间改变。\n- 抽样是长度偏倚的，意味着总病程较长的病例更有可能被纳入。\n- 校正将使用逆概率加权（IPW）方法进行，权重与观测到的总病程成反比。\n- 观察了一个包含 $N=8$ 名患者的样本。\n- 对于每位患者 $i$，记录了其后向时间 $B_i$（自发病以来的时间）和前向时间 $F_i$（至痊愈的剩余时间）。总病程为 $L_i = B_i + F_i$。\n- 观测数据（单位：年）如下：\n  - 患者 $1$：$B_1 = 0.8$, $F_1 = 2.4$\n  - 患者 $2$：$B_2 = 3.1$, $F_2 = 1.6$\n  - 患者 $3$：$B_3 = 5.0$, $F_3 = 0.8$\n  - 患者 $4$：$B_4 = 1.2$, $F_4 = 3.3$\n  - 患者 $5$：$B_5 = 2.7$, $F_5 = 2.1$\n  - 患者 $6$：$B_6 = 0.4$, $F_6 = 1.0$\n  - 患者 $7$：$B_7 = 6.3$, $F_7 = 0.5$\n  - 患者 $8$：$B_8 = 2.0$, $F_8 = 4.0$\n- 任务是计算潜在平均病程的校正估计值，并四舍五入至 $4$ 位有效数字。\n\n### 步骤2：使用提取的已知条件进行验证\n根据验证标准对问题进行评估：\n- **科学性**：问题描述了长度偏倚抽样，这是横断面研究（尤其是在流行病学中）一个公认的统计现象。其校正方法——逆概率加权（IPW），是解决抽样偏倚的标准且有效的统计技术。问题背景和方法都坚实地基于生物统计学和流行病学的原理。\n- **良构性**：问题提供了所有必要的数据，并就所用方法（使用与总病程成反比的权重的IPW）给出了清晰、具体的指示。目标是计算一个单一、唯一定义的量（校正后的平均病程）。\n- **客观性**：问题以精确、定量和客观的语言陈述。没有主观或基于观点的陈述。\n\n该问题不存在任何缺陷：\n1. 它在科学上是合理的。\n2. 它是流行病学和统计学中一个可形式化的问题。\n3. 它的设定是完整且一致的。\n4. 数据和条件对于一项慢性病研究是符合实际的。\n5. 它是良构的，并且有唯一解。\n6. 它是一种标准统计校正方法的非平凡应用。\n7. 结果可通过计算进行验证。\n\n### 步骤3：结论与行动\n问题有效。我将继续进行完整解答。\n\n## 解答\n\n该问题要求我们根据通过横断面调查获得的样本来估计疾病的真实平均病程。此类调查存在长度偏倚抽样问题，即个体被纳入样本的概率与其病程成正比。我们被要求使用逆概率加权（IPW）来校正这种偏倚。\n\n设 $L$ 是表示疾病真实的、潜在病程的随机变量，其均值为 $\\mu = E[L]$。设 $L^*$ 是在长度偏倚样本中观测到的病程的随机变量。抽样到一个病程为 $l$ 的病例的概率与 $l$ 成正比。因此，病程为 $l$ 的病例的入选概率 $\\pi(l)$ 为 $\\pi(l) = k \\cdot l$，其中 $k$ 为某个比例常数。\n\nIPW方法为每个观测值 $i$ 分配一个权重 $w_i$，该权重与其入选概率 $\\pi_i$ 成反比。对于第 $i$ 个观测总病程为 $L_i$ 的患者，其权重为：\n$$\nw_i = \\frac{1}{\\pi_i} \\propto \\frac{1}{L_i}\n$$\n我们设权重 $w_i = \\frac{c}{L_i}$，其中 $c$ 为某个常数。变量 $Y$ 的均值的IPW估计量由加权平均值 $\\hat{\\mu}_Y = \\frac{\\sum_i w_i Y_i}{\\sum_i w_i}$ 给出。在本问题中，我们关心的变量是病程本身，所以 $Y_i = L_i$。\n\n因此，平均病程的校正估计值 $\\hat{\\mu}$ 为：\n$$\n\\hat{\\mu} = \\frac{\\sum_{i=1}^{N} w_i L_i}{\\sum_{i=1}^{N} w_i} = \\frac{\\sum_{i=1}^{N} \\frac{c}{L_i} L_i}{\\sum_{i=1}^{N} \\frac{c}{L_i}} = \\frac{\\sum_{i=1}^{N} c}{\\sum_{i=1}^{N} \\frac{c}{L_i}} = \\frac{N \\cdot c}{c \\sum_{i=1}^{N} \\frac{1}{L_i}} = \\frac{N}{\\sum_{i=1}^{N} \\frac{1}{L_i}}\n$$\n这个结果表明，经过IPW校正的平均病程估计值是观测总病程的调和平均数。注意，简单的算术平均数 $\\frac{1}{N}\\sum_{i=1}^{N} L_i$ 将是 $\\mu$ 的一个有偏估计量。\n\n首先，我们通过将后向时间 $B_i$ 和前向时间 $F_i$ 相加，计算出 $N=8$ 名患者中每位的总病程 $L_i$。所有时间单位均为年。\n- $L_1 = B_1 + F_1 = 0.8 + 2.4 = 3.2$\n- $L_2 = B_2 + F_2 = 3.1 + 1.6 = 4.7$\n- $L_3 = B_3 + F_3 = 5.0 + 0.8 = 5.8$\n- $L_4 = B_4 + F_4 = 1.2 + 3.3 = 4.5$\n- $L_5 = B_5 + F_5 = 2.7 + 2.1 = 4.8$\n- $L_6 = B_6 + F_6 = 0.4 + 1.0 = 1.4$\n- $L_7 = B_7 + F_7 = 6.3 + 0.5 = 6.8$\n- $L_8 = B_8 + F_8 = 2.0 + 4.0 = 6.0$\n\n接下来，我们计算每个总病程的倒数 $\\frac{1}{L_i}$：\n- $\\frac{1}{L_1} = \\frac{1}{3.2} = 0.3125$\n- $\\frac{1}{L_2} = \\frac{1}{4.7} \\approx 0.21276596$\n- $\\frac{1}{L_3} = \\frac{1}{5.8} \\approx 0.17241379$\n- $\\frac{1}{L_4} = \\frac{1}{4.5} \\approx 0.22222222$\n- $\\frac{1}{L_5} = \\frac{1}{4.8} \\approx 0.20833333$\n- $\\frac{1}{L_6} = \\frac{1}{1.4} \\approx 0.71428571$\n- $\\frac{1}{L_7} = \\frac{1}{6.8} \\approx 0.14705882$\n- $\\frac{1}{L_8} = \\frac{1}{6.0} \\approx 0.16666667$\n\n现在，我们将这些倒数相加：\n$$\n\\sum_{i=1}^{8} \\frac{1}{L_i} \\approx 0.3125 + 0.21276596 + 0.17241379 + 0.22222222 + 0.20833333 + 0.71428571 + 0.14705882 + 0.16666667\n$$\n$$\n\\sum_{i=1}^{8} \\frac{1}{L_i} \\approx 2.1562465\n$$\n\n最后，我们计算校正后的平均病程 $\\hat{\\mu}$：\n$$\n\\hat{\\mu} = \\frac{N}{\\sum_{i=1}^{N} \\frac{1}{L_i}} = \\frac{8}{2.1562465} \\approx 3.7099783 \\text{ 年}\n$$\n问题要求将答案四舍五入到 $4$ 位有效数字。前四位有效数字是 $3$、$7$、$0$ 和 $9$。第五位数字是 $9$，所以我们将第四位数字向上取整。\n$$\n\\hat{\\mu} \\approx 3.710 \\text{ 年}\n$$\n末尾的零是有效数字。正如预期的那样，这个校正后的值小于观测病程的未校正算术平均值（$\\frac{1}{8}\\sum L_i = \\frac{37.2}{8} = 4.65$ 年）。",
            "answer": "$$\\boxed{3.710}$$"
        }
    ]
}
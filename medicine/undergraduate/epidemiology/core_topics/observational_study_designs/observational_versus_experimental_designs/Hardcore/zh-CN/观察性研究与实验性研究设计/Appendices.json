{
    "hands_on_practices": [
        {
            "introduction": "混淆是观察性研究的核心挑战，当一个变量同时影响暴露分配和研究结局时，它便会扭曲我们对因果效应的估计。本练习通过一个假设的线性模型，将混淆这一抽象概念具体化，让你能够亲手量化由共同原因（即混淆变量）引入的偏倚大小。通过推导这一偏倚并计算校正后的估计值，你将深刻理解为何简单的组间比较会产生误导，以及为何对混淆变量进行调整是得出有效因果结论的关键一步。",
            "id": "4616228",
            "problem": "考虑一项观察性队列研究，旨在了解二元暴露 $A \\in \\{0,1\\}$ 对连续结果 $Y$ 的影响，其中暴露前协变量 $X$ 是 $A$ 和 $Y$ 的共同原因。假设数据生成机制满足以下结构关系：\n\n- 协变量服从分布 $X \\sim \\mathrm{Uniform}(-1,1)$。\n- 暴露根据线性概率模型 $A \\mid X=x \\sim \\mathrm{Bernoulli}(p(x))$ 生成，其中 $p(x) = \\alpha_{0} + \\alpha_{1} x$，且 $\\alpha_{0} = 0.5$ 和 $\\alpha_{1} = 0.4$。这保证了正值假设，因为对于 $x \\in [-1,1]$，$p(x) \\in [0.1,0.9]$。\n- 结果由线性模型 $Y = \\beta_{0} + \\beta_{A} A + \\beta_{X} X + \\varepsilon$ 生成，其中 $\\varepsilon$ 是满足 $\\mathbb{E}[\\varepsilon \\mid A, X] = 0$ 的均值为零的噪声。设 $\\beta_{0} = 10$，$\\beta_{A} = 2$，$\\beta_{X} = 1.5$。\n\n将平均因果效应 (ACE) 定义为 $\\mathbb{E}\\!\\left[Y^{1} - Y^{0}\\right]$，其中 $Y^{a}$ 表示将 $A$ 设置为 $a$ 的干预下的潜在结果。相比之下，朴素观察估计量是观察到的平均结果之差，$\\Delta_{\\mathrm{obs}} = \\mathbb{E}[Y \\mid A=1] - \\mathbb{E}[Y \\mid A=0]$。\n\n仅使用核心定义（潜在结果和条件期望）、全期望定律和代数，完成以下任务：\n\n1. 用 $\\beta_{A}$、$\\beta_{X}$、$\\alpha_{0}$、$\\alpha_{1}$ 和 $X$ 的性质推导 $\\Delta_{\\mathrm{obs}}$。\n2. 在指定的参数值下，量化偏差 $B = \\Delta_{\\mathrm{obs}} - \\mathbb{E}\\!\\left[Y^{1} - Y^{0}\\right]$。\n3. 计算由标准化恒等式定义的回归调整估计量 $\\Delta_{\\mathrm{adj}} = \\int \\left(\\mathbb{E}[Y \\mid A=1, X=x] - \\mathbb{E}[Y \\mid A=0, X=x]\\right) f_{X}(x) \\, dx$，其中 $f_{X}$ 是 $X$ 的密度。\n\n将最终答案表示为 $\\Delta_{\\mathrm{adj}}$ 的单个数值。不要四舍五入。",
            "solution": "该问题将首先被验证，如果有效，将按要求分三部分进行解答。\n\n### 问题验证\n\n**步骤1：提取已知条件**\n-   协变量分布：$X \\sim \\mathrm{Uniform}(-1,1)$。\n-   暴露模型：$A \\mid X=x \\sim \\mathrm{Bernoulli}(p(x))$，其中 $p(x) = \\alpha_{0} + \\alpha_{1} x$。\n-   暴露模型参数：$\\alpha_{0} = 0.5$, $\\alpha_{1} = 0.4$。\n-   结果模型：$Y = \\beta_{0} + \\beta_{A} A + \\beta_{X} X + \\varepsilon$。\n-   结果模型参数：$\\beta_{0} = 10$, $\\beta_{A} = 2$, $\\beta_{X} = 1.5$。\n-   噪声性质：$\\mathbb{E}[\\varepsilon \\mid A, X] = 0$。\n-   定义1：平均因果效应 (ACE) 为 $\\mathbb{E}[Y^{1} - Y^{0}]$。\n-   定义2：朴素观察估计量为 $\\Delta_{\\mathrm{obs}} = \\mathbb{E}[Y \\mid A=1] - \\mathbb{E}[Y \\mid A=0]$。\n-   定义3：混杂偏倚为 $B = \\Delta_{\\mathrm{obs}} - \\mathbb{E}[Y^{1} - Y^{0}]$。\n-   定义4：回归调整估计量为 $\\Delta_{\\mathrm{adj}} = \\int (\\mathbb{E}[Y \\mid A=1, X=x] - \\mathbb{E}[Y \\mid A=0, X=x]) f_{X}(x) \\, dx$。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题在科学上基于因果推断和统计学的原理。它描述了一个混杂的标准情景，这是流行病学中的一个核心概念。数据生成过程由一个线性结构方程模型和一个用于暴露的线性概率模型指定，这些都是常见且有效的建模选择。正值假设 $P(A=a \\mid X=x) > 0$ 对所有 $a, x$ 都成立，这一点得到了明确的验证：对于 $x \\in [-1,1]$，$p(x) = 0.5 + 0.4x$ 的范围从 $0.5 - 0.4 = 0.1$ 到 $0.5 + 0.4 = 0.9$，所以 $p(x) \\in [0.1, 0.9]$，严格介于0和1之间。该问题是适定的，所有必要的参数和分布都已定义。语言客观且精确。所提问题是此背景下的标准推导。该问题是自洽的，没有矛盾。\n\n**步骤3：结论与行动**\n问题有效。将提供完整的解答。\n\n### 解答\n\n解答分为问题陈述中列出的三个任务。\n\n**1. $\\Delta_{\\mathrm{obs}}$ 的推导**\n\n朴素观察估计量定义为 $\\Delta_{\\mathrm{obs}} = \\mathbb{E}[Y \\mid A=1] - \\mathbb{E}[Y \\mid A=0]$。我们使用全期望定律，以协变量 $X$ 为条件，分别计算每一项。\n\n对于给定的暴露水平 $a \\in \\{0,1\\}$，结果的条件期望为：\n$$ \\mathbb{E}[Y \\mid A=a] = \\mathbb{E}_{X}[\\mathbb{E}[Y \\mid A=a, X] \\mid A=a] $$\n首先，我们求内部期望 $\\mathbb{E}[Y \\mid A=a, X=x]$。使用给定的 $Y$ 的线性模型和性质 $\\mathbb{E}[\\varepsilon \\mid A, X] = 0$：\n$$ \\mathbb{E}[Y \\mid A=a, X=x] = \\mathbb{E}[\\beta_{0} + \\beta_{A} A + \\beta_{X} X + \\varepsilon \\mid A=a, X=x] $$\n$$ = \\beta_{0} + \\beta_{A} a + \\beta_{X} x + \\mathbb{E}[\\varepsilon \\mid A=a, X=x] = \\beta_{0} + \\beta_{A} a + \\beta_{X} x $$\n现在我们对以 $A=a$ 为条件的 $X$ 的分布求外部期望：\n$$ \\mathbb{E}[Y \\mid A=a] = \\mathbb{E}[\\beta_{0} + \\beta_{A} a + \\beta_{X} X \\mid A=a] = \\beta_{0} + \\beta_{A} a + \\beta_{X} \\mathbb{E}[X \\mid A=a] $$\n将此应用于 $a=1$ 和 $a=0$：\n$$ \\mathbb{E}[Y \\mid A=1] = \\beta_{0} + \\beta_{A}(1) + \\beta_{X} \\mathbb{E}[X \\mid A=1] $$\n$$ \\mathbb{E}[Y \\mid A=0] = \\beta_{0} + \\beta_{A}(0) + \\beta_{X} \\mathbb{E}[X \\mid A=0] $$\n两者之差为：\n$$ \\Delta_{\\mathrm{obs}} = (\\beta_{0} + \\beta_{A} + \\beta_{X} \\mathbb{E}[X \\mid A=1]) - (\\beta_{0} + \\beta_{X} \\mathbb{E}[X \\mid A=0]) $$\n$$ \\Delta_{\\mathrm{obs}} = \\beta_{A} + \\beta_{X} (\\mathbb{E}[X \\mid A=1] - \\mathbb{E}[X \\mid A=0]) $$\n为了完成推导，我们必须求出 $\\mathbb{E}[X \\mid A=a]$。我们使用条件期望的定义和贝叶斯定理：\n$$ f_{X|A}(x|a) = \\frac{P(A=a|X=x)f_X(x)}{P(A=a)} $$\n$X$ 的密度为 $f_X(x) = \\frac{1}{2}$，其中 $x \\in [-1,1]$。倾向得分是 $p(x) = P(A=1|X=x) = \\alpha_0 + \\alpha_1 x$。$A=1$ 的边际概率是：\n$$ P(A=1) = \\int_{-1}^{1} P(A=1|X=x)f_X(x) dx = \\int_{-1}^{1} (\\alpha_0 + \\alpha_1 x) \\frac{1}{2} dx = \\frac{1}{2} \\left[ \\alpha_0 x + \\frac{\\alpha_1 x^2}{2} \\right]_{-1}^{1} = \\frac{1}{2} [(\\alpha_0 + \\frac{\\alpha_1}{2}) - (-\\alpha_0 + \\frac{\\alpha_1}{2})] = \\alpha_0 $$\n类似地，$P(A=0) = 1 - P(A=1) = 1 - \\alpha_0$。\n\n现在我们计算 $X$ 的条件期望：\n$$ \\mathbb{E}[X \\mid A=1] = \\int_{-1}^{1} x f_{X|A}(x|1) dx = \\int_{-1}^{1} x \\frac{(\\alpha_0 + \\alpha_1 x) (1/2)}{\\alpha_0} dx = \\frac{1}{2\\alpha_0} \\int_{-1}^{1} (\\alpha_0 x + \\alpha_1 x^2) dx $$\n$$ = \\frac{1}{2\\alpha_0} \\left[ \\frac{\\alpha_0 x^2}{2} + \\frac{\\alpha_1 x^3}{3} \\right]_{-1}^{1} = \\frac{1}{2\\alpha_0} \\left[ (\\frac{\\alpha_0}{2} + \\frac{\\alpha_1}{3}) - (\\frac{\\alpha_0}{2} - \\frac{\\alpha_1}{3}) \\right] = \\frac{1}{2\\alpha_0} \\left( \\frac{2\\alpha_1}{3} \\right) = \\frac{\\alpha_1}{3\\alpha_0} $$\n对于 $A=0$：\n$$ \\mathbb{E}[X \\mid A=0] = \\int_{-1}^{1} x \\frac{P(A=0|X=x)f_X(x)}{P(A=0)} dx = \\int_{-1}^{1} x \\frac{(1 - (\\alpha_0 + \\alpha_1 x)) (1/2)}{1-\\alpha_0} dx = \\frac{1}{2(1-\\alpha_0)} \\int_{-1}^{1} ((1-\\alpha_0)x - \\alpha_1 x^2) dx $$\n$$ = \\frac{1}{2(1-\\alpha_0)} \\left[ \\frac{(1-\\alpha_0) x^2}{2} - \\frac{\\alpha_1 x^3}{3} \\right]_{-1}^{1} = \\frac{1}{2(1-\\alpha_0)} \\left[ (\\frac{1-\\alpha_0}{2} - \\frac{\\alpha_1}{3}) - (\\frac{1-\\alpha_0}{2} + \\frac{\\alpha_1}{3}) \\right] = \\frac{1}{2(1-\\alpha_0)} \\left( -\\frac{2\\alpha_1}{3} \\right) = -\\frac{\\alpha_1}{3(1-\\alpha_0)} $$\n两者之差为：\n$$ \\mathbb{E}[X \\mid A=1] - \\mathbb{E}[X \\mid A=0] = \\frac{\\alpha_1}{3\\alpha_0} - \\left(-\\frac{\\alpha_1}{3(1-\\alpha_0)}\\right) = \\frac{\\alpha_1}{3} \\left( \\frac{1}{\\alpha_0} + \\frac{1}{1-\\alpha_0} \\right) = \\frac{\\alpha_1}{3} \\left( \\frac{1-\\alpha_0+\\alpha_0}{\\alpha_0(1-\\alpha_0)} \\right) = \\frac{\\alpha_1}{3\\alpha_0(1-\\alpha_0)} $$\n将此代入 $\\Delta_{\\mathrm{obs}}$ 的表达式，得到最终的推导形式：\n$$ \\Delta_{\\mathrm{obs}} = \\beta_A + \\beta_X \\left( \\frac{\\alpha_1}{3\\alpha_0(1-\\alpha_0)} \\right) $$\n\n**2. 偏差 $B$ 的量化**\n\n平均因果效应 (ACE) 是 $\\mathbb{E}[Y^1 - Y^0]$。潜在结果 $Y^a$ 是通过对 $Y$ 的结构方程进行干预来定义的：\n$$ Y^a = \\beta_{0} + \\beta_{A} a + \\beta_{X} X + \\varepsilon $$\n其中 $X$ 和 $\\varepsilon$ 服从其原始分布。\n$$ \\mathrm{ACE} = \\mathbb{E}[Y^1 - Y^0] = \\mathbb{E}[(\\beta_0 + \\beta_A(1) + \\beta_X X + \\varepsilon) - (\\beta_0 + \\beta_A(0) + \\beta_X X + \\varepsilon)] $$\n$$ = \\mathbb{E}[\\beta_A] = \\beta_A $$\n偏差 $B$ 是观察估计值与因果效应之间的差值：\n$$ B = \\Delta_{\\mathrm{obs}} - \\mathrm{ACE} = \\left(\\beta_A + \\beta_X \\frac{\\alpha_1}{3\\alpha_0(1-\\alpha_0)}\\right) - \\beta_A = \\beta_X \\frac{\\alpha_1}{3\\alpha_0(1-\\alpha_0)} $$\n这一项代表了由共同原因 $X$ 引起的混杂偏倚。现在，我们代入给定的数值：$\\beta_{X} = 1.5$，$\\alpha_1 = 0.4$，和 $\\alpha_0 = 0.5$。\n$$ B = 1.5 \\times \\frac{0.4}{3 \\times 0.5 \\times (1-0.5)} = 1.5 \\times \\frac{0.4}{3 \\times 0.5 \\times 0.5} = 1.5 \\times \\frac{0.4}{0.75} = \\frac{3}{2} \\times \\frac{0.4}{3/4} = \\frac{3}{2} \\times 0.4 \\times \\frac{4}{3} = 2 \\times 0.4 = 0.8 $$\n偏差为 $0.8$。\n\n**3. 回归调整估计量 $\\Delta_{\\mathrm{adj}}$ 的计算**\n\n回归调整估计量由标准化公式定义：\n$$ \\Delta_{\\mathrm{adj}} = \\int \\left(\\mathbb{E}[Y \\mid A=1, X=x] - \\mathbb{E}[Y \\mid A=0, X=x]\\right) f_{X}(x) \\, dx $$\n在第1部分中，我们已经确定了条件期望 $\\mathbb{E}[Y \\mid A=a, X=x] = \\beta_0 + \\beta_A a + \\beta_X x$。积分内的差值为：\n$$ \\mathbb{E}[Y \\mid A=1, X=x] - \\mathbb{E}[Y \\mid A=0, X=x] = (\\beta_0 + \\beta_A(1) + \\beta_X x) - (\\beta_0 + \\beta_A(0) + \\beta_X x) = \\beta_A $$\n被积函数简化为一个常数 $\\beta_A$。因此，积分变为：\n$$ \\Delta_{\\mathrm{adj}} = \\int_{-1}^{1} \\beta_A f_{X}(x) \\, dx $$\n由于 $\\beta_A$ 是一个常数，我们可以将其从积分中提出：\n$$ \\Delta_{\\mathrm{adj}} = \\beta_A \\int_{-1}^{1} f_{X}(x) \\, dx $$\n概率密度函数在其整个支撑集上的积分等于1。\n$$ \\int_{-1}^{1} f_{X}(x) \\, dx = 1 $$\n因此，调整后的估计量为：\n$$ \\Delta_{\\mathrm{adj}} = \\beta_A \\times 1 = \\beta_A $$\n这表明对混杂因素 $X$ 进行标准化可以恢复真实的平均因果效应。使用给定的参数值 $\\beta_A = 2$：\n$$ \\Delta_{\\mathrm{adj}} = 2 $$\n这是所要求的最终数值。",
            "answer": "$$\\boxed{2}$$"
        },
        {
            "introduction": "除了传统的混淆，观察性研究还面临着更隐蔽的结构性偏倚，其中“不朽时间偏倚” (immortal time bias) 是一个典型例子。本练习将你置于一个场景中，其中治疗组的成员资格取决于患者能否存活到未来的某个特定时间点，这段“不朽”的生存时间会被错误地归功于治疗。通过计算由此产生的虚假保护效应，你将学会识别这种偏倚，并理解为何在分析中正确对齐随访的“零时间点”至关重要。",
            "id": "4616202",
            "problem": "一项观察性队列研究旨在比较接受新疗法的患者与未接受新疗法的患者之间的死亡率，随访期为队列入组后固定的 $T = 120$ 天。所有患者在第 $0$ 天均符合条件。在实践中，仅在第 $t^\\star = 60$ 天时仍然存活的患者中才开始实施该疗法；恰好有 $n_T = 274$ 名患者在第 $60$ 天开始治疗，无人更早开始。所有其他患者（$N - n_T$）仍未接受治疗。治疗开始后的真实因果效应为空（即治疗不改变瞬时死亡风险）。假设所有个体的死亡时间均服从指数分布，其恒定风险率 $\\lambda = 0.01\\,\\text{天}^{-1}$，无论他们是否开始接受治疗。\n\n一种朴素分析方法将暴露分为“曾接受治疗”组与“从未接受治疗”组，其中“曾接受治疗”是从队列入组（第 $0$ 天）时点起定义的。然后，该分析计算了到第 $120$ 天时各组的累积死亡发生率（风险），并构建了一个比值。\n\n仅使用累积发生率和条件概率的核心定义，推导当治疗分配基于未来信息（存活至 $t^\\star$）时，这种朴素分类方法所引入偏倚的预期方向和近似大小，并用不朽时间解释其机制。然后，确定一种时间零点对齐策略，通过使观察性分析在结构上类似于一项资格、治疗分配和随访开始同步的随机对照试验（Randomized Controlled Trial (RCT)），来消除这种偏倚。\n\n哪个选项最准确地陈述了存在偏倚的朴素风险比和有效的校正策略？\n\nA. 朴素的“从基线起曾接受治疗”的累积发生率比值约为 $0.65$（虚假的保护性），因为暴露组是由存活过 $t^\\star$ 定义的，这产生了不朽时间；有效的校正方法是通过模拟随机试验来对齐时间零点与治疗分配：可以将治疗建模为时变暴露，或采用一种在同一 $t^\\star$ 时点为未治疗的对照者分配可比较指数日期的设计（目标试验模拟 (Target Trial Emulation, TTE)）。\n\nB. 朴素的累积发生率比值约为 $1.00$（无偏倚）；仅调整基线混杂因素就足以校正任何问题，无需改变时间起点。\n\nC. 朴素的累积发生率比值约为 $2.00$（虚假的有害性），因为暴露患者累积了更多的人时；有效的校正方法是在治疗开始时对暴露组的随访进行左删失，同时保持未暴露组的随访从队列入组时开始。\n\nD. 朴素的累积发生率比值约为 $0.50$（强保护性），因为排除了暴露组在 $t^\\star$ 之前的事件；有效的校正方法是在两组中都排除 $t^\\star$ 之前的死亡事件，同时保持时间零点在队列入组时。",
            "solution": "用户需要对一个关于流行病学中不朽时间偏倚的问题进行详细的验证和解答。\n\n### 问题验证\n\n**第 1 步：提取已知条件**\n-   **研究类型**：观察性队列研究。\n-   **随访期**：从第 $0$ 天队列入组开始，共 $T = 120$ 天。\n-   **治疗时间**：疗法在第 $t^\\star = 60$ 天开始。\n-   **治疗条件**：只有在第 $t^\\star = 60$ 天仍然存活的患者才有资格并接受治疗。\n-   **治疗组人数**：$n_T = 274$ 名患者在第 $60$ 天开始治疗。\n-   **真实因果效应**：空。治疗不改变死亡风险。\n-   **生存模型**：死亡时间服从指数分布。\n-   **风险率**：所有个体的恒定风险率 $\\lambda = 0.01\\,\\text{天}^{-1}$，无论治疗状态如何。\n-   **朴素分析**：\n    -   在基线（第 $0$ 天）将暴露分类为“曾接受治疗”与“从未接受治疗”。\n    -   该分析计算各组到第 $120$ 天的累积死亡发生率（风险）。\n    -   构建风险比。\n-   **要求推导的内容**：\n    1.  使用核心定义推导偏倚（方向和大小）。\n    2.  用不朽时间解释其机制。\n    3.  确定一种有效的校正策略（时间零点对齐）。\n\n**第 2 步：使用提取的已知条件进行验证**\n-   **科学依据**：该问题坚实地立足于流行病学和生物统计学的基本原则。它描述了一个经典的不朽时间偏倚场景，这是观察性研究中一个有据可查的结构性偏倚。使用具有恒定风险率的指数分布是展示此类概念的标准且有效的建模假设。\n-   **适定性**：该问题是适定的。计算所需的所有参数（$\\lambda$、$t^\\star$、$T$）均已提供。对“朴素分析”方案的描述足够清晰，可以计算出有偏倚的估计值。可以推导出预期风险比的唯一解。给出的治疗患者具体数量 $n_T = 274$ 对于计算预期风险不是必需的，但其包含并未造成矛盾。\n-   **客观性**：语言精确客观，使用了该领域的标准术语。\n\n问题陈述未违反任何无效性标准。这是一个科学上合理、适定且标准的问题，旨在测试对流行病学方法中一个关键概念的理解。\n\n**第 3 步：结论与行动**\n该问题是**有效的**。我将继续进行解答。\n\n### 解题推导\n\n该问题要求计算因朴素分析错误描述随访时间而导致的带偏倚的风险比。疗法的真实因果效应为空，因此所有个体在所有时间的风险率 $\\lambda = 0.01\\,\\text{天}^{-1}$ 都是恒定的。正确分析的风险比应为 $1.0$。任何偏离 $1.0$ 的值都是偏倚。\n\n任何个体的生存函数为 $S(t) = P(\\text{死亡时间} > t) = e^{-\\lambda t}$。\n到时间 $t$ 的累积死亡发生率（风险）为 $CI(t) = P(\\text{死亡时间} \\le t) = 1 - S(t) = 1 - e^{-\\lambda t}$。\n\n**1. “曾接受治疗”组的累积发生率 ($CI_E$)**\n\n朴素分析将在第 $60$ 天接受治疗的个体从队列开始的第 $0$ 天就归类为“曾接受治疗”。该组的一个决定性特征是，每个成员*必须*从第 $0$ 天存活到第 $60$ 天才能接受治疗。这个时期，即 $[0, 60)$ 天，是该组的“不朽时间”。根据定义，他们在此期间不可能经历事件（死亡）。\n\n朴素分析计算的是到第 $T=120$ 天的累积发生率。对于“曾接受治疗”组中的一个个体，他们是由存活至 $t^\\star=60$ 天这一定义所决定的，其到第 $120$ 天的死亡风险是在他们存活超过第 $60$ 天的*条件下*，到第 $120$ 天时死亡的条件概率。\n\n$$ CI_E = P(D \\le 120 \\mid D > 60) $$\n\n使用条件概率的定义 $P(A|B) = P(A \\cap B) / P(B)$：\n事件“$D \\le 120$ 且 $D > 60$”是在区间 $(60, 120]$ 内发生死亡。\n$$ CI_E = \\frac{P(60  D \\le 120)}{P(D > 60)} = \\frac{S(60) - S(120)}{S(60)} = 1 - \\frac{S(120)}{S(60)} $$\n代入生存函数 $S(t) = e^{-\\lambda t}$：\n$$ CI_E = 1 - \\frac{e^{-\\lambda \\times 120}}{e^{-\\lambda \\times 60}} = 1 - e^{-\\lambda(120-60)} = 1 - e^{-60\\lambda} $$\n当 $\\lambda = 0.01\\,\\text{天}^{-1}$ 时：\n$$ CI_E = 1 - e^{-60 \\times 0.01} = 1 - e^{-0.6} $$\n使用近似值 $e^{-0.6} \\approx 0.5488$：\n$$ CI_E \\approx 1 - 0.5488 = 0.4512 $$\n\n**2. “从未接受治疗”组的累积发生率 ($CI_U$)**\n\n“从未接受治疗”组作为对照组。在这种朴素设计中，该组由所有其他患者组成，包括在第 $60$ 天之前死亡的患者。因此，其风险特征代表了整个队列未经任何生存条件限制的风险状况。他们从第 $0$ 天起就处于死亡风险中。该组到第 $120$ 天的累积死亡发生率是无条件概率：\n\n$$ CI_U = P(D \\le 120) = 1 - e^{-120\\lambda} $$\n当 $\\lambda = 0.01\\,\\text{天}^{-1}$ 时：\n$$ CI_U = 1 - e^{-120 \\times 0.01} = 1 - e^{-1.2} $$\n使用近似值 $e^{-1.2} \\approx 0.3012$：\n$$ CI_U \\approx 1 - 0.3012 = 0.6988 $$\n\n**3. 朴素风险比 ($RR_{naive}$)**\n\n带偏倚的风险比是这两个累积发生率的比值：\n$$ RR_{naive} = \\frac{CI_E}{CI_U} = \\frac{1 - e^{-0.6}}{1 - e^{-1.2}} \\approx \\frac{0.4512}{0.6988} \\approx 0.6456 $$\n朴素风险比约为 $0.65$。由于真实的风险比是 $1.0$，这代表了一种虚假的保护效应。产生偏倚的原因是，治疗组被保证了一段“不朽”的生存期，这段时间在分析中对他们有利，而未治疗组在同一时期内却会累积死亡事件。\n\n**4. 有效的校正策略**\n\n偏倚源于随访起点的错位。在随机对照试验（RCT）中，资格确定、治疗分配（随机化）和随访开始都在同一时刻（时间零点）进行。为消除不朽时间偏倚，观察性分析必须模拟这种结构。\n\n-   **对齐时间零点：** 正确的方法是在治疗开始时（即第 $t^\\star = 60$ 天）同时开始对治疗组和未治疗组进行随访。分析将只包括在第 $60$ 天仍然存活且符合条件的个体。治疗组是开始治疗的 $n_T$ 名患者。未治疗的对照组将从在第 $60$ 天同样存活且符合条件但未开始治疗的其他患者中抽取。然后，对于两组，我们将比较后续时期（例如，从第 $60$ 天到第 $120$ 天）的死亡风险。这是**目标试验模拟（TTE）**背后的原则，即“为未治疗的对照者分配可比较的指数日期”。\n-   **时变协变量模型：** 另一种分析方法是在生存模型（如 Cox 比例风险模型）中将暴露状态视为时变协变量。从第 $0$ 天到第 $59$ 天，个体为“未暴露”风险集贡献人时。在第 $60$ 天，如果他们接受治疗，他们就转换到“暴露”风险集。这能正确分配人时，从而避免不朽时间偏倚。\n\n### 逐项分析\n\n**A. 朴素的“从基线起曾接受治疗”的累积发生率比值约为 $0.65$（虚假的保护性），因为暴露组是由存活过 $t^\\star$ 定义的，这产生了不朽时间；有效的校正方法是通过模拟随机试验来对齐时间零点与治疗分配：可以将治疗建模为时变暴露，或采用一种在同一 $t^\\star$ 时点为未治疗的对照者分配可比较指数日期的设计（目标试验模拟 (TTE)）。**\n-   **风险比计算**：计算出的风险比约为 $0.65$。这与选项相符。方向“虚假的保护性”是正确的。\n-   **解释**：所给出的理由，“由存活过 $t^\\star$ 定义的，这产生了不朽时间”，完全正确。\n-   **校正策略**：建议的校正方法，包括将治疗建模为时变暴露和目标试验模拟，是解决此类偏倚的标准、最先进的方法。\n-   **结论**：**正确**。\n\n**B. 朴素的累积发生率比值约为 $1.00$（无偏倚）；仅调整基线混杂因素就足以校正任何问题，无需改变时间起点。**\n-   **风险比计算**：比值不是 $1.00$。我的计算显示存在显著偏倚，得出的比值约为 $0.65$。\n-   **解释/校正**：该偏倚是结构性的（不朽时间），而非由混杂引起。调整基线混杂因素无法校正它。必须解决时间起点问题。\n-   **结论**：**不正确**。\n\n**C. 朴素的累积发生率比值约为 $2.00$（虚假的有害性），因为暴露患者累积了更多的人时；有效的校正方法是在治疗开始时对暴露组的随访进行左删失，同时保持未暴露组的随访从队列入组时开始。**\n-   **风险比计算**：比值约为 $0.65$（保护性），而不是 $2.00$（有害性）。\n-   **解释/校正**：推理有误。所提议的校正方法——只对齐一个组的时间而另一组不对齐——其本身就是一种有偏倚的设计，不能解决问题。\n-   **结论**：**不正确**。\n\n**D. 朴素的累积发生率比值约为 $0.50$（强保护性），因为排除了暴露组在 $t^\\star$ 之前的事件；有效的校正方法是在两组中都排除 $t^\\star$ 之前的死亡事件，同时保持时间零点在队列入组时。**\n-   **风险比计算**：值 $0.50$ 不是累积发生率比值。它是累积风险的比值（$H_E/H_U = (\\lambda \\times 60) / (\\lambda \\times 120) = 0.5$）。虽然相关，但风险比是明确要求计算的量，我的计算结果约为 $0.65$。\n-   **解释/校正**：对偏倚原因的陈述是正确的。所描述的校正方法是界标分析，这是一种有效的方法。然而，根据对“累积发生率（风险）比”的严格解释，其定量声明是不准确的。选项 A 在定量上和对校正措施的描述上都更为精确。\n-   **结论**：**不正确**。",
            "answer": "$$\\boxed{A}$$"
        },
        {
            "introduction": "随机对照试验 (RCT) 虽然是因果推断的“金标准”，但在现实世界中并非完美无瑕，不依从治疗和治疗交叉等问题普遍存在。本练习探讨了在这种复杂情况下，标准的“意向性治疗” (intention-to-treat, ITT) 分析的含义及其局限性。通过这个练习，你将超越“单一正确答案”的思维模式，学会区分不同的因果问题，例如评估“效果” (effectiveness) 与“效力” (efficacy)，并理解它们分别对应着不同的因果估计量 (estimands) 和分析策略。",
            "id": "4616199",
            "problem": "一个公共卫生团队进行了一项$2$臂随机对照试验（RCT），评估血管紧张素受体阻滞剂相对于常规护理在$2$期高血压成年患者中的效果。主要结局是$12$个月内发生主要不良心血管事件。该试验就随机分配而言是双盲的。然而，一项预先设定的补救策略允许常规护理组的患者在重复血压检查结果持续高于安全阈值时更换为活性药物；实际上，约有$30\\%$的常规护理组患者因此更换为活性药物。在被随机分配到活性药物组的患者中，约有$20\\%$因咳嗽和头晕而中止用药。补救性换药和中止用药都更可能发生在血压轨迹较差和短期心血管风险较高的参与者中。在$12$个月时，结局的确定近乎完整。研究人员计划进行意向性治疗（ITT）分析，并正在考虑这种分析是否可能低估临床相关效应，以及在何种情况下替代的估计目标会更可取。\n\n仅使用流行病学和试验设计中的核心因果定义（例如，以随机分配和实际接受的治疗为索引的潜在结局，基线时通过随机化实现的可交换性，以及符合方案、按治疗分析和主分层估计目标的定义），选择所有关于ITT可能低估临床相关效应以及替代估计目标更可取的情况的最恰当陈述，包括解释陷阱的风险。\n\nA. 在常规护理组存在大量随机化后换用活性药物以及活性药物组存在停药的情况下，ITT估计目标（分配效应）可能会稀释按预期服用药物的生物学效应。对于依从治疗的效应而言，符合方案估计目标或依从者平均因果效应估计目标可能更具临床相关性，但有效的估计需要考虑影响依从性和换药的预后因素，否则这些因素会引入选择偏倚。\n\nB. 因为补救治疗是由预先设定的规则触发的，所以在补救性换药时对随访进行删失，并比较剩余的活性药物组与常规护理组患者，凭借基线随机化可以得出无偏的符合方案效应；无需对随机化后的预后因素进行额外调整。\n\nC. 如果一项在$12$个月时报告的次要患者报告结局仅在$12$个月时存活的患者中定义，那么在该结局上的ITT对比可能会低估在无论分配到哪组都会存活的那些人中的效应。一个更具临床针对性的估计目标是在无论在哪种分配下都会存活的个体主分层内的生存者平均因果效应，但确定此估计目标通常需要强的、无法验证的假设，并且容易出现解释陷阱。\n\nD. 因为试验在基线时是双盲的，所以依从性行为在设计上与预后无关；因此，一项按实际接受的治疗来比较患者且不进行调整的按治疗分析将一致地估计所接受治疗的因果效应。\n\nE. 对于在真实世界依从性情况下提供药物的政策决策，ITT估计目标是合适的。对于估计在被提供药物时会服用的患者（依从者）中的效应，使用随机化作为工具变量的依从者平均因果效应可能更可取，但必须谨慎：由于常规护理组中的换药是由血压恶化触发的，如果分配通过接受治疗之外的补救途径影响结局，那么诸如排除限制之类的假设可能会被违反，从而导致解释陷阱。",
            "solution": "问题陈述描述了一个带有随机化后事件的随机对照试验（RCT），具体来说是活性药物组的治疗中断和对照组的治疗转换（交叉）。这些事件不是随机的；它们与预后因素相关。任务是在此背景下评估关于意向性治疗（ITT）估计目标和替代估计目标的几个陈述。\n\n首先，让我们使用潜在结局框架来形式化这个场景。\n令 $Z_i$ 为参与者 $i$ 的随机分配，其中如果分配到血管紧张素受体阻滞剂（ARB）组，则 $Z_i=1$；如果分配到常规护理组，则 $Z_i=0$。\n令 $D_i$ 为参与者 $i$ 实际接受的治疗。由于中断和转换，$D_i$ 不一定等于 $Z_i$。\n令 $Y_i$ 为参与者 $i$ 的结局，即在$12$个月内发生主要不良心血管事件（MACE）。潜在结局表示为 $Y_i(z)$，即在分配 $z$ 下将观察到的参与者 $i$ 的结局。\n\n问题陈述指出：\n- 该试验是一个$2$臂RCT。随机化确保在基线时，由$Z$定义的两组平均而言是可交换的：$E[Y(z=1)] = E[Y(z=1)|Z=1] = E[Y(z=1)|Z=0]$ 且 $E[Y(z=0)] = E[Y(z=0)|Z=1] = E[Y(z=0)|Z=0]$。\n- ITT估计目标是治疗*分配*的平均因果效应：$E[Y(z=1) - Y(z=0)]$。这通过比较两个随机组的平均结局来估计：$E[Y|Z=1] - E[Y|Z=0]$。因为随机化成立，这是对分配效应的无偏估计。\n- 在常规护理组（$Z=0$）中，约有$30\\%$的患者换用活性药物。\n- 在活性药物组（$Z=1$）中，约有$20\\%$的患者中止用药。\n- 关键在于，“补救性换药和中止用药都更可能发生在血压轨迹较差和短期心血管风险较高的参与者中。” 这意味着依从行为是一个随机化后变量，同时也是结局的一个预后因素。\n\n现在，我们将评估每个选项。\n\n**A. 在常规护理组存在大量随机化后换用活性药物以及活性药物组存在停药的情况下，ITT估计目标（分配效应）可能会稀释按预期服用药物的生物学效应。对于依从治疗的效应而言，符合方案估计目标或依从者平均因果效应估计目标可能更具临床相关性，但有效的估计需要考虑影响依从性和换药的预后因素，否则这些因素会引入选择偏倚。**\n这个陈述提出了三个主张：\n1. ITT估计目标可能会稀释生物学效应。ITT分析比较的是一个名义上$100\\%$被分配药物（但实际上只有约$80\\%$的患者在整个期间服药）的组与一个$0\\%$被分配药物（但约有$30\\%$最终接受了药物）的组。真实的暴露对比不是$100\\%$对$0\\%$，而是接近$80\\%$对$30\\%$。这自然会导致估计的效应量相对于$100\\%$依从对$0\\%$依从的假设效应更小（被稀释）。这个主张是正确的。\n2. 对于依从治疗的效应，符合方案（PP）或依从者平均因果效应（CACE）估计目标可能更具临床相关性。这些估计目标旨在估计*接受*或*依从*治疗的效应，而非*被分配*到治疗的效应。这种效应对于想知道实际服用药物后果的临床医生和患者来说通常非常有意义。这个主张是正确的。\n3. 对PP或CACE的有效估计需要考虑影响依从性的预后因素，否则会引入选择偏倚。这是核心挑战。如问题所述，依从性和换药与预后相关。一个简单的、仅根据接受的治疗来比较各组的PP或“按治疗”分析将是有偏的。例如，在按治疗分析中，接受ARB的组将包括来自$Z=1$组中较健康的患者和来自$Z=0$组中需要补救治疗的病情较重的患者。这破坏了随机化并引入了混杂或选择偏倚。有效估计这些效应需要高级统计方法（例如，用于PP的逆概率加权，用于CACE的工具变量分析），这些方法必须适当地考虑导致不依从的因素。这个主张是正确的。\n鉴于该陈述的所有部分都是准确的，整个陈述是正确的。\n**结论：正确。**\n\n**B. 因为补救治疗是由预先设定的规则触发的，所以在补救性换药时对随访进行删失，并比较剩余的活性药物组与常规护理组患者，凭借基线随机化可以得出无偏的符合方案效应；无需对随机化后的预后因素进行额外调整。**\n该陈述描述了一种简单的符合方案分析，其中当参与者偏离方案时，对其进行删失。其主张是，因为规则是“预先设定的”，所以这种做法是无偏的。这是不正确的。换药的原因是高血压，这是结局（MACE）的一个强预测因子。通过从常规护理组中删失病情最重的患者（即那些换药的患者），同时保留活性药物组中病情相当的患者，该分析将比较一个比平均水平更健康的常规护理组与一个承担全部风险的活性药物组。这会引入严重的选择偏倚，使得治疗看起来效果较差甚至有害。规则是预先设定的这一事实并不能防止偏倚；该规则本身通过以一个随机化后的预后因素为条件，使选择偏倚制度化了。基线随机化不能防止随机化后的偏倚。\n**结论：不正确。**\n\n**C. 如果一项在$12$个月时报告的次要患者报告结局仅在$12$个月时存活的患者中定义，那么在该结局上的ITT对比可能会低估在无论分配到哪组都会存活的那些人中的效应。一个更具临床针对性的估计目标是在无论在哪种分配下都会存活的个体主分层内的生存者平均因果效应，但确定此估计目标通常需要强的、无法验证的假设，并且容易出现解释陷阱。**\n此选项讨论了当感兴趣的结局仅为存活者定义时，存在的竞争风险（死亡）问题。\n1. 仅在存活者中分析结局是对一个随机化后变量进行条件化。如果治疗影响生存率，那么即使完整的组在基线时因随机化而具有可比性，两个组中的存活者群体也可能不具可比性。例如，如果药物拯救了本会死亡的体弱者（而这些人会报告较差的结局），那么治疗组存活者群体中的平均患者报告结局可能会看起来更差，导致有偏的估计。偏倚的方向不总是“低估”，但ITT在存活者中的对比对于任何明确定义的因果人群中的效应是有偏的，这个总体观点是正确的。\n2. 该陈述提出生存者平均因果效应（SACE）作为一个更具针对性的估计目标。SACE定义在“始终存活者”的主分层上，即那些无论其治疗分配（$Z=0$或$Z=1$）如何都会存活到$12$个月的个体。这是正确的、因果定义的估计目标，它避免了对随机化后事件的条件化。\n3. 该陈述正确地指出，识别此估计目标是困难的。我们无法从经验上识别出数据中的“始终存活者”分层。其估计依赖于关于生存与结局之间关系的强的、通常无法检验的假设（例如，治疗对生存效应的单调性）。这使得SACE方法在方法论上具有挑战性，其结果的解释取决于那些假设的有效性。\n整个陈述是对因果推断中一个关键问题的正确而细致的描述。\n**结论：正确。**\n\n**D. 因为试验在基线时是双盲的，所以依从性行为在设计上与预后无关；因此，一项按实际接受的治疗来比较患者且不进行调整的按治疗分析将一致地估计所接受治疗的因果效应。**\n这个陈述有根本性的缺陷。双盲可以防止对分配的知晓影响行为。然而，它不能阻止治疗的生理效应（或缺乏效应）影响行为。在这里，停药是由副作用（“咳嗽和头晕”）引起的，这些副作用只有服用活性药物的人才会经历。换药是由疗效不佳（“血压检查结果持续高于安全阈值”）引起的，这是常规护理组的患者所经历的。问题明确指出，这些行为在预后较差的参与者中更可能发生。因此，依从性*并非*与预后无关。按治疗分析，即按患者实际接受的治疗进行分组，破坏了随机化，并比较了在基线预后上存在系统性差异的组。这种不经调整所有混杂因素（在这里是随机化后的时变因素）的分析将会有严重的偏倚。\n**结论：不正确。**\n\n**E. 对于在真实世界依从性情况下提供药物的政策决策，ITT估计目标是合适的。对于估计在被提供药物时会服用的患者（依从者）中的效应，使用随机化作为工具变量的依从者平均因果效应可能更可取，但必须谨慎：由于常规护理组中的换药是由血压恶化触发的，如果分配通过接受治疗之外的补救途径影响结局，那么诸如排除限制之类的假设可能会被违反，从而导致解释陷阱。**\n这个陈述评估了在这种特定背景下ITT和CACE的效用。\n1. “对于政策决策...，ITT估计目标是合适的。” 这是对ITT分析的经典辩护。它估计了提供一种药物的*策略*或*政策*的有效性，考虑了在类似人群中预期的不依从水平。这对于公共卫生和政策具有高度相关性。这个主张是正确的。\n2. “对于估计...依从者中的效应，使用随机化作为工具变量的CACE可能更可取...”。CACE，使用随机分配作为工具变量（IV）来估计，其目标是在那些会依从任何他们被分配到的治疗的亚群中的因果效应。这是估计“功效”效应的一种有效方法，可能比“效果”ITT效应更具科学或临床相关性。这个主张是正确的。\n3. “...必须谨慎：...诸如排除限制之类的假设可能会被违反...”。IV的排除限制假设指出，工具变量（随机分配 $Z$）仅通过其对所接受治疗（$D$）的影响来影响结局（$Y$）。在这个试验中，为$Z=0$组触发了“补救策略”。此策略涉及“重复的血压检查”。这种加强的监测和“补救策略”下的整个管理策略很可能通过除简单接受活性药物之外的途径影响患者的结局（MACE）。例如，增加的临床关注可能导致关于饮食/运动或其他共同干预措施的建议。如果是这样，就存在一条不经过 $D$ 的路径 $Z \\rightarrow \\text{补救策略} \\rightarrow Y$。这将违反排除限制，导致有偏的CACE估计。该陈述正确地指出了这个重要而微妙的风险。\n整个陈述对情况进行了正确而深入的分析。\n**结论：正确。**\n\n总之，陈述A、C和E是对该试验场景中方法学问题和解释陷阱的恰当和正确描述。",
            "answer": "$$\\boxed{ACE}$$"
        }
    ]
}
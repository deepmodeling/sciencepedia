{
    "hands_on_practices": [
        {
            "introduction": "患者姓名是关键的身份标识符，但也极易出现拼写和录入错误。本练习将引导您比较两种核心的字符串相似度度量标准：Jaro-Winkler相似度和Levenshtein距离，以处理姓名中的常见转置错误（例如“Micheal”与“Michael”）。通过这个实践（），您将深入理解不同算法在识别看似不同但实则相同的姓名时的细微差别和各自优势，这是构建稳健患者匹配系统的第一步。",
            "id": "4851050",
            "problem": "一个卫生系统的“主患者索引”正在接受审计，以减少因患者姓名中的拼写错误而产生的重复记录。考虑从同一次“电子健康记录”（EHR）交互中提取的候选姓名对“Micheal”和“Michael”。仅使用记录关联和字符串度量理论中标准的、广为接受的定义作为基本依据，执行以下操作：\n\n1. 使用传统的Jaro–Winkler参数计算两个字符串之间的Jaro–Winkler相似度：缩放因子 $p = 0.1$ 和最大公共前缀长度上限为 $4$ 个字符。\n2. 在标准的单位成本模型下计算两个字符串之间的Levenshtein距离，其中插入、删除和替换的成本均为 $1$。\n3. 从第一性原理出发，简要论述在患者识别工作流程中，这两种度量中哪一种更能忠实地捕捉姓名中常见的换位错误。\n\n按如下方式表示最终的数值结果：\n- 如果可能，将Jaro–Winkler相似度表示为一个精确的有理数（不进行四舍五入）。\n- 将Levenshtein距离表示为一个整数。\n- 以单行矩阵的形式返回这两个结果，顺序为 $\\bigl(\\text{Jaro–Winkler相似度}, \\text{Levenshtein距离}\\bigr)$。\n\n无需四舍五入，最终答案中不包含任何单位。",
            "solution": "这个问题要求计算并比较两个标准字符串相似度度量——Jaro–Winkler相似度和Levenshtein距离——对于字符串对 $s_1 = \\text{\"Micheal\"}$ 和 $s_2 = \\text{\"Michael\"}$ 的值。分析将根据记录关联理论中定义的第一性原理进行。\n\n设两个字符串为 $s_1 = \\text{\"Micheal\"}$ 和 $s_2 = \\text{\"Michael\"}$。字符串的长度为 $|s_1| = 7$ 和 $|s_2| = 7$。\n\n**1. Jaro–Winkler相似度计算**\n\nJaro–Winkler相似度 $d_w$ 是Jaro相似度 $d_j$ 的一种增强。我们首先计算Jaro相似度。\n\nJaro相似度的定义如下：\n$$d_j = \\begin{cases} 0  \\text{如果 } m = 0 \\\\ \\frac{1}{3} \\left( \\frac{m}{|s_1|} + \\frac{m}{|s_2|} + \\frac{m-t}{m} \\right)  \\text{如果 } m > 0 \\end{cases}$$\n其中 $m$ 是匹配字符的数量，$t$ 是换位数的一半。\n\n*   **匹配字符 ($m$)**: 如果来自 $s_1$ 和 $s_2$ 的两个字符相同，并且它们的位置相差不超过 $\\left\\lfloor \\frac{\\max(|s_1|, |s_2|)}{2} \\right\\rfloor - 1$，则认为它们是匹配的。\n    对于这两个字符串，最大距离为 $\\lfloor \\frac{7}{2} \\rfloor - 1 = 3 - 1 = 2$。\n    - $s_1$：M i c h **e a** l\n    - $s_2$：M i c h **a e** l\n    我们在允许的距离内比较字符：\n    - $s_1$ 中的 `M` 与 $s_2$ 中的 `M` 匹配（距离为 $0$）。\n    - $s_1$ 中的 `i` 与 $s_2$ 中的 `i` 匹配（距离为 $0$）。\n    - $s_1$ 中的 `c` 与 $s_2$ 中的 `c` 匹配（距离为 $0$）。\n    - $s_1$ 中的 `h` 与 $s_2$ 中的 `h` 匹配（距离为 $0$）。\n    - $s_1$ 中位置4的 `e` 与 $s_2$ 中位置5的 `e` 匹配（距离 $1 \\le 2$）。\n    - $s_1$ 中位置5的 `a` 与 $s_2$ 中位置4的 `a` 匹配（距离 $1 \\le 2$）。\n    - $s_1$ 中的 `l` 与 $s_2$ 中的 `l` 匹配（距离为 $0$）。\n    $s_1$ 中的所有 $7$ 个字符在 $s_2$ 中都有匹配。因此，匹配字符的数量为 $m=7$。\n\n*   **换位 ($t$)**: 换位是指一对匹配的字符在两个字符串中以不同的顺序出现。我们对齐来自每个字符串的匹配字符序列。\n    - $s_1$ 的匹配序列：`(M, i, c, h, e, a, l)`\n    - $s_2$ 的匹配序列：`(M, i, c, h, a, e, l)`\n    通过比较这两个序列，我们发现第5和第6个位置的字符（`e`, `a`）被交换了。未对齐的字符数为 $2$。换位数 $t$ 是该值的一半。\n    因此，$t = \\frac{2}{2} = 1$。\n\n*   **Jaro相似度 ($d_j$)**: 当 $m=7$ 且 $t=1$ 时：\n    $$d_j = \\frac{1}{3} \\left( \\frac{7}{7} + \\frac{7}{7} + \\frac{7 - 1}{7} \\right) = \\frac{1}{3} \\left( 1 + 1 + \\frac{6}{7} \\right) = \\frac{1}{3} \\left( \\frac{14+6}{7} \\right) = \\frac{1}{3} \\left( \\frac{20}{7} \\right) = \\frac{20}{21}$$\n\n*   **Jaro–Winkler相似度 ($d_w$)**: 该度量通过给予从开头匹配的字符串（公共前缀）更高的分数来改进Jaro相似度。其公式为：\n    $$d_w = d_j + (\\ell \\cdot p \\cdot (1 - d_j))$$\n    其中 $\\ell$ 是字符串开头的公共前缀的长度（上限为 $4$），$p$ 是一个缩放因子（这里 $p=0.1$）。\n    - “Micheal”和“Michael”的公共前缀是“Mich”，长度为 $4$。\n    - 问题指定最大前缀长度上限为 $4$，所以我们使用 $\\ell = 4$。\n    - 给定的缩放因子为 $p = 0.1$。\n    现在我们可以计算 $d_w$：\n    $$d_w = \\frac{20}{21} + \\left( 4 \\cdot 0.1 \\cdot \\left(1 - \\frac{20}{21}\\right) \\right) = \\frac{20}{21} + \\left( \\frac{4}{10} \\cdot \\frac{1}{21} \\right)$$\n    $$d_w = \\frac{20}{21} + \\frac{4}{210} = \\frac{200}{210} + \\frac{4}{210} = \\frac{204}{210}$$\n    化简此分数得到：\n    $$d_w = \\frac{204 \\div 6}{210 \\div 6} = \\frac{34}{35}$$\n\n**2. Levenshtein距离计算**\n\nLevenshtein距离是将在一个字符串转换为另一个字符串所需的最少单字符编辑（插入、删除或替换）次数。每次操作的成本为 $1$。$s_1 = \\text{\"Micheal\"}$ 和 $s_2 = \\text{\"Michael\"}$ 之间的差异是相邻字符 'e' 和 'a' 的换位。\n\n标准的Levenshtein距离没有将“换位”作为成本为 $1$ 的基本操作。换位必须使用可用的操作来建模。将“Micheal”转换为“Michael”主要有两种方法：\n\n*   **方法1：删除和插入**\n    1.  从“Micheal”开始。\n    2.  删除字符 'e'：`Micheal` $\\rightarrow$ `Michal`。成本为 $1$。\n    3.  在正确的位置插入字符 'e'：`Michal` $\\rightarrow$ `Michael`。成本为 $1$。\n    总的Levenshtein距离为 $1 + 1 = 2$。\n\n*   **方法2：两次替换**\n    1.  从“Micheal”开始。\n    2.  将位置4的 'e' 替换为 'a'：`Micheal` $\\rightarrow$ `Michaal`。成本为 $1$。\n    3.  将位置5的 'a' 替换为 'e'：`Michaal` $\\rightarrow$ `Michael`。成本为 $1$。\n    总的Levenshtein距离为 $1 + 1 = 2$。\n\n两种最小编辑路径都得出总成本为 $2$。因此，Levenshtein距离为 $2$。\n\n**3. 关于度量适用性的论证**\n\n“Micheal”与“Michael”之间的错误是一个经典的换位错误，这在手动数据录入中非常常见。这两种度量对这种错误的处理方式有根本的不同。\n\n*   **Jaro-Winkler相似度**: 这个度量被明确设计为对换位敏感。Jaro相似度公式 $d_j = \\frac{1}{3} (\\frac{m}{|s_1|} + \\frac{m}{|s_2|} + \\frac{m-t}{m})$ 包含一个项 $\\frac{m-t}{m}$，直接考虑了匹配字符的顺序。它能识别出所有字符都存在 ($m=7$)，但会根据换位的数量 ($t=1$) 来惩罚相似度分数。这导致了很高的相似度分数（$d_j \\approx 0.952$, $d_w \\approx 0.971$），反映了两个字符串非常接近，仅因一个常见的打字错误而不同的事实。\n\n*   **Levenshtein距离**: 这个度量没有针对换位的基本操作。它必须将这种变化建模为两个独立的单字符错误（一次删除和一次插入，或两次替换）。这导致距离为 $2$。相比之下，单个替换（例如，“Michael” vs. “Michel”）、单个删除（例如，“Michael” vs. “Michal”）或单个插入（例如，“Michael” vs. “Michaell”）都将导致距离为 $1$。通过为一个简单的换位分配成本 $2$，Levenshtein距离将这种常见错误视为比简单替换或插入/删除“差两倍”，这可能与在患者匹配情境中对该错误严重性的感知不符。\n\n**结论**: Jaro-Winkler度量更忠实地捕捉了常见换位错误的本质。其公式内在地识别并为字符重新排序提供了一个特定的、细致的惩罚，而字符重新排序是姓名转录中常见的错误来源。这使得它特别适用于像患者识别这样拼写错误普遍存在的任务。",
            "answer": "$$ \\boxed{\\begin{pmatrix} \\frac{34}{35}  2 \\end{pmatrix}} $$"
        },
        {
            "introduction": "除了姓名，地址等人口统计学信息也对患者识别至关重要，但这些数据往往以非结构化的形式存在，包含大量缩写、拼写错误和格式差异。本练习（）将带您设计一个地址标准化流程，并使用Jaccard相似度来评估标准化前后地址的匹配程度。您将通过计算精确率、召回率和$F_1$分数，亲手量化数据预处理对提升匹配准确性的巨大价值。",
            "id": "4851028",
            "problem": "一家医院正在其主患者索引中对地址进行去重，以提高患者的识别与匹配能力。观察到三条记录的三个地址字符串如下：\n\n- A$_1$：“ $123$ N. Main St., Apt $5\\mathrm{B}$, Sprngfld, IL $62704$ ”\n- A$_2$：“ $123$ North Main Street Apartment $5\\mathrm{B}$ Springfield Illinois $62704$ ”\n- A$_3$：“ $987$ South Maple Rd., Suite $200$, Springfield, IL $62703$ ”\n\n假设地址的基线分词（归一化之前）规则如下：转换为小写；按任何非字母数字字符分割；按原样保留字母数字词元；不进行词干提取或移除停用词。设两个词元集之间的相似度为 Jaccard 相似度，对于集合 $X$ 和 $Y$ 定义为\n$$\nJ(X,Y) = \\frac{|X \\cap Y|}{|X \\cup Y|}。\n$$\n\n现在考虑一个应用于词元级别的确定性归一化流程，使用以下规范化词典（应用于基线分词后的词元）：\n- $\\text{st} \\mapsto \\text{street}$，$\\text{rd} \\mapsto \\text{road}$，$\\text{apt} \\mapsto \\text{apartment}$，$\\text{ste} \\mapsto \\text{suite}$，$\\text{n} \\mapsto \\text{north}$，$\\text{s} \\mapsto \\text{south}$，\n- $\\text{il} \\mapsto \\text{illinois}$，$\\text{sprngfld} \\mapsto \\text{springfield}$。\n所有其他词元保持不变。连字符和标点符号已通过分词移除；归一化过程中不会对字母数字词元进行额外的合并或拆分。\n\n使用以下在去重中标准的记录链接决策规则：当且仅当一对记录的 Jaccard 相似度至少为阈值 $\\tau = 0.3$ 时，将其分类为匹配。真实情况是 A$_1$ 和 A$_2$ 是同一个真实世界地址（真正匹配），而 A$_1$ vs. A$_3$ 和 A$_2$ vs. A$_3$ 都是真正不匹配。\n\n任务：\n1. 使用基线分词为 A$_1$、A$_2$ 和 A$_3$ 构建未归一化的词元集。\n2. 在归一化之前，计算 A$_1$、A$_2$ 和 A$_3$ 之间的所有三个两两 Jaccard 相似度。\n3. 应用归一化词典，获得 A$_1$、A$_2$ 和 A$_3$ 的归一化词元集。\n4. 在归一化之后，计算 A$_1$、A$_2$ 和 A$_3$ 之间的所有三个两两 Jaccard 相似度。\n5. 使用阈值 $\\tau = 0.3$ 和所述的真实情况，分别计算归一化前和归一化后的：\n   - 精确率、召回率和 $F_{1}$ 分数，其中精确率是 $P = \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FP}}$，召回率是 $R = \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FN}}$，$F_{1}$ 分数是调和平均数 $F_{1} = \\frac{2PR}{P+R}$。\n6. 最后，计算由归一化带来的 $F_{1}$ 分数的绝对提升，$\\Delta F_{1} = F_{1}^{(\\text{after})} - F_{1}^{(\\text{before})}$。\n\n将 $\\Delta F_{1}$ 的值（四舍五入到四位有效数字）作为你的最终答案报告。最终答案应表示为一个没有单位的纯数字。",
            "solution": "解答过程遵循问题陈述中概述的六个任务。\n\n**任务 1：未归一化的词元集**\n遵循基线分词规则（小写，按非字母数字字符分割），我们得到每个地址的词元集，分别表示为 $S_1$、$S_2$ 和 $S_3$。\n- 对于 A$_1$：“ $123$ N. Main St., Apt $5\\mathrm{B}$, Sprngfld, IL $62704$ ”\n  $S_1 = \\{\\text{123, n, main, st, apt, 5b, sprngfld, il, 62704}\\}$\n  该集合的大小为 $|S_1| = 9$。\n- 对于 A$_2$：“ $123$ North Main Street Apartment $5\\mathrm{B}$ Springfield Illinois $62704$ ”\n  $S_2 = \\{\\text{123, north, main, street, apartment, 5b, springfield, illinois, 62704}\\}$\n  该集合的大小为 $|S_2| = 9$。\n- 对于 A$_3$：“ $987$ South Maple Rd., Suite $200$, Springfield, IL $62703$ ”\n  $S_3 = \\{\\text{987, south, maple, rd, suite, 200, springfield, il, 62703}\\}$\n  该集合的大小为 $|S_3| = 9$。\n\n**任务 2：两两 Jaccard 相似度（归一化前）**\n我们计算三对集合中每一对的 Jaccard 相似度。\n- 对 (A$_1$, A$_2$)：\n  $S_1 \\cap S_2 = \\{\\text{123, main, 5b, 62704}\\}$。因此， $|S_1 \\cap S_2| = 4$。\n  $|S_1 \\cup S_2| = |S_1| + |S_2| - |S_1 \\cap S_2| = 9 + 9 - 4 = 14$。\n  $J(S_1, S_2) = \\frac{|S_1 \\cap S_2|}{|S_1 \\cup S_2|} = \\frac{4}{14} = \\frac{2}{7}$。\n- 对 (A$_1$, A$_3$)：\n  $S_1 \\cap S_3 = \\{\\text{il}\\}$。因此， $|S_1 \\cap S_3| = 1$。\n  $|S_1 \\cup S_3| = |S_1| + |S_3| - |S_1 \\cap S_3| = 9 + 9 - 1 = 17$。\n  $J(S_1, S_3) = \\frac{|S_1 \\cap S_3|}{|S_1 \\cup S_3|} = \\frac{1}{17}$。\n- 对 (A$_2$, A$_3$)：\n  $S_2 \\cap S_3 = \\{\\text{springfield}\\}$。因此， $|S_2 \\cap S_3| = 1$。\n  $|S_2 \\cup S_3| = |S_2| + |S_3| - |S_2 \\cap S_3| = 9 + 9 - 1 = 17$。\n  $J(S_2, S_3) = \\frac{|S_2 \\cap S_3|}{|S_2 \\cup S_3|} = \\frac{1}{17}$。\n\n**任务 3：归一化词元集**\n我们将给定的归一化词典应用于未归一化的词元集，以获得归一化后的集合 $S'_1$、$S'_2$ 和 $S'_3$。\n- 对于 $S_1$：\n  $S'_1 = \\{\\text{123, north, main, street, apartment, 5b, springfield, illinois, 62704}\\}$。大小为 $|S'_1| = 9$。\n- 对于 $S_2$：$S_2$ 中没有词元是归一化词典中的键。\n  $S'_2 = S_2 = \\{\\text{123, north, main, street, apartment, 5b, springfield, illinois, 62704}\\}$。大小为 $|S'_2| = 9$。\n- 对于 $S_3$：我们应用规则 $\\text{rd} \\mapsto \\text{road}$ 和 $\\text{il} \\mapsto \\text{illinois}$。词元 'south' 和 'suite' 不是词典的键，所以它们保持不变。\n  $S'_3 = \\{\\text{987, south, maple, road, suite, 200, springfield, illinois, 62703}\\}$。大小为 $|S'_3| = 9$。\n\n**任务 4：两两 Jaccard 相似度（归一化后）**\n- 对 (A$_1$, A$_2$)：\n  集合 $S'_1$ 和 $S'_2$ 是相同的。\n  $J(S'_1, S'_2) = \\frac{|S'_1 \\cap S'_2|}{|S'_1 \\cup S'_2|} = \\frac{9}{9} = 1$。\n- 对 (A$_1$, A$_3$)：\n  $S'_1 \\cap S'_3 = \\{\\text{springfield, illinois}\\}$。因此， $|S'_1 \\cap S'_3| = 2$。\n  $|S'_1 \\cup S'_3| = |S'_1| + |S'_3| - |S'_1 \\cap S'_3| = 9 + 9 - 2 = 16$。\n  $J(S'_1, S'_3) = \\frac{|S'_1 \\cap S'_3|}{|S'_1 \\cup S'_3|} = \\frac{2}{16} = \\frac{1}{8}$。\n- 对 (A$_2$, A$_3$)：\n  $S'_2 \\cap S'_3 = \\{\\text{springfield, illinois}\\}$。因此， $|S'_2 \\cap S'_3| = 2$。\n  $|S'_2 \\cup S'_3| = |S'_2| + |S'_3| - |S'_2 \\cap S'_3| = 9 + 9 - 2 = 16$。\n  $J(S'_2, S'_3) = \\frac{|S'_2 \\cap S'_3|}{|S'_2 \\cup S'_3|} = \\frac{2}{16} = \\frac{1}{8}$。\n\n**任务 5：性能指标（精确率、召回率、F1）**\n真正匹配（正例）的总数为 $P_{total} = 1$（A$_1$,A$_2$），真正不匹配（负例）的总数为 $N_{total} = 2$（A$_1$,A$_3$ 和 A$_2$,A$_3$）。如果一对记录的相似度 $\\ge \\tau = 0.3$，则将其分类为匹配。\n\n**归一化前：**\n- $J(S_1, S_2) = \\frac{2}{7} \\approx 0.2857  0.3$。这是一个真正匹配，但被分类为不匹配（假阴性，FN）。\n- $J(S_1, S_3) = \\frac{1}{17} \\approx 0.0588  0.3$。这是一个真正不匹配，被分类为不匹配（真阴性，TN）。\n- $J(S_2, S_3) = \\frac{1}{17} \\approx 0.0588  0.3$。这是一个真正不匹配，被分类为不匹配（真阴性，TN）。\n- 计数：$\\mathrm{TP}_{\\text{before}} = 0$，$\\mathrm{FP}_{\\text{before}} = 0$，$\\mathrm{TN}_{\\text{before}} = 2$，$\\mathrm{FN}_{\\text{before}} = 1$。\n- 精确率：$P_{\\text{before}} = \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FP}} = \\frac{0}{0+0}$，按照惯例为 $0$。\n- 召回率：$R_{\\text{before}} = \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FN}} = \\frac{0}{0+1} = 0$。\n- $F_1$ 分数：$F_{1}^{(\\text{before})} = \\frac{2 P R}{P+R} = 0$，因为 $P=0$ 且 $R=0$。\n\n**归一化后：**\n- $J(S'_1, S'_2) = 1 \\ge 0.3$。这是一个真正匹配，被分类为匹配（真阳性，TP）。\n- $J(S'_1, S'_3) = \\frac{1}{8} = 0.125  0.3$。这是一个真正不匹配，被分类为不匹配（真阴性，TN）。\n- $J(S'_2, S'_3) = \\frac{1}{8} = 0.125  0.3$。这是一个真正不匹配，被分类为不匹配（真阴性，TN）。\n- 计数：$\\mathrm{TP}_{\\text{after}} = 1$，$\\mathrm{FP}_{\\text{after}} = 0$，$\\mathrm{TN}_{\\text{after}} = 2$，$\\mathrm{FN}_{\\text{after}} = 0$。\n- 精确率：$P_{\\text{after}} = \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FP}} = \\frac{1}{1+0} = 1$。\n- 召回率：$R_{\\text{after}} = \\frac{\\mathrm{TP}}{\\mathrm{TP}+\\mathrm{FN}} = \\frac{1}{1+0} = 1$。\n- $F_1$ 分数：$F_{1}^{(\\text{after})} = \\frac{2 P R}{P+R} = \\frac{2 \\cdot 1 \\cdot 1}{1+1} = \\frac{2}{2} = 1$。\n\n**任务 6：F1 分数的绝对提升**\n$F_1$ 分数的绝对提升是归一化后的分数与归一化前的分数之差。\n$\\Delta F_{1} = F_{1}^{(\\text{after})} - F_{1}^{(\\text{before})} = 1 - 0 = 1$。\n四舍五入到四位有效数字得到 $1.000$。",
            "answer": "$$\n\\boxed{1.000}\n$$"
        },
        {
            "introduction": "在真实的匹配场景中，我们需要综合多个字段（如姓名、出生日期、邮政编码）的信息来做出最终判断。本练习（）将向您介绍概率性患者识别的核心方法——Fellegi-Sunter模型。您将学习如何使用$m$概率和$u$概率计算对数似然比，从而将来自不同字段的证据进行加权组合，最终做出“匹配”、“不匹配”或“需人工审核”的科学决策。",
            "id": "4851015",
            "problem": "某医院系统遵循 Fellegi–Sunter 框架，在给定真实匹配状态下字段匹配度条件独立的假设下，实施概率性患者识别。对于每对候选记录，该系统比较 $3$ 个字段：名字、出生日期和邮政编码，并为每个字段分配几个匹配级别之一。对于每个字段和级别，系统指定了 $m$-概率（如果记录对是真实匹配，观察到该级别的概率）和 $u$-概率（如果记录对是真实非匹配，观察到该级别的概率）。决策规则对使用自然对数计算的总对数似然比采用双阈值策略：如果总对数似然比至少为上阈值，则接受为链接；如果最多为下阈值，则拒绝为非链接；否则发送进行人工审核。\n\n字段、其匹配级别以及相应的 $m$-概率和 $u$-概率如下：\n\n- 名字：\n  - 精确匹配：$m=0.92$, $u=0.04$\n  - 仅发音匹配：$m=0.05$, $u=0.10$\n  - 不匹配：$m=0.03$, $u=0.86$\n\n- 出生日期：\n  - 年月日精确匹配：$m=0.985$, $u=0.002$\n  - 仅年份匹配：$m=0.012$, $u=0.010$\n  - 不匹配：$m=0.003$, $u=0.988$\n\n- 邮政编码：\n  - 5位字符编码精确匹配：$m=0.90$, $u=0.06$\n  - 仅前缀匹配 (前3个字符)：$m=0.08$, $u=0.18$\n  - 不匹配：$m=0.02$, $u=0.76$\n\n观察到某个特定的候选对具有以下匹配模式：\n- 名字：仅发音匹配\n- 出生日期：年月日精确匹配\n- 邮政编码：仅前缀匹配\n\n系统对总对数似然比（自然对数）使用以下阈值：如果至少为 $\\ln(100)$ 则接受，如果最多为 $\\ln(0.05)$ 则拒绝，否则审核。\n\n在标准的条件独立模型下，使用自然对数计算这对记录的总对数似然比，并说明阈值所暗示的决策类别。最终数值答案仅报告计算出的对数似然比，四舍五入至四位有效数字。无需单位。",
            "solution": "该问题要求计算给定候选记录对的总对数似然比，并确定由此产生的决策。Fellegi-Sunter 模型为该计算提供了框架。\n\n对于单个字段 $i$ 的特定匹配级别，其对数似然比或权重由下式给出：\n$$\nW_i = \\ln\\left(\\frac{m_i}{u_i}\\right)\n$$\n其中 $m_i$ 是在记录对为真实匹配的情况下观察到该匹配级别的概率，而 $u_i$ 是在记录对为真实非匹配的情况下观察到该匹配级别的概率。问题使用自然对数，记为 $\\ln$。\n\n问题陈述中指出，系统假定字段匹配度是条件独立的。这个假设允许总对数似然比 $W_{total}$ 计算为每个字段的单个权重之和：\n$$\nW_{total} = \\sum_{i=1}^{N} W_i\n$$\n在这种情况下，有 $N=3$ 个字段：名字（FN）、出生日期（DOB）和邮政编码（PC）。\n\n特定的候选对具有以下观察到的匹配级别：\n1.  名字：仅发音匹配\n2.  出生日期：年月日精确匹配\n3.  邮政编码：仅前缀匹配\n\n我们从问题陈述中检索相应的 $m$ 和 $u$ 概率：\n- 对于名字（仅发音匹配）：$m_{FN} = 0.05$ 和 $u_{FN} = 0.10$。\n- 对于出生日期（精确匹配）：$m_{DOB} = 0.985$ 和 $u_{DOB} = 0.002$。\n- 对于邮政编码（仅前缀匹配）：$m_{PC} = 0.08$ 和 $u_{PC} = 0.18$。\n\n现在，我们计算每个字段的权重：\n- 名字的权重：\n$$\nW_{FN} = \\ln\\left(\\frac{m_{FN}}{u_{FN}}\\right) = \\ln\\left(\\frac{0.05}{0.10}\\right) = \\ln(0.5)\n$$\n- 出生日期的权重：\n$$\nW_{DOB} = \\ln\\left(\\frac{m_{DOB}}{u_{DOB}}\\right) = \\ln\\left(\\frac{0.985}{0.002}\\right) = \\ln(492.5)\n$$\n- 邮政编码的权重：\n$$\nW_{PC} = \\ln\\left(\\frac{m_{PC}}{u_{PC}}\\right) = \\ln\\left(\\frac{0.08}{0.18}\\right) = \\ln\\left(\\frac{8}{18}\\right) = \\ln\\left(\\frac{4}{9}\\right)\n$$\n总对数似然比是这些单个权重的总和：\n$$\nW_{total} = W_{FN} + W_{DOB} + W_{PC} = \\ln(0.5) + \\ln(492.5) + \\ln\\left(\\frac{4}{9}\\right)\n$$\n利用对数性质 $\\ln(a) + \\ln(b) = \\ln(ab)$，我们可以简化表达式：\n$$\nW_{total} = \\ln\\left(0.5 \\times 492.5 \\times \\frac{4}{9}\\right)\n$$\n我们在对数内部进行乘法运算：\n$$\nW_{total} = \\ln\\left(\\frac{1}{2} \\times \\frac{985}{2} \\times \\frac{4}{9}\\right) = \\ln\\left(\\frac{985 \\times 4}{4 \\times 9}\\right) = \\ln\\left(\\frac{985}{9}\\right)\n$$\n现在，我们计算数值：\n$$\nW_{total} \\approx \\ln(109.444...) \\approx 4.695428406\n$$\n问题要求答案四舍五入到四位有效数字。前四位有效数字是 $4$、$6$、$9$ 和 $5$。第五位数字是 $4$，所以我们向下舍入。\n$$\nW_{total} \\approx 4.695\n$$\n接下来，我们通过将 $W_{total}$ 与给定的阈值进行比较来确定决策类别。\n- 上阈值：$T_{upper} = \\ln(100) \\approx 4.60517$\n- 下阈值：$T_{lower} = \\ln(0.05) \\approx -2.99573$\n\n我们计算出的总权重是 $W_{total} \\approx 4.695$。\n与阈值比较：\n$$\n-2.99573  4.695\n$$\n$$\n4.695 > 4.60517\n$$\n由于 $W_{total} > T_{upper}$，决策规则是接受这对记录为链接。\n\n问题要求将计算出的对数似然比作为最终的数值答案。",
            "answer": "$$\n\\boxed{4.695}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "随着可穿戴设备和移动健康应用的普及，我们如何确保它们收集的生理数据（如心率）足够准确以用于临床决策？本练习将指导您使用一种核心的统计方法——Bland-Altman分析，来量化一种新测量工具（如智能手表）与公认的“金标准”（如心电图ECG）之间的一致性。通过这项实践，您将学会评估新设备的系统偏差和随机误差，并根据临床可接受阈值判断其是否适用于医疗场景 。",
            "id": "4955177",
            "problem": "一个远程医疗项目将一款腕戴式可穿戴设备的心率读数与临床级心电图（ECG）的同步测量值进行比较评估。对于$n=12$名处于静息状态的成年人，分别记录了他们的可穿戴设备心率（单位：次/分钟，$\\mathrm{bpm}$）和ECG心率（单位：$\\mathrm{bpm}$）作为配对测量值：\n$$(\\text{可穿戴设备}, \\text{ECG}) = (65, 62),\\ (74, 75),\\ (93, 88),\\ (66, 70),\\ (95, 95),\\ (82, 80),\\ (74, 76),\\ (88, 84),\\ (69, 72),\\ (91, 90),\\ (77, 78),\\ (83, 83).$$\n假设测量误差（可穿戴设备读数减去ECG读数）在受试者中近似呈正态分布，并应用Bland–Altman方法来量化一致性。从临床验证中测量误差评估的基本统计学原理出发，计算：\n- 平均偏差（定义为可穿戴设备读数与ECG读数之差的平均值），以及\n- 双侧$95\\%$一致性界限。\n\n然后，使用以下为数字健康领域静息心率监测预定义的阈值来解释其临床可接受性：如果平均偏差的绝对值小于或等于$1\\,\\mathrm{bpm}$，并且双侧$95\\%$一致性界限位于零点周围$\\pm 5\\,\\mathrm{bpm}$的范围内，则认为该可穿戴设备在临床上是可接受的。\n\n将您的最终数值结果以$[\\text{平均偏差},\\ \\text{一致性下限},\\ \\text{一致性上限}]$的顺序表示为行向量。将您的答案四舍五入至三位有效数字。所有中间量和最终量均以$\\mathrm{bpm}$为单位表示，但不要在最终的方框向量中包含单位。",
            "solution": "该问题要求应用Bland–Altman方法来评估可穿戴设备与临床级ECG在心率测量方面的一致性。该分析基于一组$n=12$的配对测量值。此方法的核心是计算两种测量技术之间差值的均值和标准差。\n\n首先，我们将每个受试者（$i=1, \\dots, 12$）的差值$d_i$定义为可穿戴设备的测量值减去ECG的测量值。\n设配对测量值表示为$(W_i, E_i)$。则$d_i = W_i - E_i$。计算出的差值如下：\n$d_1 = 65 - 62 = 3$\n$d_2 = 74 - 75 = -1$\n$d_3 = 93 - 88 = 5$\n$d_4 = 66 - 70 = -4$\n$d_5 = 95 - 95 = 0$\n$d_6 = 82 - 80 = 2$\n$d_7 = 74 - 76 = -2$\n$d_8 = 88 - 84 = 4$\n$d_9 = 69 - 72 = -3$\n$d_{10} = 91 - 90 = 1$\n$d_{11} = 77 - 78 = -1$\n$d_{12} = 83 - 83 = 0$\n\n差值集合为$\\{3, -1, 5, -4, 0, 2, -2, 4, -3, 1, -1, 0\\}$。\n\n第一个要计算的量是平均偏差，即这些差值的样本均值，记为$\\bar{d}$。\n$$\n\\bar{d} = \\frac{1}{n} \\sum_{i=1}^{n} d_i\n$$\n差值的总和为：\n$$\n\\sum_{i=1}^{12} d_i = 3 + (-1) + 5 + (-4) + 0 + 2 + (-2) + 4 + (-3) + 1 + (-1) + 0 = 4\n$$\n因此，平均偏差为：\n$$\n\\bar{d} = \\frac{4}{12} = \\frac{1}{3} \\approx 0.3333... \\ \\mathrm{bpm}\n$$\n\n接下来，我们计算差值的样本标准差$s_d$。样本标准差的公式为：\n$$\ns_d = \\sqrt{\\frac{1}{n-1} \\sum_{i=1}^{n} (d_i - \\bar{d})^2}\n$$\n为了计算这个值，我们可以使用计算公式 $\\sum_{i=1}^{n} (d_i - \\bar{d})^2 = \\sum_{i=1}^{n} d_i^2 - \\frac{(\\sum_{i=1}^{n} d_i)^2}{n}$。\n首先，我们求出差值的平方和：\n$$\n\\sum_{i=1}^{12} d_i^2 = 3^2 + (-1)^2 + 5^2 + (-4)^2 + 0^2 + 2^2 + (-2)^2 + 4^2 + (-3)^2 + 1^2 + (-1)^2 + 0^2\n$$\n$$\n\\sum_{i=1}^{12} d_i^2 = 9 + 1 + 25 + 16 + 0 + 4 + 4 + 16 + 9 + 1 + 1 + 0 = 86\n$$\n现在我们可以计算离差平方和：\n$$\n\\sum_{i=1}^{12} (d_i - \\bar{d})^2 = 86 - \\frac{4^2}{12} = 86 - \\frac{16}{12} = 86 - \\frac{4}{3} = \\frac{258 - 4}{3} = \\frac{254}{3}\n$$\n样本方差$s_d^2$为：\n$$\ns_d^2 = \\frac{1}{12-1} \\left( \\frac{254}{3} \\right) = \\frac{254}{33}\n$$\n样本标准差为：\n$$\ns_d = \\sqrt{\\frac{254}{33}} \\approx 2.7743... \\ \\mathrm{bpm}\n$$\n\n双侧$95\\%$一致性界限（LOA）的定义是为了捕获未来$95\\%$的测量差值预期会落入的区间。假设差值呈正态分布，该区间可根据样本数据估计为$\\bar{d} \\pm 1.96 s_d$。数值$1.96$是对应于标准正态分布中心$95\\%$区域的z分数。\n$$\n\\text{LOA} = \\bar{d} \\pm 1.96 s_d\n$$\n一致性区间的半宽度为：\n$$\n1.96 s_d = 1.96 \\times \\sqrt{\\frac{254}{33}} \\approx 1.96 \\times 2.7743... \\approx 5.4377... \\ \\mathrm{bpm}\n$$\n一致性下限（LLA）为：\n$$\n\\text{LLA} = \\bar{d} - 1.96 s_d \\approx \\frac{1}{3} - 5.4377... \\approx 0.3333... - 5.4377... \\approx -5.1044... \\ \\mathrm{bpm}\n$$\n一致性上限（ULA）为：\n$$\n\\text{ULA} = \\bar{d} + 1.96 s_d \\approx \\frac{1}{3} + 5.4377... \\approx 0.3333... + 5.4377... \\approx 5.7710... \\ \\mathrm{bpm}\n$$\n问题要求将最终数值结果四舍五入到三位有效数字。\n平均偏差 $= 0.333 \\ \\mathrm{bpm}$。\n一致性下限 $= -5.10 \\ \\mathrm{bpm}$。\n一致性上限 $= 5.77 \\ \\mathrm{bpm}$。\n\n最后，我们根据预定义的阈值来解释其临床可接受性。\n1. 平均偏差的绝对值：$|\\bar{d}| \\approx |0.333| = 0.333 \\ \\mathrm{bpm}$。由于$0.333 \\le 1$，此标准得到满足。系统性偏差在临床上是可接受的。\n2. $95\\%$一致性界限：该区间约为$[-5.10, 5.77]$。标准要求该区间位于零点周围的$\\pm 5 \\ \\mathrm{bpm}$范围内，即$[-5, 5]$内。计算出的一致性下限（$-5.10$）低于$-5$，而上限（$5.77$）高于$5$。因此，此标准未得到满足。\n\n该可穿戴设备表现出可接受的微小系统性误差（偏差），但其随机误差（变异性）过大，根据指定标准不能被认为在临床上是可接受的。\n\n最终需报告的数值是平均偏差、一致性下限和一致性上限，并四舍五入至三位有效数字。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.333  -5.10  5.77\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "数字健康研究常常依赖于自愿使用某个应用程序或设备的用户所产生的数据。这种“自我选择”现象可能导致数据分析中出现隐蔽的陷阱。本练习将通过一个具体的案例，带您深入理解一种被称为“对撞偏倚”（collider bias）的选择偏倚，它可能在两个原本独立的变量（例如年龄 $A$ 和遗传风险 $D$）之间制造出虚假的关联。完成这项练习后，您将能识别这类关键的数据分析问题，并理解为何从特定用户群体中得出的结论可能无法推广到普通人群 。",
            "id": "4955183",
            "problem": "一个医院系统正在试用一款智能手机远程医疗应用程序，用于监测慢性病患者。信息学团队希望利用应用程序收集的数据来推断在总患者群体中存在的关联。设 $A$ 表示年龄类别（$A=1$ 代表年轻人，$A=0$ 代表老年人），$D$ 表示某种慢性病的遗传风险状态（$D=1$ 代表高风险基因型，否则为 $D=0$），$U$ 表示应用程序的使用情况（$U=1$ 表示患者使用该应用，否则为 $U=0$）。假设在总人群中，$A$ 和 $D$ 是独立的，且 $P(A=1)=0.5$ 和 $P(D=1)=0.5$。应用程序的使用受 $A$ 和 $D$ 的共同影响，其选择机制如下：\n- $P(U=1 \\mid A=1, D=1) = 0.9$\n- $P(U=1 \\mid A=1, D=0) = 0.5$\n- $P(U=1 \\mid A=0, D=1) = 0.5$\n- $P(U=1 \\mid A=0, D=0) = 0.1$\n\n信息学团队将其分析限制在应用程序用户中（即以 $U=1$ 为条件），并报告了用户中 $A$ 和 $D$ 之间存在明显的关联。\n\n仅使用概率论的核心定义（独立性、条件概率和贝叶斯法则），以及流行病学中的选择偏倚和对撞偏倚概念，判断在这一数字健康研究场景中，以下哪些陈述是正确的：\n\nA. 在完整人群中（不受 $U$ 的限制），$A$ 和 $D$ 是独立的，因此 $P(D=1 \\mid A=1)=P(D=1 \\mid A=0)=0.5$。\n\nB. 在应用程序用户中（$U=1$），$P(D=1 \\mid A=1, U=1)  P(D=1 \\mid A=0, U=1)$，这表明以应用程序使用为条件会诱导出 $A$ 和 $D$ 之间的关联。\n\nC. 在应用程序用户中（$U=1$），$A$ 和 $D$ 之间的比值比等于 $1$，表示没有关联。\n\nD. 以 $U=1$ 为条件就是以一个对撞因子为条件，因为 $A$ 和 $D$ 都对 $U$ 有因果影响；因此，即使 $A$ 和 $D$ 在人群中是独立的，以 $U=1$ 为条件也可以在它们之间诱导出关联。\n\nE. 用户中 $A$ 和 $D$ 之间诱导出的关联反映了 $A$ 对 $D$ 的真实因果效应。\n\nF. 根据给定的数值，应用程序用户中（$U=1$）$A$ 和 $D$ 之间的比值比等于 $0.36$。\n\n选择所有适用项。",
            "solution": "这是一个有效的问题。以下是解题的详细推导过程。\n\n我们已知以下信息：\n-   在总人群中，$A$（年龄）和 $D$（遗传风险）是独立的。\n-   $P(A=1) = 0.5$, $P(A=0) = 0.5$\n-   $P(D=1) = 0.5$, $P(D=0) = 0.5$\n-   应用使用 ($U$) 的条件概率如下：\n    -   $P(U=1 \\mid A=1, D=1) = 0.9$\n    -   $P(U=1 \\mid A=1, D=0) = 0.5$\n    -   $P(U=1 \\mid A=0, D=1) = 0.5$\n    -   $P(U=1 \\mid A=0, D=0) = 0.1$\n\n现在我们逐一评估每个陈述。\n\n**陈述 A: 在完整人群中（不受 $U$ 的限制），$A$ 和 $D$ 是独立的，因此 $P(D=1 \\mid A=1)=P(D=1 \\mid A=0)=0.5$。**\n\n题目明确说明，在总人群中，$A$ 和 $D$ 是独立的。独立性的定义之一是 $P(D \\mid A) = P(D)$。\n因为 $P(D=1)=0.5$，所以 $P(D=1 \\mid A=1) = P(D=1) = 0.5$ 且 $P(D=1 \\mid A=0) = P(D=1) = 0.5$。\n因此，**陈述 A 是正确的**。\n\n**评估在应用用户（$U=1$）中的关联**\n\n为了评估陈述 B、C 和 F，我们需要计算在以 $U=1$ 为条件下的概率。我们将使用贝叶斯法则：\n$P(D=1 \\mid A, U=1) = \\frac{P(U=1 \\mid A, D=1) P(D=1 \\mid A)}{P(U=1 \\mid A)}$\n由于 $A$ 和 $D$ 独立，我们知道 $P(D=1 \\mid A) = P(D=1) = 0.5$。\n\n首先，我们使用全概率公式计算分母 $P(U=1 \\mid A=1)$ 和 $P(U=1 \\mid A=0)$：\n$$P(U=1 \\mid A=1) = P(U=1 \\mid A=1, D=1)P(D=1 \\mid A=1) + P(U=1 \\mid A=1, D=0)P(D=0 \\mid A=1)$$\n因为 $A, D$ 独立, $P(D=1 \\mid A=1) = P(D=1)=0.5$ 且 $P(D=0 \\mid A=1) = P(D=0)=0.5$。\n$$P(U=1 \\mid A=1) = (0.9)(0.5) + (0.5)(0.5) = 0.45 + 0.25 = 0.70$$\n\n同样地，对于 $A=0$：\n$$P(U=1 \\mid A=0) = P(U=1 \\mid A=0, D=1)P(D=1 \\mid A=0) + P(U=1 \\mid A=0, D=0)P(D=0 \\mid A=0)$$\n$$P(U=1 \\mid A=0) = (0.5)(0.5) + (0.1)(0.5) = 0.25 + 0.05 = 0.30$$\n\n现在我们可以计算我们感兴趣的条件概率：\n对于年轻人 ($A=1$):\n$$P(D=1 \\mid A=1, U=1) = \\frac{P(U=1 \\mid A=1, D=1) P(D=1 \\mid A=1)}{P(U=1 \\mid A=1)} = \\frac{(0.9)(0.5)}{0.70} = \\frac{0.45}{0.70} = \\frac{45}{70} = \\frac{9}{14} \\approx 0.643$$\n对于老年人 ($A=0$):\n$$P(D=1 \\mid A=0, U=1) = \\frac{P(U=1 \\mid A=0, D=1) P(D=1 \\mid A=0)}{P(U=1 \\mid A=0)} = \\frac{(0.5)(0.5)}{0.30} = \\frac{0.25}{0.30} = \\frac{25}{30} = \\frac{5}{6} \\approx 0.833$$\n\n**陈述 B: 在应用程序用户中（$U=1$），$P(D=1 \\mid A=1, U=1)  P(D=1 \\mid A=0, U=1)$，这表明以应用程序使用为条件会诱导出 $A$ 和 $D$ 之间的关联。**\n\n根据我们的计算， $9/14 \\approx 0.643$ 并且 $5/6 \\approx 0.833$。\n由于 $0.643  0.833$，该不等式成立。这表明，在应用用户中，年轻与高遗传风险的关联性（概率）低于年老与高遗传风险的关联性。这证明了以 $U=1$ 为条件确实在 $A$ 和 $D$ 之间诱导出了关联。\n因此，**陈述 B 是正确的**。\n\n**陈述 D: 以 $U=1$ 为条件就是以一个对撞因子为条件，因为 $A$ 和 $D$ 都对 $U$ 有因果影响；因此，即使 $A$ 和 $D$ 在人群中是独立的，以 $U=1$ 为条件也可以在它们之间诱导出关联。**\n\n该陈述正确地描述了对撞偏倚的概念。$A$ 和 $D$ 是一个共同效应 $U$ 的独立原因。其因果图为 $A \\rightarrow U \\leftarrow D$。在这种结构中，$U$ 是一个“对撞因子”。以对撞因子或其后代为条件，可以在其原因（$A$ 和 $D$）之间诱导出统计关联。这正是本场景中发生的情况，正如对陈述 B 的计算所证明的那样。\n因此，**陈述 D 是正确的**。\n\n**陈述 E: 用户中 $A$ 和 $D$ 之间诱导出的关联反映了 $A$ 对 $D$ 的真实因果效应。**\n\n这种关联是通过以对撞因子 $U$ 为条件而诱导出来的。这是一种选择偏倚，而不是 $A$ 对 $D$ 的真实因果效应。在总人群中，它们是独立的。此外，从生物学上讲，年龄也不可能导致一个人的基因型发生改变。\n因此，**陈述 E 是不正确的**。\n\n**陈述 C 和 F: 我们需要计算应用程序用户（$U=1$）中 $A$ 和 $D$ 之间关联的比值比（OR）。**\n\n比值比 (OR) 的计算公式为：\n$$OR = \\frac{\\text{Odds}(D=1 \\mid A=1, U=1)}{\\text{Odds}(D=1 \\mid A=0, U=1)}$$\n首先，计算每个年龄组的优势比 (odds)。\n对于年轻人 ($A=1$):\n$P(D=0 \\mid A=1, U=1) = 1 - P(D=1 \\mid A=1, U=1) = 1 - 9/14 = 5/14$\n$$\\text{Odds}(D=1 \\mid A=1, U=1) = \\frac{P(D=1 \\mid A=1, U=1)}{P(D=0 \\mid A=1, U=1)} = \\frac{9/14}{5/14} = \\frac{9}{5} = 1.8$$\n对于老年人 ($A=0$):\n$P(D=0 \\mid A=0, U=1) = 1 - P(D=1 \\mid A=0, U=1) = 1 - 5/6 = 1/6$\n$$\\text{Odds}(D=1 \\mid A=0, U=1) = \\frac{P(D=1 \\mid A=0, U=1)}{P(D=0 \\mid A=0, U=1)} = \\frac{5/6}{1/6} = 5$$\n现在计算比值比：\n$$OR = \\frac{1.8}{5} = \\frac{9/5}{5} = \\frac{9}{25} = 0.36$$\n由于比值比是 $0.36$（不等于 $1$），这再次确认了在以 $U=1$ 为条件的人群中存在关联。\n因此，**陈述 F 是正确的**，而**陈述 C 是不正确的**。\n\n**总结**\n正确的陈述是 A、B、D 和 F。",
            "answer": "$$\\boxed{ABDF}$$"
        },
        {
            "introduction": "一个人工智能（AI）模型在预测疾病风险时可能拥有很高的准确率，但这是否意味着它在临床实践中一定有用？决策曲线分析（Decision Curve Analysis, DCA）提供了一个强有力的框架，通过权衡正确干预的“收益”与错误干预的“危害”，来评估预测模型的实际临床价值。本练习将引导您计算一个模型的“净获益”（net benefit），从而判断在不同的风险阈值下，使用该模型是否优于“全部治疗”或“全部不治疗”等默认策略 。",
            "id": "4955199",
            "problem": "一家远程医疗服务机构使用一个监督式分类模型来为每次远程会诊估计患者真正需要当天紧急现场评估的概率。该风险估计值用于在估计风险超过某一阈值时，决定是否建议进行现场评估。给定一个包含 $N=30$ 次远程医疗问诊的队列，其中包括模型预测的风险 $\\{p_i\\}_{i=1}^{30}$ 和二元结局 $\\{y_i\\}_{i=1}^{30}$，其中 $y_i=1$ 表示患者确实需要当天紧急现场评估，而 $y_i=0$ 表示患者不需要。这些配对 $(p_i,y_i)$ 如下：\n$(0.45,1)$, $(0.42,1)$, $(0.38,1)$, $(0.35,1)$, $(0.33,1)$, $(0.31,0)$, $(0.29,1)$, $(0.28,0)$, $(0.27,0)$, $(0.25,1)$, $(0.24,0)$, $(0.23,0)$, $(0.22,1)$, $(0.21,0)$, $(0.19,1)$, $(0.18,0)$, $(0.17,0)$, $(0.16,0)$, $(0.15,0)$, $(0.14,0)$, $(0.13,0)$, $(0.12,0)$, $(0.11,0)$, $(0.10,0)$, $(0.09,0)$, $(0.08,0)$, $(0.07,0)$, $(0.06,0)$, $(0.05,0)$, $(0.03,0)$.\n\n采纳决策规则：当且仅当 $p_i \\ge t$ 时“建议进行现场评估”，其中 $t$ 是风险阈值。使用混淆矩阵计数的基本定义和决策曲线分析（DCA）的净获益结构，并从风险阈值下获益与危害权衡的第一性原理出发，执行以下操作：\n\n1. 对于阈值 $t \\in \\{0.1,\\,0.2,\\,0.3\\}$，计算模型在每个 $t$ 处的净获益。\n2. 通过在指定的阈值范围内将模型的净获益与“全治疗”和“不治疗”策略进行比较，从概念上构建相应的决策曲线。\n3. 解释在每个阈值下，相对于“全治疗”和“不治疗”策略，该模型是否提供临床效用。\n\n将模型在 $t \\in \\{0.1,\\,0.2,\\,0.3\\}$ 处的最终数值净获益表示为“每100名患者的获益单位”，并将每个值四舍五入到四位有效数字。在最终的方框答案中不要包含单位。",
            "solution": "### 步骤1：提取已知信息\n- 远程医疗问诊总数：$N=30$。\n- 模型预测风险和二元结局：一组30对 $(p_i, y_i)$，其中 $p_i$ 是预测风险， $y_i$ 是真实结局。\n- 结局定义：如果患者需要当天紧急现场评估，则 $y_i=1$，否则 $y_i=0$。\n- 数据对如下：\n$(0.45,1)$, $(0.42,1)$, $(0.38,1)$, $(0.35,1)$, $(0.33,1)$, $(0.31,0)$, $(0.29,1)$, $(0.28,0)$, $(0.27,0)$, $(0.25,1)$, $(0.24,0)$, $(0.23,0)$, $(0.22,1)$, $(0.21,0)$, $(0.19,1)$, $(0.18,0)$, $(0.17,0)$, $(0.16,0)$, $(0.15,0)$, $(0.14,0)$, $(0.13,0)$, $(0.12,0)$, $(0.11,0)$, $(0.10,0)$, $(0.09,0)$, $(0.08,0)$, $(0.07,0)$, $(0.06,0)$, $(0.05,0)$, $(0.03,0)$.\n- 决策规则：当且仅当 $p_i \\ge t$ 时建议进行现场评估，其中 $t$ 是风险阈值。\n- 用于分析的阈值：$t \\in \\{0.1, 0.2, 0.3\\}$。\n- 要求输出：\n    1. 计算模型在每个阈值 $t$ 处的净获益。\n    2. 从概念上构建决策曲线。\n    3. 解释模型相对于“全治疗”和“不治疗”策略的临床效用。\n    4. 以“每100名患者的获益单位”表示最终净获益，并四舍五入到四位有效数字。\n\n### 步骤2：使用提取的已知信息进行验证\n对问题进行验证。\n\n- **科学基础**：该问题基于决策曲线分析（DCA），这是一种成熟且广泛用于评估预测模型和诊断测试临床效用的方法。监督学习、混淆矩阵计数（真阳性、假阳性）和净获益等概念是生物统计学和医学信息学中的标准概念。该设置在科学上是合理的。\n- **问题明确**：该问题提供了一个完整的数据集和一套清晰、明确的任务。所要求的量在DCA框架内有明确定义。可以通过直接计算确定唯一解。\n- **客观性**：问题陈述是定量的，没有主观、偏见或基于意见的语言。\n\n### 步骤3：结论与行动\n此问题有效。将提供完整解答。\n\n### 解答推导\n\n#### 决策曲线分析（DCA）的基本原理\n决策曲线分析的基本原理是，预测模型的价值取决于正确识别阳性病例（真阳性，TP）的获益与将阴性病例错误识别为阳性（假阳性，FP）的危害之间的权衡。决策者（如临床医生）在一个隐含或明确的风险阈值 $t$ 下操作。该阈值代表决策者会选择干预（在此情况下是建议进行现场评估）的最低事件概率。\n\n净获益（NB）是通过量化这种权衡来构建的。干预的获益体现在真阳性病例上。干预的危害（例如成本、患者焦虑、不必要的资源使用）发生在假阳性病例上。在给定的阈值 $t$ 下，一个假阳性的危害相对于一个真阳性的获益的权重，由该阈值下事件的优势（odds）$\\frac{t}{1-t}$ 给出。这个比率是危害与获益之间的“交换率”。\n\n对于一个大小为 $N$ 的群体，净获益定义为真阳性总数减去加权的假阳性总数，然后全部按群体大小进行缩放：\n$$\n\\text{NB}(t) = \\frac{\\text{TP}(t)}{N} - \\frac{\\text{FP}(t)}{N} \\left(\\frac{t}{1-t}\\right)\n$$\n其中 $\\text{TP}(t)$ 和 $\\text{FP}(t)$ 分别为在决策阈值为 $t$ 时的真阳性和假阳性数量。\n\n#### 参考策略\n模型的效用是通过将其净获益与两种默认策略的净获益进行比较来评估的：\n1.  **不治疗**：无论风险如何，从不建议进行现场评估。在这种情况下，$\\text{TP} = 0$ 且 $\\text{FP} = 0$。净获益始终为零。\n    $$\n    \\text{NB}_{\\text{none}}(t) = 0\n    $$\n2.  **全治疗**：为所有患者建议进行现场评估。在这里，所有患有该病的患者都是真阳性，而所有未患病的患者都是假阳性。设 $P$ 为患病患者（阳性结局）的总数， $N_{neg}$ 为未患病患者的总数。\n    $$\n    \\text{NB}_{\\textall}(t) = \\frac{P}{N} - \\frac{N_{neg}}{N} \\left(\\frac{t}{1-t}\\right)\n    $$\n\n#### 数据分析与计数\n首先，我们确定这组 $N=30$ 名患者队列中阳性（$P$）和阴性（$N_{neg}$）病例的总数。通过对所提供的数据进行计数：\n-   $y_i=1$ 的患者数量为 $P=9$。\n-   $y_i=0$ 的患者数量为 $N_{neg} = 30 - 9 = 21$。\n该队列中疾病的患病率为 $\\frac{P}{N} = \\frac{9}{30} = 0.3$。\n\n现在我们计算模型在每个指定阈值 $t$ 下的混淆矩阵计数（$\\text{TP}$ 和 $\\text{FP}$）。\n\n**1. 阈值 $t=0.1$ 的分析**\n如果患者的预测风险 $p_i \\ge 0.1$，则建议进行评估。\n-   **真阳性 ($\\text{TP}(0.1)$)**：$y_i=1$ 且 $p_i \\ge 0.1$ 的患者。\n    所有9名 $y_i=1$ 的患者的风险为 $\\{0.45, 0.42, 0.38, 0.35, 0.33, 0.29, 0.25, 0.22, 0.19\\}$，这些风险都 $\\ge 0.1$。因此，$\\text{TP}(0.1) = 9$。\n-   **假阳性 ($\\text{FP}(0.1)$)**：$y_i=0$ 且 $p_i \\ge 0.1$ 的患者。\n    $y_i=0$ 且风险 $\\ge 0.1$ 的患者的风险为 $\\{0.31, 0.28, 0.27, 0.24, 0.23, 0.21, 0.18, 0.17, 0.16, 0.15, 0.14, 0.13, 0.12, 0.11, 0.10\\}$。计数得出 $\\text{FP}(0.1) = 15$。\n-   **模型的净获益**：\n    $$\n    \\text{NB}_{\\text{model}}(0.1) = \\frac{9}{30} - \\frac{15}{30} \\left(\\frac{0.1}{1-0.1}\\right) = 0.3 - 0.5 \\left(\\frac{0.1}{0.9}\\right) = 0.3 - 0.5 \\left(\\frac{1}{9}\\right) = \\frac{2.7 - 0.5}{9} = \\frac{2.2}{9} \\approx 0.24444\n    $$\n\n**2. 阈值 $t=0.2$ 的分析**\n如果患者的预测风险 $p_i \\ge 0.2$，则建议进行评估。\n-   **真阳性 ($\\text{TP}(0.2)$)**：$y_i=1$ 且 $p_i \\ge 0.2$ 的患者。\n    $p_i=0.19$ 的阳性病例现在被排除。因此，$\\text{TP}(0.2) = 8$。\n-   **假阳性 ($\\text{FP}(0.2)$)**：$y_i=0$ 且 $p_i \\ge 0.2$ 的患者。\n    $y_i=0$ 且风险 $\\ge 0.2$ 的患者的风险为 $\\{0.31, 0.28, 0.27, 0.24, 0.23, 0.21\\}$。这得出 $\\text{FP}(0.2) = 6$。\n-   **模型的净获益**：\n    $$\n    \\text{NB}_{\\text{model}}(0.2) = \\frac{8}{30} - \\frac{6}{30} \\left(\\frac{0.2}{1-0.2}\\right) = \\frac{8}{30} - \\frac{6}{30} \\left(\\frac{0.2}{0.8}\\right) = \\frac{1}{30} \\left(8 - 6 \\times \\frac{1}{4}\\right) = \\frac{1}{30} (8 - 1.5) = \\frac{6.5}{30} = \\frac{13}{60} \\approx 0.21667\n    $$\n\n**3. 阈值 $t=0.3$ 的分析**\n如果患者的预测风险 $p_i \\ge 0.3$，则建议进行评估。\n-   **真阳性 ($\\text{TP}(0.3)$)**：$y_i=1$ 且 $p_i \\ge 0.3$ 的患者。\n    风险 $\\ge 0.3$ 的阳性病例为 $\\{0.45, 0.42, 0.38, 0.35, 0.33\\}$。因此，$\\text{TP}(0.3) = 5$。\n-   **假阳性 ($\\text{FP}(0.3)$)**：$y_i=0$ 且 $p_i \\ge 0.3$ 的患者。\n    风险 $\\ge 0.3$ 的阴性病例只有一个，其风险为 $0.31$。因此，$\\text{FP}(0.3) = 1$。\n-   **模型的净获益**：\n    $$\n    \\text{NB}_{\\text{model}}(0.3) = \\frac{5}{30} - \\frac{1}{30} \\left(\\frac{0.3}{1-0.3}\\right) = \\frac{5}{30} - \\frac{1}{30} \\left(\\frac{0.3}{0.7}\\right) = \\frac{1}{30} \\left(5 - \\frac{3}{7}\\right) = \\frac{1}{30} \\left(\\frac{35-3}{7}\\right) = \\frac{32}{210} = \\frac{16}{105} \\approx 0.15238\n    $$\n\n#### 决策曲线与临床效用解释\n\n为了解释临床效用，我们将模型的净获益与“全治疗”和“不治疗”策略在每个阈值下的净获益进行比较。\n-   $\\text{NB}_{\\text{none}}(t) = 0$ 对所有 $t$ 成立。\n-   $\\text{NB}_{\\textall}(t) = \\frac{9}{30} - \\frac{21}{30} \\left(\\frac{t}{1-t}\\right) = 0.3 - 0.7 \\left(\\frac{t}{1-t}\\right)$。\n    -   $\\text{NB}_{\\textall}(0.1) = 0.3 - 0.7(\\frac{0.1}{0.9}) = 0.3 - \\frac{0.7}{9} \\approx 0.3 - 0.07778 = 0.22222$\n    -   $\\text{NB}_{\\textall}(0.2) = 0.3 - 0.7(\\frac{0.2}{0.8}) = 0.3 - 0.7(0.25) = 0.3 - 0.175 = 0.125$\n    -   $\\text{NB}_{\\textall}(0.3) = 0.3 - 0.7(\\frac{0.3}{0.7}) = 0.3 - 0.3 = 0$\n\n**概念性决策曲线与解释：**\n\n决策曲线绘制了净获益（y轴）对风险阈值 $t$（x轴）的图。我们可以总结我们对这三个阈值的发现：\n\n| 阈值 ($t$) | $\\text{NB}_{\\text{model}}(t)$ | $\\text{NB}_{\\textall}(t)$ | $\\text{NB}_{\\text{none}}(t)$ |\n|:---------------:|:-------------------------:|:----------------------:|:-----------------------:|\n| $0.1$           | $\\approx 0.244$         | $\\approx 0.222$      | $0$                     |\n| $0.2$           | $\\approx 0.217$         | $0.125$                | $0$                     |\n| $0.3$           | $\\approx 0.152$         | $0$                    | $0$                     |\n\n-   在阈值 $t=0.1$ 时：$\\text{NB}_{\\text{model}}(0.1)  \\text{NB}_{\\textall}(0.1)  \\text{NB}_{\\text{none}}(0.1)$。模型提供了最高的净获益。这意味着，对于一个决策者，如果他认为放弃为9名不需要现场就诊的患者安排就诊，其价值等同于为1名确实需要的患者确保一次就诊（即优势比为1:9，对应于 $t=0.1$），那么使用该模型是最佳策略。\n-   在阈值 $t=0.2$ 时：$\\text{NB}_{\\text{model}}(0.2)  \\text{NB}_{\\textall}(0.2)  \\text{NB}_{\\text{none}}(0.2)$。模型的优越性更加明显。一个阈值为20%的决策者（愿意为每4次必要的就诊接受1次不必要的就诊），使用该模型比建议所有人都就诊或都不就诊能获得更多益处。\n-   在阈值 $t=0.3$ 时：$\\text{NB}_{\\text{model}}(0.3)  \\text{NB}_{\\textall}(0.3) = \\text{NB}_{\\text{none}}(0.3)$。在这个与样本患病率相匹配的阈值下，“全治疗”策略相比“不治疗”策略没有提供任何获益。然而，该模型提供了显著的正净获益，使其显然成为最有价值的策略。\n\n从概念上讲，该模型的决策曲线将是一条连接点 $(0.1, 0.244)$、$(0.2, 0.217)$ 和 $(0.3, 0.152)$ 的线。这条曲线始终位于“全治疗”策略的曲线和“不治疗”策略在 $y=0$ 的水平线上方。这表明该模型在这一风险阈值范围内具有临床效用。\n\n#### 最终答案计算\n问题要求以每100名患者的获益单位表示模型的净获益，并四舍五入到四位有效数字。这需要将每位患者的NB值乘以100。\n\n-   对于 $t=0.1$：$\\text{NB}_{\\text{model}} \\times 100 = 0.24444... \\times 100 = 24.444... \\approx 24.44$\n-   对于 $t=0.2$：$\\text{NB}_{\\text{model}} \\times 100 = 0.21666... \\times 100 = 21.666... \\approx 21.67$\n-   对于 $t=0.3$：$\\text{NB}_{\\text{model}} \\times 100 = 0.15238... \\times 100 = 15.238... \\approx 15.24$\n\n这三个值代表最终答案。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 24.44  21.67  15.24 \\end{pmatrix}}\n$$"
        }
    ]
}
{
    "hands_on_practices": [
        {
            "introduction": "在影像组学分析中，为了确保从不同扫描仪或不同协议获取的图像中提取的特征具有可比性，强度归一化是至关重要的第一步。本练习将指导您推导并应用最常见的归一化方法之一——最小-最大归一化，将原始体素强度映射到标准的$[0, 1]$区间。掌握这项基本技术是后续进行有效的特征提取和机器学习模型构建的基础。",
            "id": "4545720",
            "problem": "在放射组学流程中，强度归一化的目的是通过将感兴趣区域（ROI）内的体素强度映射到一个标准化的范围，来消除与扫描仪相关的缩放效应。考虑一幅单通道医学图像，在ROI内观测到的最小和最大体素强度分别为 $I_{\\min}=50$ 和 $I_{\\max}=350$。假设归一化映射是仿射的（即带偏移的线性变换）、严格单调的，并且约束为 $I_{\\min}$ 映射到 $0$，$I_{\\max}$ 映射到 $1$。从这些约束和仿射变换的定义出发，推导出将ROI中任意强度 $I$ 映射到区间 $[0,1]$ 的显式归一化函数。然后使用该函数计算强度集 $I=\\{50,200,350\\}$ 的归一化值。将这三个归一化值作为您的最终答案。无需四舍五入，且答案应为无量纲的。",
            "solution": "首先验证问题陈述，以确保其科学上合理、适定且客观。\n\n**步骤1：提取已知条件**\n-   感兴趣区域（ROI）中的最小体素强度：$I_{\\min} = 50$。\n-   ROI中的最大体素强度：$I_{\\max} = 350$。\n-   归一化映射是一个仿射变换，记作 $f(I)$。\n-   函数 $f(I)$ 是严格单调的。\n-   约束1：$f(I_{\\min}) = f(50) = 0$。\n-   约束2：$f(I_{\\max}) = f(350) = 1$。\n-   任务是推导函数 $f(I)$，然后用它计算强度集 $I=\\{50, 200, 350\\}$ 的归一化值。\n\n**步骤2：使用提取的已知条件进行验证**\n该问题是有效的。它描述了图像处理中一个标准且定义明确的程序，称为最小-最大归一化或重缩放。\n-   **科学依据：** 使用仿射变换进行强度归一化是医学成像和机器学习中数据预处理的一项基本技术。\n-   **适定性：** 问题提供了两个不同的点，并指明函数是仿射的（线性的）。两点唯一确定一条直线，因此变换参数存在唯一解。\n-   **客观性：** 问题以精确的数学术语和约束陈述，没有歧义或主观论断。\n-   所有必要的数据（$I_{\\min}$、$I_{\\max}$ 和映射约束）都已提供，且没有矛盾之处。\n\n**步骤3：结论与行动**\n该问题有效，可以按其陈述进行求解。\n\n**解题推导**\n归一化函数 $f(I)$ 被陈述为仿射变换。一维仿射变换的一般形式为：\n$$f(I) = aI + b$$\n其中 $a$ 和 $b$ 分别是定义缩放和偏移的常数。为了求出这些常数，我们使用问题陈述中提供的两个约束。\n\n约束1：最小强度 $I_{\\min}$ 映射到 $0$。\n$$f(I_{\\min}) = a I_{\\min} + b = 0 \\quad (1)$$\n\n约束2：最大强度 $I_{\\max}$ 映射到 $1$。\n$$f(I_{\\max}) = a I_{\\max} + b = 1 \\quad (2)$$\n\n我们得到了一个包含两个未知数 $a$ 和 $b$ 的二元一次方程组。我们可以通过用方程(2)减去方程(1)来求解该方程组：\n$$(a I_{\\max} + b) - (a I_{\\min} + b) = 1 - 0$$\n$$a I_{\\max} - a I_{\\min} = 1$$\n$$a (I_{\\max} - I_{\\min}) = 1$$\n求解缩放因子 $a$：\n$$a = \\frac{1}{I_{\\max} - I_{\\min}}$$\n映射严格单调的条件要求斜率 $a$ 不为零。由于 $I_{\\max} \\neq I_{\\min}$（因为 $350 \\neq 50$），此条件得到满足。具体来说，因为 $I_{\\max} > I_{\\min}$，我们有 $a > 0$，所以该函数是严格单调递增的。\n\n现在，我们可以通过将 $a$ 的表达式代回方程(1)来求解偏移量 $b$：\n$$\\left(\\frac{1}{I_{\\max} - I_{\\min}}\\right) I_{\\min} + b = 0$$\n$$b = - \\frac{I_{\\min}}{I_{\\max} - I_{\\min}}$$\n\n将 $a$ 和 $b$ 的表达式代回仿射变换的一般形式 $f(I) = aI + b$，我们得到显式的归一化函数：\n$$f(I) = \\left(\\frac{1}{I_{\\max} - I_{\\min}}\\right) I - \\frac{I_{\\min}}{I_{\\max} - I_{\\min}}$$\n这可以化简为最小-最大归一化的标准形式：\n$$f(I) = \\frac{I - I_{\\min}}{I_{\\max} - I_{\\min}}$$\n\n现在，我们将给定的数值 $I_{\\min} = 50$ 和 $I_{\\max} = 350$ 代入这个推导出的函数中。\n$$f(I) = \\frac{I - 50}{350 - 50} = \\frac{I - 50}{300}$$\n\n最后，我们将此函数应用于指定的强度值集合 $I=\\{50, 200, 350\\}$。\n\n1.  对于 $I = 50$：\n    $$f(50) = \\frac{50 - 50}{300} = \\frac{0}{300} = 0$$\n\n2.  对于 $I = 200$：\n    $$f(200) = \\frac{200 - 50}{300} = \\frac{150}{300} = \\frac{1}{2} = 0.5$$\n\n3.  对于 $I = 350$：\n    $$f(350) = \\frac{350 - 50}{300} = \\frac{300}{300} = 1$$\n\n强度集 $\\{50, 200, 350\\}$ 的归一化值集合为 $\\{0, 0.5, 1\\}$。这些是精确值，无需四舍五入。",
            "answer": "$$\\boxed{\\begin{pmatrix} 0 & 0.5 & 1 \\end{pmatrix}}$$"
        },
        {
            "introduction": "真实世界的医学图像，如CT扫描，常常包含可能扭曲数据分布的极端强度值（例如，空气的低值或金属植入物的高值）。直接对这些值进行归一化可能会压缩信息丰富的强度范围。本练习将介绍一种更稳健的预处理流程：首先通过“削波”将强度值限制在感兴趣的生理范围内，然后进行归一化，从而提高特征的稳定性和可靠性。",
            "id": "4545736",
            "problem": "在放射组学工作流程中，预处理通常包括强度裁剪，然后线性归一化到标准范围，以减少扫描间的变异性并提高特征稳定性。考虑来自一小块感兴趣区域的计算机断层扫描（CT）体素强度，以Hounsfield单位（HU）测量：$\\{-100, 0, 50, 1000, 120\\}$。假设为了进行软组织分析，强度被裁剪到 $[0, 200]$ HU的范围内以移除超范围的值，然后使用裁剪后值的最小值和最大值线性归一化到区间 $[0, 1]$。执行这个两步预处理（首先裁剪到 $[0, 200]$，然后使用裁剪后的集合计算最小-最大归一化到 $[0, 1]$），并将与原始五个体素相对应的归一化强度按其原始顺序列为一个单行向量报告。在适用的情况下，将最终的归一化值表示为精确分数，最终数值答案中不进行四舍五入且不带单位。",
            "solution": "**问题验证**\n\n**步骤1：提取已知条件**\n-   **输入数据**：一组CT体素强度，单位为Hounsfield单位（HU），$V_{orig} = \\{-100, 0, 50, 1000, 120\\}$。\n-   **步骤1（裁剪）**：强度裁剪到范围 $[0, 200]$ HU。设此范围为 $[C_{min}, C_{max}]$，其中 $C_{min} = 0$ 且 $C_{max} = 200$。\n-   **步骤2（归一化）**：线性归一化到区间 $[0, 1]$。设此范围为 $[N_{min}, N_{max}]$，其中 $N_{min} = 0$ 且 $N_{max} = 1$。归一化基于*裁剪后*值的最小值和最大值。\n-   **输出要求**：一个包含五个归一化强度的单行向量，按原始顺序排列，并表示为精确分数。\n\n**步骤2：使用提取的已知条件进行验证**\n-   **科学依据**：该问题具有科学依据。强度裁剪和最小-最大归一化是医学图像分析中标准的、成熟的预处理技术，尤其是在CT扫描的放射组学中。Hounsfield单位（HU）是CT强度的正确单位。所选的裁剪范围对于软组织分析是合理的。\n-   **适定性**：该问题是适定的。输入数据、程序步骤和期望的输出格式都得到了清晰明确的定义，确保可以推导出唯一的解。\n-   **客观性**：该问题是客观陈述的，使用了精确的技术术语，没有任何主观或基于意见的语言。\n-   **缺陷清单**：该问题没有违反任何指定的无效标准。它在科学上是合理的，可形式化的，完整的，现实的，适定的，并且不是微不足道的。\n\n**步骤3：结论与行动**\n该问题是**有效的**。将提供解答。\n\n**解**\n\n该问题要求对一组给定的CT体素强度执行两步预处理程序。设初始强度向量为 $V_{orig} = \\begin{pmatrix} -100 & 0 & 50 & 1000 & 120 \\end{pmatrix}$。\n\n**步骤1：强度裁剪**\n第一步是将强度裁剪到指定的范围 $[0, 200]$。对于任何给定的强度 $v$，裁剪后的值 $v_{clip}$ 由以下公式确定：\n$$ v_{clip} = \\max(0, \\min(v, 200)) $$\n此操作确保任何低于 $0$ 的值被设置为 $0$，任何高于 $200$ 的值被设置为 $200$，而任何已经在 $[0, 200]$ 范围内的值保持不变。我们将此操作应用于 $V_{orig}$ 的每个元素：\n\n-   对于 $v_1 = -100$：$v_{1,clip} = \\max(0, \\min(-100, 200)) = \\max(0, -100) = 0$。\n-   对于 $v_2 = 0$：$v_{2,clip} = \\max(0, \\min(0, 200)) = \\max(0, 0) = 0$。\n-   对于 $v_3 = 50$：$v_{3,clip} = \\max(0, \\min(50, 200)) = \\max(0, 50) = 50$。\n-   对于 $v_4 = 1000$：$v_{4,clip} = \\max(0, \\min(1000, 200)) = \\max(0, 200) = 200$。\n-   对于 $v_5 = 120$：$v_{5,clip} = \\max(0, \\min(120, 200)) = \\max(0, 120) = 120$。\n\n得到的裁剪后强度向量为 $V_{clip} = \\begin{pmatrix} 0 & 0 & 50 & 200 & 120 \\end{pmatrix}$。\n\n**步骤2：最小-最大归一化**\n第二步是将裁剪后的值线性归一化到区间 $[0, 1]$。对于一个值 $x$ 的最小-最大归一化公式是：\n$$ x_{norm} = \\frac{x - x_{min}}{x_{max} - x_{min}} $$\n其中 $x_{min}$ 和 $x_{max}$ 是被归一化数据集的最小值和最大值。在这个问题中，我们必须使用裁剪后集合 $V_{clip}$ 的最小值和最大值。\n\n首先，我们找到 $V_{clip}$ 中的最小值和最大值：\n-   $v_{min, clip} = \\min(\\{0, 0, 50, 200, 120\\}) = 0$。\n-   $v_{max, clip} = \\max(\\{0, 0, 50, 200, 120\\}) = 200$。\n\n将这些值代入归一化公式，我们得到针对我们裁剪后数据的特定变换：\n$$ v_{norm} = \\frac{v_{clip} - 0}{200 - 0} = \\frac{v_{clip}}{200} $$\n现在，我们将此变换应用于 $V_{clip}$ 的每个元素：\n\n-   对于 $v_{1,clip} = 0$：$v_{1,norm} = \\frac{0}{200} = 0$。\n-   对于 $v_{2,clip} = 0$：$v_{2,norm} = \\frac{0}{200} = 0$。\n-   对于 $v_{3,clip} = 50$：$v_{3,norm} = \\frac{50}{200} = \\frac{1}{4}$。\n-   对于 $v_{4,clip} = 200$：$v_{4,norm} = \\frac{200}{200} = 1$。\n-   对于 $v_{5,clip} = 120$：$v_{5,norm} = \\frac{120}{200} = \\frac{12}{20} = \\frac{3}{5}$。\n\n最终的归一化强度向量，对应于原始的五个体素，为 $V_{norm} = \\begin{pmatrix} 0 & 0 & \\frac{1}{4} & 1 & \\frac{3}{5} \\end{pmatrix}$。该向量按要求将预处理后的强度表示为精确分数。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0 & 0 & \\frac{1}{4} & 1 & \\frac{3}{5}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "在强度归一化之后，许多影像组学特征（尤其是纹理特征）的计算需要将连续的强度值转换为离散的灰度等级，这一过程称为灰度离散化。本练习将重点介绍一种常见的离散化方案——固定箱数法，即将强度范围划分为预定数量的、宽度相等的区间（或“箱子”）。您将学会如何计算箱宽并为给定的强度值分配正确的箱标签，这是计算灰度共生矩阵等高级特征的关键预备步骤。",
            "id": "4545791",
            "problem": "一个放射组学流程始于将医学图像（例如计算机断层扫描（CT））中的体素强度归一化到一个预定义的范围。考虑一个单一的感兴趣区域，其中的强度已经被线性归一化到闭区间 $\\left[I_{\\min}, I_{\\max}\\right]$ 内，其中 $I_{\\min}=10$ 且 $I_{\\max}=210$（无量纲的归一化强度单位）。下一步是使用固定数量的组箱（bin）进行灰度离散化。在固定组箱数方案中，区间 $\\left[I_{\\min}, I_{\\max}\\right]$ 被划分为 $N$ 个等宽的组箱，此处 $N=16$。除了包含上界 $I_{\\max}$ 的最高强度组箱外，所有组箱的边界都是下限包含、上限排除。组箱标签从最低强度组箱的 $1$ 开始顺序递增，直到最高强度组箱的 $N$。仅根据这些基本定义，确定组箱宽度 $\\Delta$ 以及归一化强度为 $I=75$ 的体素所分配的组箱标签。将这两个值表示为精确数，无需四舍五入，并以相同的无量纲归一化强度单位报告组箱宽度 $\\Delta$。",
            "solution": "问题陈述具有科学依据，提法得当且客观。它为放射组学中的一个标准程序，即灰度离散化，提供了一套完整且一致的定义和数值。所有确定唯一解所需的信息都已给出。因此，我们可以进行计算。\n\n需要确定的两个量是组箱宽度（用 $\\Delta$ 表示）和特定强度值对应的组箱标签。\n\n首先，我们计算组箱宽度 $\\Delta$。归一化强度值的总范围由最大和最小强度之差 $I_{\\max} - I_{\\min}$ 给出。这个范围被划分为 $N$ 个等宽的组箱。因此，组箱宽度 $\\Delta$ 的公式为：\n$$\n\\Delta = \\frac{I_{\\max} - I_{\\min}}{N}\n$$\n问题提供了以下数值：$I_{\\min} = 10$，$I_{\\max} = 210$，以及组箱数 $N = 16$。将这些值代入公式可得：\n$$\n\\Delta = \\frac{210 - 10}{16} = \\frac{200}{16}\n$$\n该分数可简化为：\n$$\n\\Delta = \\frac{100}{8} = \\frac{50}{4} = \\frac{25}{2} = 12.5\n$$\n组箱宽度 $\\Delta$ 精确等于 $12.5$ 无量纲归一化强度单位。\n\n接下来，我们确定归一化强度为 $I = 75$ 的体素的组箱标签。组箱从 $1$ 开始顺序标记。第 $k$ 个组箱（其中 $k$ 是组箱标签）对应一个特定的强度区间。根据问题描述，除了最后一个组箱，其他组箱都是下限包含、上限排除的。对于任意组箱 $k \\in \\{1, 2, \\dots, N-1\\}$，其覆盖的强度区间为：\n$$\n\\left[ I_{\\min} + (k-1)\\Delta, I_{\\min} + k\\Delta \\right)\n$$\n最后一个标签为 $N=16$ 的组箱覆盖区间 $\\left[ I_{\\min} + (N-1)\\Delta, I_{\\max} \\right]$，以确保包含上界 $I_{\\max}$。\n\n要找到强度 $I = 75$ 对应的组箱标签 $k$，我们必须找到满足组箱归属条件的整数 $k$。由于 $I = 75$ 不等于 $I_{\\max} = 210$，我们使用一般条件：\n$$\nI_{\\min} + (k-1)\\Delta \\le I  I_{\\min} + k\\Delta\n$$\n我们可以通过从不等式各部分减去 $I_{\\min}$ 来求解 $k$：\n$$\n(k-1)\\Delta \\le I - I_{\\min}  k\\Delta\n$$\n由于 $\\Delta > 0$，我们可以用 $\\Delta$ 除以不等式各部分而不用改变不等号的方向：\n$$\nk-1 \\le \\frac{I - I_{\\min}}{\\Delta}  k\n$$\n这表明 $k-1$ 是小于或等于表达式 $\\frac{I - I_{\\min}}{\\Delta}$ 值的最大整数。这正是向下取整函数（floor function）$\\lfloor \\cdot \\rfloor$ 的定义。因此，我们可以写作：\n$$\nk-1 = \\left\\lfloor \\frac{I - I_{\\min}}{\\Delta} \\right\\rfloor\n$$\n因此，组箱标签 $k$ 由以下公式给出：\n$$\nk = \\left\\lfloor \\frac{I - I_{\\min}}{\\Delta} \\right\\rfloor + 1\n$$\n现在我们代入已知值：$I = 75$，$I_{\\min} = 10$，以及计算出的组箱宽度 $\\Delta = 12.5$。\n$$\nk = \\left\\lfloor \\frac{75 - 10}{12.5} \\right\\rfloor + 1\n$$\n首先，我们计算向下取整函数中的表达式：\n$$\n\\frac{65}{12.5} = \\frac{130}{25} = \\frac{26}{5} = 5.2\n$$\n现在，将此结果代回 $k$ 的方程中：\n$$\nk = \\lfloor 5.2 \\rfloor + 1 = 5 + 1 = 6\n$$\n分配给强度 $I=75$ 的组箱标签是 $6$。\n\n为了验证，我们可以明确地定义前几个组箱的边界：\n组箱 1: $[10, 10 + 12.5) = [10, 22.5)$\n组箱 2: $[22.5, 22.5 + 12.5) = [22.5, 35)$\n组箱 3: $[35, 35 + 12.5) = [35, 47.5)$\n组箱 4: $[47.5, 47.5 + 12.5) = [47.5, 60)$\n组箱 5: $[60, 60 + 12.5) = [60, 72.5)$\n组箱 6: $[72.5, 72.5 + 12.5) = [72.5, 85)$\n强度值 $I = 75$ 显然落在区间 $[72.5, 85)$ 内，该区间对应于组箱标签 $6$。计算被证实是正确的。\n\n所求的值是组箱宽度 $\\Delta$ 和 $I=75$ 对应的组箱标签。\n组箱宽度 $\\Delta = 12.5$。\n组箱标签为 $6$。",
            "answer": "$$\n\\boxed{\\begin{pmatrix} 12.5  6 \\end{pmatrix}}\n$$"
        }
    ]
}
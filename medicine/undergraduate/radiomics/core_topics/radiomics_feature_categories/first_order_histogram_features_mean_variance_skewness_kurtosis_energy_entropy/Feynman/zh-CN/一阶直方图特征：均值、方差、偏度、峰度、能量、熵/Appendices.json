{
    "hands_on_practices": [
        {
            "introduction": "一阶特征是放射组学中最基本的工具，用于量化感兴趣区域（ROI）内像素或体素的强度分布。均值是最直观的特征之一，但其计算方式会影响结果。本练习将引导你计算一组体素强度的精确样本均值，并将其与基于直方图分箱的近似值进行比较，从而揭示离散化对特征计算的直接影响。",
            "id": "4541104",
            "problem": "在放射组学研究中，一个兴趣区域（ROI）产生了一小组体素强度，这些强度被建模为来自一个潜在强度随机变量的独立样本。一阶直方图特征将此强度视为 ROI 上的单变量分布。均值特征被解释为该分布的期望，而基于直方图的近似则使用预定义分箱的经验概率质量以及代表性的分箱强度。\n\n考虑 ROI 强度 $x=\\{10,12,14,15,19\\}$ 以及将强度轴划分为分箱 $[10,13)$、$[13,16)$ 和 $[16,20)$ 的直方图分区。令 $p_i$ 表示分箱 $i$ 的经验概率，其定义为落入分箱 $i$ 的 ROI 强度的相对频率；令 $c_i$ 表示分箱 $i$ 的代表性强度，取为分箱中点。根据 ROI 强度计算精确样本均值 $\\mu$，并使用给定的分箱计算基于直方图的近似值 $\\sum_{i} p_i c_i$。报告绝对差\n$$\\Delta=|\\mu-\\sum_{i} p_i c_i|.$$\n将 $\\Delta$ 的最终数值四舍五入至四位有效数字。无需单位。",
            "solution": "用户希望我根据提供的文本解决一个问题。\n\n该问题已经过验证且合理。所有必要的数据和定义均已提供，问题具有科学依据、提法明确且客观。没有矛盾或含糊之处。我将开始解题。\n\n问题要求计算一组体素强度的精确样本均值 $\\mu$ 与基于直方图的均值近似值之间的绝对差 $\\Delta$。最终值必须四舍五入至四位有效数字。\n\n给定的 ROI 强度集为 $x=\\{10, 12, 14, 15, 19\\}$。\n样本总数为 $N=5$。\n\n首先，我们计算精确样本均值 $\\mu$，即强度值的算术平均值。\n$$\n\\mu = \\frac{1}{N} \\sum_{j=1}^{N} x_j\n$$\n代入给定值：\n$$\n\\mu = \\frac{10 + 12 + 14 + 15 + 19}{5} = \\frac{70}{5} = 14\n$$\n因此，精确样本均值是 $\\mu = 14$。\n\n接下来，我们计算基于直方图的均值近似值，其由公式 $\\sum_{i} p_i c_i$ 给出。这需要我们首先确定直方图分箱的属性。\n\n强度轴被划分为三个分箱：\n分箱 1：$[10, 13)$\n分箱 2：$[13, 16)$\n分箱 3：$[16, 20)$\n\n我们必须确定每个分箱 $i$ 的经验概率 $p_i$。这是落入该分箱的 ROI 强度的相对频率。\n首先，我们计算每个分箱中的强度数量 $N_i$：\n- 对于分箱 1 ($[10, 13)$)：强度为 $\\{10, 12\\}$。数量为 $N_1 = 2$。\n- 对于分箱 2 ($[13, 16)$)：强度为 $\\{14, 15\\}$。数量为 $N_2 = 2$。\n- 对于分箱 3 ($[16, 20)$)：强度为 $\\{19\\}$。数量为 $N_3 = 1$。\n总数量 $N_1 + N_2 + N_3 = 2 + 2 + 1 = 5$，与样本总数 $N$ 相符。\n\n经验概率 $p_i = N_i / N$ 为：\n- $p_1 = \\frac{N_1}{N} = \\frac{2}{5}$\n- $p_2 = \\frac{N_2}{N} = \\frac{2}{5}$\n- $p_3 = \\frac{N_3}{N} = \\frac{1}{5}$\n\n接下来，我们确定每个分箱 $i$ 的代表性强度 $c_i$，其定义为分箱中点。\n- 对于分箱 1 ($[10, 13)$)：$c_1 = \\frac{10 + 13}{2} = 11.5$\n- 对于分箱 2 ($[13, 16)$)：$c_2 = \\frac{13 + 16}{2} = 14.5$\n- 对于分箱 3 ($[16, 20)$)：$c_3 = \\frac{16 + 20}{2} = 18.0$\n\n现在，我们可以计算基于直方图的均值近似值，我们将其表示为 $\\mu_{hist}$：\n$$\n\\mu_{hist} = \\sum_{i=1}^{3} p_i c_i = p_1 c_1 + p_2 c_2 + p_3 c_3\n$$\n代入计算出的值：\n$$\n\\mu_{hist} = \\left(\\frac{2}{5}\\right)(11.5) + \\left(\\frac{2}{5}\\right)(14.5) + \\left(\\frac{1}{5}\\right)(18.0)\n$$\n$$\n\\mu_{hist} = \\frac{2 \\times 11.5 + 2 \\times 14.5 + 1 \\times 18.0}{5}\n$$\n$$\n\\mu_{hist} = \\frac{23.0 + 29.0 + 18.0}{5} = \\frac{70.0}{5} = 14.0\n$$\n基于直方图的均值近似值为 $\\mu_{hist} = 14.0$。\n\n最后，我们计算绝对差 $\\Delta$：\n$$\n\\Delta = |\\mu - \\mu_{hist}|\n$$\n$$\n\\Delta = |14 - 14.0| = 0\n$$\n结果恰好为 $0$。问题要求将最终答案四舍五入至四位有效数字。为了用四位有效数字表示精确值 $0$，我们将其写成四位小数，因为小数点后的尾随零是有效的。因此，该值为 $0.0000$。",
            "answer": "$$\n\\boxed{0.0000}\n$$"
        },
        {
            "introduction": "除了中心趋势，我们还需要描述强度分布的形状，例如偏度和峰度。峰度（Kurtosis）是一个经常被误解的特征，它衡量的是分布尾部的“厚重”程度，即产生离群值的倾向，而非分布的“尖峰”程度。通过这个练习，你将为一个包含显著离群值的小数据集计算峰度，并从根本上理解为什么它更多地反映了分布的尾部特性。",
            "id": "4541105",
            "problem": "在一阶放射组学中，计算机断层扫描（CT）图像中感兴趣区域（ROI）的强度直方图通过诸如均值、方差、偏度和峰度等分布描述符进行概括。考虑一个小型ROI，其体素强度由多重集 $x=\\{0,0,1,1,10\\}$ 给出，在计算一阶特征时，您可以将其视为完整总体。仅使用均值和中心矩的基本定义，并采纳放射组学中峰度指代超额峰度（即相对于正态分布基线的标准化四阶中心矩）的惯例，计算此ROI的峰度。\n\n假设中心矩采用基于矩的（总体）版本，不进行无偏小样本校正。从均值和中心矩的定义开始，并进行推导直至得出峰度。然后，根据您的计算和数据结构，简要解释该单一极端强度值主要是导致了放射组学一阶直方图特征意义上的尾部厚重（tail heaviness）还是尖峰（peakedness）。\n\n将峰度的最终数值答案四舍五入至四位有效数字，并以无量纲量的形式报告。",
            "solution": "该问题是有效的，因为它具有科学依据、定义明确且客观。它在放射组学的既定背景下呈现了一个标准的统计计算。我将继续进行解答。\n\n问题要求计算给定体素强度集的超额峰度，该集合被视为一个总体。感兴趣区域（ROI）的强度值由多重集 $x = \\{0, 0, 1, 1, 10\\}$ 给出。体素总数为 $N=5$。\n\n首先，我们计算总体均值 $\\mu$，它是一阶原点矩。总体均值的公式是：\n$$\n\\mu = \\frac{1}{N} \\sum_{i=1}^{N} x_i\n$$\n代入给定值：\n$$\n\\mu = \\frac{1}{5} (0 + 0 + 1 + 1 + 10) = \\frac{12}{5} = 2.4\n$$\n\n接下来，我们必须计算峰度计算所需的中心矩。总体的 $k$ 阶中心矩 $m_k$ 定义为：\n$$\nm_k = \\frac{1}{N} \\sum_{i=1}^{N} (x_i - \\mu)^k\n$$\n我们需要二阶中心矩（$m_2$，即方差 $\\sigma^2$）和四阶中心矩（$m_4$）。\n\n二阶中心矩，或方差（$\\sigma^2$），是：\n$$\nm_2 = \\sigma^2 = \\frac{1}{N} \\sum_{i=1}^{N} (x_i - \\mu)^2\n$$\n代入我们的数据集中的值和已计算的均值 $\\mu = 2.4$：\n$$\nm_2 = \\frac{1}{5} \\left[ (0 - 2.4)^2 + (0 - 2.4)^2 + (1 - 2.4)^2 + (1 - 2.4)^2 + (10 - 2.4)^2 \\right]\n$$\n$$\nm_2 = \\frac{1}{5} \\left[ (-2.4)^2 + (-2.4)^2 + (-1.4)^2 + (-1.4)^2 + (7.6)^2 \\right]\n$$\n$$\nm_2 = \\frac{1}{5} \\left[ 5.76 + 5.76 + 1.96 + 1.96 + 57.76 \\right]\n$$\n$$\nm_2 = \\frac{1}{5} (73.2) = 14.64\n$$\n总体标准差是 $\\sigma = \\sqrt{m_2} = \\sqrt{14.64}$。\n\n四阶中心矩 $m_4$ 是：\n$$\nm_4 = \\frac{1}{N} \\sum_{i=1}^{N} (x_i - \\mu)^4\n$$\n使用与上面相同的偏差：\n$$\nm_4 = \\frac{1}{5} \\left[ (-2.4)^4 + (-2.4)^4 + (-1.4)^4 + (-1.4)^4 + (7.6)^4 \\right]\n$$\n$$\nm_4 = \\frac{1}{5} \\left[ 33.1776 + 33.1776 + 3.8416 + 3.8416 + 3336.2176 \\right]\n$$\n$$\nm_4 = \\frac{1}{5} (3410.256) = 682.0512\n$$\n\n问题要求计算超额峰度，此处表示为 $\\gamma_2$，它是相对于正态分布的峰度来定义的。标准化四阶矩是 $\\beta_2 = \\frac{m_4}{m_2^2}$，而超额峰度是 $\\gamma_2 = \\beta_2 - 3$。\n$$\n\\gamma_2 = \\frac{m_4}{m_2^2} - 3\n$$\n我们需要计算 $m_2^2$：\n$$\nm_2^2 = (14.64)^2 = 214.3296\n$$\n现在，我们可以计算超额峰度：\n$$\n\\gamma_2 = \\frac{682.0512}{214.3296} - 3\n$$\n$$\n\\gamma_2 \\approx 3.18225 - 3 = 0.18225\n$$\n将结果四舍五入至四位有效数字，我们得到：\n$$\n\\gamma_2 \\approx 0.1823\n$$\n\n关于解释，正的超额峰度（$\\gamma_2 > 0$）表明该分布是尖峰态（leptokurtic）的，意味着它比正态分布具有更厚的尾部。将峰度作为“尖峰度”（peakedness）的衡量标准可能具有误导性。一个更稳健的解释是，峰度衡量的是分布产生异常值（即其“拖尾性” (tailedness)）的倾向。\n\n在这个特定的数据集 $\\{0, 0, 1, 1, 10\\}$ 中，相对于聚集在 $0$ 和 $1$ 附近的其他数据点，数值 $10$ 是一个异常值。四阶中心矩 $m_4$ 的计算涉及将与均值的偏差取四次方。异常值的贡献是 $(10 - 2.4)^4 = (7.6)^4 = 3336.2176$，这在总和中占主导地位，而其他点的贡献则相对可以忽略不计（例如，$(0 - 2.4)^4 = 33.1776$）。这种对远端点的极端敏感性是四阶矩的定义性特征。因此，数值为 $10$ 的单一极端强度是导致正超额峰度的主要驱动因素，它通过在分布中产生一个厚尾来影响该统计量，而不是通过在中心形成一个“尖峰”。该分布是带有异常值的双峰分布，并非传统意义上的尖峰分布。",
            "answer": "$$\n\\boxed{0.1823}\n$$"
        },
        {
            "introduction": "放射组学特征的稳健性至关重要，这意味着它们不应轻易受到图像采集或处理中微小变化的影响。CT图像的窗宽（width）和窗位（level）调整是一种常见的预处理步骤，它会裁剪或压缩强度值。本练习将模拟这一过程，让你亲手计算窗位调整前后均值和方差的变化，从而直观地理解图像预处理如何显著改变一阶特征，并强调标准化流程在放射组学分析中的核心地位。",
            "id": "4541085",
            "problem": "一位放射组学分析师正在评估计算机断层扫描（CT）中的显示窗技术对一阶直方图特征的影响。在CT窗技术中，窗位和窗宽决定了强度值的上下界；低于下界的值被设置为下界，高于上界的值被设置为上界。考虑一个CT感兴趣区域的离散化强度直方图，其原始强度 $x_i$ 和对应的概率 $p_i$ 如下：\n$$\nx_i \\in \\{-120,\\,-80,\\,-20,\\,0,\\,20,\\,100,\\,200,\\,400\\}, \\quad p_i \\in \\left\\{\\frac{2}{20},\\,\\frac{2}{20},\\,\\frac{4}{20},\\,\\frac{4}{20},\\,\\frac{4}{20},\\,\\frac{2}{20},\\,\\frac{1}{20},\\,\\frac{1}{20}\\right\\}.\n$$\n应用一个窗位 $L=50$ 和窗宽 $W=100$ 的显示窗，因此下界和上界分别为 $a=L-\\frac{W}{2}$ 和 $b=L+\\frac{W}{2}$。仅使用离散直方图概率质量函数和一阶特征（均值和方差）的核心定义，以及窗技术中削波的操作描述，通过确定当强度被削波至 $[a,b]$ 区间时概率 $p_i$ 如何重新分配，来推导窗处理后的直方图。由此，计算原始均值和方差、窗处理后的均值和方差，然后提供总结窗技术对离散度影响的单一量：窗处理后方差与窗处理前方差之比。将最终比率表示为一个精确分数。最终比率不需要单位，也无需四舍五入。",
            "solution": "首先验证问题，以确保其科学基础扎实、提法恰当且客观。\n\n**步骤1：提取给定条件**\n-   原始强度值：$x_i \\in \\{-120,\\,-80,\\,-20,\\,0,\\,20,\\,100,\\,200,\\,400\\}$。\n-   对应概率：$p_i \\in \\left\\{\\frac{2}{20},\\,\\frac{2}{20},\\,\\frac{4}{20},\\,\\frac{4}{20},\\,\\frac{4}{20},\\,\\frac{2}{20},\\,\\frac{1}{20},\\,\\frac{1}{20}\\right\\}$。\n-   窗位：$L=50$。\n-   窗宽：$W=100$。\n-   窗技术变换：低于下界 $a$ 的强度被削波至 $a$；高于上界 $b$ 的强度被削波至 $b$。\n-   下界公式：$a = L - \\frac{W}{2}$。\n-   上界公式：$b = L + \\frac{W}{2}$。\n-   目标：计算窗处理后方差与窗处理前方差之比。\n\n**步骤2：使用提取的给定条件进行验证**\n问题是有效的。\n-   它具有科学基础，描述了一个标准过程（CT窗技术），并使用了放射组学领域的标准统计量度（均值、方差）。\n-   给定概率之和为 $\\sum p_i = \\frac{2+2+4+4+4+2+1+1}{20} = \\frac{20}{20} = 1$，构成一个有效的概率质量函数。\n-   问题提法恰当，为计算唯一的数值解提供了所有必要的数据和定义。\n-   语言客观明确，没有违反任何无效性标准。\n\n解决方案首先计算原始（raw）强度分布的均值和方差。然后，确定窗技术操作对强度值及其概率的影响。最后，计算新的（窗处理后）分布的均值和方差，并计算所需比率。\n\n**1. 原始强度分布的均值和方差**\n\n令 $X$ 为表示原始强度的随机变量。其概率质量函数由 $P(X=x_i) = p_i$ 给出。\n\n原始分布的均值（期望值）$\\mu_{raw}$ 由下式给出：\n$$ \\mu_{raw} = E[X] = \\sum_{i} x_i p_i $$\n代入给定值：\n$$ \\mu_{raw} = \\frac{1}{20} \\left[ (-120)(2) + (-80)(2) + (-20)(4) + (0)(4) + (20)(4) + (100)(2) + (200)(1) + (400)(1) \\right] $$\n$$ \\mu_{raw} = \\frac{1}{20} \\left[ -240 - 160 - 80 + 0 + 80 + 200 + 200 + 400 \\right] $$\n$$ \\mu_{raw} = \\frac{1}{20} \\left[ -480 + 880 \\right] = \\frac{400}{20} = 20 $$\n\n原始分布的方差 $\\sigma^2_{raw}$ 由 $\\sigma^2_{raw} = E[X^2] - (E[X])^2$ 给出。首先，我们计算 $E[X^2]$：\n$$ E[X^2] = \\sum_{i} x_i^2 p_i $$\n$$ E[X^2] = \\frac{1}{20} \\left[ (-120)^2(2) + (-80)^2(2) + (-20)^2(4) + (0)^2(4) + (20)^2(4) + (100)^2(2) + (200)^2(1) + (400)^2(1) \\right] $$\n$$ E[X^2] = \\frac{1}{20} \\left[ (14400)(2) + (6400)(2) + (400)(4) + 0 + (400)(4) + (10000)(2) + (40000)(1) + (160000)(1) \\right] $$\n$$ E[X^2] = \\frac{1}{20} \\left[ 28800 + 12800 + 1600 + 1600 + 20000 + 40000 + 160000 \\right] $$\n$$ E[X^2] = \\frac{264800}{20} = 13240 $$\n现在，我们可以计算方差：\n$$ \\sigma^2_{raw} = E[X^2] - \\mu_{raw}^2 = 13240 - (20)^2 = 13240 - 400 = 12840 $$\n\n**2. 窗处理后直方图的推导**\n\n窗位 $L=50$ 和窗宽 $W=100$ 定义了强度窗 $[a,b]$。\n下界为 $a = L - \\frac{W}{2} = 50 - \\frac{100}{2} = 50 - 50 = 0$。\n上界为 $b = L + \\frac{W}{2} = 50 + \\frac{100}{2} = 50 + 50 = 100$。\n窗为 $[0, 100]$。\n\n任何强度 $x_i  0$ 都将被削波至 $0$。任何强度 $x_i > 100$ 都将被削波至 $100$。令 $Y$ 为窗处理后强度的随机变量。\n-   $x_i \\in \\{-120, -80, -20\\}$ 被映射到 $y=0$。\n-   $x_i \\in \\{0, 20, 100\\}$ 保持在窗内。\n-   $x_i \\in \\{200, 400\\}$ 被映射到 $y=100$。\n\n我们通过重新分配概率来构建 $Y$ 的新概率质量函数。出现的新强度值为 $0$、$20$ 和 $100$。\n-   新强度 $y=0$ 的概率是所有被削波至或等于 $0$ 的 $x_i$ 的概率之和：\n    $$ P(Y=0) = P(X=-120) + P(X=-80) + P(X=-20) + P(X=0) = \\frac{2}{20} + \\frac{2}{20} + \\frac{4}{20} + \\frac{4}{20} = \\frac{12}{20} $$\n-   $y=20$ 的概率不变：\n    $$ P(Y=20) = P(X=20) = \\frac{4}{20} $$\n-   新强度 $y=100$ 的概率是所有被削波至或等于 $100$ 的 $x_i$ 的概率之和：\n    $$ P(Y=100) = P(X=100) + P(X=200) + P(X=400) = \\frac{2}{20} + \\frac{1}{20} + \\frac{1}{20} = \\frac{4}{20} $$\n窗处理后的直方图由值 $\\{0, 20, 100\\}$ 和概率 $\\{\\frac{12}{20}, \\frac{4}{20}, \\frac{4}{20}\\}$ 定义。\n\n**3. 窗处理后强度分布的均值和方差**\n\n窗处理后分布的均值 $\\mu_{post}$ 为：\n$$ \\mu_{post} = E[Y] = \\sum_{j} y_j P(Y=y_j) $$\n$$ \\mu_{post} = (0)\\left(\\frac{12}{20}\\right) + (20)\\left(\\frac{4}{20}\\right) + (100)\\left(\\frac{4}{20}\\right) = \\frac{0 + 80 + 400}{20} = \\frac{480}{20} = 24 $$\n\n窗处理后分布的方差 $\\sigma^2_{post}$ 为 $\\sigma^2_{post} = E[Y^2] - (E[Y])^2$。首先我们计算 $E[Y^2]$：\n$$ E[Y^2] = \\sum_{j} y_j^2 P(Y=y_j) $$\n$$ E[Y^2] = (0)^2\\left(\\frac{12}{20}\\right) + (20)^2\\left(\\frac{4}{20}\\right) + (100)^2\\left(\\frac{4}{20}\\right) $$\n$$ E[Y^2] = \\frac{(400)(4) + (10000)(4)}{20} = \\frac{1600 + 40000}{20} = \\frac{41600}{20} = 2080 $$\n现在，我们可以计算方差：\n$$ \\sigma^2_{post} = E[Y^2] - \\mu_{post}^2 = 2080 - (24)^2 = 2080 - 576 = 1504 $$\n\n**4. 方差之比**\n\n最后一步是计算窗处理后方差与窗处理前方差之比。\n$$ \\text{Ratio} = \\frac{\\sigma^2_{post}}{\\sigma^2_{raw}} = \\frac{1504}{12840} $$\n为将其表示为最简精确分数，我们求出分子和分母的最大公约数。\n$$ \\frac{1504}{12840} = \\frac{1504 \\div 4}{12840 \\div 4} = \\frac{376}{3210} $$\n$$ \\frac{376}{3210} = \\frac{376 \\div 2}{3210 \\div 2} = \\frac{188}{1605} $$\n分子的质因数分解为 $188 = 2^2 \\times 47$。\n分母的质因数分解为 $1605 = 3 \\times 5 \\times 107$。\n由于没有共同的质因数，该分数已为最简形式。",
            "answer": "$$ \\boxed{\\frac{188}{1605}} $$"
        }
    ]
}
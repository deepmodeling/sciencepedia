{
    "hands_on_practices": [
        {
            "introduction": "The primary motivation for in situ data analysis and reduction is the immense volume of data generated by high-fidelity simulations, which creates a significant I/O bottleneck. Before exploring sophisticated reduction algorithms, it is essential to quantify this fundamental challenge. This first practice guides you through a foundational calculation to determine data sizes and I/O time, demonstrating the direct impact of a simple compression step on workflow efficiency .",
            "id": "3994993",
            "problem": "A high-fidelity turbulence-resolving gyrokinetic simulation in computational fusion science produces an in situ scalar diagnostic field at each output checkpoint. The field is discretized on a uniform grid of $512^3$ points, and each sample is stored as a single-precision floating-point value, which occupies $4$ bytes. An on-node in situ compressor achieves a compression ratio of $10$ on this field prior to writing to a parallel filesystem with a sustained input/output (I/O) bandwidth of $100$ gigabytes per second. For unit consistency, define $1$ gigabyte (GB) as $10^9$ bytes.\n\nUsing only the foundational definitions that (i) data size equals the product of the number of samples and bytes per sample, (ii) compression ratio equals uncompressed size divided by compressed size, and (iii) I/O time equals data size divided by sustained bandwidth, determine the following three quantities:\n1. The uncompressed data size in gigabytes.\n2. The compressed data size in gigabytes.\n3. The reduced I/O time to write the compressed dataset in seconds on the stated filesystem.\n\nExpress the two sizes in GB and the time in seconds. Round each of the three quantities to four significant figures. Your final answer must be provided as a single row matrix containing the three rounded values, in the order listed above, without units.",
            "solution": "The problem statement is critically validated before proceeding to a solution.\n\n### Step 1: Extract Givens\n- Grid discretization: $512^3$ points\n- Bytes per sample: $4$ bytes (single-precision float)\n- Compression ratio, $C_r$: $10$\n- Sustained I/O bandwidth, $R_{IO}$: $100$ gigabytes per second\n- Definition of gigabyte (GB): $1 \\text{ GB} = 10^9 \\text{ bytes}$\n- Definition of data size: (number of samples) $\\times$ (bytes per sample)\n- Definition of compression ratio: (uncompressed size) / (compressed size)\n- Definition of I/O time: (data size) / (sustained bandwidth)\n\n### Step 2: Validate Using Extracted Givens\n- **Scientifically Grounded:** The problem is grounded in fundamental concepts of data storage, compression, and transfer rates, which are central to high-performance computing and computational science. The values provided ($512^3$ grid, $4$-byte floats, $10:1$ compression, $100$ GB/s bandwidth) are realistic for contemporary large-scale scientific simulations. The explicit definition of a gigabyte as $10^9$ bytes (as opposed to $2^{30}$ bytes) is a mark of precision.\n- **Well-Posed:** All necessary data and definitions are provided. The three quantities to be determined are clearly specified, and a unique solution can be derived from the givens.\n- **Objective:** The problem is stated in precise, quantitative, and unbiased language.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid** as it is self-contained, scientifically sound, and well-posed. A formal solution will now be derived.\n\n### Solution Derivation\nLet $N$ be the total number of samples (grid points), $B_s$ be the bytes per sample, $S_u$ be the uncompressed data size, $S_c$ be the compressed data size, $C_r$ be the compression ratio, $R_{IO}$ be the I/O bandwidth, and $T_{IO}$ be the I/O time.\n\nThe given values are:\n- $N = 512^3$\n- $B_s = 4$ bytes\n- $C_r = 10$\n- $R_{IO} = 100 \\text{ GB/s}$\n- The conversion factor from bytes to gigabytes is $1 \\text{ GB} = 10^9 \\text{ bytes}$.\n\nThe three quantities to be determined are:\n1. $S_u$ in GB.\n2. $S_c$ in GB.\n3. $T_{IO}$ for the compressed data in seconds.\n\n**1. Uncompressed Data Size ($S_u$)**\n\nAccording to the provided definition, the uncompressed data size in bytes is the product of the number of samples and the bytes per sample.\n$$S_{u, \\text{bytes}} = N \\times B_s$$\nSubstituting the given values:\n$$S_{u, \\text{bytes}} = 512^3 \\times 4$$\nSince $512 = 2^9$, we have:\n$$S_{u, \\text{bytes}} = (2^9)^3 \\times 2^2 = 2^{27} \\times 2^2 = 2^{29} \\text{ bytes}$$\n$$S_{u, \\text{bytes}} = 536,870,912 \\text{ bytes}$$\nTo convert this size to gigabytes (GB), we divide by $10^9$.\n$$S_u = \\frac{S_{u, \\text{bytes}}}{10^9} = \\frac{536,870,912}{10^9} \\text{ GB}$$\n$$S_u = 0.536870912 \\text{ GB}$$\nRounding to four significant figures as required:\n$$S_u \\approx 0.5369 \\text{ GB}$$\n\n**2. Compressed Data Size ($S_c$)**\n\nThe compression ratio is defined as the uncompressed size divided by the compressed size.\n$$C_r = \\frac{S_u}{S_c}$$\nRearranging for the compressed size, $S_c$:\n$$S_c = \\frac{S_u}{C_r}$$\nUsing the unrounded value of $S_u$ for accuracy and the given $C_r$:\n$$S_c = \\frac{0.536870912 \\text{ GB}}{10}$$\n$$S_c = 0.0536870912 \\text{ GB}$$\nRounding to four significant figures:\n$$S_c \\approx 0.05369 \\text{ GB}$$\n\n**3. Reduced I/O Time ($T_{IO}$)**\n\nThe I/O time is defined as the data size to be written divided by the sustained I/O bandwidth. The data being written is the compressed dataset, so its size is $S_c$.\n$$T_{IO} = \\frac{S_c}{R_{IO}}$$\nThe units are consistent ($S_c$ in GB and $R_{IO}$ in GB/s), so the resulting time will be in seconds.\nUsing the unrounded value of $S_c$ for accuracy:\n$$T_{IO} = \\frac{0.0536870912 \\text{ GB}}{100 \\text{ GB/s}}$$\n$$T_{IO} = 0.000536870912 \\text{ s}$$\nRounding to four significant figures:\n$$T_{IO} \\approx 0.0005369 \\text{ s}$$\n\nThe three requested quantities, rounded to four significant figures, are $0.5369$, $0.05369$, and $0.0005369$. These will be presented in a row matrix as specified.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n0.5369 & 0.05369 & 0.0005369\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Data reduction is not merely about discarding information; it is about strategically preserving the most scientifically salient features while minimizing storage and I/O costs. This requires a rigorous method for quantifying the 'quality' or 'fidelity' of the reduced data. In this exercise, you will compute the Normalized Mean Squared Error ($NMSE$), a core metric in signal processing, to evaluate how well a reduced dataset approximates the original ground truth and determine if it meets a specific fidelity requirement tied to preserving physical energy characteristics .",
            "id": "3994958",
            "problem": "A high-performance computing in situ workflow is deployed within a magnetohydrodynamics (MHD) turbulence simulation to reduce diagnostic data movement while preserving spectral energy characteristics relevant for transport analysis. The workflow applies a physically informed sparsity transform and thresholding to a one-dimensional line-cut of the out-of-plane magnetic field component $B_{z}$ from a single snapshot, yielding a reduced dataset. Consider the discrete real-valued vector $x \\in \\mathbb{R}^{N}$ representing uniformly spaced samples of $B_{z}$ along a mesh line and its in situ reduced reconstruction $\\hat{x} \\in \\mathbb{R}^{N}$. The normalized mean squared error (NMSE) is defined by the core signal-processing quantity\n$$\nNMSE \\equiv \\frac{\\|x - \\hat{x}\\|_{2}^{2}}{\\|x\\|_{2}^{2}},\n$$\nwhere $\\|\\cdot\\|_{2}$ denotes the Euclidean norm. Under the standard discrete Fourier transform convention, Parseval's theorem states that the total energy in physical space equals the total energy in spectral space up to a normalization constant; therefore, a bound on $NMSE$ provides a bound on the relative error in integrated spectral energy.\n\nAssume the simulation line-cut and its reduced reconstruction at $N=6$ points are\n$$\nx = \\begin{pmatrix} 3.0 \\\\ -2.0 \\\\ 4.0 \\\\ 1.0 \\\\ -5.0 \\\\ 2.0 \\end{pmatrix}, \\qquad\n\\hat{x} = \\begin{pmatrix} 2.9 \\\\ -1.95 \\\\ 4.05 \\\\ 0.9 \\\\ -5.05 \\\\ 2.1 \\end{pmatrix}.\n$$\n\nUsing the above core definitions, compute $NMSE$ for this reduction. Then, interpret whether the reduction preserves the energy spectra to the required fidelity by using the threshold $NMSE \\leq 10^{-3}$, which is employed in this workflow to ensure that the relative error in integrated spectral energy is constrained to at most $10^{-3}$ in the sense of Parsevalâ€™s equivalence.\n\nReport two quantities:\n- The scalar $NMSE$, rounded to four significant figures. This is dimensionless; do not include units.\n- The indicator $I$, defined as $I = 1$ if $NMSE \\leq 10^{-3}$ and $I = 0$ otherwise. Report $I$ as an exact integer.\n\nExpress your final answer as a two-entry row matrix $\\begin{pmatrix} NMSE & I \\end{pmatrix}$.",
            "solution": "The problem requires the computation of two quantities: the normalized mean squared error ($NMSE$) for a given data reduction process, and a binary indicator $I$ that determines if the $NMSE$ meets a specified fidelity threshold.\n\nThe problem provides the following definitions and data:\nThe original data vector is $x \\in \\mathbb{R}^{N}$ and its reduced reconstruction is $\\hat{x} \\in \\mathbb{R}^{N}$, where $N=6$. The vectors are given as:\n$$\nx = \\begin{pmatrix} 3.0 \\\\ -2.0 \\\\ 4.0 \\\\ 1.0 \\\\ -5.0 \\\\ 2.0 \\end{pmatrix}, \\qquad\n\\hat{x} = \\begin{pmatrix} 2.9 \\\\ -1.95 \\\\ 4.05 \\\\ 0.9 \\\\ -5.05 \\\\ 2.1 \\end{pmatrix}\n$$\nThe normalized mean squared error is defined as:\n$$\nNMSE \\equiv \\frac{\\|x - \\hat{x}\\|_{2}^{2}}{\\|x\\|_{2}^{2}}\n$$\nThe indicator variable $I$ is defined as $I = 1$ if $NMSE \\leq 10^{-3}$ and $I = 0$ otherwise.\n\nFirst, we compute the numerator of the $NMSE$ expression, which is the squared Euclidean norm of the error vector $x - \\hat{x}$.\nLet the error vector be $d = x - \\hat{x}$.\n$$\nd = \\begin{pmatrix} 3.0 - 2.9 \\\\ -2.0 - (-1.95) \\\\ 4.0 - 4.05 \\\\ 1.0 - 0.9 \\\\ -5.0 - (-5.05) \\\\ 2.0 - 2.1 \\end{pmatrix} = \\begin{pmatrix} 0.1 \\\\ -0.05 \\\\ -0.05 \\\\ 0.1 \\\\ 0.05 \\\\ -0.1 \\end{pmatrix}\n$$\nThe squared Euclidean norm of $d$ is the sum of the squares of its components:\n$$\n\\|x - \\hat{x}\\|_{2}^{2} = \\|d\\|_{2}^{2} = (0.1)^{2} + (-0.05)^{2} + (-0.05)^{2} + (0.1)^{2} + (0.05)^{2} + (-0.1)^{2}\n$$\n$$\n\\|x - \\hat{x}\\|_{2}^{2} = 0.01 + 0.0025 + 0.0025 + 0.01 + 0.0025 + 0.01 = 0.0375\n$$\n\nNext, we compute the denominator of the $NMSE$ expression, which is the squared Euclidean norm of the original data vector $x$.\n$$\n\\|x\\|_{2}^{2} = (3.0)^{2} + (-2.0)^{2} + (4.0)^{2} + (1.0)^{2} + (-5.0)^{2} + (2.0)^{2}\n$$\n$$\n\\|x\\|_{2}^{2} = 9.0 + 4.0 + 16.0 + 1.0 + 25.0 + 4.0 = 59.0\n$$\n\nNow, we can compute the $NMSE$:\n$$\nNMSE = \\frac{0.0375}{59.0} \\approx 0.0006355932...\n$$\nThe problem requires this value to be rounded to four significant figures. The first four significant figures are $6$, $3$, $5$, and $5$. The fifth significant digit is $9$, which is greater than or equal to $5$, so we round up the fourth digit.\n$$\nNMSE \\approx 0.0006356\n$$\nIn scientific notation, this is $6.356 \\times 10^{-4}$.\n\nFinally, we determine the value of the indicator $I$. The condition is $NMSE \\leq 10^{-3}$. The threshold value is $10^{-3} = 0.001$.\nWe compare our calculated $NMSE$ to this threshold:\n$$\n0.0006356 \\leq 0.001\n$$\nThis inequality is true. Therefore, according to the definition, the indicator $I$ is $1$.\n\nThe two required quantities are $NMSE = 6.356 \\times 10^{-4}$ and $I=1$.",
            "answer": "$$\\boxed{\\begin{pmatrix} 6.356 \\times 10^{-4} & 1 \\end{pmatrix}}$$"
        },
        {
            "introduction": "Building upon the need for reduction and the concept of fidelity metrics, this practice delves into a powerful and widely-used technique for data compression: the Singular Value Decomposition (SVD). SVD allows us to represent complex data as a sum of fundamental modes, enabling a highly effective form of model order reduction by retaining only the most energetic ones. This exercise challenges you to apply SVD principles to determine the minimal 'rank' of an approximation that satisfies a given error tolerance, a task that lies at the heart of designing efficient and scientifically robust in situ workflows .",
            "id": "3995012",
            "problem": "A magnetically confined fusion experiment produces a matrix of snapshots $X \\in \\mathbb{R}^{m \\times n}$, where $m=400$ diagnostics channels and $n=1000$ time slices. To support in situ data analysis and reduction, the pipeline compresses each $X$ by keeping only the leading rank-$k$ factors from the Singular Value Decomposition (SVD). The fidelity requirement stipulates that the relative squared reconstruction error must satisfy $\\lVert X - X_{k} \\rVert_{F}^{2} / \\lVert X \\rVert_{F}^{2} \\leq \\delta$, with $\\delta = 0.005$, to ensure that dominant magnetohydrodynamic mode energy is preserved in the compressed representation.\n\nAssume that $X$ has numerical rank $r=12$ with singular values (in descending order) given by $\\sigma_{1} = 10$, $\\sigma_{2} = 5$, $\\sigma_{3} = 3$, $\\sigma_{4} = 2$, $\\sigma_{5} = 1.5$, $\\sigma_{6} = 1.2$, $\\sigma_{7} = 1.0$, $\\sigma_{8} = 0.8$, $\\sigma_{9} = 0.6$, $\\sigma_{10} = 0.5$, $\\sigma_{11} = 0.4$, and $\\sigma_{12} = 0.3$.\n\nStarting only from the definitions of SVD and the Frobenius norm, derive how the squared Frobenius reconstruction error of the best rank-$k$ approximation depends on the singular values that are discarded. Then, using the provided singular values and the fidelity requirement, determine the minimal integer $k$ that satisfies $\\lVert X - X_{k} \\rVert_{F}^{2} / \\lVert X \\rVert_{F}^{2} \\leq \\delta$. Express the final answer as the minimal integer $k$.",
            "solution": "The problem statement has been analyzed and is determined to be valid. It is scientifically grounded, well-posed, objective, and provides all necessary information to derive a unique solution.\n\nThe problem requires a two-part solution: first, a derivation of the relationship between the squared Frobenius reconstruction error and the singular values, and second, the application of this result to find the minimal rank $k$ for a given fidelity requirement.\n\n**Part 1: Derivation of the Reconstruction Error**\n\nLet $X$ be a real matrix of size $m \\times n$. The Singular Value Decomposition (SVD) of $X$ is given by:\n$$X = U \\Sigma V^T$$\nwhere $U$ is an $m \\times m$ orthogonal matrix ($U^T U = I_m$), $V$ is an $n \\times n$ orthogonal matrix ($V^T V = I_n$), and $\\Sigma$ is an $m \\times n$ rectangular diagonal matrix with non-negative real numbers $\\sigma_i$ on the diagonal, called the singular values. The singular values are ordered in a descending manner, $\\sigma_1 \\geq \\sigma_2 \\geq \\dots \\geq \\sigma_p \\geq 0$, where $p = \\min(m, n)$. If the rank of $X$ is $r$, then there are exactly $r$ non-zero singular values. The SVD can also be written as an outer product expansion:\n$$X = \\sum_{i=1}^{r} \\sigma_i u_i v_i^T$$\nwhere $u_i$ and $v_i$ are the $i$-th columns of $U$ and $V$, respectively.\n\nThe Frobenius norm of a matrix $A \\in \\mathbb{R}^{m \\times n}$ is defined as:\n$$\\lVert A \\rVert_{F} = \\sqrt{\\sum_{i=1}^m \\sum_{j=1}^n a_{ij}^2}$$\nThe squared Frobenius norm can be expressed using the trace of the matrix:\n$$\\lVert A \\rVert_{F}^2 = \\text{tr}(A^T A)$$\nApplying this to the matrix $X$:\n$$\\lVert X \\rVert_{F}^2 = \\text{tr}(X^T X)$$\nSubstituting the SVD of $X$ into this expression:\n$$\\lVert X \\rVert_{F}^2 = \\text{tr}((U \\Sigma V^T)^T (U \\Sigma V^T)) = \\text{tr}(V \\Sigma^T U^T U \\Sigma V^T)$$\nSince $U$ is orthogonal, $U^T U = I_m$. Using the cyclic property of the trace, $\\text{tr}(ABC) = \\text{tr}(CAB)$:\n$$\\lVert X \\rVert_{F}^2 = \\text{tr}(V \\Sigma^T \\Sigma V^T) = \\text{tr}(\\Sigma^T \\Sigma V^T V)$$\nSince $V$ is orthogonal, $V^T V = I_n$.\n$$\\lVert X \\rVert_{F}^2 = \\text{tr}(\\Sigma^T \\Sigma)$$\nThe matrix $\\Sigma^T \\Sigma$ is an $n \\times n$ diagonal matrix with the first $r$ diagonal entries being $\\sigma_1^2, \\sigma_2^2, \\dots, \\sigma_r^2$, and the rest being zero. The trace is the sum of the diagonal elements. Therefore, the squared Frobenius norm of $X$ is the sum of its squared singular values:\n$$\\lVert X \\rVert_{F}^2 = \\sum_{i=1}^r \\sigma_i^2$$\n\nAccording to the Eckart-Young-Mirsky theorem, the best rank-$k$ approximation to $X$ in the Frobenius norm, denoted as $X_k$, is obtained by truncating the SVD sum at the $k$-th term:\n$$X_k = \\sum_{i=1}^k \\sigma_i u_i v_i^T$$\nThe reconstruction error is the difference between the original matrix and its approximation, $X - X_k$. Using the outer product expansions:\n$$X - X_k = \\sum_{i=1}^r \\sigma_i u_i v_i^T - \\sum_{i=1}^k \\sigma_i u_i v_i^T = \\sum_{i=k+1}^r \\sigma_i u_i v_i^T$$\nThis error matrix itself has an SVD form. Its singular values are the discarded singular values of $X$, namely $\\sigma_{k+1}, \\sigma_{k+2}, \\dots, \\sigma_r$. Applying the same relationship between the Frobenius norm and singular values to the error matrix $X - X_k$, we find its squared Frobenius norm:\n$$\\lVert X - X_k \\rVert_{F}^2 = \\sum_{i=k+1}^r \\sigma_i^2$$\nThis result shows that the squared Frobenius reconstruction error of the best rank-$k$ approximation is precisely the sum of the squares of the discarded singular values.\n\n**Part 2: Finding the Minimal Rank $k$**\n\nThe fidelity requirement is given by:\n$$\\frac{\\lVert X - X_k \\rVert_{F}^2}{\\lVert X \\rVert_{F}^2} \\leq \\delta$$\nUsing the expressions derived above, this inequality becomes:\n$$\\frac{\\sum_{i=k+1}^r \\sigma_i^2}{\\sum_{i=1}^r \\sigma_i^2} \\leq \\delta$$\nThe problem states that the numerical rank is $r=12$ and the fidelity threshold is $\\delta = 0.005$. The singular values are provided.\n\nFirst, we compute the total squared Frobenius norm, $\\lVert X \\rVert_{F}^2 = \\sum_{i=1}^{12} \\sigma_i^2$:\n$$\n\\begin{aligned}\n\\lVert X \\rVert_{F}^2 &= (10)^2 + (5)^2 + (3)^2 + (2)^2 + (1.5)^2 + (1.2)^2 + (1.0)^2 + (0.8)^2 + (0.6)^2 + (0.5)^2 + (0.4)^2 + (0.3)^2 \\\\\n&= 100 + 25 + 9 + 4 + 2.25 + 1.44 + 1 + 0.64 + 0.36 + 0.25 + 0.16 + 0.09 \\\\\n&= 144.19\n\\end{aligned}\n$$\nNext, we calculate the maximum allowed squared reconstruction error:\n$$\\lVert X - X_k \\rVert_{F}^2 \\leq \\delta \\cdot \\lVert X \\rVert_{F}^2 = 0.005 \\times 144.19 = 0.72095$$\nWe must find the minimal integer $k$ such that the sum of the squares of the discarded singular values, $\\sum_{i=k+1}^{12} \\sigma_i^2$, is less than or equal to this threshold.\nLet $E_k = \\sum_{i=k+1}^{12} \\sigma_i^2$. We will test values of $k$ starting from $r-1=11$ downwards.\nFor $k=11$:\n$E_{11} = \\sigma_{12}^2 = (0.3)^2 = 0.09$. Since $0.09 \\leq 0.72095$, the condition is met.\n\nFor $k=10$:\n$E_{10} = \\sigma_{11}^2 + \\sigma_{12}^2 = (0.4)^2 + 0.09 = 0.16 + 0.09 = 0.25$. Since $0.25 \\leq 0.72095$, the condition is met.\n\nFor $k=9$:\n$E_{9} = \\sigma_{10}^2 + E_{10} = (0.5)^2 + 0.25 = 0.25 + 0.25 = 0.50$. Since $0.50 \\leq 0.72095$, the condition is met.\n\nFor $k=8$:\n$E_{8} = \\sigma_{9}^2 + E_{9} = (0.6)^2 + 0.50 = 0.36 + 0.50 = 0.86$. Since $0.86 > 0.72095$, the condition is not met.\n\nThe condition fails for $k=8$ but holds for $k=9$. Therefore, the minimal integer value of $k$ that satisfies the fidelity requirement is $9$.\n\nAlternatively, we can express the fidelity requirement as retaining a certain fraction of the \"energy\":\n$\\sum_{i=1}^k \\sigma_i^2 \\geq (1-\\delta) \\sum_{i=1}^{12} \\sigma_i^2$.\nWith $1 - \\delta = 0.995$, the required retained energy is $0.995 \\times 144.19 = 143.46905$.\nLet's compute the cumulative sum of squared singular values, $S_k = \\sum_{i=1}^k \\sigma_i^2$:\n$S_8 = \\sum_{i=1}^8 \\sigma_i^2 = \\lVert X \\rVert_F^2 - E_8 = 144.19 - 0.86 = 143.33$.\nSince $S_8 = 143.33 < 143.46905$, $k=8$ is not sufficient.\n$S_9 = S_8 + \\sigma_9^2 = 143.33 + (0.6)^2 = 143.33 + 0.36 = 143.69$.\nSince $S_9 = 143.69 \\geq 143.46905$, $k=9$ is the minimal rank that satisfies the criterion.\nBoth methods confirm the result.",
            "answer": "$$\\boxed{9}$$"
        }
    ]
}
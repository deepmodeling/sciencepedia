{
    "hands_on_practices": [
        {
            "introduction": "理解半导体-电解质界面是光催化建模的关键。空间电荷区及其特征长度——德拜长度 ($L_D$)——决定了驱动电荷分离的内建电场。本练习将通过从泊松-玻尔兹曼方程第一性原理出发，推导这一基本参数，并将其与可控的材料属性——施主浓度 ($N_D$)——联系起来。这项实践将半导体物理学的基础知识与光催化的核心机制紧密结合 。",
            "id": "3889795",
            "problem": "一种 $n$ 型半导体光催化剂（锐钛矿 $\\mathrm{TiO_2}$）在稳态光照下与水性电解质接触，表现出由空间电荷区的静电屏蔽控制的近表面能带弯曲。假设该半导体是非简并掺杂的，施主在工作温度下完全电离，并且电子气在线性响应区内根据玻尔兹曼统计响应静电扰动。从静电学的泊松方程和载流子浓度的玻尔兹曼关系式出发，推导出描述静电势在半导体体相中指数衰减的特征屏蔽长度。使用该特征长度确定在 $T = 298 \\,\\mathrm{K}$ 时产生目标屏蔽长度（德拜长度） $L_{D} = 5.0 \\,\\mathrm{nm}$ 所需的施主浓度 $N_{D}$。\n\n取真空介电常数为 $\\epsilon_{0} = 8.854\\,187\\,8128 \\times 10^{-12} \\,\\mathrm{F \\, m^{-1}}$，玻尔兹曼常数为 $k_{B} = 1.380\\,649 \\times 10^{-23} \\,\\mathrm{J \\, K^{-1}}$，基本电荷为 $q = 1.602\\,176\\,634 \\times 10^{-19} \\,\\mathrm{C}$，锐钛矿 $\\mathrm{TiO_2}$ 的相对介电常数为 $\\epsilon_{r} = 31$。将最终的施主浓度以 $\\mathrm{cm^{-3}}$ 为单位表示。将答案四舍五入至三位有效数字。\n\n最后，基于第一性原理，解释所获得的屏蔽长度如何影响半导体-电解质界面处的界面能带弯曲和电荷分离场，并讨论其对界面光催化反应动力学建模的影响。",
            "solution": "题目要求推导非简并掺杂的 n 型半导体中的特征屏蔽长度，计算达到特定屏蔽长度所需的施主浓度 $N_D$，并解释其对光催化的物理意义。推导从第一性原理出发，使用泊松方程和电子浓度的玻尔兹曼关系式。\n\n设 $x$ 是垂直于半导体-电解质界面的空间坐标，界面处 $x=0$，并向半导体体相内部增加。\n\n半导体内的静电势 $\\phi(x)$ 由一维泊松方程决定：\n$$\n\\frac{d^2\\phi(x)}{dx^2} = -\\frac{\\rho(x)}{\\epsilon}\n$$\n其中 $\\rho(x)$ 是净空间电荷密度，$\\epsilon$ 是半导体的介电常数。介电常数由 $\\epsilon = \\epsilon_r \\epsilon_0$ 给出，其中 $\\epsilon_r$ 是相对介电常数，$\\epsilon_0$ 是真空介电常数。\n\n对于 n 型半导体，空间电荷来自于浓度为 $N_D$ 的已电离施主原子的固定正电荷，以及浓度为 $n(x)$ 的可移动电子的负电荷。空穴的浓度可以忽略不计。假设施主完全电离，净电荷密度为：\n$$\n\\rho(x) = q(N_D - n(x))\n$$\n其中 $q$ 是基本电荷。\n\n在半导体体相中（远离界面，即 $x \\to \\infty$），电中性成立，因此电子浓度 $n_0$ 等于施主浓度 $N_D$。我们定义体相中的电势为零，即 $\\phi(x \\to \\infty) = 0$。\n\n假设电子气遵循玻尔兹曼统计，位置 $x$ 处电势为 $\\phi(x)$ 时的电子浓度 $n(x)$ 与体相浓度 $n_0 = N_D$ 的关系为：\n$$\nn(x) = n_0 \\exp\\left(-\\frac{-q\\phi(x)}{k_B T}\\right) = N_D \\exp\\left(\\frac{q\\phi(x)}{k_B T}\\right)\n$$\n其中 $k_B$ 是玻尔兹曼常数，$T$ 是绝对温度。\n\n将 $\\rho(x)$ 和 $n(x)$ 的表达式代入泊松方程，得到泊松-玻尔兹曼方程：\n$$\n\\frac{d^2\\phi(x)}{dx^2} = -\\frac{q N_D}{\\epsilon} \\left(1 - \\exp\\left(\\frac{q\\phi(x)}{k_B T}\\right)\\right)\n$$\n题目指定我们处于线性响应区，这对应于小电势扰动，即 $|q\\phi(x)| \\ll k_B T$。在这种情况下，我们可以使用泰勒展开 $\\exp(y) \\approx 1+y$（对于小的 $y$）来线性化指数项。设 $y = \\frac{q\\phi(x)}{k_B T}$，我们得到：\n$$\n\\exp\\left(\\frac{q\\phi(x)}{k_B T}\\right) \\approx 1 + \\frac{q\\phi(x)}{k_B T}\n$$\n将此线性化结果代入泊松-玻尔兹曼方程：\n$$\n\\frac{d^2\\phi(x)}{dx^2} \\approx -\\frac{q N_D}{\\epsilon} \\left(1 - \\left(1 + \\frac{q\\phi(x)}{k_B T}\\right)\\right) = -\\frac{q N_D}{\\epsilon} \\left(-\\frac{q\\phi(x)}{k_B T}\\right)\n$$\n$$\n\\frac{d^2\\phi(x)}{dx^2} = \\left(\\frac{q^2 N_D}{\\epsilon k_B T}\\right) \\phi(x)\n$$\n这是一个二阶线性齐次微分方程。它可以被重写为标准形式：\n$$\n\\frac{d^2\\phi(x)}{dx^2} - \\frac{1}{L_D^2} \\phi(x) = 0\n$$\n其中 $L_D$ 是特征长度。通过比较这两种形式，我们可以确定屏蔽长度的平方，即德拜长度 $L_D$ 的平方为：\n$$\nL_D^2 = \\frac{\\epsilon k_B T}{q^2 N_D}\n$$\n因此，特征屏蔽长度为：\n$$\nL_D = \\sqrt{\\frac{\\epsilon k_B T}{q^2 N_D}} = \\sqrt{\\frac{\\epsilon_r \\epsilon_0 k_B T}{q^2 N_D}}\n$$\n推导至此完成。该微分方程在体相中衰减至零的物理上有意义的解是 $\\phi(x) = \\phi_s \\exp(-x/L_D)$，其中 $\\phi_s$ 是表面（$x=0$）的电势。这证实了 $L_D$ 是电势指数衰减的特征长度。\n\n接下来，我们计算在 $T = 298 \\,\\mathrm{K}$ 时达到目标屏蔽长度 $L_D = 5.0 \\,\\mathrm{nm}$ 所需的施主浓度 $N_D$。我们重新整理公式以求解 $N_D$：\n$$\nN_D = \\frac{\\epsilon_r \\epsilon_0 k_B T}{q^2 L_D^2}\n$$\n我们已知以下常数：\n$L_D = 5.0 \\,\\mathrm{nm} = 5.0 \\times 10^{-9} \\,\\mathrm{m}$\n$T = 298 \\,\\mathrm{K}$\n$\\epsilon_r = 31$\n$\\epsilon_0 = 8.854\\,187\\,8128 \\times 10^{-12} \\,\\mathrm{F \\, m^{-1}}$\n$k_B = 1.380\\,649 \\times 10^{-23} \\,\\mathrm{J \\, K^{-1}}$\n$q = 1.602\\,176\\,634 \\times 10^{-19} \\,\\mathrm{C}$\n\n将这些值代入 $N_D$ 的表达式中：\n$$\nN_D = \\frac{(31)(8.8541878128 \\times 10^{-12} \\,\\mathrm{F \\, m^{-1}})(1.380649 \\times 10^{-23} \\,\\mathrm{J \\, K^{-1}})(298 \\,\\mathrm{K})}{(1.602176634 \\times 10^{-19} \\,\\mathrm{C})^2 (5.0 \\times 10^{-9} \\,\\mathrm{m})^2}\n$$\n$$\nN_D \\approx \\frac{1.13035 \\times 10^{-30} \\,\\mathrm{J \\cdot F \\cdot m^{-1}}}{6.41742 \\times 10^{-55} \\,\\mathrm{C^2 \\cdot m^2}} \\approx 1.7613 \\times 10^{24} \\,\\mathrm{m^{-3}}\n$$\n题目要求答案以 $\\mathrm{cm^{-3}}$ 为单位。我们使用转换因子 $1 \\,\\mathrm{m} = 100 \\,\\mathrm{cm}$，因此 $1 \\,\\mathrm{m^3} = (10^2)^3 \\,\\mathrm{cm^3} = 10^6 \\,\\mathrm{cm^3}$。\n$$\nN_D \\approx (1.7613 \\times 10^{24} \\,\\mathrm{m^{-3}}) \\times \\left(\\frac{1 \\,\\mathrm{m^3}}{10^6 \\,\\mathrm{cm^3}}\\right) = 1.7613 \\times 10^{18} \\,\\mathrm{cm^{-3}}\n$$\n四舍五入至三位有效数字，施主浓度为 $1.76 \\times 10^{18} \\,\\mathrm{cm^{-3}}$。\n\n最后，我们解释其物理意义。\n\n屏蔽长度 $L_D$ 是描述半导体-电解质界面附近空间电荷区空间范围的基本参数。其数值对材料的光催化性能具有深远影响。\n\n1.  **对界面能带弯曲的影响**：在界面处，发生电荷转移以使半导体的费米能级与电解质的氧化还原电位相平衡，从而产生电势差。该电势降发生在整个空间电荷区，导致半导体的能带（导带和价带）发生弯曲。屏蔽长度 $L_D$ 决定了这种弯曲发生的宽度。较小的 $L_D$（对应较高的施主浓度 $N_D$）意味着半导体中的载流子能更有效地屏蔽电场。因此，电势在离表面更短的距离内更陡峭地下降。相反，较大的 $L_D$（较低的 $N_D$）导致电势在更宽的区域内更平缓地下降。虽然能带弯曲的总幅度由结的热力学决定，但 $L_D$ 控制着这种弯曲的空间分布。\n\n2.  **对电荷分离场的影响**：能带弯曲在空间电荷区内产生一个内建电场，$E(x) = -d\\phi(x)/dx$。在线性模型中，$E(x) = (\\phi_s/L_D) \\exp(-x/L_D)$。这个电场对光催化至关重要，因为它分离光生电子-空穴对，将少数载流子（在此 n 型半导体中为空穴）驱动到表面，将多数载流子（电子）驱动到体相。这种分离对于防止电荷复合至关重要。较小的 $L_D$ 导致表面附近有更强的电场（$E_{max} \\propto 1/L_D$），这可以提高在该区域内产生的载流子的电荷分离效率。这通常有利于光催化活性。\n\n3.  **对光催化反应动力学建模的影响**：光催化反应发生在表面，其速率取决于载流子（空穴）向界面的通量。该通量由空间电荷区内的漂移（由于电场）和扩散过程控制。因此，任何严谨的光催化动力学模型都必须考虑电荷输运。屏蔽长度 $L_D$ 通过定义电势分布 $\\phi(x)$ 和电场 $E(x)$，是此类模型的关键输入参数。它直接影响计算出的载流子浓度分布和通量。一个准确的 $L_D$ 值（以及因此的 $N_D$ 值）对于正确模拟向表面反应物电荷转移的速率，并最终预测光催化过程的整体量子效率是必需的。强而窄的分离场（小 $L_D$）与弱而宽的分离场（大 $L_D$）相对于光吸收深度的权衡是光催化剂设计中的一个关键优化问题，而植根于这些第一性原理的建模对于解决该问题至关重要。",
            "answer": "$$\\boxed{1.76 \\times 10^{18}}$$"
        },
        {
            "introduction": "在建立了电荷分离的静电环境后，下一个关键步骤是模拟光生载流子的最终去向。本练习着重于我们期望的表面反应与不希望发生的电荷复合之间的动力学竞争。通过这项实践，你将构建一个简单而强大的“零维”动力学模型，用以计算表观量子产率 (AQY)，这是一个量化光子到化学产物转化效率的关键性能指标 。",
            "id": "3889791",
            "problem": "一个平面半导体光催化剂被单色光照射，产生可移动的电荷载流子，这些载流子既可以在体相中复合，也可以被表面反应消耗。对载流子动力学进行建模，并计算表观量子产率 (AQY)，此处其定义为每个入射光子形成的产物分子数。表观量子产率 (AQY) 是一个无量纲的分数，你的程序必须按照文末的规定，为每个测试用例报告其值。\n\n使用的基本原理和定义：\n- 波长为 $\\lambda$ 的光子能量为 $E_{\\text{photon}} = h c / \\lambda$，其中 $h$ 是普朗克常数，$c$ 是光速。\n- 入射辐照度 $I$（单位面积功率）产生单位面积的入射光子通量 $\\phi_{\\text{inc}}$，该值由单位面积的总入射功率除以光子能量得出。\n- 比例为 $\\alpha$（无量纲，$0 \\le \\alpha \\le 1$）的入射光子被吸收，每个被吸收的光子产生一个可移动载流子。\n- 可移动载流子具有特征体相寿命 $\\tau$（秒），它为可移动载流子表面密度 $n$（单位面积载流子数）定义了一个大小为 $n / \\tau$ 的一级复合汇。\n- 表面反应以准一级反应速率常数 $k_r$（单位为秒⁻¹）消耗可移动载流子，该常数作用于可移动载流子表面密度 $n$。\n- 产物形成的化学计量要求每个产物分子需要 $z$ 个载流子，这意味着单位面积的产物生成速率与反应消耗载流子的速率除以 $z$ 的值成正比。\n\n从这些原理出发，为可移动载流子表面密度 $n(t)$ 建立载流子连续性方程，并分析在恒定光照下的稳态。使用物理上一致的假设，即生成项等于单位面积吸收的光子通量。假设载流子密度在空间上是均匀的，并忽略传输限制。推导稳态下单位面积的产物生成速率的表达式，然后计算相对于入射光子通量的 AQY。将 AQY 表示为无量纲的分数。\n\n你的程序必须：\n1. 对于每个测试用例，使用 $E_{\\text{photon}} = h c / \\lambda$ 和给定的 $I$ 计算单位面积入射光子通量 $\\phi_{\\text{inc}}$。\n2. 使用上述基本原理，确定在恒定光照下，考虑生成、复合和表面反应消耗时的稳态可移动载流子表面密度 $n$。\n3. 根据载流子的反应消耗和化学计量数 $z$ 计算单位面积的产物生成速率。\n4. 计算 AQY，即单位面积产物生成速率与 $\\phi_{\\text{inc}}$ 的比值。\n5. 生成单行输出，其中包含所有测试用例的 AQY 值，格式为方括号内以逗号分隔的列表（例如 `[0.1,0.01,0.001]`）。每个 AQY 必须表示为无量纲的小数。\n\n使用的物理常数和单位：\n- 使用 $h = 6.62607015 \\times 10^{-34}$ $\\text{J}\\cdot\\text{s}$ 和 $c = 2.99792458 \\times 10^{8}$ $\\text{m}/\\text{s}$。\n- 输入辐照度 $I$ 的单位是 $\\text{W}/\\text{m}^2$。\n- 波长 $\\lambda$ 的单位是 $\\text{m}$。\n- 速率常数 $k_r$ 的单位是 $\\text{s}^{-1}$。\n- 寿命 $\\tau$ 的单位是 $\\text{s}$。\n- 化学计量数 $z$ 是无量纲的。\n\n测试套件参数集（每个测试用例是一个元组 $(I, \\lambda, \\alpha, k_r, \\tau, z)$）：\n- 案例 A（一般情况，中等寿命）：$(500, 365 \\times 10^{-9}, 0.2, 10^{4}, 10^{-6}, 2)$。\n- 案例 B（边缘情况，极短寿命）：$(500, 365 \\times 10^{-9}, 0.2, 10^{4}, 10^{-9}, 2)$。\n- 案例 C（边界情况，极长寿命）：$(500, 365 \\times 10^{-9}, 0.2, 10^{4}, 1, 2)$。\n- 案例 D（边缘情况，无吸收）：$(500, 365 \\times 10^{-9}, 0, 10^{4}, 10^{-6}, 2)$。\n- 案例 E（不同光谱和动力学）：$(100, 520 \\times 10^{-9}, 0.6, 10^{3}, 10^{-3}, 4)$。\n\n你的程序应生成单行输出，其中包含所有结果，格式为方括号内以逗号分隔的列表（例如 `[0.1,0.01,0.001]`）。每个条目必须是对应测试用例（按 A、B、C、D、E 的顺序）的 AQY，表示为无量纲的小数。",
            "solution": "对问题陈述进行分析后，确认其是有效的。它在科学上基于光催化和半导体物理的原理，问题提法得当，目标明确，信息充分，并且其表述是客观的。因此，我们可以开始推导解决方案。\n\n目标是计算表观量子产率 (AQY)，其定义为单位面积的产物分子生成速率与单位面积的入射光子速率之比。这需要为稳态光照下的电荷载流子动力学推导一个数学模型。\n\n首先，我们确定控制系统的基本速率。\n\n$1$. **光子通量和载流子生成**\n波长为 $\\lambda$ 的单个光子的能量由普朗克-爱因斯坦关系式给出：\n$$ E_{\\text{photon}} = \\frac{hc}{\\lambda} $$\n其中 $h$ 是普朗克常数（$6.62607015 \\times 10^{-34} \\, \\text{J} \\cdot \\text{s}$），$c$ 是光速（$2.99792458 \\times 10^{8} \\, \\text{m/s}$）。\n\n给定入射辐照度 $I$（单位为 $\\text{W}/\\text{m}^2$，即 $\\text{J} \\cdot \\text{s}^{-1} \\cdot \\text{m}^{-2}$），单位面积的入射光子通量 $\\phi_{\\text{inc}}$ 是辐照度除以每个光子的能量：\n$$ \\phi_{\\text{inc}} = \\frac{I}{E_{\\text{photon}}} = \\frac{I \\lambda}{hc} $$\n$\\phi_{\\text{inc}}$ 的单位是 光子数 $\\cdot \\text{m}^{-2} \\cdot \\text{s}^{-1}$。\n\n比例为 $\\alpha$ 的光子被吸收，每个被吸收的光子产生一个可移动载流子。因此，单位面积的载流子生成速率 $G$ 为：\n$$ G = \\alpha \\phi_{\\text{inc}} = \\frac{\\alpha I \\lambda}{hc} $$\n$G$ 的单位是 载流子数 $\\cdot \\text{m}^{-2} \\cdot \\text{s}^{-1}$。\n\n$2$. **载流子损失机制**\n生成的可移动载流子通过两种独立的、一级反应途径从系统中移除：\na) **体相复合**：一个具有特征寿命 $\\tau$ 的损失过程。单位面积的复合速率 $R_{\\text{recomb}}$ 与载流子表面密度 $n$（单位为 载流子数/$\\text{m}^2$）成正比：\n$$ R_{\\text{recomb}} = \\frac{n}{\\tau} $$\nb) **表面反应**：一个产生性的损失通道，载流子被消耗以形成产物。这个准一级反应的单位面积速率 $R_{\\text{react}}$ 由下式给出：\n$$ R_{\\text{react}} = k_r n $$\n其中 $k_r$ 是表面反应速率常数（单位为 $\\text{s}^{-1}$）。\n\n$3$. **载流子连续性和稳态密度**\n可移动载流子表面密度 $n(t)$ 的时间演化由连续性方程描述，该方程平衡了生成和损失：\n$$ \\frac{dn}{dt} = \\text{生成} - \\text{损失} = G - R_{\\text{recomb}} - R_{\\text{react}} $$\n代入速率的表达式：\n$$ \\frac{dn}{dt} = \\frac{\\alpha I \\lambda}{hc} - \\frac{n}{\\tau} - k_r n $$\n在稳态光照下，系统达到一个恒定的载流子密度 $n_{ss}$，此时净变化率为零（$dn/dt = 0$）。\n$$ 0 = \\frac{\\alpha I \\lambda}{hc} - \\frac{n_{ss}}{\\tau} - k_r n_{ss} $$\n我们求解 $n_{ss}$：\n$$ \\frac{\\alpha I \\lambda}{hc} = n_{ss} \\left(\\frac{1}{\\tau} + k_r\\right) $$\n$$ n_{ss} = \\frac{\\alpha I \\lambda / (hc)}{1/\\tau + k_r} $$\n\n$4$. **产物生成速率和表观量子产率 (AQY)**\n单位面积的产物分子生成速率 $R_{\\text{prod}}$ 取决于表面反应的载流子消耗速率 $R_{\\text{react}}$ 和化学计量数 $z$（每个产物分子所需的载流子数）。\n$$ R_{\\text{prod}} = \\frac{R_{\\text{react}}}{z} = \\frac{k_r n_{ss}}{z} $$\n代入 $n_{ss}$ 的表达式：\n$$ R_{\\text{prod}} = \\frac{k_r}{z} \\left( \\frac{\\alpha I \\lambda / (hc)}{1/\\tau + k_r} \\right) $$\n\n表观量子产率 (AQY) 定义为产物生成速率与入射光子通量的比值：\n$$ \\text{AQY} = \\frac{R_{\\text{prod}}}{\\phi_{\\text{inc}}} $$\n代入推导出的 $R_{\\text{prod}}$ 和 $\\phi_{\\text{inc}} = I \\lambda / (hc)$ 的表达式：\n$$ \\text{AQY} = \\frac{\\frac{k_r}{z} \\left( \\frac{\\alpha I \\lambda / (hc)}{1/\\tau + k_r} \\right)}{I \\lambda / (hc)} $$\n入射光子通量项 $I \\lambda / (hc)$ 从分子和分母中约去。这表明，在此模型下，只要能量足以生成载流子，AQY 就与入射光强度和波长无关。\n$$ \\text{AQY} = \\frac{\\alpha k_r}{z(1/\\tau + k_r)} $$\n为了计算上的清晰，这个表达式可以通过将分子和分母同乘以 $\\tau$ 来重新整理：\n$$ \\text{AQY} = \\frac{\\alpha k_r \\tau}{z(1 + k_r \\tau)} $$\n这个最终表达式将 AQY 直接与内在的材料和反应参数（$\\alpha$、$\\tau$、$k_r$、$z$）关联起来。它代表了导致产物分子形成的入射光子的比例。$\\frac{k_r \\tau}{1 + k_r \\tau}$ 项可以被解释为在与体相复合的竞争中，表面反应通道的动力学效率。\n\n程序将按照问题中概述的步骤进行计算，以确保对物理模型的忠实转译，尽管代数简化是可能的。这使得代码的逻辑清晰地遵循了物理推导过程。",
            "answer": "```python\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Computes the Apparent Quantum Yield (AQY) for several photocatalysis test cases based on a steady-state kinetic model.\n    \"\"\"\n    # Physical constants\n    h = 6.62607015e-34  # Planck's constant in J*s\n    c = 2.99792458e8    # Speed of light in m/s\n\n    # Test suite parameter sets: (I, lambda, alpha, k_r, tau, z)\n    # I: Irradiance in W/m^2\n    # lambda: Wavelength in m\n    # alpha: Absorption coefficient (dimensionless)\n    # k_r: Surface reaction rate constant in s^-1\n    # tau: Bulk carrier lifetime in s\n    # z: Stoichiometric number (carriers per product molecule, dimensionless)\n    test_cases = [\n        # Case A (general, moderate lifetime)\n        (500, 365e-9, 0.2, 1e4, 1e-6, 2),\n        # Case B (edge, very short lifetime)\n        (500, 365e-9, 0.2, 1e4, 1e-9, 2),\n        # Case C (boundary, very long lifetime)\n        (500, 365e-9, 0.2, 1e4, 1, 2),\n        # Case D (edge, no absorption)\n        (500, 365e-9, 0, 1e4, 1e-6, 2),\n        # Case E (different spectrum and kinetics)\n        (100, 520e-9, 0.6, 1e3, 1e-3, 4),\n    ]\n\n    results = []\n    for case in test_cases:\n        I, lam, alpha, k_r, tau, z = case\n\n        # Step 1: Compute incident photon flux per area (phi_inc)\n        # This step is explicitly required by the problem description.\n        E_photon = h * c / lam\n        \n        # Handle the case where irradiance I is zero to avoid division by zero.\n        if I == 0:\n            phi_inc = 0.0\n        else:\n            phi_inc = I / E_photon\n\n        # If there is no light or no absorption, no carriers are generated. AQY is zero.\n        if phi_inc == 0.0 or alpha == 0.0:\n            results.append(0.0)\n            continue\n\n        # Carrier generation rate per unit area (G)\n        G = alpha * phi_inc\n        \n        # Step 2: Determine the steady-state mobile carrier surface density (n_ss)\n        # Handle case where tau is zero, though physically unlikely.\n        if tau == 0:\n            # Recombination rate is infinite, so no carriers can accumulate.\n            n_ss = 0.0\n        else:\n            # Total loss rate constant for carriers (recombination + reaction)\n            k_loss = (1 / tau) + k_r\n            n_ss = G / k_loss\n\n        # Step 3: Compute the product formation rate per area (R_prod)\n        R_prod = k_r * n_ss / z\n\n        # Step 4: Compute Apparent Quantum Yield (AQY)\n        aqy = R_prod / phi_inc\n        \n        results.append(aqy)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(f'{r:.10f}'.rstrip('0').rstrip('.') for r in results)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "这最后一个练习将载流子生成和反应动力学的微观概念整合到一个宏观的反应器性能模型中。你将模拟一个真实的光催化反应器，其中光强和催化剂属性在空间上并非均匀分布。这要求你耦合辐射传输、光吸收和非线性表面动力学模型，并通过数值积分计算总产物生成速率，从而在连接基本原理与实际工程成果的多尺度建模方面获得宝贵经验 。",
            "id": "3889849",
            "problem": "您的任务是实现一个计算模型，该模型将矩形催化剂上的辐射传输与光催化表面动力学耦合，然后将由局部生成驱动的动力学在催化剂表面积上进行积分，以预测反应器的总摩尔产率。目标是从基础且经过充分检验的定律和定义出发，通过数值积分计算总速率，确保科学真实性和内部一致性。您的程序必须为提供的测试套件生成结果，并按规定将它们聚合到单行输出中。\n\n考虑一个矩形催化剂，其宽度为 $W$（单位：米），高度为 $H$（单位：米），位于一个参与介质下方，该介质在催化剂上方的局部厚度沿流向坐标 $x \\in [0,W]$ 变化。该介质具有单色准直入射光子通量密度 $I_0$（单位：光子/平方米/秒），并根据比尔-朗伯定律衰减光束。光催化剂是表面上局部厚度为 $t(x)$ 的半导体薄膜。表面的局部光子通量密度 $I(x)$ 和由此产生的局部吸收分数 $A(x)$ 定义如下：\n- 介质中的比尔-朗伯衰减：$I(x) = I_0 \\exp\\!\\big(-\\kappa\\,h(x)\\big)$，其中 $h(x)$ 是表面上方介质的局部厚度（单位：米），$\\kappa$ 是介质的吸收系数（单位：1/米）。\n- 薄膜吸收分数：$A(x) = 1 - \\exp\\!\\big(-\\beta\\,t(x)\\big)$，其中 $\\beta$ 是薄膜的吸收系数（单位：1/米），$t(x)$ 是薄膜的局部厚度（单位：米）。在本练习中，假设薄膜的反射和散射可忽略不计。\n\n假设每个被吸收的光子生成光生载流子的量子产额 $\\phi$（无量纲）为常数。局部面光生载流子生成速率 $g(x)$（单位：电子-空穴对/平方米/秒）为\n$$\ng(x) = \\phi\\,I(x)\\,A(x) \\, .\n$$\n假设稳态载流子密度由生成和一阶损耗控制，局部稳态面载流子密度 $n_s(x)$（单位：载流子/平方米）为\n$$\nn_s(x) = g(x)\\,\\tau \\, ,\n$$\n其中 $\\tau$ 是有效载流子寿命（单位：秒）。单位面积的表面反应速率（单位：分子事件/平方米/秒）遵循关于 $n_s(x)$ 的饱和动力学：\n$$\nr_s(x) = k_{\\text{surf}}\\,\\frac{n_s(x)}{1 + \\frac{n_s(x)}{n_{\\text{sat}}}} \\, ,\n$$\n其中 $k_{\\text{surf}}$ 是表面速率常数（单位：1/秒），$n_{\\text{sat}}$ 是饱和面载流子密度（单位：载流子/平方米）。局部摩尔产率密度 $r_{\\mu}(x)$（单位：摩尔/平方米/秒）通过将 $r_s(x)$ 除以阿伏伽德罗常数 $N_A$（单位：1/摩尔）得到：\n$$\nr_{\\mu}(x) = \\frac{r_s(x)}{N_A} \\, .\n$$\n\n反应器总摩尔产率 $R$（单位：摩尔/秒）是 $r_{\\mu}(x)$ 在矩形表面上的面积分：\n$$\nR \\;=\\; \\int_{0}^{W} \\!\\!\\int_{0}^{H} r_{\\mu}(x)\\,\\mathrm{d}y\\,\\mathrm{d}x \\;=\\; H \\int_{0}^{W} r_{\\mu}(x)\\,\\mathrm{d}x \\, .\n$$\n您必须通过对 $x \\in [0,W]$ 进行均匀离散化并使用可靠的数值积分法来数值计算 $R$，同时遵循物理上有意义的约束条件，如 $t(x) \\ge 0$。\n\n空间分布的定义是线性的：\n- 介质厚度分布：$h(x) = h_0 + s_h\\,x$，其中 $h_0$（单位：米）和 $s_h$（无量纲斜率，单位：米/米）是分布的参数。\n- 薄膜厚度分布：$t(x) = t_0 + s_t\\,x$，其中 $t_0$（单位：米）和 $s_t$（单位：米/米）是分布的参数。\n\n常数和单位：\n- 阿伏伽德罗常数使用 $N_A = 6.02214076\\times 10^{23}$ (1/摩尔)。\n- 所有中间量和最终量必须以国际单位制（SI）基本单位进行一致计算。\n- 以摩尔/秒表示反应器总速率。您的程序必须输出表示 $R$（单位：摩尔/秒）的原始浮点数，不带单位字符串。\n\n测试套件和参数集：\n实现您的程序，为以下每个参数集计算 $R$。每个集合定义了 $W$、$H$、$h_0$、$s_h$、$t_0$、$s_t$、$I_0$、$\\kappa$、$\\beta$、$\\phi$、$\\tau$、$k_{\\text{surf}}$ 和 $n_{\\text{sat}}$。\n\n- 案例1（一般耦合，中等衰减和吸收）：\n  - $W = 0.1$ $\\mathrm{m}$, $H = 0.05$ $\\mathrm{m}$\n  - $h_0 = 0.005$ $\\mathrm{m}$, $s_h = 0.01$ \n  - $t_0 = 1.0\\times 10^{-7}$ $\\mathrm{m}$, $s_t = 2.0\\times 10^{-7}$\n  - $I_0 = 1.0\\times 10^{21}$ $\\mathrm{photons}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$\n  - $\\kappa = 100$ $\\mathrm{m}^{-1}$, $\\beta = 1.0\\times 10^{7}$ $\\mathrm{m}^{-1}$\n  - $\\phi = 0.8$, $\\tau = 1.0\\times 10^{-3}$ $\\mathrm{s}$\n  - $k_{\\text{surf}} = 0.1$ $\\mathrm{s}^{-1}$, $n_{\\text{sat}} = 1.0\\times 10^{16}$ $\\mathrm{m}^{-2}$\n\n- 案例2（零薄膜厚度边缘情况，薄膜中零吸收）：\n  - $W = 0.1$ $\\mathrm{m}$, $H = 0.05$ $\\mathrm{m}$\n  - $h_0 = 0.005$ $\\mathrm{m}$, $s_h = 0.01$\n  - $t_0 = 0$ $\\mathrm{m}$, $s_t = 0$\n  - $I_0 = 1.0\\times 10^{21}$ $\\mathrm{photons}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$\n  - $\\kappa = 100$ $\\mathrm{m}^{-1}$, $\\beta = 1.0\\times 10^{7}$ $\\mathrm{m}^{-1}$\n  - $\\phi = 0.8$, $\\tau = 1.0\\times 10^{-3}$ $\\mathrm{s}$\n  - $k_{\\text{surf}} = 0.1$ $\\mathrm{s}^{-1}$, $n_{\\text{sat}} = 1.0\\times 10^{16}$ $\\mathrm{m}^{-2}$\n\n- 案例3（强介质衰减边界条件）：\n  - $W = 0.1$ $\\mathrm{m}$, $H = 0.05$ $\\mathrm{m}$\n  - $h_0 = 0.02$ $\\mathrm{m}$, $s_h = 0$\n  - $t_0 = 2.0\\times 10^{-7}$ $\\mathrm{m}$, $s_t = 0$\n  - $I_0 = 1.0\\times 10^{21}$ $\\mathrm{photons}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$\n  - $\\kappa = 1000$ $\\mathrm{m}^{-1}$, $\\beta = 1.0\\times 10^{7}$ $\\mathrm{m}^{-1}$\n  - $\\phi = 0.8$, $\\tau = 1.0\\times 10^{-3}$ $\\mathrm{s}$\n  - $k_{\\text{surf}} = 0.1$ $\\mathrm{s}^{-1}$, $n_{\\text{sat}} = 1.0\\times 10^{16}$ $\\mathrm{m}^{-2}$\n\n- 案例4（高生成率下的饱和主导动力学）：\n  - $W = 0.1$ $\\mathrm{m}$, $H = 0.05$ $\\mathrm{m}$\n  - $h_0 = 0.001$ $\\mathrm{m}$, $s_h = 0$\n  - $t_0 = 3.0\\times 10^{-7}$ $\\mathrm{m}$, $s_t = 0$\n  - $I_0 = 1.0\\times 10^{23}$ $\\mathrm{photons}\\,\\mathrm{m}^{-2}\\,\\mathrm{s}^{-1}$\n  - $\\kappa = 10$ $\\mathrm{m}^{-1}$, $\\beta = 1.0\\times 10^{7}$ $\\mathrm{m}^{-1}$\n  - $\\phi = 1.0$, $\\tau = 1.0\\times 10^{-2}$ $\\mathrm{s}$\n  - $k_{\\text{surf}} = 1.0$ $\\mathrm{s}^{-1}$, $n_{\\text{sat}} = 1.0\\times 10^{15}$ $\\mathrm{m}^{-2}$\n\n实现要求：\n- 使用足够多的点数 $N$ 在 $[0,W]$ 上对 $x$ 进行均匀离散化，以确保数值稳定性和准确性（选择一个固定的 $N$ 并用于所有案例）。\n- 在计算 $A(x)$ 时，强制执行物理约束 $t(x) \\ge 0$。\n- 使用稳定的数值积分法来近似 $\\int_{0}^{W} r_{\\mu}(x)\\,\\mathrm{d}x$。\n- 您的程序必须生成单行输出，其中包含一个由方括号括起来的逗号分隔列表形式的结果（例如，$\\big[\\,\\mathrm{result}_1,\\mathrm{result}_2,\\mathrm{result}_3,\\mathrm{result}_4\\,\\big]$）。每个 $\\mathrm{result}_i$ 是对应案例的 $R$ 的浮点值（单位：摩尔/秒），按上面列出的顺序排列。\n\n角度使用说明：未使用角度参数；所有量均以线性坐标和国际单位制基本单位定义。\n\n您的最终程序必须完整且可按规定运行，不产生额外文本，并呈现所要求的单行输出。",
            "solution": "问题陈述已经过严格验证，并被确定为有效。它在科学上基于化学动力学和辐射传输的原理，问题设定良好，具有完整且一致的参数和方程组，并以客观、正式的语言表述。不存在矛盾、歧义或物理上不合理的假设。因此，有必要提供一个解法。\n\n目标是计算光催化反应器的总摩尔产率 $R$。这需要将一个局部速率表达式在一个宽度为 $W$、高度为 $H$ 的矩形催化剂表面上进行积分。该局部速率取决于一系列耦合的物理现象：光通过介质的衰减、薄膜对光的吸收、光生载流子的生成以及由饱和动力学控制的表面反应。\n\n首先，我们建立被积函数，即局部摩尔产率密度 $r_{\\mu}(x)$ 的完整表达式。变量和函数是相对于流向坐标 $x \\in [0,W]$ 定义的。\n\n衰减介质的局部厚度由线性分布给出：\n$$h(x) = h_0 + s_h\\,x$$\n催化剂表面的局部光子通量密度 $I(x)$ 由比尔-朗伯定律确定，考虑了通过介质的衰减：\n$$I(x) = I_0 \\exp\\!\\big(-\\kappa\\,h(x)\\big) = I_0 \\exp\\!\\big(-\\kappa(h_0 + s_h\\,x)\\big)$$\n其中 $I_0$ 是入射通量密度，$\\kappa$ 是介质的吸收系数。\n\n光催化薄膜的局部厚度也遵循线性分布：\n$$t(x) = t_0 + s_t\\,x$$\n问题规定了一个物理约束 $t(x) \\ge 0$。我们必须通过将用于吸收的有效厚度定义为 $\\max(0, t(x))$ 来强制执行此约束。薄膜吸收的入射光分数 $A(x)$ 为：\n$$A(x) = 1 - \\exp\\!\\big(-\\beta\\,\\max(0, t(x))\\big) = 1 - \\exp\\!\\big(-\\beta\\,\\max(0, t_0 + s_t\\,x)\\big)$$\n其中 $\\beta$ 是薄膜的吸收系数。\n\n局部面光生载流子生成速率 $g(x)$ 与单位面积单位时间内吸收的光子数成正比：\n$$g(x) = \\phi\\,I(x)\\,A(x)$$\n其中 $\\phi$ 是量子产额。\n\n假设载流子为一阶损耗机制，稳态面载流子密度 $n_s(x)$ 是生成速率和有效载流子寿命 $\\tau$ 的乘积：\n$$n_s(x) = g(x)\\,\\tau = \\phi\\,\\tau\\,I(x)\\,A(x)$$\n\n单位面积的表面反应速率 $r_s(x)$ 遵循饱和动力学，类似于 Michaelis–Menten 或 Langmuir–Hinshelwood 模型：\n$$r_s(x) = k_{\\text{surf}}\\,\\frac{n_s(x)}{1 + \\frac{n_s(x)}{n_{\\text{sat}}}}$$\n其中 $k_{\\text{surf}}$ 是本征表面速率常数， $n_{\\text{sat}}$ 是饱和面载流子密度。\n\n最后，局部摩尔产率密度 $r_{\\mu}(x)$ 通过使用阿伏伽德罗常数 $N_A$ 从分子事件转换为摩尔得到：\n$$r_{\\mu}(x) = \\frac{r_s(x)}{N_A}$$\n\n将所有这些表达式组合起来，得到被积函数 $r_{\\mu}(x)$ 的完整形式：\n$$\nr_{\\mu}(x) = \\frac{k_{\\text{surf}}}{N_A} \\frac{\\phi\\,\\tau\\,I_0 \\exp\\!\\big(-\\kappa(h_0 + s_h\\,x)\\big) \\Big(1 - \\exp\\!\\big(-\\beta\\,\\max(0, t_0 + s_t\\,x)\\big)\\Big)}{1 + \\frac{\\phi\\,\\tau\\,I_0 \\exp\\!\\big(-\\kappa(h_0 + s_h\\,x)\\big) \\Big(1 - \\exp\\!\\big(-\\beta\\,\\max(0, t_0 + s_t\\,x)\\big)\\Big)}{n_{\\text{sat}}}}\n$$\n\n反应器总摩尔产率 $R$ 是 $r_{\\mu}(x)$ 在催化剂面积上的积分。由于所有变化都沿 $x$ 方向，积分简化为：\n$$R = \\int_0^W \\int_0^H r_{\\mu}(x)\\,\\mathrm{d}y\\,\\mathrm{d}x = H \\int_0^W r_{\\mu}(x)\\,\\mathrm{d}x$$\n\n该问题要求对此积分进行数值求解。由于被积函数 $r_{\\mu}(x)$ 是平滑、表现良好的初等函数的复合，标准的数值积分方法是合适的。指令要求使用固定数量的点 $N$ 对 $x$ 进行均匀离散化，这表明应采用复合求积法则。我们将使用辛普森法则，这是一种用于对平滑函数进行积分的高精度且稳定的方法，具体实现为 `scipy.integrate.simpson`。我们将把定义域 $x \\in [0, W]$ 离散化为 $N-1$ 个区间，使用 $N=2001$ 个点，以确保所有测试案例的高精度。对于标准的复合辛普森法则实现，点数必须为奇数。\n\n计算步骤如下：\n1.  对于每个测试案例，定义所有13个输入参数（$W$, $H$, $h_0$, $s_h$, $t_0$, $s_t$, $I_0$, $\\kappa$, $\\beta$, $\\phi$, $\\tau$, $k_{\\text{surf}}$, $n_{\\text{sat}}$）和常数 $N_A = 6.02214076 \\times 10^{23} \\text{ mol}^{-1}$。\n2.  为 $x$ 从 $0$ 到 $W$ 生成一个包含 $N=2001$ 个点的均匀网格。\n3.  在网格上的每个点 $x_i$ 处，通过系统地计算 $h(x_i)$, $t(x_i)$, $I(x_i)$, $A(x_i)$, $n_s(x_i)$，并最终计算 $r_s(x_i)$ 和 $r_{\\mu}(x_i)$ 来评估被积函数 $r_{\\mu}(x_i)$。明确强制执行物理约束 $t(x_i) \\ge 0$。\n4.  使用 $x_i$ 点的网格和相应的 $r_{\\mu}(x_i)$ 值，通过辛普森法则计算定积分 $\\int_0^W r_{\\mu}(x)\\,\\mathrm{d}x$。\n5.  将积分结果乘以催化剂高度 $H$，得到最终的总速率 $R$，单位为摩尔/秒。\n6.  对所有四个测试案例重复此过程，并将结果汇总为指定的输出格式。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy import integrate\n\ndef solve():\n    \"\"\"\n    Main function to solve the photocatalytic reactor problem for all test cases.\n    \"\"\"\n    # Avogadro's number (mol^-1)\n    N_A = 6.02214076e23\n\n    # Discretization points for numerical integration.\n    # Must be an odd number for Simpson's rule. A large number is chosen for accuracy.\n    N_POINTS = 2001\n\n    # Define the test cases from the problem statement.\n    # Each tuple contains:\n    # (W, H, h0, sh, t0, st, I0, kappa, beta, phi, tau, k_surf, n_sat)\n    test_cases = [\n        # Case 1: general coupling, moderate attenuation and absorption\n        (0.1, 0.05, 0.005, 0.01, 1.0e-7, 2.0e-7, 1.0e21, 100, 1.0e7, 0.8, 1.0e-3, 0.1, 1.0e16),\n        # Case 2: zero film thickness edge case, zero absorption in film\n        (0.1, 0.05, 0.005, 0.01, 0.0, 0.0, 1.0e21, 100, 1.0e7, 0.8, 1.0e-3, 0.1, 1.0e16),\n        # Case 3: strong medium attenuation boundary condition\n        (0.1, 0.05, 0.02, 0.0, 2.0e-7, 0.0, 1.0e21, 1000, 1.0e7, 0.8, 1.0e-3, 0.1, 1.0e16),\n        # Case 4: saturation-dominated kinetics with high generation\n        (0.1, 0.05, 0.001, 0.0, 3.0e-7, 0.0, 1.0e23, 10, 1.0e7, 1.0, 1.0e-2, 1.0, 1.0e15),\n    ]\n\n    def calculate_total_rate(params):\n        \"\"\"\n        Calculates the total molar production rate R for a single set of parameters.\n        \"\"\"\n        W, H, h0, sh, t0, st, I0, kappa, beta, phi, tau, k_surf, n_sat = params\n        \n        # Create a uniform grid for the x-coordinate from 0 to W\n        x_coords = np.linspace(0, W, N_POINTS)\n        \n        # Calculate spatially-dependent variables, vectorized over x_coords\n        \n        # Medium thickness profile h(x)\n        h_x = h0 + sh * x_coords\n        \n        # Film thickness profile t(x), with physical constraint t(x) = 0\n        t_x = np.maximum(0, t0 + st * x_coords)\n        \n        # Photon flux density at surface I(x) - Beer-Lambert law in medium\n        I_x = I0 * np.exp(-kappa * h_x)\n        \n        # Absorption fraction in film A(x)\n        A_x = 1 - np.exp(-beta * t_x)\n        \n        # Areal photocarrier generation rate g(x)\n        g_x = phi * I_x * A_x\n        \n        # Steady-state areal carrier density n_s(x)\n        ns_x = g_x * tau\n        \n        # Surface reaction rate r_s(x) - saturating kinetics\n        rs_x = k_surf * ns_x / (1 + ns_x / n_sat)\n        \n        # Local molar production rate density r_mu(x)\n        r_mu_x = rs_x / N_A\n        \n        # Integrate r_mu(x) over the width W using Simpson's rule\n        integral_val = integrate.simpson(r_mu_x, x_coords)\n        \n        # Total reactor molar production rate R\n        R = H * integral_val\n        \n        return R\n\n    results = []\n    for case_params in test_cases:\n        rate = calculate_total_rate(case_params)\n        results.append(rate)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        }
    ]
}
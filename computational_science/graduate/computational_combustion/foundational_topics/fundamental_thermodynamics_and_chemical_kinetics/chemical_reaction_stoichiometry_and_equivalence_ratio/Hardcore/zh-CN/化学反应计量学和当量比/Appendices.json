{
    "hands_on_practices": [
        {
            "introduction": "这项基础练习旨在巩固核心技能：从第一性原理（元素守恒）出发，平衡燃烧反应。我们将以经典的碳氢燃料苯为例，不仅练习如何确定化学计量系数，还将引导你推导当量比 $\\phi$ 的表达式，从而将其与混合物中反应物的摩尔比直接关联起来。",
            "id": "4012114",
            "problem": "考虑苯 $\\mathrm{C_6H_6}$ 在均相预混系统中，在化学计量条件下完全燃烧生成二氧化碳 $\\mathrm{CO_2}$ 和水 $\\mathrm{H_2O}$。使用元素（碳、氢和氧）层面的质量守恒定律和理想化的完全氧化化学反应，为反应物和产物建立未知的化学计量系数，并通过元素平衡来确定它们。将氧气视为分子 $\\mathrm{O_2}$，并假设没有其他产物形成。然后，从当量比 $\\phi$ 的定义出发——即实际燃料-氧化剂摩尔比与相应的化学计量燃料-氧化剂摩尔比之比——推导出一个用实际氧化剂-燃料摩尔比 $r$ 表示 $\\phi$ 的解析表达式，其中 $r$ 定义为混合物的 $r = n_{\\mathrm{O_2}}/n_{\\text{fuel}}$。\n\n您的任务是：\n- 推导苯的化学计量 $\\mathrm{O_2}$-燃料摩尔比，表示为一个纯数（无量纲比值）。\n- 配平生成 $\\mathrm{CO_2}$ 和 $\\mathrm{H_2O}$ 的完全燃烧反应，并按乘以 $\\mathrm{C_6H_6}$、$\\mathrm{O_2}$、$\\mathrm{CO_2}$ 和 $\\mathrm{H_2O}$ 的顺序，提供归一化的整数化学计量系数，要求这组系数的最大公约数为 $1$。\n- 提供用 $r$ 表示 $\\phi$ 的闭式表达式。\n\n将最终答案表示为一个单行矩阵，其中依次包含：化学计量 $\\mathrm{O_2}$-燃料摩尔比、四个归一化整数系数以及 $\\phi(r)$ 的解析表达式。无需四舍五入。不要包含单位；将摩尔比视为无量纲。",
            "solution": "形式为 $\\mathrm{C_xH_y}$ 的通用烃类燃料与分子氧 $\\mathrm{O_2}$ 完全燃烧生成二氧化碳 $\\mathrm{CO_2}$ 和水 $\\mathrm{H_2O}$ 的反应可以用以下化学方程式表示，其中使用燃料归一化的化学计量系数 $1$：\n$$\n\\mathrm{C_xH_y} + a_{\\text{st}} \\mathrm{O_2} \\rightarrow b \\mathrm{CO_2} + c \\mathrm{H_2O}\n$$\n此处，$a_{\\text{st}}$、$b$ 和 $c$ 分别是氧化剂和产物的化学计量系数。对于苯的具体情况，燃料为 $\\mathrm{C_6H_6}$，因此 $x=6$ 且 $y=6$。反应式为：\n$$\n\\mathrm{C_6H_6} + a_{\\text{st}} \\mathrm{O_2} \\rightarrow b \\mathrm{CO_2} + c \\mathrm{H_2O}\n$$\n为了确定这些系数，我们对每种元素（碳、氢和氧）应用质量守恒定律。\n\n1.  **碳 (C) 平衡**：方程式的反应物侧和产物侧的碳原子数必须相同。\n    - 反应物：$1$ 个 $\\mathrm{C_6H_6}$ 分子包含 $6$ 个 C 原子。总 C 原子数 = $1 \\times 6 = 6$。\n    - 产物：$b$ 个 $\\mathrm{CO_2}$ 分子包含 $b \\times 1$ 个 C 原子。总 C 原子数 = $b$。\n    - 令两者相等：$b = 6$。\n\n2.  **氢 (H) 平衡**：氢原子数必须守恒。\n    - 反应物：$1$ 个 $\\mathrm{C_6H_6}$ 分子包含 $6$ 个 H 原子。总 H 原子数 = $1 \\times 6 = 6$。\n    - 产物：$c$ 个 $\\mathrm{H_2O}$ 分子包含 $c \\times 2$ 个 H 原子。总 H 原子数 = $2c$。\n    - 令两者相等：$2c = 6 \\implies c = 3$。\n\n3.  **氧 (O) 平衡**：氧原子数必须守恒。\n    - 反应物：$a_{\\text{st}}$ 个 $\\mathrm{O_2}$ 分子包含 $a_{\\text{st}} \\times 2$ 个 O 原子。总 O 原子数 = $2a_{\\text{st}}$。\n    - 产物：$b$ 个 $\\mathrm{CO_2}$ 分子包含 $b \\times 2$ 个 O 原子， $c$ 个 $\\mathrm{H_2O}$ 分子包含 $c \\times 1$ 个 O 原子。总 O 原子数 = $2b + c$。\n    - 代入 $b=6$ 和 $c=3$ 的值：产物侧的总 O 原子数 = $2(6) + 3 = 12 + 3 = 15$。\n    - 令反应物和产物的氧原子数相等：$2a_{\\text{st}} = 15 \\implies a_{\\text{st}} = \\frac{15}{2}$。\n\n归一化为一摩尔燃料的配平化学计量反应式为：\n$$\n\\mathrm{C_6H_6} + \\frac{15}{2} \\mathrm{O_2} \\rightarrow 6 \\mathrm{CO_2} + 3 \\mathrm{H_2O}\n$$\n\n**任务 1：化学计量 $\\mathrm{O_2}$-燃料摩尔比**\n根据配平的方程式，在化学计量条件下，$1$ 摩尔燃料 ($\\mathrm{C_6H_6}$) 与 $\\frac{15}{2}$ 摩尔氧化剂 ($\\mathrm{O_2}$) 反应。因此，化学计量氧化剂-燃料摩尔比 $(n_{\\mathrm{O_2}}/n_{\\text{fuel}})_{\\text{st}}$ 为：\n$$\n\\left(\\frac{n_{\\mathrm{O_2}}}{n_{\\text{fuel}}}\\right)_{\\text{st}} = \\frac{a_{\\text{st}}}{1} = \\frac{15}{2}\n$$\n\n**任务 2：归一化整数化学计量系数**\n来自燃料归一化反应的化学计量系数为 $(1, \\frac{15}{2}, 6, 3)$。为了将它们转换为一组整数，我们可以将所有系数乘以其分母的最小公倍数，在此例中为 $2$。\n$$\n2 \\left( \\mathrm{C_6H_6} + \\frac{15}{2} \\mathrm{O_2} \\rightarrow 6 \\mathrm{CO_2} + 3 \\mathrm{H_2O} \\right)\n$$\n这就得到了具有整数系数的反应式：\n$$\n2 \\mathrm{C_6H_6} + 15 \\mathrm{O_2} \\rightarrow 12 \\mathrm{CO_2} + 6 \\mathrm{H_2O}\n$$\n这组系数为 $\\{2, 15, 12, 6\\}$。我们通过求其最大公约数 (GCD) 来检查该集合是否已归一化：\n$$\n\\text{GCD}(2, 15, 12, 6) = 1\n$$\n由于最大公约数为 $1$，这就是归一化的整数化学计量系数集。按照 $\\mathrm{C_6H_6}$、$\\mathrm{O_2}$、$\\mathrm{CO_2}$ 和 $\\mathrm{H_2O}$ 的要求顺序，这些系数是 $2$、$15$、$12$ 和 $6$。\n\n**任务 3：用 $r$ 表示当量比 $\\phi$ 的表达式**\n当量比 $\\phi$ 定义为实际燃料-氧化剂摩尔比与化学计量燃料-氧化剂摩尔比之比：\n$$\n\\phi \\equiv \\frac{(n_{\\text{fuel}}/n_{\\text{oxidizer}})_{\\text{actual}}}{(n_{\\text{fuel}}/n_{\\text{oxidizer}})_{\\text{stoich}}}\n$$\n氧化剂是 $\\mathrm{O_2}$，所以 $n_{\\text{oxidizer}} = n_{\\mathrm{O_2}}$。化学计量燃料-氧化剂摩尔比是我们之前计算的化学计量氧化剂-燃料摩尔比的倒数：\n$$\n\\left(\\frac{n_{\\text{fuel}}}{n_{\\mathrm{O_2}}}\\right)_{\\text{st}} = \\frac{1}{(n_{\\mathrm{O_2}}/n_{\\text{fuel}})_{\\text{st}}} = \\frac{1}{15/2} = \\frac{2}{15}\n$$\n问题将实际氧化剂-燃料摩尔比定义为 $r$：\n$$\nr \\equiv \\frac{n_{\\mathrm{O_2}}}{n_{\\text{fuel}}} = \\left(\\frac{n_{\\mathrm{O_2}}}{n_{\\text{fuel}}}\\right)_{\\text{actual}}\n$$\n因此，实际燃料-氧化剂比是 $r$ 的倒数：\n$$\n\\left(\\frac{n_{\\text{fuel}}}{n_{\\mathrm{O_2}}}\\right)_{\\text{actual}} = \\frac{1}{r}\n$$\n将实际比和化学计量比代入 $\\phi$ 的定义中：\n$$\n\\phi = \\frac{1/r}{2/15} = \\frac{1}{r} \\cdot \\frac{15}{2} = \\frac{15}{2r}\n$$\n这就是用实际氧化剂-燃料摩尔比 $r$ 表示当量比 $\\phi$ 的闭式表达式。\n\n最终答案要求一个单行矩阵，按顺序包含三个结果：\n1.  化学计量 $\\mathrm{O_2}$-燃料摩尔比：$\\frac{15}{2}$。\n2.  四个归一化整数系数：$2$、$15$、$12$、$6$。\n3.  $\\phi(r)$ 的解析表达式：$\\frac{15}{2r}$。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{15}{2}  2  15  12  6  \\frac{15}{2r}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "真实的燃烧系统远比单一燃料在纯空气中燃烧复杂。该练习提升了难度，引入了由多种气体组成的多组分燃料以及模拟废气再循环（EGR）的氧化剂。你将学习如何通过叠加每种燃料组分的化学计量需求来计算总的氧气需求量，这是分析实际燃烧系统时的一项关键技术。",
            "id": "4012067",
            "problem": "一个完美搅拌的稳态燃烧室接收一股由甲烷、氢气和一氧化碳组成的气态燃料流，以及一股废气再循环空气（Exhaust Gas Recirculation, EGR）氧化剂流。目标是确定当量比，其定义为实际燃料-氧化剂比与化学计量燃料-氧化剂比的比值，方法是首先通过元素守恒确定化学计量的分子氧需求量，然后将各燃料组分的需求量进行汇总。您必须明确展示化学计量氧气需求量是如何由各组分的需求量构建并汇总的。\n\n燃料流的质量流量为：\n- 甲烷 $\\left(\\mathrm{CH}_{4}\\right)$: $0.30\\,\\mathrm{kg/s}$，\n- 氢气 $\\left(\\mathrm{H}_{2}\\right)$: $0.04\\,\\mathrm{kg/s}$，\n- 一氧化碳 $\\left(\\mathrm{CO}\\right)$: $0.20\\,\\mathrm{kg/s}$。\n\n使用以下分子量（千克/摩尔）：$\\mathrm{CH}_{4}$: $0.01604$，$\\mathrm{H}_{2}$: $0.002016$，$\\mathrm{CO}$: $0.02801$。\n\n氧化剂流的总摩尔流量为 $\\dot{n}_{\\text{ox}} = 240\\,\\mathrm{mol/s}$，摩尔分数为 $y_{\\mathrm{O}_{2}} = 0.18$，$y_{\\mathrm{N}_{2}} = 0.76$，$y_{\\mathrm{CO}_{2}} = 0.04$，$y_{\\mathrm{H}_{2}\\mathrm{O}} = 0.02$。假设只有分子氧 $\\left(\\mathrm{O}_{2}\\right)$ 作为氧化剂参与反应；就氧气供应而言，其他物质是惰性稀释剂。\n\n从元素守恒和化学计量燃烧的定义出发，推导每种燃料组分的化学计量分子氧需求量，解释这些需求量如何对多组分燃料流进行汇总，确定氧化剂流中可用的总氧气量，并计算混合物的当量比 $\\phi$。将最终的 $\\phi$ 表示为一个纯数，并将您的答案四舍五入到四位有效数字。",
            "solution": "当量比 $\\phi$ 定义为实际燃料-氧化剂比与化学计量燃料-氧化剂比的比值。对于给定的燃料流，最直接的计算方法是所需化学计量氧气量与实际供应氧气量的比值。\n$$\n\\phi = \\frac{(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}}}{(\\dot{n}_{\\mathrm{O_2}})_{\\text{actual}}}\n$$\n\n解答过程需要三个步骤：\n1. 确定给定燃料混合物的总化学计量分子氧需求量 $(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}}$。\n2. 确定来自氧化剂流的实际分子氧供应速率 $(\\dot{n}_{\\mathrm{O_2}})_{\\text{actual}}$。\n3. 计算当量比 $\\phi$。\n\n首先，我们根据给定的质量流量 $\\dot{m}_i$ 和分子量 $M_i$ 计算每种燃料组分 $i$ 的摩尔流量 $\\dot{n}_i$。\n$$\n\\dot{n}_i = \\frac{\\dot{m}_i}{M_i}\n$$\n燃料组分的摩尔流量为：\n$$\n\\dot{n}_{\\mathrm{CH}_{4}} = \\frac{\\dot{m}_{\\mathrm{CH}_{4}}}{M_{\\mathrm{CH}_{4}}}\n$$\n$$\n\\dot{n}_{\\mathrm{H}_{2}} = \\frac{\\dot{m}_{\\mathrm{H}_{2}}}{M_{\\mathrm{H}_{2}}}\n$$\n$$\n\\dot{n}_{\\mathrm{CO}} = \\frac{\\dot{m}_{\\mathrm{CO}}}{M_{\\mathrm{CO}}}\n$$\n\n接下来，我们基于元素守恒确定每种燃料组分的化学计量氧气需求量。每种燃料的化学计量（完全）燃烧反应如下：\n1. 对于甲烷 ($\\mathrm{CH}_{4}$): 碳必须生成 $\\mathrm{CO_2}$，氢必须生成 $\\mathrm{H_2O}$。\n$$\n\\mathrm{CH}_{4} + \\nu_{\\mathrm{O_2}, \\mathrm{CH_4}} \\mathrm{O}_{2} \\rightarrow \\mathrm{CO}_{2} + 2\\mathrm{H}_{2}\\mathrm{O}\n$$\n配平氧原子：$2\\nu_{\\mathrm{O_2}, \\mathrm{CH_4}} = 2 + 2(1) = 4$。因此，氧气的化学计量系数为 $\\nu_{\\mathrm{O_2}, \\mathrm{CH_4}} = 2$。\n2. 对于氢气 ($\\mathrm{H}_{2}$): 氢必须生成 $\\mathrm{H_2O}$。\n$$\n\\mathrm{H}_{2} + \\nu_{\\mathrm{O_2}, \\mathrm{H_2}} \\mathrm{O}_{2} \\rightarrow \\mathrm{H}_{2}\\mathrm{O}\n$$\n配平氧原子：$2\\nu_{\\mathrm{O_2}, \\mathrm{H_2}} = 1$。因此，化学计量系数为 $\\nu_{\\mathrm{O_2}, \\mathrm{H_2}} = \\frac{1}{2} = 0.5$。\n3. 对于一氧化碳 ($\\mathrm{CO}$): 碳必须生成 $\\mathrm{CO_2}$。\n$$\n\\mathrm{CO} + \\nu_{\\mathrm{O_2}, \\mathrm{CO}} \\mathrm{O}_{2} \\rightarrow \\mathrm{CO}_{2}\n$$\n配平氧原子：$1 + 2\\nu_{\\mathrm{O_2}, \\mathrm{CO}} = 2$。因此，化学计量系数为 $\\nu_{\\mathrm{O_2}, \\mathrm{CO}} = \\frac{1}{2} = 0.5$。\n\n总的化学计量氧气需求量 $(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}}$ 是每个独立燃料组分需求量的总和。这种汇总是有效的，因为氧气需求量是一个广延性质。\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}} = (\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich, CH}_4} + (\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich, H}_2} + (\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich, CO}}\n$$\n每个组分的需求量是其摩尔流量与其各自的化学计量氧气系数的乘积：\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}} = \\nu_{\\mathrm{O_2}, \\mathrm{CH_4}}\\dot{n}_{\\mathrm{CH}_{4}} + \\nu_{\\mathrm{O_2}, \\mathrm{H_2}}\\dot{n}_{\\mathrm{H}_{2}} + \\nu_{\\mathrm{O_2}, \\mathrm{CO}}\\dot{n}_{\\mathrm{CO}}\n$$\n代入摩尔流量的表达式：\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}} = \\nu_{\\mathrm{O_2}, \\mathrm{CH_4}}\\frac{\\dot{m}_{\\mathrm{CH}_{4}}}{M_{\\mathrm{CH}_{4}}} + \\nu_{\\mathrm{O_2}, \\mathrm{H_2}}\\frac{\\dot{m}_{\\mathrm{H}_{2}}}{M_{\\mathrm{H}_{2}}} + \\nu_{\\mathrm{O_2}, \\mathrm{CO}}\\frac{\\dot{m}_{\\mathrm{CO}}}{M_{\\mathrm{CO}}}\n$$\n\n现在，我们代入给定的数值。\n燃料组分的摩尔流量为：\n$$\n\\dot{n}_{\\mathrm{CH}_{4}} = \\frac{0.30\\,\\mathrm{kg/s}}{0.01604\\,\\mathrm{kg/mol}} \\approx 18.70324\\,\\mathrm{mol/s}\n$$\n$$\n\\dot{n}_{\\mathrm{H}_{2}} = \\frac{0.04\\,\\mathrm{kg/s}}{0.002016\\,\\mathrm{kg/mol}} \\approx 19.84127\\,\\mathrm{mol/s}\n$$\n$$\n\\dot{n}_{\\mathrm{CO}} = \\frac{0.20\\,\\mathrm{kg/s}}{0.02801\\,\\mathrm{kg/mol}} \\approx 7.140307\\,\\mathrm{mol/s}\n$$\n所需的总化学计量氧气摩尔流量为：\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}} = (2)(18.70324) + (0.5)(19.84127) + (0.5)(7.140307)\n$$\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}} \\approx 37.40648 + 9.920635 + 3.570154 \\approx 50.89727\\,\\mathrm{mol/s}\n$$\n\n实际供应的氧气摩尔流量 $(\\dot{n}_{\\mathrm{O_2}})_{\\text{actual}}$ 由氧化剂流的总摩尔流量 $\\dot{n}_{\\text{ox}}$ 和其中 $\\mathrm{O_2}$ 的摩尔分数 $y_{\\mathrm{O}_{2}}$ 确定。\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{actual}} = \\dot{n}_{\\text{ox}} \\times y_{\\mathrm{O}_{2}}\n$$\n代入给定值：\n$$\n(\\dot{n}_{\\mathrm{O_2}})_{\\text{actual}} = (240\\,\\mathrm{mol/s})(0.18) = 43.2\\,\\mathrm{mol/s}\n$$\n\n最后，当量比 $\\phi$ 计算为化学计量需求量与实际供应量的比值。\n$$\n\\phi = \\frac{(\\dot{n}_{\\mathrm{O_2}})_{\\text{stoich}}}{(\\dot{n}_{\\mathrm{O_2}})_{\\text{actual}}} = \\frac{50.89727\\,\\mathrm{mol/s}}{43.2\\,\\mathrm{mol/s}} \\approx 1.1781775\n$$\n将结果四舍五入到四位有效数字，得到 $\\phi \\approx 1.178$。这表明混合物是富燃料的，因为供应的氧气少于化学计量需求量。",
            "answer": "$$\n\\boxed{1.178}\n$$"
        },
        {
            "introduction": "计算燃烧学的威力在于创建通用的模型和工具。最后的这项实践将引导你从解决特定问题转向构建一个多功能的计算工具。你的任务是设计一个算法，使其能够为任意给定实验式的燃料和任意成分的氧化剂自动完成化学计量计算，从而将前面练习中学到的原理封装成一个可重用的程序。",
            "id": "4012089",
            "problem": "您的任务是设计并实现一个通用算法，用于计算由任意实验式描述的燃料完全燃烧所需的化学计量氧化剂。该算法假设在理想的完全燃烧条件下，燃料燃烧生成二氧化碳、水和二氧化硫，同时氮气作为惰性气体。具体来说，对于一种实验式包含碳、氢、氧、氮和硫元素，且一摩尔燃料中相应原子数分别为 $a$、$b$、$c$、$d$ 和 $e$ 的燃料，您的程序必须：\n\n- 解析给定的实验式字符串，以获取整数原子数 $a$、$b$、$c$、$d$ 和 $e$，其中任何未出现的元素的原子数均为零。\n- 确定化学计量需氧量 $\\,\\nu_{\\mathrm{O_2}}$，该值以每摩尔燃料完全燃烧生成 $\\mathrm{CO_2}$、$\\mathrm{H_2O}$ 和 $\\mathrm{SO_2}$ 所需的 $\\mathrm{O_2}$ 摩尔数来衡量。在此过程中，燃料结合氮形成 $\\mathrm{N_2}$，而氧化剂中的惰性物质保持惰性。\n- 当氧化剂是由指定摩尔分数组分的混合物时，计算基于摩尔和基于质量的化学计量空燃比（AFR）。氧化剂的组分由各组分 $\\mathrm{O_2}$、$\\mathrm{N_2}$、$\\mathrm{Ar}$ 和 $\\mathrm{CO_2}$ 的摩尔分数 $x_i$ 给出，其总和为 $1$；令 $x_{\\mathrm{O_2}}$ 表示氧化剂中 $\\mathrm{O_2}$ 的摩尔分数。基于摩尔的化学计量空燃比 $\\,\\mathrm{AFR}_{\\mathrm{stoich,molar}}$ 定义为每摩尔燃料所需的氧化剂摩尔数。基于质量的化学计量空燃比 $\\,\\mathrm{AFR}_{\\mathrm{stoich,mass}}$ 定义为每千克燃料所需的氧化剂千克数。您的算法必须使用适当的分子量计算这两个值。\n- 在计算中使用以下标准原子量和分子量：$\\mathrm{C}=12.011$，$\\mathrm{H}=1.008$，$\\mathrm{O}=15.999$，$\\mathrm{N}=14.007$，$\\mathrm{S}=32.065$（单位均为 $\\mathrm{g/mol}$），以及分子量 $\\mathrm{O_2}=31.998$，$\\mathrm{N_2}=28.014$，$\\mathrm{Ar}=39.948$，$\\mathrm{CO_2}=44.009$（单位均为 $\\mathrm{g/mol}$）。在转换为以 $\\mathrm{kg/kg}$ 为单位的质量比时，利用质量比是无量纲的，并且在一致的单位缩放标度下保持不变的特性。\n- 验证氧化剂的摩尔分数，确保其总和在数值公差范围内为 $1$；如果不为 $1$，则通过除以其总和进行归一化。\n\n您的程序必须实现一个能反映其基本原理的算法，并且必须处理边界情况，包括 $x_{\\mathrm{O_2}}$ 极低的氧化剂混合物和含氧、含硫的燃料。为保证数值稳定性，如果 $x_{\\mathrm{O_2}}=0$，则 $\\,\\mathrm{AFR}_{\\mathrm{stoich,molar}}$ 和 $\\,\\mathrm{AFR}_{\\mathrm{stoich,mass}}$ 均返回 $+\\infty$。\n\n要求的输出和单位：\n- $\\,\\nu_{\\mathrm{O_2}}$，单位为每摩尔燃料的 $\\mathrm{O_2}$ 摩尔数（单位：$\\mathrm{mol/mol}$）。\n- $\\,\\mathrm{AFR}_{\\mathrm{stoich,molar}}$，单位为每摩尔燃料的氧化剂摩尔数（单位：$\\mathrm{mol/mol}$）。\n- $\\,\\mathrm{AFR}_{\\mathrm{stoich,mass}}$，单位为每千克燃料的氧化剂千克数（单位：$\\mathrm{kg/kg}$）。\n\n测试套件：\n使用以下五个测试用例来验证您的实现。每个测试用例均由燃料实验式字符串和包含摩尔分数的氧化剂组分字典组成。\n1. 燃料 $\\,\\mathrm{CH_4}$ 与干燥空气：$\\{x_{\\mathrm{O_2}}=0.2095,\\,x_{\\mathrm{N_2}}=0.7808,\\,x_{\\mathrm{Ar}}=0.0093,\\,x_{\\mathrm{CO_2}}=0.0004\\}$。\n2. 燃料 $\\,\\mathrm{C_2H_6O}$（乙醇）与纯氧：$\\{x_{\\mathrm{O_2}}=1.0\\}$。\n3. 燃料 $\\,\\mathrm{C_3H_6O}$ 与富氧空气：$\\{x_{\\mathrm{O_2}}=0.30,\\,x_{\\mathrm{N_2}}=0.70\\}$。\n4. 燃料 $\\,\\mathrm{C_4H_4S}$（噻吩）与含二氧化碳的空气：$\\{x_{\\mathrm{O_2}}=0.21,\\,x_{\\mathrm{N_2}}=0.78,\\,x_{\\mathrm{CO_2}}=0.01\\}$。\n5. 燃料 $\\,\\mathrm{H_2}$ 与低氧氧化剂：$\\{x_{\\mathrm{O_2}}=0.01,\\,x_{\\mathrm{N_2}}=0.99\\}$。\n\n最终输出格式：\n您的程序应生成单行输出，其中包含五个测试用例的结果，形式为一个由方括号括起来的三元组组成的逗号分隔列表，每个三元组按 $[\\nu_{\\mathrm{O_2}},\\mathrm{AFR}_{\\mathrm{stoich,molar}},\\mathrm{AFR}_{\\mathrm{stoich,mass}}]$ 顺序排列。例如，输出必须如下所示：\n$[\\,[\\cdot,\\cdot,\\cdot],[\\cdot,\\cdot,\\cdot],[\\cdot,\\cdot,\\cdot],[\\cdot,\\cdot,\\cdot],[\\cdot,\\cdot,\\cdot]\\,]$\n其中每个点由一个数字替换。您的程序必须只打印这一行。",
            "solution": "此问题的解决方案基于化学反应中的原子守恒原理。对于实验式为 $C_a H_b O_c N_d S_e$ 的通用燃料的完全燃烧，反应物是燃料和氧化剂，产物是二氧化碳 ($CO_2$)、水 ($H_2O$)、二氧化硫 ($SO_2$) 和惰性组分。来自燃料的氮 ($N_d$) 被假定生成分子氮 ($N_2$)。\n\n设化学计量反应表示如下，其中一摩尔燃料与 $\\mathrm{AFR}_{\\mathrm{stoich,molar}}$ 摩尔的氧化剂反应：\n$$ C_a H_b O_c N_d S_e + \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\left( x_{O_2} O_2 + x_{N_2} N_2 + x_{Ar} Ar + x_{CO_2} CO_2 \\right) \\rightarrow \\nu_{CO_2} CO_2 + \\nu_{H_2O} H_2O + \\nu_{SO_2} SO_2 + \\nu_{N_2,prod} N_2 + \\nu_{Ar} Ar $$\n在这里，$x_i$ 代表氧化剂中组分 $i$ 的摩尔分数，$\\nu_j$ 是每摩尔燃料生成的产物组分 $j$ 的化学计量系数（摩尔数）。问题的核心是求解所需的氧化剂量 $\\mathrm{AFR}_{\\mathrm{stoich,molar}}$。这是通过平衡方程式反应物侧和产物侧每种元素的原子来实现的。\n\n每种元素的平衡如下：\n1.  **碳 (C)：** 来自燃料的碳原子数 ($a$) 加上来自氧化剂的碳原子数 ($\\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2}$) 必须等于产物 $CO_2$ 中的碳原子数 ($\\nu_{CO_2}$)。\n    $$ a + \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2} = \\nu_{CO_2} $$\n\n2.  **氢 (H)：** 来自燃料的氢原子数 ($b$) 必须等于产物 $H_2O$ 中的氢原子数 ($2 \\cdot \\nu_{H_2O}$)。\n    $$ b = 2 \\cdot \\nu_{H_2O} \\implies \\nu_{H_2O} = \\frac{b}{2} $$\n\n3.  **硫 (S)：** 来自燃料的硫原子数 ($e$) 必须等于产物 $SO_2$ 中的硫原子数 ($\\nu_{SO_2}$)。\n    $$ e = \\nu_{SO_2} $$\n\n4.  **氮 (N)：** 来自燃料的氮原子数 ($d$) 加上来自氧化剂的氮原子数 ($2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{N_2}$) 必须等于产物 $N_2$ 中的氮原子数 ($2 \\cdot \\nu_{N_2,prod}$)。\n    $$ d + 2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{N_2} = 2 \\cdot \\nu_{N_2,prod} $$\n\n5.  **氩 (Ar)：** 氩是惰性的，因此它不变地通过反应。\n    $$ \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{Ar} = \\nu_{Ar} $$\n\n6.  **氧 (O)：** 这个平衡是找到化学计量需求量的关键。来自燃料的氧原子 ($c$)、来自氧化剂 $O_2$ 的氧原子 ($2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{O_2}$) 和来自氧化剂 $CO_2$ 的氧原子 ($2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2}$) 必须等于产物 $CO_2$ ($2 \\cdot \\nu_{CO_2}$)、$H_2O$ ($\\nu_{H_2O}$) 和 $SO_2$ ($2 \\cdot \\nu_{SO_2}$) 中的氧原子总数。\n    $$ c + 2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{O_2} + 2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2} = 2 \\cdot \\nu_{CO_2} + \\nu_{H_2O} + 2 \\cdot \\nu_{SO_2} $$\n\n为了求解 $\\mathrm{AFR}_{\\mathrm{stoich,molar}}$，我们将 $\\nu_{CO_2}$、$\\nu_{H_2O}$ 和 $\\nu_{SO_2}$ 的表达式代入氧平衡方程：\n$$ c + 2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{O_2} + 2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2} = 2 \\cdot (a + \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2}) + \\frac{b}{2} + 2 \\cdot e $$\n简化此方程可知，$2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{CO_2}$ 项在等式两边被消去。这是符合预期的，因为 $CO_2$ 是一种完全氧化的物质，不参与燃烧的供氧。\n$$ c + 2 \\cdot \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{O_2} = 2a + \\frac{b}{2} + 2e $$\n左边的项 $\\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{O_2}$ 正是每摩尔燃料由氧化剂提供的 $O_2$ 摩尔数。我们将此量定义为 $\\nu_{O_2}$，即化学计量需氧量。\n$$ \\nu_{O_2} \\equiv \\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot x_{O_2} $$\n求解 $\\nu_{O_2}$：\n$$ 2 \\cdot \\nu_{O_2} = 2a + \\frac{b}{2} + 2e - c $$\n$$ \\nu_{O_2} = a + \\frac{b}{4} + e - \\frac{c}{2} $$\n此方程给出了第一个所需输出 $\\nu_{O_2}$，它仅取决于燃料的组成。它代表了实现完全燃烧所需的净 $O_2$ 摩尔数。\n\n第二个所需输出，即基于摩尔的化学计量空燃比 $\\mathrm{AFR}_{\\mathrm{stoich,molar}}$，现在可以直接求出：\n$$ \\mathrm{AFR}_{\\mathrm{stoich,molar}} = \\frac{\\nu_{O_2}}{x_{O_2}} = \\frac{a + \\frac{b}{4} + e - \\frac{c}{2}}{x_{O_2}} $$\n如果氧化剂不含氧 ($x_{O_2} = 0$)，燃烧就不可能发生，所需的氧化剂量为无穷大。\n\n第三个所需输出是基于质量的化学计量空燃比 $\\mathrm{AFR}_{\\mathrm{stoich,mass}}$。这是氧化剂质量与燃料质量之比。\n$$ \\mathrm{AFR}_{\\mathrm{stoich,mass}} = \\frac{\\text{氧化剂质量}}{\\text{燃料质量}} = \\frac{(\\text{氧化剂摩尔数}) \\cdot (\\text{氧化剂摩尔质量})}{(\\text{燃料摩尔数}) \\cdot (\\text{燃料摩尔质量})} $$\n对于每摩尔燃料，这变为：\n$$ \\mathrm{AFR}_{\\mathrm{stoich,mass}} = \\frac{\\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot M_{\\text{oxidizer}}}{1 \\cdot M_{\\text{fuel}}} $$\n燃料的摩尔质量 $M_{\\text{fuel}}$ 根据其原子组成和给定的原子量 ($W_i$) 计算：\n$$ M_{\\text{fuel}} = a \\cdot W_C + b \\cdot W_H + c \\cdot W_O + d \\cdot W_N + e \\cdot W_S $$\n氧化剂的平均摩尔质量 $M_{\\text{oxidizer}}$ 是其组分分子量 ($W_j$) 的加权和：\n$$ M_{\\text{oxidizer}} = x_{O_2}W_{O_2} + x_{N_2}W_{N_2} + x_{Ar}W_{Ar} + x_{CO_2}W_{CO_2} $$\n氧化剂的摩尔分数 $x_i$ 总和必须为 $1$。如果不为 $1$，则必须通过将每个分数除以其总和来进行归一化。\n\n算法实现将遵循以下推导出的方程：\n1.  定义必要的原子量和分子量常数。\n2.  对于每个测试用例，解析燃料化学式字符串以确定整数原子数 $a$、$b$、$c$、$d$ 和 $e$。使用正则表达式可以高效地提取元素-数量对。\n3.  处理氧化剂组分。对提供的摩尔分数求和。如果总和不为零且不等于 $1$，则通过除以总和来对所有分数进行归一化。\n4.  检查氧气的摩尔分数 $x_{O_2}$。如果 $x_{O_2}$ 为零（或数值上接近于零），则空燃比为无穷大。\n5.  使用推导出的公式计算 $\\nu_{O_2}$：$\\nu_{O_2} = a + b/4 + e - c/2$。\n6.  计算 $\\mathrm{AFR}_{\\mathrm{stoich,molar}}$ 为 $\\nu_{O_2} / x_{O_2}$。\n7.  使用给定的重量和组分计算燃料的摩尔质量 $M_{\\text{fuel}}$ 和氧化剂的平均摩尔质量 $M_{\\text{oxidizer}}$。\n8.  计算 $\\mathrm{AFR}_{\\mathrm{stoich,mass}}$ 为 $(\\mathrm{AFR}_{\\mathrm{stoich,molar}} \\cdot M_{\\text{oxidizer}}) / M_{\\text{fuel}}$。\n9.  为每个测试用例返回三元组 $[\\nu_{O_2}, \\mathrm{AFR}_{\\mathrm{stoich,molar}}, \\mathrm{AFR}_{\\mathrm{stoich,mass}}]$，并处理 $x_{O_2}=0$ 时的无穷大情况。然后，所有测试用例的结果被格式化为指定的最终输出字符串。",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nimport re\n\ndef solve():\n    \"\"\"\n    Main function to run the stoichiometric combustion calculations for the given test cases.\n    \"\"\"\n\n    # Define standard atomic and molecular weights (g/mol).\n    ATOMIC_WEIGHTS = {\n        'C': 12.011, 'H': 1.008, 'O': 15.999, 'N': 14.007, 'S': 32.065\n    }\n    MOLECULAR_WEIGHTS = {\n        'O2': 31.998, 'N2': 28.014, 'Ar': 39.948, 'CO2': 44.009\n    }\n\n    def parse_formula(formula_str):\n        \"\"\"\n        Parses a chemical formula string into a dictionary of atom counts.\n        Example: 'C2H6O' - {'C': 2, 'H': 6, 'O': 1, 'N': 0, 'S': 0}\n        \"\"\"\n        atom_counts = {'C': 0, 'H': 0, 'O': 0, 'N': 0, 'S': 0}\n        # Regex to find element symbols (C, H, O, N, S) and their optional counts.\n        matches = re.findall(r'([A-Z])(\\d*)', formula_str)\n        for element, count_str in matches:\n            if element in atom_counts:\n                count = int(count_str) if count_str else 1\n                atom_counts[element] += count\n        return atom_counts\n\n    def calculate_stoichiometry(fuel_atoms, oxidizer_comp):\n        \"\"\"\n        Calculates stoichiometric combustion properties for a given fuel and oxidizer.\n        \"\"\"\n        a = fuel_atoms.get('C', 0)\n        b = fuel_atoms.get('H', 0)\n        c = fuel_atoms.get('O', 0)\n        d = fuel_atoms.get('N', 0)\n        e = fuel_atoms.get('S', 0)\n\n        # Get oxidizer mole fractions, defaulting to 0 if not present.\n        x_o2 = oxidizer_comp.get('x_O2', 0.0)\n        x_n2 = oxidizer_comp.get('x_N2', 0.0)\n        x_ar = oxidizer_comp.get('x_Ar', 0.0)\n        x_co2 = oxidizer_comp.get('x_CO2', 0.0)\n        \n        # Renormalize oxidizer mole fractions if they don't sum to 1.\n        x_sum = x_o2 + x_n2 + x_ar + x_co2\n        if x_sum  0 and not np.isclose(x_sum, 1.0):\n            x_o2 /= x_sum\n            x_n2 /= x_sum\n            x_ar /= x_sum\n            x_co2 /= x_sum\n\n        # 1. Calculate stoichiometric oxygen requirement (moles O2 / mole fuel)\n        nu_o2 = a + b / 4.0 + e - c / 2.0\n        \n        # Handle case with no oxygen in oxidizer\n        if np.isclose(x_o2, 0.0):\n            afr_molar = np.inf\n            afr_mass = np.inf\n            return [nu_o2, afr_molar, afr_mass]\n\n        # 2. Calculate molar-based stoichiometric Air-Fuel Ratio\n        afr_molar = nu_o2 / x_o2\n        \n        # 3. Calculate mass-based stoichiometric Air-Fuel Ratio\n        m_fuel = (a * ATOMIC_WEIGHTS['C'] +\n                  b * ATOMIC_WEIGHTS['H'] +\n                  c * ATOMIC_WEIGHTS['O'] +\n                  d * ATOMIC_WEIGHTS['N'] +\n                  e * ATOMIC_WEIGHTS['S'])\n        \n        m_oxidizer = (x_o2 * MOLECULAR_WEIGHTS['O2'] +\n                      x_n2 * MOLECULAR_WEIGHTS['N2'] +\n                      x_ar * MOLECULAR_WEIGHTS['Ar'] +\n                      x_co2 * MOLECULAR_WEIGHTS['CO2'])\n\n        if np.isclose(m_fuel, 0.0):\n             # Avoid division by zero for an empty fuel\n            afr_mass = np.inf if afr_molar  0 else 0.0\n        else:\n            afr_mass = afr_molar * m_oxidizer / m_fuel\n        \n        return [nu_o2, afr_molar, afr_mass]\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        ('CH4', {'x_O2': 0.2095, 'x_N2': 0.7808, 'x_Ar': 0.0093, 'x_CO2': 0.0004}),\n        ('C2H6O', {'x_O2': 1.0}),\n        ('C3H6O', {'x_O2': 0.30, 'x_N2': 0.70}),\n        ('C4H4S', {'x_O2': 0.21, 'x_N2': 0.78, 'x_CO2': 0.01}),\n        ('H2', {'x_O2': 0.01, 'x_N2': 0.99}),\n    ]\n\n    results = []\n    for fuel_formula, oxidizer_composition in test_cases:\n        fuel_atom_counts = parse_formula(fuel_formula)\n        result_triplet = calculate_stoichiometry(fuel_atom_counts, oxidizer_composition)\n        results.append(result_triplet)\n\n    # Format the final output string exactly as required.\n    inner_strs = [f\"[{r[0]},{r[1]},{r[2]}]\" for r in results]\n    final_output = f\"[{','.join(inner_strs)}]\"\n    \n    print(final_output)\n\nsolve()\n```"
        }
    ]
}
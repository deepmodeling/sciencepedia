{
    "hands_on_practices": [
        {
            "introduction": "The first step in analyzing thermal runaway is understanding when it begins, a point determined by the balance between internal heat generation and dissipation. This practice applies the fundamental principle of energy conservation to a lumped thermal mass, a common and powerful simplification in thermal engineering. By deriving and solving an ordinary differential equation that captures the non-linear feedback between temperature and Arrhenius-based reaction rates, you will predict the critical time to ignition under various abuse and cooling conditions. ",
            "id": "4009145",
            "problem": "Consider a battery cell modeled as a spatially uniform lumped thermal mass under conditions relevant to thermal runaway initiation. The fundamental starting point is conservation of energy for a lumped body (valid when the Biot number is small), expressed as a time rate of change of internal energy equated to net heat input. Let the internal energy be $U = \\rho c V T$, where $\\rho$ is density, $c$ is specific heat capacity, $V$ is volume, and $T$ is uniform temperature. The net heat input consists of two contributions: volumetric heat generation due to exothermic reactions such as Solid Electrolyte Interphase (SEI) decomposition, represented by an Arrhenius law, and convective heat loss to an ambient at temperature $T_{\\infty}$. Assume the volumetric heat generation rate is $q_{\\mathrm{vol}}(T) = Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}}$, where $Q_0$ is a constant prefactor with units of $\\mathrm{W/m^3}$ that lumps reaction kinetics and enthalpy release, $E_a$ is activation energy, $R$ is the universal gas constant, and $q_{\\mathrm{ext}}$ is a constant external volumetric heating term representing abuse conditions (e.g., forced heating or short-circuit). Convective heat loss is modeled by Newton’s law of cooling with heat transfer coefficient $h$ and surface area $A$.\n\nStarting from these definitions and the conservation statement, derive the ordinary differential equation for the temperature $T(t)$ and implement a numerical integration to determine the ignition delay, defined as the time for $T(t)$ to first reach a specified ignition threshold $T_{\\mathrm{ign}}$. If $T(t)$ does not reach $T_{\\mathrm{ign}}$ within a specified maximum time $t_{\\max}$, return a sentinel value of $-1.0$. Express ignition delay answers in seconds.\n\nYour program must:\n- Formulate the temperature evolution starting from the lumped energy balance and the given heat generation and loss models, without invoking any shortcut formulas beyond the stated fundamental laws and definitions.\n- Use a robust initial value solver with event detection to stop at ignition when $T(t)$ reaches $T_{\\mathrm{ign}}$.\n- Treat the initial condition as $T(0) = T_0$.\n- Ensure all quantities use consistent International System of Units (SI units) throughout.\n- Output a single line containing a comma-separated list enclosed in square brackets, where each entry is the ignition delay in seconds (as a float) for each test case, with $-1.0$ indicating no ignition within $t_{\\max}$.\n\nUse the following test suite of parameter sets, designed to probe different regimes:\n- Case $1$ (happy path, moderate cooling, moderate external heating): $\\rho = 2500 \\ \\mathrm{kg/m^3}$, $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$, $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$, $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$, $h = 12.0 \\ \\mathrm{W/(m^2\\cdot K)}$, $T_{\\infty} = 298.0 \\ \\mathrm{K}$, $T_0 = 300.0 \\ \\mathrm{K}$, $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$, $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$, $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$, $q_{\\mathrm{ext}} = 2.0\\times 10^{5} \\ \\mathrm{W/m^3}$, $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$, $t_{\\max} = 2500.0 \\ \\mathrm{s}$.\n- Case $2$ (strong cooling, weaker external heating, likely no ignition within $t_{\\max}$): $\\rho = 2500 \\ \\mathrm{kg/m^3}$, $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$, $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$, $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$, $h = 60.0 \\ \\mathrm{W/(m^2\\cdot K)}$, $T_{\\infty} = 298.0 \\ \\mathrm{K}$, $T_0 = 300.0 \\ \\mathrm{K}$, $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$, $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$, $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$, $q_{\\mathrm{ext}} = 1.0\\times 10^{5} \\ \\mathrm{W/m^3}$, $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$, $t_{\\max} = 2500.0 \\ \\mathrm{s}$.\n- Case $3$ (lower ambient, higher external heating, faster ignition): $\\rho = 2500 \\ \\mathrm{kg/m^3}$, $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$, $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$, $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$, $h = 20.0 \\ \\mathrm{W/(m^2\\cdot K)}$, $T_{\\infty} = 290.0 \\ \\mathrm{K}$, $T_0 = 300.0 \\ \\mathrm{K}$, $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$, $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$, $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$, $q_{\\mathrm{ext}} = 4.0\\times 10^{5} \\ \\mathrm{W/m^3}$, $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$, $t_{\\max} = 2000.0 \\ \\mathrm{s}$.\n- Case $4$ (near-threshold initial temperature, rapid ignition): $\\rho = 2500 \\ \\mathrm{kg/m^3}$, $c = 900 \\ \\mathrm{J/(kg\\cdot K)}$, $V = 5.0\\times 10^{-5} \\ \\mathrm{m^3}$, $A = 4.0\\times 10^{-2} \\ \\mathrm{m^2}$, $h = 12.0 \\ \\mathrm{W/(m^2\\cdot K)}$, $T_{\\infty} = 298.0 \\ \\mathrm{K}$, $T_0 = 440.0 \\ \\mathrm{K}$, $Q_0 = 5.0\\times 10^{10} \\ \\mathrm{W/m^3}$, $E_a = 6.0\\times 10^{4} \\ \\mathrm{J/mol}$, $R = 8.314 \\ \\mathrm{J/(mol\\cdot K)}$, $q_{\\mathrm{ext}} = 2.0\\times 10^{5} \\ \\mathrm{W/m^3}$, $T_{\\mathrm{ign}} = 450.0 \\ \\mathrm{K}$, $t_{\\max} = 500.0 \\ \\mathrm{s}$.\n\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets (e.g., $[result_1,result_2,result_3,result_4]$), where each $result_i$ is the ignition delay in seconds for the corresponding case, or $-1.0$ if ignition was not reached by $t_{\\max}$.",
            "solution": "The problem requires the derivation and subsequent numerical solution of a differential equation governing the temperature of a lumped thermal mass, representing a battery cell, to determine its ignition delay. The derivation begins with the fundamental principle of conservation of energy.\n\nThe first law of thermodynamics for a lumped system states that the time rate of change of its internal energy, $\\frac{dU}{dt}$, equals the net rate of heat transfer into the system, $\\dot{Q}_{\\text{net}}$.\n$$\n\\frac{dU}{dt} = \\dot{Q}_{\\text{net}}\n$$\nThe internal energy $U$ of the body is given by $U = \\rho c V T$, where $\\rho$ is the density, $c$ is the specific heat capacity, $V$ is the volume, and $T$ is the uniform temperature. Assuming $\\rho$, $c$, and $V$ are constant, the rate of change of internal energy is:\n$$\n\\frac{dU}{dt} = \\frac{d}{dt}(\\rho c V T) = \\rho c V \\frac{dT}{dt}\n$$\nThe net heat rate, $\\dot{Q}_{\\text{net}}$, is the algebraic sum of heat generated within the body, $\\dot{Q}_{\\text{gen}}$, and heat lost to the surroundings. Defining heat loss as a positive quantity, we have $\\dot{Q}_{\\text{net}} = \\dot{Q}_{\\text{gen}} - \\dot{Q}_{\\text{loss}}$.\n\nThe total heat generation rate, $\\dot{Q}_{\\text{gen}}$, is obtained by multiplying the specified volumetric heat generation rate, $q_{\\mathrm{vol}}(T)$, by the volume $V$. The volumetric rate is the sum of an Arrhenius-type chemical reaction term and a constant external heating term, $q_{\\mathrm{ext}}$:\n$$\nq_{\\mathrm{vol}}(T) = Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}}\n$$\nwhere $Q_0$ is a pre-exponential factor, $E_a$ is the activation energy, and $R$ is the universal gas constant. The total heat generation rate is therefore:\n$$\n\\dot{Q}_{\\text{gen}} = V \\cdot q_{\\mathrm{vol}}(T) = V \\left( Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}} \\right)\n$$\nThe heat loss rate, $\\dot{Q}_{\\text{loss}}$, is described by Newton's law of cooling, which states that the rate of convective heat transfer is proportional to the surface area $A$, the heat transfer coefficient $h$, and the temperature difference between the body ($T$) and the ambient environment ($T_{\\infty}$):\n$$\n\\dot{Q}_{\\text{loss}} = h A (T - T_{\\infty})\n$$\nBy substituting these expressions for $\\frac{dU}{dt}$, $\\dot{Q}_{\\text{gen}}$, and $\\dot{Q}_{\\text{loss}}$ into the energy balance equation, we obtain:\n$$\n\\rho c V \\frac{dT}{dt} = V \\left( Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}} \\right) - h A (T - T_{\\infty})\n$$\nTo formulate the ordinary differential equation (ODE) for temperature evolution, we solve for the derivative $\\frac{dT}{dt}$:\n$$\n\\frac{dT}{dt} = \\frac{1}{\\rho c V} \\left[ V \\left( Q_0 \\exp\\left(-\\dfrac{E_a}{R T}\\right) + q_{\\mathrm{ext}} \\right) - h A (T - T_{\\infty}) \\right]\n$$\nThis ODE, subject to the initial condition $T(0) = T_0$, forms an initial value problem (IVP) that describes the temperature of the battery cell over time.\n\nThis IVP is solved numerically to find the ignition delay, defined as the time needed for the temperature $T(t)$ to reach the ignition threshold $T_{\\mathrm{ign}}$. We use the `scipy.integrate.solve_ivp` function, a robust tool for solving IVPs in Python. A key feature of this solver is its ability to handle events. An event is defined by a function whose root marks a specific occurrence. For this problem, the event function is $g(t, T) = T(t) - T_{\\mathrm{ign}}$. We configure the solver to detect when $g(t, T) = 0$ with a positive-going slope (i.e., temperature increasing through $T_{\\mathrm{ign}}$) and to terminate the integration at that point.\n\nThe integration is carried out over the time span $[0, t_{\\max}]$. If the ignition event is detected, the solver returns the time of the event, which is the ignition delay. If the integration completes up to $t_{\\max}$ without the event occurring, it indicates that the system either reached a stable thermal equilibrium below $T_{\\mathrm{ign}}$ or that the rate of temperature rise was too slow for ignition to occur within the allotted time. In this case, the specified sentinel value of $-1.0$ is returned. This procedure is systematically applied to each of the four test cases provided.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\nfrom scipy.integrate import solve_ivp\n\ndef solve():\n    \"\"\"\n    Derives and solves the ODE for battery temperature to find ignition delay.\n    \"\"\"\n    \n    # Test cases as provided in the problem statement. Each entry is a dictionary\n    # of parameters for a single simulation run.\n    test_cases = [\n        # Case 1: Moderate cooling, moderate external heating\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 12.0,\n            \"T_inf\": 298.0, \"T0\": 300.0, \"q_ext\": 2.0e5, \"T_ign\": 450.0, \"t_max\": 2500.0\n        },\n        # Case 2: Strong cooling, weaker external heating\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 60.0,\n            \"T_inf\": 298.0, \"T0\": 300.0, \"q_ext\": 1.0e5, \"T_ign\": 450.0, \"t_max\": 2500.0\n        },\n        # Case 3: Lower ambient, higher external heating\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 20.0,\n            \"T_inf\": 290.0, \"T0\": 300.0, \"q_ext\": 4.0e5, \"T_ign\": 450.0, \"t_max\": 2000.0\n        },\n        # Case 4: Near-threshold initial temperature\n        {\n            \"rho\": 2500.0, \"c\": 900.0, \"V\": 5.0e-5, \"A\": 4.0e-2, \"h\": 12.0,\n            \"T_inf\": 298.0, \"T0\": 440.0, \"q_ext\": 2.0e5, \"T_ign\": 450.0, \"t_max\": 500.0\n        },\n    ]\n\n    # Global physical constants from the problem description\n    R = 8.314   # Universal gas constant, J/(mol*K)\n    Q0 = 5.0e10 # Pre-exponential factor, W/m^3\n    Ea = 6.0e4  # Activation energy, J/mol\n    \n    results = []\n\n    for case_params in test_cases:\n        # Define the ordinary differential equation for temperature evolution\n        def temperature_ode(t, T_array, params):\n            T = T_array[0]\n            \n            # Unpack parameters for clarity\n            rho, c, V, A, h = params[\"rho\"], params[\"c\"], params[\"V\"], params[\"A\"], params[\"h\"]\n            T_inf, q_ext = params[\"T_inf\"], params[\"q_ext\"]\n            \n            # Rate of volumetric heat generation (W/m^3)\n            # This includes internal Arrhenius-type reaction and external heating\n            q_vol = Q0 * np.exp(-Ea / (R * T)) + q_ext\n            \n            # Total rate of heat generation in the volume (W)\n            q_gen_total = q_vol * V\n            \n            # Total rate of heat loss via convection (W)\n            q_loss_total = h * A * (T - T_inf)\n            \n            # Energy balance: rho * c * V * dT/dt = q_gen_total - q_loss_total\n            dT_dt = (q_gen_total - q_loss_total) / (rho * c * V)\n            \n            return [dT_dt]\n\n        # Define an event to detect when the temperature reaches the ignition threshold\n        def ignition_event(t, T_array, params):\n            return T_array[0] - params[\"T_ign\"]\n        \n        ignition_event.terminal = True # Stop the integration when the event is detected\n        ignition_event.direction = 1   # Trigger only on an increasing temperature profile\n\n        # Solve the initial value problem (IVP)\n        sol = solve_ivp(\n            fun=temperature_ode,\n            t_span=(0, case_params[\"t_max\"]),\n            y0=[case_params[\"T0\"]],\n            method='RK45',  # A standard, robust solver for non-stiff problems\n            events=ignition_event,\n            args=(case_params,), # Pass parameters to the ODE and event functions\n            dense_output=True # Improves accuracy of event location\n        )\n\n        # Process the results of the integration\n        if sol.status == 1 and len(sol.t_events[0]) > 0:\n            # Status 1 means a terminal event was triggered\n            ignition_time = sol.t_events[0][0]\n            results.append(ignition_time)\n        else:\n            # No ignition event occurred within the t_max time window\n            results.append(-1.0)\n\n    # Print the final results in the specified format\n    print(f\"[{','.join(map(str, results))}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "When a battery vents during thermal runaway, the escaping flammable vapors pose a significant fire risk. This exercise connects classical combustion theory to practical safety engineering by modeling flame quenching in the narrow channels of a battery vent. You will derive a criterion for the critical channel size by balancing the flame's heat release with conductive heat losses to the walls, providing a method to assess whether a vent design can effectively act as a flame arrestor. ",
            "id": "4009192",
            "problem": "Consider electrolyte vapor–air mixtures produced during lithium-ion battery thermal runaway venting through a narrow, parallel-plate channel of half-gap $d$ (full gap $2d$). Assume a spatially one-dimensional premixed flame propagates axially with laminar burning velocity $S_L$ into an unburned mixture at temperature $T_u$. The channel walls are isothermal at temperature $T_w$, and the adiabatic burned gas temperature (in the absence of wall heat loss) is $T_b$. Properties are treated as constant and evaluated at an intermediate temperature, with density $\\rho$, specific heat at constant pressure $c_p$, and thermal conductivity $\\lambda$. Adopt the following modeling assumptions and requirements.\n\n1) Fundamental base and modeling closures to use:\n- Conservation of energy for a steady, planar, premixed flame in a frame where the flame is stationary: the net sensible enthalpy increase convected through the flame per unit cross-sectional area equals the reaction heat release that would be realized under adiabatic conditions minus the heat lost to the walls.\n- Fourier’s law of heat conduction in the transverse direction, with the transverse temperature field represented by the first eigenmode of the Laplace operator for a parallel-plate channel with isothermal walls. Use the first-mode eigenvalue coefficient $c_{\\text{mode}} = \\pi^2/4$ to model the characteristic transverse conduction strength in a narrow channel.\n- Thermal diffusivity definition $\\alpha = \\lambda / (\\rho c_p)$ and a characteristic thermal flame thickness definition $\\delta_T = \\alpha / S_L$.\n\n2) Derivation target:\n- Starting only from the above fundamental laws and definitions, derive a criterion for the existence of a steady propagating flame versus quenching in terms of a critical half-gap $d_q$. The derivation must express $d_q$ explicitly as a function of $S_L$, $\\rho$, $c_p$, $\\lambda$, $T_b$, $T_u$, $T_w$, and $c_{\\text{mode}}$, by balancing the axial convective sensible enthalpy transport across a control volume spanning the flame with the transverse conductive loss to the walls modeled via the first eigenmode. You must choose a consistent definition of a representative flame-zone mean temperature that is a function of $T_b$ and $T_u$, and justify this choice from first principles. The final criterion must be a closed-form expression for $d_q$ with units of meters.\n- The classification rule is: if $d \\ge d_q$, predict flame propagation (return a boolean value of True); otherwise, predict quenching (return a boolean value of False).\n\n3) Program requirements:\n- Implement the derived explicit expression for $d_q$ and the classification rule in a complete, runnable program.\n- For each test case below, compute the critical half-gap $d_q$ and the classification. Express the critical half-gap in millimeters, rounded to three decimal places. The classification must be a boolean.\n- Your program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each element is a two-element list of the form $[d_q\\ \\text{in mm},\\ \\text{boolean}]$. For example: $[[0.123,\\text{True}],[0.456,\\text{False}],\\ldots]$.\n\n4) Units and constants:\n- All inputs are in the International System of Units (SI): $d$ in meters, $S_L$ in meters per second, $\\rho$ in kilograms per cubic meter, $c_p$ in joules per kilogram per kelvin, $\\lambda$ in watts per meter per kelvin, and all temperatures in kelvin.\n- Use $c_{\\text{mode}} = \\pi^2/4$ as specified above.\n- Angle units are not applicable in this problem.\n\n5) Test suite:\nUse the following five scientifically plausible test cases representing electrolyte vapor mixtures in air under battery venting conditions. For each case, apply your derived expression and classification rule.\n\n- Case A (happy path, wide channel): $d = 0.001\\ \\text{m}$, $S_L = 0.25\\ \\text{m/s}$, $\\rho = 0.8\\ \\text{kg/m}^3$, $c_p = 1200\\ \\text{J/(kg\\cdot K)}$, $\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$, $T_b = 2100\\ \\text{K}$, $T_u = 500\\ \\text{K}$, $T_w = 400\\ \\text{K}$.\n- Case B (narrow channel, same mixture as A): $d = 0.0001\\ \\text{m}$, $S_L = 0.25\\ \\text{m/s}$, $\\rho = 0.8\\ \\text{kg/m}^3$, $c_p = 1200\\ \\text{J/(kg\\cdot K)}$, $\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$, $T_b = 2100\\ \\text{K}$, $T_u = 500\\ \\text{K}$, $T_w = 400\\ \\text{K}$.\n- Case C (slow flame): $d = 0.0005\\ \\text{m}$, $S_L = 0.08\\ \\text{m/s}$, $\\rho = 0.8\\ \\text{kg/m}^3$, $c_p = 1200\\ \\text{J/(kg\\cdot K)}$, $\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$, $T_b = 2100\\ \\text{K}$, $T_u = 500\\ \\text{K}$, $T_w = 400\\ \\text{K}$.\n- Case D (hot wall reduces losses): $d = 0.00015\\ \\text{m}$, $S_L = 0.25\\ \\text{m/s}$, $\\rho = 0.8\\ \\text{kg/m}^3$, $c_p = 1200\\ \\text{J/(kg\\cdot K)}$, $\\lambda = 0.04\\ \\text{W/(m\\cdot K)}$, $T_b = 2100\\ \\text{K}$, $T_u = 500\\ \\text{K}$, $T_w = 1000\\ \\text{K}$.\n- Case E (different mixture properties): $d = 0.00025\\ \\text{m}$, $S_L = 0.15\\ \\text{m/s}$, $\\rho = 1.1\\ \\text{kg/m}^3$, $c_p = 1100\\ \\text{J/(kg\\cdot K)}$, $\\lambda = 0.03\\ \\text{W/(m\\cdot K)}$, $T_b = 1900\\ \\text{K}$, $T_u = 450\\ \\text{K}$, $T_w = 350\\ \\text{K}$.\n\nYour program must hard-code these five test cases, compute the requested outputs using your derived expression, and print a single line of the form $[[d_{q,A},\\text{bool}_A],[d_{q,B},\\text{bool}_B],[d_{q,C},\\text{bool}_C],[d_{q,D},\\text{bool}_D],[d_{q,E},\\text{bool}_E]]$, where each $d_{q,\\cdot}$ is in millimeters rounded to three decimal places, and each $\\text{bool}_{\\cdot}$ is the corresponding propagation classification.",
            "solution": "The user's request is to derive a criterion for flame propagation versus quenching in a narrow parallel-plate channel and implement it programmatically. This problem is scientifically well-posed and suitable for a rigorous solution.\n\n### Step 1: Extract Givens\n- **Geometry**: Parallel-plate channel of half-gap $d$ (full gap $2d$).\n- **Flow**: One-dimensional premixed flame propagating axially with laminar burning velocity $S_L$.\n- **Temperatures**: Unburned mixture temperature $T_u$, isothermal wall temperature $T_w$, adiabatic burned gas temperature $T_b$.\n- **Properties**: Constant and evaluated at an intermediate temperature: density $\\rho$, specific heat at constant pressure $c_p$, thermal conductivity $\\lambda$.\n- **Modeling Assumptions**:\n    1.  **Energy Balance**: Steady, planar, flame-stationary frame. Net sensible enthalpy increase per unit area = adiabatic heat release per unit area - heat loss to walls.\n    2.  **Transverse Heat Loss**: Modeled by Fourier's law with the transverse temperature field represented by the first eigenmode of the Laplace operator. Eigenvalue coefficient $c_{\\text{mode}} = \\pi^2/4$.\n    3.  **Definitions**: Thermal diffusivity $\\alpha = \\lambda / (\\rho c_p)$, characteristic thermal flame thickness $\\delta_T = \\alpha / S_L$.\n- **Derivation Target**: An explicit, closed-form expression for the critical quenching half-gap $d_q$ as a function of $S_L$, $\\rho$, $c_p$, $\\lambda$, $T_b$, $T_u$, $T_w$, and $c_{\\text{mode}}$.\n- **Classification Rule**: Flame propagates if $d \\ge d_q$ (True); flame quenches if $d  d_q$ (False).\n- **Test Cases**: Five sets of parameters ($d$, $S_L$, $\\rho$, $c_p$, $\\lambda$, $T_b$, $T_u$, $T_w$) are provided.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is assessed against the validation criteria:\n- **Scientifically Grounded**: The problem is rooted in fundamental principles of combustion theory and heat transfer, specifically the balance between chemical heat release and conductive heat loss which governs flame propagation and extinction. The use of a global energy balance and an eigenmode approximation for heat loss are standard, well-established techniques in analyzing flame quenching. The provided physical parameters are plausible for electrolyte vapor combustion.\n- **Well-Posed**: The problem is clearly defined with all necessary parameters, constants, and boundary conditions provided. The objective is to derive a specific quantity, $d_q$, based on a prescribed set of assumptions, leading to a unique solution.\n- **Objective**: The problem is stated in precise, quantitative, and unbiased scientific language. There are no subjective elements.\n\nThe problem does not exhibit any of the invalidity flaws. It is scientifically sound, self-contained, and formalizable.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. Proceeding with the derivation and solution.\n\n### Derivation of the Quenching Criterion\n\nThe problem of flame sustainability in a channel is governed by the balance between the heat generated by the chemical reaction and the heat lost to the cold walls. A steady flame can exist only if the heat generation rate is sufficient to overcome the losses. The quenching limit corresponds to the critical condition where the heat loss rate equals the heat generation rate. We model this balance using volumetric rates within a control volume defined by the flame's thickness.\n\nLet us define the volumetric heat generation rate, $q_{gen}$, and the volumetric heat loss rate, $q_{loss}$. The quenching condition is then $q_{gen} = q_{loss}$.\n\n1.  **Volumetric Heat Generation Rate ($q_{gen}$)**:\n    The total heat released per unit of cross-sectional area of the channel is the amount required to raise the unburned gas at temperature $T_u$ to the adiabatic flame temperature $T_b$. In a flame-stationary frame, the mass flux is $\\rho S_L$. The heat release rate per unit area is therefore $\\rho S_L c_p (T_b - T_u)$.\n    This heat is released over the volume of the flame. We can approximate the volumetric heat generation rate by distributing this total heat release over the flame's characteristic thickness, $\\delta_T$.\n    $$q_{gen} \\approx \\frac{\\rho S_L c_p (T_b - T_u)}{\\delta_T}$$\n    The problem provides the definition for the thermal flame thickness as $\\delta_T = \\alpha / S_L$, where $\\alpha = \\lambda / (\\rho c_p)$ is the thermal diffusivity. Substituting for $\\delta_T$:\n    $$q_{gen} \\approx \\frac{\\rho S_L c_p (T_b - T_u)}{\\lambda / (\\rho c_p S_L)} = \\frac{(\\rho c_p S_L)^2 (T_b - T_u)}{\\lambda}$$\n\n2.  **Volumetric Heat Loss Rate ($q_{loss}$)**:\n    Heat is lost from the flame zone to the channel walls via conduction in the transverse direction (let's call it the $y$-direction). The volumetric heat loss is the divergence of the conductive heat flux. For a one-dimensional axial flame, the dominant loss term is due to transverse conduction, $\\lambda \\frac{\\partial^2 T}{\\partial y^2}$.\n    The problem directs us to model the transverse temperature profile using the first eigenmode for a parallel-plate channel with isothermal walls at $T_w$. This approximation relates the second derivative of temperature to the temperature difference between the gas and the wall:\n    $$\\frac{\\partial^2 T}{\\partial y^2} \\approx -\\frac{c_{\\text{mode}}}{d^2} (\\bar{T} - T_w)$$\n    Here, $\\bar{T}$ is a representative mean temperature of the gas in the flame zone, and $c_{\\text{mode}} = \\pi^2/4$ is the given first-mode eigenvalue coefficient for a channel of half-gap $d$.\n    Thus, the volumetric heat loss rate is:\n    $$q_{loss} \\approx -\\lambda \\left( -\\frac{c_{\\text{mode}}}{d^2} (\\bar{T} - T_w) \\right) = \\frac{\\lambda c_{\\text{mode}}}{d^2} (\\bar{T} - T_w)$$\n\n3.  **Representative Flame Temperature ($\\bar{T}$)**:\n    The problem requires a justified choice for the representative flame-zone mean temperature, $\\bar{T}$. The temperature within the flame varies from $T_u$ to a peak value near $T_b$. A simple and physically reasonable choice for the average temperature across this structure is the arithmetic mean of the unburned and adiabatic burned temperatures:\n    $$\\bar{T} = \\frac{T_u + T_b}{2}$$\n    This choice is justified as a first-order approximation for the average temperature in the preheat and reaction zones where the bulk of the transverse heat loss occurs.\n\n4.  **Deriving the Critical Half-Gap ($d_q$)**:\n    The quenching condition is met when the heat generation is just balanced by the heat loss. We set $q_{gen} = q_{loss}$ at the critical half-gap $d = d_q$:\n    $$\\frac{(\\rho c_p S_L)^2 (T_b - T_u)}{\\lambda} = \\frac{\\lambda c_{\\text{mode}}}{d_q^2} \\left( \\bar{T} - T_w \\right)$$\n    Now, we solve for $d_q^2$:\n    $$d_q^2 = \\frac{\\lambda^2 c_{\\text{mode}} (\\bar{T} - T_w)}{(\\rho c_p S_L)^2 (T_b - T_u)}$$\n    Taking the square root gives the expression for the critical half-gap:\n    $$d_q = \\sqrt{\\frac{\\lambda^2 c_{\\text{mode}} (\\bar{T} - T_w)}{(\\rho c_p S_L)^2 (T_b - T_u)}} = \\frac{\\lambda}{\\rho c_p S_L} \\sqrt{c_{\\text{mode}} \\frac{\\bar{T} - T_w}{T_b - T_u}}$$\n    Substituting our choice for $\\bar{T}$:\n    $$\\frac{\\bar{T} - T_w}{T_b - T_u} = \\frac{(T_u + T_b)/2 - T_w}{T_b - T_u} = \\frac{T_u + T_b - 2T_w}{2(T_b - T_u)}$$\n    This yields the final expression for the critical quenching half-gap:\n    $$d_q = \\frac{\\lambda}{\\rho c_p S_L} \\sqrt{c_{\\text{mode}} \\frac{T_b + T_u - 2T_w}{2(T_b - T_u)}}$$\n\n5.  **Classification Rule**:\n    If the actual channel half-gap $d$ is greater than or equal to the critical value $d_q$, the heat generation capacity exceeds the relative heat loss, and a steady flame can propagate. Otherwise, heat losses dominate, and the flame is quenched.\n    - If $d \\ge d_q$: Flame propagates (True).\n    - If $d  d_q$: Flame quenches (False).\n\nThis derived expression and classification rule will now be implemented to solve the test cases.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Calculates the quenching distance for a flame in a parallel-plate channel\n    and determines if propagation or quenching occurs for several test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement. All units are SI.\n    test_cases = [\n        # Case A (happy path, wide channel)\n        {'name': 'A', 'd': 0.001, 'S_L': 0.25, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 400},\n        # Case B (narrow channel, same mixture as A)\n        {'name': 'B', 'd': 0.0001, 'S_L': 0.25, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 400},\n        # Case C (slow flame)\n        {'name': 'C', 'd': 0.0005, 'S_L': 0.08, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 400},\n        # Case D (hot wall reduces losses)\n        {'name': 'D', 'd': 0.00015, 'S_L': 0.25, 'rho': 0.8, 'c_p': 1200, 'lam': 0.04, 'T_b': 2100, 'T_u': 500, 'T_w': 1000},\n        # Case E (different mixture properties)\n        {'name': 'E', 'd': 0.00025, 'S_L': 0.15, 'rho': 1.1, 'c_p': 1100, 'lam': 0.03, 'T_b': 1900, 'T_u': 450, 'T_w': 350},\n    ]\n\n    results_str = []\n    \n    # Constant for the first-mode eigenvalue coefficient\n    c_mode = np.pi**2 / 4\n\n    for case in test_cases:\n        d = case['d']\n        S_L = case['S_L']\n        rho = case['rho']\n        c_p = case['c_p']\n        lam = case['lam']\n        T_b = case['T_b']\n        T_u = case['T_u']\n        T_w = case['T_w']\n\n        # The term inside the square root can be negative if 2*T_w > T_b + T_u,\n        # which would be physically unrealistic for quenching (hot walls supporting combustion).\n        # We assert this is not the case for our inputs.\n        temp_numerator = T_b + T_u - 2 * T_w\n        temp_denominator = 2 * (T_b - T_u)\n        \n        if temp_numerator  0 or temp_denominator = 0:\n            # This scenario is not expected with the given data but handle for robustness.\n            # A negative numerator implies wall heating, not loss, so no quenching.\n            # Thus d_q would be imaginary or zero; practically, flame always propagates.\n            # For this problem, we can assume this case won't be tested.\n            # Let's add a check.\n            if temp_numerator  0:\n               dq = 0 # No quenching due to heat loss\n            else:\n               # This case would mean T_u >= T_b, which is non-physical for a flame\n               # and would cause a domain error.\n               # Let's skip to avoid crashing, but this indicates an invalid case.\n               continue\n        else:\n             # Calculate the critical quenching half-gap d_q based on the derived formula:\n             # d_q = (lambda / (rho * c_p * S_L)) * sqrt(c_mode * (T_b + T_u - 2*T_w) / (2 * (T_b - T_u)))\n             pre_factor = lam / (rho * c_p * S_L)\n             sqrt_term = np.sqrt(c_mode * temp_numerator / temp_denominator)\n             dq = pre_factor * sqrt_term\n\n        # Convert d_q from meters to millimeters and round to three decimal places\n        dq_mm = round(dq * 1000, 3)\n\n        # Classification: propagate if d >= dq, otherwise quench.\n        propagate = d >= dq\n\n        # Format the result string for this case as `[value,Boolean]`\n        results_str.append(f\"[{dq_mm},{propagate}]\")\n\n    # Final print statement in the exact required format: [[...],[...],...]\n    print(f\"[{','.join(results_str)}]\")\n\nsolve()\n```"
        },
        {
            "introduction": "The most catastrophic failure mode in a battery module is a cascading thermal runaway, where one failing cell triggers a chain reaction in its neighbors. This advanced practice involves building a system-level model to simulate this dangerous feedback loop, coupling the thermal states of adjacent cells through convection, surface radiation, and radiative heating from vent-gas flames. By implementing a numerical simulation, you will investigate the critical factors that determine whether a single-cell failure escalates into a module-wide event. ",
            "id": "4009227",
            "problem": "Consider a simplified two-cell lithium-ion battery module undergoing thermal runaway in one cell and potential cascade propagation to its adjacent cell. Each cell is modeled as an isothermal lumped control mass with a single temperature state variable. The model uses fundamental energy conservation, radiative exchange, and chemical kinetics to capture the feedback loop where radiative heating of adjacent cells increases venting and flame intensity, influencing whether the runaway cascades.\n\nAssumptions and foundational laws to be used:\n- First Law of Thermodynamics for a control mass: $$C_i \\frac{d T_i}{d t} = \\dot{Q}_{\\text{in},i} - \\dot{Q}_{\\text{out},i} + \\dot{Q}_{\\text{gen},i},$$ where $C_i$ is the effective heat capacity of cell $i$ in $\\mathrm{J/K}$, $T_i$ is the cell temperature in $\\mathrm{K}$, $\\dot{Q}_{\\text{in},i}$ is the net external heat input rate to the cell in $\\mathrm{W}$, $\\dot{Q}_{\\text{out},i}$ is the net heat loss rate in $\\mathrm{W}$, and $\\dot{Q}_{\\text{gen},i}$ is the internal heat generation rate in $\\mathrm{W}$.\n- Stefan–Boltzmann law for radiative surface exchange with view factor: $$\\dot{Q}_{\\text{rad},i\\rightarrow j}^{\\text{surf}} = \\sigma \\epsilon F_{ij} A_{\\text{face}}\\left(T_i^4 - T_j^4\\right),$$ where $\\sigma$ is the Stefan–Boltzmann constant ($\\sigma = 5.670374419\\times 10^{-8}\\ \\mathrm{W\\,m^{-2}\\,K^{-4}}$), $\\epsilon$ is emissivity (dimensionless), $F_{ij}$ is the view factor (dimensionless), and $A_{\\text{face}}$ is the radiating face area in $\\mathrm{m^2}$.\n- Newton’s law of cooling for convective loss: $$\\dot{Q}_{\\text{conv},i} = h_i A_{\\text{face}}\\left(T_i - T_{\\infty}\\right),$$ where $h_i$ is the convective heat transfer coefficient in $\\mathrm{W\\,m^{-2}\\,K^{-1}}$ and $T_{\\infty}$ is ambient temperature in $\\mathrm{K}$.\n- Combustion of vented gases releases heat at a rate proportional to venting mass flow: $$\\dot{Q}_{\\text{comb},i} = \\eta \\,\\text{LHV}\\,\\dot{m}_i,$$ where $\\eta$ is combustion efficiency (dimensionless), $\\text{LHV}$ is the lower heating value in $\\mathrm{J/kg}$, and $\\dot{m}_i$ is the venting mass flow rate in $\\mathrm{kg/s}$. A fraction $\\chi$ (dimensionless) of this combustion heat is emitted as thermal radiation that can heat neighboring cells: $$\\dot{Q}_{\\text{rad},i\\rightarrow j}^{\\text{flame}} = \\chi\\,\\dot{Q}_{\\text{comb},i}\\,F_{ij}.$$\n- Arrhenius-type temperature dependence for venting onset kinetics: $$\\dot{m}_i = k_0 \\exp\\left(-\\frac{E_a}{R\\,T_i}\\right)\\,H\\!\\left(T_i - T_{\\text{onset}}\\right),$$ where $k_0$ is a pre-exponential factor in $\\mathrm{kg/s}$, $E_a$ is activation energy in $\\mathrm{J/mol}$, $R$ is the universal gas constant ($R=8.314\\ \\mathrm{J\\,mol^{-1}\\,K^{-1}}$), $H(\\cdot)$ is the Heaviside function, and $T_{\\text{onset}}$ is the onset temperature in $\\mathrm{K}$.\n- Internal exothermic decomposition heat generation proportional to venting: $$\\dot{Q}_{\\text{gen},i} = H_{\\text{decomp}}\\;\\dot{m}_i,$$ where $H_{\\text{decomp}}$ is the specific internal decomposition enthalpy release in $\\mathrm{J/kg}$.\n\nModeling details and parameters (use the values exactly as specified):\n- Two cells labeled $A$ and $B$ with equal properties. Effective heat capacity: $C_A=C_B=1000\\ \\mathrm{J/K}$. Emissivity: $\\epsilon=0.8$. Radiating face area: $A_{\\text{face}}=0.02\\ \\mathrm{m^2}$. Ambient temperature: $T_{\\infty}=300\\ \\mathrm{K}$. Convective coefficient for cell $A$: $h_A=15\\ \\mathrm{W\\,m^{-2}\\,K^{-1}}$. Convective coefficient for cell $B$: $h_B$ varies per test case (see below). View factor $F_{AB}=F_{BA}$ varies per test case. Initial temperatures: $T_A(0)=900\\ \\mathrm{K}$, $T_B(0)=300\\ \\mathrm{K}$.\n- Chemical-thermal parameters: combustion efficiency $\\eta=0.9$ (dimensionless), radiative fraction $\\chi=0.35$ (dimensionless), lower heating value $\\text{LHV}=1.5\\times 10^7\\ \\mathrm{J/kg}$, specific decomposition enthalpy $H_{\\text{decomp}}=5.0\\times 10^6\\ \\mathrm{J/kg}$, Arrhenius pre-exponential $k_0=0.5\\ \\mathrm{kg/s}$, activation energy $E_a=6.0\\times 10^4\\ \\mathrm{J/mol}$, onset temperature $T_{\\text{onset}}=420\\ \\mathrm{K}$.\n- Time integration: use explicit forward Euler time stepping with fixed time step $\\Delta t=0.05\\ \\mathrm{s}$ over a horizon $t_{\\text{end}}=300\\ \\mathrm{s}$.\n- Radiative exchanges: surface exchange is net between the cells per Stefan–Boltzmann law; flame radiation from each cell acts only as an external source to the other cell via the view factor as defined above. Do not include flame radiation terms as losses in the source cell’s internal energy budget.\n- Cascade propagation criterion: consider that a cascade has propagated to cell $B$ if both $(T_B \\ge T_{\\text{runaway}})$ and $(\\dot{m}_B \\ge \\dot{m}_{\\text{thr}})$ hold continuously for at least $\\tau_{\\text{sustain}}$ seconds at any time during the simulation. Use $T_{\\text{runaway}}=500\\ \\mathrm{K}$, $\\dot{m}_{\\text{thr}}=1.0\\times 10^{-4}\\ \\mathrm{kg/s}$, and $\\tau_{\\text{sustain}}=2.0\\ \\mathrm{s}$. Express time in seconds, temperature in $\\mathrm{K}$, energy rates in $\\mathrm{W}$, and mass flow in $\\mathrm{kg/s}$.\n\nTasks:\n- Derive from the provided laws the coupled ordinary differential equations for $T_A(t)$ and $T_B(t)$ and implement the explicit Euler integrator to evolve the temperatures and venting rates over time.\n- Implement the cascade detection logic using the specified criterion for cell $B$.\n\nTest suite:\nEvaluate the model for the following four parameter sets, each defined by $(F_{AB}, h_B)$ with all other parameters as above:\n- Case $1$: $(F_{AB}=0.7,\\ h_B=15)$.\n- Case $2$: $(F_{AB}=0.3,\\ h_B=30)$.\n- Case $3$: $(F_{AB}=0.9,\\ h_B=10)$.\n- Case $4$: $(F_{AB}=0.05,\\ h_B=20)$.\n\nRequired final output format:\nYour program should produce a single line of output containing the results as a comma-separated list enclosed in square brackets, where each entry is a boolean indicating whether cascade propagation occurs for the corresponding test case (e.g., $[True,False,True,False]$). All computations must be in International System of Units (SI) and angles, if any appear, must be in radians. No user input is permitted; the program shall be self-contained and print only the specified final line.",
            "solution": "The problem is valid as it is scientifically grounded in the principles of thermodynamics and chemical kinetics, well-posed with a complete set of parameters and initial conditions, and formulated objectively. It presents a standard computational physics problem without any apparent contradictions, ambiguities, or factual unsoundness.\n\nThe solution involves deriving and numerically integrating a system of two coupled ordinary differential equations (ODEs) that model the temperatures of two adjacent battery cells, $A$ and $B$. The derivation is based on the first law of thermodynamics, and the integration is performed using the explicit forward Euler method.\n\n### 1. Derivation of the Governing Equations\n\nThe core of the model is the first law of thermodynamics for a control mass, applied to each cell $i$:\n$$C_i \\frac{d T_i}{d t} = \\dot{Q}_{\\text{in},i} - \\dot{Q}_{\\text{out},i} + \\dot{Q}_{\\text{gen},i}$$\nwhere $i \\in \\{A, B\\}$. We will assemble the heat rate terms for each cell based on the physical laws provided.\n\nThe venting mass flow rate $\\dot{m}_i$ for each cell is a function of its temperature $T_i$:\n$$\\dot{m}_i(T_i) = k_0 \\exp\\left(-\\frac{E_a}{R\\,T_i}\\right)\\,H\\!\\left(T_i - T_{\\text{onset}}\\right)$$\nwhere $H(\\cdot)$ is the Heaviside step function. This evaluates to $0$ if $T_i  T_{\\text{onset}}$.\n\n**Equation for Cell A:**\nThe rate of change of temperature for cell $A$, $\\frac{dT_A}{dt}$, is determined by balancing heat generation, inputs, and losses.\n\n-   **Internal Heat Generation ($\\dot{Q}_{\\text{gen},A}$):** Exothermic decomposition reactions generate heat proportional to the venting rate $\\dot{m}_A$.\n    $$\\dot{Q}_{\\text{gen},A} = H_{\\text{decomp}}\\,\\dot{m}_A(T_A)$$\n-   **Heat Input ($\\dot{Q}_{\\text{in},A}$):** Cell $A$ receives heat from the flame of cell $B$.\n    $$\\dot{Q}_{\\text{in},A} = \\dot{Q}_{\\text{rad},B\\rightarrow A}^{\\text{flame}} = \\chi\\,\\left(\\eta \\,\\text{LHV}\\,\\dot{m}_B(T_B)\\right)\\,F_{BA}$$\n-   **Heat Output ($\\dot{Q}_{\\text{out},A}$):** Cell $A$ loses heat via convection to the ambient environment and net radiative exchange to cell $B$.\n    $$ \\dot{Q}_{\\text{out},A} = \\dot{Q}_{\\text{conv},A} + \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}} $$\n    The convective loss is given by:\n    $$ \\dot{Q}_{\\text{conv},A} = h_A A_{\\text{face}}\\left(T_A - T_{\\infty}\\right) $$\n    The net surface radiative heat transfer from cell $A$ to cell $B$ is:\n    $$ \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}} = \\sigma \\epsilon F_{AB} A_{\\text{face}}\\left(T_A^4 - T_B^4\\right) $$\n\nCombining these terms into the first law, and dividing by the heat capacity $C_A$, we obtain the ODE for $T_A$:\n$$ \\frac{dT_A}{dt} = \\frac{1}{C_A} \\left( H_{\\text{decomp}}\\,\\dot{m}_A(T_A) + \\chi\\,\\eta \\,\\text{LHV}\\,\\dot{m}_B(T_B)\\,F_{BA} - h_A A_{\\text{face}}(T_A - T_{\\infty}) - \\sigma \\epsilon F_{AB} A_{\\text{face}}(T_A^4 - T_B^4) \\right) $$\n\n**Equation for Cell B:**\nThe derivation for cell $B$ is symmetric.\n\n-   **Internal Heat Generation ($\\dot{Q}_{\\text{gen},B}$):**\n    $$\\dot{Q}_{\\text{gen},B} = H_{\\text{decomp}}\\,\\dot{m}_B(T_B)$$\n-   **Heat Input ($\\dot{Q}_{\\text{in},B}$):** Cell $B$ receives heat from the flame of cell $A$ and net surface radiation from cell $A$. The net radiative transfer from $B$ to $A$ is $\\dot{Q}_{\\text{rad},B\\rightarrow A}^{\\text{net}} = \\sigma \\epsilon F_{BA} A_{\\text{face}}(T_B^4 - T_A^4)$. This equals $-\\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}}$. Therefore, the heat received by $B$ from $A$ via surface radiation is $+\\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}}$.\n    $$ \\dot{Q}_{\\text{in},B} = \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{flame}} + \\dot{Q}_{\\text{rad},A\\rightarrow B}^{\\text{net}} = \\chi\\,\\left(\\eta \\,\\text{LHV}\\,\\dot{m}_A(T_A)\\right)\\,F_{AB} + \\sigma \\epsilon F_{AB} A_{\\text{face}}(T_A^4 - T_B^4) $$\n-   **Heat Output ($\\dot{Q}_{\\text{out},B}$):** Cell $B$ loses heat only via convection to the ambient.\n    $$ \\dot{Q}_{\\text{out},B} = h_B A_{\\text{face}}(T_B - T_{\\infty}) $$\n\nCombining these terms for cell $B$ and dividing by $C_B$:\n$$ \\frac{dT_B}{dt} = \\frac{1}{C_B} \\left( H_{\\text{decomp}}\\,\\dot{m}_B(T_B) + \\chi\\,\\eta \\,\\text{LHV}\\,\\dot{m}_A(T_A)\\,F_{AB} - h_B A_{\\text{face}}(T_B - T_{\\infty}) + \\sigma \\epsilon F_{AB} A_{\\text{face}}(T_A^4 - T_B^4) \\right) $$\nGiven that $F_{AB} = F_{BA}$, these two equations form a coupled system for $T_A(t)$ and $T_B(t)$.\n\n### 2. Numerical Integration Scheme\n\nThe system of ODEs is solved numerically using the explicit forward Euler method with a fixed time step $\\Delta t = 0.05\\ \\mathrm{s}$. Given the temperatures $T_A^n$ and $T_B^n$ at time $t_n$, the temperatures at the next time step $t_{n+1} = t_n + \\Delta t$ are computed as:\n$$ T_A^{n+1} = T_A^n + \\Delta t \\cdot \\frac{dT_A}{dt}\\bigg|_{t_n} $$\n$$ T_B^{n+1} = T_B^n + \\Delta t \\cdot \\frac{dT_B}{dt}\\bigg|_{t_n} $$\nThe simulation starts with the initial conditions $T_A(0)=900\\ \\mathrm{K}$ and $T_B(0)=300\\ \\mathrm{K}$ and proceeds for a total duration of $t_{\\text{end}} = 300\\ \\mathrm{s}$.\n\n### 3. Cascade Propagation Criterion\n\nA cascade is considered to have propagated to cell $B$ if its state satisfies two conditions continuously for a minimum duration. The conditions are:\n1.  Temperature exceeds the runaway threshold: $T_B \\ge T_{\\text{runaway}}$, where $T_{\\text{runaway}} = 500\\ \\mathrm{K}$.\n2.  Venting rate exceeds the threshold: $\\dot{m}_B \\ge \\dot{m}_{\\text{thr}}$, where $\\dot{m}_{\\text{thr}}=1.0\\times 10^{-4}\\ \\mathrm{kg/s}$.\n\nThese must hold for a continuous period of at least $\\tau_{\\text{sustain}} = 2.0\\ \\mathrm{s}$.\n\nAlgorithmically, this is implemented by checking the conditions for cell $B$ at the end of each time step. A counter tracks the number of consecutive steps for which the conditions are met. The required number of consecutive steps is $N_{\\text{sustain}} = \\text{ceil}(\\tau_{\\text{sustain}} / \\Delta t) = \\text{ceil}(2.0 / 0.05) = 40$. If the conditions are not met at any step, the counter is reset to zero. If the counter reaches $N_{\\text{sustain}}$, a cascade is registered, and the simulation for that test case can be terminated. If the simulation completes to $t_{\\text{end}}=300\\ \\mathrm{s}$ without the criterion being met, no cascade has occurred.\n\nThe solution program implements this logic for each of the four test cases specified, producing a boolean result indicating whether cascade propagation occurred.",
            "answer": "```python\n# The complete and runnable Python 3 code goes here.\n# Imports must adhere to the specified execution environment.\nimport numpy as np\n\ndef solve():\n    \"\"\"\n    Solves the battery thermal runaway problem for the specified test cases.\n    \"\"\"\n\n    # Define the test cases from the problem statement.\n    test_cases = [\n        (0.7, 15),  # Case 1: (F_AB, h_B)\n        (0.3, 30),  # Case 2\n        (0.9, 10),  # Case 3\n        (0.05, 20), # Case 4\n    ]\n\n    results = []\n    for case in test_cases:\n        F_AB, h_B = case\n        cascade_occurred = run_simulation(F_AB, h_B)\n        results.append(cascade_occurred)\n\n    # Final print statement in the exact required format.\n    print(f\"[{','.join(map(str, results))}]\")\n\ndef run_simulation(F_AB, h_B):\n    \"\"\"\n    Runs a single simulation for a given parameter set (F_AB, h_B).\n\n    Args:\n        F_AB (float): View factor between cells A and B.\n        h_B (float): Convective heat transfer coefficient for cell B.\n\n    Returns:\n        bool: True if cascade propagation occurs, False otherwise.\n    \"\"\"\n    # Constants\n    SIGMA = 5.670374419e-8  # Stefan-Boltzmann constant (W m^-2 K^-4)\n    R = 8.314               # Universal gas constant (J mol^-1 K^-1)\n\n    # Cell parameters\n    C = 1000.0              # Effective heat capacity (J/K)\n    epsilon = 0.8           # Emissivity\n    A_face = 0.02           # Radiating face area (m^2)\n    T_inf = 300.0           # Ambient temperature (K)\n    h_A = 15.0              # Convective coefficient for cell A (W m^-2 K^-1)\n\n    # Chemical-thermal parameters\n    eta = 0.9               # Combustion efficiency\n    LHV = 1.5e7             # Lower heating value (J/kg)\n    chi = 0.35              # Radiative fraction of combustion heat\n    H_decomp = 5.0e6        # Specific internal decomposition enthalpy (J/kg)\n    k0 = 0.5                # Arrhenius pre-exponential factor (kg/s)\n    Ea = 6.0e4              # Activation energy (J/mol)\n    T_onset = 420.0         # Venting onset temperature (K)\n\n    # Time integration parameters\n    dt = 0.05               # Time step (s)\n    t_end = 300.0           # Simulation duration (s)\n\n    # Cascade propagation criterion parameters\n    T_runaway = 500.0       # Runaway temperature threshold (K)\n    m_thr = 1.0e-4          # Mass flow threshold (kg/s)\n    tau_sustain = 2.0       # Sustain duration (s)\n    \n    # Derived from criterion parameters\n    num_sustain_steps = int(tau_sustain / dt)\n\n    # Initial conditions\n    T_A = 900.0\n    T_B = 300.0\n    \n    # State variables for cascade check\n    consecutive_steps_met = 0\n    num_steps = int(t_end / dt)\n\n    for _ in range(num_steps):\n        # Calculate venting rates m_dot at the beginning of the time step\n        m_dot_A = k0 * np.exp(-Ea / (R * T_A)) if T_A >= T_onset else 0.0\n        m_dot_B = k0 * np.exp(-Ea / (R * T_B)) if T_B >= T_onset else 0.0\n\n        # --- Calculate derivatives dT/dt for both cells ---\n\n        # Shared terms\n        F_BA = F_AB \n        \n        # Cell A derivative\n        Q_gen_A = H_decomp * m_dot_A\n        Q_flame_from_B = chi * (eta * LHV * m_dot_B) * F_BA\n        Q_conv_A = h_A * A_face * (T_A - T_inf)\n        Q_rad_net_A_to_B = SIGMA * epsilon * F_AB * A_face * (T_A**4 - T_B**4)\n        dT_A_dt = (Q_gen_A + Q_flame_from_B - Q_conv_A - Q_rad_net_A_to_B) / C\n\n        # Cell B derivative\n        Q_gen_B = H_decomp * m_dot_B\n        Q_flame_from_A = chi * (eta * LHV * m_dot_A) * F_AB\n        Q_conv_B = h_B * A_face * (T_B - T_inf)\n        # Net radiative transfer to B is the negative of net transfer from B.\n        # dT_B/dt includes +Q_rad_net_A_to_B\n        dT_B_dt = (Q_gen_B + Q_flame_from_A - Q_conv_B + Q_rad_net_A_to_B) / C\n\n        # --- Update temperatures using explicit Forward Euler ---\n        T_A += dT_A_dt * dt\n        T_B += dT_B_dt * dt\n\n        # --- Check for cascade propagation in cell B ---\n        # Recalculate m_dot_B with the new T_B to check the state at the end of the step\n        m_dot_B_new = k0 * np.exp(-Ea / (R * T_B)) if T_B >= T_onset else 0.0\n        \n        if T_B >= T_runaway and m_dot_B_new >= m_thr:\n            consecutive_steps_met += 1\n            if consecutive_steps_met >= num_sustain_steps:\n                return True  # Cascade detected, exit simulation for this case\n        else:\n            consecutive_steps_met = 0\n            \n    return False # Simulation finished without cascade\n\nsolve()\n```"
        }
    ]
}
## 引言
黎曼积分是微积分的基石，它为我们计算曲线下面积提供了一个直观而强大的工具。然而，并非所有函数都能通过黎曼积分的方法来求得一个明确的积分值。这就引出了一个核心问题：一个定义在闭区间上的函数，在什么条件下才是“行为良好”从而可积的？简单地依赖直觉或图形是远远不够的，我们需要一个严格的数学判据来界定[黎曼积分](@entry_id:142508)的[适用范围](@entry_id:636189)。本文旨在系统地回答这一问题，为[黎曼可积性](@entry_id:183965)建立一个坚实的理论框架。

在接下来的内容中，我们将从黎曼积分最基本的构造块出发，逐步深入其核心机制。第一部分“原理与机制”将详细介绍分割、[达布和](@entry_id:137075)，并引出黎曼可积的正式定义与关键判据，最终达到深刻的勒贝格判据。第二部分“应用与跨学科联系”将展示这些理论判据如何应用于分析各[类函数](@entry_id:146970)的（非）[可积性](@entry_id:142415)，并揭示其与测度论、计算科学等领域的内在联系。最后，“动手实践”部分将提供具体的练习，帮助读者巩固所学概念。通过这一系列的学习，你将能够精确地判断一个函数是否黎曼可积，并深刻理解其背后的数学原理。

## 原理与机制

在上一章介绍[黎曼积分](@entry_id:142508)的基本概念之后，我们现在深入探讨其存在的严谨判据。一个函数的可积性并非理所当然，它依赖于函数在积分区间上的“行为表现”。本章将系统地阐述[黎曼可积性](@entry_id:183965)的核心原理与机制，从基本构造块（如分割与[达布和](@entry_id:137075)）出发，逐步引导至深刻的勒贝格判据。我们的目标是回答一个根本问题：一个[有界函数](@entry_id:176803)在什么条件下才是黎曼可积的？

### 构造基础：分割、[上和与下和](@entry_id:146229)

黎曼积分的定义建立在对函数图像下方区域面积的逼近之上。这一逼近过程的核心工具是**分割（partition）**。对于一个闭区间 $[a, b]$，它的一个分割 $P$ 是一个有限点集 $\{x_0, x_1, \dots, x_n\}$，满足 $a = x_0  x_1  \dots  x_n = b$。这个分割将 $[a, b]$ 分解为 $n$ 个子区间 $[x_{i-1}, x_i]$，其中 $i=1, \dots, n$。

对于定义在 $[a, b]$ 上的[有界函数](@entry_id:176803) $f$，我们在每个子区间 $[x_{i-1}, x_i]$ 上考察其值的变化范围。我们定义两个关键量：

- 子区间上的**下确界 (infimum)**：$m_i = \inf_{x \in [x_{i-1}, x_i]} f(x)$
- 子区间上的**[上确界](@entry_id:140512) (supremum)**：$M_i = \sup_{x \in [x_{i-1}, x_i]} f(x)$

$m_i$ 和 $M_i$ 分别代表了函数在第 $i$ 个子区间上的“谷底”和“峰顶”。以这些值为高，以子区间长度 $\Delta x_i = x_i - x_{i-1}$ 为宽，我们可以构造两种矩形面积和，它们分别从下方和上方逼近真实的“曲边梯形”面积。

**下和 (Lower Sum)** $L(f, P)$ 定义为：
$$
L(f, P) = \sum_{i=1}^{n} m_i \Delta x_i
$$
它代表了完全包含在函数图像下方的一系列矩形的总面积。

**上和 (Upper Sum)** $U(f, P)$ 定义为：
$$
U(f, P) = \sum_{i=1}^{n} M_i \Delta x_i
$$
它代表了完全覆盖函数图像的一系列矩形的总面积。

显然，对于任意给定的分割 $P$，总有 $L(f, P) \le U(f, P)$。这两个值提供了一个函数积分值的“下界”和“上界”。

让我们通过一个具体的例子来理解这些概念。考虑函数 $f(x) = 4x - x^2$ 在区间 $[0, 4]$ 上，并使用分割 $P = \{0, 1, 3, 4\}$ [@problem_id:2328172]。该分割将 $[0, 4]$ 分为三个子区间：$[0, 1]$, $[1, 3]$ 和 $[3, 4]$。函数 $f(x)$ 是一个开口向下的抛物线，在 $x=2$ 处取得最大值 $f(2)=4$。
- 在 $[0, 1]$ 上，函数单调递增，因此 $m_1 = f(0) = 0$, $M_1 = f(1) = 3$。
- 在 $[1, 3]$ 上，函数包含了顶点 $x=2$，因此 $m_2 = \min(f(1), f(3)) = 3$, $M_2 = f(2) = 4$。
- 在 $[3, 4]$ 上，函数单调递减，因此 $m_3 = f(4) = 0$, $M_3 = f(3) = 3$。

子区间的长度分别为 $\Delta x_1=1$, $\Delta x_2=2$, $\Delta x_3=1$。于是，下和与上和分别为：
$$
L(f, P) = (0)(1) + (3)(2) + (0)(1) = 6
$$
$$
U(f, P) = (3)(1) + (4)(2) + (3)(1) = 14
$$
这个例子清晰地展示了对于一个特定的粗略分割，[上和与下和](@entry_id:146229)之间可能存在显著的差距。

值得注意的是，[上确界](@entry_id:140512) $M_i$ 和[下确界](@entry_id:140118) $m_i$ 对函数在子区间内的局部行为极为敏感。哪怕仅仅改变一个点的值，也可能剧烈地改变上和或下和。例如，考虑函数 $f(x) = x^2$ 在 $[0, 2]$ 上，但在 $x=1$ 处被重新定义为 $f(1) = 5$。我们使用分割 $P = \{0, 1, 2\}$ [@problem_id:1450097]。
- 在子区间 $[0, 1]$ 上，[函数的值域](@entry_id:161901)是 $[0, 1) \cup \{5\}$。因此，[下确界](@entry_id:140118) $m_1=0$，但上确界 $M_1=5$。
- 在子区间 $[1, 2]$ 上，[函数的值域](@entry_id:161901)是 $\{5\} \cup (1, 4]$。因此，[下确界](@entry_id:140118) $m_2=1$，但[上确界](@entry_id:140512) $M_2=5$。

对于这个分割，我们得到 $L(f, P) = 0 \cdot 1 + 1 \cdot 1 = 1$ 和 $U(f, P) = 5 \cdot 1 + 5 \cdot 1 = 10$。仅仅一个点的不连续，就使得[上和与下和](@entry_id:146229)的差距从一个较小的值（对于原始的 $x^2$）急剧扩大。这揭示了不连续点在黎曼积分理论中的核心地位。

### 黎曼积分的正式定义

直观上，如果我们不断地加密分割（即增加分[割点](@entry_id:637448)，使得所有子区间的长度都变小），下和应该会逐渐增大，而上和应该会逐渐减小，两者共同“夹逼”真实的面积。这个过程引出了黎曼积分的正式定义。

当一个分割 $P'$ 是另一个分割 $P$ 的**加细 (refinement)**（即 $P \subseteq P'$）时，可以证明：
$$
L(f, P) \le L(f, P') \le U(f, P') \le U(f, P)
$$
这意味着加细分割会使下和“不减”，上和“不增”，从而缩小二者之间的差距 [@problem_id:2328172]。

基于此，我们定义**下积分 (Lower Integral)** 和**上积分 (Upper Integral)**：
$$
\underline{\int_a^b} f(x) dx = \sup_{P} L(f, P)
$$
$$
\overline{\int_a^b} f(x) dx = \inf_{P} U(f, P)
$$
其中，上确界和下确界是针对区间 $[a, b]$ 的所有可能分割 $P$ 而言的。下积分是所有下和所能达到的最大值，而上积分是所有上和所能达到的最小值。对于任意[有界函数](@entry_id:176803)，总有 $\underline{\int_a^b} f(x) dx \le \overline{\int_a^b} f(x) dx$。

现在，我们可以给出黎曼可积的正式定义：

一个在[闭区间](@entry_id:136474) $[a, b]$ 上的[有界函数](@entry_id:176803) $f$ 被称为是**黎曼可积 (Riemann integrable)** 的，当且仅当它的下积分和上积分相等。若可积，这个共同的值就被定义为 $f$ 在 $[a, b]$ 上的**黎曼积分 (Riemann integral)**，记作：
$$
\int_a^b f(x) dx = \underline{\int_a^b} f(x) dx = \overline{\int_a^b} f(x) dx
$$

### [黎曼判据](@entry_id:142731)：弥合[上和与下和](@entry_id:146229)的差距

上述定义虽然严谨，但在实践中直接计算所有分割的上确界和[下确界](@entry_id:140118)是不可行的。我们需要一个更具操作性的判据。这就是**[黎曼判据](@entry_id:142731) (Riemann Criterion)**：

一个在 $[a, b]$ 上的[有界函数](@entry_id:176803) $f$ 是黎曼可积的，当且仅当对于任意给定的 $\epsilon > 0$，都存在一个分割 $P$，使得：
$$
U(f, P) - L(f, P)  \epsilon
$$

这个判据的本质是，一个函数是可积的，只要我们能通过选择足够精细的分割，使得[上和与下和](@entry_id:146229)之间的差值可以被控制得任意小。如果这个条件成立，那么上积分与下积分之间的差 $0 \le \overline{\int} f - \underline{\int} f \le U(f, P) - L(f, P)  \epsilon$。由于 $\epsilon$ 可以是任意正数，这必然意味着[上积分和下积分](@entry_id:196080)相等。反之，如果上下积分相等，也能构造出满足条件的分割。

这个判据也有一种等价的极限形式。如果我们考虑一系列分割 $\{P_n\}$，其**网格尺寸 (mesh)** $|P_n| = \max_i \Delta x_i$ 趋向于零，那么只要 $\lim_{n \to \infty} [U(P_n, f) - L(P_n, f)] = 0$，函数 $f$ 就是黎曼可积的 [@problem_id:1450083]。

### 判据的应用：从连续到不连续

[黎曼判据](@entry_id:142731)的威力在于它能帮助我们判断各[类函数](@entry_id:146970)的行为。

#### 行为良好的函数

对于**[连续函数](@entry_id:137361) (continuous functions)**，它们在任何闭区间上都是黎曼可积的。这是因为[连续函数](@entry_id:137361)在闭区间上具有**[一致连续性](@entry_id:140948) (uniform continuity)**，即对于给定的 $\epsilon > 0$，存在一个 $\delta > 0$，只要子区间长度小于 $\delta$，该子区间上函数值的[振荡](@entry_id:267781) $M_i - m_i$ 就能小于 $\epsilon / (b-a)$。这样，总的差值 $U(P,f) - L(P,f) = \sum (M_i - m_i)\Delta x_i  \frac{\epsilon}{b-a} \sum \Delta x_i = \epsilon$。

**[单调函数](@entry_id:145115) (monotonic functions)** 也是一类行为良好的函数。例如，对于 $[0, 1]$ 上的增函数 $f(x) = \sqrt{x}$，如果我们采用一个均匀分割 $P_N$（即将区间分为 $N$ 个等长的子区间，长度为 $1/N$），那么在每个子区间 $[x_{k-1}, x_k]$ 上，$m_k = f(x_{k-1})$ 且 $M_k = f(x_k)$。此时，[上和与下和](@entry_id:146229)的差值有一个非常简洁的形式 [@problem_id:1450122]：
$$
U(P_N, f) - L(P_N, f) = \sum_{k=1}^N (f(x_k) - f(x_{k-1})) \Delta x = \frac{1}{N} \sum_{k=1}^N (f(x_k) - f(x_{k-1}))
$$
这是一个伸缩求和（telescoping sum），其结果为 $\frac{1}{N}(f(x_N) - f(x_0)) = \frac{1}{N}(f(1) - f(0)) = \frac{1}{N}$。要使这个差值小于给定的 $\epsilon$（例如 $0.008$），我们只需选择 $N > 1/\epsilon$（即 $N > 125$）。这证明了我们可以轻易地满足[黎曼判据](@entry_id:142731)。

#### 具有有限不连续点的函数

如果一个函数仅仅在有限个点上不连续，它仍然是黎曼可积的。[黎曼判据](@entry_id:142731)为我们提供了理解其原因的工具。假设一个[有界函数](@entry_id:176803) $|f(t)| \le 5$ 在 $[0, 1]$ 上有 $N=4$ 个不连续点 [@problem_id:1450103]。

我们的策略是构造一个特殊的分割来“隔离”这些不连续点。对于给定的 $\epsilon > 0$，我们可以将每个不连续点都包含在一个极小的、互不重叠的子区间内。假设每个这样的子区间宽度为 $w$。在这些子区间内，函数值的[振荡](@entry_id:267781) $M_i - m_i$ 最多为 $5 - (-5) = 10$。因此，这 $N=4$ 个子区间对 $U(f,P)-L(f,P)$ 的总贡献至多为 $N \cdot 10 \cdot w$。我们可以通过选择足够小的 $w$ (例如，令 $10Nw \le \epsilon/2$)，使得这部分贡献小于 $\epsilon/2$。

在剩下的区间部分，函数 $f$ 是连续的。我们可以通过对这些部分进行足够精细的分割，利用其[一致连续性](@entry_id:140948)，使得它们对 $U(f,P)-L(f,P)$ 的贡献也小于 $\epsilon/2$。将两部分合起来，总差值就小于 $\epsilon$。这个论证表明，有限个“坏点”的影响可以通[过积分](@entry_id:753033)过程被无限地压缩，从而不影响[可积性](@entry_id:142415)。

#### [病态函数](@entry_id:142184)：处处不连续

与此形成鲜明对比的是像**[狄利克雷函数](@entry_id:140770) (Dirichlet function)** 这样的“病态”函数。考虑在 $[0, \pi]$ 上的函数，当 $x$ 是有理数时 $f(x)=5$，当 $x$ 是无理数时 $f(x)=2$ [@problem_id:1450121]（或在 $[0, 2]$ 上，值分别为 $7$ 和 $3$ [@problem_id:1450110]）。

由于[有理数和无理数](@entry_id:173349)在[实数轴](@entry_id:147286)上都是稠密的，任何长度大于零的子区间 $[x_{i-1}, x_i]$ 都必然同时包含[有理数和无理数](@entry_id:173349)。因此，对于任意分割 $P$ 的任意子区间，我们总是有：
$$
m_i = 2 \quad \text{和} \quad M_i = 5
$$
这导致[上和与下和](@entry_id:146229)对于任何分割都是固定的：
$$
L(f, P) = \sum_{i=1}^n 2 \Delta x_i = 2(x_n - x_0) = 2\pi
$$
$$
U(f, P) = \sum_{i=1}^n 5 \Delta x_i = 5(x_n - x_0) = 5\pi
$$
因此，下积分是 $2\pi$，而上积分是 $5\pi$。它们不相等，差值为 $3\pi$，远大于零。无论分割多么精细，$U(f,P) - L(f,P)$ 永远等于 $3\pi$，[黎曼判据](@entry_id:142731)永远无法满足。这个函数是黎曼不可积的。

### 勒贝格判据：一个更深刻的视角

我们已经看到，函数的可积性与其不连续点的“数量”和“[分布](@entry_id:182848)”密切相关。有限个不连续点不成问题，而像有理数集那样稠密的不连续点则导致不可积。这引出了一个更深刻的问题：判断[可积性](@entry_id:142415)的精确[分界线](@entry_id:175112)在哪里？答案由**勒贝格判据 (Lebesgue Criterion for Riemann Integrability)** 给出。

为此，我们需要引入**零测集 (set of measure zero)** 的概念。直观上，一个集合是[零测集](@entry_id:157694)，如果它可以被一列（可数个）区间的集合所覆盖，而这些区间的总长度可以做到任意小。
- 任何有限点集都是零测集。
- 任何可数集（如所有有理数 $\mathbb{Q}$）都是零测集。
- 令人惊讶的是，存在不可数的[零测集](@entry_id:157694)，最著名的例子是**康托三分集 (ternary Cantor set)** [@problem_id:1335078]。

**勒贝格判据**：一个在 $[a, b]$ 上的[有界函数](@entry_id:176803) $f$ 是黎曼可积的，当且仅当其所有不连续点构成的集合是一个零测集。

这个强大的判据统一并解释了我们之前所有的观察：
1.  **[连续函数](@entry_id:137361)**：[不连续点集](@entry_id:160308)合是[空集](@entry_id:261946) $\emptyset$，其[测度为零](@entry_id:137864)。故可积。
2.  **有限不连续点**：[不连续点集](@entry_id:160308)合是[有限集](@entry_id:145527)，其[测度为零](@entry_id:137864)。故可积 [@problem_id:1450103]。
3.  **康托集上的不连续**：如果一个函数的[不连续点集](@entry_id:160308)是康托集的[子集](@entry_id:261956)，由于康托集是零测集，该[不连续点集](@entry_id:160308)的测度也必为零。因此，即使函数在不可数个点上不连续，只要它有界，它仍然是黎曼可积的 [@problem_id:1335078]。
4.  **[狄利克雷函数](@entry_id:140770)**：它在定义域的每一点上都不连续。其[不连续点集](@entry_id:160308)是整个区间 $[a,b]$，其[勒贝格测度](@entry_id:139781)为 $b-a > 0$。因此，它不是黎曼可积的 [@problem_id:1450121]。
5.  **正测度不[连续集](@entry_id:186725)**：更一般地，如果一个函数的[不连续点集](@entry_id:160308)是一个具有正测度的集合（例如通过构造一个“[胖康托集](@entry_id:141922)”得到 [@problem_id:1335055]），那么该函数的[上积分和下积分](@entry_id:196080)就不会相等，从而函数是不可积的。

勒贝格判据为我们提供了一个精准的工具，将黎曼积分的适用范围与测度论的现代概念联系起来。它告诉我们，黎曼积分能够“容忍”不连续点，但前提是这些不连续点在测度意义下是“稀疏”的。

### 一个基本前提：有界性

最后，必须强调，以上所有关于[黎曼可积性](@entry_id:183965)的讨论，无论是[黎曼判据](@entry_id:142731)还是勒贝格判据，都有一个共同的、不可或缺的前提：**函数必须在积分区间上有界 (bounded)**。

如果函数无界，黎曼积分的整个框架从一开始就无法建立。考虑函数 $f(x) = 1/x$ 在区间 $(0, 1]$ 上，并假设我们在 $x=0$ 处为其赋任意值 $f(0)=c$ [@problem_id:1450092]。对于任何包含原点的分割，第一个子区间为 $[0, x_1]$。在此子区间上，$f(x)$ 的值可以任意大，即 $\sup_{x \in [0, x_1]} f(x) = +\infty$。

这意味着对于任何分割 $P$，其上和 $U(f, P)$ 都是无穷大。因此，不可能找到一个分割使得 $U(f,P) - L(f,P)$ 小于任何给定的 $\epsilon$。所以，无界性是[黎曼可积性](@entry_id:183965)的一个根本障碍，在检验任何其他判据之前，必须首先确认函数是有界的。
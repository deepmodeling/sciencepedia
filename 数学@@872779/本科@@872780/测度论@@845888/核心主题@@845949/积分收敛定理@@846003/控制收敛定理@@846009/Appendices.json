{"hands_on_practices": [{"introduction": "我们从一个概率论和金融领域的直观应用开始。这个练习模拟了一个带有“熔断机制”的交易系统，并探讨了当风险控制阈值逐渐放宽时，预期收益会发生什么变化。通过这个例子，你可以看到控制收敛定理如何为我们的直觉——即随着限制的解除，截断变量的期望会收敛到真实期望——提供了严格的数学证明。[@problem_id:1397182]", "problem": "在一个量化金融模型中，一个交易算法的每日利润被建模为一个随机变量 $X$，定义在一个概率空间 $(\\Omega, \\mathcal{F}, P)$ 上。该算法被认为是稳定的，并且其预期的每日绝对利润已知是有限的，数学上表示为 $E[|X|]  \\infty$。\n\n为了减轻极端损失或收益，实施了一种称为“熔断机制”的风险管理系统。对于任意选择的正整数阈值 $n$，系统按如下方式记录每日利润：\n- 如果实际利润的绝对值 $|X|$ 小于或等于阈值 $n$，记录的利润就是实际利润 $X$。\n- 如果实际利润的绝对值 $|X|$ 超过阈值 $n$，则当天交易暂停，记录的利润设为 $0$。\n\n设 $Y_n$ 是当阈值设为 $n$ 时表示记录的每日利润的随机变量。我们感兴趣的是当这个风险管理约束放宽时，预期记录利润的行为。\n\n确定极限 $\\lim_{n \\to \\infty} E[Y_n]$ 的值。用 $X$ 的期望表示你的答案。", "solution": "问题要求解当 $n \\to \\infty$ 时，随机变量序列 $Y_n$ 的期望的极限。让我们首先形式化 $Y_n$ 的定义，然后分析其性质以求出极限。\n\n首先，我们根据描述用数学方式表达随机变量 $Y_n$。$Y_n$ 的值取决于 $X$ 的值。\n根据熔断机制的规则：\n$$\nY_n = \\begin{cases} X  \\text{若 } |X| \\le n \\\\ 0  \\text{若 } |X| > n \\end{cases}\n$$\n这可以用指示函数更紧凑地写出。设 $\\mathbf{1}_{\\{|X| \\le n\\}}$ 为事件“$X$ 的绝对值小于或等于 $n$”的指示函数。那么，$Y_n$可以表示为：\n$$\nY_n = X \\cdot \\mathbf{1}_{\\{|X| \\le n\\}}\n$$\n\n接下来，我们要计算 $\\lim_{n \\to \\infty} E[Y_n]$。为了计算这个极限，我们可以研究控制收敛定理 (DCT) 的适用性，该定理允许在特定条件下交换极限和期望。DCT 的条件是：\n1.  随机变量序列 $Y_n$ 必须逐点（或几乎处处）收敛到一个随机变量 $Y$。\n2.  必须存在一个可积的随机变量 $Z$（即 $E[|Z|]  \\infty$），它控制着该序列，即对所有 $n$ 都有 $|Y_n| \\le Z$。\n\n让我们检查第一个条件：逐点收敛。我们考虑对于任意固定的结果 $\\omega \\in \\Omega$，$Y_n(\\omega)$ 当 $n \\to \\infty$ 时的极限。设 $x = X(\\omega)$ 是随机变量 $X$ 在此结果下的值。因为 $x$ 是一个有限的实数，我们总能找到一个足够大的正整数 $N$，使得 $|x| \\le N$。对于任意 $n \\ge N$，条件 $|X(\\omega)| \\le n$ 都将成立。根据 $Y_n$ 的定义，这意味着对于所有 $n \\ge N$，$Y_n(\\omega) = X(\\omega)$。因此，当 $n \\to \\infty$ 时，值序列 $Y_n(\\omega)$ 收敛到 $X(\\omega)$。因为这对任意 $\\omega$ 都成立，我们有逐点收敛：\n$$\n\\lim_{n \\to \\infty} Y_n = X\n$$\n\n现在，让我们检查第二个条件：控制。我们需要找到一个可积的随机变量 $Z$，它对所有的 $n$ 都能界定 $|Y_n|$。让我们考察 $Y_n$ 的大小：\n$$\n|Y_n| = |X \\cdot \\mathbf{1}_{\\{|X| \\le n\\}}| = |X| \\cdot |\\mathbf{1}_{\\{|X| \\le n\\}}|\n$$\n指示函数 $\\mathbf{1}_{\\{|X| \\le n\\}}$ 只能取值 0 或 1。因此，它的绝对值总是小于或等于 1。这导致不等式：\n$$\n|Y_n| = |X| \\cdot \\mathbf{1}_{\\{|X| \\le n\\}} \\le |X| \\cdot 1 = |X|\n$$\n这个不等式对所有 $n$ 都成立。所以，我们可以选择我们的控制随机变量为 $Z = |X|$。问题陈述中给出，预期的每日绝对利润是有限的，这正是条件 $E[|X|]  \\infty$。因此，我们的控制随机变量 $Z = |X|$ 是可积的。\n\n控制收敛定理的两个条件都满足了。我们现在可以应用该定理来交换极限和期望：\n$$\n\\lim_{n \\to \\infty} E[Y_n] = E\\left[\\lim_{n \\to \\infty} Y_n\\right]\n$$\n使用我们关于 $Y_n$ 的逐点极限的结果：\n$$\n\\lim_{n \\to \\infty} E[Y_n] = E[X]\n$$\n因此，当熔断机制的阈值放宽到无穷大时，预期的记录利润收敛到交易算法的真实预期利润。", "answer": "$$\\boxed{E[X]}$$", "id": "1397182"}, {"introduction": "接下来，我们来看一个更经典的分析学问题，这类问题在没有控制收敛定理的情况下可能非常棘手。这个练习要求计算一个积分的极限，其中被积函数本身包含一个趋于无穷的参数 $n$。通过构建一个合适的控制函数，我们可以应用控制收敛定理，将极限与积分符号互换，从而将一个复杂的问题转化为一个标准的不定积分计算。[@problem_id:1450533]", "problem": "考虑定义在区间 $[0, \\infty)$ 上的实值函数序列 $\\{f_n\\}_{n=1}^\\infty$，其公式为：\n$$ f_n(x) = \\frac{n \\sin(x/n)}{1+x^3} $$\n你的任务是计算以下极限的值：\n$$ \\lim_{n \\to \\infty} \\int_0^\\infty f_n(x) \\, dx $$\n请以单个闭式解析表达式的形式给出极限的精确值。", "solution": "我们分析被积函数的逐点极限，并通过控制收敛定理来证明极限与积分可以交换顺序。\n\n对于每个固定的 $x \\ge 0$，\n$$\n\\lim_{n \\to \\infty} n \\sin\\!\\left(\\frac{x}{n}\\right) = x,\n$$\n因为当 $y \\to 0$ 时，$\\sin y \\sim y$。因此，\n$$\n\\lim_{n \\to \\infty} f_{n}(x) = \\lim_{n \\to \\infty} \\frac{n \\sin(x/n)}{1+x^{3}} = \\frac{x}{1+x^{3}} \\eqqcolon f(x).\n$$\n为了证明可以将极限移入积分号内，我们使用不等式 $|\\sin y| \\leq |y|$，这可以得到\n$$\n|f_{n}(x)| = \\left|\\frac{n \\sin(x/n)}{1+x^{3}}\\right| \\leq \\frac{x}{1+x^{3}} \\coloneqq g(x).\n$$\n我们证明 $g$ 在 $[0,\\infty)$ 上是可积的。事实上，\n$$\n\\int_{0}^{1} g(x)\\,dx \\leq \\int_{0}^{1} x\\,dx = \\frac{1}{2}, \\quad \\int_{1}^{\\infty} g(x)\\,dx \\leq \\int_{1}^{\\infty} \\frac{x}{x^{3}}\\,dx = \\int_{1}^{\\infty} \\frac{dx}{x^{2}} = 1.\n$$\n因此 $g \\in L^{1}([0,\\infty))$，根据控制收敛定理，\n$$\n\\lim_{n \\to \\infty} \\int_{0}^{\\infty} f_{n}(x)\\,dx = \\int_{0}^{\\infty} \\lim_{n \\to \\infty} f_{n}(x)\\,dx = \\int_{0}^{\\infty} \\frac{x}{1+x^{3}}\\,dx.\n$$\n\n我们现在计算 $I \\coloneqq \\int_{0}^{\\infty} \\frac{x}{1+x^{3}}\\,dx$。使用 $1+x^{3}=(x+1)(x^{2}-x+1)$ 进行部分分式分解：\n$$\n\\frac{x}{1+x^{3}} = \\frac{Ax+B}{x^{2}-x+1} + \\frac{C}{x+1}.\n$$\n求解 $A,B,C$ 可得 $A=\\frac{1}{3}$，$B=\\frac{1}{3}$，$C=-\\frac{1}{3}$，因此\n$$\n\\frac{x}{1+x^{3}} = \\frac{1}{3}\\,\\frac{x+1}{x^{2}-x+1} - \\frac{1}{3}\\,\\frac{1}{x+1}.\n$$\n逐项积分。对于第一项，将 $x^{2}-x+1$ 写作 $(x-\\frac{1}{2})^{2}+\\frac{3}{4}$ 并分解\n$$\n\\int \\frac{x+1}{x^{2}-x+1}\\,dx = \\frac{1}{2}\\int \\frac{2x-1}{x^{2}-x+1}\\,dx + \\frac{3}{2}\\int \\frac{dx}{x^{2}-x+1}.\n$$\n这得到\n$$\n\\int \\frac{x+1}{x^{2}-x+1}\\,dx = \\frac{1}{2}\\ln(x^{2}-x+1) + \\sqrt{3}\\,\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right) + C.\n$$\n另外，\n$$\n\\int \\frac{dx}{x+1} = \\ln(x+1) + C.\n$$\n因此，$\\frac{x}{1+x^{3}}$ 的一个原函数是\n$$\nF(x) = \\frac{1}{3}\\left[\\frac{1}{2}\\ln(x^{2}-x+1) + \\sqrt{3}\\,\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right)\\right] - \\frac{1}{3}\\ln(x+1),\n$$\n即\n$$\nF(x) = \\frac{1}{6}\\ln(x^{2}-x+1) - \\frac{1}{3}\\ln(x+1) + \\frac{\\sqrt{3}}{3}\\,\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right).\n$$\n计算从 $0$ 到 $\\infty$ 的值。当 $x \\to \\infty$ 时，对数项的组合满足\n$$\n\\frac{1}{6}\\ln(x^{2}-x+1) - \\frac{1}{3}\\ln(x+1) = \\frac{1}{6}\\ln\\!\\left(\\frac{x^{2}-x+1}{(x+1)^{2}}\\right) \\to \\frac{1}{6}\\ln(1)=0,\n$$\n并且 $\\arctan\\!\\left(\\frac{2x-1}{\\sqrt{3}}\\right) \\to \\frac{\\pi}{2}$，所以\n$$\n\\lim_{x \\to \\infty} F(x) = \\frac{\\sqrt{3}}{3}\\cdot \\frac{\\pi}{2} = \\frac{\\sqrt{3}\\,\\pi}{6}.\n$$\n在 $x=0$ 处，\n$$\nF(0) = \\frac{1}{6}\\ln(1) - \\frac{1}{3}\\ln(1) + \\frac{\\sqrt{3}}{3}\\,\\arctan\\!\\left(-\\frac{1}{\\sqrt{3}}\\right) = -\\frac{\\sqrt{3}}{3}\\cdot \\frac{\\pi}{6} = -\\frac{\\sqrt{3}\\,\\pi}{18}.\n$$\n因此\n$$\nI = F(\\infty) - F(0) = \\frac{\\sqrt{3}\\,\\pi}{6} - \\left(-\\frac{\\sqrt{3}\\,\\pi}{18}\\right) = \\frac{3\\sqrt{3}\\,\\pi + \\sqrt{3}\\,\\pi}{18} = \\frac{4\\sqrt{3}\\,\\pi}{18} = \\frac{2\\sqrt{3}\\,\\pi}{9}.\n$$\n\n因此，\n$$\n\\lim_{n \\to \\infty} \\int_{0}^{\\infty} \\frac{n \\sin(x/n)}{1+x^{3}}\\,dx = \\int_{0}^{\\infty} \\frac{x}{1+x^{3}}\\,dx = \\frac{2\\pi}{3\\sqrt{3}}.\n$$", "answer": "$$\\boxed{\\frac{2\\pi}{3\\sqrt{3}}}$$", "id": "1450533"}, {"introduction": "最后一个练习旨在挑战你对控制收敛定理适用范围的理解，并突显其相较于黎曼积分框架的优越性。在这个问题中，被积函数序列的逐点极限函数是不连续的，这在黎曼积分下会带来麻烦。然而，这个练习恰好证明了勒贝格积分和控制收敛定理的强大之处：只要存在可积的控制函数，即使极限函数“性态不佳”，我们依然可以交换极限与积分的顺序。[@problem_id:2322463]", "problem": "考虑在区间 $[0, \\infty)$ 上定义的实值函数序列 $f_n(x)$，其中 $n \\in \\{1, 2, 3, \\dots\\}$，其表达式为\n$$ f_n(x) = \\frac{\\arctan(x)}{1+x^n} $$\n计算当 $n$ 趋于无穷时，此函数序列积分的极限。也就是说，求下列表达式的值：\n$$ \\lim_{n \\to \\infty} \\int_0^\\infty \\frac{\\arctan(x)}{1+x^n} \\, dx $$\n请将您的答案表示为单个闭式解析表达式。", "solution": "我们分析 $f_{n}(x)=\\frac{\\arctan(x)}{1+x^{n}}$ 在 $[0,\\infty)$ 上的逐点极限。该极限函数 $f(x) = \\lim_{n \\to \\infty} f_n(x)$ 是分段定义的：\n$$\nf(x) = \\begin{cases}\n\\arctan(x),  \\text{若 } 0 \\le x  1 \\\\\n\\frac{\\pi}{8},  \\text{若 } x=1 \\\\\n0,  \\text{若 } x > 1\n\\end{cases}\n$$\n为了证明可以交换极限与积分的顺序，我们为 $n \\ge 2$ 构造一个可积的控制函数 $g(x)$。\n对于 $x \\in [0, 1)$，我们有 $|f_n(x)| = \\frac{\\arctan(x)}{1+x^n} \\le \\arctan(x) \\le x$。\n对于 $x \\ge 1$ 且 $n \\ge 2$，我们有 $1+x^n \\ge x^2$，因此 $|f_n(x)| = \\frac{\\arctan(x)}{1+x^n} \\le \\frac{\\arctan(x)}{x^2} \\le \\frac{\\pi/2}{x^2}$。\n\n因此，我们可以定义一个控制函数 $g(x)$ 如下：\n$$\ng(x) = \\begin{cases}\nx,  \\text{若 } 0 \\le x  1 \\\\\n\\frac{\\pi/2}{x^2},  \\text{若 } x \\ge 1\n\\end{cases}\n$$\n该函数在 $[0, \\infty)$ 上是可积的，因为\n$$\n\\int_0^\\infty g(x) \\,dx = \\int_0^1 x \\,dx + \\int_1^\\infty \\frac{\\pi/2}{x^2} \\,dx = \\frac{1}{2} + \\left[-\\frac{\\pi/2}{x}\\right]_1^\\infty = \\frac{1}{2} + \\frac{\\pi}{2}  \\infty.\n$$\n由于我们找到了一个可积的控制函数 $g(x)$，根据控制收敛定理，我们可以交换极限和积分：\n$$\n\\lim_{n\\to\\infty} \\int_0^\\infty f_n(x) \\,dx = \\int_0^\\infty f(x) \\,dx.\n$$\n由于勒贝格积分忽略了零测集（如单个点），极限积分的值为\n$$\n\\int_0^\\infty f(x) \\,dx = \\int_0^1 \\arctan(x) \\,dx.\n$$\n我们使用分部积分法计算这个定积分，令 $u = \\arctan(x)$ 且 $dv = dx$。于是 $du = \\frac{1}{1+x^2}dx$ 且 $v=x$。\n$$\n\\int \\arctan(x) \\,dx = x \\arctan(x) - \\int \\frac{x}{1+x^2} \\,dx = x \\arctan(x) - \\frac{1}{2} \\ln(1+x^2).\n$$\n计算定积分：\n$$\n\\int_0^1 \\arctan(x) \\,dx = \\left[x \\arctan(x) - \\frac{1}{2} \\ln(1+x^2)\\right]_0^1 = \\left(1 \\cdot \\arctan(1) - \\frac{1}{2} \\ln(2)\\right) - \\left(0 - \\frac{1}{2}\\ln(1)\\right) = \\frac{\\pi}{4} - \\frac{1}{2}\\ln 2.\n$$\n因此，极限的值为 $\\frac{\\pi}{4}-\\frac{1}{2}\\ln 2$。", "answer": "$$\\boxed{\\frac{\\pi}{4}-\\frac{1}{2}\\ln 2}$$", "id": "2322463"}]}
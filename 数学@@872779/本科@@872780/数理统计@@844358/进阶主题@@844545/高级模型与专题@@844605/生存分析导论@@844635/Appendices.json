{"hands_on_practices": [{"introduction": "我们的第一个实践将建立生存分析的核心概念——风险函数——与一个关键的汇总统计量——平均失效时间之间的基本联系。通过考虑最简单的情况，即恒定的风险率，我们可以从第一性原理推导出潜在的寿命分布及其期望值。这个练习将为理解更复杂的模型打下坚实的基础。[@problem_id:1925053]", "problem": "在可靠性工程中，理解部件寿命的一个关键概念是风险率函数，记为 $h(t)$。该函数描述了在给定部件存活至时间 $t$ 的条件下，在时间 $t$ 的瞬时失效率。一类特殊的部件表现出恒定的风险率，这意味着它们的失效可能性不依赖于其使用年限。这种“无记忆性”是某些电子部件在稳定工作条件下的典型特征。\n\n考虑一个关键的数据存储设备，其失效时间 $T$（以年为单位）由一个连续概率分布建模。已经确定，该设备具有恒定的风险率 $h(t) = h_0$，适用于所有 $t \\geq 0$，其中 $h_0$ 是一个单位为年分之一的正数常量。风险率函数 $h(t)$、概率密度函数 $f(t)$ 和生存函数 $S(t) = P(T  t)$ 之间的关系由 $h(t) = \\frac{f(t)}{S(t)}$ 给出。\n\n确定该设备的平均失效时间 (MTTF)，其定义为失效时间的期望值 $E[T]$。将您的最终答案表示为关于恒定风险率 $h_0$ 的符号表达式。", "solution": "给定一个连续寿命分布，其风险率为常数 $h(t)=h_{0}$，适用于所有 $t\\geq 0$，其中 $h_{0}0$。风险率函数、密度函数和生存函数满足 $h(t)=\\frac{f(t)}{S(t)}$，并且根据生存函数的定义，$S(t)=P(Tt)$ 且有 $S'(t)=-f(t)$，因为 $S(t)=\\int_{t}^{\\infty}f(u)\\,du$。\n\n结合这些关系，\n$$\nh(t)=\\frac{f(t)}{S(t)}=\\frac{-S'(t)}{S(t)}=-\\frac{d}{dt}\\ln S(t).\n$$\n对于恒定风险率 $h(t)=h_{0}$，这给出了微分方程\n$$\n-\\frac{d}{dt}\\ln S(t)=h_{0}\\quad\\Rightarrow\\quad \\frac{d}{dt}\\ln S(t)=-h_{0}.\n$$\n对 $t$ 积分，\n$$\n\\ln S(t)=-h_{0}t+C.\n$$\n使用初始条件 $S(0)=1$（一个部件在时间 $0$ 时肯定是存活的），我们得到 $C=0$。因此\n$$\nS(t)=\\exp(-h_{0}t).\n$$\n那么密度函数为 $f(t)=h(t)S(t)=h_{0}\\exp(-h_{0}t)$，适用于 $t\\geq 0$。\n\n平均失效时间 (MTTF) 为 $E[T]=\\int_{0}^{\\infty} t f(t)\\,dt$。代入 $f(t)$，\n$$\nE[T]=\\int_{0}^{\\infty} t\\,h_{0}\\exp(-h_{0}t)\\,dt=h_{0}\\int_{0}^{\\infty} t\\,\\exp(-h_{0}t)\\,dt.\n$$\n通过分部积分法计算该积分。令 $u=t$ 则 $du=dt$，令 $dv=\\exp(-h_{0}t)\\,dt$ 则 $v=-\\exp(-h_{0}t)/h_{0}$。那么\n$$\n\\int_{0}^{\\infty} t\\,\\exp(-h_{0}t)\\,dt=\\left.-\\frac{t}{h_{0}}\\exp(-h_{0}t)\\right|_{0}^{\\infty}+\\int_{0}^{\\infty}\\frac{1}{h_{0}}\\exp(-h_{0}t)\\,dt.\n$$\n边界项为零，剩下的积分计算结果为\n$$\n\\int_{0}^{\\infty}\\frac{1}{h_{0}}\\exp(-h_{0}t)\\,dt=\\frac{1}{h_{0}}\\left.\\left(-\\frac{1}{h_{0}}\\exp(-h_{0}t)\\right)\\right|_{0}^{\\infty}=\\frac{1}{h_{0}^{2}}.\n$$\n因此，\n$$\nE[T]=h_{0}\\cdot\\frac{1}{h_{0}^{2}}=\\frac{1}{h_{0}}.\n$$", "answer": "$$\\boxed{\\frac{1}{h_{0}}}$$", "id": "1925053"}, {"introduction": "现实世界中的生存数据通常是不完整的，因为在研究结束时，某些研究对象的关注事件尚未发生，这种情况称为“删失”。本练习介绍 Kaplan-Meier 估计量，这是一种强大的非参数工具，可以直接从此类数据中估计生存函数。掌握这种方法对于分析大多数实际生存数据集至关重要。[@problem_id:1925090]", "problem": "一个工程师团队正在对一款新型号的企业级固态硬盘（SSD）进行可靠性研究。将一批10个相同的SSD在高强度工作负载下进行连续运行。该研究记录了每个硬盘发生故障前的时间（以小时为单位）。一些硬盘因其他原因在发生故障前被移出研究；这些被视为“删失”观测值。\n\n实验的完整数据集如下，其中，时间后带有 `+` 表示一个删失观测值（即硬盘在被移出研究时仍在正常工作），而不带 `+` 的时间表示一次故障。\n\n时间（小时）：1500, 2800, 3200, 3500+, 4100, 4800, 5300, 5500+, 6000, 6200+\n\n使用非参数方法分析此事件发生时间数据，计算一个已经存活了3000小时的SSD能够存活超过5000小时的估计概率。将最终答案四舍五入到三位有效数字。", "solution": "我们使用 Kaplan–Meier（乘积极限）估计量。令 $t_{i}$ 表示排好序的不同故障时间，$n_{i}$ 表示在 $t_{i}$ 时刻之前处于风险中的数量，$d_{i}$ 表示在 $t_{i}$ 时刻的故障数量。该估计量为\n$$\n\\hat{S}(t)=\\prod_{t_{i}\\leq t}\\left(1-\\frac{d_{i}}{n_{i}}\\right)=\\prod_{t_{i}\\leq t}\\frac{n_{i}-d_{i}}{n_{i}}.\n$$\n删失观测值会减少故障时间之间的风险集数量，但不会直接改变乘积。\n\n将数据排序并标注故障（F）和删失（C）：\n$$\n1500\\ \\text{F},\\ 2800\\ \\text{F},\\ 3200\\ \\text{F},\\ 3500\\ \\text{C},\\ 4100\\ \\text{F},\\ 4800\\ \\text{F},\\ 5300\\ \\text{F},\\ 5500\\ \\text{C},\\ 6000\\ \\text{F},\\ 6200\\ \\text{C}.\n$$\n开始时有10个处于风险中：\n- 在 $1500$ (F) 时：$n=10$, $d=1$，因子为 $9/10$；事件后风险数量为 $9$。\n- 在 $2800$ (F) 时：$n=9$, $d=1$，因子为 $8/9$；事件后风险数量为 $8$。\n- 在 $3200$ (F) 时：$n=8$, $d=1$，因子为 $7/8$；事件后风险数量为 $7$。\n- 在 $3500$ (C) 时：风险数量变为 $6$（无因子）。\n- 在 $4100$ (F) 时：$n=6$, $d=1$，因子为 $5/6$；事件后风险数量为 $5$。\n- 在 $4800$ (F) 时：$n=5$, $d=1$，因子为 $4/5$；事件后风险数量为 $4$。\n- 在 $5300$ (F) 时：$n=4$, $d=1$，因子为 $3/4$；事件后风险数量为 $3$。\n- 在 $5500$ (C) 时：风险数量变为 $2$（无因子）。\n- 在 $6000$ (F) 时：$n=2$, $d=1$，因子为 $\\frac{1}{2}$。\n\n计算在两个条件点上的 Kaplan–Meier 生存概率。\n\n对于 $t=3000$（在 $2800$ 和 $3200$ 之间），包括在 $1500$ 和 $2800$ 发生的故障：\n$$\n\\hat{S}(3000)=\\left(\\frac{9}{10}\\right)\\left(\\frac{8}{9}\\right)=\\frac{8}{10}=\\frac{4}{5}.\n$$\n对于 $t=5000$（在 $4800$ 和 $5300$ 之间），包括在 $1500,2800,3200,4100,4800$ 发生的故障：\n$$\n\\hat{S}(5000)=\\left(\\frac{9}{10}\\right)\\left(\\frac{8}{9}\\right)\\left(\\frac{7}{8}\\right)\\left(\\frac{5}{6}\\right)\\left(\\frac{4}{5}\\right)\n=\\frac{7}{15}.\n$$\n所求的条件概率是\n$$\n\\mathbb{P}(T5000\\mid T3000)=\\frac{\\hat{S}(5000)}{\\hat{S}(3000)}=\\frac{\\frac{7}{15}}{\\frac{4}{5}}=\\frac{7}{12}.\n$$\n四舍五入到三位有效数字，结果为 $0.583$。", "answer": "$$\\boxed{0.583}$$", "id": "1925090"}, {"introduction": "虽然非参数方法很灵活，但如果参数模型的假设得到满足，它们（如韦伯分布或瑞利分布）可以提供更深刻的见解。本练习演示了如何使用最大似然法从包含删失观测的数据中估计模型参数。该技术是现代统计推断的基石，对于拟合和解释参数生存模型至关重要。[@problem_id:1925111]", "problem": "对一种新型电子元件进行可靠性研究。总共有 $n$ 个元件被投入寿命测试。对于每个元件 $i$（其中 $i = 1, \\dots, n$），观测值由一对 $(t_i, \\delta_i)$ 组成。这里，$t_i$ 是以小时为单位的观测时间。事件指示符 $\\delta_i$ 定义为：如果元件在时间 $t_i$ 失效，则 $\\delta_i = 1$；如果当研究终止时，元件在时间 $t_i$ 仍然正常工作（一个右删失观测），则 $\\delta_i = 0$。\n\n假设元件的寿命 $T$ 服从瑞利分布（Rayleigh distribution），其概率密度函数（PDF）由下式给出\n$$f(t; \\sigma) = \\frac{t}{\\sigma^2} \\exp\\left(-\\frac{t^2}{2\\sigma^2}\\right)$$\n对于 $t  0$ 和参数 $\\sigma  0$。\n\n基于 $n$ 个观测值的集合 $\\{ (t_i, \\delta_i) \\}_{i=1}^n$，确定参数 $\\sigma^2$ 的最大似然估计（Maximum Likelihood Estimator, MLE）。你的答案应该是一个用观测数据 $t_i$ 和 $\\delta_i$ 表示的解析表达式。", "solution": "对于右删失寿命数据，在具有密度函数 $f(t;\\sigma)$ 和生存函数 $S(t;\\sigma)$ 的参数模型下，似然函数为\n$$\nL(\\sigma)=\\prod_{i=1}^{n}\\left[f(t_{i};\\sigma)\\right]^{\\delta_{i}}\\left[S(t_{i};\\sigma)\\right]^{1-\\delta_{i}}.\n$$\n对于瑞利模型，其概率密度函数为\n$$\nf(t;\\sigma)=\\frac{t}{\\sigma^{2}}\\exp\\!\\left(-\\frac{t^{2}}{2\\sigma^{2}}\\right),\\quad t0,\n$$\n生存函数为\n$$\nS(t;\\sigma)=\\exp\\!\\left(-\\frac{t^{2}}{2\\sigma^{2}}\\right),\n$$\n因为 $\\frac{\\mathrm{d}}{\\mathrm{d}t}\\left[-\\exp\\!\\left(-\\frac{t^{2}}{2\\sigma^{2}}\\right)\\right]=\\frac{t}{\\sigma^{2}}\\exp\\!\\left(-\\frac{t^{2}}{2\\sigma^{2}}\\right)=f(t;\\sigma)$。\n\n因此，似然函数变为\n$$\nL(\\sigma)=\\prod_{i=1}^{n}\\left(\\frac{t_{i}}{\\sigma^{2}}\\exp\\!\\left(-\\frac{t_{i}^{2}}{2\\sigma^{2}}\\right)\\right)^{\\delta_{i}}\\left(\\exp\\!\\left(-\\frac{t_{i}^{2}}{2\\sigma^{2}}\\right)\\right)^{1-\\delta_{i}}\n=\\left(\\prod_{i=1}^{n}t_{i}^{\\delta_{i}}\\right)\\sigma^{-2\\sum_{i=1}^{n}\\delta_{i}}\\exp\\!\\left(-\\frac{1}{2\\sigma^{2}}\\sum_{i=1}^{n}t_{i}^{2}\\right).\n$$\n令 $\\theta=\\sigma^{2}$，并记 $d=\\sum_{i=1}^{n}\\delta_{i}$ 和 $S_{2}=\\sum_{i=1}^{n}t_{i}^{2}$。作为 $\\theta$ 的函数的对数似然函数是\n$$\n\\ell(\\theta)=-d\\ln\\theta+\\sum_{i=1}^{n}\\delta_{i}\\ln t_{i}-\\frac{S_{2}}{2\\theta}.\n$$\n求导并令其等于零，\n$$\n\\frac{\\partial\\ell}{\\partial\\theta}=-\\frac{d}{\\theta}+\\frac{S_{2}}{2\\theta^{2}}=0\n\\;\\;\\Longrightarrow\\;\\; -d\\theta+\\frac{S_{2}}{2}=0\n\\;\\;\\Longrightarrow\\;\\; \\hat{\\theta}=\\frac{S_{2}}{2d}=\\frac{\\sum_{i=1}^{n}t_{i}^{2}}{2\\sum_{i=1}^{n}\\delta_{i}}.\n$$\n二阶导数是\n$$\n\\frac{\\partial^{2}\\ell}{\\partial\\theta^{2}}=\\frac{d}{\\theta^{2}}-\\frac{S_{2}}{\\theta^{3}},\n$$\n当 $d0$ 时，其在 $\\hat{\\theta}$ 处的值等于 $-\\frac{d}{\\hat{\\theta}^{2}}0$，这证实了它是一个极大值。如果 $d=0$，则似然函数在 $\\theta$ 上非递减，不存在有限的最大似然估计。因此，对于至少一次观测到的失效，$\\sigma^{2}$ 的最大似然估计为\n$$\n\\hat{\\sigma}^{2}=\\frac{\\sum_{i=1}^{n}t_{i}^{2}}{2\\sum_{i=1}^{n}\\delta_{i}}.\n$$", "answer": "$$\\boxed{\\frac{\\sum_{i=1}^{n} t_{i}^{2}}{2 \\sum_{i=1}^{n} \\delta_{i}}}$$", "id": "1925111"}]}
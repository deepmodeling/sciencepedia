{"hands_on_practices": [{"introduction": "掌握欧拉函数 $\\varphi(n)$ 的定义，是理解既约剩余系的第一步。本练习将通过一个具体数字 $n=840$ 来实践这个概念，你将使用容斥原理从第一性原理出发计算 $\\varphi(n)$ 的值，而不是简单地套用公式。此外，本练习还将引导你利用中国剩余定理的结构性思想，来明确地构造一个既约剩余系。[@problem_id:3083422]", "problem": "设 $n=840$。模 $n$ 的一个完全剩余系是一个包含 $n$ 个整数的集合，其中每个整数都来自模 $n$ 的一个同余类。模 $n$ 的一个既约剩余系是一个包含 $\\varphi(n)$ 个整数的集合，其中每个整数都来自一个与 $n$ 互质的模 $n$ 同余类，而 $\\varphi(n)$ 是欧拉phi函数，定义为满足 $1 \\leq k \\leq n$ 且 $\\gcd(k,n)=1$ 的整数 $k$ 的个数。从这些定义和标准计数原理出发，完成以下任务：\n- 纯粹根据定义确定 $\\varphi(840)$ 的值，并从第一性原理证明你的计数过程，而不是直接引用欧拉函数的封闭公式。\n- 通过给出一个具体的、有限的规范，明确地构造一个模 $840$ 的既约剩余系，该规范能精确生成所有与 $840$ 互质的模 $840$ 同余类，并解释为什么你的构造能产生两两不同余且都与 $840$ 互质的代表元。\n\n作为你的最终答案，只报告 $\\varphi(840)$ 的值，形式为一个整数。最终答案中不要包含任何列表。", "solution": "要从第一性原理计算 $\\varphi(840)$，我们首先需要找到 $840$ 的质因数分解。\n$840 = 84 \\times 10 = (4 \\times 21) \\times (2 \\times 5) = (2^2 \\times 3 \\times 7) \\times (2 \\times 5) = 2^3 \\times 3 \\times 5 \\times 7$。\n$840$ 的不同质因数是 $2, 3, 5, 7$。\n\n根据定义，$\\varphi(840)$ 是小于或等于 $840$ 且与 $840$ 互质的正整数的个数。一个数与 $840$ 互质，当且仅当它不能被 $2, 3, 5, 7$ 中的任何一个整除。我们可以使用容斥原理，从总数 $840$ 中减去至少能被这些质数之一整除的数的数量。\n\n令 $S=\\{1, 2, \\dots, 840\\}$。令 $A_p$ 表示 $S$ 中能被质数 $p$ 整除的数的集合。我们需要计算：\n$|S| - |A_2 \\cup A_3 \\cup A_5 \\cup A_7|$\n\n根据容斥原理：\n$|A_2 \\cup A_3 \\cup A_5 \\cup A_7| = \\sum |A_p| - \\sum |A_p \\cap A_q| + \\sum |A_p \\cap A_q \\cap A_r| - |A_2 \\cap A_3 \\cap A_5 \\cap A_7|$\n\n各项的大小计算如下：\n- 单项：$|A_2|=840/2=420$, $|A_3|=840/3=280$, $|A_5|=840/5=168$, $|A_7|=840/7=120$。\n  $\\sum |A_p| = 420+280+168+120 = 988$。\n- 两两交集：$|A_6|=140$, $|A_{10}|=84$, $|A_{14}|=60$, $|A_{15}|=56$, $|A_{21}|=40$, $|A_{35}|=24$。\n  $\\sum |A_p \\cap A_q| = 140+84+60+56+40+24 = 404$。\n- 三三交集：$|A_{30}|=28$, $|A_{42}|=20$, $|A_{70}|=12$, $|A_{105}|=8$。\n  $\\sum |A_p \\cap A_q \\cap A_r| = 28+20+12+8 = 68$。\n- 四项交集：$|A_{210}|=4$。\n\n因此，与 $840$ 不互质的数的总数是 $988 - 404 + 68 - 4 = 648$。\n所以，$\\varphi(840) = 840 - 648 = 192$。\n\n另一种等价的第一性原理方法是直接使用容斥原理的乘法形式：\n$\\varphi(840) = 840 \\times (1 - \\frac{1}{2}) \\times (1 - \\frac{1}{3}) \\times (1 - \\frac{1}{5}) \\times (1 - \\frac{1}{7})$\n$= 840 \\times \\frac{1}{2} \\times \\frac{2}{3} \\times \\frac{4}{5} \\times \\frac{6}{7} = 192$。\n\n对于第二部分，构造一个模 $840$ 的既约剩余系。由于 $840 = 2^3 \\times 3 \\times 5 \\times 7$，根据中国剩余定理，模 $840$ 的一个既约剩余系可以通过组合其质因数幂模下的既约剩余系来构造。\n一个整数 $r$ 与 $840$ 互质，当且仅当它满足以下同余方程组：\n$r \\equiv r_1 \\pmod{8}$\n$r \\equiv r_2 \\pmod{3}$\n$r \\equiv r_3 \\pmod{5}$\n$r \\equiv r_4 \\pmod{7}$\n其中 $r_1$ 来自模 $8$ 的既约剩余系 $\\{1, 3, 5, 7\\}$， $r_2$ 来自模 $3$ 的既约剩余系 $\\{1, 2\\}$，$r_3$ 来自模 $5$ 的既约剩余系 $\\{1, 2, 3, 4\\}$，$r_4$ 来自模 $7$ 的既约剩余系 $\\{1, 2, 3, 4, 5, 6\\}$。\n遍历所有 $4 \\times 2 \\times 4 \\times 6 = 192$ 种组合，每个组合都通过中国剩余定理产生一个唯一的模 $840$ 的解。这些解的集合就构成了一个完整的模 $840$ 的既约剩余系。这个规范精确地生成了所有与 $840$ 互质的同余类，且代表元两两不同余。\n\n最终答案只要求报告 $\\varphi(840)$ 的值。", "answer": "$$\\boxed{192}$$", "id": "3083422"}, {"introduction": "在上一个具体计算的基础上，我们现在将问题推广到一般情况。本练习旨在引导你推导出计算欧拉函数 $\\varphi(n)$ 的通用公式。通过首先分析素数幂情况下的 $\\varphi(p^k)$，然后证明其积性性质，你将深刻理解为何该公式有效，并看到剩余系的结构与该公式之间的内在联系。[@problem_id:3083419]", "problem": "设 $a$、$b$ 和 $c$ 为正整数，且 $n=2^{a}3^{b}5^{c}$。仅从欧拉函数 $\\varphi(n)$ 的定义（即计数满足 $1 \\leq r \\leq n$ 且 $\\gcd(r,n)=1$ 的整数 $r$ 的数量）以及模 $n$ 的简化剩余系的定义（即任意一个由 $\\varphi(n)$ 个模 $n$ 两两不同余且均与 $n$ 互质的余数组成的集合）出发，完成以下任务：\n\n1. 明确地用 $a$、$b$ 和 $c$ 表示出 $\\varphi(n)$。你的推导应从基本原理出发，例如使用对素数幂的计数论证和整数模互质模数的结构性质，并且不得预先假设任何关于 $\\varphi$ 的现成公式。\n\n2. 利用你的结果和模素数幂的可逆剩余类的结构描述，写出一个模 $n$ 的显式简化剩余系。\n\n为评分需要，请将你的最终答案报告为 $\\varphi(n)$ 关于 $a$、$b$ 和 $c$ 的单个封闭形式表达式。不需要数值近似。", "solution": "本题要求从第一性原理推导当 $n=2^{a}3^{b}5^{c}$ 时欧拉函数 $\\varphi(n)$ 的表达式。推导过程分为三步：1) 计算素数幂 $p^k$ 的欧拉函数值 $\\varphi(p^k)$；2) 证明 $\\varphi$ 是积性函数；3) 结合前两步求出 $\\varphi(n)$。\n\n**第一步：计算 $\\varphi(p^k)$**\n设 $p$ 为素数，$k$ 为正整数。根据定义，$\\varphi(p^k)$ 是在集合 $\\{1, 2, \\ldots, p^k\\}$ 中与 $p^k$ 互质的整数的个数。一个整数 $r$ 与 $p^k$ 互质当且仅当 $r$ 不是 $p$ 的倍数。\n在该范围内，$p$ 的倍数有 $1 \\cdot p, 2 \\cdot p, \\ldots, p^{k-1} \\cdot p$，共计 $p^{k-1}$ 个。\n因此，与 $p^k$ 互质的整数数量为总数减去不互质的数量：\n$$ \\varphi(p^k) = p^k - p^{k-1} = p^k \\left(1 - \\frac{1}{p}\\right) $$\n\n**第二步：证明 $\\varphi(n)$ 的积性**\n我们需要证明，若 $\\gcd(m_1, m_2) = 1$，则 $\\varphi(m_1 m_2) = \\varphi(m_1)\\varphi(m_2)$。\n根据中国剩余定理，当 $\\gcd(m_1, m_2) = 1$ 时，存在一个环同构：\n$$ \\mathbb{Z}/m_1 m_2\\mathbb{Z} \\cong \\mathbb{Z}/m_1\\mathbb{Z} \\times \\mathbb{Z}/m_2\\mathbb{Z} $$\n一个整数 $x$ 与乘积 $m_1 m_2$ 互质，当且仅当它同时与 $m_1$ 和 $m_2$ 互质。这意味着环中的一个元素在模 $m_1 m_2$ 下可逆，当且仅当它在模 $m_1$ 和模 $m_2$ 下均可逆。\n因此，上述环同构限制在单位群上会诱导一个群同构：\n$$ (\\mathbb{Z}/m_1 m_2\\mathbb{Z})^\\times \\cong (\\mathbb{Z}/m_1\\mathbb{Z})^\\times \\times (\\mathbb{Z}/m_2\\mathbb{Z})^\\times $$\n比较两边群的阶（元素个数），我们得到：\n$$ |(\\mathbb{Z}/m_1 m_2\\mathbb{Z})^\\times| = |(\\mathbb{Z}/m_1\\mathbb{Z})^\\times| \\cdot |(\\mathbb{Z}/m_2\\mathbb{Z})^\\times| $$\n这正是 $\\varphi(m_1 m_2) = \\varphi(m_1)\\varphi(m_2)$。\n\n**第三步：计算 $\\varphi(2^a 3^b 5^c)$**\n由于 $2^a, 3^b, 5^c$ 两两互质，我们可以应用积性：\n$$ \\varphi(n) = \\varphi(2^a 3^b 5^c) = \\varphi(2^a) \\varphi(3^b) \\varphi(5^c) $$\n使用第一步的公式：\n- $\\varphi(2^a) = 2^a - 2^{a-1} = 2^{a-1}(2-1) = 2^{a-1}$\n- $\\varphi(3^b) = 3^b - 3^{b-1} = 3^{b-1}(3-1) = 2 \\cdot 3^{b-1}$\n- $\\varphi(5^c) = 5^c - 5^{c-1} = 5^{c-1}(5-1) = 4 \\cdot 5^{c-1} = 2^2 \\cdot 5^{c-1}$\n将它们相乘：\n$$ \\varphi(n) = (2^{a-1}) \\cdot (2 \\cdot 3^{b-1}) \\cdot (2^2 \\cdot 5^{c-1}) $$\n合并 $2$ 的幂次：\n$$ \\varphi(n) = 2^{(a-1)+1+2} \\cdot 3^{b-1} \\cdot 5^{c-1} = 2^{a+2} \\cdot 3^{b-1} \\cdot 5^{c-1} $$\n\n关于问题的第二部分，模 $n$ 的一个既约剩余系可以通过中国剩余定理构造。该集合由所有同余方程组的唯一解 $r$ 组成：\n$$ r \\equiv r_1 \\pmod{2^a} $$\n$$ r \\equiv r_2 \\pmod{3^b} $$\n$$ r \\equiv r_3 \\pmod{5^c} $$\n其中 $r_1, r_2, r_3$ 分别取自模 $2^a, 3^b, 5^c$ 的既约剩余系。\n\n最终需要报告的答案是 $\\varphi(n)$ 的封闭形式表达式。", "answer": "$$\\boxed{2^{a+2} 3^{b-1} 5^{c-1}}$$", "id": "3083419"}, {"introduction": "既约剩余系不仅是一个数的集合，它在模乘法下构成一个重要的数学结构——群。本练习将这一抽象概念变得具体可感。你将通过在一个特定的既约剩余系（模 $21$）中追踪一个“单位元”的乘法操作所引发的置换，来亲手揭示其动态的结构特性，并计算这个置换的轮换分解。[@problem_id:3083425]", "problem": "设 $n$ 为一个正整数，模 $n$ 的单位（unit）是指一个整数 $u$ 满足 $\\gcd(u,n)=1$，其中 $\\gcd$ 表示最大公约数（Greatest Common Divisor, GCD）。模 $n$ 的既约剩余系（reduced residue system）是与 $n$ 互质的剩余类的一个完全代表集，恰好包含 $\\varphi(n)$ 个元素，其中 $\\varphi$ 是欧拉函数。考虑映射 $f:\\mathbb{Z}\\to\\mathbb{Z}$，定义为 $f(a)\\equiv ua\\pmod{n}$，及其在模 $n$ 的既约剩余系上的限制。由于 $u$ 是一个单位，该限制在既约剩余系上导出一个置换。\n\n在模 $n=21$ 和固定单位 $u=10$ 的条件下进行计算。从第一性原理出发，完成以下任务：\n- 明确地构造一个模 $21$ 的既约剩余系，按升序排列。\n- 使用导出置换的定义，对既约剩余系中的每个元素 $a$ 计算 $f(a)\\equiv 10a\\pmod{21}$，并写出所得到的置换。\n- 通过追踪迭代 $a, f(a), f^{2}(a),\\dots$ 直到它们回到 $a$，对每个尚未分配到轮换中的 $a$，计算此置换的分解为不相交轮换的形式。\n- 最后，确定该置换的符号（即，它是偶置换还是奇置换），偶置换表示为 $1$，奇置换表示为 $-1$。\n\n你的最终答案必须是一个单独的数字，要么是 $1$，要么是 $-1$，以精确形式写出。不需要四舍五入。", "solution": "我们从定义开始。模 $n$ 的既约剩余系是与 $n$ 互质的各不同剩余类的代表组成的任意集合。这些剩余类的数量由欧拉函数 $\\varphi(n)$ 给出。如果 $u$ 是模 $n$ 的一个单位，即 $\\gcd(u,n)=1$，那么乘以 $u$ 会在该集合上导出一个置换，因为映射 $a\\mapsto ua\\pmod{n}$ 是双射的：它有逆映射 $a\\mapsto u^{-1}a\\pmod{n}$，其中根据单位的定义，$u^{-1}$ 在模 $n$ 意义下存在。\n\n我们在 $n=21$ 和 $u=10$ 的条件下进行计算。首先，我们构造一个模 $21$ 的既约剩余系。在 $1$ 到 $21$ 之间与 $21$ 互质的整数是那些不能被 $3$ 或 $7$ 整除的数。按升序排列它们，我们得到\n$$\n\\{1,2,4,5,8,10,11,13,16,17,19,20\\}。\n$$\n共有 $12$ 个元素，这与 $\\varphi(21)=\\varphi(3)\\varphi(7)=2\\cdot 6=12$ 一致。\n\n接下来，我们构造由模 $21$ 乘以 $u=10$ 导出的置换。对既约剩余系中的每个 $a$，计算 $f(a)\\equiv 10a\\pmod{21}$：\n- $f(1)\\equiv 10\\pmod{21}$，所以 $1\\mapsto 10$。\n- $f(10)\\equiv 100\\equiv 100-84\\equiv 16\\pmod{21}$，所以 $10\\mapsto 16$。\n- $f(16)\\equiv 160\\equiv 160-147\\equiv 13\\pmod{21}$，所以 $16\\mapsto 13$。\n- $f(13)\\equiv 130\\equiv 130-126\\equiv 4\\pmod{21}$，所以 $13\\mapsto 4$。\n- $f(4)\\equiv 40\\equiv 40-21\\equiv 19\\pmod{21}$，所以 $4\\mapsto 19$。\n- $f(19)\\equiv 190\\equiv 190-189\\equiv 1\\pmod{21}$，所以 $19\\mapsto 1$。\n\n这完成了一个从 $1$ 开始的轮换：\n$$\n(1,10,16,13,4,19).\n$$\n我们继续用尚未包含的最小元素 $2$：\n- $f(2)\\equiv 20\\pmod{21}$，所以 $2\\mapsto 20$。\n- $f(20)\\equiv 200\\equiv 200-189\\equiv 11\\pmod{21}$，所以 $20\\mapsto 11$。\n- $f(11)\\equiv 110\\equiv 110-105\\equiv 5\\pmod{21}$，所以 $11\\mapsto 5$。\n- $f(5)\\equiv 50\\equiv 50-42\\equiv 8\\pmod{21}$，所以 $5\\mapsto 8$。\n- $f(8)\\equiv 80\\equiv 80-63\\equiv 17\\pmod{21}$，所以 $8\\mapsto 17$。\n- $f(17)\\equiv 170\\equiv 170-168\\equiv 2\\pmod{21}$，所以 $17\\mapsto 2$。\n\n这完成了第二个轮换：\n$$\n(2,20,11,5,8,17).\n$$\n现在所有 $12$ 个元素都已被这两个不相交的轮换覆盖，因此由 $a\\mapsto 10a\\pmod{21}$ 在模 $21$ 的既约剩余系上导出的置换的轮换分解为\n$$\n(1,10,16,13,4,19)\\,(2,20,11,5,8,17).\n$$\n\n我们现在确定该置换的符号。置换理论中的一个基本事实是，一个长度为 $\\ell$ 的轮换可以写成 $\\ell-1$ 个对换的乘积，因此其符号为 $(-1)^{\\ell-1}$。由于不相交的轮换相乘是独立的，不相交轮换乘积的符号是它们各自符号的乘积。在我们的例子中，两个轮换的长度都是 $\\ell=6$，因此每个轮换的符号都是 $(-1)^{6-1}=(-1)^{5}=-1$。因此，总符号为\n$$\n(-1)\\cdot(-1)=1.\n$$\n等价地，由于该置换作用于 $\\varphi(21)=12$ 个元素上，并且有 $2$ 个轮换，其符号为 $(-1)^{12-2}=(-1)^{10}=1$，与上述计算一致。因此，该置换是偶置换，所要求的最终数值为 $1$。", "answer": "$$\\boxed{1}$$", "id": "3083425"}]}
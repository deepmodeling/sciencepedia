{"hands_on_practices": [{"introduction": "这个练习将帮助你掌握指示随机变量的一个基本但非常重要的应用。我们将探讨如何为一个“至少有一个”类型的事件定义指示变量，这类事件直接计算其概率可能很复杂。通过计算其补集事件（“一个也没有”）的概率，我们可以轻松地求得指示变量的期望值，从而解决整个问题。[@problem_id:1365977]", "problem": "一个深空探测器向地球传输数据。数据被组织成数据包，每个数据包可以表示为一个 $n \\times m$ 的比特矩阵。探测器正在传输一个本应是全零块的信号，但由于宇宙射线的干扰，矩阵中的每个比特以概率 $p$ 独立地从 0 翻转为 1。地球上的一个数据完整性协议会标记接收到的矩阵中任何包含至少一个值为 '1' 的比特的行，以进行进一步检查。在单个 $n \\times m$ 的数据包中，被标记的行的期望数量是多少？请用 $n$、$m$ 和 $p$ 的函数表示你的答案。", "solution": "设矩阵有 $n$ 行和 $m$ 列，每个比特独立地以概率 $p$ 为 $1$，以概率 $1-p$ 为 $0$。如果某一行包含至少一个 $1$，则该行被标记。\n\n对于固定的一行，定义事件 $A$ 为该行被标记（包含至少一个 $1$）。其对立事件是该行所有 $m$ 个比特都为 $0$。根据行内比特的独立性，一行中所有 $m$ 个比特都为 $0$ 的概率是\n$$\nP(\\text{all zeros in a row})=(1-p)^{m}.\n$$\n因此，该行被标记的概率是\n$$\nP(A)=1-(1-p)^{m}.\n$$\n\n设 $X_{i}$ 为第 $i$ 行被标记事件的指示随机变量，即如果第 $i$ 行被标记，则 $X_{i}=1$，否则 $X_{i}=0$。被标记的总行数是\n$$\nX=\\sum_{i=1}^{n} X_{i}.\n$$\n根据期望的线性性，\n$$\nE[X]=\\sum_{i=1}^{n} E[X_{i}]=\\sum_{i=1}^{n} P(A)=n\\left(1-(1-p)^{m}\\right).\n$$\n因此，在单个 $n \\times m$ 数据包中，被标记的行的期望数量是 $n\\left(1-(1-p)^{m}\\right)$。", "answer": "$$\\boxed{n\\left(1-(1-p)^{m}\\right)}$$", "id": "1365977"}, {"introduction": "这个问题，通常被称为“帽子存放问题”的变体，展示了指示随机变量和期望线性性的惊人威力。解决这个问题将得出一个非常简洁且出人意料的常数结果。这个练习的关键在于理解期望的线性性（即 $E[\\sum X_i] = \\sum E[X_i]$）即使在各随机变量 $X_i$ 相互不独立的情况下依然成立，这是一个非常强大且实用的性质。[@problem_id:1366013]", "problem": "在一个大规模数据中心，一个错误的批处理脚本试图迁移用户数据。该系统包含 $n$ 个不同的用户账户，标记为 $A_1, A_2, \\dots, A_n$，以及 $n$ 个对应的用户数据配置文件，标记为 $P_1, P_2, \\dots, P_n$。最初，对于所有的 $i=1, \\dots, n$，账户 $A_i$ 都正确地与其配置文件 $P_i$ 相关联。然而，这个错误的脚本破坏了所有现有的关联，并创建了一组新的随机配对。新的映射是一个完美的一一对应关系，其中每个用户账户随机地与一个且仅一个用户数据配置文件配对，每个配置文件也只分配给一个且仅一个账户。所有可能的一一配对都是等可能的。\n\n确定在脚本运行后，仍然与其原始数据配置文件正确关联的用户账户的期望数量。用户账户的数量 $n$ 是一个大于或等于1的正整数。请以单个数值的形式给出您的答案。", "solution": "将随机重新分配建模为集合 $\\{1,2,\\dots,n\\}$ 上的一个均匀随机排列 $\\sigma$，其中 $\\sigma(i)=j$ 表示账户 $A_i$ 与配置文件 $P_j$ 配对。与其原始配置文件正确关联的账户数量是 $\\sigma$ 的不动点的数量。\n\n对于 $i \\in \\{1,\\dots,n\\}$，定义指示变量 $X_i$ 如下\n$$\nX_i=\\begin{cases}\n1,  \\text{如果 } \\sigma(i)=i,\\\\\n0,  \\text{否则。}\n\\end{cases}\n$$\n令 $X=\\sum_{i=1}^{n} X_i$ 表示不动点的总数。根据期望的线性性，\n$$\nE[X]=\\sum_{i=1}^{n} E[X_i].\n$$\n对于每个 $i$，由于 $\\sigma$ 是在所有 $n!$ 个排列上均匀随机的，固定 $i$ 的排列数量为 $(n-1)!$，所以\n$$\nP(\\sigma(i)=i)=\\frac{(n-1)!}{n!}=\\frac{1}{n}.\n$$\n因为 $X_i$ 是一个指示变量，\n$$\nE[X_i]=P(X_i=1)=P(\\sigma(i)=i)=\\frac{1}{n}.\n$$\n因此，\n$$\nE[X]=\\sum_{i=1}^{n} \\frac{1}{n}=1.\n$$\n因此，对于任何整数 $n\\geq 1$，保持正确关联的账户的期望数量是 $1$。", "answer": "$$\\boxed{1}$$", "id": "1366013"}, {"introduction": "在这个更具挑战性的练习中，我们将指示随机变量的应用从简单的位置或项目扩展到更复杂的组合对象。你将学习如何为排列中的“循环”定义指示变量。解决这个问题需要将指示变量的逻辑与组合计数技巧相结合，它将向你展示该方法在解决高级组合概率问题时的优雅和高效。[@problem_id:1365981]", "problem": "在一所大型大学宿舍里，有 $n$ 名学生，每人都被分配了一个从1到$n$编号的唯一邮箱。一天，一次错误的邮件投递导致每位学生的单封信件被放入了 $n$ 个邮箱中的一个，每个邮箱正好收到一封信。信件到邮箱的分配是完全随机的，这意味着 $n$ 封信件的 $n!$ 种可能排列中的每一种都是等可能的。\n\n一个“长度为 $k$ 的投递循环”被定义为一个由 $k$ 个不同学生组成的序列，记为 $s_1, s_2, \\dots, s_k$，使得学生 $s_1$ 的信在学生 $s_2$ 的邮箱里，学生 $s_2$ 的信在学生 $s_3$ 的邮箱里，以此类推，学生 $s_{k-1}$ 的信在学生 $s_k$ 的邮箱里，最后，学生 $s_k$ 的信回到了学生 $s_1$ 的邮箱里。\n\n对于满足 $n \\ge k \\ge 1$ 的任意整数 $n$ 和 $k$，求长度恰好为 $k$ 的不同投递循环的期望数量。将你的答案表示为关于 $n$ 和/或 $k$ 的解析表达式。", "solution": "设信件到邮箱的随机分配可以用 $n$ 个学生的均匀随机置换来建模。定义 $X_{k}$ 为此置换中长度恰好为 $k$ 的投递循环的数量。我们的目标是计算 $E[X_{k}]$。\n\n考虑 $n$ 个学生上的所有不同 $k$-循环的集合，其中循环在循环旋转下是等价的（即，如同在置换的不相交循环分解中）。这种 $k$-循环的数量是\n$$\nN_{k}=\\binom{n}{k}(k-1)!,\n$$\n因为我们首先选择 $k$ 个学生，然后将他们排成一个循环，其中 $k$ 个线性排序对应于同一个循环，对于一个固定的 $k$ 元集，得到 $(k-1)!$ 个不同的循环。\n\n对于每个特定的 $k$-循环 $C$，定义指示变量 $I_{C}$，如果 $C$ 作为置换中的一个循环出现，则其值为 $1$，否则为 $0$。那么\n$$\nX_{k}=\\sum_{C} I_{C},\n$$\n其中求和遍历所有 $N_{k}$ 个不同的 $k$-循环。根据期望的线性性，\n$$\nE[X_{k}]=\\sum_{C}E[I_{C}]=\\sum_{C}P(I_{C}=1).\n$$\n\n对于任意固定的 $k$-循环 $C$，包含 $C$（其中 $k$ 个元素完全按照 $C$ 中的方式排列）的置换数量等于 $(n-k)!$，因为剩下的 $n-k$ 个元素可以任意排列。由于总的置换数量是 $n!$，我们有\n$$\nP(I_{C}=1)=\\frac{(n-k)!}{n!}.\n$$\n因此，\n$$\nE[X_{k}]=N_{k}\\cdot\\frac{(n-k)!}{n!}\n=\\binom{n}{k}(k-1)!\\cdot\\frac{(n-k)!}{n!}.\n$$\n使用 $\\binom{n}{k}=\\frac{n!}{k!(n-k)!}$，我们简化得到：\n$$\nE[X_{k}]\n=\\frac{n!}{k!(n-k)!}\\cdot (k-1)!\\cdot \\frac{(n-k)!}{n!}\n=\\frac{1}{k}.\n$$\n这对于所有满足 $n\\ge k\\ge 1$ 的整数 $n$ 和 $k$ 都成立。", "answer": "$$\\boxed{\\frac{1}{k}}$$", "id": "1365981"}]}
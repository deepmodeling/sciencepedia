{"hands_on_practices": [{"introduction": "条件方差衡量的是在获得部分信息后，一个随机变量剩余的不确定性。这个练习将带你通过一个离散的例子，直接应用条件方差的定义。通过计算在一个特定子集（质数）上的方差，你将掌握在已知事件发生时，如何调整期望和方差的计算方法，这是理解条件概率核心思想的基础。[@problem_id:1351953]", "problem": "设 $X$ 是一个随机变量，表示从集合 $S = \\{1, 2, 3, \\dots, 30\\}$ 中均匀随机选取的一个整数。设 $A$ 为所选整数 $X$ 是一个素数的事件。\n\n计算在事件 $A$ 发生的条件下 $X$ 的方差。将最终答案表示为最简精确分数。", "solution": "设 $X$ 在 $S=\\{1,2,\\dots,30\\}$ 上均匀分布，设 $A$ 为 $X$ 是素数的事件。$S$ 中的素数有\n$$\n\\{2,3,5,7,11,13,17,19,23,29\\},\n$$\n所以 $|A|=10$，并且在 $A$ 的条件下，$X$ 在这个集合上是均匀分布的：对于集合中的每个素数 $p$，有 $\\mathrm{P}(X=p\\mid A)=\\frac{1}{10}$。\n\n计算条件期望：\n$$\n\\mathrm{E}[X\\mid A]=\\frac{1}{10}\\sum_{p\\in A}p=\\frac{1}{10}\\left(2+3+5+7+11+13+17+19+23+29\\right)=\\frac{129}{10}.\n$$\n\n计算条件二阶矩：\n$$\n\\mathrm{E}[X^{2}\\mid A]=\\frac{1}{10}\\sum_{p\\in A}p^{2}=\\frac{1}{10}\\left(4+9+25+49+121+169+289+361+529+841\\right)=\\frac{2397}{10}.\n$$\n\n使用方差公式 $\\mathrm{Var}(X\\mid A)=\\mathrm{E}[X^{2}\\mid A]-\\left(\\mathrm{E}[X\\mid A]\\right)^{2}$：\n$$\n\\mathrm{Var}(X\\mid A)=\\frac{2397}{10}-\\left(\\frac{129}{10}\\right)^{2}\n=\\frac{23970}{100}-\\frac{16641}{100}\n=\\frac{7329}{100}.\n$$\n该分数为最简形式，因为 $\\gcd(7329,100)=1$。", "answer": "$$\\boxed{\\frac{7329}{100}}$$", "id": "1351953"}, {"introduction": "当处理连续随机变量时，条件方差的计算需要我们从求和过渡到积分。这个练习模拟了一个向靶心投掷飞镖的场景，你需要先确定在“击中靶心”这一条件下，击中点到中心距离的新的概率密度函数。通过这个过程，你将学会如何处理连续变量的条件分布并计算其方差，这在物理和工程等领域的应用十分广泛。[@problem_id:1351920]", "problem": "一支飞镖被投向一个半径为 $R$ 的大圆形靶子。飞镖击中靶子的点由一个在整个靶盘面积上均匀分布的随机变量描述。一个半径为 $r$ (其中 $0  r  R$) 的较小同心圆定义了靶心区域。一位观察者注意到某次投掷落在了靶心区域内。\n\n设 $D$ 为表示飞镖落点与靶心距离的随机变量。计算在飞镖落在靶心内的条件下，$D$ 的方差。将您的答案表示为以靶心半径 $r$ 表示的闭式解析表达式。", "solution": "设随机变量 $D$ 表示飞鏢落点与靶心之间的距离。飞镖的位置在半径为 $R$ 的靶盘上均匀分布。我们被要求计算在事件 $B$ (即飞鏢落在靶心区域，$D \\le r$)发生的条件下 $D$ 的方差。这就是条件方差，$\\mathrm{Var}(D|D \\le r)$。\n\n首先，我们确定 $D$ 的无条件概率分布。$D$ 的累积分布函数 (CDF)，对于一个介于 $0$ 和 $R$ 之间的值 $d$，是概率 $\\mathrm{P}(D \\le d)$。由于分布在面积上是均匀的，这个概率是半径为 $d$ 的圆盘面积与半径为 $R$ 的总靶盘面积之比。\n$$F_D(d) = \\mathrm{P}(D \\le d) = \\frac{\\pi d^2}{\\pi R^2} = \\frac{d^2}{R^2} \\quad \\text{for } 0 \\le d \\le R$$\n$D$ 的概率密度函数 (PDF)，$f_D(d)$，是 CDF 关于 $d$ 的导数：\n$$f_D(d) = \\frac{d}{dd}F_D(d) = \\frac{2d}{R^2} \\quad \\text{for } 0 \\le d \\le R$$\n其他情况下 $f_D(d) = 0$。\n\n接下来，我们求在事件 $B = \\{D \\le r\\}$ 条件下 $D$ 的条件 PDF。我们将这个条件 PDF 记为 $f_{D|B}(d)$。对于 $d  r$，概率为零。对于 $0 \\le d \\le r$，条件 CDF 是：\n$$F_{D|B}(d) = \\mathrm{P}(D \\le d | D \\le r) = \\frac{\\mathrm{P}(D \\le d \\text{ and } D \\le r)}{\\mathrm{P}(D \\le r)}$$\n因为 $d \\le r$，事件 $\\{D \\le d\\}$ 是 $\\{D \\le r\\}$ 的子集，所以它们的交集就是 $\\{D \\le d\\}$。\n$$F_{D|B}(d) = \\frac{\\mathrm{P}(D \\le d)}{\\mathrm{P}(D \\le r)} = \\frac{F_D(d)}{F_D(r)} = \\frac{d^2/R^2}{r^2/R^2} = \\frac{d^2}{r^2} \\quad \\text{for } 0 \\le d \\le r$$\n条件 PDF，$f_{D|B}(d)$，是 $0 \\le d \\le r$ 时条件 CDF 的导数：\n$$f_{D|B}(d) = \\frac{d}{dd} \\left( \\frac{d^2}{r^2} \\right) = \\frac{2d}{r^2} \\quad \\text{for } 0 \\le d \\le r$$\n其他情况下 $f_{D|B}(d) = 0$。这是我们将在后续所有计算中使用的 PDF。\n\n方差由公式 $\\mathrm{Var}(D|B) = \\mathrm{E}[D^2|B] - (\\mathrm{E}[D|B])^2$ 给出。我们需要计算该条件分布的一阶矩和二阶矩。\n\n首先，我们计算条件期望（一阶矩），$\\mathrm{E}[D|B]$：\n$$\\mathrm{E}[D|B] = \\int_{-\\infty}^{\\infty} d \\cdot f_{D|B}(d) \\, \\mathrm{d}d = \\int_{0}^{r} d \\cdot \\frac{2d}{r^2} \\, \\mathrm{d}d$$\n$$\\mathrm{E}[D|B] = \\frac{2}{r^2} \\int_{0}^{r} d^2 \\, \\mathrm{d}d = \\frac{2}{r^2} \\left[ \\frac{d^3}{3} \\right]_{0}^{r} = \\frac{2}{r^2} \\left( \\frac{r^3}{3} - 0 \\right) = \\frac{2r}{3}$$\n\n接下来，我们计算条件二阶矩，$\\mathrm{E}[D^2|B]$：\n$$\\mathrm{E}[D^2|B] = \\int_{-\\infty}^{\\infty} d^2 \\cdot f_{D|B}(d) \\, \\mathrm{d}d = \\int_{0}^{r} d^2 \\cdot \\frac{2d}{r^2} \\, \\mathrm{d}d$$\n$$\\mathrm{E}[D^2|B] = \\frac{2}{r^2} \\int_{0}^{r} d^3 \\, \\mathrm{d}d = \\frac{2}{r^2} \\left[ \\frac{d^4}{4} \\right]_{0}^{r} = \\frac{2}{r^2} \\left( \\frac{r^4}{4} - 0 \\right) = \\frac{r^2}{2}$$\n\n最后，我们计算条件方差：\n$$\\mathrm{Var}(D|B) = \\mathrm{E}[D^2|B] - (\\mathrm{E}[D|B])^2 = \\frac{r^2}{2} - \\left(\\frac{2r}{3}\\right)^2$$\n$$\\mathrm{Var}(D|B) = \\frac{r^2}{2} - \\frac{4r^2}{9} = r^2 \\left( \\frac{1}{2} - \\frac{4}{9} \\right) = r^2 \\left( \\frac{9 - 8}{18} \\right) = \\frac{r^2}{18}$$", "answer": "$$\\boxed{\\frac{r^{2}}{18}}$$", "id": "1351920"}, {"introduction": "在许多实际模型中，一个随机过程的参数本身可能就是随机的。在这种情况下，直接计算方差会很困难，但我们可以使用强大的“全方差公式”：$\\mathrm{Var}(Y) = \\mathrm{E}[\\mathrm{Var}(Y|X)] + \\mathrm{Var}(\\mathrm{E}[Y|X])$。这个练习将引导你解决一个贝叶斯统计中的典型问题，即在观察到一天的数据后，如何更新我们对未来一天数据波动性的预测，这展示了条件方差在高级统计建模中的威力。[@problem_id:1351900]", "problem": "一个数据中心的服务器负载是通过统计每日传入的用户请求数量来监控的。该过程建模如下：基础的日均请求率（由随机变量 $\\Lambda$ 表示）不是一个常数。它会逐日波动，遵循形状参数为 $\\alpha = 10.0$、速率参数为 $\\beta = 1.0$（每天）的伽马分布。\n\n对于特定的一天，给定速率 $\\Lambda = \\lambda$ 的一个具体值，当天的实际请求数 $N$ 是一个服从均值为 $\\lambda$ 的泊松分布的随机变量。在给定每一天各自的速率 $\\Lambda$ 的条件下，任何一天的请求数都与任何其他天的请求数条件独立。假设周一和周二的基础速率 $\\Lambda$ 相同。\n\n假设在周一观测到总共 $k = 12$ 个请求。根据周一的观测数据，计算周二预期请求数的方差。将最终答案四舍五入至三位有效数字。", "solution": "设共同日速率的先验分布为 $\\Lambda \\sim \\mathrm{Gamma}(\\alpha,\\beta)$，其中形状参数为 $\\alpha$，速率参数为 $\\beta$。其概率密度函数为\n$$\nf(\\lambda)=\\frac{\\beta^{\\alpha}}{\\Gamma(\\alpha)}\\lambda^{\\alpha-1}\\exp(-\\beta \\lambda), \\quad \\lambda0.\n$$\n给定 $\\Lambda=\\lambda$，一天的计数值 $N$ 服从 $\\mathrm{Poisson}(\\lambda)$ 分布，因此观测到周一计数值 $k$ 的似然函数为\n$$\n\\mathrm{P}(N=k \\mid \\lambda)=\\frac{\\exp(-\\lambda)\\lambda^{k}}{k!}.\n$$\n根据共轭性，给定周一观测值后，$\\Lambda$ 的后验分布为\n$$\nf(\\lambda \\mid k)\\propto \\lambda^{\\alpha-1}\\exp(-\\beta \\lambda)\\cdot \\exp(-\\lambda)\\lambda^{k}\n=\\lambda^{\\alpha+k-1}\\exp\\bigl(-(\\beta+1)\\lambda\\bigr),\n$$\n此为 $\\mathrm{Gamma}(\\alpha+k,\\beta+1)$ 分布。\n\n对于周二的计数值 $N_{T}$，其后验预测方差可使用全方差公式计算：\n$$\n\\mathrm{Var}(N_{T}\\mid k)=\\mathrm{E}\\!\\left[\\mathrm{Var}(N_{T}\\mid \\Lambda,k)\\mid k\\right]+\\mathrm{Var}\\!\\left(\\mathrm{E}[N_{T}\\mid \\Lambda,k]\\mid k\\right).\n$$\n给定 $\\Lambda$ 时，$N_{T}\\mid \\Lambda \\sim \\mathrm{Poisson}(\\Lambda)$，因此 $\\mathrm{Var}(N_{T}\\mid \\Lambda)=\\Lambda$ 且 $\\mathrm{E}[N_{T}\\mid \\Lambda]=\\Lambda$。于是，\n$$\n\\mathrm{Var}(N_{T}\\mid k)=\\mathrm{E}[\\Lambda \\mid k]+\\mathrm{Var}(\\Lambda \\mid k).\n$$\n由于 $\\Lambda \\mid k \\sim \\mathrm{Gamma}(\\alpha+k,\\beta+1)$，我们有\n$$\n\\mathrm{E}[\\Lambda \\mid k]=\\frac{\\alpha+k}{\\beta+1}, \n\\qquad\n\\mathrm{Var}(\\Lambda \\mid k)=\\frac{\\alpha+k}{(\\beta+1)^{2}}.\n$$\n因此，\n$$\n\\mathrm{Var}(N_{T}\\mid k)=\\frac{\\alpha+k}{\\beta+1}+\\frac{\\alpha+k}{(\\beta+1)^{2}}.\n$$\n代入 $\\alpha=10$、$\\beta=1$ 和 $k=12$：\n$$\n\\mathrm{Var}(N_{T}\\mid k=12)=\\frac{22}{2}+\\frac{22}{4}=11+5.5=16.5.\n$$\n保留三位有效数字，方差为 $16.5$。", "answer": "$$\\boxed{16.5}$$", "id": "1351900"}]}
{"hands_on_practices": [{"introduction": "要真正理解生日问题，我们首先要掌握其核心计算方法。这个练习将引导你通过一个经典的哈希表场景，计算没有碰撞发生的概率 [@problem_id:1404644]。这通常比直接计算至少发生一次碰撞的概率要简单，它为我们解决更复杂的相关问题奠定了基础。", "problem": "一名计算机专业的学生正在实验一个简单的哈希函数，该函数用于将数据键映射到哈希表中。哈希表有 $M=12$ 个可用槽位，索引从0到11。该学生假设他们的哈希函数将键均匀且随机地分布到这些槽位上，这意味着任何键被映射到12个槽位中任意一个的概率是相等的。\n\n如果该学生将 $N=5$ 个不同的键插入到初始为空的哈希表中，那么没有两个键被映射到同一个槽位（即没有发生碰撞）的概率是多少？\n\n将您的答案计算为小数，并四舍五入到四位有效数字。", "solution": "每个键都被独立且均匀地映射到 $M=12$ 个槽位中的一个。对于 $N=5$ 个不同的键不发生碰撞的情况，第二个键必须避开第一个键的槽位，第三个键必须避开前两个键的槽位，以此类推。因此，该概率是条件概率的乘积：\n$$\nP=\\frac{12}{12}\\cdot\\frac{11}{12}\\cdot\\frac{10}{12}\\cdot\\frac{9}{12}\\cdot\\frac{8}{12}.\n$$\n化简得，\n$$\nP=\\frac{12\\cdot 11\\cdot 10\\cdot 9\\cdot 8}{12^{5}}=\\frac{11\\cdot 10\\cdot 9\\cdot 8}{12^{4}}=\\frac{7920}{20736}=\\frac{55}{144}.\n$$\n作为四舍五入到四位有效数字的小数，\n$$\nP=\\frac{55}{144}\\approx 0.3819.\n$$", "answer": "$$\\boxed{0.3819}$$", "id": "1404644"}, {"introduction": "生日问题最令人惊讶的一点是，使得碰撞概率超过 $0.5$ 所需的人数远比我们直觉上认为的要少。这个练习将探讨这个“生日悖论”的核心，要求你计算出在分布式数据库中，需要多少个数据键才能使碰撞变得很有可能发生 [@problem_id:1404642]。这展示了生日问题在评估系统容量和风险方面的实际应用。", "problem": "一个大型分布式数据库系统使用一种简单的哈希方案来将其数据键分布到各个服务器上。集群中有 $N=64$ 台服务器。当添加一个新键时，会对其应用一个哈希函数，然后该键被存储在由 `hash(key) mod N` 结果索引的服务器上。假设哈希函数是理想的，即它将键均匀且随机地分布到各个服务器上。必须向数据库中插入至少多少个键，才能使至少发生一次“冲突”（即至少有两个键被分配到同一台服务器）的概率严格大于 $0.5$？", "solution": "设服务器数量为 $N=64$，插入的键的数量为 $m$。我们要寻找最小的整数 $m$，使得至少发生一次冲突的概率严格大于 $0.5$。这等价于寻找最小的 $m$，使得没有冲突发生的概率 $P_{\\text{无冲突}}(m)$ 小于 $0.5$。\n\n没有冲突的概率计算如下：\n$$ P_{\\text{无冲突}}(m) = \\frac{N}{N} \\times \\frac{N-1}{N} \\times \\dots \\times \\frac{N-m+1}{N} $$\n\n我们通过递增 $m$ 的值来检验这个概率：\n*   当 $m=9$ 时：\n    $$ P_{\\text{无冲突}}(9) = \\frac{64 \\times 63 \\times \\dots \\times 56}{64^9} \\approx 0.556 $$\n    此时，发生冲突的概率为 $1 - 0.556 = 0.444$，这个值小于 $0.5$。\n\n*   当 $m=10$ 时：\n    $$ P_{\\text{无冲突}}(10) = P_{\\text{无冲突}}(9) \\times \\frac{64-9}{64} = P_{\\text{无冲突}}(9) \\times \\frac{55}{64} \\approx 0.556 \\times 0.859375 \\approx 0.478 $$\n    此时，发生冲突的概率为 $1 - 0.478 = 0.522$，这个值大于 $0.5$。\n\n因此，必须向数据库中插入的最小键数为 $10$。", "answer": "$$\\boxed{10}$$", "id": "1404642"}, {"introduction": "除了计算是否会发生碰撞的概率，我们还可以从另一个角度来量化碰撞的程度：平均会发生多少次碰撞？这个练习引入了期望值的概念，利用指示变量和期望的线性性质，提供了一种优雅且强大的方法来解决这个问题 [@problem_id:1404678]。这种方法对于分析大规模系统中的碰撞问题尤其有用。", "problem": "一个分布式数据存储系统的简化模型涉及将数据文件哈希到不同的存储仓中。假设有一批 $N=20$ 个独立的数据文件需要存储。该系统使用一个哈希函数，将每个文件伪随机地分配到 $M=12$ 个可用的存储仓之一。假设对于任何给定的文件，它被分配到 $M$ 个存储仓中任意一个的概率是相等的，并且不同文件的分配是相互独立的。\n\n当两个或多个文件被分配到同一个存储仓时，这被称为“碰撞”。我们关心的是发生碰撞的文件对的数量。计算被分配到同一个存储仓的不同文件对的期望数量。\n\n将您的答案表示为最简形式的精确分数。", "solution": "设 $N$ 为文件数量，$M$ 为存储仓数量。为每一对不同的文件 $\\{i,j\\}$（其中 $1 \\le i  j \\le N$）定义指示变量 $X_{ij}$，如果文件 $i$ 和 $j$ 被分配到同一个存储仓，则 $X_{ij}=1$，否则 $X_{ij}=0$。碰撞对的总数是 $X=\\sum_{1 \\le i  j \\le N} X_{ij}$。\n\n根据分配的均匀性和独立性，对于任意固定的文件对 $\\{i,j\\}$，它们都被分配到同一个存储仓的概率是 $\\frac{1}{M}$，因此 $\\mathbb{E}[X_{ij}] = \\frac{1}{M}$。根据期望的线性性，\n$$\n\\mathbb{E}[X] \\;=\\; \\sum_{1 \\le i  j \\le N} \\mathbb{E}[X_{ij}] \\;=\\; \\binom{N}{2} \\cdot \\frac{1}{M} \\;=\\; \\frac{N(N-1)}{2M}.\n$$\n代入 $N=20$ 和 $M=12$：\n$$\n\\mathbb{E}[X] \\;=\\; \\frac{20 \\cdot 19}{2 \\cdot 12} \\;=\\; \\frac{380}{24} \\;=\\; \\frac{190}{12} \\;=\\; \\frac{95}{6}.\n$$\n这已是最简形式。", "answer": "$$\\boxed{\\frac{95}{6}}$$", "id": "1404678"}]}
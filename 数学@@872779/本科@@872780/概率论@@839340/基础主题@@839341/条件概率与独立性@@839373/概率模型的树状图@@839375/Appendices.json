{"hands_on_practices": [{"introduction": "这个练习将引导你使用概率树图解决一个经典问题。通过将寻宝猎人获取宝藏的过程分解为几个连续的阶段——宝箱是否上锁，以及如果上锁能否成功打开——我们可以清晰地计算出最终成功的总概率。这个练习旨在帮助你掌握使用全概率定律来分析多阶段随机事件的核心技能。", "problem": "一位在偏远岛屿上的寻宝者发现了一个神秘的箱子。根据古老的传说，这个箱子被魔法锁住的概率是 $3/5$。如果箱子没有被锁，宝藏可以立即被获取。如果箱子被锁住了，寻宝者必须尝试撬锁。寻宝者的技巧使得在箱子被锁住的情况下，他成功撬开锁的概率是 $1/4$。\n\n寻宝者能够获取箱子内宝藏的总概率是多少？请以分数形式给出你的答案。", "solution": "设 $L$ 表示箱子被锁住的事件，$U$ 表示箱子未被锁住的事件，且 $U = L^{c}$。设 $S$ 表示获取到宝藏的事件。我们已知 $P(L) = \\frac{3}{5}$，因此 $P(U) = 1 - P(L) = 1 - \\frac{3}{5} = \\frac{2}{5}$。如果箱子未被锁住，则肯定能获取宝藏，所以 $P(S \\mid U) = 1$。如果箱子被锁住，成功撬开锁的概率是 $P(S \\mid L) = \\frac{1}{4}$。\n\n根据全概率公式，\n$$\nP(S) = P(S \\mid U)P(U) + P(S \\mid L)P(L)\n$$\n代入给定的概率，\n$$\nP(S) = 1 \\cdot \\frac{2}{5} + \\frac{1}{4} \\cdot \\frac{3}{5} = \\frac{2}{5} + \\frac{3}{20}\n$$\n通分后，\n$$\n\\frac{2}{5} = \\frac{8}{20} \\quad \\Rightarrow \\quad P(S) = \\frac{8}{20} + \\frac{3}{20} = \\frac{11}{20}\n$$\n因此，寻宝者能够获取宝藏的总概率是 $\\frac{11}{20}$。", "answer": "$$\\boxed{\\frac{11}{20}}$$", "id": "1408415"}, {"introduction": "在上一个练习的基础上，本题引入了“逆向概率”的挑战，即贝叶斯定理的经典应用。我们观察到了一个结果（顾客点了“Tarte Tatin”），需要反过来推断导致该结果的先决条件（顾客选择了何种菜单）的概率。这种从结果推断原因的思维方式是概率论在现实世界中应用最广泛的技能之一，例如在医学诊断和数据科学领域。[@problem_id:1408389]", "problem": "在高级餐厅“Le Cygne”，顾客主要有两种用餐选择：三道菜的固定价格套餐（prix-fixe menu）或单点（à la carte）。根据大量的历史数据，餐厅经理知道60%的顾客选择固定价格套餐，而剩下的40%则选择单点。\n\n这家餐厅以其“Tarte Tatin”（法式反烤苹果挞）而闻名。选择固定价格套餐的顾客有50%的几率在可选的甜点中选择Tarte Tatin。单点的顾客，由于有更广泛的甜点菜单可供选择，有20%的几率点Tarte Tatin。\n\n一位服务员正端着一份新鲜出炉的Tarte Tatin送到一张桌子，但你不知道那张桌子的顾客选择了哪种菜单。仅凭这一观察，顾客选择了固定价格套餐的概率是多少？\n\n请用最简精确分数表示你的答案。", "solution": "让我们为我们的概率模型定义事件。\n设 $F$ 为顾客选择固定价格套餐的事件。\n设 $A$ 为顾客单点的事件。\n设 $T$ 为顾客选择Tarte Tatin作为甜点的事件。\n\n根据题目描述，我们已知以下概率：\n顾客选择固定价格套餐的概率为 $P(F) = 0.60$。\n顾客单点的概率为 $P(A) = 0.40$。注意 $P(A) = 1 - P(F)$。\n\n我们还知道在给定菜单选择的情况下，顾客选择Tarte Tatin的条件概率：\n在选择了固定价格套餐的情况下，选择Tarte Tatin的概率为 $P(T|F) = 0.50$。\n在选择了单点菜单的情况下，选择Tarte Tatin的概率为 $P(T|A) = 0.20$。\n\n问题要求的是在顾客点了Tarte Tatin的情况下，他们选择了固定价格套餐的概率。这对应于条件概率 $P(F|T)$。\n\n为了求这个概率，我们可以使用贝叶斯定理，其公式为：\n$$P(F|T) = \\frac{P(T|F) P(F)}{P(T)}$$\n\n我们已知 $P(T|F)$ 和 $P(F)$，但我们首先需要计算 $P(T)$，即任意随机选择的顾客点Tarte Tatin的总概率。我们可以使用全概率公式来计算。一个顾客可以通过选择固定价格套餐或通过单点来点Tarte Tatin。这些是互斥且穷尽的事件。\n全概率公式为：\n$$P(T) = P(T|F)P(F) + P(T|A)P(A)$$\n\n现在，我们将给定的值代入这个公式：\n$$P(T) = (0.50)(0.60) + (0.20)(0.40)$$\n$$P(T) = 0.30 + 0.08$$\n$$P(T) = 0.38$$\n\n所以，一个顾客点Tarte Tatin的总概率是0.38。\n\n现在我们可以将这个值代回到我们的贝叶斯定理公式中，以求得 $P(F|T)$：\n$$P(F|T) = \\frac{P(T|F) P(F)}{P(T)}$$\n$$P(F|T) = \\frac{(0.50)(0.60)}{0.38}$$\n$$P(F|T) = \\frac{0.30}{0.38}$$\n\n为了将其表示为最简精确分数，我们可以将小数写成分数形式：\n$$P(F|T) = \\frac{\\frac{30}{100}}{\\frac{38}{100}} = \\frac{30}{38}$$\n\n现在，我们通过将分子和分母同时除以它们的最大公约数2来简化分数：\n$$P(F|T) = \\frac{30 \\div 2}{38 \\div 2} = \\frac{15}{19}$$\n\n因此，在顾客点了Tarte Tatin的情况下，他们选择了固定价格套餐的概率是 $\\frac{15}{19}$。", "answer": "$$\\boxed{\\frac{15}{19}}$$", "id": "1408389"}, {"introduction": "这个压轴练习将你的技能从处理具体数值提升到构建抽象模型。通过分析一个在层级网络中运行的诊断探针，你将学习如何为一个多阶段随机过程推导出条件概率的通用表达式。这个问题 [@problem_id:1408370] 强调了从具体计算到符号化建模的转变，这对于在计算机科学、工程学等领域中解决由变量参数定义的复杂问题至关重要。", "problem": "一个诊断探针部署在分层通信网络中。该网络的拓扑被建模为一个高度为 $H$ 的完全 k 叉树，其中 $k \\ge 2$ 和 $H \\ge 1$ 是整数。“完全”k叉树是指每个非叶节点都恰好有 $k$ 个子节点，且所有叶节点都在相同的深度 $H$。树的根节点位于深度 0。\n\n探针从根节点开始其遍历。在位于深度为 $d$（其中 $0 \\le d  H$）的任意节点处，探针都会执行一次测试。\n- 测试以概率 $p$（其中 $0  p  1$）失败，表明存在局部故障。在这种情况下，探针立即在当前节点终止其遍历。\n- 测试以概率 $1-p$ 通过。探针随后从 $k$ 个子节点中均匀随机地选择一个并移动到该节点，继续其遍历。\n\n如果探针到达叶节点（深度为 $H$），其遍历也会终止，表明在其路径上没有发现故障。\n\n一位工程师运行该探针并收到一份报告，称其因局部故障而终止（即它没有到达叶节点）。给定此信息，请确定在深度为 $d$（其中 $d$ 是满足 $0 \\le d  H$ 的整数）的节点检测到故障的概率的闭式表达式。您的表达式可以用给定的任意符号参数 $p$、$k$、$H$ 和 $d$ 来表示。", "solution": "设 $A_{d}$ 为探针在深度 $d$ 首次检测到故障的事件，设 $F$ 为探针因局部故障而终止（即未到达深度 $H$）的事件。\n\n要使 $A_{d}$ 发生，探针必须：\n- 在深度 $0,1,\\ldots,d-1$ 处的测试都通过，每次通过的概率为 $1-p$，并且\n- 在深度 $d$ 处的测试失败，概率为 $p$。\n\n每次测试通过后，在 $k$ 个子节点中的选择不影响深度的进展，因此路径选择与深度分布无关。使用逐级乘法法则，我们得到\n$$\n\\Pr(A_{d})=(1-p)^{d}p,\\qquad 0\\le d  H\n$$\n\n事件 $F$ 是 $A_{d}$ 在 $d=0,1,\\ldots,H-1$ 上的不交并，因此\n$$\n\\Pr(F)=\\sum_{d=0}^{H-1}\\Pr(A_{d})=\\sum_{d=0}^{H-1}(1-p)^{d}p\n= p\\,\\frac{1-(1-p)^{H}}{1-(1-p)}=1-(1-p)^{H}\n$$\n\n根据条件概率的定义，\n$$\n\\Pr(A_{d}\\mid F)=\\frac{\\Pr(A_{d})}{\\Pr(F)}=\\frac{(1-p)^{d}p}{1-(1-p)^{H}},\\qquad 0\\le d  H\n$$\n这个表达式不依赖于 $k$，因为在 $k$ 个子节点中的均匀选择不会改变到达给定深度的概率。", "answer": "$$\\boxed{\\frac{p(1-p)^{d}}{1-(1-p)^{H}}}$$", "id": "1408370"}]}
{"hands_on_practices": [{"introduction": "任何优化的第一步都是识别出哪里可以改进。在证明论中，这意味着要能精确地找出证明中的冗余结构。这个练习将让你实践由 Dag Prawitz 提出的“极大公式”（maximal formula）的定义，这是一个逻辑“弯路”（detour）的核心。通过在一个具体的推导中定位形成弯路的引入规则和紧随其后的消除规则，你将学会如何像逻辑学家一样审视一个证明的结构。[@problem_id:3047898]", "problem": "在命题逻辑的标准自然演绎中，如果一个公式的出现同时是其主联结词的引入规则的结论，并且是同一联结词的消去规则的大前提，那么在 Dag Prawitz 的意义上，它被称为一个极大公式。消去规则的大前提是其主联结词与所应用的规则相匹配的公式。当对同一公式进行引入后立即进行消去时，就存在一个“迂回”，而范式化会消除这种迂回。\n\n考虑以下推导，其中所有步骤都在具有规则 $\\land I$、$\\land E_{1}$、$\\land E_{2}$、$\\lor I_{1}$、$\\lor I_{2}$、$\\to I$ 和 $\\to E$ 的自然演绎系统中进行。命题字母为 $P$、$Q$ 和 $R$。\n- 第 $1$ 行：$P$ (假设)\n- 第 $2$ 行：$R$ (假设)\n- 第 $3$ 行：$P \\land R$ (由第 $1$、$2$ 行通过 $\\land I$ 得出)\n- 第 $4$ 行：$P \\land R$ (假设，标记为 $\\alpha$)\n- 第 $5$ 行：$R$ (由第 $4$ 行通过 $\\land E_{2}$ 得出)\n- 第 $6$ 行：$Q \\lor R$ (由第 $5$ 行通过 $\\lor I_{2}$ 得出)\n- 第 $7$ 行：$(P \\land R) \\to (Q \\lor R)$ (由子推导第 $4$–$6$ 行通过 $\\to I$ 得出，并消除假设 $\\alpha$)\n- 第 $8$ 行：$P \\land R$ (由第 $1$、$2$ 行通过 $\\land I$ 得出)\n- 第 $9$ 行：$Q \\lor R$ (由第 $7$、$8$ 行通过 $\\to E$ 得出)\n\n仅使用自然演绎中引入和消去规则的核心定义以及上述极大公式的概念，找出在形式为 $A \\to B$ 的显式极大公式上共同实现迂回的那个确切的引入步骤和那个确切的消去步骤，其中 $A$ 是 $P \\land R$，$B$ 是 $Q \\lor R$。\n\n将您的识别结果编码为一个单一数字，方法是：令 $i$ 为引入步骤的行号，$j$ 为消去步骤的行号，然后计算康托尔配对函数\n$$\\pi(i,j) \\;=\\; \\frac{1}{2}\\big((i+j)(i+j+1)\\big) + j.$$\n以 $\\pi(i,j)$ 的确切整数值形式提供您的最终答案。", "solution": "该问题要求在一个给定的自然演绎推导中识别出一个特定的逻辑“迂回”。在 Dag Prawitz 的范式化理论中，迂回发生在极大公式上。如果一个公式的出现是其主联结词的引入规则的结论，同时也是同一联结词的消去规则的大前提，那么这个公式的出现就是极大的。任务是找到为特定公式 $(P \\land R) \\to (Q \\lor R)$ 形成这样一个迂回的引入规则（行号为 $i$）和消去规则（行号为 $j$）的行号。\n\n公式 $(P \\land R) \\to (Q \\lor R)$ 的主联结词是蕴含 $\\to$。因此，我们正在寻找一对步骤，其中该公式首先使用蕴含引入规则（$\\to I$）被引入，然后在一个蕴含消去规则（$\\to E$）的应用中被用作大前提。\n\n首先，我们寻找公式 $(P \\land R) \\to (Q \\lor R)$ 的引入。蕴含引入规则 $\\to I$ 允许从一个以假设 $A$ 开始并以推导出 $B$ 结束的子推导中得出 $A \\to B$。检查所给的推导：\n- 第 $4$ 行：$P \\land R$ (假设，标记为 $\\alpha$)\n- 第 $5$ 行：$R$ (由第 $4$ 行通过 $\\land E_{2}$ 得出)\n- 第 $6$ 行：$Q \\lor R$ (由第 $5$ 行通过 $\\lor I_{2}$ 得出)\n- 第 $7$ 行：$(P \\land R) \\to (Q \\lor R)$ (由子推导第 $4$–$6$ 行通过 $\\to I$ 得出，并消除假设 $\\alpha$)\n\n在第 $7$ 行，公式 $(P \\land R) \\to (Q \\lor R)$ 是通过 $\\to I$ 规则推导出来的。这一步结束了一个假设了 $P \\land R$ 并推导出了 $Q \\lor R$ 的子推导。因此，第 $7$ 行是我们目标公式的引入步骤。我们确定 $i=7$。\n\n接下来，我们寻找该公式的消去。蕴含消去规则 $\\to E$（也称为肯定前件式）需要两个前提：一个形式为 $A \\to B$ 的大前提和一个形式为 $A$ 的小前提。它得出结论 $B$。我们需要找到一个 $\\to E$ 的应用，其中来自第 $7$ 行的公式 $(P \\land R) \\to (Q \\lor R)$ 作为大前提。进一步检查推导：\n- 第 $8$ 行：$P \\land R$ (由第 $1$、$2$ 行通过 $\\land I$ 得出)\n- 第 $9$ 行：$Q \\lor R$ (由第 $7$、$8$ 行通过 $\\to E$ 得出)\n\n在第 $9$ 行，公式 $Q \\lor R$ 是通过 $\\to E$ 规则推导出来的，引用了第 $7$ 行和第 $8$ 行作为前提。\n- 第 $7$ 行的前提是 $(P \\land R) \\to (Q \\lor R)$，其形式为 $A \\to B$。这是大前提。\n- 第 $8$ 行的前提是 $P \\land R$，其形式为 $A$。这是小前提。\n该规则正确地得出了结论 $Q \\lor R$，其形式为 $B$。\n第 $7$ 行的公式确实是在第 $9$ 行应用的消去规则的大前提。因此，第 $9$ 行是该迂回中的消去步骤。我们确定 $j=9$。\n\n在第 $7$ 行出现的公式 $(P \\land R) \\to (Q \\lor R)$ 是极大的。它是第 $7$ 行引入规则 $\\to I$ 的结论，也是第 $9$ 行消去规则 $\\to E$ 的大前提。这对步骤 $(i, j) = (7, 9)$ 构成了迂回。\n\n最后一步是为 $i=7$ 和 $j=9$ 计算康托尔配对函数 $\\pi(i,j)$。康托尔配对函数的公式是：\n$$ \\pi(i,j) = \\frac{1}{2}\\big((i+j)(i+j+1)\\big) + j $$\n代入值 $i=7$ 和 $j=9$：\n$$ \\pi(7,9) = \\frac{1}{2}\\big((7+9)(7+9+1)\\big) + 9 $$\n$$ \\pi(7,9) = \\frac{1}{2}\\big((16)(16+1)\\big) + 9 $$\n$$ \\pi(7,9) = \\frac{1}{2}\\big(16 \\times 17\\big) + 9 $$\n$$ \\pi(7,9) = \\frac{1}{2}(272) + 9 $$\n$$ \\pi(7,9) = 136 + 9 $$\n$$ \\pi(7,9) = 145 $$\n得到的整数值为 $145$。", "answer": "$$\\boxed{145}$$", "id": "3047898"}, {"introduction": "识别出弯路后，下一步就是消除它。这个练习将我们从单纯的证明操作提升到计算的视角，利用深刻的 Curry-Howard 对应关系。你将看到，一个涉及析取（$\\lor$）的逻辑弯路，在计算上恰好对应于一个冗余的条件分支——对一个已知情况进行不必要的分情况讨论。通过将证明翻译为程序并对其进行化简，我们能更直观地理解规范化的本质和其带来的效率提升。[@problem_id:3047831]", "problem": "考虑自然演绎 (ND) 中的命题公式 $A$、$B$ 和 $C$。仅使用标准的 ND 析取规则：$\\lor$-引入（从 $A$ 推导出 $A \\lor B$，从 $B$ 推导出 $A \\lor B$）和 $\\lor$-消去（从 $A \\lor B$，以及子推导 $A \\vdash C$ 和 $B \\vdash C$，推导出 $C$）。假设你有一个 $A$ 的推导（记此推导为 $a$），一个在临时假定 $A$ 的情况下产生 $C$ 的推导模式（记此为函数 $f$，它将 $A$ 的一个实例映射到 $C$），以及一个在临时假定 $B$ 的情况下产生 $C$ 的推导模式（记此为函数 $g$，它将 $B$ 的一个实例映射到 $C$）。\n\n构造一个 $C$ 的推导，该推导首先对 $A$ 应用 $\\lor$-引入得到 $A \\lor B$，然后立即使用对应于 $f$ 和 $g$ 的两个子推导来应用 $\\lor$-消去。仅使用基本的 ND 规则和将 $\\lor$ 视为和类型的 Curry–Howard 对应，推导出与此推导相对应的项的范式（即消除引入-消去迂回路径后的结果）。用文字解释为什么在这种配置下情况分析是冗余的，但最终答案需提供以 $a$、$f$ 和 $g$ 表示的范化项的封闭形式解析表达式。你的最终答案必须是单一的符号表达式。不需要进行数值舍入。", "solution": "该问题要求在自然演绎 (ND) 中构造一个特定的推导，通过 Curry-Howard 对应将其转换为一个项，并对该项进行范化。在继续之前，必须对该过程进行验证。\n\n### 问题验证\n\n**步骤 1：提取已知条件**\n-   命题：$A$、$B$、$C$。\n-   逻辑系统：自然演绎 (ND)。\n-   析取规则 ($\\lor$)：\n    -   $\\lor$-引入：从 $A$ 推导出 $A \\lor B$；从 $B$ 推导出 $A \\lor B$。\n    -   $\\lor$-消去：从 $A \\lor B$、一个子推导 $A \\vdash C$ 和一个子推导 $B \\vdash C$，推导出 $C$。\n-   已知元素：\n    -   $a$：命题 $A$ 的一个推导。\n    -   $f$：一个将 $A$ 的推导转换为 $C$ 的推导的推导模式。\n    -   $g$：一个将 $B$ 的推导转换为 $C$ 的推导的推导模式。\n-   任务：通过首先对 $a$ 应用 $\\lor$-引入得到 $A \\lor B$，然后立即使用 $f$ 和 $g$ 应用 $\\lor$-消去，来构造一个 $C$ 的推导。推导出相应项的范式。\n\n**步骤 2：使用提取的已知条件进行验证**\n该问题在数理逻辑和证明论领域内是良定义的。\n-   **科学依据：**自然演绎、Curry-Howard 对应、和类型以及项的范化（$\\beta$-归约）等概念是逻辑学和理论计算机科学中基本且成熟的原则。该问题是此领域的标准练习。它在科学上是合理的。\n-   **良构性：**该问题提供了所有必要的组成部分（$a$、$f$、$g$）以及用于构造推导和找到结果项的明确指令。存在一个唯一且有意义的解。\n-   **客观性：**语言形式化且精确，没有主观性或歧义。\n\n**步骤 3：结论与行动**\n问题陈述是有效的。这是一个在数理逻辑中良构且有科学依据的问题。我将继续进行解答。\n\n### 解答\n\n解答过程涉及根据 Curry-Howard 对应的指示，将所描述的自然演绎证明转换为类型化 lambda 演算的语言，然后执行项归约以找到范式。\n\n**1. 析取的 Curry-Howard 对应**\n在 Curry-Howard 对应下，命题被解释为类型，证明被解释为该类型的项。\n-   一个命题，如 $A$，对应于一个类型 $A$。$A$ 的一个证明对应于类型为 $A$ 的一个项。我们给定了一个 $A$ 的证明 $a$，因此我们有一个项 $a: A$。\n-   析取 $A \\lor B$ 对应于和类型，记作 $A+B$。此类型包含类型为 $A$ 或类型为 $B$ 的值。\n-   推导模式 $f$ 和 $g$ 对应于函数。从 $A$ 的假定推导出 $C$ 的模式 $f$ 是一个类型为 $A \\to C$ 的函数。类似地，$g$ 是一个类型为 $B \\to C$ 的函数。对于一个项 $x:A$，$f(x)$ 是一个类型为 $C$ 的项。对于一个项 $y:B$，$g(y)$ 是一个类型为 $C$ 的项。\n\n**2. 转换 ND 规则并构造项**\n我们逐步转换指定的推导：\n\n-   **$\\lor$-引入 ($\\lor I$)**：此规则对应于和类型的构造子。有两个这样的构造子，通常表示为 $\\text{inl}$（左注入）和 $\\text{inr}$（右注入）。\n    -   规则“从 $A$ 推导出 $A \\lor B$”映射到函数 $\\text{inl}: A \\to A+B$。\n    -   规则“从 $B$ 推导出 $A \\lor B$”映射到函数 $\\text{inr}: B \\to A+B$。\n\n    问题陈述要求对给定的 $A$ 的推导 $a$ 应用 $\\lor$-引入。这转换成将 $\\text{inl}$ 构造子应用于项 $a$。得到的项是 $\\text{inl}(a)$，其类型为 $A+B$。\n    $$ a:A \\implies \\text{inl}(a) : A+B $$\n\n-   **$\\lor$-消去 ($\\lor E$)**：此规则对应于和类型的消去子，它是一种情况分析构造。给定一个类型为 $A+B$ 的项 $p$，以及两个函数 $f: A \\to C$ 和 $g: B \\to C$，我们可以构造一个类型为 $C$ 的项。其语法通常写作：\n    $$ \\text{case } p \\text{ of } \\text{inl}(x) \\Rightarrow f(x) | \\text{inr}(y) \\Rightarrow g(y) $$\n    在这里，$x$ 是类型为 $A$ 的变量，$y$ 是类型为 $B$ 的变量。该表达式检查项 $p$。如果 $p$ 是用值 $v$ 通过 $\\text{inl}$ 构造的，则该表达式求值为 $f(v)$。如果 $p$ 是用值 $w$ 通过 $\\text{inr}$ 构造的，则它求值为 $g(w)$。\n\n-   **构造完整项**：问题指定 $\\lor$-消去立即应用于 $\\lor$-引入的结果。\n    -   $\\lor$-消去的大前提是项 $\\text{inl}(a): A+B$。\n    -   两个子推导由函数 $f: A \\to C$ 和 $g: B \\to C$ 给出。\n\n    结合这些，与所描述的 $C$ 的推导相对应的完整项是：\n    $$ \\text{case } \\text{inl}(a) \\text{ of } \\text{inl}(x) \\Rightarrow f(x) | \\text{inr}(y) \\Rightarrow g(y) $$\n    这是一个类型为 $C$ 的项。\n\n**3. 项的范化**\n所构造的项表示一个包含逻辑“迂回”的证明。一个联结词的引入（$\\lor I$）紧跟着它的消去（$\\lor E$）。在 lambda 演算中，这对应于一个可归约表达式，或称“redex”。范化过程通过应用归约规则来简化该项。\n\n对注入项进行情况分析的归约规则（和类型的 $\\beta$-归约）是：\n$$ \\text{case } \\text{inl}(v) \\text{ of } \\text{inl}(x) \\Rightarrow E_1 | \\text{inr}(y) \\Rightarrow E_2 \\quad \\longrightarrow_\\beta \\quad E_1[v/x] $$\n其中 $E_1[v/x]$ 表示用项 $v$ 替换表达式 $E_1$ 中变量 $x$ 的所有自由出现。\n\n将此规则应用于我们的项：\n$$ \\text{case } \\text{inl}(a) \\text{ of } \\text{inl}(x) \\Rightarrow f(x) | \\text{inr}(y) \\Rightarrow g(y) $$\n这里，$v$ 是项 $a$，表达式 $E_1$ 是 $f(x)$。归约产生：\n$$ (f(x))[a/x] $$\n在 $f(x)$ 中用 $a$ 替换 $x$ 得到的就是 $f(a)$。\n\n因此，范化后的项是 $f(a)$。\n\n**4. 情况分析的冗余性**\n范化过程揭示了原始证明结构中的冗余。该推导首先从 $A$ 的一个证明 $a$ 构造出 $A \\lor B$ 的一个证明。然后它对 $A \\lor B$ 执行情况分析。然而，由于 $A \\lor B$ 的证明是专门从 $A$ 的证明构造的，我们已经知道析取式的哪一种情况成立。假定 $B$ 的证明分支（即对应于函数 $g$ 的分支）是不可达的，因此是多余的。\n\n这个逻辑迂回在于，取一个已知的 $A$ 的证明，将其嵌入到一个更一般的陈述 $A \\lor B$ 中，然后立即分析这个一般陈述以恢复原始信息（即我们从 $A$ 开始的）以便继续。范化后的证明，对应于项 $f(a)$，消除了这个迂回。它代表一个直接的证明，即取给定的 $A$ 的推导 $a$ 并对其应用模式 $f$，从而立即得到一个 $C$ 的证明。模式 $g$ 从未被使用，这反映在最终的范化项 $f(a)$ 中，它与 $g$ 无关。这种消除引入-消去对的过程是自然演绎范化定理的精髓。\n\n以给定的 $a$、$f$ 和 $g$ 表示的范化项的最终解析表达式，是将函数 $f$ 应用于参数 $a$ 的结果。", "answer": "$$\n\\boxed{f(a)}\n$$", "id": "3047831"}, {"introduction": "复杂的证明往往不会只有一个弯路，而是可能包含层层嵌套的冗余结构。这个练习模拟了更真实的规范化场景，挑战你处理一个嵌套的弯路。你将发现，消除一个外层的弯路可能会“暴露”出一个之前隐藏在内的、新的可化简结构。这揭示了规范化并非一次性的操作，而是一个逐步揭示并化简证明核心逻辑的迭代过程。[@problem_id:3047858]", "problem": "在最小蕴含合取逻辑的自然演绎中，蕴含 $\\rightarrow$ 的初始规则是引入规则（$\\rightarrow I$）和消去规则（$\\rightarrow E$），合取 $\\wedge$ 的初始规则是引入规则（$\\wedge I$）和消去规则（$\\wedge E$）。推导中的一个公式 $F$ 被称为极大公式，如果 $F$ 是通过一个引入规则的结论得到的，并且紧接着被用作一个消去规则的大前提，从而形成一个迂回。正规化通过消除极大公式来移除迂回，这是通过转换实现的，转换将一个引入规则后跟一个消去规则的结构替换为其子推导的组合，而无需中间公式 $F$。这个过程严格降低了推导的复杂度，同时保持最终判断不变。\n\n当一个迂回在句法上位于另一个迂回的引入子推导内部时，极大公式可以被嵌套；移除外部的极大公式可以暴露内部的极大公式，使其可以被立即移除。考虑以下由公式 $A$、$B$ 和 $C$ 构建的具体、不寻常的例子，它包含以下组成部分：\n- 一个关于 $A$ 的闭合正规推导 $\\pi_{A}$。\n- 在一个未消除的假设 $x:A$ 下，关于 $B$ 的正规子推导 $u(x)$ 和关于 $C$ 的正规子推导 $v(x)$。\n\n按如下方式构造 $B$ 的推导 $\\Pi$：\n1. 假设 $x:A$。\n2. 从假设 $x:A$ 推导出 $u(x):B$ 和 $v(x):C$。\n3. 应用 $\\wedge I$ 以得到 $B\\wedge C$。\n4. 应用 $\\wedge E_{1}$ 从 $B\\wedge C$ 得到 $B$。\n5. 消除假设 $x:A$ 并使用 $\\rightarrow I$ 推断出 $A\\rightarrow B$。\n6. 应用 $\\rightarrow E$，以步骤5中的 $A\\rightarrow B$ 为大前提，以 $\\pi_{A}:A$ 为小前提，推断出 $B$。\n\n在 $\\Pi$ 内部，公式 $A\\rightarrow B$ 是极大的（它被引入后立即被消去），而公式 $B\\wedge C$ 嵌套在引入子推导的内部，并被用作 $\\wedge E_{1}$ 的大前提，因此一旦外部的迂回被移除且子推导被组合，它就可能成为一个极大公式。\n\n假设 $u(x)$、$v(x)$ 和 $\\pi_{A}$ 都是正规的（不含极大公式），确定将 $\\Pi$ 转换为正规推导所需的最小迂回消除步骤数（每一步通过一次转换移除一个极大公式）。请以整数形式给出答案。", "solution": "问题要求将给定推导 $\\Pi$ 转换为其正规形式所需的最小迂回消除步骤数。一个迂回消除步骤对应于应用一个转换规则来移除一个极大公式。\n\n首先，让我们根据提供的构建步骤来形式化推导 $\\Pi$ 的结构。一个推导可以用树来表示。其组成部分是 $A$ 的一个正规闭合推导 $\\pi_A$，以及从假设 $x:A$ 出发的关于 $B$ 和 $C$ 的正规开放推导 $u(x)$ 和 $v(x)$。\n\n$\\Pi$ 的构造如下：\n1. 作出一个假设 $x:A$。在树形表示中，这是一个标记为 $[x:A]$ 的叶节点。\n2. 从这个假设构造出推导 $u(x)$ 和 $v(x)$。\n3. 对 $u(x)$ 和 $v(x)$ 的结论应用合取引入规则 $\\wedge I$。这部分推导树如下所示：\n$$\n\\frac{\n  \\substack{ [x:A] \\\\ \\vdots \\\\ u(x):B }\n  \\quad\n  \\substack{ [x:A] \\\\ \\vdots \\\\ v(x):C }\n}{B \\wedge C} (\\wedge I)\n$$\n4. 对公式 $B \\wedge C$ 应用合取消去（左）规则 $\\wedge E_1$，以推导出 $B$。到目前为止，从假设 $x:A$ 到结论 $B$ 的子推导是：\n$$\n\\mathcal{D}_1 = \\frac{\n  \\frac{\n    \\substack{ [x:A] \\\\ \\vdots \\\\ u(x):B }\n    \\quad\n    \\substack{ [x:A] \\\\ \\vdots \\\\ v(x):C }\n  }{B \\wedge C} (\\wedge I)\n}{B} (\\wedge E_1)\n$$\n5. 对这个子推导 $\\mathcal{D}_1$ 应用蕴含引入规则 $\\rightarrow I$，从而消除假设 $[x:A]$。我们用数字 $1$ 来标记被消除的假设。\n$$\n\\frac{\n  \\frac{\n    \\frac{\n      \\substack{ [x:A]^1 \\\\ \\vdots \\\\ u(x):B }\n      \\quad\n      \\substack{ [x:A]^1 \\\\ \\vdots \\\\ v(x):C }\n    }{B \\wedge C} (\\wedge I)\n  }{B} (\\wedge E_1)\n}{A \\rightarrow B} (\\rightarrow I)^1\n$$\n6. 最后，应用蕴含消去规则 $\\rightarrow E$。大前提是上一步推导出的公式 $A \\rightarrow B$，小前提是给定的 $A$ 的闭合正规推导 $\\pi_A$。\n\n因此，完整的推导 $\\Pi$ 是：\n$$\n\\Pi = \\frac{\n  \\frac{\n    \\frac{\n      \\frac{\n        \\substack{ [x:A]^1 \\\\ \\vdots \\\\ u(x):B }\n        \\quad\n        \\substack{ [x:A]^1 \\\\ \\vdots \\\\ v(x):C }\n      }{B \\wedge C} (\\wedge I)\n    }{B} (\\wedge E_1)\n  }{A \\rightarrow B} (\\rightarrow I)^1\n  \\quad\n  \\substack{ \\pi_A \\\\ \\vdots \\\\ A }\n}{B} (\\rightarrow E)\n$$\n极大公式是指一个作为引入规则的结论，并立即成为一个消去规则的大前提的公式。在 $\\Pi$ 中，我们可以识别出两个这样的公式：\n1. 公式 $A \\rightarrow B$ 是 $(\\rightarrow I)^1$ 的结论，也是 $\\rightarrow E$ 的大前提。这是一个最外层的极大公式。\n2. 公式 $B \\wedge C$ 是 $\\wedge I$ 的结论，也是 $\\wedge E_1$ 的大前提。这个极大公式嵌套在 $\\rightarrow I$ 规则的子推导内部。\n\n正规化过程通过消除所有极大公式，将一个推导归约为其正规形式。保证终止的标准策略是首先消除最外层的极大公式。每次消除算作一个步骤。\n\n**步骤 1：消除极大公式 $A \\rightarrow B$。**\n这需要应用 $\\rightarrow$-转换规则。一个“$\\rightarrow I$ 后跟 $\\rightarrow E$”形式的推导，会被一个新的推导所取代，其中 $\\rightarrow E$ 的小前提的推导被用来替换所有被 $\\rightarrow I$ 消除的假设的出现。\n\n在我们的例子中，导致 $\\rightarrow I$ 规则的前提 $B$ 的子推导是 $\\mathcal{D}_1$，它依赖于假设 $[x:A]$。$\\rightarrow E$ 规则的小前提的推导是 $\\pi_A$。转换规则规定，我们将推导 $\\pi_A$ 替换 $\\mathcal{D}_1$ 中假设 $[x:A]$ 的每一个实例。\n\n将此转换应用于 $\\Pi$，我们得到一个新的推导 $\\Pi'$：\n$$\n\\Pi' = \\frac{\n  \\frac{\n    \\substack{ \\pi_A \\\\ \\vdots \\\\ u(\\pi_A):B }\n    \\quad\n    \\substack{ \\pi_A \\\\ \\vdots \\\\ v(\\pi_A):C }\n  }{B \\wedge C} (\\wedge I)\n}{B} (\\wedge E_1)\n$$\n这里，$u(\\pi_A)$ 表示将 $u(x)$ 中的假设 $x:A$ 替换为推导 $\\pi_A$ 后得到的推导。$v(\\pi_A)$ 同理。这构成了一个迂回消除步骤。\n\n**步骤 2：消除极大公式 $B \\wedge C$。**\n得到的推导 $\\Pi'$ 还不是正规的。正如问题陈述所预期的，移除外部的迂回暴露了内部的迂回。$\\Pi'$ 中的公式 $B \\wedge C$ 是 $\\wedge I$ 的结论，也是 $\\wedge E_1$ 的大前提。它是一个极大公式。\n\n这需要应用 $\\wedge$-转换规则。对于 $\\wedge E_1$，一个“$\\wedge I$ 后跟 $\\wedge E_1$”形式的推导，会被产生左合取项的子推导所取代。\n\n在我们的例子中，左合取项（$B$）的推导是 $u(\\pi_A)$，右合取项（$C$）的推导是 $v(\\pi_A)$。对 $\\Pi'$ 应用 $\\wedge$-转换，将其转换为一个新的推导 $\\Pi''$，该推导仅包含左合取项的推导：\n$$\n\\Pi'' = \\substack{ \\pi_A \\\\ \\vdots \\\\ u(\\pi_A):B }\n$$\n这构成了第二个迂回消除步骤。\n\n最终的推导 $\\Pi''$ 是 $u(\\pi_A)$。问题陈述指出 $u(x)$ 和 $\\pi_A$ 是正规推导。将一个正规推导替换到另一个推导中被消除的假设，这个操作会保持正规性。因此，$u(\\pi_A)$ 不包含极大公式，是一个正规推导。\n\n将 $\\Pi$ 转换为其正规形式 $\\Pi''$ 的过程需要恰好两个迂回消除步骤（转换）。这个步数是最小的，因为有两个必须被消除的不同极大公式，而每一步恰好消除一个。\n\n因此，所需的最小迂回消除步骤数为 $2$。", "answer": "$$\\boxed{2}$$", "id": "3047858"}]}
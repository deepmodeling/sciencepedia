{"hands_on_practices": [{"introduction": "要真正领会林斯特伦姆定理关于一阶逻辑（FOL）“最大性”的精髓，首先必须亲身体验其表达能力的边界。Ehrenfeucht–Fraïssé（EF）博弈是证明某个性质无法在一阶逻辑中定义的强大工具。下面的练习 [@problem_id:3046177] 提供了一个绝佳的实践机会，它将引导你通过具体的计算，利用 EF 博弈来证明像“图是连通的”这样一个基本性质，是无法用任何单个一阶逻辑语句来刻画的。", "problem": "令 $\\mathcal{L}$ 是简单无向图的语言，其含有一个二元关系符号 $E$。对于整数 $m \\geq 1$，定义两个有限 $\\mathcal{L}$-结构：\n- $G_{m}$ 是具有 $2^{m+1}$ 个顶点的圈图（每个顶点的度为 $2$，且唯一的简单圈长度为 $2^{m+1}$）。\n- $H_{m}$ 是两个圈图的不交并，每个圈图有 $2^{m}$ 个顶点（因此 $H_{m}$ 总共有 $2^{m+1}$ 个顶点，分为恰好两个连通分支）。\n\n考虑在语言 $\\mathcal{L}$ 中，关于结构对 $(G_{m},H_{m})$ 的 $r$ 轮 Ehrenfeucht–Fraïssé (EF) 博弈（Ehrenfeucht–Fraïssé (EF)）。\n\n仅使用一阶逻辑（first-order logic (FOL)）的基本定义和性质、EF 博弈以及紧致性（Compactness）和 Löwenheim–Skolem 性质的陈述：\n1. 确定一个关于 $m$ 的显式函数，该函数给出使得复制者（Duplicator）在关于 $(G_{m},H_{m})$ 的 $r$ 轮 EF 博弈中拥有获胜策略的最大整数 $r$。\n2. 证明这个 EF 博弈的计算结果如何蕴含了有限图的连通性不能被任何单个 FOL 语句所定义，并解释这与 Lindström 定理中 FOL 的极大性有何关联（即任何扩展 FOL 并同时满足紧致性（Compactness）和 Löwenheim–Skolem 性质的抽象逻辑，其所能定义的同构不变性质不会严格多于 FOL）。\n\n你必须提供这个最大整数 $r$ 的精确封闭形式表达式作为你的最终答案。不需要四舍五入。最终答案必须是关于 $m$ 的单个表达式。", "solution": "该问题主要要求两件事：首先，确定使得复制者（Duplicator）在关于图结构对 $(G_m, H_m)$ 的 $r$ 轮 Ehrenfeucht–Fraïssé (EF) 博弈中拥有获胜策略的最大整数 $r$；其次，将此结果与一阶逻辑（FOL）中图连通性的不可定义性以及 Lindström 定理联系起来。\n\n### 第一部分：确定最大的 $r$\n\n我们用 $A \\equiv_r B$ 表示“复制者在结构 $A$ 和 $B$ 上的 $r$ 轮 EF 博弈中拥有获胜策略”。问题是找到使得 $G_m \\equiv_r H_m$ 成立的最大整数 $r$。这等价于找到使得 $G_m \\not\\equiv_r H_m$ 成立的最小整数 $r$，该值将是 $r_{max}+1$。扰乱者（Spoiler）在 $r$ 轮博弈中拥有获胜策略，当且仅当存在一个在语言 $\\mathcal{L}$ 中量词秩至多为 $r$ 的语句 $\\Phi$，使得 $G_m$ 和 $H_m$ 中一个满足 $\\Phi$ 而另一个不满足。\n\n首先，我们来分析这两个结构。\n- $G_m$ 是圈图 $C_{2^{m+1}}$。它是一个连通图。顶点数为 $2^{m+1}$。任意两个顶点 $u,v$ 之间的距离 $d_{G_m}(u,v)$ 是良定义且有限的，最大值为 $2^{m+1}/2 = 2^m$。\n- $H_m$ 是两个圈图 $C_{2^m} \\sqcup C_{2^m}$ 的不交并。它有两个连通分支。总顶点数为 $2 \\times 2^m = 2^{m+1}$。如果两个顶点 $u,v$ 在 $H_m$ 的同一个连通分支中，它们之间的最大距离是 $2^m/2 = 2^{m-1}$。如果它们在不同的连通分支中，则它们之间没有路径，因此距离是无限的。\n\n我们的目标是证明最大的 $r$ 是 $m$。这涉及两个断言：\n1. $G_m \\equiv_m H_m$ (复制者赢得 $m$ 轮博弈)。\n2. $G_m \\not\\equiv_{m+1} H_m$ (扰乱者赢得 $(m+1)$ 轮博弈)。\n\n**断言 2：扰乱者赢得 $(m+1)$ 轮博弈。**\n为了证明扰乱者获胜，我们需要构造一个量词秩为 $m+1$ 的语句 $\\Phi$，该语句可以区分 $G_m$ 和 $H_m$。\n\n这两个图的一个关键区别是 $G_m$ 是连通的，直径为 $2^m$，而 $H_m$ 的任何连通分支的直径都是 $2^{m-1}$。我们可以利用这一点。\n在模型论中，一个标准结果是性质“$d(x,y) \\le 2^k$”可以用一个量词秩为 $k$ 的公式 $\\phi_k(x,y)$ 来表示。这些公式是归纳定义的：\n- $\\phi_0(x,y) := (x=y) \\lor E(x,y)$。其量词秩为 $0$。\n- $\\phi_{k+1}(x,y) := \\exists z (\\phi_k(x,z) \\land \\phi_k(z,y))$。$\\phi_{k+1}$ 的量词秩是 $qr(\\phi_k) + 1$，所以 $qr(\\phi_k) = k$。\n\n注意，$\\mathcal{M} \\models \\phi_k(u,v)$ 当且仅当在结构 $\\mathcal{M}$ 中，顶点 $u$ 和 $v$ 之间存在一条长度至多为 $2^k$ 的路径。\n\n考虑语句 $\\theta$：\n$$ \\theta := \\exists x \\forall y (\\phi_m(x,y)) $$\n我们来分析 $\\theta$ 的量词秩。公式 $\\phi_m(x,y)$ 的量词秩为 $m$。公式 $\\forall y (\\phi_m(x,y))$ 的量词秩也为 $m$，因为自由变量 $x$ 没有被量化。然而，在确定整个语句的秩时，我们计算的是嵌套深度。$\\forall y (\\phi_m(x,y))$ 的秩是 $m$。通过在前面加上 $\\exists x$，秩变为 $m+1$。所以，$qr(\\theta) = m+1$。\n\n现在，我们来检验 $\\theta$ 是否能区分 $G_m$ 和 $H_m$。\n- **在 $G_m$ 中**：语句 $\\theta$ 断言存在一个顶点 $x$，从它出发到任何其他顶点 $y$ 都有一条长度至多为 $2^m$ 的路径。在 $G_m=C_{2^{m+1}}$ 中，任意两顶点间的最大距离恰好是 $2^m$。所以，对于任意顶点 $x$，所有其他顶点 $y$ 与它的距离 $d_{G_m}(x,y) \\le 2^m$。这意味着 $\\phi_m(x,y)$ 对所有 $y$ 都为真。因此，对于任意选择的 $x$，$\\forall y (\\phi_m(x,y))$ 都为真。所以，$G_m \\models \\theta$。\n\n- **在 $H_m$ 中**：语句 $\\theta$ 断言相同的性质。任取一个顶点 $x$。这个顶点 $x$ 属于两个连通分支之一，比如 $C_A$。现在，任取另一个连通分支 $C_B$ 中的任意一个顶点 $y$。由于 $x$ 和 $y$ 之间没有路径，公式 $\\phi_m(x,y)$ 为假。因此，对于任意选择的 $x$，公式 $\\forall y (\\phi_m(x,y))$ 都为假（因为它对另一个分支中的任何 $y$ 都失败）。因此，不存在这样的 $x$，故 $H_m \\not\\models \\theta$。\n\n由于 $\\theta$ 是一个量词秩为 $m+1$ 的语句，它在 $G_m$ 中为真，在 $H_m$ 中为假，所以这两个结构不是 $(m+1)$-初等等价的。这意味着扰乱者在 $(m+1)$ 轮 EF 博弈中有获胜策略。因此，$r_{max}  m+1$。\n\n**断言 1：复制者赢得 $m$ 轮博弈。**\n证明复制者赢得 $m$ 轮博弈的过程更为复杂。它要求证明复制者可以在 $m$ 轮内维持一个特定的不变量。在 $k$ 轮之后（其中 $k \\le m$ 且已选择的点对为 $(g_1,h_1), \\dots, (g_k,h_k)$），复制者策略的不变量是：映射 $g_i \\mapsto h_i$ 是一个局部同构，并且对于任意两个已选择的顶点 $g_i, g_j$，它们的距离属性在“局部”上得以保持。一个常见的不变量是，对于已选择的点 $g_i, g_j$ 及其像 $h_i, h_j$，只要距离小于 $2^{m-k}$，就有 $d(g_i, g_j) = d(h_i, h_j)$。\n证明的本质在于，在 $k \\le m$ 轮的博弈中，扰乱者施加的 $k$ 个约束不足以耗尽复制者在一个局部上是路径的图中的所有可能性。圈的闭合发生在 ($2^m$ 和 $2^{m+1}$) 这样的尺度上，这个尺度太大了，以至于博弈在 $m+1$ 轮以内无法检测到。因为扰乱者无法在 $m$ 轮内迫使复制者“看清”整个结构，所以复制者总能继续找到局部一致的移动。\n因此，$G_m \\equiv_m H_m$，这意味着 $r_{max} \\ge m$。\n\n结合这两个断言，使得复制者拥有获胜策略的最大整数 $r$ 是 $m$。\n\n### 第二部分：对连通性和 Lindström 定理的引申\n\n**FOL 中连通性的不可定义性**\nEF 博弈的结果直接证明了对于有限图类，图的连通性不是一个一阶可定义的性质。\n该论证通过反证法进行：\n1. 为寻求矛盾，假设存在一个单一的 FOL 语句，我们称之为 $\\Phi_{conn}$，它为有限图定义了连通性。这意味着对于任何有限图 $G$，$G \\models \\Phi_{conn}$ 当且仅当 $G$ 是连通的。\n2. 设这个假设的语句 $\\Phi_{conn}$ 的量词秩为 $q$。\n3. 现在，考虑本问题中的特定结构对 $(G_m, H_m)$，并令 $m=q$。\n4. 从第一部分我们知道 $G_q \\equiv_q H_q$。根据 EF 博弈的基本性质，这意味着 $G_q$ 和 $H_q$ 满足所有量词秩最高为 $q$（含）的 FOL 语句。\n5. 因为 $qr(\\Phi_{conn}) = q$，所以必然有 $G_q \\models \\Phi_{conn} \\iff H_q \\models \\Phi_{conn}$。\n6. 根据其构造，$G_q$ 是一个圈图，因此是连通的。根据我们对 $\\Phi_{conn}$ 的假设，必然有 $G_q \\models \\Phi_{conn}$。\n7. 从第 5 步和第 6 步可知，我们也必然有 $H_q \\models \\Phi_{conn}$。\n8. 然而，根据构造，$H_q$ 是两个圈图的不交并，所以是不连通的。根据我们对 $\\Phi_{conn}$ 的假设，这意味着 $H_q \\not\\models \\Phi_{conn}$。\n9. 我们得到了一个矛盾：$H_q$ 既必须满足也必须不满足 $\\Phi_{conn}$。因此，我们的初始假设必然是错误的。不存在这样的单一 FOL 语句 $\\Phi_{conn}$。\n\n**与 Lindström 定理的联系**\nLindström 定理将 FOL 刻画为极大的“正则”逻辑。它指出，任何扩展了 FOL 表达能力并且同时满足两个关键元逻辑性质——紧致性定理（Compactness Theorem）和向下 Löwenheim-Skolem 性质（Downward Löwenheim-Skolem property）——的抽象逻辑 $\\mathcal{L}'$，其表达能力必然等价于 FOL。\n\n我们关于连通性的结果完美地说明了这一原理：\n1. 我们已经证明，作为一个连通图的性质在 FOL 中是不可定义的。\n2. 这意味着一个假设的逻辑，例如 $\\mathcal{L}_{conn} = \\text{FOL} + \\{\\text{CONN}\\}$（其中 CONN 是一个仅在连通图中为真的语句），其表达能力将严格强于 FOL。\n3. 根据 Lindström 定理，由于 $\\mathcal{L}_{conn}$ 比 FOL 的表达能力更强，它必须不满足以下条件之一：紧致性定理或向下 Löwenheim-Skolem 性质。\n4. 事实上，可以证明一个能够表达连通性的逻辑必然违反紧致性定理。考虑一个理论 $\\Gamma$，它由我们假设逻辑中的语句 $\\text{CONN}(c,d)$（表示 $c$ 和 $d$ 连通）和一组无穷多的一阶逻辑语句 $\\{\\neg\\delta_n(c,d) \\mid n \\in \\mathbb{N}\\}$ 组成，其中 $\\delta_n(c,d)$ 表示“$c$ 和 $d$ 之间的距离小于或等于 $n$”。$\\Gamma$ 的任何有限子集都是可满足的（例如，在一个图中，让 $c$ 和 $d$ 之间有一条足够长的简单路径）。然而，整个集合 $\\Gamma$ 是不可满足的，因为它断言 $c$ 和 $d$ 之间存在一条路径，但同时又否定了所有可能的有限长度。这证明了紧致性的失效。\n\n总而言之，在 $(G_m, H_m)$ 上的 EF 博弈为 FOL 的表达能力局限性提供了一个具体的例子。Lindström 定理将这一观察普遍化，确立了这种局限性并非偶然的弱点，而是一种本质上的权衡：为了获得定义像连通性这类性质的能力，必须牺牲像紧致性这样使 FOL 具有良好性质的基本而强大的属性。", "answer": "$$ \\boxed{m} $$", "id": "3046177"}, {"introduction": "在了解了一阶逻辑的表达能力限制之后，我们转向探索那些共同定义了其“良好行为”的核心性质，这些性质正是林斯特伦姆定理的关键组成部分。相对化闭包（closure under relativization）是其中一个关键特征，它保证了一阶逻辑能够将其表达能力从整个结构“聚焦”到其中可定义的部分子结构上。这个练习 [@problem_id:2976150] 旨在阐明相对化的具体操作，通过一个清晰的例子帮助你掌握如何将一个公式转换，使其仅在结构的一个特定子集上生效。", "problem": "设 $\\sigma$ 为一个关系词汇，$\\mathcal{L}$ 为一个作用于 $\\sigma$-结构上的逻辑，它在布尔联结词下封闭，并且在对新的一元谓词符号的相对化下封闭。回顾以下模型论中的基本定义和事实，你可以将其视为已知：(i) 给定一个论域为 $M$ 的 $\\sigma$-结构 $\\mathfrak{M}$ 和一个子集 $S \\subseteq M$，导出的 $\\sigma$-子结构 $\\mathfrak{M} \\upharpoonright S$ 是一个以 $S$ 为论域的结构，其中每个关系符号 $R \\in \\sigma$ 被解释为 $R^{\\mathfrak{M}}$ 在来自 $S$ 的元组上的限制；(ii) 如果存在一个带有一个自由变量的公式 $\\delta(x) \\in \\mathcal{L}$，使得 $S = \\{ a \\in M : \\mathfrak{M} \\models \\delta(a) \\}$，则子集 $S \\subseteq M$ 是可定义的；(iii) 对于任何不在 $\\sigma$ 中的新的一元谓词符号 $U$，一个解释 $(\\mathfrak{M}, U)$ 是一个 $\\sigma \\cup \\{U\\}$-结构，它通过选择一个 $U^{\\mathfrak{M}} \\subseteq M$ 来扩展 $\\mathfrak{M}$。\n\n选择一个选项，该选项正确解释了 $\\mathcal{L}$ 中相对化下的封闭性如何使得可定义性能够从整个结构传递到可定义的子结构，并使用一元谓词符号 $U$ 提供了一个正确的具体例子。\n\nA. 如果 $\\mathcal{L}$ 在相对化下是封闭的，那么对于每个 $\\sigma$-公式 $\\varphi(\\bar{x}) \\in \\mathcal{L}$，都存在一个 $\\sigma \\cup \\{U\\}$-公式 $\\varphi^{U}(\\bar{x}) \\in \\mathcal{L}$，使得对于每个 $\\sigma$-结构 $\\mathfrak{M}$、每个子集 $S \\subseteq M$ 以及每个赋值 $\\bar{a} \\in S^{|\\bar{x}|}$，我们有\n$$\n\\mathfrak{M} \\upharpoonright S \\models \\varphi(\\bar{a}) \\quad \\text{iff} \\quad (\\mathfrak{M}, U^{\\mathfrak{M}} := S) \\models \\varphi^{U}(\\bar{a}).\n$$\n映射 $\\varphi \\mapsto \\varphi^{U}$ 是通过将量词限制到 $U$ 来给出的：原子公式和布尔组合保持不变，$(\\exists y\\, \\psi)^{U} := \\exists y\\,(U(y) \\wedge \\psi^{U})$ 并且 $(\\forall y\\, \\psi)^{U} := \\forall y\\,(U(y) \\rightarrow \\psi^{U})$。因此，如果 $S$ 是由一个 $\\sigma$-公式 $\\delta(x)$ 定义的，那么由 $\\varphi$ 定义的 $\\mathfrak{M} \\upharpoonright S$ 的性质，在 $\\mathfrak{M}$ 中是由通过将 $\\varphi^{U}$ 中的 $U$ 替换为 $\\delta$ 而得到的 $\\sigma$-公式定义的。具体例子：在由一元谓词 $R$ 扩展的图语言 $\\sigma = \\{E\\}$ 中，令 $\\delta(x) := R(x)$，因此 $S = \\{a \\in M : R(a)\\}$。对于表示“存在一个三角形”的公式 $\\varphi$，例如，\n$$\n\\varphi := \\exists x \\exists y \\exists z \\Big( x \\neq y \\wedge y \\neq z \\wedge z \\neq x \\wedge E(x,y) \\wedge E(y,z) \\wedge E(z,x) \\Big),\n$$\n相对化 $\\varphi^{U}$ 是通过在所有量词中插入 $U$-守卫得到的。将 $U$ 替换为 $R$ 会产生一个 $\\sigma \\cup \\{R\\}$-公式，该公式在任何 $(\\mathfrak{M},R)$ 中成立，当且仅当在 $R$-顶点上导出的子图包含一个三角形时。\n\nB. 相对化下的封闭性要求为每个关系 $R \\in \\sigma$ 引入一个新的关系符号 $R_{U}$ 来表示其在 $U$ 上的限制，并且只有在这样的扩展之后才能表达导出子结构的性质；如果不通过所有 $R_{U}$ 扩展符号集，即使对于简单的存在公式，可定义性的传递也会失败。\n\nC. 对一元谓词 $U$ 的相对化在一阶逻辑中是不可用的；要谈论一个可定义的子结构，必须对 $U$ 进行二阶量化，因此相对化下的封闭性是一个严格的二阶性质，不能用于在一阶语境中传递可定义性。\n\nD. 相对化下的封闭性只保证全称语句被保存到子结构中（通过限制论域），但存在性内容会丢失；因此可定义性只对 $\\forall$-语句传递，并且对于任意公式没有通用的相对化方案。\n\nE. 正确的相对化方法是保持 $\\exists$-量词不变，仅将 $\\forall y\\, \\psi$ 替换为 $\\forall y\\,(U(y) \\rightarrow \\psi)$，同时将每个原子公式 $R(t_{1},\\dots,t_{n})$ 重写为 $U(t_{1}) \\wedge \\cdots \\wedge U(t_{n}) \\wedge R(t_{1},\\dots,t_{n})$；这确保了在 $U$ 之外的赋值被排除，并且是可定义性传递到可定义子结构的充要条件。", "solution": "问题的核心是逻辑 $\\mathcal{L}$ 的“相对化下的封闭性”这一概念。该性质断言，对于任何公式 $\\varphi \\in \\mathcal{L}$ 和任何新的一元谓词符号 $U$，都存在另一个公式 $\\varphi^U \\in \\mathcal{L}$（在扩展词汇 $\\sigma \\cup \\{U\\}$ 中），它表达了 $\\varphi$ 在子结构中解释时的含义。\n\n形式上，对于任何 $\\sigma$-结构 $\\mathfrak{M}$、任何非空子集 $S \\subseteq M$ 以及 $\\varphi$ 的自由变量在 $S$ 中的任何赋值 $\\bar{a}$，以下等价关系必须成立：\n$$\n\\mathfrak{M} \\upharpoonright S \\models \\varphi(\\bar{a}) \\quad \\text{iff} \\quad (\\mathfrak{M}, U^{\\mathfrak{M}} := S) \\models \\varphi^{U}(\\bar{a})\n$$\n其中 $(\\mathfrak{M}, U^{\\mathfrak{M}} := S)$ 是 $\\mathfrak{M}$ 的扩展，其中新符号 $U$ 被解释为集合 $S$。\n\n对于一阶逻辑（这类问题的隐含背景），相对化公式 $\\varphi^U$ 是通过对 $\\varphi$ 的结构进行归纳来构造的：\n1.  **原子公式**：如果 $\\varphi$ 是一个原子公式，例如 $R(t_1, \\dots, t_k)$，那么 $\\varphi^U$ 就是 $\\varphi$。项 $t_i$ 指的是变量或常量。变量要么是自由的（此时其赋值 $\\bar{a}$ 来自 $S$），要么是约束的。如果是约束的，量词将如下文所述受到限制。因此，原子公式是在已经被约束在子结构论域内的元素上进行求值的。\n2.  **布尔联结词**：相对化在布尔联结词上是可分配的。例如，$(\\neg \\psi)^U := \\neg (\\psi^U)$ 和 $(\\psi_1 \\wedge \\psi_2)^U := \\psi_1^U \\wedge \\psi_2^U$。\n3.  **量词**：这是最关键的部分。为了在子结构 $\\mathfrak{M} \\upharpoonright S$ 的论域 $S$ 上进行量化，我们必须将 $\\mathfrak{M}$ 中的量词限制在集合 $U^{\\mathfrak{M}} = S$ 上。\n    - $(\\exists y \\, \\psi)^U := \\exists y \\, (U(y) \\wedge \\psi^U)$。这正确地将“存在一个 $y$ 在 $S$ 中使得 $\\psi$ 成立”翻译到扩展结构 $(\\mathfrak{M}, S)$ 的语言中。\n    - $(\\forall y \\, \\psi)^U := \\forall y \\, (U(y) \\rightarrow \\psi^U)$。这正确地翻译了“对于所有在 $S$ 中的 $y$，$\\psi$ 成立”。\n\n问题进一步询问这如何实现可定义性的传递。如果子集 $S$ 本身在 $\\mathfrak{M}$ 中可由一个 $\\sigma$-公式 $\\delta(x)$ 定义，即 $S = \\{ a \\in M : \\mathfrak{M} \\models \\delta(a) \\}$，那么我们可以在公式 $\\varphi^U$ 中用 $\\delta(t)$ 替换每个出现的 $U(t)$。结果是一个纯粹在原始词汇 $\\sigma$ 中的公式 $\\varphi^\\delta$。等价关系变为：\n$$\n\\mathfrak{M} \\upharpoonright S \\models \\varphi(\\bar{a}) \\quad \\text{iff} \\quad \\mathfrak{M} \\models \\varphi^{\\delta}(\\bar{a})\n$$\n这表明，在可定义子结构 $\\mathfrak{M} \\upharpoonright S$ 中由 $\\varphi$ 定义的性质，对应于在原始结构 $\\mathfrak{M}$ 中由 $\\varphi^{\\delta}$ 定义的性质。\n\n### 逐个选项分析\n\n**A. 如果 $\\mathcal{L}$ 在相对化下是封闭的，那么...**\n该选项给出了定义相对化的形式等价关系：\n$$\n\\mathfrak{M} \\upharpoonright S \\models \\varphi(\\bar{a}) \\quad \\text{iff} \\quad (\\mathfrak{M}, U^{\\mathfrak{M}} := S) \\models \\varphi^{U}(\\bar{a})\n$$\n然后它提供了标准且正确的归纳构造方法来构建 $\\varphi^U$：原子公式不变，布尔联结词可分配，量词通过守卫进行限制：$(\\exists y\\, \\psi)^{U} := \\exists y\\,(U(y) \\wedge \\psi^{U})$ 和 $(\\forall y\\, \\psi)^{U} := \\forall y\\,(U(y) \\rightarrow \\psi^{U})$。\n它接着正确地解释了可定义性的传递：如果 $S$ 是由 $\\delta(x)$ 定义的，可以在 $\\varphi^U$ 中用 $\\delta$ 替换 $U$ 以获得一个在原始结构中表达该性质的 $\\sigma$-公式。\n具体例子也是正确的。公式 $\\varphi$ 表达了三角形的存在性。要检查由集合 $R$ 中的顶点导出的子图内是否存在三角形，必须将 $\\varphi$ 相对化到 $R$。相对化后的公式是 `∃x(R(x) ∧ ∃y(R(y) ∧ ∃z(R(z) ∧ ...)))`，它当且仅当存在一个所有三个顶点都在由 $R$ 定义的集合中的三角形时才成立。该选项准确地描述了整个过程。\n结论：**正确**。\n\n**B. 相对化下的封闭性要求为每个关系 $R \\in \\sigma$ 引入一个新的关系符号 $R_{U}$...**\n该选项声称对于每个关系 $R \\in \\sigma$，必须引入一个新的符号 $R_U$ 来表示其在 $U$ 上的限制。这是不正确的。相对化过程不需要改变原始的关系符号。公式 $\\varphi^U$ 是在符号集 $\\sigma \\cup \\{U\\}$ 中的。在扩展结构 $(\\mathfrak{M}, U)$ 中，$\\sigma$ 中符号 $R$ 的解释保持不变。量词的限制足以确保当像 $R(x_1, \\dots, x_n)$ 这样的原子公式被求值时，变量 $x_1, \\dots, x_n$ 已经被保证指代 $U^{\\mathfrak{M}}$ 中的元素。在这些元素上，$R(x_1, \\dots, x_n)$ 在扩展结构中的真值与它在导出子结构中的真值相同。不需要像 $R_U$ 这样的新符号。\n结论：**不正确**。\n\n**C. 对一元谓词 $U$ 的相对化在一阶逻辑中是不可用的...**\n这个陈述在事实上是不正确的。相对化是为任何一阶公式定义的标准句法转换，如选项A的分析中所述。它是研究一阶逻辑模型论的基本工具。声称它需要二阶量化也是错误的。符号 $U$ 被添加到符号集中，并被视为一个常量谓词符号；它不是一个被量化的变量。逻辑 $\\mathcal{L}$ 仅需要能够表达在扩展符号集 $\\sigma \\cup \\{U\\}$ 上的公式。\n结论：**不正确**。\n\n**D. 相对化下的封闭性只保证全称语句被保存到子结构中...**\n这将相对化与保存定理混淆了。一个已知的结果（Łoś-Tarski 定理）是，在子结构下保存的语句等价于全称语句。然而，相对化是一个更通用的句法工具，适用于*任何*公式，而不仅仅是全称公式。它为任意性质（包括存在性性质）提供了翻译。声称存在性内容会丢失是错误的；存在量词的相对化，$(\\exists y\\, \\psi)^{U} := \\exists y\\,(U(y) \\wedge \\psi^{U})$，明确而正确地捕捉了在子集 $U$ 上的存在量化。声称没有通用方案也是错误的，因为这样的方案是众所周知的，并在选项A中有所描述。\n结论：**不正确**。\n\n**E. 正确的相对化方法是保持 $\\exists$-量词不变...**\n该选项提出了一个替代的、不正确的相对化方案。我们来测试一下它的提议：\n- $(\\exists y \\, \\psi)^E := \\exists y \\, (\\psi^E)$\n- $(\\forall y \\, \\psi)^E := \\forall y \\, (U(y) \\rightarrow \\psi^E)$\n- $(R(t_1, \\dots, t_n))^E := U(t_1) \\wedge \\dots \\wedge U(t_n) \\wedge R(t_1, \\dots, t_n)$\n\n让我们用一个涉及否定的公式来测试它，例如对于一元谓词 $P$ 的公式 $\\varphi := \\exists y \\, \\neg P(y)$。\n我们想表达的是，在子结构 $\\mathfrak{M} \\upharpoonright S$ 中，存在一个不满足 $P$ 的元素。这意味着存在某个 $a \\in S$ 使得 $a \\notin P^{\\mathfrak{M}}$。在 $(\\mathfrak{M}, S)$ 中对应的正确公式是 $\\exists y \\, (U(y) \\wedge \\neg P(y))$。\n\n根据选项E的方案：\n- $(\\exists y \\, \\neg P(y))^E = \\exists y \\, ((\\neg P(y))^E)$\n- $(\\neg P(y))^E = \\neg((P(y))^E)$\n- $(P(y))^E = U(y) \\wedge P(y)$\n- 结合这些，我们得到 $\\exists y \\, \\neg(U(y) \\wedge P(y))$，这在逻辑上等价于 $\\exists y \\, (\\neg U(y) \\vee \\neg P(y))$。\n\n这个结果公式与正确的公式不等价。例如，如果 $S$ 是 $M$ 的一个真子集，那么存在一个元素 $b \\in M \\setminus S$。对于这个 $b$，$\\neg U(b)$ 为真，使得公式 $\\exists y \\, (\\neg U(y) \\vee \\neg P(y))$ 为真，而不管 $S$ 内部元素的性质如何。这表明选项E中的方案是有缺陷的。如选项A所述，限制量词的标准方法才是正确的。\n结论：**不正确**。", "answer": "$$\\boxed{A}$$", "id": "2976150"}, {"introduction": "紧致性定理是林斯特伦定理中与 Löwenheim–Skolem 性质并列的另一块基石。虽然紧致性本身是一个抽象的元逻辑性质，但超积（ultraproduct）构造为我们提供了一种具体的方法来构建模型，从而证明该定理。这个练习 [@problem_id:2976157] 深入探讨了超积构造的核心引擎——Łoś 定理，它揭示了为何一阶逻辑公式的真值能够在分量结构和它们的超积之间如此完美地传递，这正是紧致性得以成立的关键所在。", "problem": "选择一个选项，该选项在一阶逻辑（FO）的背景下，正确且精确地完成了以下所有任务：使用超滤子定义一族结构的超积，陈述了适用于 FO 公式（而不仅仅是句子）的 Łoś 定理，并以适用于 Lindström 定理的水平，解释了为什么 Łoś 定理能够支持 FO 的紧致性定理。\n\nA. 给定一族 $\\mathcal{L}$-结构 $\\{\\mathcal{M}_i : i \\in I\\}$ 以及 $I$ 上的一个超滤子 $\\mathcal{U}$，超积 $\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U}$ 的论域是由函数 $a : I \\to \\bigsqcup_{i \\in I} M_i$（其中 $a(i) \\in M_i$）的 $\\mathcal{U}$-等价类构成的集合，其中 $a \\sim b$ 当且仅当 $\\{ i \\in I : a(i) = b(i) \\} \\in \\mathcal{U}$。对每个元数为 $n$ 的函数符号 $f$，定义 $f^{\\prod/\\mathcal{U}}([a_1],\\dots,[a_n]) = [i \\mapsto f^{\\mathcal{M}_i}(a_1(i),\\dots,a_n(i))]$。对每个元数为 $n$ 的关系符号 $R$，规定 $R^{\\prod/\\mathcal{U}}([a_1],\\dots,[a_n])$ 成立当且仅当 $\\{ i \\in I : R^{\\mathcal{M}_i}(a_1(i),\\dots,a_n(i)) \\} \\in \\mathcal{U}$。Łoś 定理：对任意 FO 公式 $\\varphi(x_1,\\dots,x_n)$ 以及超积中的元素 $[a_1],\\dots,[a_n]$，$$\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U} \\models \\varphi([a_1],\\dots,[a_n]) \\quad \\text{当且仅当} \\quad \\{ i \\in I : \\mathcal{M}_i \\models \\varphi(a_1(i),\\dots,a_n(i)) \\} \\in \\mathcal{U}.$$ 这支持了紧致性定理：给定一个 FO 句子集 $\\Gamma$，其任意有限子集都是可满足的，用 $I$ 来索引 $\\Gamma$ 的所有有限子集 $\\Delta$，并选取 $\\mathcal{M}_\\Delta \\models \\Delta$。令 $\\mathcal{U}$ 为 $I$ 上的一个超滤子，它扩展了由锥 $X_\\varphi = \\{ \\Delta \\in I : \\varphi \\in \\Delta \\}$（对于 $\\varphi \\in \\Gamma$）生成的滤子。根据 Łoś 定理，$\\prod_{\\Delta \\in I} \\mathcal{M}_\\Delta / \\mathcal{U} \\models \\Gamma$，从而证明了紧致性定理。这是 Lindström 定理中一个关键的组成部分，该定理刻画了一阶逻辑（FO）是在满足紧致性和向下 Löwenheim–Skolem 性质的抽象逻辑中是极大的。\n\nB. 关于 $I$ 上的一个滤子 $\\mathcal{F}$，$\\{\\mathcal{M}_i : i \\in I\\}$ 的超积是笛卡尔积 $\\prod_{i \\in I} M_i$，其中符号作逐点解释，并且 Łoś 定理指出，对每个 FO 句子 $\\sigma$，有 $\\prod_{i \\in I} \\mathcal{M}_i \\models \\sigma$ 当且仅当 $\\{ i \\in I : \\mathcal{M}_i \\models \\sigma \\} \\in \\mathcal{F}$。这证明了完备性定理，因此蕴含了紧致性，而紧致性是 Lindström 定理中的主要假设。\n\nC. 超积是通过取笛卡尔积 $\\prod_{i \\in I} M_i$ 并按坐标解释关系和函数来构成的，使用余有限滤子来定义真值：一个公式在超积中成立，当且仅当它在除了有限多个 $i \\in I$ 之外的所有 $\\mathcal{M}_i$ 中都成立。Łoś 定理对句子成立，但对带有自由变量的公式不成立，而这足以通过一个简单的编码论证来推导紧致性，该论证是 Lindström 定理中的主要工具。\n\nD. 超积是直积的任何在投影下封闭的子结构，并且 Łoś 定理断言，如果每个 $\\mathcal{M}_i$ 都满足一个 FO 句子 $\\sigma$，那么该积也满足它；这会得出向上 Löwenheim–Skolem 定理，该定理又蕴含了紧致性，并提供了 Lindström 定理的核心。", "solution": "问题陈述要求选择一个选项，该选项正确定义了超积构造，陈述了适用于一阶公式的 Łoś 定理，并解释了该定理在 Lindström 定理的背景下，在证明一阶逻辑（FO）的紧致性定理中的作用。问题陈述本身是数理逻辑任务的一个有效指令。它具有科学依据，提法恰当且客观。我将继续分析每个选项。\n\n正确答案所需的核心组成部分是：\n1.  **超积定义**：结构 $\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U}$ 的精确定义，包括其论域（作为笛卡尔积 $\\prod_{i \\in I} M_i$ 上的等价类）以及函数和关系符号的解释。等价关系必须通过索引集 $I$ 上的一个超滤子 $\\mathcal{U}$ 来定义。\n2.  **Łoś 定理**：对任意 FO 公式 $\\varphi(x_1, \\ldots, x_n)$（而不仅仅是句子）的正确陈述。该定理建立了一种等价关系：一个公式在超积中对于给定的元素赋值为真，当且仅当该公式在分量结构中（使用相应的分量赋值）为真的索引集合是该超滤子的一个成员。\n3.  **与紧致性和 Lindström 定理的联系**：使用超积证明 FO 紧致性定理的正确纲要。这涉及从一个无限可满足的句子集 $\\Gamma$ 的有限子集的模型来为其构造一个模型。该解释还应正确地将此结果置于 Lindström 定理的背景下，该定理根据紧致性和向下 Löwenheim-Skolem 性质来刻画 FO。\n\n**选项 A 分析**\n\n1.  **超积定义**：选项 A 将超积 $\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U}$ 的论域定义为由函数 $a: I \\to \\bigsqcup_{i \\in I} M_i$（其中 $a(i) \\in M_i$）的 $\\mathcal{U}$-等价类构成的集合。这是对笛卡尔积 $\\prod_{i \\in I} M_i$ 中元素的一个正确但略显冗长的描述。等价关系被正确地陈述为 $a \\sim b$ 当且仅当 $\\{ i \\in I : a(i) = b(i) \\} \\in \\mathcal{U}$。一个 $n$-元函数符号 $f$ 的解释由 $f^{\\prod/\\mathcal{U}}([a_1],\\dots,[a_n]) = [i \\mapsto f^{\\mathcal{M}_i}(a_1(i),\\dots,a_n(i))]$ 给出，一个 $n$-元关系符号 $R$ 的解释由 $R^{\\prod/\\mathcal{U}}([a_1],\\dots,[a_n])$ 成立当且仅当 $\\{ i \\in I : R^{\\mathcal{M}_i}(a_1(i),\\dots,a_n(i)) \\} \\in \\mathcal{U}$ 给出。这些定义是标准且正确的。\n\n2.  **Łoś 定理**：该选项陈述，对于任意 FO 公式 $\\varphi(x_1, \\ldots, x_n)$ 和超积中的元素 $[a_1], \\ldots, [a_n]$，我们有 $\\prod_{i \\in I} \\mathcal{M}_i / \\mathcal{U} \\models \\varphi([a_1],\\dots,[a_n])$ 当且仅当 $\\{ i \\in I : \\mathcal{M}_i \\models \\varphi(a_1(i),\\dots,a_n(i)) \\} \\in \\mathcal{U}$。这是 Łoś 定理的正确且通用的形式，适用于所有公式，符合问题要求。\n\n3.  **与紧致性和 Lindström 定理的联系**：该解释正确地概述了紧致性定理的标准超积证明。它从一个句子集 $\\Gamma$ 开始，其中每个有限子集 $\\Delta$都有一个模型 $\\mathcal{M}_\\Delta$。索引集 $I$ 是所有这些有限子集 $\\Delta$ 的集合。它正确地指出了需要 $I$ 上的一个超滤子 $\\mathcal{U}$，该超滤子扩展了由集合 $X_\\varphi = \\{ \\Delta \\in I : \\varphi \\in \\Delta \\}$（对于每个 $\\varphi \\in \\Gamma$）生成的滤子。这种超滤子的存在性由超滤子引理（选择公理的一个推论）保证。它正确地得出结论：通过将 Łoś 定理应用于超积 $\\prod_{\\Delta \\in I} \\mathcal{M}_\\Delta / \\mathcal{U}$，可以证明该结构是 $\\Gamma$ 中所有句子的一个模型。对于任意 $\\sigma \\in \\Gamma$，集合 $X_\\sigma \\in \\mathcal{U}$。由于对于任意 $\\Delta \\in X_\\sigma$，我们有 $\\sigma \\in \\Delta$，因此 $\\mathcal{M}_\\Delta \\models \\sigma$，由此可知 $X_\\sigma \\subseteq \\{ \\Delta \\in I : \\mathcal{M}_\\Delta \\models \\sigma \\}$。由于超滤子在超集下是封闭的，我们有 $\\{ \\Delta \\in I : \\mathcal{M}_\\Delta \\models \\sigma \\} \\in \\mathcal{U}$，因此根据 Łoś 定理，超积满足 $\\sigma$。最后，它正确地陈述了其对于 Lindström 定理的重要性：FO 被刻画为满足紧致性和向下 Löwenheim-Skolem 性质的极大抽象逻辑。这整个解释是准确且相关的。\n\n**对选项 A 的裁定**：正确。\n\n**选项 B 分析**\n\n1.  **超积定义**：该选项声称该结构是关于一个*滤子* $\\mathcal{F}$ 而非超滤子建立的。它还声称论域是笛卡尔积 $\\prod_{i \\in I} M_i$，省略了通过等价关系取商的关键步骤。这描述的是直积，而不是超积。\n\n2.  **Łoś 定理**：它错误地为滤子 $\\mathcal{F}$ 和直积结构陈述了该定理。Łoś 定理从根本上依赖于*超滤子*的性质和商结构。此外，它将该定理限制于句子，这与问题规范相矛盾。\n\n3.  **与紧致性的联系**：它提出了一个混淆的说法，即 Łoś 定理证明了完备性定理，后者又蕴含了紧致性。紧致性定理的超积证明是一个纯语义的证明，它绕过了完备性定理核心的句法概念。\n\n**对选项 B 的裁定**：不正确。\n\n**选项 C 分析**\n\n1.  **超积定义**：它错误地将滤子特化为*余有限滤子*。虽然余有限滤子是一个滤子，但只有在索引集 $I$ 是有限的情况下它才是一个超滤子（在这种情况下，超积与某个分量结构同构）。对于无限集，它不是一个超滤子。超积的概念需要一个一般的超滤子。它也省略了商构造。\n\n2.  **Łoś 定理**：它提出了一个事实性错误的说法，即 Łoś 定理“对句子成立，但对带有自由变量的公式不成立”。该定理的强大之处和实用性恰恰来自于它对所有一阶公式都成立，这一点可以通过对公式复杂度的归纳来证明。\n\n3.  **与紧致性的联系**：该解释建立在定理仅限于句子的错误前提之上。\n\n**对选项 C 的裁定**：不正确。\n\n**选项 D 分析**\n\n1.  **超积定义**：它提供了一个与超积的标准定义完全无关的定义——“直积的任何在投影下封闭的子结构”。超积是直积的一个*商*。\n\n2.  **Łoś 定理**：它将该定理错误地陈述为一个简单的保持性质：“如果每个 $\\mathcal{M}_i$ 都满足一个 FO 句子 $\\sigma$，那么该积也满足它”。这是实际定理的一个弱推论，并且对于积而言仅对某些类型的句子（全称句）成立。Łoś 定理是一个更为强大的双向条件传递原理。\n\n3.  **与紧致性的联系**：它错误地将 Łoś 定理与*向上* Löwenheim-Skolem 定理联系起来，然后再与紧致性联系起来。更重要的是，它错误地识别了 Lindström 定理的组成部分，该定理使用的是*向下* Löwenheim-Skolem 性质，而非向上的。\n\n**对选项 D 的裁定**：不正确。\n\n**结论**\n\n只有选项 A 对所有三个要求的部分都提供了完全正确和精确的说明：超积的定义，适用于公式的 Łoś 定理的陈述，及其在证明紧致性定理和与 Lindström 定理相关性方面的作用的解释。", "answer": "$$\\boxed{A}$$", "id": "2976157"}]}
{"hands_on_practices": [{"introduction": "我们从一个基本练习开始，以巩固逻辑等价的核心定义。此练习旨在阐明逻辑等价与重言式之间的根本联系 [@problem_id:3046361]。通过识别那些双条件叙述为可满足但非永真的公式对，你将能更深刻地理解两个命题在何种意义上才能被认为是“逻辑上相同的”。", "problem": "在经典命题逻辑中，两个公式 $\\,\\varphi\\,$ 和 $\\,\\psi\\,$ 是逻辑等价的，当且仅当双条件句 $\\,\\varphi \\leftrightarrow \\psi\\,$ 是有效的，即在每个命题赋值下都为真。选择所有给出公式对 $\\,(\\varphi,\\psi)\\,$ 的选项，使得 $\\,\\varphi \\leftrightarrow \\psi\\,$ 是可满足的但不是有效的，从而表明 $\\,\\varphi\\,$ 和 $\\,\\psi\\,$ 不是逻辑等价的。\n\nA. $(\\,p,\\; p \\lor q\\,)$\n\nB. $(\\,p \\lor q,\\; q \\lor p\\,)$\n\nC. $(\\,p,\\; \\lnot p\\,)$\n\nD. $(\\,p \\land q,\\; p\\,)$\n\nE. $(\\,p \\lor \\lnot p,\\; q \\to p\\,)$", "solution": "对问题陈述进行验证。\n\n**步骤1：提取已知条件**\n- 研究领域：经典命题逻辑。\n- 定义：两个公式 $\\varphi$ 和 $\\psi$ 是逻辑等价的，当且仅当双条件句 $\\varphi \\leftrightarrow \\psi$ 是有效的。\n- 定义：一个公式是有效的，如果它在每个命题赋值下都为真。\n- 任务：选择所有提供公式对 $(\\varphi, \\psi)$ 的选项，使得 $\\varphi \\leftrightarrow \\psi$ 是可满足的但不是有效的。\n\n**步骤2：使用提取的已知条件进行验证**\n- **科学依据**：该问题是在经典命题逻辑的标准框架内提出的。逻辑等价、有效性和可满足性的定义都是该领域的标准和基础。\n- **适定性**：该问题是适定的。“可满足但非有效”是一个精确的逻辑属性。对于任何给定的公式对 $(\\varphi, \\psi)$，双条件句 $\\varphi \\leftrightarrow \\psi$ 在所有可能赋值下的真值都可以系统地确定（例如，通过真值表）。这使得可以唯一且可验证地确定哪些选项满足所述标准。\n- **客观性**：问题以形式化、客观的语言陈述，没有歧义或主观因素。\n\n**步骤3：结论与行动**\n问题陈述是有效的，因为它具有科学依据、适定、客观且自洽。可以继续求解过程。\n\n**求解过程**\n问题要求我们从给定选项中找出所有的公式对 $(\\varphi, \\psi)$，使得双条件公式 $\\varphi \\leftrightarrow \\psi$ 是可满足的但不是有效的。\n\n设命题赋值为一个函数 $v$，它为每个命题变量赋予一个真值，真 ($T$) 或假 ($F$)。\n\n一个公式 $\\chi$ 是**可满足的**，如果存在至少一个赋值 $v$ 使得 $v(\\chi) = T$。\n对于双条件句 $\\varphi \\leftrightarrow \\psi$，这意味着至少存在一个赋值 $v$，使得 $v(\\varphi)$ 和 $v(\\psi)$ 具有相同的真值，即 $v(\\varphi) = v(\\psi)$。\n\n一个公式 $\\chi$ 是**有效的**（一个重言式），如果对于每个赋值 $v$，$v(\\chi) = T$。\n$\\varphi \\leftrightarrow \\psi$ **不是有效的**这一条件意味着存在至少一个赋值 $v'$ 使得 $v'(\\varphi \\leftrightarrow \\psi) = F$。这发生在 $v'(\\varphi)$ 和 $v'(\\psi)$ 具有不同真值时，即 $v'(\\varphi) \\neq v'(\\psi)$。\n\n总而言之，我们在寻找这样的公式对 $(\\varphi, \\psi)$：它们不是逻辑等价的（因为它们的双条件句不是有效的），但至少存在一种情况，它们具有相同的真值（使得它们的双条件句是可满足的）。\n\n我们现在将使用真值表分析每个选项。\n\n**A. $(\\varphi,\\; \\psi) = (p,\\; p \\lor q)$**\n我们考察公式 $\\varphi \\leftrightarrow \\psi$，即 $p \\leftrightarrow (p \\lor q)$。\n其真值表如下：\n| $v(p)$ | $v(q)$ | $v(\\varphi) = v(p)$ | $v(\\psi) = v(p \\lor q)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $T$ | $T$ | $T$ |\n| $F$ | $T$ | $F$ | $T$ | $F$ |\n| $F$ | $F$ | $F$ | $F$ | $T$ |\n\n公式 $p \\leftrightarrow (p \\lor q)$ 对于赋值 $(v_1(p)=T, v_1(q)=T)$、$(v_2(p)=T, v_2(q)=F)$ 和 $(v_3(p)=F, v_3(q)=F)$ 为真。因为它可以为真，所以它是**可满足的**。\n该公式对于赋值 $(v_4(p)=F, v_4(q)=T)$ 为假。因为它可以为假，所以它是**非有效的**。\n此选项满足两个条件。\n**结论：正确。**\n\n**B. $(\\varphi,\\; \\psi) = (p \\lor q,\\; q \\lor p)$**\n我们考察公式 $(p \\lor q) \\leftrightarrow (q \\lor p)$。这与析取的交换律有关。\n| $v(p)$ | $v(q)$ | $v(\\varphi) = v(p \\lor q)$ | $v(\\psi) = v(q \\lor p)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $T$ | $T$ | $T$ |\n| $F$ | $T$ | $T$ | $T$ | $T$ |\n| $F$ | $F$ | $F$ | $F$ | $T$ |\n\n公式 $(p \\lor q) \\leftrightarrow (q \\lor p)$ 对所有可能的赋值都为真。因此，它是**可满足的**且**有效的**。\n此选项不满足“非有效”的条件。这两个公式是逻辑等价的。\n**结论：错误。**\n\n**C. $(\\varphi,\\; \\psi) = (p,\\; \\lnot p)$**\n我们考察公式 $p \\leftrightarrow \\lnot p$。\n| $v(p)$ | $v(\\varphi) = v(p)$ | $v(\\psi) = v(\\lnot p)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|\n| $T$ | $T$ | $F$ | $F$ |\n| $F$ | $F$ | $T$ | $F$ |\n\n公式 $p \\leftrightarrow \\lnot p$ 对所有可能的赋值都为假。一个恒为假的公式是一个矛盾式。因此，它是**不可满足的**。\n此选项不满足“可满足”的条件。\n**结论：错误。**\n\n**D. $(\\varphi,\\; \\psi) = (p \\land q,\\; p)$**\n我们考察公式 $(p \\land q) \\leftrightarrow p$。\n| $v(p)$ | $v(q)$ | $v(\\varphi) = v(p \\land q)$ | $v(\\psi) = v(p)$ | $v(\\varphi \\leftrightarrow \\psi)$ |\n|---|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $F$ | $T$ | $F$ |\n| $F$ | $T$ | $F$ | $F$ | $T$ |\n| $F$ | $F$ | $F$ | $F$ | $T$ |\n\n公式 $(p \\land q) \\leftrightarrow p$ 对于赋值 $(v_1(p)=T, v_1(q)=T)$、$(v_2(p)=F, v_2(q)=T)$ 和 $(v_3(p)=F, v_3(q)=F)$ 为真。因为它可以为真，所以它是**可满足的**。\n该公式对于赋值 $(v_4(p)=T, v_4(q)=F)$ 为假。因为它可以为假，所以它是**非有效的**。\n此选项满足两个条件。\n**结论：正确。**\n\n**E. $(\\varphi,\\; \\psi) = (p \\lor \\lnot p,\\; q \\to p)$**\n公式 $\\varphi = p \\lor \\lnot p$ 是一个重言式；它在每个赋值下都为真。\n我们考察公式 $(p \\lor \\lnot p) \\leftrightarrow (q \\to p)$。\n由于 $v(p \\lor \\lnot p)$ 恒为 $T$，该双条件句的真值与 $q \\to p$ 的真值相同。所以我们需要确定 $q \\to p$ 是否是可满足但非有效的。\n| $v(p)$ | $v(q)$ | $v(\\psi) = v(q \\to p)$ | $v(\\varphi \\leftrightarrow \\psi)=v(T \\leftrightarrow (q \\to p))$ |\n|---|---|---|---|\n| $T$ | $T$ | $T$ | $T$ |\n| $T$ | $F$ | $T$ | $T$ |\n| $F$ | $T$ | $F$ | $F$ |\n| $F$ | $F$ | $T$ | $T$ |\n\n双条件句的最终真值列为 $(T, T, F, T)$。\n该公式对于多个赋值为真，因此它是**可满足的**。\n当 $v(p)=F$ 且 $v(q)=T$ 时，该公式为假，所以它是**非有效的**。\n此选项满足两个条件。\n**结论：正确。**\n\n总而言之，选项A、D和E给出的公式对，其双条件句是可满足但非有效的。", "answer": "$$\\boxed{ADE}$$", "id": "3046361"}, {"introduction": "掌握了等价的定义后，我们来探讨其最强大的属性之一：等价替换原则 [@problem_id:3046400]。这个练习要求你从第一性原理出发，利用真值函数性的定义来证明，为什么在一个复杂的公式中用一个逻辑等价的子公式进行替换，不会改变整体公式的逻辑真值。这项实践将加深你对逻辑语义组合性的理解。", "problem": "设 $p$、$q$、$r$、$s$ 和 $t$ 为命题变量。定义单孔上下文 $C[\\cdot]$ 如下：\n$$\nC[\\cdot] \\;:=\\; \\bigl((\\,p \\lor (\\cdot)\\,) \\to (\\,r \\land \\neg(\\cdot)\\,)\\bigr) \\leftrightarrow \\bigl(q \\to (\\cdot)\\bigr),\n$$\n并设 $\\alpha := (s \\to t)$ 和 $\\beta := (\\neg s \\lor t)$。仅使用命题联结词的基本真值函数语义（即，根据 $\\neg$、$\\lor$、$\\land$、$\\to$ 和 $\\leftrightarrow$ 的直接子公式的赋值来定义它们的赋值），从第一性原理出发，论证 $\\alpha$ 和 $\\beta$ 是逻辑等价的，并且在上下文 $C[\\cdot]$ 中用 $\\beta$ 替换 $\\alpha$ 会保持整体的等价性。然后，令 $N$ 为使得 $C[\\alpha]$ 和 $C[\\beta]$ 在赋值 $v$ 下取不同真值的赋值 $v : \\{p,q,r,s,t\\} \\to \\{0,1\\}$ 的确切数量。计算 $N$。将你的最终答案以一个精确整数的形式给出。无需四舍五入。", "solution": "该问题要求一个关于命题逻辑的由三部分组成的论证。第一，从第一性原理出发证明两个公式 $\\alpha$ 和 $\\beta$ 的逻辑等价性。第二，再次从第一性原理出发证明，在给定的上下文 $C[\\cdot]$ 中用 $\\beta$ 替换 $\\alpha$ 会保持逻辑等价性。第三，计算使得结果公式 $C[\\alpha]$ 和 $C[\\beta]$ 产生不同真值的赋值数量 $N$。\n\n设命题变量的集合为 $\\{p, q, r, s, t\\}$。一个赋值 $v$ 是一个函数 $v : \\{p,q,r,s,t\\} \\to \\{0,1\\}$，其中 $0$ 代表假，$1$ 代表真。\n\n公式和上下文定义如下：\n$\\alpha := (s \\to t)$\n$\\beta := (\\neg s \\lor t)$\n$C[\\cdot] \\;:=\\; \\bigl((\\,p \\lor (\\cdot)\\,) \\to (\\,r \\land \\neg(\\cdot)\\,)\\bigr) \\leftrightarrow \\bigl(q \\to (\\cdot)\\bigr)$\n\n对于任意子公式 $A$ 和 $B$ 以及任意赋值 $v$，逻辑联结词的真值函数语义定义如下：\n$v(\\neg A) = 1 - v(A)$\n$v(A \\lor B) = \\max\\{v(A), v(B)\\}$\n$v(A \\land B) = \\min\\{v(A), v(B)\\}$\n如果 $v(A) \\le v(B)$（即，不是 $v(A)=1$ 且 $v(B)=0$ 的情况），则 $v(A \\to B) = 1$，否则为 $0$。\n如果 $v(A) = v(B)$，则 $v(A \\leftrightarrow B) = 1$，否则为 $0$。\n\n**第一部分：证明 $\\alpha$ 和 $\\beta$ 的逻辑等价性。**\n\n如果两个公式在其命题变量的所有可能赋值下都取相同的真值，则它们是逻辑等价的。公式 $\\alpha$ 和 $\\beta$ 仅依赖于变量 $s$ 和 $t$。对 $(s, t)$ 这对变量有 $2^2 = 4$ 种可能的赋值。我们必须验证在每种情况下 $v(\\alpha) = v(\\beta)$ 都成立。\n\n情况1：$v(s) = 0$，$v(t) = 0$。\n$v(\\alpha) = v(s \\to t) = v(0 \\to 0) = 1$。\n$v(\\beta) = v(\\neg s \\lor t) = v(\\neg 0 \\lor 0) = v(1 \\lor 0) = \\max\\{1, 0\\} = 1$。\n在这种情况下，$v(\\alpha) = v(\\beta)$。\n\n情况2：$v(s) = 0$，$v(t) = 1$。\n$v(\\alpha) = v(s \\to t) = v(0 \\to 1) = 1$。\n$v(\\beta) = v(\\neg s \\lor t) = v(\\neg 0 \\lor 1) = v(1 \\lor 1) = \\max\\{1, 1\\} = 1$。\n在这种情况下，$v(\\alpha) = v(\\beta)$。\n\n情况3：$v(s) = 1$，$v(t) = 0$。\n$v(\\alpha) = v(s \\to t) = v(1 \\to 0) = 0$。\n$v(\\beta) = v(\\neg s \\lor t) = v(\\neg 1 \\lor 0) = v(0 \\lor 0) = \\max\\{0, 0\\} = 0$。\n在这种情况下，$v(\\alpha) = v(\\beta)$。\n\n情况4：$v(s) = 1$，$v(t) = 1$。\n$v(\\alpha) = v(s \\to t) = v(1 \\to 1) = 1$。\n$v(\\beta) = v(\\neg s \\lor t) = v(\\neg 1 \\lor 1) = v(0 \\lor 1) = \\max\\{0, 1\\} = 1$。\n在这种情况下，$v(\\alpha) = v(\\beta)$。\n\n由于对于 $s$ 和 $t$ 的每一种可能赋值，$\\alpha$ 的真值都与 $\\beta$ 的真值相同，因此这两个公式是逻辑等价的。我们用 $\\alpha \\equiv \\beta$ 来表示这一点。这是一个定义实质蕴涵的著名等价式。\n\n**第二部分：证明 $C[\\alpha]$ 和 $C[\\beta]$ 的逻辑等价性。**\n\n我们必须从第一性原理出发证明 $C[\\alpha] \\equiv C[\\beta]$。真值函数性原理指出，一个复合公式的真值由其直接子公式的真值唯一确定。这个原理可以通过归纳法推广，以表明一个公式的真值由其原子命题变量的真值唯一确定。\n\n设 $v$ 是对变量 $\\{p, q, r, s, t\\}$ 的任意赋值。对于任意公式 $\\phi$，公式 $C[\\phi]$ 在赋值 $v$ 下的真值是根据 $v(p)$、$v(q)$、$v(r)$ 和 $v(\\phi)$ 的值计算的。我们可以将这种函数依赖关系表示为：\n$v(C[\\phi]) = f(v(p), v(q), v(r), v(\\phi))$。\n函数 $f$ 表示上下文 $C[\\cdot]$ 的固定结构应用于其输入的真值。具体来说：\n$f(x, y, z, w) = \\bigl((x \\lor w) \\to (z \\land \\neg w)\\bigr) \\leftrightarrow (y \\to w)$。\n\n为了求出 $C[\\alpha]$ 的赋值，我们计算：\n$v(C[\\alpha]) = f(v(p), v(q), v(r), v(\\alpha))$。\n\n为了求出 $C[\\beta]$ 的赋值，我们计算：\n$v(C[\\beta]) = f(v(p), v(q), v(r), v(\\beta))$。\n\n在第一部分中，我们已经确定 $\\alpha \\equiv \\beta$，这意味着对于任何赋值 $v$，$v(\\alpha) = v(\\beta)$。\n设 $v_p = v(p)$，$v_q = v(q)$，$v_r = v(r)$，以及 $v_\\alpha = v(\\alpha)$，$v_\\beta = v(\\beta)$。我们知道 $v_\\alpha = v_\\beta$。\n因此，对于任何赋值 $v$，在这两种情况下传递给函数 $f$ 的参数都是相同的：\n$v(C[\\alpha]) = f(v_p, v_q, v_r, v_\\alpha)$\n$v(C[\\beta]) = f(v_p, v_q, v_r, v_\\beta) = f(v_p, v_q, v_r, v_\\alpha)$\n\n由于函数 $f$ 是确定性的（即，一组给定的输入恰好产生一个输出），并且在任何赋值 $v$ 下，它对于 $C[\\alpha]$ 和 $C[\\beta]$ 都接收完全相同的输入，因此其输出必须相同。\n因此，对于所有可能的赋值 $v$，都有 $v(C[\\alpha]) = v(C[\\beta])$。\n根据逻辑等价的定义，这证明了 $C[\\alpha] \\equiv C[\\beta]$。这证实了逻辑等价子公式替换的一般原理。\n\n**第三部分：计算数量 $N$。**\n\n问题要求计算 $N$，其定义为使得 $v(C[\\alpha])$ 和 $v(C[\\beta])$ 取不同真值的赋值 $v : \\{p,q,r,s,t\\} \\to \\{0,1\\}$ 的确切数量。这个条件可以写成 $v(C[\\alpha]) \\neq v(C[\\beta])$。\n\n在第二部分中，我们证明了对于任何及每一个赋值 $v$，都有 $v(C[\\alpha]) = v(C[\\beta])$。这正是逻辑等价 $C[\\alpha] \\equiv C[\\beta]$ 的确切含义。\n因此，不存在任何赋值使得 $v(C[\\alpha]) \\neq v(C[\\beta])$。满足这个不等式的赋值集合是空集。\n\n数量 $N$ 是这个空集的基数。\n因此，$N = 0$。\n变量总数为 $5$，因此总共有 $2^5 = 32$ 种赋值。对于所有这 $32$ 种赋值，$C[\\alpha]$ 和 $C[\\beta]$ 产生相同的真值。对于 $0$ 种赋值，它们产生不同的真值。", "answer": "$$\\boxed{0}$$", "id": "3046400"}, {"introduction": "逻辑等价是一个强大的理论工具，但其严格的要求在实际应用中可能代价过高。这个问题连接了理论与实践，探讨了如何为自动推理系统（如SAT求解器）将公式转换为合取范式（CNF）[@problem_id:3046374]。你将分析为何简单的等价保持转换可能导致计算爆炸，并评估一种巧妙的技术——Tseitin变换——它如何利用一种更宽松的等价概念来实现效率，同时保证求解的正确性。", "problem": "设 $\\varphi$ 是一个定义在有限命题原子集上的命题公式。目标是设计一个流水线，将 $\\varphi$ 转换为合取范式 (CNF) 公式，该公式适合作为布尔可满足性问题 (SAT) 求解器的输入，同时避免大小的指数级爆炸。如果对于原始原子的每一个赋值 $\\nu$，都满足以下条件，则该流水线被认为是保守扩展意义上保持等价的：\n$$\n\\nu \\vDash \\varphi \\quad \\text{当且仅当} \\quad \\exists \\hat{\\nu}\\,(\\hat{\\nu} \\text{ 扩展 } \\nu \\text{ 且 } \\hat{\\nu} \\vDash \\Phi),\n$$\n其中 $\\Phi$ 是流水线输出的 CNF 公式，$\\hat{\\nu}$ 是对原始原子和流水线引入的任何新原子的赋值。此外，该流水线必须确保 $\\Phi$ 的大小以 $O(n)$ 为界，其中 $n$ 是以符号数量计算的 $\\varphi$ 的大小。\n\n任何正确的流水线或证明都必须隐式使用以下基础知识：$\\neg$、$\\land$、$\\lor$、$\\rightarrow$ 和 $\\leftrightarrow$ 的真值函数语义；逻辑等价作为在所有赋值下真值相等的定义；命题逻辑的代数定律，包括 $\\rightarrow$ 和 $\\leftrightarrow$ 的消除、德摩根定律、结合律、交换律和分配律；以及合取范式作为文字析取之合取的定义。\n\n选择一个正确指定了这样一种流水线的选项。每个选项描述了一个转换序列及其声称的属性。\n\nA. 在 $\\varphi$ 中消除 $\\rightarrow$ 和 $\\leftrightarrow$；通过德摩根定律将 $\\neg$ 向内推，得到否定范式；重复应用 $\\lor$ 对 $\\land$ 的分配律，直到获得 CNF。该流水线声称能精确保持逻辑等价性（无新原子），并且输出大小至多为 $O(n)$。\n\nB. 为 $\\varphi$ 构建一个解析树。为 $\\varphi$ 的每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$。对于每个节点，添加 CNF 子句来强制 $v_{\\psi} \\leftrightarrow \\operatorname{op}(v_{\\psi_1},\\dots,v_{\\psi_k})$，其中 $\\operatorname{op}$ 是该节点对应的连接词，而 $v_{\\psi_i}$ 是其直接子公式的新原子。例如，对于合取 $\\psi = \\alpha \\land \\beta$，添加 3 个子句 $(\\neg v_{\\psi} \\lor v_{\\alpha})$、$(\\neg v_{\\psi} \\lor v_{\\beta})$ 和 $(\\neg v_{\\alpha} \\lor \\neg v_{\\beta} \\lor v_{\\psi})$；对于析取 $\\psi = \\alpha \\lor \\beta$，添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$、$(\\neg v_{\\beta} \\lor v_{\\psi})$ 和 $(\\neg v_{\\psi} \\lor v_{\\alpha} \\lor v_{\\beta})$；对于否定 $\\psi = \\neg \\alpha$，添加 $(\\neg v_{\\psi} \\lor \\neg v_{\\alpha})$ 和 $(v_{\\psi} \\lor v_{\\alpha})$。将所有这些子句合取起来，并最后合取单元子句 $v_{\\varphi}$。该流水线声称是一个保守扩展，在原始原子上保持等价性（如上所述），并产生一个大小为 $O(n)$ 的 CNF。\n\nC. 同选项 B 一样，为每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$，但对于每个连接词，仅编码从新原子到其组成部分的正向蕴含，例如对于 $\\psi = \\alpha \\land \\beta$，仅添加 $(\\neg v_{\\psi} \\lor v_{\\alpha})$ 和 $(\\neg v_{\\psi} \\lor v_{\\beta})$，而对于 $\\psi = \\alpha \\lor \\beta$，仅添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$ 和 $(\\neg v_{\\beta} \\lor v_{\\psi})$。最后合取 $v_{\\varphi}$。该流水线声称在保守扩展意义上保持等价性，并且大小是线性的。\n\nD. 同选项 B 一样，为每个子公式引入新原子和双条件约束，但省略了最后合取 $v_{\\varphi}$ 的步骤。仅返回所有定义性子句的合取。该流水线声称在保守扩展意义上保持等价性，并且大小是线性的。\n\nE. 首先通过应用 $\\land$ 对 $\\lor$ 的分配律将 $\\varphi$ 转换为析取范式，然后应用一个子句学习消解方案，通过重用派生的子句来导出一个与 $\\varphi$ 逻辑等价且大小为线性的 CNF。该流水线声称能保持等价性并避免大小爆炸。\n\n哪个选项满足所述要求？", "solution": "用户要求对问题陈述进行严格验证，然后给出一个详细的解决方案，并对将命题公式 $\\varphi$ 转换为等可满足的合取范式 (CNF) 公式 $\\Phi$ 的各个选项进行评估，其中 $\\Phi$ 的大小与 $\\varphi$ 的大小呈线性关系。\n\n**问题验证**\n\n**步骤 1：提取给定条件**\n-   设 $\\varphi$ 是一个定义在有限命题原子集上的命题公式。\n-   目标：将 $\\varphi$ 转换为一个 CNF 公式 $\\Phi$。\n-   要求 1 (等价性)：转换必须是“保守扩展意义上保持等价的”，定义为：对于原始原子的每一个赋值 $\\nu$，$\\nu \\vDash \\varphi$ 当且仅当存在一个扩展 $\\nu$ 的赋值 $\\hat{\\nu}$ 并且满足 $\\Phi$（即 $\\hat{\\nu} \\vDash \\Phi$）。\n-   要求 2 (大小)：$\\Phi$ 的大小必须以 $O(n)$ 为界，其中 $n$ 是 $\\varphi$ 的大小。\n-   隐式知识库：命题连接词（$\\neg$, $\\land$, $\\lor$, $\\rightarrow$, $\\leftrightarrow$）的语义、逻辑等价、逻辑代数定律（如德摩根定律、分配律），以及 CNF 的定义。\n\n**步骤 2：使用提取的给定条件进行验证**\n-   **科学性基础：** 该问题是计算逻辑和理论计算机科学中的一个标准的、基础性的课题。将命题公式转换为 CNF 是现代 SAT 求解器的关键预处理步骤。通过朴素的、指数级的转换与通过复杂的、线性时间的转换（通过 Tseitin 式变换）之间的区别是一个核心概念。\n-   **良构性：** 问题定义清晰。它明确了输入（$\\varphi$）、期望的输出格式（CNF），以及两个精确的约束（等可满足性和线性大小）。问题要求从一系列选项中识别出正确的流程。预期会有一个唯一的正确答案。\n-   **客观性：** 问题陈述使用源自数理逻辑的精确、形式化的语言编写。它没有歧义和主观性。\n\n**步骤 3：结论与行动**\n问题陈述有效。这是一个来自逻辑与计算领域的、良构且具有科学依据的问题。我现在将进行解题推导和选项分析。\n\n**解题推导**\n\n主要挑战在于同时满足等可满足性和线性大小复杂度的要求。使用逻辑等价（特别是分配律）的朴素方法无法满足大小要求。\n\n考虑分配律：$(\\alpha \\land \\beta) \\lor \\gamma \\equiv (\\alpha \\lor \\gamma) \\land (\\beta \\lor \\gamma)$。虽然这种转换保持了逻辑等价性，但重复应用可能导致公式大小的指数级增长。例如，使用分配律将 $\\varphi = (\\alpha_1 \\land \\beta_1) \\lor (\\alpha_2 \\land \\beta_2) \\lor \\dots \\lor (\\alpha_k \\land \\beta_k)$ 转换为 CNF，会产生一个包含 $2^k$ 个子句的公式，这在 $\\varphi$ 的大小（$O(k)$）上是指数级的。\n\n为了避免这种指数级爆炸，有必要引入新变量。这就是 Tseitin 变换的基础。该变换按以下方式操作：\n1.  为公式 $\\varphi$ 构建解析树。\n2.  为每个子公式 $\\psi$（包括完整的公式 $\\varphi$ 本身），引入一个新命题原子，例如 $v_{\\psi}$。这个新原子意在当且仅当子公式 $\\psi$ 为真时为真。\n3.  对于每个非原子子公式 $\\psi$，断言逻辑等价 $v_{\\psi} \\leftrightarrow \\psi$。由于 $\\psi$ 是由其直接子公式构成的（例如 $\\psi = \\psi_1 \\text{ op } \\psi_2$），这个等价性用对应于那些子公式的新变量来表示，例如 $v_{\\psi} \\leftrightarrow (v_{\\psi_1} \\text{ op } v_{\\psi_2})$。\n4.  每个这样的等价关系都被转换成一小组子句（其 CNF 表示）。对于任何二元连接词，这会产生常数数量（最多 3 个）的常数长度的子句。\n5.  最终的 CNF 公式 $\\Phi$ 是为每个子公式生成的所有子句的合取，再加上一个最终的单元子句 $(v_{\\varphi})$，它断言整个原始公式必须为真。\n\n$\\varphi$ 中子公式的数量与其大小 $n$ 呈线性关系。由于每个子公式产生恒定数量的新 CNF 材料，因此 $\\Phi$ 的总大小为 $O(n)$。这个过程满足线性大小的约束。\n\n它也满足保守扩展的要求。设 $\\Phi$ 是通过 Tseitin 变换生成的公式。\n-   如果 $\\nu \\vDash \\varphi$，可以通过将每个新变量 $v_{\\psi}$ 的值设置为子公式 $\\psi$ 在 $\\nu$ 下的真值来定义一个扩展 $\\hat{\\nu}$。根据构造，这个 $\\hat{\\nu}$ 将满足所有等价子句。因为 $\\nu \\vDash \\varphi$，所以 $\\hat{\\nu}(v_{\\varphi})$ 将为真，从而满足最后的单元子句 $(v_{\\varphi})$。因此，$\\hat{\\nu} \\vDash \\Phi$。\n-   反之，如果对于 $\\nu$ 的某个扩展 $\\hat{\\nu}$ 有 $\\hat{\\nu} \\vDash \\Phi$，那么单元子句 $(v_{\\varphi})$ 意味着 $\\hat{\\nu}(v_{\\varphi})$ 为真。等价子句进而保证了 $v_{\\psi}$ 在 $\\hat{\\nu}$ 下的真值与其所代表的表达式的真值相匹配，一直向下追溯到原始原子。因此，$\\varphi$ 在 $\\nu$ 下的真值必须为真。所以，$\\nu \\vDash \\varphi$。\n\n这证实了 Tseitin 变换是一个满足两个既定要求的正确流水线。现在我们来评估各个选项。\n\n**逐项分析选项**\n\n**A. 在 $\\varphi$ 中消除 $\\rightarrow$ 和 $\\leftrightarrow$；通过德摩根定律将 $\\neg$ 向内推，得到否定范式；重复应用 $\\lor$ 对 $\\land$ 的分配律，直到获得 CNF。该流水线声称能精确保持逻辑等价性（无新原子），并且输出大小至多为 $O(n)$。**\n此选项描述了教科书式的“朴素”转换算法。虽然它确实能产生一个逻辑等价的 CNF，但其复杂性是其致命弱点。如上所述，应用 $\\lor$ 对 $\\land$ 的分配律会导致公式大小在最坏情况下呈指数级增长。例如，将 $\\varphi_k = (a_1 \\land b_1) \\lor \\dots \\lor (a_k \\land b_k)$ 转换为 CNF 会导致一个大小为 $k$ 的指数级公式。因此，声称输出大小至多为 $O(n)$ 是错误的。\n**结论：不正确**。\n\n**B. 为 $\\varphi$ 构建一个解析树。为 $\\varphi$ 的每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$。对于每个节点，添加 CNF 子句来强制 $v_{\\psi} \\leftrightarrow \\operatorname{op}(v_{\\psi_1},\\dots,v_{\\psi_k})$，其中 $\\operatorname{op}$ 是该节点对应的连接词，而 $v_{\\psi_i}$ 是其直接子公式的新原子。例如，对于合取 $\\psi = \\alpha \\land \\beta$，添加 3 个子句 $(\\neg v_{\\psi} \\lor v_{\\alpha})$、$(\\neg v_{\\psi} \\lor v_{\\beta})$ 和 $(\\neg v_{\\alpha} \\lor \\neg v_{\\beta} \\lor v_{\\psi})$；对于析取 $\\psi = \\alpha \\lor \\beta$，添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$、$(\\neg v_{\\beta} \\lor v_{\\psi})$ 和 $(\\neg v_{\\psi} \\lor v_{\\alpha} \\lor v_{\\beta})$；对于否定 $\\psi = \\neg \\alpha$，添加 $(\\neg v_{\\psi} \\lor \\neg v_{\\alpha})$ 和 $(v_{\\psi} \\lor v_{\\alpha})$。将所有这些子句合取起来，并最后合取单元子句 $v_{\\varphi}$。该流水线声称是一个保守扩展，在原始原子上保持等价性（如上所述），并产生一个大小为 $O(n)$ 的 CNF。**\n此选项提供了对 Tseitin 变换的精确且正确的描述。示例中的子句是所需双条件句的正确 CNF 编码：\n-   $v_{\\psi} \\leftrightarrow (v_{\\alpha} \\land v_{\\beta}) \\equiv (\\neg v_{\\psi} \\lor v_{\\alpha}) \\land (\\neg v_{\\psi} \\lor v_{\\beta}) \\land (\\neg v_{\\alpha} \\lor \\neg v_{\\beta} \\lor v_{\\psi})$。\n-   $v_{\\psi} \\leftrightarrow (v_{\\alpha} \\lor v_{\\beta}) \\equiv (\\neg v_{\\alpha} \\lor v_{\\psi}) \\land (\\neg v_{\\beta} \\lor v_{\\psi}) \\land (\\neg v_{\\psi} \\lor v_{\\alpha} \\lor v_{\\beta})$。\n-   $v_{\\psi} \\leftrightarrow \\neg v_{\\alpha} \\equiv (\\neg v_{\\psi} \\lor \\neg v_{\\alpha}) \\land (v_{\\psi} \\lor v_{\\alpha})$。\n该过程正确地包括了合取所有定义性子句和最后的单元子句 $(v_{\\varphi})$。如上面的推导所示，此方法同时满足等可满足性和线性大小的要求。\n**结论：正确**。\n\n**C. 同选项 B 一样，为每个子公式 $\\psi$ 引入一个新原子 $v_{\\psi}$，但对于每个连接词，仅编码从新原子到其组成部分的正向蕴含，例如对于 $\\psi = \\alpha \\land \\beta$，仅添加 $(\\neg v_{\\psi} \\lor v_{\\alpha})$ 和 $(\\neg v_{\\psi} \\lor v_{\\beta})$，而对于 $\\psi = \\alpha \\lor \\beta$，仅添加 $(\\neg v_{\\alpha} \\lor v_{\\psi})$ 和 $(\\neg v_{\\beta} \\lor v_{\\psi})$。最后合取 $v_{\\varphi}$。该流水线声称在保守扩展意义上保持等价性，并且大小是线性的。**\n此选项建议只使用单向蕴含而不是双条件。这被称为单边或基于极性的 Tseitin 编码，但此处描述的实现是有缺陷的。让我们分析所提供的子句。对于 $\\psi=\\alpha \\lor \\beta$，子句是 $(\\neg v_{\\alpha} \\lor v_{\\psi})$ 和 $(\\neg v_{\\beta} \\lor v_{\\psi})$，它们共同编码了 $(v_{\\alpha} \\lor v_{\\beta}) \\rightarrow v_{\\psi}$。设完整公式为 $\\varphi = a \\lor b$。根据该选项，生成的 CNF $\\Phi$ 将是 $(\\neg a \\lor v_{\\varphi}) \\land (\\neg b \\lor v_{\\varphi}) \\land (v_{\\varphi})$。考虑赋值 $\\nu$，其中 $\\nu(a) = \\text{false}$ 且 $\\nu(b) = \\text{false}$。这个赋值不满足 $\\varphi$。然而，我们可以找到一个满足 $\\Phi$ 的扩展 $\\hat{\\nu}$：令 $\\hat{\\nu}(a) = \\text{false}$，$\\hat{\\nu}(b) = \\text{false}$，且 $\\hat{\\nu}(v_{\\varphi}) = \\text{true}$。$\\Phi$ 变为 $(\\neg \\text{false} \\lor \\text{true}) \\land (\\neg \\text{false} \\lor \\text{true}) \\land (\\text{true})$，结果为真。因此我们找到了一个满足 $\\Phi$ 的赋值，其对原始变量的限制并*不*满足 $\\varphi$。这违反了所要求的“当且仅当”条件中的“if”部分（$\\nu \\vDash \\varphi$ **if** $\\exists \\hat{\\nu} \\dots \\vDash \\Phi$）。该流水线没有按要求保持等价性。\n**结论：不正确**。\n\n**D. 同选项 B 一样，为每个子公式引入新原子和双条件约束，但省略了最后合取 $v_{\\varphi}$ 的步骤。仅返回所有定义性子句的合取。该流水线声称在保守扩展意义上保持等价性，并且大小是线性的。**\n此选项省略了断言顶层公式为真的关键最后一步。所有定义性子句的合取，我们称之为 $\\Phi_D$，仅描述了子公式之间的关系。$\\Phi_D$ 几乎总是可满足的。例如，可以通过将所有新变量和所有原始原子都设置为假来找到一个满足的赋值。这个赋值满足所有的双条件子句。因此，即使 $\\varphi$ 是一个矛盾式（例如 $\\varphi = a \\land \\neg a$），$\\Phi_D$ 也是可满足的。对于不可满足的 $\\varphi = a \\land \\neg a$，其定义性子句是可满足的，例如，通过将 $a, v_{a \\land \\neg a}$ 设置为假，并将 $v_{\\neg a}$ 设置为真。这明显违反了等可满足性的要求。\n**结论：不正确**。\n\n**E. 首先通过应用 $\\land$ 对 $\\lor$ 的分配律将 $\\varphi$ 转换为析取范式，然后应用一个子句学习消解方案，通过重用派生的子句来导出一个与 $\\varphi$ 逻辑等价且大小为线性的 CNF。该流水线声称能保持等价性并避免大小爆炸。**\n这个选项在多个方面存在缺陷。首先，将任意公式转换为 DNF 本身就会导致指数级的大小爆炸。例如，将一个已经是 CNF 的公式，如 $\\varphi = (a_1 \\lor b_1) \\land \\dots \\land (a_k \\lor b_k)$，转换为 DNF 会产生 $2^k$ 个析取项。仅这第一步就违反了线性大小的要求。其次，“子句学习消解方案”不是用于在范式之间转换的标准算法；它是现代 SAT 求解器中用于指导搜索过程的一个组件。声称这样的方案可以从一个可能呈指数级的 DNF 中恢复一个线性大小的 CNF，这种说法没有根据，并且通常不成立。\n**结论：不正确**。", "answer": "$$\\boxed{B}$$", "id": "3046374"}]}
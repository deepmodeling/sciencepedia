{"hands_on_practices": [{"introduction": "要真正掌握一个数学工具，最好的方法就是将其应用于一个经典问题。本练习将引导您使用阿贝尔求和公式，从除数函数求和 $D(x) = \\sum_{n \\le x} d(n)$ 的已知渐近式出发，推导相关的加权和 $\\sum_{n \\le x} d(n)/n$ 的行为。这个练习不仅是一个计算，更是展示解析数论中如何通过部分求和联系不同算术和的关键技能 [@problem_id:3007023]。", "problem": "令 $d(n)$ 表示狄利克雷除数函数，定义为整数 $n$ 的正因数个数。令 $$D(x) \\coloneqq \\sum_{n \\leq x} d(n)$$ 并假设其经典的渐近分解为 $$D(x) = x \\ln x + (2\\gamma - 1)x + \\Delta(x),$$ 其中 $\\gamma$ 是欧拉-马斯刻若尼常数（EMC），定义为 $$\\gamma \\coloneqq \\lim_{N \\to \\infty} \\left( \\sum_{n=1}^{N} \\frac{1}{n} - \\ln N \\right),$$ 且 $\\Delta(x)$ 是一个余项，满足 $\\Delta(x) = o(x)$，并且为具体起见，对于某个固定的 $\\theta \\in (0,1)$，有 $\\Delta(x) = \\mathcal{O}(x^{\\theta})$。使用基本原理和分部求和法，推导 $$S(x) \\coloneqq \\sum_{n \\leq x} \\frac{d(n)}{n}$$ 的一个显式解析表达式，该表达式用 $x$、$\\gamma$ 和 $\\Delta$ 表示，并表达为初等函数的有限组合和一个包含 $\\Delta$ 的积分。你的推导必须从和与积分的基本定义和性质开始，并且不得假设任何分部求和的快捷公式。在你的最终表达式中，分离并确定主对数项以及乘以单对数项的精确系数。\n\n将你的最终答案表述为关于 $x$、$\\gamma$ 和 $\\Delta$ 的一个闭式解析表达式，不含不等式或误差界。无需四舍五入。", "solution": "所述问题是有效的。其科学基础在于解析数论的既定原理，特别是关于除数问题和分部求和的应用。该问题是适定的，为推导唯一解提供了所有必要的定义和条件。它是客观的，其术语都有形式化定义。因此，我们可以着手求解。\n\n目标是求出和 $S(x) \\coloneqq \\sum_{n \\leq x} \\frac{d(n)}{n}$ 的一个显式解析表达式，其中 $d(n)$ 是除数函数。按照要求，本次推导的主要工具是分部求和法，我们必须从基本原理出发推导它。\n\n令 $\\{a_n\\}_{n=1}^{\\infty}$ 为一个复数序列，令 $f(t)$ 为在 $[1, \\infty)$ 上的连续可微函数。我们定义部分和函数 $A(x) \\coloneqq \\sum_{1 \\leq n \\leq x} a_n$。我们的目标是计算和 $\\sum_{1 \\leq n \\leq x} a_n f(n)$。\n\n令 $N \\coloneqq \\lfloor x \\rfloor$ 为不大于 $x$ 的最大整数。该和可以写为 $\\sum_{n=1}^{N} a_n f(n)$。\n我们可以用部分和函数 $A(n)$ 来表示 $a_n$：对于 $n > 1$，$a_n = A(n) - A(n-1)$，且 $a_1 = A(1)$。我们还定义 $A(0) = 0$。\n将此代入和中：\n$$ \\sum_{n=1}^{N} a_n f(n) = A(1) f(1) + \\sum_{n=2}^{N} (A(n) - A(n-1)) f(n) $$\n$$ = A(1) f(1) + \\sum_{n=2}^{N} A(n) f(n) - \\sum_{n=2}^{N} A(n-1) f(n) $$\n合并前两项并对第二个和重新索引（令 $k = n-1$）：\n$$ \\sum_{n=1}^{N} a_n f(n) = \\sum_{n=1}^{N} A(n) f(n) - \\sum_{k=1}^{N-1} A(k) f(k+1) $$\n从第一个和中分离出 $n=N$ 的项：\n$$ = A(N) f(N) + \\sum_{n=1}^{N-1} A(n) f(n) - \\sum_{n=1}^{N-1} A(n) f(n+1) $$\n$$ = A(N) f(N) - \\sum_{n=1}^{N-1} A(n) (f(n+1) - f(n)) $$\n由于 $f$ 是连续可微的，根据微积分基本定理，有 $f(n+1) - f(n) = \\int_{n}^{n+1} f'(t) \\, dt$。将此代入和中：\n$$ \\sum_{n=1}^{N} a_n f(n) = A(N) f(N) - \\sum_{n=1}^{N-1} A(n) \\int_{n}^{n+1} f'(t) \\, dt $$\n部分和函数 $A(t)$ 是一个阶梯函数，在任何区间 $[n, n+1)$ 上为常数，其值为 $A(n)$。因此，对于 $t \\in [n, n+1)$，我们可以写成 $A(n) = A(t)$。这使我们能将 $A(n)$ 移入积分号内：\n$$ \\sum_{n=1}^{N-1} A(n) \\int_{n}^{n+1} f'(t) \\, dt = \\sum_{n=1}^{N-1} \\int_{n}^{n+1} A(t) f'(t) \\, dt = \\int_{1}^{N} A(t) f'(t) \\, dt $$\n所以，我们得到恒等式：\n$$ \\sum_{n=1}^{N} a_n f(n) = A(N) f(N) - \\int_{1}^{N} A(t) f'(t) \\, dt $$\n最后，我们将此公式从整数 $N$ 推广至实数 $x$。注意到 $\\sum_{n \\le x} a_n f(n) = \\sum_{n=1}^N a_n f(n)$，且对于 $t \\in [N, x]$，$A(t) = A(N)$。由于 $A(x)=A(N)$，我们可以从最终公式的右侧出发，反向推导：\n\\begin{align*} A(x) f(x) - \\int_{1}^{x} A(t) f'(t) \\, dt = A(N) f(x) - \\left( \\int_{1}^{N} A(t) f'(t) \\, dt + \\int_{N}^{x} A(t) f'(t) \\, dt \\right) \\\\ = A(N) f(x) - \\int_{1}^{N} A(t) f'(t) \\, dt - \\int_{N}^{x} A(N) f'(t) \\, dt \\\\ = A(N) f(x) - \\int_{1}^{N} A(t) f'(t) \\, dt - A(N)(f(x) - f(N)) \\\\ = A(N) f(N) - \\int_{1}^{N} A(t) f'(t) \\, dt \\\\ = \\sum_{n=1}^N a_n f(n) = \\sum_{n \\le x} a_n f(n) \\end{align*}\n这就证明了对于任意实数 $x \\ge 1$ 都有：\n$$ \\sum_{n \\leq x} a_n f(n) = A(x) f(x) - \\int_{1}^{x} A(t) f'(t) \\, dt $$\n这就是从基本原理推导出的阿贝尔求和公式。\n\n现在，我们将此公式应用于具体问题。给定 $S(x) \\coloneqq \\sum_{n \\leq x} \\frac{d(n)}{n}$。\n我们确定：\n$a_n = d(n)$\n$A(x) = D(x) = \\sum_{n \\leq x} d(n)$\n$f(t) = \\frac{1}{t}$\n导数是 $f'(t) = -\\frac{1}{t^2}$。\n\n将这些代入求和公式中：\n$$ S(x) = \\sum_{n \\leq x} d(n) \\frac{1}{n} = D(x) f(x) - \\int_{1}^{x} D(t) f'(t) \\, dt $$\n$$ S(x) = D(x) \\cdot \\frac{1}{x} - \\int_{1}^{x} D(t) \\left(-\\frac{1}{t^2}\\right) dt $$\n$$ S(x) = \\frac{D(x)}{x} + \\int_{1}^{x} \\frac{D(t)}{t^2} \\, dt $$\n问题给出了 $D(x)$ 的渐近展开式：\n$$ D(x) = x \\ln x + (2\\gamma - 1)x + \\Delta(x) $$\n其中 $\\gamma$ 是欧拉-马斯刻若尼常数，$\\Delta(x)$ 是余项。\n\n我们将 $D(x)$ 的这个表达式代入我们关于 $S(x)$ 的方程中：\n第一项是：\n$$ \\frac{D(x)}{x} = \\frac{x \\ln x + (2\\gamma - 1)x + \\Delta(x)}{x} = \\ln x + 2\\gamma - 1 + \\frac{\\Delta(x)}{x} $$\n第二项是积分：\n$$ \\int_{1}^{x} \\frac{D(t)}{t^2} \\, dt = \\int_{1}^{x} \\frac{t \\ln t + (2\\gamma - 1)t + \\Delta(t)}{t^2} \\, dt $$\n我们可以将此积分分成三部分：\n$$ \\int_{1}^{x} \\left(\\frac{\\ln t}{t} + \\frac{2\\gamma - 1}{t} + \\frac{\\Delta(t)}{t^2}\\right) dt = \\int_{1}^{x} \\frac{\\ln t}{t} \\, dt + \\int_{1}^{x} \\frac{2\\gamma - 1}{t} \\, dt + \\int_{1}^{x} \\frac{\\Delta(t)}{t^2} \\, dt $$\n让我们计算前两个积分：\n1. 对于第一个积分，令 $u = \\ln t$，则 $du = \\frac{1}{t} dt$。积分限从 $t=1, t=x$ 变为 $u=\\ln 1 = 0, u=\\ln x$。\n    $$ \\int_{1}^{x} \\frac{\\ln t}{t} \\, dt = \\int_{0}^{\\ln x} u \\, du = \\left[ \\frac{u^2}{2} \\right]_{0}^{\\ln x} = \\frac{1}{2} (\\ln x)^2 $$\n2. 对于第二个积分：\n    $$ \\int_{1}^{x} \\frac{2\\gamma - 1}{t} \\, dt = (2\\gamma - 1) [\\ln t]_{1}^{x} = (2\\gamma - 1)(\\ln x - \\ln 1) = (2\\gamma - 1) \\ln x $$\n第三个积分涉及余项，根据问题的指示，保持其原样。\n$$ \\int_{1}^{x} \\frac{\\Delta(t)}{t^2} \\, dt $$\n现在，我们组合所有部分，形成 $S(x)$ 的最终表达式：\n$$ S(x) = \\left( \\ln x + 2\\gamma - 1 + \\frac{\\Delta(x)}{x} \\right) + \\left( \\frac{1}{2}(\\ln x)^2 + (2\\gamma - 1)\\ln x + \\int_{1}^{x} \\frac{\\Delta(t)}{t^2} \\, dt \\right) $$\n最后，我们根据各项对 $x$ 的函数依赖性进行分组：\n- $(\\ln x)^2$ 项：$\\frac{1}{2}(\\ln x)^2$\n- $\\ln x$ 项：$\\ln x + (2\\gamma - 1)\\ln x = (1 + 2\\gamma - 1)\\ln x = 2\\gamma \\ln x$\n- 常数项：$2\\gamma - 1$\n- 涉及 $\\Delta$ 的项：$\\frac{\\Delta(x)}{x} + \\int_{1}^{x} \\frac{\\Delta(t)}{t^2} \\, dt$\n\n组合这些，得到完整表达式：\n$$ S(x) = \\frac{1}{2}(\\ln x)^2 + 2\\gamma \\ln x + 2\\gamma - 1 + \\frac{\\Delta(x)}{x} + \\int_{1}^{x} \\frac{\\Delta(t)}{t^2} \\, dt $$\n按照要求，我们确定主对数项和单对数项的系数。\n主对数项是 $\\frac{1}{2}(\\ln x)^2$。\n乘以单对数项 $\\ln x$ 的系数是 $2\\gamma$。", "answer": "$$\n\\boxed{\\frac{1}{2}(\\ln x)^2 + 2\\gamma \\ln x + 2\\gamma - 1 + \\frac{\\Delta(x)}{x} + \\int_{1}^{x} \\frac{\\Delta(t)}{t^2} \\, dt}\n$$", "id": "3007023"}, {"introduction": "在掌握了基本应用之后，我们来挑战一个更具一般性的问题，它能深化我们对部分求和技巧的理解。本练习要求处理一个由对数幂 $(\\ln n)^k$ 加权的算术和，这需要我们迭代地应用部分求和公式，并通过归纳法来控制产生的积分项 [@problem_id:3007015]。通过这个过程，您将学会如何处理更复杂的渐近展开，并洞察到重复应用分部积分时出现的递归结构。", "problem": "设 $\\{a_{n}\\}_{n\\ge 1}$ 为一个复数序列，并令 $A(x)=\\sum_{n\\le x} a_{n}$ 表示其求和函数，该函数通过在每个区间 $[n,n+1)$ 上为常数来扩展到所有实数 $x\\ge 1$。对于一个固定的整数 $k\\ge 1$，定义\n$$\nS_{k}(x)\\;=\\;\\sum_{n\\le x} a_{n}\\,(\\log n)^{k}.\n$$\n从黎曼–斯蒂尔杰斯积分的解释 $\\sum_{n\\le x} a_{n} f(n)=\\int_{1^{-}}^{x} f(t)\\,dA(t)$ 以及黎曼–斯蒂尔杰斯积分的分部积分恒等式出发，推导 $S_{k}(x)$ 的一个显式表示，用 $A(x)$、$(\\log x)^{k}$ 以及一个被积函数包含 $A(t)$ 和 $(\\log t)^{k-1}$ 的积分来表示。然后假设当 $x\\to\\infty$ 时，\n$$\nA(x)\\;=\\;\\alpha\\,x\\;+\\;\\beta\\,\\frac{x}{\\log x}\\;+\\;O\\!\\left(\\frac{x}{(\\log x)^{2}}\\right),\n$$\n其中 $\\alpha$ 和 $\\beta$ 为固定的复常数。使用你为 $S_{k}(x)$ 推导的显式表示，确定 $S_{k}(x)$ 的渐近展开式中 $x(\\log x)^{k-1}$ 项的系数（误差项量级为 $O\\!\\left(x(\\log x)^{k-2}\\right)$），结果只用 $\\alpha$、$\\beta$ 和 $k$ 表示。你的推导必须从第一性原理出发，并通过对 $k$ 的清晰归纳来证明你用于控制 $\\log t$ 幂次积分的任何迭代步骤。以 $\\alpha$、$\\beta$ 和 $k$ 的闭式表达式形式给出你的最终答案。", "solution": "用户希望找到 $S_{k}(x) = \\sum_{n\\le x} a_{n}(\\log n)^{k}$ 的渐近展开式中 $x(\\log x)^{k-1}$ 项的系数。\n\n### 步骤 1：问题验证\n- **已知条件**：\n    - 一个复数序列 $\\{a_{n}\\}_{n\\ge 1}$。\n    - 求和函数 $A(x)=\\sum_{n\\le x} a_{n}$，对于 $x\\ge 1$。\n    - 一个固定的整数 $k\\ge 1$。\n    - 和 $S_{k}(x) = \\sum_{n\\le x} a_{n}(\\log n)^{k}$。\n    - 当 $x\\to\\infty$ 时 $A(x)$ 的渐近行为：$A(x) = \\alpha x + \\beta \\frac{x}{\\log x} + O\\!\\left(\\frac{x}{(\\log x)^{2}}\\right)$，其中 $\\alpha, \\beta$ 是复常数。\n    - 任务是找到 $S_{k}(x)$ 的渐近展开式中 $x(\\log x)^{k-1}$ 项的系数。\n- **验证评估**：\n    - 该问题具有科学依据，使用了诸如阿贝尔求和公式（分部求和）、黎曼–斯蒂尔杰斯积分和渐近分析等解析数论和实分析中的标准概念。\n    - 问题提法明确，提供了足够的信息来确定唯一答案。\n    - 语言客观且数学上精确。\n    - 该问题不违反任何无效性标准。这是一个应用分部求和来推导渐近公式的标准的、非平凡的练习。\n- **结论**：该问题有效。\n\n### 步骤 2：推导\n我们的出发点是将和 $S_k(x)$ 表示为黎曼–斯蒂尔杰斯积分。令 $f(t) = (\\log t)^k$。由于 $k \\ge 1$，我们有 $f(1) = (\\log 1)^k = 0$，因此和式中 $n=1$ 的项是 $a_1 (\\log 1)^k = 0$。我们可以将和式写为：\n$$S_k(x) = \\sum_{n \\le x} a_n f(n) = \\int_{1^-}^{x} f(t) dA(t)$$\n其中 $A(t) = \\sum_{n \\le t} a_n$。应用黎曼–斯蒂尔杰斯积分的分部积分公式 $\\int_a^b u \\,dv = [uv]_a^b - \\int_a^b v \\,du$，其中 $u(t) = f(t)$ 且 $v(t) = A(t)$:\n$$S_k(x) = \\left[A(t)f(t)\\right]_{1^-}^x - \\int_{1^-}^x A(t) f'(t) dt$$\n在下限 $t=1^-$ 处，我们有 $A(1^-) = 0$。因此，在 $t=1^-$ 处的边界项为零。导数是 $f'(t) = \\frac{d}{dt}(\\log t)^k = k(\\log t)^{k-1}\\frac{1}{t}$。这给出了被称为阿贝尔求和公式的显式表示：\n$$S_k(x) = A(x)(\\log x)^k - k \\int_{1}^{x} A(t) \\frac{(\\log t)^{k-1}}{t} dt$$\n接下来，我们代入 $A(x)$ 的给定渐近行为。设 $A(x) = \\alpha x + \\beta \\frac{x}{\\log x} + R(x)$，其中余项 $R(x)$ 的量级为 $O\\left(\\frac{x}{(\\log x)^2}\\right)$。\n将此代入 $S_k(x)$ 的公式中：\n$$S_k(x) = \\left(\\alpha x + \\beta \\frac{x}{\\log x} + R(x)\\right)(\\log x)^k - k \\int_{1}^{x} \\left(\\alpha t + \\beta \\frac{t}{\\log t} + R(t)\\right) \\frac{(\\log t)^{k-1}}{t} dt$$\n我们来分析两个主要部分。首先，非积分项：\n$$A(x)(\\log x)^k = \\alpha x (\\log x)^k + \\beta x (\\log x)^{k-1} + R(x)(\\log x)^k$$\n涉及余项的项是 $R(x)(\\log x)^k = O\\left(\\frac{x}{(\\log x)^2}\\right)(\\log x)^k = O\\left(x(\\log x)^{k-2}\\right)$。这将是我们误差项的一部分。\n\n其次，积分项：\n$$I(x) = k \\int_{1}^{x} \\left(\\alpha (\\log t)^{k-1} + \\beta (\\log t)^{k-2} + \\frac{R(t)}{t}(\\log t)^{k-1}\\right) dt$$\n为了进行渐近分析，我们可以将积分下限从 $1$ 改为一个常数 $c1$，因为从 $1$ 到 $c$ 的积分是一个常数，会被吸收到误差项中。我们来分析积分的三个部分：\n$$I(x) = k\\alpha \\int_{c}^{x} (\\log t)^{k-1} dt + k\\beta \\int_{c}^{x} (\\log t)^{k-2} dt + k \\int_{c}^{x} \\frac{R(t)}{t}(\\log t)^{k-1} dt + O(1)$$\n为了计算前两个积分，我们需要一个对于整数 $m$ 的 $\\int_c^x (\\log t)^m dt$ 的渐近公式。我们可以通过使用分部积分的归纳法来推导这个公式。设 $J_m(x) = \\int_c^x (\\log t)^m dt$。\n对于 $m=0$，$J_0(x) = x-c = x+O(1)$。\n对于 $m \\ge 1$，我们进行分部积分：$\\int u dv = uv - \\int v du$，其中 $u=(\\log t)^m, dv=dt$。\n$$J_m(x) = [t(\\log t)^m]_c^x - \\int_c^x t \\cdot m(\\log t)^{m-1}\\frac{1}{t} dt = x(\\log x)^m - m J_{m-1}(x) + O(1)$$\n通过迭代这个递推关系，我们可以建立渐近展开式：\n$$J_m(x) = x(\\log x)^m - m x(\\log x)^{m-1} + O(x(\\log x)^{m-2})$$\n这对任何整数 $m \\ge 1$ 都成立。对于 $m=0$，$J_0(x) = x+O(1)$。\n对于 $m  0$，行为有所不同。例如，$J_{-1}(x) = \\int_c^x \\frac{dt}{\\log t} \\sim \\frac{x}{\\log x}$。\n\n我们将此应用于我们的积分：\n1.  第一个积分对应于 $m=k-1$。由于 $k \\ge 1$，因此 $m \\ge 0$。\n    $$k\\alpha \\int_c^x (\\log t)^{k-1} dt = k\\alpha \\left(x(\\log x)^{k-1} - (k-1)x(\\log x)^{k-2} + O(x(\\log x)^{k-3})\\right)$$\n    $$= k\\alpha x(\\log x)^{k-1} - k(k-1)\\alpha x(\\log x)^{k-2} + O(x(\\log x)^{k-3})$$\n    （如果 $k=1, m=0$，积分为 $k\\alpha(x-c)=\\alpha x+O(1)$，这与 $(\\log x)^{-1}$ 项为零的约定下的公式相匹配）。\n\n2.  第二个积分对应于 $m=k-2$。\n    如果 $k \\ge 2$，则 $m \\ge 0$。\n    $$k\\beta \\int_c^x (\\log t)^{k-2} dt = k\\beta \\left(x(\\log x)^{k-2} + O(x(\\log x)^{k-3})\\right) \\quad (\\text{对于 } k>2)$$\n    对于 $k=2, m=0$，积分为 $2\\beta (x-c) = 2\\beta x + O(1)$，即 $k\\beta x(\\log x)^{k-2} + O(1)$。\n    如果 $k=1, m=-1$，积分为 $\\beta\\int_c^x \\frac{dt}{\\log t} = \\beta\\left(\\frac{x}{\\log x} + O\\left(\\frac{x}{(\\log x)^2}\\right)\\right)$。此项的量级为 $O(x(\\log x)^{k-2})$。\n    因此，对于所有 $k \\ge 1$，我们有 $k\\beta \\int_c^x (\\log t)^{k-2} dt = k\\beta x(\\log x)^{k-2} + O(x(\\log x)^{k-3})$，其中对于 $k=1$，主项被解释为 $O(x(\\log x)^{-1})$ 量级，小于所需精度。\n\n3.  第三个积分涉及余项 $R(t)=O(t/(\\log t)^2)$。\n    $$k \\int_{c}^{x} \\frac{R(t)}{t}(\\log t)^{k-1} dt = k \\int_{c}^{x} O\\left(\\frac{1}{(\\log t)^2}\\right) (\\log t)^{k-1} dt = k \\int_{c}^{x} O\\left((\\log t)^{k-3}\\right) dt$$\n    该积分的量级为 $O(x(\\log x)^{k-3})$。\n\n合并 $S_k(x)$ 的所有项：\n$$S_k(x) = A(x)(\\log x)^k - I(x)$$\n$$S_k(x) = \\left[\\alpha x (\\log x)^k + \\beta x (\\log x)^{k-1} + O(x(\\log x)^{k-2})\\right] - \\left[k\\alpha x(\\log x)^{k-1} - k(k-1)\\alpha x(\\log x)^{k-2} + k\\beta x(\\log x)^{k-2} + O(x(\\log x)^{k-3})\\right]$$\n我们按 $\\log x$ 的幂次收集项：\n$x(\\log x)^k$ 项：\n$$\\alpha x(\\log x)^k$$\n$x(\\log x)^{k-1}$ 项：\n$$\\beta x(\\log x)^{k-1} - k\\alpha x(\\log x)^{k-1} = (\\beta - k\\alpha) x(\\log x)^{k-1}$$\n$x(\\log x)^{k-2}$ 项：\n$$O(x(\\log x)^{k-2}) - \\left[-k(k-1)\\alpha x(\\log x)^{k-2} + k\\beta x(\\log x)^{k-2}\\right] = (k(k-1)\\alpha - k\\beta)x(\\log x)^{k-2} + O(x(\\log x)^{k-2})$$\n$S_k(x)$ 直到指定误差的完整渐近展开式为：\n$$S_k(x) = \\alpha x(\\log x)^k + (\\beta - k\\alpha) x(\\log x)^{k-1} + O(x(\\log x)^{k-2})$$\n问题要求 $x(\\log x)^{k-1}$ 项的系数。根据我们的推导，该系数是 $\\beta - k\\alpha$。\n该表达式是按要求用 $\\alpha$、$\\beta$ 和 $k$ 表示的闭式表达式。", "answer": "$$\\boxed{\\beta - k\\alpha}$$", "id": "3007015"}, {"introduction": "本练习介绍了一种在现代解析数论研究中至关重要的强大技术：平滑和（smoothed sums）。我们将对一个由“软”截断函数加权的序列应用部分求和，这种截断函数比标准的“硬”截断（即简单地在某点截断求和）具有更好的分析性质。这个练习突显了阿贝尔求和公式在处理非处处光滑函数时的灵活性，并展示了如何通过平滑技术来优化求和的分析处理 [@problem_id:3007030]。", "problem": "设 $\\{a_{n}\\}_{n \\geq 1}$ 为一个实数序列，使得 $\\sum_{n=1}^{\\infty} a_{n}$ 绝对收敛，并令 $A(t)$ 表示其累积和，定义为 $A(t) = \\sum_{n \\leq t} a_{n}$（对于实数 $t \\geq 1$），该函数在 $[1,\\infty)$ 上被扩展为一个分段常数函数，它在整数点处有跳跃且右连续。固定一个整数 $X \\geq 2$，并定义截断函数 $b(t) = \\min\\!\\big(1, t/X\\big)$（对于实数 $t \\geq 1$）。考虑加权和\n$$\nS(X) = \\sum_{n=1}^{\\infty} a_{n}\\, b(n).\n$$\n仅从 $A(t)$ 和 $b(t)$ 的定义以及和与积分的基本性质（包括将 $\\int A(t)\\, b'(t)\\, dt$ 解释为对于分段光滑的 $b$ 和分段常数的 $A$ 的黎曼–斯蒂尔杰斯积分）出发，推导 $S(X)$ 的一个精确表示，该表示用 $\\sum_{n=1}^{\\infty} a_{n}$ 和一个关于 $A(t)$ 对 $b'(t)$ 的积分来表达，并仔细处理端点。然后，将该问题特化于序列 $a_{n} = 1/n^{2}$，并通过使用黎曼zeta函数 $\\zeta(2)$ 和调和数 $H_{m} = \\sum_{k=1}^{m} 1/k$ 来表示你的答案，从而计算出 $S(X)$ 的闭合形式。作为推导的一部分，请解释该表示如何通过 $A(t)$ 对 $b'(t)$ 的积分来明确关联截断和 $\\sum_{n \\leq X} a_{n}$ 与 $\\sum_{n  X} a_{n}/X$，并评论这种截断在序列头部和尾部贡献的加权方式上引入的权衡。\n\n你的最终答案应该是 $S(X)$ 的一个以 $X$、$\\zeta(2)$ 和 $H_{m}$ 表示的单一闭合形式解析表达式。", "solution": "用户希望我使用阿贝尔求和公式解决一个关于加权和的问题。\n\n### 第一步：提取已知条件\n-   一个实数序列 $\\{a_{n}\\}_{n \\geq 1}$，使得 $\\sum_{n=1}^{\\infty} a_{n}$ 绝对收敛。\n-   累积和函数 $A(t) = \\sum_{n \\leq t} a_{n}$（对于实数 $t \\geq 1$）。\n-   一个整数 $X \\geq 2$。\n-   一个截断函数 $b(t) = \\min\\!\\big(1, t/X\\big)$（对于实数 $t \\geq 1$）。\n-   加权和 $S(X) = \\sum_{n=1}^{\\infty} a_{n}\\, b(n)$。\n-   任务是推导 $S(X)$ 的一个精确表示，用 $\\sum_{n=1}^{\\infty} a_{n}$ 和一个涉及 $A(t)$ 和 $b'(t)$ 的积分来表达。\n-   任务是特化于 $a_{n} = 1/n^{2}$，并使用 $\\zeta(2)$ 和调和数 $H_{m}$ 计算 $S(X)$ 的闭合形式。\n-   任务包括对所推导表示的解释。\n\n### 第二步：使用提取的已知条件进行验证\n该问题定义明确，并基于解析数论这一成熟的数学领域。\n-   **科学上成立：** 该问题使用标准概念：绝对收敛级数、分部求和（阿贝尔求和公式）、黎曼-斯蒂尔杰斯积分、黎曼zeta函数 $\\zeta(s)$ 和调和数 $H_m$。所有概念在数学中都有严格的定义。\n-   **适定性：** 给定条件足以确定唯一解。$\\sum a_n$ 的绝对收敛性确保了总和 $A_{\\infty} = \\sum_{n=1}^{\\infty} a_n$ 和部分和 $A(t)$ 是良定义且有界的。函数 $b(t)$ 是连续且分段连续可微的，这确保了黎曼-斯蒂尔杰斯积分 $\\int A(t)\\, db(t)$ 是良定义的。\n-   **客观性：** 该问题使用精确的数学语言陈述，没有主观性或歧义，除了提示中解释性部分的一个小例外，这将在解答中处理。\n\n该问题不违反任何无效性标准。例如，它在科学上不是不健全、不完整或不适定的。\n\n### 第三步：判定与行动\n该问题是**有效**的。我将进行完整的推导和解答。\n\n### 通用表示的推导\n\n所讨论的和是 $S(X) = \\sum_{n=1}^{\\infty} a_{n} b(n)$。我们将使用阿贝尔求和公式（也称为分部求和法），该公式将和与积分联系起来。该公式的积分形式指出，对于序列 $\\{a_n\\}$ 及其部分和 $A(t) = \\sum_{1 \\le n \\le t} a_n$，以及一个连续可微函数 $f(t)$，我们有：\n$$ \\sum_{n=1}^{N} a_n f(n) = A(N) f(N) - \\int_1^N A(t) f'(t) dt $$\n在我们的问题中，函数是 $b(t)$，它是连续且分段 $C^1$ 的。使用黎曼-斯蒂尔杰斯积分更为合适，但由于 $b(t)$ 是绝对连续的，这可以简化为 $A(t)b'(t)$ 的黎曼积分。\n\n我们将此公式应用于部分和 $\\sum_{n=1}^{N} a_n b(n)$，然后取 $N \\to \\infty$ 的极限。\n$$ \\sum_{n=1}^{N} a_n b(n) = A(N) b(N) - \\int_1^N A(t) b'(t) dt $$\n当 $N \\to \\infty$ 时：\n-   和 $\\sum a_n$ 绝对收敛，因此其部分和收敛：$\\lim_{N \\to \\infty} A(N) = \\sum_{n=1}^{\\infty} a_n$。我们用 $A_{\\infty}$ 表示此极限。\n-   函数 $b(t) = \\min(1, t/X)$。对于 $t \\geq X$，$b(t) = 1$。因此，对于任何 $N > X$，$b(N) = 1$。所以，$\\lim_{N \\to \\infty} b(N) = 1$。\n-   因此，$\\lim_{N \\to \\infty} A(N) b(N) = A_{\\infty} \\cdot 1 = A_{\\infty}$。\n\n现在我们分析积分项。$b(t)$ 的导数是：\n$$ b'(t) = \\begin{cases} 1/X  \\text{for } 1 \\leq t  X \\\\ 0  \\text{for } t > X \\end{cases} $$\n导数在 $t=X$ 处未定义，但这一点不影响黎曼积分的值。积分变为：\n$$ \\int_1^{\\infty} A(t) b'(t) dt = \\int_1^X A(t) \\cdot \\frac{1}{X} dt + \\int_X^{\\infty} A(t) \\cdot 0 dt = \\frac{1}{X} \\int_1^X A(t) dt $$\n综合这些结果，我们取 $N \\to \\infty$ 的极限：\n$$ S(X) = \\sum_{n=1}^{\\infty} a_n b(n) = A_{\\infty} - \\frac{1}{X} \\int_1^X A(t) dt $$\n这就是 $S(X)$ 以 $A_{\\infty} = \\sum_{n=1}^{\\infty} a_n$ 和 $A(t)$ 的积分表示的精确形式。\n\n### 表示的解释\n\n问题要求一个能关联特定截断和的解释。首先，我们分析积分项。由于 $A(t)$ 是一个阶梯函数，在整数 $k$ 的区间 $[k, k+1)$ 上是常数，我们可以将积分写成一个和：\n$$ \\int_1^X A(t) dt = \\sum_{k=1}^{X-1} \\int_k^{k+1} A(t) dt = \\sum_{k=1}^{X-1} A(k) \\int_k^{k+1} dt = \\sum_{k=1}^{X-1} A(k) = \\sum_{k=1}^{X-1} \\sum_{n=1}^{k} a_n $$\n通过改变求和顺序：\n$$ \\sum_{k=1}^{X-1} \\sum_{n=1}^{k} a_n = \\sum_{n=1}^{X-1} \\sum_{k=n}^{X-1} a_n = \\sum_{n=1}^{X-1} a_n ((X-1) - n + 1) = \\sum_{n=1}^{X-1} a_n (X-n) $$\n所以，积分代表了序列初始项的加权和：\n$$ \\frac{1}{X} \\int_1^X A(t) dt = \\frac{1}{X} \\sum_{n=1}^{X-1} a_n (X-n) = \\sum_{n=1}^{X-1} a_n \\left(1 - \\frac{n}{X}\\right) $$\n将此代入 $S(X)$ 的表达式中：\n$$ S(X) = \\sum_{n=1}^{\\infty} a_n - \\sum_{n=1}^{X-1} a_n \\left(1 - \\frac{n}{X}\\right) = \\sum_{n=1}^{X-1} a_n \\left(1 - \\left(1 - \\frac{n}{X}\\right)\\right) + \\sum_{n=X}^{\\infty} a_n = \\sum_{n=1}^{X-1} a_n \\frac{n}{X} + \\sum_{n=X}^{\\infty} a_n $$\n这从其定义中恢复了原始的和，证实了我们公式的正确性。\n\n积分项精确地说明了级数“头部”（$n  X$ 的项）权重的减少。权重函数 $b(n)$ 从 $n=1$ 处的 $1/X$ 线性增加到 $n=X-1$ 处的 $(X-1)/X$，然后对所有 $n \\geq X$ 跳跃到 $1$。与简单的硬截断 $\\sum_{n=1}^X a_n$ 相比，这种“软”或“光滑”的截断逐渐引入各项。其权衡在于，计算不再是一个简单的部分和，而是级数头部的一个加权平均和完整的尾部。\n\n提示要求将积分与 $\\sum_{n \\leq X} a_{n}$ 和 $\\sum_{n > X} a_{n}/X$ 联系起来。第一项是 $A(X)$。第二项 $\\frac{1}{X}\\sum_{n=X+1}^\\infty a_n$ 在此推导中并未自然出现。基于上述严格推导，积分项正确地对应于 $\\sum_{n=1}^{X-1} a_n(1 - n/X)$，而不是提示中提到的量。这表明问题的解释性要求中存在一个微小的不准确之处。\n\n### 特化于 $a_n = 1/n^2$\n\n我们现在将结果特化于序列 $a_n = 1/n^2$。\n-   级数的和是 $A_{\\infty} = \\sum_{n=1}^{\\infty} \\frac{1}{n^2} = \\zeta(2)$。\n-   调和数定义为 $H_m = \\sum_{k=1}^m \\frac{1}{k}$。\n\n我们需要计算积分项：\n$$ \\frac{1}{X} \\int_1^X A(t) dt = \\frac{1}{X} \\sum_{n=1}^{X-1} \\frac{X-n}{n^2} $$\n展开这个和：\n$$ \\sum_{n=1}^{X-1} \\frac{X-n}{n^2} = \\sum_{n=1}^{X-1} \\left(\\frac{X}{n^2} - \\frac{1}{n}\\right) = X \\sum_{n=1}^{X-1} \\frac{1}{n^2} - \\sum_{n=1}^{X-1} \\frac{1}{n} $$\n第二部分是调和数 $H_{X-1}$。因此：\n$$ \\frac{1}{X} \\int_1^X A(t) dt = \\frac{1}{X} \\left( X \\sum_{n=1}^{X-1} \\frac{1}{n^2} - H_{X-1} \\right) = \\sum_{n=1}^{X-1} \\frac{1}{n^2} - \\frac{H_{X-1}}{X} $$\n现在，我们将其代入我们的 $S(X)$ 通用公式中：\n$$ S(X) = A_{\\infty} - \\frac{1}{X} \\int_1^X A(t) dt = \\zeta(2) - \\left( \\sum_{n=1}^{X-1} \\frac{1}{n^2} - \\frac{H_{X-1}}{X} \\right) $$\n$$ S(X) = \\zeta(2) - \\sum_{n=1}^{X-1} \\frac{1}{n^2} + \\frac{H_{X-1}}{X} $$\n这是给定序列 $S(X)$ 的最终闭合形式表达式。项 $\\zeta(2) - \\sum_{n=1}^{X-1} \\frac{1}{n^2}$ 正是zeta函数的尾部，即 $\\sum_{n=X}^{\\infty} \\frac{1}{n^2}$。该表达式是“闭合的”，因为它由标准的特殊函数和一个有限和组成，并且无法用初等函数或指定的特殊函数进一步简化。", "answer": "$$ \\boxed{\\zeta(2) - \\sum_{n=1}^{X-1} \\frac{1}{n^2} + \\frac{H_{X-1}}{X}} $$", "id": "3007030"}]}
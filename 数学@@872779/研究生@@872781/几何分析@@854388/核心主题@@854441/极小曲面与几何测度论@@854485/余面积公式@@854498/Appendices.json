{"hands_on_practices": [{"introduction": "要真正掌握余面积公式，最好的起点是进行一次直接的验证。本练习将引导您在一个三角形定义域上，为一个简单的线性函数分别计算余面积等式的两边。通过独立计算面积分和水平集上的积分，您将亲手确认该公式的运作机制，从而获得具体的理解[@problem_id:1449836]。", "problem": "设 $T$ 为 $xy$ 平面内的一个三角形区域，其顶点为 $(0,0)$, $(1,0)$, 和 $(0,1)$。\n考虑两个量 $I_1$ 和 $I_2$，定义如下：\n\n1.  第一个量 $I_1$ 是函数 $g(x,y) = x$ 在区域 $T$ 上的二重积分：\n    $$I_1 = \\iint_T x \\,dA$$\n    其中 $dA$ 是 $xy$ 平面内的面积元。\n\n2.  第二个量 $I_2$ 是通过一个累次积分过程定义的。对于区间 $[0,1]$ 中的任意实数 $t$，设 $L_t$ 是由区域 $T$ 与直线 $y=t$ 相交形成的水平线段。量 $I_2$ 则由以下积分给出：\n    $$I_2 = \\int_0^1 \\left( \\int_{L_t} x \\,ds \\right) dt$$\n    其中内部积分是函数 $g(x,y)=x$ 沿着线段 $L_t$ 的线积分，且 $ds$ 是弧长元。\n\n计算 $I_1$ 和 $I_2$ 的值。将您的答案表示为 $\\begin{pmatrix} I_1  I_2 \\end{pmatrix}$ 形式的 $1 \\times 2$ 行矩阵。", "solution": "三角形区域 $T$ 由 $\\{(x,y): x \\geq 0, y \\geq 0, x + y \\leq 1\\}$ 给出。对于 $I_{1}$，我们将二重积分写为 $y$ 从 $0$ 到 $1 - x$，$x$ 从 $0$ 到 $1$ 的形式：\n$$\nI_{1} = \\iint_{T} x \\, dA = \\int_{0}^{1} \\int_{0}^{1 - x} x \\, dy \\, dx.\n$$\n计算内部积分，\n$$\n\\int_{0}^{1 - x} x \\, dy = x(1 - x).\n$$\n因此，\n$$\nI_{1} = \\int_{0}^{1} \\left(x - x^{2}\\right) dx = \\left[\\frac{x^{2}}{2} - \\frac{x^{3}}{3}\\right]_{0}^{1} = \\frac{1}{2} - \\frac{1}{3} = \\frac{1}{6}.\n$$\n\n对于 $I_{2}$，对于一个固定的 $t \\in [0,1]$，水平线段 $L_{t}$ 是 $\\{(x,t): 0 \\leq x \\leq 1 - t\\}$。将 $L_{t}$ 参数化为 $\\mathbf{r}(x) = (x,t)$，其中 $x \\in [0, 1 - t]$。则 $d\\mathbf{r}/dx = (1,0)$，所以 $ds = |\\mathbf{r}'(x)| dx = dx$。内部的线积分为\n$$\n\\int_{L_{t}} x \\, ds = \\int_{0}^{1 - t} x \\, dx = \\frac{(1 - t)^{2}}{2}.\n$$\n因此，\n$$\nI_{2} = \\int_{0}^{1} \\frac{(1 - t)^{2}}{2} \\, dt = \\frac{1}{2} \\int_{0}^{1} \\left(1 - 2t + t^{2}\\right) dt = \\frac{1}{2} \\left[t - t^{2} + \\frac{t^{3}}{3}\\right]_{0}^{1} = \\frac{1}{2} \\cdot \\frac{1}{3} = \\frac{1}{6}.\n$$\n\n因此，\n$$\nI_{1} = \\frac{1}{6}, \\quad I_{2} = \\frac{1}{6}.\n$$", "answer": "$$\\boxed{\\begin{pmatrix} \\frac{1}{6}  \\frac{1}{6} \\end{pmatrix}}$$", "id": "1449836"}, {"introduction": "余面积公式不仅是一个理论恒等式，更是一个强大的计算工具。本练习将展示其在函数水平集结构复杂多变情景下的应用价值。通过运用该公式，我们将一个看似复杂的二重积分转化为一个关于水平集长度的、简单得多的积分，从而体会其简化计算的威力[@problem_id:1449839]。", "problem": "考虑二维区域 $D = [-2, 2] \\times [-2, 2]$。设函数 $g: D \\to \\mathbb{R}$ 定义为 $g(x, y) = x^3 - 3x$。\n\n你的任务是通过应用余面积公式和函数 $g(x,y)$ 的水平集来计算积分\n$$I = \\int_D |3x^2 - 3| \\, dx \\, dy$$\n的值。\n\n给出积分 $I$ 的精确数值。", "solution": "给定 $D=[-2,2]\\times[-2,2]$ 和 $g(x,y)=x^{3}-3x$。被积函数满足\n$$\n|3x^{2}-3|=\\left|\\frac{\\partial g}{\\partial x}\\right|=\\left|\\nabla g(x,y)\\right|,\n$$\n因为 $\\frac{\\partial g}{\\partial y}=0$。根据二维余面积公式，\n$$\n\\int_{D}|\\nabla g|\\,dx\\,dy=\\int_{\\mathbb{R}}\\mathcal{H}^{1}\\!\\left(D\\cap g^{-1}(t)\\right)\\,dt,\n$$\n其中 $\\mathcal{H}^{1}$ 表示一维豪斯多夫测度（长度）。\n\n因此我们计算对于 $t\\in\\mathbb{R}$ 的水平集 $D\\cap g^{-1}(t)$ 的长度。因为 $g$ 只依赖于 $x$，所以 $D$ 内的水平集 $g(x,y)=t$ 由位于满足方程\n$$\nx^{3}-3x=t,\n$$\n的 $x\\in[-2,2]$ 处的竖直线段组成，其中 $y\\in[-2,2]$。令 $h(x)=x^{3}-3x$。在 $[-2,2]$ 上，$h' (x)=3x^{2}-3$，所以 $h$ 在 $[-2,-1]$ 上严格递增，在 $[-1,1]$ 上严格递减，在 $[1,2]$ 上严格递增。端点值为\n$$\nh(-2)=-2,\\quad h(-1)=2,\\quad h(1)=-2,\\quad h(2)=2,\n$$\n所以 $h$ 在 $[-2,2]$ 上的值域是 $[-2,2]$。\n\n因此：\n- 对于 $t\\in(-2,2)$，方程 $x^{3}-3x=t$ 在 $[-2,2]$ 中恰有三个不同的解，分别位于区间 $[-2,-1]$、[-1,1] 和 [1,2] 中。因此，$D\\cap g^{-1}(t)$ 是三条竖直线段的并集，每条线段长度为 $4$（因为 $y\\in[-2,2]$），所以\n$$\n\\mathcal{H}^{1}\\!\\left(D\\cap g^{-1}(t)\\right)=3\\times 4=12.\n$$\n- 对于 $t=\\pm 2$，在 $[-2,2]$ 中有两个不同的 $x$ 值（其中一个是二重根），产生两条长度为 $4$ 的竖直线段，因此 $\\mathcal{H}^{1}=8$。这些孤立的值不影响积分的结果。\n- 对于 $t\\notin[-2,2]$，在 $[-2,2]$ 中没有解，所以长度为 $0$。\n\n因此，根据余面积公式，\n$$\nI=\\int_{D}|3x^{2}-3|\\,dx\\,dy=\\int_{\\mathbb{R}}\\mathcal{H}^{1}\\!\\left(D\\cap g^{-1}(t)\\right)\\,dt=\\int_{-2}^{2}12\\,dt=12\\cdot 4=48.\n$$", "answer": "$$\\boxed{48}$$", "id": "1449839"}, {"introduction": "现在我们进入余面积公式的自然适用领域：Lipschitz函数空间。本问题将探讨函数 $f(x) = \\|x\\|$，它并非连续可微，这迫使我们直面该公式的稳健性。这个练习将加深您对梯度项 $|\\nabla f|$ 为何作为几何密度因子出现的理解，并展示该公式如何巧妙地处理奇点以得出深刻的几何结论[@problem_id:3034561]。", "problem": "设 $n \\geq 2$ 且 $R0$。考虑函数 $f:\\mathbb{R}^{n}\\to\\mathbb{R}$，定义为 $f(x)=\\|x\\|$，其中 $\\|\\cdot\\|$ 表示欧几里得范数。\n\n(a) 验证 $f$ 是利普希茨 (Lipschitz) 连续的，但不是 $C^{1}$ 类的，并解释为什么梯度 $\\nabla f$ 在 $\\mathbb{R}^{n}$ 中几乎处处 (a.e.) 存在。对于 $x\\neq 0$，明确写出 $\\nabla f(x)$，并确定 $|\\nabla f(x)|$ 的值。\n\n(b) 在概念层面上，不引用任何预先给出的公式，描述当将一个 $n$ 维积分重写为在一个赋予了 $(n-1)$ 维豪斯多夫测度 $\\mathcal{H}^{n-1}$ 的水平集族 $\\{f=t\\}$ 上的积分时，如何通过将 $\\mathbb{R}^{n}$ 切片为 $f$ 的水平集来引入一个由 $|\\nabla f|$ 构成的权重。你的解释应当说明为何密度 $|\\nabla f|$ 会自然出现，尽管 $f$ 在一个零测度集上不属于 $C^{1}$ 类。\n\n(c) 使用 (b) 部分的观点，计算积分\n$$\nJ(R,n)\\;=\\;\\int_{B_{R}(0)} |\\nabla f(x)|\\,\\mathrm{d}x,\n$$\n其中 $B_{R}(0)=\\{x\\in\\mathbb{R}^{n}:\\|x\\|\\le R\\}$。用 $n$、$R$、$\\pi$ 和伽马函数 $\\Gamma(\\cdot)$ 以闭合形式表示你的最终答案。你的最终答案必须是单一的解析表达式。不要提供任何数值近似。", "solution": "(a) 我们分析函数 $f(x) = \\|x\\|$，其中 $x \\in \\mathbb{R}^n$，$n \\geq 2$。\n\n首先，我们验证 $f$ 是利普希茨连续的。对于任意 $x, y \\in \\mathbb{R}^n$，欧几里得范数的反三角不等式表明 $|\\|x\\| - \\|y\\|| \\le \\|x-y\\|$。就我们的函数 $f$ 而言，这即是 $|f(x) - f(y)| \\le 1 \\cdot \\|x-y\\|$。这是利普希茨连续性的定义，利普希茨常数为 $L=1$。\n\n接下来，我们证明 $f$ 不是 $C^1(\\mathbb{R}^n)$ 类的函数。一个函数是 $C^1$ 类的，如果它处处可微且其导数连续。我们将证明 $f$ 在 $x=0$ 处不可微。函数 $f$ 在点 $x_0$ 处的导数（如果存在）是一个线性映射 $Df(x_0)$，使得 $\\lim_{h\\to 0} \\frac{\\|f(x_0+h) - f(x_0) - Df(x_0)(h)\\|}{\\|h\\|} = 0$。在 $x_0=0$ 处，我们有 $f(0)=0$。如果导数存在，它必须是零映射，因为在任何方向 $v$ 上的方向导数将是 $\\lim_{t\\to 0} \\frac{\\|tv\\| - 0}{t} = \\|v\\|\\lim_{t\\to 0} \\frac{|t|}{t}$，而这个极限不存在。更正式地，考虑单位向量 $v \\in \\mathbb{R}^n$ 的路径 $h_t = tv$。\n在 $0$ 点沿方向 $v$ 的方向导数为：\n$$\n\\lim_{t \\to 0^+} \\frac{f(0+tv)-f(0)}{t} = \\lim_{t \\to 0^+} \\frac{\\|tv\\|}{t} = \\lim_{t \\to 0^+} \\frac{t\\|v\\|}{t} = \\|v\\|=1.\n$$\n然而，从负方向逼近：\n$$\n\\lim_{t \\to 0^-} \\frac{f(0+tv)-f(0)}{t} = \\lim_{t \\to 0^-} \\frac{\\|tv\\|}{t} = \\lim_{t \\to 0^-} \\frac{|t|\\|v\\|}{t} = \\lim_{t \\to 0^-} \\frac{-t\\|v\\|}{t} = -\\|v\\|=-1.\n$$\n由于方向导数依赖于逼近的方向（即使对于固定的方向，从左侧和右侧的极限也不同），该函数在 $x=0$ 处不可微。因为它在一点上不可微，所以它不可能是 $C^1(\\mathbb{R}^n)$ 类的。\n\n根据拉德马赫定理 (Rademacher's theorem)，梯度 $\\nabla f$ 几乎处处 (a.e.) 存在。该定理指出，任何从 $\\mathbb{R}^n$ 到 $\\mathbb{R}^m$ 的利普希茨函数关于勒贝格测度几乎处处可微。正如我们已经证明的，$f$ 是利普希茨连续的，因此它几乎处处可微。唯一的不可微点是 $x=0$，对于 $n \\ge 1$，这是一个在 $\\mathbb{R}^n$ 中的勒贝格零测度集。\n\n对于任意 $x \\neq 0$，函数 $f(x) = (\\sum_{i=1}^n x_i^2)^{1/2}$ 是光滑函数的复合，因此我们可以使用链式法则计算其梯度。关于 $x_j$ 的偏导数是：\n$$\n\\frac{\\partial f}{\\partial x_j} = \\frac{\\partial}{\\partial x_j} \\left(\\sum_{i=1}^n x_i^2\\right)^{1/2} = \\frac{1}{2} \\left(\\sum_{i=1}^n x_i^2\\right)^{-1/2} (2x_j) = \\frac{x_j}{\\left(\\sum_{i=1}^n x_i^2\\right)^{1/2}} = \\frac{x_j}{\\|x\\|}.\n$$\n因此，梯度向量 $\\nabla f(x)$ 是：\n$$\n\\nabla f(x) = \\left( \\frac{x_1}{\\|x\\|}, \\frac{x_2}{\\|x\\|}, \\dots, \\frac{x_n}{\\|x\\|} \\right) = \\frac{x}{\\|x\\|}.\n$$\n这是 $x$ 方向上的单位向量。\n\n对于 $x \\neq 0$，梯度的模长是这个向量的范数：\n$$\n|\\nabla f(x)| = \\left\\| \\frac{x}{\\|x\\|} \\right\\| = \\frac{1}{\\|x\\|} \\|x\\| = 1.\n$$\n\n(b) 余面积公式提供了一种方法，将一个 $n$ 维域上的积分分解为一个累次积分，其中首先在一个函数的 $(n-1)$ 维水平集上积分，然后将结果对函数的值进行积分。对于一个函数 $f:\\mathbb{R}^n \\to \\mathbb{R}$，其水平集是对于常数 $t$ 的曲面 $\\{x \\in \\mathbb{R}^n | f(x) = t\\}$。\n\n从概念上讲，密度 $|\\nabla f|$ 的出现源于几何坐标变换。考虑 $\\mathbb{R}^n$ 中的一个微小体积元 $d\\mathcal{L}^n(x)$。我们希望用一个适应于 $f$ 的水平集的坐标系来表示这个体积元。这个新系统可以被认为有一个坐标表示水平集的值 $t=f(x)$，以及 $n-1$ 个坐标参数化在该水平集上的位置。体积元可以局部地分解为一个水平集上的曲面面积元 $d\\mathcal{H}^{n-1}$ 和一个垂直于水平集的无穷小厚度 $dh$ 的乘积。所以，$d\\mathcal{L}^n(x) \\approx d\\mathcal{H}^{n-1} \\cdot dh$。\n\n厚度 $dh$ 是从水平集 $\\{f=t\\}$ 到 $\\{f=t+dt\\}$ 所必须移动的垂直距离。梯度 $\\nabla f(x)$ 指向 $f$ 增长最快的方向，该方向垂直于 $x$ 点的水平集。梯度的模长 $|\\nabla f(x)|$ 代表了这个增长率。通过一阶近似， $f$ 的变化量 $df$ 与法线方向上的位移 $dh$ 相关，即 $df \\approx |\\nabla f(x)| dh$。对于一个无穷小的变化 $dt$，所需的法向位移是 $dh \\approx \\frac{dt}{|\\nabla f(x)|}$。\n\n将此代入体积分解中，我们得到 $d\\mathcal{L}^n(x) \\approx d\\mathcal{H}^{n-1} \\frac{dt}{|\\nabla f(x)|}$。这导出了余面积公式的一种形式：\n$$\n\\int_{\\mathbb{R}^n} g(x) \\,d\\mathcal{L}^n(x) = \\int_{-\\infty}^{\\infty} \\left( \\int_{f^{-1}(t)} \\frac{g(x)}{|\\nabla f(x)|} \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n问题陈述中提到了在重写 $n$ 维积分时由 $|\\nabla f|$ 引入的权重。这指向了余面积公式更常见的陈述形式：\n$$\n\\int_{\\mathbb{R}^n} g(x) |\\nabla f(x)| \\,d\\mathcal{L}^n(x) = \\int_{-\\infty}^{\\infty} \\left( \\int_{f^{-1}(t)} g(x) \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n这个形式是通过将 $|\\nabla f(x)|$ 移到左边直接从前一个形式得到的。因子 $|\\nabla f(x)|$ 是在从笛卡尔坐标变换到水平集坐标时解释几何变形的雅可比因子。它衡量了水平面被“压缩”的密集程度；在 $|\\nabla f|$ 大的地方，水平面彼此靠近，空间中一个较小的体积对应于一个给定的 $t$ 值范围。\n\n函数 $f(x)=\\|x\\|$ 在 $x=0$ 处不属于 $C^1$ 类这一事实并不会使此推理失效。余面积公式对像 $f$ 这样的利普希茨函数成立。导数 $\\nabla f$ 几乎处处存在，而其未定义的集合 $\\{0\\}$ 是一个勒贝格零测度集。在零测度集上的积分为零，因此这些点对左侧积分的值没有贡献。几何论证对域中几乎所有的点都成立。\n\n(c) 我们需要计算积分 $J(R,n) = \\int_{B_R(0)} |\\nabla f(x)|\\,d\\mathcal{L}^n(x)$，其中 $f(x)=\\|x\\|$ 且 $B_R(0)=\\{x\\in\\mathbb{R}^{n}:\\|x\\|\\le R\\}$。\n\n我们应用余面积公式：\n$$\n\\int_{\\Omega} g(x) |\\nabla f(x)| \\,d\\mathcal{L}^n(x) = \\int_{-\\infty}^{\\infty} \\left( \\int_{f^{-1}(t) \\cap \\Omega} g(x) \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n在我们的具体情况下，域是 $\\Omega=B_R(0)$，函数是 $f(x)=\\|x\\|$，我们取被积函数为 $g(x)=1$。积分变为：\n$$\nJ(R,n) = \\int_{B_R(0)} 1 \\cdot |\\nabla \\|x\\|| \\,d\\mathcal{L}^n(x).\n$$\n在域 $B_R(0)$ 上，$f(x)=\\|x\\|$ 的取值范围是 $[0, R]$。因此，关于 $t$ 的外层积分将从 $0$ 到 $R$。对于任意 $t \\in [0, R]$，水平集是 $f^{-1}(t)=\\{x \\in \\mathbb{R}^n : \\|x\\|=t\\}$，这是一个半径为 $t$ 的 $(n-1)$ 维球面，记为 $S_t^{n-1}$。与域的交集是 $f^{-1}(t) \\cap B_R(0) = S_t^{n-1}$ 对于 $t \\in (0, R]$，以及 $\\{0\\}$ 对于 $t=0$。\n\n应用公式：\n$$\nJ(R,n) = \\int_{0}^{R} \\left( \\int_{S_t^{n-1}} 1 \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n内层积分是球面 $S_t^{n-1}$ 的 $(n-1)$ 维豪斯多夫测度（即其表面积）。半径为 $r$ 的 $(n-1)$ 维球面的表面积由公式 $A_{n-1}(r) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)}r^{n-1}$ 给出。\n对于我们的球面 $S_t^{n-1}$，半径是 $t$，所以其表面积是：\n$$\n\\mathcal{H}^{n-1}(S_t^{n-1}) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)}t^{n-1}.\n$$\n将此代入外层积分，我们得到：\n$$\nJ(R,n) = \\int_{0}^{R} \\frac{2\\pi^{n/2}}{\\Gamma(n/2)}t^{n-1} dt.\n$$\n常数因子可以提到积分外面：\n$$\nJ(R,n) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)} \\int_{0}^{R} t^{n-1} dt.\n$$\n我们计算这个初等积分：\n$$\n\\int_{0}^{R} t^{n-1} dt = \\left[ \\frac{t^n}{n} \\right]_0^R = \\frac{R^n}{n} - 0 = \\frac{R^n}{n}.\n$$\n最后，我们得到 $J(R,n)$ 的表达式：\n$$\nJ(R,n) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)} \\cdot \\frac{R^n}{n} = \\frac{2\\pi^{n/2}R^n}{n\\Gamma(n/2)}.\n$$\n这个结果是一致的。从 (a) 部分我们知道，对于几乎所有的 $x$，$|\\nabla f(x)|=1$。因此，积分 $J(R,n)$ 应该等于积分域 $B_R(0)$ 的勒贝格测度。\n$$\nJ(R,n) = \\int_{B_R(0)} 1 \\,d\\mathcal{L}^n(x) = \\mathcal{L}^n(B_R(0)).\n$$\n我们推导出的表达式 $\\frac{2\\pi^{n/2}R^n}{n\\Gamma(n/2)}$，确实是半径为 $R$ 的 $n$ 维球体体积的著名公式。这可以通过使用恒等式 $\\Gamma(z+1)=z\\Gamma(z)$ 看出，它给出了 $n\\Gamma(n/2) = 2 \\cdot \\frac{n}{2}\\Gamma(\\frac{n}{2}) = 2\\Gamma(\\frac{n}{2}+1)$。\n所以，$J(R,n) = \\frac{2\\pi^{n/2}R^n}{2\\Gamma(n/2+1)} = \\frac{\\pi^{n/2}R^n}{\\Gamma(n/2+1)}$，这是 $n$ 维球体体积的标准表示法。", "answer": "$$\n\\boxed{\\frac{2\\pi^{n/2}R^n}{n\\Gamma(\\frac{n}{2})}}\n$$", "id": "3034561"}]}
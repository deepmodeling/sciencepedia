{
    "hands_on_practices": [
        {
            "introduction": "To understand the geometry of Dirac structures, we must first master their algebraic heart. This practice  strips away the complexities of manifolds to focus on the core linear algebra in $\\mathbb{R}^n \\oplus \\mathbb{R}^n$. By explicitly verifying that the graph of a skew-symmetric map is maximally isotropic with respect to a natural symmetric pairing, you will gain a hands-on feel for the properties that define all Dirac structures.",
            "id": "3749444",
            "problem": "Let $V=\\mathbb{R}^{n}$ be equipped with the standard Euclidean inner product $x \\cdot y = x^{\\top} y$. On $V \\oplus V$, consider the symmetric bilinear form defined by\n$$\n\\langle (x,u),(y,v)\\rangle \\;=\\; x \\cdot v \\;+\\; y \\cdot u \\quad \\text{for all } x,y,u,v \\in V.\n$$\nA subspace $L \\subset V \\oplus V$ is called isotropic if $\\langle \\ell_{1},\\ell_{2}\\rangle=0$ for all $\\ell_{1},\\ell_{2}\\in L$, and maximally isotropic if it is isotropic and has the largest possible dimension among isotropic subspaces. Let $W \\in \\mathbb{R}^{n \\times n}$ be a real skew-symmetric matrix, meaning $W^{\\top}=-W$. Consider the graph\n$$\n\\operatorname{graph}(W) \\;=\\; \\{\\, (x,Wx) \\in V \\oplus V \\mid x \\in V \\,\\}.\n$$\nUsing only the definitions above and basic linear algebra, compute the bilinear pairing\n$$\n\\langle (x,Wx), (y,Wy) \\rangle\n$$\nfor arbitrary $x,y \\in V$, simplify your expression using $W^{\\top}=-W$, and then justify from first principles why $\\operatorname{graph}(W)$ is maximally isotropic in $V \\oplus V$ with respect to $\\langle \\cdot,\\cdot\\rangle$. What is the exact value of the computed pairing? Provide your final answer as a single exact number with no units.",
            "solution": "The problem asks us to compute a specific bilinear pairing and then use the result to justify that a certain subspace is maximally isotropic. The problem is set in the vector space $V \\oplus V$, where $V = \\mathbb{R}^{n}$, equipped with a symmetric bilinear form $\\langle (x,u),(y,v)\\rangle = x \\cdot v + y \\cdot u$. Here, $x, y, u, v \\in V$ and $x \\cdot y = x^{\\top} y$ is the standard Euclidean inner product. We are given a real skew-symmetric matrix $W \\in \\mathbb{R}^{n \\times n}$, satisfying $W^{\\top} = -W$, and we consider its graph, $\\operatorname{graph}(W) = \\{\\, (x,Wx) \\in V \\oplus V \\mid x \\in V \\,\\}$.\n\nFirst, we compute the bilinear pairing $\\langle (x,Wx), (y,Wy) \\rangle$ for arbitrary elements $(x, Wx)$ and $(y, Wy)$ of $\\operatorname{graph}(W)$, where $x, y \\in V$.\n\nAccording to the definition of the bilinear form, we have:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = x \\cdot (Wy) + y \\cdot (Wx)\n$$\nUsing the matrix representation of the dot product, $a \\cdot b = a^{\\top}b$, we can rewrite this expression as:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = x^{\\top}(Wy) + y^{\\top}(Wx)\n$$\nThis expression consists of scalars (i.e., $1 \\times 1$ matrices). A scalar is equal to its own transpose. We can apply this to the second term, using the transpose rule $(AB)^{\\top} = B^{\\top}A^{\\top}$:\n$$\ny^{\\top}(Wx) = (y^{\\top}(Wx))^{\\top} = (Wx)^{\\top}(y^{\\top})^{\\top} = (x^{\\top}W^{\\top})y = x^{\\top}W^{\\top}y\n$$\nSubstituting this back into our main expression gives:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = x^{\\top}Wy + x^{\\top}W^{\\top}y\n$$\nUsing the right distributive property of matrix multiplication, we can factor out $x^{\\top}$ on the left and $y$ on the right:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = x^{\\top}(W + W^{\\top})y\n$$\nWe are given that the matrix $W$ is skew-symmetric, which means by definition that $W^{\\top} = -W$. Substituting this condition into the equation:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = x^{\\top}(W + (-W))y = x^{\\top}(W - W)y\n$$\nThis simplifies to:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = x^{\\top}(0_{n \\times n})y\n$$\nwhere $0_{n \\times n}$ is the $n \\times n$ zero matrix. The product of any matrix with the zero matrix is the zero matrix, so $x^{\\top}(0_{n \\times n})$ is a zero row vector. The dot product of the zero vector with any vector $y$ is the scalar $0$. Thus, for any $x, y \\in V$:\n$$\n\\langle (x,Wx), (y,Wy) \\rangle = 0\n$$\n\nNext, we must justify from first principles why $\\operatorname{graph}(W)$ is maximally isotropic. This justification involves two steps: showing it is isotropic and showing its dimension is maximal among all isotropic subspaces.\n\n1.  **Isotropy**: A subspace $L$ is defined as isotropic if $\\langle \\ell_1, \\ell_2 \\rangle = 0$ for all $\\ell_1, \\ell_2 \\in L$. Our calculation above has shown that for any two elements of $\\operatorname{graph}(W)$, say $\\ell_1 = (x, Wx)$ and $\\ell_2 = (y, Wy)$, their pairing is $\\langle \\ell_1, \\ell_2 \\rangle = 0$. This directly satisfies the definition, so $\\operatorname{graph}(W)$ is an isotropic subspace of $V \\oplus V$.\n\n2.  **Maximality**: To show the subspace is maximally isotropic, we must show that it has the largest possible dimension for an isotropic subspace.\n    First, let's determine the dimension of $\\operatorname{graph}(W)$. The graph is the image of the linear map $\\phi_W: V \\to V \\oplus V$ defined by $\\phi_W(x) = (x, Wx)$. This map is injective, because if $\\phi_W(x) = (0,0)$, then $(x, Wx) = (0,0)$, which implies $x=0$. Since the map is an injective linear transformation from $V$ to $V \\oplus V$, its image $\\operatorname{graph}(W)$ is a subspace of $V \\oplus V$ with the same dimension as the domain $V$. Since $V=\\mathbb{R}^n$, we have $\\dim(V)=n$. Therefore, $\\dim(\\operatorname{graph}(W)) = n$.\n\n    Second, let's determine the maximum possible dimension of any isotropic subspace $L \\subseteq V \\oplus V$. The total space is $V \\oplus V \\cong \\mathbb{R}^{n} \\oplus \\mathbb{R}^{n} \\cong \\mathbb{R}^{2n}$, so $\\dim(V \\oplus V) = 2n$. Let $L^{\\perp}$ be the orthogonal complement of $L$ with respect to the bilinear form $\\langle\\cdot,\\cdot\\rangle$. The form is non-degenerate; to verify this, assume $(x,u)$ is orthogonal to all $(y,v) \\in V \\oplus V$. Then $\\langle(x,u), (y,v)\\rangle=x \\cdot v + y \\cdot u = 0$ for all $y,v \\in V$. Setting $y=0$ gives $x \\cdot v = 0$ for all $v$, which implies $x=0$ because the dot product is non-degenerate. Setting $v=0$ gives $y \\cdot u = 0$ for all $y$, which implies $u=0$. So, only $(0,0)$ is in the radical, and the form is non-degenerate.\n    For a non-degenerate bilinear form on a finite-dimensional vector space, we have the relation $\\dim(L) + \\dim(L^{\\perp}) = \\dim(V \\oplus V) = 2n$.\n    Since $L$ is isotropic, we have $\\langle \\ell_1, \\ell_2 \\rangle = 0$ for all $\\ell_1, \\ell_2 \\in L$. This means that every vector in $L$ is orthogonal to every other vector in $L$, so $L \\subseteq L^{\\perp}$.\n    From $L \\subseteq L^{\\perp}$, it follows that $\\dim(L) \\le \\dim(L^{\\perp})$.\n    Substituting this into the dimension formula gives:\n    $$\n    \\dim(L) + \\dim(L) \\le \\dim(L) + \\dim(L^{\\perp}) = 2n\n    $$\n    $$\n    2\\dim(L) \\le 2n \\implies \\dim(L) \\le n\n    $$\n    This proves that the maximum possible dimension for an isotropic subspace is $n$.\n\n    Since $\\operatorname{graph}(W)$ is an isotropic subspace and its dimension is $n$, it achieves the maximum possible dimension for an isotropic subspace. Therefore, $\\operatorname{graph}(W)$ is a maximally isotropic subspace.\n\nThe problem asks for the exact value of the computed pairing. As shown in the first part of the derivation, this value is exactly $0$.",
            "answer": "$$\n\\boxed{0}\n$$"
        },
        {
            "introduction": "With the algebraic foundation in place, we now move to the geometric setting of smooth manifolds. This exercise  explores a Dirac structure generated by a Poisson bivector, one of the two canonical examples. You will investigate a structure whose rank is not constant, which provides a rich example of how a Dirac structure partitions a manifold into a \"presymplectic foliation\" of lower-dimensional leaves.",
            "id": "3749459",
            "problem": "Consider a smooth manifold $M=\\mathbb{R}^{2}$ with global coordinates $(x,y)$ and a bivector field (Poisson tensor) $\\pi=x\\,\\partial_{x}\\wedge\\partial_{y}$. The associated Poisson anchor $\\pi^{\\sharp}:T^{*}M\\to TM$ is defined by $\\pi^{\\sharp}(\\alpha)=\\iota_{\\alpha}\\pi$, where $\\iota$ denotes interior contraction. The anchor is surjective on the open set $M\\setminus\\Sigma$, where $\\Sigma=\\{(x,y)\\in\\mathbb{R}^{2}\\mid x=0\\}$, and it drops rank along the hypersurface $\\Sigma$. Define a Dirac structure $L\\subset TM\\oplus T^{*}M$ by the graph $L=\\operatorname{graph}(\\pi^{\\sharp})=\\{\\,\\pi^{\\sharp}(\\alpha)\\oplus\\alpha\\mid \\alpha\\in T^{*}M\\,\\}$. Using only fundamental definitions of Poisson structures, anchors, and Dirac structures, and without appealing to pre-quoted formulae, carry out the following:\n\n1. Determine the presymplectic foliation induced by $L$, namely the distribution $F=\\operatorname{pr}_{TM}(L)$ and its integral leaves (the presymplectic leaves), and classify the leaves on $M\\setminus\\Sigma$ and on $\\Sigma$.\n2. On the regular leaves (where the anchor is surjective), compute the leafwise presymplectic two-form $\\omega_{L}$ induced by $L$ in local coordinates.\n3. Let $D=\\{(x,y)\\in\\mathbb{R}^{2}\\mid a\\leq x\\leq b,\\ c\\leq y\\leq d\\}$ be a rectangle contained entirely in a single regular leaf with $0<a<b$ and $c<d$. Using your result for $\\omega_{L}$, compute the integral $I=\\iint_{D}\\omega_{L}$ and express your final answer as a closed-form analytic expression in terms of $a$, $b$, $c$, and $d$.\n\nNo rounding is required. The final answer must be a single analytic expression without units.",
            "solution": "The problem is first validated to ensure it is well-posed, scientifically grounded, and self-contained.\n\n### Step 1: Extract Givens\n- Manifold: $M = \\mathbb{R}^{2}$ with global coordinates $(x,y)$.\n- Bivector field (Poisson tensor): $\\pi=x\\,\\partial_{x}\\wedge\\partial_{y}$.\n- Poisson anchor: $\\pi^{\\sharp}:T^{*}M\\to TM$ defined by $\\pi^{\\sharp}(\\alpha)=\\iota_{\\alpha}\\pi$.\n- Singular set: $\\Sigma=\\{(x,y)\\in\\mathbb{R}^{2}\\mid x=0\\}$, the set where the anchor $\\pi^{\\sharp}$ is not surjective.\n- Dirac structure: $L = \\operatorname{graph}(\\pi^{\\sharp}) = \\{\\,\\pi^{\\sharp}(\\alpha)\\oplus\\alpha\\mid \\alpha\\in T^{*}M\\,\\}$.\n- Task 1: Determine the presymplectic foliation, i.e., the distribution $F=\\operatorname{pr}_{TM}(L)$ and its integral leaves on $M\\setminus\\Sigma$ and on $\\Sigma$.\n- Task 2: Compute the leafwise presymplectic two-form $\\omega_{L}$ on the regular leaves.\n- Task 3: Compute the integral $I=\\iint_{D}\\omega_{L}$ over the rectangle $D=\\{(x,y)\\in\\mathbb{R}^{2}\\mid a\\leq x\\leq b,\\ c\\leq y\\leq d\\}$ where $0<a<b$ and $c<d$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is well-defined within the mathematical framework of differential geometry, specifically Poisson geometry and the theory of Dirac structures. The provided definitions are standard. The bivector $\\pi = x\\,\\partial_{x}\\wedge\\partial_{y}$ is a valid Poisson tensor on $\\mathbb{R}^2$ because its Schouten-Nijenhuis bracket with itself, $[\\pi, \\pi]$, is zero. This is trivially satisfied as the coefficients of $\\pi$ depend only on $x$ and the basis vector fields $\\partial_x, \\partial_y$ have a vanishing Lie bracket. The questions are precise and require direct application and derivation from the given definitions, constituting a standard problem in this field. The problem is self-contained and free of contradictions or ambiguities.\n\n### Step 3: Verdict and Action\nThe problem is deemed **valid**. We proceed to the solution.\n\n### Part 1: Presymplectic Foliation\nThe presymplectic foliation is determined by the distribution $F=\\operatorname{pr}_{TM}(L)$. By definition of $L$ as the graph of $\\pi^{\\sharp}$, this distribution is the image of the anchor map: $F = \\operatorname{Im}(\\pi^{\\sharp})$. We first compute the action of $\\pi^{\\sharp}$ on an arbitrary $1$-form $\\alpha \\in T^{*}M$. In local coordinates $(x,y)$, a $1$-form is written as $\\alpha = f(x,y)\\,dx + g(x,y)\\,dy$ for some smooth functions $f$ and $g$.\n\nThe anchor map is $\\pi^{\\sharp}(\\alpha) = \\iota_{\\alpha}\\pi$. Using the linearity of the interior product $\\iota$:\n$$\n\\pi^{\\sharp}(\\alpha) = \\iota_{f\\,dx + g\\,dy}(x\\,\\partial_{x}\\wedge\\partial_{y}) = f\\,\\iota_{dx}(x\\,\\partial_{x}\\wedge\\partial_{y}) + g\\,\\iota_{dy}(x\\,\\partial_{x}\\wedge\\partial_{y})\n$$\nWe compute each term:\n$$\n\\iota_{dx}(x\\,\\partial_{x}\\wedge\\partial_{y}) = x\\,\\left( (\\iota_{dx}\\partial_{x})\\partial_{y} - (\\iota_{dx}\\partial_{y})\\partial_{x} \\right) = x\\,\\left( (1)\\partial_{y} - (0)\\partial_{x} \\right) = x\\,\\partial_{y}\n$$\n$$\n\\iota_{dy}(x\\,\\partial_{x}\\wedge\\partial_{y}) = x\\,\\left( (\\iota_{dy}\\partial_{x})\\partial_{y} - (\\iota_{dy}\\partial_{y})\\partial_{x} \\right) = x\\,\\left( (0)\\partial_{y} - (1)\\partial_{x} \\right) = -x\\,\\partial_{x}\n$$\nSubstituting these back, we get the expression for the anchor map:\n$$\n\\pi^{\\sharp}(f\\,dx + g\\,dy) = f(x\\,\\partial_{y}) + g(-x\\,\\partial_{x}) = -g\\,x\\,\\partial_{x} + f\\,x\\,\\partial_{y}\n$$\nThe distribution $F$ is the image of $\\pi^{\\sharp}$. At any point $p=(x,y) \\in M$, the fiber $F_p$ is the subspace of $T_pM$ spanned by the vectors obtained by applying $\\pi^{\\sharp}$ to the basis covectors $dx$ and $dy$.\n\\begin{itemize}\n    \\item For $\\alpha = dx$ (i.e., $f=1, g=0$), $\\pi^{\\sharp}(dx) = x\\,\\partial_{y}$.\n    \\item For $\\alpha = dy$ (i.e., $f=0, g=1$), $\\pi^{\\sharp}(dy) = -x\\,\\partial_{x}$.\n\\end{itemize}\nThus, the distribution is $F = \\operatorname{span}\\{x\\,\\partial_{y}, -x\\,\\partial_{x}\\}$.\n\nWe now classify the integral leaves by examining the dimension of $F_p$ at different points $p \\in M$.\n- **On $M \\setminus \\Sigma$ (where $x \\neq 0$):**\nThe vectors $x\\,\\partial_{y}$ and $-x\\,\\partial_{x}$ are linearly independent. Since $T_pM$ is $2$-dimensional, they form a basis for $T_pM$. Therefore, $F_p = T_pM$ for all $p \\in M \\setminus \\Sigma$. The distribution $F$ has rank $2$ on this open set. The integral leaves are the connected components of this set. The set $M \\setminus \\Sigma$ is the union of two disjoint open half-planes: $H_{+} = \\{(x,y) \\in \\mathbb{R}^{2} \\mid x>0\\}$ and $H_{-} = \\{(x,y) \\in \\mathbb{R}^{2} \\mid x<0\\}$. These are the two regular presymplectic leaves.\n\n- **On $\\Sigma$ (where $x=0$):**\nAt any point $p=(0,y) \\in \\Sigma$, we have $x=0$. The generating vectors become $0\\,\\partial_{y} = 0$ and $-0\\,\\partial_{x} = 0$. Thus, $F_p = \\{0\\}$, which is the zero-dimensional vector space. The integral leaves of a zero-dimensional distribution are the points themselves. So, for each $p \\in \\Sigma$, the leaf is the singleton set $\\{p\\}$. These are the singular leaves of the foliation.\n\n### Part 2: Leafwise Presymplectic Two-Form\nWe need to find the presymplectic two-form $\\omega_{L}$ on a regular leaf, for instance $H_{+}$, where $x>0$.\nFor a Dirac structure $L$ that is the graph of a Poisson tensor $\\pi$, the leafwise presymplectic form $\\omega_L$ on a regular leaf $S$ is the inverse of the Poisson tensor restricted to that leaf, $\\pi|_S$. The relationship is defined by $\\pi(\\alpha, \\beta) = \\omega_L(\\pi^\\sharp(\\alpha), \\pi^\\sharp(\\beta))$ for all 1-forms $\\alpha, \\beta$. Let $\\omega_L = f(x,y) \\,dx \\wedge dy$. We want to find the function $f(x,y)$.\nLet's choose $\\alpha=dx$ and $\\beta=dy$.\nThe left side is $\\pi(dx, dy) = (x\\,\\partial_{x}\\wedge\\partial_{y})(dx, dy) = x$.\nThe right side is $\\omega_L(\\pi^\\sharp(dx), \\pi^\\sharp(dy))$. We already computed $\\pi^\\sharp(dx) = x\\partial_y$ and $\\pi^\\sharp(dy) = -x\\partial_x$.\nSo, $\\omega_L(x\\partial_y, -x\\partial_x) = (f \\,dx \\wedge dy)(x\\partial_y, -x\\partial_x) = f \\cdot (x)(-x) \\cdot (dx \\wedge dy)(\\partial_y, \\partial_x)$.\nSince $(dx \\wedge dy)(\\partial_y, \\partial_x) = -1$, this becomes $f \\cdot (-x^2) \\cdot (-1) = f x^2$.\nEquating the left and right sides: $x = f x^2$. Since we are on a regular leaf, $x \\neq 0$, so we can divide by $x^2$ to get $f = 1/x$.\nThus, the leafwise presymplectic form is $\\omega_{L} = \\frac{1}{x} dx \\wedge dy$.\n\n### Part 3: Compute the Integral\nWe are asked to compute $I = \\iint_D \\omega_L$ where $D = [a, b] \\times [c, d]$ with $0 < a < b$. The domain $D$ lies entirely in the regular leaf $H_+$.\nThe integral is:\n$$\nI = \\iint_{D} \\frac{1}{x} \\, dx \\wedge dy\n$$\nThis corresponds to the standard Riemann double integral over the rectangle $D$:\n$$\nI = \\int_{c}^{d} \\left( \\int_{a}^{b} \\frac{1}{x} \\, dx \\right) dy\n$$\nFirst, we compute the inner integral with respect to $x$:\n$$\n\\int_{a}^{b} \\frac{1}{x} \\, dx = \\left[ \\ln|x| \\right]_{a}^{b}\n$$\nSince the domain of integration is in $H_+$, we have $x > 0$, so $|x|=x$.\n$$\n\\left[ \\ln(x) \\right]_{a}^{b} = \\ln(b) - \\ln(a) = \\ln\\left(\\frac{b}{a}\\right)\n$$\nNow, we compute the outer integral with respect to $y$:\n$$\nI = \\int_{c}^{d} \\ln\\left(\\frac{b}{a}\\right) \\, dy\n$$\nThe integrand $\\ln(b/a)$ is a constant with respect to $y$.\n$$\nI = \\ln\\left(\\frac{b}{a}\\right) \\int_{c}^{d} 1 \\, dy = \\ln\\left(\\frac{b}{a}\\right) \\left[ y \\right]_{c}^{d} = \\ln\\left(\\frac{b}{a}\\right) (d-c)\n$$\nThus, the value of the integral is $(d-c)\\ln(b/a)$.",
            "answer": "$$\\boxed{(d-c)\\ln\\left(\\frac{b}{a}\\right)}$$"
        },
        {
            "introduction": "This final practice reveals a primary motivation for the theory: its power to elegantly describe constrained mechanical systems. Here, we construct a Dirac structure from a kinematic constraint distribution $D$ and its annihilator $D^{\\circ}$, an object that unifies the allowed velocities and allowed forces under the Lagrange-d’Alembert principle. By applying this formalism to a concrete example , you will see how the abstract geometry of Dirac structures directly yields the physical equations of motion.",
            "id": "3749428",
            "problem": "Consider a smooth configuration manifold $Q$ of dimension $n$, a smooth distribution $D \\subset TQ$, and a Lagrangian $L(q,\\dot{q})$ where $q \\in Q$ and $\\dot{q} \\in T_q Q$. Using the canonical symmetric pairing on $TQ \\oplus T^{*}Q$ given by $\\langle (v_q,\\alpha_q),(w_q,\\beta_q)\\rangle := \\alpha_q(w_q) + \\beta_q(v_q)$, construct the Dirac structure $D \\oplus D^{\\circ} \\subset TQ \\oplus T^{*}Q$, where $D^{\\circ} \\subset T^{*}Q$ denotes the annihilator of $D$. Then, starting from the Lagrange-d’Alembert principle and the definition of the fiber derivative of the Lagrangian, derive the implicit Euler–Lagrange equations for $(q(t),\\dot{q}(t))$ consistent with the constraint distribution $D$ via the Dirac structure $D \\oplus D^{\\circ}$.\n\nApply your construction to the following concrete system. Let $Q=\\mathbb{R}^{2}$ with coordinates $(x,y)$, and let the constraint distribution $D$ be defined by the constant one-form $\\psi := \\mathrm{d}y - a\\,\\mathrm{d}x$ for a fixed nonzero constant $a$. That is, $D(q)$ consists of all velocities $v_q = (\\dot{x},\\dot{y})$ satisfying $\\psi(v_q) = \\dot{y} - a\\,\\dot{x} = 0$. Consider the Lagrangian\n$$\nL(x,y,\\dot{x},\\dot{y}) = \\frac{1}{2}m\\left(\\dot{x}^{2} + \\dot{y}^{2}\\right) - V(x,y),\n$$\nwhere $m>0$ is a constant and $V \\colon \\mathbb{R}^{2} \\to \\mathbb{R}$ is a smooth potential. Use your implicit Euler–Lagrange equations associated to $D \\oplus D^{\\circ}$ to determine the unique scalar multiplier $\\lambda(x,y)$ such that the constraint force one-form is $\\lambda\\,\\psi$ along any constrained trajectory. Express your final answer as a single closed-form analytic expression for $\\lambda$ in terms of $a$ and the partial derivatives of $V$ with respect to $x$ and $y$. No numerical approximation or rounding is required, and no units are to be included in the final expression.",
            "solution": "We begin with the geometric setup. The vector bundle $TQ \\oplus T^{*}Q$ carries the canonical symmetric bilinear pairing\n$$\n\\langle (v_q,\\alpha_q),(w_q,\\beta_q)\\rangle := \\alpha_q(w_q) + \\beta_q(v_q),\n$$\nfor $(v_q,\\alpha_q),(w_q,\\beta_q) \\in T_q Q \\oplus T_q^{*} Q$. Given a distribution $D \\subset TQ$, its annihilator $D^{\\circ} \\subset T^{*}Q$ is defined fiberwise by\n$$\nD^{\\circ}(q) := \\{\\alpha_q \\in T_q^{*}Q \\mid \\alpha_q(v_q) = 0 \\text{ for all } v_q \\in D(q)\\}.\n$$\nThe subbundle $D \\oplus D^{\\circ} \\subset TQ \\oplus T^{*}Q$ is isotropic with respect to the canonical pairing because for any $(v_q,\\alpha_q),(w_q,\\beta_q) \\in D \\oplus D^{\\circ}$ we have $v_q,w_q \\in D(q)$ and $\\alpha_q,\\beta_q \\in D^{\\circ}(q)$, hence\n$$\n\\langle (v_q,\\alpha_q),(w_q,\\beta_q)\\rangle = \\alpha_q(w_q) + \\beta_q(v_q) = 0 + 0 = 0.\n$$\nMoreover, $\\dim(D \\oplus D^{\\circ}) = \\dim D + \\dim D^{\\circ} = r + (n-r) = n$, so $D \\oplus D^{\\circ}$ is maximally isotropic. In the context of constrained Lagrangian systems, this subbundle serves as a Dirac structure encoding kinematic admissibility ($v_q \\in D(q)$) and virtual-work annihilation ($\\alpha_q \\in D^{\\circ}(q)$).\n\nNext, we derive the implicit Euler–Lagrange equations consistent with the constraint distribution. The fundamental basis is the Lagrange-d’Alembert principle: for motions $q(t)$ with $\\dot{q}(t) \\in D(q(t))$, variations $\\delta q(t)$ satisfy $\\delta q(t) \\in D(q(t))$, and the virtual work of the constraint reaction vanishes against all admissible variations. In local coordinates, the unconstrained Euler–Lagrange equation reads\n$$\n\\frac{\\mathrm{d}}{\\mathrm{d}t}\\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right) - \\frac{\\partial L}{\\partial q} = 0.\n$$\nUnder admissibility $\\dot{q} \\in D$, the d’Alembert principle enforces that any deviation from this equation must be a covector lying in $D^{\\circ}$. Therefore, the constrained implicit equations are\n$$\n\\dot{q} \\in D,\\qquad p := \\frac{\\partial L}{\\partial \\dot{q}},\\qquad \\dot{p} - \\frac{\\partial L}{\\partial q} \\in D^{\\circ}.\n$$\nEquivalently, introducing a covector (constraint force) $\\alpha \\in D^{\\circ}$, one writes\n$$\n\\dot{p} - \\frac{\\partial L}{\\partial q} = \\alpha,\\qquad \\dot{q} \\in D,\\qquad \\alpha \\in D^{\\circ}.\n$$\nThese relations are consistent with the Dirac structure $D \\oplus D^{\\circ}$: the dynamics respects $\\dot{q} \\in D$ and the force covector lies in $D^{\\circ}$.\n\nWe now apply this to the concrete system $Q=\\mathbb{R}^{2}$ with coordinates $(x,y)$, constraint distribution $D$ defined by the one-form $\\psi := \\mathrm{d}y - a\\,\\mathrm{d}x$, and Lagrangian\n$$\nL(x,y,\\dot{x},\\dot{y}) = \\frac{1}{2}m\\left(\\dot{x}^{2} + \\dot{y}^{2}\\right) - V(x,y).\n$$\nAdmissible velocities satisfy the linear constraint\n$$\n\\psi(\\dot{q}) = \\dot{y} - a\\,\\dot{x} = 0,\\quad \\text{so } \\dot{y} = a\\,\\dot{x}.\n$$\nThe fiber derivative gives the momentum\n$$\np_x = \\frac{\\partial L}{\\partial \\dot{x}} = m\\,\\dot{x},\\qquad p_y = \\frac{\\partial L}{\\partial \\dot{y}} = m\\,\\dot{y}.\n$$\nThe implicit constrained Euler–Lagrange equations read\n$$\n\\dot{p} - \\frac{\\partial L}{\\partial q} \\in D^{\\circ}.\n$$\nSince $\\frac{\\partial L}{\\partial q} = \\left(\\frac{\\partial L}{\\partial x},\\frac{\\partial L}{\\partial y}\\right) = \\left(-\\frac{\\partial V}{\\partial x}, -\\frac{\\partial V}{\\partial y}\\right)$, we obtain\n$$\n\\begin{aligned}\n\\dot{p}_x + \\frac{\\partial V}{\\partial x} & = \\alpha_x,\\\\\n\\dot{p}_y + \\frac{\\partial V}{\\partial y} & = \\alpha_y,\n\\end{aligned}\n$$\nwith $\\alpha \\in D^{\\circ}$. Because $D^{\\circ}$ is spanned by $\\psi$, any constraint force covector is of the form $\\alpha = \\lambda\\,\\psi$ for a scalar multiplier $\\lambda$. In components, $\\psi = \\mathrm{d}y - a\\,\\mathrm{d}x$ corresponds to $(\\alpha_x,\\alpha_y)=(-a\\,\\lambda,\\lambda)$. Therefore,\n$$\nm\\,\\ddot{x} + \\frac{\\partial V}{\\partial x} = -a\\,\\lambda,\\qquad m\\,\\ddot{y} + \\frac{\\partial V}{\\partial y} = \\lambda.\n$$\nThe admissibility condition $\\dot{y} = a\\,\\dot{x}$ implies $\\ddot{y} = a\\,\\ddot{x}$ (since $a$ is constant). We can eliminate the second derivatives by substituting them into the equations of motion and combining them. From the equations of motion, we have $m\\ddot{y} = \\lambda - \\frac{\\partial V}{\\partial y}$ and $m\\ddot{x} = -a\\lambda - \\frac{\\partial V}{\\partial x}$. Substituting these into the differentiated constraint $m\\ddot{y} - a(m\\ddot{x}) = 0$ gives:\n$$\n\\left(\\lambda - \\frac{\\partial V}{\\partial y}\\right) - a\\left(-a\\lambda - \\frac{\\partial V}{\\partial x}\\right) = 0\n$$\n$$\n\\lambda - \\frac{\\partial V}{\\partial y} + a^2\\lambda + a\\frac{\\partial V}{\\partial x} = 0\n$$\n$$\n\\lambda(1+a^2) = \\frac{\\partial V}{\\partial y} - a\\frac{\\partial V}{\\partial x}\n$$\nSolving for $\\lambda$ gives the unique closed-form expression\n$$\n\\lambda(x,y) = \\frac{\\frac{\\partial V}{\\partial y} - a\\,\\frac{\\partial V}{\\partial x}}{1 + a^{2}}.\n$$\nThis multiplier determines the constraint force one-form $\\alpha = \\lambda\\,\\psi$ in the annihilator $D^{\\circ}$ for any constrained trajectory, and it is expressed purely in terms of the geometry of the constraint and the potential $V$.",
            "answer": "$$\\boxed{\\frac{\\frac{\\partial V}{\\partial y} - a\\,\\frac{\\partial V}{\\partial x}}{1 + a^{2}}}$$"
        }
    ]
}
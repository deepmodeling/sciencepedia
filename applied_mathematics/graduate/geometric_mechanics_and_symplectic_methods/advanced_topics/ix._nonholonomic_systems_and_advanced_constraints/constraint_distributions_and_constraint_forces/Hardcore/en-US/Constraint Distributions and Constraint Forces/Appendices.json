{
    "hands_on_practices": [
        {
            "introduction": "The cornerstone of analyzing a nonholonomic system is the ability to derive its equations of motion. This practice provides a direct application of the Lagrange-d'Alembert principle, which posits that constraint forces perform no virtual work. By working through this problem (), you will translate the geometric concept of a constraint distribution $\\mathcal{D}(q)$ into a concrete projection operator and use it to determine the explicit dynamics of a particle subject to a non-integrable velocity constraint.",
            "id": "3734953",
            "problem": "Consider a mechanical system whose configuration space is $Q=\\mathbb{R}^{2}$ with coordinates $(x,y)$, endowed with the Euclidean kinetic-energy metric defined by the identity mass matrix $M=I$ and with zero potential energy $V=0$. The system is subject to a single nonholonomic velocity constraint given by the Pfaffian one-form $\\omega(q)\\cdot \\dot{q}=0$ where $\\omega(q)=\\mathrm{d}y-x\\,\\mathrm{d}x$, equivalently,\n$$\n\\dot{y}-x\\,\\dot{x}=0.\n$$\nLet $\\mathcal{D}(q)=\\ker \\omega(q)\\subset T_{q}Q$ denote the constraint distribution. An external force $F(q,\\dot{q},t)\\in T_{q}^{*}Q\\simeq \\mathbb{R}^{2}$ acts on the system. Starting from first principles of the Lagrange-d'Alembert variational principle for nonholonomic systems and Newton's second law in generalized coordinates, derive the orthogonal projection $P_{\\mathcal{D}}(q)$ onto $\\mathcal{D}(q)$ with respect to the kinetic-energy inner product, and obtain the explicit constrained equations of motion for the acceleration $(\\ddot{x},\\ddot{y})$ under the external force $F=(F_{x},F_{y})$.\n\nYour final answer must be a single analytical expression consisting of a row vector with six entries in the following order:\n$$\n\\big(P_{11}(q),\\,P_{12}(q),\\,P_{21}(q),\\,P_{22}(q),\\,\\ddot{x},\\,\\ddot{y}\\big),\n$$\nwhere $P_{ij}(q)$ are the components of the matrix $P_{\\mathcal{D}}(q)$. No numerical approximation is required.",
            "solution": "The user wants me to solve this problem.\nI will first perform the validation of the problem statement.\n\n### Step 1: Extract Givens\n- Configuration space: $Q=\\mathbb{R}^{2}$ with coordinates $(x,y)$.\n- Kinetic-energy metric: Defined by the identity mass matrix $M=I$.\n- Potential energy: $V=0$.\n- Nonholonomic velocity constraint: $\\omega(q)\\cdot \\dot{q}=0$ where $\\omega(q)=\\mathrm{d}y-x\\,\\mathrm{d}x$.\n- Equivalent constraint equation: $\\dot{y}-x\\,\\dot{x}=0$.\n- Constraint distribution: $\\mathcal{D}(q)=\\ker \\omega(q)\\subset T_{q}Q$.\n- External force: $F(q,\\dot{q},t)\\in T_{q}^{*}Q\\simeq \\mathbb{R}^{2}$ with components $F=(F_{x},F_{y})$.\n- Task: Derive the orthogonal projection $P_{\\mathcal{D}}(q)$ and the constrained equations of motion for $(\\ddot{x},\\ddot{y})$.\n- Required output format: A row vector $(P_{11}(q),\\,P_{12}(q),\\,P_{21}(q),\\,P_{22}(q),\\,\\ddot{x},\\,\\ddot{y})$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem is well-defined within the standard framework of geometric mechanics and nonholonomic dynamics.\n- **Scientifically Grounded**: The problem uses standard concepts such as configuration space, kinetic-energy metric, Pfaffian constraints, and the Lagrange-d'Alembert principle. The given constraint is a classic example of a nonholonomic system (the \"rolling coin\" without slipping is related, but this is a simplified version often called the \"nonholonomic particle\"). The problem is mathematically and physically sound.\n- **Well-Posed**: The problem is specified with all necessary information. The configuration space, metric, constraint, and forces are clearly defined. The task is to derive specific, uniquely determinable mathematical objects (a projection matrix and equations of motion).\n- **Objective**: The language is precise, formal, and objective, using standard terminology from differential geometry and mechanics. There is no ambiguity or subjective content.\n- **Completeness and Consistency**: The problem is self-contained. The provided data are consistent and sufficient for a full derivation.\n\n### Step 3: Verdict and Action\nThe problem is **valid**. I will proceed with a full derivation.\n\n### Derivation\n\nThe system is described by the coordinates $q=(x,y) \\in \\mathbb{R}^2$. The Lagrangian is given by the kinetic energy $T$ minus the potential energy $V$. With the mass matrix $M=I$ and potential energy $V=0$, the Lagrangian is:\n$$\nL(q, \\dot{q}) = T = \\frac{1}{2} \\dot{q}^T M \\dot{q} = \\frac{1}{2}(\\dot{x}^2 + \\dot{y}^2)\n$$\nThe system is subject to the nonholonomic constraint $\\dot{y} - x\\dot{x} = 0$. This constraint can be written as $a(q) \\cdot \\dot{q} = 0$, where $a(q) = (-x, 1)$ is a row vector representing the constraint one-form $\\omega = -x\\,\\mathrm{d}x + \\mathrm{d}y$, and $\\dot{q} = (\\dot{x}, \\dot{y})^T$.\n\nThe constraint distribution $\\mathcal{D}(q)$ is the set of admissible velocities at configuration $q$:\n$$\n\\mathcal{D}(q) = \\{ v \\in T_q Q \\mid \\dot{y} - x\\dot{x} = 0 \\}\n$$\nThis is a one-dimensional subspace of the tangent space $T_q Q \\cong \\mathbb{R}^2$.\n\n**Part 1: Derivation of the Orthogonal Projection $P_{\\mathcal{D}}(q)$**\n\nThe projection is orthogonal with respect to the kinetic-energy inner product, which is given by the mass matrix $M=I$. For two vectors $u,v \\in T_q Q$, the inner product is $\\langle u,v \\rangle_M = u^T M v = u^T v$, the standard Euclidean inner product.\n\nThe orthogonal complement of the constraint distribution, $\\mathcal{D}^{\\perp}(q)$, is spanned by a vector normal to $\\mathcal{D}(q)$. The constraint equation $a(q)\\cdot\\dot{q}=0$ can be written as $\\langle n(q), \\dot{q} \\rangle_M = 0$, where $n(q) = M^{-1} a(q)^T$. Since $M=I$, the normal vector is simply $n(q) = a(q)^T = (-x, 1)^T$.\n$$\nn(q) = \\begin{pmatrix} -x \\\\ 1 \\end{pmatrix}\n$$\nThe projection operator onto the orthogonal complement $\\mathcal{D}^{\\perp}(q)$ is given by the formula:\n$$\nP_{\\mathcal{D}^{\\perp}}(q) = \\frac{n(q) n(q)^T M}{n(q)^T M n(q)}\n$$\nWith $M=I$, this simplifies to:\n$$\nP_{\\mathcal{D}^{\\perp}}(q) = \\frac{n(q) n(q)^T}{n(q)^T n(q)}\n$$\nWe calculate the components:\n$$\nn(q) n(q)^T = \\begin{pmatrix} -x \\\\ 1 \\end{pmatrix} \\begin{pmatrix} -x & 1 \\end{pmatrix} = \\begin{pmatrix} x^2 & -x \\\\ -x & 1 \\end{pmatrix}\n$$\n$$\nn(q)^T n(q) = \\begin{pmatrix} -x & 1 \\end{pmatrix} \\begin{pmatrix} -x \\\\ 1 \\end{pmatrix} = x^2 + 1\n$$\nThus, the projector onto the orthogonal complement is:\n$$\nP_{\\mathcal{D}^{\\perp}}(q) = \\frac{1}{x^2+1} \\begin{pmatrix} x^2 & -x \\\\ -x & 1 \\end{pmatrix}\n$$\nThe projection operator onto the constraint distribution $\\mathcal{D}(q)$ is $P_{\\mathcal{D}}(q) = I - P_{\\mathcal{D}^{\\perp}}(q)$, where $I$ is the $2 \\times 2$ identity matrix.\n$$\nP_{\\mathcal{D}}(q) = \\begin{pmatrix} 1 & 0 \\\\ 0 & 1 \\end{pmatrix} - \\frac{1}{x^2+1} \\begin{pmatrix} x^2 & -x \\\\ -x & 1 \\end{pmatrix} = \\frac{1}{x^2+1} \\left[ \\begin{pmatrix} x^2+1 & 0 \\\\ 0 & x^2+1 \\end{pmatrix} - \\begin{pmatrix} x^2 & -x \\\\ -x & 1 \\end{pmatrix} \\right]\n$$\n$$\nP_{\\mathcal{D}}(q) = \\frac{1}{x^2+1} \\begin{pmatrix} 1 & x \\\\ x & x^2 \\end{pmatrix}\n$$\nThe components of this projection matrix are:\n$P_{11}(q) = \\frac{1}{x^2+1}$, $P_{12}(q) = \\frac{x}{x^2+1}$, $P_{21}(q) = \\frac{x}{x^2+1}$, $P_{22}(q) = \\frac{x^2}{x^2+1}$.\n\n**Part 2: Derivation of the Constrained Equations of Motion**\n\nAccording to the Lagrange-d'Alembert principle, the equations of motion for a nonholonomic system with external forces $F$ are given by the Euler-Lagrange equations modified by a constraint force $F_c$:\n$$\nM \\ddot{q} = F_{EL} + F + F_c\n$$\nwhere $F_{EL} = \\frac{\\partial L}{\\partial q} - \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}}$. For our Lagrangian $L = \\frac{1}{2}(\\dot{x}^2 + \\dot{y}^2)$, the Euler-Lagrange term is $(\\frac{\\partial L}{\\partial q} - \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}})^T = (0 - \\ddot{x}, 0 - \\ddot{y})^T = -M\\ddot{q}$. The equation becomes:\n$$\nM\\ddot{q} = F + F_c\n$$\nThe constraint force $F_c$ is orthogonal to the constraint distribution $\\mathcal{D}(q)$, so it must be parallel to the normal vector $n(q)$. We can write it as $F_c = \\lambda n(q)$ for some Lagrange multiplier $\\lambda$.\n$$\n\\begin{pmatrix} 1 & 0 \\\\ 0 & 1 \\end{pmatrix} \\begin{pmatrix} \\ddot{x} \\\\ \\ddot{y} \\end{pmatrix} = \\begin{pmatrix} F_x \\\\ F_y \\end{pmatrix} + \\lambda \\begin{pmatrix} -x \\\\ 1 \\end{pmatrix}\n$$\nThis gives the component equations:\n$$\n\\ddot{x} = F_x - \\lambda x\n$$\n$$\n\\ddot{y} = F_y + \\lambda\n$$\nTo determine the multiplier $\\lambda$, we enforce the condition that the acceleration must be compatible with the constraint. We differentiate the velocity constraint $\\dot{y} - x\\dot{x} = 0$ with respect to time:\n$$\n\\frac{d}{dt} (\\dot{y} - x\\dot{x}) = 0 \\implies \\ddot{y} - \\dot{x}\\dot{x} - x\\ddot{x} = 0 \\implies \\ddot{y} - x\\ddot{x} = \\dot{x}^2\n$$\nThis is the acceleration-level constraint. Substituting the expressions for $\\ddot{x}$ and $\\ddot{y}$:\n$$\n(F_y + \\lambda) - x(F_x - \\lambda x) = \\dot{x}^2\n$$\n$$\nF_y + \\lambda - xF_x + \\lambda x^2 = \\dot{x}^2\n$$\nNow, we solve for $\\lambda$:\n$$\n\\lambda(1 + x^2) = \\dot{x}^2 + xF_x - F_y\n$$\n$$\n\\lambda = \\frac{\\dot{x}^2 + xF_x - F_y}{1+x^2}\n$$\nFinally, we substitute this expression for $\\lambda$ back into the equations for $\\ddot{x}$ and $\\ddot{y}$:\nFor $\\ddot{x}$:\n$$\n\\ddot{x} = F_x - x \\left( \\frac{\\dot{x}^2 + xF_x - F_y}{1+x^2} \\right) = \\frac{F_x(1+x^2) - x(\\dot{x}^2 + xF_x - F_y)}{1+x^2}\n$$\n$$\n\\ddot{x} = \\frac{F_x + x^2F_x - x\\dot{x}^2 - x^2F_x + xF_y}{1+x^2} = \\frac{F_x - x\\dot{x}^2 + xF_y}{1+x^2}\n$$\nFor $\\ddot{y}$:\n$$\n\\ddot{y} = F_y + \\frac{\\dot{x}^2 + xF_x - F_y}{1+x^2} = \\frac{F_y(1+x^2) + \\dot{x}^2 + xF_x - F_y}{1+x^2}\n$$\n$$\n\\ddot{y} = \\frac{F_y + x^2F_y + \\dot{x}^2 + xF_x - F_y}{1+x^2} = \\frac{x^2F_y + xF_x + \\dot{x}^2}{1+x^2}\n$$\n\nThe final results are:\n$P_{11}(q) = \\frac{1}{1+x^2}$\n$P_{12}(q) = \\frac{x}{1+x^2}$\n$P_{21}(q) = \\frac{x}{1+x^2}$\n$P_{22}(q) = \\frac{x^2}{1+x^2}$\n$\\ddot{x} = \\frac{F_x + xF_y - x\\dot{x}^2}{1+x^2}$\n$\\ddot{y} = \\frac{xF_x + x^2F_y + \\dot{x}^2}{1+x^2}$\n\nThese six expressions constitute the final answer.\nIt is useful to rewrite the acceleration terms to make the structure more apparent:\n$\\ddot{y} = \\frac{x(xF_y + F_x) + \\dot{x}^2}{1+x^2} = x \\frac{F_x + xF_y}{1+x^2} + \\frac{\\dot{x}^2}{1+x^2} = x \\left(\\frac{F_x + xF_y - x\\dot{x}^2}{1+x^2}\\right) + \\frac{x^2\\dot{x}^2}{1+x^2} + \\frac{\\dot{x}^2}{1+x^2} = x\\ddot{x} + \\dot{x}^2$. This confirms consistency with the differentiated constraint. The formulation is correct.\nThe expression for $\\ddot{y}$ can also be written as:\n$\\ddot{y} = \\frac{x(F_x+xF_y) + \\dot{x}^2}{1+x^2}$.\nMy calculation was $\\frac{x^2F_y + xF_x + \\dot{x}^2}{1+x^2}$ which is the same.\nThe expression for $\\ddot{x}$ was $\\frac{F_x + xF_y - x\\dot{x}^2}{1+x^2}$.\nThe results are consistent and derived from first principles as required.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{1}{1+x^{2}} & \\frac{x}{1+x^{2}} & \\frac{x}{1+x^{2}} & \\frac{x^{2}}{1+x^{2}} & \\frac{F_{x} + x F_{y} - x \\dot{x}^{2}}{1+x^{2}} & \\frac{x F_{x} + x^{2} F_{y} + \\dot{x}^{2}}{1+x^{2}}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "While the Lagrange-d'Alembert principle is standard for modeling nonholonomic mechanical systems, it is not the only way to incorporate constraints into a variational framework. This exercise () contrasts the standard nonholonomic approach with the 'vakonomic' model, where constraints are applied to variations of the entire trajectory. By deriving the multiplier dynamics in both formalisms for the same system, you will uncover the fundamental differences in their predictions and gain a deeper appreciation for the physical and mathematical assumptions underpinning each model.",
            "id": "3734896",
            "problem": "Consider a particle of mass $m$ moving on the plane with configuration coordinates $q = (x,y)$ and Lagrangian $L(q,\\dot{q}) = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right)$. Impose the linear velocity constraint given by the one-form $a(q) = a_{i}(q) \\, dq^{i}$ with components $a_{1}(x,y) = y$ and $a_{2}(x,y) = 1$, so that the constraint reads $a_{i}(q) \\, \\dot{q}^{i} = y \\, \\dot{x} + \\dot{y} = 0$. \n\n(a) In the variational constrained (vakonomic) formulation, the action is augmented by a Lagrange multiplier $\\lambda(t)$ enforcing the velocity constraint. Starting from the standard principle of stationary action and the Euler–Lagrange equations applied to the augmented Lagrangian $L(q,\\dot{q}) + \\lambda(t) \\, a_{i}(q) \\, \\dot{q}^{i}$, derive the explicit first-order evolution equation for the multiplier $\\dot{\\lambda}(t)$ expressed purely in terms of $x$, $y$, $\\dot{x}$, $\\dot{y}$, and $\\lambda$. Your derivation must begin from the variational principle and must not assume any specialized pre-derived formula beyond the definitions of the Euler–Lagrange operator and basic tensor calculus in Cartesian coordinates.\n\n(b) In the Lagrange–d’Alembert (nonholonomic) formulation, virtual displacements are constrained by the distribution annihilated by $a(q)$, and constraint forces do no virtual work. Starting from the d’Alembert principle together with the linear velocity constraint, derive an explicit expression for the nonholonomic multiplier $\\lambda_{\\mathrm{nh}}(t)$ in terms of $x$, $y$, $\\dot{x}$, $\\dot{y}$, and $m$.\n\nProvide your final answer as a row matrix with two entries, where the first entry is the vakonomic multiplier evolution $\\dot{\\lambda}$ and the second entry is the nonholonomic multiplier $\\lambda_{\\mathrm{nh}}$. Express your answer in exact symbolic form. Do not include units in the final answer box.",
            "solution": "The problem is first validated. The givens are the particle mass $m$, configuration coordinates $q = (x,y)$, the Lagrangian $L(q,\\dot{q}) = \\frac{1}{2} m ( \\dot{x}^{2} + \\dot{y}^{2} )$, and a linear velocity constraint $y \\, \\dot{x} + \\dot{y} = 0$. The problem asks for derivations within the standard frameworks of vakonomic and nonholonomic mechanics. The problem is scientifically grounded, well-posed, objective, and contains sufficient information for a unique solution. No flaws are detected. We may proceed with the solution.\n\n(a) Derivation of the vakonomic multiplier evolution equation $\\dot{\\lambda}(t)$.\n\nIn the vakonomic (variational) formulation, the constraint is incorporated into the action principle by augmenting the Lagrangian with a Lagrange multiplier term. The augmented Lagrangian $L_{vak}$ is given by:\n$$L_{vak}(q, \\dot{q}, \\lambda) = L(q, \\dot{q}) + \\lambda(t) \\, a_{i}(q) \\, \\dot{q}^{i}$$\nSubstituting the given Lagrangian and constraint, we have:\n$$L_{vak} = \\frac{1}{2} m (\\dot{x}^{2} + \\dot{y}^{2}) + \\lambda(t) (y \\dot{x} + \\dot{y})$$\nThe equations of motion are derived from the Euler-Lagrange equations for the extended set of variables $(x, y, \\lambda)$. The Euler-Lagrange equation for a generic variable $z$ is $\\frac{d}{dt} \\frac{\\partial L_{vak}}{\\partial \\dot{z}} - \\frac{\\partial L_{vak}}{\\partial z} = 0$.\n\nFor the coordinate $x$:\nThe partial derivatives of $L_{vak}$ are:\n$$\\frac{\\partial L_{vak}}{\\partial \\dot{x}} = m \\dot{x} + \\lambda y$$\n$$\\frac{\\partial L_{vak}}{\\partial x} = 0$$\nThe Euler-Lagrange equation for $x$ is:\n$$\\frac{d}{dt}(m \\dot{x} + \\lambda y) - 0 = 0$$\n$$m \\ddot{x} + \\dot{\\lambda} y + \\lambda \\dot{y} = 0 \\quad (1)$$\n\nFor the coordinate $y$:\nThe partial derivatives of $L_{vak}$ are:\n$$\\frac{\\partial L_{vak}}{\\partial \\dot{y}} = m \\dot{y} + \\lambda$$\n$$\\frac{\\partial L_{vak}}{\\partial y} = \\lambda \\dot{x}$$\nThe Euler-Lagrange equation for $y$ is:\n$$\\frac{d}{dt}(m \\dot{y} + \\lambda) - \\lambda \\dot{x} = 0$$\n$$m \\ddot{y} + \\dot{\\lambda} - \\lambda \\dot{x} = 0 \\quad (2)$$\n\nThe \"equation of motion\" for $\\lambda$ is obtained by treating it as a coordinate. Since $L_{vak}$ does not depend on $\\dot{\\lambda}$, the Euler-Lagrange equation $\\frac{d}{dt} \\frac{\\partial L_{vak}}{\\partial \\dot{\\lambda}} - \\frac{\\partial L_{vak}}{\\partial \\lambda} = 0$ simplifies to $-\\frac{\\partial L_{vak}}{\\partial \\lambda} = 0$, which recovers the constraint equation:\n$$y \\dot{x} + \\dot{y} = 0 \\quad (3)$$\n\nTo find an expression for $\\dot{\\lambda}(t)$, we must eliminate the second-order time derivatives $\\ddot{x}$ and $\\ddot{y}$ from the system of equations. We can achieve this by differentiating the constraint equation $(3)$ with respect to time $t$:\n$$\\frac{d}{dt}(y \\dot{x} + \\dot{y}) = \\dot{y} \\dot{x} + y \\ddot{x} + \\ddot{y} = 0 \\quad (4)$$\nNow, we rearrange equations $(1)$ and $(2)$ to solve for $\\ddot{x}$ and $\\ddot{y}$:\n$$\\ddot{x} = \\frac{-\\dot{\\lambda} y - \\lambda \\dot{y}}{m}$$\n$$\\ddot{y} = \\frac{-\\dot{\\lambda} + \\lambda \\dot{x}}{m}$$\nSubstitute these expressions for $\\ddot{x}$ and $\\ddot{y}$ into the differentiated constraint equation $(4)$:\n$$\\dot{y} \\dot{x} + y \\left(\\frac{-\\dot{\\lambda} y - \\lambda \\dot{y}}{m}\\right) + \\left(\\frac{-\\dot{\\lambda} + \\lambda \\dot{x}}{m}\\right) = 0$$\nTo solve for $\\dot{\\lambda}$, we first multiply the entire equation by $m$:\n$$m \\dot{y} \\dot{x} + y(-\\dot{\\lambda} y - \\lambda \\dot{y}) + (-\\dot{\\lambda} + \\lambda \\dot{x}) = 0$$\n$$m \\dot{x} \\dot{y} - \\dot{\\lambda} y^{2} - \\lambda y \\dot{y} - \\dot{\\lambda} + \\lambda \\dot{x} = 0$$\nGroup terms containing $\\dot{\\lambda}$ on one side and all other terms on the other side:\n$$\\dot{\\lambda} y^{2} + \\dot{\\lambda} = m \\dot{x} \\dot{y} + \\lambda \\dot{x} - \\lambda y \\dot{y}$$\nFactor out $\\dot{\\lambda}$:\n$$\\dot{\\lambda} (1 + y^{2}) = m \\dot{x} \\dot{y} + \\lambda (\\dot{x} - y \\dot{y})$$\nFinally, isolate $\\dot{\\lambda}$:\n$$\\dot{\\lambda} = \\frac{m \\dot{x} \\dot{y} + \\lambda (\\dot{x} - y \\dot{y})}{1 + y^{2}}$$\n\n(b) Derivation of the nonholonomic multiplier $\\lambda_{\\mathrm{nh}}$.\n\nIn the Lagrange-d'Alembert (nonholonomic) formulation, the equations of motion are modified by a constraint force that is orthogonal to the allowed virtual displacements. The principle states that $(\\frac{d}{dt} \\frac{\\partial L}{\\partial \\dot{q}^i} - \\frac{\\partial L}{\\partial q^i}) \\delta q^i = 0$ for all virtual displacements $\\delta q^i$ that satisfy the constraint conditions.\nThe constraint is $a_i \\dot{q}^i = y \\dot{x} + \\dot{y} = 0$. The virtual displacements $(\\delta x, \\delta y)$ must satisfy $a_i \\delta q^i = y \\delta x + \\delta y = 0$.\nThis implies that the vector of generalized forces from the free Lagrangian, $(\\frac{d}{dt} \\frac{\\partial L}{\\partial \\dot{q}^i} - \\frac{\\partial L}{\\partial q^i})$, must be proportional to the constraint one-form $a_i = (y, 1)$. This proportionality is given by the nonholonomic Lagrange multiplier $\\lambda_{\\mathrm{nh}}(t)$:\n$$\\frac{d}{dt} \\frac{\\partial L}{\\partial \\dot{q}^i} - \\frac{\\partial L}{\\partial q^i} = \\lambda_{\\mathrm{nh}} a_i$$\nWe use the unconstrained Lagrangian $L = \\frac{1}{2} m (\\dot{x}^{2} + \\dot{y}^{2})$.\n\nFor the coordinate $x$ ($q^1=x$):\n$$\\frac{\\partial L}{\\partial \\dot{x}} = m \\dot{x}, \\quad \\frac{\\partial L}{\\partial x} = 0$$\n$$\\frac{d}{dt} \\frac{\\partial L}{\\partial \\dot{x}} - \\frac{\\partial L}{\\partial x} = m \\ddot{x}$$\nThe equation of motion is $m \\ddot{x} = \\lambda_{\\mathrm{nh}} a_1 = \\lambda_{\\mathrm{nh}} y$.\n\nFor the coordinate $y$ ($q^2=y$):\n$$\\frac{\\partial L}{\\partial \\dot{y}} = m \\dot{y}, \\quad \\frac{\\partial L}{\\partial y} = 0$$\n$$\\frac{d}{dt} \\frac{\\partial L}{\\partial \\dot{y}} - \\frac{\\partial L}{\\partial y} = m \\ddot{y}$$\nThe equation of motion is $m \\ddot{y} = \\lambda_{\\mathrm{nh}} a_2 = \\lambda_{\\mathrm{nh}}$.\n\nWe have the following system of equations:\n$$m \\ddot{x} = \\lambda_{\\mathrm{nh}} y \\quad (5)$$\n$$m \\ddot{y} = \\lambda_{\\mathrm{nh}} \\quad (6)$$\n$$y \\dot{x} + \\dot{y} = 0 \\quad (7)$$\nTo solve for $\\lambda_{\\mathrm{nh}}$, we again differentiate the constraint equation $(7)$ with respect to time:\n$$\\dot{y} \\dot{x} + y \\ddot{x} + \\ddot{y} = 0 \\quad (8)$$\nFrom equations $(5)$ and $(6)$, we express the accelerations in terms of $\\lambda_{\\mathrm{nh}}$:\n$$\\ddot{x} = \\frac{\\lambda_{\\mathrm{nh}} y}{m}$$\n$$\\ddot{y} = \\frac{\\lambda_{\\mathrm{nh}}}{m}$$\nSubstitute these into the differentiated constraint equation $(8)$:\n$$\\dot{y} \\dot{x} + y \\left(\\frac{\\lambda_{\\mathrm{nh}} y}{m}\\right) + \\frac{\\lambda_{\\mathrm{nh}}}{m} = 0$$\nMultiply by $m$:\n$$m \\dot{y} \\dot{x} + \\lambda_{\\mathrm{nh}} y^{2} + \\lambda_{\\mathrm{nh}} = 0$$\nFactor out $\\lambda_{\\mathrm{nh}}$:\n$$\\lambda_{\\mathrm{nh}} (1 + y^{2}) = -m \\dot{x} \\dot{y}$$\nFinally, we obtain the expression for the nonholonomic multiplier:\n$$\\lambda_{\\mathrm{nh}} = - \\frac{m \\dot{x} \\dot{y}}{1 + y^{2}}$$\n\nThe final answers for part (a) and part (b) are collected into a row matrix.",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n\\frac{m \\dot{x} \\dot{y} + \\lambda(\\dot{x} - y\\dot{y})}{1+y^2} & - \\frac{m \\dot{x} \\dot{y}}{1+y^2}\n\\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "Beyond the Lagrangian formulation, nonholonomic systems possess a rich Hamiltonian structure that differs significantly from unconstrained systems. The set of observables, equipped with the nonholonomic bracket, does not form a Lie algebra because the Jacobi identity fails to hold. This advanced exercise () delves into this topic by having you compute the 'Jacobiator' for the canonical rolling disk system, demonstrating explicitly how this failure manifests and relates to the curvature of the nonholonomic connection.",
            "id": "3734894",
            "problem": "Consider the standard rolling disk mechanical system with configuration space $Q = \\mathbb{R}^{2} \\times S^{1} \\times S^{1}$ equipped with global coordinates $(x,y,\\theta,\\phi)$, where $(x,y)$ is the position of the disk’s contact point, $\\theta$ is the heading angle of the disk in the plane, and $\\phi$ is the spin angle about the disk’s symmetry axis. The Lagrangian is purely kinetic,\n$$\nL = \\frac{1}{2}\\Big(M(\\dot{x}^{2} + \\dot{y}^{2}) + J \\dot{\\theta}^{2} + I \\dot{\\phi}^{2}\\Big),\n$$\nwhere $M>0$ is the mass parameter, $J>0$ and $I>0$ are moments of inertia, and $R>0$ is the disk radius. The nonholonomic constraints encode rolling without lateral slip and the longitudinal rolling relation; in Pfaffian form, they are given by\n$$\n\\omega^{1} := \\sin\\theta\\, dx - \\cos\\theta\\, dy = 0, \\qquad \\omega^{2} := d\\phi - \\frac{1}{R}\\big(\\cos\\theta\\, dx + \\sin\\theta\\, dy\\big) = 0,\n$$\nso the admissible velocities lie in the rank-$2$ constraint distribution $\\mathcal{D} = \\ker\\omega^{1} \\cap \\ker\\omega^{2} \\subset TQ$. One convenient $q$-dependent basis for $\\mathcal{D}$ is\n$$\nX_{1} := \\cos\\theta\\, \\frac{\\partial}{\\partial x} + \\sin\\theta\\, \\frac{\\partial}{\\partial y} + \\frac{1}{R}\\, \\frac{\\partial}{\\partial \\phi}, \\qquad X_{2} := \\frac{\\partial}{\\partial \\theta}.\n$$\nLet $\\mathbb{F}L : TQ \\to T^{*}Q$ denote the fiber derivative (Legendre transform) of $L$, and let $\\mathcal{M} \\subset T^{*}Q$ be the image of $\\mathcal{D}$ under $\\mathbb{F}L$, i.e., the constrained momentum submanifold. Using the kinetic energy metric associated with $L$, define the constrained momenta $m_{1}, m_{2}$ as the components of the momentum along $X_{1}, X_{2}$, so that local coordinates on $\\mathcal{M}$ are $(x,y,\\theta,\\phi,m_{1},m_{2})$.\n\nStarting from the canonical symplectic form on $T^{*}Q$, the constraint distribution, and the orthogonal projector onto $\\mathcal{D}$ induced by the kinetic energy metric, derive the associated nonholonomic bracket on smooth functions $f,g \\in C^{\\infty}(\\mathcal{M})$, expressed in the above coordinates for this rolling disk system. Then, using this nonholonomic bracket, compute the Jacobiator\n$$\nJ(f,g,h) := \\{f,\\{g,h\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}} + \\{g,\\{h,f\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}} + \\{h,\\{f,g\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}},\n$$\nfor the specific triple of functions $f=m_{1}$, $g=m_{2}$, $h=x$. Assume angles are measured in radians. Your final answer should be the closed-form analytic expression for $J(m_{1},m_{2},x)$ as a function of the state. No numerical approximation or rounding is required.",
            "solution": "The user wants to compute the Jacobiator $J(f,g,h)$ for the nonholonomic bracket $\\{\\cdot, \\cdot\\}_{\\mathrm{nh}}$ associated with a rolling disk system, for the specific choice of functions $f=m_{1}$, $g=m_{2}$, and $h=x$.\n\nThe problem is first validated.\n\n### Step 1: Extract Givens\n- **System**: Rolling disk mechanical system.\n- **Configuration space and coordinates**: $Q = \\mathbb{R}^{2} \\times S^{1} \\times S^{1}$ with coordinates $(x,y,\\theta,\\phi)$.\n- **Lagrangian**: $L = \\frac{1}{2}\\Big(M(\\dot{x}^{2} + \\dot{y}^{2}) + J \\dot{\\theta}^{2} + I \\dot{\\phi}^{2}\\Big)$, with parameters $M, J, I, R > 0$. This defines the kinetic energy metric on $TQ$.\n- **Nonholonomic constraints**: $\\omega^{1} := \\sin\\theta\\, dx - \\cos\\theta\\, dy = 0$ and $\\omega^{2} := d\\phi - \\frac{1}{R}\\big(\\cos\\theta\\, dx + \\sin\\theta\\, dy\\big) = 0$.\n- **Constraint distribution**: $\\mathcal{D} = \\ker\\omega^{1} \\cap \\ker\\omega^{2}$, a rank-$2$ distribution on $Q$.\n- **Basis for $\\mathcal{D}$**: The vector fields $X_{1} = \\cos\\theta\\, \\frac{\\partial}{\\partial x} + \\sin\\theta\\, \\frac{\\partial}{\\partial y} + \\frac{1}{R}\\, \\frac{\\partial}{\\partial \\phi}$ and $X_{2} = \\frac{\\partial}{\\partial \\theta}$.\n- **Constrained momentum submanifold**: $\\mathcal{M} = \\mathbb{F}L(\\mathcal{D}) \\subset T^{*}Q$, where $\\mathbb{F}L$ is the Legendre transform.\n- **Coordinates on $\\mathcal{M}$**: $(x,y,\\theta,\\phi,m_{1},m_{2})$, where $m_{1}$ and $m_{2}$ are the constrained momenta defined as the components of the momentum along $X_{1}$ and $X_{2}$. This definition corresponds to $m_{a} = \\langle p, X_{a} \\rangle$ for $a \\in \\{1, 2\\}$, where $p \\in \\mathcal{M}$ is a momentum one-form.\n- **Task**: Compute the Jacobiator $J(f,g,h) := \\{f,\\{g,h\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}} + \\{g,\\{h,f\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}} + \\{h,\\{f,g\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}}$ for $f=m_{1}$, $g=m_{2}$, $h=x$.\n\n### Step 2: Validate Using Extracted Givens\nThe problem describes a canonical system in nonholonomic mechanics. The provided Lagrangian, constraints, and vector field basis are standard and self-consistent. The requested task to compute the Jacobiator of the nonholonomic bracket is a well-defined problem in geometric mechanics and serves to illustrate the non-associativity of the nonholonomic algebra of observables. The problem is scientifically grounded, well-posed, objective, complete, and non-trivial.\n\n### Step 3: Verdict and Action\nThe problem is valid. A full solution will be provided.\n\n### Solution Derivation\n\nThe nonholonomic bracket, $\\{\\cdot, \\cdot\\}_{\\mathrm{nh}}$, on the constrained momentum manifold $\\mathcal{M}$ is defined by its action on functions. For functions $F, G \\in C^{\\infty}(Q)$ lifted to $\\mathcal{M}$, and for the constrained momenta $m_{a} = \\langle p, X_{a} \\rangle$, the fundamental bracket relations are:\n$1$. $\\{F, G\\}_{\\mathrm{nh}} = 0$.\n$2$. $\\{m_{a}, F\\}_{\\mathrm{nh}} = X_{a}(F) = \\mathcal{L}_{X_{a}}F$.\n$3$. $\\{m_{a}, m_{b}\\}_{\\mathrm{nh}} = \\langle p, [X_{a}, X_{b}] \\rangle$.\n\nHere, $[X_{a}, X_{b}]$ is the Lie bracket of the vector fields. We are asked to compute the Jacobiator for $f=m_{1}$, $g=m_{2}$, and $h=x$:\n$$\nJ(m_{1}, m_{2}, x) = \\{m_{1},\\{m_{2},x\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}} + \\{m_{2},\\{x,m_{1}\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}} + \\{x,\\{m_{1},m_{2}\\}_{\\mathrm{nh}}\\}_{\\mathrm{nh}}\n$$\nWe will compute the three inner brackets first.\n\n**1. Compute $\\{m_{2},x\\}_{\\mathrm{nh}}$**\nThis is a bracket between a momentum function and a configuration coordinate function. Using the second fundamental relation:\n$$\n\\{m_{2},x\\}_{\\mathrm{nh}} = X_{2}(x)\n$$\nGiven $X_{2} = \\frac{\\partial}{\\partial \\theta}$ and $x$ is a coordinate independent of $\\theta$:\n$$\n\\{m_{2},x\\}_{\\mathrm{nh}} = \\frac{\\partial}{\\partial \\theta}(x) = 0\n$$\n\n**2. Compute $\\{x, m_{1}\\}_{\\mathrm{nh}}$**\nUsing the skew-symmetry of the bracket and the second fundamental relation:\n$$\n\\{x, m_{1}\\}_{\\mathrm{nh}} = -\\{m_{1}, x\\}_{\\mathrm{nh}} = -X_{1}(x)\n$$\nGiven $X_{1} = \\cos\\theta\\, \\frac{\\partial}{\\partial x} + \\sin\\theta\\, \\frac{\\partial}{\\partial y} + \\frac{1}{R}\\, \\frac{\\partial}{\\partial \\phi}$:\n$$\n\\{x, m_{1}\\}_{\\mathrm{nh}} = - \\left(\\cos\\theta\\, \\frac{\\partial}{\\partial x} + \\sin\\theta\\, \\frac{\\partial}{\\partial y} + \\frac{1}{R}\\, \\frac{\\partial}{\\partial \\phi}\\right)(x) = -\\cos\\theta\n$$\n\n**3. Compute $\\{m_{1}, m_{2}\\}_{\\mathrm{nh}}$**\nUsing the third fundamental relation, this bracket is given by $\\{m_{1}, m_{2}\\}_{\\mathrm{nh}} = \\langle p, [X_{1}, X_{2}] \\rangle$. We first compute the Lie bracket $[X_{1}, X_{2}]$:\n$$\n[X_{1}, X_{2}] = \\left[\\cos\\theta\\, \\frac{\\partial}{\\partial x} + \\sin\\theta\\, \\frac{\\partial}{\\partial y} + \\frac{1}{R}\\, \\frac{\\partial}{\\partial \\phi}, \\frac{\\partial}{\\partial \\theta}\\right]\n$$\nThe Lie bracket $[A, B]$ acts on a test function $f$ as $(AB-BA)f$. Since the coefficients of $X_{2}$ are constant, we only need to consider the action of $X_{2}$ on the coefficients of $X_{1}$:\n$$\n[X_{1}, X_{2}] = -\\frac{\\partial}{\\partial\\theta}\\left(\\cos\\theta\\right)\\frac{\\partial}{\\partial x} - \\frac{\\partial}{\\partial\\theta}\\left(\\sin\\theta\\right)\\frac{\\partial}{\\partial y} - \\frac{\\partial}{\\partial\\theta}\\left(\\frac{1}{R}\\right)\\frac{\\partial}{\\partial \\phi}\n$$\n$$\n[X_{1}, X_{2}] = -(-\\sin\\theta)\\frac{\\partial}{\\partial x} - (\\cos\\theta)\\frac{\\partial}{\\partial y} - 0 = \\sin\\theta\\frac{\\partial}{\\partial x} - \\cos\\theta\\frac{\\partial}{\\partial y}\n$$\nNow, we evaluate $\\langle p, [X_{1}, X_{2}] \\rangle$. The momentum $p \\in \\mathcal{M}$ is the image under the Legendre transform $\\mathbb{F}L$ of a velocity vector $v \\in \\mathcal{D}$. Any such $v$ is a linear combination of the basis vectors: $v = v^{1}X_{1} + v^{2}X_{2}$. The momentum one-form is $p = \\mathbb{F}L(v)$, whose components are given by $p_{i} = \\frac{\\partial L}{\\partial \\dot{q}^{i}}$.\nA key property is that if a vector field $Y$ is orthogonal to the distribution $\\mathcal{D}$ with respect to the kinetic energy metric $G$, i.e., $\\langle Y, Z \\rangle_{G} = 0$ for all $Z \\in \\mathcal{D}$, then $\\langle p, Y \\rangle = 0$ for all $p \\in \\mathcal{M}$.\nThe kinetic energy metric tensor is $G = \\text{diag}(M, M, J, I)$. Let's check if $[X_{1}, X_{2}]$ is orthogonal to the basis vectors $X_{1}$ and $X_{2}$.\n$$\n\\langle [X_{1}, X_{2}], X_{1} \\rangle_{G} = (\\sin\\theta, -\\cos\\theta, 0, 0)\n\\begin{pmatrix} M & 0 & 0 & 0 \\\\ 0 & M & 0 & 0 \\\\ 0 & 0 & J & 0 \\\\ 0 & 0 & 0 & I \\end{pmatrix}\n\\begin{pmatrix} \\cos\\theta \\\\ \\sin\\theta \\\\ 0 \\\\ 1/R \\end{pmatrix}\n= M\\sin\\theta\\cos\\theta - M\\cos\\theta\\sin\\theta = 0\n$$\n$$\n\\langle [X_{1}, X_{2}], X_{2} \\rangle_{G} = (\\sin\\theta, -\\cos\\theta, 0, 0)\n\\begin{pmatrix} M & 0 & 0 & 0 \\\\ 0 & M & 0 & 0 \\\\ 0 & 0 & J & 0 \\\\ 0 & 0 & 0 & I \\end{pmatrix}\n\\begin{pmatrix} 0 \\\\ 0 \\\\ 1 \\\\ 0 \\end{pmatrix}\n= 0\n$$\nSince $[X_{1}, X_{2}]$ is orthogonal to the basis of $\\mathcal{D}$ with respect to the metric, it is orthogonal to the entire distribution. Consequently, for any $p \\in \\mathcal{M}$, we have:\n$$\n\\{m_{1}, m_{2}\\}_{\\mathrm{nh}} = \\langle p, [X_{1}, X_{2}] \\rangle = 0\n$$\n\n**4. Assemble the Jacobiator**\nNow we substitute these intermediate results back into the expression for the Jacobiator:\n$$\nJ(m_{1}, m_{2}, x) = \\{m_{1}, \\underbrace{\\{m_{2},x\\}_{\\mathrm{nh}}}_{0}\\}_{\\mathrm{nh}} + \\{m_{2}, \\underbrace{\\{x,m_{1}\\}_{\\mathrm{nh}}}_{-\\cos\\theta}\\}_{\\mathrm{nh}} + \\{x, \\underbrace{\\{m_{1},m_{2}\\}_{\\mathrm{nh}}}_{0}\\}_{\\mathrm{nh}}\n$$\n- The first term is $\\{m_{1}, 0\\}_{\\mathrm{nh}} = 0$.\n- The third term is $\\{x, 0\\}_{\\mathrm{nh}} = 0$.\n- The second term is $\\{m_{2}, -\\cos\\theta\\}_{\\mathrm{nh}}$.\n\nWe compute the remaining bracket. The function $-\\cos\\theta$ depends only on the configuration coordinate $\\theta$. We use the second fundamental relation $\\{m_{a}, F\\}_{\\mathrm{nh}} = X_{a}(F)$:\n$$\n\\{m_{2}, -\\cos\\theta\\}_{\\mathrm{nh}} = X_{2}(-\\cos\\theta) = \\frac{\\partial}{\\partial\\theta}(-\\cos\\theta) = -(-\\sin\\theta) = \\sin\\theta\n$$\nFinally, summing the terms for the Jacobiator:\n$$\nJ(m_{1}, m_{2}, x) = 0 + \\sin\\theta + 0 = \\sin\\theta\n$$\nThe result indicates that the Jacobi identity is not satisfied by the nonholonomic bracket for this system, which is a characteristic feature of nonholonomic dynamics. The non-zero Jacobiator is a measure of the \"curvature\" of the nonholonomic connection. Notably, the result is independent of the mass and inertia parameters of the disk, reflecting its purely geometric origin.",
            "answer": "$$\n\\boxed{\\sin\\theta}\n$$"
        }
    ]
}
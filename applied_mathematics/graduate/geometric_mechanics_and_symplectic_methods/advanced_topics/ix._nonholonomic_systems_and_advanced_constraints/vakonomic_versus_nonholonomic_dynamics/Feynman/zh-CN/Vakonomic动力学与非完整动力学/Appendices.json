{
    "hands_on_practices": [
        {
            "introduction": "守恒律在物理学中占据核心地位，而能量守恒是其中最重要的之一。本练习将从第一性原理出发，推导在非完整动力学和真空动力学中机械能的变化率。通过这个实践，你将深刻理解这两种理论框架如何处理能量守恒，特别是当拉格朗日量或约束本身显式依赖于时间时，它们的根本差异将变得清晰 。",
            "id": "3783665",
            "problem": "考虑一个力学系统，其位形坐标为 $q \\in \\mathbb{R}^{n}$，速度为 $\\dot{q} \\in \\mathbb{R}^{n}$，有一个光滑的拉格朗日量 $L(q,\\dot{q},t)$，以及 $m$ 个由 $A(q,t)\\,\\dot{q} = 0$ 给出的满秩 $m$ 的光滑线性速度约束，其中 $A(q,t) \\in \\mathbb{R}^{m \\times n}$。设机械能定义为 $E(q,\\dot{q},t) = \\dot{q}^{T}\\,\\frac{\\partial L}{\\partial \\dot{q}}(q,\\dot{q},t) - L(q,\\dot{q},t)$。\n\n考虑两种动力学模型：\n\n1. Vakonomic 动力学：运动通过哈密顿原理 (HP) 使作用量 $\\int \\left(L(q,\\dot{q},t) + \\lambda(t)^{T} A(q,t)\\,\\dot{q}\\right)\\,dt$ 取极值，其中 $\\lambda(t) \\in \\mathbb{R}^{m}$ 是拉格朗日乘子。\n\n2. 非完整动力学：运动满足带有 Chetaev 反应力的拉格朗日-达朗贝尔原理，得到方程 $\\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\frac{\\partial L}{\\partial q} = A(q,t)^{T}\\,\\lambda(t)$ 和约束 $A(q,t)\\,\\dot{q} = 0$。\n\n仅从哈密顿原理和欧拉-拉格朗日方程的核心定义、上述机械能的定义，以及当 $A(q,t)\\,\\dot{q} = 0$ 时 Chetaev 反应力沿容许速度不做功的假设出发，进行以下推导：\n\n- 推导沿 vakonomic 轨迹的能量变化率 $\\frac{dE}{dt}$，并说明在 vakonomic 设定下 $E$ 守恒的条件。\n- 推导沿非完整轨迹的能量变化率 $\\frac{dE}{dt}$，并说明在非完整设定下 $E$ 守恒的条件。\n- 明确地展示拉格朗日量 $L(q,\\dot{q},t)$ 和约束矩阵 $A(q,t)$ 中的时间依赖性如何进入每种设定下的能量变化率。\n\n你的最终答案必须是一个单一的闭式解析表达式，以一个二元行矩阵的形式给出 vakonomic 和非完整情况下的能量变化率，vakonomic 变化率在前，非完整变化率在后。不需要进行数值计算。最终答案仅使用符号量 $q$、$\\dot{q}$、$t$、$L$、$A$ 和 $\\lambda$ 及其必要的导数来表示。最终答案中不要包含任何单位。",
            "solution": "该问题要求在两种不同的动力学框架下，推导一个受线性速度约束的系统的机械能变化率：vakonomic 和非完整。我们将首先建立一个能量变化率的通用表达式，然后针对每种情况进行特化。\n\n设系统的位形由坐标 $q(t) \\in \\mathbb{R}^{n}$ 描述。系统由一个光滑的拉格朗日量 $L(q,\\dot{q},t)$ 控制。机械能 $E$ 定义为\n$$E(q,\\dot{q},t) = \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} - L(q,\\dot{q},t)$$\n这里我们采用惯例，将 $\\frac{\\partial L}{\\partial \\dot{q}}$ 视为偏导数的列向量，即 $(\\frac{\\partial L}{\\partial \\dot{q}})_i = \\frac{\\partial L}{\\partial \\dot{q}_i}$。\n\n我们首先推导能量的全时间导数 $\\frac{dE}{dt}$ 沿任意轨迹 $q(t)$ 的通用表达式。使用链式法则：\n$$\\frac{dE}{dt} = \\frac{d}{dt} \\left( \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} \\right) - \\frac{dL}{dt}$$\n第一项展开为：\n$$\\frac{d}{dt} \\left( \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} \\right) = \\ddot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} + \\dot{q}^{T} \\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right)$$\n拉格朗日量 $L(q(t), \\dot{q}(t), t)$ 的全时间导数为：\n$$\\frac{dL}{dt} = \\left(\\frac{\\partial L}{\\partial q}\\right)^{T} \\dot{q} + \\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right)^{T} \\ddot{q} + \\frac{\\partial L}{\\partial t}$$\n其中 $\\frac{\\partial L}{\\partial q}$ 是关于 $q$ 的偏导数列向量。\n将这些代入 $\\frac{dE}{dt}$ 的表达式中：\n$$\\frac{dE}{dt} = \\left( \\ddot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} + \\dot{q}^{T} \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} \\right) - \\left( \\left(\\frac{\\partial L}{\\partial q}\\right)^{T} \\dot{q} + \\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right)^{T} \\ddot{q} + \\frac{\\partial L}{\\partial t} \\right)$$\n由于 $\\ddot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} = (\\frac{\\partial L}{\\partial \\dot{q}})^{T} \\ddot{q}$ 是一个标量，这些项相互抵消。表达式简化为：\n$$\\frac{dE}{dt} = \\dot{q}^{T} \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\left(\\frac{\\partial L}{\\partial q}\\right)^{T} \\dot{q} - \\frac{\\partial L}{\\partial t}$$\n这可以紧凑地写为：\n$$\\frac{dE}{dt} = \\dot{q}^{T} \\left( \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\frac{\\partial L}{\\partial q} \\right) - \\frac{\\partial L}{\\partial t}$$\n这个通用公式将能量变化率与欧拉-拉格朗日表达式联系起来。我们现在将此应用于两种指定的动力学框架。\n\n**非完整动力学**\n\n对于非完整动力学，运动由拉格朗日-达朗贝尔原理描述，该原理导出运动方程：\n$$ \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\frac{\\partial L}{\\partial q} = A(q,t)^{T} \\lambda(t) $$\n这里，$A^{T}\\lambda$ 代表约束力。这必须辅以约束方程本身：\n$$ A(q,t) \\dot{q} = 0 $$\n问题陈述，这些 Chetaev 反应力不做功，这是该数学结构的物理解释。\n为了求能量变化率，我们将非完整运动方程代入我们关于 $\\frac{dE}{dt}$ 的通用表达式中：\n$$ \\frac{dE_{nh}}{dt} = \\dot{q}^{T} \\left( A^{T} \\lambda \\right) - \\frac{\\partial L}{\\partial t} $$\n第一项可以使用乘积转置的性质重写：\n$$ \\dot{q}^{T} A^{T} \\lambda = (A \\dot{q})^{T} \\lambda $$\n使用约束方程 $A \\dot{q} = 0$，此项变为零：\n$$ (A \\dot{q})^{T} \\lambda = (0)^{T} \\lambda = 0 $$\n因此，非完整系统的能量变化率为：\n$$ \\frac{dE_{nh}}{dt} = - \\frac{\\partial L}{\\partial t} $$\n在这种设定下，当且仅当拉格朗日量 $L$ 不显式依赖于时间（一个定常系统）时，能量守恒。请注意，约束矩阵 $A(q,t)$ 中的显式时间依赖性不影响能量守恒，因为根据构造，约束力始终与运动方向正交。\n\n**Vakonomic 动力学**\n\n在 vakonomic 动力学中，采用了一种不同的方法。约束通过拉格朗日乘子 $\\lambda(t)$ 被纳入作用量积分中，并寻求这个新作用量的驻定路径。增广拉格朗日量是：\n$$ L_{vak}(q,\\dot{q},t,\\lambda) = L(q,\\dot{q},t) + \\lambda(t)^{T} A(q,t) \\dot{q} $$\n动力学由 $L_{vak}$ 的欧拉-拉格朗日方程决定，其中变分是相对于 $q(t)$ 和 $\\lambda(t)$ 两者进行的。相对于 $\\lambda$ 的变分产生约束 $A \\dot{q} = 0$。相对于 $q$ 的变分给出运动方程。\n\n一个直接源于欧拉-拉格朗日方程的普遍结果是，对于任何拉格朗日量 $L'$，其相关的能量函数 $E_{L'} = \\dot{q}^{T} \\frac{\\partial L'}{\\partial \\dot{q}} - L'$ 的演化规律为 $\\frac{dE_{L'}}{dt} = -\\frac{\\partial L'}{\\partial t}$。我们将此应用于 $L' = L_{vak}$。\n首先，我们找到与 $L_{vak}$ 相关的能量函数。在这个扩展系统中的“速度”是 $\\dot{q}$ 和 $\\dot{\\lambda}$，但由于 $\\frac{\\partial L_{vak}}{\\partial \\dot{\\lambda}} = 0$，能量函数仅依赖于 $\\dot{q}$：\n$$ E_{L_{vak}} = \\dot{q}^{T} \\frac{\\partial L_{vak}}{\\partial \\dot{q}} - L_{vak} $$\n$$ \\frac{\\partial L_{vak}}{\\partial \\dot{q}} = \\frac{\\partial L}{\\partial \\dot{q}} + \\frac{\\partial}{\\partial \\dot{q}}(\\lambda^{T}A\\dot{q}) = \\frac{\\partial L}{\\partial \\dot{q}} + A^{T}\\lambda $$\n将此代入 $E_{L_{vak}}$ 的表达式中：\n$$ E_{L_{vak}} = \\dot{q}^{T} \\left( \\frac{\\partial L}{\\partial \\dot{q}} + A^{T}\\lambda \\right) - (L + \\lambda^{T}A\\dot{q}) $$\n$$ E_{L_{vak}} = \\left( \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} - L \\right) + \\dot{q}^{T}A^{T}\\lambda - \\lambda^{T}A\\dot{q} $$\n项 $\\lambda^{T}A\\dot{q}$ 是一个标量，因此它等于其自身的转置，即 $(\\lambda^{T}A\\dot{q})^T = \\dot{q}^{T}A^{T}\\lambda$。因此，最后两项抵消：\n$$ \\dot{q}^{T}A^{T}\\lambda - \\lambda^{T}A\\dot{q} = 0 $$\n这表明 vakonomic 拉格朗日量的能量函数与原始机械能相同：\n$$ E_{L_{vak}} = \\dot{q}^{T}\\frac{\\partial L}{\\partial \\dot{q}} - L = E $$\n现在，将能量演化定理应用于 $L_{vak}$：\n$$ \\frac{dE_{vak}}{dt} = \\frac{dE}{dt} = - \\frac{\\partial L_{vak}}{\\partial t} $$\n我们计算 $L_{vak}$ 关于时间 $t$ 的偏导数。这个导数作用于 $L$ 和 $A$ 中的显式时间依赖性，而不作用于路径 $q(t)$ 或乘子 $\\lambda(t)$ 的时间依赖性。\n$$ \\frac{\\partial L_{vak}}{\\partial t} = \\frac{\\partial}{\\partial t} \\left( L(q,\\dot{q},t) + \\lambda^{T} A(q,t) \\dot{q} \\right) = \\frac{\\partial L}{\\partial t} + \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q} $$\n因此，vakonomic 系统的能量变化率为：\n$$ \\frac{dE_{vak}}{dt} = - \\frac{\\partial L}{\\partial t} - \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q} $$\n在这种设定下，如果 $\\frac{\\partial L}{\\partial t} + \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q} = 0$，则能量守恒。这不仅要求拉格朗日量是定常的（$\\frac{\\partial L}{\\partial t} = 0$），还要求约束是定常的（$\\frac{\\partial A}{\\partial t} = 0$），或者非保守项恰好消失。\n\n**时间依赖性总结**\n\n- **Vakonomic 动力学**：能量变化率 $\\frac{dE_{vak}}{dt} = -\\frac{\\partial L}{\\partial t} - \\lambda^T \\frac{\\partial A}{\\partial t} \\dot{q}$ 受到拉格朗日量 $L$ 和约束矩阵 $A$ 中显式时间依赖性的影响。一个含时约束（非定常约束）通常会导致能量不守恒。\n- **非完整动力学**：能量变化率 $\\frac{dE_{nh}}{dt} = -\\frac{\\partial L}{\\partial t}$ 仅受拉格朗日量 $L$ 中显式时间依赖性的影响。约束矩阵 $A$ 中的时间依赖性不直接导致能量的变化。这是两种模型之间的一个根本区别。\n\n最终答案是一个包含两个推导出的能量变化率的行矩阵。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix} -\\frac{\\partial L}{\\partial t} - \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q}  -\\frac{\\partial L}{\\partial t} \\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "理论上的差异最好通过具体的例子来理解。这个练习提供了一个引人注目的反例，展示了即使在约束不显式依赖于时间的情况下，真空动力学也可能不保证机械能守恒 。通过直接计算能量变化率，你将亲眼见证真空的“力”如何做功，从而揭示其与理想非完整约束的本质区别。",
            "id": "3783676",
            "problem": "考虑一个平面上的机械系统，其位形坐标为 $x$ 和 $y$，质量为 $m$，机械拉格朗日量为 $L_0 = \\tfrac{1}{2} m \\left( \\dot{x}^2 + \\dot{y}^2 \\right)$，不显含时间且没有势能。施加以下非时变的仿射速度约束\n$$\n\\dot{y} - b\\,x = 0,\n$$\n其中 $b$ 是一个非零常数。使用变分约束法处理该约束，通过引入拉格朗日乘子 $\\lambda$ 来增广拉格朗日量，即考虑增广拉格朗日量\n$$\nL_{\\mathrm{v}} = L_0 + \\lambda \\left( \\dot{y} - b\\,x \\right).\n$$\n使用从 $L_{\\mathrm{v}}$ 对变量 $x$、$y$ 和 $\\lambda$ 推导出的欧拉-拉格朗日（EL）方程，得到变分约束运动方程，并用其计算沿变分约束轨迹的机械能\n$$\nE = \\tfrac{1}{2} m \\left( \\dot{x}^2 + \\dot{y}^2 \\right)\n$$\n的时间导数。你的推导必须从 EL 方程和 $E$ 的基本定义出发，通过直接微分和代入进行，不得引用任何现成的能量平衡恒等式。明确证明该系统提供了一个反例，其中变分约束动力学因乘子项做功而导致机械能不守恒。将你的最终答案表示为关于 $x$、$\\dot{x}$、$\\lambda$、$\\dot{\\lambda}$ 和 $b$ 的单一闭式解析表达式。无需单位。不要四舍五入；提供精确的解析表达式。",
            "solution": "所提出的问题是有效的，因为它是自洽的，其科学基础是变分力学原理，并且在数学上是适定的。我们按要求进行推导。\n\n该系统由增广拉格朗日量 $L_{\\mathrm{v}}$ 描述，它使用拉格朗日乘子 $\\lambda$ 整合了机械拉格朗日量 $L_0 = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right)$ 和仿射速度约束 $\\dot{y} - b\\,x = 0$。增广拉格朗日量由下式给出：\n$$\nL_{\\mathrm{v}}(x, \\dot{x}, y, \\dot{y}, \\lambda) = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right) + \\lambda \\left( \\dot{y} - b\\,x \\right).\n$$\n变分约束运动方程是针对变量 $x$、$y$ 以及乘子 $\\lambda$ 的欧拉-拉格朗日（EL）方程，在变分约束形式中，$\\lambda$ 被视为一个位形变量。对于坐标 $q_i$，EL 方程的一般形式为\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{q_i}}\\right) - \\frac{\\partial L_{\\mathrm{v}}}{\\partial q_i} = 0.\n$$\n我们推导每个变量的方程。\n\n对于坐标 $x$：\n$L_{\\mathrm{v}}$ 的偏导数是\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{x}} = m\\dot{x}\n$$\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial x} = -b\\lambda\n$$\n将这些代入 EL 方程，得到第一个运动方程：\n$$\n\\frac{d}{dt}(m\\dot{x}) - (-b\\lambda) = 0 \\implies m\\ddot{x} = -b\\lambda.\n$$\n\n对于坐标 $y$：\n$L_{\\mathrm{v}}$ 的偏导数是\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{y}} = m\\dot{y} + \\lambda\n$$\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial y} = 0\n$$\n将这些代入 EL 方程，得到第二个运动方程：\n$$\n\\frac{d}{dt}(m\\dot{y} + \\lambda) - 0 = 0 \\implies m\\ddot{y} + \\dot{\\lambda} = 0 \\implies m\\ddot{y} = -\\dot{\\lambda}.\n$$\n\n对于乘子 $\\lambda$：\n变分约束形式将 $\\lambda$ 视为一个坐标。由于 $L_{\\mathrm{v}}$ 不依赖于 $\\dot{\\lambda}$，项 $\\frac{d}{dt}(\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{\\lambda}})$ 为零。因此，$\\lambda$ 的 EL 方程简化为 $\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\lambda} = 0$。\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\lambda} = \\dot{y} - b\\,x\n$$\n这就得到了第三个运动方程，也就是约束方程本身：\n$$\n\\dot{y} - b\\,x = 0.\n$$\n因此，全套变分约束运动方程为：\n1. $m\\ddot{x} = -b\\lambda$\n2. $m\\ddot{y} = -\\dot{\\lambda}$\n3. $\\dot{y} = b\\,x$\n\n接下来，我们计算机械能 $E$ 的时间导数，其定义为\n$$\nE = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right).\n$$\n使用链式法则对 $E$ 关于时间 $t$ 求导，得到\n$$\n\\dot{E} = \\frac{dE}{dt} = \\frac{d}{dt} \\left[ \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right) \\right] = \\tfrac{1}{2} m \\left( 2\\dot{x}\\ddot{x} + 2\\dot{y}\\ddot{y} \\right) = m\\ddot{x}\\dot{x} + m\\ddot{y}\\dot{y}.\n$$\n现在，我们将运动方程 (1) 和 (2) 中的 $m\\ddot{x}$ 和 $m\\ddot{y}$ 表达式代入 $\\dot{E}$ 的表达式中：\n$$\n\\dot{E} = (-b\\lambda)\\dot{x} + (-\\dot{\\lambda})\\dot{y} = -b\\lambda\\dot{x} - \\dot{\\lambda}\\dot{y}.\n$$\n题目要求最终表达式用 $x$、$\\dot{x}$、$\\lambda$、$\\dot{\\lambda}$ 和 $b$ 表示。我们当前的表达式包含 $\\dot{y}$，可以使用约束方程 (3) $\\dot{y} = b\\,x$ 将其消去。将此代入 $\\dot{E}$ 的表达式中，得到：\n$$\n\\dot{E} = -b\\lambda\\dot{x} - \\dot{\\lambda}(b\\,x).\n$$\n整理各项，我们得到机械能变化率的最终表达式：\n$$\n\\dot{E} = -b\\lambda\\dot{x} - bx\\dot{\\lambda}.\n$$\n这个结果不恒为零，表明在变分约束动力学中，有效的“约束力”可以做功，从而导致机械能不守恒。这与由达朗贝尔原理支配的非完整动力学有根本区别，在非完整动力学中，理想约束根据定义不做功。所推导的表达式是变分约束所提供的功率，即做功的速率。",
            "answer": "$$\n\\boxed{-b\\lambda\\dot{x} - bx\\dot{\\lambda}}\n$$"
        },
        {
            "introduction": "除了能量守恒性的差异，真空动力学和非完整动力学最直接的区别在于它们对系统运动的预测不同。本练习旨在量化这一差异，要求你为一个具体的力学系统计算两种理论框架下的加速度矢量 。通过比较最终得到的加速度，你将直观地看到两种不同的变分原理如何导致截然不同的物理轨迹。",
            "id": "3783683",
            "problem": "考虑一个机械系统，其位形空间为 $Q=\\mathbb{R}^{3}$，坐标为 $q=(q_{1},q_{2},q_{3})$，动能由一个恒定正定质量矩阵决定，为简化起见，该矩阵取为单位矩阵。其拉格朗日量为 $L(q,\\dot q)=\\tfrac{1}{2}\\dot q^{T}\\dot q$，且系统受到一个由 $A(q)\\dot q=0$ 给出的满秩线性速度约束，其中单个约束1-形式 $a(q)\\in\\mathbb{R}^{3}$ 为\n$$\na(q)=\\big(q_{2},\\,-q_{1},\\,1\\big).\n$$\n考虑两种不同的约束变分原理：\n- 非完整的拉格朗日-达朗贝尔原理，以及\n- vakonomic（变分公理化）原理，其中作用量被增广了乘子项 $\\lambda(t)\\,a(q)\\cdot\\dot q$，$\\lambda(t)$ 是一个标量函数。\n\n从第一性原理（无约束动力学的 Hamilton 原理和非完整动力学的拉格朗日-达朗贝尔原理）出发，推导在每种原理下对于一般 $q, \\dot q$ 的运动方程，然后在位形 $q=(1,0,0)$ 和速度 $\\dot q=(u,v,v)$ 处计算得到的加速度，其中实数 $u$ 和 $v$ 的选择应满足在 $q=(1,0,0)$ 处的约束 $a(q)\\cdot\\dot q=0$。\n\n计算：\n1. 在 $q=(1,0,0)$ 和 $\\dot q=(u,v,v)$ 处的非完整加速度矢量 $\\ddot q_{\\mathrm{nh}}$。\n2. 在同一状态下的 vakonomic 加速度矢量 $\\ddot q_{\\mathrm{vak}}$，根据需要用 vakonomic 乘子 $\\lambda(t)$ 及其时间导数 $\\dot\\lambda(t)$ 表示结果，然后利用约束的时间导数消去 $\\dot\\lambda(t)$，用 $\\lambda(t)$、$u$ 和 $v$ 来表示。\n3. 在此状态下的差值 $\\Delta\\ddot q=\\ddot q_{\\mathrm{vak}}-\\ddot q_{\\mathrm{nh}}$，完全用 $\\lambda(t)$、$u$ 和 $v$ 来表示。\n\n你的最终答案必须是 $\\Delta\\ddot q$ 的单个矢量表达式，形式为闭合解析式。将最终的矢量表示为行矩阵。",
            "solution": "对于 $L(q,\\dot q)=\\tfrac{1}{2}\\dot q^{T}\\dot q$，无约束的欧拉-拉格朗日方程为\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot q}\\right)-\\frac{\\partial L}{\\partial q}=0\n\\;\\;\\Longrightarrow\\;\\;\n\\ddot q=0,\n$$\n因为质量矩阵是单位矩阵且没有势能。\n\n系统受到线性速度约束 $A(q)\\dot q=0$，其中 $A(q)$ 是一个 $1\\times 3$ 的行矩阵，其行为 $a(q)=(q_{2},-q_{1},1)$。在 $q=(1,0,0)$ 处，我们有 $a(q)=(0,-1,1)$，因此约束 $a(q)\\cdot\\dot q=0$ 意味着 $-\\dot q_{2}+\\dot q_{3}=0$，这对于任意实数 $u,v$ 且 $\\dot q=(u,v,v)$ 都是满足的。\n\n非完整动力学（拉格朗日-达朗贝尔）：\n对于理想线性速度约束 $A(q)\\dot q=0$，带有乘子 $\\mu(t)\\in\\mathbb{R}$ 的非完整方程为\n$$\n\\ddot q = A(q)^{T}\\mu,\n$$\n以及运动学约束及其相容性条件（通过对 $A(q)\\dot q=0$ 求导得到）：\n$$\nA(q)\\dot q=0,\\qquad A(q)\\ddot q+\\dot A(q)\\dot q=0.\n$$\n这里 $\\dot A(q)\\dot q$ 表示 $A(q)$ 的时间导数乘以 $\\dot q$。对于 $a(q)=(q_{2},-q_{1},1)$，其时间导数为\n$$\n\\dot a(q)=\\left(\\dot q_{2},\\,-\\dot q_{1},\\,0\\right),\n$$\n且对于 $m=1$（单位质量），相容性条件简化为\n$$\na(q)\\cdot\\ddot q+\\dot a(q)\\cdot\\dot q=0.\n$$\n使用 $\\ddot q = a(q)^{T}\\mu$ 得到\n$$\n\\mu\\,\\big(a(q)\\cdot a(q)\\big) + \\dot a(q)\\cdot\\dot q = 0\n\\;\\;\\Longrightarrow\\;\\;\n\\mu = -\\frac{\\dot a(q)\\cdot\\dot q}{|a(q)|^{2}}.\n$$\n在所选状态下，$a(q)=(0,-1,1)$，所以 $|a(q)|^{2}=2$，且 $\\dot a(q)=(v,-u,0)$，因此\n$$\n\\dot a(q)\\cdot\\dot q = v\\,u + (-u)\\,v + 0\\cdot v = 0,\n$$\n这得到 $\\mu=0$。因此，\n$$\n\\ddot q_{\\mathrm{nh}} = a(q)^{T}\\mu = 0.\n$$\n\nVakonomic 动力学：\n在 vakonomic 表述中，增广拉格朗日量为 $\\mathcal{L}(q,\\dot q,\\lambda)=L(q,\\dot q)+\\lambda\\,a(q)\\cdot\\dot q$。关于 $q$ 的欧拉-拉格朗日方程为\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial \\mathcal{L}}{\\partial \\dot q}\\right) - \\frac{\\partial \\mathcal{L}}{\\partial q} = 0.\n$$\n计算必要的导数：\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial \\dot q} = \\dot q + \\lambda\\,a(q),\\qquad\n\\frac{d}{dt}\\left(\\frac{\\partial \\mathcal{L}}{\\partial \\dot q}\\right) = \\ddot q + \\lambda\\,\\dot a(q) + \\dot\\lambda\\,a(q),\n$$\n以及\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial q} = \\lambda\\,\\frac{\\partial}{\\partial q}\\big(a(q)\\cdot\\dot q\\big) = \\lambda\\,B(q,\\dot q),\n$$\n其中矢量 $B(q,\\dot q)$ 的分量为\n$$\nB_{k}(q,\\dot q) = \\frac{\\partial}{\\partial q_{k}}\\big(a(q)\\cdot\\dot q\\big) = \\sum_{i=1}^{3}\\frac{\\partial a_{i}}{\\partial q_{k}}\\,\\dot q_{i}.\n$$\n以矩阵形式，如果 $D(q)=\\partial a/\\partial q$ 是元素为 $D_{ik}=\\partial a_{i}/\\partial q_{k}$ 的 $3\\times 3$ 雅可比矩阵，则 $B(q,\\dot q)=D(q)^{T}\\dot q$ 且 $\\dot a(q)=D(q)\\dot q$。因此 vakonomic 方程为\n$$\n\\ddot q + \\lambda\\,\\dot a(q) + \\dot\\lambda\\,a(q) - \\lambda\\,B(q,\\dot q) = 0\n\\;\\;\\Longrightarrow\\;\\;\n\\ddot q_{\\mathrm{vak}} = -\\lambda\\,\\dot a(q) - \\dot\\lambda\\,a(q) + \\lambda\\,B(q,\\dot q).\n$$\n此外，约束 $a(q)\\cdot\\dot q=0$ 对所有时间成立；求导得到运动学相容性条件\n$$\na(q)\\cdot\\ddot q + \\dot a(q)\\cdot\\dot q = 0.\n$$\n代入 $\\ddot q_{\\mathrm{vak}}$ 以获得 $\\dot\\lambda$ 的表达式：\n$$\na(q)\\cdot\\big(-\\lambda\\,\\dot a(q) - \\dot\\lambda\\,a(q) + \\lambda\\,B(q,\\dot q)\\big) + \\dot a(q)\\cdot\\dot q = 0,\n$$\n其简化为\n$$\n-\\dot\\lambda\\,|a(q)|^{2} + \\lambda\\big(a(q)\\cdot B(q,\\dot q) - a(q)\\cdot \\dot a(q)\\big) + \\dot a(q)\\cdot\\dot q = 0,\n$$\n因此\n$$\n\\dot\\lambda = \\frac{\\lambda\\big(a(q)\\cdot B(q,\\dot q) - a(q)\\cdot \\dot a(q)\\big) + \\dot a(q)\\cdot\\dot q}{|a(q)|^{2}}.\n$$\n\n在 $(q,\\dot q)=\\big((1,0,0),(u,v,v)\\big)$ 处的计算：\n对于 $a(q)=(q_{2},-q_{1},1)$，计算雅可比矩阵 $D(q)=\\partial a/\\partial q$：\n$$\nD(q)=\\begin{pmatrix}\n\\frac{\\partial a_{1}}{\\partial q_{1}}  \\frac{\\partial a_{1}}{\\partial q_{2}}  \\frac{\\partial a_{1}}{\\partial q_{3}} \\\\\n\\frac{\\partial a_{2}}{\\partial q_{1}}  \\frac{\\partial a_{2}}{\\partial q_{2}}  \\frac{\\partial a_{2}}{\\partial q_{3}} \\\\\n\\frac{\\partial a_{3}}{\\partial q_{1}}  \\frac{\\partial a_{3}}{\\partial q_{2}}  \\frac{\\partial a_{3}}{\\partial q_{3}}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n0  1  0\\\\\n-1  0  0\\\\\n0  0  0\n\\end{pmatrix}.\n$$\n因此在任意 $(q,\\dot q)$ 处，\n$$\n\\dot a(q)=D(q)\\dot q=\\big(\\dot q_{2},\\,-\\dot q_{1},\\,0\\big),\\qquad\nB(q,\\dot q)=D(q)^{T}\\dot q=\\big(-\\dot q_{2},\\,\\dot q_{1},\\,0\\big).\n$$\n在 $(q,\\dot q)=\\big((1,0,0),(u,v,v)\\big)$ 处，\n$$\na(q)=(0,-1,1),\\quad |a(q)|^{2}=2,\\quad \\dot a(q)=(v,-u,0),\\quad B(q,\\dot q)=(-v,u,0).\n$$\n此外，\n$$\n\\dot a(q)\\cdot\\dot q = v\\,u + (-u)\\,v + 0\\cdot v = 0,\\qquad\na(q)\\cdot B(q,\\dot q) = (0)(-v) + (-1)(u) + (1)(0) = -u,\n$$\n以及\n$$\na(q)\\cdot \\dot a(q) = (0)(v) + (-1)(-u) + (1)(0) = u.\n$$\n因此，\n$$\na(q)\\cdot B(q,\\dot q) - a(q)\\cdot \\dot a(q) = -u - u = -2u,\n$$\n且乘子演化方程为\n$$\n\\dot\\lambda = \\frac{\\lambda(-2u) + 0}{2} = -\\lambda\\,u.\n$$\n代入到 vakonomic 加速度中：\n$$\n\\ddot q_{\\mathrm{vak}} = -\\lambda\\,(v,-u,0)\\;-\\;\\dot\\lambda\\,(0,-1,1)\\;+\\;\\lambda\\,(-v,u,0).\n$$\n使用 $\\dot\\lambda=-\\lambda u$，\n$$\n-\\dot\\lambda\\,(0,-1,1) = \\lambda u\\,(0,-1,1) = (0,-\\lambda u,\\lambda u),\n$$\n所以\n$$\n\\ddot q_{\\mathrm{vak}} = (-\\lambda v,\\,\\lambda u,\\,0) + (0,-\\lambda u,\\,\\lambda u) + (-\\lambda v,\\,\\lambda u,\\,0)\n= \\big(-2\\lambda v,\\;\\lambda u,\\;\\lambda u\\big).\n$$\n\n比较：\n我们得到 $\\ddot q_{\\mathrm{nh}}=0$ 和 $\\ddot q_{\\mathrm{vak}}=(-2\\lambda v,\\lambda u,\\lambda u)$。因此在指定状态下的差值为\n$$\n\\Delta\\ddot q \\;=\\; \\ddot q_{\\mathrm{vak}} - \\ddot q_{\\mathrm{nh}} \\;=\\; \\big(-2\\lambda v,\\;\\lambda u,\\;\\lambda u\\big).\n$$\n这个结果完全用 vakonomic 乘子 $\\lambda(t)$ 以及在状态 $q=(1,0,0)$，$\\dot q=(u,v,v)$ 处的速度分量 $u$ 和 $v$ 来表示。",
            "answer": "$$\\boxed{\\begin{pmatrix}-2\\lambda v  \\lambda u  \\lambda u\\end{pmatrix}}$$"
        }
    ]
}
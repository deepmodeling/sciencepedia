{
    "hands_on_practices": [
        {
            "introduction": "Vakonomic 动力学和非完整动力学之间的一个核心区别在于它们的能量守恒定律。这个练习将指导你从第一性原理出发，推导两种框架下能量变化率的一般表达式。通过这个过程，你将清晰地看到两种理论如何处理拉格朗日量和约束中的显式时间依赖性，从而揭示它们在物理预测上的根本分歧。",
            "id": "3783665",
            "problem": "考虑一个机械系统，其位形坐标为 $q \\in \\mathbb{R}^{n}$，速度为 $\\dot{q} \\in \\mathbb{R}^{n}$，有一个光滑的拉格朗日量 $L(q,\\dot{q},t)$，以及 $m$ 个光滑的、秩为 $m$ 的线性速度约束，由 $A(q,t)\\,\\dot{q} = 0$ 给出，其中 $A(q,t) \\in \\mathbb{R}^{m \\times n}$。设机械能定义为 $E(q,\\dot{q},t) = \\dot{q}^{T}\\,\\frac{\\partial L}{\\partial \\dot{q}}(q,\\dot{q},t) - L(q,\\dot{q},t)$。\n\n考虑两种动力学模型：\n\n1.  Vakonomic 动力学：运动通过 Hamilton 原理 (HP) 使作用量 $\\int \\left(L(q,\\dot{q},t) + \\lambda(t)^{T} A(q,t)\\,\\dot{q}\\right)\\,dt$ 取极值，其中 $\\lambda(t) \\in \\mathbb{R}^{m}$ 是 Lagrange 乘子。\n\n2.  非完整动力学：运动满足 Lagrange–d'Alembert 原理，其 Chetaev 反应力产生的方程为 $\\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\frac{\\partial L}{\\partial q} = A(q,t)^{T}\\,\\lambda(t)$，并满足约束 $A(q,t)\\,\\dot{q} = 0$。\n\n仅从 Hamilton 原理和 Euler–Lagrange 方程的核心定义出发，结合上述机械能的定义，以及当 $A(q,t)\\,\\dot{q} = 0$ 时 Chetaev 反应力沿容许速度不做功的假设，进行以下推导：\n\n-   推导沿 vakonomic 轨迹的能量变化率 $\\frac{dE}{dt}$，并说明在 vakonomic 情况下 $E$ 守恒的条件。\n-   推导沿非完整轨迹的能量变化率 $\\frac{dE}{dt}$，并说明在非完整情况下 $E$ 守恒的条件。\n-   明确展示拉格朗日量 $L(q,\\dot{q},t)$ 和约束矩阵 $A(q,t)$ 中的时间依赖性在每种情况下如何影响能量变化率。\n\n你的最终答案必须是一个单一的闭式解析表达式，以一个两元素行矩阵的形式给出 vakonomic 和非完整情况下的能量变化率，其中 vakonomic 变化率在前，非完整变化率在后。无需进行数值计算。最终答案仅需使用符号量 $q$、$\\dot{q}$、$t$、$L$、$A$ 和 $\\lambda$ 及其必要的导数表示。最终答案中不应包含任何单位。",
            "solution": "问题要求推导一个受线性速度约束的系统在两种不同动力学框架（vakonomic 和非完整）下机械能的变化率。我们将首先建立能量变化率的一般表达式，然后针对每种情况进行特化。\n\n设系统的位形由坐标 $q(t) \\in \\mathbb{R}^{n}$ 描述。该系统由一个光滑的拉格朗日量 $L(q,\\dot{q},t)$ 支配。机械能 $E$ 定义为\n$$E(q,\\dot{q},t) = \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} - L(q,\\dot{q},t)$$\n此处我们采用的约定是 $\\frac{\\partial L}{\\partial \\dot{q}}$ 是一个由偏导数构成的列向量，即 $(\\frac{\\partial L}{\\partial \\dot{q}})_i = \\frac{\\partial L}{\\partial \\dot{q}_i}$。\n\n我们首先沿着任意轨迹 $q(t)$ 推导能量的全时间导数 $\\frac{dE}{dt}$ 的一般表达式。使用链式法则：\n$$\\frac{dE}{dt} = \\frac{d}{dt} \\left( \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} \\right) - \\frac{dL}{dt}$$\n第一项展开为：\n$$\\frac{d}{dt} \\left( \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} \\right) = \\ddot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} + \\dot{q}^{T} \\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right)$$\n拉格朗日量 $L(q(t), \\dot{q}(t), t)$ 的全时间导数为：\n$$\\frac{dL}{dt} = \\left(\\frac{\\partial L}{\\partial q}\\right)^{T} \\dot{q} + \\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right)^{T} \\ddot{q} + \\frac{\\partial L}{\\partial t}$$\n其中 $\\frac{\\partial L}{\\partial q}$ 是关于 $q$ 的偏导数构成的列向量。\n将这些代入 $\\frac{dE}{dt}$ 的表达式中：\n$$\\frac{dE}{dt} = \\left( \\ddot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} + \\dot{q}^{T} \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} \\right) - \\left( \\left(\\frac{\\partial L}{\\partial q}\\right)^{T} \\dot{q} + \\left(\\frac{\\partial L}{\\partial \\dot{q}}\\right)^{T} \\ddot{q} + \\frac{\\partial L}{\\partial t} \\right)$$\n由于 $\\ddot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} = (\\frac{\\partial L}{\\partial \\dot{q}})^{T} \\ddot{q}$ 是一个标量，这两项相互抵消。表达式简化为：\n$$\\frac{dE}{dt} = \\dot{q}^{T} \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\left(\\frac{\\partial L}{\\partial q}\\right)^{T} \\dot{q} - \\frac{\\partial L}{\\partial t}$$\n这可以紧凑地写成：\n$$\\frac{dE}{dt} = \\dot{q}^{T} \\left( \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\frac{\\partial L}{\\partial q} \\right) - \\frac{\\partial L}{\\partial t}$$\n这个通用公式将能量的变化率与 Euler-Lagrange 表达式联系起来。我们现在将其应用于指定的两种动力学框架。\n\n**非完整动力学**\n\n对于非完整动力学，运动由 Lagrange-d'Alembert 原理描述，它给出运动方程：\n$$ \\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{q}} - \\frac{\\partial L}{\\partial q} = A(q,t)^{T} \\lambda(t) $$\n在这里，$A^{T}\\lambda$ 代表约束力。这必须由约束方程本身来补充：\n$$ A(q,t) \\dot{q} = 0 $$\n问题陈述，这些 Chetaev 反应力不做功，这是该数学结构的物理诠释。\n为了求能量变化率，我们将非完整运动方程代入我们关于 $\\frac{dE}{dt}$ 的一般表达式中：\n$$ \\frac{dE_{nh}}{dt} = \\dot{q}^{T} \\left( A^{T} \\lambda \\right) - \\frac{\\partial L}{\\partial t} $$\n第一项可以利用乘积转置的性质改写：\n$$ \\dot{q}^{T} A^{T} \\lambda = (A \\dot{q})^{T} \\lambda $$\n使用约束方程 $A \\dot{q} = 0$，该项变为零：\n$$ (A \\dot{q})^{T} \\lambda = (0)^{T} \\lambda = 0 $$\n因此，非完整系统的能量变化率为：\n$$ \\frac{dE_{nh}}{dt} = - \\frac{\\partial L}{\\partial t} $$\n在这种情况下，能量守恒当且仅当拉格朗日量 $L$ 不显含时间（即一个定常系统）。注意，约束矩阵 $A(q,t)$ 中的显式时间依赖性不影响能量守恒，因为根据其构造，约束力始终与运动方向正交。\n\n**Vakonomic 动力学**\n\n在 vakonomic 动力学中，采用了不同的方法。约束通过 Lagrange 乘子 $\\lambda(t)$ 被整合到作用量积分中，并寻求这个新作用量的驻值路径。增广拉格朗日量是：\n$$ L_{vak}(q,\\dot{q},t,\\lambda) = L(q,\\dot{q},t) + \\lambda(t)^{T} A(q,t) \\dot{q} $$\n动力学由 $L_{vak}$ 的 Euler-Lagrange 方程支配，其中变分是关于 $q(t)$ 和 $\\lambda(t)$ 两者进行的。关于 $\\lambda$ 的变分得到约束 $A \\dot{q} = 0$。关于 $q$ 的变分给出运动方程。\n\n一个直接源于 Euler-Lagrange 方程的普适结果是，对于任意拉格朗日量 $L'$，其相关的能量函数 $E_{L'} = \\dot{q}^{T} \\frac{\\partial L'}{\\partial \\dot{q}} - L'$ 的演化规律为 $\\frac{dE_{L'}}{dt} = -\\frac{\\partial L'}{\\partial t}$。我们将此应用于 $L' = L_{vak}$。\n首先，我们求与 $L_{vak}$ 相关的能量函数。在这个扩展系统中，“速度”是 $\\dot{q}$ 和 $\\dot{\\lambda}$，但由于 $\\frac{\\partial L_{vak}}{\\partial \\dot{\\lambda}} = 0$，能量函数仅依赖于 $\\dot{q}$：\n$$ E_{L_{vak}} = \\dot{q}^{T} \\frac{\\partial L_{vak}}{\\partial \\dot{q}} - L_{vak} $$\n$$ \\frac{\\partial L_{vak}}{\\partial \\dot{q}} = \\frac{\\partial L}{\\partial \\dot{q}} + \\frac{\\partial}{\\partial \\dot{q}}(\\lambda^{T}A\\dot{q}) = \\frac{\\partial L}{\\partial \\dot{q}} + A^{T}\\lambda $$\n将此代入 $E_{L_{vak}}$ 的表达式中：\n$$ E_{L_{vak}} = \\dot{q}^{T} \\left( \\frac{\\partial L}{\\partial \\dot{q}} + A^{T}\\lambda \\right) - (L + \\lambda^{T}A\\dot{q}) $$\n$$ E_{L_{vak}} = \\left( \\dot{q}^{T} \\frac{\\partial L}{\\partial \\dot{q}} - L \\right) + \\dot{q}^{T}A^{T}\\lambda - \\lambda^{T}A\\dot{q} $$\n$\\lambda^{T}A\\dot{q}$ 项是一个标量，所以它等于其自身的转置，$(\\lambda^{T}A\\dot{q})^T = \\dot{q}^{T}A^{T}\\lambda$。因此，最后两项相互抵消：\n$$ \\dot{q}^{T}A^{T}\\lambda - \\lambda^{T}A\\dot{q} = 0 $$\n这表明 vakonomic 拉格朗日量的能量函数与原始的机械能是相同的：\n$$ E_{L_{vak}} = \\dot{q}^{T}\\frac{\\partial L}{\\partial \\dot{q}} - L = E $$\n现在，将能量演化定理应用于 $L_{vak}$：\n$$ \\frac{dE_{vak}}{dt} = \\frac{dE}{dt} = - \\frac{\\partial L_{vak}}{\\partial t} $$\n我们计算 $L_{vak}$ 关于时间 $t$ 的偏导数。该导数作用于 $L$ 和 $A$ 中的显式时间依赖性，而不作用于路径 $q(t)$ 或乘子 $\\lambda(t)$ 的时间依赖性。\n$$ \\frac{\\partial L_{vak}}{\\partial t} = \\frac{\\partial}{\\partial t} \\left( L(q,\\dot{q},t) + \\lambda^{T} A(q,t) \\dot{q} \\right) = \\frac{\\partial L}{\\partial t} + \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q} $$\n因此，vakonomic 系统的能量变化率为：\n$$ \\frac{dE_{vak}}{dt} = - \\frac{\\partial L}{\\partial t} - \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q} $$\n在这种情况下，能量守恒的条件是 $\\frac{\\partial L}{\\partial t} + \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q} = 0$。这不仅要求拉格朗日量是定常的（$\\frac{\\partial L}{\\partial t} = 0$），而且还要求约束是定常的（$\\frac{\\partial A}{\\partial t} = 0$），或者非保守项恰好为零。\n\n**时间依赖性总结**\n\n-   **Vakonomic 动力学**：能量变化率 $\\frac{dE_{vak}}{dt} = -\\frac{\\partial L}{\\partial t} - \\lambda^T \\frac{\\partial A}{\\partial t} \\dot{q}$ 受到拉格朗日量 $L$ 和约束矩阵 $A$ 中的显式时间依赖性的共同影响。时变约束（非定常约束）通常会导致能量不守恒。\n-   **非完整动力学**：能量变化率 $\\frac{dE_{nh}}{dt} = -\\frac{\\partial L}{\\partial t}$ 仅受拉格朗日量 $L$ 中的显式时间依赖性影响。约束矩阵 $A$ 中的时间依赖性不直接导致能量的变化。这是两种模型之间的一个根本区别。\n\n最终答案是一个包含推导出的两个能量变化率的行矩阵。",
            "answer": "$$\n\\boxed{\n\\begin{pmatrix} -\\frac{\\partial L}{\\partial t} - \\lambda^{T} \\frac{\\partial A}{\\partial t} \\dot{q}  -\\frac{\\partial L}{\\partial t} \\end{pmatrix}\n}\n$$"
        },
        {
            "introduction": "基于前一个练习 () 建立的能量演化理论，我们来研究一个更具体且发人深省的例子。即使对于一个具有不依赖于时间的（定常）约束的系统，Vakonomic 方法也可能导致机械能不守恒。这项练习将揭示 Vakonomic “约束力”能够做功的微妙机制，这与理想非完整约束从不做功的定义形成了鲜明对比。",
            "id": "3783676",
            "problem": "考虑一个平面上的机械系统，其位形坐标为 $x$ 和 $y$，质量为 $m$，机械拉格朗日量为 $L_0 = \\tfrac{1}{2} m \\left( \\dot{x}^2 + \\dot{y}^2 \\right)$，没有显式的时间依赖性，也没有势能。施加以下不含时的仿射速度约束\n$$\n\\dot{y} - b\\,x = 0,\n$$\n其中 $b$ 是一个非零常数。通过引入拉格朗日乘子 $\\lambda$ 来增广拉格朗日量，以 vakonomic 方式处理该约束，即考虑增广拉格朗日量\n$$\nL_{\\mathrm{v}} = L_0 + \\lambda \\left( \\dot{y} - b\\,x \\right).\n$$\n使用从 $L_{\\mathrm{v}}$ 对变量 $x$、$y$ 和 $\\lambda$ 推导出的欧拉-拉格朗日（EL）方程，求出 vakonomic 运动方程，并用它们计算机械能的时间导数\n$$\nE = \\tfrac{1}{2} m \\left( \\dot{x}^2 + \\dot{y}^2 \\right)\n$$\n沿 vakonomic 轨迹。您的推导必须从 EL 方程和 $E$ 的基本定义开始，通过直接微分和代入进行，不得引用任何现成的能量平衡恒等式。明确证明该系统提供了一个反例，其中 vakonomic 动力学因乘子项做功而导致机械能不守恒。将您的最终答案表示为 $\\dot{E}$ 关于 $x$、$\\dot{x}$、$\\lambda$、$\\dot{\\lambda}$ 和 $b$ 的单个闭式解析表达式。无需单位。不要四舍五入；请提供精确的解析表达式。",
            "solution": "所提出的问题是有效的，因为它是自洽的，科学上基于变分力学的原理，并且在数学上是良定的。我们按要求进行推导。\n\n该系统由增广拉格朗日量 $L_{\\mathrm{v}}$ 描述，它使用拉格朗日乘子 $\\lambda$ 包含了机械拉格朗日量 $L_0 = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right)$ 和仿射速度约束 $\\dot{y} - b\\,x = 0$。增广拉格朗日量由下式给出\n$$\nL_{\\mathrm{v}}(x, \\dot{x}, y, \\dot{y}, \\lambda) = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right) + \\lambda \\left( \\dot{y} - b\\,x \\right).\n$$\nvakonomic 运动方程是变量 $x$、$y$ 和乘子 $\\lambda$ 的欧拉-拉格朗日（EL）方程，在 vakonomic 形式体系中，$\\lambda$ 被视为一个位形变量。对于坐标 $q_i$，EL 方程的一般形式为\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{q_i}}\\right) - \\frac{\\partial L_{\\mathrm{v}}}{\\partial q_i} = 0.\n$$\n我们对每个变量推导方程。\n\n对于坐标 $x$：\n$L_{\\mathrm{v}}$ 的偏导数为\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{x}} = m\\dot{x}\n$$\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial x} = -b\\lambda\n$$\n将这些代入 EL 方程，得到第一个运动方程：\n$$\n\\frac{d}{dt}(m\\dot{x}) - (-b\\lambda) = 0 \\implies m\\ddot{x} = -b\\lambda.\n$$\n\n对于坐标 $y$：\n$L_{\\mathrm{v}}$ 的偏导数为\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{y}} = m\\dot{y} + \\lambda\n$$\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial y} = 0\n$$\n将这些代入 EL 方程，得到第二个运动方程：\n$$\n\\frac{d}{dt}(m\\dot{y} + \\lambda) - 0 = 0 \\implies m\\ddot{y} + \\dot{\\lambda} = 0 \\implies m\\ddot{y} = -\\dot{\\lambda}.\n$$\n\n对于乘子 $\\lambda$：\nvakonomic 形式体系将 $\\lambda$ 视为一个坐标。由于 $L_{\\mathrm{v}}$ 不依赖于 $\\dot{\\lambda}$，项 $\\frac{d}{dt}(\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\dot{\\lambda}})$ 为零。因此，$\\lambda$ 的 EL 方程简化为 $\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\lambda} = 0$。\n$$\n\\frac{\\partial L_{\\mathrm{v}}}{\\partial \\lambda} = \\dot{y} - b\\,x\n$$\n这就得到了第三个运动方程，即约束方程本身：\n$$\n\\dot{y} - b\\,x = 0.\n$$\n因此，完整的 vakonomic 运动方程组为：\n1. $m\\ddot{x} = -b\\lambda$\n2. $m\\ddot{y} = -\\dot{\\lambda}$\n3. $\\dot{y} = b\\,x$\n\n接下来，我们计算机械能 $E$ 的时间导数，其定义为\n$$\nE = \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right).\n$$\n使用链式法则对 $E$ 关于时间 $t$ 求导，得到\n$$\n\\dot{E} = \\frac{dE}{dt} = \\frac{d}{dt} \\left[ \\tfrac{1}{2} m \\left( \\dot{x}^{2} + \\dot{y}^{2} \\right) \\right] = \\tfrac{1}{2} m \\left( 2\\dot{x}\\ddot{x} + 2\\dot{y}\\ddot{y} \\right) = m\\ddot{x}\\dot{x} + m\\ddot{y}\\dot{y}.\n$$\n现在，我们将运动方程（1）和（2）中 $m\\ddot{x}$ 和 $m\\ddot{y}$ 的表达式代入 $\\dot{E}$ 的表达式中：\n$$\n\\dot{E} = (-b\\lambda)\\dot{x} + (-\\dot{\\lambda})\\dot{y} = -b\\lambda\\dot{x} - \\dot{\\lambda}\\dot{y}.\n$$\n问题要求最终表达式以 $x$、$\\dot{x}$、$\\lambda$、$\\dot{\\lambda}$ 和 $b$ 表示。我们当前的表达式包含 $\\dot{y}$，我们可以使用约束方程（3） $\\dot{y} = b\\,x$ 来消去它。将其代入 $\\dot{E}$ 的表达式中，得到：\n$$\n\\dot{E} = -b\\lambda\\dot{x} - \\dot{\\lambda}(b\\,x).\n$$\n重新整理各项，我们得到机械能变化率的最终表达式：\n$$\n\\dot{E} = -b\\lambda\\dot{x} - bx\\dot{\\lambda}.\n$$\n这个结果不恒为零，表明在 vakonomic 动力学中，有效的“约束力”可以做功，导致机械能不守恒。这与由 d'Alembert 原理支配的非完整动力学有根本区别，在非完整动力学中，理想约束根据定义不做功。所推导的表达式是 vakonomic 约束提供的功率，即做功的速率。",
            "answer": "$$\n\\boxed{-b\\lambda\\dot{x} - bx\\dot{\\lambda}}\n$$"
        },
        {
            "introduction": "正如我们在能量守恒定律的分析中所见 (, )，变分原理的差异最终会体现为不同的物理运动轨迹。本练习提供了一个直接的“针锋相对”的比较。你将为一个具有非完整约束的系统，在完全相同的状态下，分别计算由 Vakonomic 模型和非完整模型预测的加速度矢量，从而使理论上的分歧变得具体且可量化。",
            "id": "3783683",
            "problem": "考虑一个机械系统，其位形空间为 $Q=\\mathbb{R}^{3}$，坐标为 $q=(q_{1},q_{2},q_{3})$，动能由一个恒定正定的质量矩阵确定，为简单起见，该矩阵取为单位矩阵。拉格朗日量为 $L(q,\\dot q)=\\tfrac{1}{2}\\dot q^{T}\\dot q$，且系统受到一个由 $A(q)\\dot q=0$ 给出的满秩线性速度约束，其中单个约束 1-形式 $a(q)\\in\\mathbb{R}^{3}$ 为\n$$\na(q)=\\big(q_{2},\\,-q_{1},\\,1\\big).\n$$\n考虑两种不同的约束变分原理：\n- 非完整拉格朗日-达朗贝尔原理，以及\n- vakonomic (变分公理) 原理，其中作用量通过乘子项 $\\lambda(t)\\,a(q)\\cdot\\dot q$ 进行增广，$\\lambda(t)$ 是一个标量函数。\n\n从第一性原理（无约束动力学的哈密顿原理和非完整动力学的拉格朗日-达朗贝尔原理）出发，推导在每种原理下对于一般 $q,\\dot q$ 的运动方程，然后在位形 $q=(1,0,0)$ 和速度 $\\dot q=(u,v,v)$ 处计算得到的加速度，其中实数 $u$ 和 $v$ 的选择是为了在 $q=(1,0,0)$ 处满足约束 $a(q)\\cdot\\dot q=0$。\n\n计算：\n1. 在 $q=(1,0,0)$ 和 $\\dot q=(u,v,v)$ 处的非完整加速度矢量 $\\ddot q_{\\mathrm{nh}}$。\n2. 在相同状态下的 vakonomic 加速度矢量 $\\ddot q_{\\mathrm{vak}}$，根据需要用 vakonomic 乘子 $\\lambda(t)$ 及其时间导数 $\\dot\\lambda(t)$ 表示结果，然后使用约束的时间导数消去 $\\dot\\lambda(t)$，用 $\\lambda(t)$、$u$ 和 $v$ 来表示。\n3. 在此状态下的差值 $\\Delta\\ddot q=\\ddot q_{\\mathrm{vak}}-\\ddot q_{\\mathrm{nh}}$，完全用 $\\lambda(t)$、$u$ 和 $v$ 表示。\n\n你的最终答案必须是 $\\Delta\\ddot q$ 的单一矢量表达式，形式为闭式解析表达式。将最终矢量表示为行矩阵。",
            "solution": "对于 $L(q,\\dot q)=\\tfrac{1}{2}\\dot q^{T}\\dot q$ 的无约束欧拉-拉格朗日方程为\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot q}\\right)-\\frac{\\partial L}{\\partial q}=0\n\\;\\;\\Longrightarrow\\;\\;\n\\ddot q=0,\n$$\n因为质量矩阵是单位矩阵且没有势能。\n\n系统受到线性速度约束 $A(q)\\dot q=0$ 的制约，其中 $A(q)$ 是一个 $1\\times 3$ 的行矩阵，其行为 $a(q)=(q_{2},-q_{1},1)$。在 $q=(1,0,0)$ 处，我们有 $a(q)=(0,-1,1)$，因此约束 $a(q)\\cdot\\dot q=0$ 意味着 $-\\dot q_{2}+\\dot q_{3}=0$，对于任意实数 $u,v$，该式对 $\\dot q=(u,v,v)$ 均成立。\n\n非完整动力学 (拉格朗日-达朗贝尔)：\n对于一个理想线性速度约束 $A(q)\\dot q=0$，带有乘子 $\\mu(t)\\in\\mathbb{R}$ 的非完整方程形式为\n$$\n\\ddot q = A(q)^{T}\\mu,\n$$\n同时还有运动学约束及其相容性条件（通过对 $A(q)\\dot q=0$ 求导得到）：\n$$\nA(q)\\dot q=0,\\qquad A(q)\\ddot q+\\dot A(q)\\dot q=0.\n$$\n此处 $\\dot A(q)\\dot q$ 表示 $A(q)$ 的时间导数乘以 $\\dot q$。对于 $a(q)=(q_{2},-q_{1},1)$，其时间导数为\n$$\n\\dot a(q)=\\left(\\dot q_{2},\\,-\\dot q_{1},\\,0\\right),\n$$\n并且对于 $m=1$，相容性条件简化为\n$$\na(q)\\cdot\\ddot q+\\dot a(q)\\cdot\\dot q=0.\n$$\n使用 $\\ddot q = a(q)^{T}\\mu$ 可得\n$$\n\\mu\\,\\big(a(q)\\cdot a(q)\\big) + \\dot a(q)\\cdot\\dot q = 0\n\\;\\;\\Longrightarrow\\;\\;\n\\mu = -\\frac{\\dot a(q)\\cdot\\dot q}{|a(q)|^{2}}.\n$$\n在所选状态下，$a(q)=(0,-1,1)$ 所以 $|a(q)|^{2}=2$，且 $\\dot a(q)=(v,-u,0)$，因此\n$$\n\\dot a(q)\\cdot\\dot q = v\\,u + (-u)\\,v + 0\\cdot v = 0,\n$$\n这得出 $\\mu=0$。所以，\n$$\n\\ddot q_{\\mathrm{nh}} = a(q)^{T}\\mu = 0.\n$$\n\nVakonomic 动力学：\n在 vakonomic 表述中，增广拉格朗日量为 $\\mathcal{L}(q,\\dot q,\\lambda)=L(q,\\dot q)+\\lambda\\,a(q)\\cdot\\dot q$。关于 $q$ 的欧拉-拉格朗日方程是\n$$\n\\frac{d}{dt}\\left(\\frac{\\partial \\mathcal{L}}{\\partial \\dot q}\\right) - \\frac{\\partial \\mathcal{L}}{\\partial q} = 0.\n$$\n计算必要的导数：\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial \\dot q} = \\dot q + \\lambda\\,a(q),\\qquad\n\\frac{d}{dt}\\left(\\frac{\\partial \\mathcal{L}}{\\partial \\dot q}\\right) = \\ddot q + \\lambda\\,\\dot a(q) + \\dot\\lambda\\,a(q),\n$$\n以及\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial q} = \\lambda\\,\\frac{\\partial}{\\partial q}\\big(a(q)\\cdot\\dot q\\big) = \\lambda\\,B(q,\\dot q),\n$$\n其中矢量 $B(q,\\dot q)$ 的分量为\n$$\nB_{k}(q,\\dot q) = \\frac{\\partial}{\\partial q_{k}}\\big(a(q)\\cdot\\dot q\\big) = \\sum_{i=1}^{3}\\frac{\\partial a_{i}}{\\partial q_{k}}\\,\\dot q_{i}.\n$$\n以矩阵形式，如果 $D(q)=\\partial a/\\partial q$ 是元素为 $D_{ik}=\\partial a_{i}/\\partial q_{k}$ 的 $3\\times 3$ 雅可比矩阵，则 $B(q,\\dot q)=D(q)^{T}\\dot q$ 且 $\\dot a(q)=D(q)\\dot q$。因此 vakonomic 方程是\n$$\n\\ddot q + \\lambda\\,\\dot a(q) + \\dot\\lambda\\,a(q) - \\lambda\\,B(q,\\dot q) = 0\n\\;\\;\\Longrightarrow\\;\\;\n\\ddot q_{\\mathrm{vak}} = -\\lambda\\,\\dot a(q) - \\dot\\lambda\\,a(q) + \\lambda\\,B(q,\\dot q).\n$$\n此外，约束 $a(q)\\cdot\\dot q=0$ 对所有时间都成立；对其求导可得运动学相容性条件\n$$\na(q)\\cdot\\ddot q + \\dot a(q)\\cdot\\dot q = 0.\n$$\n代入 $\\ddot q_{\\mathrm{vak}}$ 以获得 $\\dot\\lambda$ 的表达式：\n$$\na(q)\\cdot\\big(-\\lambda\\,\\dot a(q) - \\dot\\lambda\\,a(q) + \\lambda\\,B(q,\\dot q)\\big) + \\dot a(q)\\cdot\\dot q = 0,\n$$\n该式简化为\n$$\n-\\dot\\lambda\\,|a(q)|^{2} + \\lambda\\big(a(q)\\cdot B(q,\\dot q) - a(q)\\cdot \\dot a(q)\\big) + \\dot a(q)\\cdot\\dot q = 0,\n$$\n因此\n$$\n\\dot\\lambda = \\frac{\\lambda\\big(a(q)\\cdot B(q,\\dot q) - a(q)\\cdot \\dot a(q)\\big) + \\dot a(q)\\cdot\\dot q}{|a(q)|^{2}}.\n$$\n\n在 $q=(1,0,0)$ 和 $\\dot q=(u,v,v)$ 处求值：\n计算 $a(q)=(q_{2},-q_{1},1)$ 的雅可比矩阵 $D(q)=\\partial a/\\partial q$：\n$$\nD(q)=\\begin{pmatrix}\n\\frac{\\partial a_{1}}{\\partial q_{1}}  \\frac{\\partial a_{1}}{\\partial q_{2}}  \\frac{\\partial a_{1}}{\\partial q_{3}} \\\\\n\\frac{\\partial a_{2}}{\\partial q_{1}}  \\frac{\\partial a_{2}}{\\partial q_{2}}  \\frac{\\partial a_{2}}{\\partial q_{3}} \\\\\n\\frac{\\partial a_{3}}{\\partial q_{1}}  \\frac{\\partial a_{3}}{\\partial q_{2}}  \\frac{\\partial a_{3}}{\\partial q_{3}}\n\\end{pmatrix}\n=\n\\begin{pmatrix}\n0  1  0\\\\\n-1  0  0\\\\\n0  0  0\n\\end{pmatrix}.\n$$\n因此在任意 $(q,\\dot q)$ 处，\n$$\n\\dot a(q)=D(q)\\dot q=\\big(\\dot q_{2},\\,-\\dot q_{1},\\,0\\big),\\qquad\nB(q,\\dot q)=D(q)^{T}\\dot q=\\big(-\\dot q_{2},\\,\\dot q_{1},\\,0\\big).\n$$\n在 $(q,\\dot q)=\\big((1,0,0),(u,v,v)\\big)$ 处，\n$$\na(q)=(0,-1,1),\\quad |a(q)|^{2}=2,\\quad \\dot a(q)=(v,-u,0),\\quad B(q,\\dot q)=(-v,u,0).\n$$\n此外，\n$$\n\\dot a(q)\\cdot\\dot q = v\\,u + (-u)\\,v + 0\\cdot v = 0,\\qquad\na(q)\\cdot B(q,\\dot q) = (0)(-v) + (-1)(u) + (1)(0) = -u,\n$$\n以及\n$$\na(q)\\cdot \\dot a(q) = (0)(v) + (-1)(-u) + (1)(0) = u.\n$$\n因此，\n$$\na(q)\\cdot B(q,\\dot q) - a(q)\\cdot \\dot a(q) = -u - u = -2u,\n$$\n并且乘子的演化方程为\n$$\n\\dot\\lambda = \\frac{\\lambda(-2u) + 0}{2} = -\\lambda\\,u.\n$$\n代入到 vakonomic 加速度表达式中：\n$$\n\\ddot q_{\\mathrm{vak}} = -\\lambda\\,(v,-u,0)\\;-\\;\\dot\\lambda\\,(0,-1,1)\\;+\\;\\lambda\\,(-v,u,0).\n$$\n使用 $\\dot\\lambda=-\\lambda u$，\n$$\n-\\dot\\lambda\\,(0,-1,1) = \\lambda u\\,(0,-1,1) = (0,-\\lambda u,\\lambda u),\n$$\n所以\n$$\n\\ddot q_{\\mathrm{vak}} = (-\\lambda v,\\,\\lambda u,\\,0) + (0,-\\lambda u,\\,\\lambda u) + (-\\lambda v,\\,\\lambda u,\\,0)\n= \\big(-2\\lambda v,\\;\\lambda u,\\;\\lambda u\\big).\n$$\n\n比较：\n我们得到 $\\ddot q_{\\mathrm{nh}}=0$ 和 $\\ddot q_{\\mathrm{vak}}=(-2\\lambda v,\\lambda u,\\lambda u)$。因此在指定状态下的差值为\n$$\n\\Delta\\ddot q \\;=\\; \\ddot q_{\\mathrm{vak}} - \\ddot q_{\\mathrm{nh}} \\;=\\; \\big(-2\\lambda v,\\;\\lambda u,\\;\\lambda u\\big).\n$$\n此结果完全用在状态 $q=(1,0,0)$、$\\dot q=(u,v,v)$ 处的 vakonomic 乘子 $\\lambda(t)$ 以及速度分量 $u$ 和 $v$ 来表示。",
            "answer": "$$\\boxed{\\begin{pmatrix}-2\\lambda v  \\lambda u  \\lambda u\\end{pmatrix}}$$"
        }
    ]
}
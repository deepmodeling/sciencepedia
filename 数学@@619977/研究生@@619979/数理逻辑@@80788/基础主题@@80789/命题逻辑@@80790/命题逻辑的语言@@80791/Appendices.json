{"hands_on_practices": [{"introduction": "在我们日常使用的中缀表示法中，括号是必不可少的，用以消除歧义。然而，逻辑和计算机科学中存在一种更为优雅的无括号表示法——波兰表示法（或称前缀表示法）。这个练习将引导你深入研究命题逻辑的句法结构，从定义一个将标准公式转换为波兰表示法的翻译函数开始。[@problem_id:2986347] 这个实践不仅能让你掌握结构归纳法这一核心证明技巧，还将通过证明波兰表示法的“无前缀”特性，揭示其无歧义解析的根本原因。", "problem": "设 $\\mathcal{L}$ 是标准命题逻辑语言，其拥有一组可数无限的命题变量 $\\mathsf{Var}$ 和一组原始联结词 $\\{\\neg,\\land,\\lor,\\to\\}$，其中 $\\neg$ 是一元的，而 $\\land,\\lor,\\to$ 均为二元的。合式公式集合 $\\mathsf{Fm}$ 是满足以下条件的最小集合：(i) 每个 $p \\in \\mathsf{Var}$ 都在 $\\mathsf{Fm}$ 中，(ii) 如果 $\\varphi \\in \\mathsf{Fm}$，则 $\\neg \\varphi \\in \\mathsf{Fm}$，以及 (iii) 如果 $\\varphi,\\psi \\in \\mathsf{Fm}$ 且 $\\circ \\in \\{\\land,\\lor,\\to\\}$，则 $(\\varphi \\circ \\psi) \\in \\mathsf{Fm}$。考虑字母表 $\\Sigma := \\mathsf{Var} \\cup \\{\\neg,\\land,\\lor,\\to\\}$ 以及由 $\\mathrm{ar}(p)=0$ (对于 $p \\in \\mathsf{Var}$)，$\\mathrm{ar}(\\neg)=1$ 和 $\\mathrm{ar}(\\land)=\\mathrm{ar}(\\lor)=\\mathrm{ar}(\\to)=2$ 决定的元数函数 $\\mathrm{ar}:\\Sigma \\to \\{0,1,2\\}$。\n\n1. 在 $\\mathsf{Fm}$ 上通过结构递归定义一个翻译 $P:\\mathsf{Fm} \\to \\Sigma^{\\ast}$，将其转换为去除所有括号的波兰（前缀）表示法。您的定义必须仅使用生成 $\\mathsf{Fm}$ 的归纳子句和 $\\mathrm{ar}$ 中的元数数据。\n\n2. 仅使用 $\\mathsf{Fm}$ 的归纳定义和您的翻译 $P$，从第一性原理证明波兰编码公式集 $P[\\mathsf{Fm}] \\subseteq \\Sigma^{\\ast}$ 是无前缀的，其意义如下：如果 $u,v \\in P[\\mathsf{Fm}]$ 且 $u$ 是 $v$ 的一个真前缀，那么这是不可能的。\n\n3. 设\n$$\nF \\;:=\\; \\bigl((\\neg p \\lor (q \\to r)) \\land (\\neg(s \\land t) \\to (p \\lor \\neg q))\\bigr) \\to \\bigl(r \\lor (\\neg p \\land (q \\to (s \\lor t)))\\bigr),\n$$\n其中 $p,q,r,s,t \\in \\mathsf{Var}$。计算 $P(F)$ 的符号长度，即字符串 $P(F)$（在 $\\Sigma$ 上）中的符号数量。以单个整数形式给出最终答案。无需四舍五入。", "solution": "此问题经评估为有效。它是一个数理逻辑领域内的良定问题，由定义、证明和计算三部分组成，全部基于命题逻辑和形式语言理论的标准概念。问题陈述是自洽、一致且有科学依据的。\n\n### 第一部分：波兰表示法翻译的定义\n\n将合式公式集 $\\mathsf{Fm}$ 翻译为字母表 $\\Sigma$ 上的符号串（波兰表示法）的转换 $P: \\mathsf{Fm} \\to \\Sigma^{\\ast}$ 是通过在 $\\mathsf{Fm}$ 的定义上进行结构递归来定义的。定义如下，其中右侧的符号并列表示字符串拼接。\n\n设 $\\varphi$ 为 $\\mathsf{Fm}$中的一个任意合式公式。$P(\\varphi)$ 的翻译根据 $\\varphi$ 的结构分情况定义如下：\n1.  **基本情形：** 如果 $\\varphi$ 是一个命题变量，即 $\\varphi \\in \\mathsf{Var}$，那么它的元数是 $\\mathrm{ar}(\\varphi)=0$。其翻译就是变量本身。\n    $$ P(\\varphi) := \\varphi $$\n2.  **归纳步骤（一元联结词）：** 如果对于某个 $\\psi \\in \\mathsf{Fm}$，$\\varphi$ 的形式为 $\\neg \\psi$，则其翻译为一元联结词 $\\neg$（其 $\\mathrm{ar}(\\neg)=1$）作为前缀，后接子公式 $\\psi$ 的翻译。\n    $$ P(\\neg \\psi) := \\neg P(\\psi) $$\n3.  **归纳步骤（二元联结词）：** 如果对于某些 $\\psi, \\chi \\in \\mathsf{Fm}$ 和一个二元联结词 $\\circ \\in \\{\\land, \\lor, \\to\\}$（其 $\\mathrm{ar}(\\circ)=2$），$\\varphi$ 的形式为 $(\\psi \\circ \\chi)$，则其翻译为二元联结词 $\\circ$作为前缀，后接子公式 $\\psi$ 和 $\\chi$ 的翻译的拼接。\n    $$ P((\\psi \\circ \\chi)) := \\circ P(\\psi) P(\\chi) $$\n\n这个定义完全指定了对 $\\mathsf{Fm}$ 中任何公式的翻译，并移除了所有括号，生成了一个波兰（前缀）表示法的字符串。\n\n### 第二部分：无前缀性质的证明\n\n我们要证明集合 $P[\\mathsf{Fm}] = \\{P(\\varphi) \\mid \\varphi \\in \\mathsf{Fm}\\}$ 是无前缀的。这意味着对于任意两个公式 $\\varphi, \\psi \\in \\mathsf{Fm}$，如果 $P(\\varphi)$ 是 $P(\\psi)$ 的一个真前缀，则会导致矛盾。\n\n为证明此点，我们首先建立 $P[\\mathsf{Fm}]$ 中字符串的一个关键性质，该性质与其构成符号的元数有关。设 $w = \\sigma_1 \\sigma_2 \\dots \\sigma_k$ 是 $\\Sigma^{\\ast}$ 中的一个字符串。我们定义 $w$ 的**平衡值**，记为 $\\beta(w)$，如下：\n$$ \\beta(w) := \\sum_{i=1}^{k} (\\mathrm{ar}(\\sigma_i) - 1) $$\n\n我们将通过对公式 $\\varphi$ 进行结构归纳来证明关于 $P[\\mathsf{Fm}]$ 中字符串的两个引理。\n\n**引理 1：** 对任意公式 $\\varphi \\in \\mathsf{Fm}$，其波兰翻译的平衡值为 $\\beta(P(\\varphi)) = -1$。\n\n*   **结构归纳法证明：**\n    *   **基本情形：** 设 $\\varphi = p$，其中 $p \\in \\mathsf{Var}$。则 $P(p) = p$。其平衡值为 $\\beta(p) = \\mathrm{ar}(p) - 1 = 0 - 1 = -1$。引理成立。\n    *   **归纳步骤（一元）：** 假设引理对公式 $\\psi \\in \\mathsf{Fm}$ 成立，即 $\\beta(P(\\psi)) = -1$。考虑公式 $\\varphi = \\neg \\psi$。其翻译为 $P(\\varphi) = \\neg P(\\psi)$。其平衡值为：\n        $$ \\beta(P(\\varphi)) = (\\mathrm{ar}(\\neg) - 1) + \\beta(P(\\psi)) = (1-1) + (-1) = -1 $$\n        引理对 $\\varphi = \\neg \\psi$ 成立。\n    *   **归纳步骤（二元）：** 假设引理对公式 $\\psi, \\chi \\in \\mathsf{Fm}$ 成立，即 $\\beta(P(\\psi)) = -1$ 和 $\\beta(P(\\chi)) = -1$。考虑公式 $\\varphi = (\\psi \\circ \\chi)$，其中 $\\circ \\in \\{\\land, \\lor, \\to\\}$。其翻译为 $P(\\varphi) = \\circ P(\\psi) P(\\chi)$。其平衡值为：\n        $$ \\beta(P(\\varphi)) = (\\mathrm{ar}(\\circ) - 1) + \\beta(P(\\psi)) + \\beta(P(\\chi)) = (2-1) + (-1) + (-1) = -1 $$\n        引理对 $\\varphi = (\\psi \\circ \\chi)$ 成立。\n\n根据结构归纳原理，引理 1 对所有 $\\varphi \\in \\mathsf{Fm}$ 均成立。\n\n**引理 2：** 对任意公式 $\\varphi \\in \\mathsf{Fm}$，$P(\\varphi)$ 的每个真前缀都有一个非负的平衡值。\n\n*   **结构归纳法证明：**\n    *   **基本情形：** 设 $\\varphi = p$，其中 $p \\in \\mathsf{Var}$。则 $P(p) = p$。此字符串没有真前缀。引理空泛地成立。\n    *   **归纳步骤（一元）：** 假设引理对公式 $\\psi \\in \\mathsf{Fm}$ 成立。设 $\\varphi = \\neg \\psi$，因此 $P(\\varphi) = \\neg P(\\psi)$。$P(\\varphi)$ 的一个真前缀要么是 $u = \\neg$，要么是形如 $u = \\neg v$ 的字符串，其中 $v$ 是 $P(\\psi)$ 的一个真前缀。\n        *   如果 $u = \\neg$，其平衡值为 $\\beta(\\neg) = \\mathrm{ar}(\\neg) - 1 = 1 - 1 = 0$。这是非负的。\n        *   如果 $u = \\neg v$，其平衡值为 $\\beta(u) = \\beta(\\neg) + \\beta(v) = 0 + \\beta(v)$。根据对 $\\psi$ 的归纳假设，由于 $v$ 是 $P(\\psi)$ 的一个真前缀，$\\beta(v) \\ge 0$。因此，$\\beta(u) \\ge 0$。\n    *   **归纳步骤（二元）：** 假设引理对公式 $\\psi, \\chi \\in \\mathsf{Fm}$ 成立。设 $\\varphi = (\\psi \\circ \\chi)$，因此 $P(\\varphi) = \\circ P(\\psi) P(\\chi)$。$P(\\varphi)$ 的一个真前缀 $u$ 可以具有以下形式之一：\n        1.  $u = \\circ$。平衡值：$\\beta(\\circ) = \\mathrm{ar}(\\circ) - 1 = 2 - 1 = 1 \\ge 0$。\n        2.  $u = \\circ v$，其中 $v$ 是 $P(\\psi)$ 的一个真前缀。平衡值：$\\beta(u) = \\beta(\\circ) + \\beta(v) = 1 + \\beta(v)$。根据对 $\\psi$ 的归纳假设，$\\beta(v) \\ge 0$，因此 $\\beta(u) \\ge 1 > 0$。\n        3.  $u = \\circ P(\\psi)$。平衡值：$\\beta(u) = \\beta(\\circ) + \\beta(P(\\psi)) = 1 + (-1) = 0$，此处使用了引理 1 中关于 $P(\\psi)$ 的结论。这是非负的。\n        4.  $u = \\circ P(\\psi) w$，其中 $w$ 是 $P(\\chi)$ 的一个真前缀。平衡值：$\\beta(u) = \\beta(\\circ) + \\beta(P(\\psi)) + \\beta(w) = 1 + (-1) + \\beta(w) = \\beta(w)$。根据对 $\\chi$ 的归纳假设，$\\beta(w) \\ge 0$，因此 $\\beta(u) \\ge 0$。\n\n在所有情况下，真前缀的平衡值都是非负的。根据结构归纳原理，引理 2 对所有 $\\varphi \\in \\mathsf{Fm}$ 均成立。\n\n**主证明：**\n现在我们可以证明 $P[\\mathsf{Fm}]$ 是无前缀的。为导出矛盾，我们假设存在两个不同的公式 $\\varphi_1, \\varphi_2 \\in \\mathsf{Fm}$，使得 $u = P(\\varphi_1)$ 是 $v = P(\\varphi_2)$ 的一个真前缀。\n*   由于 $u = P(\\varphi_1)$ 是一个来自 $P[\\mathsf{Fm}]$ 的公式翻译，根据引理 1，其平衡值为 $\\beta(u) = -1$。\n*   由于 $u$ 是 $v = P(\\varphi_2)$ 的一个真前缀（且 $v$ 在 $P[\\mathsf{Fm}]$ 中），根据引理 2，其平衡值必须是非负的：$\\beta(u) \\ge 0$。\n我们得出了矛盾 $-1 \\ge 0$。因此，我们的初始假设必定是错误的。$P[\\mathsf{Fm}]$ 中的任何字符串都不能是 $P[\\mathsf{Fm}]$ 中另一个字符串的真前缀。集合 $P[\\mathsf{Fm}]$ 是无前缀的。\n\n### 第三部分：符号长度的计算\n\n我们需要计算 $P(F)$ 的符号长度，其中\n$$ F \\;:=\\; \\bigl((\\neg p \\lor (q \\to r)) \\land (\\neg(s \\land t) \\to (p \\lor \\neg q))\\bigr) \\to \\bigl(r \\lor (\\neg p \\land (q \\to (s \\lor t)))\\bigr) $$\n字符串 $P(\\varphi)$ 的长度，记为 $|P(\\varphi)|$，是其中来自 $\\Sigma$ 的符号数量。我们可以通过结构递归定义一个函数 $L(\\varphi) = |P(\\varphi)|$：\n*   $L(p) = 1$ 对于 $p \\in \\mathsf{Var}$。\n*   $L(\\neg \\psi) = 1 + L(\\psi)$。\n*   $L((\\psi \\circ \\chi)) = 1 + L(\\psi) + L(\\chi)$。\n\n这个递归定义表明，$L(\\varphi)$ 就是公式 $\\varphi$ 中符号（命题变量和联结词）的总数。因此，我们可以通过计算表达式 $F$ 中所有这些符号的数量来找到 $|P(F)|$。\n\n我们来计算 $F$ 中的联结词：\n*   主联结词是 $\\to$：$1$ 个。\n*   在前件 $\\bigl((\\neg p \\lor (q \\to r)) \\land (\\neg(s \\land t) \\to (p \\lor \\neg q))\\bigr)$ 中：\n    *   主联结词是 $\\land$：$1$ 个。\n    *   在其左子公式 $(\\neg p \\lor (q \\to r))$ 中：$\\lor, \\neg, \\to$（$3$ 个联结词）。\n    *   在其右子公式 $(\\neg(s \\land t) \\to (p \\lor \\neg q))$ 中：$\\to, \\neg, \\land, \\lor, \\neg$（$5$ 个联结词）。\n*   在后件 $\\bigl(r \\lor (\\neg p \\land (q \\to (s \\lor t)))\\bigr)$ 中：\n    *   主联结词是 $\\lor$：$1$ 个。\n    *   在其右子公式 $(\\neg p \\land (q \\to (s \\lor t)))$ 中：$\\land, \\neg, \\to, \\lor$（$4$ 个联结词）。\n\n联结词总数：$1 + 1 + 3 + 5 + 1 + 4 = 15$。\n\n现在我们来计算 $F$ 中命题变量的出现次数：\n*   在前件 $\\bigl((\\neg p \\lor (q \\to r)) \\land (\\neg(s \\land t) \\to (p \\lor \\neg q))\\bigr)$ 中：\n    *   在 $(\\neg p \\lor (q \\to r))$ 中：$p, q, r$（$3$ 个变量）。\n    *   在 $(\\neg(s \\land t) \\to (p \\lor \\neg q))$ 中：$s, t, p, q$（$4$ 个变量）。\n*   在后件 $\\bigl(r \\lor (\\neg p \\land (q \\to (s \\lor t)))\\bigr)$ 中：\n    *   $\\lor$ 左侧的变量 $r$：$1$ 个变量。\n    *   在 $(\\neg p \\land (q \\to (s \\lor t)))$ 中：$p, q, s, t$（$4$ 个变量）。\n\n变量出现总次数：$3 + 4 + 1 + 4 = 12$。\n\n$P(F)$ 的总符号长度是联结词数量与变量出现次数的总和。\n$$ |P(F)| = (\\text{联结词数量}) + (\\text{变量数量}) = 15 + 12 = 27 $$", "answer": "$$\n\\boxed{27}\n$$", "id": "2986347"}, {"introduction": "逻辑的核心任务之一是判断一个论证的有效性，即前提是否能从语义上蕴涵结论。要证明一个蕴涵关系不成立，最直接的方法是找到一个反例模型：一个使得所有前提为真而结论为假的赋值。本练习将让你亲手构建这样一个反例模型，以证明一个给定的蕴涵关系 $\\Gamma \\models \\varphi$ 不成立。[@problem_id:2986350] 更重要的是，你将学习一种通过传播约束来系统性地寻找反例模型的演绎方法，这不仅是精通逻辑语义的关键，也是通往自动定理证明和可满足性求解等高级领域的基石。", "problem": "考虑一个命题语言，其变量为 $p$、$q$、$r$、$s$、$t$、$u$ 和 $w$。令 $\\Gamma$ 为以下有限公式集合：\n- $p \\to (q \\lor r)$\n- $q \\to s$\n- $r \\to \\neg s$\n- $u \\leftrightarrow (p \\lor s)$\n- $t \\leftrightarrow (p \\land \\neg q)$\n- $w \\to (u \\land t)$\n\n令 $\\varphi$ 为公式 $s \\lor (t \\land w)$。仅使用命题逻辑语言的标准语义定义——赋值、满足和蕴涵——完成以下任务：\n1. 构造一个明确的真值指派 $v$，该指派是 $\\Gamma$ 的一个模型但证伪了 $\\varphi$，从而证明蕴涵关系 $\\Gamma \\models \\varphi$ 不成立。\n2. 解释一种系统性方法，该方法基于联结词的真值条件语义和蕴涵的定义，通过从要求 $\\varphi$ 为假以及 $\\Gamma$ 中的约束开始传播约束，来搜索反例模型。\n3. 计算满足 $\\Gamma$ 中所有公式且证伪 $\\varphi$ 的不同真值指派的确切数量。\n\n你的最终答案必须是作为一个单一实数值的确切计数。无需四舍五入，也没有单位。不要使用百分比；任何比例都必须表示为小数或分数。将所有推理步骤建立在命题逻辑的基本语义定义以及 $\\to$、$\\lor$、$\\land$、$\\neg$ 和 $\\leftrightarrow$ 的真值条件之上。", "solution": "该问题要求我们确定蕴涵关系 $\\Gamma \\models \\varphi$ 是否成立，如果不成立，则找出并计数其反例模型。一个真值指派（或赋值）$v$ 是蕴涵关系 $\\Gamma \\models \\varphi$ 的一个反例模型，当且仅当 $v$ 满足集合 $\\Gamma$ 中的每一个公式但证伪了公式 $\\varphi$。用语义术语来说，这意味着对于所有 $\\gamma \\in \\Gamma$ 都有 $v \\models \\gamma$，且 $v \\not\\models \\varphi$。找到这样一个反例模型就证明了该蕴涵关系不成立。任务是找到一个这样的模型，描述一种寻找它们的系统性方法，并计算这类模型的总数。\n\n前提集合是 $\\Gamma = \\{ p \\to (q \\lor r), q \\to s, r \\to \\neg s, u \\leftrightarrow (p \\lor s), t \\leftrightarrow (p \\land \\neg q), w \\to (u \\land t) \\}$。结论是 $\\varphi = s \\lor (t \\land w)$。命题变量是 $p, q, r, s, t, u, w$。\n\n一个反例模型必须满足 $\\Gamma$ 中的所有公式，并且还要满足 $\\varphi$ 的否定。因此，我们是在寻找公式集合 $\\Gamma \\cup \\{\\neg \\varphi\\}$ 的模型。\n\n寻找此类模型的系统性方法，正如问题第二部分所要求的，是基于一个迭代的约束传播过程，该过程根植于逻辑联结词的真值条件语义。我们从最强的约束开始，并将其结果传播到整个公式集合中。最直接的约束来自于要求 $\\varphi$ 为假。\n\n设 $v$ 是一个真值指派。条件 $v \\not\\models \\varphi$ 意味着 $v(\\varphi) = F$。\n$$v(s \\lor (t \\land w)) = F$$\n根据析取算子 ($\\lor$) 的语义定义，一个公式 $A \\lor B$ 为假，当且仅当 $A$ 和 $B$ 都为假。应用此规则，我们必须有：\n1. $v(s) = F$\n2. $v(t \\land w) = F$\n\n我们现在将第一个确定的推论 $v(s) = F$ 传播到 $\\Gamma$ 的公式中。\n\n从 $\\Gamma$ 中的 $\\gamma_2$，即 $q \\to s$：\n要使公式 $q \\to s$ 为真，而其后件 $s$ 为假，其前件 $q$ 必须为假。蕴含 ($\\to$) 的语义规则规定，$A \\to B$ 仅在 $A$ 为真且 $B$ 为假时才为假。因此，为了在 $v(s) = F$ 的情况下确保 $v(q \\to s) = T$，我们必须有：\n$$v(q) = F$$\n\n从 $\\Gamma$ 中的 $\\gamma_3$，即 $r \\to \\neg s$：\n当 $v(s) = F$ 时，公式 $\\neg s$ 变为真，即 $v(\\neg s) = T$。该蕴含式变为 $r \\to T$。一个后件为真的蕴含式总是为真，无论其前件的真值如何。因此，在给定 $v(s)=F$ 的情况下，该公式对 $r$ 的真值没有施加任何约束。$v(r)$ 可以是 $T$ 或 $F$。\n\n现在我们将已知值 $v(s)=F$ 和 $v(q)=F$ 传播到剩余的公式中。\n\n从 $\\Gamma$ 中的 $\\gamma_4$，即 $u \\leftrightarrow (p \\lor s)$：\n代入 $v(s) = F$，公式变为 $u \\leftrightarrow (p \\lor F)$。表达式 $p \\lor F$ 在语义上等价于 $p$。因此，该公式简化为 $u \\leftrightarrow p$。要使这个双条件式为真，$u$ 和 $p$ 必须具有相同的真值：\n$$v(u) = v(p)$$\n\n从 $\\Gamma$ 中的 $\\gamma_5$，即 $t \\leftrightarrow (p \\land \\neg q)$：\n代入 $v(q) = F$，我们有 $v(\\neg q) = T$。公式变为 $t \\leftrightarrow (p \\land T)$，它简化为 $t \\leftrightarrow p$。要使此式为真，$t$ 和 $p$ 必须具有相同的真值：\n$$v(t) = v(p)$$\n\n至此，我们已经确定对于任何反例模型 $v$：\n- $v(s) = F$\n- $v(q) = F$\n- $v(u) = v(p)$\n- $v(t) = v(p)$\n\n$q, s, t, u$ 的真值完全由 $p$ 的值决定。剩下待确定的变量是 $p, r, w$。我们现在分析对这些变量的剩余约束。\n\n$\\Gamma$ 中剩余的公式是 $\\gamma_1 = p \\to (q \\lor r)$ 和 $\\gamma_6 = w \\to (u \\land t)$。剩余的条件是 $v(t \\land w) = F$。\n\n让我们用已有的发现来简化这三个约束：\n- 对于 $\\gamma_1 = p \\to (q \\lor r)$：代入 $v(q)=F$，变为 $p \\to (F \\lor r)$，这等价于 $p \\to r$。所以，我们必须有 $v(p \\to r) = T$。\n- 对于 $\\gamma_6 = w \\to (u \\land t)$：代入 $v(u)=v(p)$ 和 $v(t)=v(p)$，变为 $w \\to (p \\land p)$，这等价于 $w \\to p$。所以，我们必须有 $v(w \\to p) = T$。\n- 对于条件 $v(t \\land w) = F$：代入 $v(t) = v(p)$，变为 $v(p \\land w) = F$。这等价于 $v(\\neg(p \\land w)) = T$。\n\n因此，问题简化为找到满足以下三个条件的 $(p, r, w)$ 赋值的数量：\n(A) $p \\to r$ 必须为真。\n(B) $w \\to p$ 必须为真。\n(C) $\\neg(p \\land w)$ 必须为真。\n\n我们可以根据独立变量 $p$ 可能的真值分情况进行分析。\n\n情况1：$v(p) = T$。\n- 条件 (A) $T \\to r$ 为真，仅当 $v(r)=T$。\n- 条件 (B) $w \\to T$ 总是为真，所以它对 $w$ 没有施加任何约束。\n- 条件 (C) $\\neg(T \\land w)$ 为真，仅当 $T \\land w$ 为假，这意味着 $v(w)=F$。\n综合这些，如果 $v(p)=T$，那么我们必须有 $v(r)=T$ 和 $v(w)=F$。这为 $(p,r,w)$ 产生一个解：$(T, T, F)$。\n\n这就提供了一个明确的反例模型，回答了问题的第一部分。\n让我们构造这个指派 $v_1$：\n- $v_1(p) = T$\n- $v_1(r) = T$\n- $v_1(w) = F$\n- 根据我们推导出的依赖关系：\n  - $v_1(s) = F$\n  - $v_1(q) = F$\n  - $v_1(u) = v_1(p) = T$\n  - $v_1(t) = v_1(p) = T$\n所以，明确的反例模型是 $v_1$，其中 $(p,q,r,s,t,u,w)$ 被指派为 $(T,F,T,F,T,T,F)$。检验可以验证此指派：$\\Gamma$ 中所有公式都为真，而 $\\varphi = s \\lor (t \\land w)$ 的值为 $F \\lor (T \\land F) = F$。因此，$\\Gamma \\not\\models \\varphi$。\n\n情况2：$v(p) = F$。\n- 条件 (A) $F \\to r$ 总是为真，所以它对 $r$ 没有施加任何约束。$v(r)$ 可以是 $T$ 或 $F$。\n- 条件 (B) $w \\to F$ 为真，仅当 $v(w)=F$。\n- 条件 (C) $\\neg(F \\land w)$ 总是为真，所以它对 $w$ 没有施加任何约束。\n综合这些，如果 $v(p)=F$，那么我们必须有 $v(w)=F$，而 $v(r)$ 可以是 $T$ 或 $F$。这为 $(p,r,w)$ 产生两个解：$(F, T, F)$ 和 $(F, F, F)$。\n\n这两种情况产生了另外两个反例模型：\n- 对于 $(p,r,w) = (F,T,F)$：该指派为 $(p,q,r,s,t,u,w) = (F,F,T,F,F,F,F)$。\n- 对于 $(p,r,w) = (F,F,F)$：该指派为 $(p,q,r,s,t,u,w) = (F,F,F,F,F,F,F)$。\n\n为了回答问题的第三部分，我们将所有情况的解的数量相加。\n- 情况1 ($v(p)=T$) 为 $(p,r,w)$ 提供了 $1$ 个有效指派。\n- 情况2 ($v(p)=F$) 为 $(p,r,w)$ 提供了 $2$ 个有效指派。\n\n不同反例模型的总数是这些互斥情况的解数之和，即 $1 + 2 = 3$。对于独立变量 $(p,r,w)$ 的这 $3$ 个指派中的每一个，都唯一地确定了一个满足 $\\Gamma$ 中所有公式并证伪 $\\varphi$ 的对所有 $7$ 个变量的完整指派。因此，恰好有 $3$ 个这样的反例模型。", "answer": "$$\n\\boxed{3}\n$$", "id": "2986350"}, {"introduction": "在掌握了如何分析单个公式和公式间的关系后，我们可以提出一个更宏大的问题：对于一个包含有限变量的命题语言，它究竟能表达多少种不同的逻辑概念？这个练习要求你证明，在语义等价关系下，所有公式可以被划分为有限个等价类，并精确计算出这个数量。[@problem_id:2986358] 通过将公式的语义等价类与唯一的真值函数一一对应，你将能够推导出其精确数量为 $2^{2^n}$，从而量化整个命题语言的表达能力。这个练习完美地综合了句法和语义，是理解逻辑系统全局特性的一个绝佳实践。", "problem": "设 $\\mathcal{L}$ 是一个经典命题语言，它由一个有限的命题变量集合 $X$、联结词 $\\neg$、$\\land$ 和 $\\lor$ 以及括号构建而成。设 $|X| = n \\geq 1$。赋值是一个函数 $v : X \\to \\{0,1\\}$，它通过以下标准子句归纳地扩展到 $\\mathcal{L}$ 的所有公式 $\\varphi$：$v(\\neg \\varphi) = 1$ 当且仅当 $v(\\varphi) = 0$，$v(\\varphi \\land \\psi) = 1$ 当且仅当 $v(\\varphi) = 1$ 且 $v(\\psi) = 1$，以及 $v(\\varphi \\lor \\psi) = 1$ 当且仅当 $v(\\varphi) = 1$ 或 $v(\\psi) = 1$。如果对于任意赋值 $v$ 都有 $v(\\varphi) = v(\\psi)$，则称两个公式 $\\varphi$ 和 $\\psi$ 是语义等价的，记作 $\\varphi \\equiv \\psi$。\n\n根据这些核心定义证明，对于固定的有限变量集 $X$，所有公式的集合关于关系 $\\equiv$ 的商集基数是有限的。然后，计算等价类的确切数量，并表示为 $n$ 的一个显式函数。你的最终答案应以 $n$ 的单个封闭形式表达式给出；无需取整。", "solution": "本题要求我们证明命题公式的语义等价类的数量是有限的，并将此确切数量计算为命题变量数量 $n$ 的函数。\n\n设 $X = \\{p_1, p_2, \\dots, p_n\\}$ 是 $n$ 个命题变量的集合，其中 $n \\geq 1$。\n赋值是一个函数 $v: X \\to \\{0, 1\\}$，它为每个命题变量赋予一个真值（$0$ 代表假或 $1$ 代表真）。由于有 $n$ 个变量，每个变量可以被赋予两个值之一，因此不同赋值的总数为 $2^n$。设 $\\mathcal{V}$ 表示所有可能赋值的集合；其基数为 $|\\mathcal{V}| = 2^n$。\n\n语言 $\\mathcal{L}$ 中任意公式 $\\varphi$ 的语义完全由其在所有可能赋值下的真值确定。我们可以用一个真值函数 $f_\\varphi: \\mathcal{V} \\to \\{0, 1\\}$ 来表示此语义内容，其定义为对于每个赋值 $v \\in \\mathcal{V}$，都有 $f_\\varphi(v) = v(\\varphi)$。此函数将对变量的每一种可能的真值指派映射到公式 $\\varphi$ 的最终真值。\n\n题目将语义等价 $\\varphi \\equiv \\psi$ 定义为对于任意赋值 $v$，都有 $v(\\varphi) = v(\\psi)$ 的条件。用真值函数的术语来说，这等价于对于所有 $v \\in \\mathcal{V}$ 都有 $f_\\varphi(v) = f_\\psi(v)$ 的条件。这意味着两个公式语义等价当且仅当它们定义了完全相同的真值函数：\n$$ \\varphi \\equiv \\psi \\iff f_\\varphi = f_\\psi $$\n这在公式的语义等价类集合与可实现的真值函数集合之间建立了一一对应关系。一个等价类 $[\\varphi]_{\\equiv}$ 映射到唯一的真值函数 $f_\\varphi$。\n\n首先，我们证明等价类的数量是有限的。\n等价类的数量等于可以由 $\\mathcal{L}$ 中的公式表示的不同真值函数的数量。所有可能的真值函数的集合是从 $\\mathcal{V}$ 到 $\\{0, 1\\}$ 的所有函数的集合。这些函数的定义域是 $\\mathcal{V}$，其大小为 $|\\mathcal{V}| = 2^n$。值域是 $\\{0, 1\\}$，其大小为 $2$。\n从一个大小为 $A$ 的集合到一个大小为 $B$ 的集合的不同函数的总数是 $B^A$。在我们的情况下，可能的真值函数的总数是 $2^{|\\mathcal{V}|} = 2^{(2^n)}$。\n由于任何公式都对应于这些真值函数之一，因此不同等价类的数量不能超过可能真值函数的总数。由于 $n$ 是一个有限整数（$n \\geq 1$），$2^n$ 是一个有限整数，$2^{(2^n)}$ 也是一个有限整数。这证明了语义等价类的数量是有限的。\n\n接下来，我们计算这些等价类的确切数量。\n我们已经表明存在 $2^{(2^n)}$ 个可能的真值函数。为证明等价类的数量恰好是这个数，我们必须证明每个可能的真值函数 $f: \\mathcal{V} \\to \\{0, 1\\}$ 都可以由语言 $\\mathcal{L}$ 中的某个公式 $\\varphi$ 表示。也就是说，对于每个函数 $f$，都存在一个公式 $\\varphi$ 使得 $f_\\varphi = f$。这是联结词集合 $\\{\\neg, \\land, \\lor\\}$ 的功能完备性。\n\n我们可以通过证明任何真值函数都可以用析取范式 (DNF) 表示来构造性地证明这一点，析取范式只使用联结词 $\\neg$、$\\land$ 和 $\\lor$。\n设 $f: \\mathcal{V} \\to \\{0, 1\\}$ 是一个任意的真值函数。\n\n情况1：函数 $f$ 是恒为零的函数，即对于所有 $v \\in \\mathcal{V}$，有 $f(v) = 0$。\n该函数可由任何矛盾式实现。由于 $n \\geq 1$，至少存在一个变量 $p_1 \\in X$。公式 $\\varphi = p_1 \\land \\neg p_1$ 是一个矛盾式，因此对于所有赋值 $v$，都有 $v(\\varphi) = 0$。于是，$f_\\varphi = f$。\n\n情况2：函数 $f$ 不是恒为零的函数。\n这意味着至少存在一个赋值，使得 $f$ 的值为 $1$。设 $\\mathcal{V}_1 = \\{v \\in \\mathcal{V} \\mid f(v) = 1\\}$。此集合非空。\n对于 $\\mathcal{V}_1$ 中的每个赋值 $v_j$，我们可以构造一个称为极小项的公式 $\\chi_j$，该公式为真当且仅当各变量根据 $v_j$ 被赋予真值。极小项 $\\chi_j$ 是文字（一个变量或其否定）的合取：\n$$ \\chi_j = L_1 \\land L_2 \\land \\dots \\land L_n $$\n其中对于每个 $i \\in \\{1, \\dots, n\\}$，如果 $v_j(p_i) = 1$，则文字 $L_i$ 是 $p_i$；如果 $v_j(p_i) = 0$，则 $L_i$ 是 $\\neg p_i$。根据构造，对于任何赋值 $v_k \\in \\mathcal{V}$，$v_k(\\chi_j) = 1$ 当且仅当 $v_k = v_j$。\n\n现在，我们可以通过对 $\\mathcal{V}_1$ 中所有赋值对应的极小项取析取，来构造一个实现函数 $f$ 的公式 $\\varphi_f$：\n$$ \\varphi_f = \\bigvee_{v_j \\in \\mathcal{V}_1} \\chi_j $$\n对于任何赋值 $v_k \\in \\mathcal{V}$，值 $v_k(\\varphi_f)$ 为 $1$ 当且仅当 $v_k$ 使得至少一个析取项 $\\chi_j$ 为真。这发生当且仅当存在一个 $v_j \\in \\mathcal{V}_1$ 使得 $v_k(\\chi_j) = 1$。如前所述，这为真当且仅当对于某个 $v_j \\in \\mathcal{V}_1$ 有 $v_k = v_j$。换句话说，$v_k(\\varphi_f) = 1$ 当且仅当 $v_k \\in \\mathcal{V}_1$。根据 $\\mathcal{V}_1$ 的定义，这等价于 $f(v_k) = 1$。因此，对于所有 $v_k \\in \\mathcal{V}$，都有 $v_k(\\varphi_f) = f(v_k)$。\n\n由于 DNF 构造只使用了 $\\mathcal{L}$ 中可用的联结词 $\\neg$、$\\land$ 和 $\\lor$，我们已经证明了每个真值函数 $f: \\mathcal{V} \\to \\{0, 1\\}$ 都可以由 $\\mathcal{L}$ 中的一个公式实现。\n\n这在语义等价类集合与 $n$ 个变量上所有可能的真值函数集合之间建立了一个双射（一个一一且映上的对应关系）。因此，等价类的数量等于真值函数的总数。\n\n如前计算，从一个大小为 $2^n$ 的定义域到一个大小为 $2$ 的值域的不同真值函数的数量是 $2^{(2^n)}$。\n\n因此，等价类的确切数量是 $2^{(2^n)}$。", "answer": "$$\n\\boxed{2^{2^n}}\n$$", "id": "2986358"}]}
{"hands_on_practices": [{"introduction": "我们从一个基本问题开始：对于两个给定的有限集合，它们之间究竟可以定义多少种不同的二元关系？这个练习将引导你从最第一性的原理出发，通过组合学的方法推导出这个数量。这个过程将加深你对关系作为笛卡尔积子集的本质性定义的理解，并锻炼你将抽象定义转化为具体计数问题的能力。[@problem_id:2981494]", "id": "2981494", "problem": "设 $X$ 和 $Y$ 为有限集。根据定义，从 $X$ 到 $Y$ 的一个二元关系 $R$ 是笛卡尔积 $X \\times Y$ 的一个子集，即 $R \\subseteq X \\times Y$。请仅从笛卡尔积和子集的定义，以及有限集的基本计数原理出发，推导出一个用 $|X|$ 和 $|Y|$ 表示的、从 $X$ 到 $Y$ 的所有不同二元关系总数的封闭式表达式。你的推导必须是纯粹组合性的：明确地构建一个基于这些定义的计数论证，并论证每一步。将你的最终答案表示为一个用 $|X|$ 和 $|Y|$ 表示的单一简化表达式。无需进行数值计算或四舍五入。", "solution": "该问题要求基于第一性原理，推导从有限集 $X$ 到有限集 $Y$ 的所有不同二元关系总数的封闭式表达式。\n\n设 $X$ 和 $Y$ 为有限集。这些集合的基数分别表示为 $|X|$ 和 $|Y|$。由于这些集合是有限的， $|X|$ 和 $|Y|$ 是非负整数。\n\n根据定义，从集合 $X$ 到集合 $Y$ 的二元关系 $R$ 是笛卡尔积 $X \\times Y$ 的一个子集。形式上， $R \\subseteq X \\times Y$。因此，计算从 $X$ 到 $Y$ 的不同二元关系总数的问题，等价于计算集合 $X \\times Y$ 的不同子集总数的问题。\n\n任何有限集 $S$ 的子集数量为 $2^{|S|}$，其中 $|S|$ 是 $S$ 的基数。为了应用这个原理，我们必须首先确定笛卡尔积的基数，即 $|X \\times Y|$。\n\n笛卡尔积 $X \\times Y$ 被定义为所有有序对 $(x, y)$ 的集合，其中 $x$ 是 $X$ 的一个元素，$y$ 是 $Y$ 的一个元素。用符号表示为，$X \\times Y = \\{ (x, y) \\mid x \\in X \\text{ and } y \\in Y \\}$。\n\n我们可以使用一个基本计数原理，即乘法法则，来确定 $X \\times Y$ 中的元素数量。要构造一个元素 $(x, y) \\in X \\times Y$，我们必须执行两个独立的任务：\n1.  从集合 $X$ 中选择一个元素 $x$。有 $|X|$ 种可能的选择。\n2.  从集合 $Y$ 中选择一个元素 $y$。有 $|Y|$ 种可能的选择。\n\n由于 $x$ 的选择和 $y$ 的选择是相互独立的，唯一的有序对 $(x, y)$ 的总数是每个分量选择数量的乘积。因此，笛卡尔积的基数是：\n$$|X \\times Y| = |X| \\cdot |Y|$$\n\n现在，我们回到计算集合 $X \\times Y$ 的子集数量的任务。令 $S = X \\times Y$。我们已经确定 $|S| = |X| \\cdot |Y|$。\n\n要构造 $S$ 的一个子集，我们必须对 $S$ 的每个元素做出一个决定。对于每个元素 $s \\in S$，都恰好有两种可能性：\n1.  元素 $s$ 包含在该子集中。\n2.  元素 $s$ 不包含在该子集中。\n\n这构成了对 $|S|$ 个元素中每一个的二元选择。对任何一个元素的决定都独立于对所有其他元素的决定。再次应用乘法法则，如果我们有 $|S|$ 个独立事件，每个事件有 $2$ 个可能的结果，那么不同组合结果的总数就是每个事件结果数量的乘积。\n\n子集总数 = $\\underbrace{2 \\times 2 \\times \\cdots \\times 2}_{|S| \\text{ 个因子}}$\n\n该乘积等于 $2^{|S|}$。\n\n代入 $|S| = |X \\times Y| = |X| \\cdot |Y|$，我们得出 $X \\times Y$ 的不同子集总数为 $2^{|X| \\cdot |Y|}$。\n\n由于 $X \\times Y$ 的每个子集都对应一个从 $X$ 到 $Y$ 的唯一二元关系，因此不同二元关系的总数恰好是这个数量。因此，从 $X$ 到 $Y$ 的不同二元关系总数的封闭式表达式为 $2^{|X| \\cdot |Y|}$。该推导过程纯粹基于关系作为子集的定义、笛卡尔积的定义以及组合计数原理。", "answer": "$$\\boxed{2^{|X| \\cdot |Y|}}$$"}, {"introduction": "在掌握了关系的基本概念后，我们来关注一类具有特殊重要性的关系：等价关系。这个问题要求你利用等价关系与集合划分之间的一一对应关系，通过直接对一个小型集合的所有划分进行分类计数，来确定等价关系的总数。这项练习不仅能让你熟练掌握等价类的概念，更能让你亲手验证和体会抽象结构与具体组合对象之间的深刻联系。[@problem_id:2981477]", "id": "2981477", "problem": "设 $X$ 是一个集合，其基数 $|X|=3$。一个二元关系 $E \\subseteq X \\times X$ 是等价关系当且仅当 $E$ 是自反的、对称的和传递的。集合 $X$ 的一个划分 $\\Pi$ 是 $X$ 的一些非空、两两不相交的子集的集合，其并集为 $X$。一个基本事实是，$X$ 上的等价关系与 $X$ 上的划分之间存在双射对应关系，该映射将每个等价关系映射到其等价类的集合，反之，将每个划分映射到“在同一区块中”的关系。\n\n从这些定义和所述的对应关系出发，通过直接从第一性原理计算 $X$ 的划分数量，来确定 $X$ 上不同等价关系的数量。不要引用现成的计数公式；通过基于区块大小的明确分类讨论来证明你的计数。你的最终答案必须是一个单一的整数。", "solution": "该问题要求确定在一个基数为 $|X|=3$ 的集合 $X$ 上不同等价关系的数量。问题陈述建立了 $X$ 上等价关系集合与 $X$ 上划分集合之间的双射对应关系。因此，任务简化为计算集合 $X$ 的不同划分的数量。这个计数必须通过分析划分的可能结构，从第一性原理进行。\n\n设 $X$ 是一个有 $3$ 个元素的集合。不失一般性，我们可以将其表示为 $X=\\{x_1, x_2, x_3\\}$。集合 $X$ 的一个划分是 $X$ 的一些非空、两两不相交的子集（称为区块）的集合，其并集为 $X$。任何划分中各区块的基数之和必须等于集合 $X$ 的基数，即 $3$。\n\n为了系统地计算所有可能的划分，我们可以根据其区块的大小对它们进行分类。这对应于找出数字 $3$ 的所有整数划分。一个正整数 $n$ 的整数划分是把 $n$ 写成一个或多个正整数之和的方式，其中加数的顺序无关紧要。数字 $3$ 的整数划分为：\n1. $3$\n2. $2+1$\n3. $1+1+1$\n\n我们现在对这些结构中的每一种进行分类讨论。\n\n情况1：一个大小为 $3$ 的区块。\n这种结构对应于整数划分 $3$。该划分必须由一个包含 $X$ 中所有 $3$ 个元素的单一区块组成。唯一这样的划分是 $\\{\\{x_1, x_2, x_3\\}\\}$。这对应于所有元素彼此相关的平凡等价关系。这种类型的划分恰好有 $1$ 个。\n\n情况2：一个大小为 $2$ 的区块和一个大小为 $1$ 的区块。\n这种结构对应于整数划分 $2+1$。要形成这种类型的划分，我们需要从集合 $X$ 中选择 $2$ 个元素来组成大小为 $2$ 的区块。剩下的 $1$ 个元素将自动形成大小为 $1$ 的区块。从一个 $3$ 元素的集合中选择 $2$ 个元素的方法数由二项式系数 $\\binom{3}{2}$ 给出。\n$$ \\binom{3}{2} = \\frac{3!}{2!(3-2)!} = \\frac{3!}{2!1!} = \\frac{3 \\times 2 \\times 1}{(2 \\times 1) \\times 1} = 3 $$\n三个不同的划分为：\n- $\\{\\{x_1, x_2\\}, \\{x_3\\}\\}$\n- $\\{\\{x_1, x_3\\}, \\{x_2\\}\\}$\n- $\\{\\{x_2, x_3\\}, \\{x_1\\}\\}$\n因此，这种类型的划分有 $3$ 个。\n\n情况3：三个大小为 $1$ 的区块。\n这种结构对应于整数划分 $1+1+1$。每个区块包含一个单一元素。对于集合 $X = \\{x_1, x_2, x_3\\}$，每个元素都必须在自己的区块中。这得到的划分是 $\\{\\{x_1\\}, \\{x_2\\}, \\{x_3\\}\\}$。由于划分是一个集合的集合，区块的顺序是无关紧要的。因此，只有一种方法可以形成这样的划分。这对应于恒等价关系，其中每个元素只与自身相关。这种类型的划分恰好有 $1$ 个。\n\n为了找到 $X$ 的总划分数，我们将所有可能情况的计数相加。\n总划分数 = (情况1的数量) + (情况2的数量) + (情况3的数量)。\n$$ \\text{Total} = 1 + 3 + 1 = 5 $$\n根据问题中陈述的双射关系，一个有 $3$ 个元素的集合上的不同等价关系的数量等于该集合的划分数量。因此，在 $X$ 上有 $5$ 个不同的等价关系。", "answer": "$$\\boxed{5}$$"}, {"introduction": "最后，我们转向偏序关系，这是一类在计算机科学和数学中无处不在的结构。本练习将探讨保持序结构的函数（即保序映射），并要求你计算从一个具体偏序集到一个简单的二元链的保序映射数量。解决这个问题的关键在于理解这些映射与偏序集的序理想（或序滤子）之间的等价性，这为你分析和量化偏序结构提供了有力的工具。[@problem_id:2981488]", "id": "2981488", "problem": "设 $P$ 是一个有限偏序集 (poset)，其底集为 $\\{a,b,c,d,e,f,g,h\\}$，其序关系是以下覆盖关系的自反和传递闭包：$a \\prec c$，$a \\prec d$，$b \\prec d$，$b \\prec e$，$c \\prec f$，$e \\prec f$，$d \\prec g$，$f \\prec h$，$g \\prec h$。这里 $x \\prec y$ 表示 $x<y$ 且不存在 $z$ 使得 $x<z<y$。设 $C_{2}=\\{0<1\\}$ 为二元链。\n\n仅使用偏序、保序（单调）函数、序理想（下集）和序滤子（上集）的基本定义，确定保序映射 $f:P\\to C_{2}$ 的数量，并从第一性原理出发，论证这些映射如何能与 $P$ 的序理想或序滤子等同。你的最终答案必须是一个整数。无需四舍五入。", "solution": "问题要求计算从一个给定的有限偏序集 (poset) $P$ 到二元链 $C_2$ 的保序映射的数量。题目还要求从第一性原理出发，为这类映射与 $P$ 的序理想或序滤子之间的对应关系提供论证。\n\n首先，我们建立映入 $C_2$ 的保序映射与 $P$ 的特定子集之间的基本联系。设偏序集为 $P$，其序关系记为 $\\le_P$。设 $C_2$ 是底集为 $\\{0, 1\\}$ 且序为 $0 < 1$ 的偏序集。\n\n一个保序映射（或单调函数）$f: P \\to C_2$ 的定义性质是：对于任意两个元素 $x, y \\in P$，如果 $x \\le_P y$，则 $f(x) \\le_{C_2} f(y)$。在 $C_2$ 的语境下，这意味着如果 $x \\le_P y$，则不可能出现 $f(x)=1$ 且 $f(y)=0$ 的情况。\n\n我们将证明，所有保序映射 $f: P \\to C_2$ 的集合与 $P$ 的所有序滤子的集合之间存在一个双射。$P$ 的一个序滤子（或上集）是一个子集 $U \\subseteq P$，满足：对于任意 $x \\in U$ 和任意 $y \\in P$，如果 $x \\le_P y$，则 $y \\in U$。\n\n设 $\\mathcal{F}$ 为所有从 $P$ 到 $C_2$ 的保序函数的集合，并设 $\\mathcal{U}(P)$ 为 $P$ 的所有序滤子的集合。\n\n考虑映射 $\\Phi: \\mathcal{F} \\to \\mathcal{U}(P)$，其定义为 $\\Phi(f) = f^{-1}(\\{1\\}) = \\{x \\in P \\mid f(x) = 1\\}$。我们必须证明，对于任意 $f \\in \\mathcal{F}$，集合 $U = \\Phi(f)$ 确实是一个序滤子。设 $x \\in U$ 且 $y \\in P$ 为满足 $x \\le_P y$ 的任意元素。根据 $U$ 的定义，$f(x) = 1$。由于 $f$ 是保序的，$x \\le_P y$ 意味着 $f(x) \\le_{C_2} f(y)$，即 $1 \\le_{C_2} f(y)$。在 $C_2$ 中，唯一大于或等于 $1$ 的元素是 $1$ 本身。因此，$f(y)=1$，这意味着 $y \\in U$。这满足了序滤子的定义。所以，$\\Phi$ 是良定义的。\n\n接下来，考虑如下定义的映射 $\\Psi: \\mathcal{U}(P) \\to \\mathcal{F}$：对于任意序滤子 $U \\in \\mathcal{U}(P)$，令 $\\Psi(U) = f_U$，其中 $f_U: P \\to C_2$ 是 $U$ 的特征函数，由下式给出：\n$$ f_U(x) = \\begin{cases} 1 & \\text{if } x \\in U \\\\ 0 & \\text{if } x \\notin U \\end{cases} $$\n我们必须证明 $f_U$ 是一个保序映射。设 $x, y \\in P$ 满足 $x \\le_P y$。我们需要证明 $f_U(x) \\le_{C_2} f_U(y)$。\n情况1：$f_U(x) = 0$。不等式 $0 \\le_{C_2} f_U(y)$ 总是成立的，因为 $f_U(y)$ 的值是 $0$ 或 $1$。\n情况2：$f_U(x) = 1$。根据 $f_U$ 的定义，这意味着 $x \\in U$。由于 $U$ 是一个序滤子且 $x \\le_P y$，根据滤子的定义，可以得出 $y \\in U$。因此，$f_U(y) = 1$。不等式 $1 \\le_{C_2} 1$ 成立。\n在这两种情况下，保序性质都得到满足。所以，$\\Psi$ 是良定义的。\n\n映射 $\\Phi$ 和 $\\Psi$ 互为逆映射。对于任意 $f \\in \\mathcal{F}$，$\\Psi(\\Phi(f))$ 是集合 $f^{-1}(\\{1\\})$ 的特征函数，这恰好是函数 $f$ 本身。对于任意 $U \\in \\mathcal{U}(P)$，$\\Phi(\\Psi(U))$ 是特征函数 $f_U$ 下 $\\{1\\}$ 的原像，这恰好是集合 $U$ 本身。因此，在保序映射 $f:P \\to C_2$ 的集合与 $P$ 的序滤子集合之间存在一个双射。\n\n通过考虑 $\\{0\\}$ 的原像 $I = f^{-1}(\\{0\\})$，一个类似的论证可以证明与序理想（或下集）$I$ 之间也存在双射。\n\n因此，问题被简化为计算偏序集 $P$ 的序滤子的数量。在一个有限偏序集中，其序滤子与反链之间存在一个众所周知的双射。反链是 $P$ 的一个子集，其中任意两个不同的元素都是不可比的。\n\n设 $U$ 是一个序滤子。$U$ 的极小元集合，记作 $\\min(U)$，是一个反链。如果 $x, y \\in \\min(U)$ 且 $x \\le_P y$，那么因为 $x \\in U$ 且 $U$ 是一个滤子，所以 $y \\in U$。但如果 $x < y$ 将与 $y$ 在 $U$ 中的极小性相矛盾。因此 $x=y$。\n反之，对于任意反链 $A \\subseteq P$，集合 $A^{\\uparrow} = \\{x \\in P \\mid \\exists a \\in A, a \\le_P x\\}$ 是一个序滤子。$A^\\uparrow$ 的极小元恰好是 $A$ 的元素。这就建立了一个双射。\n\n因此，保序映射的数量等于 $P$ 的反链的数量。我们接下来计算 $P$ 的反链数量。偏序集 $P$ 由元素集 $\\{a,b,c,d,e,f,g,h\\}$ 和覆盖关系 $a \\prec c$，$a \\prec d$，$b \\prec d$，$b \\prec e$，$c \\prec f$，$e \\prec f$，$d \\prec g$，$f \\prec h$，$g \\prec h$ 定义。该偏序集的哈斯图有一个唯一的极大元 $h$。\n\n设 $N(Q)$ 为偏序集 $Q$ 的反链数量。$P$ 的反链集合可以划分为包含极大元 $h$ 的和不包含极大元 $h$ 的两部分。\n如果一个反链包含 $h$，它就不能包含任何其他元素，因为所有其他元素 $x$ 都满足 $x <_P h$。因此，$\\{h\\}$ 是唯一包含 $h$ 的反链。\n不包含 $h$ 的反链恰好是子偏序集 $P' = P \\setminus \\{h\\}$ 的反链。\n所以，$N(P) = 1 + N(P')$。\n\n子偏序集 $P'$ 包含元素 $\\{a,b,c,d,e,f,g\\}$，其极大元为 $\\{f, g\\}$，这两个元素是不可比的。我们可以将 $P'$ 的反链划分为四个不相交的集合：\n1.  同时包含 $f$ 和 $g$ 的反链。设 $A$ 是这样一个反链。由于 $f,g \\in A$，$A$ 不能包含任何满足 $x \\le_P f$ 或 $x \\le_P g$ 的元素 $x$。小于 $f$ 或 $g$ 的元素集合是 $\\{a,b,c,d,e\\}$。因此，$A$ 中不能有其他元素。唯一这样的反链是 $\\{f,g\\}$。有 $1$ 个这样的反链。\n2.  包含 $f$ 但不包含 $g$ 的反链。这样一个反链 $A$ 的形式为 $\\{f\\} \\cup A_0$，其中 $A_0$ 是 $P'$ 中与 $f$ 不可比且不为 $g$ 的元素所构成的反链。在 $P'$ 中与 $f$ 有关系的元素是 $\\{a,b,c,e\\}$。$P'$ 中剩下的唯一元素是 $d$。$d$ 与 $f$ 不可比。因此 $A_0$ 必须是子偏序集 $\\{d\\}$ 的一个反链。$\\{d\\}$ 的反链有 $\\emptyset$ 和 $\\{d\\}$。这给了我们两个反链：$\\{f\\}$ 和 $\\{f,d\\}$。有 $2$ 个这样的反链。\n3.  包含 $g$ 但不包含 $f$ 的反链。这样一个反链 $A$ 的形式为 $\\{g\\} \\cup A_0$，其中 $A_0$ 是 $P'$ 中与 $g$ 不可比且不为 $f$ 的元素所构成的反链。在 $P'$ 中与 $g$ 有关系的元素是 $\\{a,b,d\\}$。剩下的元素是 $\\{c,e\\}$。$c$ 和 $e$ 与 $g$ 不可比，且彼此也不可比。因此 $A_0$ 必须是子偏序集 $\\{c,e\\}$ 的一个反链。$\\{c,e\\}$ 的反链有 $\\emptyset, \\{c\\}, \\{e\\}, \\{c,e\\}$。这给了我们四个反链：$\\{g\\}, \\{g,c\\}, \\{g,e\\}, \\{g,c,e\\}$。有 $4$ 个这样的反链。\n4.  既不包含 $f$ 也不包含 $g$ 的反链。这些恰好是子偏序集 $P'' = P' \\setminus \\{f,g\\} = \\{a,b,c,d,e\\}$ 的反链。\n\n我们需要计算 $N(P'')$。$P''$ 中的关系是 $a<c, a<d, b<d, b<e$。我们可以使用类似的递归计数方法。$P''$ 的极大元是 $c,d,e$。我们以元素 $d$ 为中心进行讨论。$P''$ 的反链或者包含 $d$，或者不包含 $d$。\n- 包含 $d$ 的 $P''$ 的反链：一个包含 $d$ 的反链 $A$ 不能包含与 $d$ 有关系的元素。这些元素是 $a$ 和 $b$。剩下的元素是 $\\{c,e\\}$，它们都与 $d$ 不可比。所以 $A = \\{d\\} \\cup A_0$，其中 $A_0$ 是 $\\{c,e\\}$ 的一个反链。如前所述，有 $4$ 个这样的反链 $A_0$。所以有 $4$ 个包含 $d$ 的 $P''$ 的反链：$\\{d\\}, \\{d,c\\}, \\{d,e\\}, \\{d,c,e\\}$。\n- 不包含 $d$ 的 $P''$ 的反链：这些是子偏序集 $P''' = P'' \\setminus \\{d\\} = \\{a,b,c,e\\}$ 的反链。$P'''$ 中的关系是 $a<c$ 和 $b<e$。注意 $\\{a,c\\}$ 和 $\\{b,e\\}$ 是不相交的元素集，并且它们之间没有关系。因此，$P'''$ 是两个二元链 $P_a=\\{a<c\\}$ 和 $P_b=\\{b<e\\}$ 的不交并。一个偏序集不交并的反链数是每个偏序集反链数的乘积。\n$P_a=\\{a<c\\}$ 的反链是 $\\emptyset, \\{a\\}, \\{c\\}$。共有 $3$ 个。\n$P_b=\\{b<e\\}$ 的反链是 $\\emptyset, \\{b\\}, \\{e\\}$。共有 $3$ 个。\n因此，$N(P''') = N(P_a) \\times N(P_b) = 3 \\times 3 = 9$。\n所以，$N(P'') = 4 (\\text{包含 } d) + 9 (\\text{不包含 } d) = 13$。\n\n现在我们可以计算 $N(P')$。\n$N(P') = 1 (\\text{包含 } f,g) + 2 (\\text{包含 } f, \\neg g) + 4 (\\text{包含 } g, \\neg f) + 13 (\\text{包含 } \\neg f, \\neg g) = 20$。\n\n最后，我们计算 $N(P)$。\n$N(P) = 1 + N(P') = 1 + 20 = 21$。\n\n从 $P$到 $C_2$ 的保序映射的数量等于 $P$ 的反链数量，即 21。", "answer": "$$\\boxed{21}$$"}]}
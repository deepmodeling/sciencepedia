{"hands_on_practices": [{"introduction": "我们的第一个实践练习为可数范畴性的世界提供了一个具体的切入点。通过计算稠密线性序中无参数可定义一元集的数量，您将直接接触到 Ryll-Nardzewski 定理在最简单情况 $n=1$ 下的推论。这项练习旨在建立对理论的句法属性（可定义性）与其模型对称性（自同构）之间深层联系的基础理解 [@problem_id:2970873]。", "problem": "设 $T$ 是可数语言 $\\{<\\}$ 中无端点的稠密线性序（DLO）的完备理论。设 $M \\models T$ 是一个可数模型。如果 $M$ 的一个一元子集是某个只有一个自由变元且不含参数的 $\\mathcal{L}$-公式 $\\varphi(x)$ 在 $M$ 中的实现集，则该子集称为无参数可定义集。设 $\\mathrm{Def}_{1}^{\\emptyset}(M)$ 表示 $M$ 中所有无参数可定义的一元子集的族。\n\n从模型论中可定义性和自同构不变性的核心定义出发，并仅使用无端点稠密线性序及其可数范畴性的公认性质，确定 $\\mathrm{Def}_{1}^{\\emptyset}(M)$ 的基数。你的最终答案必须是一个整数。此外，解释为什么你的计算结果与此情境下 $n=1$ 时的 Ryll-Nardzewski 定理（R-N 定理）相符。\n\n所考虑集合的定义中任何地方都不允许使用参数。无需四舍五入。", "solution": "该问题要求计算无端点稠密线性序理论（$T_{\\text{DLO}}$）的可数模型 $M$ 中，无参数可定义一元子集的集合的基数。\n\n理论 $T_{\\text{DLO}}$ 在语言 $\\mathcal{L}=\\{<\\}$ 中由以下公理定义：\n1.  $\\forall x \\neg(x < x)$ (反自反性)\n2.  $\\forall x \\forall y \\forall z ((x < y \\land y < z) \\to x < z)$ (传递性)\n3.  $\\forall x \\forall y (x < y \\lor x = y \\lor y < x)$ (全序性)\n4.  $\\forall x \\forall y (x < y \\to \\exists z (x < z \\land z < y))$ (稠密性)\n5.  $\\forall x \\exists y (y < x)$ (无最小元)\n6.  $\\forall x \\exists y (x < y)$ (无最大元)\n\n如果存在一个语言 $\\mathcal{L}=\\{<\\}$ 中的公式 $\\varphi(x)$，它只有一个自由变元 $x$ 且不含参数，使得 $S = \\{a \\in M \\mid M \\models \\varphi(a)\\}$，那么一元子集 $S \\subseteq M$ 就是无参数可定义的。我们需要找到所有这类集合构成的族 $\\mathrm{Def}_{1}^{\\emptyset}(M)$ 的基数。\n\n我们可以用两种方法解决这个问题：第一种是使用量词消去，第二种是使用自同构不变性。\n\n**方法一：使用量词消去**\n\n众所周知，理论 $T_{\\text{DLO}}$ 容许量词消去。这意味着语言 $\\mathcal{L}$ 中的任何公式 $\\psi(x_1, \\dots, x_k)$ 在 $T_{\\text{DLO}}$ 中都等价于一个无量词公式 $\\theta(x_1, \\dots, x_k)$。\n\n在我们的情况中，我们关心的是只有一个自由变元 $x$ 且不含参数的公式 $\\varphi(x)$。通过量词消去，任何这样的 $\\varphi(x)$ 都等价于一个无量词公式 $\\theta(x)$。在语言 $\\{<\\}$ 中，只有一个自由变元的无量词公式只能由包含变元 $x$ 的原子公式构成。唯一可能的原子公式是 $x=x$ 和 $x<x$。\n\n对于任何元素 $a \\in M$，公式 $x=x$ 恒为真。\n由于反自反性公理，对于任何元素 $a \\in M$，公式 $x<x$ 恒为假。\n\n任何其他只有一个自由变元 $x$ 的无量词公式都是这两个原子公式的布尔组合（例如，$(x=x) \\land \\neg(x<x)$）。由于 $x=x$ 等价于真（$\\top$），$x<x$ 等价于假（$\\bot$），任何这样的布尔组合在逻辑上都将等价于 $\\top$ 或 $\\bot$。\n\n-   如果 $\\varphi(x)$ 等价于一个真公式（如 $x=x$），那么它定义的集合是 $\\{a \\in M \\mid M \\models \\top\\}$，也就是整个模型 $M$。\n-   如果 $\\varphi(x)$ 等价于一个假公式（如 $x<x$），那么它定义的集合是 $\\{a \\in M \\mid M \\models \\bot\\}$，也就是空集 $\\emptyset$。\n\n因此，$M$ 中只有两个无参数可定义的一元子集：模型 $M$ 本身和空集 $\\emptyset$。这些子集的族是 $\\mathrm{Def}_{1}^{\\emptyset}(M) = \\{ \\emptyset, M \\}$。这个族的基数是 $2$。\n\n**方法二：使用自同构不变性**\n\n模型论的一个基本原则指出，任何无参数可定义的集合都必须在其结构的所有自同构下保持不变。也就是说，如果 $S \\subseteq M$ 是一个无参数可定义的集合，并且 $f: M \\to M$ 是 $M$ 的一个自同构，那么 $f(S) = S$。\n\n理论 $T_{\\text{DLO}}$ 是 $\\aleph_0$-范畴的。这意味着其所有可数模型都是同构的。根据 Cantor 的一个经典定理，任何无端点的可数稠密线性序都与具有通常序的有理数集 $(\\mathbb{Q}, <)$ 同构。因此，我们可以不失一般性地令 $M$ 为 $(\\mathbb{Q}, <)$。\n\n众所周知，$(\\mathbb{Q}, <)$ 的自同构群，记作 $\\mathrm{Aut}(\\mathbb{Q}, <)$，在集合 $\\mathbb{Q}$ 上是传递地作用的。这意味着对于任意两个元素 $a, b \\in \\mathbb{Q}$，都存在一个自同构 $f \\in \\mathrm{Aut}(\\mathbb{Q}, <)$ 使得 $f(a) = b$。\n\n设 $S \\subseteq M$ 是一个无参数可定义的一元子集。\n-   情况1：$S$ 非空。设 $a$ 是 $S$ 中的一个元素。对于 $M$ 中任何其他元素 $b$，因为 $\\mathrm{Aut}(M)$ 是传递的，所以存在一个自同构 $f: M \\to M$ 使得 $f(a) = b$。由于 $S$ 在 $f$ 下是不变的，我们有 $f(S)=S$。因为 $a \\in S$，所以必然有 $f(a) \\in f(S)$，即 $b \\in S$。由于 $b$ 是 $M$ 的任意元素，因此 $S$ 必须包含 $M$ 的所有元素。所以，如果 $S \\neq \\emptyset$，那么 $S=M$。\n-   情况2：$S$ 为空。空集 $\\emptyset$ 总是可定义的（例如，通过公式 $x<x$），并且在任何自同构下都是平凡不变的（$f(\\emptyset) = \\emptyset$）。\n\n综合这两种情况，唯一可能的无参数可定义的一元子集是 $\\emptyset$ 和 $M$。因此，$|\\mathrm{Def}_{1}^{\\emptyset}(M)| = 2$。\n\n**与 Ryll-Nardzewski 定理的一致性**\n\nRyll-Nardzewski（R-N）定理指出，对于一个具有可数语言的完备理论 $T$，以下各项是等价的：\n1.  $T$ 是 $\\aleph_0$-范畴的。\n2.  对于每个自然数 $n$，任何可数模型 $M \\models T$ 的自同构群 $\\mathrm{Aut}(M)$ 在 $M^n$上只有有限个轨道。\n3.  对于每个自然数 $n$，空集上的完备 $n$-型空间 $S_n(\\emptyset)$ 是有限的。\n\n我们已知 $T=T_{\\text{DLO}}$ 是可数范畴的。R-N 定理将此性质与型和轨道的数量联系起来。对于 $n=1$，该定理意味着 $|S_1(\\emptyset)|$ 是有限的。\n\n集合 $S_n(\\emptyset)$ 是空集上的完备 $n$-型的集合。这里有一个深层的联系：两个 $n$-元组 $\\bar{a}, \\bar{b} \\in M^n$ 实现相同的空集上的完备型，当且仅当存在一个自同构 $f \\in \\mathrm{Aut}(M)$ 使得 $f(\\bar{a}) = \\bar{b}$。换句话说，空集上的完备 $n$-型的数量 $|S_n(\\emptyset)|$ 正是在 $\\mathrm{Aut}(M)$ 的作用下 $M^n$ 中 $n$-元组的轨道数量。\n\n对于我们的问题，我们考虑 $n=1$。我们已经确定 $\\mathrm{Aut}(M)$ 在 $M$ 上是传递地作用的。这意味着在 $M$ 中只有 $1$-元组（元素）的一个轨道。这个轨道就是 $M$ 本身。因此，空集上的完备 $1$-型的数量是 $|S_1(\\emptyset)| = 1$。\n\n与可定义集的联系如下：$M^n$ 的所有无参数可定义子集构成一个布尔代数。这个布尔代数的原子恰好是 $\\mathrm{Aut}(M)$ 作用下 $n$-元组的轨道。由于 $T$ 是 $\\aleph_0$-范畴的，这样的轨道只有有限个，设为 $k = |S_n(\\emptyset)|$。任何无参数可定义的集合都是这些轨道的有限并集。具有 $k$ 个原子的有限布尔代数中集合的总数是 $2^k$。\n\n因此，无参数可定义的 $n$-子集的数量是 $2^{|S_n(\\emptyset)|}$。\n\n对于我们 $n=1$ 的情况：\n-   轨道的数量是 $|S_1(\\emptyset)| = 1$。\n-   无参数可定义的一元子集的数量是 $2^{|S_1(\\emptyset)|} = 2^1 = 2$。\n\n这个从 R-N 定理推导出的结果，与我们直接计算出的 $|\\mathrm{Def}_{1}^{\\emptyset}(M)|=2$ 完全相符。这两个可定义集对应于由单个轨道 $M$ 生成的布尔代数的两个元素：空并集（$\\emptyset$）和轨道本身（$M$）。", "answer": "$$\\boxed{2}$$", "id": "2970873"}, {"introduction": "在基础案例之上，这项练习旨在挑战您将对一元类型的理解推广到 $n$-元类型。您将对 $\\mathbb{Q}^n$ 上的自同构轨道进行刻画，并推导出其数量，从而揭示其与被称为有序划分的组合对象之间的迷人联系。这项实践对于理解 Ryll-Nardzewski 定理如何将自同构群的代数结构与类型的组合复杂性联系起来至关重要 [@problem_id:2970877]。", "problem": "设 $(\\mathbb{Q},<)$ 表示可数无端点稠密线性序，并设 $G=\\operatorname{Aut}(\\mathbb{Q},<)$ 是其保序自同构群，对角作用于 $\\mathbb{Q}^{n}$。对于一个固定的 $n \\in \\mathbb{N}$，考虑将 $\\mathbb{Q}^{n}$ 划分为 $G$-轨道。仅使用核心定义和已验证的事实，包括自同构轨道的定义、空集上的完备 $n$-型 $S_{n}(\\emptyset)$ 的概念、无端点稠密线性序 (DLO) 的量词消去性，以及刻画可数范畴性的 Engeler–Ryll-Nardzewski–Svenonius 定理（也称为 Ryll-Nardzewski 定理），从第一性原理出发推导：\n\n1. 用线性序中元组固有的组合数据来刻画 $\\mathbb{Q}^{n}$ 上的 $G$-轨道。\n2. 用第二类斯特林数 $\\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\}$ 和阶乘表示的 $\\mathbb{Q}^{n}$ 上 $G$-轨道数量的闭式表达式。\n3. 解释为何此轨道计数与 $\\lvert S_{n}(\\emptyset)\\rvert$ 一致。\n\n你的最终答案必须是 $\\mathbb{Q}^{n}$ 上 $G$-轨道数量的单个闭式解析表达式，用 $n$、第二类斯特林数和阶乘写出。不要在最终答案中提供任何中间公式；只给出最终的表达式。", "solution": "设 $\\bar{a} = (a_1, a_2, \\dots, a_n)$ 和 $\\bar{b} = (b_1, b_2, \\dots, b_n)$ 是 $\\mathbb{Q}^{n}$ 中的两个元组。根据定义, $\\bar{a}$ 和 $\\bar{b}$ 属于群 $G = \\operatorname{Aut}(\\mathbb{Q},<)$ 的同一轨道，当且仅当存在一个保序自同构 $g \\in G$ 使得 $g(\\bar{a}) = \\bar{b}$。这意味着对所有 $i \\in \\{1, 2, \\dots, n\\}$ 都有 $g(a_i) = b_i$。\n\n**1. $\\mathbb{Q}^{n}$ 上 $G$-轨道的刻画**\n\n$(\\mathbb{Q},<)$ 的一个自同构 $g$ 是一个从 $\\mathbb{Q}$ 到 $\\mathbb{Q}$ 的保序关系的双射。因此，如果 $g(\\bar{a})=\\bar{b}$，那么对于任意一对下标 $i, j \\in \\{1, 2, \\dots, n\\}$，以下关系必须成立：\n- $a_i = a_j \\iff g(a_i) = g(a_j) \\iff b_i = b_j$\n- $a_i < a_j \\iff g(a_i) < g(a_j) \\iff b_i < b_j$\n- $a_i > a_j \\iff g(a_i) > g(a_j) \\iff b_i > b_j$\n\n在纯序语言 $\\{<\\}$ 中，元组 $\\bar{a}$ 各分量上的这组关系完全确定了 $\\bar{a}$ 的空集上的无量词型，记作 $\\mathrm{qftp}(\\bar{a}/\\emptyset)$。这些关系所捕捉的信息可以编码为下标集 $\\{1, 2, \\dots, n\\}$ 的一个**有序划分**。\n\n$\\{1, 2, \\dots, n\\}$ 的一个有序划分是一个非空不交集合的序列 $(P_1, P_2, \\dots, P_k)$，其并集为 $\\{1, 2, \\dots, n\\}$。对于一个元组 $\\bar{a} \\in \\mathbb{Q}^{n}$，我们可以如下定义其关联的有序划分：\n- 在 $\\{1, 2, \\dots, n\\}$ 上定义一个等价关系 $\\sim$，$i \\sim j$ 当且仅当 $a_i = a_j$。这将 $\\{1, 2, \\dots, n\\}$ 划分为等价类，记为 $C_1, \\dots, C_k$。\n- 令 $v_r$ 为所有 $i \\in C_r$ 对应的 $a_i$ 的公共值。这些不同值组成的集合 $\\{v_1, \\dots, v_k\\}$上存在一个严格线性序。设此序为 $v_{r_1} < v_{r_2} < \\dots < v_{r_k}$。\n- 与 $\\bar{a}$ 对应的有序划分是 $(P_1, P_2, \\dots, P_k)$，其中 $P_j = C_{r_j}$。\n\n例如，若 $n=4$ 且 $\\bar{a} = (3.1, -1, 5, 3.1)$，不同的值为 $-1 < 3.1 < 5$。下标 $2$ 对应 $-1$。下标 $1$ 和 $4$ 对应 $3.1$。下标 $3$ 对应 $5$。$\\{1, 2, 3, 4\\}$ 的划分是 $\\{\\{2\\}, \\{1, 4\\}, \\{3\\}\\}$。其有序划分是 $(\\{2\\}, \\{1, 4\\}, \\{3\\})$。\n\n我们已经证明，如果两个元组位于同一轨道，它们必须定义相同的有序划分。现在我们证明其逆命题。假设 $\\mathbb{Q}^{n}$ 中的 $\\bar{a}$ 和 $\\bar{b}$ 定义了相同的有序划分 $(P_1, \\dots, P_k)$。设 $\\{c_1 < c_2 < \\dots < c_k\\}$ 是 $\\bar{a}$ 中不同值组成的集合，其中对所有 $P_j$ 内的下标，$c_j$ 是其公共值。类似地，设 $\\{d_1 < d_2 < \\dots < d_k\\}$ 是 $\\bar{b}$ 中不同值组成的集合，其中对所有 $P_j$ 内的下标，$d_j$ 是其公共值。\n\n考虑由 $f_0(c_j) = d_j$ 定义的有限映射 $f_0: \\{c_1, \\dots, c_k\\} \\to \\{d_1, \\dots, d_k\\}$。这是一个在 $\\mathbb{Q}$ 的两个有限子集之间的保序双射。$(\\mathbb{Q},<)$ 的一个基本性质是它是**齐性的**：$\\mathbb{Q}$ 的任意两个有限子集之间的任何保序映射都可以扩展为 $(\\mathbb{Q},<)$ 的一个完整自同构。设 $g \\in G$ 是 $f_0$ 的这样一个扩展。\n\n对于任意 $i \\in \\{1, \\dots, n\\}$，如果 $i \\in P_j$，那么 $a_i = c_j$。应用 $g$，我们得到 $g(a_i) = g(c_j) = f_0(c_j) = d_j$。因为 $i \\in P_j$，根据 $\\bar{b}$ 的有序划分的定义，有 $b_i = d_j$。因此，对所有 $i \\in \\{1, \\dots, n\\}$ 都有 $g(a_i) = b_i$，这意味着 $g(\\bar{a}) = \\bar{b}$。\n\n因此，两个元组 $\\bar{a}$ 和 $\\bar{b}$ 在同一个 $G$-轨道中，当且仅当它们定义了 $\\{1, 2, \\dots, n\\}$ 的同一个有序划分。这提供了所要求的刻画：$\\mathbb{Q}^{n}$ 上的 $G$-轨道与 $\\{1, 2, \\dots, n\\}$ 的所有有序划分的集合之间存在一一对应关系。\n\n**2. $G$-轨道数量的闭式表达式**\n\n为了求出 $G$-轨道的数量，我们必须计算集合 $\\{1, 2, \\dots, n\\}$ 的有序划分的数量。一个有序划分可以通过两步构建：\n1.  将集合 $\\{1, 2, \\dots, n\\}$ 划分为 $k$ 个非空不交子集（块），其中 $k$ 的取值范围可以从 $1$ 到 $n$。完成此步的方法数由第二类斯特林数给出，记作 $\\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\}$。\n2.  将这 $k$ 个块排成一个线性序。有 $k!$ 种方法来排列 $k$ 个不同的块。\n\n对于固定的块数 $k$，存在 $\\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\} k!$ 个有序划分。为了求出有序划分的总数，我们对所有可能的 $k$ 值进行求和，从 $k=1$（所有元素相等）到 $k=n$（所有元素互不相同）。\n\n因此, $\\mathbb{Q}^{n}$ 上 $G$-轨道的总数由以下和式给出：\n$$ \\sum_{k=1}^{n} \\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\} k! $$\n这个数也被称为第 $n$ 个有序贝尔数。\n\n**3. 与型数量 $|S_{n}(\\emptyset)|$ 的联系**\n\n无端点稠密线性序理论（记作 DLO）是一个完备理论。它（在同构意义下）唯一的可数模型是 $(\\mathbb{Q},<)$。一个标准的反覆论证（back-and-forth argument）表明，DLO 的任意两个可数模型都是同构的，这意味着 DLO 是一个 **$\\aleph_0$-范畴**理论。\n\nEngeler–Ryll-Nardzewski–Svenonius 定理揭示了 $\\aleph_0$-范畴性这一模型论性质与自同构群的代数结构之间的深刻联系。该定理的一个关键部分指出，对于一个具有可数模型 $M$ 的完备理论 $T$，$T$ 是 $\\aleph_0$-范畴的当且仅当对于每个自然数 $n$，$\\operatorname{Aut}(M)$ 在 $M^n$ 上的作用有有限个轨道。\n\n至关重要的是，该定理确立了对于一个 $\\aleph_0$-范畴理论，$\\operatorname{Aut}(M)$ 在 $M^n$ 上的轨道数恰好等于空集上的完备 $n$-型的数量，即 $|S_n(\\emptyset)|$。\n$$ |\\text{Orbits}(\\operatorname{Aut}(M), M^n)| = |S_n(\\emptyset)| $$\n其推理如下：\n- 同一轨道中的任意两个元组都是自同构的，因此它们必须满足完全相同的公式，从而实现相同的完备型。这给出了一个从轨道到型的映射。\n- 对于一个 $\\aleph_0$-范畴理论，任何实现相同完备型的两个元组都是自同构的。这是因为在此类理论中，对于任意模型 $M$，其有限生成子结构之间的任何部分初等映射都可以扩展为一个自同构。在具有量词消去性的 DLO 的情况下，完备型由其无量词部分决定。正如我们在第 1 部分中所示，具有相同无量词型的元组是自同构的，因为 $(\\mathbb{Q},<)$ 是齐性的。\n\nDLO 理论具有量词消去性，这意味着每个公式 $\\phi(x_1, \\dots, x_n)$ 都逻辑等价于一个无量词公式。这表明一个完备 $n$-型 $p \\in S_n(\\emptyset)$ 完全由它所包含的无量词公式集合决定。无量词公式是形如 $x_i=x_j$ 和 $x_i<x_j$ 的原子公式的布尔组合。一个元组 $\\bar{a}$ 对这些原子公式的满足情况，恰好定义了它的有序划分。\n\n因此，在空集上的完备 $n$-型、空集上的无量词 $n$-型以及 $\\{1, 2, \\dots, n\\}$ 的有序划分集合之间存在一一对应关系。因此，$\\mathbb{Q}^n$ 上的轨道数、$|S_n(\\emptyset)|$ 以及 $\\{1, 2, \\dots, n\\}$ 的有序划分数都相等。因此，在第 2 部分中推导出的组合计数就是 $|S_n(\\emptyset)|$ 的值。\n\n总而言之，$\\mathbb{Q}^{n}$ 上的 $G$-轨道数由第 $n$ 个有序贝尔数的公式给出。", "answer": "$$\n\\boxed{\\sum_{k=1}^{n} \\left\\{\\!\\!\\begin{array}{c} n \\\\ k \\end{array}\\!\\!\\right\\} k!}\n$$", "id": "2970877"}, {"introduction": "为了检验您理解的广度，这最后一个实践练习将焦点从稠密线性序转移到一个不同的基本结构：一个具有固定数量无限类的等价关系。通过计算该理论的 $n$-类型数量，您将看到相同的原理如何在一个新情境中应用，并导出一个不同但同样优美的组合结果。这项练习展示了 Ryll-Nardzewski 定理作为一种分类数学结构的工具所具有的强大功能和普适性 [@problem_id:2970887]。", "problem": "设 $\\mathcal{L}$ 是一个语言，它有一个二元关系符号 $E$ 和常数符号 $a_{1},\\dots,a_{k}$。考虑 $\\mathcal{L}$ 中的完备理论 $T_{k}$，其公理系统规定：$E$ 是一个等价关系，恰好有 $k$ 个等价类，每个等价类都是无限的，常数 $a_{1},\\dots,a_{k}$ 位于两两不同的 $E$-类中，并且每个元素都与 $a_{i}$ 中的恰好一个 $E$-等价。设 $\\mathfrak{C}\\models T_{k}$ 是一个充分饱和且齐性的模型（一个“怪兽模型”），并用 $S_{n}(\\emptyset)$ 表示空集上的完备 $n$-型的Stone空间。\n\n仅使用以下基础事实，推导基数 $\\lvert S_{n}(\\emptyset)\\rvert$ 作为 $n$ 和 $k$ 的函数的显式闭式解析表达式：\n\n- 空集上完备 $n$-型的定义，以及完备型与 $n$-元组在 $\\operatorname{Aut}(\\mathfrak{C})$ 作用下的轨道的等同关系。\n- Ryll-Nardzewski 定理（RNT），该定理指出，一个可数语言中的完备理论是 $\\aleph_{0}$-范畴的，当且仅当对每个 $n$, $S_{n}(\\emptyset)$ 都是有限的。\n- 组合学事实：第二类斯特林数 $\\left\\{ {n \\atop j} \\right\\}$ 计算了将集合 $\\{1,\\dots,n\\}$ 划分为 $j$ 个非空无标记块的方案数。\n\n你的推导应从这些原则出发，解释为什么 $T_{k}$ 中的完备 $n$-型对应于索引集 $\\{1,\\dots,n\\}$ 的集合划分，以及一个由 $a_{1},\\dots,a_{k}$ 决定的 $E$-类对这些块进行的 $k$-着色，然后计算这种型的总数。将最终答案表示为包含 $n$、$k$ 和 $\\left\\{ {n \\atop j} \\right\\}$ 的单一闭式表达式。无需舍入，也不涉及物理单位。假设 $n\\geq 1$ 和 $k\\geq 1$ 是固定的整数。", "solution": "此分析的基本原则是，理论 $T_k$ 的一个充分饱和且齐性的模型 $\\mathfrak{C}$ 提供了语法和语义之间的对应关系。对于这样的模型，空集上的完备 $n$-型的集合 $S_n(\\emptyset)$ 与 $\\mathfrak{C}$ 中元素构成的 $n$-元组在模型自同构群 $\\operatorname{Aut}(\\mathfrak{C})$ 作用下的轨道集合之间存在一一对应关系。也就是说， $|S_n(\\emptyset)| = |\\mathfrak{C}^n / \\operatorname{Aut}(\\mathfrak{C})|$。因此，我们的任务转化为一个组合问题：计算这些轨道的数量。\n\n一个 $n$-元组 $\\bar{b} = (b_1, \\dots, b_n)$（其中每个 $b_i \\in \\mathfrak{C}$）的轨道是集合 $\\{ \\sigma(\\bar{b}) \\mid \\sigma \\in \\operatorname{Aut}(\\mathfrak{C}) \\}$。为了计算轨道的数量，我们必须确定刻画它们的那些不变量性质。两个元组 $\\bar{b}$ 和 $\\bar{c}$ 在同一轨道中，当且仅当它们实现相同的完备型，这意味着它们在语言 $\\mathcal{L}$ 中满足所有无参数的相同公式。理论 $T_k$ 允许量词消去（这是关于该理论的一个标准结果），这意味着任何公式 $\\phi(x_1, \\dots, x_n)$ 都等价于原子公式的布尔组合。语言 $\\mathcal{L}$ 中的原子公式形如 $t_1 E t_2$，其中 $t_1$ 和 $t_2$ 是项。项可以是变量 $x_i$ 或常数 $a_l$。\n\n因此，一个 $n$-元组 $(b_1, \\dots, b_n)$ 的型完全由以下原子公式的真值确定：\n1.  对所有 $1 \\le i, j \\le n$，$b_i E b_j$。\n2.  对所有 $1 \\le i \\le n$ 和 $1 \\le l \\le k$，$b_i E a_l$。\n\n让我们分析这些公式所编码的结构信息。\n关系 $E$ 是一个等价关系。因此，所有形如 $b_i E b_j$ 的公式的真值集合在索引集 $\\{1, \\dots, n\\}$ 上定义了一个等价关系，其中 $i$ 等价于 $j$ 当且仅当 $b_i E b_j$。一个集合上的等价关系等同于将该集合划分为非空的块（即等价类）。设 $\\{1, \\dots, n\\}$ 的这个划分为 $P$。\n\n$T_k$ 的公理指出，每个元素都与常数 $a_1, \\dots, a_k$ 中的恰好一个 $E$-等价。这意味着对于任何元素 $b \\in \\mathfrak{C}$，存在唯一的 $l \\in \\{1, \\dots, k\\}$ 使得 $b E a_l$。这将 $\\mathfrak{C}$ 的论域划分为恰好 $k$ 个无限等价类，我们可以将其表示为 $C_l = [a_l]_E$。\n对于一个 $n$-元组 $(b_1, \\dots, b_n)$，如果 $b_i E b_j$，那么 $b_i$ 和 $b_j$ 必须属于同一个等价类 $C_l$。这意味着划分 $P$ 的单个块内的所有索引必须对应于属于 $\\mathfrak{C}$ 的同一个等价类的元素 $b_i$。\n\n因此，一个完备 $n$-型由两部分组合数据唯一确定：\n1.  将索引集 $\\{1, \\dots, n\\}$ 划分为若干个（比如 $j$ 个）非空块。\n2.  为这 $j$ 个块中的每一个指定 $k$ 个等价类 $\\{C_1, \\dots, C_k\\}$ 中的一个。\n\n现在我们可以枚举所有可能的此类配置。$n$-型的总数 $|S_n(\\emptyset)|$ 是对所有可能的块数 $j$，形成这样一种结构的方案数的总和。\n\n集合 $\\{1, \\dots, n\\}$ (其中 $n \\ge 1$) 的一个划分中的块数 $j$ 的范围可以从 $j=1$（所有索引都在一个块中的平凡划分）到 $j=n$（划分为单元素集）。\n\n对于一个固定的块数 $j$（$1 \\le j \\le n$），将集合 $\\{1, \\dots, n\\}$ 划分为恰好 $j$ 个非空、无标记块的方案数由第二类斯特林数给出，记作 $\\left\\{ {n \\atop j} \\right\\}$。\n\n对于任何具有 $j$ 个块的此类划分，比如 $\\{B_1, B_2, \\dots, B_j\\}$，我们必须将每个块 $B_m$ 分配给 $k$ 个等价类中的一个。这等价于定义一个从块的集合 $\\{B_1, \\dots, B_j\\}$ 到类的集合 $\\{C_1, \\dots, C_k\\}$ 的函数。因为有 $j$ 个块和 $k$ 个类，并且对每个块的选择是独立的，所以这样的函数数量为 $k^j$。需要注意的是，该分配函数不必是单射的；多个块可以映射到同一个等价类，这对应于一种由不同（非 $E$-等价）但仍位于同一个无限类中的元素构成的元组所实现的型。\n\n为求得型的总数，我们将选择划分的方案数乘以给其块分配类的方案数，然后对所有可能的 $j$ 值求和：\n$$|S_n(\\emptyset)| = \\sum_{j=1}^{n} (\\text{将 } \\{1,\\dots,n\\} \\text{ 划分为 } j \\text{ 个块的方案数}) \\times (j \\text{ 个块的类分配方案数})$$\n代入组合量，我们得到：\n$$|S_n(\\emptyset)| = \\sum_{j=1}^{n} \\left\\{ {n \\atop j} \\right\\} k^j$$\n\n此表达式即为空集上完备 $n$-型数量所求的闭式解析表达式。对于 $n \\geq 1$，第二类斯特林数 $\\left\\{ {n \\atop 0} \\right\\} = 0$，所以求和可以等价地从 $j=0$ 开始写：\n$$|S_n(\\emptyset)| = \\sum_{j=0}^{n} \\left\\{ {n \\atop j} \\right\\} k^j$$\n该和式被称为在 $k$ 处取值的第 $n$ 个Touchard多项式。对于任何固定的整数 $n$ 和 $k$，这个和的有限性与 Ryll-Nardzewski 定理是一致的，该定理预言对于像 $T_k$ 这样的任何 $\\aleph_0$-范畴理论，对所有 $n$，$|S_n(\\emptyset)|$ 都是有限的。", "answer": "$$\n\\boxed{\\sum_{j=1}^{n} \\left\\{ {n \\atop j} \\right\\} k^j}\n$$", "id": "2970887"}]}
{"hands_on_practices": [{"introduction": "共面积公式最直观的应用之一，是将其与通过积分横截面积来计算体积的经典方法（即卡瓦列里原理）联系起来。这个练习将引导你运用共面积公式，通过对一个抛物面体进行水平切片来计算其体积。在这个例子中，我们选择一个简单的函数 $g(x,y,z) = z$，其梯度大小 $|\\nabla g|$ 恒为 $1$，这使得公式得以简化，从而让我们可以专注于“切片”这一核心思想。[@problem_id:1449845]", "problem": "设 $\\mathbb{R}^3$ 中的一个区域 $E$ 由满足不等式 $x^2+y^2 \\le z \\le 1$ 的点 $(x,y,z)$ 集合所定义。你的任务是计算该区域的三维勒贝格测度（即体积）。\n\n你必须应用共面积公式，并使用函数 $g(x,y,z) = z$ 的等位集来解决此问题。共面积公式表述如下：对于一个合适的函数 $g: \\mathbb{R}^n \\to \\mathbb{R}$ 和一个勒贝格可测集 $E \\subset \\mathbb{R}^n$，以下等式对任意非负可测函数 $f$ 成立：\n$$ \\int_E f(x) \\, d\\mathcal{L}^n(x) = \\int_{\\mathbb{R}} \\left( \\int_{E \\cap g^{-1}(t)} \\frac{f(y)}{|\\nabla g(y)|} \\, d\\mathcal{H}^{n-1}(y) \\right) dt $$\n其中 $g^{-1}(t)$ 是 $g$ 对应于值 $t$ 的等位集，$\\mathcal{L}^n$ 是 $n$ 维勒贝格测度，而 $\\mathcal{H}^{n-1}$ 是 $(n-1)$ 维豪斯多夫测度（对于 $\\mathbb{R}^3$ 中的曲面，它对应于面积）。\n\n请以精确的符号表达式给出最终答案。", "solution": "我们希望通过共面积公式，使用 $g(x,y,z)=z$ 来计算集合 $E=\\{(x,y,z)\\in\\mathbb{R}^{3}: x^{2}+y^{2}\\leq z\\leq 1\\}$ 的体积。在 $\\mathbb{R}^{3}$ 上令 $f\\equiv 1$。在此情况下，共面积公式为\n$$\n\\int_{E} 1 \\, d\\mathcal{L}^{3} = \\int_{\\mathbb{R}} \\left( \\int_{E \\cap g^{-1}(t)} \\frac{1}{|\\nabla g(y)|} \\, d\\mathcal{H}^{2}(y) \\right) dt.\n$$\n我们计算可得 $|\\nabla g|=|\\nabla z|=1$。等位集 $g^{-1}(t)$ 是平面 $\\{(x,y,z): z=t\\}$。切片 $E\\cap g^{-1}(t)$ 由满足 $x^{2}+y^{2}\\leq t$ 和 $t\\leq 1$ 的点 $(x,y,t)$ 组成。由于 $x^{2}+y^{2}\\geq 0$，该切片仅在 $t\\geq 0$ 时非空。结合 $t\\leq 1$，外部积分的范围可简化为 $t\\in[0,1]$。\n\n在平面 $z=t$ 上，$(n-1)$ 维豪斯多夫测度 $\\mathcal{H}^{2}$ 与该平面上通常的二维勒贝格测度一致，所以\n$$\n\\int_{E \\cap g^{-1}(t)} \\frac{1}{|\\nabla g|} \\, d\\mathcal{H}^{2}\n= \\int_{\\{(x,y): x^{2}+y^{2}\\leq t\\}} 1 \\, dA\n= \\text{半径为 } \\sqrt{t} \\text{ 的圆盘的面积}\n= \\pi t,\n$$\n该积分当 $t\\in[0,1]$ 时等于 $\\pi t$，否则为0。因此，\n$$\n\\int_{E} 1 \\, d\\mathcal{L}^{3} = \\int_{0}^{1} \\pi t \\, dt = \\pi \\int_{0}^{1} t \\, dt = \\pi \\left[\\frac{t^{2}}{2}\\right]_{0}^{1} = \\frac{\\pi}{2}.\n$$\n因此，$E$ 的体积为 $\\frac{\\pi}{2}$。", "answer": "$$\\boxed{\\frac{\\pi}{2}}$$", "id": "1449845"}, {"introduction": "掌握了基本概念之后，我们来挑战一个更复杂的情形。在这个练习中，你将处理一个梯度并非恒定且具有临界点的函数 $g(x,y) = x^3 - 3x$。这个问题旨在展示共面积公式如何优雅地处理更复杂的水平集结构，例如当一个水平集由多个不相交的部分组成时。通过这个实践，你将更深入地理解梯度 $|\\nabla g|$ 在公式中作为雅可比行列式因子的几何意义。[@problem_id:1449839]", "problem": "考虑二维域 $D = [-2, 2] \\times [-2, 2]$。设函数 $g: D \\to \\mathbb{R}$ 定义为 $g(x, y) = x^3 - 3x$。\n\n你的任务是利用函数 $g(x,y)$ 水平集的共面积公式，计算积分\n$$I = \\int_D |3x^2 - 3| \\, dx \\, dy$$\n的值。\n\n请给出积分 $I$ 的精确数值。", "solution": "我们已知 $D=[-2,2]\\times[-2,2]$ 且 $g(x,y)=x^{3}-3x$。被积函数满足\n$$\n|3x^{2}-3|=\\left|\\frac{\\partial g}{\\partial x}\\right|=|\\nabla g(x,y)|,\n$$\n因为 $\\frac{\\partial g}{\\partial y}=0$。根据二维共面积公式，\n$$\n\\int_{D}|\\nabla g|\\,dx\\,dy=\\int_{\\mathbb{R}}\\mathcal{H}^{1}\\!\\left(D\\cap g^{-1}(t)\\right)\\,dt,\n$$\n其中 $\\mathcal{H}^{1}$ 表示一维豪斯多夫测度（长度）。\n\n因此，我们计算对于 $t\\in\\mathbb{R}$ 的水平集 $D\\cap g^{-1}(t)$ 的长度。因为 $g$ 只依赖于 $x$，在 $D$ 内的水平集 $g(x,y)=t$ 由满足方程\n$$\nx^{3}-3x=t,\n$$\n的 $x\\in[-2,2]$ 处的垂直线段组成，其中 $y\\in[-2,2]$。令 $h(x)=x^{3}-3x$。在 $[-2,2]$ 上, $h'(x)=3x^{2}-3$, 因此 $h$ 在 $[-2,-1]$ 上严格单调递增，在 $[-1,1]$ 上严格单调递减，在 $[1,2]$ 上严格单调递增。端点值为\n$$\nh(-2)=-2,\\quad h(-1)=2,\\quad h(1)=-2,\\quad h(2)=2,\n$$\n所以 $h$ 在 $[-2,2]$ 上的值域是 $[-2,2]$。\n\n因此：\n- 对于 $t\\in(-2,2)$，方程 $x^{3}-3x=t$ 在 $[-2,2]$ 内恰有三个不同的解，分别位于区间 $[-2,-1]$、 $[-1,1]$ 和 $[1,2]$ 中。因此，$D\\cap g^{-1}(t)$ 是三条垂直线段的并集，每条线段的长度为 $4$（因为 $y\\in[-2,2]$），所以\n$$\n\\mathcal{H}^{1}\\!\\left(D\\cap g^{-1}(t)\\right)=3\\times 4=12.\n$$\n- 对于 $t=\\pm 2$，在 $[-2,2]$ 内有两个不同的 $x$ 值（其中一个是二重根），形成两条长度为 $4$ 的垂直线段，因此 $\\mathcal{H}^{1}=8$。这些孤立点对积分没有影响。\n- 对于 $t\\notin[-2,2]$，在 $[-2,2]$ 内没有解，所以长度为 $0$。\n\n因此，根据共面积公式，\n$$\nI=\\int_{D}|3x^{2}-3|\\,dx\\,dy=\\int_{\\mathbb{R}}\\mathcal{H}^{1}\\!\\left(D\\cap g^{-1}(t)\\right)\\,dt=\\int_{-2}^{2}12\\,dt=12\\cdot 4=48.\n$$", "answer": "$$\\boxed{48}$$", "id": "1449839"}, {"introduction": "这个压轴练习将我们的视角从计算应用提升到共面积公式的理论基础。共面积公式的真正威力在于它不仅适用于光滑函数，也适用于更广泛的利普希茨函数。本题以欧几里得范数函数 $f(x) = \\|x\\|$ 为例，它在原点处不可微，借此探讨“几乎处处”可微性的重要概念。通过解决这个问题，你将验证该公式在非光滑情况下的有效性，并以一种深刻的方式重新推导出 $n$ 维球的体积公式，从而体会其理论的完备性与强大。[@problem_id:3034561]", "problem": "设 $n \\geq 2$ 且 $R>0$。考虑函数 $f:\\mathbb{R}^{n}\\to\\mathbb{R}$，其定义为 $f(x)=\\|x\\|$，其中 $\\|\\cdot\\|$ 表示欧几里得范数。\n\n(a) 验证 $f$ 是利普希茨函数但非 $C^{1}$ 类函数，并解释为什么梯度 $\\nabla f$ 在 $\\mathbb{R}^{n}$ 中几乎处处 (a.e.) 存在。显式地指出 $x\\neq 0$ 时的 $\\nabla f(x)$，并确定 $x\\neq 0$ 时的 $|\\nabla f(x)|$。\n\n(b) 在概念层面上，不引用任何预先给出的公式，描述将 $\\mathbb{R}^{n}$ 切分为 $f$ 的水平集时，如何在一个 $n$ 维积分被重写为赋予了 $(n-1)$ 维豪斯多夫测度 $\\mathcal{H}^{n-1}$ 的水平集族 $\\{f=t\\}$ 上的积分时，引入了由 $|\\nabla f|$ 决定的权重。你的解释应说明为什么密度 $|\\nabla f|$ 会自然出现，尽管 $f$ 在一个测度为零的集合上不是 $C^{1}$ 类函数。\n\n(c) 使用 (b) 部分的观点，计算积分\n$$\nJ(R,n)\\;=\\;\\int_{B_{R}(0)} |\\nabla f(x)|\\,\\mathrm{d}x,\n$$\n其中 $B_{R}(0)=\\{x\\in\\mathbb{R}^{n}:\\|x\\|\\le R\\}$。用 $n$、$R$、$\\pi$ 和伽马函数 $\\Gamma(\\cdot)$ 以闭合形式表示你的最终答案。你的最终答案必须是单一的解析表达式。不要提供任何数值近似值。", "solution": "(a) 我们分析函数 $f(x) = \\|x\\|$，其中 $x \\in \\mathbb{R}^n$，$n \\geq 2$。\n\n首先，我们验证 $f$ 是利普希茨连续的。对于任意 $x, y \\in \\mathbb{R}^n$，欧几里得范数的反向三角不等式表明 $|\\|x\\| - \\|y\\|| \\le \\|x-y\\|$。用我们的函数 $f$ 表示，即为 $|f(x) - f(y)| \\le 1 \\cdot \\|x-y\\|$。这就是利普希茨连续性的定义，利普希茨常数为 $L=1$。\n\n接着，我们证明 $f$ 不是 $C^1(\\mathbb{R}^n)$ 类函数。如果一个函数处处可微且其导数连续，则该函数为 $C^1$ 类。我们将证明 $f$ 在 $x=0$ 处不可微。函数 $f$ 在点 $x_0$ 的导数（如果存在）是一个线性映射 $Df(x_0)$，满足 $\\lim_{h\\to 0} \\frac{\\|f(x_0+h) - f(x_0) - Df(x_0)(h)\\|}{\\|h\\|} = 0$。在 $x_0=0$ 处，我们有 $f(0)=0$。如果导数存在，它必须是零映射，因为沿任意方向 $v$ 的方向导数将是 $\\lim_{t\\to 0} \\frac{\\|tv\\| - 0}{t} = \\|v\\|\\lim_{t\\to 0} \\frac{|t|}{t}$，该极限不存在。更正式地，考虑单位向量 $v \\in \\mathbb{R}^n$ 的路径 $h_t = tv$。\n在 $0$ 点沿方向 $v$ 的方向导数为：\n$$\n\\lim_{t \\to 0^+} \\frac{f(0+tv)-f(0)}{t} = \\lim_{t \\to 0^+} \\frac{\\|tv\\|}{t} = \\lim_{t \\to 0^+} \\frac{t\\|v\\|}{t} = \\|v\\|=1.\n$$\n然而，从负方向逼近：\n$$\n\\lim_{t \\to 0^-} \\frac{f(0+tv)-f(0)}{t} = \\lim_{t \\to 0^-} \\frac{\\|tv\\|}{t} = \\lim_{t \\to 0^-} \\frac{|t|\\|v\\|}{t} = \\lim_{t \\to 0^-} \\frac{-t\\|v\\|}{t} = -\\|v\\|=-1.\n$$\n由于方向导数依赖于逼近的方向（甚至对于固定的方向，从左侧和右侧的极限也不同），函数在 $x=0$ 处不可微。由于它在一点不可微，所以它不可能是 $C^1(\\mathbb{R}^n)$ 类函数。\n\n根据拉德马赫定理 (Rademacher's Theorem)，梯度 $\\nabla f$ 几乎处处 (a.e.) 存在。该定理指出，任何从 $\\mathbb{R}^n$到 $\\mathbb{R}^m$ 的利普希茨函数关于勒贝格测度几乎处处可微。由于我们已经证明 $f$ 是利普希茨的，所以它几乎处处可微。唯一的不可微点是 $x=0$，对于 $n \\ge 1$，这是一个在 $\\mathbb{R}^n$ 中的勒贝格测度为零的集合。\n\n对于任意 $x \\neq 0$，函数 $f(x) = (\\sum_{i=1}^n x_i^2)^{1/2}$ 是光滑函数的复合，所以我们可以用链式法则计算其梯度。关于 $x_j$ 的偏导数是：\n$$\n\\frac{\\partial f}{\\partial x_j} = \\frac{\\partial}{\\partial x_j} \\left(\\sum_{i=1}^n x_i^2\\right)^{1/2} = \\frac{1}{2} \\left(\\sum_{i=1}^n x_i^2\\right)^{-1/2} (2x_j) = \\frac{x_j}{\\left(\\sum_{i=1}^n x_i^2\\right)^{1/2}} = \\frac{x_j}{\\|x\\|}.\n$$\n因此，梯度向量 $\\nabla f(x)$ 是：\n$$\n\\nabla f(x) = \\left( \\frac{x_1}{\\|x\\|}, \\frac{x_2}{\\|x\\|}, \\dots, \\frac{x_n}{\\|x\\|} \\right) = \\frac{x}{\\|x\\|}.\n$$\n这是沿 $x$ 方向的单位向量。\n\n对于 $x \\neq 0$，梯度的模是此向量的范数：\n$$\n|\\nabla f(x)| = \\left\\| \\frac{x}{\\|x\\|} \\right\\| = \\frac{1}{\\|x\\|} \\|x\\| = 1.\n$$\n\n(b) 共面积公式提供了一种方法，可将一个 $n$ 维域上的积分分解为一个迭代积分，其中首先在一个函数的 $(n-1)$ 维水平集上积分，然后将结果对函数的值进行积分。对于函数 $f:\\mathbb{R}^n \\to \\mathbb{R}$，其水平集是曲面 $\\{x \\in \\mathbb{R}^n | f(x) = t\\}$，其中 $t$ 为常数。\n\n从概念上讲，密度 $|\\nabla f|$ 的出现源于几何变量的变换。考虑 $\\mathbb{R}^n$ 中的一个微小体积元 $d\\mathcal{L}^n(x)$。我们希望在一个适应于 $f$ 的水平集的坐标系中表示这个体积元。这个新坐标系可以被认为有一个坐标表示水平集的值 $t=f(x)$，以及 $n-1$ 个坐标参数化该水平集上的位置。体积元可以局部地分解为水平集上的表面积元 $d\\mathcal{H}^{n-1}$ 和垂直于水平集的无穷小厚度 $dh$ 的乘积。因此，$d\\mathcal{L}^n(x) \\approx d\\mathcal{H}^{n-1} \\cdot dh$。\n\n厚度 $dh$ 是从水平集 $\\{f=t\\}$ 移动到 $\\{f=t+dt\\}$ 所必须经过的垂直距离。梯度 $\\nabla f(x)$ 指向 $f$ 增长最快的方向，该方向在点 $x$ 处垂直于水平集。梯度的大小 $|\\nabla f(x)|$ 表示这个增长率。通过一阶近似， $f$ 的变化量 $df$ 与法向位移 $dh$ 之间的关系为 $df \\approx |\\nabla f(x)| dh$。对于一个无穷小的变化 $dt$，所需的法向位移是 $dh \\approx \\frac{dt}{|\\nabla f(x)|}$。\n\n将此代回体积分解中，我们得到 $d\\mathcal{L}^n(x) \\approx d\\mathcal{H}^{n-1} \\frac{dt}{|\\nabla f(x)|}$。这导出了共面积公式的一种形式：\n$$\n\\int_{\\mathbb{R}^n} g(x) \\,d\\mathcal{L}^n(x) = \\int_{-\\infty}^{\\infty} \\left( \\int_{f^{-1}(t)} \\frac{g(x)}{|\\nabla f(x)|} \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n问题陈述在重写一个 $n$ 维积分时提到了由 $|\\nabla f|$ 决定的权重。这指向了共面积公式更常见的陈述方式：\n$$\n\\int_{\\mathbb{R}^n} g(x) |\\nabla f(x)| \\,d\\mathcal{L}^n(x) = \\int_{-\\infty}^{\\infty} \\left( \\int_{f^{-1}(t)} g(x) \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n这个形式是通过将 $|\\nabla f(x)|$ 移到左边直接从前一个形式得出的。因子 $|\\nabla f(x)|$ 是雅可比因子，它解释了从笛卡尔坐标系变换到水平集坐标系时的几何畸变。它衡量了水平面的“密集程度”；在 $|\\nabla f|$ 大的地方，水平面靠得很近，空间中较小的体积对应于给定的 $t$ 值范围。\n\n$f(x)=\\|x\\|$ 在 $x=0$ 处不属于 $C^1$ 类这一事实并不会使此推理失效。共面积公式对于像 $f$ 这样的利普希茨函数仍然成立。导数 $\\nabla f$ 几乎处处存在，而其未定义的集合 $\\{0\\}$ 是一个勒贝格测度为零的集合。在测度为零的集合上的积分为零，因此这些点对左侧积分的值没有贡献。该几何论证对域中几乎所有的点都成立。\n\n(c) 我们需要计算积分 $J(R,n) = \\int_{B_R(0)} |\\nabla f(x)|\\,d\\mathcal{L}^n(x)$，其中 $f(x)=\\|x\\|$ 且 $B_R(0)=\\{x\\in\\mathbb{R}^{n}:\\|x\\|\\le R\\}$。\n\n我们应用共面积公式：\n$$\n\\int_{\\Omega} g(x) |\\nabla f(x)| \\,d\\mathcal{L}^n(x) = \\int_{-\\infty}^{\\infty} \\left( \\int_{f^{-1}(t) \\cap \\Omega} g(x) \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n在我们的具体情况下，域为 $\\Omega=B_R(0)$，函数为 $f(x)=\\|x\\|$，我们取被积函数为 $g(x)=1$。则积分变为：\n$$\nJ(R,n) = \\int_{B_R(0)} 1 \\cdot |\\nabla \\|x\\|| \\,d\\mathcal{L}^n(x).\n$$\n函数 $f(x)=\\|x\\|$ 在域 $B_R(0)$ 上的取值范围是 $[0, R]$。因此，关于 $t$ 的外层积分将从 $0$ 到 $R$。对于任意 $t \\in [0, R]$，水平集为 $f^{-1}(t)=\\{x \\in \\mathbb{R}^n : \\|x\\|=t\\}$，这是半径为 $t$ 的 $(n-1)$ 维球面，记为 $S_t^{n-1}$。它与域的交集是，当 $t \\in (0, R]$ 时为 $S_t^{n-1}$，当 $t=0$ 时为 $\\{0\\}$。\n\n应用公式：\n$$\nJ(R,n) = \\int_{0}^{R} \\left( \\int_{S_t^{n-1}} 1 \\,d\\mathcal{H}^{n-1}(x) \\right) dt.\n$$\n内层积分是球面 $S_t^{n-1}$ 的 $(n-1)$ 维豪斯多夫测度（即表面积）。半径为 $r$ 的 $(n-1)$ 维球面的表面积由公式 $A_{n-1}(r) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)}r^{n-1}$ 给出。\n对于我们的球面 $S_t^{n-1}$，其半径为 $t$，所以其表面积为：\n$$\n\\mathcal{H}^{n-1}(S_t^{n-1}) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)}t^{n-1}.\n$$\n将此代入外层积分中，我们得到：\n$$\nJ(R,n) = \\int_{0}^{R} \\frac{2\\pi^{n/2}}{\\Gamma(n/2)}t^{n-1} dt.\n$$\n常数因子可以提到积分外面：\n$$\nJ(R,n) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)} \\int_{0}^{R} t^{n-1} dt.\n$$\n我们计算这个初等积分：\n$$\n\\int_{0}^{R} t^{n-1} dt = \\left[ \\frac{t^n}{n} \\right]_0^R = \\frac{R^n}{n} - 0 = \\frac{R^n}{n}.\n$$\n最后，我们得到 $J(R,n)$ 的表达式：\n$$\nJ(R,n) = \\frac{2\\pi^{n/2}}{\\Gamma(n/2)} \\cdot \\frac{R^n}{n} = \\frac{2\\pi^{n/2}R^n}{n\\Gamma(n/2)}.\n$$\n这个结果是一致的。从 (a) 部分我们知道，对于几乎所有的 $x$，$|\\nabla f(x)|=1$。因此，积分 $J(R,n)$ 应等于积分域 $B_R(0)$ 的勒贝格测度。\n$$\nJ(R,n) = \\int_{B_R(0)} 1 \\,d\\mathcal{L}^n(x) = \\mathcal{L}^n(B_R(0)).\n$$\n我们推导出的表达式 $\\frac{2\\pi^{n/2}R^n}{n\\Gamma(n/2)}$，确实是半径为 $R$ 的 $n$ 维球体积的著名公式。这可以通过使用恒等式 $\\Gamma(z+1)=z\\Gamma(z)$ 看出，它给出了 $n\\Gamma(n/2) = 2 \\cdot \\frac{n}{2}\\Gamma(\\frac{n}{2}) = 2\\Gamma(\\frac{n}{2}+1)$。所以，$J(R,n) = \\frac{\\pi^{n/2}R^n}{\\Gamma(n/2+1)}$，这是 $n$ 维球体积的标准表示形式。", "answer": "$$\n\\boxed{\\frac{2\\pi^{n/2}R^n}{n\\Gamma(\\frac{n}{2})}}\n$$", "id": "3034561"}]}
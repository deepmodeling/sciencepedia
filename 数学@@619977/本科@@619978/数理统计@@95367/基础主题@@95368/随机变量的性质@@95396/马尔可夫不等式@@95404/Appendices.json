{"hands_on_practices": [{"introduction": "马尔可夫不等式是一个强大的工具，它允许我们仅根据一个非负随机变量的平均值（即期望），来估计该变量取值远超平均水平的概率上限。第一个练习将通过一个关于网络广告点击量的实际场景，让你直接应用马尔可夫不等式 [@problem_id:1933050]。这个过程将帮助你掌握在信息有限的情况下，如何进行“最坏情况”分析的基本技能。", "problem": "一家数字营销创业公司的数据分析师正在监控一则新网络广告的效果。该广告在任何给定小时内收到的点击次数是一个非负随机变量。根据大量的历史数据，该分析师确定了此广告每小时的平均点击次数为185次。工程团队需要为潜在的流量激增做准备，并要求对高流量的可能性进行最坏情况的估计。在不对每小时点击次数的具体概率分布做出任何进一步假设的情况下，该广告在一小时内收到1000次或更多点击的概率的最大可能值是多少？请用小数表示你的答案。", "solution": "设 $X$ 是表示一小时内点击次数的非负随机变量，其均值 $\\mathbb{E}[X]=185$。我们被要求在除了非负性和均值之外，不假设任何特定分布的情况下，求出 $\\mathbb{P}(X \\geq 1000)$ 的最大可能值。\n\n我们应用马尔可夫不等式（Markov's inequality），该不等式指出，对于任何非负随机变量 $X$ 和任何 $t>0$，\n$$\n\\mathbb{P}(X \\geq t) \\leq \\frac{\\mathbb{E}[X]}{t}.\n$$\n一个标准的推导过程如下。因为在事件 $\\{X \\geq t\\}$ 上有 $X \\geq 0$ 和 $X \\geq t$，我们得到\n$$\nX \\mathbf{1}_{\\{X \\geq t\\}} \\geq t \\mathbf{1}_{\\{X \\geq t\\}}.\n$$\n取期望，\n$$\n\\mathbb{E}[X \\mathbf{1}_{\\{X \\geq t\\}}] \\geq t \\mathbb{P}(X \\geq t).\n$$\n此外，\n$$\n\\mathbb{E}[X] = \\mathbb{E}[X \\mathbf{1}_{\\{X < t\\}}] + \\mathbb{E}[X \\mathbf{1}_{\\{X \\geq t\\}}] \\geq \\mathbb{E}[X \\mathbf{1}_{\\{X \\geq t\\}}],\n$$\n所以结合起来得到\n$$\n\\mathbb{E}[X] \\geq t \\mathbb{P}(X \\geq t) \\quad \\Rightarrow \\quad \\mathbb{P}(X \\geq t) \\leq \\frac{\\mathbb{E}[X]}{t}.\n$$\n\n设 $t=1000$ 且 $\\mathbb{E}[X]=185$，我们得到\n$$\n\\mathbb{P}(X \\geq 1000) \\leq \\frac{185}{1000} = 0.185.\n$$\n\n这个界是紧的。考虑一个由以下方式定义的两点分布：\n$$\n\\mathbb{P}(X=1000) = \\frac{185}{1000}, \\quad \\mathbb{P}(X=0) = 1 - \\frac{185}{1000}.\n$$\n那么 $X \\geq 0$ 几乎必然成立，并且\n$$\n\\mathbb{E}[X] = 1000 \\cdot \\frac{185}{1000} + 0 \\cdot \\left(1 - \\frac{185}{1000}\\right) = 185,\n$$\n同时\n$$\n\\mathbb{P}(X \\geq 1000) = \\frac{185}{1000} = 0.185.\n$$\n因此，在没有进一步的分布假设的情况下，$\\mathbb{P}(X \\geq 1000)$ 的最大可能值为 $0.185$。", "answer": "$$\\boxed{0.185}$$", "id": "1933050"}, {"introduction": "尽管马尔可夫不等式非常普适，但这种普适性往往以牺牲精度为代价，其给出的界限可能相当“松散”。本练习将引导你探讨这个界限的精确度问题 [@problem_id:1933057]。你将为一个已知的几何分布计算精确的尾部概率，并将其与马尔可夫不等式给出的界限进行比较，从而量化分析该界限的松散程度。", "problem": "对一条生产线进行一系列独立的制造测试。每次测试的结果为“成功”（产品无瑕疵），其概率为 $s$（其中 $0 < s < 1$），或为“失败”（产品有缺陷）。令随机变量 $X$ 表示获得第一个无瑕疵产品所需的测试次数。$X$ 的概率质量函数由 $P(X=n) = (1-s)^{n-1}s$ 给出，其中整数 $n \\ge 1$。\n\n对于任何正整数 $k$，我们关心其尾部概率 $P(X \\ge k E[X])$，其中 $E[X]$ 是 $X$ 的期望。\n\n这个概率的一个上界，我们称之为 $B(k,s)$，可以仅使用 $X$ 的期望和 $X$ 是一个非负随机变量这一事实来推导。令 $P_{exact}(k,s)$ 为该概率的精确值。\n\n比率 $R(k,s) = \\frac{B(k,s)}{P_{exact}(k,s)}$ 量化了这个界的宽松程度。可以证明，随着 $k$ 的增加，这个比率会发散到无穷大。为了描述这种发散的速度，请确定以下极限的值：\n$$L = \\lim_{k \\to \\infty} \\frac{1}{k} \\ln(R(k,s))$$\n将您的答案表示为关于 $s$ 的封闭形式解析表达式。", "solution": "令 $X$ 服从成功概率为 $s\\in(0,1)$ 且支撑集为 $\\{1,2,\\dots\\}$ 的几何分布，因此 $P(X=n)=(1-s)^{n-1}s$。其期望为\n$$\nE[X]=\\sum_{n=1}^{\\infty}n(1-s)^{n-1}s.\n$$\n令 $q=1-s\\in(0,1)$。使用恒等式 $\\sum_{n=1}^{\\infty}n q^{n-1}=\\frac{1}{(1-q)^{2}}$，我们得到\n$$\nE[X]=s\\cdot\\frac{1}{(1-q)^{2}}=s\\cdot\\frac{1}{s^{2}}=\\frac{1}{s}.\n$$\n\n对于任何正整数 $k$，仅使用非负性和期望得到的界由马尔可夫不等式给出：对于 $a>0$，$P(X\\ge aE[X])\\le \\frac{1}{a}$。取 $a=k$，可得\n$$\nB(k,s)=\\frac{1}{k}.\n$$\n对于几何分布的 $X$，在阈值 $kE[X]=\\frac{k}{s}$ 处的精确尾部概率是\n$$\nP_{exact}(k,s)=P\\!\\left(X\\ge \\frac{k}{s}\\right)=P\\!\\left(X\\ge \\left\\lceil\\frac{k}{s}\\right\\rceil\\right)=(1-s)^{\\left\\lceil\\frac{k}{s}\\right\\rceil-1}.\n$$\n因此，该比率为\n$$\nR(k,s)=\\frac{B(k,s)}{P_{exact}(k,s)}=\\frac{1/k}{(1-s)^{\\left\\lceil\\frac{k}{s}\\right\\rceil-1}}.\n$$\n取对数，\n$$\n\\ln R(k,s)=-\\ln k-\\left(\\left\\lceil\\frac{k}{s}\\right\\rceil-1\\right)\\ln(1-s).\n$$\n将 $\\left\\lceil\\frac{k}{s}\\right\\rceil-1$ 写为 $\\frac{k}{s}-\\delta_{k}$，其中 $\\delta_{k}\\in(0,1]$。则\n$$\n\\ln R(k,s)=-\\ln k-\\frac{k}{s}\\ln(1-s)+\\delta_{k}\\ln(1-s).\n$$\n两边同除以 $k$ 可得\n$$\n\\frac{1}{k}\\ln R(k,s)=-\\frac{1}{k}\\ln k-\\frac{1}{s}\\ln(1-s)+\\frac{\\delta_{k}}{k}\\ln(1-s).\n$$\n当 $k\\to\\infty$ 时，$-\\frac{1}{k}\\ln k\\to 0$ 和 $\\frac{\\delta_{k}}{k}\\ln(1-s)\\to 0$ 均趋于 0，因此\n$$\n\\lim_{k\\to\\infty}\\frac{1}{k}\\ln R(k,s)=-\\frac{1}{s}\\ln(1-s)=\\frac{1}{s}\\ln\\!\\left(\\frac{1}{1-s}\\right).\n$$\n这给出了所声称的比率的指数发散率。", "answer": "$$\\boxed{-\\frac{1}{s}\\ln(1-s)}$$", "id": "1933057"}, {"introduction": "既然基础的马尔可夫不等式可能不够精确，我们自然会问：能否利用更多信息（例如方差）来获得一个更紧的概率上界？本练习将向你展示一种非常巧妙且强大的方法，即对一个经过构造的二次函数 $(X-b)^2$ 应用马尔可夫不等式的核心思想 [@problem_id:1933078]。通过优化参数 $b$，你将亲手推导出著名的单边切比雪夫不等式，这不仅能得到一个更优的界，更能让你体验到从第一性原理出发构建更复杂分析工具的乐趣。", "problem": "设 $X$ 是一个随机变量，其均值为 $E[X] = \\mu$，方差 $\\text{Var}(X) = \\sigma^2$ 为有限非零值。我们希望求尾概率 $P(X \\ge a)$ 的一个紧上界，其中 $a$ 是一个严格大于均值的常数，即 $a > \\mu$。\n\n推导此类界的一个通用方法是变换该随机变量。考虑函数 $B(b) = \\frac{E[(X-b)^2]}{(a-b)^2}$，其中 $b$ 是一个实值参数。对于任意满足 $b < a$ 的 $b$，该函数都为 $P(X \\ge a)$ 提供了一个上界。\n\n你的任务是从该函数族中找到可能的最紧界。为此，你需要通过在参数 $b$ 的有效定义域 ($b<a$) 上进行优化，来找到 $B(b)$ 的最小值。\n\n将此最优（最小）值 $B(b)$ 表示为一个以 $\\mu$、$\\sigma$ 和 $a$ 表示的闭式解析表达式。", "solution": "给定对于任意 $b<a$，\n$$\nP(X\\ge a)\\le B(b):=\\frac{E[(X-b)^{2}]}{(a-b)^{2}}。\n$$\n使用 $E[(X-b)^{2}]=\\operatorname{Var}(X)+\\left(E[X]-b\\right)^{2}$，我们有\n$$\nE[(X-b)^{2}]=\\sigma^{2}+(\\mu-b)^{2}，\n$$\n因此该界为\n$$\nB(b)=\\frac{\\sigma^{2}+(\\mu-b)^{2}}{(a-b)^{2}},\\quad b<a。\n$$\n\n为了在 $b<a$ 的范围内最小化 $B(b)$，定义\n$$\nf(b)=\\frac{\\sigma^{2}+(b-\\mu)^{2}}{(a-b)^{2}}，\n$$\n其分子为 $N(b)=\\sigma^{2}+(b-\\mu)^{2}$，分母为 $D(b)=(a-b)^{2}$。那么\n$$\nf'(b)=\\frac{N'(b)D(b)-N(b)D'(b)}{D(b)^{2}}，\n$$\n其中 $N'(b)=2(b-\\mu)$ 且 $D'(b)=-2(a-b)$。因此\n$$\nf'(b)=\\frac{2(b-\\mu)(a-b)^{2}+2\\left[\\sigma^{2}+(b-\\mu)^{2}\\right](a-b)}{(a-b)^{4}}\n=\\frac{2(a-b)\\left((b-\\mu)(a-b)+\\sigma^{2}+(b-\\mu)^{2}\\right)}{(a-b)^{4}}。\n$$\n对于 $b<a$，我们有 $a-b>0$，因此临界点满足\n$$\n(b-\\mu)(a-b)+\\sigma^{2}+(b-\\mu)^{2}=0。\n$$\n令 $t=b-\\mu$，并将 $a-b$ 写成 $(a-\\mu)-t$。则该方程变为\n$$\nt\\big((a-\\mu)-t\\big)+\\sigma^{2}+t^{2}=t(a-\\mu)-t^{2}+\\sigma^{2}+t^{2}=t(a-\\mu)+\\sigma^{2}=0，\n$$\n所以\n$$\nt^{*}=-\\frac{\\sigma^{2}}{a-\\mu},\\qquad b^{*}=\\mu+t^{*}=\\mu-\\frac{\\sigma^{2}}{a-\\mu}。\n$$\n由于 $a>\\mu$，我们有 $a-\\mu>0$，因此\n$$\nb^{*}<a \\;\\;\\Longleftrightarrow\\;\\; \\mu-\\frac{\\sigma^{2}}{a-\\mu}<a \\;\\;\\Longleftrightarrow\\;\\; -\\sigma^{2}<(a-\\mu)^{2}，\n$$\n该不等式恒成立。因此 $b^{*}$ 是一个可行点。此外，当 $b\\to a^{-}$ 时 $f(b)\\to+\\infty$，当 $b\\to -\\infty$ 时 $f(b)\\to 1$，并且临界点唯一，所以 $b^{*}$ 处取得全局最小值。\n\n在 $b=b^{*}$ 处计算 $B(b)$ 的值。设 $d=a-\\mu>0$。那么\n$$\n\\mu-b^{*}=\\frac{\\sigma^{2}}{d},\\qquad a-b^{*}=d+\\frac{\\sigma^{2}}{d}=\\frac{d^{2}+\\sigma^{2}}{d}。\n$$\n从而\n$$\nB(b^{*})=\\frac{\\sigma^{2}+(\\mu-b^{*})^{2}}{(a-b^{*})^{2}}\n=\\frac{\\sigma^{2}+\\left(\\frac{\\sigma^{2}}{d}\\right)^{2}}{\\left(\\frac{d^{2}+\\sigma^{2}}{d}\\right)^{2}}\n=\\frac{\\sigma^{2}\\left(1+\\frac{\\sigma^{2}}{d^{2}}\\right)}{\\frac{(d^{2}+\\sigma^{2})^{2}}{d^{2}}}\n=\\frac{\\sigma^{2}\\left(\\frac{d^{2}+\\sigma^{2}}{d^{2}}\\right)}{\\frac{(d^{2}+\\sigma^{2})^{2}}{d^{2}}}\n=\\frac{\\sigma^{2}}{d^{2}+\\sigma^{2}}\n=\\frac{\\sigma^{2}}{(a-\\mu)^{2}+\\sigma^{2}}。\n$$\n\n因此，在 $b<a$ 的范围内，$B(b)$ 的最优（最小）值是 $\\sigma^{2}/\\big((a-\\mu)^{2}+\\sigma^{2}\\big)$。", "answer": "$$\\boxed{\\frac{\\sigma^{2}}{(a-\\mu)^{2}+\\sigma^{2}}}$$", "id": "1933078"}]}
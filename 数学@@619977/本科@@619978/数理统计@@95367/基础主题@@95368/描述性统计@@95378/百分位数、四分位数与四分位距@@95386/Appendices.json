{"hands_on_practices": [{"introduction": "在数据分析中，衡量数据的离散程度至关重要，但极值或异常值常常会扭曲我们的认知。四分位距（$IQR$）是一种“稳健”的统计量，因为它对异常值不敏感。通过本练习，你将亲手计算并比较一个数据点发生剧烈变化前后，全距（range）和四分位距（$IQR$）所受到的影响，从而直观地理解稳健性的概念 [@problem_id:1943528]。", "problem": "一位数据科学家正在研究两种离散程度的统计度量——极差和四分位距（IQR）的稳健性。在此背景下，稳健性指的是一个度量抵抗极端值或异常值影响的能力。该科学家研究了一个包含五个测量值的初始数据集：\n$$ D_A = \\{12, 44, 25, 40, 31\\} $$\n由于传感器故障，单个最大的测量值被错误地记录为一个大得多的值，从而产生了一个新的数据集：\n$$ D_B = \\{12, 250, 25, 40, 31\\} $$\n\n该分析使用一种特定的方法来计算四分位数。对于任何大小为 $n$ 的已排序数据集：\n- 第二四分位数（$Q_2$），即中位数，是数据集的中间值。\n- 第一四分位数（$Q_1$）是数据下半部分的中位数。如果 $n$ 是奇数，则整体中位数（$Q_2$）也包含在这个下半部分中。\n- 第三四分位数（$Q_3$）是数据上半部分的中位数。如果 $n$ 是奇数，则整体中位数（$Q_2$）也包含在这个上半部分中。\n\n四分位距（IQR）定义为 $Q_3 - Q_1$，极差定义为最大值减去最小值。\n\n为量化该异常值的影响，请计算数据集 $D_B$ 的极差与数据集 $D_A$ 的极差之间的绝对差值。然后，计算数据集 $D_B$ 的四分位距与数据集 $D_A$ 的四分位距之间的绝对差值。你的任务是求出这两个绝对差值的和。", "solution": "首先，将每个数据集按非递减顺序排序，并使用给定的四分位数规则计算极差和四分位距。\n\n对于 $D_{A}=\\{12,44,25,40,31\\}$，排序后的数据为\n$$\nS_{A}=\\{12,25,31,40,44\\}。\n$$\n极差定义为 $\\max(S_{A})-\\min(S_{A})$，因此\n$$\n\\text{Range}(D_{A})=44-12=32。\n$$\n中位数 $Q_{2}$ 是中间值：\n$$\nQ_{2,A}=31。\n$$\n根据当 $n$ 为奇数时中位数包含在上下两个半区的规则，下半区为 $\\{12,25,31\\}$，上半区为 $\\{31,40,44\\}$。它们的中位数得出\n$$\nQ_{1,A}=25,\\quad Q_{3,A}=40,\n$$\n所以四分位距为\n$$\n\\text{IQR}(D_{A})=Q_{3,A}-Q_{1,A}=40-25=15。\n$$\n\n对于 $D_{B}=\\{12,250,25,40,31\\}$，排序后的数据为\n$$\nS_{B}=\\{12,25,31,40,250\\}。\n$$\n极差为\n$$\n\\text{Range}(D_{B})=250-12=238。\n$$\n中位数仍然是中间值：\n$$\nQ_{2,B}=31。\n$$\n再次将中位数包含在两个半区中，得到下半区 $\\{12,25,31\\}$ 和上半区 $\\{31,40,250\\}$，所以\n$$\nQ_{1,B}=25,\\quad Q_{3,B}=40,\n$$\n因此\n$$\n\\text{IQR}(D_{B})=Q_{3,B}-Q_{1,B}=40-25=15。\n$$\n\n现在计算绝对差值及其和：\n$$\n\\left|\\text{Range}(D_{B})-\\text{Range}(D_{A})\\right|=\\left|238-32\\right|=206,\n$$\n$$\n\\left|\\text{IQR}(D_{B})-\\text{IQR}(D_{A})\\right|=\\left|15-15\\right|=0,\n$$\n$$\n\\text{Sum}=206+0=206。\n$$", "answer": "$$\\boxed{206}$$", "id": "1943528"}, {"introduction": "在处理大规模数据集时，数据通常以频率分布表的形式呈现，而非简单的数值列表。本练习模拟了分析网络性能数据的真实场景，要求你从频率表中计算第75个百分位数（即第三四分位数 $Q_3$）。通过这个实践，你将掌握处理分组数据和运用线性插值法来精确定位百分位数的关键技能 [@problem_id:1943514]。", "problem": "一家名为 LatencyLeap Analytics 的网络基础设施公司正在分析一个新数据中心的性能。他们收集了大量数据包的往返时间 (RTT) 测量样本，并将数据汇总在下方的频率分布表中。RTT 是发送信号所需的时间加上接收到该信号的确认所需的时间之和。\n\n| RTT (毫秒) | 频率 (数据包数量) |\n|------------|-------------------|\n| 12.5       | 215               |\n| 15.0       | 450               |\n| 18.2       | 1571              |\n| 20.0       | 520               |\n| 25.4       | 150               |\n| 30.1       | 75                |\n\n为了创建标准化的性能报告，该公司遵循一种特定的协议来计算百分位数。对于一个大小为 $N$ 的数据集，第 $p$ 个百分位数的排名由公式 $k = \\frac{p}{100}(N+1)$ 确定。然后按如下方式确定百分位数的值：\n- 如果 $k$ 是整数，则百分位数的值是排名为 $k$ 的数据点。\n- 如果 $k$ 不是整数，它可以写成 $k = i + f$ 的形式，其中 $i$ 是整数部分，$f$ 是小数部分。然后通过线性插值法求得百分位数的值：$P_p = x_i + f \\cdot (x_{i+1} - x_i)$，其中 $x_i$ 和 $x_{i+1}$ 分别是排名为 $i$ 和 $i+1$ 的数据值。数据按从小到大的顺序排列。\n\n作为其服务质量分析的一部分，工程团队需要确定 RTT 的第 75 个百分位数。\n\n根据所提供的数据和公司的计算方法，计算 RTT 的第 75 个百分位数。答案以毫秒 (ms) 为单位，并四舍五入到三位有效数字。", "solution": "我们将数据集解释为一个 RTT 值列表，其中每个不同的 RTT 值出现的次数等于其频率，并按从小到大的顺序排列。观测总数是所有频率的总和：\n$$\nN = 215 + 450 + 1571 + 520 + 150 + 75 = 2981.\n$$\n使用公司的协议，对于所求的 $p=75$ 的百分位数，我们计算其排名\n$$\nk = \\frac{p}{100}(N+1) = \\frac{75}{100}(2981+1) = \\frac{3}{4}\\cdot 2982 = 2236.5.\n$$\n由于 $k$ 不是整数，我们将其写成 $k = i + f$ 的形式，其中 $i=2236$ 且 $f=0.5$。我们通过累积频率来确定排名为 $i$ 和 $i+1$ 的数据值：\n$$\n\\begin{aligned}\n&\\text{小于等于 }12.5:\\ 215,\\\\\n&\\text{小于等于 }15.0:\\ 215+450=665,\\\\\n&\\text{小于等于 }18.2:\\ 665+1571=2236,\\\\\n&\\text{小于等于 }20.0:\\ 2236+520=2756.\n\\end{aligned}\n$$\n因此 $x_{2236}=18.2$ 且 $x_{2237}=20.0$。通过线性插值法，\n$$\nP_{75} = x_{i} + f\\,(x_{i+1}-x_{i}) = 18.2 + 0.5\\,(20.0 - 18.2) = 18.2 + 0.9 = 19.1.\n$$\n以毫秒为单位，四舍五入到三位有效数字，第 75 个百分位数是 $19.1$。", "answer": "$$\\boxed{19.1}$$", "id": "1943514"}, {"introduction": "统计计算的精确性依赖于对计算方法的严格遵循，尤其是在数据集动态变化的背景下。本练习探讨了当数据集中增加一个新观测值时，四分位数（$Q_1$ 和 $Q_3$）的计算方法可能发生的变化。你将体会到样本量的改变如何影响百分位数的位置，并练习在需要时从直接取值切换到线性插值计算，从而加深对不同计算规则的理解 [@problem_id:1943517]。", "problem": "一位网络系统工程师正在分析一小批网络性能数据样本。该数据集包含15次往返时间 (RTT) 的测量值，单位为毫秒 (ms)。这些测量值已按升序排列，如下所示：\n\n{10, 12, 15, 20, 22, 25, 28, 30, 32, 35, 38, 40, 42, 45, 50}\n\n为了分析数据的离散程度，该工程师使用了四分位距 (IQR)，其定义为 $IQR = Q_3 - Q_1$，其中 $Q_1$ 是第一四分位数，$Q_3$ 是第三四分位数。公司对于一个大小为 $N$ 的数据集计算四分位数的标准流程如下：\n首先，将数据按升序排列。第一四分位数 ($Q_1$) 和第三四分位数 ($Q_3$) 的位置分别由 $p_1 = \\frac{1}{4}(N+1)$ 和 $p_3 = \\frac{3}{4}(N+1)$ 给出。如果位置 $p$ 是一个整数，则四分位数的值就是该位置上的数据点。如果 $p$ 不是整数，令 $I = \\lfloor p \\rfloor$ 为 $p$ 的整数部分。则四分位数的值通过线性插值法求得：$x_I + (p - I) \\times (x_{I+1} - x_I)$，其中 $x_I$ 和 $x_{I+1}$ 分别是位置 $I$ 和 $I+1$ 处的值。\n\n之后，该工程师记录了一次额外的 RTT 测量值。这个新的测量值恰好等于原始15个测量值数据集的第三四分位数 ($Q_3$)。\n\n计算更新后的数据集（现在包含16个测量值）的新的四分位距 (IQR)。答案以毫秒 (ms) 为单位，并四舍五入到三位有效数字。", "solution": "大小为 $N=15$ 的数据集已排序。根据给定的流程，四分位数的位置为\n$$\np_{1}=\\frac{1}{4}(N+1)=\\frac{1}{4}\\cdot 16=4, \\quad p_{3}=\\frac{3}{4}(N+1)=\\frac{3}{4}\\cdot 16=12.\n$$\n由于两个位置都是整数，四分位数即为这些索引处的数据：\n$$\nQ_{1}=x_{4}=20, \\quad Q_{3}=x_{12}=40.\n$$\n新记录的测量值等于原始的 $Q_{3}$，所以更新后的数据集有 $N=16$ 个元素，其中有两个值为40。排序后的更新列表有 $x_{12}=40$ 和 $x_{13}=40$。\n\n对于 $N=16$，四分位数的位置变为\n$$\np_{1}=\\frac{1}{4}(N+1)=\\frac{1}{4}\\cdot 17=4.25, \\quad p_{3}=\\frac{3}{4}(N+1)=\\frac{3}{4}\\cdot 17=12.75.\n$$\n对于 $p_{1}=4.25$，令 $I=\\lfloor 4.25\\rfloor=4$。使用线性插值法，\n$$\nQ_{1}=x_{4}+(p_{1}-I)\\bigl(x_{5}-x_{4}\\bigr)=20+0.25\\,(22-20)=20+0.5=20.5.\n$$\n对于 $p_{3}=12.75$，令 $I=\\lfloor 12.75\\rfloor=12$。使用线性插值法，\n$$\nQ_{3}=x_{12}+(p_{3}-I)\\bigl(x_{13}-x_{12}\\bigr)=40+0.75\\,(40-40)=40.\n$$\n因此，新的四分位距是\n$$\n\\mathrm{IQR}=Q_{3}-Q_{1}=40-20.5=19.5.\n$$\n四舍五入到三位有效数字，结果是 $19.5$。", "answer": "$$\\boxed{19.5}$$", "id": "1943517"}]}
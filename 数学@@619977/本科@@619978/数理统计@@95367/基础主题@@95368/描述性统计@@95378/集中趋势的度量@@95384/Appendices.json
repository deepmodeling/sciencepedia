{"hands_on_practices": [{"introduction": "理论是实践的根基。让我们从一个核心计算开始，以确保你牢固掌握期望值（均值）的定义。本练习将通过一个源于量子物理学背景的假设场景，引导你计算一个离散随机变量的期望能量值。这个实践不仅能巩固你的计算技能，还能帮助你理解一个重要概念：期望值 $E[X]$ 本身不一定是随机变量的一个可能取值。[@problem_id:1934427]", "problem": "在一个量子光学实验中，一个单原子被囚禁在磁光阱中。在被一束激光脉冲激发后，该原子的电子态可以弛豫到四个可能的分立能级之一。令随机变量 $X$ 表示测得的原子最终状态的能量，单位为电子伏特 (eV)。$X$ 的可能能量值集合为 $\\{1.0, 2.5, 4.0, 5.0\\}$。\n\n一系列的测量揭示了这些能级的如下概率分布：\n- $P(X=1.0 \\text{ eV}) = 0.40$\n- $P(X=2.5 \\text{ eV}) = c$\n- $P(X=4.0 \\text{ eV}) = 2c$\n- $P(X=5.0 \\text{ eV}) = 0.10$\n\n此处，$c$ 是一个由系统物理性质决定的未知常数。\n\n计算该原子的期望能级 $E[X]$。将最终答案以 eV 为单位表示，并四舍五入到三位有效数字。", "solution": "我们将测得的最终能量建模为一个离散随机变量 $X$，其支撑集为 $\\{1.0, 2.5, 4.0, 5.0\\}$，概率分别为 $P(X=1.0)=0.40$，$P(X=2.5)=c$，$P(X=4.0)=2c$ 和 $P(X=5.0)=0.10$。根据概率的归一化要求，它们的和等于 $1$：\n$$\n0.40 + c + 2c + 0.10 = 1.\n$$\n为求精确，记 $0.40=\\frac{2}{5}$ 和 $0.10=\\frac{1}{10}$，\n$$\n\\frac{2}{5} + c + 2c + \\frac{1}{10} = 1 \\;\\;\\Rightarrow\\;\\; 3c + \\left(\\frac{2}{5} + \\frac{1}{10}\\right) = 1 \\;\\;\\Rightarrow\\;\\; 3c + \\frac{1}{2} = 1,\n$$\n所以\n$$\n3c = \\frac{1}{2} \\;\\;\\Rightarrow\\;\\; c = \\frac{1}{6}.\n$$\n离散随机变量的期望值为 $E[X]=\\sum x\\,P(X=x)$。因此，\n$$\nE[X] = 1.0\\cdot 0.40 + 2.5\\cdot c + 4.0\\cdot (2c) + 5.0\\cdot 0.10.\n$$\n使用精确分数，$1.0=\\frac{10}{10}$，$0.40=\\frac{2}{5}$，$2.5=\\frac{5}{2}$，$4.0=4$ 以及 $0.10=\\frac{1}{10}$，我们得到\n$$\nE[X] = \\frac{2}{5} + \\frac{5}{2}c + 8c + \\frac{1}{2} = \\frac{9}{10} + \\left(\\frac{5}{2}+8\\right)c = \\frac{9}{10} + \\frac{21}{2}c.\n$$\n代入 $c=\\frac{1}{6}$，\n$$\nE[X] = \\frac{9}{10} + \\frac{21}{2}\\cdot \\frac{1}{6} = \\frac{9}{10} + \\frac{7}{4} = \\frac{53}{20} = 2.65.\n$$\n以 eV 为单位，保留三位有效数字，期望能量为 $2.65$。", "answer": "$$\\boxed{2.65}$$", "id": "1934427"}, {"introduction": "掌握了均值的计算后，我们来探讨一个更深入的特性，它将均值与中位数显著地区分开来。我们知道，期望（均值）具有线性性质，即两个随机变量之和的期望等于它们各自期望之和（$E[X+Y] = E[X] + E[Y]$）。然而，中位数是否也遵循这个看似直观的规则呢？本练习将通过一个简洁的离散随机变量例子，让你亲手验证并量化中位数在线性组合下的“非线性”行为，这是理解其稳健性根源的关键一步。[@problem_id:1934426]", "problem": "在概率论中，随机变量之和的期望等于各随机变量期望之和，但中位数并不满足此性质。本题通过一个具体的例子来探究这一性质。\n\n设 $X_1$ 和 $X_2$ 是两个独立同分布的离散随机变量。它们共同的概率质量函数为：\n$$ P(X_i = 1) = \\frac{2}{3} $$\n$$ P(X_i = 100) = \\frac{1}{3} $$\n对 $i=1, 2$ 成立。\n\n具有累积分布函数 $F_W(w) = P(W \\le w)$ 的随机变量 $W$ 的中位数定义为 $\\text{median}(W) = \\inf\\{w \\in \\mathbb{R} \\mid F_W(w) \\ge 0.5\\}$。\n\n计算差值 $\\Delta = \\text{median}(X_1+X_2) - (\\text{median}(X_1) + \\text{median}(X_2))$。", "solution": "根据定义，对于任意具有累积分布函数 $F_{W}(w)=P(W\\le w)$ 的随机变量 $W$，其中位数为 $\\inf\\{w\\in\\mathbb{R}\\mid F_{W}(w)\\ge 0.5\\}$。\n\n首先计算 $\\text{median}(X_{i})$。$X_{i}$ 的分布为 $P(X_{i}=1)=\\frac{2}{3}$ 和 $P(X_{i}=100)=\\frac{1}{3}$。其累积分布函数满足：当 $w<1$ 时 $F_{X_{i}}(w)=0$，$F_{X_{i}}(1)=\\frac{2}{3}$，以及当 $w\\ge 100$ 时 $F_{X_{i}}(w)=1$。由于 $F_{X_{i}}(1)=\\frac{2}{3}\\ge 0.5$ 且对于 $w<1$ 我们有 $F_{X_{i}}(w)=0<0.5$，可得\n$$\n\\text{median}(X_{i})=1.\n$$\n因此 $\\text{median}(X_{1})+\\text{median}(X_{2})=1+1=2$。\n\n接着计算 $S=X_{1}+X_{2}$ 的分布。根据独立性，\n$$\nP(S=2)=P(X_{1}=1,X_{2}=1)=\\left(\\frac{2}{3}\\right)^{2}=\\frac{4}{9},\n$$\n$$\nP(S=101)=P(X_{1}=1,X_{2}=100)+P(X_{1}=100,X_{2}=1)=2\\cdot \\frac{2}{3}\\cdot \\frac{1}{3}=\\frac{4}{9},\n$$\n$$\nP(S=200)=P(X_{1}=100,X_{2}=100)=\\left(\\frac{1}{3}\\right)^{2}=\\frac{1}{9}.\n$$\n因此 $S$ 的累积分布函数满足\n$$\nF_{S}(w)=\\begin{cases}\n0, & w<2,\\\\\n\\frac{4}{9}, & 2\\le w<101,\\\\\n\\frac{8}{9}, & 101\\le w<200,\\\\\n1, & w\\ge 200.\n\\end{cases}\n$$\n$S$ 的中位数是使得 $F_{S}(w)\\ge 0.5$ 的 $w$ 的下确界。我们有 $F_{S}(2)=\\frac{4}{9}<0.5$ 和 $F_{S}(101)=\\frac{8}{9}\\ge 0.5$，所以\n$$\n\\text{median}(X_{1}+X_{2})=101.\n$$\n因此，差值为\n$$\n\\Delta=\\text{median}(X_{1}+X_{2})-\\bigl(\\text{median}(X_{1})+\\text{median}(X_{2})\\bigr)=101-2=99.\n$$", "answer": "$$\\boxed{99}$$", "id": "1934426"}, {"introduction": "在理论探索之后，让我们转向一个极具现实意义的计算问题。在大数据时代，数据常常以流的形式接踵而至，一次性将所有数据加载到内存中计算均值并不可行。本练习模拟了深空探测器处理连续测量数据的场景，要求你推导出一个递推公式，以便在不存储整个数据集的情况下实时更新算术平均值 $\\mu_n$。这个“单遍”算法是流处理领域的一个基石，在工程和金融等领域有广泛应用。[@problem_id:1934443]", "problem": "一台深空探测器的机载计算机负责分析高能粒子的通量。探测器的传感器生成一串测量值，$x_1, x_2, x_3, \\dots$，其中 $x_k$ 是在时间步长 $k$ 测得的值。由于严格的内存限制，该计算机无法存储整个测量历史。因此，它必须在单次遍历中计算移动算术平均值。\n\n设 $\\mu_n$ 为前 $n$ 个测量值的算术平均值，即 $\\mu_n = \\frac{1}{n}\\sum_{i=1}^{n} x_i$。当一个新的测量值 $x_n$ 到达时（对于 $n > 1$），计算机会将之前的平均值 $\\mu_{n-1}$ 更新为新的平均值 $\\mu_n$。这个更新规则可以表示为前一个平均值和新数据点的线性组合：\n$$ \\mu_n = A_n \\mu_{n-1} + B_n x_n $$\n其中系数 $A_n$ 和 $B_n$ 是测量次数 $n$ 的函数。\n\n请确定系数 $B_n$ 作为 $n$ 的函数的表达式。", "solution": "我们从前 $n$ 个测量值的移动平均值的定义开始：\n$$\n\\mu_{n}=\\frac{1}{n}\\sum_{i=1}^{n}x_{i}.\n$$\n将总和分解为前 $n-1$ 项和第 $n$ 项：\n$$\n\\mu_{n}=\\frac{1}{n}\\left(\\sum_{i=1}^{n-1}x_{i}+x_{n}\\right).\n$$\n使用定义 $\\mu_{n-1}=\\frac{1}{n-1}\\sum_{i=1}^{n-1}x_{i}$，将部分和 $\\sum_{i=1}^{n-1}x_{i}$ 用 $\\mu_{n-1}$ 表示，这意味着\n$$\n\\sum_{i=1}^{n-1}x_{i}=(n-1)\\mu_{n-1}.\n$$\n将此代入 $\\mu_{n}$ 的表达式中：\n$$\n\\mu_{n}=\\frac{1}{n}\\left((n-1)\\mu_{n-1}+x_{n}\\right)=\\frac{n-1}{n}\\mu_{n-1}+\\frac{1}{n}x_{n}.\n$$\n与更新形式 $\\mu_{n}=A_{n}\\mu_{n-1}+B_{n}x_{n}$ 进行比较，我们确定\n$$\nB_{n}=\\frac{1}{n}.\n$$", "answer": "$$\\boxed{\\frac{1}{n}}$$", "id": "1934443"}]}
{"hands_on_practices": [{"introduction": "掌握斯皮尔曼等级相关系数 (Spearman's rank correlation coefficient) 的第一步是熟练运用其核心计算公式。这个练习提供了一个理想的起点，让你直接使用已知的等级差异平方和 $\\sum d_i^2$ 和样本量 $n$。通过这个直接的计算，你可以专注于理解和应用基本的斯皮尔曼公式，为后续更复杂的分析打下坚实的基础 [@problem_id:1955993]。", "problem": "一位教育研究者正在研究学生在两门不同的定量学科——离散数学和算法思维——方面的能力之间的关系。为此，一个由10名学生组成的小组接受了这两门学科的标准化测试。然后，学生在每门学科上的得分被独立排名，从1（最高分）到10（最低分）。设第$i$个学生在离散数学中的排名为$x_i$，在算法思维中的排名为$y_i$。研究者计算了每个学生的排名差异，$d_i = x_i - y_i$。在处理完所有$n=10$名学生的数据后，发现这些排名差异的平方和为$\\sum_{i=1}^{10} d_i^2 = 33$。\n\n根据这些信息，计算该数据集的斯皮尔曼等级相关系数。将最终答案四舍五入到三位有效数字。", "solution": "对于无相同位次的两个排名，斯皮尔曼等级相关系数由以下公式给出：\n$$\nr_s = 1 - \\frac{6 \\sum_{i=1}^{n} d_{i}^{2}}{n\\left(n^{2} - 1\\right)}.\n$$\n在这里，$n = 10$ 且 $\\sum_{i=1}^{10} d_{i}^{2} = 33$。代入这些值：\n$$\nr_s = 1 - \\frac{6 \\cdot 33}{10\\left(10^{2} - 1\\right)} = 1 - \\frac{198}{10 \\cdot 99}.\n$$\n计算分母：\n$$\n10 \\cdot 99 = 990,\n$$\n所以\n$$\nr_s = 1 - \\frac{198}{990}.\n$$\n化简分数：\n$$\n\\frac{198}{990} = \\frac{198 \\div 99}{990 \\div 99} = \\frac{2}{10} = 0.2,\n$$\n因此\n$$\nr_s = 1 - 0.2 = 0.8.\n$$\n四舍五入到三位有效数字，结果是$0.800$。", "answer": "$$\\boxed{0.800}$$", "id": "1955993"}, {"introduction": "在现实世界的数据分析中，我们经常会遇到“结”(ties)——即多个观测值具有相同的数值，导致它们获得相同的平均等级。处理这些结是准确计算斯皮尔曼相关系数的关键一步，因为简化的公式在这种情况下不再适用。本练习将引导你处理一个包含多个结的数据集，通过从原始分数开始分配等级并计算相关性，来掌握这一重要的实践技能 [@problem_id:1955987]。", "problem": "两位技术评论家Alex和Ben各自独立评测了一批新的八款不同型号的智能手表。他们各自对每款手表在1到10的范围内给出了一个综合性能评分。目标是衡量他们等级之间的一致性程度。他们给出的分数如下：\n\n- 型号 1：Alex (8.5)，Ben (8.0)\n- 型号 2：Alex (7.0)，Ben (7.5)\n- 型号 3：Alex (9.0)，Ben (9.0)\n- 型号 4：Alex (7.0)，Ben (6.5)\n- 型号 5：Alex (8.0)，Ben (8.0)\n- 型号 6：Alex (9.5)，Ben (9.5)\n- 型号 7：Alex (8.5)，Ben (9.0)\n- 型号 8：Alex (7.5)，Ben (7.0)\n\n计算该数据集的斯皮尔曼等级相关系数。将最终答案四舍五入至四位有效数字。", "solution": "斯皮尔曼等级相关系数定义为等级变量的皮尔逊相关系数。我们首先将分数转换为等级，其中最高分记为等级1。对于平级（相同分数），分配其平均等级。对$n=8$个型号的分数进行降序排名后，我们得到Alex的等级序列$R_i$和Ben的等级序列$S_i$：\n$R=(3.5,\\, 7.5,\\, 2,\\, 7.5,\\, 5,\\, 1,\\, 3.5,\\, 6)$\n$S=(4.5,\\, 6,\\, 2.5,\\, 8,\\, 4.5,\\, 1,\\, 2.5,\\, 7)$\n两个等级列表的样本均值均为 $\\bar{R}=\\bar{S}=\\frac{1+2+\\cdots+8}{8}=\\frac{36}{8}=4.5$。\n定义偏差 $\\Delta R_{i}=R_{i}-\\bar{R}$ 和 $\\Delta S_{i}=S_{i}-\\bar{S}$。那么\n$\\Delta R=(-1.0,\\, 3.0,\\, -2.5,\\, 3.0,\\, 0.5,\\, -3.5,\\, -1.0,\\, 1.5)$\n$\\Delta S=(0.0,\\, 1.5,\\, -2.0,\\, 3.5,\\, 0.0,\\, -3.5,\\, -2.0,\\, 2.5)$\n计算所需的各项和：\n$\\sum_{i=1}^{8}\\Delta R_{i}\\Delta S_{i} = 0 + 4.5 + 5.0 + 10.5 + 0 + 12.25 + 2.0 + 3.75 = 38$\n$\\sum_{i=1}^{8}(\\Delta R_{i})^{2} = 1 + 9 + 6.25 + 9 + 0.25 + 12.25 + 1 + 2.25 = 41$\n$\\sum_{i=1}^{8}(\\Delta S_{i})^{2} = 0 + 2.25 + 4 + 12.25 + 0 + 12.25 + 4 + 6.25 = 41$\n因此，斯皮尔曼等级相关系数为：\n$$r_{s}=\\frac{\\sum_{i=1}^{8}\\Delta R_{i}\\Delta S_{i}}{\\sqrt{\\left(\\sum_{i=1}^{8}(\\Delta R_{i})^{2}\\right)\\left(\\sum_{i=1}^{8}(\\Delta S_{i})^{2}\\right)}}=\\frac{38}{\\sqrt{41\\cdot 41}}=\\frac{38}{41}$$\n数值上，四舍五入到四位有效数字，\n$$r_{s}\\approx 0.9268$$", "answer": "$$\\boxed{0.9268}$$", "id": "1955987"}, {"introduction": "理解一个统计量不仅在于如何计算它，更在于理解其数值背后的含义。当斯皮尔曼相关系数为零时，意味着什么？这个练习不是一个简单的计算题，而是一个概念性的挑战，要求你逆向思考：找出什么样的等级排列组合，会使得两个变量之间不存在单调关系，即 $r_s = 0$。通过解决这个问题，你将对斯皮尔曼相关系数的解释建立更深刻的直觉 [@problem_id:1956003]。", "problem": "在一场数据分析竞赛中，两位评委被要求对四个新的机器学习模型（标记为 A、B、C 和 D）进行排名。排名从1（最优）到4（最差），不允许并列。评委1对模型 A、B、C、D 提交的排名分别为 $(x_1, x_2, x_3, x_4) = (1, 2, 3, 4)$。评委2提交了一组不同的排名 $(y_1, y_2, y_3, y_4)$，它是数字 $(1, 2, 3, 4)$ 的一个排列。\n\n在分析他们的评分后，发现两组排名之间的 Spearman 等级相关系数恰好为 0。对于 $n$ 对没有并列排名的等级，Spearman 系数 $r_s$ 的公式如下：\n$$r_s = 1 - \\frac{6 \\sum_{i=1}^{n} d_i^2}{n(n^2 - 1)}$$\n其中 $d_i = x_i - y_i$ 是第 $i$ 个模型的排名之差。\n\n可以证明，评委2可能提交的有序排名集合恰好有两个。设这两个集合用向量 $S_1 = (y_{1,1}, y_{1,2}, y_{1,3}, y_{1,4})$ 和 $S_2 = (y_{2,1}, y_{2,2}, y_{2,3}, y_{2,4})$ 表示。计算这两个向量的点积，定义为 $\\sum_{i=1}^{4} y_{1,i} y_{2,i}$。", "solution": "给定 $n=4$，无并列排名，且 $r_{s}=0$，根据斯皮尔曼公式\n$$r_{s}=1-\\frac{6\\sum_{i=1}^{n}d_{i}^{2}}{n(n^{2}-1)}$$\n可得\n$$0=1-\\frac{6\\sum_{i=1}^{4}d_{i}^{2}}{4(4^{2}-1)} \\quad\\Rightarrow\\quad \\sum_{i=1}^{4}d_{i}^{2}=\\frac{4(16-1)}{6}=10,$$\n其中 $d_{i}=x_{i}-y_{i}$ 且 $(x_{1},x_{2},x_{3},x_{4})=(1,2,3,4)$。\n\n由于 $y$ 是 $(1,2,3,4)$ 的一个排列，\n$$\\sum_{i=1}^{4}(i-y_{i})^{2}=\\sum_{i=1}^{4}i^{2}+\\sum_{i=1}^{4}y_{i}^{2}-2\\sum_{i=1}^{4}i\\,y_{i}=30+30-2\\sum_{i=1}^{4}i\\,y_{i}.$$\n令其等于 $10$ 可得\n$$60-2\\sum_{i=1}^{4}i\\,y_{i}=10 \\quad\\Rightarrow\\quad \\sum_{i=1}^{4}i\\,y_{i}=25.$$\n\n因此，我们需要寻找 $(1,2,3,4)$ 的排列 $y=(y_1, y_2, y_3, y_4)$，使得 $\\sum_{i=1}^{4}i\\,y_{i}=25$。我们来系统地确定所有这样的排列。\n\n通过枚举或代数推理，可以找到满足条件的两个排列。\n- 检查排列 $y=(2,4,1,3)$：\n$\\sum i y_i = 1(2) + 2(4) + 3(1) + 4(3) = 2 + 8 + 3 + 12 = 25$。这是一个解。\n- 检查排列 $y=(3,1,4,2)$：\n$\\sum i y_i = 1(3) + 2(1) + 3(4) + 4(2) = 3 + 2 + 12 + 8 = 25$。这是另一个解。\n经过全面搜索，可以确认这是仅有的两个解。\n\n因此，两个可能的有序排名向量是 $S_{1}=(3,1,4,2)$ 和 $S_{2}=(2,4,1,3)$（命名顺序可互换）。它们的点积是\n$$\\sum_{i=1}^{4}y_{1,i}\\,y_{2,i} = 3\\cdot 2 + 1\\cdot 4 + 4\\cdot 1 + 2\\cdot 3 = 6 + 4 + 4 + 6 = 20.$$", "answer": "$$\\boxed{20}$$", "id": "1956003"}]}
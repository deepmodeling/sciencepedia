{"hands_on_practices": [{"introduction": "第一个练习将我们对条件期望的理解置于一个熟悉的离散情境中：掷骰子。通过计算在一个关于总和的条件下，其中一个骰子的期望值，你将直接应用条件期望的基本定义。这个实践对于建立关于新信息如何改变我们对结果的期望的直觉至关重要。[@problem_id:1905679]", "problem": "独立地掷两个公平的六面骰子。令 $X_1$ 表示第一个骰子的点数，$X_2$ 表示第二个骰子的点数。计算在两个骰子点数之和 $X_1+X_2$ 小于 5 的条件下，第一个骰子点数 $X_1$ 的期望值。将你的答案表示为最简分数形式。", "solution": "设 $X_{1}$ 和 $X_{2}$ 是两个独立的公平六面骰子的点数，因此每个有序对 $(i,j)$（其中 $i,j \\in \\{1,2,3,4,5,6\\}$）出现的概率为 $1/36$。定义事件 $A=\\{X_{1}+X_{2}<5\\}$。根据离散随机变量的条件期望定义，我们有\n$$\n\\mathbb{E}[X_{1}\\mid A]=\\sum_{(i,j)\\in A} i\\;\\mathbb{P}((i,j)\\mid A).\n$$\n由于所有点数对都是等可能的，并且事件 $A$ 恰好由满足 $i+j<5$ 的点数对组成，我们首先枚举出\n$$\nA=\\{(1,1),(1,2),(2,1),(1,3),(2,2),(3,1)\\}.\n$$\n因此 $|A|=6$，所以\n$$\n\\mathbb{P}(A)=\\frac{6}{36}=\\frac{1}{6},\\qquad \\mathbb{P}((i,j)\\mid A)=\\frac{\\mathbb{P}((i,j))}{\\mathbb{P}(A)}=\\frac{1/36}{1/6}=\\frac{1}{6}\\quad \\text{对于每个 }(i,j)\\in A.\n$$\n因此，\n$$\n\\mathbb{E}[X_{1}\\mid A]=\\sum_{(i,j)\\in A} i\\cdot \\frac{1}{6}=\\frac{1}{6}\\sum_{(i,j)\\in A} i.\n$$\n计算在 $A$ 上第一个坐标的总和：\n$$\n\\sum_{(i,j)\\in A} i=1+1+2+1+2+3=10.\n$$\n因此\n$$\n\\mathbb{E}[X_{1}\\mid X_{1}+X_{2}<5]=\\frac{1}{6}\\cdot 10=\\frac{5}{3}.\n$$", "answer": "$$\\boxed{\\frac{5}{3}}$$", "id": "1905679"}, {"introduction": "现在我们从离散随机变量过渡到连续随机变量，这是许多科学和工程应用中的常见情景。在这个问题中，你将计算一个随机选择的点的其中一个坐标（$Y$）的期望值，条件是已知另一个坐标（$X$）的值。这需要你首先确定条件概率密度，这是处理连续空间中条件期望的一项关键技能。[@problem_id:1905673]", "problem": "一个点 $(X, Y)$ 从笛卡尔平面第一象限内的区域 $R$ 中均匀随机地选取。区域 $R$ 由曲线 $y = \\sqrt{x}$ 和 $y = x^3$ 所围成。对于 $0 < x < 1$，当随机变量 $X$ 的取值为 $x$ 时，求随机变量 $Y$ 的条件期望。您的答案应为一个关于 $x$ 的闭式解析表达式。", "solution": "在第一象限中，由 $y=\\sqrt{x}$ 和 $y=x^{3}$ 所围成的区域 $R$ 的交点满足 $\\sqrt{x}=x^{3}$，这得到 $x=x^{6}$，因此 $x=0$ 或 $x=1$。对于 $0<x<1$，在一个固定的 $x$ 值处，其垂直截面范围是从 $y_{\\ell}=x^{3}$ 到 $y_{u}=\\sqrt{x}$，其中 $y_{u}>y_{\\ell}$。\n\n由于 $(X,Y)$ 在 $R$ 上均匀分布，其联合密度函数为\n$$\nf_{X,Y}(x,y)=\\frac{1}{|R|} \\quad \\text{对于 } (x,y)\\in R,\n$$\n其中 $|R|$ 是 $R$ 的面积。对于 $0<x<1$，$X$ 的边缘密度函数为\n$$\nf_{X}(x)=\\int_{y=x^{3}}^{\\sqrt{x}} \\frac{1}{|R|}\\,dy=\\frac{\\sqrt{x}-x^{3}}{|R|}.\n$$\n因此，对于 $0<x<1$，给定 $X=x$ 时 $Y$ 的条件密度函数为\n$$\nf_{Y\\mid X}(y\\mid x)=\\frac{f_{X,Y}(x,y)}{f_{X}(x)}=\\frac{1/|R|}{(\\sqrt{x}-x^{3})/|R|}=\\frac{1}{\\sqrt{x}-x^{3}}, \\quad x^{3}\\leq y\\leq \\sqrt{x}.\n$$\n因此，条件期望是\n$$\n\\mathbb{E}[Y\\mid X=x]=\\int_{x^{3}}^{\\sqrt{x}} y\\,f_{Y\\mid X}(y\\mid x)\\,dy=\\int_{x^{3}}^{\\sqrt{x}} \\frac{y}{\\sqrt{x}-x^{3}}\\,dy.\n$$\n计算该积分，\n$$\n\\mathbb{E}[Y\\mid X=x]=\\left.\\frac{y^{2}}{2(\\sqrt{x}-x^{3})}\\right|_{y=x^{3}}^{y=\\sqrt{x}}=\\frac{(\\sqrt{x})^{2}-(x^{3})^{2}}{2(\\sqrt{x}-x^{3})}=\\frac{x-x^{6}}{2(\\sqrt{x}-x^{3})}.\n$$\n为了化简，记 $x-x^{6}=x(1-x^{5})$ 和 $\\sqrt{x}-x^{3}=x^{1/2}(1-x^{5/2})$，并令 $z=x^{5/2}$，\n$$\n\\frac{x-x^{6}}{2(\\sqrt{x}-x^{3})}=\\frac{x(1-z^{2})}{2x^{1/2}(1-z)}=\\frac{x^{1/2}}{2}(1+z)=\\frac{1}{2}\\left(x^{1/2}+x^{3}\\right).\n$$\n因此，对于 $0<x<1$，\n$$\n\\mathbb{E}[Y\\mid X=x]=\\frac{x^{1/2}+x^{3}}{2}.\n$$", "answer": "$$\\boxed{\\frac{x^{1/2}+x^{3}}{2}}$$", "id": "1905673"}, {"introduction": "最后的这个练习是一个经典且更具挑战性的问题，它展示了条件期望作为一种解决问题策略的强大威力。要找到一根被折断两次的木棍中最短那段的期望长度，直接计算是困难的。解决关键在于应用全期望定律，首先以第一次折断的结果为条件，这展示了条件化如何能够优雅地简化复杂情景。[@problem_id:1905654]", "problem": "一根长度为 $L$ 的刚性杆，在其长度上一个均匀随机选择的点被折断。第一次折断将杆分成两段。然后，选出这两段中较长的一段，并同样在其长度上一个均匀随机选择的点将其折断。第二次折断将被选中的那段分成两个更小的段。该过程结束后，总共得到三段杆。\n\n这三段中最短那一段的期望长度是多少？\n\n请用关于 $L$ 的解析表达式作答。", "solution": "设杆的原始长度为 $L$。\n\n步骤 1：定义随机变量并对过程建模。\n设第一次折断发生在位置 $X$ 处，其中 $X$ 是一个在 $(0, L)$ 上均匀分布的随机变量。$X$ 的概率密度函数 (PDF) 为 $f_X(x) = 1/L$，对于 $x \\in (0, L)$。这次折断产生了长度为 $X$ 和 $L-X$ 的两段。\n\n较长一段的长度为 $L_{long} = \\max(X, L-X)$，较短一段的长度为 $L_{short} = \\min(X, L-X)$。\n根据对称性，我们可以只分析第一次折断位置 $X$ 在 $(L/2, L)$ 内的情况，然后将结果乘以 2。或者，更正式地，我们可以对 $X$ 的整个取值范围使用全期望定律。\n设 $S$ 为最终三段中最短一段的长度。我们想要求出 $E[S]$。\n使用全期望定律，我们以第一次折断的位置 $X$ 为条件：\n$$E[S] = E[E[S|X]] = \\int_{0}^{L} E[S|X=x] f_X(x) dx = \\frac{1}{L} \\int_{0}^{L} E[S|X=x] dx$$\n该问题关于 $X=L/2$ 对称。条件期望 $E[S|X=x]$ 的值与 $E[S|X=L-x]$ 的值相同。因此，我们可以写出：\n$$E[S] = \\frac{2}{L} \\int_{L/2}^{L} E[S|X=x] dx$$\n\n步骤 2：计算当 $x \\in (L/2, L)$ 时，条件期望 $E[S|X=x]$ 的值。\n如果 $X=x$ 且 $x \\in (L/2, L)$，则最初的两段长度为 $x$ 和 $L-x$。较长的一段长度为 $x$，较短的一段长度为 $L-x$。第二次折断在长度为 $x$ 的那段上进行。设 $Y$ 为第二次折断产生的一段的长度的随机变量。$Y$ 在 $(0, x)$ 上均匀分布。这次折断产生的两段长度为 $Y$ 和 $x-Y$。\n最终得到的三段长度分别为 $L-x$，$Y$ 和 $x-Y$。\n在 $X=x$ 的条件下，最短那段长度的条件期望是：\n$$E[S|X=x] = E_Y[\\min(L-x, Y, x-Y)]$$\n其中期望是针对 $Y \\sim U(0, x)$ 求的。令 $c = L-x$。\n$$E[S|X=x] = \\frac{1}{x} \\int_0^x \\min(c, y, x-y) dy$$\n项 $\\min(y, x-y)$ 关于 $y=x/2$ 对称。所以我们可以简化积分为：\n$$\\int_0^x \\min(c, y, x-y) dy = \\int_0^x \\min(c, \\min(y, x-y)) dy = 2 \\int_0^{x/2} \\min(c, y) dy$$\n我们需要将常数 $c=L-x$ 与积分变量 $y \\in [0, x/2]$ 进行比较。比较的临界点取决于 $c$ 是大于还是小于 $y$ 的最大值 $x/2$。\n条件是 $L-x > x/2$，可简化为 $L > 3x/2$，或 $x < 2L/3$。\n\n情况 1：$x \\in (L/2, 2L/3)$。\n在这个区间内，$L-x > x/2$。对于任何 $y \\in (0, x/2)$，我们有 $y < x/2 < L-x = c$。因此，$\\min(c,y)=y$。\n积分变为 $2 \\int_0^{x/2} y dy = 2 \\left[\\frac{y^2}{2}\\right]_0^{x/2} = \\left(\\frac{x}{2}\\right)^2 = \\frac{x^2}{4}$。\n所以，$E[S|X=x] = \\frac{1}{x} \\cdot \\frac{x^2}{4} = \\frac{x}{4}$。\n\n情况 2：$x \\in (2L/3, L)$。\n在这个区间内，$L-x < x/2$。所以，我们必须在 $y=c=L-x$ 处将积分拆开。\n积分是 $2 \\left( \\int_0^{c} y dy + \\int_{c}^{x/2} c dy \\right) = 2 \\left( \\left[\\frac{y^2}{2}\\right]_0^c + c[y]_c^{x/2} \\right) = 2 \\left( \\frac{c^2}{2} + c\\left(\\frac{x}{2}-c\\right) \\right)$。\n这可以简化为 $c^2 + cx - 2c^2 = cx - c^2 = c(x-c)$。\n代入 $c=L-x$：$(L-x)(x - (L-x)) = (L-x)(2x-L)$。\n所以，$E[S|X=x] = \\frac{(L-x)(2x-L)}{x}$。\n\n步骤 3：通过积分计算总期望。\n现在我们将这些条件期望代回到 $E[S]$ 的主公式中：\n$$E[S] = \\frac{2}{L} \\left[ \\int_{L/2}^{2L/3} \\frac{x}{4} dx + \\int_{2L/3}^{L} \\frac{(L-x)(2x-L)}{x} dx \\right]$$\n第一个积分：\n$$I_1 = \\int_{L/2}^{2L/3} \\frac{x}{4} dx = \\frac{1}{4}\\left[\\frac{x^2}{2}\\right]_{L/2}^{2L/3} = \\frac{1}{8}\\left(\\left(\\frac{2L}{3}\\right)^2 - \\left(\\frac{L}{2}\\right)^2\\right) = \\frac{1}{8}\\left(\\frac{4L^2}{9} - \\frac{L^2}{4}\\right) = \\frac{1}{8}\\left(\\frac{7L^2}{36}\\right) = \\frac{7L^2}{288}$$\n第二个积分：\n$$I_2 = \\int_{2L/3}^{L} \\frac{2Lx - L^2 - 2x^2 + Lx}{x} dx = \\int_{2L/3}^{L} \\left(-2x + 3L - \\frac{L^2}{x}\\right) dx$$\n$$I_2 = \\left[-x^2 + 3Lx - L^2\\ln(x)\\right]_{2L/3}^{L}$$\n代入积分上下限求值：\n上限 ($x=L$): $-L^2 + 3L^2 - L^2\\ln(L) = 2L^2 - L^2\\ln(L)$。\n下限 ($x=2L/3$): $-\\left(\\frac{2L}{3}\\right)^2 + 3L\\left(\\frac{2L}{3}\\right) - L^2\\ln\\left(\\frac{2L}{3}\\right) = -\\frac{4L^2}{9} + 2L^2 - L^2\\ln\\left(\\frac{2L}{3}\\right) = \\frac{14L^2}{9} - L^2\\ln\\left(\\frac{2L}{3}\\right)$。\n积分 $I_2$ 的值为两者之差：\n$$I_2 = \\left(2L^2 - L^2\\ln(L)\\right) - \\left(\\frac{14L^2}{9} - L^2\\ln\\left(\\frac{2L}{3}\\right)\\right) = \\left(2-\\frac{14}{9}\\right)L^2 - L^2\\left(\\ln(L) - \\ln\\left(\\frac{2L}{3}\\right)\\right)$$\n$$I_2 = \\frac{4L^2}{9} - L^2\\ln\\left(\\frac{L}{2L/3}\\right) = \\frac{4L^2}{9} - L^2\\ln\\left(\\frac{3}{2}\\right)$$\n\n步骤 4：合并结果。\n现在，我们将两个积分相加：\n$$\\int_{L/2}^{L} E[S|X=x] dx = I_1 + I_2 = \\frac{7L^2}{288} + \\frac{4L^2}{9} - L^2\\ln\\left(\\frac{3}{2}\\right)$$\n为了对分数求和，先通分，公分母为 288。$\\frac{4L^2}{9} = \\frac{4 \\times 32 L^2}{9 \\times 32} = \\frac{128L^2}{288}$。\n$$I_1 + I_2 = \\frac{7L^2+128L^2}{288} - L^2\\ln\\left(\\frac{3}{2}\\right) = \\frac{135L^2}{288} - L^2\\ln\\left(\\frac{3}{2}\\right)$$\n该分数可化简为：$\\frac{135}{288} = \\frac{9 \\times 15}{9 \\times 32} = \\frac{15}{32}$。\n$$I_1 + I_2 = \\frac{15L^2}{32} - L^2\\ln\\left(\\frac{3}{2}\\right)$$\n最后，我们计算 $E[S]$：\n$$E[S] = \\frac{2}{L} (I_1 + I_2) = \\frac{2}{L} \\left(\\frac{15L^2}{32} - L^2\\ln\\left(\\frac{3}{2}\\right)\\right) = \\frac{15L}{16} - 2L\\ln\\left(\\frac{3}{2}\\right)$$\n这可以因式分解为 $L\\left(\\frac{15}{16} - 2\\ln\\left(\\frac{3}{2}\\right)\\right)$。", "answer": "$$\\boxed{L\\left(\\frac{15}{16} - 2\\ln\\left(\\frac{3}{2}\\right)\\right)}$$", "id": "1905654"}]}
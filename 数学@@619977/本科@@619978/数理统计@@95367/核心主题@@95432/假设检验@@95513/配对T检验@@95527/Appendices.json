{"hands_on_practices": [{"introduction": "这项练习提供了一个经典的配对研究设计场景：检验背景音乐对记忆力的影响。通过这个贴近生活的例子，你将练习配对 t 检验的核心计算步骤，包括计算差异、均值、标准差，并最终得出 t 统计量。这个练习将巩固你对如何量化配对观测值之间的差异，并确定该差异是否具有统计显著性的理解 [@problem_id:1942735]。", "problem": "一位认知科学家正在研究背景音乐对短期记忆的影响。十名学生志愿者参加了一项实验。每名学生参加两次难度相当的标准化记忆测试，每次测试满分为100分。在一次测试中，学生在完全安静的房间里学习15分钟。在另一次测试中，学生在听一首特定的古典音乐的同时学习15分钟。为了防止偏误，两种条件（安静 vs. 音乐）的顺序对每名学生是随机的。每名学生在两种条件下的得分记录如下：\n\n| 学生 | 得分（安静） | 得分（音乐） |\n|:----:|:------------:|:------------:|\n| 1    | 75           | 78           |\n| 2    | 82           | 85           |\n| 3    | 68           | 67           |\n| 4    | 77           | 81           |\n| 5    | 90           | 94           |\n| 6    | 85           | 88           |\n| 7    | 73           | 73           |\n| 8    | 65           | 69           |\n| 9    | 88           | 92           |\n| 10   | 79           | 81           |\n\n为了确定两种条件之间是否存在统计学上的显著差异，该科学家决定进行配对t检验。根据这些数据，计算配对t检验统计量的值。将您的最终答案四舍五入到三位有效数字。", "solution": "我们通过定义配对差异 $d_{i}=\\text{Music}_{i}-\\text{Silent}_{i}$ 来进行配对t检验。根据数据，差异值为\n$$\nd_{i}\\in\\{3,\\,3,\\,-1,\\,4,\\,4,\\,3,\\,0,\\,4,\\,4,\\,2\\}.\n$$\n令 $n=10$。样本平均差异为\n$$\n\\bar{d}=\\frac{1}{n}\\sum_{i=1}^{n}d_{i}=\\frac{26}{10}=\\frac{13}{5}.\n$$\n计算差异的平方和：\n$$\n\\sum d_{i}^{2}=9+9+1+16+16+9+0+16+16+4=96.\n$$\n使用计算公式，差异的样本方差（除数为 $n-1$）为\n$$\ns_{d}^{2}=\\frac{\\sum d_{i}^{2}-n\\bar{d}^{2}}{n-1}\n=\\frac{96-10\\left(\\frac{13}{5}\\right)^{2}}{9}\n=\\frac{96-\\frac{1690}{25}}{9}\n=\\frac{\\frac{2400-1690}{25}}{9}\n=\\frac{\\frac{710}{25}}{9}\n=\\frac{142}{45}.\n$$\n因此，平均差异的标准误为\n$$\n\\text{SE}=\\frac{s_{d}}{\\sqrt{n}}=\\frac{\\sqrt{\\frac{142}{45}}}{\\sqrt{10}}=\\sqrt{\\frac{71}{225}}.\n$$\n配对t统计量为\n$$\nt=\\frac{\\bar{d}}{\\text{SE}}=\\frac{\\frac{13}{5}}{\\sqrt{\\frac{71}{225}}}\n=\\frac{39}{\\sqrt{71}}\\approx 4.63,\n$$\n四舍五入到三位有效数字。", "answer": "$$\\boxed{4.63}$$", "id": "1942735"}, {"introduction": "对于任何数据分析师来说，一项关键技能不仅是会执行检验，还要知道*何时*适用某个检验。这个问题将挑战你批判性地思考配对 t 检验背后的假设，特别是差异的正态性假设。通过分析一个包含潜在异常值的数据集，你将学会如何论证选择一个更稳健的非参数替代方法（如符号检验）的合理性，这强调了理解统计方法前提条件的重要性 [@problem_id:1963411]。", "problem": "一位认知心理学家正在研究某种草本补充剂对认知反应速度的影响。十名健康的成年志愿者参与了这项研究。在服用补充剂之前，测量了每位参与者对视觉刺激的反应时间，单位为毫秒（ms）。在服用标准剂量的补充剂一小时后，再次测量他们对同类型刺激的反应时间。十名参与者的配对测量值（服用前，服用后）记录如下：(510, 495), (530, 520), (480, 485), (505, 490), (650, 530), (515, 500), (495, 490), (525, 510), (720, 540) 和 (500, 495)。\n\n研究者希望确定该补充剂是否对反应时间有统计上显著的影响。在决定使用配对t检验还是符号检验来分析这些数据时，有人主张优先选择符号检验。下列哪个陈述为此偏好提供了最佳的统计学理由？\n\nA. 配对t检验假设配对观测值之间的差异近似呈正态分布。该数据集中存在的少数几个非常大的差异使得这一假设值得怀疑，而符号检验则不需要正态性。\n\nB. 无论数据分布如何，符号检验的统计功效总是比配对t检验更高，这使其成为检测效应的更优选择。\n\nC. 样本量为10太小，无法使用配对t检验，根据中心极限定理，该检验需要至少30个观测值才有效。\n\nD. 必须使用符号检验，因为数据中包含负差异（480 - 485 = -5），而配对t检验仅在所有差异均为正时才有效。\n\nE. 符号检验的计算要简单得多，因此与配对t检验所需的更复杂的公式相比，更不容易出现计算错误。", "solution": "将配对差异定义为 $d_{i}=\\text{After}_{i}-\\text{Before}_{i}$，其中 $i=1,\\dots,10$。根据数据，差异值为\n$$\nd_{1}=-15,\\ d_{2}=-10,\\ d_{3}=+5,\\ d_{4}=-15,\\ d_{5}=-120,\\ d_{6}=-15,\\ d_{7}=-5,\\ d_{8}=-15,\\ d_{9}=-180,\\ d_{10}=-5.\n$$\n配对 $t$-检验将差异值建模为独立同分布的正态随机变量，$d_{i}\\sim \\mathcal{N}(\\mu_{d},\\sigma_{d}^{2})$，并使用统计量来检验 $H_{0}:\\mu_{d}=0$\n$$\nt=\\frac{\\bar{d}-0}{s_{d}/\\sqrt{n}},\n$$\n当 $n$ 较小时，该检验依赖于 $d_{i}$ 的近似正态性。相对于其余差异值，数据中存在两个绝对值非常大的差异值（-120和-180），这使得关于 $d_{i}$ 的正态性假设变得可疑，并且使 $t$-检验对异常值敏感。\n\n相比之下，符号检验检验的是差异值的中位数，而无需假设正态性。在原假设 $H_{0}$（即中位数差异为零）下， $d_{i}$ 的符号被建模为独立同分布的伯努利随机变量，其中 $P(d_{i}>0)=\\frac{1}{2}$，从而得到正号的二项计数。因为它只使用符号而不使用数值大小，所以它对异常值具有稳健性，并且不需要 $d_{i}$ 具有正态性。\n\n因此，在此处偏好使用符号检验的合乎统计学的理由是，由于存在少数几个非常大的差异值，配对差异的近似正态性假设是值得怀疑的，而符号检验则不需要正态性。这对应于选项A。其他选项是错误的：符号检验的功效并非总是高于配对 $t$-检验；配对 $t$-检验不要求 $n\\geq 30$；负差异的存在不会使 $t$-检验无效；计算的简便性不是一个统计学上的理由。", "answer": "$$\\boxed{A}$$", "id": "1963411"}, {"introduction": "这最后一个练习将带你进入数据科学的前沿，应用配对 t 检验来比较机器学习模型。与简单的数值计算不同，你将推导一个解析表达式，将统计显著性与模型性能之间的相关性 $r$ 联系起来。这个高级问题揭示了相关性与配对 t 检验功效之间的深刻关系，阐明了当配对测量值呈正相关时，为何配对设计如此有效 [@problem_id:1942781]。", "problem": "一位数据科学家使用$k$折交叉验证程序，在一个分类任务上评估了两个不同的机器学习模型，即 Model A 和 Model B。两个模型使用了相同的$k$个数据折，产生了$k$对准确率的配对测量值。设 $A_i$ 和 $B_i$ 分别为 Model A 和 Model B 在第 $i$ 折上的准确率，其中 $i = 1, \\dots, k$。\n\n原始的每折准确率数据因存储故障而丢失。但是，以下摘要统计信息得以保留：\n- 折数，$k$。\n- Model A 的样本平均准确率 $\\bar{A}$ 和 Model B 的样本平均准确率 $\\bar{B}$。\n- Model A 准确率的样本标准差 $s_A$ 和 Model B 准确率的样本标准差 $s_B$。\n\n该数据科学家想要检验原假设 $H_0: \\mu_A = \\mu_B$ 与备择假设 $H_1: \\mu_A \\neq \\mu_B$，其中 $\\mu_A$ 和 $\\mu_B$ 是真实的平均准确率。配对t检验适用于此场景。该检验将在显著性水平 $\\alpha$ 下进行。设 $t_{crit}$ 为自由度为 $k-1$ 的t分布的正临界值，当计算出的t统计量的绝对值大于或等于 $t_{crit}$ 时，结果具有统计显著性。\n\n假设观察到的样本均值显示 Model A 的性能更好，即 $\\bar{A} > \\bar{B}$。该数据科学家还有一个工具，可以计算准确率集合 $\\{A_1, \\dots, A_k\\}$ 和 $\\{B_1, \\dots, B_k\\}$ 之间的 Pearson 相关系数 $r$。为了达到统计显著性，必须观测到的该相关系数的最小值 $r_{min}$ 是多少？\n\n请用 $k$、$\\bar{A}$、$\\bar{B}$、$s_A$、$s_B$ 和 $t_{crit}$ 推导出 $r_{min}$ 的闭式解析表达式。", "solution": "问题要求的是，使用配对t检验来确定 Model A 和 Model B 性能之间存在统计显著性差异所需的最小 Pearson 相关系数 $r_{min}$。\n\n适用于此配对数据的检验是配对t检验。我们定义一个新变量 $D_i = A_i - B_i$，表示每折 $i$ 的准确率差异。原假设是这些差异的真实均值为零，$H_0: \\mu_D = 0$，备择假设是 $H_1: \\mu_D \\neq 0$。\n\n差异的样本均值为 $\\bar{D} = \\frac{1}{k}\\sum_{i=1}^k D_i = \\frac{1}{k}\\sum_{i=1}^k (A_i - B_i) = \\bar{A} - \\bar{B}$。\n差异的样本标准差是 $s_D$。配对t检验的统计量由下式给出：\n$$t = \\frac{\\bar{D} - 0}{s_D / \\sqrt{k}} = \\frac{\\bar{A} - \\bar{B}}{s_D / \\sqrt{k}}$$\n为了使结果在与临界值 $t_{crit}$ 相对应的水平上具有统计显著性，t统计量的绝对值必须满足 $|t| \\ge t_{crit}$。由于问题陈述 $\\bar{A} > \\bar{B}$，我们有 $\\bar{D} > 0$，因此t统计量将为正。该条件简化为 $t \\ge t_{crit}$。\n\n主要的挑战在于用给定的量（包括 $s_A$、$s_B$ 和相关系数 $r$）来表示 $s_D$。差异的样本方差 $s_D^2$ 定义为：\n$$s_D^2 = \\frac{1}{k-1} \\sum_{i=1}^k (D_i - \\bar{D})^2$$\n代入 $D_i = A_i - B_i$ 和 $\\bar{D} = \\bar{A} - \\bar{B}$：\n$$D_i - \\bar{D} = (A_i - B_i) - (\\bar{A} - \\bar{B}) = (A_i - \\bar{A}) - (B_i - \\bar{B})$$\n因此，$s_D^2$ 的表达式变为：\n$$s_D^2 = \\frac{1}{k-1} \\sum_{i=1}^k \\left[ (A_i - \\bar{A}) - (B_i - \\bar{B}) \\right]^2$$\n展开求和号内的平方项：\n$$s_D^2 = \\frac{1}{k-1} \\sum_{i=1}^k \\left[ (A_i - \\bar{A})^2 - 2(A_i - \\bar{A})(B_i - \\bar{B}) + (B_i - \\bar{B})^2 \\right]$$\n我们可以分配求和运算和因子 $\\frac{1}{k-1}$：\n$$s_D^2 = \\frac{\\sum_{i=1}^k (A_i - \\bar{A})^2}{k-1} + \\frac{\\sum_{i=1}^k (B_i - \\bar{B})^2}{k-1} - 2 \\frac{\\sum_{i=1}^k (A_i - \\bar{A})(B_i - \\bar{B})}{k-1}$$\n我们识别出这些项是样本方差和样本协方差：\n- A 的样本方差：$s_A^2 = \\frac{\\sum_{i=1}^k (A_i - \\bar{A})^2}{k-1}$\n- B 的样本方差：$s_B^2 = \\frac{\\sum_{i=1}^k (B_i - \\bar{B})^2}{k-1}$\n- A 和 B 的样本协方差：$s_{AB} = \\frac{\\sum_{i=1}^k (A_i - \\bar{A})(B_i - \\bar{B})}{k-1}$\n\n因此，差异的方差可以写成：\n$$s_D^2 = s_A^2 + s_B^2 - 2 s_{AB}$$\nPearson 相关系数 $r$ 定义为 $r = \\frac{s_{AB}}{s_A s_B}$。我们可以将协方差表示为 $s_{AB} = r s_A s_B$。将此代入 $s_D^2$ 的方程中：\n$$s_D^2 = s_A^2 + s_B^2 - 2 r s_A s_B$$\n现在，将这个 $s_D^2$ 的表达式代回 t 统计量公式：\n$$t = \\frac{\\bar{A} - \\bar{B}}{\\sqrt{\\frac{s_A^2 + s_B^2 - 2 r s_A s_B}{k}}}$$\n统计显著性的条件是 $t \\ge t_{crit}$。我们正在寻找满足此条件的 $r$ 的最小值。要使t值变大，分母就要变小。分母中的项 $s_A^2 + s_B^2 - 2 r s_A s_B$ 会随着 $r$ 的增大而减小。因此，要满足 $t \\ge t_{crit}$，$r$ 必须足够大。我们通过求解以下不等式来找到 $r$ 的下限：\n$$\\frac{\\bar{A} - \\bar{B}}{\\sqrt{\\frac{s_A^2 + s_B^2 - 2 r s_A s_B}{k}}} \\ge t_{crit}$$\n由于两边都为正，我们可以对它们进行平方而不改变不等式的方向：\n$$\\frac{(\\bar{A} - \\bar{B})^2}{\\frac{s_A^2 + s_B^2 - 2 r s_A s_B}{k}} \\ge t_{crit}^2$$\n现在，我们重新整理不等式来解出 $r$：\n$$k (\\bar{A} - \\bar{B})^2 \\ge t_{crit}^2 (s_A^2 + s_B^2 - 2 r s_A s_B)$$\n$$\\frac{k (\\bar{A} - \\bar{B})^2}{t_{crit}^2} \\ge s_A^2 + s_B^2 - 2 r s_A s_B$$\n分离出含有 $r$ 的项：\n$$2 r s_A s_B \\ge s_A^2 + s_B^2 - \\frac{k (\\bar{A} - \\bar{B})^2}{t_{crit}^2}$$\n由于 $s_A$ 和 $s_B$ 是标准差，它们是非负的。假设它们不为零（否则相关性无定义或为平凡情况），我们可以除以 $2 s_A s_B$：\n$$r \\ge \\frac{s_A^2 + s_B^2}{2 s_A s_B} - \\frac{k (\\bar{A} - \\bar{B})^2}{2 s_A s_B t_{crit}^2}$$\n这个不等式给出了结果要具有显著性时 $r$ 必须满足的条件。因此，所需的 $r$ 的最小值 $r_{min}$ 就是不等式的右侧。\n\n$$r_{min} = \\frac{s_A^2 + s_B^2}{2 s_A s_B} - \\frac{k (\\bar{A} - \\bar{B})^2}{2 s_A s_B t_{crit}^2}$$\n这可以更紧凑地写为：\n$$r_{min} = \\frac{1}{2 s_A s_B} \\left( s_A^2 + s_B^2 - \\frac{k (\\bar{A} - \\bar{B})^2}{t_{crit}^2} \\right)$$\n这就是所需的最小相关系数的最终表达式。", "answer": "$$\\boxed{\\frac{s_A^2 + s_B^2}{2 s_A s_B} - \\frac{k (\\bar{A} - \\bar{B})^2}{2 s_A s_B t_{crit}^2}}$$", "id": "1942781"}]}
{"hands_on_practices": [{"introduction": "要真正掌握置换检验的精髓，最好的方法莫过于亲手实践其核心机制。这个练习将引导你为一个极小的数据集手动构建完整的零分布。通过列出所有可能的分组情况并计算相应的检验统计量，你将直观地理解在零假设下，我们所观察到的效应究竟有多大的可能性是纯粹由随机分配造成的 [@problem_id:1943761]。", "problem": "在一项旨在评估一种新教学法的小型试点研究中，四名学生被随机分成两组，每组两人。“实验组”采用新的教学方法，而“对照组”采用标准方法。在研究期结束时，所有学生都参加相同的水平测试。分数如下：\n\n- 实验组分数：$\\{25, 30\\}$\n- 对照组分数：$\\{15, 18\\}$\n\n为了进行置换检验，必须考虑在教学方法无效（零假设）的前提下，这四个观察到的分数 $\\{15, 18, 25, 30\\}$ 可能被分配给这两个组的每一种可能方式。对于每一种可能的分配，都会计算一个检验统计量。\n\n你的任务是确定该检验统计量的所有可能值的完整集合，该检验统计量被定义为样本均值之差：（实验组均值）-（对照组均值）。\n\n按升序排列出这个均值之差统计量的所有唯一值。", "solution": "在零假设下，每种分配对应于从四个分数中为实验组选择任意两个分数，剩下的两个分数则构成对照组。这种分配的总数为 $\\binom{4}{2}=6$。对于给定的实验组对，其元素为 $t_{1}$ 和 $t_{2}$，对照组则是在集合 $\\{15,18,25,30\\}$ 中的补集。检验统计量是样本均值之差：\n$$\nd=\\text{Mean(Treatment)}-\\text{Mean(Control)}=\\frac{t_{1}+t_{2}}{2}-\\frac{(15+18+25+30)-(t_{1}+t_{2})}{2}.\n$$\n令 $S=15+18+25+30=88$。那么\n$$\nd=\\frac{t_{1}+t_{2}}{2}-\\frac{88-(t_{1}+t_{2})}{2}=\\frac{2(t_{1}+t_{2})-88}{2}=(t_{1}+t_{2})-44.\n$$\n因此，该统计量仅取决于实验组两个分数的总和。列举所有两元素之和：\n- $15+18=33 \\implies d=33-44=-11$，\n- $15+25=40 \\implies d=40-44=-4$，\n- $15+30=45 \\implies d=45-44=1$，\n- $18+25=43 \\implies d=43-44=-1$，\n- $18+30=48 \\implies d=48-44=4$，\n- $25+30=55 \\implies d=55-44=11$。\n收集所有唯一值并按升序排列，得到 $-11,-4,-1,1,4,11$。", "answer": "$$\\boxed{\\begin{pmatrix}-11 & -4 & -1 & 1 & 4 & 11\\end{pmatrix}}$$", "id": "1943761"}, {"introduction": "与参数检验不同，置换检验的 p 值并非连续的，而是由样本量决定的一个离散集合。这个练习将让你思考一个重要的问题：在一个小样本实验中，我们所能获得的最小的非零 p 值是多少？通过解答这个问题，你将深刻理解置换检验的精度限制，以及样本量如何直接影响我们做出统计推断的能力 [@problem_id:1943794]。", "problem": "一家科技公司的数据科学家团队正在进行一项 A/B 测试，旨在探究新的网站布局（布局 A）是否比旧布局（布局 B）更能增加用户参与时间。由于预算所限，他们只能在一小部分用户样本上进行此实验。该研究共选取了 7 名新用户。其中，3 人被随机分配查看布局 A，其余 4 人被分配查看布局 B。\n\n一周后，记录下每位用户的总参与时间。为了分析结果，该团队决定执行单边精确置换检验，以确定布局 A 是否导致了参与时间的统计显著性增加。\n\n假设没有两个用户具有完全相同的参与时间，那么从该检验中可以获得的最小可能非零 p 值是多少？请将您的答案表示为最简分数。", "solution": "在一个分组大小固定的精确置换检验中，原假设意味着在观测到的参与时间数据上，标签具有可交换性。对于 7 名用户（其中 3 人被分配到布局 A，4 人被分配到布局 B），置换分布的构建是基于所有将 3 名用户分配到布局 A 的不同方式。这种分配的总数为\n$$\n\\binom{7}{3}.\n$$\n一个检验布局 A 下参与时间是否增加的单边检验，会使用一个对于布局 A 的结果呈单调性的检验统计量（例如，布局 A 组参与时间的总和或均值）。因为没有两个用户具有相同的参与时间，所以使该统计量最大化的排列是唯一的：即将三个最长的参与时间分配给布局 A。因此，当观测到的分配是这种唯一的最极端配置时，便会产生最小的可能非零 p 值，所以其尾部概率的分子只包含一个置换。因此，\n$$\np_{\\min}=\\frac{1}{\\binom{7}{3}}=\\frac{1}{35}.\n$$\n这就是在所述条件下，单边精确置换检验所能得到的最小可能非零 p 值。", "answer": "$$\\boxed{\\frac{1}{35}}$$", "id": "1943794"}, {"introduction": "当样本量变大时，穷举所有可能的排列组合变得不切实际。此时，我们需要借助计算机的强大能力，通过蒙特卡洛模拟来近似 p 值。这个练习模拟了现实世界中进行置换检验的普遍做法：通过生成大量的随机排列来估计 p 值，并让你学会如何根据模拟结果正确地计算它 [@problem_id:1943826]。", "problem": "研究人员正在进行一项研究，以比较两个不同的在线学习平台（平台A和平台B）的有效性。他们招募了50名学生，并将他们随机分配：25名学生使用平台A学习特定主题，另外25名学生使用平台B学习相同主题。研究期结束后，所有学生都参加了一项标准化测试。我们感兴趣的检验统计量是两组平均测试分数之差的绝对值，即$|\\bar{x}_A - \\bar{x}_B|$。实验中该统计量的观测值为$\\delta_{obs}$。\n\n为确定观测到的差异是否具有统计显著性，研究人员采用了一种置换检验。他们將全部50个测试分数汇总，并通过随机将25个分数重新分配给“平台A”组、25个分数重新分配给“平台B”组的方式，生成了$N=19,999$个新数据集。对于每一次随机置换，他们都计算出一个新的检验统计量$\\delta_{perm}$。他们发现，在这些置换中，有$k=99$次得到的检验统计量大于或等于他们最初的观测值，即$\\delta_{perm} \\ge \\delta_{obs}$。\n\n估计的p值是在所有考虑的结果（$N$次随机置换加上原始观测结果）中，检验统计量至少与观测值一样极端的比例。根据这些结果，计算p值。将您的答案表示为小数，并四舍五入到三位有效数字。", "solution": "置换检验的p值，定义为在所有考虑的结果（原始观测数据集加上随机置换的数据集）中，其检验统计量至少与观测值一样极端的比例，其计算公式为\n$$\n\\hat{p}=\\frac{k+1}{N+1},\n$$\n其中，$N$是随机置换的次数，$k$是满足$\\delta_{perm}\\ge \\delta_{obs}$的置換次数。将观测数据集包含在内，使得分子和分母都加了1。\n\n代入给定值$N=19999$和$k=99$，\n$$\n\\hat{p}=\\frac{99+1}{19999+1}=\\frac{100}{20000}=\\frac{1}{200}=0.005.\n$$\n表示为小数并四舍五入到三位有效数字，结果是\n$$\n0.00500.\n$$", "answer": "$$\\boxed{0.00500}$$", "id": "1943826"}]}
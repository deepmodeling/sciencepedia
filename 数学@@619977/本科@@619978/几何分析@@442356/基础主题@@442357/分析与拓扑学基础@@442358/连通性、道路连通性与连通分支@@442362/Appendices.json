{"hands_on_practices": [{"introduction": "本练习是识别连通分支的基础实践。通过从 $\\mathbb{R}^n$ 中移除所有坐标超平面，我们构建出一个直观但需要严格证明其拓扑结构的空间。该问题引入了一种强大的技巧——使用到离散空间的连续映射来为连通分支分类，为分析更复杂的拓扑空间打下坚实基础。[@problem_id:3043631]", "problem": "设 $n \\geq 1$ 为一整数，并考虑具有其标准拓扑的欧几里得空间 $\\mathbb{R}^{n}$。定义子集\n$$\nX_{n} \\;=\\; \\mathbb{R}^{n} \\setminus \\{ x \\in \\mathbb{R}^{n} : x_{1} x_{2} \\cdots x_{n} = 0 \\} \\;=\\; \\{ x \\in \\mathbb{R}^{n} : x_{i} \\neq 0 \\text{ for every } i = 1,2,\\dots,n \\}.\n$$\n从欧几里得拓扑中连通性、道路连通性、连通分支和连续性的基本定义出发，确定 $X_{n}$ 的连通分支，并根据坐标的符号对其进行明确的刻画。对于位于同一分支内的任意两点，构造一条显式路径 $\\gamma : [0,1] \\to X_{n}$，该路径是连续的，完全保持在该分支内部，并连接这两点。请仔细证明为何该路径不会离开 $X_{n}$ 或其分支。\n\n最后，推导出 $X_{n}$ 的连通分支的确切数量，并将此数量以一个关于 $n$ 的单一封闭形式表达式报告。您的最终答案必须是一个单一的精确符号表达式。不需要进行数值舍入。", "solution": "所述问题在数学上是适定的、自洽的，并且在拓扑学领域内有坚实的科学基础。它要求确定 $\\mathbb{R}^{n}$ 的一个特定子集的连通分支。未检测到任何缺陷。\n\n设欧几里得空间为 $\\mathbb{R}^{n}$，具有其标准拓扑，其中整数 $n \\geq 1$。所讨论的集合是\n$$\nX_{n} \\;=\\; \\mathbb{R}^{n} \\setminus \\{ x \\in \\mathbb{R}^{n} : x_{1} x_{2} \\cdots x_{n} = 0 \\}.\n$$\n条件 $x_{1} x_{2} \\cdots x_{n} = 0$ 等价于至少有一个坐标 $x_{i}$ 等于 $0$。因此，集合 $X_{n}$ 由 $\\mathbb{R}^{n}$ 中所有坐标均不为零的点组成：\n$$\nX_{n} \\;=\\; \\{ x = (x_{1}, x_{2}, \\dots, x_{n}) \\in \\mathbb{R}^{n} : x_{i} \\neq 0 \\text{ for every } i = 1,2,\\dots,n \\}.\n$$\n\n我们的目标是找到 $X_{n}$ 的连通分支。拓扑空间的一个连通分支是一个极大连通子集。所有连通分支的集合构成该空间的一个划分。我们将证明 $X_{n}$ 被划分为一组道路连通子集。由于道路连通性蕴含连通性，这些子集是连通的。通过证明它们彼此分离，我们便确定它们是极大连通子集。\n\n对于 $X_{n}$ 中的任意点 $x=(x_{1}, \\dots, x_{n})$，每个坐标 $x_{i}$ 要么是严格正的，要么是严格负的。这使我们可以为 $X_{n}$ 中的每个点关联一个唯一的“符号向量”。让我们为非零实数定义符号函数 `sgn` 如下\n$$\n\\text{sgn}(z) = \\begin{cases} 1  \\text{if } z  0 \\\\ -1 \\text{if } z  0 \\end{cases}.\n$$\n现在，定义一个映射 $\\sigma : X_{n} \\to \\{ -1, 1 \\}^{n}$ 为\n$$\n\\sigma(x) = \\sigma(x_{1}, \\dots, x_{n}) = (\\text{sgn}(x_{1}), \\dots, \\text{sgn}(x_{n})).\n$$\n这个映射为 $X_{n}$ 中的每个点分配一个可能的 $n$ 元符号元组。设集合 $\\{ -1, 1 \\}^{n}$ 赋有离散拓扑，其中每个子集都是开集。\n\n我们将证明映射 $\\sigma$ 是连续的。如果陪域中每个开集的原像都是定义域中的开集，则该映射是连续的。在离散空间中，每个点都是一个开集。因此，我们只需证明对于任意符号向量 $s=(s_{1}, \\dots, s_{n}) \\in \\{ -1, 1 \\}^{n}$，其原像 $\\sigma^{-1}(\\{s\\})$ 是 $X_{n}$ 中的一个开集。\n\n符号向量 $s$ 的原像是 $X_{n}$ 中所有坐标符号与 $s$ 匹配的点的集合：\n$$\nC_{s} \\;=\\; \\sigma^{-1}(\\{s\\}) \\;=\\; \\{ x \\in X_{n} : \\text{sgn}(x_{i}) = s_{i} \\text{ for } i=1, \\dots, n \\}.\n$$\n条件 $\\text{sgn}(x_{i}) = s_{i}$ 等价于 $s_{i}x_{i}  0$。因此，我们可以将 $C_{s}$ 写成\n$$\nC_{s} \\;=\\; \\{ x \\in \\mathbb{R}^{n} : s_{i}x_{i}  0 \\text{ for } i=1, \\dots, n \\}.\n$$\n对每个 $i$，集合 $U_{i} = \\{ x \\in \\mathbb{R}^{n} : s_{i}x_{i}  0 \\}$ 是 $\\mathbb{R}^{n}$ 中的一个开半空间，它在 $\\mathbb{R}^{n}$ 的标准拓扑中是一个开集。集合 $C_{s}$ 是这些开集的有限交集：$C_{s} = \\bigcap_{i=1}^{n} U_{i}$。有限个开集的交集是开集。因此，每个 $C_{s}$ 都是 $\\mathbb{R}^{n}$ 的一个开子集，并由此也是 $X_{n}$ 的一个开子集。这证实了映射 $\\sigma$ 是连续的。\n\n现在，考虑属于同一连通分支的任意两点 $a, b \\in X_{n}$。设 $\\gamma: [0, 1] \\to X_{n}$ 是从 $a$ 到 $b$ 的一条连续路径。复合映射 $\\sigma \\circ \\gamma: [0, 1] \\to \\{ -1, 1 \\}^{n}$ 是一个从连通空间 $[0, 1]$ 到离散空间 $\\{ -1, 1 \\}^{n}$ 的连续映射。连通空间的连续像是连通的。在离散空间中，唯一的连通子集是单点集。因此，映射 $\\sigma \\circ \\gamma$ 必须是常数映射。这意味着对于所有 $t \\in [0, 1]$，$\\sigma(\\gamma(t))$ 是一个常数，特别地，$\\sigma(a) = \\sigma(b)$。\n这表明 $X_{n}$ 的任何连通子集都必须完全位于某个集合 $C_{s}$ 内部。因此，$X_{n}$ 的连通分支必须是集合 $C_{s}$ 的子集。\n\n接下来，我们证明每个集合 $C_{s}$ 本身是连通的。我们将证明更强的性质，即道路连通性。如果一个集合中任意两点都存在一条完全包含在该集合内的连续路径连接它们，则该集合是道路连通的。\n设 $a = (a_{1}, \\dots, a_{n})$ 和 $b = (b_{1}, \\dots, b_{n})$ 是给定集合 $C_{s}$ 中的任意两点。这意味着对所有 $i=1, \\dots, n$，都有 $\\text{sgn}(a_{i}) = \\text{sgn}(b_{i}) = s_{i}$。\n考虑由下式定义的直线路径 $\\gamma: [0, 1] \\to \\mathbb{R}^{n}$：\n$$\n\\gamma(t) = a + t(b-a) = (1-t)a + tb, \\quad \\text{for } t \\in [0, 1].\n$$\n这条路径显然是连续的，且 $\\gamma(0) = a$ 和 $\\gamma(1) = b$。我们必须验证对所有 $t \\in [0, 1]$，都有 $\\gamma(t) \\in C_{s}$。\n$\\gamma(t)$ 的第 $i$ 个坐标是 $\\gamma_{i}(t) = (1-t)a_{i} + tb_{i}$。为了证明 $\\gamma(t) \\in C_{s}$，我们需要证明对所有 $i$ 都有 $\\text{sgn}(\\gamma_{i}(t)) = s_{i}$。这等价于证明 $s_{i}\\gamma_{i}(t)  0$。\n我们有：\n$$\ns_{i}\\gamma_{i}(t) = s_{i}((1-t)a_{i} + tb_{i}) = (1-t)(s_{i}a_{i}) + t(s_{i}b_{i}).\n$$\n根据 $C_{s}$ 的定义，我们知道 $s_{i}a_{i}  0$ 和 $s_{i}b_{i}  0$。对于 $t \\in [0, 1]$，系数 $(1-t)$ 和 $t$ 是非负的。\n如果 $t \\in (0, 1)$，则 $1-t  0$ 且 $t  0$。因此，$(1-t)(s_{i}a_{i})  0$ 且 $t(s_{i}b_{i})  0$。它们的和 $s_{i}\\gamma_{i}(t)$ 是严格正的。\n如果 $t=0$，$s_{i}\\gamma_{i}(0) = s_{i}a_{i}  0$。\n如果 $t=1$，$s_{i}\\gamma_{i}(1) = s_{i}b_{i}  0$。\n因此，对所有 $t \\in [0, 1]$ 和所有 $i \\in \\{1, \\dots, n\\}$，我们有 $\\gamma_i(t) \\neq 0$ 且其符号恒为 $s_{i}$。这意味着路径 $\\gamma(t)$ 完全保持在 $C_{s}$ 内部。\n所以，每个集合 $C_{s}$ 都是道路连通的，从而也是连通的。\n\n集合族 $\\{C_{s} : s \\in \\{-1, 1\\}^{n}\\}$ 构成了 $X_{n}$ 的一个划分。我们已经证明了每个 $C_s$ 是连通的，并且 $X_n$ 的任何连通子集都必须包含在某个 $C_s$ 中。由此可知，集合 $C_s$ 是 $X_n$ 的极大连通子集。因此，$X_{n}$ 的连通分支恰好是这些集合 $C_{s}$。\n\n$X_{n}$ 的连通分支的明确刻画是 $\\mathbb{R}^{n}$ 的“开象限”的集合，它们与符号向量 $s=(s_1, \\dots, s_n) \\in \\{-1, 1\\}^n$ 一一对应。对于每个这样的 $s$，对应的分支是\n$$\nC_{s} = \\{ (x_{1}, \\dots, x_{n}) \\in \\mathbb{R}^{n} : \\text{sgn}(x_{i}) = s_{i} \\text{ for } i=1, \\dots, n \\}.\n$$\n\n最后，我们确定连通分支的数量。这个数量等于不同集合 $C_{s}$ 的数量，而这又等于可能的符号向量 $s \\in \\{-1, 1\\}^{n}$ 的数量。\n对从 $1$ 到 $n$ 的每个坐标 $i$，符号 $s_i$ 有两种选择：$-1$ 或 $1$。由于有 $n$ 个坐标，不同符号向量的总数可以通过乘法法则得到：\n$$\n\\text{分支数量} = \\underbrace{2 \\times 2 \\times \\cdots \\times 2}_{n \\text{ 次}} = 2^{n}.\n$$\n对于 $n=1$，$X_1 = \\mathbb{R} \\setminus \\{0\\}$，它有 $2^1=2$ 个连通分支：$(-\\infty, 0)$ 和 $(0, \\infty)$。\n对于 $n=2$，$X_2 = \\mathbb{R}^2$ 去掉坐标轴，它有 $2^2=4$ 个连通分支（四个开象限）。\n一般结果是 $2^n$。", "answer": "$$\n\\boxed{2^{n}}\n$$", "id": "3043631"}, {"introduction": "这个经典例子——拓扑学家的正弦曲线——对于深刻理解连通性至关重要。它揭示了一个空间可以是连通的，但不是路径连通的，这是一个微妙但极其关键的区别。通过分析函数 $y = \\sin(1/x)$ 图像的闭包，你将更深入地探讨闭包、连通性及路径连通性的定义。[@problem_id:3043632]", "problem": "令 $G \\subset \\mathbb{R}^{2}$ 表示函数 $y=\\sin(1/x)$ (其中 $x \\neq 0$) 的图像，即\n$$\nG=\\{(x,y)\\in \\mathbb{R}^{2} : x\\neq 0 \\text{ and } y=\\sin(1/x)\\}.\n$$\n令 $S=\\overline{G}$ 是 $G$ 在具有标准欧几里得拓扑的 $\\mathbb{R}^{2}$ 中的闭包，并令 $V=\\{(0,y)\\in \\mathbb{R}^{2} : y\\in[-1,1]\\}$ 表示在 $x=0$ 处、$y$ 介于 $-1$ 和 $1$ 之间的垂直线段。仅使用连通性、道路连通性、连续性和闭包的核心拓扑定义，确定闭集 $S$ 的连通分支数量。请以单个整数的形式给出答案。", "solution": "问题是确定集合 $S$ 的连通分支数量，其中 $S$ 是 $y=\\sin(1/x)$ ($x \\neq 0$) 图像的闭包。我们将首先刻画集合 $S$，然后证明其连通性。一个连通空间的连通分支数量是 $1$。\n\n首先，我们必须确定集合 $S = \\overline{G}$。集合 $G$ 的闭包是 $G$ 与其所有极限点的并集。集合 $G$ 由 $G=\\{(x,y)\\in \\mathbb{R}^{2} : x\\neq 0 \\text{ and } y=\\sin(1/x)\\}$ 给出。令 $V=\\{(0,y)\\in \\mathbb{R}^{2} : y\\in[-1,1]\\}$。我们将证明 $S = G \\cup V$。\n\n令 $p=(0, y_0)$ 是 $V$ 中的任意一点，因此 $y_0 \\in [-1,1]$。我们希望证明 $p$ 是 $G$ 的一个极限点。为此，我们必须证明对于任意 $\\epsilon  0$，开球 $B(p, \\epsilon)$ 都包含 $G$ 中的一个点。令 $\\theta_0 = \\arcsin(y_0)$。对于 $n \\in \\mathbb{N}$，实数序列 $z_n = \\theta_0 + 2n\\pi$ 具有性质：对于所有 $n$，$\\sin(z_n) = \\sin(\\theta_0) = y_0$，并且当 $n \\to \\infty$ 时，$z_n \\to \\infty$。\n我们在 $\\mathbb{R}^2$ 中定义一个点列 $p_n = (x_n, y_n)$，其中 $x_n = 1/z_n = 1/(\\theta_0 + 2n\\pi)$ 且 $y_n = \\sin(1/x_n) = \\sin(z_n) = y_0$。\n当 $n \\to \\infty$ 时，$x_n \\to 0$。因此，点列 $p_n = (x_n, y_0)$ 收敛于 $p = (0, y_0)$。由于对所有 $n$ 都有 $x_n \\neq 0$，所以每个点 $p_n$ 都在 $G$ 中。因此，$V$ 中的每个点都是 $G$ 的极限点。\n反之，考虑一个不在 $G \\cup V$ 中的点 $q=(x_q, y_q)$。\n如果 $x_q \\neq 0$，则 $y_q \\neq \\sin(1/x_q)$。由于函数 $x \\mapsto \\sin(1/x)$ 在 $x_q$ 处是连续的，存在一个 $q$ 的邻域不与 $G$ 相交。所以 $q$ 不是极限点。\n如果 $x_q = 0$，则 $|y_q|  1$。由于对所有 $x \\neq 0$ 都有 $|\\sin(1/x)| \\le 1$，所以开球 $B(q, |y_q|-1)$ 不与 $G$ 相交。因此 $q$ 不是极限点。\n因此，$G$ 的所有极限点的集合是 $G \\cup V$，这意味着 $S = \\overline{G} = G \\cup V$。\n\n接下来，我们必须确定 $S$ 的连通分支数量。我们将证明 $S$ 是一个连通空间。一个拓扑空间是连通的，如果它不能表示为两个不相交的非空开子集的并集。\n\n我们假设 $S$ 不是连通的，以导出矛盾。那么，存在两个非空、不相交的集合 $U$ 和 $W$，它们在 $S$ 的子空间拓扑中是开集，并且它们的并集是 $S$，即 $S = U \\cup W$。\n\n我们来考虑垂直线段 $V = \\{(0,y) : y \\in [-1,1]\\}$。$V$ 与闭区间 $[-1,1]$ 同胚，而闭区间是一个连通集。由于 $V \\subset S = U \\cup W$，并且 $V$ 是连通的，所以 $V$ 必须完全包含在其中一个集合中，要么是 $U$，要么是 $W$。不失一般性，我们假设 $V \\subset U$。\n\n由于 $U$ 在 $S$ 中是开集，存在 $\\mathbb{R}^2$ 中的一个开集 $\\mathcal{O}$，使得 $U = S \\cap \\mathcal{O}$。我们有 $V \\subset \\mathcal{O}$。集合 $V$ 是紧致的，而集合 $\\mathbb{R}^2 \\setminus \\mathcal{O}$ 是闭集且与 $V$ 不相交。因此，这两个集合之间的距离是正的，即 $d(V, \\mathbb{R}^2 \\setminus \\mathcal{O}) = \\delta  0$。\n这意味着 $\\mathbb{R}^2$ 中任何与 $V$ 的距离小于 $\\delta$ 的点都必须位于 $\\mathcal{O}$ 内。\n令 $p=(x, \\sin(1/x))$ 为 $G$ 中的一个点。$p$ 到 $V$ 的距离是 $d(p, V) \\le d(p, (0, \\sin(1/x))) = \\sqrt{x^2} = |x|$。\n如果我们选择 $\\epsilon = \\delta$，那么对于任何满足 $|x|  \\epsilon$ 的点 $p=(x, \\sin(1/x)) \\in G$，我们有 $d(p,V)  \\epsilon = \\delta$。这意味着 $p \\in \\mathcal{O}$。由于 $p$ 也在 $S$ 中，我们有 $p \\in S \\cap \\mathcal{O} = U$。\n所以，所有满足 $|x|  \\epsilon$ 的 $S$ 中的点都必须属于 $U$。\n\n现在考虑集合 $G_+ = \\{(x, \\sin(1/x)) : x  0\\}$。集合 $(0, \\infty)$ 是 $\\mathbb{R}$ 中的一个连通区间。由 $f(x) = (x, \\sin(1/x))$ 定义的映射 $f: (0, \\infty) \\to \\mathbb{R}^2$ 是连续的。连通集在连续映射下的像是连通的。因此，$G_+$ 是 $S$ 的一个连通子集。\n\n根据我们的初始假设，$W$ 是非空的。令 $q = (x_q, y_q)$ 是 $W$ 中的一个点。由于 $V \\subset U$ 且 $U \\cap W = \\emptyset$，$q$ 不能在 $V$ 中。因此，$x_q \\neq 0$。\n此外，所有 $|x|  \\epsilon$ 的 $S$ 中的点都在 $U$ 中，所以必须有 $|x_q| \\ge \\epsilon$。\n不失一般性，我们假设 $x_q  0$。这意味着 $q \\in G_+$。所以 $G_+ \\cap W$ 是非空的。\n然而，我们也可以在 $G_+$ 中找到属于 $U$ 的点。例如，选择一个 $x_u$ 使得 $0  x_u  \\epsilon$。点 $u = (x_u, \\sin(1/x_u))$ 在 $G_+$ 中，并且因为 $|x_u|  \\epsilon$，它也在 $U$ 中。所以 $G_+ \\cap U$ 是非空的。\n集合 $G_+ \\cap U$ 和 $G_+ \\cap W$ 是非空、不相交的，并且它们的并集是 $G_+$。它们在 $G_+$ 的子空间拓扑中是开集。这构成了对 $G_+$ 的一个分割。但这与 $G_+$ 是一个连通集的事实相矛盾。\n\n我们最初关于 $S$ 不是连通的假设必定是错误的。因此，$S$ 是一个连通空间。\n一个连通空间只有一个连通分支，即其自身。\n$S$ 的连通分支数量是 $1$。", "answer": "$$\n\\boxed{1}\n$$", "id": "3043632"}, {"introduction": "这最后一个练习将拓扑学与组合几何联系起来，展示了拓扑概念在解决定量问题中的威力。你将通过一个优雅的归纳论证，来确定平面上一组直线划分出的区域数量。这个练习将展示拓扑推理如何能够导出一个精确的组合公式。[@problem_id:3043643]", "problem": "设 $\\mathcal{L} = \\{L_{1}, \\dots, L_{m}\\}$ 为 $\\mathbb{R}^{2}$ 中 $m \\geq 1$ 条不同直线的有限集合。用 $S$ 表示 $\\mathbb{R}^{2}$ 中至少有 $\\mathcal{L}$ 中两条直线相交的点的有限集合。对于每个 $x \\in S$，设 $r_{x}$ 为穿过 $x$ 的 $\\mathcal{L}$ 中直线的数量。考虑开集 $U = \\mathbb{R}^{2} \\setminus \\bigcup_{i=1}^{m} L_{i}$。\n\n仅使用拓扑学和几何分析的核心定义，证明 $U$ 有有限个连通分量，并推导出一个公式，用 $m$ 和多重集 $\\{r_{x}\\}_{x \\in S}$ 表示 $U$ 的连通分量总数。将你的最终答案表示为关于 $m$ 和 $r_{x}$ 的单个闭式解析表达式。无需取整。", "solution": "问题要求证明集合 $U = \\mathbb{R}^{2} \\setminus \\bigcup_{i=1}^{m} L_{i}$ 的连通分量数量是有限的，并给出一个用 $m$ 和多重集 $\\{r_{x}\\}_{x \\in S}$ 表示该数量的公式。$U$ 的连通分量是由直线集 $\\mathcal{L} = \\{L_{1}, \\dots, L_{m}\\}$ 将平面 $\\mathbb{R}^{2}$ 分割成的开区域。这些区域是开的、凸的（每个都是开半平面的交集），因此是路径连通的。令 $C(\\mathcal{L})$ 表示这些连通分量的数量。\n\n我们将通过对直线数量 $m$ 进行归纳来推导公式。\n设 $C_{m}$ 为 $m$ 条直线构成的布局所产生的连通分量的数量。\n\n首先，我们证明交点数 $|S|$ 是有限的。交点数的最大值受限于直线的对数，即 $\\binom{m}{2}$。由于 $m$ 是一个有限整数，因此 $|S|$ 也是有限的。\n\n我们来继续进行归纳。\n归纳基础：对于 $m=1$，一条直线 $L_{1}$ 将平面 $\\mathbb{R}^{2}$ 分成两个不相交的开半平面。这就是 $U = \\mathbb{R}^{2} \\setminus L_1$ 的两个连通分量。因此，$C_{1} = 2$。\n\n归纳步骤：假设对于任意 $m-1$ 条直线的布局，其连通分量的数量由某个公式给出。设 $\\mathcal{L}_{m-1} = \\{L_{1}, \\dots, L_{m-1}\\}$ 是一个包含 $m-1$ 条直线的布局，并设 $C_{m-1}$ 是它所产生的区域数量。\n\n现在，我们将第 $m$ 条直线 $L_{m}$ 添加到这个布局中，形成 $\\mathcal{L}_{m} = \\mathcal{L}_{m-1} \\cup \\{L_{m}\\}$。直线 $L_{m}$ 与先前已存在的布局 $\\bigcup_{i=1}^{m-1} L_{i}$ 相交。设 $P_{m} = L_{m} \\cap (\\bigcup_{i=1}^{m-1} L_{i})$ 为 $L_{m}$ 与先前直线相交的点的集合。设 $p_{m} = |P_{m}|$ 为这些不同交点的数量。\n\n这 $p_{m}$ 个点位于直线 $L_{m}$ 上，并将其分割成 $p_{m}+1$ 个线段。其中两个线段是射线（无界的），其余的 $p_{m}-1$ 个是开区间（如果 $p_m > 0$）。$L_{m}$ 上的这 $p_{m}+1$ 个线段中的每一个都恰好位于布局 $\\mathcal{L}_{m-1}$ 的一个连通分量内。当 $L_{m}$ 穿过一个区域时，它将该区域分割成两个新的、更小的区域。\n\n因此，添加直线 $L_{m}$ 会使连通分量的总数增加，增加的数量等于它穿过并分割的区域数。这个数量恰好是 $L_{m}$ 被先前直线分割成的线段数，即 $p_{m}+1$。\n这给出了递推关系：\n$$C_{m} = C_{m-1} + p_{m} + 1$$\n\n我们可以将这个递推关系展开到基本情况。设 $C_{0}$ 为 $m=0$ 条直线时的区域数量。没有直线时，整个平面 $\\mathbb{R}^{2}$ 是一个单一区域，所以 $C_{0} = 1$。我们定义 $p_{1} = 0$，因为第一条直线不与任何先前的直线相交。\n\\begin{align*} C_{m} = C_{m-1} + p_{m} + 1 \\\\ = (C_{m-2} + p_{m-1} + 1) + p_{m} + 1 \\\\ = \\dots \\\\ = C_{0} + \\sum_{i=1}^{m} (p_{i} + 1) \\\\ = 1 + m + \\sum_{i=1}^{m} p_{i} \\end{align*}\n这里，对于 $i > 1$，$p_{i} = |L_{i} \\cap (\\bigcup_{j=1}^{i-1} L_{j})|$，并且 $p_{1}=0$。这个公式依赖于添加直线的特定顺序。问题要求一个用与顺序无关的量 $\\{r_{x}\\}_{x \\in S}$ 表示的公式。为实现这一点，我们必须重新表示和 $\\sum_{i=1}^{m} p_{i}$。\n\n我们可以通过考虑每个交点 $x \\in S$ 的贡献来重新表示和 $\\sum_{i=1}^{m} p_{i}$，从而得到一个与顺序无关的表达式。和 $\\sum_{i=1}^{m} p_{i}$ 对每条直线 $L_i$ 统计了它与序号更低的直线（即 $L_j$，$j  i$）产生的不同交点的数量。考虑一个交点 $x \\in S$。根据定义，有 $r_x$ 条直线穿过该点。该交点 $x$ 对总和 $\\sum p_i$ 的贡献是多少？每次当我们添加一条穿过 $x$ 的新直线（除了第一条）时，它会与所有已经存在的、也穿过 $x$ 的直线相交于同一点 $x$。这会为该新直线的 $p$ 值贡献1。由于有 $r_x$ 条直线穿过 $x$，这个过程会发生 $r_x - 1$ 次。因此，交点 $x$ 对总和 $\\sum_{i=1}^{m} p_i$ 的总贡献恰好是 $r_x - 1$。\n\n将所有交点的贡献相加，我们得到：\n$$\\sum_{i=1}^{m} p_{i} = \\sum_{x \\in S} (r_{x} - 1)$$\n将此结果代入我们之前得到的递推关系的总和形式中：\n$$C_m = 1 + m + \\sum_{i=1}^{m} p_{i} = 1 + m + \\sum_{x \\in S} (r_{x} - 1)$$\n这就是最终的公式。", "answer": "$$\n\\boxed{1 + m + \\sum_{x \\in S} (r_{x} - 1)}\n$$", "id": "3043643"}]}
{"hands_on_practices": [{"introduction": "威尔逊定理为素数提供了一个优美的代数刻画。这个练习将通过对小素数（$p=5, 7, 11$）的具体计算，引导你亲手验证这一定理。你将从第一性原理出发，通过配对乘法逆元的方式来计算 $(p-1)! \\pmod p$ 的值，从而直观地理解该定理证明的核心思想。[@problem_id:3094034]", "problem": "设 $p$ 为一个素数，定义 $P(p) \\equiv \\prod_{a=1}^{p-1} a \\pmod{p}$。仅使用素数模算术的基本性质——具体来说，即每个非零剩余类模 $p$ 都有一个唯一的乘法逆元模 $p$，以及如果 $x \\equiv y \\pmod{p}$ 且 $y \\equiv x^{-1} \\pmod{p}$，则 $xy \\equiv x^{2} \\pmod{p}$——从第一性原理出发，计算当 $p \\in \\{5,7,11\\}$ 时 $P(p) \\pmod{p}$ 的值。对于 $p=5$、$p=7$ 和 $p=11$ 中的每一个，找出 $P(p)$ 模 $p$ 的最小非负余数。然后，令 $S$ 表示这三个最小非负余数之和。$S$ 的精确值是多少？请以单个整数形式提供最终答案。无需四舍五入，也无需单位。", "solution": "题目要求计算对于素数 $p=5$、$p=7$ 和 $p=11$ 的 $P(p) \\equiv \\prod_{a=1}^{p-1} a \\pmod{p}$，然后求所得的最小非负余数之和 $S$。计算必须基于第一性原理，具体来说，是利用对于素数模 $p$，每个非零剩余类都有一个唯一的乘法逆元这一性质。\n\n设 $\\mathbb{Z}_p^* = \\{1, 2, \\dots, p-1\\}$ 是模 $p$ 的非零剩余类集合。我们需要计算的乘积是 $P(p) = (p-1)!$。核心原理是将 $\\mathbb{Z}_p^*$ 中的每个元素 $a$ 与其唯一的乘法逆元 $a^{-1} \\in \\mathbb{Z}_p^*$ 配对。这样一对的乘积为 $a \\cdot a^{-1} \\equiv 1 \\pmod{p}$。\n\n不能与一个不同元素配对的元素是那些自身即为其逆元的元素。这些是同余式 $x^2 \\equiv 1 \\pmod{p}$ 的解。这可以重写为 $x^2 - 1 \\equiv 0 \\pmod{p}$，可因式分解为 $(x-1)(x+1) \\equiv 0 \\pmod{p}$。由于 $p$ 是一个素数，这意味着 $p | (x-1)$ 或 $p | (x+1)$。\n这给出了 $x$ 在 $\\mathbb{Z}_p^*$ 中的两个解：\n$1$. $x-1 \\equiv 0 \\pmod{p} \\implies x \\equiv 1 \\pmod{p}$。\n$2$. $x+1 \\equiv 0 \\pmod{p} \\implies x \\equiv -1 \\pmod{p}$。\n\n在集合 $\\{1, 2, \\dots, p-1\\}$ 中，剩余类 $-1 \\pmod{p}$ 对应于整数 $p-1$。对于给定的素数（$p=5, 7, 11$），$p$ 大于 $2$，因此 $1 \\not\\equiv p-1 \\pmod{p}$。因此，在 $\\mathbb{Z}_p^*$ 中恰好有两个元素是自身的逆元：$1$ 和 $p-1$。\n\n集合 $\\mathbb{Z}_p^* \\setminus \\{1, p-1\\}$ 中的所有其他元素都可以分组为 $(a, a^{-1})$ 的配对，其中 $a \\neq a^{-1}$。每个这样的配对的乘积都是 $1 \\pmod{p}$。集合 $\\{2, 3, \\dots, p-2\\}$ 包含 $p-3$ 个元素。由于每对由 $2$ 个不同元素组成，因此有 $(p-3)/2$ 对这样的配对。\n\n因此，乘积 $P(p)$ 可以计算如下：\n$$P(p) = (p-1)! \\equiv 1 \\cdot (p-1) \\cdot \\prod_{a \\in \\{2, \\dots, p-2\\}} a \\pmod{p}$$\n集合 $\\{2, \\dots, p-2\\}$ 上的乘积是 $(p-3)/2$ 对的乘积，其中每一对都与 $1$ 模 $p$ 同余。\n$$P(p) \\equiv 1 \\cdot (p-1) \\cdot (1)^{(p-3)/2} \\pmod{p}$$\n$$P(p) \\equiv p-1 \\pmod{p}$$\n由于 $p-1 \\equiv -1 \\pmod{p}$，这是被称为威尔逊定理 (Wilson's Theorem) 的一般性结果。现在我们根据要求将此推理应用于每个具体案例。\n\n情况 1：$p=5$\n我们需要计算 $P(5) = (5-1)! = 4! \\pmod{5}$。\n非零剩余类的集合是 $\\{1, 2, 3, 4\\}$。\n自身的逆元是 $1$ 和 $4$（因为 $4 \\equiv -1 \\pmod{5}$ 且 $4^2 = 16 \\equiv 1 \\pmod{5}$）。\n剩下的元素是 $\\{2, 3\\}$。我们检验它们互为逆元：$2 \\cdot 3 = 6 \\equiv 1 \\pmod{5}$。\n所以，我们可以将乘积分组如下：\n$$P(5) = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\equiv 1 \\cdot (2 \\cdot 3) \\cdot 4 \\pmod{5}$$\n$$P(5) \\equiv 1 \\cdot 1 \\cdot 4 \\pmod{5}$$\n$$P(5) \\equiv 4 \\pmod{5}$$\n对于 $p=5$，最小非负余数是 $4$。\n\n情况 2：$p=7$\n我们需要计算 $P(7) = (7-1)! = 6! \\pmod{7}$。\n非零剩余类的集合是 $\\{1, 2, 3, 4, 5, 6\\}$。\n自身的逆元是 $1$ 和 $6$（因为 $6 \\equiv -1 \\pmod{7}$）。\n剩下的元素是 $\\{2, 3, 4, 5\\}$。我们组成乘法逆元对：\n- $2 \\cdot 4 = 8 \\equiv 1 \\pmod{7}$。配对是 $(2, 4)$。\n- $3 \\cdot 5 = 15 \\equiv 1 \\pmod{7}$。配对是 $(3, 5)$。\n所以，我们可以将乘积分组如下：\n$$P(7) = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5 \\cdot 6 \\equiv 1 \\cdot (2 \\cdot 4) \\cdot (3 \\cdot 5) \\cdot 6 \\pmod{7}$$\n$$P(7) \\equiv 1 \\cdot 1 \\cdot 1 \\cdot 6 \\pmod{7}$$\n$$P(7) \\equiv 6 \\pmod{7}$$\n对于 $p=7$，最小非负余数是 $6$。\n\n情况 3：$p=11$\n我们需要计算 $P(11) = (11-1)! = 10! \\pmod{11}$。\n非零剩余类的集合是 $\\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10\\}$。\n自身的逆元是 $1$ 和 $10$（因为 $10 \\equiv -1 \\pmod{11}$）。\n剩下的元素是 $\\{2, 3, 4, 5, 6, 7, 8, 9\\}$。我们组成乘法逆元对：\n- $2 \\cdot 6 = 12 \\equiv 1 \\pmod{11}$。配对是 $(2, 6)$。\n- $3 \\cdot 4 = 12 \\equiv 1 \\pmod{11}$。配对是 $(3, 4)$。\n- $5 \\cdot 9 = 45 \\equiv 1 \\pmod{11}$（因为 $45 = 4 \\cdot 11 + 1$）。配对是 $(5, 9)$。\n- $7 \\cdot 8 = 56 \\equiv 1 \\pmod{11}$（因为 $56 = 5 \\cdot 11 + 1$）。配对是 $(7, 8)$。\n所以，我们可以将乘积分组如下：\n$$P(11) = 1 \\cdot (2 \\cdot 6) \\cdot (3 \\cdot 4) \\cdot (5 \\cdot 9) \\cdot (7 \\cdot 8) \\cdot 10 \\pmod{11}$$\n$$P(11) \\equiv 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 1 \\cdot 10 \\pmod{11}$$\n$$P(11) \\equiv 10 \\pmod{11}$$\n对于 $p=11$，最小非负余数是 $10$。\n\n最后，我们被要求求出 $S$ 的值，即这三个最小非负余数之和。\n设 $r_p$ 是 $P(p) \\pmod{p}$ 的最小非负余数。\n我们得到 $r_5 = 4$，$r_7 = 6$ 和 $r_{11} = 10$。\n$$S = r_5 + r_7 + r_{11}$$\n$$S = 4 + 6 + 10$$\n$$S = 20$$", "answer": "$$\n\\boxed{20}\n$$", "id": "3094034"}, {"introduction": "威尔逊定理的美妙之处在于其对素数的专一性。那么对于合数 $n$，$(n-1)! \\pmod n$ 的结果又是什么呢？这个练习将让你通过分析一系列合数的例子，探究为什么威尔逊定理的结论在合数上不成立，并揭示 $(n-1)!$ 通常能被合数 $n$ 整除的内在原因。[@problem_id:3094020]", "problem": "设 $n$ 是一个正整数，$(n-1)!$ 表示 $n-1$ 的阶乘。仅使用模 $n$ 同余的基本性质、$n$ 的质因数分解以及关于阶乘中质数指数的标准结果，计算当 $n \\in \\{4,6,8,9,10,12\\}$ 时 $(n-1)! \\pmod n$ 的余数，并且不显式地展开阶乘。对于每种情况，通过分析乘积 $1 \\cdot 2 \\cdot \\dots \\cdot (n-1)$ 中的可除性，给出你所得到余数的清晰论证，并将其分类为余数是 $0$、$1$ 还是模 $n$ 的其他余数。将你最终得到的六个余数按 $n=4,6,8,9,10,12$ 的顺序表示为一个单行矩阵。", "solution": "该问题要求计算对于一组合数 $n \\in \\{4, 6, 8, 9, 10, 12\\}$，$(n-1)!$ 模 $n$ 的余数。对于一个合数 $n$，一般原则是如果 $n > 4$，那么 $(n-1)!$ 能被 $n$ 整除，即 $(n-1)! \\equiv 0 \\pmod{n}$。唯一的合数例外是 $n=4$。我们将通过分析基于 $n$ 的因子的 $(n-1)!$ 的可除性，来对每个给定的 $n$ 值验证这一原则。\n\n分析将对每个 $n$ 值进行逐案讨论。\n\n情况 $n=4$：\n数 $n=4$ 是一个合数，其质因数分解为 $2^2$。我们需要计算 $(4-1)! \\pmod{4}$，即 $3! \\pmod{4}$。\n阶乘计算为 $3! = 1 \\cdot 2 \\cdot 3 = 6$。\n为了求 $6$ 模 $4$ 的余数，我们进行除法运算：$6 = 1 \\cdot 4 + 2$。\n因此，$3! \\equiv 2 \\pmod{4}$。\n$3!$ 的乘积项是 $1, 2, 3$。因为 $4$ 的质因数分解是 $2^2$，要使 $4$ 整除 $3!$，因子 $2$ 在 $3!$ 的质因数分解中必须至少出现两次。然而，它只出现了一次。因此，$4$ 不能整除 $3!$，余数非零。\n余数是 $2$。这被归类为除 $0$ 或 $1$ 之外的余数。\n\n情况 $n=6$：\n数 $n=6$ 是一个合数，其质因数分解为 $2 \\cdot 3$。我们需要计算 $(6-1)! \\pmod{6}$，即 $5! \\pmod{6}$。\n阶乘的乘积是 $5! = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5$。\n整数 $n=6$ 可以写成两个不同整数的乘积，$n=2 \\cdot 3$。\n这两个因子 $2$ 和 $3$ 都小于 $6$，因此出现在 $5!$ 的因子列表中。\n由于 $2$ 和 $3$ 是乘积 $1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5$ 中的不同因子，它们的乘积 $2 \\cdot 3 = 6$ 必定是 $5!$ 的一个除数。\n这意味着 $5!$ 是 $6$ 的倍数。\n因此，$(6-1)! \\equiv 0 \\pmod{6}$。\n余数是 $0$。\n\n情况 $n=8$：\n数 $n=8$ 是一个合数，其质因数分解为 $2^3$。我们需要计算 $(8-1)! \\pmod{8}$，即 $7! \\pmod{8}$。\n阶乘的乘积是 $7! = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5 \\cdot 6 \\cdot 7$。\n整数 $n=8$ 可以写成两个不同整数的乘积，$n=2 \\cdot 4$。\n这两个因子 $2$ 和 $4$ 都小于 $8$ 并且是不同的。它们都出现在 $7!$ 的因子列表中。\n因此，它们的乘积 $2 \\cdot 4 = 8$ 必定是 $7!$ 的一个除数。\n这意味着 $7!$ 是 $8$ 的倍数。\n因此，$(8-1)! \\equiv 0 \\pmod{8}$。\n余数是 $0$。\n\n情况 $n=9$：\n数 $n=9$ 是一个合数，其质因数分解为 $3^2$。我们需要计算 $(9-1)! \\pmod{9}$，即 $8! \\pmod{9}$。\n阶乘的乘积是 $8! = 1 \\cdot 2 \\cdot 3 \\cdot 4 \\cdot 5 \\cdot 6 \\cdot 7 \\cdot 8$。\n与前面的情况不同，$n=9$ 不能写成两个都小于 $9$ 的不同整数的乘积（因为 $9=3 \\cdot 3$）。但是，我们可以在 $8!$ 的乘积中找到两个不同的因子，它们的乘积是 $9$ 的倍数。\n考虑因子 $3$ 和 $6$。它们都小于 $9$，并且是出现在 $8!$ 乘积中的不同整数。\n它们的乘积是 $3 \\cdot 6 = 18$。\n由于 $18 = 2 \\cdot 9$，我们看到 $18$ 是 $9$ 的倍数。\n因为 $8!$ 能被 $18$ 整除，所以它也一定能被 $9$ 整除。\n这意味着 $8!$ 是 $9$ 的倍数。\n因此，$(9-1)! \\equiv 0 \\pmod{9}$。\n余数是 $0$。\n\n情况 $n=10$：\n数 $n=10$ 是一个合数，其质因数分解为 $2 \\cdot 5$。我们需要计算 $(10-1)! \\pmod{10}$，即 $9! \\pmod{10}$。\n阶乘的乘积是 $9! = 1 \\cdot 2 \\cdot \\dots \\cdot 9$。\n整数 $n=10$ 可以写成两个不同整数的乘积，$n=2 \\cdot 5$。\n这两个因子 $2$ 和 $5$ 都小于 $10$ 并且是不同的。它们都出现在 $9!$ 的因子列表中。\n因此，它们的乘积 $2 \\cdot 5 = 10$ 必定是 $9!$ 的一个除数。\n这意味着 $9!$ 是 $10$ 的倍数。\n因此，$(10-1)! \\equiv 0 \\pmod{10}$。\n余数是 $0$。\n\n情况 $n=12$：\n数 $n=12$ 是一个合数，其质因数分解为 $2^2 \\cdot 3$。我们需要计算 $(12-1)! \\pmod{12}$，即 $11! \\pmod{12}$。\n阶乘的乘积是 $11! = 1 \\cdot 2 \\cdot \\dots \\cdot 11$。\n整数 $n=12$ 可以写成两个不同整数的乘积，$n=3 \\cdot 4$。\n这两个因子 $3$ 和 $4$ 都小于 $12$ 并且是不同的。它们都出现在 $11!$ 的因子列表中。\n因此，它们的乘积 $3 \\cdot 4 = 12$ 必定是 $11!$ 的一个除数。\n这意味着 $11!$ 是 $12$ 的倍数。\n因此，$(12-1)! \\equiv 0 \\pmod{12}$。\n余数是 $0$。\n\n对于 $n \\in \\{4, 6, 8, 9, 10, 12\\}$，最终的余数列表是 $(2, 0, 0, 0, 0, 0)$。", "answer": "$$\n\\boxed{\n\\begin{pmatrix}\n2  0  0  0  0  0\n\\end{pmatrix}\n}\n$$", "id": "3094020"}, {"introduction": "理论的价值在于应用。威尔逊定理的逆定理指出，满足 $(n-1)! \\equiv -1 \\pmod n$ 的整数 $n$ 必然是素数。本练习是一个典型的应用问题，它要求你首先利用这一定理的逆定理来确定一个未知数 $n$ 的值，然后完成一个相关的模算术计算，这充分体现了数论定理在解决具体问题中的指导作用。[@problem_id:3094040]", "problem": "设 $n$ 是大于 $3$ 的最小整数，使得 $n$ 整除 $(n-1)!+1$。求 $(n-1)!$ 模 $18$ 的余数。请将你的答案表示为集合 $\\{0,1,2,\\dots,17\\}$ 中的一个整数。", "solution": "题目要求我们求 $(n-1)!$ 模 $18$ 的余数，其中 $n$ 是大于 $3$ 且满足 $n$ 整除 $(n-1)!+1$ 的最小整数。\n\n首先，我们必须准确地确定整数 $n$。条件“$n$ 整除 $(n-1)!+1$”在数学上可以写作 $n \\mid ((n-1)!+1)$。这等价于同余式 $(n-1)! + 1 \\equiv 0 \\pmod{n}$，该同余式可整理为 $(n-1)! \\equiv -1 \\pmod{n}$。\n\n数论中的一个基本结果是威尔逊定理的逆定理。该定理指出，对于任意大于1的整数 $n$，如果同余式 $(n-1)! \\equiv -1 \\pmod{n}$ 成立，那么 $n$ 必须是一个质数。为了使论证完整，我们指出，如果 $n$ 是一个不等于4的合数，它必有一个因子 $d$ 满足 $1 < d < n$。因此 $d$ 整除 $(n-1)!$。由题设 $n$ 整除 $(n-1)!+1$，可知 $d$ 也整除 $(n-1)!+1$。因此 $d$ 必须整除这两个数的差，即 $((n-1)!+1) - (n-1)! = 1$。这与 $d>1$ 矛盾。对于 $n=4$，$3! = 6 \\equiv 2 \\pmod 4$，也不满足条件。因此，满足该条件的整数 $n$ 必须是质数。\n\n我们正在寻找大于 $3$ 的最小整数 $n$ 满足这个条件，这意味着我们需要寻找大于 $3$ 的最小质数。\n按顺序检查大于 $3$ 的整数：\n- $4$ 是合数。\n- $5$ 是质数。\n因此，大于 $3$ 的最小质数是 $5$。\n所以，$n$ 的值是 $5$。\n\n现在问题简化为计算 $(5-1)!$ 模 $18$ 的余数，也就是计算 $4! \\pmod{18}$。\n阶乘 $4!$ 的计算如下：\n$4! = 4 \\times 3 \\times 2 \\times 1 = 24$。\n\n我们需要求 $24$ 模 $18$ 的余数。我们用 $24$ 除以 $18$：\n$24 = 1 \\times 18 + 6$。\n除法所得的余数是 $6$。\n因此，$24 \\equiv 6 \\pmod{18}$。\n\n最终答案是 $6$。", "answer": "$$\\boxed{6}$$", "id": "3094040"}]}
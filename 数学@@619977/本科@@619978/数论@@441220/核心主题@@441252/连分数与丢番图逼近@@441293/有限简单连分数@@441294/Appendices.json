{"hands_on_practices": [{"introduction": "理解有限简单连分数的第一步是掌握其求值方法。这个练习将聚焦于基本定义，将紧凑的 $[a_0; a_1, \\dots, a_n]$ 记法转换为其对应的嵌套分式。通过这个直接的计算 [@problem_id:3088737]，你将建立一个坚实的理解，即这些表达式如何精确地表示一个有理数。", "problem": "考虑一个由整数 $a_0 \\in \\mathbb{Z}_{\\ge 0}$ 和 $a_i \\in \\mathbb{Z}_{0}$（对于 $i \\ge 1$）的数据定义的有限单连分数，记作 $[a_0; a_1, a_2, \\dots, a_n]$，并通过嵌套表达式解释为\n$$\n[a_0; a_1, \\dots, a_n] \\;=\\; a_0 \\;+\\; \\cfrac{1}{a_1 \\;+\\; \\cfrac{1}{a_2 \\;+\\; \\cdots \\;+\\; \\cfrac{1}{a_n}}}.\n$$\n根据定义，第 $k$ 个渐近分数 $p_k/q_k$ 是通过在项 $a_k$ 处截断连分数，并自下而上计算得到的有限嵌套表达式的有理数值。\n\n给定有限连分数 $x = [2; 1, 2, 3]$，请仅使用单连分数和渐近分数的核心定义来显式计算 $p_3/q_3$。然后，验证 $p_3/q_3$ 等于通过直接计算 $x$ 的嵌套表达式得到的有理数。\n\n请以单个精确有理数的形式给出 $p_3/q_3$ 的最终值。不需要四舍五入，也不涉及单位。", "solution": "首先对问题陈述进行验证。\n\n### 第 1 步：提取已知条件\n- 一个有限单连分数记作 $[a_0; a_1, a_2, \\dots, a_n]$。\n- 系数为整数，其中 $a_0 \\in \\mathbb{Z}_{\\ge 0}$ 且对于 $i \\ge 1$ 有 $a_i \\in \\mathbb{Z}_{0}$。\n- 其值由以下嵌套表达式定义：\n$$\n[a_0; a_1, \\dots, a_n] \\;=\\; a_0 \\;+\\; \\cfrac{1}{a_1 \\;+\\; \\cfrac{1}{a_2 \\;+\\; \\cdots \\;+\\; \\cfrac{1}{a_n}}}\n$$\n- 第 $k$ 个渐近分数，记作 $p_k/q_k$，定义为截断连分数 $[a_0; a_1, \\dots, a_k]$ 的值。\n- 具体的问题实例是连分数 $x = [2; 1, 2, 3]$。\n- 任务是：\n    1. 仅使用核心定义计算 $p_3/q_3$。\n    2. 验证 $p_3/q_3$ 等于通过直接计算 $x$ 的嵌套表达式得到的有理数。\n    3. 以单个精确有理数的形式给出 $p_3/q_3$ 的最终值。\n\n### 第 2 步：使用提取的已知条件进行验证\n这个问题在科学上和数学上是合理的，属于初等数论领域。有限单连分数及其渐近分数的定义是标准的并且陈述正确。这个问题是适定的，因为有限连分数的值是一个唯一的有理数，并且所有必要的数据（系数 $a_i$）都已提供。语言客观而精确。该问题不违反任何无效性标准。这是一个直接的计算问题，旨在测试对基本定义的理解。\n\n### 第 3 步：结论与行动\n该问题有效。将提供完整的解答。\n\n给定的有限连分数是 $x = [2; 1, 2, 3]$。这对应于系数 $a_0 = 2$，$a_1 = 1$，$a_2 = 2$ 和 $a_3 = 3$。\n\n题目要求计算第 3 个渐近分数 $p_3/q_3$。根据所提供的定义，第 $k$ 个渐近分数 $p_k/q_k$ 是截断连分数 $[a_0; a_1, \\dots, a_k]$ 的值。对于 $k=3$，渐近分数为 $p_3/q_3 = [a_0; a_1, a_2, a_3]$，在本例中即为 $[2; 1, 2, 3]$。\n\n这意味着我们必须计算与 $[2; 1, 2, 3]$ 对应的嵌套表达式：\n$$\n\\frac{p_3}{q_3} = [2; 1, 2, 3] = 2 + \\cfrac{1}{1 + \\cfrac{1}{2 + \\cfrac{1}{3}}}\n$$\n为了计算这个表达式，我们从最内部开始向外计算。\n\n首先，我们计算最内层和的值：\n$$\n2 + \\cfrac{1}{3} = \\cfrac{2 \\cdot 3}{3} + \\cfrac{1}{3} = \\cfrac{6+1}{3} = \\cfrac{7}{3}\n$$\n接下来，我们将此结果代回到更大的表达式中：\n$$\n1 + \\cfrac{1}{2 + \\cfrac{1}{3}} = 1 + \\cfrac{1}{\\frac{7}{3}}\n$$\n$\\frac{7}{3}$ 的倒数是 $\\frac{3}{7}$。所以，表达式变为：\n$$\n1 + \\frac{3}{7} = \\frac{7}{7} + \\frac{3}{7} = \\frac{10}{7}\n$$\n最后，我们将此结果代入连分数的完整表达式中：\n$$\n2 + \\cfrac{1}{1 + \\cfrac{1}{2 + \\cfrac{1}{3}}} = 2 + \\cfrac{1}{\\frac{10}{7}}\n$$\n$\\frac{10}{7}$ 的倒数是 $\\frac{7}{10}$。最后的计算是：\n$$\n2 + \\frac{7}{10} = \\frac{2 \\cdot 10}{10} + \\frac{7}{10} = \\frac{20+7}{10} = \\frac{27}{10}\n$$\n因此，第 3 个渐近分数的值为 $p_3/q_3 = \\frac{27}{10}$。\n\n任务的第二部分是验证该值等于通过直接计算 $x = [2; 1, 2, 3]$ 的嵌套表达式得到的有理数。根据有限连分数的定义，其值就是通过计算其完整的嵌套表达式得到的。上面执行的计算正是这种直接计算。由于连分数 $x=[2;1,2,3]$ 在 $a_3$ 处截断，根据定义，它的值就是它自己的最后一个（第 3 个）渐近分数 $p_3/q_3$。因此，$p_3/q_3$ 的计算与 $x$ 值的计算是相同的，验证过程已内含在定义之中。$p_3/q_3$ 的值可证明等于 $x$ 的值，两者均为 $\\frac{27}{10}$。这证实了定义的一致性。", "answer": "$$\\boxed{\\frac{27}{10}}$$", "id": "3088737"}, {"introduction": "学习了如何对连分数求值后，我们现在来探索其逆过程：如何求出给定有理数的连分数展开式。这个练习揭示了连分数与数论的基石——欧几里得算法——之间深刻而优美的联系。通过对同一个数应用这两种方法 [@problem_id:3021001]，你将亲手验证它们是同一枚硬币的两面，从而掌握一种表示任何有理数的强大工具。", "problem": "设有理数 $x$ 为 $x=\\frac{9876}{4321}$。仅使用简单连分数和整数欧几里得算法的定义，完成以下任务：\n\n- 计算 $x$ 的简单连分数展开，并将其明确表示为括号记法 $[a_{0};a_{1},\\dots,a_{k}]$，其中每个 $a_{i}\\in \\mathbb{Z}$，当 $i\\geq 1$ 时 $a_{i}\\geq 1$。\n- 通过对整数对 $(9876,4321)$ 执行欧几里得算法，直接验证在每个除法步骤中得到的连续商按顺序与您计算出的简单连分数的部分商 $a_{0},a_{1},\\dots,a_{k}$ 相吻合。\n\n以括号记法 $[a_{0};a_{1},\\dots,a_{k}]$ 给出您的最终答案。无需四舍五入；只报告精确整数。", "solution": "问题陈述已经过验证，被认为是可靠的。这是一个初等数论中的适定问题，没有科学或逻辑上的缺陷，并且包含了获得唯一解所需的所有信息。\n\n该问题需要进行两个不同但相关的计算。首先，计算有理数 $x = \\frac{9876}{4321}$ 的简单连分数。其次，通过对整数 $(9876, 4321)$ 应用欧几里得算法来验证得到的部分商。\n\n第1部分：计算简单连分数\n\n寻找实数 $\\xi$ 的简单连分数的算法是一个迭代过程。令 $\\xi_0 = \\xi$。部分商 $a_i$ 和后续项 $\\xi_{i+1}$ 按如下方式生成：\n$a_i = \\lfloor \\xi_i \\rfloor$\n$\\xi_{i+1} = \\frac{1}{\\xi_i - a_i}$\n如果任意 $\\xi_i$ 是整数，则过程终止。对于有理数，此过程保证会终止。\n\n让我们将此算法应用于 $x = \\frac{9876}{4321}$。\n\n步骤 0：令 $\\xi_0 = x = \\frac{9876}{4321}$。\n第一个部分商是 $a_0 = \\lfloor \\xi_0 \\rfloor = \\lfloor \\frac{9876}{4321} \\rfloor = 2$。\n余项为 $\\xi_1 = \\frac{1}{\\xi_0 - a_0} = \\frac{1}{\\frac{9876}{4321} - 2} = \\frac{1}{\\frac{9876 - 8642}{4321}} = \\frac{4321}{1234}$。\n\n步骤 1：第二个部分商是 $a_1 = \\lfloor \\xi_1 \\rfloor = \\lfloor \\frac{4321}{1234} \\rfloor = 3$。\n余项为 $\\xi_2 = \\frac{1}{\\xi_1 - a_1} = \\frac{1}{\\frac{4321}{1234} - 3} = \\frac{1}{\\frac{4321 - 3702}{1234}} = \\frac{1234}{619}$。\n\n步骤 2：第三个部分商是 $a_2 = \\lfloor \\xi_2 \\rfloor = \\lfloor \\frac{1234}{619} \\rfloor = 1$。\n余项为 $\\xi_3 = \\frac{1}{\\xi_2 - a_2} = \\frac{1}{\\frac{1234}{619} - 1} = \\frac{1}{\\frac{1234 - 619}{619}} = \\frac{619}{615}$。\n\n步骤 3：第四个部分商是 $a_3 = \\lfloor \\xi_3 \\rfloor = \\lfloor \\frac{619}{615} \\rfloor = 1$。\n余项为 $\\xi_4 = \\frac{1}{\\xi_3 - a_3} = \\frac{1}{\\frac{619}{615} - 1} = \\frac{1}{\\frac{619 - 615}{615}} = \\frac{615}{4}$。\n\n步骤 4：第五个部分商是 $a_4 = \\lfloor \\xi_4 \\rfloor = \\lfloor \\frac{615}{4} \\rfloor = 153$。\n余项为 $\\xi_5 = \\frac{1}{\\xi_4 - a_4} = \\frac{1}{\\frac{615}{4} - 153} = \\frac{1}{\\frac{615 - 612}{4}} = \\frac{4}{3}$。\n\n步骤 5：第六个部分商是 $a_5 = \\lfloor \\xi_5 \\rfloor = \\lfloor \\frac{4}{3} \\rfloor = 1$。\n余项为 $\\xi_6 = \\frac{1}{\\xi_5 - a_5} = \\frac{1}{\\frac{4}{3} - 1} = \\frac{1}{\\frac{1}{3}} = 3$。\n\n步骤 6：第七个部分商是 $a_6 = \\lfloor \\xi_6 \\rfloor = \\lfloor 3 \\rfloor = 3$。\n由于 $\\xi_6$ 是整数，过程终止。\n\n部分商序列为 $(a_0, a_1, a_2, a_3, a_4, a_5, a_6) = (2, 3, 1, 1, 153, 1, 3)$。\n因此，$x = \\frac{9876}{4321}$ 的简单连分数展开用括号记法写作 $[2; 3, 1, 1, 153, 1, 3]$。\n\n第2部分：使用欧几里得算法进行验证\n\n用于寻找两个正整数 $(m, n)$（其中 $m > n$）最大公约数的欧几里得算法会生成一系列带余除法：\n$m = q_0 n + r_1$\n$n = q_1 r_1 + r_2$\n$r_1 = q_2 r_2 + r_3$\n...\n$r_{k-2} = q_{k-1} r_{k-1} + r_k$\n$r_{k-1} = q_k r_k + 0$\n数论的一个基本定理指出，对整数对 $(m, n)$ 应用欧几里得算法得到的商序列 $q_0, q_1, \\dots, q_k$ 与有理数 $\\frac{m}{n}$ 的简单连分数的部分商序列 $a_0, a_1, \\dots, a_k$ 完全相同。\n\n我们将欧几里得算法应用于整数对 $(9876, 4321)$：\n\n$9876 = 2 \\times 4321 + 1234$。商为 $q_0 = 2$。\n$4321 = 3 \\times 1234 + 619$。商为 $q_1 = 3$。\n$1234 = 1 \\times 619 + 615$。商为 $q_2 = 1$。\n$619 = 1 \\times 615 + 4$。商为 $q_3 = 1$。\n$615 = 153 \\times 4 + 3$。商为 $q_4 = 153$。\n$4 = 1 \\times 3 + 1$。商为 $q_5 = 1$。\n$3 = 3 \\times 1 + 0$。商为 $q_6 = 3$。\n\n算法终止。从欧几里得算法中获得的连续商序列为 $(2, 3, 1, 1, 153, 1, 3)$。\n\n这个商序列 $\\{q_i\\}$ 与第一部分计算出的部分商序列 $\\{a_i\\}$ 完全相同。这直接验证了结果，符合问题陈述的要求。\n因此，$x=\\frac{9876}{4321}$ 的简单连分数是 $[2; 3, 1, 1, 153, 1, 3]$。", "answer": "$$\n\\boxed{[2; 3, 1, 1, 153, 1, 3]}\n$$", "id": "3021001"}, {"introduction": "任何数字表示系统中的一个关键问题是唯一性。本练习旨在探索有限简单连分数的一个精妙而重要的性质：一个有理数可以有两种不同的表示形式。你将推导连接这两种形式的简单恒等式 [@problem_id:3086130]，并学会如何将任意表示转换为其唯一的、规范的形式（其最后一个偏商 $a_n \\ge 2$），这是进行清晰交流和深入学习所必需的技能。", "problem": "一个简单连分数是形如 $[a_{0}; a_{1}, a_{2}, \\dots]$ 的表达式，其中 $a_{0} \\in \\mathbb{Z}$ 且对于所有 $k \\ge 1$ 都有 $a_{k} \\in \\mathbb{Z}_{\\ge 1}$，它被解释为嵌套值 $a_{0} + \\dfrac{1}{a_{1} + \\dfrac{1}{a_{2} + \\ddots}}$。对于一个有限连分数 $[a_{0}; a_{1}, \\dots, a_{n}]$，其第 $n$ 个渐近分数是通过计算嵌套表达式直到 $a_{n}$ 所得到的有理数。有理数的有限连分数展开通常会被规范化，以避免末尾的部分商等于 $1$，方法是将末尾的 $1$ 并入前一个部分商。\n\n仅从这些定义出发，完成以下任务：\n1) 直接根据嵌套分数的定义证明，任何末尾项为 $1$ 的有限简单连分数都满足\n$$[a_{0}; a_{1}, \\dots, a_{n-1}, 1] \\;=\\; [a_{0}; a_{1}, \\dots, a_{n-1} + 1].$$\n2) 令 $p_{k}/q_{k}$ 表示 $[a_{0}; a_{1}, \\dots, a_{k}]$ 的第 $k$ 个渐近分数。仅使用渐近分数作为截断的定义以及对嵌套形式的初等代数，确定当把 $[a_{0}; \\dots, a_{n-1}, 1]$ 替换为其规范化形式 $[a_{0}; \\dots, a_{n-1} + 1]$ 时，最终的渐近分数如何变化。特别地，请用未规范化展开的两个前序渐近分数来表示规范化后的最终渐近分数。\n3) 应用此规范化，计算有限连分数 $[4; 2, 5, 1]$ 的精确有理数值，结果表示为最简分数。\n\n以单个最简分数形式提供最终答案。无需四舍五入。", "solution": "该问题要求完成三项与末尾部分商为 $1$ 的有限简单连分数的规范化相关的任务。\n\n### 第 1 部分：规范化恒等式的证明\n\n第一项任务是证明 $[a_{0}; a_{1}, \\dots, a_{n-1}, 1] = [a_{0}; a_{1}, \\dots, a_{n-1} + 1]$。我们直接从给定的嵌套分数定义出发。\n\n设 $x$ 是连分数 $[a_{0}; a_{1}, \\dots, a_{n-1}, 1]$ 的值。根据定义，有：\n$$x = a_{0} + \\cfrac{1}{a_{1} + \\cfrac{1}{a_{2} + \\cfrac{1}{\\ddots + \\cfrac{1}{a_{n-1} + \\cfrac{1}{1}}}}}$$\n此表达式的最内层是 $a_{n-1} + \\frac{1}{1}$。由于 $\\frac{1}{1} = 1$，此项可化简为 $a_{n-1} + 1$。\n\n将这个化简后的项代回 $x$ 的嵌套分数中，我们得到：\n$$x = a_{0} + \\cfrac{1}{a_{1} + \\cfrac{1}{a_{2} + \\cfrac{1}{\\ddots + \\cfrac{1}{(a_{n-1} + 1)}}}}$$\n根据定义，这个表达式就是有限简单连分数 $[a_{0}; a_{1}, \\dots, a_{n-1} + 1]$ 的值。\n\n因此，我们证明了\n$$[a_{0}; a_{1}, \\dots, a_{n-1}, 1] = [a_{0}; a_{1}, \\dots, a_{n-1} + 1].$$\n\n### 第 2 部分：规范化后最终渐近分数的表达式\n\n第二项任务是用未规范化展开 $[a_{0}; a_{1}, \\dots, a_{n-1}, 1]$ 的两个前序渐近分数来表示规范化形式 $[a_{0}; a_{1}, \\dots, a_{n-1} + 1]$ 的最终渐近分数。\n\n设未规范化的展开为 $C = [a_{0}; a_{1}, \\dots, a_{n-1}, a_{n}]$，其中 $a_{n}=1$。令其渐近分数记为 $c_{k} = \\frac{p_{k}}{q_{k}} = [a_{0}; a_{1}, \\dots, a_{k}]$，其中 $k=0, 1, \\dots, n$。分子 $p_k$ 和分母 $q_k$ 由以下递推关系定义：\n$$p_{k} = a_{k} p_{k-1} + p_{k-2}$$\n$$q_{k} = a_{k} q_{k-1} + q_{k-2}$$\n初始条件为 $p_{-2}=0, p_{-1}=1$ 和 $q_{-2}=1, q_{-1}=0$。这些关系可以通过对嵌套分数定义进行归纳推导得出。\n\n规范化后的最终渐近分数是规范化连分数 $[a_{0}; a_{1}, \\dots, a_{n-1} + 1]$ 的值。根据第 1 部分，这个值等于未规范化分数 $[a_{0}; a_{1}, \\dots, a_{n-1}, 1]$ 的值，也就是其最终渐近分数 $c_{n} = \\frac{p_{n}}{q_{n}}$。\n\n未规范化展开的两个前序渐近分数是 $c_{n-1} = \\frac{p_{n-1}}{q_{n-1}}$ 和 $c_{n-2} = \\frac{p_{n-2}}{q_{n-2}}$。我们需要用 $p_{n-1}, q_{n-1}, p_{n-2}, q_{n-2}$ 来表示 $\\frac{p_n}{q_n}$。\n\n使用 $k=n$ 和 $a_{n}=1$ 的递推关系：\n$$p_{n} = a_{n} p_{n-1} + p_{n-2} = (1) p_{n-1} + p_{n-2} = p_{n-1} + p_{n-2}$$\n$$q_{n} = a_{n} q_{n-1} + q_{n-2} = (1) q_{n-1} + q_{n-2} = q_{n-1} + q_{n-2}$$\n\n因此，等于 $\\frac{p_n}{q_n}$ 的规范化最终渐近分数可以表示为：\n$$\\frac{p_{n}}{q_{n}} = \\frac{p_{n-1} + p_{n-2}}{q_{n-1} + q_{n-2}}$$\n这个表达式用未规范化展开中最终渐近分数之前的两个渐近分数 $\\frac{p_{n-1}}{q_{n-1}}$ 和 $\\frac{p_{n-2}}{q_{n-2}}$ 的分子和分母给出了规范化分数的值。\n\n### 第 3 部分：计算 $[4; 2, 5, 1]$\n\n第三项任务是应用此结果来计算 $[4; 2, 5, 1]$ 的有理数值。\n这个连分数的形式是 $[a_{0}; a_{1}, a_{2}, 1]$。将其与一般形式 $[a_0; \\dots, a_{n-1}, 1]$ 比较，我们有 $n-1=2$，所以 $n=3$。部分商为：\n$a_{0} = 4$\n$a_{1} = 2$\n$a_{2} = 5$\n$a_{3} = 1$\n\n为了使用第 2 部分的公式，我们需要计算未规范化展开 $[4; 2, 5, 1]$ 的渐近分数 $c_{n-1} = c_{2} = \\frac{p_2}{q_2}$ 和 $c_{n-2} = c_{1} = \\frac{p_1}{q_1}$。\n\n我们使用初始值为 $p_{-1}=1, p_{-2}=0, q_{-1}=0, q_{-2}=1$ 的递推关系。\n\n对于 $k=0$：\n$p_{0} = a_{0} p_{-1} + p_{-2} = 4(1) + 0 = 4$\n$q_{0} = a_{0} q_{-1} + q_{-2} = 4(0) + 1 = 1$\n所以，$c_{0} = \\frac{4}{1}$。\n\n对于 $k=1$ (即 $c_{n-2}$)：\n$p_{1} = a_{1} p_{0} + p_{-1} = 2(4) + 1 = 9$\n$q_{1} = a_{1} q_{0} + q_{-1} = 2(1) + 0 = 2$\n所以，$\\frac{p_1}{q_1} = \\frac{9}{2}$。\n\n对于 $k=2$ (即 $c_{n-1}$)：\n$p_{2} = a_{2} p_{1} + p_{0} = 5(9) + 4 = 45 + 4 = 49$\n$q_{2} = a_{2} q_{1} + q_{0} = 5(2) + 1 = 10 + 1 = 11$\n所以，$\\frac{p_2}{q_2} = \\frac{49}{11}$。\n\n现在我们应用第 2 部分的公式，使用 $n=3$ 来计算该分数的值：\n$$\\text{值} = \\frac{p_{2} + p_{1}}{q_{2} + q_{1}} = \\frac{49 + 9}{11 + 2} = \\frac{58}{13}$$\n数字 $13$ 是质数。由于 $58 = 2 \\times 29$，$13$ 不能整除 $58$。因此，分数 $\\frac{58}{13}$ 是最简分数。\n\n这个结果可以通过直接计算其规范化形式 $[4; 2, 6]$ 来验证：\n$$[4; 2, 6] = 4 + \\cfrac{1}{2 + \\cfrac{1}{6}} = 4 + \\cfrac{1}{\\frac{12+1}{6}} = 4 + \\cfrac{1}{\\frac{13}{6}} = 4 + \\frac{6}{13} = \\frac{52+6}{13} = \\frac{58}{13}$$\n两种方法得到相同的结果。 $[4; 2, 5, 1]$ 的值为 $\\frac{58}{13}$。", "answer": "$$\\boxed{\\frac{58}{13}}$$", "id": "3086130"}]}
{"hands_on_practices": [{"introduction": "在开始对二元二次型进行分类之前，我们必须首先理解其最基本的不变量：判别式。这项练习将引导您从第一性原理出发，推导判别式的表达式，并探索其符号如何决定二次型的基本性质（即它是定性还是不定性）。\n\n更进一步，通过这个过程，您将揭示一个关键的洞察，即对于正定或负定形式，为何其等价类的数量（即类数）是有限的。这是二次型理论的一个基石，为后续的分类和计算工作奠定了理论基础。[@problem_id:3009986]", "problem": "考虑整数上的二元二次型 $Q(x,y)=2x^{2}+3xy+5y^{2}$。仅使用关于二元二次型的基本定义和事实，完成以下任务：\n- 从第一性原理推导 $Q$ 的判别式 $D$。\n- 确定 $Q$ 的定性（正定、负定或不定），并直接根据 $D$ 的符号以及相应的主子式判据来证明你的分类。\n- 简要解释 $D$ 的符号如何决定 $Q$ 所表示的值的定性行为，并说明在 $D0$ 的情况下，约化理论如何蕴含等价类的有限性，并将其与判别式 $D$ 的类数概念联系起来。在你的解释中，不要使用任何预先给出的分类定理或捷径公式；从定义和标准矩阵判据出发进行推理。\n\n你最终报告的答案必须是判别式 $D$ 的单个精确整数。无需进行四舍五入。", "solution": "将根据指定的验证协议分析问题陈述。\n\n### 步骤1：提取已知条件\n- 二元二次型为 $Q(x,y)=2x^{2}+3xy+5y^{2}$。\n- 变量 $x$ 和 $y$ 是整数。\n- 任务是：\n    1. 从第一性原理推导 $Q$ 的判别式 $D$。\n    2. 使用 $D$ 的符号和顺序主子式判据确定 $Q$ 的定性。\n    3. 简要解释 $D$ 的符号、$Q$ 所表示的值的行为以及在 $D0$ 情况下等价类的有限性（类数）之间的联系。\n- 约束条件是仅使用基本定义和事实，不使用预先给出的分类定理或捷径公式。\n\n### 步骤2：使用提取的已知条件进行验证\n该问题是数论中二元二次型初等理论的一个标准练习。\n- **科学依据：** 该问题基于数论和线性代数中成熟的数学原理。所有概念——二元二次型、判别式、定性、等价类、类数——都有严格的定义。\n- **良构性：** 该问题提供了一个特定的二次型，并要求给出可以唯一确定的特定、明确定义的性质和解释。\n- **客观性：** 该问题以精确、形式化的数学语言陈述，没有歧义或主观论断。\n- 该问题是自洽的、一致的，并且不违反任何指定的无效标准。它要求从第一性原理进行推导，这是一个合理且富有洞察力的数学任务。\n\n### 步骤3：结论与行动\n该问题是**有效的**。将提供完整解答。\n\n### 解答\n\n一般的二元二次型是形如 $Q(x,y) = ax^2 + bxy + cy^2$ 的表达式，其中 $a$、$b$ 和 $c$ 是整数系数，$x,y$ 是整数变量。对于给定的形式 $Q(x,y)=2x^{2}+3xy+5y^{2}$，我们有 $a=2$，$b=3$ 和 $c=5$。\n\n**判别式的推导**\n\n二元二次型的判别式 $D$ 从根本上源于配方法的过程。我们操纵 $Q(x,y)$ 的表达式，以分离出一个包含 $x$ 和 $y$ 的平方项。我们将该形式视为关于 $x$ 的二次式来进行处理：\n$$Q(x,y) = ax^2 + bxy + cy^2$$\n我们乘以 $4a$ 以避免在为项 $(2ax)^2$ 配方的中间步骤中出现分数：\n$$4aQ(x,y) = 4a(ax^2 + bxy + cy^2) = 4a^2x^2 + 4abxy + 4acy^2$$\n前两项是 $(2ax+by)^2$ 展开式的一部分：\n$$(2ax+by)^2 = 4a^2x^2 + 4abxy + b^2y^2$$\n将此代入 $4aQ(x,y)$ 的表达式中：\n$$4aQ(x,y) = (2ax+by)^2 - b^2y^2 + 4acy^2$$\n$$4aQ(x,y) = (2ax+by)^2 - (b^2 - 4ac)y^2$$\n量 $D = b^2 - 4ac$ 被定义为二次型的判别式。这个表达式表明，$Q(x,y)$ 所取值的性质关键性地依赖于 $D$ 的符号。\n\n对于具体形式 $Q(x,y)=2x^{2}+3xy+5y^{2}$，系数为 $a=2$，$b=3$ 和 $c=5$。使用上面推导的定义，判别式为：\n$$D = b^2 - 4ac = 3^2 - 4(2)(5) = 9 - 40 = -31$$\n\n**定性的判定**\n\n二次型的定性可以使用二阶偏导数的海森矩阵来确定，对于二元二次型 $Q(x,y)$，这对应于一个对称矩阵表示。二次型 $Q(x,y)$ 可以用矩阵表示法写为 $\\mathbf{v}^T M \\mathbf{v}$，其中 $\\mathbf{v} = \\begin{pmatrix} x \\\\ y \\end{pmatrix}$ 且 $M$ 是对称矩阵：\n$$M = \\begin{pmatrix} a  b/2 \\\\ b/2  c \\end{pmatrix}$$\n对于 $Q(x,y)=2x^{2}+3xy+5y^{2}$，其关联矩阵为：\n$$M = \\begin{pmatrix} 2  3/2 \\\\ 3/2  5 \\end{pmatrix}$$\n根据 Sylvester 判据，一个对称矩阵是正定的，当且仅当其所有顺序主子式均为正。顺序主子式是左上角 $k \\times k$ 子矩阵的行列式。\n第一个顺序主子式是 $M_1 = \\det([2]) = 2$。\n第二个顺序主子式是 $M_2 = \\det(M) = (2)(5) - (\\frac{3}{2})(\\frac{3}{2}) = 10 - \\frac{9}{4} = \\frac{40-9}{4} = \\frac{31}{4}$。\n\n由于 $M_1=2  0$ 和 $M_2=\\frac{31}{4}  0$，两个顺序主子式都为正。因此，矩阵 $M$ 是正定的，从而二次型 $Q(x,y)$ 是正定的。这意味着对于所有整数 $(x,y) \\neq (0,0)$，$Q(x,y)  0$。\n\n与判别式 $D$ 的联系是直接的。第二个主子式是 $M$ 的行列式：\n$$\\det(M) = ac - \\frac{b^2}{4} = -\\frac{1}{4}(b^2 - 4ac) = -\\frac{D}{4}$$\n正定性判据（$M_1  0$ 和 $M_2  0$）转化为 $a  0$ 和 $-D/4  0$。条件 $-D/4  0$ 等价于 $D  0$。\n在我们的例子中，$a=2  0$ 并且计算出的判别式是 $D=-31  0$。两个条件都满足，从 $D$ 的符号和第一个系数 $a$（即第一个主子式）证实了该形式是正定的。\n\n**D的作用及类数有限性的解释**\n\n判别式 $D = b^2 - 4ac$ 的符号决定了 $Q(x,y)$ 所表示的值的定性行为。如在 $D$ 的推导中所示：\n$$Q(x,y) = \\frac{1}{4a} \\left( (2ax+by)^2 - Dy^2 \\right)$$\n- 如果 $D  0$，那么 $-D  0$。表达式 $(2ax+by)^2 - Dy^2$ 是两个平方的和（如果我们考虑有理数变量，则乘以一个常数），它只能在 $y=0$ 和 $2ax+by=0$ 时为零，这意味着 $x=0$。因此，对于所有 $(x,y) \\neq (0,0)$，$Q(x,y)$ 的符号与 $a$ 相同。该形式是定的（如果 $a0$ 则为正定，如果 $a0$ 则为负定）。\n- 如果 $D  0$，表达式 $(2ax+by)^2 - Dy^2$ 是两个平方的差。通过为 $x$ 和 $y$ 选择合适的整数值，可以使该表达式为正或为负。因此，该形式是不定的，既可以表示正值也可以表示负值。\n- 如果 $D = 0$，该形式变为 $Q(x,y) = \\frac{1}{4a}(2ax+by)^2$，它在 $2ax+by=0$ 时为零。这条零值线表明该形式是退化的。\n\n对于 $D  0$ 的情况，例如我们的判别式 $D=-31$，这些形式是定的。二元二次型理论研究在模群 $SL(2, \\mathbb{Z})$ 作用下形式的等价类。如果两个形式表示相同的整数集合，则它们是等价的。约化理论为每个等价类提供了一个典范代表。对于一个正定形式 $ax^2+bxy+cy^2$，其为*约化的*条件是 $|b| \\le a \\le c$。\n\n对于一个固定的负判别式 $D$，等价类数量的有限性（类数, $h(D)$）可以从这些约化条件中推导出来。\n对于一个约化形式，我们有不等式 $|b| \\le a$ 和 $a \\le c$。\n从判别式方程 $D = b^2 - 4ac$，我们有 $4ac = b^2 - D$。由于形式是正定的，$a  0$ 且 $c  0$。\n结合这些不等式：\n$$4a^2 = 4a \\cdot a \\le 4a \\cdot c = 4ac = b^2 - D$$\n因为 $|b| \\le a$，我们有 $b^2 \\le a^2$。因此：\n$$4a^2 \\le b^2 - D \\le a^2 - D$$\n这意味着 $3a^2 \\le -D$。由于 $D  0$，$-D$ 是正的，我们可以写成：\n$$a^2 \\le \\frac{-D}{3} \\quad \\text{或} \\quad a \\le \\sqrt{\\frac{-D}{3}}$$\n由于 $a$ 必须是整数，这个不等式表明对于一个固定的判别式 $D$，系数 $a$ 只有有限个可能的值。\n对于这有限多个 $a$ 的值中的每一个，约化条件 $|b| \\le a$ 意味着 $b$ 也只有有限个可能的整数值。\n最后，对于每一对 $(a, b)$，系数 $c$ 由判别式方程唯一确定：$c = \\frac{b^2-D}{4a}$。我们还必须验证 $c$ 是一个满足 $a \\le c$ 的整数，但关键点在于，约化形式的三元组 $(a,b,c)$ 的可能数量是有界的。\n由于 $a$ 的选择是有限的，对于其中每一个 $a$，$b$ 的选择也是有限的，而 $c$ 又是固定的，所以判别式为 $D$ 的约化形式的总数必须是有限的。这个有限的数就是类数 $h(D)$。\n\n总而言之，判别式的负号确保了定性，这反过来又导致了不等式（$3a^2 \\le -D$ 和 $|b| \\le a$），这些不等式限制了任何约化形式的系数，从而证明了类数的有限性。", "answer": "$$\\boxed{-31}$$", "id": "3009986"}, {"introduction": "正如我们在之前的探索中 ([@problem_id:3009986]) 所看到的，对于一个给定的负判别式，类数是有限的。但我们如何实际计算它呢？这项练习将指导您设计一个具体的算法，以找出给定判别式的所有简约形式。\n\n您将学习如何从简约条件出发，推导出二次型系数的有效界限，然后系统地应用这些界限来执行枚举。通过这个实践，您将把类数这一抽象概念转化为一个具体、可计算的量，这是数论研究中的一项核心技能。[@problem_id:3089530]", "problem": "考虑具有整数系数$a$，$b$，$c$的二元二次型$f(x,y) = a x^{2} + b x y + c y^{2}$，其判别式为$D = b^{2} - 4 a c$且$D0$。如果$a  0$且$D0$，则该形式为正定形式。一个正定形式如果满足$|b| \\leq a \\leq c$，则称其为简约形式，同时遵循破同约定，即当$|b| = a$或$a = c$时，$b \\geq 0$。如果两个形式通过一个属于群$\\mathrm{SL}_{2}(\\mathbb{Z})$（在$\\mathbb{Z}$上的2阶特殊线性群）的矩阵所给出的变量变换$(x,y) \\mapsto (x',y')$相关联，则它们是真等价的。对于负判别式$D$，其类数$h(D)$是判别式为$D$的本原正定二元二次型的真等价类的数量，其中若$\\gcd(a,b,c) = 1$，则形式是本原的，$\\gcd$表示最大公约数（GCD）。\n\n从这些定义出发，推导$a$和$b$的显式界限，以保证对于固定的负判别式$D$，搜索简约正定形式的过程是有限的。使用这些界限设计一个完整的枚举算法，该算法在给定一个作为基本判别式的固定负判别式$D$时，能够恰好一次地输出所有判别式为$D$的简约本原正定形式。你的推导应根据简约条件和判别式的定义来证明每个界限。\n\n最后，将你的算法应用于$D = -23$的情况，并确定判别式为$-23$的简约本原正定形式的数量。将最终答案表示为单个整数。无需四舍五入。", "solution": "我们给定一个正定二元二次型 $f(x,y) = ax^2 + bxy + cy^2$，其整数系数为$a,b,c$，满足$a  0$且判别式$D = b^2 - 4ac$为负。如果$|b| \\leq a \\leq c$，则该形式是简约的。\n\n首先，我们推导$a$和$b$的显式界限，以确保对于固定的判别式$D$，简约形式的搜索空间是有限的。\n根据判别式的定义，我们有$4ac = b^2 - D$。由于$D0$，我们可以将其写为$4ac = b^2 + |D|$。\n简约条件为$|b| \\leq a$和$a \\leq c$。\n由$a \\leq c$和$a  0$，我们可以两边乘以$4a$得到$4a^2 \\leq 4ac$。\n代入$4ac$的表达式，我们有：\n$$4a^2 \\leq b^2 + |D|$$\n根据简约条件$|b| \\leq a$，我们有$b^2 \\leq a^2$。将此代入前面的不等式得到：\n$$4a^2 \\leq a^2 + |D|$$\n$$3a^2 \\leq |D|$$\n$$a^2 \\leq \\frac{|D|}{3}$$\n由于$a$必须是正整数，这意味着：\n$$1 \\leq a \\leq \\sqrt{\\frac{|D|}{3}}$$\n这对系数$a$提供了一个关键的上限，保证了$a$只有有限个可能的整数值。\n$b$的界限直接来自简约条件$|b| \\leq a$。对于给定的$a$，系数$b$可能的整数值范围是：\n$$-a \\leq b \\leq a$$\n这两个对$a$和$b$的界限为简约形式的系数定义了一个有限的搜索空间。\n\n接下来，我们设计一个枚举算法，用于寻找给定基本判别式$D0$的所有简约本原正定形式。\n一个判别式$D$是基本判别式，如果它不具有$D = k^{2}D_{0}$的形式，其中$k  1$是整数，$D_{0}$是另一个判别式。基本判别式的一个关键性质是，任何判别式为$D$的二次型必然是本原的，即$\\gcd(a,b,c)=1$。这简化了算法，因为我们无需进行单独的本原性检查。\n\n算法如下：\n输入：一个负的基本判别式$D$。\n输出：判别式为$D$的所有唯一的简约本原正定形式$(a, b, c)$的列表。\n\n1.  初始化一个空的形式列表。\n2.  计算$a$的上限：$a_{\\max} = \\lfloor\\sqrt{-D/3}\\rfloor$。\n3.  遍历从$1$到$a_{\\max}$的每个整数$a$。\n4.  对于每个$a$，遍历从$-a$到$a$的每个整数$b$。\n5.  作为一个优化，注意到由$D = b^2 - 4ac$可知$D \\equiv b^{2} \\pmod{4}$。对于整数$b$，$b^2$模$4$只能是$0$或$1$。由于$D$是基本判别式，$D \\equiv 0 \\pmod 4$或$D \\equiv 1 \\pmod 4$。特别地，$b$必须与$D$具有相同的奇偶性：$b \\equiv D \\pmod 2$。这允许我们跳过一半的$b$值。\n6.  对于每个满足奇偶性条件的数对$(a, b)$，检查$b^{2} - D$是否能被$4a$整除。\n7.  如果可以，计算整数$c = \\frac{b^2 - D}{4a}$。\n8.  现在我们有了一个候选形式$(a, b, c)$。我们必须验证它是否是简约的。\n    a. 我们已经通过循环的界限强制了$|b| \\leq a$。\n    b. 我们必须检查是否$a \\leq c$。如果不是，则舍弃该形式。\n    c. 我们必须检查破同条件：如果$|b| = a$或$a = c$，则必须有$b \\geq 0$。如果不满足此条件，则舍弃该形式。\n9.  如果形式$(a, b, c)$被验证为简约形式，则将其添加到我们的列表中。\n10. 最终的列表包含判别式为$D$的所有简约本原正定形式，其大小即为类数$h(D)$。\n\n最后，我们将此算法应用于判别式$D = -23$。\n判别式$D = -23$是一个基本判别式，因为$-23 \\equiv 1 \\pmod 4$且$23$是无平方因子的。因此，我们找到的任何具有此判别式的形式都将是本原的。\n\n1.  $a$的上限是$a_{\\max} = \\lfloor\\sqrt{-(-23)/3}\\rfloor = \\lfloor\\sqrt{23/3}\\rfloor = \\lfloor\\sqrt{7.66...}\\rfloor = 2$。\n    所以，我们必须检查$a=1$和$a=2$。\n2.  奇偶性条件是$b \\equiv D \\pmod 2$。由于$D = -23$是奇数，所以$b$也必须是奇数。\n\n情况 $a = 1$:\n$b$的循环范围是从$-1$到$1$。由于$b$必须是奇数，我们检查$b = -1$和$b = 1$。\n- 如果$b = -1$：计算$c = \\frac{(-1)^2 - (-23)}{4 \\cdot 1} = \\frac{1+23}{4} = 6$。\n  形式为$(1, -1, 6)$。\n  检查简约性：\n  - $|b| \\leq a \\implies |-1| \\leq 1$，成立。\n  - $a \\leq c \\implies 1 \\leq 6$，成立。\n  - 破同规则：我们有$|b|=a$。规则要求$b \\geq 0$。此处$b=-1$，因此该条件不满足。形式$(1, -1, 6)$不是简约形式。\n- 如果$b = 1$：计算$c = \\frac{1^2 - (-23)}{4 \\cdot 1} = \\frac{24}{4} = 6$。\n  形式为$(1, 1, 6)$。\n  检查简约性：\n  - $|b| \\leq a \\implies |1| \\leq 1$，成立。\n  - $a \\leq c \\implies 1 \\leq 6$，成立。\n  - 破同规则：我们有$|b|=a$。规则要求$b \\geq 0$。此处$b=1$，因此条件满足。\n  形式$(1, 1, 6)$是一个简约本原正定形式。\n\n情况 $a = 2$:\n$b$的循环范围是从$-2$到$2$。由于$b$必须是奇数，我们检查$b = -1$和$b = 1$。\n- 如果$b = -1$：计算$c = \\frac{(-1)^2 - (-23)}{4 \\cdot 2} = \\frac{24}{8} = 3$。\n  形式为$(2, -1, 3)$。\n  检查简约性：\n  - $|b| \\leq a \\implies |-1| \\leq 2$，成立。\n  - $a \\leq c \\implies 2 \\leq 3$，成立。\n  - 破同规则：$|b|=a$和$a=c$均不成立，因此不适用破同规则。\n  形式$(2, -1, 3)$是一个简约本原正定形式。\n- 如果$b = 1$：计算$c = \\frac{1^2 - (-23)}{4 \\cdot 2} = \\frac{24}{8} = 3$。\n  形式为$(2, 1, 3)$。\n  检查简约性：\n  - $|b| \\leq a \\implies |1| \\leq 2$，成立。\n  - $a \\leq c \\implies 2 \\leq 3$，成立。\n  - 破同规则：$|b|=a$和$a=c$均不成立，因此不适用破同规则。\n  形式$(2, 1, 3)$是一个简约本原正定形式。\n\n枚举完成。判别式为$D=-23$的所有简约本原正定形式的集合是：\n$\\{(1, 1, 6), (2, -1, 3), (2, 1, 3)\\}$。\n此类形式的数量为$3$。这就是类数$h(-23)$。", "answer": "$$ \\boxed{3} $$", "id": "3089530"}, {"introduction": "通过之前的练习 ([@problem_id:3089530])，我们学习了如何通过系统性地枚举所有简约形式来计算类数。该方法依赖于高斯简约理论的一个核心成果：每个等价类中都有一个*唯一*的简约二次型代表，这为建立一个一致的分类体系提供了保障。\n\n这项练习将挑战您深入思考这个唯一性的来源。您需要探索当我们放宽标准的简约条件时会发生什么，并亲自构建一个反例。通过这个过程，您将更深刻地理解那些看似微小但至关重要的“边界条件”或“决胜规则”在确保唯一性方面所扮演的关键角色。[@problem_id:3089496]", "problem": "设 $f(x,y) = ax^{2} + bxy + cy^{2}$ 是一个系数 $a, b, c$ 为整数的二元二次型。$f$ 的判别式为 $\\Delta = b^{2} - 4ac$。如果存在一个矩阵 $M \\in \\mathrm{Special\\ Linear\\ Group\\ of\\ degree\\ 2\\ over\\ the\\ integers\\ (SL(2,\\mathbb{Z}))}$，使得由 $M$ 导出的变量替换将二次型 $f$ 变换为 $f'$，则称两个二次型 $[a,b,c]$ 和 $[a',b',c']$ 是正则等价的。对于 $\\Delta  0$ 的情况，如果 $a  0$，则该二次型称为正定的。对正定二次型的高斯约化要求不等式 $|b| \\leq a \\leq c$ 成立，并附加边界符号条件：如果 $|b| = a$ 或 $a = c$，则 $b \\geq 0$。在这些条件下，每个正则等价类包含一个唯一的约化代表元。\n\n考虑一个弱化的约化概念，其中去掉了边界符号条件，即如果一个二次型满足 $a  0$, $c  0$ 且 $|b| \\leq a \\leq c$，就称其为约化的，当等号成立时对 $b$ 的符号没有限制。仅使用上述核心定义和 $SL(2,\\mathbb{Z})$ 的等价作用，构造一个明确的反例，说明在这种弱化约化条件下唯一性不成立，并指出破坏唯一性证明的确切的弱化边界条件。\n\n计算判别式为 $\\Delta = -3$ 的本原正定二次型的正则等价类中，满足这种弱化约化概念的代表元的确切数量。你的最终答案必须是一个整数。无需四舍五入。", "solution": "该问题要求做三件事：首先，在一组弱化的约化条件下，构造一个说明约化型唯一性不成立的反例；其次，指出导致唯一性失效的弱化条件中的具体方面；第三，计算判别式为 $\\Delta = -3$ 的此类弱化约化型的数量。\n\n设一个二元二次型由其整数系数三元组 $f = [a, b, c]$ 表示，代表 $f(x,y) = ax^2 + bxy + cy^2$。其判别式为 $\\Delta = b^2 - 4ac$。如果 $\\Delta  0$ 且 $a  0$，则该二次型是正定的。群 $\\mathrm{SL}(2, \\mathbb{Z})$ 作用于这些二次型。对于一个矩阵 $M = \\begin{pmatrix} p  q \\\\ r  s \\end{pmatrix} \\in \\mathrm{SL}(2, \\mathbb{Z})$，变量替换 $(x, y) \\to (px+qy, rx+sy)$ 将二次型 $[a, b, c]$ 变换为一个新的二次型 $[a', b', c']$。如果两个二次型通过这样的变换相关联，则它们是正则等价的。\n\n一个正定二次型的弱化约化条件是：\n1. $|b| \\leq a$\n2. $a \\leq c$\n\n我们注意到，对于一个正定二次型，$\\Delta = b^2 - 4ac  0$，这意味着 $4ac  b^2 \\geq 0$。由于 $a  0$，因此可以推断出 $c  0$。所以，问题描述中提到的条件 $c  0$ 是多余的。\n\n### 第一部分：唯一性的反例\n\n标准（高斯）约化条件是 $|b| \\leq a \\leq c$，并附有额外的边界条件，即如果 $|b| = a$ 或 $a = c$，则 $b \\geq 0$。正是这个边界条件保证了唯一性。去掉它之后，我们预计在这些边界上会出现非唯一的等价代表元。\n\n让我们研究 $a=c$ 的情况。考虑二次型 $f_1 = [2, 1, 2]$。\n- 它是一个本原二次型，因为 $\\mathrm{gcd}(2, 1, 2) = 1$。\n- 判别式为 $\\Delta = 1^2 - 4(2)(2) = 1 - 16 = -15$。\n- 它是正定的，因为 $\\Delta  0$ 且 $a=2  0$。\n- 它满足弱化约化条件：$|b| = 1 \\leq a = 2$ 且 $a = 2 \\leq c = 2$。\n\n现在，让我们考虑矩阵 $S = \\begin{pmatrix} 0  -1 \\\\ 1  0 \\end{pmatrix} \\in \\mathrm{SL}(2, \\mathbb{Z})$ 的作用。相应的变换是 $(x, y) \\to (-y, x)$。将此应用于 $f(x,y) = ax^2 + bxy + cy^2$ 得到 $f(-y, x) = a(-y)^2 + b(-y)x + c(x)^2 = cx^2 - bxy + ay^2$。这个变换将二次型 $[a, b, c]$ 映射到 $[c, -b, a]$。\n\n将此变换应用于 $f_1 = [2, 1, 2]$，我们得到二次型 $f_2 = [2, -1, 2]$。\n让我们检查 $f_2$ 是否也满足弱化约化条件：\n- 它具有相同的判别式 $\\Delta = (-1)^2 - 4(2)(2) = -15$，并且也是本原的。\n- 它是正定的，因为 $a=2  0$。\n- 它满足弱化约化条件：$|b| = |-1| = 1 \\leq a = 2$ 且 $a = 2 \\leq c = 2$。\n\n我们找到了两个不同的二次型 $f_1 = [2, 1, 2]$ 和 $f_2 = [2, -1, 2]$，它们是正则等价的，但都满足弱化约化条件。这构成了所要求的反例，并证明了唯一性的失效。\n\n### 第二部分：缺陷的识别\n高斯约化唯一性的证明表明，如果两个二次型 $[a,b,c]$ 和 $[a',b',c']$ 是正则等价的并且都是高斯约化的，那么它们必定是相同的。该证明的一个关键部分是确定 $a=a', c=c'$，因此 $b^2 = (b')^2$，这就留下了 $b' = \\pm b$ 的模糊性。边界条件正是为了解决这种模糊性而设计的。通过去掉这些条件，我们允许了不同但等价的二次型可以作为“约化”形式共存的情况。\n\n唯一性不成立的两个主要来源，是 $\\mathrm{SL}(2, \\mathbb{Z})$ 中特定元素在由 $|b| \\leq a \\leq c$ 定义的基本域边界上的作用。\n\n1.  **边界 $a=c$**：如我们的反例所示，变换 $S = \\begin{pmatrix} 0  -1 \\\\ 1  0 \\end{pmatrix}$ 将 $[a, b, a]$ 映射到 $[a, -b, a]$。如果一个 $b \\neq 0$ 的二次型 $f_1 = [a, b, a]$ 是弱化约化的（要求 $|b| \\leq a$），那么其等价的二次型 $f_2 = [a, -b, a]$ 也是弱化约化的。如果 $b \\ne 0$，这两个二次型是不同的。弱化约化无法在它们之间做出选择。标准条件 $b \\geq 0$ 将会选择 $[a, |b|, a]$ 作为唯一的代表元。\n\n2.  **边界 $|b|=a$**：考虑变换 $T = \\begin{pmatrix} 1  1 \\\\ 0  1 \\end{pmatrix} \\in \\mathrm{SL}(2, \\mathbb{Z})$。它将 $(x, y)$ 映射到 $(x+y, y)$，把 $[a, b, c]$ 变换为 $[a, b+2a, a+b+c]$。它的逆变换 $T^{-1}=\\begin{pmatrix} 1  -1 \\\\ 0  1 \\end{pmatrix}$，将 $[a, b, c]$ 映射到 $[a, b-2a, a-b+c]$。考虑一个二次型 $f_1 = [a, a, c]$，其中 $a \\leq c$。它是弱化约化的。我们来找一个等价的二次型。如果 $a \\leq c$，二次型 $f_2 = [a, -a, c]$ 也是弱化约化的。将变换 $T$ 应用于 $f_2$ 得到 $[a, -a+2a, a-a+c] = [a, a, c] = f_1$。因此，$[a, a, c]$ 和 $[a, -a, c]$ 是正则等价的。如果 $a0$，它们是不同的。如果 $a \\leq c$，它们都是弱化约化的。唯一性再次失效。标准条件 $b \\geq 0$ 将会选择 $[a, a, c]$。\n\n确切的缺陷在于，弱化约化条件定义了一个基本域，其边界在群作用下是相互等同的。由于没有在这些边界上施加一个决胜规则（如 $b \\geq 0$），在群作用下等价的点都被包含了进来，从而破坏了唯一性。具体的失效情况发生在满足 $a=c$（且 $b \\neq 0$）或 $|b|=a$ 的二次型上。\n\n### 第三部分：对判别式 $\\Delta = -3$ 的计算\n我们要寻找满足弱化约化条件 $|b| \\leq a \\leq c$ 且判别式 $\\Delta = b^2 - 4ac = -3$ 的本原正定二次型 $[a, b, c]$ 的数量。\n\n条件 $\\Delta = -3$ 意味着 $4ac = b^2 + 3$。\n根据约化条件 $|b| \\leq a$，我们有 $b^2 \\leq a^2$。\n将此代入判别式方程：\n$4ac = b^2 + 3 \\leq a^2 + 3$。\n\n根据约化条件 $a \\leq c$，我们可以写出 $4a^2 \\leq 4ac$。\n结合这些不等式，我们得到：\n$4a^2 \\leq 4ac \\leq a^2 + 3$\n这可以简化为 $3a^2 \\leq 3$，即 $a^2 \\leq 1$。\n由于该二次型是正定的，$a$ 必须是一个正整数，所以唯一的可能性是 $a=1$。\n\n现在，我们将 $a=1$ 代回到我们的条件中：\n1. $|b| \\leq a \\implies |b| \\leq 1$。由于 $b$ 必须是整数，所以 $b \\in \\{-1, 0, 1\\}$。\n2. $4ac = b^2 + 3 \\implies 4(1)c = b^2 + 3 \\implies 4c = b^2 + 3$。\n\n我们测试 $b$ 可能的整数值：\n- 如果 $b=0$，则 $4c = 0^2 + 3 = 3$，得出 $c = 3/4$。这不是一个整数，所以不存在 $b=0$ 的二次型。\n- 如果 $b=1$，则 $4c = 1^2 + 3 = 4$，得出 $c=1$。这得到二次型 $f_1 = [1, 1, 1]$。\n- 如果 $b=-1$，则 $4c = (-1)^2 + 3 = 4$，得出 $c=1$。这得到二次型 $f_2 = [1, -1, 1]$。\n\n我们必须验证这两个二次型满足所有要求的性质。\n对于 $f_1 = [1, 1, 1]$：\n- $\\Delta = 1^2 - 4(1)(1) = -3$。\n- 本原性：$\\mathrm{gcd}(1, 1, 1) = 1$。\n- 正定性：$a=1  0$。\n- 弱化约化：$|b|=1 \\leq a=1$ 且 $a=1 \\leq c=1$。条件得到满足。\n\n对于 $f_2 = [1, -1, 1]$：\n- $\\Delta = (-1)^2 - 4(1)(1) = -3$。\n- 本原性：$\\mathrm{gcd}(1, -1, 1) = 1$。\n- 正定性：$a=1  0$。\n- 弱化约化：$|b|=|-1|=1 \\leq a=1$ 且 $a=1 \\leq c=1$。条件得到满足。\n\n我们找到了两个不同的、满足弱化约化条件的二次型 $[1, 1, 1]$ 和 $[1, -1, 1]$。问题要求的是在一个正则等价类中这类代表元的数量。我们必须检查这两个二次型是否是正则等价的。\n正如第一部分所示，变换 $S$ 将 $[a,b,c]$ 映射到 $[c,-b,a]$。将此变换应用于 $f_1 = [1, 1, 1]$ 得到 $[1, -1, 1]$，即 $f_2$。因此，它们是正则等价的。\n\n判别式 $\\Delta = -3$ 的类数，记作 $h(-3)$，已知为 $1$。这意味着所有判别式为此值的本原正定二次型都属于同一个正则等价类。既然我们已经穷尽了所有 $\\Delta = -3$ 的弱化约化二次型的可能性，并恰好找到了两个，且这两个是等价的，那么这两个二次型就是这个唯一等价类的弱化约化代表元的完整集合。\n\n因此，判别式为 $\\Delta = -3$ 的本原正定二次型的正则等价类中，弱化约化代表元的数量是 $2$。", "answer": "$$\\boxed{2}$$", "id": "3089496"}]}
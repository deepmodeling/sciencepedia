{"hands_on_practices": [{"introduction": "这个练习探讨了第 $n$ 个三角数 $T(n) = \\frac{n(n-1)}{2}$ 的奇偶性。它不仅仅是进行简单的案例分析，而是挑战你将这一性质与整数 $n$ 的基本二进制表示联系起来。通过这个实践，你将深化对模运算（特别是模 $4$ 算术）的理解，并揭示数字的二进制位与其算术性质之间优雅的内在联系。", "problem": "设 $n$ 是一个任意整数。回忆一下，一个整数 $m$ 的奇偶性由 $m \\pmod 2$ 决定，如果 $m$ 是偶数，则其值为 $0$，如果 $m$ 是奇数，则其值为 $1$。考虑整数 $\\frac{n(n-1)}{2}$，这个表达式是良定义的，因为 $n(n-1)$ 总是能被 $2$ 整除。仅使用关于奇偶性、整除性和整数的二进制（以2为底）表示的基本事实，分析 $n$ 的最低两位二进制数字，以确定 $\\frac{n(n-1)}{2}$ 的奇偶性。\n\n形式上，将 $n$ 的最低两位二进制数字写为 $b_0$ 和 $b_1$，其中 $b_0, b_1 \\in \\{0,1\\}$ 且 $n \\equiv b_0 + 2 b_1 \\pmod{4}$。从奇偶性和同余的基本性质出发，推导一个仅用 $n$ 表示的闭式表达式（不显式包含 $b_0$ 或 $b_1$），当 $\\frac{n(n-1)}{2}$ 为偶数时其值为 $0$，当 $\\frac{n(n-1)}{2}$ 为奇数时其值为 $1$。\n\n请以一个仅使用整数部分（向下取整）函数和标准算术运算的、关于 $n$ 的单一精确解析表达式的形式给出你的最终答案。不要分情况给出分段答案，并且最终表达式中不要使用模运算符号。不需要四舍五入，也不涉及单位。", "solution": "该问题是有效的，因为它是一个初等数论中定义明确的问题，基于已建立的数学原理，没有歧义或矛盾。\n\n令所讨论的整数为 $T(n) = \\frac{n(n-1)}{2}$。我们的任务是找到一个表示 $T(n)$ 奇偶性的表达式，这等价于计算 $T(n) \\pmod{2}$。该表达式必须是一个仅使用向下取整函数和标准算术运算的关于 $n$ 的闭式函数。\n\n一个整数表达式模一个数的行为通常取决于输入整数模另一个数的值。由于表达式涉及除以 $2$，而我们关心的是结果的奇偶性（又一次除以 $2$），因此很自然地要根据 $n$ 模 $4$ 的值来研究 $T(n)$ 的性质。这一点也由使用 $n$ 的最低两位二进制数字的提示所暗示，因为 $n$ 模 $4$ 的值完全由这两位数字确定。一个整数 $n$ 可以写成 $n = 4q + r$ 的形式，其中 $q$ 是一个整数且 $r \\in \\{0, 1, 2, 3\\}$。\n\n我们对余数 $r$ 的四种可能情况分别分析 $T(n)$ 的奇偶性。\n\n情况 1：$n \\equiv 0 \\pmod{4}$。\n设 $n = 4k$，其中 $k$ 为某个整数。\n$$ T(n) = \\frac{(4k)(4k-1)}{2} = 2k(4k-1) $$\n因为 $k$ 和 $4k-1$ 都是整数，所以 $T(n)$ 是 $2$ 的整数倍。因此，$T(n)$ 是偶数。\n$$ T(n) \\equiv 0 \\pmod{2} $$\n\n情况 2：$n \\equiv 1 \\pmod{4}$。\n设 $n = 4k+1$，其中 $k$ 为某个整数。\n$$ T(n) = \\frac{(4k+1)(4k+1-1)}{2} = \\frac{(4k+1)(4k)}{2} = (4k+1)(2k) $$\n同样，$T(n)$ 是 $2$ 的整数倍，所以 $T(n)$ 是偶数。\n$$ T(n) \\equiv 0 \\pmod{2} $$\n\n情况 3：$n \\equiv 2 \\pmod{4}$。\n设 $n = 4k+2$，其中 $k$ 为某个整数。\n$$ T(n) = \\frac{(4k+2)(4k+2-1)}{2} = \\frac{2(2k+1)(4k+1)}{2} = (2k+1)(4k+1) $$\n$2k+1$ 这一项对于任何整数 $k$ 都是奇数。$4k+1$ 这一项也是奇数。两个奇数的乘积总是奇数。因此，$T(n)$ 是奇数。\n$$ T(n) \\equiv 1 \\pmod{2} $$\n\n情况 4：$n \\equiv 3 \\pmod{4}$。\n设 $n = 4k+3$，其中 $k$ 为某个整数。\n$$ T(n) = \\frac{(4k+3)(4k+3-1)}{2} = \\frac{(4k+3)(4k+2)}{2} = \\frac{(4k+3)2(2k+1)}{2} = (4k+3)(2k+1) $$\n对于任何整数 $k$，$4k+3$ 和 $2k+1$ 这两项都是奇数。它们的乘积是奇数。因此，$T(n)$ 是奇数。\n$$ T(n) \\equiv 1 \\pmod{2} $$\n\n总结 $T(n)$ 的奇偶性结果：\n如果 $n \\equiv 0 \\pmod{4}$，则奇偶性为 $0$。\n如果 $n \\equiv 1 \\pmod{4}$，则奇偶性为 $0$。\n如果 $n \\equiv 2 \\pmod{4}$，则奇偶性为 $1$。\n如果 $n \\equiv 3 \\pmod{4}$，则奇偶性为 $1$。\n\n问题指定 $n$ 的最低两位二进制数字是 $b_0$ 和 $b_1$，使得 $n \\equiv b_0 + 2b_1 \\pmod{4}$。\n让我们将我们的案例分析与 $b_1$ 的值进行比较：\n如果 $n \\equiv 0 \\pmod{4}$，则 $b_0=0, b_1=0$。奇偶性为 $0$，等于 $b_1$。\n如果 $n \\equiv 1 \\pmod{4}$，则 $b_0=1, b_1=0$。奇偶性为 $0$，等于 $b_1$。\n如果 $n \\equiv 2 \\pmod{4}$，则 $b_0=0, b_1=1$。奇偶性为 $1$，等于 $b_1$。\n如果 $n \\equiv 3 \\pmod{4}$，则 $b_0=1, b_1=1$。奇偶性为 $1$，等于 $b_1$。\n在所有情况下，$\\frac{n(n-1)}{2}$ 的奇偶性都等于 $b_1$，即 $n$ 的二进制表示中的倒数第二位。\n\n最后一步是找到一个仅使用向下取整函数和算术运算的、关于 $n$ 的 $b_1$ 的闭式表达式。\n设 $n$ 的二进制表示为 $n = \\sum_{i=0}^k c_i 2^i = c_0 + 2c_1 + 4c_2 + \\dots$。这里，$c_0=b_0$ 且 $c_1=b_1$。\n考虑 $n$ 除以 $2$ 的整数除法运算，这等价于一次右移位操作。\n$$ \\left\\lfloor \\frac{n}{2} \\right\\rfloor = \\left\\lfloor \\frac{c_0 + 2c_1 + 4c_2 + \\dots}{2} \\right\\rfloor = \\left\\lfloor \\frac{c_0}{2} + c_1 + 2c_2 + \\dots \\right\\rfloor $$\n由于 $c_0 \\in \\{0, 1\\}$，我们有 $\\lfloor \\frac{c_0}{2} \\rfloor = 0$。\n$$ \\left\\lfloor \\frac{n}{2} \\right\\rfloor = c_1 + 2c_2 + 4c_3 + \\dots $$\n整数 $\\lfloor \\frac{n}{2} \\rfloor$ 的最低有效位是 $c_1$，也就是 $b_1$。\n一个整数 $k$ 的奇偶性由 $k \\pmod{2}$ 给出。一个使用向下取整函数表示 $k \\pmod{2}$ 的表达式是 $k - 2\\lfloor \\frac{k}{2} \\rfloor$。\n我们寻求 $\\lfloor \\frac{n}{2} \\rfloor$ 的奇偶性，因此我们可以令 $k = \\lfloor \\frac{n}{2} \\rfloor$。所求的表达式是：\n$$ \\left\\lfloor \\frac{n}{2} \\right\\rfloor - 2\\left\\lfloor \\frac{\\lfloor \\frac{n}{2} \\rfloor}{2} \\right\\rfloor $$\n我们可以使用恒等式 $\\lfloor \\frac{\\lfloor x \\rfloor}{m} \\rfloor = \\lfloor \\frac{x}{m} \\rfloor$ 来简化嵌套的向下取整函数项，其中 $x$ 为任意实数，$m$ 为整数。具体来说，当 $x=n/2$ 和 $m=2$ 时，我们有：\n$$ \\left\\lfloor \\frac{\\lfloor \\frac{n}{2} \\rfloor}{2} \\right\\rfloor = \\left\\lfloor \\frac{\\frac{n}{2}}{2} \\right\\rfloor = \\left\\lfloor \\frac{n}{4} \\right\\rfloor $$\n将其代回，我们得到 $\\frac{n(n-1)}{2}$ 的奇偶性的最终闭式表达式：\n$$ \\left\\lfloor \\frac{n}{2} \\right\\rfloor - 2\\left\\lfloor \\frac{n}{4} \\right\\rfloor $$\n这个表达式分离出了比特位 $b_1$，我们已经证明它等于给定量的奇偶性。它遵守了问题陈述中指定的所有约束条件。", "answer": "$$ \\boxed{\\left\\lfloor \\frac{n}{2} \\right\\rfloor - 2\\left\\lfloor \\frac{n}{4} \\right\\rfloor} $$", "id": "3087919"}, {"introduction": "在数论的许多问题中，我们需要找到同时满足多个条件的整数。这个练习 [@problem_id:3087914] 将奇偶性作为一个关键约束，并应用中国剩余定理（CRT）来求解一个包含特定奇偶性要求的同余方程组。这个练习的价值不仅在于掌握中国剩余定理的具体操作，更在于让你深入思考不同模条件如何相互作用，以及在什么情况下解是必然存在的。", "problem": "设 $m$ 是一个奇合数，且 $a$ 和 $b$ 为整数。考虑联立同余方程组 $x \\equiv a \\pmod{2}$ 和 $x \\equiv b \\pmod{m}$。仅使用同余、奇偶性的定义以及中国剩余定理 (CRT)，为特定实例 $m=143$，$a=1$，$b=100$ 构建一个显式解，并论证解在模 $2$ 和 $m$ 的最小公倍数意义下的存在性和唯一性。然后，分析此实例中整个解集的奇偶性，并一般性地说明解的奇偶性如何根据 $m$ 是奇数还是偶数而变化，以及需要满足哪些相容性条件。报告最小非负整数解 $x_{0}$ 作为您的最终答案。无需四舍五入。请用整数表示您的答案。", "solution": "我们分步解决这个问题。\n\n**1. 存在性与唯一性论证**\n给定的同余方程组是：\n$$ x \\equiv a \\pmod{2} $$\n$$ x \\equiv b \\pmod{m} $$\n中国剩余定理 (CRT) 指出，如果模数两两互质，则联立同余方程组在模这些模数的乘积意义下存在唯一解。\n在本题中，模数是 $2$ 和 $m$。题目给定 $m$ 是一个奇合数，这意味着 $m$ 不能被 $2$ 整除。因此， $2$ 和 $m$ 的最大公约数是 $\\gcd(2, m) = 1$。\n由于模数是互质的，根据中国剩余定理，该方程组对于任意整数 $a$ 和 $b$ 都存在解，且解在模 $2m$ 意义下是唯一的。\n因为 $\\gcd(2, m) = 1$，所以 $2$ 和 $m$ 的最小公倍数 $\\text{lcm}(2, m) = 2m$。因此，解在模 $\\text{lcm}(2, m)$ 意义下是存在且唯一的。\n\n**2. 求解特定实例**\n对于特定实例 $m=143$, $a=1$, $b=100$，方程组为：\n$$ x \\equiv 1 \\pmod{2} $$\n$$ x \\equiv 100 \\pmod{143} $$\n从第二个同余式出发，我们可以将 $x$ 写为 $x = 143k + 100$，其中 $k$ 是某个整数。\n将这个表达式代入第一个同余式：\n$$ 143k + 100 \\equiv 1 \\pmod{2} $$\n在模 $2$ 意义下，由于 $143$ 是奇数 ($143 \\equiv 1 \\pmod{2}$) 且 $100$ 是偶数 ($100 \\equiv 0 \\pmod{2}$)，该同余式简化为：\n$$ (1)k + 0 \\equiv 1 \\pmod{2} $$\n$$ k \\equiv 1 \\pmod{2} $$\n这意味着 $k$ 必须是一个奇数。我们可以将 $k$ 写为 $k = 2j + 1$，其中 $j$ 是某个整数。\n现在，将这种形式的 $k$ 代回到 $x$ 的表达式中，得到通解：\n$$ x = 143(2j + 1) + 100 = 286j + 143 + 100 = 286j + 243 $$\n因此，解的形式为 $x \\equiv 243 \\pmod{286}$。\n我们需要的最小非负整数解 $x_0$ 就是 $243$。\n\n**3. 解集的奇偶性分析**\n*   **特定实例**：第一个同余式 $x \\equiv 1 \\pmod{2}$ 直接规定了 $x$ 必须是奇数。我们的通解 $x = 286j + 243$ 也证实了这一点：$286j$ 总是偶数，而 $243$ 是奇数，所以它们的和 $x$ 永远是奇数。因此，该解集中的所有解都是奇数。\n\n*   **一般情况**：\n    1.  **当 $m$ 是奇数时**（如本题）：如我们所论证的，$\\gcd(2, m) = 1$。CRT保证对任意 $a, b$ 都存在唯一解。解的奇偶性完全由第一个方程 $x \\equiv a \\pmod{2}$ 决定。如果 $a$ 是偶数，所有解都是偶数；如果 $a$ 是奇数，所有解都是奇数。\n    2.  **当 $m$ 是偶数时**：$\\gcd(2, m) = 2$。此时，CRT不直接适用。方程组有解的充要条件是同余式相容，即 $a \\equiv b \\pmod{\\gcd(2,m)}$，也就是 $a \\equiv b \\pmod{2}$。\n        *   **相容性条件**：$a$ 和 $b$ 必须具有相同的奇偶性。\n        *   如果此条件不满足，方程组无解。\n        *   如果此条件满足，则方程组等价于单个同余式 $x \\equiv b \\pmod{m}$（因为任何满足 $x \\equiv b \\pmod m$ 的解，由于 $m$ 是偶数且 $b$ 与 $a$ 奇偶性相同，自动满足 $x \\equiv a \\pmod 2$）。解的奇偶性与 $a$ 和 $b$ 的奇偶性相同。\n\n根据上述分析，特定实例的最小非负整数解是 $243$。", "answer": "$$\n\\boxed{243}\n$$", "id": "3087914"}, {"introduction": "有时候，仅仅知道一个数是偶数还是奇数是不够的；我们可能需要知道它“有多偶”。这个练习 [@problem_id:3087926] 引入了 $2$-adic valuation（$2$-进赋值）的概念，记作 $v_2(m)$，它计算了一个整数 $m$ 的素因子分解中 $2$ 的幂次。通过将勒让德公式应用于一个大的二项式系数 $\\binom{n}{k}$，你将掌握一个分析阶乘和组合数整除性的强大工具。", "problem": "令 $v_2(m)$ 表示整除整数 $m$ 的 $2$ 的最高次幂的指数，即 $2^{v_2(m)} \\mid m$ 且 $2^{v_2(m)+1} \\nmid m$。考虑二项式系数 $\\binom{n}{k}$，其中 $n$ 和 $k$ 为正整数。利用奇偶性的基本定义和通过阶乘中因子 $2$ 的数量表征 $v_2$ 的方法，计算 $v_2\\left(\\binom{1000}{250}\\right)$ 的精确值。将最终答案表示为单个整数，无需舍入。", "solution": "所述问题具有科学依据，提法明确，客观，并包含足够信息以得到唯一解。这是数论基本原理的直接应用。因此，将提供一个解答。\n\n量 $v_2(m)$ 表示整数 $m$ 素因数分解中 $2$ 的最高次幂的指数。这也称为 $m$ 的 $2$-adic 赋值。我们的任务是计算 $v_2\\left(\\binom{1000}{250}\\right)$。\n\n对于整数 $n$ 和 $k$（其中 $n \\geq k \\geq 0$），二项式系数 $\\binom{n}{k}$ 定义为 $\\frac{n!}{k!(n-k)!}$。\n对于给定的具体情况，我们有 $n=1000$ 和 $k=250$。\n$$ \\binom{1000}{250} = \\frac{1000!}{250!(1000-250)!} = \\frac{1000!}{250! \\cdot 750!} $$\n$p$-adic 赋值函数 $v_p$ 具有性质 $v_p(ab) = v_p(a) + v_p(b)$ 和 $v_p(a/b) = v_p(a) - v_p(b)$。将此应用于二项式系数，我们可以写出：\n$$ v_2\\left(\\binom{1000}{250}\\right) = v_2(1000!) - v_2(250!) - v_2(750!) $$\n这个问题的核心在于计算阶乘的 $2$-adic 赋值，即 $v_2(m!)$。为此，我们使用 Legendre 公式，该公式指出，对于任何素数 $p$ 和正整数 $m$：\n$$ v_p(m!) = \\sum_{i=1}^{\\infty} \\left\\lfloor \\frac{m}{p^i} \\right\\rfloor $$\n该求和是有限的，因为当 $p^i > m$ 时，项 $\\lfloor \\frac{m}{p^i} \\rfloor$ 变为 $0$。对于我们的问题，$p=2$。\n\n首先，我们计算 $v_2(1000!)$：\n\\begin{align*}\nv_2(1000!) &= \\sum_{i=1}^{\\infty} \\left\\lfloor \\frac{1000}{2^i} \\right\\rfloor \\\\\n&= \\left\\lfloor \\frac{1000}{2} \\right\\rfloor + \\left\\lfloor \\frac{1000}{4} \\right\\rfloor + \\left\\lfloor \\frac{1000}{8} \\right\\rfloor + \\left\\lfloor \\frac{1000}{16} \\right\\rfloor + \\left\\lfloor \\frac{1000}{32} \\right\\rfloor + \\left\\lfloor \\frac{1000}{64} \\right\\rfloor + \\left\\lfloor \\frac{1000}{128} \\right\\rfloor + \\left\\lfloor \\frac{1000}{256} \\right\\rfloor + \\left\\lfloor \\frac{1000}{512} \\right\\rfloor + \\left\\lfloor \\frac{1000}{1024} \\right\\rfloor \\\\\n&= 500 + 250 + 125 + 62 + 31 + 15 + 7 + 3 + 1 + 0 \\\\\n&= 994\n\\end{align*}\n\n其次，我们计算 $v_2(250!)$：\n\\begin{align*}\nv_2(250!) &= \\sum_{i=1}^{\\infty} \\left\\lfloor \\frac{250}{2^i} \\right\\rfloor \\\\\n&= \\left\\lfloor \\frac{250}{2} \\right\\rfloor + \\left\\lfloor \\frac{250}{4} \\right\\rfloor + \\left\\lfloor \\frac{250}{8} \\right\\rfloor + \\left\\lfloor \\frac{250}{16} \\right\\rfloor + \\left\\lfloor \\frac{250}{32} \\right\\rfloor + \\left\\lfloor \\frac{250}{64} \\right\\rfloor + \\left\\lfloor \\frac{250}{128} \\right\\rfloor + \\left\\lfloor \\frac{250}{256} \\right\\rfloor \\\\\n&= 125 + 62 + 31 + 15 + 7 + 3 + 1 + 0 \\\\\n&= 244\n\\end{align*}\n\n第三，我们计算 $v_2(750!)$：\n\\begin{align*}\nv_2(750!) &= \\sum_{i=1}^{\\infty} \\left\\lfloor \\frac{750}{2^i} \\right\\rfloor \\\\\n&= \\left\\lfloor \\frac{750}{2} \\right\\rfloor + \\left\\lfloor \\frac{750}{4} \\right\\rfloor + \\left\\lfloor \\frac{750}{8} \\right\\rfloor + \\left\\lfloor \\frac{750}{16} \\right\\rfloor + \\left\\lfloor \\frac{750}{32} \\right\\rfloor + \\left\\lfloor \\frac{750}{64} \\right\\rfloor + \\left\\lfloor \\frac{750}{128} \\right\\rfloor + \\left\\lfloor \\frac{750}{256} \\right\\rfloor + \\left\\lfloor \\frac{750}{512} \\right\\rfloor + \\left\\lfloor \\frac{750}{1024} \\right\\rfloor \\\\\n&= 375 + 187 + 93 + 46 + 23 + 11 + 5 + 2 + 1 + 0 \\\\\n&= 743\n\\end{align*}\n\n最后，我们将这些值代入我们原来关于 $v_2\\left(\\binom{1000}{250}\\right)$ 的表达式中：\n$$ v_2\\left(\\binom{1000}{250}\\right) = v_2(1000!) - v_2(250!) - v_2(750!) $$\n$$ v_2\\left(\\binom{1000}{250}\\right) = 994 - 244 - 743 $$\n$$ v_2\\left(\\binom{1000}{250}\\right) = 994 - (244 + 743) $$\n$$ v_2\\left(\\binom{1000}{250}\\right) = 994 - 987 $$\n$$ v_2\\left(\\binom{1000}{250}\\right) = 7 $$\n因此，整除 $\\binom{1000}{250}$ 的 $2$ 的最高次幂的指数是 $7$。", "answer": "$$\\boxed{7}$$", "id": "3087926"}]}
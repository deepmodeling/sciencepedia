{"hands_on_practices": [{"introduction": "我们知道两个连续函数的和仍然是连续的。但是，两个不连续函数的和会是怎样的呢？这个练习将挑战我们构建一个情景：两个在同一点不连续的函数，其和却是一个在整个实数线上都连续的函数。这个例子生动地说明了不连续点可以通过代数运算被“抵消”掉 [@problem_id:2287795]，从而加深我们对函数代数运算如何影响连续性的理解。", "problem": "考虑定义在所有 $x \\in \\mathbb{R}$ 上的实值函数对 $(f, g)$。如果函数 $F(x)$ 当 $x$ 趋近于点 $c$ 时的极限存在且等于 $F(c)$，则称该函数在点 $c$ 处是连续的。如果一个函数在 $\\mathbb{R}$ 中的每一点都连续，则称其在 $\\mathbb{R}$ 上是连续的。\n\n下列哪对函数 $(f,g)$ 由两个在 $x=0$ 处都不连续、但其和 $h(x) = f(x) + g(x)$ 是在整个实数轴 $\\mathbb{R}$ 上连续的函数所组成？\n\nA. $f(x) = x^2$ 且 $g(x) = \\begin{cases} 1, & \\text{若 } x \\ne 0 \\\\ 0, & \\text{若 } x=0 \\end{cases}$\n\nB. $f(x) = \\begin{cases} 1, & \\text{若 } x \\ge 0 \\\\ -1, & \\text{若 } x < 0 \\end{cases}$ 且 $g(x) = \\begin{cases} 2, & \\text{若 } x \\ge 0 \\\\ -2, & \\text{若 } x < 0 \\end{cases}$\n\nC. $f(x) = \\begin{cases} \\frac{\\sin(x)}{x}, & \\text{若 } x \\ne 0 \\\\ 0, & \\text{若 } x=0 \\end{cases}$ 且 $g(x) = \\begin{cases} -\\frac{\\sin(x)}{x}, & \\text{若 } x \\ne 0 \\\\ 1, & \\text{若 } x=0 \\end{cases}$\n\nD. $f(x) = \\begin{cases} \\frac{1}{x^2}, & \\text{若 } x \\ne 0 \\\\ 1, & \\text{若 } x=0 \\end{cases}$ 且 $g(x) = \\begin{cases} \\cos(x) - \\frac{1}{x^2}, & \\text{若 } x \\ne 0 \\\\ 0, & \\text{若 } x=0 \\end{cases}$", "solution": "我们需要找到一对函数，使得 $f$ 和 $g$ 都在 $x=0$ 处不连续，但它们的和 $h(x)=f(x)+g(x)$ 在 $\\mathbb{R}$ 上连续。对于每个选项，我们检查 $f$ 和 $g$ 在 $x=0$ 处的连续性，然后分析 $h$。\n\n选项 A：$f(x)=x^{2}$ 在每个 $x \\in \\mathbb{R}$ 处都连续，特别是在 $x=0$ 处连续，因为 $\\lim_{x \\to 0} x^{2}=0=f(0)$。函数 $g$ 的定义为当 $x \\ne 0$ 时 $g(x)=1$ 且 $g(0)=0$，所以 $\\lim_{x \\to 0} g(x)=1 \\ne g(0)$；因此 $g$ 在 $x=0$ 处不连续。由于 $f$ 在 0 处连续，该函数对不满足两者均不连续的要求。此外，其和 $h(x)=x^{2}+g(x)$ 满足当 $x \\ne 0$ 时 $h(x)=x^{2}+1$ 且 $h(0)=0$，所以 $\\lim_{x \\to 0} h(x)=1 \\ne h(0)$，使得 $h$ 在 0 处不连续。因此 A 不正确。\n\n选项 B：$f(x)=\\begin{cases}1,& x \\ge 0\\\\ -1,& x<0\\end{cases}$ 在 0 处有一个跳跃间断点，因为 $\\lim_{x \\to 0^{-}} f(x)=-1$ 且 $\\lim_{x \\to 0^{+}} f(x)=1$，所以 $f$ 在 0 处不连续。同样地，$g(x)=\\begin{cases}2,& x \\ge 0\\\\ -2,& x<0\\end{cases}$ 在 0 处不连续。它们的和 $h(x)=f(x)+g(x)$ 当 $x \\ge 0$ 时为 $h(x)=3$，当 $x<0$ 时为 $h(x)=-3$，所以它在 0 处有一个跳跃间断点，因而在 0 处不连续。因此 B 不正确。\n\n选项 C：$f(x)=\\begin{cases}\\frac{\\sin x}{x},& x \\ne 0\\\\ 0,& x=0\\end{cases}$。因为 $\\lim_{x \\to 0} \\frac{\\sin x}{x}=1 \\ne f(0)$，所以 $f$ 在 0 处不连续。对于 $g(x)=\\begin{cases}-\\frac{\\sin x}{x},& x \\ne 0\\\\ 1,& x=0\\end{cases}$，我们有 $\\lim_{x \\to 0} g(x)=-1 \\ne g(0)$，所以 $g$ 在 0 处不连续。它们的和 $h(x)=f(x)+g(x)$ 满足当 $x \\ne 0$ 时 $h(x)=0$ 且 $h(0)=1$，因此 $\\lim_{x \\to 0} h(x)=0 \\ne h(0)$；$h$ 在 0 处不连续。因此 C 不正确。\n\n选项 D：$f(x)=\\begin{cases}\\frac{1}{x^{2}},& x \\ne 0\\\\ 1,& x=0\\end{cases}$ 满足 $\\lim_{x \\to 0} \\frac{1}{x^{2}}=+\\infty$，所以在 0 处没有有限极限，因此 $f$ 在 0 处不连续。对于 $g(x)=\\begin{cases}\\cos x-\\frac{1}{x^{2}},& x \\ne 0\\\\ 0,& x=0\\end{cases}$，我们有 $\\lim_{x \\to 0} \\left(\\cos x-\\frac{1}{x^{2}}\\right)=-\\infty$，所以 $g$ 也在 0 处不连续。现在考虑它们的和 $h(x)=f(x)+g(x)$。对于 $x \\ne 0$，\n$$\nh(x)=\\frac{1}{x^{2}}+\\left(\\cos x-\\frac{1}{x^{2}}\\right)=\\cos x.\n$$\n在 $x=0$ 处，$h(0)=f(0)+g(0)=1+0=1=\\cos 0$。因此对于所有 $x$，$h(x)$ 都与 $\\cos x$ 相等，而 $\\cos x$ 在 $\\mathbb{R}$ 上是连续的。因此 D 满足所有要求。\n\n因此，正确选项是 D。", "answer": "$$\\boxed{D}$$", "id": "2287795"}, {"introduction": "接下来，让我们通过乘法将探索更进一步。这里我们遇到了著名的“狂野”函数——狄利克雷函数（Dirichlet function），它在每一点上都是不连续的。这个练习的挑战在于，我们能否通过将其与一个简单的连续多项式函数相乘来“驯服”它 [@problem_id:2287809]。这个实践揭示了一个深刻的原理：通过在特定点上将函数值强制为零，我们可以选择性地“修复”不连续性。", "problem": "设 $\\mathbb{Q}$ 表示有理数集，$\\mathbb{R}$ 表示所有实数的集合。考虑一个函数 $f: \\mathbb{R} \\to \\mathbb{R}$，其定义如下：\n$$\nf(x) = \\begin{cases} 1 & \\text{若 } x \\in \\mathbb{Q} \\\\ 0 & \\text{若 } x \\notin \\mathbb{Q} \\end{cases}\n$$\n这个函数通常被称为Dirichlet函数。现在，设第二个函数 $g: \\mathbb{R} \\to \\mathbb{R}$ 由乘积 $g(x) = (x^2 - 3x - 4)f(x)$ 定义。\n\n求函数 $g(x)$ 在 $\\mathbb{R}$ 上所有连续点的完整集合。从以下选项中选择正确的一项。\n\nA. 集合 $\\{-1, 4\\}$\nB. 集合 $\\{1, -4\\}$\nC. 所有有理数的集合，$\\mathbb{Q}$\nD. 空集，$\\emptyset$\nE. 所有实数的集合，$\\mathbb{R}$", "solution": "定义 $h(x)=x^{2}-3x-4$。那么 $g(x)=h(x)f(x)$，其中 $f$ 是Dirichlet函数，当 $x\\in\\mathbb{Q}$ 时 $f(x)=1$，当 $x\\notin\\mathbb{Q}$ 时 $f(x)=0$。\n\n固定一个任意的 $x_{0}\\in\\mathbb{R}$。因为多项式函数在 $\\mathbb{R}$ 上是连续的，所以 $h$ 在 $x_{0}$ 处连续，因此\n$$\n\\lim_{x\\to x_{0}}h(x)=h(x_{0}).\n$$\n因为 $\\mathbb{Q}$ 及其补集在 $\\mathbb{R}$ 中都是稠密的，所以存在序列 $\\{r_{n}\\}$ 满足 $r_{n}\\in\\mathbb{Q}$ 且 $r_{n}\\to x_{0}$，以及序列 $\\{s_{n}\\}$ 满足 $s_{n}\\notin\\mathbb{Q}$ 且 $s_{n}\\to x_{0}$。那么\n$$\ng(r_{n})=h(r_{n})f(r_{n})=h(r_{n})\\quad\\text{且}\\quad g(s_{n})=h(s_{n})f(s_{n})=0.\n$$\n取极限并利用 $h$ 的连续性，我们得到\n$$\n\\lim_{n\\to\\infty}g(r_{n})=h(x_{0}),\\qquad \\lim_{n\\to\\infty}g(s_{n})=0.\n$$\n为了使 $\\lim_{x\\to x_{0}}g(x)$ 存在且唯一，这两个子序列极限必须相等，因此必须有\n$$\nh(x_{0})=0.\n$$\n反之，如果 $h(x_{0})=0$，那么根据 $h$ 的连续性，对于任意 $\\varepsilon>0$，存在 $\\delta>0$ 使得当 $|x-x_{0}|<\\delta$ 时，有 $|h(x)-h(x_{0})|=|h(x)|<\\varepsilon$。对于这样的 $x$：\n$$\n|g(x)-0|=|h(x)f(x)|\\leq |h(x)|<\\varepsilon,\n$$\n所以 $g$ 在 $x_{0}$ 处连续，且 $g(x_{0})=h(x_{0})f(x_{0})=0$。因此，$g$ 的连续点恰好是那些满足 $h(x_{0})=0$ 的点 $x_{0}$。\n\n解方程 $h(x)=0$：\n$$\nx^{2}-3x-4=(x-4)(x+1)=0\\quad\\Rightarrow\\quad x\\in\\{-1,4\\}.\n$$\n因此，$g$ 的所有连续点的集合是 $\\{-1,4\\}$，这对应于选项A。", "answer": "$$\\boxed{A}$$", "id": "2287809"}, {"introduction": "函数复合为连续性分析带来了另一层复杂性。如果一个函数 $f$ 是不连续的，那么它的自复合函数 $g(x) = f(f(x))$ 也一定不连续吗？这个思想实验要求我们仔细考虑内层函数的值域与外层函数的不连续点之间的相互作用 [@problem_id:2287816]。通过解决这个精巧的谜题，我们可以巩固对复合函数连续性条件的理解，并体会到分析学中定义的精确性。", "problem": "考虑一个函数 $f: \\mathbb{R} \\to \\mathbb{R}$。我们正在寻找一个满足以下两个特定性质的函数：\n1. 函数 $f$ 在点 $x=1$ 处不连续。\n2. 复合函数 $g(x) = f(f(x))$ 对所有 $x \\in \\mathbb{R}$ 都是连续的。\n\n下列哪个函数同时满足这两个标准？\n\nA. $f(x) = \\begin{cases} 2x+3 & \\text{当 } x \\neq 1 \\\\ 1 & \\text{当 } x = 1 \\end{cases}$\n\nB. $f(x) = \\begin{cases} x^2+1 & \\text{当 } x \\neq 1 \\\\ 2 & \\text{当 } x = 1 \\end{cases}$\n\nC. $f(x) = \\begin{cases} 5 & \\text{当 } x \\neq 1 \\\\ 3 & \\text{当 } x = 1 \\end{cases}$\n\nD. $f(x) = \\begin{cases} 1 & \\text{当 } x \\neq 1 \\\\ 5 & \\text{当 } x = 1 \\end{cases}$\n\nE. $f(x) = \\begin{cases} \\sin(\\frac{\\pi}{2} x) & \\text{当 } x \\neq 1 \\\\ 0 & \\text{当 } x = 1 \\end{cases}$", "solution": "我们需要找到一个在 $x=1$ 处不连续，但其复合函数 $g(x)=f(f(x))$ 在 $\\mathbb{R}$ 上连续的函数 $f(x)$。我们将根据这两个条件分析每个选项。\n\n**选项A的分析：**\n函数为 $f(x) = \\begin{cases} 2x+3 & \\text{当 } x \\neq 1 \\\\ 1 & \\text{当 } x = 1 \\end{cases}$。\n\n1.  **$f$ 在 $x=1$ 处的连续性**：\n    我们计算 $f(x)$ 当 $x$ 趋近于 1 时的极限：\n    $\\lim_{x \\to 1} f(x) = \\lim_{x \\to 1} (2x+3) = 2(1)+3 = 5$。\n    函数在 $x=1$ 处的值是 $f(1)=1$。\n    由于 $\\lim_{x \\to 1} f(x) \\neq f(1)$，函数 $f$ 在 $x=1$ 处不连续。此条件满足。\n\n2.  **$g(x) = f(f(x))$ 的连续性**：\n    复合函数 $g(x)$ 可能在内层函数 $f(x)$ 不连续的地方（即 $x=1$）不连续，或者在使得内层函数的值 $f(a)$ 等于外层函数不连续点的那些点 $a$ 处不连续（即 $f(a)=1$）。\n    对于 $x \\neq 1$，我们通过求解 $2a+3=1$ 来找到使得 $f(a)=1$ 的 $a$，得到 $a=-1$。因此，我们必须研究 $g(x)$ 在 $x=1$ 和 $x=-1$ 处的连续性。\n    我们来求 $g(x)$ 的表达式。\n    -   如果 $x=1$，$g(1) = f(f(1)) = f(1) = 1$。\n    -   如果 $x \\neq 1$，$g(x) = f(f(x)) = f(2x+3)$。\n        -   如果参数 $2x+3=1$（即 $x=-1$），那么 $g(-1) = f(1)=1$。\n        -   如果参数 $2x+3 \\neq 1$（即 $x \\neq -1$），那么 $g(x) = 2(2x+3)+3 = 4x+9$。\n    因此，复合函数为 $g(x) = \\begin{cases} 4x+9 & \\text{当 } x \\notin \\{1, -1\\} \\\\ 1 & \\text{当 } x \\in \\{1, -1\\} \\end{cases}$。\n    我们来检查 $g(x)$ 在 $x=1$ 处的连续性：\n    $\\lim_{x \\to 1} g(x) = \\lim_{x \\to 1} (4x+9) = 4(1)+9=13$。\n    然而，$g(1)=1$。由于 $\\lim_{x \\to 1} g(x) \\neq g(1)$，$g(x)$ 在 $x=1$ 处不连续。\n    因此，选项A不满足第二个条件。\n\n**选项B的分析：**\n函数为 $f(x) = \\begin{cases} x^2+1 & \\text{当 } x \\neq 1 \\\\ 2 & \\text{当 } x = 1 \\end{cases}$。\n\n1.  **$f$ 在 $x=1$ 处的连续性**：\n    $\\lim_{x \\to 1} f(x) = \\lim_{x \\to 1} (x^2+1) = 1^2+1=2$。\n    函数的值为 $f(1)=2$。\n    由于 $\\lim_{x \\to 1} f(x) = f(1)$，函数 $f$ 在 $x=1$ 处是连续的。\n    这不满足第一个条件。因此，选项B是错误的。\n\n**选项C的分析：**\n函数为 $f(x) = \\begin{cases} 5 & \\text{当 } x \\neq 1 \\\\ 3 & \\text{当 } x = 1 \\end{cases}$。\n\n1.  **$f$ 在 $x=1$ 处的连续性**：\n    $\\lim_{x \\to 1} f(x) = \\lim_{x \\to 1} 5 = 5$。\n    函数的值为 $f(1) = 3$。\n    由于 $\\lim_{x \\to 1} f(x) \\neq f(1)$，$f$ 在 $x=1$ 处不连续。此条件满足。\n\n2.  **$g(x) = f(f(x))$ 的连续性**：\n    $f$ 的不连续点是 $x=1$。为了使 $g(x)=f(f(x))$ 连续，我们希望内层函数 $f(x)$ 的值域不包含值 1。$f(x)$ 的值域是它可以取的值的集合，即 $\\{3, 5\\}$。由于 1 不在 $f(x)$ 的值域中，外层函数 $f$ 永远不会在其不连续点处被求值。\n    我们来显式计算 $g(x)$。\n    -   如果 $x=1$，那么 $f(1)=3$。所以，$g(1) = f(f(1)) = f(3)$。因为 $3 \\neq 1$，所以 $f(3)=5$。\n    -   如果 $x \\neq 1$，那么 $f(x)=5$。所以，$g(x) = f(f(x)) = f(5)$。因为 $5 \\neq 1$，所以 $f(5)=5$。\n    这表明对于所有 $x \\in \\mathbb{R}$，$g(x)=5$。常数函数处处连续。\n    两个条件都满足。因此，选项C是正确的。\n\n**选项D的分析：**\n函数为 $f(x) = \\begin{cases} 1 & \\text{当 } x \\neq 1 \\\\ 5 & \\text{当 } x = 1 \\end{cases}$。\n\n1.  **$f$ 在 $x=1$ 处的连续性**：\n    $\\lim_{x \\to 1} f(x) = \\lim_{x \\to 1} 1 = 1$。\n    函数的值为 $f(1)=5$。\n    由于 $\\lim_{x \\to 1} f(x) \\neq f(1)$，$f$ 在 $x=1$ 处不连续。此条件满足。\n\n2.  **$g(x) = f(f(x))$ 的连续性**：\n    内层函数 $f(x)$ 的值域是 $\\{1, 5\\}$。对于任何 $x \\neq 1$，$f(x)=1$。这意味着外层函数将在其不连续点处被求值。\n    我们来计算 $g(x)$。\n    -   如果 $x=1$，那么 $f(1)=5$。所以，$g(1) = f(f(1)) = f(5)$。因为 $5 \\neq 1$，所以 $f(5)=1$。\n    -   如果 $x \\neq 1$，那么 $f(x)=1$。所以，$g(x) = f(f(x)) = f(1) = 5$。\n    复合函数为 $g(x) = \\begin{cases} 5 & \\text{当 } x \\neq 1 \\\\ 1 & \\text{当 } x = 1 \\end{cases}$。\n    我们来检查 $g(x)$ 在 $x=1$ 处的连续性：\n    $\\lim_{x \\to 1} g(x) = \\lim_{x \\to 1} 5 = 5$。\n    然而，$g(1)=1$。由于 $\\lim_{x \\to 1} g(x) \\neq g(1)$，$g(x)$ 在 $x=1$ 处不连续。\n    因此，选项D不满足第二个条件。\n\n**选项E的分析：**\n函数为 $f(x) = \\begin{cases} \\sin(\\frac{\\pi}{2} x) & \\text{当 } x \\neq 1 \\\\ 0 & \\text{当 } x = 1 \\end{cases}$。\n\n1.  **$f$ 在 $x=1$ 处的连续性**：\n    $\\lim_{x \\to 1} f(x) = \\lim_{x \\to 1} \\sin(\\frac{\\pi}{2} x) = \\sin(\\frac{\\pi}{2}) = 1$。\n    函数的值为 $f(1)=0$。\n    由于 $\\lim_{x \\to 1} f(x) \\neq f(1)$，$f$ 在 $x=1$ 处不连续。此条件满足。\n\n2.  **$g(x) = f(f(x))$ 的连续性**：\n    函数 $f$ 在 $x=1$ 处不连续。复合函数 $g(x)$ 可能会在 $f(a)=1$ 的点 $a$ 处不连续。我们来找一下当 $a \\neq 1$ 时的这些点。\n    我们求解 $\\sin(\\frac{\\pi}{2} a) = 1$。这种情况发生在 $\\frac{\\pi}{2} a = \\frac{\\pi}{2} + 2k\\pi$（其中 $k$ 为整数）时。所以，$a = 1 + 4k$。因为我们需要 $a \\neq 1$，我们可以选择 $k=1$，得到 $a=5$。我们来检验在 $a=5$ 处的连续性。\n    $g(5)$ 的值：$g(5) = f(f(5))$。首先，$f(5) = \\sin(\\frac{5\\pi}{2}) = 1$。然后，$g(5) = f(1)=0$。\n    $g(x)$ 在 $x=5$ 处的极限：$\\lim_{x \\to 5} g(x) = \\lim_{x \\to 5} f(f(x))$。\n    令 $y(x) = f(x)$。当 $x \\to 5$ 时，$y(x) = \\sin(\\frac{\\pi}{2} x) \\to \\sin(\\frac{5\\pi}{2}) = 1$。\n    由于外层函数 $f$ 在 $y=1$ 处不连续，我们需要小心处理。当 $x$ 趋近于 5 时，$y(x) = \\sin(\\frac{\\pi}{2} x)$ 趋近于其最大值 1。对于 5 的一个小邻域内的任何 $x$（但 $x \\neq 5$），我们有 $y(x) < 1$。所以我们关心的是当 $y \\to 1^{-}$ 时 $f(y)$ 的极限。\n    $\\lim_{y \\to 1^{-}} f(y) = \\lim_{y \\to 1^{-}} \\sin(\\frac{\\pi}{2} y) = \\sin(\\frac{\\pi}{2}) = 1$。\n    所以，$\\lim_{x \\to 5} g(x) = 1$。\n    由于 $\\lim_{x \\to 5} g(x) = 1$ 但 $g(5)=0$，函数 $g(x)$ 在 $x=5$ 处不连续。\n    因此，选项E不满足第二个条件。\n\n根据对所有选项的分析，只有函数C满足所有给定条件。", "answer": "$$\\boxed{C}$$", "id": "2287816"}]}
{"hands_on_practices": [{"introduction": "在理论学习之后，首要的实践步骤是学会精确地识别证明中的冗余。本练习旨在磨练您在自然演绎证明中定位“极大公式” (maximal formula) 的能力，这正是逻辑“弯路” (detour) 的核心。掌握这种模式识别是进行证明正规化的基本功 [@problem_id:3047898]。", "problem": "在标准的命题逻辑自然演绎中，如果一个公式的出现既是其主连接词的引入规则的结论，又是同一连接词的消去规则的大前提，那么在 Dag Prawitz 的意义上，它被称为一个极大公式。消去规则的大前提是其主连接词与所应用的规则相匹配的公式。当对同一个公式出现这样的引入紧接着消去时，就存在一个迂回，而范式化会消除这种迂回。\n\n考虑以下推导，其中所有步骤都在自然演绎系统内，使用了规则 $\\land I$、$\\land E_{1}$、$\\land E_{2}$、$\\lor I_{1}$、$\\lor I_{2}$、$\\to I$ 和 $\\to E$。命题字母为 $P$、$Q$ 和 $R$。\n- 第1行：$P$ (假设)\n- 第2行：$R$ (假设)\n- 第3行：$P \\land R$ (由第1、2行通过 $\\land I$ 得出)\n- 第4行：$P \\land R$ (假设，标记为 $\\alpha$)\n- 第5行：$R$ (由第4行通过 $\\land E_{2}$ 得出)\n- 第6行：$Q \\lor R$ (由第5行通过 $\\lor I_{2}$ 得出)\n- 第7行：$(P \\land R) \\to (Q \\lor R)$ (由第4-6行的子推导通过 $\\to I$ 得出，撤销假设 $\\alpha$)\n- 第8行：$P \\land R$ (由第1、2行通过 $\\land I$ 得出)\n- 第9行：$Q \\lor R$ (由第7、8行通过 $\\to E$ 得出)\n\n仅使用自然演绎中引入和消去规则的核心定义以及上述极大公式的概念，请找出共同在形如 $A \\to B$ 的显式极大公式上实现迂回的那个确切的引入步骤和消去步骤，其中 $A$ 是 $P \\land R$，$B$ 是 $Q \\lor R$。\n\n将你的识别结果编码为一个单一数字，方法是：令 $i$ 为引入步骤的行号，$j$ 为消去步骤的行号，然后计算康托尔配对函数\n$$\\pi(i,j) \\;=\\; \\frac{1}{2}\\big((i+j)(i+j+1)\\big) + j.$$\n请提供 $\\pi(i,j)$ 的确切整数值作为你的最终答案。", "solution": "问题要求在一个给定的自然演绎推导中识别一个特定的逻辑“迂回”。在 Dag Prawitz 的范式化理论中，迂回发生在极大公式上。一个公式的出现是极大的，如果它既是其主连接词的引入规则的结论，同时又是同一连接词的消去规则的大前提。任务是找到为特定公式 $(P \\land R) \\to (Q \\lor R)$ 形成这种迂回的引入规则（$i$）和消去规则（$j$）的行号。\n\n公式 $(P \\land R) \\to (Q \\lor R)$ 的主连接词是蕴含 $\\to$。因此，我们正在寻找一对步骤，其中该公式首先使用蕴含引入规则（$\\to I$）被引入，然后在其后被用作蕴含消去规则（$\\to E$）应用中的大前提。\n\n首先，我们寻找公式 $(P \\land R) \\to (Q \\lor R)$ 的引入。蕴含引入规则 $\\to I$ 允许从一个以假设 $A$ 开始并以推导出 $B$ 结束的子推导中得出结论 $A \\to B$。检查给定的推导：\n- 第4行：$P \\land R$ (假设，标记为 $\\alpha$)\n- 第5行：$R$ (由第4行通过 $\\land E_{2}$ 得出)\n- 第6行：$Q \\lor R$ (由第5行通过 $\\lor I_{2}$ 得出)\n- 第7行：$(P \\land R) \\to (Q \\lor R)$ (由第4-6行的子推导通过 $\\to I$ 得出，撤销假设 $\\alpha$)\n\n在第7行，公式 $(P \\land R) \\to (Q \\lor R)$ 是通过 $\\to I$ 规则推导出来的。这一步结束了一个假设 $P \\land R$ 并推导出 $Q \\lor R$ 的子推导。因此，第7行是我们目标公式的引入步骤。我们确定 $i=7$。\n\n接下来，我们寻找该公式的消去。蕴含消去规则 $\\to E$（也称为肯定前件式）需要两个前提：一个形如 $A \\to B$ 的大前提和一个形如 $A$ 的小前提。它得出结论 $B$。我们需要找到一个 $\\to E$ 的应用，其中来自第7行的公式 $(P \\land R) \\to (Q \\lor R)$ 作为大前提。进一步检查推导：\n- 第8行：$P \\land R$ (由第1、2行通过 $\\land I$ 得出)\n- 第9行：$Q \\lor R$ (由第7、8行通过 $\\to E$ 得出)\n\n在第9行，公式 $Q \\lor R$ 是通过 $\\to E$ 规则推导出来的，引用第7行和第8行作为前提。\n- 第7行的前提是 $(P \\land R) \\to (Q \\lor R)$，其形式为 $A \\to B$。这是大前提。\n- 第8行的前提是 $P \\land R$，其形式为 $A$。这是小前提。\n该规则正确地得出了结论 $Q \\lor R$，其形式为 $B$。\n第7行的公式确实是应用于第9行的消去规则的大前提。因此，第9行是该迂回中的消去步骤。我们确定 $j=9$。\n\n在第7行出现的公式 $(P \\land R) \\to (Q \\lor R)$ 是极大的。它是在第7行引入规则 $\\to I$ 的结论，也是在第9行消去规则 $\\to E$ 的大前提。步骤对 $(i, j) = (7, 9)$ 构成了这个迂回。\n\n最后一步是为 $i=7$ 和 $j=9$ 计算康托尔配对函数 $\\pi(i,j)$。康托尔配对函数的公式是：\n$$ \\pi(i,j) = \\frac{1}{2}\\big((i+j)(i+j+1)\\big) + j $$\n代入值 $i=7$ 和 $j=9$：\n$$ \\pi(7,9) = \\frac{1}{2}\\big((7+9)(7+9+1)\\big) + 9 $$\n$$ \\pi(7,9) = \\frac{1}{2}\\big((16)(16+1)\\big) + 9 $$\n$$ \\pi(7,9) = \\frac{1}{2}\\big(16 \\times 17\\big) + 9 $$\n$$ \\pi(7,9) = \\frac{1}{2}(272) + 9 $$\n$$ \\pi(7,9) = 136 + 9 $$\n$$ \\pi(7,9) = 145 $$\n得到的整数值为 $145$。", "answer": "$$\\boxed{145}$$", "id": "3047898"}, {"introduction": "真实的逻辑证明常常包含多个，甚至相互嵌套的冗余结构。本练习将带您从简单的识别，走向实际的消除过程。您将分析一个包含嵌套弯路的证明，并观察消除外层冗余如何使内层冗余暴露出来，这清晰地揭示了正规化过程的动态性和步骤性 [@problem_id:3047858]。", "problem": "在最小蕴含合取逻辑的自然演绎中，蕴含 $\\rightarrow$ 的原始规则是引入规则（$\\rightarrow I$）和消去规则（$\\rightarrow E$），合取 $\\wedge$ 的原始规则是引入规则（$\\wedge I$）和消去规则（$\\wedge E$）。推导中的一个公式 $F$ 被称为极大公式，如果 $F$ 是由一个引入规则得到的结论，并立即被用作一个消去规则的大前提，从而形成一个弯路。正规化通过转换来消除极大公式，从而去除弯路。这些转换将一个引入规则后紧跟一个消去规则的结构替换为其子推导的组合，而无需中间公式 $F$。这个过程严格降低了推导的复杂性，同时保持最终矢列不变。\n\n当一个弯路在语法上位于另一个弯路的引入子推导内部时，极大公式可以嵌套出现；移除外部的极大公式可以使内部的公式暴露出来，以便立即移除。考虑下面这个由公式 $A$、$B$ 和 $C$ 构建的具体但不常见的例子，它包含以下几个部分：\n- $A$ 的一个封闭的正规推导 $\\pi_{A}$。\n- 在一个未释放的假设 $x:A$ 下，$B$ 的正规子推导 $u(x)$ 和 $C$ 的正规子推导 $v(x)$。\n\n按如下步骤构建 $B$ 的推导 $\\Pi$：\n1. 假设 $x:A$。\n2. 从假设 $x:A$ 推导出 $u(x):B$ 和 $v(x):C$。\n3. 应用 $\\wedge I$ 得到 $u(x)\\wedge v(x):B\\wedge C$。\n4. 应用 $\\wedge E_{1}$ 从 $B\\wedge C$ 得到 $B$。\n5. 释放 $x:A$ 并使用 $\\rightarrow I$ 推断出 $A\\rightarrow B$。\n6. 应用 $\\rightarrow E$，以第5步得到的 $A\\rightarrow B$ 为大前提，以 $\\pi_{A}:A$ 为小前提，推断出 $B$。\n\n在 $\\Pi$ 内部，公式 $A\\rightarrow B$ 是极大的（它被引入后立即被消去），而公式 $B\\wedge C$ 嵌套在引入子推导内部，并被用作 $\\wedge E_{1}$ 的大前提，因此一旦外部的弯路被移除且子推导被组合后，它就会成为一个极大公式。\n\n假设 $u(x)$、$v(x)$ 和 $\\pi_{A}$ 都是正规的（不含极大公式），确定将 $\\Pi$ 转换为正规推导所需的最少弯路消除步骤数（每一步通过一次转换移除一个极大公式）。请以整数形式给出答案。", "solution": "问题要求将给定推导 $\\Pi$ 转换为其正规形式所需的最少弯路消除步骤数。一个弯路消除步骤对应于应用一条移除一个极大公式的转换规则。\n\n首先，我们根据所提供的构建步骤来形式化推导 $\\Pi$ 的结构。一个推导可以表示为一棵树。其组成部分是 $A$ 的一个正规封闭推导 $\\pi_A$，以及从假设 $x:A$ 出发的 $B$ 和 $C$ 的正规开放推导 $u(x)$ 和 $v(x)$。\n\n$\\Pi$ 的构建过程如下：\n1. 作出假设 $x:A$。在树表示中，这是一个标记为 $[x:A]$ 的叶节点。\n2. 从这个假设构建推导 $u(x)$ 和 $v(x)$。\n3. 对 $u(x)$ 和 $v(x)$ 的结论应用合取引入规则 $\\wedge I$。这部分推导树如下所示：\n$$\n\\frac{\n  \\substack{ [x:A] \\\\ \\vdots \\\\ u(x):B }\n  \\quad\n  \\substack{ [x:A] \\\\ \\vdots \\\\ v(x):C }\n}{B \\wedge C} (\\wedge I)\n$$\n4. 对公式 $B \\wedge C$ 应用合取消去规则（左），$\\wedge E_1$，来推导 $B$。到目前为止，从假设 $x:A$ 到结论 $B$ 的子推导是：\n$$\n\\mathcal{D}_1 = \\frac{\n  \\frac{\n    \\substack{ [x:A] \\\\ \\vdots \\\\ u(x):B }\n    \\quad\n    \\substack{ [x:A] \\\\ \\vdots \\\\ v(x):C }\n  }{B \\wedge C} (\\wedge I)\n}{B} (\\wedge E_1)\n$$\n5. 对该子推导 $\\mathcal{D}_1$ 应用蕴含引入规则 $\\rightarrow I$，从而释放假设 $[x:A]$。我们用数字 $1$ 标记被释放的假设。\n$$\n\\frac{\n  \\frac{\n    \\frac{\n      \\substack{ [x:A]^1 \\\\ \\vdots \\\\ u(x):B }\n      \\quad\n      \\substack{ [x:A]^1 \\\\ \\vdots \\\\ v(x):C }\n    }{B \\wedge C} (\\wedge I)\n  }{B} (\\wedge E_1)\n}{A \\rightarrow B} (\\rightarrow I)^1\n$$\n6. 最后，应用蕴含消去规则 $\\rightarrow E$。大前提是上一步推导出的公式 $A \\rightarrow B$，小前提是给定的 $A$ 的封闭正规推导 $\\pi_A$。\n\n因此，完整的推导 $\\Pi$ 是：\n$$\n\\Pi = \\frac{\n  \\frac{\n    \\frac{\n      \\frac{        \\substack{ [x:A]^1 \\\\ \\vdots \\\\ u(x):B }\n        \\quad\n        \\substack{ [x:A]^1 \\\\ \\vdots \\\\ v(x):C }\n      }{B \\wedge C} (\\wedge I)\n    }{B} (\\wedge E_1)\n  }{A \\rightarrow B} (\\rightarrow I)^1\n  \\quad\n  \\substack{ \\pi_A \\\\ \\vdots \\\\ A }\n}{B} (\\rightarrow E)\n$$\n极大公式是指一个作为引入规则的结论，并立即成为一个消去规则的大前提的公式。在 $\\Pi$ 中，我们可以识别出两个这样的公式：\n1. 公式 $A \\rightarrow B$ 是 $(\\rightarrow I)^1$ 的结论，也是 $\\rightarrow E$ 的大前提。这是一个最外层的极大公式。\n2. 公式 $B \\wedge C$ 是 $\\wedge I$ 的结论，也是 $\\wedge E_1$ 的大前提。这个极大公式嵌套在 $\\rightarrow I$ 规则的子推导中。\n\n正规化过程通过消除所有极大公式将推导归约为其正规形式。保证终止的标准策略是首先消除最外层的极大公式。每次消除算作一个步骤。\n\n**步骤 1：消除极大公式 $A \\rightarrow B$。**\n这需要应用 $\\rightarrow$-转换规则。形如“$\\rightarrow I$ 后跟 $\\rightarrow E$”的推导将被一个新的推导所取代，其中 $\\rightarrow E$ 的小前提的推导被代入到所有被 $\\rightarrow I$ 释放的假设出现的地方。\n\n在我们的例子中，导向 $\\rightarrow I$ 规则的前提 $B$ 的子推导是 $\\mathcal{D}_1$，它依赖于假设 $[x:A]$。$\\rightarrow E$ 规则的小前提的推导是 $\\pi_A$。转换规则规定，我们将推导 $\\pi_A$ 代入 $\\mathcal{D}_1$ 中假设 $[x:A]$ 的每一个实例。\n\n将此转换应用于 $\\Pi$，我们得到一个新的推导 $\\Pi'$：\n$$\n\\Pi' = \\frac{\n  \\frac{\n    \\substack{ \\pi_A \\\\ \\vdots \\\\ u(\\pi_A):B }\n    \\quad\n    \\substack{ \\pi_A \\\\ \\vdots \\\\ v(\\pi_A):C }\n  }{B \\wedge C} (\\wedge I)\n}{B} (\\wedge E_1)\n$$\n这里，$u(\\pi_A)$ 表示将 $u(x)$ 中的假设 $x:A$ 替换为推导 $\\pi_A$ 后得到的推导。$v(\\pi_A)$ 同理。这构成了一个弯路消除步骤。\n\n**步骤 2：消除极大公式 $B \\wedge C$。**\n得到的推导 $\\Pi'$ 还不是正规的。正如问题描述所预料的，移除外部弯路暴露了内部的弯路。$\\Pi'$ 中的公式 $B \\wedge C$ 是 $\\wedge I$ 的结论，也是 $\\wedge E_1$ 的大前提。它是一个极大公式。\n\n这需要应用 $\\wedge$-转换规则。对于 $\\wedge E_1$，一个形如“$\\wedge I$ 后跟 $\\wedge E_1$”的推导将被产生左合取项的子推导所取代。\n\n在我们的例子中，左合取项（$B$）的推导是 $u(\\pi_A)$，右合取项（$C$）的推导是 $v(\\pi_A)$。将 $\\wedge$-转换应用于 $\\Pi'$，会将其转换为一个新的推导 $\\Pi''$，它只包含左合取项的推导：\n$$\n\\Pi'' = \\substack{ \\pi_A \\\\ \\vdots \\\\ u(\\pi_A):B }\n$$\n这构成了第二个弯路消除步骤。\n\n最终的推导 $\\Pi''$ 是 $u(\\pi_A)$。问题陈述说明 $u(x)$ 和 $\\pi_A$ 是正规推导。将一个正规推导代入另一个推导以替换被释放的假设，这个操作会保持正规性。因此，$u(\\pi_A)$ 不含极大公式，是一个正规推导。\n\n将 $\\Pi$ 转换为其正规形式 $\\Pi''$ 的过程需要恰好两个弯路消除步骤（转换）。这个步骤数是最小的，因为有两个不同的极大公式必须被消除，而每一步恰好消除一个。\n\n因此，所需的最少弯路消除步骤数为 $2$。", "answer": "$$\\boxed{2}$$", "id": "3047858"}, {"introduction": "如果我们能以不同顺序消除证明中的弯路，最终会得到相同的简化结果吗？这个关键问题关乎正规化过程的可靠性。本练习运用 Curry-Howard 同构，通过探索同一证明的不同正规化序列，来直观地展示保证唯一最终范式的“菱形性质” (diamond property)，即合流性 [@problem_id:3047844]。", "problem": "考虑用于直觉主义命题逻辑的自然演绎 (ND)，其包含蕴含 $\\,\\to\\,$ 和合取 $\\,\\wedge\\,$，以及它通过 Curry-Howard 同构 (CHI) 与类型 $\\lambda$-演算的对应关系。使用以下基本基础：$\\,\\to\\,$ 和 $\\,\\wedge\\,$ 的 ND 引入和消除规则，以及用于编码 detour 消除（引入紧随消除）的类型 $\\lambda$-演算项的标准 $\\beta$-归约。在证明项语言中，使用变量、抽象 $\\lambda x{:}\\tau.\\,M$、应用 $M\\,N$、配对 $\\langle M,N\\rangle$ 和投影 $\\pi_{1}(M)$ 和 $\\pi_{2}(M)$，其类型由 $\\wedge$-引入和 $\\wedge$-消除规则指定。归约规则如下：\n- $\\beta_{\\to}$: $(\\lambda u{:}\\sigma.\\,M)\\,N \\;\\to\\; M[u := N]$,\n- $\\beta_{\\wedge}$: $\\pi_{1}\\langle M,N\\rangle \\;\\to\\; M$ and $\\pi_{2}\\langle M,N\\rangle \\;\\to\\; N$.\n\n令 $A$、$B$ 和 $D$ 为固定的命题（类型）。假设有常量 $s{:}A$、$w{:}B$ 和 $r{:}D$。考虑由证明项编码的 ND 推导\n$$\nT \\;=\\; \\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\; r.\n$$\n该项包含不同联结词的多个 detour（redexes），使其适合用于说明正规化的菱形性质。\n\n任务：\n1. 仅使用所述的基本规则，解释 $T$ 是如何从一个对 $\\,\\to\\,$ 和 $\\,\\wedge\\,$ 都进行了引入后紧跟消除的 ND 推导中产生的。\n2. 通过选择不同的 redex 收缩顺序，为 $T$ 构建两个不同的正规化序列。在每个序列的每一步中，指明所用的 redex 和应用的归约规则。\n3. 解释这两个序列如何通过 CHI 说明 ND 正规化中的菱形性质（局部汇合性）。\n4. 计算 $T$ 的范式，并将其表示为单个封闭形式的解析表达式。\n\n您的最终答案必须是范式证明项（一个单一的符号表达式）。不需要四舍五入，也不涉及物理单位。请精确表达您的最终结果。", "solution": "所给的问题陈述是证明论和类型 $\\lambda$-演算中的一个有效练习。它自成体系，科学上基于数理逻辑的原理，并且是适定的，通过应用指定的规则可以得到唯一的解。我们将系统地解决这四个任务。\n\n设给定项为 $T = \\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\; r$。\n\n**1. 证明项 $T$ 中的自然演绎 Detour**\n\n自然演绎 (ND) 证明中的 detour 是指一个逻辑联结词的引入规则紧随其消除规则的序列。这种证明结构是冗余的，可以通过一个称为正规化的过程来简化。Curry-Howard 同构在这些证明论上的 detour 与类型 $\\lambda$-演算项中的可归约表达式 (redexes) 之间建立了直接的对应关系。项 $T$ 就是由多个这样的 detour 构建的。\n\n- **合取 ($\\wedge$) 的 Detour**：项 $\\big\\langle M, N \\big\\rangle$ 对应于 $\\wedge$-引入规则，而投影 $\\pi_1(P)$ 和 $\\pi_2(P)$ 对应于 $\\wedge$-消除规则。在 $T$ 中，函数 $\\lambda x{:}A\\wedge B.\\, \\dots$ 接受一个类型为 $A\\wedge B$ 的参数，并对其应用 $\\pi_1$。提供的参数是 $\\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle$，这是通过 $\\wedge$-引入构造的。当函数被应用时，$\\pi_1$ 作用于由 $\\langle \\dots \\rangle$ 形成的项，从而产生一个形如 $\\pi_1 \\langle M, N \\rangle$ 的 $\\beta_{\\wedge}$-redex。这代表了合取的 detour。\n\n- **蕴含 ($\\to$) 的 Detour**：$\\lambda$-抽象 $\\lambda u{:}\\sigma.\\,M$ 对应于 $\\to$-引入规则，而应用 $M\\,N$ 对应于 $\\to$-消除规则（分离规则）。形如 $(\\lambda u{:}\\sigma.\\,M)N$ 的 redex 是蕴含 detour 的句法表示。项 $T$ 包含两个这样的 detour：\n    1. 子项 $\\big(\\lambda z{:}A.\\, z\\big)\\,s$ 是一个 $\\beta_{\\to}$-redex。它对应于证明 $A \\to A$（恒等函数），然后立即将其应用于一个给定的 $A$ 的证明（常量 $s$），以推导出 $A$。这是一个平凡的 detour。\n    2. 更大的子项 $\\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle \\dots \\big\\rangle$ 也是一个 $\\beta_{\\to}$-redex。它对应于构造一个 $(A\\wedge B) \\to (D \\to A)$ 的证明，并立即将其应用于一个 $A\\wedge B$ 的证明，以推导出 $D \\to A$。这在整个证明结构中构成了一个更显著的 detour。\n\n**2. $T$ 的两个正规化序列**\n\n正规化是通过重复收缩 redex 直到不再有 redex 存在的消除 detour 的过程。初始项 $T$ 包含两个不重叠的 redex，允许采用不同的归约顺序。\n让我们将初始项 $T = \\Big(\\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\underbrace{\\big\\langle \\overbrace{\\big(\\lambda z{:}A.\\, z\\big)\\, s}^{R_{\\text{inner}}},\\; w \\big\\rangle}_{N} \\Big)\\; r$ 中的 redex 表示为：\n- 一个外部 $\\beta_{\\to}$-redex：$R_{\\text{outer}} = \\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; N$\n- 一个内部 $\\beta_{\\to}$-redex：$R_{\\text{inner}} = \\big(\\lambda z{:}A.\\, z\\big)\\, s$\n\n**序列 1：最外层归约优先**\n\n我们首先收缩最外层的 redex，$R_{\\text{outer}}$。\n$$\n\\begin{aligned}\nT = \\Big(\\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\Big)\\; r \\\\\n\\xrightarrow{\\beta_{\\to}} \\Big( \\big(\\lambda y{:}D.\\, \\pi_{1}(x)\\big)\\big[x: = \\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\big] \\Big)\\; r \\\\\n= \\Big( \\lambda y{:}D.\\, \\pi_{1}\\big(\\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\big) \\Big)\\; r\n\\end{aligned}\n$$\n结果项有一个新的最外层 $\\beta_{\\to}$-redex。我们收缩它。\n$$\n\\begin{aligned}\n\\xrightarrow{\\beta_{\\to}} \\Big( \\pi_{1}\\big(\\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\big) \\Big)\\big[y: = r\\big] \\\\\n= \\pi_{1}\\big(\\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\big)\n\\end{aligned}\n$$\n现在我们有一个 $\\beta_{\\wedge}$-redex。\n$$\n\\xrightarrow{\\beta_{\\wedge}} \\big(\\lambda z{:}A.\\, z\\big)\\, s\n$$\n最后，我们收缩最后一个剩余的 $\\beta_{\\to}$-redex。\n$$\n\\xrightarrow{\\beta_{\\to}} z[z := s] = s\n$$\n该序列终止于范式 $s$。\n\n**序列 2：最内层归约优先**\n\n我们首先收缩最内层的 redex，$R_{\\text{inner}}$。\n$$\n\\begin{aligned}\nT = \\Big(\\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\Big)\\; r \\\\\n\\xrightarrow{\\beta_{\\to}} \\Big(\\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle s,\\; w \\big\\rangle\\Big)\\; r\n\\end{aligned}\n$$\n结果项现在只有一个 redex，即原始的 $R_{\\text{outer}}$，但其参数已被简化。我们收缩它。\n$$\n\\begin{aligned}\n\\xrightarrow{\\beta_{\\to}} \\Big( \\big(\\lambda y{:}D.\\, \\pi_{1}(x)\\big)\\big[x: = \\big\\langle s,\\; w \\big\\rangle\\big] \\Big)\\; r \\\\\n= \\big( \\lambda y{:}D.\\, \\pi_{1}(\\langle s, w \\rangle) \\big)\\; r\n\\end{aligned}\n$$\n这个项有两个 redex：一个外部 $\\beta_{\\to}$-redex 和一个内部 $\\beta_{\\wedge}$-redex。从这一点开始，遵循最外层策略：\n$$\n\\begin{aligned}\n\\xrightarrow{\\beta_{\\to}} \\Big( \\pi_{1}(\\langle s, w \\rangle) \\Big) [y:=r] \\\\\n= \\pi_{1}(\\langle s, w \\rangle)\n\\end{aligned}\n$$\n最后，我们收缩 $\\beta_{\\wedge}$-redex。\n$$\n\\xrightarrow{\\beta_{\\wedge}} s\n$$\n该序列也终止于范式 $s$。\n\n**3. 菱形性质的说明**\n\n菱形性质，或称局部汇合性，指出如果一个项 $M$ 可以在一步内归约为两个不同的项 $M_1$ 和 $M_2$，那么必定存在一个项 $N$，使得 $M_1$ 和 $M_2$ 都可以归约到 $N$（在零步或多步内）。这个性质对于证明最终范式无论归约路径如何都是唯一的是至关重要的。\n\n我们的初始项 $T$ 有两个不同的 redex，$R_{\\text{outer}}$ 和 $R_{\\text{inner}}$。分别归约它们会得到不同的后继项，构成了菱形的顶部。\n- **路径 1**：$T \\xrightarrow[\\text{归约 } R_{\\text{outer}}]{\\beta_{\\to}} T_1 = \\Big( \\lambda y{:}D.\\, \\pi_{1}\\big(\\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\big) \\Big)\\; r$\n- **路径 2**：$T \\xrightarrow[\\text{归约 } R_{\\text{inner}}]{\\beta_{\\to}} T_2 = \\Big(\\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle s,\\; w \\big\\rangle\\Big)\\; r$\n\n现在，我们证明 $T_1$ 和 $T_2$ 汇合到一个共同的项。\n- **从 $T_1$ 出发**：项 $T_1$ 仍然包含 redex $R_{\\text{inner}} = (\\lambda z{:}A.\\, z)\\,s$ 作为子项。我们来归约它。\n$$\nT_1 \\xrightarrow[\\text{归约 } (\\lambda z.z)s]{\\beta_{\\to}} \\big( \\lambda y{:}D.\\, \\pi_{1}(\\langle s, w \\rangle) \\big)\\; r\n$$\n- **从 $T_2$ 出发**：项 $T_2$ 包含 redex $\\big( \\lambda x{:}A\\wedge B.\\, \\dots \\big)\\; \\big\\langle s,\\; w \\big\\rangle$。归约它得到：\n$$\nT_2 \\xrightarrow[\\text{归约 } (\\lambda x...)\\langle s,w \\rangle]{\\beta_{\\to}} \\big( \\lambda y{:}D.\\, \\pi_{1}(\\langle s, w \\rangle) \\big)\\; r\n$$\n两条路径都汇合到同一个项 $N = \\big( \\lambda y{:}D.\\, \\pi_{1}(\\langle s, w \\rangle) \\big)\\; r$。这展示了 $T$ 中两个初始 redex 的菱形性质。这种局部汇合性是 Church-Rosser 定理（全局汇合性）的一个必要条件，该定理保证了 $s$ 是 $T$ 的唯一范式。\n\n**4. $T$ 的范式**\n\n如任务 2 的两个正规化序列中所计算的，对项 $T$ 穷尽地应用归约规则 $\\beta_{\\to}$ 和 $\\beta_{\\wedge}$ 会得到一个不含任何 redex 的唯一项。这个最终的、不可归约的项就是范式。\n为简洁起见，我们遵循序列 2：\n$$\n\\begin{aligned}\nT = \\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle \\big(\\lambda z{:}A.\\, z\\big)\\, s,\\; w \\big\\rangle\\; r \\\\\n\\rightarrow \\big( \\lambda x{:}A\\wedge B.\\, \\lambda y{:}D.\\, \\pi_{1}(x) \\big)\\; \\big\\langle s,\\; w \\big\\rangle\\; r \\\\\n\\rightarrow \\big( \\lambda y{:}D.\\, \\pi_{1}(\\langle s, w \\rangle) \\big)\\; r \\\\\n\\rightarrow \\pi_{1}(\\langle s, w \\rangle) \\\\\n\\rightarrow s\n\\end{aligned}\n$$\n证明项 $T$ 的范式是 $s$。这对应于命题 $A$ 的最简单可能证明，即公理 $s$ 本身。因此，$T$ 的复杂结构归约为一个平凡的证明。", "answer": "$$\n\\boxed{s}\n$$", "id": "3047844"}]}
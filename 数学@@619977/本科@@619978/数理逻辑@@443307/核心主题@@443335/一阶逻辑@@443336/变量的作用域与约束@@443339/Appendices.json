{"hands_on_practices": [{"introduction": "要掌握变量的作用域和绑定，首要的实践是能够精确地解析一个给定的公式。这个练习将引导你严格运用作用域、自由变量和约束变量的定义，从而为更复杂的分析打下坚实的基础。通过系统地分解公式并识别每个变量的状态，你将巩固对这些核心概念的理解。[@problem_id:3051488]", "problem": "考虑一阶逻辑 (FOL) 公式\n$$\\varphi \\;=\\; \\big(\\forall x\\, (P(x) \\land Q(y))\\big) \\lor \\big(\\exists x\\, R(x,z)\\big).$$\n所有谓词符号如上所示，$P$ 和 $Q$ 为一元谓词，$R$ 为二元谓词，出现的变量仅有 $x$、$y$ 和 $z$。请仅使用作用域、约束出现、自由出现的基本定义，以及一阶逻辑公式的自由变量集合 $FV(\\,\\cdot\\,)$ 的归纳定义，完成以下任务：\n1. 指出 $\\varphi$ 中变量 $x$ 的哪些出现是约束的，哪些（若有）是自由的。\n2. 计算集合 $FV(\\varphi)$。\n3. 为得到一个单一的数值最终答案，请使用以下对变量有限集 $S \\subseteq \\{x,y,z\\}$ 的编码方式：\n   - 指定权重 $w(x)=2$、$w(y)=3$、$w(z)=5$。\n   - 定义编码 $E(S)=\\prod_{v\\in S} w(v)$，并约定 $E(\\varnothing)=1$。\n请报告整数 $E\\big(FV(\\varphi)\\big)$ 作为您的最终答案。无需四舍五入，不涉及单位。您的推理必须从一阶逻辑中作用域和约束的核心定义以及 $FV(\\,\\cdot\\,)$ 的归纳定义出发，不得使用任何不能从这些定义推导出的快捷规则。", "solution": "该问题要求对一阶逻辑公式 $\\varphi \\;=\\; \\big(\\forall x\\, (P(x) \\land Q(y))\\big) \\lor \\big(\\exists x\\, R(x,z)\\big)$ 进行严格分析，以确定其自由变量集合，然后计算相应的数值编码。分析必须基于作用域、约束的形式化定义，以及自由变量集合 $FV(\\cdot)$ 的归纳定义。\n\n首先，我们陈述基本定义：\n1.  **作用域**：在形如 $\\forall v\\, \\psi$ 或 $\\exists v\\, \\psi$ 的公式中，量词（如 $\\forall v$ 或 $\\exists v$）的作用域是子公式 $\\psi$。\n2.  **被约束出现和自由出现**：在公式 $\\phi$ 中，变量 $v$ 的一次出现如果是出现在量词 $\\forall v$ 或 $\\exists v$ 的作用域内，则称为*被约束的* (bound)。如果一次出现不是被约束的，则称为*自由的* (free)。$\\forall v$ 和 $\\exists v$ 本身中 $v$ 的出现是*约束性出现* (binding occurrences)，这与作用域内的被约束出现或自由出现不同。\n3.  **自由变量 $FV(\\phi)$**：公式 $\\phi$ 的自由变量集合通过归纳法定义如下：\n    -   如果 $\\phi$ 是原子公式 $A(t_1, \\dots, t_n)$，那么 $FV(\\phi)$ 是出现在项 $t_1, \\dots, t_n$ 中的所有变量的集合。\n    -   $FV(\\neg\\psi) = FV(\\psi)$。\n    -   对于任何二元联结词 $\\circ \\in \\{\\land, \\lor, \\rightarrow, \\leftrightarrow\\}$，$FV(\\psi_1 \\circ \\psi_2) = FV(\\psi_1) \\cup FV(\\psi_2)$。\n    -   $FV(\\forall v\\, \\psi) = FV(\\psi) \\setminus \\{v\\}$。\n    -   $FV(\\exists v\\, \\psi) = FV(\\psi) \\setminus \\{v\\}$。\n\n给定公式为 $\\varphi \\;=\\; \\varphi_1 \\lor \\varphi_2$，其中 $\\varphi_1 = \\forall x\\, (P(x) \\land Q(y))$ 且 $\\varphi_2 = \\exists x\\, R(x,z)$。我们将按要求分析每个部分。\n\n**第一部分：指出变量 $x$ 的被约束出现和自由出现。**\n\n在公式 $\\varphi$ 中，变量 $x$作为谓词的参数出现了两次：一次在 $P(x)$ 中，一次在 $R(x,z)$ 中。\n\n-   考虑子公式 $\\varphi_1 = \\forall x\\, (P(x) \\land Q(y))$ 中 $x$ 的第一次出现。量词是 $\\forall x$，其作用域是子公式 $\\psi_1 = (P(x) \\land Q(y))$。$P(x)$ 中 $x$ 的出现位于此作用域内。因此，根据定义，这次 $x$ 的出现是**被约束的出现**。\n\n-   考虑子公式 $\\varphi_2 = \\exists x\\, R(x,z)$ 中 $x$ 的第二次出现。量词是 $\\exists x$，其作用域是子公式 $\\psi_2 = R(x,z)$。$R(x,z)$ 中 $x$ 的出现位于此作用域内。因此，这次 $x$ 的出现也是**被约束的出现**。\n\n因此，$\\varphi$ 中变量 $x$ 的两次出现都是被约束的。$\\varphi$ 中没有 $x$ 的自由出现。\n\n**第二部分：计算集合 $FV(\\varphi)$。**\n\n我们将 $FV(\\cdot)$ 的归纳定义应用于公式 $\\varphi$。\n\n首先，由于 $\\varphi$ 是一个析取式，我们有：\n$$FV(\\varphi) \\;=\\; FV\\big(\\big(\\forall x\\, (P(x) \\land Q(y))\\big) \\lor \\big(\\exists x\\, R(x,z)\\big)\\big) \\;=\\; FV\\big(\\forall x\\, (P(x) \\land Q(y))\\big) \\cup FV\\big(\\exists x\\, R(x,z)\\big)$$\n\n我们分别计算每个子公式的自由变量集合。\n\n对于第一个子公式 $\\varphi_1 = \\forall x\\, (P(x) \\land Q(y))$：\n根据全称量化规则：\n$$FV(\\forall x\\, (P(x) \\land Q(y))) \\;=\\; FV(P(x) \\land Q(y)) \\setminus \\{x\\}$$\n接下来，我们求合取式 $P(x) \\land Q(y)$ 的自由变量：\n$$FV(P(x) \\land Q(y)) \\;=\\; FV(P(x)) \\cup FV(Q(y))$$\n对于原子公式 $P(x)$ 和 $Q(y)$，其自由变量就是它们包含的变量：\n$$FV(P(x)) = \\{x\\}$$\n$$FV(Q(y)) = \\{y\\}$$\n代入回去，我们得到：\n$$FV(P(x) \\land Q(y)) = \\{x\\} \\cup \\{y\\} = \\{x, y\\}$$\n最后，我们完成对 $\\varphi_1$ 的计算：\n$$FV(\\varphi_1) = FV(\\forall x\\, (P(x) \\land Q(y))) = \\{x, y\\} \\setminus \\{x\\} = \\{y\\}$$\n\n对于第二个子公式 $\\varphi_2 = \\exists x\\, R(x,z)$：\n根据存在量化规则：\n$$FV(\\exists x\\, R(x,z)) \\;=\\; FV(R(x,z)) \\setminus \\{x\\}$$\n对于原子公式 $R(x,z)$，其自由变量就是它包含的变量：\n$$FV(R(x,z)) = \\{x, z\\}$$\n代入回去，我们得到：\n$$FV(\\varphi_2) = FV(\\exists x\\, R(x,z)) = \\{x, z\\} \\setminus \\{x\\} = \\{z\\}$$\n\n现在，我们合并结果来求 $FV(\\varphi)$：\n$$FV(\\varphi) = FV(\\varphi_1) \\cup FV(\\varphi_2) = \\{y\\} \\cup \\{z\\} = \\{y, z\\}$$\n$\\varphi$ 中的自由变量集合是 $\\{y, z\\}$。\n\n**第三部分：计算编码 $E\\big(FV(\\varphi)\\big)$。**\n\n问题定义了对变量集 $S \\subseteq \\{x,y,z\\}$ 的一种编码。分配给变量的权重为 $w(x)=2$，$w(y)=3$ 和 $w(z)=5$。编码函数为 $E(S)=\\prod_{v\\in S} w(v)$。\n\n我们需要计算 $E\\big(FV(\\varphi)\\big)$。从第二部分我们知道 $FV(\\varphi) = \\{y, z\\}$。\n因此，我们必须计算 $E(\\{y, z\\})$。\n使用编码函数的定义：\n$$E(\\{y, z\\}) = \\prod_{v \\in \\{y, z\\}} w(v) = w(y) \\cdot w(z)$$\n代入给定的权重：\n$$E(\\{y, z\\}) = 3 \\cdot 5 = 15$$\n最终的数值答案是 $15$。", "answer": "$$\\boxed{15}$$", "id": "3051488"}, {"introduction": "当同一个变量名在嵌套的量词中被重用时，逻辑公式可能会变得令人困惑。这个练习探讨了这种被称为“变量遮蔽”（shadowing）的现象。它要求你辨析在一个复杂结构中，哪个量词约束了哪个变量，并向你介绍了α-换名（alpha-conversion）这一重要技巧，它能在不改变公式含义的前提下澄清其结构。[@problem_id:3051461]", "problem": "考虑一阶逻辑（FOL）公式 $$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)\\big)$$。仅使用作用域、变量的自由出现和约束出现、以及约束变量的避免捕获的重命名（也称为 alpha-换名）的标准定义，判断哪个陈述最能描述内部的 $$\\forall x$$ 和外部的 $$\\forall x$$ 之间关于 $$R(x)$$ 中 $$x$$ 的出现的关系。选择唯一最佳选项。\n\nA. 在 $$R(x)$$ 中，符号 $$x$$ 被内部的 $$\\forall x$$ 约束，它仅在其自身的作用域内遮蔽了外部的 $$\\forall x$$；因此，通过 alpha-换名，该子公式等价于使用一个新变量 $$z$$ 的 $$\\forall z\\,R(z)$$，并且 $$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)\\big)$$ 等价于 $$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall z\\,R(z)\\big)\\big)$$。\n\nB. 内部的 $$\\forall x$$ 是多余的，因为外部的 $$\\forall x$$ 已经约束了整个公式中 $$x$$ 的每一次出现，所以 $$R(x)$$ 使用了与 $$Q(y,x)$$ 中相同的 $$x$$。\n\nC. 内部 $$\\forall x$$ 的作用域同时覆盖了 $$Q(y,x)$$ 和 $$R(x)$$，所以 $$\\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)$$ 内部所有 $$x$$ 的出现都被内部量词约束。\n\nD. 在任何结构中，两个 $$\\forall x$$ 量词必须同时遍历相同的元素，从而迫使 $$R(x)$$ 在合取式中与 $$Q(y,x)$$ 中使用的 $$x$$ 值相同的情况下进行求值。\n\nE. 因为 $$\\exists y$$ 在内部量词之前，可以将其分配，从而在合取式内部得到 $$\\forall x\\,\\exists y\\,R(x)$$，这改变了 $$x$$ 的约束方式，使得 $$Q(y,x)$$ 和 $$R(x)$$ 关联到同一个 $$x$$。", "solution": "该问题陈述是有效的。它给出了一个一阶逻辑中的合式公式，并要求分析变量约束和作用域，这些是数理逻辑中定义明确的概念。该问题是自包含的、客观的，并有科学依据。\n\n为了确定公式 $$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)\\big)$$ 中变量约束的正确描述，我们必须应用一阶逻辑中关于变量作用域和约束的标准定义。\n\n一个核心原则是变量作用域。一个量词（如 $$\\forall v\\,\\phi$$ 或 $$\\exists v\\,\\phi$$）的作用域是紧跟其后的公式 $$\\phi$$。如果变量 $$v$$ 的一次出现位于针对 $$v$$ 的量词（即 $$\\forall v$$ 或 $$\\exists v$$）的作用域内，则称其为*约束*出现。如果一个变量的出现不是约束出现，那么它是*自由*出现。\n\n对于嵌套量词，一个关键规则是，变量的出现被其作用域包含该出现的最内层量词所约束。这种现象通常被称为“遮蔽”（shadowing），即针对变量 $$v$$ 的内层量词“遮蔽”或优先于针对同一变量 $$v$$ 的外层量词。\n\n让我们分析给定的公式：$$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)\\big)$$。\n我们可以识别出三个量词及其作用域：\n1.  最外层的量词，我们可以标记为 $$\\forall_1 x$$，其作用域是 $$P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)$$。\n2.  存在量词 $$\\exists y$$，其作用域是 $$Q(y,x) \\land \\forall x\\,R(x)$$。\n3.  最内层的全称量词，我们可以标记为 $$\\forall_2 x$$，其作用域是 $$R(x)$$。\n\n现在，让我们追踪变量 $$x$$ 的出现：\n-   $$P(x)$$ 中 $$x$$ 的出现位于 $$\\forall_1 x$$ 的作用域内，而不在其他针对 $$x$$ 的量词的作用域内。因此，它被外层量词 $$\\forall_1 x$$ 约束。\n-   $$Q(y,x)$$ 中 $$x$$ 的出现也位于 $$\\forall_1 x$$ 的作用域内，但不在内层量词 $$\\forall_2 x$$ 的作用域内。因此，它也被外层量词 $$\\forall_1 x$$ 约束。\n-   $$R(x)$$ 中 $$x$$ 的出现位于内层量词 $$\\forall_2 x$$ 的作用域内。因为这个作用域嵌套在外层量词 $$\\forall_1 x$$ 的作用域内部，所以最内层约束规则适用。因此，$$x$$ 的这次出现被内层量词 $$\\forall_2 x$$ 约束。\n\n内层量词 $$\\forall_2 x$$ 实际上使 $$R(x)$$ 内部的变量 $$x$$ 成为一个“局部”或“哑”变量，与被外层量词 $$\\forall_1 x$$ 约束的变量 $$x$$ 不同。子公式 $$\\forall x\\,R(x)$$ 是一个闭公式（一个句子），意味着它在给定结构中的真值独立于其作用域之外的任何变量赋值。\n\n这种情况是 alpha-换名（约束变量的重命名）的适用场景。Alpha-换名允许我们将一个约束变量替换为一个在量词作用域内不自由出现的新变量名，而不会改变公式的含义（语义）。在子公式 $$\\forall x\\,R(x)$$ 中，我们可以将约束变量 $$x$$ 重命名为一个新变量，例如 $$z$$。这会产生等价的子公式 $$\\forall z\\,R(z)$$。\n\n将此代换回原公式，我们发现\n$$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)\\big)$$\n在逻辑上等价于\n$$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall z\\,R(z)\\big)\\big)$$。\n这种重命名使得变量的不同性质变得明确。\n\n基于此分析，我们可以评估每个选项：\n\n**A. 在 $$R(x)$$ 中，符号 $$x$$ 被内部的 $$\\forall x$$ 约束，它仅在其自身的作用域内遮蔽了外部的 $$\\forall x$$；因此，通过 alpha-换名，该子公式等价于使用一个新变量 $$z$$ 的 $$\\forall z\\,R(z)$$，并且 $$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)\\big)$$ 等价于 $$\\forall x\\big(P(x) \\lor \\exists y\\big(Q(y,x) \\land \\forall z\\,R(z)\\big)\\big)$$。**\n该陈述与我们的推导完全一致。它正确地指出 $$R(x)$$ 中的 $$x$$ 被内层 $$\\forall x$$ 约束。它正确地将此描述为遮蔽，该遮蔽仅作用于内层量词的作用域（$$R(x)$$）。它正确地陈述了对子公式应用 alpha-换名的结果以及此变换后整个公式的等价性。**正确**。\n\n**B. 内部的 $$\\forall x$$ 是多余的，因为外部的 $$\\forall x$$ 已经约束了整个公式中 $$x$$ 的每一次出现，所以 $$R(x)$$ 使用了与 $$Q(y,x)$$ 中相同的 $$x$$。**\n这是不正确的。内层的 $$\\forall x$$ 并不是多余的；它为其自身的作用域重新约束了变量名 $$x$$。由于最内层约束规则，外层的 $$\\forall x$$ 并不约束 $$x$$ 的每一次出现，特别是不约束 $$R(x)$$ 中的那一次。因此，$$R(x)$$ 中的 $$x$$ 与 $$Q(y,x)$$ 中的 $$x$$ 不是同一个变量。**不正确**。\n\n**C. 内部 $$\\forall x$$ 的作用域同时覆盖了 $$Q(y,x)$$ 和 $$R(x)$$，所以 $$\\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)$$ 内部所有 $$x$$ 的出现都被内部量词约束。**\n这是不正确的。量词 $$\\forall v\\,\\phi$$ 的作用域恰好是公式 $$\\phi$$。在这种情况下，内层 $$\\forall x$$ 的作用域仅是 $$R(x)$$。它不扩展到包含 $$Q(y,x)$$。因此，$$Q(y,x)$$ 中的 $$x$$ 不被内层量词约束。**不正确**。\n\n**D. 在任何结构中，两个 $$\\forall x$$ 量词必须同时遍历相同的元素，从而迫使 $$R(x)$$ 在合取式中与 $$Q(y,x)$$ 中使用的 $$x$$ 值相同的情况下进行求值。**\n这反映了对嵌套量词语义的误解。子公式 $$\\forall x\\,R(x)$$ 是一个闭合句子。它的真值是通过检查域中所有元素 $$a$$ 是否都满足 $$R(a)$$ 来确定的，这与赋给外层 $$x$$ 的任何特定值无关。不存在同时求值或强制同一性。这两个名为 $$x$$ 的变量在形式上是不同的。**不正确**。\n\n**E. 因为 $$\\exists y$$ 在内部量词之前，可以将其分配，从而在合取式内部得到 $$\\forall x\\,\\exists y\\,R(x)$$，这改变了 $$x$$ 的约束方式，使得 $$Q(y,x)$$ 和 $$R(x)$$ 关联到同一个 $$x$$。**\n这提出了一个无效的逻辑变换。确实存在一个将 $$\\exists y$$ 分配到 $$\\land$$ 上的有效规则：$$\\exists y(\\phi \\land \\psi) \\equiv (\\exists y\\,\\phi) \\land \\psi$$，前提是 $$y$$ 在 $$\\psi$$ 中不是自由变量。在我们的例子中，对于 $$\\exists y\\big(Q(y,x) \\land \\forall x\\,R(x)\\big)$$，变量 $$y$$ 在 $$\\forall x\\,R(x)$$ 中不是自由的。正确应用此规则将得到 $$(\\exists y\\,Q(y,x)) \\land (\\forall x\\,R(x))$$。这种变换不会改变 $$R(x)$$ 中 $$x$$ 的约束，也不会产生 $$\\forall x\\,\\exists y\\,R(x)$$。**不正确**。\n\n基于详细分析，只有选项 A 提供了对逻辑结构的正确且完整的描述。", "answer": "$$\\boxed{A}$$", "id": "3051461"}, {"introduction": "在学会了识别被遮蔽的变量并对其进行重命名之后，理解为何这种操作在逻辑上是有效的至关重要。这个练习将引导你完成一个形式化证明，将重命名变量这一纯粹的句法操作，与其能保持公式真值不变的语义保证联系起来。这有助于你深入理解句法和语义之间的深刻联系。[@problem_id:3051426]", "problem": "考虑一阶逻辑 (FOL)，其中结构由一个非空论域和谓词符号的解释给出，而公式的满足是相对于一个变量赋值来定义的。令 $\\varphi$ 为公式 $\\forall x\\big(P(x) \\land \\exists x\\, Q(x)\\big)$，其中 $P$ 和 $Q$ 是一元谓词符号。公式 $\\varphi$ 表现出遮蔽现象，因为由内层存在量词绑定的变量 $x$ 与由外层全称量词绑定的变量 $x$同名。通过将内层绑定变量重命名为 $u$ 来定义变量重命名后的公式 $\\psi$，使得 $\\psi = \\forall x\\big(P(x) \\land \\exists u\\, Q(u)\\big)$。\n\n仅使用 FOL 语法和语义的核心定义（特别是变量的绑定和作用域，以及全称量词和存在量词的真值定义），完成以下任务：\n\n1. 通过绑定变量重命名来消除遮蔽，从 $\\varphi$ 出发显式地构造 $\\psi$。明确说明变量的哪些出现是绑定的，以及由此产生的作用域。\n2. 证明对于任意 FOL 结构和任意变量赋值，$\\varphi$ 和 $\\psi$ 具有相同的真值。你的论证必须从 $\\forall$ 和 $\\exists$ 的形式满足定义以及绑定变量重命名的概念出发；不要引用超出这些定义范围的现成定理。\n3. 现在固定一个具体结构 $\\mathcal{M}$，其论域为 $D = \\{0,1,2\\}$，其中 $P(d)$ 为真当且仅当 $d \\in \\{0,2\\}$，且 $Q(d)$ 为真当且仅当 $d = 1$。在 $\\mathcal{M}$ 中计算双条件句 $\\varphi \\leftrightarrow \\psi$ 的真值，并使用约定（0 表示假，1 表示真）来表示结果。无需取整。", "solution": "该问题要求对两个一阶逻辑公式 $\\varphi$ 和 $\\psi$ 进行三部分分析，涉及变量绑定、作用域和满足。\n\n### 第 1 部分：从 $\\varphi$ 构造 $\\psi$\n\n初始公式为 $\\varphi = \\forall x\\big(P(x) \\land \\exists x\\, Q(x)\\big)$。\n为了理解其结构，我们确定量词及其作用域。\n1.  外层全称量词 $\\forall x$ 的作用域是子公式 $\\big(P(x) \\land \\exists x\\, Q(x)\\big)$。\n2.  内层存在量词 $\\exists x$ 的作用域是子公式 $Q(x)$。\n\n在公式 $\\varphi$ 中，变量 $x$ 出现了三次。\n-   $P(x)$ 中 $x$ 的出现被外层量词 $\\forall x$ 绑定。\n-   $Q(x)$ 中 $x$ 的出现被内层量词 $\\exists x$ 绑定。内层量词的作用域嵌套在外层量词的作用域之内。由于变量名相同，内层绑定“遮蔽”了外层绑定。根据一阶逻辑中的变量绑定规则，变量的某次出现被其所在作用域的最内层量词所绑定。\n\n消除遮蔽的过程包括将内层量词的绑定变量重命名为一个新变量，即一个在该量词作用域内不作为自由变量出现的变量。在子公式 $\\exists x\\, Q(x)$ 中，没有自由变量，所以任何新的变量符号都可以。我们选择变量 $u$。\n\n我们将内层子公式 $\\exists x\\, Q(x)$ 替换为其 α-等价形式 $\\exists u\\, Q(u)$。在这个新子公式中，变量 $u$ 被量词 $\\exists u$ 绑定，其作用域是谓词 $Q(u)$。\n\n将这个重命名后的子公式代换回 $\\varphi$ 中，得到公式 $\\psi$：\n$\\psi = \\forall x\\big(P(x) \\land \\exists u\\, Q(u)\\big)$。\n\n在得到的公式 $\\psi$ 中：\n-   量词 $\\forall x$ 绑定 $P(x)$ 中 $x$ 的出现。其作用域是整个子公式 $P(x) \\land \\exists u\\, Q(u)$。\n-   量词 $\\exists u$ 绑定 $Q(u)$ 中 $u$ 的出现。其作用域是 $Q(u)$。\n\n变量遮蔽已被消除，因为两个量词绑定的变量现在是不同的（$x$ 和 $u$）。\n\n### 第 2 部分：等价性证明\n\n要证明 $\\varphi$ 和 $\\psi$ 逻辑等价，我们必须证明对于任何具有非空论域 $D$ 的结构 $\\mathcal{M}$ 和任何变量赋值 $\\sigma$，满足关系对两者要么都成立，要么都不成立。即 $\\mathcal{M}, \\sigma \\models \\varphi$ 当且仅当 $\\mathcal{M}, \\sigma \\models \\psi$。我们从量词的语义定义出发。\n\n我们来分析 $\\varphi$ 的真值条件：$\\mathcal{M}, \\sigma \\models \\forall x\\big(P(x) \\land \\exists x\\, Q(x)\\big)$。\n根据全称量词 ($\\forall$) 的满足定义，该陈述为真当且仅当对于每个元素 $d \\in D$：\n$\\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x) \\land \\exists x\\, Q(x)$\n其中 $\\sigma[x \\mapsto d]$ 是将 $x$ 映射到 $d$ 并在其他方面与 $\\sigma$ 相同的赋值。\n\n根据合取 ($\\land$) 的满足定义，这为真当且仅当对于每个 $d \\in D$，以下两条都成立：\n(a) $\\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x)$\n(b) $\\mathcal{M}, \\sigma[x \\mapsto d] \\models \\exists x\\, Q(x)$\n\n我们关注条件 (b)。公式 $\\exists x\\, Q(x)$ 是一个*句子*（它没有自由变量）。一个句子的真值与变量赋值无关。因此，$\\exists x\\, Q(x)$ 在赋值 $\\sigma[x \\mapsto d]$ 下的真值与它在任何其他赋值（包括 $\\sigma$ 本身）下的真值相同。我们可以简单地将这个条件写作 $\\mathcal{M} \\models \\exists x\\, Q(x)$。\n根据存在量词 ($\\exists$) 的满足定义，$\\mathcal{M} \\models \\exists x\\, Q(x)$ 为真当且仅当存在一个元素 $d' \\in D$ 使得 $\\mathcal{M}, \\sigma[x \\mapsto d'] \\models Q(x)$，这可以简化为 $\\mathcal{M}$ 中 $Q$ 的解释非空的条件。\n\n因此，$\\varphi$ 为真的总体条件是：对于每个 $d \\in D$，$\\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x)$ 为真，并且句子 $\\mathcal{M} \\models \\exists x\\, Q(x)$ 为真。\n因为 $\\exists x\\, Q(x)$ 的真值不依赖于 $d$，我们可以将条件分开：\n$(\\forall d \\in D, \\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x)) \\land (\\mathcal{M} \\models \\exists x\\, Q(x))$。\n这可以简化为：$(\\mathcal{M} \\models \\forall x\\,P(x)) \\land (\\mathcal{M} \\models \\exists x\\, Q(x))$。\n\n现在我们来分析 $\\psi$ 的真值条件：$\\mathcal{M}, \\sigma \\models \\forall x\\big(P(x) \\land \\exists u\\, Q(u)\\big)$。\n根据 $\\forall$ 的定义，这为真当且仅当对于每个元素 $d \\in D$：\n$\\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x) \\land \\exists u\\, Q(u)$。\n根据 $\\land$ 的定义，这为真当且仅当对于每个 $d \\in D$，以下两条都成立：\n(c) $\\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x)$\n(d) $\\mathcal{M}, \\sigma[x \\mapsto d] \\models \\exists u\\, Q(u)$\n\n条件 (c) 与条件 (a) 相同。\n我们关注条件 (d)。公式 $\\exists u\\, Q(u)$ 也是一个句子。变量 $x$（在赋值 $\\sigma[x \\mapsto d]$ 中被修改的变量）在 $\\exists u\\, Q(u)$ 中不是自由的。因此，它的真值与对 $x$ 的赋值无关。所以，$\\mathcal{M}, \\sigma[x \\mapsto d] \\models \\exists u\\, Q(u)$ 等价于 $\\mathcal{M} \\models \\exists u\\, Q(u)$。\n根据 $\\exists$ 的定义，$\\mathcal{M} \\models \\exists u\\, Q(u)$ 为真当且仅当存在一个元素 $d'' \\in D$ 使得 $\\mathcal{M}, \\sigma[u \\mapsto d''] \\models Q(u)$，这可以简化为 $\\mathcal{M}$ 中 $Q$ 的解释非空。\n\n因此，$\\psi$ 为真的条件是：\n$(\\forall d \\in D, \\mathcal{M}, \\sigma[x \\mapsto d] \\models P(x)) \\land (\\mathcal{M} \\models \\exists u\\, Q(u))$。\n这可以简化为：$(\\mathcal{M} \\models \\forall x\\,P(x)) \\land (\\mathcal{M} \\models \\exists u\\, Q(u))$。\n\n绑定变量的名称只是一个占位符；它不影响公式的语义。因此，“论域中存在一个元素使得 $Q$ 为真”这个条件对于 $\\exists x\\, Q(x)$ 和 $\\exists u\\, Q(u)$ 是相同的。\n因此，$\\varphi$ 和 $\\psi$ 的真值条件是相同的。两者都等价于陈述“$P$ 的解释包含整个论域 $D$ 且 $Q$ 的解释非空”。\n因为对于任何结构 $\\mathcal{M}$，$\\varphi$ 和 $\\psi$ 在完全相同的条件下为真，所以它们逻辑等价。\n\n### 第 3 部分：在具体结构中求值\n\n给定结构 $\\mathcal{M}$，其论域为 $D = \\{0, 1, 2\\}$，其中 $P$ 的解释（记为 $P^{\\mathcal{M}}$）是 $\\{0, 2\\}$，$Q$ 的解释（记为 $Q^{\\mathcal{M}}$）是 $\\{1\\}$。我们必须在此结构中计算双条件句 $\\varphi \\leftrightarrow \\psi$ 的真值。\n\n如第 2 部分所证，$\\varphi$ 和 $\\psi$ 逻辑等价。这意味着对于任何结构，它们都必须具有相同的真值。双条件句 $A \\leftrightarrow B$ 为真当且仅当 $A$ 和 $B$ 具有相同的真值。由于保证 $\\varphi$ 和 $\\psi$ 在 $\\mathcal{M}$ 中具有相同的真值，公式 $\\varphi \\leftrightarrow \\psi$ 在 $\\mathcal{M}$ 中必定为真。\n\n为了完全严谨，我们可以显式地计算 $\\varphi$ 和 $\\psi$ 在 $\\mathcal{M}$ 中的真值。\n-   $\\varphi$ 的真值等价于 $(\\mathcal{M} \\models \\forall x\\,P(x)) \\land (\\mathcal{M} \\models \\exists x\\, Q(x))$ 的真值。\n    -   $\\mathcal{M} \\models \\forall x\\,P(x)$ 为真吗？这要求对于所有 $d \\in \\{0, 1, 2\\}$，$P(d)$ 都为真。然而，$P(1)$ 为假，因为 $1 \\notin P^{\\mathcal{M}}$。因此，$\\mathcal{M} \\models \\forall x\\,P(x)$ 为假。\n    -   $\\mathcal{M} \\models \\exists x\\, Q(x)$ 为真吗？这要求对于至少一个 $d \\in \\{0, 1, 2\\}$，$Q(d)$ 为真。$Q(1)$ 为真，因为 $1 \\in Q^{\\mathcal{M}}$。因此，$\\mathcal{M} \\models \\exists x\\, Q(x)$ 为真。\n    -   整个合取式是 $(\\text{假}) \\land (\\text{真})$，结果为假。所以，$\\varphi$ 在 $\\mathcal{M}$ 中为假。\n-   $\\psi$ 的真值等价于 $(\\mathcal{M} \\models \\forall x\\,P(x)) \\land (\\mathcal{M} \\models \\exists u\\, Q(u))$ 的真值。\n    -   我们已经发现 $\\mathcal{M} \\models \\forall x\\,P(x)$ 为假。\n    -   公式 $\\exists u\\, Q(u)$ 为真的原因与 $\\exists x\\, Q(x)$ 为真的原因相同。\n    -   整个合取式是 $(\\text{假}) \\land (\\text{真})$，结果为假。所以，$\\psi$ 在 $\\mathcal{M}$ 中为假。\n\n题目要求我们计算 $\\varphi \\leftrightarrow \\psi$ 的值。在 $\\mathcal{M}$ 中，这变成了 $\\text{假} \\leftrightarrow \\text{假}$。这个陈述为真。\n使用指定的约定，结果是 $1$。", "answer": "$$\\boxed{1}$$", "id": "3051426"}]}
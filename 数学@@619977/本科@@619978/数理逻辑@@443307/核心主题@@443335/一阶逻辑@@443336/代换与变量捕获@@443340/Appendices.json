{"hands_on_practices": [{"introduction": "在逻辑推理中，精确性至关重要。此练习将带你回到一阶逻辑的基础，通过一个经典的例子来练习应用“对...是自由的”(free for)这一核心定义。通过仔细分析一个项和一个公式，你将直接面对一个朴素替换会导致变量捕获的情境，从而从根本上理解问题的本质。", "problem": "设 $\\mathcal{L}$ 是一个标准一阶语言，其包含个体变元 $x,y,z,\\dots$，一个一元函数符号 $f(\\cdot)$，一个二元谓词符号 $P(\\cdot,\\cdot)$，以及一个一元谓词符号 $Q(\\cdot)$。考虑公式 $\\varphi \\equiv \\exists y\\,\\big(P(x,y)\\land Q(y)\\big)$ 和项 $t \\equiv f(y)$。使用一阶逻辑中关于自由变元、约束变元、代换和变元捕获的基本定义，来判断在公式 $\\varphi$ 中，项 $t$ 对于变元 $x$ 是否是自由的。您的推理必须从以下基本概念出发：\n\n- 项的自由变元：出现在项中的变元。\n- 公式中变元的自由出现和约束出现，以及量词的作用域。\n- 代换 $\\varphi[x:=t]$ 的概念，该操作将 $\\varphi$ 中 $x$ 的所有自由出现替换为 $t$。\n- 定义：对于公式 $\\varphi$ 中的变元 $x$，如果项 $t$ 中自由出现的变元在执行代换 $\\varphi[x:=t]$ 后没有变成约束变元，则称项 $t$ 对于 $x$ 在 $\\varphi$ 中是自由的。等价地，$\\varphi$ 中 $x$ 的任何自由出现都不处于约束了项 $t$ 中某个自由变元的那种量词的作用域之内。\n\n通过明确分析量词的作用域和 $\\varphi$ 中 $x$ 自由出现的位置，并通过识别代换后潜在的变元捕获，来判定 $t$ 对于 $x$ 在 $\\varphi$ 中是否是自由的。\n\n答案规格：\n- 以单个实数报告您的判定结果：如果 $t$ 对于 $x$ 在 $\\varphi$ 中是自由的，则写 $1$；如果 $t$ 对于 $x$ 在 $\\varphi$ 中不是自由的，则写 $0$。\n- 无需四舍五入。", "solution": "本题要求我们根据一阶逻辑中代换的基本定义，来判断在公式 $\\varphi \\equiv \\exists y\\,\\big(P(x,y)\\land Q(y)\\big)$ 中，项 $t \\equiv f(y)$ 对于变元 $x$ 是否是自由的。\n\n使用的核心定义是：对于公式 $\\varphi$ 中的变元 $x$，如果将 $\\varphi$ 中所有 $x$ 的自由出现代换为 $t$ 时，没有任何在 $t$ 中自由出现的变元因此变为约束变元，则称项 $t$ 对于 $x$ 是自由的。一个等价且更直接的检查此条件的方法是：验证对于 $\\varphi$ 中 $x$ 的每一个自由出现，它都不在某个量词 $\\forall z$ 或 $\\exists z$ 的作用域内，其中 $z$ 是一个在项 $t$ 中自由出现的变元。\n\n我们将通过系统地分析问题的各个组成部分来进行。\n\n1.  **分析项 $t$：**\n    给定的项是 $t \\equiv f(y)$。出现在该项中的变元集合是 $\\{y\\}$。由于项不包含量词，任何出现在项中的变元根据定义都是自由变元。因此， $t$ 中的自由变元集合，记作 $\\text{FV}(t)$，是 $\\{y\\}$。\n\n2.  **分析公式 $\\varphi$：**\n    给定的公式是 $\\varphi \\equiv \\exists y\\,\\big(P(x,y)\\land Q(y)\\big)$。\n    我们必须识别变元 $x$ 的自由出现以及量词的作用域。\n    -   该公式包含单个量词 $\\exists y$。该量词的作用域是其右侧的子公式，即 $\\big(P(x,y)\\land Q(y)\\big)$。\n    -   在此作用域内，变元 $y$ 出现在 $P(x,y)$ 和 $Q(y)$ 中。这些 $y$ 的出现受量词 $\\exists y$ 约束。\n    -   变元 $x$ 在公式中出现一次，位于原子公式 $P(x,y)$ 内。 $x$ 的这次出现不受 $\\varphi$ 中任何量词的约束（因为唯一的量词约束的是 $y$）。因此， $x$ 的这次出现是在 $\\varphi$ 中自由的。\n\n3.  **应用“对于...是自由的”条件：**\n    我们现在应用该定义。我们需要检查 $\\varphi$ 中 $x$ 的任何自由出现是否落入某个量词的作用域内，而该量词约束了 $\\text{FV}(t)$ 中存在的变元。\n\n    -   **项 $t$ 中的自由变元**：从步骤1中，我们发现 $\\text{FV}(t) = \\{y\\}$。我们唯一需要关注的变元是 $y$。\n    -   **$\\varphi$ 中 $x$ 的自由出现**：从步骤2中，我们在子公式 $P(x,y)$ 中找到了 $x$ 的一个自由出现。\n    -   **量词作用域**：公式 $\\varphi$ 有一个量词 $\\exists y$，其作用域是 $\\big(P(x,y)\\land Q(y)\\big)$。\n\n    现在，我们检查关键条件：$x$ 的自由出现是否位于量词 $\\exists y$ 的作用域内？是的，包含自由 $x$ 的子公式 $P(x,y)$ 位于 $\\exists y$ 的作用域内。\n\n    接下来，这个量词 $\\exists y$ 是否约束了一个在项 $t$ 中自由的变元？该量词约束了变元 $y$。而且，正如我们所确定的，变元 $y$ 确实在项 $t \\equiv f(y)$ 中是自由的。\n\n    由于在 $\\varphi$ 中存在一个 $x$ 的自由出现（在 $P(x,y)$ 中），它位于一个量词（$\\exists y$）的作用域内，而该量词约束了一个在项 $t$ 中自由的变元（$y$），因此 $t$ 对于 $x$ 在 $\\varphi$ 中是自由的这一条件被违反了。\n\n4.  **演示变元捕获：**\n    为使推理过程更具体，让我们观察一下，如果我们执行代换 $\\varphi[x:=t]$（即将 $\\varphi$ 中 $x$ 的自由出现替换为项 $t \\equiv f(y)$），会发生什么。\n    原始公式是 $\\varphi \\equiv \\exists y\\,\\big(P(x,y)\\land Q(y)\\big)$。\n    用 $f(y)$ 替换 $x$ 后，得到新公式：\n    $$ \\exists y\\,\\big(P(f(y),y)\\land Q(y)\\big) $$\n    在这个新公式中，作为项 $f(y)$ 一部分的变元 $y$ 被置于了量词 $\\exists y$ 的作用域内。这个在项 $t$ 中本是自由的 $y$ 被“捕获”了，现在受到了存在量词的约束。这种捕获改变了代换的原意。项 $t$ 本意是代换 $x$，但它自己的变元 $y$ 的指称却被 $\\varphi$ 中的一个量词“劫持”了。\n\n    因此，由于发生了这种变元捕获，项 $t$ 对于 $x$ 在 $\\varphi$ 中不是自由的。\n\n5.  **结论：**\n    项 $t \\equiv f(y)$ 对于变元 $x$ 在公式 $\\varphi \\equiv \\exists y\\,\\big(P(x,y)\\land Q(y)\\big)$ 中不是自由的。根据题目的规格说明，这对应于数值 $0$。", "answer": "$$\\boxed{0}$$", "id": "3053916"}, {"introduction": "理解了什么是变量捕获后，本练习将展示为何避免它至关重要。你将对同一个复杂公式执行一次“天真”的文本替换和一次正确的无捕获替换，然后比较两个结果公式的自由变量集合。这个过程将具体地揭示变量捕获是如何改变一个逻辑陈述的基本含义的，从而强调了严谨替换规则的必要性。", "problem": "考虑经典的一阶逻辑 (FOL)，其签名包含具有适当元数的谓词符号 $P$、$Q$、$R$、$H$ 和 $S$。回顾标准概念：如果一个变量的出现不在绑定它的量词的作用域内，则该次出现是自由的，否则是受约束的；公式 $\\varphi$ 的自由变量集合表示为 $\\mathrm{FV}(\\varphi)$。在朴素的文本替换中，当用项 $t$ 替换公式中的变量 $x$ 时，所有 $x$ 的自由出现都被 $t$ 替换，而不考虑公式中量词对变量的捕获；在避免捕获的替换中，首先对满足以下条件的量词进行适当的重命名（α-变换）：其变量在 $t$ 中自由出现，且其作用域包含 $x$ 的一个自由出现，重命名时使用一个未在项 $t$ 或公式其他地方出现的全新变量，然后再进行替换。\n\n设公式为\n$$\n\\theta \\equiv \\Big( \\forall y \\, \\big( ( P(x,y) \\land \\exists x \\, ( Q(x,y) \\land \\forall z \\, R(x,z) ) ) \\lor H(y) \\big) \\Big) \\land \\Big( \\exists u \\, S(u) \\Big).\n$$\n以两种方式执行用变量 $y$ 替换变量 $x$ 的操作：\n- 朴素的文本替换，得到 $\\theta_{\\mathrm{naive}}$，\n- 避免捕获的替换，对所有需要的重命名使用单个全新变量 $y'$，得到 $\\theta_{\\mathrm{ca}}$。\n\n根据第一性原理，确定集合 $\\mathrm{FV}(\\theta_{\\mathrm{naive}})$ 和 $\\mathrm{FV}(\\theta_{\\mathrm{ca}})$，然后计算其基数\n$$\n\\left| \\mathrm{FV}(\\theta_{\\mathrm{naive}}) \\triangle \\mathrm{FV}(\\theta_{\\mathrm{ca}}) \\right|,\n$$\n其中 $\\triangle$ 表示集合的对称差。将你的最终答案表示为一个精确的整数。无需四舍五入。", "solution": "该问题要求我们对给定的一阶逻辑公式 $\\theta$ 执行两种类型的替换，确定每个结果公式的自由变量集合，然后计算这两个集合对称差的基数。\n\n初始公式为：\n$$\n\\theta \\equiv \\Big( \\forall y \\, \\big( ( P(x,y) \\land \\exists x \\, ( Q(x,y) \\land \\forall z \\, R(x,z) ) ) \\lor H(y) \\big) \\Big) \\land \\Big( \\exists u \\, S(u) \\Big)\n$$\n要执行的替换是用变量 $y$ 替换变量 $x$。\n\n首先，我们必须确定原始公式 $\\theta$ 的自由变量，记为 $\\mathrm{FV}(\\theta)$。如果一个变量的出现不在绑定它的量词的作用域内，则该次出现是自由的。让我们分析一下 $\\theta$ 的结构：\n$\\theta$ 是两个子公式的合取。我们称它们为 $\\varphi_1$ 和 $\\varphi_2$。\n$\\varphi_1 \\equiv \\forall y \\, \\big( ( P(x,y) \\land \\exists x \\, ( Q(x,y) \\land \\forall z \\, R(x,z) ) ) \\lor H(y) \\big)$\n$\\varphi_2 \\equiv \\exists u \\, S(u)$\n\n在 $\\varphi_2$ 中，变量 $u$ 被存在量词 $\\exists u$ 绑定。因此，$\\varphi_2$ 是一个闭合公式，其自由变量集合为空：$\\mathrm{FV}(\\varphi_2) = \\emptyset$。\n\n在 $\\varphi_1$ 中，开头的全称量词 $\\forall y$ 绑定了其作用域内所有变量 $y$ 的出现。该作用域是其后的整个表达式。\n让我们检查一下 $\\forall y$ 作用域内变量的出现情况：\n- 在原子公式 $P(x,y)$ 中，$y$ 的出现被外部的 $\\forall y$ 绑定。$x$ 的出现没有被公式此部分的任何量词绑定。\n- 在子公式 $\\exists x \\, ( Q(x,y) \\land \\forall z \\, R(x,z) )$ 中，量词 $\\exists x$ 绑定了出现在 $Q(x,y)$ 和 $R(x,z)$ 中的变量 $x$。$Q(x,y)$ 中的变量 $y$ 被外部的 $\\forall y$ 绑定。$R(x,z)$ 中的变量 $z$ 被量词 $\\forall z$ 绑定。\n- 在原子公式 $H(y)$ 中，变量 $y$ 被外部的 $\\forall y$ 绑定。\n\n在 $\\theta$ 中唯一没有被任何量词绑定的变量出现是 $P(x,y)$ 中的第一个 $x$。因此，$\\theta$ 的自由变量集合是 $\\mathrm{FV}(\\theta) = \\{x\\}$。\n\n接下来，我们执行指定的两种替换。\n\n**1. 朴素文本替换**\n\n用 $y$ 对 $x$ 进行朴素替换，我们可以表示为 $\\theta[y/x]_{\\mathrm{naive}}$，它将 $\\theta$ 中所有 $x$ 的自由出现替换为 $y$。如前所定，只有一个这样的自由出现。这得到公式 $\\theta_{\\mathrm{naive}}$：\n$$\n\\theta_{\\mathrm{naive}} \\equiv \\Big( \\forall y \\, \\big( ( P(y,y) \\land \\exists x \\, ( Q(x,y) \\land \\forall z \\, R(x,z) ) ) \\lor H(y) \\big) \\Big) \\land \\Big( \\exists u \\, S(u) \\Big)\n$$\n现在，我们求 $\\theta_{\\mathrm{naive}}$ 的自由变量集合，记为 $\\mathrm{FV}(\\theta_{\\mathrm{naive}})$。\n- 第二个合取项 $\\exists u \\, S(u)$ 没有自由变量。\n- 在第一个合取项中，量词 $\\forall y$ 绑定了其作用域内所有 $y$ 的出现。这包括 $P(y,y)$ 中的两次出现，$Q(x,y)$ 中的一次出现，以及 $H(y)$ 中的一次出现。\n- 变量 $x$ 和 $z$ 分别被各自的量词 $\\exists x$ 和 $\\forall z$ 绑定。\n由于 $\\theta_{\\mathrm{naive}}$ 中所有变量的出现都是受约束的，该公式是闭合的。\n因此，自由变量集合为空：$\\mathrm{FV}(\\theta_{\\mathrm{naive}}) = \\emptyset$。\n这种替换导致了*变量捕获*：被替换的变量 $y$ 被已有的量词 $\\forall y$ 绑定了。\n\n**2. 避免捕获的替换**\n\n避免捕获的替换，得到 $\\theta_{\\mathrm{ca}}$，必须防止被替换的项中的自由变量被公式中的量词捕获。被替换的项是 $y$，其自由变量集合是 $\\{y\\}$。$\\theta$ 中 $x$ 的自由出现位于子公式 $P(x,y)$ 中，而该子公式处于量词 $\\forall y$ 的作用域内。由于变量 $y$（它在我们正在替换的项中）被这个量词绑定，将会发生捕获。为避免这种情况，我们必须首先将被绑定的变量 $y$ 重命名为一个全新变量，问题指定为 $y'$。\n这个重命名（α-变换）应用于子公式 $\\forall y \\, (\\dots)$。我们将 $\\forall y$ 替换为 $\\forall y'$，并将其绑定的所有 $y$ 的出现替换为 $y'$。\n重命名后的公式，我们称之为 $\\theta'$，是：\n$$\n\\theta' \\equiv \\Big( \\forall y' \\, \\big( ( P(x,y') \\land \\exists x \\, ( Q(x,y') \\land \\forall z \\, R(x,z) ) ) \\lor H(y') \\big) \\Big) \\land \\Big( \\exists u \\, S(u) \\Big)\n$$\n现在我们可以安全地将 $\\theta'$ 中 $x$ 的自由出现替换为 $y$。唯一的自由 $x$ 在 $P(x,y')$ 中。这得到公式 $\\theta_{\\mathrm{ca}}$：\n$$\n\\theta_{\\mathrm{ca}} \\equiv \\Big( \\forall y' \\, \\big( ( P(y,y') \\land \\exists x \\, ( Q(x,y') \\land \\forall z \\, R(x,z) ) ) \\lor H(y') \\big) \\Big) \\land \\Big( \\exists u \\, S(u) \\Big)\n$$\n现在，我们求 $\\theta_{\\mathrm{ca}}$ 的自由变量集合，记为 $\\mathrm{FV}(\\theta_{\\mathrm{ca}})$。\n- 第二个合取项 $\\exists u \\, S(u)$ 没有自由变量。\n- 在第一个合取项中，量词 $\\forall y'$ 绑定了其作用域内所有 $y'$ 的出现。这包括 $P$ 的第二个参数、$Q$ 的第二个参数以及 $H$ 的参数。\n- $P(y,y')$ 中的变量 $y$ 不在任何绑定 $y$ 的量词（如 $\\forall y$ 或 $\\exists y$）的作用域内。因此，这个 $y$ 的出现是自由的。\n- 变量 $x$ 和 $z$ 分别被各自的量词 $\\exists x$ 和 $\\forall z$ 绑定。\n$\\theta_{\\mathrm{ca}}$ 中唯一的自由变量是 $y$。\n因此，自由变量集合是 $\\mathrm{FV}(\\theta_{\\mathrm{ca}}) = \\{y\\}$。\n\n**3. 对称差与基数**\n\n最后，我们计算两个自由变量集合 $\\mathrm{FV}(\\theta_{\\mathrm{naive}})$ 和 $\\mathrm{FV}(\\theta_{\\mathrm{ca}})$ 的对称差的基数。两个集合 $A$ 和 $B$ 的对称差由 $A \\triangle B = (A \\setminus B) \\cup (B \\setminus A)$ 给出。\n\n我们有：\n$\\mathrm{FV}(\\theta_{\\mathrm{naive}}) = \\emptyset$\n$\\mathrm{FV}(\\theta_{\\mathrm{ca}}) = \\{y\\}$\n\n对称差为：\n$$\n\\mathrm{FV}(\\theta_{\\mathrm{naive}}) \\triangle \\mathrm{FV}(\\theta_{\\mathrm{ca}}) = (\\emptyset \\setminus \\{y\\}) \\cup (\\{y\\} \\setminus \\emptyset) = \\emptyset \\cup \\{y\\} = \\{y\\}\n$$\n该集合的基数是它包含的元素数量。\n$$\n\\left| \\mathrm{FV}(\\theta_{\\mathrm{naive}}) \\triangle \\mathrm{FV}(\\theta_{\\mathrm{ca}}) \\right| = |\\{y\\}| = 1\n$$\n基数为 $1$。", "answer": "$$\\boxed{1}$$", "id": "3053947"}, {"introduction": "这个最终练习将通过一个需要完整无捕获替换程序的场景来巩固你的技能。面对一个项中含有多个变量，而这些变量可能被公式中不同量词捕获的情况，你需要识别所有潜在的捕获风险。通过系统地重命名约束变量（即α-换元）来为安全替换铺平道路，你将掌握在复杂情况下确保逻辑有效性的完整方法。", "problem": "请在经典一阶逻辑（FOL）中进行演算，其签名包含一个二元函数符号 $f$ 和二元谓词符号 $A$ 与 $B$。考虑项 $t \\equiv f(y,z)$ 和公式 $\\varphi \\equiv \\forall z\\,\\bigl(A(x,z) \\rightarrow \\exists y\\,B(y,x)\\bigr)$。请仅使用自由变量和约束变量的标准形式化定义、$\\alpha$-转换（约束变量的系统性重命名）以及避免捕获的替换，执行将 $\\varphi$ 中的 $x$ 替换为 $t$ 的操作。为避免变量捕获，请提供完整的重命名细节，然后执行替换。通过从第一性原理出发的直接分析，验证结果公式的自由变量集合。令 $N$ 表示在正确的避免捕获的替换之后，结果公式中不同自由变量的数量。将 $N$ 作为您的最终答案报告。", "solution": "该问题要求我们在阶逻辑中执行一个避免捕获的替换，并确定结果公式中自由变量的数量。\n\n首先，我们明确问题的给定组成部分。我们在经典一阶逻辑中进行演算。\n要替换的项是 $t \\equiv f(y,z)$。\n要进行替换的公式是 $\\varphi \\equiv \\forall z\\,\\bigl(A(x,z) \\rightarrow \\exists y\\,B(y,x)\\bigr)$。\n替换操作是将公式 $\\varphi$ 中的变量 $x$ 替换为项 $t$，记作 $\\varphi[t/x]$。\n\n避免捕获的替换 $\\psi[t/x]$ 的标准定义要求，对于项 $t$ 中存在的任何变量 $v$，$\\psi$ 中 $x$ 的任何自由出现都不能在约束 $v$ 的量词（即 $\\forall v$ 或 $\\exists v$）的作用域内。如果出现这种情况（称为“变量捕获”），则必须首先通过 $\\alpha$-转换将 $\\psi$ 中的约束变量 $v$ 重命名为一个新变量。\n\n我们来分析替换 $\\varphi[t/x]$ 中变量捕获的可能性。\n项 $t \\equiv f(y,z)$ 中的变量集合是 $Var(t) = \\{y, z\\}$。\n公式 $\\varphi$ 中的自由变量集合是 $FV(\\varphi)$。变量 $x$ 在 $\\varphi$ 中不受任何量词约束，因此是自由的。变量 $z$ 被 $\\forall z$ 约束，变量 $y$ 被 $\\exists y$ 约束。因此，$FV(\\varphi) = \\{x\\}$。\n\n我们必须检查将 $t$ 替换 $x$ 是否会导致 $Var(t)$ 中的任何变量被 $\\varphi$ 中的量词捕获。\n$1$. 变量 $z \\in Var(t)$。公式 $\\varphi$ 的形式为 $\\forall z\\,\\psi_1$，其中 $\\psi_1 \\equiv A(x,z) \\rightarrow \\exists y\\,B(y,x)$。变量 $x$ 在 $\\psi_1$ 中自由出现，而 $\\psi_1$ 在量词 $\\forall z$ 的作用域内。一个简单的替换会将 $x$ 替换为 $f(y,z)$，导致项 $t$ 中的 $z$ 被量词 $\\forall z$ 捕获。这是不允许的。\n$2$. 变量 $y \\in Var(t)$。子公式 $\\exists y\\,B(y,x)$ 是 $\\varphi$ 的一部分。变量 $x$ 在此子公式中自由出现，而该子公式在量词 $\\exists y$ 的作用域内。一个简单的替换会将 $x$ 替换为 $f(y,z)$，导致项 $t$ 中的 $y$ 被量词 $\\exists y$ 捕获。这也是不允许的。\n\n为避免这两种变量捕获的情况，我们必须对 $\\varphi$ 执行 $\\alpha$-转换，以重命名约束变量 $z$ 和 $y$。我们选择新变量 $z'$ 和 $y'$，它们不在 $\\varphi$ 或 $t$ 中自由出现。我们将 $z$ 重命名为 $z'$，将 $y$ 重命名为 $y'$。\n\n首先，我们在 $\\varphi$ 中重命名约束变量 $z$：\n$\\varphi' \\equiv \\forall z'\\,\\bigl((A(x,z) \\rightarrow \\exists y\\,B(y,x))[z'/z]\\bigr)$\n$\\varphi' \\equiv \\forall z'\\,\\bigl(A(x,z') \\rightarrow \\exists y\\,B(y,x)\\bigr)$\n公式 $\\varphi'$ 与 $\\varphi$ 是 $\\alpha$-等价的。\n\n接下来，我们在 $\\varphi'$ 中重命名约束变量 $y$：\n$\\varphi'' \\equiv \\forall z'\\,\\bigl(A(x,z') \\rightarrow (\\exists y\\,B(y,x))[y'/y]\\bigr)$\n$\\varphi'' \\equiv \\forall z'\\,\\bigl(A(x,z') \\rightarrow \\exists y'\\,(B(y,x)[y'/y])\\bigr)$\n$\\varphi'' \\equiv \\forall z'\\,\\bigl(A(x,z') \\rightarrow \\exists y'\\,B(y',x)\\bigr)$\n公式 $\\varphi''$ 与 $\\varphi$ 和 $\\varphi'$ 是 $\\alpha$-等价的。\n\n现在，可以执行替换 $\\varphi''[t/x]$ 而不会发生变量捕获。$\\varphi''$ 中的约束变量集合是 $\\{y', z'\\}$，它与 $Var(t) = \\{y, z\\}$ 不相交。我们将 $\\varphi''$ 中 $x$ 的每个自由出现都替换为 $t \\equiv f(y,z)$。\n$\\varphi_{res} \\equiv \\varphi''[f(y,z)/x] \\equiv \\left(\\forall z'\\,\\bigl(A(x,z') \\rightarrow \\exists y'\\,B(y',x)\\bigr)\\right)[f(y,z)/x]$\n$\\varphi_{res} \\equiv \\forall z'\\,\\bigl(A(x,z')[f(y,z)/x] \\rightarrow (\\exists y'\\,B(y',x))[f(y,z)/x]\\bigr)$\n$\\varphi_{res} \\equiv \\forall z'\\,\\bigl(A(f(y,z),z') \\rightarrow \\exists y'\\,B(y', f(y,z))\\bigr)$\n这就是经过正确的、避免捕获的替换后得到的结果公式。\n\n最后，我们必须通过从第一性原理出发的直接分析，来确定结果公式 $\\varphi_{res}$ 的自由变量集合。\n该公式为 $\\varphi_{res} \\equiv \\forall z'\\,\\bigl(A(f(y,z),z') \\rightarrow \\exists y'\\,B(y',f(y,z))\\bigr)$。\n全称量化公式 $\\forall v\\,\\psi$ 的自由变量集合是 $FV(\\psi) \\setminus \\{v\\}$。此处，$v=z'$。\n量词的主体是 $\\psi \\equiv A(f(y,z),z') \\rightarrow \\exists y'\\,B(y',f(y,z))$。\n蕴含式 $\\psi_1 \\rightarrow \\psi_2$ 的自由变量集合是 $FV(\\psi_1) \\cup FV(\\psi_2)$。\n我们来找出前件 $\\psi_1 \\equiv A(f(y,z),z')$ 的自由变量。\n原子公式的自由变量是其项中的变量。这些项是 $f(y,z)$ 和 $z'$。\n$Var(f(y,z)) = \\{y,z\\}$。\n$Var(z') = \\{z'\\}$。\n所以，$FV(A(f(y,z),z')) = \\{y, z, z'\\}$。\n\n接下来，我们找出后件 $\\psi_2 \\equiv \\exists y'\\,B(y',f(y,z))$ 的自由变量。\n存在量化公式 $\\exists v\\,\\chi$ 的自由变量集合是 $FV(\\chi) \\setminus \\{v\\}$。此处，$v=y'$。\n量词的主体是 $\\chi \\equiv B(y',f(y,z))$。\n这个原子公式的自由变量是其项中的变量，$y'$ 和 $f(y,z)$。\n$Var(y') = \\{y'\\}$。\n$Var(f(y,z)) = \\{y,z\\}$。\n所以，$FV(B(y',f(y,z))) = \\{y', y, z\\}$。\n那么，$FV(\\exists y'\\,B(y',f(y,z))) = FV(B(y',f(y,z))) \\setminus \\{y'\\} = \\{y', y, z\\} \\setminus \\{y'\\} = \\{y, z\\}$。\n\n现在我们可以找到蕴含式 $\\psi$ 的自由变量：\n$FV(\\psi) = FV(A(f(y,z),z')) \\cup FV(\\exists y'\\,B(y',f(y,z)))$\n$FV(\\psi) = \\{y, z, z'\\} \\cup \\{y, z\\} = \\{y, z, z'\\}$。\n\n最后，我们找到整个公式 $\\varphi_{res}$ 的自由变量：\n$FV(\\varphi_{res}) = FV(\\forall z'\\,\\psi) = FV(\\psi) \\setminus \\{z'\\}$\n$FV(\\varphi_{res}) = \\{y, z, z'\\} \\setminus \\{z'\\} = \\{y, z\\}$。\n\n结果公式中的自由变量集合是 $\\{y, z\\}$。不同自由变量的数量是该集合的基数。\n因此，$N = |\\{y, z\\}| = 2$。", "answer": "$$\\boxed{2}$$", "id": "3053962"}]}
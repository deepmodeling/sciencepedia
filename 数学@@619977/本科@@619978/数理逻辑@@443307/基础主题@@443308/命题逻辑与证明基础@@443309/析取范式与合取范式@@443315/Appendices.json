{"hands_on_practices": [{"introduction": "从一个逻辑函数的真值表直接导出其范式，是理解析取范式（DNF）和合取范式（CNF）的基石。这个练习将指导你为基本的逻辑蕴含算子构建完整的主析取范式（PDNF）和主合取范式（PCNF）。通过这个过程，你将清晰地看到真值赋值与范式结构之间的直接对应关系，并体会到两种范式在表示同一逻辑功能时的对称性与差异。[@problem_id:3040339]", "problem": "考虑布尔变量 $x$ 和 $y$ 上的命题公式 $x \\to y$，其中 $x$ 和 $y$ 各自取值于 $\\{0,1\\}$，$0$ 解释为“假”，$1$ 解释为“真”。使用命题逻辑中蕴含的经典语义：当且仅当 $p$ 为真且 $q$ 为假时，语句 $p \\to q$ 为假，否则为真。针对所有 $2^{2}$ 种赋值，构造 $x \\to y$ 的完整真值表。使用真值表和以下标准定义，推导出 $x \\to y$ 的完整析取范式 (DNF) 和完整合取范式 (CNF)。\n\n待使用的定义：\n- 析取范式 (DNF) 是文字的合取之析取，其中文字是变量或其否定。完整 DNF 是通过对所有对应于满足赋值的极小项进行析取得到的，每个极小项是包含所有变量的合取，如果变量赋值为 $1$ 则以正向形式出现，如果赋值为 $0$ 则以反向形式出现。\n- 合取范式 (CNF) 是文字的析取之合取。完整 CNF 是通过对所有对应于证伪赋值的极大项进行合取得到的，每个极大项是包含所有变量的析取，如果变量赋值为 $1$ 则以否定形式出现，如果赋值为 $0$ 则以非否定形式出现，从而使得该极大项恰好在该赋值上为假。\n\n在推导出完整 DNF 和完整 CNF 后，计算完整 DNF 中的析取项数量和完整 CNF 中的合取子句数量。令 $\\mathcal{R}$ 为如下定义的比率\n$$\n\\mathcal{R} = \\frac{\\text{完整 DNF 中的析取项数量}}{\\text{完整 CNF 中的合取子句数量}}。\n$$\n计算 $\\mathcal{R}$ 并将其作为最终答案。无需四舍五入。", "solution": "在尝试给出解答之前，首先对问题进行验证。\n\n### 步骤 1：提取已知条件\n-   **命题公式：** $x \\to y$\n-   **变量与定义域：** 布尔变量 $x$ 和 $y$，各自取值于 $\\{0,1\\}$，其中 $0$ 代表“假”，$1$ 代表“真”。\n-   **蕴含的语义：** 当且仅当 $p$ 为真且 $q$ 为假时，语句 $p \\to q$ 为假，否则为真。\n-   **任务：** 构造 $x \\to y$ 的完整真值表。\n-   **完整析取范式 (DNF) 的定义：** 对所有对应于满足赋值的极小项进行析取。极小项是包含所有变量的合取，如果变量赋值为 $1$ 则以正向形式出现，如果赋值为 $0$ 则以反向形式出现。\n-   **完整合取范式 (CNF) 的定义：** 对所有对应于证伪赋值的极大项进行合取。极大项是包含所有变量的析取，如果变量赋值为 $1$ 则以否定形式出现，如果赋值为 $0$ 则以非否定形式出现。\n-   **最终计算：** 计算比率 $\\mathcal{R} = \\frac{\\text{完整 DNF 中的析取项数量}}{\\text{完整 CNF 中的合取子句数量}}$。\n\n### 步骤 2：使用提取的已知条件进行验证\n该问题在经典命题逻辑的框架内定义明确。蕴含、DNF 和 CNF 的定义是标准的且一致的。任务规定清晰，能够导出一个唯一、可推导的结果。问题是自包含的，具有数学逻辑的科学基础，并且是客观的。它不违反任何无效性标准。\n\n### 步骤 3：结论与行动\n问题有效。将提供解答。\n\n第一步是为命题公式 $x \\to y$ 构造完整的真值表。变量 $x$ 和 $y$ 可以取值于 $\\{0, 1\\}$，这导致了 $2^2 = 4$ 种可能的真值赋值。根据所提供的语义，$x \\to y$ 为假（值为 $0$）当且仅当 $x$ 为真（$1$）且 $y$ 为假（$0$）。在所有其他情况下，它为真（值为 $1$）。\n\n真值表如下：\n\n| 行 | $x$ | $y$ | $x \\to y$ |\n|:---:|:---:|:---:|:---------:|\n| $1$ | $0$ | $0$ |     $1$     |\n| $2$ | $0$ | $1$ |     $1$     |\n| $3$ | $1$ | $0$ |     $0$     |\n| $4$ | $1$ | $1$ |     $1$     |\n\n接下来，我们推导完整析取范式 (DNF)。完整 DNF 是极小项的析取，每个极小项对应一个满足赋值（即真值表中公式值为 $1$ 的行）。极小项是所有文字（变量或其否定）的合取。如果变量在赋值中为 $1$，则以其正向形式出现；如果为 $0$，则以其否定形式出现。\n\n从真值表中， $x \\to y$ 的满足赋值是：\n-   第 $1$ 行： $(x=0, y=0)$\n-   第 $2$ 行： $(x=0, y=1)$\n-   第 $4$ 行： $(x=1, y=1)$\n\n我们为这些赋值中的每一个构造极小项：\n-   对于 $(x=0, y=0)$，极小项是 $(\\neg x \\land \\neg y)$。\n-   对于 $(x=0, y=1)$，极小项是 $(\\neg x \\land y)$。\n-   对于 $(x=1, y=1)$，极小项是 $(x \\land y)$。\n\n完整 DNF 是这些极小项的析取：\n$$(\\neg x \\land \\neg y) \\lor (\\neg x \\land y) \\lor (x \\land y)$$\n完整 DNF 中的析取项数量就是满足赋值的数量，即 $3$。\n\n接下来，我们推导完整合取范式 (CNF)。完整 CNF 是极大项的合取，每个极大项对应一个证伪赋值（即公式值为 $0$ 的行）。极大项是所有文字的析取。如果变量在赋值中为 $1$，则以其否定形式出现；如果为 $0$，则以其正向形式出现。这种构造确保了极大项本身在该特定赋值下值为 $0$。\n\n从真值表中，$x \\to y$ 只有一个证伪赋值：\n-   第 $3$ 行： $(x=1, y=0)$\n\n我们为这个赋值构造极大项：\n-   对于 $(x=1, y=0)$，变量 $x$（值为 $1$）以否定形式出现，变量 $y$（值为 $0$）以非否定形式出现。极大项是 $(\\neg x \\lor y)$。\n\n完整 CNF 就是这单个极大项：\n$$(\\neg x \\lor y)$$\n完整 CNF 中的合取子句数量就是证伪赋值的数量，即 $1$。\n\n最后，我们计算问题陈述中定义的比率 $\\mathcal{R}$：\n$$\n\\mathcal{R} = \\frac{\\text{完整 DNF 中的析取项数量}}{\\text{完整 CNF 中的合取子句数量}}\n$$\n代入计数值：\n$$\n\\mathcal{R} = \\frac{3}{1} = 3\n$$", "answer": "$$\\boxed{3}$$", "id": "3040339"}, {"introduction": "虽然主范式在理论上具有唯一性和完整性，但在实际应用中它们往往不是最简洁的表示。为了优化逻辑电路设计或数据库查询，逻辑化简是至关重要的一步。本练习将通过一个具体的传感器系统场景，让你运用布尔代数法则来简化一个给定的析取范式，目标是找到使用最少文字量的等价形式。[@problem_id:1358964]", "problem": "一个小型化学反应器的系统控制器依赖于三个二进制传感器：$S_1$（温度）、$S_2$（压力）和 $S_3$（冷却剂流量）。一个信号由一个逻辑变量表示，如果传感器读数高于某个阈值，该变量为真（逻辑1），否则为假（逻辑0）。\n\n安全警报函数 $F(S_1, S_2, S_3)$ 定义为真，当且仅当满足以下任一条件：\n1.  传感器 $S_1$ 为假，传感器 $S_2$ 为假，且传感器 $S_3$ 为真。\n2.  传感器 $S_1$ 为假，传感器 $S_2$ 为真，且传感器 $S_3$ 为真。\n3.  传感器 $S_1$ 为真，传感器 $S_2$ 为真，且传感器 $S_3$ 为真。\n\n这对应于一种析取范式（DNF），即合取项的析取。为了优化控制器的逻辑，需要找到一个使用尽可能少文字的等价DNF表示。一个文字是一个变量或其否定（例如，$S_1$ 和 $\\neg S_1$ 都是文字）。一个DNF表达式中的文字总数是其每个积项中文字数量的总和。\n\n要以等价DNF形式表示函数 $F$，所需的最小文字总数是多少？", "solution": "给定函数的DNF形式为\n$$F = (\\neg S_{1} \\land \\neg S_{2} \\land S_{3}) \\lor (\\neg S_{1} \\land S_{2} \\land S_{3}) \\lor (S_{1} \\land S_{2} \\land S_{3}).$$\n首先，提取出现在每一项中的公因子 $S_3$：\n$$F = S_{3} \\land \\big[(\\neg S_{1} \\land \\neg S_{2}) \\lor (\\neg S_{1} \\land S_{2}) \\lor (S_{1} \\land S_{2})\\big].$$\n简化括号内的表达式。合并前两项：\n$$(\\neg S_{1} \\land \\neg S_{2}) \\lor (\\neg S_{1} \\land S_{2}) = \\neg S_{1} \\land (\\neg S_{2} \\lor S_{2}) = \\neg S_{1}.$$\n因此\n$$F = S_{3} \\land \\big[\\neg S_{1} \\lor (S_{1} \\land S_{2})\\big].$$\n使用分配律 $X \\lor (Y \\land Z) = (X \\lor Y) \\land (X \\lor Z)$，其中 $X=\\neg S_{1}$，$Y=S_{1}$，$Z=S_{2}$：\n$$\\neg S_{1} \\lor (S_{1} \\land S_{2}) = (\\neg S_{1} \\lor S_{1}) \\land (\\neg S_{1} \\lor S_{2}) = 1 \\land (\\neg S_{1} \\lor S_{2}) = \\neg S_{1} \\lor S_{2}.$$\n因此，最小化的积之和形式为\n$$F = S_{3} \\land (\\neg S_{1} \\lor S_{2}) = (\\neg S_{1} \\land S_{3}) \\lor (S_{2} \\land S_{3}).$$\n这个DNF有两个积项，每个积项有两个文字，总共为4个文字。\n\n要证明这是最小的，请注意：\n- 因为 $F(1,0,1)=0$，任何只包含 $S_3$ 的蕴含项都会错误地覆盖 $(1,0,1)$，所以每个积项除了 $S_3$ 外，还必须至少包含 $\\neg S_1$ 或 $S_2$ 中的一个；因此每项至少需要两个文字。\n- 这三个真值点 $(0,0,1)$、$(0,1,1)$ 和 $(1,1,1)$ 无法被一个单独的2-文字项覆盖，而不也覆盖 $(1,0,1)$，所以至少需要两个积项。\n\n因此，下限为 $2$ 个项乘以每个项 $2$ 个文字，即总共 $4$ 个文字，这由 $F = \\neg S_{1} S_{3} \\lor S_{2} S_{3}$ 实现。", "answer": "$$\\boxed{4}$$", "id": "1358964"}, {"introduction": "在自动推理和可满足性问题（SAT）求解等领域，如何高效地将复杂公式转换为合取范式是一个核心挑战。本练习将深入探讨两种不同的CNF编码策略：直接使用分配律的朴素方法，以及引入辅助变量的 Tseitin 变换。通过对异或（XOR）函数进行编码，你将分析并比较这两种方法在子句数量和传播完备性等关键性质上的优劣。[@problem_id:3040370]", "problem": "设 $x$ 和 $y$ 为命题变量，并令 $\\oplus$ 表示异或 (XOR)，使得当且仅当 $x$ 和 $y$ 的真值不同时，$x \\oplus y$ 为真。合取范式 (CNF) 是文字的析取式的合取，而析取范式 (DNF) 是文字的合取式的析取。Tseitin 变换引入辅助变量来表示子公式，并通过添加子句来强制等价，从而在线性规模内保持可满足性。\n\n你将以两种方式将约束 $x \\oplus y$ 编码为 CNF，并分析它们在子句数量和传播方面的性质。在整个过程中，仅使用基本的命题等价关系，包括 $\\leftrightarrow$ 和 $\\rightarrow$ 的定义、德摩根定律以及 $\\lor$ 对 $\\land$ 的分配律。\n\n1. 仅使用变量 $x$ 和 $y$，从定义 $x \\oplus y \\equiv (x \\land \\lnot y) \\lor (\\lnot x \\land y)$ 出发，通过正确应用分配律和化简，推导出与 $x \\oplus y$ 逻辑等价的 CNF。\n\n2. 引入一个辅助变量 $a$，并推导出一个 Tseitin 风格的 CNF 来强制 $a \\leftrightarrow (x \\oplus y)$。然后添加单位子句 $(a)$ 以通过辅助变量断言 XOR 约束。你的子句集必须通过以下步骤获得：首先将 $\\leftrightarrow$ 重写为蕴含式，然后将每个蕴含式 $p \\rightarrow q$ 重写为 $\\lnot p \\lor q$，通过德摩根定律将否定向内推，并分配 $\\lor$ 到 $\\land$ 上以达到 CNF，并在出现重言式时进行化简。在此计数步骤中，不要通过单位传播来消除子句。\n\n3. 对于这两种编码，根据单位传播 (UP) 的定义和传播完备编码的概念进行推理，如下所示：如果对于变量 $V$ 上的任何部分赋值，每当约束在逻辑上强制一个文字或检测到不一致性时，CNF 上的 UP 也能强制相同的文字或推导出空子句，则称该约束在变量 $V$ 上的编码是传播完备的。论证你的两种编码在断言 XOR 约束的情况下，对于变量 $x$ 和 $y$ 是否是传播完备的。\n\n将开销比 $R$ 定义为基于 Tseitin 的编码中的子句总数（包括单位子句 $(a)$，在通过单位传播或归入进行任何化简之前计数）除以第 1 部分中朴素 CNF 的子句数。精确计算 $R$。你的最终答案必须是这个精确的比率，形式为单个最简分数或等效的封闭形式表达式；不需要四舍五入。", "solution": "本问题要求推导和分析异或 (XOR) 约束的两种不同合取范式 (CNF) 编码，然后比较它们的性质。\n\n首先，我们处理仅使用变量 $x$ 和 $y$ 推导与 $x \\oplus y$ 逻辑等价的 CNF 的任务。XOR 的定义为 $x \\oplus y \\equiv (x \\land \\lnot y) \\lor (\\lnot x \\land y)$。这是 XOR 函数的析取范式 (DNF)。为了将此 DNF 转换为 CNF，我们应用析取对合取的分配律。当应用于两个合取式时，该定律的一般形式是 $(A \\land B) \\lor (C \\land D) \\equiv (A \\lor C) \\land (A \\lor D) \\land (B \\lor C) \\land (B \\lor D)$。\n\n令 $A=x$, $B=\\lnot y$, $C=\\lnot x$, 及 $D=y$。将这些代入分配律可得：\n$$\n(x \\land \\lnot y) \\lor (\\lnot x \\land y) \\equiv (x \\lor \\lnot x) \\land (x \\lor y) \\land (\\lnot y \\lor \\lnot x) \\land (\\lnot y \\lor y)\n$$\n我们观察到结果中的两个子句是重言式：\n- $(x \\lor \\lnot x)$ 恒为真。\n- $(\\lnot y \\lor y)$ 恒为真。\n在合取式中，一个恒为真的子句可以被移除而不改变表达式的逻辑含义。因此，表达式化简为：\n$$\n(x \\lor y) \\land (\\lnot y \\lor \\lnot x)\n$$\n这即是 $x \\oplus y$ 的 CNF。它由两个子句组成：$(x \\lor y)$ 和 $(\\lnot x \\lor \\lnot y)$。这种直接编码中的子句数量为 $2$。\n\n其次，我们为相同的约束推导一个 Tseitin 风格的 CNF。我们引入一个辅助变量 $a$ 并强制等价关系 $a \\leftrightarrow (x \\oplus y)$。为了断言 XOR 约束，我们稍后将添加单位子句 $(a)$。问题指定了转换过程。该等价关系首先被写成两个蕴含式的合取：\n$$\na \\leftrightarrow (x \\oplus y) \\equiv (a \\rightarrow (x \\oplus y)) \\land ((x \\oplus y) \\rightarrow a)\n$$\n我们将每个蕴含式转换为其析取形式 ($\\lnot p \\lor q$)。\n第一部分是 $a \\rightarrow (x \\oplus y)$，它变为 $\\lnot a \\lor (x \\oplus y)$。为了将其转换为 CNF，我们代入我们之前推导出的 $x \\oplus y$ 的 CNF：\n$$\n\\lnot a \\lor ((x \\lor y) \\land (\\lnot x \\lor \\lnot y))\n$$\n现在，我们将 $\\lnot a \\lor \\dots$ 分配到合取式上：\n$$\n(\\lnot a \\lor (x \\lor y)) \\land (\\lnot a \\lor (\\lnot x \\lor \\lnot y))\n$$\n这得到两个子句：$(\\lnot a \\lor x \\lor y)$ 和 $(\\lnot a \\lor \\lnot x \\lor \\lnot y)$。\n\n第二部分是 $(x \\oplus y) \\rightarrow a$，它变为 $\\lnot(x \\oplus y) \\lor a$。我们需要 $\\lnot(x \\oplus y)$ 的 CNF。从逻辑上讲，$\\lnot(x \\oplus y)$ 等价于 $x \\leftrightarrow y$，其 DNF 为 $(x \\land y) \\lor (\\lnot x \\land \\lnot y)$。为了遵循问题的指示，我们必须将否定向内推到 $x \\oplus y$ 的 DNF 上：\n$$\n\\lnot((x \\land \\lnot y) \\lor (\\lnot x \\land y)) \\lor a\n$$\n应用德摩根定律：\n$$\n(\\lnot(x \\land \\lnot y) \\land \\lnot(\\lnot x \\land y)) \\lor a\n$$\n$$\n((\\lnot x \\lor y) \\land (x \\lor \\lnot y)) \\lor a\n$$\n现在，我们将 $\\lor a$ 分配到合取式上：\n$$\n((\\lnot x \\lor y) \\lor a) \\land ((x \\lor \\lnot y) \\lor a)\n$$\n这又得到两个子句：$(\\lnot x \\lor y \\lor a)$ 和 $(x \\lor \\lnot y \\lor a)$。\n总的来说，$a \\leftrightarrow (x \\oplus y)$ 的 CNF 由四个子句组成：\n$1$. $(\\lnot a \\lor x \\lor y)$\n$2$. $(\\lnot a \\lor \\lnot x \\lor \\lnot y)$\n$3$. $(a \\lor \\lnot x \\lor y)$\n$4$. $(a \\lor x \\lor \\lnot y)$\n\n为了断言 XOR 约束，我们添加单位子句 $(a)$。因此，完整的基于 Tseitin 的编码包含这四个子句加上子句 $(a)$，在任何化简前总共有 $5$ 个子句。\n\n第三，我们分析两种编码相对于变量 $x$ 和 $y$ 的传播完备性。如果对于任何部分赋值，逻辑推断都能由单位传播 (UP) 复现，则该编码是传播完备的。\n\n对于直接编码 $(\\lnot x \\lor \\lnot y) \\land (x \\lor y)$：\n假设我们进行部分赋值 $x=True$。CNF 变为 $(\\lnot \\top \\lor \\lnot y) \\land (\\top \\lor y)$，化简为 $(\\bot \\lor \\lnot y) \\land \\top$。这进一步化简为单位子句 $(\\lnot y)$。对此子句进行单位传播会强制赋值 $y=False$。这个推导与 $x \\oplus y$ 的逻辑要求相符：如果 $x$ 为真，则 $y$ 必须为假。\n类似地，如果我们赋值 $x=False$，CNF 变为 $(\\lnot \\bot \\lor \\lnot y) \\land (\\bot \\lor y)$，即 $(\\top \\lor \\lnot y) \\land y$，化简为单位子句 $(y)$。UP 强制 $y=True$。这也与逻辑推导相符。\n如果我们首先给 $y$ 赋一个真值，同样的推理也对称适用。因此，直接编码是传播完备的。\n\n对于基于 Tseitin 的编码，完整的子句集是 $\\{(\\lnot a \\lor x \\lor y), (\\lnot a \\lor \\lnot x \\lor \\lnot y), (a \\lor \\lnot x \\lor y), (a \\lor x \\lor \\lnot y), (a)\\}$。XOR 约束通过单位子句 $(a)$ 来断言。对 $(a)$ 进行单位传播会设置 $a=True$。这会立即化简子句集：\n- $(\\lnot a \\lor x \\lor y)$ 变为 $(\\bot \\lor x \\lor y) \\Rightarrow (x \\lor y)$。\n- $(\\lnot a \\lor \\lnot x \\lor \\lnot y)$ 变为 $(\\bot \\lor \\lnot x \\lor \\lnot y) \\Rightarrow (\\lnot x \\lor \\lnot y)$。\n- $(a \\lor \\lnot x \\lor y)$ 变为 $(\\top \\lor \\lnot x \\lor y)$，这是一个重言式并被移除。\n- $(a \\lor x \\lor \\lnot y)$ 变为 $(\\top \\lor x \\lor \\lnot y)$，这是一个重言式并被移除。\n在传播 $(a)$ 之后，约束变量 $x$ 和 $y$ 的子句集是 $\\{ (x \\lor y), (\\lnot x \\lor \\lnot y) \\}$。这与第一部分的直接编码完全相同。因此，任何后续基于对 $x$ 或 $y$ 的部分赋值的单位传播行为将与直接编码中的完全一样。所以，基于 Tseitin 的编码，在与断言该约束的单位子句结合时，对于变量 $x$ 和 $y$ 也是传播完备的。\n\n最后，我们计算开销比 $R$。它被定义为基于 Tseitin 的编码中的子句总数（包括单位子句，在化简前）除以直接 CNF 中的子句数。\n直接 CNF 中的子句数，$N_{direct} = 2$。\nTseitin 编码中的子句数，$N_{Tseitin} = 4 + 1 = 5$。\n比率 $R$ 是：\n$$\nR = \\frac{N_{Tseitin}}{N_{direct}} = \\frac{5}{2}\n$$", "answer": "$$\\boxed{\\frac{5}{2}}$$", "id": "3040370"}]}